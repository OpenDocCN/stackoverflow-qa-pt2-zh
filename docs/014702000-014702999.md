# StackOverflow 问答 14702000-14702999

# java - 加载 applicationContext 时出现 FileNotFound 异常

> ID：14702001
> 
> 赞同：1
> 
> 时间：2013-02-05T07:12:36.910
> 
> 标签：java, spring, applicationcontext

我有一个使用[Spring Framework](http://en.wikipedia.org/wiki/Spring_Framework)的应用程序。突然间，我开始在服务器启动时遇到异常。例外情况如下：

```
ContextLoader E org.springframework.web.context.ContextLoader initWebApplicationContext
   Context initialization failed
   org.springframework.beans.factory.BeanDefinitionStoreException:
   IOException parsing XML document from ServletContext resource
   [/WEB-INF/applicationContext.xml]; nested exception is
   java.io.FileNotFoundException: Could not open ServletContext resource
   [/WEB-INF/applicationContext.xml] 
```

但我肯定在 src/main/webapp/WEB-INF/ 文件夹中有这个文件。我正在使用 IBM [WebSphere](http://en.wikipedia.org/wiki/IBM_WebSphere)，并且在服务器启动时出现此异常。如果我只是重新部署我的应用程序（我在[IntelliJ IDEA](http://en.wikipedia.org/wiki/IntelliJ_IDEA)工作） - 没有发现异常。

值得补充的是，我突然开始得到这个异常。我没有更改我的配置文件。

我该如何解决这个问题？

这是我的`web.xml`文件：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:29:15.120

我刚刚检查了我的 IBM WebSphere 应用程序服务器上的应用程序列表，并发现另一个应用程序给出了这个异常。

# iphone - 在 ios 5 中集成 facebook 会出错

> ID：14702002
> 
> 赞同：0
> 
> 时间：2013-02-05T07:12:41.833
> 
> 标签：iphone, ios, facebook

我正在创建一个使用 facebook 登录的应用程序。我正在使用 facebook SDK 3.1 但它显示错误，我已将 facebook.framwork 和 resourcefole 添加到我的项目中，但它仍然显示错误。

这是错误报告。

```
Undefined symbols for architecture i386:
  "_sqlite3_open_v2", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_exec", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_close", referenced from:
      ___23-[FBCacheIndex dealloc]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_finalize", referenced from:
      _releaseStatement in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_errmsg", referenced from:
      _releaseStatement in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      _initializeStatement in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
      ...
  "_sqlite3_bind_text", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_bind_double", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_bind_int", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_step", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _dropTrimmingTable] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
      ...
  "_sqlite3_prepare_v2", referenced from:
      _initializeStatement in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_reset", referenced from:
      _initializeStatement in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_column_text", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_column_double", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_column_int", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:43:05.290

由于 sqlite3，您会收到定义符号错误。

在 XCode 项目的构建设置中的其他链接器标志中，确保设置标志 -lsqlite3.0。确保在添加框架帐户、广告支持、社交旁边设置它。

# jquery - $.getJSON() 没有返回数据（JSP、Servlet、jQuery Ajax）

> ID：14702003
> 
> 赞同：0
> 
> 时间：2013-02-05T07:12:43.033
> 
> 标签：jquery, ajax, jsp, servlets, getjson

我正在尝试使用 JSP、Servlet 和 JDBC 学习 jQuery Ajax。

什么都在尝试：我在 JSP 中有两个文本框。当我在第一个中输入内容并点击 Tab 时，在其模糊事件中，我对一个 servlet 进行 getJson() 调用，该 servlet 又调用一个 JDBC 处理程序（我已经独立测试过并且工作正常，因此不包括在此处）。在 servlet 中，我正在设置内容类型，使用 Gson 库将从 JDBC 检索到的数据转换为 Json 并返回它。

主要问题是，当我点击选项卡和文本框的 onblur 事件调用它执行 getJson 但 servlet 没有得到执行，因为在 Eclipse 中我已将 println() 放入 Servlet。它不会在 Eclipse 控制台上打印任何内容。是否应该在控制台上放任何东西（因为它是从 JS 调用的）？因为没有从 Servlet 返回数据，所以 getJson 中的回调成功函数也没有被执行（我在 IE F12 工具中确认了这一点，并在其中添加了警报）。

**我的 JSP**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01          
 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>  
<head>      
    <script type="text/javascript" src="scripts/jquery-1.9.0.min.js"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    <script>
        function doTransact()
        {
            $.getJSON('AjaxController?text='+$("#inText").val(),
                        function(data)
                        {   
                                //alerting to check whether callback function is in 
                                //fact getting called or not
                            alert(data.text);
                                $("#outText").valdata.text);
                            }
                    );
        }
    </script>
</head>
<body>
    Type here:<input onblur="doTransact();" type="text" id="inText"></input>
    <br />
    Get here:<input type="text" id="outText"></input>
</body>
</html> 
```

为了响应 getJSON 请求，我编写了 AjaxController servlet 并添加了：

```
package com.exp.controller;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.exp.dao.AjaxDAO;
import com.google.gson.Gson;

public class AjaxController extends HttpServlet 
{   
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        System.out.println("done");
        response.setContentType("application/json");

        AjaxDAO adao = new AjaxDAO();

        String text = adao.setGetText(request.getParameter("text"));

        //printing on console to check whether Servlet is in fact gettiing called or not
        System.out.println("In Ajax Controller");

        if(text!=null)
        {
            PrintWriter out = response.getWriter();

            String convertedJson = new Gson().toJson(text);
            out.println(convertedJson);
        }

    }

} 
```

我已经正确配置了 web.xml，AjaxController 没有被调用的原因是什么？谁能发现它？还是我做错了？而且这种方式是好的做法还是我应该遵循其他方法？

**编辑**

这是调试时间视图的样子：

![在此处输入图像描述](../Images/eb1e1e72526dd9fa71926ba7a5a5c8f4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T06:17:09.813

我无法发表评论，这就是我将其发布为答案的原因。我检查了您的相同代码并进行了一些更正及其工作。在 servlet 中添加以下代码后尝试。

```
@Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        doPost(request, response);
    } 
```

# oracle - 使用游标填充记录类型

> ID：14702009
> 
> 赞同：1
> 
> 时间：2013-02-05T07:12:57.477
> 
> 标签：oracle, plsql, oracle11g

我正在尝试从我的数据库中获取数据，但在我的代码中找不到错误：

```
declare
  cursor c1 is select * from(select d.department_ID, d.department_name,count(d.department_name) cnt from emp e,dept d where e.department_id=d.department_id group by d.department_ID, d.department_name) where cnt>=5;
  TYPE cust_dept IS RECORD(dept_id dept.department_id%type,dept_name dept.department_name%type,emp_name emp.first_name%type);

begin 

FOR i IN c1
loop

    select * into cust_dept  from emp e, dept d where d.department_ID=i.department_ID;

 DBMS_OUTPUT.put_line('Department_id :'||i.department_id||' '||'department_name :'||i.department_name);--||' '||'customer_name :'||cust_dept.emp_name);
    --FETCH customer_cur into customer_rec;
    --EXIT WHEN customer_cur%notfound;
    --DBMS_OUTPUT.put_line(i.department_id);

 END LOOP;

end;
/ 
```

错误是：

```
ORA-06550: line 10, column 23:
PLS-00321: expression 'CUST_DEPT' is inappropriate as the left hand side of an assignment statement
ORA-06550: line 10, column 34:
PL/SQL: ORA-00904: : invalid identifier
ORA-06550: line 10, column 9:
PL/SQL: SQL Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:29:30.210

您的代码有几个问题

1.  cust_dept 是一个类型而不是一个变量来声明一个 cust_dept 类型的变量你需要这样的东西： `cust_dept_var cust_dept;`
2.  cust_dept 变量的定义不会解决您的问题，因为`select * from emp e, dept d where d.department_ID = i.department_ID`可能不会返回单个答案，可能有 2 个或更多或没有结果，所以基本上您需要定义 cust_dept 的数组变量
3.  要得到您需要的结果，您可以使用下面的代码，您不需要定义记录类型，否则：
     `begin
    for x in
    (select d.department_ID, d.department_name from emp e, dept d where e.department_id = d.department_id group by d.department_ID, d.department_name having count(d.department_name) >= 5) loop` 

    > `for y in (select e.department_id, d.department_name from emp e, dept d where d.department_ID = x.department_ID) loop DBMS_OUTPUT.put_line('Department_id :' || y.department_id || ' ' || 'department_name :' || y.department_name);
    > end loop;
    > end loop;
    > end;`

4.  祝你好运 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:23:59.287

您应该声明类型的变量`cust_dept`并选择它。

# joomla2.5 - 如何在 joomla 2.5 中删除横幅文章名称

> ID：14702010
> 
> 赞同：0
> 
> 时间：2013-02-05T07:12:57.783
> 
> 标签：joomla2.5

这是我的链接，显示了我们正在处理的页面的图片：

![我们正在开发的网站图片](../Images/bed0a18568a830f1e9477cd5c9ea3ac8.png)

如何在 Joomla 2.5 中删除每个内容页面的文章标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:06:05.790

尝试以下步骤：

1.  登录到管理面板
2.  点击菜单管理器
3.  编辑你的菜单
4.  编辑您的菜单项
5.  将选项参数（系统）> 显示页面标题更新为**否**

[请查看此屏幕截图](http://snag.gy/c9eGi.jpg)

# iphone - MFMailComposeViewController 模态视图就在 segue 阻止 segue 之前

> ID：14702011
> 
> 赞同：0
> 
> 时间：2013-02-05T07:13:09.610
> 
> 标签：iphone, ios, modalviewcontroller, segue

我正在使用我忍受的模态视图中的按钮单击：

```
UIAlertView *   alert =
    [[UIAlertView alloc] initWithTitle: title
                               message: reason
                              delegate: self
                     cancelButtonTitle: @"New"
                     otherButtonTitles: @"View", nil];
    [alert show]; 
```

当点击下面的“clickedButtonAtIndex”方法中的“查看”按钮时，我调用了“[self performSegueWithIdentifier:@"ModalSaleDetail1" sender:self];"

```
- (void) alertView: (UIAlertView *) alertView clickedButtonAtIndex: (NSInteger) buttonIndex
{
    if ([alertView.title isEqualToString: @"Successful"]) {
        switch (buttonIndex) {
            case 0:     //  New transaction
            {
                if ([self.currentSale.lastStatus isEqualToString:@"approved"]) {
                    [self displayComposerSheet];
                }
                [self clearTransaction:nil];
                break;
            }
            case 1:     //  View Transaction Details
            {
                NSLog(@"User wants to view transaction details.");
                self.currentSale.cardNumber = self.currentSale.cardNumber.bulletRedacted;
                self.cardNumberField.text = self.displayCardNumberView.text = self.currentSale.cardNumber;

                if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {  // device is iPad
                    self.tabBarController.selectedViewController = [self.tabBarController.viewControllers objectAtIndex:1];
                    UISplitViewController *splitVC = (UISplitViewController *)(self.tabBarController.selectedViewController);
                    UINavigationController *navC = [[splitVC viewControllers] lastObject];
                    APSaleDetailViewController *salesDVC = (APSaleDetailViewController *)navC.topViewController;
                    // If came here from new sale set to self.currentSale, otherwise do not
                    if (!salesDVC.currentSale) {
                        salesDVC.currentSale = self.currentSale;
                    }
                    salesDVC.apNewTVC = self;
                    if ([self.currentSale.lastStatus isEqualToString:@"approved"]) {
                        [self displayComposerSheet];
                    }
                } else {                                                                        // device is iPhone
                    if ([self.currentSale.lastStatus isEqualToString:@"approved"]) {
                        [self displayComposerSheet];
                    }
                    [self performSegueWithIdentifier:@"ModalSaleDetail1" sender:self];
                }
                break;
            }
            default:
            {
                NSAssert1(NO, @"Unknown alert button %d", buttonIndex);
            }
        }
    } else if ..... 
```

在我使用 MFMailComposeViewController 实现我的电子邮件发件人之前，这个 segue 工作得很好。

我使用以下代码显示 MFMailComposeViewController 的模式视图：

```
// Displays an email composition interface. Populates all the Mail fields.
-(void)displayComposerSheet
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"Receipt for credit card transaction"];

    // Set up recipients
    NSArray *toRecipients = [NSArray arrayWithObject:self.currentSale.emailAddress];

    [picker setToRecipients:toRecipients];

    UIGraphicsBeginImageContext(self.view.frame.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSData * imageData = UIImageJPEGRepresentation(image, 1.0);

    if ( [MFMailComposeViewController canSendMail] ) {
        NSString *emailBody = @"Your credit card transaction summary and signature:";
        [picker setMessageBody:emailBody isHTML:NO];
        [picker addAttachmentData:imageData mimeType:@"image/jpeg" fileName:@"attachment"];
        NSData *myData = UIImagePNGRepresentation(self.signatureImage);
        [picker addAttachmentData:myData mimeType:@"image/png" fileName:@"Autograph"];
        [self presentModalViewController:picker animated:YES];
    }
} 
```

现在，当 [self performSegueWithIdentifier:@"ModalSaleDetail1" sender:self] 在刚刚调用 [self displayComposerSheet] 之后被调用时，不会发生 segue。电子邮件作曲家表正确显示，但在我发送或取消它后，segue 不会发生。如果我注释掉对 [self displayComposerSheet] 的调用，segue 就会发生（但当然没有电子邮件）。

顺便说一句，iPad 代码与 [self displayComposerSheet] 调用配合得很好，因为它不使用 segue。

在呈现模态对话框后立即执行转场是否正常工作？

我正在为 iOS 6.1 构建 Xcode 4.6 并部署到 iOS 5.1。我的 iPhone 运行 5.1.1，我的 iPad 运行 6.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T14:14:56.813

我知道，这并不能解决您使用 Segues 的问题，但如果您尝试返回到以前的视图控制器，请尝试以下操作：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:35:15.840

*   (void)performSegueWithIdentifier:(NSString *)identifier sender:(id)sender NS_AVAILABLE_IOS(5_0);

你看，这个接口在 iOS 5 中是不可用的

# android - 我的获取位置方法有什么问题吗？

> ID：14702015
> 
> 赞同：1
> 
> 时间：2013-02-05T07:13:25.657
> 
> 标签：android

我必须提交我的迷你项目。我写了一个类来获取用户位置。我想知道我的方法是否存在任何技术问题。它工作正常。我正在使用处理程序连续获取位置。

**主.java**

```
public class Main extends Activity {

LocationTracker lt;
TextView tv;
Handler handler = new Handler();
Runnable locationRunner = new Runnable() {

    @Override
    public void run() {
        if (lt.canGetLocation()) {
            tv.setText(lt.getLatitude() + " " + lt.getLongitude());
        }
        handler.postDelayed(this, 1000);
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    lt = new LocationTracker(this);
    Toast.makeText(
            this,
            "GPS: " + lt.isGPSEnabled() + "\nNetwork: "
                    + lt.isNetworkEnabled() + "\nCanGetLocation: "
                    + lt.canGetLocation(), Toast.LENGTH_LONG).show();
    tv = (TextView) findViewById(R.id.textView1);
}

@Override
protected void onResume() {
    super.onResume();
    handler.postDelayed(locationRunner, 1000);
}

@Override
protected void onDestroy() {
    super.onDestroy();
    handler.removeCallbacks(locationRunner);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

**LocationTracker.java**

```
public class LocationTracker implements LocationListener {

private Context context;
private boolean isGPSEnabled;
private boolean isNetworkEnabled;
private boolean isTracking;
private Location location;
private LocationManager locationManager;

public LocationTracker(Context context) {
    this.context = context;
    locationManager = (LocationManager) context
            .getSystemService(context.LOCATION_SERVICE);
    isNetworkEnabled = locationManager
            .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    isGPSEnabled = locationManager
            .isProviderEnabled(LocationManager.GPS_PROVIDER);
    if (!isNetworkEnabled && !isGPSEnabled) {
        isTracking = false;
    } else {
        isTracking = true;
    }

    if (isGPSEnabled) {
        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 0, 0, this);
    } else if (isNetworkEnabled) {
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, this);
    }

}

public double getLatitude() {
    if (location != null) {
        return location.getLatitude();
    } else {
        return 0.00;
    }
}

public double getLongitude() {
    if (location != null) {
        return location.getLongitude();
    } else
        return 0.00;
}

public boolean canGetLocation() {
    return isTracking;
}

public boolean isGPSEnabled() {
    return isGPSEnabled;
}

public boolean isNetworkEnabled() {
    return isNetworkEnabled;
}

@Override
public void onLocationChanged(Location arg0) {
    location = arg0;
}

@Override
public void onProviderDisabled(String arg0) {
}

@Override
public void onProviderEnabled(String arg0) {
}

@Override
public void onStatusChanged(String arg0, int arg1, Bundle arg2) {

}

} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:20:21.633

是的，在我看来，有两件事是错误的。

1.  不要检查`requestLocationUpdates`.
2.  而是听 DATA 连接变化和`removeUpdates`, 和`requestLocationUpdates`。

示例代码

//OnCreate

```
tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    tm.listen(new NetworkConnectionState(this.getApplicationContext()),
            PhoneStateListener.LISTEN_DATA_CONNECTION_STATE 
| PhoneStateListener.LISTEN_CELL_LOCATION ); 
```

//你的听众

```
public void onDataConnectionStateChanged(int state, int networkType) {
        // We have changed protocols, for example we have gone from HSDPA to
        // GPRS
        // HSDPA is an example of a 3G connection
        // GPRS is an example of a 2G connection
        if (state == TelephonyManager.DATA_CONNECTED) {
        }
        else {
        }
    } 
```

编辑：不要忘记在您的 LocationListeners`onProviderDisabled`上更新您的连接/断开连接`onProviderEnabled`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:57:42.313

isTraking=false 如果在应用启动时 gps 和网络都被禁用，它永远不会变为 true，即使用户在应用运行期间同时启用 gps 或网络。您应该使用 onProviderDisabled 和 onProviderEnabled 方法中的逻辑。

# c - 我试图让这段代码递归，但由于某种原因它不起作用

> ID：14702016
> 
> 赞同：0
> 
> 时间：2013-02-05T07:13:30.383
> 
> 标签：c

我正在尝试使此代码递归，但由于某种原因它不起作用。

```
void compress_spaces(char *str)
{
    char *dst = str;

    for (; *str; ++str) {
            *dst++ = *str;
            if (isspace(*str)) {
                    do ++str; while (isspace(*str));
                    --str;
            }
    }
    *dst = 0;
} 
```

*编辑：* 我试过这个：

```
void text_r(char *str)
{
    char *dst = str;

            if(*str=='\0')return ;
            *dst++ = *str;
            if (isspace(*str)) {
                    do ++str; while (isspace(*str));
                    --str;
            }//Missing brace from orig is this ok?
          return text_r(str++);
} 
```

没用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:24:36.913

您的 dst 指针与递归调用函数中的指针不同，而是将其作为参数传递。

```
void text_r(char *dst, char *str) {
  if (*str=='\0')
    return;
  *dst++ = *str;
  if (isspace(*str)
    while (isspace(*str++));
  else
    ++str;
  return text_r(dst, str);
} 
```

顺便说一句，为什么要使用递归完全超出我的理解，它只会浪费时间和空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:23:00.817

也许这个[SO question](https://stackoverflow.com/questions/206717/how-do-i-replace-multiple-spaces-with-a-single-space-in-c)可以帮助你。它用正则表达式解决了你的问题

# python - 基本的服务器和客户端python

> ID：14702028
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:14:08.813
> 
> 标签：python, network-programming, twisted

我需要将大量数据从一台机器*流式*传输到另一台机器，我需要使用 http
`server`和`client`.
我不知道`server`现在`client`是什么（网络本身）。

我**假设**我有一个在 IP
上运行的服务器，端口 等待接收数据，我有一个从另一台计算机发送数据的客户端。 我见过一些框架和 Python 的模块。
`192.168.1.250``8080`

`Twisted``BaseHTTPServer`

`Twisted`有一些很好的文档，但我不清楚首先要解释什么......

我认为**我的要求**是非常基本的。
从哪里开始，所以至少我能做的就是从我的客户端发送一个文件并在服务器端接收。
我没有使用浏览器类型编程。这是完整的应用程序。
我从命名管道中获取详细信息。

我的数据可能只有 10 GB，甚至可能扩展到 100 GB 以上。
我想要实现的是某些文件的复制。

**我的问题是**
我从哪里开始服务器和客户端设计？有些东西，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:05:11.477

如果你有 python，我假设你可以访问 cli，所以我的第一个建议应该是停止使用自定义编程并使用 FTP 协议，因为它是为文件传输而设计的......看看[附近](https://superuser.com/questions/142324/easy-to-setup-ftp-server-on-linux)

# java - 在 Android 中播放 yuv 帧

> ID：14702032
> 
> 赞同：1
> 
> 时间：2013-02-05T07:14:30.810
> 
> 标签：java, android, java-native-interface

嗨，我的任务是在 android 中显示一组解码帧。在我的本机代码中，我有一个字符（char）指针，它保存解码帧的地址。我想在我的设备上显示这个框架，所以我得到了一个提示： [在 Android 中显示 YUV 图像，](https://stackoverflow.com/questions/9192982/displaying-yuv-image-in-android) 因此在我的活动类中我编写了以下函数：

```
public void displayFrame(byte[] data, int fwidth,int fheight){

    ImageView frameImgView=(ImageView) findViewById(R.id.imageView2);

    ByteArrayOutputStream out=new ByteArrayOutputStream();
    YuvImage yuvimg=new YuvImage(data, ImageFormat.NV21, fwidth, fheight, null);
    yuvimg.compressToJpeg(new Rect(0, 0, fwidth, fheight), 100, out);
    byte[] imageBytes = out.toByteArray();
    Bitmap image = BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length);
    frameImgView.setImageBitmap(image);
    return;
} 
```

因此，从我的本机代码中，我需要在 java 中调用此函数。从链接： [http](http://www.altdevblogaday.com/2011/12/09/running-native-code-on-android-part-1/) ://www.altdevblogaday.com/2011/12/09/running-native-code-on-android-part-1/ 我知道如何从本地 c 调用 java 函数。但是，要调用 java 函数，我们需要一个环境变量来执行此操作。我的 java 类我已经将 main 函数声明为 native 并为该 main 函数生成了一个标头：

```
JNIEXPORT jint JNICALL Java_com_example_decoder_Decoder_mainFunction(JNIEnv *env, jclass jobj, jint argc, jstring argv1, jstring argv2); 
```

但是我的 mainFunction 调用了一个函数“fwriter（一些指针，一些指针）”，它有一个指针作为参数。我如何获得相同的环境变量。我知道在 java 类中我需要将“fwriter”函数声明为原生但我将指针表示为什么？

例如：我的 c 函数是：

```
void fwriter(int *ptr, char *ptr)
{
  ....
} 
```

在我的 java 类中，我如何将此函数声明为本地函数？请帮忙。在 java/Android 中显示 YUV 的任何其他方法也将受到赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:27:25.250

虽然 JPEG 编码和解码在大多数手机上可能是硬件加速的，但我希望您自己编写的一个简单的 RGB->YUV 转换 for-loop 会*更快*（即使在不使用本机库的 Java 中也足够快）并且更简单。

[这](http://www.fourcc.org/fccyvrgb.php)是公式。如果您使用 OpenGLES 进行显示，请考虑使用[片段着色器](http://www.fourcc.org/source/YUV420P-OpenGL-GLSLang.c)进行即时转换。

最后，这是您可以在 CPU 上使用的纯整数代码：

```
Ytmp =      4768 * (Y - 16);
R = (Ytmp + 6537 * (V - 128)) >> 12;
G = (Ytmp - 3330 * (V - 128) - 1602 * (U - 128)) >> 12;
B = (Ytmp + 8266 * (U - 128)) >> 12; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T10:33:46.553

您可以使用 RenderScript 内部函数将 YUV 图像转换为位图。

您可以准备这些对象一次：

```
RenderScript rs = RenderScript.create(getContext());
ScriptIntrinsicYuvToRGB yuvToRgb = ScriptIntrinsicYuvToRGB.create(rs, Element.U8_4(rs));

Type.Builder yuvType = new Type.Builder(rs, Element.U8(rs)).setX(data.length);
Allocation in = Allocation.createTyped(rs, yuvType.create(), Allocation.USAGE_SCRIPT);

Type.Builder rgbaType = new Type.Builder(rs, Element.RGBA_8888(rs)).setX(fwidth).setY(fheight);
Allocation out = Allocation.createTyped(rs, rgbaType.create(), Allocation.USAGE_SCRIPT);

Bitmap image = Bitmap.createBitmap(fwidth, fheight, Bitmap.Config.ARGB_8888); 
```

并且对于您执行转换的每一帧：

```
in.copyFrom(data);

yuvToRgb.setInput(in);
yuvToRgb.forEach(out);

out.copyTo(image); 
```

# delphi - 在 Delphi 中编译/链接未使用的函数/过程

> ID：14702033
> 
> 赞同：2
> 
> 时间：2013-02-05T07:14:31.910
> 
> 标签：delphi, compiler-construction, linker, delphi-7

我想在我的应用程序中“提供”几个函数/过程甚至是变量，而不是在我自己的代码中使用它们。编译器会自动忽略未使用的变量和函数还是链接器？我该如何改变呢？我已经尝试取消选中`CodeGeneration ---> Optimization`但没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T07:46:04.213

如果程序中的某些内容引用了该对象，则链接器无法将其删除。所以你可以像这样利用这个：

```
procedure StopLinkerRemoval(P: Pointer);
begin
end; 
```

然后在你的初始化部分你可以这样写：

```
StopLinkerRemoval(@MyVar);
StopLinkerRemoval(@MyFunction); 
```

您需要做的就是引用该对象。你不需要调用函数，或者读/写变量，只需获取它的地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T07:44:12.180

要“未使用”或未引用`procedures`/`functions`并在您的应用程序`private`中`protected` `methods`编译，您应该构建一个包并将`dcu`文件放入您的库路径中。

`public`并且`published` `methods`即使没有在您的应用程序中被引用，也会被编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:38:50.923

链接器是忽略未使用变量的链接器。但是，我不确定它是否与过程和功能相同。您无法更改此更改。

# objective-c - 视图控制器不旋转

> ID：14702035
> 
> 赞同：0
> 
> 时间：2013-02-05T07:14:36.380
> 
> 标签：objective-c, ios6, xcode4.5, autorotate

我有一个简单的视图控制器，其中添加了一些自定义按钮。

```
-(void)viewWillLayoutSubviews {

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    NSLog(@"Detected IPAD");
    if ( UIInterfaceOrientationIsPortrait(self.interfaceOrientation) )
    {
        NSLog(@"Orientation is PORTAIT");
    UIImage *serviceTask = [UIImage imageNamed:@"main_l_serviceorder.png"];

    btnServiceOrder = [UIButton buttonWithType:UIButtonTypeCustom];
    btnServiceOrder.frame = CGRectMake(143.0, 37.0, 226.0, 200.0);
    [btnServiceOrder setBackgroundImage:serviceTask forState:UIControlStateNormal];
    [btnServiceOrder addTarget:self action:@selector(gotoServiceOrders:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btnServiceOrder];

    //similar codes goes here..
    }
    else
    {
     NSLog(@"Orientation is LANDSCAPE");
  //similar codes goes here.. 
     }
  }
} 
```

我还添加了以下内容，如 IOS6 shouldAutorotateToInterfaceOrientation is depreciated.,

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  // Return YES for supported orientations
  return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
  NSLog(@"Rotated!.");
}

- (BOOL)shouldAutorotate {
return YES;
}

 - (NSInteger)supportedInterfaceOrientations {

return UIInterfaceOrientationMaskAllButUpsideDown;

 }

- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
return (UIInterfaceOrientationMaskLandscape | UIInterfaceOrientationMaskPortrait);
 } 
```

Viewcontroller 仅在 PORTAIT 模式下加载！.. 请指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:22:20.287

//它工作检查它

```
EDIT: This is happening because Apple has changed the way of managing the Orientation of UIViewController. In iOS6 orientation handles differently. In iOS6 shouldAutorotateToInterfaceOrientation method is deprecated. View controllers (such as UINavigationController) do not consult their children to determine whether they should autorotate. By default, an app and a view controller’s supported interface orientations are set to UIInterfaceOrientationMaskAll for the iPad idiom and UIInterfaceOrientationMaskAllButUpsideDown for the iPhone idiom.

If you want a specific view to be changed to the desired orientation you have to do some sort of subclass or category and override the autorotation methods to return the desired orientation.

Place this code in your root view controller. This will help the UIViewController to determine its orientation.

  //RotationIn_IOS6 is a Category for overriding the default orientation.

  @implementation UINavigationController (RotationIn_IOS6)

 -(BOOL)shouldAutorotate
    {
      return [[self.viewControllers lastObject] shouldAutorotate];
    }

  -(NSUInteger)supportedInterfaceOrientations
   {
     return [[self.viewControllers lastObject] supportedInterfaceOrientations];
   }

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
 {
     return [[self.viewControllers lastObject]  preferredInterfaceOrientationForPresentation];
 }

 @end

Now you need to implement below methods (introduced in iOS6) in viewController for orientation

- (BOOL)shouldAutorotate
{
    //returns true if want to allow orientation change
    return TRUE;

}
- (NSUInteger)supportedInterfaceOrientations
{   
     //decide number of origination tob supported by Viewcontroller.
     return UIInterfaceOrientationMaskAll;

}

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
   {
     //from here you Should try to Preferred orientation for ViewController 
   }

And put your code inside the below method. Whenever device orientation is changed this method will be called:

 - (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)  interfaceOrientation duration:(NSTimeInterval)duration
{
if([[[SampleApplicationAppDelegate instance].callInfoDictionary valueForKey:IS_CHAT] isEqualToString:NO_RESPONSE])
{
    int nAngle = 0;
    BOOL bRet = NO;

    switch (interfaceOrientation) {
        case UIInterfaceOrientationPortrait:
            nAngle = 90;
            bRet = YES;
            NSLog(@".......Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);

            _previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);

            NSLog(@"Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);
            break;

        case UIInterfaceOrientationPortraitUpsideDown:
            nAngle = 270;
            bRet = YES;
            _previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
            break;

        case UIInterfaceOrientationLandscapeLeft:
            nAngle = 0;
            bRet = YES;
            //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);
            break;

        case UIInterfaceOrientationLandscapeRight:
            nAngle = 180;
            bRet = YES;
            //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
            break;

        default:
            break;
    }                
  }    

Edit: check your window, you need to add the controller on window as rootViewController rather than addSubview like below

self.window.rootViewController=viewController; 
```

# android - Android Webview - 自定义屏幕区域上的视频作为 rtsp 实时视频流的覆盖

> ID：14702038
> 
> 赞同：4
> 
> 时间：2013-02-05T07:14:49.370
> 
> 标签：android, plugins, webview, android-videoview, rtsp

我有一个基于 Webview 的 Android 应用程序，可与我自己的应用程序网络服务器一起使用。应用程序网络服务器为每个用户提供 HTML5 内容。内容可以是富文本、图像或任何多媒体内容。

在我的一个要求中，我想通过框架内的网页在 Android Webview 应用程序上播放基于 rtsp 的实时流，该网页还有其他内容框架。

我尝试使用 HTML5 的视频标签，但它不适用于 Android ICS 上的 rtsp 协议。我可以找到许多链接，建议使用 Android MediaPlayer 或 Videoview 通过**onShowCustomView**全屏播放 rtsp 内容，但是，我的要求略有不同。**我**不想以全屏模式播放视频。

视频不是从 href 链接开始的，而是在 PageLoad/ready JS 事件上开始的。我想在 html5/css 逻辑设计的 webview 内的特定布局上播放 rtsp 流视频。我的查询是

1.  是否可以根据 html/css 逻辑在 webview 之上渲染 videoview/（任何控件）覆盖以播放 rtsp 流？如果有怎么办？
2.  可以在每个页面加载而不是超链接上完成吗？
3.  我可以编写自己的 rtsp 视频插件来播放视频，但我不确定将我的插件与 Webview 集成。没有足够的文档可用于这样做。有没有可能，怎么做？

谢谢
灰

# jquery - 通过简单的 html 下拉菜单导航 jQuery 图像滑块

> ID：14702044
> 
> 赞同：0
> 
> 时间：2013-02-05T07:15:44.193
> 
> 标签：jquery, forms, drop-down-menu, menu, slider

您好我正在尝试创建一个基本的下拉菜单，允许用户导航到 jQuery 滑块中的特定幻灯片。`onClick="jQuery('.slider').Slider().gotoSlide(1); return false;"`这个滑块脚本提供了公共方法“gotoSlide(index)”，因此可以通过例如跳转到特定的幻灯片。我想将此链接集成到一个基本的 HTML 下拉菜单表单中，即

```
<form name="jumpTo">
    <select name="menu" onChange="...">
    <option value= onClick="jQuery('.slider').Slider().gotoSlide(1); return false;">LINK 1</option>
    <option>...</option>
    </select>
</form> 
```

我假设我的语法不正确，似乎我需要将正确的 JS 添加到“onChange”属性中以启用滑块内的导航（？），但我不确定如何继续。我已经看到`onChange="window.location=this.options[this.selectedIndex].value;"`这似乎适用于常规链接，但不适用于点击事件。

感谢您在这里的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:22:05.263

使用`change()`选择框的事件...获取更改的选择框的值并`gotoSlide()`同样调用该函数

试试这个

**HTML**

```
<form name="jumpTo">
  <select name="menu" id="selectmenu"> //added an id here
    <option value="1">LINK 1</option> //changed the value to the slider you want to go to
   <option value="2">LINK 2</option>....
 </select>
</form> 
```

**查询**

```
$('#selectmenu').change(function(){  //calling change event
     jQuery('.slider').Slider().gotoSlide($(this).val());  //go to slide with the changed value
     return false;

 }); 
```

# python - 如何定义错误类？

> ID：14702049
> 
> 赞同：0
> 
> 时间：2013-02-05T07:15:54.400
> 
> 标签：python, exception-handling, python-2.7

Python 2.7.3

`SillyWalk.getGroups(user_id = user)`当我为一个像鹦鹉一样不复存在的用户运行时，我得到了以下错误。

```
Traceback (most recent call last):
    File "C:\Python\API\getgroups.py", line 32, in <module>
        Grp = SillyWalk.getGroups(user_id = user)
    File "c:\python27\lib\site-packages\SillyWalkapi-1.4.2-py2.7.egg\SillyWalkapi\__init__.py", line 349, in handler
        parse_format=args['format'], **args)
    File "c:\python27\lib\site-packages\SillyWalkapi-1.4.2-py2.7.egg\SillyWalkapi\__init__.py", line 435, in __wrap_in_parser
        return parser(self, data)
    File "c:\python27\lib\site-packages\SillyWalkapi-1.4.2-py2.7.egg\SillyWalkapi\__init__.py", line 278, in parse_etree
        raise SillyWalkError(u'Error: %(code)s: %(msg)s' % err.attrib)
SillyWalkError: Error: 1: User not found 
```

我试图通过在以下`try ... except`语句中添加语句来解决问题：

```
try:
    Grp = SillyWalk.getGroups(user_id = user)
    g = 0
    for group in Grp.find('groups').findall('group'):
        g += 1
        u_ID  = user
        g_ID  = group.get('_ID')
        gName  = "" # group.get('name')
        HasParrot    = group.get('HasParrot')
        Priv   = group.get('Priv')
        Mbr    = group.get('members')
        threads = group.get('threads')

        tup = '{0}\t{1}\t{2}\t{3}\t{4}\t{5}\t{6}\n'.format(u_ID, g_ID, gName.encode('utf-8'), HasParrot, Priv, Mbr, threads)
        OutFile.write(tup.encode('utf-8'))
except SillyWalkError:
    tup = '{0}\tNo Records Found\n'.format(u_ID)
    OutFile.write(tup.encode('utf-8')) 
```

但它给了我一个未定义的错误：

```
Traceback (most recent call last):
    File "C:\Python\API\getgroups.py", line 47, in <module>
        except SillyWalkError:
NameError: name 'SillyWalkError' is not defined
>>> 
```

这是我第一次尝试编写异常类，所以有人可以告诉我怎么做吗？由于`SillyWalk.getGroups`各种错误原因，有十几个不同的错误编号。每个人都需要一个箱子吗？

我将永远欠你的债！（你永远不会从我这里收集任何东西，但我仍然欠你的！）

顺便说一句：在深入了解我的脚本时，有人可以告诉我如何解决我的`gName`问题，所以我不需要将其归零吗？它不断给我：

```
Traceback (most recent call last):
    File "C:\Python\API\getgroups.py", line 44, in <module>
        OutFile.write(tup.encode('utf-8'))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 54: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:30:20.877

`NameError: name 'SillyWalkError' is not defined`只是表示名称`SillyWalkError`未定义。它不是特定于异常处理或编写异常类的。

看起来您只是没有将名称`SillyWalkError`导入到试图捕获异常的模块中；没有 的错误`except`表明异常类本身工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:25:40.340

好的，体育迷们！

至少我对此提出的第一个问题是我众多金发时刻之一的结果！![金发时刻！](../Images/80c0e34370f0c881ac2f0a092d1af8b5.png)

我正在使用`except SillyWalk.SillyWalkError ...`而不是`except SillyWalk***api***.SillyWalkError ...`

感谢所有帮助过的人！

# oracle - Oracle 中的有效日期检查

> ID：14702050
> 
> 赞同：5
> 
> 时间：2013-02-05T07:15:57.277
> 
> 标签：oracle, date

我有一个以 varchar 格式存储的日期值（有效日期或无效日期）。是否可以在 sql 查询中检查日期是否有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T07:24:12.047

是的，如果您知道格式并且很少使用 plsql。

假设您有 format 格式的日期`'yyyy-mon-dd hh24:mi:ss'`。

```
create function test_date(d varchar2) return varchar2
is
  v_date date;
begin
  select to_date(d,'yyyy-mon-dd hh24:mi:ss') into v_date from dual;
  return 'Valid';
  exception when others then return 'Invalid';
end; 
```

现在你可以：

```
select your_date_col, test_date(your_date_col)
from your_table; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T07:25:28.477

你可以在一个块中做到这一点

```
BEGIN
  select TO_DATE(your_date,'YYYYMMDD') from dual; --ADD INTO V_DUMMY IN PLSQL
EXCEPTION WHEN OTHERS THEN dbms_output.put_line('NOT A VALID DATE');
END; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-26T19:27:48.073

在不使用块或创建自定义函数或过程的情况下，您可以只使用下面的 select 语句，以便它返回从日期字符串解析的真实日期值，如果日期字符串无法识别，则返回 null。

这种方法有局限性。请参阅下面的注释。

```
select
  case
    when regexp_substr(DateStr,'^[[:digit:]]{2}-[[:digit:]]{2}-[[:digit:]]{4}$') is not null then
      case
        when to_number(regexp_substr(DateStr,'[^-]+',1,1))<=12 and to_number(regexp_substr(DateStr,'[^-]+',1,2))<=31
        then add_months(to_date('01-01-1900','MM-DD-YYYY'),(to_number(regexp_substr(DateStr,'[^-]+',1,3))-1900)*12+to_number(regexp_substr(DateStr,'[^-]+',1,1))-1)+to_number(regexp_substr(DateStr,'[^-]+',1,2))-1
        else null
      end
    else null
  end RealDateVal
from MyTable 
```

此示例采用日期格式为“MM-DD-YYYY”，并假设“MyTable”具有日期字符串列“DateStr”。您可能需要根据需要进行相应调整。

总体方法是首先检查日期字符串的格式为 ??-??-???? 哪里有“？” 是一个数字，然后检查第一个？？不大于 12（当月）和第二个 ?? 不大于 31（对于日期）。如果全部通过，则通过使用“add_months()”函数构建年份和月份，并使用“+”函数构建日期来组装一个日期类型的值。如果不满足这些条件中的任何一个，则返回 null。

**注意 1**：由于我们没有简单的方法来检查一年是否有 2 月 29 日，而我懒于检查一个月是否有 31 日，因此一天显示为无效的 29 日、30 日或 31 日，这不会被有效性检查，将被推迟到下个月。（请参见下面的示例。）并且查询永远不会返回错误。

**注2**：“case when ... is not null then ... else ... end”是惰性的，所以它不会评估“then ...”部分以潜在触发错误，如果“when” ... 不为空”不满意。此功能是整体方法的基础。相反，函数 nvl2() 不是惰性的，不能代替使用。

**示例**：
'06-15-2015' -> 返回有效日期
'06-15-2015' -> 返回 null
'06/15/2015' -> 返回 null
'15-06-2015' -> 返回 null
'06- 31-2015' -> 返回有效日期为 07-01-2015
'02-30-2015' -> 返回有效日期为 03-02-2015

**走得更远**：根据您想走多远，您可以通过将解析的日期值转换回字符串并将其与原始日期字符串值进行比较来减轻“注 1”中显示的限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T12:01:05.613

只需使用 to_date 函数来检查日期是否有效/无效。

```
BEGIN
  select TO_DATE(your_date,DateFormat) from dual;
EXCEPTION WHEN OTHERS THEN dbms_output.put_line('NOT A VALID DATE');
END; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-27T00:53:00.927

而且这种方法也是一个简单的选择语句，不使用块、自定义函数或存储过程。

此示例假定日期格式为“MM-DD-YYYY”。它首先验证格式为“??-??-????” 在哪里 ”？” 是使用正则表达式的数字，然后验证月份（第一个“??”）不大于 12，然后使用 last_day() 函数查找给定有效年/月的最后一天，以验证是否日部分（第二个“??”）是该月的有效部分。当都有效时，使用 to_date() 函数进行解析，否则返回 null。

```
select
  case
    when regexp_substr(DateStr,'^[[:digit:]]{1,2}-[[:digit:]]{1,2}-[[:digit:]]{4}$') is not null
    then case
      when to_number(regexp_substr(DateStr,'[^-]+',1,1))<=12
      then case
        when to_number(regexp_substr(DateStr,'[^-]+',1,2)) <= extract(day from last_day(add_months(to_date('01-01-1900','MM-DD-YYYY'),(to_number(regexp_substr(DateStr,'[^-]+',1,3))-1900)*12+to_number(regexp_substr(DateStr,'[^-]+',1,1))-1)))
        then to_date(DateStr,'MM-DD-YYYY')
        else null
        end
      else null
      end
    else null
    end InstallDate
from MyTable 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-23T18:54:30.650

```
FUNCTION IsDate( p_str IN VARCHAR2, p_format IN VARCHAR2 ) RETURN NUMBER AS
V_date DATE;
BEGIN
    V_Date := TO_DATE( p_str, p_format );
    RETURN 1;
EXCEPTION
   WHEN OTHERS THEN
      RETURN 0;
END; 
```

称呼：

```
select lastlogin, IsDate(lastlogin,'MM/dd/yyyy  hh24:mi:ss') from users_table 
```

# android - GPS在Android中给出错误的日期和时间

> ID：14702056
> 
> 赞同：1
> 
> 时间：2013-02-05T07:16:18.453
> 
> 标签：android, date, gps

我正在从 GPS 获取当前日期和时间，但它给了我当前日期前 3 天的日期。在 MyLocationListener 类中 loc.getTime(); 给我当前日期前 3 天的日期。我正在使用的代码

```
public class Location_gps extends Activity
{
 Button btn;
 LocationManager mlocManager;
 LocationListener mlocListener;
 Location loc;
 SimpleDateFormat sdf;
 Date d;

@Override
public void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_location_gps);

  btn = (Button)findViewById(R.id.btn);

  /* Use the LocationManager class to obtain GPS locations */
  mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

  mlocListener = new MyLocationListener();
  mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

  loc = mlocManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

  sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ssZ");
 d = new Date(loc.getTime());

  btn.setOnClickListener(new OnClickListener()
  {
  @Override
  public void onClick(View v)
  {
   String Text = "My current location is: " +
        "\nLatitude = " + loc.getLatitude() +
        "\nLongitude = " + loc.getLongitude() +
        "\nAccuracy = " + loc.getAccuracy() +
        "\nAltitude = " + loc.getAltitude() +
        "\nProvider = " + loc.getProvider() +
        "\nTime = " + sdf.format(d); 

Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
  }
 });

}

public class MyLocationListener implements LocationListener
{

  @Override
  public void onLocationChanged(Location loc)
  {

    loc.getLatitude();
    loc.getLongitude();

    String Text = "My current location is: " +
    "\nLatitude = " + loc.getLatitude() +
    "\nLongitude = " + loc.getLongitude() +
    "\nAccuracy = " + loc.getAccuracy() +
    "\nAltitude = " + loc.getAltitude() +
    "\nTime = " + loc.getTime();

    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onProviderDisabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
  }

  @Override
  public void onProviderEnabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onStatusChanged(String provider, int status, Bundle extras)
  {

  }
}
} 
```

我如何从 GPS 获取当前日期和时间。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:00:36.907

当您使用“getLastKnownLocation”方法时，它会返回您收到位置更新后的最后一个参数。

```
loc = mlocManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

如果您的设备最近没有收到更新，它将返回您的案例 3 天后的最后一次更新。如果它无法接收 gps 更新，请检查您的“gps”是否启用或在户外尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:29:33.467

这似乎是一个 Android 错误...请查看以下内容：

[http://www.zdnet.com/blog/hardware/the-time-displayed-on-most-android-phones-is-wrong/19387](http://www.zdnet.com/blog/hardware/the-time-displayed-on-most-android-phones-is-wrong/19387)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T07:34:38.007

您应该使用 NTP api 而不是 GPS。查看[http://code.google.com/p/ntp-sync/](http://code.google.com/p/ntp-sync/)和“ [Android 是否使用 NTP 同步时间？](https://stackoverflow.com/questions/14381005/is-android-using-ntp-to-sync-time) ”。基本上在Android上搜索NTP。NTP 是跨所有设备、服务器和网络的网络时间协议标准。

# webmatrix - WebMatrix2 中是否有等效的 FormView（如在 WebForms 中）？

> ID：14702061
> 
> 赞同：3
> 
> 时间：2013-02-05T07:16:41.260
> 
> 标签：webmatrix

中是否有`FormView`（如中`WebForms`）等价物`WebMatrix2`？

或者，有什么建议可以`CRUD`在`jQueryMobile`使用中实现基于表单的`WebMatrix`吗？

任何示例或教程？

谢谢。拉特纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:31:18.957

没有内置支持在使用 Razor 的网页中执行类似 FormView 的 CRUD，但是有几个关于如何执行此操作的教程：

这是使用网页网格助手和 jQuery 对话框的完整教程：http: [//www.mikesdotnetting.com/Article/155/WebMatrix-And-jQuery-Forms](http://www.mikesdotnetting.com/Article/155/WebMatrix-And-jQuery-Forms)

# ruby-on-rails - 查找父类的所有子类

> ID：14702065
> 
> 赞同：0
> 
> 时间：2013-02-05T07:17:01.640
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, has-many

我有一个特殊的关系，如下所示

> Class School has_many Department, Department属于_to School
> 
> 班级部门有_多位教师，教师属于_部门

我希望能够根据他们被雇用的时间（在本例中只是“created_at”）列出属于一所学校的所有教师，但不是按部门组织的。我希望 ruby​​ on rails 有一个非常酷的查找功能：D 但如果不是，我将如何检索这个列表？也许下面类似的东西可以构建一个数组 - 如果是这样，你将如何通过 Teach created_at 值来组织它？

```
School.departments.each.teachers.each do |t|
   teacher_list << t
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:42:38.810

您可以使用`has_many :through`for Teachers，以便您可以直接在以下位置查询教师`School`：

```
class School < ActiveRecord::Base

  has_many :departments
  has_many :teachers, :through => :departments

  ...

end 
```

然后你可以像这样查询老师：

```
@school = School.find(id)
@school.teachers.order(:created_at) 
```

这应该足以给你这个想法。

# jquery - 使用jquery折叠功能？

> ID：14702068
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:17:07.090
> 
> 标签：jquery

我有像下面这样的html，如果单击h2，我想要折叠功能，那么相关的子文件夹应该打开，如果其他子文件夹打开，那么它应该自动关闭。

```
<div class="RootFolder">
  <h2>One</h2>
  <div class="Subfolder">a</div>
</div>

<div class="RootFolder">
  <h2>two</h2>
  <div class="Subfolder">b</div>
</div>

<div class="RootFolder">
  <h2>three</h2>
  <div class="Subfolder">c</div>
</div> 
```

css

```
.Subfolder{
 display:none;
} 
```

我不知道如何实现这一点谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:19:12.173

使用这种方式：

```
$("h2").click(function(){
  $(this).next(".Subfolder").show();
}); 
```

如果你想切换，使用这个：

```
$("h2").click(function(){
  $(this).next(".Subfolder").toggle();
}); 
```

通过加载，如果您希望`.Subfolder`隐藏所有 s，请使用以下命令：

```
$(".Subfolder").hide(); 
```

您需要提供所有这些内部`$(document).ready();`功能：

```
$(document).ready(function(){
    $(".Subfolder").hide();
    $("h2").click(function(){
        $(this).next(".Subfolder").toggle();
    });
}); 
```

### 小提琴：http: [//jsfiddle.net/kBk2D/](http://jsfiddle.net/kBk2D/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:19:27.140

你可以用这个

```
$(".Subfolder").hide(); //intially hiding all the `subfolder`
$("h2").click(function(){
   $(this).next('subfolder').show(); //showing only the div after h2
}); 
```

# android - 我们需要更改标题吗？

> ID：14702070
> 
> 赞同：1
> 
> 时间：2013-02-05T07:17:09.083
> 
> 标签：android

如果我将此代码用于特定的 url，那么它可以工作，但是如果我更改完全相同类型的 url，那么是否有必要更改`getRequest.setHeader("User-Agent", "xxxx") (other than xxxx)`或者它不会导致任何问题？

```
DefaultHttpClient client = new DefaultHttpClient();
String getUrl = "http://myurl.com";

HttpUriRequest getRequest = new HttpGet(getUrl);

getRequest.setHeader("User-Agent",  "xxxx");

 HttpResponse response = client.execute(getRequest);
 int statusCode = response.getStatusLine().getStatusCode();

 log.info("statusCode=" + statusCode);

Document doc = null;
        if (statusCode == 200 ){
            HttpEntity entity = response.getEntity();
            //String content = EntityUtils.toString(entity);

            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            try {
                DocumentBuilder builder = factory.newDocumentBuilder();
                doc = builder.parse(entity.getContent());
            } catch (ParserConfigurationException e) {              
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (SAXException e) {
                e.printStackTrace();
            }                           
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:19:38.993

标`User-Agent`头标识了您对服务器的方法。这就像说*嘿，顺便说一句，我正在使用这个程序向你发送这个请求！*. 例如，Firefox、Chrome 和 Safari 都有自己可识别`User-Agents`的 .

它很少与您正在进行的其余对话有关。您无需更改它，也不必首先设置它，除非您有非常具体的理由。

快乐编码！

# asp.net - 是否可以使用 xmlrpc 自动登录到 openerp？

> ID：14702073
> 
> 赞同：0
> 
> 时间：2013-02-05T07:17:37.580
> 
> 标签：asp.net, ldap, single-sign-on, openerp, autologin

我有两个网站，一个是asp.net网站，一个是openerp网站。我想实现从 asp.net 网站到 openerp 的 SSO。我已经有工作 Ldap 但是当我尝试重定向到 openerp 网站时，我仍然重定向到登录页面。

如何在 asp.net 中的 openerp 中自动登录。是否可以为此使用xmlrpc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:24:19.760

不确定，你到底想要什么自动登录，甚至不知道 asp.net xmlrpc 库

在这里，附上python代码以供参考，我用于通过xmlrpc进行openerp连接。

如果能帮上忙。

```
sock = xmlrpclib.ServerProxy('http://openerp server domain:port/xmlrpc/object')
result = sock.execute(db, uid, password, 'object', 'method', vals)

#here,

#db - database name
#uid - integer id of openerp user
#object - openerp class 
#method - openerp method to be called
#vals - method arguments

#eg:
result = sock.execute('test', 1, 'admin', 'res.partner', 'create', {'name':'test partner'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:50:51.340

是的，可以使用 XMLRPC 从 OpenERP 系统的数据库中获取数据。XML-RPC 可以与许多编程语言一起使用，如 Python、Java、PHP、C、C++、Ruby、Microsoft 的 .NET 等。你的问题不是很清楚（如何在 asp.net 中的 openerp 中自动登录？），但在简而言之，您可以使用 XMLRPC 并直接处理数据。您可以使用以下代码获取用户 id 即 uid uid = sock_common.login(dbname, username, pwd) 之后您可以使用 XMLRPC 执行任何读取、写入、更新、删除操作。有关更多信息，您可以使用以下 URL：

1.  [http://doc.openerp.com/v6.1/developer/12_api.html#xml-rpc-web-services](http://doc.openerp.com/v6.1/developer/12_api.html#xml-rpc-web-services)
2.  [http://forum.openerp.com/forum/topic31615.html](http://forum.openerp.com/forum/topic31615.html)

# android - 在银河选项卡中安装应用程序时出现问题

> ID：14702078
> 
> 赞同：0
> 
> 时间：2013-02-05T07:18:03.370
> 
> 标签：android, galaxy

我有三星 Galaxy Tab android 2.2.1。以前我可以通过电缆从我的电脑安装应用程序，但突然间，我无法从我的电脑安装应用程序，而且我在连接到我的电脑时没有得到 USB 图标，但标签正在收费。我不知道问题是什么。是否有任何设置我需要更改。

这是我当前的设置。

```
I have selected Settings->Application->Development->USB debugging. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:22:47.747

检查您的设备管理器，如果您的设备名称旁边有一个黄色标记，您可以使用 Samsung Adb Interface 驱动程序手动更新您的驱动程序或安装 Samsung Kies

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:24:12.430

要让您的三星设备与您的 PC 同步，请使用 Samsung Kies。你可以在这里下载：

[http://www.samsung.com/pk/support/usefulsoftware/KIES/JSP](http://www.samsung.com/pk/support/usefulsoftware/KIES/JSP)

如果页面不是英文的，请翻译该页面。安装它，你就可以玩你的设备了..:-)

# c# - c# winform 在不同的表单上调整大小按钮

> ID：14702080
> 
> 赞同：0
> 
> 时间：2013-02-05T07:18:16.457
> 
> 标签：c#, winforms, button

我想`form2`使用 上的按钮调整按钮的大小`form1`。

这是我的代码，它给了我错误：

```
public void button7_Click(object sender, EventArgs e)
{
    Form2 f2 = new Form2();
    int x = Convert.ToInt32(textBox7.Text);
    int y = Convert.ToInt32(textBox8.Text);
    f2.button8.Size = new System.Drawing.Size(x, y);
} 
```

它在..有一个错误`Form2.button8.Size`。我`button8`公开了它，因此可以访问它..但它仍然给我错误*“Form2.button8 由于其保护级别而无法访问”* ..

这是我在 form2 上的 button8

public void button8_Click(object sender, EventArgs e) { }

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:41:25.010

```
namespace WindowsFormsApplication2
{
public partial class Form1 : Form
{
    Form2 f2 = new Form2();

    public Form1()
    {
        InitializeComponent();
        f2.Show();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        f2.button1.Size = new Size(int.Parse(textBox1.Text), int.Parse(textBox2.Text));
    }
}
} 
```

我在 form2.designer.cs 内部制作了 button1。

```
namespace WindowsFormsApplication2
{
    partial class Form2
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.button1 = new System.Windows.Forms.Button();
            this.SuspendLayout();
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(95, 89);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(75, 23);
            this.button1.TabIndex = 0;
            this.button1.Text = "buttonForm2";
            this.button1.UseVisualStyleBackColor = true;
            // 
            // Form2
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 262);
            this.Controls.Add(this.button1);
            this.Name = "Form2";
            this.Text = "Form2";
            this.ResumeLayout(false);

        }

        #endregion

    //This is where you change from private to internal
        internal System.Windows.Forms.Button button1;
    }
} 
```

# wpf - WPF 3.5 中的 TextBlock 模糊

> ID：14702081
> 
> 赞同：1
> 
> 时间：2013-02-05T07:18:29.983
> 
> 标签：wpf, .net-3.5, textblock

我的一个申请遭到了批评。显示的文本被认为是模糊的。我稍微放大了窗口并得到了这个结果（所以他们是对的）

![文字模糊](../Images/dc5a9a1e563d929a2fa1f0565e364eb1.png)

这是我在这个简化示例中尝试过的结果：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <TextBlock Text="StatusDTC [1]"></TextBlock>
            <TextBlock Text="StatusDTC [2]"
                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                       RenderOptions.EdgeMode="Aliased"></TextBlock>
            <TextBlock Text="StatusDTC [3]" 
                       SnapsToDevicePixels="True"></TextBlock>
            <TextBlock Text="StatusDTC [4]"
                       SnapsToDevicePixels="True"
                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                       RenderOptions.EdgeMode="Aliased"></TextBlock>
        </StackPanel>
    </Grid>
</Window> 
```

[我在这里](https://stackoverflow.com/q/8767781/582483)找到了类似的东西。但 UseLayoutRounding 似乎不适用于 .Net 3.5。我用谷歌搜索了一下，发现 .Net 4 (TextOptions.TextRenderingMode) 有改进，解决了这个问题，但是用这个应用程序切换到 .Net 4 不是一种选择。

据我所知，Win7 呈现 WPF 与 XP 不同，我还启动了一个虚拟 XP 并在那里进行了尝试。结果是一样的。

有人想在 .Net 3.5 中整理文本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:43:00.927

我不认为使用 Bitmap 字体你可以在这里做任何事情。:(`BitmapScalingMode`只要您使用的字体是基于 Vector 的，就不会影响您当前的示例，您确实需要 4.0[文本改进](http://blogs.msdn.com/b/text/archive/2009/08/24/wpf-4-0-text-stack-improvements.aspx)

在 Windows 7 中，文本绘图被切换到 DWrite，这就是它与 XP 不同的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:29:58.043

If upgrading to .NET 4.0 is absolutely not an option, there's one last (slightly desperate) option you could consider: get something else to render the text. For example, you could use, say, GDI+ to render the text you need to a bitmap and then display that. Or you could use interop to host a Windows Forms Label control.

These are both truly horrible solutions (which is why I've only suggested this after you confirmed in the comments that using a recent version of WPF is simply not an option). The interop one will lead to all the usual HWND interop problems (i.e, the Label will get its own HWND, meaning that it will be rendered completely separately from the WPF content, which might lead to obvious visual discontinuities.)

因此，如果我陷入这种情况，我想我会考虑渲染到位图的选项。可以使用 GDI+ 生成位图，然后您可以使用 WPF Image 元素进行渲染。如果您准备编写一个自定义控件来执行此操作，您甚至可以支持数据绑定之类的东西（通过为您呈现的文本定义一个 Text 依赖属性）。虽然这并不简单——尽管在支持 Windows 位图方面存在共同点，但将数据从 GDI+ 世界传输到 WIC（Windows 图像处理组件，这是 WPF 处理位图所依赖的）是……混乱的。此外，如果您需要支持可访问性（例如，使文本对屏幕阅读器可见，支持助记访问键等），那么这将成为一项相对复杂的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T09:00:24.320

正如[Ameen's answer 的链接](http://blogs.msdn.com/b/text/archive/2009/08/24/wpf-4-0-text-stack-improvements.aspx)中所解释的，这个问题主要出现在小字体上。

增加字体大小是您的选择吗？我知道这与其说是一种解决方案，不如说是一种解决方法，但如果您无法摆脱 Framework 3.5，它是一种快速简便的方法来消除模糊性。

# string - SEO-MOZ 报告中的 URL 重复问题

> ID：14702082
> 
> 赞同：2
> 
> 时间：2013-02-05T07:18:29.967
> 
> 标签：string, .htaccess, url-rewriting

规格 ：

1.  语言：PHP
2.  数据库：MYSQL
3.  网站类型：动态
4.  .htaccess 使用：高
5.  启用 Apache 模块：mod_rewrite 和 mod_spelling

**重写代码：**

```
RewriteRule ^(.+)-(.+)~(.+)\.html$ gallery-model.php?gallnm=$1&newnm=$2&modelid=$3 
```

有2个问题需要解决，

**1\. URL 重复问题 2\. URL 中追加查询字符串**

**问题 #1：URL 重复问题**

根据 SEO-MOZ 报告，有两个不同的 URL 具有相同的内容。例如，

URL 结构：[http ://www.example.co.uk/galleryname-modelname~modelid.html](http://www.example.co.uk/galleryname-modelname~modelid.html)

网址 1：[http ://www.example.co.uk/Shoes-Blackmamba~23.html](http://www.example.co.uk/Shoes-Blackmamba~23.html)

网址 2：[http ://www.example.co.uk/shoes-blackmamba~23.html](http://www.example.co.uk/shoes-blackmamba~23.html)

请注意，URL 1 具有驼峰式文本，而 URL 2 具有小写文本。

Gallery-model.php 文件将 100 条记录存储在 MYSQL 数据库中，以使其显示在上述 URL #1 和 #2 中。

注意（S）：

1.  解析查询字符串合理的变量都使用'strtolower'。双重检查并确认。
2.  如果您检查上面的**REWRITE CODE**，您可以在最后看到 [nc]。如果我尝试操作，它会返回 500 内部服务器错误。

**如何阻止具有相同内容但不同 URL 的 URL 重复？**

**ISSUE #2：查询字符串附加在 URL 中**

请检查**REWRITE CODE**它具有将 URL 重写为 SEF 的功能。一些 URL 工作正常，但其余的附加查询字符串。例如，

[http://www.example.co.uk/shoes-blackmamba~23.html?gallnm=Shoes&newnm=Blackmamba&modelid=23](http://www.example.co.uk/shoes-blackmamba~23.html?gallnm=Shoes&newnm=Blackmamba&modelid=23)

注意（S）：

1.  如果您检查上面的 URL，您可以在查询字符串中找到驼峰式。

2.  **正在应用REWRITE CODE** ，因此它不应在“URL？”之后附加变量名称和当前值。但确实如此。

3.  正在使用 trim() 并且没有应用 mysql 大小写更改。

**如何消除此查询字符串？**

针对问题 #1 和 #2 的尝试解决方案：

1.  mod_spelling.c 已启用，但它返回 500 内部服务器错误。
2.  几次谷歌搜索后，强制 URL 小写。

我期待着您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:57:19.853

步骤： 1\. 获取当前网址。2\. Preg_match for "?" 3\. 用“？”展开 4\. 重定向到爆炸数组[0]。

代码如下：

```
//Force all lower case - begins

//Step 1 : To get current URL
function curPageURL() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}

//Step : 2
if (preg_match('/?/',$camel)) {
        $expurl = (explode("?",$camel)); //Step 3 : Explode with "?"
        header("Location: $expurl[0]"); //Step 4 : Redirect to exploded array[0].
    } 
```

# iphone - 如何在不重新加载完整表的情况下更新 UITableVIewCell

> ID：14702083
> 
> 赞同：17
> 
> 时间：2013-02-05T07:18:32.240
> 
> 标签：iphone, ios, objective-c, uitableview

> **可能重复：**
> [是否可以刷新 UITableView 中的单个 UITableViewCell？](https://stackoverflow.com/questions/4448321/is-it-possible-to-refresh-a-single-uitableviewcell-in-a-uitableview)

在一个序列中，我只更新列表数据（NSMUtableArray）中的特定对象，一旦更新了它的值，为了进行 GUI 更新，我重新加载了完整的表，如下所示......

```
[table reloadData]; 
```

它工作得很好，但是在效率方面，当我滚动时它有点悬，有没有办法只更新一个特定的单元格而不重新加载整个表？

谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-05T07:20:24.307

```
 - (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation; 
```

用这个

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T07:51:02.407

你可以用这个..

```
NSArray *indexPathArray = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:1 inSection:0]];
//You can add one or more indexPath in this array...

[tblview reloadRowsAtIndexPaths:indexPathArray withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T07:36:33.953

您可以通过 -

```
UITableViewCell *cell = [table cellForRowAtIndexPath:indexPath]; 
```

现在根据数据数组中的对象更改其相关值。它应该反映在表格中。希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T08:31:43.607

您可以使用 index path 重新加载特定的图像行。

```
 [mainTableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationNone]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T07:25:50.107

在进行 GUI 更新时，最好使用 reloadData 而不是使用任何其他方法。reloadData 是在您的情况下更新的最佳方式，`UITableView`因为它避免了不一致。您可以做的另一件事是，您可以在您的条件中添加一个条件，`cellForRowAtIndexPath`并让执行仅针对已修改的单元格进行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T07:21:04.030

如果您只是添加一个项目，并且希望将其添加到表格中，则可以手动将其插入到 UITableView 中，这是一个示例：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:_directions.count-1 inSection:0];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
[self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:YES]; 
```

# wpf - WPF MultiBinding 到后台属性不起作用

> ID：14702085
> 
> 赞同：2
> 
> 时间：2013-02-05T07:18:35.273
> 
> 标签：wpf, background, converter, multibinding

MultiBinding 到背景属性不起作用。转换后，背景只是变成系统的默认颜色，而不是我在 MultiValueConverter 中设置的颜色。其他一切都已正确设置。我的 MultiBinding 到背景有什么问题？

```
<Style.Triggers>
    <DataTrigger Binding="{Binding Source={StaticResource triggerResource},
                                   Path=MyIsSelected}"         
                 Value="True">
        <Setter Property="Background">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource groupNameToBackgroundConv}">
                    <Binding Path="Name" />
                    <Binding Source="{StaticResource selectedGroupName}" Path="Name" />
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </DataTrigger>
</Style.Triggers> 
```

我的 MultiValueConverter 是

```
 public class GroupNameToBackgroundConv : IMultiValueConverter
{
    private const string DEFAULT_COLOR = "#B8CBE9";
    private const string SELECTED_COLOR = "#FFFF00";       

    public object Convert(object[] values, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        string groupName = values[0] as string;
        string selectedGroupName = values[1] as string;

        if (groupName == null)
            return DEFAULT_COLOR;

        if (selectedGroupName == null)
            return DEFAULT_COLOR;

        if (groupName == selectedGroupName)
        {
            return SELECTED_COLOR;
        }
        else
        {
            return DEFAULT_COLOR;
        }

    }  // ends method

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter,
        System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

} // ends class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T23:35:17.590

我解决了这个问题。Convert返回值时，控件Expander的背景属性必须是Brush，而不是字符串或Color。这是我的转换器。

```
 public class GroupNameToBackgroundConv : IMultiValueConverter
{

    private Color DEFAULT_COLOR = (Color)ColorConverter.ConvertFromString("#B8CBE9");
    private Color SELECTED_COLOR = (Color)ColorConverter.ConvertFromString("#FFFF00");       

    public object Convert(object[] values, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        string groupName = values[0] as string;
        string selectedGroupName = values[1] as string;          

        if (groupName == null)
            return ColorOrBrush(DEFAULT_COLOR, targetType);

        if (selectedGroupName == null)
            return ColorOrBrush(DEFAULT_COLOR, targetType);

        if (groupName == selectedGroupName)
        {
            return ColorOrBrush(SELECTED_COLOR, targetType);
        }
        else
        {
            return ColorOrBrush(DEFAULT_COLOR, targetType);
        }

    }  // ends method

    private object ColorOrBrush(Color c, Type targetType)
    {
        if (targetType == typeof(Color))
            return c;
        else if (targetType == typeof(Brush))
            return new SolidColorBrush(c);
        else 
            return null;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter,
        System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

} // ends class 
```

# .net - Techart .Net - 某些值的图表上没有绘制气泡的问题

> ID：14702086
> 
> 赞同：0
> 
> 时间：2013-02-05T07:18:44.490
> 
> 标签：.net, teechart

我将带有 Bubble Series 的 TeeChart 绑定到数据源。数据源具有非常大的数据值。这是我绑定图表的数据集。

[图 1 - 数据集图像](http://i.stack.imgur.com/ASEyA.png)

当我将图表与这些值绑定时，图表上不会绘制任何气泡。一个有趣的现象是，当我将所有这些值除以 100000 然后绘制图表时，确实会绘制气泡。值得观察的另一点是，如果我交换 XValues 和 YValues，那么即使使用原始数据也会绘制图表。我想绘制数据的原始值并获取工具提示中的半径值和“Product_Desc”列。

[图 2 - 图表图像](http://i.stack.imgur.com/KK8Ty.png)

此外，如何设置图例位置使其不会滚动到 2 行。

问候

努普尔莫迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:42:35.607

问题似乎出在天平上。请注意，气泡系列被认为是根据轴比例绘制半径。

您的 XValues 从 239.560,5 变为 5.776.576,87。这是一个 5.537.016,37 范围。你有一个 473 像素长度的 X 轴。所以这意味着在每 2 X 像素之间有 11.706,166 的增量。

您的 Y 值从 67086938,62 变为 63.500.3298,6。这是一个 567.916.359,98 范围。你有一个 228 像素长度的 Y 轴。所以这意味着在每 2 个 Y 像素之间有一个 2.490.861,228 的增量。

你的半径从 39.728.41 到 952.021,78。

这些半径大于 X 像素增量，因此可以。

但是这些半径小于 Y 像素增量，所以简而言之，这些气泡的半径对于它们所代表的 Y 轴范围来说太小了。

* * *

我看到你有两个选择：

1.  您可以将半径值乘以 100 或更多。如果您查看轴刻度，这将导致错误的气泡大小。但也许对您来说重要的是保持气泡之间的比例，而不是在通过半径的轴中指示值。

2.  将系列类型更改为 3D 类型。由于您要表示 3 个值，每个值都遵循完全不同的比例，因此使用 3D 系列类型（例如 Points3D）可能更符合逻辑。IE：

    ```
     tChart1.Header.Visible = false;

        tChart1.Aspect.Chart3DPercent = 50;
        tChart1.Legend.Alignment = LegendAlignments.Top;
        tChart1.Legend.TextStyle = LegendTextStyles.Plain;
        tChart1.Axes.Depth.Visible = true;
        tChart1.Axes.Bottom.Title.Text = "XValues";
        tChart1.Axes.Left.Title.Text = "YValues";
        tChart1.Axes.Depth.Title.Text = "ZValues";

        Points3D points3D1 = new Points3D(tChart1.Chart);
        points3D1.ColorEach = true;
        points3D1.LinePen.Visible = false;
        points3D1.BaseLine.Visible = true;            
        points3D1.Add(544161.66, 114160840.39, 82491.58, "ComEd Commercial");
        points3D1.Add(239560.5, 67086938.62, 39728.41, "PECO Commercial");
        points3D1.Add(5776576.87, 635003298.6, 952021.78, "ComEd Residential");
        points3D1.Add(2657157.7, 552875694.07, 412903.38, "PECO Residential"); 
    ```

![Points3D 系列](../Images/b08dcae0662047bfc208890934dcb19f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:54:53.837

确保点“。” 是你的[DecimalSeparator](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimalseparator%28v=VS.80%29.aspx)：

```
 System.Globalization.CultureInfo tmp_ci = (System.Globalization.CultureInfo)System.Globalization.CultureInfo.CurrentCulture.Clone();
    tmp_ci.NumberFormat.NumberDecimalSeparator = ".";
    System.Threading.Thread.CurrentThread.CurrentCulture = tmp_ci; 
```

也许是“。” 被视为[NumberGroupSeparator](http://msdn.microsoft.com/en-US/library/system.globalization.numberformatinfo.numbergroupseparator%28v=vs.80%29.aspx)并且您正在设置超出值范围的轴比例。

# jquery - jQuery中的val函数不起作用

> ID：14702088
> 
> 赞同：0
> 
> 时间：2013-02-05T07:18:50.937
> 
> 标签：jquery, jquery-selectors

我认为那两行代码

```
var selectProduct = $('#select-product');
var hasProduct = '@ViewBag.productName';
if (hasProduct != "") {
    alert(hasProduct);
    selectProduct.val(hasProduct);
    alert("Select Product = "+selectProduct.val());
 } 
```

这是选择产品的 HTML

```
 <select id="select-product">
        <option>Select a Product</option>
        </select> 
```

第一个警报 -> alert(hasProduct) 显示来自 viewbag 的正确值，但第二个警报始终显示 value = select a product。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:36:54.710

我还认为，您必须在选择新条目之前添加选项列表。试试这个（它在我的浏览器中工作）：

```
$(document).ready(function(){
    var selectProduct = $('#select-product');
    var hasProduct = 'New Product';
    alert(hasProduct);
    if (hasProduct != "") {
        alert(hasProduct);
        selectProduct.append("<option value='"+hasProduct+"'>"+hasProduct+"</option>");
        selectProduct.val(hasProduct);
        alert("Select Product = "+selectProduct.val());
    }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:36:35.390

您可以设置`select`标签中已经存在的选项的值。如果需要设置新值，则需要在该值后面附加另一个选项。

# cuda - CUDA编译中寄存器是如何分配的

> ID：14702089
> 
> 赞同：3
> 
> 时间：2013-02-05T07:19:02.307
> 
> 标签：cuda, gpu, nvcc

据说每个内核的寄存器数量对于CUDA优化很重要，这个数量的上界可以通过nvcc中的“-maxrregcount=N”来设置。我无法理解这一点，因为我认为寄存器的数量可以简单地通过计算内核中的局部变量（可能还有传递的参数）来确定。我知道我错了，因为来自“nvcc --ptxas-options=-v”的报告远远超出了我的想法。有人可以考虑一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T08:48:32.937

每个线程的最大寄存器数，在具有 Compute Capability 2.1 的设备中的当代 GPU 中是 63 个寄存器。每个流式多处理器包含有限数量的寄存器，这些寄存器分布在线程块中执行的线程之间。如果每个块的线程数很少您几乎可以肯定线程将获得最大数量的寄存器，但如果有很多线程，它们将获得较少数量的寄存器（这完全取决于使用的内存总量由线程和需要为每个应用程序定制）。

现在，由于缺少它们而无法存储在寄存器中的所有变量都进入本地内存，该内存是全局设备内存的一部分，并且与寄存器相比提供了高内存延迟。这称为寄存器溢出，您可以在此处阅读更多信息[http://www.ece.umn.edu/~wxiao/ee5940/lecture8-2.pdf](http://www.ece.umn.edu/~wxiao/ee5940/lecture8-2.pdf)

尝试将所有变量保存在寄存器中非常重要。新的 Cuda 开发人员经常低估寄存器溢出的影响。我进行了一些测试，其中我人为地将线程使用的内存量增加了一倍，并导致寄存器溢出而没有任何其他计算成本，并且计算时间增加了 5 倍！在小型 CUDA 应用程序中，寄存器的数量就足够了。您可以按照上面 pdf 中的说明了解有多少变量进入本地内存。

# android - Android 从 SD 卡读取文本文件超过 5 mb 错误

> ID：14702090
> 
> 赞同：3
> 
> 时间：2013-02-05T07:19:03.627
> 
> 标签：android, text-files

我正在从 SD 卡读取文本文件。如果文件大小很小，我的代码可以工作，但是当文件大于 4 或 5 mb 时，它会给我一个错误。

这是我使用的代码：

```
File myFile = new File(""+listAllSdCardFile.get(filePostion));
BufferedReader br1 = new BufferedReader( new FileReader( myFile ) );
StringBuffer text = new StringBuffer();
for(String line; (line=br1.readLine())!=null;)
{
    text.append( line );
}
line=text.toString(); 
```

这是我得到的错误：

```
02-05 07:12:55.184: E/AndroidRuntime(778): FATAL EXCEPTION: Background
02-05 07:12:55.184: E/AndroidRuntime(778): java.lang.OutOfMemoryError
02-05 07:12:55.184: E/AndroidRuntime(778):  at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:97)
02-05 07:12:55.184: E/AndroidRuntime(778):  at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:157)
02-05 07:12:55.184: E/AndroidRuntime(778):  at java.lang.StringBuffer.append(StringBuffer.java:215)
02-05 07:12:55.184: E/AndroidRuntime(778):  at com.reader.fastreader.TextReader.StringSpilitFunction(TextReader.java:344)
02-05 07:12:55.184: E/AndroidRuntime(778):  at com.reader.fastreader.TextReader$3$1$1.run(TextReader.java:134)
02-05 07:12:55.184: E/AndroidRuntime(778):  at java.lang.Thread.run(Thread.java:1096)
02-05 07:12:55.784: E/WindowManager(778): Activity com.reader.fastreader.TextReader has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f74708 that was originally added here
02-05 07:12:55.784: E/WindowManager(778): android.view.WindowLeaked: Activity com.reader.fastreader.TextReader has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f74708 that was originally added here
02-05 07:12:55.784: E/WindowManager(778):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
02-05 07:12:55.784: E/WindowManager(778):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
02-05 07:12:55.784: E/WindowManager(778):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-05 07:12:55.784: E/WindowManager(778):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
02-05 07:12:55.784: E/WindowManager(778):   at android.app.Dialog.show(Dialog.java:241)
02-05 07:12:55.784: E/WindowManager(778):   at com.reader.fastreader.TextReader$3$1.onItemClick(TextReader.java:140)
02-05 07:12:55.784: E/WindowManager(778):   at android.widget.AdapterView.performItemClick(AdapterView.java:284)
02-05 07:12:55.784: E/WindowManager(778):   at android.widget.ListView.performItemClick(ListView.java:3382)
02-05 07:12:55.784: E/WindowManager(778):   at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
02-05 07:12:55.784: E/WindowManager(778):   at android.os.Handler.handleCallback(Handler.java:587)
02-05 07:12:55.784: E/WindowManager(778):   at android.os.Handler.dispatchMessage(Handler.java:92)
02-05 07:12:55.784: E/WindowManager(778):   at android.os.Looper.loop(Looper.java:123)
02-05 07:12:55.784: E/WindowManager(778):   at android.app.ActivityThread.main(ActivityThread.java:4627)
02-05 07:12:55.784: E/WindowManager(778):   at java.lang.reflect.Method.invokeNative(Native Method)
02-05 07:12:55.784: E/WindowManager(778):   at java.lang.reflect.Method.invoke(Method.java:521)
02-05 07:12:55.784: E/WindowManager(778):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-05 07:12:55.784: E/WindowManager(778):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-05 07:12:55.784: E/WindowManager(778):   at dalvik.system.NativeStart.main(Native Method) 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:30:39.533

这与文件读取无关。您的内存不足，因为您的字符串非常大，您无法将其存储在内存中。尝试释放内存（删除一些未使用的数据，5也不算多）或改变程序结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:48:18.297

你只是内存不足，文件被正确读取。如前所述，第一个选择是查看在哪里可以释放应用程序中的一些 kB 堆空间。但是，如果你有一个稍大的文件，它可能会再次以同样的方式破坏。

你需要回答这个问题：为什么我需要在内存中一次获得整个文本？除非你找到一个明确的点，否则你将需要回答以下问题：我将如何使我的算法/处理/显示文件以块的形式，以便我只需要在内存中保存文件的一部分。

有了有关您需要对该文本做什么的更多信息，您将获得更多关于如何在需要时以另一种方式进行操作的输入。

* * *

编辑：

例如，您可以显示页面：读取文件的一部分（例如 100 行），而不是在编辑文本中一次显示整个文件内容。一旦用户到达当前页面的底部，从文件中加载接下来的 100 行（当然，丢弃之前的 100 行）。

您可以使用 ViewPager 很好地做到这一点（每个片段显示 100 行，向左滑动以显示下一页文本，...）

第一次，您可能想要遍历整个文件以计算总行数（不存储文本），从而能够指示可以执行多少页。

# ios - 使用自定义字体的变音符号渲染字符时出现问题

> ID：14702099
> 
> 赞同：1
> 
> 时间：2013-02-05T07:19:36.580
> 
> 标签：ios, core-text

我已经安装了一个自定义字体，并尝试使用 2 种方法渲染使用它创建的属性字符串： 1\. 使用 CoreText CTFrame 绘制字符串 2\. 在 iOS6 中，使用将属性字符串直接绘制到图形上下文中。

对于包含变音符号的字符，这两种方法都会产生相同的问题，请参见附图（字符显示为“粗体”）。我已将相同的文本加载到 UILabel 中，并且字符正常显示，这排除了字体本身的任何问题。

任何如何解决此问题的建议将不胜感激。![在此处输入图像描述](../Images/9bbf8f0e880c598369c80ad73fb0aec8.png)

# excel - 在 C# 中添加一个新的 Excel 工作表

> ID：14702102
> 
> 赞同：0
> 
> 时间：2013-02-05T07:19:50.177
> 
> 标签：excel, c#-4.0

我正在使用 NPOI 插件将内容导出为 Excel 文件。问题是，当导出文件达到最小导出大小（比如，65535）时，它会抛出超出大小限制的异常。所以我决定去动态创建另一个工作表来修改65535之后的记录。但我不知道如何编写这个逻辑。请指导我如何做到这一点的逻辑。

**代码**

```
 GridModel model = GetItems().AsQueryable().ToGridModel(page, int.MaxValue, orderBy, string.Empty, filter);
        var orders = model.Data.Cast<ViewModel>();

        //Create new Excel workbook
        var workbook = new HSSFWorkbook();

        //Create new Excel sheet
        var sheet = workbook.CreateSheet();
        //int index = workbook.AddPicture(@"D:\Temp\2\autocomplete tables", HSS);
        //    HSSFPicture signaturePicture = patriarch.CreatePicture(anchor, index);
        ////(Optional) set the width of the columns
        sheet.SetColumnWidth(0, 10 * 256);
        sheet.SetColumnWidth(1, 20 * 256);
        sheet.SetColumnWidth(2, 110 * 256);
        sheet.SetColumnWidth(3, 30 * 256);

        //Create a header row
        var headerRow = sheet.CreateRow(0);
        //Set the column names in the header row
        headerRow.CreateCell(0).SetCellValue("Itemid");
        headerRow.CreateCell(1).SetCellValue("ItemNo");
        headerRow.CreateCell(2).SetCellValue("Title");
        headerRow.CreateCell(3).SetCellValue("Status");

        //(Optional) freeze the header row so it is not scrolled
        sheet.CreateFreezePane(0, 1, 0, 1);

        int rowNumber = 1;

        //Populate the sheet with values from the grid data
        foreach (ViewModel order in orders)
        {
            //Create a new row
            if (rowNumber < 65535)
            {
                var row = sheet.CreateRow(rowNumber++);
                //Set values for the cells
                row.CreateCell(0).SetCellValue(order.Itemid);
                row.CreateCell(1).SetCellValue(order.INo);
                row.CreateCell(2).SetCellValue(order.BTags);
                row.CreateCell(3).SetCellValue(order.Sid);
            }
            else
            {

            }
        }

        //Write the workbook to a memory stream
        MemoryStream output = new MemoryStream();
        workbook.Write(output);

        //Return the result to the end user

        return File(output.ToArray(),   //The binary data of the XLS file
            "application/vnd.ms-excel", //MIME type of Excel files
            "Items.xls");     //Suggested file name in the "Save as" dialog which will be displayed to the end user
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T15:59:08.140

```
 object[,] objectrange;
        Excel.Range ExcelRangeNotFoundArticle;
        Excel.Application ActiveExelAplication = Globals.ThisAddIn.Application as Excel.Application;

        Excel.Worksheet ExNewWorksheet = ActiveExelAplication.Sheets.Add() as Excel.Worksheet;/*add new sheet here*/

        ExNewWorksheet.Name = ("sheetName");
        Excel.Worksheet ExWorksheet = ActiveExelAplication.ActiveSheet as Excel.Worksheet;
        ExcelRangeNotFoundArticle = ExWorksheet.get_Range("a1", "am12") as Excel.Range;
        objectrange= (object[,])ExcelRangeNotFoundArticle.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:30:02.720

希望以下内容对您有用：

```
 foreach (ViewModel order in orders)
    {

    if (rowNumber % 65535 == 0 )
        {   
    sheet = workbook.CreateSheet();
        sheet.SetColumnWidth(0, 10 * 256);
        sheet.SetColumnWidth(1, 20 * 256);
        sheet.SetColumnWidth(2, 110 * 256);
        sheet.SetColumnWidth(3, 30 * 256);

        headerRow.CreateCell(0).SetCellValue("Itemid");
        headerRow.CreateCell(1).SetCellValue("ItemNo");
        headerRow.CreateCell(2).SetCellValue("Title");
        headerRow.CreateCell(3).SetCellValue("Status");

    sheet.CreateFreezePane(0, 1, 0, 1);
    //If you want row number should start from 1\. Otherwise comment it
    rowNumber = 1;
    }   
        //Create a new row
        if (rowNumber < 65535)
        {
            var row = sheet.CreateRow(rowNumber++);
            //Set values for the cells
            row.CreateCell(0).SetCellValue(order.Itemid);
            row.CreateCell(1).SetCellValue(order.INo);
            row.CreateCell(2).SetCellValue(order.BTags);
            row.CreateCell(3).SetCellValue(order.Sid);
        } 
```

# iphone - 如何将 iPhone 相机拍摄的照片调整为较低的分辨率？

> ID：14702110
> 
> 赞同：1
> 
> 时间：2013-02-05T07:20:27.057
> 
> 标签：iphone, objective-c

如何将 iPhone 相机拍摄的照片调整为较低的分辨率？我想从 iPhone 相机拍照并在我的应用程序中将其保存为较低的分辨率。（为了节省空间）或者是否可以像发送图片的电子邮件一样显示图片大小的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:23:16.313

试试这个：

```
-(UIImage *)imageWithImage:(UIImage *)imageToCompress scaledToSize:(CGSize)newSize {

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [imageToCompress drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:27:23.313

您可以使用`compressionQuality`值压缩图像，

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    //Imagedata = UIImageJPEGRepresentation(<#UIImage *image#>, <#CGFloat compressionQuality#>);

    Imagedata = UIImageJPEGRepresentation([info objectForKey:@"UIImagePickerControllerOriginalImage"],0);
} 
```

您可以使用名称设置大小

```
 NSLog(@"Video size >> %d",(videodta.length/1024)/1024);
    [picker addAttachmentData:videodta mimeType:@"video/mp4" fileName:[NSString stringWithFormat:@"My Data (size = %d MB)",(videodta.length/1024)/1024 ]]; 
```

# android - android仅通过将excel文件传输到gmail和蓝牙

> ID：14702113
> 
> 赞同：3
> 
> 时间：2013-02-05T07:20:46.193
> 
> 标签：android, performance, android-intent

(1) 我正在尝试仅在 Android 手机中从 gmail 和蓝牙连接发送或传输 excel 文件。(2) 我的代码成功，文件传输完成。(3) 当我点击我的 dataTransfer 按钮时，它显示了多个发送文件的选项 (4) 像 gmail、蓝牙和 wifi 以及消息和共享到剪贴板 (5) 我不希望有几个选项来发送文件。(6) 我只需要两个共享选项——gmail 和蓝牙。

(7) 我遇到了这个：[如何以编程方式在 android 上使用蓝牙发送文件？][1]

我的代码：

```
 if (curCSV.getCount() != 0) {
  Intent i = new Intent(Intent.ACTION_SEND);
  i.setType("text/plain");
  i.putExtra(Intent.EXTRA_SUBJECT, "Diabetic Report File");
  i.putExtra(Intent.EXTRA_TEXT,getResources().getString(R.string.find_report));
  i.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file));
  startActivity(Intent.createChooser(i, "Share Via"));
} 
  else
{
  Toast.makeText(getApplicationContext(), "no data",Toast.LENGTH_SHORT).show();
} 
```

注意：我的代码正在成功运行。

注意：我想要那个，只有两个共享选项..请任何人修改我的代码并帮助我..谢谢提前..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:20:52.993

(1) 我找到了我的问题的输出。它的工作非常好。

我的代码：

```
List<Intent> targetedShareIntents = new ArrayList<Intent>();

String blue = "com.android.bluetooth" ;
String gmail = "com.android.gmail" ;

Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.setType("text/plain");
List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(shareIntent, 0);

 if (!resInfo.isEmpty())
   {

for (ResolveInfo resolveInfo : resInfo) {

String packageName = resolveInfo.activityInfo.packageName;
Log.v("hari", "packageName:"+packageName) ;
Intent targetedShareIntent = new Intent(android.content.Intent.ACTION_SEND);
targetedShareIntent.setType("text/plain");

 if (resolveInfo.activityInfo.packageName.toLowerCase().contains("blue") || 
     resolveInfo.activityInfo.name.toLowerCase().contains("gmail")) {

   targetedShareIntent.
   putExtra(android.content.Intent.EXTRA_SUBJECT,"Diabetic Report File");
   targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT,
   "Hello, Please find attached your diabetic report");
Log.v("vivekawe",file.getAbsolutePath()+"");
targetedShareIntent.
    putExtra(android.content.Intent.EXTRA_STREAM,
    Uri.fromFile(new File(file.getAbsolutePath())));

 targetedShareIntent.setPackage(packageName);

 targetedShareIntents.add(targetedShareIntent);

  Log.v("hari", "targetedShareIntent.setPackage(packageName);:"
  +targetedShareIntent.setPackage(packageName)) ;

     }  

    Log.v("hari", "After If targetedShareIntents:"+targetedShareIntents) ;
   }
  Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0),
  "Select app to share");
  chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.
   toArray(new Parcelable[]{}));
  Log.v("hari", "chooserIntent:"+chooserIntent) ;
  startActivity(chooserIntent);
   } 
```

注意：此代码运行良好。

# sql - 在 oracle 中创建重复表时出错

> ID：14702116
> 
> 赞同：2
> 
> 时间：2013-02-05T07:20:53.123
> 
> 标签：sql, database, oracle

我想在 oracle 中使用以下 sql 命令创建表的副本：

```
create table table_backup as select * from paper_search; 
```

我遇到了这样的错误

```
 [Err] ORA-01652: unable to extend temp segment by 8192 in tablespace 
```

由于 table paper_search 的大小为 20GB。我用谷歌搜索，发现在 oracle 中增加了 TEMP 内存大小，但我不知道如何解决这个问题，任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:27:33.353

您的临时表空间已满。扩展它，然后创建表。

句法：

```
ALTER tablespace TEMP add datafile '<path>/temp1.dbf' size 1500M 
```

根据需要更改路径、名称和大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:33:46.207

如果您无法为您的临时段找到足够的空间（请参阅 Orangecrush 的答案），您可能需要考虑创建表并分步填充它 - 例如

```
create table table_backup as select * from paper_search where 1=0; 
```

然后

```
insert into table_backup select * from paper_search where id between :1 and :2; 
```

在具有合适 id 范围的循环中，在每批之间提交（这样您就不需要那么多临时空间）。

这只是一个粗略的解决方案*，根据您的要求可能不可行*（例如，在批处理作业运行时是否应考虑表上的并发插入/更新/删除）。

# ios - iOS - 与 Facebook.framework 与其他已经有 FB 的库集成

> ID：14702135
> 
> 赞同：0
> 
> 时间：2013-02-05T07:22:22.657
> 
> 标签：ios, facebook

我从我的客户那里得到了一个库，其中集成了非常旧的 facebook src 代码（不支持单点登录）。该库具有我必须在我的应用程序中使用的附加功能。
现在要集成最新的 Facebook.framework，我刚刚从我拥有的库中删除了 .h 文件，并将 Facebook.framework 添加到 XCode Bundle。但它抛出构建错误，说来自 Facebook.framework 的重复对象。如果是 .a 文件，我可以在设置中设置 force_load，但这是一个框架。如何将 Facebook.framework 与我的库集成并解决构建问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T07:37:46.673

这是不可能的。
最新的FB分享是通过一个框架。
所以，我们甚至不能重命名这些类来使用最新的框架。

# ios - iOS中的高分辨率图像

> ID：14702136
> 
> 赞同：0
> 
> 时间：2013-02-05T07:22:25.963
> 
> 标签：ios

当我创建`UIColor`这样的：

```
UIColor* backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"LoginBG.png"]]; 
```

在 Retina 显示器上，它必须采用 LoginBG@2x.png，而在非 Retina 显示器上，它必须自动采用 LoginBG.png。

如果我不将 LoginBG.png 添加到我的包中怎么办。iOS 会在所有设备上一直使用 2x 版本吗？对于我在应用程序中使用的所有图像，我是否需要一直捆绑普通图像和 @2x 图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:25:29.813

> 如果我不将 LoginBG.png 添加到我的包中怎么办。iOS 会在所有设备上一直使用 2x 版本吗？

根据我的经验：会的。因此，旧设备将浪费宝贵的 RAM。

> 对于我在应用程序中使用的所有图像，我是否需要一直捆绑普通图像和 @2x 图像？

从技术上讲，您不必这样做**，**但我保证如果您不这样做，我不会购买您的任何应用程序。

# ios - 如何使用属性管理内存

> ID：14702138
> 
> 赞同：-2
> 
> 时间：2013-02-05T07:22:43.047
> 
> 标签：ios, memory-management, dealloc, alloc

我是 iOS 新手，所以想了解内存管理。

我有一个 .h 文件，其中包含一个属性，我想在某些函数中使用该 var。

```
@property (nonatomic, retain) NSMutableArray *myArray; 
```

然后在我的 .m 文件中，我有一些函数 x。

```
-(void) x
{
     // How to allocate memory to the property variable  ??

     _myArray = [NSMutableArray alloc]init];
OR
     myArray= [[NSMutableAraay alloc]init]

 // what is the utility of "_" here ?
} 
```

以及在这种情况下如何管理内存，因为我们**已经在 .h 文件中使用了关键字** `Retain`，并且还在 func x 中分配了内存，然后如何进行内存管理。

在 dealloc 方法中

```
-(void)dealloc
{
[myArray release];
OR
[_myArray release];
// same here whats the difference B/W 2.?
[super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:43:17.770

使用`@property`并`@synthesize`创建两个方法，称为访问器，它们设置和获取支持实例变量。通过普通方法调用或点表示法 ( `self.propertyname`) 调用访问器。访问器提供了一个执行内存管理或其他任务的地方，可以`@synthesized`通过使用`nonatomic`/ `copy`/等在访问器中进行一定程度的控制。您仍然可以通过使用实例变量的名称而不是`self.propertyName`. 默认情况下，实例变量的名称是属性名称，前面带有下划线。下划线可以防止人们在无意中意外直接访问实例变量，并且可以防止命名空间冲突。您还可以实现自己的访问器。

```
self.myArray //goes through the setter/getter of the property
_myArray     //directly accesses backing instance variable while ignoring accessors
myArray      //incorrect 
```

请注意，支持实例变量的名称可以使用`@synthesize myPropertyName = myCoolName`.

在使用方面，在大多数情况下，您会使用`self.thing`. 例外情况是自定义设置器/获取器（例如`return _thing`），当它通过-style 设置器时`dealloc`，您将使用它`[_thing release]`来对抗发送到对象的对象。在访问器中不调用访问器的原因应该是显而易见的。我们不使用访问器来防止不必要的影响。`retain``retain``dealloc`

编辑：这里有一些很好的资源可以帮助您更好地理解手动引用计数。

1.  [使用 Cocoa 和 Objective-C 理解引用计数](https://stackoverflow.com/questions/6578/understanding-reference-counting-with-cocoa-and-objective-c)
2.  [内存管理编程指南（来自 Apple）](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

另外，如果你想为 iOS 开发考虑使用 ARC。ARC 代表自动引用计数。与您显式添加`retain`和`release`调用代码的 MRC（手动引用计数）不同，ARC 保守地为您处理引用计数，保留和释放它认为合适的对象。您可以在下面阅读有关 ARC 的信息。

3.  [过渡到 ARC（来自 Apple）](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226)

# javascript - 带有 Javascript 和 JQuery Mobile 的 HTML5 如何保留用户注册信息

> ID：14702139
> 
> 赞同：0
> 
> 时间：2013-02-05T07:22:46.447
> 
> 标签：javascript, jquery, html

我正在尝试仅使用 HTML5/JavaScript/JqueryMobile 或简单的 Jquery 开发我的第一个移动应用程序，并且我有一个正在运行的服务器，其中包含我需要的功能和功能。但是我遇到了一个问题。所以我创建了我的注册表单：http: [//jsfiddle.net/FkXwH/](http://jsfiddle.net/FkXwH/)

或类似的东西 ：

```
<div id="regForm" class="regForm">
<div data-role="content">

<form name="f" id="f">
 <div>
<label for="userName">Name</label>
<input type="text" name="userName" value="" id="username" placeholder="Username" />
 </div>
 <div>
<label for="userPassword">New password</label>
<input type="password" name="userPassword" value="" id="password"              placeholder="Password" />

 </div>

and I am sending it with this : 

$('#f').submit(function() {
var formData = $(this).serializeArray();
dataForRegistration = {
"username" : formData[0].value,
"authCode" : $.sha1(formData[0].value + formData[1].value)  
 };
 $.post(URL, dataForRegistration, function(data){
if(data.status == 200){
    alert("Success");
}
  }).fail( function(xhr, textStatus, errorThrown) {
    var response = $.parseJSON(xhr.responseText);
    alert(response.Message);
    $("#errorUserName").text ("Error " + response.Message);
    showErrorUserName();
  });
  }); 
```

它工作正常，我可以注册新用户，但是否可以以某种方式存储用户信息以供稍后在同一个应用程序中使用或登录？我目前的方法是将我的 dataForRegistration 对象存储在一个全局 JavaScript 变量中。随意更正我的代码，使其更具可读性、更准确等等。

所以我喜欢会话ID或......？

最好的问候， 迪莫

# proxy - 如何通过代理页面保存正确的文件名

> ID：14702141
> 
> 赞同：2
> 
> 时间：2013-02-05T07:22:47.653
> 
> 标签：proxy, filenames

我是新手。试图发展我关于 PHP 和 JavaScript 的知识。这一次我已经敲了太多次头，并且搜索了足够长的时间。

我正在尝试创建一个代理页面来查看 PDF。有用！但是当我想保存文件时，它自己命名为“proxy.pdf”。在我的 Transformer Prime 平板电脑上，它会下载脚本：“proxy.php”。

这是我的代理 PHP 代码的样子：

```
<?php

session_start;

// define path to image folder
$image_folder = realpath(dirname(__FILE__))."/imagefolder/";
// get image name from the query string
// no probe
if (isset($_GET['pic']) && basename($_GET['pic']) == $_GET['pic'])
{   
    $pic = $image_folder.$_GET['pic'];
    if (file_exists($pic) && is_readable($pic)) 
    {
        // get the filename extension
        $ext = substr($pic, -3);
        // set the MIME type
        switch ($ext)
        {
    case 'jpg':
    $mime = 'image/jpeg';
    break;
    case 'gif':
    $mime = 'image/gif';
    break;
    case 'png':
    $mime = 'image/png';
    break;
    case 'pdf':
    //alt octet-stream
    $mime = 'application/pdf';
    break;
    default:
    $mime = false;
    } 
    // if a valid MIME type exists, display the image 
    // by sending appropriate headers and streaming the file
    if ($mime)
    {

        header('Content-type: '.$mime);
        header('Content-length: '.filesize($pic));

        $file = fopen($pic, 'rb');
        if ($file)
        {
            fpassthru($file);
            exit;
        }
    }
}
}
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T19:34:51.053

当我对我的 ASP.NET 应用程序有同样的问题时，我偶然发现了这一点。使用[Content-Disposition](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)标头对我来说是这样做的。我不会假装自己是 PHP 专家，但是如果您将此行添加到其他标题旁边，它应该可以完成工作。

```
header('Content-Disposition: attachment; filename='.$_GET['pic']); 
```

# php - 重定向，强制浏览器重新缓存？

> ID：14702142
> 
> 赞同：0
> 
> 时间：2013-02-05T07:22:54.950
> 
> 标签：php, apache, redirect

我刚刚将一个新网站上传到`www.mydomain.com`. 旧站点立即重定向到`www.mydomain/cart/index.php`.

问题是我的新站点也有一个购物车文件夹。`/cart`即使我不再有此重定向设置，浏览器似乎也会自动重定向到。

如何强制浏览器重新缓存或更新其缓存的重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:26:43.113

假设您的 URL 是一个很大的随机数`http:/www.mydomain.com?a=b&c=d` 重定向到。浏览器应将此解释为新请求。`http:/www.mydomain.com?a=b&c=d&nocache=1234567890``1234567890`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:29:06.483

您使用 php 的解决方案[在这里](https://stackoverflow.com/questions/1037249/how-to-clear-browser-cache-with-php)。

如果您需要使用 HTML 清除它

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="Cache-Control" content="no-cache"> 
```

参考[这里](http://fatherofcents.com/clear-browser-cache-using-html-or-php/)。

# jquery - 将 json 数据追加到表中

> ID：14702143
> 
> 赞同：0
> 
> 时间：2013-02-05T07:22:55.137
> 
> 标签：jquery, html, json

我是 Jquery 的新手，我的这个 json 文件看起来像这样。

```
 var json2 = {
        "data": [
                     {
                         "cid": "Movie",
                         "id": "/en/MIB",
                         "topic": "Men In Black",
                         "audience": [
                             {

                                 "userid": "100003914111287",
                                 "Name" : "Sandi Tan",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             },
                             {
                                 "userid": "100003914111287",
                                 "Name": "Celia Tio",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             }
                         ],
                         "type": "/soccer/football_team"
                     },
                     {

                         "id": "/en/Harry Potter",
                         "topic": "Harry Potter and the goblet of fire",
                         "audience": [
                             {
                                 "userid": "100003914111287",
                                 "Name": "Gibson Tay",

                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Ryan Giggs"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Manchester United"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Manchester United"
                                     }
                                 ],
                                 "userid": "100003921730958"
                             },

                             {
                                 "userid": "100003914111287",
                                 "Name": "James Tan",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             }

                         ],
                         "type": "/soccer/football_team"
                     },

                     {
                         "cid": "Movie",
                         "id": "/en/Iron Man",
                         "topic": "Iron Man",
                         "audience": [
                             {
                                 "userid": "100003914111287",
                                 "Name" : "Edmund Tan",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             },

                 ],

                         "type": "/soccer/football_team"
                     }
                 ]

    }; 
```

我怎样才能提取信息。我只需要主题名称（例如黑衣人）和人名（例如“Sandi Tan”）并附加到如下所示的表中：

```
**Men in Black, Iron man  Harry Potter**
Sandi Tan     Edmund Tan   Gibson Tay
Celia Tio                  James tan 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:26:33.010

```
json2.data[0].topic //to get Men in black
json2.data[0].audience[0].Name // to get Sandi Tan 
```

要获取所有名称和主题，您可以使用循环执行此操作

```
for(key in json2.data){
console.log(json2.data[key].topic);
console.log(json2.data[key].audience[0].Name)
} 
```

追加到表格

```
$('<td> Audience : '+json2.data[0].audience[0].Name+'</td><td>Topic : '+json2.data[0].topic+'</td>').appendTo(tableid); 
```

动态添加到表

```
var td ="";
for(key in json2.data){
td += "<tr><td>"+json2.data[key].topic+"</td><td>"+json2.data[key].audience[0].Name+"</td></tr>";
}
$(td).appendTo('body'); 
```

# bash - 当 shell 脚本被中断时如何触发命令？

> ID：14702148
> 
> 赞同：9
> 
> 时间：2013-02-05T07:23:03.810
> 
> 标签：bash, shell, sh, interrupt-handling

`rm -rf /etc/XXX.pid`当 shell 脚本在执行过程中被中断时，我想触发类似“”的命令。喜欢使用`CTRL+C` Can有人能帮我在这里做什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T07:40:02.157

尽管它可能会让许多人感到震惊，但您可以使用`bash`内置的`trap`捕获信号 :-)

好吧，至少那些*可以*被捕获的，但 CTRL-C 通常与`INT`信号相关联。您可以捕获信号并执行任意代码。

以下脚本将要求您输入一些文本，然后将其回显给您。如果你产生了一个`INT`信号，它只是对你咆哮并退出：

```
#!/bin/bash

exitfn () {
    trap SIGINT              # Restore signal handling for SIGINT
    echo; echo 'Aarghh!!'    # Growl at user,
    exit                     #   then exit script.
}

trap "exitfn" INT            # Set up SIGINT trap to call function.

read -p "What? "             # Ask user for input.
echo "You said: $REPLY"

trap SIGINT                  # Restore signal handling to previous before exit. 
```

测试运行记录如下（完全输入的行，在任何条目之前按 CTRL-C 的行，以及在按 CTRL-C 之前有部分输入的行）：

```
pax> ./testprog.sh 
What? hello there
You said: hello there

pax> ./testprog.sh 
What? ^C
Aarghh!!

pax> ./qq.sh
What? incomplete line being entere... ^C
Aarghh!! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T07:25:55.613

`trap`用于捕获脚本中的信号，包括`SIGINT`按下 Ctrl-C 时生成的信号。

# php - 编辑订单时更改运费 - Magento

> ID：14702150
> 
> 赞同：0
> 
> 时间：2013-02-05T07:23:22.517
> 
> 标签：php, magento, shipping

我构建了一个用于运输的自定义模块，该模块具有多种价格选项。它在前端运行良好。

但是当我们需要编辑已经下达的订单时，我无法获得自定义价格。它始终只显示默认价格。

如何克服这种情况？我搜索了一段时间，但没有得到任何解决方案。

# paypal - Meteor Http Paypal 自适应账户

> ID：14702154
> 
> 赞同：1
> 
> 时间：2013-02-05T07:23:35.200
> 
> 标签：paypal, meteor

我正在尝试复制此操作指南操作指南中的示例，[但](https://www.x.com/developers/paypal/documentation-tools/adaptive-accounts/how-to-create-paypal-account-using-adaptive-accounts)我总是收到此错误：

```
XMLHttpRequest cannot load https://svcs.sandbox.paypal.com/AdaptiveAccounts/CreateAccount. Origin http://my.domain.com is not allowed by Access-Control-Allow-Origin. 
```

任何人都可以为我提供一个工作示例或任何提示吗？谢谢你！

这是我的代码：

```
Meteor.http.post("https://svcs.sandbox.paypal.com/AdaptiveAccounts/CreateAccount",{
        headers: {
            "X-PAYPAL-SANDBOX-EMAIL-ADDRESS": "myemail@domain.com",
            "X-PAYPAL-SECURITY-USERID": "myuserid",
            "X-PAYPAL-SECURITY-PASSWORD": "somepassword",
            "X-PAYPAL-SECURITY-SIGNATURE": "thelongsignature",
            "X-PAYPAL-APPLICATION-ID": "APP-80W284485P519543T",
            "X-PAYPAL-DEVICE-IPADDRESS": "192.0.2.0",
            "X-PAYPAL-REQUEST-DATA-FORMAT": "JSON",
            "X-PAYPAL-RESPONSE-DATA-FORMAT": "JSON"
        },
        data: {
            accountType: "PERSONAL",
            name:{
                firstName: "John",
                lastName: "Doe"
            },
            address:{
                line1: "123 Main Street",
                city: "Sydney",
                state: "NSW",
                postalCode: "2000",
                countryCode: "AU",
                citizenshipCountryCode: "AU",
                contactPhoneNumber: "12345678",
                dateOfBirth: "1990-01-01Z",
                createAccountWebOptions:{
                    returnUrl: "http://my.domain.com/"
                },
                currencyCode: "AUD",
                emailAddress: "anotheremail@somedomain.com",
                preferredLanguageCode: "en_AU",
                registrationType: "Web",
                requestEnvelope:{
                    errorLanguage: "en_US"
                }
            }
        }
    },
    function(error,result){
        alert(error);
        alert(result.statuscode);
    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:54:53.920

你在客户端这样做吗？从服务器端运行它会更安全，因为您的用户看不到凭据，此外，如果您从服务器请求文档，您也不应该收到错误消息。您的网络浏览器正在阻止该请求，因为它是一个[跨源请求](http://en.wikipedia.org/wiki/Same_origin_policy)。

服务器

```
Meteor.methods({
    'createaccount':function() {

    var result = Meteor.http.post("https://svcs.sandbox.paypal.com/AdaptiveAccounts/CreateAccount", {
        headers: {
        "X-PAYPAL-SANDBOX-EMAIL-ADDRESS": "myemail@domain.com",
        "X-PAYPAL-SECURITY-USERID": "myuserid",
        "X-PAYPAL-SECURITY-PASSWORD": "somepassword",
        "X-PAYPAL-SECURITY-SIGNATURE": "thelongsignature",
        "X-PAYPAL-APPLICATION-ID": "APP-80W284485P519543T",
        "X-PAYPAL-DEVICE-IPADDRESS": "192.0.2.0",
        "X-PAYPAL-REQUEST-DATA-FORMAT": "JSON",
        "X-PAYPAL-RESPONSE-DATA-FORMAT": "JSON"
        },
        data: {
        accountType: "PERSONAL",
        name:{
            firstName: "John",
            lastName: "Doe"
        },
        address:{
            line1: "123 Main Street",
            city: "Sydney",
            state: "NSW",
            postalCode: "2000",
            countryCode: "AU",
            citizenshipCountryCode: "AU",
            contactPhoneNumber: "12345678",
            dateOfBirth: "1990-01-01Z",
            createAccountWebOptions:{
                returnUrl: "http://my.domain.com/"
            },
            currencyCode: "AUD",
            emailAddress: "anotheremail@somedomain.com",
            preferredLanguageCode: "en_AU",
            registrationType: "Web",
            requestEnvelope:{
                errorLanguage: "en_US"
                    }
                }
            }
        });
    return result;
}); 
```

客户

```
Meteor.call('createaccount', function(error,result) { console.log(result); }); 
```

注意我已将您的请求更改为同步请求，以便它可以将数据返回给客户端

# arrays - 两个未排序的小数组的交集算法

> ID：14702155
> 
> 赞同：3
> 
> 时间：2013-02-05T07:23:36.510
> 
> 标签：arrays, algorithm, set, intersection

我正在寻找一种算法，用于在非常特定的条件下交叉两个小的未排序数组。

*   数组项的类型只是整数或类整数类型。
*   大量时间（大约 30~40%？），一个或两个数组可能为空。
*   数组通常非常小——通常是 1~3 个项目，我预计不会超过 10 个。
*   交集函数会被非常频繁地调用。
*   我不关心平台相关的解决方案 - 我正在研究 x86/windows/C++

蛮力/排序和交叉解决方案都不是那么糟糕，但我认为它们不够快。有没有更优化的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:39:08.163

由于数组是原始类型，并且足够短以位于缓存行中，因此快速实现将关注比较的战术机制而不是大的 O 复杂性，例如避免哈希表，因为这些通常涉及哈希和间接并且总是涉及大量管理开销。

如果您有两个排序数组，则交集为 O(n+m)。你说 sort-then-intersect 是“蛮力”，但你不能更快地做到这一点。

当然，如果数组是按顺序*存储*的，那么正如您所说的经常调用交叉点，您会获得更多收益。

相交本身可以[用 SSE 完成](http://highlyscalable.wordpress.com/2012/06/05/fast-intersection-sorted-lists-sse/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T07:42:29.170

这是一个潜在的优化：检查两个数组的最大元素是否 <=32（或 64，甚至可能是 16）。如果是这样，则填充该大小的两个位图（类型`uint32_t`等）并使用二进制 AND 相交，`&`. 如果不是，请诉诸排序。

或者，不用排序，而是使用由于 Briggs 和 Torczon 的[高效整数集表示](http://research.swtch.com/sparse)，它允许线性时间与 O( *m* + *n* ) 构造相交并且 O(min( *m* , *n* )) 相交。这应该比具有比排序更好边界的哈希表快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:33:46.047

为了确定两个集合的交集，您必须至少检查一次所有元素，这意味着最优解的类别产生 O(n + m)，其中 n 是一组中的元素数，m 是另一个中的元素。

您可以通过使用哈希表来实现。鉴于您的项目是整数类型，您可以指望找到一个快速哈希函数。一个简单的算法是：

*   迭代第一个集合并将所有元素添加到哈希表
*   迭代第二个集合并为每个元素检查它是否存在于哈希表中，如果存在，将其添加到交集或仅打印它。

假设你的散列和你的散列查找是 O(1)，这将是 O(n + m)。

鉴于您知道集合经常是空的，您可以通过首先检查其中一个集合是否为空来优化它，如果是，则返回一个空集合。这当然是假设您预先知道计数并且可以在不迭代集合的情况下计算它。如果发生这种情况，您可以通过始终首先读取和散列较小的集合来进一步优化，确保您的哈希表内存使用量将是两者中较小的一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T07:39:40.310

好吧，由于您的数组非常小，因此使用插入排序将是对这两个数组进行排序的最快方法，C++ STL 也对小于 16 项的数组使用插入排序。然后，您可以在这两个数组上使用迭代器来比较和相交数组。

可能还有其他算法会执行得更快，但是这些算法的开销对于每个数组 3-4 个项目来说可能太大了。

# c# - 如何将 EF 保存在缓存层中？

> ID：14702159
> 
> 赞同：0
> 
> 时间：2013-02-05T07:23:50.393
> 
> 标签：c#, asp.net, entity-framework, enterprise-library

我正在使用实体框架。

我将对象保存在 MS_library 缓存管理器中。

但是我现在遇到一个问题：当我从缓存中检索这个对象时

它的 ContextObj 已经被释放。

如何在不将每个实体映射到我的模型对象的情况下解决此问题？

```
public partial class MaMDBEntities : DbContext
{
    public MaMDBEntities()
        : base("name=MaMDBEntities")
    {

        ObjectContext.
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<App> Apps { get; set; }
    public DbSet<AppsData> AppsDatas { get; set; }
    public DbSet<Browser> Browsers { get; set; }
    public DbSet<BrowserVersion> BrowserVersions { get; set; }
    public DbSet<BrowserVerToCriteria> BrowserVerToCriterias { get; set; }
    public DbSet<CommonConfig> CommonConfigs { get; set; }
    public DbSet<Country> Countries { get; set; }
    public DbSet<Criterion> Criteria { get; set; }
    public DbSet<CTID> CTIDS { get; set; }
    public DbSet<DatabaseLastUpdate> DatabaseLastUpdates { get; set; }
    public DbSet<Group> Groups { get; set; }
    public DbSet<MamConfiguration> MamConfigurations { get; set; }
    public DbSet<MamConfigurationCTID> MamConfigurationCTIDs { get; set; }
    public DbSet<MamConfigurationStatus> MamConfigurationStatuses { get; set; }
    public DbSet<Pair> Pairs { get; set; }
    public DbSet<SettingsServicesConfig> SettingsServicesConfigs { get; set; }
    public DbSet<sysdiagram> sysdiagrams { get; set; }
    public DbSet<CtidPgPastExistence> CtidPgPastExistences { get; set; }

    public virtual ObjectResult<usp_AppsData_GetAll_Result> usp_AppsData_GetAll()
    {
        return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction<usp_AppsData_GetAll_Result>("usp_AppsData_GetAll");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:43:30.907

加载您尝试使用 include() 访问的导航属性或关闭对象上下文属性中的 ProxyObjectCreation。

```
Context.SomeCollection.Include("NavigationalProperty") 
```

或者

```
Context.Configuration.ProxyCreationEnabled = false; 
```

如果您决定关闭代理创建，则必须重新测试所有使用延迟加载的查询，因为您的解决方案中会引入静默错误。

# java - 我们可以在不考虑 String 键的情况下从 hashmap 中获取值吗？

> ID：14702165
> 
> 赞同：2
> 
> 时间：2013-02-05T07:24:12.910
> 
> 标签：java, collections, hashmap

我想访问 java.util.HashMap 而不考虑键的大小写。

我的意思是，如果我在我的 HashMap 中添加以下条目：

```
java.util.HashMap<String, Object> myMap = new java.util.HashMap<String, Object>();
myMap.put("foo", new Foo());  // Note lower-case key used here 
```

然后我应该能够通过以下代码获取 Foo 对象：

```
Foo f = (Foo) myMap.get("FOO"); // Note UPPER-case key used here 
```

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T07:44:35.073

```
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;

public class TestEnum {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Map<String, String> oldMap = new HashMap<String, String>();
        oldMap.put("akshay", "Lokur");
        oldMap.put("sumiT", "BORhade");

        Map<String, String> newMap = new TreeMap<String, String>(String.CASE_INSENSITIVE_ORDER);
        newMap.putAll(oldMap);
        String value = newMap.get("AKShay");
        System.out.println(value);
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T07:30:02.333

子类化 HashMap 以使用您自己的“MyIgnoreCaseHashMap”：

```
public class MyIgnoreCaseHashMap extends HashMap<String, Object> {

    Object get(String key) {
       return super.get(key.toLowercase());
    }

    void put(String key, Object value) {
       super.put(key.toLowerCase(), value);
    }
} 
```

这总是以小写版本处理键。此外，请考虑覆盖可能使用键的方法，例如 containsKey。

如果你不介意包含外部库，apache-commons 有 CaseInsensitiveMap 类来解决你的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:27:44.937

我不确定你为什么需要这个：

但考虑添加`myMap`喜欢

```
myMap.put("foo".toLowerCase(), new Foo()); 
```

并检索喜欢

```
Foo f = (Foo) myMap.get("FOO".toLowerCase()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T07:28:39.440

简单的解决方案是在使用之前将所有键转换为大写，如下所示：

```
myMap.put (key.toUpperCase (), value);
String value = myMap.get (anotherKey.toUpperCase ()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T07:27:09.727

您可以通过在将对象推送/检索到地图之前将键转换为大写字母来做到这一点。像：

```
myMap.put("foo".toUpperCase(), new Foo());

Foo f = myMap.get("foo".toUpperCase()); 
```

或者

```
myMap.put("foo".toLowerCase(), new Foo());

Foo f = myMap.get("foo".toLowerCase()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T07:38:44.627

如果您不想在使用地图时重复使用“toLowerCase”，则可以为此创建自己的 HashMap 子类。覆盖`get`, `put`, `containsKey`, 并将`remove`键转换为小写，然后在超类中使用此小写键调用相应的函数。

请注意，`toLowerCase()`/`toUpperCase()`的行为因语言环境而异，因此存在仅根据 JVM 运行位置而获得不同结果的风险。这可能需要也可能不需要，具体取决于您将哪些字符串用作键（用户输入、硬编码等）。考虑`toUpperCase(Locale locale)`是否需要一致的大小写规则。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-17T02:48:04.063

对于一个完整的例子，看看 Apache Commons db utils... 具体来说，来源私有内部类**org.apache.commons.dbutils.BasicRowProcessor$CaseInsensitiveHashMap**

[https://apache.googlesource.com/commons-dbutils/+/trunk/src/main/java/org/apache/commons/dbutils/BasicRowProcessor.java](https://apache.googlesource.com/commons-dbutils/+/trunk/src/main/java/org/apache/commons/dbutils/BasicRowProcessor.java)

这在一些 JDBC 驱动程序中用于访问映射，这些映射是不区分大小写的列名数据库（如 Oracle）中的结果查询。

# android - 如何在android中实现水平圆形滚轮？

> ID：14702167
> 
> 赞同：2
> 
> 时间：2013-02-05T07:24:17.960
> 
> 标签：android, horizontal-scrolling, android-wheel

> **可能重复：**
> [如何使 android-wheel 水平？](https://stackoverflow.com/questions/9638927/how-to-make-android-wheel-horizontal)

我想像这样制作水平圆形滚轮。请建议我如何实现它。

![在此处输入图像描述](../Images/9d324820fd0a88a7a9a635a0aa026e19.png)

# sql-server - 为 orderby 生成 sql 查询的方法是否在 tiny_tds 0.2.3 和 0.4.3 之间更改

> ID：14702168
> 
> 赞同：1
> 
> 时间：2013-02-05T07:24:29.917
> 
> 标签：sql-server, ruby-on-rails-3, tiny-tds

我有**rails 3.0.1 和 tiny_tds 0.2.3 和 activerecord-sqlserver-adapter 3.0.7**，下面的查询工作正常。升级到 **rails 3.0.20、tiny_tds 0.4.3、activerecord-sqlserver-adapter 3.0.19**后，由于 order by 子句而停止工作。

有一个表**events**，其列**starts_at**的类型为**datetime**。

**红宝石代码：**

> @events = Event.where("archived = 'False' and starts_at >= ? and event_company_id in (1,2,3)", start_date).select(" distinct top(14) convert(date, starts_at, 112) as start_date").order("convert(date, starts_at, 112)")

**用于生成sql查询如下：**

> SELECT distinct top(14) convert(date, starts_at, 112) as start_date FROM [events] WHERE (archived = 'False' and starts_at >= '2013-02-04' and event_company_id in (1,2,3)) ORDER通过转换（日期，开始时间，112）

**但是现在，正在生成的查询是：**

> SELECT distinct top(14) convert(date, starts_at, 112) as start_date FROM [events] WHERE (archived = 'False' and starts_at >= '2013-02-05' and event_company_id in (1,2,3)) ORDER通过转换（日期 ASC，starts_at ASC，112）ASC

请注意 order by 周围的部分：

> **ORDER BY 转换（日期 ASC，starts_at ASC，112）ASC**
> 
> **而不是 ORDER BY convert(date, starts_at, 112)**

因此，我收到以下错误：

> **TinyTds::Error：关键字“ASC”附近的语法不正确。：**

此类查询是否需要遵循一些语法更改，或者我使用的版本不正确？作为从 rails 3.0.1 迁移到 rails 3.0.20 的一部分，我不得不升级 tiny_tds 和 activerecord-sqlserver-adapter

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T14:01:53.950

从 3.0.8 开始，似乎有猴子补丁试图修复 Arel 解析 order by 子句的方式： [class SelectManager, method order(*expr)](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/blob/3.0.8/lib/arel/visitors/sqlserver.rb)

如果您将字符串传递给 order 子句，它将简单地用逗号分割字符串以获得列名数组。如果您按函数排序，那么它将完全破坏 order by 子句。好消息是，您可以通过将类似这样的内容传递给 order 子句来防止这种失败的拆分：

```
order(
  Arel::Nodes::Ordering.new(
    Arel::Nodes::SqlLiteral.new("convert(date, starts_at, 112)")
  )
) 
```

函数调用将按原样传递给 sql 语句生成器

# php - mysql查询中的group_concat提前停止

> ID：14702177
> 
> 赞同：0
> 
> 时间：2013-02-05T07:25:19.500
> 
> 标签：php, mysql

我在 mysql 查询中遇到 group_concat 问题：

它停在513号！

这是正常查询，它返回 813 行：

```
SELECT * 
FROM survey_votes
WHERE sid =  '4' 
```

现在问题出在这个查询上：

```
SELECT s.*,     
    GROUP_CONCAT(v.oid) AS myoids
    FROM survey s
    LEFT JOIN survey_votes v ON s.sid=v.sid
    WHERE s.sid='4' 
```

这将返回 1 行，其中包含最多 513 个字符串的数组“myoids”。

表“调查”的结构：

```
sid  int(11)          
stitle   varchar(255)
sdesc    text     
soptions text    
sdate    datetime  
active   int(1) 
```

调查投票：

```
vid int(11) 
sid int(11)     
uid int(11)     
uip varchar(255)    
oid int(11)     
sdate   datetime 
```

***myoids 最多***只包含 513 行：

```
Array
(
    [0] => 1
    [1] => 1
    [2] => 3
    .........
    [511] => 1
    [512] => 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:43:00.260

这是因为 MySQL 会[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)在一定限制后截断结果：

> 结果被截断为 group_concat_max_len 系统变量给出的最大长度，默认值为 1024。

[`group_concat_max_len`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_group_concat_max_len)尝试使用以下`SET`命令增加变量的值：

```
SET SESSION group_concat_max_len = 1024 * 1024; -- 1MB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:28:29.670

查询应该是

```
SELECT s.*,     
GROUP_CONCAT(v.oid) AS myoids
FROM survey s
LEFT JOIN survey_votes v ON s.sid=v.sid
WHERE v.sid='4'
      // here was the problem it should be v.sid not s.sid 
```

因为在您的第一个查询中，您从`survey_votes`哪里选择`sid = '4'`

```
SELECT * 
FROM survey_votes
WHERE sid =  '4' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:42:08.037

这会返回多少行：

```
SELECT * 
FROM survey
WHERE sid =  '4' 
```

这会返回 513 行吗？

# excel - 根据某些字段从 2 个 excel 电子表格中查找重复项

> ID：14702178
> 
> 赞同：0
> 
> 时间：2013-02-05T07:25:25.850
> 
> 标签：excel

我有两个 Excel 电子表格。两者都有相同的字段/列，例如姓名、单位编号、城市、密码等。我想比较这两张表，并根据某些特定字段（例如单位编号、建筑物、位置、城市）找出重复项。那么我该如何实现呢？

如果我能得到这方面的帮助，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T23:13:58.863

Since your requirement seems quite vague I’d suggest adding a column to indicate which are the source sheets for your data and then appending one sheet to the other. For compariosns, filter one or more columns of the combination.

# c# - 匿名类型列表？

> ID：14702183
> 
> 赞同：6
> 
> 时间：2013-02-05T07:25:36.443
> 
> 标签：c#, .net, anonymous-types

我需要创建*一些东西*的对/三元组并将其存储在某个地方。我该怎么做？

我试过：

```
for (int i = 0; i < 100; i++)
{
    var item=new { a=i , b="lala" ,c=4.5m}; //anonymous type
} 
```

但后来我想：`List<what>`？

我可以使用动态，但我想要智能感知。

*（我也可以使用`Tuple<int,string,decimal>`，但如果我已经有了我需要的东西（`=new { a=i , b="lala" ,c=4.5m};`），我为什么要使用其他类型（元组）？）*

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T07:30:00.003

您可以使用类型推断

```
var items = Enumerable.Range(0,100)
                      .Select(i => new { a=i , b="lala", c=4.5m })
                      .ToList(); // not necessary (you can use IEnumerable) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T07:31:43.487

不确定如何填写 中的字段`for`，但您可以尝试：

```
var lstOfSmth = Enumerable.Range(0, 100)
                            .Select(i => new { a = i, b = "lala", c = 4.5m })
                            .ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T07:45:26.933

> 我为什么要使用其他类型（元组）

因为它们正是为此目的而设计的。如果您害怕冗长的代码，该`using`指令也可以提供帮助。

```
using myPair = Tuple<int,string>;
using myTriple = Tuple<int,string,decimal>;
//...
for (int i = 0; i < 100; i++)
{
    myPair pair = new myPair(1,"string");
    myTriple triple = new myTriple(i,"lala", 4.5);
} 
```

# java - 如何使 InputStreamReader 对无效数据进行编码失败？

> ID：14702189
> 
> 赞同：7
> 
> 时间：2013-02-05T07:26:15.993
> 
> 标签：java, encoding, inputstreamreader

我有一些字节应该是 UTF-8 编码的，但如果用户以某种方式没有设法以正确的方式使用他的文本编辑器，那么其中可能包含的文本是 ISO8859-1 编码。

我用 InputStreamReader 读取文件：

```
InputStreamReader reader = new InputStreamReader( 
    new FileInputStream(file), Charset.forName("UTF-8")); 
```

但是每次用户使用像“ä”这样的变音符号时，当存储在 ISO8859-1 中时它们是无效的 UTF-8，InputStreamReader 不会抱怨，而是添加占位符字符。

有没有简单的方法可以让这个在无效输入时抛出异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T07:31:57.590

```
CharsetDecoder decoder = Charset.forName("UTF-8").newDecoder();
decoder.onMalformedInput(CodingErrorAction.REPORT);
decoder.onUnmappableCharacter(CodingErrorAction.REPORT);
InputStreamReader reader = new InputStreamReader(
    new FileInputStream(file), decoder); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:00:13.933

只需添加`.newDecoder()`：

```
InputStreamReader reader = new InputStreamReader( 
    new FileInputStream(file), Charset.forName("UTF-8").newDecoder()); 
```

# javascript - 在 Java Script 中显示不带警告框的错误消息

> ID：14702190
> 
> 赞同：10
> 
> 时间：2013-02-05T07:26:21.630
> 
> 标签：javascript, html

请更正以下代码，它没有按预期工作，即当用户输入无效名称时，我需要在表单中的文本字段旁边显示一条错误消息

```
<html>
  <head>
  <script type="text/javascript">
  function validate() {
  if(myform.fname.value.length==0)
  {
   document.getElementById("fname").innerHTML="this is invalid name ";
  }
  }
  </script>
  </head>
  <body>
  <form name="myform">
  First_Name
  <input type=text id=fname name=fname onblur="validate()"> </input>

  <br> <br>
  Last_Name
  <input type=text id=lname name=lname onblur="validate()"> </input>

  <br>
  <input type=button value=check> 

  </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T07:43:49.650

试试这个代码

```
<html>
<head>
 <script type="text/javascript">
 function validate() {
  if(myform.fname.value.length==0)
  {
document.getElementById('errfn').innerHTML="this is invalid name";
  }
 }
 </script>
</head>
<body>
 <form name="myform">
  First_Name
  <input type=text id=fname name=fname onblur="validate()"> </input><div id="errfn">   </div>

<br> <br>
Last_Name
<input type=text id=lname name=lname onblur="validate()"> </input>

<br>
<input type=button value=check> 

</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T08:17:16.413

我同意**@ReNjITh.R 的**回答，但如果你想在文本框旁边显示错误消息。就像下面一样

![在此处输入图像描述](../Images/6f66eb2800a4510dbe0ade6d5e3e8e36.png)

```
<html>
<head>
<script type="text/javascript">
    function validate() 
    {
        if(myform.fname.value.length==0)
        {
           document.getElementById('errfn').innerHTML="this is invalid name";
        }
    }
</script>
</head>
<body>
    <form name="myform">
         First_Name
         <input type=text id=fname name=fname onblur="validate()" /><span id="errfn"></span>
        <br> <br>
         Last_Name
         <input type=text id=lname name=lname onblur="validate()"/><br>
         <input type=button value=check /> 
    </form>
</body> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-05T07:41:07.203

网站管理员或网络程序员，请插入

```
<!DOCTYPE html> 
```

在页面的开头。其次，您应该用引号将您的属性括起来，例如

```
type="text" id="fname" 
```

**输入**元素不应包含结束元素，只需将其关闭即可：

```
 /> 
```

输入元素没有`innerHTML`，它有或者`value`你的javascript行应该是：

```
document.getElementById("fname").value = "this is invalid name"; 
```

请以有条理的方式书写，并确保其符合标准。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T07:30:12.957

你可以这样试试

```
 <html>
          <head>
          <script type="text/javascript">
          function validate() 
          {
            var fnameval=document.getElementById("fname").value;
            var fnamelen=Number(fnameval.length);
               if(fnamelen==0)
               {
                  document.getElementById("fname_msg").innerHTML="this is invalid name ";
                }
            }
          </script>
          </head>
          <body>
          <form name="myform">
          First_Name
          <input type=text id=fname name=fname onblur="validate()"> </input>
           <span id=fname_msg></span>
          <br> <br>
          Last_Name
          <input type=text id=lname name=lname onblur="validate()"> </input>

          <br>
          <input type=button value=check> 

          </form>
          </body>
        </html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-13T06:57:55.677

你也可以试试这个

* * *

```
<tr>
    <th>Name :</th>
    <td><input type="text" name="name" id="name" placeholder="Enter Your Name"><div id="name_error"></div></td>
</tr>

    function register_validate()
{
    var name = document.getElementById('name').value;
    submit = true;
    if(name == '')
    {
        document.getElementById('name_error').innerHTML = "Name Is Required";
        return false;
    }
    return submit;
}
document.getElementById('name').onkeyup = removewarning;
function removewarning()
{
    document.getElementById(this.id +'_error').innerHTML = "";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T07:57:46.237

You should use .value and not .innerHTML as it is a input type form element

```
<html>
  <head>
  <script type="text/javascript">
  function validate() {
  if(myform.fname.value.length==0)
  {
   document.getElementById("fname").value="this is invalid name ";
  }
  }
  </script>
  </head>
  <body>
  <form name="myform">
  First_Name
  <input type=text id=fname name=fname onblur="validate()"> </input>

  <br> <br>
  Last_Name
  <input type=text id=lname name=lname onblur="validate()"> </input>

  <br>
  <input type=button value=check> 

  </form>
  </body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T07:41:09.373

首先，您尝试写入输入字段的 innerHTML。这行不通。您需要有一个 div 或 span 来写入。尝试类似：

```
First_Name
<input type=text id=fname name=fname onblur="validate()"> </input>
<div id="fname_error"></div> 
```

然后将您的验证功能更改为读取

```
if(myform.fname.value.length==0)
    {
    document.getElementById("fname_error").innerHTML="this is invalid name ";
    } 
```

其次，我总是对使用 onBlur 做这种事情犹豫不决。可以在不退出字段（例如返回键）的情况下提交表单，在这种情况下您的验证代码将不会被执行。我更喜欢从提交表单的按钮运行验证，然后仅当文档通过验证时才从函数内调用 submit()。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-05T07:36:22.297

在这里设置输入值的 innerHtml 不会有任何好处，请尝试使用其他元素（如 span），或者只显示以前制作的隐藏错误消息。您可以设置名称字段的值。

```
<head>
    <script type="text/javascript">
        function validate() {
            if (myform.fname.value.length == 0) {
                document.getElementById("fname").value = "this is invalid name ";
                document.getElementById("errorMessage").style.display = "block";
            }
        }
    </script>
</head>

<body>
    <form name="myform">First_Name
        <input type="text" id="fname" name="fname" onblur="validate()"></input> <span id="errorMessage" style="display:none;">name field must not be empty</span>

        <br>
        <br>Last_Name
        <input type="text" id="lname" name="lname" onblur="validate()"></input>
        <br>
        <input type="button" value="check" />
    </form>
</body> 
```

[小提琴](http://jsfiddle.net/ZP9yP/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T08:02:48.367

尝试这个

```
<html>
  <head>
  <script type="text/javascript">
  function validate() {
  if(myform.fname.value.length==0)
  {
   document.getElementById("error").innerHTML="this is invalid name ";
   document.myform.fname.value="";
   document.myform.fname.focus();
  }
  }
  </script>
  </head>
  <body>
  <form name="myform">
  First_Name
  <input type="text" id="fname" name="fname" onblur="validate()"> </input>
<span style="color:red;" id="error" > </span>
  <br> <br>
  Last_Name
  <input type="text" id="lname" name="lname" onblur="validate()"> </input>

  <br>
  <input type=button value=check> 

  </form>
  </body>
</html> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-05T07:53:48.710

试试这样：

```
function validate(el, status){
     var targetVal = document.getElementById(el).value;
     var statusEl = document.getElementById(status);
     if(targetVal.length > 0){
        statusEl.innerHTML = '';
  }
     else{
        statusEL.innerHTML = "Invalid Name";
   }
} 
```

现在HTML：

```
<!doctype html>
<html lang='en'>
<head>
<title>Derp...</title>
</head>
<body>
<form name="myform">
  First_Name
  <input type="text" id="fname" name="fname" onblur="validate('fname','fnameStatus')">
  <br />
  <span id="fnameStatus"></span>
  <br />
  Last_Name
  <input type="text" id="lname" name="lname" onblur="validate('lname','lnameStatus')"> 
  <br />
  <span id="lnameStatus"></span>
  <br />
  <input type=button value=check> 
</form>
</body>
</html> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-27T15:43:31.283

您应该将脚本代码放在 HTML 代码之后和正文标记内。这样它就不会在 html 代码之前运行。

# ios - 日期格式如“12 月 10 日星期一”在 ios 5.1 中显示错误

> ID：14702192
> 
> 赞同：1
> 
> 时间：2013-02-05T07:26:33.477
> 
> 标签：ios, ipad, ios5

我正在使用下面的代码。

```
NSString * weekdayString = [[self date] descriptionWithLocale:@"%A"];
NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setLocale:usLocale];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];
dateString = [NSString stringWithFormat:@"%@,%@",weekdayString,[dateFormatter stringFromDate:[self date]]];
NSArray * components = [dateString componentsSeparatedByString:@","];
dateString = [NSString stringWithFormat:@"%@,%@",[components objectAtIndex:0],[components objectAtIndex:1]]; 
```

它在模拟器和 ios 6.0 中运行良好，但在设备（iPad）中的 ios 5.1 中没有按预期显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:43:34.083

[`NSDate -descriptionWithLocale`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/descriptionWithLocale%3a)有文件证明采取`NSLocale`; 您正在传递一个`NSString`因此依赖于无证行为。

还不清楚您要通过拆分为组件来实现什么 - 大概您已经假设 NSDateFormatterShortStyle 将始终包含逗号？文档也不能保证这一点。

您可能想要做的只是设置一个自定义日期格式字符串。从您帖子的标题看来，您可能想要`EEEE, MMMM dd`。所以例如

```
// see QA1480 re: en_US_POSIX
NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setLocale:usLocale];
[dateFormatter setDateFormat:@"EEEE, MMMM dd"];
dateString = [dateFormatter stringFromDate:[self date]]; 
```

[QA1480](http://developer.apple.com/library/ios/#qa/qa1480/_index.html)解决了可能导致`NSDateFormatter`在内部静默调整日期格式化程序的问题。

# objective-c - 使用目标 c 启用复选框时启用文本框

> ID：14702199
> 
> 赞同：1
> 
> 时间：2013-02-05T07:27:00.523
> 
> 标签：objective-c, cocoa, nstextfield

当我通过 Cocoa 中的绑定选中复选框时，如何启用文本框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:46:59.653

`value`将复选框和文本字段绑定`enabled`到同一对象的同一属性——通常是您的文件所有者（通常是窗口控制器、视图控制器或文档）或某种对象控制器（例如数组控制器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:52:49.043

首先，将文本框连接到 IBOutlet。

而不是使用绑定，您可以将按钮设置为在被触摸时触发一个动作方法（[这称为 IBAction 并且在这个相关问题中有更多细节](https://stackoverflow.com/questions/545721/bind-action-to-uibutton)）

当按钮（或在您的情况下为复选框）的状态发生更改时，将调用 IBAction 方法并根据复选框的状态，您可以通过您连接的插座启用或禁用您的文本框。

# java - Apache Gora - 创建 hbase 数据存储时出现 java.net.MalformedURLException

> ID：14702205
> 
> 赞同：1
> 
> 时间：2013-02-05T07:27:18.827
> 
> 标签：java, hbase, gora

我正在构建一个使用 Gora-hbase 作为后端的项目。Hbase 已启动并正在运行。我没有使用 maven 或 ivy 。

我还在 /conf/gora.properties 中指定了以下内容：

> gora.datastore.default=org.apache.gora.hbase.store.HBaseStore gora.datastore.autocreateschema=true

在我的代码中，我使用以下代码来启动数据存储：

> datastore = DataStoreFactory.getDataStore(long.class,UserDetails.class,new Configuration());

我在上面的行中遇到以下异常：

```
13/02/04 23:02:26 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x13ca8d9ecac000c, negotiated timeout = 40000
org.apache.gora.util.GoraException: java.lang.RuntimeException: java.net.MalformedURLException
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:167)
    at org.apache.gora.store.DataStoreFactory.getDataStore(DataStoreFactory.java:278)
    at com.psl.gora.java.model.TestClass.init(TestClass.java:34)
    at com.psl.gora.java.model.TestClass.<init>(TestClass.java:23)
    at com.psl.gora.java.model.TestClass.main(TestClass.java:47)
Caused by: java.lang.RuntimeException: java.net.MalformedURLException
    at org.apache.gora.hbase.store.HBaseStore.initialize(HBaseStore.java:125)
    at org.apache.gora.store.DataStoreFactory.initializeDataStore(DataStoreFactory.java:102)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:161)
    ... 4 more
Caused by: java.net.MalformedURLException
    at java.net.URL.<init>(URL.java:617)
    at java.net.URL.<init>(URL.java:480)
    at java.net.URL.<init>(URL.java:429)
    at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
    at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:453)
    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:770)
    at org.apache.gora.hbase.store.HBaseStore.readMapping(HBaseStore.java:524)
    at org.apache.gora.hbase.store.HBaseStore.initialize(HBaseStore.java:111)
    ... 6 more
Caused by: java.lang.NullPointerException
    at java.net.URL.<init>(URL.java:522)
    ... 19 more 
```

有什么我遗漏或不知道的吗？
任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:15:49.187

当显示此堆栈跟踪时，可能是因为`gora-hbase-mapping.xml`缺少。

这个问题来自几个月前，但如果其他人有同样的问题，也许这会有所帮助。

From`HBaseStore:524`被调用`builder.build(null)`，结果类似于[http://www.eclipse.org/forums/index.php/t/262714/](http://www.eclipse.org/forums/index.php/t/262714/)

---- 其他可能性 ----

尝试作为关键类`String.class`并检查它是否有效。（只是检查...）

# iis-7 - IIS7 要求 SSL 和必须要求选项

> ID：14702206
> 
> 赞同：0
> 
> 时间：2013-02-05T07:27:25.093
> 
> 标签：iis-7, asp.net-web-api, client-certificates, ca

我在 HTTPS(443) 上的 Windows 7(IIS7) 开发人员机器上托管了一个 ASP.NET Web API 项目，并且 SSL Required 勾选了 Require Option true。

为了测试，我给出了它的主机头值：www.certtest.com，我在本地机器的主机文件中添加了相同的值。

我们还有一台 W2k3 机器，我们在其中配置了 CA 并从中获取测试证书。

我们在 IIS7.0 中导入相同的证书用于客户端身份验证。

当我们尝试访问站点时，它第一次要求我提供证书，然后在我的本地商店中使用根证书安装该证书，但我立即看到 403.7 Forbidden 错误。

另外，我尝试使用自签名证书。同样的问题。

我们是否需要通过 Thwate 类型 CA 进行客户端身份验证的有效试用证书才能完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:22:49.487

是的，这是我们没有有效证书的情况，为了进行测试，您可以将 SSL 设置设置为接受，看看是否适合您。

但是，您将需要相同的有效证书。

# sql - 在 Postgres 中左外连接两层导致笛卡尔积

> ID：14702214
> 
> 赞同：5
> 
> 时间：2013-02-05T07:28:00.340
> 
> 标签：sql, postgresql, left-join, aggregate-functions

给定以下 4 个表：

```
CREATE TABLE events ( id, name )
CREATE TABLE profiles ( id, event_id )
CREATE TABLE donations ( amount, profile_id )
CREATE TABLE event_members( id, event_id, user_id ) 
```

我正在尝试获取所有事件的列表，以及任何成员的数量以及任何捐赠的总和。问题是捐赠的总和返回错误（似乎是捐赠的笛卡尔结果 * # of event_members）。

这是 SQL 查询（Postgres）

```
SELECT events.name, COUNT(DISTINCT event_members.id), SUM(donations.amount)
FROM            events
LEFT OUTER JOIN profiles      ON events.id = profiles.event_id
LEFT OUTER JOIN donations     ON donations.profile_id = profiles.id
LEFT OUTER JOIN event_members ON event_members.event_id = events.id
GROUP BY events.name 
```

sum(donations.amount) 返回 = 实际捐款总和 * event_members 中的行数。如果我注释掉 count(distinct event_members.id) 和 event_members 左外连接，则总和是正确的。

编辑：欧文为我指出了正确的方向。查询重写为：

```
选择 events.name, COUNT(DISTINCT event_members.id),
  从捐赠中选择（SUM（donations.amount），其中donations.profile_id = profiles.id 和profiles.event_id = events.id 的个人资料）作为total_donations
    从事件
    左外连接 event_members ON event_members.event_id = events.id
    GROUP BY events.name

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T07:48:17.943

正如我在[引用的问题下](https://stackoverflow.com/questions/12464037/two-sql-left-joins-produce-incorrect-result)详细解释的那样，您需要先聚合，然后加入表以避免代理`CROSS JOIN`。像这样：

```
SELECT e.name, e.sum_donations, m.ct_members
FROM (
    SELECT e.id, e.name, SUM(d.amount) AS sum_donations
    FROM   events             e
    LEFT   JOIN profiles      p ON p.event_id = e.id
    LEFT   JOIN donations     d ON d.profile_id = p.id
    GROUP  BY 1, 2
    ) e
LEFT   JOIN (
    SELECT event_id, COUNT(DISTINCT id) AS ct_members
    FROM   event_members
    GROUP  BY 1
    ) m ON m.event_id = e.id 
```

IF`event_members.id`是主键（正如人们可能假设的那样），您可以简化为

```
COUNT(*) AS ct_members 
```

since `id` is guaranteed to be `UNIQUE NOT NULL`. That's a little faster.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:44:38.230

您似乎有这两个独立的结构（`-[`意味着`1-N`关联）：

```
events -[ profiles -[ donations
events -[ event members 
```

我将第二个包装到子查询中：

```
SELECT events.name,
  member_count.the_member_count
  COUNT(DISTINCT event_members.id),
  SUM(donations.amount)

FROM            events
LEFT OUTER JOIN profiles      ON events.id = profiles.event_id
LEFT OUTER JOIN donations     ON donations.profile_id = profiles.id

LEFT OUTER JOIN (
  SELECT
    event_id,
    COUNT(*) AS the_member_count
  FROM event_members
  GROUP BY event_id
) AS member_count
  ON member_count.event_id = events.id

GROUP BY events.name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:42:23.287

当然，您会在每个事件的捐赠和事件之间得到一个笛卡尔积，因为两者都只绑定到事件，除了事件 ID 之外，捐赠和 event_members 之间没有连接关系，这当然意味着每个成员都匹配每个捐赠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T07:42:59.233

当您进行查询时，您会询问*所有事件*- 假设有两个事件，事件 Alpha 和事件 Beta - 然后与成员一起加入。假设有一个成员 Alice 参与了这两个事件。

```
SELECT events.name, COUNT(DISTINCT event_members.id), SUM(donations.amount)
FROM            events
LEFT OUTER JOIN profiles      ON events.id = profiles.event_id
LEFT OUTER JOIN donations     ON donations.profile_id = profiles.id
LEFT OUTER JOIN event_members ON event_members.event_id = events.id
GROUP BY events.name 
```

在每一行上，您都询问爱丽丝的捐款总额。如果 Alice 捐赠了 100 美元，那么您要求：

```
Alpha  Alice  100USD
Beta   Alice  100USD 
```

所以毫不奇怪，当询问**总额**时， Alice 捐赠了 200 美元。

如果您想要*所有捐赠*的总和，您最好使用两个不同的查询。尝试使用单个查询完成所有事情，虽然可能，但将是经典的[SQL 反模式](http://pragprog.com/book/bksqla/sql-antipatterns)（实际上是第 18 章“意大利面条查询”中的那个）：

> **非预期产品**
> 
> 在一个查询中生成所有结果的一个常见结果是笛卡尔积。当查询中的两个表没有限制它们的关系的条件时，就会发生这种情况。如果没有这样的限制，两个表的连接会将第一个表中的每一行与另一个表中的每一行配对。每个这样的配对都成为结果集中的一行，最终得到的行数比您预期的要多得多。

# ember.js - 绕过/禁用大写 - > Handlebars 模板中的全局推断？

> ID：14702224
> 
> 赞同：1
> 
> 时间：2013-02-05T07:28:30.553
> 
> 标签：ember.js, handlebars.js

我有以下车把模板（片段）：

```
{{#each cbe in abs.XyzBookingEntries}}
    <tr>
        {{#if cbe.isLoaded}}
            <td>{{cbe.XYZdata.ApptDuration}} min:</td> 
            <td>
                {{cbe.XYZdata.ApptType}}
                {{#if cbe.XYZdata.ApptTypeDetailCode}}
                    ({{cbe.XYZdata.ApptTypeDetailCode}})
                {{/if}}
            </td>
            <td {{bindAttr class="cbe.XYZdata.statusClass"}}><strong>{{cbe.XYZdata.ApptStatus}}</strong></td>
        {{else}}
            <td>
                Loading...
            </td>
        {{/if}}
    </tr>
{{/each}} 
```

从中可以观察到两件事：

1.  我在我的模型上大写了属性
2.  我在这些属性中的大小写不一致（XyzBookingEntries 与 XYZdata）

如果我不使用旧数据源，我会很高兴解决这两个问题。但是我有多个底层数据源，具有不同的开发人员和不同的约定（或缺乏约定）。模型通过大部分自动化的 ORM 和序列化从我的数据库获取到客户端。而且由于约定不一致，因此自动名称映射（例如 with `keyForAttributeName`）会很困难，尤其是双向（XYZdata -> xyzdata -> Xyzdata？）。但是，如果这只是一个糟糕的约定问题，我可以用文档来解决它。

更大的问题是我的车把模板带有这些名称——*我认为是因为它想将它们解释为全局变量而不是成员属性*。当以下模板呈现时，我收到以下警告消息：

```
WARNING: Watching an undefined global, Ember expects watched globals to be setup 
by the time the run loop is flushed, check for typos 
```

*尽管我确实得到了按预期呈现的所有数据！*当它从 DOM 中删除时，我会收到如下错误：

```
node is undefined
    node.unchain(key, path); 
```

如果我在出现警告和错误时观察调用堆栈中的变量，则可以找到我在模板中呈现的键（`pendingQueue`例如，在 中）。

Handlebars 认为它​​们是全局变量的理论得到了以下事实的支持：如果我定义了以下属性：

```
xyzData: function(){
    return this.get('XYZdata');
}.property('XYZdata') 
```

并将我所有的链改为引用`cbe.xyzData.*`，警告和错误就会消失！

**所以，我的问题是：**

有没有办法可以配置/说服 Ember/Handlebars 按原样使用属性名称，即忽略大写 -> 全局约定？如果可能，我想避免手动映射大量属性。也欢迎其他可能性/建议。

我应该提到我在 1.0.0-pre4 上，并且看到最近的主人有同样的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:40:58.357

> 有没有办法可以配置/说服 Ember/Handlebars 按原样使用属性名称，即忽略大写 -> 全局约定？

这些约定深深地融入了框架，确保没有开/关开关。

> 如果可能，我想避免手动映射大量属性。也欢迎其他可能性/建议。

这正是序列化程序的用途。当然，手工绘制这些属性听起来像是一个很大的提升，但除非您的数据源每天都在变化，否则这是一次性的事情，并且不会比首先定义 ember-objects 付出更多的努力。另一个好处是您可以将此映射封装在一个地方，从而释放您的 ember 模型/控制器/视图/模板以使用一致的命名约定。我会认真建议投资这种方法。例如：

```
serializer.map(Cbe, {
  xyzdata: { key: 'XYZdata' }
}); 
```

有了这些，ember 将负责所有属性的双向映射。查看[json 序列化程序测试](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/json_serializer_test.js)以获取更多关于如何完成此操作的示例。

# html - 在 ASP 页面之间传递时如何设置变量的编码

> ID：14702226
> 
> 赞同：0
> 
> 时间：2013-02-05T07:28:38.683
> 
> 标签：html, encoding, utf-8, asp-classic

假设我有页面 A，它使用 ks_c_5601-1987（韩语）作为编码和页面 B，使用 UTF-8（韩语）作为编码。我需要将一个字符串变量从 A 传递到 B 是韩语。因为两个页面使用不同的编码，所以当 B 使用 Request() 接收到变量时，变量会变得混乱。

将 A 中的字符串变量传递给 B 时，如何将其编码为 UTF-8？我知道将两个页面都设置为 UTF-8 编码方案是这里最明智的解决方案，但不幸的是，这里不是一个选项，因为页面 A 使用了几个完全依赖 ks_c_5601-1987 编码的 dll。

编辑：查看答案后，我继续尝试了该方法。这是将变量邮箱发送到 get_list_center.asp 的代码：

```
<!--mail_mail.asp, page in ks_c_5601-1987-->
<%
dim mailbox = "테스트"
Response.CodePage = 65001 'Response.write should now encode the string into UTF-8
%>

...
<frame name="get_list_center" scrolling="auto" marginwidth="0" framespacing="0" marginheight="0" frameborder="0" src="get_list_center.asp?mailbox=<%=mailbox%>"> 
```

这就是我在 get_list_center.asp 中接收变量的方式：

```
<%
Session.Codepage=65001

Response.CharSet="UTF-8" 

response.Write CStr(response.codepage) & "<BR>"
response.Write CStr(session.CodePage) & "<BR>"
response.Write CStr(response.CharSet) & "<BR>"
response.codepage = 949
response.Write mailbox & "<BR>"
response.codepage = 65001
response.Write mailbox & "<BR>"
%> 
```

结果如下：

![在此处输入图像描述](../Images/a49e1d8451c92ed311acc3b6b44465c5.png)

response.write 的 949 (ks_c_5601-1987) 和 65001 (UTF-8) 版本都损坏了。还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:21:55.487

我认为您可以通过阅读此问题的解决方案来获得答案：**[内部字符串编码](https://stackoverflow.com/questions/6937509/internal-string-encoding#6941292)** 。

通过利用`Reponse.Codepage`，您可以影响发布变量的解释方式。据我了解，您可以然后切换回您喜欢的任何编码。

* * *

[更新]

因为您使用的是 iframe，所以在将请求发送回服务器时，浏览器会处理编码。*并且浏览器（据我所知）以与原始页面*相同的编码发送数据。因此，如果包含 iframe 的页面 A 具有 charset=Korean 我相信数据是使用韩语编码发送的。

字符集是否在页面 A 的 html 标记中定义？如果没有，请添加它，然后尝试在页面 B 中使用相同的内容。

```
<meta charset="utf-8"> 
```

此外，由于“테스트”是受**FILE**编码影响的字符串文字，请确保以适当的编码保存 asp 文件。

# javascript - IE 10 + jQuery - 无法使用“追加”功能

> ID：14702228
> 
> 赞同：0
> 
> 时间：2013-02-05T07:28:41.817
> 
> 标签：javascript, jquery, xml-parsing, internet-explorer-10

我正在使用 KendoUI 框架运行 HTML 5 应用程序。有一次屏幕处理需要解析和处理的 XML 数据。

此屏幕需要显示为弹出窗口，并且该数据显示在此弹出窗口内的网格中。为此，我在单击“show-popup”按钮时调用一个函数，其中包含以下代码：

```
 var tTranslationXML = XMLFromString(_SelectedCategoryValueRecord.DisplayTextTranslation);
.
.
.
// other stuff but nothing that changes "tTranslationXML"
. 
.
if (_SelectedCategoryValueRecord.DisplayTextTranslation) // and there are values in the translation field
            {
                var $language = $(tTranslationXML).find('Language');
                var $oldTranslation = $($language).find("en-US");
                if ($oldTranslation.length == 0)
                    $oldTranslation = $($language).find(GetCorrectedCase("en-US"));
                if ($oldTranslation.length == 0) {
                    var $newTranslation = $.createElementNS("en-US").text(_UpdatedDisplayText);
                    $language.append($newTranslation);
                }
            } 
```

如果您想知道“XMLFromString”是什么，它只不过是一个从字符串变量解析 XML 数据的简单助手

```
function XMLFromString(pXMLString) 
{
if (!pXMLString)
    pXMLString = "<Language></Language>";
if (window.ActiveXObject) {
    var oXML = new ActiveXObject("Microsoft.XMLDOM");
    oXML.loadXML(pXMLString);
    return oXML;
} else {
    return (new DOMParser()).parseFromString(pXMLString, "text/xml");
}
} 
```

我的问题是这在 Chrome 和 Firefox 上运行良好，但是当执行此特定行时，我在 IE10 中收到错误 -

**"$language.append($newTranslation);"**

我基本上是在尝试将新的翻译值附加到我的变量的内容中。

错误如下： **SCRIPT13: Type mismatch jquery-1.8.3.min.js, line 2 character 71981**

![请在此处查看 IE10 开发者工具控制台中的错误截图](../Images/18db1ed8ea9eb558c943d264475b01ef.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:26:38.983

回复较晚，抱歉。

我发现问题是避免使用“createElementNS”方法，而是在创建父节点时使用“createElement”方法。该节点的后续附件不会引发任何问题。但是，当您附加到最初使用“createElementNS”创建的节点时会出现问题。

这似乎特定于 IE10，因为 NS 方法在 chrome、FF 和 Safari 上运行良好。

谢谢大家的提示和想法。

# sql - 在sql server中调试存储过程

> ID：14702229
> 
> 赞同：1
> 
> 时间：2013-02-05T07:28:46.073
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [调试 SQL Server 2008 中的存储过程](https://stackoverflow.com/questions/1793612/debugging-stored-procedure-in-sql-server-2008)

我想在 sql server 中调试存储过程。我尝试了断点，但这对我不起作用。我什至在堆栈中进行了搜索，但没有得到正确的答案。我的程序如下，

```
USE [Practice]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER procedure [dbo].[selectsample]
@input varchar(100),
@output int output
as
begin 
select @output=id
from people where name=@input order by id desc  
end 
```

调试此存储过程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:06:55.527

尝试将前 1 名添加到您的查询中。您有一个输出参数，但您的查询可以返回多个值（如果有更多人满足 name=@input 条件怎么办）

# javascript - 像javascript一样在python中递归解码URI组件

> ID：14702231
> 
> 赞同：2
> 
> 时间：2013-02-05T07:28:56.017
> 
> 标签：javascript, python, python-3.x, python-2.7, urllib2

我有一个编码的 URI 组件`"http://www.yelp.com/biz/carriage-house-caf%25C3%25A9-houston-2"`。我可以`"http://www.yelp.com/biz/carriage-house-café-houston-2"`通过递归应用 decodeURIComponent 函数来将其转换为，如下所示

```
function recursiveDecodeURIComponent(uriComponent){
        try{
            var decodedURIComponent = decodeURIComponent(uriComponent);
            if(decodedURIComponent == uriComponent){
                return decodedURIComponent;
            }
            return recursiveDecodeURIComponent(decodedURIComponent);
        }catch(e){
            return uriComponent;
        }
    }
    console.log(recursiveDecodeURIComponent("http://www.yelp.com/biz/carriage-house-caf%25C3%25A9-houston-2")) 
```

输出：`"http://www.yelp.com/biz/carriage-house-café-houston-2"`.

我想在 python 中得到同样的结果。我尝试了以下方法：

```
print urllib2.unquote(urllib2.unquote(urllib2.unquote("http://www.yelp.com/biz/carriage-house-caf%25C3%25A9-houston-2").decode("utf-8"))) 
```

但我得到了`http://www.yelp.com/biz/carriage-house-cafÃ©-houston-2`。而不是 Expected character `é`，我得到了`'Ã©'`不管任何数量的调用 urllib2.unquote。

我正在使用python2.7.3，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:16:24.540

我想一个简单的循环应该可以解决问题：

```
uri = "http://www.yelp.com/biz/carriage-house-caf%25C3%25A9-houston-2"

while True:
    dec = urllib2.unquote(uri)
    if dec == uri:
        break
    uri = dec

uri = uri.decode('utf8')
print '%r' % uri  
# u'http://www.yelp.com/biz/carriage-house-caf\xe9-houston-2' 
```

# php - 使用php将图像上传到不同的域

> ID：14702233
> 
> 赞同：0
> 
> 时间：2013-02-05T07:28:58.897
> 
> 标签：php, image, cross-domain, image-uploading

我正在开发一个应用程序，该应用程序允许用户创建自己的 HTML 模板并将它们发布到 Internet。用户可以为此目的上传和使用图像。

**问题陈述：**
用户在发布他的模板之前必须创建一个**域。我使用****cpanel**函数来创建域。但是，我也想将他的图像上传到他创建的域并使用相同的图像（即它们的位置）当用户回来编辑模板。我不想要两个域上的单独副本！用户在**www.xyz.com上编辑他的网站，然后在****ABC.xyz.com**上创建和发布它（可以是子域或主域域）。所以，我希望将图像上传到 ABC.xyz.com 并在编辑域上反映相同的路径，因此避免了存储多个图像的开销。这会涉及**跨域**脚本吗？（我相信是的！）
由于对如何实现这一点的理解不完全，我无法开始！我想知道如何继续它？任何帮助都会有利于我朝着正确的方向开始。 **注意**：如果我开始，将更新代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:37:16.060

不，它不需要跨域脚本。您不需要将文件直接从浏览器上传到另一个域。

您可以将 em 上传到您的服务器，然后从那里复制（如果它在同一台服务器上）或 ftp/scp/无论您做什么来上传 em。

棘手的部分可能是允许用户在他的网站上进行更改。但我相信你是在同一台服务器上做的……所以简单地使用 apache mod_alias 就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:38:34.350

我不确定您的设置是什么，但我会为子域使用虚拟主机并将它们指向位于 xyz.com 域内的文件夹。

例如，用户在 xyz.com 上编辑他的网站，xyz.com 将这些图像存储到 xyz.com/ABC/images。然后，子域 ABC.xyz.com 实际上指向 xyz.com/ABC 文件夹，因为它是根 www 目录。

如果您出于某种原因将域托管在两台不同的计算机上，则可以在 cron 作业上使用 ftp 或 cp 脚本，以将另一个系统上的文件镜像到 xyz.com 域上的文件。

下面是一个 ftp 将本地文件上传到外部服务器的示例：

```
public function ExecFTPUpload($local_file, $uploadfilename){
    $handle = fopen($local_file, 'r');

    $success = true;

    $conn_id = ftp_connect($this->config->ftpserver);

    // check connection 
    if ($conn_id && ($login_result = ftp_login($conn_id, $this->config->ftp_user_name, $this->config->ftp_user_pass))) {
         ftp_pasv($conn_id, true); 
        // try to upload $local_file and save it to $handle
        if(!ftp_fput($conn_id, $uploadfilename, $handle, FTP_ASCII)) $success = false;
        ftp_close($conn_id);  
    }else $success = false;

    return $success;
} 
```

# android - Dropbox - Android - 如何在用户不知道他们正在使用 Dropbox 的情况下登录到 Dropbox？

> ID：14702235
> 
> 赞同：1
> 
> 时间：2013-02-05T07:29:11.583
> 
> 标签：android, dropbox-api

我正在尝试开发一个使用某种云存储的应用程序。我认为保管箱非常适合使用。我已经有了我的应用密钥和应用密钥。

在他们为 DBRoulette 提供的示例中，您通过外部 GUI 登录 Dropbox。对于我的应用程序，我只想在不让用户知道云部分是 Dropbox 的情况下在幕后登录

任何实现这一目标的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:36:02.820

这根本不可能，至少对于 DropBox 提供的当前公共 API 来说是不可能的。我怀疑这会很快改变，这是一件好事。

Dropbox 强制您使用 Oauth 进行身份验证和授权，他们有充分的理由这样做。

大多数提供 SDK 以允许第三方应用程序与其集成的服务提供商都使用 Oauth（Twitter、Dropbox、Linkedin、Google、SalesForce ......）。

一个重要的部分是用户**始终**需要授权应用程序代表他们访问用户数据。

这始终是最终用户需要执行的手动步骤（在大多数情况下只执行一次）。他总是需要点击某个地方的按钮来明确给予他/她的许可。

它不能在后台静默完成，就像你不能在 Android 中静默发送 SMS 文本消息而不强制用户授予这样做的权限一样。

# iphone - 应用程序屏幕截图未显示在 AppStore 中

> ID：14702239
> 
> 赞同：2
> 
> 时间：2013-02-05T07:29:34.047
> 
> 标签：iphone, ios, objective-c, app-store

我最近向 App Store 提交了我的 iPhone 应用程序，该应用程序与 iPhone 3GS 及更高版本兼容，并针对 iPhone 5 进行了优化。提交时，我添加了 1 个 4 英寸屏幕截图和 5 个 3.5 英寸屏幕截图。您可以参考下面的图片，以更好地了解我添加的图像列表：

![在此处输入图像描述](../Images/5b6bef6edebb861dd1617275bf5611fa.png)

问题是，当通过任何移动设备访问 appstore 时，我可以看到我的应用程序的所有屏幕截图，但是当我从计算机访问 appstore 时，只能看到 4 英寸视网膜显示屏的屏幕截图！

有没有人遇到过同样的问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:45:29.907

其实是因为以下原因：

在计算机/Mac 的 iTunes 中，它将显示 iPhone5 和 iPad 设备（不是 iPhone4）。因为 iPhone5 是最新的。

现在，当您在物理设备中打开您的应用程序时，比如说 iPhone4，那么它将显示 iPhone4 屏幕。

同样，如果您将在 iPad 中打开您的应用程序，那么它将显示 iPad 屏幕。

希望你明白了。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:38:27.953

iTunes 显示最新设备的屏幕截图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:36:07.273

是的，它是正确的。

默认情况下，Apple 会显示市场上最新设备的屏幕截图。

因此，由于 iPhone 5 是市场上最新的，它仅在计算机的 iTunes 上显示 iPhone 5 的屏幕截图。

如果您在设备上看到相同的内容，则会分别显示您设备的屏幕截图。

希望这些信息对你有帮助..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T07:58:08.443

默认情况下，Apple 会显示市场上最新设备的屏幕截图。

如果您不想显示**4 英寸 Retina 显示屏屏幕截图**，则只需将其从**itunesconnect**中删除，仅提交**3.5 英寸 Retina 显示屏屏幕截图**

# php - PHP Soap 客户端 - 发送错误的标头“soapenv:VersionMismatch”

> ID：14702240
> 
> 赞同：1
> 
> 时间：2013-02-05T07:29:46.973
> 
> 标签：php, soap, request, version

我遇到了一个我无法弄清楚如何解决的问题。我在php中创建了一个soap客户端，它应该向Web服务发出xml请求 - 该服务通过SoapUI工作，但是每当我通过我的php客户端发送相同的请求时，我都会收到以下错误代码：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <soapenv:Fault>
      <faultcode>**soapenv:VersionMismatch**</faultcode>
      <faultstring>**Transport level information does not match with SOAP Message namespace URI**</faultstring>
      <detail></detail>
    </soapenv:Fault>
  </soapenv:Body>
</soapenv:Envelope> 
```

现在，客户端和服务都使用soap 1.2版，我相信问题出在客户端，所以这就是我定义它的方式：

```
$options  = array(
    'trace'        => true, 
    'exceptions'   => 1, 
    'style'        => SOAP_DOCUMENT,
    'use'          => SOAP_LITERAL,
    'soap_version' => SOAP_1_2,
);
$client = new SoapClient("location_of_the_wsdl", $options); 
```

在请求中，我使用以下代码：

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:soapenc="http://www.w3.org/2003/05/soap-encoding" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <env:Header/>
   <env:Body>
      <ns2:FunctionName xmlns:ns2="namespace_of_the_service">
         <arg0>
              <data1>?</data1>
           </arg0>
       </ns2:FunctionName>
   </env:Body>
</env:Envelope> 
```

在soapUI中，这给了我一个“假”结果，因为data1留下了？，当我写入有效数据时，它返回真。

我还注意到在 soapUI 中我发送和接收 Content-type `application/soap+xml`，但是当我通过 PHP 客户端发送和接收带有 Content-Type 的标头时`text/xml`；

可能是什么问题呢？我`nusoap.php`用于客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-11T09:25:10.867

通过设置确保在开发（测试）机器的 php.ini 文件中禁用**WSDL 缓存功能**

```
soap.wsdl_cache_enabled=0 
```

仅仅因为缓存的 WSDL，我被这个问题困扰了超过 1 天 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:38:26.820

您正在使用 SOAP 版本 1.2 进行调用。你能检查一下网络服务使用的版本是否确实是 1.2 而不是 1.1。

# c# - Infragistics UltraLabel 前景色

> ID：14702246
> 
> 赞同：0
> 
> 时间：2013-02-05T07:30:12.177
> 
> 标签：c#, winforms, infragistics

使用可用的 R、G 和 B 值，我如何设置`ForeColor`an 的属性`UltraLabel`？我尝试了以下方法：

```
UltraLabel lbl = new UltraLabel();
lbl.Text = "Some text";
lbl.Appearance.ForeColor.R = 255; // ERROR: Property or indexer 'System.Drawing.Color.R' cannot be assigned to -- it is read only
lbl.Appearance.ForeColor.G = 255; // ERROR: Property or indexer 'System.Drawing.Color.G' cannot be assigned to -- it is read only
lbl.Appearance.ForeColor.B = 255; // ERROR: Property or indexer 'System.Drawing.Color.B' cannot be assigned to -- it is read only 
```

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:38:17.703

也许尝试：

```
lbl.Appearance.ForeColor = Color.FromArgb(r, g, b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:36:49.243

```
lbl.Appearance.ForeColor = new Color(255, 255, 255); 
```

# windows - 如何在用户机器上为远程服务器上的 D:/ 驱动器创建快捷方式链接

> ID：14702251
> 
> 赞同：0
> 
> 时间：2013-02-05T07:30:23.063
> 
> 标签：windows, batch-file, sharing, administration

我有几个远程服务器，我需要为其创建快捷方式并将这些快捷方式放在一个文件夹中。并将其放在用户机器中，这样当用户单击快捷方式时，用户将获得远程服务器上 D:\ 驱动器的资源管理器. 请在这方面提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:45:53.803

这是一些示例 vbscript，可以解决我认为的问题。（[信用到期的信用](https://groups.google.com/group/microsoft.public.scripting.vbscript/msg/e8cc3cc8e6ee0fa9?dmode=source&hl=en&pli=1)）

```
Set oShell = CreateObject("WScript.Shell")

sAllUsersDesktopPath = oShell.SpecialFolders("AllUsersDesktop")

sWinSysDir = oShell.ExpandEnvironmentStrings("%SystemRoot%\System32")

Set oShortCut = oShell.CreateShortcut( _
         sAllUsersDesktopPath & "\D Drive on gibson.lnk")

oShortCut.TargetPath = sWinSysDir & "\Explorer.exe"
oShortCut.Arguments = "\\servername\d$"
oShortCut.IconLocation = sWinSysDir & "\Shell32.dll,10"
oShortCut.Save 
```

根据需要更改 oShortCut.Arguments 值以指向服务器上的适当共享，并根据需要更改“Gibson 上的 D 驱动器”名称。将此保存到 .vbs 文件并使用 cscript 或 wscript 执行它。

或者您可以尝试使用[来自 Optimum X 的免费软件快捷方式.exe](http://optimumx.com/downloads.html)。

# iphone - UIImageView 的旋转手势

> ID：14702252
> 
> 赞同：0
> 
> 时间：2013-02-05T07:30:25.810
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我已经为`UIImageView`.

这是我实现的代码：

```
- (IBAction)rotaehandler:(UIRotationGestureRecognizer *)sender
{
    sender.view.transform = CGAffineTransformRotate(sender.view.transform, sender.rotation);
} 
```

我连接`UIRotationGestureRecognizer`到`UIImageView`. 它可以工作，但是，我怎样才能从它的中心旋转图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:21:42.437

```
CGFloat initialRotation = atan2f(sender.view.transform.b-somefloat, sender.view.transform.a-somefloat);

 CGFloat newRotation = initialRotation + sender.rotation;

 sender.view.transform = CGAffineTransformMakeRotation(newRotation); 
```

试试上面的代码

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T07:43:33.913

试试这个 ：

```
- (IBAction)rotaehandler:(UIRotationGestureRecognizer *)sender
    {

        if ([sender state] == UIGestureRecognizerStateBegan || [sender state] ==  
                 UIGestureRecognizerStateChanged) 
        {
            [sender view].transform = CGAffineTransformRotate([[sender view] transform],  
                                                                [sender rotation]);

             NSLog(@"Rotate : %f",[gestureRecognizer rotation]);
             [sender setRotation:0];
         }
    } 
```

# ruby-on-rails - 尝试在本地为 Rails 上的 ruby 设置 postgresql

> ID：14702253
> 
> 赞同：1
> 
> 时间：2013-02-05T07:30:33.557
> 
> 标签：ruby-on-rails, postgresql, terminal

我已经通过那里的应用程序安装了 postgresql，它正在菜单栏中运行，但是当我运行时，`rails new blog -d postgresql`我得到以下输出

```
An error occurred while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

更新这是我运行建议的命令时得到的

```
[~/sites]$ gem install pg -v '0.14.1'
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQescapeLiteral()... yes
checking for PQescapeIdentifier()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for pg_char_to_encoding()... yes
checking for PQsetClientEncoding()... yes
checking for PQlibVersion()... yes
checking for PQping()... yes
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... no
checking for PGRES_COPY_BOTH in libpq-fe.h... no
checking for PGRES_SINGLE_TUPLE in libpq-fe.h... no
checking for struct pgNotify.extra in libpq-fe.h... yes
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling pg.c
pg.c: In function ‘Init_pg_ext’:
pg.c:384: error: ‘PQPING_OK’ undeclared (first use in this function)
pg.c:384: error: (Each undeclared identifier is reported only once
pg.c:384: error: for each function it appears in.)
pg.c:386: error: ‘PQPING_REJECT’ undeclared (first use in this function)
pg.c:388: error: ‘PQPING_NO_RESPONSE’ undeclared (first use in this function)
pg.c:390: error: ‘PQPING_NO_ATTEMPT’ undeclared (first use in this function)
make: *** [pg.o] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1/ext/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:47:32.847

原来我不得不通过自制软件安装 postgres，很奇怪。

# android - 如何通过我在android中的应用程序检测用户单击/启动了哪个应用程序

> ID：14702256
> 
> 赞同：0
> 
> 时间：2013-02-05T07:30:36.560
> 
> 标签：android, android-intent

我需要知道是否有任何接收器来检测用户通过我自己的应用程序单击或启动/启动了哪个应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:33:07.113

我认为您可以使用`logcat` 和分析它的输出。

在所有类似的程序中，我发现了这个权限：

```
android.permission.READ_LOGS 
```

这意味着他们都使用它。但似乎程序启动了，之后我们的程序（应用程序保护器）将启动并带到前面。

使用下面的代码：

```
try
    {
        Process mLogcatProc = null;
        BufferedReader reader = null;
        mLogcatProc = Runtime.getRuntime().exec(new String[]{"logcat", "-d"});

        reader = new BufferedReader(new InputStreamReader(mLogcatProc.getInputStream()));

        String line;
        final StringBuilder log = new StringBuilder();
        String separator = System.getProperty("line.separator"); 

        while ((line = reader.readLine()) != null)
        {
            log.append(line);
            log.append(separator);
        }
        String w = log.toString();
        Toast.makeText(getApplicationContext(),w, Toast.LENGTH_LONG).show();
    }
    catch (Exception e) 
    {
        Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
    } 
```

并且不要忘记它对 android manifest 的许可。

**更新：** 通过 Tracking the **Logcat**找到启动了哪个应用程序。只需使用**info -I** log跟踪**ActivityManager** 标签。

 **从 adb shell 命令是，

```
adb logcat ActivityManager:I *:S 
```

从您的应用程序代码中，

```
logcat ActivityManager:I *:S 
```

在 Logcat 中，您可以找到类似的行，

```
I/ActivityManager(  585): Starting activity: Intent { action=android.intent.action...} 
```

何时启动任何应用程序。

logcat 输出显示该消息与优先级“I”和标记“ActivityManager”有关：

只需在应用程序的清单文件中添加权限，

android.permission.READ_LOGS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T19:04:41.297

自 android 4.1 起已弃用，应用程序只能使用 android.permission.READ_LOGS 访问其自己的日志**

# php - ob_start + compress 中断服务文件输出

> ID：14702259
> 
> 赞同：1
> 
> 时间：2013-02-05T07:30:39.753
> 
> 标签：php

我在这里工作在 MVC 模式的情况下。

我有`index.php`一个基本文件，控制器位于`/controllers/`目录中。如果你去`/stream/xIEjeEJWqs`例如`/controllers/streamcontroller.php`将被执行。

`index.php`像这样开始，它缩小了即将发送到浏览器的输出：

```
<?php

function replace_tabs_newlines($content)
{
    require_once 'includes/min/lib/Minify/HTML.php';
    require_once 'includes/min/lib/Minify/CSS_MODIFIED.php';
    require_once 'includes/min/lib/JSMin.php';
    $content = Minify_HTML::minify($content, array(
        'cssMinifier' => array('Minify_CSS', 'minify'),
        'jsMinifier' => array('JSMin', 'minify')
    ));
    return $content;
}

ob_start('replace_tabs_newlines');
ob_implicit_flush(0);
... 
```

所以这段代码会缩小输出的任何内容，如下所示：

```
<html>
    <head>
        <title>
            Minifies..
        </title> 
```

变成`<html><head><title>Minifies..</title>`

所以，问题是streamcontroller.php 必须输出PNG、MP4 和其他内容，当它`readfile()`-sa 内容时，浏览器无法识别一`index.php`开始压缩的内容。

从 streamcontroller.php 中提取：

```
case "png":
  header('Content-type:image/png');
  header('Content-Length: ' . filesize($file));     
  readfile($file);
  exit;
break; 
```

现在我的问题如下：

1.  你会推荐什么，`streamcontroller.php`从 MVC 中取出？有`streamer.php`旁边`index.php`的例子吗？

2.  `index.php`在的函数中添加检查功能`replace_tabs_newlines($content)`以检查浏览器是否指向`streamcontroller.php`并且不执行缩小工作？

3.  也许有一种方法可以`ob_start()`在即将输出某些东西时阻止 's 回调被执行？即：在`readfile()`之前`streamcontroller.php`？

4.  我会欣赏在这种情况下完全被接受的新想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:36:30.210

[`ob_end_clean`](http://www.php.net/manual/en/function.ob-end-clean.php)在前面加一个怎么样`readfile`

# web-applications - 基于 LAMP、Symfony2、Backbone 的 Twitter 风格的 Web 应用程序：可能吗？

> ID：14702261
> 
> 赞同：2
> 
> 时间：2013-02-05T07:30:53.310
> 
> 标签：web-applications, symfony, backbone.js

我正在尝试开发一个类似于 Twitter 的网络应用程序。我决定将 Symfony2 用于后端，但我对数据库（MySQL 或 MongoDB 或其他什么？）以及我应该实施的架构有疑问。

我的问题是：我是否使用 Backbone 的模板和视图，而我只是将 Symfony 用作“Web 服务”，它将用数据回答 Backbone 的 POST 请求？这是事情应该如何运作的吗？或者我可以完全跳过 Symfony 并且只使用 Backbone 直接查询数据库吗？（如果可能的话..）

这就是我的想法：

```
=> | HTML built with Backbone.js views (underscore or other templating engine] |
                                      |
=> | ajax request for data                                                     |
                                      |
=> | Symfony receives the request, queries the database and answers with the data |
                                      |
=> | The page content is updated/added/refreshed                               | 
```

这看起来正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:52:03.650

当然，你可以使用这个堆栈。我已经在使用它了。您可以很好地控制路线、所需参数和响应格式

此外，您可以使用已经内置的缓存系统（http、varnish..）

查看 [RestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)，如果你使用 Backbone.js 休息同步方法很有用

编辑：

我会为您的网络服务（JSON，响应）推荐 sf2

在完整的 html 中使用骨干/木偶堆栈。[研究Yeoman 项目](http://yeoman.io/)，用主干和部署机制构建你的前端（漂亮）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:20:23.930

老实说，如果你想让你的模板由客户端呈现，我认为 Symfony 2 只是为了从数据库中获取数据而有点矫枉过正。

对于这个任务，我过去曾使用过一个微框架[Silex](http://silex.sensiolabs.org/)，它建立在 Symfony 2 之上，但它更轻巧简洁。

# c++ - 用 boost::detail::spinlock 替换关键部分导致 Windows 死锁

> ID：14702268
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:31:43.560
> 
> 标签：c++, windows, boost, mutex, spinlock

我的平台是 vs2010 win2003 服务器，我有一个运行良好的应用程序。有一个整数受临界区保护，当我修改并使用 boost::detail::spinlock 时，它会进入死锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:38:26.403

1.  是。这意味着它仅供内部使用。如果您想要关键部分的便携式替换，请使用[Boost.Thread](http://www.boost.org/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.mutex)。`boost::**detail**::spinlock`[`boost::mutex`](http://www.boost.org/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.mutex)

2.  是。自旋锁通常忙于等待，这使它们更快，但只能在严格控制的条件下使用。`boost::detail::**spinlock**`

3.  Boost 1.53（最新版本）终于有了[Boost.Atomic](http://www.boost.org/doc/html/atomic.html)，它是一个可移植的（和 C++11 兼容的）互锁操作的替代品。

# iis - 使用命令行在 IIS 6 中获取网站的 ID

> ID：14702274
> 
> 赞同：2
> 
> 时间：2013-02-05T07:32:35.153
> 
> 标签：iis, batch-file, web, iis-6, identifier

我需要在 Windows server 2003 的 IIS 6 中通过其名称获取网站的 ID。我使用 C# 完成了此操作，但后来发现服务器没有安装 .Net 框架。我只知道网站的名称。

```
string directoryEntry = string.Format("IIS://localhost/w3svc");
var w3Svc = new DirectoryEntry(directoryEntry);
foreach (DirectoryEntry de in w3Svc.Children) {
  if (de.SchemaClassName == "IIsWebServer" && de.Properties["ServerComment"][0].ToString() == "MyWebsiteName") {
    Environment.ExitCode = Convert.ToInt32(de.Name);
    return;
  }
}
int id = Process.Start("MyApp.exe"); 
```

我必须运行一个批处理文件来启动和停止远程机器上的网站。我可以使用批处理来启动和停止网站，`PSexec`但我不知道如何动态获取网站的 ID。有人可以帮我吗？

如果我不够清楚，或者我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T13:45:21.643

看起来 IisApp.vbs 是推荐的选项。查看它的[文档](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/b8721f32-696b-4439-9140-7061933afa4b.mspx?mfr=true)。抱歉，如果这不是您需要的。

# google-bigquery - 增加导入作业限制

> ID：14702277
> 
> 赞同：0
> 
> 时间：2013-02-05T07:33:17.970
> 
> 标签：google-bigquery

请建议我如何将导入作业的数量从默认限制（1000）增加到每天每张桌子的 x 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:45:08.603

限制为每天每桌 1000 个，以鼓励人们将他们的进口分批成更大的块。许多微小的导入会增加 BigQuery 的开销，这就是我们鼓励更大导入的原因。但是，当导入的数据量很大时，我们可能会给予配额例外。

如果您提供有关如何导入数据和预期每日导入大小的更多详细信息，我们可以评估您的请求。如果只是为了让您可以一次高频率地添加几行，我们将不太可能授予配额例外。

# php - 在php中自定义500错误页面

> ID：14702279
> 
> 赞同：1
> 
> 时间：2013-02-05T07:33:37.247
> 
> 标签：php, apache, codeigniter

我在 codeigniter 中有我的网站代码，其中我在 php 中使用 Imagick 融合图像。有很多函数可以生成`500 HTTP error`。我需要我创建的自定义 500 错误页面，而不是一般的浏览器 500 错误页面。

我已经读过，使用`ErrorDocument 500 error_doc/500.html`in`.htaccess`将无济于事，因为 Apache 已将其交给 PHP。但我还需要一个通用解决方案泛网站，它应该自动检查 500 并显示所需的自定义页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:14:45.873

Codeigniter 实际上有一个自定义的 500 错误页面。如果你发现你得到一个通用的 500 错误页面，它可能是 Apache 覆盖了 codeiginter 500 错误页面。

您可以在 .htaccess 中覆盖它以将其定向到您自己的自定义 500.html，但是您将错过 codeiginter 提供的任何错误信息：

```
ErrorDocument 500 /errors/500.html 
```

您还可以编辑在 中找到的 codeiginter 500 错误页面`/application/errors/`。我认为是`error_php.php`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T09:43:02.493

创建一个名为的文件`500.shtml`并将其上传到 public_html 或您的根上传目录。使用 500.shtml 文件创建 500 内部服务器错误自定义页面。

# ios - UIToolbar 创建

> ID：14702283
> 
> 赞同：-2
> 
> 时间：2013-02-05T07:33:48.103
> 
> 标签：ios, uitoolbar

我已经创建了一个工具栏，如下所示的代码，现在我不知道如何向其中添加项目。

```
- (void)viewDidLoad
{
[super viewDidLoad];    
UIToolbar *toolbar = [[UIToolbar alloc] init];    
toolbar.frame = CGRectMake(0, 418, 350, 44);   
NSMutableArray *items = [[NSMutableArray alloc] init];
[items addObject:[[[UIBarButtonItem alloc] init] autorelease]];
[toolbar setItems:items animated:YES];
[items release];
[self.view addSubview:toolbar];
[toolbar release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:44:58.610

试试这个代码

```
UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithTitle:@"Item"     style:UIBarButtonItemStyleBordered  target:self action:@selector(action:)];

NSArray *items = [NSArray arrayWithObjects: customItem, nil];
[toolbar setItems:items animated:NO];

[customItem release]; 
```

你也可以参考这个链接： [How to create this toolbar programmatically](https://stackoverflow.com/questions/10500708/how-to-create-this-toolbar-programmaticallygle)

请在发布前进行谷歌搜索和 Stack Overflow 搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:06:27.873

使用 `[self setToolbarItems: buttons animated:NO];` 你想设置工具栏项和 uiviewcontroller 有工具栏本身。

# java - 从 JOptionPane 创建对话框并处理 OK_CANCEL_OPTION

> ID：14702295
> 
> 赞同：1
> 
> 时间：2013-02-05T07:34:40.107
> 
> 标签：java, swing, joptionpane

我有一个自定义对话框，它从用户那里收集两个字符串。创建对话框时，我使用 OK_CANCEL_OPTION 作为选项类型。Evertyhings 有效，除非当用户单击取消或关闭对话框时，它具有与单击确定按钮相同的效果。

如何处理取消和关闭事件？

这是我正在谈论的代码：

```
JTextField topicTitle = new JTextField();
JTextField topicDesc = new JTextField();
Object[] message = {"Title: ", topicTitle, "Description: ", topicDesc};
JOptionPane pane = new JOptionPane(message,  JOptionPane.PLAIN_MESSAGE, JOptionPane.OK_CANCEL_OPTION);
JDialog getTopicDialog =  pane.createDialog(null, "New Topic");
getTopicDialog.setVisible(true); 
```

// 按下 OK 时在此处执行某些操作，但按下取消时仅处置。

/*注意：请不要向我建议**JOptionPane.ShowOptionDialog(*** **** *** **** );** 的方式，因为我知道这种方式，但我需要上面提到的方式，并为“确定”和“设置操作”取消”按钮。*/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:22:57.127

这对我有用：

```
...
JOptionPane pane = new JOptionPane(message,  JOptionPane.PLAIN_MESSAGE, JOptionPane.OK_CANCEL_OPTION);
JDialog getTopicDialog =  pane.createDialog(null, "New Topic");
getTopicDialog.setVisible(true);
if(null == pane.getValue()) {
    System.out.println("User closed dialog");
}
else {
    switch(((Integer)pane.getValue()).intValue()) {
    case JOptionPane.OK_OPTION:
        System.out.println("User selected OK");
        break;
    case JOptionPane.CANCEL_OPTION:
        System.out.println("User selected Cancel");
        break;
    default:
        System.out.println("User selected " + pane.getValue());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:14:41.260

根据[文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JOptionPane.html)，您可以使用 pane.getValue() 来了解单击了哪个按钮。从文档：

> 直接使用：直接创建和使用一个JOptionPane，标准模式大致如下：
> 
> ```
>  JOptionPane pane = new JOptionPane(arguments);
>      pane.set.Xxxx(...); // Configure
>      JDialog dialog = pane.createDialog(parentComponent, title);
>      dialog.show();
>      Object selectedValue = pane.getValue();
>      if(selectedValue == null)
>        return CLOSED_OPTION;
>      //If there is not an array of option buttons:
>      if(options == null) {
>        if(selectedValue instanceof Integer)
>           return ((Integer)selectedValue).intValue();
>        return CLOSED_OPTION;
>      }
>      //If there is an array of option buttons:
>      for(int counter = 0, maxCounter = options.length;
>         counter < maxCounter; counter++) {
>         if(options[counter].equals(selectedValue))
>         return counter;
>      }
>      return CLOSED_OPTION; 
> ```

希望能帮助到你，

# wpf - 将行绑定到验证规则 WPF

> ID：14702296
> 
> 赞同：1
> 
> 时间：2013-02-05T07:34:52.760
> 
> 标签：wpf, data-binding, user-controls, wpf-controls, wpfdatagrid

我想将`TextBox`'s `Tag`（位于 a 内`DataGrid`）绑定到验证规则的 CurrentLegStrategy 属性（即 a `DependencyProperty`）。虽然我已经使用全局隧道对象对 Deal 依赖属性做了类似的事情，但是无法弄清楚 CurrentLegStrategy 的隧道是什么（理想情况下应该来自绑定数据到`DataRow`或绑定数据到`TextBox`标签)?

```
<DataTemplate x:Key="PremiumProp">
    <TextBlock Style="{StaticResource TextBlockLeft}" Tag="{Binding Strategy}" x:Name="txtPremiumProp">                     
        <TextBlock.Text>
            <Binding Path="AbsolutePremium" StringFormat="{}{0:#,##0.00####}" Converter="{StaticResource _DoubleConvertor}">
                <Binding.ValidationRules>
                    <Control:MBSStrategyBasedDoubleValidation ValidatesOnTargetUpdated="True" ValidationTag="premabs"
                            ErrorMessage="Please enter a valid positive (+) premium (also check the reference which is required for auto calculation)!">
                        <Control:MBSStrategyBasedDoubleValidation.Deal>
                            <Control:DealObject Deal="{Binding Tag, Source={StaticResource TradeTunnel}}" CurrentLegStrategy="{Binding Path=Tag, ElementName=txtPremiumProp}"/>
                        </Control:MBSStrategyBasedDoubleValidation.Deal>
                    </Control:MBSStrategyBasedDoubleValidation>
                </Binding.ValidationRules>
            </Binding>
        </TextBlock.Text>
    </TextBlock>
</DataTemplate> 
```

然后我也试了，

```
<TextBlock.Resources>
    <ResourceDictionary>
        <FrameworkElement x:Name="strategySource" Tag="{Binding Tag, Source={x:Reference txtPremiumProp}}"/>
    </ResourceDictionary>    
</TextBlock.Resources> 
```

具有以下内容：

```
CurrentLegStrategy="{Binding Path=Tag, Source={StaticResource strategySource}}" 
```

找不到名为“strategySource”的资源。资源名称区分大小写。

# workflow-foundation-4 - 具有自定义实例存储的 Windows Workflow 4 无法正常工作

> ID：14702303
> 
> 赞同：0
> 
> 时间：2013-02-05T07:35:31.177
> 
> 标签：workflow-foundation-4

我创建了一个带有自定义实例存储的简单工作流服务（以支持 oracle）。自定义实例存储，我遵循 MSDN 的演示：[http://msdn.microsoft.com/en-us/library/ee829481.aspx][1] 但是当我调用服务 api 时，引发异常：

> 从实例存储中检索到错误类型的值。需要一个类型为 {/Default Web Site/}OrderService.svc 的值，但是却遇到了 null。

我尝试使用SqlWorkflowInstanceStore，没问题。服务没有问题。我再次使用自定义实例存储并调试，我发现**LoadWorkflowCommand在****SaveWorkflowCommand**之前执行。我认为这是一个问题。需要你的帮助！

以下是我的代码片段：

```
1\. Web Config:
<extensions>
      <behaviorExtensions>
        <add name="databaseWorkflowInstanceStore" type="Practices.Framework.Workflow.Configuration.DatabaseInstanceStoreElement, Practices.Framework" />
      </behaviorExtensions>
    </extensions>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!--<sqlWorkflowInstanceStore connectionStringName="practicesDatabase" instanceCompletionAction="DeleteAll" instanceEncodingOption="GZip" />-->
          <databaseWorkflowInstanceStore database="practicesDatabase" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

2\. DatabaseInstanceStore 
    public class DatabaseInstanceStore : InstanceStore
    {
    protected override IAsyncResult BeginTryCommand(InstancePersistenceContext context, InstancePersistenceCommand command, TimeSpan timeout, AsyncCallback callback, object state)
            {
                if (command is CreateWorkflowOwnerCommand)
                {
                    var instanceOwnerId = Guid.NewGuid();
                    context.BindInstanceOwner(instanceOwnerId, instanceOwnerId);
                }
                else if (command is LoadWorkflowCommand)
                {
                    var instanceData = this.LoadInstanceData();
                    context.LoadedInstance(InstanceState.Initialized, instanceData, null, null, null);
                }
                else if (command is SaveWorkflowCommand)
                {
                    var saveCommand = (SaveWorkflowCommand)command;
                    var instanceData = saveCommand.InstanceData;

                    this.SaveInstanceData(instanceData);
                }

                return new CompletedAsyncResult<bool>(true, callback, state);
            }

    ......
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:08:23.693

BeginTryCommand 的调用顺序如下： 1\. CreateWorkflowOwnerCommand 2\. LoadWorkflowCommand 3\. SaveWorkflowCommand 4\. SaveWorkflowCommand

所以对于 LoadWorkflowCommand：我需要在加载之前创建实例

[http://social.msdn.microsoft.com/Forums/en/dublin/thread/e51d7b18-1e27-4335-8ad0-4ce76b9f8b91](http://social.msdn.microsoft.com/Forums/en/dublin/thread/e51d7b18-1e27-4335-8ad0-4ce76b9f8b91)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:15:08.357

MSDN 文章仅显示了您需要实现的最少命令。听起来您需要支持更多命令，因此我将检查已调度哪些命令您还不支持。有关命令列表，请参见[此处](http://msdn.microsoft.com/en-us/library/system.runtime.durableinstancing.instancepersistencecommand.aspx)。

# jquery - 为什么 div 高度不能在 Chrome 中扩展？

> ID：14702306
> 
> 赞同：1
> 
> 时间：2013-02-05T07:35:37.050
> 
> 标签：jquery, css, html, google-chrome

我正在尝试在 div 中显示带有描述的图像，它在所有浏览器中都可以正常工作，但在 Chrome 中，div 高度不会适应其内容高度..

这是我的代码，希望可以清楚，问题仅在chrome中显示

```
css:
===========
.mainDiv{
    position: relative;
    width: 100%;
    float: right;
    top: 10px;
    min-height: 700px;
}

.borde{
    width: 200px;
    position: absolute;
    float: right;
    margin: 0px 0px 0 0;
    text-align: right;
    background-color: #fff;
    box-shadow: 0 1px 3px #acb0b2;
    -moz-box-shadow: 0 1px 2px #acb0b2;
    -webkit-box-shadow: 0 1px 3px #acb0b2;
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#acb0b2')";
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#acb0b2');
    border: solid 1px #d4d1d2;

}
===========

js:
===========
// this will arrange the divs into the page
function divPlace(count){
    var top         = 0;
    var right       = 0;
    var maxWidth    = $("#mainDiv").width() -200 ;
    var level       = 0;
    var heightArray = new Array();
    var counter     = 0;
    var windowWidth = parseInt(maxWidth/200);

    for(i=0; i<count; i++){
        if(right > maxWidth){
            right=0;
            level=level+1;
            counter=0;

        }

        $("#div_"+i).css("right", right+"px");
        right=right+250;

        if(level==0){
             $("#div_"+i).css("top", "0px");        
             $("#div_"+i).css("height", $("#div_"+i).height());
             heightArray[counter] =  $("#div_"+i).height();
        }else{
            $("#div_"+i).css("top", 15+heightArray[counter]+"px");
            $("#div_"+i).css("height", $("#div_"+i).height());
            heightArray[counter] =  $("#div_"+i).height()+heightArray[counter]+15;
        }

        counter++;
    }
}
===========

html
===========
<div class="mainDiv" id="mainDiv">

    <div class="borde" id="div_0">
        <img src="images/1.jpg" />
    </div>
    <div class="borde" id="div_1">
        <img src="images/2.jpg" />
    </div>
    <div class="borde" id="div_2">
        <img src="images/3.jpg" />
    </div>
    .
    .
    .
    .
</div>
<script type="text/javascript">
    $(doucment).ready(function(){
        divPlace(22);
    });
</script>
=========== 
```

问题是 div 不会自动扩展以包含 chrome 中的图像

这是 Chrome 中的结果 ![在此处输入图像描述](../Images/528d826c4517311ec699d220dc364d27.png)

这是 FireFox 中的结果，请注意 div 高度如何扩展以填充内部图像

![在此处输入图像描述](../Images/400d4580700c517cbdff9a646711c3ee.png)

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:33:21.927

像这样改变你对 JavaScript 的调用：

```
$("#mainDiv img").load(function(){
 divPlace(22);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:41:12.007

这是一个..需要支付。

[http://themify.me/themes/pinboard](http://themify.me/themes/pinboard)

# drupal - 节点添加自定义字段

> ID：14702307
> 
> 赞同：0
> 
> 时间：2013-02-05T07:35:46.073
> 
> 标签：drupal, drupal-7

我想添加一些自定义字段。

一种称为“滑块”的新内容类型，仅包含文本文件和正文摘要。

我遵循[官方示例](http://drupal.org/project/examples)：

```
/**
 * Implements hook_node_info().
 */
function slider_node_info(){
  return array(
    'slider' => array(
      'name' => t('Slider'),
      'description' => t('Add cool animation sliders'),
      'base' => 'slider',
      'title_label' => t('Slider Title')
      ),
  );
}

/**
 * Implements hook_node_type_insert().
 */
function slider_node_type_insert($content_type){
  dpm('xxx');
  if($content_type->type == 'slider'){
    $body_instance = node_add_body_field($content_type, t('Slider Content'));

    field_update_instance($body_instance);
  }
}

/**
 * Implements hook_form().
 */
function slider_form($node, $form_state){
  return node_content_form($node, $form_state);
} 
```

当我完成时，我看不到正文摘要，但示例有。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:20:18.133

[使用CCK 模块](http://drupal.org/project/cck)创建自定义字段很容易，只需编辑您的内容类型并添加字段。

如果您对使用[Flexslider 模块](http://drupal.org/project/flexslider)感兴趣，本[教程](http://coldfrontlabs.ca/blog/creating-responsive-image-slider-galleries-adaptive-images-drupal-7)有一个很好的演练来设置您正在尝试做的事情。

如果您对使用[Views Slideshow 模块](http://drupal.org/project/views_slideshow)感兴趣，请查看本[教程](http://maestric.com/doc/drupal7/views_slideshow_tutorial)。

# tomcat - Tomcat错误日食juno

> ID：14702315
> 
> 赞同：0
> 
> 时间：2013-02-05T07:36:23.413
> 
> 标签：tomcat, servlets

嗨，我正在使用 eclips juno 和 tomcat 7 ......首先一切正常。但是两天后我得到了tomcat无法启动的错误......我尝试重新启动eclips，删除服务器并再次添加，重新启动计算机，增加超时，配置tomcat插件（在一篇文章中找到）。一切都是徒劳的......请帮助我。错误信息...

```
 Feb 5, 2013 8:39:23 AM org.apache.catalina.core.AprLifecycleListener init
 INFO: The APR based Apache Tomcat Native library which allows optimal performance in
 production environments was not found on the java.library.path: C:\Java\jre6\bin;C:
\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Java/jre6/bin/client;C: 
/Java/jre6/bin;C:/Java/jre6/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32
\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Panda 
Security\Panda Internet Security 2012;C:\Program Files\Toshiba\Bluetooth Toshiba 
Stack\sys\;C:\Java\jdk1.6.0_32\bin;C:\Program Files\MySQL\MySQL Server 5.0\bin;E:
\eclipse-jee-juno-win32\eclipse;;.

Feb 5, 2013 8:39:24 AM org.apache.tomcat.util.digester.SetPropertiesRule begin

WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property

'source' to 'org.eclipse.jst.jee.server:BlackBookServlets' did not find a matching 
property.

Feb 5, 2013 8:39:24 AM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["http-bio-8080"]
Feb 5, 2013 8:39:24 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Feb 5, 2013 8:39:24 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 400 ms
Feb 5, 2013 8:39:24 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Feb 5, 2013 8:39:24 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.35
Feb 5, 2013 8:39:24 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException:   
Failed to start component   
 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/BlackBookServlets]]
at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
at java.util.concurrent.FutureTask.get(Unknown Source)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
 Caused by: org.apache.catalina.LifecycleException: Failed to start component   
 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/BlackBookServlets]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
... 7 more
 Caused by: java.lang.IllegalArgumentException: Invalid <url-pattern>  
 BlackBookServlets/UploadServlets in servlet mapping
at   
 org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3223)
at 
 org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3198)
at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1366)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1353)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
at 
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at 
org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
 Feb 5, 2013 8:39:24 AM org.apache.catalina.core.ContainerBase startInternal
 SEVERE: A child container failed during start
  java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException:  
 Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
at java.util.concurrent.FutureTask.get(Unknown Source)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
   Caused by: org.apache.catalina.LifecycleException: Failed to start component 
  [StandardEngine[Catalina].StandardHost[localhost]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
 Caused by: org.apache.catalina.LifecycleException: A child container failed during 
 start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
   Feb 5, 2013 8:39:24 AM org.apache.catalina.startup.Catalina start
  SEVERE: Catalina.start: 
  org.apache.catalina.LifecycleException: Failed to start component   
 [StandardServer[8005]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component 
 [StandardService[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more

Caused by: org.apache.catalina.LifecycleException: Failed to start component 
  [StandardEngine[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 9 more
  Caused by: org.apache.catalina.LifecycleException: A child container failed during 
  start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 11 more
 Feb 5, 2013 8:39:24 AM org.apache.catalina.startup.Catalina start
 INFO: Server startup in 492 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:45:10.003

尝试重新安装tomcat服务器。我认为某些设置已更改。

还要检查您的防火墙是否没有阻止它。

# android - 显示进程对话框时，不执行 doInBackground()

> ID：14702318
> 
> 赞同：1
> 
> 时间：2013-02-05T07:36:26.060
> 
> 标签：android

我正在尝试显示进程对话框，它正在按预期显示，但是当它显示时，doInBackground() 没有被执行，当我按下模拟器的屏幕时，doInBackground() 再次开始执行。

这是我的 AsyncTask 类：

```
public class FetchEmployeeAsyncTask extends AsyncTask<String, Void, ArrayList<Employee> >   {

private CaptureActivity activity;
//private ProgressDialog progressDialog;
public FetchEmployeeAsyncTask(CaptureActivity nextActivity) {
    this.activity = nextActivity;
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    /*progressDialog= new ProgressDialog(activity);
    progressDialog.setCancelable(true);
    progressDialog.setTitle("Fetching Employees!!");
    progressDialog.setMessage("Please wait...");
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.setProgress(0);
    progressDialog.show();*/
}

@Override
protected ArrayList<Employee> doInBackground(String... url) {
    // TODO Auto-generated methoVoidd stub

    ArrayList<Employee> employees = null;
    for(String employeeUrl : url){
        employees = fetch(employeeUrl);
    }
    return employees;
}

private ArrayList<Employee> fetch(String url) {
    // TODO Auto-generated method stub
    ArrayList<Employee> employees = null;
    String response = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        response = EntityUtils.toString(httpEntity);
        employees = EmployeeXMLParser.employeeParser(response);
        System.out.println("Size in fetch "+employees.size());

        //System.out.println("Employee Name :: " + employees.get(0).getFirstName() + " " + employees.get(0).getLastName());
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } /*catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        System.out.println("Error parsing the response :: " + response);
        e.printStackTrace();
    }*/
    return employees;
}

@Override
public void onPostExecute(ArrayList<Employee> employees){
    super.onPostExecute(employees);

    System.out.println("in post execxute "+employees.size());
    //progressDialog.dismiss(); 
    activity.showEmployees(employees);

} 
```

}

我在这个活动类中调用 AsyncTask：

```
public class CaptureActivity extends Activity {

private String url = "http://192.168.2.223:8680/capture/clientRequest.do?r=employeeList&cid=0";

FetchEmployeeAsyncTask employeeAsyncTask;

private ArrayList<Employee> employees = null;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setTitle("");

     employeeAsyncTask = new FetchEmployeeAsyncTask(this);

     employeeAsyncTask.execute(new String[] {url});

    System.out.println("Status "+employeeAsyncTask.getStatus());

    setContentView(R.layout.activity_capture);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:42:06.640

你想在这里做什么？如果您正确传递了值，您是否尝试从数据库中获取一些值？

另外请尝试详细解释您的问题并粘贴更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:45:23.527

尝试这个：

```
 protected void onPreExecute() {

   progressDialog = ProgressDialog.show(currentActivity.this, "",
                "Message Here", true);
    }
   protected void onPostExecute(String str) {

   dialog.dismiss();

   } 
```

# cmake - 使用正确的选项手动调用编译器

> ID：14702326
> 
> 赞同：1
> 
> 时间：2013-02-05T07:36:46.280
> 
> 标签：cmake

对于`custom_command`创建预编译头文件，我想手动调用编译器，以便输出文件保留在输入目录中。

```
add_custom_command(OUTPUT foo.h.pch COMMAND ${CMAKE_CXX_COMPILER} ${CMAKE_CXX_FLAGS} foo.h) 
```

这确实调用了编译器，但没有通过设置`add_definitions`和`include_directories`传递任何选项。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:46:31.160

您可以尝试从目录属性[COMPILE_DEFINITIONS](http://cmake.org/cmake/help/v2.8.10/cmake.html#prop_dir%3aCOMPILE_DEFINITIONS)和[INCLUDE_DIRECTORIES](http://cmake.org/cmake/help/v2.8.10/cmake.html#prop_dir%3aINCLUDE_DIRECTORIES)获取此信息。

请参阅[get_directory_property()](http://cmake.org/cmake/help/v2.8.10/cmake.html#command%3aget_directory_property)命令。

# javascript - iframe 中的 Javascript 消息

> ID：14702329
> 
> 赞同：0
> 
> 时间：2013-02-05T07:36:53.657
> 
> 标签：javascript, security, cross-browser, dom-events

在 Chrome 中运行 html 文件时出现此错误：

> iframe 不安全的 JavaScript 尝试从 URL http‍://another_server/example.html 的框架访问具有 URL http‍://my_server.com/param 的框架。域、协议和端口必须匹配。

有没有办法让我可以在不同的服务器上运行 Javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:42:05.147

你需要改变`hash`不是`url`本身。关于这个问题，stackoverflow 中有很多类似的问题。[你可以试试看看这个](https://stackoverflow.com/questions/4324108/unsafe-javascript-attempt-to-access-frame-with-url)。

# jquery - jquery展开/折叠列表不起作用

> ID：14702333
> 
> 赞同：0
> 
> 时间：2013-02-05T07:37:06.327
> 
> 标签：jquery, css, wordpress, list, collapse

我正在尝试在页面上设置可扩展/可折叠的内容列表，但由于某些愚蠢的原因它无法正常工作。

这是所有相关的javascript：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://digitaldemo.net/forbes/wp-content/themes/forbes/js/jquery.expander.js"></script>
<script>
$('ul.expander li').expander({
  slicePoint: 50,
  widow: 2,
  expandEffect: 'show',
  userCollapseText: '[^]'
});
</script> 
```

和列表代码：

```
<ul class="expander">
<li>Intro text <span class="read-more"><a href="#">[more link]</a></span><span class="details">and full text goes here</span></li>
</ul> 
```

该站点是一个 WP 站点，但是我没有为此使用插件。我可能错过了一些愚蠢的简单事情，因为我正在通宵达旦。任何输入都会有所帮助。

这是页面：[http ://digitaldemo.net/forbes/?page_id=34](http://digitaldemo.net/forbes/?page_id=34)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:41:58.877

代替

```
<script>
$('ul.expander li').expander({
  slicePoint: 50,
  widow: 2,
  expandEffect: 'show',
  userCollapseText: '[^]'
});
</script> 
```

经过

```
<script>
jQuery(document).ready(function($){
  $('ul.expander li').expander({
    slicePoint: 50,
    widow: 2,
    expandEffect: 'show',
    userCollapseText: '[^]'
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:48:22.777

您缺少的是在文档准备好时没有加载脚本。简单地这样做

```
<script>
    $(document).ready(function() {
$('ul.expander li').expander({
  slicePoint: 50,
  widow: 2,
  expandEffect: 'show',
  userCollapseText: '[^]'
});
});
</script> 
```

# git - 无法将功能书签合并到 Mercurial 中的主书签中

> ID：14702334
> 
> 赞同：3
> 
> 时间：2013-02-05T07:37:10.587
> 
> 标签：git, version-control, mercurial, branching-and-merging

我一直在尝试在 Mercurial 中进行更多分支，并决定使用书签来实现。这个特定的 repo 不仅推送到一个 mercurial repo，还通过 hg-git 推送到一个 git repo。

我`track.current`在我的书签配置中使用。无论如何，所以我创建了一个书签并做了一些提交

```
hg bookmark feature
hg update feature
hg commit ... 
```

然后我将我的功能分支合并回我的主分支

```
hg update master
hg merge feature 
```

但是，此时我得到：

```
abort: nothing to merge
(use 'hg update' or check 'hg heads') 
```

查看`hg bookmarks`显示 master 和 feature 确实指向不同的修订版。

我不明白为什么我会收到此消息。无论如何，我也犯了继续前进的错误。我没有用它推送书签，所以我的 Mercurial repo 看起来不错。然而，hg-git 发现了它的用法，并在我的 git repo 中创建了一个分支。所以，现在我在两个存储库之间有了这个非常奇怪的不一致源树。我该如何解决这个问题以及将来如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:26:36.633

在 Mercurial 中创建书签实际上并没有创建新的头（或分支，换句话说），它标记了一个修订（然后当您在它处于活动状态时进行提交时会自动更新）。在您提交两个书签之前，您实际上并没有得到一个新的头（因此需要合并）。[这](http://mercurial.selenic.com/wiki/Bookmarks)可能有助于阅读。此外，[这个](https://stackoverflow.com/questions/9159053/merging-bookmarks-in-mercurial)答案有一个很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:05:59.810

`feature`在这种情况下，您的书签看起来像是`master`. Mercurial 不做 git 风格的快进合并，所以你只是'假装'。代替：

```
hg update master
hg merge feature 
```

你可以：

```
# We still have the feature bookmark checked out
hg bookmark --delete feature
hg bookmark --force master 
```

# mysql - 更新语句导致字段被更新为 NULL 或最大值

> ID：14702335
> 
> 赞同：8
> 
> 时间：2013-02-05T07:37:11.100
> 
> 标签：mysql, sql, sql-update

如果您必须选择以下两个查询之一，您会选择哪个以及为什么：

```
UPDATE `table1` AS e
SET e.points = e.points+(
SELECT points FROM `table2` AS ep WHERE e.cardnbr=ep.cardnbr); 
```

或者：

```
UPDATE `table1` AS e
INNER JOIN
(
   SELECT points, cardnbr
   FROM `table2`  
) AS ep ON (e.cardnbr=ep.cardnbr)
SET e.points = e.points+ep.points; 
```

表的定义：

```
CREATE TABLE `table1` (
  `cardnbr` int(10) DEFAULT NULL,
  `name` varchar(50) DEFAULT NULL,
  `points` decimal(7,3) DEFAULT '0.000',
  `email` varchar(50) NOT NULL DEFAULT 'user@company.com',
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=25205 DEFAULT CHARSET=latin1$$

CREATE TABLE `table2` (
  `cardnbr` int(10) DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `points` decimal(7,3) DEFAULT '0.000',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci$$ 
```

更新：两者都导致问题首先是导致不匹配的行更新为 NULL。第二个是使它们更新为最大值 999.9999（十进制 7,3）。PS cardnbr 字段不是键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:43:15.847

我更喜欢第二个..原因是

使用`JOIN`数据库时，可以创建一个更适合您的查询并节省时间的执行计划，而子查询（如您的第一个）将运行所有查询并加载所有可能需要时间的数据。

我认为子查询很容易阅读，但性能方面`JOIN`更快......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:13:08.607

首先，正如您自己发现的那样，这两个陈述并不等同。第一个将更新 的所有行`table1`，将`NULL`那些没有相关行的行的值放入`table2`.

所以第二个查询看起来更好，因为它不会更新`table1`. 它可以以更简单的方式编写，但如下所示：

```
UPDATE table1 AS e
  INNER JOIN table2 AS ep
      ON e.cardnbr = ep.cardnbr
SET e.points = e.points + ep.points ; 
```

因此，第二个查询将是最好使用的，如果`cardnbr`是`table2`. 是吗？

如果不是，那么 table2 中的哪些值应该用于更新 table1（添加到`points`）？他们都是？你可以使用这个：

```
UPDATE table1 AS e
  INNER JOIN
  (  SELECT SUM(points) AS points, cardnbr
     FROM table2  
     GROUP BY cardnbr
  ) AS ep ON e.cardnbr = ep.cardnbr
SET 
    e.points = e.points + ep.points ; 
```

只有其中之一？这将需要一些其他派生表，具体取决于您想要什么。

# python - 在python中使用归并排序对列表进行排序

> ID：14702336
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:37:11.640
> 
> 标签：python, sorting, mergesort

我这里有一个使用合并排序对列表进行排序的代码。我只是在网络的某个地方得到了它。但老实说，我无法遵循代码的流程......我的意思是，我不明白它是怎么回事实施的。我可以理解某些部分，尤其是第一个部分，它将整个列表一分为二，然后对列表的每一侧进行排序。然后什么？？请你告诉这里发生了什么？谢谢你。:)

```
def merge(badlist):
    if len(badlist) == 1:  
    return badlist  
    m = len(badlist)/2  
    l = merge(badlist[:m])  
    r = merge(badlist[m:])  
    if not len(l) or not len(r):  
        return l or r  
    result = []  
    i = j = 0  
    while (len(result) < len(r) + len(l)):  
        if l[i] < r[j]:  
            result.append(l[i])  
            i += 1  
        else:  
            result.append(r[j])  
            j += 1  
        if i == len(l) or j == len(r):  
            result.extend(l[i:] or r[j:]) 
            break  
    return result  
print merge(badlist) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:47:32.773

一行一行的走，

```
if not len(l) or not len(r):  
        return l or r 
```

这将检查任何一个列表是否为空。如果是，则返回另一个列表。

```
result = []  
i = j = 0 
```

这里, `result`, `i`,`j`被初始化

```
while (len(result) < len(r) + len(l)): 
```

运行`while`循环，直到两个列表的所有元素都已复制到`result`列表中。

```
 if l[i] < r[j]:  
            result.append(l[i])  
            i += 1  
    else:  
            result.append(r[j])  
            j += 1 
```

该块检查哪个`l[i]`或`r[j]`更小，然后将其附加到`result`，并推进相应的计数器。这一直持续到任何一个列表完全用完，这在以下代码块中进行检查：

```
 if i == len(l) or j == len(r):  
            result.extend(l[i:] or r[j:]) 
            break 
```

现在，无论哪个列表仍然包含元素，都按原样附加到`result`列表的末尾。

```
return result 
```

之后`result`返回。

如前所述，您的示例中的缩进不正确，我已在此处更正。

# asp.net - 如何从数据网格中获取值到asp.net中的另一种形式

> ID：14702337
> 
> 赞同：0
> 
> 时间：2013-02-05T07:37:12.847
> 
> 标签：asp.net, datagrid

我在一个页面上有一个数据网格，当用户单击数据网格的单元格时，它应该打开另一个带有标签和文本框的表单，并且应该用从 SQL 数据库中获取的相关数据填充它。

我已经搜索并发现

```
response.querystring["string"] 
```

但由于它的可见性不能使用它。

我对asp中的编码很陌生，使用C#在WINFORM上做了一些，所以我试图通过创建一个对象来做，但它没有用，那么正确的做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:20:08.527

我没有使用数据网格，但如果它与 gridview 类似，那么您可以选择使用模板字段并自定义这些链接。

这是网格视图中的示例模板字段，可以根据您的需要进行自定义

```
<asp:TemplateField HeaderText="Customer Status" SortExpression="IsCustomer">
       <ItemStyle HorizontalAlign="Center" />
       <ItemTemplate>
            <a href='yournewpage.aspx?param=<%# Eval("Column_name")) %>' alt="" />
       </ItemTemplate>
</asp:TemplateField> 
```

# sql - 组合不同的 SQL 查询

> ID：14702340
> 
> 赞同：1
> 
> 时间：2013-02-05T07:37:29.500
> 
> 标签：sql, oracle

我有两个查询，如下所示。查询选择相同的表，但具有不同的条件和列数。我无法解决如何组合这些；有什么办法吗？

第一个查询是：

```
SELECT b.centerBranchNumber,
       b.countryCode,
       a.type,
       SUM(DECODE(a.status, 1, 1, 0)) filled
  FROM tableA a,
       tableB b
 WHERE a.branchCode = b.branchCode
   AND a.registerNumber IN (SELECT c.registerNumber
                              FROM tableC c
                             WHERE c.registerDate <= '01.02.2013'
                               AND c.state = 'A'
                               AND c.contractState != 2)
 GROUP BY b.centerBranchNumber,
          b.countryCode,
          a.type; 
```

结果如下所示：

```
BranchNumber     CountryCode    Type Filled
1452                 USA          0    5
1452                 USA          2    8
1452                 USA          1    16
7854                 GER          0    10
7854                 GER          1    3 
```

第二个查询是：

```
SELECT b.centerBranchNumber,
       b.countryCode,
       a.type,
       SUM(DECODE(a.status, 0, 1, 0)) free, 
       SUM(DECODE(a.status, 2, 1, 0)) damaged    
  FROM tableA a,
       tableB b  
 WHERE a.kks_kayitdrm = 'A'    
   AND a.branchCode = b.branchCode    
   AND a.recordDate <= '01.02.2013'  
 GROUP BY b.centerBranchNumber,
           a.type,
           b.countryCode; 
```

结果是：

```
BranchNumber     CountryCode    Type Free     Damage
1452                 USA          0    5        2  
1452                 USA          2    8        1  
1452                 USA          1    16       5
7854                 GER          0    10       9  
7854                 GER          1    3        16 
```

如果我结合起来，我希望得到如下结果：

```
BranchNumber     CountryCode    Type   Filled    Free     Damage
1452                 USA          0      1         5        2  
1452                 USA          2      2         8        1  
1452                 USA          1      65        16       5
7854                 GER          0      7         10       9  
7854                 GER          1      45        3        16 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:44:38.633

您的第一个查询可以重写如下：

```
SELECT b.centerBranchNumber,
       b.countryCode,
       a.type,
       SUM(DECODE(a.status, 1, 1, 0)) filled
  FROM tableA a
  JOIN tableB b
    ON a.branchCode = b.branchCode
  JOIN tableC 
    ON a.registerNumber = c.registerNumber
 WHERE c.registerDate <= '01.02.2013'
   AND c.state = 'A'
   AND c.contractState != 2
 GROUP BY b.centerBranchNumber,
          b.countryCode,
          a.type 
```

将您的第二个语法也转换为 ANSI 语法（这将有助于更复杂的查询，因为当您做错了什么时非常明显）它变成了这样：

```
SELECT b.centerBranchNumber,
       b.countryCode,
       a.type,
       SUM(DECODE(a.status, 0, 1, 0)) free, 
       SUM(DECODE(a.status, 2, 1, 0)) damaged    
  FROM tableA a
  JOIN tableB b
    ON a.branchCode = b.branchCode      
 WHERE a.kks_kayitdrm = 'A'
   AND a.recordDate <= '01.02.2013'  
 GROUP BY b.centerBranchNumber,
           a.type,
           b.countryCode 
```

如您所见，两个查询之间存在大量相似性。为了得到你想要的结果集，有两种方法。将不相似的条件移动到 SUM 中的 CASE 语句中。或者，您可以将所有两个查询联合在一起并再次求和。我更喜欢使用 CASE 语句，因为您可以减少必须做的工作量；缺点是查询变得不太容易阅读。

您查询的常见部分是：

```
SELECT b.centerBranchNumber,
       b.countryCode,
       a.type
  FROM tableA a
  JOIN tableB b
    ON a.branchCode = b.branchCode 
 GROUP BY b.centerBranchNumber,
          a.type,
          b.countryCode 
```

以此为基础，您可以慢慢添加，直到获得相同的结果。您必须记住将相同的条件添加到 WHERE / JOINS 以确保获得相同的结果。

如果我们首先添加您的所有条件；您必须将第一个查询中 tableC 上的 JOIN 更改为 LEFT OUTER JOIN。这与 WHERE 子句将结果集限制为 INNER JOIN 完全相同。

```
SELECT b.centerBranchNumber,
       b.countryCode,
       a.type
  FROM tableA a
  JOIN tableB b
    ON a.branchCode = b.branchCode
  LEFT OUTER JOIN tableC 
    ON a.registerNumber = c.registerNumber
 WHERE c.registerDate <= '01.02.2013'
   AND c.state = 'A'
   AND c.contractState != 2
 GROUP BY b.centerBranchNumber,
          b.countryCode,
          a.type 
```

在第二个查询中添加条件，您现在需要在 WHERE 子句中使用 OR：

```
SELECT b.centerBranchNumber,
       b.countryCode,
       a.type
  FROM tableA a
  JOIN tableB b
    ON a.branchCode = b.branchCode
  LEFT OUTER JOIN tableC 
    ON a.registerNumber = c.registerNumber
 WHERE ( c.registerDate <= '01.02.2013'
         AND c.state = 'A'
         AND c.contractState != 2 
             )
    OR ( a.kks_kayitdrm = 'A'
         AND a.recordDate <= '01.02.2013' 
             )
 GROUP BY b.centerBranchNumber,
          b.countryCode,
          a.type 
```

接下来，你的约会似乎有点奇怪。您似乎没有将字符串文字转换为`'01.02.2013'`日期，并且由于它不是 YYYYMMDD 的形式，因此您的比较将不起作用。您依赖于您的[NLS_DATE_FORMAT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams145.htm#REFRN10119)是 form `DD.MM.YYYY`，您不能保证每个会话都如此。要比较日期，您应该使用内置[`TO_DATE()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions203.htm#SQLRF06132)函数和适当的[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm)或 ANSI[日期时间文字](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements003.htm#SQLRF51062)显式转换，正如我在[此答案](https://stackoverflow.com/questions/10178292/comparing-dates-in-oracle-sql/10178346#10178346)中更全面地解释的那样。

只需说 Oracle[明确建议不要使用隐式转换](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements002.htm#i53062)，因为：

> *   使用显式数据类型转换函数时，SQL 语句更容易理解。
>     
>     
> *   隐式数据类型转换会对性能产生负面影响，尤其是在将列值的数据类型转换为常量而不是相反时。
>     
>     
> *   隐式转换取决于它发生的上下文，并且可能不会在每种情况下都以相同的方式工作。例如，从日期时间值到 VARCHAR2 值的隐式转换可能会返回意外年份，具体取决于 NLS_DATE_FORMAT 参数的值。
>     
>     
> *   隐式转换的算法可能会随着软件版本和 Oracle 产品的变化而变化。显式转换的行为更可预测。

因此，为了比较您的日期，我建议使用 TO_DATE()，例如：

```
WHERE ( c.registerDate <= to_date('01.02.2013', 'dd.mm.yyyy') 
```

最后，我们可以添加 SUM；这意味着在其中重复您以前的条件。您可以为您的第一个查询简化这一点，因为某物是否“填充”完全取决于 LEFT OUTER JOIN，这意味着如果该`registerNumber`表在 JOIN 中不为空，则条件为真。

在这两种情况下，我都使用 CASE 语句而不是 DECODE；这是因为 CASE 更强大，并且强制执行正确的数据类型，[而 DECODE 无法保证这一点](https://stackoverflow.com/questions/13712763/are-a-case-statement-and-a-decode-equivalent/13712765#13712765)。

将所有这些放在一起，您的最终查询将变为：

```
SELECT b.centerBranchNumber
     , b.countryCode
     , a.type
     , sum(case when a.status = 1 and c.registernumber is not null then 1
                else 0
           end) as filled
     , sum(case when a.status = 0 
                     and a.kks_kayitdrm = 'A'
                     and a.recordDate <= to_date('01.02.2013', 'dd.mm.yyyy')
                     then 1
                else 0
           end) as free
     , sum(case when a.status = 2
                     and a.kks_kayitdrm = 'A'
                     and a.recordDate <= to_date('01.02.2013', 'dd.mm.yyyy')
                     then 1
                else 0
           end) as damaged
  FROM tableA a
  JOIN tableB b
    ON a.branchCode = b.branchCode
  LEFT OUTER JOIN tableC 
    ON a.registerNumber = c.registerNumber
 WHERE ( c.registerDate <= to_date('01.02.2013', 'dd.mm.yyyy')
         AND c.state = 'A'
         AND c.contractState != 2 
             )
    OR ( a.kks_kayitdrm = 'A'
         AND a.recordDate <= to_date('01.02.2013', 'dd.mm.yyyy')
             )
 GROUP BY b.centerBranchNumber
        , b.countryCode
        , a.type 
```

您可以更通用地使用此方法在适当的地方组合查询。

# ruby-on-rails - 在 Rails 应用程序中使用 asciidoc 生成 html 文件

> ID：14702341
> 
> 赞同：0
> 
> 时间：2013-02-05T07:37:41.673
> 
> 标签：ruby-on-rails, html-generation, asciidoc

我将尝试解释我的问题：我有一个 rails 应用程序，目前它显示了我的公共目录中存在的文件（只有 txt 文件）。当我单击应用程序中的按钮时（或在目录中添加 txt 文件时自动），我想使用 asciidoc 命令将我的 txt 文件转换为 html 文件，但我不知道该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:03:15.080

我不认为这是关闭的，所以...

解决这个问题的最好方法是使用[asciidoctor](https://github.com/asciidoctor)，即 asciidoc 的 ruby​​ 实现。它在 github 中使用，并且与 rails 配合得很好。

要阅读所有带有 .asciidoc 扩展名的文件，您可以 google 并找到许多有用的答案，例如您在评论中指出的答案。

# oracle - Oracle ADF 托管定价

> ID：14702343
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:37:51.610
> 
> 标签：oracle, oracle-adf

我发现使用 Oracle ADF 和相关工具创建 Web 应用程序更容易（因为我一直在研究它），但我不确定它的成本是多少。我不是企业家或组织，我只是一名开发人员，但我有开发 Web 应用程序（典型的数据输入、存储和报告之类的）的想法，Oracle ADF 将简化我的开发。Oracle 的定价表看起来很复杂。我的总运营预算（包括托管和许可证）约为每月 50 至 100 美元（我知道这非常少，但 GAE 或 AWS 就在这个预算附近）。我在这里看到一个小的用户群可能B增长缓慢。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:26:07.103

如果我没记错的话，最便宜的 WebLogic Server 许可证是每个 CPU +- 20.000 美元。

您可以使用 ADF Essentials + GlassFish。这些都是免费使用的，缺点是 ADF Essentials 不支持开箱即用的安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:43:36.243

Oracle 确实有一个云产品，您可以按月付费，它可以在 WebLogic 上运行 ADF 应用程序 - 请参阅 - [https://cloud.oracle.com/mycloud/f?p=service:java_pricing:0](https://cloud.oracle.com/mycloud/f?p=service:java_pricing:0) :::::

但考虑到您的想法，您可能需要考虑 GlassFish+ADF Essentials 选项。[http://multikoop.blogspot.com/2012/09/adf-essentials-in-redhat-c​​loud.html](http://multikoop.blogspot.com/2012/09/adf-essentials-in-redhat-cloud.html)

# javascript - 如何在花括号中的代码块周围使用 for 循环？

> ID：14702344
> 
> 赞同：1
> 
> 时间：2013-02-05T07:37:51.347
> 
> 标签：javascript, for-loop, greasemonkey, curly-braces

我正在编写一个greasemonkey 脚本并使用一个创建首选项窗口的外部脚本。首选项窗口使用以下代码初始化：

```
USP.init({
        theName: 'show_advd',
        theDefault: true
    }, {
        theName: 'show_ahd',
        theDefault: true
    }, {
        theName: 'show_at',
        theDefault: true
    }, {
        theName: 'show_bithd',
        theDefault: true
    }, {
        theName: 'show_bmtv',
        theDefault: true
    }); 
```

代码实际上是这些块中的大约 50 个，而不仅仅是 5 个，并且它会不断更新。我想要做的是有一个名称的外部文件，这些名称将被读入并制成一个数组。出于测试目的，我只是使用一个测试数组。

```
var test = ['test0','test1','test2']; 
```

现在我打算使用 for 循环来制作块，所以我只有一个而不是 50 个，但我不知道如何不破坏必要的格式。

它看起来像这样：

```
USP.init(
for(int i=0;i<test.length;i++)
{
    {
        theName: test[i],
        theDefault: true
    }
}); 
```

但显然这行不通。对解决方法的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:40:54.150

您不能包含这样的 for 循环，因为它是一个语句并且不会计算为表达式。您只能将表达式作为函数的参数，`{...}`这里的术语是对象文字，它们只是评估为对象的表达式。

您需要做的是使用您的 for 循环创建一个数组，然后使用`Function.apply`.

这是一个例子：

```
var args = [];

for (var i = 0; i < test.length; i++) {
  args.push({
    theName    : test[i],
    theDefault : true
  });
}

USP.init.apply(USP, args) 
```

该`apply`方法有两个参数。第一个是`this`函数内部的值；它必须是您要在其上调用函数的*对象*。第二个参数是一个数组，它将作为它的`arguments`.

# javascript - 设置参数的 Jcrop

> ID：14702345
> 
> 赞同：1
> 
> 时间：2013-02-05T07:38:01.700
> 
> 标签：javascript, jcrop

我使用提交表单将图片的名称和大小类型发送到我在其上使用 jcrop 的 php 文件。我想要的是使用 Jcrop 教程 nr5 中的“可以移动选择”选项（并禁用其他选项) 并且 jcrop 字段的大小由表单发送的 size 参数设置。有人是 Jcrop 的专家吗？因为我是新手，不懂代码。请帮忙。

```
if( (isset($_POST['tip_imagine']))&&(isset($_POST['alt-rol'])) ){
        $num=$_POST['alt-rol'];
        $size=$_POST['tip_imagine'];
                                if($size==0){
                                    $width=400;
                                    $height=118;

                                }
                                if($size==1){
                                    $width=500;
                                    $height=400;

                                }   

                                if($size==2){
                                    $height=200;
                                    $width=188; 

                                }   
                                if($size==3){   
                                    $height=195;
                                    $width=340;

                                }
                                if($size==4){
                                    $width=500;
                                    $height=400;

                                }   
                                if($size==5){
                                    $width=1280;
                                    $height=800;

                                }   
    }   
?>
<html>
<head>
<link rel="stylesheet" href="/css/admin_tools.css" type="text/css" />
<link rel="stylesheet" href="/css/jquery.Jcrop.css" type="text/css" />

<script type="text/javascript" src="/javascript/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/javascript/jquery.min.js"></script>
<script type="text/javascript" src="/javascript/jquery.Jcrop.js"></script>
<script type="text/javascript">
 jQuery(function($){

        // The variable jcrop_api will hold a reference to the
        // Jcrop API once Jcrop is instantiated.
        var jcrop_api;

        // In this example, since Jcrop may be attached or detached
        // at the whim of the user, I've wrapped the call into a function
        initJcrop();

        // The function is pretty simple
        function initJcrop()//{{{
        {
          // Hide any interface elements that require Jcrop
          // (This is for the local user interface portion.)
          $('.requiresjcrop').hide();

          // Invoke Jcrop in typical fashion
          $('#target').Jcrop({
            onRelease: releaseCheck
          },function(){

            jcrop_api = this;
            jcrop_api.animateTo([100,100,400,300]);

            // Setup and dipslay the interface for "enabled"
            $('#can_click,#can_move,#can_size').attr('checked','checked');
            $('#ar_lock,#size_lock,#bg_swap').attr('checked',false);
            $('.requiresjcrop').show();

          });

        };
        //}}}

        // Use the API to find cropping dimensions
        // Then generate a random selection
        // This function is used by setSelect and animateTo buttons
        // Mainly for demonstration purposes
        function getRandom() {
          var dim = jcrop_api.getBounds();
          return [
            Math.round(Math.random() * dim[0]),
            Math.round(Math.random() * dim[1]),
            Math.round(Math.random() * dim[0]),
            Math.round(Math.random() * dim[1])
          ];
        };

        // This function is bound to the onRelease handler...
        // In certain circumstances (such as if you set minSize
        // and aspectRatio together), you can inadvertently lose
        // the selection. This callback re-enables creating selections
        // in such a case. Although the need to do this is based on a
        // buggy behavior, it's recommended that you in some way trap
        // the onRelease callback if you use allowSelect: false
        function releaseCheck()
        {
          jcrop_api.setOptions({ allowSelect: true });
          $('#can_click').attr('checked',false);
        };

        // Attach interface buttons
        // This may appear to be a lot of code but it's simple stuff
        $('#setSelect').click(function(e) {
          // Sets a random selection
          jcrop_api.setSelect(getRandom());
        });
        $('#animateTo').click(function(e) {
          // Animates to a random selection
          jcrop_api.animateTo(getRandom());
        });
        $('#release').click(function(e) {
          // Release method clears the selection
          jcrop_api.release();
        });
        $('#disable').click(function(e) {
          // Disable Jcrop instance
          jcrop_api.disable();
          // Update the interface to reflect disabled state
          $('#enable').show();
          $('.requiresjcrop').hide();
        });
        $('#enable').click(function(e) {
          // Re-enable Jcrop instance
          jcrop_api.enable();
          // Update the interface to reflect enabled state
          $('#enable').hide();
          $('.requiresjcrop').show();
        });
        $('#rehook').click(function(e) {
          // This button is visible when Jcrop has been destroyed
          // It performs the re-attachment and updates the UI
          $('#rehook,#enable').hide();
          initJcrop();
          $('#unhook,.requiresjcrop').show();
          return false;
        });
        $('#unhook').click(function(e) {
          // Destroy Jcrop widget, restore original state
          jcrop_api.destroy();
          // Update the interface to reflect un-attached state
          $('#unhook,#enable,.requiresjcrop').hide();
          $('#rehook').show();
          return false;
        });

        // Hook up the three image-swapping buttons
        $('#img1').click(function(e) {
          jcrop_api.setImage('demo_files/sago.jpg');
          jcrop_api.setOptions({ bgOpacity: .6 });
          return false;
        });
        $('#img2').click(function(e) {
          jcrop_api.setImage('demo_files/pool.jpg');
          jcrop_api.setOptions({ bgOpacity: .6 });
          return false;
        });
        $('#img3').click(function(e) {
          jcrop_api.setImage('demo_files/sago.jpg',function(){
            this.setOptions({
              bgOpacity: 1,
              outerImage: 'demo_files/sagomod.jpg'
            });
            this.animateTo(getRandom());
          });
          return false;
        });

        // The checkboxes simply set options based on it's checked value
        // Options are changed by passing a new options object

        // Also, to prevent strange behavior, they are initially checked
        // This matches the default initial state of Jcrop

        $('#can_click').change(function(e) {
          jcrop_api.setOptions({ allowSelect: !!this.checked });
          jcrop_api.focus();
        });
        $('#can_move').change(function(e) {
          jcrop_api.setOptions({ allowMove: !!this.checked });
          jcrop_api.focus();
        });
        $('#can_size').change(function(e) {
          jcrop_api.setOptions({ allowResize: !!this.checked });
          jcrop_api.focus();
        });
        $('#ar_lock').change(function(e) {
          jcrop_api.setOptions(this.checked?
            { aspectRatio: 4/3 }: { aspectRatio: 0 });
          jcrop_api.focus();
        });
        $('#size_lock').change(function(e) {
          jcrop_api.setOptions(this.checked? {
            minSize: [ 80, 80 ],
            maxSize: [ 350, 350 ]
          }: {
            minSize: [ 0, 0 ],
            maxSize: [ 0, 0 ]
          });
          jcrop_api.focus();
        });

      });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T06:36:26.000

在 jcrop.js 文件中设置以下内容：

```
allowSelect: false,
allowMove: true,
allowResize: false, 
```

在页面上：

```
jQuery(function($) {
    $('#selectedimage').Jcrop({
         setSelect:[ 275,60,50,15 ]
    });
}); 
```

您可以更改 setselect 中的值，所选区域的大小将相应更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T20:54:26.093

对于通过谷歌搜索“jcrop api focus not working”到达这里的任何人

确保你`api.enable()`先打电话！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:58:54.430

至少部分找到答案：我已经编辑了 jquery.Jcrop.js 文件，因此在加载时，allowSelect 和 allowResize 的默认值为 false。

```
// Basic Settings
    allowSelect: false,
    allowMove: true,
    allowResize: false, 
```

# javascript - 用 jQuery 工具提示替换所有标题默认工具提示

> ID：14702359
> 
> 赞同：3
> 
> 时间：2013-02-05T07:38:47.617
> 
> 标签：javascript, jquery, html, css, tooltip

我正在尝试使用允许我定义自定义工具提示的小型 jQuery 脚本替换我的应用程序中所有元素的默认工具提示（title=" ** "）。*

```
<div>
    <input type="text" title="default tooltip" />
    <textarea type="text" title="default tooltip"></textarea>
    <select title="default tooltip"><option>select</option></select>
 </div> 
```

.

```
$(function() {
$('input, textarea, select, p, label').tooltip({
hide: {
effect: "explode",
delay: 250
}
});
}); 
```

检查小提琴：http: [//jsfiddle.net/tnEmZ/1/](http://jsfiddle.net/tnEmZ/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:14:15.783

```
var $title = $("a,input,p,label,textarea[title]"); //get all elements with the title-Attribute

//loop through title-elements
$.each($title, function(index, value) {
    $(this).tooltip({
        show: {
             effect: "explode",
             delay: 250
        },
        hide: {
            effect: "explode",
            delay: 250
       }
    });  
}); 
```

演示[在这里](http://jsfiddle.net/Pisi2012/JJxET/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:48:57.373

希望这个**[DEMO](http://jsfiddle.net/KP7mT/)**能帮到你。

```
$(document).ready(function() {
        // Tooltip only Text
        $('.masterTooltip').hover(function(){
                // Hover over code
                var title = $(this).attr('title');
                $(this).data('tipText', title).removeAttr('title');
                $('<p class="tooltip"></p>')
                .text(title)
                .appendTo('body')
                .fadeIn('slow');
        }, function() {
                // Hover out code
                $(this).attr('title', $(this).data('tipText'));
                $('.tooltip').remove();
        }).mousemove(function(e) {
                var mousex = e.pageX + 20; //Get X coordinates
                var mousey = e.pageY + 10; //Get Y coordinates
                $('.tooltip')
                .css({ top: mousey, left: mousex })
        });
}); 
```

* * *

另一个例子在**[这里](http://jsfiddle.net/6WDZm/)**`jquery tooltip`。

来源：http: [//jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:50:22.923

工具提示小部件不是 jQuery 的一部分，而是 jQueryUI 的一部分。此外，它不适用于您的 jsfiddle，因为工具提示小部件随 jQueryUI 1.9.0 一起提供，而您的 jsfiddle 使用 jQueryUI 1.8.3。请参阅[此处](http://api.jqueryui.com/tooltip/)了解更多信息。

# c++ - 从哪里获取设备类型常量描述？

> ID：14702363
> 
> 赞同：4
> 
> 时间：2013-02-05T07:39:01.283
> 
> 标签：c++, linux, netlink

我正在通过 netlink 套接字获取有关系统网络设备的信息。我正在解析结构中定义的三种消息类型`RTM_NEWLINK`, 。`RTM_DELLINK``RTM_GETLINK``ifinfomsg`

```
struct ifinfomsg {
    unsigned char  ifi_family; /* AF_UNSPEC */
    unsigned short ifi_type;   /* Device type */
    int            ifi_index;  /* Interface index */
    unsigned int   ifi_flags;  /* Device flags  */
    unsigned int   ifi_change; /* change mask */
}; 
```

定义来自这里[http://www.kernel.org/doc/man-pages/online/pages/man7/rtnetlink.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/rtnetlink.7.html)

但是设备类型字段没有描述，`ifi_type`我在哪里可以找到描述可能值的常量？

甚至这里也没有描述 [http://www.foxprofr.com/rfc/RFC3549-LINUX-NETLINK-AS-AN-IP-SERVICES-PROTOCOL/3549.aspx](http://www.foxprofr.com/rfc/RFC3549-LINUX-NETLINK-AS-AN-IP-SERVICES-PROTOCOL/3549.aspx)

现在我知道这`1`是以太网并且`772`是环回，但我想知道所有可能的值。可能答案很明显，但谷歌不想告诉我任何有用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:16:01.107

看一看`/usr/include/net/if_arp.h`，你会发现那里的常数为`ARPHRD_*`. 如果你想让你的生活更轻松一些，如果你还没有使用它，请查看**[libnl 。](http://www.infradead.org/~tgr/libnl/)**

# ruby-on-rails - 替代任何？哪个进程完成数组

> ID：14702366
> 
> 赞同：0
> 
> 时间：2013-02-05T07:39:12.463
> 
> 标签：ruby-on-rails, ruby

我遇到了一种情况，我想处理整个数组并对数组执行`any?`操作以检查某些元素是否返回`false`

例如：我想打印所有真值。而且我还想检查`false`数组中的任何内容：

```
def hel? 
  [true, false, true].any?{|x| p x; x}
end 
```

上面的例子将只打印第一个值（即）`true`并返回`true`。但我希望它打印数组的所有元素并返回`false`。还有其他方法吗？或同一件事的任何变化？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:12:16.290

要打印值，请执行以下操作：

```
[true, false, true].each(&method(:p)) 
```

要查看它们是否都是真实的，请执行以下操作：

```
[true, false, true].all? 
```

为了做到这两点，请执行以下操作：

```
[true, false, true].each(&method(:p)).all? 
```

或者，您可以将其放入一个迭代中：

```
[true, false, true].inject(true){|m, n| p(n) && m} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:41:46.627

如果你想遍历你可以使用的数组[`Enumerable#each`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_entry)，但它不会返回一个布尔值：

```
def hel?
  [true, false, true].each{|x| p x; x}
end 
```

如果要检查所有元素，可以使用[`Enumerable#all?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-all-3F)：

```
def hel?
  [true, false, true].all?{|x| p x; x}
end 
```

但在这两种情况下，您都需要修改您的块以获得相同的结果。

# sql - 带内连接的 SQL 选择

> ID：14702369
> 
> 赞同：2
> 
> 时间：2013-02-05T07:39:14.360
> 
> 标签：sql, inner-join

我知道以前有人问过这个问题，但我发现很难应用该原则来解决我的问题。我有 2 个要从中选择数据的表。

我尝试使用下面的内部连接 ​​sql 查询：

```
$query1 = "SELECT `entries.id`, `code_id`, FROM `entries` INNER JOIN `codes` ON `code_id` = `codes.id`";
$result = mysql_query($query1); 
```

我的显示如下：

```
 while($row = mysql_fetch_array( $result )) 
      {
      echo "<tr>";
      echo "<td>" . $row['id'] . "</td>";
      echo "<td>" . $row['name'] . "</td>";
      echo "<td>" . $row['msisdn'] . "</td>";
      echo "<td>" . $row['created'] . "</td>";
      echo "<td>" . $row['code_id']  . "</td>";
      echo "</tr>";
      } 
```

我正在尝试从表格代码中获取实际代码，并将其显示到网站上，但我一直在获取 id(number) 而不是实际代码。

有人可以帮忙吗。我查遍了互联网，甚至还买了一些电子书，但我还是个新手，希望有人能指导我完成整个过程。所有输入表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:43:51.703

如果在不同的表中存在具有相同名称的字段，例如“id”，则必须为字段分配一个新名称：

```
$query1 = "SELECT `entries.id` as entriesid, entries.name, entries.msisdn, entries.created, `codes.id` as codesid, FROM `entries` INNER JOIN `codes` ON `entries.id` = `codes.id`";
$result = mysql_query($query1); 
```

...

```
 echo "<td>" . $row['entriesid'] . "</td>";
  echo "<td>" . $row['name'] . "</td>";
  echo "<td>" . $row['msisdn'] . "</td>";
  echo "<td>" . $row['created'] . "</td>";
  echo "<td>" . $row['codesid']  . "</td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:46:54.230

您可以执行以下操作：

```
$sql = mysql_query("select entries.* , codes.* from entries,codes where entries.code_id=codes.id");
 while($fetch = mysql_fetch_array($sql)) {
   // Do Your Display
} 
```

希望这可以帮助 。mysql功能也在退化。所以把它改成 mysqli / PDO

# permissions - Carrierwave 每个上传者的 S3 存储权限不同？

> ID：14702370
> 
> 赞同：2
> 
> 时间：2013-02-05T07:39:16.550
> 
> 标签：permissions, amazon-s3, carrierwave, fog

我想在上传文件时为每个上传者指定不同的权限 - 例如照片附件是公开的，而系统上传文件附件是私有的，是否可以根据上传者进行设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-29T12:04:37.357

只需让您的上传器类覆盖基类。我今天也把头发扯掉了.. :(这对我有用：

使用 Carrierwave 0.8.0 /app/uploaders/whatever_uploader.rb

```
class WhateverUploader < CarrierWave::Uploader::Base
  def fog_public
    true # or false
  end
end 
```

# java - 供应商的倒数 在番石榴

> ID：14702380
> 
> 赞同：16
> 
> 时间：2013-02-05T07:40:05.617
> 
> 标签：java, functional-programming, guava

我正在寻找`Supplier<T>`番石榴的倒数。我希望它会被称为`Consumer`- 不 - 或`Sink`- 存在，但用于原始值。

它是否隐藏在某个地方而我错过了它？

`Supplier`出于同样有用的原因，我希望看到它。诚然，使用不太常见，但是`Suppliers`例如 的许多静态方法将以类似的方式应用，并且在一行中表达诸如“向该供应商发送此迭代中的每个值”之类的内容会很有用。

与此同时，`Predicate`并且`Function<T,Void>`是丑陋的解决方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:55:19.627

您的替代方案是：

*   **Java 8**引入了一个[`Consumer`](https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html)可以[编写](https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html#andThen-java.util.function.Consumer-)的接口。
*   **[Xtend](http://www.eclipse.org/xtend)**的标准库包含[`Procedures`](http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/Procedures.html).
*   **[斯卡拉](http://scala-lang.org/)**有[`Function*`](http://www.scala-lang.org/api/current/index.html#scala.Function1); 如果一个函数的返回类型是[`Unit`](http://www.scala-lang.org/api/current/index.html#scala.Unit)，它被认为是副作用。

在所有这些语言中，您都可以方便地使用函数式接口，因此您也可以使用例如[Functional Java](http://functionaljava.org/)的[`Effect`](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/Effect.html).

**否则**，您最好依靠现有的语言结构来执行副作用，例如内置`for`循环。Java < 8 在使用 lambda 时会造成巨大的语法开销。请参阅[此问题](https://stackoverflow.com/questions/9525951/anything-in-guava-similar-to-functional-javas-effect)和[此讨论](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-05T13:28:10.800

您可以使用 a`Function`并将第二个 Argument 设置为[java.lang.Void](https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html)这`Function`只能返回`null`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T08:54:33.387

你已经找到了答案。如果你只是想访问，你可以使用 filter 和一个总是返回 true 的谓词；如果你是超级防御者，你可以使用任何谓词并在过滤器本身中使用带有 alwaysTrue 的 or 函数；只需`or`在末尾添加以避免短路。

问题是，即使我同意 Predicate 和 Consumer 在概念上是不同的，因为 Predicate 应该尽可能无状态并且没有副作用，而 Consumer 只是关于副作用，但实际上唯一的语法区别是返回一个布尔值（可以忽略）和另一个空值。如果 Guava 有一个 Consumer，则需要复制几个采用 Predicate 的方法也采用 Consumer，或者让 Consumer 从 Predicate 继承。

# node.js - socket.io 向房间发送消息不起作用

> ID：14702382
> 
> 赞同：0
> 
> 时间：2013-02-05T07:40:12.667
> 
> 标签：node.js, socket.io

套接字的事件绑定被移动到单独的模块：

```
exports.bind = function(socket) {
    socket.on('join', function(data) {
        socket.join(data.type);
    });
    socket.on('message', function(data) {
    global.io.sockets.in('rooma').emit('message', data);
    });
} 
```

**server.js：**

```
var app = express();

//creating socket server
server = http.createServer(app);
io = global.io = require('socket.io').listen(server, {'log level': 3});

io.sockets.on('connection', function(socket) {
    //binding events on socket
    events.bind(socket, io);
}); 
```

问题是，该消息永远不会发送给“rooma”中的客户端。但是如果我在全球范围内发出它：

```
global.io.sockets.emit('message', data); 
```

有用。哪里可能有问题？我已经测试过客户端肯定属于房间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:01:24.253

当您从要向其发送消息的房间获取事件的初始化时，此方法有效：

```
exports.bind = function(socket) {
        socket.on('join', function(data) {
            socket.join(data.type);
        });
        socket.on('message', function(data) {
            socket.get('room', function (error, room) {
                io.sockets.in(room).emit('message', data);
            });
        });
    } 
```

# mysql - 如何在 SQL 中显示 count 返回的值

> ID：14702386
> 
> 赞同：1
> 
> 时间：2013-02-05T07:41:02.323
> 
> 标签：mysql

当我尝试在 sql 中显示返回的计数值时，我一直有这个错误**“mysql_fetch_array() 期望参数 1 是资源，null 给定” 。**这是我的代码。

```
$query="SELECT med_rec_ID, COUNT(med_rec_ID) 
        FROM med_issue 
        WHERE MONTH(issue_date) = MONTH('2013-02-05')
        GROUP BY med_rec_ID";
$result= mysql_query($query);
while($count = mysql_fetch_array($display3)){
    echo $count[0];
} 
```

我试图单独在 sql 中运行查询，它显示 2 列（med_rec_ID 和 COUNT）。伙计们，我如何显示计数并修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:51:01.620

首先，不要使用`mysql_*`函数，因为它们已被弃用。使用`mysqli`或`PDO`。

其次，看看你传递给`fetch_array`函数的内容。

您可能想要执行以下操作：

```
$link = mysqli_connect("localhost", "admin", "pass", "db_name");
$result = mysqli_query($link, $sql);
while($row = $result->fetch_array(MYSQLI_ASSOC)){ 
$medIds[] = $row['med_rec_ID'];
... 
} 
```

然后通过给它一个别名来修复计数。

请注意，您实际上应该以更安全的方式存储您访问数据库的方式，但我仅使用它来说明示例。这是一篇很好的帖子：[如何创建全局配置文件？](https://stackoverflow.com/questions/5971365/how-to-create-global-configuration-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:42:43.580

给它一个别名：

```
SELECT 
  med_rec_ID, 
  COUNT(med_rec_ID) TheCount
FROM med_issue 
where MONTH(issue_date) =     MONTH('2013-02-05') GROUP BY med_rec_ID 
```

然后您可以`TheCount`在 while 循环中选择该列`$row['TheCount']`，也可以通过 lope 使用`$result`：

```
$result = mysql_query($query);

while($row = mysql_fetch_array($result)){
    echo $row['TheCount'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:44:00.837

您的查询是否正在执行？如果 mysql_query 不返回资源，则会发生该错误，以防查询失败

```
$query="SELECT med_rec_ID, COUNT(med_rec_ID) as C FROM med_issue where MONTH(issue_date) =     MONTH('2013-02-05') GROUP BY med_rec_ID";
$result= mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_assoc($result))
   {
    echo $row["C"];
   } 
```

注意：请不要再使用 mysql_* 函数

# c# - 序列在实体框架中不包含任何记录

> ID：14702391
> 
> 赞同：0
> 
> 时间：2013-02-05T07:41:14.433
> 
> 标签：c#, linq, entity-framework, entity-framework-4

```
StackTrace = "   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__0[TResult](IEnumerable`1 sequence)\r\n   at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult]... 
```

在突然无法使用实体框架从表中获取任何记录之前它正在工作

不知道在没有对 edmx 文件进行任何更改之前它工作正常的问题是什么

```
 public bool SetClientIdForUser(string username, string clientId)
    {
        aspnet_Users aspnetUsers = _objVaccinationContext.aspnet_Users.First(t => t.UserName == username);
        //aspnetUsers.Client_Id = clientId;
        aspnetUsers.Client_id = clientId;
        var entry = _objVaccinationContext.Entry(aspnetUsers);
        entry.State = EntityState.Modified;
        _objVaccinationContext.SaveChanges();
        return true;
    } 
```

![在此处输入图像描述](../Images/6038208907e636287e7901a9af5e755a.png)

**连接字符串：** `<add name="ChildVaccinationEntities" connectionString="metadata=res://*/ChildVaccinationContext.ChildVaccination.csdl|res://*/ChildVaccinationContext.ChildVaccination.ssdl|res://*/ChildVaccinationContext.ChildVaccination.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=CVSUAT;user id=sa;password=Password123;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />`

**注意：**我表中的第一条记录是我想要获取的记录，因此无法使用任何其他功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:44:26.197

您可以使用 FirstOrDefault 然后检查 null

```
aspnet_Users aspnetUsers = _objVaccinationContext.aspnet_Users.FirstOrDefault(t => t.UserName == username);

if(aspnetUsers != null)
{

  //do your stuff
return true
}

else
{
return false
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:44:44.560

如果过滤后的`First`序列至少不包含一个元素，则 LINQ 方法将引发异常。因此，如果`username`在您的数据库中找不到 ，则这行代码会引发错误。您可以使用`FirstOrDefault`并检查`null`.

# java - Struts2 日期标签显示工作日，例如 2013 年 2 月 13 日 9:00 AM

> ID：14702393
> 
> 赞同：3
> 
> 时间：2013-02-05T07:41:20.543
> 
> 标签：java, struts2

我们如何使用 struts2 日期标签来显示以下格式

2013 年 2 月 13 日，星期三，上​​午 9:00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T20:42:43.757

我知道你已经得到了答案，是的

```
<date name="customDate" format="EEE, d MMM, yyyy h:mm a" /> 
```

Struts 2 还使用**java.text.SimpleDateFormat**作为日期格式，您可能要查找它以了解更多信息。希望它对您将来想使用另一种特殊格式有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:45:57.330

利用数据标签的格式属性

```
<date name="customDate" format="EEE, d MMM, yyyy h:mm a" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:47:55.163

试试这种格式`EEE, dd MMM, yyyy HH:mm aaa`-

```
<s:date name="customDate" format="EEE, dd MMM, yyyy HH:mm aaa" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T07:54:25.760

使用这个标签：`<s:date />`，就像这样：

```
<s:date name="#date" format="EEE, d MMM yyyy HH:mm:ss aaa" /> 
```

# ruby-on-rails - 如何为我的 Rails 应用程序加载架构和数据

> ID：14702398
> 
> 赞同：0
> 
> 时间：2013-02-05T07:41:47.297
> 
> 标签：ruby-on-rails, data-migration, database-migration

如何将我的生产 Rails 应用程序的架构和数据加载到另一台机器中。我想将到目前为止完成的所有迁移集中到一个迁移文件中，并将新实例指向 prod db 的快照。怎么解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:23:48.110

只需复制并粘贴架构并执行`rake db:schema:load`. 您还可以将 schema.rb 内容粘贴到迁移中，但请确保删除所有其他迁移。但是请记住，实际上没有理由这样做，只需将旧迁移保持原样即可。

要导入测试数据，请使用此 gem：[https](https://github.com/ludicast/yaml_db) ://github.com/ludicast/yaml_db 。

# c - 遍历硬盘并确定给定块当前是否正在使用的最有效方法是什么？

> ID：14702399
> 
> 赞同：0
> 
> 时间：2013-02-05T07:41:49.530
> 
> 标签：c, linux, filesystems

我正在从事一个个人项目，以定期（每月一次）遍历我的硬盘并切碎（用零覆盖）磁盘上当前未分配给任何 inode 的任何块。

`C`鉴于项目的低级性质，这似乎是最合乎逻辑的语言，但我不确定如何最好地在文件系统中找到未使用的块。我在 SO 和其他与此类似的地方发现了一些问题，但没有就有效找到这些未使用块的最佳方法达成**任何**共识**。**

`df`已经提出了任何与此类似的问题，但我不相信它具有指定确切块偏移所需的分辨率，除非我遗漏了什么。我应该研究另一个实用程序或其他方向吗？

无论我开发什么解决方案，都需要至少能够处理`ext3`文件系统，最好`ext4`也能够处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:13:03.387

除了编写自己的实现来读取和解析磁盘文件系统数据之外，您并没有任何通用的解决方案来找出正在使用的块，这些数据高度特定于您要支持的文件系统。数据在磁盘上的外观通常在该文件系统的代码之外没有记录，并且在记录时，与实际实现相比，文档通常已经过时。

您最好的选择是阅读您想要支持的文件系统的 fsck 实现，因为它或多或少地做了您感兴趣的事情，但请注意，许多 fsck 实现并不总是检查属于的所有数据到文件系统。您可能有 fsck 不检查的备用超级块和某些元数据（或仅在主超级块损坏的情况下检查）。

如果你真的想做你说你想做的事，而不仅仅是了解文件系统，你最好的办法是像普通备份一样转储文件系统，擦除磁盘并恢复备份。我非常怀疑其他任何事情都是安全的，特别是考虑到您的磁盘擦除应用程序可能会因您所做的任何内核更新而破坏您的文件系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:52:05.470

Linux 目前支持十几种不同的文件系统，因此答案将取决于您选择哪一个。

但是，它们都应该有一种简单的方法来查找空闲块，否则创建新文件或扩展当前文件会有点慢。

例如，`ext2`在每个块组的开头都有一个标头，其中包含该块组的空闲列表等。我不相信这已经改变了，`ext4`即使那里有很多额外的东西。

您可能会更好地遍历这些块标题中的空闲块，而不是获取任意块并试图确定它是使用还是空闲。

# mysql - 更快的sql查询

> ID：14702402
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:41:53.597
> 
> 标签：mysql, sql, performance

我创建了一个 java 桌面应用程序，它与服务器通信以从 mysql 获取数据。

目前在服务器上的这个查询：

```
select
    ec_transactions.added,
    ec_transactions.merchant_id,
    ---
    ec_customer_billing_details.card_payment_method,
    ---
    ec_customer_details.first_name,
    ---
    ec_customer_card_details.card_holde r_name,
    ---
from
    ec_transactions,
    ec_customer_billing_details,
    ec_customer_details,
    ec_customer_card_details  
where ec_transactions.transactions_id =  tranId 
  AND ec_customer_billing_details.customer_id =  custId 
  AND ec_customer_details.customer_id   =  custId  
  AND ec_customer_card_details.customer_id =  custId 
```

* * *

太慢了。 **我怎样才能更快地做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:51:11.353

如果没有在表上设置，您可以使用解释计划和设置索引来检查这一点，除了您可以优化查询外，请查看[有关优化语句的 MySql 文档](http://dev.mysql.com/doc/refman/5.5/en/statement-optimization.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:17:06.443

正确的表索引将有助于更快的查询性能。*如果列已设置为primary key*、*foreign key*或*unique* ，则无需手动创建索引，因为服务器会自动为您创建它们。但请始终记住，表上的索引过多会降低这些 DML 语句（例如`INSERT`、`UPDATE`和`DELETE`.

# php - 如何使用 Curl 从 URL 访问文件

> ID：14702405
> 
> 赞同：0
> 
> 时间：2013-02-05T07:42:02.200
> 
> 标签：php, linux, apache, curl, permissions

```
-rw-r--r-- 1 root      root        514 Jan 15 04:03 curl.php
-rw-r----- 1 root      root       1344 Feb  5 02:09 dbm-config.ini
-rw-r--r-- 1 root      root       5149 Feb  5 02:19 mysql-connectivity-status.php 
```

在这里，我正在从 url 访问文件“mysql-connectivity-status.php”，例如
`http://<ip>/html/DB-Monitoring/mysql-connectivity-status.php`.

在`mysql-connectivity-status.php`我已经调用了文件`dbm-config.ini`。通过 URL 访问时，我收到以下警告。

```
Warning: parse_ini_file(/var/www/html/DB-Monitoring/dbm-config.ini): failed to open stream: Permission denied in /var/www/html/DB-Monitoring/mysql-connectivity-status.php on line 113 
```

所以，我不想更改权限`dbm-config.ini`但是如何使用 URL 访问文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:22:26.857

> -rw-r----- 1 root root 1344 Feb 5 02:09 dbm-config.ini

该文件可以由用户 root`rw-`读取和写入，并且可以由组 root 的成员读取`r--`

如果您使用 curl 访问 php 文件，这很可能会使用您的 webservers 用户和组执行，而不是`root:root`

这就是php无法读取ini文件的原因。我建议将文件移出您的文档根目录，以便无法直接从网络访问，然后将所有者更改为您的网络服务器用户和组

确定执行用户名 php

```
ps aux | grep "httpd" # apache environment
ps aux | grep "php"   # php fastcgi environment 

chown user:group dbm-config.ini 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:56:04.710

问题是您的网络服务器无法访问该文件。如果您无法修复，则无法通过该网络服务器远程访问它。:)

疯狂的猜测，因为我不知道你在使用什么：

```
chown root:apache dbm-config.ini
chmod g+r dbm-config.ini 
```

可能有帮助。这会将文件的所属组设置为 apache 并授予该组读取权限。如果您的网络服务器是 apache 并且它使用的是正确的组，这可能会有所帮助。

# paypal - 缺少 PAYPAL IPN 自定义字段

> ID：14702419
> 
> 赞同：6
> 
> 时间：2013-02-05T07:42:30.437
> 
> 标签：paypal, paypal-ipn

我在使用 API 流程和沙箱实现 paypal 定期付款时遇到了麻烦。我成功创建了订阅按钮并将用户重定向到贝宝快速结帐页面。但是paypal生成的一些IPN中缺少自定义字段，我真的需要这个字段。

以下是我在生成订阅按钮时发送的请求：

```
METHOD=SetExpressCheckout
&VERSION=94.0
&PWD=123456
&USER=myEmail@biz.com
&SIGNATURE=mySignature
&PAYMENTREQUEST_0_AMT=5.00
&PAYMENTREQUEST_0_PAYMENTACTION=Sale
&PAYMENTREQUEST_0_CURRENCYCODE=EUR
&RETURNURL=http%3A%2F%2Fwww.myWebSite.com?ok
&CANCELURL=http%3A%2F%2Fwww.myWebSite.com?ko
&L_BILLINGTYPE0=RecurringPayments
&L_BILLINGAGREEMENTDESCRIPTION0=test+paypal
&REQCONFIRMSHIPPING=0
&NOSHIPPING=1
&L_PAYMENTREQUEST_0_ITEMCATEGORY0=Digital
&L_PAYMENTREQUEST_0_NAME0=test+paypal
&L_PAYMENTREQUEST_0_AMT0=5.00
&L_PAYMENTREQUEST_0_QTY0=1
&PAYMENTREQUEST_0_CUSTOM=custom_var1%3Dvalue1%7Ccustom_var2%3Dvalue2 
```

用户确认交易后，他会回到我的网站，我必须验证信息并创建循环配置文件。以下是我提出的要求：

```
METHOD=GetExpressCheckoutDetails
&VERSION=94.0
&PWD=123456
&USER=myEmail@biz.com
&SIGNATURE=mySignature
&TOKEN=theToken

METHOD=CreateRecurringPaymentsProfile
&VERSION=94.0
&PWD=123456
&USER=myEmail@biz.com
&SIGNATURE=mySignature
&TOKEN=theToken
&AMT=5.00
&CURRENCYCODE=EUR
&PROFILESTARTDATE=2013-02-04T15%3A16%3A24%2B01%3A00
&BILLINGPERIOD=Day
&BILLINGFREQUENCY=1
&DESC=test+paypal

METHOD=DoExpressCheckoutPayment
&VERSION=94.0
&PWD=123456
&USER=myEmail@biz.com
&SIGNATURE=mySignature
&TOKEN=theToken
&PAYERID=JZUVX4TAHRHRU
&PAYMENTREQUEST_0_PAYMENTACTION=Sale
&PAYMENTREQUEST_0_AMT=5.00
&PAYMENTREQUEST_0_CURRENCYCODE=EUR
&PAYMENTREQUEST_0_NOTIFYURL=http%3A%2F%2Fwww.myWebSite.com?notify
&PAYMENTREQUEST_0_CUSTOM=custom_var1%3Dvalue1%7Ccustom_var2%3Dvalue2 
```

这样做后，我收到这些 IPN：

```
Array
(
    [transaction_subject] => test paypal
    [payment_date] => 06:01:52 Feb 04, 2013 PST
    [txn_type] => express_checkout
    [last_name] => numerik
    [residence_country] => FR
    [item_name] => 
    [payment_gross] => 
    [mc_currency] => EUR
    [payment_type] => instant
    [protection_eligibility] => Ineligible
    [verify_sign] => myVerifySign
    [payer_status] => verified
    [test_ipn] => 1
    [tax] => 0.00
    [payer_email] => myEmail@per.com
    [txn_id] => 6XC11065S3796804E
    [quantity] => 1
    [receiver_email] => myEmail@biz.com
    [first_name] => buyer
    [payer_id] => myPayerId
    [receiver_id] => myReceiverId
    [item_number] => 
    [handling_amount] => 0.00
    [payment_status] => Completed
    [payment_fee] => 
    [mc_fee] => 0.42
    [shipping] => 0.00
    [mc_gross] => 5.00
    [custom] => custom_var1=value1|custom_var2=value2
    [charset] => windows-1252
    [notify_version] => 3.7
    [ipn_track_id] => ab76ea3421261
)

Array
(
    [payment_cycle] => Daily
    [txn_type] => recurring_payment_profile_created
    [last_name] => numerik
    [next_payment_date] => 02:00:00 Feb 04, 2013 PST
    [residence_country] => FR
    [initial_payment_amount] => 0.00
    [currency_code] => EUR
    [time_created] => 06:01:47 Feb 04, 2013 PST
    [verify_sign] => myVerifySign
    [period_type] =>  Regular
    [payer_status] => verified
    [test_ipn] => 1
    [tax] => 0.00
    [payer_email] => myEmail@per.com
    [first_name] => buyer
    [receiver_email] => myEmail@biz.com
    [payer_id] => myPayerId
    [product_type] => 1
    [shipping] => 0.00
    [amount_per_cycle] => 5.00
    [profile_status] => Active
    [charset] => windows-1252
    [notify_version] => 3.7
    [amount] => 5.00
    [outstanding_balance] => 0.00
    [recurring_payment_id] => myRecurringPaymentId
    [product_name] => test paypal
    [ipn_track_id] => a8adfdf8b61d3
) 
```

正如您在第一个 IPN 中看到的，自定义字段可用，但在第二个 IPN 中不可用。有谁知道我在第二个 IPN 中检索自定义字段时缺少什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T21:14:43.520

您的 DoExpressCheckoutPayment 请求包含自定义参数，这就是您为该交易取回它的原因。您的 CreateRecurringPaymentsProfile 请求没有包含自定义参数，因此它不会返回。

也就是说，CRPP 似乎无法使用自定义参数，因此您需要在本地保存数据并将本地记录 ID 包含在 CRPP 请求的 PROFILEREFERENCE 参数中。这样，它将像 Matt Cole 建议的那样以 rp_invoice_id 的形式在 IPN 中返回，并且您可以使用相应的记录 ID 将自定义数据从数据库中拉出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T19:08:29.353

您最好的选择是添加`PROFILEREFERENCE`到您的 CreateRecurringPaymentsProfile 调用中。它将在 IPN 中以`rp_invoice_id`.

# xcode4 - 如何在box2d中移动和跳跃动画精灵

> ID：14702420
> 
> 赞同：0
> 
> 时间：2013-02-05T07:42:32.773
> 
> 标签：xcode4, box2d-iphone

在这段代码中，使用 spritesheet 创建了一个动画精灵。精灵创建了身体。那里的男孩可以使用按钮在世界上移动。

```
 //spritesheet plist
   [[CCSpriteFrameCache sharedSpriteFrameCache]
     addSpriteFramesWithFile:@"boyRunning.plist"];  

    // Create a sprite sheet with the boyRunning  images
    spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"boyRunning.png"];
    [self addChild:spriteSheet];

    // Load up the frames of our animation
    NSMutableArray *walkAnimFrames = [NSMutableArray array];
    for(int i = 2; i <=7; ++i) {
        [walkAnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"boyRunning%d.png", i]]];
    }
    walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];

    // Create a sprite for our boy
    CGSize winSize = [CCDirector sharedDirector].winSize;
    self.boy = [CCSprite spriteWithSpriteFrameName:@"boyRunning1.png"];        
    _boy.position = ccp(100, 90);
    self.walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
    [_boy runAction:_walkAction];
    [spriteSheet addChild:_boy];
    // boy body creation
    b2BodyDef boyBodyDef;
    boyBodyDef.type = b2_dynamicBody;
    boyBodyDef.linearDamping = 1;
    boyBodyDef.angularDamping = 1;
    boyBodyDef.position.Set(230.0f/PTM_RATIO,(FLOOR_HEIGHT+91.0f)/PTM_RATIO);
    boyBodyDef.userData = _boy;
    boyBody = world->CreateBody(&boyBodyDef);

    b2Body* dynamicBody = world->CreateBody(&boyBodyDef);
    // Define another box shape for our dynamic body.
    b2PolygonShape boxshape;
    boxshape.SetAsBox(11.0f/PTM_RATIO, 30.0f/PTM_RATIO);//These are mid points for our 1m box
    // Define the dynamic body fixture.
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &boxshape;   
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 0.3f;
    armFixture = boyBody->CreateFixture(&fixtureDef);
    dynamicBody->SetTransform( b2Vec2( 10, 20 ), 1 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:40:40.093

按下按钮时

**运动用**

```
body->ApplyForce( b2Vec2(0,50), bodiy]->GetWorldCenter() ); 
```

**对于跳跃**

```
body[0]->ApplyLinearImpulse( b2Vec2(50,50), body->GetWorldCenter() ); 
```

其中 body 是你的身体附着在精灵上， b2ve2(x,y) 是方向。

# c# - 如何集成测试这个方法？

> ID：14702421
> 
> 赞同：1
> 
> 时间：2013-02-05T07:42:36.830
> 
> 标签：c#, asp.net-mvc-3, integration-testing

嗨，我正在编写集成测试。

我的方法是

```
public IList<string> GetUsersRecursively(string groupName)
    {
        using (var context = GetPrincipalContext())
        {
            using (var group = GroupPrincipal.FindByIdentity(context, groupName))
            {
                using (var users = group.GetMembers(true))
                {
                    return (from user in users 
                            orderby user.SamAccountName
                            select user.SamAccountName
                            ).ToList();
                }; // recursively enumerate
            }
        }
        //          return results;
    } 
```

我写的测试是

```
 [Test]
    public void GetUsersRecursively()
    {
        // Arrange
        var target = this.provider;
        string groupName = "CAS_Branch_Manager";
        string expectedUsername = "test.branchmanager";

        // Act
        var result = this.provider.GetUsersRecursively(groupName);

        // Assert
        Assert.NotNull(result);
        CollectionAssert.Contains(result, expectedUsername);
    } 
```

但是通过在 resharper 上运行它会显示错误

System.DirectoryServices.AccountManagement.PrincipalServerDownException ：无法联系服务器。----> System.DirectoryServices.Protocols.LdapException : LDAP 服务器不可用。

然后处理我写的异常

```
 [Test]
    [ExpectedException(typeof(PrincipalServerDownException ))]
    public void GetUsersRecursively()
    {
        // Arrange
        var target = this.provider;
        string groupName = "CAS_Branch_Manager";
        string expectedUsername = "test.branchmanager";

        // Act
        var result = this.provider.GetUsersRecursively(groupName);

        // Assert
        Assert.NotNull(result);
        CollectionAssert.Contains(result, expectedUsername);
    } 
```

但是现在 PrincipalServerDownException 显示错误，因为无法解析符号“PrincipalServerDownException”。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:49:20.420

您可能必须在测试项目中添加对“System.DirectoryServices”程序集的引用。

# c# - 在 Winforms、C# 中使用“帮助程序类”

> ID：14702422
> 
> 赞同：1
> 
> 时间：2013-02-05T07:42:36.730
> 
> 标签：c#, winforms, class

昨天我想问一个问题，但似乎太模糊了。这是另一个尝试。

过去，我使用过一些具有功能的 winforms/VB.Net 类，例如处理文本字符串、文件操作或数据库处理，例如 clsStrings、clsIO 和 clsDB。这个想法是这些类完成了与主题相关的所有事情，因此 clsStrings 将有一个名为“filterString”、removeCertainChars 等的方法。

在旧的 winforms 应用程序中，我只是在需要访问方法时编写 Imports clsStrings。在整个 .vb 文件中，我可以编写类似

```
str = filterString(TextBox1.Text) 
```

我现在尝试在 C# 中的新 winforms 应用程序中获得相同的功能。我唯一要做的就是为类创建一个变量：

```
clsStrings clsstrings = New clsStrings(); 
```

...然后在代码中：

```
str = clsstrings.filterString(TextBox1.Text); 
```

所以我想我想要的是能够为这些“帮助类”使用 using 语句（他们有更好的词吗？），这样我就不必一直写变量名。（就像当 Intellisense 发现命名空间丢失并询问我是否要为 System.Data 使用 using 语句时，我可以编写“DataTable”，而不必一直编写“Data.Datatable”。）

我怀疑我需要将这些类文件放在一个单独的文件夹中，但这完全没问题。我只想要我的应用程序的一些结构。

我希望这更清楚。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:45:38.583

好吧，不同之处在于现在您正在使用 OOP 原则。

为了更接近以前的习惯，您可以做的是为帮助类构建静态类，甚至可以将它们变成扩展方法。

例子：

```
public static class ClsStrings
{

 public static string FilterString(this string stringToFilter) { return something; }

} 
```

然后你可以这样称呼它：

```
string filteredString = TextBox1.Text.filterString(); 
```

或者

```
string filteredString = ClsStrings.filterString(TextBox1.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:12:26.717

扩展方法是要走的路。使用这些，您基本上可以使用自己的方法扩展 String 类并执行类似 Sting.filterString(); 之类的操作。

[http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

# javascript - 有没有办法改进一个大的 if/else 或 switch/case 块？

> ID：14702426
> 
> 赞同：1
> 
> 时间：2013-02-05T07:42:54.587
> 
> 标签：javascript, jquery

我正在重构一些 javascript 以使用 jQuery，其中一个事件看起来像这样

```
document.onkeyup = function keyUp(e) {

if (e.keyCode == 70) { // 'f'
    //Do something
}
else if (e.keyCode == 78) { // 'n'
    //Do something else
} ... 
```

[不幸的是，案例中所做的事情并不像这个问题](https://stackoverflow.com/questions/3640843/refactoring-a-large-block-of-chained-if-else-statements)中的那样相似或简单。有没有更好的方法来编写这个而不是大量的硬编码 if/else 或 switch/case 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:45:47.510

我不知道它是否真的更好，但是您可以将所有可能的值作为对象的键列出在您包含的其他一些专用文件中。例如：

```
var keyHandlers = {
    "70": function () { /* Do something */ },
    "78": function () { /* Do something else */ }
}; 
```

然后，在您的`keyup`事件处理程序中，您可以简单地引用此对象的适当属性：

```
document.onkeyup = function keyUp(e) {
    keyHandlers[e.keyCode]();
}; 
```

这种方法相对于语句的一个显着缺点`switch`是，如果您希望多个键执行相同的功能，它看起来会更加混乱。使用 a `switch`，您可以让这些案例失败。在这里，您必须在初始`keyHandlers`声明之后执行一些其他任务。

* * *

其他几点......你应该使用`addEventListener`而不是`on...`属性，你有理由命名你当前分配的函数`onkeyup`吗？命名它的唯一原因是如果您需要从其内部引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:46:02.533

使用对象将键码映射到功能：

```
var keyTable = {
  70: function () { ... },
  78: function () { ... },
  ... etc ...
} 
```

然后您的事件处理程序变为：

```
document.onkeyup = function keyUp(e) {
  keyTable[e.keyCode]();
}; 
```

# android - 如何在模拟器中播放本地保存的文件？

> ID：14702434
> 
> 赞同：0
> 
> 时间：2013-02-05T07:43:29.117
> 
> 标签：android, text-to-speech, android-mediaplayer

我正在实现一个用于播放音频文件的应用程序（从文本输出到语音并存储在 中`mnt/sdcard/audiofiles/audio.mp3`）。当我尝试使用 MediaPlayer 播放时，出现错误。

代码：

```
MediaPlayer  mMediaPlayer = new MediaPlayer();
try {
  mMediaPlayer.setDataSource("/mnt/sdcard/audiofiles/audio01.mp3");
  mMediaPlayer.prepare();
} catch (IllegalArgumentException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} catch (IllegalStateException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
}
mMediaPlayer.start(); 
```

**错误：**

> ```
>  02-05 13:11:40.859: I/SynthProxy(286): setting pitch to 100<br> 
> ```

```
 02-05 13:11:40.898: E/MediaPlayer(15651): error (1, -2147483648)<br>
  02-05 13:11:40.898: W/System.err(15651): java.io.IOException: Prepare failed.: status=0x1<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.media.MediaPlayer.prepare(Native Method)<br>
  02-05 13:11:40.898: W/System.err(15651):  at com.example.testmedai1.MainActivity$MySpeech.onInit(MainActivity.java:93)<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.speech.tts.TextToSpeech$1.onServiceConnected(TextToSpeech.java:451)<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.app.ActivityThread$PackageInfo$ServiceDispatcher.doConnected(ActivityThread.java:1247)<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.app.ActivityThread$PackageInfo$ServiceDispatcher$RunConnection.run(ActivityThread.java:1264)<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.os.Handler.handleCallback(Handler.java:587)<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.os.Handler.dispatchMessage(Handler.java:92)<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.os.Looper.loop(Looper.java:123)<br>
  02-05 13:11:40.898: W/System.err(15651):  at android.app.ActivityThread.main(ActivityThread.java:4627)<br>
  02-05 13:11:40.898: W/System.err(15651):  at java.lang.reflect.Method.invokeNative(Native Method)<br>
  02-05 13:11:40.898: W/System.err(15651):  at java.lang.reflect.Method.invoke(Method.java:521)<br>
  02-05 13:11:40.898: W/System.err(15651):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)<br>
  02-05 13:11:40.898: W/System.err(15651):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)<br>
  02-05 13:11:40.898: W/System.err(15651):  at dalvik.system.NativeStart.main(Native Method)<br>
  02-05 13:11:40.898: E/MediaPlayer(15651): start called in state 0<br>
  02-05 13:11:40.898: E/MediaPlayer(15651): error (-38, 0)<br>
  02-05 13:11:40.918: E/MediaPlayer(15651): Error (-38,0)<br> 
```

**编辑1：**

这是我正在尝试的全部代码，当单击 button1 时，我创建了一个音频文件。我使用 DDMS->File Exploring 检查了该文件并将其保存到我的桌面并播放。它工作正常。但是当我尝试务实地访问它并尝试玩时，我得到了错误。

```
 package com.example.testmedai1;

 import java.io.File;
 import java.io.FileInputStream;
 import java.io.FileNotFoundException;
 import java.io.IOException;
 import java.util.HashMap;

 import android.media.MediaPlayer;
 import android.os.Bundle;
 import android.os.Environment;
 import android.app.Activity;
 import android.speech.tts.TextToSpeech;
 import android.speech.tts.TextToSpeech.OnInitListener;
 import android.util.Log;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.Toast;

 public class MainActivity extends Activity {

Button store, play;
EditText input;
String speakTextTxt;
TextToSpeech mTts;
private String path;
HashMap<String, String> myHashRender = new HashMap<String, String>();
String tempDestFile ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    store = (Button) findViewById(R.id.button1);
    play = (Button) findViewById(R.id.button2);
    input = (EditText) findViewById(R.id.editText1);
    store.setOnClickListener(new OnClickListener()  {

        public void onClick(View v) {

            speakTextTxt = "Hello world Hello world Hello world Hello world Hello world";
            HashMap<String, String> myHashRender = new HashMap<String, String>();
            myHashRender.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, speakTextTxt);

            String exStoragePath = Environment.getExternalStorageDirectory().getAbsolutePath();
            Log.d("MainActivity", "exStoragePath : "+exStoragePath);
            File appTmpPath = new File(exStoragePath + "/audiofiles/");
            boolean isDirectoryCreated = appTmpPath.mkdirs();
            Log.d("MainActivity", "directory "+appTmpPath+" is created : "+isDirectoryCreated);
            String tempFilename = "audio01.mp3";
            tempDestFile = appTmpPath.getAbsolutePath() + File.separator + tempFilename;
            Log.d("MainActivity", "tempDestFile : "+tempDestFile);
            new MySpeech(speakTextTxt);
        }
    });
}

class MySpeech implements OnInitListener
{

            String tts;

    public MySpeech(String tts)
    {
        this.tts = tts;
        mTts = new TextToSpeech(MainActivity.this, this);
    }

    public void onInit(int status) 
    {
        Log.d("MainActivity", "onInit() called");

        int i = mTts.synthesizeToFile(speakTextTxt, myHashRender, tempDestFile);
        if(i == TextToSpeech.SUCCESS)
        {

          Toast toast = Toast.makeText(MainActivity.this, "Saved "+i, Toast.LENGTH_SHORT);
          toast.show();   

        path = "/mnt/sdcard/audiofiles/audio01.mp3";

        //FileInputStream fis;

        MediaPlayer  mMediaPlayer = new MediaPlayer();
        try {
            //fis = new FileInputStream();
            mMediaPlayer.setDataSource("/mnt/sdcard/audiofiles/audio01.mp3");
            mMediaPlayer.prepare();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        mMediaPlayer.start();
        }
        else {
            Log.v("MainActivity", "error saving wav file : "+i);
        }
    }
  }

} 
```

**编辑2：**

我尝试使用以下代码，但仍然遇到相同的错误。

```
class MySpeech implements OnInitListener
{

            String tts;

    public MySpeech(String tts)
    {
        this.tts = tts;
        mTts = new TextToSpeech(MainActivity.this, this);
    }

    public void onInit(int status) 
    {
        Log.d("MainActivity", "onInit() called");

        int i = mTts.synthesizeToFile(speakTextTxt, myHashRender, tempDestFile);
        if(i == TextToSpeech.SUCCESS)
        {

          Toast toast = Toast.makeText(MainActivity.this, "Saved "+i, Toast.LENGTH_SHORT);
          toast.show();   

        try 
        {
            audioPlayer("mnt/sdcard/audiofiles" , "audio01.mp3");  // your file location
        } 
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 

        }
        else {
            Log.v("MainActivity", "error saving wav file : "+i);
        }
    }
  }

 public void audioPlayer(String path, String fileName) throws IOException
 {        
        if (mp != null) 
        {   System.out.println("before mp.reset() ");
               mp.reset();     
               System.out.println("after mp.reset() ");
          }

        try 
        {
            System.out.println("after path fileName ");
            mp.setDataSource(path+"/"+fileName);
            System.out.println("after path fileName ");
        } 
        catch (IllegalArgumentException e)
        {
            // TODO Auto-generated catch block
            //mp.reset();
            System.out.println("IllegalArgumentException ");
            e.printStackTrace();
        } 
        catch (IllegalStateException e)
        {
            // TODO Auto-generated catch block
            System.out.println("IllegalStateException ");
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            System.out.println("IOException ");
            e.printStackTrace();
        }
        try 
        {
            mp.prepare();
        } catch (IllegalStateException e) 
        {
            // TODO Auto-generated catch block
            System.out.println("On prepare ");
            e.printStackTrace();
        }  
        System.out.println("Before starting");
        mp.start();

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:50:28.577

试试这个：

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<Button id="@+id/cmd_play"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Play the music !!!"
   />
</LinearLayout> 
```

**音乐播放器.java**

```
public class MusicPlayer extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    // Find the Button from the xml-file.
    Button cmd_play = (Button)this.findViewById(R.id.cmd_play);
    cmd_play.setOnClickListener(new OnClickListener(){
      @Override
      public void onClick(View arg0) {
        MediaPlayer mp = MediaPlayer.create(MusicPlayer.this, R.raw.everlast);
        mp.prepare();
        mp.start();
        // ie. react on the end of the music-file:
        mp.setOnCompletionListener(new OnCompletionListener(){
          // @Override
          public void onCompletion(MediaPlayer arg0) {
          // File has ended !!! <img src="http://www.anddev.org/images/smilies/wink.png" alt=";)" title="Wink" />
          }
        });
      }
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:00:04.403

尝试使用以下方法播放您的文件。

> ```
>  public class MainActivity extends Activity {
>     Button store, play;
>     EditText input;
>     String speakTextTxt;
>     TextToSpeech mTts;
>     private String path;
>     HashMap<String, String> myHashRender = new HashMap<String, String>();
>     String tempDestFile;
>     MediaPlayer mMediaPlayer;
> @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.activity_main);
>     store = (Button) findViewById(R.id.button1);
>     play = (Button) findViewById(R.id.button2);
>     input = (EditText) findViewById(R.id.editText1);
>     mMediaPlayer = new MediaPlayer();
>     store.setOnClickListener(new OnClickListener() {
>         public void onClick(View v) {
>             speakTextTxt = "Hello world Hello world Hello world Hello world Hello world";
>             HashMap<String, String> myHashRender = new HashMap<String, String>();
>             myHashRender.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,
>                     speakTextTxt);
>             String exStoragePath = Environment  .getExternalStorageDirectory().getAbsolutePath();
>             Log.d("MainActivity", "exStoragePath : " + exStoragePath);
>             File appTmpPath = new File(exStoragePath + "/audiofiles/");
>             boolean isDirectoryCreated = appTmpPath.mkdirs();
>             Log.d("MainActivity", "directory " + appTmpPath
>                     + " is created : " + isDirectoryCreated);
>             String tempFilename = "audio01.mp3";
>             tempDestFile = appTmpPath.getAbsolutePath() + File.separator
>                     + tempFilename;
>             Log.d("MainActivity", "tempDestFile : " + tempDestFile); 
>              try {
>                     audioPlayer(exStoragePath ,tempFilename);  // your file location
>                 } catch (IOException e) {
>                     // TODO Auto-generated catch block
>                     e.printStackTrace();
>             } 
>         }
>     });
> }
> public void audioPlayer(String path, String fileName) throws IOException {
>     if (mMediaPlayer != null) {
>         mMediaPlayer.reset();
>     }
>     try {
>         mMediaPlayer.setDataSource(path + "/" + fileName);
>     } catch (IllegalArgumentException e) {
>         // TODO Auto-generated catch block
>         // mp.reset();
>         e.printStackTrace();
>     } catch (IllegalStateException e) {
>         // TODO Auto-generated catch block
>         e.printStackTrace();
>     } catch (IOException e) {
>         // TODO Auto-generated catch block
>         e.printStackTrace();
>     }
> }
>  } 
> ```

**已编辑：在**[此处](http://wptrafficanalyzer.in/blog/android-text-to-speech-implementing-pause-and-resume-in-tts-using-mediaplayer/) 查看链接，它将指导您如何实现文本到语音 - 使用 MediaPlayer 在 TTS 中实现暂停和恢复。

我希望它会帮助你..

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:01:23.737

希望您在清单文件中授予读写权限，如果没有，请给它并查看下面的示例，它将对您有所帮助。

[使用 Android 的 MediaPlayer 播放 SD 卡中的 mp3](http://android-er.blogspot.in/2010/07/play-mp3-in-sd-card-using-androids.html)

# c# - Windows Phone 中的自定义启动器和选择器

> ID：14702445
> 
> 赞同：0
> 
> 时间：2013-02-05T07:44:27.253
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

显然，我的 Windows Phone 8 应用程序中有更多功能模块。通常我会限制开发人员在模块之间进行通信。因此我更喜欢使用启动器和选择器来解决这个大麻烦。显然，我的自定义 Launcher/Chooser 将有自己的 Show() 方法来调用特定模块，就像在 Chooser/Launcher Task.Show() 中构建一样。

在上述情况下，当我编写自己的 Show() 方法时，我应该知道要遵循的重要概念。据我所知，这些是默认提供的非常基本的*NavigationHandling*。任何人都可以请你帮助我吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:18:21.670

不幸的是，您不能编写自定义启动器和选择器。您只能使用操作系统附带的那些。

但是，如果您想与其他应用程序通信，您可以直接使用[App 到 App 通信](http://channel9.msdn.com/Events/Build/2012/3-044)或通过文件扩展名进行。在前一种情况下，您非常有限，因为您必须知道您将调用哪个应用程序以及您将提供哪些参数，而在后一种情况下，您告诉操作系统您要打开哪个文件。这将向您显示一个屏幕，其中包含可以打开该文件类型的所有应用程序。

这两种方法都是有限的，遗憾的是我们没有更好的 app2app 共享能力。

# asp.net - 视图状态和控制状态之间的区别

> ID：14702449
> 
> 赞同：13
> 
> 时间：2013-02-05T07:44:39.660
> 
> 标签：asp.net

它们之间有什么区别`ViewState`以及它们如何工作？`ControlState``IsPostBack`

的实际用途是`ControlState`什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T07:47:16.737

控制状态是 ASP.NET 2.0 中的一个新结构，它实际上只不过是视图状态；但是，它是具有显着优势的视图状态；该优势是其他开发人员使用您的控件不能禁用控件状态，因为他们可以查看状态。

[http://www.codeproject.com/Articles/15300/Using-Control-State-in-ASP-NET-2-0](http://www.codeproject.com/Articles/15300/Using-Control-State-in-ASP-NET-2-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T17:17:30.677

ViewState 和 ControlState 都存储控件属性，您可以仅禁用 ViewState 属性，这不会影响在页面第一次加载时加载的 ControlState，或者如果页面是 postBack，则 controlState 已经从保存的内存中加载

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T19:45:14.297

既然控制状态和视图状态是一样的，那么第一个问题是，这不是重复数据吗？然后我们意识到控制状态的一个优势是它不能被禁用。然后我们可能会想为什么我们不能对 View State 做同样的事情:) 为什么要为此发明一个新的“控制状态”。现在我们有重复的数据。禁用视图状态的原因因控制状态的存在而无效，对吗？

这就是控制状态的真正优势所在。控制状态是通用的。也就是说，自定义控件可以决定在控件状态中存储什么。当视图状态不打算由控件专门存储时，它是可用的一般开箱即用功能。因为控制状态有一个特定的原因（并且它必须是可靠的），所以它不是被设计为被禁用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T04:48:39.423

ASP.NET 2.0 版中引入的控件状态类似于视图状态，但在功能上独立于视图状态。页面开发人员可以禁用页面的视图状态或单独的性能控制。但是，不能禁用控制状态。控件状态旨在存储控件的基本数据（例如分页器控件的页码），这些数据必须在回发时可用，以使控件即使在禁用视图状态时也能正常工作。默认情况下，ASP.NET 页面框架将页面中的控件状态存储在与视图状态相同的隐藏元素中。即使视图状态被禁用，或者当使用 Session 管理状态时，控制状态也会在页面中传递到客户端并返回到服务器。在回发时，ASP。

# iphone - 通过在 ios 中指定名称以编程方式保存图像

> ID：14702451
> 
> 赞同：1
> 
> 时间：2013-02-05T07:44:42.817
> 
> 标签：iphone, ios, ipad, uiimageview, uiimage

通过从屏幕捕捉到相册来保存图像是可以的。但是在使用 UIImageWriteToSavedPhotosAlbum 方法保存图像时，图像会以 1、2、3 等数字方式保存。

我们可以在将图像保存到相册时指定名称吗？或任何其他替代方法。

任何帮助和建议将不胜感激。

# c - 指针如何提高程序效率？

> ID：14702455
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:45:00.063
> 
> 标签：c, pointers

在 CI 中已经注意到指针导致更快的程序执行。怎么可能，因为它必须在转到实际变量之前获取指针变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:51:11.197

指针不会导致更快的程序执行。智能算法可加快程序执行速度。有时，通过以正确的方式使用指针，算法可以变得更智能。指针永远不是用来解决问题以加快解决速度的魔杖。

指针只是一种设计范式，使用函数式编程根本不使用任何指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:54:15.800

这不是真的。更快的程序执行的原因不是指针的可用性。这是您如何处理指针的问题。（可能）更快的程序执行源于 C 没有引入隐藏功能这一事实。

以字符串为例。其他语言中的常见实现在字符串中引入了一个长度字段，以跟踪字符串的长度。这种“簿记”（尽管对程序员隐藏）会导致执行额外的循环。

另一个例子是 C 不检查您要取消引用的指针是否有效。这种评估也会花费额外的周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:02:18.723

C 标准没有指定任何所需的速度，因此将速度归因于 C 的特性是没有意义的。考虑到某些 C 实现产生的机器代码比其他实现更优，将速度归因于以下方面可能更有意义C [1]的具体实现。不要混淆实现和规范。

[1：为了对 C 的特定实现的速度进行有意义的比较，您可能想要提及您的操作系统（主要和次要版本）、您的编译器（主要和次要版本）、您的 CPU（型号）、主板、内存（模型和配置）和您使用的命令行参数。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T12:09:13.033

虽然我知道这个问题的每个答案都来自比我在 C 方面知识渊博得多的人（实际上我不在我的联盟中）、IMVHO 和/或知识有限，但指针*确实可以*提高效率。

要回答 OP 的问题（并忽略有关程序执行和获取的其余部分）：

> 指针如何提高程序效率？

通过避免数据重复。尽管这种效率可能仅在处理用户定义的变量“结构”时才显着。

这是我在 C 指针上找到的一篇不错的读物：[Why C has Pointers](http://duramecho.com/ComputerInformation/WhyCPointers.html)

# git - 告诉 gitk 在右边画出“busier”分支

> ID：14702456
> 
> 赞同：3
> 
> 时间：2013-02-05T07:45:03.130
> 
> 标签：git, gitk

在我们的项目中，我们使用一个主分支来合并常规功能分支（图像左侧），另外还有一个长期运行的分支来集成上游提交（图像右侧）。我们使用这个集成分支是因为上游不是 git repo，所以我们有一个始终镜像上游的分支（但这在这里不是很相关）。

每当我在该 repo 中打开 gitk 时，它都会在分支图的最左侧显示主分支，在右侧显示集成分支。**相反**，我希望**在右侧有更繁忙的分支**（更繁忙意味着更多提交），以便让提交消息更接近提交点。

有没有办法让 gitk 按特定顺序绘制分支？如果有人进入 gitk 的源代码，我不介意一些需要我自己编译 gitk 的修复。

*我知道，一旦合并，git 就无法再辨别是在哪个分支上进行了旧提交；我在上面纯图形意义上使用了“分支”这个词。Gitk 必须以某种方式确定要在图表的哪个“通道”（列）中绘制什么提交，我想影响它。*

![样品历史](../Images/ad491a59b42980d5f23484a2b190a05a.png)

*（抱歉图片太长了）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:15:29.940

如果左分支是当前本地 HEAD 所在的分支，那么您可能会尝试先`gitk log`签出“右”分支来调用它（我意识到这是一个糟糕的解决方法，但我的意思是：`gitk`不会不要为你做）。

但是，据我所知，`gitk`不会显示一个分支而不是另一个分支，也不会检测到“最繁忙”的分支。只有日志选项可以影响提交历史的表示方式（如“[在 git 中可视化分支拓扑](https://stackoverflow.com/questions/1838873/visualizing-branch-topology-in-git)”）。

# ruby-on-rails - Ruby on Rails 协会表格

> ID：14702459
> 
> 赞同：2
> 
> 时间：2013-02-05T07:45:15.353
> 
> 标签：ruby-on-rails, ruby, forms, associations

所以我正在使用 ROR 制作一个网络应用程序，但我无法弄清楚这个表单的正确语法是什么。我目前正在为评论和帖子制作关联类型的代码。

```
<%= form_for @comment do |f| %>
 <p>
 <%= f.hidden_field :user_id, :value => current_user.id %>
 <%= f.label :comment %><br />
 <%= f.text_area :comment %>
 </p>

 <p>
 <%= f.submit "Add Comment" %>
 </p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:53:48.553

您的表单很好，除了第一行（并且您不需要 user_id 的隐藏字段，这是通过您的关系完成的）：

```
<%= form_for(@comment) do |f| %> 
```

应该：

```
<%= form_for([@post, @comment]) do |f| %> 
```

现在，您呈现一个用于创建或更新特定帖子的评论的表单。

但是，您应该更改模型和控制器。

```
class Post
  has_many :comments
end

class Comment
  belongs_to :post
end 
```

这将使您可以访问@post.comments，显示属于特定帖子的所有评论。

在您的控制器中，您可以访问特定帖子的评论：

```
class CommentsController < ApplicationController
  def index
    @post = Post.find(params[:post_id])
    @comment = @post.comments.all
  end
end 
```

通过这种方式，您可以访问特定帖子的评论索引。

**更新**

还有一件事，你的路线也应该是这样的：

```
AppName::Application.routes.draw do
   resources :posts do
     resources :comments
   end
end 
```

这将使您可以访问 post_comments_path （以及更多路线）

# c - c中未初始化的字符串的值是多少？

> ID：14702461
> 
> 赞同：5
> 
> 时间：2013-02-05T07:45:26.047
> 
> 标签：c

> **可能重复：**
> [C 中 int 数组的初始值](https://stackoverflow.com/questions/1414215/initial-value-of-int-array-in-c)

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

int main(){
    char name[10];
    printf("%s\n", name);
    return 0;
} 
```

C 中未初始化的字符串持有什么值？编译器是否会自动分配大小为 10 的存储空间并用垃圾值填充它？编写上面的代码基本上会发生什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T07:46:38.033

在堆栈上分配了 10 个字节，仅此而已。它们的值保持原样，这意味着它是在分配之前写入这 10 个字节的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T07:47:04.587

由于字符串未初始化，因此未定义值 - 它可能是任何东西。我还要说打印未初始化的字符串是不安全的，因为它没有终止零字符，所以理论上你最终可能会打印超过 10 个字符。

还有一件事 -`C`不会用任何东西填满存储空间。它只是让它保持原样。

编辑：请注意，我并不是说只要您有一个 0 终止字符，就可以安全地访问未初始化的字符串。调用未定义的行为从来都不是安全的，因为它是**未定义**的——你永远不知道会发生什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:46:56.160

**未初始化变量的内容是未定义**的（例如在 Java 中除外）。换句话说：内容由最近压入堆栈以供其他方法调用的值组成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T07:49:11.210

在您的特定示例中，它可能会为零。但这没关系。

关键是它是**undefined**。如果你不能相信它总是一样的，它对你没有用。你不能做任何假设。您的代码的任何其他部分都不能依赖它。就好像它不存在一样。

如果您对实际内容的来源感到好奇，它们是存储在堆栈中的先前执行上下文的剩余部分。如果你运行几个函数调用，你会留下垃圾，你的程序可以随意覆盖。那些仅适用于覆盖的字节可能最终会出现在您的字符串中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T07:49:26.850

C 标准使用术语**“未指定”**，即它可以是任何东西。在现实生活中，它很可能会充满随机垃圾，如果你不走运，它不会有一个终止的零字节，所以你调用**未定义**的行为并且可能调用`printf()`会崩溃（分段错误，有人吗？） .

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T08:06:54.000

它包含垃圾（随机）值。请查看有关存储类的更多信息以更好地理解。

# c# - `Any()` 是否强制执行 linq？

> ID：14702472
> 
> 赞同：4
> 
> 时间：2013-02-05T07:45:56.460
> 
> 标签：c#, entity-framework

我有一个`linq to entity`查询。

会`Any()`强制执行 linq（就像`ToList()` 这样）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T07:52:37.710

有很好的 MSDN 文章[Classification of Standard Query Operators by Manner of Execution](http://msdn.microsoft.com/en-us/library/bb882641.aspx)，它描述了 LINQ 的所有标准运算符。正如您从表中看到的那样，`Any`立即执行（作为所有返回单个值的运算符）。如果您对运算符的执行方式有疑问，可以随时参考此表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:55:01.803

是的，没有。该`any`方法将立即从源中读取项目，但不能保证读取所有项目。

该`Any`方法将从源中枚举项目，但只枚举确定结果所需的数量。

如果没有任何参数，该`Any`方法将仅尝试从源中读取第一项。

使用参数，该`Any`方法将只从源中读取项目，直到找到满足条件的项目。只有在最后一个项目之前没有项目满足条件时，才会从源中读取所有项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:47:37.470

这很容易发现：Any() 返回一个简单的布尔值。由于 bool 始终是 bool，而不是可以具有自定义实现的 IQueryable 或 IEnumerable（或任何其他类型），因此我们必须得出结论 Any() 本身必须计算要返回的布尔值。

当然，如果在 IQueryable 的子查询中使用 Any() 则例外，在这种情况下，Linq 提供程序通常只会分析对 Any() 的调用的存在并将其转换为相应的 SQL（例如）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T07:48:52.260

简短的问题，简短的回答：是的。

要确定列表中的任何元素是否与给定条件匹配（或者是否有任何元素），必须枚举列表。正如[MSDN 所说](http://msdn.microsoft.com/en-us/library/bb337697.aspx)：

> 此方法不返回集合的任何一个元素。相反，它确定集合是否包含任何元素。 **一旦可以确定结果，就停止源的枚举。**

延迟执行不适用于此处，因为此方法提供枚举的结果，而不是另一个`IEnumerable`。

# c# - 异常助手，有人用吗？

> ID：14702474
> 
> 赞同：0
> 
> 时间：2013-02-05T07:45:58.620
> 
> 标签：c#, exception, exception-handling

我搜索了一些可以帮助我注册的东西，`exceptions`我`throw`找到了这个不错的链接：http:
[//irwinj.blogspot.co.il/2010/07/generic-throwifnull-c-helper-method.html](http://irwinj.blogspot.co.il/2010/07/generic-throwifnull-c-helper-method.html)

但我想问一下，还有没有其他人使用助手，或者可能是，你正在做旧的`explicit` `exception`投掷方式？

像这样：`throw new Exception("Message");`

***也许您有更通用的方法来做到这一点***？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:52:05.597

> 也许您有更通用的方法来做到这一点？

你听过/读过一些关于[代码合同](http://research.microsoft.com/en-us/projects/contracts/)的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:16:56.507

您可以只使用[企业库异常处理应用程序块](http://msdn.microsoft.com/en-us/library/ff664698%28v=pandp.50%29.aspx)。它提供了一种经过验证的方法来处理整个应用程序中的异常。

# java - 使用矩阵变换在画布上绘制位图会影响位图吗？

> ID：14702477
> 
> 赞同：0
> 
> 时间：2013-02-05T07:46:09.593
> 
> 标签：java, android, bitmap

我有一个 Bitmap 对象，我想用一些矩阵变换在画布上绘制。我正在使用

```
canvas.drawBitmap(myBitmap, myMatrix, null); 
```

这样的绘图效果会反对 myBitmap 吗？也就是说，在这之后绘制（变换绘制）myBitmap，**没有**myMatrix，会不会不做任何变换绘制呢？还是会有以前的转变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:58:56.643

只有通过将位图提供给画布的 CTOR 才能在位图上绘图。

[drawBitmap](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Matrix,%20android.graphics.Paint%29)不会更改参数中给出的位图。

# c# - 如何在asp.net中获取上个月的日期

> ID：14702478
> 
> 赞同：25
> 
> 时间：2013-02-05T07:46:10.063
> 
> 标签：c#, asp.net

我需要在 asp.net 中获取上个月的日期，这意味着如果当前日期是 2013 年 5 月 2 日，那么我想将上一个日期显示为 2013 年 5 月 1 日。如何解决这个问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-05T07:48:39.797

试试这个 ：

```
DateTime d = DateTime.Now;
d = d.AddMonths(-1); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-05T07:48:18.937

解决方法是减去 1 个月：

```
DateTime.Now.AddMonths(-1) 
```

或者，如果不只是从头开始构建 datetime 对象：

```
var previousDate = DateTime.Now.AddMonth(-1);

var date = new DateTime(previousDate.Year, previousDate.Month, DateTime.Now.Day); 
```

这一次您可以保证年份和月份是正确的，并且日期保持不变。（虽然这不是一个安全的算法，因为像 3 月 30 日这样的情况，前一个日期应该是 2 月 28/29 日，所以最好先考虑减去一个月）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-05T07:52:39.533

如果您已经有字符串格式的日期时间

```
var strDate = "5/1/2013";
var dateTime = DateTime.ParseExact(strDate, 
                                   "dd/MM/yyyy",
                                   CultureInfo.InvariantCulture);

var lastMonthDateTime = dateTime.AddMonths(-1); 
```

否则，如果您有`DateTime`对象，只需调用它的`AddMonths(-1)`方法。

# javascript - 预期的标识符、字符串或数字

> ID：14702480
> 
> 赞同：3
> 
> 时间：2013-02-05T07:46:19.063
> 
> 标签：javascript, internet-explorer

我有一个像这样的对象；

```
var defaults = {
        id: 'ActionSlider',
        element: '',
        closeBtnWidth: 55,
        panelWidth: 320,
        class: '',
        css: {},
        create: function() {},
    }, 
```

当我在 IE8 标准中运行我的页面时，它给了我以下错误；

**SCRIPT1028：预期的标识符、字符串或数字**

并指向行：类：''，

谁能告诉我为什么我不能在 IE 上使用它？它是保留字还是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T07:49:48.280

您需要在`class`保留字周围添加引号。另请注意，您应该删除最后一个逗号：

```
var defaults = {
        id: 'ActionSlider',
        element: '',
        closeBtnWidth: 55,
        panelWidth: 320,
        "class": '',
        css: {},
        create: function() {}
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:48:27.083

是的，`class`是保留字。[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:51:04.783

`class`是javascript中的[保留字](http://www.javascripter.net/faq/reserved.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T07:57:20.003

通常 class 是指任何对象的 class 属性，例如等`<div >`，`<input >`显示显示 class 为`<div class="someclass">`

# c++ - ChangeDisplaySettingsEx() 总是返回 DISP_CHANGE_BADPARAM

> ID：14702481
> 
> 赞同：0
> 
> 时间：2013-02-05T07:46:23.257
> 
> 标签：c++, winapi

我正在尝试使用 WinAPI C++ 函数设置我的显示器的显示模式。

**我的问题：**调用`ChangeDisplaySettingsEx()`总是返回`DISP_CHANGE_BADPARAM`。我究竟做错了什么？

我认为这可能是导致错误的我的 devMode.dmDriverExtra 值。我读过 MSDN 并且 devMode.dmDriverExtra 的解释令人困惑。它是什么以及如何找出监视器的 dmDriverExtra？

是什么导致我下面的代码总是返回`DISP_CHANGE_BADPARAM`？

```
DEVMODE devMode;
POINTL p                = {0,0};
_tcscpy(devMode.dmDeviceName, _T("\\Device\\00000072")); 
devMode.dmSpecVersion   = DM_SPECVERSION;
devMode.dmDriverVersion = 1;  // How do I determine the driver version?
devMode.dmSize          = sizeof(DEVMODE);
devMode.dmDriverExtra   = 0x5c0000; // 
devMode.dmFields        = DM_POSITION;
devMode.dmPosition      = p;

LONG res = ChangeDisplaySettingsEx(_T("\\Device\\00000072"), &devMode, mainHwnd, 0, NULL);
_tprintf(_T("%s: %d\n\n\n"), _T("\\Device\\00000072"), res); 
// The above printf always prints out "\Device\00000072: -5" (DISP_CHANGE_BADPARAM=-5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:22:21.457

hwnd 参数被记录为保留，并且必须为 NULL。另外 dmDriverExtra 是一个 16 位的值，所以 0x5c0000 不适合。

# android - android日历事件每年重复的重复规则

> ID：14702482
> 
> 赞同：1
> 
> 时间：2013-02-05T07:46:23.473
> 
> 标签：android, calendar, icalendar, android-calendar, rfc2445

我正在尝试以编程方式在日历中添加事件。我希望该活动每年重复一次，例如二月的每个第一个星期一。我使用的规则是这样的：

```
FREQ=YEARLY;BYDAY=1MO;BYMONTH=2;INTERVAL=1;COUNT=11; 
```

问题是：如果我创建事件的开始日期在一月，并将其设置为每年一月重复，那么它工作正常。但是，如果我在除 2 月以外的其他月份创建开始日期的事件，并将其设置为按照相同的规则重复，则该事件不会在星期一重复，而是在其他日期重复。那一天会有所不同，具体取决于事件的开始日期是哪个月份。似乎它计算天数，因为在闰年，这一天会改变一。

**更新：**

我注意到，如果我创建如上所述的事件，则会发生以下情况：如果我在 2 月创建事件并设置为在 3 月重复，则规则从`DTSTART`事件发生的蛾子获取月份中的天数设置（二月）。因此，如果我在 2 月创建一个事件并将其设置为在 3 月的最后一天重复，它将在 3 月 28 日或闰年的 29 日重复（而不是预期的 31 日）。

另一个例子：我`DTSTART`在 2013 年 1 月创建事件并将其设置为在 2 月的每个第一个星期一重复。它在 2013 年 2 月的日期创建事件，该日期对应于 2013 年 1 月的第一个星期一，在本例中为 2 月 7 日（因为 1 月 7 日是 2013 年 1 月的第一个星期一）。每年二月的第一个星期四将重复该活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:09:52.740

添加事件时`DTSTART`必须与事件的第一次发生在同一个月，以避免不必要的副作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:01:40.387

您能否就您所拥有的和您的期望提供更多详细信息：

```
BEGIN:VCALENDAR
PRODID:byhand
VERSION:2.0
BEGIN:VEVENT
DTSTAMP:20130205T090000Z
UID:SO_14702482_2b
SUMMARY:SO_14702482_2b
DTSTART:20130104T090000Z
RRULE:FREQ=YEARLY;BYDAY=1MO;BYMONTH=2;INTERVAL=1;COUNT=11;
END:VEVENT
END:VCALENDAR 
```

将发生（在 2 个不同的平台上测试）@09h00Z 在：20130104,20130204,20140203,20150202,20160201,20170206,...

尽管

```
BEGIN:VCALENDAR
PRODID:byhand
VERSION:2.0
BEGIN:VEVENT
DTSTAMP:20130205T090000Z
UID:SO_14702482_1b
SUMMARY:SO_14702482_1b
DTSTART:20130204T090000Z
RRULE:FREQ=YEARLY;BYDAY=1MO;BYMONTH=2;INTERVAL=1;COUNT=11;
END:VEVENT
END:VCALENDAR 
```

将发生（这里也测试过）@09h00Z 在：20130204、20140203、20150202、20160201、20170206、...

主要区别在于 RFC5545 指定，DTSTART 是发生的一部分。

# javascript - jQuery on() 或 live

> ID：14702489
> 
> 赞同：2
> 
> 时间：2013-02-05T07:46:58.630
> 
> 标签：javascript, web, jquery, jquery-on

我正在尝试使用下面的代码。它按预期在 Firefox 上运行良好，但是当我尝试 IE 或 Chrome 时，`on`or`live`方法不会触发。有人可以帮我吗？

```
$('#serverCpus').find('option').on('mouseenter', function (a) {
    a.stopImmediatePropagation();
    console.log('hihihi');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:17:38.067

这对我有用：

```
$('option').on('mouseenter', function() {
    console.log('mouse just entered an option')
} 
```

# android - 除了 TabActivity，有什么方法可以为 Android 2.2 操作系统到 Android 4.0 操作系统创建基于选项卡的应用程序？

> ID：14702495
> 
> 赞同：0
> 
> 时间：2013-02-05T07:47:34.427
> 
> 标签：android, android-2.2-froyo, android-tabs

我正在开发一个需要设计选项卡的应用程序。我设计使用操作栏，但它不适用于 Android 2.2 操作系统。

谁能告诉我如何为 Android 2.2 到 4.0 设计我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:50:51.697

[ActionbarSherlock](http://actionbarsherlock.com/)是实现新的 Android 设计模式的事实标准，该模式也适用于旧的 android 版本，同时保持单一的代码库。

它支持安卓2.2

我建议您查看示例并在您的 Android 2.2 设备上运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:55:48.410

是的。您可以导入库并使用它，它支持所有版本。

[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

不要忘记在清单中给出这个。

安卓：m​​inSdkVersion="8"

安卓：targetSdkVersion="16"

# solr - 我可以在使用 Sunspot gem 的 FQ 中使用“-”吗

> ID：14702497
> 
> 赞同：0
> 
> 时间：2013-02-05T07:47:38.480
> 
> 标签：solr, sunspot, sunspot-rails

我继承了一个对我们的数据不起作用的 Solr 安装。在重新构建之前，我们想推出一个简单的搜索：过滤我们的任何 8 码、9 号鞋码的产品库存。我们有 2 个方面，clothing_size 和 shoe_size。但是，我们希望得到任一 fq 的所有结果。我可以通过命令字符串在每个 fq 之前使用“-”来模拟此结果访问查询。这对我们的 Solr 服务器很有效。但是我们的网站是用 sunspot-rails 实现的。而且，实际上，对于我们的商业系统来说，这是一颗宝石。

问题：任何使用 Sunspot gem 的人，您有关于如何在查询字符串中的 fq field:value 元素前面添加“-”的提示吗？

IE

`localhost:8982/solr/select?q=*.*&fq=-[shoes_size]=2&fq=-[clothing_size]=8....`

（想象的转义元素）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:53:33.257

我会想象这样的查询，带有一个 fq 参数。这样，当您使用多个 fq 时，fq 参数用作 OR 而不是 AND：

```
localhost:8982/solr/select?q=*.*&fq=-shoes_size:2+-clothing_size:8 
```

[http://wiki.apache.org/solr/CommonQueryParameters#fq](http://wiki.apache.org/solr/CommonQueryParameters#fq)

# linux - Firefox中的Mod重写问题

> ID：14702499
> 
> 赞同：1
> 
> 时间：2013-02-05T07:47:49.590
> 
> 标签：linux, apache, .htaccess, mod-rewrite, mozilla

我创建了一个 .htaccess 文件，它做了两件事：将 http 重定向到 https 和 www。到非 www。这是代码：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

RewriteBase /
RewriteCond %{HTTP_HOST} ^www.profstream.com [NC]
RewriteRule ^(.*)$ https://profstream.com/$1 [L,R=301] 
```

这在 Chrome、Safari 和 Opera 中运行良好，但由于某种原因，当我输入 profstream.com/sandbox/login.php 时，例如在 Firefox 中，它会重定向到[https://profstream.com/https://www.profstream.com /sandbox/login.php](https://profstream.com/https://www.profstream.com/sandbox/login.php)。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:42:10.490

我认为您缺少 [L] 和 [QSA]，试试这个：

```
 RewriteCond %{HTTPS} off
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [QSA,L] 
```

`L`是离开，否则你将在此之后使用规则。
`QSA`就是添加URL的查询字符串。

第二部分应该是我认为的：

```
 RewriteCond %{HTTP_HOST} ^www.profstream.com [NC]
  RewriteRule (.*) https://profstream.com%{REQUEST_URI} [QSA,L] 
```

不知道`RewriteBase /`，有必要吗？

如果你希望两者都发生，也许你应该颠倒顺序

```
 RewriteCond %{HTTP_HOST} ^www.profstream.com [NC]
  RewriteRule (.*) https://profstream.com%{REQUEST_URI} [QSA,L]

  RewriteCond %{HTTPS} off
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [QSA,L] 
```

# moodle - 为什么不在首页显示图片

> ID：14702501
> 
> 赞同：0
> 
> 时间：2013-02-05T07:47:58.437
> 
> 标签：moodle

我正在通过moodle建立电子学习网站。我在设置-> 站点管理-> 外观-> 附加 HTML 中添加图像作为横幅。登录后显示，登录前不显示。拜托，有人可以为此提供建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:32:29.080

转到设置>站点管理>首页设置并勾选“包含主题部分”

该页面上还有许多其他有用的设置，例如用户在登录之前和之后看到的内容。

然后，您需要在顶部的主题部分添加一个资源（“标签”）。

您希望横幅出现在哪里？是网站标志吗？它应该在标题中吗？页脚？侧边栏？

如果是左上角的徽标，请使用支持徽标的主题，例如 Afterburner。

高温下，

酥油面团

# java - 编译器和运行时系统如何处理 java 中的嵌套类型？

> ID：14702525
> 
> 赞同：1
> 
> 时间：2013-02-05T07:50:03.377
> 
> 标签：java, jvm, nested-class, anonymous-class, anonymous-inner-class

编译器如何知道嵌套类型，例如：

*   嵌套内部类
*   匿名类
*   嵌套接口

.....ETC

需要明确.......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T07:59:31.673

编译器提取内部类并`*class`为每个类创建单独的文件。内部类名创建为`OuterClassName$InnerClassName`. 匿名内部类没有名称，因此它们的名称被创建为`OuterClassName$1`,`OuterClassName$2`等。

内部类使用语法对外部类的实例有特殊的引用`OuterClassName.this`。

由于内部类被编译成单独的类文件，JVM 根本不处理内部类。它处理具有上述“特殊”名称的常规类。

# javascript - 通过ajax请求上传文件数据

> ID：14702527
> 
> 赞同：0
> 
> 时间：2013-02-05T07:50:05.567
> 
> 标签：javascript, ajax, jquery, file-upload

我需要通过我的表单上传文件，但我不知道如何将文件上传合并到我的表单中以发布博客条目。我不知道如何使用 JQuery 执行 ajax。我不知道如何通过 ajax 请求发送图像文件/数据，任何帮助将不胜感激。

这就是atm：

CP.PHP

```
<?php
    include("../scripts/database_connx.php");
    include("../scripts/functions.php");
    start_secure_session();
    if(logged_in($sqli_con) === false) {
        header("Location: ../index.php");
        exit();
    }
    $cp = true;
?>
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>TridantDesigns | Admin</title>
        <link rel="stylesheet" type="text/css" href="../style/reset.css" />
        <link rel="stylesheet" type="text/css" href="../style/main.css" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                setInterval(function() {
                    if(window.XMLHttpRequest) {
                        get_entries = new XMLHttpRequest();
                    } else {
                        get_entries = new ActiveXObject("Microsoft.XMLHTTP");
                    }

                    get_entries.onreadystatechange = function() {
                        if(get_entries.readyState == 4 && get_entries.status == 200) {
                            document.getElementById("r_e").innerHTML = get_entries.responseText;
                        }
                    }

                    get_entries.open("GET", "get_entries.php", true);
                    get_entries.send();
                }, 50000);
            });
        </script>
    </head>
    <body>
        <?php include("../scripts/includes/header.inc.php"); ?>
        <div id="site_content">
            <div id="new_entry">
                <form>
                    <h1>Add A New Blog Entry</h1>
                    <input type="text" name="entry_title" maxlength="40" placeholder="Entry Title(40 Char)" /><br />
                    <textarea name="entry_contents" placeholder="Entry Content" /></textarea><br />
                    <label for="image">Choose Image File:</label>
                    &nbsp;<input type="file" name="image" /><br />
                    <input type="button" value="Post Entry" onclick="post_entry(this.form, this.form.entry_title, this.form.entry_contents, this.form.image);" />
                </form>
                <div id="post_error">

                </div>
            </div>

            <div id="remove_entry">
                <h1>Remove Entries(Click to remove)</h1>
                <div id="r_e">
                    <?php
                        get_entries($sqli_con);
                    ?>
                </div>
            </div>
        </div>

        <script>
            function post_entry(form, title, contents, image) {
                document.getElementById("post_error").style.display = "block";
                if(title.value.length < 1) {
                    document.getElementById("post_error").innerHTML = "Please enter an entry title!";
                    return;
                }
                if(title.value.length > 40) {
                    document.getElementById("post_error").innerHTML = "Title can not be longer than 40 characters!";
                    return;
                }
                if(contents.value.length < 1) {
                    document.getElementById("post_error").innerHTML = "Please enter some content!";
                    return;
                }

                if(window.XMLHttpRequest) {
                    post_entry_ = new XMLHttpRequest();
                } else {
                    post_entry_ = new ActiveXObject("Microsoft.XMLHTTP");
                }

                post_entry_.onreadystatechange = function() {
                    if(post_entry_.readyState == 4 && post_entry_.status == 200) {
                        document.getElementById("post_error").innerHTML = post_entry_.responseText;
                        if(post_entry_.responseText == "<response>Entry Added</response>") {
                            //get_entries();
                        }
                    }
                }

                post_entry_.open("POST", "add_entry.php", true);
                post_entry_.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                post_entry_.send("title="+title.value+"&contents="+contents.value+"&image="+image.value);

            }

            function remove_entry() {

            }
        </script>
        <?php include("../scripts/includes/footer.inc.php"); ?>
    </body>
</html> 
```

Add_Entry.PHP

```
<?php
    include("../scripts/database_connx.php");
    include("../scripts/functions.php");
    start_secure_session();

    if(logged_in($sqli_con) === false) {
        header("Location: ../index.php");
        exit();
    }

    $title = mysqli_escape_string($sqli_con, strip_tags($_POST['title']));
    $contents = mysqli_escape_string($sqli_con, strip_tags($_POST['contents']));
    $image = mysqli_escape_string($sqli_con, strip_tags($_POST['image']));
    $poster = mysqli_escape_string($sqli_con, strip_tags($_SESSION['tridantblog_username']));

    echo var_dump($image);

    if($image == "") {
        if($stmt = $sqli_con->prepare("INSERT INTO entries (title, contents, poster) VALUES (?, ?, ?)")) {
            $stmt->bind_param("sss", $title, $contents, $poster);
            $stmt->execute();
            $stmt->store_result();
            $stmt->fetch();
            if($stmt->rows_affected > 0) {
                $stmt->close();
                echo "<response>Added to database!</response>";
            } else {
                $stmt->close();
                echo "<response>Could not add entry to the database!</response>";
            }
        }
    } else {

        #Check and upload images here!

        if($stmt = $sqli_con->prepare("INSERT INTO entries (title, contents, image, poster) VALUES (?, ?, ?, ?)")) {
            $stmt->bind_param("sss", $title, $contents, $poster);
            $stmt->execute();
            $stmt->store_result();
            if($stmt->rows_affected > 0) {
                $stmt->close();
                echo "<response>Added to database!</response>";
            } else {
                $stmt->close();
                echo "<response>Could not add entry to the database!</response>";
            }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:54:07.317

不支持使用旧`XmlHttpRequest`对象通过 AJAX 上传文件。[`Uploadify`](http://www.uploadify.com/)可能的解决方法包括使用文件上传控件，例如[Fine Uploader](http://fineuploader.com/)或[`jQuery form plugin`](http://malsup.com/jquery/form/)支持上传文件的。支持 HTML 5 File API 和 XmlHttpRequest2 对象的现代浏览器也允许您在本地实现这一点。看看[`following article`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)这说明了如何实现这一点。

例如，假设您有以下 HTML 表单：

```
<form action="upload.cgi" method="post" enctype="multipart/form-data" onsubmit="return upload(this);">
    <input type="file" name="file" />
    <button type="submit">Upload file to the server</button>
</form> 
```

你可以有一个使用 AJAX 执行上传的脚本：

```
function upload(formElement) {
    var xhr = new XMLHttpRequest();
    xhr.open(formElement.method, formElement.action);
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status == 200) {
            // Handle response.
            alert(xhr.responseText); // handle response.
        }
    };
    xhr.send(new FormData(formElement));
    return false;
} 
```

你也可以看看[`following article`](http://www.html5rocks.com/en/tutorials/forms/html5forms/)关于 HTML5 的表单。

# sql - 使用 ROWNUM 的 ORACLE 查询

> ID：14702534
> 
> 赞同：1
> 
> 时间：2013-02-05T07:50:29.590
> 
> 标签：sql, oracle, database, rownum

对于以下查询，我期望值从 1 到 899 列出。但它只返回从 1 到 667 的值。有人可以帮我找出原因吗

```
select rownum from all_tables where rownum <900 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:52:12.453

您的表少于 899 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:56:47.000

the simplest row generator that would not come up short due to lack of rows in your source table / view is:

```
select rownum from dual connect by level < 900; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:48:46.913

尝试：

```
select level as rnum
from dual
connect by level < 900; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:31:34.377

```
select rownum from all_objects where rownum <900 
```

# java - Weka (jvm) 改变堆大小

> ID：14702537
> 
> 赞同：0
> 
> 时间：2013-02-05T07:50:33.803
> 
> 标签：java, weka

很抱歉问这个问题，因为它已经在这里问过了，但问题是它对我`java runtime events`不起作用`-Xms1024m -Xmx2048`.next 我试图改变大小`Runweka.ini`但是当我运行`weka`我得到一个错误`Jvm cannot start Critical error...`

那么是否有任何其他解决方案可以从操作系统或任何地方更改这些值 n 摆脱问题？

这是我的系统信息

```
win 7 64 bit 4Gb RAm
Weka 3.7.8 
java 3.7 
```

都安装了

```
C://program files /.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:28:33.290

随着`-Xmx2048`您将最大堆大小设置为`2048` *字节* ，我建议您尝试

```
-Xmx2g 
```

或者

```
-Xmx2048m 
```

我不会费心设置最小值。我可能会在启动时节省一毫秒。

# javascript - 在 ASP.Net 内部的 VB 的帮助下运行 javascript

> ID：14702543
> 
> 赞同：1
> 
> 时间：2013-02-05T07:51:02.367
> 
> 标签：javascript, asp.net, vb.net

我想知道有没有办法在 vb 的帮助下运行 javascript 代码

```
page:test1.aspx
<a href="#" onclick="Popup=window.open('testopen.aspx?jack=hello','Popup','toolbar=yes,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=420,height=400,left=430,top=23'); return false;">Test Window</a> 
```

> 页：test2.aspx.vb

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim check As String = "<a href='#' onclick='Popup=window.open('make_changes_form.aspx','Popup','toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=420,height=400,left=430,top=23'); return false;>Test Window from vb</a>"
    Context.Response.Write(check)
End Sub 
```

`page test1.aspx`现在工作 的代码
我想如果有办法让它工作，`page:test2.aspx.vb`因为当前的方法不适合我。谢谢
编辑
我试图这样做的原因是因为我不能通过
例如传递整数来使用 javascript 中的函数

```
Javascript
 function hello (str1)
  {
     alert(str1)
      alert ("hello world")    
   }

aspx code
    <input type="text" id="2">
    <a href="#" onClick="hello(2.value)">CheckFunction</a> 
```

这就是为什么我不能使用函数，因为函数不会激活，因为 id 不能是数字，它必须有一个字母数字值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:20:25.960

使用 Firebug，我注意到标签没有与 javascript 一起使用，所以我创建了一个单独的函数并从事件 onclick 调用它，它对我来说很好。

尝试这个：

```
 Dim check As String = "<a href='#' onclick='OpenPopUp()'>Test Window from vb</a>"
    Context.Response.Write(check)
    jscript += "<script language='JavaScript'>"
    jscript += "function OpenPopUp() {"
    jscript += "window.open('popup_to_be_oppened.aspx', '', 'resizable=no , menubar=no, scrollbars=yes, width=290, height=480');"
    jscript += "} </script>"
    Context.Response.Write(jscript) 
```

此外，您将不得不使用 `hello(document.getElementById('2').value`而不是`hello(2.value)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:05:54.587

与其使用 Response.Write，不如使用标准的 ASP.NET 超链接控件和[ScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/bb359558.aspx)。然后你可以使用 jQuery 来触发警报：

在您的页面上：

```
<asp:HyperLink runat="server" ID="lnkPopup" ClientIDMode="Static" NavigateUrl="#">Show Popup</asp:HyperLink> 
```

在您的代码隐藏中：

```
Dim js = <js>$(document).ready(function () {
    $('#lnkPopup').bind('click', function () {
        alert('Some text');
    });
});</js>.Value
ScriptManager.RegisterStartupScript(Me, GetType(Page), "jsPopup", js, true); 
```

实际的脚本是一个多行文字，这使得它在 VB.NET 中更易于阅读。

# php - 如何为 laravel 全局过滤器定义异常路由？

> ID：14702547
> 
> 赞同：1
> 
> 时间：2013-02-05T07:51:12.813
> 
> 标签：php, laravel

我想在运行除安装相关路由之外的任何路由之前运行一个过滤器来检查是否安装了应用程序，因为它会导致无限重定向循环。

这是我应该做的：

```
Route::filter('before', function()
{
    if (!User::isInstalled()) {
        return Redirect::to_route('install'); // infinite redirect loop
    }
}); 
```

有没有办法给这个过滤器添加例外？或者有什么方法可以检查当前女巫路线是否正在运行？任何的想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:53:24.273

试试这个：

```
Route::filter('before', function()
{
    if ( ! User::isInstalled() and Request::segment(1) !== 'install') {
        return Redirect::to_route('install');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:24:33.893

我从[laravel api Laravel\Routing\Route](http://laravel.com/api/class-Laravel.Routing.Route.html#_is)中找到了这个方法，这可能是一个解决方案

```
Route::filter('before', function()
{
    if ( ! Application::isInstalled() && ! URI::is('install*') ) {
        return Redirect::to_route('install');
    }
}); 
```

但我认为它们应该是强制某些路由在过滤之前不使用的更好方法。
感谢[bstrahija](https://stackoverflow.com/users/2025907/bstrahija)

# javascript - 以 Object Literal 表示法设置其他属性时如何获取属性？

> ID：14702550
> 
> 赞同：0
> 
> 时间：2013-02-05T07:51:15.403
> 
> 标签：javascript

在java脚本中我得到这个错误

```
Uncaught ReferenceError: baseUrl is not defined 

window.Configurations = Configurations = {
        baseUrl: 'https://mysite.com/',
        detailsEventCustom: baseUrl + 'DetailsEventCustom?EventId=',
        addEventCustom: baseUrl + 'AddEventCustom',
        listAllEventsCustomForDate: baseUrl + 'ListAllEventsCustomForDate?DateToLookUp=',
        dashboardEventsCustom: baseUrl + 'DashboardEventsCustom',
        listAllTimetableEventsCustom: baseUrl + 'ListAllTimetableEventsCustom',
        updateEventCustom: baseUrl + 'UpdateEventCustom?EventId=',
        deleteEventCustom: baseUrl + 'DeleteEventCustom?EventId='
    }; 
```

你能指出我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:53:39.750

当您访问对象时，您不能这样
做

```
var baseUrl = 'https://mysite.com/';
window.Configurations = Configurations = {
        baseUrl: baseUrl,
        detailsEventCustom: baseUrl + 'DetailsEventCustom?EventId=',
        addEventCustom: baseUrl + 'AddEventCustom',
        listAllEventsCustomForDate: baseUrl + 'ListAllEventsCustomForDate?DateToLookUp=',
        dashboardEventsCustom: baseUrl + 'DashboardEventsCustom',
        listAllTimetableEventsCustom: baseUrl + 'ListAllTimetableEventsCustom',
        updateEventCustom: baseUrl + 'UpdateEventCustom?EventId=',
        deleteEventCustom: baseUrl + 'DeleteEventCustom?EventId='
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:54:17.633

这是一个范围界定问题。您仍在大括号之间构建对象，并且所有值都在分配给对象之前进行计算。当您使用它来分配其他值时，baseUrl 根本不存在。你应该这样做：

```
var baseUrl = 'https://mysite.com/'
window.Configurations = Configurations = {
    baseUrl: baseUrl,
    detailsEventCustom: baseUrl + 'DetailsEventCustom?EventId=',
    addEventCustom: baseUrl + 'AddEventCustom',
    listAllEventsCustomForDate: baseUrl + 'ListAllEventsCustomForDate?DateToLookUp=',
    dashboardEventsCustom: baseUrl + 'DashboardEventsCustom',
    listAllTimetableEventsCustom: baseUrl + 'ListAllTimetableEventsCustom',
    updateEventCustom: baseUrl + 'UpdateEventCustom?EventId=',
    deleteEventCustom: baseUrl + 'DeleteEventCustom?EventId='
}; 
```

# php - 将变量作为输入值返回不能用双引号正确关闭

> ID：14702551
> 
> 赞同：0
> 
> 时间：2013-02-05T07:51:30.700
> 
> 标签：php, string, variables, return

此代码返回一个输入，其值为 $value 变量

```
$value = "Analytics: \r\n\r\n --------------------------------------------\r\n";
$value .= "Campaign Source: ".$campaign_source."\r\n";
$value .= "Campaign Name: ".$campaign_name."\r\n";
$value .= "Campaign Medium: ".$campaign_medium."\r\n";
$value .= "Campaign Term: ".$campaign_term."\r\n";
$value .= "Campaign Content: ".$campaign_content."\r\n\r\n";
$value .= "First visit: ".$first_visit."\r\n";
$value .= "Previous visit: ".$previous_visit."\r\n";
$value .= "Current visit: ".$current_visit_started."\r\n";
$value .= "Times visited: ".$times_visited;

if (!is_array($tag)) return '';

$name = $tag['name'];
if (empty($name)) return '';

// add the value to the form's hidden input 
$html = '<input type="hidden" name="' . $name . '" value="'. $value .'"/>'; 

return $html; 
```

$html 变量中的最后一个字符串在`"/>`呈现的 HTML 中没有正确关闭，并且看起来像是某种其他类型的双引号。您在附加的图像中看到输入末尾的双引号无法识别，并且它使用了开始跨度标记的结束引号。我尝试用另一个单一变量（例如 $times_visited）替换 $html 变量中的 $value 变量，并且它正确呈现。我认为进入 $value 的所有字符串都以某种方式将其丢弃。有什么想法有什么问题吗？

谢谢

![在此处输入图像描述](../Images/b0ffa200444cbfd1d0f44e45cd8ba7ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:11:52.147

这永远不会与`input`. 即使您对双引号没有任何问题，我也不认为带有换行符和`<br>`标签的值可以用作输入值。对于要作为隐藏传递的每个值，您应该使用 a`"<textarea style='display:none' name=\"name\">$value</textarea>"`或使用一个。`<input>`

# core-data - CoreData：错误：无法在 NSManagedObject 类“收集”上调用指定的初始化程序

> ID：14702552
> 
> 赞同：1
> 
> 时间：2013-02-05T07:51:34.787
> 
> 标签：core-data, ios6

为了将一些逻辑包装到模型中，我计划将 NSManagedObjectContext 放在一个 NSManagedObject 模型中，这样我就可以在一个模型中处理许多常见的逻辑：

```
@interface Collect : NSManagedObject{
        NSManagedObjectContext *managedObjectContext;
    }

    @property (nonatomic, retain) NSNumber *created_at;
    @property (nonatomic, retain) NSString *name;

    - (void) initContext;
@end

@implementation Collect

    @dynamic created_at;
    @dynamic name;

    - (void) initContext{
        if (managedObjectContext == nil)
        {
           managedObjectContext = [MyAppDelegate managedObjectContext];
        }

    }
@end 
```

我通过以下方式使用它：

```
Collect *collect = [[Collect new] autorelease];
[collect initContext]; 
```

但是运行时显示：`CoreData: error: Failed to call designated initializer on NSManagedObject class 'Collect'`.

我想知道如何正确地将 NSManagedObjectContext 实例添加到 NSManagedObject 模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:54:46.720

您不能将托管对象上下文添加到托管对象，它的工作方式相反：您首先需要一个托管对象上下文，然后您可以在此上下文中创建对象。

参见例如`NSManagedObjectContext`文档：

> 的实例`NSManagedObjectContext`表示应用程序中的单个“对象空间”或便笺簿。它的主要职责是管理托管对象的集合。这些对象形成一组相关的模型对象，代表一个或多个持久存储的内部一致视图。**单个托管对象实例存在于一个且仅一个上下文中**，但一个对象的多个副本可以存在于不同的上下文中。

和`NSManagedObject`文档：

> 如果直接实例化托管对象，**则必须调用指定的初始化程序** ( `initWithEntity:insertIntoManagedObjectContext:`)。

还有一种`insertNewObjectForEntityForName:inManagedObjectContext:`创建新对象的实用方法。例如：

```
Collect *collect = [NSEntityDescription insertNewObjectForEntityForName:@"Collect"
                    inManagedObjectContext:[MyAppDelegate managedObjectContext]]; 
```

（如果你愿意，你可以把它放到一个类方法中`Collect`。）

请注意，`NSManagedObject`已经有一个`managedObjectContext`获取对象上下文的方法：

```
NSManagedObjectContect *context = [collect managedObjectContext]; 
```

`managedObjectContext`因此，如果您将实例变量添加到托管对象类，则没有必要（甚至可能会导致问题） 。

# xml - 使用 XSLT 基于属性值合并 2 个 XML 文件？

> ID：14702554
> 
> 赞同：0
> 
> 时间：2013-02-05T07:51:41.583
> 
> 标签：xml, xslt, xml-parsing, merge

## 文件1.xml

```
<config>
 <state version="10">
  <root value="100" group="5">
     <leaf number = "2"/>
  </root>
  <root value="101" group="6">
     <leaf number = "3"/>
  </root>
 </state>
</config> 
```

## 文件2.xml

```
<config>
 <state version="10">
  <root value="100" group="5">
     <leaf number = "6"/>
  </root>
  <root value="101" group="6">
     <leaf number = "4"/>
  </root>
 </state>
</config> 
```

## 输出.xml

```
<config>
 <state version="10">
  <root value="100" group="5">
     <leaf number = "2"/>
     <leaf number = "6"/>
  </root>
  <root value="101" group="6">
     <leaf number = "3"/>
     <leaf number = "4"/>
  </root>
 </state>
</config> 
```

我尝试根据此处的答案编写 XSLT： [How to merge 2 XML files with common nodes using XSLT?](https://stackoverflow.com/questions/14699422/how-to-merge-2-xml-files-with-common-nodes-using-xslt/14699483#14699483)

但我不知道如何根据属性值进行比较（在这种情况下，属性值和“根”标签组？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:15:50.770

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="root">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
      <xsl:apply-templates
        select="document('file2.xml')
              /config/state[@version = current()/../@version]
                     /root[@value = current()/@value and
                           @group = current()/@group]/*" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

当以您的`file1.xml`示例作为主要输入运行时，这会产生：

```
<config>
  <state version="10">
    <root value="100" group="5">
      <leaf number="2" />
      <leaf number="6" />
    </root>
    <root value="101" group="6">
      <leaf number="3" />
      <leaf number="4" />
    </root>
  </state>
</config> 
```

# google-apps-script - 使用 Google Apps 实施 OpenID 身份验证

> ID：14702557
> 
> 赞同：0
> 
> 时间：2013-02-05T07:52:00.083
> 
> 标签：google-apps-script, openid, google-apps

与这个问题非常相关：[SSO, using Google Apps user database](https://stackoverflow.com/questions/6597230/sso-using-google-apps-user-database?rq=1)但我想知道用户 Nil 是如何开始使用他的 OpenID 脚本的。

谁能提供一些这方面的背景？我对 OpenID 不是很熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:06:16.520

Google Apps Marketplace [Google Apps Platform Single Sign On](https://developers.google.com/google-apps/marketplace/sso)概述提供了入门所需的所有信息。由于@Nils 描述了企业 Google Apps 环境，因此很可能这是他们开始实施的地方，因为...

> 对于使用 Google Apps 扩展控制台开发的内部应用程序，强烈建议实施单点登录。

您将找到各种语言的背景信息和现有 OAuth 库的链接。

您还应该查看[Google Identity Toolkit](https://developers.google.com/identity-toolkit/)，它提供了一个 API，您可以使用它来为您的 Web 应用程序实现 SSO，以及一个您可以合并以简化任务的 Javascript 小部件。

# javascript - 达到字符限制时删除字符或在退格上启用禁用 div

> ID：14702561
> 
> 赞同：0
> 
> 时间：2013-02-05T07:52:12.883
> 
> 标签：javascript, jquery, iphone, css, html

在达到最大字符限制时，我们有一个禁用的 div，需要在退格上启用。但是现在我们没有在 iPhone 中获得退格的 ASCII 码。我怎么能检测到 div 的退格键。这是我在 Query 中的字符限制代码，需要启用才能删除字符：

```
<script>
var charlimit = 20;
var maindiv = 'content';
var charlendiv = 'myDiv';
$().ready(function()
   {
    var div = document.getElementById (maindiv);
    var text = $(div).text();
    document.getElementById(charlendiv).innerHTML = charlimit - text.length;
        $('#'+maindiv).keypress(function(e)
             { 
        var div = document.getElementById (maindiv);
            var text = $(div).text();
        var code = e.keyCode || e.which;
        if (text.length < charlimit) 
             {
          div.contentEditable = true;
         }
        else
              {
           div.contentEditable = false;
           if(code=='08' || code=='46' || code=='')  //ASCII code not detect by keyboard back space
                {
             div.contentEditable = true;
             }
         }
    });
    $('#'+maindiv).keyup(function(e)
       {
        var code = e.keyCode || e.which;
        var div = document.getElementById (maindiv);
        var text = $(div).text();
        document.getElementById(charlendiv).innerHTML = charlimit - text.length;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:58:05.113

The div has been disabled so none of your key will work now. Better approach is not to disable the div, instead you can opt for changing color of the div when limit has reached.

# c++ - C++ 项目设置，多个定义

> ID：14702562
> 
> 赞同：0
> 
> 时间：2013-02-05T07:52:15.020
> 
> 标签：c++, build

我正在开发我的第一个大型 C++ 项目，但在正确构建它时遇到了巨大的问题。

首先，错误：

```
/tmp/ccn7hjru.o: In function `match(std::basic_istream<char, std::char_traits<char> >&, char const*)':
Geometry.cpp:(.text+0x0): multiple definition of `match(std::basic_istream<char, std::char_traits<char> >&, char const*)'
/tmp/ccfuS3Jb.o:Camera.cpp:(.text+0x0): first defined here
/tmp/ccn7hjru.o: In function `eat(std::basic_istream<char, std::char_traits<char> >&)':
Geometry.cpp:(.text+0xda): multiple definition of `eat(std::basic_istream<char, std::char_traits<char> >&)'
/tmp/ccfuS3Jb.o:Camera.cpp:(.text+0xda): first defined here
/tmp/ccIOhdcQ.o: In function `match(std::basic_istream<char, std::char_traits<char> >&, char const*)':
Light.cpp:(.text+0x0): multiple definition of `match(std::basic_istream<char, std::char_traits<char> >&, char const*)'
/tmp/ccfuS3Jb.o:Camera.cpp:(.text+0x0): first defined here
/tmp/ccIOhdcQ.o: In function `eat(std::basic_istream<char, std::char_traits<char> >&)':
Light.cpp:(.text+0xda): multiple definition of `eat(std::basic_istream<char, std::char_traits<char> >&)'
/tmp/ccfuS3Jb.o:Camera.cpp:(.text+0xda): first defined here
.... 
```

这持续了数百行

我所有的 c++ 课程文件如下所示：

```
#include "Camera.h"
#include "util.h"

Camera::Camera() {
    // TODO Auto-generated constructor stub

}
Camera::Camera(int x, int y) {
    this->resX = x;
    this->resY = y;
}

Camera::~Camera() {
    // TODO Auto-generated destructor stub
}

...more class methods below... 
```

和头文件都看起来像这样：

```
#ifndef CAMERA_H_
#define CAMERA_H_

#include "SceneElement.h"
#include "P3D.h"
#include "Ray.h"
#define CAMERA_PRE "{CAM:"
#define CAMERA_POST ":CAM}"
#define TAG_LOCATION "LOC:"
#define TAG_PLANE "PLANE:"
#define TAG_UPPER_RIGHT "UR:"
#define TAG_UPPER_LEFT "UL:"
#define TAG_LOWER_RIGHT "LR:"
#define TAG_LOWER_LEFT "LL:"
#define TAG_RES_X "RESX:"
#define TAG_RES_Y "RESY:"

class Camera: public SceneElement {
public:
    P3D location;
    P3D upperLeft;
    P3D upperRight;
    P3D lowerLeft;
    P3D lowerRight;
    int resX, resY;
    Camera();
    Camera(int, int);
    virtual ~Camera();
    virtual void toStream(std::ostream &);
    virtual void fromStream(std::istream &);
    Ray getRay(int, int);
};

#endif /* CAMERA_H_ */ 
```

一个例外是一个 util 文件，它看起来像这样：

```
#include "util.h"
#include <iostream>
#include <stdlib.h>
#include <string.h>

void match(std::istream &str, const char* expected){
    int len = strlen(expected);
    char* fromStream =  (char*)malloc(len+1);
    str.read(fromStream, len);
    fromStream[len] = 0;
    if(strcmp(fromStream, expected)){
        std::cout << "expected " << expected << ", got " << fromStream << "\n";
        free(fromStream);
        exit(1);
    }
    free(fromStream);
}

void eat(std::istream &str){
    char c;
    while(c=str.peek(), c == ' ' || c == '\n' || c == '\t'){
        str.get();
    }
} 
```

带有如下所示的头文件：

```
#ifndef UTILS
#define UTILS

#include <iostream>

void match(std::istream &str, const char* expected);
void eat(std::istream &str);

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:09:18.647

查看和。`SceneElement.h`_ 很可能，您已包含在这些头文件之一中。`P3D.h``Ray.h``util.cpp`

另一种可能性可能是`match()`其中`eat()`一个头文件的定义。

# jquery - 除了 Cookie，还有其他保存数据的方法吗？

> ID：14702563
> 
> 赞同：0
> 
> 时间：2013-02-05T07:52:17.200
> 
> 标签：jquery, cookies

除了 cookie，我还能使用哪些其他方式来存储小块信息？

我正在构建一个使用 iframe 加载某些内容的小部件。在该 iframe 中，我想保存应用程序的不同状态，但是当小部件与 iframe 内的内容不在同一个域中时（99% 的时间），我遇到了问题。

有任何想法吗？

哦，这是 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:56:44.503

other than Jquery you can use
1\. hashtags to save the state
2.[HTML5 History API](http://diveintohtml5.info/history.html)
3.[HTML5 localstorage](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:08:17.140

如果您想为特定用户保存持久数据，则 Cookie 是一种可行的方法，但是您可以使用 HTML5，不同之处在于，除非您使用 HTML5，否则使用 HTML 存储的数据不会与服务器明确共享`sessionStorage`。（会话存储使用相同的 API，但专门针对用户会话存储数据，并且在会话关闭后不持久）；

使用 HTML5 API 保存状态实际上非常简单，它也是事件驱动的，这意味着每当数据被修改时都会触发一个事件，从而允许您在 javascript / jQuery 中侦听更改并采取相应的行动。

```
localStorage.name = 'David'; 
```

将在 localStorage 中创建一个名为 name 的变量，其值为 David。关闭浏览器，重新打开并 console.log 变量，你会发现它仍然存在。

请注意 localStorage，尽管以前的文档只会存储数据字符串，并且如果您想存储/检索它们，则必须对对象进行序列化和反序列化。

实际规格要大得多，您可以在此处阅读更多信息：

[HTML5 存储 API](http://diveintohtml5.info/storage.html)

[使用 HTML5 存储](http://www.webmonkey.com/2011/04/how-to-use-html5s-local-storage-tools-today/)

[使用 HTML5 存储的提示和技巧](http://html5doctor.com/storing-data-the-simple-html5-way-and-a-few-tricks-you-might-not-have-known/)

如果您不是在寻找持久数据，您可以使用 jQuery 的`.data()`方法来存储针对 DOM 节点的任意数据以供以后使用。这非常有用，当然如果您正在开发小部件并且需要针对 DOM 节点存储非持久状态。

额外的：

缺少 ie7 和 ie8 支持，但您可以使用诸如 modernizr.js 之类的框架来强制旧版浏览器与 HTML 5 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:50:12.047

我不知道为什么每个人都告诉你只使用 HTML5 本地存储。您的问题是安全问题之一。

请参阅我上面的评论，以获取社区 wiki 链接。另请参阅[https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet](https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet)和[http://dev.w3.org/html5/webstorage/#security-localStorage](http://dev.w3.org/html5/webstorage/#security-localStorage)

# php - 使用 htaccess 仅重写有效的 url

> ID：14702574
> 
> 赞同：1
> 
> 时间：2013-02-05T07:53:14.393
> 
> 标签：php, apache, .htaccess, rewrite

现在我正在使用下面给出的正则表达式

`RewriteRule ^(love-wallpaper.php|quotes-wallpaper.php)+ wallpapers.php`

重写`love-wallpaper.php`和`quotes-wallpaper.php`_`wallpapers.php`

我希望上面的规则不应该重写错误的 url，`love-wallpaper.php&anything`
但应该重写为 url，`love-wallpaper.php?anything`比如`wallpapers.php`

如何才能做到这一点？

示例：
URL like`love-wallpaper.php#asdfasdfasdf`不应该重写，`wallpapers.php`
但 url like`love-wallpaper.php?aasdbfsbdf`应该重定向到`wallpapers.php`
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:08:11.593

我不太清楚你在找什么，但是如果你想在`quotes-wallpaper.php`使用下面的规则后匹配一个有效的查询字符串

```
RewriteRule ^(love-wallpaper.php|quotes-wallpaper.php)+(?![\w&#\$!\(\)]+) wallpapers.php 
```

它不会匹配`&`,`#`等。如果您不希望它们匹配和重写，则可以`$`在`wallpaper.php`正则表达式字符类中放置更多符号，`[]`反之亦然。

注意：这将完全忽略传入 url 中的任何查询字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:13:24.033

您可能正在寻找以下内容：

```
RewriteRule ^(love|quotes)\-wallpaper\.php$ wallpapers.php [QSA] 
```

我也转义了这个`-`字符，因为它在正则表达式中保留。

正则表达式/htaccess 的解释：

*   `^`- “以。。开始”
*   `(love|quotes)`- 字符串“love”或字符串“quotes”
*   `\-wallpaper\.php``-`- 带有并`.`转义的字符串“-wallpaper.php” 。
*   `$`- “结束必须在这里”
*   `[QSA]`将您的 URL 参数 ( `url.php?my=parameter`) 发送到`wallpapers.php`页面上。

您不能决定不匹配`url.php#hash`，因为 URL 哈希不能用于 .htaccess 匹配，因为它们永远不会发送到服务器 - 请参阅[Redirect URL with hash using .htaccess file](https://stackoverflow.com/questions/8185188/redirect-url-with-hash-using-htaccess-file)

# css - 文本阴影应用于 iOS 浏览器中的 Google Web 字体

> ID：14702575
> 
> 赞同：1
> 
> 时间：2013-02-05T07:53:19.930
> 
> 标签：css, ios6

我在 iOS 上遇到了应用到 Google Web 字体的标准文本阴影效果的问题。字体在字体颜色的两层后面出现双倍阴影。这在我的非视网膜 ipad mini 上最为明显。我在我的笔记本电脑浏览器上没有看到这样的行为。

关于为什么会发生这种情况的任何建议？

这是一个易于在 ios 浏览器中输入的演示：[链接](http://crosby-generic-staging.s3-website-us-east-1.amazonaws.com/)

现在，我只有一个 * 选择器，使用媒体查询在较小的屏幕尺寸上剥离所有文本的文本阴影。也许有更好的补丁解决这个问题。

**这是 iPad mini 的屏幕截图：** [![照片.jpg](../Images/c0efcd74b3120e85327f8fda39a71430.png)](https://i.stack.imgur.com/96boH.jpg)

**截屏** ![屏幕截图（iPhone 4S）](../Images/84ffacbe85ce8f3493d86304f5a387d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:52:02.950

搜索并没有让我到任何地方，它可能与与文本大小相比的百分比偏移量有关（当您将文本从 32px 缩放到 20px 时，2px 是一个更大的比例）。您可以尝试使用 % 代替 px 进行试验，或者只添加以下内容。

在您的响应式 CSS 中，添加

```
@media (max-width: 767px) {
    text-shadow: text-shadow: -1px 1px 1px;
} 
```

这在较小的文本上呈现得更好

**编辑** 我看到你已经用截图更新了你的问题。此偏移渲染错误可能与[此处描述](https://css-tricks.com/forums/discussion/10449/weird-mobile-safari-font-face-problem-font-doubled-and-offset-to-the-left-/p1)的相同。问题似乎是您正在使用`font-weight: bold`并且 Mobile Safari 无法处理它。解决方案似乎是将其设置为正常。

```
/*reset for mobile browsers */
h1, h2, h3, h4, h5, h6 {
    font-weight: normal;
} 
```

# javascript - 拖放时更改表格行颜色

> ID：14702578
> 
> 赞同：0
> 
> 时间：2013-02-05T07:53:34.653
> 
> 标签：javascript, jquery, css

我有 5 种不同的颜色：例如。(1) 红色，(2) 橙色，(3) 蓝色，(4) 黄色，(5) 和绿色。这些颜色只会为我的前 5 个数据着色。如果我将数据拖放到 2 号，它必须是橙色等....如何使用 css 或 js 实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:00:38.387

要为表格行着色，请尝试以下操作：

假设你有一张这样的表：

```
<table>
    <tr><td>Some text! 1</td></tr>
    <tr><td>Some text! 2</td></tr>
    <tr><td>Some text! 3</td></tr>
    <tr><td>Some text! 4</td></tr>
    <tr><td>Some text! 5</td></tr>
</table> 
```

然后，使用 CSS 设置这些行的样式：

```
table tr:nth-child(1){ background: red;    } /* colour the first row "red" */
table tr:nth-child(2){ background: orange; } /* colour the second row "orange" */
table tr:nth-child(3){ background: blue;   } /* etc... */
table tr:nth-child(4){ background: yellow; }
table tr:nth-child(5){ background: green;  } 
```

**[结果](http://fiddle.jshell.net/bAYuU/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:00:24.733

从这个想法开始：

```
<style>
    #sort-handler:hover { opacity:0.1 }
    .color {
        width: 7px;
    }
    tbody tr:nth-child(1) td.color {
        background-color: #3366CC;
    }
    tbody tr:nth-child(2) td.color {
        background-color: #DC3912;
    }
    tbody tr:nth-child(3) td.color {
        background-color: #FF9928;
    }
    tbody tr:nth-child(4) td.color {
        background-color: #0F9627;
    }
    tbody tr:nth-child(5) td.color {
        background-color: #990099;
    }
</style>

<table>
    <thead>
        .......
    </thead>

    <tbody>
        <tr>
            <td class="color"></td>
            <td><img src="arrow.gif" style="cursor:move;" class="sort-handle"
                    onmousedown="event.preventDefault ? event.preventDefault() : event.returnValue = false"></td>
            <td>
                ......
            </td>
        </tr>
    </tbody>
</table>

<script>
    //Your drag and drop js
</script> 
```

# filepicker.io - filepicker.makeDropPane 的安全凭证

> ID：14702583
> 
> 赞同：0
> 
> 时间：2013-02-05T07:53:54.340
> 
> 标签：filepicker.io

[拖放窗格小部件文档](https://developers.filepicker.io/docs/web/#widgets-droppane)不 引用安全策略或签名。

我希望 makeDropPane 采用 Javascript API 等策略和签名选项。

是否可以通过 filepicker.makeDropPane() 进行安全上传？如果没有，是否有可能拥有一个使用安全策略的独立拖放窗格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:07:42.457

随后，此代码已被推送，现在可以为 makeDropPane 传递安全策略和签名。

# .net - 请为单用户应用程序建议数据存储

> ID：14702587
> 
> 赞同：3
> 
> 时间：2013-02-05T07:54:14.047
> 
> 标签：.net, sqlite, storage, hdf5

我正在寻找一种数据存储选项，用于在我的 C# 应用程序的可查询存储中存储 ECG（1000 个样本/秒）和其他患者数据（例如血压、体温等 - 以低得多的采样率采样）。

我已经评估了 SQLite（这本身就是一个很好的选择），但我正在寻找一些可以满足以下要求的选项：

1.  存储空间小 - ECG 通常以 1000 个样本/秒的速度进行采样，我需要将 ECG 数据存储 24 - 48 小时（约 82 至约 1.62 亿个数据样本）。在 SQLite 上，它占用了大量空间。

2.  我应该能够快速读取这些数据的一部分（从 - 到时间戳）。

3.  我应该能够修改部分数据，而不必从那时起写入所有数据。

我也看过 HDF5，但还没有真正了解如何从 C#.net 使用它。

寻找实用的建议。

谢谢，

维克拉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:35:56.957

您的用例似乎非常适合 HDF5。

> 1.  存储空间小 - ECG 通常以 1000 个样本/秒的速度进行采样，我需要将 ECG 数据存储 24 - 48 小时（约 82 至约 1.62 亿个数据样本）。在 SQLite 上，它占用了大量空间。

HDF5 允许非常高效和紧凑的存储。此外，您可以启用不同的压缩算法/过滤器（gzip、bzip 等），而不会对性能造成太大影响。

> 2.  我应该能够快速读取这些数据的一部分（从 - 到时间戳）。

这实际上是 HDF5 中的一个主要用例。从数据集中切片数据可以很容易地非常快速地完成。

> 3.  我应该能够修改部分数据，而不必从那时起写入所有数据。

可以扩展数据集并就地修改数据（虽然它不如 SQLite 中的 UPDATE 语句方便）。但是，关于删除数据有一些注意事项。（有关更多信息，请参见[此处）](https://stackoverflow.com/a/448050/356594)

如果你有很多元信息，你可以考虑将它们存储在 SQLite 中，并将这些记录连接到包含原始数据的 HDF5 文件。或者，您也可以将这些元信息作为属性存储在 HDF5 中的节点/数据集上，并避免一起使用 SQLite。

关于 HDF5 的唯一大问题/挑战是并发写入操作。因此，如果您需要对单个 HDF5 文件进行并发写入操作，它会变得更加复杂。

要在 .NET 中使用 HDF5，您可以查看此[线程](https://stackoverflow.com/questions/7939723/c-sharp-hdf5-example-code)。

# core-plot - Coreplot X 轴和 Y 轴的交点

> ID：14702590
> 
> 赞同：0
> 
> 时间：2013-02-05T07:54:24.047
> 
> 标签：core-plot

使用 Mac OS 框架，我的 x 和 y 轴在零处相交（X 在 Y = 0 处与 Y 轴相交，反之亦然），但 Y 轴位于屏幕最左侧不可见的位置。

是否可以从绘图区域的左侧为 Y 轴指定一个固定的边距，而不管 X 范围如何（并且仍然保持两个轴分别在 0 处相交）？

我想到的一种方法（强制 Y 轴留出余量）是通过为低 X 指定一个负值，但是在进行大范围的 X（100 与 1000）时，这不能很好地缩放。我需要一种更简单的方法来可预测地使 X 在图表中的固定像素偏移处与 Y 相交以一致地呈现它。

我试过使用 y.orthogonalCoordinateDecimal = 0 。它做了它应该做的事情（使 y 在 0 处与 X 相交）但是图中的实际交点不是我想要的。我希望能够控制该交叉点的位置，例如 X 为 100 像素， y 为 80 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:00:14.007

使用`axisConstraints`来保持图形左侧的 y 轴：

```
y.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

如果您始终`xRange`将绘图空间的位置设置为零，这将提供您想要的外观。

# eclipse - 从eclipse自动启动jconsole

> ID：14702593
> 
> 赞同：2
> 
> 时间：2013-02-05T07:54:38.647
> 
> 标签：eclipse, jmx, jconsole

我想知道当我从 Eclipse 运行或调试应用程序时是否有插件或有人有脚本来自动启动 jconsole。也许也添加类路径。我用谷歌搜索但没有找到任何东西。在大多数情况下，这表明它不起作用或很容易问：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:26:05.703

有一个**VisualVM**插件( [http://visualvm.java.net/eclipse-launcher.html](http://visualvm.java.net/eclipse-launcher.html) ) 正是这样做的。

鉴于**VisualVM**是**jConsole**的超集，并且它还原生支持**jConsole**插件，您可以安全地使用**VisualVM**而不是**jConsole**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-11T09:58:33.090

这不是关于自动启动，而是关于通过jvisualvm连接eclipse中运行的程序。

在 Eclipse 中，在 Main 类 java 文件中执行以下操作，然后作为 java 应用程序运行。

```
Right click --> Run As --> Run Configuration --> Arguments --> VM argumanets --> Add the below

-Djava.rmi.server.hostname=hostname -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=10001 
```

然后从 JDK bin 目录打开 java visaul vm。在那里面

```
File --> Add JMX Connection --> In connection text box --> localhost:10001 
```

这将立即开始您的分析。

# c# - VisualStudio 2012 - C# 缺少方法

> ID：14702594
> 
> 赞同：-2
> 
> 时间：2013-02-05T07:54:48.957
> 
> 标签：c#, visual-studio

我有带有.net framework 4.5和visual studio 2012的win 8系统我在使用metro风格的应用程序时遇到了一些问题，当我搜索问题时，我在msdn中发现了一些属性和事件，如textBox.keyPressed、Control.ModifierKeys还有更多。视觉工作室说方法不存在。我是否必须下载课程或其他东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:28:24.153

用于开发 Windows Store 应用程序的框架是 .Net 4.5 框架的子集。

您可以检查它们是否存在于 msdn 中。

例如`System.Windows.Forms.dll`，Windows Store 应用程序不存在实例库，因此`Control.KeyPress`事件不存在，因为您不能在 Windows Store 应用程序中使用上述 dll。

# ajax - AJAX 从 MVC4 开始

> ID：14702595
> 
> 赞同：1
> 
> 时间：2013-02-05T07:54:54.403
> 
> 标签：ajax

嗨朋友们，我将在一个 asp.net MVC4 应用程序上工作，由于我还没有实时使用 AJAX，并且很快就要开始工作，所以我正在寻找一些文章\教程\示例来开始。对此的任何建议或帮助都会对 gr8 有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T13:54:13.640

如果你打算成为 jQuery 从你的 javascript 进行异步调用，一个好去处是 jQuery 网站

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - 这两种说法有什么区别？

> ID：14702596
> 
> 赞同：0
> 
> 时间：2013-02-05T07:54:55.960
> 
> 标签：c#, if-statement, conditional-operator

> **可能重复：**
> [C# ?：条件运算符](https://stackoverflow.com/questions/1171717/c-sharp-conditional-operator)

* * *

先声明：

```
if(dr["AskingPriceFrom"]!=System.DBNull.Value) 
    objFilters.AskingPriceFrom=Convert.ToDecimal(dr["AskingPriceFrom"]);
else 
    objFilters.AskingPriceFrom=null; 
```

声明二：

```
objFilters.AskingPriceFrom=Convert.ToDecimal(
    dr["AskingPriceFrom"]!=System.DBNull.Value ? dr["AskingPriceFrom"] : null
    ); 
```

**这两种说法有什么区别？**

在第一个语句中，如果在*if-else*条件下 value 为空，则正确存储*null*值；但是，如果在第二个条件下 value 为空，那么它不会存储*null*值，而是存储`0`. `AskingPriceFrom`是一个 get-set 字段存储*十进制*值。我试图仅`dr["AskingPriceFrom"]`在问号之后进行转换，但该语句给了我一个错误。

**有没有办法保护*空*值不转换为*十进制*？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:56:34.123

显然`Convert.ToDecimal(null) == 0`

//编辑：这应该工作

```
objFilters.AskingPriceFrom =  
      (dr["AskingPriceFrom"] != System.DBNull.Value) ? 
       Convert.ToDecimal(dr["AskingPriceFrom"]) : null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:56:07.937

这是因为 Decimal 不可为空。您应该强制转换为，`decimal?`以便当您将 null 转换为该类型时，它不会返回默认值 0，而是返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:59:01.720

在内联版本（*三元*）中，如果它为**空**，您将获得：

```
objFilters.AskingPriceFrom =  Convert.ToDecimal(null); 
```

这可能会导致错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T08:19:26.287

您应该在此处阅读`Convert.ToDecimal`文档[http://msdn.microsoft.com/en-us/library/e6440ed8.aspx](http://msdn.microsoft.com/en-us/library/e6440ed8.aspx)。

`Convert.ToDecimal`返回`decimal`或抛出异常，但在您的情况下，您需要返回类型为`Nullable<decimal>`.

你可以使用这样的代码：

```
decimal? result;
if (Convert.IsDBNull(dr["AskingPriceFrom"]))
{
   result= null;
}
else
{
   result = dr.GetDecimal(reader.GetOrdinal("AskingPriceFrom"));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:03:02.440

非常感谢[https://stackoverflow.com/users/1336654/jeppe-stig-nielsen](https://stackoverflow.com/users/1336654/jeppe-stig-nielsen)。这工作正常。

```
objFilters.AskingPriceFrom = dr["AskingPriceFrom"] != System.DBNull.Value ? Convert.ToDecimal(dr["AskingPriceFrom"]) : (decimal?)null; 
```

# highcharts - Highstock 时区问题

> ID：14702598
> 
> 赞同：1
> 
> 时间：2013-02-05T07:55:42.610
> 
> 标签：highcharts, highstock

我有使用 Highstock JS 库的 GWT 应用程序。我想实现以下用例：

用户从 DateField 和 TimeField 控件 (GXT) 中选择开始和结束日期和时间。这些控件使用 java.util.Date 值进行操作。我用 new Date() 初始化结束日期，用当前日期减去最后一小时来初始化开始日期。控制在用户浏览器的时区（例如 GMT+4）中显示日期。有一个控件可以选择时区来构建图表：本地或用户定义。

我需要在选定的时区构建 Highstock 图表。数据以 UTC 格式存储在数据库中。

为了显示正确的图表，我需要实施哪些设置和时间调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:38:56.730

一般来说，对所有时间戳使用 UTC 并根据用户时区或在浏览器本地执行本地更改是正确的。如果您在创建 Highstock 图表时设置[global.useUTC](http://api.highcharts.com/highstock#global.useUTC)，则所有日期都将以 UTC 时区处理。

# python - 安装抓斗，网站抓取库

> ID：14702606
> 
> 赞同：0
> 
> 时间：2013-02-05T07:56:09.357
> 
> 标签：python, dependencies

我试图找到可以帮助我自动填写表格的库。有人建议我从[http://pypi.python.org/pypi/grab/0.4.8](http://pypi.python.org/pypi/grab/0.4.8)获取 Grab（网站抓取库） 。我解压缩了 tar.gz 然后尝试了以下，

```
python setup.py install
Traceback (most recent call last):
File "setup.py", line 1, in <module>
from setuptools import setup, find_packages
ImportError: No module named setuptools 
```

有谁知道如何安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:27:48.203

错误很清楚也很简单。

> ImportError：没有名为 setuptools 的模块

请检查您是否为 python3 或 python2 安装了 setuptools。

archlinux 上的一个例子，（python => python3），（python2 => python2）

小心那个

请尝试使用“python2 setup.py install”

# regex - Perl Regex 正则表达式匹配字符串除外，不匹配字符串

> ID：14702607
> 
> 赞同：4
> 
> 时间：2013-02-05T07:56:31.493
> 
> 标签：regex, perl, pattern-matching

任何人都可以帮我解决这个正则表达式吗？我需要一个表达式来匹配最后不包含“Created”字符串的行。该脚本用于阅读某些源代码的标题。

```
$string = "* JAN-01-2001   bugsbunny     1234     Created Module";
#$string = "* DEC-12-2012   bugsbunny     5678     Modified Module";
if($string =~ /^\*\s+(\w\w\w-\d\d-\d\d\d\d)\s+(\w+)\s+(\d+)\s+(?!Created)/){
    print "$1\n$2\n$3\n$4\n";
} else {
    print "no match\n";
} 
```

使用第一个 $string 定义时，我需要匹配失败，因为它的末尾有单词“Created”。当使用第二个 $string 定义时，它应该通过，我需要提取日期（$1）、用户（$2）、更改编号（$3）和描述（$4）。

上面的表达式不起作用。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:59:25.433

Close:

```
/^\*\s+(\w{3}-\d{2}-\d{4})\s+(\w+)\s+(\d+)\s+(?!.*Created)/ 
```

You need to allow any number of non-newline characters before `Created`, therefore the `.*`.

Otherwise, the regex would simply back up by one character when matching `\s+`, so the following text would be `" Created"`, and then `(?!Created)` would match.

See it [here](http://regex101.com/r/rF2cI8); notice how the match stops one space before `Created`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:44:07.573

您可以用来完成这项工作的另一个技巧是使用`(?>...)`禁用回溯的组。禁用回溯意味着任何使用`+`or的表达式`*`都会贪婪地吃掉它找到的任何东西，*如果模式失败，它永远不会回去尝试其他东西*。这意味着“创建”之前的所有空白都被吃掉了，所以`(?!Created)`正则表达式的部分总是出现在正确的位置。

```
if($string =~ /^(?>\*\s+(\w\w\w-\d\d-\d\d\d\d)\s+(\w+)\s+(\d+)\s+)(?!Created)/){
    print "$1\n$2\n$3\n";
} else {
    print "no match\n";
} 
```

这还具有使您的正则表达式更快的额外好处。

这种方法不适用于所有类型的问题，因为许多正则表达式需要能够回溯才能正确匹配。但这对这个很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T06:51:06.707

```
$string = "* JAN-02-2001   bugsbunny     1234     Created Module";
$string = "* DEC-12-2012   bugsbunny     5678     Modified Module";
if($string =~ /^\*\s+(\w\w\w-\d\d-\d\d\d\d)\s+(\w+)\s+(\d+)\s+([^Created]|Modified)\s+(\w+)/){
    print "$1\n$2\n$3\n$4\n";
}
else {
    print "no match\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:47:59.363

另一种选择是`split`测试“已创建”的描述：

```
use strict;
use warnings;

#my $string = "* JAN-01-2001   bugsbunny     1234     Created Module";
my $string = "* DEC-12-2012   bugsbunny     5678     Modified Module";

my ( undef, $date, $user, $change, $desc ) = split ' ', $string, 5;

if ( $desc !~ /^Created/ ) {
    print "$date\n$user\n$change\n$desc\n";
}
else {
    print "no match\n";
} 
```

输出：

```
DEC-12-2012
bugsbunny
5678
Modified Module 
```

# php - JQ中具有可选类别的组合框

> ID：14702610
> 
> 赞同：0
> 
> 时间：2013-02-05T07:56:34.680
> 
> 标签：php, jquery, drop-down-menu

我得到了 gorups 和 cilds。我需要一个下拉菜单，我可以同时选择组和子组，但我可以查看它是否是主要组。我做了这样的事情：

![在此处输入图像描述](../Images/73f769350781de9f3f669399332ce1c4.png)

我想知道是否有更好的方法来做到这一点，或者即使有 JQ 插件？欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:04:16.163

看看这个[mcDropdown jQuery](http://www.givainc.com/labs/mcdropdown_jquery_plugin.htm) .. 易于使用，适用于 jQuery v1.2.6（或更高版本），易于定制。

# c# - Socket Pending() method is not consistent when remote is ON

> ID：14702613
> 
> 赞同：0
> 
> 时间：2013-02-05T07:56:45.637
> 
> 标签：c#, asp.net, sockets

We have web application , it works as Socket Listner. I wanted to check before the AcceptSocket , whether there is any Client Socket available to connect to this listener. I want to display a message if there is no Client Socket to connect and cancel send/receive of data.

For this issue I used Pending Method of TcpListener class, but this works for me partly.

It works well if remote is not available, it return false. But when remote is available then sometimes Pending () method returns false. I want it to return true when remote is available all the time.

This is my code: public bool Communicationcation() {

```
 string strSiteID = "SiteID";
    socket.Start();

   if(!socket.Pending())
    {
        Console.WriteLine("Sorry, no connection requests have arrived");
        return false;

    }
    else
    {
        client = socket.AcceptSocket();

        if (client.Connected == true)
        {
            // int nSiteID =  int.Parse(ConfigurationSettings.AppSettings.Get("SiteID"));
            object dSiteID = GetSiteSetting(ref strSiteID);
            IPEndPoint clientep = (IPEndPoint)client.RemoteEndPoint;
            WriteLog(string.Format("Connected with {0} at port {1}", clientep.Address, clientep.Port));
            string strWelcome = STARTMESSAGE + "WHOAMI" + "     " + dSiteID + " " + dSiteID + FINISHMESSAGE;
            byte[] data = new byte[1024];
            data = Encoding.ASCII.GetBytes(strWelcome);
            int i = client.Send(data, data.Length, SocketFlags.None);
            WriteLog(String.Format("Message sent {0} bytes!", i));
            //Get reply from the Connected cleint.
            byte[] bytes = new byte[1024];
            i = client.Receive(bytes, bytes.Length, SocketFlags.None);
            if (i != -1)
            {
                WriteLog(string.Format(System.Text.Encoding.UTF8.GetString(bytes)));
            }
        }
        return true;
    }
} 
```

TcpListener class Pending method always returns false though Remote is running. If we run the code without debug.but when we debug the code then Pending method is inconsistent and returns some time false and some time true.

# mongodb - mongoimport: append source field

> ID：14702615
> 
> 赞同：0
> 
> 时间：2013-02-05T07:56:48.600
> 
> 标签：mongodb, import

With mongoimport I import the data of several external instances.

Does mongoimport allow me to add a field like source:"where-the-data-comes-from" to each document which is imported?

I.e. if i import the data of server A and B, I would like to store source:"A" or source:"B" to each document.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:29:10.317

不可以。但是，您可以从命令行执行此操作。通过运行创建一个文件“header.txt”，其中包含例如（您可以从现有的 csv 创建它）

`cat <(head -1 test.csv | tr "," "\n") <(echo source-a) > header.txt`

header.txt 应该如下所示：
`field_a`
`field_b`
`.......`
`source`

*请注意，我已在此文档中附加了一个“来源”字段。现在你可以运行命令了（假设你已经安装了 sed）

`sed 's/$/,source-a/' test.csv | mongoimport -d test-db -c test-cl --type csv --fieldFile header.txt`

如果您的文档中已经有标题行，请运行

`sed '1d' test.csv | sed 's/$/,source-a/' | mongoimport -d test -c test --type csv --fieldFile header.txt`相反 - 'source-a' 是您想要在此文档中使用的标签。您可以轻松地在 bash 中编写脚本，以便只为每个导入作业提供源代码和 csv。

# php - WordPress Coding And Content Excerpt

> ID：14702616
> 
> 赞同：0
> 
> 时间：2013-02-05T07:57:06.547
> 
> 标签：php, wordpress

So I've written a function to handle excerpts but just for the front page.

```
http://stevefleming.co.uk/ 
```

And the function is...

```
function excerpt_filter2($limit) {

$content = get_the_content();
$content = preg_replace("/<img[^>]+\>/i", "", $content);
$excerpt = explode(' ', $content, $limit);
if (count($excerpt)>=$limit) {
    array_pop($excerpt);
    $excerpt = implode(" ",$excerpt) . "...&nbsp;<a href='". get_permalink(the_ID()) ."'> continue reading</a>";
} else {
    $excerpt = implode(" ",$excerpt);
}
$excerpt = preg_replace('`\[[^\]]*\]`','',$excerpt);
echo $excerpt;
} 
```

The problem, as you can see on the front page, is that it keeps appending the post id to the front of the text.

I've tried to debug the code and dumped the $excerpt array just before the implode is called to check that the id wasn't somehow being placed in the array... it wasn't.

I'm at a loss as to how the post id is getting there.

Any ideas?

Steve

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:59:51.457

The function `the_ID()` automatically outputs the result. Change this line:

```
$excerpt = implode(" ",$excerpt) . "...&nbsp;<a href='". get_permalink(the_ID()) ."'> continue reading</a>"; 
```

To:

```
$excerpt = implode(" ",$excerpt) . "...&nbsp;<a href='". get_permalink(get_the_ID()) ."'> continue reading</a>"; 
```

Check out [the codex](http://codex.wordpress.org/Function_Reference/get_the_ID) for more info, Wordpress usually has an alternate function that won't output the result in the form: `get_*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:02:14.173

你的代码在这里

```
$excerpt = implode(" ",$excerpt) . "...&nbsp;<a href='". get_permalink(the_ID()) ."'> continue reading</a>"; 
```

您正在使用

```
the_ID() 
```

这将与帖子的 ID 一致，因此请尝试将其更改为

```
get_the_ID() 
```

希望这就是你所面临的。:) 干杯

# c# - 如何在 Windows 8 中配置虚拟键盘？

> ID：14702620
> 
> 赞同：0
> 
> 时间：2013-02-05T07:57:28.290
> 
> 标签：c#, windows-8, windows-runtime

在 Windows 8 的数据输入应用程序中，用户大量使用虚拟键盘。我需要优化数据输入。现在，当用户输入一个字段时，虚拟键盘就会出现。如何将键盘配置为仅显示应用程序中的数字或数字+字母？

有些字段是数字的，因此不需要字母。

我想为表单中的每个字段配置键盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:13:22.333

您可以为文本框定义不同的[输入范围](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.inputscopenamevalue)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:15:49.733

您可以在文本框上设置 InputScope。

```
<TextBox InputScope="Number" /> 
```

# google-maps - 使用 Google Maps Android API v2 在两点之间绘制路径

> ID：14702621
> 
> 赞同：83
> 
> 时间：2013-02-05T07:57:29.180
> 
> 标签：google-maps, path, google-maps-markers, routes, google-maps-android-api-2

Google 更改了其 Android 地图 API 并引入了 API V2。以前的绘制路径代码不适用于 API V2。

我已经设法用 API V2 绘制了一条路径。我已经搜索了很多解决方案，但没有找到任何答案。所以我正在分享它的答案。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-02-05T07:58:24.157

首先，我们将获得必须在其间绘制路线的源点和目的地点。然后我们将这些属性传递给下面的函数。

```
 public String makeURL (double sourcelat, double sourcelog, double destlat, double destlog ){
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.googleapis.com/maps/api/directions/json");
        urlString.append("?origin=");// from
        urlString.append(Double.toString(sourcelat));
        urlString.append(",");
        urlString.append(Double.toString( sourcelog));
        urlString.append("&destination=");// to
        urlString.append(Double.toString( destlat));
        urlString.append(",");
        urlString.append(Double.toString( destlog));
        urlString.append("&sensor=false&mode=driving&alternatives=true");
        urlString.append("&key=YOUR_API_KEY");
        return urlString.toString();
 } 
```

此函数将生成我们将发送的 url 以获取 Direction API 响应。然后我们将解析该响应。解析器类是

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";
    // constructor
    public JSONParser() {
    }
    public String getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            json = sb.toString();
            is.close();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }
        return json;

    }
} 
```

此解析器将返回我们的字符串。我们会这样称呼它。

```
JSONParser jParser = new JSONParser();
String json = jParser.getJSONFromUrl(url); 
```

现在我们将把这个字符串发送到我们的drawpath函数。绘制路径函数是

```
public void drawPath(String  result) {

    try {
            //Tranform the string into a json object
           final JSONObject json = new JSONObject(result);
           JSONArray routeArray = json.getJSONArray("routes");
           JSONObject routes = routeArray.getJSONObject(0);
           JSONObject overviewPolylines = routes.getJSONObject("overview_polyline");
           String encodedString = overviewPolylines.getString("points");
           List<LatLng> list = decodePoly(encodedString);
           Polyline line = mMap.addPolyline(new PolylineOptions()
                                    .addAll(list)
                                    .width(12)
                                    .color(Color.parseColor("#05b1fb"))//Google maps blue color
                                    .geodesic(true)
                    );
           /*
           for(int z = 0; z<list.size()-1;z++){
                LatLng src= list.get(z);
                LatLng dest= list.get(z+1);
                Polyline line = mMap.addPolyline(new PolylineOptions()
                .add(new LatLng(src.latitude, src.longitude), new LatLng(dest.latitude,   dest.longitude))
                .width(2)
                .color(Color.BLUE).geodesic(true));
            }
           */
    } 
    catch (JSONException e) {

    }
} 
```

上面的代码将在 mMap 上绘制路径。decodePoly 的代码是

```
private List<LatLng> decodePoly(String encoded) {

    List<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng p = new LatLng( (((double) lat / 1E5)),
                 (((double) lng / 1E5) ));
        poly.add(p);
    }

    return poly;
} 
```

由于方向调用可能需要时间，所以我们将在异步任务中完成所有这些。我的异步任务是

```
private class connectAsyncTask extends AsyncTask<Void, Void, String>{
    private ProgressDialog progressDialog;
    String url;
    connectAsyncTask(String urlPass){
        url = urlPass;
    }
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        progressDialog = new ProgressDialog(MainActivity.this);
        progressDialog.setMessage("Fetching route, Please wait...");
        progressDialog.setIndeterminate(true);
        progressDialog.show();
    }
    @Override
    protected String doInBackground(Void... params) {
        JSONParser jParser = new JSONParser();
        String json = jParser.getJSONFromUrl(url);
        return json;
    }
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);   
        progressDialog.hide();        
        if(result!=null){
            drawPath(result);
        }
    }
} 
```

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-16T21:53:02.410

不知道我是否应该把这个作为答案......

我使用@Zeeshan0026 的解决方案来绘制路径...问题是，如果我绘制一次路径，然后我确实尝试再次绘制路径，两条路径都会显示并且这会继续...即使标记是路径也会显示已删除...而理想情况下，一旦绘制了新路径/删除了标记，旧路径不应该存在..

通过其他一些问题，我有以下解决方案

我在 Zeeshan 的课上添加了以下函数

```
 public void clearRoute(){

         for(Polyline line1 : polylines)
         {
             line1.remove();
         }

         polylines.clear();

     } 
```

在我的地图活动中，在绘制路径之前，我调用了这个函数。根据我的应用程序的示例用法是

```
private Route rt;

rt.clearRoute();

            if (src == null) {
                Toast.makeText(getApplicationContext(), "Please select your Source", Toast.LENGTH_LONG).show();
            }else if (Destination == null) {
                Toast.makeText(getApplicationContext(), "Please select your Destination", Toast.LENGTH_LONG).show();
            }else if (src.equals(Destination)) {
                Toast.makeText(getApplicationContext(), "Source and Destinatin can not be the same..", Toast.LENGTH_LONG).show();
            }else{

                rt.drawRoute(mMap, MapsMainActivity.this, src,
                        Destination, false, "en");
            } 
```

您可以`rt.clearRoute();`根据您的要求使用..希望它可以节省其他人的几分钟，并帮助一些初学者解决这个问题..

**完整的类代码**

见[github](https://github.com/zaffar-saffee/Android/blob/master/routes%20googleMaps%20v2/Route.java)

**编辑：** 这是来自 mainactivity 的部分代码..

```
case R.id.mkrbtn_set_dest:
                    Destination = selmarker.getPosition();
                    destmarker = selmarker;
                    desShape = createRouteCircle(Destination, false);

                    if (src == null) {
                        Toast.makeText(getApplicationContext(),
                                "Please select your Source first...",
                                Toast.LENGTH_LONG).show();
                    } else if (src.equals(Destination)) {
                        Toast.makeText(getApplicationContext(),
                                "Source and Destinatin can not be the same..",
                                Toast.LENGTH_LONG).show();
                    } else {

                        if (isNetworkAvailable()) {
                            rt.drawRoute(mMap, MapsMainActivity.this, src,
                                    Destination, false, "en");
                            src = null;
                            Destination = null;

                        } else {
                            Toast.makeText(
                                    getApplicationContext(),
                                    "Internet Connection seems to be OFFLINE...!",
                                    Toast.LENGTH_LONG).show();

                        }

                    }

                    break; 
```

**根据评论**编辑 2****

 **用法 ：

```
//variables as data members
GoogleMap mMap;
private Route rt;
static LatLng src;
static LatLng Destination;
//MapsMainActivity is my activity
//false for interim stops for traffic, google
// en language for html description returned

rt.drawRoute(mMap, MapsMainActivity.this, src,
                            Destination, false, "en"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-15T11:45:25.963

在下面的代码 midpointsList 是航点的 ArrayList

```
private String getMapsApiDirectionsUrl(GoogleMap googleMap, LatLng startLatLng, LatLng endLatLng, ArrayList<LatLng> midpointsList) {
    String origin = "origin=" + startLatLng.latitude + "," + startLatLng.longitude;

    String midpoints = "";
    for (int mid = 0; mid < midpointsList.size(); mid++) {
        midpoints += "|" + midpointsList.get(mid).latitude + "," + midpointsList.get(mid).longitude;
    }

    String waypoints = "waypoints=optimize:true" + midpoints + "|";

    String destination = "destination=" + endLatLng.latitude + "," + endLatLng.longitude;
    String key = "key=AIzaSyCV1sOa_7vASRBs6S3S6t1KofFvDhjohvI";

    String sensor = "sensor=false";
    String params = origin + "&" + waypoints + "&" + destination + "&" + sensor + "&" + key;
    String output = "json";
    String url = "https://maps.googleapis.com/maps/api/directions/" + output + "?" + params;

    Log.e("url", url);
    parseDirectionApidata(url, googleMap);
    return url;
} 
```

然后将这个url复制并粘贴到浏览器中检查下面的代码是解析url

```
 private void parseDirectionApidata(String url, final GoogleMap googleMap) {

    final JSONObject jsonObject = new JSONObject();

    try {

        AppUtill.getJsonWithHTTPPost(ViewMapActivity.this, 1, new ServiceCallBack() {
            @Override
            public void serviceCallBack(int id, JSONObject jsonResult) throws JSONException {

                if (jsonResult != null) {

                    Log.e("jsonRes", jsonResult.toString());

                    String status = jsonResult.optString("status");

                    if (status.equalsIgnoreCase("ok")) {
                        drawPath(jsonResult, googleMap);
                    }

                } else {

                    Toast.makeText(ViewMapActivity.this, "Unable to parse Directions Data", Toast.LENGTH_LONG).show();
                }

            }
        }, url, jsonObject);

    } catch (Exception e) {
        e.printStackTrace();

    }
} 
```

然后将结果传递给drawPath方法

```
 public void drawPath(JSONObject jObject, GoogleMap googleMap) {

    List<List<HashMap<String, String>>> routes = new ArrayList<List<HashMap<String, String>>>();
    JSONArray jRoutes = null;
    JSONArray jLegs = null;
    JSONArray jSteps = null;
    List<LatLng> list = null;
    try {

        Toast.makeText(ViewMapActivity.this, "Drawing Path...", Toast.LENGTH_SHORT).show();
        jRoutes = jObject.getJSONArray("routes");

        /** Traversing all routes */
        for (int i = 0; i < jRoutes.length(); i++) {
            jLegs = ((JSONObject) jRoutes.get(i)).getJSONArray("legs");
            List path = new ArrayList<HashMap<String, String>>();

            /** Traversing all legs */
            for (int j = 0; j < jLegs.length(); j++) {
                jSteps = ((JSONObject) jLegs.get(j)).getJSONArray("steps");

                /** Traversing all steps */
                for (int k = 0; k < jSteps.length(); k++) {
                    String polyline = "";
                    polyline = (String) ((JSONObject) ((JSONObject) jSteps.get(k)).get("polyline")).get("points");
                    list = decodePoly(polyline);
                }
                Log.e("list", list.toString());
                routes.add(path);
                Log.e("routes", routes.toString());
                if (list != null) {
                    Polyline line = googleMap.addPolyline(new PolylineOptions()
                            .addAll(list)
                            .width(12)
                            .color(Color.parseColor("#FF0000"))//Google maps blue color #05b1fb
                            .geodesic(true)
                    );
                }
            }
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

}

  private List<LatLng> decodePoly(String encoded) {

    List<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng p = new LatLng((((double) lat / 1E5)),
                (((double) lng / 1E5)));
        poly.add(p);
    }

    return poly;
} 
```

decode poly 函数是以编码形式对 Directions API 提供的点（纬度和经度）进行解码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-01T15:05:32.650

尝试以下解决方案来**绘制动画路径，**并**获取两点之间的时间和距离**。

**方向助手.java**

```
public class DirectionHelper {

    public List<List<HashMap<String, String>>> parse(JSONObject jObject) {

        List<List<HashMap<String, String>>> routes = new ArrayList<>();
        JSONArray jRoutes;
        JSONArray jLegs;
        JSONArray jSteps;
        JSONObject jDistance = null;
        JSONObject jDuration = null;

        try {

            jRoutes = jObject.getJSONArray("routes");

            /** Traversing all routes */
            for (int i = 0; i < jRoutes.length(); i++) {
                jLegs = ((JSONObject) jRoutes.get(i)).getJSONArray("legs");
                List path = new ArrayList<>();

                /** Traversing all legs */
                for (int j = 0; j < jLegs.length(); j++) {

                    /** Getting distance from the json data */
                    jDistance = ((JSONObject) jLegs.get(j)).getJSONObject("distance");
                    HashMap<String, String> hmDistance = new HashMap<String, String>();
                    hmDistance.put("distance", jDistance.getString("text"));

                    /** Getting duration from the json data */
                    jDuration = ((JSONObject) jLegs.get(j)).getJSONObject("duration");
                    HashMap<String, String> hmDuration = new HashMap<String, String>();
                    hmDuration.put("duration", jDuration.getString("text"));

                    /** Adding distance object to the path */
                    path.add(hmDistance);

                    /** Adding duration object to the path */
                    path.add(hmDuration);

                    jSteps = ((JSONObject) jLegs.get(j)).getJSONArray("steps");

                    /** Traversing all steps */
                    for (int k = 0; k < jSteps.length(); k++) {
                        String polyline = "";
                        polyline = (String) ((JSONObject) ((JSONObject) jSteps.get(k)).get("polyline")).get("points");
                        List<LatLng> list = decodePoly(polyline);

                        /** Traversing all points */
                        for (int l = 0; l < list.size(); l++) {
                            HashMap<String, String> hm = new HashMap<>();
                            hm.put("lat", Double.toString((list.get(l)).latitude));
                            hm.put("lng", Double.toString((list.get(l)).longitude));
                            path.add(hm);
                        }
                    }
                    routes.add(path);
                }
            }

        } catch (JSONException e) {
            e.printStackTrace();
        } catch (Exception e) {
        }

        return routes;
    }

    //Method to decode polyline points
    private List<LatLng> decodePoly(String encoded) {

        List<LatLng> poly = new ArrayList<>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            LatLng p = new LatLng((((double) lat / 1E5)),
                    (((double) lng / 1E5)));
            poly.add(p);
        }

        return poly;
    }
} 
```

**GetPathFromLocation.java**

```
public class GetPathFromLocation extends AsyncTask<String, Void, List<List<HashMap<String, String>>>> {

    private Context context;
    private String TAG = "GetPathFromLocation";
    private LatLng source, destination;
    private ArrayList<LatLng> wayPoint;
    private GoogleMap mMap;
    private boolean animatePath, repeatDrawingPath;
    private DirectionPointListener resultCallback;
    private ProgressDialog progressDialog;

    //https://www.mytrendin.com/draw-route-two-locations-google-maps-android/
    //https://www.androidtutorialpoint.com/intermediate/google-maps-draw-path-two-points-using-google-directions-google-map-android-api-v2/

    public GetPathFromLocation(Context context, LatLng source, LatLng destination, ArrayList<LatLng> wayPoint, GoogleMap mMap, boolean animatePath, boolean repeatDrawingPath, DirectionPointListener resultCallback) {
        this.context = context;
        this.source = source;
        this.destination = destination;
        this.wayPoint = wayPoint;
        this.mMap = mMap;
        this.animatePath = animatePath;
        this.repeatDrawingPath = repeatDrawingPath;
        this.resultCallback = resultCallback;
    }

    synchronized public String getUrl(LatLng source, LatLng dest, ArrayList<LatLng> wayPoint) {

        String url = "https://maps.googleapis.com/maps/api/directions/json?sensor=false&mode=driving&origin="
                + source.latitude + "," + source.longitude + "&destination=" + dest.latitude + "," + dest.longitude;
        for (int centerPoint = 0; centerPoint < wayPoint.size(); centerPoint++) {
            if (centerPoint == 0) {
                url = url + "&waypoints=optimize:true|" + wayPoint.get(centerPoint).latitude + "," + wayPoint.get(centerPoint).longitude;
            } else {
                url = url + "|" + wayPoint.get(centerPoint).latitude + "," + wayPoint.get(centerPoint).longitude;
            }
        }
        url = url + "&key=" + context.getResources().getString(R.string.google_api_key);

        return url;
    }

    public int getRandomColor() {
        Random rnd = new Random();
        return Color.argb(255, rnd.nextInt(256), rnd.nextInt(256), rnd.nextInt(256));
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = new ProgressDialog(context);
        progressDialog.setMessage("Please wait...");
        progressDialog.setIndeterminate(false);
        progressDialog.setCancelable(false);
        progressDialog.show();
    }

    @Override
    protected List<List<HashMap<String, String>>> doInBackground(String... url) {

        String data;

        try {
            InputStream inputStream = null;
            HttpURLConnection connection = null;
            try {
                URL directionUrl = new URL(getUrl(source, destination, wayPoint));
                connection = (HttpURLConnection) directionUrl.openConnection();
                connection.connect();
                inputStream = connection.getInputStream();

                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
                StringBuffer stringBuffer = new StringBuffer();

                String line = "";
                while ((line = bufferedReader.readLine()) != null) {
                    stringBuffer.append(line);
                }

                data = stringBuffer.toString();
                bufferedReader.close();

            } catch (Exception e) {
                Log.e(TAG, "Exception : " + e.toString());
                return null;
            } finally {
                inputStream.close();
                connection.disconnect();
            }
            Log.e(TAG, "Background Task data : " + data);

            //Second AsyncTask

            JSONObject jsonObject;
            List<List<HashMap<String, String>>> routes = null;

            try {
                jsonObject = new JSONObject(data);
                // Starts parsing data
                DirectionHelper helper = new DirectionHelper();
                routes = helper.parse(jsonObject);
                Log.e(TAG, "Executing Routes : "/*, routes.toString()*/);

                return routes;

            } catch (Exception e) {
                Log.e(TAG, "Exception in Executing Routes : " + e.toString());
                return null;
            }

        } catch (Exception e) {
            Log.e(TAG, "Background Task Exception : " + e.toString());
            return null;
        }
    }

    @Override
    protected void onPostExecute(List<List<HashMap<String, String>>> result) {
        super.onPostExecute(result);

        if (progressDialog.isShowing()) {
            progressDialog.dismiss();
        }

        ArrayList<LatLng> points;
        PolylineOptions lineOptions = null;
        String distance = "";
        String duration = "";

        // Traversing through all the routes
        for (int i = 0; i < result.size(); i++) {
            points = new ArrayList<>();
            lineOptions = new PolylineOptions();

            // Fetching i-th route
            List<HashMap<String, String>> path = result.get(i);

            // Fetching all the points in i-th route
            for (int j = 0; j < path.size(); j++) {
                HashMap<String, String> point = path.get(j);

                if (j == 0) {    // Get distance from the list
                    distance = (String) point.get("distance");
                    continue;
                } else if (j == 1) { // Get duration from the list
                    duration = (String) point.get("duration");
                    continue;
                }

                double lat = Double.parseDouble(point.get("lat"));
                double lng = Double.parseDouble(point.get("lng"));
                LatLng position = new LatLng(lat, lng);

                points.add(position);
            }

            // Adding all the points in the route to LineOptions
            lineOptions.addAll(points);
            lineOptions.width(8);
            lineOptions.color(Color.RED);
            //lineOptions.color(getRandomColor());

            if (animatePath) {
                final ArrayList<LatLng> finalPoints = points;
                ((AppCompatActivity) context).runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        PolylineOptions polylineOptions;
                        final Polyline greyPolyLine, blackPolyline;
                        final ValueAnimator polylineAnimator;

                        LatLngBounds.Builder builder = new LatLngBounds.Builder();
                        for (LatLng latLng : finalPoints) {
                            builder.include(latLng);
                        }
                        polylineOptions = new PolylineOptions();
                        polylineOptions.color(Color.RED);
                        polylineOptions.width(8);
                        polylineOptions.startCap(new SquareCap());
                        polylineOptions.endCap(new SquareCap());
                        polylineOptions.jointType(ROUND);
                        polylineOptions.addAll(finalPoints);
                        greyPolyLine = mMap.addPolyline(polylineOptions);

                        polylineOptions = new PolylineOptions();
                        polylineOptions.width(8);
                        polylineOptions.color(Color.WHITE);
                        polylineOptions.startCap(new SquareCap());
                        polylineOptions.endCap(new SquareCap());
                        polylineOptions.zIndex(5f);
                        polylineOptions.jointType(ROUND);

                        blackPolyline = mMap.addPolyline(polylineOptions);
                        polylineAnimator = ValueAnimator.ofInt(0, 100);
                        polylineAnimator.setDuration(5000);
                        polylineAnimator.setInterpolator(new LinearInterpolator());
                        polylineAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
                            @Override
                            public void onAnimationUpdate(ValueAnimator valueAnimator) {
                                List<LatLng> points = greyPolyLine.getPoints();
                                int percentValue = (int) valueAnimator.getAnimatedValue();
                                int size = points.size();
                                int newPoints = (int) (size * (percentValue / 100.0f));
                                List<LatLng> p = points.subList(0, newPoints);
                                blackPolyline.setPoints(p);
                            }
                        });

                        polylineAnimator.addListener(new Animator.AnimatorListener() {
                            @Override
                            public void onAnimationStart(Animator animation) {

                            }

                            @Override
                            public void onAnimationEnd(Animator animation) {
                                if (repeatDrawingPath) {
                                    List<LatLng> greyLatLng = greyPolyLine.getPoints();
                                    if (greyLatLng != null) {
                                        greyLatLng.clear();

                                    }
                                    polylineAnimator.start();
                                }
                            }

                            @Override
                            public void onAnimationCancel(Animator animation) {
                                polylineAnimator.cancel();
                            }

                            @Override
                            public void onAnimationRepeat(Animator animation) {
                            }
                        });
                        polylineAnimator.start();
                    }
                });
            }

            Log.e(TAG, "PolylineOptions Decoded");
        }

        // Drawing polyline in the Google Map for the i-th route
        if (resultCallback != null && lineOptions != null)
            resultCallback.onPath(lineOptions, distance, duration);
    }
} 
```

**方向点监听器**

```
public interface DirectionPointListener {
    public void onPath(PolylineOptions polyLine,String distance,String duration);
} 
```

现在在您的活动中使用以下代码绘制路径

```
private GoogleMap mMap;
private ArrayList<LatLng> wayPoint = new ArrayList<>();
private SupportMapFragment mapFragment;

mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);

@Override
    public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;

        mMap.setOnMapLoadedCallback(new GoogleMap.OnMapLoadedCallback() {
            @Override
            public void onMapLoaded() {
                LatLngBounds.Builder builder = new LatLngBounds.Builder();

                /*Add Source Marker*/
                MarkerOptions markerOptions = new MarkerOptions();
                markerOptions.position(source);
                markerOptions.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN));
                mMap.addMarker(markerOptions);
                builder.include(source);

                /*Add Destination Marker*/
                markerOptions = new MarkerOptions();
                markerOptions.position(destination);
                markerOptions.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED));
                mMap.addMarker(markerOptions);
                builder.include(destination);

                LatLngBounds bounds = builder.build();

                int width = mapFragment.getView().getMeasuredWidth();
                int height = mapFragment.getView().getMeasuredHeight();
                int padding = (int) (width * 0.15); // offset from edges of the map 10% of screen

                CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds, width, height, padding);

                mMap.animateCamera(cu);

                new GetPathFromLocation(context, source, destination, wayPoint, mMap, true, false, new DirectionPointListener() {
                    @Override
                    public void onPath(PolylineOptions polyLine, String distance, String duration) {
                        mMap.addPolyline(polyLine);
                        Log.e(TAG, "onPath :: Distance :: " + distance + " Duration :: " + duration);

                        binding.txtDistance.setText(String.format(" %s", distance));
                        binding.txtDuration.setText(String.format(" %s", duration));
                    }
                }).execute();
            }
        });
    } 
```

**输出**

[![在此处输入图像描述](../Images/5ae5c835e1203ccce787998d5ea75b94.png)](https://i.stack.imgur.com/Hr0Fp.gif)**

# ios - 'NSDate' 没有可见的@interface 声明选择器'initWithString:'

> ID：14702626
> 
> 赞同：3
> 
> 时间：2013-02-05T07:57:42.247
> 
> 标签：ios, objective-c, xcode

> **可能重复：**
> [NSDate initWithString](https://stackoverflow.com/questions/7770257/nsdate-initwithstring)

我写了以下代码行：

```
[[NSDate alloc] initWithString:@"2013-03-24 10:45:32 +0200"]; 
```

当我尝试编译时，我收到以下错误消息：

ARC 语义问题：“NSDate”没有可见的@interface 声明选择器“initWithString：”

在项目中有以下内容：

```
#import <Foundation/Foundation.h> 
```

为了确保包含该类，我尝试了以下行，该行编译没有问题：

```
[[NSDate alloc] init]; 
```

我的代码有什么问题？

XCode 4.6 版。
项目 iOS 6.1 中的基础 SDK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:02:30.397

iOS 平台的 NSDate 类中不存在 initWithString 函数，因为您需要首先使用 NSDateFormatter 指定一个日期格式化程序，它将日期和时间的文本表示形式转换为 NSDate 对象。使用这样的东西：

```
NSString *currentDateString = @"2013-03-24 10:45:32";
NSDateFormatter *dateFormater = [[NSDateFormatter alloc] init];
[dateFormater setDateFormat:@"yyyy-MM-DD HH:mm:ss"];
NSDate *currentDate = [dateFormater dateFromString:currentDateString]; 
```

# ruby-on-rails - Problems accessing a Model function in View

> ID：14702628
> 
> 赞同：0
> 
> 时间：2013-02-05T07:57:57.890
> 
> 标签：ruby-on-rails, ruby

I have a class, Teacher, that has multiple integer columns:

```
t.integer :a_students
t.integer :b_students
t.integer :c_students
t.integer :d_students
t.integer :f_students 
```

And I have a view that loops through all the teachers and states how many students are in their class. Now although I could add all the students in the view, just to make it look nicer I want to offload adding all the students into the model. I have the following model method:

```
 def count_students( teacher_id )
    t = Teacher.find(teacher_id)
    total = t.a_students + t.b_students + t.c_students + t.d_students + t.f_students
    total
  end 
```

If I'm not mistaken, I shouldn't be accessing model methods from the view - that should be left to the controller. But since its looping through, I'm a little lost on what to do in this case. Any Ideas?

Thanks Ben

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:09:37.923

在您的教师模型中，有一个类似这样的方法：

```
def total_students
  a_students + b_students + c_students + d_students + e_students + f_students
end 
```

然后在您看来，如果您有 t，一位特定的老师，您只需执行 t.total_students 即可获得您想要的总数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:07:37.153

教师模型类中的该方法将是一个实例方法。因此，您无需致电数据库即可找到老师，因为您已经拥有该信息：

```
def count_students
    total = a_students + b_students + c_students + d_students + f_students
end 
```

您还可以使用`self`. Ruby 还返回最后计算的值，因此您不需要最后的总计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:10:14.207

为什么不把你的代码移到你的控制器上，为什么你有这么多不同的学生呢？

如果您想从特定老师那里收集所有学生，这将是：

```
@teacher = Teacher.find(params[:teacher_id])
@students = @teacher.students.all 
```

但是，嘿，也许我只是误解了你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T08:07:28.977

在您的控制器中，您应该执行任何中间逻辑。这个循环的目的是什么？它是否返回总价值？如果是这样，为什么不能在控制器中执行此操作并将操作结果返回给视图？

# c++ - Can you pass a manipulator to a function?

> ID：14702629
> 
> 赞同：10
> 
> 时间：2013-02-05T07:58:00.410
> 
> 标签：c++, c++11, iostream, iomanip

I'd like to pass a list of manipulators to a function, something like this:

```
void print(const vector<std::smanip>& manips) {
  // ...
  for (auto m : manips)
    cout << m;
  // ...
} 
```

which would ideally be called by code something like this:

```
some_object.print({std::fixed, std::setprecision(2)})); 
```

g++ 4.7.0 says:

```
error: ‘std::smanip’ has not been declared 
```

Apparently, `smanip` isn't really defined in the standard, and C++11 compilers don't need to provide an explicit name for the type of manipulators. I tried declaring a type by leeching off of a known manipulator, like this:

```
typedef decltype(std::fixed) manip; 
```

This opened up a host of new error messages, including this one:

```
error: ‘const _Tp* __gnu_cxx::new_allocator< <template-parameter-1-1> 
>::address(__gnu_cxx::new_allocator< <template-parameter-1-1> >::const_reference)
const [with _Tp = std::ios_base&(std::ios_base&); __gnu_cxx::new_allocator<
<template-parameter-1-1> >::const_pointer = std::ios_base& (*)(std::ios_base&);
__gnu_cxx::new_allocator< <template-parameter-1-1> >::const_reference =
std::ios_base& (&)(std::ios_base&)]’ cannot be overloaded 
```

Should I just give up now, or is there a way to do this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T09:28:44.507

输出操纵器只是为某些实例`os << m`定义的任何类型。`basic_ostream`操纵器可以是一个函数（受 的`operator<<`重载`basic_ostream`），但它也可以是定义自己的任何类型`operator<<`。因此，我们需要执行类型擦除以捕获`operator<<`适当的`basic_ostream`实例化；最简单的方法是使用`std::function`lambda：

```
#include <iostream>
#include <iomanip>
#include <functional>
#include <vector>

template<typename S>
struct out_manipulator: public std::function<S &(S &)> {
   template<typename T> out_manipulator(T &&t): std::function<S &(S &)>(
      [=](S &i) -> S &{ return i << t; }) {}
   template<typename T> out_manipulator(T *t): std::function<S &(S &)>(
      [=](S &i) -> S &{ return i << t; }) {}    // for g++
   template<typename U> friend U &operator<<(U &u, out_manipulator &a) {
      return static_cast<U &>(a(u));
   }
};

void print(const std::vector<out_manipulator<std::ostream>> &manips) {
   for (auto m: manips)
      std::cout << m;
}

int main() {
   print({std::fixed, std::setprecision(2)});
   std::cout << 3.14159;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T09:09:35.780

您的操纵器可以具有几乎任意类型，因此您必须使用模板来处理它们。为了使用固定类型的指针或引用访问它们，您必须为所有这些模板使用公共基类。这种多态性仅适用于指针和引用，但您可能需要值语义，特别是用于将这些存储在包含中。所以最简单的方法是让一个`shared_ptr`处理内存管理，并使用另一个类向用户隐藏所有丑陋的细节。

结果可能如下所示：

```
#include <memory>
#include <iostream>

// an abstract class to provide a common interface to all manipulators
class abstract_manip {
public:
  virtual ~abstract_manip() { }
  virtual void apply(std::ostream& out) const = 0;
};

// a wrapper template to let arbitrary manipulators follow that interface
template<typename M> class concrete_manip : public abstract_manip {
public:
  concrete_manip(const M& manip) : _manip(manip) { }
  void apply(std::ostream& out) const { out << _manip; }
private:
  M _manip;
};

// a class to hide the memory management required for polymorphism
class smanip {
public:
  template<typename M> smanip(const M& manip)
    : _manip(new concrete_manip<M>(manip)) { }
  template<typename R, typename A> smanip(R (&manip)(A))
    : _manip(new concrete_manip<R (*)(A)>(&manip)) { }
  void apply(std::ostream& out) const { _manip->apply(out); }
private:
  std::shared_ptr<abstract_manip> _manip;
};

inline std::ostream& operator<<(std::ostream& out, const smanip& manip) {
  manip.apply(out);
  return out;
} 
```

这样，您的代码在对命名空间进行一些细微更改后即可工作：

```
void print(const std::vector<smanip>& manips) {
  for (auto m : manips)
    std::cout << m;
}

int main(int argc, const char** argv) {
  print({std::fixed, std::setprecision(2)});
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:31:34.760

由于操纵器是函数，因此取决于它们的签名。这意味着，您可以创建具有相同签名的操纵器向量。

例如 ：

```
#include <iomanip>
#include <vector>
#include <iostream>

typedef std::ios_base& (*manipF)( std::ios_base& );

std::vector< manipF > getManipulators()
{
    std::vector< manipF > m =
    {
        std::showpos,
        std::boolalpha
    };
    return m;
}

int main()
{
  auto m = getManipulators();

  for ( auto& it : m )
  {
    std::cout<<it;
  }
  std::cout<<"hi " << true << 5.55555f << std::endl;
} 
```

* * *

另一种方法是使用 lambdas ：

```
#include <iomanip>
#include <vector>
#include <iostream>
#include <functional>

typedef std::function< std::ios_base& ( std::ios_base& ) > manipF;

std::vector< manipF > getManipulators()
{
    std::vector< manipF > m =
    {
        std::showpos,
        std::boolalpha,
        [] ( std::ios_base& )->std::ios_base&
        {
          std::cout << std::setprecision( 2 );
          return std::cout;
        }
    };
    return m;
}

int main()
{
  auto m = getManipulators();

  for ( auto& it : m )
  {
    it(std::cout);
  }
  std::cout<<"hi " << true << 5.55555f << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-07T18:44:43.790

标准 C++17 解决方案，可能基于 std::tuple。这是 POC

```
int main()
{
// quick p.o.c.
auto ios_mask_keeper = [&](auto mask) {
    // keep tuple here
    static auto mask_ = mask;
    return mask_;
};

// make required ios mask and keep it
auto the_tuple = ios_mask_keeper(
    // please note we can mix ios formaters and iomanip-ulators
    std::make_tuple(std::boolalpha, std::fixed, std::setprecision(2) ) 
);

// apply iomanip's stored in a tuple
std::apply([&](auto & ...x) 
{
    // c++17 fold 
    (std::cout << ... << x);
}, the_tuple);

return 0; 
```

}

可以将元组保留在一个类中，等等。在 MSVC CL 编译器版本 19.14.26431.0 和使用 clang的[强制性 Wand Box中都可以使用。](https://wandbox.org/permlink/u1Hn5yBkZxdVtBCR)

# jquery-ui - 在 jquery-ui 1.9 中，如何动态创建新选项卡？

> ID：14702631
> 
> 赞同：19
> 
> 时间：2013-02-05T07:58:02.113
> 
> 标签：jquery-ui, tabs

根据 jquery-ui 1.9 选项卡的升级指南 - [http://jqueryui.com/upgrade-guide/1.9/#deprecated-add-and-remove-methods-and-events-use-refresh-method](http://jqueryui.com/upgrade-guide/1.9/#deprecated-add-and-remove-methods-and-events-use-refresh-method) - 添加新的动态选项卡，您只需要执行以下操作：

HTML：

```
<div id='tabs'>
    <ul>
        <li><a href='#tab1'>#1</a></li>
    </ul>
    <div id='tab1'></div>
</div>
<button id='add-tab'>Add tab</button> 
```

JavaScript：

```
$(document).ready(function() {
    $("div#tabs").tabs();

    $("button#add-tab").click(function() {

        var num_tabs = $("div#tabs ul li").length + 1;

        $("div#tabs ul").append(
            "<li><a href='#tab" + num_tabs + "'>#" + num_tabs + "</a></li>"
        );

        $("div#tabs").tabs("refresh");
    });                    
}); 
```

但是，当我尝试在新创建的选项卡之间进行更改时，我在 firebug 中收到以下错误：

> jQuery UI 选项卡：片段标识符不匹配。

如果我理解正确，则此错误意味着未创建实际的选项卡面板（因此导航面板和选项卡面板之间不匹配）。但是升级指南没有提到创建标签面板。

所以我假设要么我做错了，要么升级指南不完整。请澄清。

有趣的是，在删除选项卡时，升级指南说您必须从导航面板和选项卡面板中显式删除列表项，所以我想知道这是否同样适用于添加选项卡。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-05T08:09:50.220

指南一定不完整，需要添加标签面板

```
$(document).ready(function() {
    $("div#tabs").tabs();

    $("button#add-tab").click(function() {

        var num_tabs = $("div#tabs ul li").length + 1;

        $("div#tabs ul").append(
            "<li><a href='#tab" + num_tabs + "'>#" + num_tabs + "</a></li>"
        );
$("div#tabs").append(
            "<div id='tab" + num_tabs + "'>#" + num_tabs + "</div>"
        );
        $("div#tabs").tabs("refresh");
    });                    
}); 
```

[例子](http://jsfiddle.net/axrwkr/ujUu2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T08:08:56.047

添加每个选项卡后，您必须创建一个 div 来显示内容，例如创建`tab number 2`

```
$("div#tabs").append("<div id='tab"+num_tabs+"'></div>"); 
```

检查小提琴[http://jsfiddle.net/AJDLt/1/](http://jsfiddle.net/AJDLt/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-17T16:16:24.937

因此，正确的方法就像一个最佳答案，但没有 nub_tabs。

```
$("div#tabs").tabs();
var tab_id = 1;
$("button#add-tab").click(function() {
    tab_id++; //It can be any id;

    $("div#tabs ul").append(
    '<li id="'+tab_id+'"><a href="#tab"'+tab_id+'">#"+tab_id+"</a><i class="close-tab" target="'+tab_id+'"></i></li>');
$("div#tabs").append(
    '<div id="'+tab_id+'">#'+tab_id+'</div>');
    $("div#tabs").tabs("refresh");
});

//Now i want to show some functions from my code;
//It will not work for you, just want show the idea;

//No clone tabs

function if_tab_exist(thisI) { //thisI - contains some id, title and text for tab content.
    var tab_id = $(thisI).attr('id');
    if(!$('.ui-tabs-nav li#'+tab_id).is('*')) {
        addTab(thisI); //Add tab function
    } else {
        var TAB_index = $('.ui-tabs-nav li#'+tab_id).index();
        $("#tabs").tabs({active: TAB_index}); //Will activate already exist tab
    }
}

//Close tab
function close_tab(tab_id) {
    $('.ui-tabs-nav i[target='+tab_id+']').parent().remove();       
    $('#tabs div#'+tab_id+']').remove();
    $("#tabs").tabs("refresh");
}
//Events
//CLose
$("body").on('click','.ui-tabs-nav .ui-state-default i', function() {
    close_tab($(this).attr('target'));
});
//Add
$("body").on('click','.addTab', function() {
    if_tab_exist(this);
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-12T10:14:40.813

删除选项卡很烦人`"add"`，但是 jQuery 很容易扩展。只需添加您自己的`addTab`方法。

例如像这样的东西：

```
// jQuery extension method
$.fn.addTab = function (name) {
    $('ul', this).append('<li><a href="#tab-' + name + '">' + name + '</a></li>');
    $(this).append("<div id='tab-" + name + "'></div>");
    $(this).tabs("refresh");
}; 
```

并简单地像这样使用：

```
$('#tabs').addTab("NewTab");
$('#tabs').addTab("Another NewTab");
$('#tabs').addTab("etc"); 
```

**JSFiddle：http:** [//jsfiddle.net/TrueBlueAussie/AJDLt/315/](http://jsfiddle.net/TrueBlueAussie/AJDLt/315/)

正如@Andy 所建议的，`.first()`如果您在界面中嵌套选项卡，则需要使用它：

例如像这样的东西：

```
// jQuery extension method
$.fn.addTab = function (name) {
    $('ul', this).first().append('<li><a href="#tab-' + name + '">' + name + '</a></li>');
    $(this).append("<div id='tab-" + name + "'></div>");
    $(this).tabs("refresh");
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-18T20:09:51.863

[这里](http://www.jankoatwarpspeed.com/dynamic-tabs-using-jquery-why-and-how-to-create-it/)更详细地描述了一个示例，并且在 jquery ui 的官方网站上有一个[可运行的版本](http://jqueryui.com/tabs/#manipulation)及其源代码。

一个简单的声明可能如下所示：

```
var addTab = function (tabs, tabId, tabLabel, tabContentHtml) {
     var header = "<li><a href='#" + tabId + "'>" + tabLabel + "</a> </li>"
     tabs.find(".ui-tabs-nav").append(header);
     tabs.append("<div id='" + tabId + "'><p>" + tabContentHtml + "</p></div>");
     tabs.tabs("refresh");
}; 
```

添加新标签变得越来越容易，只需键入以下内容：

```
$("#tabs_area").tabs();
addTab($("#tabs_area"), "tab_id1", "Tab 1", "this is just test"); 
```

# linux - 将作业添加到 crontab

> ID：14702638
> 
> 赞同：2
> 
> 时间：2013-02-05T07:58:55.627
> 
> 标签：linux, cron, crontab

我的`crontab`服务器上安装了一个，它被分配做一些工作。现在我想再分配一个作业，将在最后一个作业之后执行。

根据我在研究过程中学到的知识，我需要指定要在`/var/spool/cron/crontab/root`. 但有趣的是这个文件有一个标题：

> # 不要编辑此文件 - 编辑主文件并重新安装。

我没有`master`在任何手册中找到任何提及。是不是说不能直接把上面提到的文件里的那行放进去保存？我在尝试这样做之前先询问，因为我不是服务器的所有者，我不想把它搞砸。我安装了 cron v5.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:00:16.853

我想你就是这么做的

```
crontab -e 
```

而 crontab 将负责其余的工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:02:13.737

你做：

```
crontab -e 
```

然后你处于 vi 模式（点击`i`开始输入，然后`esc` `:wq (enter)`保存并退出。

# web-crawler - How to crawl the whole website, if data append with Javascript after scrolling

> ID：14702646
> 
> 赞同：0
> 
> 时间：2013-02-05T07:59:39.613
> 
> 标签：web-crawler

I need to crawl a website, but the problem is, there is no linked pagination at the bottom. Data appends if you scroll to the bottom. Now how can I make this happen with my crawler? Are there any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:09:29.470

尝试检查向下滚动时执行以附加数据的脚本。它必须以某种方式检索额外的数据——只要看看它在做什么，然后让你的爬虫做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T14:53:23.530

使用像 Selenium 这样的机器人可以工作，您可以在真实导航器中模拟真实用户。我曾经用 facebook 做的一件事是在 C++/Qt 中使用 JavaScript 解释器，然后通过它发送请求。比 Selenium 快很多。

我敢肯定谷歌比你有更多的处理能力，并且网站管理员会尽其所能被他们解析。

# android - 带有 ListView 的 ScrollView 不滚动 - android

> ID：14702650
> 
> 赞同：3
> 
> 时间：2013-02-05T07:59:57.887
> 
> 标签：android, android-layout, android-listview, scroll, android-scrollview

我对以下布局的问题是布局不滚动。我的要求是我必须显示 2 个有时可能很大的列表。因此，我将两个 ListView 都放在了 ScrollView 中，这样我就可以滚动到底部并查看两个 ListView。`I don't want the ListView to scroll`. 我只希望我的 ScrollView 能够正常运行。有什么建议么？？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<ScrollView
        android:id="@+id/scrollViewContactDetails"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" android:fillViewport="true">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/name"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginTop="5dp"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="22dp" />

            <LinearLayout
                android:id="@+id/numbersLayout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:orientation="vertical"
                android:weightSum="1" >

                <LinearLayout
                    android:id="@+id/numbersLayoutList"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:orientation="vertical"
                    android:weightSum="1" >

                    <ListView
                        android:id="@+id/numbersList"
                        android:layout_width="match_parent"
                        android:layout_height="fill_parent"
                        android:layout_gravity="center"
                        android:dividerHeight="2dp" >
                    </ListView>
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/emailLayout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="10dp"
                android:orientation="horizontal"
                android:weightSum="1" >

                <LinearLayout
                    android:layout_width="120dp"
                    android:layout_height="match_parent"
                    android:layout_gravity="right|center"
                    android:gravity="top|right"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/emailId"
                        android:layout_width="120dp"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="10dp"
                        android:gravity="right|center"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textColor="#8d8d8d"
                        android:textSize="18dp" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/emailLayoutList"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginLeft="20dp"
                    android:gravity="center"
                    android:orientation="vertical"
                    android:weightSum="1" >

                    <ListView
                        android:id="@+id/emailList"
                        android:layout_width="match_parent"
                        android:layout_height="fill_parent"
                        android:layout_gravity="center"
                        android:layout_weight="1"
                        android:dividerHeight="2dp" >
                    </ListView>
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T13:49:23.307

我花了几天时间试图弄清楚如何实现这一目标，但找不到任何解决方案。**`You should not put a ListView inside a ScrollView`**是我搜索的所有地方的普遍说法。我不想使用 LinearLayout 或 ViewGroup，因为我已经使用 ListView 创建了整个 UI，它对我和其他人来说都很棒。它运行良好，只是页面没有滚动。

最近我在这里偶然发现了一个问题，并想尝试一下这个答案。它完美无缺！

这是解决方案：

```
public class Utility {
    public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter(); 
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(0, 0);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
    }
} 
```

只需`Utility.setListViewHeightBasedOnChildren(yourListView)`在将适配器分配给列表视图后调用即可！

非常感谢您`DougW`提出答案。这是原始链接[如何将 ListView 放入 ScrollView 而不折叠？](https://stackoverflow.com/a/3495908/1117338)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T08:06:22.313

您不应该将列表视图放入滚动视图，这不是一个好主意。如果您不希望它滚动，也许您不应该使用列表视图。你试过线性布局吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:14:35.180

您可以使用一个列表视图，而不是放置两个列表视图，您可以在该列表视图的适配器中添加两个数据或膨胀两个 xml 文件。这将在一个列表视图中显示两个数据并使用一个滚动条滚动数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-26T10:30:29.977

在调用以下方法之前，

```
public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter(); 
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(0, 0);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
    } 
```

您必须从滚动视图中删除属性 'android:fillViewport="true"。如果没有，滚动不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T08:13:46.137

试试这个方法：

您从布局中删除了滚动视图，因为列表视图无法正常工作。

并且您还设置了`"android:layout_height="fill_parent"`列表视图的高度，以便占据父布局的全部高度。

所以请为两个列表视图手动修复一些高度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-27T12:15:55.113

找到解决方案只需添加：

```
android:nestedScrollingEnabled="true" 
```

到列表视图：3

```
 <ListView
                android:id="@+id/ListViewPrzebiegTrasy"
                android:layout_width="match_parent"
                android:layout_height="200dp"
                android:visibility="visible"
                android:scrollbars="vertical"
                android:nestedScrollingEnabled="true">
            </ListView> 
```

# .net - Rolling list in .net

> ID：14702654
> 
> 赞同：7
> 
> 时间：2013-02-05T08:00:17.087
> 
> 标签：.net, list, collections

Is there any list/collection class in .NET that behaves like a rolling log file? The user can append elements into it, but the list will automatically delete old elements if maximum capacity is exceeded.

I also want access to any element to the list, e.g. list[102], etc.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-23T13:25:44.650

这是一个简单的实现：

```
public class RollingList<T> : IEnumerable<T>
{
    private readonly LinkedList<T> _list = new LinkedList<T>();

    public RollingList(int maximumCount)
    {
        if (maximumCount <= 0)
            throw new ArgumentException(null, nameof(maximumCount));

        MaximumCount = maximumCount;
    }

    public int MaximumCount { get; }
    public int Count => _list.Count;

    public void Add(T value)
    {
        if (_list.Count == MaximumCount)
        {
            _list.RemoveFirst();
        }
        _list.AddLast(value);
    }

    public T this[int index]
    {
        get
        {
            if (index < 0 || index >= Count)
                throw new ArgumentOutOfRangeException();

            return _list.Skip(index).First();
        }
    }

    public IEnumerator<T> GetEnumerator() => _list.GetEnumerator();
    IEnumerator IEnumerable.GetEnumerator() => GetEnumerator();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:11:30.203

Microsoft 的标准类不存在于您的目的。但是您可以观看 Queue<> 类。
Queue<> 类自动扩展的一个问题。[您可以在 .NET 中的 Queue<T> 的](https://stackoverflow.com/questions/1292/limit-size-of-queuet-in-net)线程限制大小中解决它的问题吗？

可以通过扩展方法访问任何元素。例如：

```
LogItem result = collection.Where(x => x.ID == 100).FirstOrDefault(); 
```

# r - 打印排序中所有可能的关系

> ID：14702664
> 
> 赞同：2
> 
> 时间：2013-02-05T08:01:20.217
> 
> 标签：r, sorting

我有一个任务，我有一个带标签的数字向量，比如大小为 5 和标签 a、b、c、d、e，我需要对其进行排序，然后以（反向）排序顺序打印标签。例如，给定输入中的这个向量 v1：

```
 a   b    c   d     e
1   -3  -1   10   5   -15 
```

所需的输出是：cdbae。

现在，困难的部分是处理关系。我需要打印**所有**可能的订单以防出现平局。例如，给定输入中的另一个向量 v2：

```
 a    b    c    d    e
1   10   29   10   10  -15 
```

排序后我们有：

```
 b    a   c    d    e
1   29   10  10   10  -15 
```

但当然，我们有`3! = 6`可能的排列。我希望它打印这个数组：

```
v <- c("bacde", "badce", "bcade", "bcdae", "bdcae", "bdace"). 
```

如果这有帮助，标签的数量永远不会超过 10 个，所以我不介意与此相关的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:33:19.207

这样做。但我不建议在有太多关系的数据集上运行。

```
require(gregmisc)
x <- c(a=10, b=29, c=10, d=10, e=-15)
y <- sort(x, decreasing=T)

if (any(duplicated(y))) {
    o <- sapply(unique(y), function(val) {
        m <- names(y[y==val])
        # just to make things quicker using length(m)
        if (length(m) <= 1) {
            return(m)
        }
        do.call(paste0, as.data.frame(permutations(length(m), length(m), m)))
    })
    out <- do.call(paste0, expand.grid(o))
} else {
    out <- paste(names(y), collapse="")
}

# [1] "bacde" "badce" "bcade" "bcdae" "bdace" "bdcae" 
```

当然，它也处理多个关系。运行：

```
x <- c(a=10, b=29, c=10, d=-10, e=35, f=-10, g=10)
y <- sort(x, decreasing = TRUE) 
```

给出：

```
# [1] "ebacgdf" "ebagcdf" "ebcagdf" "ebcgadf" "ebgacdf" "ebgcadf" "ebacgfd" "ebagcfd"
# [9] "ebcagfd" "ebcgafd" "ebgacfd" "ebgcafd" 
```

# mysql - 将数据导入具有唯一约束的 MySQL 表

> ID：14702669
> 
> 赞同：0
> 
> 时间：2013-02-05T08:01:28.773
> 
> 标签：mysql, excel, import

我在将数据导入 MYSQL 数据库时遇到问题。

场景：从 Excel 将数据导入（人）表，但如果电子邮件已经存在于（人）表中怎么办？

我无法执行 PHPMYADMIN 的导入功能，因为一旦记录或电子邮件已经存在于 (person) 表中，它将返回错误。（prn_email 是唯一的）。

有没有办法将数据导入 MYSQL，然后它会忽略所有现有的电子邮件并继续导入新数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:19:30.530

我不确定这是最简单的方法，但这可能对你有用：

1）创建一个所有列名完全相同且只有表名不同的重复表（这可以在你删除后删除完成的）。
2）将您的数据导入空白表。
3) 将您的数据导出为 mysqldump。
4) 在文本编辑器中编辑生成的文件，在每个“insert”实例后添加“ignore”。此外，将重复表名称的每个实例替换为真实表名称。保存文件。
5) 将文件作为 mysqldump 导入。

# c++ - 来自 c 的 JNI 调用 java 得到分段错误（核心转储）

> ID：14702671
> 
> 赞同：1
> 
> 时间：2013-02-05T08:01:36.763
> 
> 标签：c++, jvm, java-native-interface, segmentation-fault, jvm-crash

我按照本教程 [http://www.ibm.com/developerworks/java/tutorials/j-jni/section3.html](http://www.ibm.com/developerworks/java/tutorials/j-jni/section3.html)

我编译了 cpp 程序使用

> g++ -o libSample2 -fPIC -shared -I/usr/lib/jvm/java-1.7.0-openjdk-amd64/include -I/usr/lib/jvm/java-1.7.0-openjdk-amd64/include/linux /样本2.cpp

我试图运行 ./libSample2 但我得到“分段错误（核心转储）”

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:39:35.433

谢谢各位，我知道问题所在了。我运行了这个命令

> g++ -I /usr/lib/jvm/java-7-openjdk-amd64/include -I /usr/lib/jvm/java-7-openjdk-amd64/include/linux/ -L /usr/lib/jvm/java -7-openjdk-amd64/jre/lib/amd64/server -l jvm Sample2.cpp

它没有用。然后我运行如下

> g++ -I /usr/lib/jvm/java-7-openjdk-amd64/include -I /usr/lib/jvm/java-7-openjdk-amd64/include/linux/ -L /usr/lib/jvm/java -7-openjdk-amd64/jre/lib/amd64/server Sample2.cpp -l jvm -Wl,-rpath,/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server -o样品2

信不信由你，是 Ubuntu 版本导致了问题。由于某种原因，它不适用于上述命令。

# eclipse - 如何在 Jaspersoft Studio Eclipse 插件中设置语言环境

> ID：14702673
> 
> 赞同：4
> 
> 时间：2013-02-05T08:01:47.347
> 
> 标签：eclipse, jasper-reports, jaspersoft-studio

如何设置 Eclipse 插件“Jaspersoft Studio”用于执行报告的语言环境？

有诸如“en”和“pt”之类的语言环境的消息文件，但我的系统在“de”上。所以在预览时，我得到一个：

`net.sf.jasperreports.engine.JRException: java.util.MissingResourceException: Can't find bundle for base name org/uci/opus/report/messages, locale de_AT`

注意：在 iReport 中有一个报告区域设置（在选项 -> 编译和执行下），但是 Jaspersoft Studio 中的这个设置在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:42:35.723

为了解决这个问题：

*   定义报表类路径：
    *   在*Project Explorer中的**JasperReports 项目*中创建一个文件夹
    **   将所有资源包和 JRXML 移到那里。*   右键单击文件夹并选择*构建路径*>*用作源路径**   当您运行报告时，`MissingResourceException`将消失*
**   如果您没有定义任何自定义参数，则可以更改语言环境的位置可能并不明显：
    *   以预览模式打开报表
    *   在左侧，您会注意到一个带有小三角形（大头针）的栏：单击它，它将展开输入参数面板
    *   在顶部您会看到一个工具栏，左侧第二个图标（*报告参数*）允许您配置最大记录数、**报告区域设置**、报告时区*

# session - Ubercart 将物品保存在购物车中以供不同会话使用

> ID：14702674
> 
> 赞同：1
> 
> 时间：2013-02-05T08:01:56.530
> 
> 标签：session, drupal, drupal-6, session-cookies, ubercart

我开始使用未登录的用户将商品添加到购物车。将产品添加到购物车，然后我意识到我已经有一个帐户。我只是填写了我的详细信息并登录。我在购物车中看到的是现在该商品仍保留在购物车中，这是我在以匿名用户身份执行结帐时添加的内容。

匿名用户和经过身份验证的用户的会话应该不同，因此项目。

这是一个错误还是我做错了什么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:42:05.167

这是按预期工作的。顺便说一句，您可以开始购物，登录或注册时您的购物车不会丢失。也就是说，您可以创建一个规则以在登录时清空购物车；在我看来，这是一种糟糕的用户体验。

# java - 导入 java.util.* 和 java.util.XXXX 的区别

> ID：14702675
> 
> 赞同：0
> 
> 时间：2013-02-05T08:02:02.263
> 
> 标签：java, import, jvm

> **可能重复：**
> [通配符导入和所需的类导入之间的性能差异](https://stackoverflow.com/questions/7128348/performance-difference-between-a-wild-card-import-and-the-required-class-import)
> [使用通配符导入 java 包的含义](https://stackoverflow.com/questions/13062199/implications-importing-java-packages-with-wildcard)

我的 QA 领导设置了一个`java.util.*`不能出现在源代码中的 checkstyle 规则，`java.util.XXX`改为使用。例如，你只能写：

```
import java.util.Date;
import java.util.List;
import java.util.Collection;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
// ... may be thousands import statement here 
```

但不允许：

```
import java.util.*; 
```

如果有人不遵守规则，QA 团队将不会进行集成测试。他告诉我， 的风格`import java.util.XXX`比 更清晰`import java.util.*`，并且使 JVM 运行得更快。是真的吗？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:06:25.170

如果包含`java.util.*`，则包含包中的*所有类*`java.util`。

包含时`java.util.classname`，您仅在`java.util`包中包含指定的类。

使用`java.util.*`不会减慢 JVM，因为导入是在编译时而不是运行时处理的。

# ios - Foursquare 场地/搜索和半径参数

> ID：14702677
> 
> 赞同：2
> 
> 时间：2013-02-05T08:02:13.913
> 
> 标签：ios, api, foursquare

我使用[此](https://api.foursquare.com/v2/venues/search?client_id=5P1OVCFK0CCVCQ5GBBCWRFGUVNX5R4WGKHL2DGJGZ32FDFKT&client_secret=UPZJO0A0XL44IHCD1KQBMAYGCZ45Z03BORJZZJXELPWHPSAR&v=20130117&locale=ru&radius=500&ll=54.94596574654239,73.37603831147895&intent=browse)请求从 FS 获取场地

但是一些场地和要求的位置之间的距离超过 500m。换句话说， ll 和 radius 参数不能像我预期的那样工作。因为我希望拥有请求区域的所有场地。

![在此处输入图像描述](../Images/55ac8609ab436ebc6f827e3438a8a9a1.png)

有80m的误差是可以的。但有时我有 600m 的误差。

是我的问题还是foursquare的问题？为什么会这样？

顺便说一句，我使用[Foursquare2](https://github.com/Constantine-Fry/Foursquare-API-v2)提出请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:08:15.803

谢谢让我们注意到这个。这是由我们返回搜索结果的方式中的一个小错误引起的，应该很快就会修复。

# mysql - 对于长内容，我应该使用哪种数据类型？

> ID：14702683
> 
> 赞同：4
> 
> 时间：2013-02-05T08:02:39.363
> 
> 标签：mysql, sql, mysql-workbench

我正在创建一个包含长文本的项目。可能是段落......现在我应该为我的数据表字段使用什么数据类型？我正在使用 mySQL 工作台...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:05:12.163

我相信`TEXT`在这里应该是合适的，除非您存储二进制数据。对于二进制数据使用`BLOB`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:05:06.500

来自文档：[所有可能的字符串类型](http://dev.mysql.com/doc/refman/5.0/en/string-types.html)。

对于长文本，`TEXT`是最合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:07:57.310

取决于“长”有多长。相当长（大于 64K），`text`是首选武器，但性能不如`varchar`，所以如果您知道它的限制小于 64K，请选择 varchar

本文[描述](http://forums.mysql.com/read.php?24,105964,105964)了 text vs varchar 的优缺点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T08:09:57.310

MySQL VARCHAR 大小限制为 65535 字节，根据列的编码，一个 char 需要 1-4 个字节。如果不够长，可以使用 TEXT 类型。

> “BLOB 或 TEXT 对象的最大大小取决于其类型，但您实际可以在客户端和服务器之间传输的最大值取决于可用内存量和通信缓冲区的大小。”

[http://dev.mysql.com/doc/refman/5.5/en/blob.html](http://dev.mysql.com/doc/refman/5.5/en/blob.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-11T20:11:47.237

VARCHAR（0 到 65635 字节）、TEXT（0 到 65535 字节）、BLOB（0 到 65535 字节）、MEDIUNTEXT（最大长度为 16,777,215 个字符）、MEDIUMBLOB（最大长度为 16,777,215 个字符）、LONGTEXT（最大长度为 4,294,967,295 个字符） , LONGBLOB（最大长度为 4,294,967,295 个字符）

# time - 检索数据需要多长时间？

> ID：14702685
> 
> 赞同：-2
> 
> 时间：2013-02-05T08:02:54.627
> 
> 标签：time, disk, seek

这更像是一个硬件问题而不是软件问题。

我想从硬盘驱动器中检索 512 字节的数据扇区。平均寻道时间为 9 毫秒，磁盘以 7200 RPM 旋转。一旦定位在数据上，数据可以以 15 MB/秒的速度传输。平均而言，检索数据需要多长时间？

必须有某种公式来计算这个，对吧？有了它，我打算编写我的程序。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:11:55.160

这个问题的答案很重要，而且可能无关紧要。数据检索时间将取决于操作系统资源、不同级别的缓存、数据在驱动器上的物理位置（外部边缘比内部更快）等。

我说无关紧要，因为作为程序员，您对此无能为力，也不能依赖它。如果驱动器比预期的慢（NFS/Samba 挂载）怎么办？更快（RAID0、SSD）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:11:14.930

理论上：如果您正在寻找平均情况，那么它将是找到该数据的平均搜索时间 + 传输数据的时间量。但是由于磁盘上有某种操作系统并且您的数据可能是碎片化的（取决于它是什么），时间可能会大大增加。

PS 还有命令处理时间，但通常在纳秒范围内

# eclipse - Eclipse新建项目库zip文件报错

> ID：14702686
> 
> 赞同：0
> 
> 时间：2013-02-05T08:03:07.573
> 
> 标签：eclipse, eclipse-juno

我打开 eclipse Juno 去文件新的 JDK 项目（第一个新项目选项），命名文件然后去下载 Juno 库，然后我点击同意这些协议声明。接下来我点击下载，然后出现一个错误，说它无法打开 zip 文件。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:13:33.417

如果您使用的是 ubuntu，请尝试以 sudo 模式加载 eclipse。还要确保 zip 文件具有`chmod 777`访问权限。

# c# - 通过所有派生类从基类共享对象

> ID：14702689
> 
> 赞同：0
> 
> 时间：2013-02-05T08:03:37.833
> 
> 标签：c#, singleton

我有一组由类表示的测试步骤。每个人都有自己的数据和方法，所以标准的东西。全部从 XML 配置中读取。

但是，一个测试的结果可能会用作下一个测试的参数，我在尝试找出实现这一点的最佳方法时遇到了一些麻烦。

我想过有一个类，本质上是一个对象字典，因此每个存储的值都可以与一个唯一键相关联，并且稍后使用该键的任何地方，然后测试将能够从字典中获取它并使用它（显然错误/类型检查等需要非常好）。我不太喜欢这个，但不确定是否有其他模式的 c# 功能可以处理这个问题？

所以有点像这样：

```
<TestRunner xsi:type="TestType1" OutputValue="ResultIndx1"/>
<TestRunner xsi:type="TestType2" InputValue="ResultIndx1"/> 
```

我不相信 C# 可以在层次结构的基类中拥有一个对象，然后通过所有基类共享它是吗？

所以这让我更多地考虑单例，但如果可能的话，我想避免它。

关于如何处理这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:04:23.363

基类中非私有的静态成员就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:06:17.207

您可以使基类中的对象[受保护](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.71%29.aspx)

# javascript - javascript检测计算机客户端中正在运行的程序

> ID：14702691
> 
> 赞同：0
> 
> 时间：2013-02-05T08:03:59.877
> 
> 标签：javascript, internet-explorer

我已经用谷歌搜索了一整天来查找 javascript 如何检测计算机客户端中正在运行的程序。

我正在使用浏览器 IE 并使用 ActiveXObject 来运行我的 web 中需要的一些程序。在浏览器中，我需要检测正在运行的程序已经在运行。

有人知道检测正在运行的程序的 javascript 代码吗？

# java - 使用 CrudRepository 限制 1

> ID：14702694
> 
> 赞同：1
> 
> 时间：2013-02-05T08:04:16.787
> 
> 标签：java, mysql, spring, limit, crud

我想`MyTable`只插入最后一个结果。所以我放了`LIMIT 1`or`LIMIT 0,1`但我有两个结果。它抛出一个异常。我能怎么做？我`org.springframework.data.repository.CrudRepository`在 mysql 数据库上使用

```
 @Query("select t from  MyTable t " +
        " where " +
        "  t.date <= :date " +
        " order by t.date desc " +
        " LIMIT 1  ")   
 MyTable findOnlyTheLast(
        @Param("date") String date); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:05:57.607

尝试在 where 子句中添加一个条件，选择满足条件的最大日期。

```
@Query("select t from  MyTable t " +
        " where " +
        "  t.date <= :date " +
        " and t.date = (select max(tt.date) from MyTable tt where tt.date <= :date)" +
        " order by t.date desc") 
```

# ios - ActivityIndi cator 在计算后不会停止

> ID：14702698
> 
> 赞同：2
> 
> 时间：2013-02-05T08:04:33.400
> 
> 标签：ios, objective-c, cocoa-touch, uiactivityindicatorview

我正在尝试在上传文件时制作活动指示器，所以我找到了很多解决方案，但我想我并不完全理解它们，所以我的代码如下所示：

```
- (void) startSpinner {

UIActivityIndicatorView  *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[spinner setCenter:CGPointMake(self.view.frame.size.width/2.0, self.view.frame.size.height/2.0)];
[self.view addSubview:spinner];
[spinner startAnimating];

}

- (void)startSync {

[NSThread detachNewThreadSelector:@selector(startSpinner) toTarget:self withObject:nil];

// computations 

[self.spinner stopAnimating];
} 
```

所以在我做 [self startSync] activityIndi​​cator 出现后，但上传后它并没有停止。此外，如果我在其他地方（不在 (void)startSpinner 中）声明活动指示器，例如在 viewDidLoad 中，并且只执行 [self startAnimating] 它根本不会出现。请帮我找出错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:07:27.727

您正在不是主线程的线程上执行 UI 操作。您永远不应该`detachNewThreadSelector`使用执行 UI 相关任务的选择器进行调用。

一个更好、更容易理解的方法是：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.activityIndicator startAnimating];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //Perform lengthy operations
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.activityIndicator stopAnimating];
        });
    });
}); 
```

此外，如果您选择使用选择器 - 请确保您的 UIActivityIndi​​catorView 在方法范围之外声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:08:31.780

它发生在您在 startSpinner 方法中声明局部变量微调器。

当您调用 self.spinner 时，它不会影响您在 startSpinner 方法中声明的局部变量 spinner。您有 2 个具有相同名称的单独变量。

你必须声明

spinner = [[UIActivityIndi​​catorView alloc]initWithActivityIndi​​catorStyle:UIActivityIndi​​catorViewStyleGray];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:07:00.880

```
- (void) startSpinner
{
    self.spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [spinner setCenter:CGPointMake(self.view.frame.size.width/2.0, self.view.frame.size.height/2.0)];
    [self.view addSubview:spinner];
    [spinner startAnimating];
}

- (void)startSync
{
    [NSThread detachNewThreadSelector:@selector(startSpinner) toTarget:self withObject:nil];

    // computations 

    [self.spinner performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:NO];
    self.spinner = nil;
} 
```

# actionscript-3 - 在 as3 中使用 Peer to Peer 将字节数组发送给另一个用户

> ID：14702700
> 
> 赞同：0
> 
> 时间：2013-02-05T08:04:46.647
> 
> 标签：actionscript-3, air, adobe, flash-builder

使用一个工具，我想在其中将文件发送到另一个我连接的对等方。如果您知道如何使用点对点将字节数组发送给另一个用户，请告诉我。我正在使用网络组进行分组和网络流进行连接，并使用对等 ID 与其他用户进行通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:45:40.337

以下来自我的应用[sharedboard.net](http://www.sharedboard.net/)，稍作修改：

```
 public function sendBAMessage(text: String): void {
        var message: Object = new Object();
        message.ba = myByteArray; //you may want to copy the bytarray
        message.time = new Date().time;
        message.type = "byteArray";
        netGroup.post(message);
    }

    public function recieveMessage(o:Object):void{
        if(o.type == "byteArray"){
            var byteArrayRecieved : ByteArray = o.ba;
    } 
```

当然，您不需要在消息中添加时间和类型，但它有助于未来的扩展。

如果您还需要接收处理：

```
 public function netStatus(e: NetStatusEvent): void {
         switch (e.info.code) {
      .....
         case "NetGroup.Posting.Notify":
                recieveMessage(e.info.message)
                break;
      ..... 
```

# java - 如何在 Mac 中永久设置 JAVA_HOME？

> ID：14702702
> 
> 赞同：97
> 
> 时间：2013-02-05T08:05:03.293
> 
> 标签：java, macos, java-home

我正在尝试通过在终端`JAVA_HOME`输入来设置。`export JAVA_HOME=/Library/Java/Home`它设置`JAVA_HOME`当前会话。

我怎样才能永久设置它？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-10-29T16:30:04.303

你可以`/usr/libexec/java_home -v <version you want>`用来获取你需要的路径`JAVA_HOME`。例如，要获取 1.7 JDK 的路径，您可以运行`/usr/libexec/java_home -v 1.7`它，它将返回 JDK 的路径。在您的`.profile`或`.bash_profile`只是添加

```
export JAVA_HOME=`/usr/libexec/java_home -v <version>` 
```

你应该很好。或者，尝试说服您使用的 Java 工具的维护者使用此方法来获取他们需要的版本。

要打开“.bash_profile”，请在终端中键入以下内容：

```
nano ~/.bash_profile 
```

并将以下行添加到文件中：

```
export JAVA_HOME=`/usr/libexec/java_home -v <version>` 
```

按 CTRL+X 退出 bash。按“Y”保存更改。

要检查是否已添加路径，请在终端中键入以下内容：

```
source ~/.bash_profile
echo $JAVA_HOME 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2019-11-19T06:16:26.243

我在 MAC Catalina 中遇到了同样的问题，如果我编辑 .bash_profile 我发现 export JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk1.8.0_201.jdk/Contents/Home 但是当我运行终端 echo $JAVA_HOME 它返回空, 后来我发现文件.zshrc 丢失了我创建了这个文件

```
touch .zshrc 
```

然后编辑它`nano .zshrc`并写

```
source ~/.bash_profile 
```

这永久解决了我的问题

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-09-27T06:37:35.917

在 mac 上设置 Java 路径：

1.  在mac上打开终端，将路径更改为root cd ~
2.  vi .bash_profile（这会打开 bash_profile 文件）
3.  单击**I**插入文本并使用以下文本设置 JAVA_HOME 和 PATH

    *   导出 JAVA_HOME='/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home'
    *   导出 PATH=$JAVA_HOME/bin:$PATH

        4.  输入 :wq 保存并退出文件。
        5.  键入 source .bash_profile 以执行 .bash_profile 文件。
        6.  您可以键入 echo $JAVA_HOME 或 echo $PATH

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2020-12-05T21:48:56.490

在以下位置安装 Java `macOS 11 Big Sur`：

*   最简单的方法是选择 OpenJDK 11 (LTS)、HotSpot JVM 和 macOS x64 是在这里获取最新版本：[adoptopenjdk.net](https://adoptopenjdk.net/archive.html?variant=openjdk11&jvmVariant=hotspot)
*   选择 macOS 和 x64 并下载`JDK`（大约 190 MB），这会将`OpenJDK11U-jdk_x64_mac_hotspot_11.0.9_11.pkg`文件放入您的`~/Downloads folder`
*   单击 pkg 文件，将安装到此位置：`/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk` [![在此处输入图像描述](../Images/4874b1bb72f011dc517bc7e226d8bdc0.png)](https://i.stack.imgur.com/EIi48.jpg)
*   快完成了。打开终端后，可以确认JDK安装成功，如下所示：`java --version`
    *   输出：

```
openjdk 11.0.9.1 2020-11-04
OpenJDK Runtime Environment AdoptOpenJDK (build 11.0.9.1+1)
OpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.9.1+1, mixed mode) 
```

*   `JAVA_HOME`是一个重要的环境变量，正确设置它很重要。这是一个技巧，即使在安装了 Java 更新之后，我也可以让环境变量保持最新。在`~/.zshrc`中，我像这样设置变量：`export JAVA_HOME=$(/usr/libexec/java_home)`
*   在以前的 macOS 版本中，这是在`~/.bash_profile`. 无论如何，打开一个新终端并验证：`echo $JAVA_HOME`
    *   输出：`/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home`

* * *

测试：编译并运行你的 Java 程序

*   打开文本编辑器，从下面复制代码并将文件另存为`HelloStackoverflow.java`.

```
public class HelloStackoverflow {
  public static void main(String[] args){
    System.out.println("Hello Stackoverflow !");
  }//End of main
}//End of HelloStackoverflow Class 
```

*   从终端将工作目录设置为包含 的目录`HelloStackoverflow.java`，然后键入命令：

```
javac HelloStackoverflow.java 
```

*   如果你幸运的话，什么都不会发生

*   其实，发生了很多事情。`javac`是 Java 编译器的名称。它将 Java 翻译成`Java Bytecode`Java 虚拟机 (JVM) 的汇编语言。Java 字节码存储在一个名为`HelloStackoverflow.class`.

*   运行：输入命令：

```
java HelloStackoverflow

# output:
# Hello Stackoverflow ! 
```

[![在此处输入图像描述](../Images/dffdabf97def69d9d040d4691aa0f85d.png)](https://i.stack.imgur.com/dp640.png)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-06-11T10:06:22.180

除了其他答案很好地涵盖的 bash/zsh 终端的设置之外，如果您想要终端 + GUI 应用程序的永久系统环境变量（适用于 macOS Sierra；也适用于 El Capitan）：

```
launchctl setenv JAVA_HOME $(/usr/libexec/java_home -v 1.8) 
```

（这会将 JAVA_HOME 设置为最新的 1.8 JDK，您可能已经经历了几次更新，例如 javac 1.8.0_101、javac 1.8.0_131）

当然，将 1.8 更改为 1.7 或 1.6（真的吗？）以满足您的需要和您的系统

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-11-09T15:44:36.580

试试这个链接 [http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/](http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/)

这解释正确，我做了以下工作以使其工作

1.  打开终端
2.  类型`vim .bash_profile`
3.  在我的情况下输入你的java安装目录`export JAVA_HOME="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home`
4.  单击`ESC`然后键入`:wq`（在 vim 中保存并退出）
5.  然后输入`source .bash_profile`
6.  `echo $JAVA_HOME`如果你看到了路径，你就都准备好了。

希望能帮助到你。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-02-05T08:09:27.743

此链接可能对您有所帮助：[https ://developer.apple.com/library/archive/qa/qa1067/_index.html](https://developer.apple.com/library/archive/qa/qa1067/_index.html)

此外，您可以将环境变量放在以下文件之一中：

```
~/.bashrc
~/.bash_profile
~/.profile 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-11-27T13:22:11.950

在您的终端上运行此命令（这里 -v11 用于版本 11（java11））-：

```
/usr/libexec/java_home -v11 
```

您将在终端上获得类似这样的路径-：

```
/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home 
```

现在您需要在任何编辑器中打开您的 bash 配置文件，例如 VS Code

如果你想在 vs 代码中编辑你的 bash_profile 然后运行这个命令-：

```
code ~/.bash_profile 
```

否则运行此命令，然后按 i 插入路径。-：

```
open ~/.bash_profile 
```

您将获得 .bash_profile 现在您需要添加路径，因此将其添加到 .bash_profile （从第一个命令获得的路径）-：

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home 
```

如果您使用的是代码编辑器，那么现在转到终端并运行此命令以保存更改-：

```
source ~/.bash_profile 
```

否则按 esc 然后 :wq 退出 bash_profile 然后转到终端并运行上面给出的命令。过程完成。现在您可以使用此命令进行检查-：

```
echo $JAVA_HOME 
```

你会得到`/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home`

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2021-01-17T07:41:47.953

要在 Mac 中永久设置 JAVA_HOME，我尝试了以下步骤。

1.  下载 Java JDK 并将其安装到您的 Mac。当您安装 Java JDK 版本时，它将默认安装在 MAC 中的以下位置。

> /库/Java/JavaVirtualMachines

2.  打开**.bash_profile**文件（这里我的 Mac 版本是 MacOS High Sierra。您可能需要在某些不同的 MacOS 版本中打开**.zshrc文件）。**

`atom ~/.bash_profile`

3.  将以下内容添加到您的 bash_profile 文件中。

相应地更改 JDK 版本

```
export JAVA_HOME="$(/usr/libexec/java_home -v 1.8)"
export JAVA_HOME='/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home'
export PATH=$JAVA_HOME/bin:$PATH 
```

4.  打开终端并执行以下操作。

`source ~/.bash_profile`

打开一个新终端并检查'echo $JAVA_HOME'

谢谢。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-09-01T00:38:15.290

`/usr/libexec/java_home -v <version>`首先，通过运行命令替换您正在运行的任何版本的 OpenJDK，找出您的 java home 在哪里。

接下来用于`vim ~/.bash_profile`编辑您的 bash 配置文件。添加`export JAVA_HOME="<java path>"`替换为上一步中找到的 java home 的路径。

最后，运行命令`source ~/.bash_profile`

这应该永久设置您的 JAVA_HOME 环境变量。

确保它正常运行`echo $JAVA_HOME`并确保它返回您设置的路径

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-02-08T09:40:57.873

1) 第一步是确定您是否安装了 Java 并运行您的系统。

```
which java 
```

通常，它应该是 /usr/bin/java。

2) **JAVA_HOME**本质上是包含名为**bin**的子目录的目录的完整路径，该子目录又包含**java**。

```
cd /Library/Java/ 
```

*   您应该在**/Java文件夹中有****bin**文件夹，并且它必须包含**[java]**可执行包。

 ****[Mac OS 的文件夹结构](https://i.stack.imgur.com/JDSy3.png)

3.1) 如果您只想为当前会话设置路径，请在终端中执行此命令`export JAVA_HOME=/Library/Java`

3.2）如果你想让它持久化，你必须将命令添加到你的`~/.bash_profile`文件中

*   打开终端`vi ~/.bash_profile`
*   将这些行添加到终端`export JAVA_HOME=/Library/Java/Home`并保存
*   执行以下命令`source ~/.bash_profile`

4) 验证您已正确添加 JAVA_HOME 路径。下面的命令应该为您提供正确的 Java 版本。

就是这样，你准备好使用了！！

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-04-25T08:22:26.860

[sql-](https://stackoverflow.com/users/2080879/sql-surfer) surfer和 [MikroDel](https://stackoverflow.com/users/502950/mikrodel) ,

其实，答案并不复杂！您只需要添加：

```
export JAVA_HOME=(/usr/libexec/java_home) 
```

到您的外壳配置文件/配置文件。唯一的问题是 - 您使用的是哪个外壳？如果您使用例如 FISH，则将该行添加到`.profile`或`.bash_profile`根本不起作用。将它添加到`config.fish`文件中可以解决问题。永久。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-01-15T08:53:36.173

在 .bashrc 或 .zshrc 中声明两个导出：

```
export JAVA_8_HOME=$(/usr/libexec/java_home -v1.8) 
export JAVA_11_HOME=$(/usr/libexec/java_home -v11) 
```

添加别名以进行快速更改：

```
alias java8='export JAVA_HOME=$JAVA_8_HOME'
alias java11='export JAVA_HOME=$JAVA_11_HOME' 
```

将默认设置为 Java 11

```
java11 
```

导出路径

```
export PATH=$JAVA_HOME/bin:$PATH 
```

您可以在 .bashrc/zshrc 文件中将 java11 更改为 java8 以永久更改您的 java 版本

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-03-08T03:38:51.193

添加到 Dilips 的答案中，如果您使用的是 JDK 9，请在第 3 步中使用以下内容（我的 JDK 版本是 9.0.4）：

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-9.0.4.jdk/Contents/Home 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-11-12T15:38:17.610

这里的答案通常是正确的，但对我来说，我不知道我需要做一些事情`source ~/.bash_profile`才能真正让它发挥作用。

所以完整的答案是：

```
nano ~/.zshenv // or
nano ~/.zshrc // or
nano ~/.bash_profile
//add this line to zshrc and bash_profile if you want to be 100% sure
export JAVA_HOME=$(/usr/libexec/java_home)
//save
source ~/.bash_profile //the KEY that generally isn't in the answers
source ~/.zshrc //I didn't do this one, but maybe you need it 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-11-11T16:45:41.000

如果你用的是鱼壳。然后可以在 .config/fish/config.fish 中设置所有变量

```
vim .config/fish/config.fish 
```

添加以下行

```
set -g JAVA_HOME "your_path_to_jdk" 
```

保存并退出 vim。

这应该设置您的 JAVA_HOME。谢谢

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-03-24T16:36:29.780

要在 mac 中永久设置 JAVA_HOME，请确保您的系统中安装了 JDK，如果未安装 jdk，您可以从这里下载它 [https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151 .html](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)

安装 jdk 后，请按照下列步骤操作：-

1) 打开终端

2）输入“vim .bash_profile”

3) 按“i”编辑或输入路径

4）输入你的java安装目录：- export JAVA_HOME=$(/usr/libexec/java_home)

5) 点击 ESC 然后输入 ":wq" (在 vim 中保存并退出)

6）然后输入“source .bash_profile”

7）如果你看到你设置的路径，输入“echo $JAVA_HOME”。

谢谢你

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-10-27T08:16:49.227

如果您使用的是最新版本的 macOS，则无法使用 ~/.bash_profile 导出环境变量，因为 bash shell 在最新版本的 macOS 中已弃用。

*   在你的终端中运行`/usr/libexec/java_home`，你会得到类似的东西`/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home`
*   添加`export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home`到 .zshrc

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-02-05T08:08:51.973

添加以下内容

```
setenv JAVA_HOME /System/Library/Frameworks/JavaVM.framework/Home 
```

在您的 ~/.login 文件中：

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-06-01T21:10:26.007

找出 jenv 会将 $JAVA_HOME 设置为短版本，例如“/Users/*****/.jenv/versions/1.8”。

必须卸载 jenv 才能使 $JAVA_HOME 设置像“JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home”一样工作****

# r - 使用 R 查找相关对

> ID：14702714
> 
> 赞同：2
> 
> 时间：2013-02-05T08:06:16.873
> 
> 标签：r, correlation

```
 VZ.Close CBOU.Close SBUX.Close   T.Close
VZ.Close   1.0000000  0.5804478  0.8872978 0.9480894
CBOU.Close 0.5804478  1.0000000  0.7876277 0.4988890
SBUX.Close 0.8872978  0.7876277  1.0000000 0.8143305
T.Close    0.9480894  0.4988890  0.8143305 1.0000000 
```

所以，假设我在股票价格之间存在这些相关性。我想查看第一行并找到相关性最高的对。那将是 VZ 和 T。然后我想删除这 2 只股票作为期权。然后，在剩余的股票中找到相关性最高的对。依此类推，直到所有股票配对。在此示例中，显然是 CBOU 和 SBUX，因为它们是仅剩的 2 个，但我希望代码能够容纳任意数量的对。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:38:28.540

如果您想查看每个步骤的最大相关性，这是一个解决方案。所以第一步不会只看第一行，而是看整个矩阵。

样本数据 ：

```
d <- matrix(runif(36),ncol=6,nrow=6)
rownames(d) <- colnames(d) <- LETTERS[1:6]
diag(d) <- 1
d
           A          B         C          D         E          F
A 1.00000000 0.65209204 0.8520392 0.26980214 0.5844000 0.69335143
B 0.73531603 1.00000000 0.5499431 0.60511580 0.7483990 0.14788134
C 0.56433218 0.27242769 1.0000000 0.07952776 0.2147628 0.03711562
D 0.91756919 0.04853523 0.5554490 1.00000000 0.4344089 0.23381447
E 0.06897889 0.80740821 0.7974340 0.87425643 1.0000000 0.74546072
F 0.19961474 0.61665231 0.2829632 0.58110694 0.7433924 1.00000000 
```

和代码：

```
results <- data.frame(v1=character(0), v2=character(0), cor=numeric(0), stringsAsFactors=FALSE)
diag(d) <- 0
while (sum(d>0)>1) {
  maxval <- max(d)
  max <- which(d==maxval, arr.ind=TRUE)[1,]
  results <- rbind(results, data.frame(v1=rownames(d)[max[1]], v2=colnames(d)[max[2]], cor=maxval))
  d[max[1],] <- 0
  d[,max[1]] <- 0
  d[max[2],] <- 0
  d[,max[2]] <- 0
} 
```

这使 ：

```
 v1 v2       cor
1  D  A 0.9175692
2  E  B 0.8074082
3  F  C 0.2829632 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:58:36.447

我认为这回答了你的问题，但我不能确定，因为原来的问题有点模棱两可......

```
# Construct toy example of symmentrical matrix
# nc is number of rows/columns in matrix, in the problem above it was 4, but let's try with 6
nc <- 6
mat <- diag( 1 , nc )
# Create toy correlation data for matrix
dat <- runif( ( (nc^2-nc)/2 ) )
# Fill both triangles of matrix so it is symmetric
mat[lower.tri( mat ) ] <- dat 
mat[upper.tri( mat ) ] <- dat

# Create vector of random string names for row/column names
names <- replicate( nc , expr = paste( sample( c( letters , LETTERS ) , 3 , replace = TRUE ) , collapse = "" ) )
dimnames(mat) <- list( names , names )

# Sanity check
mat
    SXK   llq   xFL   RVW   oYQ   Seb
SXK 1.000 0.973 0.499 0.585 0.813 0.751
llq 0.973 1.000 0.075 0.533 0.794 0.826
xFL 0.499 0.099 1.000 0.099 0.481 0.968
RVW 0.075 0.813 0.620 1.000 0.620 0.307
oYQ 0.585 0.794 0.751 0.968 1.000 0.682
Seb 0.533 0.481 0.826 0.307 0.682 1.000

# Ok - to problem at hand , you can just substitute your matrix into these lines:
# Clearly the diagonal in a correlation matrix will be 1 so this is excluded as per your problem
diag( mat ) <- NA
# Now find the next highest correlation in each row and set this to NA
mat <- t( apply( mat , 1 , function(x) { x[ which.max(x) ] <- NA ; return(x) } ) ) 

# Another sanity check...!
mat

      SXK   llq   xFL   RVW   oYQ   Seb
SXK    NA    NA 0.499 0.585 0.813 0.751
llq    NA    NA 0.075 0.533 0.794 0.826
xFL 0.499 0.099    NA 0.099 0.481    NA
RVW 0.075    NA 0.620    NA 0.620 0.307
oYQ 0.585 0.794 0.751    NA    NA 0.682
Seb 0.533 0.481    NA 0.307 0.682    NA

# Now return the two remaining columns with greatest correlation in that row
res <- t( apply( mat , 1 , function(x) { y <- names( sort(x , TRUE ) )[1:2] ; return( y ) } ) )

res

[,1]  [,2] 
SXK "oYQ" "Seb"
llq "Seb" "oYQ"
xFL "SXK" "oYQ"
RVW "xFL" "oYQ"
oYQ "llq" "xFL"
Seb "oYQ" "SXK" 
```

这回答了你的问题了吗？

# android - 将 Android 移植到 BB 10

> ID：14702717
> 
> 赞同：1
> 
> 时间：2013-02-05T08:06:26.567
> 
> 标签：android, blackberry-10

当我使用 Onlinepackage tooler 将应用程序从 Android 移植到 BB 10 时，我收到了如下所述的报告。

```
4 (AndroidManifest.xml) uses-library: android.test.runner
5 (com/app/LoginActivity.java:305) class: com.app.LoginActivity uses intent category android.intent.category.HOME 
```

我不知道可以更改什么，我应该更改 Andriod 清单文件中的任何内容吗？

谢谢拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:38:27.110

我能够使用 Eclipse 插件成功移植应用程序，这是一种更可靠、更简单的移植应用程序并识别与之相关的问题的方法。感谢您的所有支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:51:31.137

另一位用户在这里遇到了类似的问题： [尝试将 Android 应用程序移植到 BlackBerry 10 时出现验证错误](https://stackoverflow.com/questions/14625533/verification-errors-while-trying-to-port-android-application-to-blackberry-10)

总而言之，[不支持](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_intents.html)主屏幕意图。由于 Blackberry10 是基于手势的操作系统，因此已经有一种内置方式可以离开您的应用程序并返回主屏幕，方法是从屏幕底部向上滑动。删除此 Intent 的使用应该可以解决该错误。

另请注意，某些类型的应用程序[不受支持](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_app_types.html)，包括主屏幕应用程序、小部件应用程序以及启动多个 Activity 的应用程序。

[对于关于 android.test.runner 的报告，根据这里](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_software_features.html)的文档应该没问题，所以这可能只是关于外部库使用的警告。

# jquery - 在回发时保留动态生成的复选框的值

> ID：14702721
> 
> 赞同：1
> 
> 时间：2013-02-05T08:06:43.340
> 
> 标签：jquery, asp.net-mvc, c#-4.0, asp.net-mvc-4, dynamic-content

在我的在线注册应用程序中，我创建了两个模型，如下所示。TeamModel 用于存储有关团队和项目的信息，而 MemberModel 将包含有关团队成员的信息。

```
public class MemberModel
{
    [Display(Name = "Member Name")]
        public string MemberName { get; set; }

    [Display(Name = "Speciality")]
        public string Speciality { get; set; }

    public bool IsLeader { get; set; }
}

public class TeamModel
{
    [Display(Name = "Team Name")]
        public string TeamName { get; set; }

    [Display(Name = "Project Name")]
        public string ProjectName { get; set; }

    [Display(Name = "Project Details")]
        public string ProjectDetails { get; set; }

    public List<MemberModel> MemberModel { get; set; }

} 
```

一个团队可以包含任意数量的成员，所以我在 TeamModel 中列出了 MemberModel。最初在渲染模型时，我用 5 个空白元素实例化了 MemberModel。因此，在我看来，将有 5 个成员的表格，其中包含“添加更多成员”链接。

现在，当用户单击“添加更多成员”链接时，我将检查是否所有 5 行都已填充？如果是这样，我将使用 jQuery 添加一个新行。这两个功能都实现如下。

```
$("#AddMoreMember").click(function () {
        var rowCount = $("#tblOptions tr:gt(0)").length;
        var MemberName = "MemberModel[" + rowCount + "].MemberName";
        var MemberId = "Member" + rowCount;
        var Speciality = "MemberModel[" + rowCount + "].Speciality";
        var SpecialityId = "Speciality" + rowCount;
        var IsLeader = "MemberModel[" + rowCount + "].IsLeader";
        var LeaderId = "Leader" + rowCount;
        var flag = false;
        for (var i = 0; i < rowCount; i++) {
            var UserDetail = "MemberModel_" + i + "__MemberName";
            var value = $("#" + UserDetail).val();
            if (value == null || value == "") {
                flag = true;
            }
        }

        if (flag == false) {
            var NameTag = '<input type="text" value="" style="width:200px" maxlength="1000"  name="' + MemberName + '" id = "' + MemberId + '" data-val-regex-pattern="^[^&lt;&gt;~%^;/|]+" data-val-regex="^&amp;lt;&amp;gt;~%;/| characters are not allowed in option" data-val="true" class="input-validation-error">';
            var SpecialityTag = '<input type="text" value="" style="width:200px" maxlength="1000"  name="' + Speciality + '" id = "' + SpecialityId + '" data-val-regex-pattern="^[^&lt;&gt;~%^;/|]+" data-val-regex="^&amp;lt;&amp;gt;~%;/| characters are not allowed in option" data-val="true" class="input-validation-error">';
            var LeaderTag = '<input type="checkbox" value="false" onclick="CheckDefault(this);" name="' + IsLeader + '" id="' + LeaderId + '">';
            var html = '<tr><td align="left" style="width: 30%">' + NameTag + '</td><td align="left" style="width: 30%">' + SpecialityTag + '</td><td align="left" style="width: 30%">' + LeaderTag + '</td></tr>';
            $("#tblOptions tr:last").after(html);
        }
    });

    function CheckDefault(obj)
    {
        var id = $(obj).attr("id");
        $("input:checkbox[id*=MemberModel]").each(
            function(){
                var radioID = $(this).attr("id");
                if (radioID != id)
                {
                    $("#" + radioID).prop("checked",false);
                }
            }
        );
    } 
```

现在，当我添加更多行并选择 IsLeader 复选框时，它不会在返回到 post 方法时保留它的值。

我应该如何处理动态生成的复选框值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:10:15.710

> 我应该如何处理动态生成的复选框值？

阅读[`following article`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)并使用非顺序索引来获取动态生成的输入字段的名称。在这篇文章中，Steven Sanderson 展示了一个非常有用的助手`Html.BeginCollectionItem`，可以让您实现这一目标。

# sql - 从查询中获取附加列

> ID：14702725
> 
> 赞同：0
> 
> 时间：2013-02-05T08:06:53.760
> 
> 标签：sql, sql-server-2008-r2

我在下面有这个查询，我在超市数据库上使用它来查看使用 SQL Server 2008 可在线销售 SAP DB 的商品。

```
SELECT T0.[CodeBars], T0.[ItemName], T3.[Price], T1.[Price], T2.[ItmsGrpNam]
FROM OITM T0 INNER JOIN ITM1 T1 ON T0.ItemCode = T1.ItemCode 
INNER JOIN OITB T2 ON T0.ItmsGrpCod = T2.ItmsGrpCod 
INNER JOIN ITM1 T3 ON T0.ItemCode = T3.ItemCode 
WHERE T0.[U_Online] = 'Y' AND T1.[PriceList] = '3' AND T3.[Pricelist]='1' 
```

查询工作正常，但我想为 OnHand 项目添加另一列。即特定仓库“6”的库存物品，所有在线销售的物品都来自该仓库。超市有8个仓库。显示在线销售的`T0.[U_Online] = 'Y'`商品，无论仓库如何。

如何修改下面的查询，以便对于每个`T0.[CodeBars]`退货，我都会为仓库 6 的 Onhand items 获得一个额外的列？我对表 OITW 有一个额外的连接。

```
SELECT T0.[CodeBars], T0.[ItemName], T3.[Price], T1.[Price], T2.[ItmsGrpNam],
T4.OnHand
FROM OITM T0 INNER JOIN ITM1 T1 ON T0.ItemCode = T1.ItemCode 
INNER JOIN OITB T2 ON T0.ItmsGrpCod = T2.ItmsGrpCod 
INNER JOIN ITM1 T3 ON T0.ItemCode = T3.ItemCode 
INNER JOIN OITW T4 ON T0.ItemCode = T4.ItemCode
WHERE T0.[U_Online] = 'Y' AND T1.[PriceList] = '3' AND T3.[Pricelist]='1'
--AND T4.WhsCode = '6' 
```

第一次查询的示例结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:11:32.867

我认为您可能需要`LEFT JOIN`这样：

```
SELECT 
  T0.[CodeBars], 
  T0.[ItemName], 
  COALESCE(T3.[Price], T1.[Price]) AS Price, 
  T2.[ItmsGrpNam],
  T4.OnHand
FROM       OITM T0 
LEFT JOIN ITM1 T1 ON T0.ItemCode   = T1.ItemCode   AND T1.[PriceList] = '3'
LEFT JOIN OITB T2 ON T0.ItmsGrpCod = T2.ItmsGrpCod 
LEFT JOIN ITM1 T3 ON T0.ItemCode   = T3.ItemCode   AND T3.[Pricelist] = '1'
LEFT JOIN OITW T4 ON T0.ItemCode   = T4.ItemCode   AND T4.WhsCode = '6'
WHERE T0.[U_Online] = 'Y' 
```

# algorithm - 找到从头到尾最长的递增子序列

> ID：14702732
> 
> 赞同：0
> 
> 时间：2013-02-05T08:07:07.280
> 
> 标签：algorithm

如何找到 LIS,subsequence 以及我不能跳过第一个和最后一个元素的约束？

编辑：我的真正意思是我必须从头开始并在最后结束。另外我想将它扩展为之字形子序列，如 [动态编程：查找最长的子序列即之字形](https://stackoverflow.com/questions/6914969/dynamic-programming-find-longest-subsequence-that-is-zig-zag?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:09:51.763

实现典型的 LIS 算法，只需从输入中删除所有小于第一个元素和大于最后一个元素的元素。只考虑不是解决方案的第一个或最后一个元素，然后将这两个附加到您找到的解决方案中。此外，如果最后一个元素不大于第一个元素，则表示没有增加的子序列。

# c# - 如何禁用打开文件 - 安全警告

> ID：14702733
> 
> 赞同：6
> 
> 时间：2013-02-05T08:07:16.367
> 
> 标签：c#, winforms, process, client-server, console-application

我有一个奇怪的问题。我编写了一个 winform 服务器应用程序和一个 winform 客户端应用程序。客户端的作用是向服务器发送运行某个脚本的命令。服务器接收这些命令，解析它们并运行它们。

这两个工作得很好。

我编写了一个 cmd 应用程序，它使用了我客户端的一些功能。该应用程序应该用作 cmd 客户端。

问题是这样的：当我运行 winform 客户端时，服务器运行命令完全没有问题。当我运行cmd客户端时，当服务器尝试执行接收到的命令时，服务器端的Windows会弹出脚本是否可以运行的安全问题（见附图）。

为什么它发生在cmd而不是winforms上。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Win32;
using System.Net.Sockets;
using System.ComponentModel;
using System.IO;
using System.Management;

namespace RemoteBatcher
{
    class ClientCmdProgram
    {
        private static RegistryKey registryKey;
        private static Socket clientSock;
        private static string remoteIpAddress = "192.168.0.1";
        private static int remotePort = 8;
        private static string userName = "";
        private static string targetPath = "Z:\\nBatcher\\";
        private static List<string> listOfCommands = new List<string>();

        static void Main(string[] args)
        {
            var backgroundWorker = new BackgroundWorker();
            userName = RemoteUtils.getConnectedUser();            
            registryKey = Registry.CurrentUser.OpenSubKey("Key");

            if (registryKey == null)
            {
                Console.WriteLine("Error! No Saved Data Was Found In The Registry. Please Run The RemoteBatcherClient App First.");
                Environment.Exit(1);
            }

            if (!connectToServer(backgroundWorker))
                Environment.Exit(1);

            getCommandsList();
            sendCommands(backgroundWorker);
        }
        private static bool connectToServer(BackgroundWorker backgroundWorker)
        {
            try
            {
                clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                clientSock.Connect(remoteIpAddress, remotePort);
                backgroundWorker.DoWork += (sender1, e1) => RemoteUtils.copyDllsToServer(targetPath += userName);
                backgroundWorker.RunWorkerAsync();
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
                return false;
            }

            return true;
        }
        private static void getCommandsList()
        {
            string[] commandsInRegistry = registryKey.GetValueNames();

            for (int i = 0; i < commandsInRegistry.Length; i++)
            {
                listOfCommands.Add(registryKey.GetValue(commandsInRegistry[i]).ToString());
            }
        }
        private static void sendCommands(BackgroundWorker backgroundWorker)
        {
            int flicker = 100;
            int counter = 100;
            try
            {

                while (backgroundWorker.IsBusy) 
                {
                    if (counter == flicker)
                    {
                        counter = 1;
                        Console.WriteLine("Copying Executable Files, Please Wait..");
                    }
                    else if (counter == 50)
                    {
                        Console.Clear();
                    }
                    else
                        counter++;
                }

                for (int i = 0; i < listOfCommands.Count; i++)
                {
                    clientSock.Send(Encoding.Default.GetBytes(listOfCommands[i] + " <eom> "));
                }
                clientSock.Close();
                clientSock.Dispose();
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
                Environment.Exit(1);
            }

        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T08:27:39.093

[如何在 windows xp 中禁用打开文件 - 安全警告？](http://answers.yahoo.com/question/index?qid=20061107232556AAsBdFe)

要禁用警告，请启动组策略编辑器（开始 > 运行，键入 -gpedit.msc- 并按 OK）并转到：

- 用户配置 > 管理模板 > Windows 组件 > 附件管理器 - 然后将 - 低文件类型的包含列表 - 设置为已启用，并在框中输入您不想被警告的文件类型（例如：.exe）。

# ruby-on-rails - Rails：物品未从购物车中删除

> ID：14702734
> 
> 赞同：1
> 
> 时间：2013-02-05T08:07:18.163
> 
> 标签：ruby-on-rails, cart

我正在开发带有购物车和 line_items 的 Order 应用程序。删除购物车中的 line_item 时遇到问题。单击删除项目时，没有任何反应。谁能告诉我，我哪里出错了？我在订单中的 cart.html.erb

```
<% @order.line_items.each do |item| %>
      <%= link_to "remove item", item, :method => :delete, :confirm => "Are you sure?",:remote => true %>
<% end %> 
```

我的订单控制器有：

```
def cart
    @order = current_or_guest_user.orders.includes(:line_items=>[:product]).last
end 
```

我在 line_items 控制器中定义了删除项目方法：

```
 def destroy
             line_item.destroy
             redirect_to cart_orders_path
 end 
```

订购型号为：

```
belongs_to :user
attr_accessible :completed_at, :email, :item_total, :number, :payment_state, :payment_total, :special_instructions, :state, :total
has_many :line_items, :dependent => :destroy 
```

订单项型号为：

```
belongs_to :product
belongs_to :order
attr_accessible :price, :quantity, :product_id 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:17:20.357

您的代码中有多个不一致之处。一方面，我不知道您是否只是缺少一段代码，但您没有加载要删除的 line_item：

```
def destroy
         @line_item = LineItem.find(params[:id])
         @line_item.destroy
         redirect_to cart_orders_path
end 
```

其次，您在销毁链接上指定 :remote => true ，这会打开 AJAX 模式，但随后您只需在销毁操作中重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:29:59.853

1.  你有 line_item.destroy 的路线吗？请告诉我们您的路线。
2.  当你按下“删除项目”时你会调用destroy方法吗？执行类似的 ````
    def destroy
      print "Line item destroy method called"
      line_item.destroy
      redirect_to cart_orders_path
    end

    ```` 操作，然后尝试单击“删除项目”链接。是否在您的服务器日志中打印了字符串“Line item destroy method called”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:17:34.083

首先找到要销毁的对象

```
def destroy
  line_item = LineItem.find(params[:id])
  line_item.destroy
  redirect_to cart_orders_path
end 
```

# php - While 循环测试替代方案

> ID：14702737
> 
> 赞同：1
> 
> 时间：2013-02-05T08:07:33.187
> 
> 标签：php, coding-style

我有一些非常丑陋的代码，我需要帮助来清理它。我相信一定有更好的方法。我有一个 $_POST 变量，其中包含条目 start_doy0、start_doy1、start_doy2 等。

后面的条目我没有填写，我需要找出他们填写的内容。我不能从 $completed_index = -1 开始，因为没有 start_doy-1。

```
#Assume at least one line full, index 0.
$completed_index = 0;
 while (!empty($_POST['start_doy'.$completed_index]))
 {
 $completed_index++;
 }

# $_POST['start_doy'.$completed_index] was empty, decrement $completed_index.
$completed_index--; 
```

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:12:56.017

您可以删除一些括号并将其更改为`isset`，但除此之外，代码对我来说看起来很干净：

```
$completed_index = 0; # assume at least one line full, index 0.
while(isset($_POST['start_doy'.$completed_index])) $completed_index++;
$completed_index--; # $_POST['start_doy'.$completed_index] was empty, decrement $completed_index. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:18:11.590

您可以像这样使用“计数”功能：

```
$completed_index = count($_POST); 
```

然后删除其他元素。例如，如果您有两个其他元素，请执行以下操作：

```
$completed_index -=2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:43:17.040

有几个解决方案，取决于你可以改变多少调用代码，以及是否保证start_doy字段按顺序填写（即用户不能填写start_doy9，但不能填写start_doy2）。

选项 1：更改您的 HTML，以便使用数组语法提交表单字段，如下所示：

```
One: <input type="text" name="start_doy[]"/><br/>
Two: <input type="text" name="start_doy[]"/><br/> 
```

在 PHP 端，这将被转换为一个数组，因此您的处理可能是这样的：

```
<?php

$completed_indexes = array();

if(isset($_POST['start_doy']))
{
    foreach($_POST['start_doy'] as $key => $start_doy)
    {
        if(false == empty($start_doy))
            $completed_indexes[] = $key;
    }
}

echo count($completed_indexes);

?> 
```

选项 2：或者如果您无法更改 HTML，或者更喜欢此解决方案，您可以迭代数组并检查键是否与您想要的匹配：

```
<?php

$completed_indexes = array();

foreach($_POST as $key => $value)
{
    if(substr($key,0,9) == "start_doy" && false == empty($value))
        $completed_indexes[] = $key;
}

echo count($completed_indexes);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:15:22.597

*   只需使用[array_filter](http://php.net/manual/en/function.array-filter.php)

算法

```
$clean_post = array_filter( $_POST ); 
```

那么您可以简单地使用所有帖子值

```
foreach ($clean_post as $doy => $value) {
...
} 
```

只有非空值会保留`$clean_post`（这在 C 中通过 PHP 函数更快地完成）。

--

在您当前的算法中：

*   `0`您可能还想检查

算法

```
 $completed_index = -1;
 do {
   $completed_index++;
 } while ( ! empty($_POST['start_doy' . $completed_index])); 
```

结果：`$completed_index`是已完成索引的数量（最后一个索引是`$completed_index-1`或`-1`如果没有）

# makefile - Makefile Vpath 多个 src 目录

> ID：14702740
> 
> 赞同：0
> 
> 时间：2013-02-05T08:07:38.200
> 
> 标签：makefile, subdirectory

我有一个像这样的目录结构

```
edited/
    Betrayal/
        index.md
    Bloodlines/
        cover.jpg
        index.md
    ... 
```

和像这样的 Makefile

```
PANDOC      := pandoc
PANDOC_OPTS := -t epub --smart --toc
EBOOK_CONVERT := ebook-convert

MODULES   := Betrayal Bloodlines Tempest Exile Sacrifice Inferno Fury Revelation Invincible
SRC_DIR   := $(addprefix edited/,$(MODULES))
BUILD_DIR := $(addprefix build/,$(MODULES))

SRC       := $(foreach sdir,$(SRC_DIR),$(wildcard $(sdir)/*.md))
EPUB      := $(patsubst edited/%.md,build/%.epub,$(SRC))
MOBI      := $(patsubst edited/%.md,build/%.mobi,$(SRC))

vpath %.md $(SRC_DIR)

define make-epub
$1/%.epub: %.md
    $(PANDOC) $(PANDOC_OPTS) $$< -o $$@
endef

define make-mobi
$1/%.mobi: $1/%.epub
    $(EBOOK_CONVERT) $$< $$@ >/dev/null
endef

.PHONY: all epubs mobis checkdirs clean

all: checkdirs mobis

epubs: $(EPUB)

mobis: $(MOBI)

checkdirs: $(BUILD_DIR)

$(BUILD_DIR):
    @mkdir -p $@

clean:
    @rm -rfv $(BUILD_DIR)

$(foreach bdir,$(BUILD_DIR),$(eval $(call make-epub,$(bdir))))

$(foreach bdir,$(BUILD_DIR),$(eval $(call make-mobi,$(bdir)))) 
```

（我还没有添加条件来测试封面和元数据，也没有添加通过 mutt 发送电子邮件到 kindle，但这是当前的问题）

唯一的问题是每个目录都有一个 index.md 并且 VPATH 方法将始终从第一个模块 ex 中提取索引

```
pandoc -t epub --smart --toc edited/Betrayal/index.md -o build/Betrayal/index.epub
pandoc -t epub --smart --toc edited/Betrayal/index.md -o build/Bloodlines/index.epub
pandoc -t epub --smart --toc edited/Betrayal/index.md -o build/Tempest/index.epub
pandoc -t epub --smart --toc edited/Betrayal/index.md -o build/Exile/index.epub
... 
```

我可以将每个 index.md 重命名为每个文件夹的唯一名称，`(for d in *; do echo "$d"; cd "$d"; mv index.md "$d".md; cd ..; done)`一切都会正常工作，但我想学习 makefile 语法，并且必须有一种更优雅的方式来处理 src 目录，而无需大量递归 makefile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:51:41.513

您可以完全不使用规则模板和`foreach`结构。请记住，通配符可以匹配路径的大部分：

```
build/%.epub: edited/%.md
    $(PANDOC) $(PANDOC_OPTS) $< -o $@

build/%.mobi: build/%.epub
    $(EBOOK_CONVERT) $< $@ >/dev/null 
```

# ios - 获取所有 ios 应用程序的全局列表

> ID：14702742
> 
> 赞同：4
> 
> 时间：2013-02-05T08:07:42.023
> 
> 标签：ios, list, search

我想对苹果应用商店做一些全球统计。一个瓶颈是至少获取所有当前活动应用程序的 ID（这 9 位数字）。有谁知道获取iOS应用商店中当前活动应用的所有ID的完整列表的方法。更好的是特定类别的所有ID（例如“教育”）。

我尝试了几种方法，但没有一个是可靠的。

在[http://iphoneapplicationlist.com/apps/ipad/](http://iphoneapplicationlist.com/apps/ipad/)上有一个应用程序列表，但该列表在 2012 年 11 月停止。苹果还在[https://itunes.apple.com/us/genre/ios-提供了一个搜索列表education/id6017?mt=8](https://itunes.apple.com/us/genre/ios-education/id6017?mt=8)但这个列表不完整。（如果我将它与其他列表进行比较，则缺少 8000 多个应用程序，尤其是我自己的 :-)）。

所以我的问题是：如果自己可以做一些 php 和 javascript 编程，是否有一种获取所有应用程序的所有应用程序 ID 的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-30T10:21:21.467

我找不到获取*所有*移动应用程序的方法，但 iTunes 站点地图文件似乎包含最近更新的应用程序列表。（我不确定站点地图文件中包含哪些应用程序——一旦解决，我会更新这个答案。）

要获取此列表：

1.  爬取[https://itunes.apple.com/robots.txt](https://itunes.apple.com/robots.txt)。这是它的样子：[![itunes.apple.com robots.txt 文件](../Images/43e20f830ac0453bf623f2943d5fb69d.png)](https://i.stack.imgur.com/1rvFj.png)

2.  抓取那些站点地图文件。他们引用了更多的站点地图文件，这些文件引用了更多的站点地图文件等等。一些站点地图是 XML 格式，一些是 gzip 压缩的 XML 格式，还有一些是 JSON 格式。排除名称中包含`itunes_music`的任何站点地图，因为这些站点地图不包含应用程序。

    有大约**12,500**个感兴趣的站点地图。以每秒 4 个站点地图的速度，您可以在一小时内下载站点地图。

3.  站点地图包含`loc`元素和`xhtml:link[href][rel=alternate]`元素。解析 XML，并获取这些值。

4.  解析每个 URL 以获取区域设置/国家代码和 ID。

我以这种方式发现了 719,344 个 ID。

# drupal-7 - 基于导入提要系统 drupal 7 来自 YouTube 的视频提要

> ID：14702745
> 
> 赞同：0
> 
> 时间：2013-02-05T08:08:09.520
> 
> 标签：drupal-7, youtube-api, feed

如何在 Feeds Import 和 Feeds: Youtube parser module 的帮助下从 feed 中导入 youtube 视频？或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:01:56.520

YouTube API V2 支持 RSS 和 ATOM 提要。这是一个示例 RSS 提要：[https](https://gdata.youtube.com/feeds/api/standardfeeds/most_popular?v=2&alt=rss) ://gdata.youtube.com/feeds/api/standardfeeds/most_popular?v=2&alt=rss ，ATOM 是 V2 中的默认格式，因此提要 URL 为：[https://gdata。 youtube.com/feeds/api/standardfeeds/most_popular?v=2](https://gdata.youtube.com/feeds/api/standardfeeds/most_popular?v=2)。有关更多信息，请参阅[https://developers.google.com/youtube/2.0/developers_guide_protocol](https://developers.google.com/youtube/2.0/developers_guide_protocol)

# windows - 如何在 Windows 上使用 SVN 更新路径超过 255 个字符的签出文件夹？

> ID：14702748
> 
> 赞同：0
> 
> 时间：2013-02-05T08:08:22.833
> 
> 标签：windows, svn, tortoisesvn

我检查了一个使用 TortoiseSVN 的大型项目，它运行良好，我什至可以更新它。但是，当我尝试使用命令行 SlikSVN 客户端更新它时，它会尝试访问不到 255 个字符的相对路径。绝对路径将比 255 个字符长得多。

它停止更新并出现此错误：

`svn: Kann Datei »very\long\path\.svn\text-base\LongClassName.java.svn-base« nicht öffnen: The system cannot find the path specified.` 德语大致翻译为“无法打开文件”

是否可以从批处理文件中更新此文件夹，或者我是否必须将 Eclipse 与 Subversive 或 TortoiseSVN 一起使用，它们似乎没有 255 个字符的限制但不能在批处理文件中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:23:07.023

尝试使用`subst`缩短路径并将 svn 与缩短的路径一起使用：

```
subst X:\ D:\development\projects\yourlongpath\.. 
```

我在最近的一个项目中遇到了类似的问题，并且能够以这种方式解决它。

**编辑**
要更新项目，您可以使用新映射：

```
svn update X:\ 
```

# arrays - SuperCollider：使 [ [1,2], [3,4] ] 变为 [1,2,3,4] 的命令是什么？

> ID：14702749
> 
> 赞同：0
> 
> 时间：2013-02-05T08:08:30.747
> 
> 标签：arrays, multidimensional-array, supercollider

使 [ [1,2], [3,4] ] 变为 [1,2,3,4] 的命令是什么？

*（代别人询问）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:09:12.650

该`.flat`消息是您所追求的：

`[[1,2],[3,4]].flat`

`.flatten`在这种情况下，也有相同的结果（但`.flatten`只会展平一个“级别”，而`.flat`会一直展平为完全平坦的阵列）

# jaxb - JAXB 在 websphere 或 weblogic 上的工作方式不同？

> ID：14702755
> 
> 赞同：1
> 
> 时间：2013-02-05T08:08:54.257
> 
> 标签：jaxb, websphere, weblogic

我在 websphere 上使用 JAXB 部署应用程序时遇到问题。例如，在 weblogic 上，添加一个只包含一个字符串的简单 java 对象是没有问题的。在 websphere 上，它表示该类或其超类在此上下文中是已知的。

“javax.xml.bind.JAXBException：类 ch.tie.iengine.server.method.Object_CreateECH0160$RefId 或其任何超类对此上下文都是未知的。在 com.sun.xml.internal.bind.v2.runtime。 JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:554) 在 ...

或者，如果我尝试在 weblogic 上编组一个抽象类，则没有问题。在 websphere 上，它说具体类需要有一个 @XMLRootElement 注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:33:39.543

这是一个库问题，因为缺少 jaxb.properties。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:45:19.280

从 WebLogic 12.1.1 开始，WebLogic 切换到使用[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)作为默认的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)提供程序。我相信 WebSphere 仍然使用 JAXB 参考实现。这可能解释了您所看到的差异。

**了解更多信息**

*   [http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)

# java - 如何在 Java 中对 Exchange Web 服务连接使用 LDAP 身份验证？

> ID：14702764
> 
> 赞同：5
> 
> 时间：2013-02-05T08:09:12.577
> 
> 标签：java, ldap, exchangewebservices, ewsjavaapi

我尝试编写一个访问 Exchange Web 服务以阅读电子邮件的 Java 应用程序。因此，我使用 Microsoft 提供的 Exchange Web Services ( `EWS`) Java API。

[我已经遇到了几个问题](https://stackoverflow.com/questions/14562153/could-not-establish-the-connection-to-the-exchange-web-service-java-api)，我终于发现应该使用 LDAP 来完成身份验证。不幸的是，我不确定如何做这样的事情。EWS API 是否允许配置连接到 Exchange 服务器时使用的身份验证方案？如果是，如何配置？

这是我用于连接的代码，但它使用默认的身份验证方案，即`NTLM`：

```
String url = "https//my-server/EWS/exchange.asmx";
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
service.setTraceEnabled(true);
service.setCredentials(new WebCredentials("user", "password"));
service.setUrl(url.toURI());

Mailbox mailbox = new Mailbox("foo@bar.com");
FolderId folder = new FolderId(WellKnownFolderName.Inbox, mailbox);
ItemView view = new ItemView(10);
view.getOrderBy().add(ItemSchema.DateTimeReceived, SortDirection.Descending);
FindItemsResults<Item> items = service.findItems(folder, view); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:38:37.303

我们解决了这个问题。事实上，我们有两种解决方案：

在 Microsft EWS API 中，类`NTLM`是错误的。因此，我们使用以下代码为该类重新构建了 JAR：

```
private class NTLM {
    /** Character encoding */
    public static final String DEFAULT_CHARSET = "ASCII";

    /**
    * The character was used by 3.x's NTLM to encode the username and
    * password. Apparently, this is not needed in when passing username,
    * password from NTCredentials to the JCIFS library
    */
    private String credentialCharset = DEFAULT_CHARSET;

    void setCredentialCharset(String credentialCharset) {
           this.credentialCharset = credentialCharset;
    }

    private static final int TYPE_1_FLAGS = NtlmFlags.NTLMSSP_NEGOTIATE_NTLM
                 | NtlmFlags.NTLMSSP_NEGOTIATE_UNICODE
                 | NtlmFlags.NTLMSSP_NEGOTIATE_NTLM2;

    private String generateType1Msg(String host, String domain) {
           jcifs.ntlmssp.Type1Message t1m = new jcifs.ntlmssp.Type1Message(
                        TYPE_1_FLAGS, domain, host);
           return jcifs.util.Base64.encode(t1m.toByteArray());
    }

    private String generateType3Msg(String username, String password,
                 String host, String domain, String challenge) {
           jcifs.ntlmssp.Type2Message t2m;
           try {
                 t2m = new jcifs.ntlmssp.Type2Message(
                               jcifs.util.Base64.decode(challenge));
           } catch (IOException e) {
                 throw new RuntimeException("Invalid Type2 message", e);
           }

           final int type2Flags = t2m.getFlags();
           final int type3Flags = type2Flags
                        & (0xffffffff ^ (NtlmFlags.NTLMSSP_TARGET_TYPE_DOMAIN | NtlmFlags.NTLMSSP_TARGET_TYPE_SERVER));

           jcifs.ntlmssp.Type3Message t3m = new jcifs.ntlmssp.Type3Message(
                        t2m, password, domain, username, host, type3Flags);
           return jcifs.util.Base64.encode(t3m.toByteArray());
    }
} 
```

另一种解决方案是使用[JWebServices](http://www.independentsoft.de/jwebservices/index.html)库（商业）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T15:02:26.027

我们遇到了同样的问题，尽管更改 NTLM 类（如 romaintaz 建议的那样）有效，但它在其他一些地方出现了问题。

但是，有一个更新版本的 EWS Java 库，github 上的 hostet： [https ://github.com/OfficeDev/ews-java-api](https://github.com/OfficeDev/ews-java-api)

它现在使用 apache httpclient 4.4.1，它具有良好的 NTLM 实现。

使用这个库，到目前为止，我们没有更多关于 NTLM 身份验证的问题。

# iphone - 优化 sqlite iphone 中的批量插入性能

> ID：14702774
> 
> 赞同：0
> 
> 时间：2013-02-05T08:09:40.390
> 
> 标签：iphone, sqlite, xcode4.5

我正在尝试在 sqlite 中一次保存 500 多条记录，我到目前为止编写的代码如下所示

方法名称 closeDatabase 关闭数据库的任何打开连接，变量 ContactID 只不过是一个数组，其中填充了我通讯录中存在的人员的 ContactID。

```
sqlite3_exec(databaseRefObj, "开始交易", 0, 0, 0);

                for (NSString *contactIDstr in contactID)
                {
                    const char *insertintoGropsMember = "我在这里插入查询";
                    NSString *groupIDstr = [NSString stringWithFormat:@"%d",grpID];

                    [自我关闭数据库];

                    if(sqlite3_prepare_v2(databaseRefObj, insertintoGropsMember, -1, &sqlstatement, NULL)==SQLITE_OK)
                    {
                        sqlite3_bind_text(sqlstatement, 1, [groupIDstr UTF8String], -1, SQLITE_TRANSIENT);
                        sqlite3_bind_text(sqlstatement, 2, [contactIDstr UTF8String], -1, SQLITE_TRANSIENT);
                        sqlite3_step(sqlstatement);
                    }
                    别的
                    {
                        成功标志 = 否；
                    }

                    sqlite3_finalize(sqlstatement);
                    sqlite3_close(databaseRefObj);
                }

                sqlite3_exec(databaseRefObj, "END TRANSACTION", 0, 0, 0);

```

这里的数据插入过程很慢，我想知道我哪里出错了，或者我应该遵循哪些步骤来优化我的 sqlite 性能。

请注意，我没有在要执行插入的列上使用任何类型的索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:26:34.570

我可以看到您的代码有几个问题：

*   您似乎正在处理过程中关闭数据库。
*   您没有利用语句准备/多重绑定功能。
*   当 sqlite3 将愉快地绑定整数值时，您将整数绑定为文本

试试这个代码：

```
BOOL ok = YES;
sqlite3_exec(databaseRefObj, "BEGIN TRANSACTION", 0, 0, 0);
const char *insertintoGropsMember = "My insert query here";
if (sqlite3_prepare_v2(databaseRefObj, insertintoGropsMember, -1, &sqlstatement, NULL) == SQLITE_OK)
{
    for (NSString *contactIDstr in contactID)
    {
        sqlite3_bind_int(sqlstatement, 1, grpID);
        sqlite3_bind_text(sqlstatement, 2, [contactIDstr UTF8String], -1, 0);
        if (sqlite3_step(sqlstatement) != SQLITE_DONE)
        {
            NSLog(@"Error inserting row: %s", sqlite3_errmsg(databaseRefObj));
            ok = NO;
            break;
        }
        sqlite3_reset(sqlstatement);
    }
    sqlite3_finalize(sqlstatement);

    sqlite3_exec(databaseRefObj, ok ? "COMMIT" : "ROLLBACK", 0, 0, 0);
}
else
{
    NSLog(@"Error preparing statement: %s", sqlite3_errmsg(databaseRefObj));
} 
```

# favicon - 显示的网站图标不正确

> ID：14702775
> 
> 赞同：0
> 
> 时间：2013-02-05T08:09:45.423
> 
> 标签：favicon, google-plus-one

在以下文章[http://www.thecourier.co.uk/news/coming-up-in-tuesday-s-courier-1.67323](http://www.thecourier.co.uk/news/coming-up-in-tuesday-s-courier-1.67323)中使用 Google +1 分享栏显示不正确的网站图标。

我已将 favicon url 设置为[http://www.thecourier.co.uk/media/courier/resource/images/favicon.ico](http://www.thecourier.co.uk/media/courier/resource/images/favicon.ico) 但它显示了一些其他图像。

问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:42:37.437

我的猜测是您的网站图标不包含 16x16 版本。

# dynamics-crm-2011 - 动态 CRM 记录未显示在 OrganizationData 实体集中

> ID：14702777
> 
> 赞同：0
> 
> 时间：2013-02-05T08:09:49.207
> 
> 标签：dynamics-crm-2011

我使用插件在自定义实体中创建了一条记录。
记录显示在实体的视图中，
但不在 XRMServices 实体集中！
我可以从中查看该集中的许多其他记录

```
OrganizationData.svc/{!entitylogicalname}Set 
```

为什么记录在活动记录的视图中可见，但在实体集中不可见？

该实体没有自定义字段，并且创建时使用

```
IOrganizationService.Create({early_bound_entity}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:00:38.663

我想只显示 50 条记录？这是使用 OData 查询检索的默认最大记录数。您可以增加这个数字（检查这[两个](https://community.dynamics.com/product/crm/crmtechnical/b/crminthefield/archive/2012/03/16/how-to-increase-the-50-record-page-limit-on-odata-retrieve-responses-for-dynamics-crm-2011.aspx) [链接](http://blogs.msdn.com/b/crminthefield/archive/2012/03/16/how-to-increase-the-50-record-page-limit-on-odata-retrieve-responses-for-dynamics-crm-2011.aspx)）。

如果您使用 SDK.REST.js，RetrieveMultipleRecords 方法将处理此问题。

希望这可以帮助 ：）

# php - 在 php 中使用键/值对设置 XML

> ID：14702779
> 
> 赞同：0
> 
> 时间：2013-02-05T08:09:50.167
> 
> 标签：php, xml

我有一个xml文件如下：

```
<response uri="/crm/private/xml/SalesOrders/getSearchRecordsByPDC"><result><SalesOrders><row no="1"><FL val="SALESORDERID">580005000000187001</FL><FL val="SO Number">580005000000187002</FL><FL val="Subject">Sales order test from sri 02</FL><FL val="Due Date">2013-03-10</FL><FL val="Carrier">FedEX</FL><FL val="Status">Created</FL><FL val="ACCOUNTID">580005000000088096</FL><FL val="Account Name">Best Western Pavilions</FL><FL val="SMOWNERID">580005000000052003</FL><FL val="Sales Order Owner">Adithya Buddhavarapu</FL><FL val="SMCREATORID">580005000000052003</FL><FL val="Created By">Adithya Buddhavarapu</FL><FL val="MODIFIEDBY">580005000000052003</FL><FL val="Modified By">Adithya Buddhavarapu</FL><FL val="Created Time">2013-01-17 20:32:19</FL><FL val="Modified Time">2013-02-05 07:37:33</FL><FL val="Sub Total">250</FL><FL val="Tax">0</FL><FL val="Adjustment">0</FL><FL val="Grand Total">250</FL><FL val="Product Details"><product no="1"><FL val="Product Id">580005000000171125</FL><FL val="Product Name">The Grilling Maestro</FL><FL val="Unit Price">10.0</FL><FL val="Quantity">20.0</FL><FL val="Quantity in Stock">0.0</FL><FL val="Total">200.0</FL><FL val="Discount">0.0</FL><FL val="Total After Discount">200.0</FL><FL val="List Price">10.0</FL><FL val="Net Total">200.0</FL><FL val="Tax">0.0</FL><FL val="Product Description">null</FL></product><product no="2"><FL val="Product Id">580005000000171131</FL><FL val="Product Name">Uptown Deli   Soup du Jour</FL><FL val="Unit Price">25.0</FL><FL val="Quantity">1.0</FL><FL val="Quantity in Stock">0.0</FL><FL val="Total">50.0</FL><FL val="Discount">1.23</FL><FL val="Total After Discount">23.77</FL><FL val="List Price">25.0</FL><FL val="Net Total">48.77</FL><FL val="Tax">0.0</FL><FL val="Product Description">null</FL></product></FL><FL val="Terms and Conditions">iBanquet T and C</FL><FL val="Description">Sales Order from iBanquet</FL><FL val="Discount">0</FL></row></SalesOrders></result></response> 
```

从这个 xml 文件中，我需要形成一个包含键/值对的数组，例如`array(`SALESORDERID => '580005000000187001' `,`SO Number => '580005000000187002'`, ....`总计 => '250'`,Product Details => array([0]=>(Product Id =>'580005000000171125',Product Name => 'The Grilling Maestro',....,Product Description =>'null'),[1]=>(Product Id => '580005000000171131',....,Product Description =>'null')`

我做了一个尝试：

```
$xml = simplexml_load_file($file_sales_content,'SimpleXMLElement', LIBXML_NOCDATA);
$order_array = array();
//store the Leads record into session according to the first name
foreach($xml->result->SalesOrders->row as $na){
array_push($order_array,$na->FL[0].":".$na->FL[1]."=".$na->FL[2]."^".$na->FL[3]."$".$na->FL[4]);
} 
```

在哪里`$file_sales_content`存储 xml 值。但是在这段代码中，我只能捕获值而不是键。

有谁能够帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:45:30.213

```
$file_sales_content = "test.xml";
$i=0;
$xml = simplexml_load_file($file_sales_content);
$order_array = array();
foreach($xml->result->SalesOrders->row->FL as $na){
    $tag = (String)$na->attributes();
    $order_array[$tag] = (String)$na;
    if($tag == "Product Details"){            
        foreach($na->product as $na_prd){
            $i++;
            foreach($na_prd->FL as $prd_Acc){
                $order_array[$i][(String)$prd_Acc->attributes()] = (String)$prd_Acc;
            }                
        }
    }
}
print_r($order_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:48:19.423

您的代码很接近，但您实际上可以更深入地迭代一个级别。

`SimpleXmlElement`此外，可以使用`[]`符号检索a 的属性。

```
$output = array();
foreach($xml->result->SalesOrders->row->FL as $fl) {
    $output[$fl['val']] = (string)$fl;
} 
```

# wordpress - Wordpress 特色图片自定义简码

> ID：14702782
> 
> 赞同：0
> 
> 时间：2013-02-05T08:09:57.947
> 
> 标签：wordpress, thumbnails, shortcode

我遇到了一个让我头疼的问题。我正在尝试在我的主题 functions.php 文件中创建自定义简码，这将允许我将帖子特色图像插入并放置到帖子中，并将其从左到右对齐.

下面是我最后尝试的代码，我一直在寻找不同的来源并尝试不同的东西无济于事。

```
function featured_img_left() {
if (has_post_thumbnail() ) {
    $image_id = get_post_thumbnail_id();  
    $image_url = wp_get_attachment_image_src($image_id,'medium');  
    $image_url = $image_url[0]; 
} ?>
<img src="<?php $image_url?>" class="pic_left" />
<?php }
add_shortcode ('feat-img-left', 'featured_img_left'); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:46:20.130

哎哟......短代码功能**永远不能打印任何东西**。你已经**返回**结果了！

```
function featured_img_left() {
if (has_post_thumbnail() ) {
    $image_id = get_post_thumbnail_id();  
    $image_url = wp_get_attachment_image_src($image_id,'medium');  
    $image_url = $image_url[0]; 
    $result = '<img src="'.$image_url.'" class="pic_left" />';
    return $result;
}
return;
}
add_shortcode ('feat-img-left', 'featured_img_left'); 
```

# bash - 如何使用 ls 在 Unix 中查找特定日期集的文件

> ID：14702783
> 
> 赞同：14
> 
> 时间：2013-02-05T08:10:04.277
> 
> 标签：bash, unix, command

我在一个目录中有一组文件。我需要查找一组特定日期的文件（例如，如果我需要从 1 月 16 日到 1 月 20 日的文件）。我尝试使用`ls -ltr | grep <date>`，但完成选择文件的步骤太多。有没有更简单的方法来完成这项工作。谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T08:29:53.257

我不确定*您的*目录中有多少文件，但这样的事情应该非常快：

```
ls -al | awk '$6 == "Jan" && $7 >= 16 && $7 <= 20 {print $9}' 
```

在我的系统上，我看到以下日期略有修改：

```
pax> ls -al | awk '$6 == "Jan" && $7 >= 16 && $7 <= 29 {print $9}'
kids_shares.ods
our_savings.gnumeric
photos

pax> ls -ald kids_shares.ods our_savings.gnumeric photos
-rw-r--r--   1 pax pax 51005 Jan 29 19:39 kids_shares.ods
-rw-r--r--   1 pax pax  2275 Jan 28 14:48 our_savings.gnumeric
drwxrwxrwx 130 pax pax  4096 Jan 29 21:47 photos 
```

您可以看到给定文件的日期匹配。

需要注意的一件事：如果文件是最近的，它将在第 8 列中有一个时间。超过某个年龄，`ls`开始将年份放在那里。我模糊地记得它在六个月大的边界附近的某个地方，但我不确定。您还需要满足这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-05T08:25:41.437

改用[`find(1)`](http://linux.die.net/man/1/find)，那会容易得多。

```
find . -mtime -$start -mtime +$end 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-05T08:36:37.913

你最好使用`find`. 首先创建两个具有特定时间的临时文件进行搜索。`touch`可以这样做：

```
touch -t "201301160001" ./start
touch -t "201301202359" ./finish 
```

然后运行`find`：

```
find /path/to/files -type f -newer ./start ! -newer ./finish 
```

# node.js - node.js 缓冲区二进制输出不同

> ID：14702785
> 
> 赞同：1
> 
> 时间：2013-02-05T08:10:06.707
> 
> 标签：node.js, sockets, binary

这让我很困惑。我在 node.js 中有以下套接字服务器（简化）：

```
net.createServer(function (socket) {
    socket.on('data', function (data) {
        var replyData = new Buffer('78780E00C425BA53269830303000006C2D0D0A',
            'hex').toString('binary');
        socket.end(replyData);
    });
}).listen(config.port); 
```

我希望它回复任何客户端的是缓冲区中以十六进制指定的二进制文件，但它实际上回复：78780E00C38425C2BA5326C298303030006C2D0D0A

这是相似的，但不完全是它应该发送的内容。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:13:21.940

这很简单，只需将 a`Buffer`直接传递给您的套接字：

```
var net = require('net');

net.createServer(function (socket) {
  socket.on('data', function (data) {
    socket.end(new Buffer('78780E00C425BA53269830303000006C2D0D0A', 'hex'));
 });
}).listen(config.port); 
```

**编辑**：只需重新阅读您的问题并发现您的问题不是将数据作为二进制获取。尽管如此，我的代码对我有用：

```
laurent ~/dev/test $ wget http://localhost:3001 --output-document=data
laurent ~/dev/test $ hexdump 数据
0000000 78 78 0e 00 c4 25 巴 53 26 98 30 30 30 00 00 6c
0000010 2d 0d 0a                                       
0000013

```

如果你得到不同的东西，请告诉我。

# redirect - CMD - 如果存在

> ID：14702790
> 
> 赞同：1
> 
> 时间：2013-02-05T08:10:36.093
> 
> 标签：redirect, if-statement, cmd, exists

根据我的理解，下面的命令（添加了调试行 - 缩进）应该只将 echo 的输出重定向到一个文件，如果它已经存在的话。

但是，似乎`if exist %test0%` *总是*用回显的输出填充文件（如果不存在则创建它）。

有谁知道出了什么问题？

```
@echo off
type test.bat
set test0="e:\documents and settings\administrator\desktop\test.log"
   echo.&echo.
   if exist %test0% (echo !!Exists!!) else (echo !!Doesn't Exist!!)
(if exist %test0% echo.&echo.&echo -------------------------------------------------&echo.&echo.)>>%test0% 
```

![](../Images/d489622899ac4007033624706c3032fb.png)

文件被创建（！）

![](../Images/754209353375091b10673dbdd63a7bcb.png)

**编辑：**上面是一个简化的例子，不幸的[是 MSalters 的](https://stackoverflow.com/users/15416)回答并不能帮助我解决完整的命令（我希望它会）。完整的一行 if 语句是：
`if exist %test0% (echo.&echo.&echo -------------------------------------------------&echo.&echo.) else (set /p .=<nul)>>%test0%&set errorlevel=0||set errorlevel=1`

我将如何获得`if`与文件匹配的输出的任何条件（希望只有一个对文件的引用，即每个`if`条件中没有一个），并`errorlevel`根据`exist`文件的 ance 进行设置？

任何人都可以帮助解决实际的完整命令问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:17:41.447

你不应该***直接***设置 ERRORLEVEL。该名称保留用于报告先前命令的结果。当您直接设置该值时，您会覆盖预期的功能，并且它不再扩展为实际的 ERRORLEVEL，而是扩展为您设置的值。那可以破坏各种代码。

您可以通过运行具有已知结果的命令强制 ERRORLEVEL 为一个值，必要时将输出重定向到 nul：`ver >nul`将 ERRORLEVEL 设置为 0，`set /p .=<nul`将 ERRORLEVEL 设置为 1。

您可以使用 将 ERRORLEVEL 强制为您选择的任何特定值`cmd /c exit /b N`，其中`N`是一个整数值。

你也有错误的逻辑。无论条件评估为 TRUE 还是 FALSE，您的 IF 命令都会成功（没有错误）。如果要设置 ERRORLEVEL，则需要在带括号的块内进行。

将所有内容放在一行中并没有错，但是我发现在像您这样的复杂语句中使用多行时，代码更易于阅读。我相信以下是您正在寻找的。

```
if exist %test0% (
  echo.
  echo.
  echo -------------------------------------------------
  echo.
  echo.
  ver >nul
) >>%test0% else (
  set /p .=<nul
) 
```

***根据评论进行编辑***

不需要太多改变。

```
if exist %test0% (
  (
    echo.
    echo.
    echo -------------------------------------------------
    echo.
    echo.
    set ERR=0
  ) >>%test0%
) else (
  copy nul %test0%
  set ERR=1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:16:21.373

检查你的括号。`(x) >> output.log`将输出重定向`x`到`output.log`。这意味着无论输出是什么，重定向都会发生，特别是总是创建文件。

现在，如果您编写`if Y (echo Text >> output.log)`重定向将取决于`Y`，并且可能不会发生。

**[编辑]** 对于现在措辞的问题，简单的解决方案似乎是：

1.  基于. `%ERRORLEVEL%`_ `exist %test0%`此时没有发生重定向。
2.  用于`%ERRORLEVEL%`确定要做什么。您可以更改`%test0%`而不更改`%ERRORLEVEL%`.

顺便说一句，[ERRORLEVEL 不是 %ERRORLEVEL%](http://blogs.msdn.com/b/oldnewthing/archive/2008/09/26/8965755.aspx)

# javascript - 如何在 Ajax 中添加 DIV 标签

> ID：14702791
> 
> 赞同：1
> 
> 时间：2013-02-05T08:10:51.820
> 
> 标签：javascript, ajax, html

我试图在 ajax 中插入一个 div 标签，但我不知道如何。到目前为止，这是我的代码：

```
function userLogin(){
var email = $("#login_username_text").val();
var password = $("#login_password_text").val(); 
var login_url = connect_url+'retrieveUser.php?email='+email+"&password="+password;

$.ajax({
       type: 'GET',
        url: login_url,
        async: true,
        jsonpCallback: 'userCallback',
        contentType: "application/json",
        dataType: 'jsonp',
        success: function(json) { 
            is_logged = (json[0].logged==0)?false:true;
            alert(is_logged);
            alert(email);
            alert(password);

            if(is_logged==false){
                alert ("Invalid Username and Password");   //I want to change 
//this into a div tag so that it will be displayed on the page itself and so that
//I can add CSS codes here
            }
        },
        error: function(e) {

        }
}); 
} 
```

我试过`document.getElementById('login_invalid').innerText = 'Invalid Username and Password.';`但没有工作......有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:14:19.230

尝试

```
$("<div/>", {
    "class": "test",
    text: "Invalid Username and Password",
    }).appendTo("body"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:13:04.680

`innerText`不是普遍支持的属性。虽然更标准化的[textContent](https://developer.mozilla.org/en/docs/DOM/Node.textContent)对于阅读内容很有用，但最好使用 innerHTML 来替换 div 的内容。

假设您的 div 存在，您应该使用

```
document.getElementById('login_invalid').innerHTML = 'Invalid Username and Password.'; 
```

或者，正如您显然使用 jQuery

```
$('#login_invalid').html('Invalid Username and Password.'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:26:08.040

您可以附加 div 标签并向其添加类，它将起作用。如果要向此元素添加 Id，可以使用 .attr('attribute_name','attribute_value') 如下：

```
if(is_logged==false){
      $('body').append('<div>Invalid Username and Password</div>').addClass("error").attr('id', 'login_invalid');
 } 
```

# java - 使用中的连接等于 max-pool-size 和过期的 max-wait-time。无法分配更多连接

> ID：14702792
> 
> 赞同：0
> 
> 时间：2013-02-05T08:10:55.557
> 
> 标签：java, database-connection

我正面临以下`HTTP 500`状态问题。

留言说明：

> 服务器遇到内部错误 () 阻止它完成此请求。

例外：

> javax.servlet.ServletException：java.sql.SQLException：分配连接时出错。原因：使用中的连接等于 max-pool-size 和过期的 max-wait-time。无法分配更多连接。

根本原因：

> java.sql.SQLException：分配连接时出错。原因：使用中的连接等于 max-pool-size 和过期的 max-wait-time。无法分配更多连接。
> 
> 注意 GlassFish v3 日志中提供了异常的完整堆栈跟踪及其根本原因。玻璃鱼 v3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:16:06.937

似乎您的应用程序中某处存在连接泄漏。

当您从连接池借用连接并忘记正确关闭它时，它仍然标记为不可用，从而导致您遇到异常。

要定位泄漏，您应该通过应用程序服务器肯定公开的 JMX 连接器监视连接使用情况。

# ipython - 输出中的 ipython notebook rmagic 扩展空白行

> ID：14702796
> 
> 赞同：3
> 
> 时间：2013-02-05T08:11:24.367
> 
> 标签：ipython, ipython-notebook

当我使用 ipython notebook（windows 版本）运行任何 %R 代码时，输​​出在结果之前包含一个 480 x 480 的空白图像。我已经应用了[修复 #2433](https://github.com/ipython/ipython/issues/2533)来让 rmagic 在 Windows 上工作 - 不过，不确定这与空白图像输出有什么关系。有人能帮忙吗？

这是输出的样子： ![在此处输入图像描述](../Images/561d888b1d270130f8c084ef1b9303fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T19:03:08.177

我有同样的问题。我的解决方法是通过'-h 1 -w 1'，所以至少返回的空白很小。如果'-n' 处理这个就好了。

# html - 向表中添加列

> ID：14702799
> 
> 赞同：0
> 
> 时间：2013-02-05T08:11:40.420
> 
> 标签：html, ruby-on-rails, ajax

如何在我的表中添加一列`Users`。

因为我运行了迁移，所以我必须执行以下操作：

```
rails generate migration AddShowmsgColumnToUsers show_msg:boolean 
```

接着：

```
rake db:migrate 
```

但我不确定“ `AddShowmsgColumnToUsers`”。我怎么知道它应该是怎样的？为什么不：`AddShow_msgColumnToUsers`？如果问题是复数和单数，我可以运行`rails console`并检查，但我怎么知道大写字母：ShowMsg/Show_msg/Show_Msg/Showmsg？有没有命令可以帮助我检查它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:49:13.650

如果生成迁移以添加列，则应使用驼峰式或下划线。此外，您不必将“列”放在迁移生成器中，使用 Add...To... 迁移已经知道您正在添加列。

所以要么：

```
rails generate migration AddShowMsgToUsers show_msg:boolean 
```

或者：

```
rails generate migration add_show_msg_to_users show_msg:boolean 
```

是要走的路。迁移生成器将导致以下迁移：

```
class AddShowMsgToUsers < ActiveRecord::Migration
  def change
    add_column :users, :show_msg, :boolean
  end
end 
```

当然，您也可以手动完成所有操作，但生成器的全部意义在于您不需要自己编写所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:35:35.900

在回答您的第一个问题时，只要表名正确就没有关系 - Rails 使用您为列指定的参数而不是迁移的名称。

此外，你应该一次只问一个问题...... ;-)

# visual-c++ - 在 cview 中设置 MFC 对话框

> ID：14702801
> 
> 赞同：2
> 
> 时间：2013-02-05T08:11:47.830
> 
> 标签：visual-c++, mfc

我在 mfc 中有一个 cdialog，我想将它托管在一个 cview 中，因此当您单击另一个 cview 时，它会出现在顶部，这与普通对话框不同。我尝试将 cview 设置为对话框的父级，但对话框没有出现。有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:17:17.173

创建一个`CFormView`. A`CFormView`基于对话框模板，因此它基本上是一个看起来/行为/工作类似于对话框的视图（除非您做了一些奇怪的事情，否则您现有的对话框模板也应该可以正常工作`CFormView`）。

# python - Python/Tornado – 为什么会出现错误：未定义自我？

> ID：14702803
> 
> 赞同：0
> 
> 时间：2013-02-05T08:11:58.223
> 
> 标签：python, tornado

我刚开始使用 Tornado。我想做的就是单击索引上的提交按钮并通过表单操作发送到登录（到目前为止有效）；但是，我无法让发布的数据登录并使其正常工作。第一个问题是，为什么我会收到错误消息：

```
 password = self.get_argument('password', None)
 NameError: name 'self' is not defined 
```

到目前为止，这是python：

```
 import os

 import tornado.web
 import tornado.ioloop

 class MainHandler(tornado.web.RequestHandler):
      def get(self):
          self.render("index.html")

 class LoginHandler(tornado.web.RequestHandler):
      def post(self):
          useremail = self.get_argument('useremail', None)
          password = self.get_argument('password', None)
          self.render("login.html") 

 def main():
     application = tornado.web.Application([ 
          (r"/", MainHandler),
          (r"/login", LoginHandler), 
          (r"/css/(.*)", tornado.web.StaticFileHandler, {"path": os.path.join(os. path.dirname(__file__), 'css')}),
          (r"/pictures/(.*)", tornado.web.StaticFileHandler, {"path": os.path.join(os.path.dirname(__file__), 'pictures')}),
     ])
     application.listen(8888)
     tornado.ioloop.IOLoop.instance().start()

 if __name__ == "__main__":
     main() 
```

其次，这里还有什么看起来明显错误的地方吗？我非常不确定我应该如何呈现 Login.html 与 Index.html 等网页。

从句法上讲，这似乎也有效：`return self.write(open("index.html", 'r').read())` 与我目前拥有的相比，这到底是做什么的？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:17:55.680

您的缩进很糟糕，混合了空格和制表符。用于`python -tt`验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T01:34:07.650

如果你这样做

```
class MainHandler(tornado.web.RequestHandler):
      def get(self):
          self.render("index.html")
      def post(self):
          self.render("index.html") 
```

它也会为 POST 提供 index.html。.

# vb.net - 如何使用 CheckIfPrime

> ID：14702811
> 
> 赞同：3
> 
> 时间：2013-02-05T08:12:35.477
> 
> 标签：vb.net

我需要`CheckIfPrime`在我的代码中使用该项目，但是有一些问题，我可以知道我应该如何处理它吗？我需要申报吗？

```
For number As Integer = 1 To 30
    If CheckIfPrime(number) = True Then
        sb.Append(number.ToString & " ")
    End If
Next 
```

请就如何在 Visual Basic 中做到这一点提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:22:10.833

`VB.net`没有方法，因此`CheckIfPrime`要在您的任务中处理它，我们需要创建一个方法来检查数字是否为素*数**。*

```
 Public Function CheckIfPrime(number As Integer) As Boolean
        For i As Integer = 2 To number - 1
            If number Mod i = 0 Then
                Return False
            End If
        Next
        Return True
    End Function 
```

**用法**

```
 For number As Integer = 1 To 30
      If CheckIfPrime(number) = True Then
       'Console.WriteLine(number.ToString & " ")
       sb.Append(number.ToString & " ")
      End If
   Next 
```

[`Source`](https://stackoverflow.com/a/10194599/1080742)

# applet - SecurityException：升级到 JRE 1.7.0_13 后的小程序类名称错误

> ID：14702813
> 
> 赞同：3
> 
> 时间：2013-02-05T08:12:39.200
> 
> 标签：applet, java

升级到 JRE 1.7.0_13 后，我的 Applet 不再运行。我收到以下安全异常：

```
basic: Fortschritts-Listener hinzugefügt: sun.plugin.util.ProgressMonitorAdapter@25a091
basic: Ausnahme: Bad applet class name.
ExitException[ 3]java.lang.SecurityException: Bad applet class name
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
basic: Fortschritts-Listener entfernt: sun.plugin.util.ProgressMonitorAdapter@25a091 
```

棘手的是小程序不是从网络服务器加载，而是安装在 JRE lib/ext 目录中。

我认为 _013 引入了“错误的小程序类名称”，因为我没有找到任何有关它的信息。该消息没有给我任何有关更改内容的提示。

下面是小程序在网页中的嵌入。

```
<embed table="some param" anzahl="506" 
    type="application/x-java-applet" 
    code="ArtefakteApplet.class" 
    name="artefakteApplet" 
    id="artefakteApplet" 
    height="550" width="1020"> 
```

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:04:48.487

> ..安装在 JRE lib/ext 目录中。

不要那样做。在甲骨文收购它们之前，Sun 多年来一直警告我们不要这样做。

> 有人知道该怎么做吗？

首先要做的是将小程序从该位置移动到一个公共的、可访问的目录，然后再试一次。另外，不要使用`embed`元素。`deployJava.js`作为嵌入小程序的可靠方式提供。

# python - 模型类或单独类中的权限管理？

> ID：14702820
> 
> 赞同：0
> 
> 时间：2013-02-05T08:13:01.540
> 
> 标签：python, architecture

我正面临一个架构问题。

我必须管理对某些资源具有禁止和授权的用户的权限。

我想要一种方法来获得资源的真正应用权限（禁止优先于授权）。

拥有一个带有方法 get_rights(user) 的类 RightsManager 还是拥有一个带有方法 get_rights() 的 User 类更好

我认为第二种解决方案更好，因为它的参数较少，但是在模型User类中进行权限管理很奇怪。将它放在 RightsManager 类中不是更合乎逻辑吗？

我的程序是用python编写的，但我认为没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:31:01.580

用户实体可以在没有权限的情况下存在，因此最好不要将用户与权限耦合。将权限与用户分开维护，并在调用 get_rights 时将用户作为参数传递。如果这变得很冗长，您可以将 RightsManager 扩展为 UserRightsManager 之类的东西，在初始化期间可以传递用户，并且可以在查询权限时在内部使用用户。

我在过去相当广泛地使用了 Zend_Acl，发现他们的架构非常直观和有效。也许您可能想在进一步[http://framework.zend.com/manual/1.12/en/zend.acl.advanced.html之前检查一下](http://framework.zend.com/manual/1.12/en/zend.acl.advanced.html)

# javascript - IntelliJ IDEA：有没有办法自动格式化 Javascript 对象文字？

> ID：14702826
> 
> 赞同：1
> 
> 时间：2013-02-05T08:13:27.647
> 
> 标签：javascript, intellij-idea

我正在寻找一种在 IntelliJ IDEA 中自动格式化 Javascript 对象文字的方法。我检查了设置 > 代码样式 > Javascript，但在那里找不到类似的东西。

让我举一个我想要的例子。我要这个：

```
var a = { prop1: 'abc', prop2: 'def'
         , prop3: 'ghi' }; 
```

像这样自动格式化：

```
var a = {
    prop1: 'abc',
    prop2: 'def',
    prop3: 'ghi'
} 
```

我正在使用 IDEA 12.0.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:28:36.047

有一个[相关的功能请求](http://youtrack.jetbrains.com/issue/WEB-6375)，星/投票来跟踪进度。

# iphone - KAL 日历，如何实现 KalDataSource 以便我可以显示 iOS 内置日历应用程序中的事件？

> ID：14702829
> 
> 赞同：0
> 
> 时间：2013-02-05T08:13:35.237
> 
> 标签：iphone, ios, kal

我已成功在我的应用程序中集成 Kal 日历，这是我显示日历的方法

```
-(void)showDepartDatePicker{
    NSLog(@"showDepartDatePicker");
    if(_departDatePicker != nil){
        [self.navigationController pushViewController:_departDatePicker animated:YES];
    }else{
        _departDatePicker = [[KalViewController alloc] init];
        _departDatePicker.title = @"Departure Date";
        _departDatePicker.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Today" style:UIBarButtonItemStyleBordered target:self action:@selector(showAndSelectTodayDeparturePicker)];
        _departDatePicker.kvcDelegate = self;
        [self.navigationController pushViewController:_departDatePicker animated:YES];
    }

} 
```

我在 KalViewController.h 中添加了以下内容，

```
@protocol KalViewControllerDelegate <NSObject>
@required
- (void)didSelectDate:(KalDate *)date andLoaded:(BOOL)loaded;

@end 
```

和

```
@property (nonatomic, assign) id <KalViewControllerDelegate> kvcDelegate; 
```

并在我的 viewController 中实现了这个委托方法

```
- (void)didSelectDate:(KalDate *)date andLoaded:(BOOL)loaded
{
    NSLog(@"Title : %@",[self.navigationController.visibleViewController title]);
    [self.navigationController popViewControllerAnimated:YES];
} 
```

现在，根据我的问题，我想实现 KalDataSource 以便它显示标有事件的日期并选择它在月视图下方可用的表视图中显示事件详细信息。
如果您是 Kal 日历的新手，请参阅此链接[https://github.com/klazuka/Kal](https://github.com/klazuka/Kal)

第二个问题，这是我如何从 KalViewController.m 调用委托方法

```
- (void)didSelectDate:(KalDate *)date
{
  self.selectedDate = [date NSDate];
  NSDate *from = [[date NSDate] cc_dateByMovingToBeginningOfDay];
  NSDate *to = [[date NSDate] cc_dateByMovingToEndOfDay];
  [self clearTable];
  [dataSource loadItemsFromDate:from toDate:to];
  [tableView reloadData];
  [tableView flashScrollIndicators];
  //line below calls my delegate method
  [self.kvcDelegate didSelectDate:date andLoaded:_loaded];
} 
```

发生的情况是，当我调用 showDepartDatePicker 将 KalViewController 推送到我的导航堆栈时，它调用我的委托方法 2 次（应该在日期选择时调用），然后对于每个日期选择再次调用该委托方法（1 次）。

即使我想限制这个日历不显示过去的日期！请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T15:06:16.613

1.  定义一个实现`KalDataSource`协议的类。有关类实现`KalDataSource`协议，请参见下面的示例。

    ```
    //header file
    #import Kal.h"
    @interface MyClass : NSObject <KalDataSource>

    @property (nonatomic, weak) id<KalDataSourceCallbacks> kalCallbackDelegate;
    @property (nonatomic, strong) NSArray *events;

    @end

    ----------------------
    //implementation file

    - (void)presentingDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate delegate:(id<KalDataSourceCallbacks>)callbackDelegate
    {
        //If you already have the events between fromDate and toDate then just call
        [callbackDelegate loadedDataSource:self];

        //Else store the callback variable in a property and do an asyncrhonous 
        //call to load the events.
        self.kalCallbackDelegate = callbackDelegate;

        //When the Asynchronous call is done, call
        [self.kalCallbackDelgate loadedDataSource:self];

    }

    - (void)removeAllItems
    {
        self.eventsForDay = nil;
    }

    - (NSArray *)markedDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate
    {
        //self.events may have multiple events with the same date. This pulls only the unique dates.
        //Also assumes that the object has an eventDate property for the beginning of the day
        NSMutableSet *uniqueDatesSet = [NSMutableSet setWithArray:[self.events valueForKeyPath:@"@distinctUnionOfObjects.eventDate"]];

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self >= %@ && self <= %@", fromDate, toDate];
        NSArray *uniqueDates = [[uniqueDatesSet allObjects] filteredArrayUsingPredicate:predicate];

        return uniqueDates;

    }

    - (void)loadItemsFromDate:(NSDate *)fromDate toDate:(NSDate *)toDate
    {
        //filter for the events that occur between fromDate and toDate
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"eventDate >= %@ && eventDate <= %@", fromDate, toDate];
        NSArray *filteredArray = [self.events filteredArrayUsingPredicate:predicate];

        self.eventsForDay = [filteredArray sortedArrayUsingSelector:@selector(compareByEventTime:)];
    } 
    ```

2.  要呈现 UITableViewCells，`tableView:cellForRowAtIndexPath:`请在您的`KalDataSource`类中实现，就像在`UITableView`.

    ```
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        Event *event = [self.events objectAtIndex:indexPath.row];

        static NSString *identifier = @"MyCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
        if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }

        cell.textLabel.text = event.title;

        return cell;
    } 
    ```

3.  如果您想知道何时`UITableViewCell`选择了 a，请定义一个实现`UITableViewDelegate`协议的类并设置`_departDatePicker.delegate`为等于该类。`UITableViewDelegate`然后您可以在该类中实现常规方法。

    ```
    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        Event *event = [self.events objectAtIndex:indexPath.row];
        MyViewController *viewController = [[UIStoryboard storyboardWithName:@"iPhone" bundle:nil] instantiateViewControllerWithIdentifier:@"eventInfo"];
        viewController.event = event;
        [self.navigationController pushViewController:viewController animated:YES];
    } 
    ```

# css - 当按钮上没有文本时，Primefaces splitButton 呈现问题

> ID：14702830
> 
> 赞同：0
> 
> 时间：2013-02-05T08:13:38.363
> 
> 标签：css, jsf, primefaces

我`splitButton`的按钮上不应该有任何文字。因此，当我尝试通过为`value`属性提供空白值来实现此目的时，按钮会缩小到非常小的尺寸。我希望它保持出现在它旁边的下拉按钮的大小。我没有`actionListener`，因此我需要按钮不显示任何文本。

当按钮不包含文本时，是否没有为按钮设置默认大小？或者是否可以对其应用样式属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:38:25.407

像这样放置 value 属性：

```
value="&#160;" 
```

# java - GWT - JavaScript 调试器的阻力

> ID：14702833
> 
> 赞同：0
> 
> 时间：2013-02-05T08:13:48.357
> 
> 标签：java, javascript, security, gwt

我想问你有关 GWT 安全性的问题。因为 GWT 代码被转换为 JavaScript 代码，所以用户可以使用 JavaScript 调试器更改我的变量的值吗？

例如：我有一个计时器，它从 10:00 计数到 0:00。用户可以通过调试器更改此值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:21:31.933

[是的，他们可以，GWT 通过混淆](https://developers.google.com/web-toolkit/doc/1.6/FAQ_DebuggingAndCompiling#Why_is_my_GWT-generated_JavaScript_gibberish?)输出使其变得更难，但即便如此，浏览器中的调试器也会尝试[格式化代码](http://cristian-radulescu.ro/article/pretty-print-javascript-with-google-chrome.html)以使其可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:17:27.603

**GWT 安全性无法决定 OBF 以及用户是否可以编辑 js。**看看下面的混淆 GWT JS 输出。我不相信这是不安全的，你能找到我是否在使用计数器、计时器等。

![在此处输入图像描述](../Images/cb76dff125493d64289291c07f4b8cff.png)

GWT 的安全性比任何大多数 javascript 框架都要好。GWT 有处理其他非业余安全威胁的指南——

## 参考 - [https://developers.google.com/web-toolkit/articles/security_for_gwt_applications](https://developers.google.com/web-toolkit/articles/security_for_gwt_applications)

# c++ - C++通过构造函数复制对象

> ID：14702834
> 
> 赞同：0
> 
> 时间：2013-02-05T08:14:00.910
> 
> 标签：c++, class, copy

通过将其他对象复制到新类来创建新类时，我遇到了一些问题。据我所知，下面的代码可以工作，但是我的编译器指出它缺少类材料的默认构造函数。据我所知，这不是必需的。我在这里做错了吗？

第一类构造函数：

```
 shadingBatch::shadingBatch(const vertexAttribLayout& layout, const material& batchMaterial){
    dataFormat_ = layout;
    batchMaterial_ = *(new material(batchMaterial));
} 
```

我也试过

```
shadingBatch::shadingBatch(const vertexAttribLayout& layout, const material& batchMaterial){
            dataFormat_ = layout;
            batchMaterial_ = batchMaterial;
        } 
```

但是会返回相同的编译器错误。

二等定义

```
 class material {
protected:
    shader shader_;
public:
    material (const shader* shaderProgram);
    material (const material&);
    ~material();

    void compileShader();
} ; 
```

第二类复制构造函数

```
material::material(const material& other){
        shader_ = *(new shader(other.shader_));
    } 
```

编辑：根据要求，

一级定义

```
class shadingBatch {
    friend class cheeseRenderer;
protected:
    std::vector<primitive*> primitives_;
    std::vector<vertex> vertices_;
    std::vector<GLuint> elements_;
    vertexAttribLayout dataFormat_;
    material batchMaterial_;
    GLuint VAO_;
    GLuint VBO_;
    GLuint EBO_;
public:
    ~shadingBatch();
    GLuint updateBatch (void);
    void addPrimitive (primitive*);
    shadingBatch(const vertexAttribLayout&, const material&);
private:
    void updatePrimitives (void);
    void setVertexAttributes(void);
} ; 
```

以及调用构造函数的位置：

```
shader* defaultShader = new shader(fragmentSource,vertexSource);
material* defaultMaterial = new material(defaultShader);
vertexAttribLayout* defaultVertexData = new vertexAttribLayout();
shadingBatch* batch = new shadingBatch(*defaultVertexData,*defaultMaterial);
cheeseRenderer renderer(*batch); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:17:57.227

首先，你应该使用初始化列表。任何未在初始化列表中显式初始化的成员变量对象都将在执行构造函数主体之前调用它的默认构造函数。然后你也做新的，但永远不要删除它（因为你丢失了指针），所以你的构造函数会泄漏内存。试试这个：

```
shadingBatch::shadingBatch(const vertexAttribLayout& layout, 
                           const material& batchMaterial) :
    dataFormat_(layout)
   ,batchMaterial_(batchMaterial)
{
} 
```

上面假设`dataFormat_`和`batchMaterial_`都是 class 的成员变量`shadingBatch`，并且它们在类定义中以该顺序声明，因此如果不是这样，请根据需要进行修复。

* * *

您`material::material`还存在内存泄漏和默认构造函数问题，因此您需要以下内容：

```
material::material(const material& other) : shader_(other.shader_) {} 
```

（如果还有更多工作要做，可能还有更多初始化代码，但你明白了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:19:43.690

您所做的不是构建对象，而是在构建内部对象*后将*参数复制到内部对象中。您想查找初始化列表的概念。您要实现的构造函数如下所示：

```
shadingBatch::shadingBatch(const vertexAttribLayout& layout, const material& batchMaterial)
  : dataFormat_(layout), batchMaterial_(batchMaterial) // <-- initialization list
{} 
```

如果您没有在初始化列表中显式初始化您的类成员，它们将被默认构造。或者至少，编译器会尝试。Material 似乎没有默认构造函数，因此编译器在您的两次尝试中都会抱怨。

旁注：第一次构造函数尝试有另一个错误，内存泄漏，因为您通过创建一个对象`new`并且既不存储也不删除结果指针，它的内存（和对象本身）将永远丢失。

# iphone - 为流式音频创建滑块和自定义 ActivityIndi cator

> ID：14702835
> 
> 赞同：1
> 
> 时间：2013-02-05T08:14:01.603
> 
> 标签：iphone, ios, objective-c, ipad, uiactivityindicatorview

![在此处输入图像描述](../Images/0f0e55d89dc4f0b590b41a507fe5dd5f.png)

我正在使用流媒体`URL`，我需要创建一个`UISlider`（*控制音量*）和一个指示器（缓冲/加载），如上图中的一个。我正在使用的代码是

```
 _theAudio=[[AVPlayer alloc] initWithURL:streamURL];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
    [[AVAudioSession sharedInstance] setActive: YES error: nil];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [_theAudio play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:39:33.623

参考这个[链接](http://eureka.ykyuen.info/2010/06/10/iphone-add-an-uislider-for-avaudioplayer/)

或者

```
 - (void)updateSlider {
// Updates the slider about the music time
slider.value = player.currentTime;
}

- (IBAction)sliderChanged : (UISlider *)sender {
// Fast skips the music when user scrolls the UISlider
[player stop];
[player setCurrentTime:slider.value];
[player prepareToPlay];
[player play];
} 
```

// 当音乐播放完毕时停止计时器

```
- (void)audioPlayerDidFinishPlaying : (AVAudioPlayer *)player successfully : (BOOL)flag {
// Music completed
if (flag) {
[sliderTimer invalidate];
}
} 
```

**对于音量控制，**您可以在 sliderValue_changed 委托中添加以下行

```
[audioPlayer setVolume:slider.value]; 
```

但首先将最小滑块值设置为 0，将最大值设置为 1。

# iphone - 如何在 iPhone 应用程序中创建和管理会话？

> ID：14702836
> 
> 赞同：9
> 
> 时间：2013-02-05T08:14:06.133
> 
> 标签：iphone, ios, session

我有一个使用 wcf Web 服务的应用程序，成功登录后，我想激活一个 10 分钟的会话。如果用户处于空闲状态或应用程序在后台运行了 10 分钟，则会话应该过期并且应用程序应该再次询问登录详细信息。

我已经使用钥匙串来存储用户名和密码并且它可以工作但是我想添加会话，以便如果会话未过期，用户将被重定向到主页，如果会话过期，用户将被重定向到登录页面......

我知道这是一个重复的问题，但我不得不写它，因为我没有从其他问题中得到正确的答案。请帮忙..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T08:35:26.647

使用此[链接](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)这对我有用。

使用**NSUserDefault**为 ios 创建 Session。

我还使用本教程在 ios 中创建了 Session。

**编辑：**

我的应用程序的第一页有一个登录屏幕

如果登录成功由服务器验证，那么我将我的用户名和密码存储在**NSUserDefault**中，如下所示：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
     [defaults setObject:userNameText forKey:@"username"];               
     [defaults setObject:passWordText forKey:@"password"];
     [defaults synchronize]; 
```

**Onclick**登录按钮。并重定向到仪表板。

如果用户单击**注销**，则仪表板中的注销按钮会以这种方式删除所有数据。

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults removeObjectForKey:@"username"];
    [defaults removeObjectForKey:@"password"];
    [defaults synchronize]; 
```

＆在其他情况下，当用户关闭应用程序时，当您第二次打开应用程序时存储 NSUSerDefault 检查**登录****页面** 期间存储在**NSUserDefault**中的**用户名**和**密码**。**`ViewDidAppear`**

 ****```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    // check if user is alraidy Login
    if([defaults objectForKey:@"username"]!=nil  && ![[defaults objectForKey:@"username"] isEqualToString:@""]){
        // Redirected to Dashboard.
} 
```

如果成功则重定向到仪表板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T07:48:25.560

您可以使用[AFNetworking 框架](https://github.com/AFNetworking/AFNetworking)，它会自动存储您的会话，我已经测试了我的 API 并且它有效****

# excel - Excel日期查询

> ID：14702837
> 
> 赞同：0
> 
> 时间：2013-02-05T08:14:11.430
> 
> 标签：excel, excel-formula, excel-2010

我在电子表格顶部有一个包含日期的单元格（比如 2013 年 2 月）。我想从那个“参考”单元格中创建列。换句话说，基于该日期，我希望显示其中一列。但是当我尝试时，它根本不会自动增加日期，而是显示一些随机日期。

02/01/2013
02/02/2013
02/03/2013
..
..
02/28/2013

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:01:42.297

就 excel 而言，excel 中的日期只是从过去任意一天增加的一个数字。例如，键入`2/5/2013`任何单元格。Excel 会自动将此单元格设置为日期格式。现在右键单击并格式化单元格。在数字选项卡下，选择常规，您将看到 Excel 确实将日期存储为`41310`. 使用同样的原则，如果您想根据参考日期增加日期，只需`=A1+1`假设参考日期在 cell 中即可`A1`。例如，输入`2/1/2013`单元格`A1`和列`B`类型`=A1+1`。现在将此单元格向下拖动到您想要的位置。只要列`B`被格式化为日期，它将每天递增。

# c++ - 发送 HTTP 发布请求 BlackBerry 10

> ID：14702839
> 
> 赞同：1
> 
> 时间：2013-02-05T08:14:15.780
> 
> 标签：c++, blackberry-10

我正在基于 C++ 在 BB 10 上开发一个应用程序，我需要将 HTTP 发布请求发送到服务器并检索一些 JSON 数据。是否有一些框架类可以帮助您将 HTTP 发布请求发送到服务器？代码等的任何链接？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:36:34.497

我不记得我在哪个示例应用程序中找到了此代码，但这适用于我的应用程序所需的内容。

在 C++ 中添加以下内容

头文件 (.hpp)

```
public:
    Q_INVOKABLE void doNetworkRequest(QString url);

signals:
void networkReply(const QVariantMap &data);
void networkError();

private Q_SLOTS:
    void handleNetworkData(QNetworkReply *reply);

private:
    QNetworkAccessManager networkManager; 
```

然后在你的主文件（.cpp）中添加这个

这进入主应用程序功能

```
// Hook this signal so we can respond to network replies
connect(&networkManager, SIGNAL(finished(QNetworkReply *)), this,
        SLOT(handleNetworkData(QNetworkReply *))); 
```

添加这些功能：

```
void Top12Wines::doNetworkRequest(QString url)
{
qDebug() << "Request URL " << url;
QUrl qurl = url;
networkManager.get(QNetworkRequest(qurl));
}

void Top12Wines::handleNetworkData(QNetworkReply *reply)
{

if (!reply->error()) {
    qDebug() << "Got network data";
    // Let's get ALL the data
    const QByteArray response(reply->readAll());

    JsonDataAccess jda;
    QVariantMap results = jda.loadFromBuffer(response).toMap();

    emit networkReply(results);

} else {
    qDebug() << "Got network error";
    emit networkError();
}

// Cleanup
reply->deleteLater();
} 
```

然后在您的 QML 中，您可以像这样访问它：

```
 _App.networkReply.connect(checkVersion); //
    _App.networkError.connect(checkVersionError);
    _App.doNetworkRequest("http://myserver/version.json");

function checkVersion(data)
{
    _App.networkReply.disconnect(checkVersion); //disconnect links after retrieving data
    _App.networkError.disconnect(checkVersionError);
    var newVersion = data.version;
}

function checkVersionError()
{
    _App.networkReply.disconnect(checkVersion); //disconnect links after retrieving data
    _App.networkError.disconnect(checkVersionError);        
    //do something to alert user that an error occurred.
} 
```

# java - 如何格式化日期对象的输出（不是字符串）？

> ID：14702845
> 
> 赞同：0
> 
> 时间：2013-02-05T08:14:39.013
> 
> 标签：java, android, android-date

我正在尝试将 Date-Object 传递给 SOAP-API，并且需要 date-object 本身的输出`yyyy-MM-dd`

我已经将我的字符串转换为这样的日期对象：

```
// String __startDatum = "2013-02-05";
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd"); 
Date convertedDate = dateFormat.parse(__startDatum); 
```

现在的输出`convertedDate`将是`Tue Feb 05 00:00:00 MEZ 2013`.

我怎么能改变`convertedDate`to的输出`2013-02-05`？请记住，我仍然需要它是日期对象而不是字符串！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:17:05.753

> 现在，convertDate 的输出将是 Tue Feb 05 00:00:00 MEZ 2013。

没有“输出`convertedDate`”——它*只是*一个`Date`变量。获得“Tue Feb 05 00:00:00 MEZ 2013”​​的唯一方法`toString()`是隐式或显式调用它 - 您无法更改`Date.toString()`.

重要的是要了解 a*只是*`Date`自Unix 纪元以来的毫秒数。它没有时区；它没有日历系统；它没有特定的格式。

 *如果您想要一个更好的 API，它允许您创建一个*仅*表示日期（而不是日期/时间）的对象，您应该查看[Joda Time](http://joda-time.sf.net)，它是一个比内置 API 更好的日期和时间 API。它相当大 - 我相信主要是由于时区数据 - 所以你可能想要寻找为 Android 量身定制的精简版本。不过，与它一起工作主要是一种乐趣——至少与`Date`and相比`Calendar`。*

# javascript - 如何制作 ctrl+f 高亮效果？

> ID：14702850
> 
> 赞同：2
> 
> 时间：2013-02-05T08:14:51.607
> 
> 标签：javascript, jquery

这是一个具有高亮效果的简单搜索功能，但是它会高亮整个单词而不是匹配的字符串。

我怎样才能让它像在浏览器中执行 ctrl+f 一样突出显示匹配单词的一部分？

```
$(document).ready(function(){
    $('input').keyup(function(){

       $("ul li").removeClass('hightlight');

       var searchInput = $(this).val();

        if(searchInput !== ""){
           $("ul li:contains('" + searchInput + "')").addClass('hightlight');
        }

    });
}); 
```

我的在线代码：

[http://jsfiddle.net/dennisboys/5ZEf7/1/](http://jsfiddle.net/dennisboys/5ZEf7/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:26:01.277

使用以下 javascript：

```
$(document).ready(function(){
    $('input').keyup(function(){

       var searchInput = $(this).val();

       $('.hightlight').contents().unwrap();

       if(searchInput !== ""){
            $("ul li:contains('" + searchInput + "')").each(function(i, e) {
                var text = $(this).text().replace(new RegExp(searchInput, 'gm'), '<span class="hightlight">' + searchInput + '</span>');
                $(this).html(text);
            })
        }

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:54:30.050

这是一个带有所需 HTML 和 css 的工作演示。[http://jsfiddle.net/BHqTr/](http://jsfiddle.net/BHqTr/)

```
$("#search").on( "keyup", function() {

        $("#items li span").contents().unwrap();

        $("#items li").each(function(){
            var search = $("#search").val();
            var item = $(this);

            var text = item.text();

            var regex = new RegExp(search, 'g');
            text = text.replace(regex, "<span class='highlight'>"+search+"</span>");
            item.html(text);
        });
    }); 
```

编辑：

这看起来像先前答案的副本，如果需要，可以删除。

# bash - scp 和远程 mkdir -p

> ID：14702853
> 
> 赞同：5
> 
> 时间：2013-02-05T08:15:29.033
> 
> 标签：bash, shell

嗨，我有一些文件路径，例如 /ifshk5/BC_IP/PROJECT/T1 1073/T11073_RICljiR/split/AG19_235/120225_I872_FCC0HN2ACXX_L8_RICljiRSYHSD2-1-IP AAPEK-17_1.fq.gz

我需要将文件从一个 ftp 服务器复制到另一个。如果服务器中不存在目录，还需要创建目录。我登录包含这些文件的服务器然后运行此代码

```
 #! /bin/bash

 while read myline
 do
   for i in $myline
    do
    if [ -f $i ]
    then
    location=$(echo "$i" | awk -F "/" '{ print "", $6, $7, $8 }' OFS="/")
        #location shows /T11073_RICekkR/Fq/AS59_59304
    location="/opt/CLiMB/Storage3/ftp/ftp_climb/100033"$location
    echo $location

    ssh tam@192.168.174.43 mkdir -p $location
    scp -r $i tam@192.168.174.43:$location

    fi
   done
 done < /ifshk5/BC_IP/PROJECT/T11073/T11073_all_3254.fq.list 
```

它有一些问题，1.它不能工作总是显示权限被拒绝，请重试。但是当我直接输入

```
 ssh tam@192.168.174.43 mkdir -p /sample/xxxx 
```

它可以工作，并且新的目录位置是正确的，它显示为 /opt/CLiMB/Storage3/ftp/ftp_climb/100033/T11073_RICekkR/Fq/AS59_59304

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:47:42.783

我看不出“权限被拒绝”错误可能来自哪里；运行脚本`bash -x`以查看导致错误的命令。也许这不是你所期望的。

也尝试`rsync`而不是再次发明轮子：

```
rsync --dirs $i tam@192.168.171.34:$b 
```

`--dirs`将在远程端创建必要的文件夹（当出现故障时它会给你很好的错误消息）。

`rsync`如果两侧的文件夹结构相同，甚至可以通过一次调用来完成所有操作：

```
rsync -avP /ifshk5/BC_IP/PROJECT/T11073/ tam@192.168.171.34:/opt/CLiMB/Storage3/ftp/ftp_climb/100033/ 
```

注意`/`后面的路径！不要忽略它们。

`rsync`将找出需要传输的文件并仅复制那些文件。如果您只想传输一个子集，请使用`--include-from`

# python - Python：读取 TIFFArray 时内存使用量增加

> ID：14702854
> 
> 赞同：2
> 
> 时间：2013-02-05T08:15:28.643
> 
> 标签：python, numpy

我有一个“TIFFFiles”列表，其中每个“TIFFFiles”都包含一个“TIFFArray”，其中包含 60 个 tiff 图像，每个图像的大小为 2776x2080 像素。图像被读取为 numpy.memmap 对象。我想访问图像的所有强度（imgs 的形状：（60,2776,2080））。我使用以下代码：

```
for i in xrange(18):

    #get instance of type TIFFArray from tiff_list
    tiffs = get_tiff_arrays(smp_ppx, type_subfile,tiff_list[i])

    #accessing all intensities from tiffs
    imgs = tiffs[:,:,:] 
```

即使在每个迭代步骤中覆盖“tiffs”和“imgs”，我的内存也会增加 2.6GByte。如何避免在每个迭代步骤中复制数据？有什么办法可以复用2.6GByte的内存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:00:14.557

我知道这可能不是答案，但无论如何它可能会有所帮助，而且评论时间太长了。

前段时间我在读取大型（>1Gb）ascii 文件时遇到了内存问题`numpy`： 基本上是用 读取文件`numpy.loadtxt`，代码使用了整个内存（8Gb）加上一些交换。

据我了解，如果您事先知道要填充的数组的大小，则可以分配它并将其传递给例如`loadtxt`. 这应该可以防止`numpy`分配临时对象，并且在内存方面可能会更好。

[`mmap`](http://docs.python.org/2/library/mmap.html)，或类似的方法，可以帮助提高内存使用率，但我从未使用过它们。

**编辑**

内存使用和释放的问题让我想知道何时尝试解决我的大文件问题。基本上我有

```
def read_f(fname):
    arr = np.loadtxt(fname)  #this uses a lot of memory
    #do operations
    return something  
for f in ["verylargefile", "smallerfile", "evensmallerfile"]:
    result = read_f(f) 
```

从我所做的内存分析来看，返回`loadtxt`时没有内存释放，也没有返回`read_f`并用较小的文件再次调用它。

# java - 为什么 java 编译器不告诉这个转换的“不能转换错误”？

> ID：14702856
> 
> 赞同：4
> 
> 时间：2013-02-05T08:15:35.520
> 
> 标签：java

我只是对一个 java 编译场景感到困惑，它对给定的问题表现得很奇怪。

下面的代码将给出编译错误（不能转换类型），因为 A 和 B 是不同的类，它们之间没有关系。

```
 A a = new A();
        B b = new B();

        B b1 = (B)a;
        A a1 = (A)b; 
```

同样，如果我将 List 和 Map 相互转换，它应该给我编译错误。但它没有给出任何这样的错误，当然我在运行时得到 ClassCastException。

```
 List<String> listObj = new ArrayList<String>();
        Map<Integer,Float> mapObj = new HashMap<Integer,Float>();

        Map newMapObj = (Map) listObj;
        List newListObj = (List) mapObj; 
```

这次调整的原因是什么...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T08:19:10.477

那是因为`Map`和`List`是接口，您可以拥有一个实现两者的类。这对类无效，因为在 Java 中不可能进行多重继承。

* * *

即使这样的用例使编译器看起来很笨（很明显，在这种情况下强制转换永远不会成功），深入研究初始化代码也没有多大意义，因为这需要跟踪所有可能的分配参考：

```
List<String> someOtherList = getSomeOtherList();
List<String> listObj = someOtherList != null ? someOtherList : new ArrayList<String>(); 
```

这将使编译器无法说出`List`这一`listObj`行之后的类型。

即使使用您的简单示例，编译器也需要在您的初始声明`listObj`和强制转换尝试之间跟踪该变量没有其他分配（以便它可以确定肯定`listObj`是 a `ArrayList`）。一旦在分配和演员表之间放置了其他代码行，这种跟踪就会变得痛苦甚至不可能。

* * *

但我确实同意这样的编译器限制可能令人沮丧。我有时会发现以下内容无法编译的事实很烦人：

```
final int i;
try {
    i = Integer.parseInt("someString");
} catch (NumberFormatException e) {
    i = -1;
} 
```

...因为“变量'i'可能已经被分配给”，这显然是不可能的。但是编译器实际上并不关心我的`try`块中的内容，它*假设*a`NumberFormatException`可以在赋值之后被某行代码抛出；所以`i`不能声明`final`。

# c# - 转换为数组

> ID：14702858
> 
> 赞同：1
> 
> 时间：2013-02-05T08:15:39.210
> 
> 标签：c#, text-files

我有地址簿应用程序，并想将最终结果写入文本文件。我很难将我的列表转换为数组，以便我可以执行`WriteAllLines`命令。

界面：

```
abstract class PhoneBookCore {
    protected string _group;

    public PhoneBookCore(string group) {
        this._group=group;
    }

    public abstract void Add(PhoneBookCore d);
}

class Contect: PhoneBookCore {
    private string _firstName;
    private string _lastName;
    private string _phoneNumber;
    private string _addres;

    public Contect(string group, string firstName, string lastName, string phoneNumber, string addres)
        : base(group) {
        this._firstName=firstName;
        this._addres=addres;
        this._lastName=lastName;
        this._phoneNumber=phoneNumber;
    }
}

class Group: PhoneBookCore {
    private List<PhoneBookCore> elements=new List<PhoneBookCore>();

    public List<PhoneBookCore> elementsList {
        get;
        set;
    }

    public Group(string name)
        : base(name) {

    }

    public override void Add(PhoneBookCore d) {
        elements.Add(d);
    }
} 
```

这是我卡住的地方

```
class DataOptins {
    public string Save(Group g) {
        foreach(var item in g) {
            string[] arr=g.elementsList.ToArray();  // <---- :(

        }
        System.IO.File.WriteAllLines(Path, arr); // <---- :(
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:17:50.097

不要`foreach`。只要`ToArray`在你的名单上打电话。但是，在此之前，您需要在组的元素中选择实际的字符串属性。 `Group.elementsList`是一个`PhoneBookCore`对象列表。您无法将它们转换为`string`- 至少不是您的班级当前的样子。因此，要么选择您实际想要的字符串属性：

```
public string Save(Group g)
{
    string[] arr = g.elementsList.Select(x => x.StringProperty).ToArray();
    System.IO.File.WriteAllLines(Path,arr);
} 
```

或覆盖`ToString`并`PhoneBookCore`使用它：

```
public string Save(Group g)
{
    string[] arr = g.elementsList.Select(x => x.ToString()).ToArray();
    System.IO.File.WriteAllLines(Path,arr);
} 
```

最后，您实际上可以`ToArray`完全放弃调用，因为存在`WriteAllLines`接受 a的重载`IEnumerable<string>`：

```
public string Save(Group g)
{
    System.IO.File.WriteAllLines(Path, g.elementsList.Select(x => x.ToString()));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T08:23:42.487

您的代码在许多方面存在缺陷，但我现在将重点关注您的具体问题。

首先，您必须覆盖*Contect*`ToString()`类中的方法：

 *```
public override string ToString()
{
    return string.Format("{0}{1}{2}{1}{3}{1}{4}", _firstName, "\t", _lastName, _phoneNumber, _addres);
} 
```

（这只是一个例子，当然有你自己的格式）

现在有这样的代码将列表变成字符串数组：

```
public string Save(Group g)
{
    string[] lines = g.elementsList.ConvertAll(p => p.ToString()).ToArray();
    System.IO.File.WriteAllLines(Path, lines );
} 
```

现在有了这个和你当前的代码，你会得到一个异常，因为它`g.elementsList`总是*null*。为什么？因为你从不分配它。拥有其他私有成员都很好，但是编译器无法知道当您调用时`elementsList`您实际上需要私有成员`elements`。

将代码更改为：

```
private List<PhoneBookCore> elements = new List<PhoneBookCore>();
public List<PhoneBookCore> elementsList { get { return new List<PhoneBookCore>(elements); } } 
```

而且您将不再有“空异常”。请注意，我使公共属性返回列表的副本，以便调用代码无法更改您的私有成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:30:25.350

1）如果`Add`方法不是所有派生类的要求，请将其声明为**virtual**而不是**abstract**。

2）覆盖`ToString()`你的`Contect`班级。如果有必要，`PhoneBookCore`也覆盖 for。在`Contect`课堂上是这样的：

```
public override String ToString() {
    return
        (new[] { _firstName, _lastName, _phoneNumber, _addres }).Aggregate((a, b) => a+"\t"+b);
} 
```

聚合它们的规则取决于您的要求。

3）让你的`Group`类实现`IEnumerable<String>`有意义的语义，因此你不需要公开`elementsList`. 您需要为此实现`GetEnumerator()`，但这很简单：

```
partial class Group: PhoneBookCore, IEnumerable<String> {
    IEnumerator IEnumerable.GetEnumerator() {
        return this.GetEnumerator();
    }

    public IEnumerator<String> GetEnumerator() {
        return elements.Select(x => x.ToString()).GetEnumerator();
    }
} 
```

当您完成所有这三件事后，您可以简单地实现您的`Save`方法，例如：

```
public string Save(Group g) {
    string[] arr=g.ToArray(); // <---- :(
    System.IO.File.WriteAllLines(Path, arr); // <---- :(

    // notice: you did not show what to return in original code
} 
```

4) 建议将您的班级名称更正为`DataOptins`,`DataOptions`和。`Contect``Contact`

好的，以下是代码的完成（`Save`返回的除外）：

```
abstract class PhoneBookCore {
    protected string _group;

    public PhoneBookCore(string group) {
        this._group=group;
    }

    public virtual void Add(PhoneBookCore d) {
    }
}

class Contect: PhoneBookCore {
    private string _firstName;
    private string _lastName;
    private string _phoneNumber;
    private string _addres;

    public override String ToString() {
        return
            (new[] { _firstName, _lastName, _phoneNumber, _addres }).Aggregate((a, b) => a+"\t"+b);
    }

    public Contect(string group, string firstName, string lastName, string phoneNumber, string addres)
        : base(group) {
        this._firstName=firstName;
        this._addres=addres;
        this._lastName=lastName;
        this._phoneNumber=phoneNumber;
    }
}

class Group: PhoneBookCore, IEnumerable<String> {
    IEnumerator IEnumerable.GetEnumerator() {
        return this.GetEnumerator();
    }

    public IEnumerator<String> GetEnumerator() {
        return elements.Select(x => x.ToString()).GetEnumerator();
    }

    private List<PhoneBookCore> elements=new List<PhoneBookCore>();

    public List<PhoneBookCore> elementsList {
        get;
        set;
    }

    public Group(string name)
        : base(name) {
    }

    public override void Add(PhoneBookCore d) {
        elements.Add(d);
    }
}

class DataOptins {
    public string Save(Group g) {
        string[] arr=g.ToArray(); // <---- :(
        System.IO.File.WriteAllLines(Path, arr); // <---- :(

        // notice: you did not show what to return in original code
    }
} 
```*

# selenium - 无法在 ReportNG HTML 报告中添加屏幕截图

> ID：14702860
> 
> 赞同：2
> 
> 时间：2013-02-05T08:15:45.500
> 
> 标签：selenium, testng, reportng

我正在尝试为失败方法截取屏幕截图，并且还想将其放入我的报告中，我可以截取屏幕截图但无法在 HTML 报告中显示相同的内容。以下是我的代码，朋友们对此有什么线索吗？

```
public class SB1 {
    private static  Logger logger = Logger.getLogger(SB1.class);
    WebDriver driver = new FirefoxDriver();

@Test
public void Testone() {

    driver.get("http://www.google.com/");

    assert false;

}

public void catchExceptions(ITestResult result) {
    System.out.println("result" + result);
    String methodName = result.getName();
    System.out.println(methodName);

    if (!result.isSuccess()) {

        try {

        String failureImageFileName =  new SimpleDateFormat("MM-dd-yyyy_HH-ss").format(new GregorianCalendar().getTime())+ ".png"; 
        File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
        FileUtils.copyFile(scrFile, new File(failureImageFileName)); 

            String userDirector = System.getProperty("user.dir") + "/"; 
            Reporter.log("<a href=\""+ userDirector + failureImageFileName +"\"><img src=\"file:///" + userDirector 
                         + failureImageFileName + "\" alt=\"\""+ "height='100' width='100'/> "+"<br />"); 
            Reporter.setCurrentTestResult(null); 

        } catch (IOException e1) {
            e1.printStackTrace();
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T18:59:50.160

您是否将 ESCAPE_PROPERTY 设置为 false？如果您想要报告发布屏幕截图，这就是您必须做的 -

```
 private static final String ESCAPE_PROPERTY = "org.uncommons.reportng.escape-output"; 
```

并在您的设置中-

```
 System.setProperty(ESCAPE_PROPERTY, "false"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T20:28:29.247

我试过这个。似乎如果您将系统属性设置为 false，它会从整个日志中删除转义...据我所知，报告是在测试后生成的，无论系统属性当时设置为什么。我想插入屏幕截图（与上面的代码一起使用），但我不想删除其他格式（br 标签）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T15:07:07.377

您可以使用以下代码。

```
Reporter.log("<br>Chrome driver launched for ClassOne</br>"); 
```

或者您可以使用自定义方法，您不需要每次都附加 br 标签，使用以下自定义方法。

`public void customLogReport(String testCaseDescription) throws Exception{ try{ Reporter.log("<br>" + testCaseDescription + "</br>"); }catch(Exception e){ e.printStackTrace(); } }`

# wpf - 样式不适用于 GridViewCheckBoxColumn

> ID：14702863
> 
> 赞同：0
> 
> 时间：2013-02-05T08:15:59.507
> 
> 标签：wpf, telerik, radgridview

我想通过单击在具有多个 CheckBox 列的 Telerik RadGridView 中启用编辑，定义如下：

```
 <telerik:RadGridView ItemsSource="{Binding someSource}" AutoGenerateColumns="False">
        <telerik:RadGridView.Columns>
            <telerik:GridViewCheckBoxColumn DataMemberBinding="{Binding someBinding}"/>
            <telerik:GridViewCheckBoxColumn DataMemberBinding="{Binding someBinding1}"/>
            <telerik:GridViewCheckBoxColumn DataMemberBinding="{Binding someBinding2}"/>
        </telerik:RadGridView.Columns>
    </telerik:RadGridView> 
```

我定义了以下样式，但它不起作用

```
 <Style TargetType="{x:Type telerik:GridViewCheckBoxColumn}">
            <Setter Property="AutoSelectOnEdit" Value="True"/>
            <Setter Property="EditTriggers" Value="CellClick"/>
            <Setter Property="IsThreeState" Value="True"/>
        </Style> 
```

这不起作用。但是，如果我将这些属性分别设置为每一列，它就可以正常工作。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T10:14:18.817

我认为您定义样式的方式没有问题，因此它必须是初始部分。

我认为`ItemsSource="{Binding someSource}"`应该是这样的`ItemsSource="{Binding Path= someSource}"`

不太确定，因为我没有尝试过，但希望这有效。

# c# - 电话（设备）的序列号

> ID：14702868
> 
> 赞同：0
> 
> 时间：2013-02-05T08:16:08.000
> 
> 标签：c#, .net, windows-phone

是否可以获得唯一的电话号码（不是 SIM 卡，电话号码，而是设备号码！）？？
设备序列号、生产代码、IMEI 等信息？
我使用 Windows Phone 7.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:05:23.773

```
object uniqueId;
var hexString = string.Empty;
if (DeviceExtendedProperties.TryGetValue("DeviceUniqueId", out uniqueId))
    hexString = BitConverter.ToString((byte[])uniqueId).Replace("-", string.Empty); 
```

不要忘记在应用清单中指定 ID_CAP_IDENTITY_DEVICE 功能。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-05T08:18:58.717

从桌面（主）屏幕键入`*#06#`以获取 IMEI 号

# java - 将整数作为键的映射在将 long 值传递给 get 方法时返回 null

> ID：14702870
> 
> 赞同：6
> 
> 时间：2013-02-05T08:16:13.460
> 
> 标签：java, collections

```
import java.util.HashMap;
import java.util.Map;

public class StackOverFlowQuestion {

private static final int ERROR_CODE100 = -100;
private static final int ERROR_CODE101 = -101;
private static final int ERROR_CODE102 = -102;
private static final int ERROR_CODE103 = -103;
private static final int ERROR_CODE104 = -104;

public enum ErrorDetails {

    ERROR_CODE_100(ERROR_CODE100, "Error code 100 Desc", false),

    ERROR_CODE_101(ERROR_CODE101, "Error code 101 Desc", false),

    ERROR_CODE_102(ERROR_CODE102, "Error code 102 Desc", true),

    ERROR_CODE_103(ERROR_CODE103, "Error code 103 Desc", false),

    ERROR_CODE_104(ERROR_CODE104, "Error code 104 Desc", true);

    private int errorCode;
    private String errorMsg;
    private boolean canRetry;

    private ErrorDetails(int errorCode, String errorMsg, boolean canRetry) {
        this.errorCode = errorCode;
        this.errorMsg = errorMsg;
        this.canRetry = canRetry;
    }

    public String getErrorMsg() {
        return this.errorMsg;
    }

    public boolean canRetry() {
        return this.canRetry;
    }

    public String toString() {
        return "Error code : " + errorCode + ", errorMsg : " + errorMsg
                + ", canRetry : " + canRetry;
    }
}

private Map<Integer, ErrorDetails> errorMap;

public StackOverFlowQuestion() {
    System.out.println("StackOverFlowQuestion.StackOverFlowQuestion()");

    errorMap = new HashMap<Integer, StackOverFlowQuestion.ErrorDetails>();

    errorMap.put(ERROR_CODE100, ErrorDetails.ERROR_CODE_100);
    errorMap.put(ERROR_CODE101, ErrorDetails.ERROR_CODE_101);
    errorMap.put(ERROR_CODE102, ErrorDetails.ERROR_CODE_102);
    errorMap.put(ERROR_CODE103, ErrorDetails.ERROR_CODE_103);
    errorMap.put(ERROR_CODE104, ErrorDetails.ERROR_CODE_104);

    System.out.println("errorMap : " + errorMap);
}

/**
 * @param args
 */
public static void main(String[] args) {
    long param = -100;
    StackOverFlowQuestion question = new StackOverFlowQuestion();
    System.out.println("question.errorMap : " + question.errorMap);

    System.out.println("question.errorMap.containskey(param) : "
            + question.errorMap.containsKey(param));
    ErrorDetails errorDetails = question.errorMap.get(param);
    System.out.println("errorDetails : " + errorDetails);

    System.out.println("question.errorMap.containskey((int)param) : "
            + question.errorMap.containsKey((int) param));
    ErrorDetails errorDetailsWithInt = question.errorMap.get((int) param);
    System.out.println("errorDetailsWithInt : " + errorDetailsWithInt);

            int paramInt = -100;
    System.out.println("param == paramInt : " + (param == paramInt));
} 
```

}

==================================================== ================================ 输出：

```
StackOverFlowQuestion.StackOverFlowQuestion()

errorMap : {-100=Error code : -100, errorMsg : Error code 100 Desc, canRetry : false, -102=Error code : -102, errorMsg : Error code 102 Desc, canRetry : true, -101=Error code : -101, errorMsg : Error code 101 Desc, canRetry : false, -104=Error code : -104, errorMsg : Error code 104 Desc, canRetry : true, -103=Error code : -103, errorMsg : Error code 103 Desc, canRetry : false}

question.errorMap : {-100=Error code : -100, errorMsg : Error code 100 Desc, canRetry : false, -102=Error code : -102, errorMsg : Error code 102 Desc, canRetry : true, -101=Error code : -101, errorMsg : Error code 101 Desc, canRetry : false, -104=Error code : -104, errorMsg : Error code 104 Desc, canRetry : true, -103=Error code : -103, errorMsg : Error code 103 Desc, canRetry : false}

question.errorMap.containskey(param) : false
errorDetails : null

question.errorMap.containskey((int)param) : true
errorDetailsWithInt : Error code : -100, errorMsg : Error code 100 Desc, canRetry : false

param == paramInt : true 
```

==================================================== ================================

这是我需要澄清的几个问题

1.  即使我将参数传递给 HashMap 的 get 方法，该参数被声明为只有 Integer 作为键，代码仍在编译。我在这里期待一个编译错误，因为我觉得这违反了严格的类型。
2.  当我将包含错误代码的长变量作为参数传递给 HashMap() 的 get 方法时，映射返回 null。
3.  当我将相同的 long 参数向下转换为 int 并将其传递给哈希映射的 get 方法时，映射返回正确的枚举。

我怀疑 HashMap.get() 方法中的以下行`if (e.hash == hash && ((k = e.key) == key || key.equals(k)))`

我不确定 int == long 是否会失败或者它们相应的包装器会失败。我什至在 main 方法中添加了一个检查来验证 int 和 long 变量的相等性。

我想了解这里的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T08:20:49.630

> 即使我将参数传递给 HashMap 的 get 方法，该参数被声明为只有 Integer 作为键，代码仍在编译。我在这里期待一个编译错误，因为我觉得这违反了严格的类型。

看签名了[`Map.get`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#get%28java.lang.Object%29)吗？

```
V get(Object key) 
```

*任何*对象都可以用作键。关于该设计决策还有其他 Stack Overflow 问题；稍后我会找到一个。

> 当我将包含错误代码的长变量作为参数传递给 HashMap() 的 get 方法时，映射返回 null。

是的，它会 - 因为它将被装箱到 a `Long`，并且 a`Long`不等于 a `Integer`。因此在地图中找不到该条目。

> 当我将相同的 long 参数向下转换为 int 并将其传递给哈希映射的 get 方法时，映射返回正确的枚举。

是的，它会 - 因为那样它将被装箱到一个`Integer`，这将等于适当的键。

基本上你被你*可以*比较`int`和`long`值的事实所愚弄——这只是编译器自动为你提升`int`的`long`；如果您将`Integer`and`Long`视为完全独立的类型，并且它们之间没有自动转换，那么您的地图行为非常有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:30:23.670

> 1.) 即使我将一个 long 参数传递给 HashMap 的 get 方法，该方法被声明为只有 Integer 作为键，代码仍在编译。我在这里期待一个编译错误，因为我觉得这违反了严格的类型。

这里没有编译错误：具有由泛型类型限制的参数的 Map 的唯一方法是`put`方法。`get`并`containsKey`接受一个`Object`.

> 2.) 当我将包含错误代码的长变量作为参数传递给 HashMap() 的 get 方法时，映射返回 null。

当你调用`get(param)`它时，它会被翻译成`get(new Long(param))`. 所以参数永远不会等于`Integer`键

> 3.) 当我将相同的 long 参数向下转换为 int 并将其传递给哈希映射的 get 方法时，映射返回正确的 Enum。

当你调用`get((int)param)`它时，它会被翻译成`get(new Integer((int)param))`. 所以参数类型现在是正确的，结果就是你所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:22:58.170

您需要将 long 转换为 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T08:29:52.863

**简短的回答是：** Integer == Long 将始终无法相等 ([Long].equal([Integer]) == false) Long.hashCode() == Integer.hashCode() 也不可能返回相同的结果。

**要详细说明该答案：**

由于自动装箱，您的 long 将被转换为 Long，然后将与 Map 中具有相同 hashCode 的任何其他对象进行比较。由于 HashCode 的具体实现不能与 Long 和 Integer 相等，这可能已经失败。如果 hashCodes 是相同的，尽管要进行 equals 检查，这将失败，因为就像每个 equals 方法一样，检查“是 [Type] 的实例”或返回 false。在将 Long 与 Integer 进行比较的每种情况下，这都会失败。

**因此，在您的情况下，您需要做**的就是将 long 转换为 int 或执行 Integer.valueOf((int)param) ，这将完全一样（自动装箱）。

# vb.net - 路径中的非法字符（资源文件）

> ID：14702874
> 
> 赞同：1
> 
> 时间：2013-02-05T08:16:35.573
> 
> 标签：vb.net, com, resources

我有一个 Windows 控件库项目（Visual Studio 2010）。我将编译选项卡放入 com 元素中（我将其用作另一个程序的插件）。

我的问题如下：我的资源中有一个 .cvs 文件，用于解析一些主要设置。当我运行插件时，读取此文件的代码行会出错。代码行：

```
dim reader as new streamReader(My.Resources.standards) 
```

（该文件称为标准）

运行 com 元素时出现的错误：

```
Illegal character in path. 
```

当我将它作为普通的 Windows 窗体项目进行测试时，该程序运行良好。

有人知道怎么修这个东西吗？或者在测试 com 元素时如何进行体面的调试。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:19:31.217

这与 COM 没有任何关系，将其作为导致问题的原因。显然，您的`My.Resources.standards`属性返回一个*字符串*，而不是一个流。当您将文本文件添加为资源时，这很正常。它使 StreamReader 尝试使用 .cvs 资源的内容作为文件的路径打开磁盘上的文件。这当然不会奏效。

您可以改用 StringReader。或者直接使用返回的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T12:26:43.567

将其更改为以下 dim reader = new string(My.Resources.standards) 您现在有一个可以在正则表达式 Cobus 中使用的字符串

# c - 将多个空格变为一个空格的递归形式

> ID：14702877
> 
> 赞同：0
> 
> 时间：2013-02-05T08:16:41.223
> 
> 标签：c

> **可能重复：**
> [我试图使此代码递归但由于某种原因它不起作用](https://stackoverflow.com/questions/14702016/im-trying-to-make-this-code-recursive-but-for-some-reason-it-doesnt-work)

我正在尝试使用 RECURSION 编写程序将多个空格更改为一个空格有人可以帮忙吗？示例“a_______b”更改为“a_b”这是我尝试了很长时间的任务！谁能帮忙？

在这里我尝试了这个，但我认为该设计不适用于递归

```
void text_r(char *str)
{
    char *dst = str;

            if(*str=='\0')return ;
            *dst++ = *str;
            if (isspace(*str)) {
                    do ++str; while (isspace(*str));
                    --str;
            }
          return text_r(str++);
} 
```

我在没有递归的情况下编写了代码，但我在转换它时遇到了问题

void compress_spaces(char *str) { char *dst = str;

```
 for (; *str; ++str) {
            *dst++ = *str;
            if (isspace(*str)) {
                    do ++str; while (isspace(*str));
                    --str;
            }
    }
    *dst = 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:44:22.600

不是最好的方法，但尝试这些方法

```
char* remove_space(char *str)
{
    char *dst = str;

    while(*str!=' ' ||*str !='\0')
        *dst++ = *str;
    if (isspace(*str)) {
            do ++str; while (isspace(*str));
            --str;
    }
  return strcat(dst,remove_space(str++));
} 
```

想法是你找到字符并将它们存储在一个字符串中，当你到达一个空间时，你存储第一个并忽略其余的。然后您可以再次将新字符串发送到该函数。并且您返回与新字符串连接的结果

PS 上面的代码可能无法编译，但它应该让您对如何处理这个问题有一个很好的了解。

稍微阐述一下：

创建一个函数，将所有字符保存到一个空格，然后忽略所有连续的空格并将剩余的字符串发送给一个函数，该函数返回一个干净的字符串。然后它连接两个字符串以形成一个更大的干净字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:54:32.123

递归版本（避免任何迭代部分，如*while*）使用相同的指针，给定两次作为参数

```
void recur(char *str, char *out) {
  if (*str!=' ' || str[1]!=' ') *out++ = *str;
  if (*str) recur(str+1, out);
} 
```

只有一个参数的递归版本

```
void recur(char *str) {
  static char *out = NULL;
  if (out == NULL) out = str;
  if (*str!=' ' || str[1]!=' ') *out++ = *str;
  if (*str) recur(str+1);
} 
```

迭代版本

```
void iter(char *str) {
  char *out = str;
  do {
    if (*str!=' ' || str[1]!=' ') *out++ = *str;
  } while (*str++);
} 
```

被称为

```
 char str[] = "   abc  d e  f   ";
  // either recursive
  recur(str, str);
  // or iterative
  iter(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:17:29.893

这是我的实现。我通过保留最后一个空格字符来替换多个空格的每个带，并在找到非空格字符时删除该带

```
void reduce(String s, int curIndex, int lastSpaceIndex)
    if (lastSpaceIndex != -1)
        if s[curIndex] is not a space
            then replace substring from s[lastSpaceIndex, curIndex-1] by a space
        else
            reduce(s, curIndex+1, lastSpaceIndex);
    else
        if s[curIndex] is not a space
            then reduce(s, curIndex+1, -1)
        else
            reduce(s, curIndex+1, curIndex) 
```

# qt - 没有 QtCreator，exe 文件无法运行

> ID：14702879
> 
> 赞同：13
> 
> 时间：2013-02-05T08:16:55.930
> 
> 标签：qt, qml, qt5, qt-quick, qtquick2

我**为 Windows 32 位安装了 Qt 5.0.1 (MinGW 4.7, 823 MB)**

然后我创建了简单的 Quick 2 应用程序并编译了它。应用程序位于其文件夹中，应用程序从 QtCreator 运行。我想在没有 QtCreator 的情况下运行这个 exe 文件。为此，我从**C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin**复制文件：

1.  Qt5Core.dll
2.  icuin49.dll
3.  libgcc_s_sjlj-1.dll
4.  libwinpthread-1.dll
5.  libGLESv2.dll
6.  libstdc++-6.dll
7.  qminimal.dll
8.  Qt5Gui.dll
9.  Qt5Network.dll
10.  Qt5Qml.dll
11.  Qt5Quick.dll
12.  Qt5V8.dll
13.  qwindows.dll

然后我得到错误：

**Точка входа в процедуру _ZN6icu_4910CharString15getAppendBufferEiiRiR10UErrorCode не найдена в библиотеке DLL icuuc49.dll**

翻译：

**在库 DLL icuuc49.dll 中找不到程序入口点 _ZN6icu_4910CharString15getAppendBufferEiiRiR10UErrorCode**

如果我将 exe 文件复制到文件夹**C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin**（所有 dll 都在哪里），程序运行，但没有显示。

如果我将 exe 文件复制到文件夹**C:\Qt\Qt5.0.1\Tools\QtCreator\bin**（所有 dll 都在哪里），则程序无法运行。

该怎么办？程序运行在哪里和哪些库？

**解决了。****来自C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin**的库的最终列表：

1.  icuin49.dll
2.  icuuc49.dll
3.  libEGL.dll
4.  libgcc_s_sjlj-1.dll
5.  libGLESv2.dll
6.  libstdc++-6.dll
7.  libwinpthread-1.dll
8.  Qt5Core.dll
9.  Qt5Gui.dll
10.  Qt5Network.dll
11.  Qt5Qml.dll
12.  Qt5Quick.dll
13.  Qt5V8.dll

我忘了添加带有 qml 文件的文件夹。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T09:18:55.777

将您的可执行文件放在一个中性目录中，就像您的桌面上新创建的一样。然后运行[依赖walker](http://www.dependencywalker.com/)。它将向您显示缺少的库列表。首先`Qt5Core.dll`，`libgcc_s_sjlj-1.dll`您指定的将是缺失的之一。你必须在你的系统上找到它们，并一一复制到这个目录。大部分缺失将在您指定的目录中 ( `C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin`)。如果您找不到其他人，请使用列表编辑问题。

**注意：**

一般情况下丢失文件的类型：

*   Qt 库。如果 Qt 被编译为静态，它们不应该出现
*   杂项库 Qt 依赖于：例如 OpenSSL。如果 Qt 和这个库都是静态的，则不会出现
*   编译器库：例如，`libgcc_s_sjlj`用于 OP 的 gcc。它们通常是动态的，如果它们不在库搜索路径中，则需要复制它们。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-06-19T07:13:57.030

将“C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin”添加到您的路径中。然后应用程序应该工作。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-25T17:07:57.383

不要担心丢失的 dll 文件。将您的 .exe 文件放入此路径的文件夹中：“C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin”

您现在可以运行 .exe 文件了。它工作正常。

# sass - Zurb Foundation 多个样式表（指南针）

> ID：14702882
> 
> 赞同：1
> 
> 时间：2013-02-05T08:17:11.063
> 
> 标签：sass, compass-sass, zurb-foundation

我用 compass+foundation 创建了一个项目我的页面上有多个 .scss，我想在所有这些中使用基础 mixins。如果我做导入设置，导入基础。它会复制每个文件中的所有设置，这会占用大量不必要的空间。我确定我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T22:32:09.650

如果你需要在你自己的 scss 文件中使用 Foundation 的 mixins，你确实应该使用 @import 指令。但是，您不应该导入*foundation.scss*文件。

> Sass 对要导入的文件（称为“partials”）有一个命名约定：它们以下划线开头。

只导入你需要的部分（我会很惊讶你需要每一个）。

例如，我需要在我的一个文件中使用 _foundation-global.scss 中的“css-triangle”mixin。

```
MyStyles.scss

@import "../foundation/foundation-global"; (no need for the leading underscore)

.myClass{
   @include css-triangle(5px, #fff, top);
} 
```

我确定您已经阅读过[此](http://sass-lang.com/tutorial.html)内容，但我会放上链接以防万一。

# ruby-on-rails-3 - 如何使用两个设备验证单个操作？

> ID：14702883
> 
> 赞同：1
> 
> 时间：2013-02-05T08:17:11.103
> 
> 标签：ruby-on-rails-3, authentication, devise

我在我的项目中实现了两个设计（版本：1.4.8）模型，例如用户和管理员。

是否有任何选项可以为具有两个设备的同一控制器中的单个操作配置身份验证？CartsControler 的示例：

```
index, show            -> can access either admin or user
create, update, delete -> can access admin only 
```

目前我已通过从 application_controller.rb 调用以下方法进行身份验证

```
def authenticate_user_or_admin!
  unless user_signed_in? or admin_signed_in?
  redirect_to root_url , :flash => {:alert => "You need to sign in as admin/user before continuing..".html_safe }
  end
end 
```

在 carts_controler.rb

```
class CartsControler < ApplicationController
  before_filter :authenticate_user_or_admin!, :only => [:index, :show]
  before_filter: :authenticate_admin!, :except => [:index, :show] 
```

设计是否提供任何默认选项来验证多个设计模型？

这是解决这个问题的正确方法吗？或任何其他更好的解决方案？

# php - 没有错误，但我在数据库中看不到我的数据

> ID：14702890
> 
> 赞同：1
> 
> 时间：2013-02-05T08:17:36.180
> 
> 标签：php, mysql, encryption

我正在使用 PHP 插入 MySQL，代码通过，但是当我查询数据库时，我的数据库中什么也没有。我无法弄清楚发生了什么。我的数据库中有五个字段（ID、用户名、电子邮件、密码、盐）。下面是我的 PHP 代码。

```
<?php
include 'db_connect.php';
include 'functions.php';

$password = $_POST['password']; 

$random_salt = hash('sha512', uniqid(mt_rand(1, mt_getrandmax()), true));

$password = hash('sha512', $password.$random_salt);
if ($insert_stmt = $mysqli->prepare("INSERT INTO members (username, email,  
password,salt) VALUES (?, ?, ?, ?)"))

{    
$insert_stmt->bind_param('ssss', $username, $email, $password, $random_salt); 

$insert_stmt->execute();
echo 'User added';       
}
else
{
echo 'Error couldnt add the user, Try again';
}

?> 
```

以下是我用于注册的表格。

```
 <form id="form1" name="form1" method="post" action="Registration Process.php">
  <table width="373" height="130" border="1">
    <tr>
      <td width="180" height="27">Username (Name &amp; Surname)</td>
      <td width="140"><label for="username"></label>
      <input type="text" name="username" id="username" /></td>
    </tr>
    <tr>
      <td height="23">Email</td>
      <td><label for="email"></label>
      <input type="text" name="email" id="email" /></td>
    </tr>
    <tr>
      <td height="22">Password</td>
      <td><label for="password"></label>
      <input type="text" name="password" id="password" /><label for="salt">    </label> </td>
    </tr>
    <tr>
      <td height="22">Salt</td>
      <td><input type="text" name="salt" id="salt" /></td>
    </tr>
    <tr>
      <td height="22">Click To register member</td>
      <td><input type="submit" name="register" id="register" value="Submit" /></td>
    </tr>
  </table>
  <p>&nbsp;</p>
  <!-- end .content -->
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:48:06.530

您可能没有从代码中的数组中获取您的`$username`,`$email`和其他变量。`POST`

此外，您不会在`$insert_stmt->execute()`函数中发现错误 -有关详细信息，[请参阅此页面上的示例 3 。](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)

# xml - MULE 中 .xslt 文件中的 if -else 条件

> ID：14702891
> 
> 赞同：0
> 
> 时间：2013-02-05T08:17:45.840
> 
> 标签：xml, xslt, xsd, wsdl, mule

在 MULE 服务器 3.3.0 的 configuration.xml 中，我将 MULE_REMOTE_CLIENT_ADDRESS 传递给 .xslt 文件，下面我复制了我的代码：

```
<logger 
  message="#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]" 
  level="INFO" doc:name="Logger"/> 
```

要将 IP 地址传递给 XSLT，请将其存储在一个变量中并传递它。

```
<set-variable 
  variableName="remoteClientAddress" 
  value = "#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]"/> 
```

将其传递给 XSLT：

```
<xm:xslt-transformer xsl-file="xsltFileName.xslt">
  <xm:context-property 
    key="remoteClientAddress" 
    value="#[remoteClientAddress]"/>
</xm:xslt-transformer> 
```

在我的 XSLT 中，声明了一个参数变量

```
<xsl:param  name="remoteClientAddress" /> 
```

然后将此变量用作

```
<xsl:value-of select="$remoteClientAddress" /> 
```

现在我想检查.xslt 文件中的**$remoteClientAddress**，如果它等于特定的 ip_address，那么我可以在我的 XML(WSDL) 文件中进行更改，如果它不相等，我的 XML(WSDL) 文件中不会发生任何事情。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:52:02.070

根据您之前发布的帖子，我的理解是，如果匹配为真，您希望省略输入 XML 的特定部分。在这种情况下，以下内容应该能够实现（当添加到现有 XSLT 时）：

```
<xsl:template match="wsdl:operation[@name = 'GetISD']">
   <xsl:variable name="rcaTrimmed" 
          select="substring-before(substring-after($remoteClientAddress, '/'), ':')" />
   <xsl:if test="$rcaTrimmed != '123.12.12.123'">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()" />
      </xsl:copy>
   </xsl:if>
</xsl:template> 
```

仅当不等于指定地址时，这将*包括操作。*`$remoteClientAddress`

# jquery - 用于在 asp.net 中自动填充文本框的 Jquery

> ID：14702897
> 
> 赞同：0
> 
> 时间：2013-02-05T08:18:07.080
> 
> 标签：jquery, asp.net

我正在asp.net 4.0中开发Web应用程序我有名字，中间名和姓氏文本框以及显示名称文本框。同时输入第一个以及中间名和姓氏整个名称将使用jquery显示在显示名称文本框中

我在用

```
$(function () {
    $('input[id$=txtFName]').keyup(function () {
        var txtClone = $(this).val();
        $('input[id$=txtDisplayName]').val(txtClone);
    });
}); 
```

如何将名字、中间名和姓氏连接到显示名称文本框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:27:18.157

你可以使用这样的东西：
$(function () { $('input[id$=txtFName], input[id$=txtMName], input[id$=txtLName]').keyup(function () {
$( 'input[id$=txtDisplayName]').val( $('input[id$=txtFName]').val()+' '+$('input[id$=txtMName]').val()+ ' '+$('input[id$=txtLName]').val()); }); });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:28:01.670

尝试

```
$(function () {
    var concatNames = function(first, middle, last) {
        //this is locale specific 
        return first + ' ' + middle + ' ' + last;
    };
    $('input[id$=txtFName], input[id$=txtMName], input[id$=txtLName]').keyup(function () {
        var fullName = concatNames($('input[id$=txtFName]').val(), $('input[id$=txtMName]').val(), $('input[id$=txtLName]').val());
        $('input[id$=txtDisplayName]').val(fullName);
    });
}); 
```

或者您可以使用相同的类标记所有输入并使用类选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:29:25.620

您可以为 3 个名称框重复您的代码 3 次，正确连接名称

```
$(function () {
    var $fname = $('input[id$=txtFNamee]');
    var $mname = $('input[id$=txtMName]');
    var $Sname = $('input[id$=txtSName]');
    $fName.keyup(function () {
        writeName($fname,$mname,$sname);
    });
    $mName.keyup(function () {
        writeName($fname,$mname,$sname);
    });
    $sName.keyup(function () {
        writeName($fname,$mname,$sname);
    });

    function writeName($f,$m,$s){
       $('input[id$=txtDisplayName]').val($f.val() + ' ' + $m.val() + ' ' + $s.val());
    }
}); 
```

# java - 如何模拟主要

> ID：14702899
> 
> 赞同：1
> 
> 时间：2013-02-05T08:18:07.403
> 
> 标签：java, testing, main, powermock

我的测试类访问 Main 本身（Main.doSomething） 我想模拟 Main 类以避免设置整个过程的所有麻烦我该怎么做？

我正在使用 Powermock 和 Mockito。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:23:02.797

`Main`不是 Java 中类的保留字。这意味着您可以像任何其他课程一样进行测试。这取决于`doSomething`是`static`和/`final`或不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:34:20.783

假设必须模拟静态方法是一种不好的做法（如果应该模拟，你的方法不应该是静态的：*如果类难以测试 - 重构类*- [http://monkeyisland.pl/2008/ 01/14/mockito/](http://monkeyisland.pl/2008/01/14/mockito/) )。

不过，这是使用 powermock 的方法：

```
PowerMockito.mockStatic(Main.class);
PowerMockito.when(Main.doSomething()).thenReturn(something); 
```

这里的文档：[http ://code.google.com/p/powermock/wiki/MockStatic](http://code.google.com/p/powermock/wiki/MockStatic)

对于模拟静态成员，请执行以下操作：

```
Whitebox.setInternalState(Main.class, doSomething); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:47:07.243

一个更强大的 Mocking 框架是`JMockit`. 它提供了增强的模拟和存根功能。

查看：`http://code.google.com/p/jmockit/`

# c# - 使用 HttpWebRequest 发布表单数据

> ID：14702902
> 
> 赞同：97
> 
> 时间：2013-02-05T08:18:18.723
> 
> 标签：c#, post, httpwebrequest

我想将一些表单数据发布到不在我自己的 Web 应用程序中的指定 URL。它具有相同的域，例如“domain.client.nl”。Web 应用程序有一个 url “web.domain.client.nl”，我要发布到的 url 是“idp.domain.client.nl”。但是我的代码什么也没做......有人知道我做错了什么吗？

沃特

```
StringBuilder postData = new StringBuilder();
postData.Append(HttpUtility.UrlEncode(String.Format("username={0}&", uname)));
postData.Append(HttpUtility.UrlEncode(String.Format("password={0}&", pword)));
postData.Append(HttpUtility.UrlEncode(String.Format("url_success={0}&", urlSuccess)));
postData.Append(HttpUtility.UrlEncode(String.Format("url_failed={0}", urlFailed)));

ASCIIEncoding ascii = new ASCIIEncoding();
byte[] postBytes = ascii.GetBytes(postData.ToString());

// set up request object
HttpWebRequest request;
try
{
    request = (HttpWebRequest)HttpWebRequest.Create(WebSiteConstants.UrlIdp);
}
catch (UriFormatException)
{
    request = null;
}
if (request == null)
    throw new ApplicationException("Invalid URL: " + WebSiteConstants.UrlIdp);

request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = postBytes.Length;
request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";

// add post data to request
Stream postStream = request.GetRequestStream();
postStream.Write(postBytes, 0, postBytes.Length);
postStream.Flush();
postStream.Close(); 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-03-06T19:48:00.603

字段名称和值都应该是 url 编码的。发布数据和查询字符串的格式相同

.net 的做法是这样的

```
NameValueCollection outgoingQueryString = HttpUtility.ParseQueryString(String.Empty);
outgoingQueryString.Add("field1","value1");
outgoingQueryString.Add("field2", "value2");
string postdata = outgoingQueryString.ToString(); 
```

这将负责对字段和值名称进行编码

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-04-14T03:55:35.963

Try this:

```
var request = (HttpWebRequest)WebRequest.Create("http://www.example.com/recepticle.aspx");

var postData = "thing1=hello";
    postData += "&thing2=world";
var data = Encoding.ASCII.GetBytes(postData);

request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = data.Length;

using (var stream = request.GetRequestStream())
{
    stream.Write(data, 0, data.Length);
}

var response = (HttpWebResponse)request.GetResponse();

var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-02-05T08:27:45.087

您对表单的编码不正确。您应该只对值进行编码：

```
StringBuilder postData = new StringBuilder();
postData.Append("username=" + HttpUtility.UrlEncode(uname) + "&");
postData.Append("password=" + HttpUtility.UrlEncode(pword) + "&");
postData.Append("url_success=" + HttpUtility.UrlEncode(urlSuccess) + "&");
postData.Append("url_failed=" + HttpUtility.UrlEncode(urlFailed)); 
```

**编辑**

我错了。根据[RFC1866 第 8.2.1 节](https://www.rfc-editor.org/rfc/rfc1866#section-8.2)，名称和值都应进行编码。

但是对于给定的示例，名称没有任何需要编码的字符，因此在这种情况下，我的代码示例是正确的；）

问题中的代码仍然不正确，因为它将对等号进行编码，这就是 Web 服务器无法对其进行解码的原因。

更合适的方法是：

```
StringBuilder postData = new StringBuilder();
postData.AppendUrlEncoded("username", uname);
postData.AppendUrlEncoded("password", pword);
postData.AppendUrlEncoded("url_success", urlSuccess);
postData.AppendUrlEncoded("url_failed", urlFailed);

//in an extension class
public static void AppendUrlEncoded(this StringBuilder sb, string name, string value)
{
    if (sb.Length != 0)
        sb.Append("&");
    sb.Append(HttpUtility.UrlEncode(name));
    sb.Append("=");
    sb.Append(HttpUtility.UrlEncode(value));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-21T08:06:55.730

使用此代码：

```
internal void SomeFunction() {
    Dictionary<string, string> formField = new Dictionary<string, string>();

    formField.Add("Name", "Henry");
    formField.Add("Age", "21");

    string body = GetBodyStringFromDictionary(formField);
    // output : Name=Henry&Age=21
}

internal string GetBodyStringFromDictionary(Dictionary<string, string> formField)
{
    string body = string.Empty;
    foreach (var pair in formField)
    {
        body += $"{pair.Key}={pair.Value}&";   
    }

    // delete last "&"
    body = body.Substring(0, body.Length - 1);

    return body;
} 
```

# python - Python jinja2模板，如何计算一个列表

> ID：14702917
> 
> 赞同：26
> 
> 时间：2013-02-05T08:19:14.040
> 
> 标签：python, google-app-engine, jinja2

所以我不能在下面的模板中使用 python len() 作为列表。

```
{% if len(alist) == 0 %}

UndefinedError: 'len' is undefined 
```

1.  我们如何在模板中使用 python？

2.  在 def get(self) 方法中将参数传递给模板是唯一的方法吗？

3.  任何人都知道一些关于如何在模板中使用 jinja2 的好资源？比如你可以使用什么方法以及python和jinja2之间的语法差异。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T08:26:48.507

如果您在[模板文档](http://jinja.pocoo.org/docs/templates/)中进行快速搜索，您很快就会找到[`length`](http://jinja.pocoo.org/docs/templates/#length)过滤器。

至于其余的，请阅读[文档](http://jinja.pocoo.org/docs/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-26T04:08:20.847

```
{% if alist |length ==0 %}  or  {% if alist |count ==0 %} 
```

我用这种方式解决它！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-02T13:54:56.150

```
{% if alist.count() == 0 %} 
```

那应该可以解决您的问题。

您可以[查看此链接](https://stackoverflow.com/questions/1465249/jinja2-get-lengths-of-list)。

# java - 杰克逊将值读取为字符串

> ID：14702918
> 
> 赞同：40
> 
> 时间：2013-02-05T08:19:15.983
> 
> 标签：java, json, jackson

我有一个值未知的对象，比如说

```
{
 "data": [
    {"a":...,
    "dont_know_what_else_is_here":....}
 ]
} 
```

我只想将“数据”的值作为字符串存储到变量/数据库中。

我应该如何从流 API 中读取它？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-05T08:22:07.843

假设您已经将该对象读入`JsonNode`，您可以这样做：

```
String content = jsonNode.get("data").textValue(); 
```

UPD：因为您使用的是流式解析器，[所以这个](http://wiki.fasterxml.com/JacksonInFiveMinutes#Streaming_API_Example)关于 Jackson 用法的示例可能会有所帮助。

UPD：方法名称现在是 textValue() - [docs](http://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#textValue())

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-10-19T14:26:00.323

当我们尝试从 JsonNode 获取字符串形式的数据时，我们通常使用**asText**，但我们应该使用**textValue**代替。

[**asText**](https://fasterxml.github.io/jackson-databind/javadoc/2.2.0/com/fasterxml/jackson/databind/JsonNode.html#asText())：如果节点是值节点（方法 isValueNode() 返回 true），则返回容器值的有效字符串表示的方法，否则为空字符串。

[**textValue**](https://fasterxml.github.io/jackson-databind/javadoc/2.2.0/com/fasterxml/jackson/databind/JsonNode.html#textValue())：用于访问字符串值的方法。不对非字符串值节点进行任何转换；对于非字符串值（isTextual() 返回 false 的值），将返回 null。对于字符串值，永远不会返回 null（但可能是空字符串）

那么我们举个例子，

```
JsonNode getJsonData(){
    ObjectMapper mapper = new ObjectMapper();
    ObjectNode node = mapper.createObjectNode(); 
    node.put("anyParameter",null);
    return node;
}
JsonNode node = getJsonData();
json.get("anyParameter").asText() // this will give output as "null"
json.get("").textValue() // this will give output as null 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-05T09:58:24.163

您可以根据键值对获取地图中的数据。

```
Map<String, Object> mp = mapper.readValue(new File("xyz.txt"),new TypeReference<Map<String, Object>>() {}); 
```

现在从地图中获取值：

```
mp.get("data"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-30T14:11:01.117

假设您已经有一个**解析器**并且它指向*“数据”*令牌（例如来自自定义反序列化器），您可以执行以下操作：

```
ObjectMapper mapper = new ObjectMapper();
JsonNode treeNode = mapper.readTree(parser);
return treeNode.toString(); 
```

这将为您提供包含*"data"*值的字符串。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-05T08:59:21.747

您可以为 JSON 结果设置一些实体类。

```
String json = "your_json";
ObjectMapper mapper = new ObjectMapper();
Entity entity = mapper .readValue(json, Entity.class);
// here you can do everything with entity as you wish

// to write Entity value as String when you wish
String text = mapper.writeValueAsString(object);
// to write Entity child's value as String when you wish (let's data contain data part)
String data = mapper.writeValueAsString(object.getData()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-03T06:15:28.333

假设您有一个名为 User 的 POJO java 类（[取自此](http://wiki.fasterxml.com/JacksonInFiveMinutes)）

```
public class User {
public enum Gender { MALE, FEMALE };

public class Name {
    private String _first, _last;

    public String getFirst() { return _first; }
    public String getLast() { return _last; }

    public void setFirst(String s) { _first = s; }
    public void setLast(String s) { _last = s; }
}

private Gender _gender;
private Name _name;
private boolean _isVerified;
private byte[] _userImage;

public Name getName() { return _name; }
public boolean isVerified() { return _isVerified; }
public Gender getGender() { return _gender; }
public byte[] getUserImage() { return _userImage; }

public void setName(Name n) { _name = n; }
public void setVerified(boolean b) { _isVerified = b; }
public void setGender(Gender g) { _gender = g; }
public void setUserImage(byte[] b) { _userImage = b; } 
```

}

所以现在你有来自任何地方的 JSON 字符串，比如 web socket 或其他地方。作为一个例子假设这是你得到的字符串

```
String json = "{\n" +
            "  \"name\" : { \"first\" : \"Joe\", \"last\" : \"Sixpack\" },\n" +
            "  \"gender\" : \"MALE\",\n" +
            "  \"verified\" : false,\n" +
            "  \"userImage\" : \"Rm9vYmFyIQ==\"\n" +
            "}"; 
```

现在您可以使用这段代码将这个 JSON 字符串转换为 POJO 对象。

```
ObjectMapper mapper = new ObjectMapper();
User user = mapper .readValue(json, User.class); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T15:18:15.150

终于通过阅读教程页面找到了解决方案。

只是在这里给别人一个指针：

1.  创建解析器时切换到使用 MappingJSONFactory：

    ```
     HttpResponse response = client.execute(request);
        JsonFactory jfactory = new MappingJsonFactory();
        JsonParser parser=jfactory.createJsonParser(response.getEntity().getContent()); 
    ```

2.  然后你可以做

    ```
     parser.readValueAsTree().toString(); 
    ```

或根据需要解析它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-06T04:58:10.063

我假设您只想使用 Streaming API 从输入中读取子树——但最后，您需要将整个子树作为一件事存储在 DB（或变量）中。

因此，您可能想要使用的是`JsonParser.readValueAs(MyType.class)`- 这将调用`ObjectMapper`（并且要使其工作，必须通过`JsonFactory`访问创建解析器`ObjectMapper`；或者您需要调用`JsonFactory.setCodec(mapper)`）。

如果内容是任意的，您可以将其读取为`Map`or `JsonNode`：

```
Map<String,Object> map = parser.readValueAs(Map.class);
// or
JsonNode root = parser.readValueAsTree(); 
```

只要`JsonParser`指向您要数据绑定的 JSON 对象的 START_ELEMENT。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-29T09:27:06.967

如果使用`String data`in `createParser(data)`，我使用此方法通过流 api 收集字符串内容：

```
if ("data".equals(fieldname))
     String strData = getValueAsString(jp); 
```

和

```
 private static String getValueAsString(JsonParser jp)
        throws com.fasterxml.jackson.core.JsonParseException, IOException {
    JsonToken token = jp.getCurrentToken();
    int counter = 0;

    long startIndex = jp.getCurrentLocation().getCharOffset();
    long endIndex = 0;

    if (token == JsonToken.START_OBJECT) {
        // JsonLocation location = jp.getCurrentLocation();
        // startIndex = location.getCharOffset();
        // System.out.println("，location=" + new Gson().toJson(location) +
        // ", start=" + startIndex);

        counter++;
        while (counter > 0) {
            token = jp.nextToken();
            if (token == JsonToken.START_OBJECT)
                counter++;
            if (token == JsonToken.END_OBJECT) {
                counter--;
                endIndex = jp.getCurrentLocation().getCharOffset();
            }
        }

        return data.substring((int) startIndex - 1, (int) endIndex);

    } else if (token == JsonToken.START_ARRAY) {
        counter++;
        while (counter > 0) {
            token = jp.nextToken();
            if (token == JsonToken.START_ARRAY)
                counter++;
            if (token == JsonToken.END_ARRAY) {
                counter--;
                endIndex = jp.getCurrentLocation().getCharOffset();
            }
        }
        return data.substring((int) startIndex - 1, (int) endIndex);

    } else {
        return jp.getText();
    }
} 
```

它在数据源为字符串时有效。对于无字符串源，例如文件，使用`JsonLocation.getByteOffset()`代替`JsonLocation.getCharOffset()`

# android - 索尼 Xperia Smartwatch MN2 怎么安装 Apk 文件就可以了？

> ID：14702919
> 
> 赞同：2
> 
> 时间：2013-02-05T08:19:19.300
> 
> 标签：android, sdk, apk, sony, sony-smartwatch

我已经研究了几个星期的索尼 Smartwatch MN2。我仍然不知道如何使用他们的 SDK 安装新的 apk 文件。apk 文件是我自己编写的。它可以在安卓手机上运行。如果有人知道如何并愿意帮助我。我将非常感激。

这是我的清单代码。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.samplepreferenceactivity2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="17" />
<uses-permission 
android:name="com.sonyericsson.extras.liveware.aef.EXTENSION_PERMISSION"/>
<application
android:allowBackup="true"
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/BaseStyle" >
<activity
android:name="SamplePreferenceActivity"
android:label="@string/app_name" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<service android:name="SampleExtensionService" />
<receiver             android:name="com.sonyericsson.extras.liveware.extension.sensorsample.ExtensionReceiver"     android:exported="false">
<intent-filter>
<!-- Generic extension intents. -->
<action android:name="com.sonyericsson.extras.liveware.aef.registration.EXTENSION_REGISTER_REQUEST" />
<action android:name="com.sonyericsson.extras.liveware.aef.registration.ACCESSORY_CONNECTION"/>
<action android:name="android.intent.action.LOCALE_CHANGED" />
<!-- Notification intents -->
<action     android:name="com.sonyericsson.extras.liveware.aef.notification.VIEW_EVENT_DETAIL"/>
<action android:name="com.sonyericsson.extras.liveware.aef.notification.REFRESH_REQUEST"/>
<!-- Widget intents -->
<action android:name="com.sonyericsson.extras.aef.widget.START_REFRESH_IMAGE_REQUEST"/>
<action android:name="com.sonyericsson.extras.aef.widget.STOP_REFRESH_IMAGE_REQUEST"/>
<action android:name="com.sonyericsson.extras.aef.widget.ONTOUCH"/>
<action android:name="com.sonyericsson.extras.liveware.extension.util.widget.scheduled.refresh"/>

<!-- Control intents -->
<action android:name="com.sonyericsson.extras.aef.control.START"/>
<action android:name="com.sonyericsson.extras.aef.control.STOP"/>
<action android:name="com.sonyericsson.extras.aef.control.PAUSE"/>
<action android:name="com.sonyericsson.extras.aef.control.RESUME"/>
<action android:name="com.sonyericsson.extras.aef.control.ERROR"/>
<action android:name="com.sonyericsson.extras.aef.control.KEY_EVENT"/>
<action android:name="com.sonyericsson.extras.aef.control.TOUCH_EVENT"/>
<action android:name="com.sonyericsson.extras.aef.control.SWIPE_EVENT"/>
</intent-filter>
</receiver>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:19:01.363

APK 安装在手机本身上，因为 SmartWatch 主机进程在设备本身上运行。

这是一个快速清单，可以让它工作并在 SmartWatch 上显示：

*   从 Google PLAY 下载 SmartConnect (Liveware Mgr) 应用程序。[https://play.google.com/store/apps/details?id=com.sonyericsson.extras.liveware](https://play.google.com/store/apps/details?id=com.sonyericsson.extras.liveware)
*   通过蓝牙将 Smartwatch 与设备连接。
*   下载 Smartwatch 主机应用程序 ( [https://play.google.com/store/apps/details?id=com.sonyericsson.extras.smartwatch](https://play.google.com/store/apps/details?id=com.sonyericsson.extras.smartwatch) ) - Smartwatch 将在连接时提示
*   然后，您可以进入 Smartconnect 应用程序并检查您设备上的哪些应用程序（可能是您创建的应用程序）已安装用于智能手表，甚至可以在 Google PLAY 商店中发现新应用程序

如果不清楚，请告诉我，请随时询问更多解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T08:00:56.093

行不通，您必须欺骗手表使其认为它正在与应用程序对话，因为当手机为智能手表（第一代，我仍然使用索尼 MN2）安装应用程序时，它会检查该应用程序是否受支持您的特定手表，如果不是没有安装，如果是的话，它会自动安装，但我花了 3 年时间才走到这一步，我仍然只能安装几乎无法使用的通用音乐播放器，最好得到使用新的磨损操作系统的东西在制作自制软件时更容易处理

# android - Android 服务和 UI 线程

> ID：14702922
> 
> 赞同：11
> 
> 时间：2013-02-05T08:19:31.133
> 
> 标签：android, service, ui-thread

我的应用程序中正在运行一个服务..

该服务有一个用于向服务器发送消息的对象和一个获取该对象并使用它的函数。

该对象是从服务初始化的，但是当 UI 获取该对象并使用它时 - 它看起来像是在 UI 线程上使用它。

它是否正确 ？有没有办法让我的对象总是从服务线程运行？

```
public class ServerMessagesManager extends Service {
    private ServerMessagesReceiver serverMessageReceiver;
    @Override
    public void onCreate() {
        super.onCreate();
        this.serverMessageReceiver = new ServerMessagesReceiver(app);
    }

    public ServerMessagesReceiver getServerMessagesReceiver()
    {
        return serverMessageReceiver;
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-05T08:38:27.400

使用`IntentService`而不是`Service`. 如果您在 a 中进行网络调用`Service`，则 UI 将卡住。因此，请使用 an，`IntentService`因为它使用单独的`Thread`.

而且您不知道服务器消息何时会检索数据。`NullPointerException`只要网络调用仍在进行中，如果访问对象，就会抛出A。每当服务器响应时，使用`BroadcastReceiver`s 触发。`Intent`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T08:42:33.627

据我所知，Android 服务在 UI 线程上运行。如果要进行异步作业，则应使用`Intent Service`
请参阅： [IntentService 和 Service 之间的区别是什么？](https://stackoverflow.com/questions/7771323/what-is-the-difference-between-an-intent-service-and-a-service)
这是您可以尝试的[Intent 服务示例。](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)

# three.js - ColladaLoader：找不到皮肤的骨架

> ID：14702924
> 
> 赞同：2
> 
> 时间：2013-02-05T08:19:43.227
> 
> 标签：three.js

我试图渲染我在 3dsmax 中制作的原始角色，但我导出的 DAE 文件似乎有问题，或者只是 ColladaLoader 无法正确处理它。

场景由一个动画 Biped 骨架、使用 Physique 修改器的简单装配角色、一个静态框和一个动画框组成。

这是我的代码：

```
<script src="three.js" type="text/javascript"></script>
<script src="ColladaLoader.js" type="text/javascript"></script>
<script type="text/javascript">
  var size_width = window.innerWidth;
  var size_height = window.innerHeight;
  var player;
  var scene = new THREE.Scene();
  var camera = new THREE.PerspectiveCamera(75, size_width/size_height, 0.1, 1000);
  var renderer = new THREE.WebGLRenderer();
  renderer.setSize(size_width, size_height);
  document.body.appendChild(renderer.domElement);

  camera.position.x = 100;
  camera.position.y = -50;
  camera.position.z = 7;

  camera.rotation.x = 1.4;

  var player_loader = new THREE.ColladaLoader();

  player_loader.load( "running_babe.dae", function(collada) {
    player = collada.scene;
    init();
  });

  function init() {
    scene.add(player);
    render();
  }

  function render() {
    requestAnimationFrame(render);
    renderer.render(scene, camera);
  }
</script> 
```

但我得到的只是这两个框和一个错误：

```
ColladaLoader: Could not find the skeleton for the skin. 
```

这是我使用的导出的 DAE 文件 - [http://touhou.ru/upload/ff72eb0b40adf5c97286a1bcb164e1f0.DAE](http://touhou.ru/upload/ff72eb0b40adf5c97286a1bcb164e1f0.DAE)

有什么建议么？

* * *

更新：在使用皮肤修改器绑定角色后，我得到了相同的结果 - 找不到皮肤的骨架。

这是带有皮肤修饰符的导出 dae 的链接 - [http://touhou.ru/upload/af6ba52b7bff5fa2b0f6ba3f704a3b77.dae](http://touhou.ru/upload/af6ba52b7bff5fa2b0f6ba3f704a3b77.dae)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:18:42.250

在我开始阅读threejs colladaloader源代码并弄清楚之前，我遇到了同样的问题并花了几天时间玩导出器设置。所以如果你还没有解决它，这就是你必须做的：

首先：当您从 max 导出模型时，请确保场景中的所有元素都没有与文件名相同的名称（否则您的几何图形不会显示，这与 DAE 文件中生成的 id 有关）

现在，3DSMax 不知何故忽略了导出节点，因此您必须手动添加：

1.  在文本编辑器中打开 running_babe.dae 文件
2.  查找 <instance_controller url="...."/> 节点并将其重写为：

> ```
> <instance_controller url="....">
>     <skeleton>#xxxxx</skeleton>
> </instance_controller> 
> ```

其中“xxxxx”是 id（=3dsmax 中的元素/骨骼名称），它是骨架层次结构的根元素。并且不要忘记开头的“哈希”！:)

希望能为您解决。我还没有尝试过动画，但我现在会尝试，并让您知道此解决方案是否缺少任何内容。

> 编辑：没关系，显然我只是在一个巨大的该死的冰山一角的表面上划过..似乎得到collada（来自3dsmax 2013）+蒙皮动画工作很痛苦..我会考虑编写一个新的json导出器。格式看起来很简单并且有据可查，此外，还有来自 github 的旧 .ms 文件可以开始。祝你好运！如果你发现了什么，请把你的方法贴在这里，好吗？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-14T05:30:18.897

3ds max 附带的默认插件不起作用。您需要使用[OpenCollada](https://github.com/KhronosGroup/OpenCOLLADA/wiki/OpenCOLLADA-Tools)插件。然后您可以按照[collada loader](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_collada.html)示例进行操作。你得到骨头，动画和所有！

# sql - TSQL Order By - 硬编码值列表

> ID：14702927
> 
> 赞同：4
> 
> 时间：2013-02-05T08:20:03.027
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个查询，其中返回一个记录状态列。记录状态列有几个值，例如：“活动”、“已删除”等...

我需要按“活动”排序结果，然后“删除”，然后等等......

我目前正在创建 CTE 以将每组记录带到 UNION ALL。是否有更好的动态方式来完成查询？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T08:24:00.813

对于更多状态值，您可以这样做：

```
WITH StatusOrders
AS
(
  SELECT StatusOrderID, StatusName
  FROM (VALUES(1, 'Active'), 
              (2, 'Deleted'),
              ...
              n, 'last status')) AS Statuses(StatusOrderID, StatusName)
)
SELECT *
FROM YourTable t
INNER JOIN StatusOrders s ON t.StatusName = s.StatusName
ORDER BY s.StatusOrderID; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T08:21:22.883

你可以`CASE`在这里使用

```
ORDER BY CASE WHEN Status = 'Active' THEN 0 ELSE 1 END ASC 
```

但是如果你有更多的值`status`并且你想排序`Active`那么`DELETE`

```
ORDER BY CASE WHEN Status = 'Active'  THEN 0 
              WHEN Status = 'Deleted' THEN 1
              ELSE 2 
         END ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:48:45.180

```
WITH
cteRiskStatus
AS
(
SELECT  RiskStatusID, RiskStatusName
FROM    (VALUES(1, 'Active'),
               (2, 'Draft'),
               (3, 'Occured'),
               (4, 'Escalated'),
               (5, 'Closed'),
               (6, 'Expired'),
               (7, 'Deleted')) AS RiskStatuses(RiskStatusID, RiskStatusName)
)
SELECT * FROM cteRiskStatus 
```

谢谢

# php - php表单代码中的PHP逻辑错误

> ID：14702930
> 
> 赞同：0
> 
> 时间：2013-02-05T08:20:06.533
> 
> 标签：php

我无法解决代码中的逻辑错误。尽管逻辑似乎是正确的，但我不确定出了什么问题

这是我的 php：

```
<?php require_once("includes/connection.php"); ?>
<?php
include_once("includes/form_functions.php");
if(isset($_POST['submit']))
{
    $errors = array();
    if(isset($_POST['txtSpace']))
    {
        $choice_spc_port = $_POST["txtSpace"];
    }
    if(isset($_POST['txtNumber']))
    {
        $choice_no = $_POST["txtNumber"];
    }
    if(isset($_POST['txtLocation']))
    {
        $choice_loc = $_POST["txtLocation"];
        if($choice_loc =="txtSetXY")
        {
            $x = $_POST["txtXLocation"];
            $y = $_POST["txtYLocation"];
            if($x == "")
            {
                $message = "You forgot to enter X Value";
            }
            elseif($y == "")
            {
                $message = "You forgot to enter Y Value";
            }
            else
            {
                $choice_loc = $x . "," . $y;
            }
        }
    }
    $user_name = $_POST["txtUserName"];
    $user_email = $_POST["txtUserEMail"];
    $animal_name = $_POST["txtAnimalName"];
    $disp_msg = $_POST["txtDispMsg"];
    $comments = $_POST["txtComments"];
    if(!isset($_POST['txtSpace']))
    {
        $message = "Please select Space Portion";
    }
    elseif(!isset($_POST['txtNumber']))
    {
        $message = "Please select the number of animals";
    }
    elseif(!isset($_POST['txtLocation']))
    {
        $message = "Please select the desired location of animal";
    }
    elseif($user_name == "")
    {
        $message = "Please enter your name.";
    }
    elseif($user_email == "")
    {
        $message = "Please enter your email.";
    }
    elseif($animal_name == "")
    {
        $message = "Please enter the name of the animal.";
    }
    elseif($disp_msg == "")
    {
        $message = "What message you want to dedicate to the animal?.";
    }
    else
    {
        // validation
        $required_fields = array('txtUserName','txtUserEMail','txtAnimalName','txtDispMsg');
        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));
        $user_name = trim(mysql_prep($_POST['txtUserName']));
        $user_email = trim(mysql_prep($_POST['txtUserEMail']));
        $animal_name = trim(mysql_prep($_POST['txtAnimalName']));
        $disp_msg = trim(mysql_prep($_POST['txtDispMsg']));

        if(empty($errors))
        {
            /*if($choice_loc == "txtSetXY")
            {
                $x = $_POST["txtXLocation"];
                $y = $_POST["txtYLocation"];
                $choice_loc = $x . "," . $y;
            }*/
            if($choice_no == "other")
            {
                $choice_no = $_POST["other_field"];
            }

            $insert = "INSERT INTO db_form (db_space_portion, db_number, db_location, db_user_name, db_user_email, db_animal_name, db_message, db_comments) VALUES ('{$choice_spc_port}', '{$choice_no}', '{$choice_loc}', '{$user_name}', '{$user_email}','{$animal_name}','{$disp_msg}','{$comments}')";
            $result = mysql_query($insert);
            if($result)
            {
                echo("<br>Input data is succeed");
            }
            else
            {
                $message = "The data cannot be inserted.";
                $message .= "<br />" . mysql_error();
            }
        }
        else
        {
            if(count($errors) == 1)
            {
                $message = "There was 1 error on the form.";
            }
            else
            {
                $message = "There were " . count($errors) ." errors on the form.";
            }
        }
    }
}
else
{
    $user_name = "";
    $user_email = "";
    $disp_msg = "";
    $comments = "";
}
    ?>
     <!DOCTYPE html>
     <html lang="en">
     <head>
     <title>Test Form</title>
     <meta charset="utf-8">
    <link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/layout.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="all">
    <script type="text/javascript" src="js/jquery-1.9.0.min.js" ></script>
    <script type="text/javascript" src="js/cufon-yui.js"></script>
    <script type="text/javascript" src="js/cufon-replace.js"></script>
    <script type="text/javascript" src="js/Copse_400.font.js"></script>
    <script type="text/javascript" src="js/imagepreloader.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>
     <!--[if lt IE 9]>
    <script type="text/javascript" src="js/ie6_script_other.js"></script>
       <script type="text/javascript" src="js/html5.js"></script>
     <![endif]-->
        </head>
       <body id="page5">
       <!-- START PAGE SOURCE -->

      <div class="body7">
       <div class="main">
      <section id="content">
      <div class="wrapper">
        <article class="col24">
       <div class="pad1">
        <h4>Kindly Fill the form</h4>
        <?php if(!empty($message)){ echo $message; } ?>
        <?php if(!empty($errors)){ echo display_errors($errors);}?>
        <form id="TestForm" name="TestForm" method="post" action="form.php">
          <div>

          <div  class="wrapper"> <strong><span>*</span> Desired Space</strong>
            <div class="formText">
              <input type="radio" name="txtSpace" value="RJ"/>Space Top<br />
              <input type="radio" name="txtSpace" value="SM" />Space Bottom<br />
              </div>
            </div>

            <div class="wrapper"> <strong><span>*</span> Select the Number</strong>
            <div class="formText">
              <input type="radio" name="txtNumber" value="100"/>100
              <input type="radio" name="txtNumber" value="200"/>200
              <input type="radio" name="txtNumber" value="500"/>500
              <input type="radio" name="txtNumber" value="1000"/>1000
              <input type="radio" name="txtNumber" value="10000"/>10000
              <input type="radio" name="txtNumber" value="other"/>other
              <input type="text" name="other_field" id="other_field" onblur="checktext(this);"/>
            </div>
            </div>

            <div class="wrapper"> <strong><span>*</span> Select X & Y Value</strong>
                <div class="formText">
                <input type="radio" name="txtLocation" value="txtSetXY"/> Specify Photo Location<br />
                    <div style="padding-left:20px;">
                    X: <input type="text" id="locField" name="txtXLocation"><br />
                    Y: <input type="text" id="locField" name="txtYLocation"><br />
                    </div>
                    <input type="radio" name="txtLocation" value="Default"/>Default
                </div>

            </div>

            <div class="wrapper"> <strong><span>*</span> Your Name:</strong>
              <div class="bg">
                <input type="text" class="input" name="txtUserName">
              </div>
            </div>
            <div class="wrapper"> <strong><span>*</span> Your Email:</strong>
              <div class="bg">
                <input type="text" class="input" name="txtUserEMail">
              </div>
            </div>
            <div class="wrapper"> <strong><span>*</span> Name of the animal:</strong>
              <div class="bg">
                <input type="text" class="input" name="txtAnimalName">
              </div>
            </div>

            <div class="wrapper">
            <div class="textarea_box"> <strong><span>*</span> The Message you want for your favourite animal:</strong>
                <textarea name="txtDispMsg" cols="1" rows="1"></textarea>
            </div>
            </div>

            <div class="wrapper">
            <div class="textarea_box"> <strong>Comments:</strong>
                <textarea name="txtComments" cols="1" rows="1"></textarea>
            </div>
            </div>

            <input type="submit" name="submit" value="Submit"> 
           </div>
        </form>
      </div>
    </article>
  </div>
</section>
 </div>
</div>
</body>
 </html> 
```

错误：

在这里检查这个 php fiddle。

第 25 行。即使我将 x 文本字段留空 $message = "You forgot to enter X Value"; 也不会显示。

第 29 行也是如此。即使我将 y 文本字段留空 $message = "You forgot to enter Y Value"; 也不会显示。

但是，如果我在 x 和 y 文本字段中输入值，即在 txtXLocation 和 txtYLocation 中，它们将保存在 db 中，这意味着它只是不检查验证。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:34:47.037

确保您在包含文件夹中有 connection.php 文件，并且您提供了正确的路径来访问该文件。

# java - PMD 的 Eclipse 重复注释 @SurpressWarnings

> ID：14702932
> 
> 赞同：1
> 
> 时间：2013-02-05T08:20:09.543
> 
> 标签：java, eclipse, warnings, pmd

我正在尝试为我的班级禁用几个任意 PMD 警告。

**如何列出几个要忽略的 PMD 规则？**我用谷歌找不到。

```
@SuppressWarnings("PMD.OnlyOneReturn")
@SuppressWarnings("PMD.ShortVariable")
public class MyClass { 
```

它给出了 Eclipse 编译时错误：

```
Duplicate annotation @SurpressWarnings 
```

这是可编译但被忽略的

```
@SuppressWarnings("PMD.OnlyOneReturn, PMD.ShortVariable") 
```

这

```
@SuppressWarnings("PMD.OnlyOneReturn", "PMD.ShortVariable") 
```

结果是

```
Syntax error on token , 
```

Eclipse 配置为接受 PMD 类型：

[不支持 @SuppressWarnings ( "PMD.DoNotCallSystemExit" )](https://stackoverflow.com/questions/5017569/unsupported-suppresswarnings-pmd-donotcallsystemexit)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T08:29:50.927

您必须将它们列在一个数组中。

像这样：

```
@SuppressWarnings({
    "PMD.OnlyOneReturn",
    "PMD.ShortVariable"  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:29:20.833

刚刚在[Annotation Type SuppressWarnings](http://docs.oracle.com/javase/6/docs/api/java/lang/SuppressWarnings.html)中找到。

这似乎有效，注意`{`并且`}`，因为它是`String[]`：

```
@SuppressWarnings({"PMD.OnlyOneReturn", "PMD.ShortVariable"}) 
```

# c++ - 用于 C++ 的 XSLT 2.0 库

> ID：14702933
> 
> 赞同：4
> 
> 时间：2013-02-05T08:20:17.190
> 
> 标签：c++, xml, xslt, c++11, xslt-2.0

是否有任何支持 2.0 标准的 C++ 优秀 XSLT 库？我找到了几个库，但它们都没有 XSLT 2.0 的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:55:27.403

在 Windows 上有[AltovaXML](http://www.altova.com/altovaxml.html)，根据[http://manual.altova.com/AltovaXML/altovaxmlcommunity/](http://manual.altova.com/AltovaXML/altovaxmlcommunity/)可以与“诸如 C++ 或任何其他支持 COM 接口的编程语言”一起使用。

# android - 按钮宽度与父 android 不匹配

> ID：14702941
> 
> 赞同：3
> 
> 时间：2013-02-05T08:20:53.423
> 
> 标签：android, android-layout, button, android-linearlayout, android-gridview

我有以下xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >
    <TextView
    android:id="@+id/text_view"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal|center_vertical"
    android:layout_marginTop="20dip"
    android:text="Fragment1"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="30dip" />

    <Button 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button1"/>

 <GridView 
      android:id="@+id/gridview"
      android:layout_width="wrap_content" 
      android:layout_height="match_parent"overla
      android:columnWidth="90dp"
      android:numColumns="auto_fit"
      android:verticalSpacing="10dp"
      android:horizontalSpacing="10dp"
      android:stretchMode="columnWidth"
      android:gravity="center"/>                            

        <Button 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button1"/>
 </LinearLayout> 
```

button1 用于切换网格视图的可见性。但是，当网格视图不可见时，按钮不会填满屏幕。它们占据了屏幕的一半。但是，当网格视图可见时，按钮会按照我的意愿占据整个屏幕。我一直无法理解这种奇怪的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:23:07.160

尝试改变to的**宽度**`Linear layout``match_parent`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T13:17:32.880

您的 button1 在您的 text_view 上对齐。

所以尝试在你的父布局顶部添加高度为 1dp 的简单视图，并使其 match_parent 宽度。

当这样的事情发生时，我就是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:27:55.057

发生这种情况是因为您将 LinearLayout 的宽度指定为 wrap_content。您必须将 LinearLayout 的宽度定义为 fill_parent 或 match_parent。

# ios - 在ios中更改方向时设置帧大小

> ID：14702949
> 
> 赞同：0
> 
> 时间：2013-02-05T08:21:21.963
> 
> 标签：ios, xcode

我想在 ios 6 中更改视图的方向。当方向更改时，我想设置视图的框架大小。

我的方向更改示例代码：

```
-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSInteger)supportedInterfaceOrientations
{
    NSInteger mask = 0;

    intOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    if(intOrientation == UIInterfaceOrientationPortrait || intOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        mask |= UIInterfaceOrientationMaskPortrait;
    } else 
        if(intOrientation == UIInterfaceOrientationLandscapeLeft)
        {
            mask |= UIInterfaceOrientationMaskLandscapeLeft;
        }
    }
    NSLog (@"mask %d",mask);
    return mask;
}

// Here now mask value is 2 because my default mode is portrait. 
```

现在，当我将方向更改为横向时，我想设置帧大小。请指导我如何做到这一点。

好的..我可以通过获取版本并在viewdidLoad中比较它来设置像dis这样的视图的帧大小：

```
orientation = [[UIDevice currentDevice] orientation];

NSString *reqSysVer = @"6.0";
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
NSLog (@"ios version %@",currSysVer);
if ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending)
{
    if (orientation == UIInterfaceOrientationMaskPortrait) {
        self.view.frame = CGRectMake(0, 0, 1000, 800);

        self.tableView1.frame = CGRectMake(1, 0, 764,510);

    }
    else if (orientation == UIInterfaceOrientationMaskLandscapeLeft)
    {
        self.view.frame = CGRectMake(0, 0, 1300, 370);
        self.tableView1.frame = CGRectMake(0, 0, 1300, 370);
        self.view.backgroundColor = [UIColor blackColor];

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:48:58.087

您可以在界面方向更改时收到通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didRotate:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

并添加如下功能：

```
- (void)didRotate:(NSNotification *)notification {   
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    if (orientation == UIDeviceOrientation...)
    {
        // add some code
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:38:22.137

我认为最好的解决方案是使用自动布局或约束。但您也可以使用检查设备方向

```
[UIDevice currentDevice].orientation 
```

或检查大小（例如，对于 iPhone 5 支持）

```
[UIScreen mainScreen].bounds.size.height 
```

// 更新：考虑在 iOS 8 上，宽度和高度是横向切换的。所以宽度和高度总是取决于现在的方向。

# actionscript-3 - 从外部作为类访问舞台上的文本字段？

> ID：14702961
> 
> 赞同：0
> 
> 时间：2013-02-05T08:22:03.367
> 
> 标签：actionscript-3, flash, actionscript

我想访问我放置在舞台上的文本字段，其中包含`texx` 来自外部 as3 文件的实例名称和代码。

```
package src 
{   

    import flash.display.Stage;
    import flash.display.MovieClip;

    public class Global 
    {
        public static var _stage:Stage;
        public static var r:MovieClip = MovieClip(root);

        }

        public function Global()
        {
                r.texx.text = "some text"

        }

    }

} 
```

正如您所猜测的那样，它没有显示我想要的文本。我搜索了高低，但找不到如何从包内的外部类访问舞台对象。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:36:39.643

您无法从非显示类访问舞台实例，舞台没有对其实例的静态获取器。唯一的方法是`stage`从视图类中设置属性，例如：

```
package src 
{   

import flash.display.Stage;
import flash.display.MovieClip;

public class Global
{
    private static var _stage:Stage;

    public static function set stage(value:Stage):void 
    {
        if(stage != value)
        {
            _stage = value;
            init();
        }
    }
    public static function get stage():Stage 
    {
        return _stage;
    }

    private static function init():void
    {
        stage.texx.text = "some text";
    }
}
} 
```

和文档类中的代码：

```
Global.stage = stage; 
```

如果对于`root`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:33:48.030

通过从刚刚创建的影片剪辑内部将文本字段添加为类对象来解决问题，给影片剪辑（其中是文本字段 tex）类名`src.texter` ，然后作为类

```
package src 
{   

import flash.display.Stage;
import flash.display.MovieClip;
import src.texter;

public class Global
{
    public var texxx:texter = new texter;

    public function Global()

        {
                    addChild(texxx);
            texxx.x = 336;
            texxx.y = 330;
            texxx.tex.text = "some text";

}

} 
```

# http - HTTP OPTIONS 请求可以返回 204 还是应该始终返回 200？

> ID：14702962
> 
> 赞同：14
> 
> 时间：2013-02-05T08:22:03.790
> 
> 标签：http, http-status-codes, http-options-method

根据[http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.2)提到的关于 HTTP OPTIONS 请求的唯一响应是 200。但是，似乎有一些情况，例如当content-length 为 0 表示 204 更合适。HTTP OPTIONS 请求返回 204 是否合适？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-06T21:37:11.840

RFC 2616 说：

> 一个 200 响应应该...
> 
> ...
> 
> 如果没有包含响应正文，则响应必须包含字段值为“0”的 Content-Length 字段。

这确实使得不清楚 200 是适用于整个段落还是仅适用于第一句。如果你想安全起见，你会让 MUST 优先（而且它不会花费你太多）。

RFC 7231 取代了 RFC 2616，将措辞改为

> 生成对 OPTIONS 的成功响应的服务器应该...
> 
> ...
> 
> 如果没有在响应中发送有效载荷主体，服务器必须生成值为“0”的 Content-Length 字段。

这使得最后一句话在一般意义上适用于 2xx 状态，并且必须占上风。

因此，必须发送 Content-Length。但是不能使用 204 发送 Content-Length：

RFC 2616 是这样说的：

> 请求中消息体的存在通过包含 Content-Length 或 Transfer-Encoding 标头字段来表示...
> 
> ... 所有 1xx（信息）、204（无内容）和 304（未修改）响应不得包含消息正文。

RFC 7230 也澄清了这一点：

> 服务器不得在任何状态码为 1xx（信息）或 204（无内容）的响应中发送 Content-Length 头域。

反正我是这么理解的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T08:49:29.503

是的，它可以返回 204。或 400。或 404。对于方法可以返回哪些状态代码没有一般限制。

另请注意，是时候停止查看 RFC 2616。请参阅[http://trac.tools.ietf.org/wg/httpbis/trac/wiki](http://trac.tools.ietf.org/wg/httpbis/trac/wiki)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-12T02:40:18.090

[在现有语言中，唯一解决RFC 7230 §3.3.2`Content-Length`](https://www.rfc-editor.org/rfc/rfc7230#section-3.3.2)之间明显矛盾的方法：

`Content-Length`“服务器不得在任何状态码为 1xx（信息）或 204（无内容）的响应中 发送标头字段。”</p>

和[RFC 7231 §4.3.7`OPTIONS`](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.7)：

`Content-Length`“如果没有在响应中发送有效负载正文， 服务器必须生成一个值为“0”的字段。”</p>

是禁止对请求的所有 204 响应`OPTIONS`。因为这似乎不是本意，所以我提交了[一份勘误报告](https://www.rfc-editor.org/errata/eid5806)。后一条语句[已从](https://github.com/httpwg/http-core/issues/235)[Draft-ietf-httpbis-semantics-06](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-semantics-06)中的 RFC 7231 中删除，因此`Content-Length`现在明确允许204 响应（没有字段）。

# javascript - 在我的 Ajax 调用服务器后立即启动 jQuery 自动完成

> ID：14702966
> 
> 赞同：0
> 
> 时间：2013-02-05T08:22:21.980
> 
> 标签：javascript, jquery

在我的代码中，我将一个`keyup`事件绑定到我的输入以检查输入值的长度是否为 3。如果是，我对服务器进行 Ajax 调用，从我的数据库中获取以输入的这 3 个字符开头的记录，然后启动 jQuery使用源自动完成 - 来自数据库的数据。

问题是当用户输入三个字符时，我得到了自动完成的来源，只有当他输入第四个字符时，自动完成才开始。是否有可能改变这种行为，只要你输入 3 个字符并让源代码开始自动完成？

这是我的代码：

```
var keypresshandler = function () {
        var  strin = document.getElementById('txtInput').value;
        newstr = strin.replace(/[^\u0400-\u04FF0-9]/gi, '');
        if (newstr.length<3)
        {
                $( "#txtInput" ).autocomplete( "destroy" );
        }  else     
            if (newstr.length==3)
            {   
                 triming();    
            }
    }

    $(function() {    
         $('#txtInput').bind('keyup', keypresshandler);
     });

    function triming() {
         //make asynchronous ajax call to server to get the source of my autocomplete                    
         // alert (mec.length);       
         $( "#txtInput" ).autocomplete({source: mec});
     }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:33:00.833

`trimming()`简单：在两个字符后调用。

您看到的效果是`autocomplete()`只是设置了自动完成功能，而不是“启动”它。自动完成由`autocomplete()`安装的按键处理程序启动。因此，您需要“过早”安装处理程序一个字符。

# tfs - 如何保留项目的版本

> ID：14702968
> 
> 赞同：0
> 
> 时间：2013-02-05T08:22:28.887
> 
> 标签：tfs, visual-studio-2012

TFS 中有 Visual Studio 2008 项目。

如何为我的 Visual Studio 2012 获取此项目，以便在我签入服务器项目时不会转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:53:11.263

VS2010 和 VS2012 之间支持往返，但 VS2008 不支持。因此，如果您的 2008 年用户可以迁移到 2010 年，那将是理想的 - 使用 VS2010 express 可能吗？如果功能集足够。

如果你不能这样做，那么你应该考虑@Florea 建议的方法，但维护起来会很痛苦，因为使用一个平台工具集编译的代码可能会在另一个平台上失败，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:47:47.180

你想要一个项目文件 - vcxproj

将所有人迁移到 2012 创建新的编译配置更改属性 Platform Toolset 到 v90 以支持 vs 2008

保留 vcproj 和 vcxproj

维护两者的成本更高示例：使用 VS2008 的团队 A 添加了一个新文件，还必须更改团队 B xproj

# java - 画布fillRect（）没有填充定义的画布

> ID：14702969
> 
> 赞同：1
> 
> 时间：2013-02-05T08:22:37.637
> 
> 标签：java, swing, awt, java-2d

我正在扩展 a`Canvas`并将其添加到 a `JFrame`。我知道 AWT 和 Swing 不应该混合使用，并且首选在 JPanel 上绘图，但我正在尝试遵循游戏引擎教程，我想坚持下去，因为到目前为止我已经开始工作了。具有`Canvas`、`minimumSize`和设置为`maximumSize`的`prefferedSize`尺寸`550, 400`。当我进行绘图调用`graphics.draw(0,0,550,400)`时，它不会按应有的方式填满整个屏幕。我将绘制调用更改为`graphics.draw(0,0,560,410)`本质上添加 10px 并填充整个屏幕。怎么了？

顺便说一句：`graphics.draw(10,10,550,400`从角落开始绘制矩形，所以我认为 JFrame 不是问题。

`Launcher`类内的主要调用

```
 public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            game.setMinimumSize(DIMENSIONS);
            game.setMaximumSize(DIMENSIONS);
            game.setPreferredSize(DIMENSIONS);

            game.frame = new JFrame(NAME);
            game.frame.setLayout(new BorderLayout());
            game.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            game.frame.add(game, BorderLayout.CENTER);
            game.frame.pack();

            game.frame.setResizable(false);
            game.frame.setLocationRelativeTo(null);
            game.frame.setVisible(true);

            Logger.log(TAG, "Game starting");
            game.start();
        }
    });
} 
```

抽奖电话，`Launcher.HEIGHT`并且`WIDTH`是`550,400`

```
 public void draw(float deltaTime, Graphics2D graphics) {
    graphics.setColor(Color.BLACK);
    graphics.fillRect(0, 0, 550, 400);
    graphics.setColor(Color.DARK_GRAY);
    graphics.fillRect(0, 0, 150, 40);
    graphics.fillRect(0, Launcher.HEIGHT - 100, Launcher.WIDTH, 100);
    graphics.setColor(Color.LIGHT_GRAY);
    graphics.fillRect(125, Launcher.HEIGHT - 100, 100, 350);
} 
```

扩展`Canvas`类

```
public abstract class Game extends Canvas implements Runnable {
private static final String TAG = "Game";

public JFrame frame;
public JPanel panel;
public boolean isApplet = false;

private boolean gameRunning = false;

BufferStrategy bufferStrategy;

private Screen screen;
private Thread renderThread;

public synchronized void start() {
    // Canvas
    setBounds(0, 0, 550, 400);
    setIgnoreRepaint(true);
    createBufferStrategy(2);
    bufferStrategy = getBufferStrategy();

    // Screen, Handlers, ETC
    screen = getStartScreen();

    // Threads
    renderThread = new Thread(this, Launcher.NAME + "_main");
    renderThread.start();
    gameRunning = true;
}

@Override
public void run() {
    long startTime = System.nanoTime();

    while (gameRunning) {
        float deltaTime = (System.nanoTime() - startTime) / 1000000000.0f;
        startTime = System.nanoTime();

        screen.update(deltaTime);

        Graphics2D graphics = (Graphics2D) bufferStrategy.getDrawGraphics();

        screen.draw(deltaTime, graphics);

        graphics.dispose();
        bufferStrategy.show();

        // FPS Counter

        // FPS Capper
    }
}
} 
```

要求的 SSCCE

```
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics2D;
import java.awt.image.BufferStrategy;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

@SuppressWarnings("serial")
public class Game extends Canvas implements Runnable {

    public static final int WIDTH = 550;
    public static final int HEIGHT = 400;
    public static final Dimension DIMENSIONS = new Dimension(WIDTH, HEIGHT);

    public static final String NAME = "SSCCE";

    public boolean gameRunning = false;

    public JFrame frame;
    public BufferStrategy bufferStrategy;

    public static void main (String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Game game = new Game();
                game.setMinimumSize(DIMENSIONS);
                game.setMaximumSize(DIMENSIONS);
                game.setPreferredSize(DIMENSIONS);

                game.frame = new JFrame(NAME);
                game.frame.setLayout(new BorderLayout());
                game.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                game.frame.add(game, BorderLayout.CENTER);
                game.frame.pack();

                game.frame.setResizable(false);
                game.frame.setLocationRelativeTo(null);
                game.frame.setVisible(true);

                System.out.println("Game started");
                game.start();
            }
        });
    }

    public synchronized void start() {
        setSize(550, 400);
        setBounds(0, 0, 550, 400);
        setIgnoreRepaint(true);
        createBufferStrategy(2);
        bufferStrategy = getBufferStrategy();

        // Threads
        Thread renderThread = new Thread(this, NAME + "_main");
        renderThread.start();
        gameRunning = true;
    }

    @Override
    public void run() {
        while (gameRunning) {
            Graphics2D graphics = (Graphics2D) bufferStrategy.getDrawGraphics();

            graphics.setColor(Color.BLACK);
            graphics.fillRect(0, 0, WIDTH, HEIGHT);

            graphics.dispose();
            bufferStrategy.show();
        }
    }

} 
```

至于我关注的 Java 2D 游戏教程，它是一个网络系列。尽管如此，链接如下[点击此处](https://www.youtube.com/channel/SWMrVl9IenNHc)。我修改了很多代码。

为 MadProgrammer 修改

```
 import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics2D;
import java.awt.image.BufferStrategy;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

@SuppressWarnings("serial")
public class Game extends Canvas implements Runnable {

    public static final int WIDTH = 550;
    public static final int HEIGHT = 400;
    public static final Dimension DIMENSIONS = new Dimension(WIDTH, HEIGHT);

    public static final String NAME = "SSCCE";

    public boolean gameRunning = false;

    public JFrame frame;
    public BufferStrategy bufferStrategy;

    public static void main (String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Game game = new Game();
                game.setMinimumSize(DIMENSIONS);
                game.setMaximumSize(DIMENSIONS);
                game.setPreferredSize(DIMENSIONS);

                game.frame = new JFrame(NAME);
                game.frame.setLayout(new BorderLayout());
                game.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                game.frame.add(game, BorderLayout.CENTER);
                game.frame.pack();

                game.frame.setResizable(false);
                game.frame.setLocationRelativeTo(null);
                game.frame.setVisible(true);

                System.out.println("Game started");
                game.start();
            }
        });
    }

    public synchronized void start() {
        setSize(550, 400);
        setBounds(0, 0, 550, 400);
        setIgnoreRepaint(true);
        createBufferStrategy(2);
        bufferStrategy = getBufferStrategy();

        // Threads
        Thread renderThread = new Thread(this, NAME + "_main");
        renderThread.start();
        gameRunning = true;
    }

    @Override
    public void run() {
        while (gameRunning) {
            Graphics2D graphics = (Graphics2D) bufferStrategy.getDrawGraphics();

            graphics.setColor(Color.RED);
            // Using getWidth()
            graphics.fillRect(0, 0, getWidth(), getHeight());
            graphics.setColor(Color.GREEN);
            // Using WIDTH which was used to set the size of the canvas
            graphics.fillRect(5, 5, WIDTH, HEIGHT);

            graphics.dispose();
            bufferStrategy.show();

            try {
                Thread.sleep(60);
            } catch (InterruptedException ex) {
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:46:08.250

您提供的示例工作正常。我对其进行了一些修改以演示`getWidth/height`

![在此处输入图像描述](../Images/1c910cf9341ca2e21157dc12b580b7b1.png)

```
public void run() {
    while (gameRunning) {
        Graphics2D graphics = (Graphics2D) bufferStrategy.getDrawGraphics();

        graphics.setColor(Color.RED);
        graphics.fillRect(0, 0, getWidth(), getHeight());
        graphics.setColor(Color.GREEN);
        int width = getWidth() - 50;
        int height = getHeight() - 50;
        graphics.fillRect(25, 25, width, height);
        graphics.setColor(Color.BLACK);
        FontMetrics fm = graphics.getFontMetrics();
        graphics.drawString("Frame Size: " + frame.getWidth() + "x" + frame.getHeight(), 0, fm.getAscent());
        graphics.drawString("Canvas Size: " + getWidth() + "x" + getHeight(), 0, fm.getAscent() + fm.getHeight());

        graphics.dispose();
        bufferStrategy.show();
        try {
            Thread.sleep(60);
        } catch (InterruptedException ex) {
        }
    }
} 
```

# spring - 在 waitForExecutionToCompleteOnShutdown 期间销毁 Spring 上下文

> ID：14702977
> 
> 赞同：2
> 
> 时间：2013-02-05T08:23:20.583
> 
> 标签：spring, tomcat7, quartz-scheduler, applicationcontext

我有一个 Spring 应用程序，其中包含许多预定的 Quartz 作业。当 Tomcat 的`shutdown.sh`文件被执行时，Tomcat 停止。但是，我希望我的所有工作都完成执行，然后我希望应用程序服务器停止。

这很好用：所有正在执行的作业在服务器关闭之前完成它们的作业。但是，当我执行时，Spring 上下文被破坏了`shutdown.sh`。所以任何类型的数据库操作等过程都无法完成，因为我得到了一个`NoClassDefFoundError`.

我该如何处理这种情况？我希望在我的 Quartz 作业完成执行后销毁 Spring 上下文。

# javascript - Node.js EPIPE 错误

> ID：14702978
> 
> 赞同：11
> 
> 时间：2013-02-05T08:23:33.310
> 
> 标签：javascript, node.js, socket.io

我有一个由 node.js 服务器加上其他文件和 HTML 文件组成的应用程序。HTML 文件是我的客户端，它必须与 node.js 服务器通信。node.js 服务器使用与其他 node.js 文件创建的对象通过以太网电缆与 PLC 进行通信。所以我在服务器和客户端之间创建了一个 socket.io 连接，在服务器和 PLC 之间创建了一个 tcp 连接。

现在出现错误：如果我在连接所有电缆的情况下启动服务器和客户端，我从 PLC 得到正确答案，如果我在运行时断开电缆，我会收到以下错误：

```
events.js:71
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: write EPIPE
    at errnoException (net.js:770:11)
    at Socket._write (net.js:552:19)
    at Socket.write (net.js:511:15)
    at Timer.<anonymous> (C:\Users\Massimo\workspace\Scada\plc_driver\fw_driver.
js:289:20)
    at Timer.exports.setInterval.timer.ontimeout (timers.js:234:14) 
```

我已经尝试使用代码管理*服务器中的错误*

```
communication_socket.on('error', function () {
    console.log('Error!');
}); 
```

我正在运行节点 0.8.18 并且所有软件包都已更新（我已经做了一个*npm update -g*）

**编辑** 代码的结果

```
process.on('uncaughtException', function(err) {
    console.log(util.inspect(err));
}); 
```

是：

```
{ [Error: write EPIPE] code: 'EPIPE', errno: 'EPIPE', syscall: 'write' } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-12T04:23:30.187

套接字 IO 错误不会以您可以尝试/捕获它们的方式抛出。`on('error', [callback])`您必须为每个套接字添加一个处理程序。您可以在[应该 stream.pipe 转发错误中阅读一些相关讨论吗？](https://groups.google.com/forum/?fromgroups=#!searchin/nodejs/EPIPE/nodejs/lJYT9hZxFu0/brImF1aRFlMJ) 你没有说为什么你有一个超时以及超时写入哪个套接字，所以我不能帮助你更多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-06T21:04:21.230

Metor 中的部署命令失败后出现此错误。我可以通过在调试模式下运行应用程序、单击函数断点然后再次运行部署脚本来修复它。我希望这可以帮助别人。

# javascript - 从服务器推送websocket数据后Angularjs模型发生变化

> ID：14702981
> 
> 赞同：8
> 
> 时间：2013-02-05T08:23:50.043
> 
> 标签：javascript, websocket, angularjs, socket.io

从服务器推送 websocket 后，我​​正在尝试更改我的角度模型。`$scope.contacts`每次服务器提供新数据时如何更改值..？

我不确定是否可以使用`$apply`. 我知道我可以访问 DOM 元素检索范围然后更改值，但应该有更好的解决方案！

我对从外部更新角度模型而不创建角度模块的解决方案非常感兴趣，因为我使用的是发出更改事件的相关数据源。有没有像 Backbone.js 那样简单的方法来做到这一点，你可以说：

```
var book = new Backbone.Model({ title: 'value' });
book.set("title", "A Scandal in Bohemia"); 
```

我在 angularjs 中想要的是：

```
function MyController($scope) {
    $scope.contacts = [];
}

datasource changed -> function () {
    MyController.set('contacts', 'value'); // change angular scope property
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T09:01:24.300

查看 socket.io 角度服务：

```
angular.module('app')
  .factory('socket', ['$rootScope', function ($rootScope) {

    var socket = io.connect();

    return {
      on: function (eventName, callback) {
        socket.on(eventName, function () {  
          var args = arguments;
          $rootScope.$apply(function () {
            callback.apply(socket, args);
          });
        });
      },
      emit: function (eventName, data, callback) {
        socket.emit(eventName, data, function () {
          var args = arguments;
          $rootScope.$apply(function () {
            if (callback) {
              callback.apply(socket, args);
            }
          });
        })
      }
    };

  }]); 
```

和使用它的控制器：

```
angular.module('app')
  .controller('Controller', ['$scope', 'socket', function ($scope, socket) {

    socket.emit('register')

    socket.on('register', function (data) {
        $scope.data = data;
    });

}]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:37:49.547

就像下面那样做

```
 socket.onmessage = function (event) {
     scope.$apply(function(){
       // modify scope values here 
     }
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T16:25:47.917

好吧，标记的答案肯定不是OP所要求的“简单方法”。这是一个更简单的解决方案。

在您自己的 JavaScript 代码中的任意位置检索范围：

```
var scope = angular.element($("#elementID")).scope(); 
```

更改 Angular`$scope`变量中的值，但从外部 JavaScript 更改：

```
scope.$apply(function() {
    scope.yourArrayForExample.push({name: 'New, external value'});
}); 
```

这是一个[JSFiddle](http://jsfiddle.net/HejjR/3/)。

# jquery - 如何根据href文件名添加rel属性

> ID：14702982
> 
> 赞同：0
> 
> 时间：2013-02-05T08:23:54.183
> 
> 标签：jquery

我有一个 ASP 搜索脚本，它主要返回 PDF 和其他一些文档的结果。在该站点的大部分内容中，我使用了一个名为线索提示（由 Karl Swedberg 编写）的 jQuery 插件，当用户将鼠标悬停在某些链接上时，它会创建一个工具提示。这些链接的内容是由 ajax 从链接的 rel 属性中定义的 html 文件中提取的：

```
<a href="../../example.pdf" class="tips" rel="../../tooltips/example.html> 
```

当用户进行搜索时，我希望能够将这些工具提示从某个特定位置动态添加到 PDF - `../../technicalarticles`. 所以我需要：

1.  查找所有返回的 PDF`../../technicalarticles`并添加`class="tips"`到链接中
2.  我需要从这些 PDF 中提取相关文件名（从最后一个`/`文件到文件扩展名的所有内容）
3.  将该文件名附加到`rel`属性

到目前为止，以下是我的 jQuery 代码：

```
<script type="text/javascript">
$(".results a").each(function() {
    if (window.location.href.indexOf("technicalarticles") >= 0)
    // if statement to find the right pdfs
    { 
        var firstpos = location.href.lastIndexOf('/')+1; // finds the position of the last / and adds 1
        var lastpos = location.href.lastIndexOf('.')-1; // finds the position of the last . and subtracts 1
        var filename = location.href.substr(firstpos, lastpos); // filename should now have eveything from the last / to the file extension

        $(this).attr('rel', ".data/tooltips/" + filename + ".html"); // adds the rel string to the link
        $(this).addClass('tips'); // adds the class 'tips' to the link
    }
} );
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:39:24.157

window.location 是当前页面的 url。您需要使用 jQuery 方法 $(this) 的上下文 - 当前已处理的链接。尝试通过 .attr() 像这样获取/设置它的属性

```
var target = $(this);
someUrlPath = /here get part of url/
target.attr('rel', target.attr('rel') + someUrlPath); 
```

但我认为更好的做法是尽可能使用 ASP 填充 rel 参数。

# excel - 在 RTD 更新上运行宏

> ID：14702983
> 
> 赞同：1
> 
> 时间：2013-02-05T08:23:54.100
> 
> 标签：excel, vba, rtd

我的问题如下：

我正在运行一个实时数据服务器，其倒计时从 900 到 0。一旦倒计时达到 5，我希望 excel 在工作表（RTD_NEWS）中复制范围（B2 到 B61）并将其粘贴到新的工作表中作为值。

问题是当剩余时间达到 5 时，我的宏不会自动执行此操作。如果我在单元格为 5 时点击运行，它会正确运行。

我已经制作了 2 个宏，其中第一个需要按照我的意愿运行，如果我手动更改单元格但不使用 RTD 链接，第二个可以工作。

**第一个宏是：**

```
Function Test()
Dim TimeRemaining As Long
TimeRemaining = ActiveWorkbook.Sheets("RTD_NEWS").Range("D2")
If TimeRemaining = 5 Then
Application.Goto ActiveWorkbook.Sheets("RTD_NEWS").Range("B2", "B61")
Selection.Copy
Worksheets.Add
Application.Goto ActiveSheet.Range("B21")
ActiveCell.PasteSpecial (xlPasteValues)
Application.Wait Now + TimeValue("00:00:06")
End If
End Function 
```

**第二个宏是：**

```
Sub auto_open()
   ' Run the macro DidCellsChange any time a entry is made in a
   ' cell in Sheet1.
   ThisWorkbook.Worksheets("RTD_NEWS").OnEntry = "DidCellsChange"
End Sub
Sub DidCellsChange()
  Dim KeyCells As String
   ' Define which cells should trigger the KeyCellsChanged macro.
   KeyCells = "D2"
   ' If the Activecell is one of the key cells, call the
   ' KeyCellsChanged macro.
   If Not Application.Intersect(ActiveCell, Range(KeyCells)) _
   Is Nothing Then KeyCellsChanged
End Sub
Sub KeyCellsChanged()
   Dim Cell As Object

    For Each Cell In ActiveWorkbook.Sheets("RTD_NEWS").Range("D2")
   If Cell = "200" Then

Application.Goto ActiveWorkbook.Sheets("RTD_NEWS").Range("B2", "B61")
Selection.Copy
Worksheets.Add
Application.Goto ActiveSheet.Range("B21")
ActiveCell.PasteSpecial (xlPasteValues)
Application.Wait Now + TimeValue("00:00:06")
   End If
   Next Cell
End Sub 
```

# html - Safari 中的表单验证错误消息

> ID：14702984
> 
> 赞同：1
> 
> 时间：2013-02-05T08:23:58.507
> 
> 标签：html, input, safari

我使用的是 Safari 6.0.2 版，但我不知道如何让 HTML5 表单验证正常工作。我的代码如下：

```
<input type="url" name="url" required /> 
```

如果我将表单留空或写一些不是 URL 的内容，则表单不会提交。问题是我没有像在 Chrome 中那样收到错误消息，它告诉我必须填写该字段。有没有办法在不使用 jQuery 插件的情况下激活 Safari 中的错误消息？

# ajax - IE Ajax 响应是旧数据

> ID：14702986
> 
> 赞同：0
> 
> 时间：2013-02-05T08:24:01.283
> 
> 标签：ajax, internet-explorer, browser-cache

我的应用程序中显示的数据是通过 ajax 请求检索的。我使用 ajax 将表单发布到脚本中。这将对数据库进行更改。成功发布后，回调函数对当前页面（发布表单的页面相同）发出 ajax 请求。由于数据库中的更改，此页面现在将发生更改。（所以它基本上是通过 ajax 进行更改后的 ajax 刷新）。

在 chrome 和 FF 中一切正常，对数据库进行了更改，然后刷新了页面。但是在 IE 中它不会显示新数据，即使对数据库进行了更改，并且所有回调函数都会执行。

我可以在 IE 中进行更改，当我在 chrome 和 FF 中刷新时，我可以看到更改，但是要在 IE 中显示更改，我必须关闭并重新打开浏览器？？？

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:35:32.177

尝试 js reload(true)。该参数应强制刷新页面而忽略缓存。

您是否也尝试将其添加到您的 html 中？

```
<meta http-equiv="Cache-control" content="no-cache"> 
```

# xml - 使用 XPath 获取 XML 架构限制

> ID：14702988
> 
> 赞同：0
> 
> 时间：2013-02-05T08:24:09.517
> 
> 标签：xml, xpath, xsd

我正在尝试获取 XML 模式文件中元素、simpleTypes 和 complexTypes 的所有限制（minOccurs、maxOccurs、totalDigits、maxLength 等）。由于这些限制在子元素中，应该可以根据 xsd:element、xsd:simpleType 和 xsd:complexType 以及属性“name”的值选择这些限制元素。然后，我可以逐个元素地遍历结果集，并在表格中填充每个元素的限制。

不幸的是，我无法构建这样的 XPath 表达式。也许这甚至不可能？这是我到目前为止所拥有的：

```
//*[xsd:element[@name] or xsd:simpleType[@name] or xsd:complexType[@name]]//xsd:restriction/descendant::* 
```

这让我得到了限制，比如 minOccurs 等，但我需要让父元素带有它们的@name-value。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:19:11.387

首先，在 XML 级别处理原始模式文档是很困难的，除非您知道模式作者正在以特定方式使用该语言。写同一件事的方法太多了（例如，使用模型组、属性组、xs:include、命名类型与匿名类型等）。您可以通过使用模式 API 访问已编译模式或使用 Saxon 的 SCM（它是已编译模式的 XML 表示）来避免此问题 - 这消除了表面语法变化并允许您访问底层模式组件模型，在XML 表示。

其次，你说你想用结果“填满一张桌子”。也就是说，您想要的结果比简单的字符串、数字或节点集更复杂。因此，您在 XPath 的域之外并进入了 XQuery 或 XSLT——您想要构造一个结构化的结果。

# typo3 - TYPO3：页面类型外部网址，默认在新窗口中打开外部链接

> ID：14702990
> 
> 赞同：3
> 
> 时间：2013-02-05T08:24:22.343
> 
> 标签：typo3, typoscript

我正在寻找一种在新窗口中默认打开外部菜单链接的解决方案。（不在目标字段中写 _blank）但不更改 url，url 应该不再是例如 ..../test.html 而不是 ...www.external-url.co .....

我已经试过了

在打字稿中

```
config.extTarget = _blank 
```

在常数

```
styles.content.links.extTarget = _blank 
```

但没有成功。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-07T07:52:16.907

只需编辑外部链接的站点属性：转到 Behaviour-Tab 并在字段**Link Target中插入***_blank*。您的外部链接现在应该在新窗口/标签中打开。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T10:15:35.523

如果您需要在新窗口的菜单中打开外部网址，请检查并尝试以下排版：

```
lib.mainmenu = HMENU
lib.mainmenu {
  special = directory
  special.value = 1
  1=TMENU
  1.wrap=<ul>|</ul>
  1.NO {
    # do not create a link here else there are double <a> tags
    doNotLinkIt = 1
    wrapItemAndSub=<li>|</li>
    stdWrap.cObject = CASE
    stdWrap.cObject {
      key.field = doktype
      default = TEXT
      default {
        field = title
        typolink.parameter.field = uid
        stdWrap.htmlSpecialChars = 1
      }

      # 3 = external url
      3 = TEXT
      3 {
        field = title
        typolink.parameter.field = url
        typolink.extTarget = _blank
      }

    }
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-16T21:04:12.347

Sankar 版本可以简化，如果设置了“目标”，菜单项将采用字段值。

```
lib.mainmenu = HMENU
lib.mainmenu{
    entryLevel = 0
    1 = TMENU
    1{
        expAll = 1
        wrap = <ul>|</ul>
        NO = 1 
        NO.wrapItemAndSub = <li>|</li>
        NO.ATagParams{
            override = target="_blank"
            override.if{
                isFalse.field = target
                equals = 3
                value.field = doktype
            }
        }
        ACT < .NO
        ACT.ATagParams.noTrimWrap = |class="active" ||
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T10:31:18.173

只需使用 jQuery，不用担心 CMS

```
$("a[href^='http:']:not([href*='" + window.location.host + "'])").attr("target", "_blank"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-11T08:44:27.997

它以这种方式对我有用：

我去了**模板**模块然后到网站的主页（主页）

然后我选择了“typoscript object browser”并在“costants”中搜索了“extTarget”，然后点击了结果，就可以更改目标了。

我保存了，效果很好！**

# subdomain - 为子域分配不同的域 url

> ID：14702994
> 
> 赞同：0
> 
> 时间：2013-02-05T08:24:52.223
> 
> 标签：subdomain, plesk

我有我网站的域 example1.com，我还有以下域：example2.com 和 example3.com 我需要在 example1.com（subdomain2.example1.com 和 subdomain3.example1.com）中创建两个子域，它们将分别指向到 example2.com 和 example3.com

我如何在 PLESK 中做到这一点？

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:53:25.863

有3种方式：

*   为 example2.com 创建域别名 subdomain2.example1.com 和为 example3.com 创建 subdomain3.example1.com
*   创建子域，然后将此子域的托管类型更改为标准转发
*   为 example1.com 创建子域，然后将 index.html 放置到每个子域的 /httpdocs 中，内容如下（查看[本文](http://en.wikipedia.org/wiki/Meta_refresh)）：

> ```
> <html>
>     <head>
>         <meta http-equiv="refresh" content="0;URL='http://exampleX.com/'">
>     </head>
>     <body>
>     </body>
> </html> 
> ```

# regex - 带管道的正则表达式

> ID：14702997
> 
> 赞同：1
> 
> 时间：2013-02-05T08:25:22.543
> 
> 标签：regex

我有一个将用作配置值的字符串。它就像`1|1|1`或`1|1|2`或`2|1|2`等等。有八种不同的组合。整数要么是`1`要么`2`..

问题是我必须在整数之间使用管道。在正则表达式管道中表示“或”，但我需要在我的字符串中使用它..

`[1-2][\|][1-2][\|][1-2]`是我想出的。这是合乎逻辑的还是有更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:26:54.053

我会使用：

```
([12])\|([12])\|([12]) 
```

因此，您同时捕获 1 和 2 并将它们放在一个组中以供将来使用。

减号不是必需的，因为 和 之间的 ASCII 中不可能有`1`字符`2`。