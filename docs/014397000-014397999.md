# StackOverflow 问答 14397000-14397999

# java - 骆驼在死信队列中序列化json

> ID：14397002
> 
> 赞同：2
> 
> 时间：2013-01-18T10:32:42.397
> 
> 标签：java, json, activemq, apache-camel

我必须将我的对象（CcRequest）存储在 Json 格式的 DeadLetterQueue 中。

怎么可能？

这是我的简单上下文：

```
<camelContext id="el1DMRCamelContext" autoStartup="true" xmlns="http://camel.apache.org/schema/blueprint" >

    <template id="producerTemplate" />

    <!-- Routes -->
    <route id="createCcProcessorRoute" errorHandlerRef="createCcErrorHandler" >
        <from uri="activemq:queue:createCc" />
        <process ref="createCcProcessor" />
    </route>
</camelContext>

<bean id="createCcErrorHandler" class="org.apache.camel.builder.DeadLetterChannelBuilder" >
    <property name="deadLetterUri" value="activemq:queue:createCcDLQ" />
    <property name="redeliveryPolicy" ref="redeliveryPolicy" />
</bean> 
```

我希望我的 activemq:queue:createCcDLQ 中的对象（CcRequest 存储在交换体中）采用 Json 格式而不是二进制文件。

是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:01:23.080

我不会将您想做的事情归类为死信处理程序。死信通常只是原始消息的移动/重新传递。

改用 excetion 子句非常简单。

```
<dataFormats>
    <json id="jsonFormat" library="Jackson"/>
</dataFormats>

<onException>
  <exception>java.lang.RuntimeException</exception>
  <marshal ref="jsonFormat"/>
  <to uri="activemq:queue:createCcDLQ"/>
</onException> 
```

[骆驼例外条款文档](http://camel.apache.org/exception-clause.html)

[骆驼 JSON 文档](http://camel.apache.org/json)

# perl - 如何扩展 perl 源文件头解析器以保留现有信息？

> ID：14397003
> 
> 赞同：0
> 
> 时间：2013-01-18T10:32:48.527
> 
> 标签：perl, pattern-matching, fileparsing

我有一个现有项目，需要在每个源文件的开头使用许可证头。问题是许可证标头不是静态的：

```
#+======================================================================
# \$HeadURL [filled in by svn] \$
# \$Id [filled in by svn] \$
#
# Project       : Project blah blah - only one line
#
# Description   : A longer description
#                 which may or may not span multiple lines
#
# Author(s)     : some author text
#                 but there may be a few more authors, too!
#
# Copyright (c) : 2010-YYYY Some company,
#                 and a few fixed lines of 
#                 address
#
# and a few more lines of fixed license code
# that does not change
#
#-====================================================================== 
```

我有一个现有的 perl 脚本，它扫描文件列表以确定文件类型（C、Java、bash 等）并进行基本检查以查看是否存在许可证序言。

如果没有，它可以插入必须手动更新的空白许可证标题。

但我想知道我该怎么做：

1.  检测具有非静态信息的现有许可证，以及
2.  扩展现有的 perl *processFile($fileName, $type)*函数（如下）以保留现有的“项目”、“描述”和“作者”信息？

我怀疑我可能需要在许可证模板中放置标记以指示动态文本，这应该保留在重新生成的标题中..？

您能否给我一些关于如何使用 perl 正则表达式或模式匹配器来获取当前变量信息的指示，以便我可以将其重新插入标题并更新年份？

我可以看到所有的魔法都需要在“for ($i = 0; $i < 5; ++$i)”循环中发生......

```
sub processFile {
    my $i;
    my $lineno = 0;
    my $filename = $_[0];
    my $type = $_[1];
    my @license = split(/\n/, $licenses{$type});
    my @contents;

    #print "$filename is a $type file\n";
    tie @contents, 'Tie::File', $filename or die $!;

    if ($prolog{$type}) {   # should not insert license at line 0
        my $len = scalar(@contents);
        while ($lineno < $len) {
            if ($contents[$lineno] =~ /^$prolog{$type}$/) {
                last;
            } else {
                $lineno++;
            }
        }
        if ($lineno >= $len) {
            # no prolog, so let's just insert it into the start
            $lineno = 0;
        } else {
            $lineno = $lineno + 1;
        }
    } else {
        $lineno = 0;
    }

    # Compare the first 5 lines excluding prolog with the license
    # header. If they match, the license header won't be inserted.
    for ($i = 0; $i < 5; ++$i) {
        my $line = $contents[$i + $lineno];
        $line =~ s/\$(\w+)\:.*\$/\$$1\$/;
        if ($line ne $license[$i]) {
            splice @contents, $lineno, 0, @license;
            push @processedFiles, $filename;
            last
        }
    }

    untie @contents;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:38:23.563

为了更深入地回答您的问题，我将不得不看看更多的股票标题是什么样的。正如我在评论中所写，您在此处展示的可用于 bash 或 Perl——可能是 Python 或 Ruby（但您没有提及这些）。

正如我所指出的，您可能会采用处理程序方法。您设置一个处理程序数组，每个处理程序告诉主处理器部分它是否处理该名称的文件。

```
package CommentFileHandler;

sub _unimpl { 
    local $Carp::CarpLevel = $Carp::CarpLevel + 1;
    Carp::croak( $_[0] . 'needs to implement ' . ( caller 1 )[3] );
}

sub accept_file     { &_unimpl; }
sub scan_for_header { &_unimpl; }
sub has_header      { &_unimpl; }
sub insert_header   { &_unimpl; }

package Perlish::CommentHandler;
use strict;
use warnings;
use parent -norequire 'CommentFileHandler';

sub accept_file { 
    my ( $self, $file_name, $h ) = @_;
    return 1 if $file_name =~ m/\.(?:cgi|(?:ba|[ck])sh|p[lmy]|rb)$/;
    # might need to scan for shbang.
    while ( <$h> ) { 
        if ( m/^#!/ ) { # we're locked in...
            return m/\b(python|perl|ruby|(?:ba|k)?sh) /;
        }
    }
    return;
}

sub scan_for_header {
    # might be as simple as this:
    my ( $self, $h ) = @_;
    my $text = <$h> . <$h>;
    return $text =~ m{
        \A        # Start of all text
        [#]       # literal hash
        [+]       # literal '+'
        ={70}     # 70 '='
        \s*?      # any number of spaces (wide accepter pattern) -- non-greedy
        $         # end of one line
        \s*?      # possible other control character
        ^         # start of the next
        [#]       # literal '#'
        \W+       # At least one "Non-word" word=[_0-9A-Za-z]
        HeadURL\b # The word 'HeadURL' 
    }msx; # x - means that we can expand it as above.
}

sub insert_header { 
    my ( $self, $h ) = @_;
    # expect $h to be rewound back to top of file: seek( $h, 0, 0 )
    print $h <<'END_COMMENT_HEADER';
#+======================================================================
# \$HeadURL [filled in by svn] \$
# \$Id [filled in by svn] \$
#
# Project       : Project blah blah - only one line
#
# Description   : A longer description
#                 which may or may not span multiple lines
#
# Author(s)     : some author text
#                 but there may be a few more authors, too!
#
# Copyright (c) : 2010-YYYY Some company,
#                 and a few fixed lines of 
#                 address
#
# and a few more lines of fixed license code
# that does not change
#
#-======================================================================
END_COMMENT_HEADER
    } 
```

然后，您将跟踪每个已修改的文件，以便您有一个列表来手动编辑文件（如果已修改）。

您可以加载处理程序，如下所示：

```
my @file_handlers = qw<Perlish::CommentHandler CStyle::CommentHandler ...>;

use List::Util qw<first>;
File::Find::find( sub { 
        # sorry, I'm an "early return" guy.
        unless ( -r $File::Find::name and -w $File::Find::name ) { 
            say "File: $File::Find::name could not be processed.";
            return;
        }

        return unless my $handler 
            = first { $_->accept_file( $File::Find::name ) } @file_handlers
            ;

        # We *have* a handler from here on out.

        unless ( open( my $fh, '<', $File::Find::name )) {
            Carp::carp( "Could not open $File::Find::name!" );
            return;
        }

        # We *have* an open file from here on out...

        return unless $handler->scan_for_header( $File::Find::name, $fh );

        seek( $fh, 0, 0 ); # back to the start of the file.
        my $tmp = File::Temp->new( UNLINK => 1, SUFFIX => '.dat' );
        $handler->insert_header( $tmp );
        print $tmp, $_ while <$fh>;
        $tmp->seek( 0, 0 );
        $fh->close;

        unless ( open( $fh, '>', $File::Find::name )) {
            Carp::carp( "Could not open $File::Find::name to write out header!" );
            return; # You have to check on this
        }

        print $fh $_ while <$tmp>;
        $tmp->close;
        $fh->close;
        # printing out is an easy enough way to "record" our changes.
        say "File $File::Find::name was modified at " . localtime;

    } => @selected_roots 
    ); 
```

# ios - 从部署目标 iOS 中删除特定设备

> ID：14397008
> 
> 赞同：0
> 
> 时间：2013-01-18T10:32:57.647
> 
> 标签：ios, objective-c

我正在开发的一个应用程序在第一个视网膜 iPod touch（第 4 代）上的 UIKit 缓存图像存在内存问题。

我只是想知道是否有办法让我确保第四代。iPod touch 用户在应用商店中看不到我的应用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:03:34.730

无法明确排除您的应用程序支持的特定设备（按设备类型/名称）。

但是，您可以在项目的 Info.plist 文件中从您的设备请求某些功能，这样如果设备不提供此类功能，它将被排除在您的应用程序支持的设备列表之外。

您需要修改 Info.plist 文件的“所需设备功能”数组。

在以下链接中查找 UIRequiredDeviceCapabilities 以查看您可以请求哪些功能：

[链接到 developer.apple.com](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

要排除所有 iPod，您可以尝试请求以下之一：电话、短信、gps。

请记住，这种方法可以很容易地排除全系列设备，但通过“代”编号（即第 4 代 iPod）排除特定设备可能会变得很棘手。

# perl - 使用新行将数组输出写入 perl

> ID：14397009
> 
> 赞同：2
> 
> 时间：2013-01-18T10:33:01.967
> 
> 标签：perl

我从一个子程序中得到一个输出

```
 @ outputarray

outputarray[0]=name  ip  port 
outputarray[1]=------------------------------------ 
outputarray[2]=http-listener-1  *   6712
outputarray[3]=http-listener-2  *   4743
...... etc 
```

我想创建一个新文件并写入文件 log.txt，其中文件内容如下所示并删除文件 log.txt 我如何在 perl 中实现这一点？

```
 name ip port 
------------------------------------ 
http-listener-1 *      6712 
http-listener-2 *      4743 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T10:37:34.220

如何打开文件并向其打印数组：

```
open my $fh, ">", "log.txt" or die $!;
print $fh "$_\n" for @outputarray;
close $fh; 
```

如何删除该文件：

```
unlink "log.txt" or die $!; 
```

为什么要先打印然后删除该文件，我不知道。

# javascript - 为什么在呈现为 HTML 时没有 __doPostBack() JavaScript 添加到 GridView 中的 CommandField 的更新按钮

> ID：14397014
> 
> 赞同：1
> 
> 时间：2013-01-18T10:33:10.410
> 
> 标签：javascript, asp.net, gridview, commandfield

我有一个基本`GridView`的，`CommandField`它使用 CommandField 的内置编辑、取消、更新和删除按钮，`ButtonType`属性设置为“图像”（ImageButtons），定义为：

```
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="false"
OnRowEditing="gv_RowEditing" OnRowCancelingEdit="gv_RowCancelingEdit" OnRowUpdating="gv_RowUpdating" OnRowDeleting="gv_RowDeleting">
<Columns>
    <asp:CommandField 
        ShowEditButton="true" ShowDeleteButton="true" ButtonType="Image"
        EditImageUrl="~\Images\Icons\gridView_Edit.png"
        CancelImageUrl="~\Images\Icons\gridView_CancelEdit.png"
        UpdateImageUrl="~\Images\Icons\gridView_Update.png"/>
</Columns> 
```

OnRowEditing、OnRowCancelingEdit、OnRowUpdating 和 OnRowDeleting 事件的服务器端 C# 事件处理程序工作正常，并定义为：

```
protected void gv_RowUpdating(object sender, GridViewUpdateEventArgs e) { }
protected void gv_RowEditing(object sender, GridViewEditEventArgs e) { }
protected void gv_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e) { }
protected void gv_RowDeleting(object sender, GridViewDeleteEventArgs e) { } 
```

当页面呈现为 HTML 时，`ImageButtons`in`CommandField`被呈现为以下（简化的）`<input>`标签：

```
<input type="image" name="ctl00$Body$gv$ctl02$ctl00" src="Images/update.png" alt="Update" style="border-width:0px;">
<input type="image" src="Images/delete.png" alt="Delete" onclick="javascript:__doPostBack('ctl00$Body$gv','Delete$0')" style="border-width:0px;">
<input type="image" src="Images/edit.png" alt="Edit" onclick="javascript:__doPostBack('ctl00$Body$gv','Edit$0')" style="border-width:0px;">
<input type="image" src="Images/cancel.png" alt="Cancel" onclick="javascript:__doPostBack('ctl00$Body$gv','Cancel$0')" style="border-width:0px;"> 
```

*注意：实际上，在任何时候都只会呈现编辑/删除或更新/取消，这取决于 GridView 是否处于编辑模式。*

那么，为什么渲染的 Update 按钮不使用 ASP.NET 的 __doPostBack JavaScript 函数，而 Delete、Edit 和 Cancel 按钮使用呢？

`OnRowUpdating`事件*是*如何处理的？

**注意**：当使用默认值`ButtonType`时，`CommandField`它*会*渲染 __doPostBack，但在使用`ButtonType="Image"`__doPostBack时**不**包括在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:52:05.100

请注意，这 4 个按钮永远不会一起显示，您要么有“编辑”“删除”，要么单击“编辑”后，您会得到“更新”“取消”。

因此，就像您单击“编辑”按钮并且按钮集从“编辑”“删除”更改为“更新”“取消”一样，您的“更新”按钮将`__doPostback`附加到它。

然后在您单击“编辑”按钮后`OnRowUpdating`正常处理。`doPostback`

你可以下载我的一个例子

[http://www.ii.uni.wroc.pl/~wzychla/ra2829/example3a.zip](http://www.ii.uni.wroc.pl/~wzychla/ra2829/example3a.zip)

看到那个。只需将按钮类型更改为`Image`in`Default.aspx`并将您的处理程序附加到网格。

# mysql - 在您的系统上找不到 Sphinx。

> ID：14397017
> 
> 赞同：0
> 
> 时间：2013-01-18T10:33:18.037
> 
> 标签：mysql, ruby-on-rails, rubygems, sphinx, thinking-sphinx

我在 ubuntu12.04 中使用我的 rails 应用程序。我刚刚使用这些命令安装了thinkingsphinx 和sphinx。

```
sudo apt-get install sphinxsearch    
sudo gem install thinking-sphinx 
```

但是thinking-sphinx版本是1.4.11，但我想要1.3.20。所以我安装了thinking-sphinx，版本为1.3.20。之后我开始通过 rake ts:index 进行索引

但我收到了这个错误。

```
 rake/rdoctask is deprecated.  Use rdoc/task instead (in RDoc 2.4.2+)
Please install RDoc 2.4.2+ to generate documentation.    
Sphinx cannot be found on your system. You may need to configure the following
settings in your config/sphinx.yml file:    
 * bin_path    
 * searchd_binary_name    
 * indexer_binary_name    
For more information, read the documentation:   
http://freelancing-god.github.com/ts/en/advanced_config.html    
rake aborted!    
uninitialized constant MysqlCompat::MysqlRes    
Tasks: TOP => environment
(See full trace by running task with --trace) 
```

我搜索了这个问题.. 之后我将我的 config/sphinx.yml 文件修改为

```
development:
  bin_path: "/usr/bin"
  searchd_binary_name: searchd
  indexer_binary_name: indexer
  port: 9110
  morphology: stem_en
  enable_star: true
  html_strip: 1
  min_infix_len: 2 
```

我也安装了 sudo gem install mysql 。

问题还是没有解决。。

请任何人提出解决此问题的想法..

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:24:34.200

我认为你需要运行 sphinx 守护进程。可以通过 `sudo service sphinxsearch restart`命令完成。试试看。

# android - Android ViewPager 未更新

> ID：14397020
> 
> 赞同：1
> 
> 时间：2013-01-18T10:33:22.950
> 
> 标签：android, android-viewpager

我有`ViewPager`一页和`Tab's`。在`AsyncTask`我加载数据并更新`ViewPager`，但没有任何改变。在我检查的 LogCat 中，我需要数据。

**主类.java**

```
 mViewPager = (ViewPager) findViewById(R.id.cinema_view_pager);
    mTabPager = new TabPager("Загрузка");
    mViewPager.setAdapter(mTabPager);

    LoadCinema cinema = new LoadCinema(this,0);
    cinema.execute(); 
```

**TabPager(Adapter).class**

```
public class TabPager extends PagerAdapter{

    private String message = "";

    public TabPager(String msg){
        message = msg;
    }

    @Override
    public int getCount() {
        return 1;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view.equals(object);
    }

    public void update(String msg){
        message = msg;
        notifyDataSetChanged();
    }

    @Override
    public View instantiateItem(View container, int position){
        View v = getLayoutInflater().inflate(R.layout.cinema_layout, null);

        TextView text = (TextView) v.findViewById(R.id.textView1);
        text.setText(message+"Message" +"");

        ((ViewPager) container).addView(v);
        return v;           
    }

    public void destroyItem(View container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }

} 
```

**LoadCinema.class**

```
public void onPostExecute(List<CinemaCategory> result){
    super.onPostExecute(result);
    CinemaCategory cat = result.get(page);  
    cinema.mTabPager.update(cat.getDescription());
} 
```

我尝试了三页，当我 swype 到最后一页时，我有数据，然后 swype 到第一页视图寻呼机更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:02:03.140

现在我有答案了，感谢这篇[文章](https://stackoverflow.com/questions/7369978/how-to-force-viewpager-to-re-instantiate-its-items)

适配器需要添加此代码

```
 public int getItemPosition(Object object) {
           return POSITION_NONE;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T15:26:47.507

考虑使用`FragmentStatePagerAdapter`而不是`PagerAdapter`

```
public class TabPager extends FragmentStatePagerAdapter {

...

} 
```

# ruby-on-rails - 如何验证 ATOM 和 RSS 提要的 URL

> ID：14397027
> 
> 赞同：3
> 
> 时间：2013-01-18T10:33:31.847
> 
> 标签：ruby-on-rails, validation

我的表单中有一个字段应该接受 ATOM 和 RSS 提要作为输入，我如何在我的模型中编写验证代码来验证仅提供提要作为输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:22:13.933

基本上任何有效的 URL 都可以是有效的 RSS/Atom URL。找出答案的唯一方法是点击该 URL 并检查收到的内容是否可解析为 RSS/Atom。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:18:14.983

你可以从饲料检测器中使用[它。](https://github.com/bantic/feeddetector/blob/master/feed_detector.rb#L35)是的，它会检测提要，但您可以使用正则表达式来检查模型的 url 是否匹配它

从代码：

```
 matches |= html.scan(/<link.*href=['"]*([^\s'"]+)['"]*.*application\/atom\+xml.*>/)
  matches |= html.scan(/<link.*application\/atom\+xml.*href=['"]*([^\s'"]+)['"]*.*>/)
  #  matches |=  atom_feed

  matches |= html.scan(/<link.*href=['"]*([^\s'"]+)['"]*.*application\/rss\+xml.*>/)
  matches |= html.scan(/<link.*application\/rss\+xml.*href=['"]*([^\s'"]+)['"]*.*>/)
  #  matches |= rss_feed 
```

# php - PHP 列到数组中的行

> ID：14397038
> 
> 赞同：0
> 
> 时间：2013-01-18T10:34:00.800
> 
> 标签：php, arrays

到目前为止，我已经来到这部分脚本：

```
dif($result>0)
{
    $ii=0;
    $jj=0;
    while (odbc_fetch_row($result))
    {
        for ($jj = 1; $jj <= odbc_num_fields($result); $jj++)
        {
            $rr[$ii][$jj]=odbc_result($result,$jj);
            if(is_null($rr[$ii][$jj]))
                $rr[$ii][$jj] = noData;
            echo $rr[$ii][$jj];
            echo "<br />";
            }
        $ii++;
    }
} 
```

这适用于创建和填充动态表。但我还需要创建动态数量的单行数组，其中包含我之前获得的数组的列值。
例子：

如果我有

```
Array1
2012.01.01 10 20 30
2012.01.02 1 2 3
2012.01.03 11 22 33 
```

我需要转换为

```
Array2
2012.01.01 2012.01.02 2012.01.03
Array3
10 1 11
Array4
20 2 22
Array5
30 3 33 
```

正如我之前提到的需要脚本的第一部分，那么是否有可能使用结果来创建单线阵列以供进一步使用？我想我错过了一些东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:20:51.703

for 循环和将元素添加到数组有什么问题？

```
$rr = array(array(1,2,3,4,5),array(6,7,8,9,0),array(11,22,33,44,55));

$result = array();

for($j=0;$j<count($rr[0]);$j++){
    $col = array();
    for($i=0;$i<count($rr);$i++) {
        array_push($col,$rr[$i][$j]);
    }
    array_push($result,$col);
}

print_r($result); 
```

有关演示，请参阅此键盘：[http ://codepad.org/wgSCtoMV](http://codepad.org/wgSCtoMV)

# jquery - 缩小时无法将内容居中

> ID：14397039
> 
> 赞同：-2
> 
> 时间：2013-01-18T10:34:02.567
> 
> 标签：jquery, css, html

我在网站的几乎每个元素上都使用绝对定位。它工作正常，但是我遇到的唯一问题是，当我缩小页脚时，页脚仍然很好地居中，但页眉（`#header`）和内容（`#content`）向左侧移动。我正在使用 margin:auto ，甚至尝试使用 Jquery 将它们都居中，但问题仍然存在。所以任何人都可以给我一个解决方案。我将感激不尽。

这是网站：[http ://contestlancer.com/Trivia/](http://contestlancer.com/Trivia/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:55:18.010

当我使用 firebug 检查您的网站时，它显示`#logo`,和有一个像素集。`#navigation``#righter``#aside``margin-left: ...px`

这意味着即使您缩小或放大，它们也总是有设置像素数量的左边距。尝试使用百分比代替。IE：

```
#righter {
   left: 40%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:12:09.490

通常我做什么，当有大量的乱码css和html混合时，我会用jquery强制它：

```
var w = $(window),
    el = $('#elementIwantToCenter');

//when first viewing the site => center el horizontally
el.css({position: 'absolute', left: (w.width()-parseFloat(el.css('width')))/2});

//when resizing browser window => center el horizontally
w.resize(function() {
  el.css({left: ($(this).width()-parseFloat(el.css('width')))/2});
});
w.trigger('resize'); 
```

示例：http: [//jsfiddle.net/XSDM7/](http://jsfiddle.net/XSDM7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:42:59.893

您应该将具有 id “aside” 和 “righter” 的 div 放在包装器 div 中，并为包装器 div 提供自动边距。

```
<div style="margin-left:auto;margin-right:auto;width:1024px;" > 
   <div id="aside"> </div>    
   <div id="righter"> </div>   
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:52:01.623

使用时`position:absolute`，您基本上接管了对定位的完全控制，这使得布局成为一项大工作，因为您不会给浏览器留下任何东西。

*   使用`position:relative`而不是使用的`position:absolute`地方。
*   使用`top:0px;' on both`#content `and`#footer`。
*   使用 % 作为 和 中顶部的左边距和宽度`#header`，`#content`就像在`#footer`.

示例`#content`：

```
#aside
{
  top: 30px;
  float: left;
  display: inline;
  background-color: #F7B800;
  min-height: 500px;
  position: relative;
  border-radius: 9px;
  text-align: center;
  margin-left: 15%;
  left: 0;
  width: 30%;    
}

#righter {
  vertical-align: baseline;
  top: 0px;
  float: right;
  display: inline;
  left: 0px;
  position: relative;
  min-height: 550px;
  word-wrap: break-word;
  margin-right: 5%;
  width: 45%;
  margin-left: 5%;    
} 
```

一件重要的事情是`margin-left`，`margin-right`和`width`两个部分加起来为 100%。

# ruby-on-rails - Rails 通过 link_to 的 PUT 请求变为 POST

> ID：14397044
> 
> 赞同：2
> 
> 时间：2013-01-18T10:34:12.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest

在视图文件中，我的代码类似于：

```
<%= link_to refresh_post_user_post_path(@user,@post), :method => :put%> 
```

在 routes.rb 中：

```
resources :users do
  resources :posts do
    member do
      put :refresh_post
    end
  end
end 
```

有趣的是在控制器中检查请求对象时：

```
def refresh_post
  ... ...
  p request.method # => POST
  p request.request_method # => PUT
  ... ...
end 
```

我知道方法和请求方法是不同的，但是 POST 请求来自哪里？

而且：

```
$ rake routes 
refresh_post_user_post_path PUT /users/:user_id/posts/:id/refresh_post, {:action => "refresh_post", :controller => "posts"} 
```

我使用的是 Rails 3.0.11 和 Ruby ree-1.8.7，上面的一切都没有例外。但是任何人都知道这个请求是怎么变成 POST 的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:37:59.543

Rails 使用 POST 类型模拟“高级”请求类型（PUT、DELETE 等）。这是因为浏览器通常只支持 GET 和 POST。

所以 rails 接受一个 POST 请求并寻找一个`:method`参数。如果找到这样的参数，它会相应地更新请求类型（例如，以便您的路由可以工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:28:59.943

事实是 request.method 总是返回 POST，无论是 PUT 还是 POST 请求，也无论控制器方法是默认的“更新”还是自定义方法。塞尔吉奥，你是对的。它来自 Rails 的请求类文档：

**method** : 返回环境的 REQUEST_METHOD 的原始值，即使它被中间件覆盖

**request_method**：返回应用程序应该看到的 HTTP 方法。在方法被中间件覆盖的情况下（例如，如果 HEAD 请求被转换为 #GET，或者如果使用 _method 参数来确定应用程序应该使用的方法），则此方法返回被覆盖的值，不是原版。

有趣的是，即使它是一个 PUT 请求，在日志文件中也会这样写：

```
Started POST "/users/251/posts/1234" for 127.0.0.1 at Fri Jan 18 21:48:21 +0800 2012 
```

这发生在 Rails 3.0.11 中，日志文件根本没有告诉它是 PUT 请求。但是在以后的版本中，它已被修复：

[https://github.com/rails/rails/commit/17a91a6ef93008170e50c073d1c3794f038a0a33](https://github.com/rails/rails/commit/17a91a6ef93008170e50c073d1c3794f038a0a33)

日志变得如此友好：

```
Started PUT "/users/251/posts/1234" for 127.0.0.1 at Fri Jan 18 21:48:21 +0800 2012 
```

# scala - 迭代器中的 Scala 惰性元素

> ID：14397050
> 
> 赞同：1
> 
> 时间：2013-01-18T10:34:29.457
> 
> 标签：scala

有谁知道如何在 scala 中创建一个惰性迭代器？

例如，我想通过实例化每个元素进行迭代。通过后，我希望实例死亡/从内存中删除。

如果我像这样声明一个迭代器：

```
val xs = Iterator(
 (0 to 10000).toArray,
 (0 to 10).toArray,
 (0 to 10000000000).toArray) 
```

它在声明 xs 时创建数组。可以这样证明：

```
def f(name: String) = {
  val x =  (0 to 10000).toArray
  println("f: " + name) 
  x
}

val xs = Iterator(f("1"),f("2"),f("3")) 
```

打印：

```
scala> val xs = Iterator(f("1"),f("2"),f("3"))
f: 1
f: 2
f: 3
xs: Iterator[Array[Int]] = non-empty iterator 
```

有人有想法么？

流不适合，因为元素保留在内存中。

注意：我以数组为例，但我希望它适用于任何类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:48:55.940

Scala 集合有一个`view`方法可以生成集合的惰性等效项。因此，请`(0 to 10000).toArray`使用`(0 to 10000).view`. 这样，内存中就不会创建数组。另请参阅[https://stackoverflow.com/a/6996166/90874](https://stackoverflow.com/a/6996166/90874)、[https://stackoverflow.com/a/4799832/90874](https://stackoverflow.com/a/4799832/90874)、[https://stackoverflow.com/a/4511365/90874](https://stackoverflow.com/a/4511365/90874)等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:15:57.267

使用一种`Iterator`接受按名称调用参数的工厂方法。

对于您的第一个示例，您可以执行以下操作之一：

```
val xs1 = Iterator.fill(3)((0 to 10000).toArray)
val xs2 = Iterator.tabulate(3)(_ => (0 to 10000).toArray)
val xs3 = Iterator.continually((0 to 10000).toArray).take(3) 
```

在您需要它们之前，不会分配数组。

如果您需要为每个元素使用不同的表达式，您可以创建单独的迭代器并将它们连接起来：

```
val iter = Iterator.fill(1)(f("1")) ++ 
           Iterator.fill(1)(f("2")) ++ 
           Iterator.fill(1)(f("3")) 
```

# python - 如何/何时使用 Boto 库计算 s3 上传的 md5 哈希

> ID：14397053
> 
> 赞同：1
> 
> 时间：2013-01-18T10:34:44.590
> 
> 标签：python, amazon-s3, boto

在[boto/s3](http://docs.pythonboto.org/en/latest/ref/s3.html#module-boto.s3.key)模块中有一个函数被调用`set_contents_from_filename`，它似乎将 md5 哈希作为参数。

但是文档并不清楚何时/如何计算哈希值。有人可以帮我解决这个问题吗？另外，如何将哈希信息保存到文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:01:54.680

正如@garnatt 已经说过的，该`set_contents_from_filename`方法会自动为您计算 MD5 校验和。

如果您查看文档，有一个方法称为`compute_md5`返回一个元组，该元组包含十六进制摘要中的 MD5 校验和（您在控制台中使用的内容`md5sum`）以及 base64 编码，它发送到亚马逊，这就是您在标题中看到的内容。

该方法中的`md5`参数以`set_contents_from_filename`元组格式获取MD5校验和，`compute_md5`返回方式相同。如果需要手动计算，最好的方法是使用`compute_md5`方法。否则，您必须在将元组传递给`md5`参数之前以正确的格式构建元组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T12:26:00.423

该`set_contents_from_filename`方法将自动为您计算 MD5 校验和。此方法有一个可选`md5`参数，如果您在应用程序中出于某种原因已经计算过 MD5，则允许您传入它，但如果您没有传入值，boto 将为您计算它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T13:25:07.943

boto计算的MD5是校验和的base 64编码。要上传/已上传的给定文件的标头中的“Content-MD5”可以通过以下方式计算：

```
import hashlib, base64
conn = S3Connection(access_key, secret_key)
bucket = conn.get_bucket('bucket_name')
#If you want to calculate MD5 of a file already uploaded
obj_key = bucket.get_key('file_name_in_s3')
content = obj_key.get_contents_as_string()
m = hashlib.md5()
m.update(content)
value = m.digest()
remote_md5 = base64.b64encode(value)

#To calculate md5 of a file to be uploaded to S3
cur_md5 = base64.b64encode(hashlib.md5(open('Local/Path/To/File').read()).digest()) 
```

# iphone - 如何检查设备是否有网络连接：cocos-2d

> ID：14397054
> 
> 赞同：9
> 
> 时间：2013-01-18T10:34:45.777
> 
> 标签：iphone, cocos2d-iphone, internet-connection

在我的一个 iPhone 应用程序中，我需要确定设备是否有互联网连接。有人请帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T13:21:31.883

使用可达性类。

```
 if([self checkInternetConnected] ) 
  {
    NSLog(@"Internet connected\n");
  } 

- (BOOL)checkInternetConnected 
{
    Reachability *reachability = [Reachability reachabilityForInternetConnection];  
    NetworkStatus networkStatus = [reachability currentReachabilityStatus]; 
    return !(networkStatus == NotReachable);
} 
```

您可以在此处获取 rechability 类[：下载示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)并将 Reachability.h 和 Reachability.m 添加到您的项目中。

# jquery - 页面刷新后 JQuery 验证不起作用（Jquery Mobile）

> ID：14397055
> 
> 赞同：4
> 
> 时间：2013-01-18T10:34:48.227
> 
> 标签：jquery, css, jquery-mobile, asp.net-mvc-4, jquery-validate

我有一个 Jquery Mobile/asp.net mvc4 应用程序。在第一页之后，Jquery mobile 使用 Ajax 请求调用后续页面。现在，我使用 JQuery 验证器插件对我的表单执行验证，第一次验证工作正常（即使用 ajax 调用加载时），但是当刷新/重新加载页面时验证不起作用。知道为什么会这样吗？由于这是一个移动 Web 应用程序，因此用户可能会刷新页面。

这是我使用的验证码：

```
<script type="text/javascript">    
// jquery form validation function
$(function () {
    $("#permissionRequestForm").validate({
        errorPlacement: function (error, element) {
            if (element.attr("name") === "fromTimeHH" || element.attr("name") === "toTimeHH" || element.attr("name") === "fromTimeMM" || element.attr("name") === "toTimeMM") {
                error.insertAfter($(element).parent());
            } else {
                error.insertAfter(element);
            }
        },

        //custom validation messages
        messages: {
            fromDate: "Choose From Date",
            toDate: " Choose To Date",
            fromTimeHH: "Choose From Time",
            fromTimeMM: "",
            toTimeHH: "Choose To Time",
            toTimeMM: "",
            permissionTypeOne: "Select Permission Type",
            permissionTypeTwo: "Select Permission Type",
            approverList: "Select Approver",
            reasonLeave: "Enter a Valid Reason"
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:28:29.130

这是一个疯狂的猜测，因为没有提供代码示例，我想你已经使用过：

```
$(document).ready(function() {    

}); 
```

初始化验证器插件是 jquery 的常见做法。不幸的是，文档就绪不能与 jQuery Mobile 一起使用。

也不要使用：

```
$(function () {

}); 
```

使用 jQuery 移动。

验证器插件应该在页面显示事件中初始化，如下所示：

```
$('#index').live('pageshow',function(e,data){    
    $.validator.addMethod("valueNotEquals", function(value, element, arg){
        return arg != value;
    }, "");

    $("#form1").validate({
        rules: {
            select_list : {valueNotEquals: "default"},  
        },
        messages: {  
            select_list : { valueNotEquals: "You must select a value" }
        },        
        submitHandler: function(form) {
            alert($('#form1').valid());
            form.submit();
        }
    });   
}); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/AZPhK/](http://jsfiddle.net/Gajotres/AZPhK/)。无论您关闭并返回第一页多少时间，每次显示页面时验证器都会初始化。

**编辑 ：**

如果您使用多 html 页面格式，请将此代码仅放入想要的页面，或者更好的是，创建一个新的 js 文件，将此代码（所有您的所有自定义 js 代码）放入其中并在所有 html 页面之间共享。

# video - Youtube .NET API - 上传视频 InvalidEntryException 内部原因验证失败

> ID：14397058
> 
> 赞同：2
> 
> 时间：2013-01-18T10:34:48.320
> 
> 标签：video, upload, youtube.net-api

我正在尝试使用 GData Youtube .NET API 上传视频，但以下 HTTP 请求出现错误：

```
POST /feeds/api/users/default/uploads HTTP/1.1
Content-Type: multipart/related; boundary="END_OF_PART"
User-Agent: G-AzureDevelopment/GDataGAuthRequestFactory-CS-Version=2.1.0.0--IEnumerable
X-GData-Key: 
MIME-version: 1.0
Slug: Wildlife 4.mp4 - 10:11:27.0714482
Authorization: GoogleLogin auth=
GData-Version: 2.0
Host: uploads.gdata.youtube.com
Content-Length: 8879669
Expect: 100-continue

Media multipart posting
--END_OF_PART
Content-Type: application/atom+xml; charset=UTF-8

<?xml version="1.0" encoding="utf-8"?>
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005">
  <media:group xmlns:media="http://search.yahoo.com/mrss/">
    <media:title>Titre de la vidéo</media:title>
    <media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">Shows</media:category>
    <media:keywords>High Tech, Windows, Windows Phone</media:keywords>
    <media:description>Description de la vidéo...</media:description>
    <yt:private xmlns:yt="http://gdata.youtube.com/schemas/2007" />
  </media:group>
  <yt:location xmlns:yt="http://gdata.youtube.com/schemas/2007">Paris, France</yt:location>
  <title type="text">Titre de ma vidéo</title>
  <summary type="text">Résumé de la vidéo</summary>
</entry>
--END_OF_PART
Content-Type: video/mp4
Content-Transfer-Encoding: binary 
```

响应是 HTTP 400 错误请求，内容如下：

```
<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain><code>InvalidEntryException</code><internalReason>Validation failed</internalReason></error></errors> 
```

有谁知道 HTTP 请求出了什么问题，或者我怎样才能获得有关该错误的更多详细信息？

谢谢

朱利安

# iphone - 插入数据库失败 SQLITE 错误代码 21

> ID：14397060
> 
> 赞同：0
> 
> 时间：2013-01-18T10:34:52.110
> 
> 标签：iphone, objective-c, sqlite

代码是：

```
- (IBAction)AddExpenseButtonPressed:(id)sender {
    sqlite3 *database;

    NSString *sqlStatement = @"";

    if(sqlite3_open([dataBasePath UTF8String], &database) == SQLITE_OK)
    {
        sqlStatement = [NSString stringWithFormat:@"insert into Expenses (Vendor) values ('%@');",VendorName.text];

//        sqlStatement = [NSString stringWithFormat:@"insert into Expenses ( Date,Vendor,Comment,Rate) values ('%@','%@','%@');",DateText.text,VendorName.text,CommentText.text,RateText.text];

        NSLog(@"%@",sqlStatement);
        if (sqlite3_exec(database, [sqlStatement cStringUsingEncoding:NSUTF8StringEncoding], NULL, NULL, NULL) == SQLITE_OK)
        {
            NSLog(@"record inserted successfully!!");
        }

        sqlite3_close(database);
    }
     NSLog(@"Error is--------%d",sqlite3_errcode(database));

    [self.navigationController popViewControllerAnimated:YES];

} 
```

# jquery - 选择数组中存在的属性匹配值的元素

> ID：14397062
> 
> 赞同：1
> 
> 时间：2013-01-18T10:35:02.597
> 
> 标签：jquery, asp.net-mvc

每个人都知道在 jQuery 中，按属性选择是这样的：

```
var abc =$('input[name=iphone]'); 
```

就我而言，我有一个数组。我想在我的数组中选择属性匹配值的元素。

像这样的东西：

```
var abc =$('input[name in (my_array)]'); 
```

你明白我的意思

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:50:23.700

你可以从你的数组中建立一个[多重选择器：](http://api.jquery.com/multiple-selector/)

```
var arraySelector = $.map(my_array,
    function (item) {
       return "input[name=" + item + "]";
    }).join(",");

var abc = $(arraySelector); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:37:46.207

您将不得不像这样处理它：

```
var collection = [];
$("input[name]").each(function () {
    if($.inArray($(this).attr("name"), yourArray)) {
        collection.push($(this));
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T17:15:29.763

选择的答案很接近，但有一个问题：$.inArray 返回数组中值的索引，如果不存在则返回 -1。所以我会将答案编辑为：

```
var collection = [];
$("input[name]").each(function () {
    if($.inArray($(this).attr("name"), yourArray) != -1) {
        collection.push($(this));
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:39:57.743

```
var my_array = [ /* array of names */ ];
var abc = $('input').filter( function(){
    return (my_array.indexOf( this.name ) > -1);
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T10:38:25.963

你应该在数组的长度上运行一个循环

```
var abc="";
for(var i=0;i<my_array.length;i++){
abc=$('input[name =+my_array[i]]');
} 
```

# c++ - 成员变量需要构造函数的参数

> ID：14397064
> 
> 赞同：2
> 
> 时间：2013-01-18T10:35:23.890
> 
> 标签：c++, class, arduino

我正在尝试在我编写的类中包含一个成员变量，

我的类.h

```
#include <SomeClass.h>
Class MyClass{
    public:
        MyClass(int par);
        SomeClass B;
} 
```

我的类.cpp

```
#include "MyClass.h"
#include "SomeClass.h"
MyClass::MyClass(int par){
    B=SomeClass(par);
} 
```

然而`SomeClass`，它的构造函数需要变量，所以上面的代码产生`no matching function for call to "SomeClass::SomeClass()"`

我应该在这里做什么？

**更新：** 似乎成员初始化器列表是要走的路，但是如果我想使用`SomeClass`对象数组怎么办？所以 MyClass.h 变成：

```
#include <SomeClass.h>
Class MyClass{
    public:
        MyClass(int par);
        SomeClass B[2];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:36:05.137

使用成员初始化器列表

```
MyClass::MyClass(int par) : B(par)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:30:21.363

你不能完全得到你想要的，但你可以得到你需要的。要提供对对象集的数组访问，请创建一个指针数组

```
Class MyClass {
public:
    MyClass(int par);
    SomeClass B0;
    SomeClass B1
    SomeClass* B[2]; 
```

然后在构造函数中初始化指针：

```
MyClass::MyClass(int par) :
  B0(123), B1(456)
{
    B[0] = &B0;
    B[1] = &B1;
} 
```

对于少数对象而言，这显然是乏味的，但对于您可能在微控制器上做的任何事情都很好。现在你有一个对象指针数组，可以根据需要使用：

```
for(i=0; i<2; i++) {
    B[i]->foo();
} 
```

请注意，您正在为指向每个对象的指针消耗额外的内存。

# git - GIT - 编译和测试暂存区

> ID：14397068
> 
> 赞同：8
> 
> 时间：2013-01-18T10:35:34.763
> 
> 标签：git, version-control

我正在使用`GIT`并且我正在同时处理 2 个任务。任务 1 和任务 2。现在我想推送到服务器Task1。所以我将任务1（T1）的所有相关文件提交到暂存区。

我的暂存区已准备好推送到服务器，但在此之前，我认为检查我的暂存区是否已编译并通过测试是安全的。

如何获得暂存区的工作目录`only changes in order to compile it`并运行自动化测试？

**注意我不想运行工作目录的测试，只运行暂存区域......因为工作目录有与 T1 和 T2 相关的更改。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T19:28:49.670

您可以`git stash save`将所有不相关的更改保存到存储中，运行测试，然后使用`git stash pop`. （如果是我，我会先阅读**man git-stash**以确保我按照正确的顺序完成了所有步骤。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T10:41:30.253

这听起来像你应该使用 git 分支。您的每个任务都将在一个单独的分支上开发，您可以将一个放在另一个之前，然后从第一个完成的分支（任务）合并到第二个。

有关更多详细信息，请参见[此处](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:18:35.070

我有一个类似的项目。我使用分支来实现这一点。我在`src`那里创建了一个分支和代码。一旦一切正常，我就提交然后将该点分支到一个`bin`分支。如果编译工作我提交它。然后我将`src`分支合并到`master`. 这种方法`master`只用已知的工作代码保持分支干净。并将开发代码和编译文件保存在它们自己的自治分支中（我从不推送）。

# ajax - 当响应不是错误时重定向到页面

> ID：14397072
> 
> 赞同：1
> 
> 时间：2013-01-18T10:35:43.513
> 
> 标签：ajax, jquery, redirect

我有一个表格，我提供一个名称并提交。这使用 ajax，我从服务器获得响应。如果我不添加名称并尝试提交，我会收到一条错误消息。我想在提交成功时重定向到一个 url，而不是在响应错误时重定向。

下面是萤火虫的屏幕截图，显示成功和错误响应 [响应 http://i.minus.com/jbaILwvIGfmgX7.bmp](http://i.minus.com/jbaILwvIGfmgX7.bmp) 请有人提供可以处理这种情况的 jquery 脚本。如果您需要我提供更多信息，请告诉我。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:59:18.347

将您的 ajax 调用更改为此，我认为这就是您想要的

```
$.ajax({ 
    success: function(data, textStatus, jqXHR) {
        var obj = jQuery.parseJSON(data);
        if(obj.errorMessages == undefined)
        {
            window.location.href=burl+"/browse/"+pkey+"#selectedTab=com.atlassian.jira.plug‌​in.system.project%3Aversions-panel"; 
        }
        else
        {
            alert("error");
        }
    }, 
    error: function() { 
        alert("error"); 
    } 
}); 
```

"error" 函数用于处理 ajax 调用发生的错误。但是你的 ajax 调用总是成功的，因为你总是得到一个有效的响应。因此你必须检查返回的 json 是否有错误

# jquery - Jquery 未加载：预期的声明，但发现 '*' 跳到下一个声明 [Mac 上的 Firefox]

> ID：14397073
> 
> 赞同：1
> 
> 时间：2013-01-18T10:35:44.183
> 
> 标签：jquery, macos, firefox

我有一个非常简单的页面，两个 vimeo 播放器相互叠加，在此之上还有一个图层，其中包含两个视频之一的选择。单击它会隐藏第 1 层并显示视频 1 或 2。Jquery 用于此

问题：
jquery-1.8.2.js 未在 Mac 上的 firefox 18.0 中加载。

在 developertools 我有以下警告：

```
预期的声明，但发现 '*' 跳到下一个声明
```

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-01-14T21:18:27.377

它是一个 css - 浏览器支持错误。检查您的浏览器是否支持 css 属性。

# php - PHP curl CURLOPT_CONNECTTIMEOUT 对连接超时没有影响

> ID：14397083
> 
> 赞同：1
> 
> 时间：2013-01-18T10:36:14.933
> 
> 标签：php, curl

我有以下设置：

```
$handle = curl_init();
curl_setopt($handle, CURLOPT_URL, $url);
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt($handle, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($handle, CURLOPT_TIMEOUT, 30);
curl_setopt($handle, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($handle, CURLOPT_POST, true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
$response = curl_exec($handle); 
```

但是当请求被发送到当前根本没有响应的服务器时，curl 在 1 秒内返回应答。我不明白为什么会这样，因为我已将 CURLOPT_CONNECTTIMEOUT 设置为 30，这应该意味着 curl 轮胎连接到服务器 30 秒。我需要 curl 尝试连接 30 秒，这不是 CURLOPT_CONNECTTIMEOUT 应该做的，还是有某种误解？

这是 print_r(curl_getinfo($handle), true) 返回的内容：

```
(
    [url] => http://server.url
    [content_type] => 
    [http_code] => 0
    [header_size] => 0
    [request_size] => 0
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 1.045
    [namelookup_time] => 0.016
    [connect_time] => 0
    [pretransfer_time] => 0
    [size_upload] => 0
    [size_download] => 0
    [speed_download] => 0
    [speed_upload] => 0
    [download_content_length] => -1
    [upload_content_length] => -1
    [starttransfer_time] => 0
    [redirect_time] => 0
    [certinfo] => Array
        (
        )

    [redirect_url] => 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:12:59.410

在我看来，这意味着有一个连接被远程站点关闭（中止）。服务器拒绝了您的连接，因此无需等待任何东西。顺便说一句：connection_timeout 是一个设置，用于告诉 curl 等待多长时间，直到它停止尝试到达远程主机。– Mo.sch 13 小时前

# image - Drupal 7 在 field.tpl.php 中获取图像路径

> ID：14397088
> 
> 赞同：1
> 
> 时间：2013-01-18T10:36:35.947
> 
> 标签：image, templates, drupal-7, field

我是 Drupal 7 的新手，想知道如何在我的自定义字段主题中获取图像路径。

我的主题文件夹中的字段--field_image_flow.tpl.php 文件中有以下内容：

```
<div id="Products" class="ContentFlow" style="overflow: visible;">
<!-- should be place before flow so that contained images will be loaded first -->
<div class="loadIndicator" style="position: relative; top: 150px">
    <div class="indicator"></div>
</div>

<div class="flow" style="position: relative; top: 30px">
    <?php 
        foreach ($items as $delta => $item): 
        print render($item); 
        endforeach; 
    ?>
</div>
</div>

<script>
var productsFlow = new ContentFlow('Products', {
                reflectionHeight: 0,
                scaleFactor: 2.3,
                flowSpeedFactor: 0.15,
                onclickActiveItem: function (item) {
                    var activeItem = productsFlow.getActiveItem();
                    var index = productsFlow.items.indexOf(activeItem);
                    $.fancybox.open([
                        <?php 
                            foreach ($items as $delta => $item): 
                                echo "{";   
                                ?????IMAGEPATH????
                                echo "},"; 
                            endforeach; 
                        ?>
                    ], {
                        padding: 0,
                        index: index ? index : 0
                    });
                    return false;
                }
            });
</script> 
```

如何从 foreach 循环中的 $item 中获取图像路径？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:24:19.367

您可以将图像路径添加到视图，而不是添加图像。请按照以下步骤执行此操作。

1) 从右侧的高级选项卡添加关系。关系应该是所调用文件的 fid，例如，如果图像是字段称为 Image Test，则要添加的关系是“内容：图像测试：fid”

2）添加后，您将获得一个名为 File : Path 的字段，这将添加文件的路径。在设置中，您需要选中“显示下载路径而不是文件存储 URI”，以便显示实际 url。

现在，当您来到模板时，您将获得路径而不是带有 img 标签的图像。

希望有帮助。

此致

耻辱

# c# - 在 node.js 服务器和 C# 客户端之间进行通信的最佳方式是什么？

> ID：14397091
> 
> 赞同：1
> 
> 时间：2013-01-18T10:36:40.483
> 
> 标签：c#, javascript, node.js, socket.io

我有一个在 node.js 上运行的服务器，使用 socket.io 和 HTML5 客户端。我还有一个用 C# 编写的更具体的客户端，因为它在 Microsoft 的 PixelSense 上运行。

我的主要想法是使用 C# socket.io 实现，但我没有找到其中一个有效的实现:(

但是，好的一点是 node.js 在像素感设备上运行。我可以使用更质朴的解决方案，例如文件管道。

在您看来，在我的节点服务器和运行在同一台机器（Windows）上的 C# 客户端之间进行通信的最佳方式是什么？

你知道 C# 中 socket.io 的工作实现吗？使用文件的小技巧？使用中间服务器？

性能和反应性是一个加号。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:07:06.910

socket.io 使用的原因是什么？我认为使用 TCP 套接字在这个平台之间进行通信肯定会更好。通过这种方式，您可以轻松添加 SSL 支持，而无需考虑兼容性。

# javascript - 如何对包含两个项目的列表进行排序

> ID：14397096
> 
> 赞同：0
> 
> 时间：2013-01-18T10:37:01.437
> 
> 标签：javascript, html

您好，我想让这两个项目在不使用插件和东西的情况下进行排序，只使用 HTML5 和纯 JavaScript：

```
<ul ondragenter="return dragEnter(event)" ondrop="return dragDrop(event)" 
 ondragover="return dragOver(event)">
  <li draggable="true" ondragstart="return dragStart(event)">Item 1</li>
  <li draggable="true" ondragstart="return dragStart(event)">Item 2</li>
</ul> 
```

好吧，我试过了：

```
function dragStart(ev) {
    ev.dataTransfer.effectAllowed = 'move';
    ev.dataTransfer.setData("Text", ev.target.getAttribute('class'));

    return true;
}

function dragEnter(ev) {
    event.preventDefault();
    return true;
}

function dragOver(ev) {
    return false;
}

function dragDrop(ev) {
    var src = ev.dataTransfer.getData("Text");
    ev.target.appendChild(document.getElementById(src));
    ev.stopPropagation();
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:53:51.277

您想按字母顺序排列吗？这是一个没有任何库的解决方案。

```
var items = document.getElementsByTagName("li");

var values = [];

for(var i = 0; i < items.length; i++) {
    values.push(items[i].innerHTML);
}

values.sort();

for(var i = 0; i < items.length; i++) {
    items[i].innerHTML = values[i];
} 
```

[http://jsfiddle.net/GG9gG/](http://jsfiddle.net/GG9gG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:45:24.083

## jsfiddle：

# [http://jsfiddle.net/pMcML/6/](http://jsfiddle.net/pMcmL/6/)

## HTML：

```
<ul id="sortable">
    <li class="ui-state-default">
        <span>&#x21C5;</span><input type="text"/>Item 1
    </li>
    <li class="ui-state-default">
        <span>&#x21C5;</span><input type="text"/>Item 2
    </li>
    <li class="ui-state-default">
        <span>&#x21C5;</span><input type="text"/>Item 3
    </li>
    <li class="ui-state-default">
        <span>&#x21C5;</span><input type="text"/>Item 4
    </li>
    <li class="ui-state-default">
        <span>&#x21C5;</span><input type="text"/>Item 5
    </li>
    <li class="ui-state-default">
        <span>&#x21C5;</span><input type="text"/>Item 6
    </li>
    <li class="ui-state-default">
        <span>&#x21C5;</span><input type="text"/>Item 7
    </li>
</ul> 
```

## CSS：

### [http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/base/jquery-ui.css](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/base/jquery-ui.css)

# +

```
li {
    margin: 1px;
    width: 130px;
    padding:2px;
    vertical-align:middle;
}

li span {
    color: gray;
    font-size: 1.1em;
    margin-right: 5px;
    margin-left: 5px;
    cursor: pointer;
    height:100%;
}

input[type="text"] {
    width: 32px;
    margin-right: 5px;
    border: 1px solid lightgay;
    color: blue;
    text-align: center;
} 
```

## Javascript：

```
sort_ul = $('#sortable');                  // * sortable <ul>
itemsCount = $('#sortable li').length;     // * total number of items
function updateIndexes() {                 // * function to update
    $('#sortable li input').each(          //   items numbering
      function(i) {
        $(this).val(i + 1);
    });
}
updateIndexes();                           // * start by update items numbering
sort_ul.sortable({handle: 'span',          // * apply 'sortable' to <ul>
                  stop: function(event, ui){
                          updateIndexes(); // * when sorting is completed,
                        }                  //   update items numbering
});
$('#sortable li input').keyup(             // * watch for keyup on inputs
  function(event) {
    if (event.keyCode == '13') {           // * react only to ENTER press
        event.preventDefault();            // * stop the event here
        position = parseInt($(this).val());// * get user 'new position'
        li = $(this).parent();             // * store current <li> to move
        if (position >= 1                  // * proceed only if
            && position <= itemsCount){    //   1<=position<=number of items
          li.effect('drop', function(){    // * hide <li> with 'drop' effect
            li.detach();                   // * detach <li> from DOM
            if (position == itemsCount)
              sort_ul.append(li);          // * if pos=last: append
            else                           //   else: insert before position-1
              li.insertBefore($('#sortable li:eq('+(position - 1)+')'));
            updateIndexes();               // * update items numbering
            li.effect('slide');            // * apply 'slide' effect when in
          });                              //   new position
        }else{ li.effect('highlight'); }   // * if invalid position: highlight
}}}); 
```

[参考链接](https://stackoverflow.com/questions/5685583/sortable-list-ability-to-re-order-each-item-by-inputting-rank)

# asp.net-mvc - MVC3 如何使用注释定义自定义错误消息？

> ID：14397098
> 
> 赞同：1
> 
> 时间：2013-01-18T10:37:20.250
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-validation

我有一个 DateTime 字段（可以接受多种日期时间格式，因此创建 Regex 模式很痛苦）

当我在现场输入“Aaaaaa”之类的内容时，我收到错误消息：

```
The value 'Aaaaa' is not valid for OwnerBirthDate 
```

模型外观：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd.MM.yyyy}")]
[Required(ErrorMessage = "*")]
public DateTime? OwnerBirthDate { get; set; } 
```

看法：

```
@Html.TextBoxFor(x => x.OwnerBirthDate) 
```

如何为这个特定字段定义自定义错误消息？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:46:33.030

如果您想要与属性中预定义的消息不同的消息，则可以使用 ValidationMessageFor 应用自定义消息

```
@Html.ValidationMessageFor(m => m.OwnerBirthDate, "custom error message") 
```

# android - 从应用程序首选项而不是 AndroidManifest.xml 读取信息

> ID：14397107
> 
> 赞同：1
> 
> 时间：2013-01-18T10:37:54.763
> 
> 标签：android, dropbox

我是 Android 开发新手，我正在使用 Eclipse 开发 Android 应用程序。我提供了在 Dropbox 上同步数据库的功能。为此，Dropbox 给了我一个用于身份验证的键值。此密钥必须插入 AndroidManifest.xml

```
<activity
android:name="com.dropbox.client2.android.AuthActivity"
android:configChanges="orientation|keyboard"
android:launchMode="singleTask" >
<intent-filter>
    <!-- Change this to be db- followed by your app key -->
    <data android:scheme="db-xxxxxxxxxx" />

    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

但是使用这种逻辑，最终用户将无法更改此值以同步他的保管箱帐户上的数据库，而不是我的。我已经制作了一个首选项屏幕来将密钥存储在应用程序首选项中，但是我没有找到从 Android Manifest 读取值的代码。我想它就在这里，但我是新手，我不明白如何编辑我的代码：

```
 public void startAuthentication(Context context) {
    AppKeyPair appKeyPair = getAppKeyPair();

    // Check if the app has set up its manifest properly.
    Intent testIntent = new Intent(Intent.ACTION_VIEW);
    String scheme = "db-" + appKeyPair.key;
    String uri = scheme + "://" + AuthActivity.AUTH_VERSION + "/test";
    testIntent.setData(Uri.parse(uri));
    PackageManager pm = context.getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(testIntent, 0);

    if (0 == activities.size()) {
        throw new IllegalStateException("URI scheme in your app's " +
                "manifest is not set up correctly. You should have a " +
                "com.dropbox.client2.android.AuthActivity with the " +
                "scheme: " + scheme);
    } else if (activities.size() > 1) {
        // Check to make sure there's no other app with this scheme.
        AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setTitle("Security alert");
        builder.setMessage("Another app on your phone may be trying to " +
                "pose as the app you are currently using. The malicious " +
                "app cannot access your account, but linking to Dropbox " +
                "has been disabled as a precaution. Please contact " +
                "support@dropbox.com.");
        builder.setPositiveButton("OK", new OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });
        builder.show();
        return;
    } else {
        // Just one activity registered for the URI scheme. Now make sure
        // it's within the same package so when we return from web auth
        // we're going back to this app and not some other app.
        String authPackage = activities.get(0).activityInfo.packageName;
        if (!context.getPackageName().equals(authPackage)) {
            throw new IllegalStateException("There must be an " +
                    "AuthActivity within your app's package registered " +
                    "for your URI scheme (" + scheme + "). However, it " +
                    "appears that an activity in a different package is " +
                    "registered for that scheme instead. If you have " +
                    "multiple apps that all want to use the same access" +
                    "token pair, designate one of them to do " +
                    "authentication and have the other apps launch it " +
                    "and then retrieve the token pair from it.");
        }
    }

    // Start Dropbox auth activity.
    Intent intent = new Intent(context, AuthActivity.class);
    intent.putExtra(AuthActivity.EXTRA_INTERNAL_CONSUMER_KEY,
            appKeyPair.key);
    intent.putExtra(AuthActivity.EXTRA_INTERNAL_CONSUMER_SECRET,
            appKeyPair.secret);
    if (!(context instanceof Activity)) {
        // If starting the intent outside of an Activity, must include
        // this. See startActivity(). Otherwise, we prefer to stay in
        // the same task.
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    }
    context.startActivity(intent); 
```

你能帮助我吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:52:18.410

我认为您可能误解了该密钥的用途。它不用于选择与哪个帐户同步文件。

您要更改的密钥是 APP API 密钥。每个用户都不需要唯一的密钥，除非您的目标是已经拥有自己的 API 密钥的开发人员。这用于识别您的应用并将其关闭（除其他外），如果它给 Dropbox 造成问题。

您尝试编辑的此密钥的特定实例是在用户使用其个人帐户进行身份验证后将控制权返回给您的应用程序。这需要与您在调用 AppKeyPair 时用于身份验证的密钥保持同步 appKeys = new AppKeyPair(APP_KEY, APP_SECRET);

您将无法在运行时修改该意图过滤器中的数据标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:46:03.573

对象 appKeyPair.key 包含您想要的密钥。我不知道是什么`AppKeyPair appKeyPair = getAppKeyPair();`，但我认为您可以将其删除并从共享首选项中放置一个简单的字符串，而不是调用`appKeyPair.key`.

# javascript - 根据下拉列表更新 EditorFor：有没有办法在 MVC4 的 HTML 帮助器中使用 JavaScript 变量？

> ID：14397108
> 
> 赞同：0
> 
> 时间：2013-01-18T10:37:56.620
> 
> 标签：javascript, asp.net-mvc, razor, asp.net-mvc-4

我的视图中有一个模型属性（货币）的下拉列表，我已将 JavaScript onchange 函数关联到该下拉列表。

此类函数的目标是根据模型中的 Dictionary 属性（将 Currencies 映射到它们的 Rate）更新一些其他字段的（Rate）值。

```
<td>

    @Html.DropDownListFor(model => model.Currency, new SelectList(ViewBag.CurrencyList, "Code", "Code"), new {onchange="update(this)"})
    @Html.ValidationMessageFor(model => model.Currency)
    <script type="text/javascript">

        function update(elem) {
           // alert("Currency changed!")
           document.getElementById("@Html.IdFor(model => model.Rate)").value = '@Model.Currencies[<I_WISH_I_COULD_PUT_A_JS_VARIABLE_IN_HERE>]' 
        }
    </script>

</td> 
```

我希望“I_WISH_I_COULD_PUT_A_JS_VARIABLE_IN_HERE”为 elem.value，但由于 JS 变量被解释为文字，因此出现语法错误。我似乎无法调用其中包含 Javascript 值的 HTML 助手。

我的目标是根据组合框中选择的值更新 EditorFor 字段。但可能我的方法有问题？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:54:16.443

你在想这个错误的方式。HTML、CSS 和 JavaScript 是 ASP.NET MVC Web 应用程序项目的输出。JavaScript 不能以您在上面尝试的方式影响您的 Web 应用程序。您的 MVC Web 应用程序和 JavaScript 之间没有实时连接，它们以某种方式神奇地相互响应。

为了让它工作，我会将值放在`@Modal.Currencies`某种 JavaScript 数组中。然后使用该数组找到更新元素所需的值（使用 JavaScript 变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:29:15.363

正如我在评论中所说，我的方法根本没有意义，因为我将服务器端代码与客户端代码混合在一起。

我在函数 update(elem) 中使用了 ajax 来检索正确的值并更新对应的字段：

```
$.ajax({
                type: "GET",
                url: "Currency?code=" + elem.value,
                success: function (msg) {
                    document.getElementById(RateId).value = msg;
                }
}); 
```

我希望这可能对将来的某人有所帮助。干杯。

# compiler-errors - go 和 gwan 未使用的变量

> ID：14397109
> 
> 赞同：0
> 
> 时间：2013-01-18T10:37:58.447
> 
> 标签：compiler-errors, terminal, go, g-wan

Go 编译器抱怨未使用的变量和导入。因此，如果检测到任何未使用的 var/script，则 go 脚本无法在 gwan 中运行。

如果正在运行，gwan 在这种情况下会提供 404 错误......或者根本无法启动

有没有办法避免这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T10:43:10.610

没有真正简单的方法存在。没有什么比编译器标志更能关闭这种行为了。我想最好传递编译器首先可以吞下的代码。

编辑：FAQ 中的 C/P：[我可以停止这些关于我未使用的变量/导入的投诉吗？](http://golang.org/doc/faq#unused_variables_and_imports)

> 未使用变量的存在可能表明存在错误，而未使用的导入只会减慢编译速度。在你的代码树中积累足够多的未使用的导入，事情会变得非常缓慢。由于这些原因，Go 两者都不允许。
> 
> 在开发代码时，通常会临时创建这些情况，并且在程序编译之前必须将它们编辑出来可能会很烦人。
> 
> 有些人要求提供编译器选项来关闭这些检查或至少将它们减少为警告。但是，没有添加这样的选项，因为编译器选项不应该影响语言的语义，并且因为 Go 编译器不报告警告，只报告阻止编译的错误。
> 
> 没有警告有两个原因。首先，如果值得抱怨，那就值得在代码中修复。（如果它不值得修复，那就不值得一提。）其次，让编译器生成警告鼓励实现警告可能使编译嘈杂的弱案例，掩盖应该修复的真正错误。
> 
> 不过，解决这种情况很容易。在开发过程中，使用空白标识符让未使用的东西保持不变。

```
import "unused"

// This declaration marks the import as used by referencing an
// item from the package.
var _ = unused.Item  // TODO: Delete before committing!

func main() {
        debugData := debug.Profile()
        _ = debugData // Used only during debugging.
        ....
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T15:51:57.230

这是一个重复的 Go 语言问题，请参阅：

[Go：“已声明但未使用的变量”编译错误](https://stackoverflow.com/questions/1718717/go-variable-declared-and-not-used-compilation-error?rq=1)

Go 编译器将`"unused variable"`其视为致命错误。这是所有其他语言都将其视为警告的内容，因此 G-WAN 会停止以让您修复脚本错误。

G-WAN 在这里无能为力：您必须按预期使用 Go。

# iphone - 如何使 ios 设置包（PreferenceLoader）中的特定单元格变灰？

> ID：14397120
> 
> 赞同：2
> 
> 时间：2013-01-18T10:38:25.877
> 
> 标签：iphone, ios, objective-c, cydia, theos

最近我一直在使用一个优秀的框架（*令人敬畏的 Dustin Howett 的 Theos*）为 Cydia 开发一个调整，我想知道是否有任何方法可以使调整的首选项包中的单元格变灰。是否需要私有 API 并不重要，因为这是针对**越狱环境**的。非常感谢任何帮助、链接或参考。我正在使用私有框架`(Preferences.framework)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:55:55.777

我没有越狱的手机，所以我无法对此进行测试，但是如果您查看[iphonedevwiki 上的 Preferences 文档](http://iphonedevwiki.net/index.php/Preferences_specifier_plist)，您会看到有一个标志会使偏好项 ( `enabled`) 变灰。因此，您可能会在首选项 plist 文件中使用如下代码块：

```
 <dict>
        <key>cell</key>
        <string>PSSwitchCell</string>
        <key>default</key>
        <true/>
        <key>defaults</key>
        <string>com.mycompany.myapp</string>
        <key>key</key>
        <string>wifi_location</string>
        <key>label</key>
        <string>WiFi Location</string>
        <key>enabled</key>                 
        <false/>                           <!-- gray out this item -->
     </dict> 
```

如果您查看[首选项加载器文档](http://iphonedevwiki.net/index.php/PreferenceLoader#PreferenceBundle_Approach)，您会发现您还可以将**代码**注入 Preferences.app，这可能允许您*动态*设置此标志（如果您正在*调整*不属于您的应用程序，可能需要）。

[在此处查看更多信息](http://www.iphonedevwiki.net/index.php?title=Preferences_specifier_plist)

稍后我将尝试对此进行测试，并希望更新此答案。

# oop - MATLAB OOP：不同子类的对象之间的通信

> ID：14397121
> 
> 赞同：0
> 
> 时间：2013-01-18T10:38:33.337
> 
> 标签：oop, class, matlab, communication

我正处于一个更大项目的开始，我必须重写现有的 MATLAB 脚本代码。我被要求使用 MATLAB 的面向对象编程支持来获得更灵活和健壮的程序。我到了一个点，我想知道如何让不同子类的对象进行通信或更好地进行通信：什么是最好的或最优雅/最高效/用户友好的方式来做到这一点。

示例：
超类 A（句柄类）：

```
classdef A < handle
  properties
    myvar
  end

  methods (Access = protected)
    function calc_myvar(obj)
      %calculate myvar with some code
      obj.myvar=...;
    end
  end
end 
```

B类：

```
classdef B < A
  properties
    subclassvar
  end

  methods (Access = protected)
    function calc_subclassvar(obj)
      %calculate subclassvar with some code
      %needs myvar of an object of class C
      %C.myvar
      obj.subclassvar=...;
    end
  end
end 
```

C子类：

```
classdef C < A
  properties
    %some other properties
  end

  methods
    %some other methods
  end
end 
```

因此，子类 B 需要在 A 中定义的子类 C 的变量。目前我总是将 C 的对象作为附加输入参数传递给函数。另外我不知道 C.myvar 是否已经有价值。
当前实施：

```
function calc_subclassvar(obj,C)
  if isempty(C.myvar)
    C.calc_myvar;
  end
  obj.subclassvar = do_something_with_C.myvar;
end 
```

还有其他更好的方法吗？我读过重载`get`函数，所以我不必每次都检查变量是否存在？我阅读了有关事件和侦听器的信息，但无法使其令人满意地工作。例如，如果我想向 C 添加一个侦听器，它必须知道事件是从 A 的哪个特定对象发送的。或者有没有办法让 C 只监听 A 的任何对象？
也许你知道另一种方式。这有点令人困惑。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:35:32.523

我认为您将问题复杂化了一点。要么，要么我不完全理解你的要求。

首先，您没有使用任何构造函数。我通常会使用它们在实例时传递对给定类中所需对象的引用。其次，您写道，当您在 B 中需要它时，您不知道 C 是否已被初始化。我认为这是您的程序缺乏结构，所以如果您的重组任务的一部分是使程序更健壮，这将是一个很好的起点。除非您有充分的理由反对它，否则您应该能够分辨出不同对象的初始化顺序。使用上述构造函数会迫使您考虑这一点，因为在您的示例中，如果没有 B 的实例，您就不能实例化 C。

下面是我的 B 和 C 版本。我排除了 A，因为需要继承并不真正关心这个问题。

C类：

```
classdef C < handle
   properties
       some_const = pi;

   end

   methods
      %some other methods
   end
end 
```

B类：

```
classdef B < handle
   properties
      C_handle
   end

   methods (Access = public)
       function obj = B(C_handle)          
           obj.C_handle = C_handle;
       end
       function disp_c_var(obj)
           disp(obj.C_handle.some_const)
       end
   end
end 
```

类的使用：

```
c_inst = C();
b_inst = B(c_inst);
b_inst.disp_c_var(); 
```

现在，b_inst 的所有后续使用都已经引用了 c_inst，因此不必再次传递它。

# haskell - 翻转功能如何工作？

> ID：14397128
> 
> 赞同：40
> 
> 时间：2013-01-18T10:38:45.860
> 
> 标签：haskell

Haskell新手在这里。我正在通过 Learn you a haskell，遇到了翻转函数的定义。

```
flip' :: (a -> b -> c) -> (b -> a -> c)  
flip' f = g  
    where g x y = f y x 
```

我不明白的是，x 和 y 是从哪里来的？我的意思是，签名告诉我这`flip'`是一个函数，它接受一个函数（带有两个参数），并返回一个函数（同样，带有两个参数）。

如果我理解这一点，当我编写一个类似的函数时

```
foo :: (a -> b) -> a -> b
foo f x = f x   -- applies the function f on x 
```

但是，在这种情况下，我明确地传递了参数 [ ie `x`]，因此我可以在函数体中访问它。那么函数怎么`flip'`能访问参数x和y呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-18T11:22:23.890

[Prelude](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Prelude.html)位于 hackage.haskell.org 的基本[包](http://hackage.haskell.org/package/base)中，包含在每个 Haskell 文件中的隐式导入中，即找到[翻转](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Prelude.html#v:flip)函数的位置。在右侧，您可以单击“源”并查看[翻转的源代码](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/src/GHC-Base.html#flip)。

```
flip         :: (a -> b -> c) -> b -> a -> c
flip f x y   =  f y x 
```

where 子句允许本地定义，`x=10`或`y="bla"`. 您还可以使用与顶层相同的语法在本地定义函数。`add x y = x + y`

在下面的等效公式中，我进行了替换`g = f y x`

```
flip         :: (a -> b -> c) -> b -> a -> c
flip f x y   =  g
  where
    g = f y x 
```

现在 g 没有参数。但是如果我们也定义了 g`g a b = f b a`那么我们将会有：

```
flip         :: (a -> b -> c) -> b -> a -> c
flip f x y   =  g x y
  where
    g a b = f b a 
```

不，我们可以做一些代数抵消（如果你把它想象成数学课上的代数，你会很安全）。专注于：

```
flip f x y   =  g x y 
```

取消每边的 y：

```
flip f x   =  g x 
```

现在取消 x：

```
flip f   =  g 
```

现在把它放回完整的表达式中：

```
flip     :: (a -> b -> c) -> b -> a -> c
flip f   =  g
  where
    g a b = f b a 
```

作为最后的修饰步骤，我们可以替换`a`to`x`和`b`to`y`以将函数恢复为参数名称：

```
flip     :: (a -> b -> c) -> b -> a -> c
flip f   =  g
  where
    g x y = f y x 
```

正如你所看到的，这个翻转的定义有点绕，我们在前奏中开始的内容很简单，是我更喜欢的定义。希望这有助于解释如何`where`工作以及如何对 Haskell 代码进行一些代数操作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-18T10:52:36.830

`flip'`不访问`x`and `y`。它接收一个参数`f`，并计算为表达式`g`。没有`x`或`y`在视线范围内。

然而，`g`它本身就是一个函数，在 的`where`子句中用一个辅助方程定义`flip'`。

您可以`g x y = f y x`准确地阅读它，就好像它是一个顶级方程一样`flip'`。`g`两个参数的函数也是如此，`x`并且`y`。它`g`可以访问`x`and `y`，而不是`flip'`。这些参数的值在应用之前不存在`g`，直到 after`flip'`返回函数`g`（如果有的话）。

在of 子句中`g`定义的特殊之处在于它可以访问 的参数，这就是如何根据 来定义的。`where``flip'``flip'``g``f`

因此，当`flip'`被调用时，它会收到一个函数`f`。对于 的每次特定调用`flip'`，它都会构造一个新函数`g`。`g`将收到两个参数，`x`并且`y`，当它被调用时，但这还没有发生。`flip'`然后返回`g`结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:50:23.897

让我们找到 的类型`g`。

我们知道翻转类型：`(a -> b -> c) -> (b -> a -> c)`

因此我们可以推断`f`类型：`(a -> b -> c)`

我们有这个定义`g`

```
g x y = f y x 
```

从右边我们推断出`y :: a`和`x :: b`。

因此`g :: b -> a -> c`

请注意，可以在没有“where”子句的情况下重写定义。

```
flip' f = g where g x y = f y x
-> flip' f a b = g a b where g a b = f b a
-> flip' f a b = f b a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-01T04:50:28.923

简而言之，您还可以在*where*块中定义函数。所以变量`x`和`y`只是 的形式参数`g`，这就是为什么您可以在 中访问它的原因`g x y = f y x`：`g x y`定义形式参数`x`和`y`，`f y x`是做什么的定义`g`。最后，该定义从`flip f = g`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-05T07:52:55.037

一个简单的例子来理解和说明，在你的 ghci 上做：

```
Prelude> sub x y = x - y
Prelude> sub 3 1
2
Prelude> flip sub 3 1
-2 
```

# sencha-touch-2 - 如何使用 sencha touch 获取表单值并在数据库中插入该值

> ID：14397130
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:38:46.503
> 
> 标签：sencha-touch-2

我想将登录表单详细信息存储在数据库中。为此，我编写了以下代码。

在我看来代码

```
Ext.define('SampleForm.view.LoginForm', {
    extend: 'Ext.form.Panel',
    //id:'loginform',
    requires:[
            'Ext.field.Email',
            'Ext.field.Password'
    ],
    config: {
        fullscreen: true,
        layout:{
            type:'vbox'
        },
        items: [
            {
                xtype: 'fieldset',
                title: 'Login',
        id: 'loginform',
                items: [
                    {
                        xtype:'textfield',
                        label:'Name',
                        name:'name'
                    },
                    {
                        xtype: 'emailfield',
                        name: 'email',
                        label: 'Email'
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        label: 'Password'
                    }
                ]
            },
            {
                xtype: 'button',
                width: '30%',
                text: 'Login',
                ui: 'confirm',
        action:'btnSubmitLogin'
            }
        ]
    }
}); 
```

在控制器中

```
Ext.define("SampleForm.controller.LoginForm", {
    extend: "Ext.app.Controller",

    config: {
        view: 'SampleForm.view.LoginForm',
        refs: [
        {
            loginForm: '#loginform',
            Selector: '#loginform'
        }
        ],
        control: {
            'button[action=btnSubmitLogin]': {
                tap: "onSubmitLogin"
            }
        }
    },
    onSubmitLogin: function () {

    alert('Form Submitted successfully');
    console.log("test");
    var values = this.getloginform();
    /* Ext.Ajax.request({
                      url: 'http://www.servername.com/login.php',
                      params: values,

                      success: function(response){
                          var text = response.responseText;
                          Ext.Msg.alert('Success', text);
                     }

                     failure : function(response) {
                           Ext.Msg.alert('Error','Error while submitting the form');
                           console.log(response.responseText);
                     }
              });*/
     form.submit({
           url:"http://localhost/sencha2011/form/login.php"
     });
    },
    launch: function () {
        this.callParent();
        console.log("LoginForm launch");
    },
    init: function () {
        this.callParent();
        console.log("LoginForm init");
    }
}); 
```

当我单击提交按钮时，出现警报消息，但值未存储在数据库中。在控制台中我收到此错误，未捕获类型错误：对象 [对象对象] 没有方法“getloginform”。

任何人都可以帮助我如何在数据库中插入值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:28:03.593

Javascript is **case-sensitive**. From [Sencha Touch docs:](http://docs.sencha.com/touch/2-0/#!/guide/controllers)

> These getter functions are generated based on the refs you define and always follow the same format - 'get' followed by the capitalized ref name.

To use the getter method for ref, `loginForm`, and to get the form values use:

```
var values = this.getLoginForm().getValues(); 
```

# sql - 选择组内的所有行，其中一列具有一个特定值，另一列在下一行具有另一个特定值

> ID：14397131
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:38:46.950
> 
> 标签：sql, select, group-by, db2, grouping

我是 SQL 新手，所以我不确定哪种方法最适合此类任务：

我有一个表，其中行组都与同一项目相关，其名称出现在第一列。其他详细信息显示在其他列中。我正在尝试根据第一列中的相同值来检索每个组的所有行，其中每次某个值出现在一个列中时，另一个值出现在下一行的不同列中。

```
 | Fruit  | Value1| Value2|
 --------------------------
 | APPLE  |  A    |       |
 | APPLE  |       | E     |
 | PEAR   |  A    |       |
 | PEAR   |       | X     |
 | FIG    |       | X     |
 | FIG    |  A    |       |
 | CHERRY |  A    |       |
 | CHERRY |       | X     |
 | CHERRY |  A    |       |
 | CHERRY |       | X     |
 | GRAPE  |       | X     |
 | GRAPE  |       | T     |
 | ORANGE |  A    |       |
 | ORANGE |       | X     |
 | ORANGE |       | Y     |
 | ORANGE |       | Z     |
 | PEACH  |  B    |       |
 | PEACH  |  A    |       |
 | PEACH  |       | X     |
 | MANGO  |  B    |       |
 | MANGO  |  C    |       |
 | MANGO  |  D    |       | 
```

从上表中，我想为给定的 Fruit 选择所有行，其中 Value1 在一行上是 A，Value2 在下一行是 X，在该 Fruit 的任何行上的 Value1 中都没有出现 A。

从上表中，查询应提供如下所示的结果：

```
 | Fruit  | Value1| Value2|
 --------------------------
 | PEAR   |  A    |       |
 | PEAR   |       | X     |
 | CHERRY |  A    |       |
 | CHERRY |       | X     |
 | CHERRY |  A    |       |
 | CHERRY |       | X     |
 | ORANGE |  A    |       |
 | ORANGE |       | X     |
 | ORANGE |       | Y     |
 | ORANGE |       | Z     | 
```

*   APPLE 被排除在外，因为在 Value1=A，Value2!=X 的行之后。
*   由于 Value2=X 出现在 Value1=A 之前的行上，而不是之后的行上，因此排除了 FIG。
*   GRAPE 被排除在外，因为没有 Value1=A 的行。
*   PEACH 被排除在外，因为至少有一行 Value1!=A。
*   MANGO 被排除在外，因为没有 Value1=A 的行，并且没有 Value2=X 的行。

对我来说似乎有点棘手的部分是在行组级别执行多项检查，但仍返回匹配组的所有行。

提前感谢您的提示和建议。如果您需要我澄清这个问题，请告诉我。数据库是 z/OS 上的 DB2 V10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:30:00.707

除了需要一个订单列（id 或其他）的图（在您的示例中）之外，下面的查询可以解决您的问题：

```
select * from fruits 
where fruit not in (select fruit from fruits where value1 is not null and value1 <> '' and value1 <> 'A')
and exists (select fruit from fruits f2 where f2.fruit = fruits.fruit and value2 = 'X') 
```

# java - DAO 和连接

> ID：14397134
> 
> 赞同：3
> 
> 时间：2013-01-18T10:39:26.290
> 
> 标签：java, design-patterns, dao

我应该在哪里打开和关闭与存储库的连接？在文章“[不要重复 DAO](http://www.ibm.com/developerworks/java/library/j-genericdao/index.html) ”中写道：

> DAO 不负责处理事务、会话或连接。这些在 DAO 外部处理以实现灵活性。

但是有些人建议我将`@Resource DataSource`对象注入 DAO 类并处理 DAO 方法中的所有连接......即每个 CRUD 操作都应该打开和关闭与存储库的连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:48:32.390

接受文章中的建议。

您最好希望您的应用程序容器管理资源和连接池。如果您的连接配置了事务管理，那么容器将能够管理您的事务（因此无需打开连接并进行提交）。

如果您自己管理连接和事务，请先打开连接，启用事务并将打开的连接传递给 DAO，提交事务，然后关闭连接（在 DAO 之外）。

完成所有 DAO 的服务后，关闭连接。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:42:32.827

我个人使用 Spring 来管理数据源。

在应用程序上下文 xml 中配置数据源 bean。将其自动连接到 DAO，然后使用 Spring 处理带有`@Transactional`DAO 类上的注释的事务。

您还需要`<tx:annotation-driven/>`在您的应用程序上下文中。

如果您使用的是 Hibernate，您可以通过`SessionFactory`在应用程序上下文中配置来执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:50:53.527

我同意您可以使用 spring 来管理事务，但同时请记住，管理事务不是 DAO 的职责。它们应该在负责管理业务逻辑的服务层中处理。

# javascript - 如何打印通过 ajax 请求获取的 PDF？

> ID：14397137
> 
> 赞同：1
> 
> 时间：2013-01-18T10:39:42.913
> 
> 标签：javascript

我有一个表单，一旦提交，PHP 会生成一个 PDF 文件并将其发送给客户端。到目前为止一切正常。我遇到的问题是我需要在包含收到的 pdf 的窗口上触发 window.print() 。有没有办法让接收到的 pdf 文件出现打印向导？

这是我的代码

```
//The #options is a form that once submitted is sends the requested PDF to the browser
$('#options').on('submit', function(e){

    if($(this).find('[name="action"]').val() == 'print')
    {
        var url = $(this).attr('action') || document.URL;
        e.preventDefault();
        $.post(url, $(this).serializeArray(),function(pdf){
            // Open the printing wizard for the requested document
        });
    }
    else
    {
        // The PDF is displayed normally
        return true;
    }

}); 
```

我什至不确定我想做的事情是否可行。例如，是否可以在新选项卡中打开 PDF 并在`window.print()`那里调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:01:27.397

一种简单的方法是将 PDF 文件放入新的 iFrame 中。`window.print();`然后您可以使用函数打印 iframe 内的完整内容。

```
<html>
<head>
<title>Print Test Page</title>
<script>
function printPDF() {
    window.frames["print_frame"].window.focus();
    window.frames["print_frame"].window.print();
}
</script>
</head>
<body>
Some content here
<iframe name=print_frame width=0 height=0 frameborder=0 src=about:blank>
  Your PDF is loaded here
</iframe>
Some more content here
</body>
</html> 
```

现在`window.print();`当你想打印你的 pdf 时调用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:34:06.233

要在新窗口中打开 PDF，您实际上需要生成一个 GET 请求（以便可以通过 URL 打开该窗口） - 一种简单的方法是编写服务器端代码以通过查询字符串接受输入参数。更好的方法是使用 POST 请求（正如您当前所做的那样）在服务器端生成 PDF 并将其缓存在临时位置，然后将一些令牌/票证（例如，它可以像临时文件名一样简单）返回给浏览器. 此令牌将在 GET 请求中用于获取 PDF 文件 - GET 请求将发送到服务器，该服务器将简单地从临时位置读取文件并将其作为内联（（即 header `content-disposition: inline;`）返回。然后您可以尝试`window.print()`打印它。类似方式可以与 iframe 一起使用（with `contentWindow.print()`）。

但是，您可能会发现这些解决方案可能不起作用 - 例如，没有 PDF 插件来显示 PDF 内联（或用户选择始终在外部打开文件）。或者它可能无法跨浏览器工作。因此，另一种（和 IMO 更好的）方法是将 java-script 嵌入 PDF 中，它会在文件打开后立即指示打印。
例如，请参阅[此 PHP 代码示例](http://www.fpdf.org/en/script/script36.php)，该示例将在 PDF 生成中嵌入 java 脚本以进行自动打印 - 该示例使用 FPDF 生成 PDF。

# c# - 读取使用 Graphics 对象设置的像素

> ID：14397141
> 
> 赞同：1
> 
> 时间：2013-01-18T10:39:49.973
> 
> 标签：c#

我知道几种读取位图像素或从图像中获取图形对象的方法，但我想了解的是如何知道用户通过图形对象绘制了哪些像素。示例：用户使用以下内容绘制一条线（但它可以是任何可能的形状）：

```
surface.DrawLine(aPen, X0, Y0, X1, Y1); 
```

我需要知道用户设置了哪些像素来执行一些处理。对于使用数学的简单形状，这可以很容易地完成（即 X = X0 + (X1-X0)*t) ，但在我看来可能效率不高（特别是对于复杂形状）。我想要的解决方案是读取位图以查找已设置的像素，但我不知道从 Graphics 对象获取位图图像（或任何相关数据结构）的方法。因为这是任何允许用户绘制的程序的明显需求，所以我肯定会遗漏一些要点。有人对此有提示吗？

PS我在Windows窗体中的8Bpp索引位图上使用Graphics对象，我需要所有像素坐标，可能还有像素值（我猜它们可以从像素坐标推导出来）

## 建议的解决方案

在这篇文章中的贡献之后，我能找出的最佳解决方案与此类似（作为 sourceImage，我想在其上绘制图像，并在其中呈现 sourceImage 的图片框控件）：

```
 private void DrawOverlay()
        {
            using (var tmpImg = new Bitmap (SourceImage.Width,SourceImage.Height, PixelFormat .Format32bppArgb))
            {
                var g = Graphics.FromImage(tmpImg);
                g.DrawLine(pen1, Startx, Starty, Endx, Endy);
                tmpImg.MakeTransparent(Color.FromArgb(0, 0, 0));
                surface.DrawImage(tmpImg, new Point (0, 0));      

// process here the tmpImg  pixels drawn by the user 

            }                 
        } 
```

如果有人有更好的答案，请告诉我们；否则，我将关闭回答上述我自己问题的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:48:41.187

据我所知，在收到反馈后问题中提出的解决方案草案似乎是一种可以轻松访问绘制像素的可接受解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:00:21.887

我建议在创建 Graphics 上下文之前制作图像的副本。使用 Graphics 上下文处理完所有绘画后，您可以使用 XOR 将图像与第一个（备份）图像进行比较（参见[此示例](https://stackoverflow.com/questions/2040174/how-images-can-be-xor-using-cs-builtin-methods)）。结果仅包含那些已更改的像素。

```
backupImage XOR drawnImage = changes 
```

您还可以使用由[AForge.NET](http://www.aforgenet.com/)包装的 OpenCV及其[差异](http://www.aforgenet.com/framework/docs/html/673023f7-799a-2ef6-7933-31ef09974dde.htm)和[减法](http://www.aforgenet.com/framework/docs/html/2d04f587-3272-2ad5-f8bc-54ff407d41f2.htm)类。他们完全按照您的意愿行事。

# ios - iOS：UIScroll 视图中的触摸事件

> ID：14397145
> 
> 赞同：1
> 
> 时间：2013-01-18T10:40:01.567
> 
> 标签：ios, objective-c, scrollview

我已经尝试了很多东西来接触内部，`UIScrollView`但我不知道该怎么做。

实际上，我想触摸 a`UIScrollView`并获取子视图的位置（我已经触摸过）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:05:28.313

您可以使用手势识别器来做到这一点。用于检测单击位置使用`UITapGestureRecognizer`

```
UITapGestureRecognizer *tapRecognizer = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapAction:)] autorelease];
[myScrollView addGestureRecognizer:tapRecognizer];

- (void)tapAction:(UITapGestureRecognizer*)sender{ 
    CGPoint tapPoint = [sender locationInView:myScrollView];
    CGPoint tapPointInView = [myScrollView convertPoint:tapPoint toView:self.view];
} 
```

要将其转换`tapPoint`为 self.view 您可以使用[`convertPoint:toView:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/convertPoint%3atoView%3a)UIView 类中的方法

# php - 本地主机的 PHP 电子邮件问题

> ID：14397152
> 
> 赞同：0
> 
> 时间：2013-01-18T10:40:11.800
> 
> 标签：php

我正在尝试在本地使用`PHP mail`功能发送电子邮件，但未发送电子邮件。它还显示如下警告消息。

```
Warning: mail() [function.mail]: Failed to connect to mailserver at "localhost" 
  port 25, verify your "SMTP" and "smtp_port" setting in php.ini 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:48:35.947

基本上你不能从你的本地主机发送邮件，如果你没有配置 SMTP。因此，对于配置，您可以按以下方式进行：

如果你打开 php.ini 文件，你会发现这两行：

```
smtp_server
smtp_port 
```

为您的主机添加服务器和端口号（您可能需要联系他们以获取详细信息）

因此，您需要添加它们才能从需要身份验证的服务器发送邮件。所以一个例子可能是：

```
smtp_server = mail.example.com or any IP address(where SMTP is configured)
smtp_port = 25 
```

如果需要，则添加以下不存在的两行：

```
auth_username = username
auth_password = pw 
```

认为它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:41:25.707

错误消息是不言自明的。该`mail()`功能无法连接到您的邮件服务器。检查您的邮件服务器设置。

尝试 telnet 到 25 端口，看看是否可以连接到邮件服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:41:55.780

听起来你的机器上没有运行 SMTP 服务器，看看你是否可以 telnet 到本地机器上的 25 端口，看看它是否正在运行。或者您的邮件服务器可能配置为侦听另一个端口，而 PHP 配置为尝试默认端口 25。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:44:50.923

看起来您的服务器没有运行 smtp 邮件服务器。您可以使用这些函数来设置不同的 smtp 服务器：

```
ini_set('SMTP', "server.com");
ini_set('smtp_port', "25");
ini_set('sendmail_from', "email@domain.com"); 
```

您可能没有在本地主机上运行 SMTP 服务器。

如果您只需要一个用于开发目的的 SMTP 服务器，并且您正在运行 Windows，请安装 smtp4dev，可以在此处找到：[http ://smtp4dev.codeplex.com/](http://smtp4dev.codeplex.com/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T10:44:56.783

改用[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)。它对所有邮寄问题都有很好的支持。

在这里你可以找到几十个[例子](https://code.google.com/a/apache-extras.org/p/phpmailer/wiki/ExamplesPage)

# objective-c - 使用文本字段屏蔽日期和时间

> ID：14397156
> 
> 赞同：0
> 
> 时间：2013-01-18T10:40:51.600
> 
> 标签：objective-c, ipad, validation, uitextfield

大家好，

我正在做一个项目，当我们单击文本字段时，要求键盘不应弹出，因为我们正在为特定文本字段制作数字键盘，并且我们已经成功地做到了这一点。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
            if (textField == dateFld) {

                UIView* dummyView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1, 1)];
               textField.inputView = dummyView;
      }  
} 
```

现在我的问题是，我想验证该文本字段仅接受特定格式和有限数量的输入，但我无法执行此操作，因为当我们禁用键盘弹出下方时，该方法没有被调用是我的代码验证文本字段。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    //Format Date of Birth YYYY-MM-DD
    if(textField == dateFld)
    {
        if ((dateFld.text.length == 4)||(dateFld.text.length == 7))
            //Handle backspace being pressed
            if (![string isEqualToString:@""])
                dateFld.text = [dateFld.text stringByAppendingString:@"-"];
        return !([textField.text length]>9 && [string length] > range.length);
    }
    else
        return YES;

} 
```

请帮助我摆脱这个问题或任何其他方式来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:48:32.033

我会做这样的事情：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSError *_error = nil;
    NSRegularExpression *_regularExpression = [NSRegularExpression regularExpressionWithPattern:@"^\\d{0,4}-{0,1}$|^\\d{4}-{1}\\d{0,2}-{0,1}$|^\\d{4}-{1}\\d{2}-{1}\\d{0,2}$" options:NSRegularExpressionCaseInsensitive error:&_error];
    NSMutableString *_newText = [NSMutableString stringWithString:textField.text];
    [_newText insertString:string atIndex:range.location];
    NSArray *_matches = [_regularExpression matchesInString:_newText options:0 range:NSMakeRange(0, _newText.length)];
    return _matches.count > 0;
} 
```

* * *

**编辑#1（22/01/13）**

当然，你的类必须是你的委托类`UITextField`，否则上面的方法将永远不会被回调。

还有一些额外的步骤可以做到这一点。

在**YourViewController.h**文件中：

```
@interface YourViewController : UIViewController <UITextFieldDelegate> {
    // ...
}

@property (nonatomic, strong) IBOutlet UITextField *myTextField; // is case of ARC and iOS5+

@end 
```

在**YourViewController.m**文件中

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // ...

    [self.myTextField setDelegate:self]; // you can do the same thing in the interface builder as well.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:57:16.400

我想验证该文本字段仅接受特定格式和有限数量的输入：

```
if(textField == dateFld){
       NSCharacterSet* numberCharSet = [NSCharacterSet characterSetWithCharactersInString:@"0123456789+"];
    for (int i = 0; i < [string length]; ++i)
    {
        unichar c = [string characterAtIndex:i];
        if (![numberCharSet characterIsMember:c])
        {
            return NO;
        }
    }
 //Format Date of Birth YYYY-MM-DD
 if([textField.text length] == 4) {
        textField.text=[NSString stringWithFormat:@"%@-",textField.text];
    }else if([textField.text length]==6){

        textField.text=[NSString stringWithFormat:@"%@-",textField.text];

    }else if([textField.text length]==8){

        textField.text=[NSString stringWithFormat:@"%@",textField.text];

    }
    NSLog(@"value %@",textField.text);
    NSUInteger newLength = [textField.text length] + [string length] - range.length;
    return (newLength > 13) ? NO : YES;
}
} 
```

它对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:16:01.593

您需要验证您的输入`dummyView`

```
UIView* dummyView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1, 1)];
textField.inputView = dummyView; 
```

由于您替换了 UITextField 的输入视图，因此不会调用 UITextField 委托。

# php - PHP PDF 创建 A3、A4 和 A5

> ID：14397158
> 
> 赞同：0
> 
> 时间：2013-01-18T10:41:04.417
> 
> 标签：php, printing, pdf-generation

我正在考虑使用 PHP 生成 PDF 以输出各种类型的文档大小、A3、A4、A5。

目前我有一个 div，在这个区域内有各种 div 绝对定位。

我想做的是让这个 div 有一个固定的高度和宽度，但是当我保存内容时，它可以用于 A4、A3 和 A5 打印尺寸。

实现这一目标的最佳方法是什么？

谢谢

编辑：

我还尝试为每种类型添加全宽背景图像？

此外，div 是否需要特定的高度/宽度才能创建每个文档？

我想要一个可以查看文档 HTML 的“区域”。所以，如果我选择 A3，它会将 PDF 保存为 A3，背景图像全宽，所有定位的 div 都在正确的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:58:03.263

使用[MPDF](http://www.mpdf1.com/mpdf/index.php)

mPDF 是一个 PHP 类，它从 UTF-8 编码的 HTML 生成 PDF 文件。它基于[FPDF](http://www.fpdf.org/)和[HTML2FPDF](http://html2fpdf.sourceforge.net/)，具有许多增强功能。

我编写 mPDF 以从我的网站“即时”输出 PDF 文件，处理不同的语言。它比原始脚本（例如 HTML2FPDF）慢，并且在使用 Unicode 字体时会生成更大的文件，但对 CSS 样式等的支持已经大大增强 - 请参阅[功能](http://www.mpdf1.com/mpdf/enhancements)。

请查看[示例](http://www.mpdf1.com/mpdf/examples)，并随时[下载](http://www.mpdf1.com/mpdf/download)。mPDF有相当广泛的在线[文档手册](http://mpdf1.com/manual/)。

这是您可以传递给默认构造函数的参数列表。

```
$mpdf = new mPDF('',    // mode - default ''
 '',    // format - A4, for example, default ''
 0,     // font size - default 0
 '',    // default font family
 15,    // margin_left
 15,    // margin right
 16,     // margin top
 16,    // margin bottom
 9,     // margin header
 9,     // margin footer
 'L');  // L - landscape, P - portrait 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T10:46:54.987

一个很好的方法是**类 FPDF**，它的扩展**TFPDF**带来了 UTF8 支持。

[Fpdf主页](http://fpdf.org/?lang=en)

[Tfpdf 脚本](http://fpdf.org/en/script/script92.php)

我有时使用它，它工作正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T10:47:30.980

您可以使用类似于 htm2pdf.co.uk 的 API

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T11:06:49.003

尝试使用来自谷歌的**[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)**我认为它适用于 WebKit，因此它具有巨大的 html 兼容性，并且还可以选择特定的页面大小输出，包括 A4、A3 等或特定的自定义大小，问题是是一个可执行的应用程序，这意味着您需要在 Linux/Windows 上运行它，并且在某些情况下，对于存档，您需要要求托管服务提供商授予您对该应用程序的运行权限

另一个选项是[http://pdfcrowd.com/html-to-pdf-api/](http://pdfcrowd.com/html-to-pdf-api/)，是一个 API，可以让你创建 pdf 并且它与 HTML 有很大的兼容性，是一个付费服务，我认为他们有一些免费的帐户，但您可以生成的 pdf 数量非常有限

我强烈推荐wkhtmltopdf，html转换几乎完美而且免费

# java - 表中两个外键的组合，不能多次插入

> ID：14397159
> 
> 赞同：1
> 
> 时间：2013-01-18T10:41:04.547
> 
> 标签：java, mysql

我在一个表中有两个外键，一个主键。

```
Primary_key Name Foreignkey1 Foreignkey2

1           test1  2               1
2           test2  2               1    <--- how do i prevent this from entering
3           test3  2               2 
```

在 java 或 mysql 中，我在 jtable 中显示数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:51:19.080

添加`UNIQUE`约束

```
ALTER TABLE tableName ADD CONSTRAINT tb_uq UNIQUE (Foreignkey1, Foreignkey2) 
```

# eclipse - 将 eclipse 项目与我的计算机同步

> ID：14397161
> 
> 赞同：1
> 
> 时间：2013-01-18T10:41:11.770
> 
> 标签：eclipse, git, maven, synchronization, project-management

您好，感谢您阅读本文！

我的办公室局域网中有两台计算机：一台功能强大的 PC，我大部分时间都用于开发和一台笔记本电脑。现在我想在这两个设备之间共享所有 eclipse 项目（例如手动同步然后切换到笔记本）。我不需要它们在云或其他东西中可用。我还有一个一直在运行的 NAS（网络附加存储）。

是否可以同步我的所有项目？主要问题：复杂性...

*   我使用带有多个插件的多重 Eclipse 安装，如 Aptana Studio、SpringSource Tool Suite、Maven、Git、...
*   大多数项目都是 Java EE，使用 maven 构建（不同的 maven 目标，如 jetty 或 tomcat）
*   一些项目使用 git 进行团队合作（与一些外部合作伙伴）
*   一些项目使用我自己的项目构建器（外部程序）
*   我使用多个工作区（我为不同的客户使用不同的工作区，其中包括不同的项目）
*   一些项目在 Eclipse 工作空间内，一些项目在外部

我目前的解决方案是使用文件同步程序，它将我的整个“项目”文件夹（我整个工作生活的根目录）同步到我的 NAS 内的文件夹（手动同步 - 不是文件更改或计划）。这种方法的问题是：我必须同步超过 100000 个文件。这只需要 20 分钟来分析发生了什么变化。当我打开 eclipse 一次并操作一个静态 html 文件时，eclipse 更改了 2000 多个文件（其中大部分位于 .metadata 文件夹中）......

我对每一个解决方案都持开放态度。我是否必须更改项目设置的结构？我必须使用其他同步解决方案吗？还是只是不可能？我必须使用云存储解决方案吗？这会影响已经使用 git 的项目吗？

感谢您的任何回复！！！！！！！

此致！曼努埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T21:29:31.413

确实有可能。在这种情况下使用 git 怎么样？您可以在 NAS 上为那些不应发布的项目创建一个裸存储库。

我想如果您处理源代码和大量文件，这可能是高效和安全地执行此操作的最佳策略（就“取出-放入-放入”而言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T07:55:28.257

我决定使用来自[http://sourceforge.net/projects/freefilesync/的 FreeFileSync 工具](http://sourceforge.net/projects/freefilesync/)

有一些努力将其配置为忽略某些文件和文件夹，但该工具提供了很好的过滤器可能性。配置这些过滤器可能非常耗时，但它们工作正常 :)

感谢你的帮助！

# java - 用迭代器比较两个数组列表

> ID：14397163
> 
> 赞同：1
> 
> 时间：2013-01-18T10:41:17.470
> 
> 标签：java, arraylist, iterator, while-loop

我需要比较两个不同大小的不同 Arraylist。

我可以用两个循环来做到这一点——但我需要使用迭代器。

第二个循环只迭代一次而不是 n 次。

```
while (it.hasNext()) {
    String ID = (String) Order.get(i).ID();
    j = 0;              
    while (o.hasNext()) {   
        String Order = (String) Order.get(j).ID();
        if (myOrder.equals(Order)) {
            //do sth
        }
        j++;
        o.next();
    }
    i++;
    it.next();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:54:32.447

您可以以比您更简单的方式使用迭代器：

```
Iterator<YourThing> firstIt = firstList.iterator();
while (firstIt.hasNext()) {
  String str1 = (String) firstIt.next().ID();
  // recreate iterator for second list
  Iterator<YourThing> secondIt = secondList.iterator();
  while (secondIt.hasNext()) {
    String str2 = (String) secondIt.next().ID();
    if (str1.equals(str2)) {
      //do sth
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:43:03.357

您需要为 例如`o`的每次迭代实例化迭代器`it`

```
while (it.hasNext()) {
   Iterator<String> o = ...
   while (o.hasNext()) {
     // ...
   }
} 
```

NB。你不需要索引变量`j`。您可以调用`o.next()`以获取迭代器引用的列表元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:51:40.607

关于什么

```
List<String> areInBoth = new ArrayList(list1);
areInBoth.retainAll(list2);
for (String s : areInBoth)
    doSomething(); 
```

您需要调整对象的 equals 方法以比较正确的内容（示例中的 ID）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T11:00:28.097

```
Iterator<Object> it = list1.iterator();
while (it.hasNext()) {
    Object object = it.next();
    Iterator<Object> o = list2.iterator();
    while (o.hasNext()) {   
        Object other = o.next();
        if (object.equals(other)) {
            //do sth
        }
    }
} 
```

两个`iterators`是因为有两个列表，每个列表都`object`检查下一个并获取下一个项目（`hasNext()`和`next()`）。

# sql - '@ItemID' 附近的语法不正确

> ID：14397167
> 
> 赞同：0
> 
> 时间：2013-01-18T10:41:28.123
> 
> 标签：sql, stored-procedures, sql-update

我不确定用两个更新语句编写 SP 是否正确。

我在“@ItemID”附近收到不正确的语法。你能建议我...我该如何解决这个问题。

```
CREATE PROCEDURE [dbo].[ComponentReplaceUSP](@ReplaceItem nvarchar(256) ,@Quantity decimal(28,12) ,@UOM nvarchar(30)) 

AS  
 DECLARE @ItemID INT    
BEGIN       

   Select @ItemID = ItemID  FROM [dbo].[Item] WHERE ItemName =  @ReplaceItem

    UPDATE Item    
      SET Item.ItemName = @ReplaceItem,
      Item.UOM = @UOM
      Where Item.ItemID =@ItemID    

      Update ItemBillOfMaterial
      Set ItemBillOfMaterial.UOM =@UOM,
          ItemBillOfMaterial.Quantity =@Quantity
          Where  ItemBillOfMaterial.CompItem= @ItemID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:44:51.663

您的`CREATE PROCEDURE`查询需要`END`：

```
CREATE PROCEDURE [dbo].[ComponentReplaceUSP](@ReplaceItem nvarchar(256) ,@Quantity decimal(28,12) ,@UOM nvarchar(30)) 
AS   
DECLARE @ItemID INT  
BEGIN           
   Select @ItemID = ItemID  FROM [dbo].[Item] WHERE ItemName =  @ReplaceItem
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:45:58.793

这应该只是将声明移动到开始下方的情况，因为这需要在 SP 中声明。

[http://msdn.microsoft.com/en-us/library/ms187926.aspx](http://msdn.microsoft.com/en-us/library/ms187926.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:46:57.607

它会抱怨最后一个查询的最后一部分是什么，因为你忘记`END`了在第 5 行阻止你`BEGIN`。

接受的[答案](https://stackoverflow.com/a/14397224/15498)是错误的，其主要断言与`DECLARE`陈述有关。以下是好的：

```
create procedure ABC
as
declare @ID int
begin
    select @ID = object_id from sys.objects
end 
```

# emacs - 唯一时自动完成（Emacs 自动完成）

> ID：14397170
> 
> 赞同：2
> 
> 时间：2013-01-18T10:41:32.567
> 
> 标签：emacs, autocomplete

当只有一个唯一选项时，如何编写自动完成代码以立即触发？（或者，当有多个选项，但它们都具有相同的基数时）

```
(eval-exp_[point-is-here]_) 
```

自动完成提供：

```
(eval-expression
(eval-expression-print-format) 
```

现在，当它遇到一个独特的选项时，如果它立即完成到`(eval-expression`，然后如果我们输入`"-"`它会立即选择打印格式，那不是很好吗？

即使有 2 个选项，您也可以在以下示例中看到您只需要`"-p"`完成：

```
(eval-expression-print-format)
(eval-expression-something-else) 
```

这种行为在 Emacs 中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:05:27.017

它实现了所需的行为：

```
(defadvice ac-inline-show (after eab-ac-expand activate)
  (if (> (length ac-candidates) 1)
      (let ((ac-common-part (try-completion ac-prefix ac-candidates)))
        (ac-expand-common))
    (progn
      (ac-expand-string ac-common-part)
      (ac-inline-hide)))
  (setq eab-last-selected-candidate ac-selected-candidate)) 
```

对于停用：

```
(ad-remove-advice 'ac-inline-show 'after 'eab-ac-expand)
(ad-deactivate 'ac-inline-show) 
```

编辑：

我尝试了工作流程并找到了一种取消错误书写的方法。作为示例，您打印`lam`并扩展为，但您意外`lambda`添加了额外内容并获取. 所以我设置`bd``lambdabd`

```
(global-set-key (kbd "C-<tab>") '(lambda () (interactive) (flet ((ac-candidates () `(,eab-last-selected-candidate))) (ac-fuzzy-complete)) (ac-expand))) 
```

并使用它：`lambdabd`变成`lambda`，你可以像往常一样继续。

编辑2：

该解决方案有一个缺点：“它在模糊时会变慢一点”。它是通过缩小`ac-candidates`到`eab-last-selected-candidate`for来固定的`ac-fuzzy-complete`。现在它很快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:18:51.873

如果只有少数候选人，您可以通过`M-1`、`M-2`等选择每个候选人。它适用于 2-7 名候选人（与`-p`您的示例中的击键比较）。您不能允许单一候选人的情况 -`M-<number>`在候选人仍然很少时尽早使用。

`M-<number>`是函数的键绑定`ac-complete-<number>`。

此外，函数`ac-isearch`( `C-s`) 也很有用。在开始`eva_[point]_`时，您可以搜索字符串`fo`或`pr`按`C-s`，然后从缩小的列表中进行选择。

# html - 可点击的 li 里面有不同数量的文本行

> ID：14397171
> 
> 赞同：0
> 
> 时间：2013-01-18T10:41:40.370
> 
> 标签：html, css

我正在尝试呈现可点击的 li，但独立于 li 内部的内容。例如下面的代码有一个按钮只有一行，另一个按钮有四行：

```
<ul>
  <li><a href="#">jkfasdf</a></li>
  <li><a href="#">jkffasdf fjaskdfasfs jajklfd fjklasdfas</a></li>
</ul>

ul{
  background: red;
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  float: left; 
}

li {
  padding: 10px; display: inline-block;
  border-left: 1px solid white;
  width: 100px;
  text-align: center;
  vertical-align: middle;
}
li:first-child {border-left: none;}

a {

} 
```

这是[jsfiddle](http://jsfiddle.net/tirengarfio/y3NCq/19/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:46:20.703

添加`display:block`到`a`标签并赋予`padding`标签而不是`li`

```
a {
  display:block; padding: 10px;
} 
```

**[演示](http://jsfiddle.net/y3NCq/24/)**

# objective-c - sqlite问题

> ID：14397174
> 
> 赞同：0
> 
> 时间：2013-01-18T10:41:43.250
> 
> 标签：objective-c, sqlite

我的 Objective C 代码和 SQLite 实现有问题。错误行在`NSAsset`if 子句中，即注释掉。这是代码：

```
-(void) createTable: (NSString *) tableName
         withField1: (NSString *) field1
         withField2: (NSString *) field2
         withField3: (NSString *) field3
         withField4: (NSString *) field4
{
    char *err;
    NSString *sql= [NSString stringWithFormat:
                    @"CREATE TABLE IF NOT EXIST '%@' ( '%@ "
                    "TEXT PRIMARY KEY, '%@' INTEGER, '%@' INTEGER, '%@' TEXT);",
                    tableName, field1, field2, field3, field4];

    if (sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err)
        != SQLITE_OK) {
        sqlite3_close(db);
     //   NSAssert(0, @"Could not create table");
    }else{
        NSLog(@"table create");
    }
}

-(NSString *) filePath{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
    return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"bp.sql"];
}

-(void)openDB{
    if (sqlite3_open([[self filePath] UTF8String], &db) !=SQLITE_OK){
        sqlite3_close(db);
        NSAssert(0, @"Database failed to open");
    }else{
        NSLog(@"Database open");
    }
} 
```

和错误信息：

```
*** Assertion failure in -[MainViewController createTable:withField1:withField2:withField3:withField4:], /Users/Modius/X-Code 4/BPApp/BPApp/MainViewController.m:32
2013-01-18 11:38:07.772 BPApp[58857:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not create table'
*** First throw call stack:
(0x2090012 0x119de7e 0x208fe78 0xc33f35 0x20a0 0x243a 0x1c6817 0x1c6882 0x115a25 0x115dbf 0x115f55 0x11ef67 0xe2fcc 0xe3fab 0xf5315 0xf624b 0xe7cf8 0x1febdf9 0x2013f3f 0x201396f 0x2036734 0x2035f44 0x2035e1b 0xe37da 0xe565c 0x1c3d 0x1b65 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

更新：这里是完整的日志输出：

```
2013-01-18 12:18:14.456 BPApp[59854:c07] Database open
2013-01-18 12:18:14.458 BPApp[59854:c07] *** Assertion failure in -[MainViewController createTable:withField1:withField2:withField3:withField4:], /Users/Modius/X-Code 4/BPApp/BPApp/MainViewController.m:31
2013-01-18 12:18:14.460 BPApp[59854:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not create table'
*** First throw call stack:
(0x2090012 0x119de7e 0x208fe78 0xc33f35 0x20a0 0x243a 0x1c6817 0x1c6882 0x115a25 0x115dbf 0x115f55 0x11ef67 0xe2fcc 0xe3fab 0xf5315 0xf624b 0xe7cf8 0x1febdf9 0x1febad0 0x2005bf5 0x2005962 0x2036bb6 0x2035f44 0x2035e1b 0xe37da 0xe565c 0x1c3d 0x1b65 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:46:38.730

```
NSString *sql= [NSString stringWithFormat:
                @"CREATE TABLE IF NOT EXIST '%@' ( '%@ "
                "TEXT PRIMARY KEY, '%@' INTEGER, '%@' INTEGER, '%@' TEXT);",
                tableName, field1, field2, field3, field4]; 
```

您在第一个字段名称后缺少单引号。

（请注意，在 SQL 中，表/字段名称应该用双引号引起来；SQLite 接受单引号只是为了与 MySQL 兼容。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:51:21.000

尝试像这样格式化它： `@"CREATE TABLE IF NOT EXIST '%@' ( '%@' TEXT PRIMARY KEY, '%@' INTEGER, '%@' INTEGER, '%@' TEXT);"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T16:50:29.713

修复 sql 语句以读取 EXISTS 而不是 EXIST。

# javascript - 在 Opera 中使用 Ajax 刷新页面

> ID：14397176
> 
> 赞同：0
> 
> 时间：2013-01-18T10:41:48.870
> 
> 标签：javascript, asp.net, ajax, updatepanel, opera

我正在尝试刷新 Opera 版本 12.12 中的页面内容（包含两个网格视图）。似乎我的页面在某个中间点被阻塞，因为它仍然是空白的。我的代码在除 Opera 之外的所有浏览器中都能完美运行：

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "refresh", "<script type='text/javascript'>function refreshList() { try { if (document.all) { document.all('" + lbnRefreshList.ClientID + "').click(); } else { document.getElementById('" + lbnRefreshList.ClientID + "').click(); } } catch(e){} } </script>");

protected void lbnRefreshList_Click(object sender, EventArgs e)
{
    // redind data to gridviews
} 
```

我也在使用 ajax 更新面板，我的网格视图在面板内，而 lbnRefreshList 设置为 AsyncPostback 触发器。但是，我不知道为什么我的页面在 Opera 上没有刷新，尽管代码执行了。系统提示我使用空白页。

非常感谢任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:56:11.333

在我看来，由于某种原因，Opera 上的“click”事件从未触发过，您是否尝试使用 jQuery？他们的框架试图与所有浏览器兼容，

你可以尝试做类似的事情

```
<script type='text/javascript'>

function refreshList() { 
 $('#" + lbnRefreshList.ClientID + "').click();
}

</script> 
```

# list - CakePHP 查找组名与数据名相同的列表

> ID：14397180
> 
> 赞同：4
> 
> 时间：2013-01-18T10:42:05.200
> 
> 标签：list, cakephp, select, cakephp-2.0

我必须显示一个选择框，其中包含按一般流派分组的不同电影流派。为此，我使用的是 CakePHP 默认方法`find('list',...)`。

我的电影类型数据库表是这样完成的：

```
|_id_|_name_________|_general_genre_|
|  1 | Action       | Action        |
|  2 | Martial arts | Action        |
| .. | ............ | ............. | 
```

问题是，如果组与数据具有相同的名称（例如：“Action”），则数据不会显示在组名中。

所以我的选择框看起来像：

```
Select a genre
  - Action
    - Martial arts
    - ... 
```

我想要的是：

```
Select a genre
  - Action
    - Action
    - Martial arts
    - ... 
```

当然，原因是无法选择组项目。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:51:48.983

好的，经过更多研究，我终于得到了答案。这是要添加到`Html->input()`方法中的属性。这个属性是`showParents`。因此，如果您想创建一个包含组的选择框，并在该组内拥有与该组同名的项目，您必须执行以下操作：

*   选择包含组的列表：

    ```
    $options = $this->TableName->find('list', array(
       'fields' => array('id', 'name', 'group_name')
    )); 
    ```

*   显示选择输入：

    ```
    $this->Html->input('InputId', array(
       'type' => 'select',
       'options' => $options,
       'showParents' => true
    )); 
    ```

希望这可以帮助;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:52:15.393

这是预期的行为。`showParents`生成表单元素时使用该选项。[API](http://api.cakephp.org/class/form-helper#method-FormHelperselect)甚至有一个例如。 对于您未能检查的这种情况:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:33:03.753

您可以通过设置选项，用您自己的字段覆盖 a`find('list')`返回的默认字段（主键和 displayField） 。`$options['fields']`如果需要，这些可以是两个以上的字段。这应该接近您需要的：

```
$this->Genre->find('list', array(
    'fields' => array('id', 'name', 'general_genre')
)); 
```

这将返回一个数组，如：

```
'Action' => 
    1 => 'Action'
    2 => 'Martial arts' 
```

您应该能够在下拉列表中使用它。

# delphi - 带有“无效指针操作”的 EInvalidPointer 消息

> ID：14397182
> 
> 赞同：-2
> 
> 时间：2013-01-18T10:42:10.927
> 
> 标签：delphi, debugging, exception, delphi-2007

该程序编译并成功运行（在delphi 2007上），但仅在调试期间，关闭程序时会弹出一个消息框，提示“无效的指针操作”。我没有找到，它们按预期执行，没有任何错误。

![这是异常的屏幕截图](../Images/12569a7af67ef511ddeba48f8496ffae.png)

当我告诉编译器在 Invalid Pointer Operation 错误时中断时，它什么也不做，只是挂起程序。

我该如何解决这个问题？

# javascript - 维护第三方代码的自定义补丁

> ID：14397188
> 
> 赞同：4
> 
> 时间：2013-01-18T10:42:30.790
> 
> 标签：javascript, version-control, patch

我正在构建一个使用第三方 JavaScript 库 (TinyMCE) 的 Web 应用程序。

我的应用程序有一些特定的需求，需要我在几个地方修补库。这些补丁很简单（不到十几行），但是因为它们是针对我们的用例而不是错误的。

我希望能够在库本身的新版本发布时进行更新，这将覆盖我们在 Git 存储库中的更改。

我需要一种方法来确保在将更新的库推送到生产服务器之前始终应用我们的补丁。由于更改非常小，因此手动应用它们不是问题。

更新第三方代码时，如何确保在我们的存储库中应用我的第三方代码补丁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:07:37.683

创建一个用于跟踪第三方代码的存储库，并将您的补丁放在一个单独的分支中。当您需要最新版本时，请获取更改并[重新定位](http://git-scm.com/book/en/Git-Branching-Rebasing)您的分支。

例如：

```
$ git clone --origin github https://github.com/tinymce/tinymce.git
$ cd tinymce/
$ git remote add origin git@myrepo.example.org:tinymce 
```

然后制作补丁并推送到您的存储库：

```
$ git commit -m "my patches to tinymce"
$ git push --set-upstream origin master 
```

此时您的存储库如下所示：

```
(0) --- (1) --- ... (n) --- (X)
                             |
                           master 
```

X 是你的补丁。

*现在设置一个分支以从github*远程获取新修订：

```
$ git branch tinymce_import github/master
$ git checkout tinymce_import
$ git pull --ff-only 
```

所以你的存储库变成了这样（足够聪明，可以将*github*远程`git branch`中的最后一个修订版用作原点）：

 *```
 master
                             |
                     +----- (X)
                     |
(0) --- (1) --- ... (n) --- (n+1) --- ... (n+m)
                                            |
                                      tinymce_import 
```

最后在 tinymce_import 上 rebase 你的*master*分支：

```
$ git checkout master
$ git rebase tinymce_import

                                                  master
                                                    |
                                            +----- (X)
                                            |
(0) --- (1) --- ... (n) --- (n+1) --- ... (n+m)
                                            |
                                      tinymce_import 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:23:59.593

如果您将 TinyMCE 存储在 Git 存储库中，那么您可以`post-commit-hook`在获得新版本的 TinyMCE 后使用 Git 执行补丁（然后提交这些补丁）。

工作流程将类似于：

```
[get new version of TinyMCE]
["git commit -a" to update all tracked files]
[post-commit-hook patches TinyMCE]
["git commit -a" to pick up all of the changes from the patches] 
```*

# ssrs-2008 - SSRS 2008R2：我们如何在折线图中隐藏 X 轴标签？

> ID：14397190
> 
> 赞同：0
> 
> 时间：2013-01-18T10:42:37.663
> 
> 标签：ssrs-2008

我是 SSRS 世界的新手。

我设置了 X 轴标签间隔“1”和间隔类型“天”。它工作正常。现在我想隐藏除每个月的第 1、15、31 个日期之外的所有标签。是否可以在 X 轴的隐藏属性中设置表达式？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:55:50.983

**编辑#2** 打开`Category Group properties`- 在那里你可以选择为 labal 定义表达式。然后使用以下表达式：

`Switch(Day(Fields!SAMPLE_DATE.Value) = 31 , "31", Day(Fields!SAMPLE_DATE.Value)> 1 AND Day(Fields!SAMPLE_DATE.Value) < 14 , " ", Day(Fields!SAMPLE_DATE.Value) = 15 , "15", Day(Fields!SAMPLE_DATE.Value) > 15 AND Day(Fields!SAMPLE_DATE.Value) < 30, " ", Day(Fields!SAMPLE_DATE.Value) = 30 , "30")`

# java - 使用 mvel 检查 List 中是否存在元素

> ID：14397191
> 
> 赞同：3
> 
> 时间：2013-01-18T10:42:46.210
> 
> 标签：java, ognl, mvel

我有一个清单。清单就像。

```
List<String> locations=new ArrayList<String>();
locations.add("California");
location.add("sydney");
location.add("Egypt"); 
```

现在我想在 mvel 中检查这个列表是否包含加利福尼亚和悉尼。我以为我可以使用下面的，但这会出错。

```
 location contains "sydney","california" 
```

如何在 mvel 中查找列表是否包含多个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:40:31.023

This will work:

```
list.containsAll(["sydney", "california"]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T09:13:03.187

这对我有用：

```
 //@Test
 public void testListContains() {
      List<String> locations = new ArrayList<String>();

     locations.add("California");
     locations.add("sydney");
     locations.add("Egypt");

     String expression = "thelocations contains acity && thelocations contains anothercity";

     Map container = new HashMap();

     container.put("thelocations", locations);

     container.put("acity", "sydney");

     container.put("anothercity","California");

     Object result = MVEL.eval(expression,container);

     System.out.println(result);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T14:08:02.387

为了简化[kvn](https://stackoverflow.com/a/19874279/1233652)的答案，您可以在表达式中嵌入您测试的城市。只需用单引号括起来：

```
public void testListContains() {
    List<String> locations = new ArrayList<String>();
    locations.add("California");
    locations.add("sydney");
    locations.add("Egypt");

    String expression = "thelocations contains 'sydney' && thelocations contains 'California'";

    Map container = new HashMap();
    container.put("thelocations", locations);

    Object result = MVEL.eval(expression,container);

    System.out.println(result);
} 
```

# c# - 如何为 Expression Blend 4 下载更多项目模板

> ID：14397199
> 
> 赞同：0
> 
> 时间：2013-01-18T10:43:10.797
> 
> 标签：c#, wpf, expression-blend

我想用 Blend 4 创建一个 WPF 应用程序，但只有我拥有的模板适用于 Windows Phone。如何为 WPF 安装附加模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:29:15.647

您应该安装 WPF 的版本 - [http://www.microsoft.com/expression/](http://www.microsoft.com/expression/)

# android - GCMIntentService 中的 onRegistered() 从未调用过

> ID：14397202
> 
> 赞同：7
> 
> 时间：2013-01-18T10:43:21.797
> 
> 标签：android, google-cloud-messaging

我正在尝试在 GCM 上注册我的应用程序，但我不知道为什么我的应用程序从未注册过。`GCMRegistrar.register(this, SENDER_ID);`被调用但我的 GCMIntentService 中的 onRegistered() 从未被调用。我不知道**为什么**。

这是我的 Logcat

```
01-17 11:03:00.015: D/GCMRegistrar(3509): resetting backoff for com.abc.xyz.ui.activity
01-17 11:03:03.210: V/GCMRegistrar(3509): Registering app com.abc.xyz.ui.activity of senders 964256581311
01-17 11:03:06.070: V/GCMBroadcastReceiver(3509): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-17 11:03:06.070: V/GCMBroadcastReceiver(3509): GCM IntentService class: com.abc.xyz.ui.activity.GCMIntentService
01-17 11:03:06.070: V/GCMBaseIntentService(3509): Acquiring wakelock 
```

这是我完整的清单

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest package="com.abc.xyz.ui.activity"
    android:versionCode="1"
    android:versionName="1.5.6" xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk 
        android:minSdkVersion="11" android:targetSdkVersion="16"/>
    <uses-feature 
        android:name="android.hardware.usb.host"/>

    <!-- This app has permission to register and receive data message. -->
    <uses-permission
        android:name="com.google.android.c2dm.permission.RECEIVE" />

    <uses-permission 
        android:name="android.permission.INTERNET" />
    <uses-permission 
        android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission 
        android:name="android.permission.GET_TASKS" />
    <uses-permission 
        android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission
        android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission 
        android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission 
        android:name="android.permission.CALL_PHONE" /> 
    <uses-permission 
        android:name="android.permission.BLUETOOTH" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" /> 

    <!--
     Creates a custom permission so only this app can receive its messages.

     NOTE: the permission *must* be called PACKAGE.permission.C2D_MESSAGE,
           where PACKAGE is the application's package name.
    -->
    <uses-permission
        android:name="com.abc.xyz.ui.activity.permission.C2D_MESSAGE" />   
    <permission
        android:name="com.abc.xyz.ui.activity.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />    
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Holo.Light" 
        android:name="com.abc.xyz.MyApplication" 
        android:allowBackup="false">
        <activity
            android:name=".StartupActivity"
            android:noHistory="true"
            android:label="@string/title_startup_screen" 
            android:configChanges="orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".LoginActivity"
            android:windowSoftInputMode="stateAlwaysVisible|adjustResize"
            android:label="@string/title_login_screen"
            android:configChanges="orientation">
        </activity>
        //my other activity defination

        <!--
          BroadcastReceiver that will receive intents from GCM
          services and handle them to the custom IntentService.

          The com.google.android.c2dm.permission.SEND permission is necessary
          so only GCM services can send data messages for the app.
        -->
        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.abc.xyz.ui.activity" />
            </intent-filter>
        </receiver>

        <!--
          Application-specific subclass of GCMBaseIntentService that will
          handle received messages.

          By default, it must be named .GCMIntentService, unless the
          application uses a custom BroadcastReceiver that redefines its name.
        -->
        <service android:name="com.abc.xyz.ui.activity.GCMIntentService" />

    </application>
</manifest> 
```

我不知道出了什么问题以及为什么永远不会调用 onRegistered() 。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T15:16:02.880

我在另一篇文章中发现了问题所在。我的 GCMIntentService 类在我的清单中定义为

```
<service android:name="MY_PACKAGE.gcm.GCMIntentService" /> 
```

因为我不想把这个类放在根包中，而是放在 MY_PACKAGE.gcm”。这似乎导致了一个问题，正如文档所说，

添加以下意图服务

```
<service android:name=".GCMIntentService" /> 
```

因此，当我移至根包时，它起作用了！还有另一种方法可以将 GCMIntentServiceSubclass 放在您想要的任何位置并以不同的方式命名。您应该继承 GCMBroadcastReceiver 并在清单和子类中进行更改，如this other [post](https://stackoverflow.com/questions/11332034/google-gcmintentservice-instantiate)所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:01:47.547

我回答是因为粘贴代码在注释中几乎不可读：

我从您的 logcat 中遗漏了一些日志，这些日志表明您的服务甚至被调用了。注册时我的 Logcat 中有这个：

```
GCMBroadcastReceiver  V  onReceive: com.google.android.c2dm.intent.REGISTRATION
GCMBroadcastReceiver  V  GCM IntentService class: com.package.android.app.GCMIntentService
GCMBaseIntentService  V  Acquiring wakelock
GCMBaseIntentService  V  Intent service name: GCMIntentService-DynamicSenderIds-1 
```

特别是最后一行丢失或您忘记粘贴它。你能确保你发布了完整的 LogCat 吗？过滤`GCM`以确保您没有错过任何内容。

**更新**

正如评论中提到的OP，他使用该服务做更多事情。这以某种方式干扰了 GCM 功能，并且在将其分成两个服务后它可以工作。经验教训：不要将 GCMIntentService 用于 GCM 以外的任何其他用途。

# mysql - 执行准备语句 MySQL 不工作

> ID：14397204
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:43:22.343
> 
> 标签：mysql, execute, prepare

我一直在尝试确定我在 MySQL 中创建的存储过程有什么问题。我在创建它时没有遇到任何问题，但是当我尝试调用它时它不起作用。工作台显示的错误是

> 错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“SELECT申请人ID、姓氏、名字、中间”附近使用正确的语法。

这是我的存储过程，

```
-- --------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE DEFINER=`pinpoint_kevin`@`%` PROCEDURE `usp_Processing_GetApplicantByJobPostIDandStatus`(
    IN _ApplicationStatus VARCHAR(100),
    IN _JobPostID VARCHAR(64),
    IN _startRowIndex INT,
    IN _maximumRows INT,
    IN _Order NVARCHAR(20))
BEGIN
    DECLARE _OuterSelectString VARCHAR(1000);
    DECLARE _OuterFromString1 VARCHAR(1000);
    DECLARE _OuterFromString2 VARCHAR(1000);
    DECLARE _InnerSelectString VARCHAR(2000);
    DECLARE _InnerFromString VARCHAR(1000);
    DECLARE _InnerWhereString VARCHAR(1000);
    DECLARE _InnerOrderByString VARCHAR(1000);
    DECLARE _OuterWhereString VARCHAR(1000);
    DECLARE _ProcessingStepID VARCHAR(64);
    DECLARE _ApplicationProcessingID VARCHAR(64);
    DECLARE _YEHEY TEXT;

    SELECT
        ProcessingStepID
    INTO
        _ProcessingStepID
    FROM
        ProcessingStep
    WHERE
        ProcessingStepName = _ApplicationStatus;

    SELECT
        ApplicationProcessingID
    INTO
        _ApplicationProcessingID
    FROM
        ApplicationProcessing AS AP
            INNER JOIN
        ProcessingStep AS PS ON AP.ProcessingStepID = PS.ProcessingStepID
    WHERE
        PS.ProcessingStepName = _ApplicationStatus
    ORDER BY
        AP.TransactionDate
    LIMIT
        1;

    SET
        _OuterSelectString = '
                                SET
                                    @row_num = 0;

                                SELECT
                                    ApplicantID,
                                    LastName,
                                    FirstName,
                                    MiddleName,
                                    Email,
                                    ContactNumber,
                                    ApplicantCount,
                                    ApplicationNumber,
                                    ResumeStatus,
                                    LastTransactionDate,
                                    MovedBy,
                                    StepType,
                                    AdministeredBy,
                                    Evaluation,
                                    Recommendation,
                                    DateTaken,
                                    Mark,
                                    RowRank
                             ';
    SET
        _OuterFromString1 = 'FROM (
                            ';

    SET
        _InnerSelectString = 'SELECT 
                                (SELECT
                                    COUNT(*)
                                FROM
                                    Applicant_2 AS App 
                                        INNER JOIN
                                    ApplicantJobPost AS AJP ON App.ApplicantID = AJP.ApplicantID
                                        INNER JOIN
                                    ApplicationStatus AS APPS ON AJP.ApplicationStatusID = APPS.ApplicationStatusID
                                WHERE
                                    APPS.ApplicationStatusName = ?
                                        AND
                                    AJP.JobPostId = ? AND AJP.IsForwarded = 0) AS ApplicantCount,
                                    App.ApplicantID AS ApplicantID,
                                    App.LastName AS LastName,
                                    App.FirstName AS FirstName,
                                    App.MiddleName AS MiddleName,
                                    App.Email AS Email,
                                    App.BirthDate AS BirthDate,
                                    App.Address AS Address,
                                    App.ContactNumber AS ContactNumber,
                                    App.FileName  AS FileName,
                                    App.FileExtension AS FileExtension,
                                    App.DateCreated AS DateCreated,
                                    AJP.ApplicationNumber AS ApplicationNumber,
                                    AJP.IsReadResume AS ResumeStatus,
                                    AP.TransactionDate AS LastTransactionDate,
                                    AP.MovedBy AS MovedBy,
                                    AP.ProcessingStepType AS StepType,
                                    AP.AdministeredBy AS AdministeredBy,
                                    AP.Evaluation AS Evaluation,
                                    AP.Recommendation AS Recommendation,
                                    AP.DateTaken AS DateTaken,
                                    AJP.Mark AS Mark,
                                    @row_num := @row_num + 1 AS RowRank 
                                    ';

    SET
        _InnerFromString = 'FROM
                                Applicant_2 AS App 
                                    INNER JOIN
                                ApplicantJobPost AS AJP ON App.ApplicantID = AJP.ApplicantID
                                    INNER JOIN
                                ApplicationStatus AS APPS ON AJP.ApplicationStatusID = APPS.ApplicationStatusID
                                    INNER JOIN
                                ApplicationProcessing AS AP ON AP.ApplicantJobPostID = AJP.ApplicantJobPostID
                            ';

    SET
        _InnerWhereString = 'WHERE
                                APPS.ApplicationStatusName = ?
                                    AND
                                AJP.JobPostId = ?
                                    AND
                                AP.ProcessingStepID = ?
                                    AND
                                AJP.IsForwarded = 0
                            ';

    IF (_ApplicationStatus = 'Exam' OR _ApplicationStatus = 'Interview')
    THEN
        SET _InnerWhereString = 'WHERE
                                APPS.ApplicationStatusName = ?
                                    AND
                                AJP.JobPostId = ?
                                    AND
                                AP.ProcessingStepID = ?
                                    AND
                                AJP.IsForwarded = 0
                                    AND
                                AP.ApplicationProcessingID = ? ';
    END IF;

    SET
        _OuterFromString2 = ') AS WithRowNumbers
                            ';

    SET
        _OuterWhereString = 'WHERE
                                RowRank > _startRowIndex AND RowRank <= (_startRowIndex + _maximumRows)
                            ';

    IF (_Order = 'Transaction')
    THEN
        SET
            _InnerOrderByString = 'ORDER BY 
                                        AP.TransactionDate,
                                        LastName,
                                        IsReadResume,
                                        Mark,
                                        DateTaken DESC
                                  ';

    ELSEIF (_Order = 'TransactionDesc')
    THEN
        SET
            _InnerOrderByString = 'ORDER BY
                                        AP.TransactionDate DESC,
                                        LastName,
                                        IsReadResume,
                                        Mark,
                                        DateTaken DESC
                                  ';

    ELSEIF (_Order = 'Last NameDesc')
    THEN
        SET
            _InnerOrderByString = 'ORDER BY
                                        LastName DESC,
                                        IsReadResume,
                                        Mark,
                                        AP.TransactionDate DESC,
                                        DateTaken DESC
                                  ';

    ELSEIF (_Order = 'Last Name')
    THEN
        SET
            _InnerOrderByString = 'ORDER BY
                                        LastName,
                                        IsReadResume,
                                        Mark,
                                        AP.TransactionDate DESC,
                                        DateTaken DESC
                                  ';

    ELSEIF (_Order = 'Resume StatusDesc')
    THEN
        SET
            _InnerOrderByString = 'ORDER BY
                                        IsReadResume DESC,
                                        Mark,
                                        AP.TransactionDate DESC,
                                        LastName,
                                        DateTaken DESC
                                  ';

    ELSEIF (_Order = 'Resume Status')
    THEN
        SET
            _InnerOrderByString = 'ORDER BY
                                        IsReadResume,
                                        Mark,
                                        AP.TransactionDate DESC,
                                        LastName,
                                        DateTaken DESC
                                  ';
    END IF;

    SET _YEHEY = CONCAT(_OuterSelectString, _OuterFromString1, _InnerSelectString, _InnerFromString, _InnerWhereString, _OuterFromString2, _OuterWhereString);
    SET @WholeQuery = _YEHEY;
    PREPARE statement FROM @WholeQuery;
    SET @a = _ApplicationStatus;
    SET @b = _JobPostID;
    SET @c = _ApplicationStatus;
    SET @d = _JobPostID;
    SET @e = _ProcessingStepID;

    IF (_ApplicationStatus = 'Exam' OR _ApplicationStatus = 'Interview')
    THEN
        SET @f = _ApplicationProcessingID;
        EXECUTE statement USING @a, @b, @c, @d, @e, @f;

    ELSE
        EXECUTE statement USING @a, @b, @c, @d, @e;
    END IF;

    DEALLOCATE PREPARE statement;

    SELECT _YEHEY;
    SELECT @WholeQuery;

END 
```

我已经尝试复制生成的字符串/查询并在另一个窗口中运行它并替换变量的适当值并且它正在工作。

我被这个存储过程困住了。我希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:49:52.000

如[准备语句的 SQL 语法中所述](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)：

> 预准备语句的 SQL 语法不支持多语句（即，单个字符串中的多个语句由“;”字符分隔）。

# php - SyntaxError: Unexpected token { 当我将 php 数组返回给 jquery 时

> ID：14397206
> 
> 赞同：1
> 
> 时间：2013-01-18T10:43:40.890
> 
> 标签：php, jquery, ajax, arrays, json

`SyntaxError: Unexpected token {`当我上传多个文件时，我有一个。而当我只上传**一个文件**时，它可以工作。

PHP

```
$uploaddir = 'uploads/';

$arr = array();
foreach ($_FILES["uploadfile"]["error"] as $key => $error) {

  if ($error == UPLOAD_ERR_OK) {
     $file = $uploaddir . basename($_FILES['uploadfile']['name'][$key]);

     if (move_uploaded_file($_FILES['uploadfile']['tmp_name'][$key], $file)) {
         $arr['title'] = $_FILES['uploadfile']['name'][$key];
         $arr['url'] = $file;
         $arr['size'] = $_FILES['uploadfile']['size'][$key];
     }
     echo json_encode($arr);
  }
} 
```

查询

```
 onComplete: function(file, response){
     response = JSON.parse(response);
     console.log('data = '+response.title);
     console.log('data = '+response.url);
     console.log('data = '+response.size);
 } 
```

新的 VAR DUMP PHP（带有@hek2mgl 代码）

```
array(2) {
[0]=>
    array(3) {
        ["title"]=> string(27) "facebook-icon-east-west.jpg"
        ["url"]=> string(35) "uploads/facebook-icon-east-west.jpg"
        ["size"]=> int(35227)
    }
[1]=>
    array(3) {
        ["title"]=> string(25) "facebook-graph-search.jpg"
        ["url"]=> string(33) "uploads/facebook-graph-search.jpg"
        ["size"]=> int(53122)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:47:14.847

上传多个文件后，您在哪里输出多个 json 文档。您必须将这些多个节点包装到一个数组元素中。

你做了：

```
{
   "title" : "dsfsd"
   ...
}
{<--- Syntax error
   "title" : "dsfsd"
   ...
} 
```

你必须这样做：

```
[{
   "title" : "dsfsd"
   ...
},
{
   "title" : "dsfsd"
   ...
}] 
```

下面是正确的 PHP 代码：

```
$uploaddir = 'uploads/';

$files = array();
foreach ($_FILES["uploadfile"]["error"] as $key => $error) {
  if ($error == UPLOAD_ERR_OK) {
     $path = $uploaddir . basename($_FILES['uploadfile']['name'][$key]);

     if (move_uploaded_file($_FILES['uploadfile']['tmp_name'][$key], $path)) {
         $files [] = array (
            'title' => $_FILES['uploadfile']['name'][$key],
            'url' => $path,
            'size' => $_FILES['uploadfile']['size'][$key]
         );
     }
  }
}

echo json_encode($files); 
```

# java - 为什么我会在事务错误中只允许祖先查询

> ID：14397207
> 
> 赞同：6
> 
> 时间：2013-01-18T10:43:41.330
> 
> 标签：java, google-app-engine, transactions, google-cloud-datastore, objectify

```
boolean r = ofy().transact(new Work<Boolean>() {

        @Override
        public Boolean run() {
            Visit visit = ofy().load().type(Visit.class)
                    .filter(Visit.USER_ID, userID)
                    .filter(Visit.VENUE_ID, venueID).first().get();

            if (visit == null)
                return false;

            visit.setLastRequestDate(new Date(timestamp));

            ofy().save().entity(visit).now();
            return true;
        }
    }); 
```

我得到

> java.lang.IllegalArgumentException：事务中只允许祖先查询。

用于`get()`通话的线路。
为什么？我只是`Visit`在此事务中查询实体。我在事务中执行此操作，因为我希望所有这些都作为原子操作执行。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T14:00:54.537

无法在事务中进行无祖先查询。要么在没有事务的情况下执行此操作，要么将查询替换为 get。

您可以做的最接近的是：

1.  获取具有无祖先查询的实体，无需事务。记住实体的键。
2.  开始交易。
3.  通过密钥获取实体。
4.  检查查询条件是否仍然适用（= 属性仍然具有与查询条件相同的值）。通过这种方式，您可以确保实体在您进行查询后没有更改。
5.  更改并保存实体。提交事务。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-01-18T11:40:50.467

错误似乎很明显：在事务中，您只被允许执行祖先查询。您的查询不是祖先查询。

# vb.net - 如何读取 app.config 中的值列表并填充组合 (VB)

> ID：14397211
> 
> 赞同：1
> 
> 时间：2013-01-18T10:43:45.247
> 
> 标签：vb.net

我的 app.config 文件中有 5 个不同的连接字符串，并希望使用这些值填充组合。我怎样才能在 VB 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:01:23.663

添加对`System.Configuration dll`. 然后您可以使用该类获取所有连接字符串[`System.Configuration.ConfigurationManager`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.connectionstrings.aspx)：

```
Dim allConnections = System.Configuration.ConfigurationManager.ConnectionStrings
For Each connection As ConnectionStringSettings In allConnections
    Dim connectionName = connection.Name
    Dim connectionString = allConnections(connection.Name).ConnectionString
    ddlConnections.Items.Add(connectionName)
Next 
```

我假设您不想显示完整的连接字符串，而只想显示它的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:49:29.667

使用循环并像这样获取所有连接字符串

```
 loop Start
   //add your desired code
   Web.Configuration.WebConfigurationManager.ConnectionStrings.Item(i)

   loop end 
```

# r - 在 R 中选择一个变量

> ID：14397218
> 
> 赞同：0
> 
> 时间：2013-01-18T10:44:17.570
> 
> 标签：r

我有两个变量：`X`下面`state`给出

```
set.seed(3)
state <- rbinom(15,4,0.6)
X <- c(1:15)
X
state 
```

输出是

```
> state
 [1] 3 2 3 3 2 2 4 3 2 2 2 2 2 2 1
> X
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 
```

我想选择`X`相同状态对应的s。知道如何在 R 中执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:53:43.057

使用`split`你得到 4 个状态的列表

```
ll <- split(X,state)
$`1`
[1] 15

$`2`
[1]  2  5  6  9 10 11 12 13 14

$`3`
[1] 1 3 4 8

$`4`
[1] 7

ll[3]
$`3`
[1] 1 3 4 8 
```

通常我们使用 ,`ave`在分组时执行一些操作。

例如，在这里我按状态获得 X 的平均值：

```
ave(X,state,FUN = mean)
 [1]  4.000000  9.111111  4.000000  4.000000  9.111111  9.111111  7.000000  4.000000  9.111111  9.111111  9.111111  9.111111  9.111111  9.111111 15.000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:59:28.780

另一种方法是将变量放入数据框中，然后从那里选择它们：

```
> df <- data.frame(x = X, state = state)
> df
    x state
1   1     3
2   2     2
3   3     3
4   4     3
5   5     2
6   6     2
7   7     4
8   8     3
9   9     2
10 10     2
11 11     2
12 12     2
13 13     2
14 14     2
15 15     1
> df[df$state == 3,]
  x state
1 1     3
3 3     3
4 4     3
8 8     3 
```

# testlink - 将测试从 TestLink 导入（迁移）到 Zephyr

> ID：14397220
> 
> 赞同：3
> 
> 时间：2013-01-18T10:44:33.317
> 
> 标签：testlink

将测试（测试用例、套件）从 TestLink 导入 Zephyr 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T23:42:13.777

我发现这似乎回答了你的问题。

[https://answers.atlassian.com/questions/184845/importing-test-cases-to-zephyr-add-on-from-test-link](https://answers.atlassian.com/questions/184845/importing-test-cases-to-zephyr-add-on-from-test-link)

您需要在此处找到的导入器插件

[http://community.yourzephyr.com/viewtopic.php?f=15&t=1048](http://community.yourzephyr.com/viewtopic.php?f=15&t=1048)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T05:59:49.283

您可以下载[Zephyr Testcase Importer](https://bitbucket.org/zfjdeveloper/zfj-importer/downloads)以将 Excel 或 XML 文件导入 Zephyr。据我所知，这个导入器实用程序对所有测试用例执行“平面”导入，因此您将丢失有关测试计划、测试套件和测试执行历史的所有信息。

# xslt - xslt：将只读设置为文本框

> ID：14397222
> 
> 赞同：-3
> 
> 时间：2013-01-18T10:44:44.310
> 
> 标签：xslt

有没有办法根据“if”条件将只读属性设置为文本框？

```
Javascript:
      <tr>
     <td>
        <input class="text" value="{//Doc/Value1/@name}"/>
     </td>
    </tr> 
```

就像输入标签一样，我们必须设置该属性。

我们该怎么做呢？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:09:33.043

```
<input class="text" value="{//Doc/Value1/@name}"/>
  <xsl:if test="someCondition">
    <xsl:attribute name="readonly">readonly</xsl:attribute>
  </xsl:if>
</input> 
```

# c# - 如何在c#中解析下面的xml字符串

> ID：14397226
> 
> 赞同：-6
> 
> 时间：2013-01-18T10:44:57.030
> 
> 标签：c#, .net, xml, xml-parsing, xml-serialization

我在一个字符串变量中有以下 xml 字符串。

```
string xmlString = "<a:ORegions>
                             <a:ID>1</a:ID> 
                             <a:regionCode>US</a:regionCode> 
                    </a:ORegions>
                    <a:ORegions>
                             <a:ID>2</a:ID> 
                             <a:regionCode>CANADA</a:regionCode> 
                    </a:ORegions>
                    <a:ORegions>
                    <a:ID>3</a:ID> 
                             <a:regionCode>ASIA</a:regionCode> 
                    </a:ORegions> 
```

现在我想访问 regionCode 值，即 US、CANADA、ASIA

我如何使用 c# 做到这一点。我是 xml 解析的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:48:09.320

`System.Xml`您可以通过命名空间类反序列化该字符串（假设您修复了各种语法错误） ，特别[`XmlDocument`](http://msdn.microsoft.com/en-gb/library/system.xml.xmldocument.aspx)是使用它的[`Load`方法](http://msdn.microsoft.com/en-us/library/875kz807.aspx)。要访问命名空间（`a`in`a:Oregions`等是命名空间），您需要一个[`XmlNamespaceManager`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.aspx). 然后，您将向管理器注册名称空间（它们必须在某处定义）并在查询`XmlDocument`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:51:15.913

采用`LinqToXml`

```
var doc = XDocument.Parse(xmlString); 
```

然后，您可以访问以下内容中的元素、值和属性：

```
XNamespace xmlNamespace = "a";

//e.g. Retrieve's a list of regioncodes...
var ids = doc.Elements(xmlNamespace + "ORegions")
             .Select(r => r.Element("regionCode").Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:09:04.833

```
XmlDocument document = new XmlDocument();
document.Load(filePath);

foreach (XmlNode node in document.GetElementsByTagName("a:regionCode"))
    Console.WriteLine(node.InnerText); 
```

# html - 在同一窗口中填充数据

> ID：14397228
> 
> 赞同：1
> 
> 时间：2013-01-18T10:45:27.437
> 
> 标签：html, jsp

![在此处输入图像描述](../Images/f12f049901679006933405b1676b5096.png)

嗨，我的要求是在我提供员工 ID 的同一窗口上填充数据，员工 ID 按钮和输入字段出现在窗口的左角，我想在窗口的右上角填充数据，如图所示现在我在不同窗口上的人口数据请帮帮我。

这是我的**JS**

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<jsp:include page="Header.jsp" />
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="../css/style1.css" rel="stylesheet" type="text/css">
</head>

<body>
    <table width="1255" height="952" border="0">
        <tr>
            <td width="357" height="251" bgcolor="#CC6600">
                <table width="285" border="0" align="center" bgcolor="#FF9900">

                    <c:if test="${requestScope.x}">
                        <div id="div3">
                            <form:form commandName="departmentForm"
                                action="/EmployeeWebAppUI/DepartmentController/findbydepartmentid">
                                <span>Find By ID </span>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    <form:input path="departmentId" />
                                <input type="submit" name="submit1" value="search" />

                            </form:form>

                            <br>
                        </div>
                    </c:if>

                    <c:if test="${requestScope.y}">
                        <div id="div1">
                            <form:form commandName="departmentForm"
                                action="/EmployeeWebAppUI/DepartmentController/findbydepartmentname">
                                <span>Find BY Name</span> &nbsp;&nbsp;<form:input
                                    path="departmentName" />
                                <input type="submit" name="submit" value="search" />
                            </form:form>

                        </div>
                    </c:if>

                    <c:if test="${requestScope.w}">
                        <div id="div2">
                            <form:form commandName="projectForm"
                                action="/EmployeeWebAppUI/ProjectController/getprojectsbyId">
                                <span>Employee Number: </span>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    <form:input path="employeeNumber" />
                                <input type="submit" name="submit2" value="search" />

                            </form:form>

                            <br>
                        </div>
                    </c:if>

                    <c:if test="${requestScope.A}">
                        <div id="div2">
                            <form:form commandName="employeeForm"
                                action="/EmployeeWebAppUI/EmployeeGetController/findbyid"
                                method="get">
                                <span>Employee Id:</span>

                                <form:input path="employeeNumber" />

                                <input type="submit" name="Search" value="Search" />

                            </form:form>
                        </div>
                    </c:if>

                    <c:if test="${requestScope.B}">
                        <div id="div1">
                            <form:form commandName="employeeForm"
                                action="/EmployeeWebAppUI/EmployeeGetController/findbyname"
                                method="post">

                                <span>Employee Name:</span>

                                <form:input path="firstName" />

                                <input type="submit" name="Search" value="Search" />

                            </form:form>
                        </div>
                    </c:if>

                    <c:if test="${requestScope.C}">
                        <div id="div1">
                            <form:form commandName="employeeForm"
                                action="/EmployeeWebAppUI/EmployeeGetController/findByDepatmentId"
                                method="post">

                                <span>Department ID:</span>

                                <form:input path="departmentId" />

                                <input type="submit" name="Search" value="Search" />

                            </form:form>
                        </div>
                    </c:if>

                </table>
                <p>&nbsp;</p>
            </td>
            <td width="888" rowspan="2">
        <tr>
            <td height="693" bgcolor="#CC6600"></td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:09:01.897

假设您正在使用 jquery

单击选项卡或标签执行 AJAX 请求。

它将调用您的 servlet 并将数据写入那里的 ajax 响应。

在客户端 onsuccess 做所需的东西。

```
function changeCOntent(type){
    $.ajax({
          type: 'POST',
          url: 'servletpath?type=passtype',
          success:function(data){

             $('#contentDiv').innerHTML = data;

          }
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:53:24.897

而不是获取完整的页面，只从服务器获取数据，然后使用 JavaScript 在页面上呈现数据。

**如果您以异步**方式（或使用 Ajax）发布页面，这通常是可能的。你这样做的方式是：

*   通过使用 Ajax 将输入参数传递给服务器来调用操作。
*   从服务器获取 JSON 格式的响应
*   解析 JSON 数据，然后使用 DOM 操作填充页面。

您可以使用任何 JS 库（如**jQuery**）来简化 Ajax 调用以及进行 DOM 操作。

# sql - 强制至少填写一个字段

> ID：14397230
> 
> 赞同：1
> 
> 时间：2013-01-18T10:45:28.347
> 
> 标签：sql, sql-server

我有一张如下表：

```
[ArticleId] int NOT NULL
[AssetId] int NULL
[VideoId] int NULL 
```

两者`VideoId`和`AssetId`都是可以为空的，但我想知道是否有一种方法可以强制至少填充一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:52:49.067

您可以添加一个约束来检查至少一个不为空

```
ALTER TABLE YourTable 
ADD CONSTRAINT AtLeastOneFilled 
CHECK (ArticleId IS NOT NULL OR AssetId IS NOT NULL OR VideoId IS NOT NULL ); 
```

# xml - 具有多个节点实例的 XML、Soap 和 XPATH 查询

> ID：14397232
> 
> 赞同：0
> 
> 时间：2013-01-18T10:45:32.787
> 
> 标签：xml, soap, xpath

我正在使用一些 XML，在技术上并没有真正的倾向，并且一直试图通过阅读互联网上的各种资源来解决这个问题，但速度却一无所获。

我有以下 XML：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Header>
      <XXXSoapHeader xmlns="http://XXX.com/optima/webservices">
         <AuthenticationString>?</AuthenticationString>
      </XXXSoapHeader>
   </soap:Header>
   <soap:Body>
      <SubmitMultipleCalcMarginRequestResponse xmlns="http://XXX.com/optima/webservices">
         <SubmitMultipleCalcMarginRequestResult>
            <TaskExecutionSubmitInfo>
               <taskExecutionId>74457</taskExecutionId>
               <description>Calc LIVE BROKER margin : Account WebServiceTest_Account1(435) : Business Date (12-Feb-2007)</description>
            </TaskExecutionSubmitInfo>
            <TaskExecutionSubmitInfo>
               <taskExecutionId>74458</taskExecutionId>
               <description>Calc LIVE BROKER margin : Account WebServiceTest_Account2(436) : Business Date (12-Feb-2007)</description>
            </TaskExecutionSubmitInfo>
         </SubmitMultipleCalcMarginRequestResult>
      </SubmitMultipleCalcMarginRequestResponse>
   </soap:Body>
</soap:Envelope> 
```

并一直在使用以下内容从节点中提取信息：

```
//*[name() = 'taskExecutionId'] 
```

返回：

```
<?xml version="1.0" encoding="UTF-8"?>

<root xmlns="http://XXX.com/optima/webservices">
  <taskExecutionId>74457</taskExecutionId>
  <taskExecutionId>74458</taskExecutionId>
</root> 
```

但是，如果我只想返回第二个 taskExecutionId，我该怎么办？还是第一个？我试过附加一个 [n] 但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:37:42.560

要获取整个 XML 文档中某事物的第*N*个实例，可以使用以下 XPath：

```
(//*[name() = 'taskExecutionId'])[N] 
```

括号是必需的。没有它们，您将在其特定父项下选择第*N*个。`taskExecutionId`

# css - 一些 div 正在向上移动，在 chrome 中

> ID：14397233
> 
> 赞同：0
> 
> 时间：2013-01-18T10:45:41.213
> 
> 标签：css, google-chrome, height

在我们的框架中，我们有这种 HTML 结构。

```
<body>
  <div id = header>
  <div id = menu>
  <div id = keildo>
    <iframe src=...>
    </iframe>
  </div>
</body> 
```

在这里，我们通过点击里面的某个按钮来渲染页面`iframe`，我们隐藏了它`iframe`并显示`iframe`了一些不同的内容。但是在单击该按钮时，当我们显示 diff`iframe`时`div`（kailedo 向上移动），因此 div 标题和菜单不可见。但是，如果通过 Firebug，如果 m 改变高度或 kaildo 溢出`div`，那么所有 div 都是可见的。

这在所有其他浏览器中都可以正常工作。

# vba - EXCEL VBA根据其他单元格值计算列表中的总和

> ID：14397238
> 
> 赞同：0
> 
> 时间：2013-01-18T10:46:02.350
> 
> 标签：vba, excel

我正在寻找一种在 VBA 中根据另一个单元格的值来总结值的方法

示例源表：

```
 BillNr   Pos   Value

  200        0  sum
  200        1  10,00 €
  200        2  15,00 €
  200        3  31,00 €
  200        4  21,00 €
  200        5  19,00 €
  200        6  81,00 €
  201        0  sum
  201        1  14,00 €
  201        2  18,00 €
  212        0  sum
  212        1  31,00 €
  212        2  19,00 €
  212        3  78,00 € 
```

根据`BillNr`VBA 代码中的数字，应将所有值相加`Value`并显示`Number`在被调用的单元格中`sum`。实际上，列表是关于`15000`行长的，所以我想它需要被包裹在循环中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:18:06.733

随便挑吧：）

**VBA**

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim aCell As Range, bCell As Range
    Dim ExitLoop As Boolean

    '~~> Change this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Find "sum" in Col C
        Set aCell = .Columns(3).Find(What:="sum", LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)
        If Not aCell Is Nothing Then
            Set bCell = aCell

            '~~> If found Calculate the sum
            aCell.Value = Application.Evaluate("=SUMIF(A:A,A" & aCell.Row & ",C:C)")

            '~~> Find the next "Sum"
            Do While ExitLoop = False
               Set aCell = .Columns(3).FindNext(After:=aCell)

               If Not aCell Is Nothing Then
                   If aCell.Address = bCell.Address Then Exit Do
                   aCell.Value = Application.Evaluate("=SUMIF(A:A,A" & aCell.Row & ",C:C)")
               Else
                   ExitLoop = True
               End If
            Loop
        End If
    End With
End Sub 
```

***截屏***

![在此处输入图像描述](../Images/2790de7cbd6cbf7732e661db7ce148a6.png)

**非 VBA（使用 Pivot 和 Vlookup）**

创建 Pivot 后，我`Vlookup`​​在 Col D 中使用。您可以设置`Autofilter`进行`Col C`过滤`sum`，然后将公式放入相关单元格中`Col C`

![在此处输入图像描述](../Images/345566502ef973e91481d440744f1232.png)

# java - 如何在 Struts 2 中通过 XML 配置来配置 @SkipValidation

> ID：14397240
> 
> 赞同：1
> 
> 时间：2013-01-18T10:46:04.270
> 
> 标签：java, validation, struts2, annotations, xml-configuration

在 Struts 2 中，

我正在尝试跳过基于 XML 配置的方法验证。根据我的应用程序，我不能使用注释。所以我不能使用`@SkipValidation`注释。有没有其他选择？

我有一个动作类，它有五种方法`create`、、、、和。我只想验证两种方法和.`update``delete``search``view``create``update`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:52:04.553

您必须`validation`为您的操作配置拦截器以排除您不想验证的方法名称。

```
<action name="..."  class="...">
  <interceptor-ref name="defaultStack">
    <param name="validation.excludeMethods">input,back,cancel,browse,delete,search,view</param>
  </interceptor-ref>
  <result>...</result>
</action> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:37:40.857

您应该在 struts.xml 包中配置拦截器

```
<interceptors>
  <interceptor-stack name="validateWorkflowStack">
    <interceptor-ref name="basicStack"/>
<!-- ... whatever interceptors -->
    <interceptor-ref name="validation">
      <param name="excludeMethods">delete, search, view</param>
    </interceptor-ref>
    <interceptor-ref name="workflow"/>
  </interceptor-stack>
</interceptors> 
```

然后使用动作配置

```
<action name="create" class="your.package.CreateAction" method="create">
    <result name="input">/path/to/form.jsp</result>
    <interceptor-ref name="validateWorkflowStack"/>
</action> 
```

`<default-interceptor-ref`将拦截器应用于每个操作，该操作具有在操作上显式引用或通过包 隐式引用的验证拦截器。

# ios - UIIMagePickerController 在 iPad ios 6.0 上关闭时崩溃

> ID：14397242
> 
> 赞同：6
> 
> 时间：2013-01-18T10:46:13.070
> 
> 标签：ios, ipad, uiviewcontroller, uiimagepickercontroller

我在装有 iOS 6.0 的 iPad 4 上工作。

我有一个带有以下初始化的 ViewController (MyPickerController)：

```
- (id)init
{
    self = [super init];
    if (self) {
        _picker = [[UIImagePickerController alloc] init];
        _picker.delegate = self;
        _picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        [self.view addSubview:_picker.view];
    }
    return self;
} 
```

我实现了以下 UIPickerControllerDelegate 方法来关闭 MyPickerController：

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

好吧，我有另一个视图控制器以模态方式显示`FormSheetStyle`，当我点击一个按钮时，我想`MyPickerController`用以下代码显示：

```
MyPickerController * pickerVC = [[MyPickerController alloc] init];
[self presentViewController:pickerVC animated:YES completion:nil]; 
```

在我的 AppDelegate 我有以下 totation 方法：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {

    return (NSUInteger)[application supportedInterfaceOrientationsForWindow:window] | (1<<UIInterfaceOrientationPortrait);

} 
```

当我点击`UIIMagePicker`into`MyPickerController`的取消按钮时，应用程序崩溃并出现以下错误：

```
Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation', reason: 'preferredInterfaceOrientationForPresentation must return a supported interface orientation! 
```

阅读有关 stackoverflow 的相关问题，我还创建了以下 UIImagePickerController 类别：

```
@implementation UIImagePickerController (NonRotating)

- (BOOL)shouldAutorotate
{
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:55:22.487

尝试这样做..

如果您的视图控制器位于 UINavigationController 中，则应将此类别用于导航控制器：

```
@implementation UINavigationController (autorotate)

- (NSUInteger)supportedInterfaceOrientations{
      return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
      return UIInterfaceOrientationMaskPortrait;
}

@end 
```

# php - 当地址字符串中存在哈希符号时，Google Maps API 超出内存限制

> ID：14397243
> 
> 赞同：0
> 
> 时间：2013-01-18T10:46:13.910
> 
> 标签：php, google-maps, memory-limit

我正在使用 GoogleMaps API 来获取地址的经纬度，但奇怪的`#`是，当字符串中存在符号时，Google Maps 会导致 PHP 内存不足......

编码：

```
//some attempted addresses: "1234 Memory Lane Suite #1", "4321 Test Dr #4", "#" 
$this->address = htmlentities($_POST['address']);
    $googlemaps = new GoogleMaps(GOOGLE_MAPS_API_KEY);
    $coordinates = $googlemaps->getCoordinates(
        'UNITED STATES, ' . 
        $this->state . ', ' . 
        $this->city . ', ' .
        $this->address
    ); 
```

错误：

```
Allowed memory size of 268435456 bytes exhausted (tried to allocate 19574456 bytes) 
```

当我去掉英镑符号时，一切正常。只是有点好奇谷歌的哈希符号有什么问题？

这是API的源代码，很短：

```
class GoogleMaps {

    /**
    * The Google Maps API key holder
    * @var string 
    */
    private $mapApiKey;

    /**
    * Class Constructor
    */
    public function __construct() {
    }

    /**
    * Reads an URL to a string
    * @param string $url The URL to read from
    * @return string The URL content
    */
    private function getURL($url){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_URL, $url);
        $tmp = curl_exec($ch);
        curl_close($ch);
        if ($tmp != false){
            return $tmp;
        }
    }

    /**
    * Get Latitude/Longitude/Altitude based on an address
    * @param string $address The address for converting into coordinates
    * @return array An array containing Latitude/Longitude/Altitude data
    */
    public function getCoordinates($address){
        $address = str_replace(' ','+',$address);
        $url = 'http://maps.google.com/maps/geo?q=' . $address . '&output=xml';
        $data = $this->getURL($url);
        if ($data){
            $xml = new SimpleXMLElement($data);
            $requestCode = $xml->Response->Status->code;
            if ($requestCode == 200){
                //all is ok
                $coords = $xml->Response->Placemark->Point->coordinates;
                $coords = explode(',',$coords);
                if (count($coords) > 1){
                    if (count($coords) == 3){
                        return array('lat' => $coords[1], 'long' => $coords[0], 'alt' => $coords[2]);
                    } else {
                        return array('lat' => $coords[1], 'long' => $coords[0], 'alt' => 0);
                    }
                }
            }
        }
        //return default data
        return array('lat' => 0, 'long' => 0, 'alt' => 0);
    }

}; //end class` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:14:29.660

使用 编码地址`urlencode()`，否则输出参数将被忽略，因为 google 将 # 作为锚点处理，而不是 q 参数的一部分，并且响应将是 json 而不是 xml

# c++ - 链接到 boost::program_options 无法正常工作

> ID：14397246
> 
> 赞同：6
> 
> 时间：2013-01-18T10:46:17.740
> 
> 标签：c++, boost, linker, boost-program-options

存在以下库文件：

```
cls /usr/local/Cellar/boost/1.51.0/lib $ ls libboost_program*
libboost_program_options-mt.a       libboost_program_options-mt.dylib 
```

我包含以下标题`#include <boost/program_options.hpp>`：

```
cls /usr/local/Cellar/boost/1.51.0/include $ ls boost/program_options.hpp
boost/program_options.hpp 
```

我尝试将库与

```
-lboost_program_options-mt
-L/usr/local/Cellar/boost/1.51.0/lib 
```

（我假设库的名称是从文件名减去“lib”和文件结尾得出的。如果我尝试名称`boost_program_options`（不带`-mt`），我得到`ld: library not found for -lboost_program_options`）

这是我使用库的主要功能：

```
#include <boost/program_options.hpp>
#include <iostream

int main(int argc, char **argv) {

    namespace opts = boost::program_options;

    opts::options_description desc("EnsembleClustering options");
    desc.add_options()
            ("hello", "produce greeting");

    opts::variables_map vmap;
    opts::store(opts::parse_command_line(argc, argv, desc), vmap);
    opts::notify(vmap);

    if (vmap.count("hello")) {
        std::cout << "Hello World" << std::endl;
    }
} 
```

为什么这个设置会给我一个`symbol(s) not found`错误？

```
make all 
Building target: EnsembleClustering-DPar
Invoking: MacOS X C++ Linker
/usr/local/bin/g++-4.7 -L"/Users/cls/workspace/STINGER/OpenMP Debug" -L"/Users/cls/workspace/gtest/lib" -L/usr/local/Cellar/log4cxx/0.10.0/lib -L/usr/local/Cellar/boost/1.51.0/lib -fopenmp -std=c++11 -o "EnsembleClustering-DPar"  ./src/scoring/EdgeScoring.o ./src/scoring/ModularityScoring.o  ./src/overlap/test/OverlapGTest.o  ./src/overlap/Overlapper.o ./src/overlap/RegionGrowingOverlapper.o  ./src/matching/Matcher.o ./src/matching/Matching.o ./src/matching/ParallelMatcher.o  ./src/io/test/InputGTest.o  ./src/io/CSVWriter.o ./src/io/GraphFromAdjacencies.o ./src/io/GraphIO.o ./src/io/GraphReader.o ./src/io/METISGraphReader.o ./src/io/METISParser.o ./src/io/METISToGraph.o  ./src/graph/test/GraphGTest.o ./src/graph/test/STINGERGTest.o  ./src/graph/Graph.o ./src/graph/GraphGenerator.o  ./src/ensemble/test/EnsembleGTest.o  ./src/ensemble/EnsembleClusterer.o  ./src/coarsening/test/CoarseningGTest.o  ./src/coarsening/ClusterContracter.o ./src/coarsening/ClusteringProjector.o ./src/coarsening/Contracter.o ./src/coarsening/GraphContraction.o ./src/coarsening/MatchingContracter.o  ./src/clustering/test/ClusteringGTest.o  ./src/clustering/base/Clustering.o ./src/clustering/base/ClusteringGenerator.o ./src/clustering/base/Modularity.o ./src/clustering/base/QualityMeasure.o  ./src/clustering/algo/test/ClusteringAlgoGTest.o  ./src/clustering/algo/Clusterer.o ./src/clustering/algo/LabelPropagation.o ./src/clustering/algo/ParallelAgglomerativeClusterer.o  ./src/aux/test/AuxGTest.o  ./src/aux/Noise.o ./src/aux/RandomInteger.o ./src/aux/RandomProbability.o ./src/aux/Timer.o  ./src/EnsembleClustering.o   -lSTINGER -lgtest -llog4cxx -lboost_program_options-mt
Undefined symbols for architecture x86_64:
  "boost::program_options::detail::cmdline::cmdline(std::__debug::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)", referenced from:
      boost::program_options::basic_command_line_parser<char>::basic_command_line_parser(int, char const* const*) in EnsembleClustering.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status
make: *** [EnsembleClustering-DPar] Error 1 
```

编辑：检查库文件`lipo`给

```
cls /usr/local/Cellar/boost/1.51.0/lib $ lipo -detailed_info libboost_program_options-mt.a libboost_program_options-mt.dylib 
input file libboost_program_options-mt.a is not a fat file
input file libboost_program_options-mt.dylib is not a fat file
Non-fat file: libboost_program_options-mt.a is architecture: x86_64
Non-fat file: libboost_program_options-mt.dylib is architecture: x86_64 
```

我想链接静态库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:49:14.487

## **阅读错误信息**

```
Undefined symbols for architecture x86_64:
  "boost::program_options::detail::cmdline::cmdline(std::__debug::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)", referenced from:
      boost::program_options::basic_command_line_parser<char>::basic_command_line_parser(int, char const* const*) in EnsembleClustering.o 
```

它非常清楚地说，**缺少符号`std::__debug::vector`**，请注意`std::__debug`命名空间是这里的关键。我怀疑您已经使用迭代器调试构建了源代码，`-D_GLIBCXX_DEBUG`但正在尝试链接一个没有的库，例如 boost 程序选项。您没有向我们展示您是如何构建翻译单元的，所以这里有一个[sscce](http://coliru.stacked-crooked.com/view?id=3df10c72ae3c83fa2b3b34929605324f-6b67ab5871989e18c441dfd6c81d8b56)：

```
$ g++-4.8 -std=c++11 -O2 -pthread main.cpp -D_GLIBCXX_DEBUG -lboost_program_options && ./a.out
/tmp/cca1jwUx.o: In function `boost::program_options::basic_command_line_parser<char>::basic_command_line_parser(int, char const* const*)':
main.cpp:(.text._ZN5boost15program_options25basic_command_line_parserIcEC2EiPKPKc[_ZN5boost15program_options25basic_command_line_parserIcEC5EiPKPKc]+0x319): undefined reference to `boost::program_options::detail::cmdline::cmdline(std::__debug::vector<std::string, std::allocator<std::string> > const&)'
collect2: error: ld returned 1 exit status 
```

有几种方法可以解决这个问题

*   从包括程序选项标题的翻译单元中删除`-DGLIBCXX_DEBUG`标志。
*   请咨询您的 boost 包维护者，看看他们是否提供使用`-D_GLIBCXX_DEBUG`. Linux 上的某些变体可以，您可能会询问 MacPorts 或 brew 用户邮件列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:13:54.933

由于您要指定包含、库的位置并提供适当`.dylib`的 ，我能想到的唯一问题是您要链接到的库中没有 x86_64 拱门。

尝试使用`file`或检查库`lipo`。如果它没有显示 x86_64，那就是问题所在。

# asp.net-mvc - 带有枚举的下拉列表

> ID：14397247
> 
> 赞同：-2
> 
> 时间：2013-01-18T10:46:18.263
> 
> 标签：asp.net-mvc, dropdownlistfor

尝试将枚举集合传递给 DropDownList 时出现错误。

该集合的类型为 IEnumerable。

错误状态：“无法解析方法 DropDownListFor（lambda 表达式，System.Collections.Generic.IEnumerable”

编码：

```
@Html.DropDownListFor(m => listing.WorkflowStatus, Model.WorkflowStatuses, new { id = listing.WorkflowStatus, onchange = "$(this.form).submit()" }) 
```

我完全被困住了。谁能给我建议可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:00:46.520

看看我做的一个帮手。

[http://jnye.co/Posts/4/creating-a-dropdown-list-from-an-enum-in-mvc-and-c%23](http://jnye.co/Posts/4/creating-a-dropdown-list-from-an-enum-in-mvc-and-c%23)

你需要把它们变成一个选择列表

在您的控制器中，将您的枚举转换为 IEnumerable 并将其添加到您的 ViewBag 中，然后在您的视图中引用它

控制器：

```
ViewBag.WorkflowStatuses = EnumHelper.SelectListFor(WorkflowStatus.Option1); 
```

在视图中（类似于....）

```
@Html.DropDownListFor(m => listing.WorkflowStatus, ViewBag.WorkflowStatuses as IEnumerable<SelectListItem>..... 
```

# javascript - 单击时按文本、日期和价格对表格进行排序

> ID：14397248
> 
> 赞同：-3
> 
> 时间：2013-01-18T10:46:18.800
> 
> 标签：javascript, html

我需要通过单击标题来排序表。我只能使用**本机 js**。

```
<table>
 <tr>
  <th>First Name</th>
  <th>Date of Birth</th>
  <th>Salary</th>
 </tr> 
```

*名字*(John) - 对文本进行排序。 *日期*（1984 年 7 月 23 日）- 排序日期。 *薪水*($69000) - 排序号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:54:08.547

你想对原生 js 说什么？..不是插件？您可以检查已发布的问题[使用 Javascript 或 jQuery 按其第一列快速排序表](https://stackoverflow.com/questions/7558182/sort-a-table-fast-by-its-first-column-with-javascript-or-jquery)

小提琴 [ [http://jsfiddle.net/qNwDe/][1]](http://jsfiddle.net/qNwDe/][1])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:58:46.803

你可以试试[DataTables](http://www.datatables.net/)。它可以根据表格标题进行排序，并且还有其他选项，请查看站点中的示例。

# jsf-2 - Openfaces 数据表问题：抛出异常（com.sun. faces.face lets.compi ler.UIInst ructions）

> ID：14397257
> 
> 赞同：1
> 
> 时间：2013-01-18T10:46:38.527
> 
> 标签：jsf-2, facelets, openfaces, state-saving

我在 weblogic server 12c 上运行的 web 应用程序中使用 myfaces 2.1.10 faces 引擎和 open faces 3.1 (openfaces-3.1.EA1.1198.jar)。Web 应用程序使用 facelets 模板来加载页眉/内容/页脚页面 (.xhtml)。

在内容页面中，我放置了一个输入文本字段以及一个搜索按钮以及 openfaces 的数据表。当我输入要搜索的文本然后通过单击搜索按钮时，系统会返回一些数据并填充我放置在同一页面中的 openfaces 数据表组件，但是当我再次尝试搜索时，我收到了如下粘贴的异常。我相信这个问题是由 openfaces 数据表引起的，因为当我用 jsf 数据表替换时，一切正常。我必须使用 openfaces 数据表，因为它适合我对分页、过滤等的要求。

对于 Clarity，我将粘贴来自 web.xml 和内容页面 (roleMaintenance.xhtml) 的代码片段。

提前感谢您的所有帮助和支持。

## 网页.xml：

```
<context-param>
<description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
<param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
        <param-value>/pages/roleMaintenance.xhtml</param-value>
    </context-param>
    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

## 角色维护.xhtml：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:t="http://myfaces.apache.org/tomahawk"
xmlns:o="http://openfaces.org/">
<ui:composition
template="/resources/common/templates/rsaMasterTemplate.xhtml">
<ui:define name="content">
<f:view>
<table width="100%">
<tr>
<td>
<table width="50%"><tr>
<td><h:outputLabel styleClass="fieldLabelText"
value="#{message['application.common.label.searchBy']}"/>
</td>

<td><h:selectOneMenu class="entryfieldText"
value="#{securityRoleMaintenanceManagedBean.selectedSearchCriteria}">
<f:selectItem itemValue="Role" itemLabel="Role" />
<f:selectItem itemValue="Desc" itemLabel="Desc" />
</h:selectOneMenu></td>

<td><h:inputText size="30" class="entryfieldText"
value="#{securityRoleMaintenanceManagedBean.searchValue}">
</h:inputText></td>

<td><h:commandLink
action="#{securityRoleMaintenanceManagedBean.search}"
styleClass="buttonOrange">
<span><h:outputText
value="#{message['application.common.button.search']}" /></span>
</h:commandLink></td>
<td class="cellSpacer"></td>

<td colspan="5"><o:dataTable id="dTbl_RM"
value="#{securityRoleMaintenanceManagedBean.roleDtos}"
var="role" rowIndexVar="rowIndex"
horizontalGridLines="1px solid gray"
verticalGridLines="1px solid gray">
<o:scrolling autoScrollbars="true" />
<o:row condition="#{rowIndex%2 == 0}"
styleClass="standardTable_Row2" />
<o:column>
<f:facet name="header">
<h:outputText
value="#{message['application.security.roleadmin.label.role']}"
styleClass="scrollerTable headerText" />
</f:facet>
<h:outputText align="center" value="#{role.role}"
styleClass="scrollerTable cellText" />
</o:column>
<o:column>
<f:facet name="header">
<h:outputText
value="#{message['application.security.roleadmin.label.description']}"
styleClass="scrollerTable headerText" />
</f:facet>
<h:outputText align="center" value="#{role.description}"
styleClass="scrollerTable cellText" />
</o:column>
<o:column>
<f:facet name="header">
<h:outputText
value="#{message['application.common.label.actions']}"
styleClass="scrollerTable headerText" />
</f:facet>

<table>
<tr>
<td><h:commandLink
actionListener="#{securityRoleMaintenanceManagedBean.displayEditRole}"
value="#{message['application.common.link.edit']}"
styleClass="scrollerTable cellText">
<f:attribute name="selection" value="#{role}" />
</h:commandLink></td>

<td class="cellSpacer"></td>
<td class="cellSpacer"></td>
<td>
<div>
<h:commandLink
onclick="if (! confirm('Really delete this?') ) { return false;}; return true; "
actionListener="#{securityRoleMaintenanceManagedBean.deleteRole}"
value="#{message['application.common.link.delete']}"
styleClass="scrollerTable cellText">
<f:attribute name="selection" value="#{role}" />
</h:commandLink>

</div>
</td>
</tr>
</table>
</o:column>
</o:dataTable></td>
</tr>
</table>
</h:panelGroup></td>
</tr>
</table>
</td>
</tr>

</table>
</f:view>
</ui:define>
</ui:composition>
</html> 
```

## 错误打印堆栈跟踪

```
 java.lang.InstantiationException: com.sun.faces.facelets.compiler.UIInstructions
at java.lang.Class.newInstance0(Class.java:340)
at java.lang.Class.newInstance(Class.java:308)
at   com.sun.faces.application.StateManagerImpl.newInstance(StateManagerImpl.java:296)
at com.sun.faces.application.StateManagerImpl.restoreTree(StateManagerImpl.java:326)
at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:203)
at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:242)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:216)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:132)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:338)
at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
at org.openfaces.util.ResourceFilter.doFilter(ResourceFilter.java:41)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3288)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3254)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57)
at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2163)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2089)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1513)
at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:254)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:16:18.303

此错误是由禁用的部分状态保存引起的。如果您从`web.xml`

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
    <param-value>/pages/roleMaintenance.xhtml</param-value>
</context-param> 
```

那么理论上它应该可以工作。

这本质上是 OpenFaces 中的一个错误。它以某种方式强制进入非瞬态状态，而它必须是瞬态的。RichFaces 4.2.0 以前有过这样的错误，[此 JBoss 社区线程](https://community.jboss.org/message/783414)中有详细说明。另请参阅以下相关摘录：

> 因此，在编码期间 - 的所有子级`UIOutputPanel`都设置为非瞬态（甚至`UIInstructions`类型的节点）。
> 
> 解决方法：
> 
> ```
> public class UIOutputPanelWorkaround extends UIOutputPanel
> {
>   public boolean isKeepTransient() {
>     Boolean value = (Boolean) getStateHelper().eval(Properties.keepTransient, false);
>     return value;
>   }
> } 
> ```
> 
> 并在`faces-config`：
> 
> ```
>  <component>
>     <component-type>org.richfaces.OutputPanel</component-type>
>     <component-class>com.example.UIOutputPanelWorkaround</component-class>
>   </component> 
> ```

似乎此错误已作为[问题 206](http://requests.openfaces.org/browse/OF-206)报告给 OpenFaces ，但似乎没有任何进展。您可能想要评论/投票以推动它。或者只是重新打开部分状态保存。无论您想通过禁用部分状态保存来解决什么问题，都可能需要以不同的方式解决。

# java - 正则表达式前瞻和后视匹配

> ID：14397263
> 
> 赞同：2
> 
> 时间：2013-01-18T10:46:55.347
> 
> 标签：java, regex

我需要获取一个字符串并提取模式的每个实例，并且只提取模式。

`String test = "This is a test string to experiment with regex by separating every instance of the word test and words that trail test";`

所以现在模式必须找到单词`test`以及它前面和后面没有的任何单词`test`。所以基本上它必须导致找到这种模式的 3 个实例。

我期待的3个结果如下：

1.  `This is a test string to experiment with regex by separating every instance of the word`
2.  `test and words that trail`
3.  `test`

我在[gskinner](http://gskinner.com/RegExr/)上玩过积极的前瞻和消极的前瞻，但还没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:59:02.293

试试这个

```
(\s*\b(?!test\b)[a-z]+\b\s*)*test(\s*\b(?!test\b)[a-z]+\b\s*?)* 
```

[在 Regexr 上](http://regexr.com?33eto)查看。

在 Java 中，我会替换`[a-z]`为`\p{L}`，但 regexr 不支持 Unicode 属性。`\p{L}`是[带有属性 letter 的 Unicode 代码点](http://www.regular-expressions.info/unicode.html#prop)，这将匹配任何语言的每个字母。

**解释：**

`(\s*\b(?!test\b)[a-z]+\b\s*)*`正在匹配一系列不是“测试”的单词。这是由否定的前瞻断言来保证的`(?!test\b)`。

`test`匹配“测试”

最后再次相同：再次匹配一系列不是“测试”的单词`(\s*\b(?!test\b)[a-z]+\b\s*?)*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:48:04.557

为了跟进我的评论，我可以想象将您的测试字符串与模式分开`\btest\b`，然后将字符串部分左右连接

```
String parts[] = test.split("\btest\b", -1);
for (int i = 0; i < parts.length - 1; ++i)
    System.out.println(parts[i] + "test" + parts[i + 1]); 
```

# iphone - 无法从代表发布到 Facebook

> ID：14397272
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:47:24.427
> 
> 标签：iphone, ios, facebook, facebook-graph-api, social-networking

我已经在我的项目中添加了 FBSdk 以及 SBJson 类，我应该在我的第二个视图控制器中导入哪些文件来运行我的代码？

我想使用 url 下的描述在 Fb 上发布，因此我需要将此代码包含到我的第二个视图控制器中，但我陷入了我发现以下代码应该添加到第二个视图控制器中的部分，但是“委托：自我”不起作用，因为我是第一次这样做，所以任何人都可以指导我如何在我的第二个视图控制器中编码，同时考虑到应用程序委托的值（我应该如何从应用程序委托中获取值FB 到第二个视图，以便我可以在第二个代码中添加此代码，请任何人都可以更正此代码）

```
facebook = [[Facebook alloc] initWithAppId:@"YOUR_APP_ID"]; 
```

**// 我应该如何从应用程序委托中获取这个 id？**

```
 NSArray* permissions =  [NSArray arrayWithObjects:@"read_stream", 
 @"publish_stream", nil];
[facebook authorize:permissions delegate:self];

   NSMutableDictionary* params = [[NSMutableDictionary alloc] 
initWithCapacity:1]
 [params setObject:@"Testing" forKey:@"name"];
  [params setObject:@"IMAGE_URL" forKey:@"picture"];
   [params setObject:@"Description" forKey:@"description"];
  [facebook requestWithGraphPath:@"me/feed" 
    andParams:params 
  andHttpMethod:@"POST" 
   andDelegate:self]; 
```

上面的代码正确吗？我应该如何在 -(void)fb_share （方法）中的第二个视图控制器中实现它。

我的应用程序委托文件是这样的：

```
#import "AppDelegate.h"
#import "ViewController.h"
#import "ServerRequests.h"
#import "DBManager.h"
#import "SBJson.h"

#include "FBSession.h"
#import "FBRequest.h"
#import "FBGraphUser.h"

NSString *const FBSessionStateChangedNotification = @"com.myapp:FBSessionStateChangedNotification";

@implementation AppDelegate

@synthesize userId;
@synthesize dbSnyced;
@synthesize fbId;
@synthesize loginView;

- (void)dealloc
{
    [_window release];
    [_viewController release];
    [super dealloc];
}

 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   self.fbId = @"-1";
    self.dbSnyced = NO;
    self.loginView = nil;

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.navigationController = [[[UINavigationController alloc] initWithRootViewController:self.viewController] autorelease];
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];    

    if (![self openSessionWithAllowLoginUI:NO]) {

        [self showLogin:NO];
    }

    return YES;
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

    [self checkAccountLogin];
}

- (void) applicationDidEnterBackground:(UIApplication *)application
{
    [self hideLogin:NO];
}

- (void)  applicationWillTerminate:(UIApplication *)application
{
    NSLog(@"applicationWillTerminate");
    [self hideLogin:NO];
    [FBSession.activeSession close];
}

- (void) checkAccountLogin
{
    self.dbSnyced = NO;
    if([ServerRequests serverIsReachableAlertIfNo:YES]) {

        DBManager *db = [[[DBManager alloc] initWithPath:DB_NAME] autorelease];
        NSDictionary *userDic = [[db smartQueryForArrayWithStatement:@"SELECT * FROM table WHERE id=1"] objectAtIndex:0];
        NSString *loginType = [userDic objectForKey:@"login_type"];
        if([loginType isEqualToString:@"none"]) {
            NSLog(@"no login type");
            [self showLogin:NO];
        }
        else {
            self.userId = [[userDic objectForKey:@"user_id"] intValue];
            if([loginType isEqualToString:@"Facebook"]) {
                NSLog(@"Facebook account");

                [FBSession.activeSession handleDidBecomeActive];
            }
            else if([loginType isEqualToString:@"MyApp"]) {
                NSLog(@"MyApp account");
            }
        }
    }
}

#pragma - Fb stuff

/*
 * Callback for session changes.
 */
- (void)sessionStateChanged:(FBSession *)session state:(FBSessionState) state error:(NSError *)error
{
    NSLog(@"sessionStateChanged");
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                [self handleFbUserDetails];
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:FBSessionStateChangedNotification object:session];

    if (error) {
        NSLog(@"error: %@", error.localizedDescription);
        if(self.loginView) {
            [self.loginView hideLoading];
        }

    }
}

/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];
}

/*
 * If we have a valid session at the time of openURL call, we handle
 * Facebook transitions by passing the url argument to handleOpenURL
 */
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url];
}

- (BOOL) activeFBSession
{
    return FBSession.activeSession.isOpen;
}

- (void) closeFBSession
{
    NSLog(@"closeFBSession");
    [FBSession.activeSession closeAndClearTokenInformation];
}

- (void) showLogin:(BOOL)animated
{
    if(!self.loginView) {
        self.loginView = [[[LoginViewController alloc] init] autorelease];
        [[self.navigationController topViewController] presentViewController:self.loginView animated:animated completion:nil];
    }
}

- (void) hideLogin:(BOOL)animated
{
    if(self.loginView) {
        [self.viewController gotToTab:0];
        [self.loginView hideLoading];
        [[self.navigationController topViewController] dismissViewControllerAnimated:animated completion:^{
            self.loginView = nil;
            NSLog(@"self.loginView = nil");
        }];
    }
}

- (void) handleFbUserDetails
{
    [[FBRequest requestForMe] startWithCompletionHandler:
     ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
         if (!error) {
             NSLog(@"fb connected");

             self.fbId = [user objectForKey:@"id"];
             self.userId = -1;             

             ASIFormDataRequest *request = [ServerRequests ASIFormDataRequestForSrcipt:@"facebookUser"];
             [request setPostValue:[user objectForKey:@"id"] forKey:@"fbId"];
             [request setPostValue:user.first_name forKey:@"first_name"];
             [request setPostValue:user.last_name forKey:@"last_name"];
            [request setPostValue:user.location.name forKey:@"location"];
             [request setCompletionBlock:^{
                 NSString *response = [request responseString];
                 NSLog(@"facebookUser response: %@", response);
                 if([response rangeOfString:@"ERROR"].location == NSNotFound) {
                     self.userId = [response intValue];

                     DBManager *db = [[DBManager alloc] initWithPath:DB_NAME];
                     NSString *q = [NSString stringWithFormat:@"UPDATE table SET login_type = 'Facebook', user_id = '%@' WHERE id = 1", response];
                     NSLog(@"%@", q);
                     [db executeStatement:q];
                     [db release];                     
                 }
                 else {                     

                 }
                 [self sessionBecameActive];
             }];
             [request startAsynchronous];
             [self hideLogin:YES];
         }
         else {
             NSLog(@"error: %@", error.localizedDescription);
             UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook Request Error" message:@"Cannot connect to Facebook." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

             alert.delegate = self;
             [alert show];
             [alert release];
             if(self.loginView) {
                 [self.loginView hideLoading];
             }
         }
         [ServerRequests SyncDataBase];
     }];
}

- (void) signOut
{
    [self closeFBSession];
    DBManager *db = [[DBManager alloc] initWithPath:DB_NAME];
    [db executeStatement:@"UPDATE table SET login_type = 'none' WHERE id = 1"];
    [db release];
    [self showLogin:YES];
}

- (void) sessionBecameActive
{
    [self.viewController sessionBecameActive];
}

@end 
```

任何人都可以通过从委托中获取值来弄清楚我应该在第二个视图控制器的 -(void)fb_share 方法中编写什么代码吗？任何帮助！

* * *

我这样做了......并得到错误：HTTP状态代码：400......但用户名显示在警报中

```
 [[FBRequest requestForMe] startWithCompletionHandler:
    ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
        if (!error) {

       //     NSArray* permissions =  [NSArray arrayWithObjects:@"read_stream",
          //                           @"publish_stream", nil];
           // [facebook authorize:permissions delegate:self];

          self.params =  [[NSMutableDictionary alloc] initWithObjectsAndKeys:
             @"https://developers.facebook.com/ios", @"link",
             @"https://developers.facebook.com/attachment/iossdk_logo.png", @"picture",
            @"Facebook SDK for iOS", @"name",
            @"Build great social apps and get more installs.", @"caption",
            @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
             nil];

            UIAlertView *tmp = [[UIAlertView alloc]
                                initWithTitle:@"Upload to FB?"
                                message:[NSString stringWithFormat:@"Upload to ""%@"" Account?", user.name]
                                delegate:self
                                cancelButtonTitle:nil
                                otherButtonTitles:@"No",@"Yes", nil];

            [FBRequestConnection startWithGraphPath:@"me/feed"
                                          parameters:self.params
                                          HTTPMethod:@"POST"
                                   completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                       if (!error) {
                                           UIAlertView *tmp = [[UIAlertView alloc]
                                                               initWithTitle:@"Success"
                                                               message:@"PostUploaded"
                                                               delegate:self
                                                               cancelButtonTitle:nil
                                                               otherButtonTitles:@"Ok", nil];

                                           [tmp show];
                                           [tmp release];
                                       }
                                   }];

            [tmp show];
            [tmp release];

                   }
    }]; 
```

.. 我现在该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:56:27.807

声明`facebook`为`property in .h`您的文件`appDelegate`

然后在`second view controller`导入`AppDelegate`

在您想要 Facebook 对象的 .m 文件中

得到它喜欢

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
Facebook *facebook = appDelegate.facebook; 
```

# ios - Rss feeds日期格式错误xcode ios

> ID：14397273
> 
> 赞同：0
> 
> 时间：2013-01-18T10:47:27.750
> 
> 标签：ios, xcode, rss

嗨，谁能帮我解决这个错误：

而 rss feed parsing.it 在 tableview 单元格中显示 null 并导致应用程序崩溃。

无法解析 RFC822 日期：“星期一，2012 年 8 月 27 日 06:00:01 PT” 格式可能无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:17:45.943

根据[RFC822](http://www.w3.org/Protocols/rfc822/#z28)，时区可能应该是 PST，或者符合以下格式：

```
区域=“UT”/“GMT”；世界时
                                            ; 北美：UT
            /“美国东部时间”/“美国东部时间”；东部： - 5/ - 4
            /“CST”/“CDT”；中央： - 6/ - 5
            /“MST”/“MDT”；山： - 7/ - 6
            /“太平洋标准时间”/“太平洋标准时间”；太平洋： - 8/ - 7
            /1阿尔法; 军事：Z = UT；
                                            ; 答：-1；（J 未使用）
                                            ; 男：-12；N:+1; Y:+12
            / ( ("+" / "-") 4DIGIT ) ; 局部差分
                                            ; 小时+分钟。（嗯）

```

# azure - Azure Blob 存储限制和筛选器

> ID：14397275
> 
> 赞同：13
> 
> 时间：2013-01-18T10:47:29.887
> 
> 标签：azure, azure-storage, azure-blob-storage

用于多租户应用程序的 Azure 存储。我们正在努力在 Azure 上开发一个多租户应用程序，大约有 10,000 个租户，每个租户需要大约 100 GB 到 1 TB 的数据存储空间。该应用程序将分别维护每个租户的文档和二进制内容以及元数据。我们正在考虑使用 Azure Block Blob 存储来存储数据。由于要求是为每个租户单独维护数据，因此我们遇到了以下方法。

*   为每个租户创建单独的存储帐户
*   这有助于明智地维护使用租户，这也有助于计费
*   在每个存储帐户中创建一个单独的容器以根据类别进行隔离
*   将文档与元数据一起存储在块 Blob 存储中。

我们对我们的方法有以下疑问：

1.  将文档或二进制内容与元数据一起存储在块 blob 中是个好主意吗？或者有没有更好的方法来实现它（可能使用 SQL Azure 获取元数据，使用 blob 获取内容，或者更好）？
2.  如何在元数据上查询具有某些过滤条件的数据？即检索 metadat1 = value1 和 metadata2=value2 的所有 blob
3.  为每个租户创建一个单独的存储帐户是个好主意吗？
    一个。如果不是，那么我们可以将租户特定数据存储在 Azure 存储中并且应用程序可以有效地使用它们的模型是什么？
4.  在可扩展性和高可用性的背景下，在 Blob 存储上读取/写入数据的请求数量是否存在带宽或任何其他限制？
5.  根据 azure 定价模型，他们对存储按平板收费，即前 1 TB 0.095 美元/GB，接下来 49 TB 0.08 美元/GB。此费用是按存储帐户还是按订阅收费？
    一个。同样，交易成本适用于每个存储帐户还是每个订阅？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T11:33:04.320

> 1.  将文档或二进制内容与元数据一起存储在块 blob 中是个好主意吗？或者有没有更好的方法来实现它（可能使用 SQL Azure 获取元数据，使用 blob 获取内容，或者更好）？
> 2.  如何在元数据上查询具有某些过滤条件的数据？即检索 metadat1 = value1 和 metadata2=value2 的所有 blob

要回答 1 和 2，您无法查询 Blob 存储中的元数据。所以我想你最好的选择是使用 SQL Azure 或 Azure 表存储，因为它们都具有查询功能。鉴于您将存储大量 blob（因此甚至更多元数据），我更倾向于表存储，但这需要特殊的设计考虑，例如正确的分区。

> 为每个租户创建一个单独的存储帐户是个好主意吗？一个。如果不是，那么我们可以将租户特定数据存储在 Azure 存储中并且应用程序可以有效地使用它们的模型是什么？

我可以想到为什么每个租户有一个单独的存储帐户是个好主意的 3 个原因：

1.  它简化了您的计费。
2.  它将帮助您维护可扩展性目标。
3.  由于您提到每个租户最多可以存储 1 TB 的数据，鉴于当前的存储帐户限制为 200 TB，您最多只能为每个存储帐户维护 200 个租户。之后，您需要找到另一个存储帐户并开始在那里存储数据。

总而言之，一个非常优雅的解决方案保持单独的存储帐户/租户。挑战在于将默认限制从 20 个存储帐户/订阅增加。您需要与支持人员聊天。

> 在可扩展性和高可用性的背景下，在 Blob 存储上读取/写入数据的请求数量是否存在带宽或任何其他限制？

是的，请阅读 Windows Azure Blob 存储团队的可扩展性目标博客：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability -targets.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)

> 根据 azure 定价模型，他们对存储按平板收费，即前 1 TB 0.095 美元/GB，接下来 49 TB 0.08 美元/GB。此费用是按存储帐户还是按订阅收费？一个。同样，交易成本适用于每个存储帐户还是每个订阅？

不确定这一点，但我猜它是每个存储帐户。您可能需要为此联系支持人员。

希望这可以帮助。

# android - 如何设置按钮的 state_pressed

> ID：14397282
> 
> 赞同：2
> 
> 时间：2013-01-18T10:47:37.577
> 
> 标签：android, android-button

我使用 xml 文件为按钮着色。在 xml 中有这个代码来定义我的按钮被点击时的颜色。

```
 <?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" >
        <shape>
            <gradient
                  android:startColor="@color/mainRaddoppiaButtonBackgroundEnd"
                android:endColor="@color/mainRaddoppiaButtonBackgroundStart"

                android:angle="270" />
            <stroke
                android:width="0dp"
                android:color="@color/mainRaddoppiaButtonBackgroundStart" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>

    <item android:state_focused="true" >
           <shape>
            <gradient
                  android:startColor="@color/mainRaddoppiaButtonBackgroundEnd"
                android:endColor="@color/mainRaddoppiaButtonBackgroundStart"

                android:angle="270" />
            <stroke
                android:width="0dp"
                android:color="@color/mainRaddoppiaButtonBackgroundStart" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>

    <item>        
        <shape>
            <gradient
                android:startColor="@color/mainRaddoppiaButtonBackgroundStart"
                android:endColor="@color/mainRaddoppiaButtonBackgroundEnd"
                android:angle="270" />
            <stroke
                android:width="0dp"
                android:color="@color/mainRaddoppiaButtonBackgroundStart" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

是否可以从 java 中按住我的按钮并使用在我的 xml 文件中设置的“state_pressed”值对其进行着色？

有点像：

```
 public void onClick(View button) {
     button.seLayout(R.xml.xmlFileName.state_pressed)
} 
```

当然这段代码没有任何意义，我只是为了让你明白我想做什么而编造的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:57:08.663

尝试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/btn_pressed"
      android:state_pressed="true"/>
<item android:drawable="@drawable/btn_normal" />
</selector> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:19:57.433

使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)通过代码设置选择器：

```
StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed},getResources().getDrawable(R.drawable.pressed));
states.addState(new int[] {android.R.attr.state_focused},getResources().getDrawable(R.drawable.focused));
states.addState(new int[] { },getResources().getDrawable(R.drawable.normal));

 button.setBackgroundDrawable(states);//FOR BUTTON 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T13:05:32.143

用这个：

```
StateListDrawable states = new StateListDrawable(){
    @Override
    protected boolean onStateChange(int[] stateSet) {
        //
    }
};
itemView.setBackground(states); 
```

# android - 无法将字体大小设置为 TextView 的高度

> ID：14397284
> 
> 赞同：1
> 
> 时间：2013-01-18T10:47:43.957
> 
> 标签：android, textview, android-canvas

在我的应用程序中，我设置了一个 TextView，我注意到文本上方和下方有一些空格，如下图所示。

![在此处输入图像描述](../Images/72a445ec540b34f1f380515961d2d3e4.png)

但我的预期结果是这样的：-

![在此处输入图像描述](../Images/4713935787598f9aa7b9a741d933a783.png)

我用谷歌搜索了很多并找到了这个答案[链接](https://stackoverflow.com/q/2617266/1367157)，但没有任何反应。

**更新 ：**

```
<TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textSize="50dp"
              android:background="#484848"
              android:textColor="#fff"
              android:text="A"
              android:layout_centerInParent="true"/> 
```

这是我用于显示文本的标签。

更新 ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/rl"
    tools:context=".MainActivity" >

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textSize="50dp"
              android:background="#484848"
              android:textColor="#fff"
              android:text="A"
              android:paddingTop="0dp"
              android:layout_centerInParent="true"/>

</RelativeLayout> 
```

**更新图像：**

![在此处输入图像描述](../Images/5ca8315a825169729d36e6071c98fac3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:35:09.737

**实际上，它是9-patch 背景可绘制**的填充，默认情况下用于 Android TextView 背景。你只是为它设置了颜色`#484848`。所以你没有任何解决方案。

根据我的担忧，您的 TextView 使用与`height (android:layout_height)`您的 TextView相同的大小`TextSize (android:textSize="50dip")`。`(instead of android:layout_height="wrap_content")`

试试下面的代码：

```
<TextView android:layout_width="wrap_content"
              android:layout_height="50dip"
              android:layout_marginTop="-5dip"
              android:textSize="50dip"
              android:background="#484848"
              android:textColor="#fff"
              android:text="A"
              android:includeFontPadding="false"
              android:layout_centerInParent="true"/> 
```

我还添加了一些负边距。 `android:layout_marginTop="-5dip"`

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T12:51:53.463

`android:layout_height="wrap_content"`仅在特定时间有效，例如，当您`setHeight(), setWidth(), setText(), setMinHeight(), ...`. 这些方法将请求布局再次包装内容。

但`setTextSize()`不要求布局。

要触发`wrap_content`再次工作，您可以调用`setMinHeight(0)`.

# asp.net - 如何在没有回发的情况下在 asp.net 1.1 中重新绑定数据网格？

> ID：14397285
> 
> 赞同：1
> 
> 时间：2013-01-18T10:47:50.370
> 
> 标签：asp.net, .net, datagrid, .net-1.1, asp.net-1.1

我需要在同一页面上使用 3 个文本框和一个按钮（添加）将值添加到数据网格（3 列）。如果单击添加按钮，值应该附加到数据网格而不刷新/重新加载页面？

请指导我解决这个问题的方法？我用完了搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:20:11.943

您是否考虑过在客户端使用 Ajax？我认为单击“添加”按钮也应该更新后端的某些内容，这意味着您必须进行某种往返。要么通过回发，但由于您不希望这样做，那么唯一的另一个选择是 Ajax，您将向后端进行单独的异步发布，不会导致页面刷新，并在客户端脚本上注入在屏幕上“更新”网格的正确元素。您可以将其作为原型工作，然后使用淘汰赛来简化流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:30:35.603

1) 我在我的默认 aspx 页面中使用了 iframe。2）创建一个新的aspx页面“datagrid.aspx”，并将我的datagrid作为该页面中唯一的控件，并将iframe的src属性设置为“datagrid.aspx” 3）要在datagrid.aspx中呈现的数据表存储在default.aspx 的页面加载中的会话变量。4) 在datagrid.aspx 的页面加载中检索数据表并将其绑定到数据网格。5) 通过设置 iframe 源属性，使用 html 按钮的 onclick 事件 (JS) 从 default.aspx 通过查询字符串参数发送要添加/更新/删除的项目时。

希望这个答案有帮助。如果不清楚，请发表评论。

# sql - 在数据仓库中从星型模式创建视图

> ID：14397286
> 
> 赞同：0
> 
> 时间：2013-01-18T10:47:51.340
> 
> 标签：sql, postgresql, data-warehouse

我们的数据仓库中有很多星型模式。我认为我可以创建视图以简化对数据的 SQL 分析。

损益星的示例 SQL：

```
select
    month_number,
    sum(amount)
from 
    bizdata.dw_daily_pl_fact dwdpf
    join bizdata.dw_distance dwdis on (dwdis.distance_key= dwdpf.distance_key)
    join bizdata.dw_ledger_account dwled on (dwled.ledger_account_key= dwdpf.ledger_account_key)
    join bizdata.dw_party dwpar on (dwpar.party_key= dwdpf.company_key)
    join bizdata.dw_party dwpar2 on (dwpar2.party_key= dwdpf.supplier_key)
    join bizdata.dw_budget_code dwbud on (dwbud.budget_code_key= dwdpf.budget_code_key)
    join bizdata.dw_time dwtim on (dwtim.time_key= dwdpf.time_key)
    join bizdata.dw_project dwpro on (dwpro.project_key= dwdpf.project_key)
where
    year_number = 2012
    and budget_code = 'SALARIES'
group by
    month_number 
```

（这颗星大约有 200 列和 100k 行）

如果我有看法：

```
create or replace view bizdata.dwv_pl_fact as (
select
    *
from 
    bizdata.dw_daily_pl_fact dwdpf
    join bizdata.dw_distance dwdis on (dwdis.distance_key= dwdpf.distance_key)
    join bizdata.dw_ledger_account dwled on (dwled.ledger_account_key= dwdpf.ledger_account_key)
    join bizdata.dw_party dwpar on (dwpar.party_key= dwdpf.company_key)
    join bizdata.dw_party dwpar2 on (dwpar2.party_key= dwdpf.supplier_key)
    join bizdata.dw_budget_code dwbud on (dwbud.budget_code_key= dwdpf.budget_code_key)
    join bizdata.dw_time dwtim on (dwtim.time_key= dwdpf.time_key)
    join bizdata.dw_project dwpro on (dwpro.project_key= dwdpf.project_key)
); 
```

我可以将语句简化为以下内容：

```
select
    month_number,
    sum(amount)
from 
    bizdata.dwv_pl_fact
where
    year_number = 2012
    and budget_code = 'SALARIES'
group by
    month_number 
```

我的问题是 - 这种方法是否存在任何性能或其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:39:02.207

PostgreSQL 中的视图只是一种查询重写机制。因此，您基本上可以假设您的用户提供的条件被合并到视图的定义中并且生成的查询被运行。

从 9.0 开始，规划器甚至应该注意到结果查询中的一些连接是不必要的并跳过它们。在您的情况下，这似乎特别有用。

但是，某些标准可能不会被推送到视图定义中的“内部”子句中——尽管这些条件与您在子查询中看到的相同。例如，带有 order-by + limit 的子查询可以呈现规划器无法看到的边界。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:26:38.033

你没有提到环境。在通用模型中，您的方法似乎还可以，但您错过了一个重要点。请记住，您将所有列都带入该视图。如果有 100 列并且有行链，那将是一场噩梦。所以重写查询并构建视图（dwv_plk_fact），如下所示，你应该没问题。

```
create or replace view bizdata.dwv_pl_fact as (
select
    <table_name>.month_number,
    <table_name>.amount
from 
    bizdata.dw_daily_pl_fact dwdpf
    join bizdata.dw_distance dwdis on (dwdis.distance_key= dwdpf.distance_key)
    join bizdata.dw_ledger_account dwled on (dwled.ledger_account_key= dwdpf.ledger_account_key)
    join bizdata.dw_party dwpar on (dwpar.party_key= dwdpf.company_key)
    join bizdata.dw_party dwpar2 on (dwpar2.party_key= dwdpf.supplier_key)
    join bizdata.dw_budget_code dwbud on (dwbud.budget_code_key= dwdpf.budget_code_key)
    join bizdata.dw_time dwtim on (dwtim.time_key= dwdpf.time_key)
    join bizdata.dw_project dwpro on (dwpro.project_key= dwdpf.project_key)
); 
```

# c# - 从 WPF 中的 DataGridRow 获取列值

> ID：14397291
> 
> 赞同：3
> 
> 时间：2013-01-18T10:48:01.990
> 
> 标签：c#, wpf, wpf-controls, wpfdatagrid

我正在创建一个 WPF 应用程序，当用户单击 DataGrid 的一行时，我需要获取一个 Column 值并使用该值从数据库中获取数据。

我能够找到 DataGridRow 但无法获取列值。这是我的代码...

```
DataGridRow BillRow = sender as DataGridRow; 
```

我将选定的行详细信息放入 BillRow（我可以在 Visualiser 中看到它们），但无法将值放入变量中。你能帮助我吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:06:30.360

以下解决方案可能对您有所帮助

```
 public static DataGridCell GetCell(DataGrid dataGrid, int row, int column)
    {
        DataGridRow rowContainer = GetRow(dataGrid, row);
        if (rowContainer != null)
        {
            DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(rowContainer);

            // try to get the cell but it may possibly be virtualized
            DataGridCell cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            if (cell == null)
            {
                // now try to bring into view and retreive the cell
                dataGrid.ScrollIntoView(rowContainer, dataGrid.Columns[column]);

                cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            }

            return cell;
        }

        return null;
     } 
```

# php - 从 QuickBooks (PHP WebKit) 导入客户

> ID：14397293
> 
> 赞同：2
> 
> 时间：2013-01-18T10:48:08.733
> 
> 标签：php, quickbooks, qwebkit, qbxml

对于查询，我使用 QB WebKit，所以我的查询如下所示：

```
$customer = new QuickBooks_Object_Customer();
$customer->set(...);
return QBXML_START . $customer->asQBXML('CustomerQueryRq') . QBXML_END; 
```

但是对于迭代器方法它不起作用。所以我使用明文方法：

```
return '<?xml version="1.0" encoding="utf-8"?>
<?qbxml version="5.0"?>
<QBXML>
<QBXMLMsgsRq onError="continueOnError">
<CustomerQueryRq requestID="' . $requestID . '" iterator="'. $iterator .'">
<MaxReturned>5</MaxReturned>
<OwnerID>0</OwnerID>
</CustomerQueryRq>
</QBXMLMsgsRq>
</QBXML>'; 
```

如果 MaxReturned < then 在 Book 中，此方法返回错误。

请帮我为 Quickbooks 中的迭代器导入数据编写正确的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:30:25.687

你是对的 - QuickBooks_Object_Customer 类不适用于迭代器。您必须构建自己的 qbXML 请求。

话虽如此，这一切都在 DevKit 附带的示例之一中为您完成。

去获取[QuickBooks PHP DevKit](http://consolibyte.com/downloads/quickbooks-php-devkit/)的每晚版本。

看看这个文件：docs/example_web_connector_import.php

代码应如下所示：

```
/**
 * Build a request to import customers already in QuickBooks into our application
 */
function _quickbooks_customer_import_request($requestID, $user, $action, $ID, $extra, &$err, $last_action_time, $last_actionident_time, $version, $locale)
{
    // Iterator support (break the result set into small chunks)
    $attr_iteratorID = '';
    $attr_iterator = ' iterator="Start" ';
    if (empty($extra['iteratorID']))
    {
        // This is the first request in a new batch
        $last = _quickbooks_get_last_run($user, $action);
        _quickbooks_set_last_run($user, $action);           // Update the last run time to NOW()

        // Set the current run to $last
        _quickbooks_set_current_run($user, $action, $last);
    }
    else
    {
        // This is a continuation of a batch
        $attr_iteratorID = ' iteratorID="' . $extra['iteratorID'] . '" ';
        $attr_iterator = ' iterator="Continue" ';

        $last = _quickbooks_get_current_run($user, $action);
    }

    // Build the request
    $xml = '<?xml version="1.0" encoding="utf-8"?>
        <?qbxml version="' . $version . '"?>
        <QBXML>
            <QBXMLMsgsRq onError="stopOnError">
                <CustomerQueryRq ' . $attr_iterator . ' ' . $attr_iteratorID . ' requestID="' . $requestID . '">
                    <MaxReturned>25</MaxReturned>
                    <FromModifiedDate>' . $last . '</FromModifiedDate>
                    <OwnerID>0</OwnerID>
                </CustomerQueryRq>  
            </QBXMLMsgsRq>
        </QBXML>';

    return $xml;
}

/** 
 * Handle a response from QuickBooks 
 */
function _quickbooks_customer_import_response($requestID, $user, $action, $ID, $extra, &$err, $last_action_time, $last_actionident_time, $xml, $idents)
{   
    if (!empty($idents['iteratorRemainingCount']))
    {
        // Queue up another request
        $priority = 10;
        $Queue = QuickBooks_WebConnector_Queue_Singleton::getInstance();
        $Queue->enqueue(QUICKBOOKS_IMPORT_CUSTOMER, null, $priority, array( 'iteratorID' => $idents['iteratorID'] ));
    }
    ... do stuff with the data you got back here ... 
```

# java - JavaFX：TableView 内容未显示

> ID：14397295
> 
> 赞同：3
> 
> 时间：2013-01-18T10:48:23.333
> 
> 标签：java, ant, tableview, javafx, obfuscation

我已经创建了一个 JavaFX 应用程序，我已经使用**Ant**构建了本机包，并且我正在使用**Proguard-4.8****混淆**jar 。我能够使用该混淆的 jar 成功创建本机捆绑 exe。当我运行它时，它成功启动了应用程序，一切正常，但 TableView 中存在一个问题。也就是说数据存在于**TableView 中**，但我无法在 TableView 中看到数据。下面附上从 exe 为 TableView 拍摄的屏幕截图 -

 ****![在此处输入图像描述](../Images/448baebfb29d5ae411255c0c96e018fe.png)

**在混淆时，是否需要在类中映射到 Tableview 以进行数据关联的任何额外设置或代码更改。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T05:54:45.137

我正在以自己的方式使用**PropertyValueFactory**的长形式：

```
col.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Test, String>,
             ObservableValue<String>>() {
     public ObservableValue<String> call(TableColumn.CellDataFeatures<Test, String> t) {
         // t.getValue() returns the Test instance for a particular TableView row
         return t.getValue().testProperty();
         // or
         return new SimpleStringProperty(t.getValue().getMessage());
     }
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-31T07:41:42.197

如果您对表使用“PropertyValueFactory”，则应避免混淆 Your_Object 类。如果您不这样做，PropertyValueFactory 将无法在混淆后搜索 Your_Object，因为该对象已被混淆。

请在 Oracle 中找到 PropertyValueFactory 类的规范： [PropertyValueFactory 规范](http://docs.oracle.com/javafx/2/api/javafx/scene/control/cell/PropertyValueFactory.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-27T21:44:23.803

想象一下，您已经在不同的包中建立了如此多的表，那么您需要全部更改。不，我建议在你 proguard_config 中使用它会有所帮助

```
 -keepclassmembers public class  yourpackage1.**, yourpackage2.** ,yourpackage3.**{
    public javafx.beans.property.StringProperty *Property();
} 
```****

# git - 如何在 git 命令行中重新添加和重新提交

> ID：14397296
> 
> 赞同：0
> 
> 时间：2013-01-18T10:48:24.630
> 
> 标签：git, github, push, commit

我不确定我是否理解该命令的`git commit -am "commit_message"`作用。我用它希望它能做到：

```
git add .
git commit -m "commit_message 
```

但是当我推送到 github 时，我注意到新文件（在我调用命令之前未跟踪）尚未推送。验证后，这些新文件甚至都没有添加到我的提交中。
所以我试着给`git add .`自己打电话，然后`git commit -m "commit_message`手动解决我的问题。这似乎也不起作用。

所以这是我的问题，有没有办法一次将所有未跟踪的文件添加到索引中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:12:54.857

我试图用我从你当前的问题中收集到的信息来修改你的问题，如果我做错了，我道歉，并随时恢复它。

如果我是对的，您必须知道`git commit -a -m ""`（不完全是`-am`），仅将跟踪和修改的文件添加到索引中，因此不应将未跟踪的文件添加到提交中，这是预期的行为。

关于您调用的尝试`git add .`，这应该可以工作，因为此命令会添加未跟踪的文件，并且应该可以按预期工作。

鉴于您在问题中添加的评论（关于`git status`），似乎没有任何未跟踪的文件要添加。因此，要么您已经添加了这些文件并提交了更改，要么这些文件被 git 忽略了。

这可能是由`.gitignore`文件中的配置引起的

# json - 将 JSON 值添加到 viewmodel 中的 ko.computed

> ID：14397297
> 
> 赞同：0
> 
> 时间：2013-01-18T10:48:26.547
> 
> 标签：json, knockout.js

我正忙于为我的 Web 应用程序创建货币模块，我正在使用 Yahoo Finance API 返回我在本地数据库中定义的 2 种货币的货币兑换率。我从 API 获得了很好的 JSON 数据，我只想使用 ko.computed 将从 Finance API 收到的 JSON 数据绑定到我现有的 Viewmodel。我不确定我是否应该使用 ko.computed 来实现这一点，所以任何建议都会有很大帮助。

这是我的代码：

```
 var currency = function (data) {
        var self = this;
        self.CurrencyFrom = ko.observable(data.CurrencyFrom);
        self.CurrencyTo = ko.observable(data.CurrencyTo);
        self.ConversionRate = ko.computed(rates); // I WANT TO BIND THE VALUE FROM API HERE
    }

    var CurrencyModel = function (Currencies) {
        var self = this;
        self.Currencies = ko.observableArray(Currencies);

        self.AddCurrency = function () {
            self.Currencies.push({
                CurrencyFrom: "",
                CurrencyTo: "",
                ConversionRate: ""
            });
        };

        self.RemoveCurrency = function (Currency) {
            self.Currencies.remove(Currency);
        };

        self.Save = function (Form) {
            alert("Could Now Save: " + ko.utils.stringifyJson(self.Currencies));
        };

        $.ajax({
            url: "CurrencyConfiguration.aspx/GetConfiguredCurrencies",
            // Current Page, Method  
            data: '{}',
            // parameter map as JSON  
            type: "POST",
            // data has to be POSTed  
            contentType: "application/json; charset=utf-8",
            // posting JSON content      
            dataType: "JSON",
            // type of data is JSON (must be upper case!)  
            timeout: 10000,
            // AJAX timeout  
            success: function (Result) {
                var MappedCurrencies =
              $.map(Result.d,
       function (item) {
           getRate(item.CurrencyFrom, item.CurrencyTo);

           return new currency(item);
       }
       );
                self.Currencies(MappedCurrencies);

            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });
    };

    //3rd Party JSON result from Yahoo Finance API
    function getRate(from, to) {
        var script = document.createElement('script');
        script.setAttribute('src', "http://query.yahooapis.com/v1/public/yql?q=select%20rate%2Cname%20from%20csv%20where%20url%3D'http%3A%2F%2Fdownload.finance.yahoo.com%2Fd%2Fquotes%3Fs%3D" + from + to + "%253DX%26f%3Dl1n'%20and%20columns%3D'rate%2Cname'&format=json&callback=rates"); //HERE I CALL THE VALUE TO OBTAIN THE CONVERSION RATE FROM API
        document.body.appendChild(script);
    }

    //I WANT TO ADD THIS TO MY VIEWMODEL
    var rates = function parseExchangeRate(YahooData) {
                var rate = YahooData.query.results.row.rate;
        }

    $(document).ready(function () {
        var VM = new CurrencyModel();
        ko.applyBindings(VM);
        $('[rel=tooltip]').tooltip();
    }) 
```

从 parseExchangeRate 函数返回的 JSON（雅虎查询结果）：

```
parseExchangeRate({"query":{"count":1,"created":"2013-01-18T06:46:41Z","lang":"en-US","results":{"row":{"rate":"0.1129","name":"ZAR to USD"}}}}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:46:47.350

我看到您已经在使用 jquery，所以我也会将 jquery 用于 JSONP。我使用了一个简单的 ko.observable 作为转换率，并添加了一个“裸”的 ko.computed 来执行 ajax 请求并异步更新 observable。如果您需要任何进一步的说明，请告诉我。

JSFiddle 示例（使用模拟数据而不是初始 ajax）：http: [//jsfiddle.net/VsW5H/1/](http://jsfiddle.net/VsW5H/1/)

更新代码：

```
var currency = function (data) {
  var self = this;
  self.CurrencyFrom = ko.observable(data.CurrencyFrom);
  self.CurrencyTo = ko.observable(data.CurrencyTo);
  self.ConversionRate = ko.observable(data.ConversionRate);

  ko.computed(function () {
    var from = self.CurrencyFrom(),
      to = self.CurrencyTo();

    if (!from || !to) {
      self.ConversionRate("N/A");
      return;
    }

    getRate(from, to).done(function (YahooData) {
      console.log("got yahoo data for [" + from + "," + to + "]: ", YahooData);
      self.ConversionRate(YahooData.query.results.row.rate);
    });
  });
}

var CurrencyModel = function (Currencies) {
  var self = this;
  self.Currencies = ko.observableArray(Currencies);

  self.AddCurrency = function () {
    self.Currencies.push(new currency({
      CurrencyFrom: "",
      CurrencyTo: "",
      ConversionRate: ""
    }));
  };

  self.RemoveCurrency = function (Currency) {
    self.Currencies.remove(Currency);
  };

  self.Save = function (Form) {
    alert("Could Now Save: " + ko.utils.stringifyJson(self.Currencies));
  };

  $.ajax({
    url: "CurrencyConfiguration.aspx/GetConfiguredCurrencies",
    // Current Page, Method  
    data: '{}',
    // parameter map as JSON  
    type: "POST",
    // data has to be POSTed  
    contentType: "application/json; charset=utf-8",
    // posting JSON content      
    dataType: "JSON",
    // type of data is JSON (must be upper case!)  
    timeout: 10000,
    // AJAX timeout  
    success: function (Result) {
      var MappedCurrencies = $.map(Result.d,

      function (item) {
        return new currency(item);
      });
      self.Currencies(MappedCurrencies);
    },
    error: function (xhr, status) {
      alert(status + " - " + xhr.responseText);
    }
  });

};

//3rd Party JSON result from Yahoo Finance API
function getRate(from, to) {
  return $.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20rate%2Cname%20from%20csv%20where%20url%3D'http%3A%2F%2Fdownload.finance.yahoo.com%2Fd%2Fquotes%3Fs%3D" + from + to + "%253DX%26f%3Dl1n'%20and%20columns%3D'rate%2Cname'&format=json&callback=?");
} 
```

# cmake - 奇怪的函数参数名称行为

> ID：14397298
> 
> 赞同：5
> 
> 时间：2013-01-18T10:48:27.607
> 
> 标签：cmake

我在这里问了一个关于 cmake 和传递变量的[问题](https://stackoverflow.com/questions/14375519/cmake-how-to-write-a-nice-function-that-passes-variables-by-reference)。我可以让它工作，但前提是我在函​​数中命名我的变量与我调用该函数的父范围中的变量不同。所以本质上：

```
function(strange name)
   message(STATUS ${name})
   message(STATUS ${${name}})
endfunction()

set(name foo)
set(anothername foo)
strange(name)
strange(anothername) 
```

结果是：

```
-- name   (message(STATUS ${name}) for var "name")
-- name   (message(STATUS ${${name}}) for var "name")
-- anothername message(STATUS ${name}) for var "anothername")
-- foo    (message(STATUS ${${name}}) for var "anothername") 
```

这不是有点奇怪吗？发生了什么？我认为函数的行为不应该取决于父范围内变量的命名 - 应该吗？！

任何澄清都非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T11:22:58.190

不幸的是，CMake 的语言非常原始。在这种情况下，局部变量的命名可能会与外部范围内的同名变量交互。

具体来说，在这两个调用中分别`${${name}}`扩展为`${name}`和`${anothername}`。前者`name`是使用其值的局部变量的名称。在后者中，使用了`anothername`来自外部范围的 。

除了在函数中使用混淆变量名接受变量名作为参数外，我不知道有任何解决方法。

也许我们应该向`${name:PARENT_SCOPE}`CMake 团队申请？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T05:14:47.030

如果您想避免@Lindydancer 的简洁答案中描述的本地范围问题，您可以将您的功能更改为[`macro`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3amacro)

从以下文档`macro`：

> 请注意，宏的参数和 ARGN 等值不是通常 CMake 意义上的变量。它们是字符串替换，就像 c 预处理器对宏所做的那样。如果您想要真正的 CMake 变量，您应该查看函数命令。

如果您更改为 use `macro`，您的输出将变为

> ```
> -- name
> -- foo
> -- anothername
> -- foo 
> ```

# jquery - 在jquery中解析数据

> ID：14397306
> 
> 赞同：1
> 
> 时间：2013-01-18T10:48:54.837
> 
> 标签：jquery, json

我在 Jquery 中有以下字符串

```
[{
  "Key": ["Month", "Dealer Lastname", "Gurpreetttttt Alowaliaaaaaaaaa", "Intekhab Khan", "Intekhab Khan", "Test Test"]
}, {
  "Key": ["Jan", 600, 500, 0, 300, 100]
}] 
```

我想解析这个字符串。当我尝试提醒它给我对象对象的数据时

```
var resp = jQuery.parseJSON(response);
$.each(resp, function (key, val) {
    alert(val);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:56:42.323

如果您警告一个对象，您将获得该对象的字符串表示形式，默认情况下是该对象的类型名称。

您可以改为提醒`Key`对象的属性，以查看内容：

```
$.each(resp, function(key, val) {
  alert(val.Key);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:01:17.240

`Key`由于您在 json 数组中命名了密钥，因此：

```
 $.each(resp, function (key, val) {
    alert(val['Key']);
 }); 
```

# c# - 如何在 GridView 命令字段中调用 JavaScript 函数？

> ID：14397309
> 
> 赞同：2
> 
> 时间：2013-01-18T10:49:15.050
> 
> 标签：c#, javascript, asp.net, gridview

我返回了一个向用户询问确认消息的 Javascript 函数。JavaScript 函数是

```
 function ConfirmOnDelete() {
    if (confirm("Are you sure to delete?"))
        return true;
    else
        return false; 
```

和 GridView 如下所示：

```
 <asp:CommandField HeaderText="Delete" ShowDeleteButton="True" /> 
```

在这里，我想在用户单击 GridView 命令字段中的删除时调用 JavaScript 函数。这个怎么称呼？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:06:23.883

假设您想继续使用您的`CommandField`，您可以使用 GridView 的`OnRowDataBound`事件以编程方式执行此操作。

在声明中指定 RowDataBound 事件的事件处理程序`GridView`：

```
<asp:GridView ID="gv" runat="server" OnRowDataBound="gv_RowDataBound".... 
```

然后在您的事件处理程序（代码隐藏）中找到您的按钮（这里我假设`ImageButton`，尽管这取决于您的`ButtonType`属性`CommandField`）并将 JavaScript 添加到其`OnClientClick`属性。

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        ((ImageButton)e.Row.Cells[cell].Controls[ctrl]).OnClientClick = "return confirm('Are you sure you want to delete?');"; // add any JS you want here
    }
} 
```

在上面的示例中，*cell*指的是您的列索引，`CommandField`而*ctrl*指的是您正在引用的单元格中的控件索引（删除按钮）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:15:51.017

您最好避免在服务器端询问删除确认，使用 javascript 捕获用户最终决定，然后转到服务器端执行您的逻辑。CommandField 将不是这里的最佳解决方案。

JS：

```
<script type="text/javascript">
    function DeleteConfirm() {

        if (confirm("Are you sure you want to delete this customer from excluded customer list ?")) {
            return true;
        }
        return false;
    }
</script> 
```

HTML：

```
 <asp:TemplateField HeaderText=" ">
                <ItemTemplate>
                    <asp:LinkButton ID="lnk_RemoveFromlist" runat="server" Text="Delete"
                        CommandName="Delete" OnCommand="Delete_Command" CommandArgument='<%# Eval("ID").ToString()' OnClientClick='return DeleteConfirm()'></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField> 
```

代码：

```
protected void Remove_Command(object sender, CommandEventArgs e)
{
    //Implement your Delete Logic
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T11:17:36.407

对于取消按钮的命令名称为“cancel”，对于删除按钮“delete”，请检查

```
if(e.CommandName == "delete")
 {
   //script to delete();
 }
else if(e.commandName == "cancel")
 {
   //close with some script;
 } 
```

要在代码隐藏中调用 javascript 函数，

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function","loadPopupBox();", true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T10:27:25.783

您可以使用按钮的**OnClientclick**事件来调用该函数。例如

```
<asp:button id="btndelete" runat="server" Text="delete" Onclientclick="if(!ConfirmOnDelete())return false;"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T10:50:34.917

一般来说，您必须指定`OnClientClick="return confirm('Are you sure you want to delete ?');"`，但这不适用于**CommandField**更好地使用**TemplateField**，这可以更好地解释[http://davesquared.net/2007/10/confirm-delete-for-gridview.html](http://davesquared.net/2007/10/confirm-delete-for-gridview.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-31T11:10:47.773

HTML：

```
<asp:GridView ID="GridView1" runat="server" OnRowDeleting="gv1_RowDeleting">
   <Columns>
       <asp:TemplateField HeaderText="Delete">
          <ItemTemplate>
                   <asp:CommandField ShowDeleteButton="true" HeaderText="delete" />  
          </ItemTemplate>
       </asp:TemplateField>
   </Columns>
</asp:GridView> 
```

代码：

```
 protected void gv1_RowDeleting (object sender, GridViewDeleteEventArgs e) 
{

    GridView1.Attributes.Add("OnClick", "return confirm('Really wanna delete?');");

       // implement your delete logic

    Response.Write("<script>alert("Delete Successful");</script>");

} 
```

当我们单击 Gridview 中的“删除”命令字段时，这将调用 Javascript 函数，并且 Response.write 函数将发出数据已被删除的警报。您可以在此函数中添加要执行的 whwtever 函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T10:52:40.480

使用启动脚本

```
 ScriptManager.RegisterStartupScript(Page, this.GetType(), "ConfirmOnDelete", "ConfirmOnDelete();", true); 
```

或者您也可以使用 onclientclick

# installation - 在实际安装位 置安装安装更新

> ID：14397312
> 
> 赞同：1
> 
> 时间：2013-01-18T10:49:25.873
> 
> 标签：installation, inno-setup, setuptools

我已经安装了一个 java 应用程序，我想在同一位置重新安装新的更新。但我无法读取安装软件的位置。

```
I want if the full application is being installed in d:/program files then
   the new setup    should also be installed to the same location 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:03:28.857

主应用安装脚本

```
[Setup]
AppId=MyMainApplicationId
AppName=MyApplicationName
AppVersion=MyApplicationVersion 
```

更新安装脚本

```
[Setup]
AppId=MyMainApplicationId
AppName=MyUpdateName
AppVersion=MyUpdateVersion 
```

由于两个 installscripts 都相同`AppId`，更新将使用与主应用程序相同的目录。但是...如果安装了主应用程序，您应该执行检查以查找。您可以尝试将其`[Code]`放在更新安装脚本中：

```
[Code]
function InitializeSetup: Boolean;
var
sUnInstallString: String;
begin
  if RegValueExists(HKEY_LOCAL_MACHINE,
'Software\Microsoft\Windows\CurrentVersion\Uninstall\MyMainApplicationId_is1',
'UninstallString') then 
    begin
      Result := True;
    end
    else begin
      MsgBox('Main Application was not found!', mbInformation, MB_OK);
      Result := False;
      Exit;
    end;
end; 
```

# sharepoint - PowerShell 简单转换错误

> ID：14397314
> 
> 赞同：1
> 
> 时间：2013-01-18T10:49:37.240
> 
> 标签：sharepoint, powershell, casting

```
 $mlField = [SPFieldMultiLineText]$field 
```

我有一个字段，它是字段类型，但我想将其转换为 SPFieldMultiLineText（我可以确认这是一个有效的转换，我假设我的语法不好）。

我得到的错误：

**找不到类型 [SPFieldMultiLineText]：确保已加载包含此类型的程序集。**

这是一个 SharePoint 管理控制台，因此所有相关的 SharePoint 程序集都已加载 - 这不是问题。

任何指向正确方向的指针没有错误？

非常感谢。

编辑：对于更多的上下文，这最终是我想要实现的目标：

[http://blogs.msdn.com/b/pavankumar/archive/2008/11/17/how-to-change-a-multi-line-text-field-to-allow-unlimited-length-in-a-文档库.aspx](http://blogs.msdn.com/b/pavankumar/archive/2008/11/17/how-to-change-a-multi-line-text-field-to-allow-unlimited-length-in-a-document-library.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:35:38.547

尝试使用完整的类型名称：

```
$mlField = [Microsoft.SharePoint.SPFieldMultiLineText]$field 
```

# php - 检索并整理 url 中的一个目录名称。例如，我需要 example.com/main/this_dir/page.html 输出为“This Dir”

> ID：14397315
> 
> 赞同：0
> 
> 时间：2013-01-18T10:49:39.893
> 
> 标签：php

我正在努力理解如何完成以下任务“

从 ：`http://www.example.com/main/this_dir/page.html`

我想要一个输出：**这个目录**

使用时`$_SERVER['REQUEST_URI']`我可以得到这个输出：

*/main/this_dir/*

我现在想把它去掉，去掉两个 / 之间的最后一个字符串，所以我最终得到

*this_dir*

然后我想把那个字符串变成

**这个目录**

这也有点复杂，因为该目录可以简单地称为 /this/ 而不是 /this_dir/，但它始终是一个或另一个，并且文本确实发生了变化，而我使用的单词只是一个示例。

如果有人对我如何完成这项任务有任何建议、意见或反馈，我们将不胜感激！我确实对如何从 request_uri 字符串中删除最后一个目录名称有一个模糊的想法，但我真的很想知道是否可以使用 PHP 以我所描述的方式转换字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:05:21.990

```
$path = explode("/", dirname($_SERVER['REQUEST_URI']));
$directory = end($path); 
```

这应该为您提供路径中的最后一个目录。

然后你可以这样做：

```
$dirParts = explode("_", $directory);
$dirName = implode(" ", array_map("ucfirst", $dirParts)); 
```

以用户友好的格式获取目录名称。

编辑：事实上，正如 RobMaster 所说，这可能更容易做到`ucwords(str_replace("_", " ", $directory))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:56:04.557

您可以使用[basename](http://php.net/manual/en/function.basename.php)函数来获取“this_dir”部分，因此只需执行以下操作即可：

```
$directoryName = ucwords(str_replace('_', ' ', basename($_SERVER['REQUEST_URI']))); 
```

## 编辑

稍微复杂一些的示例适用于“/main/this_dir/something.php”等页面：

```
$directoryName = ucwords(str_replace('_', ' ', basename(substr($_SERVER['REQUEST_URI'], 0, strrpos($_SERVER['REQUEST_URI'], '/'))))); 
```

这只是在传递之前剥离最终“/”之后的任何内容，`basename`以确保它会像以前一样工作。请注意，这**不适**用于没有尾随“/”的 URL，例如“/main/this_dir”——在这种情况下，它将输出“Main”。

# highcharts - 隐藏系列并再次切换时xAxis无故更改

> ID：14397319
> 
> 赞同：1
> 
> 时间：2013-01-18T10:49:54.767
> 
> 标签：highcharts, highstock

我有一个基本的两轴线图，有一个系列。它的数据是 xAxis 上的日期时间和 yAxis 的平均数字。当我用我的图表加载页面时，我有一个很好的 xAxis 显示，每隔一个月有一个标签，这使得图表可以很好地呈现，并且可读。

每当我单击图例按钮隐藏该系列时（即使图表现在是空的，我仍然显示 xAxis），然后再次单击它以显示它，xAxis 现在每个月显示一次（是以前的两倍）并且标签文本相互重叠。

如果我再次尝试隐藏和显示该系列，我会得到相同的结果。难道是一旦隐藏功能被图例按钮触发，它正在删除我的一些选项，或者自动更改它们？

基本上，我想要的只是为我的 xAxis 保留“每隔一个月”标签显示，无论我隐藏或切换我的系列多少次。

编辑：我尝试设置`chart.ignoreHiddenSeries`为 false 并且 xAxis 不再更改，但我有点想保留 yAxis 的可扩展功能......现在当我切换或隐藏另一个系列时，yAxis 静止不动。

任何解决方法？这对我来说只是解决方案的一半。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:12:54.083

您可以尝试使用 showEmpty() 函数[http://api.highcharts.com/highcharts#xAxis.showEmpty](http://api.highcharts.com/highcharts#xAxis.showEmpty)

# php - APC 延迟加载会提高性能吗？

> ID：14397321
> 
> 赞同：3
> 
> 时间：2013-01-18T10:49:55.767
> 
> 标签：php, performance, lazy-loading, apc

PHP 的 APC 扩展包括两个用于启用延迟加载函数和类的配置设置；`apc.lazy_functions`和`apc.lazy_classes`。

我的网站使用具有显着性能优势的 APC。他们还在不同时间启用和禁用了延迟加载设置，没有明显的差异。

在互联网上，除了单纯的讨论之外，没有太多关于这个主题的内容，但没有衡量标准。

是否有人实际测量过使用 APC 延迟加载对性能的影响，或者是否有人注意到使用这些设置存在显着差异？什么时候启用延迟加载是有利的？什么时候应该不惜一切代价避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:08:15.800

这完全取决于您使用 APC 的应用程序类型。

大多数框架包括以一种或[另](http://php.net/manual/en/function.spl-autoload-register.php)[一种方式](http://php.net/manual/en/function.autoload.php)自动加载类。这基本上意味着在按需动态包含/必需的类的上下文中，apc 设置是多余的。`apc.lazy_functions``apc.lazy_classes`

PHP 的编码标准发生了变化，特别是随着[PSR-1 编码标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)的接受，框架不仅实现了自动加载，而且确保每个文件只定义一个类。

这反过来意味着`apc.lazy_classes`只在使用时从包含的文件中复制类，但当前的编码标准确保根据需要包含文件，并且包含的​​文件只定义一个类，即立即使用。

使用`apc.lazy_functions`并`apc.lazy_classes`与其他（较旧的）项目一起使用，可能会产生更好的结果。

* * *

但是，关于`apc.lazy_functions`，该设置仅涵盖文件中定义的全局范围函数。不是类的个别方法。[命名法](http://php.net/manual/en/apc.configuration.php#ini.apc.lazy-functions)可能会产生误导，但类函数的名称是独特的`methods`。

# c# - 如何在表面模式下打开键盘

> ID：14397330
> 
> 赞同：0
> 
> 时间：2013-01-18T10:50:39.237
> 
> 标签：c#, keyboard, pixelsense

目前，我正在使用 PixelSense 2.0 为 de sur40 开发应用程序。

现在的问题是，当我处于调试模式时，我可以让 Windows 7 屏幕键盘出现，但是当我进入 SurfaceMode 时，当我专注于文本块时，白色的内置键盘不会出现。

所以我的问题是：如何让白色内置键盘出现在 SurfaceMode 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T11:30:29.603

此链接帮助我让键盘出现在 SurfaceMode 中。底部的示例非常有帮助。 [http://msdn.microsoft.com/en-us/library/microsoft.surface.surfacekeyboard.aspx](http://msdn.microsoft.com/en-us/library/microsoft.surface.surfacekeyboard.aspx)

另一个稍微不同的例子。该示例有效，但在我的情况下它没有 [http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfacetextbox.keyboardpositioning.aspx](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfacetextbox.keyboardpositioning.aspx)

# javascript - 如何维护主干中多个集合实例的共同日期？

> ID：14397331
> 
> 赞同：0
> 
> 时间：2013-01-18T10:50:43.573
> 
> 标签：javascript, jquery, backbone.js

我有一个集合，该集合的实例将动态创建。在这种情况下，我如何维护和更改集合的所有实例中的公共数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:05:49.073

假设集合的所有实例中的公共数据都是模型。建议始终在任何地方使用相同的模型。也就是说，如果它已经包含在另一个集合中，你最好永远不要在一个集合中创建新模型。这不仅节省了内存，而且更重要的是，使模型-视图映射更加简单。Backbone 不会为您执行此操作，但您可以自己轻松构建一些由数据库 PK 键入的模型缓存。您可以参考这篇简洁但重点突出的[文章](http://jonathanotto.com/blog/backbone_js_for_the_everyman.html)。

# objective-c - 如何优化 UIImage 缩放以实现快速缩放

> ID：14397332
> 
> 赞同：0
> 
> 时间：2013-01-18T10:50:48.980
> 
> 标签：objective-c, uiimage, core-graphics

人，我需要你的帮助。

需要在流上优化缩放图像。我尝试了两种使用保存比例缩放图像的方法，请检查此代码并说，如果您愿意/可以，我该如何优化：

```
// Draw image in rect (PNG 1000ms, JPG 834ms for 8 pictures)
+ (UIImage *)imageWithImage:(UIImage *)sourceImage
     scaledToSizeWithSameAspectRatio:(CGSize)targetSize
            withInterpolationQuality:(CGInterpolationQuality)quality
{
    CGSize imageSize = sourceImage.size;

    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;

    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;

    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;

    CGPoint thumbnailPoint = (CGPoint){0.0, 0.0};

    if (CGSizeEqualToSize(imageSize, targetSize) == NO) {

        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor > heightFactor) {

            scaledWidth  = width * widthFactor;
            scaledHeight = height * widthFactor;

            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;
        }
        else {

            scaledWidth  = width * heightFactor;
            scaledHeight = height * heightFactor;

            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }

    }

    UIGraphicsBeginImageContextWithOptions(targetSize, YES, 1.0);

    dispatch_sync(dispatch_queue_create("pro.idev.itux.projectNameHere", DISPATCH_QUEUE_SERIAL), ^{
        CGContextRef ctx = UIGraphicsGetCurrentContext();
        CGContextSetInterpolationQuality(ctx, quality);
        [sourceImage drawInRect:(CGRect){thumbnailPoint, {scaledWidth, scaledHeight}}];
    });

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
}

// Draw CGImage in rect (PNG 1326ms, JPG 1026ms for 8 pictures)
+ (UIImage *)imageWithCGImage:(CGImageRef)sourceImage
scaledToSizeWithSameAspectRatio:(CGSize)targetSize
       withInterpolationQuality:(CGInterpolationQuality)quality
{

    CGFloat width = CGImageGetWidth(sourceImage);
    CGFloat height = CGImageGetHeight(sourceImage);

    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;

    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;

    CGPoint thumbnailPoint = (CGPoint){0.0, 0.0};

    if (CGSizeEqualToSize((CGSize){width, height}, targetSize) == NO) {

        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor > heightFactor) {

            scaledWidth  = width * widthFactor;
            scaledHeight = height * widthFactor;

            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;
        }
        else {

            scaledWidth  = width * heightFactor;
            scaledHeight = height * heightFactor;

            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }

    }

    UIGraphicsBeginImageContextWithOptions(targetSize, YES, 1.0);

    dispatch_sync(dispatch_queue_create("pro.idev.itux.projectNameHere", DISPATCH_QUEUE_SERIAL), ^{
        CGContextRef ctx = UIGraphicsGetCurrentContext();
        CGContextTranslateCTM(ctx, 0, targetHeight);
        CGContextScaleCTM(ctx, 1.0, -1.0);
        CGContextSetInterpolationQuality(ctx, quality);
        CGContextDrawImage(ctx, (CGRect){thumbnailPoint, {scaledWidth, scaledHeight}}, sourceImage);
    });

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
}
```

# java - 不可变对象作为哈希集合中的键

> ID：14397333
> 
> 赞同：0
> 
> 时间：2013-01-18T10:50:49.627
> 
> 标签：java, hashmap

我已经读过最好将不可变对象作为 HashMap 中的键，因为它会缓存生成的哈希码。

不可变对象如何默认缓存哈希码？将不可变对象作为键是真正的优势吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:52:20.753

这并不是真正的主要原因（并且不可变对象可能不会缓存其哈希码）。

真正的（潜在的）问题是，如果键的哈希码在哈希映射中发生更改，则调用`map.containsKey(modifiedKey)`可能会返回 false，尽管键仍然在映射中。

访问它的唯一方法是迭代。

请注意，实际结果可能因地图实现而异。

请参阅下面的人为示例。输出是：

> 假
> 1
> {1=abc}

这意味着地图认为钥匙不再存在，但实际上仍然存在。

```
public class Test2  {
    public static void main(String[] args) {
        Map<Mutable, String> map = new HashMap<> ();
        Mutable m = new Mutable();
        map.put(m, "abc");
        m.i = 1;
        System.out.println(map.containsKey(m));
        System.out.println(map.size());
        System.out.println(map);
    }
    public static class Mutable {
        int i = 0;
        @Override
        public int hashCode() {
            return i;
        }
        public String toString() {
            return String.valueOf(i);
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:54:27.530

这与缓存无关`hashCode()`（不可变对象仍然可以动态计算它）。这与结果的稳定性有关`hashCode()`。对于可变对象，`hashCode()`可能依赖于可能更改的值，如果发生这种情况，您将无法再在`HashMap`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:52:48.377

不可变对象永远不会改变。这意味着在`HashMap`使用此键查找对象时不需要重新计算哈希码。它计算一次，然后可以缓存该值。

# android - 如何在主要活动中注册接收者？

> ID：14397336
> 
> 赞同：4
> 
> 时间：2013-01-18T10:51:04.197
> 
> 标签：android, broadcastreceiver, android-activity

我有一个`SmsReceiver`班级，我想在主要活动中注册，我应该怎么做？

我是安卓新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:01:48.577

你可以做两件事：

1.  `BroadcastReceiver`在中创建和定义`Manifest`
2.  创建并注册`BroadcastReceiver`in 代码。

对于选项 2（您要问的）：

创建一个`BroadcastReceiver`in 代码 (MyBroadcastReceiver)。在您的范围内声明 MyBroadcastReceiver `Activity`：

```
MyBroadcastReceiver mMyBroadcastReceiver; 
```

`BroadcastReceiver`通过以下方式注册`Activity`：

```
IntentFilter filter = new IntentFilter(android.provider.Telephony.SMS_RECEIVED);
this.registerReceiver(mMyBroadcastReceiver, filter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:54:48.230

要让服务接收 SMS 消息，请执行以下步骤：

1.  更新清单以授予您的应用接收短信的权限（WRITE_SMS、READ_SMS、RECEIVE_SMS）
2.  不要使用接收者意图过滤器更新清单！（每个在线示例代码似乎都这样做）
3.  在您的服务中，在您的服务类中创建一个嵌套的广播接收器类

    ```
    private class SMSreceiver extends BroadcastReceiver
    {
        private final String TAG = this.getClass().getSimpleName();

        @Override
        public void onReceive(Context context, Intent intent)
        {
            Bundle extras = intent.getExtras();

            String strMessage = "";

            if ( extras != null )
            {
                Object[] smsextras = (Object[]) extras.get( "pdus" );

                for ( int i = 0; i < smsextras.length; i++ )
                {
                    SmsMessage smsmsg = SmsMessage.createFromPdu((byte[])smsextras[i]);

                    String strMsgBody = smsmsg.getMessageBody().toString();
                    String strMsgSrc = smsmsg.getOriginatingAddress();

                    strMessage += "SMS from " + strMsgSrc + " : " + strMsgBody;                    

                    Log.i(TAG, strMessage);
                }

            }

        }

    } 
    ```

4.  在您的服务类中，注册以接收 `android.provider.Telephony.SMS_RECEIVED`意图过滤器：

    ```
    public class ServiceCommunicator extends Service
    {
        private SMSreceiver mSMSreceiver;
        private IntentFilter mIntentFilter;

        @Override
        public void onCreate()
        {
            super.onCreate();

            //SMS event receiver
            mSMSreceiver = new SMSreceiver();
            mIntentFilter = new IntentFilter();
            mIntentFilter.addAction("android.provider.Telephony.SMS_RECEIVED");
            registerReceiver(mSMSreceiver, mIntentFilter);
        }

        @Override
        public void onDestroy()
        {
            super.onDestroy();

            // Unregister the SMS receiver
            unregisterReceiver(mSMSreceiver);
        }
    } 
    ```

就是这样 ！

**注意：** 如果您想知道为什么我没有从单独的 BroadcastReceiver 类中绑定到我的服务 - 它不起作用，因为`bindService()`它不可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-20T15:16:26.650

对于 API 级别 19 及以上

```
 IntentFilter smsFilter = new IntentFilter();
 smsFilter.addAction(Telephony.Sms.Intents.SMS_RECEIVED_ACTION);
registerReceiver(this.receiver, filter); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:06:42.077

正如你所要求的那样在你的`BroadcastReceiver`里面注册`MainActivity``registerReceiver-codewise-inside-MainActivity`

这是代码的样子==>

```
public class MainActivity extends Activity 
{
BroadcastReceiver smsReceiver;
private IntentFilter myFilter = new IntentFilter(android.provider.Telephony.SMS_RECEIVED);

   protected void onCreate(Bundle savedInstanceState) 
   {
    super.onCreate(savedInstanceState);
    registerReceiver(smsReceiver, myFilter); // register BroadCastReceiver at time of initialization of Activity with proper Intent-Filter
   }

@Override
  protected void onPause() 
   {
    unregisterReceiver(smsReceiver); // UnRegister BroadCastReceiver as you no longer have your activity at Foreground -- Saving CPU & Battery Drainage
    super.onPause();
   }

 @Override
   protected void onResume() 
   {
    registerReceiver(smsReceiver, myFilter); // Register BroadCastReceiver Once again as your activity comes from pause to forground state again.
    super.onResume();
   }

  smsReceiver = new BroadcastReceiver() //Implementation of your BroadCastReceiver
  {

    @Override
    public void onReceive(Context context, Intent intent)
    {
       // Do whatever you like as sms is received and caught by these BroadCastReceiver
        Toast.makeText(context, "SMS Received", Toast.LENGTH_LONG).show();          
    }
  };
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-30T05:58:10.793

```
private BroadcastReceiver receiver = new BroadcastReceiver() {

   @Override
   public void onReceive(Context context, Intent intent) {
       //some action
   }
};

IntentFilter filter = new IntentFilter("YOUR_ACTION");
registerReceiver(receiver, filter); 
```

希望这可以帮助

# c++ - 创建一个对象并同时将其传递给一个向量（在 C++ 中）

> ID：14397337
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:51:09.207
> 
> 标签：c++, object, vector

我可以将对象传递给向量并同时创建它吗？我将尝试通过一个例子来说明我的意思。

```
#include <vector>

class testObject{
private:
   int someInt;
public:
   testObject(int a){ someInt=a; }
};

int main() {
   std::vector<testObject> testVector;
   testVector.push_back(testObject(2));
} 
```

我尝试使用类似于上面代码的东西。不出所料，实际上没有对象被添加到向量中。据我了解`testObject(2)`，确实创建了一个实例，`testObject`但在构造函数完成时它超出了范围。

**更新：**

亲爱的助手/顾问。非常感谢您的回答。我通读了所有评论和代码示例，现在必须稍微改变我的问题。我在`testObject`-class 中添加了一个成员。现在，如果我将对象的一个​​实例添加到向量中（如上例所示），则该成员似乎为空。现在我想我需要分配一些内存来做到这一点？通常我会尽量避免通过分配内存，`new`因为我害怕内存泄漏并且对我的编程技能没有信心。什么是最明智的实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:54:46.427

它适用于一些小修复：

```
 class testObject{
 public:
       testObject(int){
       }
    };

int main()
{
  vector<testObject> testVector;
  testVector.push_back(testObject(2));
} 
```

*这个世界已经改变了，如果可以的话，请将你的编译器升级到最新版本。我已经很多年没见过VC6.0了。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:00:22.007

关于代码，*billz*的回答是正确的。

为了解决您的疑虑：

> 现在，如果我将对象的一个​​实例添加到向量中（如上例所示），则该成员似乎为空。

它应该可以正常工作 - 请说明您如何确定这一点。

> 现在我想我需要分配一些内存来做到这一点？

编译器*应该*为你生成一个默认的成员复制构造函数。如果您的成员都是值类型（如此处），这通常会导致正确的浅拷贝。

如果您想在某个地方添加日志记录或断点，您可以自己显式编写它，但您不需要：

```
class testObject{
private:
   int someInt;
public:
   explicit testObject(int a) : someInt(a) {}
   // compiler should automatically handle copy like this:
   testObject(testObject const &other) : someInt(other.someInt) {}
   // and handle assignment like this:
   testObject& operator=(testObject const &other) {
      someInt = other.someInt;
      return *this;
   }
}; 
```

> 通常我会尽量避免通过 new 分配内存，因为我害怕内存泄漏并且对我的编程技能没有信心。什么是最明智的实施？

对于上述值类型，您无需担心。如果您需要*引用*类型，最佳做法是将它们包装在智能指针或专用类中，以便您可以*将*它们视为值类型（通过使编译器生成的工作正常，您不必编写复制构造函数、赋值运算符和析构函数正确）。恐怕我不知道这个建议与 VC++ 6.0 的兼容性如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:45:22.973

```
std::vector<testObject> testVector;
testVector.push_back(testObject(2)); 
```

C++11 中更快的替代方法是让向量就地创建 testObject：

```
testVector.emplace_back(2); 
```

这不会产生任何不必要的复制或移动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T22:14:16.183

首先，我建议您遵守一些编码标准。虽然并不完美，但谷歌有不错的[编码风格指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)，你可以采用。

无论您要对代码做什么，除非您正在为名为 Object 的类编写某种测试，否则您可以考虑为您的类选择其他名称，例如 TestClass。这只是一个意图问题：如果您正在测试 C++ 的 OO 功能，那么 TestClass 比 testObject 更有意义。

此外，您的示例中没有代码可以验证您是否确实将对象附加到向量。你可以用这样的东西来做。

```
... some code here ...

int main()
{
    std::vector<testObject> testVector;
    std::cout << "Initial size: " << testVector.size() << std::endl;

    testVector.push_back(testObject(3));
    std::cout << "New size:     " << testVector.size() << std::endl;
} 
```

我不知道您是否知道如何使用标准 I/O 流，但您的示例中没有处理 I/O，因此为了完整起见，请将 I/O 添加到您的示例中。

为了与前面的示例保持一致，我故意省略了应用我给你的任何风格建议，因为在某些上下文中的一致性也是良好编程风格的重要特征。

最后，为了回答您的原始问题，如果使用`push_back`，C++ 会将您的临时对象**复制到向量的背面。**（已由@FredOverflow 解释。）这基本上意味着vector 为您处理内存管理，因此您不必担心分配或解除分配，但您唯一关心的是您实际存储对象的位置（即在什么索引处）。

# css - 复制具有透明度的灯光效果

> ID：14397339
> 
> 赞同：0
> 
> 时间：2013-01-18T10:51:09.690
> 
> 标签：css, html

作为一种学习媒介，我尝试复制我在互联网上看到的一些东西。我的一个朋友知道我在做什么，看到一个[模板](http://www.templatemonster.com/demo/39011.html)并要求我为他的网页复制其中的一部分，我已经从模板中获得了我需要的大部分内容，但他最喜欢的东西我尝试过但失败了而且我不明白这个模板所涉及的魔法是什么......

我需要的是复制主表透明度及其背后的光效，我制作的透明度是在 GIMP 上制作的黑色 1x1 png（我买不到 Photoshop）我也有一个很好的图案，就像在模板中一样因为这是我朋友问的事情之一...

![用 GIMP 制作的带光效的透明盒子](../Images/a266cb7adaeb7bd0a8fe6e8b7a2004bc.png)

这是我想要的效果，我试着弄乱阴影，但没有得到我想要的我最终删除了代码，现在我只有这个：

HTML：

```
 <body>
 <div id="box"></div>
 <div id="light"></div> 
```

CSS：

```
#light{
border:solid 0px white;
height:550px;
width:800px;
left:50%;
margin-top:130px;
margin-left:-400px;
z-index:-1000;
position:absolute;
box-shadow: 0px 0px 300px #929292;
border-radius:100px;
background-color:#929292;
opacity:0.4;
}
#box{
background-image:url(../images/shtr.png);
margin:0px auto 0px;
width:1060px;
height:auto;
border:solid 0px white;
} 
```

我不知道我是否需要使用 jquery 或 javascript，或者这是否有助于提高页面性能...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:59:13.413

你可以在这里做一些 CSS3 的事情。

您需要做的第一件事是使用纹理和高光设置 div。理想情况下，带有突出显示的 div 应该是纹理 div 的子级。

HTML：

```
<div class="wrap">
  <div class="transp"></div>
</div> 
```

接下来，您需要将效果和背景应用于正确的元素：

CSS：

```
.wrap
{
  background: url(http://wallpoper.com/images/00/35/83/02/pattern-patterns_00358302.jpg);
  height: 500px;
  width: 500px;
}

.transp
{
  position: relative;
  top: 20px;
  left: 30px;
  background: rgba(0, 0, 0, .7);
  height: 100px;
  width: 100px;
    box-shadow: 0px 0px 30px #fff;
} 
```

[http://jsfiddle.net/7fTAH/](http://jsfiddle.net/7fTAH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:00:09.887

我设法完成它，我创建了一个投射阴影的新 div，将其放置在屏幕之外（左：100%;），阴影被投射到中心，颜色为 #CECECE HTML 代码：

```
<div id="light"></div>
<div id="box">
    ( ... content ... )
</div> 
```

在 CSS 中：

```
#light{
position: absolute;
background: rgba(0, 0, 0, 0);
height: 800px;
width: 840px;
z-index:-1000;
opacity:0.15;
}  

#box{
background-image:url(../images/shtr.png);/*black 50-60% transparent 1x1 image*/
margin:0px auto 0px;
width:1060px;
height:auto;
border:solid 0px white;
} 
```

为了投射阴影，我使用了一个 jQuery 脚本，仅通过 css 它不起作用我不知道到底为什么......代码：

```
$(document).ready(function() {
    myWidth = window.innerWidth;
    myHeight = window.innerHeight;

    var A = -myWidth - 49.5*myWidth/60
    $("#brilho_grande").css("box-shadow", A+"px 0px 10000px 100px #CECECE");
    $("#brilho_grande").css("left", 2*myWidth+"px");
    $("#brilho_grande").css("top", "339px");
}); 
```

# mysql - SHOW DATABASES 命令失败

> ID：14397341
> 
> 赞同：0
> 
> 时间：2013-01-18T10:51:13.760
> 
> 标签：mysql, database, innodb

当我运行这个命令

```
SHOW DATABASES 
```

我收到以下错误

```
ERROR 1146 (42S02): Table 'information_schema./tmp/#sql_2569_0' doesn't exist 
```

有什么想法或想法吗？我试过重新运行 mysql-db-install 脚本，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:42:03.330

我已经静态编译了 InnoDB 存储引擎并禁用了 HEAP 存储引擎。information_schema 表是内存表，因此需要 HEAP 存储引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:04:30.257

检查以下

1.my.cnf 用于 skip_show_databses（如果存在则停用它）

2.检查你的数据目录的文件权限（644是好的级别）

3.如果以上两个失败升级你的mysql

4.在最坏的情况下，您只需创建目录并对其授予完全权限并重新启动服务器（我不确定它可能会工作，但要小心，不要忘记在继续之前进行备份）

# google-play - Google Play 应用内结算版本 3：“项目已拥有”崩溃并且缺少失败通知

> ID：14397343
> 
> 赞同：2
> 
> 时间：2013-01-18T10:51:15.057
> 
> 标签：google-play, in-app-billing

在（最终）发布了 Google Play 应用内计费的 v2 实现之后，我在发布后遇到了问题。交易丢失、崩溃、无法恢复、诸如“无法下载，您已经拥有此项目”之类的疯狂错误，以及各种其他荒谬的事情。老实说，我现在已经在 iOS、Amazon App Store、Samsung Apps 和 Blackberry 10 上集成了 IAB，而且 Google Play 代码花费的时间比其他所有代码加起来还要多。十倍。这太可怕了。

不管怎样，我决定尝试在我的应用程序中实现 v3。集成过程要简单得多，因此要感谢 Google。此外，恢复以前的交易现在可以按预期工作，这很棒。但是，我遇到了一些令人震惊的问题：

1.  当用户关闭 IAB 对话框时（即在对话框边界外点击），我没有收到任何通知。我希望收到某种“用户取消”失败事件，但不会触发 onIabPurchaseFinished、onConsumeFinished 或 onQueryInventoryFinished。结果，我的应用程序对此没有响应，并且屏幕上留下了一个肮脏的未使用的活动。我错过了某种“dialogIsFinished”事件吗？
2.  当用户尝试购买他们已经拥有的物品时，应用程序会崩溃。令人难以置信的是，这似乎是预期的行为，因为控制台上打印了一些暗示此内容的内容（“应用内计费错误：无法购买商品，错误响应：7：商品已拥有”）。我知道我应该在启动时查询可恢复的交易，但这不是一个解决方案，因为可以想象用户可以在恢复操作完成之前导航到我的 UI 的购买流程。当然，这应该是一个非硬停止，如对话框或其他东西？我在这里做错了吗？我简直无法理解，谷歌的某个人认为这种情况应该严重崩溃......

非常感谢（提前）您的帮助。如果您认为有必要，我非常乐意分享代码，尽管我的问题似乎更多地是关于功能设计的。我希望我在这里做错了什么，因为我无法想象像谷歌这样有能力的公司会重新编写整个系统并且仍然到处都是如此巨大的漏洞...... :-/

再次感谢，

本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T23:42:05.770

嗯，那是我的错。当我编写 launchPurchaseFlow() 时，我最终遗漏了一些有关失败案例的清理代码。不仅在那里，而且在那之后的几个 catch{} 子句上也是如此。感谢您指出了这一点！这刚刚在源存储库中修复：[http ://code.google.com/p/marketbilling](http://code.google.com/p/marketbilling)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:11:18.813

我有同样的错误，我在购买后不小心忘记消费该物品。但是当我尝试购买另一个相同的项目时，应用程序崩溃了。

我仔细研究了 Google IabHelper 类，发现这个语句没有被正确处理。我做了一些小改动，现在它可以工作了。而不是崩溃与侦听器一起发送错误消息。

这是代码的修改部分。它在`launchPurchaseFlow()`方法中。我不确定通过更改看起来需要的代码我做了什么好事。希望能帮助到你。

```
try {
        logDebug("Constructing buy intent for " + sku);
        Bundle buyIntentBundle = mService.getBuyIntent(3, mContext.getPackageName(), sku, ITEM_TYPE_INAPP, extraData);
        int response = getResponseCodeFromBundle(buyIntentBundle);
        if (response != BILLING_RESPONSE_RESULT_OK) {
            logError("Unable to buy item, Error response: " + getResponseDesc(response));

            result = new IabResult(response, "Unable to buy item");
            if (listener != null) listener.onIabPurchaseFinished(result, null);

            /* Finish Current Async Task*/
            flagEndAsync();

        } else {
            PendingIntent pendingIntent = buyIntentBundle.getParcelable(RESPONSE_BUY_INTENT);
            logDebug("Launching buy intent for " + sku + ". Request code: " + requestCode);
            mRequestCode = requestCode;
            mPurchaseListener = listener;
            act.startIntentSenderForResult(pendingIntent.getIntentSender(),
                                           requestCode, new Intent(),
                                           Integer.valueOf(0), Integer.valueOf(0),
                                           Integer.valueOf(0));

        } 
```

# deployment - GlassFish 中部署的身份验证配置

> ID：14397348
> 
> 赞同：0
> 
> 时间：2013-01-18T10:51:22.753
> 
> 标签：deployment, ejb-3.0, glassfish-3

我正在使用 Oracle 的[教程](http://docs.oracle.com/javaee/6/tutorial/doc/docinfo.html)、Ant 1.8 和 Glassfish 3.1.2.2（在 Windows 7 中）学习 EJB 3。

在第一个[示例](http://docs.oracle.com/javaee/6/tutorial/doc/bnbod.html)中，我正确构建了 EAR，但是当我运行

```
ant deploy 
```

通过 cmd，我收到此消息

```
deploy:
     [echo] deploys the application in cart -  build/cart.ear
     [echo] C:\installati\glassfish-3_1_2_2\glassfish3\glassfish/bin/asadmin.bat
        --host localhost       --port 4848       deploy --name cart       --forc
e=true --upload=true        --dbvendorname SQL92 build/cart.ear
     [exec] Authentication failed for user: null
     [exec] (Usually, this means invalid user name and/or password)
     [exec] Command deploy failed. 
```

该教程没有说任何关于安全配置的内容，而且我对 Glassfish 不太了解。我尝试使用命令*add-resources*（遵循这个类似的[线程](http://glassfish.10926.n7.nabble.com/quot-Authentication-failed-with-password-quot-updating-asadminpass-td75950.html)），但我不知道这个文件的语法。

我认为路径的配置没有问题，因为蝙蝠已正确运行...

我看到了问题的答案[，](https://stackoverflow.com/questions/4385079/glassfish-deploy-w-force)但这不是我的情况......

有人发现过类似的问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T10:44:37.743

我解决了：我重新安装了 Glassfish。

***重新安装后，大多数示例（不是全部）都可以在没有身份验证假设***的情况下正常工作。

也许我的问题是使用在网络上找到的另一个问题的解决方案产生的，并且不知不觉中我在部署 GlasshFish 的过程中误导了一些东西。

# objective-c - 即使请求明确表示没有错误，也执行 Fetch Result 返回错误

> ID：14397353
> 
> 赞同：4
> 
> 时间：2013-01-18T10:51:38.690
> 
> 标签：objective-c, cocoa-touch

永久存储顺便说一句是内存，我想知道它是否合理

这是3行代码：

```
PO(request);
fetchedObjects = [moc executeFetchRequest:request error:&error];
PO(fetchedObjects); 
```

请求对象：

```
request: <NSFetchRequest: 0x8eba110> (entity: Business; predicate: (ID IN {"monumen-selamat-datang__-6.19_106.82"}); sortDescriptors: ((null)); type: NSManagedObjectResultType; returnsObjectsAsFaults: NO; relationshipKeyPathsForPrefetching: ((
        Aliases,
        Building,
        City,
        DistanceGrouping,
        Districts,
        Images,
        LatitudeLongitude,
        OpeningHour,
        Phones,
        Promotions,
        Rating,
        RatingGroup,
        Reviews,
        Tags,
        Tenants,
        URLs
    )); ) 
```

很明显，你可以看到它有`returnsObjectsAsFaults: NO`

返回值：

```
fetchedObjects: (
        "<Business: 0x8ebf3e0> (entity: Business; id: 0x8c4af70 <x-coredata://0111F3D9-6254-4037-AC80-5FEBECEB2343/Business/p332> ; data: <fault>)"
    ) 
```

它包含：`data: <fault>`

# wordpress - 获取到类别的正确链接 - Wordpress - Genesis - 新闻主题

> ID：14397354
> 
> 赞同：0
> 
> 时间：2013-01-18T10:51:40.157
> 
> 标签：wordpress

```
if ( $cat ) echo '<a class="custom-cat-btn" href="#cat-' . $cat . '">More ' . get_cat_name($cat) . ' Posts</a>'; 
```

这给了我： http: [//mydomain.com/#cat-127](http://mydomain.com/#cat-127)

但是当我点击链接时我得到一个 404

谁能帮我获取实际链接

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:59:45.997

[您可以使用get_category_link](http://codex.wordpress.org/Function_Reference/get_category_link)检索类别链接

所以，

```
if ( $cat ) echo '<a class="custom-cat-btn" href="' . esc_url( get_category_link( $cat ) ) . '">More ' . get_cat_name($cat) . ' Posts</a>'; 
```

# joomla - 添加到购物车按钮在 mercurial 中不可见

> ID：14397358
> 
> 赞同：1
> 
> 时间：2013-01-18T10:51:54.730
> 
> 标签：joomla, virtuemart

我正在使用`virtuemart 2.0.16`，我遇到了一些与问题相关的`add to cart`按钮，没有登录我们无法显示添加到购物车按钮。登录后添加到购物车按钮显示。但我想显示添加到购物车按钮用户是否登录。

[这是我的链接](http://www2.igoqr.com/index.php/handverlesen/bio-knoblauch-mit-tomaten-und-oliven-detail)

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:05:03.050

首先检查 VM 配置选项卡与此相关的任何设置。

就像添加到购物车按钮只显示给登录用户或类似的东西。

如果你找不到那个。

```
components/com_virtuemart/view/productdetails/tmpl/default.php and default_addtocart.php 
```

文件中可能正在检查用户是否登录。

就像是

```
if($user->id){
     <a href="#"><button>add to cart</button></a>
} 
```

该代码与上面的代码不完全相同，但它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T13:12:33.100

你发现

```
 components/com_virtuemart/views/productdetails/tmpl/default.php 
```

找到addtocart按钮代码然后放

```
 $user =& JFactory::getUser();
    if($user->id){
       // add to cart button code here
    }else{
       // your message here
    } 
```

# javascript - 提交多个表单后重定向

> ID：14397359
> 
> 赞同：0
> 
> 时间：2013-01-18T10:51:58.347
> 
> 标签：javascript, jquery

有一个提交按钮，可以将一些表单[序列化](http://api.jquery.com/serialize/)并相应地提交给服务器上的不同处理程序。发送数据后，我想重定向到另一个页面，用户可以在其中看到结果的概述。我怎么能这样做？立即重定向不起作用，因为页面没有足够的时间提交数据（或者看起来如此）。

以下失败：

```
$(document).ready(function(){
    $('#submit_all_button').submit(function(){
        var querystring = $('#q1').serialize();

        $.get('/change_q1', querystring);

        var querystring = $('#q2').serialize();
        $.get('/change_q2', querystring);

        var querystring = $('#q3').serialize();
        $.get('/change_q3', querystring);

        window.location.href = "/main";
        return false;
    });
}); 
```

当提交操作是重定向到`/main`页面时，也会出现同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:58:52.487

使用[jQuery get()](http://api.jquery.com/jQuery.get/)并跟踪是否发送了所有更新`success function`。所以最后一个成功函数调用最终会重定向你的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:27:39.770

我在 PHP 中有另一个有趣的答案：将它作为后台作业运行（其他答案是最好的方法，但如果由于某种原因你不能使用它）：

```
set_time_limit(900);
ignore_user_abort(true);
header("Connection: close");
header("Content-Length: " . mb_strlen('ok'));
echo 'ok';
flush();
// Your code follows here 
```

也许你可以在你的服务器端语言中使用这个逻辑。

# opencv - 使用 Filestrage 在 OpenCV 中保存和读取 Mat 向量的向量

> ID：14397363
> 
> 赞同：0
> 
> 时间：2013-01-18T10:52:04.073
> 
> 标签：opencv, vector, file-storage

我想就使用 opencv 的文件存储读取和写入 Mats 向量的向量寻求帮助。

我用这个函数来写：

```
Template<typename _Tp>inline void writeFileNodeList(FileStorage& fs, const string& name,const vector<_Tp>& items) 
{
        // typedefs
        //typedef typename vector<_Tp>::const_iterator constVecIterator;
        vector<Mat>::iterator it;
        // write the elements in item to fs
        fs << name << "[";
        for (it = items.begin(); it != items.end(); ++it) {
            fs << *it;
        }
        fs << "]";
} 
```

这要读：

```
template<typename _Tp>inline void readFileNodeList(const FileNode& fn, vector<_Tp>& result) {
    if (fn.type() == FileNode::SEQ) {
        //vector<Mat>::iterator it;
        for (FileNodeIterator it = fn.begin(); it != fn.end();it++) {
            _Tp item;
            it >> item;
            result.push_back(item);
        }
    }
} 
```

用于编写的代码效果不佳，无法构建用于阅读的代码。我实际上完全绝望，我已经用尽了我能想象的一切。我在这里寻找相同的示例代码，但没有一个对我不起作用。感谢帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:24:10.177

我终于自己解决了这个问题。

这是代码：

```
 void writeFileNodeList(FileStorage& fs, const string& name,vector<vector<Mat>> items) 
    {
        int IDs=items.size();
        // typedefs
        fs << name << "{";
        for (int i=0;i<IDs;i++)
        {
            stringstream ss;
            string s;
            string a;
            a="ID-label";
            ss << (i+1);
            s = ss.str();
            a+=s;

            fs  << a << "[";

            for (int j=0;j<items[i].size();j++)
            {
                fs<<items[i][j];        
            }   
            fs <<"]";
        }
        fs << "}";

} 
```

> 这是读取xml的部分

```
vector<vector<Mat>> readFileNodeList2(const FileNode& fn) 
{   
    //cout <<fn.name() <<endl;
    //cout <<fn.size() <<endl;
    vector<vector<Mat>> output;
    //cout << fn.isMap() << endl;

    for (int ID=0;ID<fn.size();ID++)
    {
        stringstream ss;
        string s;
        string a;
        a="ID-label";
        ss << (ID+1);
        s = ss.str();
        a+=s;
        FileNode temp_ID;
        temp_ID=fn[a];
        vector<Mat> one_person_patrerns;
        readFileNodeList(temp_ID,one_person_patrerns);
        output.push_back(one_person_patrerns);
    }
    return output;
}

template<typename _Tp>inline void readFileNodeList(const FileNode& fn,vector<_Tp>& result) 
{
    if (fn.type() == FileNode::SEQ) {
        for (FileNodeIterator it = fn.begin(); it != fn.end();) {
            _Tp item;
            it >> item;
            result.push_back(item);
        }
    }
} 
```

# r - match.call 使用默认参数

> ID：14397364
> 
> 赞同：20
> 
> 时间：2013-01-18T10:52:04.477
> 
> 标签：r

作为函数的一部分，我想输出所有参数及其值的列表，包括默认值。例如，具有以下参数的函数：

```
foo <- function(x=NULL,y=NULL,z=2) {
  #formals()
  #as.list(match.call())[-1]
  #some other function?....
} 
```

给出这样的输出：

```
> foo(x=4)

$x
[1] 4

$y
NULL

$z
[1] 2 
```

`formals`调用函数时不会更新以提供 values 参数值。`match.call`可以，但不提供参数的默认值。是否有另一个功能可以提供我想要的输出？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-18T12:10:37.170

希望这不会导致龙。

```
foo <- function(x=NULL,y=NULL,z=2) {
  mget(names(formals()),sys.frame(sys.nframe()))

}

foo(x=4)

$x
[1] 4

$y
NULL

$z
[1] 2

print(foo(x=4))

$x
[1] 4

$y
NULL

$z
[1] 2 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-18T11:45:38.270

您可以混合使用 2`match.call`和`formals`

```
foo <- function(x=NULL,y=NULL,z=2)
{
  ll <- as.list(match.call())[-1]     ## 
  myfor <- formals(foo)               ## formals with default arguments
  for ( v in names(myfor)){
             if (!(v %in% names(ll)))
                ll <- append(ll,myfor[v])  ## if arg is missing I add it
             }
  ll
} 
```

例如 ：

```
 foo(y=2)
$y
[1] 2

$x
NULL

$z
[1] 2

> foo(y=2,x=1)
$x
[1] 1

$y
[1] 2

$z
[1] 2 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-10T18:02:17.033

这是尝试将此逻辑包装在可重用函数中以代替`match.call`：

```
match.call.defaults <- function(...) {
  call <- evalq(match.call(expand.dots = FALSE), parent.frame(1))
  formals <- evalq(formals(), parent.frame(1))

  for(i in setdiff(names(formals), names(call)))
    call[i] <- list( formals[[i]] )

  match.call(sys.function(sys.parent()), call)
} 
```

看起来它有效：

```
foo <- function(x=NULL,y=NULL,z=2,...) {
  match.call.defaults()
}

> foo(nugan='hand', x=4)
foo(x = 4, y = NULL, z = 2, ... = pairlist(nugan = "hand")) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-18T18:28:17.667

```
 foo <- function(x=NULL,y=NULL,z=2) {
   X <- list(x,y,z); names(X) <- names(formals()); X
 }
 z <- foo(4)
 z
#------
$x
[1] 4

$y
NULL

$z
[1] 4 
```

# regex - 如何在 CodeIgniter 路由中匹配多个段

> ID：14397369
> 
> 赞同：0
> 
> 时间：2013-01-18T10:52:15.277
> 
> 标签：regex, codeigniter, routing, routes

*我正在尝试通过仅更改控制器名称*并保持任何其他分段不变来重新路由我的 CodeIgniter URI ，无论有多少（如果有的话）。

我的控制器使用单级文件夹结构，例如**controllers/user/profile_controller.php**。

每个控制器都称为**[name]_controller**以将其与其他文件/类区分开来并避免冲突（即用户控制器与 Tank Auth 用户模型冲突），但我希望 URI 为：

```
/users/profile 
```

因此，一个简单的路线（有效）将是：

```
$route['(:any)/(:any)'] = '$1/$2_controller'; 
```

但以上不允许后续段，*我不知道可能有多少*。(:any) 不起作用，因为它仅适用于单个段，显然我不想为潜在的段数编写多个路由，即使它很低。

我已尝试使用正则表达式来匹配 URI 的其余部分（例如：users/profile/edit/123/abc），但以下内容不起作用：

```
$route['(:any)/(:any)/(.+)'] = "$1/$2_controller/$3"; 
```

有谁知道是否可以匹配剩余的段并将它们放回重新路由的 URI 上？

提前致谢。垫

# backbone.js - 骨干网.js - 我如何获取本地或服务器数据

> ID：14397375
> 
> 赞同：3
> 
> 时间：2013-01-18T10:52:38.783
> 
> 标签：backbone.js

我对backbone.js 很陌生，为了尝试它，我创建了一个函数来使用我的数组附加一个元素。但我不知道如何从服务器或我的本地路径中获取相同的内容。

我尝试了一些教程，但仍然没有得到任何好的结果。任何人都可以更正我从本地文件夹或服务器获取数据的功能吗？

代码 ：

这是我的本地路径：`'..data/data.json'`

```
(function($){ 
  var student = [
    {name:'student1'},
    {name:'student2'},
    {name:'student3'}
  ]

var model = Backbone.Model.extend({
  defaults:{
    name:'default name'  
  }
});

var collection = Backbone.Collection.extend({
  model:model  
});

var itemViews = Backbone.View.extend({
  tagname:'li',
  render:function(){
    this.$el.html(this.model.get('name'));
    return this;
  }  
})

var view = Backbone.View.extend({
  el: $("#contacts"),
  initialize:function(){
    this.collection = new collection(student);
    this.render();
  },
  render:function(){
    var that = this;
    _.each(this.collection.models, function(item){
      that.renderName(item);
    })
  },
  renderName:function(item){
    var itemView = new itemViews({model:item});
    this.$el.append(itemView.render().el);
  }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T11:10:22.667

集合具有`url`链接到可以获取模型的 url 的属性（当然是正确的 JSON 格式）。

如果您有 RESTful API，您可以将它们直接绑定到后端的集合。

在您的情况下，您可以按如下方式修改集合定义

```
var collection = Backbone.Collection.extend({
  model:model,
  url: '..data/data.json' //OR WHATEVER THE URL IS 
}); 
```

然后在实例化您的集合时，您必须调用 fetch() 方法来填充集合。

```
 myCollection = new collection();
   myCollection.fetch(); 
```

有关更多信息，请参阅[此帖子](https://stackoverflow.com/questions/6263539/how-to-set-a-collections-url)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T00:18:28.600

Backbone 将根据需要从服务器发送或接收的内容在同一个 url 上调用 GET、POST、DELETE 等。因此，如果您正在构建 REST api，您的控制器或路由器应该将适当的功能路由到这些方法。请参阅下面的确切映射：

```
create → POST   /collection
read → GET   /collection[/id]
update → PUT   /collection/id
delete → DELETE   /collection/id 
```

附带说明一下，如果您无法控制从服务器返回的 JOSN，则可以在 parse 函数中将其格式化为您喜欢的任何格式。

```
parse: function(response) { return response.itemYouWantAdded; } 
```

如果您的服务器正在返回对象中的对象，例如 twitter 提要，就会出现这种情况。

或者您可以简单地在解析函数中手动从响应中填充模型

```
parse: function(response) { var tmpModel = { 
                            item1:response.item1, 
                            item2:response.item2 
                            }; 
return tmpModel;  } 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:09:00.203

您可以[为您的模型](http://backbonejs.org/#Model-url)或[您的收藏](http://backbonejs.org/#Collection-url)设置一个 URL 。然后，当您运行[fetch](http://backbonejs.org/#Collection-fetch)时，它会将您的 JSON 直接读取到单个模型或模型集合中。所以在你的情况下，你的收藏可能看起来像

```
var collection = Backbone.Collection.extend({
    url: '..data/data.json',
    model: model
});

collection.fetch(); // Could also use collection.reset() 
```

您只需要确保您的 JSON 格式正确以匹配您的模型的属性。

# jquery - 悬停动作在jQuery的点击事件后反转

> ID：14397378
> 
> 赞同：0
> 
> 时间：2013-01-18T10:52:42.543
> 
> 标签：jquery, jquery-ui, jquery-hover, jquery-click-event

当光标位于其中之一时，我正在使用系统突出显示 2 列。

然后，用户可以通过单击将每个单元格内的值从`No`更改为 。`Yes`发生这种情况时，`hover`动作似乎倒转了。它在光标位于外部时起作用。

这是我的例子的小提琴：http: [//jsfiddle.net/L9Kfq/](http://jsfiddle.net/L9Kfq/)

当我单击以更改单元格的值时，这些列应保持突出显示。为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:59:47.123

我稍微简化了您的 jQuery，并使用`mouseover`and`mouseout`而不是`hover`. 我希望下面的代码段是不言自明的。

```
$('td,th').on('mouseover', function() {
    $('td:not(.'+$(this).attr('class')+')').addClass('active');
    $('td.'+$(this).attr('class')).removeClass('active');
});

$('td,th').on('mouseout', function() {
    $('td').removeClass('active');
}); 
```

另请参阅更新[的 jsFiddle](http://jsfiddle.net/L9Kfq/4/ "jsFiddle")。

# view - Knockout.js：viewModel 中的 Null 值在视图中的 foreach 上引发异常

> ID：14397382
> 
> 赞同：2
> 
> 时间：2013-01-18T10:52:56.190
> 
> 标签：view, knockout.js, viewmodel, nullreferenceexception

所以我有一个看起来像这样的viewModel

```
self.zones = ko.observableArray(zones);

   ko.utils.arrayForEach(self.zones(), function (zone) {

        //Get all rooms for the zone
        zone.rooms = getChildren("Organization", "Organization", zone.ID);

        if (zone.rooms.length > 0) {

            zone.buttons = ko.observableArray([]);

            //For each Room in Zone find the Buttons and add them to the Zone.buttons ObservableArray 
            ko.utils.arrayForEach(zone.rooms, function (room) {
                room.buttons = getChildren("Organization", "ButtonAssign", room.ID, { scheduleID: self.scheduleID });

                ko.utils.arrayForEach(room.buttons, function (button) {
                                           zone.buttons.push(button);
                });
            });

        } 
```

所以你可以看到一个区域有一个叫做按钮的属性，它是一个 Observable 数组

在我看来，我遍历每个区域并输出按钮，但我的一个区域不包含任何按钮并引发此异常：

错误：无法解析绑定。消息：ReferenceError：未定义按钮；绑定值：foreach:buttons

```
 <table>
        <tbody>
            <tr data-bind="foreach: zones" style="vertical-align: top;">
                                        <div class="zoneDiv">
                        <span data-bind="text: Name"></span>
                        <div data-bind="foreach:buttons" class="buttonsList">
                            <div class="buttonField">
                            <div data-bind="text: Name" style="float: left; width: 140px;">
                                    </div>

                                </div>
                                <input type="hidden" data-bind="value: ID" />

                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table> 
```

所以我的问题是：在开始循环之前如何检查可观察数组中的空值？

此外，您如何检查单个属性（例如 button.Name）上的空值，以便如果按钮有名称，我会将其写在 div 中，如果没有，我不会写出任何内容（或默认文本）。

所以基本上对视图中的视图模型属性进行空检查，所以我不会得到这个异常

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:38:07.983

> 所以我的问题是：在开始循环之前如何检查可观察数组中的空值？

使用`if`绑定： http: [//knockoutjs.com/documentation/if-binding.html](http://knockoutjs.com/documentation/if-binding.html)

但是对于您的代码，为什么不设置一个空的 observableArray，这样您就不需要引入任何条件：

```
self.zones = ko.observableArray(zones);

ko.utils.arrayForEach(self.zones(), function (zone) {

    zone.rooms = getChildren("Organization", "Organization", zone.ID);
    zone.buttons = ko.observableArray([]);

    if (zone.rooms.length > 0) {

        //For each Room in Zone find the Buttons and add them to the Zone.buttons ObservableArray 
        ko.utils.arrayForEach(zone.rooms, function (room) {
            room.buttons = getChildren("Organization", "ButtonAssign", room.ID, { scheduleID: self.scheduleID });

            ko.utils.arrayForEach(room.buttons, function (button) {
                zone.buttons.push(button);
            });
        });

    }
}); 
```

# jquery - 同一页面上的多个 jQuery 加载将不起作用

> ID：14397386
> 
> 赞同：2
> 
> 时间：2013-01-18T10:53:19.670
> 
> 标签：jquery, load

我正在开发一个网页，该网页将显示在一台巨大的电视上（在一所学校），它将显示现在正在上什么课以及接下来会发生什么，以及对学生的一些警告和一些新闻源。

我正在使用多个 .loads() 在此页面上异步加载 PHP 文件。我有 3 个模块每 5 到 10 秒加载一次（以更新显示的内容），问题是我不能让它们一起工作，当只启用其中一个或为其他事情设置一个巨大的超时时顺利。似乎当它一次又一次地调用 .load() 时，页面无法加载并保留旧内容。

我的 apache 日志在每次轮询文件时显示所有“200 OK”请求

[...] - - [18/Jan/2013:08:37:17 -0200] "GET /getNews.php HTTP/1.1" 200 473 [...]

[...] - - [18/Jan/2013:08:37:18 -0200] "GET /labCycle.php HTTP/1.1" 200 1285 [...]

轮询 Javascript 代码如下：

```
$(document).ready(function() {
    updateNews();
    moduloProgramacaoPulse();
    moduloAvisosPulse();   
});

function updateNews(){
    $("#news").fadeOut('slow', function() {
        $("#news").load("getNews.php");
    });
    $("#news").fadeIn("slow");
    window.setTimeout(updateNews, 10000);  
}

function moduloProgramacaoPulse(){
    $("#programacao").fadeOut('slow', function() {
        $("#programacao").load("labCycle.php");
    });
    $("#programacao").fadeIn("slow");
    window.setTimeout(moduloProgramacaoPulse, 6000);  
}

function moduloAvisosPulse(){
    $("#avisos").load("getAvisos.php");
    window.setTimeout(moduloAvisosPulse, 60000);  
} 
```

这些功能中的每一个都可以单独完美地工作，但不能一起工作。（在文档就绪事件上测试了注释行。PHP 代码正在处理内容循环，每次加载时返回不同的内容。

先感谢您

# entity-framework-4 - 实体框架和 SQL Server 表属性

> ID：14397387
> 
> 赞同：0
> 
> 时间：2013-01-18T10:53:20.387
> 
> 标签：entity-framework-4, sql-server-2008-r2, entity-framework-5

我们有一个带有多个表的 SQL Server 2008 R2 数据库，每个表都有许多触发器。在其中一列中，我们将调用此 Person.Age 我们有一个默认值，因此如果我没有明确提供一个值，它默认为“18”。

```
 create table PERSON
(
id                              int             IDENTITY(1,1) PRIMARY KEY,
age                             char(2)         DEFAULT '18',
Name                            char(40),   
); 
```

我正在使用 EntityFramework 4.0（也尝试过 5.0）和 Visual Studio 2010 来加载并从数据库中选择。每当我使用以下语句插入表时，它都会插入一行，但它没有完成默认值：

```
var person = new Person
{
   Name = "Peter"
};

using (var ctx = new MyEntities())
            {
                ctx.PERSON.AddObject(person);
                ctx.SaveChanges();
            } 
```

这将导致一行名称为 Peter，但年龄将设置为空 - 而不是我的默认值 18。

当我刷新/加载我的 EDMX 文件时，我似乎只能导入简单的表和视图，并且似乎没有导入属性的选项 - 尽管我会认为这是默认完成的？任何想法为什么默认属性没有触发？

此外，我在 SQL Server 中定义了触发器，因此当将新行插入 PERSON 时，会更新另一个表。如果我直接对数据库运行 SQL，这同样有效，但如果我使用 EntityFramework 通过 Visual Studio 执行则不起作用。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:01:11.607

EF 会将列显式设置为您传递的值。因为，当您创建一个 Person 实体时，age 的值将默认设置为 null EF 将发送一个命令，其中会将列值设置为 null。如果您想拥有默认值，请在 ctor 中设置默认值（否则引用属性的默认值为 null，值类型属性（例如 int）的默认值为 default(T)）。

EF 设计器从数据库中获取所有列，并创建一个模型，该模型的实体具有与它反向工程的表和列的值相对应的属性。然后，您可以在设计器中调整模型 - 例如，您可以删除不需要的属性。

在触发的情况下，我不知道“不起作用”对您意味着什么——这可能取决于您的期望。EF 只是向数据库发送一个命令。因此，如果您发送与 EF 发送相同的 Sql 命令，它应该以相同的方式“不起作用”。话虽如此，EF 与数据库无关，并且不知道触发器之类的数据库魔术。此外，通信只是从 EF 到 DB 的一种方式。因此，如果您希望数据库通知 EF 某事，那么它将无法正常工作。没有办法做到这一点。

# c# - 覆盖联合提要中的根元素，将命名空间添加到根元素

> ID：14397392
> 
> 赞同：4
> 
> 时间：2013-01-18T10:53:31.793
> 
> 标签：c#, xml, rss, xmlwriter, syndicationfeed

除了 a10 之外，我还需要向我的提要的 rss(root) 元素添加新的命名空间：

```
<rss xmlns:a10="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
.
.
. 
```

我正在使用序列化为 RSS 2.0 的 SyndicationFeed 类，并使用 XmlWriter 输出提要，

```
var feed = new SyndicationFeed(
                    feedDefinition.Title,
                    feedDefinition.Description,
     .
     .
     .

using (var writer = XmlWriter.Create(context.HttpContext.Response.Output, settings))
        {
            rssFormatter.WriteTo(writer);
        } 
```

我尝试在 SyndicationFeed 上添加 AttributeExtensions ，但它将新命名空间添加到通道元素而不是根，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:46:02.250

不幸的是，格式化程序无法按照您需要的方式进行扩展。

您可以使用中间 XmlDocument 并在写入最终输出之前对其进行修改。

此代码将向最终 xml 输出的根元素添加命名空间：

```
var feed = new SyndicationFeed("foo", "bar", new Uri("http://www.example.com"));
var rssFeedFormatter = new Rss20FeedFormatter(feed);

// Create a new  XmlDocument in order to modify the root element
var xmlDoc = new XmlDocument();

// Write the RSS formatted feed directly into the xml doc
using(var xw = xmlDoc.CreateNavigator().AppendChild() )
{
    rssFeedFormatter.WriteTo(xw);
}

// modify the document as you want
xmlDoc.DocumentElement.SetAttribute("xmlns:example", "www.example.com");

// now create your writer and output to it:
var sb = new StringBuilder();
using (XmlWriter writer = XmlWriter.Create(sb))
{
    xmlDoc.WriteTo(writer);
}

Console.WriteLine(sb.ToString()); 
```

# mysql - 如何将 shell 命令的结果分配给 MySQL 变量？

> ID：14397393
> 
> 赞同：2
> 
> 时间：2013-01-18T10:53:39.067
> 
> 标签：mysql, shell, variables

**MySQL shell**中的 shell 命令返回值：

```
mysql> \! echo 1
1 
```

如何将此结果分配给 MySQL 变量？喜欢：

```
mysql> set @var = \! echo 1
1
    -> ; 
```

**ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:20:17.057

问题是这`SET`是一个服务器命令，它改变了服务器上保存的变量的状态；而`system`（及其`\!`简写）是一个客户端命令，它在客户端上派生一个进程。虽然客户端可以将分叉进程的退出代码传输到服务器以存储在用户变量中，但我认为 MySQL 命令行客户端不提供此功能。

来自[`mysql-5.5.29/client/mysql.cc`](http://fossies.org/dox/mysql-5.5.29/mysql_8cc_source.html#l03958)：

```
3958: static int
3959: com_shell(String *buffer __attribute__((unused)),
3960:           char *line __attribute__((unused)))
3961: {
3962:   char *shell_cmd;
3963: 
3964:   /* Skip space from line begin */
3965:   while (my_isspace(charset_info, *line))
3966:     line++;
3967:   if (!(shell_cmd = strchr(line, ' ')))
3968:   {
3969:     put_info("Usage: \\! shell-command", INFO_ERROR);
3970:     return -1;
3971:   }
3972:   /*
3973:     The output of the shell command does not
3974:     get directed to the pager or the outfile
3975:   */
3976:   if (system(shell_cmd) == -1)
3977:   {
3978:     put_info(strerror(errno), INFO_ERROR, errno);
3979:     return -1;
3980:   }
3981:   return 0;
3982: } 
```

请特别注意，`system(3)`调用的返回值不会存储在任何地方；但是，如果进程使用该代码退出，则`com_shell()`函数调用将返回。`-1`

# android - 在 sqlite 数据库中添加新表

> ID：14397394
> 
> 赞同：1
> 
> 时间：2013-01-18T10:53:41.153
> 
> 标签：android, sqlite

我有一个问题。

我的数据库中只有一张表

```
@Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL( "CREATE TABLE books (_id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT, author TEXT,isbn TEXT,city TEXT);");
        Log.v("onCreate-------","called onCreate"); 

    } 
```

这里：-

```
sqlite> select * from books; 
```

也工作正常。

但我想添加新表，所以我想在这里添加：-

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        android.util.Log.w("books",
        "Upgrading database, which will destroy all old data");

        //db.execSQL("ALTER TABLE myallbooks ADD COLUMN city2");
        db.execSQL("CREATE TABLE myfields (author TEXT,isbn TEXT,city TEXT);");

        Log.v("onUpgrade-------","called onUpgrade with alter"); 
    } 
```

更改版本号后，我运行该应用程序，但在任何地方都没有找到该表。

> sqlite> 从 myfields 中选择 *；

`Error:-no such table :myfield.`.....................为什么它不创建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:55:58.773

`onUpgrade()`当您将数据库版本更改为更高版本时将调用。看起来您没有增加版本并试图选择表格的列`myfields`。

请检查您是否将版本号更新为比早期版本更高的版本号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:01:22.183

```
@Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL( "CREATE TABLE books (_id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT, author TEXT,isbn TEXT,city TEXT);");
        Log.v("onCreate-------","called onCreate"); 

   db.execSQL("CREATE TABLE myfields (author TEXT,isbn TEXT,city TEXT);");

    }

@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        android.util.Log.w("books",
        "Upgrading database, which will destroy all old data");

        //db.execSQL("ALTER TABLE myallbooks ADD COLUMN city2");
       // db.execSQL("CREATE TABLE myfields (author TEXT,isbn TEXT,city TEXT);");

          //delete tables
                db.execSQL("DROP TABLE IF EXISTS books");
          // Create tables again`enter code here`
        onCreate(db);

        Log.v("onUpgrade-------","called onUpgrade with alter"); 
    } 
```

# c++ - Windows 父子进程创建

> ID：14397396
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:53:47.003
> 
> 标签：c++, windows

我想使用 C++ 在 Windows 中创建 5 个子进程。但我很困惑，`CreateProcess`要求`lpApplicationName`而不是喜欢`fork`我可以弄清楚我是孩子还是父母。如何在 Windows 中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:02:06.920

不幸的是，该`CreateProcess`功能只能用于加载程序并为该程序启动新进程。

但是，您可以使用它`CreateProcess`来模拟`fork`功能，方法是要求它加载您已经运行的程序，然后要求它跳转到正确的位置。这就是 Cygwin 所做的（或至少是），正如[这个旧答案](https://stackoverflow.com/a/985374/440558)所引用的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:56:44.213

在 Windows 中使用线程而不是多进程通常更可取，因为进程在 Windows 中比在 UNIX 中重得多。

但是，您可以通过将应用程序的名称和路径传递给 CreateProcess（如果您还不知道，请使用 GetModuleFileName）并包含一个命令行参数来告诉您的应用程序它正在以一个子进程。

请记住，子进程将从头开始，它们不会像使用 fork 时那样拥有父内存的副本。

# svn - Intellij Idea 12 社区版 svn

> ID：14397399
> 
> 赞同：1
> 
> 时间：2013-01-18T10:54:03.703
> 
> 标签：svn, intellij-idea

我想知道是只有我还是 intellij 社区 12 在连接到 SVN（1.6 版）时遇到问题。每次我输入 url 来签出项目时，它都会挂起，很长一段时间后它会返回一条消息，表明服务器拒绝连接。使用版本 11，它可以正常工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:10:33.880

看起来这是一个 Intellij 错误。

[http://youtrack.jetbrains.com/issue/IDEA-100494](http://youtrack.jetbrains.com/issue/IDEA-100494)

# jquery - 在可调整大小的父图像上定位元素

> ID：14397401
> 
> 赞同：0
> 
> 时间：2013-01-18T10:54:13.630
> 
> 标签：jquery, css, html, twitter-bootstrap, positioning

我正在修改我的旅行摄影网站，以使其在不同的设备/分辨率上更好地工作。我正在使用 Twitter Bootstrap 和他们的响应选项，大多数都很好，但我现在遇到了障碍。

在现有网站上，我有一张地图，显示了我去过的所有地点（[你可以在这里看到](http://importedlight.com/map.php)）。

我的问题是，在新站点上，地图将调整大小，如果发生这种情况，指示位置的图钉将位于错误的位置。我想我需要以某种方式检查地图的宽度/高度，然后以某种方式动态地更改地图标记的位置，但我无法找出如何做到这一点。JQuery 我猜（这不是我的强项）。

做了一些搜索，但这似乎有点具体，我没有找到任何东西。如果有人有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:22:03.760

**设置星** 的css`position:absoulte`和`top:` `left` `right` `bottom`属性设置位置

# c# - 覆盖两个或多个位图以显示在 Picturebox (C#)

> ID：14397404
> 
> 赞同：10
> 
> 时间：2013-01-18T10:54:26.177
> 
> 标签：c#, bitmap, picturebox, alpha, alphablending

在我的 C# 程序中，我有一个 Picturebox，我想在其中显示视频流（连续帧）。我收到原始数据，然后将其转换为位图或图像。我可以一次显示一张图像而不会出现问题（重现视频流）。

现在我的问题是我想**合并 2 个或多个具有相同大小和 alpha 值（ARGB）的位图（如图层）并将其显示在图片框上**。

我已经阅读了很多关于 SO 的网站和帖子，但很多都使用 Graphics 类，我只是无法在我的应用程序上绘制它（很可能是因为我是 C# 的新手！并且已经有了我的程序设置，所以我不想改变结构）。

***我需要（知道）：***

1.  如何用 alpha 值覆盖两个或多个位图；
2.  请不要进行像素操作，负担不起性能成本。

非常感谢您！

**注意：**我认为这个问题不应该被标记（或关闭）为重复，因为我在 SO 中找到的所有内容都是通过像素操作或通过 Graphics 类完成的。（但我可能错了！）

**编辑：可能的解决方法（不是问题的解决方案**）
在 [A PictureBox Problem](https://stackoverflow.com/questions/4144371/a-picturebox-problem)中，第 4 个答案（来自用户 comecme）告诉我有 2 个图片框，一个在另一个之上。为了使它与这种方法一起工作，我必须做的唯一（额外）事情是：

```
private void Form1_Load(object sender, EventArgs e)
{
    pictureBox2.Parent = pictureBox1;
} 
```

其中pictureBox2 将是最上面的。

我不会认为这是对这个问题的答案，因为我认为这是一种解决方法（特别是因为拥有 10 个以上的图片框似乎并不理想！哈哈）。这就是为什么我会留下这个问题，等待我的问题得到**真正的**答案。

**编辑：解决！检查我的答案。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T16:53:00.183

这是我问题的**真正**答案。
1) 使用 a`List<Bitmap>`存储所有要混合的图像；
2）创建一个新的Bitmap来保存最终的图像；3）使用语句
在最终图像的顶部绘制每个图像。`graphics``using`

**编码：**

```
List<Bitmap> images = new List<Bitmap>();  
Bitmap finalImage = new Bitmap(640, 480);

...

//For each layer, I transform the data into a Bitmap (doesn't matter what kind of
//data, in this question) and add it to the images list
for (int i = 0; i < nLayers; ++i)
{
    Bitmap bitmap = new Bitmap(layerBitmapData[i]));
    images.Add(bitmap);
}

using (Graphics g = Graphics.FromImage(finalImage))
{
    //set background color
    g.Clear(Color.Black);

    //go through each image and draw it on the final image (Notice the offset; since I want to overlay the images i won't have any offset between the images in the finalImage)
    int offset = 0;
    foreach (Bitmap image in images)
    {
        g.DrawImage(image, new Rectangle(offset, 0, image.Width, image.Height));
    }   
}
//Draw the final image in the pictureBox
this.layersBox.Image = finalImage;
//In my case I clear the List because i run this in a cycle and the number of layers is not fixed 
images.Clear(); 
```

[此 tech.pro 网页](https://web.archive.org/web/20130214003927/http://tech.pro/tutorial/921/combining-images-with-csharp)中的积分转到**Brandon Cannaday**。

# xaml - 超链接访问颜色

> ID：14397406
> 
> 赞同：0
> 
> 时间：2013-01-18T10:54:28.463
> 
> 标签：xaml, hyperlink, windows-phone

单击超链接（已访问状态）后如何更改超链接的颜色。

我使用下一个代码动态创建超链接：

1.  我在 XAML 中使用 Paragraph 到 RichTextBox

2.  我在后面的代码中填充了这个 TShortName 对象：

    TShortName.Inlines.Add(GetNameUrlAsLink(((MyClass)DataContext).MyProperty));

3.  最后，我使用以下内容填充数据（超链接）：

    私有超链接 GetNameUrlAsLink(string hp) { var hl = new Hyperlink { NavigateUri = new Uri(hp), TargetName = "_blank", Foreground = new SolidColorBrush(currentAccentColorHex), FontSize = 20, }; hl.Inlines.Add(hp); 返回 hl; }

结果，我得到了带有强调色（currentAccentColorHex）的超链接。但是当我点击链接时我需要改变那个颜色，因为它变成了白色，这根本不适合我。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:04:27.043

尝试这个

```
 Dim scb As New SolidColorBrush()
  scb.Color = Colors.Green
  myHyperlinkButton.Background = scb 
```

# php - PHP 使字符串可用但不可读

> ID：14397407
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:54:31.263
> 
> 标签：php

所以我不确定这是否可能，但我们开始吧。我希望能够创建一个正常运行但不可读的字符串。例如：

```
$password = "//312(!@#()"; 
```

然后我可以去类似的东西。

```
if($input == $password) {

} 
```

无论如何我可以做到这一点吗？我可能正在通过我的脑海中的一个洞说话，但任何关于这个主题的帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:58:39.373

您可以散列字符串：

```
$pw_hash = "098f6bcd4621d373cade4e832627b4f6" //is the hash of "test"

if ($pw_hash == md5($variable)){
    //now you know, the variable is "test", 
    //without writing it plaintext in the sourcecode.
} 
```

但是搜索哈希。有比 md5 更好的选择。也可以在谷歌上搜索“salt”并了解“散列”和“加密”之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:06:49.173

从您的评论中，我相信您想在部署应用程序时隐藏您的 php 源代码。我看到许多开发人员通常使用将`base64_encode`原始 PHP 代码编码为单个字符串并`eval(base64_decode($str))`在他们部署的包中使用。

但是，这种方式只对普通用户有用，我们总是可以使用[http://perishablepress.com/tools/decoder/](http://perishablepress.com/tools/decoder/)之类的在线工具（或编写自己的函数）来获取原始源:)

# grails - 资源声明中带有参数的 Grails URL

> ID：14397409
> 
> 赞同：1
> 
> 时间：2013-01-18T10:54:42.947
> 
> 标签：grails, resources

圣杯 2.1

我已在我的视图中声明了以下新资源模块以支持 Google Map API：

```
'google-map' {
    resource url: 'http://maps.googleapis.com/maps/api/js?key=MyGoogleApiKeyGoesHere&sensor=false', attrs: [type: "js"], disposition: 'head'
} 
```

现在，当我将此模块包含到我的一些页面中时，我会得到以下 HTML 代码：

```
<script src="http://maps.googleapis.com/maps/api/js" type="text/javascript" ></script> 
```

如您所见，由于某种原因导致错误（Google 说当我尝试打开页面时需要传感器参数），URL 的参数部分已被删除。

有人知道如何防止 Grails Resources 插件从 URL 中删除查询参数吗？

# c - C崩溃，大图上的BFS可能路线

> ID：14397415
> 
> 赞同：1
> 
> 时间：2013-01-18T10:55:12.927
> 
> 标签：c, memory-management, graph, breadth-first-search

我在 C 中编写了一个面包优先搜索算法，它搜索一个图形结构（在本例中表示街道网格）并返回从节点 A 到节点 B 的所有可能路线。

我发现该函数对小图（大约 24 个节点）运行得非常快，但会因比这更大的图崩溃。我认为这是 malloc 太多的问题，所以我在函数中添加了 free() 以在运行队列时删除空间。不幸的是，这并不能解决问题。另请注意，我也从未收到错误消息“内存不足”，所以我不确定发生了什么......

```
void BFS_search(struct map *m, int start, int end){
int n = m->nb_vertice+1;
int i=0;
int num=0;

//BFS requires a queue (pile) to maintain a list of nodes to visit 
struct queue {
    int current_node;
    int visited[n]; //cannot be a pointer! Otherwise the pointer may influence other queue structures
    struct queue *suivant;
};

//Function to add a node at the end of the queue.
void addqueue (int value, struct queue *old, int * old_seen) {
    int i;
    if (old->suivant==NULL){
        struct queue *nouveau;
        nouveau = (struct queue *)malloc(sizeof(struct queue));
        if (nouveau == NULL){
            printf("\n\nSnap! Out of memory, exiting...\n");
            exit(1);
        }
        nouveau->current_node = value;
        for (i = 0; i <= n; ++i){ 
            if (old_seen[i]==1)
                nouveau->visited[i]=1;
            else nouveau->visited[i]=0;
        }
        nouveau->suivant = NULL;
        old->suivant=nouveau;
        return;
    }
    else addqueue(value,old->suivant,old_seen);
}

struct queue * dequeue (struct queue *old){
    struct queue *nouveau;
    nouveau = (struct queue *)malloc(sizeof(struct queue));
    if (nouveau == NULL){
        printf("\n\nSnap! Out of memory, exiting...\n");
        exit(1);
    }
    nouveau = old->suivant;
    free(old);
    return(nouveau);
}

//the actual Breadth First Search Algorithm
int BFS(struct map *m, struct queue *q, int num, int end){
    int k;
    q->visited[q->current_node]=1; //mark current node as visited

    while(q!=NULL){
        //if we reached the destination, add +1 to the counter
        if (q->current_node==end){
            num+=1;
        }
        //if not the destination, look at adjacent nodes
        else {
            for (k=1;k<n;++k)
                if (m->dist[q->current_node][k]!=0 && q->visited[k]!=1){
                    addqueue(k,q,q->visited);
                }
            }
        //if queue is empty, stop and return the number 
        if (q->suivant==NULL){
            return(num);
        }
        //if queue is not empty, then move to next in queue
        else
            return(BFS(m,dequeue(q),num,end));
    }
}

//create and initialize start structure
struct queue *debut;
debut = (struct queue *)malloc(sizeof(struct queue));
for (i = 0; i <= n; ++i)
    debut->visited[i]=0;            
debut->current_node=start;
debut->visited[start]=1;
debut->suivant = NULL;

num=BFS(m,debut,0,end);
printf("\nIl existe %d routes possibles! \n",num);
} 
```

请注意，我使用的是结构图，它存储了我的图的所有边和节点，包括 nb_vertices（节点数）和距离矩阵 dist[i][j]，它是从节点 i 到 j 的距离，如果未连接，则为 0。

任何帮助将不胜感激！我认为这是可用内存量的错误。如果我无法避免内存问题，我至少想有一种方法来输出特定的错误消息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:00:44.440

您的`dequeue`操作正在泄漏内存。您`malloc`有一些内存并将指针存储在 中`nouveau`，但随后您说`nouveau = old->suivant`，丢失了`malloc`'d 缓冲区。`malloc`从链表的前面弹出时根本不需要：

```
struct queue *dequeue(struct queue *q)
{
    struct queue *next = q->suivant;
    free(q);
    return next;
} 
```

至于为什么您没有收到“内存不足”错误，我猜您使用的是 Linux，并且您正在经历[overcommit](http://linuxdevcenter.com/pub/a/linux/2006/11/30/linux-out-of-memory.html?page=2)的可悲影响。

# jquery - 检查嵌套 div 中的所有复选框

> ID：14397418
> 
> 赞同：0
> 
> 时间：2013-01-18T10:55:17.433
> 
> 标签：jquery, checkbox

我一直在尝试允许一个复选框检查多个嵌套 div 中的其他复选框，但它不起作用。我找不到复选框的 Dom 路径。这是html：

```
<div class="box span12 " id="Clarendon_region"> 

    <div class="box-content">
        <div class="row-fluid">         
            <div class="span3 ">
                <span>
                    <div class="checker">
                        <span>
                            <input type="checkbox">
                        </span>
                    </div>
                </span> Branch 115
            </div>
        </div>
    </div>

</div> 
```

这是jQuery：

```
$('span input').click(function(e){

    var elIDSplit = e.target.id.split("_");

    if(elIDSplit[0] == "chk" && elIDSplit[2] == "region") {
        //alert(e.target.id);
        status = $(e.target).attr("checked");
        if (status == undefined) {
            status = false;
        }

        $(elIDSplit[1]+"_"+elIDSplit[0]+" .box-content .row-fluid .span3 span .checker span input:checkbox.friends").attr("checked",status);

    }

}); 
```

更新：这是通过给输入一个类名然后使用这个来解决的：

```
$(".allbranches_" + elIDSplit[1]).attr('checked', status);
//does not work without this line since uniform is responsible for styling the  checkbox
$.uniform.update(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:26:30.600

您的代码中有各种错误。这一行：

```
$(elIDSplit[1]+"_"+elIDSplit[0]+" .box-content .row-fluid .span3 span .checker span input:checkbox.friends").attr("checked",status); 
```

实际上应该是（用你的方法）：

```
$("#" + elIDSplit[1]+"_"+elIDSplit[2]+">.box-content>.row-fluid>.span3>span>.checker>span>input:checkbox.friends").attr("checked", status); 
```

它会起作用，前提是您将正确的`id`和添加`class`到您的输入标签中，而您在此处显示的代码中没有这样做。

然而，这是一种选择元素的糟糕方式（老实说，这是一种非常奇怪的嵌套方式）。`input`例如，如果您为标签提供有意义的 id并使用类似`$("#my_input")`.

即使你不能，通常也不需要级联所有这些选择器：你可以这样做

```
$("#" + elIDSplit[1]+"_"+elIDSplit[2]+">.box-content input:checkbox.friends").attr("checked", status); 
```

你会得到同样的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:32:31.807

你可以简单地试试这个

```
$('#theId').find(':checkbox').atrr('checked','checked'); 
```

这里 #theId 是指复选框所在的分区。

# iphone - Missing '@end' // @end 必须出现在 Objective-c 上下文中

> ID：14397420
> 
> 赞同：1
> 
> 时间：2013-01-18T10:55:21.137
> 
> 标签：iphone, ios, objective-c, xcode4.5

这是我的代码：

```
 #import <UIKit/UIKit.h>
   @interface CustomCellArticle: UITableViewCell
   @property(nonatomic,retain) IBOutlet UILabel *name;
   @end 
```

我第一次收到这个错误：

```
Missing @end
Expected identifier or '(' 
```

在第一个代码中，它要求我在第一个代码中添加 @end 来修复它。代码变成了这样：

```
 #import <UIKit/UIKit.h>
   @end //here the seconde error
   @interface CustomCellArticle: UITableViewCell
   @property(nonatomic,retain) IBOutlet UILabel *name;
   @end 
```

当我添加它时，我收到了一个新错误：

```
@end must appear in an Objective-C context 
```

不知道具体是怎么回事，求大神帮忙！我在另一个项目中使用了相同的类，它工作正常！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T10:58:40.070

是的，它来自另一个已经预先导入但缺少 @end 的头文件或实现文件

它可以是 .h 或 .m 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:01:00.627

@end 应该只在一个文件中出现一次。顶部的 @end 是什么。导入顶部的所有文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:01:16.167

您可能在@end 行之前打开了一个从未用“}”关闭的“{”...

所以，错误不在@end 行...但是 xcode 只是发现您缺少“}”或“）”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T11:14:42.403

让我显示整个文件 .h 和 .m 文件然后我可以很好地回答没问题。

您需要`@end`先从 .h 文件中删除并运行您将解决问题。

而不是这个：

```
#import <UIKit/UIKit.h> 
```

@结尾

@interface CustomCellArticle: UITableViewCell

@property (strong, nonatomic) IBOutlet UILabel *name;

@结尾

用这个 ：

```
#import <UIKit/UIKit.h> 
```

@interface CustomCellArticle: UITableViewCell {

@property (strong, nonatomic) IBOutlet UILabel *name;

@结尾

愿这对你有所帮助。这对我来说很好。

我也检查过xcode。您只需要先删除`@end`.

如果这件事不起作用，那么您还有其他问题。

# javascript - 在 Javascript 函数中使用元素 attr

> ID：14397424
> 
> 赞同：2
> 
> 时间：2013-01-18T10:55:47.843
> 
> 标签：javascript, jquery

在一个页面中，我调用外部 js 文件，它包含一个字典。我想用他们的属性替换元素文本。

```
<p data-text="dict.dataP"></p>
<p data-text="dict.data.P2"></p> 
```

我想用外部文件字典填充它

```
var dict = {
    "dataP1": "this is my p text",
    "data" : {
         "p2": "my another paragraph"
    },

}; 
```

我试着用这个

```
$.each(function () {
    if ($(this).attr("data-text").length > 0) {
        $(this).html(
        $(this).attr('data-text') /*we got a problem here. it returns string*/ );
    }
}); 
```

此处的代码笔： [codepen.io](http://codepen.io/ayhansipahi/full/KIwjo)

JSFiddle 这里 [jsfiddle.net](http://jsfiddle.net/ayhansipahi/eB6E2/)

## 我怎样才能做到这一点？

编辑的字典。我们在字典中有字典。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:00:32.213

要访问数据属性，请使用：

`$(this).data('text');`

文本是属性声明中连字符后的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:08:20.360

您想将字典中的文本设置为具有匹配数据属性的元素，对吗？

试试这个：

```
var dict = {
    "dataP": "this is my p tag text",
    "dataDiv": "dummy div"
};

$('p').each(function () {
    var data = $(this).data('text');
    $(this).html(dict[data.split('.')[1]])
}); 
```

[http://jsfiddle.net/eB6E2/1/](http://jsfiddle.net/eB6E2/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T11:09:30.527

您应该更改一些内容以使其正常工作，采用 Jimbo 的答案并添加其他一些内容：

```
var dict = {
  "dataP": "this is my p tag text"
};

$('[data-text]').each(function () {
  if ( $(this).data("text") ) {
    var dictAttr = $(this).data("text");
    if ( dictAttr && dict[dictAttr] ) {
      $(this).html( dict[dictAttr] );
    }
  }
}); 
```

您还应该更改标记以使事情变得更容易（特别是如果您只处理一个`dict`对象）：

```
<p data-text="dataP"></p> 
```

通过上述更改，您应该可以按预期工作。

[http://jsfiddle.net/b2zgw/](http://jsfiddle.net/b2zgw/)

### 基于字符串的对象导航

奇怪的是，正如我们所说，我实际上正在研究基于字符串的对象导航框架。但是，如果代码库过于复杂，无法仅在 stackoverflow 答案的末尾添加。作为我评论的补充，我意识到还有第三种选择可能是两全其美的选择（取决于您的需要）。

**:: 评估**

我不推荐这种方法，但为了简单起见，不能与之争论——以下是上面代码的片段，应该替换该部分：

```
var dictNav = $(this).data("text"); /// e.g. say dictNav == 'dict.dataP'
var ref; eval('ref='+dictNav);
if ( ref && red.substr ) {
  $(this).html( ref );
} 
```

上面的问题是它`eval`会评估任何 JavaScript - 所以攻击者所要做的就是找到一种方法来为`data-text`您页面上的某些内容添加属性，他们将能够执行他们喜欢的任何 JavaScript。

**:: 基于字符串的导航**

以下是一个可以改进的简单功能，但应该会给您一些想法：

```
function navigate( obj, path ){
  var cur = obj, bits = path.split('.');
  for ( var i=0, l=bits.length; i<l && cur; i++ ) {
    cur = cur[bits[i]];
  }
  return cur;
} 
```

使用上述内容，您可以导航您的字典结构 - 请注意，因为您以特定的 var 名称开始您的“导航路径”（即`dict`），您必须将您的字典放置在您希望遍历的对象的下一级；这就是原因`{dict:dict}`。要支持多个字典，您只需要像这样扩展该对象`{dict:dict,dict2:dict2}`- 以下是一个片段，应该替换原始代码：

```
var dictNav = $(this).data("text"); /// e.g. say dictNav == 'dict.dataP.test'
var ref = navigate({dict:dict}, dictNav);
if ( ref && red.substr ) {
  $(this).html( ref );
} 
```

**:: 第三个选项 - 简化你的字典**

第三个选项可能是最理想的，但意味着不能实时修改字典（或至少不容易）。基本上在运行其余代码之前，通过修改其结构的解析函数推送字典：

```
var dict = {
   "dataP": "this is a test",
   "forms": {
     "inputLabel": "this is a second level"
   }
};

function simplifyDict( obj, target, path, subpath ){
  if ( !target ) { target = {}; }
  if ( !path ) { path = ''; }
  for( var i in obj ) {
    subpath = (path ? path + '.' : '') + i;
    if ( typeof obj[i] == 'object' ) {
      simplifyDict( obj[i], target, subpath );
    }
    else {
      target[subpath] = obj[i];
    }
  }
  return target;
}

dict = simplifyDict( dict ); 
```

上面的简化函数应该返回如下内容：

```
{
  "dataP" : "this is a test",
  "forms.inputLabel" : "this is a second level"
} 
```

然后你需要做的就是在这个答案的顶部使用我的原始代码。您没有将字符串转换为单独的对象属性并导航字典，而是将字典切换为基于字符串的查找......所以现在您可以直接使用字符串，即`dict['forms.inputLabel']`

# c# - 下拉列表值更改后的 Mvc3 填充数据

> ID：14397425
> 
> 赞同：0
> 
> 时间：2013-01-18T10:55:48.107
> 
> 标签：c#, javascript, asp.net-mvc-3, razor

我有一个表格，其中包含一些用于填充数据的文本。我想在**下拉列表**更改后在文本框中填充数据。

**MyView.chstml**

```
@model BloodBank.Models.NewCamp

@{
  ViewBag.Title = "New Camp";
  Layout = "~/Views/Shared/_Layout - Menu.cshtml";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script type="text/javascript">
$(function () {
    $("select#OrganisationID").change(function (evt) {

        if ($("select#OrganisationID").val() != "0") {

            $.ajax({
                url: "GetOrganizationInfo?orgID=" + $("select#OrganisationID").val(),
                type: 'POST',
                data: { OS: $("select#OrganisationID").val() },
                success: function (response) {
                    $("select#OrganisationID").replaceWith(response)
                },
                error: function (xhr) {
                    alert("Something went wrong, please try again");
                }
            });
        }
    });
});
</script>

 @using (Html.BeginForm())
 {
@Html.ValidationSummary(true, "New Camp creation was unsuccessful. Please correct the errors and try again.")
    <div>
    <table style="border-style:none;border-width:0;border:0;">
        <tbody>
        <tr>
            <td style="border:0;vertical-align:middle;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.OrganisationID)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">

                     @Html.DropDownListFor(m => m.OrganisationID, (SelectList)ViewBag.OrganisationList)&nbsp; &nbsp; &nbsp; &nbsp;

                    @* <select id="Area">                            
                        @foreach (var arearow in (SelectList)ViewBag.OrganisationList)
                        {
                            <option value="@arearow.Value">@arearow.Text</option>                                
                        }
                    </select>*@

                    @Html.ActionLink("Add New Organisation", "AddOrganisation", "Organisation", null, null)
                </div>
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.ValidationMessageFor(m => m.OrganisationID)
                </div>
            </td>
        </tr>

        <tr>
            <td style="border:0;text-align:left;" colspan="2"> <h3>Contact Person Information</h3></td>
        </tr>

        <tr>
            <td style="border:0;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.Email)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.Email)&nbsp;&nbsp;&nbsp;
                    @Html.ValidationMessageFor(m => m.Email)
                </div>
            </td>
        </tr>

        <tr>
            <td style="border:0;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.FirstName)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.FirstName)&nbsp;&nbsp;&nbsp;
                    @Html.ValidationMessageFor(m => m.FirstName)
                </div>
            </td>
        </tr>

        <tr>
            <td style="border:0;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.LastName)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.LastName)&nbsp;&nbsp;&nbsp;
                    @Html.ValidationMessageFor(m => m.LastName)
                </div>
            </td>
        </tr>

        <tr>
            <td style="border:0;">
                <div class="editor-label">
                    @Html.LabelFor(m => m.Phone)                            
                </div> 
            </td>
            <td style="border:0;">
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.Phone)&nbsp;&nbsp;&nbsp;
                    @Html.ValidationMessageFor(m => m.Phone)
                </div>
            </td>
        </tr>

        <tr>
        <td colspan="2" style="border:0;text-align:center;">

        </td>
        </tr>
        </tbody>
    </table>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;
    <input type="submit" value="Submit" id="ClickMe" class="cssLoginButton blue"/>
</div>
} 
```

**我的行动**

```
 [Authorize]
    [OutputCache(Location = OutputCacheLocation.None)]
    public ActionResult NewCamp()
    {
            var user = (BloodBank.Security.BloodBankMembershipUser)Membership.GetUser();
            this.BindOrganisations(user.BloodBankID);
            return View();        
    }

    public ActionResult GetOrganizationInfo(string orgID)
    {
        if (!string.IsNullOrEmpty(orgID))
        {
            var model = (new UserManager()).GetCampPersonOrganisationDetailsByOrganisationID(orgID);
            Models.NewCamp newcampModel = new Models.NewCamp();

            if (model.Count > 0)
            {
                newcampModel.CampID = model[0].CampID;
                newcampModel.Organisation = "";
                newcampModel.OrganisationID = model[0].OrganisationID;
                newcampModel.FirstName = model[0].FirstName;
                newcampModel.LastName = model[0].LastName;
                newcampModel.Email = model[0].Email;
                newcampModel.Phone = model[0].Phone;

                var organisations = this.GetOrganisations(model[0].BloodBankID);
                if (organisations != null)
                    ViewBag.OrganisationList = new SelectList(organisations, "OrganisationID", "NameCity");
            }

                return View("NewCamp", newcampModel);
        }
        else
            return View();
    } 
```

我无法在表格中填写数据。我不明白为什么我无法填写数据。脚本或我的代码有什么变化吗？下拉列表值更改后是否有填充数据的示例？

- - - - - 更新 - - - - - -

我在示例项目中尝试过类似的事情。在这里，我可以获取值并显示在文本框中，但是每次从下拉菜单中选择**操作系统时，我都会在同一个****视图上添加一个视图，如下面的屏幕截图所示。**

 **![截屏](../Images/b41d84fa5590e15a0d3d3972b973ccbf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:01:37.637

您发布的代码中唯一的缺陷可能是缺失；

```
success: function (response) {
    $("select#OrganisationID").replaceWith(response);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T06:51:54.343

大家好，我已经用这个解决了我的问题。无需创建任何**javascript**。我没有使用javascript就解决了这个问题。

```
@Html.DropDownListFor(m => m.OrganisationID, (SelectList)ViewBag.OrganisationList, new { onchange = "document.location.href = 'NewCamp?orgID=' + this.options[this.selectedIndex].value;" }) 
```**

# jquery - jQuery UI：如何让父元素在拖动时跟随子元素？

> ID：14397428
> 
> 赞同：0
> 
> 时间：2013-01-18T10:56:02.487
> 
> 标签：jquery, jquery-ui

我正在制作一个`<div>`元素，它有一些子元素和文本节点。我将可拖动函数绑定到 element 的子元素之一`<div>`。我想过使用可拖动`drag`事件我可以实现我想要的，但它变得很奇怪。

[***小提琴链接***](http://jsfiddle.net/y6XDr/)

HTML：

```
<div class="parent" style="margin:50px; width:200px;height:200px;border:1px solid #000;position:relative;">
    <div class="child" style="border-radius:4px 4px 4px; background:#000;position:absolute;top:-5px;left:-5px;width:10px;height:10px;">
    </div>
</div> 
```

JS：

```
$(".child").draggable({
  drag:function() {
    $(this).parent().css({ "top":$(this).offset().top+"px", "left": $(this).offset().left+"px" });
  }
}); 
```

CSS：

```
.child:hover {
  cursor:crosshair;
} 
```

但这是一种奇怪的方式。我知道逻辑不好，但我仍然认为它会起作用。

# jquery - 将对象的键作为参数作为局部函数变量传递

> ID：14397430
> 
> 赞同：0
> 
> 时间：2013-01-18T10:56:05.383
> 
> 标签：jquery, function, scope, arguments

我有一个可以将对象传递给的函数。然后我需要这个对象中的所有变量成为局部变量。例如

```
function ping(){
    alert(riff); //'raff'
}

ping({
    riff: 'raff'
}); 
```

我能想到的唯一方法是循环对象并一一设置它们，但这似乎很笨重。有什么选择吗？

**编辑**：返回是显示该变量会是什么样子。我不想要的主要事情是必须通过另一个对象来获取数据。我希望结构是

```
 function.riff = 'raff' 
```

而不是

```
 function.settings.riff = 'raff' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:00:12.443

使用`$.extend`：[http ://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

```
function ping(options){
    var defaults = { riff : "foo raff" };
    /* merge defaults and options  */
    var settings = $.extend({}, defaults, options);

    console.log(settings.riff); // "raff"
}

ping({
    riff: "raff"
}); 
```

JsBin 示例：http: [//jsbin.com/utinuc/1/edit](http://jsbin.com/utinuc/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:00:16.450

简单地做

```
function ping(obj){
    return obj.riff;
} 
```

或者

```
function ping(obj){
    var riff = obj.riff;

    return riff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:37:32.760

```
function ping(){
    for(var key in arguments[0]){
        this[key] = arguments[0][key];
    }
} 
```

这是目前我能想到的最好的答案……这方面有什么进展吗？

**请注意**如何将变量直接添加到函数中，而不是通过函数中的对象。

这是因为我希望能够在使用该对象之前覆盖私有函数变量。

# ldap - 在 liferay 中获取 LDAP 组

> ID：14397431
> 
> 赞同：1
> 
> 时间：2013-01-18T10:56:07.030
> 
> 标签：ldap, liferay, liferay-6, ldapconnection

我需要做一个 Liferay-hook，当用户登录时，检查组的 LDAP。

如果该组是“用户”，则什么也不做，但如果没有任何 LDAP 组，我需要重定向到 Liferay 门户内的其他页面。

我知道如何进行重定向，但我的问题是：如何知道用户的 LDAP 组？

实际上，我只在 liferay LDAP 配置中导入用户组，如下所示：

```
(&(uid=@screen_name@)(memberof=cn=usersr,ou=groups,o=users.com)) 
```

任何想法？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:56:02.913

您将遇到的问题是 LDAP 目录在存储用户的组成员身份方面有些不一致。

eDirectory 存储用户的组成员身份（LDAP 中的 groupMembership）。更高版本（我认为是 2008 年）中的 Active Directory 将 memberOf 存储在用户上，有点像。它不是作为静态值存储在 AD 中，而是可以读取和计算。

通常，LDAP 方法是查询：

```
(&(objectClass=group)(member=cn=MyUser,ou=MyOu,dc=com)) 
```

也就是说，去找我所有的组，这个用户是其中的成员，然后检查你的控制组是否被返回。这不是很有效。但会工作。

# sql-server-2008 - 将行值分组到逗号分隔的列表中

> ID：14397435
> 
> 赞同：0
> 
> 时间：2013-01-18T10:56:24.693
> 
> 标签：sql-server-2008, reporting-services

> **可能重复：**
> [SQL 查询以逗号分隔符以及 SQL Server 中的按列分组获取聚合结果](https://stackoverflow.com/questions/6344950/sql-query-to-get-aggregated-result-in-comma-seperators-along-with-group-by-colum)

我有两个下表：

```
CarID | CarName  | Color  
------+----------+----------
1     | Ford     | White  
2     | Mitsu    | Black  
3     | Mitsu    | Green  

OwnerID | OwnerName | CarID  
--------+-----------+-------
1       | John      | 1  
1       | John      | 3  
2       | Mark      | 2 
```

我需要以下报告：

```
CarName | Owners  
--------+------------
Ford    | John  
Mitsu   | John, Mark 
```

怎么可能做到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:17:23.437

在数据库级别构建正确的数据集是最简单的，例如：

```
SELECT
    c.CarName,
    STUFF
    (
        (
            SELECT ',' + owner
            FROM Owner o
            WHERE c.carID = o.carID
            ORDER BY owner
            FOR XML PATH('')
        ), 1, 1, ''
    ) AS owners
FROM Car c 
```

这将为每种汽车/颜色组合返回一行，因此要考虑的另一件事是您是否要忽略颜色-然后您需要对汽车名称进行分组：

```
SELECT
    c.CarName,
    STUFF
    (
        (
            SELECT ',' + owner
            FROM (select cd.carname, o.owner from Owner o inner join Car cd on o.carID = cd.carID) o
            WHERE c.CarName = o.CarName
            ORDER BY owner
            FOR XML PATH('')
        ), 1, 1, ''
    ) AS owners
FROM (select distinct carname from Car) c 
```

获得正确的数据集后，只需创建一个简单的表格来显示结果即可。

# hibernate - JPA 标准析取

> ID：14397436
> 
> 赞同：4
> 
> 时间：2013-01-18T10:56:27.680
> 
> 标签：hibernate, jpa, criteria, criteria-api

我试图学习和理解 JPA 标准。到目前为止，我在 SQL 方面非常有能力，并且在 Hibernate Criteria 和 HQL 方面相当有能力。

我正在尝试使用 OR 语句进行相当简单的选择。

在纯 SQL 中，我的选择如下所示：

```
SELECT * FROM CHANGED_LOG
WHERE key1 = 52540 AND objectCode = 'Order'
OR key1 = 48398 AND objectCode = 'Package' 
```

这给了我 key1 = 52540 和 objectCode 等于 Order 的每一行以及 key = 48398 和 objectCode 等于 Package 的每一行。这正是我想要的。

因此，尝试使用 JPA 标准（这似乎非常复杂......）来做到这一点，到目前为止我最好的猜测是：

```
 CriteriaBuilder builder = entityManager.getCriteriaBuilder();

    CriteriaQuery<ChangedLogBean> query = builder.createQuery(ChangedLogBean.class);
    Root<ChangedLogBean> from = query.from(ChangedLogBean.class);
    CriteriaQuery<ChangedLogBean> select = query.select(from);

    Predicate orderChangedLogBeans = builder.conjunction();
    builder.and(orderChangedLogBeans, builder.equal(from.get("key1"), orderId));
    builder.and(orderChangedLogBeans, builder.equal(from.get("objectCode"), ChangedLogBean.ObjectType.OrderBean));

    Predicate packageChangedLogBeans = builder.conjunction();
    builder.and(packageChangedLogBeans, builder.equal(from.get("key1"), packageId));
    builder.and(packageChangedLogBeans, builder.equal(from.get("objectCode"), ChangedLogBean.ObjectType.PackageBean));

    Predicate orderOrPackage = builder.disjunction();
    orderOrPackage.getExpressions().add(orderChangedLogBeans);
    orderOrPackage.getExpressions().add(packageChangedLogBeans);

    query.where(orderOrPackage);

    return entityManager.createQuery(select).getResultList(); 
```

哇。一个简单的查询有很多行......但是，这仍然会从数据库中返回给我每一行。

我在这里做错了什么？

感谢您所有有用的答案:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:23:13.027

在这种情况下，首先要做的是配置 JPA 提供程序以记录生成的查询。有关示例，请参阅[此 q/a 。](https://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa)

为了回答你的问题，我不确定 的使用`getExpressions()`，所以我建议以下粗鲁的方法：

```
Predicate p1 = builder.equal(...);
Predicate p2 = builder.equal(...);
Predicate p3 = builder.equal(...);
Predicate p4 = builder.equal(...);

Predicate p5 = builder.and(p1, p2);
Predicate p6 = builder.and(p3, p4);

query.where(builder.or(p5, p6)); 
```

您的错误是这样的一行：

```
builder.and(orderChangedLogBeans, builder.equal(from.get("key1"), orderId)); 
```

不会就地修改`orderChangedLogBeans`。[您必须改为获取CriteriaBuilder#and()](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#and%28javax.persistence.criteria.Expression,%20javax.persistence.criteria.Expression%29)返回的谓词：

```
orderChangedLogBeans = builder.and(orderChangedLogBeans, builder.equal(from.get("key1"), orderId)); 
```

# php - 订单状态脚本

> ID：14397439
> 
> 赞同：2
> 
> 时间：2013-01-18T10:56:32.940
> 
> 标签：php

我正在尝试创建一个订单状态页面，我将在 phpmyadmin 中手动调整，但是我希望人们能够使用表格输入他们的订单号，然后为该订单号提供适当的名称和状态。

这是 index.php

```
<?php
$username = "username";
$password = "password";
$hostname = "localhost"; 
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";
?>
<form method="POST" action="action.php">
<input type="text" name="term" />
<input type="submit" value="Submit" name="submit" />
</form> 
```

这是我的 action.php

```
 <?php
$username = "evo_readle";
$password = "judo08";
$hostname = "localhost"; 
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";
$term = mysql_real_escape_string($_REQUEST['term']);    
$query = mysql_query("SELECT * FROM orders WHERE number ='%".$term."%'");
$user = mysql_fetch_assoc($query);
echo "Hello User, your name is" .$user['name'];
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:59:31.410

如果要在 SQL 查询中使用通配符，则需要关键字[`LIKE`](http://www.w3schools.com/sql/sql_like.asp). 所以

```
$query = mysql_query("SELECT * FROM orders WHERE number ='%".$term."%'"); 
```

会变成：

```
$query = mysql_query("SELECT * FROM orders WHERE number LIKE '%".$term."%'"); 
```

我还可以建议您开始了解为什么不使用`mysql_*`函数吗？阅读[这篇文章](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)。

# java - 使用多线程在休眠中处理 1 个表

> ID：14397440
> 
> 赞同：0
> 
> 时间：2013-01-18T10:56:35.150
> 
> 标签：java, spring, hibernate

我正在使用 spring+hibernate 的应用程序中工作。我有一种情况，我必须从 1 个表（状态标志为 0）中获取一组记录，处理它们中的每一个（将为其他表生成数据），然后将状态标志设置为 1。

问题是所有这些都是由 1 个线程完成的，而且速度非常慢。我想实现可以说我制作了 10 个线程。他们每个人都会记录一份，处理，保存，完成。然后该过程将加速10倍。请看图片。关于如何做到这一点的任何建议？

----现状---- [http://imgur.com/DSgIy](http://imgur.com/DSgIy)

------ 想要的情况 ------ [http://imgur.com/Myz5J](http://imgur.com/Myz5J)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:56:31.107

将 process 方法包装在 a 中`Runnable`并使用 a 执行它`TaskExecutor`。您可以选择使用 spring 任务命名空间或注释来使用 TaskExecutor 参数，例如线程池大小。

见[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html)

# flyway - 回滚脚本迁移

> ID：14397443
> 
> 赞同：0
> 
> 时间：2013-01-18T10:56:40.263
> 
> 标签：flyway

只需使用 flywaytest 来测试我的应用程序。我想知道是否有一种方法可以在导入迁移脚本后进行回滚。如果我不清楚，请询问信息。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:23:54.323

您的问题不是很清楚，但如果您想回滚失败的迁移并重试，请执行以下步骤：

1.  如果您查看 schema_version 表，您应该会看到失败的脚本（状态列 = FAILED）。您需要更正此脚本，以免再次失败。此外，如果某些脚本成功完成，您可能必须手动恢复这些更改，因为再次运行它们可能会导致失败。

2.  然后，您从表中删除这一行，
    例如`delete from schema_version where state = 'FAILED';`

3.  然后将当前版本设置回失败之前的脚本。您可以通过将其 CURRENT_VERSION 设置为 1 来做到这一点，
    例如`update schema_version set current_version = 1 where version = 1.XX;`

4.  然后，您可以尝试再次运行 flyway 迁移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T14:09:00.460

flywaydb 不支持回滚，以防迁移期间出现问题，您可以使用的最佳用户是：

[http://flywaydb.org/documentation/maven/repair.html](http://flywaydb.org/documentation/maven/repair.html)

但是您必须自己确保数据库中数据的完整性。

如果您正在使用的数据库支持检查点，请始终建议在迁移之前执行检查点。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T17:08:56.553

flyway不支持单行命令回滚，

没有类似的命令`mvn flyway:rollback`，有两种方法可以做（IMO）

1.  关注@user528827 的回答
2.  尝试使用 rails 的迁移 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T10:26:38.290

[常见问题解答](https://flywaydb.org/documentation/faq)中对此进行了解释：

*   [https://flywaydb.org/documentation/faq#downgrade](https://flywaydb.org/documentation/faq#downgrade)
*   [https://flywaydb.org/documentation/faq#rollback](https://flywaydb.org/documentation/faq#rollback)
*   [https://flywaydb.org/documentation/faq#repair](https://flywaydb.org/documentation/faq#repair)

**更新**：Flyway 5.0 现在带有一个[撤消命令](https://flywaydb.org/documentation/command/undo)。

# data-structures - Trie vs 红黑树：空间和时间哪个更好？

> ID：14397447
> 
> 赞同：7
> 
> 时间：2013-01-18T10:56:45.980
> 
> 标签：data-structures, tree, complexity-theory, trie, red-black-tree

尝试和红黑树对于存储字符串非常有效。

哪个时间复杂度更好？空间复杂度如何？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T19:32:53.020

这取决于许多因素，例如您存储的字符串以及 trie 的表示方式。

在红黑树中，您需要对每个操作（插入、删除、查找等）进行 O(log n) 字符串比较。如果您比较两个没有共同前缀的字符串，或者比较两个 on string 较小的字符串，则比较的成本很小。比较的最坏情况是一个字符串是另一个字符串的前缀，在这种情况下必须读取所有字符。因此，如果您想在字符串的红黑树中查找长度为 L 的字符串，在最坏的情况下，您将通过进行 O(log n) 比较来完成 O(L log n) 工作，每个比较看输入字符串中的所有字符。但是，在最好的情况下，这只需要 O(log n) 时间，如果比较总是立即失败，就会发生这种情况。

在空间使用方面，红/黑树每个节点需要两个指针，每个字符串需要一个节点。（红/黑位通常可以打包到指针的低位中）。因此总空间为 2n +（所有字符串的总长度）。

在 trie 中，插入、删除和查找在最坏的情况下（如果必须考虑输入的所有字符）需要 O(L)，在最好的情况下需要 O(1)（如果你很早就脱离了 trie）。这比红黑树快 O(log n) 倍，这对于大型集合可能很重要。然而，trie 的局部性更差，因为涉及到更多的指针追踪，并且没有要扫描的连续字符数组。

在内存使用方面，字母表大小为 k 的 trie 通常需要总共 kn 个指针，其中 n 是节点数。如果字母表很大，这可能比红/黑树严重得多。但是，可以通过使用 Patricia 树表示压缩 trie、使用更有效的数据结构来存储子指针或从 trie 构建 DAWG 来减少空间开销。

希望这可以帮助！

# java - 将 Scalatest 包含在 Java 中时，Maven 构建失败

> ID：14397448
> 
> 赞同：0
> 
> 时间：2013-01-18T10:56:55.170
> 
> 标签：java, scala, maven, scalatest

我正在尝试将 scala-maven-plugin:3.1.0 与 Java 1.5 一起使用。但是，我的 Maven 构建因不兼容错误而失败。

```
 Failed to execute goal net.alchim31.maven:scala-maven-plugin:3.1.0:compile (scala-compile-first) on project proj: Execution scala-compile-first of goal net.alchim31.maven:scala-maven-plugin:3.1.0:compile failed: Unable to load the mojo 'compile' in the plugin 'net.alchim31.maven:scala-maven-plugin:3.1.0' due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Bad version number in .class file 
```

还有一个不支持的类版本警告

```
WARNING: Error injecting: scala_maven.ScalaCompileMojo
java.lang.UnsupportedClassVersionError: Bad version number in .class file 
```

该插件的文档说它需要 Java 1.5，所以我在那里看不到问题。我在本地使用 Java 1.5，也用于我的 Maven 构建。

关于问题出在哪里的任何建议？我看不到另一个版本的 Java 可以在哪里编译我的任何类，所以我猜测它在我拥有的一个依赖项中不兼容，但我没有找到它。我还导入了以下依赖项

```
<dependency>
            <groupId>org.scalatest</groupId>
            <artifactId>scalatest_2.9.0-1</artifactId>
            <version>2.0.M5</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:05:26.043

@om-nom-nom 发布的答案 据我所知，scala 版本 scalatest 是针对（2.9.x）编译的，需要至少 1.6 版本的 Java 平台。

# ruby-on-rails - 初始登录到 rails_admin

> ID：14397451
> 
> 赞同：0
> 
> 时间：2013-01-18T10:56:58.407
> 
> 标签：ruby-on-rails, devise, rails-admin

我已经成功地安装并配置了带有[本](https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-Role)指令“选项 1”的管理模型的设备。

安装 rails_admin 并访问 localhost:3000/admin 后，我遇到了一个登录页面，要求输入电子邮件和密码。由于我没有设置管理员电子邮件/密码，我基本上被锁定在 rails_admin 之外。

如何使用 rails_admin 注册管理员电子邮件/密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:17:07.957

在命令提示符下运行：`rake db:seed`然后您可以使用电子邮件`admin@admin.com`和密码访问：“ `administrator`”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:17:31.903

我遵循@Ganeshkunwar 的建议并运行 rake db:seed 但将以下内容添加到我的种子.rb

```
admin_model     = RailsAdmin::AbstractModel.new(Admin)
admin_model.new(:email => '****@****.com', :password => '****', :password_confirmation => '****').save 
```

谢谢！

# html - 哪些浏览器支持 ` ` 属性？

> ID：14397458
> 
> 赞同：24
> 
> 时间：2013-01-18T10:57:39.327
> 
> 标签：html

该[`<img srcset...`属性](http://www.w3.org/html/wg/drafts/srcset/w3c-srcset/)允许根据屏幕分辨率向用户显示不同的图像。

当前（2013 年 1 月）哪些浏览器支持此属性？

鉴于这对于在智能手机上浏览的用户来说是一个有用的属性，此外，哪些移动浏览器提供支持？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T12:30:07.870

**2014 年 2 月更新**

有多个方面`srcset`，包括像素密度和视口宽度。在撰写本文时：

*   *当前版本 Safari、Chrome 或 Firefox不*支持视口宽度
*   Chrome 支持像素密度

我已经将一些测试文件和结果放在[Github](https://github.com/michrome/srcset-browser-support)存储库上，我会尽量保持最新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-14T16:27:58.080

Webkit 现在支持 srcset 属性：[https ://www.webkit.org/blog/2910/improved-support-for-high-resolution-displays-with-the-srcset-image-attribute/](https://www.webkit.org/blog/2910/improved-support-for-high-resolution-displays-with-the-srcset-image-attribute/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-11T04:30:34.660

有趣的是，维基百科似乎正在使用具有如下属性的 srcset：

```
srcset="//upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Izokefalizm.jpg/300px-Izokefalizm.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Izokefalizm.jpg/400px-Izokefalizm.jpg 2x" 
```

我猜他们正在使用 polyfill 来实现这一点，但它确实可以正确显示更大的图像。可能值得四处看看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-07T19:33:05.053

对于 iOS 设备 - 适用于 iOS8 的 Safari 现在支持 srcset - 但要到 2014 年秋季才能普遍使用。

[http://friendfeed.com/christianoliff/c7c40ae2/safari-for-ios8-now-supports-img-srcset](http://friendfeed.com/christianoliff/c7c40ae2/safari-for-ios8-now-supports-img-srcset)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-22T20:14:53.980

[在CanIUse.com](http://caniuse.com/#feat=srcset)上查看当前支持。截至 2015 年 10 月，如果您不太关心 IE，您可以在几乎所有浏览器上安全地使用它，好东西！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-17T10:32:45.037

“正确”的答案必须随着时间的推移而发展。

候选测试站点：[https ://html5test.com/compare/feature/responsive.srcset.html](https://html5test.com/compare/feature/responsive.srcset.html)

# javascript - 是否可以让 Angularjs 使用原型方法和变量

> ID：14397460
> 
> 赞同：5
> 
> 时间：2013-01-18T10:57:46.720
> 
> 标签：javascript, class, angularjs, haxe

你知道，在 angularjs 中，大部分逻辑都是基于`$scope`：

```
function Ctrl($scope) {
    $scope.name = "Freewind";
    $scope.hello = function() {
       alert($scope.name);
    }
    $scope.method1 = function() {}
    $scope.method2 = function() {}
    $scope.method3 = function() {}
    $scope.method4 = function() {}
    $scope.method5 = function() {}
} 
```

现在我正在使用 haxe 生成 angularjs 代码，如果我的代码是：

```
class Ctrl {
   public function new(scope:Scope) {
      scope.name = "Freewind";
      scope.hello = function() {
         alert(scope.name);
      }
      scope.method1 = function() {}
      scope.method2 = function() {}
      scope.method3 = function() {}
      scope.method4 = function() {}
      scope.method5 = function() {}
   }
}

typedef Scope = {
    name:String,
    hello:Void->Void,
    method1: Void->Void,
    method2: Void->Void,
    method3: Void->Void,
    method4: Void->Void,
    method5: Void->Void
} 
```

但是我想从 haxe 的类系统中受益（代码可能更简单更清晰），将其声明为：

```
class Scope {
    public var name:String;
    public function hello() {}
    public function method1() {}
    public function method2() {}
    public function method3() {}
    public function method4() {}
    public function method5() {}
} 
```

然后想办法把`Scope`类和`$scope`angularjs的关联起来。

但是`Scope`从 haxe 生成的是使用原型：

```
Scope = function();
Scope.prototype.name = "something";
Scope.prototype.hello = function() {}
Scope.prototype.method1 = function() {}
Scope.prototype.method2 = function() {}
Scope.prototype.method3 = function() {}
Scope.prototype.method4 = function() {}
Scope.prototype.method5 = function() {} 
```

在这种情况下，我找不到让 angularjs 使用它的解决方案。

是否可以让 angularjs 使用原型，所以它可以使用 haxe 类系统（也可以使用其他语言，如具有类支持的咖啡脚本/打字稿）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:10:36.957

为了对这个问题有一个实际的答案，应该提到现在这个库解决了这个问题：[https](https://github.com/freewind/HaxeAngularSupport) ://github.com/freewind/HaxeAngularSupport ；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:33:01.700

Scope 的构造函数是在闭包中声明的，因此您无法轻松访问它...但是（！）JavaScript 可以在任何现有对象上立即使用该构造函数。

从理论上讲，您可以获得 $rootScope 的构造函数，更改它的原型，这应该会更改任何随后创建的 Scope。但是，您可能希望在应用程序模块的 .run() 或 .config() 中执行此操作。

```
app.run(function($rootScope) {
   $rootScope.constructor.prototype.foo = 'Set from prototype';
}); 
```

[它有效，这是 plunker](http://plnkr.co/edit/0J9KC7XtK16UCrCv00JW)。

**但是：您可能不需要这样做**。我能想到您可能需要这样做的唯一原因是在某些边缘情况下，您需要确保某个范围内的某些功能或属性可用，即使它是一个孤立的范围（如我链接的 plunker 中的指令）。

因为有作用域继承，并且因为你有 $rootScope 可以使用，所以我真的想不出任何需要通过原型来改变作用域的正当理由。

# visual-studio - 目标平台，所有 CPU 或 X86 差异

> ID：14397467
> 
> 赞同：0
> 
> 时间：2013-01-18T10:58:01.673
> 
> 标签：visual-studio

我很困惑应该选择什么目标平台设置以使我的应用程序能够在所有计算机上运行，​​而不管处理器类型如何。我尝试了所有 CPU，但它在几台计算机上不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:10:51.350

`x86`适用于 32 位操作系统以及 64 位操作系统，对于`AnyCPU`. 那么区别是什么呢？
不同之处在于 JIT 编译器在目标计算机上发出应用程序代码的方式。

当您使用`x86 platform`JIT 发出的代码时，始终是 32 位代码，在 64 位系统上也是如此。
如果您没有安装应用程序所需的正确 32 个驱动程序/dll，这可能是一个问题（这`Microsoft.ACE.OleDB`是这些有问题的库之一）。

相反，当您使用`AnyCPU platform`JIT 时，会在 32 位系统上发出 32 位代码，在 64 位系统上发出 64 位代码。这比 x86 更成问题，因为您需要两个系统的正确驱动程序。因此，我怀疑您的应用程序在某些系统上失败的原因是由于您的应用程序缺少正确的（对于系统位数）库。

毫无疑问，我认为最好使用 x86 平台，除非您对 64 位系统有非常具体的要求。

# python - django 视图中的数组问题

> ID：14397469
> 
> 赞同：0
> 
> 时间：2013-01-18T10:58:03.150
> 
> 标签：python, django, arrays, encoding

我正在从存储在数组中的数据库中获取数据，我必须将此数组的输出与字符串匹配。但是数组将结果输出为 Unicode 格式 (u'aviesta',)，因此它与字符串不匹配。

我的代码。

```
// fblike is an arry in which the output of query stores.

for i in fblike:
  if i=="Aviesta":
    like=1
return render_to_response('showroom.html') 
```

我也尝试将其编码为**variable.encode('utf8')**但它只编码数组的特定元素，例如 i[0].encode('utf8') 但我不知道数组的哪个元素有 aviesta作为一个值。因此我需要对整个数组进行编码，但是我不知道该怎么做。

更新:: **在views.py 中使用**

```
cursor = connection.cursor()  
cursor.execute("SELECT name FROM django_facebook_facebooklike WHERE user_id = %s", request.user.id)  
rowfb = cursor.fetchall() return render_to_response('showroom.html',{'rowfb':rowfbthis} 
```

并**在我的模板中打印 {{rowfb}} 变量**..**结果**数组是

```
 ((u'Mukesh Chapagain',), (u'Ghrix Technologies Private Limited',), (u'FirstLALimo',), (u'Aviesta',), (u'Awkward Group',), (u'FB.Canvas.setDoneLoading',), (u'99recharge',), (u'AllThingsCustomized.com',), (u'celebrity aviesta',), (u'FTC',)) 
```

所以请给我一些建议，以便我可以将数组的元素与给定的字符串匹配。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:31:32.810

首先，您应该将代码发布为问题的更新，而不是评论。

其次，我不知道您为什么要通过手动 SQL 查询访问数据，而不是使用 Django 的 ORM。如果您以正常方式完成此操作，则不会遇到此问题。

最后，您的问题与编码无关。您的数据如下（为清楚起见重新发布）：

```
((u'Mukesh Chapagain',), (u'Ghrix Technologies Private Limited',), (u'FirstLALimo',), (u'Aviesta',), (u'Awkward Group',), (u'FB.Canvas.setDoneLoading',), (u'99recharge',), (u'AllThingsCustomized.com',), (u'celebrity aviesta',), (u'FTC',)) 
```

这是一个元组的元组。每行数据由一个元组表示，而该行中的每一列又是一个元组。在您的情况下，由于您只选择一列，因此您有一个单元素元组的元组。这意味着，在循环的每次迭代中，您都有一个元组，而不是一个字符串。

这会起作用：

```
for i in fblike:
  if i[0] == "Aviesta":
    like = 1 
```

但老实说，你最好先做一个简单的 Python 教程，然后再回到 Django 教程，学习如何通过 ORM 进行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:17:25.293

我不知道你的问题是否与数组有关。

如果您只需要查找给定的字符串是否在您的数组中，您可以简单地执行

```
if "Aviesta" in fblike:
    like+=1 
```

# apache-storm - 风暴列表不显示正在运行的拓扑？

> ID：14397474
> 
> 赞同：1
> 
> 时间：2013-01-18T10:58:22.173
> 
> 标签：apache-storm

Nimbus 和 Supervisor 在同一台机器上。我正在使用“bin/storm XX.jar XX.XX”在storm上运行我的jar，stdout显示这个拓扑运行良好。

但是当我使用“bin/storm list”时，没有显示我的拓扑信息。

# html - 滚动条的 HTML 外观更改并不总是显示

> ID：14397481
> 
> 赞同：0
> 
> 时间：2013-01-18T10:58:44.227
> 
> 标签：html, scrollbar

我目前正在使用 HTML，并在我的页面中添加了滚动条，没问题。我还更改了滚动条的外观：

```
<div style="
height: 610px; 
width: 550px; 
border: 0px solid #ccc; 
font: 12px trebuchet MS; 
overflow-x: hidden; overflow-y: scroll; 
scrollbar-face-color: #ffffff; 
scrollbar-highlight-color: #ffffff; 
scrollbar-3dlight-color: #ffffff; 
scrollbar-darkshadow-color: #ffffff; 
scrollbar-shadow-color: #ffffff; 
scrollbar-arrow-color: #1C3F94; 
scrollbar-track-color: #ffffff;
"> 
```

它有效！有时...当我的朋友看到​​该网站或当我登录时滚动条恢复到标准的 Windows 外观。我没有更改任何编码，也不明白为什么它在某些情况下有效，而在其他情况下无效。

谢谢艾米丽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:51:06.097

对 iframe 使用以下代码

```
 <iframe src="demo_iframe.htm" name="iframe_a"></iframe>
<p><a href="grasphub.com" target="iframe_a">grasphub.com</a></p> 
```

创建一个文件，其中放置要在 ifram 中显示的 html 代码，例如**demo_iframe.htm**

然后复制粘贴上面的代码，您可以轻松更改它的宽度和高度。

# html - 为什么我的进度标签在 iPad 上不起作用？

> ID：14397483
> 
> 赞同：0
> 
> 时间：2013-01-18T10:58:47.073
> 
> 标签：html, ipad, progress-bar

我浏览过这个[网站](http://www.useragentman.com/blog/2012/01/03/cross-browser-html5-progress-bars-in-depth/)，里面有关于 HTML5 进度标签的教程。当我通过 iPad 和 PC 的网络浏览器查看网站时，网站的进度条工作正常，但是当我创建自己的 html（正文部分只有进度标签）时，它不起作用我的进度条代码与网站中的一个

```
<progress max="100" value="60">
     <strong>Progress: 60% done.</strong>
</progress> 
```

在我的 html 中，它显示“进度：已完成 60%”。没有任何进度条出现。

有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:22:43.223

这就是它不起作用的原因：[我可以使用...progress/meter 吗](http://caniuse.com/#feat=progressmeter)？不支持。

# php - CakePHP hasMany 和 hasOne

> ID：14397484
> 
> 赞同：1
> 
> 时间：2013-01-18T10:58:47.800
> 
> 标签：php, cakephp

假设我有下一个模型：

```
Order hasMany OrderLine   (OrderLine belongsTo Order)
OrderLine hasOne Product  (Product belongsTo OrderLine) 
```

我想保存一个包含许多 OrderLine 的新订单，其中每个 OrderLine 都有一个产品。例如：一个用户想买一个“PS3”和一个“XBOX”，所以我的数据库必须是这样的：

```
orders
+----+-------- +
| id | user_id |
+--------------+
| 1  | 10      |

orders_line
+------+----------+------------+
| id   | order_id | product_id |
+-----------------+------------+
| 100  |   1      |   1001     |
| 101  |   1      |   1002     |

products
+-------+------+
| id    | name | ...
+--------------+
| 1001  | PS3  |
| 1002  | BOX  | 
```

我可以保存订单和订单行`saveAll`

**OrdersController.php**

```
 public function add() {
     if ($this->request->isPost()) {
        $this->Order->create();
        $this->request->data['Order']['user_id'] = $this->Auth->user('id');
        $this->Order->saveAll($this->request->data);
     }
  } 
```

这很好用。但我不知道如何保存 Products 元素。

我的表格：

```
<form ...>
<div id="order-lines">
   <div>
      <input name="data[OrderLine][0][user_id]" type="hidden">
      <div class="span3">
         <label>myfield/label>
         <input name="data[Product][0][myfield]" type="text" id="Product0Myfield">
      </div>
      <div>
         <label>fieldb</label>
         <input name="data[Product][0][fieldb]" type="text" id="Product0Fieldb">
      </div>

   <div>
      <input name="data[OrderLine][1][id]" type="hidden">
      <div>    
         <input name="data[Product][1][id]" type="hidden">
         <label>myfield</label>
         <input name="data[Product][1][myfield]" type="text" id="Product1Myfield">
      </div>

      <div class="span3">
         <label>fieldb</label>
         <input name="data[Product][1][fieldb]" type="text" id="Product1Fieldb">
      </div>
    </div>
</div>
</form> 
```

我试过这个：

```
foreach ($this->request->data['OrderLine'] as &$orderLine) {
    // create the product and populate it with form data
    $this->Product->create();
    $this->Product->save($this->request->data);
    // trying to update the OrderLine foreign key
    $orderLine['product_id'] = $this->Product->id; // doesn't works 
} 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:39:38.223

我的解决方案，欢迎任何反馈。

我不使用`saveAll` **OrdersController.php**

```
 public function add() {
     if ($this->request->isPost()) {
        $this->Order->create();
        $this->request->data['Order']['user_id'] = $this->Auth->user('id');
        $this->Order->save($this->request->data);
        $i = 0;
        foreach ($this->request->data['OrderLine'] as &$orderLine) {
           $this->OrderLine->create();
           $this->OrderLine->set('order_id', $this->Order->id);
           $this->Product->create();
           $this->Product->save($this->request->data['OrderLine'][$i]['Product'][$i]);
           $this->OrderLine->set('product_id', $this->Product->id);
           $this->OrderLine->save($this->request->data['OrderLine']);
           $i++;
        }
        $this->redirect(array(
           'controller' => 'sites',
           'action' => 'index'
        ));
     }
  } 
```

而我的表单，嗯，实际上我已经使用 JavaScript 来生成表单：

```
$(function() {
    var i = 0;
    $('#new-order-line').click(function() {
        $(
        '<div class="row-fluid">' +
            '<div class="span3">' +                                                                                                   
                '<input name="data[OrderLine][' + i + '][user_id]" type="hidden"/>' +
                '<input name="data[OrderLine][' + i + '][product_id]" type="hidden"/>' +
                '<label>FieldA</label>' +
                '<input name="data[OrderLine][' + i + '][Product][' + i + '][field_a]" type="text" id="OrderLine' + i + 'ProductFielda"/>' +
            '</div>' + 
            '<div class="span3">' +
                '<label>FieldB</label>' +
                '<input name="data[OrderLine][' + i + '][Product][' + i + '][field_b]" type="text" id="OrderLine' + i + 'ProductFieldb"/>' +
            '</div>' + 
        '</div>'
        ).fadeIn('slow').appendTo('#order-lines');
        $('.oculto').removeAttr('disabled');
        ++i;
    });
}); 
```

我对表单的更改：我已将 添加`data[OrderLine][i]`到产品输入中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:28:12.853

你应该能够使用这样的东西：

```
Array
(
    [0] => array(
        [Order] => Array
        (
            [user_id] => 10
        )

        [OrderLine] => array(
            [0] => array
            (
                [product_id] => 1001
            )
            [1] => array
            (
                [product_id] => 1002
            )
        )
    [1] => array(...)
) 
```

这意味着您的表单应如下所示：

```
data[0][Order][user_id]
data[0][OrderLine][0][product_id]
data[0][OrderLine][1][product_id]

data[1][Order][user_id]
data[1][OrderLine][0][product_id]
data[1][OrderLine][1][product_id] 
```

等等...

使用选项在一次调用中保存所有内容`array('deep' => true)`（请参阅[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array)）或使用循环：

```
foreach ($this->request->data as $data)
    $this->Order->saveAll($data) 
```

# iphone - 是否有一个小下拉菜单的组件

> ID：14397489
> 
> 赞同：3
> 
> 时间：2013-01-18T10:58:59.990
> 
> 标签：iphone, ios, drop-down-menu

我已经搜索过，但没有找到我正在寻找的确切内容。MyDataMgr 应用程序有一个非常漂亮的动画下拉菜单（见图）。有谁知道，如果有可用的组件或在哪里可以找到类似的东西？

提前致谢。

![在此处输入图像描述](../Images/58a919f51646b59bce1e723673af628d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:01:01.700

据我所知，没有，但我已经实现了类似的使用`UITableView`和动画，只是改变了动画中表格视图的矩形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:05:20.390

不，Apple 没有提供任何组件（如图所示）。而是使用 UITableVIew，当您触摸设置按钮时，将您的表格视图框架设置在动画块中

```
[UIView beginAnimations:@"bringTableDown" context:nil];
[UIView setAnimationDuration:.5];
tblTime.frame =CGRectMake(222, 97, 84, 160);
[UIView commitAnimations]; 
```

注意：- 如果您以编程方式创建，您必须给表格一个框架。

或使用块

```
 [UIView animateWithDuration:1.0 animations:^{
     tblTime.frame =CGRectMake(222, 97, 84, 160);

}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:07:44.227

这是一个自定义表格视图。

您可以使用[**NIDropdown**](http://www.cocoacontrols.com/platforms/ios/controls/nidropdown)开源控件来执行此操作。

# image - matlab图像比较

> ID：14397494
> 
> 赞同：1
> 
> 时间：2013-01-18T10:59:10.513
> 
> 标签：image, matlab, fuzzy-logic, fuzzy-comparison

我正在尝试建立一个可用于与当前图像进行比较的图像数据库（因此，如果当前图像相等或几乎等于被比较的图像，它将给出匹配）

然而，要开始这个项目，我只想使用 Matlab 比较 2 个图像，看看这个过程是如何工作的。

有谁知道我可以如何比较 image1.jpg 和 image2.jpg 来了解它们之间的关系有多密切？所以基本上如果我要比较 image1.jpg 和 image1.jpg 关系应该是 100%，但是比较 2 个不同的图像可能会给我一个非常密切的关系。

我希望这有点道理！！！

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:59:46.130

好吧，使用的方法很大程度上取决于您将什么定义为相似图像。例如，如果您可以保证平移（在 x 和 y 方向上的移动）非常小（不超过几个像素），那么简单的 RMS 减法测量可能就可以了。如果不是这种情况，暴力模板搜索方法可能是一种选择。规模的另一端是使用形态测量的高级识别技术。

第一种也是最简单的方法可能如下所示：

```
errorMeasure = sqrt(sum(sum(sum((image1-image2).^2)))) 
```

这种方法简单地取差并找到误差的“能量”。

# wpf - 如何创建圆形滑块 WPF

> ID：14397498
> 
> 赞同：5
> 
> 时间：2013-01-18T10:59:20.670
> 
> 标签：wpf, user-controls, wpf-controls

我想知道如何创建一个看起来类似于这样的滚动：

![在此处输入图像描述](../Images/3592dd5fe90dffd71e79b370b94aff35.png)

我对能够构建这样的一个非常感兴趣，但我不确定这个是什么元素以及如何实现它。我一直在搜索，但找不到任何信息......所以任何教程、指南或线索将不胜感激。

* * *

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T11:20:06.160

看看“ [A Knob Slider Control](http://alala666888.wordpress.com/2010/05/31/a-knob-slider-control/) ”。它看起来不像您的示例那么好，但这只是样式问题。也许你可以把它作为一个起点？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:04:34.320

请参阅 Charles Petzold 的[教程](http://www.charlespetzold.com/blog/2008/08/Curved-ScrollBars.html)。它很好地介绍了如何创建弯曲的滑块和滚动条。

# java - 重写 Thread.start() 但很困惑（两个场景）

> ID：14397499
> 
> 赞同：2
> 
> 时间：2013-01-18T10:59:20.677
> 
> 标签：java

我们永远不应该重写线程的 start 方法，这很安静，但是当我对两种不同的行为感到困惑时，我只是在练习 java .....我正在尝试重写 Thread 类的 start 方法。下面是代码：

```
package myPackage;

public class MainThreadUsingThread extends Thread{  
    @Override  
    public void run() {  
        System.out.println("-run   in t1");  
        System.out.println("");  
    }  
    @Override  
    public void start() {

        System.out.println("in start in t1");
        super.start();
    }

    /*public static void main(String[] args) {
        System.out.println("hii");
        Thread t3=new Thread(new MainThreadUsingThread());
        t3.start();
    }*/
}

class A11 {  
    public static void main(String[] args) {  
        System.out.println("hii");  
        Thread t1=new Thread(new MainThreadUsingThread());  
        t1.start();
        Thread t2=new Thread() {
            @Override
            public void run() {  
                System.out.println("run in t2");  
            }  
            @Override
            public void start() {

                System.out.println("in start in t2");
                super.start();
            }
        };
        t2.start();
    }
} 
```

在线程“t2”的情况下，我得到了覆盖的启动方法，但在线程“t1”的情况下却没有。请帮助我摆脱这种困惑。

在可运行接口的情况下，还有什么方法可以做同样的事情（覆盖，只要它不是一个好习惯）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:01:54.430

当你写：

```
Thread t1=new Thread(new MainThreadUsingThread()); 
```

您将`MainThreadUsingThread`对象用作 Runnable，而不是 Thread（Thread 实现 Runnable），并且它的 start 方法永远不会被调用。

如果你写：

```
Thread t1 = new MainThreadUsingThread(); 
```

你应该得到你所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:02:14.900

```
Thread t1=new Thread(new MainThreadUsingThread()); 
```

你`new MainThreadUsingThread()`被用作[`Runnable`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)（因为`Thread`工具`Runnable`）。线程执行`Runnable.run()`，这就是你没有得到覆盖的原因`start`。

当`Thread.start`被调用时，它会启动一个新线程并调用`Thread.run`该新线程。

你应该做这个：

```
Thread t1=new MainThreadUsingThread(); 
```

在`Thread`中，其`run`方法启动`Runnable`用于构造 that 的 that `Thread`，或者如果`Runnable`使用 no 构造它，则不执行任何操作。如果您 extends`Thread`和 override `Thread.run`，这有效地改变了线程的作用。

如果使用`new Thread(new MainThreadUsingThread())`，这将有效地调用构造函数[`Thread(Runnable target)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#Thread%28java.lang.Runnable%29)并构造一个新的`Thread`. 就像这样做：

```
Thread t1=new Thread((Runnable)(new MainThreadUsingThread())) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:05:06.850

你写`Thread t1=new Thread(new MainThreadUsingThread());`的 t1 不是`MainThreadingUsingThread`. 它只是调用`start()`new 的方法，然后`Thread`调用.`run()``MainThreadUsingThread`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:08:23.493

关于你的第二个问题：

扩展 Thread 类不是最佳实践。而是使用Runnable接口，即

```
Thread myThread = new Thread(new Runnable(){
   @Override
   public void run(){
   }
}); 
```

当然，这也不是最好的方法。我真的建议你看看 ExecutorService。这包含诸如池之类的东西，因此不会每次都创建新线程。您只需提交作业即可完成。

它还支持 Futures 之类的东西，如果使用得当，它会生成非常优雅的代码。

# python - 如何计算fasta格式文件中的氨基酸？

> ID：14397504
> 
> 赞同：2
> 
> 时间：2013-01-18T10:59:34.260
> 
> 标签：python, bioinformatics, biopython, fasta

我找到了解析 fasta frmated 文件的代码。我需要计算每个序列中有多少个A、T、G等，例如：

```
>gi|7290019|gb|AAF45486.1| (AE003417) EG:BACR37P7.1 gene product [Drosophila melanogaster]
MRMRGRRLLPIIL 
```

在这个序列中：

```
M - 2
R - 4
G - 1
L - 3
I - 2
P - 1 
```

代码非常简单：

```
 def FASTA(filename):
  try:
    f = file(filename)
  except IOError:                     
    print "The file, %s, does not exist" % filename
    return

  order = []
  sequences = {}

  for line in f:
    if line.startswith('>'):
      name = line[1:].rstrip('\n')
      name = name.replace('_', ' ')
      order.append(name)
      sequences[name] = ''
    else:
      sequences[name] += line.rstrip('\n').rstrip('*')

  print "%d sequences found" % len(order)
  return order, sequences

x, y = FASTA("drosoph_b.fasta") 
```

但是我怎样才能计算那些氨基酸呢？我不想使用 BioPython，我想知道如何使用，例如`count`...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:18:19.673

正如**katrielalex** [指出的那样](https://stackoverflow.com/questions/14397504/how-to-count-amino-acids-in-fasta-formated-file/14397815#comment20031034_14397504)，[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)非常适合这项任务：

```
In [1]: from collections import Counter

In [2]: Counter('MRMRGRRLLPIIL')
Out[2]: Counter({'R': 4, 'L': 3, 'M': 2, 'I': 2, 'G': 1, 'P': 1}) 
```

您可以将其应用于`sequences`代码中的 dict 值。

但是，我建议不要在现实生活中使用此代码。BioPython 之类的库做得更好。例如，您展示的代码将生成相当庞大的数据结构。由于 FASTA 文件有时非常大，您可能会耗尽内存。此外，它不会以最好的方式处理可能的异常。

最后，使用库可以节省您的时间。

BioPython 示例代码：

```
In [1]: from Bio import SeqIO

In [2]: from collections import Counter

In [3]: for entry in SeqIO.parse('1.fasta', 'fasta'):
   ...:     print Counter(entry.seq)
   ...:     
Counter({'R': 4, 'L': 3, 'I': 2, 'M': 2, 'G': 1, 'P': 1}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:12:12.417

这可以使用非常简单的 bash 命令获得，我的答案如下

```
cat input.fasta #my input file
>gi|7290019|gb|AAF45486.1| (AE003417) EG:BACR37P7.1 gene product [Drosophila melanogaster]
    MRMRGRRLLPIIL

cat input.fasta | grep -v ">" | fold -w1 | sort | uniq -c 
```

输出：

```
 1 G
   2 I
   3 L
   2 M
   1 P
   4 R 
```

fold -w1 在每个字符处拆分，您对它们进行排序并计算唯一的字符

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T11:18:12.000

评论中提到的 katrielalex 的替代方法是使用另一个字典，代码如下

```
def FASTA(filename):
  try:
    f = file(filename)
  except IOError:                     
    print "The file, %s, does not exist" % filename
    return

  order = []
  sequences = {}
  counts = {}

  for line in f:
    if line.startswith('>'):
      name = line[1:].rstrip('\n')
      name = name.replace('_', ' ')
      order.append(name)
      sequences[name] = ''
    else:
      sequences[name] += line.rstrip('\n').rstrip('*')
      for aa in sequences[name]:
        if aa in counts:
            counts[aa] = counts[aa] + 1
        else:
            counts[aa] = 1  

  print "%d sequences found" % len(order)
  print counts
  return order, sequences

x, y = FASTA("drosoph_b.fasta") 
```

这输出：

```
1 sequences found
{'G': 1, 'I': 2, 'M': 2, 'L': 3, 'P': 1, 'R': 4} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:09:47.307

```
# your previous code here

x, y = FASTA("drosoph_b.fasta")

import collections

for order in x:
  print order, ':',
  print '\n'.join('%s - %d' % (k, v) for k, v in collections.Counter(y[order]).iteritems())
  print 
```

# validation - 检查命令并验证 shell 脚本的参数

> ID：14397506
> 
> 赞同：0
> 
> 时间：2013-01-18T10:59:38.677
> 
> 标签：validation, shell, arguments, command-line-arguments, optional-arguments

我知道可能会对此提出类似的问题，但我是 shell 脚本的新手并且没有找到帮助（可能是我无法理解技术细节）。我有一个简单的问题：

我有一个简单的脚本（testscript.sh），它需要 3 个参数，我使用三个参数传递这些参数并运行它：（第一个参数是一个简单的字符串，第二个是文件名的路径，第三个是文件夹名称）

```
./testscript.sh --para1 "somestring" --para2 "/home/android/test/abc.xml" --para3 "/home/android/outputfolder" 
```

现在我想检查用户是否提供了所有带有正确参数的 reqd 输入值。我的意思是 para3 必须包含文件夹名称，para2 必须是文件名 & para1 必须是字符串，或者它们以相同的顺序出现。

另外我想验证一件事：目前我希望用户输入双引号括起来的文件名“/home/android/test/abc.xml”，但如果用户没有用双引号括起来&文件夹/filename 中有一个空格，它会产生问题，因为我无法获得包括空格在内的完整文件/文件夹名称，它正在破坏。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:09:18.000

这应该工作

```
#!/bin/sh

usage ()
{
  echo "usage: $0 STRING FILE DIRECTORY"
  exit
}

[ -n "$1" ] || usage
[ -e "$2" ] || usage
[ -d "$3" ] || usage 
```

[**参考**](http://ss64.com/bash/test.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:57:42.340

无法完全符合我的要求，但可以通过以下方式运行：修改脚本运行方式为：

```
./testscript.sh -p "somestring" -i "/home/android/test/abc.xml" -o "/home/android/outputfolder" 
```

并在脚本中添加检查为：

```
while getopts ":p:i:o:" opt; do
  case $opt in
    p)
      if [ "$OPTARG" = "abc" ] || [ "$OPTARG" = "xyz" ]; then
        somestring=$OPTARG
      else
        echo "Invalid parameter" >&2
        usage
      fi
      ;;
    i)
      if [ -e $OPTARG ] && [ -f $OPTARG ]; then 
    input=$OPTARG
       else
        echo "Input file doest'nt exist " >&2
        usage
      fi
      ;;
    o)
      if [ -e $OPTARG ]; then
    ouput=$OPTARG
      else
        echo "Output folder doest'nt exist " >&2
        usage
      fi
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
    :)
      echo "Option -$OPTARG requires an argument." >&2
      exit 1
      ;;
  esac
done 
```

但是仍然有人找到我的问题的确切解决方案（使用“--para1”），欢迎回答！

# mysql - Mysql：计算每个用户的子表

> ID：14397507
> 
> 赞同：1
> 
> 时间：2013-01-18T10:59:40.080
> 
> 标签：mysql, sql, select, join

我有四个包含一些字段的表

```
1\. user(id, name, email, password, .....)
2\. policy1(id, userid, ....)
3\. policy2(id, userid, ....)
4\. policy3(id, userid, ....) 
```

现在很清楚，用户的*主键* `(id)`是其他三个表中的*外键*。

我想针对包含该表中的用户的每个用户获取表的总数`id`。

例如：

```
user id 1 has entry in any two tables, 
user id 2 has entry in three tables, 
user id 3 has entry in any single table 
```

结果应该像

```
id    total
1     2
2     3
3     1 
```

我尝试使用`Left Join`，但我无法获得预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:03:47.623

您可以使用子查询来获取每个用户的计数，然后将这些值相加以获得最终结果。即使其他表中没有匹配的值，我也使用 a`LEFT JOIN`返回所有行。`user`如果您只希望用户在其他表中具有值，那么您可以使用`INNER JOIN`：

```
select u.id,
  Coalesce(CntP1, 0) + Coalesce(CntP2, 0) + Coalesce(CntP3, 0) TotalCount
from `user` u
left join
(
  select count(*) CntP1, userid
  from policy1
  group by userid
) p1
  on u.id = p1.userid
left join
(
  select count(*) CntP2, userid
  from policy2
  group by userid
) p2
  on u.id = p2.userid
left join
(
  select count(*) CntP3, userid
  from policy3
  group by userid
) p3
  on u.id = p3.userid 
```

# python - Python：连接到已经打开的控制台应用程序

> ID：14397514
> 
> 赞同：1
> 
> 时间：2013-01-18T10:59:59.270
> 
> 标签：python, console, popen

我有一个交互式控制台应用程序，我需要使用 Python 使用它（发送命令和接收输出）。该应用程序由另一个启动，我无法从 Python 脚本启动它。

是否可以连接到已经运行的控制台应用程序并访问其标准输入/标准输出？

理想情况下，该解决方案应适用于 Windows 和 Unix，但仅 Windows 版本也会有所帮助。目前我正在使用此处找到的解决方案 [http://code.activestate.com/recipes/440554/](http://code.activestate.com/recipes/440554/) 但它不允许连接到现有进程。

感谢您的任何意见，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:34:23.057

您是否考虑过使用套接字，因为它们直接用于简单/流式传输。它们也独立于平台。

最关键的一点是线程安全，其中必须在线程/进程之间传递 IO 流往往很忙。

另一方面，如果您使用套接字，则可以在不增加进程工作方式的复杂性的情况下进行很多通信（例如，编写容易出错的 RPC）。

尝试[文档](http://docs.python.org/2/library/socket.html)或

[例子](http://www.binarytides.com/python-socket-programming-tutorial/)

# git - 预提交挂钩文件暂存以进行提交

> ID：14397519
> 
> 赞同：0
> 
> 时间：2013-01-18T11:00:14.773
> 
> 标签：git, githooks, pre-commit-hook

如果您在 Git 中有一个创建（或修改）文件的预提交挂钩，是否需要暂存该文件才能提交？

例如，如果我有一个 pre-commit 钩子创建了一些代码的缩小版本，我是否需要`git add`那个缩小版本才能将其包含在提交中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:20:59.190

是的，您必须自己将文件添加到索引中。
pre-commit 钩子允许你在提交之前运行一些命令，这并不意味着 git 会跟踪你的钩子（或任何外部）所做的修改。

话虽如此，我不能推荐这种做法。即使不是完全相同的东西，编译应用程序并将编译结果动态添加到您的提交中也是类似的。

在我看来，代码的自动更改应该在构建期间或部署之前完成，并且与您的 VCS 无关。

# jquery - Select2 - 工作正常，直到在对话框上使用

> ID：14397532
> 
> 赞同：1
> 
> 时间：2013-01-18T11:00:50.387
> 
> 标签：jquery, jquery-select2

我想知道是否有人没有计算过这个问题并知道解决方法。

我正在使用出色的`select2`插件，它可以完美地工作到一定程度。

当我在对话框中有 select2 控件时，一切正常，直到我关闭对话框并重新打开。从那时起，每次单击 select2 控件时，列表都会快速打开，然后消失。

任何人都知道这是否是一个已知问题，或者是否有针对此特定问题的解决方案？

*编辑*

我在*对话框*打开的`EACH`时间如下：

 *```
$("#cboValueAxis").select2({ allowClear: false, minimumResultsForSearch: 10 });
$("#cboValueAxis2").select2({ allowClear: false, minimumResultsForSearch: 10 }); 
```

*编辑 2* 好的，这实际上在一种情况下工作正常，这非常奇怪。

如果我`FireBug`打开调试面板，我就会遇到问题。关闭`Firebug`面板，它可以完美运行！

我想知道是否存在某种 z 排序问题，但考虑到我之前的问题为零，这很奇怪。

已经使用多个浏览器复制了以上内容，只发生在 Firefox 和 Firebug 打开！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:17:56.407

您必须在重新设置之前销毁以前的插件：

```
open:function(){
    $('#myselect').select2("destroy").select2();
}),
... 
```

或者可能更好：（不确定它是否有效，因为我不知道 select2 插件）

```
 open:function(){
        if(!$('#myselect').data('select2'))
             $('#myselect').select2();
    }), 
```*

# bash - Bash：对一行的字段求和

> ID：14397533
> 
> 赞同：2
> 
> 时间：2013-01-18T11:00:50.607
> 
> 标签：bash, awk

我有一个格式如下的文件：

```
a 1 2 3 4
b 7 8
c 120 
```

我希望它被解析为：

```
a 10
b 15
c 120 
```

我知道这可以用 awk 轻松完成，但我不熟悉语法，无法让它为我工作。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:10:48.423

好的简单的awk入门：

```
awk '{ for (i=2;i<=NF;i++) { total+=$i }; print $1,total; total=0 }' file 
```

NF 是一个内部变量，它在每一行都被重置并且等于该行上的字段数，所以

for (i=2;i<=NF;i++) 从 2 开始一个 for 循环

total+=$i 表示 var total 具有添加到其中的第 i 个字段的值。并为上述循环的每次迭代执行。

print $1,total 打印第一个字段，后跟 OFS 变量的内容（默认为空格），然后是该行的总计。

total=0 重置为下一次迭代准备的总计 var。

以上所有内容都是在每一行输入上完成的。

[有关更多信息，请参见此处](http://www.grymoire.com/Unix/Awk.html)的 grymoires 介绍

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:05:09.360

从第二列开始并添加它们：

```
 awk '{tot=0; for(i=2;i<$NF;i++) tot+=$i; print $1, tot;}' file 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T11:11:45.810

一个纯粹的 bash 解决方案：

```
$ while read f1 f2
> do
>   echo $f1 $((${f2// /+}))
> done < file 
```

在运行它时，得到：

```
a 10
b 15
c 120 
```

第一个字段被读入变量`f1`，其余字段是 i `f2`。在 variable`f2`中，空格被替换为`+`并评估。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T20:55:05.680

这是使用子外壳、位置参数和 IFS 的一种棘手方法。适用于字段之间的不同数量的空白。

```
while read label numbers; do 
    echo $label $(set -- $numbers; IFS=+; bc <<< "$*")
done < filename 
```

这是有效的，因为外壳扩展`"$*"`成一个位置参数字符串，由`$IFS`( [documentation](http://www.gnu.org/software/bash/manual/bashref.html#Special-Parameters) )的第一个字符连接

# mysql - 集群中的 MySQL 触发器返回错误

> ID：14397536
> 
> 赞同：0
> 
> 时间：2013-01-18T11:01:01.887
> 
> 标签：mysql, triggers, cluster-computing

当新行插入另一个表时，我有一个**触发器来执行更新。**

触发器是：

```
delimiter $$
create trigger child_price_update
after insert on child
for each row
BEGIN
UPDATE `amd_smpp_gw`.`MT`
SET `amd_smpp_gw`.`MT`.`child_price`=NEW.child_price
WHERE `amd_smpp_gw`.`MT`.`msg_id` = NEW.msg_id;
END
$$
DELIMITER ; 
```

在插入表**“child”**（child_db 数据库）后，此触发器对另一个数据库（amd_smpp_gw）中的表 MT 执行更新并返回错误：

**错误 1296 (HY000)：从 NDBCLUSTER 得到错误 0“无错误”**

我能做些什么来解决这个问题？

插入后触发器执行更新时，集群返回此错误的原因是什么？

PS 更新成功。

谢谢

# java - 如何在 Spring 控制器中访问 applicationContext.xml？

> ID：14397537
> 
> 赞同：0
> 
> 时间：2013-01-18T11:01:04.040
> 
> 标签：java, spring, spring-mvc

我的控制器类在 `com.tps.sphbIntegration.controllers`包中

我的 applicationContext.xml 文件在`WEB-INF/spring/applicationContext.xml`

在控制器类中：

```
@Controller
@RequestMapping("jsp")
public class SpringController {

@RequestMapping(value="register.html" , method = RequestMethod.POST)
public String enterSucess(@Valid Login login , BindingResult result , Map model,HttpSession session){

    if(result.hasErrors()){
        System.out.println("Error happened...");
        return "register";
    }else{

    System.out.println("I am an controller for get method of jsp/success.html ");
    login = (Login) model.get("login");
    session.setAttribute("empId", login.getEmpId()) ;
    session.setAttribute("empName", login.getEmpName()) ;
    session.setAttribute("empPassword", login.getEmpPassword()) ;
    //session.setAttribute("empGender", login.getGender()) ;
    //session.setAttribute("empType", login.getEmpType()) ;

    ApplicationContext factory = new ClassPathXmlApplicationContext("spring/applicationContext.xml");
    EmployeeDao dao=(EmployeeDao)factory.getBean("d");
    dao.saveEmployee(login);

    return "registerCheck";
    }

  }
} 
```

执行时我得到了异常

```
java.io.FileNotFoundException: class path resource [spring/applicationContext.xml] cannot be opened because it does not exist 
```

请帮我设置`applicationContext.xml`控制器中的路径或举例说明如何访问`applicationContext.xml`控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:03:39.713

您必须告诉 servlet 上下文加载器侦听器在 web.xml 中哪里可以找到 Spring 应用程序上下文 XML 文件。您的错误向我表明您没有这样做。

如果您的 web.xml 中确实有它，请检查路径以查看它们是否正确。

如果路径正确，请打开 WAR 文件并查看 XML 是否丢失。也许您有部署和打包问题。

网络应用程序不应该这样调用：

```
ApplicationContext factory = new ClassPathXmlApplicationContext("spring/applicationContext.xml"); 
```

如果您的目录中有一个，这将*起作用*，但首选的习惯用法是使用：`spring/applicationContext.xml``WEB-INF/classes``ContextLoaderListener`

[按照 DispatchServlet 使用 ContextLoaderListener](https://stackoverflow.com/questions/2583127/use-a-contextloaderlistener-in-accordance-with-dispatchservlet)

您应该在启动时为整个应用程序加载应用程序上下文，而不是为一个控制器加载，当然*也不*是每次客户端调用此 URL 时。启动时加载一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:05:17.493

1.  您的控制器可以实现`BeanFactoryAware`一个接口，通过该接口它可以访问应用程序上下文的现有实例。您不得自己创建应用程序上下文。

2.  从您的代码中不太清楚您是否真的需要访问上下文：看起来您需要通过 Spring 的标准依赖注入机制将 DAO**注入到您的控制器中。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T18:32:08.143

我认为这是获得应用程序上下文访问权限的推荐方法：

```
@Autowired
private ApplicationContext applicationContext; 
```

不需要以这种方式使用“* Aware”类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T12:21:29.690

不不不，你可以这样做！同样，我看到您的类中有一个 ANNOTATION(@Controller)，这意味着您的类已由 spring 管理，如果您在方法中创建另一个应用程序，则内存中有两个 ApplicationContext 实例。让你的类实现ApplicationContextAware的接口并重写setApplication方法，并添加一个私有成员ApplicationContext，然后在该方法中赋值

# java - 如何将字符串写入txt文件并将其发送到服务器

> ID：14397542
> 
> 赞同：1
> 
> 时间：2013-01-18T11:01:18.627
> 
> 标签：java, android, string, file

我想在android中开发一个应用程序，我需要在其中捕获图像并将该图像转换为字符串并将该字符串写入txt文件并将其发送到服务器读取该文件并将该字符串再次转换为图像的服务器......

现在我已经完成了图像参与并将该图像转换为字符串并将该字符串写入 txt 文件。

但是当我尝试读取该文件并将该字符串转换为图像时它不起作用......

将图像转换为字符串的代码是

```
File imageFile = new File(path);
Bitmap bitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath());
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 90, stream);
byte[] image = stream.toByteArray();
imgstr = Base64.encodeToString(image, 0); 
```

将其写入文件的代码是

```
File file = new File("new.txt");
FileWriter w = new FileWriter("/sdcard/new/new.txt");
BufferedWriter out = new BufferedWriter(w);
out.write(data);
out.flush();
out.close(); 
```

读取该文件并将该字符串再次转换为图像的代码是

```
FileInputStream fstream = new FileInputStream("/sdcard/new/new.txt");          
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in));
String strLine;
ArrayList list=new ArrayList();
while ((strLine = br.readLine()) != null)
{
    list.add(strLine);
}
Iterator itr;
for (itr=list.iterator(); itr.hasNext(); )
{
    String str=itr.next().toString(); 
    StringBuffer sb=new StringBuffer(str);
    int length=sb.length();
    String imageDataString = sb.substring(0, length);
    byte[] decodedString = Base64.decode(imageDataString, Base64.DEFAULT);
    Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0,decodedString.length); 
    FileOutputStream imageOutFile = new FileOutputStream("/sdcard/new/android.jpg");
    imageOutFile.write(decodedString);
    imageOutFile.close();
    System.out.println("File converted"); 
```

但它没有将该字符串转换为图像请告诉我解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:40:23.617

如果您只需要通过 ftp 从 android 将文件上传到 Web 服务器，这将解决问题（从 froyo 开始工作 - 但您必须导入[apache commons](http://commons.apache.org/net/download_net.cgi)并在“src”文件夹中安装副本）：

```
import java.io.FileInputStream;
import org.apache.commons.net.ftp.FTPClient;
import android.util.Log;
public class FtpFileUp implements Runnable {

    private final String TAG = "FTPfile";
    boolean flagFTPOK = false;

    String fileName, fileDirSubLocalName, fileDirSubRemoteName;
    String fileDirName = NavigationActivity.fileDirName;

    FtpFileUp (String fileNameIn, String fileDirSubLocalNameIn, String fileDirSubRemoteNameIn) {
        fileName = (String) fileNameIn;
        fileDirSubLocalName = (String) fileDirSubLocalNameIn;
        fileDirSubRemoteName = (String) fileDirSubRemoteNameIn;
    }
    FtpFileUp (String fileNameIn) {
        String fileDirSubNameIn = "";
        fileName = (String) fileNameIn;
        fileDirSubLocalName = (String) fileDirSubNameIn;
        fileDirSubRemoteName = (String) fileDirSubNameIn;
    }
    FtpFileUp (String fileNameIn, String fileDirSubNameIn) {
        fileName = (String) fileNameIn;
        fileDirSubLocalName = (String) fileDirSubNameIn;
        fileDirSubRemoteName = (String) fileDirSubNameIn;
    }

    @Override
    public void run() {
        String ftpConnectString = "ftp.yourdomain.com";
        if (fileDirSubRemoteName != "") fileDirSubRemoteName += "/";
        if (fileDirSubLocalName != "") fileDirSubLocalName += "/";
        FTPClient ftpCli = new FTPClient();
        try {
           FileInputStream fis = new FileInputStream(fileDirName+"/"+fileDirSubLocalName+fileName);
           ftpCli.connect(ftpConnectString);
           ftpCli.login("user", "password");
           Log.i(TAG, "ok ftp "+ftpCli.getDataConnectionMode());
           ftpCli.storeFile("/"+fileDirSubRemoteName+fileName, fis);
           fis.close();
           flagFTPOK = true;
        } catch (Exception except) {
           Log.i(TAG, "ftp up FAIL "+except);
        }
    }

} 
```

您将使用以下代码调用它（由 TRY CATCH 封装）

```
Thread ftpThread01 = new Thread(new FtpFileUp("fileName", "", "/www/android/imgUpload"));
ftpThread01.start(); 
```

注意：如您所见，您可以使用 2 个替代构造函数通过存储默认位置来自动化您的 ftp。它们可以被移除而不会造成任何伤害。

# arrays - 在excel行中设置数组而不迭代其元素Apache POI

> ID：14397545
> 
> 赞同：1
> 
> 时间：2013-01-18T11:01:24.927
> 
> 标签：arrays, excel, apache-poi

是否可以通过使用 Apache POI 指定行号和单元格范围来设置 excel 行中的数组值。

我不想遍历每个单元格以获取数组中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:02:57.943

不，你必须迭代。但这不是世界末日，如果 POI 确实支持它需要自己进行迭代，那么您的控制权就会减少！

假设你有一个数字数组，你只需要像

```
Row r = sheet.getRow(12);
if (r == null) { r = sheet.createRow(12); }

for (int i=0; i<numbers.length; i++) {
    Cell c = r.getCell(i);
    if (c == null) {
       c = r.createCell(i, Cell.CELL_TYPE_NUMERIC);
    }
    c.setCellValue(numbers[i]);
} 
```

# scala - 铸造“空心”更高种类的类型值以避免实例化

> ID：14397548
> 
> 赞同：2
> 
> 时间：2013-01-18T11:01:31.400
> 
> 标签：scala, casting, type-erasure, higher-kinded-types

我发现自己看了一些 Scalawags#2 的录音，然后是关于类型擦除的部分，Dick Wall 指出反射最终会咬你的脚。

所以我在想一些我经常做的事情（我也看到了 Scala Collections 的实现）。假设我有一个带有序列化程序的系统，将系统作为类型参数：

```
trait Sys[S <: Sys[S]] { type Tx }
trait FooSys extends Sys[FooSys]

trait Serializer[S <: Sys[S], A] {
  def read(implicit tx: S#Tx): A
} 
```

现在有许多类型可以在*没有值参数*`A`的情况下构造序列化器，所以本质上系统类型参数是“空心的”。由于在我的示例中大量调用了序列化程序，因此我正在保存实例化：

 *```
object Test {
  def serializer[S <: Sys[S]] : Serializer[S, Test[S]] =
    anySer.asInstanceOf[Ser[S]]

  private val anySer = new Ser[FooSys]

  private final class Ser[S <: Sys[S]] extends Serializer[S, Test[S]] {
    def read(implicit tx: S#Tx) = new Test[S] {} // (shortened for the example)
  }
}
trait Test[S <: Sys[S]] 
```

我*知道*这是正确的，但当然，`asInstanceOf`有难闻的气味。对这种方法有**什么建议吗？**让我补充两件事

*   将类型参数从 trait 的构造函数移动`Serializer`到`read`方法不是一种选择（有特定的序列化程序需要参数化的值参数`S`）
*   向 的类型构造函数参数添加方差`Serializer`不是一种选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:30:01.347

**介绍：**

我对你的例子有点困惑，我可能误解了你的问题，我觉得两者之间存在某种类型的递归`S`，`Tx`我没有从你的问题中得到答案（因为如果不是，`S#Tx`可能是任何东西，我不明白的问题`anySer`）

**暂定答案：**

在编译时，对于任何实例，`Ser[T]`都会有一个定义明确的类型参数，因为您想在实例化时保存它，所以对于给定的特定类型`T`，您将有一个 anySer`Ser[T]``A`

你在某种程度上说的是 a `Ser[A]`will 像`Ser[S]`any一样工作`S`。根据A型和S型的关系，这可以用两种方式来解释。

1.  如果每次都可以进行这种转换，`A<:<S`那么您的序列化程序就是`COVARIANT`并且您可以将您的 anySer 初始化为`Ser[Nothing]`. 由于 Nothing 是 Scala 中每个类的子类，因此您的 anySer 将始终作为`Ser[Whatever]`

2.  如果每次都可以进行这种转换， `S<:<A`那么您的序列化程序就是`CONTRAVARIANT`并且您可以将您的 anySer 初始化为`Ser[Any]`. 由于 Any 是 Scala 中每个类的子类，因此您的 anySer 将始终作为`Ser[Whatever]`

3.  如果它不是前一种情况，那么这意味着：

    ```
    def serializer[S <: Sys[S]] : Serializer[S, Test[S]] =
    anySer.asInstanceOf[Ser[S]] 
    ```

    在运行时可能会产生可怕的失败，因为会有一些 S 序列化程序无法工作的 S。如果没有可能发生这种情况的 S，那么您的班级属于 1 或

**评论后编辑**

如果您的类型确实是不变的，则通过强制转换进行的转换会破坏不变关系。您基本上是在强制类型系统执行非自然转换，因为您知道基于您自己对您编写的代码的了解不会发生任何错误。如果是这种情况，那么强制转换是正确的方法：您正在强制使用与编译器可以正式检查的类型不同的类型，并且您正在明确这一点。我什至会发表一个很大的评论，说为什么你知道操作是合法的并且编译器无法猜测并最终附加一个漂亮的单元测试来验证“非正式”关系是否始终成立。

总的来说，我认为应该非常小心地使用这种做法。强类型语言的好处之一是编译器执行正式的类型检查，帮助您发现早期错误。如果你故意破坏它，你就放弃了这个巨大的好处。*

# c# - C# - 使用 Ping 事件时应用程序崩溃

> ID：14397549
> 
> 赞同：0
> 
> 时间：2013-01-18T11:01:33.327
> 
> 标签：c#, multithreading, event-handling, network-programming, ping

我正在使用 net 3.5 中的 ping 库来检查 IP 的存在。

看看下面的代码：

```
 public void PingIP(string IP)
    {
        var ping = new Ping();
        ping.PingCompleted += new PingCompletedEventHandler(ping_PingCompleted); //here the event handler of ping
        ping.SendAsync(IP,"a"); 
    }

void ping_PingCompleted(object sender, PingCompletedEventArgs e)
{
    if (e.Reply.Status == IPStatus.Success)
    {
       //On Ping Success
    }
} 
```

然后我通过 Thread 或 backgroundworker 执行代码。

```
private void CheckSomeIP()
{
        for (int a = 1; a <= 255; a++)
        {
            PingIP("192.168.1." + a);
        }
} 
```

> ```
> System.Threading.Thread checkip = new System.Threading.Thread(CheckSomeIP);
> checkip.Start(); 
> ```

那么问题来了：

**如果我启动线程，那么我将关闭应用程序（在角落处使用 Controlbox 关闭），尽管我已经关闭/中止线程，但我会得到“应用程序崩溃”。**

我认为问题是事件处理程序？因为当我关闭应用程序时它们仍在工作，所以我会得到**“应用程序崩溃”**

解决这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:10:04.667

我认为，在成功 Ping 时，您正在尝试从线程内更新接口，这将导致 CrossThreadingOperation 异常。

在网上搜索 ThreadSave / delegates：

```
public void PingIP(string IP)
{
    var ping = new Ping();
    ping.PingCompleted += new PingCompletedEventHandler(ping_PingCompleted); //here the event handler of ping
    ping.SendAsync(IP,"a"); 
}

delegate void updateTextBoxFromThread(String Text);

void updateTextBox(String Text){
   if (this.textbox1.InvokeRequired){
       //textbox created by other thread.
       updateTextBoxFromThread d = new updateTextBoxFromThread(updateTextBox);
       this.invoke(d, new object[] {Text});
   }else{
      //running on same thread. - invoking the delegate will lead to this part.
      this.textbox1.text = Text;
   }
}

void ping_PingCompleted(object sender, PingCompletedEventArgs e)
{
    if (e.Reply.Status == IPStatus.Success)
    {
       updateTextBox(Text);
    }
} 
```

同样在“退出”应用程序时，您可能希望取消所有正在运行的线程。因此，您需要在应用程序某处启动的每个线程上保留引用。在 Main-Form 的 formClosing-Event 中，您可以强制所有（正在运行的）线程停止。

# jquery - 从动态类更改 div 的背景

> ID：14397551
> 
> 赞同：0
> 
> 时间：2013-01-18T11:01:44.057
> 
> 标签：jquery, html, dynamic

我有一些 jQuery 可以为链接列表*动态*生成类并从 XML 表中获取链接，如下所示： -

```
<ul>
    <li><a href="link1fromxml" class="background1"></a></li>
    <li><a href="link2fromxml" class="background2"></a></li>
    <li><a href="link3fromxml" class="background3"></a></li>
</ul> 
```

现在我需要做的是从单击时生成的类的链接中，更改另一个的背景`div`并从我的 XML 文件中获取源。这是我的代码。

```
$(xml).find("large").each(function(i) {
    var url = $(this).find('urllarge').text();
    $('.background' + i).live('click', function() {
        $('bigImage').css('background-image', 'url(' + urllarge + ')');
    });
}); 
```

但是，这是一种痛苦并且无法正常工作，而且我看不出哪里出错了，我们将不胜感激任何帮助！

```
$(document).ready(function()
{
  $.ajax({
    type: "GET",
    url: "images.xml",
    dataType: "xml",
    success: parseXml
  });
});

function parseXml(xml)

$(xml).find("large").each(function(i) {

    $('.background' + i).live('click', function() {
        $('bigImage').css('background-image', 'url(' + urllarge + ')');
    });

});

}); 
```

XML 是：-

```
<image>
<large>
<urllarge>img/bigimage.jpg</urllarge>
</large>
</image> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:50:03.107

您的 parse xml 函数丢失 {} 它应该是这样的：

```
function parseXml(xml) {

  $(xml).find("large").each(function(i) {

    $('.background' + i).live('click', function() {
      $('bigImage').css('background-image', 'url(' + urllarge + ')');
    });

  });
} 
```

# java - 无法从 java 过滤器获取 facebook 访问令牌，错误 HTTP 响应代码：400 用于 URL：http://graph.facebook.com/oauth/access_token?client_id=

> ID：14397562
> 
> 赞同：-2
> 
> 时间：2013-01-18T11:02:20.250
> 
> 标签：java, facebook, facebook-graph-api, facebook-page

我正在尝试设置原型环境并与 facebook 进行通信。我已经设置了一个测试 Java 应用程序，并通过我的静态 IP 提供服务。对于 facebook 部分，我已经实现了这个朋友的例子

[http://www.richardnichols.net/2010/06/implementing-facebook-oauth-2-0-authentication-in-java/](http://www.richardnichols.net/2010/06/implementing-facebook-oauth-2-0-authentication-in-java/)

为了解决您可能对与 facebook 的一般连接性的任何问题，我已经使用以下信息启动了我自己的页面选项卡应用程序

页面标签 URL：[http://[MYIP]:8080/facebookContest/app/index.do](http://[MYIP]:8080/facebookContest/app/index.do) 安全页面标签 URL：[https://[MYIP]:8443/facebookContest/app/index.do](https://[MYIP]:8443/facebookContest/app/index.do)

我已经检查了这两个 url 是否都可以正常工作，并且确实返回了我的“hello world”localy。我将此应用程序添加到我创建的测试 facebook 页面，使用此 url： [http ://www.facebook.com/dialog/pagetab?app_id=[MYAPPID]&next=http://[MYIP]:8080/facebookContest/应用程序/index.do](http://www.facebook.com/dialog/pagetab?app_id=[MYAPPID]&next=http://[MYIP]:8080/facebookContest/app/index.do)

仅供参考，如果我禁用所有 facebook 授权/通信逻辑，应用程序的静态内容会在 facebook 内正确显示。因此，似乎建立了与 facebook 的初始通信。

Facebook.java 代码

```
 package com.facebookContest.fb;

    import com.visural.common.StringUtil;

    public class Facebook {
        // get these from your FB Dev App
        private static final String api_key = "[MYKEY]";     
        private static final String secret = "MYSECRET";
        private static final String client_id = "[MYKEY]";  

        // set this to your servlet URL for the authentication servlet/filter
        private static final String redirect_uri = "http://[MYIP]:8080/facebookContest/app/index.do"; 
        /// set this to the list of extended permissions you want
        private static final String[] perms = new String[] {"publish_stream", "email"};

        public static String getAPIKey() {
            return api_key;
        }

        public static String getSecret() {
            return secret;
        }

        public static String getLoginRedirectURL() {
            return "http://graph.facebook.com/oauth/authorize?client_id=" + 
                client_id + "&display=page&redirect_uri=" + 
                redirect_uri+"&scope="+StringUtil.delimitObjectsToString(",", perms);
        }

        public static String getAuthURL(String authCode) {
            return "http://graph.facebook.com/oauth/access_token?client_id=" + 
                client_id+"&redirect_uri=" + 
                redirect_uri+"&client_secret="+secret+"&code="+authCode;
        }
    } 
```

FacebookUserService.java

```
 package com.facebookContest.fb;

    import java.net.URL;

    import org.json.JSONObject;

    import com.visural.common.IOUtil;

    class FacebookUserService {

        public void authFacebookLogin(String accessToken, int expires) {
            try {
                JSONObject resp = new JSONObject(
                    IOUtil.urlToString(new URL("https://graph.facebook.com/me?access_token=" + accessToken)));
                String id = resp.getString("id");
                String firstName = resp.getString("first_name");
                String lastName = resp.getString("last_name");
                String email = resp.getString("email");

                // custom code

            } catch (Throwable ex) {
                throw new RuntimeException("failed login", ex);
            }
        }
    } 
```

我的过滤器类 FBOAuth.java 代码：

```
 package com.facebookContest.fb;

    import java.io.ByteArrayOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.net.URL;

    import javax.servlet.Filter;
    import javax.servlet.FilterChain;
    import javax.servlet.FilterConfig;
    import javax.servlet.ServletException;
    import javax.servlet.ServletRequest;
    import javax.servlet.ServletResponse;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    import org.springframework.beans.factory.annotation.Autowired;

    import com.visural.common.StringUtil;

    public class FBOAuth implements Filter {

        @Autowired
        FacebookUserService facebookUserService;

        public void init(FilterConfig fc) throws ServletException {
        }

        public void doFilter(ServletRequest srvlReq, ServletResponse srvReq, FilterChain fc) throws IOException, ServletException {

            HttpServletRequest request = (HttpServletRequest)srvlReq;
            HttpServletResponse response = (HttpServletResponse)srvReq;

            String code = srvlReq.getParameter("signed_request");

            if (StringUtil.isNotBlankStr(code)) {
                String authURL = Facebook.getAuthURL(code);
                URL url = new URL(authURL);

                try {

                    String result = readURL(url);
                    String accessToken = null;
                    Integer expires = null;
                    String[] pairs = result.split("&");

                    for (String pair : pairs) {
                        String[] kv = pair.split("=");
                        if (kv.length != 2) {
                            throw new RuntimeException("Unexpected auth response");
                        } else {
                            if (kv[0].equals("access_token")) {
                                accessToken = kv[1];
                            }
                            if (kv[0].equals("expires")) {
                                expires = Integer.valueOf(kv[1]);
                            }
                        }
                    }

                    if (accessToken != null && expires != null) {
                        facebookUserService.authFacebookLogin(accessToken, expires);
                        response.sendRedirect("http://[MYIP]:8080/facebookContest/app/index.do");
                    } else {
                        throw new RuntimeException("Access token and expires not found");
                    }

                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }       
        }

        private String readURL(URL url) throws IOException {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            InputStream is = url.openStream();
            int r;
            while ((r = is.read()) != -1) {
                baos.write(r);
            }
            return new String(baos.toByteArray());
        }

        public void destroy() {
        }
     } 
```

在第 45 行 ``String result = readURL(url);``

过滤器使用从调试器复制的以下网址进行获取 - 对我来说似乎正确 -

[http://graph.facebook.com/oauth/access_token?client_id=[MYAPPID]&redirect_uri=http://[MYIP]:8080/facebookContest/app/index.do&client_secret=[MYAPPSECRET]&code=s0PmZHCK9Vl2tBzIGLDJbJJ4uiVUTIkU2KiknGboLrI.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTM1ODUwNDY0NiwicGFnZSI6eyJpZCI6IjM1NDcxOTMwNDYzNTQ4MSIsImxpa2VkIjpmYWxzZSwiYWRtaW4iOnRydWV9LCJ1c2VyIjp7ImNvdW50cnkiOiJnciIsImxvY2FsZSI6ImVsX0dSIiwiYWdlIjp7Im1pbiI6MjF9fX0](http://graph.facebook.com/oauth/access_token?client_id=[MYAPPID]&redirect_uri=http://[MYIP]:8080/facebookContest/app/index.do&client_secret=[MYAPPSECRET]&code=s0PmZHCK9Vl2tBzIGLDJbJJ4uiVUTIkU2KiknGboLrI.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTM1ODUwNDY0NiwicGFnZSI6eyJpZCI6IjM1NDcxOTMwNDYzNTQ4MSIsImxpa2VkIjpmYWxzZSwiYWRtaW4iOnRydWV9LCJ1c2VyIjp7ImNvdW50cnkiOiJnciIsImxvY2FsZSI6ImVsX0dSIiwiYWdlIjp7Im1pbiI6MjF9fX0)

抛出的异常`String result = readURL(url);`是这个

```
 java.io.IOException: Server returned HTTP response code: 400 for URL: http://graph.facebook.com/oauth/access_token?client_id=[MYAPPID]&redirect_uri=http://[MYIP]:8080/facebookContest/app/index.do&client_secret=[MYAPPSECRET]&code=GdbObQHyYPvIKnkShMBv8Wry-UNPAQWAMmSVyXe5n_k.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTM1ODUwNDQ4OCwicGFnZSI6eyJpZCI6IjM1NDcxOTMwNDYzNTQ4MSIsImxpa2VkIjpmYWxzZSwiYWRtaW4iOnRydWV9LCJ1c2VyIjp7ImNvdW50cnkiOiJnciIsImxvY2FsZSI6ImVsX0dSIiwiYWdlIjp7Im1pbiI6MjF9fX0
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1625)
        at java.net.URL.openStream(URL.java:1037)
        at com.facebookContest.fb.FBOAuth.readURL(FBOAuth.java:78)
        at com.facebookContest.fb.FBOAuth.doFilter(FBOAuth.java:44)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
    Ιαν 18, 2013 12:21:30 ΜΜ org.apache.catalina.core.StandardWrapperValve invoke
    SEVERE: Servlet.service() for servlet [facebookContest] in context with path [/facebookContest] threw exception
    java.lang.RuntimeException: java.io.IOException: Server returned HTTP response code: 400 for URL: http://graph.facebook.com/oauth/access_token?client_id=[MYAPPID]&redirect_uri=http://[MYIP]:8080/facebookContest/app/index.do&client_secret=[MYAPPSECRET]&code=GdbObQHyYPvIKnkShMBv8Wry-UNPAQWAMmSVyXe5n_k.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTM1ODUwNDQ4OCwicGFnZSI6eyJpZCI6IjM1NDcxOTMwNDYzNTQ4MSIsImxpa2VkIjpmYWxzZSwiYWRtaW4iOnRydWV9LCJ1c2VyIjp7ImNvdW50cnkiOiJnciIsImxvY2FsZSI6ImVsX0dSIiwiYWdlIjp7Im1pbiI6MjF9fX0
        at com.facebookContest.fb.FBOAuth.doFilter(FBOAuth.java:71)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: http://graph.facebook.com/oauth/access_token?client_id=[MYAPPID]&redirect_uri=http://[MYIP]:8080/facebookContest/app/index.do&client_secret=[MYAPPSECRET]&code=GdbObQHyYPvIKnkShMBv8Wry-UNPAQWAMmSVyXe5n_k.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTM1ODUwNDQ4OCwicGFnZSI6eyJpZCI6IjM1NDcxOTMwNDYzNTQ4MSIsImxpa2VkIjpmYWxzZSwiYWRtaW4iOnRydWV9LCJ1c2VyIjp7ImNvdW50cnkiOiJnciIsImxvY2FsZSI6ImVsX0dSIiwiYWdlIjp7Im1pbiI6MjF9fX0
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1625)
        at java.net.URL.openStream(URL.java:1037)
        at com.facebookContest.fb.FBOAuth.readURL(FBOAuth.java:78)
        at com.facebookContest.fb.FBOAuth.doFilter(FBOAuth.java:44)
        ... 16 more 
```

我相信不需要我的 spring/hibernate 配置，因为应用程序似乎运行正常。如果有人需要它，尽管提供它没有问题。

我已经阅读了几篇表明redirect_uri 错误的帖子。我一遍又一遍地检查它，但事实并非如此。应用程序选项卡安装在页面上，其中包含我在引发异常时调用的确切 uri。

[尝试获取访问令牌时，](https://stackoverflow.com/questions/7333150/http-400-error-when-trying-to-get-access-token)我也无法在此处找到答案 HTTP 400 错误

请随时指导我了解任何可能有帮助的文档。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:31:01.927

我设法解决了这个问题，所以我想我可以分享解决方案，如果其他人遇到这个问题。

异常的错误消息带有包含更多信息的 json 响应。要查看响应，您只需将构建的 url 粘贴到任何浏览器即可。我这样做如下所示。

```
 public static String getAuthURL(String authCode) {
            return "https://graph.facebook.com/oauth/access_token?"+
                    "client_id=" + client_id +
                    "&redirect_uri=" + redirect_uri + 
                    "&client_secret=" + secret + 
                    "&code=" + authCode;
        } 
```

将显示错误消息。并将为您提供有关出了什么问题的信息。就我而言，我正在尝试通过 http 进行授权 GET，并且错误消息指示此类操作应通过 https 完成。

我纠正了这个问题，我终于得到了 access_token。

# asp.net-mvc - 如何在 ASP.NET MVC Fluent Validation 中使用“When”方法？

> ID：14397565
> 
> 赞同：1
> 
> 时间：2013-01-18T11:02:40.540
> 
> 标签：asp.net-mvc, fluentvalidation

我正在尝试开发一个流畅的验证规则，如果我的`TitleId`FK 属性为空，那么`TitleOther`文本字段将变为强制性的。我尝试了几种流利表达的组合和顺序，均无济于事。

这是我到目前为止所拥有的，如果有人可以帮助我`When`纠正这一部分，我将不胜感激，并且受过更多教育。

```
context.RulesFor(p => p.TitleId).Required(p => p.Message("Title is required."));
context.RulesFor(p => p.TitleOther)
        .Required(p => p.Message("Please provide your other title."))
        .Length(0, 50, c => c.Message("Other title may not exceed 50 characters")
        .When(p => context.RulesFor(p => p.TitleId). *[what here?]* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:31:08.517

我用`FluentValidation`的不多，但根据我从[文档](http://fluentvalidation.codeplex.com/wikipage?title=Customising&referringTitle=Documentation&ANCHOR#WhenUnless)中了解到的你需要做的

`.When(p => p.TitleId == null)`

代替`.When(p => context.RulesFor(p => p.TitleId). *[what here?]*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T11:27:10.663

我`When`在我的项目中使用过`Fluent Validation`. 我已经使用了 1 个条件，即比较密码，如下所示：

```
RuleFor(u => u.Password).NotEmpty().WithMessage("Please Enter Password"); // Normal checked for non empty

When(u => !string.IsNullOrEmpty(u.Password) && !string.IsNullOrEmpty(u.ComfirmPassword), () =>
            {
                RuleFor(u => u.ComfirmPassword).Equal(x => x.Password).WithMessage("Password does not match");
            }); // For compare password 
```

希望它可以帮助你。

谢谢。

# linux - 从文本文件数据库替换当前字符串

> ID：14397566
> 
> 赞同：0
> 
> 时间：2013-01-18T11:02:50.900
> 
> 标签：linux, bash, shell, ubuntu, sed

从文本文件数据库格式，

> 客户：组屋：价格：左：有货
> 
> 泰德：rm4:34:197:101

bash shell 脚本，

```
read -p $'Price: '  Price2
sed -i "s/$Customer:$HDB:$Price/$Customer:$HDB:$Price2/g" CustomerDB.txt 
```

当我输入 43 时，数据库返回

> 泰德：rm4:4334:197:101

我如何将其替换为 43 而不是 34？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:34:47.093

好像`$Price`是空的。你确定它包含旧价格吗？如果您想替换所有价格而不考虑旧值，您可以使用

```
sed -i "s/$Customer:$HDB:[0-9]*/$Customer:$HDB:$Price2/g" CustomerDB.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:41:49.403

就我个人而言，我会使用 awk 而不是 sed，因为它会自动将行解析为单独的字段。

```
read -p "customer: " cust
read -p "new price: " price2

awk -F : -v OFS=: -v cust=$cust -v price=$price2  '{ if($1==cust){ $3=price } ; print}' file 
```

那么发生了什么？

那么 -F : 设置 : 作为字段分隔符 -v var=val 设置一些变量以在 awk 脚本中使用，在这种情况下，OFS 以及 cust 和 price 变量

实际的 awk 脚本将第一个字段 ($1) 与 cust var 进行比较。如果它们相同，则将第三个字段设置为等于价格变量。

然后我们打印出由 OFS var 的值分隔的所有字段（默认情况下为空格，但我们已覆盖为 :'s）

[这是一个很好的 awk 介绍](http://www.grymoire.com/Unix/Awk.html)

# ruby - 使用 Resque 排队进行集成测试或模拟？

> ID：14397567
> 
> 赞同：2
> 
> 时间：2013-01-18T11:02:51.480
> 
> 标签：ruby, rspec, mocking, integration-testing, resque

你将如何测试这门课？您会将它与 Resque 集成并检查作业是否已放入队列中，还是要模拟它，如果要模拟它，您将如何避免像示例规范中所示那样重复代码。

```
class BookingReminderEnqueuer
  def initialize(user, booking, worker = BookingReminder)
    @user, @booking, @worker = user, booking, worker
  end

  def enqueue
    Resque.enqueue_at(
      remind_user_at,
      @worker,
      booking_id: @booking.id,
      user_id: @user.id
    ) if @booking.remind_user?
  end

  private
  def remind_user_at
    @booking.start_time - 6.hours
  end
end

require 'spec_helper'
describe BookingReminderEnqueuer
  describe "#enqueue" do
    context "when the user should have a reminder" do
      it "enqueues the reminder" do
        booking.stub(:remind_user?) { true }
        Resque.should_receive(:enqueue_at).with(
          booking.start_time - 6.hours,
          BookingReminder,
          booking_id: booking.id,
          user_id: user.id
        ).once
        booking_reminder_enqueuer.enqueue
      end
    end

    context "when the user shouldn't have a reminder" do
      it "does not enqueue the reminder" do
        booking.stub(:remind_user?) { false }
        Resque.should_not_receive(:enqueue_at)
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:59:37.280

我会使用像[fakeredis](https://github.com/guilleiguaran/fakeredis)这样的 gem来创建一个测试 redis 数据库。这将创建一个隔离的内存中 Redis 实例用于测试，可以在测试运行时清除该实例。然后，您可以验证作业是否使用正确的参数正确入队，而不是模拟入队方法（因为让入队参数正常工作是该方法的核心。

```
 # Gemfile
    group :test do
      gem "rspec"
      gem "fakeredis", :require => "fakeredis/rspec"
    end

    # Spec
    describe BookingReminderEnqueuer
      describe "#enqueue" do
        context "when the user should have a reminder" do
          it "enqueues the reminder" do
            booking.stub(:remind_user?) { true }
            booking_reminder_enqueuer.enqueue
            resque_job = Resque.peek(:queue_name)
            resque_job.should be_present
            # add assertions about job content/scheduling here
          end
        end
        ...
     end
   end 
```

# sql - 在sql中根据日期过滤数据

> ID：14397569
> 
> 赞同：5
> 
> 时间：2013-01-18T11:03:03.180
> 
> 标签：sql, sql-server, sql-server-2008, sql-date-functions, sqldatetime

我试图执行以下 SQL 查询并根据日期过滤掉数据。

我需要显示一个过滤掉数据的表格，只有那些在提到的 start_date 和 end_date 之间的行

这是我一直在尝试的查询

```
SELECT DISTINCT T1.column1, T1.column2, T2.START_DATE, T2.END_DATE
FROM Table1 T1, Table2 T2
WHERE (T1.column1= T2.column2) AND
(T2.START_DATE >= '15/01/2013 10:58:58' AND 
   T2.END_DATE <= '18/01/2013 10:58:58') ORDER BY T2.START_DATE DESC 
```

我也得到了 2012 年的值的结果。请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T11:28:43.003

由于您没有提到任何错误，如果`START_DATE`和`END_DATE`是`DATETIME`数据类型，您的查询没有任何问题。如果您没有得到正确的记录，请检查数据。

然而你的`date format may trouble you in a different server`. 您可以遵循一些好的做法来避免此类问题。

> - 每当日期用作字符串时，尝试以**ISO 或 ISO8601** 格式使用它（即**'yyyymmdd'**或**'yyyy-mm-ddThh:mi:ss.mmm'**）
> 
> - 还要避免将表与旧的和过时的**WHERE Table1、Table2连接起来。**JOIN 的表现要好得多，整洁。

您可以按如下方式更改您的查询；

```
SELECT DISTINCT T1.column1, T1.column2, T2.START_DATE, T2.END_DATE
FROM Table1 T1 JOIN Table2 T2 ON T1.column1 = T2.column2
WHERE (T2.START_DATE >= '20130115 10:58:58' AND 
       T2.END_DATE <= '20130118 10:58:58') 
ORDER BY T2.START_DATE DESC 
```

# jquery - 带有爆炸的jQuery隐藏导致错误的位置

> ID：14397575
> 
> 赞同：2
> 
> 时间：2013-01-18T11:03:39.457
> 
> 标签：jquery, jquery-ui, animation

我正在研究一个简单的动画，它应该以隐藏的元素和爆炸效果结束，然后文本变得可见。

这是带有代码和动画的[jsfiddle 。](http://jsfiddle.net/Soraph/2TKta/43/)

这里调用了爆炸：

```
jQuery('.bubble1').on('click', function () {
 jQuery(this).hide('explode', { pieces: 16 } , 1000, function() { jQuery('.mytext').show(); } );
}); 
```

问题是爆炸动画只在似乎只是元素的一半或位置改变的东西上执行，结果不是我想要实现的。

关于可能的解决方案的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:20:09.183

问题是元素的初始位置仅由 css 规则给出，如下所示：

```
.bubble1 {
  border: 2px solid #000;
  border-radius: 100px;
  height: 100px;
  width: 100px;
  position: absolute;
  bottom: -104px;
  left: 50%;
  margin-left: -52px;
} 
```

将页面中的元素居中的边距规则使动画行为不正确。

为了在不使用复杂计算或复杂脚本的情况下解决这个问题，我更改了移动的初始位置，而不是使用保证金规则：

```
var bezier_params = {
  start: {
    x: jQuery('.bubble1').offset().left-52,
    y: jQuery('.bubble1').offset().top,
  },
  end: {
    x: jQuery('.bubble1').offset().left-52,
    y: 110,
  }
} 
```

通过从元素总宽度（宽度+边框）的一半位置移除，元素在页面中正确居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:09:59.403

问题来自您在 CSS 中设置`margin`爆炸元素。你应该改变`left`财产。

JSFIDDLE 只是一个示例，您必须找到准确的左值以使元素居中。 [http://jsfiddle.net/2TKta/45/](http://jsfiddle.net/2TKta/45/)

# php - 用随机值替换空格

> ID：14397577
> 
> 赞同：-5
> 
> 时间：2013-01-18T11:03:46.537
> 
> 标签：php, javascript

我有一段..我想用一些随机值替换空格。例如

" $string="Kapa dim nen ma sibilol sebire rola lunie. Ifosamac rapieco him oku, vimeror eralerie puredus elacecos tusorop gobas oliw gepalar."

和 $result="Kapa[rand2]dim[mailingid]nen[rand2]ma[rand1]sibilol[rand1][mailingid]sebire [rand1]rola[rand2]lunie.Ifosamac[mailingid]rapieco[rand1]him[rand1] [mailingid]oku,[rand1]vimeror[mailingid]eralerie[mailingid]puredus[hashx]elacecos[rand1]tusorop[rand1][mailingid]gobas[rand1]oliw[mailingid]gepalar。”

其中随机值为“[mailingid],[rand1],[rand2],[hashx]”

请给我php代码....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:06:41.107

更好地使用 str_replace 函数。

```
str_replace(find,replace,string);

ex:- str_replace(' ','/',$string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:09:19.563

您可以使用以下功能`rand()`：

```
$str = str_replace(' ', rand(0, 10000), $str); 
```

还是您的意思是列表中的随机值？在这种情况下：

```
$list = array("value1", "value2");
$str = str_replace(' ', array_rand($list, 1), $str); 
```

# android - 如何连接来自不同 Android 手机制造商的蓝牙设备？

> ID：14397580
> 
> 赞同：1
> 
> 时间：2013-01-18T11:03:54.180
> 
> 标签：android, bluetooth

当我尝试连接不同制造商的两部手机时，这些设备无法连接。我开发了一个应用程序，它可以很好地连接两部 Xperia 手机和蓝牙（与三星设备相同，它们之间）。但是，当我尝试连接到索尼 Xperia 和三星手机时，请不要连接。

当我制作这个应用程序时，我将 BluetoothChatService 类从 Google BluetoothChat 示例（版本 8）复制到我的项目（我没有修改此文件），但我遇到了上述问题。所以，我下载了第 10 个 api 版本的 Google BluetoothChat 示例，他们第一次连接，但下一次没有。问题是索尼 Xperia 手机不记录来自三星手机的蓝牙设备信息，三星记录此信息。

```
01-18 11:29:07.036: D/BluetoothService(1744): B0:EC:71:E3:FB:41 bond state 11 -> 10 (9)
01-18 11:29:07.066: V/BluetoothEventRedirector(18829): Received android.bluetooth.device.action.BOND_STATE_CHANGED
01-18 11:29:07.066: E/CachedBluetoothDeviceManager(18829): Got bonding state changed for B0:EC:71:E3:FB:41, but we have no record of that device.
01-18 11:29:07.066: W/CachedBluetoothDeviceManager(18829): showUnbondMessage: Not displaying any message for reason:9 
```

下一步是取消配对两部手机，所以我尝试了这些[stackoverflow 示例](https://stackoverflow.com/questions/3462968/how-to-unpair-bluetooth-device-using-android-2-1-sdk)，其中一个解决了这个问题。

现在，我可以很好地从 Sony Xperia U 连接到三星 Galaxy SII，但是当我尝试从三星 SII 连接到 Xperia U 时，由于 IOExpection 中出现“拒绝连接”消息而无法连接。

这是 Google BluetoothChatService 文件示例的 ConnectThread 类的副本。

```
 public void run() {
        Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            Log.i("INFO", e.getMessage());
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() " + mSocketType +
                        " socket during connection failure", e2);
            }
            connectionFailed();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothChatService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice, mSocketType);
    } 
```

更新 1：

我一直在考虑这个问题，我已经评论了 BluetoothChatService 中的一些行，并且三星和 Xperia 设备之间的连接现在是正确的。连接建立了，但是它通过异常代码并完成了连接，所以我注释了异常代码。但是，当我尝试连接 Xperia 和 Galaxy Nexus 时，出现了问题。

ConnectThread 类中的 Run 方法是：

```
 public void run() {
        Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            // Close the socket
 //                try {
 //                    mmSocket.close();
 //                } catch (IOException e2) {
 //                    Log.e(TAG, "unable to close() " + mSocketType +
 //                            " socket during connection failure", e2);
 //                }
 //                connectionFailed();
 //                return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice, mSocketType);
    } 
```

# solr - 在索引到 solr 服务器之前格式化文件

> ID：14397584
> 
> 赞同：0
> 
> 时间：2013-01-18T11:04:18.713
> 
> 标签：solr, tokenize

我正在使用 Solr 服务器为工具提供搜索功能。我想知道 solr 是否提供了一种工具，可以让我在对某些文件进行索引之前对其进行格式化？更具体地说，我有一个包含大量数据的纯文本文件！我想在索引 xml 文件之前将它们转换为 xml 格式。例如

```
 some data! some more data : more values 
```

我想将此示例行转换为类似

```
 <field 1>sample data </field 1>
    <field 2> some more data </field 2>  
    <field 3> more values  </field 3> 
```

在使用 solr 单元对文件进行 iindex 之前，solr 是否为这种类型的转换提供了便利。它是否提供了我可以在我的 java 应用程序中实现的任何类或接口？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:11:56.573

您是将数据推送到 Solr 还是可以通过 Solr 从源中提取数据？

如果您正在推进 Solr，那么您必须使用[Update Request Processor](http://wiki.apache.org/solr/UpdateRequestProcessor)。但是，我不知道任何会将数据拆分为多个字段的方法。你可能需要自己写一个。

如果您使用 DataImportHandler 从源中提取，它具有使用 RegexTransformer 将内容拆分为多个字段的内置[支持](http://wiki.apache.org/solr/DataImportHandler#RegexTransformer)。

请求处理器和 DIH 都支持 JavaScript（可能还有其他 Java 脚本语言）转换器，因此您也可以编写自己的脚本以任何您想要的方式拆分数据。

其中一些是从 Solr 版本 4 开始的。这是一个需要牢记的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:27:47.183

你需要一个自定义[`Index Handler`](http://lucidworks.lucidimagination.com/display/solr/Uploading+Data+with+Index+Handlers)或一个[`SolrRequestHandler`](http://lucene.apache.org/solr/4_0_0/solr-core/index.html)

# vsto - MS Project VSTO：关闭 MS Project 会导致它无限期挂起

> ID：14397586
> 
> 赞同：0
> 
> 时间：2013-01-18T11:04:20.993
> 
> 标签：vsto, ms-office, ms-project

我在 Project 2010 和 2013 中都复制了这个问题。

我使用 Visual Studio 2010 开发了一个 VSTO 插件。在这个插件中，我公开了一个 COMVisible 方法。

我还有一个不同的（非 .NET）应用程序，它会实例化 Project COM 对象，搜索我的插件并调用我标记为 COMVisible 的方法。

这会导致 Project 打开一个“新”项目文件并向其写入内容。

这个非 .NET 应用程序在调用我的插件中的 COM 方法后停止执行（不关闭 MS Project）。

然后我关闭新创建的项目（不是 MS 项目，只是文件）。一切都很好; 但是，当我尝试关闭 MS Project 时，它会无限期地挂起。在任务管理器中，它仍然显示为“正在运行”，单击 MS 项目窗口会弹出“切换到”、“重试”、“取消”对话框，通知我其他应用程序正忙...

令人惊讶的是，如果我选择不关闭新创建的项目文件，而只是关闭 MS Project 窗口，它会正常关闭。

这里可能发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:57:06.650

好的，经过大量调查，我找到了问题的答案。基本上，从我的 VSTO 插件公开的 COM 类需要继承“StandardOleMarshalObject”。

这是因为我的插件中的 COM 方法正在访问辅助线程（调用应用程序的线程）上的项目对象模型。这是一个很大的不。派生自该类的编组所有调用该辅助线程到主 UI 线程，从而解决了问题。

# php - Ajax 错误：200 解析器错误

> ID：14397590
> 
> 赞同：0
> 
> 时间：2013-01-18T11:04:29.400
> 
> 标签：php, ajax, json, validation

我在 php_ajax 文件中使用 jason_encode，但我在控制台中有错误消息，“Ajax 错误：200 解析器错误”，您能查看我的代码吗？我有一个索引文件，它使用 ajax 和 jason 在运行时显示状态消息，这是我的 ajax 文件，如果存在错误消息，它将 true 和 false 发送到我的索引，否则如果每次检查顺利，它会显示 ok 消息。

```
$validateValue=$_REQUEST['fieldValue'];
$validateId=$_REQUEST['fieldId'];

$emailaddress = $validateValue;

$validateError= "email is not correct";
$validateSuccess= "email is correct";

$arrayToJs = array();  // creating array
$arrayToJs[0] = $validateId;  
$arrayToJs[1] = $validateId;

if($numrow > 0)  // where $numrow is getting data from database.

    //if($validateValue !=="raza@gmail.com")  // this check can also be used
        {       // validate??
            for($x=0;$x<1000000;$x++){
                if($x == 990000){
                    $arrayToJs[1] = false;                      
                    echo json_encode($arrayToJs);       // RETURN ARRAY WITH ERROR
                    //return false;
                }
            }
        }
        else
        {
            $arrayToJs[1] = true;           // RETURN TRUE
            echo json_encode($arrayToJs);           // RETURN ARRAY WITH success
    ## Check for the ggg mail       
        }

        if($validateValue == "ggg@gmail.com")       
    //check the second check
        {       // validate??
            for($x=0;$x<1000000;$x++){
                if($x == 990000){
                    $arrayToJs[2] = false;                      
                    echo json_encode($arrayToJs);       // RETURN ARRAY WITH ERROR
                    //return false;
                }
            }
        }
        else
        {
            $arrayToJs[2] = true;           // RETURN TRUE
            echo json_encode($arrayToJs);           // RETURN ARRAY WITH success

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:35:41.810

请试试这个

```
$validateValue=$_REQUEST['fieldValue'];
$validateId=$_REQUEST['fieldId'];

$emailaddress = $validateValue;

$validateError= "deze naam wordt geblokkeerd";
$validateSuccess= "valid name";

    /* RETURN VALUE */
    $arrayToJs = array();
    $arrayToJs[0] = $validateId;

    ## check email Already Exist

        if($numrow > 0 ) // this should return your value from database

        //if($validateValue !=="raza@gmail.com")
            {       // validate??
                for($x=0;$x<50;$x++){
                    if($x == 9){
                        $arrayToJs[1] = false;                      
                        echo json_encode($arrayToJs);       // RETURN ARRAY WITH ERROR
                        return false;
                    }
                }
            }

            ### Second Step
        /// if you will use elseif  instead of sigle if else statement it will work because it get only one message in array in a single time.
        elseif($validateValue == "ggg@gmail.com") 
            {       // validate??
                for($x=0;$x<1000000;$x++){
                    if($x == 990000){
                        $arrayToJs[1] = false;                      
                        echo json_encode($arrayToJs);       // RETURN ARRAY WITH ERROR
                        return false;
                    }
                }
            }
            else
            {
                $arrayToJs[1] = true;           // RETURN TRUE
                echo json_encode($arrayToJs);           // RETURN ARRAY WITH success

            } 
```

# javascript - 我需要什么下划线模板？

> ID：14397594
> 
> 赞同：2
> 
> 时间：2013-01-18T11:04:39.587
> 
> 标签：javascript, templates, backbone.js, underscore.js

我来自一个非常严格的 OOP flash 背景，我真的很想更深入地了解骨干，我的问题是：

如果我有所有视图的类（很像在 Flash 中），对我来说 _.template 功能有什么用途/好处，还是我现在可以忽略它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:38:28.577

标记模板，无论是使用下划线还是任何其他模板框架，都是非常有用的。

您似乎将 View 类和模板视为某种非此即彼的命题。但事实并非如此。他们完全解决了一个不同的问题；它们相互补充，而不是替代。

视图类（`Backbone.View`在您的情况下）范围并封装了与视图相关的逻辑和事件处理。这是一种很好的做法，无论您是否决定使用模板引擎，都应该使用它。

另一方面，模板只是将您的数据转换为 HTML，仅此而已。这是您的视图需要做的事情，在我看来，有几种方法可以实现这一点：

*   通过字符串连接构建 HTML
    *   `"<div>" + this.model.name + "</div>"`...呃）
*   用 jQuery 填充 DOM 节点
    *   `$(".name").text(this.model.name)`荒谬的...
*   使用某种数据绑定
    *   很好，但 Backbone 不支持开箱即用。
    *   但是插件确实存在（[Backbone.ModelBinding](https://github.com/derickbailey/backbone.modelbinding)、[Rivets](http://rivetsjs.com/)、[Stickit](https://github.com/NYTimes/backbone.stickit) ...）
*   使用模板引擎
    *   比数据绑定更轻更简单
    *   将表示与逻辑分开

选择是你的，但我不会没有数据绑定或模板框架。underscore 提供的模板功能强大，但我更喜欢语义化、无逻辑的模板，例如[Handlebars](http://handlebarsjs.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:17:31.980

如果您在视图中将 JSON 对象作为 HTML 输出，那么您可以从中受益。

根据我的经验，如果你打算制作一个不仅仅是基本的应用程序，而且它也将成长，那么模板化是一种很好的做法，可以在以后为你节省一些时间。

您可以在模板文档页面[http://underscorejs.org/#template获取更多信息](http://underscorejs.org/#template)

# three.js - 将自定义事件添加到 Object3D

> ID：14397596
> 
> 赞同：3
> 
> 时间：2013-01-18T11:04:52.857
> 
> 标签：three.js

我正在用 Object3D 节点构建场景图。我想将几个节点视为 Spin 对象，它们从一开始就不是活动的，但是当它们收到特定的“开始”事件时它们变得活动，可能使用计时器来启动它。我需要一些帮助来设置它。我试过下面的代码

```
var spinner_obj = new THREE.Object3D();
spinner_obj.addEventListener('start', function(event) {alert("GOT THE EVENT");}); 
```

但这给了我一个错误“TypeError：spinner_obj.addEventListener 不是函数”

此外，我还需要做什么来触发这个“开始”事件？我是一个 javascript 初学者。我试图关注[https://github.com/mrdoob/eventdispatcher.js](https://github.com/mrdoob/eventdispatcher.js)但我需要更多的指针。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T15:27:06.527

尝试这样做：

```
var spinner_obj = new THREE.Object3D();
THREE.EventDispatcher.call( spinner_obj );
spinner_obj.addEventListener('start', function(event) {alert("GOT THE EVENT");});
spinner_obj.dispatchEvent({type:'start'}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:47:16.737

只要不是从 EventDispatcher 类派生的，您就必须手动将“addEventListener”、“removeEventListener”和“dispatchEvent”函数添加到 Object3D.js 文件中。

注意：您还应该根据您的示例代码在 Object3D.js 的某处触发“开始”事件。

# c# - 在平板设备中使用 wpf 在横向和纵向模式之间切换

> ID：14397597
> 
> 赞同：0
> 
> 时间：2013-01-18T11:04:53.730
> 
> 标签：c#, wpf

我们如何安排 WPF 窗口上的控件，以便在切换视图模式（即横向和纵向模式）时自动对齐控件。

```
<Window x:Class="Custom_Track_Reports.LoginWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="LoginWindow" >
<Viewbox Stretch="Fill">
<Grid Background="#FF58B0DF" Height="401">
        <Rectangle Fill="#FFF0F3F4" Height="173" Margin="45,197,58,0" Stroke="Black" VerticalAlignment="Top" AllowDrop="True" />
        <Image Height="125" Margin="340,10,330,0" VerticalAlignment="Top" Source="Images/logo_lrg.png"/>
        <Label Content="Custom Track Reports" HorizontalAlignment="Left" Margin="287,147,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.607,1.112" Width="268" Height="47" FontFamily="Arial" FontSize="26" Foreground="White"/>
        <TextBox Margin="128,0,0,110" TextWrapping="Wrap" VerticalAlignment="Bottom" Height="25" BorderThickness="1" FontFamily="Arial" FontSize="21" Text="" Name="userTextBox" FontStretch="Expanded" Opacity="1" HorizontalAlignment="Left" Width="546" AcceptsReturn="False" KeyDown="userTextBox_KeyDown" />
        <Button x:Name="enterButton" Content="Enter" HorizontalAlignment="Right" Margin="0,311,166,0" VerticalAlignment="Top" Width="110" Height="26" FontSize="14" Style="{DynamicResource button}" Click="enterButton_Click"/>
        <Label Content="User ID" FontSize="20" FontWeight="Bold" Height="40" HorizontalAlignment="Left" Margin="122,215,0,0" Name="label1" VerticalAlignment="Top" Width="105" />
    </Grid>
</Viewbox> 
```

# ssrs-2008 - 不允许在 ssrs 2008r2 中创建新订阅

> ID：14397598
> 
> 赞同：0
> 
> 时间：2013-01-18T11:04:55.360
> 
> 标签：ssrs-2008

我正在尝试在 SSRS 2008 r2 中添加新订阅，但不允许消息显示

无法创建订阅，因为未存储用于运行报告的凭据，或者如果链接的报告链接不再有效。

请解释我在哪里可以提供凭据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:31:33.460

您需要设置要与数据源一起存储的数据源凭据；订阅是无人值守的报表执行，因此服务器需要知道在这些情况下如何连接到数据库。将报告数据源设置为：

![在此处输入图像描述](../Images/f316e63f0d6f5e1bdbde9e70bac39104.png)

您将能够创建订阅。

# tomcat - 将 Grails 应用程序部署到正在运行的 Tomcat

> ID：14397600
> 
> 赞同：1
> 
> 时间：2013-01-18T11:05:05.523
> 
> 标签：tomcat, grails

我们的 Tomcat 实例运行许多不同的 webapp：主要是 Struts/Struts2，但也有一些奇怪的 Grails 应用。

如果我需要更新 Struts 应用程序，通常我会从我的开发机器复制树，然后当 web.xml 更新时应用程序会重新启动。

对于 Grails，问题似乎要多得多。复制树并让应用程序重新启动几乎从来没有用过……明显的缺失类、数据库连接错误等。我发现唯一有效的方法是完全停止 tomcat、更新应用程序并重新启动 tomcat。明显丢失的类不再丢失，数据库连接正常，无需更改任何代码。但是，这显然也会降低所有其他应用程序。

有没有其他人看到过类似的问题？有没有我错过的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:29:24.183

[不鼓励](http://grails.org/doc/latest/guide/deployment.html)将树复制到应用程序服务器。一种更好的方法是将 Grails 应用程序打包为 WAR：

```
# grails war 
```

或者，如果您[配置了 maven](http://grails.org/Maven+Integration)：

```
# mvn clean package 
```

这确保设置了“生产”环境。

然后，如果禁用或无法正常工作，您可以使用[Tomcat 管理器](http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html)[部署 WAR 文件](http://tomcat.apache.org/tomcat-6.0-doc/deployer-howto.html#Deploying_on_a_running_Tomcat_server)并重新启动 webapp 。[`autoDeploy`](http://tomcat.apache.org/tomcat-6.0-doc/config/host.html#Automatic%20Application%20Deployment)

# c# - 如何强制派生类覆盖基类的枚举？

> ID：14397606
> 
> 赞同：4
> 
> 时间：2013-01-18T11:05:17.280
> 
> 标签：c#, oop, inheritance, enums, overriding

假设有类 NaturalFood 和两个类从这个类继承；类水果和类蔬菜

```
 abstract class NaturalFood
{
    enum AllList
    {
        //empty list as a placeholder
    }

   protected string Name;
}

class Fruits : NaturalFood 
{
    enum AllList
    {
        Apple = 1,
        Banana = 2
    }
}

class Vegetables : NaturalFood
{
    enum AllList
    {
        Carrot = 1,
        Potatoes = 2
    }

} 
```

我想强制从类 NaturalFood 派生的任何类都必须声明和/或覆盖 AllList 枚举。实际上，枚举将包含特定于派生类的列表。我该怎么做呢 ？

**编辑**：我的基本要求是从基类派生的每个类都必须有自己的特定于它的“某物”列表。枚举只是创建列表的一种方式。我希望你能从我的例子中得到要点。我想利用 Enumeration 提供的功能，即。智能感知，toString() 等。

**Edit2：**我的例子还不够实用吗？如果我将整个枚举放在基类 (NaturalFood) 中，我如何知道哪些枚举值特定于哪个派生类？让我们说每个派生类都在“发布一些东西”，它必须以枚举常量的形式提供，我想对每个派生类强制执行这个约束。**所以换句话说，我的问题是如何像这里描述的场景那样对派生类实施约束？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:11:37.073

这是不可能的，因为枚举是类型，而不是类成员......并且它们在类中声明的事实并不使它们成为该类的成员，它们只是嵌套。每个类都可以并且必须定义它自己的`private enum AllList`类型......所以你的实际代码是唯一可能的方法。如果您想获得这样的东西并且您只有很少的值要处理，请坚持使用属性覆盖：

```
class A
{
    public virtual String Value
    {
        get
        {
            return "A";
        }
    }
}

class B : A
{
    public override String Value
    {
        get
        {
            return "B";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:02:26.933

实际上，`override`这些值没有任何意义。实际上，override 的优点是可以在不知道派生类本身的情况下调用派生类的方法。

例如 ：

```
static void Main()
{
    NaturalFood food = GetSomeFood(); // At this point, we don't know the actual type
    food.SomeMethodInBaseClass(); // ok

}

static NaturalFood GetSomeFood()
{
     if(somecondition) {
         return new Fruits();
     } 
     else{
         return new Vegetables();
     }
}

public abstract class NaturalFood
{
     public abstract void SomeMethodInBaseClass();
}

public class Fruits : NaturalFood 
{       
   public override void SomeMethodInBaseClass(){
        Console.WriteLine("I'm a fruit");
    }
}

public class Vegetables : NaturalFood
{    
    public override void SomeMethodInBaseClass(){
         Console.WriteLine("I'm a vegetable");
    }   
} 
```

无法想象你想做什么。在 main 方法中，尝试调用 AllList ：

```
static void Main()
{
    NaturalFood food = GetSomeFood(); // At this point, we don't know the actual type
    food.SomeMethodInBaseClass(); // ok
    food.AllList.XXXX; // What? it won't compile
} 
```

这不会编译。编译器无法知道实际派生类来推断可用的枚举值。

但是，如果您从基本类型中删除枚举，这将起作用：

```
static void Main()
{
    NaturalFood food = GetSomeFood(); // At this point, we don't know the actual type
    food.SomeMethodInBaseClass(); // ok

    Fruits f = new Fruits();
    Console.WriteLine(    f.AllList.Apple); // Ok

    Vegetable v = new Vegetable ();
    Console.WriteLine(    v.AllList.Potatoe); // Ok

} 
```

但正如您所看到的，您必须明确知道实际类型，从而使多态变得无用。

**[编辑]**很难回答您的第二次编辑。实际上有很多方法可以验证这种约束。如果没有更多的上下文，可能很难回答。我认为最简单的方法是向每个派生类添加一个覆盖属性，该属性描述接受哪种枚举。

```
public enum NaturalFoodType {
    Unknown = 0,
    Apple= 1,
    Banana = 2,
    Potatoe = 3,
    Cucumber = 4
}
public abstract class NaturalFood
{
     public abstract void SomeMethodInBaseClass();
     public abstract IEnumerable<NaturalFoodType> AcceptedFoodType { get; }

     public bool IsValid(NaturalFoodType type){
          return AcceptedFootType.Contains(type);
     }
}

public class Fruits : NaturalFood 
{       
    public override void SomeMethodInBaseClass(){
        Console.WriteLine("I'm a fruit");
    }
    public override NaturalFoodType {
        get {
             yield return NaturalFoodType.Apple;
             yield return NaturalFoodType.Banana;
        }
    }
}

public class Vegetables : NaturalFood
{    
    public override void SomeMethodInBaseClass(){
         Console.WriteLine("I'm a vegetable");
    } 
    public override NaturalFoodType {
        get {
             yield return NaturalFoodType.Potatoe;
             yield return NaturalFoodType.Cucumber;
        }
    }  
} 
```

但老实说，它开始添加大量管道代码，变得非常难以阅读。您应该在更高的范围内考虑问题以找到可接受的解决方案。

# c# - WPF MVVM 设计 ViewModel

> ID：14397609
> 
> 赞同：1
> 
> 时间：2013-01-18T11:05:21.087
> 
> 标签：c#, .net, wpf, mvvm, viewmodel

我有以下模型：

```
public class Person
{
    public string LastName{get;set;}
    public City City {get;set;}
}

public class City
{
    public string Name {get;set;}
} 
```

我有两个观点：

*   一种用于在 DataGrid(AllPersonsViewModel) 中显示所有姓氏和城市名称的人员
*   一种用于添加新人员 (PersonViewModel)

我的 AllPersonsViewModel：

```
public class AllPersonViewModel : ViewModel
{
    public ObservableCollection<PersonViewModel> PersonViewModels {get;set;}
} 
```

我从以下 PersonViewModel 开始：

```
public class PersonViewModel : ViewModel
{
    private Person _person;

    public string Name
    {
        get { return _person.Name;}
        set { _person.Name = value; RaisePropertyChange("Name");}
    }

    public string CityName
    {
        get { return _person.City.Name;}
    }
} 
```

然后我添加了用于添加新人员的属性。在视图中，我需要一个用于 PersonName 的文本框和一个用于选择城市的组合框：

```
public class PersonViewModel : ViewModel
{
    private Person _person;

    public string Name
    {
        get { return _person.Name;}
        set { _person.Name = value; RaisePropertyChange("Name");}
    }

    public string CityName
    {
        get { return _person.City.Name;}        
    }

    public City SelectedCity 
    { 
        get { return _person.City;}
        set { _person.City = value; RaisePropertyChange("SelectedCity");}
    }

    public ObservableCollection<City> Cities {get;set;} 
} 
```

这是正确的方法吗？这对我来说似乎有点多余。在 AllPersonsView 的网格中，我还可以直接绑定到“SelectedCity.Name”而不是额外的属性 CityName。网格也是只读的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:41:00.823

你有多个问题；

1 - 您不需要在`AllPersonViewModel`. 只需声明一个 ObservableCollection `Person`。

2 - 不添加`CityName`属性；正如您所说，不需要。

3-不要添加`Name`属性。将文本框绑定到`Person`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:12:53.040

您的问题真的归结为“可以将我的模型直接暴露在视图中吗？” 一些纯粹主义者会说不，而另一些人会说拥有一个包装模型而不添加任何新功能的视图模型是多余的。

在我看来，这取决于手头的任务，但是当您需要添加不属于模型的其他状态时，“跳过”视图模型可能会回来并咬住您。如果有疑问使用视图模型，但例如在列表中公开简单模型对象时，您通常不需要视图模型提供的额外层。

在您的情况下，您选择了“纯粹主义”解决方案，并且由于您的模型对象不支持`INotifyPropertyChanged`，如果模型属性被多个来源更改，您将无法摆脱视图模型。但是，`CityName`您可以绑定到`SelectedCity.Name`. WPF 支持数据绑定表达式中的属性导航。

要更深入地了解这个主题，你可以谷歌[mvvm expose model](https://www.google.com/search?q=mvvm%20expose%20model)。

# python - windows wget & 被切断

> ID：14397613
> 
> 赞同：1
> 
> 时间：2013-01-18T11:05:28.350
> 
> 标签：python, windows, command-line, command, wget

系统信息：Windows 7、GNU Wget 1.11.4、Python 2.6

问题：

我正在运行一个触发 wget 快捷方式的 python 脚本，问题是 wget（即使纯粹在 exe 命令行中运行）会切断“&”。例如，当我运行下面的代码时，这就是我得到的：

> C:\Program Files\GnuWin32\bin>wget.exe [http://www.imdb.com/search/title?genres=action&sort=alpha,asc&start=51&title_type=feature](http://www.imdb.com/search/title?genres=action&sort=alpha,asc&start=51&title_type=feature)
> 
> SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc syswgetrc = C:\Program Files\GnuWin32/etc/wgetrc
> 
> --2013-01-18 12:48:43-- [http://www.imdb.com/search/title?genres=action](http://www.imdb.com/search/title?genres=action)正在解析 www.imdb.com... 72.21.215.52 连接到 www.imdb.com |72.21.215.52|:80... 失败：连接被拒绝。
> 
> =alpha,asc系统找不到指定的文件。
> 
> 系统找不到文件 51\. 'title_type' 不是内部或外部命令、可运行程序或批处理文件。

如您所见，wget 将 '&' 之前的所有文本都视为有问题的 URL，而 windows 将后半部分作为新命令。

必须有某种方法允许 wget 将整个字符串捕获为 URL。

提前致谢。

编辑：当我在命令行中用括号调用命令时，它工作得很好，但是，当我通过 python 运行脚本时：

```
subprocess.Popen(['start /B wget.lnk --directory-prefix=' + output_folder + ' --output-document=' + output_folder + 'this.html "http://www.imdb.com/search/title?genres=action&sort=alpha,asc&start=51&title_type=feature"'], shell=True) 
```

我收到以下错误：

> SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc
> 
> syswgetrc = C:\Program Files (x86)\GnuWin32/etc/wgetrc
> 
> “http://www.imdb.com/search/title?genres=action&sort=alpha,asc&start=51&title_type=feature”：不支持的方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:08:47.480

切断 URL 的不是 Wget，而是命令解释器，它用于`&`分隔两个命令，类似于`;`. 这由`=alpha,ascThe system cannot find the file specified.`下一行的错误指示。

为防止这种情况发生，请引用整个 URL：

```
wget.exe "http://www.imdb.com/search/title?genres=action&sort=alpha,asc&start=51&title_type=feature" 
```

# c# - 使用 SQL Server 的本地数据库

> ID：14397620
> 
> 赞同：2
> 
> 时间：2013-01-18T11:05:43.747
> 
> 标签：c#, sql-server, database

这是我的情况：我想使用 SQL 服务器在 C# 中制作一个小型应用程序，但我不希望它成为基于服务器的应用程序......

我只是想要一个数据库，我可以将它复制并粘贴到我的应用程序文件夹中并在那里引用它，然后在任何其他没有安装 SQL Server 的 PC 上使用该应用程序......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:06:48.503

SQL Server 数据库无法做到这一点。为此，您可以使用~~[Microsoft Access](http://office.microsoft.com/en-us/access/)数据库或~~ [SQLite ，也可以使用](http://www.sqlite.org/)[SQL Server CE](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx)。

请参阅：[如何：使用应用程序部署 SQL Server Compact 4.0 数据库](http://msdn.microsoft.com/en-us/library/aa983326%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:07:33.533

您可以使用嵌入式解决方案，例如`SQL SERVER CE`. 看看[这个](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:10:05.413

你可以使用[SQLite](http://www.sqlite.org/)或[Microsoft LocalDb](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)，它们都是基于文件的，你可以复制/粘贴，你就完成了。

对于与 SQL Server 的兼容性，Microsoft LocalDb 是您的赢家，因为如果您愿意，您可以将连接字符串切换到具有相同架构的成熟 SQL Server 并且它可以工作。

如果你不需要，那么 SQLite 是一个轻量级且足够的选择，它有一个免费的 Ado.net 提供程序，你可以将它与 EntityFramework 一起使用，绝对没问题，只是不要指望它可以工作模型优先或代码优先。您必须先使用数据库。

# php - 从网络摄像头录制

> ID：14397624
> 
> 赞同：-1
> 
> 时间：2013-01-18T11:05:50.410
> 
> 标签：php, webcam, flash

我想为我的网站启用网络摄像头，以便我可以录制视频并发布到我的网站。请在这方面帮助我，任何关于启用网络摄像头的免费脚本的想法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:13:47.520

你需要一些东西来从你的网络摄像头中获取图像流，然后通过一些与互联网兼容的格式来提供它。

安装网络摄像头的驱动程序后。您可以使用[http://www.webcamxp.com](http://www.webcamxp.com)作为免费供私人使用的网站，通过内置的网络服务器进行捕获和发布。

或者您可以使用 Flash 记录流并通过 Flash 媒体服务器分发它，然后将其流回 Flash 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:11:56.997

你看过像[ustream.tv 这样的服务吗？](http://www.ustream.tv/new) 流媒体完全由他们负责，它可以免费使用 - 绝对值得一试，以获得免费且简单的解决方案。

# java - Android 模拟器显示离线

> ID：14397626
> 
> 赞同：0
> 
> 时间：2013-01-18T11:05:55.680
> 
> 标签：java, android, android-emulator

在 Java 应用程序中，我使用 emulator '-avd "+emulatorName+" -scale 96dpi -dpi-device 160' 命令打开模拟器。模拟器正在打开，但它在 DDMS 中始终处于离线状态，因此我无法在此运行 apk。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T13:43:18.813

“擦除用户数据”选项终于解决了我的问题。每次启动模拟器时只需擦除用户数据（我不知道如何从命令行执行此操作）。这总是对我有用！我使用 windows 8 x64 ，日食。

# gwt - 如何将 GWT StackLayoutPanel 高度设置为 100%

> ID：14397641
> 
> 赞同：0
> 
> 时间：2013-01-18T11:06:52.360
> 
> 标签：gwt

我在我的应用程序中使用了一个简单的 stacklayoutPanel，但我无法将其高度设置为 100%，我只能修复我不想要的高度

有什么办法可以让它的高度达到“300px”的 100%，就像我对宽度所做的那样

```
<ui:style>
    .important {
    font-weight: bold;
    }
</ui:style>

<g:HTMLPanel ui:field="stack">
<g:StackLayoutPanel unit="PX" width="100%" height="300px" >

<g:stack>
    <g:header size="30">IntraVUE</g:header>
    <g:HTMLPanel ui:field="intraVues"></g:HTMLPanel>
</g:stack> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:02:01.480

如果您使用任何布局面板，如果您从**RootLayouPanel**开始以百分比设置宽度和高度，则应仅在整个层次结构中使用布局面板。如果您将高度设置为 100%，那么您的 stacklayopanel 高度将自动为 100%。有关类似问题，请参阅以下链接

[GWT Re-sizing components on browser window resize](https://stackoverflow.com/questions/8771922/gwt-re-sizing-components-on-browser-window-resize)

[GWT：DataGrid - 设置高度 100% 未正确呈现](https://stackoverflow.com/questions/11845196/gwt-datagrid-set-height-100-not-rendering-properly)

# json - 将从java servlet接收的json转换为PHP中的数组时出错

> ID：14397647
> 
> 赞同：0
> 
> 时间：2013-01-18T11:07:23.150
> 
> 标签：json, php-5.2

在我们的 Web 应用程序中，有一个 tomcat 5.5 服务器，它运行一个 servlet，该 servlet 创建一个文档，PDF 或 Word，然后将其以 json 格式发送回，其结构如下：

```
{
  "status": "OK", // or "ERROR" if an error occurred
  "format": "application/pdf", // or "application/msword" if a Word document was generated
  "document": [...] // document content
} 
```

通过`document`首先将文档导出为 a`byte[]`然后调用`toString()`它来创建密钥。

整个 json 在 servlet 中通过使用[这个库](http://json.org/java/)进行管理，在[这里](http://agews.com/example.json)您可以看到一个响应示例。

但是，当调用 tomcat 服务器的 PHP 脚本接收到 json 字符串并运行它时`json_decode()`，它会返回`NULL`，好像数据不是有效的 json。

我在我使用的这个算法中犯了任何明显的错误吗？或者，更一般地说，**如何使用 JSON 正确传输二进制数据？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:13:52.210

回答自己，因为我找到了解决这个问题的方法，即使我不确定是什么原因造成的。

无论如何，我发现如果我在将二进制数据作为 json 发送之前对其进行**base64 编码**，则 json 对象会被 PHP 脚本正确解析，并且成功地进行**base64 解码**会重新创建由 servlet 创建的原始文档。

# qt - QSplitter 有一个固定大小的小部件和一个可变大小的小部件？

> ID：14397653
> 
> 赞同：11
> 
> 时间：2013-01-18T11:08:12.040
> 
> 标签：qt, qsplitter

是否有可能有一个`QSplitter`具有固定大小的小部件和另一个具有可变大小的小部件？

此代码设置正确，但是当调整窗口大小时，拆分器与初始小部件大小成比例变化：

```
vSplitter = new QSplitter(Qt::Vertical, this);
vSplitter->addWidget(widget1);
vSplitter->addWidget(widget2);
QList<int> heights;
heights.push_back(550);
heights.push_back(1000);
vSplitter->setSizes(heights);

setCentralWidget(vSplitter); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T11:12:49.760

试试这个：

[`QSplitter::setStretchFactor ( int index, int stretch )`](http://doc.qt.io/qt-4.8/qsplitter.html#setStretchFactor)

只需将要保持固定大小的部分的拉伸因子设置为 0，然后在另一个小部件上将其设置为 1。

调整整个窗口的大小时，拉伸因子为 0 的小部件不会调整大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T00:39:22.327

我正在尝试做类似的事情。我有一个固定小部件（顶部）和一个非固定小部件（底部）。我希望用户能够正常使用拆分器句柄，但我不希望调整窗口大小来为固定小部件添加空间。在两个小部件上使用 setSizePolicy 对我不起作用，在一个或两个小部件上使用 setStretchFactor 也没有。

我最终将 QSplitter 子类化，以便我可以实现一个 resizeEvent ，它会在拆分器调整大小后移动拆分器。此代码假定： 只有两个小部件。顶部 [0] 是可调整大小的，底部 [1] 不应该是。

这是我写的 resizeEvent：

```
MySplitter::resizeEvent(QResizeEvent *event) {
    /* The first resizeEvent is -1 for height and width, because it was
       invisible before. */
    if (event->oldSize().height() != -1) {
        int diff;
        QList<int> previousSizes = sizes();
        QSplitter::resizeEvent(event);
        QList<int> newSizes = sizes();
        /* The bottom widget is the fixed one, so find out if that is to
           grow or shrink. */
        diff = newSizes[1] - previousSizes[1];
        if (diff > 0) {
            /* Keep the bottom from growing by giving the size to the top. */
            newSizes[0] += diff;
            newSizes[1] -= diff;
        }
        else {
            /* Steal size from the top to keep it from shrinking. */
            newSizes[0] -= diff;
            newSizes[1] += diff;
        }
        setSizes(newSizes);
    }
    else
        QSplitter::resizeEvent(event);
} 
```

# .net - 两次抛出的相同异常使 WPF 崩溃

> ID：14397663
> 
> 赞同：3
> 
> 时间：2013-01-18T11:08:47.830
> 
> 标签：.net, wpf, exception-handling, system.reactive

我们似乎在 WPF 中有一些“有趣”的行为，其中包含未处理的异常。

简而言之，在短时间内在调度程序线程上抛出两次相同的异常将绕过调度程序未处理的异常处理程序并关闭应用程序。

## 重现步骤

*   创建一个新的 WPF 应用程序
*   创建一个 DispatcherUnhandledException 处理程序，将 e.Handled 设置为 true 并打开一个显示异常的消息框。
*   创建一个 AppDomain.CurrentDomain.UnhandledException 处理程序，也从此处显示一个消息框（请注意，您无法在此处处理异常，因此此处出现的任何异常都意味着应用程序即将关闭）。
*   现在添加一个按钮，并在点击处理程序中添加以下内容：

    ```
    SynchronizationContext.Current.Post(s => { throw new Exception(); }, null);
    SynchronizationContext.Current.Post(s => { throw new Exception(); }, null); 
    ```

您会注意到 DispatcherUnhandledException 处理程序被引发了两次，处理了两个异常，一切都很好。

但是，将上面的代码更改为以下内容：

```
 var ex = new Exception();
    SynchronizationContext.Current.Post(s => { throw ex; }, null);
    SynchronizationContext.Current.Post(s => { throw ex; }, null); 
```

您会发现 AppDomain.CurrentDomain.UnhandledException 处理程序被引发，应用程序将在典型的窗口“您要调试”对话框中崩溃。

## 额外信息

这个例子似乎是人为的，只是为了简化问题。但是，如果假设您有两个 RX 订阅者到一个错误的流，则可能会发生这种情况。在这种情况下，两个订阅者都会引发相同的异常，从而导致与上述相同的行为。例如，按钮单击处理程序中的以下 RX 代码也将重现该问题（也是人为的，但您可以进入等效情况）：

```
 var o = Observable.Start(() => { throw new Exception(); }).Publish();
        o.ObserveOnDispatcher().Subscribe(_ => { });
        o.ObserveOnDispatcher().Subscribe(_ => { });
        o.Connect(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:02:09.200

这似乎是 Dispatcher 的行为，它会检查它之前是否“看到”异常（通过在异常的数据中添加标签）并且只有在没有的情况下才处理它：

```
 private bool ExceptionFilter(Exception e)
    {
        // see whether this dispatcher has already seen the exception.
        // This can happen when the dispatcher is re-entered via
        // PushFrame (or similar).
        if (!e.Data.Contains(ExceptionDataKey))
        {
            // first time we've seen this exception - add data to the exception
            e.Data.Add(ExceptionDataKey, null);
        }
        else
        {
            // we've seen this exception before - don't catch it
            return false;
        }
        .... 
```

[http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/wpf/src/Base/System/Windows/Threading/Dispatcher@cs/1407647/调度员@cs](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/wpf/src/Base/System/Windows/Threading/Dispatcher@cs/1407647/Dispatcher@cs)

这意味着我们很可能必须捕获并重新包装异常（即创建新的异常对象，这样调度程序就不会认为它们是相同的），这样它们才不会导致应用程序崩溃。

# oracle11g - ORA-39122: 非特权用户不能执行 REMAP_SCHEMA 重新映射

> ID：14397668
> 
> 赞同：8
> 
> 时间：2013-01-18T11:09:24.290
> 
> 标签：oracle11g, datapump, impdp

当我尝试在中运行`impdp`命令时`sqlplus`，出现以下错误。

```
ORA-31631: privileges are required

ORA-39122: Unprivileged users may not perform REMAP_SCHEMA remappings. 
```

我已授予`IMPORT FULL DATABASE`要导入的架构特权。但我正在克服错误。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-18T11:15:55.490

您很可能同意：

```
grant import full database to YOURUSER; 
```

而是授予：

```
grant imp_full_database to YOURUSER; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T07:13:24.100

```
grant imp_full_database to YOURUSER; 
```

将解决问题，您需要从特权 DBA 帐户执行此操作，否则您将收到以下错误

```
ORA-01919: role 'IMP_FULL_DATABASE' does not exist 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T06:42:03.447

您可以使用以下代码：

```
grant datapump_imp_full_database to USER; 
```

# jquery - Flexslider 项目宽度/高度

> ID：14397669
> 
> 赞同：1
> 
> 时间：2013-01-18T11:09:24.023
> 
> 标签：jquery, flexslider, woothemes

我希望通过此实现的是滑块为每张幻灯片移动正确的距离，其中每张幻灯片的大小可能不同。那么有没有一种方法可以在用户每次点击移动滑块时评估下一张/上一张幻灯片的宽度/高度 - 在这种情况下是向上或向下。

# java - 错误填充异常：调用 dofinal 时填充块损坏

> ID：14397672
> 
> 赞同：1
> 
> 时间：2013-01-18T11:09:33.073
> 
> 标签：java, encryption-symmetric

我正在研究加密和解密。我对密码学很陌生，在使用充气城堡时我面临垫块损坏异常

这是我的加密/解密代码。

私有 AESFastEngine 引擎；

```
private BufferedBlockCipher cipher;

private final KeyParameter key=setEncryptionKey("testinggtestingg");

public  KeyParameter setEncryptionKey(String keyText) {
    // adding in spaces to force a proper key
    keyText += "                ";

    // cutting off at 128 bits (16 characters)
    keyText = keyText.substring(0, 16);

    byte[] keyBytes = keyText.getBytes();
    //key = new KeyParameter(keyBytes);
    engine = new AESFastEngine();
    cipher = new PaddedBufferedBlockCipher(engine);
    return new KeyParameter(keyBytes);

}

public String encryptString(String plainText) {

    try {
        byte[] plainArray = plainText.getBytes();
        cipher.init(true, key);
        byte[] cipherBytes = new byte[cipher
                .getOutputSize(plainArray.length)];
        int cipherLength = cipher.processBytes(plainArray, 0,
                plainArray.length, cipherBytes, 0);
        cipher.doFinal(cipherBytes, cipherLength);

        return (new String(cipherBytes));
    } catch (DataLengthException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (InvalidCipherTextException e) {
        e.printStackTrace();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    // else
    return null;
}

public String decryptString(String encryptedText) {
    try {
        byte[] cipherBytes = encryptedText.getBytes();
        cipher.init(false, key);
                byte[] decryptedBytes = new byte[cipher
                .getOutputSize(cipherBytes.length)];
        int decryptedLength = cipher.processBytes(cipherBytes, 0,
                cipherBytes.length, decryptedBytes, 0);
        cipher.doFinal(decryptedBytes,decryptedLength);
        String decryptedString = new String(decryptedBytes);

        // crop accordingly
        int index = decryptedString.indexOf("\u0000");
        if (index >= 0) {
            decryptedString = decryptedString.substring(0, index);
        }
        return decryptedString;
    } catch (DataLengthException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (InvalidCipherTextException e) {
        e.printStackTrace();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    // else
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:47:00.347

您所需要的只是精确的字符集。干得好 ：

```
import org.bouncycastle.crypto.BufferedBlockCipher;
import org.bouncycastle.crypto.DataLengthException;
import org.bouncycastle.crypto.InvalidCipherTextException;
import org.bouncycastle.crypto.engines.AESFastEngine;
import org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher;
import org.bouncycastle.crypto.params.KeyParameter;

public class Main
{
    private BufferedBlockCipher cipher;
    private final KeyParameter key = setEncryptionKey("testinggtestingg");
    private static final String CHARSET = "ISO-8859-1";

    public static void main(String[] argv)
    {
        Main main = new Main();

        String plain = "trallalla";
        System.out.println("initial : " + plain);

        String encrypted = main.encryptString(plain);
        System.out.println("after encryption : " + encrypted);

        String decrypted = main.decryptString(encrypted);
        System.out.println("after decryption : " + decrypted);
    }

    public KeyParameter setEncryptionKey(String keyText)
    {
        // adding in spaces to force a proper key
        keyText += "                ";

        // cutting off at 128 bits (16 characters)
        keyText = keyText.substring(0, 16);

        byte[] keyBytes = keyText.getBytes();
        // key = new KeyParameter(keyBytes);
        AESFastEngine engine = new AESFastEngine();
        cipher = new PaddedBufferedBlockCipher(engine);
        return new KeyParameter(keyBytes);

    }

    public String encryptString(String plainText)
    {
        try
        {
            byte[] plainArray = plainText.getBytes();
            cipher.init(true, key);
            byte[] cipherBytes = new byte[cipher.getOutputSize(plainArray.length)];
            int cipherLength = cipher.processBytes(plainArray, 0, plainArray.length, cipherBytes, 0);
            cipher.doFinal(cipherBytes, cipherLength);

            return (new String(cipherBytes, CHARSET));
        }
        catch (DataLengthException e)
        {
            e.printStackTrace();
        }
        catch (IllegalArgumentException e)
        {
            e.printStackTrace();
        }
        catch (IllegalStateException e)
        {
            e.printStackTrace();
        }
        catch (InvalidCipherTextException e)
        {
            e.printStackTrace();
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
        // else
        return null;
    }

    public String decryptString(String encryptedText)
    {
        try
        {
            byte[] cipherBytes = encryptedText.getBytes(CHARSET);
            cipher.init(false, key);
            byte[] decryptedBytes = new byte[cipher.getOutputSize(cipherBytes.length)];
            int decryptedLength = cipher.processBytes(cipherBytes, 0, cipherBytes.length, decryptedBytes, 0);
            cipher.doFinal(decryptedBytes, decryptedLength);
            String decryptedString = new String(decryptedBytes);

            // crop accordingly
            int index = decryptedString.indexOf("\u0000");
            if (index >= 0)
            {
                decryptedString = decryptedString.substring(0, index);
            }
            return decryptedString;
        }
        catch (DataLengthException e)
        {
            e.printStackTrace();
        }
        catch (IllegalArgumentException e)
        {
            e.printStackTrace();
        }
        catch (IllegalStateException e)
        {
            e.printStackTrace();
        }
        catch (InvalidCipherTextException e)
        {
            e.printStackTrace();
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
        // else
        return null;
    }
} 
```

但是你为什么要使用这个外部库呢？这是我使用的代码，不需要任何外部库：

```
import java.io.UnsupportedEncodingException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;

import javax.crypto.*;
import javax.crypto.spec.*;

public class Encryption 
{
    private static final String ALGORITHME = "Blowfish";
    private static final String TRANSFORMATION = "Blowfish/ECB/PKCS5Padding";
    private static final String SECRET = "kjkdfjslm";
    private static final String CHARSET = "ISO-8859-1";

    public static void main(String[] argv) throws InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException, UnsupportedEncodingException, IllegalBlockSizeException, BadPaddingException
    {
        Encryption main = new Encryption();

        String plain = "trallalla";
        System.out.println("initial : " + plain);

        String encrypted = main.encrypt(plain);
        System.out.println("after encryption : " + encrypted);

        String decrypted = main.decrypt(encrypted);
        System.out.println("after decryption : " + decrypted);
    }

    public String encrypt(String plaintext) 
    throws NoSuchAlgorithmException, 
    NoSuchPaddingException, 
    InvalidKeyException, 
    UnsupportedEncodingException, 
    IllegalBlockSizeException, 
    BadPaddingException
    {

            Cipher cipher = Cipher.getInstance(TRANSFORMATION);
            cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(SECRET.getBytes(CHARSET), ALGORITHME));
            return new String(cipher.doFinal(plaintext.getBytes()), CHARSET);    
    }

    public String decrypt(String ciphertext) 
    throws NoSuchAlgorithmException, 
    NoSuchPaddingException, 
    InvalidKeyException, 
    UnsupportedEncodingException, 
    IllegalBlockSizeException, 
    BadPaddingException 
    {
      Cipher cipher = Cipher.getInstance(TRANSFORMATION);
      cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(SECRET.getBytes(), ALGORITHME));
      return new String(cipher.doFinal(ciphertext.getBytes(CHARSET)), CHARSET);
    }
} 
```

# java - Java：对队列进行排序

> ID：14397674
> 
> 赞同：3
> 
> 时间：2013-01-18T11:09:40.183
> 
> 标签：java, collections, queue

我正在为队列类型制作一个包装器，但是每次添加元素时，我都想对里面的所有内容进行排序。大多数情况下它将是**Integer**。我对集合框架不太熟悉，有什么简单的解决方案吗？

```
public class Round<Type> {

    private Queue<Type> qe;

    public Round(){
        this.qe = new LinkedList<Type>();
    }

    public void push(Type p){
        this.qe.offer(p);
        //Collections.sort(this.qe); Here I want to sort this
    }

    public Type pop(){
        return this.qe.poll();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T11:11:31.723

你确定那是你想要的吗？

每次添加元素时对所有内容进行排序似乎并不明智。

也许您实际上想要一个[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)？

如果每次添加元素时，都重新排序整个事物，那么您必须非常小心地执行实现，以免导致`O(n.log(n))`插入时变得复杂......这是非常非常糟糕的。

根据用于支持队列的实际数据结构，您可以做得比这更好，但它依赖于底层实现，我不建议这样做。

优先级队列允许及时排队和出队`O(log(n))`，这对于您必须通过随机插入保持顺序的结构非常有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-18T11:19:19.120

您应该实现自己的 Comparator 接口并使用 PriorityQueue。

每次添加元素时，队列都会保持排序。

就像是 ：

```
private Queue<Type> qe = new PriorityQueue<Type>(20, new MyComparator<Type>()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T11:16:57.737

队列不应该被排序。我建议您宁愿使用 LinkedList 或 ArrayList。然后，在排序之后，您可以通过从前面出队并在后面排队来模拟类似队列的行为。

或者，您可以使用组合并创建一个 SortableQueue，在其中使用 List 作为基础结构，然后简单地添加排序行为。

但是，您似乎更想使用 PriorityQueue。优先级队列根据某种顺序对其内容进行排序，并将队列保持在该顺序中。它也比使用列表和每次排序都快得多，因为它使用堆作为支持数据结构。

就像是：

```
PriorityQueue<Integer> q = new PriorityQueue<Integer>();
q.add(6);
q.add(2);
q.add(9); 
```

对上述内容进行出队将导致 2 6 9。我认为这就是您想要的。您还可以添加自己的比较器以特定方式对对象进行排序。

# php - 如何使用纯 HTTP 身份验证和 PHP 在 Apache 下获取经过身份验证的用户名？

> ID：14397676
> 
> 赞同：0
> 
> 时间：2013-01-18T11:09:48.390
> 
> 标签：php, apache, authentication

如何在 PHP 中获取经过 HTTP 认证的用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:20:06.733

这是您正在寻找的答案：

```
$username = $_SERVER['PHP_AUTH_USER'];
$password = $_SERVER['PHP_AUTH_PW']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:11:26.543

`$_SERVER['REMOTE_USER']`如果 PHP 作为 Apache 模块运行，并且其他任何东西都非常棘手

顺便说一句，`phpinfo()`经常帮助解决这些问题

# android - 如何在android中更改具有相同宽度的EditTexts

> ID：14397677
> 
> 赞同：0
> 
> 时间：2013-01-18T11:09:50.577
> 
> 标签：android, android-layout, android-edittext

在我的布局中有很多 EditText，我想为所有人设置相同的宽度。我尝试使用下面的代码和显示不同宽度的 EditTexts。我怎么解决这个问题。我的布局如下

提前致谢

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:textColor="@color/white"
            android:textSize="20sp"
            android:textStyle="bold"
            android:text="Basic Settings"/>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:textColor="@color/white"
                android:layout_weight="1"
                android:text="Home ID"/>

            <EditText
                android:id="@+id/setup_homeid"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="5"
                android:inputType="number"
                android:singleLine="true"/>

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                android:textColor="@color/white"                    
                android:text="Home Name"/>

            <EditText
                android:id="@+id/setup_homename"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="12"
                android:inputType="textCapCharacters"
                android:singleLine="true"/>                 

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                android:textColor="@color/white"                    
                android:text="Home Password"/>

            <EditText
                android:id="@+id/setup_homepw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="10"
                android:singleLine="true"
                android:inputType="textPassword|number"/>

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                android:textColor="@color/white"                    
                android:text="Home Re-password"/>

            <EditText
                android:id="@+id/setup_homerepw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="10"
                android:inputType="textPassword|number"
                android:singleLine="true"/>

        </LinearLayout>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:textColor="@color/white"
            android:textSize="20sp"
            android:textStyle="bold"
            android:text="IP Settings"/>

    </LinearLayout>
</ScrollView> 
```

应用程序的屏幕截图

![在此处输入图像描述](../Images/e7aae8d682b5fe1da620f00c6e2700cd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:12:26.287

要使宽度属性生效`android:layout_weight="1"`，您必须`android:layout_width="0dip"`为 ChildViews（TextView 和 EditText）设置

就像是：

```
 <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                android:layout_width="0dip" // this line need to be change
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:textColor="@color/white"
                android:layout_weight="1"
                android:text="Home ID"/>

            <EditText
                android:id="@+id/setup_homeid"
                android:layout_width="0dip" // this line need to be change
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="5"
                android:inputType="number"
                android:singleLine="true"/>
 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:21:17.193

![在此处输入图像描述](../Images/42a3efd7e86ffa47739a962a9feff653.png)

你必须为所有人分配相同的宽度

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
             android:textColor="#000000"      
            android:textSize="20sp"
            android:textStyle="bold"
            android:text="Basic Settings"/>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                android:layout_width="70dp"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                 android:textColor="#000000"      
                android:layout_weight="1"
                android:text="Home ID"/>

            <EditText
                android:id="@+id/setup_homeid"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="5"
                android:inputType="number"
                android:singleLine="true"/>

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                   android:layout_width="70dp"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                 android:textColor="#000000"                         
                android:text="Home Name"/>

            <EditText
                android:id="@+id/setup_homename"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="12"
                android:inputType="textCapCharacters"
                android:singleLine="true"/>                 

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
                 android:layout_width="70dp"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                            android:textColor="#000000"                        
                android:text="Home Password"/>

            <EditText
                android:id="@+id/setup_homepw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="10"
                android:singleLine="true"
                android:inputType="textPassword|number"/>

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:orientation="horizontal">

            <TextView
               android:layout_width="70dp"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center_vertical"
                android:layout_weight="1"
                android:textColor="#000000"                    
                android:text="Home Re-password"/>

            <EditText
                android:id="@+id/setup_homerepw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLength="10"
                android:inputType="textPassword|number"
                android:singleLine="true"/>

        </LinearLayout>

        <TextView
         android:layout_width="70dp"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:textColor="#ffffff"
            android:textSize="20sp"
            android:textStyle="bold"
            android:text="IP Settings"/>

    </LinearLayout>
</ScrollView> 
```

# javascript - 如何删除此特殊字符以及如何避免字符串变量值重复？

> ID：14397678
> 
> 赞同：0
> 
> 时间：2013-01-18T11:09:50.687
> 
> 标签：javascript

我有带有一些特殊字符和重复值的 java 脚本字符串变量...我只想删除 < 和 > 符号并且需要避免重复...如何实现这一点...

这就是我所拥有的...

```
var columnname = "USER_ID,PRIORITY,CREATION_DATE<,CREATION_DATE>,ASSIGN_TO_USER_DATE<,ASSIGN_TO_USER_DATE>,START_WORK_DATE<,START_WORK_DATE>,PARTICIPANT_TYPE,SENDER_ID"; 
```

它应该是这样的......

```
var columnname = "USER_ID,PRIORITY,CREATION_DATE,ASSIGN_TO_USER_DATE,START_WORK_DATE,PARTICIPANT_TYPE,SENDER_ID"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:14:42.577

一种可能的简短解决方案：

```
columnname.replace(/[<>]/g, "").split(",").filter(function(item, i, arr) {
    return i === arr.indexOf(item);
}).join(","); 
```

请注意，某些旧浏览器可能不支持[`Array.filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)和[`Array.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)方法。*您可以在MDN*中检查兼容性垫片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:15:06.130

我没有给出完整的答案，因为您没有提供任何代码，但这里是您应该遵循的基本步骤：

*   替换字符串中所有不需要的字符
*   拆分逗号上的字符串，为您提供一个值数组
*   从数组中取出所有重复项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:45:56.943

你也可以使用reduce函数

```
 input_string.replace(/[<>]/g, "").split(",").reduce(function(a, b) {
        a = Array.isArray(a)? a : [a];
        if(a.indexOf(b) == -1){ a.push(b);}
        return a;
    }); 
```

# java - 提高闭包compiler.jar的性能/加载时间

> ID：14397688
> 
> 赞同：4
> 
> 时间：2013-01-18T11:10:26.503
> 
> 标签：java, google-closure-compiler

我有一个接受提交的 javascript 代码并利用 Google 的 Closure Compiler 将其最小化的 php 应用程序。

php 脚本使用 exec() 命令以下列方式调用编译器：

`exec('java -jar compiler.jar --js file.js', $output);`

这种方法的问题是java引擎每次加载compiler.jar并执行压缩所花费的时间，大约3秒来最小化一个简单的代码，如：

`alert ( "hello" );`

我认为这是由于加载 java 引擎和 jar 文件所需的时间，以及处理 javascript 代码所需的时间。

我的问题是，这里有哪些提高速度的选项？

我想到的一个想法可能是将 compiler.jar 转换为一个 servlet，它接收带有代码和选项的帖子，然后通过 http 或套接字返回结果，并在 Tomcat 中运行它。但是由于我不熟悉java代码，这种方法可能很复杂，但我不知道它是否会大大提高速度。

请告诉我您将如何处理它，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:15:27.473

不用费心创建 java 运行时服务器，其他人已经这样做了

看看[钉枪](http://www.martiansoftware.com/nailgun/)

您也可以查看[GroovyServ](http://kobo.github.com/groovyserv/)，因为它与 java 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:17:40.433

考虑查看 Plovr (http://plovr.org/) 或类似的。这是 Closure Compiler 的现有编译服务器。

# php - 仅当在 PHP 代码中调用特定方法时才创建文件？

> ID：14397690
> 
> 赞同：0
> 
> 时间：2013-01-18T11:10:45.883
> 
> 标签：php, file, methods

如何仅创建文件是在代码中调用的特定方法。

假设说，

```
<?php

function foo(){
}
function foo1() {
}

?> 
```

我只想在调用方法 foo1() 时创建一个文件。我不想从构造函数创建文件，因为此代码可能会在没有调用 foo1() 的情况下运行（将不必要地创建文件）。我也可能在一次运行中多次调用 foo1() 但文件应该只创建一次，我会将日期添加到文件中。

希望我清楚。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:13:52.030

在创建文件之前检查文件是否存在。

```
function foo1() {
    $path = '/foo/bar/my_file.txt';

    if (!file_exists($path)) {
        // Create your file here
    }

} 
```

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:13:06.863

将您的创建代码放入 中`foo1()`，然后您可以询问该文件是否已存在或保留您自己的布尔标志。我更喜欢第一个选项。

# android - 当在android中输入更多文本时，编辑文本会垂直扩展

> ID：14397695
> 
> 赞同：2
> 
> 时间：2013-01-18T11:10:58.247
> 
> 标签：android, android-edittext

我有一个包含许多视图的布局，其中之一是使用背景图像编辑文本。一切都很好，直到只有几行，但是当输入更多的文本行时，编辑文本开始扩展，并且它还会将其他视图推到下面，这是不期望的。

我已将宽度设为 wrapcontent。请在下面找到布局代码

```
<FrameLayout
    android:id="@+id/ll"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:src="@drawable/dsh" />

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:background="@android:color/transparent"
        android:maxHeight="250dp"
        android:scrollbars="vertical"
        android:singleLine="false" /> 
```

# php - 检测至少三个字母或数字正则表达式

> ID：14397697
> 
> 赞同：-3
> 
> 时间：2013-01-18T11:11:17.347
> 
> 标签：php, regex, validation

我需要一个RegExp代码如下：3个字母或数字并排再次，不超过

例子：

*   `aab`**有效**_

***   `aaa`**无效**_

    ***   `abc`**有效** _

    ***   `aabbcc`**有效**_

    ***   `aabbbcc`**无效**(bbb )

    *   `aa22cc`**有效** _

    ***   `aa222cc`**无效**(222 )

    *   `xxxxxxxxxxx`**无效**_

    ***   `111111111`**无效**_

    ***   `xx11xx11`**有效**_************** 

 ******我这样做是为了验证实际

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:16:07.140

如果要确保不超过两个连续的相同字符，可以使用[反向引用](http://www.regular-expressions.info/brackets.html)：

```
/(.)\1{2}/ 
```

此表达式将匹配后面跟着两个自身副本的任何字符。因此，要确保没有三个字符重复，请检查正则表达式不匹配：

```
if(!preg_match('/(.)\1{2}/', $input)) {
    // "valid"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:30:00.573

你有两个要求（似乎）：

1.  确保字符串仅包含 ASCII 数字和字母。
2.  确保不超过两个连续的相同字母。

这就是你的做法：

```
if (preg_match(
    '/^         # Start of string
    (?!         # Assert that it is not possible to match...
     .*         # any string,
     (.)        # followed by any character
     \1{2}      # which is repeated twice.
    )           # (End of lookahead)
    [a-z0-9]*   # Match a string that only contains ASCII letters and digits
    $           # until the end of the string.
    \Z/ix',     # case-insensitive, verbose regex
    $subject)) {
    # Successful match
    } 
```

在[regex101](http://regex101.com/r/eH4aR3)上查看。******

# cross-compiling - Nao 机器人交叉编译问题

> ID：14397698
> 
> 赞同：0
> 
> 时间：2013-01-18T11:11:22.227
> 
> 标签：cross-compiling, nao-robot

我有以下问题：我已经成功交叉编译了我的 ALModule，一切正常，例如在 Nao 上工作，我可以使用 ALProxy 访问它。这只有在我只有通过 BIND_METHOD 绑定到模块并且不调用其他方法（未绑定，因为不应该是公共的）的方法时才有效。现在我试图为此找到解决方案，但我有点坚持。

总结一下：我可以成功地将 ALModule 交叉编译为 libname.so 文件并将其放在 NAO 上，但是一旦我的绑定方法使用我创建的其他一些方法，模块将不会加载并获胜'不显示在模块寄存器中。

有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:59:00.867

从来没有听说过这样的问题。在您的 nao 上手动启动 naoqi 时，您是否阅读过错误，为您提供有关加载问题的线索？

例如：您的方法在另一个 cpp 上，而您忘记链接它...

如果比较复杂，应该发源码包到论坛...

# java - Android 快速 rss/atom 解析

> ID：14397700
> 
> 赞同：0
> 
> 时间：2013-01-18T11:11:24.653
> 
> 标签：java, android, parsing, rss, atom-feed

我正在寻找一种快速解析 RSS 和 Atom 提要的方法（源会定期更改）。我尝试了不同的方法：

1.  **编写我自己的解析器：**我用 SAX 做了一个非常快的解析器

    *   **问题：** 大多数时候，提要充满了非标准标签`<content:encoded>`，例如解析错过了最重要的信息。
2.  **使用第三方库：**我尝试了许多库，到目前为止，唯一一个阅读我扔给它的所有提要的是[ROME](http://code.google.com/p/android-rome-feed-reader/)

    *   **问题：** 大多数这些库（尤其是 ROME）在设备上太慢了（4-5x !!）

关于如何加快速度的任何想法？它甚至是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:59:10.557

您所谓的“非标准”实际上是有效的 RSS 扩展。问题是大多数 RSS 库不能很好地处理 RSS 扩展。

唯一的方法是手工制作您自己的 RSS 解析器，这样您就可以处理您关心的扩展。

这是[一个工作演示](https://github.com/dodyg/AndroidRivers/)。

使用的 XML 库是这个[https://github.com/thebuzzmedia/simple-java-xml-parser](https://github.com/thebuzzmedia/simple-java-xml-parser)。

我刚刚使用上述方法完成了一个快速的 RSS 阅读器。

# ruby-on-rails-3 - MongoID 多对多关系

> ID：14397713
> 
> 赞同：1
> 
> 时间：2013-01-18T11:12:04.163
> 
> 标签：ruby-on-rails-3, mongodb, mongoid, mongoid3

我有两个具有以下关系的模型，

```
Class User
has_and_belongs_to_many :notification_channels

Class NotificationChannel
has_and_belongs_to_many :users 
```

我可以通过这种方式为用户对象添加通知通道

```
@user.notification_channels << @notification 
```

但是从用户的频道中删除频道将使用以下查询从频道集合中删除频道文档

```
@user.notification_channels.find_by(id: params[:channel_id]).destroy 
```

如何从用户频道中删除频道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:49:15.510

这是解决方案

```
 @user.notification_channels -= [NotificationChannel.find_by(id: params[:channel_id])] # relationship is removed both ways and both objects are saved 
```

或者

```
 @user.notification_channels.delete(NotificationChannel.find_by(id: params[:channel_id])) # relationship is removed both ways but @user needs to be saved manually
 @user.save 
```

会成功的。

# sql - IBM Infosphere Data Warehousing 上的 SQL 编辑器

> ID：14397714
> 
> 赞同：0
> 
> 时间：2013-01-18T11:12:06.497
> 
> 标签：sql, data-warehouse

我们的技术团队正在将所有数据库分析师迁移到*IBM Infosphere Data Warehousing*，我们目前正在使用 Eclipse 和*SQL Explorer*。

我昨天一直在试用新系统，发现 SQL 编辑器非常混乱。我可以习惯*SQL Query Builder*，但它仅限于**一个**SQL 查询。我们通常会编写很长的 SQL 脚本，其中包含数百个单个 SQL 查询。

多个 SQL 查询的唯一替代方法是 SQL 和*XQuery*编辑器。一旦我编写了第一个查询，内容辅助就不再提供包含模式和表的功能。也没有办法从目录中复制粘贴它，所以我真的需要每次都完整输入所有表名吗？？？

我们的技术团队不会为我们提供任何培训，并且已经告诉我们必须自己解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T13:12:44.217

在您的情况下，我会推荐 InfoSphere Data Studio 或 Infosphere Data Architect。这两种产品都有助于 SQL 查询和存储过程的开发。

# git - 忽略包含对跟踪文件的更改的目录

> ID：14397715
> 
> 赞同：2
> 
> 时间：2013-01-18T11:12:13.877
> 
> 标签：git

我想忽略一个对跟踪文件有很多更改的目录？我试过了

```
d:\git>git update-index --assume-unchanged dir
fatal: Unable to mark file dir

d:\git>git update-index --assume-unchanged dir/*
fatal: Unable to mark file dir/*

d:\git>git update-index --assume-unchanged dir\*
fatal: Unable to mark file dir\* 
```

我试图强制`cmd.exe`扩展`dir\*`到`dir\file1`，`dir\file2`但没有成功。我想我的问题是特定于糟糕的 Windows 控制台。最后我创建了一个批处理文件

```
git update-index --assume-unchanged dir\file1
git update-index --assume-unchanged dir\file2
git update-index --assume-unchanged dir\file3 
```

有没有办法给出一个目录而不是所有文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:40:40.490

您可以在 git-bash 会话中尝试（[可与 msysgit 一起使用](https://github.com/msysgit/msysgit/blob/master/share/WinGit/Git%20Bash.vbs)）

```
git update-index --assume-unchanged -- $(git ls-files 'dir/*') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:19:15.960

由于 git 只跟踪内容（换句话说，文件），因此您需要忽略目录中的每个文件。

我没有尝试过，但类似：

```
for f in dir/*; do
    git update-index --assume-unchanged -- $f
done 
```

应该（理论上）做到这一点。

# c# - Linq OrderBy 聚合日期

> ID：14397718
> 
> 赞同：1
> 
> 时间：2013-01-18T11:12:31.487
> 
> 标签：c#, .net, linq

我想按最后评论日期或帖子日期订购帖子列表。

这是课程：

```
public class Post
{    
    public int Id { get; set; }
    public string Text { get; set; }
    public System.DateTime DatePosted { get; set; }
    public ICollection<Comment> Comments { get; set; }
}

public partial class Comment
{
    public int Id { get; set; }
    public int PostId { get; set; }
    public string Text { get; set; }
    public System.DateTime DateCommented { get; set; }
} 
```

理想的代码（甚至不编译）将是：

```
IEnumerable <Post> posts = MVPMetroEntities.Posts
                                               .OrderByDescending(p => 
                                                       p.DatePosted || p.Comments.Max(c=>c.DateCommented)); 
```

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:16:56.183

我假设您正在寻找`ThenByDescending`：

```
IEnumerable<Post> posts = MVPMetroEntities.Posts
    .OrderByDescending(p => p.DatePosted)
    .ThenByDescending(p => p.Comments.Max(c => c.DateCommented)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:29:03.227

```
var posts = MVPMetroEntities.Posts
                .Select(p => new { 
                     Date = p.Comments.Any() 
                                ? p.Comments.OrderByDescending(c => c.DateCommented).First().Date 
                                : p.DatePosted, 
                     Post = p
                  }
                .OrderByDescending(x => x.Date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:26:08.490

我没有清楚地理解你的意图，但是这个怎么样

```
MVPMetroEntities.Posts
.OrderByDescending(p => Recent(p.DatePosted, p.Comments.Max(c => c.DateCommented))); 
```

通过使用这样的辅助方法/扩展方法

```
 public DateTime Recent(DateTime dt1, DateTime dt2)
        {
            return dt1 > dt2 ? dt1 : dt2;
        } 
```

注意：如果您使用任何 ORM（如 Linq-to-sql），助手可能无法工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:05:37.457

我通过在 OrderByDescending 中使用三元运算符找到了答案。谢谢 ：）

```
MVPMetroEntities.Posts
            .OrderByDescending(
                    e => e.Comments.Any() ? e.Comments.Max(f => f.DateCommented) : e.DatePosted) 
```

# objective-c - 从目标 c 中的推文中获取文本和坐标

> ID：14397726
> 
> 赞同：0
> 
> 时间：2013-01-18T11:12:54.160
> 
> 标签：objective-c, xcode, coordinates, geo

我正在循环浏览一系列返回的推文以获取文本组件和坐标。我已经将代码设置如下，这会检索文本而不是坐标。我不确定我做错了什么。我检查了返回的路径，返回的字符串的一部分包含例如

```
"geo":{"coordinates":[51.479361,-0.215066],"type":"Point"}, 
```

所以肯定会返回一个坐标。这是我的代码...

```
for (NSDictionary *tweet in results) {
                 // Get the tweet
                 NSString *twittext = [tweet objectForKey:@"text"];

                 // Save the tweet to the twitterText array
                 [_twitterText addObject:twittext];

id jsonResult = [tweet valueForKeyPath:@"geo.coordinates"];
                 if ([NSNull null] != jsonResult) {
                     if (2 == [jsonResult count]) {
                         NSDecimalNumber* longitude = [jsonResult objectAtIndex:0];
                         NSDecimalNumber* latitude = [jsonResult objectAtIndex:1];
                         if (longitude && latitude) {

                             // here you have your coordinates do whatever you like
                             [twitterLocation addObject:[NSString stringWithFormat:@"%@,%@", latitude, longitude]];
                         }
                         else {
                             NSLog(@"Warning: bad coordinates: %@", jsonResult);
                         }
                     }
                     else {
                         NSLog(@"Warning: bad coordinates: %@", jsonResult);
                     }
                 }*/
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:31:35.247

首先`check`，如果获得的值是`NSString`或`NSDecimalNumber`

```
if([jsonResult objectAtIndex:0] && [jsonResult objectAtIndex:1])  
{
   if([[jsonResult objectAtIndex:0] isKindOfClass:[NSString class]])
    {  
       double longitude = [[jsonResult objectAtIndex:0] doubleValue];
       double latitude = [[jsonResult objectAtIndex:1] doubleValue];
    }
} 
```

# c# - WPF-MVVM-将窗口标题绑定到属性

> ID：14397728
> 
> 赞同：2
> 
> 时间：2013-01-18T11:12:55.467
> 
> 标签：c#, wpf, mvvm, binding

我的客户端应用程序可以连接到不同的服务器应用程序，因此我想将连接信息动态添加到窗口标题。标题绑定到 的属性，`ViewModel`并`get`在启动应用程序后调用它，但它不再更新，而窗口中的其他控件仍然正常工作。

这是`XAML`：

```
<Window x:Class="MyApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:localVM="clr-namespace:MyApp.ViewModels"
    xmlns:local="clr-namespace:MyApp"
    WindowStartupLocation="CenterScreen"
    Title="{Binding Path=AppTitle}"
    Height="459"
    Width="810">
<Window.Resources>
    [...]
    <localVM:MainWindowViewModel x:Key="Windows1ViewModel" />
</Window.Resources>
<Grid DataContext="{StaticResource Windows1ViewModel}">
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Canvas Grid.Row="0">
        <Menu DockPanel.Dock="Top" ItemsSource="{Binding Path=Menu}"/>
        <Label Content="{Binding Path=ConnectionProperty}" Canvas.Right="0" Canvas.Bottom="0"/>
    </Canvas>
 </Grid>
</Window> 
```

该`Title`is bound to `AppTitle`， while `Label`is bound to `ConnectionProperty`，这工作正常。在`XAML.cs`我将 设置`ViewModel`为`DataContext`的`View`：

```
public MainWindow()
{
    InitializeComponent();
    DataContext = new MainWindowViewModel();
} 
```

的构造函数`MainWindowViewModel`：

```
public MainWindowViewModel()
{
    MenuItemViewModel server = new MenuItemViewModel { Text = ServerMenu };
    Menu.Add(server);
    AppTitle = "My application title";
    SetConnectionMenuEntry(false);
    //[.. dynamically build my menu ..]
} 
```

启动应用程序后，`Title`正确显示。然后我连接到服务器：

```
private void ConnectToServer()
{
    //[.. connect to server ..]
    if (connected)
    {
        SetConnectionMenuEntry(true);
        ConnectionProperty = " - connected to " + serverProxy.url;
        AppTitle  = appTitle + connectionProperty;
    }
} 
```

在此之后，`Title`保持不变，而`Label`获得`ConnectionProperty`价值。

这是两个属性的定义，几乎相同：

```
 private string appTitle;
    public string AppTitle 
    {
        get { return appTitle; }
        set 
        {
            if (this.appTitle != value)
            {
                this.appTitle = value;
                RaisePropertyChanged(() => AppTitle);
            }
        }
    }

    private string connectionProperty = "";
    public string ConnectionProperty
    {
        get { return this.connectionProperty; }
        set
        {
            if (this.connectionProperty != value)
            {
                this.connectionProperty = value;
                RaisePropertyChanged(() => ConnectionProperty);
            }
        }
    } 
```

知道为什么`Title`不更新，但是`Label`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:11:33.817

您`Windows1ViewModel`在 中`Grid.Resources`，但是您从代码中为窗口创建了一个新的 DataContext。通过这种方式，您有两个 ViewModel 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:51:19.370

*正如问题的原始海报所述：*

* * *

我注释掉了我需要删除以使其正常工作的行：

```
<Window x:Class="MyApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:localVM="clr-namespace:MyApp.ViewModels"
    xmlns:local="clr-namespace:MyApp"
    WindowStartupLocation="CenterScreen"
    Title="{Binding Path=AppTitle}"
    Height="459"
    Width="810">
<Window.Resources>
    [...]
    <!-- <localVM:MainWindowViewModel x:Key="Windows1ViewModel" /> [Edit: 2 times set] -->
</Window.Resources>
<Grid> <!-- Edit removed: DataContext="{StaticResource Windows1ViewModel}" -->
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Canvas Grid.Row="0">
        <Menu DockPanel.Dock="Top" ItemsSource="{Binding Path=Menu}"/>
        <Label Content="{Binding Path=ConnectionProperty}" Canvas.Right="0" Canvas.Bottom="0"/>
    </Canvas>
 </Grid>
</Window> 
```

# java - GWT CSS 语法无法正常工作

> ID：14397730
> 
> 赞同：0
> 
> 时间：2013-01-18T11:13:03.000
> 
> 标签：java, jquery, css, gwt, gwtquery

[在这里](http://code.google.com/p/gwtquery/wiki/CssGuide)的 GWT 教程页面中，在页面底部附近清楚地说明了用户不受类型安全声明的限制，他也可以使用 jQuery 语法。我在我的 GWT 中定义了一个文本框，我`foo`在通过该`setStyleName`方法生成后向其中添加了一个类。之后，当我尝试附加样式时：

```
$(".foo").css($$("border: 1px solid #aaaaaa; border-radius: 5px; font-size: 80%; padding: 6px 3px 4px 3px;  text-align: center;\r\n" + 
            "    -moz-transition: border 0.2s linear 0s, box-shadow 0.2s linear 0s;\r\n" + 
            "    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset; background: #f1f1f1; margin: 20px 50px;")); 
```

它根本不起作用，我只是得到一个平淡的文本框。但是，当我在 CSS 文件中定义样式时，样式应用得非常好。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T20:49:47.513

如果您在触发 jquery 调用时确定该元素存在于 DOM 中，请尝试一个简单的案例并确保您的语法正确。

```
$(".foo").css($$("border: 1px solid #aaaaaa; background-color: #ffe;")); 
```

# c++ - 模板函数将参数函数指针指向类方法

> ID：14397733
> 
> 赞同：2
> 
> 时间：2013-01-18T11:13:12.277
> 
> 标签：c++, templates, member-function-pointers

我有一个简单的类，如下所述。

```
typedef mytype int;
typedef mytype2 float;

class A {
     .
     .
     void run (mytype t) { .... do something with t ..... }
     .
     .
} 
```

我有另一个类，我在其中创建了一个模板函数（使其独立于 A 类），它应该将函数指针与其参数一起指向（即 A 类方法运行）。

```
class B {
     .
     template< // how it should be defined >
             void myfunction ( // how parameters will be passed ) { } 
```

驱动程序应该是这样的

```
 A a
      B b
      C c
      b.myfunction(&A::run, mytype);     // Or how it should be called
      b.myfunction(&B::run, mytype2);    // - do - 
```

想法/代码/原因？

问候， Farrukh Arshad。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:26:42.220

```
class B {
    template <typename T>
    void myfunction(void (T::*func)(mytype), mytype val) {
        (some_instance_of_T.*func)(val); // or whatever implementation you want
    }
}; 
```

参数`func`定义为指向非静态成员函数的指针`T`，获取`mytype`和返回`void`。

你需要`some_instance_of_T`从某个地方得到。`A`您想`myfunction`调用哪个实例`func`？如果它是调用者的 object `a`，那么要么`myfunction`需要另一个参数来提供`a`，要么`bind`像 Alex 所说的那样使用，并定义：

```
class B {
    template <typename Functor>
    void myfunction(Functor f, mytype val) {
        f(val); // or whatever implementation you want
    }
}; 
```

或者如果你想限制用户传入的类型：

```
class B {
    void myfunction(std::function<void(mytype)> f, mytype val) {
        f(val); // or whatever implementation you want
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:20:30.817

使用[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)；

```
using namespace std::placeholders;
b.myfunction(std::bind(&A::run, a, _1), mytype); 
```

定义 B 如下

```
class B {
     .
     template<typename Callable, typename Arg>
             void myfunction (Callable fn, Arg a) {fn(a); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:30:17.847

我不确定我是否很好地理解了您的问题，但您可能想尝试使用`std::function`and `std::bind`，例如：

```
#include <functional>
#include <iostream>

struct A
{
    void run(int n)
    {
        std::cout << "A::run(" << n << ")" << std::endl;
    }
};

struct B
{
    typedef std::function< void( int ) > function_type;

    void driver(function_type f, int value)
    {
        std::cout << "B::driver() is calling:" << std::endl;
        f( value );
    }
};

int main()
{
    A a;
    B b;
    b.driver( 
        std::bind<void>(&A::run, &a, std::placeholders::_1), 
        10
    );
} 
```

输出：

> B::driver() 正在调用：
> 
> 答：：运行（10）

# sql - 查找记录删除将违反的所有约束

> ID：14397740
> 
> 赞同：0
> 
> 时间：2013-01-18T11:14:11.767
> 
> 标签：sql, sql-server, constraints

我有一个成员表，其中记录在多个地方使用（超过 10 个表）。所有引用的约束。

到目前为止，我看到了 SQL 引擎遇到约束的第一个地方（来自我尝试删除记录时的错误消息 547）。找出所有使用我要删除的记录的地方真的很方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:44:56.460

SQL 数据库管理系统通常不公开该功能。对于由数百个外键引用的表，识别并返回每一个可能的违规行为将比仅返回第一个违规行为要昂贵得多。

您*可以*编写一个存储过程

*   读取系统表的外键约束，
*   忽略具有 的 FK 约束`on delete cascade`，
*   检查每个引用表的 FK 值，以防止删除行，以及
*   返回那些表名（或约束名，或表名和列名，或表名以及导致失败的操作类型 - 不管）。

但这听起来像你得到的很多工作。可能有更好的方法来解决这类问题。（比试图找出所有可能的 FK 约束失败要好。）

# javascript - Phonegap Internet 连接重定向

> ID：14397741
> 
> 赞同：0
> 
> 时间：2013-01-18T11:14:12.110
> 
> 标签：javascript, html, cordova

嗨，如果用户没有互联网连接，我目前正在处理重定向

警告连接的示例代码

```
function checkConnection() {
    var networkState = navigator.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    alert('Connection type: ' + states[networkState]);
} 
```

所以我把它改成

```
function InternetOK(){
        var networkState =navigator.connection.type
        var states = {};
        if (state == "NONE" ){
           window.location = "offline.html";
            }
        } 
```

此代码在 index.html 中

```
<html>
<body>
<div class="iamstupid">
  <a href="news.html" onClick="InternetOK();">News</a>
.
.
. 
```

出了点问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:01:23.773

解决了

函数 checkConnection(){ var networkState = navigator.connection.type;

```
 if (networkState == Connection.NONE ){
   window.location = "offline.html";
   } 
```

}

# excel - Excel 宏 UI 设计：如何让用户选择多个输入

> ID：14397742
> 
> 赞同：1
> 
> 时间：2013-01-18T11:14:14.870
> 
> 标签：excel, vba

以下问题在较低程度上是一个编码问题，而是一个 UI 设计问题：

假设我在某处有一个按钮在按下时调用宏。现在宏需要两个不同的输入——比如说，两个范围。然后它对输入进行处理并将结果写入某处。让用户指定这两个输入范围的最佳方法是什么？

如果不是两个，而是只有一个输入，那将很容易：我们让用户选择输入，然后在按下按钮后，宏可以查找所选范围并对其进行评估。有谁知道在两个输入的情况下用户友好的解决方案会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:45:37.393

例如，您可以让用户输入两个这样的范围（默认选择`A1:A10`和`B1:B10`可以删除）

您还可以在继续进行之前使用错误检查（以防用户取消）

```
Sub RangeExample()
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = Application.InputBox("Select first range", "Range 1", Range("A1:A10").Address, , , , , 8)
Set rng2 = Application.InputBox("Select second range", "Range 2", Range("B1:B10").Address, , , , , 8)
End Sub 
```

# php - 我可以使用 Memcache 进行输出缓存吗？

> ID：14397743
> 
> 赞同：0
> 
> 时间：2013-01-18T11:14:19.380
> 
> 标签：php, memcached, output-caching

到目前为止，我只使用过 memcache 来缓存数据（通常是 SQL 查询的输出）。现在，我需要为我的动态站点的几页缓存输出 HTML。我需要将这些页面缓存 7 天（即使有数据更改）。是否可以使用 Memcached 来做到这一点？他们还有其他更好的输出缓存替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:18:08.653

您可以使用 memcache 执行此操作，但这不是最好的方法。一些问题是 memcache 不是为更大的值而构建的，它最适用于较小的内容。那么，如果它需要空间，你就会遇到它丢弃你的价值观的问题。这可能是因为它已满，也可能是因为不再有空间（平板）用于这种特定大小的内容。

对于这样的事情，我建议你看看像[清漆这样的缓存解决方案](https://www.varnish-cache.org/about)

# java - 使用 Java 将图像上传到 imageshack

> ID：14397748
> 
> 赞同：0
> 
> 时间：2013-01-18T11:14:35.817
> 
> 标签：java, base64, httpclient, image-uploading

我在使用以下代码将图像上传到使用 Java 的 imageshack 时遇到问题。我得到的响应是 http 拒绝我的连接。我认为我的问题在于我如何提供图像文件，因为我不确定它是否应该是 base64、byteArray 等。

任何帮助都会很棒，谢谢。

```
public String ImageShack (String imageDir, String myKey) {

    //set file
    BufferedImage image = null;
    File file = new File(imageDir);

    //Set namevalue pairs
    List<NameValuePair> params = new ArrayList<NameValuePair>();

    try
    {
        image = ImageIO.read(file);
        ByteArrayOutputStream byteArray = new ByteArrayOutputStream();
        ImageIO.write(image, "png", byteArray);
        byte[] byteImage = byteArray.toByteArray();
        String dataImage = new Base64().encodeAsString(byteImage);

        //Assign name valued pars
        params.add(new BasicNameValuePair("key", myKey));
        params.add(new BasicNameValuePair("fileupload", dataImage));
        params.add(new BasicNameValuePair("format", "json"));

        //Create HTTPClient and Client
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://www.imageshack.us/upload_api.php");

        //set entities
       httpPost.setEntity(new UrlEncodedFormEntity(params));

        //Execute & get response
        HttpResponse response = httpClient.execute(httpPost);
        return response.toString();

    }
    catch(Exception e)
    {
            return "Error: " + e.getMessage();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:32:44.910

我发现了一个类似的问题，不是特定于 imageshack 只是一个网站，但这里是他们解决方案的代码：

```
BufferedImage img = ImageIO.read(new File("temp.jpg"));             
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(img, "jpg", baos);
baos.flush();
Base64 base = new Base64(false);
String encodedImage = base.encodeToString(baos.toByteArray());
baos.close();
encodedImage = java.net.URLEncoder.encode(encodedImage, "ISO-8859-1");
request.setRequestBody(encodedImage); 
```

这是上面[提到的问题](https://stackoverflow.com/questions/11119553/base64-encoding-a-image-in-java-wrong-apparently-what-am-i-missing)。如果这是您问题的根源，[这篇关于 Image/Base64 字符串转换的文章也可能会有所帮助。](http://www.myjeeva.com/2012/07/how-to-convert-image-to-string-and-string-to-image-in-java/)

# extjs - ExtJs Tree Panel - Child nodes not appearing after closing Window

> ID：14397760
> 
> 赞同：1
> 
> 时间：2013-01-18T11:15:18.757
> 
> 标签：extjs, window, treepanel

I've a Window with a Tree Panel navigation. It renders perfectly the first time the application is loaded. But once the window is closed and opened again, the Tree nodes don't show up. The console also does not throw any errors.

Window Code :

```
Ext.define('MyDesktop.view.EmployeeWindow', {

extend: 'Ext.ux.desktop.Module',

requires: [
'Ext.tab.*',
'Ext.window.*',
'Ext.tip.*',
'Ext.layout.container.Border',
'Ext.data.ArrayStore',
'Ext.util.Format',
'Ext.grid.*',
'Ext.grid.Panel',
'Ext.grid.RowNumberer',
'MyDesktop.store.Employee',
'MyDesktop.store.EmployeeNavTree'
],
id:'emp-win',
init : function() {
    this.launcher = {
        text: 'Employees Management',
        iconCls:'icon-grid'
    };
},
createWindow : function() {
    var employeenavtree = Ext.create('MyDesktop.store.EmployeeNavTree');
    var flag=0;
    var currentitem='employeetab';
    var navs1 = Ext.create('Ext.tree.Panel', {
     width: 200,
     border: false,
     store: employeenavtree,
     rootVisible: true,
    // renderTo: Ext.getBody()
     });

    navs1.getSelectionModel().on('select', function(selModel, record) {
        var selectedNode = navs.getSelectionModel().getSelection();
        Ext.getCmp('content-panel').layout.setActiveItem(selectedNode[0].data.id+'tab');
    });
    // Define data model
    var atttab = Ext.create('MyDesktop.view.leave.LeaveTabPanel');
    var leavetab = Ext.create('MyDesktop.view.attendance.AttendanceTabPanel');
    var emptab = Ext.create('MyDesktop.view.employees.EmployeeTabPanel');
    // Create data store

    var contentPanel1 = {
        id: 'content-panel1',
        region: 'center', // this is what makes this panel into a region within the containing layout
        layout: 'card',
        margins: '2 5 5 0',
        activeItem: 0,
        border: false,
        items: [emptab,atttab,leavetab]
    };

    var desktop = this.app.getDesktop();
    var employeewin = desktop.getWindow('emp-win');
    if(!employeewin) {
        employeewin = desktop.createWindow({
            id: 'emp-win',
            title:'Employees Management',
            iconCls: 'icon-grid',
            maximized: true,
            animCollapse:false,
            constrainHeader:true,
            closable: true,
            width: 600,
            minWidth: 600,
            height: 600,
            layout: {
                type: 'border',
                padding: 5
            },
            items: [{
                region: 'west',
                title: 'Navigation',
                split: true,
                rootVisible: false,
                autoScroll: true,
                items: [navs1]
            },contentPanel1]

        });
    }
    return employeewin;
}, }); 
```

NavTree Code

```
 Ext.define('MyDesktop.store.EmployeeNavTree', {
    extend:'Ext.data.TreeStore',
    alias:'data.navtree',
    root: {
        expanded: true,
        children: [
            { id:'employee', text: "Employee Records",  leaf:true },
            { id:'attendance', text: "Attendance", leaf: true },
            { id:'leave', text: "Leave", leaf: true }
            //{ id:'benefits', text: "Benefits", leaf: true }
            ]
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:41:04.687

Solved the problem by declaring the store variable within a custom definition for a tree panel called MasterNav and then creating a variable alone for this in the Window Component.

Hope this helps for somebody else who might run into trouble.

# mysql - 在查询中向“IN”添加条件

> ID：14397763
> 
> 赞同：1
> 
> 时间：2013-01-18T11:15:35.837
> 
> 标签：mysql

询问：

```
SELECT * FROM #__content WHERE featured=1 and catid=$category_id or catid IN 
( SELECT id FROM #__categories WHERE parent_id=$category_id ) 
```

`Featured=1`只在这里工作`catid=$category_id`。开始此`catid IN ( SELECT id FROM #__categories WHERE parent_id=$category_id )`输出所有行的位置，并且在此位置忽略 features=1。如何添加`featured=1`条件`catid IN`？

所以基本上它现在看起来像这样：

```
$query = "SELECT * FROM #__content WHERE featured=1 and catid=$category_id";
$query2 = "SELECT * FROM #__content WHERE catid IN 
    ( SELECT id FROM #__categories WHERE parent_id=$category_id )"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:22:35.887

加盟怎么样？

```
$query = "SELECT * FROM #__content WHERE featured=1 and catid=$category_id";
$query2 = "
SELECT * FROM #__content as con
LEFT JOIN #__categories as cat
on con.cat_id =cat.category_id
WHERE cat.parent_id=$category_id;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:17:28.533

您需要添加括号来强制执行您需要的评估顺序：

```
SELECT * FROM #__content WHERE catid=$category_id OR (featured=1 AND catid IN 
( SELECT id FROM #__categories WHERE parent_id=$category_id )) 
```

由于`AND`优先级高于`OR`，因此不带括号的表达式在`(featured=1 and catid=$category_id)`为真或`catid`在`IN`子查询指定的列表中时为真。

# jquery - 在 jQuery 中使用 cssSandpaper

> ID：14397767
> 
> 赞同：1
> 
> 时间：2013-01-18T11:16:01.173
> 
> 标签：jquery, rotatetransform

我正在尝试使用`-sand-transform`cssSandpaper 执行以下代码：

```
$('#obj').css('-moz-transform', 'rotate(45deg)');
$('#obj').css('-ms-transform', 'rotate(45deg)'); 
```

这是我正在尝试的，但它不起作用。

```
$('#obj').css('-sand-transform', 'rotate(45deg)'); 
```

有可能做这样的事情吗？似乎只有在您之前在 CSS 中声明它时才有效。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:26:01.277

仅仅更改 CSS 属性是行不通的，因为`-sand-transform`它不是原生 CSS 属性。您必须使用库方法来应用转换。

```
cssSandpaper.setTransform( $('#obj')[0], "rotate(45deg)" ); 
```

# image - 在matlab中获取图像分辨率

> ID：14397769
> 
> 赞同：1
> 
> 时间：2013-01-18T11:16:05.523
> 
> 标签：image, matlab, resolution

我正在做一个项目，我需要找到图像的图像分辨率或图像高度和宽度与图像分辨率之间的任何关系。

当我们右键单击图像并选择`properties->details`时，我们有分辨率信息。

我们如何在 中提取该信息`matlab`？

该信息是否不依赖于图像属性，因为我在某处读取图像只有像素信息，`ppi`或者`dpi`取决于打印机、传感器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:25:30.450

您可以使用`imfinfo`matlab 函数，它返回一个结构，其字段包含有关图像的信息。

例如：

```
info = imfinfo(YOUR_IMAGE);
w = info.Width;  %An integer indicating the width of the image in pixels
h = info.Height; %An integer indicating the height of the image in pixels 
```

在您的情况下，您可能想要获得:`Horizontal resolution`和`Vertical resolution`. 所以使用：

```
xR = info.XResolution
yR = info.YResolution 
```

欲了解更多信息： http: [//www.mathworks.com/help/matlab/ref/imfinfo.html](http://www.mathworks.com/help/matlab/ref/imfinfo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:05:23.777

对于 JPEG（或 TIFF）图像，您可以使用函数[exifread](http://www.mathworks.co.uk/help/matlab/ref/exifread.html)提取所有 EXIF 信息和标签。这应该包含图像属性中包含的所有信息。

例子：

```
exif = exifread('Image.JPG') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:14:44.817

对于“.jpg”图像，根据拍摄它的设备，将存在分辨率信息，因此对于每个 jpeg 图像，元数据中可能不存在分辨率信息，无论存在什么信息，都可以在 matlab 中使用“imfinfo”或“imageinfo”可以看到。为了改变分辨率，matlab 中有一些命令，很容易找到

# jsf - h:graphicImage 不重新渲染

> ID：14397771
> 
> 赞同：0
> 
> 时间：2013-01-18T11:16:11.983
> 
> 标签：jsf, richfaces, jsf-1.2, selectonemenu, graphicimage

我有一个 jsf 文件，其中有 selectOneMenu 和 ah:graphicImage。现在问题是当我通过 selectOneMenu 发送 onchange 请求并想要重新渲染 h:graphicImage 并希望在操作 bean 中显示和隐藏布尔值时。但不能正常工作。实际上，首先我非常仔细地调查它，当我通过 selectOneMenu 发送操作时，布尔值在 bean 中正确设置但没有正确设置 reRender 值。如果我刷新页面，那么它可以正常工作。如果我想刷新页面，我可以解决它的任何人在 selectOneMenu actionlistener 上然后我如何刷新页面。我的代码在这里了解更多详细信息

```
 <h:selectOneMenu id="stageListID" value="#{mnpBean.stageList.defaultValue}" >
<f:selectItems  value="#{mnpBean.stageList.values}"/>
<a4j:support event="onchange" actionListener="#{mnpAction.onStageListChangeAction}" reRender="addBtn1" oncomplete="resetViewConfigs();"/>
</h:selectOneMenu> 
```

图形图像的代码

```
<h:graphicImage id="addBtn1"  url=""  rendered="#{mnpBean.showAddButton}" style="cursor:pointer">
<a4j:support id="addRowBtn1" event="onclick"  actionListener="#{mnpAction.addMultiNoRingFence}"/>
</h:graphicImage> 
```

豆代码在这里

```
public void onStageListChangeAction(ActionEvent ae) {
mnpBean = getMNPBean();
if ("10".equals(mnpBean.getStatusList().getDefaultValue()) &&       "010".equals(mnpBean.getStageList().getDefaultValue())) {
 mnpBean.setShowAddButton(false);         
 }else{
 mnpBean.setShowAddButton(true);         
 }

} 
```

任何有关此的帮助表示感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:44:26.457

你应该做什么：

1.  把你包`<h:graphicImage/>`在一个容器里，比如`<h:panelGrid/>`

    ```
    <a4j:outputPanel ajaxRendered="true" layout="none" id="imageContainer">
     <h:graphicImage id="addBtn1"  url=""  rendered="#{mnpBean.showAddButton}" style="cursor:pointer">
        <a4j:support id="addRowBtn1" event="onclick"  actionListener="#{mnpAction.addMultiNoRingFence}"/>
     </h:graphicImage> 
    <a4j:outputPanel/> 
    ```

2.  使用容器的 id 作为目标`reRender`

    ```
    <a4j:support event="onchange" actionListener="#{mnpAction.onStageListChangeAction}" reRender="imageContainer" oncomplete="resetViewConfigs();"/> 
    ```

对于问题首先发生的原因，请参阅[此处的说明](https://stackoverflow.com/a/13325002/1530938)

# codeigniter - Codeigniter 数据库中的重复元素

> ID：14397772
> 
> 赞同：1
> 
> 时间：2013-01-18T11:16:12.200
> 
> 标签：codeigniter, codeigniter-2

我有一个页面，其中包含从数据库加载的 4 种产品，当您向下滚动时，您每次都会获得 4 种以上的产品。

此产品以随机方式加载，问题是重复产品。

这是我在模型中使用的线：

```
$this->db->order_by('productID', 'RANDOM'); 
```

没有这条线一切正常。我不能使用`limit`set to 1 因为我有：

```
$query = $this->db->get('product', 4, $offset); 
```

有一种简单的方法可以解决这个问题吗？我要做一个包含所有产品的数组吗？

更新

这是 index.php 中的脚本

```
<script type="text/javascript">
$(document).ready(function(){

    var products = <?= $get_products ?>;
    var loaded_products = 0;

    $(".loadMoreProducts").click(function(){
        loaded_products += 4;

        var dati = "welcome/get_products/" + loaded_products;

        $.ajax({
          url:'welcome/get_products/' + loaded_products,
          type: 'get',
          data: dati,
          cache: false,
          success: function() {

            $.get(dati, function(data){
                $("#mainContainerProductWelcome").append(data);
            });

            if(loaded_products >= products - 4) {
                $(".loadMoreProducts").hide();
            } else {
                // load more still visible
            }
          },
          error: function() {
            // there's something wrong
          }
        });

        // show spinner on ajax request starts
        $(".loading-spinner").ajaxStart(function(){
            $(".loading-spinner").show();
            $(".text-load").hide();
        });

        // ajax request complets hide spinner
        $(".loading-spinner").ajaxStop(function(){
            $(".loading-spinner").delay(5000).hide();
            $(".text-load").show();
        });

        return false;
    });

    // submit form contact
    $(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() >= $(document).height()) {
        loaded_products += 4;

        var dati = "welcome/get_products/" + loaded_products;

        $.ajax({
          url:'welcome/get_products/' + loaded_products,
          type: 'get',
          data: dati,
          cache: false,
          success: function() {

            $.get(dati, function(data){
                $("#mainContainerProductWelcome").append(data);
            });

            if(loaded_products >= products - 4) {
                $(".loadMoreProducts").hide();
            } else {
                // load more still visible
            }
          },
          error: function() {
            // there's something wrong
          }
        });

        // show spinner on ajax request starts
        $(".loading-spinner").ajaxStart(function(){
            $(".loading-spinner").show();
            $(".text-load").hide();
        });

        // ajax request complets hide spinner
        $(".loading-spinner").ajaxStop(function(){
            $(".loading-spinner").delay(5000).hide();
            $(".text-load").show();
        });
        return false;
    }
});

});
</script> 
```

控制器：

```
function index()
{
    $this->load->helper('url');
    $data['description'] = "Description";
    $data['keywords'] = "Keywords";
    $data['products'] = $this->abitainterni->getAllProductsLimit();
    $data['get_products'] = $this->abitainterni->get_products();
    //load view
    $this->load->view('welcome', $data);
}

function get_products($offset)
{
    $data['products'] = $this->abitainterni->getAllProductsLimit($offset);
    $this->load->view('get_products', $data);
} 
```

模型：

```
function getAllProductsLimit($offset=0)
{
    $sql = "SELECT * FROM product P";
    $this->db->order_by('productPosition','ASC');
    $query = $this->db->get('product', 4, $offset);
  if($query->num_rows() > 0){
    return $query->result();
  } else {
    return 0;
  }
}

function get_products()
{
    $query = $this->db->count_all_results('product');
    return $query;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:31:48.957

制作一个接收到的 ProductID 数组

例如：，在第一次运行中，您的产品 ID 为 (1,5,8,9)

执行以下操作。

```
$exlude_ids= 1,5,8,9;

$this->db->where_not_in('productID',$exlude_ids); 
```

下次，将这些 id 添加到 exclude_ids 并继续循环。

我在一个网站上做过这个。因此，如果您需要更多帮助，请发表评论。

**编辑**

**控制器 ：**

在获取前四个产品行后，将这些产品 ID 添加到一个数组中并将其传递给模型，如下所示。

例如：`$exlcude_ids = array(1,5,7,3);`

**模型 ：**

```
function getAllProductsLimit($offset=0,$exlude_ids=array())
{
    $this->db->select(*);
    if(count($exclude_ids)>0)
    {
       $this->db->where_not_in('productID',$exlude_ids);
    }
    $this->db->order_by('productPosition','ASC');
    $query = $this->db->get('product', 4, $offset);
  if($query->num_rows() > 0)
  {
    return $query->result();
  }
  else
  {
    return 0;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:30:51.197

你应该这样做。当您第一次运行查询时，请设置一个数组。
现在，当您获得结果（4 行）并显示记录时，将这些记录的 id 放入 javascript 数组中。您必须使用 ajax 向下滚动并获取更多结果。下次当你想运行查询时，首先发送 javascript 数组，到 php 使用 json。PHP 将得到 json 编码的数组 .decode 它。如果它的长度等于 0 则运行简单的 query.else run `WHERE productID NOT IN ($array)`。这样你就可以做到。

# matplotlib - 在 matplotlib 直方图中缺少一些 bin 值

> ID：14397777
> 
> 赞同：1
> 
> 时间：2013-01-18T11:16:29.327
> 
> 标签：matplotlib

使用以下代码行，我想打印给定图像的 rgb 直方图。总体结果很好，但是将三个直方图与使用 gimp 获得的直方图进行比较，我注意到直方图中的一些 bin 丢失了，我的意思是有一个白色值，其中应该有一个与 0 不同的像素数与之相关联语气。

这是我的代码：

```
im = np.array(Image.open('myimage.jpg'))

plt.figure()
plt.hist(im[:,:,0].flatten(), 256, color='red', label='Histogram Red')

plt.figure()
plt.hist(im[:,:,1].flatten(), 256, color='green', label='Histogram Green')

plt.figure()
plt.hist(im[:,:,2].flatten(), 256, color='blue', label='Histogram Blue')

plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:47:20.760

您还没有真正提供足够的信息来回答您的问题，但我的猜测是您遇到了 bin 边缘的问题。像您一样提供多个 bin 会将您的数据范围划分为 256 个 bin，但您的数据在 [12,230] 范围内（即`np.min(img[:,:0]) == 12`和`np.max(img[:,:,0]) == 230`），那么您的 bin 宽度将小于 1，您可能会得到奇怪的混叠。我会改为使用

```
 plot.hist(...,bins=arange(0,257) - .5,...) 
```

哪个明确地传入 bin 边缘以使用（我推断您的数据是 8 位整数）。这将为您提供 256 个柱，以整数为中心。

出于美学原因，我还会添加`lw=0`以消除每个条形周围的黑色轮廓。

# python - 用numpy、python和open cv2.4迭代多维数组

> ID：14397784
> 
> 赞同：1
> 
> 时间：2013-01-18T11:17:02.283
> 
> 标签：python, opencv, numpy, python-2.7

最近我发布了一个关于这个的问题，但最后我以一种*不优雅的*方式解决了它。

我有 2 个图像是 numpy 数组，我想创建一个新数组迭代 2 个图像。我有3个案例，我做了以下事情：

```
delta= np.empty((h, w, 3),int)
    for z in range (0,3):
      for i in range(0, (h-1)):
        for j in range(0, (w-1)):
         delta[i][j][z]=np.sqrt(((imgLlab[i][j][0]-imgRlab[i][j-disp[i][j]][0])**2) + ((imgLlab[i][j][1]-imgRlab[i][j-disp[i][j]][1])**2) + ((imgLlab[i][j][2]-imgRlab[i][j-disp[i][j]][2])**2) )

delta= np.empty((h, w, 3),int)
    for z in range (0,3):
     for i in range(0, (h-1)):
    for j in range(0, (w-1)):
       delta[i][j][z]=np.sqrt(((imgLlab[i][j][0]-imgRlab[i][j-disp[i][j]][0])**2)  )

for z in range (0,3):
 for i in range(0, (h-1)):
  for j in range(0, (w-1)):
    delta[i][j][z]=np.sqrt(((imgLlab[i][j][1]-imgRlab[i][j-disp[i][j]][1])**2) + ((imgLlab[i][j][2]-imgRlab[i][j-disp[i][j]][2])**2) ) 
```

我不想每次都重复迭代并尽快完成。

有没有另一种方法可以用 numpy 做到这一点？

在 Jaime 帮助之后进行编辑，我已经像这样更改了我的代码：

```
disp= np.hstack([disp, disp, disp]).reshape(h,w,3).astype(np.int)
rows = np.arange(h).reshape(h, 1, 1)
cols = np.arange(w).reshape(1, w, 1)
planes = np.arange(3).reshape(1, 1, 3)
print rows.shape, cols.shape, planes.shape, disp.shape, h
data = imgLlab[rows, cols, planes] - imgRlab[rows ,cols - disp[rows, cols, planes], planes]
data = data**2
data = np.sum(data, axis=-1)
data = np.sqrt(data) 
```

我不得不重塑 dist 因为它没有 imglLab 和 imgRLab 的相同形状，我的意思是 imglLab 是 (288, 384,3) 而 disp 是 (288,384)。此外，如果我打印 disp(288,384,1) 我得到同样的错误，它就像那里没有价值，但尺寸与其他尺寸相同。但是现在这 3 个数组具有相同的维度，我得到一个 indexError: index (384) out of range (0<=index(383) in dimension 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:24:40.410

您可以在代码中改进一些内容。

1.  不要将您的数组索引为`arr[a][b][c]`. 这样做时，您实际上是在创建一个 python 对象`arr[a]`，然后使用它来创建一个新的 python 对象`arr[a][b]`，从中`arr[a][b][c]`构造您想要的对象。如果您使用 numpy 的元组索引作为`arr[a, b, c]`.

2.  不要在不需要时使用循环！代替

    ```
    for j in xrange(len(a)) :
        a[j] = b[j] 
    ```

    你可以做

    ```
    a[:] = b[:] 
    ```

    这实际上是让 numpy 变得很棒的东西，所以使用它！

至于加快你的代码......你应该检查一下`imgLlab.shape`，`imgRlab.shape`并且`disp.shape`都是一样的，`(h, w, 3)`。您的索引错误表明其中一个较小。无论如何，要在我们需要利用[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)和[精美的索引](http://docs.scipy.org/doc/numpy/user/basics.indexing.html)之后获得您的身份。阅读并消化这些链接，否则以下内容将毫无意义：

```
rows = np.arange(h).reshape(h, 1, 1)
cols = np.arange(w).reshape(1, w, 1)
planes = np.arange(3).reshape(1, 1, 3)
data = imgLlab[rows, cols, planes] - \ 
       imgRlab[planes, rows - disp[rows, cols, planes], planes]
# data is of shape (h, w, 3)
data = data**2
# data is of shape (h, w, 3)
data = np.sum(data, axis=-1)
# data is of shape (h, w)
data = np.sqrt(data)
# data is of shape (h, w) 
```

如果您真的想将完全相同的数组复制到数组的三个平面`delta`，您可以这样做：

```
delta[...] = data.reshape(h, w, 1) # equivalent to data.reshape(-1, 1) 
```

这只是您的第一个案例，但是一旦您了解发生了什么，其他案例应该很容易从第一个示例构建。有问题就回来问吧！

# mysql - 在 MySQL 中使用来自 select 的索引创建一个临时表

> ID：14397785
> 
> 赞同：99
> 
> 时间：2013-01-18T11:17:04.303
> 
> 标签：mysql, ddl, temp-tables

我有一个使用临时表的存储函数。出于性能原因，我需要该表中的索引。不幸的是，我不能使用`ALTER TABLE`，因为这会导致隐式提交。

因此，我正在寻找在创建期间添加`INDEX`for的语法。`tempid`任何人都可以提供帮助吗？

```
CREATE TEMPORARY TABLE tmpLivecheck 
(
    tmpid INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY
)
SELECT *
FROM   tblLivecheck_copy
WHERE  tblLivecheck_copy.devId = did; 
```

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2013-09-25T02:29:22.017

我为 CREATE TEMPORARY TABLE SELECT 的正确语法挣扎了很长时间。弄清楚了一些事情后，我想与社区的其他人分享答案。

有关该语句的基本信息可在以下 MySQL 链接中获得：

[创建表选择](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)和[创建表](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)。

有时，解释规范可能会令人生畏。由于大多数人从示例中学习得最好，我将分享我是如何创建工作语句的，以及如何修改它以适合你。

1.  **添加多个索引**

    此语句显示如何添加多个索引（请注意，索引名称 - 小写 - 是可选的）：

    ```
    CREATE TEMPORARY TABLE core.my_tmp_table 
    (INDEX my_index_name (tag, time), UNIQUE my_unique_index_name (order_number))
    SELECT * FROM core.my_big_table
    WHERE my_val = 1 
    ```

2.  **添加一个新的主键**：

    ```
    CREATE TEMPORARY TABLE core.my_tmp_table 
    (PRIMARY KEY my_pkey (order_number),
    INDEX cmpd_key (user_id, time))
    SELECT * FROM core.my_big_table 
    ```

3.  **创建其他列**

    您可以创建一个包含比 SELECT 语句中指定的更多列的新表。在表定义中指定附加列。在表定义中指定但在 select 中未找到的列将是新表中的第一列，然后是 SELECT 语句插入的列。

    ```
    CREATE TEMPORARY TABLE core.my_tmp_table 
    (my_new_id BIGINT NOT NULL AUTO_INCREMENT,  
    PRIMARY KEY my_pkey (my_new_id), INDEX my_unique_index_name (invoice_number))
    SELECT * FROM core.my_big_table 
    ```

4.  **从 SELECT 重新定义列的数据类型**

    您可以重新定义正在选择的列的数据类型。在下面的示例中，列标记是 core.my_big_table 中的 MEDIUMINT，我将其重新定义为 core.my_tmp_table 中的 BIGINT。

    ```
    CREATE TEMPORARY TABLE core.my_tmp_table 
    (tag BIGINT,
    my_time DATETIME,  
    INDEX my_unique_index_name (tag) )
    SELECT * FROM core.my_big_table 
    ```

5.  **创建期间的高级字段定义**

    当您创建一个普通表时，所有常用的列定义都可用。例子：

    ```
    CREATE TEMPORARY TABLE core.my_tmp_table 
    (id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    value BIGINT UNSIGNED NOT NULL DEFAULT 0 UNIQUE,
    location VARCHAR(20) DEFAULT "NEEDS TO BE SET",
    country CHAR(2) DEFAULT "XX" COMMENT "Two-letter country code",  
    INDEX my_index_name (location))
    ENGINE=MyISAM 
    SELECT * FROM core.my_big_table 
    ```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-18T11:50:16.533

我自己找到了答案。我的问题是，我使用两个临时表进行连接，并从第一个表中创建第二个表。但是索引在创建过程中没有被复制......

```
CREATE TEMPORARY TABLE tmpLivecheck (tmpid INTEGER NOT NULL AUTO_INCREMENT, PRIMARY    
KEY(tmpid), INDEX(tmpid))
SELECT * FROM tblLivecheck_copy WHERE tblLivecheck_copy.devId = did;

CREATE TEMPORARY TABLE tmpLiveCheck2 (tmpid INTEGER NOT NULL, PRIMARY KEY(tmpid), 
INDEX(tmpid))  
SELECT * FROM tmpLivecheck; 
```

...解决了我的问题。

问候...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-18T11:30:57.960

```
CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
[(create_definition,...)]
[table_options]
select_statement 
```

例子 ：

```
CREATE TEMPORARY TABLE IF NOT EXISTS mytable
(id int(11) NOT NULL, PRIMARY KEY (id)) ENGINE=MyISAM;
INSERT IGNORE INTO mytable SELECT id FROM table WHERE xyz; 
```

# javascript - Rhino 命令行执行被杀死 - 可能是什么原因/如何调试

> ID：14397787
> 
> 赞同：1
> 
> 时间：2013-01-18T11:17:17.657
> 
> 标签：javascript, command-line, rhino, envjs

我们有一个带有 Rhino + Envjs 和运行 Ubuntu 的 CI 服务器的 Javascript 测试设置。我们使用以下命令从命令行运行我们的测试：

```
java -cp ext/js.jar:ext/jline.jar org.mozilla.javascript.tools.shell.Main -opt -1 -f run.js 
```

现在我们出乎意料地遇到了以下问题：测试运行停止，只打印以下内容：

```
[  Envjs/1.6 (Rhino; U; Linux amd64 3.2.0-33-generic; en-US; rv:1.7.0.rc2) Resig/20070309 PilotFish/1.2.13  ]
Killed 
```

在另一台计算机 (Mac) 上，相同的测试顺利通过。我尝试了调试开关`-debug`和 Java 内存大小`-Xmx1024m`，但这些都没有帮助。

注意：这次重启服务器解决了这个问题。

更新：几天后，今天发生了几次，但是随后的构建成功了。

更新2：这似乎不时发生，有时也在测试成功运行后发生。

这可能只是一个案例，但是如果再次发生这种情况，您是否知道可能是什么原因或如何调试 Rhino？

兄弟，图科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:29:03.800

“Killed”意味着进程被来自外部的信号终止。常见的情况有：

*   有人使用`kill`了错误的进程 ID
*   安装了一个系统资源监视器，它终止占用过多资源的进程。在 Linux 上，使用`ulimit`并询问您的系统管理员。
*   您的操作系统在无法让 Java 知道错误的地方耗尽了内存（即，当操作系统本身需要内存来完成 Java VM 的 I/O 操作时，就会发生这种情况）。

# wpf - WPF DataGrid，使用工具提示在行标题中显示错误

> ID：14397788
> 
> 赞同：2
> 
> 时间：2013-01-18T11:17:20.387
> 
> 标签：wpf, validation, datagrid, tooltip

DataGridRow 的默认样式如下：

```
<Style x:Key="{x:Type DataGridRow}" TargetType="{x:Type DataGridRow}">
  <Setter Property="Background" Value="{DynamicResource {x:Static 
                                      SystemColors.WindowBrushKey}}" />
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="Validation.ErrorTemplate" Value="{x:Null}" />
    <Setter Property="ValidationErrorTemplate">
    <Setter.Value>
      <ControlTemplate>
        <TextBlock Margin="2,0,0,0" VerticalAlignment="Center" 
                                    Foreground="Red" Text="!" />
      </ControlTemplate>
    </Setter.Value>
  </Setter>
  <Setter Property="Template">
      ... 
  </Setter>
</Style> 
```

我想要的是将 ToolTip 添加到显示“！”的 TextBlock 在行标题中，它将从 DataGridRow.Item.Error 属性中获取错误消息（我的实体对象实现了 IDataErrorInfo）。所以我做了以下事情：

```
<TextBlock Margin="2,0,0,0" VerticalAlignment="Center"
                            Foreground="Red" Text="!"
           ToolTip="{Binding RelativeSource={
                             RelativeSource FindAncestor,
                             AncestorType={x:Type DataGridRow}},
                             Path=Item.Error}"/> 
```

到现在为止还挺好。现在，Error 属性返回多行字符串，所以我想将 TextBlock 用于 ToolTip：

```
<TextBlock Margin="2,0,0,0" VerticalAlignment="Center"
                            Foreground="Red" Text="!">
  <TextBlock.ToolTip >
    <TextBlock Text="{Binding RelativeSource={
                              RelativeSource FindAncestor,
                              AncestorType={x:Type DataGridRow}},
                              Path=Item.Error}"
               TextWrapping="Wrap"/>
  </TextBlock.ToolTip>
</TextBlock> 
```

但以上不会显示错误信息；问题似乎是 ToolTip 不是父元素的可视化树的一部分。我读过 PlacementTarget 等，但仍然无法完成工作。有人可以告诉我执行上述操作的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:48:27.660

I think the problem is to bind to relative source of the given element's property (PlacementTarget), not the element itself. But RelativeSource markup extension describes the location of the binding source relative to the given element. So, what I did was to set PlacementTarget to the ancestor of original tooltip target:

```
<Setter Property="ValidationErrorTemplate">
  <Setter.Value>
    <ControlTemplate>
      <TextBlock Margin="2,0,0,0" VerticalAlignment="Center"
                 HorizontalAlignment="Center"
                 TextAlignment="Center"
                 Foreground="Red" Text="!"
                 ToolTipService.PlacementTarget="{Binding RelativeSource={
                              RelativeSource FindAncestor,
                              AncestorType={x:Type DataGridRow}}}">
        <TextBlock.ToolTip >
          <ToolTip DataContext="{Binding Path=PlacementTarget, 
                   RelativeSource={x:Static RelativeSource.Self}}">
            <TextBlock Text="{Binding Path=Item.Error}"/>
          </ToolTip>
        </TextBlock.ToolTip>
      </TextBlock>
    </ControlTemplate>
  </Setter.Value>
</Setter> 
```

Now it works as I wanted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:55:05.393

使用该文本块中的祖先级别，如下所示

```
 <TextBlock Text="{Binding RelativeSource={
                          RelativeSource FindAncestor,
                          AncestorType={x:Type DataGridRow},AncestorLevel=1},
                          Path=Item.Error}"
           TextWrapping="Wrap"/> 
```

# internet-explorer - 为什么这个 GWT 代码会在 ie9 上泄漏内存（但不是 ie8 或 ie10）

> ID：14397791
> 
> 赞同：0
> 
> 时间：2013-01-18T11:17:25.680
> 
> 标签：internet-explorer, gwt, memory-leaks

我们在 Windows 7、ie9（但不是 ie8 或 ie10）和 gwt 2.5 中遇到了这个问题。

我们将问题归结为以下非常小的代码示例，它不进行 dom 操作，也不对返回的数据做任何事情，它只是一个 rpc 调用，返回一个从计时器调用的字符串。

泄漏的大小与从 Rpc 调用返回的字符串的大小成正比。返回一个非常大的字符串可以在几分钟内发送超过 1Gb 的 9 个内存使用量！出于显而易见的原因，32 位 ie 达到 2Gb 的峰值，但 64 位 ie9 吃掉了系统中的所有内存。

这是代码： -

```
public class TestLeak implements EntryPoint
{
    /**
     * Create a remote service proxy to talk to the server-side Greeting service.
     */
    private final GreetingServiceAsync greetingService = GWT.create(GreetingService.class);

    private static final int REFRESH_RATE_MS = 100;
    private Timer refreshTimer = null;

    /**
     * This is the entry point method.
     */
    public void onModuleLoad()
    {
        refreshTimer = new Timer()
        {

            @Override
            public void run()
            {
                makeRPCCall();

            }
        };
        refreshTimer.schedule(REFRESH_RATE_MS);
    }

    public void makeRPCCall()
    {
        greetingService.greetServer("Data", new AsyncCallback<String>()
        {
            public void onFailure(Throwable caught)
            {
            }

            public void onSuccess(String result)
            {
                refreshTimer.schedule(REFRESH_RATE_MS);
            }
        });

    }
} 
```

# git - 通过文件服务器镜像存储库

> ID：14397794
> 
> 赞同：3
> 
> 时间：2013-01-18T11:17:33.883
> 
> 标签：git, svn, version-control, mercurial, dropbox-api

是否可以通过将更改发布到“哑”文件服务器并在另一端重新组装它们来镜像存储库（在您选择的 SVN、Git、Hg 等中）？

![流程示意图](../Images/278e4b9f1ca062f1182421b411fc1f63.png)

可能的担忧包括

*   处理移动/重命名/删除的文件
*   二进制文件
*   空目录

例如，我理解`svn diff > r1.patch`意味着您丢失了二进制文件，因为 SVN 不打算包含它们。

*注意：这并不是在文件服务器上放置一个存储库（除非有一种方法可以在不上传整个存储库文件的情况下做到这一点），因为我们正在尝试最小化带宽。此外，存储差异而不是存储库意味着可以进行加密。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:28:24.270

是的，有可能

## 颠覆

*   从修订版 N ( `svn diff -c N --git PATH > PATCH.N`) 制作 git-patch；
*   存储补丁；
*   在另一侧应用补丁 ( `svn patch PATCH.N <WCPATH>`);

## 水银

*单一变更集交换*（对合并集也不利）

*   将变更集 N 导出为补丁 ( `hg export -g -r N -o %b-%r.patch`) (-o 带有文件名，用于一个目录中的多存储库)；
*   存储补丁；
*   在另一侧应用补丁 ( `hg import --exact -s 100 FILENAME.patch`)。

*范围集交换*

**捆**

*   捆绑范围 N:M ( `hg bundle --base parent(N) --rev N::M N-M.hg`);
*   存储补丁；
*   在另一侧应用补丁 ( `hg unbundle -u N-M.hg`)。

**出口**

*   将范围集 N:M 导出为补丁 ( `hg export -o %b-%r.patch -r N::M`)（文件名为“repobasebame-revno.patch”的补丁集）；
*   存储补丁；
*   相应地（从最少到最多）在另一侧应用补丁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:46:56.627

因为`git`有`bundle`命令。它创建给定修订的二进制存档。您可以在每次提交的基础上或成组地将任何历史记录放入包中，复制到文件服务器，然后恢复回存储库。

`git bundle create file.name revisions..list`- 用于创建捆绑包的命令。

`git bundle unbundle file.name`— 恢复修订的命令。

明确地，您应该为您的捆绑包按时间顺序命名，以免混淆它们。

它适用于`git`并且据我所知，`hg`它也有`bundle`命令。这就是你绘制它的方法。

另一种方法可能只是`init`在您的 Dropbox 文件夹中新建中间存储库，然后将您的提交从主存储库推送到那里，然后让 Dropbox 将其与镜像同步。然而，在这种情况下，只有在 Dropbox 同步完成后才能将镜像存储库拉入。否则数据可能不一致，因为 git 使用大量小文件来保存存储库内容。可以通过打包存储库内容来避免这种行为。但是，如果您为了安全起见，捆绑方法将最适合您...

**编辑**：关于`svn`我最近得到了另一个线索。如果您可以使用标准备份方法`git`来`hg`实现您的需要，为什么您可以尝试本[问答](https://stackoverflow.com/questions/33055/what-is-the-best-way-to-backup-subversion-repositories)`svn`中描述的标准备份方法？

`svnadmin dump repositorypath -r LO_REV:HI_REV > backupname.svn`备份修订。

`svnadmin load repositorypath < backupname.svn`恢复数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:10:06.257

您是否有任何理由不只是使用像 github 这样的存储库托管程序？这将最小化带宽，因为 git 只推送差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T01:07:39.343

git 本身在发送所需的差异方面做得很好，所以根本不需要。对于 mercurial (hg) 也是如此，如果 bzr 没有，我会感到*非常惊讶。*显然，像 svn 或 cvs 这样的集中式 VCS 不会。仅当存在其他限制时，您将文件传送到文件服务器才有意义（如果有，我们需要了解它们才能真正提供帮助）。

您也可以使用 rsync(1) 复制存储库，但在这种情况下，您不能指望 VCS 确保没有人看到半更新的内容，如果您这样做，请务必小心*。*通常（bzr 除外）您可以在其他地方备份和恢复存储库，它应该可以正常工作。

在任何情况下，**永远不要**盲目相信隐藏在有缺失位的彩色方块后面的人告诉你的内容......检查自己，阅读文档，寻找推荐的做法，并进行一些实验。

# mysql - 在 mysql 语句中返回 null 或空字符串

> ID：14397802
> 
> 赞同：0
> 
> 时间：2013-01-18T11:17:46.567
> 
> 标签：mysql, select, null

我需要对其运行查询的表具有可以具有 NULL 值、空字符串或某些文本、数字等的字段。

因此，例如，我有一个表“数据”，其中包含字段 id、field1、field2、field3、field4。

id 是自动递增的键，因此它将有一个值，但其他三个字段可以具有上述任何实例。

所以查询表的结果可能是 id=1, field1=NULL, field2='', field3='some text', field4='5'。

如何在 SELECT 语句中为每个为 NULL 的字段返回一个空字符串？

谢谢！

[**附加信息**]

在我已经收到一些回复之前我忘了提及这一点，所以我不确定它是否会改变答案。

此外，表中的某些字段是来自另一个表的 ID，因此我正在执行内部联接，但“数据”表中的 id 字段中可能有也可能没有值。

使用上面的“数据”表，如果 field4 是 5（而不是上面最初定义的“5”）并且是表“名称”的 id，我会有一个看起来像这样的连接：

```
INNER JOIN name n ON n.id = data.field4 
```

我相信是连接阻止了某些行在我的结果集中返回。我该如何处理？

如果有人已经回答，谢谢和抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:21:06.317

使用[IFNULL](http://www.w3schools.com/sql/sql_isnull.asp)

```
SELECT id, IFNULL(field1,''), IFNULL(field2,''), IFNULL(field3,'')
FROM data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:09:34.330

LEFT JOIN - 这就是答案。

我刚刚将我的 INNER JOINS 更改为 LEFT JOINS，现在我得到了所有行，包括 id 字段为空的行。

当然，我在原始问题中“ **[附加信息] ”****之前**提供的信息并不是全部。对不起，伙计们，我的错。Salil 根据我最初提供的信息正确回答。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:19:45.873

```
SELECT id, COALESCE(field1,''), COALESCE(field2,''), COALESCE(field3,'')
FROM   data 
```**

# ios - 在基于 Titanium 的 iOS 应用程序中实现设置

> ID：14397806
> 
> 赞同：0
> 
> 时间：2013-01-18T11:18:00.290
> 
> 标签：ios, titanium, titanium-mobile, appsettings

我目前正在开发基于 Titanium 的 iOS 应用程序。

我想在设置应用程序中显示应用程序设置。

![设置](../Images/a85a445c9c772d84e44c5d2ba57b2779.png)

在 iOS 中，我们可以使用 info.plist 轻松完成。

无论如何在 Titanium 中可以做到这一点？

我搜索了很多，但找不到任何解决方案。

请帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:20:07.023

看看厨房水槽的例子，它展示了如何做到这一点

[http://developer.appcelerator.com/question/50131/gettings-app-properties-into-iphone-settings-app](http://developer.appcelerator.com/question/50131/gettings-app-properties-into-iphone-settings-app)

# iphone - 在 iphone 中点击图标时的 Iphone 崩溃日志

> ID：14397809
> 
> 赞同：0
> 
> 时间：2013-01-18T11:18:05.163
> 
> 标签：iphone, ios

我在某些设备 iphone 4 和 iphone 4S 上点击手机上的应用程序图标时发生了崩溃。在某些手机中，相同的 ipa 文件可以正常工作。

iPhone 4：- ios 0.6.1 iphone 4S：- ios 0.6.1

iphone 4s 的崩溃日志是：-

```
Incident Identifier: 51DF8CE5-B5AE-4EE3-912E-E6943C29DAA9
CrashReporter Key:   c7b543a8de5c8cb54f577694dd9badeabba8d4a1
Hardware Model:      iPhone4,1
Process:         CallEmergency [23705]
Path:            /var/mobile/Applications/153DBCAD-1500-46F8-901D-4690E47106AA/CallEmergency.app/CallEmergency
Identifier:      CallEmergency
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-18 15:51:54.212 +1100
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
(0x3937129e 0x3326097a 0x392bcb70 0xe68d6 0x3416ca6a 0x393465da 0x3934628c 0x39344efc 0x392b7eb8 0x392b7d44 0x376852e6 0x324f72f4 0xe0486 0xe0414)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x31067350 0x31056000 + 70480
1   libsystem_c.dylib               0x343f611e 0x343c7000 + 192798
2   libsystem_c.dylib               0x3443296e 0x343c7000 + 440686
3   libc++abi.dylib                 0x37552d4a 0x3754f000 + 15690
4   libc++abi.dylib                 0x3754fff4 0x3754f000 + 4084
5   libobjc.A.dylib                 0x33260a74 0x33258000 + 35444
6   libc++abi.dylib                 0x37550078 0x3754f000 + 4216
7   libc++abi.dylib                 0x37550110 0x3754f000 + 4368
8   libc++abi.dylib                 0x37551594 0x3754f000 + 9620
9   libobjc.A.dylib                 0x332609cc 0x33258000 + 35276
10  CoreFoundation                  0x392b7f1c 0x392af000 + 36636
11  CoreFoundation                  0x392b7d44 0x392af000 + 36164
12  GraphicsServices                0x376852e6 0x37680000 + 21222
13  UIKit                           0x324f72f4 0x324a0000 + 357108
14  CallEmergency                   0x000e0486 0xdf000 + 5254
15  CallEmergency                   0x000e0414 0xdf000 + 5140

Thread 1:
0   libsystem_kernel.dylib          0x31067d98 0x31056000 + 73112
1   libsystem_c.dylib               0x343cdcf6 0x343c7000 + 27894
2   libsystem_c.dylib               0x343cda12 0x343c7000 + 27154
3   libsystem_c.dylib               0x343cd8a0 0x343c7000 + 26784

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x31057648 0x31056000 + 5704
1   libdispatch.dylib               0x3766a974 0x37662000 + 35188
2   libdispatch.dylib               0x3766a654 0x37662000 + 34388

Thread 3:
0   libsystem_kernel.dylib          0x31067d98 0x31056000 + 73112
1   libsystem_c.dylib               0x343cdcf6 0x343c7000 + 27894
2   libsystem_c.dylib               0x343cda12 0x343c7000 + 27154
3   libsystem_c.dylib               0x343cd8a0 0x343c7000 + 26784

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x31056eb4 0x31056000 + 3764
1   libsystem_kernel.dylib          0x31057048 0x31056000 + 4168
2   CoreFoundation                  0x39346040 0x392af000 + 618560
3   CoreFoundation                  0x39344d9e 0x392af000 + 613790
4   CoreFoundation                  0x392b7eb8 0x392af000 + 36536
5   CoreFoundation                  0x392b7d44 0x392af000 + 36164
6   WebCore                         0x34f96a40 0x34f8c000 + 43584
7   libsystem_c.dylib               0x343d830e 0x343c7000 + 70414
8   libsystem_c.dylib               0x343d81d4 0x343c7000 + 70100

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3a349534
    r4: 0x00000006    r5: 0x3a349b88      r6: 0x1ed9e274      r7: 0x2fd21a24
    r8: 0x1ed9e250    r9: 0x00000300     r10: 0x00120364     r11: 0x0012035c
    ip: 0x00000148    sp: 0x2fd21a18      lr: 0x343f6123      pc: 0x31067350
  cpsr: 0x00000010

Binary Images:
   0xdf000 -   0x112fff +CallEmergency armv7  <cb030730c7893c0abd86c3050d2431b6> /var/mobile/Applications/153DBCAD-1500-46F8-901D-4690E47106AA/CallEmergency.app/CallEmergency
0x2feee000 - 0x2ff0efff  dyld armv7  <75594988728831d98e1f7c4c7b7ca29d> /usr/lib/dyld
0x30988000 - 0x3098dfff  IOMobileFramebuffer armv7  <3a351ca1d4ae3146a787f3e13564294b> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x30a65000 - 0x30a6afff  liblaunch.dylib armv7  <021ff140d6003f3281dfa29b79fa9e6e> /usr/lib/system/liblaunch.dylib
0x30a6b000 - 0x30bbbfff  MusicLibrary armv7  <2010302aff03397d97f7f91b446ec661> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x30bef000 - 0x30bfbfff  libz.1.dylib armv7  <a3bba3842596315a81aa171a8bbda7b5> /usr/lib/libz.1.dylib
0x30ce6000 - 0x30d21fff  AppSupport armv7  <74ed50d2f7d23ce696b029dd817749c0> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x30d22000 - 0x30d87fff  CoreMedia armv7  <28a1fe1e729d37e0bb623201b2652a45> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x30dd0000 - 0x30ddafff  MailServices armv7  <f31a7844317a3f2484cffe092e9fd7c2> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x31056000 - 0x3106cfff  libsystem_kernel.dylib armv7  <4c2862d2e8f23119bfe114b0662c6241> /usr/lib/system/libsystem_kernel.dylib
0x312df000 - 0x312dffff  vecLib armv7  <66204595f7653ef29e5e26cb8629177a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x31369000 - 0x3137afff  libvMisc.dylib armv7  <a3d025234d1a3880a0e5f87879633ee0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x3137c000 - 0x3139ffff  MobileSync armv7  <986186369add34f1be231f5a47d2fd2c> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x313c6000 - 0x3159efff  ImageIO armv7  <fdfa8aa6307235b29435e5c8f6bc9819> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x316d2000 - 0x3171efff  QuickLook armv7  <9f69026f4b7837429b824a115eeef615> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x3171f000 - 0x31857fff  CoreGraphics armv7  <903960bfcfe93adb943752851f88491e> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x31869000 - 0x31a02fff  MediaPlayer armv7  <b283f42b49793e61b25341fea2830ff5> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x31a2d000 - 0x31a34fff  liblockdown.dylib armv7  <257ecb171a363e4298a63f72d7fffea2> /usr/lib/liblockdown.dylib
0x31a53000 - 0x31a5afff  libsystem_notify.dylib armv7  <6e39f8511ecc3c3489829714eb6fde12> /usr/lib/system/libsystem_notify.dylib
0x31a5d000 - 0x31afdfff  UIFoundation armv7  <795a2f216cc3379c95eb645c633cc527> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x31afe000 - 0x31b01fff  ActorKit armv7  <64235ea1a8b73d23a4a9836410424b6b> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x31b18000 - 0x31b57fff  SystemConfiguration armv7  <44d84d23d10f344c90b4d9e9611ec976> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x31b58000 - 0x31b7cfff  Bom armv7  <c76b4156e0463ecb922608d44c126d86> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x31b7f000 - 0x31b7ffff  libSystem.B.dylib armv7  <f2cad3bd15f63f448a9c5be732c65819> /usr/lib/libSystem.B.dylib
0x31bbd000 - 0x31bc1fff  FTClientServices armv7  <2cf901e7aedb3f3b9ea08b465f0e5d14> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x31c52000 - 0x31c8ffff  libGLImage.dylib armv7  <7db25f3d55b93f31868e37326fba1e57> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x323ba000 - 0x3243ffff  libsqlite3.dylib armv7  <759ca29f533a33e88a81fddc3364bf19> /usr/lib/libsqlite3.dylib
0x324a0000 - 0x329f3fff  UIKit armv7  <4f85b22a1eb73af08641066b29c4edb2> /System/Library/Frameworks/UIKit.framework/UIKit
0x329f4000 - 0x32a68fff  ProofReader armv7  <cc89a352199a393ba0e46af69e670ef9> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x32a93000 - 0x32acdfff  iTunesStore armv7  <90c74a32628d3905aa224948b4d52bcf> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x32ace000 - 0x32bbbfff  libiconv.2.dylib armv7  <faa5abb937e3306ab87c7f7c38315839> /usr/lib/libiconv.2.dylib
0x32d56000 - 0x32d6bfff  libxpc.dylib armv7  <9fbb123276823c2383fc34b7a55404d7> /usr/lib/system/libxpc.dylib
0x32d6c000 - 0x32daafff  VideoToolbox armv7  <250b8df69b3c3f929f30463d218b7462> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x32dab000 - 0x32dadfff  OAuth armv7  <d3e2bc9ae64b31f0a89c52dc1c2797fc> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x32dfc000 - 0x32ea7fff  MediaControlSender armv7  <fba51e235adc368b8132db578723a8fa> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x32ed9000 - 0x32fb1fff  StoreServices armv7  <49ff779e3e783e7ca6b56b5788c2c119> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x32fd7000 - 0x32fdafff  MobileSystemServices armv7  <6edd9c74c5a73c33809152446abe1538> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x32fdb000 - 0x330c1fff  AVFoundation armv7  <d3f2b9d750c83e818c39cbb5ed609244> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x331e8000 - 0x331e9fff  libsystem_sandbox.dylib armv7  <46cd200d99323aebbf6d81e5fb16424f> /usr/lib/system/libsystem_sandbox.dylib
0x331fb000 - 0x33208fff  ApplePushService armv7  <420684556cd430b09a6d9ec6d328d53d> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x33209000 - 0x33246fff  FTServices armv7  <754c08bad5333c0a9cd49db9bfa2e75f> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x33258000 - 0x33356fff  libobjc.A.dylib armv7  <5224e803eca737a4b2c6451d136b3d28> /usr/lib/libobjc.A.dylib
0x33367000 - 0x33380fff  Notes armv7  <b8fb864f5973319083f926d9a570734e> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x333d7000 - 0x333e3fff  libbsm.0.dylib armv7  <e98708fbfa683df2a91d45dc765071a7> /usr/lib/libbsm.0.dylib
0x333e4000 - 0x33669fff  MediaToolbox armv7  <e8b0007c7e3c3275a5c1fe8ce98839d1> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x3366a000 - 0x336ccfff  CoreText armv7  <4a0bece315e9316fa1aa1b5923740f55> /System/Library/Frameworks/CoreText.framework/CoreText
0x336d3000 - 0x336eafff  BackBoardServices armv7  <a5570d37cd3f30cbb9572a9cdb824126> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x33722000 - 0x337d7fff  CoreImage armv7  <ad658acd554a386fb81bb137a237b5f4> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x337ee000 - 0x338a7fff  Message armv7  <2979dbe859f6313f983b1737bff8214c> /System/Library/PrivateFrameworks/Message.framework/Message
0x338ae000 - 0x3399dfff  GeoServices armv7  <60e2738ccb9635e9874907d54ea27b68> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x339c6000 - 0x339f4fff  Security armv7  <fb75984442a435cd84aac722142d5a44> /System/Library/Frameworks/Security.framework/Security
0x339f5000 - 0x339f5fff  Accelerate armv7  <22bee3e96cbc3538bfc50ca5be618cc0> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x339fa000 - 0x339fafff  libgcc_s.1.dylib armv7  <b25697291f6237feb3458df23485a759> /usr/lib/libgcc_s.1.dylib
0x33a68000 - 0x33aa4fff  DataAccess armv7  <0bf16fd4f4bd37efbb1a3617750a0dbb> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x33aaa000 - 0x33ad0fff  libtidy.A.dylib armv7  <134c41c587fb33dca014bd525f68a0c7> /usr/lib/libtidy.A.dylib
0x33b80000 - 0x33b9ffff  WebBookmarks armv7  <ed705f425035329d96ede473f023ed84> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x33ba0000 - 0x33bf5fff  CoreTelephony armv7  <e5b7289acd1231acb950569a81c10ac1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33c6c000 - 0x33c6ffff  libmacho.dylib armv7  <2a9fe0b48f473d0f8fe2bf076cd12753> /usr/lib/system/libmacho.dylib
0x33fb8000 - 0x34011fff  libvDSP.dylib armv7  <ad4c53081a263f0d96f63b9a80f2ae91> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x34012000 - 0x34023fff  SpringBoardServices armv7  <8b9821bc87ba354297392cb50da7be58> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x340c4000 - 0x34287fff  Foundation armv7  <2e1ac190c4f837e2a1059043dd7b1c63> /System/Library/Frameworks/Foundation.framework/Foundation
0x34295000 - 0x342e1fff  IMFoundation armv7  <fd1c50ba98f9307f8b06d074aed412b0> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x342fc000 - 0x343c6fff  Celestial armv7  <bf58f2db2e333ea18da2f7abd0d89ae6> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x343c7000 - 0x3444dfff  libsystem_c.dylib armv7  <d45dc8901531343caf9b7e703d3eba50> /usr/lib/system/libsystem_c.dylib
0x344f0000 - 0x345a3fff  EventKit armv7  <b5a1d18f2ced31bfb385952f4c390ea4> /System/Library/Frameworks/EventKit.framework/EventKit
0x34904000 - 0x34ab9fff  CoreData armv7  <a42aa4f0f01833c390bc8c6c394dda1c> /System/Library/Frameworks/CoreData.framework/CoreData
0x34bff000 - 0x34e85fff  AudioToolbox armv7  <6a4804d0e35e362dbad6f047c25227ca> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x34e86000 - 0x34eabfff  OpenCL armv7  <f7e2cb8404653022bf5cdea17bc5d06f> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x34ee3000 - 0x34f1efff  libCGFreetype.A.dylib armv7  <bc5b8d4a10863ce192acf26428e68da7> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x34f76000 - 0x34f8bfff  libmis.dylib armv7  <3afeeea531013420af75315d8d6dd332> /usr/lib/libmis.dylib
0x34f8c000 - 0x358bbfff  WebCore armv7  <29cc251f63fe3a9eb16e96742b88ac4f> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x358c4000 - 0x358c6fff  MessageSupport armv7  <44d449b4959a33b99d4ab4a9cd161ee6> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x358f2000 - 0x3594bfff  MobileCoreServices armv7  <d831f1f9285535acac5035a29d84aaaf> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x35a44000 - 0x35acbfff  CoreMotion armv7  <a3df71772fe1315aa6d176cac1ac48e2> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x35acc000 - 0x35ad0fff  IOSurface armv7  <959e67366a553eca85e6ccfa2d668366> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35b25000 - 0x35b28fff  AggregateDictionary armv7  <df4096b1cdc5335790db9a2a51e6b029> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x35b29000 - 0x35b2cfff  libcache.dylib armv7  <e08b913e17753180b91728a8bd5dda7b> /usr/lib/system/libcache.dylib
0x35b41000 - 0x35b50fff  MobileDeviceLink armv7  <5c91ef875c5931a1a26e227ddfd7262d> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x35d77000 - 0x35e8cfff  QuartzCore armv7  <d96571a6986c3012b315cb860f4d65ca> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x35e8d000 - 0x35e9bfff  libsystem_network.dylib armv7  <d0fb0eda6cb53a4da859d598c59e7522> /usr/lib/system/libsystem_network.dylib
0x35edd000 - 0x35ef5fff  EAP8021X armv7  <c3678853424030f9a2e410c5488aea5f> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x35f29000 - 0x35f44fff  libRIP.A.dylib armv7  <51845c89677f3e77aeb221c44bda48f1> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x35f6d000 - 0x35f72fff  CrashReporterSupport armv7  <7bde3532f2953f3894eb725379575926> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x360f7000 - 0x36100fff  libbz2.1.0.dylib armv7  <5258dce78afc3fd7934a5674b92ad785> /usr/lib/libbz2.1.0.dylib
0x3610d000 - 0x36119fff  libMobileGestalt.dylib armv7  <0338ce49444332ec88cfc45c624bb39b> /usr/lib/libMobileGestalt.dylib
0x3611c000 - 0x36122fff  libAccessibility.dylib armv7  <9e8bfe02e370375ea8439ab895528982> /usr/lib/libAccessibility.dylib
0x3613a000 - 0x36143fff  MobileWiFi armv7  <43de6d03af0838f2a1eeec10d4149e9d> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x3614a000 - 0x3622dfff  libBLAS.dylib armv7  <56d8e00447133cd89457deec007327cb> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x3622e000 - 0x36241fff  AirTraffic armv7  <050ad0f6ad67391d9ff4ac52b3989981> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x36363000 - 0x36369fff  libcommonCrypto.dylib armv7  <690aaa493b5c3f9582499f174adf4964> /usr/lib/system/libcommonCrypto.dylib
0x3636a000 - 0x363c2fff  CoreLocation armv7  <7bca9c29b3d23f61ba0e28af9e8ee357> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x363c3000 - 0x363cafff  OpenGLES armv7  <e035b741746c316dba8f1e59a568bf17> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x363f8000 - 0x363fafff  libcompiler_rt.dylib armv7  <7add7c91a2673641b0c5f0433a203da6> /usr/lib/system/libcompiler_rt.dylib
0x364cf000 - 0x36505fff  MIME armv7  <32427c81a9933c4796d1a37a88a3ac44> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x36506000 - 0x36523fff  PersistentConnection armv7  <cd76b3fcb0db3922ad62f547ab2e55fb> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x36539000 - 0x36559fff  libxslt.1.dylib armv7  <7f6f63b31f333c41952f685fdd54a6cb> /usr/lib/libxslt.1.dylib
0x3655e000 - 0x365c2fff  AddressBook armv7  <bdf14ca2b4fb32e5bdb2a9fafb460f09> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x365c3000 - 0x365c4fff  libremovefile.dylib armv7  <6a0dd04f0710329b9c1722db2235f5c3> /usr/lib/system/libremovefile.dylib
0x365c5000 - 0x3660efff  IOKit armv7  <635953fdb81237e991ab57ccff92e97d> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x3663a000 - 0x3663bfff  DataMigration armv7  <25f8874067393208acc083124bc3eb86> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x36655000 - 0x36685fff  ContentIndex armv7  <25cc27c7fdac34e6ae5e057c048a3e21> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x36686000 - 0x36686fff  libCVMSPluginSupport.dylib armv7  <1fd63e8305ab3ca190b1ef6ab2555f9d> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x36687000 - 0x36688fff  CoreSurface armv7  <aa216ca3e2e0381ea8cf9abbd6f430f4> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x3688b000 - 0x36890fff  CommonUtilities armv7  <cb484bdaf5003e4baa13f83bafff62a9> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x368d9000 - 0x36a7ffff  JavaScriptCore armv7  <8171afa18a08371c89cab6c9d823d1c5> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x36a80000 - 0x36a89fff  MediaRemote armv7  <dbc251adcad43e72a31427f836a060cd> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x36a97000 - 0x36ae2fff  libstdc++.6.dylib armv7  <55a7612b28c43cfcad7089b688591b80> /usr/lib/libstdc++.6.dylib
0x36ae9000 - 0x36aeefff  libcopyfile.dylib armv7  <15aa2c3c8d523273913d4fc6717d3b7c> /usr/lib/system/libcopyfile.dylib
0x36b22000 - 0x36b23fff  libdyld.dylib armv7  <3a149b4730663b1ea84e4a0a68ccc689> /usr/lib/system/libdyld.dylib
0x36b24000 - 0x36b5ffff  iCalendar armv7  <d5f593ead35b38a98d6cfd4a243e0172> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x36b63000 - 0x36b6dfff  IAP armv7  <6703a23c7d263f33992f15c7f407b50a> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x36bac000 - 0x36bb3fff  XPCObjects armv7  <5bc4f7282e9d3945a6c1885217670667> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x36dde000 - 0x36e11fff  AppleAccount armv7  <2af09d814a5a382192613b68b9327d49> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x36e38000 - 0x36efdfff  CFNetwork armv7  <3e973794a4d13428bb974edcb2027139> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36f34000 - 0x36fb9fff  MessageUI armv7  <8a69ee961ad135b78152a45d31a2fc8e> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x36fba000 - 0x36fd0fff  libCRFSuite.dylib armv7  <9b3fd56781103f209be2c43e48c1efc9> /usr/lib/libCRFSuite.dylib
0x36fd1000 - 0x36fd8fff  CaptiveNetwork armv7  <c1a469c6ca4a3718bef325ec0f4e1885> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x3702d000 - 0x370e7fff  AddressBookUI armv7  <3da0ecfaea4937148cd365af1d7515c2> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x37177000 - 0x37177fff  libkeymgr.dylib armv7  <8a2e3a8fdf9335e2867a33e2d1a9baf8> /usr/lib/system/libkeymgr.dylib
0x371b2000 - 0x371cafff  libsystem_info.dylib armv7  <be3d5625aed733ffb2d53400655fe110> /usr/lib/system/libsystem_info.dylib
0x371cb000 - 0x371ccfff  libdnsinfo.dylib armv7  <6c912cedc1e938ad914dfce91a529b68> /usr/lib/system/libdnsinfo.dylib
0x371cd000 - 0x371d1fff  CertUI armv7  <7e4aee03dc3735559f1270e504d94f02> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x371d2000 - 0x371d5fff  MobileInstallation armv7  <e6b6ae9d4f5f3831a40fcc370afc1429> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x37204000 - 0x37211fff  TelephonyUtilities armv7  <19dbc34167323bca9510012b926d8cf7> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x37277000 - 0x372cdfff  CoreAudio armv7  <a3a2eb3a29443b42a23aa8ecb1232846> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x372e0000 - 0x37308fff  PrintKit armv7  <a8ef6136b9773d42ac20f7eb54279039> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x373c2000 - 0x373cefff  GenerationalStorage armv7  <74d50f4c8d243a35ad3ae89d85f2793a> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x373cf000 - 0x373e8fff  DictionaryServices armv7  <e1f8d258d02c344cb0d17cec31818d3f> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x37424000 - 0x37430fff  AccountSettings armv7  <0b7524e9a8ef36bf9e9f6a5c445478af> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x37502000 - 0x37513fff  Accounts armv7  <07b95faa96e73ffeb52694cbad7f3528> /System/Library/Frameworks/Accounts.framework/Accounts
0x37519000 - 0x3754efff  libcorecrypto.dylib armv7  <ebd023957d853fa8bd35309592e92dac> /usr/lib/system/libcorecrypto.dylib
0x3754f000 - 0x37562fff  libc++abi.dylib armv7  <c5a5f03138353747b539e620ef2bb5c0> /usr/lib/libc++abi.dylib
0x375c0000 - 0x375c2fff  TCC armv7  <f641dd0500fa3f0087d93da665ea84b8> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x375c6000 - 0x375dbfff  libresolv.9.dylib armv7  <e79b59a3406f34d9b37f8085955115ce> /usr/lib/libresolv.9.dylib
0x37662000 - 0x3767ffff  libdispatch.dylib armv7  <4abccf75caf33fa5a0c6037b2e1c5f41> /usr/lib/system/libdispatch.dylib
0x37680000 - 0x3768bfff  GraphicsServices armv7  <c5879083e8693aba827c78a32abe2391> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x376eb000 - 0x376f3fff  ProtocolBuffer armv7  <359ccc7700c93d58adbbd74ecfda80d9> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x37700000 - 0x3771cfff  libsystem_m.dylib armv7  <7b2a25c750063de480f6a691f716b9d7> /usr/lib/system/libsystem_m.dylib
0x3771d000 - 0x3772ffff  DataAccessExpress armv7  <000fb77814ee3ca0841e14bbba48867d> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x37997000 - 0x37997fff  liblangid.dylib armv7  <a04b639c18593885bd81bfa623a6f07c> /usr/lib/liblangid.dylib
0x379ca000 - 0x379d3fff  AssetsLibraryServices armv7  <e51cbfefefbc30b6b47d99739123033e> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x379d4000 - 0x379d4fff  libsystem_blocks.dylib armv7  <993c9bfe8bf031548b9ddba63cc17015> /usr/lib/system/libsystem_blocks.dylib
0x37de3000 - 0x37de9fff  MobileKeyBag armv7  <a81d768a49cf37a1a111594d39cea3fe> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x37dfb000 - 0x37e01fff  libsystem_dnssd.dylib armv7  <6c1c1aaf9a3537d7ada4b519d14da7ab> /usr/lib/system/libsystem_dnssd.dylib
0x38550000 - 0x385a8fff  ManagedConfiguration armv7  <fa250e174ca43d3c93a61e41f0df9771> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x3860c000 - 0x38610fff  libGFXShared.dylib armv7  <6a8f59f89218372d9f24c4193a179008> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x38639000 - 0x3863afff  IOAccelerator armv7  <de8af6be681832008d180d7424d55f0d> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x3864b000 - 0x386f8fff  libxml2.2.dylib armv7  <ef245c0afc113f54b6f30921671edab2> /usr/lib/libxml2.2.dylib
0x38848000 - 0x388c5fff  HomeSharing armv7  <50bd2fe02665322695fbab9f2693bcd7> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x38a25000 - 0x38a6ffff  libc++.1.dylib armv7  <a361a382693032b9bdfb2860033b3024> /usr/lib/libc++.1.dylib
0x38e25000 - 0x38f63fff  vImage armv7  <a7fd7fcd7041356db2ca297402ab6e8c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x38f64000 - 0x38f73fff  CoreVideo armv7  <092f3aa965803a1aaea69af2ac5143f5> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x38f74000 - 0x38f79fff  Marco armv7  <19d5931d02523a459c75954d3d517e72> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x390a2000 - 0x391ebfff  libicucore.A.dylib armv7  <0253932c1b9038a0849ef73c38e076ca> /usr/lib/libicucore.A.dylib
0x391ee000 - 0x39266fff  IMCore armv7  <38d8b5270ff636f1b6640fe5adee05a3> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x39282000 - 0x39284fff  libCoreVMClient.dylib armv7  <4fd03b13dbfe32628adc789367f48ce1> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x392af000 - 0x393e1fff  CoreFoundation armv7  <e30fc309df7b3c9f8ac57f0f6047d65f> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x39412000 - 0x39825fff  FaceCoreLight armv7  <0cb7a12beb3d32c1abd1834be8328b7c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x39840000 - 0x3991cfff  WebKit armv7  <2b33136aa86e383a83d32908bddc9667> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3991d000 - 0x3991dfff  libunwind.dylib armv7  <85e7546accc23ae1a973da4758512b7f> /usr/lib/system/libunwind.dylib
0x3991e000 - 0x3994bfff  MobileAsset armv7  <7ef1c10c0c493ad4b0073de317f2448d> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x39980000 - 0x39c35fff  libLAPACK.dylib armv7  <dd6f3958c3d536d6be90836682d2ffee> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib 
```

# jpa - JPQL 中的多列不同计数

> ID：14397816
> 
> 赞同：3
> 
> 时间：2013-01-18T11:18:20.770
> 
> 标签：jpa, jpql

是否有任何解决方法可以在 JPQL 中进行多列不同计数？

JPQL 似乎只支持查询中的单个表达式计数，并且由于子查询不能在 from 部分中使用，因此不可能像这样表达它

```
select count(*) from (select distinct a, b, c from Entity e) 
```

# linux - ccmake。vs ccmake [路径]

> ID：14397821
> 
> 赞同：2
> 
> 时间：2013-01-18T11:18:43.263
> 
> 标签：linux, macos, cmake

我正试图围绕来自 OSX 的 Linux/Ubuntu（今天才第一次安装和使用它......）。我正在编译一个程序，以及编译状态使用ccmake的说明。在后备箱文件夹中。我的 Ubuntu 终端无法识别“ccmake”。（它在 OSX 中），只有“ccmake trunk”。这和调用“ccmake”一样吗？在操作系统的主干文件夹中？是ccmake。Linux 完全支持吗？我已经运行了 make、cmake 和 gui-curses-cmake，并且已经完成了 $ sudo apt-get install build-essential –y 。

让我有点困惑的是“ccmake trunk”将make文件放在主文件夹中，而不是在trunk中。ccmake。在操作系统中将其放入主干文件夹中。当然，我可以移动文件，但这让我想知道是否有区别......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:41:37.560

通常您在*CMakeLists.txt*`ccmake .`所在的目录中调用或`cmake .`（注意空格）。这是因为点是命令的第一个参数。*如果您省略空格，shell 将在您的PATH*中搜索名为（包括点）的二进制文件，但不会找到任何内容。我不能告诉你为什么（没有空格）在 OSX 上工作，但我想这与他们的外壳有关。*`ccmake.`*`ccmake.`**

# c++ - 消息处理函数是否需要“afx_msg”？

> ID：14397823
> 
> 赞同：2
> 
> 时间：2013-01-18T11:18:58.950
> 
> 标签：c++, mfc, handler, message

我曾经在声明时添加`"afx_msg"`前缀`message handler function`。
但是我发现`the function`还是叫whithout `the prefix`。
是`"afx_msg"`吗？
添加：

```
class CVLManageDlg : public CDialog  
{    ...
protected:   
    void OnAdd();
    void OnModify();
    void OnDel();
}

BEGIN_MESSAGE_MAP(CVLManageDlg, CDialog)
    ON_BN_CLICKED(IDC_ADD_VL_MANAGE, OnAdd)
    ON_BN_CLICKED(IDC_MD_VL_MANAGE, OnModify)
    ON_BN_CLICKED(IDC_DEL_VL_MANAGE, OnDel)
    ON_NOTIFY(NM_CLICK, IDC_LIST_VL_MANAGE, OnClickList)
    ON_WM_SIZE()
END_MESSAGE_MAP()

void CVLManageDlg::OnAdd()
{...}

void CVLManageDlg::OnModify()
{...}

void CVLManageDlg::OnDel()
{...} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:31:13.073

ClassWizard 要求您在消息映射处理程序声明中使用 afx_msg 关键字。

而[这](http://msdn.microsoft.com/en-us/library/0812b0wa%28VS.80%29.aspx)

# asp.net - Ad Hoc Query Engine——除了动态查询部分之外还有什么？

> ID：14397824
> 
> 赞同：0
> 
> 时间：2013-01-18T11:19:02.730
> 
> 标签：asp.net, sql, database, data-warehouse

我理解“AD HOC”查询的含义，如果正确的话，它会在运行时动态生成查询

```
IF (someCondition)
strSQL = "SELECT * FROM authors WHERE " & whereClause
ELSE
strSQL = "SELECT * FROM authors WHERE " & whereClause & orderbyClause 
```

在使用 DataWarehouse 等时是否缺少一些额外的主要概念？或者任何其他有用的链接输入都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:50:20.767

即席查询引擎是一种支持完整的 SQL 语言以访问存储在数据库中的数据的引擎。无论是直接提供 SQL 还是以字符串形式提供 SQL（如您的示例中所示），都没有区别。

通常，它指的是决策支持系统上的复杂查询。在与大量用户交互或具有稳定的数据修改流的系统上，即席查询不受欢迎。

从技术上讲，动态 SQL 可能是即席查询，因为在执行之前需要重新编译字符串。但是，动态 SQL 通常会生成简单的查询，而参数化查询会更好。例如，您的示例是一个经典示例，说明由于 SQL 注入攻击而不能做什么。

# hibernate - Hibernate、hql、count with join fetch 生成包含所有字段和计数的 select，为什么？

> ID：14397825
> 
> 赞同：1
> 
> 时间：2013-01-18T11:19:05.130
> 
> 标签：hibernate, jpql

我有一个这样的 hql 查询：

```
 return (long)Session.CreateQuery (" select count(*) " +
                                      "   from Files p " +
                                      "   join fetch p.Application a " +
                                      "  where a.Name = :AppName")
                        .SetParameter("AppName", application)                            
                        .UniqueResult(); 
```

Hibernate 像这样创建 sql 查询：

```
 select field1, field2, field3, count(*) 
```

这就是它无法执行的原因。

为什么选择 count(*) 使休眠以列出所有字段以及如何防止它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:40:50.453

在我看来，问题在于使用“ `FETCH`”，它通常用于从数据库中获取给定实体的依赖关系。所以 Hibernate 查询 Application 的字段来创建对象。

如果您只想计算与应用程序关联的文件，请将 ' `JOIN FETCH`' 更改为 ' `INNER JOIN`'（或简单地 ' `JOIN`'）。唯一查询的字段应该是`count(*)`then。

# c# - Switch 语句的奇怪行为

> ID：14397828
> 
> 赞同：-2
> 
> 时间：2013-01-18T11:19:10.070
> 
> 标签：c#, enums

> **可能重复：**
> [c# switch 语句中的变量声明](https://stackoverflow.com/questions/222601/variable-declaration-in-c-sharp-switch-statement)
> [Switch case 中额外大括号的目的是什么？](https://stackoverflow.com/questions/10095280/what-is-the-purpose-of-the-extra-braces-in-switch-case)

今天我正在编写一小段代码，在调试时，VS 打了我一巴掌，告诉我我的局部变量名称犯了一个大错误：“一个名为‘i’的局部变量已经在这个范围内定义了”。

```
MyEnum enumerator = MyEnum.B;

switch (enumerator)
{
    case MyEnum.A:
        Int32 i = 0;
        // DoStuffsA();
        break;

    case MyEnum.B:
        Double i = 0D;
        // DoStuffsB();
        break;
} 
```

所以我说“好吧 VS，让我马上解决它，我想先确定我的案例，因为我更喜欢它们！”。所以我做了我的化妆品改变......但突然VS停止抱怨那个错误：

```
MyEnum enumerator = MyEnum.B;

switch (enumerator)
{
    case MyEnum.A:
    {
        Int32 i = 0;
        // DoStuffsA();
        break;
    }

    case MyEnum.B:
    {
        Double i = 0D;
        // DoStuffsB();
        break;
    }
} 
```

好的...我知道“范围”的含义，并且我知道我制作了两个不同的范围。问题是我不知道 switch 语句是如何翻译成 IL 代码的，而且我一直认为无论是否使用花括号，所有的 case 语句都放在了 switch 范围内。所以...下面的怪事可以编译，对吧？

```
MyEnum enumerator = MyEnum.B;

switch (enumerator)
{
    case MyEnum.A:
        String s = "Hello!";
        Console.WriteLine(s);
        break;

    case MyEnum.B:
        s = "Goodbye!";
        Console.WriteLine(s);
        break;
} 
```

但不是以下一个：

```
MyEnum enumerator = MyEnum.B;

switch (enumerator)
{
    case MyEnum.A:
    {
        String s = "hello";
        Console.WriteLine(s);
        break;
    }

    case MyEnum.B:
    {
        s = "goodbye";
        Console.WriteLine(s);
        break;
    }
} 
```

在这种情况下，有人可以更好地解释编译器的行为吗？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:21:45.123

当您`{}`在不同的`case`块中添加 时，您正在引入*范围*。

没有它们，所有`case`块都在一个范围内。

在您使用的最后两个示例中`s`- 第一个很好，正如在for`s`中声明的那样，可以使用 in ，但是使用大括号， in 的声明在其自己的范围内，在外部不可见 - 所以in是未知，需要重新声明。`case``MyEnum.A``MyEnum.B``MyEnum.A``MyEnum.B``s`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T11:23:02.823

首先，翻译成 IL 有点无关紧要。IL 根本没有相同的范围概念。这都是关于 C# 语言规范的。

非常简单，真的：局部变量的作用域是声明它的*块*，当另一个同名的局部变量在作用域内时，你不能声明一个局部变量。

*   在您的第一段代码中，范围`i`是整个 switch 语句。您的第二个声明试图`i`在同一范围内声明另一个变量，因此它失败了。

*   在您的第二段代码中，每个`i`变量的范围只是由花括号创建的块 - 它们位于完全独立的范围内，没有嵌套，所以没关系。

*   在您的第三段代码中，变量`s`在第二种情况的范围内，因为它的范围是整个 switch 语句 - 所以可以使用它。

*   在您的第四段代码中，该变量`s`仅*在*声明它的块的范围内（在案例 A 内），因此它不在案例 B 的范围内。

我*强烈*建议不要使用像你的第三段代码这样的代码。会让很多人感到困惑。如果您真的想要一个适用于多种情况的变量，我会在 switch 语句*之前声明它。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T11:22:30.437

将支架置于`break`内侧会使其断裂到支架的末端，此时您`case`会跌倒。您需要`break`大括号之外的语句。例如

```
case MyEnum.A:
{
    String s = "hello";
    Console.WriteLine(s);
}
break; 
```

# jquery - Twitter推文事件绑定/重新绑定

> ID：14397830
> 
> 赞同：1
> 
> 时间：2013-01-18T11:19:16.063
> 
> 标签：jquery, asp.net, twitter

我有一个动态内容，我想要一个自定义的推文描述我已经从[这个](https://twitter.com/about/resources/buttons#tweet)链接获得帮助，我在我的 aspx 页面中调用代码，如下所示

```
html = "<a href='https://twitter.com/share' class='twitter-share-button' data-url='" + url + "' data-text='" + imagedesc + "' data-via='test' data-hashtags='mytag1,mytag2'></a>";
$(ctrl).append(html);
twttr.widgets.load();

twttr.events.bind('tweet', function (event) {

 //do something here

}); 
```

这段代码第一次完美调用，但是当我第二次调用它时，它不会在推文后执行回调方法，有人建议像这样取消绑定事件 'twttr.events.unbind('tweet')' 但这个解决方案不起作用。我有动态内容要分享，请提出一些有用的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T18:48:02.047

每次将函数绑定到推文事件时，它都会将该函数添加到处理程序集合中。发生推文时，它应该执行添加到处理程序集合中的每个函数。

绑定第二个事件后，尝试在 Chrome 开发工具控制台中执行以下行。它应该显示绑定到推文事件的所有函数。

```
> twttr.events._handlers.tweet 
```

# paypal - 没有发生 PayPal 订阅

> ID：14397834
> 
> 赞同：0
> 
> 时间：2013-01-18T11:19:39.617
> 
> 标签：paypal, paypal-subscriptions

这个问题不是基本的，这意味着我已经阅读了一些关于这个的贝宝文档。我附上了一张图片。问题是我订阅了 Paypal，虽然它处于活动状态并声明下一次付款应该在第二天完成，但它没有发生，可能是什么问题？顺便说一句，我正在使用沙箱![在此处输入图像描述](../Images/6d16ab2ddf45b80b2479489bd139334e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:45:27.360

沙盒有时会延迟，并且付款不会在应有的时间发生。生产服务器通常没有这个问题，但它可能会发生。

从我可以看到你已经正确设置了它，所以这只是他们的系统启动并相应地处理它的问题。除了等待之外，您无能为力。

您可以将票张贴到 www.paypal.com/mts，但当他们回复时，付款可能会通过。

您也可以拨打他们的技术支持热线，您可以通过登录您的 PayPal 帐户找到该热线，点击联系我们，然后通过电话，它会为您提供单独的电话号码，用于一般和技术支持。您可以让他们知道发生了什么，他们也许能够找到导致延迟的原因并加以修复。

# windows - Windows 上的 Nodejitsu

> ID：14397836
> 
> 赞同：4
> 
> 时间：2013-01-18T11:19:46.717
> 
> 标签：windows, node.js, npm, nodejitsu

我刚刚开始使用 Node.js，并试图让 Nodejitsu 在我的系统上工作（Windows 7，Node 版本 0.8.15）

我使用“npm install jitsu -g”命令安装了 Jitsu，但除此之外，尝试执行 jitsu 用户确认或部署返回：

> 'jitsu' 不是内部或外部命令、可运行程序或批处理文件。

我知道我很可能需要在我的路径中添加 jitsu 安装位置，但不确定 jitsu 安装在哪里。

非常感谢帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:45:20.610

在 Windows 上的普通 Node.js 安装中，您会发现 npm 模块位于

```
C:\Program Files\nodejs\node_modules\npm\bin 
```

或在

```
C:\Users\user\AppData\Roaming\npm\jitsu 
```

您需要将 PATH 环境变量设置为正确的路径

然后你将能够使用 Nodejitsu :)

# java - 编辑代码以在 UI 线程上运行？

> ID：14397837
> 
> 赞同：0
> 
> 时间：2013-01-18T11:19:50.703
> 
> 标签：java, android, multithreading, user-interface

我收到了错误的线程错误，所以我想我需要从 UI 线程运行无效。通常我有类似的东西：

```
public void run() {

                runOnUiThread(new Runnable() {
}}); 
```

但是我需要命名这个 runnable 以从方法中引用它。我如何将 runOnUiThread 纳入其中？

```
Handler viewHandler = new Handler();
Runnable updateView = new Runnable() {
@Override

public void run() {

    mEmulatorView.invalidate();

    if (statusBool == true) {
        for (int i = 1; i < dataReceived.length() - 1; i++) {

            if (dataReceived.charAt(i) == '>') {

                Log.d(TAG, "found >");
                deviceStatus = 0;
            }
            if (dataReceived.charAt(i) == '#'
                    && dataReceived.charAt(i - 1) != ')') {

                Log.d(TAG, "found #");
                deviceStatus = 1;
            }
            if ((i + 1) <= (dataReceived.length())
                    && dataReceived.charAt(i) == ')'
                    && dataReceived.charAt(i + 1) == '#') {

                Log.d(TAG, "found config )#");
                deviceStatus = 2;
            }

        }
        statusBool = false;
        viewHandler.postDelayed(updateView, 1000);

    }
}
}; 
```

调用它：

```
public void onDataReceived(int id, byte[] data) {

        dataReceived = new String(data);
        ((MyBAIsWrapper) bis).renew(data);
        mSession.write(dataReceived);
        viewHandler.post(updateView);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:21:24.423

你不需要命名它。如果你想发布自己，你可以使用`this`关键字：

```
viewHandler.postDelayed(this, 1000); 
```

**更新**

错误的线程错误由`mSession.write(dataReceived);`. `updateView`不会造成任何问题。尝试包装`mSession.write`为可运行并在 ui 线程上调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:12:03.173

得到它的工作，我只需要在 UI 线程中运行该写入行，即使我认为它是？！

```
public void onDataReceived(int id, byte[] data) {

        dataReceived = new String(data);
        ((MyBAIsWrapper) bis).renew(data);

        runOnUiThread(new Runnable(){
            @Override
            public void run() { 
                mSession.write(dataReceived);       
            }});

        viewHandler.post(updateView);
    } 
```

# sql - SQL - 如何按 id 分组并识别具有最高值的列？

> ID：14397839
> 
> 赞同：7
> 
> 时间：2013-01-18T11:20:03.120
> 
> 标签：sql, sql-server, group-by

我有一个 SQL 挑战，我需要一些帮助。

下面是一个简化的例子，在我的真实情况下，我在慢速视图中有大约 500k 行。因此，如果您也有有效的解决方案，我将不胜感激。我想我必须以一种或另一种方式使用 GROUP BY，但我不确定。

假设我有一张这样的桌子

```
╔═════════╦══════════╦══════════╦═══════╗
║ ORDERID ║   NAME   ║   TYPE   ║ PRICE ║
╠═════════╬══════════╬══════════╬═══════╣
║       1 ║ Broccoli ║ Food     ║ 1     ║
║       1 ║ Beer     ║ Beverage ║ 5     ║
║       1 ║ Coke     ║ Beverage ║ 2     ║
║       2 ║ Beef     ║ Food     ║ 2.5   ║
║       2 ║ Juice    ║ Beverage ║ 1.5   ║
║       3 ║ Beer     ║ Beverage ║ 5     ║
║       4 ║ Tomato   ║ Food     ║ 1     ║
║       4 ║ Apple    ║ Food     ║ 1     ║
║       4 ║ Broccoli ║ Food     ║ 1     ║
╚═════════╩══════════╩══════════╩═══════╝ 
```

所以我想做的是：

在每个订单中，如果有食品和饮料订单行，我想要最高的饮料价格

所以在这个例子中，我想要一个这样的结果集：

```
╔═════════╦═══════╦═══════╗
║ ORDERID ║ NAME  ║ PRICE ║
╠═════════╬═══════╬═══════╣
║       1 ║ Beer  ║ 5     ║
║       2 ║ Juice ║ 1.5   ║
╚═════════╩═══════╩═══════╝ 
```

我怎样才能以有效的方式实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:34:07.843

您可以使用子查询获取`max(price)`包含食品和饮料的每个订单，然后将其连接回您的表以获取结果：

```
select t1.orderid,
  t1.name,
  t1.price
from yourtable t1
inner join
(
  select max(price) MaxPrice, orderid
  from yourtable t
  where type = 'Beverage'
    and exists (select orderid
                from yourtable o
                where type in ('Food', 'Beverage')
                  and t.orderid = o.orderid
                group by orderid
                having count(distinct type) = 2)
  group by orderid
) t2
  on t1.orderid = t2.orderid
  and t1.price = t2.MaxPrice 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/27979/10)

结果是：

```
| ORDERID |  NAME | PRICE |
---------------------------
|       1 |  Beer |     5 |
|       2 | Juice |   1.5 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:22:22.637

由于您已标记`SQL Server`，请使用`Common Table Expression`和`Window Functions`。

```
;WITH filteredList
AS
(
  SELECT OrderID
  FROM tableName
  WHERE Type IN ('Food','Beverage')
  GROUP BY OrderID
  HAVING COUNT(DISTINCT Type) = 2
),
greatestList
AS
(
    SELECT  a.OrderID, a.Name, a.Type, a.Price,
            DENSE_RANK() OVER (PARTITION BY a.OrderID
                                ORDER BY a.Price DESC) rn
    FROM tableName  a
          INNER JOIN filteredList b
              ON a.OrderID = b.OrderID
    WHERE a.Type = 'Beverage'
)
SELECT  OrderID, Name, Type, Price
FROM    greatestList
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/81179/8)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:30:35.303

这是关系划分：[链接 1](https://stackoverflow.com/questions/7304766/how-to-get-common-value-for-two-records-from-mssql/7305221#7305221)，[链接 2](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。

如果除数表（只有**食物**和**饮料**）是静态的，那么您可以使用以下解决方案之一：

```
DECLARE @OrderDetail TABLE 
    ([OrderID] int, [Name] varchar(8), [Type] varchar(8), [Price] decimal(10,2))
;

INSERT INTO @OrderDetail
    ([OrderID], [Name], [Type], [Price])
SELECT 1, 'Broccoli', 'Food', 1.0
UNION ALL SELECT 1, 'Beer', 'Beverage', 5.0
UNION ALL SELECT 1, 'Coke', 'Beverage', 2.0
UNION ALL SELECT 2, 'Beef', 'Food', 2.5
UNION ALL SELECT 2, 'Juice', 'Beverage', 1.5
UNION ALL SELECT 3, 'Beer', 'Beverage', 5.0
UNION ALL SELECT 4, 'Tomato', 'Food', 1.0
UNION ALL SELECT 4, 'Apple', 'Food', 1.0
UNION ALL SELECT 4, 'Broccoli', 'Food', 1.0

-- Solution 1
SELECT  od.OrderID, 
        COUNT(DISTINCT od.Type) AS DistinctTypeCount, 
        MAX(CASE WHEN od.Type='beverage' THEn od.Price END) AS MaxBeveragePrice
FROM    @OrderDetail od
WHERE   od.Type IN ('food', 'beverage')
GROUP BY od.OrderID
HAVING  COUNT(DISTINCT od.Type) = 2 -- 'food' & 'beverage'

-- Solution 2: better performance
SELECT  pvt.OrderID,
        pvt.food AS MaxFoodPrice,
        pvt.beverage AS MaxBeveragePrice
FROM (
    SELECT  od.OrderID, od.Type, od.Price
    FROM    @OrderDetail od
    WHERE   od.Type IN ('food', 'beverage')
) src
PIVOT ( MAX(src.Price) FOR src.Type IN ([food], [beverage]) ) pvt
WHERE   pvt.food IS NOT NULL
AND     pvt.beverage IS NOT NULL 
```

结果（对于解决方案 1 和 2）：

```
OrderID     DistinctTypeCount MaxBeveragePrice
----------- ----------------- ---------------------------------------
1           2                 5.00
2           2                 1.50

Table 'Worktable'. Scan count 2, logical reads 23, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table '#09DE7BCC'. Scan count 1, logical reads 1, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

OrderID     MaxFoodPrice                            MaxBeveragePrice
----------- --------------------------------------- ---------------------------------------
1           1.00                                    5.00
2           2.50                                    1.50

Table '#09DE7BCC'. Scan count 1, logical reads 1, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T11:24:25.307

如果您使用的是 Sql-Server 2005 或更高版本，您可以使用`CTE`with`DENSE_RANK`函数：

```
WITH CTE 
     AS (SELECT orderid, 
                name, 
                type, 
                price, 
                RN = Dense_rank() 
                       OVER ( 
                         PARTITION BY orderid 
                         ORDER BY CASE WHEN type='Beverage' THEN 0 ELSE 1 END ASC 
                         , price DESC) 
         FROM   dbo.tablename t 
         WHERE  EXISTS(SELECT 1 
                       FROM   dbo.tablename t2 
                       WHERE  t2.orderid = t.orderid 
                              AND type = 'Food') 
         AND    EXISTS(SELECT 1 
                       FROM   dbo.tablename t2 
                       WHERE  t2.orderid = t.orderid 
                              AND type = 'Beverage')) 
SELECT orderid, 
       name, 
       price 
FROM   CTE
WHERE  rn = 1 
```

如果`DENSE_RANK`您希望所有订单具有相同的最高价格并且`ROW_NUMBER`如果您想要一个，请使用。

[`DEMO`](http://www.sqlfiddle.com/#!3/81179/32/0)

# php - PHP：如何更改 PHP_INI_* 模式

> ID：14397840
> 
> 赞同：0
> 
> 时间：2013-01-18T11:20:04.120
> 
> 标签：php, apache, configuration

我有一个关于如何设置 PHP_INI_* 模式以及在哪里设置它们的问题。我从[http://php.net/manual/en/configuration.changes.modes.php](http://php.net/manual/en/configuration.changes.modes.php)找到了这个链接。它说有模式 PHP_INI_USER、PHP_INI_ALL、PHP_INI_SYSTEM、PHP_INI-PERDIR。下面的用户通知说 Apache 有几个指令来更改 PHP_INI_* 模式配置，但我在 httpd.conf 中找不到这些指令。它们在哪些 Apache 配置文件中？例如，我可以将配置模式从 PHP_INI_SYSTEM 更改为 PHP_INI_USER 吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:45:10.483

是否可以为每个用户或每个目录级别设置一个 php_ini 取决于多个条件：

*   php_ini**指令本身**。请参阅特定 ini 指令的文档以了解是否允许为每个用户或每个目录或其他设置

*   指令的值`user_ini.filename`如果省略或为空，则无法**为每个用户级别**设置 php_ini 指令。那是因为 PHP 不知道在哪里搜索该 user.ini 文件

*   在 apache conf 中，可以在标签内的**每个目录**`<directory>`中设置 php_ini 指令，或者按照[此处](http://php.net/manual/en/configuration.changes.php)`.htaccess`描述的语法进行设置。另请注意，此目录的 (apache) 设置必须设置为或者为了这样做。`AllowOveride``AllowOverrideOptions``AllowOverrideAll`

# python - 在 tkinter 中，每次按下按钮时如何生成一个新行？

> ID：14397846
> 
> 赞同：1
> 
> 时间：2013-01-18T11:20:21.560
> 
> 标签：python, tkinter, tk

我编写了这段代码，当按下按钮时，一个输入框出现在新行上，但我不知道如何让它在最后一个下方的新行上创建一个新条目。我的主要问题是如何在函数中增加 row_number 变量而不在每次调用函数时重新设置它，以及如何让函数在每次调用时为“new_entry”对象赋予一个新名称，以便它不会'不要覆盖自己。

```
def new_row():
    #Create widgets   
    new_entry = ttk.Entry(root, width=7)

    #Put widgets in grid
    new_entry.grid(column=0, row=2, sticky=(W, E))

root = Tk()
createRow_button = ttk.Button(root, text='New Row', command=new_row)
createRow_button.grid()

root.mainloop 
```

这是我第一次在 Stack Overflow 上提出问题，如果我有任何问题，请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:30:10.527

使用一个类并将行数存储为类属性`self.num_rows`：

```
import Tkinter as tk

class App(object):
    def new_row(self):
        # Create widgets
        new_entry = tk.Entry(root, width=7)

        # Put widgets in grid
        self.num_rows += 1
        new_entry.grid(column=0, row=self.num_rows, sticky='WE')

    def __init__(self):
        self.num_rows = 1
        createRow_button = tk.Button(
            root, text='New Row', command=self.new_row)
        createRow_button.grid()

root = tk.Tk()
app = App()
root.mainloop() 
```

# javascript - 喜欢按钮不会出现在我的静态网站上

> ID：14397847
> 
> 赞同：0
> 
> 时间：2013-01-18T11:20:23.177
> 
> 标签：javascript, html, twitter, facebook-like

我想在我的网站中使用like facebook按钮，这是一个静态网站，当我将脚本添加到页面时，当我打开没有 wamp 服务器的页面时它没有出现

**但是**当我添加 twitter 的分享按钮时，即使没有 wampserver 它也可以工作，为什么？哪里有问题？

脸书脚本：

```
<div class="fb-like" data-href="http://www.mywebsite" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div>
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
            </script> 
```

推特脚本

```
<a class="twitter-share-button" data-lang="en" data-url="http://mywebsite/">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:34:15.113

要呈现 facebook like 按钮，facebook 将爬入网站并检查提供的 URL 是否是有效的 Web url。如果 URL 中提到了“localhost”，则不会显示“赞”按钮。您还可以通过将您的网站 URL 粘贴到下面的 facebook 开发者页面中来检查您的网站 URL 是否有有效的抓取，

[http://developers.facebook.com/tools/debug/og/object](http://developers.facebook.com/tools/debug/og/object)

将您的 ip 从 localhost 映射到您的域名，它将呈现类似按钮

# ruby-on-rails - 隐藏原始文件（回形针）

> ID：14397851
> 
> 赞同：0
> 
> 时间：2013-01-18T11:20:38.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

使加载自定义图像，下载后放水印。回形针默认将文件放在一个名为样式的文件夹中，例如原始，拇指，中等等。我想隐藏上传的没有水印的原始文件，并保留原始大小可用但只有水印。

删除可加载文件不是一个选项，存档需要它们。

我想要一个文件保存在同一个地方，同时未经授权的用户不可用？例如，站点管理员可以查看这些文件，而用户则不能。

如果有人会转向原始文件，直接链接，可以限制访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:19:32.177

我用

```
Paperclip.interpolates :maybe_public do |attachment, style|
  style == :original ? "private" : "public"
end

has_attached_file :image, :path => ":rails_root/:maybe_public/..." 
```

它奏效了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:22:40.910

**试试，但我不确定**

```
has_attached_file :avatar, {
    :url => "/system/:hash.:extension",
    :hash_secret => "longSecretString"
} 
```

# security - 会话 ID - 包含数据还是引用数据？

> ID：14397862
> 
> 赞同：1
> 
> 时间：2013-01-18T11:21:13.737
> 
> 标签：security, web-applications, cookies, asp.net-web-api, sessionid

我希望您能深入了解 Web 应用程序的“会话 ID”。

您认为以下哪一项是最好的：

1.  会话 ID 包含以下内容： `{ data: { user_id: ???, auth_user_agent: ???, auth_ip, ???, expires: unix_time }, signature: { "data's signature" } }`加密然后 base64ed => 发送给用户
2.  随机会话 ID 引用缓存中的数据
3.  随机会话 ID 引用数据库中的数据

我在这里关注性能和安全性。

底线是哪个更好，（解密和验证签名），从缓存中检索或执行数据库连接，检索数据等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:08:23.807

与在浏览器发出的每个 HTTP 请求中传输此信息相比，使用随机值从诸如 memcached 之类的快速非关系缓存中获取数据**要快得多，并且消耗的资源更少。**浏览器最终会将此会话状态发送到不必要的文件，例如 CSS、图像等静态连接。这种会话管理方法会增加对服务器的每个客户端请求的不必要开销。

它的安全性较低，因为即使它是加密的，也没有什么是完美的。除非您是专业的密码学家，否则**不惜一切代价**避免使用加密。

# c++ - 在编译时返回唯一字符串的宏

> ID：14397866
> 
> 赞同：3
> 
> 时间：2013-01-18T11:21:36.903
> 
> 标签：c++, objective-c, c, objective-c-runtime

是否有一个可以在编译时返回唯一字符串的宏，以便它可以用作objective-c 类的名称？

我在想类似的东西：

```
#define my_macro(params) \
@implementation my_macro_function_giving_unique_string_(MyTrickyRuntimeExtension) \
  //Do stuff \
@end \ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:31:56.540

在 C++ 中，它可以是：

```
#define UNIQUE_NAME2(LINE) Class##LINE
#define UNIQUE_NAME1(LINE) UNIQUE_NAME2(LINE)
#define UNIQUE_NAME UNIQUE_NAME1(__LINE__) 
```

并将其用作：

```
class UNIQUE_NAME {}; 
```

[注意：每行声明 1 个类，不要希望在任何地方前向声明它 :)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:34:48.100

`__COUNTER__`Visual Studio 中有一个预定义的宏可以帮助

我使用*了 iammilind*建议

```
#define UNIQUE2(param) YourClassBaseNames##param
#define UNIQUE1(param) UNIQUE2(param)
#define UNIQUE UNIQUE1(__COUNTER__)

class UNIQUE
{

};

class UNIQUE
{

}; 
```

counter - 返回新的计数 ech 时间

参考： http: [//msdn.microsoft.com/en-us/library/b0084kay (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/b0084kay(v=vs.80).aspx)

它也可用于 GCC

# sql-server-2008 - 将空值转换为数据库中的默认值

> ID：14397868
> 
> 赞同：-3
> 
> 时间：2013-01-18T11:21:45.833
> 
> 标签：sql-server-2008, sql-server-2005

如何将默认值从 Null 值更新到给定数据库中的所有表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:23:49.797

使用和创建`UPDATE`查询。`WHERE field IS NULL``SET field = yourdefaulthere`

# java - 签名声明抛出异常：方法/构造函数不应显式抛出 java.lang.Exception

> ID：14397869
> 
> 赞同：2
> 
> 时间：2013-01-18T11:21:50.487
> 
> 标签：java

我在声纳上收到了这个警告。这个警告的正确解决方案是什么。我的方法是这样的：

```
public void abc(A a) throws Exeption {

        dao.pqr(a);
} 
```

我在 Class 中收到此方法的警告。对此有什么正确的解决方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T11:24:45.753

如果已知异常，您应该抛出实际的异常。

如果您调用的方法`throws Exception`并且您无法更改它，则除了禁止警告之外，您无能为力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T11:38:56.700

您可以捕获异常并将其重新转换为特定异常。

```
 protected RunningJob submitJob(Configuration actionConf) throws RuntimeException {
    .....
    RunningJob rj;
    try{
        rj = super.submitJob(actionConf);
    }catch(Exception e){
        throw new RuntimeException(e);
    }
    return rj;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T11:27:25.193

[一个方法只能抛出与其接口相关的异常](http://www.wikijava.org/wiki/10_best_practices_with_Exceptions#Relevancy)。异常是所有异常的“根”，所以尽量具体一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T11:24:32.777

如果您 throw `Exception`，则不清楚该方法可以抛出哪些异常，因为这`Exception`是非常通用的。

# android - 平板电脑启动器图标的大小

> ID：14397870
> 
> 赞同：1
> 
> 时间：2013-01-18T11:21:55.047
> 
> 标签：android, icons, size, launcher

我在任何 Android 文档页面中都找不到他们谈论平板电脑启动器图标大小的地方。

我需要支持 1024x600、1280x800 和 1920x1200 平板电脑，所以我猜有 3 个不同的启动器图标。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:29:15.327

Android 设备和平板电脑没有不同的启动器图标。Android 中所有设备的启动器图标都是相同的，并且它们的设计尺寸在此[链接](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#icons_in_market)中定义。在链接上有一个参考，并根据规范设计您的启动器图标。启动器图标大小因设备密度而异，但它们的`48px x 48px`大小始终相同。

请确保放置在 Play 商店中`512px x 512px`的启动器图标与应用程序的启动器图标不同。

# android - 如何在android中的图像中给出随机时间间隔

> ID：14397872
> 
> 赞同：0
> 
> 时间：2013-01-18T11:22:03.840
> 
> 标签：android

在我的应用程序中，动画图像应该以不同的时间间隔每次重复。就像我想要 1000 到 5000 之间的任何一个。我应用了下面的代码，但这不能正常工作。图像移动非常快。所以，请帮我解决这个问题。

```
 Random gen = new Random();
       anim.setDuration(new Random().nextInt(5000-1000+1)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:23:50.123

我认为您只需要设置[interpolator](http://developer.android.com/reference/android/view/animation/Interpolator.html)。

```
anim.setInterpolator(new AccelerateDecelerateInterpolator()); 
```

所以它的速度将成比例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:53:44.827

首先 - 你甚至没有检查 nextInt(5000-1000+1) 返回的值。如果你检查这个，你会发现值是从 0 到 4001。

如果您需要从 1000 到 5000 的值，请使用：

```
anim.setDuration(1000 + gen.nextInt(4000)); 
```

# google-maps - 在 Google Maps API 中绘制环（不是圆圈）

> ID：14397874
> 
> 赞同：3
> 
> 时间：2013-01-18T11:22:04.883
> 
> 标签：google-maps, google-maps-api-3

我想画一个 20 公里厚的圆环，里面有 5 公里的空圆。我不知道怎么做。我相信这是可能的。

一种简单的解决方案是从 25 公里的圆中减去一个 5 公里的圆。是否可以？谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:19:41.007

创建一个drawCircle函数：

```
function drawCircle(point, radius, dir) { 
var d2r = Math.PI / 180;   // degrees to radians 
var r2d = 180 / Math.PI;   // radians to degrees 
var earthsradius = 3963; // 3963 is the radius of the earth in miles

   var points = 32; 

   // find the raidus in lat/lon 
   var rlat = (radius / earthsradius) * r2d; 
   var rlng = rlat / Math.cos(point.lat() * d2r); 

   var extp = new Array(); 
   if (dir==1)  {var start=0;var end=points+1} // one extra here makes sure we connect the
   else     {var start=points+1;var end=0}
   for (var i=start; (dir==1 ? i < end : i > end); i=i+dir)  
   { 
      var theta = Math.PI * (i / (points/2)); 
      ey = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta) 
      ex = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta) 
      extp.push(new google.maps.LatLng(ex, ey)); 
      bounds.extend(extp[extp.length-1]);
   } 
   // alert(extp.length);
   return extp;
   } 
```

然后你可以像这样使用它：

```
 var donut = new google.maps.Polygon({
                 paths: [drawCircle(new google.maps.LatLng(-33.9,151.2), 100, 1),
                         drawCircle(new google.maps.LatLng(-33.9,151.2), 50, -1)],
                 strokeColor: "#0000FF",
                 strokeOpacity: 0.8,
                 strokeWeight: 2,
                 fillColor: "#FF0000",
                 fillOpacity: 0.35
     });
     donut.setMap(map); 
```

请注意，内圈需要“绕”在外圈的对面。

[示例（由 Molle 博士发布](http://www.geocodezip.com/v3_polygon_example_donut.html)）

**代码片段：**

```
function drawCircle(point, radius, dir) {
  var d2r = Math.PI / 180; // degrees to radians 
  var r2d = 180 / Math.PI; // radians to degrees 
  var earthsradius = 3963; // 3963 is the radius of the earth in miles

  var points = 32;

  // find the raidus in lat/lon 
  var rlat = (radius / earthsradius) * r2d;
  var rlng = rlat / Math.cos(point.lat() * d2r);

  var extp = new Array();
  if (dir == 1) {
    var start = 0;
    var end = points + 1
  } // one extra here makes sure we connect the
  else {
    var start = points + 1;
    var end = 0
  }
  for (var i = start;
    (dir == 1 ? i < end : i > end); i = i + dir) {
    var theta = Math.PI * (i / (points / 2));
    ey = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta) 
    ex = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta) 
    extp.push(new google.maps.LatLng(ex, ey));
    bounds.extend(extp[extp.length - 1]);
  }
  // alert(extp.length);
  return extp;
}

var map = null;
var bounds = null;

function initialize() {
  var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(-33.9, 151.2),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  bounds = new google.maps.LatLngBounds();

  var donut = new google.maps.Polygon({
    paths: [drawCircle(new google.maps.LatLng(-33.9, 151.2), 100, 1),
      drawCircle(new google.maps.LatLng(-33.9, 151.2), 50, -1)
    ],
    strokeColor: "#0000FF",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#FF0000",
    fillOpacity: 0.35
  });
  donut.setMap(map);

  map.fitBounds(bounds);

}
google.maps.event.addDomListener(window, "load", initialize);
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T08:29:29.520

这是使用几何库对 geocodezip 的答案稍作修改的版本：

```
function getCirclePoints(center, radius, numPoints, clockwise) {
    var points = [];
    for (var i = 0; i < numPoints; ++i) {
        var angle = i * 360 / numPoints;
        if (!clockwise) {
            angle = 360 - angle;
        }

        // the maps API provides geometrical computations
        // just make sure you load the required library (libraries=geometry)
        var p = google.maps.geometry.spherical.computeOffset(center, radius, angle);
        points.push(p);
    }

    // 'close' the polygon
    points.push(points[0]);
    return points;
} 
```

你可以像这样使用它：

```
new google.maps.Polygon({
    paths: [
        getCirclePoints(yourCenter, outerRadius, numPoints, true),
        getCirclePoints(yourCenter, innerRadius, numPoints, false)
    ],
    /* other polygon options */
 }); 
```

**编辑**：

几何 API 可以像这样添加到 Node 中（感谢[Gil Epshtain](https://stackoverflow.com/questions/14397874/draw-ring-not-circle-in-google-maps-api/22931600#comment81993465_22931600)）：

```
require('google-maps-api')(GOOGLE_API_KEY, ['geometry']) 
```

在我写这篇文章的时候，我在 HTML 中使用了普通的旧 JavaScript 包含：

```
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=geometry"> 
```

更多信息请参考[几何库的API页面](https://developers.google.com/maps/documentation/javascript/geometry)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-04T15:21:17.510

好的，所以根据 geocodezip 的回答，我调整了函数以在谷歌地图上绘制一个甜甜圈，以适应地图的失真。该函数根据中心点和半径计算圆的 360 个纬度/经度点。纬度/经度计算为方位角（0 到 360 度/点）和距中心的距离。

```
function drawCircle(point, radius, dir) {

  var olat = point[0] * Math.PI / 180;
  var olon = point[1] * Math.PI / 180;
  var ERadius = 6371;  // Radius of the earth
  var points = 360;    // Calculate number of points

  var circle = new Array();

  if (dir == 1) {
    var start = 0;
    var end = points + 1;
  } else {
    var start = points + 1;
    var end = 0;
  }
  for (var i = start; (dir==1 ? i < end : i > end); i = i + dir) {

     var Bearing = i * Math.PI / 180;
     var cLat = Math.asin(Math.sin(olat)*Math.cos(radius/ERadius)+Math.cos(olat)*Math.sin(radius/ERadius)*Math.cos(Bearing)) * 180 / Math.PI;
     var cLon = (olon + Math.atan2(Math.sin(Bearing)*Math.sin(radius/ERadius)*Math.cos(olat), Math.cos(radius/ERadius)-Math.sin(olat)*Math.sin(Math.asin(Math.sin(olat)*Math.cos(radius/ERadius)+Math.cos(olat)*Math.sin(radius/ERadius)*Math.cos(Bearing))))) * 180 / Math.PI;
     circle.push(new google.maps.LatLng(cLat, cLon));
     bounds.extend(circle[circle.length-1]);  
  }
  return circle;
} 
```

基于此，您可以使用以下函数来绘制甜甜圈。

```
 var donut  = new google.maps.Polygon({ paths: [drawCircle([22.3089, 113.9150], 5000, 1), drawCircle([22.3089, 113.9150], 9000, -1)], strokeColor: "#AA0000",strokeWeight: 0,fillColor: "#AA0000",fillOpacity: 0.25 });
      donut.setMap(map); 
```

上例以香港为中心，内圈半径为 5,000 公里，外圈半径为 9,000 公里。这应该会产生一个像这样的甜甜圈： [![在此处输入图像描述](../Images/04c3c284bd372c5e9b105f9a510ef916.png)](https://i.stack.imgur.com/Ff7vN.png)

# iphone - iphone延迟来自服务器的响应

> ID：14397887
> 
> 赞同：4
> 
> 时间：2013-01-18T11:22:46.463
> 
> 标签：iphone, ios, request, nsurlconnection, response

一旦我向服务器发送请求（通过`NSURLConnection` `sendSynchronousRequest`方法），服务器会在大约 2 秒内收到它，它会在另外 3-5 秒内处理并发送回响应。但是，我只能在 30-35 秒内得到回复。这种延迟使我们的沟通非常缓慢。

甚至异步 API 也得到了延迟响应。

早些时候，一切正常，客户端在 10 秒内得到响应。还有谁有相同的问题吗？可能是什么原因？

**编辑** 这里是`Wireshark`分析的截图：

[链接](http://i45.tinypic.com/28ldetw.png)到更好的图像

![在此处输入图像描述](../Images/65c272897ec3ded55f07c566b7472fcb.png)

我应该如何查看哪个数据包在说什么？...为什么会延迟？

**EDIT2** 这是代码：

```
 NSHTTPURLResponse *response=nil;

NSMutableURLRequest *theRequest=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:nsURL] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:180.0];
[theRequest setHTTPMethod:@"POST"];
[theRequest setTimeoutInterval:180.0];
[theRequest setHTTPBody:[[NSString stringWithFormat:@"%@",sdata] dataUsingEncoding:NSASCIIStringEncoding]];

NSError *error= nil;

NSData *result = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&response error:&error];
if (error ) {
    NSLog(@"error sending synchronous request: %@", error);
}
NSLog(@"request completed with code:%d",response.statusCode); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T11:40:29.830

我会避免打电话`sendSynchronousRequest`。如果您尚未在后台线程上进行调用（您不想阻塞 UI 线程），请改用异步版本。

您如何知道何时收到 iOS 响应？一个NSLog？UI 状态变化？

另请参阅以下问题：

[NSURLConnection sendSynchronousRequest - 背景到前台](https://stackoverflow.com/questions/7975818/nsurlconnection-sendsynchronousrequest-background-to-foreground)

[NSURLConnection sendSynchronousRequest 响应时间过长](https://stackoverflow.com/questions/4516653/nsurlconnection-sendsynchronousrequest-taking-too-much-time-to-respond)

**更新**

如果您有点卡住，一种策略可能是排除使用`NSURLConnection`作为问题。

*   **策略一：**尝试使用`NSURL`'s 的异步连接调用而不是同步
*   **策略 2：**尝试使用不同的 HTTP 库，例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)

如果您想仔细查看 HTTP 连接发生了什么，您可以使用[Charles](http://www.charlesproxy.com/)、[Fiddler](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)等工具来调试正在发送和接收的数据。要从此类分析中获得最大收益，您需要对 HTTP 协议有一定的了解。这可能比前面提到的策略更耗时。

另请参阅[如何监控从 iOS 模拟器进行的网络调用](https://stackoverflow.com/questions/11128362/how-to-monitor-network-calls-made-from-ios-simulator)等问题。

**更新**

您是在访问自己的网络服务器，还是其他人的网络服务器？

您是否仔细查看了发送到您的网络服务器的标头（以及返回的标头）？例如，注意内容长度。[如此处所述，错误的](https://stackoverflow.com/questions/3290075/nsurlconnection-nsmutabledata-for-file-downloads-is-really-slow)内容长度可能会导致延迟。

要查看请求和返回的标头，您可以在命令行上使用 Firebug 或 wget 或 curl 之类的东西。

此外，请仔细检查您的 URL 末尾是否没有换行符，如此处[所述](https://stackoverflow.com/a/4625201/348476)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T09:04:15.633

**对我有用的解决方案**：

在请求标头中，iOS 默认为“Accept-Encoding”设置“gzip”。gzip 压缩花费了很多时间，因此延迟了响应。我做了以下事情来解决这个问题：

```
[theRequest setValue:@"" forHTTPHeaderField:@"Accept-Encoding"]; 
```

注意：检查您的标题，是否有任何响应延迟。

感谢@occulus 将我引导至请求标头！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:40:54.697

你是通过 wifi 还是 celluar 做到这一点的？

根据我的经验，当我的数据使用量用尽时，我的电话提供商会减慢我的下载速度。有时在我使用大量移动数据后，这种情况会在月底发生在我身上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:06:15.433

我不确定，但首先检查它可能是网络问题。它正确还是向下？好吧也许我会错..但首先检查它...

**以下描述代码可能会解决您的问题:)**

```
NSString *url = @"Your URL ";

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.0];
[request setHTTPMethod:@"POST"];

NSMutableData *body = [NSMutableData data];
.
.

    /// Add Here Your    NSMutableData Valuew 
.
.
[request setHTTPBody:body];
 NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (theConnection)
{
    self.responseData = [[NSMutableData alloc] init];
}
else
    NSLog(@"Connection Failed!"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-29T12:53:20.053

为了缓解异步 HTTP 请求的问题，您应该考虑使用 AFNetworking 框架

# delphi - 有没有办法阻止 TJvDocServerForm 在取消固定时隐藏？

> ID：14397888
> 
> 赞同：1
> 
> 时间：2013-01-18T11:22:47.727
> 
> 标签：delphi, delphi-2010, jvcl

所以我的问题是我有一个 TJvDocServerForm 里面有一个图像，现在所有功能在它固定时都可以工作，但是当它取消固定并且我尝试使用鼠标滚轮进行缩放时，表格在缩放操作后直接隐藏。

*   缩放通过触发计时器的滚动框鼠标滚轮事件进行。
*   当鼠标滚轮上的移动停止时，计时器然后通过我自己的图像类重绘更大/更小的图像。
*   通过断点，似乎绘图导致表单隐藏。

我相信这与失去焦点有关，但是在平局后立即将焦点重新设置回他的形式并不会停止隐藏，因为它已经被告知隐藏。

有没有办法以某种方式锁定表单，直到图像被重绘后才**隐藏？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:14:16.390

这个功能（取消固定的东西）很少使用。这段代码非常复杂，除非你喜欢导致回归，否则不建议更改它。鼠标滚轮+取消固定的组合有多常见？如此罕见，如果我是你，我会放手的。如果您可以完全没有取消固定功能，只需更改停靠样式即可。就我个人而言，我讨厌未固定状态，并且我使用了甚至不支持它的停靠样式。未固定的“缩小”动画可能与焦点丢失直接相关。您可以存储该状态，等到下一次通过消息循环然后触发动画，如果您愿意的话，但即使我在 JvDocking 源代码中做了很多工作，也会犹豫尝试一下。

# windows - 运行 mpi 时在系统的 %appdata% 而不是用户的 %appdata% 中生成的文件

> ID：14397892
> 
> 赞同：0
> 
> 时间：2013-01-18T11:23:06.633
> 
> 标签：windows, mpi, appdata

我正在 Windows 上运行我的应用程序 (sample.exe)，它使用外部 DLL（即我没有此 DLL 的源代码）。外部 DLL 在`%appdata%`文件夹中生成一些数据。当应用程序独立运行时，一切都运行良好。

现在，当我使用 MPI 运行 sample.exe 时，正在生成日志`"C:\Windows\System32\config\systemprofile\AppData"`

我知道这是`%appdata%`for *SYSTEM*。此外，MPI 使用`"smpd"`服务运行，需要以管理员身份安装。所以，我认为 sample.exe 可能归系统所有，而不是用户所有。但是，当从任务管理器中检查时，应用程序的所有者仍然是用户（`%username%`）。

我不明白为什么日志是在系统的*appdata*文件夹而不是用户的*appdata*文件夹中生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:42:25.427

可能的解释是在 LOCALSYSTEM 帐户下运行的服务正在保存文件。对您的应用程序的架构知之甚少，我无法详细说明这是如何发生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:46:20.910

由于`sample.exe`是您自己的应用程序，您可以通过添加日志记录代码来解决问题。例如：

*   调用 SHGetKnownFolderPath 来确定应用程序数据文件夹。
*   调用 GetUserName 以检查您在哪个用户帐户下运行。
*   调用 GetEnvironmentStrings 以确定如何设置环境变量，特别注意 %APPDATA% 和 %LOCALAPPDATA%。
*   如果这是一个 C 程序，请同时使用 getenv("APPDATA") 和 getenv("LOCALAPPDATA")；IIRC，C 运行时库保留它自己的环境变量副本。

如果应用程序数据文件夹正确但环境变量不正确（这是我对问题的第一个猜测），那么您可以尝试使用 SetEnvironmentVariable 和/或 _putenv 在加载外部库之前更正路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T18:40:48.563

这是因为您的 Windows 服务使用“本地系统帐户”运行。转到您的服务的属性和“登录”选项卡。从本地系统帐户更改为“此帐户”并提供您的凭据。不，该服务应该在用户帐户中运行并且应该使用用户 AppData。

# php - 命名空间类的 Netbeans 7.2 自动完成

> ID：14397895
> 
> 赞同：0
> 
> 时间：2013-01-18T11:23:14.820
> 
> 标签：php, netbeans, code-hinting

**编辑：**错误报告、接受和修补[http://netbeans.org/bugzilla/show_bug.cgi?id=225062](http://netbeans.org/bugzilla/show_bug.cgi?id=225062)

自从一两天以来，我的 Netbeans IDE 停止提示类参数，并且自动完成对命名空间类不起作用，我只是想知道我可能做了什么来破坏自动完成/提示 - 或者这是一个已知的错误。这在使用 Netbeans 7.2 以及 Netbeans 7.3 beta 2 的 Ubuntu 12.10 和 Windows 7 上重现。

如果这是一个已知的错误，这会很奇怪，因为我几乎可以肯定它在几天前工作。

设想;
类*HostNameRoute*存在于*Router\Route*命名空间中，构造函数接受两个参数*$route*和*$action*。

```
namespace Router\Route;
class HostNameRoute {} 
```

从根命名空间中，我曾经能够通过键入以下内容获得提示和自动完成：

```
new HostNam[Ctrl+Space]  ::  Suggests HostNameRoute($route, $action)  :: [Enter]

Would produce
new \Router\Route\HostNameRoute(<$route>, <$action>); 
```

但现在 IDE 只提示限定名称，但不显示参数文档，也不自动完成。然而，它确实在类名上生成了一个静态的奇怪框（不是交互式的）。

但是，提示和自动完成仍然适用于根命名空间中的类：

```
new Te[Ctrl+Space]  :: Suggests Test($arg) :: [Enter]

Produces
new Test(<$arg>); 
```

* * *

**适用于根命名空间**
![自动完成作品](../Images/4bf95a5b769b30da81312346d1c58c5d.png)

* * *

**不适用于命名空间类** ![没有自动完成](../Images/184b38870a57a86c48f39d431618c925.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:17:12.230

我刚刚遇到了一个类似的问题，即 Netbeans 停止在特定项目中自动完成（其他项目运行良好）。我在 Windows 7 上运行 Netbeans 7.2.1。我也在使用命名空间和 use 语句。在尝试使用自动完成功能时，Netbeans 只是给了我以相同方法声明的变量名。在类中使用*this*关键字甚至不会给我该类中的变量/方法。

这是我为修复它所做的：

1.  转到“项目”窗口并右键单击我的项目并点击关闭
2.  封闭的Netbeans
3.  删除了 Netbeans 的缓存。这可以在 Windows 机器上的 C:\Users\ProfileName\AppData\Local\NetBeans\Cache\7.2.1 中找到。
4.  打开 Netbeans
5.  通过转到 File->New Project... 将我的代码添加回项目
6.  检查自动完成，它工作！

# php - 将 imagemagick 命令行更改为 php imagick

> ID：14397896
> 
> 赞同：1
> 
> 时间：2013-01-18T11:23:23.670
> 
> 标签：php, imagemagick, imagick

出于性能原因（通过 php 执行的速度有时非常慢），我将大部分 imagemagick 命令转换为 php 的 imagick。

我在这里阅读了关于 -channel 和 -level 的文档： [http](http://www.imagemagick.org/script/command-line-options.php#channel) ://www.imagemagick.org/script/command-line-options.php#channel 和 [http://www.imagemagick.org/script/command-line- options.php#level](http://www.imagemagick.org/script/command-line-options.php#level)

特别是关于黑色、白色和伽马值：

> 给定一个、两个或三个用逗号分隔的值：黑点、白点、伽玛（例如：10,250,1.0 或 2%,98%,0.5）。黑白点范围从 0 到 QuantumRange，或从 0 到 100%；如果省略白点，则将其设置为 (QuantumRange - black_point)，以使对比度变化居中。如果字符串中的任何位置出现 % 符号，则黑点和白点都是整个颜色范围的百分比。Gamma 将对值进行 -gamma 调整。如果省略，则假定默认值为 1.0（无伽马校正）。
> 
> 在正常使用 (-level) 中，图像值被拉伸，使得原始图像中给定的“black_point”值设置为零（或黑色），而给定的“white_point”值设置为 QuantumRange（或白色）。这为您提供了对图像的直接对比度调整。然后将调整生成图像的“伽玛”。

基于此，我试图改变

```
convert a.jpg -channel R -level 33% -channel G -level 33% b.jpg 
```

至

```
$quantumRange = $image->getQuantumRange();
//get the 33%
$blackPoint = $quantumRange ['quantumRangeLong']/100*33;
//to get the middle ground between black and white - also tried with $quantumRange['quantumRangeLong']
$whitePoint = $quantumRange ['quantumRangeLong'] - $blackPoint;
$gamma = 1;

$image->levelImage ( $blackPoint , $gamma , $whitePoint , Imagick::CHANNEL_RED);
$image->levelImage ( $blackPoint , $gamma , $whitePoint , Imagick::CHANNEL_GREEN); 
```

但结果看起来确实完全不同......那里有任何专家可以指出imagick如何执行其频道级别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:13:59.967

我在我的电脑上试了一下，PHP和命令行版本非常相似：

![原来的](../Images/8467500e868af9bf88d26f35e9166cb0.png)
原来的

![命令行](../Images/29cbc2984468bd36c8fc62ce926e5a9b.png)
命令行

![在此处输入图像描述](../Images/c7a4c2b403e893a2f2eed2696037e900.png)
PHP

我看不出你的脚本有什么问题，但你可以试试我的，看看它是否有不同的工作方式。

```
$image = new Imagick();
$quantum_range = $image->getQuantumRange();
$max_quantum = $quantum_range["quantumRangeLong"];
$image->readImage("rose.jpg");
$black_point = $max_quantum * .33;
$white_point = $max_quantum - $black_point;
$gamma = 1.0;
$image->levelImage($black_point, $gamma, $white_point, Imagick::CHANNEL_RED);
$image->levelImage($black_point, $gamma, $white_point, Imagick::CHANNEL_GREEN);
header("Content-type: image/jpeg");
echo $image;
$image->writeImage("php.jpg"); 
```

如果它仍然不起作用，这是我的 ImageMagick 版本和 PHP 的 ImageMagick 模块：

```
$ convert -version
Version: ImageMagick 6.7.9-10 2012-10-10 Q16 http://www.imagemagick.org 
```

```
Array ( [versionNumber] => 1632
        [versionString] => ImageMagick 6.6.0-4 2012-05-03 Q16
                           http://www.imagemagick.org ) 
```

# javascript - 保存 .json chrome 插件

> ID：14397898
> 
> 赞同：1
> 
> 时间：2013-01-18T11:23:30.543
> 
> 标签：javascript, google-chrome, google-chrome-extension

我见过有人问如何将 .json 配置文件加载到 chrome 插件。

但是我不明白如果你不能写它会有什么用？

有什么方法可以写入您的应用程序目录中的 JSON 文件吗？

（我知道 localStorage 存在）

这是我如何获取 .json 文件

```
$.getJSON(chrome.extension.getURL('/config_resources/config.json'), function(settings) {
  //..
}); 
```

# facebook-graph-api - 通过 FQL 或图形 API 检索多个帖子的最近评论 - 结果不一致

> ID：14397900
> 
> 赞同：0
> 
> 时间：2013-01-18T11:23:36.167
> 
> 标签：facebook-graph-api, facebook-fql, facebook-comments

我们正在尝试对 fb 页面的最新评论进行投票。似乎使用图形 API 需要对每个帖子进行单独调用（例如，如果有 100 个帖子，我们将不得不执行 100 次调用来检索所有帖子的评论）。

因此，我们通过以下方式使用 FQL：

```
 https://api.facebook.com/method/fql.query?format=json&access_token<acess_token>&query=SELECT id, text, post_id, fromid, username, time, likes FROM comment WHERE post_id in ('156790397738497_357582840992584', ...) 
```

大多数情况下它工作得很好，但我们发现了几种情况，它不会返回帖子的所有评论（使用特定帖子 ID 的图形 API 会检索所有帖子）。

有没有人找到任何解决方案或更好的方法来检索页面的所有最近评论？

我们已经填写了一个 FB 错误（[http://developers.facebook.com/bugs/529168040436289](http://developers.facebook.com/bugs/529168040436289)），但他们似乎不愿意调查它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:33:07.923

这对我们来说也是一个大问题。这真的应该工作。FB不支持像这样重要的事情，这有点令人失望。

# android - 无法将应用程序安装到 Android 平板电脑

> ID：14397901
> 
> 赞同：0
> 
> 时间：2013-01-18T11:23:37.127
> 
> 标签：android

我为 Android 4.1(ICS) 构建了一个 Android 应用程序。但是我无法将它安装到平板电脑上。它显示错误为`The application cannot be installed`。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:28:47.290

首先检查您的设备操作系统版本。如果低于 4.1，应用程序将无法在此运行。

尝试更改`project.property`项目中的文件。

可能是你`target=15 or 14`根据你的平板电脑减少了它，即`target = 11 or 13`

# objective-c - 将邮件拖放到 OS X 应用程序中

> ID：14397905
> 
> 赞同：2
> 
> 时间：2013-01-18T11:23:47.960
> 
> 标签：objective-c, macos, drag-and-drop

我希望能够从 Outlook for Mac 和 Mail.app 拖放和发送电子邮件到 OS X 应用程序。如果我从我的查找器拖放和发送电子邮件（拖动文件），则调用以下内容：

```
- (NSDragOperation)draggingEntered:(id <NSDraggingInfo>)sender 
```

但是，如果我从 Outlook for Mac 或 Mail.app 拖放，则不会调用该方法。我对如何实现这一目标有点迷茫。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T06:02:00.603

从[拖放编程主题](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html)的[拖动目的地部分](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Concepts/dragdestination.html)：

> 要接收拖动操作，您必须通过向对象发送 registerForDraggedTypes: 消息来注册窗口或视图将接受的粘贴板类型，该消息在 NSWindow 和 NSView 中都定义，并实现 NSDraggingDestination 协议中的几个方法。在拖动会话期间，候选目的地仅在目的地注册为与被拖动的粘贴板数据类型匹配的粘贴板类型时才会收到 NSDraggingDestination 消息。当图像进入、在内部移动、然后退出或在目的地边界内释放时，目的地会收到这些消息。

为了接受来自 Mail 的拖拽，您需要知道要注册的粘贴板类型。您可以使用 ClipboardViewer 来发现 Mail 在拖动粘贴板上放置了哪些类型的数据（在Xcode 最新版本的[辅助工具包中提供）。](https://developer.apple.com/downloads/index.action?name=for%20Xcode%20-)启动 ClipboardViewer 并从工具栏中的组合框中选择拖动剪贴板。切换回 Mail 并简单地拖动一条消息，然后返回 ClipboardViewer。您应该会在边栏中看到许多粘贴板类型。特别感兴趣的是`public.url`和`com.apple.pasteboard.promised-file-content-type`类型。前者表示一个 URL 在粘贴板上。后者是一个[文件承诺](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Tasks/DraggingFiles.html#//apple_ref/doc/uid/20001288-102943)在粘贴板上。URL 往往是一个很好的起点，但在这种特殊情况下，我们可以看到 URL 不像文件 URL 那样有用，它是一个相当不透明的消息 URL。`registerForDraggedTypes:`这意味着我们需要处理文件承诺，因此在配置我们的视图以接收拖动时，我们应该调用`NSFilesPromisePboardType`.

[Dragging File Promises](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Tasks/DraggingFiles.html#//apple_ref/doc/uid/20001288-102943)文档的第二部分具体概述了如何处理接收 Promise。总而言之，您`-namesOfPromisedFilesDroppedAtDestination:`从内部调用拖动的发送者，`performDragOperation:`让他们将拖动的数据写入您选择的位置（例如，履行承诺）。`concludeDragOperation:`拖动的发起者将在 AppKit 调用您的对象之前将数据写入磁盘。在任何时候，`concludeDragOperation:`您都可以从磁盘加载删除的文件并根据需要处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T09:19:46.850

我想我会发布我对这个问题的答案，因为我挣扎了一段时间。这段代码处理一个承诺，并简单地将丢弃的邮件复制到您的用户文件夹中名为 Drop Stuff 的文件夹中。它也适用于任何文件，并且似乎适用于其他应用程序，包括地址簿和提醒等。它不适用于复制多个文件（或邮件消息）。

```
import Cocoa

class DropArea: NSImageView, NSDraggingDestination 
{

    override func drawRect(dirtyRect: NSRect) 
    {
        super.drawRect(dirtyRect)
    }

    required init?(coder: NSCoder)
    {
        let types = [NSFilenamesPboardType, NSURLPboardType, NSPasteboardTypeTIFF, NSFilesPromisePboardType]
        super.init(coder: coder)
        registerForDraggedTypes(types)
    }

    override func draggingEntered(sender: NSDraggingInfo) -> NSDragOperation
    {
        return .Copy
    }

    override func performDragOperation(sender: NSDraggingInfo) -> Bool
    {
        var error: NSError?

        var folderPath = NSHomeDirectory()+"/Drop Stuff/"
        if (!NSFileManager.defaultManager().fileExistsAtPath(folderPath))
        {
            NSFileManager.defaultManager().createDirectoryAtPath(folderPath, withIntermediateDirectories: true, attributes: nil, error: &error)
        }

        var folderURL = NSURL(fileURLWithPath: folderPath)
        var f = sender.namesOfPromisedFilesDroppedAtDestination(folderURL!)
        println("Copied to \(folderPath)")
        return true
    }
} 
```

当然欢迎任何改进此代码的建议:-)

# google-apps-script - 列出 Google 驱动器上特定演示文稿/文档的所有共享用户

> ID：14397910
> 
> 赞同：2
> 
> 时间：2013-01-18T11:23:50.960
> 
> 标签：google-apps-script, google-drive-api

我们需要一份完整的列表，列出在 Google 驱动器上获得特定演示文稿/文档的“共享”查看权限的人员。我们有一个屏幕截图，但可能还不够。我们如何以编程方式检索这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:14:15.133

附加到`File`对象的属性包括三个与用户相关的项目：

*   **Owner** - 单个`User`对象，使用`File.getOwner()`.
*   **编辑**者-`Users`对文件具有编辑权限的一组人员，使用`File.getEditors()`. 包括所有者。
*   **查看器**`Users`-对文件具有只读查看权限的数组，使用`File.getViewers()`. 包括所有者。

这些只能由文件所有者以编程方式获得。

以下功能是从将已[删除的谷歌驱动器文件恢复到目标文件夹](https://stackoverflow.com/questions/14518410/restore-trashed-google-drive-files-to-a-target-folder/14541247#14541247)的实用程序。该`getFileInfo()`函数返回一个对象，该对象具有提供的`File`or的属性`Folder`，包括编辑器和查看器。它会忽略编辑者和查看者列表中的所有者。随意调整它以适应您自己的情况。注意：它依赖于您可以[在此 gist 中](https://gist.github.com/mogsdad/4644369)找到的其他实用程序功能。

```
/**
 * Return an object containing relevant information about the given file.
 * See https://developers.google.com/apps-script/class_file.
 * From: https://gist.github.com/mogsdad/4644369
 *
 * @param {Object}  file   File or Folder object to examine.
 *
 * @return {Object}        Interesting file attributes.
 * <pre>{
 *     id: unique id (ID) of the folder or file
 *     name: the name of the File
 *     size: the size of the File
 *     type: The type of the file
 *     created: date that the File was created
 *     description: the description of the File
 *     owner: user id of the owner of the File
 *     otherViewers: list of user ids of viewers of the File, w/o owner
 *     otherEditors: list of user ids of editors of the File, w/o owner
 * }</pre>
 */
function getFileInfo (file) {
  var fileInfo = {
    id: file.getId(),
    name: file.getName(), 
    size: file.getSize(),
    type: (file.getMimeType) ? docTypeToText_(file.getMimeType()) : "folder",  // DriveApp Folders don't have getMimeType() method.
    created: file.getDateCreated(),
    description: file.getDescription(),
    owner: userNames([file.getOwner()],false),
    otherViewers: userNames(file.getViewers(),true),
    otherEditors: userNames(file.getEditors(),true)
    };
  return fileInfo;
} 
```

以下是文件属性的示例：

```
{ "id": "0B2kSPNhhUowaRGZKY3VGLUZCREk",
  "name": "Rescued Files",
  "size": 0,
  "type": "folder",
  "created": "2016-06-13T20:18:14.526Z",
  "description": "",
  "owner": "user@example.com",
  "otherViewers": "none",
  "otherEditors": "none"
} 
```

### 奖励内容

下面是一个脚本，它扫描您 Google Drive 中的所有文件和文件夹，生成包含用户信息的日志。（它没有避免超时的规定，警告购买者！）

```
/**
 * Generate logs with user sharing info for all files & folders.
 */
function showSharing() {
  var files = DriveApp.getFiles();
  var folders = DriveApp.getFolders();

  while (files.hasNext() || folders.hasNext()) {
    var iterator = files.hasNext() ? files : folders;

    Logger.log(JSON.stringify(getFileInfo(iterator.next())));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-09T10:19:18.530

打开共享，复制所有用户，仅将值粘贴到一个新的电子表格中。

# android - 窗口背景被状态栏裁剪

> ID：14397913
> 
> 赞同：7
> 
> 时间：2013-01-18T11:24:10.827
> 
> 标签：android, android-layout

我将图像设置为窗口背景：

```
<style name="AppTheme" parent="@android:style/Theme.Holo.Light">
    <item name="android:windowBackground">@drawable/bg_window</item>   
</style> 
```

它适用于平板电脑和全屏窗口：

![在此处输入图像描述](../Images/72f6540f41c0eee7dbdaeaebb6559934.png)

但在手机上，它被状态栏夹住：

![在此处输入图像描述](../Images/02f3bf0230eb31f424eed8fdd6cd0648.png)

这是事情的运作方式吗？我该如何避免呢？当然，我可以为每个布局设置背景，但我想知道这是否是解决问题的唯一方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:03:29.853

我对这个问题的解决方案（至少对于手机来说）是创建一个 xml 可绘制对象，将状态栏高度作为顶部偏移量

例如drawable/window_background.xml：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:top="25dp">
        <bitmap android:src="@drawable/some_background" />
    </item>
</layer-list> 
```

如果状态栏位于底部，这将不起作用。

编辑：编辑答案以使用单个 xml 可绘制对象，如 Aleksejs Mjaliks 所建议的那样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:45:53.383

试试下面的方法。。

```
<style name="AppTheme" parent="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen">
<item name="android:windowBackground">@drawable/bg_window</item>   
</style> 
```

:)

# java - Android解压缩不是目录问题

> ID：14397916
> 
> 赞同：1
> 
> 时间：2013-01-18T11:24:15.960
> 
> 标签：java, android

我正在尝试解压缩存储在原始文件夹中的 zip 文件。代码如下

```
try
{
    File myDir = new File(getFilesDir().getAbsolutePath());
    File newFile = new File(myDir + "/imageFolder");

if(!newFile.exists())
                    {
                        newFile.mkdir();
                    }

    ZipInputStream zipIs = new ZipInputStream(con
            .getResources().openRawResource(R.raw.images));
    ZipEntry ze = null;

    while ((ze = zipIs.getNextEntry()) != null)
    {

        Log.v("Name", ze.getName());
        Log.v("Size", "" + ze.getSize());

        if(ze.getSize() >0)
        {
            FileOutputStream fout = new FileOutputStream(newFile
                    + "/" + ze.getName());                      

            byte[] buffer = new byte[1024];
            int length = 0;

            while ((length = zipIs.read(buffer)) > 0)
            {
                fout.write(buffer, 0, length);
            }
            zipIs.closeEntry();
            fout.close();
        }   
        }

    zipIs.close();

} catch (Exception e)
{
    e.printStackTrace();
} 
```

但我不断收到此错误

> 01-18 11:24:28.301: W/System.err(2285): java.io.FileNotFoundException: /data/data/com.example.ziptests/files/imageFolder/TestImages/background.png （不是目录）

我完全不知道为什么会导致这种情况，它会找到文件，但是在将它们写出来时，会出现该错误。最初我发现一个问题是由于将 zip 文件压缩到 mac 上引起的，所以我将文件压缩到我的 windows 机器上，这样就解决了一个问题（当你在 mac 上压缩时，它会添加这些额外的文件夹以及诸如 store.ds 之类的文件，这会在尝试解压缩时导致错误），但这不是目录错误不断出现。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:42:08.067

请尝试以下链接代码以解压缩 zip 文件。

**提取 Zip 文件的代码**

[解压缩压缩文件](http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29)

问题是我正在上传不是使用 winrar 软件制作的 zip 文件，所以它没有正确提取并给我错误。

它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:42:17.330

您不能将文件写入该`raw`文件夹。它是一个只读目录，旨在包含您的 apk 中包含的资源文件。

* * *

更新该文件在目录
中会更好。`assets`您可以通过[`AssetManager`](http://developer.android.com/reference/android/content/res/AssetManager.html). 如果没有，请将其留在`res/raw`目录中，但通过[`Resources.openRawResource`](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource%28int%29). 无论哪种方式，它们都是只读的。

# ssl - 在 C 客户端/服务器应用程序上重用 SSL 会话

> ID：14397917
> 
> 赞同：3
> 
> 时间：2013-01-18T11:24:18.893
> 
> 标签：ssl, openssl

我正在编写一个客户端/服务器应用程序，我们将使用 SSL 通信。我很难弄清楚为什么外部缓存不起作用。我不想使用内部缓存，因为我想将会话存储在数据库中。虽然我已经注册了一个 callabck`SSL_CTX_sess_set_get_cb`并且`SSL_CTX_sess_set_new_cb, SSL_CTX_sess_set_get_cb`不会在服务器端被调用，并且在每次连接时都会创建一个新的 SSL_SESSION 。客户端似乎没有在握手时发送 session_id 但我不确定并且不知道如何测试它。在客户端，我使用 SSL_set_session 将会话附加到 SSL 连接，并且我在 Ubuntu 上使用 openSSL 0.9.8。

```
//for server side
SSL_CTX_set_session_cache_mode(ctx, SSL_SESS_CACHE_SERVER | SSL_SESS_CACHE_NO_INTERNAL | SSL_SESS_CACHE_NO_AUTO_CLEAR );

//for client side
SSL_CTX_set_session_cache_mode(ctx, SSL_SESS_CACHE_CLIENT | SSL_SESS_CACHE_NO_INTERNAL | SSL_SESS_CACHE_NO_AUTO_CLEAR ); 
```

基本上客户端和服务器的流程都是这样的。为了清楚起见，我删除了错误处理。如果成功，应用程序将通过所有这些。

```
SSL_library_init();
SSL_load_error_strings();

ctx = SSL_CTX_new( SSLv23_method() );

SSL_CTX_set_info_callback(ctx, &apps_ssl_info_callback );
SSL_CTX_load_verify_locations( ctx,calist_file, calist_path );
SSL_CTX_set_default_verify_paths(ctx);
SSL_CTX_use_certificate_file(ctx,certfile,SSL_FILETYPE_PEM);
SSL_CTX_set_default_passwd_cb(ctx,password_cb);
SSL_CTX_set_default_passwd_cb_userdata(ctx, password );
SSL_CTX_use_PrivateKey_file(ctx,keyfile,SSL_FILETYPE_PEM);
SSL_CTX_check_private_key(ctx) );
SSL_CTX_set_default_passwd_cb(ctx,password_cb);
SSL_CTX_set_default_passwd_cb_userdata(ctx, password );
SSL_CTX_use_PrivateKey_file(ctx,keyfile,SSL_FILETYPE_PEM);
SSL_CTX_check_private_key(ctx);
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER|SSL_VERIFY_CLIENT_ONCE, verify_callback);
SSL_CTX_set_client_CA_list( ctx, SSL_load_client_CA_file( calist_file ) );
SSL_CTX_set_verify_depth(ctx,2); 
```

/*我处理获取 DH 参数并创建 RSA 临时密钥和随机性的例程*/

```
RAND_load_file( random, SIZE );
load_dh_params(ctx,DHFILE); 
generate_eph_rsa_key(ctx);

SSL_CTX_set_session_id_context(ctx,(void*)&s_server_session_id_context,sizeof (s_server_session_id_context) );
mydata_index = SSL_get_ex_new_index(0, "mydata index", NULL, NULL, NULL);

SSL_CTX_set_session_cache_mode(ctx, (ctx, SSL_SESS_CACHE_SERVER | SSL_SESS_CACHE_NO_INTERNAL |  SSL_SESS_CACHE_NO_AUTO_CLEAR );
SSL_CTX_sess_set_get_cb(ctx, get_session_cb);
SSL_CTX_sess_set_new_cb(ctx, new_session_cb );
SSL_CTX_sess_set_remove_cb(ctx, remove_session_cb ); 
```

我想要的是当客户端连接时应该调用 get_session_cb 并且在那里我将根据一些标准选择会话 id（将来会话 id 将具有某种意义（主机 id）不仅仅是随机数但这部分不是立即实施）。如果没有符合我标准的会话，那么应用程序将通过 new_session_cb 创建一个会话。服务器应该具有相同的行为，首先将尝试在其会话池中查找会话，如果查找不成功，则仅创建一个新会话。

我不确定我想要的客户是否真的可能。所以这就是我什至尝试获取一个会话并通过 SSL_set_session(ssl, session) 手动设置它的方式。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:01:49.280

如果没有在您的代码中看到所有其他 OpenSSL 调用，很难说，我们真的需要一个自包含的示例来展示该问题。话虽如此，这听起来像是使用会话票证扩展的[RFC 5077](https://www.rfc-editor.org/rfc/rfc5077)服务器无状态会话恢复可能会出现问题。关闭它可以避免我在外部会话中遇到的一些问题：

```
SSL_CTX_set_options(sslctx, SSL_OP_NO_TICKET); 
```

但是，如果您想走服务器无状态会话恢复之路，则完全可以预期在服务器端没有调用您的外部会话缓存——这正是没有服务器状态的会话恢复点。

# php - PDO fetchAll 需要很长时间

> ID：14397922
> 
> 赞同：0
> 
> 时间：2013-01-18T11:24:38.427
> 
> 标签：php, mysql, pdo

我正在使用 PDO 从我的 MySQL 数据库中获取结果。

如果我只执行执行语句，则需要大约`8 seconds`. （连续做同样的事情 350 次。）

添加`fetchAll()`语句时，最长可达**28 秒**。这是正常行为吗？

我在 web 服务器和 db 服务器之间进行了网络测试速度，它在附近，`87 Mbits/sec`所以这不是问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:49:16.653

8 秒的执行时间也长得离谱 - 这表明您没有正确索引表。因此，从表中获取数据需要很长时间。它也可能使用临时表。

确保您在“搜索”中使用了任何字段，或者在已编入索引的联接表中用作搜索键。正确的索引有点棘手 - 但要测试，在查询之前添加“EXPLAIN”并打印出结果 - 每个表都会有一行。如果您有任何“使用 WHERE”或“创建临时表”，那么您可能需要通过在这些表上添加索引来删除这些内容。

# spring - 使用 spring 框架部署 gwt 应用程序时上下文初始化失败

> ID：14397925
> 
> 赞同：0
> 
> 时间：2013-01-18T11:24:45.943
> 
> 标签：spring, gwt, jpa

嗨，我正在尝试将 spring 与 jpa 集成为 gwt 客户端的后端。第一次尝试这样做，但无法解决此错误

```
15:56:43,315 ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'surevyDAOImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: JPA PersistenceProvider returned null EntityManagerFactory - check your JPA provider setup!
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:341)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: JPA PersistenceProvider returned null EntityManagerFactory - check your JPA provider setup!
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.orm.jpa.EntityManagerFactoryUtils.findEntityManagerFactory(EntityManagerFactoryUtils.java:98)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findNamedEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:510)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:492)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:656)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:629)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:156)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:338)
    ... 31 more
Caused by: java.lang.IllegalStateException: JPA PersistenceProvider returned null EntityManagerFactory - check your JPA provider setup!
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 45 more 
```

我一直在使用以下文件：web.xml：

```
<!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>MobiOffer_GWT.html</welcome-file>
  </welcome-file-list>

   <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/log4j.properties</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
     <filter>
        <filter-name>OpenEntityManagerInViewFilter</filter-name>
        <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
        <init-param>
            <param-name>entityManagerFactoryBeanName</param-name>
            <param-value>entityManagerFactory</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>OpenEntityManagerInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

  <servlet>
     <servlet-name>rest-json-api</servlet-name>
     <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
     <load-on-startup>2</load-on-startup>
  </servlet>
  <servlet-mapping>
     <servlet-name>rest-json-api</servlet-name>
     <url-pattern>/restServices/*</url-pattern>
  </servlet-mapping>

  <servlet>
      <servlet-name>gwtDispatcher</servlet-name>
      <servlet-class>org.gwtrpcspring.RemoteServiceDispatcher</servlet-class>
  </servlet>
  <servlet-mapping>
      <servlet-name>gwtDispatcher</servlet-name>
      <url-pattern>/mobioffer_gwt/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

我上面 web.xml 文件引用的 rest-json-api-servlet.xml 文件是：

```
 <!-- auto scan annotations -->
    <context:component-scan base-package="com.reva.mobioffer.services"/>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jsonHttpMessageConverter"/>
            </list>
        </property>
    </bean>

    <bean id="handlerMapping" class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

    <bean id="jsonHttpMessageConverter"
          class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>

    <bean class="com.reva.mobioffer.views.MyContentNegotiatingViewResolver">
        <property name="mediaTypes">
            <map>
                <entry key="json" value="application/json"/>
            </map>
        </property>
        <property name="defaultContentType" value="application/json"/>
        <property name="defaultViews">
            <list>
                <bean class="com.reva.mobioffer.views.JSONView"/>
            </list>
        </property>
    </bean> 
```

我也在使用 applicationContext.xml 文件，但我不确定这个 xml 文件的确切用途（我可以看到通过它提到了 jpa 信息）

```
<context:component-scan base-package="com.reva.mobioffer.domain"/>

    <context:annotation-config/>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="entityManagerFactory"
          class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="mobioffer"/>
    </bean>
    <bean id="persistenceUnitManager"
          class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
        <property name="persistenceXmlLocation">
            <value>classpath:META-INF/persistence.xml</value>
        </property>
    </bean>

    <bean id="persistenceAnnotation"
            class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"
            />

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>

    <!-- Transaction manager for a single EntityManagerFactory (alternative to JTA) -->
    <bean id="transactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>
 <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/> 
```

这也给我一个异常，因为无法为 org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0 创建 bean

persistance.xml 文件位于 META-INF 文件中：

```
<persistence-unit name="mobioffer" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>com.reva.mobioffer.domain.entity.Survey</class>
        <class>com.reva.mobioffer.domain.entity.SurveyLog</class>
        <class>com.reva.mobioffer.domain.entity.SurveyLogPK</class>
        <class>com.reva.mobioffer.domain.entity.SurveyQuestion</class>
        <class>com.reva.mobioffer.domain.entity.SurveyQuestionOptionMap</class>
        <class>com.reva.mobioffer.domain.entity.SurveyQuestionOptionMapPK</class>
        <class>com.reva.mobioffer.domain.entity.SurveyQuestionOption</class>
        <class>com.reva.mobioffer.domain.entity.SurveyQuestionOptionPK</class>
        <class>com.reva.mobioffer.domain.entity.SurveyQuestionResponse</class>
        <class>com.reva.mobioffer.domain.entity.SurveyQuestionResponsePK</class>

                <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:4406/mobioffer" />
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password" value="root" />
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
        </properties>

    </persistence-unit>
</persistence> 
```

我已经坚持了很长一段时间，但即使经过极端搜索也找不到解决它的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:56:32.007

如异常所示：

> JPA PersistenceProvider 返回 null EntityManagerFactory - 检查您的 JPA 提供程序设置！

看起来您的 JPA 设置不正确。我首先要确保您可以从运行它的设备连接到 MySQL 数据库。MySQL 具有精细的安全性，可以根据用户来自的主机/IP 锁定用户。还要确保用户有权访问数据库。

其次，我会确保我拼写了所有数据库名称、用户名等。同样，异常来自 JPA 设置，所以从那里开始。

# java - 我应该使用哪个 Apple Push Notification Service Java 库？

> ID：14397926
> 
> 赞同：41
> 
> 时间：2013-01-18T11:24:47.573
> 
> 标签：java, ios, apple-push-notifications

[我需要使用Apple 推送通知服务 (APNS)](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)从我的 Java 服务器向 iOS 设备发送推送通知

我找到了两个用 Java 发送 APNS 推送通知的库：

1.  [java-apns](https://github.com/notnoop/java-apns)
2.  [javapns](http://code.google.com/p/javapns/)

但两者似乎都被放弃了（或者至少它们有错误，最后一个版本是一年前的）。

java-apns 有很多[forks](https://github.com/notnoop/java-apns/network)。该库是否有任何更新的分支正在积极开发中？还有其他更好的选择吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-08-22T21:28:02.960

如果其他人正在寻找 Java 中的 APNs 库，我们 RelayRides 刚刚发布了 Pushy ( [http://relayrides.github.io/pushy/](http://relayrides.github.io/pushy/) )。它做的一些事情与其他两个竞争者不同（比如异步网络 IO），因此它可以非常快速地发送大量消息。我们实际上也在生产中使用它，所以它由我们的工程师积极维护。享受！

编辑：需要明确的是，Pushy 是免费和开源的（MIT 许可证）。

编辑：**项目已移至[https://github.com/jchambers/pushy](https://github.com/jchambers/pushy)**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-26T11:30:29.773

经过一段时间的挖掘，我只能找到你提到的那两个库，所以我查看了 java-apns GitHub 页面上的一些最新分支，我能找到的最新分支是由一个名为“的用户完成的” froh42"。他的叉子位于[此处](https://github.com/froh42/java-apns)[**已死**]。最近的提交是 4 天前，但我不确定这个人是否真的在添加到 repo 的核心功能，因为它已经很晚了，我太累了，无法检查。

我的建议是，如果您要使用 java-apns，请查看 froh 的 repo 并查看它是否签出。[如果没有，您可以在此处查看](https://github.com/notnoop/java-apns/network)原始 java-apns 存储库中的分叉列表。对不起，我无法为您提供更多帮助，祝您好运！

**注意：请勿使用您的任何库，因为它们基于 Binary Provider API，将从 2020 年 11 月起停止工作！**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-26T12:42:44.153

几个月前，我在我们的一个应用程序的 Java 后端遇到了同样的问题，在搜索了库（实际上这在 Google App Engine 上什至不是一个可能的选项）之后，我找到了[Urban Airship](http://urbanairship.com/)。

Urban Airship 是您的后端和各种推送通知服务之间的中间人（它确实支持 APNS，但也支持 android/blackberry/Win）。您只需要在他们的平台上配置您的推送服务，对他们的端点之一实施 REST 调用即可！

他们有从每月 100 万（1.000.000）条通知开始的免费计划。

到目前为止，服务真的很好，它使我们能够快速扩展到其他推送服务，而无需在我们的服务器端实现特定代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-03T10:27:02.437

看起来 java-apns 正在更新。上次提交是 1 个月前...

[https://github.com/notnoop/java-apns](https://github.com/notnoop/java-apns)

我还没有使用它，但似乎至少该项目还没有死。

**2020 年更新：**该项目已终止，并且基于已弃用的 API，该 API 将于 2020 年 11 月停止工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-16T12:48:43.407

我使用javapns，到目前为止我没有看到问题（我的项目仍在开发中）；但我看到该项目自 2 年前以来没有更新。并且 java-apns 正在保持更新，我会尝试一下。

更新了我的答案，我从 3 个月前开始使用 pushy 作为 APN，它确实有更好的性能。现在我建议使用 pushy。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-07T08:29:10.430

最后我决定在我的项目中使用 JavaPNS ( [https://code.google.com/p/javapns/](https://code.google.com/p/javapns/) )，它易于使用并且符合我的要求。

但我最近发现了一个看起来很有前途的新项目，我打算在不久的将来使用。

[AeroGear](http://aerogear.org/)项目内部有几个库。其中之一是支持 Apple 的 APN、Google Cloud Messaging 和 Mozilla 的 Simple Push的[AeroGear UnifiedPush 服务器。](http://aerogear.org/docs/specs/aerogear-server-push/)

还具有客户端库（iOS、Android），可轻松与服务器集成：

*   [安卓教程](http://aerogear.org/docs/guides/aerogear-push-android/)
*   [iOS 教程](http://aerogear.org/docs/guides/aerogear-push-ios/)

还有其他一些很酷的功能，如[管理控制台](http://aerogear.org/docs/guides/AdminConsoleGuide/)、[Java Sender 客户端 API](http://aerogear.org/docs/guides/GetStartedwithJavaSender/)、[Rest API](http://aerogear.org/docs/specs/aerogear-push-rest/) ......

希望对其他人有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-10T16:23:45.553

`JavaPns`如果您打算使用它，我不会推荐，`queue mode`因为您想一次发送许多消息。有一个非常讨厌的[错误](http://code.google.com/p/javapns/issues/detail?id=115)让你失去推送通知，但图书馆说，一切都已发送。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-30T05:37:56.720

这个非常好我用过

[https://github.com/notnoop/java-apns](https://github.com/notnoop/java-apns)

我也试过javaapns

[https://code.google.com/p/javapns/](https://code.google.com/p/javapns/)

但是有些方法对我不起作用。它在发送通知时给了我success = true，但我的设备无法接收它。

# javascript - 二维数组到对象 (JavaScript)

> ID：14397927
> 
> 赞同：6
> 
> 时间：2013-01-18T11:24:49.170
> 
> 标签：javascript, arrays, json, object

我有一个数组，其中包含大量二维数组：

```
var myArray = [
    [2260146,2334221,"copy"],
    [1226218,2334231,"copy"],
    [2230932,-1,"copy"],
    [2230933,-1,"copy"],
    [2230934,-1,"copy"]
] 
```

我需要将此数组转换为以下形式的对象以将其作为 JSON 发送：

```
var json = [
  {
    "s_id": 2260146,
    "t_id": 2334221,
    "type": "copy"
  },
  {
    "s_id": 1226218,
    "t_id": 2334231,
    "type": "copy"
  },
  {
    "s_id": 12,
    "t_id": -1,
    "type": "copy"
  }
] 
```

（“s_id”应该是`myArray[0][0]`“t_id `myArray[0][1]`”和“type”`myArray[0][2]`等等。）

如何获得所需形式的数组？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T11:28:20.210

```
json = myArray.map(function(x) {
    return {    
        "s_id": x[0],
        "t_id": x[1],
        "type": x[2]
    }
}) 
```

请注意，IE < 9 不支持[map 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:27:54.153

尝试：

```
var length = myArray.length,
    json   = [];

for ( var i = 0; i < length; i++ ) {
  var subArray = myArray[i],
      item = {
        s_id: subArray[0],
        t_id: subArray[1],
        type: subArray[2]
      };
   json.push(item);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-15T19:31:33.703

您可以[解构](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)参数`map`并使用[速记属性名称](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015)：

```
const myArray=[[2260146,2334221,"copy"],[1226218,2334231,"copy"],[2230932,-1,"copy"],[2230933,-1,"copy"],[2230934,-1,"copy"]]

const output = myArray.map(([s_id, t_id, type]) => ({ s_id, t_id, type }))

console.log(output)
```

# java - 在 Java 中重写抽象方法

> ID：14397932
> 
> 赞同：1
> 
> 时间：2013-01-18T11:25:11.097
> 
> 标签：java, swing, model-view-controller, events, user-interface

这是 MVC 范例的类视图，该类由 2 组成，单击-和`JDialogs`时将打开。`JMenuItem``addEvent``editEvent`

```
 public class EventView extends javax.swing.JFrame {

 private javax.swing.JDialog addDialog;
private javax.swing.JDialog editDialog;

private EventModel model;

     /** Constructor */
    public EventView(EventModel model) {
        initComponents();
        this.model = model;
        updateEventTable();       
    }

   public void addEventListener(ActionListener al) {
        addEventButton.addActionListener(al);
    }

  /* public void clearListener(ActionListener cl) {
        clearEventButton.addActionListener(cl);
    }*/

   public void addDialog(ActionListener ae) {
        addEvent.addActionListener(ae);

    }
   public void editDialog(ActionListener ee) {
        editEvent.addActionListener(ee);
    }

} 
```

控制器类处理用户与监听器的交互。

```
public class EventController implements ActionListener {

//... The Controller needs to interact with both the Model and View.
private EventModel model;
private EventView view;

/** Constructor */
public EventController(EventModel model, EventView v){

    model = new EventModel();
    view = v;
    //... Add listeners to the view.
    view.addEventListener(new addEventListener());
    //view.clearListener(new clearEventListener());
    view.addDialog(new addDialogListener());
    view.editDialog(new editDialogListener());
}

class addEventListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        String name = "";
        String date;
        String start="";
        String end="";
        String venue="";
        String details="";
        String opportunities="";
        String moreOppor="";

        try {
            name = view.getEventName();
            date = view.eventDate().toString();
            start = view.startTime();
            end = view.endTime();
            venue = view.locationWhere();
            details = view.getDetails();
            opportunities = view.getOpportunities();
            moreOppor = view.getMore();
            model.addEvent(name,date,start,venue,details,opportunities,moreOppor,end);    
            view.showSuccess("Event Added!");

        } catch (Exception ex) {
            view.showError(ex);
        }
    }
}

class addDialogListener implements ActionListener {
    @Override
    public void actionPerformed(ActionEvent e) {
       System.out.println("");

    }
}
class editDialogListener implements ActionListener {
    @Override
    public void actionPerformed(ActionEvent e) {
         System.out.println("");
    }
} 
```

我有两个关于这个模块的问题：

1.  `EventController`显示一个错误，它不是抽象的，并且当我相信我这样做时不会覆盖抽象方法 actionPerformed。如我错了请纠正我。我确实有一个额外的 JMenuItem 被调用`deleteEvent`，但我还没有触及它。在 NetbeansIDE 上工作仅供参考

2.  我想`System.out.println("");`用可以让我显示`addDialog`视图类的对话框但我无法访问该组件的东西替换这些行。这个怎么做？我已经尝试过`view.`，但它没有显示允许`setVisible(true)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:32:21.913

1.  您的编译器非常正确： `EventController`没有声明`public void actionPerformed(ActionEvent e)`方法。但是，它确实有两个具有该方法的内部类，但这不算数。

您命名类的方式`addEventListener`表明您确实打算调用该方法`addEventListener`而不是声明一个类，但是根据您的代码无法给出明确的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:53:43.207

```
public class EventController {

} 
```

代替

```
public class EventController implements ActionListener {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:34:07.653

1）您忘记在 EventController 类中实现 actionPerformed() 方法。

2) 您应该将视图设置为 addDialogListener 和 editDialogListener 的参数。就像是 ：

```
public class addDialogListener implements ActionListener {

    private EventView view;

    public addDialogListener(EventView view){
       this.view = view;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
       view.doWhatever();
    }
} 
```

接着 ：

```
view.addDialog(new addDialogListener(view)); 
```

# entity-framework - Visual Studio 2012 中的 RDLC 报告-对象实体

> ID：14397933
> 
> 赞同：0
> 
> 时间：2013-01-18T11:25:12.610
> 
> 标签：entity-framework, rdlc

如何在 RDLC 报告中显示子属性值？例如：

```
public class Person
{
  public Address Address { get; set; }
}
public class Address 
{
  public string streetName {get;set;}
} 
```

如何在 RDLC 报告中显示 streetName 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:34:04.997

正如您在Brian Hartman[的这篇博客文章](http://blogs.msdn.com/b/brianhartman/archive/2010/10/27/nested-objects-in-local-mode.aspx)中看到的那样，自 VS2010 以来，LocalReport 中的嵌套类发生了变化。

他建议添加属性 [Serializable()]（如果适用）。

您的课程将如下所示：

```
[Serializable()]
public class Person
{
  public Address Address { get; set; }
}
[Serializable()]
public class Address 
{
  public string streetName {get;set;}
} 
```

编辑：在一些评论后添加了代码。尝试像这样实现你的类：

```
[Serializable()]
public class Person
{
    private Address _address;
    public Address Address
    {
        get
        {
            if(_address == null)
                return new Address(string.Empty);
            return _address;
        }
        set
        {
            _address = value;
        }
    }
    [Serializable()]
    public class Address
    {
        private string _streetName;
        public string streetName 
        { 
            get
            {
                return _streetName;
            }
            set
            {
                _streetName = value;
            }
        }
        public Address(string streetName)
        {
            _streetName = streetName;
        }
    }
} 
```

这样，它将始终返回一个值，并且永远不会为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:18:50.893

对于所有属性，我们必须在类中设置 [Serializable()]

```
[Serializable()]
public class Person
{
  public Address Address { get; set; }
}
[Serializable()]
public class Address 
{
  public string streetName {get;set;}
  public SubAddress SubAddress{get;set;}
}

[Serializable()]
public class SubAddress
{
  public string DoorNo {get;set;}
} 
```

在报告属性的代码选项卡中的报告中使用以下代码

```
 Public Function GetName(ByRef obj As Object) As String 
     If obj Is Nothing Then Return "na" 
     Else : Return obj.streetName 
     End If 
 End Function 
```

并将报告字段获取为 =Code.GetName(Fields!Address.Value)

# mysql - 具有相同标识符值的不同对象已与会话相关联：实体的 XXX

> ID：14397935
> 
> 赞同：0
> 
> 时间：2013-01-18T11:25:27.763
> 
> 标签：mysql, asp.net-mvc, asp.net-mvc-3, nhibernate, nhibernate-3

我们有一个运行 NHibernate 3 和 Castle.ActiveRecord for MySQL 的 ASP.NET MVC 3 C# 项目，我们试图让“每个请求一个会话”来使用[本教程](http://docs.castleproject.org/Active%20Record.Web%20applications.ashx)。

它似乎适用于某些东西，但是当我们这样做时`SaveAndFlush()`，该命令会给我们一个错误：

```
A different object with the same identifier value 
was already associated with the session: 142 
```

如果我们尝试只做，我们会得到相同的消息，所以它与函数`Save()`无关。`Flush()`

我在搜索时找到了一些结果，但没有什么可以用来让它工作。

我没有测试过的东西，因为我不知道我是怎么做的，是，

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "id") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:21:16.743

基本上问题可能在于您正在尝试`Save()`一个已经存在的对象。如果对象已设置标识符 ( `object.Id = 142`)，则不需要保存该对象。

如果您对其进行更改，并需要保存这些更改，您需要使用该`Update()`方法（如@OskarBerggren 所述）或该`SaveOrUpdate()`方法基本上检查并决定是保存对象还是更新它。最后一个可能最适合您的情况。改变你的电流，

```
session.Save(object); 
```

至，

```
session.SaveOrUpdate(object); 
```

该`Session`对象来自 NHibernate 的`SessionFactory`实现。但是，我看到你正在使用`ActiveRecordMediator`，所以你可以使用，

```
ActiveRecordMediator.GetSessionFactoryHolder().CreateSession() 
```

创建一个`Session`你可以用来保存你的模型。

# eclipse - 无法在 gwt 中通过 flextable 有效地使用窗口构建器是 Eclipse 问题吗？

> ID：14397943
> 
> 赞同：1
> 
> 时间：2013-01-18T11:25:55.620
> 
> 标签：eclipse, gwt, eclipse-plugin, uibinder, windowbuilder

我正在使用 eclipse indigo 和 gwt 2.4，当我需要`FlexTable`在我的 uibinder 的 xml 文件中使用时，我只是`FlexTable`用一些`ui:filed`名称声明，而在计数器 java 文件中，我正在添加我需要添加到`FlexTable`. 但是我找到了以下[链接](https://developers.google.com/web-toolkit/tools/gwtdesigner/layoutmanagers/gwt/flextable#GraphicalFeedback)，该链接说明了如何将小部件添加到`FlexTable`使用窗口构建器中那么问题是什么？

谢谢，

# ios - 无法使用 ios 在 SQLite 中插入数据

> ID：14397944
> 
> 赞同：0
> 
> 时间：2013-01-18T11:25:56.800
> 
> 标签：ios, xcode, sqlite, insert, xcode4.5

我使用此代码并且总是说“Error añadir contacto”与“Error 添加联系人”相同，这是怎么回事？我的数据库是：

```
CREATE TABLE IF NOT EXISTS Contacto (id INTEGER PRIMARY KEY AUTOINCREMENT, nombre TEXT, direccion TEXT, telefono TEXT) 
```

我的代码是：

```
-(IBAction)addContacto
{
    const char *dbpath = [_rutaDB UTF8String];
    sqlite3_stmt *statement;
    if (sqlite3_open(dbpath, &_db) == SQLITE_OK)
    {
        NSString *consulta = [NSString stringWithFormat:@"INSERT INTO Contacto (nombre, direccion, telefono) VALUES (\"%@\",\"%@\",\"%@\")",_nomb.text,_dir.text,_tlf.text];
        const char *insert_stmt = [consulta UTF8String];
        sqlite3_prepare_v2(_db, insert_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            _status.text = @"Contacto añadido.";
            _status.textColor = [UIColor greenColor];
            sqlite3_finalize(statement);
        }
        else
        {
            _status.text = @"Error añadir contacto.";
            _status.textColor = [UIColor redColor];
        }
        sqlite3_finalize(statement);
        sqlite3_close(_db);
    }
} 
```

谢谢你的帮助。

PD：创建的表没问题，我插入了一个默认条目并工作：

```
 const char *sql_insert = "INSERT INTO Contacto (nombre, direccion, telefono) VALUES ('Pepe', 'Avila 34', '928776622')";
            sqlite3_exec(_db,sql_insert, NULL, NULL, &errMsg); 
```

仅在创建 DB 时执行。

再次感谢。

# java - JButton中的图像自动调整？

> ID：14397948
> 
> 赞同：0
> 
> 时间：2013-01-18T11:26:04.707
> 
> 标签：java, swing, jbutton

我是 Java 新手，遇到了一个小问题。有人可以告诉我，当我调整整个 JFrame 的大小时，如何将 JButton 的图像设置为在 JButton 中自动调整大小/适合/可拉伸？JButton 位于带有 GridLayout 的 JPanel 中。

如果有人能写一个简短的解释，那就太好了。我需要这个来完成我正在使用的计算器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:56:24.083

*   将组件侦听器添加到按钮。
*   动态调整图像大小并更新按钮上的图像。

* * *

```
Image img = icon.getImage();  
Image newimg = img.getScaledInstance(NEW_WIDTH, NEW_HEIGHT, java.awt.Image.SCALE_SMOOTH);  
icon.setImage(newimg); 
```

# php - 我想要所有的属性值

> ID：14397949
> 
> 赞同：-2
> 
> 时间：2013-01-18T11:26:04.770
> 
> 标签：php, jquery, xml, xpath

我的 xml 看起来像这样：--->

```
 <?xml version="1.0"?>
            <childrens>
            <child1 entity_id="1" value="Root Catalog" parent_id="0">
                <child2 entity_id="2" value="Navigate" parent_id="1">
                    <child4 entity_id="4" value="Activities" parent_id="2">
                            </child4>
                    </child2>
            </child1>
            </childrens> 
```

我想输出如下内容：--->
根目录
导航
活动
这是我的代码：

```
<?php
$str = '<childrens>
<child1 entity_id="1" value="Root Catalog" parent_id="0">
    <child2 entity_id="2" value="Navigate" parent_id="1">
        <child4 entity_id="4" value="Activities" parent_id="2">
                </child4>
        </child2>
</child1>
</childrens>';
$pattern = '/<(.*)="(.*)">/';
preg_match_all($pattern, $str, $matches);
print_r($matches[1]);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:21:23.503

自从我使用 jquery 以来已经很久了，但如果你有，那么我认为获取值的粗略代码可能是

```
var selected = $('*[value]'),res =[]; 
for(var i =0;i<selected.length; i++) { 
 res.push(selected[i].value); 
} 
```

我相信您可以使用具有某些功能的 .each 在一行中执行此操作，我对 jquery 太生疏了，无法给您答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:40:27.940

这个怎么样：

```
<?php
$str = '<childrens>
<child1 entity_id="1" value="Root Catalog" parent_id="0">
    <child2 entity_id="2" value="Navigate" parent_id="1">
        <child4 entity_id="4" value="Activities" parent_id="2">
                </child4>
        </child2>
</child1>
</childrens>';
$xml = simplexml_load_string($str);

$values = $xml->xpath('//@value');

foreach($values as $value) {
   echo $value."\n";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:41:02.803

如果你有 xml 文件 saperated..

```
 <script>
      $(document).ready(function()
       {
        var html = '';
        $.get('my.xml', function(d){
           $(d).find('children').each(function(){ 
                   $(this).children().each(getChildNode);
            });
              console.log(html);
             alert(html);
       });

      function getChildNode(obj){
             html += $(this).attr('value') + '\n<br>';
            if($(this).children().length > 0){
                  $(this).children().each(getChildNode); 
             } 
       }

    });

</script> 
```

我希望它对你有用。

谢谢

# php - 从 CLI（命令行界面）运行的 3d Max 脚本 (.ms) 文件

> ID：14397950
> 
> 赞同：-1
> 
> 时间：2013-01-18T11:26:04.877
> 
> 标签：php, 3dsmax

我有一个 3d max demo.ms 脚本文件。我需要从`CLI(Command Line Interface)`. 请给我任何链接。我是初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T16:13:15.270

max 中没有真正的命令行选项。您只能从命令行使用脚本作为参数启动 max，一旦 max 启动，它将执行脚本。还有一些脚本可以注册一个 com 端口或套接字服务器，您也可以向其发送命令。

# php - 字符串比较在php中不起作用

> ID：14397951
> 
> 赞同：1
> 
> 时间：2013-01-18T11:26:07.420
> 
> 标签：php, string, if-statement

我对 php 很陌生。我有一个名为`json`. 当我尝试这样做时：

```
echo $json->status; 
```

我得到：

```
CREATED 
```

我尝试将此结果与正常字符串进行比较，`CREATED`如下所示：

```
if(strcasecmp("CREATED",$json->status))
{
    print_r("Order created successfuly");
} 
```

但由于某种原因，`if condition`未评估为`true`. 即使我`CREATED`比较`CREATED`！

不确定错误在哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:29:13.790

如果字符串相等，此函数返回零

```
if (strcasecmp("CREATED",$json->status) == 0) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T11:29:53.013

查看[手册](http://php.net/manual/en/function.strcasecmp.php)：

`Returns < 0 if str1 is less than str2; > 0 if str1 is greater than str2, and 0 if they are equal.`

`strcasecmp('a','a')`也是如此`0`，因此您必须将代码更改为

```
if(strcasecmp("CREATED",$json->status) == 0)
{
    print_r("Order created successfuly");
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T11:29:22.220

[http://php.net/manual/en/function.strcasecmp.php](http://php.net/manual/en/function.strcasecmp.php)

从页面引用：

> 如果 str1 小于 str2，则返回 < 0；> 0 如果 str1 大于 str2，如果它们相等则为 0。

所以`strcasecmp('CREATED', 'CREATED')`返回`0`。并且`0`不等于`true`。你必须这样做：

```
if (strcasecmp("CREATED",$json->status) === 0) {
    print_r("Order created successfuly");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T11:29:40.263

```
if (strcasecmp( $json->status, "CREATED") == 0) 
{
...
...

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T11:27:59.677

为什么不能只使用更简单的 if 语句？

```
if( $json->status == "CREATED" ) {
    print_r("Order created successfuly");
} 
```

并检查状态末尾或开头的空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T11:29:15.467

要比较字符串，请尝试执行以下操作：

```
if($json->status == "CREATED")
{
   echo "Order created successfuly";
} 
```

# javascript - 输入外部表格被选中

> ID：14397953
> 
> 赞同：-1
> 
> 时间：2013-01-18T11:26:15.013
> 
> 标签：javascript

我有一个小问题。我想我犯了一个很大的菜鸟错误，但我找不到。在下面的代码中，我尝试获取表单的输入，但它也会在表单之外获取输入。这是为什么 ？

这是我的JS代码：

```
function selectAll(bool){
    var form = document.forms['selectMailing'];
    for(var i=1; i<=form.length; i++) {
        form.elements['select'+i].checked = bool;
    }
} 
```

和 HTML：

```
<input type=button value="Select All" onclick="selectAll(true)"/>
<form method=post action="" id="selectMailing" onsubmit="return checkSelect()">
    <input type=checkbox name="select1" value="1" />
    <input type=checkbox name="select2" value="1" />
    <input type=submit value="Spammer" />
</form> 
```

所以当我尝试这个时，JS 在我的输入按钮所在的行返回错误'无法设置属性'已检查'未定义'。为什么会发生这种事情？我选择表单，只有他的元素和输入按钮没有名称，这可能与名称表单混淆。

谢谢你的帮助 ！

我知道 jquery，但我之前想学习 JavaScript，所以如果你唯一的答案是“使用 jQuery”，请去帮助别人 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:39:21.927

在您的“selectMailing”表单中，有 3 个输入。您可以通过在代码中为“form.length”发出警报来验证它。前两个输入是复选框类型，第三个是提交类型。

像这样修改 javascript 以访问复选框类型输入项（使用类型检查）

```
function selectAll(bool){
var form = document.forms['selectMailing'];
//alert(form.length);
for(var i=0; i<form.length; i++){
     if(form.elements[i].type == "checkbox")
     {
          form.elements[i].checked = bool;
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:34:36.527

从“i<=form.length”中删除“=”

# android - 在 API 11 之前捕获布局调整大小

> ID：14397959
> 
> 赞同：4
> 
> 时间：2013-01-18T11:26:55.030
> 
> 标签：android, android-layout

我正在动态创建一个板，由在相对布局中动态设置的视图组成。在我的 onCreate 中，我调用了创建所有内容的 Board 类的构造函数：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
    RelativeLayout boardLayout = (RelativeLayout) findViewById(R.id.layoutBoard);
    board = new Board(this, boardLayout);

} 
```

在我的 Board 类中，我设置了层的规则，我还需要设置我显示的视图的大小，我从和的值开始计算`boardLayout.getWidth()`它们`boardLayout.getHeight()`

现在的问题是，所有在屏幕上的实际绘制都是在onCreate方法结束*之后*才进行的，所以在创建的那一刻，图层的宽高都为零。

所以我决定使用以下方法设置大小：

```
 boardLayout.addOnLayoutChangeListener(new RelativeLayout.OnLayoutChangeListener() {
        @Override
        public void onLayoutChange(View v, int left, int top, int right,
                int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {
                board.setParentLayoutSize(left, top, right, bottom);
        }
    }); 
```

不幸的是，这种方法仅适用于 API 11，我必须坚持使用 API 10。我怎么能做到这一点？有没有办法在不使用这种方法的情况下监听布局变化？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:38:08.243

最优雅的解决方案是扩展 RelativeLayout 类，然后您可以覆盖 onSizeChanged：

```
protected void onSizeChanged (int w, int h, int oldw, int oldh) 
```

如果您需要知道充气后的尺寸，您可以尝试手动测量视图：因此调用 measure(...) 而不是 layout(...) 然后 getMeasuredWidth()/getMeasuredHeight 应该返回正确的尺寸。但这更棘手，如果您不确定它是如何工作的，请不要使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:48:46.207

在我找不到任何东西的几个小时后，我写了这条消息并立即发现： [如何检索视图的尺寸？](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r/11422556#11422556)

# apache-flex - Flex 在加载 IE 时给出错误 2032 流错误

> ID：14397963
> 
> 赞同：1
> 
> 时间：2013-01-18T11:27:10.460
> 
> 标签：apache-flex, internet-explorer-7, iostream, flexbuilder

我们在网上搜索并找到了 100 篇关于同一件事的帖子，但到目前为止我们还没有找到任何解决此问题的帖子。

因此，请原谅我再次问这个问题，但我们真的需要帮助来了解这里发生了什么。

我们有从 HTML 页面从 IE7 启动的 flex 应用程序。启动 SWF 应用程序后，它会多次调用后端 Java 服务（在 Weblogic 10 上运行）以检索信息。这很好用。

现在的问题是当我在同一个客户端上打开几个这样的实例时……例如通过打开多个选项卡或多个 IE7 窗口。然后我们得到#2032 流错误。

```
[FaultEvent fault=[RPC Fault faultString="HTTP request error" 
faultCode="Server.Error.Request" faultDetail="Error: [IOErrorEvent type="ioError" 
bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. 
URL: http://ServerName:Port/Myservice"]. URL: http:// ServerName:Port/Myservice"]     
messageId="CA4B34AD-7A46-461E-7C6F-4D618ED0A112" type="fault" bubbles=false 
cancelable=true eventPhase=2] 
```

现在，如果我输入 http://ServerName : Port / Myservice [忽略空格]

在 IE7 中，它可以毫无问题地进入服务。所以网址是正确的。

如果我通过 SOAP UI 调用相同的服务，它会一次又一次地给我一个响应时间。

我能找到的最接近的解决方案是在网站上

```
http://faindu.wordpress.com/2008/04/18/ie7-ssl-xml-flex-error-2032-stream-error/ 
```

它表明我们应该更改启动屏幕的 HTML 标头中的缓存策略。

因此，我们在所有 HTML 页面中添加了 META 标签

```
<head>
<META Http-Equiv="Cache-Control" Content="no-store"> 
```

但是使用wireshark，我仍然可以在返回的响应中看到缓存控制设置为无缓存（在代码片段的末尾），而不是HTML中指定的无存储。

```
POST /MyService/MyService HTTP/1.1 Accept: */* Accept-Language: en-US x-flash-
version:     
10,3,183,20 Content-Type: text/xml; charset=utf-8 SOAPAction: "" Content-Length: 528 
Accept-Encoding: gzip, deflate User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows 
NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 
3.0.30729; Media Center PC 6.0; InfoPath.2; .NET4.0C; .NET4.0E) Host: dhtqawl01:8081 
Connection: Keep-Alive Cache-Control: no-cache 
```

你知道这是否会解决我们的问题或我们可能做错了什么吗？

--一些关于使用和浏览器使用的额外响应

这仅使用 IE7 和 Firefox 进行了测试（不记得版本）。我们公司支持 IE，不支持 Firefox。因此我们不能迁移到 Firefox。然而，我们也在 Firefox 上进行了尝试。它不会经常发生。在 IE 上 2 出 4 失败。在 Firefox 上，我们将其提高到每 12 次失败中的 2 次。

这仅使用 IE7 和 Firefox 进行了测试（不记得版本）。我们公司支持 IE，不支持 Firefox。因此我们不能迁移到 Firefox。然而，我们也在 Firefox 上进行了尝试。它不会经常发生。在 IE 上 2 出 4 失败。在 Firefox 上，我们将其提高到每 12 次失败中的 2 次。我在网上读到的（而且我不是这方面的专家）。每次调用服务器时，浏览器都可以选择缓存该响应。现在，如果我打开多个浏览器屏幕打开相同的进程 - 例如，每个 IE 窗口都会进行相同的调用......不知何故，这些响应会混淆。现在这个人在提供的 URL 中提出了什么建议。是我们在header中设置了cache选项不被缓存。这样，响应只会在需要时出现，因此不会混淆。

我们的用户不会以这种方式使用系统。但有时他们确实会收到完全相同的错误消息。他们声明他们不会打开多个会话。但这是迄今为止我们可以重新创建它的唯一方法。

至于防火墙......不确定这是否是问题，因为它至少在 IE 和 Firefox 和 SoapUI 中工作一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T20:41:04.333

在 IE 上（有几个版本我们找不到问题）。

但我们确实找到了解决方法。

我们最终使用了一个带有队列的 HttpManager。我们添加到队列中的所有请求。然后 HttpManager 将执行前 4 个请求，当它收到响应时，它会查看响应，如果发生 2032 错误，则重试 3 次，然后最终停止并显示错误并继续队列中的下一个请求。

通过限制同时请求的最大数量，我们几乎不需要重试，但在一些极端的测试用例中，我们只需要重试两次。所以3次绰绰有余。

我们还调整了模拟请求的数量，最终将其保持在 4。增加它会增加进行所有调用的总时间。

# python - Python：关于数学和负能量的问题

> ID：14397964
> 
> 赞同：3
> 
> 时间：2013-01-18T11:27:13.523
> 
> 标签：python, algorithm, math

我正在尝试实现算法，但我不确定如何在 Python 中实现。

该算法给出为`[e ^ -ax] * [((e ^ by) - (e ^ -ax)) / ((e ^ by) + (e ^ -ax))]`

在哪里：

*   `^`代表权力
*   `e`是欧拉数，值为`2.718`
*   `a`并且`b`是常数并且给出为`a = 0.2`和`b = 0.45`
*   但是`x`和`y`是变量，在哪里`a`并且`b`永远是`>= 0`

这是我想出的，但我不确定这是否正确。如果有人能告诉我它是否正确或者是否有更简单的方法可以做到这一点，那就太好了，因为它现在看起来非常复杂。

```
valueA = 0.2 * x
valueB = 0.45 * y

results = math.pow(math.e, -valueA) * (math.pow(math.e, valueB) - math.pow(math.e, -valueB)) / (math.pow(math.e, valueA) + math.pow(math.e, -valueB)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T11:32:59.130

对于计算*e* ^(*x*)，无需编写：

```
math.pow(math.e, x) 
```

相反，使用[`math.exp`](http://docs.python.org/2/library/math.html#math.exp)并编写：

```
math.exp(x) 
```

或者：

```
from math import exp
exp(x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:29:35.900

您可以使用`**`运算符：

```
In [48]: math.pow(2,10)
Out[48]: 1024.0

In [49]: 2**10              #replace the '2' by math.e or simply e
Out[49]: 1024 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:31:38.600

您可以摆脱`math.pow`并替换`math.e`为`e`：

```
from math import e
results = e**-valueA * (e**valueB - e**-valueA) / (e**valueB + e**-valueA) 
```

您也可以替换为`valueA`和`ax`，以使事情变得更简单。`valueB``by`

# mysql - 使用 .htaccess 加密时文件夹级别身份验证失败

> ID：14397965
> 
> 赞同：0
> 
> 时间：2013-01-18T11:27:17.713
> 
> 标签：mysql, apache, .htaccess, encryption

我正在尝试使用 .htaccess 文件对文件夹级别的用户进行身份验证。

我的 .htaccess 文件有以下几行密码加密。它基本上使用 SHA1Sum 作为加密类型。

```
AuthMySQL_Password_Field passwd
AuthMySQL_Empty_Passwords off
AuthMySQL_Encryption_Types SHA1Sum 
```

现在。我已使用以下查询更新了一些密码。

```
update `auth_users` set passwd=SHA1(1234) WHERE user_id = 1 
```

我使用 SHA1(1234)，因为我认为这是 SHA1Sum 类型的正确加密函数。

表中更新了 40 个字符的加密密码。现在，当转到相应的页面时，它会弹出对话框以输入用户名和密码。

出于某种原因，即使我传递了正确的密码，它也不会让我进入。这背后的原因可能是什么。我做错了什么吗。请给出你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:34:19.110

我想您可能已经找到过时的 Apache 1.x 版本的`mod_auth_mysql`. [尝试从modauthmysql 人](http://modauthmysql.sourceforge.net/CONFIGURE)那里查看本指南

您的 htaccess 选项应该看起来像（您不需要所有这些，这只是为了记录选项的样子。注意缺少下划线）

```
AuthMySQLEnable On
AuthMySQLHost localhost
AuthMySQLPort <default port in MySQL>
AuthMySQLSocket <default socket in MySQL>
AuthMySQLUser <no default -- NULL>
AuthMySQLPassword <no default -- NULL>
AuthMySQLDB test
AuthMySQLUserTable user_info
AuthMySQLUserCondition <no default>
AuthMySQLNameField user_name
AuthMySQLPasswordField user_passwd
AuthMySQLNoPasswd Off
AuthMySQLPwEncryption sha1
AuthMySQLSaltField <>
AuthMySQLGroupTable <defaults to value of AuthMySQLUserTable>
AuthMySQLGroupCondition <no default>
AuthMySQLGroupField <no default>
AuthMySQLKeepAlive Off
AuthMySQLAuthoritative On
AuthMySQLCharacterSet <no default> 
```

# android - WindowManager 中的全屏

> ID：14397969
> 
> 赞同：16
> 
> 时间：2013-01-18T11:27:27.293
> 
> 标签：android, android-activity, viewgroup, android-windowmanager

这是我的代码：

```
params = new WindowManager.LayoutParams(
    WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
    WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
    PixelFormat.TRANSLUCENT);

wm = (WindowManager) getApplicationContext()
    .getSystemService(Context.WINDOW_SERVICE);

inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
mTopView = (ViewGroup) inflater.inflate(R.layout.activity_invisible, null);

params.flags = WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
    | WindowManager.LayoutParams.FLAG_DIM_BEHIND
    | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
    | WindowManager.LayoutParams.FLAG_FULLSCREEN;

if (keep==true) {
    int value = brightnessIntent.getExtras().getInt("value");
    float v=value/255.0f;
    params.dimAmount=0;
    params.alpha=v;
    rl = (RelativeLayout) mTopView.findViewById(R.id.window);

    getWindow().setAttributes(params);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,

    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    wm.addView(mTopView, params);
} 
```

视图仍然显示状态栏，`mTopView`是一个覆盖窗口。如何让覆盖窗口覆盖整个屏幕？我不想“隐藏”状态栏，我希望我的活动覆盖在它上面。

**[编辑]** *强调文本* 我已经在我的`onCreate()`方法中有这个：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

我的清单定义了一种全屏风格。

**截图**

[![在此处输入图像描述](../Images/bacdbcb3493bae385f50d633149a65dd.png)](https://i.stack.imgur.com/LAbMf.png)

这就是目前的情况，我希望覆盖也扩展到状态栏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T12:36:22.023

我所要做的就是这个

`params.flags=WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN| and the rest`

这将覆盖视图扩展到状态栏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-30T23:08:43.007

此代码来自“Android Application 4 Development”。你必须处理不同的安卓版本

```
 // Hiding the Action Bar for different android versions 
    if (Build.VERSION.SDK_INT < 16) {
        // Hide the Action Bar on Android 4.0 and Lower
         getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
     }else {
        // Hide the Action Bar on Android 4.1 and Higher
        View decorView = getWindow().getDecorView();
        int uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;
        decorView.setSystemUiVisibility(uiOptions);
        android.app.ActionBar actionBar = getActionBar();
        actionBar.hide();
     } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T11:44:37.260

您可以使用两种方式隐藏状态栏：

1）在您的活动`onCreate()`方法中定义以下行。

```
 requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

2）在应用程序级别定义主题，不通过应用程序显示状态栏，如下所示：

> ```
> <application android:label="@string/app_name"
>   android:theme="@android:style/Theme.NoTitleBar.Fullscreen"> 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:39:09.360

尝试这个..

```
 requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

它不会隐藏您的状态栏，您的应用程序将覆盖全屏，只有状态栏可见

```
 public class example extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.example);
}

} 
```

并隐藏状态栏

您可以使用

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

试试这个方法

```
final WindowManager.LayoutParams params = new WindowManager.LayoutParams( 
WindowManager.LayoutParams.FLAG_FULLSCREEN, 
WindowManager.LayoutParams.FLAG_FULLSCREEN,                 
            WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,               
            WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
            PixelFormat.TRANSLUCENT);   

    WindowManager wm = (WindowManager) getApplicationContext().getSystemService(Context.WINDOW_SERVICE);    

    ViewGroup mTopView = (ViewGroup) App.inflater.inflate(R.layout.main, null);
    getWindow().setAttributes(params);
    wm.addView(mTopView, params); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-20T16:48:48.530

要在 Android 中创建始终处于顶部的全屏覆盖活动：

```
public void onCreate(Bundle savedInstanceState) {       
 super.onCreate(savedInstanceState);        

 requestWindowFeature(Window.FEATURE_NO_TITLE);
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
 getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);             
 getWindow().setBackgroundDrawableResource(android.R.color.transparent);
 getWindow().setFormat(PixelFormat.TRANSLUCENT);
 setContentView(R.layout.main);
 } 
```

必须在 xml 清单中从外部启用半透明设置，否则它也不起作用。

```
 <item name="android:windowIsTranslucent">true</item> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-31T13:03:52.607

您可以使用以下方法隐藏标题栏：

```
public class MainActivity extends AppCompatActivity {  
@Override  
protected void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    requestWindowFeature(Window.FEATURE_NO_TITLE);  
    getSupportActionBar().hide(); 
    setContentView(R.layout.activity_main);  
  }  
} 
```

并使用以下方法获取全屏：

```
public class MainActivity extends AppCompatActivity {  
@Override  
protected void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
     this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    setContentView(R.layout.activity_main);   
   }  
 } 
```

你也可以在styles.xml中使用parent="Theme.AppCompat.NoActionBar"

# spring - spring jetty UriInfo 注入为空

> ID：14397971
> 
> 赞同：1
> 
> 时间：2013-01-18T11:27:42.313
> 
> 标签：spring, jetty, aop, spring-aop

我们正在使用弹簧码头进行休息。

我们注入上下文如下

```
@Context
private UriInfo uriInfo; 
```

我们在许多服务中注入了 uri 信息。它对所有人都很好，除了一个它被注入为空的地方。

在分析日志后，我发现空注入类的类型被打印为代理对象，如下所示

```
Jan 18, 2013 4:32:07 PM com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, organizationProvisioningImpl, of type $Proxy53 as a root resource class 
```

对于成功注入的类，类型打印为类的名称。

必须是代理，这就是不注入上下文的原因。

该类的定义类似，但不知道为什么会这样。

任何有相同问题或知道该问题的人请指导我。

**添加到上面，代理对象是因为我在这个类方法上应用了AOP。希望这也可以帮助你们帮助我。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:33:04.293

```
<aop:aspectj-autoproxy proxy-target-class="true"/> 
```

这就是导致问题的原因。

早些时候我使用它是因为使用了 java 默认代理。当我将其更改为`<aop:aspectj-autoproxy proxy-target-class="true"/>`. 问题似乎解决了。

从经验来看，这似乎是因为 java 代理库在转换 CGLIB 代理库时解决了。

也许一些专家将能够对此发表更多评论。因为我还没有读过这些库。

但最终问题解决了。:)

# msbuild - 一次编译多个 typescript 文件导致 File not found 错误

> ID：14397972
> 
> 赞同：3
> 
> 时间：2013-01-18T11:27:43.603
> 
> 标签：msbuild, typescript

我们有一个 MSBuild 脚本，我们用它来编译我们项目中的所有 .ts 文件。首先，我们创建一个包含所有 .ts 文件的属性组；

```
<ItemGroup>
   <AllTypeScriptFiles Include="XXXXX\Scripts\**\*.ts;" Exclude="XXXX\Scripts\**\*.d.ts;" /> 
</ItemGroup> 
```

然后我们将此文件列表转储到输入文件并运行 tsc.exe；

```
<WriteLinesToFile
    File="typescriptcompiler.input"
    Lines="@(AllTypeScriptFiles)"
    Overwrite="true"
    Encoding="Unicode"/>    

<Exec Command="&quot;$(MSBuildProgramFiles32)\Microsoft SDKs\TypeScript\$(TypeScriptVersion)\tsc&quot; --target ES5 @typescriptcompiler.input"
      CustomErrorRegularExpression="\.ts\([0-9]+,[0-9]+\):(.*)"
      IgnoreExitCode="true" >
</Exec> 
```

现在，输出表明某些文件无法找到；

```
Error reading file "XXXXX.ts": File not found 
```

某些文件会发生这种情况，但如果我运行 tsc.exe 并给出与错误消息完全相同的路径，我不会收到任何错误并且文件已编译。

如果我宁愿按顺序编译每个文件：

```
<Exec Command="&quot;$(MSBuildProgramFiles32)\Microsoft SDKs\TypeScript\$(TypeScriptVersion)\tsc&quot; --target ES5 &quot;%(AllTypeScriptFiles.Identity)&quot;"
      CustomErrorRegularExpression="\.ts\([0-9]+,[0-9]+\):(.*)"
      IgnoreExitCode="true" >
</Exec> 
```

所有文件都编译没有问题，除了它需要 5 分钟而不是 10 秒......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:46:08.400

[Typescript 0.8.3 版](http://www.microsoft.com/en-us/download/details.aspx?id=34790)解决了这个问题！没有更多的错误。

我现在可以一口气编译所有文件：

```
<ItemGroup>
   <AllTypeScriptFiles Include="XXXXX\Scripts\**\*.ts;" Exclude="XXXX\Scripts\**\*.d.ts;" /> 
</ItemGroup>

<WriteLinesToFile
    File="typescriptcompiler.input"
    Lines="@(AllTypeScriptFiles)"
    Overwrite="true"
    Encoding="Unicode"/>    

<Exec Command="&quot;$(MSBuildProgramFiles32)\Microsoft SDKs\TypeScript\$(TypeScriptVersion)\tsc&quot; --target ES5 @typescriptcompiler.input"
      CustomErrorRegularExpression="\.ts\([0-9]+,[0-9]+\):(.*)">
</Exec> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:40:18.870

最简单的方法是选择您的顶级文件（例如*app.ts*）并在编译器上设置一个输出文件......

```
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\$(TypeScriptVersion)\tsc&quot; --out final.js --target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
  </Target> 
```

TypeScript 将遍历所有依赖项并将其全部编译到*final.js*中。

注意 - 我推荐这种方式，因为您没有使用`--module`标志。`commonjs`对于或`amd`程序，我会给出不同的答案。

我刚刚根据 Mark Rendle 的想法更改[了我的 TypeScript 工作流程以使用它。](http://www.stevefenton.co.uk/Content/Blog/Date/201301/Blog/Getting-The-Right-Set-Up-For-TypeScript/)

或者，您可以使用以下命令编译所有 .ts 文件...

```
 <ItemGroup>
    <TypeScriptCompile Include="$(ProjectDir)\**\*.ts" />
  </ItemGroup>
  <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.1.1\tsc&quot; --target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
  </Target> 
```

# java - 如何读取连续数据并显示

> ID：14397973
> 
> 赞同：0
> 
> 时间：2013-01-18T11:27:45.043
> 
> 标签：java, android, eclipse, bluetooth, pic

我正在从 PIC（来自模拟输入）向蓝牙模块发送连续数据，然后我试图用 android 读取它们（在 HyperTerminal 中我得到从 0 到 255 的值）。如何更改我的代码以读取 3 个字节的字符串并立即将它们显示到 TextView 中。现在我可以显示数据，但它太慢了，并且只有在按下按钮时才会更新值。这是我的 MainActivity.java：

```
public class MainActivity extends Activity {
  private static final String TAG = "bluetooth2";

  Button btn1, btn2, btn3, btn4;
  TextView txtArduino;
  Handler h;

  private static final int REQUEST_ENABLE_BT = 1;
  final int RECIEVE_MESSAGE = 1;        // Status  for Handler
  private BluetoothAdapter btAdapter = null;
  private BluetoothSocket btSocket = null;
  private StringBuilder sb = new StringBuilder();

  private ConnectedThread mConnectedThread;

  // SPP UUID service
  private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

  // MAC-address of Bluetooth module (you must edit this line)
  private static String address = "00:12:09:25:92:57";

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

btn1 = (Button) findViewById(R.id.btn1);                    // activity no. 1
btn2 = (Button) findViewById(R.id.btn2);                    // activity no. 2
btn3 = (Button) findViewById(R.id.btn3);                    // activity no. 3
btn4 = (Button) findViewById(R.id.btn4);                    // activity no. 4
txtArduino = (TextView) findViewById(R.id.txtArduino);      // for display the received data from the Arduino

h = new Handler() {
    public void handleMessage(android.os.Message msg) {

        switch (msg.what) {
        case RECIEVE_MESSAGE:
            byte[] readBuf = (byte[]) msg.obj;
            String strIncom = new String(readBuf, 0, msg.arg1);                     // create string from bytes array
            //Toast.makeText(MainActivity.this, strIncom, Toast.LENGTH_SHORT).show();
            sb.append(strIncom);                                                // append string
            int endOfLineIndex = sb.indexOf("\r\n");                            // determine the end-of-line
            if (endOfLineIndex > 0) {                                           // if end-of-line,
                String sbprint = sb.substring(0, endOfLineIndex);               // extract string
                sb.delete(0, sb.length());                                      // and clear
                txtArduino.setText("Data from PIC: " + sbprint);                // update TextView
                //btn2.setEnabled(true);
                //btn1.setEnabled(true); 
            }
            //Log.d(TAG, "...String:"+ sb.toString() +  "Byte:" + msg.arg1 + "...");
            break;
        }
    };
};

btAdapter = BluetoothAdapter.getDefaultAdapter();       // get Bluetooth adapter
checkBTState();

btn1.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    //btn1.setEnabled(false);
    mConnectedThread.write("0");    // Send "0" via Bluetooth
    //Toast.makeText(getBaseContext(), "Turn on LED", Toast.LENGTH_SHORT).show(); 
    if(v.getId() == R.id.btn1){
    //define a new Intent for the second Activity
    Intent intent = new Intent(MainActivity.this,NewClass1.class);
    //start the second Activity
    MainActivity.this.startActivity(intent);
  }}
});

btn2.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    //btn2.setEnabled(false);  
    mConnectedThread.write("1");    // Send "1" via Bluetooth
    if(v.getId() == R.id.btn2){
        //define a new Intent for the second Activity
        Intent intent = new Intent(MainActivity.this,NewClass2.class);
        //start the second Activity
        MainActivity.this.startActivity(intent);
  }}
});

btn3.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
    //btn3.setEnabled(false);  
    mConnectedThread.write("2");    // Send "2" via Bluetooth
    if(v.getId() == R.id.btn3){
        //define a new Intent for the second Activity
        Intent intent = new Intent(MainActivity.this,NewClass3.class);
        //start the second Activity
        MainActivity.this.startActivity(intent);
  }}
  });

btn4.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
    //btn4.setEnabled(false);  
    mConnectedThread.write("3");    // Send "3" via Bluetooth          
    if(v.getId() == R.id.btn4){
        //define a new Intent for the second Activity
        Intent intent = new Intent(MainActivity.this,NewClass4.class);
        //start the second Activity
        MainActivity.this.startActivity(intent);
  }}
  });
  }

  @Override
  public void onResume() {
super.onResume();

Log.d(TAG, "...onResume - try connect...");

// Set up a pointer to the remote node using it's address.
BluetoothDevice device = btAdapter.getRemoteDevice(address);

// Two things are needed to make a connection:
//   A MAC address, which we got above.
//   A Service ID or UUID.  In this case we are using the
//     UUID for SPP.
try {
  btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
} catch (IOException e) {
  errorExit("Fatal Error", "In onResume() and socket create failed: " + e.getMessage() + ".");
}

// Discovery is resource intensive.  Make sure it isn't going on
// when you attempt to connect and pass your message.
btAdapter.cancelDiscovery();

// Establish the connection.  This will block until it connects.
Log.d(TAG, "...Connecting...");
try {
  btSocket.connect();
  Log.d(TAG, "....Connection ok...");
} catch (IOException e) {
  try {
    btSocket.close();
  } catch (IOException e2) {
    errorExit("Fatal Error", "In onResume() and unable to close socket during connection failure" + e2.getMessage() + ".");
  }
}

// Create a data stream so we can talk to server.
Log.d(TAG, "...Create Socket...");

mConnectedThread = new ConnectedThread(btSocket);
mConnectedThread.start();
  }

  @Override
  public void onPause() {
    super.onPause();

Log.d(TAG, "...In onPause()...");

try     {
  btSocket.close();
} catch (IOException e2) {
  errorExit("Fatal Error", "In onPause() and failed to close socket." + e2.getMessage() + ".");
}
  }

  private void checkBTState() {
    // Check for Bluetooth support and then check to make sure it is turned on
    // Emulator doesn't support Bluetooth and will return null
    if(btAdapter==null) { 
      errorExit("Fatal Error", "Bluetooth not supported");
    } else {
      if (btAdapter.isEnabled()) {
        Log.d(TAG, "...Bluetooth ON...");
      } else {
        //Prompt user to turn on Bluetooth
        Intent enableBtIntent = new Intent(btAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        Toast.makeText(getBaseContext(), "Connected!", Toast.LENGTH_SHORT).show();
      }
    }
  }

  private void errorExit(String title, String message){
    Toast.makeText(getBaseContext(), title + " - " + message, Toast.LENGTH_LONG).show();
finish();
  }

  private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) { }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        byte[] buffer = new byte[256];  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);        // Get number of bytes and message in "buffer"
                h.obtainMessage(RECIEVE_MESSAGE, bytes, -1, buffer).sendToTarget();     // Send to message queue Handler
            } catch (IOException e) {

                break;
            }
        }
    }

    /* Call this from the main activity to send data to the remote device */
    public void write(String message) {
        Log.d(TAG, "...Data to send: " + message + "...");
        byte[] msgBuffer = message.getBytes();
        try {
            mmOutStream.write(msgBuffer);
        } catch (IOException e) {
            Log.d(TAG, "...Error data send: " + e.getMessage() + "...");     
          }
    }

    /* Call this from the main activity to shutdown the connection */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
}

} 
```

和activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:keepScreenOn="true" >

<TextView
    android:id="@+id/txtArduino"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="" />

<Button
    android:id="@+id/btn1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/txtArduino"
    android:text="@string/btn_1" />

<Button
    android:id="@+id/btn2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/btn1"
    android:text="@string/btn_2" />

<Button
    android:id="@+id/btn3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/btn2"
    android:text="@string/btn_3" />

<Button
    android:id="@+id/btn4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/btn3"
    android:text="@string/btn_4" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:35:43.707

当我需要经常运行某些东西时，我会使用处理程序。

```
Handler viewHandler = new Handler();
Runnable updateView = new Runnable() {
        @Override
        public void run() {

                mEmulatorView.invalidate();
                viewHandler.postDelayed(updateView, 1000);

        }
    }; 
```

在我的方法中调用它：

```
viewHandler.post(updateView); 
```

在这种情况下，我通过使其无效每 1000 毫秒更新一次屏幕。

编辑：完整的代码示例

```
Handler viewHandler = new Handler();
Runnable updateView = new Runnable() {
@Override

public void run() {

    mEmulatorView.invalidate();

    if (statusBool == true) {
        for (int i = 1; i < dataReceived.length() - 1; i++) {

            if (dataReceived.charAt(i) == '>') {

                Log.d(TAG, "found >");
                deviceStatus = 0;
            }
            if (dataReceived.charAt(i) == '#'
                    && dataReceived.charAt(i - 1) != ')') {

                Log.d(TAG, "found #");
                deviceStatus = 1;
            }
            if ((i + 1) <= (dataReceived.length())
                    && dataReceived.charAt(i) == ')'
                    && dataReceived.charAt(i + 1) == '#') {

                Log.d(TAG, "found config )#");
                deviceStatus = 2;
            }

        }
        statusBool = false;
        viewHandler.postDelayed(updateView, 1000);

    }
}
};

public void onDataReceived(int id, byte[] data) {

dataReceived = new String(data);

statusBool = true;
Log.d(TAG, "in data received " + dataReceived);
((MyBAIsWrapper) bis).renew(data);

runOnUiThread(new Runnable(){

    @Override
    public void run() {

        mSession.write(dataReceived);

    }});

viewHandler.post(updateView);

} 
```

# azure - Azure 服务总线的高可用性 (HA) 和可扩展性

> ID：14397979
> 
> 赞同：3
> 
> 时间：2013-01-18T11:28:01.270
> 
> 标签：azure, azureservicebus

Microsoft 提供了最佳实践（[Best Practices for Performance Improvements Using Service Bus Brokered Messaging](http://msdn.microsoft.com/en-us/library/hh528527.aspx)）来实现高吞吐量。据它说：

> 如果所有消息都路由到所有订阅，单个主题有 5 个订阅可以实现高达 600msg/s（消息大小：1KB）的消息吞吐量。

为了获得更高的吞吐量，我们应该使用多个主题。我需要为将用于 10,000 个租户的解决方案实施事件模式。

问题是：

1.  Azure 服务总线的可扩展性有多大，即每个主题或每个命名空间可以支持多少事务？
2.  我还需要关心 HA 还是微软会处理它。根据 MSDN，我需要处理灾难恢复，但我找不到任何 HA 参考。

我们已经在 [Azure Service Bus Scalability](https://stackoverflow.com/questions/12173536/azure-service-bus-scalability)帖子中找到了类似线路的讨论，但答案还不清楚。

# asp.net-mvc - 在 MVC 中获取信息后重定向到其他视图

> ID：14397980
> 
> 赞同：0
> 
> 时间：2013-01-18T11:28:03.280
> 
> 标签：asp.net-mvc

如果我想在获得一些信息后重定向到某个页面怎么办。其实我需要一个搜索框。然后我将在某些操作中获取输入的信息，然后想要重定向到任何页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:37:34.343

在您的操作中，添加以下代码：

```
return RedirectToAction("ActionName",
                        "ControllerName",
                       new {
                           parameter1 = "something", 
                           parameter2 = "something else"
                           }); 
```

# jquery - 单击 jQuery UI 手风琴标题中的图标以打开 Bootstrap 模式，但防止手风琴折叠事件

> ID：14397981
> 
> 赞同：0
> 
> 时间：2013-01-18T11:28:03.797
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, accordion

我有一个 jQuery UI 手风琴。在每个标题栏中都有一个“编辑”图标。单击此图标将打开 Bootstrap 模式。

目前，单击图标会启动模式，但显然也会触发手风琴菜单展开/折叠事件。我该如何预防？

**演示：http:** [//jsfiddle.net/M3MDJ/3/](http://jsfiddle.net/M3MDJ/3/)

据我所知，Bootstrap 模态事件首先发生，因为如果我使用`event.stopPropagation()`或`event.stopImmediatePropagation()`什么都没有发生；甚至模态也被阻止打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:04:49.370

您将不得不使用 javascript 控制模式，而不是使用`data-`属性自动初始化。否则，当引导程序自动绑定点击处理程序时，它无法知道不传播事件

```
$(document).ready(function() {
  $('.edit').click(function(e){
    e.stopPropagation();
    $('#modal-edit').modal()
  })
  $('#accordion').accordion({
    collapsible: true,
        active: false
  });  
}); 
```

演示：http: [//jsfiddle.net/M3MDJ/4/](http://jsfiddle.net/M3MDJ/4/)

# ruby-on-rails - 这是做仪表板的最“Rails”方式吗？

> ID：14397982
> 
> 赞同：2
> 
> 时间：2013-01-18T11:28:05.123
> 
> 标签：ruby-on-rails

我已经为我正在开发的网站建立了一个管理面板，并且一切都很好。现在需要有一个充当“仪表板”的首页。随着时间的推移，它将显示代表应用程序的各种模型和部分的不同图表。它还将显示各种项目的较小列表（需要调用的客户等）。我有一个仪表板工作，但我只是想知道在 Rails 中是否有更好的方法。我基本上只有一个仪表板控制器：

```
class DashboardController < ApplicationController
  def show
    @statistics = {}
    @statistics[:leads] = Lead.this_month.count
    @statistics[:leads_by_day] = Lead.date_count
    @statistics[:called_this_month] = Customer.called_this_month.count
  end
end 
```

我不想使用任何宝石，因为这将需要大量的配置，并且需要以某种方式看起来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:06:42.050

这可能会导致视图层中出现大量代码和条件，并且可能难以测试。

**提取所有代码**

您应该将所有代码提取到一个或多个类中。优点是您可以使用多种方法获得真正干净的代码，并且可以将它们与 Rails 隔离开来进行测试，这使您可以快速进行测试。[Corey Haines 的 Fast Rails 测试](http://www.confreaks.com/videos/641-gogaruco2011-fast-rails-tests)

**对于如何做到这一点有不同的看法。**

*   将这些文件放入 lib 目录并在需要的地方使用它们。
*   制作演示者

    关于它有一个很棒的 [railscast](http://railscasts.com/episodes/287-presenters-from-scratch) （它需要专业订阅）

# asp.net - 使用asp.net scriptmanager/scriptresource.axd时包含原脚本名

> ID：14397983
> 
> 赞同：0
> 
> 时间：2013-01-18T11:28:10.717
> 
> 标签：asp.net, scriptmanager

我正在开发一个 asp.net Web 应用程序，通常引用 30 个不同的 ScriptManager 脚本（如 ScriptResource.axd?d=[encrypted-script-name] ）

这使得在例如 firebug 中调试时很难找到正确的脚本。如果有某种方式可以在调试模式下将原始文件名附加到脚本 url，那就太好了，例如

ScriptResource.axd?d=[加密脚本名称]&orig=MyScript.js

（我意识到这应该只是调试！）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:53:05.463

一种方法可能是不使用`ScriptManager`在调试模式下提供脚本 - 例如

```
protected void ScriptManager_PreRender(object sender, EventArgs e)
{
  // include normal script references in debug mode, SM is script manager instance name
  if (SM.IsDebuggingEnabled)
  {
    foreach (var script in SM.Scripts)
    {
       // based on script properties, use RegisterClientScriptResource 
       // or RegisterClientScriptInclude methods of Page.ClientScript
    }
    SM.Scripts.Clear();
  }
} 
```

# jquery - 表单提交确认以处理引导按钮

> ID：14397990
> 
> 赞同：0
> 
> 时间：2013-01-18T11:28:35.763
> 
> 标签：jquery, twitter-bootstrap

我向这样的表格添加了删除确认..

```
 $('#deleteform').submit(function(){
    return confirm('Are you sure you want to delete this subscriber?');
  }); 
```

问题是在使用 twitter bootstrap 时，当单击提交按钮时，该按钮被禁用，并且因此显示按钮加载文本..

```
 $('.btn').live("click", function(){
    $(this).button('loading');
  }); 
```

重置我使用的按钮

```
button('reset') 
```

因此，如果您在删除确认时按取消，按钮将处于“加载”状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:46:25.777

我刚刚选择了除删除之外的所有按钮

```
 $('.update,.cancel,.enable,.disable').on("click", function(){
    $(this).button('loading');
  }); 
```

**澄清..**

删除表单上的提交按钮和页面上的所有其他按钮都包含类“btn”

编码

```
 $('.btn').live("click", function(){
    $(this).button('loading');
  }); 
```

会将任何单击的按钮置于加载状态（引导功能）

这就是我想要的.. 但我的问题是如果删除确认被取消，删除按钮仍处于加载状态。

如果确认被取消，我曾希望重置按钮，但我只是将其排除在选择之外。

# delphi - TDictionary 保存到文件

> ID：14397996
> 
> 赞同：3
> 
> 时间：2013-01-18T11:28:54.343
> 
> 标签：delphi, full-text-search, save, tdictionary

我有很多文件（大约 160 000 个），我需要有关文件中单个单词位置的信息（全文）。所以我像这样使用字典：

```
WordDict : TDictionary<string, TDictionary<string, TIntegerDynArray>>; 
```

现在我知道 WORD1 在 FILE1、FILE3 和 FILE100 以及每个文件 <1,3,5>、<2,8,35> 等中的位置。我可以填充它，我可以使用它 - 它非常快。但我不知道如何有效地将字典存储到文件中。

编辑：有效 - 我的意思是文件的快速和小尺寸

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T13:12:32.150

您可以使用 Delphi 的流系统来编写专有的流格式。如果大小很重要（与速度相反），您可以压缩流。这是一些代码：

```
type
  TFilePos = TArray<Integer>;
  TFileDict = TDictionary<string, TFilePos>;
  TWordDict = class (TDictionary<string, TFileDict>)
  private
    procedure LoadFromStream(stream: TStream);
    procedure SaveToStream(stream: TStream);
  public
    procedure LoadFromZip(const AFileName: string);
    procedure LoadFromFile(const AFileName: string);
    procedure SaveToZip(const AFileName: string);
    procedure SaveToFile(const AFileName: string);
  end;

procedure TWordDict.LoadFromZip(const AFileName: string);
var
  stream: TStream;
  localHeader: TZipHeader;
  zipFile: TZipFile;
begin
  zipFile := TZipFile.Create;
  try
    zipFIle.Open(AFIleName, zmRead);
    zipFile.Read('worddict', stream, localHeader);
    try
      LoadFromStream(stream);
    finally
      stream.Free;
    end;
    zipFile.Close;
  finally
    zipFile.Free;
  end;
end;

procedure TWordDict.SaveToZip(const AFileName: string);
var
  stream: TStream;
  zipFile: TZipFile;
begin
  stream := TMemoryStream.Create;
  try
    SaveToStream(stream);
    stream.Position := 0;
    zipFile := TZipFile.Create;
    try
      zipFile.Open(AFileName, zmWrite);
      zipFile.Add(stream, 'worddict');
      zipFile.Close;
    finally
      zipFile.Free;
    end;
  finally
    stream.Free;
  end;
end;

procedure TWordDict.SaveToStream(stream: TStream);
var
  posi: System.Generics.Collections.TPair<string, TFilePos>;
  i: Integer;
  pair: System.Generics.Collections.TPair<string, TFileDict>;
  writer: TWriter;
begin
  writer := TWriter.Create(stream, 4096);
  try
    writer.WriteListBegin;
    for pair in Self do
    begin
      writer.WriteString(pair.Key);
      writer.WriteListBegin;
      for posi in pair.Value do
      begin
        writer.WriteString(posi.Key);
        writer.WriteInteger(Length(posi.Value));
        for i in posi.Value do
        begin
          writer.WriteInteger(i);
        end;
      end;
      writer.WriteListEnd;
    end;
    writer.WriteListEnd;
  finally
    writer.Free;
  end;
end;

procedure TWordDict.LoadFromStream(stream: TStream);
var
  sFiles: TFileDict;
  aPosi: TFilePos;
  size: Integer;
  i: Integer;
  sWord: string;
  reader: TReader;
  sFile: string;
begin
  Clear;
  reader := TReader.Create(stream, 1024);
  try
    reader.ReadListBegin;
    while not reader.EndOfList do
    begin
      sWord := reader.ReadString;
      sFiles := TFileDict.Create;
      reader.ReadListBegin;
      while not reader.EndOfList do
      begin
        sFile := reader.ReadString;
        size := reader.ReadInteger;
        SetLength(aPosi, size);
        for I := 0 to size - 1 do
        begin
          aPosi[I] := reader.ReadInteger;
        end;
        sFiles.Add(sFile, Copy(aPosi));
      end;
      reader.ReadListEnd;
      Add(sWord, sFiles);
    end;
    reader.ReadListEnd;
  finally
    reader.Free;
  end;
end;

procedure TWordDict.LoadFromFile(const AFileName: string);
var
  stream: TStream;
begin
  stream := TFileStream.Create(AFileName, fmOpenRead);
  try
    LoadFromStream(stream);
  finally
    stream.Free;
  end;
end;

procedure TWordDict.SaveToFile(const AFileName: string);
var
  stream: TStream;
begin
  stream := TFileStream.Create(AFileName, fmCreate);
  try
    SaveToStream(stream);
  finally
    stream.Free;
  end;
end; 
```

# php - MySql 消息系统查询每个对话获取一条消息

> ID：14397999
> 
> 赞同：0
> 
> 时间：2013-01-18T11:29:03.410
> 
> 标签：php, mysql, sql

我有这 3 张桌子：

```
messages:
id  conv    snd text    created
1   1   1   asdasd      2012-12-15 23:10:53
3   1   1   zzz         2013-01-18 12:37:44
4   1   1   ssss        2013-01-18 12:42:01

msg_status
id  msg user    status
1   1   1       mine
2   1   4       unread
3   3   1       mine
4   3   4       unread
5   4   1       mine
6   4   4       unread

conv_users
conv    user
1       1
1       4
2       1
2       4
2       5 
```

这是我网站中的一个消息传递系统，除了这个小查询之外，我已经准备就绪，假设要获取所有用户对话以及对话中的最后一条消息。

这意味着，如果用户 A 有 2 个对话，并且在 conv1 中有 10 条消息，而在 conv2 中只有 2 条消息，他将得到两行：convId、messageId、messageText、messageDate 等。

但问题是该消息应该是每次对话中的最后一条。

这是我已经完成的查询，但它不起作用！

```
SELECT
  cu.conv,
  msg.snd,
  msg.text,
  mst.status,
  msg.created
FROM conv_users AS cu
  INNER JOIN messages AS msg
    ON cu.conv = msg.conv
  INNER JOIN msg_status AS mst
    ON msg.id = mst.msg
WHERE cu.user = 4
    AND mst.user = 4
ORDER BY msg.created DESC 
```

如果我添加`GROUP BY cu.conv`它显示第一条消息，而不是我想要的最后一条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:45:39.647

尝试使用带 max 的派生查询

```
SELECT
  cu.conv,
  msg.snd,
  msg.text,
  mst.status,
  msg.created
FROM conv_users AS cu
  INNER JOIN (SELECT MAX(id), conv FROM messages GROUP BY conv )messages AS msg ON cu.conv = msg.conv
  INNER JOIN (SELECT MAX(id) , msg FROM msg_status GROUP BY msg) AS mst ON msg.id = mst.msg 
WHERE cu.user = 4
    AND mst.user = 4
ORDER BY msg.created DESC 
```