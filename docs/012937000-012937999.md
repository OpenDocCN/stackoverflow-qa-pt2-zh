# StackOverflow 问答 12937000-12937999

# c# - 使用 LINQ to XML 更改 ConnectionString 的一部分？

> ID：12937002
> 
> 赞同：0
> 
> 时间：2012-10-17T14:46:43.627
> 
> 标签：c#, linq-to-xml

如何更改 a 的一部分`ConnectionString`with `LINQ to XML`。例如，我只想更改以下中的`Data Source`和`Initial Catalog`值：

```
 <connectionStrings>
    <add name="connStr" connectionString="Data Source=data-source;Initial Catalog=db;User ID=user;Password=pass" providerName="System.Data.SqlClient;MultipleActiveResultSets=true;" />
  </connectionStrings> 
```

我了解如何更改整个 connectionString 属性，但我不想这样做，我只想更改某些部分。

我正在使用以下代码来修改连接字符串的一部分，并且在大多数情况下它都可以工作，但是在这种情况下`;`，我该如何修改它以便它不会删除未用 分隔的属性/值。`providerName`

```
string[] connArr = connectionString.Value.Split(';');

            for (int i = 0; i < connArr.Length; i++)
            {
                //Get the attribute and the value splitted by the "="
                string[] arrSubConn = connArr[i].Split('=');

                if (arrSubConn.Length == 2)
                {
                    string connAttr = arrSubConn[0];
                    string connVal = arrSubConn[1];

                    //Change the server name
                    if (connAttr == "Data Source")
                        connVal = environmentSettings.Server;

                    //Change the database name
                    if (connAttr == "Initial Catalog")
                        connVal = environmentSettings.Database;

                    newConnString += String.Format("{0}={1};", connAttr, connVal);
                } 
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:48:59.400

请参考文档：

[http://msdn.microsoft.com/en-us/library/bb387061.aspx](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:52:00.713

LINQ to XML 只能为您恢复实际的 connectionString 属性。实际字符串元素的操作超出了 LINQ to XML 的能力。如果要更改字符串本身，则需要使用其他函数对其进行操作。一种快速的方法可能是将字符串拆分为 = 和 ;。您知道每个具有偶数索引的元素都是一个键，每个奇数索引元素都是一个值。然后，您可以搜索数据源和初始目录元素并修改下一个数组位置中的值。

# c# - Visual Studio 2012 发布 Web 项目与 MSBuild

> ID：12937013
> 
> 赞同：0
> 
> 时间：2012-10-17T14:47:07.350
> 
> 标签：c#, asp.net-mvc-3, msbuild, visual-studio-2012

我向我的 MVC 应用程序添加了一个新配置。Visual Studio 2012 将配置块添加到 .csproj 的顶部。然后，当我尝试通过 msbuild 构建项目时：

`msbuild WebApp.csproj /t:Clean;Build;_WPPCopyWebApplication /p:Configuration=QA;WebProjectOutputDir=c:\builds\webapp\qa`

`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(609,5): error : The OutputPath property is not set for project 'WebApp.csproj'. Please check to make sure that you have specified a valid combination of Configuration and Platform for this project. Configuration='QA' Platform='AnyCPU'. You may be seeing this message because you are trying to build a project without a solution file, and have specified a non-default Configuration or Platform that doesn't exist for this project. [c:\code\WebApp.csproj]`

有谁知道我如何在默认配置块*之后添加新配置？*一旦我将配置块与其他配置一起向下移动，MSBuild 就可以正常工作。

编辑以显示 Visual Studio 2012 如何添加配置：

```
<?xml version="1.0" encoding="utf-8"?> 
```

`<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">`

```
<!-- NEW CONFIGURATIONS ARE ADDED HERE -->

<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'QA|AnyCPU'">
</PropertyGroup>

<!-- DEFAULT PropertyGroup is here -->

<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
<PropertyGroup>
 <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
 <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
 <!-- blah blah -->
</PropertyGroup> 
```

`<!-- EXISTING CONFIGURATIONS ARE DOWN HERE -->` ...

# java - 在 Java 中读取 ini 文件时出现问题

> ID：12937014
> 
> 赞同：2
> 
> 时间：2012-10-17T14:47:08.797
> 
> 标签：java, apache-commons-config

我在使用 Apache commons 配置读取 ini 文件时遇到问题。我附上了进口商品，以防我遗漏了一些东西。下面是我在 stackoverflow 上找到的一个示例，据我所知，没有其他示例可供查看。问题是`iniObj`。使用 Eclipse，它以红色突出显示。

如果我初始化变量，`new "HierarchicalINIConfiguration(iniFile);`生气并想添加一个 try/catch 或 throws ......这应该没问题......但是 try/catch 或 throws 生气并说“不能抛出 ConfigurationException 类型的异常; 异常类型必须是 Throwable 的子类。”

这让我想到了[这个问题](https://stackoverflow.com/questions/2416980/configurationexception-in-java)。我添加了 commons lang 3.1。我有 commons config 1.9，commons collections 3.2.1。公共日志记录 1.1.1 也是如此。我也用 commons config 1.8 和 lang 2.6 试过这个。现在我收到一个新错误“com.toolbox.dev.ReadIni.main(ReadIni.java:28) 处的线程“main”java.lang.NullPointerException 中的异常”您可以在我尝试进行调整后看到下面的新代码并解决错误。

**我的代码：**

```
import java.util.Iterator;
import java.util.Set;

import org.apache.commons.configuration.ConfigurationException;
import org.apache.commons.configuration.HierarchicalINIConfiguration;
import org.apache.commons.configuration.SubnodeConfiguration;

public static void main(String[] args) throws ConfigurationException {
    String iniFile = "file.ini";
    HierarchicalINIConfiguration iniConfObj = new HierarchicalINIConfiguration(iniFile);

    // Get Section names in ini file
    Set setOfSections = iniConfObj.getSections();
    Iterator sectionNames = setOfSections.iterator();

    while(sectionNames.hasNext()) {
        String sectionName = sectionNames.next().toString();

        HierarchicalINIConfiguration iniObj = null;
        SubnodeConfiguration sObj = iniObj.getSection(sectionName);
        Iterator it1 = sObj.getKeys();

        while (it1.hasNext()) {
            // Get element
            Object key = it1.next();
            System.out.print("Key " + key.toString() +  " Value " +
              sObj.getString(key.toString()) + "\n");
        }
    }
} 
```

**堆栈溢出的原始代码：**

```
import java.util.Iterator;
import java.util.Set;

import org.apache.commons.configuration.HierarchicalINIConfiguration;
import org.apache.commons.configuration.SubnodeConfiguration;

public class ReadIni {

    public static void main(String[] args) {
        String iniFile = "";
        HierarchicalINIConfiguration iniConfObj = new HierarchicalINIConfiguration(iniFile);

        // Get Section names in ini file
        Set setOfSections = iniConfObj.getSections(); 
        Iterator sectionNames = setOfSections.iterator(); 

        while(sectionNames.hasNext()) {

            String sectionName = sectionNames.next().toString();
            SubnodeConfiguration sObj = iniObj.getSection(sectionName);
            Iterator it1 = sObj.getKeys();

            while (it1.hasNext()) {
                // Get element 
                Object key = it1.next(); 
                System.out.print("Key " + key.toString() +  " Value " +
                  sObj.getString(key.toString()) + "\n");
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:50:57.547

这看起来不太乐观？

```
HierarchicalINIConfiguration iniObj = null;
SubnodeConfiguration sObj = iniObj.getSection(sectionName); 
```

这是第 28 行吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:59:37.483

由于您已经将`HierarchicalINIConfiguration`（“main”中的第二行）初始化为：

```
 HierarchicalINIConfiguration iniConfObj = new HierarchicalINIConfiguration(iniFile); 
```

我相信您想`HierarchicalINIConfiguration iniObj = null;`从代码中删除（大约 5 行）并更改

```
 SubnodeConfiguration sObj = iniObj.getSection(sectionName); 
```

to（`iniConfObj`代替`iniObj`）

```
 SubnodeConfiguration sObj = iniConfObj.getSection(sectionName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:22:57.717

你可以试试 JINIFile。是来自 Delphi 的 TINiFile 的翻译，但适用于 java。它完全支持所有 INI 文件功能

[https://github.com/SubZane/JNiFile](https://github.com/SubZane/JIniFile)

# tridion - Tridion 安装后 CME 中缺少系统管理信息

> ID：12937017
> 
> 赞同：0
> 
> 时间：2012-10-17T14:47:17.833
> 
> 标签：tridion, tridion-2011

我们完成了 SDL Tridion 的安装（从 5.3 迁移到 2011SP1） tridion 安装进展顺利。

但是，在从浏览器访问 CMS 时，我们遇到了一些问题。

1.  无法访问任何管理项目（用户、组等）。在访问任何 tridion 管理项目时，我们在 ribb"Invalid URI: cme:accmng" 中遇到错误。出版物正确显示内容。

2.  我们重新安装了 tridion，现在问题仍然存在，页面上出现新的 JS 错误：

> 网页错误详情
> 
> 用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 1.1.4322；.NET CLR 3.5.30729；.NET CLR 3.0。 30729；.NET4.0C；.NET4.0E) 时间戳：2012 年 10 月 17 日星期三 14:35:40 UTC
> 
> 消息：错误：远程服务器返回错误：（404）未找到。行：17 字符：3650 代码：0 URI：http://[Serverurl]/WebUI/Editors/CME/Views/Dashboard/Dashboard_v6.1.0.55920.2_.aspx?mode=js

我们错过了什么吗？

3 - 还有tridion MTSUser，它应该是服务器上的本地管理员吗？我们可以在安装后更改此用户（例如运行 Tridion com+ 服务）吗？

4- 由于我们已经迁移，我们在数据库中拥有所有现有的 tridion 管理员。当我们第一次访问 tridion 时，我们应该使用哪个用户登录？任何现有的 tridion 管理员都会这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:01:29.843

休斯顿有很多问题。我会在我能回答的地方回答。

1+3 - 鉴于您确实看到了出版物，但没有看到系统管理项目，我会检查 Tridion COM+ 应用程序中指定的帐户。

2 - 对于您的第二个问题，请检查该 URL 的实际内容。通常它包含一个错误 500 响应，您的浏览器现在正试图将其解析为 JavaScript。

4 - 由于您的用户在迁移之前已经存在，因此您应该能够使用其中任何一个登录。

看起来您的问题可能都是由相同的原因引起的：隐藏在 #2 或 #3 后面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:31:03.017

非常感谢您的宝贵意见。此错误是因为默认 tridion 用户 (MTSuser) 无权访问数据库。即使在授予访问权限后，我们也必须重新安装 tridion 才能解决问题。

再次感谢。

# php - 如何通过phpmyadmin将csv文件导入mysql

> ID：12937019
> 
> 赞同：2
> 
> 时间：2012-10-17T14:47:28.540
> 
> 标签：php, mysql, csv, phpmyadmin

我正在将 csv 格式的 Geolite 城市数据库导入到我的 phpmyadmin 中，但它只导入它的第一行，然后说“网页不可用”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:57:14.013

您可以使用以下命令直接在 mysql 中加载 CSV：

```
load data local infile 'csvFileName.csv' into table tblUniq fields terminated by ','
enclosed by '"' lines terminated by '\n' (field1, field2, field3) 
```

# c# - 隐藏菜单项的绑定错误

> ID：12937020
> 
> 赞同：0
> 
> 时间：2012-10-17T14:47:30.373
> 
> 标签：c#, wpf, visibility, menuitem

我想隐藏有关用户权限的 menuItem。菜单项被放置到用户控件中的上下文菜单（通过右键单击显示）中。权限通过主窗口传递给用户控件。我有一个错误 40：绑定错误。VS 找不到我在 xaml 文档中声明的属性。

主窗口.xaml

```
<MyUC:myUC
    ...
    MainOptionsVisibility="False" /> 
```

myUc.xaml

```
<GMap_NET_WindowsPresentation:GMapControl.ContextMenu>
                <ContextMenu Opened="ContextMenu_Opened">
                    <MenuItem
                        Header="{x:Static Internationalization:Resources.VIEWPORT_ADDOBJECT}"
                        Command="{x:Static local:Viewport.CreateGraphicObjectRequestCommand}"
                        CommandTarget="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}"
                        Visibility="{Binding RelativeSource={RelativeSource Self}, Path=IsEnabled, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}">
                        <MenuItem.Icon>
                            <Image Source="{DynamicResource EditIcon}" Width="32" Height="32" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="{x:Static Internationalization:Resources.OPTIONS}"
                             Visibility="{Binding Path=MainOptionsVisibility, RelativeSource={RelativeSource Self}, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}" >
                             ...
                     />
            </GMap_NET_WindowsPresentation:GMapControl.ContextMenu>
        </GMap_NET_WindowsPresentation:GMapControl> 
```

并且 MainOptionsVisibility 在代码隐藏中被很好地声明为依赖属性。我已经检查过了，它已经很好地初始化了。其他项目的可见性还可以（我没有这样做）。

编辑：弗洛回答后的新 XAML 代码：

```
<UserControl
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:local="clr-namespace:Main.Client.MyProject.Implementation.UIs.StandardViewports.Viewports"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:GMap_NET_WindowsPresentation="clr-namespace:GMap.NET.WindowsPresentation;assembly=GMap.NET.WindowsPresentation"
         xmlns:Internationalization="clr-namespace:Main.Client.MyProject.Library.Resources;assembly=MyProjectLibrary"
         xmlns:Main_Client_MyProject_Library_Converters="clr-namespace:Main.Client.MyProject.Library.Converters;assembly=MyProjectLibrary"
         x:Name="baseViewport"
         x:Class="Main.Client.MyProject.Implementation.UIs.StandardViewports.Viewports.Viewport"
         MouseEnter="baseViewport_MouseEnter"
         mc:Ignorable="d"
         d:DesignHeight="300" d:DesignWidth="300" Loaded="BaseViewport_Loaded">
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/MyLibs;component/ResourceDictionnary/ResourceDictionnary.xaml" />
        </ResourceDictionary.MergedDictionaries>
        <Main_Client_MyProject_Library_Converters:BooleanToVisibilityCollapsedConverter x:Key="BooleanToVisibilityCollapsedConverter" />
        <Main_Client_MyProject_Library_Converters:BooleanToVisibilityCollapsedConverter x:Key="BooleanToVisibilityTestConverter" />
    </ResourceDictionary>
</UserControl.Resources>
<UserControl.CommandBindings>
    ...
</UserControl.CommandBindings>
<Grid>
    <GMap_NET_WindowsPresentation:GMapControl
        x:Name="gMapControl"
        MaxZoom="18"
        MinZoom="1"
        MouseDown="gMapControl_MouseDown"
        OnMapZoomChanged="gMapControl_OnMapZoomChanged"
        OnCurrentPositionChanged="gMapControl_OnCurrentPositionChanged"
        MouseMove="gMapControl_MouseMove"
        Loaded="gMapControl_Loaded"
        Drop="gMapControl_Drop"
        AllowDrop="True"
        IsEnabled="{Binding IsEnabled, ElementName=baseViewport}" MapType="OpenStreetMap">
        <GMap_NET_WindowsPresentation:GMapControl.ContextMenu>
            <ContextMenu Opened="ContextMenu_Opened">
                <MenuItem
                    Header="{x:Static Internationalization:Resources.VIEWPORT_ADDOBJECT}"
                    Command="{x:Static local:Viewport.CreateGraphicObjectRequestCommand}"
                    CommandTarget="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}"
                    Visibility="{Binding RelativeSource={RelativeSource Self}, Path=IsEnabled, Converter={StaticResource BooleanToVisibilityTestConverter}}">
                    <MenuItem.Icon>
                        <Image Source="{DynamicResource EditIcon}" Width="32" Height="32" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{x:Static Internationalization:Resources.VIEWPORT_OPTIONS}"
                         Visibility="{Binding Path=PlacementTarget.DataContext.MainOptionsVisibility, RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Converter={StaticResource BooleanToVisibilityTestConverter}}" >
                    <MenuItem Header="{x:Static Internationalization:Resources.VIEWPORT_LOCKSUPERIORLEFTCORNER}" Command="{x:Static local:Viewport.LockSuperiorLeftCornerRequestCommand}" CommandTarget="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}">

                    </MenuItem>
                    <MenuItem Header="{x:Static Internationalization:Resources.VIEWPORT_LOCKINFERIORRIGHTCORNER}" Command="{x:Static local:Viewport.LockInferiorRightCornerRequestCommand}" CommandTarget="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}">

                    </MenuItem>
                    <MenuItem Header="{x:Static Internationalization:Resources.VIEWPORT_LOCKZOOMMAXONMAP}" Command="{x:Static local:Viewport.LockMaxZoomLevelRequestCommand}" CommandTarget="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}" >
                    </MenuItem>
                    <MenuItem Header="{x:Static Internationalization:Resources.VIEWPORT_LOCKZOOMMINONMAP}" Command="{x:Static local:Viewport.LockMinZoomLevelRequestCommand}" CommandTarget="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}" >
                    </MenuItem>
                </MenuItem>

            </ContextMenu>
        </GMap_NET_WindowsPresentation:GMapControl.ContextMenu>
    </GMap_NET_WindowsPresentation:GMapControl>
</Grid> 
```

用于测试的两个 menuItems 的转换器都已更改。它永远不会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:34:15.750

问题是您的 MenuItem 没有称为的属性`MainOptionsVisibility`，只有您的 Window 有。通过`RelativeSource={RelativeSource Self}`您绑定到 MenuItem。

`RelativeSource={RelativeSource AncestorType={x:Type Window}}`也不起作用，因为您的 ContextMenu 不是 Windows 逻辑或可视树的一部分。

您可以做的是将 ContextMenus PlacementTarget ( `GMap_NET_WindowsPresentation:GMapControl`) 的 DataContext 或其祖先之一设置为您的 Window（例如，通过将 Windows DataContext 设置为自身（`<Window ...DataContext={Binding RelativeSource={RelativeSource Self}}.../`>）并执行以下操作：

```
<MenuItem Header="{x:Static Internationalization:Resources.OPTIONS}" Visibility="{Binding Path=PlacementTarget.DataContext.MainOptionsVisibility, RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}" > 
```

# java - 如何在更新托管 bean 对象的 xpages 对话框中拥有动态数据表？

> ID：12937022
> 
> 赞同：5
> 
> 时间：2012-10-17T14:47:31.780
> 
> 标签：java, xpages

我一直在尝试使用我在对话框中动态创建的数据表。每行都有一个复选按钮和一个编辑框。当我尝试使用 DOJO 对话框时，我可以更新与之关联的 java 对象中的属性，但我尝试使用的同一个按钮似乎并没有以任何方式关闭对话框。

我也尝试过使用 jquery 对话框，但部分更新出现问题，我无法从对话框中触发任何服务器端事件。

我也尝试过使用重复控件，但它产生了其他问题。

当我看到一些关于它的论坛帖子时，使用 java bean 将代码的控制部分与视图分离似乎是一个非常好的主意，但现在它会产生很多增加开发时间的小问题。如果有人有其他方法而不是我尝试过的方法，我将不胜感激。

* * *

与我的问题相关的一些问题是由于 checkBox 控件使用字符串来`true`代替`false`实际的布尔值。这似乎使所有事件都不适用于对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:34:04.543

您是否尝试过使用 XPages 扩展库中的对话框控件？

几年前，我为 vanilla dojo 对话框编写了一个解决方法。不确定它是否仍然有效： [http ://dontpanic82.blogspot.no/2010/02/xpages-making-dojo-dialogs-works-with.html](http://dontpanic82.blogspot.no/2010/02/xpages-making-dojo-dialogs-works-with.html)

我倾向于对大多数 Dojo 小部件使用扩展库。这样我就不必弄清楚为什么某些东西不起作用/当发布新版本的 XPages/Dojo 时我不必维护代码。

# linux - Bash 环境变量不更新

> ID：12937027
> 
> 赞同：2
> 
> 时间：2012-10-17T14:47:38.910
> 
> 标签：linux, git, bash, shell

我在我的 repo 中使用 git post-checkout 挂钩将当前分支转换为一个变量，然后我想在 PHP 等其他地方使用它。

以下是我的结帐后脚本：

```
#!/bin/bash
echo $GITBRANCH
GITBRANCH=`git symbolic-ref HEAD | cut -d/ -f3-`
echo $GITBRANCH
export $GITBRANCH 
```

但是它不会更新。例如：

```
>git checkout master
Switched to branch 'master'
develop
master
>echo $GITBRANCH
develop 
```

单独运行该`GITBRANCH=git symbolic-ref HEAD | cut -d/ -f3-`命令将生成当前分支名称。

为什么钩子不全局更新 $GITBRANCH 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:52:55.097

当您在脚本中设置变量时，它将仅在脚本运行的 shell 中可用。一旦进程终止，您设置的变量就永远消失了！

如果您希望该变量随处可用，可能`.profile`或`.bashrc`会是一个更好的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:03:38.093

运行脚本，前面有一个点。

```
. script 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:29:40.387

一个两步过程应该完成你想要的：

1) 在您的结帐后脚本中，创建一个包含您要导出的变量的临时文件。就像是

```
#!/bin/bash
GITBRANCH=`git symbolic-ref HEAD | cut -d/ -f3-`
echo "GITBRANCH=$GITBRANCH" > /tmp/new-branch 
```

2）创建一个`bash`函数来充当包装器`git`，并在结帐后使用它来获取临时文件：

```
# Put this in .bashrc
git () {
    command git "$@"
    if [[ $1 = "checkout" ]]; then
        . /tmp/new-branch
    fi
}

$ git checkout master
Switched to branch 'master'
$ echo $GITBRANCH
master 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T14:52:24.180

尝试：

```
export GITBRANCH 
```

也就是说，没有美元符号。

# c# - 更新表格布局面板

> ID：12937028
> 
> 赞同：1
> 
> 时间：2012-10-17T14:47:40.360
> 
> 标签：c#, winforms, updatepanel

我在 splitcontainer 面板上有 tablelayoutpanel，它是在运行时动态填充的组件。组件有一个最小尺寸，DockStyle 是 Fill。在调整大小事件中，我重新映射列和行样式，但它没有给出所需的结果（表格单元格变得小于组件的大小，并且当单元格大小的组件数量不接受最小数量的组件时）。问题是事先不知道会有多少行。如何正确更新 tablelayoutpanel????

# c# - 如何将元素添加到列表 并取回索引？

> ID：12937030
> 
> 赞同：9
> 
> 时间：2012-10-17T14:47:50.683
> 
> 标签：c#

是否有一个函数可以让您将元素添加到 a`List<T>`并`int`返回索引？`List<T>.Add()`是 a`void`并且不返回值。

`List.Count-1`当您不使用线程时，这是一个解决方案。我的列表是一个静态成员，一次可以使用多个线程访问，使用 count-1 值完全是线程不安全的，很容易导致错误的结果。

该索引将用于对每个元素进行特定处理。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T14:51:07.880

List 的方法不是单独的线程安全的；如果您只是`List.Add`从多个线程重复调用，您很可能会遇到问题。如果您首先要使用 a `List`，则需要使用某种同步技术，因此您不妨`List.Count`在该关键部分内部包含一个调用。

您的另一个选择是使用设计为供多个线程使用的集合，例如`System.Collections.Concurrent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:50:52.097

如果你想要一个线程安全的索引，你需要锁定，因为即使你有索引，人们也可能删除了一个项目/更改了列表。

也就是说，您可以尝试 list.IndexOf(value) 返回值的索引（假设所有元素都是唯一的）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-17T14:50:58.717

我相信列表有一个 indexOf() 方法，因此您可以在将元素添加到列表后调用它，如下所示：

```
list.add(element);
int index = list.indexOf(element); 
```

# list - 如何编写用于测试 Web 服务的 Junit

> ID：12937031
> 
> 赞同：0
> 
> 时间：2012-10-17T14:47:51.120
> 
> 标签：list, jax-rs, junit4, resteasy

我有一个 RestEasy 网络服务，它调用 dao 类中的方法。所以我测试了 daos seperatley，这很好。但我不明白我们如何测试网络服务。我的网络服务以 JSON 格式返回响应。我只是想知道，我们可以在多少种情况下测试 Web 服务。Web 服务返回一个列表作为输出，该列表被转换为 Json 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:36:09.107

一个简单的测试方法是使用 curl。否则你需要模拟一个webclient。我不知道resteasy如何做到这一点。在泽西岛，它是包裹的一部分。您还可以使用外部测试工具，如 httpunit、htmlunit 或 selenium。

# openssl - 有没有人使用 OpenSSL 甚至在内部实现了 ElGamal？

> ID：12937033
> 
> 赞同：3
> 
> 时间：2012-10-17T14:47:58.113
> 
> 标签：openssl, elgamal

我发现**OpenSSL**没有实现**ElGamal**。但是，目前我需要使用**OpenSSL**来实现**ElGamal**。我只是想知道是否有人以前做过。这可能有助于我减轻工作量。如果没有，在**OpenSSL中实现****ElGamal**是否可行？我曾尝试修改 DSA 的源代码以实现**ElGamal**，这会产生一些可能无法轻易发现的麻烦吗？

 ***** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T05:26:22.743

[此处](http://www.umiacs.umd.edu/~mmarsh/CODEX/src_doc_1.0/files.html)提到了使用 OpenSSL BIGNUM 实现 ElGamal （[此处](http://www.umiacs.umd.edu/~mmarsh/CODEX/src_doc_1.0/ElGamal_8h-source.html)的文件列表）。请看看它是否可以帮助你。****

# c# - 当 checkbox.checked 值设置为 true 时强制回发

> ID：12937036
> 
> 赞同：3
> 
> 时间：2012-10-17T14:48:05.640
> 
> 标签：c#, asp.net

我有一个方法可以像这样更改复选框的**选中属性**

```
checkbox1.checked = true; 
```

然后我有**事件处理程序方法**：

```
checkbox1_checkedChanged(object obj, EventArgs args) 
```

但是，当我将选中的属性更改为 true 时，事件处理程序不会启动。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:50:55.013

我怀疑你的功能是 checkbox1.checked = true; 正在运行服务器端，因此永远不会导致回发。

如果是这种情况，并且您只想调用已检查更改的处理程序中的代码，则可以直接调用该函数，或者将代码重构为一个通用函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:51:47.940

您需要在您的元素上将 AutoPostBack 设置为 true

```
<asp:CheckBox id="checkbox" runat="server" AutoPostBack="true" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T14:53:52.413

您需要做的只是调用您想要触发的方法处理程序，因为您已经在服务器端，因此不会因为属性值更改而触发任何事件。因此，在将检查设置为 true 后尝试此操作：

```
checkbox1_checkedChanged(checkbox1, new EventArgs()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T15:23:08.500

好吧，您谈论的是“回发”，所以我假设您正在创建一个网页。

该`AutoPostBack`属性仅表示当通过**网页上****的控件*本身***更改控件的属性时将触发回发事件，因为事件处理程序仅绑定到控件。

因此，动态更改控件的属性（使用服务器端的代码）永远不会触发事件处理程序。相反，您可以在更改后立即调用处理程序（就像 Justin Harvey 所说的那样）。

# jquery - 使用 jquery 输入时，更新面板中的 Asp.net 按钮单击事件处理程序执行两次

> ID：12937037
> 
> 赞同：0
> 
> 时间：2012-10-17T14:48:07.517
> 
> 标签：jquery, asp.net, event-handling, updatepanel, enter

我的页面上有这个

```
<asp:TextBox Text="" ID="txtEmailOApodo" MaxLength="70" runat="server" Width="250px"
            Style="height: 25px"></asp:TextBox>
<asp:TextBox Text="" ID="txtContrasena" MaxLength="50" TextMode="Password" runat="server"
            CssClass="textoLightbox"></asp:TextBox>

 <div style="margin-top: 20px">
    <asp:UpdatePanel runat="server" ID="updPanelLoginIncorrecto">
        <ContentTemplate>
            <asp:CustomValidator ForeColor="Red" OnServerValidate="usuarioExistente_Validation"
                Display="Static" Font-Size="Small" runat="server" ID="vldLogin" Text="<%$ Resources:LocalizedText, MsjError_LoginIncorrecto%>">
            </asp:CustomValidator>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnLoginLightbox" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
</div>
<div class="tableContent" style="float: right;">
    <asp:Button CssClass="button" ID="btnLoginLightbox" Text="Login" runat="server" OnClick="btnLoginUserControl_Click" />
</div>

<script type="text/javascript" language="javascript">
$(document).ready(function () {
    $("#<%=txtContrasena.ClientID%>").keyup(function (event) {
        if (event.keyCode == 13) {               
            $("#<%=btnLoginLightbox.ClientID%>").click();
        }
    });

    $("#<%=txtEmailOApodo.ClientID%>").keyup(function (event) {
        if (event.keyCode == 13) {
            $("#<%=btnLoginLightbox.ClientID%>").click();
        }
    });
});
</script> 
```

在我后面的代码中

```
 protected void btnLoginUserControl_Click(object sender, EventArgs e)
 {
     //Some code....      
 } 
```

我不知道为什么当我专注于 txtContrasena 或 txtEmailOApodo 并按回车键时 btnLoginUserControl_Click 会执行两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:50:58.827

`src`当您在页面上有一个带有空白属性的图像时，我已经看到了类似于您所描述的双重发布行为。例如：`<img src="" />`

# binding - 编组时，为什么 JAXB 不为具有固定值的必需属性调用 getter 方法？

> ID：12937038
> 
> 赞同：3
> 
> 时间：2012-10-17T14:48:09.030
> 
> 标签：binding, jaxb, marshalling, fixed, required

我有一个属性：

生成的 JAXB 对象中关联的 getter 方法如下：

```
public String getUnits(){
    if(units == null) return "metric";
    else return units;
} 
```

编组时 JAXB Marshaller 未调用 getUnits() 并且未设置该值。为什么不叫这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:07:48.340

**架构.xsd**

下面是用于生成 Java 类的 XML 模式的简化版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/schema" xmlns:tns="http://www.example.org/schema" elementFormDefault="qualified">
    <element name="root">
        <complexType>
            <attribute name="units" fixed="metric"/>
        </complexType>
    </element>
</schema> 
```

**根**

这将导致生成如下所示的类。由于`@XmlAccessorType(XmlAccessType.FIELD)`已指定，您的 JAXB (JSR-222) 实现将从字段中获取值，而不是访问`getUnits()`方法。

```
package org.example.schema;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "")
@XmlRootElement(name = "root")
public class Root {

    @XmlAttribute(name = "units")
    @XmlSchemaType(name = "anySimpleType")
    protected String units;

    public String getUnits() {
        if (units == null) {
            return "metric";
        } else {
            return units;
        }
    }

    public void setUnits(String value) {
        this.units = value;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

# performance - 使用来自 R 中的两个（稀疏）矩阵的数据构建“签名矩阵”的效率问题

> ID：12937043
> 
> 赞同：2
> 
> 时间：2012-10-17T14:48:30.497
> 
> 标签：performance, r, matrix, sparse-matrix

我不知道我正在尝试构建的“签名矩阵”是否在任何字段中都有适当的预先存在的名称或定义，但以下代码似乎可以在某些玩具矩阵上生成正确的结果。我很难在不引起混淆的情况下解释我到底想要做什么，但如果我提供的代码不足以推断出我想要做什么，我很乐意试一试。

当我使用我的实际数据（大小均为 300 x 20,000 个元素的两个整数矩阵）运行此代码时，它似乎正在工作，但经过数小时后仍无法完成。

我知道迭代可能是这里最大的问题，但我无法弄清楚如何删除它。

编码：

```
# Load required library
library(Matrix)

# Load in the test data
mut <- matrix(data=c(1,1,1,0,0,0,0,1,0,1,1,0,0,1,1,0,0,0,1,0),
              nrow=5,ncol=4,
              dimnames=list(c("p1","p2","p3","p4","p5"),c("GA","GB","GC","GD")))

oute <- matrix(data=c(1,1,0,1,0,1,0,0,1,1,1,1,1,0,0,1,1,0,0,1),
              nrow=5,ncol=4,
              dimnames=list(c("p1","p2","p3","p4","p5"),c("GQ","GW","GE","GR")))

patOutMatrix <- Matrix(data=oute,sparse=TRUE)
patMutMatrix <- Matrix(data=mut,sparse=TRUE)

transposePatMutMatrix <- t(patMutMatrix)

# Build the empty matrix (with row and col names)
sigMatrix <- Matrix(0,nrow=ncol(patMutMatrix), ncol=ncol(patOutMatrix),sparse=TRUE)
rownames(sigMatrix) <- colnames(patMutMatrix)
colnames(sigMatrix) <- colnames(patOutMatrix)

# Populate sigMatrix
for (mgene in rownames(transposePatMutMatrix))
{
  a <- patOutMatrix[which(transposePatMutMatrix[mgene, ] == 1, arr.ind = T), ]

  # Using an IF here to get around a problem with colSums() not working on single rows
  sigMatrix[mgene,] <- if (dim(as.matrix(a))[2] == 1) {
    a
  } else {
    colSums(patOutMatrix[which(transposePatMutMatrix[mgene, ] == 1, arr.ind = T), ])
  }
} 
```

有谁知道我如何在这里更改任何内容以使其执行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:30:42.320

# 如何向量化计算

看起来你只是在那里计算一个[矩阵产品](http://en.wikipedia.org/wiki/Matrix_multiplication)。所以这样写：

```
sigMatrix <- t(patMutMatrix) %*% patOutMatrix 
```

或（更难阅读但性能更好）：

```
sigMatrix <- crossprod(patMutMatrix, patOutMatrix) 
```

# 代码的作用

假设您的矩阵只有 0 和 1 个条目，代码执行以下操作：从第一个矩阵中的一列和第二个矩阵中的一列中获取每个可能的组合，它计算在这两列中都有 1 的行数。对于您的示例数据，这给出了以下结果：

```
> patMutMatrix   > patOutMatrix   > sigMatrix
   GA GB GC GD      GQ GW GE GR      GQ GW GE GR
p1  1  .  1  .   p1  1  1  1  1   GA  2  1  3  2
p2  1  .  .  .   p2  1  .  1  1   GB  .  1  1  1
p3  1  1  .  .   p3  .  .  1  .   GC  2  3  1  2
p4  .  .  1  1   p4  1  1  .  .   GD  1  1  .  .
p5  .  1  1  .   p5  .  1  .  1 
```

如果矩阵不限于零和一，我的代码将执行与您的代码不同的操作，至于第一个矩阵，您将除 1 之外的任何值视为 0。

# 其他要学习的东西

## 避免大小写区分

> ```
>  # Using an IF here to get around a problem with colSums() not working on single rows 
> ```

您可以通过传递`drop = FALSE`给子集操作来避免这种情况，如下所示：

```
patOutMatrix[which(transposePatMutMatrix[mgene, ] == 1, arr.ind = T), , drop = FALSE] 
```

这样，子集运算的结果将*始终*是一个矩阵，即使该矩阵只有一行。

## 避免按名称访问

> ```
> for (mgene in rownames(transposePatMutMatrix)) 
> ```

通常最好迭代索引，而不是名称，因为按名称选择内容会导致额外的查找将该名称转换回索引。所以我宁愿做这个

```
for (mgene in 1:nrow(transposePatMutMatrix)) 
```

# wordpress - Wordpress 下拉菜单在 IE 中不起作用

> ID：12937044
> 
> 赞同：2
> 
> 时间：2012-10-17T14:48:34.470
> 
> 标签：wordpress, internet-explorer, drop-down-menu

我正在为 Wordpress 中的客户开发一个网站。网站[www.daanen-shipping.nl](http://www.daanen-shipping.nl)有一个下拉菜单，它在 FF/Chrome 和 Safari 中运行良好，但在 IE 中却不行。客户使用的是 IE 9。显然这是许多人的常见问题。兼容性视图似乎不是问题。

我在 CSS 和 Javascript 方面有点新，所以我不知道从哪里开始。我对 nu 结果进行了数小时的研究。希望有人可以帮助我。

菜单 CSS：

```
#menu {
    position: absolute;
    right: 100px;
    top: 180px;
}
#menu ul li {
    float: left;
    text-transform: uppercase;
    font-size: 13px;
    margin: 0 0 0 20px;
    position: relative;
    display: inline-block;
    padding: 0 0 10px 0;
}
#menu ul li a {
    color: #fff;
    padding: 4px 1px;
    display: inline-block;
}
#menu ul li:hover a, #menu ul li.current-menu-item a, #menu ul li.current-menu-parent a {
    text-decoration: none;
    border-bottom: #fff 3px solid;
    padding: 4px 1px;
    display: inline-block;
}
#menu ul li:hover a {
    margin-bottom: 5px;
}
#menu ul li.current-menu-item ul.sub-menu li a {
    color: #7b7b7b;
}
#menu ul li ul.sub-menu li, #menu ul li ul.sub-menu li a {
    margin: 0;
    padding: 0;
}
#menu ul li ul.sub-menu {
    display: none;
}
#menu ul li:hover ul.sub-menu {
    position: absolute;
    top: 30px;
    left: 0px;
    background: #EBEBEB;
    border: #ddd 1px solid;
    width: 200px;
    padding: 5px 0 2px 0;
    overflow: hidden;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
#menu ul li ul.sub-menu li {
    width: 100%;
}
#menu ul li ul.sub-menu li a {
    padding: 8px 15px;
    text-decoration: none;
    border: 0px;
    color: #7b7b7b;
} 
```

如果还有其他内容我需要发布以更清楚，请让我知道并努力解决。提前致谢！

威廉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:56:03.677

点击 f12 并确保该站点使用的是 IE 9 标准。如果它没有切换到 IE9 标准，看看是否可以修复它。如果是这样，您可以在标题中添加一些代码，告诉浏览器“如果用户使用的是 IE 8，则使用 IE8 标准，或者，如果用户使用的是 IE 9，则使用 IE 9 标准”。IE 是 3 个浏览器合二为一（7、8 和 9），它有切换到 IE7 的坏习惯，并且在某些网站上会出现怪癖模式。让我知道当您更改为 IE9 标准时它是否有效，如果有效，我会看看是否可以挖掘代码以添加强制标准。

# c++ - Boost 序列化的链接器错误

> ID：12937046
> 
> 赞同：3
> 
> 时间：2012-10-17T14:48:35.273
> 
> 标签：c++, visual-studio-2010, boost

我在 VS2010 - 64 位中使用以下代码，并且我的 boost 库也是 64 位的，尽管我在链接器设置中添加了 Boost 库并且还包含了其他标头，但我一直收到这些链接器错误。关于如何解决此问题的任何建议？

```
#include <boost/archive/text_oarchive.hpp> 
#include <boost/archive/text_iarchive.hpp> 
#include <iostream> 
#include <sstream> 
std::stringstream ss; 

//--------------------------------------
class person 
{ 
public: 
    person() 
    { 
    } 

    person(int age) 
        : age_(age) 
    { 
    } 

    int age() const 
    { 
        return age_; 
    } 

private: 

    friend class boost::serialization::access; 

    template <typename Archive> 
    void serialize(Archive &ar, const unsigned int version) 
    { 
        ar & age_; 
    } 

    int age_; 
}; 
//---------------------------------------
int main(int argc, char** argv) 
{

    boost::archive::text_oarchive oa(ss); 
    person p(31); 
    oa << p;
} 
```

这些是链接器错误

```
Error   12  error LNK2001: unresolved external symbol "private: virtual char const * __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::get_debug_info(void)const " (?get_debug_info@extended_type_info_typeid_0@typeid_system@serialization@boost@@EEBAPEBDXZ)  D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   22  error LNK2001: unresolved external symbol "public: __cdecl boost::archive::archive_exception::archive_exception(class boost::archive::archive_exception const &)" (??0archive_exception@archive@boost@@QEAA@AEBV012@@Z) D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   11  error LNK2001: unresolved external symbol "public: virtual bool __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::is_equal(class boost::serialization::extended_type_info const &)const " (?is_equal@extended_type_info_typeid_0@typeid_system@serialization@boost@@UEBA_NAEBVextended_type_info@34@@Z) D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   10  error LNK2001: unresolved external symbol "public: virtual bool __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::is_less_than(class boost::serialization::extended_type_info const &)const " (?is_less_than@extended_type_info_typeid_0@typeid_system@serialization@boost@@UEBA_NAEBVextended_type_info@34@@Z) D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   21  error LNK2001: unresolved external symbol "public: void __cdecl boost::archive::archive_exception::`vbase destructor'(void)" (??_Darchive_exception@archive@boost@@QEAAXXZ) D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   2   error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __cdecl boost::archive::basic_text_oprimitive<class std::basic_ostream<char,struct std::char_traits<char> > >::~basic_text_oprimitive<class std::basic_ostream<char,struct std::char_traits<char> > >(void)" (__imp_??1?$basic_text_oprimitive@V?$basic_ostream@DU?$char_traits@D@std@@@std@@@archive@boost@@IEAA@XZ) referenced in function "protected: __cdecl boost::archive::text_oarchive_impl<class boost::archive::text_oarchive>::~text_oarchive_impl<class boost::archive::text_oarchive>(void)" (??1?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAA@XZ)   D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   3   error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __cdecl boost::archive::detail::basic_oarchive::~basic_oarchive(void)" (__imp_??1basic_oarchive@detail@archive@boost@@IEAA@XZ) referenced in function "public: __cdecl boost::archive::detail::common_oarchive<class boost::archive::text_oarchive>::~common_oarchive<class boost::archive::text_oarchive>(void)" (??1?$common_oarchive@Vtext_oarchive@archive@boost@@@detail@archive@boost@@QEAA@XZ)   D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   9   error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __cdecl boost::archive::detail::basic_oserializer::~basic_oserializer(void)" (__imp_??1basic_oserializer@detail@archive@boost@@IEAA@XZ) referenced in function "public: virtual __cdecl boost::archive::detail::oserializer<class boost::archive::text_oarchive,class person>::~oserializer<class boost::archive::text_oarchive,class person>(void)" (??1?$oserializer@Vtext_oarchive@archive@boost@@Vperson@@@detail@archive@boost@@UEAA@XZ)   D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   8   error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __cdecl boost::archive::detail::basic_oserializer::basic_oserializer(class boost::serialization::extended_type_info const &)" (__imp_??0basic_oserializer@detail@archive@boost@@IEAA@AEBVextended_type_info@serialization@3@@Z) referenced in function "public: __cdecl boost::archive::detail::oserializer<class boost::archive::text_oarchive,class person>::oserializer<class boost::archive::text_oarchive,class person>(void)" (??0?$oserializer@Vtext_oarchive@archive@boost@@Vperson@@@detail@archive@boost@@QEAA@XZ)    D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   1   error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __cdecl boost::archive::text_oarchive_impl<class boost::archive::text_oarchive>::text_oarchive_impl<class boost::archive::text_oarchive>(class std::basic_ostream<char,struct std::char_traits<char> > &,unsigned int)" (__imp_??0?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAA@AEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@I@Z) referenced in function "public: __cdecl boost::archive::text_oarchive::text_oarchive(class std::basic_ostream<char,struct std::char_traits<char> > &,unsigned int)" (??0text_oarchive@archive@boost@@QEAA@AEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@I@Z) D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   13  error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::~extended_type_info_typeid_0(void)" (__imp_??1extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAA@XZ) referenced in function "int `public: __cdecl boost::serialization::extended_type_info_typeid<class person>::extended_type_info_typeid<class person>(void)'::`1'::dtor$0" (?dtor$0@?0???0?$extended_type_info_typeid@Vperson@@@serialization@boost@@QEAA@XZ@4HA) D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   16  error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::extended_type_info_typeid_0(char const *)" (__imp_??0extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAA@PEBD@Z) referenced in function "public: __cdecl boost::serialization::extended_type_info_typeid<class person>::extended_type_info_typeid<class person>(void)" (??0?$extended_type_info_typeid@Vperson@@@serialization@boost@@QEAA@XZ)    D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   6   error LNK2019: unresolved external symbol "__declspec(dllimport) protected: void __cdecl boost::archive::basic_text_oarchive<class boost::archive::text_oarchive>::newtoken(void)" (__imp_?newtoken@?$basic_text_oarchive@Vtext_oarchive@archive@boost@@@archive@boost@@IEAAXXZ) referenced in function "protected: void __cdecl boost::archive::text_oarchive_impl<class boost::archive::text_oarchive>::save<class boost::archive::object_id_type>(class boost::archive::object_id_type const &)" (??$save@Vobject_id_type@archive@boost@@@?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAAXAEBVobject_id_type@12@@Z)  D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   19  error LNK2019: unresolved external symbol "__declspec(dllimport) protected: void __cdecl boost::archive::text_oarchive_impl<class boost::archive::text_oarchive>::save(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (__imp_?save@?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAAXAEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: static void __cdecl boost::archive::save_access::save_primitive<class boost::archive::text_oarchive,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(class boost::archive::text_oarchive &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (??$save_primitive@Vtext_oarchive@archive@boost@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@save_access@archive@boost@@SAXAEAVtext_oarchive@12@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)    D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   14  error LNK2019: unresolved external symbol "__declspec(dllimport) protected: void __cdecl boost::serialization::extended_type_info::key_register(void)const " (__imp_?key_register@extended_type_info@serialization@boost@@IEBAXXZ) referenced in function "public: __cdecl boost::serialization::extended_type_info_typeid<class person>::extended_type_info_typeid<class person>(void)" (??0?$extended_type_info_typeid@Vperson@@@serialization@boost@@QEAA@XZ)    D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   24  error LNK2019: unresolved external symbol "__declspec(dllimport) protected: void __cdecl boost::serialization::extended_type_info::key_unregister(void)const " (__imp_?key_unregister@extended_type_info@serialization@boost@@IEBAXXZ) referenced in function "public: __cdecl boost::serialization::extended_type_info_typeid<class person>::~extended_type_info_typeid<class person>(void)" (??1?$extended_type_info_typeid@Vperson@@@serialization@boost@@QEAA@XZ)   D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   15  error LNK2019: unresolved external symbol "__declspec(dllimport) protected: void __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::type_register(class type_info const &)" (__imp_?type_register@extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAAXAEBVtype_info@@@Z) referenced in function "public: __cdecl boost::serialization::extended_type_info_typeid<class person>::extended_type_info_typeid<class person>(void)" (??0?$extended_type_info_typeid@Vperson@@@serialization@boost@@QEAA@XZ)   D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   23  error LNK2019: unresolved external symbol "__declspec(dllimport) protected: void __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::type_unregister(void)" (__imp_?type_unregister@extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAAXXZ) referenced in function "public: __cdecl boost::serialization::extended_type_info_typeid<class person>::~extended_type_info_typeid<class person>(void)" (??1?$extended_type_info_typeid@Vperson@@@serialization@boost@@QEAA@XZ)    D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   20  error LNK2019: unresolved external symbol "__declspec(dllimport) public: __cdecl boost::archive::archive_exception::archive_exception(class boost::archive::archive_exception const &)" (__imp_??0archive_exception@archive@boost@@QEAA@AEBV012@@Z) referenced in function "void __cdecl boost::serialization::throw_exception<class boost::archive::archive_exception>(class boost::archive::archive_exception const &)" (??$throw_exception@Varchive_exception@archive@boost@@@serialization@boost@@YAXAEBVarchive_exception@archive@1@@Z)    D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   18  error LNK2019: unresolved external symbol "__declspec(dllimport) public: __cdecl boost::archive::archive_exception::archive_exception(enum boost::archive::archive_exception::_exception_code,char const *,char const *)" (__imp_??0archive_exception@archive@boost@@QEAA@W4_exception_code@012@PEBD1@Z) referenced in function "protected: void __cdecl boost::archive::basic_text_oprimitive<classstd::basic_ostream<char,struct std::char_traits<char> > >::save<class boost::archive::object_id_type>(class boost::archive::object_id_type const &)" (??$save@Vobject_id_type@archive@boost@@@?$basic_text_oprimitive@V?$basic_ostream@DU?$char_traits@D@std@@@std@@@archive@boost@@IEAAXAEBVobject_id_type@12@@Z)  D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   7   error LNK2019: unresolved external symbol "__declspec(dllimport) public: bool __cdecl boost::archive::detail::basic_oserializer::serialized_as_pointer(void)const " (__imp_?serialized_as_pointer@basic_oserializer@detail@archive@boost@@QEBA_NXZ) referenced in function "public: virtual bool __cdecl boost::archive::detail::oserializer<class boost::archive::text_oarchive,class person>::tracking(unsigned int)const " (?tracking@?$oserializer@Vtext_oarchive@archive@boost@@Vperson@@@detail@archive@boost@@UEBA_NI@Z) D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   17  error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl boost::archive::archive_exception::`vbase destructor'(void)" (__imp_??_Darchive_exception@archive@boost@@QEAAXXZ) referenced in function "protected: void __cdecl boost::archive::basic_text_oprimitive<class std::basic_ostream<char,struct std::char_traits<char> > >::save<class boost::archive::object_id_type>(class boost::archive::object_id_type const &)" (??$save@Vobject_id_type@archive@boost@@@?$basic_text_oprimitive@V?$basic_ostream@DU?$char_traits@D@std@@@std@@@archive@boost@@IEAAXAEBVobject_id_type@12@@Z)  D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   4   error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl boost::archive::detail::basic_oarchive::end_preamble(void)" (__imp_?end_preamble@basic_oarchive@detail@archive@boost@@QEAAXXZ) referenced in function "public: static void __cdecl boost::archive::save_access::save_primitive<class boost::archive::text_oarchive,class boost::archive::object_id_type>(classboost::archive::text_oarchive &,class boost::archive::object_id_type const &)" (??$save_primitive@Vtext_oarchive@archive@boost@@Vobject_id_type@23@@save_access@archive@boost@@SAXAEAVtext_oarchive@12@AEBVobject_id_type@12@@Z)    D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR
Error   5   error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl boost::archive::detail::basic_oarchive::save_object(void const *,class boost::archive::detail::basic_oserializer const &)" (__imp_?save_object@basic_oarchive@detail@archive@boost@@QEAAXPEBXAEBVbasic_oserializer@234@@Z) referenced in function "public: static void __cdecl boost::archive::detail::save_non_pointer_type<class boost::archive::text_oarchive>::save_standard::invoke<class person>(class boost::archive::text_oarchive &,class person const &)" (??$invoke@Vperson@@@save_standard@?$save_non_pointer_type@Vtext_oarchive@archive@boost@@@detail@archive@boost@@SAXAEAVtext_oarchive@34@AEBVperson@@@Z)   D:\Tproj-0.18\TestProject\QTR\QTR\main.obj  QTR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:30:15.873

也许您在使用 boost 自动链接链接的库和您明确指定的库之间存在冲突。

定义值 BOOST_ALL_NO_LIB=1 并明确指定所需的库。

另一种选择是使用 boost 自动链接：从链接器选​​项中删除所有 boost 库并查看任何丢失库的输出（定义 BOOST_LIB_DIAGNOSTIC=1 以获得更详细的输出）

# javascript - 导致 IE 8 更改为 IE7 兼容模式的代码

> ID：12937052
> 
> 赞同：0
> 
> 时间：2012-10-17T14:48:43.650
> 
> 标签：javascript, jquery, html, internet-explorer

我已经编写了一个 javascript 函数，它将创建一个弹出窗口，并且我正在从我的代码中调用该函数。但是当我单击按钮时，即更改为 ie 7 兼容模式，我看到按钮后面的弹出窗口。

这是我的java脚本：

```
(function(){

jQuery.fn.popbox = function(options){
var settings = jQuery.extend({
selector      : this.selector,
open          : '.open',
box           : '.box',
close         : '.close'
}, options);

var methods = {
open: function(event){
    methods.close();
    jQuery('.collapse').show();
    createpopbox();

event.preventDefault();
//alert("In code");

var pop = jQuery(this);
var box = jQuery(this).parent().find(settings['box']);
//alert(jQuery(this).attr("class"));
var open= jQuery(this).parent().find(settings[jQuery(this).attr("class")]);

if(box.css('display') == 'block'){
methods.close();
} else {
box.css({'display': 'block', 'top': (jQuery(this).position()).top + 12, 'left':(jQuery(this).position()).left  });
}
},

close: function(){
jQuery(settings['box']).hide();//.fadeOut("fast");
removedivs();

}
};

jQuery(document).bind('keyup', function(event){
if(event.keyCode == 27){
methods.close();
}
});

jQuery(document).bind('click', function(event){
if(!jQuery(event.target).closest(settings['selector']).length){
methods.close();
}
});

return this.each(function(){
jQuery(this).css({'width': jQuery(settings['box']).width()}); // Width needs to be set otherwise popbox will not move when window resized.
jQuery(settings['open'], this).bind('click', methods.open);
jQuery(settings['open'], this).parent().find(settings['close']).bind('click', methods.close);
});
};

}).call(this);
    function createpopbox(){
    jQuery('<div class="arrow"></div>'+
'<div class="arrow-border"></div>'
).appendTo('.box');;
    }
    function removedivs(){
    jQuery('form').remove('#subForm');
    jQuery('div').remove('.arrow');
    jQuery('div').remove('.arrow-border');
    } 
```

我尝试添加元标记以强制页面保持在 ie 8 但它不起作用。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:59:39.447

我认为问题不在代码上，浏览器默认为内网站点使用兼容模式

# xstream - 有两个同名标签时出现 XStream 错误

> ID：12937055
> 
> 赞同：2
> 
> 时间：2012-10-17T14:48:50.360
> 
> 标签：xstream

我的 xml 文件中有两个标签：“article_periodic”和“article_magazine”。在这个标签里面我有“文章”标签。

当我设置 (xst 是 XStream 的实例) xst.alias("article", ArticleMagazineVO.class);

错误：com.thoughtworks.xstream.converters.ConversionException 未定义为 ArticlesInPeriodic 类型中的字段

这是因为我有两个同名标签的对象。是否可以概述这个问题？

```
 <?xml version="1.0" encoding="UTF-8" ?>
   <my_xml>
       <article_periodic>
          <article>
            <doi></doi>
            <title></title>
          </article>
        </article_periodic>

        <article_magazine>
            <article>
                 <autor></autor>
                 <magazine_name></magazine_name>
            </article>
       </article_magazine>
   </my_xml> 
```

# xslt - xsl:node-set 后无法提取数据

> ID：12937056
> 
> 赞同：2
> 
> 时间：2012-10-17T14:48:58.430
> 
> 标签：xslt, xslt-1.0

我已经简化了以下 XSL 以更好地说明我的问题。这里是：

```
<?xml version="1.0" encoding="utf-8"?>
  <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt"  exclude-result-prefixes="msxsl"
  xmlns:exsl="http://exslt.org/common"
  >
  <xsl:output method="xml"  doctype-public="..." doctype-system="..." indent="yes"/>
  <xsl:template match="/">
  <xsl:variable name="tmpTotal">
    <root>
      <items>
        <item>1</item>
        <item>2</item>
        <item>3</item>
        <item>4</item>
      </items>
    </root>
  </xsl:variable>

  <xsl:variable name="myTotal" select="exsl:node-set($tmpTotal)"/>
  All values:<xsl:copy-of select="($myTotal)/*"/>
  <xsl:for-each select="($myTotal)/items/item">
    Item value:<xsl:value-of select="."/>
  </xsl:for-each>
  Item count:<xsl:value-of select="count(($myTotal)/items/item)"/>
  Item total:<xsl:value-of select="sum(($myTotal)/items/item)"/>
 </xsl:template>
</xsl:stylesheet> 
```

我知道这些值在节点中，因为 xsl:copy-of 选择有效。但是，当我尝试获取任何其他值（包括项目值、项目计数和项目总数）时，我没有得到任何值。谁能帮我解决这个问题？我已经花了将近一天的时间，不明白为什么我没有得到任何价值。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:55:06.727

您忘记包含该`root`元素。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="msxsl exsl xsl">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*" />    

<xsl:template match="/">
  <xsl:variable name="tmpTotal">
    <root>
      <items>
        <item>1</item>
        <item>2</item>
        <item>3</item>
        <item>4</item>
      </items>
    </root>
  </xsl:variable>

  <xsl:variable name="myTotal" select="exsl:node-set($tmpTotal)"/>
  All values:<xsl:copy-of select="($myTotal)/*"/>
    <xsl:for-each select="($myTotal)/root/items/item">
    Item value:<xsl:value-of select="."/>
  </xsl:for-each>
    Item count:<xsl:value-of select="count(($myTotal)/root/items/item)"/>
    Item total:<xsl:value-of select="sum(($myTotal)/root/items/item)"/>
 </xsl:template>
</xsl:stylesheet> 
```

输出...

```
 All values:<root><items><item>1</item><item>2</item><item>3</item><item>4</item></items></root>
    Item value:1
    Item value:2
    Item value:3
    Item value:4
    Item count:4
    Item total:10 
```

# .net - 哪些 Pos 设备支持 .net 的 Api？

> ID：12937058
> 
> 赞同：0
> 
> 时间：2012-10-17T14:48:58.923
> 
> 标签：.net, api, printing, verifone

我需要一台具有.NET API 的 pos 机器。我有一个[Verifone vx 680](http://www.verifone.com.tr/products/mobile/vx-680.aspx)，我联系了他们的服务台并询问了他们的支持 API。他们给我写信

> 他们不是。您需要购买开发者套餐，并首先参加培训课程。可以在此处找到有关此过程的信息： [http ://www.verifonedevnet.com/verifone/jsp/devnet/account/dnGetCertified.jsp](http://www.verifonedevnet.com/verifone/jsp/devnet/account/dnGetCertified.jsp)

因此，为了使用该 API，我必须购买一些软件包。

我需要的是某种可以像这样打印的打印机/pos

![订货号](../Images/e4621189a5c3acd62fb9b0dcaa34791a.png)

客户会按下按钮，然后我会打印这些数字。但是，我必须能够通过计算机打印这些数字。换句话说，我必须用我的程序控制这台打印机，我才能看到打印了哪些数字。在一天结束时，一切都必须重新开始（即每天从“一个”开始计数）

我搜索了斑马打印机的 .NET 支持 API，但我也在寻找更便宜的 API。我不需要开发的设备，因为它只会打印一些要订购的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T21:09:04.753

没有 api，您需要开发自己的 verifone POS 应用程序来创建 Verifone 680 和 .NET 桌面应用程序之间的通信。

# android - 加载器和 onLoaderReset Android

> ID：12937060
> 
> 赞同：11
> 
> 时间：2012-10-17T14:49:02.613
> 
> 标签：android, loader, android-loadermanager

我在我的应用程序中实现了一个加载器，用于从数据库中查询数据。我通过实现监听器来监听发生的变化`LoaderCallbacks<Cursor>`。我遇到的问题是`onLoaderReset(Loader<Cursor> loader)`当我的数据更改并且我想使与加载程序关联的任何数据无效并释放时使用该方法时。在所有示例中，在此方法中都有以下调用：

`mAdapter.swapCursor(null);`

但问题是我不在适配器中使用来自游标的数据，而是在我的应用程序中以其他方式使用它。

（例如，直接从返回的光标中`onLoadFinished(Loader<Cursor> loader, Cursor data)`）

```
 @Override
        public void onLoadFinished(Loader<Cursor> loader, Cursor data) {

            if (data.moveToFirst()) {
                TOTAL_CARDS = data.getCount();
                mView.createCards(TOTAL_CARDS);
            } else {
                TOTAL_CARDS = 0;
                mView.createCards(TOTAL_CARDS);
            }

        } 
```

在这里要做的相应的事情是什么，与`mAdapter.swapCursor`. 我对装载机没有太多经验，实际上我刚开始使用它们，所以如果有人对此有解决方案，我将不胜感激。谢谢！

编辑：现在，我将 null 传递给加载器，它可以工作，如下所示：

```
@Override
public void onLoaderReset(Loader<Cursor> loader) {
        loader = null;
}

}; 
```

但这是正确的解决方案吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-02T11:52:53.973

正在做

```
@Override
public void onLoaderReset(Loader<Cursor> loader) {
  loader = null;
} 
```

就像什么都不做一样好。在您的示例代码中，您只是将方法对其参数的本地引用*归零。*但是，在方法调用返回后，此引用将始终被删除。（您可能想阅读[Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)进一步讨论该主题。）

`onLoaderReset(Loader)`当您的加载程序的回调（通常是一个`Activity`或`Fragment`实例）被要求释放`Cursor`对它之前获得的所有引用时，该方法被调用`onLoadFinished(Loader, Cursor)`。基本上这种方法要求你清理，因为它`Loader`会很快关闭`Cursor`它之前提供给你的。游标关闭后，您将无法再通过它检索数据。但是，如果光标在关闭后仍处于使用状态（通常由`CursorAdapter`您提到的 a 使用），这将导致抛出异常。

Similarly, `onLoadFinished(Loader, Cursor)` has an implicit contract asking that after the method returns any formerly provided `Cursor` objects must not longer be in use. Instead, you have to replace these references by the new cursor which is provided as a method argument. In contrast, `onLoaderReset(Loader)` asks you to fulfill the same contract, but without providing a replacement, i.e. you should remove all references to a formerly retrieved `Cursor`.

In your example, you do not let your `Cursor` escape the method scope but instead you are reading the data right away. Therefore, it is not necessary to remove any references to a `Cursor` object which was provided via `onLoadFinished(Loader, Cursor)` since there are none. An empty implementation of `onLoaderReset(Loader)` to fulfill the interface contract will therefore do the job for you.

# playframework - 视图中的 url 值和 iframe

> ID：12937061
> 
> 赞同：0
> 
> 时间：2012-10-17T14:49:03.460
> 
> 标签：playframework

IDE：netbeans Playframework：v 1.2.4

从我的 app/controllers/application.java 我调用以下

```
public static void DoSomething()
{
   render("Application/Showresult.html");
} 
```

当我查看 URL 时，它指出 localhost/application/process

我可以看到结果。

为什么会显示那个 URL？

在我的一个观点中，我有一个 iframe。iframe 的 src 指向一个 html 文件，图形团队可以在部署到生产后将其放入视图文件夹中。

我是否必须将用于后期制作的 html 文件放置到 views 文件夹并从 iframe 中调用它

我的视图.html

```
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <button id="click" title="click me" ></button>
        <iframe src="@{'graphicteamview.html'}">
    </body>
</html> 
```

还是我必须告诉图形团队将他们的 html 放在公共文件夹中，然后这样访问它

```
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <button id="click" title="click me" ></button>
        <iframe src="@{'public/iframeHTML/somepage.html'}">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:39:24.307

如果它是静态资源，请将其存储在 Public 文件夹下。

# python - '{' 不是内部或外部命令、可运行程序或批处理文件

> ID：12937063
> 
> 赞同：3
> 
> 时间：2012-10-17T14:49:06.533
> 
> 标签：python

在 Windows 上运行，以下 Python 程序产生上述输出（输出变量的内容）

```
import commands

cmd = "dir"
(output) = commands.getoutput(cmd)
print output 
```

非常有趣和令人沮丧。有人可以指出我的解释吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T14:52:38.717

请参阅[文档](http://docs.python.org/library/commands.html#commands.getstatusoutput)：

> cmd 实际上运行为 { cmd ; 2>&1

这是从哪里来的`{`。你应该`subprocess`改用。

```
import subprocess
p = subprocess.Popen(['dir'],stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
stdout,stderr = p.communicate() 
```

在这种`shell=True`特定情况下是必需的，因为 dir 是内部 DOS 命令。通常应该提供可执行文件的完整路径并保持外壳禁用。

# android - 带有远程 sqlite 的 android geopoint 应用程序

> ID：12937066
> 
> 赞同：0
> 
> 时间：2012-10-17T14:49:30.823
> 
> 标签：android, google-maps, geopoints

这是我的代码（如下），

如何删除地理点表单代码，并从服务器的sqlite中读取它？我有超过 1000 个地理点，所以我的代码太长了。

我已经创建了数据库，但不知道如何从服务器连接它。

```
public class SimpleMap extends MapActivity {

    private MapView mapView;

    List<Overlay> mapOverlays;
    Drawable drawable;
    Drawable drawable2;
    MyLocationOverlay myLocationOverlay;
    SimpleItemizedOverlay itemizedOverlay2;
    SimpleItemizedOverlay itemizedOverlay;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        GeoPoint hr = new GeoPoint((int) (44.715513 * 1E6),
                (int) (16.545410 * 1E6));
        mapView.getController().animateTo(hr);
        mapView.getController().setZoom(7);

        mapOverlays = mapView.getOverlays();

        myLocationOverlay = new FixedMyLocationOverlay(this, mapView);
        mapView.getOverlays().add(myLocationOverlay);
        mapView.postInvalidate();

        drawable = getResources().getDrawable(R.drawable.icon2);
        itemizedOverlay2 = new SimpleItemizedOverlay(drawable, mapView);
        itemizedOverlay2.setShowClose(true);
        itemizedOverlay2.setShowDisclosure(false);
        itemizedOverlay2.setSnapToCenter(false);

        GeoPoint point1000 = new GeoPoint((int) (34.109798 * 1E6),
                (int) (25.242270 * 1E6));
        OverlayItem overlayItem1000 = new OverlayItem(point1000,
                "point1000", "some text");
        itemizedOverlay2.addOverlay(overlayItem1000);

        mapOverlays.add(itemizedOverlay2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:00:43.080

出于多种原因，例如[性能、安全性和应用程序可扩展性，](https://stackoverflow.com/questions/5255984/connecting-android-with-ms-sql-server-2008)从移动设备连接到远程数据库不是一个好主意。快速搜索 SO 会发现许多得出相同结论的结果。

如果您可以控制服务器，最好设置一个简单的 Web 服务，您的应用程序可以使用它来检索地理点。然后，您的应用程序将连接到 URL（例如，使用`HttpUrlConnection`）并下载位置数据，而不是连接到数据库。服务器将需要以您的应用易于解析的格式发送它们，例如逗号分隔的列表：

```
-82.8883,25.92834
2.5057,-60.90711
... 
```

对于每一对点，创建一个`GeoPoint`，将其包装在一个`OverlayItem`中，然后将其添加到您的`Overlay`.

# javascript - 使用 jQuery 预加载图像集

> ID：12937080
> 
> 赞同：2
> 
> 时间：2012-10-17T14:49:55.983
> 
> 标签：javascript, jquery

我有一组图像，它们是动画中的帧，例如：`frame-1.jpg, frame-2.jpg`我有大约 400 张图像。

我想做的是在动画开始之前预加载这 400 张图像。

通常在预加载图像时，我使用以下内容：

```
var images = [
        'img/nav-one-selected.png',
        'img/nav-two-selected.png',
        'img/nav-three-selected.png',
        'img/nav-four-selected.png'
    ];

    $(images).each(function() {
        var image = $('<img />').attr('src', this);
    }); 
```

但在这种情况下，在 var 中列出图像是不可行的，我还希望在图像全部加载后触发启动动画。

到目前为止，我有以下内容：

```
$spinner_currentFrame = 1;
$numFrames = 400;

function preloadImages() {
    $($images).each(function() {
        var image = $('<img />').attr('src', this);
    });
    startAnimation();
}

function startAnimation() {
    $spinner_loadingAnim = setInterval(function () {
        UpdateSpinner();
    }, 140);
}

function UpdateSpinner() {
    $spinner_currentFrame = $spinner_currentFrame + 1;
    if($spinner_currentFrame > $numFrames) {
        $spinner_currentFrame = 1;
    }
    console.log($spinner_currentFrame);
    $('#spinner').css("background-image", "url(frame-" + $spinner_currentFrame + ".jpg)");
}

$(document).ready(function() {
    preloadImages();
}); 
```

所以计划是我预加载从 1 到 400 的图像，然后在完成后启动动画。我将如何构建 $images var？

我想过类似的事情：

```
$images = [];
$frame = 1;
$numFrames = 400;
$($frame).each(function() {

    $frame = $frame + 1;
    if($frame <= $numFrames) {

     $images =+ 'frame-' + $frame + '.jpg';

    }

}); 
```

但我不确定a）效率如何，b）一旦成功加载所有图像，如何进行回调。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:58:10.767

您应该使用标准的 javascript for 循环而不是 jQuery 的 foreach。Foreach 非常适合循环一个数组或一组对象，但在这种情况下不是。这是一个示例，请注意，您必须在设置 Image 对象的 src 属性之前绑定 onload 事件处理程序。

更新：添加了更多功能来完成整个示例。

```
var loaded_images = 0;
var frames = 400;
var images = [];

function preloadImages() {
    for (i=0; i < frames; i++) {
        images[i] = new Image();
        images[i].onload = function() {
            loaded_images += 1;
            checkLoadingFinished();
        }
        images[i].src = 'frame-' + i + '.jpg';
    }
}

function checkLoadingFinished() {
    if (loaded_images >= frames) {
        startAnimation();
    }
}

function startAnimation() {
    var frameNumber = 0;
    var timer = setInterval(function() {
        $('#img-dom-element').attr('src', images[frameNumber]);

        if (frameNumber > frames) {
            frameNumber = 0;
        else
            frameNumber++;

    }, (1000/30)); // (1000/30) = 30 frames per second
}

$(document).ready(function() {
    preloadImages();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:57:47.273

我不知道它是否适合您的特殊情况，但我使用 [http://thinkpixellab.com/pxloader/](http://thinkpixellab.com/pxloader/) 预加载图像。如果加载了所有图像，您可以添加路径并获得一个回调。之后就可以开始动画了。

# ocaml - 演示中使用OCaml？

> ID：12937082
> 
> 赞同：4
> 
> 时间：2012-10-17T14:50:02.670
> 
> 标签：ocaml, ml

我正在寻找 OCaml 中的用法示例来演示简单的属性或定理。一个例子可能是，给定二叉树的 ocaml 定义，证明最大节点数是 2^(h+1)-1。

我已经为二叉树和图表找到了这样的例子，但没有别的了..有什么建议或链接吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T08:18:54.510

如果您说的是写在纸上的证明，则其用法与其他语言基本相同：基于程序语义的合理（但未形式化）模型的非正式推理。为了处理您的情况，我将编写两个函数`size`和`height`，并通过对树的归纳推理证明，`size h <= pow 2 (height h + 1) - 1`在两个子树上使用归纳假设——我可以使这个解释更详细，但如果你愿意，我更愿意让你自己做。

如果你想要更正式的证明，有几种方法。

*   基于 hoare 逻辑的证明技术已经适用于函数式编程语言。例如，参见 Régis-Gianas 和 Pottier 的 2008 年工作，[A Hoare logic for call-by-value functional programs](http://gallium.inria.fr/~fpottier/biblio/pottier_abstracts.html#regis-gianas-pottier-08)。它们为可以使用的东西提供了正式的基础，仍然以手写证明的形式，为您的主张提供更严格的（因为深入浅出）证明。它也可以用于定理证明器，但我不确定这种方法是否已经完全解决。

*   另一种自然的方法是直接在[Coq](http://en.wikipedia.org/wiki/Coq)证明助手中编写程序，其编程语言主要是 OCaml 的纯函数子集，并使用其工具进行证明。这与用 OCaml 编写并不完全一样，但非常接近；那么你可以直接在 OCaml 中镜像实现，或者使用 Coq 的提取工具来获取已经从 Coq 程序“编译”的看起来很诚实的 OCaml 代码。此方法已用于形式化 OCaml 标准库中存在的平衡二叉树的实现，并且两种实现（OCaml 一种和 Coq 一种）充分同步，您可以[传输结果](http://caml.inria.fr/mantis/view.php?id=5171)以证明某些 OCaml 端更改是正确的.

*   同样，有一些尝试为认证编程设计语言，在某些领域，这些语言可能比 Coq 等一般定理证明器更方便。[为什么3](http://why3.lri.fr/)就是这样一个“软件验证平台”：它定义了一种编程语言（离OCaml不是很远）和一种规范语言在它之上。您可以制定有关您的程序的断言并使用各种技术验证它们，例如通用证明助手（例如 Coq）或更自动化的定理证明器（SMT 求解器）。Why3 努力支持经典命令式算法实现的验证，但也支持函数式编程风格，因此如果您不想使用完整的 Coq（例如，如果您'对确保终止您的算法不感兴趣，这在 Coq 中可能很不方便）。

*   最后，对以下技术进行了研究：阅读您的 OCaml 程序并从中自动生成“Coq 描述”，您可以对其进行属性化，并保证您证明正确的内容也适用于 OCaml 实现。这是[Arthur Charguéraud 2010 年博士论文](http://www.chargueraud.org/projects/verif/)的主要成果，其中“Coq 描述”基于“特征公式”技术。他已经能够证明相对复杂的算法的正确 ML 实现，例如 Union-Find 或 Chris Okasaki 出色的“Purely Functional Data Structures”书中的示例。

（我经常提到 Coq 证明助手；Isabelle 和 Agda 等其他工具同样适用，但 Coq 在语法上更接近 OCaml 语言，因此如果您想重新实现 ML 程序以正式证明它们，这可能是一个不错的选择正确的。）

# android - 如何从我的应用程序在 facebook 中共享文本

> ID：12937087
> 
> 赞同：3
> 
> 时间：2012-10-17T14:50:14.500
> 
> 标签：android, facebook

我想通过我的应用在 facebook 中分享文本。我已经搜索并找到了以下代码

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
        shareIntent.setType("text/plain");
        shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Content to share");
        PackageManager pm = getPackageManager();
        activityList = pm.queryIntentActivities(shareIntent, 0); 
```

这给了我所有支持的应用程序列表`ACTION_SEND`，我只想在 facebook 中分享。我怎样才能得到只有脸书？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:15:34.480

ACTION_SEND doesnt work with facebook as Matt already commented. I posted a question about this a while ago

[facebook's take on handling share intents - how to deal with it](https://stackoverflow.com/questions/12695218/android-facebooks-take-on-handling-share-intents-how-to-deal-with-it)

So even if you manage to limit ACTION_SEND to only facebook - I doubt this is possible - it wouldnt help. So most likely using the facebook android sdk

[https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)

is your way to go.

# javascript - 将 JSLint/Hint 与 requirejs 一起使用

> ID：12937091
> 
> 赞同：10
> 
> 时间：2012-10-17T14:50:31.630
> 
> 标签：require.js, gruntjs, jslint, jshint, , , , javascript, requirejs, jslint, jshint, gruntjs

我目前正在为[require.js](/questions/tagged/require.js "显示标记为“require.js”的问题")驱动的项目设置自动构建脚本（使用[gruntjs](/questions/tagged/gruntjs "显示标记为“gruntjs”的问题")） 。因此，我想在所有需要的文件上运行[jslint](/questions/tagged/jslint "显示标记为“jslint”的问题") / [jshint](/questions/tagged/jshint "显示标记为“jshint”的问题")，然后用 r.js 连接和缩小它。由于 js 文件夹包含很多我不想 lint 的开发文件，我不能只传递给 JSLint。我的第一个想法是运行 r.js`js/**/*.js``optimizer: 'none'`, lint 连接的文件，然后将其缩小，但这不是一个选项，原因有两个。首先它将包含我不想 lint 的供应商库，然后找到有错误的行，找到它的类，在 dev 文件夹中找到适当的 js 文件，在那里修复它，再次运行 r.js，最后 lint再次，这对我们的工作流程来说非常麻烦。因此，我正在寻找一种可能性，将 linting 连接到 r.js 优化器进程中，或者至少以某种方式获取 requirejs 依赖树的列表，我可以对其进行解析并将其传递给 lint。或者任何适用于自动化流程的解决方案，您都会想出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:16:01.267

首先lint，稍后编译。只需具体说明您要 lint 的文件并使用 ! 忽略特定文件的前缀：

```
grunt.initConfig({
  lint: {
    // Specify which files to lint and which to ignore
    all: ['js/src/*.js', '!js/src/notthisfile.js']
  },
  requirejs: {
    compile: {
      options: {
        baseUrl: 'js/src',
        name: 'project',
        out: 'js/scripts.js'
      }
    }
  }
});

// Load the grunt-contrib-requirejs module.
// Do `npm install grunt-contrib-requirejs` first
grunt.loadNpmTasks('grunt-contrib-requirejs');

// Our default task (just running grunt) will
// lint first then compile
grunt.registerTask('default', ['lint', 'requirejs']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:54:08.313

我不喜欢覆盖 r.js 的方法，否则您可能会在特定版本上创建不需要的依赖项（如果 r.js 发生更改，您需要更新您的代码）

这是我用于相同目的的代码，利用了 require 的 onBuildRead 函数以及 javascript 中的对象通过引用传递的事实。我确保首先运行 require 构建，然后检查 js 文件源。

缺点是您将在构建完成后进行 lint。对于我的设置，这不是问题。

```
module.exports = function(grunt) {

var jsHintOptions = {
        options: {
            curly: true,
            eqeqeq: true,
            eqnull: true,
            browser: true,
            globals: {
                jQuery: true
            }
        },
        all: []  // <--- note this is empty! We'll fill it up as we read require dependencies
    };

var requirejsOptions = {
        compile: {
            options: {
                paths: {
                    "jquery": "empty:"
                },
                baseUrl: "./",
                name: "src/mypackage/main",
                mainConfigFile: "src/mypackage/main.js",
                out: 'build/mypackage/main.js',
                onBuildRead: function (moduleName, path, contents) {
                    jsHintOptions.all.push(path);   // <-- here we populate the jshint path array
                    return contents;
                }
            }
        }
    };

grunt.initConfig({
    pkg: grunt.file.readJSON('packages/mypackage.package.json'),
    requirejs: requirejsOptions,
    jshint: jsHintOptions
});

// load plugin that enabled requirejs
grunt.loadNpmTasks('grunt-contrib-requirejs');

// load code quality tool
grunt.loadNpmTasks('grunt-contrib-jshint');

grunt.registerTask('default', ['requirejs', 'jshint']);   // <-- make sure your run jshint AFTER require
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:20:17.923

这个答案有点绕过 Grunt，但它应该适用于你想做的事情。我这样做的方法是查看 r.js 并尝试覆盖一个函数，该函数接收正在加载的各种模块的路径，截取模块名称，并在 r.js 加载和编译模块时检查文件。我已经这样做了：

```
var requirejs = require('requirejs');
var options = {/*r.js options as JSON*/};
var oldNewContext = requirejs.s.newContext;
requirejs.s.newContext = function(){
    var context = oldNewContext.apply(this, arguments);
    var oldLoad = context.Module.prototype.load;
    context.Module.prototype.load = function(){
        var module = oldLoad.apply(this, arguments);

        if(/\.js$/.test(this.map.url) && !/^empty:/.test(this.map.url))
            console.log(this.map.url);

        return module;
    }
    return context;
}
requirejs.optimize(options) 
```

然后，当您在模块上运行 requirejs.optimize 时，您应该将所有非空 JavaScript url 记录到控制台。您可以使用 url 对文件进行 lint，而不是将它们记录到控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T18:46:11.933

不要使用`lint`任务，而是安装、加载和设置[grunt-contrib-jshint](https://github.com/gruntjs/grunt-contrib-jshint)。它可以`ignores`选择忽略特定文件或文件路径模式。

这是我的任务：

```
jshint: {
    options: {
        // options here to override JSHint defaults
        boss    : true,  // Suppress warnings about assignments where comparisons are expected
        browser : true,  // Define globals exposed by modern browsers (`document`, `navigator`)
        curly   : false, // Require curly braces around blocks
        devel   : false, // Define `console`, `alert`, etc. (poor-man's debugging)
        eqeqeq  : false, // Prohibit the use of `==` and `!=` in favor of `===` and `!==`
        "-W041" : false, // Prohibit use of `== ''` comparisons
        eqnull  : true,  // Suppress warnings about `== null` comparisons
        immed   : true,  // Prohibit the use of immediate function invocations w/o wrapping in parentheses
        latedef : true,  // Prohibit the use of a var before it's defined
        laxbreak: true,  // Suppress warnings about possibly unsafe line breaks
        newcap  : true,  // Require you to capitalize names of constructor functions
        noarg   : true,  // Prohibit the use of `arguments.caller` and `arguments.callee`
        shadow  : true,  // Suppress warnings about var shadowing (declaring a var that's declared somewhere in outer scope)
        sub     : true,  // Suppress warnings about using `[]` notation, e.g. `person['name']` vs. `person.name`
        trailing: true,  // Trailing whitespace = error
        undef   : false, // Prohibit the use of explicitly undeclared variables
        unused  : false, // Warn when you define and never use your variables
        white   : false, // Check JS against Douglas Crawford's coding style
        jquery  : true,  // Define globals exposed by jQuery
        // Define global functions/libraries/etc.
        globals : {
            amplify : true
        },
        ignores: [
            'src/app/templates/template.js',
            'src/scripts/plugins/text.min.js'
        ]
    },
    gruntfile: {
        src: 'Gruntfile.js'
    },
    app: {
        src: 'src/app/**/*.js'
    },
    scripts: {
        src: 'src/scripts/**/*.js'
    }
} 
```

# visual-studio-2010 - 为什么 TAB 在 Visual Studio 2010 中不缩进 C++ 代码？

> ID：12937096
> 
> 赞同：2
> 
> 时间：2012-10-17T14:50:46.327
> 
> 标签：visual-studio-2010, indentation

我相信这不是标准行为，但是当我在变量或常量之前或之后按下 TAB 键时，Visual Studio 不会使用制表符间距缩进代码。相反，它用粉红色下划线突出显示该值，并前进到该值的下一个实例。如果我继续按 TAB，我将在当前范围内轮换该值/变量的所有实例。

我无法找到关闭这种自动搜索样式行为并返回简单缩进的设置。任何帮助将不胜感激。坦率地说，我开始失去理智了......

富有的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:04:07.670

标准行为如你所愿；即 TAB 缩进（和 shift-TAB 非缩进）。您可能安装了一个将其搞砸的扩展程序。或者您可能无意中重新映射了键绑定。或者，也许当您安装时选择了一个使用不同键绑定映射的编辑环境（我总是选择 C++）。

# iphone - iOS - 导航控制器中的奇怪之处

> ID：12937097
> 
> 赞同：0
> 
> 时间：2012-10-17T14:50:47.597
> 
> 标签：iphone, ios, ipad

我创建了一个基于“单一视图应用程序”Xcode 模板的应用程序。它有一个导航控制器和一个 rootViewController。

当我在 rootViewController 上时

```
[self presentModalViewController:nextModalViewController animated:YES]; 
```

新的视图控制器是动画的。

我的问题是这个。我已经按顺序呈现了很多viewController，也就是

```
A > B > C > D 
```

或者换句话说，我使用 presentModalViewController 从 A 呈现 B，从 B 呈现 C 等等。是的，我必须使用 presentModalViewController 因为我有一个特殊的动画在 viewControllers 之间进行转换，我不能使用 [self.navigationController push...

我的问题是：当我对导航堆栈使用 presentModalViewController 时会发生什么？控制器是否被推送到某个堆栈？有没有办法获得对在给定时间呈现的所有导航控制器的引用？类似导航堆栈的东西？我的意思是，假设我在 D 上，我想获得 D 之前呈现的所有控制器的列表。

我知道我可以创建属性并将其传递。我只是想知道是否已经在 iOS 上构建了一些可以做到这一点的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:59:48.160

在 iOS 5 及更高版本中，`UIViewController`具有`presentingViewController`返回呈现接收器的视图控制器的属性。在 iOS 4 及更早版本中，使用显示视图控制器的`parentViewController`属性来访问其显示视图控制器。因此，您可以通过适当地访问这些属性，从 D 访问例如 C 视图控制器。[有关更多信息，请参阅文档。](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

如果你想以链的形式访问所有的视图控制器，你可以这样做：

```
UIViewController *node = self;
while (node != nil) {
    // do something with the view controller, then skip to its parent
    node = node.presentingViewController;
    // or node = node.parentViewController; in iOS 4 or older
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T15:00:12.543

我随后会`viewControllers`在每次模态演示后从您的 UINavigationController 检查属性的大小，并检查它是否增长。

```
UIViewController *theControllerYouWant = [self.navigationController.viewControllers objectAtIndex:(theIndexOfYourViewController)]; 
```

# sql-server - 如何使用 Visual Studio 的 Git 源代码控制提供程序对 SQL Server 数据库进行版本控制

> ID：12937101
> 
> 赞同：11
> 
> 时间：2012-10-17T14:50:55.693
> 
> 标签：sql-server, visual-studio-2010, visual-studio, git, ssms

我有[Git 源代码控制提供程序](http://gitscc.codeplex.com/wikipage?title=Commit%20Changes&referringTitle=Documentation)设置并运行良好。

对于 Visual Studio 项目，就是这样。

问题是每个这样的项目都与SQL Server 数据库**紧密相关。**

我知道[如何](http://www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html)在自己的`.git`存储库中对数据库进行版本控制，但这既不方便也不真正健壮，因为理想情况下，我希望相同的 ADD、COMMIT、TAG 和 BRANCH 命令以同步的方式同时对两个目录树进行操作。

有没有办法以我描述的方式使用 Visual Studio 的 Git 源代码控制提供程序来 Git SQL Server 数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T17:52:49.460

如果需要，您可以安装`SQL Server Data Tools`，但您不必：您可以[使用数据库发布向导将表数据](http://weblogs.asp.net/jgalloway/archive/2006/12/29/tip-use-the-database-publishing-wizard-to-script-your-table-data.aspx) **直接从 Visual Studio**编写到解决方案的文件夹中，然后像处理其他项目文件一样使用 Git在那个文件夹中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T15:51:42.317

您可以使用[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)将数据库架构存储为 Visual Studio 项目，然后使用 Git 对该项目进行版本控制。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-01T07:17:51.873

在数据库版本控制领域工作了 5 年（在[DBmaestro](http://www.dbmaestro.com)担任产品管理总监）并担任了超过 20 年的 DBA，我可以告诉您一个简单的事实，即您不能像对待 Java 那样对待数据库对象， C# 或其他文件，并将更改保存在简单的 DDL 脚本中。

有很多原因，我将仅举几例：

*   文件本地存储在开发人员的 PC 上，他/她所做的更改不会影响其他开发人员。同样，开发人员也不会受到同事所做更改的影响。在数据库中，（通常）情况并非如此，开发人员共享相同的数据库环境，因此提交给数据库的任何更改都会影响其他人。
*   发布代码更改是使用签入/提交更改等完成的（取决于您使用的源代码控制工具）。此时，来自开发人员本地目录的代码被插入到源代码控制存储库中。想要获取最新代码的开发人员需要从源代码管理工具中请求它。在数据库中，更改已经存在并影响其他数据，即使它没有签入到存储库中。
*   在文件签入期间，源代码控制工具会执行冲突检查，以查看在您修改本地副本期间，同一文件是否被其他开发人员修改和签入。再次在数据库中没有检查这个。如果您从本地 PC 更改程序，同时我使用本地 PC 的代码修改相同的程序，那么我们会覆盖彼此的更改。
*   代码的构建过程是通过将代码的标签/最新版本放到一个空目录中，然后执行构建-编译来完成的。输出是我们复制和替换现有的二进制文件。我们不在乎以前的情况。在数据库中，我们无法重新创建数据库，因为我们需要维护数据！部署还执行在构建过程中生成的 SQL 脚本。
*   执行 SQL 脚本（使用 DDL、DCL、DML（用于静态内容）命令）时，您假定环境的当前结构与创建脚本时的结构相匹配。如果没有，那么您的脚本可能会在您尝试添加已经存在的新列时失败。
*   将 SQL 脚本视为代码并手动生成它们会导致语法错误、数据库依赖项错误、不可重用的脚本，从而使开发、维护和测试这些脚本的任务变得复杂。此外，这些脚本可能运行在与您想运行的环境不同的环境中。
*   有时版本控制存储库中的脚本与被测试对象的结构不匹配，然后在生产中会发生错误！

还有很多，但我想你明白了。

我发现有效的方法如下：

1.  使用强制版本控制系统对数据库对象强制执行签出/签入操作。这将确保版本控制存储库与签入的代码相匹配，因为它在签入操作中读取对象的元数据，而不是作为手动完成的单独步骤。这也允许多个开发人员在同一个数据库上并行工作，同时防止他们意外地覆盖彼此的代码。
2.  使用影响分析，利用基线作为比较的一部分来识别冲突并识别差异（在比较源代码控制存储库和数据库之间的对象结构时）是源自开发的真正更改还是源自不同的路径，然后应该跳过它，例如不同的分支或紧急修复。
3.  使用知道如何一次对多个模式执行影响分析的解决方案，使用 UI 或使用 API 以最终自动化构建和部署过程。

我写的一篇文章在这里发表[，](http://www2.dbmaestro.com/l/11742/2014-12-31/2grnfr)欢迎阅读。

# java - 类之间的Android消息

> ID：12937109
> 
> 赞同：7
> 
> 时间：2012-10-17T14:51:09.507
> 
> 标签：java, android

这是我的第一篇文章，我没有发现任何类似的东西，所以我决定问一下。

我正在为 Android 开发一个扑克游戏来练习 SDK 并刷新/改进我的 Java。它是一个控制德州扑克手的简单应用程序。

最初，我只使用 Java SE 编写了我的类，它看起来不错。每个类都有自己的目的并使用控制台输入/输出对其进行测试，我可以看到它确实有效:)

上周，我决定将它移植到 Android 以通过图形界面查看发生的事情，因此我获取了资源图像，制作了一个 Activity 并包含了我的扑克包。

在移植到 Android 之前，我可以放一个 println（或 readLine）来查看发生了什么并发送我的输入。现在我陷入了每个类如何与游戏活动通信以提供必须绘制的内容。如果可能的话，我不想在游戏类中插入 Android 绘图代码。我试图找到一种在我的活动和游戏类之间交换消息的方法，并且我喜欢一些建议。我是开发 Android 应用程序的新手，所以我不知道这样做的所有机制。

以下是我的活动片段：

```
package my.poker.game;

//import stuff

public class ActivityHand extends Activity
{
private static Vector<Player> Players = new Vector<Player>();
public static final int MAX_PLAYERS = 8;

public static void startEmptyTable()
{
    Players.removeAllElements();
    Players.setSize(MAX_PLAYERS);
}

public static void LeaveTable(int pos)
{
    Players.set(pos, null);
}

public static void SitTable(int pos, Player player)
{
    Players.set(pos, player);
}

/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        int cash = 1000;

        startEmptyTable();

        SitTable(0, new Jogador("William", cash));
    SitTable(2, new Jogador("Richard", cash));
    SitTable(4, new Jogador("John", cash));
    SitTable(6, new Jogador("Paul", cash));
    SitTable(8, new Jogador("Albert", cash));

    //Start a Hand.... in future this will be a loop for each Hand
        Hand hand = new Hand(Players);
    }
} 
```

对象手将选择一个庄家，发牌，控制大小盲注并开始游戏循环。

问题是：hand 类如何告诉 Activity 进行绘制并传递一个包含要绘制什么的对象？

非常感谢你的帮助

* * *

编辑：我决定尝试使用处理程序实现它并传递简单的消息。正如我从[Developers 的 Handler 中](http://developer.android.com/reference/android/os/Handler.html)读到的，一个 Handler 对象被分配给线程的 MessageQueue，所以我尝试将它放入我的 Activity 类中（在 Hand hand = new Hand (...) 之前）：

```
Handler handler = new Handler()
{
    @Override
    public void handleMessage(Message msg)
    {

        Bundle bundle = msg.getData();

        // Do something with message contents
    }
}; 
```

在 Hand 类中，当我想画一些东西时，我把它放在了里面：

```
Handler handler = new Handler();
Message msg = new Message();
Bundle bundle = new Bundle();

bundle.putString("Key", "The Key's Value");
msg.setData(bundle);
handler.sendMessage(msg); 
```

据我了解，两个处理程序都来自同一个线程，所以它们被分配到同一个 MessageQueue 对吗？当我在 Hand 类中发送消息时，Activity 类可以在 handleMessage 方法中接收它并处理我发送的任何消息，但 handleMessage 不执行。

我错过了什么？

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:11:19.420

要调用活动中的方法，您需要将活动传递给此类。

例如：

```
 public class PokerActivity extends Activity
        {

           @Override
           public void onCreate(Bundle savedInstanceState)
           {
                Hand hand = new Hand(this);
           }

           public void setVisibleHand(Player player)
           {
            <do something in the activity>
           }

        }

    public class Hand
    {
      PokerActivity pokerActivity;
      public Hand(PokerActivity activity)
      {
        this.pokerActivity = activity;
      }

      public void setVisibleHand()
      {
        pokerActivity.setVisibleHand(player1);
      }
    } 
```

现在，这可能不是最好的方法。在 Android 中，您必须小心不要泄漏上下文，否则您可能会遇到内存问题。（简单地传递活动/上下文可能是最简单的方法，但也是泄漏上下文的最简单方法。）

我建议您先看一些简单的教程，以了解 android 活动的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:01:16.190

您可以使用[处理](http://developer.android.com/reference/android/os/Handler.html)程序和[消息](http://developer.android.com/reference/android/os/Message.html)系统在您的类之间进行通信。

Lars Vogel 的本教程应该可以帮助您了解[Android 线程、处理程序和 AsyncTask - 教程](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:03:03.353

您将不得不创建另一个类来与您自己的类和活动本身进行交互。从该类中，您可以使用活动上下文来控制 android 活动。使用处理程序和消息的方法很好，但需要您修改游戏类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T15:20:05.763

也许你应该扩展 View Class 来绘制手。

[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

# ruby-on-rails - Ruby on Rails 应用程序/REST API 身份验证架构

> ID：12937116
> 
> 赞同：0
> 
> 时间：2012-10-17T14:51:37.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, authentication, architecture

我将开发一个 Ruby on Rails 应用程序（基本上是一个后台），它同时通过 Rails 提供的 REST 接口为 Android 移动应用程序提供数据。我的担忧如下：我应该如何管理和构建我的 ROR 应用程序，以便来自 Android 的 REST 调用通过 API 密钥 + 用户 ID 进行身份验证（我也在考虑使用 OAuth），另一方面，用户可以交互通过后台。例如，对于 BO 访问和移动客户端访问，我是否应该为相同的资源使用不同的控制器（从而增加复杂性）（这样我就可以实现不同的身份验证逻辑）？是否有任何标准/通用方式（又名 gem）来管理和实现这种行为？

提前致谢！

# javascript - 使用javascript循环遍历asp：GridView数据

> ID：12937122
> 
> 赞同：2
> 
> 时间：2012-10-17T14:51:48.360
> 
> 标签：javascript, jquery, asp.net, gridview

首先，是否可以在**客户端**使用**JavaScript循环遍历****asp:GridView中的数据。**如果是，我想知道该怎么做...

 ****因为我打算捕获 Grid 上 2 个字段的值，并根据它们的值在每一行上附加一个图像（*一旦我可以遍历数据并比较它们，那部分就不应该造成太大问题*）。

我的网格看起来像**这样**：

```
 <asp:GridView ID="GridView1" runat="server" EmptyDataText="No Record Found" AllowSorting="true"
        AllowPaging="false" OnRowCreated="GridView1_RowCreated" Visible="true" BackColor="ButtonShadow"
        OnSorting="GridView1_Sort" AutoGenerateColumns="false" GridLines="None" >
        <Columns>
            </asp:TemplateField>
            <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
            <asp:BoundField DataField="Gender" HeaderText="Gender" SortExpression="Gender" />
            <asp:BoundField DataField="Age" HeaderText="Age" SortExpression="Age" />
            <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />
            <asp:BoundField DataField="Exam" HeaderText="Exam" SortExpression="Exam" />
            <asp:BoundField DataField="DateTime" HeaderText="DateTime" SortExpression="DateTime" />
            <asp:BoundField DataField="Status" HeaderText="Status" SortExpression="Status" />
            <asp:BoundField DataField="Priority" HeaderText="Priority" SortExpression="Priority" />
        </Columns>
    </asp:GridView> 
```

*如果我直截了当地说：*我如何捕捉每一行的*性别*和*年龄？*

**PS**我也对***JQuery***解决方案持开放态度............

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:10:37.100

由于您拥有`id`gridview，您可以在 Javascript 中获取元素，遍历其行，然后遍历行的单元格，检查索引 1（性别）或 2（年龄），并获取它`innerHTML`以获取内容。看看这个：

```
window.onload = function () {
    var table, tbody, i, rowLen, row, j, colLen, cell;

    table = document.getElementById("GridView1");
    tbody = table.tBodies[0];

    for (i = 0, rowLen = tbody.rows.length; i < rowLen; i++) {
        row = tbody.rows[i];
        for (j = 0, colLen = row.cells.length; j < colLen; j++) {
            cell = row.cells[j];
            if (j == 1) {
                // Gender
                console.log("--Found gender: " + cell.innerHTML);
            } else if (j == 2) {
                // Age
                console.log("--Found age: " + cell.innerHTML);
            }
        }
    }
}; 
```

**演示：http:** [//jsfiddle.net/ZRXV3/](http://jsfiddle.net/ZRXV3/)

这绝对取决于您呈现的 HTML 的结构。可能总是有一个隐藏的列或其他东西。

* * *

**更新：**

一个 jQuery 解决方案可能是这样的：

```
$(document).ready(function () {
    var rows, genders, ages;

    rows = $("#GridView1").children("tbody").children("tr");    // Find all rows in table (content)
    genders = rows.children("td:nth-child(2)");    // Find all columns that are the 2nd child
    ages = rows.children("td:nth-child(3)");    // Find all columns that are the 3rd child

    // An example of looping through all "gender" columns
    genders.each(function () {
        console.log($(this).html());
    });
}); 
```

**演示：http:** [//jsfiddle.net/YgY35/](http://jsfiddle.net/YgY35/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T09:25:54.193

我期待着同样的解决方案，我找到了上面的答案。实施后，它在 IE 11 中不起作用。

我修改了解决方案并在 IE 11 中也工作。

```
var rOrders = new Array();
var table, tbody, i, rowLen, row, j, colLen, cell, tr;
var result = false;

table = document.getElementById("<%=gvRunningOrder.ClientID%>");
tbody = table.tBodies[0];
tr = $(tbody).find('tr');

for (i = 0, rowLen = tr.length; i < rowLen; i++) {
    row = tr[i];
    for (j = 0, colLen = row.cells.length; j < colLen; j++) {
        cell = row.cells[j];
        if (j == 1) {
            rOrders.push(cell.childNodes[1].value);
        }
    }
} 
```****

# sql-server-2008 - 加入TableA、TableB和TableC，从TableA和TableC中获取数据

> ID：12937126
> 
> 赞同：0
> 
> 时间：2012-10-17T14:52:00.620
> 
> 标签：sql-server-2008

为什么我会为此获得这么多记录

```
SELECT e.OneColumn, fb.OtherColumn
FROM  dbo.TABLEA FB
INNER JOIN dbo.TABLEB eo ON Fb.Primary = eo.foregin
INNER JOIN dbo.TABLEC e ON eo.Primary =e.Foreign
WHERE FB.SomeOtherColumn = 0 
```

当我运行它时，我得到了数百万条记录，这是不正确的情况，所有表的记录数都较少。

我需要从 TableA 和 TableC 中获取列，因为它们没有逻辑连接，所以我必须使用 TableB 作为桥梁

**编辑**

下面是计数：

```
TABLEA = 273551
TABLEB = 384412
TABKEC = 13046 
```

上面的查询 = 2 分钟后我强行取消了查询.. 直到那时计数为**11437613**

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:22:20.603

为了弄清楚这样的查询中发生了什么结果与预期不符，我倾向于这样做。首先，我更改为 SELECT *（请注意，这只是为了解决问题，永远不要在生产中使用 SELECT *！）然后，如果查询中没有，我会为 tableA 中的 ID frield 添加一个 order by。

所以现在我将查询运行到第一个表，包括来自第一个表的任何 where 条件。我把其余的注释掉。我注意到返回的记录数。

现在我添加第二个表和其中的任何条件。如果我期望一对关系，并且如果此查询未返回 smae 记录数，那么我会查看返回的数据，看看我是否能找出原因。由于内容是按 table1 ID 排序的，因此您通常可以查看一些相当容易重复的记录示例，然后滚动直到找到导致差异的字段。这通常意味着您需要某种额外的 where 子句或对下一个表中的字段进行聚合，以限制只有一条记录。此时只需记下问题，因为您可能能够在下一次加入时更有效地进行更改。

因此，再次添加第三个表，而不是记录数，然后仔细查看 A 中的 id 重复的数据。看看您打算返回的列，它们对于 id 是否总是相同的？如果它们不同，那么您就没有一对一的关系，您需要了解这是数据完整性问题，或者您错误地认为存在一对一。如果它们相同，则派生表可能是有序的。您只需要来自 tableb 的 id，因此连接可能如下所示：

```
JOIN (SELECT MIn(Primary), foreign FROM TABLEB GROUP BY foreign) EO ON Fb.Primary = eo.foreign 
```

希望这可以帮助。

# jquery-mobile - jquerymobile 缩略图

> ID：12937130
> 
> 赞同：1
> 
> 时间：2012-10-17T14:52:10.203
> 
> 标签：jquery-mobile

萨拉姆

我是 jqueryMobile 的新手，我想查看缩略图，但得到了这个![在此处输入图像描述](../Images/3e9d5d7d9abe4f085633b52c35d2c4d6.png)

我怎样才能得到一个正常的？

这里是这个列表的代码

```
<ul data-role="listview" class="ui-listview">
        {% for produit in produits %}   

            <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c"><div class="ui-btn-inner ui-li"><div class="ui-btn-text"><a href="index.html" class="ui-link-inherit">
                {% if produit.Images is empty %}
                    <img src="{{asset('upload/non_disponible.jpg')}}" class="ui-li-thumb"/>
                {% else %}
                    <img src="{{asset('upload/')}}{{produit.Images[0].path}}" class="ui-li-thumb"/>
                {% endif %}
                <h3 class="ui-li-heading">Broken Bells</h3>
                <p class="ui-li-desc">Broken Bells</p>
            </a></div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>

        {%endfor%}
    </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:29:04.390

请改用以下代码（使用 jQuery Mobile 版本 1.2.0）：

```
<ul data-role="listview" class="ui-listview">

    {% for produit in produits %}   
    <li data-theme="c">
        <a href="index.html" class="ui-link-inherit">
            {% if produit.Images is empty %}
                <img src="{{asset('upload/non_disponible.jpg')}}" class="ui-li-thumb"/>
            {% else %}
                <img src="{{asset('upload/')}}{{produit.Images[0].path}}" class="ui-li-thumb"/>
            {% endif %}
            <h3 class="ui-li-heading">Broken Bells</h3>
            <p class="ui-li-desc">Broken Bells</p>
        </a>
    </li>
    {%endfor%}

</ul> 
```

希望这可以帮助。让我知道你的结果。

# postgresql - 具有不同数据目录的 postgreSQL

> ID：12937133
> 
> 赞同：2
> 
> 时间：2012-10-17T14:52:22.447
> 
> 标签：postgresql, postgresql-9.1

今天我安装了 postgreSQL 来使用。当我阅读有关 postgreSQL 的文档时，我发现可能存在多个数据目录。单个安装是否有多个数据目录？还是我理解错了？

在我的安装中，数据目录位于

> C:\Program Files\PostgreSQL\8.3\data

如果单个安装可以有多个数据目录，目录结构将如何？请帮助我理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:10:59.877

我认为您的意思是表空间，请查看手册：[CREATE TABLESPACE](http://www.postgresql.org/docs/current/static/sql-createtablespace.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T22:33:14.907

每个 PostgreSQL 集群只能有一个数据目录。集群是监听端口的 postmaster，从一个数据目录管理多个数据库。您可以通过使用或通过系统服务启动多个 postmasters 来拥有多个集群`pg_ctl`，每个 postmasters 侦听不同的端口并使用不同的数据目录。

如果您在一台机器上有多个集群，那么您就有多个数据目录。需要这样做是不寻常的，但这是可能的。

如果您在询问有关文档的问题时链接到您正在谈论的文档，那将非常有帮助。

# php - 将 PHP 代码添加到表单操作中会在表单外打印数据

> ID：12937136
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:52:29.513
> 
> 标签：php, wordpress

我正在尝试将以下代码添加到表单的操作部分中：

```
action="'.the_permalink().'?filename.php=1" 
```

但这只会增加`?filename.php=1`表单操作，并且在表单开始之前，the_permalink() 结果就打印在表单之外！

这是我的表格行：

```
form name="front_end_aa" method="POST" action="".the_premalink()."?assign-journalist=1" 
```

`the_permalink()`是 wordpress 中的一个函数，用于获取您正在单击的帖子的链接。

**已解决：感谢@enenen 解决了这个问题：**

将 PHP 的结果存储到变量中，并将变量附加到表单操作中，如下所示：

`$permalink = get_permalink();`

`echo '<form name="front_end_aa" method="POST" action="'.$permalink.'?filename=1">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:31:35.480

我还是不明白你在哪里写你的`form`标签。所以...

如果它是纯 html，它将是：

```
<form name="front_end_aa" method="POST" action="<?php the_premalink(); ?>?assign-journalist=1"> 
```

如果它在 PHP 代码中，它将是：

```
echo "<form name='front_end_aa' method='POST' action='".the_premalink()."?assign-journalist=1'>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:58:33.577

```
action="<?php echo_the_permalink(); ?>?rest_part_of=url" 
```

无论如何，它是丑陋的。编写一个呈现整个 URL 的函数怎么样？

```
action="<?php echo_whole_url(1); ?>" 
```

其中*1*是 url 的参数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:22:17.530

您需要一个存储由 the_permalink() 创建的值的变量：

```
$myLink = the_permalink();
echo '<form action="'.$myLink.'?filename.php=1">'; 
```

这应该够了吧。或者试试ern0的答案

# java - JCA/JCE 和 PKCS#11 如何（一起）工作？

> ID：12937138
> 
> 赞同：14
> 
> 时间：2012-10-17T14:52:32.053
> 
> 标签：java, jce, pkcs#11

我想使用 HSM（硬件安全模块）来创建 XML 文件的签名。不过，我做了一些研究，现在有点困惑。

您能否澄清这些问题：

1.  JCE 中的*密钥句柄*是什么意思？我已经读过它，它只是一个句柄，密钥存储在其他地方。怎么可能？据我了解，我要么将密钥加载到内存中并使用它，要么签名完全由 HSM 完成，我只得到结果，对吧？
2.  PKCS#11 标准是否定义了一种在 HSM 中生成签名的方式？我读过关于*tokens*的文章，但我不确定签名。
3.  我的 HSM 的功能列表分别声明了 JCE 和 PKCS#11。这意味着什么？
4.  我认为 PKCS#11 是一个标准，而 JCE 定义了使用该标准的类。JCE 是否指定了自己的协议？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-17T18:12:00.310

1.  **JCE 中的密钥句柄是什么意思？**
    密钥句柄（在 JCE、PKCS#11 或大多数其他加密 API 中）只是一个参考，使您能够使用密钥而无需查看其实际值。这很好：您可以将密钥永久存储在安全的地方（例如 HSM），并确保没有人能够复制它并带走它 - 如果密钥是应用程序空间，则可能会发生这种情况。但是，与物理保险箱不同的是，您仍然可以执行加密操作，而不会冒任何密钥泄漏的安全风险。

2.  **PKCS#11 标准是否定义了一种在 HSM 中生成签名的方式？**
    PKCS#11 是用于加密令牌的 C API。*令牌*是提供此类 API 描述的服务的任何设备或程序的 PKCS#11 抽象。API 定义了您可以使用 PKCS#11 令牌内的对象执行哪些操作：一些对象是非敏感的，可以提取（例如公钥）；其他一些是敏感的，只能通过手柄使用。
    如果您有一个支持签名的对象的句柄，您可以使用 C 函数[C_Sign](http://www.cryptsoft.com/pkcs11doc/v220/pkcs11__all_8h.html#aC_Sign)要求令牌对您的应用程序提供的某些数据进行身份验证。密钥不会离开 HSM。

3.  **我的 HSM 的功能列表分别声明了 JCE 和 PKCS#11。这意味着什么？**
    您的 HSM 支持 JCE，因为它带有一个有资格作为 [Cryptographic Service Provider](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#ProviderArch)的本机库。
    它支持 PKCS#11，因为它带有一个提供 C PKCS#11 API 的本机库。

4.  **我认为 PKCS#11 是一个标准，而 JCE 定义了使用该标准的类。JCE 是否指定了自己的协议？**
    事实上 PKCS#11 是一个标准；但它不能直接被 C 以外的语言使用。您需要一个映射层，将其翻译成与您的语言兼容的东西。PKCS#11 库（及其抽象的物理令牌）可以映射到[JCE 提供程序](http://docs.oracle.com/javase/1.5.0/docs/guide/security/p11guide.html)。

但是，JCE 提供者可能与 PKCS#11 无关。

# c# - 如何使用 HTML Parser 获取评论？

> ID：12937141
> 
> 赞同：0
> 
> 时间：2012-10-17T14:52:34.240
> 
> 标签：c#, asp.net, html, html-parsing, blogs

我正在尝试使用解析器`HTML`来解析/获取新闻网站 Times of India 上文章的评论。这是一个示例网址：`ASP.NET``C#``http://timesofindia.indiatimes.com/tech/tech-news/software-services/Infosys-CEO-SD-Shibulals-letter-to-employees/articleshow/16832881.cms`

我试图获取它的 HTML，然后使用`WebGet`,`DocumentNode.SelectNodes()`等来获取评论。但它没有在页面的 HTML 中显示任何评论。

（通常要获取的所有数据都嵌入在某些`<div>`标签等中，但这里没有提供评论的此类标签。）

如何从该页面获取评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:12:12.430

如果您发布的 URL 是，您可以通过导航到评论 URL 来获取评论。

[http://timesofindia.indiatimes.com/tech/tech-news/software-services/Infosys-CEO-SD-Shibulals-letter-to-employees/opinions/16832881.cms](http://timesofindia.indiatimes.com/tech/tech-news/software-services/Infosys-CEO-SD-Shibulals-letter-to-employees/opinions/16832881.cms)

然后搜索

```
<div style="" class="cmt"> 
```

这似乎是指定评论的标签。

# python - Python 中的图像抓取程序未按预期运行

> ID：12937144
> 
> 赞同：5
> 
> 时间：2012-10-17T14:52:43.253
> 
> 标签：python, image

我的代码只返回一个空字符串，我不知道为什么。

```
import urllib2

def getImage(url):
    page = urllib2.urlopen(url)
    page = page.read() #Gives HTML to parse

    start = page.find('<a img=')
    end = page.find('>', start)

    img = page[start:end]

return img 
```

它只会返回它找到的第一张图片，所以它不是一个很好的图片抓取工具；也就是说，我现在的主要目标只是能够找到图像。我做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:04:10.650

考虑使用[BeautifulSoup](http://pypi.python.org/pypi/BeautifulSoup)来解析您的 HTML：

```
from BeautifulSoup import BeautifulSoup
import urllib
url  = 'http://www.google.com'
html = urllib.urlopen(url).read()
soup = BeautifulSoup(html)
for img in soup.findAll('img'):
     print img['src'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:00:10.450

您应该为此使用一个库，并且那里有几个，但是通过更改您向我们展示的代码来回答您的问题...

您的问题是您正在尝试查找图像，但图像不使用`<a ...>`标签。他们使用`<img ...>`标签。这是一个例子：

```
<img src="smiley.gif" alt="Smiley face" height="42" width="42"> 
```

您应该做的是将您的`start = page.find('<a img=')`行更改为`start = page.find('<img ')`：

```
def getImage(url):
    page = urllib2.urlopen(url)
    page = page.read() #Gives HTML to parse

    start = page.find('<img ')
    end = page.find('>', start)

    img = page[start:end+1]
    return img 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:08:30.887

一些可能有帮助的说明：

1.  使用谷歌浏览器。将鼠标放在图像上并单击鼠标右键。选择“检查元素”。这将打开一个部分，您可以在其中看到图像附近的 html。

2.  使用 Beautiful Soup 解析 html：

    ```
    from BeautifulSoup import BeautifulSoup

    request = urllib2.Request(url)
    response = urllib2.urlopen(request)
    html = response.read()
    soap = BeautifulSoap(html)
    imgs = soup.findAll("img")
    items = []
    for img in imgs:
        print img['src'] #print the image location
        items.append(img['src']) #store the locations for downloading later 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:57:12.013

关于使用 ruby​​ 进行屏幕抓取的文章： [http](http://www.igvita.com/2007/02/04/ruby-screen-scraper-in-60-seconds/) ://www.igvita.com/2007/02/04/ruby-screen-scraper-in-60-seconds/ 它不是抓取图像，但它是一篇好文章，可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T14:59:57.503

以这种方式提取图像信息并不是一个好主意。根据您的知识和学习新事物的动机，有几个更好的选择：

*   [http://scrapy.org/](http://scrapy.org/)是一个非常好的从网页中提取数据的框架。由于看起来您是初学者，因此可能有点矫枉过正。

*   学习正则表达式提取信息：[http](http://docs.python.org/library/re.html) ://docs.python.org/library/re.html和[学习正则表达式](https://stackoverflow.com/questions/4736/learning-regular-expressions)

*   使用[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)从`page.read()`.

# google-cloud-datastore - 从非幂等事务的 Datastore 提交异常中恢复

> ID：12937145
> 
> 赞同：2
> 
> 时间：2012-10-17T14:52:45.913
> 
> 标签：google-cloud-datastore

[https://developers.google.com/appengine/docs/java/datastore/transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)上的 Google App Engine 文档说：

> 注意：在极少数情况下，即使事务返回超时或内部错误异常，事务也会完全提交。因此，最好尽可能使事务具有幂等性。

如果事务不是幂等的，从提交异常中恢复的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:50:05.193

我认为您所做的是向最终用户显示一个错误，他们可以使用一个链接来查看他们的世界状态。然后最终用户可以决定是否重新提交。例如，如果他们在博客上发表评论并且帖子以某种方式报告错误，他们可以重新加载博客页面并查看他们的评论是否存在；如果他们发现不是，他们可以（希望）从浏览器历史记录中恢复并重新提交。

# c# - 如何删除自定义控件类中的重复代码

> ID：12937146
> 
> 赞同：0
> 
> 时间：2012-10-17T14:52:47.477
> 
> 标签：c#, .net, custom-controls, custom-server-controls, servercontrols

我有 2 个自定义服务器控件类。一个继承自 TextBox，另一个继承自 Label。

这两个类都包含相当多的通用代码（各种属性和属性呈现逻辑），但它们也确实包含一些不同的代码。

理想情况下，公共代码将包含在抽象类中，并且每个自定义控件都将从该抽象类继承。这当然是不可能的，因为它们已经从各自的基类继承，而 c# 不支持多重继承。如何解决代码重复问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:56:27.657

这取决于确切的功能。如果他们没有办法从同一个地方继承（似乎是这种情况），那么最好的办法是拥有一个包含通用功能的第三个类，并以某种方式包含它，或者通过拥有它的实例在您的控件类中或仅在其上调用静态方法。我会选择哪一个可能取决于您的代码是什么，并且希望相对明显。

# visual-studio - 数组上的 __declspec（线程）

> ID：12937150
> 
> 赞同：0
> 
> 时间：2012-10-17T14:53:00.530
> 
> 标签：visual-studio, visual-studio-2005

以下代码：

```
__declspec (thread) static int  somearray[4][4] = { 
  {16, 12, 12,  8},
  {12,  8,  8,  4},
  {12,  8,  8,  4},
  { 8,  4,  4,  0}}; 
```

引发以下错误：

```
error C2144: syntax error : 'int' should be preceded by ';' 
```

看来我在这里没有正确使用 threadlocal 和数组。我应该怎么做？

# java - Java Metal Look & Feel 最大化时隐藏 Windows 工具栏

> ID：12937156
> 
> 赞同：4
> 
> 时间：2012-10-17T14:53:35.330
> 
> 标签：java, swing, jframe, look-and-feel, uimanager

在我的应用程序中，我们使用 CrossPlatform L&F（金属）并且我们希望最大化启动主 JFrame。执行时，我发现 Windows 工具栏隐藏。如果我使用 System L&F，则不会发生这种情况。

为什么会这样？有没有办法避免这种情况？

强制金属 L&F 的代码摘录是：

```
 try {
        UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
        MetalLookAndFeel.setCurrentTheme(new OceanTheme());
        UIManager.setLookAndFeel(new MetalLookAndFeel());
    } catch (ClassNotFoundException ex) {
        code to catch this exception;
    } catch (InstantiationException ex) {
           code to catch this exception;
    } catch (IllegalAccessException ex) {
           code to catch this exception;
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
           code to catch this exception;
    }

    JFrame.setDefaultLookAndFeelDecorated(Boolean.TRUE); 
```

和最大化窗口的方法如下：

```
 private void formWindowOpened(java.awt.event.WindowEvent evt) {  
    setExtendedState(JFrame.MAXIMIZED_BOTH);
    return;
} 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:14:30.043

当您致电时，这似乎是一个已知问题：

```
JFrame.setDefaultLookAndFeelDecorated(Boolean.TRUE); 
```

请参阅此链接：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4737788](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4737788)

它还显示了通过子类化 JFrame 并返回适当的最大界限的解决方法。这是此解决方法的演示代码：

```
import java.awt.Frame;
import java.awt.Insets;
import java.awt.Rectangle;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.plaf.metal.MetalLookAndFeel;
import javax.swing.plaf.metal.OceanTheme;

public class TestJFrame {

    private void initUI() {
        final JFrame frame = new JFrame(TestJFrame.class.getSimpleName()) {
            private Rectangle maxBounds;

            @Override
            public Rectangle getMaximizedBounds() {
                return maxBounds;
            }

            @Override
            public synchronized void setMaximizedBounds(Rectangle maxBounds) {
                this.maxBounds = maxBounds;
                super.setMaximizedBounds(maxBounds);
            }

            @Override
            public synchronized void setExtendedState(int state) {
                if (maxBounds == null && (state & Frame.MAXIMIZED_BOTH) == Frame.MAXIMIZED_BOTH) {
                    Insets screenInsets = getToolkit().getScreenInsets(getGraphicsConfiguration());
                    Rectangle screenSize = getGraphicsConfiguration().getBounds();
                    Rectangle maxBounds = new Rectangle(screenInsets.left + screenSize.x, screenInsets.top + screenSize.y, screenSize.x
                            + screenSize.width - screenInsets.right - screenInsets.left, screenSize.y + screenSize.height
                            - screenInsets.bottom - screenInsets.top);
                    super.setMaximizedBounds(maxBounds);
                }

                super.setExtendedState(state);
            }
        };
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.addWindowListener(new WindowAdapter() {
            @Override
            public void windowOpened(WindowEvent e) {
                frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH);
            }
        });
        JLabel label = new JLabel("some label in the middle");
        label.setHorizontalAlignment(JLabel.CENTER);
        frame.add(label);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
            MetalLookAndFeel.setCurrentTheme(new OceanTheme());
            UIManager.setLookAndFeel(new MetalLookAndFeel());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        JFrame.setDefaultLookAndFeelDecorated(Boolean.TRUE);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestJFrame().initUI();
            }
        });
    }

} 
```

或者，不要打电话`JFrame.setDefaultLookAndFeelDecorated(Boolean.TRUE);`

# c# - 动态数据显示分散的日期时间轴

> ID：12937164
> 
> 赞同：4
> 
> 时间：2012-10-17T14:54:15.683
> 
> 标签：c#, wpf, datetime, dynamic-data-display

我正在尝试为股票价格图表绘制烛台标记。我在交易日的每一分钟都有一个标记 - 上午 9:30 到下午 4:00。我不想显示每个交易日下午 4:01 到上午 9:29 的空白区域。有没有办法可以从图表上的 X 轴上删除该时间跨度？我希望所有数据看起来连续而不会中断。我将 NumericAxis 与我创建的 TickToDateTimeLabelProvider 一起用于我的 X 轴。有没有办法改变 LabelProvider 以满足我的需要？还是比这更深？

这是我的 LabelProvider 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;

namespace Microsoft.Research.DynamicDataDisplay.Charts {
public class TickToDateTimeLabelProvider : NumericLabelProviderBase {
    public override UIElement[] CreateLabels(ITicksInfo<double> ticksInfo) {
        var res = new TextBlock[ticksInfo.Ticks.Length];
        for (int i = 0; i < ticksInfo.Ticks.Length; ++i) {
            long l = (long)ticksInfo.Ticks[i];
            if (l < 0)
                l = 0;
            DateTime dt = new DateTime(l);
            res[i] = new TextBlock();
            res[i].Text = dt.ToString();
        }
        return res;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:18:33.050

解决了这个问题，我最终使我的 X 映射到数据在集合中的位置，然后创建一个新的标签提供程序来将位置更改为我想要的 DateTimes。我的新标签提供程序如下所示：

```
using System;
using System.ComponentModel;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using Microsoft.Research.DynamicDataDisplay.Charts.Axes;
using System.Globalization;

namespace Microsoft.Research.DynamicDataDisplay.Charts {

public class TradingLabelProvider : NumericLabelProviderBase {

    private List<DateTime> m_Labels;
    public List<DateTime> Labels {
        get { return m_Labels; }
        set { m_Labels = value; }
    }

    public TradingLabelProvider(DateTime start, List<DateTime> labels) {                                    
        Labels = labels;                                    
    }

    public override UIElement[] CreateLabels(ITicksInfo<double> ticksInfo) {            

        var ticks = ticksInfo.Ticks;
        Init(ticks);            

        UIElement[] res = new UIElement[ticks.Length];
        LabelTickInfo<double> tickInfo = new LabelTickInfo<double> { Info = ticksInfo.Info };
        for (int i = 0; i < res.Length; i++) {
            tickInfo.Tick = ticks[i];
            tickInfo.Index = i;
            string labelText = "";

            if(Convert.ToInt32(tickInfo.Tick) <= Labels.Count && tickInfo.Tick >= 0) {
                labelText = Labels[Convert.ToInt32(tickInfo.Tick)].ToString();
            }

            TextBlock label = (TextBlock)GetResourceFromPool();
            if (label == null) {
                label = new TextBlock();
            }

            label.Text = labelText;
            label.ToolTip = ticks[i].ToString();

            res[i] = label;

            ApplyCustomView(tickInfo, label);
        }
        return res;
    }
}
} 
```

这让我可以将这些日子串在一起，它们之间没有空格来满足我的要求。我努力尝试使用 DateTimeAxis 来做到这一点，但无济于事。

# entity-framework - EF 仅包含现有表的子集

> ID：12937165
> 
> 赞同：4
> 
> 时间：2012-10-17T14:54:16.350
> 
> 标签：entity-framework

我有一个现有的数据库，其中包含许多仅使用存储过程（无 O/RM）访问的表。我想使用实体框架和代码优先方法在这个数据库中创建新表。

我现有数据库中的所有表都需要在我的实体框架类中建模吗？我能否仅手动编写我需要的新类`DbContext`？其他表确实需要暂时保持不变并远离 O/RM。

***注意：**我将使用最新的 EF5。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:44:46.880

至于现在 Power Tools 只允许您对数据库中的所有表和视图进行逆向工程，如果您有一个大数据库，有数百个对象，这可能是一个问题，您不想进行逆向工程。

但是，我找到了一个简单的解决方法：

为逆向工程创建一个新的技术用户。对于该用户，您只授予对要进行逆向工程的表和视图的权限。

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:59:06.743

您没有义务使用 EF 映射任何给定的表。如果您已有数据库，您可能需要考虑使用 Microsoft 提供的 EF Power Tools 对数据库进行逆向工程。我最近使用用于测试目的的 MySQL 数据库进行了此操作，并且效果很好！

如果您是 EF 新手，一个优势是 PowerTools 为您编写了大量代码，这将帮助您掌握 Code First 的语法。您将需要修改输出，但这是一个很好的开始。我真的相信这种方法会给你带来最少的头痛。

可以在此处找到 EF PowerTools：http: [//visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d/](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d/)

# c# - 在多个异步请求期间实际活动的同时（并发）连接数

> ID：12937166
> 
> 赞同：1
> 
> 时间：2012-10-17T14:54:16.200
> 
> 标签：c#, visual-studio-2010, .net-4.0

我的理解是`Task`要抽象出线程，并且每个`Task`.

我在VS2010中调试，我有类似的东西：

```
var request = WebRequest.Create(URL);

Task.Factory.FromAsync<WebResponse>(
    request.BeginGetResponse, 
    request.EndGetResponse).ContinueWith( 
    t => {  /* ... Stuff to do with response ... */ }); 
```

如果我对此进行`X`调用，例如启动`X`异步 Web 请求，我如何计算在执行期间的任何给定时间实际建立了多少同时（并发）连接？我假设它以某种方式只打开它可以打开的最大值（在这种情况下`X`非常高），而另一个`Tasks`在等待时被阻塞？

对此的任何见解或我如何使用调试器检查以确定在执行的给定点存在多少活动（打开）连接都会很棒。

基本上，我想知道它是否为我处理过，或者我是否必须特别考虑，以免我似乎在攻击服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:02:26.567

这实际上并不特定于`Task`. 一旦您拨打电话，就会创建外部连接`Task.Factory.FromAsync`。正在执行的“任务”`Task`只是等待响应返回（而不是首先发送它）。因此，如果您的机器无法发送更多请求，调用`BeginGetResponse`将失败，并且如果服务器因为认为您正在淹没它们而拒绝您的请求，则响应将包含错误消息。

唯一真正`Task`发挥作用的地方是机器实际收到响应和继续运行之间的时间量。如果您收到大量响应，或者在线程池中有大量工作，则可能需要一些时间才能继续。

# c# - 状态条中的面板？

> ID：12937167
> 
> 赞同：0
> 
> 时间：2012-10-17T14:54:20.870
> 
> 标签：c#, winforms, panel, statusstrip

是否有可能在一个面板`StatusStrip`？[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.statusstrip.aspx)是这样说的：

> 默认的 StatusStrip 没有面板。要将面板添加到 StatusStrip，请使用[ToolStripItemCollection.AddRange](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitemcollection.addrange.aspx)方法 [...]

...但我找不到如何。

我试图将 a`Panel`或 a添加`ToolStripPanel`到 a `StatusStrip`，但它只接受`ToolStripItem`s。另一方面，我尝试将 a 添加`ToolStripItem`到 a`Panel`或 a `ToolStripPanel`，但两者都只接受`Control`s：

```
ToolStripPanel toolStripPanel = new ToolStripPanel();
toolStripPanel.Controls.Add(toolStripStatusLabel);   // Wrong
statusStrip.Items.AddRange(toolStripPanel);          // Wrong again 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:21:52.740

有趣的是，在微软的术语中

> ToolStripStatusLabel - 表示 StatusStrip 控件中的面板。

所以他们的面板真的是一个标签。除非这是他们文档中的错误，否则您尝试做的事情是不可能的，因为没有可以在 StatusStrip 中托管的 Panel 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-05T00:27:08.350

您可以使用 ToolStripStatusLabel。为了获得面板的外观和感觉，只需设置 ToolStripStatusLabel 的以下属性： **BorderSides** = All, **BorderStyle** = SunkenOuter

# python - python中字符串前的'u'是什么意思？

> ID：12937172
> 
> 赞同：4
> 
> 时间：2012-10-17T14:54:48.013
> 
> 标签：python, json, unicode

> **可能重复：**
> [字符串值前面的“u”符号是什么意思？](https://stackoverflow.com/questions/11279331/what-does-the-u-symbol-mean-in-front-of-string-values)

我有这个 json 文本文件：

```
{
   "EASW_KEY":" aaaaaaaaaaaaaaaaaaaaaaa",
   "EASF_SESS":" aaaaaaaaaaaaaaaaaaaaaaa",
   "PHISHKEY":" aaaaaaaaaaaaaaaaaaaaaaa",
   "XSID":" aaaaaaaaaaaaaaaaaaaaaaa"
} 
```

如果我这样解码：

```
import json
data = open('data.txt').read()
data = json.loads(data)
print data['EASW_KEY'] 
```

我明白了：

```
u' aaaaaaaaaaaaaaaaaaaaaaa' 
```

而不是简单地：

`aaaaaaaaaaaaaaaaaaaaaaa`

这是什么`u`意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:57:01.783

**python中字符串前的'u'是什么意思？**

python字符串前缀的字符称为python字符串编码声明。你可以在这里阅读所有关于它们的信息：[https ://docs.python.org/3.3/reference/lexical_analysis.html#encoding-declarations](https://docs.python.org/3.3/reference/lexical_analysis.html#encoding-declarations)

u 代表 unicode。该插槽中的替代字母可以`r'foobar'`用于原始字符串，b'foobar' 用于字节字符串。

关于 Python 认为 unicode 的一些帮助：http: [//docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)

然后要探索它的本质，请运行以下命令：

```
type(u'abc') 
```

返回：

```
<type 'unicode'> 
```

如果你在应该使用 ascii 时使用 Unicode，或者在应该使用 unicode 时使用 ascii，那么当用户在运行时开始“探索 unicode 空间”时，你很可能会遇到冒泡实现。

例如，如果您将 unicode 字符串传递给 facebook 的`api.fql(...)`函数，表示它接受 unicode，它会愉快地处理您的请求，然后返回未定义的结果，就好像函数成功了一样，因为它吐得满地都是。

正如这篇文章中所定义的：

[来自 python 的 FQL 多查询因 unicode 查询而失败](https://stackoverflow.com/questions/12464426/fql-multiquery-from-python-fails-with-unicode-query/12465188#12465188)

一些 unicode 字符会导致您在生产中的代码发生癫痫发作然后吐在地板上。因此，请确保您没事，并且客户可以忍受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:56:23.653

unicode 对象中的`u`前缀`repr`表示它是 unicode 对象。

如果您真的只是unicode 对象本身，而不是包含它的列表，那么您*不应该看到这一点。*`print`（事实上​​，运行你的代码并不会像这样打印它。）

# python - Sublime Text 2 插件不会出现在 Command Platte 中

> ID：12937175
> 
> 赞同：5
> 
> 时间：2012-10-17T14:54:58.413
> 
> 标签：python, plugins, sublimetext2

**我开始为Sublime Text 2**编写插件。

我在“Packages/RailsQuick”中创建了一个新文件夹

并创建了 2 个文件：

**RailsQuick.py**

```
import sublime, sublime_plugin

class GeneratorsCommand(sublime_plugin.WindowCommand):
  def run(self):
    self.window.show_quick_panel(["test"], None) 
```

**RailsQuick.sublime-commands**

```
[
  {
    "caption": "RailsQuick: Generators",
    "command": "rails_quick_generators"
  }
] 
```

`RailsQuick: Generators`问题是我在 Command Platte (CTRL + SHIFT + P) 中找不到

![Sublime Text 2 命令盘](../Images/237d743d18b0b1f534fd7af59b2851c5.png)

保存两个文件后的控制台日志：

```
Writing file /home/danpe/.config/sublime-text-2/Packages/RailsQuick/RailsQuick.py with encoding UTF-8
Reloading plugin /home/danpe/.config/sublime-text-2/Packages/RailsQuick/RailsQuick.py
Writing file /home/danpe/.config/sublime-text-2/Packages/RailsQuick/RailsQuick.sublime-commands with encoding UTF-8 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:08:10.900

我的幸运猜测：

你的班级名称是错误的。应与( )`GeneratorsCommand`中定义的匹配。Sublime Text 2 需要这些名称之间有 1:1 的映射关系，否则无法知道哪个插件属于哪个快捷方式。`RailsQuick.sublime-commands``rails_quick_generators`

例子：

[https://github.com/witsch/SublimePythonTidy](https://github.com/witsch/SublimePythonTidy)

# c# - 如何在 .NET 中将外部类型/方法标记为已弃用/过时？

> ID：12937179
> 
> 赞同：3
> 
> 时间：2012-10-17T14:55:07.253
> 
> 标签：c#, asp.net

我们正在尝试`ConfigurationManager`在构建时标记外部类型（如 ）的使用。

自定义代码分析字典可以提供帮助 [1]，但仅适用于项目中包含源代码的情况。同样，该`Obsolete`属性适用于项目中包含的类型。

我什至不确定代码分析规则是否能够检查方法体？[2]。

关于我们如何在构建时标记外部类型/方法的使用的任何建议？

[1] - [http://msdn.microsoft.com/en-us/library/bb514188.aspx](http://msdn.microsoft.com/en-us/library/bb514188.aspx)

[2] - [http://msdn.microsoft.com/en-us/library/dd172127(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd172127(v=vs.90).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:00:03.207

一种方法是创建自定义 FxCop 规则，在代码分析阶段检查字段，如下所示：

```
internal sealed class SampleRule : BaseIntrospectionRule
{

    public override ProblemCollection Check(Member member)
    {
        const string typeName = "System.DateTime";
        var field = member as Field;
        if (field == null || field.Type.FullName != typeName)
            return null;
        return new ProblemCollection 
        { 
            new Problem(new Resolution(field.Name.Name, "Type {0} is obsolete", typeName)) 
        };
    }
} 
```

我建议看看[这个教程](http://blogs.msdn.com/b/codeanalysis/archive/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio-2010.aspx)。

# linux - 找出处理器之间负载平衡的工具？

> ID：12937181
> 
> 赞同：0
> 
> 时间：2012-10-17T14:55:16.850
> 
> 标签：linux, profiling

是否有工具可以为我提供有关一组处理器的负载平衡的信息？CPU0 23%，CPU1 77%。我需要一个工具来告诉我我的处理器为某个多线程应用程序所做的工作有多平衡（事后分析）。这适用于 Linux，在 Intel CPU 上，最好是基于控制台的。我发现 Vtune 之类的都是过时的软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:33:49.123

这两个并行分析器：

*   [TAU](http://www.cs.uoregon.edu/Research/tau/home.php)
*   [斯卡拉斯卡](http://www.scalasca.org/)

允许对其输出进行基于控制台的分析并支持多线程。

我不确定是否适合您的情况的唯一一点是，他们的大多数功能都需要重新编译应用程序并链接到他们的库。否则，您将只能进行非常有限类型的分析，并且只有在应用程序是动态链接的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:23:07.177

nmon 能满足您的需求吗？

CPU 监控样本输出

CPU 使用率------------------------------------------------ --------------------------------------------------| |---------------------------------------+--------------------- ----------------------------+ | |CPU 用户% 系统% 等待% 空闲|0 |25 |50 |75 100| | | 1 0.5 5.0 0.0 94.5|ss > | | | 2 0.5 0.5 0.0 99.0| > | | | 3 0.0 0.0 0.0 100.0| > | | | 4 0.0 0.0 0.0 100.0| > | | | 5 0.0 0.0 0.0 100。0| > | | | 6 0.0 0.0 0.0 100.0| > | | | 7 0.0 0.0 0.0 100.0| > | | | 8 0.0 0.0 0.0 100.0| > | | |---------------------------------------+--------------------- ----------------------------+ | |平均 0.1 0.6 0.0 99.3| > | | |---------------------------------------+--------------------- --------------------------------------------+ | | | 6 0.0 0.0 0.0 100.0| > | | | 7 0.0 0.0 0.0 100.0| > | | | 8 0.0 0.0 0.0 100.0| > | | |---------------------------------------+--------------------- ----------------------------+ | |平均 0.1 0.6 0.0 99.3| > | | |---------------------------------------+--------------------- --------------------------------------------+ | | | 6 0.0 0.0 0.0 100.0| > | | | 7 0.0 0.0 0.0 100.0| > | | | 8 0.0 0.0 0.0 100.0| > | | |---------------------------------------+--------------------- ----------------------------+ | |平均 0.1 0.6 0.0 99.3| > | | |---------------------------------------+--------------------- --------------------------------------------+ | | | 7 0.0 0.0 0.0 100.0| > | | | 8 0.0 0.0 0.0 100.0| > | | |---------------------------------------+--------------------- ----------------------------+ | |平均 0.1 0.6 0.0 99.3| > | | |---------------------------------------+--------------------- --------------------------------------------+ | | | 7 0.0 0.0 0.0 100.0| > | | | 8 0.0 0.0 0.0 100.0| > | | |---------------------------------------+--------------------- ----------------------------+ | |平均 0.1 0.6 0.0 99.3| > | | |---------------------------------------+--------------------- --------------------------------------------+ | | |---------------------------------------+--------------------- ----------------------------+ | |平均 0.1 0.6 0.0 99.3| > | | |---------------------------------------+--------------------- --------------------------------------------+ | | |---------------------------------------+--------------------- ----------------------------+ | |平均 0.1 0.6 0.0 99.3| > | | |---------------------------------------+--------------------- --------------------------------------------+

# java - Map的Key的大小有影响吗？

> ID：12937182
> 
> 赞同：0
> 
> 时间：2012-10-17T14:55:19.990
> 
> 标签：java, map, hashmap

Map 的 Key 的大小在任何类型的 Map 实现（例如 HashMap）中是否有任何影响（例如在性能方面）？

下面的迭代会受到 Key 对象的 Size 的影响吗？

```
Map<Object, Object> map = new HashMap<Object, Object>();
//...
for(Map.Entry<Object, Object> entry : map.entrySet())
{
    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:56:44.960

不，关键对象的大小与迭代地图的性能无关。

请注意，非原始类型的变量在 Java 中始终是引用（它们不是对象本身，如在 C++ 中）。引用指向小对象还是大对象都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:57:05.040

无论如何，您只能将引用用作键，因此没关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:57:31.300

鉴于对象只能包含原语和对对象的引用，我不太明白您所说的对象的“大小”是什么意思。

我怀疑对于 HashMap，该`hashCode()`函数会在一定程度上影响性能。这是否取决于密钥的*大小*取决于`hashCode()`. 类似的附带条件适用于该`equals()`方法。

# iphone - webthread锁崩溃问题

> ID：12937187
> 
> 赞同：0
> 
> 时间：2012-10-17T14:55:39.300
> 
> 标签：iphone, objective-c, ios, ipad

我似乎无法理解导致我崩溃的原因，它指出我在代码中的任何地方都没有行号。

![在此处输入图像描述](../Images/f3e44f141fe25461b10619b3aa1952a6.png)

有任何想法吗？我无法不断重现崩溃，导致更难调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:05:57.660

你确定那是崩溃的线程吗？该线程看起来相当温和——它看起来像是 Quartz 库拥有的一个工作线程，它只是在等待一个锁，这是一个不太可能崩溃的常见操作，除非你有随机内存损坏。

看看你**所有**线程的堆栈跟踪，可能会有更多的东西在你身上跳出来。或者，为了确保该线程正在崩溃，请查看反汇编并查看导致崩溃的指令，并检查调试器中的相关寄存器和内存操作数。

如果该线程实际上正在崩溃，则几乎可以肯定您的程序中某处存在内存损坏，这很难调试。到处搜索内存调试工具，有很多选择，但没有灵丹妙药。

# c++ - 模板专业化，使用其他模板

> ID：12937188
> 
> 赞同：0
> 
> 时间：2012-10-17T14:55:39.180
> 
> 标签：c++, templates, specialization

好吧，我有一个问题，我不知道如何正确表达，但我已经包含了下面的代码。我已经从代码中删减了很多，以便更容易理解问题，但现在它可能无法 100% 工作，这只是为了说明。

问题是模板专业化不起作用。

例如：

```
#include <iostream>
#include <swift.hpp>
#include <swift/event.hpp>
#include <swift/event/primitives.tpl>

using namespace swift;

template<class T> void print(const T& value)
{
    std::cout << event::representate(value) << std::endl;
}

int main()
{
    Int32 x = 23;
    print(x);
} 
```

这里的问题是，“~”将被打印出来。所以在这个例子中 event::representate() 指向定义在“swift/event.hpp”中的函数，而不是定义在“swift/event/primitives.hpp”中的特殊函数。

好的，这不是真正的问题，因为它可以通过将“swift/event.hpp”中的表示函数更改为专用表示的函数体来轻松解决。

但由于以下原因，我无法做到这一点：

1.  它不适用于自定义类，如果没有为自定义类定义 std::stream 运算符 << （对于自由函数，它可能是可能的）。
2.  不仅 event::representate 函数需要专门化。还有 event::serialize 和 event::deserialize。

很好看第2点；OStream 类在模板化成员函数中使用 event::serialize 和 event::deserialize。但是 event::serialize 和 event:: deserialize 的特化**必须能够**使用 OStream（模板）方法。

好吧，我被困在了这一点上。我希望有人能指出我正确的方向！

## 资源

**快速.hpp：**

```
#ifndef HG_swift
#define HG_swift

// C++ Includes
#include <boost/cstdint.hpp>
#include <string>

namespace swift
{
    // Cross-platform primairy types:
    typedef void Void;
    typedef bool Bool;
    typedef Bool Bit;
    typedef char Char;
    typedef unsigned char UChar;
    typedef uint8_t Byte;
    typedef int16_t Int16;
    typedef uint16_t UInt16;
    typedef int32_t Int32;
    typedef uint32_t UInt32;
    typedef Int16 Short;
    typedef UInt16 UShort;
    typedef Int32 Int;
    typedef UInt32 UInt; 
    typedef double Double;
    typedef float Float;
    typedef std::string String;     
} 

#endif //HG_swift 
```

**迅速/事件.hpp**

```
#ifndef swift_event
#define swift_event

#include <iostream>
#include <sstream>
#include <exception>

#include <swift/String.hpp>

namespace swift
{   
    class OStream;
    class IStream;

    namespace event
    {       
        template<class T> String representate(T& value)
        {
            return "~";
        }

        template<class T> void serialize(T& value, OStream& stream) { }
        template<class T> void deserialize(T& value, IStream& stream) { }
    }
}

#endif //swift_event 
```

**快速/OStream.hpp：**

```
#ifndef HG_swift_OStream
#define HG_swift_OStream

// Imports:
#include "swift.hpp"

// C++ includes:
#include <iostream>
#include <boost/archive/binary_oarchive.hpp>

namespace swift 
{
    struct OStream
    {
        boost::archive::binary_oarchive archive;

        OStream(std::ostream& os) : archive(os, boost::archive::no_header) {}

        template<class T> void write(T value)
        {
            event::serialize(value, *this);
        }
    };
}

#endif //HG_swift_io_OStream 
```

**快速/事件/primitives.tpl：**

```
#include <swift.hpp>
#include <swift/event.hpp>
//#include <swift/IStream.hpp>
#include <swift/OStream.hpp>
#include <iostream>
#include <sstream>

namespace swift
{
    // Events
    namespace event
    {
        // Events for primary types:
        // Int32
        template<> String representate<Int32>(Int32& value)
        {
            std::stringstream str;
            str << value;
            return str.str();
        }

        template<> void serialize<Int32>(Int32& value, OStream& stream)
        {
            stream.archive & value;
        }

        template<> void deserialize<Int32>(Int32& value, IStream& stream)
        {
           stream.archive & value;
        }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:13:12.147

问题是 a`const Int32&`不能转换为 a `Int32&`。所以专业是无法匹配的。改为`swift/event/primitives.tpl`使用它会起作用：

```
 template<> String representate<const Int32>(const Int32& value)
    { 
```

或者您可以将主模板更改为采用 a`const T&`而不是`T&`.

对于函数，重载实际上比specialize 更好（参见[Template Specialization VS Function Overloading](https://stackoverflow.com/questions/7108033/template-specialization-vs-function-overloading)）：

```
 String representate(Int32 value)
    { 
```

# asp.net - 将选定的参数值从 ssrs 报告传递到 asp.net

> ID：12937190
> 
> 赞同：0
> 
> 时间：2012-10-17T14:55:40.923
> 
> 标签：asp.net, ssrs-2008

我需要获取参数的选定值并在我的代码中使用它。是否有任何事件可以捕获参数值。请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:38:33.610

看起来答案是肯定的。

ReportViewer Web 控件上有一个名为[SubmittingParameterValues](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer.submittingparametervalues%28v=vs.100%29.aspx)的事件，您可以在主机页面中处理该事件。这有一个[ReportParametersEventArgs](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportparameterseventargs%28v=vs.100%29.aspx)参数，而该参数又具有一个[Parameters](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportparameterseventargs.parameters%28v=vs.100%29.aspx)属性。

该`Parameters`属性是`ReportParameter`对象的集合。该类`ReportParameter`具有`Name`和`Values`属性。

您可以使用该`Name`属性找到您感兴趣的参数。该`Values`属性是字符串的集合，应该包含提交的值。

# concurrency - 二进制信号量如何进行？

> ID：12937191
> 
> 赞同：1
> 
> 时间：2012-10-17T14:55:54.383
> 
> 标签：concurrency, operating-system, semaphore, critical-section

当出现以下问题时，我正在研究二进制信号量：

假设有 3 个并发进程和 3 个二进制信号量……信号量被初始化为 S0=1、S1=0、S2=0。这些进程具有以下代码：

```
Process P0:                   Process P1:                       Process P2:

while (true){                 wait(S1);                         wait(S2);
wait (S0);                    release (S0);                     release(S0);
print '0';
release (S1);
release (S2);
} 
```

现在的问题是该过程将打印多少次 0 ？

让我解释一下我是如何解决它的。假设三个进程的前三个语句同时执行！即，进程p0的while语句，进程p1的wait(S1)和进程P2的wait(S2)。现在，wait(S1)和wait(S2)都将使信号量值-1和进程P1并且 P2 将被阻塞.. 然后进程 P0 的 wait(S0) 将被执行。当这种情况发生时，S0 的值变为 0 并且进程 P0 进入阻塞状态，结果所有进程都将被阻塞并处于死锁状态！但不幸的是，这不是答案。. 请告诉我我错在哪里以及解决方案如何进行？:|

**编辑**：

我对二进制信号量的方法是错误的。它们只能取 0 和 1！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:40:44.110

好的..所以我在这里回答我自己的问题：P ..

解决方案如下：

1.  只有进程 P0 可以先执行。这是因为进程 P0 使用的信号量，即 S0 的初始值为 1。现在当 P0 调用等待 S0 时，S0 的值变为 0，这意味着 S0 已被 P0 占用。就 Process P1 和 P2 而言，当它们分别在 S1 和 S2 上调用 wait 时，它们无法继续进行，因为信号量已经被初始化为取 0，所以它们必须等到 S1 和 S2 被释放！

2.  P0 首先执行并打印 0。现在下一条语句释放 S1 和 S2！当 S1 被释放时，进程 P1 的等待结束，因为 S1 的值增加了 1 并被标记为未占用。P1 取 S1 并使 S1 为取。过程 P2 也是如此。

3.  现在，`only one of P1 or P2 can execute, because either of them can be in the critical section at a given time`.. 假设 P2 执行。它释放 S0 并终止。

4.  让 P1 执行下一步.. P1 启动 释放 S0 并终止。

5.  `Now only P0 can execute because its in a while loop whose condition is set to true, which makes it to run always.`P0 执行第二次打印 0 并释放 S1 和 S2。但是 P1 和 P2 已经终止，所以 P0 永远等待 S0 的释放。

这是第二个解决方案，它打印 0 三次：

1.  P0 启动，打印 0 并释放 S1 和 S2。

2.  让 P2 执行。P2 启动，释放 S0 并终止。此后只有 P0 或 P1 可以执行。

3.  让 P0 执行。第二次打印 0 并释放 S1 和 S2。此时只有 P1 可以执行。

4.  P1 启动，释放 S0，P1 终止。此时只有 P0 可以执行，因为它在条件设置为 true 的 while 循环中！

5.  P0 启动，第三次打印 0 并释放 S1 和 S2。然后它等待某人释放 S0，而这永远不会发生。

所以答案就变成了正好两倍或正好三次，也可以说是“ `atleast twice`”！

请告诉我我是否在任何地方错了！！

# entity-framework - 在对数据库进行逆向工程时改进导航属性名称

> ID：12937193
> 
> 赞同：58
> 
> 时间：2012-10-17T14:56:02.923
> 
> 标签：entity-framework, ef-code-first, t4, entity-framework-5, ef-power-tools

我正在使用 Entity Framework 5 和 Visual Studio 以及 Entity Framework Power Tools Beta 2 对中等大小的数据库（约 100 个表）进行逆向工程。

不幸的是，**导航属性没有有意义的名称**。例如，如果有两个表：

```
CREATE TABLE Contacts (
    ContactID INT IDENTITY (1, 1) NOT NULL,
    ...
    CONSTRAINT PK_Contacts PRIMARY KEY CLUSTERED (ContactID ASC)
}

CREATE TABLE Projects (
    ProjectID INT IDENTITY (1, 1) NOT NULL,
    TechnicalContactID INT NOT NULL,
    SalesContactID INT NOT NULL,
    ...
    CONSTRAINT PK_Projects PRIMARY KEY CLUSTERED (ProjectID ASC),
    CONSTRAINT FK_Projects_TechnicalContact FOREIGN KEY (TechnicalContactID)
        REFERENCES Contacts (ContactID),
    CONSTRAINT FK_Projects_SalesContact FOREIGN KEY (SalesContactID)
        REFERENCES Contacts (ContactID),
    ...
} 
```

这将生成如下类：

```
public class Contact
{
     public Contact()
     {
          this.Projects = new List<Project>();
          this.Projects1 = new List<Project>();
     }
     public int ContactID { get; set; }
     // ...
     public virtual ICollection<Project> Projects { get; set; }
     public virtual ICollection<Project> Projects1 { get; set; }
}

public class Project
{
     public Project()
     {

     }
     public int ProjectID { get; set; }
     public int TechnicalContactID { get; set; }
     public int SalesContactID { get; set; }
     // ...
     public virtual Contact Contact { get; set; }
     public virtual Contact Contact1 { get; set; }
} 
```

我看到几个变体都比这更好：

*   使用**外键的名称**：例如，最后一个下划线 ( `FK_Projects_TechnicalContact`--> `TechnicalContact`) 之后的所有内容。尽管这可能是控制能力最强的解决方案，但与现有模板集成可能会更加困难。
*   使用外键列对应的**属性名**`ID`：去掉后缀（`TechnicalContactID`--> `TechnicalContact`）
*   使用**属性名称和现有解决方案的连接**：示例`TechnicalContactIDProjects`（集合）和`TechnicalContactIDContact`

幸运的是，[可以通过将模板包含在项目中来修改模板](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)。

必须对`Entity.tt`和进行修改`Mapping.tt`。由于缺乏智能感知和调试的可能性来进行这些更改，我发现这很困难。

* * *

*连接属性名称*（上面列表中的第三个）可能是最容易实现的解决方案。

**如何更改导航属性的创建`Entity.tt`并`Mapping.tt`实现以下结果**：

```
public class Contact
{
     public Contact()
     {
          this.TechnicalContactIDProjects = new List<Project>();
          this.SalesContactIDProjects = new List<Project>();
     }
     public int ContactID { get; set; }
     // ...
     public virtual ICollection<Project> TechnicalContactIDProjects { get; set; }
     public virtual ICollection<Project> SalesContactIDProjects { get; set; }
}

public class Project
{
     public Project()
     {

     }
     public int ProjectID { get; set; }
     public int TechnicalContactID { get; set; }
     public int SalesContactID { get; set; }
     // ...
     public virtual Contact TechnicalContactIDContact { get; set; }
     public virtual Contact SalesContactIDContact { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-25T08:16:20.377

您需要在 .tt 文件中更改一些内容。我选择使用您建议的第三种解决方案，但这需要格式化为 FK_CollectionName_RelationName。我用'_'将它们分开并使用数组中的最后一个字符串。我将 RelationName 与 ToEndMember 属性一起使用来创建属性名称。FK_Projects_TechnicalContact 将导致

```
//Plularized because of EF. 
public virtual Contacts TechnicalContactContacts { get; set; } 
```

你的项目将是这样的。

```
public virtual ICollection<Projects> SalesContactProjects { get;  set; }
public virtual ICollection<Projects> TechnicalContactProjects { get;  set; } 
```

现在你可能会问的代码。`CodeStringGenerator`我在 T4 文件中的类中添加了 2 个函数。一种构建接收 NavigationProperty 的 propertyName。另一个生成用于接收 NavigationProperty 和属性名称的属性的代码。

```
//CodeStringGenerator class
public string GetPropertyNameForNavigationProperty(NavigationProperty navigationProperty)
{
    var ForeignKeyName = navigationProperty.RelationshipType.Name.Split('_');
    var propertyName = ForeignKeyName[ForeignKeyName.Length-1] + navigationProperty.ToEndMember.Name;
    return propertyName;
}

public string NavigationProperty(NavigationProperty navigationProperty, string name)
{
    var endType = _typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType());
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1} {2} {{ {3}get; {4}set; }}",
        AccessibilityAndVirtual(Accessibility.ForProperty(navigationProperty)),
        navigationProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("ICollection<" + endType + ">") : endType,
        name,
        _code.SpaceAfter(Accessibility.ForGetter(navigationProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(navigationProperty)));
} 
```

如果将上面的代码放在类中，您仍然需要更改 2 个部分。您需要找到构建实体的构造函数部分和导航属性部分的位置。在构造函数部分（大约第 60 行），您需要通过调用方法`GetPropertyNameForNavigationProperty`并将其传递给转义方法来替换现有代码。

```
 var propName = codeStringGenerator.GetPropertyNameForNavigationProperty(navigationProperty);
#>
      this.<#=code.Escape(propName)#> = new HashSet<<#=typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType())#>>();
<# 
```

在 NavigationProperties 部分（大约第 100 行），您还需要将代码替换为以下内容。

```
 var propName = codeStringGenerator.GetPropertyNameForNavigationProperty(navigationProperty);
#>
    <#=codeStringGenerator.NavigationProperty(navigationProperty, propName)#>
<# 
```

我希望这会有所帮助，并且您可以随时调试该`GetPropertyNameForNavigationProperty`功能并在属性的命名方面发挥一些作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-22T16:02:05.197

基于 BikeMrown 的回答，我们可以使用`RelationshipName`在 MSSQL 中设置的属性将 Intellisense 添加到属性中：

[![MSSQL 关系](../Images/395c00b3ec1cb67acbaff6a4376bb94e.png)](https://i.stack.imgur.com/Nt0ct.png)

在您的 VS 项目中编辑 model.tt 并更改：

```
[System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Usage", "CA2227:CollectionPropertiesShouldBeReadOnly")]
<#
            }
#>
    <#=codeStringGenerator.NavigationProperty(navigationProperty)#>
<#
        }
    } 
```

对此：

```
[System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Usage", "CA2227:CollectionPropertiesShouldBeReadOnly")]
<#
            }
#>
    /// <summary>
    /// RelationshipName: <#=code.Escape(navigationProperty.RelationshipType.Name)#>
    /// </summary>
    <#=codeStringGenerator.NavigationProperty(navigationProperty)#>
<#
        }
    } 
```

现在，当您开始输入属性名称时，您会看到如下工具提示： [![智能感知工具提示](../Images/e490a182c8f0720437f67e4ca548016e.png)](https://i.stack.imgur.com/NgofF.png)

可能值得注意的是，如果您更改数据库模型，属性可能会发现自己指向不同的数据库字段，因为 EF 会根据它们各自的数据库字段名称的字母优先级生成导航属性名称！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-21T15:58:49.843

发现这个问题/答案非常有帮助。但是，我并不想像 Rikko 的回答那样做那么多。我只需要找到 NavigationProperty 中涉及的列名，并且没有看到如何在任何示例中获取它（至少没有 edmx 可以从中提取）。

```
<#
  var association = (AssociationType)navProperty.RelationshipType;
#>  //  <#= association.ReferentialConstraints.Single().ToProperties.Single().Name #> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T15:45:32.137

选择的答案很棒，肯定让我朝着正确的方向前进。但我最大的问题是它占用了我所有已经工作的导航属性并将基本类型名称附加到它们，所以你最终会得到如下内容。

```
public virtual Need UnitNeed { get; set;}
public virtual ShiftEntered UnitShiftEntered {get; set;}` 
```

因此，我深入研究了对 .tt 文件的建议添加内容，并对它们进行了一些修改，以删除重复的类型命名并进行一些清理。我想肯定还有其他人想要同样的东西，所以我想我会在这里发布我的解决方案。

这是要在`public class CodeStringGenerator`

```
public string GetPropertyNameForNavigationProperty(NavigationProperty navigationProperty, string entityname = "")
{
    var ForeignKeyName = navigationProperty.RelationshipType.Name.Split('_');
    var propertyName = "";

    if (ForeignKeyName[ForeignKeyName.Length-1] != entityname){
        var prepender = (ForeignKeyName[ForeignKeyName.Length-1].EndsWith(entityname)) ? ReplaceLastOccurrence(ForeignKeyName[ForeignKeyName.Length-1], entityname, "") :  ForeignKeyName[ForeignKeyName.Length-1];
        propertyName = prepender + navigationProperty.ToEndMember.Name;
    }
    else {
        propertyName = navigationProperty.ToEndMember.Name;
    }

    return propertyName;
}

public string NavigationProperty(NavigationProperty navigationProperty, string name)
{
    var endType = _typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType());

    var truname = name;

    if(navigationProperty.ToEndMember.RelationshipMultiplicity != RelationshipMultiplicity.Many){
        if(name.Split(endType.ToArray<char>()).Length > 1){
            truname = ReplaceLastOccurrence(name, endType, "");
        }
    }

    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1} {2} {{ {3}get; {4}set; }}",
        AccessibilityAndVirtual(Accessibility.ForProperty(navigationProperty)),
        navigationProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("ICollection<" + endType + ">") : endType,
        truname,
        _code.SpaceAfter(Accessibility.ForGetter(navigationProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(navigationProperty)));
}

public static string ReplaceLastOccurrence(string Source, string Find, string Replace)
{
        int place = Source.LastIndexOf(Find);

        if(place == -1)
           return Source;

        string result = Source.Remove(place, Find.Length).Insert(place, Replace);
        return result;
} 
```

这是在模型生成中更新的代码，

更新这两个事件：

```
var propName = codeStringGenerator.GetPropertyNameForNavigationProperty(navigationProperty) 
```

对此

```
var propName = codeStringGenerator.GetPropertyNameForNavigationProperty(navigationProperty, entity.Name); 
```

# c# - 为所有用户存储设置的正确位置

> ID：12937195
> 
> 赞同：0
> 
> 时间：2012-10-17T14:56:09.063
> 
> 标签：c#, configurationmanager

我正在开发的软件需要为用户存储一些全局设置。目前，我使用这种方法将所有内容存储在用户下的 appdata 中：

```
public virtual void Load()
{
    try
    {
        lock (ConfigLock)
        {
            if (Config != null)
                Config.Save(ConfigurationSaveMode.Full);

            Config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoaming);
        }
    }
    catch (Exception ex)
    {
        RicoLog.Instance.Error("UserConfig", ex.Message);
    }
}

public virtual void AddSection(string name, ConfigurationSection section)
{
    if (Config == null)
        Load();

    try
    {
        lock (ConfigLock)
        {
            section.SectionInformation.AllowExeDefinition = ConfigurationAllowExeDefinition.MachineToLocalUser;
            Config.Sections.Add(name, section);
            Save(section);
        }
    }
    catch (Exception ex)
    {
        RicoLog.Instance.Error("UserConfig", ex.Message);
    }
} 
```

其余的只是从配置中读取数据的功能。

以前，应用程序存储在自定义文件夹下，但现在需求发生了变化，我们需要将其放在 Program Files 下。当我们使用自定义文件夹时，存储全局设置就像进行这两项更改一样简单，因为应用程序对该文件夹具有写入权限：

```
Config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

和

```
section.SectionInformation.AllowExeDefinition = ConfigurationAllowExeDefinition.MachineOnly; 
```

但是，在 Program Files 中，您需要成为管理员才能在此处写入。那么，如何存储全局应用程序数据呢？或者更确切地说，这方面的最佳做法是什么？

另外，我知道程序数据，如果那是正确的位置，我如何使用 ConfigurationManager 将配置存储在那里？我宁愿不重写整个配置逻辑。

# java - 如何通过 Jackson 的注释定义通用列表反序列化器？

> ID：12937197
> 
> 赞同：13
> 
> 时间：2012-10-17T14:56:09.817
> 
> 标签：java, spring, jackson

假设我有一个具有列表属性的对象：

```
public class Citizen {
    name
    List<Tickets> tickets
    List<Fines> fines
} 
```

我想通过注释为列表定义一个通用的自定义反序列化器：

```
public class Citizen {
    ...
    @JsonDeserializer(MyListDeserializer<Tickets>) // <-- generic deserializer
    public void setTickets(List<Tickets> tickets) {
        this.tickets = tickets;
    }

    @JsonDeserializer(MyListDeserializer<Fines>) // <-- how can I do that? 
    public void setFines(List<Fines> fines) {
        this.fines = fines;
    }
} 
```

我正在寻找一种创建“通用”反序列化器的方法 - 一种能够反序列化两种类型的列表的方法，类似于[ContextualDeserializer 用于将 JSON 映射到不同类型的 Jackson 映射](https://stackoverflow.com/questions/6704992/contextualdeserializer-for-mapping-json-to-different-types-of-maps-with-jackson/6714275)。

最终目的是实现自定义反序列化逻辑`MyListDeserializer`以将空字符串反序列`""`化为空列表，但我想了解一种通用方法，而不仅仅是空字符串。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T15:18:28.513

您可以使用注释的`contentUsing`属性指定反序列化器类，用于反序列化列表的元素。`@JsonDeserializer`

```
public class Citizen {
    ...
    @JsonDeserializer(contentUsing=MyListDeserializer.class) 
    public void setTickets(List<Tickets> tickets) {
        this.tickets = tickets;
    }
} 
```

使您的反序列化器扩展`JsonDeserializer<BaseClass>`并在 BaseClass 中具有一个属性，该属性存储具体类的实际类型。

```
abstract class BaseTickets {
    String ticketType;
    public String getTicketType()
}

public class MyListDeserializer extends JsonDeserializer<BaseTickets> {

    @Override
    public BaseTickets deserialize(JsonParser jsonParser, DeserializationContext arg1) throws IOException, JsonProcessingException {
        ObjectCodec oc = jsonParser.getCodec();
        JsonNode node = oc.readTree(jsonParser);
        Iterator<JsonNode> elements = node.getElements();
        for (; elements.hasNext();) {
            String type = (String) elements.next().get("ticketType");

            if (type.equals()){
               //create concrete type here
            }
        }
     } 
```

或者，如果您想要一个没有公共基类的所有 List 类型的单一反序列化器，那么使用`using`属性，有`MyListDeserializer`extend `JsonDeserialize<Object>`。为了确定列表元素的类型，您必须编写一个自定义序列化程序，将类型信息添加到列表中，然后可以在通用反序列化程序中使用。

```
public class Citizen {
    ...
    @JsonDeserializer(using=MyListDeserializer.class)
    @JsonSerializer(using=MyListSerializer.class) 
    public void setTickets(List<Tickets> tickets) {
        this.tickets = tickets;
    }
}

public class MyListSerializer extends JsonSerializer<Object> {

    @Override
    public void serialize(Object list, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {
        @SuppressWarnings("rawtypes")
        jgen.writeStartObject();
        String type = getListType(list);
        jgen.writeStringField("listType", type);
        jgen.writeObjectField("list", list)
    }
} 
```

# class - 类方法中的未绑定值

> ID：12937198
> 
> 赞同：1
> 
> 时间：2012-10-17T14:56:15.377
> 
> 标签：class, ocaml

我有这个问题，我不明白它来自哪里。代码：

```
class applicationFrameworksManager =
object(this)
val mutable frameworks = []
method add_framework name = ()(* if not (List.mem name frameworks) then frameworks <- List.append frameworks [name]; *)
method get_frameworks = frameworks 
```

结尾;;

和错误：

```
Error: Some type variables are unbound in this type:
     class applicationFrameworksManager :
       object
         val mutable frameworks : 'a list
         method add_framework : 'b -> unit
         method get_frameworks : 'a list
       end
   The method add_framework has type 'b -> unit where 'b is unbound 
```

制作：*** [genobjc.cmx] 错误 2

有人可以帮忙吗？我可以绑定什么？谢谢。我会在这个类中添加很多字符串，最后我只想得到唯一的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:01:46.363

的类型`[]`是多态的，因此它的类型`'a list`包含一个未绑定的类型变量。如果您只想添加字符串，简单的解决方法是声明类型：

```
val mutable frameworks : string list = [] 
```

你的类是多态的；即，它可以用来管理任何东西的列表。您可以通过显式地为类提供托管元素类型的类型参数来做到这一点。但听起来你不需要那个。

# facebook-graph-api - iOS 在状态更新中标记朋友

> ID：12937203
> 
> 赞同：2
> 
> 时间：2012-10-17T14:56:17.633
> 
> 标签：facebook-graph-api, feed, facebook-ios-sdk, facebook-timeline

我目前正在使用 iOS Facebook SDK 3.1。要将提要故事发布到用户时间线，在 < iOS 6 上，我一直在使用`+[FBRequest requestForPostStatusUpdate:place:tags:]`. 这很好用，除非我尝试标记朋友 [例如我`@FRIENDS_NAME`在 Facebook.com 上输入作曲家时会这样做。我知道我可以将对象数组传递给`tags:`参数，但是，正如我所料，也传递 nil 以`place`产生错误**(#100) Cannot specify user tags without a place tag**。

为了完整起见，这是我使用的示例：

```
NSArray *tags = @[@(FB_UID)];

[FBRequestConnection startForPostStatusUpdate:@"Friends Name, this is a test"
                                        place:nil
                                         tags:tags
                            completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                            }]; 
```

现在我明白了，使用这种方法，不可能在我的状态中标记朋友。但是，有没有一种方法，任何方法，使用图形 API 在动态帖子中标记朋友，就像在 Facebook.com 上标记用户一样？我今天早上大部分时间都在寻找答案，但我还没有找到任何解决方案。我发现的任何问题似乎至少有一年的历史，所以我不确定它们是否仍然相关。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:10:40.777

> 但是，有没有一种方法，任何方法，使用图形 API 在动态帖子中标记朋友，就像在 Facebook.com 上标记用户一样？

不。

> 我今天早上大部分时间都在寻找答案，但我还没有找到任何解决方案。

那是因为没有——Facebook 很久以前就禁用了通过 API 发布的帖子的此功能。

* * *

对于 Open Graph 操作，情况有所不同 - 允许称为[提及标记](https://developers.facebook.com/docs/opengraph/mention_tagging/)的东西。

# iphone - 警报的通知仅在后台触发

> ID：12937204
> 
> 赞同：1
> 
> 时间：2012-10-17T14:56:18.150
> 
> 标签：iphone, ios

我正在创建一个警报应用程序，因为我创建了显示消息和播放声音的通知。但是现在它只在后台工作，我必须最小化我的应用程序来触发我的通知，如果我的应用程序是打开的，那么通知不会显示。

通知代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    dateTimePiker.date = [NSDate date];
}

- (void)scheduleLocalNotificationWithDate:(NSDate *)fireDate
{
    UILocalNotification *notification = [[UILocalNotification alloc] init];

    notification.fireDate = fireDate;
    notification.alertBody = @"Wake up";
    notification.soundName = @"ma.mp3";
    [[UIApplication sharedApplication] scheduleLocalNotification:notification];
}

- (IBAction)SetAlarmBtnTapped:(id)sender {

    .....
    .....
    [self scheduleLocalNotificationWithDate:dateTimePiker.date];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:11:26.643

`application:didReceiveLocalNotification:`在您的应用委托上实施

来自文档：

> 如果应用程序在前台运行，则没有警报、标记或声音；相反，如果委托实现它，则调用 application:didReceiveLocalNotification: 方法。

# objective-c - CFUUIDBytes 的潜在 iOS 内存泄漏

> ID：12937207
> 
> 赞同：3
> 
> 时间：2012-10-17T14:56:27.893
> 
> 标签：objective-c, ios, memory-leaks

我有一个静态方法定义如下：

```
+(NSString*)getNewIdAsBase64
{
    // Grab new uuid
    CFUUIDRef originalUuid = CFUUIDCreate(nil);//create a new UUID
    //NSLog(@"Step a: original uuidObj = %@",originalUuid);
    CFUUIDBytes originalBytes = CFUUIDGetUUIDBytes (originalUuid);//ISSUE

    NSData* data88  = [NSData dataWithBytes: &originalBytes length: sizeof(originalBytes)];
    NSString* hugo = [data88 base64EncodedString];

    return hugo;

} 
```

当我在我的项目上运行 Product->Analyze 时，用 //ISSUE 注释的行会引发以下问题：

```
Potential leak of an object alocated on line 23 and stored into 'originalUuid' 
```

我做错了什么，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:08:29.357

即使您使用 ARC，您也需要释放您创建的对象：

```
+(NSString*)getNewIdAsBase64
{
    // Grab new uuid
    CFUUIDRef originalUuid = CFUUIDCreate(nil);//create a new UUID
    //NSLog(@"Step a: original uuidObj = %@",originalUuid);
    CFUUIDBytes originalBytes = CFUUIDGetUUIDBytes (originalUuid);//ISSUE

    NSData* data88  = [NSData dataWithBytes: &originalBytes length: sizeof(originalBytes)];
    NSString* hugo = [data88 base64EncodedString];

    CFRelease(originalUuid);
    return hugo;

} 
```

# ruby-on-rails - 为实例方法起别名时理解单例类

> ID：12937209
> 
> 赞同：1
> 
> 时间：2012-10-17T14:56:31.337
> 
> 标签：ruby-on-rails, ruby, methods, metaprogramming, definition

我正在使用 Ruby 1.9.2 和 Ruby on Rails v3.2.2 gem。我正在尝试以“正确的方式”学习元编程，此时我正在为 RoR 模块提供的块中的*实例*方法起别名：`included do ... end`[`ActiveSupport::Concern`](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

```
module MyModule
  extend ActiveSupport::Concern

  included do
    # Builds the instance method name.
    my_method_name = build_method_name.to_sym # => :my_method

    # Defines the :my_method instance method in the including class of MyModule.
    define_singleton_method(my_method_name) do |*args|
      # ...
    end

    # Aliases the :my_method instance method in the including class of MyModule.
    singleton_class = class << self; self end
    singleton_class.send(:alias_method, :my_new_method, my_method_name)        
  end
end 
```

“新手”说，通过在 Web 上的搜索，我想出了该`singleton_class = class << self; self end`语句，并使用它（而不是`class << self ... end`块）来限定变量的*范围*，`my_method_name`从而动态生成别名。

*我*想确切了解*上述*代码中的工作原理和`singleton_class`方式，以及是否有更好的方法（也许是更易于维护和性能更好的方法）来实现相同的方法（别名、定义单例方法等），但是“正确的方式”，因为我认为并非如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T22:58:29.443

我推荐 Yehuda Katz[关于 Ruby 自我元编程的帖子](http://yehudakatz.com/2009/11/15/metaprogramming-in-ruby-its-all-about-the-self/)。以下是我针对您的问题的简要总结：

在 Ruby 中，所有对象都有一个单例类（也称为元类）。对象首先从它们的单例类不可见地继承，然后从它们的显式类继承。Ruby 类本身有自己的单例类，因为类也是对象。`class <<`惯用语只是 Ruby 用于访问对象的单例类范围的语法。

```
 class Person
   class << self
     # self in this scope is Person's singleton class
   end
 end

 person = Person.new
 person_singleton_class = class << person; self; end 
```

您的 Rails 版本实际上提供`singleton_class`了快捷方式。由于`singleton_class`是一种可用的方法，因此您无需将其分配给表达式中的变量`singleton_class = class << self; self end`：

```
Person.singleton_class 

person = Person.new
person.singleton_class 
```

由于类直接继承自其单例类，因此我们希望在元编程时动态添加类方法。Ruby 提供了几种方法来打开对象的范围，同时保持对周围范围的访问：`class_eval`和`instance_eval`. 它们的行为方式存在细微差别（Yehuda 的帖子对此进行了解释），但您可以使用其中任何一种进入单例类的范围，将单例类上的方法解析为`self`并且仍然可以`my_method_name`从周围范围访问。

综上所述，您可以对模块进行一些小的更改：

```
module MyModule
  extend ActiveSupport::Concern

  included do
    # Builds the instance method name.
    my_method_name = build_method_name.to_sym # => :my_method

    # Defines the :my_method instance method in the including class of MyModule.
    define_singleton_method(my_method_name) do |*args|
      # ...
    end

    singleton_class.class_eval do
      # method resolution in scope of singleton class
      alias_method :my_new_method, my_method_name
    end

  end

end 
```

# android - 数据库测试 Robolectric 不工作

> ID：12937210
> 
> 赞同：1
> 
> 时间：2012-10-17T14:56:33.323
> 
> 标签：android, robolectric

我已经构建了一个 DAO 类来与 Android 中的 SQLiteDatabase 进行通信。当我在实际设备上运行一个简单的测试时，它可以工作。我能够将用户插入数据库并检索相同的用户。但是，当我使用 Robolectric 运行它时，我收到了 NullpointerException。这是 Robolectric 的问题吗？这是代码

```
public abstract class AbstractDAO<T> {

    private SQLiteDatabase database;
    private String tableName;

    @Inject
    public AbstractDAO(SQLiteDatabase database, String tableName) {
        this.database = database;
        this.tableName = tableName;
    }

    public T get(String id) {
        Cursor cursor = database.rawQuery("SELECT * FROM " + tableName, null);
        cursor.moveToFirst();
        return cursorToObject(cursor);
    }

    public void insert(T object) {
        database.insert(tableName, null, toContentValues(object));
    }

    public Cursor get() {
        return database.rawQuery("SELECT * FROM " + tableName, null);
    }

    protected abstract ContentValues toContentValues(T object);

    protected abstract T cursorToObject(Cursor cursor);
}

public class UserDAO extends AbstractDAO<User>{

    private static final String TABLE_NAME = "users";
    private static final String KEY_ID = "_id";
    private static final String KEY_FIRST_NAME = "FirstName";
    private static final String KEY_LAST_NAME = "LastName";
    private static final String KEY_FACEBOOK_ID = "FacebookId";
    private static final String KEY_FACEBOOK_USERNAME = "FacebookUserName";

    @Inject
    public UserDAO(SQLiteDatabase database) {
        super(database, TABLE_NAME);
    }

    @Override
    protected ContentValues toContentValues(User user) {
        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_ID, user.getId());
        contentValues.put(KEY_FIRST_NAME, user.getFirstName());
        contentValues.put(KEY_LAST_NAME, user.getLastName());
        contentValues.put(KEY_FACEBOOK_ID, user.getFacebookId());
        contentValues.put(KEY_FACEBOOK_USERNAME, user.getFacebookUserName());
        return contentValues;
    }

    @Override
    protected User cursorToObject(Cursor cursor) {
        User user = new User();
        user.setId(cursor.getString(cursor.getColumnIndexOrThrow(KEY_ID)));
        user.setFirstName(cursor.getString(cursor.getColumnIndexOrThrow(KEY_FIRST_NAME)));
        user.setLastName(cursor.getString(cursor.getColumnIndexOrThrow(KEY_LAST_NAME)));
        user.setFacebookId(cursor.getString(cursor.getColumnIndexOrThrow(KEY_FACEBOOK_ID)));
        user.setFacebookUserName(cursor.getString(cursor.getColumnIndexOrThrow(KEY_FACEBOOK_USERNAME)));
        return user;
    } 
```

而且测试...

```
@RunWith(RoboInjectedTestRunner.class)
public class UserDAOTest {

    @Inject
    private UserDAO userDAO;

    @Test
    public void shouldSaveUser() {
        //WORKING ON DEVICE BUT NOT IN TEST
        User user = new User();
        user.setFirstName("Damu");
        user.setLastName("Tow");
        user.setId("12345");
        user.setFacebookId("54321");
        user.setFacebookUserName("Damow Ting");
        userDAO.insert(user);
        User user1 = userDAO.get("12345");
        Assert.assertEquals("12345", user1.getId());
        Assert.assertEquals("Damu", user1.getFirstName());
        Assert.assertEquals("Tow", user1.getLastName());
        Assert.assertEquals("54321", user1.getFacebookId());
        Assert.assertEquals("Damow Ting", user1.getFacebookUserName());
    }

} 
```

# c++ - 这两种定义方法的风格有区别吗？

> ID：12937211
> 
> 赞同：2
> 
> 时间：2012-10-17T14:56:36.580
> 
> 标签：c++, coding-style, member

### 选项1：

```
//A.h
class A
{
   void foo()
   {
   }
}; 
```

### 选项 2：

```
//A.h
class A
{
    void foo();
};

inline void A::foo()
{
} 
```

**注意，在选项2中，该方法也在header中实现**（标记`inline`为防止多重定义）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:01:36.473

正如您所介绍的那样，没有没有区别。但是，有时使用第二种形式来利用可能遵循的声明`class A`。

例如：

```
class A
{
  void foo();
};
class B : A { };
inline void A::foo() {
   B b;
} 
```

在第一种形式中，这样的使用`B`是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:07:13.583

在类定义中定义的方法是隐式的`inline`，因此在功能上没有区别。

Rob 就一个差异提供了一个很好的理由。这是另一个，IMO。

假设你有：

```
class DBConnection
{
public:
   DBConnection(const Config& config)
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   void reconnect()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   void checkIntegrity()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   void runQuery()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   void dropTables()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   void disconnected(Callback callback)
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   void selectTables()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   Results getResults()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
        //YES, I copy-pasted these
   }
   //MANY MORE
} 
```

告诉我，有没有办法在数据库断开连接时得到通知？

现在，再试一次：

```
class DBConnection
{
public:
   DBConnection(const Config& config);
   void reconnect();
   void checkIntegrity();
   void runQuery();
   void dropTables();
   void disconnected(Callback callback);
   void selectTables();
   Results getResults();
   //MANY MORE
};

inline DBConnection::DBConnection(const Config& config)
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   inline void DBConnection::reconnect()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   inline void DBConnection::checkIntegrity()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   inline void DBConnection::runQuery()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   inline void DBConnection::dropTables()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   inline void DBConnection::disconnected(Callback callback)
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   inline void DBConnection::selectTables()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
   }
   inline Results DBConnection::getResults()
   {
        //some
        //really
        //complicated
        //logic
        //and
        //checks
        //and
        //stuff
        //I dunno
        //not
        //a
        //db
        //guy
        //possibly
        //exceptions
        //thrown?
        //YES, I copy-pasted these
   } 
```

更容易，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:04:16.157

这两个定义之间没有主要区别。

在选项 1 中，该方法被称为内联函数，即不允许循环和更多代码行。因为执行速度快。

在选项2中，即称为外部体定义，我们可以编写任何行数。

我认为内联意味着不阻止多重定义。这意味着只做少量没有循环等的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T15:25:32.003

不，没有大的区别。两者都向编译器暗示方法 foo() 可能/应该被内联。

KerrekSB 正确地指出它需要更多代码，但当然有一个好处：它提供了一个选项，即使使用内联方法也可以将“接口”与“实现”分开。

例如，您可以在头文件的顶部显示类接口，并清楚地将 .h 文件的其余部分标记为“内联实现”。或者，您可以包含第二个带有内联实现的头文件。

```
//A.h
class A
{
    void foo();
};
// "import" the inline implementations
#include "A.ipp" 
```

然后有 A.ipp 如下：

```
//A.ipp
inline void A::foo()
{
} 
```

一个小注意事项：由于“第三种非惯用的 C++ 文件类型”，它可能会引起您的同事的一些困惑：.h 用于类，.cpp 用于“普通”源文件，.ipp 用于内联实现。

# php - mysql_fetch_row() 不是有效的结果资源

> ID：12937213
> 
> 赞同：1
> 
> 时间：2012-10-17T14:56:44.263
> 
> 标签：php, mysql, sql, rows

我很困惑，我不知道怎么了。我即将将所有数据从我的第一个表转移到另一个表。这是我的代码：

```
$getdata = mysql_query("SELECT Quantity, Description, Total FROM ordercart");

while($row = mysql_fetch_row($getdata))
{
foreach($row as $cell){

$query1 = mysql_query("INSERT INTO ordermem (Quantity, Description, Total) VALUES 
($cell)",$connect);

}
mysql_free_result($getdata);
} 
```

我收到错误：警告：mysql_fetch_row()：5 不是有效的 MySQL 结果资源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:58:53.623

您只在 中传递一个值`INSERT`，它期望将三个值传递给字段 `Quantity, Description, Total`：

```
INSERT INTO ordermem (Quantity, Description, Total) VALUES 
($cell); 
```

将其更改为：

```
INSERT INTO ordermem (Quantity, Description, Total) VALUES 
($cell, $descriptionParam, $totalParam); 
```

您也可以尝试`INSERT INTO SELECT`直接使用，而不是像这样使用两个不同的语句：

```
INSERT INTO ordermem (Quantity, Description, Total)
SELECT Quantity, Description, Total FROM ordercart; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:25:41.070

您正在尝试将 1 个值插入 3 个字段。您需要为每个字段设置 1 个值。例如：

```
$quantity="$_GET['qty']";
$description="$_GET['desc']";
$total="$_GET['total']";

$query = mysql_query("INSERT INTO ordermem (Quantity, Description, Total) 
                                    VALUES ('$quantity','$description','$total')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:27:17.460

尝试这个 ：

```
$query = "INSERT INTO ordermem (Quantity, Description, Total) SELECT Quantity, Description, Total FROM ordercart";

mysql_query($query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:57:27.940

使用调试来找出问题的根源。

`mysql_query()`返回一个布尔值，告诉您操作是否成功。如果没有成功，该`mysql_error()`函数会给出 mySQL 的错误消息。

例子：

```
$query1 = mysql_query("INSERT INTO ordermem (Quantity, Description, Total) VALUES ($cell)",$connect);

if (!$query1)  
  trigger_error("mySQL Error: mySQL returned ".mysql_error(), E_USER_ERROR); 
```

这将给您一条消息，例如“值的数量与列的数量不匹配”，它会提示您出了什么问题。

# c - c - 尝试制作 irc 机器人

> ID：12937216
> 
> 赞同：-2
> 
> 时间：2012-10-17T14:56:49.533
> 
> 标签：c, winapi, bots, irc

```
#include <winsock2.h>
#include <stdio.h>

const int PORT = 6667;
const char *SERVER = "irc.freenode.org";
const char *CHAN = "#channela";
const char *NICK = "loveMilk";

const int MAX_BUFF_SIZE = 512;

int sock_conn(SOCKET *socketn, const char *HOST, int portn);
int sock_send(SOCKET *socketn, char* msg, ...);

int main(int argc, char *argv[])
{
    WSADATA wsadata;
    char buff[MAX_BUFF_SIZE];
    char oBuff[MAX_BUFF_SIZE];
    int buffRec;

    if (WSAStartup(MAKEWORD(2,2), &wsadata) != 0)
        return 0;

    SOCKET sock;

    if(sock_conn(&sock, SERVER, PORT) != 0)
    {
        WSACleanup();
        return 0;
    }

    printf("connected.\n");

    sock_send(&sock, "USER %s \"\" \"127.0.0.1\" :%s\r\n", NICK, NICK);
    sock_send(&sock, "NICK %s\r\n", NICK);
    Sleep(100);

    sock_send(&sock, "JOIN %s\r\n", CHAN);
    printf("Joined channel.\n");

    while(1)
    {
        memset(buff, 0, MAX_BUFF_SIZE);
        memset(oBuff, 0, MAX_BUFF_SIZE);

        buffRec = recv(sock, buff, MAX_BUFF_SIZE, 0);
        if((buffRec == 0) || (buffRec == SOCKET_ERROR)) break;

        /* New line: Terminate buffer as a string */
        buff[buffRec] = '\0';

        if(buff[0] != ':')
        {
            strcpy(oBuff, "PONG :");
            printf("PONG");
            sock_send(&sock, oBuff);
        }
        else
        {
            if(strstr(buff, "PRIVMSG"))
            {
                int i, num = 0;
                for(i = 0; i < strlen(buff); ++i) if(buff[i] = ' ') ++num;
                char** parts = malloc(sizeof(char*) * num);
                char *p;
                p = strtok(buff, " ");
                int j = 0;
                while(p != NULL)
                {
                    parts[j] = p;
                    j++;
                    p = strtok(NULL, " ");
                }
                printf("%s", parts[3]);

                free(parts);
            }
        }
    }
    closesocket(sock);
    return 1;
}

int sock_conn(SOCKET *socketn, const char *HOST, int portn)
{
    WSADATA wsadata;
    SOCKADDR_IN sockA;
    LPHOSTENT hostE;

    if(WSAStartup(MAKEWORD(2,2), &wsadata) == -1) return -1;
    if(!(hostE = gethostbyname(HOST)))
    {
        WSACleanup();
        return -1;
    }
    if ((*socketn = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET)
    {
        WSACleanup();
        return -1;
    }

    sockA.sin_family = AF_INET;
    sockA.sin_port = htons(portn);
    sockA.sin_addr = *((LPIN_ADDR)*hostE->h_addr_list);

    if(connect(*socketn, (LPSOCKADDR)&sockA, sizeof(struct sockaddr)) == SOCKET_ERROR)
    {
        WSACleanup();
        return -1;
    }
}

int sock_send(SOCKET *socketn, char* msg, ...)
{
    char buff[MAX_BUFF_SIZE];
    va_list va;
    va_start(va, msg);
    vsprintf(buff, msg, va);
    va_end(va);
    send(*socketn, buff, strlen(buff), 0);
    return 1;
} 
```

零件总是空的，为什么？有人告诉我用这条线终止 buff：，`buff[buffRec] = '\0';`但我仍然一无所获，我怎样才能将 buff 更改为字符串，因为我相信这是问题所在......机器人正在连接并且我可以与之通信，但是当我尝试到达零件时，它是 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:59:30.103

```
char buff[MAX_BUFF_SIZE];

/* ... */

buffRec = recv(sock, buff, MAX_BUFF_SIZE, 0);

buff[buffRec] = '\0'; 
```

如果`buffRec`值是`MAX_BUFF_SIZE`你有一个缓冲区溢出。

# css - 悬停闪烁问题上的 CSS3 过渡背景图像

> ID：12937218
> 
> 赞同：0
> 
> 时间：2012-10-17T14:56:55.923
> 
> 标签：css, background-image, css-transitions

我在使用 CSS3 的背景图像转换时遇到问题。问题是第一次翻身时它偶尔会闪烁。如果您第二次翻转它，那么从一个到另一个平滑淡入/淡出是没有问题的。

我在谷歌上搜索过这个问题，发现很多人有同样的问题。但是他们通过使用 1 个背景图像然后使用 background-position 隐藏它直到您将其翻转来解决了这个问题。

我不能用我的，因为我需要从 1 张图像到另一张图像的平滑淡入/淡出动画（它是同一个按钮的 2 张图像，具有不同的颜色和东西。）如果我使用背景位置它'将来自它所在位置的按钮下方。我需要一个淡入淡出动画。

所以我猜这个问题的发生是因为图像没有被加载，并且它需要几分之一秒的时间来加载。

这是代码：

```
 .btn-denken{
        background:url(../images/btn-denken.png);
        width:219px;
        height:40px;
        float:left;
        -webkit-transition: all 0.3s ease-in-out 0s;
        -moz-transition: all 0.3s ease-in-out 0s;
        -ms-transition: all 0.3s ease-in-out 0s;
        -o-transition: all 0.3s ease-in-out 0s;
        transition: all 0.3s ease-in-out 0s;
    }

    .btn-denken:hover{
        background:url(../images/btn-denken-hover.png);
    } 
```

非常感谢帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T11:13:59.900

The trick is to make sure that the images you want to do transition on are already loaded by CSS, that's why putting them in the document as dummy's and loading them through CSS is the solution.

In the example below I have 4 images (0.jpg - 3.jpg), and if I would now set the class '.landing-1' on my document (html), the images transition properly.

In my CSS:

```
body {
    -webkit-transition: background 1s;
    background: url(0.jpg) no-repeat center center / cover fixed;
}
.dummy-image {
    position: absolute;
    left: -100%; /* to hide the dummy */
} 
```

Simple javascript to cache the images:

```
var images = [],
    load = function() {
        $('head').append('<style>html.landing-'.concat(this.index, ' body.landing, .dummy-image-', this.index, ' { background: url(', this.src, ') no-repeat center center / cover fixed; }</style>'));
        $('body').append('<div class="dummy-image dummy-image-'.concat(this.index, '">'));
      };

for(var i=0; i<4; i++) {
    var image = document.createElement('img');
    image.src = i + '.jpg');
    image.index = i;
    image.onload = load;
    images.push(image);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T05:39:10.060

我有同样的问题：我想使用过渡来淡化图像。使用 2 合 1 图像（或精灵）并使用 css 更改其悬停位置不起作用，因为您最终会看到图像横向或上下滚动。

（仅供参考，您是正确的 - 闪烁是因为加载图像需要一点时间，但从您悬停的那一刻起过渡已经开始。悬停一次后，图像已加载，因此不会再次发生直到您重新加载页面。）

这是一个纯粹的 HTML 和 CSS 解决方案：

*   创建一个包含 div
*   在此容器中放置锚标记和图像标记
*   在锚标记上设置背景图像（这应该是您希望在页面加载时显示的图像）
*   图片标签应该是您希望在悬停时显示的图片，并且需要应用 z-index 以将其置于锚标签后面

* * *

经过大量实验，我得出了以下解决方案：（**此处演示：http:** [//jsfiddle.net/jmtFK/](http://jsfiddle.net/jmtFK/)）

**HTML：**

```
<div class="button" id="specific">
    <a href="" class="link" target=""></a>
    <img>
</div> 
```

**CSS：**

```
.button {
    position: relative;
}

.button a {
    display: block;
    width: px;
    height: px;
    background: url() no-repeat;

    -webkit-opacity: 1;
    -moz-opacity: 1;
    opacity: 1;

    -webkit-transition: opacity 0.2s ease;
    -moz-transition: opacity 0.2s ease;
    -ms-transition: opacity 0.2s ease;
    -o-transition: opacity 0.2s ease;
    transition: opacity 0.2s ease;
}

.button a:hover {
    -webkit-opacity: 0;
    -moz-opacity: 0;
    opacity: 0;

    -webkit-transition: opacity 0.3s ease;
    -moz-transition: opacity 0.3s ease;
    -ms-transition: opacity 0.3s ease;
    -o-transition: opacity 0.3s ease;
    transition: opacity 0.3s ease;
}

.button img {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: -1;

    -webkit-opacity: 0;
    -moz-opacity: 0;
    opacity: 0;

    -webkit-transition: opacity 0.3s ease;
    -moz-transition: opacity 0.3s ease;
    -ms-transition: opacity 0.3s ease;
    -o-transition: opacity 0.3s ease;
    transition: opacity 0.3s ease;
}

.button a:hover + img {
    -webkit-opacity: 1;
    -moz-opacity: 1;
    opacity: 1;

    -webkit-transition: opacity 0.3s ease;
    -moz-transition: opacity 0.3s ease;
    -ms-transition: opacity 0.3s ease;
    -o-transition: opacity 0.3s ease;
    transition: opacity 0.3s ease;
} 
```

我最初没有将我的 z 索引图像设置为透明，发现它的边缘出现在链接图像的外部周围。这很难看，所以我应用了 opacity: 0。

我还为“悬停”和“悬停”添加了 CSS 过渡。（基本上，应用于某个 CSS 状态的转换设置决定了它如何转换**到该状态。例如，当****按钮 a:hover**不再适用时，应用于**.button a**的转换设置生效。

 **我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:56:09.763

也许您可以使用绝对定位和 z-index 在同一区域中使用两个单独的容器。为每个容器设置两个不同的背景图像，然后在悬停时将顶部容器的不透明度设置为完全透明。**

# knockout.js - 我可以使用 knockout.js 进行分支/决策吗

> ID：12937219
> 
> 赞同：0
> 
> 时间：2012-10-17T14:56:56.003
> 
> 标签：knockout.js

我有一些旧代码，我想看看是否可以使用 knockout.js。

```
 var secs = 960 + Math.floor(data.length / 6) * 1060 + 10;
    $("#metro-scrollbar").css("width", secs.toString() + 'px');
    var group_count = 0;
    section = ""
    for (i = 0; i < data.length; i++) {
        if (i % 6 == 0)
            section += "<section class=\"" + (data.length - i <= 6 ? "last" : "") + "\"><h2 class=\"section-title\">Group " + ++group_count  + "</h2>";

        section += "<a href=\"/TheoryTests/Test/" + data[i].Id + "/" + data[i].Title.replace(/ /g,'-') + "\">";
        section += "<div class=\"metro-tile double" + (i % 3 == 2 ? " last" : "") + "\"><div class=\"a1x2\"></div><div class=\"live-tile metrogreen\">";

        section += "<span class=\"tile-title\">" + data[i].Title + "</span>";
        section += "<div class=\"dark\"><div class=\"TheoryTestTile\"><p>Helo</p></div></div>";

        section += "</div></div></a>";
        if (i % 6 == 5)
          section += "</section>";
    } 
```

javascript 生成了一组带有一些嵌套 div 的部分。每 6 个 div 它创建一个新部分。我了解如何使用 knockout.js 进行数据绑定

data-bind="foreach: test, visible: tests().length > 0" 但是如果（i%6 == 0）我该如何做决策

更新

```
<div id="metro-grid">
    <div id="metro-scrollbar" data-bind="foreach: tests, visible: tests().length > 0">
        <!-- ko if: $index() % 6 == 0 -->
        <section data-bind ="css: { 'last' : $parent.isLastSection($index)}," >
        <!-- /ko -->
            <div class="metro-tile double " data-bind ="css: { 'last' : $parent.isLastTile($index)}">
            <div class="a1x2"></div><div class="live-tile metrogreen">
                <div ></div>
             </div>
                </div>
        <!-- ko if: $index() % 6 == 0 -->
        </section>
        <!-- /ko -->

    </div>
</div> 
```

上面的问题是我仍然想在 section 中生成 div。tests 是一个包含 12 个元素的列表。我想每个第 6 个元素创建一个新部分。

更新 2

```
function TaskListViewModel() {
    // Data
    var self = this;
    self.tests = ko.observableArray([]);
    this.sections = [];

    self.isLastTile = function (i) {
           return i() % 3 == 2;
    };
    self.isLastSection = function (i) {

        return i() >= Math.floor(self.tests().length / 6);
    };

    this.createSections = ko.computed(function () {
        var tests = self.tests();
        current = [];
        sections.push(current);
        for (var i = 0; i < tests.length; i++) {
            current.push(tests[i]);
            if (((i+1) % 6) == 0) {
                current = [];
                sections.push(current);
            }
        }
    });

    $.getJSON(url, function (allData) {
        var mappedTasks = $.map(allData, function (item) { return new Task(item) });
        self.tests(mappedTasks);
        //var secs1 = self.tests().length / 6 * 960 + 960 + 10;
        var secs = 960 + Math.floor(self.tests().length / 6) * 1060 + 10;
        $("#metro-scrollbar").css("width", secs.toString() + 'px');

    });

}
ko.applyBindings(new TaskListViewModel()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:15:10.977

您可以在上下文中使用`$index`对象：`foreach`

```
<div data-bind="foreach: items">
    <span data-bind="visible: $index() % 6 == 0"></span>
</div> 
```

阅读有关`foreach`绑定的更多信息：http: [//knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)

编辑：为了避免渲染：

```
 <div data-bind="foreach: items">
        <!-- ko if: $index() % 6 == 0-->
            <span data-bind="text: $data"></span>
        <!-- /ko -->
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:22:08.240

Knockout.js 有一个“if”绑定： http: [//knockoutjs.com/documentation/if-binding.html](http://knockoutjs.com/documentation/if-binding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:51:42.560

我建议您将 2 ko.observables 添加到您的 viewModel 中。第一个是“sections”数组，第二个是 ko.computed，每次更新测试时都会重新填充“sections”，然后使用绑定循环遍历“sections”。

这是一个示例小提琴：

[http://jsfiddle.net/Zholen/q57RX/](http://jsfiddle.net/Zholen/q57RX/)

```
var vm = function() {
  var self = this;
  this.tests = ko.observableArray([1,2,3,4,5,6,7,8,9,
                                 10,11,12,13,14,15,16]);
  this.sections = [];

  this.createSections = ko.computed(function(){
    var tests = self.tests();
    console.log(tests.length);
    for(var i = 0; i < tests.length; i++)
    {
        if(i%6 == 0)
            self.sections.push([]);
        self.sections[self.sections.length - 1].push(tests[i]);
    }
  });
};

<div>
    <div data-bind="foreach: sections">
        <section data-bind="foreach: $data">
            <div data-bind="text:$data">
            </div>
        </section>
    </div>
</div>​ 
```

# c# - Lambdas 无法识别 DataTables 的字段

> ID：12937232
> 
> 赞同：0
> 
> 时间：2012-10-17T14:57:15.273
> 
> 标签：c#, .net, linq, lambda, datatable

我已经在另一个解决方案中多次这样做了。但在其中一个中，它不起作用。不知道为什么。

我想`Where()`在一些数据表中使用。所以，例如，我这样做

```
int someId;
DatasetName.DatatableName.AsEnumerable().Where(x => x.id == someId); 
```

但是在这个项目中，它不识别 lambda`x => x.id == someId`

这是为什么？我不能使用它们。intelissense，`(`在`Where`需要接收 a 的识别`Func`之后，当我这样做时`x => x.`，它无法识别 DataTable 的字段。为什么我做不到`x.id`？我知道我可以使用`Field<>()`（我认为这是名称），但我已经多次直接使用这些表达式，我认为它们更具可读性。在其他解决方案中确实可以做到这一点。

我已经添加了参考

```
using System.Linq;    
using System.Data.Linq;
using System.Linq.Expressions; 
```

它不编译，也不识别数据表的任何字段。该项目设置为`.Net Framework 3.5`.

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:59:45.957

我假设您正在使用强类型数据集。

`AsEnumerable()`可能由于某种原因正在返回`IEnumerable<Object>`。尝试添加演员表：

```
DatasetName.DatatableName.AsEnumerable().Cast<MyRowType>().Where(x => x.id == someId); 
```

您还应该确保 DataTable 正确继承自`System.Data.TypedTableBase<MyRowType>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:02:44.290

```
dataSet.Tables[0].AsEnumerable().Where(
r => r["Col1"] == "MyValue") 
```

您可以使用 LINQ to DataSets 来执行此操作：

# asp.net - Papertrail 和代码访问安全性

> ID：12937240
> 
> 赞同：0
> 
> 时间：2012-10-17T14:57:40.673
> 
> 标签：asp.net, security, papertrail-app

我目前正在研究 papertrail 并发现它非常有趣。但是，我的 Web 应用程序将部署到我无法控制的 Web 服务器上。问题是我使用此解决方案将日志发送到 papertrail： [http ://help.papertrailapp.com/kb/configuration/nlog-net-logging](http://help.papertrailapp.com/kb/configuration/nlog-net-logging)

而且我看到它的方式我无法在中等信任级别的网站上发送日志： [http ://technet.microsoft.com/en-us/library/cc754779.aspx](http://technet.microsoft.com/en-us/library/cc754779.aspx)

这是正确的吗？您有在中等信任网站上使用 papertrail 的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:33:46.807

是的你是对的：

```
Medium (web_mediumtrust.config) - Specifies a medium level of code access security, which means that, in addition to High Trust Level restrictions, the ASP.NET application cannot do any of the following things by default:

 Access files outside the application directory.
 Access the registry.
 **Make network or Web service calls.** 
```

据我所见，papertrail 记录器使用网络对外部站点/服务进行记录。

# c# - 使用 C# ASP.net 将 TreeView 控件扩展到特定节点

> ID：12937248
> 
> 赞同：0
> 
> 时间：2012-10-17T14:57:56.803
> 
> 标签：c#, asp.net, treeview

我有一个显示分层文件夹结构的 ASP.net TreeView 控件。TreeView 中的每个节点都有一个 Long 值属性，对应一个 FolderId；Text 属性是文件夹名称，如下所示：

```
TreeNode node = new TreeNode();
node.Text = "folder name";
node.Value = 12345;
nodes.Add(node); 
```

我需要通过传入 FolderId 将 TreeView 自动展开到特定节点。

TreeView 有一个 FindNode() 方法，该方法似乎采用“值路径”（字符串）属性。这是我能得到的：

```
string folderIdPath = "72|73|77";

TreeView1.PathSeparator = '|';
TreeView1.FindNode(folderIdPath).Expand(); 
```

但是，这会引发“对象引用未设置为对象的实例”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:49:40.273

所以事实证明，你实际上不能一口气展开 TreeView。你必须一次做一个节点，见这里：[http ://forums.asp.net/t/1099367.aspx/1](http://forums.asp.net/t/1099367.aspx/1)

所以现在我遍历所有的 FolderIds 并一次打开它们。要记住的重要一点是，尽管您一次打开它们，但您仍然需要使用完整的 valuepath。

有关更多信息，请参阅上面的链接。

# java - Java中的随机化

> ID：12937249
> 
> 赞同：4
> 
> 时间：2012-10-17T14:58:02.713
> 
> 标签：java, random

我有 4 个字符串来代表人和 4 个字符串来代表名字。

我试图将它们随机化，这样每次我启动我的应用程序时，我的四个人都会有不同的名字，但在运行时没有人可以有相同的名字。

例子：

```
String person_one;
String person_two;
String person_three;
String person_four;

String name_one = "Bob";
String name_two = "Jane";
String name_three = "Tim";
String name_four = "Sara"; 
```

希望这有点道理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T15:00:50.047

您可以使用[Collections.shuffle()](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)：

```
List<String> names = new ArrayList<String>();
names.add("Bob");
names.add("Jane");
names.add("Tim");
names.add("Sara");

Collections.shuffle(names);

person_one = names.get(0);
person_two = names.get(1);
person_three = names.get(2);
person_four = names.get(3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:00:59.640

您可以使用[Collections.shuffle()](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)。

# r - 图例未从 K-Means 聚类中显示

> ID：12937250
> 
> 赞同：1
> 
> 时间：2012-10-17T14:58:03.100
> 
> 标签：r, legend

我已经使用 K-means 聚类对一些值进行了聚类。我绘制了三张图，我想要第三张图的图例。我使用该`lengend()`函数绘制了一个图例，但图例中没有出现图例（见图）并且没有报告错误。

```
library(cluster) 
library(MASS)

par(mfrow=c(1,3))
par(oma=c(5,0,3,0))

dat <- read.table("representative_for_r.txt", header=TRUE)

data.p <- as.matrix(dat$Average_RMSD)

# Determine number of clusters
wss <- (nrow(data.p)-1)*sum(apply(data.p,2,var))
for (i in 2:15) wss[i] <- sum(kmeans(data.p,centers=i)$withinss)
plot(1:15, wss, type="b", xlab="Number of Clusters",ylab="Within groups sum of squares")

# K-Means Cluster Analysis
fit <- kmeans(data.p, 6) # 6 cluster solution

# get cluster means 
aggregate(data.p,by=list(fit$cluster),FUN=mean)

# append cluster assignment
data.p <- data.frame(data.p, fit$cluster)

# PLot Clusters
clusplot(data.p, fit$cluster, color=TRUE, shade=TRUE, labels=2, lines=0)

data.p <- data.frame(dat$PDB, data.p)
#print(data.p)

plot(data.p[,2],col=data.p$fit.cluster) # takes the RMSD column of data.p(by indexing) then colours the points defined by the clustering
par(xpd=NA)
legend(0,0, c("Group 1","Group 2", "Group 3", "Group 4", "Group 5", "Group 6", "Group 7"), pch=1, col=1:7)

write.matrix(data.p, file = "kmeans_output.txt", sep = " ") 
```

输出如下所示：

![在此处输入图像描述](../Images/7c13abba0a826f0e6c18115b9ee09461.png)

我尝试使用以下方法更改 X 和 Y 值：

```
200,200
-200,200
200,-200
-200,-200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:13:41.263

尝试：

```
legend("bottomleft", legend = paste("Group", 1:7), pch=1, col=1:7) 
```

`y`注意轴上的刻度。您传递给的第二个坐标`legend()`必须位于绘图范围内。`0`和`-200`都`200`（方式）超出了图 3 的限制。

如果您不想猜测这些事情，使用字符来定义位置会更加直观。有关`?legend`可以提供的字符位置的详细信息，请参阅。

# jquery - 在资源管理器中从原始 xml 创建 JQuery 对象

> ID：12937255
> 
> 赞同：0
> 
> 时间：2012-10-17T14:58:06.083
> 
> 标签：jquery, xml, internet-explorer, xml-parsing

我有一个接受 XML 输入的脚本，我想将它转换为 JQuery 对象，以便我可以轻松地遍历它。

这是我使用的代码：

```
var xmlInput = 
'<content>'+
    '<action xsi:type="number">'+
    "123"+
    '</action>'+
'</content>';
var object = $(xmlInput);
alert(object);
alert(object.html());
object.find("action").each(function() {
    var type = $(this).attr("xsi:type");
    alert("action! type="+type);
}); 
```

（可在线获取：http: //irsrv2.cs.biu.ac.il:8080/GeniusWeb/ [jqueryTest.html](http://irsrv2.cs.biu.ac.il:8080/GeniusWeb/jqueryTest.html)）

这在 Firefox 和 Chrome 中运行良好：

*   第一个警报显示“对象”，
*   第二个警报显示了内部的“动作”元素，
*   第三个警报显示“action！type=number”。

但是，在 MSIE 8 中，这显然不起作用：

*   第一个警报显示“对象”，
*   第二个警报显示一个空字符串。
*   并且没有第三次警报。

我应该怎么做才能使代码在 IE 8 中也能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:27:52.337

使它成为一个 xml 文档，而不是一个带有无效 html 的 HTML 片段（IE 正确地阻塞了它）

```
var xmlDoc = $.parseXML(xmlstring);

$(xmlDoc).doSomething() 
```

# c# - 在不同的文化中解析日期

> ID：12937256
> 
> 赞同：1
> 
> 时间：2012-10-17T14:58:07.983
> 
> 标签：c#, locale

我正在开发一个应该由美国客户使用的软件。
在我的电脑（意大利语）上，我使用

```
CultureInfo cultureUS = CultureInfo.GetCultureInfo("en-US");
DateTime dt = DateTime.Parse(s, cultureUS); 
```

**这适用于Sat, Sep 8, 2012 之**类的字符串。
但是当我的软件在客户电脑上使用时，他得到了错误

> 字符串未被识别为有效的 DateTime

为什么？怎么了？
我应该用什么让它到处工作？

**编辑：**
为了避免混淆：我从网络和文件中读取了这些日期，我需要解析它们，然后使用它们（以那种格式）来编写其他文件。
所以我认为我不需要将它们转换为“标准”格式，然后再将它们转换回来：我想从那种格式中使用它们并将它们直接写入文件......
这就是我决定使用我写的代码....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:06:27.527

你可能想看看`DateTime.ParseExact`

```
CultureInfo cultureInfo = CultureInfo.GetCultureInfo("en-US");
DateTime dateTime = DateTime.ParseExact(s, "D", cultureInfo); 
```

编辑

对于确切的时间日期格式，您可以尝试：

```
DateTime dateTime = DateTime.ParseExact(s, "ddd, MMM dd, yyyy", cultureInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:54:25.783

我不习惯本地化，但也许这对你有用：

```
DateTime.Parse(date, new DateTimeFormatInfo()
                         { LongDatePattern = "ddd, MMM dd, YYYY" }); 
```

对于我以您的字符串格式向它抛出的字符串，它似乎对我有用，但我没有用不同的文化对其进行测试。

# python - 覆盖列表方法

> ID：12937259
> 
> 赞同：0
> 
> 时间：2012-10-17T14:58:13.357
> 
> 标签：python

我正在尝试覆盖列表方法并附加 2 个元素。我怎样才能做到这一点？

```
class LI(list):
    def append(self, item):
        self.append(item)

l = LI([100, 200])
l.append(302)
l.append(402)

print l 
```

最终输出：

```
[100,200,302,302,402,402] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:00:30.883

```
class LI(list):
    def append(self, *args):
        self.extend(args) 
```

现在你可以使用它了：

```
a = LI()
a.append(1,2,3,4)
a.append(5) 
```

或者你的意思是：

```
class LI(list):
    def append(self, item):
        list.append(self,item)
        list.append(self,item) 
```

但实际上，为什么不直接使用常规列表以及`extend`它们`append`的使用方式呢？

```
a = list()
a.extend((1,2,3,4))
a.append(5) 
```

或者

```
a = list()
item = 1
a.extend((item,item)) 
```

# javascript - 每秒缩放一个图像jQuery

> ID：12937260
> 
> 赞同：2
> 
> 时间：2012-10-17T14:58:13.863
> 
> 标签：javascript, jquery, jquery-animate

我尝试以每秒缩放一次的方式为图像设置动画，当我加载页面时它可以工作，但我希望每秒钟都需要它。我认为当我使用相同的图像 ID 时，这是一个问题。

这是我的[JSFIDDLE](http://jsfiddle.net/Mils/UxTdU/1/)。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:00:40.120

您正在使用`setTimeout`which 将在一段时间后执行一些代码，您想要的是`setInterval`，它将每隔一段时间执行一些代码。[http://jsfiddle.net/UxTdU/3/](http://jsfiddle.net/UxTdU/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:00:30.173

您可以`zoom`在一个间隔内增加该属性。

```
setInterval(function(){
    $("#myImg").animate({"zoom":"+=.025"}, 500);
}, 1000); 
```

小提琴：http: [//jsfiddle.net/UxTdU/6/](http://jsfiddle.net/UxTdU/6/)

您甚至可以将其放大到特定大小，然后停止：

```
// Cache reference to image
var $image  = jQuery("#myImg");

// Cache reference to zooming interval
var zooming = setInterval(function(){

    // If current zoom is under 1.5
    $image.css("zoom") < 1.5 

        // Increment zoom by .025
        ? $image.animate({"zoom":"+=.025"}, 500) 

        // Otherwise, stop zooming
        : clearInterval(zooming);

// Run every 1 second
}, 1000); 
```

小提琴：http: [//jsfiddle.net/UxTdU/8/](http://jsfiddle.net/UxTdU/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:02:14.430

[http://jsfiddle.net/UxTdU/5/](http://jsfiddle.net/UxTdU/5/) - 使用 setInterval，而不是 setTimeout。setTimeout 只发生一次。

# android - 如何使用 android 中另一个应用程序的 sqlite 数据库？

> ID：12937271
> 
> 赞同：2
> 
> 时间：2012-10-17T14:58:54.427
> 
> 标签：android, sqlite

> **可能重复：**
> [在 2 个 android 应用程序之间共享 SQLite 数据库？](https://stackoverflow.com/questions/7053809/share-sqlite-database-between-2-android-apps)

我正在尝试使用 SQLite 数据库，打开它，从中检索数据，插入数据，我做得很好，但是使用我在同一个应用程序中创建的 sqlite 数据库，但我正在尝试使用创建的其他数据库其他应用。

我试图像这样打开数据库：

```
String DB_PATH= "/data/data/my.sqlitemanager/databases/";
String DB_NAME = "commments";
SQLiteDatabase database = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null, SQLiteDatabase.OPEN_READONLY); 
```

但它没有用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:06:50.217

一个人不会简单地打开另一个应用程序的数据库。;)

说真的，出于明显的安全原因（和其他资源原因），默认情况下您不能这样做。如果您明确想要，您可以将数据从一个应用程序公开给其他应用程序。这可以通过以下方式完成：实现 ContentProvider，或者专门使用相同的用户 ID/权限运行您的两个应用程序。

如果您希望任何外部应用程序能够访问您的数据，更典型的方法是使用 ContentProvider。

[http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

更高级的方法，如果您控制需要共享数据的“两个应用程序”，并且您希望禁止任何其他应用程序访问您的数据，您想要使用的方法是指定用户 ID 和过程。一旦到位，您就可以直接共享数据。

[http://developer.android.com/guide/topics/manifest/application-element.html#proc](http://developer.android.com/guide/topics/manifest/application-element.html#proc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:12:51.790

默认情况下，Sqlite db 在每个项目的私有文件夹中创建，对于其他项目保持隐藏。但是，您可以将 Sqlite 数据库保存在 SD 卡中，因此它将对所有其他项目开放。

[是否可以将数据库文件复制到 SD 卡？](https://stackoverflow.com/q/7744827/996493)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-17T15:01:46.553

数据库存储在每个应用程序的私有目录中。有时它甚至是加密的。也许尝试使用超级用户权限。

# vba - Findrecord 总是先找到第一个记录，然后再找到好记录

> ID：12937273
> 
> 赞同：0
> 
> 时间：2012-10-17T14:59:05.897
> 
> 标签：vba, ms-access, ms-access-2010

我在显示提案跟进的表格时遇到了问题。

我制作了一个表格，您可以在其中导航到下一个跟进和上一个跟进。问题是，当我使用导航按钮时，它会为当前提案添加后续操作。

我意识到创建的后续始终是相同的（id 是 83），实际上它是为另一个提案制作的。所以每次我导航时，它都会更新这个特定的后续并更改`proposalId`当前的。

这是导航按钮之一的代码：

```
Private Sub btnShowPrevious_Click()
    Save
    FindRecord "ID", txtParentID
End Sub 
```

因为错误的 id 总是相同的（83），所以在当前的表单事件中我添加了一个警报，发现在向我展示好的跟进之前，它总是到 83 毫秒。

这是获得这种奇怪行为的步骤

1.  创建新的跟进并保存
2.  创建他的孩子并保存
3.  关闭表格
4.  打开父母或孩子跟进
5.  使用导航按钮

然后它去83之前显示好的。

如果我再次按下任何导航按钮，它就不会发生。

如果我在保存并使用按钮后不关闭表单，它就可以工作。

就像他在寻找我请求的跟进时是否有默认跟进 ID。

我不知道是否清楚。

我将`fetch defaults`、`filter on load`和`allow filters`属性设置为“否”。

另外，当我从设计模式以视图模式打开表单时，默认记录是 83。那么为什么当我执行`findrecord`它时它会先转到默认记录再转到好的记录？

**编辑**

最后，它总是第一条记录为什么它显示第一条记录，当我做`findrecord`之前找到好的记录时。

有谁知道为什么会这样

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:56:55.290

我得到了它...

我在另一个项目中对其进行了测试，在编写时`Findrecord`我注意到缺少一些参数。

我查了一下，这是我制作的方法（我不记得为什么我为此制作了自己的方法）

有一个`Me.Filter = ""`.. 正在将表单重新加载到第一条记录。

谢谢

# javascript - 缓慢显示一串字符的代码片段，就像有人在打字一样

> ID：12937281
> 
> 赞同：-2
> 
> 时间：2012-10-17T14:59:33.373
> 
> 标签：javascript

我看过一些教程，看起来像是有人在打字来显示课程。

我不记得我在哪里看到过它，但是 JavaScript 片段会是什么？

我确信它将基于一个简单的 setInterval 方法，但我想我会问你，以防你知道一个非常好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:11:01.743

这就是你想要的？！您的 html 中需要一个 id 为“typeText”的 DIV。

```
var theText = "myText",
progress = 0,
speed = 250;

window.setInterval(function(){
    document.getElementById("typeText").innerHTML = theText.substring(0, progress);
    progress++;
}, speed); 
```

# objective-c - 使用 sqlite3_exec 在 Objective-c 中进行事务并没有达到预期的效果

> ID：12937288
> 
> 赞同：2
> 
> 时间：2012-10-17T15:00:05.410
> 
> 标签：objective-c, ios, transactions, sqlite

早上好！

我目前正在用 Objective-c 开发一个 iOS 应用程序，并且我有一个本地数据库，允许用户通过 Internet 进行更新。数据库可以在短短几天内发生相当大的变化，因此可以全部减少到之前有数十万行的几行（不太可能但仍然如此）。

我正在使用 sqlite 并尝试执行事务性删除并且在运行以下代码时没有出现任何错误，但它没有达到预期的效果，即应该删除的行没有被删除！

我之前、之后和之后都在数据库上运行过选择查询，但总是找到应该删除的数据。

这是代码

```
@try {
    if(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK){
        //Db exists and can be open
        sqlite3_exec(db, "BEGIN EXCLUSIVE TRANSACTION", 0, 0, 0);
        sqlite3_stmt *stmt;
        const char *query = [[NSString stringWithFormat:@"DELETE FROM %@ 
                                                          WHERE ? = '?'", table] UTF8String];
        if(sqlite3_prepare_v2(db, query, -1, &stmt, NULL)== SQLITE_OK)
        {
            //integer i = 0
            //PrimaryKey contains k primaryKeys
            for(int i=0; i<[primaryKey count]; i++){
                //i = j < k
                sqlite3_bind_text(stmt, 1, (const char *)[parameters UTF8String]
                 , [parameters lengthOfBytesUsingEncoding:NSUTF8StringEncoding], SQLITE_STATIC);
                sqlite3_bind_text(stmt, 2, 
             (const char *)[[primaryKey objectAtIndex:i] UTF8String]
            , [[primaryKey objectAtIndex:i] lengthOfBytesUsingEncoding:NSUTF8StringEncoding ]
            , SQLITE_STATIC);

                if (sqlite3_step(stmt) != SQLITE_DONE){
                    NSLog(@"Delete commit failed. Error %s", sqlite3_errmsg(db));
                    return NO;
                }
                if(sqlite3_reset(stmt)!= SQLITE_OK){
                    NSLog(@"SQL error %s", sqlite3_errmsg(db));
                    return NO;
                }
            }
            //i = k
        }
        if(sqlite3_exec(db, "COMMIT TRANSACTION", 0, 0, 0) != SQLITE_OK){
            NSLog(@"SQL error %s", sqlite3_errmsg(db));

            return NO;
        }
        sqlite3_finalize(stmt);
        sqlite3_close(db);
        return YES;
    }
    NSLog(@"SQL error %s", sqlite3_errmsg(db));
    sqlite3_close(db);
    return NO;
}
@catch (NSException *exception) {
    NSLog(@"%@", [exception reason]);
    return NO;
} 
```

非常感谢那些更习惯在 sqlite 中使用事务的人提供的任何帮助或提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:08:24.910

你没有检查结果

```
sqlite3_exec(db, "BEGIN EXCLUSIVE TRANSACTION", 0, 0, 0); 
```

中有额外的引号

```
WHERE ? = '?' 
```

你不需要那些引号`sqlite3_bind_text`

我怀疑您正在尝试为参数 1 绑定列名。您不能在 SQLite 中执行此操作。`sqlite3_prepare_v2`需要知道列名；您的查询只是将列的名称与参数 2 进行比较。

# ruby - 如何在没有外壳扩展的情况下替换当前进程，传递完整的 ARGV 数组

> ID：12937289
> 
> 赞同：0
> 
> 时间：2012-10-17T15:00:05.207
> 
> 标签：ruby, command-line-arguments, env

Bash 的简单等价物是什么

```
exec $0 $* 
```

在红宝石？

[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exec](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exec)

编辑

部分答案似乎是：

```
 exec( "/bin/ls", *ARGV)  # credits: http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/13379 
```

那么接下来，变量`$0`将保存当前脚本的完整名称和路径，还是 Ruby 二进制文件？在**irb**下只有“irb”返回，这意味着我至少需要找到并预先添加路径。

边缘的另一个解决方案来自 [https://stackoverflow.com/a/2966988/1069375](https://stackoverflow.com/a/2966988/1069375)

```
cmd_line = "#{$0} #{ARGV.join( ' ' )}" 
```

`exec cmd_line`但是，如果可以将命令与其参数分开，则尝试似乎受外壳扩展的影响。它`ARGV.join`本身会将所有论点塞在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:31:59.207

这应该在不调用子shell的情况下执行当前文件：

```
exec([ File.absolute_path(__FILE__), __FILE__ ], *ARGV) 
```

编辑：当然，如果您要更改脚本中的当前工作目录，它会中断。不过，这很容易解决。

# xcode - 如何使用 AppleScript 在 Xcode 4 中创建目标？

> ID：12937297
> 
> 赞同：1
> 
> 时间：2012-10-17T15:00:21.593
> 
> 标签：xcode, xcode4, applescript

我想`Target`通过使用在 Xcode 4中创建一个`AppleScript`，通常当我按下“添加目标”按钮时，一个窗口会提示我选择我需要的目标类型。我想创建一个`Empty Application target`（空应用程序至少在我的基于 iOS 的应用程序中是一个选项）。

有人可以帮我吗？

# database - SQL Server 2008 - 数据库监控要求，最好的方法是什么

> ID：12937301
> 
> 赞同：1
> 
> 时间：2012-10-17T15:00:36.737
> 
> 标签：database, sql-server-2008, reporting-services

我有一个监控要求，我需要每小时检查一次表数据，如果它达到比前一小时更高的某些计数，我需要通知某些用户。我还需要创建某种用户界面，以便用户也可以根据天/周跟踪计数。

我是开发人员，除了编写存储过程/创建表等基本用途外，我对数据库知之甚少，我在互联网上搜索并找到了很多选项，但不知道最好的选择是什么将实现我的目的。

第一个是使用 SQL Server Reporting Services 企业版。我不确定是否有办法比较以前的数据，在其中编写逻辑并在其中发送电子邮件通知。

第二个是在表上编写触发器并在存储过程中编写逻辑，并在可能的情况下使用存储过程逻辑触发此触发器。触发器将发送电子邮件。但后来我需要在应用程序级别创建某种接口。

如果还有其他更好的方法可以做到这一点，或者这两者之间的最佳方法是什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:04:16.123

尝试阅读数据收集器：

[http://msdn.microsoft.com/en-us/library/bb677248%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/bb677248%28v=sql.105%29.aspx)

# asp.net-mvc - 使用 linq 检索相关数据

> ID：12937302
> 
> 赞同：0
> 
> 时间：2012-10-17T15:00:37.330
> 
> 标签：asp.net-mvc, linq, ef-code-first

我有一个首先使用 EF 代码的 MVC 应用程序。我将用户添加到系统并输入养老金详细信息，其中一部分是链接到名为 PensionBenefitLevel 的模型的下拉列表。这是模型 -

```
[Key]
public int PensionBenefitLevelID { get; set; }
public string DisplayText { get; set; }
public int EmployeePercentage { get; set; }
public int EmployerPercentage { get; set; }

public virtual ICollection<Pension> Pension { get; set; } 
```

注册时，我有来自下拉列表的 PensionBenefitLevelID，但在我的控制器中，我将使用与该 ID 相关的 EmployerPercentage 值执行计算。谁能指出我正确的方向？

我是否需要在控制器中创建一个变量并使用 linq 查询来取回该值？我找不到任何类似的例子，所以如果你能指出一个也很棒的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:13:49.250

如果我正确理解了这个问题，您想取回对应的实体并在该字段`PensionBenefitLevelID`上执行计算。`EmployerPercentage`

由于您没有提到您在 EF 中使用的模式（存储库、工作单元等），我只能给您一个一般性的答案：

```
var entity = [Your DB Context].[Your Entity].GetById(pensionBenefitLevelID);

if(entity != null)
{
    [Calculation]
} 
```

# .net - 如何在向 MSMQ 发送消息时启用负源日志？

> ID：12937306
> 
> 赞同：7
> 
> 时间：2012-10-17T15:00:41.760
> 
> 标签：.net, msmq, messaging

我正在尝试通过 System.Messaging.MessageQueue (.NET) 发送消息，并且消息不断消失。我见过有人建议启用负面来源日记，但似乎无法弄清楚这是如何做到的。任何人？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T15:17:05.440

```
Message m = new Message();
m.UseDeadLetterQueue = true; 
```

简单如。

# php - 在 if 语句中使用 ms_sql 查询生成的数组的第一个值

> ID：12937312
> 
> 赞同：0
> 
> 时间：2012-10-17T15:00:59.843
> 
> 标签：php, arrays, if-statement

好的，所以基本上我有一个返回数组的查询，然后它被循环：

```
$result = mssql_query("SELECT * FROM Segments ORDER BY Squares");

    if (!$result) {
    echo 'query failed';
    exit;

              }

        while ($row = mssql_fetch_array($result)) {
    $txtsquares = $row["Squares"];
    echo $txtsquares; 
```

回显时，变量 $txtsquares 等于一个数组值，例如 1 2 3 4 5 6 7 8。

我需要这个数组/循环。但我想获取这个数组的第一个值并在 if 语句中使用它，如下所示：

```
value="<?php echo $txtsquares; ?>"
<?php if ($txtsquares == 1) { ?> checked="checked" <?php }
else{ ?> checked="" <?php } ?>/> 
```

但是显然这是错误的，因为该值永远不会等于 1，因为它是一个数组。谁能指出我正确的方向？我是 PHP 新手，很抱歉，如果这是一个简单的问题，我已经用 Google 搜索过了，但运气不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:22:37.123

如果你需要使用第一个元素`$txtsquares`试试这个：

```
value="<?php echo $txtsquares; ?>"
<?php if ($txtsquares[0] == 1) { ?> checked="checked" <?php }
else{ ?> checked="" <?php } ?>/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:39:47.737

假设`$txtsquares`是一串数字，你**知道**它是一串数字......你可以这样做：

```
$txtsquares = "1234";

$str_values = str_split($txtsquares);
// array('1', '2', '3', '4')

$int_values = array_map(function($i) { return (int)$i; }, $str_values);
// array(1, 2, 3, 4)

$first_value = $int_values[0]; 
```

# php - 通过深度优先或广度优先发现文件夹树

> ID：12937313
> 
> 赞同：1
> 
> 时间：2012-10-17T15:01:03.447
> 
> 标签：php, algorithm, hard-drive, depth-first-search, breadth-first-search

我必须在文件夹中找到“最深”文件夹的路径。为此，我实现了两种算法，一种比另一种快得多。有谁知道为什么？我想这与硬盘硬件有一些联系，但我想了解。这是快速的：

```
 private function getHostAux($path) {
        $matches = array();
        $folder = rtrim($path, DIRECTORY_SEPARATOR);

        $moreFolders = glob($folder.DIRECTORY_SEPARATOR.'*', GLOB_ONLYDIR);
        if (count($moreFolders) == 0) {
           $matches[] = $folder;
        } else {
            foreach ($moreFolders as $fd) {
                $arr = $this->getHostAux($fd);
                $matches = array_merge($matches, $arr);
            }
        }
        return $matches;
    } 
```

这是慢速的：

```
 /**
     * Breadth-first function using glob
     */
private function getHostAux($path) {
    $matches = array();
    $folders = array(rtrim($path, DIRECTORY_SEPARATOR));
    $i = 0;
    while($folder = array_shift($folders)) {
        $moreFolders = glob($folder.DIRECTORY_SEPARATOR.'*', GLOB_ONLYDIR);
        if (count($moreFolders == 0)) {
            $matches[$i] = $folder;
        }
        $folders = array_merge($folders, $moreFolders);
        $i++;
    }
    return $matches;
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:54:52.093

您没有提供可能对理解您观察到的这些“时间”至关重要的其他信息。（我故意写了引号，因为你没有具体说明“慢”和“快”的含义以及你是如何测量它的。）

假设提供的信息是真实的，并且第一种方法的加速比大于百分之几，并且您已经在各种大小和深度的目录上对其进行了测试......

首先，我想评论提供的答案：

*   我不会那么肯定你的答案。首先，我认为您的意思是“内核*句柄*”。但这不是真的，因为`glob`没有打开句柄。你是怎么想出这个答案的？
*   两个版本的总迭代次数相同。

并添加我自己的一些东西：

*   我怀疑`array_shift()`可能会导致速度变慢，因为每次调用它时它都会重新索引整个数组。
*   您 glob 的顺序可能很重要，具体取决于底层操作系统和文件系统。
*   您的代码中有一个错误（可能）。您`$i`在每个 glob 之后递增，而不是在向`$matches`数组添加元素之后递增。这会导致`$matches`数组稀疏，这可能会导致合并、移位甚至添加过程变慢。我不确切知道 PHP 是否是这种情况，但我知道几种语言中的数组具有这些属性，这些属性有时在编码时很难记住。我建议修复此问题，再次计时代码并查看是否有任何不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:46:44.127

我认为您的第一个递归算法的迭代次数比第二个算法少。尝试观察每个算法使用辅助变量进行了多少次迭代。

# clearcase - 在 Unix 上从 ClearCase 进行简单部署

> ID：12937315
> 
> 赞同：1
> 
> 时间：2012-10-17T15:01:09.953
> 
> 标签：clearcase

我最近加入了一个团队，该团队拥有多个执行工作负载自动化的应用程序。他们使用 ClearCase 进行版本控制，但开发和测试环境（我猜是由于团队中缺乏 ClearCase 专业知识）没有从 ClearCase 中检出/部署，而只是从 Window FTP 到各自的 Unix 服务器。我说“简单部署”是因为所有代码都被解释（Perl 和 shell）所以不需要编译。不用说，这种方法有很多问题，尤其是从部署开始就在这些环境中缺乏版本管理。

所以我想将我们的部署绑定到存储库并开始控制更改，但我只是一个 ClearCase 新手。我的具体问题是：我部署的是 VIEW 还是 STREAM？我会说后一个原因视图是用户特定的，而（根据我的理解）流是每个视图的项目主干就像一个分支，视图被集成到它们的流中。

如果有人对“意外”CM 联络员的一些有用但简洁且轻量级的 ClearCase 教程有任何指示，请分享。

或者，如果您认为此任务适合**Jenkins**，尽管相对简单（不涉及构建/编译），请加入。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:54:30.527

您需要使用[Jenkins ClearCase UCM 插件](https://wiki.jenkins-ci.org/display/JENKINS/ClearCase+UCM+Plugin)（与[Jenkins ClearCase 插件](https://wiki.jenkins-ci.org/display/JENKINS/ClearCase+Plugin)结合使用）才能基于 ClearCase 流启动作业

![配置](../Images/ef55db60c7d1185dbe3ddb78cb950e0b.png)

Jenkins 将根据您将在其中指定的流创建 UCM 快照视图。

有关流的更多信息，另请参阅：

*   “ [ClearCase 中分支和流之间的区别？](https://stackoverflow.com/questions/9880031/integration-stream-vs-integration-view-in-clearcase) ”
*   “ [ClearCase 中的集成流与集成视图](https://stackoverflow.com/questions/9880031/integration-stream-vs-integration-view-in-clearcase)”

# java - 导出 Java 应用程序

> ID：12937319
> 
> 赞同：2
> 
> 时间：2012-10-17T15:01:20.417
> 
> 标签：java, jar, export

我有一个非常简单的问题。如何导出 Java 程序，例如正在导出的 Minecraft 游戏：

![在此处输入图像描述](../Images/c479122afd24b05f70fe3c324587de68.png)

我的 bin 文件夹将包含以下内容：

![在此处输入图像描述](../Images/71528bf54620b14c8045f520acb8d9d6.png)

是否有任何程序可以执行此操作或任何 Eclipse 插件？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:05:29.157

想到阿帕奇：

1.  Apache Ant（适用于任何项目）：[http](http://ant.apache.org/manual/index.html) ://ant.apache.org/manual/index.html Apache Maven - 程序集（适用于 Maven 项目）：
2.  [http://maven.apache.org/plugins/maven-assembly-plugin/](http://maven.apache.org/plugins/maven-assembly-plugin/)

# iphone - 重新排列 NSArray 和 NSDictionary 条目

> ID：12937324
> 
> 赞同：0
> 
> 时间：2012-10-17T15:01:37.987
> 
> 标签：iphone, objective-c, ios, nsarray, nsdictionary

我有带有 nsdictionary 对象的数组，例如：

```
({"someKey" = "title";
  "name" = "someName";
 },
 {"someKey" = "title";
  "name" = "anotherName";
 }
 {"someKey" = "newTitle";
  "name" = "someName";
 }
) 
```

请帮我以这种格式对其进行排序：

```
({"someKey" = "title";
  "names": (
    {"name" = "someName"},
    {"name" = "anotherName"}
  )
 },
 {"someKey" = "newTitle";
  "names": (
   {"name" = "someName"}
  )
 }
) 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:17:26.470

据我从您的问题中了解到，您想将单个对象选择到一个字典对象中。

```
NSArray *yourArray=.... /* array which contains this data: ({"someKey" = "title";
  "name" = "someName";
 },
 {"someKey" = "title";
  "name" = "anotherName";
 }
)*/
NSMutableDictionary *newDictionary=[[NSMutableDictionary alloc]init];

for(int i=0;i<[yourArray count];i++){
    [newDictionary setObject:[yourArray objectAtIndex:i] forKey:@"names"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:00:50.447

你只需要遍历当前结构并构建一个以标题为唯一键的新字典：

```
NSEnumerator* arrayEnumerator = [myArray objectEnumerator];

NSDictionary* = dictFromArray;

NSMutableArray* titleArray = [[NSMutableArray alloc] init];
NSMutableDictionary* titleDict = [[NSMutableDictionary alloc] init];

while(dictFromArray = [arrayEnumerator nextObject])
{
    currentTitle = [dictFromArray objectForKey:@"someKey"];
    currentName = [dictFromArray objectForKey:@"name"];

    if([titles containsObject:currentTitle)
    {
    NSMutableDictionary namesArray = [titleDict objectForKey:currentTitle];
    [namesArray addObject:currentName];
    }
    else
    {
        [titles addObject:currentTitle];
        [titleDict addObject:[NSMutableArray arrayWithObject:currentName] forKey:currentTitle];
    }
} 
```

这应该会给你一个看起来像这样的字典：

```
{
    title = 
    (
        someName,
        anotherName
    );

    newTitle = 
    (
        someName
    )
} 
```

为了获得上面的确切结构，我认为这应该可行：

```
NSArray* titleKeys = [titleDict allKeys];

NSEnumerator* keyEnumerator = [titleKeys objectEnumerator];
NSMutableArray* finalArray = [[NSMutableArray alloc] init];
NSString* key;

while (key = [keyEnumerator nextObject])
{
    [finalArray addObject: [NSDictionary 
        dictionaryWithObjects:(key, [dictArray objectForKey:key])
        forKeys:(@"someKey", @"names")]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:35:02.113

```
 ({"someKey" = "title";
 "name" = "someName";
 },
   {"someKey" = "title";
  "name" = "anotherName";
 }
) 
```

假设以上等价于

```
NSArray *array=[NSArray arrayWithObjects:dictionary1,dictionary2,nil]; 
```

然后达到以下结果

```
 (
{
 "someKey" = "title";
"names": (
 {"name" = "someName"},
{"name" = "anotherName"}
  )
 }
) 
```

我们有这个：

```
 //Get name array 
 NSMutableArray *names=[NSMutableArray array];

 for(int i=0;i<[array count];i++)
 {
     NSDictionary *dictionary=[array objectAtIndex:i];
     [names addObject:[dictionary valueForKey:@"name"];
 }

 NSDictionary *newDictionary=[NSDictionary dictionaryWithOjbectsAndKeys:@"someKey",@"title",names,@"names",nil];

//Your final result is an array with one object ( A Dictionary )

NSArray *finalArray=[NSArray arrayWithObjects: newDictionary,nil]; 
```

# haskell - 使用 Text.Combinators.Parsec 进行不区分大小写解析的最简洁方法是什么？

> ID：12937325
> 
> 赞同：16
> 
> 时间：2012-10-17T15:01:38.733
> 
> 标签：haskell, parsec

我正在用 Parsec 编写我的第一个程序。我想解析 MySQL 模式转储，并想想出一种很好的方法来解析代表某些关键字的字符串以不区分大小写的方式。这是一些代码，显示了我用来解析“CREATE”或“create”的方法。有一个更好的方法吗？最好不要求助于 buildExpressionParser 的答案。我在这里采取婴儿步骤。

```
 p_create_t :: GenParser Char st Statement
  p_create_t = do
      x <- (string "CREATE" <|> string "create")
      xs <- manyTill anyChar (char ';')
      return $ CreateTable (x ++ xs) []  -- refine later 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T16:24:41.380

您可以使用字符解析器构建不区分大小写的解析器。

```
-- Match the lowercase or uppercase form of 'c'
caseInsensitiveChar c = char (toLower c) <|> char (toUpper c)

-- Match the string 's', accepting either lowercase or uppercase form of each character 
caseInsensitiveString s = try (mapM caseInsensitiveChar s) <?> "\"" ++ s ++ "\"" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T15:43:37.343

重复我在评论中所说的话，因为这显然很有帮助：

这里简单的大锤解决方案是`toLower`在运行解析器之前简单地映射整个输入，然后以小写形式进行所有关键字匹配。

如果您正在解析某些地方需要不区分大小写而在其他地方需要区分大小写的内容，或者您​​出于美观原因关心保留大小写，这会带来明显的困难。例如，虽然 HTML 标签不区分大小写，但在解析整个网页时将其转换为小写可能是不可取的。即使在编译不区分大小写的编程语言时，转换标识符也可能很烦人，因为任何生成的错误消息都与程序员编写的内容不匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-25T17:12:13.553

不，Parsec 不能*以干净的方式*做到这一点。`string`在原始组合器之上实现，`tokens`该组合器硬编码为使用相等性测试 `(==)`。解析不区分大小写的字符要简单一些，但您可能需要更多。

然而，Parsec 有一个现代分支，称为 [Megaparsec](https://hackage.haskell.org/package/megaparsec)，它为您可能想要的所有内容提供了内置解决方案：

```
λ> parseTest (char' 'a') "b"
parse error at line 1, column 1:
unexpected 'b'
expecting 'A' or 'a'
λ> parseTest (string' "foo") "Foo"
"Foo"
λ> parseTest (string' "foo") "FOO"
"FOO"
λ> parseTest (string' "foo") "fo!"
parse error at line 1, column 1:
unexpected "fo!"
expecting "foo" 
```

请注意最后一条错误消息，它比您可以逐个解析字符更好（在您的特定情况下特别有用）。`string'` 就像 Parsec 一样实现，`string`但使用不区分大小写的比较来比较字符。还有一些`oneOf'`，`noneOf'`在某些情况下可能会有所帮助。

* * *

*披露*：我是 Megaparsec 的作者之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-24T00:16:16.327

`toLower`考虑使用`caseString`from `Text.ParserCombinators.Parsec.Rfc2234`（来自 hsemail 包） ，而不是用 映射整个输入

[Text.ParsecCombinators.Parsec.Rfc2234](https://hackage.haskell.org/package/hsemail-1.3/docs/Text-ParserCombinators-Parsec-Rfc2234.html#1)

```
p_create_t :: GenParser Char st Statement
p_create_t = do
  x <- (caseString "create")
  xs <- manyTill anyChar (char ';')
  return $ CreateTable (x ++ xs) []  -- refine later 
```

因此，现在`x`将是输入中存在的任何大小写变体，而无需更改您的输入。

ps：我知道这是一个古老的问题，我只是想我会添加这个，因为在我搜索类似问题时出现了这个问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-22T04:34:49.313

这个目的有一个包名 parsec-extra。你需要安装这个包然后使用' *caseInsensitiveString* '解析器。

```
 :m Text.Parsec
 :m +Text.Parsec.Extra

*> parseTest   (caseInsensitiveString  "values")   "vaLUES"
"values"

*> parseTest   (caseInsensitiveString  "values")   "VAlues"
"values" 
```

包链接在这里： [https ://hackage.haskell.org/package/parsec-extra](https://hackage.haskell.org/package/parsec-extra)

# r - 为什么不建议从 glmnet 模型中获取回归系数的统计摘要信息？

> ID：12937331
> 
> 赞同：21
> 
> 时间：2012-10-17T15:01:47.890
> 
> 标签：r, statistics, regression, glm, glmnet

我有一个二元结果的回归模型。我用 glmnet 拟合了模型并得到了选定的变量及其系数。

由于 glmnet 不计算变量的重要性，我想将确切的输出（选定的变量及其系数）提供给 glm 以获取信息（标准错误等）。

我搜索了 r 文档，看来我可以使用 glm 中的“方法”选项来指定用户定义的函数。但是我没有这样做，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-07-18T13:44:50.670

> “要求回归系数或其他估计量的标准误差是一个非常自然的问题。原则上，这种标准误差可以很容易地计算出来，例如使用 bootstrap。
> 
> 尽管如此，这个包还是故意不提供它们。这样做的原因是标准误差对于诸如由惩罚估计方法产生的强烈偏差估计不是很有意义。惩罚估计是一种通过引入大量偏差来减少估计量方差的过程。因此，每个估计量的偏差是其均方误差的主要组成部分，而其方差可能只占一小部分。
> 
> 不幸的是，在惩罚回归的大多数应用中，不可能获得足够精确的偏差估计。任何基于 bootstrap 的计算只能对估计的方差进行评估。只有当可靠的无偏估计可用时，才可获得可靠的偏差估计，这在使用惩罚估计的情况下通常不是这种情况。
> 
> 因此，报告惩罚估计的标准误差只能说明部分情况。它可以给人一种非常精确的错误印象，完全忽略了由偏差引起的不准确性。仅基于对估计方差的评估做出置信度陈述肯定是错误的，例如基于自举的置信区间所做的。”

[Jelle Goeman 博士 莱顿大学，R 中惩罚包的作者。](http://cran.r-project.org/web/packages/penalized/vignettes/penalized.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-06T15:10:47.027

有 CRAN 包[hdi](https://cran.r-project.org/web/packages/hdi/index.html)和selectionInference为高维模型提供推理，你可能想看看那些......我还看到人们只是使用 选择的预测器运行 a [，](https://cran.r-project.org/web/packages/selectiveInference/index.html)`glm`但这`glmnet`并不考虑考虑到最佳模型本身的选择过程产生的不确定性......

# matlab - 如何在 matlab 中构建具有以下值的表？

> ID：12937339
> 
> 赞同：1
> 
> 时间：2012-10-17T15:02:10.187
> 
> 标签：matlab

我是 matlab 新手，不知道如何制作一个表格，将这个多项式函数的值与 w=1/(x^2+1) 进行比较

我的尝试

```
 x= [-5,-3,-1, 1, 3,5]

 x =

-5    -3    -1     1     3     5

y= [0.0385, 0.10, 0.50, 0.50, 0.10, 0.0385]

y =

0.0385    0.1000    0.5000    0.5000    0.1000    0.0385

yp=[0.0148,0.06,0.50,-0.50,-0.6,-0.0148]

yp =

0.0148    0.0600    0.5000   -0.5000   -0.6000   -0.0148

hp = hermite (x, y, yp )

hp =

-0.0000   -0.0000    0.0001    0.0004   -0.0011   -0.0100    0.0072    0.0969   -0.0113   -0.4156    0.0051    0.8282 
```

现在只需在表格中比较 hp 和 w 的值。

有人可以帮我吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:12:42.943

我`w`在你的问题中没有看到，但一般来说

```
hp == w 
```

如果向量具有相同的长度，将返回具有该长度的`0`s 和`1`s 的向量，表示两个向量匹配 ( `1`) 或不匹配 ( `0`) 的情况。顺便说一句，请注意，浮点数相等性的比较充满了“问题”，您可能会更好地评估：

```
abs(hp-w) < 10^-6 
```

替换`10^-6`为您的首选容差。

Given your definition for `w` you should be able to write

```
hp == 1/(x.^2+1) 
```

Note the use of the elementwise squaring operator `.^`, which returns a vector of the same length as `x` with each element the square of the corresponding element in `x`. Of course, the expression

```
hp - 1./(x.^2+1) 
```

will return a vector of the differences, which might be what you want.

# javascript - 在级联下拉更改 Jquery 上提交表单

> ID：12937346
> 
> 赞同：0
> 
> 时间：2012-10-17T15:02:34.583
> 
> 标签：javascript, jquery, razor

我有一个在 Jquery 中完成的级联下拉列表，它们工作得很好，但是当第二个 dropDown 更改时，我在提交表单时遇到问题，这是我的代码。

```
$("#Bank").change(function () {
        var bankId = $(this).val();
        $.ajax("/App/BankBranch/ByBank", {
            data: { "id": bankId },
            type: "get", contentType: "application/json",
            success: function (result) {
                var options = $("#id");
                options.html("");
                $.each(result, function () {

                    options.append($("<option />").val(this.Id).text(this.Name));

                });

            }

        });

    }).trigger('change'); //to make the event run on initialization for default value

        $('#id').change(function() {
            this.form.submit();

    }); 
```

表单仅在我从下拉列表中选择一个值时提交，但当第一个下拉列表填充第二个数据时，它不会提交表单。

**更新** 添加的 HTML

```
<h2>@ViewBag.Title</h2>

            <h4>Seleccione Sucursal</h4>
            @using (Html.BeginForm(null, null, FormMethod.Get))
                {
                    <div class="pull-left">
                        @Html.Label("Banco")
                        @{Html.RenderAction("GetAllBanks", "Bank", new { ControlName = "Bank" });}
                      &nbsp;
                   </div>

                <div class="pull-left">
                    @Html.Label("Sucursal")
                    @Html.DropDownList("id", Enumerable.Empty<SelectListItem>(),null ,new {name="id", @class="input-medium"})
                 </div>
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:05:07.937

```
 $('#id').change(function() {
        this.form.submit();; //double semi-colon here, remove and it should be fine

 }); 
```

# javascript - 计算用户在我的网站上加载页面的次数？

> ID：12937349
> 
> 赞同：1
> 
> 时间：2012-10-17T15:02:49.557
> 
> 标签：javascript, jquery

我想知道是否可以使用 JavaScript 计算用户在我的网站上加载页面的次数。大概是这样的？

```
var pageloads = 1;
$(document).ready(function(){
var pageloads =++
}); 
```

但我会在哪里存储它？在饼干里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:06:02.973

如果像 IE7 及以下的旧浏览器不是问题，您可以使用本地存储：

```
$(function(){
     var loaded = parseInt(localStorage.getItem('loaded'), 10),
         loaded_numb = loaded?loaded+1:1;
     localStorage.setItem('loaded', loaded_numb);

     $('body').append('<p>This page was loaded by you '+loaded_numb+' times !');
}); 
```

[**小提琴**](http://jsfiddle.net/8FERC/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:10:24.050

使用 cookie 更容易做到（特别是因为没有理由完全阻止 IE7 及更低版本）

```
var numLoads = parseInt(getCookie('pageLoads'), 10);

if (isNaN(numLoads) || numLoads <= 0) { setCookie('pageLoads', 1); }
else { setCookie('pageLoads', numLoads + 1); }

console.log(getCookie('pageLoads')); 
```

getCookie/setCookie 简单的 get/set 函数（可以在 jsFiddle 中找到）

**[jsFiddle 演示](http://jsfiddle.net/rGKm3/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:05:56.080

您可以将其存储在数据库中。如果您正在寻找监控网页上的流量，您应该查看 Google Analytics [http://www.google.com/analytics/](http://www.google.com/analytics/)。

它们向您显示有多少人访问了您的网站，无论他们是新用户还是返回用户，他们通过您的网站所走的路径，跳出率等。最好的部分是它是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T15:07:04.907

为什么要使用 Javascript 来执行此操作？无论您使用什么服务器，都应该具有存储所有请求、发出请求的 IP 等等的访问日志。甚至还有免费的日志文件分析器，例如 awstats 和 Google Analytics。您应该在服务器端执行此操作，而不是客户端。

如果你*真的*想用 JavaScript 存储它，那么你唯一的选择是 cookie 和 LocalStorage——这两个都是非常短暂的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T15:08:37.933

这是不可能的 - 编辑：跟踪实际用户。

您只能使用 cookie 跟踪浏览器的特定实例。

没有单独使用 javascript 跟踪“用户”这样的事情。不过，您可以可靠地计算用户登录等内容。

# jakarta-ee - Websphere 7 在集群环境中的启动时间

> ID：12937358
> 
> 赞同：1
> 
> 时间：2012-10-17T15:03:15.613
> 
> 标签：jakarta-ee, websphere, cluster-computing

有没有一种简单的方法可以确定上次启动 websphere 集群的时间（不是像涟漪启动那样的单个节点，我需要弄清楚应用程序何时完全关闭）

我想有一些方法可以通过在数据库中写入每个节点的启动时间并比较时间来实现这一点，但也许有一种简单的方法可以使用 mbean 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:56:49.067

根据要求，至少有几种方法可以解决您的问题。如果您需要有关以下任何解决方案的更多详细信息，请尝试将它们写下来。

# 连接到 DMgr 的 JMX 连接器以侦听 JMX 通知的单独进程

此处列出了服务器 MBean 发送的通知：http: //pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc%2Fweb%2FmbeanDocs% [2FServer。 html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc%2Fweb%2FmbeanDocs%2FServer.html)（请参阅“从 MBean 有状态继承的通知”部分）。

## 优点

*   无需修改应用程序
*   没有投票

## 缺点

*   如果 DMgr 已关闭，您将不会收到任何通知
*   如果那个额外的进程崩溃（或根本没有启动），你最终会在你的数据中出现很大的空白
*   需要具有“监控”角色的额外用户帐户

# 同样，一个单独的进程连接到 DMgr 的 JMX 连接器并查询服务器的 JVM 的“stats”属性。

WAS 中的默认 PMI 配置将返回“UpTime”统计信息，它将告诉您特定服务器运行了多长时间。

JVM MBean 记录在这里： [http ://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc%2Fweb%2FmbeanDocs%2FJVM.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc%2Fweb%2FmbeanDocs%2FJVM.html)

“stat”属性中返回的统计信息实现了JVMStats接口：[http ://docs.oracle.com/javaee/5/api/javax/management/j2ee/statistics/JVMStats.html](http://docs.oracle.com/javaee/5/api/javax/management/j2ee/statistics/JVMStats.html)

## 优点

*   无需修改应用程序

## 缺点

*   如果 DMgr 已关闭，您将不会收到任何通知
*   轮询
*   需要具有“监控”角色的额外用户帐户

# 应用程序中的额外组件。

有一些注册应用程序组件的方法，以便 WAS 向它们发送启动/关闭事件。

## 优点

*   无需针对 JMX API 编写任何代码
*   DMgr 的可用性被排除在外

## 缺点

*   您必须能够重建（或至少重新打包）应用程序；如果您不是开发团队的成员，或者您从第三方收到应用程序，这种方法可能不适合

# ios - iOS / XCode：如何通过单击通知或跳板应用程序图标知道该应用程序已启动？

> ID：12937359
> 
> 赞同：8
> 
> 时间：2012-10-17T15:03:16.050
> 
> 标签：ios, cocoa-touch, notifications, push-notification

我想知道是否有办法知道应用程序（可以在后台关闭或打开）是否已通过单击启动：

*   通知（在通知中心）？
*   还是跳板上的应用程序图标？

谢谢 ！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T15:13:26.537

把这段代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UILocalNotification *notification = launchOptions[UIApplicationLaunchOptionsLocalNotificationKey];

    if (notification) {
        // launched from notification
    } else {
        // from the springboard
    }
} 
```

在你的[`UIApplicationDelegate`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3adidFinishLaunchingWithOptions%3a).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T15:13:15.237

[来自关于调度、注册和处理通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1) 的 Apple Docs ：

**iOS 注意：**在 iOS 中，您可以通过检查应用程序状态来确定应用程序是否由于用户点击操作按钮而启动，或者通知是否已发送到已运行的应用程序。在委托的[application:didReceiveRemoteNotification:](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:didReceiveRemoteNotification:)或[application:didReceiveLocalNotification:](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:didReceiveLocalNotification:)方法的实现中，获取 applicationState 属性的值并对其进行评估。如果值为[UIApplicationStateInactive](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/econst/UIApplicationStateInactive)，则用户点击了操作按钮；如果值为[UIApplicationStateActive](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/econst/UIApplicationStateActive)，则应用程序在收到通知时位于最前面。

# ruby-on-rails - Ruby on Rails：check_box_tag 未保存状态

> ID：12937360
> 
> 赞同：1
> 
> 时间：2012-10-17T15:03:19.730
> 
> 标签：ruby-on-rails, ruby, search, checkbox

我`check_box_tag`在尝试在表中搜索存档项目时遇到问题。

```
<%= hidden_field :archive, :value => false %>
<% if current_user.try(:admin?) %>
  Archive: <%= check_box_tag :archive, true, false, :class => "archive" %></H2>
<% else %>
  <%= hidden_field :archive, :value => false %>
<% end %> 
```

因此，如果用户不是管理员，则存档总是错误的。

如果用户是管理员，则存档始终为 false，除非他们选中该复选框。

选中该复选框并提交搜索时，将显示结果，但该框再次变为未选中状态。有没有办法检查它检查？我尝试使用`:selection => params[:archive]`，但这似乎不起作用。提前致谢。

**添加搜索功能**

```
def self.like(text); "%#{text}%"; end

  def self.search(search_archive, search_client)
    _projects = Project.scoped 

    if search_archive.present?
 _projects = _projects.where(:archive => search_archive)
    end
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end

    _projects

  end

end 
```

搜索动作：

```
def search

    @search = params[:archive], params[:client]

    @project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

    @search_performed = !@search.reject! { |c| c.blank? }.empty? 

  @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

网址：

当我搜索 Client: Test 时，已存档检查：

```
http://localhost:3000/search?utf8=%E2%9C%93&%5Bclient%5D=Test&%5D=&archive=true&per_page=10 
```

没有找到正确的项目，现在我取消点击存档：

```
http://localhost:3000/search?utf8=%E2%9C%93&%5Bclient%5D=Test&%5D=&archive%5B%7B%3Avalue%3D%3Efalse%7D%5D=&per_page=10 
```

这再次显示了正确的结果，但该框现在已选中，但应该取消选中，以防我想优化搜索

**修复：** 在我的搜索功能中：

```
if search_archive.present?
  _projects = _projects.where(:archive => search_archive == "true")
end
if !search_archive.present? 
  _projects = _projects.where(:archive => search_archive == "false")
end 
```

在我的搜索视图中：

```
<% if current_user.try(:admin?) %>
  Archive: <%= check_box_tag :archive, true, !!params[:archive], :class => "archive" %></H2>

<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:05:43.890

改变

```
<%= check_box_tag :archive, true, false, :class => "archive" %> 
```

到

```
<%= check_box_tag :archive, true, !!params[:archive], :class => "archive" %> 
```

[`check_box_tag`](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/FormTagHelper.html#M002246)更多信息请参考

# android - 如何使用内置的电子邮件客户端从我的手机内存发送附件？

> ID：12937361
> 
> 赞同：1
> 
> 时间：2012-10-17T15:03:28.237
> 
> 标签：android, email

我正在开发一个应用程序，我需要从我的内部存储中发送文件，即从我的手机显示的路径.../sdcard/Android/data/com.proj.p/files 我认为这是包保存的默认路径它的所有文件。现在如何将它们附加到内置电子邮件客户端假设 gmail..？

# postgresql - Postgres createuser 想要一个密码（不是我的系统密码）

> ID：12937365
> 
> 赞同：2
> 
> 时间：2012-10-17T15:03:52.477
> 
> 标签：postgresql, passwords, osx-lion, homebrew, createuser

我使用自制软件在 OS X Lion 上安装了最新版本的 postgres。路径是正确的：

```
$ which postgres
/usr/local/bin/postgres
$ which psql
/usr/local/bin/psql 
```

brew医生很高兴。但是，当我尝试创建用户时，会发生这种情况：

```
$ createuser myuser
Password:
createuser: could not connect to database postgres: FATAL:  password authentication failed for user <$USER> 
```

密码绝对不是我的常规用户密码，我不知道如何找出它应该是什么。前段时间我可能在安装一堆其他东西的同时使用自制软件安装了不同版本的 postgres，但我不记得了。我确实注意到与我删除的新版本“postgres”一起安装的不同版本的“postgresql”。

不知道这是否是一个线索，但是当我这样做时：

```
$ sudo su - postgres 
```

psql（但不是 postgres）的路径不再正确：

```
postgres$ which postgres
/usr/local/bin/postgres
postgres$ which psql
/usr/bin/psql 
```

可能是一些简单的事情。将不胜感激任何帮助。谢谢！

```
Mac OS X Lion 10.7.5
homebrew 0.9.3
postgres 9.2.1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T15:06:08.293

我通常这样做：

```
createuser -P -s -e myuser 
```

[http://www.postgresql.org/docs/8.4/static/app-createuser.html](http://www.postgresql.org/docs/8.4/static/app-createuser.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:40:35.367

我解决了这个问题：我不得不为我的系统附带的旧版本的 postgres 停止服务器。我没有意识到，但我猜它是在系统启动时开始的。现在我没有问题。

# c# - 删除双引号之间的所有双引号

> ID：12937372
> 
> 赞同：-3
> 
> 时间：2012-10-17T15:04:09.470
> 
> 标签：c#, regex

如果在双引号之间出现，我想在 CSV 文件中使用正则表达式删除所有双引号。目前我正在使用以下正则表达式来执行此操作：

```
inputString = Regex.Replace(inputString, @"([^\^,\r\n])""([^$,\r\n])", @""); 
```

但如果我有两个以上的双引号，它就不起作用，例如：

`"This is my "test" string"`（有效）
`"This "is" my "test" string"`（无效）
`"This is" my test string"`（无效）

我需要一个通用的正则表达式，它可以删除 csv 文件中双引号之间的任何双引号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:19:03.583

在评论中，我的建议是：为什么不直接`string.Replace("\"", "")`用引号括起来呢？在某些情况下，这不是格式吗？您回答说您需要将最终字符串括在引号中。

让我尝试更加明确和清晰，因为这正是我的建议。只需执行以下操作：

```
inputString = "\"" + inputString.Replace("\"", "") + "\""; 
```

这将删除所有引号，然后将最终结果包装在所需的引号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:14:51.523

尝试使用

```
inputString = Regex.Replace(inputString, @"(?<=\".*)\"(?=.*\")", @""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:20:33.300

用这个：

```
inputString = Regex.Replace(inputString, @"([^\^,\r\n])""(?=[^$,\r\n])", @"$1"); 
```

# php - 完整性约束违反PDO方法（创建查询）php

> ID：12937377
> 
> 赞同：2
> 
> 时间：2012-10-17T15:04:22.020
> 
> 标签：php, mysql, pdo, many-to-many

我有 3 个表，分别是子类别、产品和产品类别。

当我创建我的产品时，如果它成功，它将返回成功的product_id，然后它将捕获表单子类别列，以执行将product_id和subcategory_id插入prod_category表的下一个查询。我在单个 php 文件中进行了测试，以测试该功能是否正常工作。它可以插入，但是当我适应我的情况时，它给了我这个错误。

> 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[23000]: 完整性约束违规：1452 无法添加或更新子行：外键约束失败 ( `yokotachi`. `prod_category`, CONSTRAINT `prod_category_ibfk_4`FOREIGN KEY ( `product_id`) REFERENCES `product`( `product_id`) ON DELETE CASCADE ON UPDATE CASCADE) 在第 27 行的 C:\xampp\htdocs\yokotachi\models\Prod_category.php

我确认，有 2 个参数被传递到函数中，但我不知道为什么它不能执行查询。

```
if($_POST){ 
$title = mysql_real_escape_string($_POST['title']);
$model = mysql_real_escape_string($_POST['model']);
$description = stripslashes($_POST['description']);
$feature = stripslashes($_POST['feature']);
$specification = stripslashes($_POST['specification']); 

$subcategory_name = mysql_real_escape_string($_POST['product_subcategory']);

$sub_obj = $subcategory->find_by_sub_category_name($subcategory_name);

$subcategory_id = $sub_obj->sub_category_id;
echo $subcategory_id;
$executed_product_id=
    $product->create($title,$model,$description,$feature,$specification);
echo "im here".$subcategory_id;
echo $executed_product_id;
$responde = $prod_category->create($executed_product_id,$subcategory_id);
if($responde){
    echo "<script>";
    echo "alert(".$executed_product_id.");";
    echo "</script>";
    header("location: ../../../views/admin/product/product_index.php");
}} 
```

我确实看到 1 个帖子是重新索引问题，并要求截断表格。但我不知道如何在我的情况下执行截断查询。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:16:41.803

错误消息似乎告诉您，您尝试在“prod_category”表中使用的产品 ID 号在“product”表中不存在。

您需要在此行执行后找出 $executed_product_id 的值。

```
$executed_product_id=
    $product->create($title,$model,$description,$feature,$specification); 
```

如果它的值不在“产品”表中，那就是你的问题。外键引用要求产品 ID 存在于“产品”中，然后您才能在“产品类别”中使用它。

# inno-setup - IKG 的 Inno 设置：模块 ISID.dll 中地址 XXXXXXX 的访问冲突

> ID：12937385
> 
> 赞同：4
> 
> 时间：2012-10-17T15:04:48.207
> 
> 标签：inno-setup

我正在使用 Inno 设置密钥生成器 (IKG)。我成功调用了 ValidateSerialNumber

```
Valid := ValidateSerialNumber(ExpPath,RegName,'','','','',PrivKey,RegKey); 
```

只要我为 PrivKey 和 RegKey 传递空字符串，该函数就会按预期返回 false。一旦我将值传递给 PrivKey 或 RegKey，我就会收到错误消息：

```
Access violation at address XXXXXXX in module ISID.dll. Read of Address XXXXXX. 
```

ExpPath 或 RegName 的非空值没有此效果。

函数声明如下：

```
function ValidateSerialNumber(InnoKeyFile, User, Orgn, ProdCode, HDD, MAC, PrivateKey, 
Serial: String): Boolean;
external 'ValidateSerialNumber@files:ISID.dll stdcall'; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:09:42.417

使用最有可能使用 Unicode InnoSetup 并且该库与 ANSI 版本一起计数。我[`some manual`](http://www.mjfreelancing.com/downloads/ikg/ikghelppdf.zip)从 2004 年就找到了那个库，那时[`InnoSetup wasn't Unicode`](http://www.jrsoftware.org/files/is5-whatsnew.htm#5.3.0)还没有，所以尝试使用这个 ANSI 导入：

```
function ValidateSerialNumber(InnoKeyFile, User, Orgn, ProdCode, HDD, MAC, PrivateKey,
  Serial: AnsiString): Boolean;
  external 'ValidateSerialNumber@files:ISID.dll stdcall'; 
```

# visual-studio-2012 - VS2012 在打开解决方案时有害地更改了我的 IIS Express 配置文件

> ID：12937389
> 
> 赞同：1
> 
> 时间：2012-10-17T15:04:59.137
> 
> 标签：visual-studio-2012, iis-express

给定以下站点，在 applicationHost.config 中为 IIS Express 7.5 配置

```
<site name="MySite" id="1">
    <application path="/" applicationPool="Clr2IntegratedAppPool">
      <virtualDirectory path="/" physicalPath="path\to\the\site" />
      <virtualDirectory path="/VDir1" physicalPath="path\to\the\site" />
      <virtualDirectory path="/VDir2" physicalPath="path\to\the\site" />
      <virtualDirectory path="/VDir3" physicalPath="path\to\the\site" />
    </application>
    <bindings>
      <binding protocol="http" bindingInformation="*:12345:localhost" />
    </bindings>
</site> 
```

在使用 VS2012 从源代码管理资源管理器 (TFS2010) 打开此解决方案时 - 打开解决方案的行为会更改 XML 结构，以便每个 virtualDirectory 节点都位于其自己的应用程序节点内（VS2012 为我创建）

由于这是一个**遗留的 .NET 2.0**应用程序，它*在*上面显示的虚拟目录中引用控件、文件等 - 只要在配置文件中为它们提供了自己的应用程序，任何来自`/`to`/VDir1`或`/VDir1`to的调用`/VDir3`（例如) 因错误而失败`"The virtual path X maps to another application, which is not allowed"`

我对那个错误没有任何问题，它是有效的，但是有人知道我如何阻止 VS2012 干预我的配置文件。

其他几点

*   applicationHost.config 是源代码控制的（微不足道的）
*   有问题的解决方案设置为“使用 IIS Express”，并在项目属性中设置了主机名、端口等配置设置。

# javascript - 无法在键盘事件初始化方法中初始化 keyCode

> ID：12937391
> 
> 赞同：0
> 
> 时间：2012-10-17T15:05:00.313
> 
> 标签：javascript, event-handling, keyboard-events

我正在尝试模拟键盘事件（对于 F1 - F12）并将其发送到 iframe（在 text.xhtml 中）。但是当我尝试初始化事件时，keyCode 不会改变并显示其默认值为零，因此它不明白按下的键是 F 键之一。我想要的是将键盘事件的 keyCode 设置为 F1-F12 keyCodes。

我也使用过这个网站的[keyCodes](http://www.w3.org/2002/09/tests/keys.html)，但也没有用。这里说[keyCode 属性](http://help.dottoro.com/ljqqripa.php)设置或检索 Unicode。但是这里说[keyCode 属性](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)是只读的。我真的很困惑和累，因为我要处理 3 天。请帮助或要求我进行任何澄清。

提前致谢

这是我的 test.html 代码：

```
<!DOCTYPE html>
<html>
<body>
 <script>
function EventHandler(e) {
    e = e || window.event;
    var code = typeof e.which !== 'undefined' ? e.which : e.keyCode; 
    if(code == 112 || code == 113 
        || code == 114 || code == 115
        || code == 116 || code == 117
        || code == 118 || code == 119
        || code == 120 || code == 121
        || code == 122 || code == 123) {
        e.returnValue = false;
        var target2 = document.getElementById("iFrameId"); 
        var targetBody = target2.contentDocument.body; 
        var keyboardEvent = document.createEvent("KeyboardEvent");
        var initMethod = typeof keyboardEvent.initKeyboardEvent !== 'undefined' ? "initKeyboardEvent" : "initKeyEvent";

        keyboardEvent[initMethod](
                 "keydown", // event type : keydown, keyup, keypress
                 true, // bubbles
                 true, // cancelable
                 window, // viewArg: should be window
                     false, // ctrlKeyArg
                 false, // altKeyArg
                 false, // shiftKeyArg
                 false, // metaKeyArg
                 code, // keyCodeArg : unsigned long the virtual key code, else 0
                 0 // charCodeArgs : unsigned long the Unicode character associated with the depressed key, else 0
                );
        targetBody.dispatchEvent(keyboardEvent);        
        }
    }

</script>

    <form>
    <input type="text" name="first" onkeydown="EventHandler()" > <br>
    <iframe id="iFrameId" src="frame.html" > </iframe>
    </form>
    </body>
    </html> 
```

这是可能的 frame.html 代码：

```
 <!DOCTYPE html>
 <html>
 <body onkeydown="FrameEventHandler(event)"  >
 <script>
function FrameEventHandler(e) {

    e = e || window.event; alert(e);
    var code = typeof e.which !== 'undefined' ? e.which : e.keyCode;

    if(code == 112 )
        alert("F1");
    else if (code == 113)
        alert("F2");
    else if (code == 114)
        alert("F3");
    else if (code == 115)
        alert("F4");
    else if (code == 116)
        alert("F5");
    else if (code == 117)
        alert("F6");
    else if (code == 118)
        alert("F7");
    else if (code == 119)
        alert("F8");
    else if (code == 120)
        alert("F9");
    else if (code == 121)
        alert("F10");
    else if (code == 122)
        alert("F11");
    else if (code == 123)
        alert("F12");
    }
  </script>     
   <form id="frameForm" >
    <p>This is Frame !!!<p> 
   </form>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:36:57.537

好的，我已经通过关于 stackoverflow 的讨论解决了这个问题，[这里提供](https://stackoverflow.com/questions/10455626/keydown-simulation-in-chrome-fires-normally-but-not-the-correct-key/10520017#10520017)。我正在为那些处理同样问题的人写这个答案。现在我的代码是这样的：

```
<!DOCTYPE html>
<html>
<body>
  <script>
  function EventHandler(e) {
    e = e || window.event;
    var code = typeof e.which !== 'undefined' ? e.which : e.keyCode; 
    if(code == 112 || code == 113 
        || code == 114 || code == 115
        || code == 116 || code == 117
        || code == 118 || code == 119
        || code == 120 || code == 121
        || code == 122 || code == 123) {
      e.returnValue = false;
      var target2 = document.getElementById("iFrameId"); 
      var targetBody = target2.contentDocument.body; 
      var keyboardEvent = document.createEvent("KeyboardEvent");

      Object.defineProperty(keyboardEvent, 'keyCode', {
        get : function() {
          return this.keyCodeVal;
        }
      });

      Object.defineProperty(keyboardEvent, 'which', {
        get : function() {
          return this.keyCodeVal;
        }
      });

      var initMethod = typeof keyboardEvent.initKeyboardEvent !== 'undefined' ? "initKeyboardEvent" : "initKeyEvent";

      keyboardEvent[initMethod](
         "keydown", // event type : keydown, keyup, keypress
         true, // bubbles
         true, // cancelable
         window, // viewArg: should be window
         false, // ctrlKeyArg
         false, // altKeyArg
         false, // shiftKeyArg
         false, // metaKeyArg
         code, // keyCodeArg : unsigned long the virtual key code, else 0
         0 // charCodeArgs : unsigned long the Unicode character associated with the depressed key, else 0
      );
      keyboardEvent.keyCodeVal = code;
      targetBody.dispatchEvent(keyboardEvent);        
    }
  }
  </script>

  <form>
    <input type="text" name="first" onkeydown="EventHandler()" > <br>
    <iframe id="iFrameId" src="frame.html" > </iframe>
  </form>
</body>
</html> 
```

# ruby-on-rails - delay_job 不使用 Rails.cache

> ID：12937392
> 
> 赞同：1
> 
> 时间：2012-10-17T15:05:06.287
> 
> 标签：ruby-on-rails, caching, rake, delayed-job

我有一个方法可以访问使用 Rails.cache 存储的值。当我通过控制台执行此方法时，它使用缓存并且一切都很好。但是，当该方法由 delay_job 工作人员执行时，它不使用缓存。

正在使用以下命令启动工作程序：

```
bundle exec rake jobs:work RAILS_ENV=production 
```

如何让 delay_job 使用缓存？

编辑：该应用程序正在使用 dalli_store（一个 memcached 客户端）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:14:40.337

您可能正在使用内存缓存，因此进程不共享此内存。检查您没有将 cache_store 设置为 nil。您可以使用 file_store 或 memcache_store（请参阅[https://github.com/mperham/dalli](https://github.com/mperham/dalli)）

# java - EntityManager 不能使用持久保存元素到数据库

> ID：12937394
> 
> 赞同：6
> 
> 时间：2012-10-17T15:05:10.997
> 
> 标签：java, spring, hibernate, entitymanager

我遇到了使用 EntityManager 将元素持久化到数据库的问题。根据我找到的答案，我在我的 DaoJpa 中尝试了这 4 种方法来做这样的事情，但仍然失败。在这里，我附上了我尝试过的四种方法：

控制器部分的代码：

```
 @Transactional 
   SmartProduct smartProduct = new SmartProduct();
            smartProduct.setName("Dove Soap");
            smartProductDao.persist(smartProduct); 
```

1.道帕：

```
 @Transactional
 public void persist(SmartProduct smartProduct) {
            entityManager.persist(smartProduct); 
```

不工作！

2.

```
@Transactional
public void persist(SmartProduct smartProduct) {
entityManager.persist(smartProduct);
entityManager.flush(); 
```

> 我得到的例外：没有交易正在进行中

3.

```
@Transactional
public void persist(SmartProduct smartProduct) {
EntityTransaction emTransaction = entityManager.getTransaction();
        emTransaction.begin();  
        entityManager.persist(smartProduct);
        emTransaction.commit();
        entityManager.close(); 
```

> 我得到的异常：不允许在共享 EntityManager 上创建事务 - 改用 Spring 事务或 EJB CMT

4.

```
@Transactional
public void persist(SmartProduct smartProduct) {
                    EntityManagerFactory emf = Persistence.createEntityManagerFactory("persistenceUnit");
                EntityManager em = emf.createEntityManager();
                EntityTransaction etx = em.getTransaction();
                etx.begin();
                em.persist(smartProduct);
                etx.commit();
                em.close();
                emf.close(); 
```

> 我得到的异常：应用程序必须提供 JDBC 连接

有人可以帮我解决问题吗？提前谢谢了！

非常感谢 JustinKSU 的帮助。我在 Spring 上下文中添加了注释，然后它就解决了！这是我的 Spring 上下文的先前版本：

```
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager" />

    <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
        <property name="persistenceUnitName" value="persistenceUnit" />
        <property name="dataSource" ref="dataSource" />
    </bean> 
```

添加后

```
<tx:annotation-driven /> 
```

有用：

```
<tx:annotation-driven />
    <bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager" />

    <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
        <property name="persistenceUnitName" value="persistenceUnit" />
        <property name="dataSource" ref="dataSource" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T15:21:56.857

要在 Spring 上下文中启用 @Transactional，您应该具有以下内容：

适合您的 Spring 版本：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd"> 
```

启用注释：

```
<tx:annotation-driven /> 
```

声明你的事务管理器注入你的实体管理器：

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T20:06:04.003

如果您仍然有这个问题并且所有配置都正常，请确保@Transaction注解的方法是公共的，不受保护以便被事务管理器识别/管理。

# java - 如何更改网格 GXT3 中的字体

> ID：12937397
> 
> 赞同：0
> 
> 时间：2012-10-17T15:05:16.693
> 
> 标签：java, gxt

抱歉这个简单的问题，如何更改网格中的字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:03:27.540

如果您正在谈论可能显示在您的某一列中的文本，您可以使用单元格轻松完成此操作。设置`ColumnModel`课程时，您可以将自定义单元格传递给其中一列。然后，使用 html 和 css，您可以根据需要对列进行样式设置。

如果要更改列标题，则只需将一些 SafeHtml 传递给该列的`ColumnConfig.setHeader(SafeHtml)`方法。同样，这将在您设置`ColumnModel`. 这让您可以根据需要设计标题。

如果您确实使用图像或 css，我强烈建议使用`ClientBundle`and`CSSResource`类。

# java - javafx tableview 未从 fxml 加载（为空）

> ID：12937401
> 
> 赞同：0
> 
> 时间：2012-10-17T15:05:30.687
> 
> 标签：java, tableview, javafx-2, fxml

几个小时以来，我一直试图找到错误。我不知道是什么导致了这个问题。我正在使用控制器类和 fxml。关键是，tableview 在初始化函数中为空。不知道为什么。这里是控制器：

```
package controller.popup;

import controller.Controllerable;
import elements.EditableTableCell;
import java.net.URL;
import java.util.ResourceBundle;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TextField;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.stage.WindowEvent;
import javafx.util.Callback;
import model.CDUSettings;
import model.Modelable;
import model.data.AnnouncementData;
import model.data.PopupData;
import model.popup.AnnouncmentsPopupModel;

public class AnnouncementsPopupController implements Controllerable, Initializable
{
// <editor-fold desc="fxml import stuff" defaultstate="collapsed">
    @FXML
    private TableView<PopupData> guiAnnouncementsTable;
    @FXML //  fx:id="guiAnnouncementAddColor"
    private TextField guiAnnouncementAddColor; // Value injected by FXMLLoader
    @FXML //  fx:id="guiAnnouncementAddDisplayedText"
    private TextField guiAnnouncementAddDisplayedText; // Value injected by FXMLLoader
    @FXML //  fx:id="guiAnnouncementAddDuration"
    private TextField guiAnnouncementAddDuration; // Value injected by FXMLLoader
    @FXML //  fx:id="guiAnnouncementAddFontEffect"
    private TextField guiAnnouncementAddFontEffect; // Value injected by FXMLLoader
    @FXML //  fx:id="guiAnnouncementAddFontSize"
    private TextField guiAnnouncementAddFontSize; // Value injected by FXMLLoader
    @FXML //  fx:id="guiAnnouncementAddId"
    private TextField guiAnnouncementAddId; // Value injected by FXMLLoader
    @FXML //  fx:id="guiAnnouncementAddType"
    private TextField guiAnnouncementAddType; // Value injected by FXMLLoader
    @FXML //  fx:id="guiColorColumn"
    private TableColumn<AnnouncementData, String> guiAnnouncementColorColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiDisplayedTextColumn"
    private TableColumn<AnnouncementData, String> guiAnnouncementDisplayedTextColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiDurationColumn"
    private TableColumn<AnnouncementData, String> guiAnnouncementDurationColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiFontEffectColumn"
    private TableColumn<AnnouncementData, String> guiAnnouncementFontEffectColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiFontSizeColumn"
    private TableColumn<AnnouncementData, String> guiAnnouncementFontSizeColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiIdColumn"
    private TableColumn<AnnouncementData, String> guiAnnouncementIdColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiTypeColumn"
    private TableColumn<AnnouncementData, String> guiAnnouncementTypeColumn; // Value injected by FXMLLoader
// </editor-fold>

    private Modelable model = null;

    public AnnouncementsPopupController(){
    connectToModel();
    }

    @Override
    public Modelable getModel(){
    return model;
    }

    @Override
    public void onCloseEvent(WindowEvent we)
    {
        CDUSettings.getInstance().clearAnnouncements();

    for(PopupData announce : model.getData()){
        CDUSettings.getInstance().addAnnouncement((AnnouncementData)announce);
    }
    }

    @Override
    public void initialize(URL url, ResourceBundle rb)
    {
        connectToModel();

        Callback<TableColumn<AnnouncementData, String> ,TableCell<AnnouncementData, String>> editableFactory = 
        new Callback<TableColumn<AnnouncementData, String>, TableCell<AnnouncementData, String>>()
    {
            @Override
            public TableCell call(TableColumn p){
                return new EditableTableCell();
            }
        };

        guiAnnouncementIdColumn.setCellValueFactory(new PropertyValueFactory<AnnouncementData, String>("id"));
        guiAnnouncementIdColumn.setCellFactory(editableFactory);
        guiAnnouncementIdColumn.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<AnnouncementData, String>>()
        {
            @Override
            public void handle(TableColumn.CellEditEvent<AnnouncementData, String> t){
                (t.getTableView().getItems().get(t.getTablePosition().getRow())).setId(t.getNewValue());  
            }
        });

        guiAnnouncementColorColumn.setCellValueFactory(new PropertyValueFactory<AnnouncementData, String>("color"));
        guiAnnouncementColorColumn.setCellFactory(editableFactory);
        guiAnnouncementColorColumn.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<AnnouncementData, String>>()
        {
            @Override
            public void handle(TableColumn.CellEditEvent<AnnouncementData, String> t){
                (t.getTableView().getItems().get(t.getTablePosition().getRow())).setColor(t.getNewValue());  
            }
        });

        guiAnnouncementDisplayedTextColumn.setCellValueFactory(new PropertyValueFactory<AnnouncementData, String>("displayedText"));
        guiAnnouncementDisplayedTextColumn.setCellFactory(editableFactory);
        guiAnnouncementDisplayedTextColumn.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<AnnouncementData, String>>()
        {
            @Override
            public void handle(TableColumn.CellEditEvent<AnnouncementData, String> t){
                (t.getTableView().getItems().get(t.getTablePosition().getRow())).setDisplayedText(t.getNewValue());  
            }
        });

        guiAnnouncementDurationColumn.setCellValueFactory(new PropertyValueFactory<AnnouncementData, String>("duration"));
        guiAnnouncementDurationColumn.setCellFactory(editableFactory);
        guiAnnouncementDurationColumn.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<AnnouncementData, String>>()
        {
            @Override
            public void handle(TableColumn.CellEditEvent<AnnouncementData, String> t){
                (t.getTableView().getItems().get(t.getTablePosition().getRow())).setDuration(t.getNewValue());  
            }
        });

        guiAnnouncementFontEffectColumn.setCellValueFactory(new PropertyValueFactory<AnnouncementData, String>("fontEffect"));
        guiAnnouncementFontEffectColumn.setCellFactory(editableFactory);
        guiAnnouncementFontEffectColumn.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<AnnouncementData, String>>()
        {
            @Override
            public void handle(TableColumn.CellEditEvent<AnnouncementData, String> t){
                (t.getTableView().getItems().get(t.getTablePosition().getRow())).setFontEffect(t.getNewValue());  
            }
        });

        guiAnnouncementFontSizeColumn.setCellValueFactory(new PropertyValueFactory<AnnouncementData, String>("fontSize"));
        guiAnnouncementFontSizeColumn.setCellFactory(editableFactory);
        guiAnnouncementFontSizeColumn.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<AnnouncementData, String>>()
        {
            @Override
            public void handle(TableColumn.CellEditEvent<AnnouncementData, String> t){
                (t.getTableView().getItems().get(t.getTablePosition().getRow())).setFontSize(t.getNewValue());  
            }
        });

        guiAnnouncementTypeColumn.setCellValueFactory(new PropertyValueFactory<AnnouncementData, String>("type"));
        guiAnnouncementTypeColumn.setCellFactory(editableFactory);
        guiAnnouncementTypeColumn.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<AnnouncementData, String>>()
        {
            @Override
            public void handle(TableColumn.CellEditEvent<AnnouncementData, String> t){
                (t.getTableView().getItems().get(t.getTablePosition().getRow())).setType(t.getNewValue());  
            }
        });

        guiAnnouncementsTable.setItems(model.getData());//guiAnnouncementsTable==null at this point
    }

    public void newAddBtnEvent(ActionEvent event)
    {
        model.addDataEntry(new AnnouncementData(guiAnnouncementAddDisplayedText.getText(),
                guiAnnouncementAddId.getText(),
                guiAnnouncementAddColor.getText(),
                guiAnnouncementAddFontEffect.getText(),
                guiAnnouncementAddFontSize.getText(),
                guiAnnouncementAddType.getText(),
                guiAnnouncementAddDuration.getText()));
        guiAnnouncementAddColor.clear();
        guiAnnouncementAddDisplayedText.clear();
        guiAnnouncementAddDuration.clear();
        guiAnnouncementAddFontEffect.clear();
        guiAnnouncementAddFontSize.clear();
        guiAnnouncementAddId.clear();
        guiAnnouncementAddType.clear();

        guiAnnouncementsTable.setItems(model.getData());
    }

    private void connectToModel()
    {
    if(model == null){
        model = new AnnouncmentsPopupModel();
    }
    }
} 
```

这里是fxml：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane id="AnchorPane" minHeight="397.0" minWidth="264.0" prefHeight="397.0" prefWidth="819.0" xmlns:fx="http://javafx.com/fxml" fx:controller="controller.popup.AnnouncementsPopupController">
  <children>
    <Label text="Announcements" AnchorPane.leftAnchor="14.0" AnchorPane.topAnchor="6.0">
      <font>
        <Font name="System Bold" size="15.0" />
      </font>
    </Label>
    <TableView fx:id="guiAnnouncementTable" editable="true" prefHeight="311.0" prefWidth="236.0" tableMenuButtonVisible="true" AnchorPane.bottomAnchor="52.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="34.0">
      <columns>
        <TableColumn minWidth="75.0" prefWidth="100.0" text="Displayed Text" fx:id="guiAnnouncementDisplayedTextColumn" />
        <TableColumn prefWidth="75.0" text="ID" fx:id="guiAnnouncementIdColumn" />
        <TableColumn prefWidth="75.0" text="Color" fx:id="guiAnnouncementColorColumn" />
        <TableColumn prefWidth="75.0" text="FontEffect" fx:id="guiAnnouncementFontEffectColumn" />
        <TableColumn prefWidth="75.0" text="FontSize" fx:id="guiAnnouncementFontSizeColumn" />
        <TableColumn prefWidth="75.0" text="Type" fx:id="guiAnnouncementTypeColumn" />
        <TableColumn prefWidth="75.0" text="Duration" fx:id="guiAnnouncementDurationColumn" />
      </columns>
    </TableView>
    <HBox id="HBox" alignment="CENTER" prefWidth="236.0" spacing="5.0" AnchorPane.bottomAnchor="17.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0">
      <children>
        <TextField id="guiAnnouncementAddDisplayyedText" fx:id="guiAnnouncementAddDisplayedText" prefWidth="200.0" promptText="Displayed Text" />
        <TextField fx:id="guiAnnouncementAddId" prefWidth="79.0" promptText="ID" />
        <TextField fx:id="guiAnnouncementAddColor" prefWidth="79.0" promptText="Color" />
        <TextField fx:id="guiAnnouncementAddFontEffect" prefWidth="79.0" promptText="Font Effect" />
        <TextField fx:id="guiAnnouncementAddFontSize" prefWidth="79.0" promptText="Font Size" />
        <TextField fx:id="guiAnnouncementAddType" prefWidth="79.0" promptText="Type" />
        <TextField fx:id="guiAnnouncementAddDuration" prefWidth="79.0" promptText="Duration" />
        <Button mnemonicParsing="false" onAction="#newAddBtnEvent" text="Add" />
      </children>
    </HBox>
  </children>
</AnchorPane> 
```

生无可恋 ;（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:10:29.343

我猜你在代码中写错了。在您的 java 文件中：

```
private TableView<PopupData> guiAnnouncement**s**Table; 
```

变量名中有“s”。在您的 fxml 中：

```
 <TableView fx:id="guiAnnouncementTable" 
```

没有**s**

# javascript - 如何删除从其他站点加载数据的图像链接？

> ID：12937402
> 
> 赞同：1
> 
> 时间：2012-10-17T15:05:31.200
> 
> 标签：javascript, jquery

我在我的 html 页面中使用此代码来显示天气数据：

```
<!-- Begin ParsTOOLs.com Weather Code -->
<div  style="display:none;">
   <a href="http://iushop.ir">
      <h1>Weather</h1>
   </a>
</div>
<script language="javascript" src="http://www.ParstoolS.com/weather/code2/?city=IRXX0018&bgcolor=FFFFFF&textcolor=000000&width=180&height=300"></script>
<!-- End ‍Weather code --> 
```

当我看到 html 页面时，它会连接到**parstools.com**并从中加载数据。数据有一个图像，它设置了一个链接。

如何使用 jquery 删除图像链接（只显示没有任何链接的图像）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:10:43.680

您可以`display: none;`在您的 CSS 中使用该链接不被查看。

# wpf - 如何向 WhistlerBlue ListView 添加交替行样式

> ID：12937404
> 
> 赞同：2
> 
> 时间：2012-10-17T15:05:36.007
> 
> 标签：wpf, listview, styles, codeplex, alternating

我有一个 ListView 样式，使用 WhistlerBlue.xaml 资源字典，从[Codeplex 下载： WPF DataGrid Themes from Silverlight](http://datagridthemesfromsl.codeplex.com/)。

我希望交替（奇数和偶数）行具有不同的背景颜色。

我已将以下代码添加到默认 WhistlerBlue`ListViewItem`样式（在该 `ControlTemplate.Triggers`部分中）：

```
 <Trigger Property="ItemsControl.AlternationIndex" Value="0">
          <Setter Property="Background" Value="White"></Setter>
     </Trigger>
     <Trigger Property="ItemsControl.AlternationIndex" Value="1">
          <Setter Property="Background" Value="AliceBlue"></Setter>
     </Trigger> 
```

我还将 ListView 样式的`AlternatingCount`属性设置为`2`，但交替样式触发器仍然不起作用。

任何指针将不胜感激。

我在下面粘贴了完整的 ListViewItemStyle。

```
<Style TargetType="{x:Type ListViewItem}">
    <Setter Property="FocusVisualStyle" Value="{StaticResource ListViewItemFocusVisual}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Margin" Value="0,0,0,1" />
    <Setter Property="Padding" Value="5,2,5,2" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="Foreground" Value="{StaticResource OutsideFontColor}"/>
    <Setter Property="Padding" Value="3" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListViewItem}">
                <ControlTemplate.Resources>
                    <Storyboard x:Key="HoverOn">
                        <DoubleAnimation Duration="00:00:00.00" Storyboard.TargetName="BackgroundGradientOver" Storyboard.TargetProperty="Opacity" To="0.73"/>
                    </Storyboard>
                    <Storyboard x:Key="HoverOff">
                        <DoubleAnimation Duration="00:00:00.00" Storyboard.TargetName="BackgroundGradientOver" Storyboard.TargetProperty="Opacity" To="0"/>
                    </Storyboard>
                    <Storyboard x:Key="SelectedOn">
                        <DoubleAnimation Duration="00:00:00.00" Storyboard.TargetName="BackgroundGradientSelected" Storyboard.TargetProperty="Opacity" To="0.84"/>
                        <DoubleAnimation Duration="00:00:00.00" Storyboard.TargetName="BackgroundGradientSelectedDisabled" Storyboard.TargetProperty="Opacity" To="1"/>
                    </Storyboard>
                    <Storyboard x:Key="SelectedOff">
                        <DoubleAnimation Duration="00:00:00.00" Storyboard.TargetName="BackgroundGradientSelected" Storyboard.TargetProperty="Opacity" To="0"/>
                        <DoubleAnimation Duration="00:00:00.00" Storyboard.TargetName="BackgroundGradientSelectedDisabled" Storyboard.TargetProperty="Opacity" To="0"/>
                    </Storyboard>
                </ControlTemplate.Resources>
                <Border SnapsToDevicePixels="true" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2" x:Name="border">
                    <Grid Margin="0">
                        <Rectangle x:Name="BackgroundGradientOver" Fill="{StaticResource hoverGradient}" Stroke="{StaticResource hoverStroke}" RadiusX="2" RadiusY="2" Opacity="0"/>
                        <Rectangle x:Name="BackgroundGradientSelectedDisabled" Fill="{StaticResource grayGradient}" Stroke="#7F8E8F8F" RadiusX="2" RadiusY="2" Opacity="0"/>
                        <Rectangle x:Name="BackgroundGradientSelected" Fill="{StaticResource BtnOverFill}" Stroke="{StaticResource selectedStroke}" RadiusX="2" RadiusY="2" Opacity="0"/>
                        <Rectangle x:Name="BackgroundHighlight" Margin="1" Stroke="#A0FFFFFF" RadiusX="1" RadiusY="1"/>
                        <GridViewRowPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Margin="0,2,0,2" VerticalAlignment="Stretch" />
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                        <Setter Property="Background" Value="White"></Setter>
                    </Trigger>
                    <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                        <Setter Property="Background" Value="AliceBlue"></Setter>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.ExitActions>
                            <BeginStoryboard Storyboard="{StaticResource HoverOff}" x:Name="HoverOff_BeginStoryboard"/>
                        </Trigger.ExitActions>
                        <Trigger.EnterActions>
                            <BeginStoryboard Storyboard="{StaticResource HoverOn}"/>
                        </Trigger.EnterActions>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="true">
                        <Trigger.ExitActions>
                            <BeginStoryboard x:Name="SelectedOff_BeginStoryboard" Storyboard="{StaticResource SelectedOff}"/>
                        </Trigger.ExitActions>
                        <Trigger.EnterActions>
                            <BeginStoryboard x:Name="SelectedOn_BeginStoryboard" Storyboard="{StaticResource SelectedOn}"/>
                        </Trigger.EnterActions>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{DynamicResource DisabledForegroundBrush}" />
                        <Setter Property="Visibility" TargetName="BackgroundGradientSelected" Value="Hidden"/>
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="true" />
                            <Condition Property="Selector.IsSelectionActive" Value="false" />
                        </MultiTrigger.Conditions>
                    </MultiTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:12:26.847

显然，`ListViewItem` `ControlTemplate`它覆盖了交替行颜色的样式触发器。

由于我没有使用`ControlTemplate`（我已将它们设置`Duration`为 0）中的情节提要，因此我只使用样式触发器解决了这个问题，而没有设置模板的样式，如下所示。

```
<Style TargetType="{x:Type ListViewItem}" x:Key="ListViewItemStyle">
        <Setter Property="FocusVisualStyle" Value="{StaticResource ListViewItemFocusVisual}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="5,2,5,2" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Height" Value="23px" />
        <Setter Property="Foreground" Value="{StaticResource OutsideFontColor}"/>
        <Style.Triggers>
            <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                <Setter Property="Background" Value="White" />
            </Trigger>
            <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                <Setter Property="Background" Value="AliceBlue" />
                <Setter Property="BorderBrush" Value="AliceBlue" />
            </Trigger>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="{StaticResource BtnOverFill}" />
                <Setter Property="BorderBrush" Value="{StaticResource selectedStroke}" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="BorderBrush" Value="#FFbbe9fd" />
            </Trigger>
        </Style.Triggers>
</Style> 
```

我知道如果需要设置 ContolTemplate 样式，这并不能解决问题，但至少这足以满足我的要求。

希望它对将来的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:47:37.080

在 ExpressionDark.xaml 例如：

找到这个：`<Style TargetType="{x:Type ListViewItem}">`

并找到`<Rectangle x:Name="Background"..`

将属性值更改`Fill`为`Fill="{TemplateBinding Background}"`

并且，在里面`<ControlTemplate.Triggers>`添加这个：

```
<Trigger Property="ItemsControl.AlternationIndex" Value="1">
    <Setter Property="Background" Value="#FF474A51"></Setter>
</Trigger> 
```

希望这对任何人都有帮助，否则作为 wpf 的初学者，我很难找到特别是我在 vb.net 上的东西，很难使用 mvvm 获得直接示例代码等：（残酷的世界。

# java - Android App加载时突然摔倒

> ID：12937408
> 
> 赞同：0
> 
> 时间：2012-10-17T15:05:55.873
> 
> 标签：java, android, runtime-error

我的应用程序突然无法在页面之间交换，并且出现以下错误，我无法弄清楚我所做的更改，或者为了做到这一点而进行的更改。这是错误。我不知道您需要我发布哪个代码，所以请告诉我；

```
10-17 16:02:51.720: D/dalvikvm(4436): newInstance failed: no <init>()
10-17 16:02:51.720: D/AndroidRuntime(4436): Shutting down VM
10-17 16:02:51.720: W/dalvikvm(4436): threadid=1: thread exiting with uncaught exception (group=0x40c6a1f8)
10-17 16:02:51.730: E/AndroidRuntime(4436): FATAL EXCEPTION: main
10-17 16:02:51.730: E/AndroidRuntime(4436): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.directenquiries.assessment.tool/com.directenquiries.assessment.tool.AddAsset}: java.lang.InstantiationException: can't instantiate class com.directenquiries.assessment.tool.AddAsset; no empty constructor
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1894)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.os.Looper.loop(Looper.java:137)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.app.ActivityThread.main(ActivityThread.java:4517)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at java.lang.reflect.Method.invokeNative(Native Method)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at java.lang.reflect.Method.invoke(Method.java:511)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at dalvik.system.NativeStart.main(Native Method)
10-17 16:02:51.730: E/AndroidRuntime(4436): Caused by: java.lang.InstantiationException: can't instantiate class com.directenquiries.assessment.tool.AddAsset; no empty constructor
10-17 16:02:51.730: E/AndroidRuntime(4436):     at java.lang.Class.newInstanceImpl(Native Method)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at java.lang.Class.newInstance(Class.java:1319)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.app.Instrumentation.newActivity(Instrumentation.java:1027)
10-17 16:02:51.730: E/AndroidRuntime(4436):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1885)
10-17 16:02:51.730: E/AndroidRuntime(4436):     ... 11 more 
```

汤姆

编辑：添加资产代码

```
 public AddAsset(View view){

        String Barcode = tbBarcode.getText().toString();
        String LongDescription = tbLongDescription.getText().toString();
        String LocalReference = tbLocalReference.getText().toString();
        String Quantity = tbQuantity.getText().toString();

        String VisualCondition = "VisualCondition";

        String NewAssetStationObjectID = DBFunctions.getNextID(Global.StationID, "StationObjects");

        if(DBFunctions.isBarcodeUnique(Barcode, StationObjectID).equals("True")){

            DBFunctions.addAsset(NewAssetStationObjectID, Barcode, AssetType, AssetGroup, AssetSubGroup, " ", LocalReference, LongDescription, VisualCondition, Quantity, StationObjectID, " ", "Y");   

        } else {

            ShowAlert("Duplicate Barcode", "This barcode has already been used");
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:08:28.297

你的类`AddAsset`缺少一个空的（又名 default ）构造函数

尝试添加构造函数

```
public AddAsset() { } 
```

注意

```
public AddAsset(View view) { ... } 
```

不是一个空的构造函数，因为它有参数。

# java - Java 中的条件运算符抛出意外的 NullPointerException

> ID：12937410
> 
> 赞同：7
> 
> 时间：2012-10-17T15:05:57.810
> 
> 标签：java, nullpointerexception, conditional-operator

> **可能的重复：**
> [NullPointerException 通过 Java 三元运算符的自动装箱行为](https://stackoverflow.com/questions/12763983/nullpointerexception-through-auto-boxing-behavior-of-java-ternary-operator)

以下代码使用简单的条件运算符。

```
public class Main
{
    public static void main(String[] args)
    {
        Integer exp1 = true ? null : 5;
        Integer exp2 = true ? null : true ? null : 50;

        System.out.println("exp1 = " +exp1+" exp2 = "+exp2);

        Integer exp3 = false ?  5 : true ? null: 50; //Causes the NullPointerException to be thrown.

        System.out.println("exp3 = "+exp3);
    }
} 
```

这段代码编译得很好。所有的表达式最终都试图分别分配`null`给`Integer`类型变量`exp1`,`exp2`和`exp3`。

前两种情况**不会**引发任何异常并产生`exp1 = null exp2 = null`显而易见的结果。

然而，最后一种情况，如果你仔细看，你会看到它也尝试分配`null`类型`Integer`变量`exp3`，看起来与前两种情况类似，但它会导致`NulllPointerException`抛出。为什么会这样？

在我发布我的问题之前，我已经提到了[这个](https://stackoverflow.com/q/8098953)很好的问题，但在这种情况下，我找不到 JLS 指定的规则适用于此处。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T15:10:59.013

`null`正在拆箱到 an `int`，因为分配是由于`5`an ，而`int`不是 an `Integer`。但是，a`null`不能表示为`int`，因此`NullPointerException`.

如果您替换`5`为`new Integer(5)`，那么它将起作用。

```
Integer exp3 = false ? new Integer(5) : true ? null : 50; 
```

### 也可以看看：

*   [Java 语言规范 - 第 15.25 章 - 条件运算符`? :`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)
*   [布尔值、条件运算符和自动装箱](https://stackoverflow.com/questions/3882095/booleans-conditional-operators-and-autoboxing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:11:39.013

它正在拆箱，因此它与表达式`null`中的其他两个值的类型相同。不要触发这个。`?:``exp1``exp2`

```
public class Foo {
    public static void main(String...args) {
        Integer exp3 = false ?  5 : true ? null: 50; //Causes the NullPointerException to be thrown.
        System.out.println("exp3 = "+exp3);
    }  
} 
```

运行后`javap -c Foo`我们得到这个反汇编：

```
public static void main(java.lang.String[]);
  Code:
   0:   aconst_null
   1:   checkcast   #2; //class java/lang/Integer
   4:   invokevirtual   #3; //Method java/lang/Integer.intValue:()I
   7:   invokestatic    #4; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   10:  astore_1
   11:  getstatic   #5; //Field java/lang/System.out:Ljava/io/PrintStream;
   14:  new #6; //class java/lang/StringBuilder
   17:  dup
   .... 
```

注 4：`invokevirtual #3`——它正试图在此处拆箱`null`。

# c - 二进制文件的大小如何影响执行速度

> ID：12937412
> 
> 赞同：8
> 
> 时间：2012-10-17T15:06:01.193
> 
> 标签：c, performance, numerical

二进制文件的大小如何影响执行速度？具体来说，我说的是用 ANSI-C 编写的代码，使用 gnu 或 intel 编译器翻译成机器语言。二进制文件的目标平台是运行 Linux 操作系统的具有英特尔或 AMD 多核 CPU 的现代计算机。该代码可能使用 openMP 并行执行数值计算，二进制文件可能有几兆字节。

请注意，在任何情况下，执行时间都将远大于加载代码和库所需的时间。我想到了用于求解大型常微分方程系统的非常具体的代码，用于模拟动力学方程，这些方程通常受 CPU 限制，系统大小适中，但也可能受内存限制。

我在问小二进制大小是否应该成为高效代码的设计标准，或者我是否总是可以优先考虑显式代码（最终重复可以作为函数实现的代码块）和编译器优化，例如循环展开等。

我知道分析技术以及如何将它们应用于特定问题，但我想知道可以在多大程度上做出一般性陈述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:15:59.443

CPU 有缓存。

*与 CPU 速度相比*，对系统内存的访问速度较慢。这就是 CPU 具有缓存（由超快内存制成）的原因。

每个级别的 CPU 缓存都有不同的大小和速度。

因此，*为了达到尽可能大的速度*，避免在最低级别（不幸的是，这也是最小的缓存）刷新缓存是至关重要的。

两者都`code`将`data`强制刷新缓存。所以大小在这两种情况下都很重要。

例如：当`Code` *您*`jump`或`call`. 当您在 a加载 a 时，`Data` *可能会*产生缓存未命中。`variable``remote address`

还有其他一些问题`alignment`可能会极大地影响速度，但没有什么比 CPU 缓存未命中更昂贵（重新加载 CPU 缓存涉及 CPU 内核同步，这不是一件容易的事：它可能需要大约 250 个 CPU 周期！）。

在不涉及特定于平台的细节的情况下，这就是可以说的。

结论：保持简单。而且小就是美。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:23:28.507

CPU 只执行代码的一部分，所以它是代码的内容，以及你在其中移动多少，决定了速度。

如果你有 10Mb 的代码，并且前 9Mb 只在启动时执行一次，那么这 9Mb 是慢还是 90Mb 或 90kb 都没有关系。如果 CPU 将 99.99% 的时间花在一些小而紧凑的循环中进行一些非常有效的计算，那么它会很快，如果它必须一次又一次地运行 100,000 行代码，它可能会慢得多。

优化是要查看 CPU 大部分时间花在哪里，并使代码在获得答案所需的 CPU 周期数上尽可能高效。有时这可能意味着在其外部添加大量额外的“准备”代码，以使主要部分的工作更容易/更快。

在某些系统中，二进制大小是主要关注点（EG 嵌入式设备），但在其他系统中，它几乎完全无关紧要。

另见： http: [//www.codeproject.com/Articles/6154/Writing-Efficient-C-and-C-Code-Optimization](http://www.codeproject.com/Articles/6154/Writing-Efficient-C-and-C-Code-Optimization)

# javascript - 数据绑定javascript淘汰赛

> ID：12937418
> 
> 赞同：-1
> 
> 时间：2012-10-17T15:06:16.630
> 
> 标签：javascript, knockout.js

这关于 javascript 淘汰赛

HTML

如果运行这一行，我会得到 [Object, object]

```
 <p><select data-bind="options: availableRole"></select></p> 
```

如果我运行这一行，我什么也得不到

```
 <p><select data-bind="options: availableRoles, value: availableRoles().title, optionText: 'availableRoles().title'"></select></p> 
```

JAVASCRIPT

```
 self.availableRoles = [

        { title: "Programmer" },
        { title: "Designer" }

    ]; 
```

我如何显示标题程序员和设计师？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:09:44.073

您可以使用`optionsText`绑定来绑定到[文档](http://knockoutjs.com/documentation/options-binding.html)中描述的子值：

```
<select data-bind="options: availableRoles, optionsText: 'title'"></select> 
```

您可以[在此处查看一个工作示例](http://jsfiddle.net/uZjAh/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:10:26.673

`optionsText`您应该在绑定中提供属性名称：

```
<select data-bind="options: availableRoles, optionText: 'title'"></select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:11:31.470

```
<select data-bind="options: availableRoles, optionsText: 'title', optionsCaption: 'Choose...'"></select> 
```

有关这方面的更多信息，请参阅：[“选项”绑定](http://knockoutjs.com/documentation/options-binding.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:41:17.927

所有这些答案都缺少的一件事是能够跟踪您在视图模型中选择的角色。为此，除了[选项绑定之外，您还可以使用](http://knockoutjs.com/documentation/options-binding.html)[值](http://knockoutjs.com/documentation/value-binding.html)绑定。

这是一个有效的[jsfiddle](http://jsfiddle.net/daedalus28/rpNWj/)：

为了方便起见，这是粘贴的代码：

```
var viewModel = {
    availableRoles: [
        { title: "Programmer"},
        { title: "Designer" }
    ],
    selectedRole: ko.observable()
};
ko.applyBindings(viewModel);​

<select data-bind="options: availableRoles, optionsText: 'title', optionsCaption: 'Select...', value: selectedRole"></select>
<pre data-bind="text: JSON.stringify(ko.toJS(selectedRole), null, 2)"></pre> 
```

​</p>

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T17:15:37.613

解决方案是：

```
 <select data-bind="options: availableRoles, optionsText: 'title'"></select> 
```

# function - Clojure：使用宏或 def 的函数参数/签名

> ID：12937420
> 
> 赞同：4
> 
> 时间：2012-10-17T15:06:26.780
> 
> 标签：function, clojure, arguments, definition, reduce

我有许多相同长签名的功能（为简单起见在此缩短）：

```
(defn f 
      [x & {:keys [a b c d e f g h]
            :or [a false b false c false d false e false f false g false h false]}]
      a) 
```

我希望事先使用宏、函数甚至 def 来存储这个通用签名：

```
(def args `[a b c d e f g h])

(defn args [] `[a b c d e f g h])

(defmacro args [] `[a b c d e f g h]) 
```

但是所有这些，当我插入时

```
(defn f 
      [x & {:keys (args)
            :or [a false b false c false d false e false f false g false h false]}]
      a) 
```

最终出现错误，例如

```
CompilerException java.lang.RuntimeException: Unable to resolve symbol: a in this context, compiling:(NO_SOURCE_PATH:1) 
```

所以我的两个问题是：

1.  有什么方法可以定义和使用这样的 common`args`吗？

2.  如果`args`可以定义这样的，我也想减少它以获得`:or`参数：`[a false b false c false d false e false f false g false h false]`。这将如何完成？（我问的是，如果一个工作定义`args`可能足够奇怪以至于这不再简单。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:14:29.223

问题是 a 中的参数向量内的东西`defn`没有被评估。但是，您可以定义自己的 版本`defn`，如下所示：

```
user=> (defmacro mydefn [name & body] `(defn ~name ~'[a b c] ~@body))
#'user/mydefn
user=> (mydefn f (+ a b))
#'user/f
user=> (f 1 2 4)
3 
```

注意`~'`参数的需要。否则 syntax-quote ( ```) 会将符号限定为`user.a`etc。

# syntax - 如何在一个 lucene 查询中查询范围和缺失？

> ID：12937432
> 
> 赞同：0
> 
> 时间：2012-10-17T15:07:13.790
> 
> 标签：syntax, solr, lucene

查询：

```
start: [ 2012101700 TO * ] OR end: [* TO 2012101700] 
```

会给我今天之后开始或今天之前结束的结果。

此查询将为我提供缺少开始或结束的所有记录：

```
 -(end: [ * TO *] OR start: [* TO *]) 
```

（*奇怪的括号是由于查询解析器中的怪异，请参阅：[Solr query with grouping not working](https://stackoverflow.com/q/12935540/442351)*）

但是，我想将这些组合起来，以便我的结果是结果在定义范围内或完全缺失的所有记录。这个查询不起作用，因为 [* TO *] 破坏了它。

```
(end: [ * TO 2012101700] OR start: [2012101700 TO *])
 OR -(end: [ * TO *] 
 OR start: [* TO *]) 
```

有什么建议么？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:37:19.720

Lucene 不能很好地处理“OR NOT”样式的查询。

原因在于 Lucene 如何存储它的数据。它没有要迭代的表，只是过滤掉与给定查询匹配的任何内容。我实际上必须找到文件。“OR NOT”查询，它可以找到所有匹配的文档，并消除它们，但它找不到不匹配的文档，因为它没有搜索它们的条件。

另一种思考方式可能是，在查询数据库时，您可能以 开头`Select * from tablename`，这就是您缺少的信息。一种识别一组文档的方法，类似于您开始使用的记录表。

几个实现可以使这样的工作。任何一个：

*   为空的开始日期和结束日期存储一个实际值（占位符），然后只搜索该值。这可能是最好的选择。
*   并且查询空开始或结束到您知道的术语查询将匹配您感兴趣的所有记录（类似于您在上面提到的其他问题中遇到的查询），例如：

    ```
    (end: [ * TO 2012101700] OR start: [2012101700 TO *])
    OR (term:GuaranteedHit AND -(end: [ * TO *] 
    OR start: [* TO *])) 
    ```

您可能需要添加一个字段来完成此操作，这可能会使第一个选项更明智。但是，添加一个字段将允许您更直接地模拟类似数据库的结构，方法是允许您定义一个字段以像表名一样使用。

或者，如果您使用 SOLR 的 uniquekey 功能，您可以使用`id:[* TO *]`查找所有文档，或者如果您愿意从对象手动构建查询，您可以使用[MatchAllDocsQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/search/MatchAllDocsQuery.html)。

另外，我不希望第二个选项有出色的表现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:58:33.460

查询：

```
-(start: [ * TO 2012101700] OR end: [2012101700 TO *]) 
```

实际上相当于：

```
(end: [ * TO 2012101700] OR start: [2012101700 TO *])
OR -(end: [ * TO *] 
OR start: [* TO *]) 
```

[* TO *] 术语是多余的，因为其他术语包括那些字段超出范围的文档，包括根本不包括范围！

# c# - Visual Studio 引用 ServiceStack SOAP 方法

> ID：12937435
> 
> 赞同：4
> 
> 时间：2012-10-17T15:07:22.890
> 
> 标签：c#, visual-studio-2010, servicestack

我有一个使用 ServiceStack 的简单 API 设置。我使用以下代码使其运行：

```
namespace TheGuest.Test
{
    [DataContract]
    [Description("A sample web service.")]
    public class Greet
    {
        [DataMember]
        public string Name { get; set; }
    }

    [DataContract]
    public class GreetResponse
    {
        [DataMember]
        public string Result { get; set; }
    }

    /// <summary>
    /// An example of a very basic web service.
    /// </summary>
    public class GreetService : IService<Greet>
    {
        public object Execute(Greet request)
        {
            return new GreetResponse { Result = "Hello " + request.Name };
        }
    }

    public static class Constants
    {
        public const string DefaultNamespaceV1 = "http://my/custom/namespace";
    }

    public class MyAppHost : AppHostBase
    {
        // Tell Service Stack the name of your application and where to find your web services.
        public MyAppHost()
            : base("My Web Services", typeof(GreetService).Assembly)
        {
        }

        public override void Configure(Container container)
        {
            SetConfig(new EndpointHostConfig { WsdlServiceNamespace = Constants.DefaultNamespaceV1 });

            // Register user-defined REST-ful URLs.
            Routes
                .Add<Greet>("/hello")
                .Add<Greet>("/hello/{Name}")
                .Add<Greet>("/hello/{Name*}");
        }
    }

    public class MvcApplication : HttpApplication
    {
        protected void Application_Start()
        {
            new MyAppHost().Init();
        }
    }
} 
```

并将以下行添加到 AssemblyInfo.cs：

```
[assembly: ContractNamespace("http://my/custom/namespace", ClrNamespace = "TheGuest.Test")] 
```

它将生成以下 WSDL：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions name="Soap12" 
    targetNamespace="http://my/custom/namespace" 
    xmlns:svc="http://my/custom/namespace" 
    xmlns:tns="http://my/custom/namespace" 

    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
    xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" 
    xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" 
    xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" 
    xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" 
    xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" 
    xmlns:wsa10="http://www.w3.org/2005/08/addressing" 
    xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex">

    <wsdl:types>
        <xs:schema xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="anyType" nillable="true" type="xs:anyType" />
  <xs:element name="anyURI" nillable="true" type="xs:anyURI" />
  <xs:element name="base64Binary" nillable="true" type="xs:base64Binary" />
  <xs:element name="boolean" nillable="true" type="xs:boolean" />
  <xs:element name="byte" nillable="true" type="xs:byte" />
  <xs:element name="dateTime" nillable="true" type="xs:dateTime" />
  <xs:element name="decimal" nillable="true" type="xs:decimal" />
  <xs:element name="double" nillable="true" type="xs:double" />
  <xs:element name="float" nillable="true" type="xs:float" />
  <xs:element name="int" nillable="true" type="xs:int" />
  <xs:element name="long" nillable="true" type="xs:long" />
  <xs:element name="QName" nillable="true" type="xs:QName" />
  <xs:element name="short" nillable="true" type="xs:short" />
  <xs:element name="string" nillable="true" type="xs:string" />
  <xs:element name="unsignedByte" nillable="true" type="xs:unsignedByte" />
  <xs:element name="unsignedInt" nillable="true" type="xs:unsignedInt" />
  <xs:element name="unsignedLong" nillable="true" type="xs:unsignedLong" />
  <xs:element name="unsignedShort" nillable="true" type="xs:unsignedShort" />
  <xs:element name="char" nillable="true" type="tns:char" />
  <xs:simpleType name="char">
    <xs:restriction base="xs:int" />
  </xs:simpleType>
  <xs:element name="duration" nillable="true" type="tns:duration" />
  <xs:simpleType name="duration">
    <xs:restriction base="xs:duration">
      <xs:pattern value="\-?P(\d*D)?(T(\d*H)?(\d*M)?(\d*(\.\d*)?S)?)?" />
      <xs:minInclusive value="-P10675199DT2H48M5.4775808S" />
      <xs:maxInclusive value="P10675199DT2H48M5.4775807S" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="guid" nillable="true" type="tns:guid" />
  <xs:simpleType name="guid">
    <xs:restriction base="xs:string">
      <xs:pattern value="[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}" />
    </xs:restriction>
  </xs:simpleType>
  <xs:attribute name="FactoryType" type="xs:QName" />
  <xs:attribute name="Id" type="xs:ID" />
  <xs:attribute name="Ref" type="xs:IDREF" />
</xs:schema>
<xs:schema xmlns:tns="http://my/custom/namespace" elementFormDefault="qualified" targetNamespace="http://my/custom/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:complexType name="Greet">
    <xs:sequence>
      <xs:element minOccurs="0" name="Name" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Greet" nillable="true" type="tns:Greet" />
</xs:schema>
    </wsdl:types>

    <wsdl:message name="GreetIn">
        <wsdl:part name="parameters" element="tns:Greet" />
    </wsdl:message>

    <wsdl:portType name="ISyncReply">

    </wsdl:portType>

    <wsdl:portType name="IOneWay">
    <wsdl:operation name="Greet">
        <wsdl:input message="svc:GreetIn" />
    </wsdl:operation>
    </wsdl:portType>

    <wsdl:binding name="WSHttpBinding_ISyncReply" type="svc:ISyncReply">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />

    </wsdl:binding>

    <wsdl:binding name="WSHttpBinding_IOneWay" type="svc:IOneWay">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="Greet">
      <soap:operation soapAction="http://schemas.servicestack.net/types/Greet" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
    </wsdl:operation>
    </wsdl:binding>

    <wsdl:service name="SyncReply">
        <wsdl:port name="WSHttpBinding_ISyncReply" binding="svc:WSHttpBinding_ISyncReply">
            <soap:address location="http://localhost:50472/test/soap12" />
        </wsdl:port>
    </wsdl:service>

    <wsdl:service name="AsyncOneWay">
        <wsdl:port name="WSHttpBinding_IOneWay" binding="svc:WSHttpBinding_IOneWay">
            <soap:address location="http://localhost:50472/test/soap12" />
        </wsdl:port>
    </wsdl:service>

</wsdl:definitions> 
```

当我通过 Visual Studio 2010 添加此服务时，我得到了 2 个客户端。一个叫做“SyncReplyClient”，它没有我可以调用的方法，另一个叫做“OneWayClient”，带有一个“Greet”方法。但顾名思义，我想使用 SyncReplyClient，因为我需要响应。

我如何实现这一目标？

附带说明一下，OneWayClient 会抛出带有以下消息的 ProtocolException：“单向操作返回了一条带有 Action='' 的非空消息。” 因为我不想使用 OneWayClient，所以这并没有给我带来太多困扰，但这仍然很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T00:21:37.873

在创建您希望通过 SOAP 使用的服务时，请确保您阅读了有关[SOAP 限制的信息。](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)即，您需要保留一个 XSD/WSDL 命名空间。例如，您可以使用以下命令更改 AppConfig 中的默认 WSDL 命名空间：

```
SetConfig(new EndpointHostConfig {
    WsdlServiceNamespace = "http://my.new.namespace.com/types",
}); 
```

这设置了在生成的 WSDL 页面上使用的 WSDL/XSD 命名空间。您还需要`[DataContract]`通过为每个 DataContract 指定一个名称空间来将此自定义 XSD 名称空间与您的 DTO 匹配，您可以通过在每个 DataContract 上手动指定

```
[DataContract(Namespace="http://my.new.namespace.com/types")] 
```

或者您可以使用指定

```
 [assembly: ContractNamespace("http://my/custom/namespace", 
            ClrNamespace = "TheGuest.Test")] 
```

将其设置在共享 C# 命名空间下的多个 DTO 上。

最近也发生了一些变化，我们添加了[新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)并添加了不同的属性以允许您注释您的服务（将出现在 /metadata 和 Api Docs/Swagger 页面上）。考虑到这些变化，创建服务的新方法是：

```
[DataContract]
[Api("A sample web service.")]
public class Greet
{
    [DataMember]
    [ApiMember("The name of the person you wish to greet")]
    public string Name { get; set; }
}

[DataContract]
public class GreetResponse
{
    [DataMember]
    public string Result { get; set; }
}

public class GreetService : Service
{
    public GreetResponse Any(Greet request)
    {
        return new GreetResponse { Result = "Hello " + request.Name };
    }
} 
```

## 告诉 ServiceStack 服务响应类型是什么

为了让 ServiceStack 确定您的服务的响应类型是什么，您需要提供以下任何提示：

### 使用强类型返回类型

您的服务可以返回一个`object`或现在一个`ResponseDto`类型，例如：

```
public class GreetService : Service
{
    //1\. Using Object
    public object Any(Greet request)
    {
        return new GreetResponse { Result = "Hello " + request.Name };
    }

    //2\. Above service with a strong response type
    public GreetResponse Any(Greet request)
    {
        return new GreetResponse { Result = "Hello " + request.Name };
    }
} 
```

如果您使用选项 2) ServiceStack 将假定一个`GreetResponse`类型。

### 使用 IReturn 标记接口

```
[DataContract]
public class Greet : IReturn<GreetResponse> { ... } 
```

使用 Marker 接口的另一个优点是它提供了更简洁的客户端 API，例如：

```
GreetResponse response = client.Send(new Greet { Name = "World!" }); 
```

如果您没有 Marker 接口，则客户端 API 将是：

```
GreetResponse response = client.Send<GreetResponse>(new Greet { Name = "World!" }); 
```

### 使用 typeof(RequestDto).Name + 'Response' 命名约定

如果您的服务具有`object`响应类型且没有标记接口，那么您可以使用名称`{RequestDto}Response`命名约定来告诉 ServiceStack 响应类型是什么。

注意：要使 ServiceStack 能够找到响应类型，它**需要与**请求 DTO 位于相同的命名空间中。此外，每个请求和响应 DTO 都应该被唯一命名，这让您可以仅使用**请求 DTO 的名称**而不是完整的命名空间来调用 ServiceStack 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T05:54:04.993

您是否有理由引用服务并生成代理类？（很抱歉要求澄清，但我没有足够的声望对这个问题发表评论。）

如果这是您的第一个 ServiceStack 服务，那么您应该了解它是如何与 WCF 不同的范例。这是一个[快速的总结](https://github.com/ServiceStack/ServiceStack/wiki/Why-Servicestack)。

SS 的伟大之处在于您不需要生成代理，您可以专注于传输数据而不是执行远程操作。只需有一个指定 DTO 的 DLL，并且服务项目和客户端项目都引用该 DLL。

这使您能够使用内置的服务客户端（JSON/SOAP/等）与服务进行通信。了解这些差异需要一些时间，但是一旦您了解了 ServiceStack 的不同之处（尤其是关于从 Javascript 或其他非 C# 客户端调用服务方面）并且您需要在不重新生成代理的情况下重构您的服务层然后您会看到为什么它更好。

抱歉，如果您特别需要生成客户端代理并且这不能回答问题；[这个链接](https://github.com/ServiceStack/ServiceStack/wiki/C#-client)显示了使用通用客户端是多么容易，我强烈建议采用这种方法，除非有一些特殊的原因来生成 SOAP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T22:41:20.583

我找到了！

我检查了 ServiceStack 的示例，它们可以工作，但我的程序没有。

不同之处在于操作 (SayHello) 和响应 (SayHelloResponse) 不在同一个命名空间（My.Application.Operations 和 MyApplication.Responses）中。

当我将它们放在同一个命名空间中时，它就可以工作了，我的服务不再是“OneWay”而是“SyncReply”。

# java - 如何防止在页面刷新时执行命令按钮中的操作？

> ID：12937444
> 
> 赞同：1
> 
> 时间：2012-10-17T15:07:56.437
> 
> 标签：java, jsf, action

我正在使用 JSF 创建一个应用程序。我遇到的问题是每次刷新页面时都会执行命令按钮的操作（ProjectEntityHandlerBean.insertNewProject），从而导致数据库中出现多个不需要的条目。我查看了一个相关的线程，但对我的情况没有帮助：

[刷新页面时如何避免重新执行最后一个表单提交操作？](https://stackoverflow.com/questions/7850831/how-to-avoid-re-execution-of-last-form-submit-action-when-the-page-is-refreshed)

下面是 .xhtml 代码，bean 的代码。如果有人可以提供帮助，我将不胜感激...

```
public String insertNewProject()
{   
    System.out.println("Enter insert method");
    Project project = new Project();
    project.setProjectName(this.projectName);
    project.setDescription(this.description);
    project.setDuration(this.duration);
    ProjectHandler ph = new ProjectHandler();
    ph.create(project);
    return "viewid?faces-redirect=true";

}

<p:tab title="Insert">
            <h:form style="height: 500px; ">
                Insert new Project
                    <h:panelGrid border="2" columns="2" style="height: 200px; width: 383px; ">
                        <h:outputText value="project name"></h:outputText>
                        <h:inputText value="#{ProjectEntityHandlerBean.projectName}"></h:inputText>
                        <h:outputText value="project description"></h:outputText>
                        <h:inputText value="#{ProjectEntityHandlerBean.description}"></h:inputText>
                        <h:outputText value="project duration (Months)"></h:outputText>
                        <h:inputText value="#{ProjectEntityHandlerBean.duration}"></h:inputText>
                    </h:panelGrid>
                    <h:commandButton value="Submit" action="#{ProjectEntityHandlerBean.insertNewProject}"></h:commandButton>
            </h:form>       
        </p:tab> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:13:14.923

如果您发布数据，然后刷新页面，浏览器将重新发送数据。有些人会先发出警告。

防止这种情况的一种方法是使用 ajax 发布，但发布后的导航是有限的。Ajax 可以通过`<p:ajax process="@form" update="@form"/>`commandButton 的简单子级来启用，或者通过使用 primefaces 自己的 commandbutton 来启用`<p:commandButton ajax="true" process="@form" update="@form"/>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:50:11.543

始终对表单使用 Post-Redirect-Get 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:19:10.977

在任何 Web 应用程序中解决此问题的一般方法是将您的 POST 重定向到 GET 以显示结果。然后可以刷新 GET 而不会影响您的数据库。

# ios - IOS 方向修复并非一直有效

> ID：12937445
> 
> 赞同：1
> 
> 时间：2012-10-17T15:08:03.783
> 
> 标签：ios, orientation, gallery

我正在为移动设备开发一个滑动图库。用户可以通过滑动屏幕来更改图像，就像大多数 iPhone 应用程序中的任何普通图像库一样。

这是一个演示： [http ://daviddarx.com/stuffs/work/custom/swip/](http://daviddarx.com/stuffs/work/custom/swip/)

为了调试 iOS 方向错误（当你改变方向时让内容缩放），我使用了唯一可以纠正的库： [http ://scottjehl.github.com/iOS-Orientationchange-Fix/](http://scottjehl.github.com/iOS-Orientationchange-Fix/)

不幸的是，这个库大部分时间都运行良好，但它碰巧失败并且不能正常工作。这种情况大约发生 1 次 10 次，结果就像图书馆不在这里一样。

在大多数移动和响应式网站上，这不是一个大问题，因为用户可以手动缩小，然后恢复正常显示。

但这里的问题是我必须禁用缩放功能，才能让我的系统正常工作。因此，当错误发生时，一次 10 次，画廊就会被窃听并保持原样......

所以，这是我的问题：

-您知道管理该错误修复的任何其他库，并且 100% 完全可靠吗？

- 如果没有，您知道如何纠正使用过的库以获得 100% 的支持率吗？

-如果没有，您对我有什么想法或解决方案吗？

预先感谢您的帮助！大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:02:31.110

Scott Jehl 的 repo 上有一个出色的 pull request，它使用斜率检测而不是绝对值，这似乎不受原始解决方案的间歇性影响。

[https://github.com/PeterWooster/iOS-Orientationchange-Fix/](https://github.com/PeterWooster/iOS-Orientationchange-Fix/)

# asp.net - 根据 MVC3 中的条件隐藏 webgrid 列“编辑”链接

> ID：12937450
> 
> 赞同：1
> 
> 时间：2012-10-17T15:08:19.197
> 
> 标签：asp.net, asp.net-mvc-3

我有一个 webgrid`MVC3`包含 4 列名称、地址、年龄和编辑。`Edit`如果年龄大于 55，我想隐藏行的链接。帮我做。

有没有类似事件的`OnItemDataBound`事件？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:14:04.783

> 有没有像 OnItemDataBound 事件这样的事件？

不，在 ASP.NET MVC 中没有事件这样的概念。

您可以使用自定义格式列。

模型：

```
public class PersonViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public int Age { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var persons = new[]
        {
            new PersonViewModel { Id = 1, Name = "u 1", Address = "a 1", Age = 54 },
            new PersonViewModel { Id = 2, Name = "u 2", Address = "a 2", Age = 55 },
            new PersonViewModel { Id = 3, Name = "u 3", Address = "a 3", Age = 56 },
        };
        return View(persons);
    }
} 
```

看法：

```
@model IEnumerable<PersonViewModel>
@{
    var grid = new WebGrid(Model);
}

@grid.GetHtml(
    columns: grid.Columns(
        grid.Column("Name"),
        grid.Column("Address"),
        grid.Column("Age"),
        grid.Column(
            header: "Edit", 
            format: 
                @<text>
                @if (item.Age < 56) 
                { 
                    @Html.ActionLink("Edit", "Edit", new { id = (int)item.Id }) 
                }
                </text>
        )
    )
) 
```

*显然，您隐藏*了链接这一事实并不能减轻您在`Edit`给定人员 ID 的情况下对控制器操作中的 Age 执行相同检查的负担。没有什么可以阻止用户直接在他的浏览器地址栏中输入此编辑操作的 url。

# c++ - C++ 通过引用传递数组

> ID：12937453
> 
> 赞同：4
> 
> 时间：2012-10-17T15:08:21.010
> 
> 标签：c++, arrays, reference

> **可能重复：**
> [对数组的引用参数有什么用处？](https://stackoverflow.com/questions/2188991/what-is-useful-about-a-reference-to-array-parameter)

是

```
void myFunction( int (&arg)[4] ); 
```

和

```
void myfunction(int arg[4]); 
```

不同的？它们有何不同？第一个做什么，我怎么称呼它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T15:11:05.693

它们是不同的。第一个引用一个 4 个整数的数组作为它的参数。第二个将指向未知整数数组的第一个元素的指针作为其参数。

```
int array1[4] = {0};
int array2[20] = {0};

void myFunction1( int (&arg)[4] );
void myFunction2( int arg[4] );

myFunction1( array1 ); // ok
myFunction1( array2 ); // error, size of argument array is not 4

myFunction2( array1 ); // ok
myFunction2( array2 ); // ok 
```

# django - 来自 bitbucket 的 heliohost 和 django 托管和部署

> ID：12937454
> 
> 赞同：0
> 
> 时间：2012-10-17T15:08:21.890
> 
> 标签：django, heroku, hosting

我是 Django、Heliohost 和 Heroku 的新手。

我没有在网上看到任何从 bitbucket 为 Heliohost 设置和部署 Django 项目的指南。你们能指出我正确的方向吗？

我想知道在 Heroku 上为小型项目免费托管一个 Django 项目吗？我应该从 Heliohost 切换到 Heroku 吗？

谢谢大家。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:21:12.047

我用 Heroku 和 Django 主持了多个小型（免费 Heroku）项目——它们一起工作得很好。特别是如果您没有很多服务器经验。

Heroku 有一个简单的 django 指南，并且在您的项目中使用 git 将本地更改推送到 heroku 是快速/容易的。

Heroku 有很多插件（很多是免费的），即使是在免费级别上运行的最小的 django 应用程序也可以提供帮助。Memcache 是必须的，以使您的小型应用程序尽可能快地运行。

总而言之，Heroku 是托管 Django 支持的应用程序的好方法，当您的应用程序准备好扩展时，它可以立即扩展，但在空闲容量下运行良好，可以让它增长！

# php - 使用 API 从 Google + 中的帖子访问照片？

> ID：12937455
> 
> 赞同：1
> 
> 时间：2012-10-17T15:08:23.930
> 
> 标签：php, google-plus, picasa

我正在尝试构建一个服务器端应用程序 (PHP)，它可以下载在 Google+ 中与我共享的照片，但我在 Google+ PHP 客户端库中找不到为此的方法。我尝试通过 PicasaWeb API 获取它，但在尝试获取所有相册的列表时未列出相册“来自帖子的照片”。请提出一些方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:21:26.987

自己获取帖子。其中将包含照片的 URL，然后您可以获取这些 URL 以获取实际图像。

请注意，图片 URL 路径中有“调整大小”标签，因此如果您看到类似`.../s2048/...`或`.../w497-h373/...`之后的内容，这将指示 G+ 为您提供更小的版本（与请求全尺寸图片并在本地缩放相比，这大大减少了带宽和延迟） . 只需删除路径的该组件即可获得全尺寸图像。

# actionscript-3 - AS3 - 删除文本字段中闪烁的光标

> ID：12937460
> 
> 赞同：1
> 
> 时间：2012-10-17T15:08:29.360
> 
> 标签：actionscript-3, cursor, textfield

我可以从文本字段中删除这个闪烁的光标吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:17:08.090

不在输入文本字段中。

您仍然可以在动态文本字段中使用一些记号来监听 KEY_UP 事件，但您必须自己完成所有事情（删除、主页键、结束键...），并且您可以忘记复制/粘贴、撤消、鼠标选择...

这是一个棘手的方法。还可以通过将文本字段的文本颜色设置为背景颜色来隐藏文本字段（这样您就不会看到光标），或者将其 alpha 设置为 0，然后在 KEY_UP 事件上将文本复制到另一个动态文本字段中。不过，这还是一个 hack。

祝你好运。

# command-line - 如何在 DB2 中访问具有不同大小写的同名表

> ID：12937463
> 
> 赞同：1
> 
> 时间：2012-10-17T15:08:41.117
> 
> 标签：command-line, db2

我创建了以下两个表，它们只是不同的情况：

表.sql：

```
CREATE TABLE T1 (C1 INTEGER);
INSERT INTO T1 VALUES (1);
CREATE TABLE "t1" (C1 INTEGER);
INSERT INTO "t1" VALUES (2);
CREATE TABLE T2 (C1 INTEGER, "c1" integer);
INSERT INTO T2 VALUES (3, 4); 
```

命令

```
db2 -tvf tables.sql 
```

当我想直接从 CLP 查询表时，我无法区分这两种情况。如何查询表 T1 和表 t1。C1 和 c1 列都一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:08:41.117

为了在 Windows 中从 CLP 查询这些表，您必须执行以下操作：

对于表 T1（最简单的一个）：

```
db2 select * from T1 
```

或（这是 Linux 中的方式，因为 *）

```
db2 "select * from T1" 
```

对于表 t1

```
db2 "select * from ""t1""" 
```

对于列是相似的

```
db2 select C1 from T2 
```

对于另一个

```
db2 "select ""c1"" from T2" 
```

确保整个命令都包含在引号中。如果您发出此命令：

```
db2 select ""c1"" from T2 
```

它将改为返回 C1。此命令相同：

```
db2 select * from ""t1"" 
```

T1 被退回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:54:43.293

如果您在 linux shell 上使用 CLP，shell 将解释引号并去掉它们。在 Linux / Unix 上用反斜杠转义引号

```
db2 "INSERT INTO \"t1\" VALUES (...)" 
```

# javascript - javascript 创建新方法

> ID：12937466
> 
> 赞同：0
> 
> 时间：2012-10-17T15:08:45.877
> 
> 标签：javascript

使用`prototype`方法我们可以创建新的方法......比如......

```
Object.prototype.newMethod=function(){
   // do something
} 
```

在这里，我`newMethod`使用**匿名函数**定义...现在如果我想**使用这个方法**，我必须像这样使用它：`<object>.newMethod();`

但是现在我想创建一个可以使用的新方法，例如：`<object>.newMethod;`...没有括号...我该怎么做...？？

请不要使用任何jQuery ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:10:40.997

呃，你不能。要调用方法，请在其后加上括号。否则，您只是在引用它。

这条规则的唯一例外是当你写类似的东西时`new Date`，括号是由于`new`关键字而隐含的，只是因为没有给出参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:43:46.840

我真的不明白你*为什么*要这样做，但这*是*可能的，尽管有一个讨厌的 hacky 解决方法。AFAIK，您实际上正在寻找的是一个神奇的属性（如`someArray.length`属性）。

```
var foo = {val:'foo'};
foo.length = (function(that)
{
    return function()
    {
        return that.val.length;
    }
})(foo);
//at this point foo.length(); returns 3, but still requires parentheses
//so, build another closure, and assign a valueOf method to the lenth method:
foo.length.valueOf = (function(method)
{
    return function()
    {
        return method();//call the length method
    }
})(foo.length);
console.log(foo.length +1);//logs 4
foo.val += 'bar';
console.log(foo.length);//logs 6
//BUT:: be carefull!!
alert(foo.length);//coerces to string, we haven't redefined the toString method, so the function code will be alerted
alert(foo.length + '');//alerts 6 
```

这只是为了向您展示，*是*的，理论上是可能的，但是请，请，不要使用这种过度污染的黑客......我还没有彻底测试过这个，但是 ATM，我已经注意到`console.log(foo.length);`可以返回一个不同的值，不知道为什么，但是：

```
foo = {val:'foo'};
foo.length = (function(that){return function(){ return that.val.length;};})(foo);
foo.length.valueOf = (function(method){return function(){return method();};})(foo.length);
foo.length;//returns 3, great
foo.val += 'bar';
console.log(foo.length);//logged 3 at first, now it's back to logging 6!<-- don't trust this is the conclusion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:26:57.730

调用不带括号的函数的唯一方法是使用[getters](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get)和[setters](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/set)定义它。

请注意，这些是 JavaScript 1.8 的新功能，并非所有浏览器都支持。

# ruby-on-rails - 将图像存储为资产的载波

> ID：12937467
> 
> 赞同：0
> 
> 时间：2012-10-17T15:08:47.800
> 
> 标签：ruby-on-rails, ruby, carrierwave

我正在尝试抓取几个产品网站并建立它们的目录。我想使用载波下载产品的图像，我将使用 heroku 进行托管。由于 herkou 不提供自己的文件系统。我打算将下载的图像用作资产，而不是使用 S3 帐户。可以吗？这样做似乎很实用，因为我只会在 3 个月内刮一次或其他什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:15:40.750

当然，你可以这样做；您只需在开发中进行抓取，并将图像添加到您的资产中。有了这个，你就不想使用carrierwave，而是你的普通image_tag。

例如，对于产品，而不是安装一个上传器，你会有一个 file_name 属性，然后做这样的事情来呈现

```
<%= image_tag(@product.file_name) %> 
```

担忧：Heroku 为您的应用设置了最大 slug 大小。那是资产+代码+宝石。通常，我运行的应用程序的 slug 大小约为 50 兆。所以你的总大小会受到限制。

# css - Twitter Bootstrap：进度条居中文本

> ID：12937470
> 
> 赞同：75
> 
> 时间：2012-10-17T15:08:51.637
> 
> 标签：css, twitter-bootstrap, progress-bar, centering

我一直在使用 Twitter 的引导程序，我希望进度条上的文本以 on 栏为中心，无论值如何。

以下链接是我现在拥有的。我希望所有文本都与最底部的栏对齐。

截屏：

![进度条](../Images/64105c50a1d1f57f39135ca7add68326.png)

我已经尽力使用纯 CSS，并且尽可能避免使用 JS，但如果它是最干净的方式，我愿意接受它。

```
<div class="progress">
    <div class="bar" style="width: 86%">517/600</div>
</div> 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-06-26T17:32:56.023

**引导程序 5：（**与 v4x 相同）

```
<div class="progress position-relative">
    <div class="progress-bar" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
    <small class="justify-content-center d-flex position-absolute w-100">60% complete</small>
</div> 
```

* * *

**带有实用程序类的 Bootstrap 4：（**感谢*MaPePeR*的添加）

```
<div class="progress position-relative">
    <div class="progress-bar" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
    <small class="justify-content-center d-flex position-absolute w-100">60% complete</small>
</div> 
```

* * *

**引导程序 3：**

Bootstrap 现在支持进度条中 span 元素内的文本。Bootstrap 示例中提供的 HTML。（注意类`sr-only`被删除）

HTML：

```
<div class="progress">
    <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
        <span>60% Complete</span>
    </div>
</div> 
```

...但是它只根据栏本身使文本居中，所以我们需要一些自定义 CSS。

将其粘贴到另一个样式表/下方，您可以在其中加载引导程序的 css：

CSS：

```
/**
 * Progress bars with centered text
 */

.progress {
    position: relative;
}

.progress span {
    position: absolute;
    display: block;
    width: 100%;
    color: black;
 } 
```

**JsBin 文件：http:** [//jsbin.com/IBOwEPog/1/edit](http://jsbin.com/IBOwEPog/1/edit)

* * *

**引导程序 2：**

将其粘贴到另一个样式表/下方，您可以在其中加载 Bootstrap 的 CSS：

```
/**
 * Progress bars with centered text
 */
.progress {
    position: relative;
}

.progress .bar {
    z-index: 1;
    position: absolute;
}

.progress span {
    position: absolute;
    top: 0;
    z-index: 2;
    color: black; /* Change according to needs */
    text-align: center;
    width: 100%;
} 
```

然后通过在外部添加`span`元素将文本添加到进度条`.bar`：

```
<div class="progress">
    <div class="bar" style="width: 50%"></div>
    <span>Add your text here</span>
</div> 
```

**JsBin：http:** [//jsbin.com/apufux/2/edit](http://jsbin.com/apufux/2/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T02:13:03.490

Bootstrap 3 答案，如 bootstrap 示例所示

```
<div class="progress text-center">
  <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
    <span>60% Complete</span>
  </div>
    <span>40% Left</span>
</div> 
```

# github - 通过 SSH 链推送 Git 存储库

> ID：12937471
> 
> 赞同：2
> 
> 时间：2012-10-17T15:08:54.823
> 
> 标签：github, ssh, ftp, sftp, githooks

我刚刚开始了一份新工作，正在尝试开始使用 Git 进行版本控制。我试图帮助他们完成这个过程，但结果比预期的要复杂。

目前，所有新文件都通过 SSH FTP 上传到开发服务器，如下所示：

SSH 进入第一台机器，然后 SSH 从这里进入实际的开发服务器。

理想情况下，我们希望能够输入“git push dev”并让 git 跳过两个 SSH 以将文件推送到开发服务器......但是，我不确定如何添加一系列起源于 Git...

有谁知道这是否可能，或者如何去做？

提前致谢。

# django - 是什么导致 Django ORM 添加重复表？

> ID：12937472
> 
> 赞同：1
> 
> 时间：2012-10-17T15:08:57.053
> 
> 标签：django, orm, django-queryset

我有一个 Django 通用列表视图。因此，它首先查看各种请求参数（列表过滤器、排序），然后根据请求参数多次应用 queryset.filter() 方法（或根本不应用）。

然后它会进行一些聚合，但总数不正确。查看查询，似乎将各种表添加到查询中两次或更多次。

因此，查询的 FROM 部分的片段如下所示：

```
INNER JOIN `sequencing_sample` ON (`sequencing_samplesubprojectstats`.`sample_id` = `sequencing_sample`.`id`) 
LEFT OUTER JOIN `sequencing_library` ON (`sequencing_sample`.`id` = `sequencing_library`.`sample_id`) 
LEFT OUTER JOIN `sequencing_loadedwith` ON (`sequencing_library`.`id` = `sequencing_loadedwith`.`library_id`) 
LEFT OUTER JOIN `sequencing_passfail` ON (`sequencing_loadedwith`.`passfail_id` = `sequencing_passfail`.`id`) 
LEFT OUTER JOIN `sequencing_passfail` T6 ON (`sequencing_library`.`passfail_id` = T6.`id`) 
LEFT OUTER JOIN `sequencing_organism` ON (`sequencing_sample`.`organism_id` = `sequencing_organism`.`id`) 
LEFT OUTER JOIN `sequencing_subproject` ON (`sequencing_samplesubprojectstats`.`subproject_id` = `sequencing_subproject`.`id`) 
LEFT OUTER JOIN `sequencing_library` T9 ON (`sequencing_sample`.`id` = T9.`sample_id`) 
```

passfail 表是一个查找表，应该复制，但是 library 表是 schema 的中心，不应该像 T9 一样复制

是否有关于导致 ORM 添加重复表的原因的任何好的文档？视图中发生了各种各样的事情（可选地应用各种过滤器，查询集上的注释）。

我可以使用原始 SQL，但我更喜欢使用 Django 对象，因为使用这些对象进行排序和分页要容易得多。

我想知道 API 的哪一部分导致库表被第二次添加，所以我可以避免它（如果可能的话）。

# c++ - BST 中节点的所有父节点？

> ID：12937475
> 
> 赞同：3
> 
> 时间：2012-10-17T15:09:04.643
> 
> 标签：c++, c, algorithm, data-structures, advanced-search

使用递归函数（预购）打印二叉搜索树（BST）时。我需要打印当前节点的所有父节点（路径形式根）。
可以使用辅助数据结构（例如我的代码中的*路径*），但我不想保留*node->path*来存储路径。

> ```
>  4                           
>      / \  
>     /   \  
>    2     6
>   / \   / \
>  1   3  5  7 
> ```

假设我使用预购遍历在行中打印节点：

```
NODE    PATH  
4       4  
2       4,2  
1       4,2,1
3       4,2,3       
6       4,6
5       4,6,5
7       4,6,7 
```

我做了如下：**工作正常！**
*此代码中的路径*以 0（零）值结尾。BST中没有节点值为0。

```
void printpath(int* mypath){
   while(*mypath)  
      printf("%d ", *mypath++);  
}

void preorder(struct tree *p, int* path){
    int *mypath = calloc(sizeof(path)/sizeof(int) + 1 , sizeof(int*));
    int* myp=mypath;

    if(p!=NULL){  
       while( *myp++ = *path++ );  
       --myp;
       *myp=p->data;
       *(myp+1)=0;

        printf("%d PATH ",p->data);
        printpath(mypath);
        printf("\n");
        preorder(p->left, mypath);
        preorder(p->right, mypath);
    }
    free(mypath);
} 
```

但我不想保留**路径数组**，因为 BST 中有很多节点。有人可以建议我其他数据结构/或方法吗？一个建议就足够了，但应该是有效的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:59:15.077

这是一个古老的技巧，它仍然有效：`keep the back pointers in the call stack.`

```
 struct stacked_list{
      struct stacked_list* prev;
      struct tree* tree; 
    };

   void printpath_helper(int data, struct stacked_list* path) {
      if (!path->prev)
        printf("%d PATH ", data);
      else
        printpath_helper(data, path->prev);
      printf("%d ", path->tree->data);
    }

    void printpath(struct stacked_list* path) {
      printpath_helper(path->tree->data, path);
      putchar('\n');
    }

    void preorder_helper(struct stacked_list* path) {
      if (path->tree) {
        printpath(path);
        struct stacked_list child = {path, path->tree->left};
        preorder_helper(&child);
        child.tree = path->tree->right;
        preorder_helper(&child);
      }
    }

    void preorder(struct tree* tree) {
      struct stacked_list root = {NULL, tree};
      preorder_helper(&root);
    } 
```

的每个递归`preorder_helper`都会创建一个参数结构并将其地址传递给下一个递归，从而有效地创建一个参数链接列表，该链接列表`printpath_helper`可以向上走以实际打印路径。由于要打印从上到下的路径，`printpath_helper`还需要反转链表，因此最终将函数的递归深度加倍；如果您可以从下到上打印，`printpath_helper`可能是一个简单的循环（或尾递归）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:11:39.317

您可以使用单个数组来保留当前节点的父节点并在执行递归时将其传递下来，而不是创建新数组，只需记住在一次递归完成时恢复数组。我认为这样可以节省很多回忆。代码如下：

```
#include<iostream>
#include<vector>
#include<algorithm>

using namespace std;

struct node
{
    int data;
    struct node *left, *right;
};

// A utility function to create a node
struct node* newNode( int data )
{
    struct node* temp = (struct node *) malloc( sizeof(struct node) );

    temp->data = data;
    temp->left = temp->right = NULL;

    return temp;
}

void print_preorder_path(struct node *root,vector<int>& parents)
{
     if(root!=NULL)
     {
              cout<<root->data<<"\t";
              for(size_t i=0;i<parents.size();++i)cout<<parents[i]<<",";
              cout<<root->data<<endl;

              parents.push_back(root->data);
              print_preorder_path(root->left,parents);
              print_preorder_path(root->right,parents);
              parents.pop_back();

     }
}

int main()
{
     // Let us construct the tree given in the above diagram
    struct node *root         = newNode(4);
    root->left                = newNode(2);
    root->left->left          = newNode(1);
    root->left->right         = newNode(3);
    root->right               = newNode(6);
    root->right->left         = newNode(5);
    root->right->right        = newNode(7);

    vector<int> parents;

    cout<<"NODE\tPATH"<<endl;
    print_preorder_path(root,parents);

    getchar();
    return 0;
} 
```

代码是用stl写的，为了简单，可以根据需要修改，希望对你有帮助！

# php - PHP 搜索引擎循环失败

> ID：12937476
> 
> 赞同：0
> 
> 时间：2012-10-17T15:09:06.267
> 
> 标签：php, loops, search-engine

我需要一些关于我的代码的帮助。到目前为止，当我转到页面时，可以看到整个视图。当我设置搜索并发布它时，它也可以工作。但是当我添加 --> 2 个或更多 <-- 关键字时，我得到一个错误。所以问题出在 forarch 循环 else 构造中。

在这种情况下，我收到此错误：

查询 fout 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的“ORDER BY custsurname、custforename、custmidname”附近使用正确的语法

我尝试了许多构建方法，但不知何故似乎不起作用。

我的代码如下：

```
if(isset($_POST['search']))
{
    $search = $_POST['search'];
    $terms = explode(" ", $search);
    $customerlistquery = "
    SELECT * 
    FROM customer
    LEFT JOIN company
    ON customer.compid=company.compid
    WHERE 
    ";

    foreach ($terms as $each) 
    {
        $i++;

        if ($i == 1)
        {
            $customerlistquery .= "concat(custsurname, custforename, custmidname) LIKE '%$each%' ORDER BY custsurname, custforename, custmidname";
        }
        else
        {
            $customerlistquery .= "OR concat(custsurname, custforename, custmidname) LIKE '%$each%' ORDER BY custsurname, custforename, custmidname";
        }
    }
}
else
{
$customerlistquery = "  
        SELECT *
        FROM customer
        LEFT JOIN company
        ON customer.compid=company.compid
        ORDER BY custsurname, custforename, custmidname
        ";
} 
```

还有最后一个问题。为什么 PHP 抱怨 undefined 变量：**i**？

```
Notice: Undefined variable: i in ... 
```

这是每个“一次性变量”的标准消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:26:52.680

@newfurniturey 是对的，您第一次使用`$i`, 在这里：`$i++;`基本上，您添加`1`到不存在的东西：`$i`尚未声明，因此您没有可以添加 1 的值。

是的，你*可以*把通知关掉，把它们藏起来。但是，您的日志会很快变得混乱。因此，最好以这样的方式编写代码，使其在`E_STRICT | E_ALL`设置下运行而不会出现任何警告或通知。

在你解决了这个问题之后，我现在可以告诉你，你也会到处看到 SQL 语法错误：

```
foreach ($terms as $i => $each) 
{//use the index in a foreach loop, that's the easiest solution
    if ($i === 0)
    {
        $customerlistquery .= "concat(custsurname, custforename, custmidname) LIKE '%$each%' ORDER BY custsurname, custforename, custmidname";
    }
    else
    {
        $customerlistquery .= "OR concat(custsurname, custforename, custmidname) LIKE '%$each%' ORDER BY custsurname, custforename, custmidname";
    }
} 
```

您连接的每一位查询都以 ORDER BY 子句结尾。SQL 不会接受看起来像的查询

```
SELECT foo FROM db.bar WHERE x LIKE '%Y%' ORDER BY x,z OR x LIKE '%x%' ORDER BY x,z 
```

所以我建议你在循环*之后*`ORDER BY`连接子句：

 *```
foreach ($terms as $i => $each) 
{//use the index in a foreach loop, that's the easiest solution
    if ($i === 0)
    {
        $customerlistquery .= "concat(custsurname, custforename, custmidname) LIKE '%$each%'";
    }
    else
    {
        $customerlistquery .= "OR concat(custsurname, custforename, custmidname) LIKE '%$each%'";
    }
}
$customerlistquery .= ' ORDER BY custsurname, custforename, custmidname'; 
```

*一旦你让这个查询运行，如果它的速度很慢*，不要感到惊讶：最慢的查询的前 3 件事是：

1.  索引错误
2.  过度`LIKE`使用通配符
3.  很多`OR`条款

如果您的查询具有这三个特征中的两个，那么 SQL 将有 99% 的机会执行全表扫描并将临时表写入磁盘。那么远非理想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:12:39.457

关于您的 SQL 错误 - 您正在遍历术语列表以构建`WHERE`子句。但是，在每次迭代中，您附加的查询也包含一个`ORDER BY`子句。使用一个术语，这将正常工作。2+ 个术语，并且您的 SQL 无效。

尝试更新循环以仅附加`WHERE`-clause 项并添加以下内容`ORDER BY`：

```
foreach ($terms as $each) {
    if ($i++ > 0) $customerlistquery .= ' OR ';
    $customerlistquery .= "concat(custsurname, custforename, custmidname) LIKE '%$each%' ";
}
$customerlistquery .= " ORDER BY custsurname, custforename, custmidname"; 
```

我还稍微更改了您的循环以完成相同的任务，但没有重复的代码。

为了解决有关您的`undefined variable`警告的问题，当您尝试使用变量而不声明它时会发生这种情况。在 if 的情况下`$i`，您从未定义它（例如`$i = 0;`），但您使用`$i++`- 这会导致警告。

您可以使用以下方法关闭这些通知：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

但是，您实际上在代码中使用了变量；相反，`$i = 0;`在进入循环之前添加`foreach`以解决实际问题。*

# android - 从服务访问应用程序类

> ID：12937483
> 
> 赞同：3
> 
> 时间：2012-10-17T15:09:29.210
> 
> 标签：android, global-variables

要将值存储为全局变量，我读到可以使用 Application 类。我打算从主活动中获取用户名和密码，将它们存储在应用程序类变量中并启动一个新活动，然后在新活动中启动的服务中获取这些值，但是，我在使用我定义的 getter 方法时得到空值在我的应用程序类中。

**我的应用程序类：**

```
public class MyApp extends Application
{
  private String uid;
  private String upwd;

  @Override
  public void onCreate()
  {
      super.onCreate();
  } 

  public void setUID(String value)
  {
      uid = value;
  }

  public void setPWD(String value)
  {
      upwd = value; 
  }

  public String getUID()
  {
      return uid;
  }

  public String getPWD()
  {
      return upwd;
  }
} 
```

**在我的主要活动中：**

```
 public void setvalues()
  {
        unameval = Unametxtfield.getText().toString();
        pswrdval =  Pswrdtxtfield.getText().toString();     
        ((MyApp)this.getApplicationContext()).setUID(unameval);
        ((MyApp)this.getApplicationContext()).setPWD(pswrdval);
  } 
```

**在服务内我的第二个活动：**

```
public void fetchvalues()
{
      String uname = ((MyApp).getApplicationContext()).getUID();
      String upswrd = ((MyApp).getApplicationContext()).getPWD();
} 
```

**安卓清单：**

```
<application
        android:name="MyApp"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

    <!-- A Service here -->
     <service
        android:name="Service1"
        android:process=":myapp_service1" >
    </service> 

    <!-- A service in which I do the fetching of uname and pswd -->
     <service 
        android:name="Service2"
        android:process=":myapp_Service2" >
     </service>

    <activity
        android:name=".Second_Activity"
        android:exported="false"
        android:label="@string/activityname" >
        <intent-filter>
            <action android:name="android.intent.action.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".MainActivity"
        android:label="@string/Firstactivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

注意：我在某处读到，当您在多个进程上使用它时应用程序类将无法工作（我认为我正在这样做），这是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:29:52.613

使用[SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences.html)或[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)。

# vb.net - Visual Basic - 从源代码中获取 URL 列表

> ID：12937485
> 
> 赞同：0
> 
> 时间：2012-10-17T15:09:36.080
> 
> 标签：vb.net, visual-studio, text-parsing

我一直在开发一个程序，使我能够监控我的哪些公司的客户正在链接到我们的网站。如果我可以让它工作，它将节省大量浪费在手动搜索客户网站上的时间。

目前我有一个存储所有客户端主页 URL 的数据库。我的程序正在遍历这些 URL，获取它们的 SourceCode 并将 SourceCode 放入文本框中。然后它在文本框中搜索我的公司 URL，并返回“真”或“假”值。

如果“真”则链接存在，但如果“假”我需要我的程序搜索同一站点上的其他页面并检查链接是否存在于其他任何地方。

**为此，我需要我的程序循环浏览源代码（已经在文本框中）并找到链接到同一站点上其他页面的所有其他 URL（例如 www.example.com、www.example.com/contact-us、www .example.com/about) 并将它们存储在一个列表中。我不知道该怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:28:29.717

如何基于...的解决方案

[正则表达式帮助：获取除扩展名 .css、.js、.jpg、.gif、.png 之外的 URL 列表](https://stackoverflow.com/questions/11598146/regex-help-get-list-of-urls-except-extention-css-js-jpg-gif-png)

```
 Dim MyRegex As New Regex("href=""(?<URL>(?:(?!javascript)(?!#))[a-zA-Z0-9\~\!\@\#\$" + "\%\^\&amp;\*\(\)_\-\=\+\\\/\?\.\:\;\'\,]+)" + "(?<!(?:\.png|\.js|\.jpg|\.jpeg|\.css|\.gif|\.zip|\.r" + "ar))""(?:$|>|\s)", RegexOptions.Multiline Or RegexOptions.CultureInvariant Or RegexOptions.Compiled)

            Dim matches As MatchCollection = MyRegex.Matches(textbox1.text)
            For Each item In matches
                ListBox1.Items.Add(item.ToString())

            Next 
```

然后你需要过滤掉不相关的网站？

# c++ - 如何在 OpenCV Matcher 上访问点位置？

> ID：12937490
> 
> 赞同：5
> 
> 时间：2012-10-17T15:09:50.203
> 
> 标签：c++, opencv, match, points, matcher

我正在使用这个 FLANN 匹配器算法来匹配 2 张图片中的兴趣点，代码如下所示）。

有时代码会找到匹配点列表：

```
std::vector<DMatch> good_matches; 
```

我想在两张图片中获得点定位（x，y）。创建置换贴图。**我怎样才能访问这些点本地化？**

干杯，

```
#include <stdio.h>
#include <iostream>
#include "opencv2/core/core.hpp"
#include "opencv2/nonfree/features2d.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace cv;

void readme();

/** @function main */
int main(int argc, char** argv) {
    if (argc != 3) {
        readme();
        return -1;
    }

    // Transform in GrayScale
    Mat img_1 = imread(argv[1], CV_LOAD_IMAGE_GRAYSCALE);
    Mat img_2 = imread(argv[2], CV_LOAD_IMAGE_GRAYSCALE);

    // Checks if the image could be loaded
    if (!img_1.data || !img_2.data) {
        std::cout << " --(!) Error reading images " << std::endl;
        return -1;
    }

    //-- Step 1: Detect the keypoints using SURF Detector
    int minHessian = 400;

    SurfFeatureDetector detector(minHessian);

    std::vector<KeyPoint> keypoints_1, keypoints_2;

    detector.detect(img_1, keypoints_1);
    detector.detect(img_2, keypoints_2);

    //-- Step 2: Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor;

    Mat descriptors_1, descriptors_2;

    extractor.compute(img_1, keypoints_1, descriptors_1);
    extractor.compute(img_2, keypoints_2, descriptors_2);

    //-- Step 3: Matching descriptor vectors using FLANN matcher
    FlannBasedMatcher matcher;
    std::vector<DMatch> matches;
    matcher.match(descriptors_1, descriptors_2, matches);

    double max_dist = 0;
    double min_dist = 100;

    //-- Quick calculation of max and min distances between keypoints
    for (int i = 0; i < descriptors_1.rows; i++) {
        double dist = matches[i].distance;
//      printf("-- DISTANCE =  [%f]\n", dist);
        if (dist < min_dist)
            min_dist = dist;
        if (dist > max_dist)
            max_dist = dist;
    }

    printf("-- Max dist : %f \n", max_dist);
    printf("-- Min dist : %f \n", min_dist);

    //-- Draw only "good" matches (i.e. whose distance is less than 2*min_dist )
    //-- PS.- radiusMatch can also be used here.
    std::vector<DMatch> good_matches;

    for (int i = 0; i < descriptors_1.rows; i++) {
        if (matches[i].distance < 2 * min_dist) {
            good_matches.push_back(matches[i]);
        }
    }

    //-- Draw only "good" matches
    Mat img_matches;
    drawMatches(img_1, keypoints_1, img_2, keypoints_2, good_matches,
            img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(),
            DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS);

    //-- Show detected matches
    imshow("Good Matches", img_matches);

    for (int i = 0; i < good_matches.size(); i++) {
        printf("-- Good Match [%d] Keypoint 1: %d  -- Keypoint 2: %d  \n", i,
                good_matches[i].queryIdx, good_matches[i].trainIdx);
    }

    waitKey(0);

    return 0;
}

/** @function readme */
void readme() {
    std::cout << " Usage: ./SURF_FlannMatcher <img1> <img2>" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T19:39:10.573

matched_points1 和 2 将是左右图像中的对应点。然后，您可以找到 good_matches 的索引，其中 idx1=good_matches[i].trainIdx 用于左侧图像， idx2=good_matches[i].queryIdx 用于右侧图像。然后只需将相应的点添加到您的matched_points 向量中即可获得匹配项的x,y 点向量。

```
long num_matches = good_matches.size();
vector<Point2f> matched_points1;
vector<Point2f> matched_points2;

for (int i=0;i<num_matches;i++)
{
    int idx1=good_matches[i].trainIdx;
    int idx2=good_matches[i].queryIdx;
    matched_points1.push_back(points1[idx1]);
    matched_points2.push_back(points2[idx2]);
} 
```

现在你有两个匹配点的向量。我想这就是你要问的？

# javascript - 添加动态内容时正文不会滚动

> ID：12937491
> 
> 赞同：0
> 
> 时间：2012-10-17T15:09:51.993
> 
> 标签：javascript, css, dynamic-data

此处的实时链接：http: [//tbremer.com/](http://tbremer.com/)

尝试架构或音乐会以查看问题

我的问题是，当添加我的图像时，视口不会滚动或扩展以允许新内容。

我需要了解这里的根本问题，并希望找到解决方法。

谢谢！

好的，对不起，这是相关的代码。

**CSS：**

```
/* Content Wrapper */
#contentWrapper {
    padding: 0px;
    margin: 0px;

    width: 100%;
    height: 99%;

    z-index: 0;

    border: 0px solid #600;
}

/* Image Viewer */

#imageViewer{
    position: fixed;
    left: 0px;
    top: 0px;

    padding: 0px;
    padding-left: 350px;
    margin: 0px;

    border: 0px solid #F0F;

    visibility: hidden;
}

.portImage {
    padding: 0;
    margin: 4px;

    border: 1px solid #000;

    display: inline;
} 
```

**HTML：**

```
<div id="contentWrapper">
    <div id="imageViewer"></div>
</div> 
```

**JAVASCRIPT：**

```
xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            $("#imageViewer").empty();
            $("#imageViewer").css("visibility", "hidden");

            //___ Get server response.
            var responseArray = xmlhttp.responseText.split(',');
            responseArray.pop();

            //console.log(responseArray.length);
            //console.log(responseArray);

            for(var i=0;i<responseArray.length;i++){
                $("#imageViewer").append("\
                    <div id='portImage"+i+"' class='portImage'>\
                        <img src='"+responseArray[i]+"' height='500'>\
                    </div>\
                ");
            }

            $(".portImage").each(function() {
                var image = $("<img />").attr('src', this);
            });

            //$("#imageViewer").append("Test");
            $("#imageViewer").css("visibility", "visible");
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:41:20.187

位置：imageViewer 上的绝对位置不固定。这就是你必须改变的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:16:28.360

您需要删除`height`from`#contentWrapper`和`position: fixed`from `#imageViewer`。

（请在此处发布您的代码。）

# php - Wordpress：如何在帖子中添加滑块

> ID：12937493
> 
> 赞同：0
> 
> 时间：2012-10-17T15:10:01.617
> 
> 标签：php, jquery, wordpress, jquery-ui

我在 wordpress 的 single.php 文件中尝试了以下代码。我使用这些代码块显示当前帖子的相关帖子。

```
 <ul class="step-nav clearfix">
<li class="prev button">
    <?php echo previous_post_link('%link', 'Previous'); ?>
</li>
<li class="next button">
    <?php echo next_post_link('%link', 'Next'); ?>
</li>
</ul> 
```

它显示下一个和上一个链接。现在的问题是，我不知道如何编写 jquery 代码，该代码将在不更改浏览器 url 的情况下滑动所有下一篇或上一篇文章。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:00:01.430

如果您不想更改 url 和新帖子 slideIn..，您可以使用 ajax 加载来加载内容。

这是我正在使用的 ajax 导航的示例代码，您可以相应地对其进行修改。

```
// Ajaxed navigation On Page
jQuery(document).ready(function(){
    jQuery('#latestvideo-wrapper').append('<div class="video-loader"></div>');
    jQuery('.videosarticle a').live('click', function(e)  {
    jQuery('#latestvideo-wrapper .video-loader').fadeIn(500);
    e.preventDefault();
    var link = jQuery(this).attr('href');
    jQuery('#latestvideo-wrapper #latestvideobox').fadeOut(100).load(link + ' #latestvideobox', function() {
    jQuery('#latestvideo-wrapper .video-loader').fadeOut(400);
    jQuery('#latestvideo-wrapper #latestvideobox').fadeIn(500);
     });
    });
}); 
```

根据此代码，以前的内容正在淡出，新内容正在淡入。

# jquery - 为什么 Firefox 返回 0 作为 $(window).height() 的值

> ID：12937494
> 
> 赞同：11
> 
> 时间：2012-10-17T15:10:02.570
> 
> 标签：jquery, firefox, jquery-1.8

在我看来，Firefox 应该更好地配备在使用`$(window).height()`.

我正在使用 jQuery 1.8.2。这是该特定版本中的错误吗？在计算视口高度时，我测试过的所有其他浏览器都会返回一个适当的值。

为了解决这个问题，我使用下面的 snip 将像素值应用到 div。

```
$(window).bind('cwsObjectsShown', function() {
  var height = $(window).height();
  if (height === 0) {
     height = window.innerHeight;
  }
  height = height - '120';
  $('#game_objects').css('height', height + 'px');
}); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-06T20:46:31.837

jQuery 的 $(window).height() 对 doctype 很敏感。试试 <!doctype html> ？

jQuery 1.8.1 发行说明说

> 不要使用怪癖模式！jQuery 从未支持 Quirks 模式，我们不会在 Quirks 中进行任何测试。这可能会影响像 $("window").height() 这样的值，并且 jQuery 1.8 Quirks 模式的结果确实发生了变化，以支持一些现代浏览器功能。我们看到的大多数问题案例都来自希望处于标准模式但在其标签之前有无效文档类型或无关标记的开发人员。如有疑问，请使用简单而简短的 <!doctype html>。

例如，使用 jQuery 1.8.2 和 Firefox 16，我得到一个有效的 $(window).height() 文档类型为 html，但高度为 0，文档类型为 html5。在 Chromium 20 中，两者都有效。（W3C HTML5 规范确实说要使用 doctype html，而不是 html5。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-03T11:22:26.507

试试这个功能：

```
function GetBrowserDim() {
    if (window.innerHeight) {
        return { w: window.innerWidth, h: window.innerHeight};
    } else {
        return { w: document.body.clientWidth, h: document.body.clientHeight };
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-14T09:52:49.427

在兼容模式下，$(window).height() 和 $(window).width() 在 IE 中返回 0。在FireFox中不检查这个，可能是一样的。尝试改用 $(document).height() 或 $(document).width() 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-22T05:23:45.670

就我而言，我不得不删除 html 元素中的属性

```
<html lang="en-US" prefix="og: http://ogp.me/ns#"> 
```

改为刚刚

```
<html> 
```

现在我得到了正确的文档宽度和高度

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-11T16:22:32.647

我在 Firefox 中通过 jquery 找到了这个奇怪的高度渲染的答案......

我在带有doctype的html标签中使用了class =“no-js”......当我删除它时，FF计算正确......所以我用jquery添加了这个类，就像这样$（'html'）.addClass（'no- js');

现在计算在所有浏览器中都是相同的..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-21T13:20:50.033

您必须`<!DOCTYPE html>`在开始时使用标签，一切都会好起来的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T15:17:56.060

试试下面的代码：

```
$(function(){
  $(window).on('cwsObjectsShown', function() {
    alert($(this).height());
  });   
}); 
```

# regex - Groovy Regex：在 Switch 语句中捕获组

> ID：12937499
> 
> 赞同：29
> 
> 时间：2012-10-17T15:10:24.793
> 
> 标签：regex, groovy

给定以下 Groovy 代码 switch 语句：

```
def vehicleSelection = "Car Selected: Toyota"

switch (vehicleSelection) {
   case ~/Car Selected: (.*)/:

      println "The car model selected is "  + ??[0][1] 
} 
```

*是否可以在不*定义新 ( `def`) 变量的情况下提取单词“Toyota” ？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-17T15:17:28.763

这可以使用Groovy`lastMatcher`添加的方法：`Matcher`

```
import java.util.regex.Matcher

def vehicleSelection = 'Car Selected: Toyota'

switch( vehicleSelection ) {
   case ~/Car Selected: (.*)/: 
     println "The car model selected is ${Matcher.lastMatcher[0][1]}"
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-15T03:14:48.357

基于对我非常有帮助的 tim_yates 回答：

如果你想在你的代码中避免一堆“Matcher.lastMatcher”，你可以创建一个辅助函数来充当别名。

```
import java.util.regex.Matcher

static Matcher getm()
{
    Matcher.lastMatcher
}

def vehicleSelection = 'Car Selected: Toyota'

switch( vehicleSelection ) {
    case ~/Car Selected: (.*)/: 
        println "The car model selected is ${m[0][1]}"
     break;
} 
```

# sass - Sass 中具有可变参数列表的一个属性的多个值

> ID：12937503
> 
> 赞同：6
> 
> 时间：2012-10-17T15:10:39.937
> 
> 标签：sass

我正在寻找一个像`+stacktextshadow(blue, red, green)`吐出一样的mixin`text-shadow: 1px 1px 0 blue, 2px 2px 0 red, 3px 3px 0 green;`

目前这就是我所拥有的：

```
=stacktextshadow($shadows...)
  @for $i from 1 through length($shadows)
    $shadow1: append(1px 1px 0, nth($shadows,1))
    $shadow2: append(2px 2px 0, nth($shadows,2))
    $shadow3: append(3px 3px 0, nth($shadows,3))
    text-shadow: $shadow1, $shadow2, $shadow3

h1
  +stacktextshadow(blue, red, green) 
```

这给了我：

```
h1 {
  text-shadow: 1px 1px 0 blue, 2px 2px 0 red, 3px 3px 0 green;
  text-shadow: 1px 1px 0 blue, 2px 2px 0 red, 3px 3px 0 green;
  text-shadow: 1px 1px 0 blue, 2px 2px 0 red, 3px 3px 0 green; } 
```

三倍。我知道为什么，因为它在循环中运行了`text-shadow`3 次属性声明。`@for`我希望它只做一次。但是，当我`text-shadow`退出 foo 循环时，它无法访问`$shadow1`,`$shadow2`等。

另外，我不想重复自己的话：（`$shadow($i): append($i*1px $i*1px 0, nth($shadows,$i))`这显然行不通）所以这一切都是动态完成的——无论我将一个参数传递给 mixin，还是 20。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:49:14.633

您可以在循环外创建一个变量来“收集”阴影值，然后在您的`text-shadow`属性中使用该变量。例子：

```
=stacktextshadow($shadows...)
  $all: ()
  @for $i from 1 through length($shadows)
    $all: append($all, append($i*1px $i*1px 0, nth($shadows, $i)), comma)

  text-shadow: $all

h1
  +stacktextshadow(blue, red, green) 
```

输出：

```
h1 {
  text-shadow: 1px 1px 0 blue, 2px 2px 0 red, 3px 3px 0 green; } 
```

# php - 从 PHP 脚本运行命令：sh: 1: screen: not found

> ID：12937507
> 
> 赞同：0
> 
> 时间：2012-10-17T15:10:42.870
> 
> 标签：php, linux, apache, suphp

我对运行屏幕会话的脚本有问题。

```
<?php  exec("screen -m -d ffmpeg2theora -v 3 /path/to/video.mp4");  ?> 
```

并在日志上查看：

```
Wed Oct 17 16:17:39 2012] [error] [client 83.5.x.x] sh: 1: screen: not found, referer: http://xxxxxx.xx 
```

它停止了一些更新（apache/php/suphp？），在此之前就像魅力一样工作任何想法是发生了什么，如何配置 suPhp/Apache？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:52:58.890

相反，只需执行以下操作：

```
exec("ffmpeg2theora -v 3 /path/to/video.mp4 &"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:53:04.327

如果您希望 PHP 在后台启动一个长时间运行的命令，为什么不尝试以下操作：

```
<?php pclose(popen("/usr/bin/nohup /path/to/ffmpeg2theora -v 3 /path/to/video.mp4 >/tmp/result 2>&1", "r")); ?> 
```

在这种情况下，使用显式的命令路径总是明智的。

# parameters - 使用 html 或 javascript 在 CDE 仪表板中打印变量

> ID：12937509
> 
> 赞同：7
> 
> 时间：2012-10-17T15:10:45.440
> 
> 标签：parameters, dashboard, pentaho

我有一个带有弹出切片器的仪表板，但是一旦我关闭弹出窗口，就无法判断选择了哪些变量，所以我想在图表上方连续显示一条路径类型的线，包括我的所有参数'在切片器框中进行选择。

我尝试在 HTML 布局位置引用它们，例如： `${size}`、、和`${type}`，但它显示的文本是书面的。没有变量被解析。`${line}``${service}`

我还创建了一个自由形式的组件来使用 Javascript，但我没有看到任何数据，而且我无法弄清楚要使用的功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T23:56:45.740

一种更标准的方法是使用文本组件。在表达式字段中，您可以使用如下内容：

```
function() {
  return "My Parameter: " + Dashboards.getParameterValue("myParam");
} 
```

`myParam`参数的名称在哪里。您还需要添加`myParam`到侦听器，以使文本组件与参数保持同步。

自由形式组件也是一种可能，但它*确实*是自由形式，你必须自己做所有事情。我们简单地添加了这一点，以便我们可以轻松地将任意代码添加到 CDF 生命周期。使用自由格式组件，您最终会在自定义图表脚本中执行类似的操作（它是否表明我们重用了图表中的该属性名称？）：

```
function() {

  $("#" + this.htmlObject).text("My parameter: " + Dashboards.getParameterValue("my Param"));
} 
```

# c# - DataTable 列重新排序

> ID：12937516
> 
> 赞同：8
> 
> 时间：2012-10-17T15:11:01.837
> 
> 标签：c#, ado.net

我正在使用`DataTable`内容

```
 column1    column2   column3  column4 column5 column6 column7 column8 column9 column10
row1   a           b         c         d       e       f       g      h       i        j 
```

我希望将表格重新排序为

```
 column4    column2    column1  column7 column6 column9 column10 column5 column8 column3
row1     d         b           a         g      f       i       j        e       h       c 
```

我尝试使用该`DataTable.Column[i].SetOrdinal()`方法，但它仅正确交换第一列。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T15:23:10.493

由于您没有显示完整的代码，因此很难说出实际出了什么问题。但这应该有效：

```
public static void ReorderTable(ref DataTable table, params String[] columns)
{
    if (columns.Length != table.Columns.Count)
        throw new ArgumentException("Count of columns must be equal to table.Column.Count", "columns");

    for (int i = 0; i < columns.Length; i++)
    {
        table.Columns[columns[i]].SetOrdinal(i);
    }
} 
```

除了 a`params String[]`你也可以使用`List<DataColumn>`你喜欢的 a 或 whatelse。

使用您的样本数据进行测试：

```
var table = new DataTable();
table.Columns.Add("column1", typeof(string));
table.Columns.Add("column2", typeof(string));
table.Columns.Add("column3", typeof(string));
table.Columns.Add("column4", typeof(string));
table.Columns.Add("column5", typeof(string));
table.Columns.Add("column6", typeof(string));
table.Columns.Add("column7", typeof(string));
table.Columns.Add("column8", typeof(string));
table.Columns.Add("column9", typeof(string));
table.Columns.Add("column10", typeof(string));

for (int i = 0; i < 10; i++)
{
    table.Rows.Add("colum1", "column2", "colum3", "column4", "column5", "column6", "column7", "column8", "column9", "column10");
}

ReorderTable(ref table, "column4", "column2", "column1", "column7", "column6", "column9", "column10", "column5", "column8", "column3"); 
```

已经可以与 .NET 2 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-21T10:06:00.597

```
int cnt = 0;
foreach (string s in colsList)
{
    if (table.Columns.Contains(s))
    {
        table.Columns[s].SetOrdinal(cnt);
        cnt++;
    }
} 
```

计数不必相同。

# c# - 固有实现的接口

> ID：12937519
> 
> 赞同：13
> 
> 时间：2012-10-17T15:11:06.550
> 
> 标签：c#, inheritance, interface, multiple-inheritance

我经常想创建一个对象列表，其中每个对象都必须实现多个接口。例如，我想做类似于以下的事情：

```
List<T> where T : IConvertible, IComparable _myList; 
```

我考虑的另一个选择是创建实现这两个接口的第三个接口，以便实现这两个接口的任何对象固有地实现我的。

```
public interface IConvertibleAndComparable
    : IConvertible, IComparable { }

List<IConvertibleAndComparable> _myList; 
```

有了这个，我将能够添加任何实现`IConvertible`and的对象`IComparable`，包括`double`and `int`，以及我自己的对象。不需要显式实现`IConvertibleAndComparable`，因为它不会在继承接口之外添加任何新功能。

我知道第一个片段是非法的，第二个片段虽然合法，但没有做我想做的事。是否有可能实现我想要做的事情？如果不是，这些中的任何一个都可以成为未来 C# 功能的候选者吗？

（注意：这将是空接口的合法应用程序。）

**编辑**

在更一般的意义上，我想执行以下操作之一：

```
private MyGenericClass<T> where T : IA, IB, ... _myClass; 
```

`T`我可以在哪里声明我需要的所有限制，*或者*

```
public interface IMyCombinedInterface : IA, IB, ... {}
private MyGenericClass<IMyCombinedInterface> _myClass; 
```

实现`IA`,`IB`和`...`固有（或隐式）实现的任何类型`IMyCombinedInterface`（仅在`IMyCombinedInterface`未显式声明新功能时）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:15:49.037

作为一种解决方法，您可以做一种叠加包装，并将其存储在列表中。[在这里](https://stackoverflow.com/a/8116245/31158)寻找这个想法。

对于您的示例，您可以执行以下操作：

```
public class Junction
{
    public IConvertible Convertible { get; private set; }
    public IComparable Comparable { get; private set; }
    private Junction() { }
    public static Junction Create<T>(T value) where T : IConvertible, IComparable
    {
        return new Junction
        {
            Convertible = value,
            Comparable = value
        };
    }
} 
```

然后将`Junction`s 添加到您的列表中：

```
var l = new List<Junction>();
l.Add(Junction.Create(1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T21:29:19.433

在处理另一个项目时，我想到了另一种解决方法。虽然它可能不适用于我发布的示例，但它可能适用于问题的初衷，即为`IEnumerable<T>`and创建组合界面`INotifyCollectionChanged`（正如@DanielHilgarth 指出的那样）。解决方法如下：

创建一个空接口，实现您需要的接口组合。

```
public interface INotifyingEnumerable<T> :
    IEnumerable<T>,
    INotifyCollectionChanged
{
} 
```

创建一个新类，该类继承自实现这两者的类并实现新接口。

```
public class MyObservableCollection<T> :
    ObservableCollection<T>,
    INotifyingEnumerable<T>
{
} 
```

现在您可以使用接口`INotifyingEnumerable<T>`作为属性类型，使用您的实现。

然而，这并不能完全涵盖原始要求的原因是它不允许`ObservableCollection<T>`直接分配。原始帖子中要求的功能将允许这样做。

# c - 一些子进程多次完成它们的工作

> ID：12937520
> 
> 赞同：0
> 
> 时间：2012-10-17T15:11:09.520
> 
> 标签：c, linux, fork

我编写了一个程序，为一个进程创建 3 个子进程。然后，每个孩子也创建 3 个进程。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <time.h>
#include <stdbool.h>
#define GENERACIONES 2

void crearHijo(int, int);

int main()
{
    int i;

    for (i = 1; i <= 3; i++)
        crearHijo(i, 1);

    return 0;
}

void crearHijo(int hijoNum, int gen)
{
    pid_t pid = fork();
    int i, hijos = 3;

    if (pid < 0)
    {
        fprintf(stderr, "Fork Failed");
        exit(-1);                       
    }
    else if (pid == 0)
    {
        printf("Soy de la generación %d, hijo # %d, PID: %d, PPID: %d\n",
                 gen, hijoNum, getpid(), getppid());

        if (gen < GENERACIONES)
        {
            gen++;
            /*srand(time(NULL));
            hijos = rand() % 3 + 1;*/

            for (i = 1; i <= hijos; i++)
                crearHijo(i, gen);
        }

        exit(0);
    }
    else
        waitpid(pid, NULL, NULL);
} 
```

我期待3个儿子和9个孙子。但我得到以下输出：

```
Soy de la generación 1, hijo # 1, PID: 2533, PPID: 2532
Soy de la generación 2, hijo # 1, PID: 2534, PPID: 2533
Soy de la generación 1, hijo # 1, PID: 2533, PPID: 2532
Soy de la generación 2, hijo # 2, PID: 2535, PPID: 2533
Soy de la generación 1, hijo # 1, PID: 2533, PPID: 2532
Soy de la generación 2, hijo # 3, PID: 2536, PPID: 2533
Soy de la generación 1, hijo # 1, PID: 2533, PPID: 2532
Soy de la generación 1, hijo # 2, PID: 2537, PPID: 2532
Soy de la generación 2, hijo # 1, PID: 2538, PPID: 2537
Soy de la generación 1, hijo # 2, PID: 2537, PPID: 2532
Soy de la generación 2, hijo # 2, PID: 2539, PPID: 2537
Soy de la generación 1, hijo # 2, PID: 2537, PPID: 2532
Soy de la generación 2, hijo # 3, PID: 2540, PPID: 2537
Soy de la generación 1, hijo # 2, PID: 2537, PPID: 2532
Soy de la generación 1, hijo # 3, PID: 2541, PPID: 2532
Soy de la generación 2, hijo # 1, PID: 2542, PPID: 2541
Soy de la generación 1, hijo # 3, PID: 2541, PPID: 2532
Soy de la generación 2, hijo # 2, PID: 2543, PPID: 2541
Soy de la generación 1, hijo # 3, PID: 2541, PPID: 2532
Soy de la generación 2, hijo # 3, PID: 2544, PPID: 2541
Soy de la generación 1, hijo # 3, PID: 2541, PPID: 2532 
```

有些条目是重复的，我不明白为什么。进程不超过 12 个，但其中一些进程会多次打印输出。我怎样才能避免这种行为？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:21:06.773

当你的：

```
waitpid(pid, NULL, NULL); 
```

在子进程上完成，函数返回和主进程

```
for (i = 1; i <= 3; i++) 
```

继续

尝试这样的事情：

```
 int main()
{
    int i;
    bool j = true;

    for (i = 1; i <= 3; i++)
    {
       if (j == true)
        j = crearHijo(i, 1);
    }

    return 0;
}

bool crearHijo(int hijoNum, int gen)
{
    pid_t pid = fork();
    int i, hijos = 3;

    if (pid < 0)
    {
        fprintf(stderr, "Fork Failed");
        exit(-1);                       
    }
    else if (pid == 0)
    {
        printf("Soy de la generación %d, hijo # %d, PID: %d, PPID: %d\n",
                 gen, hijoNum, getpid(), getppid());

        if (gen < GENERACIONES)
        {
            gen++;
            /*srand(time(NULL));
            hijos = rand() % 3 + 1;*/

            for (i = 1; i <= hijos; i++)
                crearHijo(i, gen);
        }

        exit(0);
    }
    else
    {
        waitpid(pid, NULL, NULL);
        return (false);
    }
 return (true);
} 
```

# .net - 仅在 VS Macro IDE 中旧时构建解决方案

> ID：12937522
> 
> 赞同：1
> 
> 时间：2012-10-17T15:11:25.470
> 
> 标签：.net, visual-studio, visual-studio-macros

使用 Visual Studio 宏 IDE，我如何判断构建是旧的还是过时的？

我目前已重新映射我的 F5 以运行自定义宏，该宏将进入调试模式并附加到浏览器而不构建解决方案。通常，我总是确保在调试之前按下 Control-Shift-B，但我认为我可以更进一步，并将这个过程也编程到宏中。此设置的最佳部分是，如果自上次构建以来我没有更改代码，**我总是可以跳入和跳出调试，而无需像使用正常调试 (F5) 模式时那样冗余地重新构建解决方案。**

基本上，我想知道是否有变量或某个过程来判断自上次构建以来代码是否已更改。

这是整个宏，带有??? 部分显示我正在尝试做的事情。如果您愿意，可以自己使用它——它在调试大型解决方案时为我节省了大量时间。

```
Imports System
Imports EnvDTE80
Imports System.Diagnostics

Public Module AttachToWebServer
    Public Sub AttachToWebServer()
        Dim AspNetWp As String = "aspnet_wp.exe"
        Dim W3WP As String = "w3wp.exe"
        Dim buildIsOld As Boolean

        buildIsOld = ???

        If buildIsOld Then
            ' Build the solution and wait for it to finish
            DTE.Solution.SolutionBuild.Build(True)
        End If

        ' Are we at a breakpoint?
        If DTE.Debugger.CurrentMode = EnvDTE.dbgDebugMode.dbgBreakMode Then
            DTE.Debugger.Go() ' Then continue instead of reattaching
        Else ' If not, attach to IIS
            If Not (AttachToProcess(AspNetWp)) Then
                If Not AttachToProcess(W3WP) Then
                    System.Windows.Forms.MessageBox.Show(String.Format("Process {0} or {1} Cannot Be Found", AspNetWp, W3WP), "Attach To Web Server Macro")
                End If
            End If
        End If
    End Sub

    Public Function AttachToProcess(ByVal processName As String) As Boolean
        Dim processFound As Boolean = False
        For Each Process As EnvDTE.Process In DTE.Debugger.LocalProcesses
            If (Process.Name.Substring(Process.Name.LastIndexOf("\") + 1) = processName) Then
                Process.Attach()
                processFound = True
            End If
        Next
        Return processFound
    End Function
End Module 
```

# c - 使用不同文件中定义的回调给出“未定义的参考”

> ID：12937524
> 
> 赞同：1
> 
> 时间：2012-10-17T15:11:25.927
> 
> 标签：c, callback

我正在尝试使用回调函数。当调用者和被调用函数在同一个文件中时，这工作得很好。我最近决定将被调用函数作为库的一部分，所以我将它声明在一个头文件中，并在它自己的文件中定义。我在调用源文件中#include 新标头，链接到新库，现在我收到回调函数的“未定义引用”错误。

我需要做一些特别的事情来完成这项工作吗？例如，当我在 pthread 库中使用相同的东西时，我注意到回调函数被定义为指针函数。

编辑：我正在链接到库，我可以很好地调用库中的其他函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:03:26.860

可能出现的问题：

1.  函数的定义（在 .c 文件中）与其声明（在 .h 文件中）不一致，并且使用此函数的代码基本上告诉链接器去查找头文件中的内容，而不是实际在头文件中的内容图书馆。

2.  您忘记编译实现该函数的文件或将生成的目标文件放入库中，因此链接器无法在库中找到该函数。

3.  您有一些源文件已打开且未保存，虽然它们在编辑器中看起来很好且完整，但它们的磁盘内容不同，并且在您尝试编译代码时出现了问题。

4.  你有一些问题`make`（坏的makefile？）使它认为实现该功能的文件不需要编译，或者它已经编译并且不需要重新编译。修复 makefile 和/或删除对象和库文件将解决问题。

5.  您混合了 C 和 C++ 代码，并且由于 C++ 名称修改而遇到问题。在这里使用`extern "C" { }`可能会有所帮助。

6.  您已将该函数定义为`static`，因此它在链接时在其他模块（.c 文件）中是不可见的。删除`static`会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:24:06.580

原来问题是我的标题有两次定义，一次是静态的，一次是没有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:12:07.593

您需要链接到实现回调的实际代码，包括标头是不够的。

因此，听起来您的应用程序需要链接到库，它当然应该这样做才能调用库中的函数。

# dart - Dart2JS - 使用严格

> ID：12937528
> 
> 赞同：1
> 
> 时间：2012-10-17T15:11:33.000
> 
> 标签：dart

为什么 Dart2JS 编译器不会在每个脚本文件的顶部生成包含“use strict”的代码？如果所有生成的Javascript代码都是有效的ECMA5代码，那么编译器不应该自动添加“use strict”命令吗？

**更新：** 显然这已经被[issue 1686 跟踪了。](http://code.google.com/p/dart/issues/detail?id=1686)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:04:01.903

为了正式回答，这个功能请求可以在[Dart 问题跟踪器的](http://dartbug.com)[issue 1686](http://code.google.com/p/dart/issues/detail?id=1686)中找到。

至于为什么，对它的需求并不大，dart2js 团队一直专注于语言一致性和性能。

# ios - 我应该使用哪个 ab 测试应用程序来衡量将在 Apple App Store 中发布的使用 HTML 和 kendoui 创建的移动应用程序？

> ID：12937529
> 
> 赞同：0
> 
> 时间：2012-10-17T15:11:32.760
> 
> 标签：ios, cordova, mobile, kendo-ui

在我的公司，我们正在使用、和开发一个健身移动应用程序`kendoui`，并且我们想要衡量 UI 设计的成功，因此我们想要实施 AB 测试以在此过程中尝试不同的替代方案。此外，我们希望在中发布此应用程序，以便我们的问题与此相关。`HTML``jQuery``phonegap``Apple App Store`

1.  我们可以使用哪个应用程序或工具来实现适合我们软件架构的 AB 测试
2.  App Store 如何管理想要实施 AB 测试的应用，他们允许或不允许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T10:37:37.950

目前唯一兼容Phonegap的AB测试服务是Arise.io。

[https://arise.readthedocs.org/en/latest/phonegap.html](https://arise.readthedocs.org/en/latest/phonegap.html)

免责声明：我是 Arise 的 CTO。

# c - 在 C (Linux) 中写入文件。怎么了？

> ID：12937530
> 
> 赞同：0
> 
> 时间：2012-10-17T15:11:36.803
> 
> 标签：c, linux

2 天前，我在我的机器上安装了 linux（我生命中的第一次：P），现在我正在尝试将 char 写入文件。出于某种原因，它不起作用......这是我的代码。

```
#include <stdio.h>
#include <fcntl.h>
int main (int xd, char *tab[]) {
    char *path1 = tab[1];
    int filee = open(path1, O_WRONLY | O_CREAT| O_TRUNC, 0777);
    write(filee, 'x', sizeof(char));
    close(filee);
    return 0;
} 
```

这段小代码可能有什么问题？我已经检查并且函数'write'返回-1，即使函数'open'在文件不存在时创建文件。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:13:27.810

`write`将指向内存缓冲区的指针作为第二个参数，但您将其传递给`int`

```
write(filee,'x',sizeof(char)); 
```

你应该尝试一些类似的东西

```
char c = 'x';
write(filee, &c, sizeof(char)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:14:27.467

您正在传递一个字符文字，其中`write()`需要一个指向数据的指针。

尝试这样的事情：

```
const char data[] = { 'x' };

write(fille, data, sizeof data); 
```

`open()`此外，您应该在依赖文件描述符有效之前检查返回值。

使用您不熟悉的 API 时，最好[阅读手册页](http://linux.die.net/man/2/write)，并根据您正在使用的内容检查预期的参数。

此外，您应该启用更多编译器警告；当然，这是编译器应该警告的。

# python - 在 python 脚本中使用“pip install/uninstall”

> ID：12937533
> 
> 赞同：20
> 
> 时间：2012-10-17T15:11:43.130
> 
> 标签：python, pip

如何在 python 脚本中使用 pip 安装包？我不使用 os.system，我想导入 pip 并使用它。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2018-08-06T09:37:07.447

pip.main() 不再适用于 pip 版本 10 及更高版本。你需要使用：

```
from pip._internal import main as pipmain

pipmain(['install', 'package-name']) 
```

为了向后兼容，您可以使用：

```
try:
    from pip import main as pipmain
except ImportError:
    from pip._internal import main as pipmain 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-23T11:33:44.553

我认为这些答案已经过时了。事实上你可以这样做：

```
import pip
failed = pip.main(["install", nameOfPackage]) 
```

并在传递给 main() 的列表中插入任何其他参数。它返回 0（失败）或 1（成功）

乔恩

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T15:21:49.603

在 python 脚本中安装包不是一个好主意，因为它需要 root 权限。您应该与您创建的脚本一起提供其他模块或检查模块是否已安装：

```
try:
   import ModuleName
except ImportError:
   print 'Error, Module ModuleName is required' 
```

如果您坚持在脚本中使用 pip 安装软件包，则必须`call`从`subprocess`模块中查看（`os.system()`不推荐使用“”）。

没有 pip 模块，但您可以使用上述方法轻松创建一个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-14T10:05:05.587

我使用 os.system 来模拟安装 pip 模块的终端，（我知道 os.system 已被弃用，但它仍然有效，这也是最简单的方法），例如我正在制作一个具有多个的游戏引擎所有使用 Pygame 的 python 脚本，在启动文件中，如果他们没有，我使用此代码将 pygame 安装到用户的系统上：

```
import os
os.system('pip install pygame') 
```

不幸的是，如果他们没有 pip，我不知道如何安装它，所以这个脚本依赖于 pip。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-10T09:24:26.650

如果您**在代理后面**，则可以在代码中**安装**模块，如下所示...

```
import pip
pip.main(['install', '--proxy=user:password@proxy:port', 'packagename']) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-02-11T04:57:29.380

这是[对该帖子](https://stackoverflow.com/a/12937713/1959808)的评论，不适合分配给评论的空间。

请注意，安装包的用例可能会出现在其内部`setup.py`。例如，生成[`ply`](http://www.dabeaz.com/ply/ply.html)解析器表并将它们存储到磁盘。这些表必须在运行*之前* `setuptools.setup`生成，因为它们必须`site_packages`与正在安装的包一起复制到 。

确实存在 的[`setup_requires`选项](https://pythonhosted.org/setuptools/setuptools.html#new-and-changed-setup-keywords)，`setuptools.setup`但是它*不会*安装软件包。

*因此，安装过程和*已安装软件包所需的依赖项将不会以这种方式安装。

将这样的依赖项放在里面`install_requires`并不[*总是*按预期工作](https://bitbucket.org/pypa/setuptools/issue/209/setup_requires-and-install_requires-dont)。即使它有效，也必须将一些函数传递给`setuptools.setup`, 以便在安装依赖`setup_requires`项和安装包本身之间运行。这种方法是嵌套的，因此是针对[PEP 20](http://legacy.python.org/dev/peps/pep-0020/)的。

所以剩下的两种扁平化方法是：

1.  运行`setup.py`两次，自动（首选）或手动（通过通知用户在`setuptools.setup`.

2.  首先调用`pip`（或其他等效解决方案），以安装所需的依赖项。然后继续构建表（或任何必要的预安装任务），`setuptools.setup`最后调用。

就个人而言，我更喜欢 No.2，因为 No.1 可能会让在安装过程中观察控制台输出的用户感到困惑，除非他们已经知道调用`setuptools.setup`两次的意图。

此外，安装所需的任何权限（例如，根，如果需要），在`setup.py`运行时肯定存在（并且恰好在那时）。因此`setup.py`可以被视为此类操作的“规范”用例。

# java - 搜索基于 Web 的分析器以测量基于 Web 的应用程序的性能

> ID：12937535
> 
> 赞同：0
> 
> 时间：2012-10-17T15:11:49.573
> 
> 标签：java, jakarta-ee

我有一个运行速度很慢的 Web 应用程序。将请求从一个 JSP 页面发送到另一个页面需要很长时间。我必须衡量它的性能并找出占用时间最多的课程。换句话说，我必须进行端到端的分析。请告诉我有关免费分析器工具的信息，以测量基于 Web 的应用程序的性能。

我找到的是[http://visualvm.java.net/features.html](http://visualvm.java.net/features.html)，但我想要基于 Java EE Web 的应用程序的免费分析器。

还有家伙 jprofiler [http://www.ej-technologies.com/products/jprofiler/whatsnew72.html](http://www.ej-technologies.com/products/jprofiler/whatsnew72.html)我认为它也是一个很好的工具，但不是免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:18:35.007

我对您的要求的唯一建议是 JavaMelody：[http](http://code.google.com/p/javamelody/) ://code.google.com/p/javamelody/ 。它很棒，免费，并且清楚地概述了哪些方法占用了大部分时间，甚至哪些 SQL 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:19:58.467

如果您正在使用`Eclipse`，请尝试[**Eclipse TPTP（Eclipse 测试和性能工具平台项目）**](http://www.eclipse.org/tptp/)。

**TPTP 解决了从早期测试到生产应用程序监控**的整个测试和性能生命周期，包括测试编辑和执行、监控、跟踪和分析以及日志分析功能。该平台支持广泛的计算系统，包括嵌入式、独立、企业和高性能，并将继续扩展支持以涵盖尽可能广泛的系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:14:42.730

你可以试试 HttpWatch，他们有免费版本。这对于端到端测量很有用。您可以将其与 Selenium 结合使用来测量场景。

[http://www.httpwatch.com/](http://www.httpwatch.com/)

java melody 从服务器/线程/连接的角度给出了不同的视角

[http://code.google.com/p/javamelody/](http://code.google.com/p/javamelody/)

JMeter 帮助您模拟负载

[http://jmeter.apache.org/](http://jmeter.apache.org/)

# javascript - 如何在选择框的某些选项中添加文本？

> ID：12937541
> 
> 赞同：0
> 
> 时间：2012-10-17T15:12:07.737
> 
> 标签：javascript, jquery

在一个表单中，我有一个选择框，其中一些选项是 ajax 根据先前输入的值预先选择的。
我想在选项中添加额外的文本（只有那些已经被 ajax 根据之前的值预先选择的文本）。

```
for (i in data) {
$("#my_select_box_id").val(data[i][0])..attr('selected',true); //that works

//I would like to use something like that but it's not working
$("#my_select_box_id").text(data[i][1]);
} 
```

我想我必须预先选择选项，但这也不起作用：

```
$("#my_select_box_id option[value=data[i][0]).text(data[i][1]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:14:42.917

```
$("#my_select_box_id").html(data[i][1]); 
```

要使其被选中，您可以使用：

```
$("#my_select_box_id").attr("selected", "selected"); 
```

*编辑，我实际上不确定它是否会在您使用上述调用时选择选项项目，W3C 指定它将在页面加载时...您可以报告吗？

--

要选择所需的选项元素并更改标签，请尝试：

```
$("#my_select_box_id option[value=" + data[i][0]+"]").html(data[i][1]); 
```

# css - 首先渲染样式表？

> ID：12937544
> 
> 赞同：0
> 
> 时间：2012-10-17T15:12:17.283
> 
> 标签：css

我有一个程序在我的开发机器和 QA 上运行良好，但在 Stage 上无法正常运行。

问题似乎是 Stage 是一个慢得多的盒子，网页需要很长时间才能出现。当它出现时，页面的大部分不同部分看起来都很好，但是有一段代码“原始”出现......但这我的意思是样式表尚未应用于它。

有没有办法“强制”这个样式表首先应用于页面？

谢谢

# javascript - 从 HTML 到 ASPX 的 AJAX 调用？

> ID：12937545
> 
> 赞同：1
> 
> 时间：2012-10-17T15:12:18.833
> 
> 标签：javascript, asp.net, ajax

```
if(window.XMLHttpRequest) {
        request = new XMLHttpRequest();
    } else {
        request = new ActiveXObject("Microsoft.XMLHTTP");
    }

request.open('GET', 'foo.php?bar=' + baz, true);
request.send() 
```

我知道这可以用 PHP 完成，但我想知道它是否/如何用 aspx（即`request.open('GET', 'foo.aspx?bar=' + baz, true);`）完成。在上面的示例中，AJAX 调用是从一个普通的旧 HTML 页面（不是 PHP）用 javascript 进行的，但它可以与 PHP 交互。

可以用aspx做同样的事情吗？如果是这样，我是否需要针对文件后面的代码？假设 aspx 只是为了响应这样的请求，是否有一些东西可以放入自动传递`GET`给 vb/cs 文件的 aspx 文件中？

任何帮助，将不胜感激。我只是更习惯于使用 PHP，但我目前的工作主要是 VB 商店，因此欢迎比较 PHP。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:14:29.747

Ajax 只是意味着“在不离开页面的情况下从 JavaScript 发出 HTTP 请求”。

HTTP 请求没有什么特别之处。

服务器可以以您喜欢的任何方式生成响应。静态文件、Perl、JavaScript（通过 Node）、PHP、ASP.NET，任何你喜欢的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:21:30.280

Aspx 并不打算以这种方式工作。

您将需要在页面的 Load 事件上捕获 ajax 调用，然后 Response.Write 任何您想要作为字符串返回的内容。然后你必须设置 Response.ContentType，然后你需要用 Response.End 结束它。

它很复杂，而且有点 hack。

您最好的选择是开始学习 asp net mvc，这很可能与任何 php mvc 框架类似。

# zend-framework2 - 如何在 Zend Framework 2 中设置第一个应用程序

> ID：12937546
> 
> 赞同：18
> 
> 时间：2012-10-17T15:12:19.083
> 
> 标签：zend-framework2, composer-php

我正在 zf2 中创建我的第一个应用程序。我关注了 Zend 官方网站[zf2 Skeleton Application](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)。我已经从 github 下载了骨架应用程序，如给定链接中所示。当我将其解压缩并将其放入我的文件夹并运行它时，它会显示此致命错误

```
 Fatal error: Uncaught exception 'RuntimeException' with message 'Unable to load ZF2\. 
 Run  `php composer.phar install` or define a ZF2_PATH environment variable.' in 
 D:\projects\zf2\zf2_app\init_autoloader.php:50 Stack trace: #0 D:\projects\zf2\zf2_app
 \public\index.php(9): require() #1 {main} thrown in D:\projects\zf2\zf2_app
 \init_autoloader.php on line 50 
```

我不知道如何解决这个问题？？

那这个呢？

```
To install Zend Framework 2 into our application we simply type:
  php composer.phar self-update
  php composer.phar install 
```

在哪里输入这些命令？帮助我完成我的第一个 ZF2 应用程序

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T15:39:27.620

您应该打开一个 cmd 窗口并将目录更改为您的项目。然后，您需要键入以下内容：

```
php composer.phar install 
```

这将安装 Zend Skeleton 应用程序的所有库依赖项 - 在本例中为 ZF2。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T06:51:59.973

除了 Rob Allens 的回答之外，到目前为止，我还从对命令行经验较少的 Windows 用户那里得到了很好的回应。

您可能会发现我的博客也很有帮助：[Zend Framework 2 installation on Xampp for Windows](http://samminds.com/2012/07/zend-framework-2-installation-on-xampp-for-windows/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T21:57:47.863

您可能需要执行以下步骤：

1.  从 Github 下载 ZF2 骨架应用程序。

2.  更改要安装的目录，然后解压缩骨架应用程序。

3.  将目录更改为“ZendSkeletonApplication-master”，然后运行以下命令：

    php composer.phar 自我更新
    php composer.phar 安装

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T15:37:01.173

好像你还没有下载 zf2 :) 从这里下载它[http://framework.zend.com/downloads/latest#ZF2](http://framework.zend.com/downloads/latest#ZF2)

将框架提取到供应商/ZF2。你完成了:) 现在浏览到你的应用程序，希望它显示无异常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-21T01:03:45.037

1.从你的 apache 启用 LoadModule rewrite_module modules/mod_rewrite.so

2.从你的 php.ini 启用 extension=php_openssl.dll

[3.从http://getcomposer.org/doc/00-intro.md#autoloading](http://getcomposer.org/doc/00-intro.md#autoloading)安装 Composer 。Linux 和 windows 都有说明。

4.从 github 下载骨架项目（[https://github.com/zendframework/ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)并单击“Zip”按钮）到您的 htdocs。

5.进入刚刚下载好的骨架项目的目录。

6.运行 php composer.phar install。这将下载所有依赖项。

7.转到[http://framework.zend.com/manual/2.2/en/user-guide/skeleton-application.html](http://framework.zend.com/manual/2.2/en/user-guide/skeleton-application.html)并相应地创建一个虚拟主机。

```
<VirtualHost *:80>
  ServerName zf2-tutorial.localhost
DocumentRoot /path/to/zf2-tutorial/public
SetEnv APPLICATION_ENV "development"
<Directory /path/to/zf2-tutorial/public>
    DirectoryIndex index.php
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

8.转到 c:\windows\system32\drivers\etc\hosts (Windows) 或 /etc/hosts(Linux) 并添加以下行： `127.0.0.1 zf2-tutorial.localhost localhost`

9.转到[http://zf2-tutorial.localhost/](http://zf2-tutorial.localhost/)，您应该会看到欢迎页面。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-03T18:20:12.283

让@Rob Allen 变得更容易怎么样？回答时，让其他读者可以节省24小时到1分钟！！我试图让您的回答更容易，如下所示：

```
1) httpd.conf
<VirtualHost *:80>
 ServerName site
 ServerAlias site
 DocumentRoot /var/www/html/s/public
 <Directory /var/www/html/s/public>
    #AddDefaultCharset utf-8
    DirectoryIndex index.php
    AllowOverride FileInfo
    Order allow,deny
    Allow from all
 </Directory>
</VirtualHost>

2) i did git clone git repo
$ ls
composer.json  composer.lock  composer.phar  config  data  db_bck  init_autoloader.php  LICENSE.txt  module  nbproject  public  README.md  vendor

3) I run and i get same error

4) I did now this

$ php composer.phar install
Loading composer repositories with package information
Installing dependencies from lock file
  - Installing zendframework/zendframework (2.0.6)
    Downloading: 100%         

    Skipped installation of bin/classmap_generator.php for package zendframework/zendframework: name conflicts with an existing file
zendframework/zendframework suggests installing doctrine/common (Doctrine\Common >=2.1 for annotation features)
zendframework/zendframework suggests installing ext-intl (ext/intl for i18n features)
zendframework/zendframework suggests installing pecl-weakref (Implementation of weak references for Zend\Stdlib\CallbackHandler)
zendframework/zendframework suggests installing zendframework/zendpdf (ZendPdf for creating PDF representations of barcodes)
zendframework/zendframework suggests installing zendframework/zendservice-recaptcha (ZendService\ReCaptcha for rendering ReCaptchas in Zend\Captcha and/or Zend\Form)
Generating autoload files

5) It works now 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-05T20:32:14.780

因为您已经下载了 GIT 文件，所以下面的命令适用于 windows：

1) 转到相应的文件夹 2) 运行命令 -> composer update 3) 这应该让您安装和选择可选模块 4) 最后 -> php -S 0.0.0.0:8080 -t .\public .\public\index .php

有了这个，您应该能够访问[http://localhost:8080/的索引页面](http://localhost:8080/)

# ruby-on-rails - 具有最新日期的对象 mongoid

> ID：12937547
> 
> 赞同：0
> 
> 时间：2012-10-17T15:12:20.080
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

我有 2 个具有`created_at`属性的对象。

我想知道这两个对象中的哪一个是最近日期的查询

对象 1：

```
#<User _id: 504726081d41c809e5000003, _type: "User", created_at: 2012-09-05 10:14:33 UTC > 
```

对象 2：

```
#<User _id: 503fb40f1d41c8255a000007, _type: "User", created_at: 2012-08-30 18:42:24 UTC > 
```

## 已编辑

**这 2 个对象在数组内部：类似于：**

```
 [#<User _id: 504726081d41c809e5000003, _type: "User", created_at: 2012-09-05 10:14:33>, #<User _id: 503fb40f1d41c8255a000007, _type: "User", created_at: 2012-08-30 18:42:24>] 
```

**我不能用`.last`。我需要使用最新日期。**

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:15:59.607

我会说：

```
User.order_by([:created_at, :desc]).limit(1).first #useful to include other ordering conditions 
```

或者：

```
User.desc(:created_at).limit(1).first 
```

* * *

由于您的编辑：

```
array.max_by{|u| u.created_at} 
```

# ruby - 如何发布依赖无关代码的gem？

> ID：12937551
> 
> 赞同：0
> 
> 时间：2012-10-17T15:12:29.980
> 
> 标签：ruby, rubygems, gem, bundler

真的不知道怎么称呼这个。第一次写gem，所以不确定最好的方法。

我正在发布一个“图形”Ruby gem，它使用我编写的 2D Array 类。以下 2 种方法中哪种方法最好？

1.  将 2D Array 类放入 gem 中。这很好，但我将更新课程，我不想在一个地方进行更新，然后将文件复制到 gem 中并更新它的复杂过程。
2.  将 2D Array 类作为单独的 gem 发布，并让 Graphics gem 依赖它。我猜 bundler 会处理这种依赖关系，所以人们很容易使用......？

还有其他理由选择其中一个吗？哪个是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:25:29.257

实际上，您的用户不需要 bundler：rubygems 本身处理 gems 的依赖关系，是的，它很容易被人们使用。

1 和 2 之间的选择取决于您。记录和维护两个单独的 gem 会涉及一些额外的开销。如果您确定 2D 数组类本身很有用，并且您有其他地方想使用它，那么制作两个 gem 是一个不错的主意。

# c++ - 指向函数的困难指针

> ID：12937555
> 
> 赞同：0
> 
> 时间：2012-10-17T15:12:39.497
> 
> 标签：c++, function

我正在阅读“用 C++ 思考”布鲁斯·埃克尔 (Bruce Eckel) 的书。第 164 页（波兰语版）中的第 3 章是关于函数指针的。

书中的例子：

```
void * (*(*fp1)(int))[10]
float (*(*fp2)(int,int,float))(int)
double (*(*(*fp3)())[10])()
int (*(*f4())[10])() 
```

你能告诉我我应该如何解释这一点以及这些例子创造了什么，因为我不明白这本书的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:14:53.290

我希望这个棘手的规则能帮助你解开这些难题： [http ://c-faq.com/decl/spiral.anderson.html](http://c-faq.com/decl/spiral.anderson.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:17:07.763

让我们拿4：`int (*(*f4())[10])()`

它读取已`f4`评估 ( `f4()`)，然后取消引用 ( `(*f4())`) 可以订阅 ( `(*f4())[10]`)，然后取消引用 ( `(*(*f4())[10])`) 并评估以给出`int`( `int (*(*f4())[10])()`)。

因此，它是一个将数组指针返回到返回函数指针的函数`int`。

# objective-c - 禁用单个故事板？

> ID：12937557
> 
> 赞同：0
> 
> 时间：2012-10-17T15:12:47.843
> 
> 标签：objective-c, ios, xcode, storyboard, uiswipegesturerecognizer

有没有一种简单的方法可以根据条件禁用单个情节提要场景？

我用来检查是否为我的应用启用了位置服务：

```
[CLLocationManager authorizationStatus] != kCLAuthorizationStatusDenied 
```

如果上述情况属实，那么我想禁用我创建的场景和相关的转场以到达该场景（我正在使用左/右滑动手势）。

** 更新：我将多个故事板与多个场景混淆了......我的问题已更新以反映这一点。我想禁用故事板中的特定场景，而不是故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:07:15.450

为了做你想做的事，你应该在你的视图控制器中编写一个动作，使用你设置的条件来选择场景（或根本没有）。不要只是让一个按钮或手势触发一个 push segue——让它触发视图控制器中的动作，以便您可以在代码中选择下一个场景。

您可以直接在故事板文件中设置转场，这一切都很好，而且它是一个很棒的演示，但是当您想在运行时确定目标场景时，您需要在代码中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:17:06.250

我最终从这篇文章中得到了提示：[https ://stackoverflow.com/questions/8309104/enable-disable-swiper-gesture-or-view-change-in-storyboard](https://stackoverflow.com/questions/8309104/enable-disable-swiper-gesture-or-view-change-in-storyboard)

我刚刚在标题中为滑动手势创建了一个 IBOutlet 并将以下代码放在一个 if 语句中，该语句检查用户是否启用了位置服务并将其连接到 IB 中的 segue 之外：

```
swipe.enable = NO; 
```

感谢大家的帮助！

# python - jit-lock-function 在劣质 Python 中进入无限循环

> ID：12937562
> 
> 赞同：2
> 
> 时间：2012-10-17T15:13:03.863
> 
> 标签：python, emacs

自从我尝试`M-x``run-python`Python shell 的最后一次更新以来，它都无法正常启动。我需要杀死正在启动它的进程，否则 Emacs 会被锁定。如果然后我尝试在 shell 中输入，则输入有效，但由于我只需要评估，结果不会显示，除非我用`C-g`. 消息缓冲区显示：

```
Error during redisplay: (jit-lock-function 468) signaled (quit) 
```

这是一个已知问题吗？我应该在哪里寻找问题的根源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:30:45.670

错误报告可能最有帮助

Mx 报告-emacs-bug

# php - 如果恢复选择框选项

> ID：12937567
> 
> 赞同：0
> 
> 时间：2012-10-17T15:13:15.257
> 
> 标签：php, javascript, jquery, .post

所以我有一种情况，我有一个选择框，可以在 .change 事件上对另一个脚本进行 jquery .post 调用。

我想知道如果发生某些事情或我的 .post 事件失败，我是否可以将 selectedoption 恢复为原始默认值？

嗨，PPL，我很抱歉。

这是javascript代码。我对它做了一些修改。我正在尝试让第二行工作，因为由于一些错误（由于不知道第二行上的内容），此代码现在无法正常工作。我的选择框是列表的一部分，因此我无法将其设置为唯一的 id 并记住用户选择的框，我需要使用 $(this)。

```
 $('.order_stateselect').click(function(){
        var val=$(this).find(":selected").val();
        $(this).change(function(){
            if(confirm('Confirm Order Status Change?')){
                var conduct_status_chge=$.post('/seller/helpers/order_status_change.php',{order_item_id:$(this).parent('td').siblings('.order_item_id').text(),order_item_status:$(this).find(':selected').val()},function(data){
                    alert(data);
                })
                .error(function() { alert("error"); })
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:20:12.050

没有代码很难说，但我会尝试

```
$("#selectbox").data('origValue', $("#selectbox").val());

$("#selectbox").on('change', function () {
   $.post(...).done(function () {
      // other stuff
      $("#selectbox").data('origValue', $("#selectbox").val());
   }).fail(function () {
      $("#selectbox").val($("#selectbox").data('origValue'));
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:20:24.823

您可以使用它来选择与默认值无关的第一个选项：

```
$('#selectId option:eq(0)').attr('selected',true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:18:21.493

使用这样的东西

```
 var value=$("#selectbox").val();
    $.ajax({
    type:post,
    url:"something.com",
    success:function(){

    },error:function(){
    $("#selectbox").val(value);
    }

    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T15:18:30.883

```
$('select').val('defaultvalhere'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T15:26:26.170

您可以简单地使用全局变量来保存之前选择的选项。保存后，您可以在您`error`的类似这样的东西上使用它

```
<script type="text/javascript">
this.previousVal = 0;
function changeHandler(selectBox)
    {    

$.ajax({
type:post,
url:"URL",
success:function(){
//ur code
this.previousVal=selectBox.selectedIndex;
},error:function(){
//use previousVal and set the value back to the previous value
}

})

    }                           
</script>

<select id="changeLang" name="changeLang" onchange="changeHandler(this)"></select> 
```

# oracle10g - Oracle 10g 中的报表生成器

> ID：12937574
> 
> 赞同：0
> 
> 时间：2012-10-17T15:13:53.867
> 
> 标签：oracle10g, report, oraclereports

我是使用 Oracle 10g 制作报告的新手。我已经安装了 Oracle 10g（数据库快捷版）。它在我的电脑上的 8080 端口运行，我正在尝试制作报告。但我找不到报告生成器。

请帮助我如何使用报告生成器并建议一些好的教程。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:51:31.363

Install the Oracle Developer Suite for Forms and Reports.. You can use the Report Builder from this to generate your Reports..

# groovy - 如何验证对象是否具有某些属性？

> ID：12937579
> 
> 赞同：49
> 
> 时间：2012-10-17T15:14:10.967
> 
> 标签：groovy

我想使用预期属性的值或指定的默认值。如何在 groovy 中实现这一点？

让我们看一下这个例子：

```
def printName(object) {
   //if object has initialized property 'name' - print 'name', otherwise print ToString
   if (object<some code here>name && object.name) {
      print object.name
   } else {
      print object
   }
} 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-17T15:23:32.767

您可以使用[`hasProperty`](http://docs.groovy-lang.org/latest/html/groovy-jdk/java/lang/Object.html#hasProperty(java.lang.String)). 例子：

```
if (object.hasProperty('name') && object.name) {
    println object.name
} else {
    println object
} 
```

如果您使用变量作为属性名称，则可以使用：

```
String propName = 'name'
if (object.hasProperty(propName) && object."$propName") {
    ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T15:23:02.863

假设你`object`是一个 Groovy 类，你可以像这样`hasProperty`在对象中使用`metaClass`：

```
def printName( o ) {
  if( o.metaClass.hasProperty( o, 'name' ) && o.name ) {
    println "Printing Name : $o.name"
  }
  else {
    println o
  }
} 
```

所以，然后给出两个类：

```
class Named {
  String name
  int age

  String toString() { "toString Named:$name/$age" }
}

class Unnamed {
  int age

  String toString() { "toString Unnamed:$age" }
} 
```

您可以创建它们的实例，并测试：

```
def a = new Named( name: 'tim', age: 21 )
def b = new Unnamed( age: 32 )

printName( a )
printName( b ) 
```

哪个应该输出：

```
Printing Name : tim
toString Unnamed:32 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-11T13:00:03.773

您可以通过元编程编写自己的方法：

```
class Foo {
    def name = "Mozart"
}

def f = new Foo()

Object.metaClass.getPropertyOrElse = { prop, defaultVal ->
    delegate.hasProperty(prop) ? delegate."${prop}" : defaultVal
}

assert "Mozart" == f.getPropertyOrElse("name", "")
assert "Salzburg" == f.getPropertyOrElse("city", "Salzburg") 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-05-20T16:52:22.447

如果我只是想断言一个对象具有某些属性，我只需测试以下内容：

```
assertNotNull(myObject.hasProperty('myProperty').name) 
```

如果`myObject`没有`myProperty`断言将失败并出现空指针异常：

```
java.lang.NullPointerException: Cannot get property 'name' on null object 
```

# hadoop - 自定义 WritableCompare 将对象引用显示为输出

> ID：12937581
> 
> 赞同：1
> 
> 时间：2012-10-17T15:14:13.927
> 
> 标签：hadoop, mapreduce

我是 Hadoop 和 Java 的新手，我觉得我缺少一些明显的东西。如果这意味着什么，我正在使用 Hadoop 1.0.3。

我使用 hadoop 的目标是获取一堆文件并一次解析一个文件（而不是逐行解析）。每个文件都会产生多个键值对，但其他行的上下文很重要。键和值是多值/复合的，所以我为键实现了 WritableCompare，为值实现了 Writable。因为每个文件的处理需要一点 CPU，我想保存映射器的输出，然后运行多个减速器。

对于复合键，我遵循 [http://stackoverflow.com/questions/12427090/hadoop-composite-key][1]

问题是，输出只是 Java 对象引用，而不是复合键和值。例子： `LinkKeyWritable@bd2f9730 LinkValueWritable@8752408c`

我不确定问题是否与根本不减少数据有关，或者

这是我的主要课程：

```
public static void main(String[] args) throws Exception {
  JobConf conf = new JobConf(Parser.class);
  conf.setJobName("raw_parser");

  conf.setOutputKeyClass(LinkKeyWritable.class);
  conf.setOutputValueClass(LinkValueWritable.class);

  conf.setMapperClass(RawMap.class);
  conf.setNumMapTasks(0);

  conf.setInputFormat(PerFileInputFormat.class);
  conf.setOutputFormat(TextOutputFormat.class);

  PerFileInputFormat.setInputPaths(conf, new Path(args[0]));
  FileOutputFormat.setOutputPath(conf, new Path(args[1]));

  JobClient.runJob(conf);
} 
```

还有我的 Mapper 类：

公共类 RawMap 扩展 MapReduceBase 实现 Mapper {

```
 public void map(NullWritable key, Text value,
            OutputCollector<LinkKeyWritable, LinkValueWritable> output,
            Reporter reporter) throws IOException {
        String json = value.toString();
        SerpyReader reader = new SerpyReader(json);
        GoogleParser parser = new GoogleParser(reader);
        for (String page : reader.getPages()) {
            String content = reader.readPageContent(page);
            parser.addPage(content);
        }
        for (Link link : parser.getLinks()) {
            LinkKeyWritable linkKey = new LinkKeyWritable(link);
            LinkValueWritable linkValue = new LinkValueWritable(link);
            output.collect(linkKey, linkValue);
        }
    }
} 
```

Link 基本上是在 LinkKeyWritable 和 LinkValueWritable 之间拆分的各种信息的结构

LinkKeyWritable：

```
public class LinkKeyWritable implements WritableComparable<LinkKeyWritable>{
    protected Link link;

    public LinkKeyWritable() {
        super();
        link = new Link();
    }

    public LinkKeyWritable(Link link) {
        super();
        this.link = link;
    }

    @Override
    public void readFields(DataInput in) throws IOException {
        link.batchDay = in.readLong();
        link.source = in.readUTF();
        link.domain = in.readUTF();
        link.path = in.readUTF();
    }

    @Override
    public void write(DataOutput out) throws IOException {
        out.writeLong(link.batchDay);
        out.writeUTF(link.source);
        out.writeUTF(link.domain);
        out.writeUTF(link.path);
    }

    @Override
    public int compareTo(LinkKeyWritable o) {
        return ComparisonChain.start().
                compare(link.batchDay, o.link.batchDay).
                compare(link.domain, o.link.domain).
                compare(link.path, o.link.path).
                result();
    }

    @Override
    public int hashCode() {
        return Objects.hashCode(link.batchDay, link.source, link.domain, link.path);
    }

    @Override
    public boolean equals(final Object obj){
        if(obj instanceof LinkKeyWritable) {
            final LinkKeyWritable o = (LinkKeyWritable)obj;
            return Objects.equal(link.batchDay, o.link.batchDay)
                    && Objects.equal(link.source, o.link.source)
                    && Objects.equal(link.domain, o.link.domain)
                    && Objects.equal(link.path, o.link.path);
        }
        return false;
    }
} 
```

链接值可写：

```
public class LinkValueWritable implements Writable{
    protected Link link;

    public LinkValueWritable() {
        link = new Link();
    }

    public LinkValueWritable(Link link) {
        this.link = new Link();
        this.link.type = link.type;
        this.link.description = link.description;
    }

    @Override
    public void readFields(DataInput in) throws IOException {
        link.type = in.readUTF();
        link.description = in.readUTF();
    }

    @Override
    public void write(DataOutput out) throws IOException {
        out.writeUTF(link.type);
        out.writeUTF(link.description);
    }

    @Override
    public int hashCode() {
        return Objects.hashCode(link.type, link.description);
    }

    @Override
    public boolean equals(final Object obj){
        if(obj instanceof LinkKeyWritable) {
            final LinkKeyWritable o = (LinkKeyWritable)obj;
            return Objects.equal(link.type, o.link.type)
                    && Objects.equal(link.description, o.link.description);
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T20:27:35.393

我认为答案在于[TextOutputFormat](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-320/org/apache/hadoop/mapred/TextOutputFormat.java#TextOutputFormat.LineRecordWriter.writeObject%28java.lang.Object%29)的实现。具体来说，LineRecordWriter 的 writeObject 方法：

```
/**
 * Write the object to the byte stream, handling Text as a special
 * case.
 * @param o the object to print
 * @throws IOException if the write throws, we pass it on
 */
private void writeObject(Object o) throws IOException {
  if (o instanceof Text) {
    Text to = (Text) o;
    out.write(to.getBytes(), 0, to.getLength());
  } else {
    out.write(o.toString().getBytes(utf8));
  }
} 
```

如您所见，如果您的键或值不是 Text 对象，它会调用它的 toString 方法并将其写出。由于您的键和值中未实现 toString，因此它使用 Object 类的实现，它正在写出引用。

我想说您应该尝试编写适当的 toString 函数或使用不同的 OutputFormat。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:20:32.323

看起来你有一个你想要的对象列表。如果您想要打印出人类可读的版本而不是丑陋的 Java 引用，则需要在可写对象上实现 toString()。

# php - PHP RSS 阅读器 - 多个类别标签

> ID：12937591
> 
> 赞同：0
> 
> 时间：2012-10-17T15:14:45.347
> 
> 标签：php, rss, categories

所以我正在使用这个功能：

```
function getFeed($feed_url) {  
    $content = file_get_contents($feed_url);  
    $x = new SimpleXmlElement($content);  
    echo "<ul>";  
    foreach($x->channel->item as $entry) {  
        echo "<li><a href='$entry->link' title='$entry->title'>" . $entry->title . "</a></li>";
        echo "<li>Category:" . $entry->category . "</li>";
    }  
    echo "</ul>";  
} 
```

我正在使用的 RSS 提要有多个“类别”值。我如何检索所有这些？

如下图所示

```
<category>Cat 1</category>
<category>Cat 2</category> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:18:59.587

你有没有尝试过：

```
function getFeed($feed_url) {  
    $content = file_get_contents($feed_url);  
    $x = new SimpleXmlElement($content);  
    echo "<ul>";  
    foreach($x->channel->item as $entry) {  
        echo "<li><a href='$entry->link' title='$entry->title'>" . $entry->title . "</a></li>";
        foreach($entry->category as $writeMe)
            echo "<li>Category:" . $writeMe . "</li>";
    }  
    echo "</ul>";  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:20:58.823

你可以改变：

```
echo "<li>Category:" . $entry->category . "</li>"; 
```

和：

```
foreach($entry->category as $category) {
    echo "<li>Category:" . $category . "</li>";
} 
```

但是你能提供 XML 结构吗？它应该是：

```
<categories>
    <category>Cat 1</category>
    <category>Cat 2</category> 
</categories> 
```

# ios - iOS：继承 UILabel 并更新其缩进

> ID：12937593
> 
> 赞同：0
> 
> 时间：2012-10-17T15:14:49.230
> 
> 标签：ios, uilabel

我有一个包含相当大表格的应用程序。我对 UILabel 进行了子类化，因此我可以在表单标签中保持一致性。但是，一些标签将成为具有背景颜色的部分分隔符，并且它们需要缩进。

我知道我可以通过使用以下代码实例化 UILabel 的缩进设置：

```
- (void)drawTextInRect:(CGRect)rect {
    UIEdgeInsets insets = {0, 5, 0, 5};
    return [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];
} 
```

但这会为所有标签添加插图。不是我想要的。

所以我所做的是编写了一个自定义方法：

```
- (void) makeInsets
{
    CGRect rect = self.frame;

    if (hasInset) {
        UIEdgeInsets insets = {0, 5, 0, 5};
        return [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];
    } else {
        UIEdgeInsets insets = {0, 0, 0, 0};
        return [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];
    }
} 
```

问题是它发生在绘制 UILabel 之后。我尝试过`[UILabelSubclass setNeedsDisplay:YES]`，但该方法出现“无可见界面”错误`setNeedsDisplay`。有没有办法可以用我的自定义插图覆盖现有的插图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:26:15.987

`setNeedsDisplay`由于[该方法](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCCADHC)不带参数，因此您会收到“无可见界面”错误。你应该只写：

```
[subclassedLabelInstance setNeedsDisplay]; 
```

并且该错误应该消失。它也可能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:26:19.027

既然你是子类化它......你不能只添加一个布尔属性来指示是否缩进吗？

.h 文件

```
@property BOOL indentText; 
```

.m 文件

```
- (id) initWithIndent:(BOOL)indent {

    if((self = [super init])) {
        self.indentText = indent;
    }

    return self;
}

- (void)drawTextInRect:(CGRect)rect {

    if( self.indentText ) {
        UIEdgeInsets insets = {0, 5, 0, 5};
        return [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];
    }
} 
```

如果您计划进行大量自定义，那么您可以在创建标签时传递某种样式常量以指示如何标记它......但如果您打算做的只是这个，那么我会只需添加一个简单的属性即可将其打开。

# image - 为 Matlab 自定义颜色图

> ID：12937596
> 
> 赞同：1
> 
> 时间：2012-10-17T15:14:52.413
> 
> 标签：image, matlab, manual, color-mapping

我不知道如何解决这个问题。我正在尝试找到有关如何自定义颜色图（不使用颜色图编辑器）以在 Matlab 中为图像设置颜色和边界的良好资源。我已经设法使用颜色图编辑器来完成它，但我想弄清楚如何手动完成它。

我正在尝试制作一个范围在 0 到 127 之间的颜色图。边界是：

0 到 64 是黑色 (0) 到白色 (64)

65 到 127 是蓝色 (65) 到红色 (127)

有人可以就如何手动对颜色图进行这些更改给我一些建议吗？一个好的资源也会很有用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:20:40.070

我建议使用`linspace`. 它可以帮助您在某个范围内创建均匀的数字分布。

```
 blackToWhite = repmat(linspace(0,1,66),3,1)' ; 
 l1 = linspace(0,1,127-65+1);
 blueToRed = [flipud(l1(:)) zeros(size(l1(:))) l1(:) ];

 cmap = [blackToWhite; blueToRed]; 
```

这个想法是插值`[1 0 0]`到`[0 0 1]`; 每个颜色通道，红绿和蓝都是自己插值的。

```
 Red -> 1 ... 0
     Green -> 0 ... 0
     Blue ->  0 ... 1 
```

所以我`l1`为红色和蓝色通道都生成了，但在其中一个中翻转了它。

# python - lxml：如何将（python）元组/列表传递给etree.XSLT（）对象以从xslt动态生成xml？

> ID：12937603
> 
> 赞同：2
> 
> 时间：2012-10-17T15:15:10.200
> 
> 标签：python, xml, list, xslt, lxml

lxml 的文档讨论`passing`了 xslt 的参数。它是： http: [//lxml.de/xpathxslt.html#stylesheet-parameters](http://lxml.de/xpathxslt.html#stylesheet-parameters)但是我如何将 a 传递`sequence/tuple/list`给相同的`transform`方法，以便我的 xslt 将捕获它并使用它（到 xml）呈现它`xsl:for-each`

如果我像这样通过它：

```
transform = etree.XSLT(xslt_content)
transform(input_xml_content,
          **{'items':('item1', 'item2')}) 
```

我得到的是：

```
 File "xslt.pxi", line 519, in lxml.etree.XSLT.__call__ (src/lxml/lxml.etree.c:119769)
  File "xslt.pxi", line 642, in lxml.etree._convert_xslt_parameters (src/lxml/lxml.etree.c:120985)
  File "xslt.pxi", line 634, in lxml.etree._convert_xslt_parameters (src/lxml/lxml.etree.c:120882)
  File "apihelpers.pxi", line 1364, in lxml.etree._utf8 (src/lxml/lxml.etree.c:22190)
TypeError: Argument must be bytes or unicode, got 'tuple' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:48:01.713

您的参考资料非常简单地解释了一切。参数传递的语法是这样的......

```
>>> result = transform(doc_root, a="'A'")
>>> str(result)
'<?xml version="1.0"?>\n<foo>A</foo>\n' 
```

您所要做的就是将数据序列化为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T18:04:27.090

也许有点晚了，但我正在寻找同样问题的答案，但找不到任何答案。我想出的是将xslt加载为xml并在使用transform应用之前对其进行修改

```
def apply_xslt(xml_file, xslt_file_path, xslt_params):
    try:
        xslt = etree.parse(xslt_file_path)

        for key, value in xslt_params.iteritems():
            xslt.find("//{http://www.w3.org/1999/XSL/Transform}param[@name='" + key + "']").attrib['select'] = value

        transform = etree.XSLT(xslt)

        newdom = transform(xml_file)
        return newdom
    except Exception as e:
        raise e 
```

# java - 加载 MSCAPI Java Keystore 而不加载私钥（硬令牌）

> ID：12937604
> 
> 赞同：12
> 
> 时间：2012-10-17T15:15:10.733
> 
> 标签：java, keystore, smartcard

我想`MSCAPI keystore`在 Java 中加载一个并检查 MY 商店中的可用证书。但是，这些证书的某些密钥驻留在硬件令牌上，并且在加载期间会弹出一个请求令牌。

有没有办法在加载 Windows 密钥库时推迟加载私钥？

```
keyStore = KeyStore.getInstance("Windows-MY", "SunMSCAPI");
keystore.load(null,null); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T19:56:12.520

弹出窗口是从 MS-CAPI 加密服务提供程序 (CSP) 激活的 - USB 令牌制造商提供的 DLL - 它最终通过驱动程序（也由令牌制造商提供）与令牌通信。KeyStore 只是进行调用，中间的层只是通过它；令牌上的固件是引发身份验证弹出窗口并维护会话状态等的固件。

关键的 Java dll 是 sunmscapi.dll，它具有以下实现：

```
// Use CertEnumCertificatesInStore to get the certificates
// from the open store. pCertContext must be reset to
// NULL to retrieve the first certificate in the store.
while (pCertContext = ::CertEnumCertificatesInStore(hCertStore, pCertContext))
{
    // Check if private key available - client authentication certificate
    // must have private key available.
    HCRYPTPROV hCryptProv = NULL;
    DWORD dwKeySpec = 0;
    HCRYPTKEY hUserKey = NULL;
    BOOL bCallerFreeProv = FALSE;
    BOOL bHasNoPrivateKey = FALSE;
    DWORD dwPublicKeyLength = 0;

    if (::CryptAcquireCertificatePrivateKey(pCertContext, NULL, NULL,
                                            &hCryptProv, &dwKeySpec, &bCallerFreeProv) == FALSE)
    {
        bHasNoPrivateKey = TRUE;

    } else {
        // Private key is available

    BOOL bGetUserKey = ::CryptGetUserKey(hCryptProv, dwKeySpec, &hUserKey);

    // Skip certificate if cannot find private key
    if (bGetUserKey == FALSE)
    {
        if (bCallerFreeProv)
            ::CryptReleaseContext(hCryptProv, NULL);

        continue;
    }
    .... 
```

如您所见，它总是检查私钥。您必须修改此代码并创建 sunmscapi.dll 的自定义版本以避免这种情况或以其他方式破坏此检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-30T13:59:43.853

此问题已在 JDK 9 中解决。

[https://bugs.openjdk.java.net/browse/JDK-8153438](https://bugs.openjdk.java.net/browse/JDK-8153438)

[http://hg.openjdk.java.net/jdk9/dev/jdk/rev/e7f78523d41d](http://hg.openjdk.java.net/jdk9/dev/jdk/rev/e7f78523d41d)

# android - ViewFlipper 中具有不同高度的多个视图

> ID：12937609
> 
> 赞同：22
> 
> 时间：2012-10-17T15:15:44.440
> 
> 标签：android, viewflipper

我有一个 ViewFlipper，其中有大约 10 个视图，每个视图的大小不同（高度）。一切正常。问题是，较小的视图正在填充（高度）以使其高度等于最大视图。有没有办法避免这个问题？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-17T20:30:10.047

好的。我搜索了一下，找到了以下解决方案。需要在. `android:measureAllChildren`_`false``ViewFlipper`

# matlab - 将元胞数组存储在数组中

> ID：12937614
> 
> 赞同：0
> 
> 时间：2012-10-17T15:16:12.833
> 
> 标签：matlab

我这样调用函数：

```
beta=NaN(size(rates,1),6);

mats=[1:50];

mats2=[2 5 10 30];

for i=1:2
y2=rates(i,mats2);
yM=rates(i,:);

dataList=struct('yM',yM,'mats',mats,'model',@NSS,'mats2',mats2,'y2',y2);

de=struct('min',[0;3.5],'max',[3.5;30],'d',2,'nP',200,'nG',600,'ww',0.1,'F',0.5,'CR',0.99,'R',0,'oneElementfromPm',1);

beta(i,:)=DElambdaVec(de,dataList,@OF);
end 
```

然而，DElabdavec 的输出是一个元胞数组：

```
output.Fbest=Fbest; output.xbest=xbest; output.Fbv=Fbv; 
```

如何在 for 循环的每次传递中存储这些项目中的每一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:44:03.393

您可以将结果保存到单元格数组 - 在这种情况下为 beta：

```
beta{i} = DElambdaVec(de,dataList,@OF); 
```

的每个元素`beta`现在都是由 返回的对象`DElambdaVec`，例如：

```
beta{1}

ans = 

Fbest: 'Fbest'
xbest: 'xbest'
  Fbv: 'Fbv' 
```

我使用示例值在此处创建条目。

请注意，您必须`beta=[]`在循环之前进行初始化。

# svn - 你如何使 svn:externals 输出到当前目录？

> ID：12937625
> 
> 赞同：0
> 
> 时间：2012-10-17T15:16:50.990
> 
> 标签：svn, tortoisesvn

我正在为我们的团队在 SVN (1.7) 中设置以下标签结构

```
...\tags\releases
                 \release_1.0
                 \release_1.1
                 \...
                 \latest (points to ...\tags\releases\release_1.1) 
```

我被困在试图创建`...\tags\releases\latest`标签。我一直在尝试设置一个`svn:externals`不会为引用的标签创建子目录的属性。例如，如果我这样做`svn propset svn:externals "somedir ^/tags/releases/release_1.0"`，请提交，然后将其签出到`test`您获得的目录中，`test\somedir`然后才能获取实际源代码。

为标签设置别名以便结帐不会创建不需要的子目录的正确方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T20:17:20.970

而不是外部（因为基于目录的外部总是在链接点创建目录）使用特定于操作系统的对象进行链接：快捷方式（将 *.lnk 添加到 repo）或连接点

# java - 颠覆：归咎于过去的修订

> ID：12937627
> 
> 赞同：11
> 
> 时间：2012-10-17T15:17:02.520
> 
> 标签：java, eclipse, svn, subclipse

我喜欢 Subversion 的责备操作（它为源文件中的每一行显示最后更改它的提交）。唉，我们最近重新格式化了我们的整个源代码，现在责备只是显示每一行最后一次被这次提交修改。

我可以以某种方式指示责备在该提交之前最后一次更改该行的时间吗？如果我可以在不离开日食的情况下做到这一点（我们使用 subclipse），则可以加分。

我尝试将工作副本切换到重新格式化之前的修订版，并在那里执行“显示注释”，但这仍然显示重新格式化最后修改的每一行......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:31:37.510

天哪，我今天*很*慢。在弹出的“显示注释”对话框的底部是设置“到修订”。将其设置为重新格式化之前的最后一个修订版按预期执行，即，责备报告重新格式化之前的提交。

我想因为我以前从不需要更改该对话框中的默认值，所以我自动跳过了它......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T15:31:28.270

您可以打开文件的历史记录，然后可以使用历史记录视图中的上下文菜单显示特定修订版本的注释。

# ios - 将数据与 GKSession 关联

> ID：12937633
> 
> 赞同：1
> 
> 时间：2012-10-17T15:17:19.077
> 
> 标签：ios, client-server, gamekit

我正在尝试制作一个哑终端设备连接到的服务器设备。由于我希望服务器设备存储有关哑设备的所有信息，因此我需要将每个对等点与一个对象相关联。我可以通过创建一个以 peerID 作为键、数据对象作为值的字典来做到这一点，但我想知道是否有更标准的方法，或者 GameKit 本身是否已经有某种可用的实现。

# linux - 通过 SSH 远程运行脚本

> ID：12937634
> 
> 赞同：3
> 
> 时间：2012-10-17T15:17:20.073
> 
> 标签：linux, bash, ssh, autologin

我需要从 100 个远程服务器收集用户信息。我们有用于身份验证的公钥/私钥基础设施，并且我已经配置`ssh-agent`了转发密钥的命令，这意味着我可以在没有密码提示的情况下登录任何服务器（自动登录）。

现在我想在所有服务器上运行一个脚本来收集用户信息（我们在所有服务器上有多少个用户帐户）。

这是我收集用户信息的脚本。

```
#!/bin/bash
_l="/etc/login.defs"
_p="/etc/passwd"

## get mini UID limit ##
l=$(grep "^UID_MIN" $_l)

## get max UID limit ##
l1=$(grep "^UID_MAX" $_l)

awk -F':' -v "min=${l##UID_MIN}" -v "max=${l1##UID_MAX}" '{ if ( $3 >= min && $3 <= max  && $7 != "/sbin/nologin" ) print $0 }' "$_p" 
```

我不知道如何在没有交互的情况下使用 ssh 运行这个脚本？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:20:44.960

听起来像是你可以使用期望做的事情。

[http://linux.die.net/man/1/expect](http://linux.die.net/man/1/expect)

> Expect 是一个根据脚本与其他交互式程序“对话”的程序。根据脚本，Expect 知道程序可以预期什么以及正确的响应应该是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T15:23:22.783

由于您需要登录远程机器，因此 AFAICT 无法“没有 ssh”来执行此操作。但是，`ssh`一旦登录就接受在远程机器上执行的命令（而不是它会启动的 shell）。因此，如果您可以将脚本保存在远程机器上，例如 as `~/script.sh`，您可以在不启动交互式 shell 的情况下执行它

```
$ ssh remote_machine ~/script.sh 
```

一旦脚本终止，连接将自动关闭（如果您没有故意配置它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-15T17:44:05.970

ssh remoteserver.example /bin/bash < localscript.bash

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T15:37:28.293

如果您在每台机器上都有一个密钥，并且可以`ssh remotehost`从您的监控主机获得，那么您就拥有了收集您所要求的信息所需的一切。

```
#!/bin/bash

servers=(wopr gerty mother)

fmt="%s\t%s\t%s\n"
printf "$fmt" "Host" "UIDs" "Highest"
printf "$fmt" "----" "----" "-------"

count='awk "END {print NR}" /etc/passwd' # avoids whitespace problems from `wc`
highest="awk -F: '\$3>n&&\$3<60000{n=\$3} END{print n}' /etc/passwd"

for server in ${servers[@]}; do
    printf "$fmt" "$server" "$(ssh "$server" "$count")" "$(ssh "$server" "$highest")"
done 
```

我的结果：

```
$ ./doit.sh
Host    UIDs    Highest
----    ----    -------
wopr    40      2020
gerty   37      9001
mother  32      534 
```

请注意，这会与每个服务器建立两个 ssh 连接以收集每个数据。如果您想更有效地执行此操作，可以将信息捆绑到一个稍微复杂一点的集合脚本中：

```
#!/usr/local/bin/bash

servers=(wopr gerty mother)

fmt="%s\t%s\t%s\n"
printf "$fmt" "Host" "UIDs" "Highest"
printf "$fmt" "----" "----" "-------"

gather="awk -F: '\$3>n&&\$3<60000{n=\$3} END{print NR,n}' /etc/passwd"

for server in ${servers[@]}; do
    read count highest < <(ssh "$server" "$gather")
    printf "$fmt" "$server" "$count" "$highest"
done 
```

（相同的结果。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T14:54:46.923

也许您想尝试如下的期望命令

```
#!/usr/bin/expect
set timeout 30
spawn ssh -p ssh_port -l ssh_username ssh_server_host
expect "password:" 
send "your_passwd\r"
interact 
```

expect 命令将捕获“密码：”，然后自动填写您在上面发送的密码。

请记住，将 ssh_port、ssh_username、ssh_server_host 和 your_passwd 替换为您自己的配置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T15:30:39.903

（注意：在不手动输入密码的情况下进行身份验证的“正确”方法是使用 SSH 密钥。即使在本地脚本中以明文形式存储密码也是一个潜在的安全漏洞）

您可以将 expect 作为 bash 脚本的一部分运行。这是一个可以入侵现有脚本的快速示例：

```
login=user
IP=127.0.0.1
password='your_password'

expect_sh=$(expect -c "
spawn ssh $login@$IP
expect \"password:\"
send \"$password\r\"
expect \"#\"
send \"./$remote_side_script\r\"
expect \"#\"
send \"cd /lib\r\"
expect \"#\"
send \"cat file_name\r\" 
expect \"#\"
send \"exit\r\"
")

echo "$expect_sh" 
```

您还可以使用 pscp 作为脚本的一部分来回复制文件，因此您无需在交互过程中手动提供密码：

安装腻子工具：

```
$ sudo apt-get install putty-tools 
```

在脚本中使用 pscp：

```
pscp -scp -pw $password file_to_copy $login@$IP:$dest_dir 
```

# embedded - u-boot内进入低功耗模式，中断唤醒

> ID：12937640
> 
> 赞同：0
> 
> 时间：2012-10-17T15:17:39.837
> 
> 标签：embedded, arm, interrupt, u-boot, arm9

我尝试在按下按钮时在 uboot 中实现低功耗“深度睡眠”功能。按钮按下由 linux 处理，并设置了一个魔术代码以使 u-boot 意识到保持睡眠不要重新启动"

```
 printf ("\nDisable interrupts to restore them later\n");
    rupts = disable_interrupts();
    printf ("\nEnable interrupts to enable magic wakeup later\n");
    enable_interrupts();
    printf ("\nSuspending. Press button to restart\n");

    while(probe_button()/*gpio probe*/){
#if 1
            //FIXME recheck if that one actually needs an unmasked interrupt or any is ok
            __asm__ __volatile__(
                            "mcr p15, 0, %0, c7, c0, 4\n" /* read cp15 */
                            "mov %0, %0"
                            : "=r" (tmp)
                            :
                            : "memory"
            );
#else
            udelay (10000);
#endif
    }
    if (rupts) {
            printf ("\nRe-Enabling interrupts\n");
            enable_interrupts();
    } 
```

不幸的是，无论是否使用热旋转，功耗都不会改变（将功耗测量与芯片相关联）。除此之外，如果我使用等待中断 CP15 指令，它永远不会唤醒。该按钮连接到其中一个 GPIO。该平台基于 Marvell Kirkwood ARM9EJ-S。

我手动启用了一些，并为以及`CONFIG_IRQ_*`创建实现，我认为这是我的问题。`arch_init_irq()``do_irq()`

根据CP15指令文档，触发中断就足够了（无论是否被屏蔽！）。

谁能告诉我我做错了什么或者除了上面的代码还需要做什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:46:00.427

我不确定这是否是您的方法无法实现节能但您的内联汇编不正确的唯一原因。根据这篇[文章](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13332.html)，您需要执行：

```
MOV R0, #0
MCR p15, 0, r0, c7, c0, 4 
```

但是你的内联汇编

```
 __asm__ __volatile__(
                        "mcr p15, 0, %0, c7, c0, 4\n" /* read cp15 */
                        "mov %0, %0"
                        : "=r" (tmp)
                        :
                        : "memory"
        ); 
```

生产

```
 0:   ee073f90    mcr 15, 0, r3, cr7, cr0, {4}
   4:   e1a03003    mov r3, r3
   8:   e12fff1e    bx  lr 
```

我不确定您的意图是什么，但`mov r3, r3`没有任何效果。因此，您正在使用随机值进行协处理器调用。您还需要在`mcr`调用之前设置 r3（mcr 的 ARM 源寄存器）。顺便说一句，当您将“内存”放入 clobber 列表[时，这意味着](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)

> > ... 将导致 GCC 不会在汇编指令中将内存值缓存在寄存器中，并且不会优化对该内存的存储或加载。

试试这条线

```
asm("MOV R0, #0\n MCR p15, 0, r0, c7, c0, 4" : : : "r0"); 
```

它产生

```
 c:   e3a00000    mov r0, #0  ; 0x0
  10:   ee070f90    mcr 15, 0, r0, cr7, cr0, {4} 
```

一般来说，为了省电，我会推荐ARM 网站上的这篇[文章。](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0008a/CJAHGJEF.html)

**奖励部分：**
对您关于此协处理器提供的 WFI 的向后兼容性的声明的一个小回答：

> > ARMv7处理器（包括Cortex-A8、Cortex-A9、Cortex-R4和Cortex-M3）都执行WFI指令进入“等待中断”模式。**在这些处理器上，在早期处理器上使用的协处理器写入将始终作为 NOP 执行。**因此，可以通过执行 MCR 和 WFI 指令来编写跨 ARMv6K、ARMv6T2 和所有 ARMv7 配置文件的代码，尽管在 ARM11MPCore 上这将导致进入两次“等待中断”模式。要编写进入“等待中断”模式的完全可移植代码，必须在运行时读取 CPUID 寄存器以确定“等待中断”是否可用以及进入它所需的指令。

# java - 处理源代码中用于身份验证的密码

> ID：12937641
> 
> 赞同：86
> 
> 时间：2012-10-17T15:17:44.657
> 
> 标签：java, security, authentication

假设我正在尝试从使用基本身份验证/基本证书的 RESTful api 中提取，那么在我的程序中存储该用户名和密码的最佳方式是什么？现在它只是以纯文本形式存在。

```
UsernamePasswordCredentials creds = new UsernamePasswordCredentials("myName@myserver","myPassword1234"); 
```

有没有一些更安全的方法？

谢谢

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-10-19T19:31:58.333

* * *

# 重要的提示：

如果您将身份验证系统作为一个整体进行设计，则不应存储密码，即使密码已加密。您存储一个哈希，并检查登录期间提供的密码是否与相同的哈希匹配。这样，您的数据库上的安全漏洞就可以避免暴露您的用户密码。

话虽如此，对于您要按原样存储数据（在本例中为密码）的情况，然后以从内到外的心态，以下是保护您的流程的一些步骤：

* * *

第一步，您应该将密码处理从 更改`String`为`character array`.

这样做的原因是 a`String`是一个`immutable`对象，因此即使对象设置为 ; 它的数据也不会立即被清除`null`；`String`数据被设置为垃圾收集，这会带来安全问题，因为恶意程序可能会在清理之前访问该（密码）数据。

[这就是Swing 的 JPasswordField`getText()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPasswordField.html#getText%28%29)方法被弃用的主要原因，以及为什么[`getPassword()`使用字符数组](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPasswordField.html#getPassword%28%29)。

* * *

第二步是加密您的凭据，仅在身份验证过程中临时解密它们。或者在服务器端对它们进行散列，存储该散列，然后“忘记”原始密码。

这与第一步类似，可确保您的漏洞时间尽可能小。

建议不要对您的凭据进行硬编码，而是以集中、可配置且易于维护的方式存储它们，例如配置或属性文件或数据库。

您应该在保存文件之前加密您的凭据，此外，您可以对文件本身应用第二次加密（对凭据进行 2 层加密，对其他文件内容进行 1 层加密）。

请注意，上面提到的两个加密过程中的每一个都可以是多层的。作为概念示例，每个加密都可以是[三重数据加密标准（AKA TDES 和 3DES）的单独应用。](http://en.wikipedia.org/wiki/Triple_DES)

* * *

在您的本地环境得到适当保护之后（但请记住，它永远不会“安全”！），第三步是通过使用[TLS（传输层安全性）或 SSL（安全套接字层）](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)对您的传输过程应用基本保护。

* * *

第四步是应用其他保护方法。

例如，对你的“使用”编译应用混淆技术，以避免（即使很快）暴露你的安全措施，以防你的程序被[Eve 女士、Mallory 先生或其他人（坏的-伙计们）](http://en.wikipedia.org/wiki/Alice_and_Bob)并反编译。

* * *

**更新 1：**

应@Damien.Bell 的要求，这是一个涵盖第一步和第二步的示例：

```
 //These will be used as the source of the configuration file's stored attributes.
    private static final Map<String, String> COMMON_ATTRIBUTES = new HashMap<String, String>();
    private static final Map<String, char[]> SECURE_ATTRIBUTES = new HashMap<String, char[]>();
    //Ciphering (encryption and decryption) password/key.
    private static final char[] PASSWORD = "Unauthorized_Personel_Is_Unauthorized".toCharArray();
    //Cipher salt.
    private static final byte[] SALT = {
        (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,
        (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,};
    //Desktop dir:
    private static final File DESKTOP = new File(System.getProperty("user.home") + "/Desktop");
    //File names:
    private static final String NO_ENCRYPTION = "no_layers.txt";
    private static final String SINGLE_LAYER = "single_layer.txt";
    private static final String DOUBLE_LAYER = "double_layer.txt";

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws GeneralSecurityException, FileNotFoundException, IOException {
        //Set common attributes.
        COMMON_ATTRIBUTES.put("Gender", "Male");
        COMMON_ATTRIBUTES.put("Age", "21");
        COMMON_ATTRIBUTES.put("Name", "Hypot Hetical");
        COMMON_ATTRIBUTES.put("Nickname", "HH");

        /*
         * Set secure attributes.
         * NOTE: Ignore the use of Strings here, it's being used for convenience only.
         * In real implementations, JPasswordField.getPassword() would send the arrays directly.
         */
        SECURE_ATTRIBUTES.put("Username", "Hypothetical".toCharArray());
        SECURE_ATTRIBUTES.put("Password", "LetMePass_Word".toCharArray());

        /*
         * For demosntration purposes, I make the three encryption layer-levels I mention.
         * To leave no doubt the code works, I use real file IO.
         */
        //File without encryption.
        create_EncryptedFile(NO_ENCRYPTION, COMMON_ATTRIBUTES, SECURE_ATTRIBUTES, 0);
        //File with encryption to secure attributes only.
        create_EncryptedFile(SINGLE_LAYER, COMMON_ATTRIBUTES, SECURE_ATTRIBUTES, 1);
        //File completely encrypted, including re-encryption of secure attributes.
        create_EncryptedFile(DOUBLE_LAYER, COMMON_ATTRIBUTES, SECURE_ATTRIBUTES, 2);

        /*
         * Show contents of all three encryption levels, from file.
         */
        System.out.println("NO ENCRYPTION: \n" + readFile_NoDecryption(NO_ENCRYPTION) + "\n\n\n");
        System.out.println("SINGLE LAYER ENCRYPTION: \n" + readFile_NoDecryption(SINGLE_LAYER) + "\n\n\n");
        System.out.println("DOUBLE LAYER ENCRYPTION: \n" + readFile_NoDecryption(DOUBLE_LAYER) + "\n\n\n");

        /*
         * Decryption is demonstrated with the Double-Layer encryption file.
         */
        //Descrypt first layer. (file content) (REMEMBER: Layers are in reverse order from writing).
        String decryptedContent = readFile_ApplyDecryption(DOUBLE_LAYER);
        System.out.println("READ: [first layer decrypted]\n" + decryptedContent + "\n\n\n");
        //Decrypt second layer (secure data).
        for (String line : decryptedContent.split("\n")) {
            String[] pair = line.split(": ", 2);
            if (pair[0].equalsIgnoreCase("Username") || pair[0].equalsIgnoreCase("Password")) {
                System.out.println("Decrypted: " + pair[0] + ": " + decrypt(pair[1]));
            }
        }
    }

    private static String encrypt(byte[] property) throws GeneralSecurityException {
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));
        Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
        pbeCipher.init(Cipher.ENCRYPT_MODE, key, new PBEParameterSpec(SALT, 20));

        //Encrypt and save to temporary storage.
        String encrypted = Base64.encodeBytes(pbeCipher.doFinal(property));

        //Cleanup data-sources - Leave no traces behind.
        for (int i = 0; i < property.length; i++) {
            property[i] = 0;
        }
        property = null;
        System.gc();

        //Return encryption result.
        return encrypted;
    }

    private static String encrypt(char[] property) throws GeneralSecurityException {
        //Prepare and encrypt.
        byte[] bytes = new byte[property.length];
        for (int i = 0; i < property.length; i++) {
            bytes[i] = (byte) property[i];
        }
        String encrypted = encrypt(bytes);

        /*
         * Cleanup property here. (child data-source 'bytes' is cleaned inside 'encrypt(byte[])').
         * It's not being done because the sources are being used multiple times for the different layer samples.
         */
//      for (int i = 0; i < property.length; i++) { //cleanup allocated data.
//          property[i] = 0;
//      }
//      property = null; //de-allocate data (set for GC).
//      System.gc(); //Attempt triggering garbage-collection.

        return encrypted;
    }

    private static String encrypt(String property) throws GeneralSecurityException {
        String encrypted = encrypt(property.getBytes());
        /*
         * Strings can't really have their allocated data cleaned before CG,
         * that's why secure data should be handled with char[] or byte[].
         * Still, don't forget to set for GC, even for data of sesser importancy;
         * You are making everything safer still, and freeing up memory as bonus.
         */
        property = null;
        return encrypted;
    }

    private static String decrypt(String property) throws GeneralSecurityException, IOException {
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));
        Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
        pbeCipher.init(Cipher.DECRYPT_MODE, key, new PBEParameterSpec(SALT, 20));
        return new String(pbeCipher.doFinal(Base64.decode(property)));
    }

    private static void create_EncryptedFile(
                    String fileName,
                    Map<String, String> commonAttributes,
                    Map<String, char[]> secureAttributes,
                    int layers)
                    throws GeneralSecurityException, FileNotFoundException, IOException {
        StringBuilder sb = new StringBuilder();
        for (String k : commonAttributes.keySet()) {
            sb.append(k).append(": ").append(commonAttributes.get(k)).append(System.lineSeparator());
        }
        //First encryption layer. Encrypts secure attribute values only.
        for (String k : secureAttributes.keySet()) {
            String encryptedValue;
            if (layers >= 1) {
                encryptedValue = encrypt(secureAttributes.get(k));
            } else {
                encryptedValue = new String(secureAttributes.get(k));
            }
            sb.append(k).append(": ").append(encryptedValue).append(System.lineSeparator());
        }

        //Prepare file and file-writing process.
        File f = new File(DESKTOP, fileName);
        if (!f.getParentFile().exists()) {
            f.getParentFile().mkdirs();
        } else if (f.exists()) {
            f.delete();
        }
        BufferedWriter bw = new BufferedWriter(new FileWriter(f));
        //Second encryption layer. Encrypts whole file content including previously encrypted stuff.
        if (layers >= 2) {
            bw.append(encrypt(sb.toString().trim()));
        } else {
            bw.append(sb.toString().trim());
        }
        bw.flush();
        bw.close();
    }

    private static String readFile_NoDecryption(String fileName) throws FileNotFoundException, IOException, GeneralSecurityException {
        File f = new File(DESKTOP, fileName);
        BufferedReader br = new BufferedReader(new FileReader(f));
        StringBuilder sb = new StringBuilder();
        while (br.ready()) {
            sb.append(br.readLine()).append(System.lineSeparator());
        }
        return sb.toString();
    }

    private static String readFile_ApplyDecryption(String fileName) throws FileNotFoundException, IOException, GeneralSecurityException {
        File f = new File(DESKTOP, fileName);
        BufferedReader br = new BufferedReader(new FileReader(f));
        StringBuilder sb = new StringBuilder();
        while (br.ready()) {
            sb.append(br.readLine()).append(System.lineSeparator());
        }
        return decrypt(sb.toString());
    } 
```

一个完整的例子，解决每一个保护步骤，将远远超出我认为这个问题的合理性，因为它是关于*“步骤是什么”*，而不是*“如何应用它们”*。

它会大大超出我的答案（最后是抽样），而这里关于 SO 的其他问题已经针对这些步骤的*“如何”*，更合适，并提供更好的解释和抽样每个单独的步骤。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T15:21:51.643

如果您使用的是基本身份验证，则应将其与 SSL 结合使用，以避免以 base64 编码的纯文本形式传递您的凭据。您不想让嗅探您的数据包的人轻松获取您的凭据。此外，不要在源代码中硬编码您的凭据。使它们可配置。从配置文件中读取它们。您应该在将凭据存储到配置文件之前对其进行加密，并且您的应用程序应在从配置文件中读取凭据后解密它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T22:36:47.223

1.  初始化请求的安全计算机（您的计算机）。如果那台机器不安全，没有任何东西可以保护你。这是完全独立的主题（最新的软件、正确配置、强密码、加密交换、硬件嗅探器、物理安全等）
2.  保护您的存储您用于存储凭据的介质应该被加密。解密的凭据应该只存储在您的安全机器的 ram 中
3.  维护硬件的人必须被信任（可能是最薄弱的环节）
4.  他们也应该尽可能少地知道。这是对橡胶软管密码分析的保护
5.  您的凭据应满足所有安全建议（适当的长度、随机性、单一用途等）
6.  您与远程服务的连接必须是安全的（SSL 等）
7.  您的远程服务必须是可信的（参见第 1-4 点）。加上它应该容易被黑客入侵（如果您的数据/服务不安全，那么保护您的凭据是没有意义的）。另外它不应该存储您的凭据

加上我可能忘记的一千件事:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T08:21:23.553

加密凭据通常不是一个好建议。加密的东西可以被解密。常见的最佳实践是将密码存储为[加盐哈希](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。哈希无法解密。添加盐以击败[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)的暴力猜测。只要每个 userId 都有自己的随机盐，攻击者就必须为盐的每个可能值生成一组表，从而在整个宇宙的生命周期内迅速使这种攻击变得不可能。这就是为什么如果您忘记了密码，网站通常无法将您的密码发送给您，但他们只能“重置”它。他们没有存储您的密码，只有密码的哈希值。

密码散列不是很难自己实现，但这是一个常见的问题，无数人已经为你解决了。我发现[jBcrypt](http://www.mindrot.org/projects/jBCrypt/)易于使用。

作为防止暴力猜测密码的额外保护，通常的最佳做法是在使用错误密码进行一定次数的登录尝试后强制用户 ID 或远程 IP 等待几秒钟。没有这个，蛮力攻击者每秒可以猜出你的服务器可以处理的尽可能多的密码。每 10 秒猜出 100 个密码或 100 万个密码之间存在巨大差异。

我的印象是您在源代码中包含了用户名/密码组合。这意味着如果您想更改密码，您将不得不重新编译、停止并重新启动您的服务，这也意味着任何掌握您的源代码的人也拥有您的密码。常见的最佳实践是永远不要这样做，而是将凭据（用户名、密码哈希、密码盐）存储在数据存储中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-15T15:23:18.227

# 为什么不在源代码中存储凭据

避免在源代码中存储凭据通常是一个好主意。问题是，对代码的访问以及谁应该有权访问凭据通常会随着时间的推移而变化。一旦项目变得更加成熟，通常会有一些开发人员不需要知道，因此不应该知道某些凭据。此外，代码可能会被重用于稍有不同的目的，甚至成为开源代码。此外，随着代码库变得越来越复杂，识别隐藏在代码中间某处的凭据变得非常乏味。

可以肯定地说，**数亿用户已经受到硬编码凭据引起的问题的影响**。[这是一篇带有一些示例的文章](https://www.beyondtrust.com/blog/entry/hardcoded-and-embedded-credentials-are-an-it-security-hazard-heres-what-you-need-to-know)。

# 如何为您的应用提供凭据

如果凭据不是代码的一部分，这会引发如何向应用程序提供凭据的问题。这取决于您的应用程序运行的平台。例如，如果您在某个云服务上托管您的应用程序，该服务将有一种机制以保存方式存储凭据并将它们注入您的应用程序的操作系统环境。为了提供一个具体的例子，这里是[如何为 Heroku 上托管的应用程序提供凭据](https://devcenter.heroku.com/articles/config-vars)的文档。在您的应用程序代码中，您可以从环境中访问它们。例如，对于 Java，您可以使用[getenv](https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getenv-java.lang.String-)

```
String apiPassword = getenv("API_PASSWORD"); 
```

这里`API_PASSWORD`需要由你的应用程序的托管机制在环境中提供。

# 延伸阅读

我写了一篇关于该主题的博客文章，更详细地介绍了该主题：[将密码保存在源代码之外 - 为什么和如何](https://medium.com/twodigits/keep-passwords-out-of-source-code-why-and-how-e84f9004815a)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-27T11:55:51.450

为什么人们在谈论散列。OP 希望存储他的用户凭据以访问外部资源。散列他的密码将无济于事。

现在这已经不成问题了。我只想为每一层提供简单的最佳实践。

1\. 将您的密码存储在 java 应用程序中。：将其存储为字符数组。创建一个密码存储类并将密码存储为哈希图，其中键作为您要访问的资源，并将值作为包含用户名和密码的某个对象。使用一些身份验证限制此 api 的入口点 例如：接受登录用户的凭据以验证该用户对该资源的访问级别（只需将用户映射到他们可以访问的密码列表。如果你有很多创建一个组并将密码映射键映射到该组）除此之外存储密码的任何内容都取决于您对 jvm 本身泄漏它的偏执程度。

2.  要传输密码，请确保您在安全的端口上发送密码（例如：Https 好，http 不好）。如果您真的必须通过不安全的协议进行传输，请对其进行加密并将其编码为 base64。确保收件人解码并可以解密您的密码。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-26T15:46:24.917

如果您无法信任程序运行的环境，但需要通过普通密码或证书进行身份验证，则您无法保护您的凭据。您最多可以使用其他答案中描述的方法来混淆它们。

作为一种解决方法，我将通过您可以信任的代理运行对 RESTful api 的所有请求，并从那里进行明文密码身份验证。

# parallel-processing - 给定任务依赖图的最大并发度是多少？

> ID：12937644
> 
> 赞同：0
> 
> 时间：2012-10-17T15:17:49.370
> 
> 标签：parallel-processing

最大并发度是可以并发执行的最大任务数。

我相信该图的最大并发度是2。因为只能同时执行两个任务，而其他任务必须等待另一个。然而在解决方案中，它给出了 8。你怎么看？

![任务依赖图](../Images/0d8e7ef7edf12da8a3a6d15944bb7c79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:47:51.523

一般来说，对于作为树的任务依赖图，最大并发度总是等于树中的叶子数。这就是为什么它是8。

# java - 用 super 或只是 setTitle 调用超类构造函数？

> ID：12937646
> 
> 赞同：7
> 
> 时间：2012-10-17T15:17:56.190
> 
> 标签：java, jframe

`setTitle("Title")`在性能方面或`super("Title")`在扩展时设置标题的推荐方法是什么`javax.swing.JFrame`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:21:38.310

如果您使用 grepcode `JFrame`（在 OpenJDK 6-b14 中）并稍微挖掘一下，您会看到构造函数`JFrame()`调用了构造函数`Frame()`，而构造函数又调用了`Frame("")`( [link](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/Frame.java#Frame.%3Cinit%3E%28%29) )。

`super()`因此，由于如果您自己不指定对任何超级构造函数的调用，则会添加隐式，因此调用`super("Title")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:22:37.097

如果您在构造函数中，请尝试将尽可能多的功能委托给超级构造函数。您可以将其从做一些工作中拯救出来。

例如，默认的超级构造函数可能会创建一些内部对象，当您调用 setter 时这些对象将被覆盖。如果您立即传递正​​确的数据，您就有机会提高效率。

但我认为在这种特定情况下，这并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:21:46.097

扩展类时始终调用相应的 super(.....) 是一个好习惯。你永远不知道超级构造函数在幕后做了什么魔法。

你永远不需要只是

调用超级（）；

如果您不指定其他任何内容，那就是那里。您只需要指定要调用的构造函数，如果：

*   您想调用**具有参数的超类构造函数**
*   您想链接到同一类中的另一个构造函数，而不是超类构造函数

# php - 错字3验证码错误

> ID：12937648
> 
> 赞同：0
> 
> 时间：2012-10-17T15:17:59.507
> 
> 标签：php, class, typo3, typo3-tca

几天后，验证码图像不再出现。

当我尝试访问 captcha.php 时，该文件给了我一个错误：

致命错误：在第 10 行的 /typo3conf/localconf.php 中找不到类 't3lib_div'

当我查找 localconf.php 文件时，前 20 行如下所示：

```
<?php
$TYPO3_CONF_VARS['SYS']['sitename'] = 'New TYPO3 site';
    // Default password is "joh316" :
$TYPO3_CONF_VARS['BE']['installToolPassword'] = 'bacb98acf97e0b6112b1d1b650b84971';
$TYPO3_CONF_VARS['EXT']['extList'] = 'tsconfig_help,context_help,extra_page_cm_options,impexp,sys_note,tstemplate,tstemplate_ceditor,tstemplate_info,tstemplate_objbrowser,tstemplate_analyzer,func_wizards,wizard_crpages,wizard_sortpages,lowlevel,install,belog,beuser,aboutmodules,setup,taskcenter,info_pagetsconfig,viewpage,rtehtmlarea,css_styled_content,t3skin';
$typo_db_extTableDef_script = 'extTables.php';

// MAX FILE SIZE
$TYPO3_CONF_VARS['BE']['maxFileSize'] = '100000';
t3lib_div::loadTCA('tt_content');
// This changes the upload limit for image elements
$TCA['tt_content']['columns']['image']['config']['max_size'] = 100000;

// This changes the upload limit for media elements
$TCA['tt_content']['columns']['media']['config']['max_size'] = 100000;

// This changes the upload limit for multimedia elements
$TCA['tt_content']['columns']['multimedia']['config']['max_size'] = 100000; 
```

有人知道我为什么会收到此错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:02:19.437

最好的情况是，下面的这个设置将在某个扩展名的 ext_tables.php 文件中。

但是，如果您没有任何特殊的分机，那么您可以将其放入`typo3conf/extTables.php`文件中。之后，关于`t3lib_div`未找到的错误应该消失了。

```
// MAX FILE SIZE
$TYPO3_CONF_VARS['BE']['maxFileSize'] = '100000';
t3lib_div::loadTCA('tt_content');
// This changes the upload limit for image elements
$TCA['tt_content']['columns']['image']['config']['max_size'] = 100000;

// This changes the upload limit for media elements
$TCA['tt_content']['columns']['media']['config']['max_size'] = 100000;

// This changes the upload limit for multimedia elements
$TCA['tt_content']['columns']['multimedia']['config']['max_size'] = 100000; 
```

# pdfkit - 如何生成带有泰米尔语字符的 PDF？

> ID：12937655
> 
> 赞同：1
> 
> 时间：2012-10-17T15:18:45.363
> 
> 标签：pdfkit

我正在使用`pdf.kit`of`node.js`来生成 PDF。如何以泰米尔语显示 PDF 字符？

# javascript - 将窗口调整大小事件静默绑定到 jQuery 插件而不保留对目标元素的引用的最佳方法

> ID：12937656
> 
> 赞同：3
> 
> 时间：2012-10-17T15:18:53.503
> 
> 标签：javascript, jquery, jquery-plugins

我正在寻找最佳实践建议。

我正在编写一个小的 jQuery 插件来管理元素的水平滚动。

我需要该插件针对的所有 dom 元素来更新窗口调整大小。

事实是，我的网站是一个完整的 ajax “应用程序”，所以当我删除 DOM 元素时，我需要它们消失，这样内存就不会泄漏。

但是我找不到在不保留对 DOM 节点的引用的情况下绑定 resize 事件的方法。

编辑 ：

实际上，我需要调整大小处理程序来在“调用”时获取以插件为目标的元素，因为我不想在内存中保留对这些元素的任何引用，因为**我可能会在他们的父级上调用 .html('')** ...

我没有粘贴我所有的代码，只是一个空壳。我已经有一个取消绑定处理程序的销毁方法。但是我正在动态生成、删除和附加 html 节点，并且我将插件所针对的元素以静默方式删除。

Kevin B 表示我可以重写 jQuery`.remove`方法来处理处理程序，但必须加载 jQuery UI 才能使其工作。我也不想这样。。

这是我尝试过的（尝试评论）：

```
(function($) {
    // SOLUTION 2 (see below too)
    // Not good either coz elements are not removed until resize is triggered
    /*
    var hScrolls = $([]);
    $(window).bind('resize.hScroll',function(){
        if(!hScrolls.length) return;
        hScrolls.each(function(){
            if($(this).data('hScroll')) $(this).hScroll('updateDimensions');
            else hScrolls = hScrolls.not($(this));
        });
    });
    */
    // END SOLUTION 2

    // SOLUTION 3 (not implemented but I think I'm on the right path)
    $(window).bind('resize.hScroll',function(){
        // need to get hScroll'ed elements via selector...
        $('[data-hScroll]').hScroll('updateDimensions');
        // I don't know how....
    });
    // END SOLUTION 3
    var methods = {
        init : function(options) {
            var settings = $.extend( {
                defaults: true
            }, options);

            return this.each(function() {
                var $this = $(this),
                    data = $this.data('hScroll');
                if (!data) {
                    $this.data('hScroll', {
                        target: $this
                    });
                    // SOLUTION 1
                    // This is not good: it keeps a reference to $this when I remove it...
                    /*
                    $(window).bind('resize.hScroll', function(){
                        $this.hScroll('updateDimensions');
                    });
                    */
                    // END SOLUTION 1
                    $this.hScroll('updateDimensions');

                    // SOLUTION 2 (see above too)

                    hScrolls = hScrolls.add(this);

                }
            });
        },
        updateDimensions: function(){
            var hScroll = this.data('hScroll');
            // do stuff with hScroll.target
        }
    }

    $.fn.hScroll = function(method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if ( typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.hScroll');
        }
    };
})(jQuery);​ 
```

提前谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:50:30.760

`cleanData`每当您执行删除或替换元素的操作时，jQuery 都会调用（是的，即使您使用`parent.html("")`）。您可以通过扩展它并让它触发目标元素上的事件来利用它。

```
// This is taken from https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js 10/17/2012
if (!$.widget) { // prevent duplicating if jQuery ui widget is already included
    var _cleanData = $.cleanData;
    $.cleanData = function( elems ) {
        for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
            try {
                $( elem ).triggerHandler( "remove" );
                // http://bugs.jquery.com/ticket/8235
            } catch( e ) {}
        }
        _cleanData( elems );
    };
} 
```

现在，您可以在设置插件时绑定到 remove 事件并让它运行您的 destroy 方法。

```
$(elem).bind("remove",methods.destroy) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:30:14.487

您可以使用类名并转发调整大小事件：

```
$.fn.hScroll = function(method) {
    this
      .addClass('hScroll')
      .data('method', arguments)
};

var methods['alert_text'] = function(config){
  alert( config + " " + $(this).text() );
}

$(window).bind('resize.hScroll',function(){
  $(".hScroll").each(function(){
     var method_config = $(this).data('method');
     var method = method_config.shift();
     // Forward the resize event with all resize event arguments:
     methods[method].apply(this, method_config);
   })
})

// Register a resize event for all a.test elements:
$("a.test").hScroll('alert_text', "hey");
// Would alert "hey you" for <a class="test">you</a> on every resize 
```

* * *

更新

如果您更改 dom 并希望保留选择器，您可以试试这个：

```
var elements = [];
 $.fn.hScroll = function(method) {
     elements.push({'selector' : this.selector, 'arguments' : arguments });
 };

var methods['alert_text'] = function(config){
  alert( config + " " + $(this).text() );
}

$(window).bind('resize.hScroll',function(){
  $.each(elements,function(i, element){
    $(element.selector).each(function(){
       var method_config = element.arguments;
       var method = method_config.shift();
       // Forward the resize event with all resize event arguments:
       methods[method].apply(this, method_config);
     })
   })
})

// Register a resize event for all a.test elements:
$("a.test").hScroll('alert_text', "hey");
$(document.body).html("<a class='test'>you</a>");
// Would alert "hey you" for every window resize 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:34:26.163

您应该在扩展中绑定滚动事件。此外，您还需要为您的扩展添加一个“销毁”方法。在从 DOM 中删除元素之前，您需要调用此方法。在 detroy 方法内部是您想要取消绑定 resize 事件的地方。

完成这项工作的一件重要事情是，您可以引用绑定到 resize 事件的每个处理程序方法。或者，您可以在删除元素时取消绑定所有调整大小事件，然后将滚动事件重新绑定到需要它的其余元素。

# php - wordpress is_tag 功能未按预期工作

> ID：12937667
> 
> 赞同：0
> 
> 时间：2012-10-17T15:19:37.590
> 
> 标签：php, wordpress, wordpress-theming

目标：如果正在显示的页面是标签（任何标签）的存档页面，则在侧边栏中显示不同的内容行。

请注意，我没有使用它来检测特定标签。如果我正在查看基于标签的存档页面，我希望它返回 TRUE，如果我正在查看类别存档页面、日期存档页面、帖子页面、主页或其他任何内容，我希望它返回 FALSE。

环境：运行 Wordpress 3.4.2 的 WAMP（使用 XAMPP）和（PHP 5.4.4）

代码：

```
<?php if (is_tag()) : ?>
--some html--
<?php else: ?>
--other html--
<?php endif; ?> 
```

结果：导航到 [博客地址]/tag/horror/ 始终显示“--other html--”

我很确定这是语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:44:50.153

会`is_tax()`为你工作吗？[http://codex.wordpress.org/Function_Reference/is_tax](http://codex.wordpress.org/Function_Reference/is_tax)

否则，您可以改用标签模板吗？ [http://codex.wordpress.org/Tag_Templates](http://codex.wordpress.org/Tag_Templates)

一个解决方案可能是使用`get_template_part` [http://codex.wordpress.org/Function_Reference/get_template_part](http://codex.wordpress.org/Function_Reference/get_template_part)

模块化您的模板页面，并回收您的循环等。

# android - 在 Android 中创建 flash/swf 播放器

> ID：12937669
> 
> 赞同：1
> 
> 时间：2012-10-17T15:19:48.870
> 
> 标签：android, flash

我必须创建一个应用程序来播放 swf/flash 文件，具有缩放和鼠标指针功能。我进行了很多搜索，但没有找到任何示例/代码或任何构建播放器的线索。

有谁知道 API 或任何方式来构建这样的播放器？

除了 WebView 之外，有没有人在 android 中播放过 swf 文件？
我曾尝试在 WebView 中播放 swf，但它在中心仅显示一个方形图像（蓝色），即使我已经安装了 flash 播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:28:53.873

确保你已经为你的 webview 启用了插件：

[http://developer.android.com/reference/android/webkit/WebSettings.html#setPluginState(android.webkit.WebSettings.PluginState](http://developer.android.com/reference/android/webkit/WebSettings.html#setPluginState(android.webkit.WebSettings.PluginState)

# pointers - 指针作为 boost unordered_map 的键

> ID：12937679
> 
> 赞同：0
> 
> 时间：2012-10-17T15:20:17.820
> 
> 标签：pointers, boost, map, key, unordered-map

我正在尝试使用对象指针作为 boost unordered_map 的键：

```
boost::unordered_map<MyObject*, real> mymap; 
```

但是当我尝试访问给定键的值时，它永远找不到它：

```
boost::unordered_map<MyObject*, real>::const_iterator it = mymap.find(&SomeObject); // it is always equal to mymap.end() 
```

如果我打印地图内容，我可以看到钥匙在那里：

```
key: 0x3739c60, value: 1
key: 0x4541970, value: 0.873346
... 
```

如果我用 std::map 替换 boost::unordered_map 它可以正常工作。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:42:30.520

回答我自己的问题......我发现使用更新版本的 boost 可以正常工作。似乎是由 boost 1.42 版中的错误引起的。

# jquery - Playframework 在带有 ajax 的视图中使用 jeditable

> ID：12937680
> 
> 赞同：2
> 
> 时间：2012-10-17T15:20:17.513
> 
> 标签：jquery, playframework, jeditable, playframework-1.x

我正在使用播放 1.2.5。在我的一个观点中，我有一个数据表，其中一列是可编辑的。为此，我使用 jquery.dataTables.js 和 jquery.jeditable.js 插件。

现在，当我在字段中输入新值时，ajax 调用出现问题。我创建了一个动作，每次编辑一行时都应该调用它，但这不起作用。不会调用该操作，有人可以看到我的错误吗？

谢谢

这是我的行动，首先我想看看它被称为

```
 public static void configurationChange(SendAllSysParameter para){
    Logger.info( "incoming configuration change", null );
    } 
```

这是我的看法：

```
#{extends 'main.html' /}

#{set title:'Sendall Configuration Page' /}

#{script 'jquery.dataTables.js'/}
#{stylesheet 'demo_page.css' /}
#{stylesheet 'jquery.dataTables.css' /}
#{script 'jquery.jeditable.js' /}

<div class="pdx_std_north_panel">
    <table id="table_id" class="display">
    <thead>
        <th>Property</th>
        <th>Value</th>      
    </thead>
    <tbody>
        #{list items:paras, as:'elem' }
        <tr id="${elem.sendAllKey}">
            <td id="${elem_index}">${elem.sendAllKey}</td>
            <td id="${elem_index}">${elem.sendAllValue}</td>                                
        </tr>       
        #{/list}
    </tbody>    
    </table>        
    <script type="text/javascript">

        $(document).ready(function(){
            var oTable = $('#table_id').dataTable();
            //alert("Test2");
            var configurationChangeRoute = #{jsRoute @Application.configurationChange(':element') /};
            console.log('configurationChangeRout mit jsRoute-Tag: ' + configurationChangeRoute.url);
            var configurationChangeAction = #{jsAction @Application.configurationChange(':element')/}; 
            console.log('configurationChangeAction mit jsActionTag: ' + configurationChangeAction);
            //alert(configurationChangeRoute.url);
            //alert(configurationChangeAction);
            /* Apply the jEditable handlers to the table */
            $('td:eq(1)', oTable.fnGetNodes()).editable( configurationChangeAction, {

                "callback": function( sValue, y ) {
                    console.log('callback with svalue ' + sValue + ' and y ' + y);
                    var aPos = oTable.fnGetPosition( this );
                    oTable.fnUpdate( sValue, aPos[0], aPos[1] );
                },

                "submitdata": function ( value, settings ) {
                    console.log('submitdata');
                    return {
                        "row_id": this.parentNode.getAttribute('id'),
                        "column": oTable.fnGetPosition( this )[2]
                    };
                },
                "height": "14px"
            } ); 
```

我的模型：

```
package models;

import java.sql.Timestamp;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

import play.db.jpa.GenericModel;
import play.db.jpa.Model;

@Entity
@Table(name="SendAll_SysParameter")
public class SendAllSysParameter extends GenericModel
{

    @Id
    @Column(name = "sendAllKey", unique = true, nullable = false)
    public String sendAllKey;

    @Column(name = "sendAllValue")
    public String sendAllValue;

    @Column(name = "sendAllDate", nullable = false, length = 23)
    public Timestamp sendAllDate;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:25:59.530

我发现了问题，我将我的 ajax url 的路由声明为 GET，但它是 POST，所以它没有被 play 找到。错误日志是正确的;-)

# c++ - c++递归嵌套类型和名称注入

> ID：12937687
> 
> 赞同：11
> 
> 时间：2012-10-17T15:20:41.990
> 
> 标签：c++, c++11, nested, code-injection, typename

我尝试在没有运气的情况下使用谷歌搜索，所以我在这里尝试。

我有几个类，每个类都定义一个 member `struct foo`。此成员类型`foo`本身可以从以前的类之一继承，因此`foo`自己获得成员类型。

我想`foo`使用模板元编程访问嵌套类型（见下文），但是 c++ 名称注入会带来问题，因为上层`foo`类型名称被注入到下层`foo`类型中，当我想访问下层类型时，上层类型会被解析，比如使用`A::foo::foo`.

这是一个例子：

```
#include <type_traits>

struct A;
struct B;

struct A {
    struct foo;
};

struct B {
    struct foo;
};

struct A::foo : B { };
struct B::foo : A { };

// handy c++11 shorthand
template<class T>
using foo = typename T::foo;

static_assert( std::is_same< foo< foo< A > >, foo< B > >::value, 
               "this should not fail (but it does)" );

static_assert( std::is_same< foo< foo< A > >, foo< A > >::value, 
               "this should fail (but it does not)" ); 
```

仅供参考，我正在实现函数导数，`foo`是导数类型。上述情况发生在例如 sin/cos 中。

TLDR：我怎样才能`foo<foo<A>>`成为`foo<B>`，不是`foo<A>`？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:12:04.077

这不是真正的自动解决方案，但可以解决问题。您的类型为基类提供 typedef，此 typedef 的缺失/存在通过 SFINAE 检测，嵌套 foo 通过基类或正常查找找到。

如果您需要更多自动化，您可以自动化`has_base`检查已知碱基列表。`is_base_of`

```
#include <type_traits>
template <typename T>
struct has_base
{
    typedef char yes[1];
    typedef char no[2];

    template <typename C>
    static yes& test(typename C::base*);

    template <typename>
    static no& test(...);

    static const bool value = sizeof(test<T>(0)) == sizeof(yes);
};

struct A {
    struct foo;
};

struct B {
    struct foo;
};

struct A::foo : B { typedef B base; };
struct B::foo : A { typedef A base; };

template<typename T, bool from_base = has_base<T>::value >
struct foo_impl {
  typedef typename T::base::foo type;
};

template<typename T> 
struct foo_impl<T, false> {
  typedef typename T::foo type;
};

template<typename T>
using foo = typename foo_impl<T>::type;

static_assert( std::is_same< foo< foo<A> >::, foo< B > >::value, 
               "this should not fail (but it does)" );

static_assert( std::is_same< foo< foo< A > >, foo< A > >::value, 
               "this should fail (but it does not)" );
int main()
{

  return 0;
} 
```

# c++ - c++ sscanf读取字符串向量

> ID：12937690
> 
> 赞同：0
> 
> 时间：2012-10-17T15:20:53.397
> 
> 标签：c++, linux

感谢对上一篇文章的支持[......](https://stackoverflow.com/questions/12934436/c-read-from-stdin-store-in-vector-and-stdout)我现在正在尝试将矢量字符串存储在另一个字符串上并执行 sscanf 来检查文本，例如。“文本”，如果找到，则在行尾附加另一个文本....

有任何想法吗？？？

```
#include <iostream>
#include <vector>
#include <string>
#include <stdio.h>

using namespace std;

int main() {
  vector<string> vs;
  vector<string>::iterator vsi;
  string agent;
  string buffer;
  string line;
  while (!(cin.eof())) {
    getline(cin, buffer);
    cout << buffer << endl;
    vs.push_back(buffer);
  };

  vsi = vs.begin();
  for (int count=1; vsi != vs.end(); vsi++,count++){
    cout << "string" << count <<"="<< *vsi << endl;
    line = *vsi;
    sscanf(line, "%s %[^\n]",text);
//dummy code
if text=="TEXT" do this:
    cout << "agent" << text << "endl";
  }
else: do nothing

  return 0;
}

[root@server dev]# g++ -o newcode newcode.cpp 
newcode.cpp: In function ‘int main()’:
newcode.cpp:24: error: cannot convert ‘std::string’ to ‘const char*’ for argument ‘1’ to ‘int sscanf(const char*, const char*, ...)’
[root@server dev]# 
```

更新：我在 sscanf 上使用了 line.c_str() 并给出了这个错误

```
#include <iostream>
#include <vector>
#include <string>
#include <stdio.h>

using namespace std;

int main() {
  vector<string> vs;
  vector<string>::iterator vsi;
  string agent;
  string buffer;
  string line;
  while (!(cin.eof())) {
    getline(cin, buffer);
    cout << buffer << endl;
    vs.push_back(buffer);
  };

  vsi = vs.begin();
  for (int count=1; vsi != vs.end(); vsi++,count++){
    cout << "string" << count <<"="<< *vsi << endl;
    line = *vsi;
    cout << "LINE:" << line.c_str() << endl;
    sscanf(line.c_str(), "%s %[^\n]",agent);
 /*   cout << "agent" << agent << "endl"; */
  }

  return 0;
}

[root@server dev]# g++ -o newcode newcode.cpp 
newcode.cpp: In function ‘int main()’:
newcode.cpp:25: warning: cannot pass objects of non-POD type ‘struct std::string’ through ‘...’; call will abort at runtime
[root@server dev]# 
```

我想要做的是，当检测到特定行上的字符串时，它会将文本附加到行尾和标准输出...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:26:02.333

目前尚不清楚您要做什么，但是如果您想将正确的类型传递给 sscanf ，则需要进行一些更改。`sscanf`仅处理 c 字符串，并且您尝试将其传递给 c++ 字符串对象，要解决此问题，您可能希望`line.c_str()`在 sscanf 中使用以正确格式传递它。

更好的方法是使用像 string::find 这样的 c++ 算法，因为这将消除使用 sscanf 的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:29:19.227

我不确定您是否想这样做，但您应该查看 string::find : [Cplusplus 参考](http://www.cplusplus.com/reference/string/string/find/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:29:43.100

而不是使用`sscanf`try using `stringstream`which 工作几乎与`cin`/相同`cout`。

# javascript - 标签中的 click() 返回 href 内容

> ID：12937696
> 
> 赞同：1
> 
> 时间：2012-10-17T15:21:07.683
> 
> 标签：javascript

我想模拟用户点击`<a>`自己。在抓取并提醒我期待的内容后 [object]，但我得到了 href 内容！我没有使用 jQuery。

**关联**

```
<a href="javascript:showExplorerTab();" id="lnk_blend_explorer" onFocus="this.blur();">Blend</a> 
```

**Javascript**

```
var o = document.getElementById("lnk_blend_explorer");
alert(o);
o.click(); 
```

警报显示... javascript:showExplorerTab(); ......而不是...... [对象]

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:24:27.783

所有`<a href>`元素都有一个`toString()`返回其 href 属性的方法。不要问我为什么，这就是它的工作原理。

# mysql - 在存储过程中添加引号

> ID：12937697
> 
> 赞同：0
> 
> 时间：2012-10-17T15:21:08.953
> 
> 标签：mysql, stored-procedures

我有一个存储过程，其中文本是输入。是否可以接受不带引号的文本，然后通过替换功能在过程中插入单引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:25:19.140

使用 MySQL 的[`QUOTE()`](http://dev.mysql.com/doc/en/string-functions.html#function_quote)功能：

> 引用字符串以生成可用作 SQL 语句中正确转义的数据值的结果。返回的字符串用单引号括起来，并且每个反斜杠实例 (“<code>\”)、单引号 (“<code>'”)、ASCII`NUL`和 Control+Z 前面都有一个反斜杠。如果参数是`NULL`，则返回值是不带单引号的单词“NULL”。
> 
> ```
> mysql> SELECT QUOTE('不要！');
>         -> '不要！'
> mysql>选择报价（NULL）；
>         -> 空
> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:26:32.003

如果我正确理解您希望能够写作，例如：

```
foo(All human beings are born free and equal in dignity and rights.) 
```

并将其解释为：

```
foo('All human beings are born free and equal in dignity and rights.') 
```

那就不要。这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:25:14.227

如果您知道在哪里以及如何放回引号，这是可能的。

# jqgrid - 如何在 jqGrid 中切换编辑和保存取消？

> ID：12937698
> 
> 赞同：2
> 
> 时间：2012-10-17T15:21:08.250
> 
> 标签：jqgrid, save, edit

我在 jquery 论坛[cf: my question](https://forum.jquery.com/topic/jqgrid-inline-editing-buttons)上问了这个问题，但被要求来这里寻找 Oleg。

我在网上做了很多研究，并测试了我的或网络上的一堆代码，但到目前为止还没有运气。我继续阅读我需要使用 oneditfunc 函数。正如您在 jquery 论坛上的问题中看到的，我在 gridComplete 中添加了这些操作按钮。我在哪里声明和定义 oneditfunc 函数？

[http://www.ok-soft-gmbh.com/jqGrid/ActionButtons.htm](http://www.ok-soft-gmbh.com/jqGrid/ActionButtons.htm)上的示例确实看起来像我正在寻找的，但我不能使用预定义的“动作”格式化程序，我必须使用带有文本编辑、保存和取消的按钮。

[在http://www.trirand.com/blog/jqgrid/jqgrid.html#](http://www.trirand.com/blog/jqgrid/jqgrid.html#)有一个示例，位于 Row Editing (new) > Custom Edit 下，我按照该示例创建了您在 jquery 论坛上的原始问题中看到的我的示例. 不幸的是，这些按钮不会切换。

当行甚至不处于编辑模式时，显示 S(ave) 和 C(ancel) 按钮是没有意义的。所以我确实想通过切换它们来解决这个问题。有什么想法可以分享吗？我相信这会帮助很多人，因为在网上找不到工作示例。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:41:49.600

对于那些希望解决这个问题的人。我已经解决了，我已经在[http://forum.jquery.com/topic/jqgrid-inline-editing-buttons](http://forum.jquery.com/topic/jqgrid-inline-editing-buttons)上发布了我的解决方案。

# mysql - SQL 选择返回中的屏蔽值

> ID：12937702
> 
> 赞同：0
> 
> 时间：2012-10-17T15:21:14.747
> 
> 标签：mysql

这是一个奇怪的问题，但我想知道您是否可以在结果中显示一列，但实际上有另一列作为值（MYSQL）。假设我有这张桌子：

```
ID   Name
1    Soccer
2    Football 
```

我想知道是否可以从此表中选择所有 ID（从表中选择 ID），但结果会显示名称。

或者是否可以显示为结果（作为单列）？：

```
1 (Soccer)
2 (Football) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:22:27.507

```
SELECT ID, CONCAT("(", name, ")") FROM <TABLENAME> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:29:44.560

这会将结果连接到单列中。

```
SELECT CONCAT(ID, ' (', Name, ')')
FROM tableName 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/2e9ea8/1)

# php - 我无法从我的数据库中检索图像

> ID：12937704
> 
> 赞同：5
> 
> 时间：2012-10-17T15:21:21.840
> 
> 标签：php, sql, database, image

我有一个包含电影名称、描述和封面图片的数据库。封面图片字段类型为 blob，问题是我无法从数据库中检索它。我想在他们旁边的封面图片上显示电影名称……怎么做……这是我的代码……

```
<?php

include ("php/connection.php");
$ID = $_GET['id'];
$listmovies = "SELECT * FROM movies where Genres LIKE '%$ID%'";
$result = mysql_query($listmovies);
while ( $row = mysql_fetch_assoc($result) ) {
    ?>
<table border="1" width="100%">
    <tr>
        <td rowspan="2" width="90" height="120">
<?php

    // set the header for the image
    header("Content-type: image/jpeg");
    echo $row['Image'];

    ?> </td>
        <td width="200" height="10">
<?php

    echo $row['Title'];
    ?></td>
    </tr>
    <tr>
        <td width="200" height="110"><a
            href="php/moredetails.php?id=<?php echo $row['ID']; ?>">More Detail</a></td>
    </tr>
<?php } ?> </table> 
```

我只想在电影标题旁边显示 The Imgaes？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:53:48.200

是的，它不会显示，因为`any output above header would always generate error`......你需要有一个不同的页面来输出你的图像或包含它有`base64`图像

消除

```
header("Content-type: image/jpeg");
echo $row['Image']; 
```

并添加：

```
printf("<img src=\"data:image/jpeg;base64,%s\" />",base64_encode($row['Image']));  
                               ^--- Note this is only for jpeg images 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:37:59.447

我建议这样的事情：

制作一个名为 image.php 的新 php 文件；该文件将替换物理图像文件。在该文件中，您将帖子中的代码加上一些逻辑以从数据库中获取图像数据；

在父模板（可能是 php 文件）中，您为图像添加代码：

```
<img src="image.php?id_movie=<?php echo $id_movie; ?>" width ="200" height="200" /> More Detail 
```

在 image.php 中，我建议小心 php 标签之外的空格（在开头和结尾处）。同样对于 image.php，您需要提供电影的 id 以了解要从数据库加载的图像。

# java - ActiveMQ 异步统计接收

> ID：12937705
> 
> 赞同：0
> 
> 时间：2012-10-17T15:21:25.287
> 
> 标签：java, jms, activemq

我面临一个非常常见的错误，但仍然没有找到解决方案。我正在使用异步消息发送：

```
 Queue adminQueue=session.createQueue("admin_queue");
    MessageConsumer mc=session.createConsumer(adminQueue);              
    mc.setMessageListener(new AdminListener(emfMaster,ps));
    connection.start();

    this.statisticProvider = new AdminStats(adminQueue, mc, session); 
```

而且我需要使用 ActiveMQ 的 Stat 插件来接收它的统计信息，该插件被填充到我的 AdminStats 类中（它启动了一个用于接收统计信息的新线程），但它仍然告诉我，我只能使用同步消息发送，而不是指定消息监听器。

```
[javax.jms.IllegalStateException: Cannot synchronously receive a message when a MessageListener is set] 
```

我无权更改发送消息的方式。有没有办法以异步方式获取统计信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:42:24.520

您可以使用 JMX 获取统计信息。或带有咨询信息。来自这里的一些链接：http: [//activemq.apache.org/how-can-i-monitor-activemq.html](http://activemq.apache.org/how-can-i-monitor-activemq.html)

# javascript - 从中间向外处理数组

> ID：12937707
> 
> 赞同：5
> 
> 时间：2012-10-17T15:21:29.543
> 
> 标签：javascript, arrays

我需要从中间的外语中遍历一个数组。

```
var array = [a,b,c,d,e]; 
```

我需要按以下顺序打印：c,d,b,e,a

我已经将阵列分成两半，先前进后退，这已经是一种改进，但我真的需要在每一侧各一个，直到每一侧阵列的末尾。

说我想从中间开始。我在循环语句之前有以下内容，条件，我似乎无法弄清楚第三部分以增量方式在每一侧切换一个。

```
for (var i = Math.floor(array.length/2); i >= 0 || i < array.length; i?){
//Do Something here.
} 
```

有谁知道如何做到这一点？显然，我似乎无法在这种情况下进行测试。

谢谢

我修改[了下面的答案](https://stackoverflow.com/a/12938395/104223)（非常感谢）来提出这个功能。它允许从阵列中的任何位置开始并选择前进的方向。我相信它可以写得更优雅。错误的索引号也有安全性。

```
var array = ["a", "b", "c", "d", "e"];

function processArrayMiddleOut(array, startIndex, direction){
    if (startIndex < 0){ 
        startIndex = 0;
    }
    else if ( startIndex > array.length){
        startIndex = array.lenght-1;
    };

    var newArray = [];

    var i = startIndex;

    if (direction === 'right'){
        var j = i +1;
        while (j < array.length || i >= 0 ){
            if (i >= 0) newArray.push(array[i]);
            if (j < array.length) newArray.push(array[j]);
            i--;
            j++;                
        };
    }
    else if(direction === 'left'){
        var j = i - 1;
        while (j >= 0 || i < array.length ){
            if (i < array.length) newArray.push(array[i]);
            if (j >= 0) newArray.push(array[j]);
            i++;
            j--;                
        };
    };

    return newArray;            
}    

var result = processArrayMiddleOut(array, 2, 'left');

alert(result.toString()); 
```

[http://jsfiddle.net/amigoni/cqCuZ/](http://jsfiddle.net/amigoni/cqCuZ/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T15:56:45.467

两个计数器，一个上升，另一个下降：

```
var array = ["a", "b", "c", "d", "e"];
var newArray = [];

var i = Math.ceil(array.length/2);
var j = i - 1;

while (j >= 0)
{
    newArray.push(array[j--]);
    if (i < array.length) newArray.push(array[i++]);
} 
```

[http://jsfiddle.net/X9cQL/](http://jsfiddle.net/X9cQL/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T15:23:48.947

所以我决定重新审视这个，对我给出的第一个答案并不满意。我很肯定，当数据成功重新排序时，索引号之间会有一些关系；我在将迭代编号添加到最后一个项目位置时发现了这种模式。

对于我们的初始数组，我们将使用以下内容`['a', 'b', 'c', 'd', 'e']`：

我们的起点是`Math.floor( arr.length / 2 )`，它给了我们`2`，对应`c`于数组中的值。这是在迭代`0`中。以下说明详细说明了我们如何遍历具有奇数个值的数组：

```
 Position | Direction | Iteration | New Position | Value at Position
----------+-----------+-----------+--------------+-------------------
     2    |      -    |      0    |       2      |         c
     2    |      +    |      1    |       3      |         d
     3    |      -    |      2    |       1      |         b
     1    |      +    |      3    |       4      |         e
     4    |      -    |      4    |       0      |         a 
```

你会看到一个模式正在发展，当我们的迭代是奇数时，我们将它添加到我们的位置以找到我们的新位置。当迭代为负时，我们将其从我们的位置中减去以找到新位置。

当处理具有偶数个值的数组时，规则被翻转。当您有偶数个值时，我们从位置中减去奇数迭代以获得新位置，并将偶数迭代添加到我们的位置以找到下一个值。

为了演示执行此排序逻辑需要多少代码，下面是上述逻辑的缩小版本（上述链接更具可读性）：

```
// DON'T USE THIS IN PRODUCTION, OR YOUR TEAM MAY KILL YOU
function gut(a){
    var o=[],s=a.length,l=Math.floor(s/2),c;
    for(c=0;c<s;c++)o.push(a[l+=(s%2?c%2?+c:-c:c%2?-c:+c)]);
    return o
} 
```

以更易读的方式实现上述逻辑：

```
// Sort array from inside-out [a,b,c,d,e] -> [c,d,b,e,a]
function gut( arr ) {

    // Resulting array, Counting variable, Number of items, initial Location
    var out = [], cnt, 
        num = arr.length, 
        loc = Math.floor( num / 2 );

    // Cycle through as many times as the array is long
    for ( cnt = 0; cnt < num; cnt++ )
        // Protecting our cnt variable
        (function(){
            // If our array has an odd number of entries
            if ( num % 2 ) {
                // If on an odd iteration
                if ( cnt % 2 ) {
                    // Move location forward
                    loc = loc + (+cnt); 
                } else {
                    // Move location backwards
                    loc = loc + (-cnt);  
                }
            // Our array has an even number of entries
            } else {
                // If on an odd iteration
                if ( cnt % 2 ) {
                    // Move location backwards
                    loc = loc + (-cnt);
                } else {
                    // Move location forwards
                    loc = loc + (+cnt);
                }
            }
            // Push val at location to new array
            out.push( arr[ loc ] );
        })()

    // Return new array
    return out;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:29:33.433

非常有趣的算法。这是我带来的：

```
walkMidleOut = function(arr, callback) {
    var mid = (arr.length - arr.length % 2) / 2;
    for (var i = 0; i < arr.length; i++) {
        var s = -1,
            j = (i % 2 ? (s = 1, i + 1) : i) / 2,
            index = mid + s * j == arr.length ? 0 : mid + s * j;
        callback.call(arr, arr[index], index);
    }
} 
```

用法：

```
walkMidleOut([1,2,3,4,5], function(el, index) {
    console.log(el, index);
}); 
```

会给你：

```
3 2
4 3
2 1
5 4
1 0 
```

函数可以与任意数量的元素一起使用，奇数或偶数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T16:31:12.890

好的，让我们一步一步解决这个问题：

1.  数组可能有奇数或偶数个元素：
2.  如果数组有奇数个元素：
    1.  中间元素位于 index 处`(array.length - 1) / 2`。让这个索引被称为`mid`。
    2.  `mid`中间元素左侧有多个元素。明显地。
    3.  `mid`中间元素右侧有许多元素。
3.  如果数组有偶数个元素：
    1.  中间元素位于 index 处`array.length / 2`。让这个索引被称为`mid`。
    2.  `mid`中间元素左侧有多个元素。明显地。
    3.  `mid - 1`中间元素右侧有许多元素。

现在让我们使用上述已知数据创建一个函数来解决这个问题：

```
function processMidOut(array, callback) {
    var length = array.length;
    var odd = length % 2;         // odd is 0 for an even number, 1 for odd
    var mid = (length - odd) / 2; // succinct, isn't it?

    callback(array[mid]);         // process the middle element first

    for (var i = 1; i <= mid; i++) {  // process mid number of elements
        if (odd || i < mid)           // process one less element if even
            callback(array[mid + i]); // process the right side element first
        callback(array[mid - i]);     // process the left side element next
    }
} 
```

这就是它的全部。现在让我们创建一些数组并在中间处理它们：

```
var odd = ["a", "b", "c", "d", "e"];
var even = ["a", "b", "c", "d", "e", "f"];

var oddOrder = "";
var evenOrder = "";

processMidOut(odd, function (element) {
    oddOrder += element;
});

processMidOut(even, function (element) {
    evenOrder += element;
});

alert(oddOrder);
alert(evenOrder); 
```

你可以在这里找到一个工作演示：http: [//jsfiddle.net/xy267/1/](http://jsfiddle.net/xy267/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T05:04:07.267

使用`concat()`and怎么样`slice()`？您可以将其传递给中间元素的索引。

```
Array.prototype.eachFrom = function(index){
  var index = index > this.length ? 0 : index;
  return [].concat(this.slice(index), this.slice(0, index));
} 
```

例如：

```
var arr = ['a', 'b', 'c', 'd', 'e'], arr = arr.eachFrom(2);
for( var i = 0; i < arr.length; i++ ) { doFunThings(); } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-09T18:18:30.180

这是一种从数组中的任何索引开始并同时向前和向后循环的简单方法（即，从最接近索引的项目开始迭代所有项目并移动得更远）。

```
let passing = 0;
function bothSides(arr, idx) {
    newArr = [];
    const shortLen = Math.min(idx, arr.length - idx);
    for (let i = 0; i < shortLen; i++) {
        newArr.push(arr[idx + i]); // add next
        newArr.push(arr[idx - i - 1]); // add previous
    }
    for (let i = idx + shortLen; i < arr.length; i++) {
        newArr.push(arr[i]); // add any remaining on right
    }
    for (let i = idx - shortLen - 1; i > -1; i--) {
        newArr.push(arr[i]); // add any remaining on left
    }
    return newArr;
}
var arr = [...Array(10).keys()]; // 0,1,2,3,4,5,6,7,8,9
passing += bothSides(arr, 0) == '0,1,2,3,4,5,6,7,8,9' ? 1 : 0;
passing += bothSides(arr, 2) == '2,1,3,0,4,5,6,7,8,9' ? 1 : 0;
passing += bothSides(arr, 4) == '4,3,5,2,6,1,7,0,8,9' ? 1 : 0;
passing += bothSides(arr, 5) == '5,4,6,3,7,2,8,1,9,0' ? 1 : 0;
passing += bothSides(arr, 7) == '7,6,8,5,9,4,3,2,1,0' ? 1 : 0;
passing += bothSides(arr, 9) == '9,8,7,6,5,4,3,2,1,0' ? 1 : 0;

// same algorigthm but as generator
function* bothSidesG(arr, idx) {
    const shortLen = Math.min(idx, arr.length - idx);
    for (let i = 0; i < shortLen; i++) {
        yield arr[idx + i]; // add next
        yield arr[idx - i - 1]; // add previous
    }
    for (let i = idx + shortLen; i < arr.length; i++) {
        yield arr[i]; // add any remaining on right
    }
    for (let i = idx - shortLen - 1; i > -1; i--) {
        yield arr[i]; // add any remaining on left
    }
}
var arr2 = [...Array(7).keys()]; // 0,1,2,3,4,5,6
passing += [...bothSidesG(arr2, 0)] == '0,1,2,3,4,5,6' ? 1 : 0;
passing += [...bothSidesG(arr2, 1)] == '1,0,2,3,4,5,6' ? 1 : 0;
passing += [...bothSidesG(arr2, 3)] == '3,2,4,1,5,0,6' ? 1 : 0;
passing += [...bothSidesG(arr2, 5)] == '5,4,6,3,2,1,0' ? 1 : 0;
passing += [...bothSidesG(arr2, 6)] == '6,5,4,3,2,1,0' ? 1 : 0;
console.log(`Passing ${passing} of 11 tests`);
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-27T06:15:26.037

使用[下划线](http://underscorejs.org/#sortBy)和 _( Object ).Sort_Inside_Out()：

```
_.mixin( {
    Sort_Inside_Out: function ( Object ) {
        Counter = 0
        return (
                _( Object ).sortBy( function ( Element ) {
                    Counter =
                            -Counter + (
                            ( Math.sign( Counter ) == 1 ) ?
                                    0 :
                                    1 )
                    return ( Counter )
                } ) )
    },
} ) 
```

# google-drive-api - 将零大小文件上传到谷歌驱动器

> ID：12937708
> 
> 赞同：0
> 
> 时间：2012-10-17T15:21:31.473
> 
> 标签：google-drive-api, google-docs-api

我正在使用 gdata python 客户端来上传/下载文件。我无法弄清楚如何上传零大小的文件。这就是我所拥有的。

```
#To update
file = gdata.data.MediaSource()
r = client.GetResourceById(resid)
client.UpdateResource(r, media=file, new_revision=True)

#To create a new file
file = gdata.data.MediaSource()
doc = gdata.docs.data.Resource(type='file', title="Title")
r = client.CreateResource(doc, create_uri=uri, media=file) 
```

我尝试删除 media=None 并且也不包括在选项中。我怎样才能使它适用于零大小的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:07:59.330

您可以将片段用于`files.insert`Drive API 的方法，而无需指定 a`media_body`来创建空文件：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# php - 如何改进 S2 中的路由？

> ID：12937715
> 
> 赞同：1
> 
> 时间：2012-10-17T15:21:52.527
> 
> 标签：php, symfony

我想在路由中设置一个特殊的模式到 routing.yml。例如，在这种情况下：

```
search_result:
     pattern:    /results/{ubication}/{page}
     defaults:   
         _controller: SiteBundle:Web:searchResult
         ubication:   'Madrid'
         page:        1 
```

我希望路由匹配以下路径：

```
/results
/results/
/results/Madrid
/results/Madrid/
/results/Madrid/2 
```

最好的方法是什么？不能为每种情况创建多个路由

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:34:44.323

您可以使用注释来做到这一点：

```
@Route("/results/")
@Route("/results/{ubication}/")
@Route("/results/{ubication}/{page}") 
```

在你的php方法的注释中设置它，你应该能够调用你想要的url

# matlab - 如何将if语句中的数据存储在for循环中

> ID：12937717
> 
> 赞同：2
> 
> 时间：2012-10-17T15:21:54.803
> 
> 标签：matlab, loops, for-loop

在 for 循环中，您只能保留 for 循环的最后一个结果。每次完成 for 循环时，我都想保存数据。我不能放置 for 循环的索引，因为并非所有变量都满足 if 语句：我的代码是：

```
c=[1 3 2 3 3];p=[0 0 1 2 1];level2=[1 3];
for j=1:length(level2)
    for i=1:length(p)
        a=[p(i),c(i)]';
        if a(1,:)==level2(j)
            level3=a(2)
        else
        end
    end
end 
```

那么，如何`level3`将 for 循环中的所有结果作为向量呢？请注意`p`,`c`和`level2`应该是动态值，但这里它们是静态的，以使示例更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:30:57.617

您可以尝试以下

```
c=[1 3 2 3 3];p=[0 0 1 2 1];level2=[1 3];
level3=[];
for j=1:length(level2)
    for i=1:length(p)
        a=[p(i),c(i)]';
        if a(1,:)==level2(j)
            level3=[level3, a(2)];
        else
        end
    end
end 
```

例如，您会将迭代结果附加到当前向量的末尾。

# ios - 适用于 iOS 4.2 到最新版本的 Facebook SDK

> ID：12937719
> 
> 赞同：0
> 
> 时间：2012-10-17T15:22:00.350
> 
> 标签：ios, facebook-ios-sdk

所以，我刚刚下载了新的 Facebook iOS SDK 3.1 版。当我运行示例代码时，它抱怨我的 Xcode 4.4 中不存在 Social.framework

我已经有 Xcode 4.5，但问题是，Xcode 4.5 不允许我们使用 iOS 4.2。我需要在 iOS 4.2 上运行它。

那么，如果我使用可以在 Xcode 4.4 上运行的旧 Facebook SDK，Apple 会拒绝它吗？

苹果现在太难了。

# objective-c - iOS - 双击手势在 UIWebView 上不起作用

> ID：12937726
> 
> 赞同：0
> 
> 时间：2012-10-17T15:22:16.867
> 
> 标签：objective-c, cocoa-touch, uiview, uiwebview, swipe-gesture

我有一个`viewController`以编程方式添加的几个项目。A`UILabel`和 a`UIWebView`包括一个滚动视图。

现在，我使用故事板在 viewController 上添加了滑动手势，运行时一切正常。

当我尝试在 上滑动时出现问题`UIWebview`，它不会触发 Swipe 手势并且看起来好像取消了它。

我怎样才能启用它，以便手势在整个视图中起作用但又保持`UIWebview`功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:36:57.077

您可以设置 [UIWebView.scrollView setDelegate:myViewController] 并在您的视图控制器中实现 -(void)scrollViewDidScroll:(UIScrollView *)sender

但要真正传递事件，您将需要更多： http: [//mithin.in/2009/08/26/detecting-taps-and-events-on-uiwebview-the-right-way/](http://mithin.in/2009/08/26/detecting-taps-and-events-on-uiwebview-the-right-way/)

# c# - 在 Visual Studio 中使用 Intellisense 的 Simple.Data Micro ORM（动态）

> ID：12937729
> 
> 赞同：3
> 
> 时间：2012-10-17T15:22:20.237
> 
> 标签：c#, visual-studio, simple.data, micro-orm

我决定使用[Simple.Data Micro ORM](https://github.com/markrendle/Simple.Data#readme)，因为它可以简单地使用数据库并节省我编写大量代码的时间，而且由于动态，我甚至不需要创建对象！

问题是我在 Visual Studio 中失去了 Intellisense 支持，而且我不喜欢每次编写代码时都查看行名。有没有办法利用动态智能感知，即使是以零散的方式？

所以他们可能会质疑是否有可能以一种或另一种方式对动态进行智能感知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T20:35:05.427

可悲的是，一旦你开始使用 Simple.Data，你就会失去智能感知。但是，[正如 Mark Rendle 的博客中所详述的](http://blog.markrendle.net/2012/10/12/howto-dial-up-the-static-on-simple-data/)，可以使用名为[Impromptu-Interface](http://code.google.com/p/impromptu-interface/)的项目将其拨回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T21:53:14.453

在我的 GitHub 上有一个非常不完整的项目，名为[Simple.Data.Pad](http://github.com/markrendle/Simple.Data.Pad)，您可以使用它来编写带有一些数据库派生代码完成的查询；完成后，您可以将它们复制并粘贴到 Visual Studio 中。

我期待明年能够提供更好的 VS 集成解决方案。

# android - Android输入键监听

> ID：12937731
> 
> 赞同：8
> 
> 时间：2012-10-17T15:22:21.223
> 
> 标签：android, button, android-edittext, onclicklistener

有人可以帮助我使用软键盘输入键监听器吗？

我需要一个输入键监听器，比如一个按钮监听器，里面会有几个像这样的editext监听器

```
enterkey.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) { 
        if(editext1.getText().toString().equalsIgnoreCase("test1")) {
            button3.performClick();
        }
        if(editext1.getText().toString().equalsIgnoreCase("test2")) {
            button4.performClick();
        }
    }
); 
```

我还需要知道这样的事情是否正确？

```
if(editext1.getText().toString().equals.null)) {
       testwrong.setText("Wrong"); 
```

* * *

我现在已经尝试使用此代码，但是当我按 Enter 时一直得到一个空值？任何人都可以提出一个解决方案来避免这种情况吗？

```
editext.setOnKeyListener(new View.OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        if (keyCode == KeyEvent.KEYCODE_ENTER) {
            if ("test1".equalsIgnoreCase(anstext.getText().toString())) {
                but4.performClick();
            }
        } else if ("test2".equalsIgnoreCase(editext.getText().toString())) {
            but5.performClick();
        }
        if ("test5".equalsIgnoreCase(editext.getText().toString())) {
            but6.performClick();
        }
        if ("test7".equalsIgnoreCase(editext.getText().toString())) {
            but7.performClick();
        }
        if (editext.getText().toString() != null) {
            testwrong.seText("wrong");
        }
        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-17T15:32:51.090

在您`EditText`应该使用[imeOptions](http://developer.android.com/intl/ru/reference/android/widget/TextView.html#attr_android%3aimeOptions)指定键盘操作。

```
<EditText
       android:id="@+id/query"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:imeOptions="actionGo"
       android:inputType="text" /> 
```

在您的活动课程中：

```
 EditText editText = (EditText) findViewById(R.id.query);
 editText.setOnEditorActionListener(new OnEditorActionListener() {
            public boolean onEditorAction(TextView v, int actionId,
                    KeyEvent event) {
                    if (actionId == EditorInfo.IME_ACTION_GO) {

                        return true;
                    }
                    return false;
                }
            }); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T15:32:11.007

如果您想`Enter`在`onKeyListener`您的`Edittext`

```
 yourEditText.setOnKeyListener(new View.OnKeyListener() {
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                // TODO Auto-generated method stub
                if (keyCode==KeyEvent.KEYCODE_ENTER) { //Whenever you got user click enter. Get text in edittext and check it equal test1\. If it's true do your code in listenerevent of button3
                    if("test1".equals(edt.getText().toString())) {
                        //paste your code in button3 listener here
                        }
                }

}
    ) 
```

这部分是错误的。

> if(editext1.getText().toString().equals.null)) { testwrong.setText("Wrong");

你应该改为

```
if (editext1.getText().toString() != null && !editext1.getText().toString().isEmpty()) {
  // doSomething
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:29:51.353

你可以用它来监听键盘事件

[http://developer.android.com/reference/android/inputmethodservice/KeyboardView.OnKeyboardActionListener.html](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.OnKeyboardActionListener.html)

# c++ - 以 3 个函数的中位数进行比较的次数？

> ID：12937732
> 
> 赞同：9
> 
> 时间：2012-10-17T15:22:26.753
> 
> 标签：c++, algorithm, median

截至目前，我的函数找到了 3 个数字的中位数并对它们进行排序，但它总是进行三个比较。我想我可以在某处使用嵌套的 if 语句，这样有时我的函数只会进行两次比较。

```
int median_of_3(int list[], int p, int r)
{
    int median = (p + r) / 2;

    if(list[p] > list[r])
        exchange(list, p, r);
    if(list[p] > list[median])
        exchange(list, p, median);
    if(list[r] > list[median])
        exchange(list, r, median);

    comparisons+=3;                // 3 comparisons for each call to median_of_3

    return list[r];
} 
```

我不确定我可以在哪里制作嵌套的 if 语句。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-09-26T12:04:21.453

如果您只需要中值，这里有一个基于 min/max 运算符的无分支解决方案：

`median = max(min(a,b), min(max(a,b),c));`

英特尔 CPU 具有 SSE 最小/最大矢量指令，因此根据您或您的编译器的矢量化能力，它可以运行得非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T05:56:28.763

如果我们允许额外的操作，我们最多可以使用 2 次比较来找到中位数。诀窍是使用排他或找到三个数字之间的关系。

```
void median3(int A[], int p, int r)
{
    int m = (p+r)/2;
    /* let a, b, c be the numbers to be compared */
    int a = A[p], b = A[m], c = A[r];
    int e = a-b;
    int f = a-c;

    if ((e^f) < 0) {
        med_comparisons += 1;
        /* a is the median with 1 comparison */
        A[m] = a;
        /* b < a < c ? */
        if (b < c) /* b < a < c */ { A[p] = b, A[r] = c; }
        else       /* c < a < b */ { A[p] = c, A[r] = b; }
        comparisons += 2;
    } else {
        med_comparisons += 2;
        int g = b-c;
        if ((e^g) < 0) {
            /* c is the median with 2 comparisons */ 
            A[m] = c;
            /* a < c < b ? */
            if (a < b) /* a < c < b */ { A[p] = a, A[r] = b; }
            else       /* b < c < a */ { A[p] = b, A[r] = a; }
        } else {
            /* b is the median with 2 comparisons */
            A[m] = b;
            /* c < b < a ? */
            if (a > c) /* c < b < a */ { A[p] = c; A[r] = a; }
            else       /* a < b < c */ { /* do nothing */    }
        }
        comparisons += 3;
    }
} 
```

第一个异或（e^f）是找出（ab）和（ac）之间符号位的差异。
如果它们具有不同的符号位，则 a 是中位数。否则，a 要么是最小值，要么是最大值。在这种情况下，我们需要第二个异或 (e^g)。

同样，我们将找出**(ab) 和 (bc)**之间符号位的差异。如果它们有不同的符号位，**一种情况是 a > b && b < c。**在这种情况下，我们也得到**a > c**，因为在这种情况下**a 是最大值**。所以我们有**a > c > b。** 另一种情况是**a < b && b > c && a < c**。所以我们有**a < c < b** ; **在这两种情况下， c 都是中位数**。

如果**(ab)**和**(bc)**具有相同的**符号位**，**则 b 是**使用与上述类似参数的中位数。实验表明，一个随机输入需要**1.667 次比较**才能找出中**位数**，另外需要一次比较才能得到顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:41:26.453

要对 3 个项目进行排序，您需要进行 3 次比较。

要偶然找到中间的一个，您需要 2 个。

要准确找到中间那个，您平均需要 2+2/3 ~= 2.67（具有均匀分布的随机数据）

```
if (a<b) {
   // partial order = a,b
   if (b<c) {  } // 2 comparisons: order is a,b,c
      else { // order is a,c,b or c,a,b
          if (a<c) { } // order is a,c,b -- 3 comparisons
          else { }     // order is c,a,b -- 3 comparisons
      }
} else {
   // partial order = b,a  
   if (c<b) {  } // 2 comparisons: order is c,b,a
   else {  // order is b,c,a or b,a,c
      if (c>a) { } // order is b,a,c -- 3 comparisons
      else { }   // order is b,c,a -- 3 comparisons
   }
} 
```

作为附加说明：一些语言（Fortran、IIRC）以及一些 ISA（VAX，再次是 IIRC）支持比较，其中下一个 PC 地址从三个选项中选择：LT、EQ、GT。如果字母表足够小，这个机会会稍微减少所需比较的次数。

此外，这可能没有实际用途，因为嵌套结构过于复杂而导致错误分支预测的惩罚可能比保存比较的收益大得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:45:23.377

```
int m = (p + r) / 2;
if (list[p] < list[m])
    if (list[p] >= list[r])
        return list[p];
    else if (list[m] < list[r])
        return list[m];
else
    if (list[p] < list[r])
        return list[p];
return list[r]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-16T00:06:45.840

更像这样

```
#define MEDIAN(a,b,c) ( (a > b) ? max(b, min(a,c)) :
                                  min(b, max(a,c)) ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-29T17:37:16.207

仅使用两个比较：

```
double median_of_three(double left, double middle, double right) 
{
    double med = middle;
    if (left  < med) med = left;
    if (right > med) med = right;
    return med;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-19T17:33:01.753

Python

```
#!/usr/bin/env python3

def bigger(a,b):
    if a > b:
       return a
    else:
    return b

def biggest(a,b,c):
    return bigger(a,bigger(b,c))

def median(a,b,c):
    big = biggest(a,b,c)
    if big == a:
       return bigger(b,c)
    if big == b:
       return bigger(a,c)
    else:
       return bigger(a,b) 
```

打印中位数

```
print(median(20,18,19)) # => 19 
```

# c# - 反序列化字符串和原始类型的 xml 表示 - ASP.NET Web API

> ID：12937737
> 
> 赞同：0
> 
> 时间：2012-10-17T15:22:38.333
> 
> 标签：c#, xml, serialization, xml-serialization, asp.net-web-api

我目前正在使用 ASP.net Web API 实现 Web 服务，并且我的一个方法返回一个字符串。问题是它返回这样的字符串：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization">Some Resource</string> 
```

这种响应是我想要的，但我不知道如何在我的 Web 服务客户端中反序列化它。

您将如何反序列化表示字符串或任何原始数据类型的任何 xml？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:23:12.807

您可以使用 System.Net.Http.Formatting.dll 中的 ReadAsAsync。说“uri”会给我这个数据：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
  Some Resource
</string> 
```

然后您可以使用 ReadAsAsync 来获取 XML 中的字符串：

```
 HttpClient client = new HttpClient();
        var resp = client.GetAsync(uri).Result;
        string value = resp.Content.ReadAsAsync<string>().Result; 
```

（我这里直接调用 .Result 来演示 ReadAsAsync<> 的使用...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:39:29.623

```
// Convert the raw data into a Stream
string rawData = "<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">Some Resource</string>";
MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(rawData)); 

// User DataContractSerializer to deserialize it
DataContractSerializer serializer = new DataContractSerializer(typeof(string));
string data = (string)serializer.ReadObject(stream);

Console.WriteLine(data); 
```

# cross-compiling - 交叉编译错误

> ID：12937739
> 
> 赞同：-1
> 
> 时间：2012-10-17T15:22:43.290
> 
> 标签：cross-compiling

我尝试交叉编译要在 arm 目标上运行的应用程序（我的主机是 x86 ubuntu 11.10）。

当我运行“make”时，我得到这个错误：

```
mar@ubuntu:~/Desktop/App$ make
cc1plus: warning: include location "/usr/include/GL/" is unsafe for cross-compilation
cc1plus: warning: include location "/usr/include/c++/4.6/" is unsafe for cross-compilation
cc1plus: warning: include location "/usr/include/qt4/" is unsafe for cross-compilation
..
/usr/include/qt4/QtOpenGL/qgl.h:77:15: fatal error: GL: No such file or directory
compilation terminated.
make: *** [main.o] Error 1 
```

我知道我需要为 arm 交叉编译我的库 qt4 和 OpenGL，但我不知道如何。

对于makefile，我使用那些编译器。

```
CC = arm-none-linux-gnueabi-gcc
CXX = arm-none-linux-gnueabi-g++
AR = ar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:28:36.033

您需要为`libGL.a`要交叉编译的体系结构提供。

为此，请发现`libGL.a`您的 SDK 中是否有或在其他地方获取它，然后使用选项`-L/path/to/your/arm/libs/dir`（也会`-I/path/to/your/arm/headers`有帮助）。

为避免在本机（主机）目录中搜索，请使用`-nostdlib`and `-nostdinc`（对于 GCC/G++）

# php - Nginx：前端控制器重写规则中的问号

> ID：12937744
> 
> 赞同：0
> 
> 时间：2012-10-17T15:23:01.833
> 
> 标签：php, mod-rewrite, url-rewriting, nginx, rewrite

目前我有这段代码：

```
if (!-e $request_filename)
{
    rewrite ^/(.*)$ /index.php?/$1 last;
    break;
} 
```

这适用于以下情况： `example.com/foo`重定向到`index.php`

然而`example.com/foo?bar`不起作用。你如何让它发挥作用？

FWIW：我在 Apache 的 mod_rewrite 等效项中没有遇到这个问题。基本上，我将一个可以工作的站点从 Apache 移到了 Nginx。现在我遇到了这个问题。

**编辑：**

要清楚这就是我要做的事情：

*   `example.com/foo`
*   `example.com/foo/bar/etc`
*   `example.com/foo?bar`
*   `example.com/foo?bar=quz`

应该全部`index.php`“静默”服务而不更改浏览器地址栏的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:40:02.377

我刚刚使用以下配置对其进行了测试，我相信这确实需要您想要的：

```
server {
#listen   80; ## listen for ipv4; this line is default and implied
#listen   [::]:80 default ipv6only=on; ## listen for ipv6

root /home/www/test;
index index.php index.html index.htm;

# Make site accessible from 
server_name test.myhost.nl;

location / {        
    # First attempt to serve request as file, then as directory, then fall back to index.php
    try_files $uri $uri/ /index.php?$args;
}

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
location ~ \.php$ {
    try_files $uri = 404;

    # Fix for server variables that behave differently under nginx/php-fpm than typically expected
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    # Include the standard fastcgi_params file included with ngingx
    include fastcgi_params;
    fastcgi_param PATH_INFO $fastcgi_path_info;
    fastcgi_index index.php;

    # Override the SCRIPT_FILENAME variable set by fastcgi_params
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;

    # Pass to upstream PHP-FPM; This must match whater you name your upstream connection
    #fastcgi_pass phpfpm;
    fastcgi_pass 127.0.0.1:9000;
}
} 
```

# activerecord - 使用 ElasticSearch 和 Tire 过滤关联的 id

> ID：12937749
> 
> 赞同：2
> 
> 时间：2012-10-17T15:23:16.207
> 
> 标签：activerecord, elasticsearch, tire

很长一段时间以来，我一直对应该是一个简单的查询感到头疼。我查看了 StackOverflow 上的所有文档和示例，以及关于`Tire`此处的大多数问题，但均未成功。

基本上，我试图根据一些相关模型的 ID 过滤我的搜索结果。

这是模型（请注意，我目前仍在使用动态映射）：

```
class Location < ActiveRecord::Base
  belongs_to :city
  has_and_belongs_to_many :tags

  # also has a string attribute named 'kind'
end 
```

我想要做的是按`city_id`、 按 1`tag_id`和 按过滤我的搜索查询`kind`。

我已经尝试构建查询，但我只收到错误，因为我似乎无法正确构建它。这是我到目前为止所拥有的（不工作）：

```
Location.search do
  query { string params[:query] } if params[:query].present?
  filter :term, { city_id: params[:city_id] } if params[:city_id].present? # I'd like to use the ids filter, but have no idea of the syntax I'm supposed to use
  filter :ids, { 'tag.id', values: [params[:tag_id]] } if params[:tag_id].present? # does not compile
  filter :match, { kind: params[:kind] } if params[:kind].present? # does not compile either
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:23:09.853

事实证明，动态映射并不能适应这种情况。我还必须定义我的数据是如何被索引的。

这是我的映射：

```
mapping do
  indexes :id, index: :not_analyzed
  indexes :kind, index: :not_analyzed
  indexes :city_id, index: :not_analyzed
  indexes :tags do
    indexes :id, index: :not_analyzed
  end
end 
```

和我的习惯`to_indexed_json`：

```
def to_indexed_json
  {
    kind: kind,
    city_id: city_id,
    tags: tags.map do |t|
      {
        id: t.id
      }
    end
  }.to_json
end 
```

最后，我可以像这样过滤：

```
 Location.search do
    query { string params[:query] } if params[:query].present?
    filter :term, { city_id: params[:city_id] } if params[:city_id].present?
    filter :term, { "tags.id" => params[:tag_id] } if params[:tag_id].present?
    filter :term, { kind: params[:kind] } if params[:kind].present?
  end 
```

重要的部分是标签索引，它允许我`"tags.id"`在过滤器中使用。

# ajax - 将 Blob 转换为文件并将其作为 POST 参数 XMLHttpRequest 传递

> ID：12937752
> 
> 赞同：0
> 
> 时间：2012-10-17T15:23:28.843
> 
> 标签：ajax, xmlhttprequest, filereader

```
//photo - image in Blob type
//no problems with it, checked with FileReader.readAsDataURL & <img>
var form = new FormData()
form.append('file1', photo, 'image.jpg')
ajax.post(url, form, callback) //no photos uploaded 
```

我正在尝试做的文档：[将文件上传到 VK 服务器过程](http://vk.cc/ZWfJz)（步骤 2）

那么，我应该如何将我的 blob 作为 POST 参数传递？

[请求的图像](http://cs417825.userapi.com/v417825012/70e/D0RkPJx1db0.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:13:34.890

Mozilla Developer Network 上的完整文件上传示例

[https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Uploading_a_user-selected_file](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Uploading_a_user-selected_file)

你`FileReader.readAsBinaryString()`用来读取数据，然后 XHR`sendAsBinary()`推动 IO 前进

```
function FileUpload(img, file) {
  var reader = new FileReader(); 
  this.ctrl = createThrobber(img);
  var xhr = new XMLHttpRequest();
  this.xhr = xhr;

  var self = this;
  this.xhr.upload.addEventListener("progress", function(e) {
        if (e.lengthComputable) {
          var percentage = Math.round((e.loaded * 100) / e.total);
          self.ctrl.update(percentage);
        }
      }, false);

  xhr.upload.addEventListener("load", function(e){
          self.ctrl.update(100);
          var canvas = self.ctrl.ctx.canvas;
          canvas.parentNode.removeChild(canvas);
      }, false);
  xhr.open("POST", "http://demos.hacks.mozilla.org/paul/demos/resources/webservices/devnull.php");
  xhr.overrideMimeType('text/plain; charset=x-user-defined-binary');
  reader.onload = function(evt) {
    xhr.sendAsBinary(evt.target.result);
  };
  reader.readAsBinaryString(file);
} 
```

# facebook - 您能否获得开放图形对象实例的 Facebook 见解，例如“在风中吹”与歌曲？

> ID：12937753
> 
> 赞同：3
> 
> 时间：2012-10-17T15:23:31.340
> 
> 标签：facebook, object, analytics, facebook-opengraph, facebook-insights

众所周知，Facebook 文档并不是最好的。它在内部是不一致的，不断变化的，充斥着断开的链接，并且经常过时或完全错误。我进行了搜索和搜索，但似乎找不到一个非常简单问题的答案：您能否获得开放图形对象实例的 Insights 数据，例如“Blowing in the Wind”（实例）与 Songs（类型）。

这似乎应该是 Insights 的一个明显用例，但从我所能召集的情况来看，这似乎是不可能的。[Facebook 的 Insights 文档](http://developers.facebook.com/docs/opengraph/insights/)说：

> 选择操作过滤器后，您可以选择按对象进一步过滤。

他们在此文本下方显示了此屏幕截图，这似乎表明您可以通过打开的图形对象类型而不是单个对象实例来过滤见解。那么，到底是哪一个？！他们的术语非常松散，这使得理解文档*变得*更加困难......

![这个截图](../Images/3868b5a99696a89dbe9686a1674d0fdd.png)

通过 Graph API，您可以获得的唯一 Insights 数据似乎是在应用程序、域或页面（Facebook 页面而不是网页）级别，如[他们的文档](http://developers.facebook.com/docs/reference/api/insights/)中所述：

> **API 参考 › Graph API › Insights**：包含有关应用程序、页面和域的统计信息的对象。

[... FQL](http://developers.facebook.com/docs/reference/fql/insights/)似乎也是如此：

> **API 参考 › FQL › 见解**：一个 FQL 表，其中包含有关具有 30 个或更多连接的应用程序、页面和域的统计信息。

所以，我的猜测是这是不可能的，但是，对开放图对象实例进行分析的需求似乎如此明显，以至于我觉得我必须在这里遗漏一些东西。我的意思是 Spotify 不想知道他们目录中的哪些歌曲在 Facebook 上被分享/看到的频率更高吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:11:16.017

我认为接口或 API 不支持对象实例级别的见解，仅支持对象类型/动作类型。

如果它确实有效，那么使用应用访问令牌调用 /OBJECT_ID/insights 是最合乎逻辑的地方

# javascript - jQuery .change() 在 JS 的无线电选择上触发

> ID：12937757
> 
> 赞同：1
> 
> 时间：2012-10-17T15:23:45.343
> 
> 标签：javascript, jquery

我使用 jQuery .change() 事件监听器来隐藏/显示 div。如果我选择一个单选按钮

```
$('#Radio1').prop('checked',true); 
```

侦听器不会触发。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:25:16.817

这不会触发更改事件的处理程序。您需要在选择上调用 .trigger() 。

```
$('#Radio1').prop('checked',true).trigger("change"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T15:25:33.983

你总是可以使用 jQuery 的触发方法：

```
 $('#Radio1').trigger('change'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T15:25:42.723

您需要手动[触发它：](http://api.jquery.com/trigger/)

```
$('#Radio1').trigger('change'); 
```

或者更短的版本：

```
$('#Radio1').change(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T15:26:15.860

您必须触发您的单选按钮更改状态：

```
 $("#Radio1").trigger("change"); 
```

或者

```
$("#Radio1").change(); 
```

抓住它

```
$("#Radio1").change(function () {

}); 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-10-17T15:25:32.693

```
$('#Radio1').click(function() {

}); 
```

# java - 在主线程中运行循环时显示正在加载的 JFrame

> ID：12937759
> 
> 赞同：2
> 
> 时间：2012-10-17T15:23:55.600
> 
> 标签：java, multithreading, swing, loops, event-dispatch-thread

这是我的第一篇文章，所以如果我做错了什么请告诉我。我一直在研究一个小程序来获取几个节点的状态。这通过让每个节点的一个线程检查其在网络类中的正常运行时间来工作。一旦它获得节点的状态，它将把它放入一个哈希图中。然后我检查该哈希图的状态并等待其内容量等于我们正在检查的节点总数。完成后，它会继续在屏幕上显示它们。问题在于，尽管这是一个线程繁重的应用程序，但获取所有节点的状态仍然需要几秒钟。在此期间，我想显示一个带有加载栏的单独 JFrame（如果可以的话，甚至使用相同的 JFrame。

我不会撒谎，我是 Java 新手，而且代码很糟糕，我想知道你们是否可以给我建议我应该做什么。这是代码。

--主节点状态窗口--

```
public NodeStatusWindow() {
    super(Managment.getTitle() + " - Nodes");
    setLayout(new FlowLayout());

    Thread threada = new Thread(new ShowLoading());
    threada.start();

    System.out.println("Checking node status...");

    Nodes.nodeOnlineCurrent.clear();

    for (int i = 0; i < Nodes.getNodes().size(); i++) {
        Object currentNode = Nodes.getNodes().keySet().toArray()[i];//

        Thread thread = new Thread(new CheckUptime((int) currentNode));
        thread.start();
    }

    while (Nodes.nodeOnlineCurrent.size() < Nodes.getNodes().size()) {
        System.out.println(Nodes.nodeOnlineCurrent.size() + " < " + Nodes.getNodes().size());
    }

    for (int i = 0; i < Nodes.nodeOnlineCurrent.size(); i++) {
        JLabel[] nodeList = new JLabel[Nodes.getNodes().size()];
        Object currentNode = Nodes.getNodes().keySet().toArray()[i];
        nodeList[i] = new JLabel("Node: " + currentNode.toString());

        nodeList[i].setOpaque(true);

        if (Nodes.nodeOnlineCurrent.get(currentNode)[0] == false) {
            nodeList[i].setForeground(new Color(255, 0, 0)); //Red
        } else if (Nodes.nodeOnlineCurrent.get(currentNode)[1] == false) {
            nodeList[i].setForeground(new Color(230, 222, 0)); //Yellow
        } else {
            nodeList[i].setForeground(new Color(0, 230, 0)); //Green
        }

        add(nodeList[i]);
    } 
```

--加载窗口。这个类是在上面类中的threada对象中创建的——

```
public class NodeStatusLoadingWindow extends JFrame {
    private static final long serialVersionUID = 1369511477485416862L;

    private JLabel status;

    public NodeStatusLoadingWindow() {
        super(Managment.getTitle() + " - Nodes");
        setLayout(new FlowLayout());

        status = new JLabel("Loading...");
        add(status);
    }

    public void closeWindow() {
        this.setVisible(false);
        this.dispose();
    }
} 
```

这是 showLoading 线程

```
public class ShowLoading implements Runnable {
    public void run() {
        try {
            GUIHandler.drawNodeStatusLoadingWindow();
        } catch (Exception e) {
            System.out.println("Exception! " + e.toString());
        }
    }
} 
```

# java - 即使在 vm args 中使用 XstartOnFirstThread，线程访问也无效

> ID：12937762
> 
> 赞同：7
> 
> 时间：2012-10-17T15:24:23.587
> 
> 标签：java, macos, java-web-start

我有一个带有单个类的早期 Java Web Start 应用程序。它在 Windows 和 Linux 上运行，但在 Mac OS X 上会出现可怕的 Invalid Thread Access 错误。我意识到这已经在其他地方处理过。我花了整整两天时间在互联网上搜索并实施了所有解决方案，但问题仍然存在。

我的理解是对 SWT 的调用必须从主线程进行，这里就是这种情况。如果我错了，请纠正我。

我将在下面发布 3 个片段，应用程序的源代码、jnlp 文件的相关部分以及 Mac 上的错误消息。问题在最后。

* * *

JAVA源代码

```
package client;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
public class AccountWindow {
 public static void main(String[] args) {
  Display display = new Display(); **// error occurs here**
  Shell shell = new Shell(display); shell.open();
  while (!shell.isDisposed()) {
   if (!display.readAndDispatch())
    display.sleep();
  }
  display.dispose();
 }
} 
```

* * *

JNLP 片段

```
<resources os="Mac\ OS\ X" arch="x86_64">
    <j2se version="1.5+" java-vm-args="-XstartOnFirstThread" />
    <nativelib href="swt-4.2-cocoa-macosx-x86_64.jar" />
</resources> 
```

* * *

错误信息

```
org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(Unknown Source)
    at org.eclipse.swt.SWT.error(Unknown Source)
    at org.eclipse.swt.SWT.error(Unknown Source)
    at org.eclipse.swt.widgets.Display.error(Unknown Source)
    at org.eclipse.swt.widgets.Display.createDisplay(Unknown Source)
    at org.eclipse.swt.widgets.Display.create(Unknown Source)
    at org.eclipse.swt.graphics.Device.<init>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<init>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<init>(Unknown Source)
    at client.AccountWindow.main(AccountWindow.java:16)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.javaws.Launcher.executeApplication(Launcher.java:1550)
    at com.sun.javaws.Launcher.executeMainClass(Launcher.java:1488)
    at com.sun.javaws.Launcher.doLaunchApp(Launcher.java:1299)
    at com.sun.javaws.Launcher.run(Launcher.java:114)
    at java.lang.Thread.run(Thread.java:637) 
```

* * *

请注意- [http://www.eclipse.org/swt/faq.php#javawebstart](http://www.eclipse.org/swt/faq.php#javawebstart)
上 发布的 display.syncExec 解决方案不适用，因为在调用它之前，您需要一个显示。当我尝试创建显示时，会发生这里的错误。 - 我已经使用 JaNeLa 来验证 jnlp 文件并且没有红色错误。 - <resources os="Mac\ OS\ X" arch="i386"> 被正确解释，因为正在加载正确的 swt 库。[- 您可以在http://thelinkjuicer.com/gannonline/client.jnlp](http://thelinkjuicer.com/gannonline/client.jnlp) 重现错误

* * *

现在的问题
任何人都可以在源代码或 jnlp 片段中看到任何会导致错误的内容吗？
第二个问题：如何判断 -XstartOnFirstThread 参数是否实际上被 VM 读取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:54:59.960

显然，您的 main 方法没有在主线程上执行。您可以在堆栈跟踪中看到启动器实际上是在另一个线程中启动的，然后`Launcher`才间接调用`main`. 不幸的是，这只是诊断，我不确定解决方案。我做过类似的事情（通过 Java Web Start 的 SWT 应用程序），但我不记得我们是如何解决这个问题的，如果有的话。

在检查了[com.sun.javaws.Launcher](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/javaws/Launcher.java.html)源代码之后，还不清楚它是如何工作的。该`Launcher.launch`方法启动一个新线程，在该线程中`main`执行您的方法。您可以按照代码重新创建您获得的确切堆栈跟踪。

Java Web Start的[主入口点](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/javaws/Main.java.html#line.67)显示主线程在启动后很快就死掉了。

## 更新

我挖出了一些东西：在[这个 Eclipse 错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=288436)中，建议问题可能与此有关：

```
<resources>
  <j2se version="1.4+" />
  <jar href="client.jar" />
</resources> 
```

解析器从这里获取 j2se 规范并忽略后面更具体的规范。尝试删除`<j2se...`线。

## 更新 2

[现在我从这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=303869)挖出来：

```
com.apple.concurrent.Dispatch.getInstance().getNonBlockingMainQueueExecutor().execute(
  new Runnable() { public void run() {
      final Display display = Display.getDefault(); 
      while (!display.isDisposed()) {
        if (!display.readAndDispatch())
          display.sleep();
      }
}); 
```

这实际上听起来像是可行的。它完全按照我在下面的评论中所描述的：通过专门为此目的而设置的机制将补丁插入主线程。尝试根据您的需要进行调整。您甚至可能不需要 -XstartOnFirstThread 。

## 更新 3

我终于找到了我的旧 SWT-JWS 项目。里面有这个：

```
<resources os="Mac OS X" arch="x86_64">
  <j2se version="1.6+" java-vm-args="-XstartOnFirstThread"/>
  <jar href="swt-cocoa-macosx-x86-64-3.6.2.jar" />
</resources> 
```

它有效。它没有默认`j2se`元素，该元素**仅**出现在 OSX 特定条目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:39:29.103

This is an answer to the secondary question, "How can you tell if the -XstartOnFirstThread argument is actually being read by the VM?" (or the related question, "how can you detect if -XstartOnFirstThread was passed to the VM?") I looked at `java.lang.management.RuntimeMXBean.getInputArguments()`, but `-XstartOnFirstThread` is *not* included in the returned `List`. After some research, I was able to figure out something, so I hope this helps someone else who was in my shoes.

According to [this link](http://bugs.sun.com/view_bug.do?bug_id=7131021), there are several environment variables set by the launcher. Among them are:

```
`JAVA_MAIN_CLASS_*pid*
JAVA_STARTED_ON_FIRST_THREAD_*pid*`
```

`Use `System.getenv()` to obtain a `Map` of the environment variables. From there, you can iterate through the `entrySet()` until you find an `Entry` with a `getKey()` whose return value starts with `"JAVA_MAIN_CLASS_"` . If the discovered `Entry`'s `getValue()` contains the name of your main class, you can use the rest of the key to determine the *pid*.`

 `Once you have the *pid*, look up the string `"JAVA_STARTED_ON_FIRST_THREAD_*pid*"` in the environment `Map`. If it exists and has the value `"1"`, the process was started with `-XstartOnFirstThread`. Otherwise, the process was started without the flag.

This probably won't work in an unsigned WebStart application, since the `System.getenv()` method is prohibited by default. But in a signed webstart application, or in a regular Java application, this does work.

Hope that helps,`

# jquery - jquery 附加图像不在 Chrome 中呈现，但在 IE9 中呈现

> ID：12937766
> 
> 赞同：1
> 
> 时间：2012-10-17T15:24:38.863
> 
> 标签：jquery, google-chrome, cross-browser

我似乎无法在 Chrome 22.0 中使用它，但它在 IE 9.0 中运行良好。我正在使用 jquery.min.js 版本 1.7.1。

文件 maint.php （这有点简化......）：

```
<?php if (isset($_POST['action']) && $_POST['action'] == 'start') {
    ... do stuff ...
    die;
?>
<html><head><script src="jquery.min.js" type="text/javascript"></script></head>
<body>
...
<center>
<form name="maint" method="post" action="maint.php">
<input id="action" type="hidden" name="action" value="noop"/>
<input type="button" value="Start" onClick="submitForm('start')"/>
</form>
<div id="workmsg"></div>
</center>
<script type="text/javascript">
function submitForm(action) {
    $('#workmsg').append('<h3>Please wait...</h3><br/><img src="work2.gif"/>');
    document.getElementById('action').value = action;
    document.maint.submit();
}
</script>
</body></html> 
```

单击“开始”按钮会显示消息“请稍候...”并显示 work2.gif 动画并提交（向自身）执行某些操作，同时显示消息和 GIF。

或者至少这就是它在 IE9 上的工作方式。

在 Chrome 上会显示消息，但不会显示 GIF。

知道为什么吗？

如果我直接浏览，Chrome 会渲染 GIF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:33:14.810

如果这是我以前多次遇到的“那个老栗子”，请将代码的提交行更改为...

```
setTimeout(function() { document.maint.submit(); }, 500); 
```

你可以尝试更短的超时时间，但这应该足够了，假设你遇到了我以前见过的同样的问题。在触发提交之前，浏览器可能只需要很短的时间来初始化图像元素。

# database - 可在 2 台计算机上访问 WAMP 数据库

> ID：12937768
> 
> 赞同：0
> 
> 时间：2012-10-17T15:24:46.020
> 
> 标签：database, vb6, phpmyadmin, wampserver, lan

我的笔记本电脑上有一个 WAMP 服务器，我希望它的数据库可以从另一台笔记本电脑访问。

我有一个使用 WAMP 服务器（PHP_MYSQL 数据库）的 VB 6.0 应用程序，我想让另一台 PC 或笔记本电脑访问数据库。

如何配置或编程 VB 以访问数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:54:25.967

有可能的。我们有多台机器连接到我们的 wampserver 数据库这是一个让您入门的清单：

*   您是否授予对 MySQL 用户帐户的[外部访问权限？](https://dev.mysql.com/doc/refman/5.5/en/grant.html)
*   您是否打开了 Windows 防火墙以[允许传入连接](http://windows.microsoft.com/is-IS/windows-vista/Open-a-port-in-Windows-Firewall)到您的 MySQL 端口？
*   您的 VB6 应用程序是否设置为[连接到 MySQL](http://www.vbforums.com/showthread.php?633096-VB6-Remote-MySQL-connection)？

# php - 在 URL 查询中显示数组搜索的最佳实践是什么？

> ID：12937769
> 
> 赞同：0
> 
> 时间：2012-10-17T15:24:51.463
> 
> 标签：php, arrays, url

假设我想创建一个搜索表单并使用[选择的 jQuery](http://harvesthq.github.com/chosen/) **多选**

我将用于`$_GET`保留分页查询。示例我的选择表单

```
<select name="q[]" data-placeholder="Please Select" multiple>
   <optgroup label="Choose a Location">
   <option value="l_1">Location A</option> 
   <option value="l_2">Location A</option> 
   </optgroup>
   <optgroup label="Choose a Type">
   <option value="t_1">Type A</option> 
   <option value="t_2">Type B</option> 
   </optgroup>
   <optgroup label="Choose a Room">
   <option value="r_1">Room A</option> 
   <option value="r_2">Room B</option> 
   </optgroup>   
</select> 
```

网址查询`http:/domain.com/search/?q[]=l_1&q[]=t_1&q[]=t_2&q[]=r_1&q[]=r_2`

还有另一种选择 URL 应该是什么样子的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:47:58.187

> 还有另一种选择 URL 应该是什么样子的？

不会。生成的 URL 将是 field_name=value，并且每个值都会重复该 URL。

这就是表单的工作方式。浏览器知道如何生成它们。服务器端表单数据解析器知道如何处理它们。

URL 是工具。它们不需要是艺术品。特别是当它们是从用户输入生成时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:34:44.463

GET 将使用您的元素的名称，即 p[]。如果你不喜欢方括号，就把它们去掉。

```
search/?q=l_1&q=l_2 
```

如果需要，您可以使用[友好的 URL 重写](http://zenverse.net/seo-friendly-urls-with-htaccess/)来使您的链接看起来更令人愉悦（并且更好地提高您的 SEO 性能）。我不确定这在搜索页面上会有多大用处......

# java - 休眠/持久性和单例模式

> ID：12937775
> 
> 赞同：5
> 
> 时间：2012-10-17T15:25:19.160
> 
> 标签：java, hibernate, singleton, persistence

我有一个要保存在数据库中的单例。其他持久化实体应该引用这个单例。用 Hibernate 是如何实现的？

我以一些还没有工作的东西结束，伪造了单例的单个 ID：

```
@Entity
@Subselect("select '1' as ID")
class Singleton {
    @Id
    @Column(name="ID")
    private Long getId() { return 1l; }
    private void setId(Long id) { }
}

@Entity
@Table(name="ENT")
class MyEnt {
    // TODO: how to annotate so that table ENT doesn't need foreign key column 
   Singleton s;
} 
```

问题是我不想在引用单例的实体中有一个带有外键的列 - 因为单例只是一个，我们不需要它的 ID ...

也许我想错了？也许这是错误的架构问题？你解决了类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:48:45.563

我以这个结束：

```
@Entity
@Subselect("select '1' as ID, * from TABLE")
class Singleton {
    @Id
    @Column(name="ID")
    private Long getId() { return 1l; }
    private void setId(Long id) { }
    // ... other useful fields persisted in TABLE
}

@Entity
@Table(name="ENT")
class MyEnt implements Lifecycle {
   Singleton s;
   void onLoad(Session sess, Serializable id) {
      this.s = sess.get(Singleton.class, 1l);
   }
   // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:30:30.243

如果`Singleton`只有一个对象，为什么要将它映射到其他实体中？

您可能想加载`Singleton`一次并将其放入`application context`. 在这种情况下，您可以在需要时重复使用它。

# multithreading - Alien::SeleniumRC 的简单 perl 多线程

> ID：12937784
> 
> 赞同：1
> 
> 时间：2012-10-17T15:25:54.697
> 
> 标签：multithreading, perl, testing, selenium-webdriver, alien

[Alien::SeleniumRC](https://metacpan.org/module/Alien%3a%3aSeleniumRC)说它的`start`方法是“这个调用将阻塞，直到服务器被杀死。”

我想用它来启动 Selenium 服务器，运行一些 Selenium 测试，然后关闭 Selenium 服务器——所有这些都来自一个`perl`脚本。实现这一目标的最简单干净的方法是什么？（我所说的干净是指如果出现问题，它将在退出时关闭 Selenium 服务器，因此不需要手动关闭。）

# javascript - 如何验证出生年份？

> ID：12937785
> 
> 赞同：1
> 
> 时间：2012-10-17T15:25:58.513
> 
> 标签：javascript, validation, function

对于这个作业，我必须编写一个 javascript 代码来验证出生年份是否大于 1870 并且小于当前年份加上一个如何将它们结合起来以显示相同的错误消息？

```
function isYearofBirthValid(birth) {
  "use strict";
  var alert = "";
  if(birth.length < 1870 && birth.length > 2013) {    <---- this part?
     alert("invalid year");
     return false;
  }
     return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:28:34.797

您应该使用 or 运算符 ( `||`) 而不是 and 运算符 ( `&&`)。出生日期不能同时小于 1870 年和大于 2013 年。

另外，我认为您不想检查值的长度，而是检查值本身。

```
if (birth < 1870 || birth > 2013) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:27:55.703

试试这个 if 语句：

```
function isYearofBirthValid(birth) {
    if(birth < 1870 || birth > 2013){
        alert("invalid year");
        return false;
    }
    return true;
} 
```

或者如果你真的想查一下明年是什么

```
function isYearofBirthValid(birth) {
    if(birth < 1870 || birth > new Date().getFullYear()+1){
        alert("invalid year");
        return false;
    }
    return true;
} 
```

然后你像这样调用函数

```
var valid = isYearofBirthValid(1978); //valid = true 
```

# list - 将函数列表应用于 common lisp 中的列表

> ID：12937788
> 
> 赞同：2
> 
> 时间：2012-10-17T15:26:05.527
> 
> 标签：list, common-lisp, higher-order-functions

我有一个函数列表，一个元素列表，我想将所有函数应用于所有元素，然后将所有结果列表附加在一起。我做了如下

```
(defun apply-functions(funcs elements)
    (if (null funcs)
        nil
        (append (mapcar #'(lambda (x) (funcall (car funcs) x)) elements) (apply-functions (rest funcs) elements)))) 
```

它按预期工作，但我不喜欢它。有没有更干净，更简洁的方法？我是 lisp 的新手，仍然习惯于 lispish 的做事风格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:52:12.133

我不知道你是否喜欢`loop`宏（我不想破坏任何人），但试试这个：

```
(defun apply-functions (fs es)
    (loop for f in fs appending (mapcar f es))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T18:53:04.500

这与您的想法相同，只是更短：

```
(defun apply-functions (functions elements)
  (mapcan #'(lambda (x) (mapcar x elements)) functions)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T19:05:15.453

我会定义一个函数，`call-each`它返回一个新函数，返回在其参数上调用每个函数的列表：

```
(defun call-each (fns)
  (lambda (arg)
    (mapcar (lambda (fn)
              (funcall fn arg))
            fns)))

(funcall (call-each (list #'third #'second #'first)) '(a b c))
;=> (C B A) 
```

cl 具有`mapcan`基本上是 `nconc`+的功能`mapcar`：

```
(mapcan #'reverse '((a b c)
                    (e f g)
                    (h i j)))
;=> (C B A G F E J I H)

(mapcan (call-each (list #'identity #'1+)) '(1 3 5 7 9))
;=> (1 2 3 4 5 6 7 8 9 10) 
```

不幸的是`nconc`，`mapcan`使用的是破坏性的：

```
(let ((data '((a b c)
              (d e f)
              (g h i))))
  ;;here be dragons
  (list (mapcan #'identity data)
        data))
;=> ((A B C D E F G H I) ((A B C D E F G H I) (D E F G H I) (G H I))) 
```

`alexandria`救援：

```
(let ((data '((a b c)
              (d e f)
              (g h i))))
  ;;safe version
  (list (alexandria:mappend #'identity data)
        data))
;=> ((A B C D E F G H I) ((A B C) (D E F) (G H I))) 
```

请注意，使用`mapcan`效率更高，但除非您确切知道数据来自何处以及谁拥有它，否则这`mappend`是可行的方法。

所以你可以写：

```
(defun apply-functions (fs es)
  (when fs
    (alexandria:mappend (call-each fs) es))

(apply-functions (list #'identity #'1+) '(1 3 5 7 9))
;=> (1 2 3 4 5 6 7 8 9 10) 
```

# java - 使用带有 Mockito/PowerMockito 的 File 和 FileInputStream 测试类

> ID：12937789
> 
> 赞同：0
> 
> 时间：2012-10-17T15:26:05.350
> 
> 标签：java, junit, mockito, powermock

我想为 JUnit 测试模拟一个 File 和 FileInputStream 对象。

假设我们有一个解析器。只能通过 parse(File myFile) 方法从 Parser 外部访问。其他方法如 readMyStream.... 是私有的。

示例代码：

```
public class Parser {

   public HashMap<String, String> parse(File myFile) throws Exception {
         HashMap<String, String> myConfig;
         Config config;

         try {
             //this line gives me a headache
             FileInputStream myFileInputStream = new FileInputStream(myFile);

             configStream = readMyStream(myFileInputStream);
               ..........
         } catch (FileNotFoundException e) {
                throw e;
         }
         return myConfig;
   }
   //reads the stream 
   private Config readMyStream(FileInputStream myFileInputStream) {
      Config config;    

      ...JDOM stuff....    

      return config;
   }
} 
```

**我面临的问题：**

*   如何断言一个文件对象像这个文件一样的文件输入流（PowerMockito）属于这个文件输入流，内容如下
*   如何模拟私有方法（Mockito/PowerMockito）

一个模拟/不工作的例子:)....

```
public class ParserTest {

   @Test
   public final void testParse() {
      File MOCKEDFILE = PowerMockito.mock(File.class);
      PowerMockito.when(MOCKEDFILE.exists()).thenReturn(true);
      PowerMockito.when(MOCKEDFILE.isFile()).thenReturn(true);
      PowerMockito.when(MOCKEDFILE.isDirectory()).thenReturn(false);
      PowerMockito.when(MOCKEDFILE.createNewFile()).thenReturn(true);
      PowerMockito.when(MOCKEDFILE.length()).thenReturn(11111111L);

      //what about the path of MOCKEDFILE which isn't existing
      PowerMockito.when(MOCKEDFILE.getPath()).thenReturn(?????);

      //how to assign a File an FileInputStream? (I thought something like)
      PowerMockito.mockStatic(FileInputStream.class);
      FileInputStream MOCKEDINPUTSTREAM = PowerMockito.mock(FileInputStream.class);
      PowerMockito.whenNew(FileInputStream.class).withArguments(File.class).thenReturn(MOCKEDINPUTSTREAM);

      //how to mock the private method readMyStream
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:33:13.940

`File`我建议使用`TemporaryFolder`Rule 并根据需要创建/不创建文件，而不是 mocking 。

在我之前的项目中，我们编写了一个`FileInputStreamSupplier`用于创建`FileInputStream`. 然后可以模拟此类以提供模拟`FileInputStream`以允许测试行为。一般来说，你可以让你的班级`Supplier<FileInputStream>`学习（使用番石榴）并模拟它。

# magento - Magento 特价验证

> ID：12937794
> 
> 赞同：0
> 
> 时间：2012-10-17T15:26:15.470
> 
> 标签：magento, magento-1.7

对不起，我是magento的新手。

我有一个多供应商 magento 站点，供应商可以在其中创建产品。但是在设置产品价格时，一些用户经常会犯一些错误。有时特价高于原价。我喜欢检查这个错误。我想要一个验证脚本，以便当供应商（管理员访问权限有限）创建新产品时，他们应该保持特价和原价之间的最小差异，特价总是低于原价。

任何机构都可以给出一些提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T10:47:25.253

希望以下代码对您有所帮助

```
 <?php
 $product= Mage::getModel('catalog/product')->load(product_id);
 $price = $product->getPrice();
 $webprice = $product->getwebprice();
 $specialprice = $product->getFinalPrice();
 if($specialprice==$price)
 {?>
     <span>$<?php echo number_format($price,2);?></span>
     <?php } else if($specialprice<$price) { ?>
     <div>
        <span>Regular Price:</span>
        <span>$ <?php echo number_format($price,2); ?></span>
     </div>
     <div>
         <span>Web Special:</span>
         <span>$ <?php echo number_format($specialprice,2); ?> </span>
     </div>
  <?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:30:30.057

即使用户设置的特价高于原价，Magento 也会通过不显示该特价来处理它。
但是，如果您想进行一些自定义，价格显示的路径是：**app/design/frontend/default/default/template/catalog/product/price.phtml**
如果您复制结构，将其粘贴到您的自定义上会是明智的主题并继续您的修改。**可以在list.phtml（相同的产品文件夹）**
中添加您的 javascript 。希望它能给一些提示。

# python - 如何在文本文件中找到重复的行并打印它们？

> ID：12937798
> 
> 赞同：7
> 
> 时间：2012-10-17T15:26:18.550
> 
> 标签：python, text

我有一个包含 1,200 行的文本文件。其中一些是重复的。

我怎样才能在文件中找到重复的行（但不担心大小写），然后在屏幕上打印出该行的文本，这样我就可以去寻找它了？我不想删除它们或任何东西，只是找出它们可能是哪些行。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-17T15:28:03.800

这很容易用一组：

```
with open('file') as f:
    seen = set()
    for line in f:
        line_lower = line.lower()
        if line_lower in seen:
            print(line)
        else:
            seen.add(line_lower) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T15:34:54.563

因为只有 1200 行，所以你也可以使用`collections.Counter()`：

```
>>> from collections import Counter

>>> with open('data1.txt') as f:
...     c=Counter(c.strip().lower() for c in f if c.strip()) #for case-insensitive search
...     for line in c:
...         if c[line]>1:
...             print line
... 
```

如果`data1.txt`是这样的：

```
ABC
abc
aBc
CAB
caB
bca
BcA
acb 
```

**输出是：**

```
cab
abc
bca 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T15:36:22.567

### 查找不区分大小写的重复项

这不会给你行号，但它*会给*你一个重复行的列表，然后你可以进一步调查。例如：

```
tr 'A-Z' 'a-z' < /tmp/foo | sort | uniq -d 
```

### 示例数据文件

```
# /tmp/foo
one
One
oNe
two
three 
```

上面列出的管道将正确产生：

> 一

### 查找行号

然后，您可以像这样 grep 相关的行号：

```
grep --ignore-case --line-number one /tmp/foo 
```

# r - 在 OS X 10.8 上的 R 2.15 上安装“旧包”（cran 网站上不可用）

> ID：12937799
> 
> 赞同：1
> 
> 时间：2012-10-17T15:26:23.537
> 
> 标签：r, macos, installation, package, cran

我是 R 新手，我正在尝试安装此网页上列出的软件包： [http](http://web.cbio.uct.ac.za/~renaud/CRAN) ://web.cbio.uct.ac.za/~renaud/CRAN但现在可以在 cran 网站上使用.

当我尝试使用“包安装程序”时，R 正在寻找该网站上不存在的 osx 目录。当我将硬盘上的文件下载为 .tar 文件或解压缩文件然后将其压缩为 .tgz 文件时，我收到以下错误消息：

```
Error: file ‘/Users/XXXXXX/Downloads/NMF.tgz’ is not an OS X binary package. 
```

关于如何在 R 上安装这个包的任何提示，和/或（重新）编译它的方法是什么，所以它会在 OS X 10.8 上被 R 识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:18:41.823

我也遇到了这个问题，并在以下位置找到了解决方法： [http ://www.highstat.com/Installing%20Library%20Packages%20that%20are%20not%20on%20the%20CRAN%20Website.pdf](http://www.highstat.com/Installing%20Library%20Packages%20that%20are%20not%20on%20the%20CRAN%20Website.pdf)

本质上，您可以解压缩 .tgz 文件，然后（在 Mac 上）将生成的目录放在以下位置：/Library/Frameworks/R.framework/Resources/library

然后使用标准 library() 命令将包加载到 R 中。

正如引用的 PDF 指出的那样，如果包包含源代码，则此方法可能不起作用，但值得您尝试，除非您确定它确实包含源代码。

# iphone - popToRootController 不工作

> ID：12937800
> 
> 赞同：0
> 
> 时间：2012-10-17T15:26:24.200
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我创建了以下故事板：

> *   导航控制器
>     *   登录视图控制器
>         *   选项卡控制器
>         *   导航控制器
>             *   搜索视图控制器
>                 *   结果视图控制器
>                     *   细节视图控制器
>         *   导航控制器
>             *   高级搜索视图控制器
>                 *   结果视图控制器
>                     *   细节视图控制器

当用户点击标签栏按钮时，我想确保他们看到的视图是搜索（如果他们点击了搜索）或高级搜索（如果他们点击了高级），而不是他们之前可能在堆栈中的点给定的标签。换句话说，我想让它们从顶部/根视图开始

我已将选项卡栏的委托设置为一个类并将 didSelectViewController 实现为：

标签栏控制器.h

```
#import <UIKit /UIKit.h>
@interface TabController : UITabBarController <UITabBarControllerDelegate>
@end 
```

标签栏控制器.m

```
- (void) viewDidLoad
{
    [super viewDidLoad];
    self.delegate = self;
}

- (void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    [viewController.navigationController popToRootViewControllerAnimated:YES];
} 
```

在搜索和高级搜索控制器 .m

```
- (void) viewWillAppear
{
    [super viewWillAppear:animated];

    //Hide the nav bar at the search/advanced controller level.  Will be shown at results and detail levels
    [[self navigationController] setNavigationBarHidden:YES animated:YES];

    //Set the text for the back button
    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle: @"title" style: UIBarButtonItemStyleBordered target: nil action: nil];

    [self.navigationItem setBackBarButtonItem: backButton];
} 
```

结果是当用户点击“高级搜索”按钮时，除了黑屏之外什么都没有出现。注释掉该代码并正确显示高级搜索。

请注意，搜索和高级搜索都重复使用了结果和详细信息控制器。

有任何想法吗？谢谢你的帮助。如果我一直用头撞墙，我就不用买万圣节服装了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:55:56.990

我有同样的问题。我已经使用了这段代码并且它有效。`[(UINavigationController *)viewController popToRootViewControllerAnimated:NO];`

# orm - 使用 ColdFusion ORM 时如何获取连接表属性？

> ID：12937801
> 
> 赞同：0
> 
> 时间：2012-10-17T15:26:23.940
> 
> 标签：orm, coldfusion, coldfusion-10

我有两个对象，Person 和 Family。我使用一个名为“join_person_family”的连接表来跟踪这种多对多关系。连接表有另一个名为“IS_PRIMARY”的属性，我想在使用 EntityLoadByExample() 实例化人员对象时获取并过滤它，但我不知道如何使用 CF ORM 执行此操作。我可以通过 SQL 轻松做到这一点，但我正在尝试尽可能多地使用 ORM。可能还有另一种方法可以跟踪此属性，但我想不出任何东西。提前感谢您的帮助。

这是 Family.cfc：

```
<cfcomponent hint="I am a Family" output="false" persistent="true" extends="_Proxy">
<cfproperty name="FAMILY_ID" hint="FAMILY_ID" type="numeric" ormtype="int" length="11" fieldtype="id" generator="identity" required="true"/>
<cfproperty name="PERSON" hint="PERSON" fieldtype="many-to-many" cfc="person" linktable="join_family_person" FKColumn="FAMILY_ID" inversejoincolumn="PERSON_ID" lazy="true"/>
<cfproperty name="STATUS" type="string" ormtype="string" length="45"/>
<cfproperty name="COMMENT" hint="COMMENT" type="string" length="255"/>
<cffunction name="init" hint="constructor" access="public" returntype="family" output="false">
    <cfscript>
return this;
</cfscript>
</cffunction>
</cfcomponent> 
```

这是 Person.cfc：

```
<cfcomponent hint="I am a Person" output="false" persistent="true" extends="_Proxy">
<cfproperty name="FAMILY" hint="FAMILY" fieldtype="many-to-many" cfc="family" linktable="join_family_person" FKColumn="PERSON_ID" inversejoincolumn="FAMILY_ID" lazy="true"/>
<cfproperty name="PERSON_ID" hint="PERSON_ID" type="numeric" ormtype="int" length="11" fieldtype="id" generator="identity" required="true"/>
<cfproperty name="USER" hint="USER" fieldtype="one-to-one" cfc="mend_user" FKColumn="USER_ID" lazy="true"/>
<cfproperty name="FIRST_NAME" hint="FIRST_NAME" type="string" length="45"/>
<cfproperty name="LAST_NAME" hint="LAST_NAME" type="string" length="45"/>
<cfproperty name="STATUS" hint="STATUS" type="numeric" ormtype="int"/>
<cffunction name="init" hint="constructor" access="public" returntype="person" output="false">
    <cfscript>
    return this;
    </cfscript>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:49:44.157

找到了这个回复，[https://groups.google.com/forum/?hl=en&fromgroups=#](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/cf-orm-dev/6Fox77MAcbs) !topic/cf-orm-dev/6Fox77MAcbs 。读完之后，我认为无论如何这种方法实际上是优越的。

与加入对象具有多对一关系的中间实体将允许我使用 EntityLoadByExample() 来获取由“IS_PRIMARY”过滤的相关人员对象。然后，如果需要，我可以过滤人员对象。

# javascript - WebView 中的画布 drawImage 无法使用重用的图像

> ID：12937811
> 
> 赞同：4
> 
> 时间：2012-10-17T15:27:00.243
> 
> 标签：javascript, html, canvas, android-webview

每次点击后，我都会尝试在 Android 手机上显示照片并将其旋转 90 度。它适用于较小的图像，但对于单击一段时间（例如大约 10 次）后 8 兆像素的照片，ctx.drawImage 停止绘制任何内容。它看起来像 Android WebView 中的一些内存泄漏，因为我手机上的 Chrome 可以很好地显示大图像。

```
WebView webview = (WebView) rootView.findViewById(R.id.webView1);
WebSettings settings = webview.getSettings();
settings.setJavaScriptEnabled(true);
webview.loadUrl("file:///android_asset/ROTATING_image.html"); 
```

html代码是这样的：

```
<!DOCTYPE html>
<html>
<body>
    <canvas id="canvas"/>
</body>
<script type="text/javascript">
    (function(undefined) {
        var $ = function(id) {
            return document.getElementById(id);
        };
        var draw = function(degree) {
            var ctx = $('canvas').getContext('2d');

            var cw = img.width, ch = img.height, cx = 0, cy = 0;
            switch (degree) {
            case 90:
                cw = img.height;
                ch = img.width;
                cy = img.height * (-1);
                break;
            case 180:
                cx = img.width * (-1);
                cy = img.height * (-1);
                break;
            case 270:
                cw = img.height;
                ch = img.width;
                cx = img.width * (-1);
                break;
            }

            $('canvas').height = ch;
            $('canvas').width = cw;
            degree && ctx.rotate(degree * Math.PI / 180);
            ctx.drawImage(img,cx,cy);
        };
        var img = new Image;
            //Works fine with such small image, but not with the 8 megapixel one
        img.src = 'https://lh3.googleusercontent.com/-wNKEHHjRDlc/T665lI3U5RI/AAAAAAAAX_4/95A2vEhdx_c/s720/IMG_1592.JPG';
        img.onload = function() {
            draw()
        };
        var curDegree = 0;
        $('canvas').onclick = function(e) {
            curDegree=curDegree+90;
            if(curDegree==360)
                {curDegree=0;}
            draw(curDegree);
        };
    })();
</script>
</html> 
```

# c++ - 如何为 QTreeWidgetItem 的每个 *type* 创建不同的弹出（上下文）菜单

> ID：12937812
> 
> 赞同：2
> 
> 时间：2012-10-17T15:27:07.013
> 
> 标签：c++, qt

我能够为我的 QTreeWidget 创建一个上下文菜单，如下所示

```
QMenu* pContextMenu = new QMenu(this)
QTreeWidget* pTreeWidget = new QTreeWidget();
QAction* pOpenFile = new QAction(tr("Open A File"), pContextMenu);
pTreeWidget->setContextMenuPolicy(Qt::ActionsContextMenu);
pTreeWidget->addAction(pOpenFile); 
```

但我想要一个与叶子不同的分支弹出窗口。如何根据单击的小部件项的类型分配不同的弹出窗口？

我的树：

*   分支 1 <-- 弹出窗口 1
    *   叶1
    *   Leaf2 <-- Popup2
*   分支2
    *   分支3
        *   叶1

QWidget::actions() 未列为虚拟。否则我会从 QTreeWidget 派生我自己的类并重新实现 actions()。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:21:47.997

### 方法一：覆盖 QTreeWidget

正如您所发现的，分配给`QTreeWidget`自身的上下文菜单不会让您为不同的项目提供不同的上下文菜单。

由于 Qt 项目视图没有用于上下文菜单的特殊 API，因此您必须自己实现这一点。幸运的是，这不是很困难。你只需要：

1.  创建 的子类`QTreeWidget`。
2.  将信号连接`customContextMenuRequested(const QPoint&)`到自定义插槽。
3.  显示所需的上下文菜单。

我已经发布了一个[完整的工作示例](https://gist.github.com/3906292)。一些需要注意的细节包括：

*   `QTreeWidgetItem`提供了一个方便的`type`属性，让您无需强制转换、字符串解析或其他笨拙/脆弱的方法即可轻松识别项目。

*   自定义`QTreeWidgetItem`类型值应大于或等于`QTreeWidgetItem::UserType`。

*   显示上下文菜单时，您必须将全局位置传递给`exec()`. 要从插槽中小部件空间中的位置正确映射，您必须使用项目的视口小部件。

* * *

### 方法2：覆盖QItemDelegate（和QTreeWidget ...）

另一种方法是实现您自己的`QAbstractItemDelegate`子类，并将其分配给您的树小部件。在您的项目委托中，您可以覆盖`editorEvent()`以相同的方式处理鼠标按下。

虽然这种方法 frres 实际上更符合 Qt 的项目视图 API 设计，但这种方法有几个关键缺点：

*   项目委托使用`QModelIndex`对象来表示项目。要转换为 a `QTreeWidgetItem`，您必须使用该`QTreeWidget::itemFromIndex()`方法。不幸的是，这是*受保护*的，因此它实际上需要您进行子类`QTreeWidget`化才能为您的委托提供此 API。这为您的代码增加了一些样板复杂性。

*   在`editorEvent()`项目视图处理事件之前调用钩子。这意味着您不能轻松地显示上下文菜单并同时允许默认行为（例如选择右键单击的项目）。

*   由于`editorEvent()`处理程序会看到各种不同的事件，因此您必须更加小心地正确处理它们。如果您的行为很复杂，您还必须小心不要让这个单一的处理程序失控。

核心代码非常相似，但同样有更多样板。我也发布[了这种方法的示例](https://gist.github.com/3906464)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:51:35.150

我稍微修改了 jmk 的代码，以展示如何做到这一点

setContextMenuPolicy(Qt::CustomContextMenu) 和 customContextMenuRequested(const QPoint&) 信号。

mytreewidget.h

```
#include <QTreeWidget>

static const int ItemType1 = QTreeWidgetItem::UserType + 1;
static const int ItemType2 = QTreeWidgetItem::UserType + 2;

class MyTreeWidget : public QTreeWidget
{
    Q_OBJECT
public:
    MyTreeWidget(QWidget *parent = 0);

private slots:
    void showContextMenu(const QPoint &pos);
}; 
```

mytreewidget.cpp：

```
#include "mytreewidget.h"

#include <QMenu>
#include <QTreeWidgetItem>

MyTreeWidget::MyTreeWidget(QWidget *parent)
  : QTreeWidget(parent)
{
    setContextMenuPolicy(Qt::CustomContextMenu);
    connect(this, SIGNAL(customContextMenuRequested(const QPoint&)),
            SLOT(showContextMenu(const QPoint&)));
}

void MyTreeWidget::showContextMenu(const QPoint &pos)
{
  QMenu menu;

  QTreeWidgetItem* item = itemAt(pos);
  switch (item->type()) {
  case ItemType1:
    menu.addAction("This is a type 1");
    break;

  case ItemType2:
    menu.addAction("This is a type 2");
    break;
  }

  menu.exec(mapToGlobal(pos));
} 
```

主.cpp：

```
#include <QApplication>

#include "mytreewidget.h"

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    MyTreeWidget w;

    // Add test items.
    w.addTopLevelItem(new QTreeWidgetItem(QStringList("A (type 1)"),
                                          ItemType1));
    w.addTopLevelItem(new QTreeWidgetItem(QStringList("B (type 1)"),
                                          ItemType1));

    w.addTopLevelItem(new QTreeWidgetItem(QStringList("C (type 2)"),
                                      ItemType2));
    w.addTopLevelItem(new QTreeWidgetItem(QStringList("D (type 2)"),
                                          ItemType2));
    w.show();

    return app.exec();
} 
```

# excel - 将二维数组写入 PowerShell 中 Excel 范围对象的 Value2 属性

> ID：12937814
> 
> 赞同：1
> 
> 时间：2012-10-17T15:27:23.900
> 
> 标签：excel, powershell, powershell-2.0

我是 PowerShell 新手，似乎无法弄清楚为什么下面代码中的第一种方法不起作用，而第二种方法（已注释掉）起作用。

我正在尝试将数据库记录集的结果写入 Excel 文件，因此我需要一个可动态扩展的数组。我知道如何使用第一种类型的数组来做到这一点，但不知道如何使用第二种类型。

如果出现以下情况，我的问题将得到解决：

*   你知道如何动态扩展第二种类型的数组
    编辑：正如这里提到的[http://powershell.com/cs/blogs/tips/archive/2008/12/05/multidimensional-arrays.aspx](http://powershell.com/cs/blogs/tips/archive/2008/12/05/multidimensional-arrays.aspx)这是不可能的。
*   知道如何将第一种类型的数组写入范围
*   编辑：或者，您知道将第一种类型的数组转换为第二种类型的有效方法。

编码：

```
#need this to work around bug if you have a non us-locale and English excel: http://support.microsoft.com/default.aspx?scid=kb;en-us;320369
[System.Threading.Thread]::CurrentThread.CurrentCulture = "en-US" 

# This doesn't work
$values = @(('test1','test2'),('test3','test4'))

# This works
<#
$values = New-Object 'object[,]' 2,2
$values[0,0] = 'test1'
$values[0,1] = 'test2'
$values[1,0] = 'test3'
$values[1,1] = 'test4'
#>

$excel = New-Object -ComObject Excel.Application
$excel.Visible = $False
$xls_workbook = $excel.Workbooks.Add()
$range = $xls_workbook.sheets.item(1).Range("A1:B2")
$range.Value2 = $values

$xls_workbook.SaveAs($MyInvocation.MyCommand.Definition.Replace($MyInvocation.MyCommand.Name, "") + "test.xlsx")
$excel.Quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:08:44.373

当我得到两个变量的类型时：

```
$values1.GetType() 
$values2.GetType() 
```

这就是我得到的：

```
IsPublic IsSerial Name                                     BaseType                                                                                                               
-------- -------- ----                                     --------                                                                                                               
True     True     Object[]                                 System.Array                                                                                                           
True     True     Object[,]                                System.Array 
```

所以 $values1 是一维的，$values2 是二维的。这里有一个相关的问题：

[Powershell 多维数组](https://stackoverflow.com/questions/9397137/powershell-multidimensional-arrays)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-10T13:35:45.620

`**Object[]**`是锯齿状数组或数组数组

`**Object[,]**`是二维数组。

[“简而言之”的](https://stackoverflow.com/questions/4648914/why-we-have-both-jagged-array-and-multidimensional-array)差异

以及[如何转换锯齿状>二维数组](https://stackoverflow.com/questions/26291609/converting-jagged-array-to-2d-array-c-sharp)

# html - Schema.org 将多个开始日期链接到一个事件

> ID：12937815
> 
> 赞同：2
> 
> 时间：2012-10-17T15:27:32.330
> 
> 标签：html, microdata, schema.org

我是丰富网页摘要和 schema.org 标记的新手。我想在一个站点上实现它，但布局很奇怪：

1.  开始日期;
2.  地点;
3.  3 类价格；
4.  多个开始日期；
5.  活动名称；
6.  描述。

这个事实是否会成为包含标记的障碍？

此外，我试图找出如何为一个具有多个 startDates 的同一事件创建 schema.org 定义的示例，但似乎没有这方面的规范。你知道我该怎么做吗？我测试了一些东西，但不知道它是否正确......

这是我实现架构的方式：

```
<div itemscope itemtype="http://schema.org/Event">
<div class="context">
<h5><time itemprop="startDate" datetime="2013-03-01">01.03.2013 Fri</time></h5>

  <form method="post" action="some action">
    <label>Location</label>
    <p itemprop="location">Gran Teatre del Liceu</p><br />
    <div itemprop="offers" itemscope itemtype="http://www.schema.org/Offer">
      <label itemprop="name">Ticket Categories</label>
      <p><span itemprop="price">I, &euro; 98</span><br />
      <span itemprop="price">II, &euro; 87</span><br />
      <span itemprop="price">III, &euro; 68</span><br />
      </p>
    </div>

    <ul>
      <li class="on"><a title="Order tickets" href="#"><time itemprop="startDate" datetime="2013-03-01">01.03.2013 Fri</time></a></li>
      <li><a title="Order tickets" href="#"><time itemprop="startDate" datetime="2013-03-02">02.03.2013 Sat</time></a></li>
      <li><a title="Order tickets" href="#"><time itemprop="startDate" datetime="2013-03-04">04.03.2013 Mon</time></a></li>
      <li><a title="Order tickets" href="#"><time itemprop="startDate" datetime="2013-03-05">05.03.2013 Tue</time></a></li>
    </ul><br />

    <input type="submit" value="Order tickets" class="btn" />
   </form>
</div>

   <div class="ttl">
    <h2 title="Street Scene, Opera by Kurt Weill" itemprop="name">Street Scene, Opera by Kurt Weill</h2>
   </div>
   <div class="text">
    <p itemprop="description">Midway between opera and musical</p>
   </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:31:42.907

最好为每个 startDate 单独定义它而不是嵌套在同一个块中

一个。查询数据变得更加容易（如果一个事件在议程中定义了多个主题，这将很有帮助）。递归事件也是如此。

湾。不可能为所有可能的异常提供构造，例如“这个聚会每周六发生”。

C。对不正常的情况进行建模是非常困难或不可能的，例如，如果一场音乐会迟到 20 分钟或被取消，或者如果更换了演讲者。

# asp.net-mvc - 无法使用代码优先实体模型中的初始数据初始化 dbcontext

> ID：12937816
> 
> 赞同：1
> 
> 时间：2012-10-17T15:27:33.923
> 
> 标签：asp.net-mvc, entity-framework

我正在研究 asp.net mvc。我正在尝试实现代码优先实体模型。我已按照以下步骤操作，

1、我创建了一个类student.cs

```
public class Student
{
    public int StudentID { get; set; }
    public string StudentName { get; set; }
    public string Branch { get; set; }
    public decimal Marks { get; set; }
    public string Address { get; set; }
} 
```

2，我已经创建了上下文类，例如，

```
 public class StudentContext:DbContext
    {
        public StudentContext()
        {
            Database.SetInitializer(new StudentContextInitializer());
        }

        public DbSet<Student> Student { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    } 
```

3，我创建了 studentcontextinitializer 类，例如，

```
public class StudentContextInitializer : DropCreateDatabaseIfModelChanges<StudentContext>
    {
        protected override void Seed(StudentContext context)
        {
            context.Student.Add(new Student { StudentName="madhav",Branch="CSE",Marks=888,Address="AKP" });
            context.Student.Add(new Student { StudentName = "Tirumalesh", Branch = "IT", Marks = 988, Address = "MDP" });
            context.Student.Add(new Student { StudentName = "Venkat", Branch = "ECE", Marks = 1000, Address = "BZA" });
            context.SaveChanges();
        }
    } 
```

我已成功连接到数据库，但我无法用一些数据初始化 dbcontext，这意味着我在 studentcontextinitializer 类中硬编码了一些记录，但我无法将这些记录绑定到数据库表中。所以请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:31:53.567

您`DropCreateDatabaseIfModelChanges`只会在更改模型时初始化数据库。你有几个选择：

1.  手动删除数据库并重新运行。
2.  更改模型属性。例如，添加`public string test { get; set; }`到您的`Student`实体并重新运行。
3.  从`DropCreateDatabaseAlwaysInitializer`. 这将导致每次重建和重新运行应用程序时删除、重新创建和播种数据库。

# jquery - 使用正则表达式和 jQuery 选择阿拉伯文本中的模式

> ID：12937818
> 
> 赞同：3
> 
> 时间：2012-10-17T15:27:40.903
> 
> 标签：jquery, regex, replace, match, arabic

这可能是一个棘手的问题。使用正则表达式，我想在括号之间选择阿拉伯数字（可以是 1、2 或 3 个阿拉伯数字）以及括号本身：http: [//jsfiddle.net/QL4Kr/](http://jsfiddle.net/QL4Kr/)。

```
<span>
    كهيعص ﴿١﴾
</span>
<span>
    وَإِلَيْهِ تُرْ‌جَعُونَ ﴿٢٤٥﴾
</span>​ 
```

```
jQuery(function () {    
    var oldHtml = jQuery('span').html();
    var newHtml = oldHtml.replace("","");
    jQuery('span').html(newHtml); });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:48:56.760

这是我想出的：

```
jQuery(function() {

    /* Arabic digits representation in Unicode
       See: http://stackoverflow.com/a/1676590/114029 */
    var myregex = /[\u0660-\u0669]+/;

    $('span').each(function(index) {

        var text = $(this).text();

        var matches = text.match(myregex);

        alert(index + ': ' + $(this).text());

        alert(matches);

    });

}); 
```

这是使用它的 jsFiddle：http: [//jsfiddle.net/leniel/YyAXP/](http://jsfiddle.net/leniel/YyAXP/)

* * *

这是修改后的版本，仅保留 each 中的数字`<span>`：

```
jQuery(function() {

    var myregex = /[\u0660-\u0669]+/;

    $('span').each(function(index) {

        var text = $(this).text();

        $(this).text('');

        var matches = text.match(myregex);

        $(this).text(matches); 

    });

}); 
```

jsFiddle：http: [//jsfiddle.net/leniel/YyAXP/1/](http://jsfiddle.net/leniel/YyAXP/1/)

* * *

为了纠正误解，这里有一个完全符合您要求的新版本：

```
jQuery(function() {

    var myregex = /[﴾\u0660-\u0669﴿]+/;

    $('span').each(function(index) {

        var text = $(this).text();

        $(this).text('');

        var matches = text.match(myregex);

        var content = text.replace(myregex, '');

        //alert(content);
        //alert(index + ': ' + $(this).text());
        //alert(matches);

        var newSpan = document.createElement('span');

        $(newSpan).text(matches);

        $(this).text(content);

        $(newSpan).prependTo($(this));
    });
}); 
```

对应的jsFiddle在这里：http: [//jsfiddle.net/leniel/YyAXP/2/](http://jsfiddle.net/leniel/YyAXP/2/)

* * *

我希望这是您最后的要求更改！:-)

```
var myregex = /([\u0660-\u0669]+)/g;

var parenthesis = /[﴾﴿]+/g;

var text = $("#sentences");

//alert(content);
//var matches = $(text).text().match(myregex);
//alert(text.html());

text.html(function(i, oldHTML) {

    return oldHTML.replace(parenthesis, '').replace(myregex, '<span>$1</span>');
}); 
```

这是 jsFiddle：http: [//jsfiddle.net/leniel/G4SkV/4/](http://jsfiddle.net/leniel/G4SkV/4/)

# wpf - 如何在 WPF 中使用 Ink 识别？

> ID：12937820
> 
> 赞同：1
> 
> 时间：2012-10-17T15:27:44.330
> 
> 标签：wpf

我正在使用.Net 4.0 WPF。我想使用 InkCanvas 来收集用户输入，然后识别输入了什么字符。谷歌搜索后，我在[http://msdn.microsoft.com/zh-cn/library/ms754080.aspx](http://msdn.microsoft.com/zh-cn/library/ms754080.aspx)找到了解决方案， 不幸的是，它适用于 .net 3.5。.net 4.0 有解决方案吗？谢谢。

====================

[从http://www.microsoft.com/en-us/download/details.aspx?id=20989](http://www.microsoft.com/en-us/download/details.aspx?id=20989)下载 TablePC SDK， 然后获得 Micorsoft.Ink.dll。下面是示例代码...

```
 using Microsoft.Ink;
    using System.IO;
    private void btnGetInput_Click(object sender, RoutedEventArgs e)
    {
        if (inkInput.Strokes.Count > 0)
        {
            System.Windows.Ink.StrokeCollection strokeList = inkInput.Strokes;

            MemoryStream ms = new MemoryStream();
            inkInput.Strokes.Save(ms);
            InkCollector myInkCollector = new InkCollector();
            Ink ink = new Ink();
            ink.Load(ms.ToArray());

            using (RecognizerContext myRecoContext = new RecognizerContext())
            {
                RecognitionStatus status;
                RecognitionResult recoResult;
                myRecoContext.Strokes = ink.Strokes;
                recoResult = myRecoContext.Recognize(out status);
                tbUserName.Text += recoResult.TopString;
            }
            inkInput.Strokes.Clear();
        }
    } 
```

# numpy - 以高值为中心的对数正态随机数

> ID：12937824
> 
> 赞同：4
> 
> 时间：2012-10-17T15:27:56.157
> 
> 标签：numpy, random, scipy

我正在尝试使用 numpy/scipy 从对数正态分布中创建随机数。

平均值为 2000，sigma 为 800。

如果我使用 numpy.random.lognormal(mean=2000, sigma=800, size=10000) 创建我的随机值，我得到的只是非常高或 inf 的数字。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:42:05.953

注意：`mean`和`sigma`参数对应于分布的对数`lognormal`分布；分布的实际算术平均值是，当和时`exp(mean + sigma**2/2)`，它的计算结果`inf`是标准双精度浮点数。`mean=2000``sigma=800`

有关更多信息，请参阅 [http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.lognormal.html#numpy.random.lognormal](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.lognormal.html#numpy.random.lognormal) 和 [http://en.wikipedia.org/wiki/Log-normal_distribution](http://en.wikipedia.org/wiki/Log-normal_distribution)细节。

# sql - 数据库工程：可扩展配置文件表等场景的许多行或额外备份列

> ID：12937829
> 
> 赞同：0
> 
> 时间：2012-10-17T15:28:11.477
> 
> 标签：sql, database, database-design, entity-attribute-value

我决定创建一个包含多达 20,000 多个学生资料的数据库，每个学生资料都有 120 多个属性，

在 DOTNETNUKE CMS 等许多企业项目中，使用的方法是两张表，一张是 UserProfile ：

```
[ProfileID],[UserID],[PropertyDefinitionID],[PropertyValue] 
```

另一个是： ProfilePropertyDefinition

```
[PropertyDefinitionID],[DataType] ,[PropertyCategory],[PropertyName] 
```

如果我使用这种方法，我将有 20,000 x 120 = 240 万行！

我知道这是正确的方法，拥有一个规范化的数据库，而且我知道，创建数据库服务器是为了处理数百万条记录，但我想知道，为什么我们不创建一个包含 120 列 + 足够备份列的配置文件表为了可扩展性？如果性能很重要，是不是弊大于利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:44:06.533

> 为什么我们不创建一个包含 100 列 + 足够的备份列以实现可扩展性的配置文件表？

您的其他设计更具可扩展性。您不限于 120 行。

就性能而言，您必须测试两种不同的数据库设计，但您所讨论的 ProfilePropertyDefinition 表可能包含 240 万个 100 字节行，而不是 2 万个 50 千字节行。

除非您一直在阅读所有行，否则较短的行通常表现更好。

# java - 如何为hibernate / mysql设置全局查询超时？

> ID：12937830
> 
> 赞同：0
> 
> 时间：2012-10-17T15:28:10.830
> 
> 标签：java, mysql, hibernate

> **可能重复：**
> [休眠：设置默认查询超时？](https://stackoverflow.com/questions/2101455/hibernate-set-default-query-timeout)

看来我可以为每个查询设置休眠查询的超时，但不能在全局基础上。查看我的数据源配置和 JDBC 驱动程序属性，似乎我可以设置连接超时，但不能设置查询时间超时（我假设这些是不同的，因为如果查询需要很长时间，套接字还没有超时？ ) 我发现的最佳解决方案是在 MySql 服务器上创建一个存储过程，它会终止所有长时间运行的查询，但我想看看应用程序级别是否有什么东西？

# c++ - 是否有任何内置类来处理 C++ 中的大整数值？

> ID：12937836
> 
> 赞同：2
> 
> 时间：2012-10-17T15:28:41.377
> 
> 标签：c++, biginteger

我现在正在解决一些关于 UVA 在线法官的问题，并且我遇到了我必须存储非常大的整数值（有时 15 位或更多）的情况。有什么办法可以在不使用第三方库的情况下做到这一点？[类似于`BigInteger`java中的类吗？]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:33:59.467

对于带整数的 pow，[http ://en.wikipedia.org/wiki/Exponentiation_by_squaring](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)

我建议[GMP](http://gmplib.org/)

请参考此链接：- [C++ 处理非常大的整数](https://stackoverflow.com/questions/124332/c-handling-very-large-integers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:30:55.283

不，标准库中没有这样的结构。但是您总是可以查看 GMP、MPFR 或类似的。只需在 Google 中搜索即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:31:37.357

您可以使用 GNU 的[libgmp](http://gmplib.org/ "libgmp")在 C 中进行任意精度算术。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:30:40.540

需要第三方库（除非您想编写自己的库）。GMP 或 MPIR 是可以选择的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-23T17:57:47.810

最容易使用的是 Boost Multiprecision

[http://www.boost.org/doc/libs/1_55_0/libs/multiprecision/doc/html/index.html](http://www.boost.org/doc/libs/1_55_0/libs/multiprecision/doc/html/index.html)

这是一个简单的例子

```
#include <boost/multiprecision/cpp_int.hpp>

using namespace boost::multiprecision;

int main(){

     cpp_int          a_really_big_number("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000");
     a_really_big_number += 7;

} 
```

# forms - Play framework 2.0 scala 表单错误处理

> ID：12937837
> 
> 赞同：3
> 
> 时间：2012-10-17T15:28:47.447
> 
> 标签：forms, scala, playframework-2.0

我的表单有问题，问题是我无法正确显示错误（我认为是这样）。验证工作正常。

当旧密码不正确时，输入框下方会显示错误消息，另一方面，当密码不匹配时，错误不会出现在任何地方。

如果我进行一些调试，我会得到数据：

从观点来看： `@pass_form("password").errors`

我明白了：

```
FormError(password,Passwords dont match,WrappedArray()) 
```

所以我的问题是如何在视图中修复表单或代码，以正确打印该错误。

```
Form(
    mapping(
        "old_password" -> text.verifying(Messages("forms.password.old.mismatch"),
        password => User.correct_?(user.id, password)),
       "password" -> tuple(
       "new" -> text(minLength = conf.getInt("password.length.min").get),
       "confirm" -> text).verifying(Messages("forms.password.new.mismatch"), 
          passwords => passwords._1 == passwords._2)
      )
    ((_, password) => password._1)((_) => Some(("", ("", ""))))
         ) 
```

鉴于我有：

```
@helper.form(action = routes.UserController.submitPassword) {

        @helper.input(pass_form("old_password")) { (id, name, value, args) =>
            <input type="password" name="@name" id="@id" @toHtmlArgs(args)>  
        }

        @helper.input(pass_form("password.new")) { (id, name, value, args) =>
            <input type="password" name="@name" id="@id" @toHtmlArgs(args)>  
        }

        @helper.input(pass_form("password.confirm")) { (id, name, value, args) =>
            <input type="password" name="@name" id="@id" @toHtmlArgs(args)>  
        }

        <input type="submit" value="Set">
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:12:57.270

首先，您可能希望对密码字段使用辅助方法，因为它们有一个。看看`views.html.helper.inputPassword`并像这样使用它：

```
@helper.inputPassword(field = pass_form("old_password")) 
```

*不显示密码不匹配*错误的原因是，它是绑定到表单本身而不是特定字段的错误。您必须为此检查`errors`表单的字段，这将为您提供`Seq[FormError]`. 然后，您可以以适当的方式显示这些...

此致

# c# - 从流中读取的字符串未添加到数据库中

> ID：12937840
> 
> 赞同：1
> 
> 时间：2012-10-17T15:28:58.350
> 
> 标签：c#, fluent-nhibernate

我正在使用 NHibernate，它工作得很好，除了当我尝试使用这种方式添加字符串时向数据库添加字符串

```
string charname = "Dan";
var account = new Account
{
    Username = charname
};
AccountRepository.Add(account); 
```

它有效，但是当我尝试添加从流中读取的字符串时

```
string charname = reader.ReadString(false, length + 1);
 var account = new Account
 {
     Username = charname
 };
 AccountRepository.Add(account); 
```

它没有给桌子增加任何东西。谁能解释为什么会这样？

（即使在打印值 charname 时打印正确）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:12:47.657

可能是附加到您要添加的值的字符，表明数据库不接受仔细检查您使用调试模式添加的值，以检查在添加到数据库之前的实际值是什么。

# java - 在 Java 中调用 Oracle Sproc 时出现问题（使用 Spring 3.0）

> ID：12937843
> 
> 赞同：1
> 
> 时间：2012-10-17T15:29:09.000
> 
> 标签：java, oracle, spring, stored-procedures

在使用 Spring 3.0 进行 Java 开发时，我在执行为 Oracle 编写的 Sproc 时遇到问题。

## 这是 Sproc 代码：

```
create or replace PROCEDURE            
ADD_PRODUCT
( product_id IN VARCHAR2
, description IN VARCHAR2
, weight IN FLOAT
, specification IN VARCHAR2
, category IN VARCHAR2
, manufacturer IN VARCHAR2
, syncount IN NUMBER
, nonAccentedURL IN VARCHAR2
, nonAccentedManufacturer IN VARCHAR2
) AS
    recCount number;
BEGIN
      recCount := 0;

      SELECT    COUNT(*) 
      INTO  recCount
      FROM  ERP_MANUFACTURER
      WHERE NAME = manufacturer;  

  IF recCount < 1 THEN
    INSERT INTO ERP_MANUFACTURER (NAME, URL) VALUES (manufacturer,     nonAccentedManufacturer);
  END IF;

  INSERT INTO ERP_PRODUCT (ID, DESCRIPTION, WEIGHT, SPECIFICATION, CATEGORY, MANUFACTURER, SYNCCOUNT, URL) 
  VALUES     (product_id,description,weight,specification,category,manufacturer,syncount,nonAccentedURL); 
```

## 结束添加_产品；

## 这是代码（在 DAO 中）：

```
public int ADD_Product(String codigo_produto, String descricao, float peso, String espeficiacao, String categoria, String fabricante, int sysCount, int SENT_STATUS) throws Exception {

    SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplate).withFunctionName("ADD_PRODUCT");

    MapSqlParameterSource paramMap = new MapSqlParameterSource();

    paramMap.addValue("product_id", codigo_produto, Types.VARCHAR);
    paramMap.addValue("description", descricao, Types.VARCHAR);
    paramMap.addValue("weight", peso, Types.FLOAT);
    paramMap.addValue("specification",espeficiacao, Types.VARCHAR);
    paramMap.addValue("category", categoria, Types.VARCHAR);
    paramMap.addValue("manufacturer", fabricante, Types.VARCHAR);
    paramMap.addValue("syncount", sysCount, Types.NUMERIC);
    paramMap.addValue("nonAccentedURL", URLEncoder.encode(deAccent(espeficiacao).toLowerCase(), "UTF-8"), Types.VARCHAR);
    paramMap.addValue("nonAccentedManufacturer", URLEncoder.encode(deAccent(fabricante).toLowerCase(), "UTF-8"), Types.VARCHAR);

    Map<String, Object> i = caller.execute(paramMap);

    return i.size();
} 
```

* * *

执行此方法时，错误日志如下：

* * *

```
org.springframework.jdbc.BadSqlGrammarException: CallableStatementCallback; bad SQL grammar [{? = call ADD_LOG(?, ?, ?, ?)}]; nested exception is java.sql.SQLException: ORA-06550: line 1, column 13: 
```

PLS-00306：调用“ADD_LOG”时参数的数量或类型错误 ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

```
at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:98)
at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:969)
at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1003)
at org.springframework.jdbc.core.simple.AbstractJdbcCall.executeCallInternal(AbstractJdbcCall.java:391)
at org.springframework.jdbc.core.simple.AbstractJdbcCall.doExecute(AbstractJdbcCall.java:354)
at org.springframework.jdbc.core.simple.SimpleJdbcCall.execute(SimpleJdbcCall.java:181)
at br.edeploy.voive.dao.ProductDAO.ADD_Log(ProductDAO.java:139)
at br.edeploy.voice.service.ProdutosIn.doGet(ProdutosIn.java:277)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at br.com.caelum.vraptor.resource.DefaultResourceNotFoundHandler.couldntFind(DefaultResourceNotFoundHandler.java:41)
at br.com.caelum.vraptor.interceptor.ResourceLookupInterceptor.intercept(ResourceLookupInterceptor.java:71)
at br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:54)
at br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54)
at br.com.caelum.vraptor.core.EnhancedRequestExecution.execute(EnhancedRequestExecution.java:23)
at br.com.caelum.vraptor.VRaptor$1.insideRequest(VRaptor.java:92)
at br.com.caelum.vraptor.ioc.spring.SpringProvider.provideForRequest(SpringProvider.java:56)
at br.com.caelum.vraptor.VRaptor.doFilter(VRaptor.java:89)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

引起：java.sql.SQLException：ORA-06550：第 1 行，第 13 列：PLS-00306：调用“ADD_LOG”时参数的数量或类型错误 ORA-06550：第 1 行，第 7 列：PL/SQL：语句忽略

```
at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:112)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:173)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)
at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1030)
at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:191)
at oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:944)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1222)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3381)
at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3482)
at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:3856)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1373)
at org.springframework.jdbc.core.JdbcTemplate$5.doInCallableStatement(JdbcTemplate.java:1005)
at org.springframework.jdbc.core.JdbcTemplate$5.doInCallableStatement(JdbcTemplate.java:1)
at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:953)
... 34 more 
```

* * *

谁能帮我调试一下。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:34:15.937

您正在使用`Stored Procedure`因此`withProcedureName`代替`withFunctionName`如下：

```
SimpleJdbcCall caller = 
          new SimpleJdbcCall(this.jdbcTemplate).withProcedureName("ADD_PRODUCT"); 
```

`withFunctionName`期望 DB`function`应该具有的返回类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:34:23.263

Oracle 中的对象是一个存储过程。您的`SimpleJdbcCall`对象需要使用`withProcedureName`not`withFunctionName`

```
SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplate).withProcedureName("ADD_PRODUCT"); 
```

在 Oracle 中，函数返回一个值，而过程不返回。语法

```
{? = call ADD_LOG(?, ?, ?, ?)} 
```

要求它`ADD_LOG`是一个返回值的函数。您发布的日志似乎是针对具有不同数量参数的不同存储过程调用（`ADD_LOG`而不是）。`ADD_PRODUCT`

# php - 分层导航 - 按其他类别过滤

> ID：12937845
> 
> 赞同：4
> 
> 时间：2012-10-17T15:29:12.177
> 
> 标签：php, magento, e-commerce, magento-1.7

**使用分层导航，如何让客户根据产品出现的其他类别过滤产品？**

我正在一家服装店工作，该店的产品按以下类别分类：

*   最高额
    *   T 恤
    *   正装衬衫
*   下装
    *   牛仔裤
    *   短裤
*   游泳衣
*   外套
*   配件
    *   腰带
    *   领带

我们想添加特殊系列，例如“冬季系列”或“面试服装”。这些特殊类别属于单独的根类别（并且具有设置为特殊值的属性，因此我们可以区分普通类别和这些特殊类别）。其中的所有产品也将被分配到主要类别。

如果用户正在浏览 Winter Collection，**他们应该能够根据这些主要类别进行过滤**。如果夹克存在于 Winter Collection 和 Outwear 类别中，我们应该将 Outerwear 显示为过滤选项。只应出现相关类别；例如，我们不会在 Winter Collection 中提供泳衣，因此不应出现 Swim Wear 类别。

我们的想法是我们不想为每个系列重复这些主要类别——我们已经知道它是什么类型的服装（基于类别），所以我们的系列应该意识到这一点。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:38:07.340

一个冗长的解决方案是创建一个新属性作为多选，并用所有类别填充它。然后，您必须浏览每一个产品并选择所有适用的“类别”。

这种方法的问题在于，在过滤器中，类别将显示为平面列表，而不是树结构，例如：

![示例类别过滤器](../Images/fae32b4dbc7d0b9da74257931e9367af.png)

我认为情况会比那更糟。我认为过滤器会按字母顺序自动排序？

可能有一个插件可以做你所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:19:17.483

我能够找到一个最有效的解决方案。我在这里发布它以防其他人有类似的问题。

唯一的缺点是：

*   类别不显示在树结构中（但 - 正在处理）
*   单击以删除类别过滤器会像往常一样备份类别树，除了它一直到根，这是不可接受的。我的解决方法是让 X 图标完全删除过滤器，而不是转到父类别。

# 细节

第一步是向名为“special_type”的类别添加一个新属性。此下拉列表允许管理员选择该类别是作为核心类别（根据我的项目符号列表）还是特殊的“集合”。

下一步是覆盖 Mage_Catalog_Model_Layer_Filter_Category::_getItemsData() 中`$categories`填充的功能。如果`$this->getLayer()->getCurrentCategory()->getSpecialType() ==`是默认类型，我调用原始方法（`return parent::_getItemsData()`）。否则...

我传入`$this->getLayer()->getProductCollection()`一个自定义方法，该方法确定它出现在哪些标准类别中。我在查询中使用以下过滤器：

*   排除非标准类别
*   排除当前过滤的类别
*   仅显示可能的最高级别类别

最后两个基本上允许此功能：如果我目前正在过滤 Tops，则仅显示 Tops 的子类别，不显示其他内容。

自定义方法返回与我的条件匹配的类别集合并分配给`$categories`. 该方法的其余部分保持不变。

希望这对处于类似情况的人有所帮助。

# neo4j - Neo4J 安装 - StartService 失败

> ID：12937846
> 
> 赞同：4
> 
> 时间：2012-10-17T15:29:17.393
> 
> 标签：neo4j

我正在尝试安装 Neo4j(1.8)，但在启动服务时遇到了问题。

解压 zip 文件后，我直接进入 bin 文件夹并执行批处理文件：

```
Neo4J.bat install 
```

[SC] CreateService SUCCESS
[SC] StartService Failed 1053：
服务没有及时响应启动或控制请求。

*我对 graphDB 非常热情，所以我去 shell 并创建了数百个节点和关系的新数据库，我花了将近一周的时间在那个 shell 上工作，一切看起来都很好，直到我读到了 WebService 和 REST API 所以现在我需要服务运行。**RTFM 案例！***

挖了一下......我发现我没有**neo4j-server.properties**文件进入conf目录，问题：

1-该文件是否负责服务启动失败？
2-我应该手动构建该文件，什么是强制性参数？
3-这是正常行为还是 zip 文件已损坏？

*PS：我尝试创建props文件，如下：*

```
org.neo4j.server.database.location=D:/Neo4J/db/Mydb/
org.neo4j.server.webserver.port=7474
org.neo4j.server.webserver.address=0.0.0.0
wrapper.java.additional.3=-Djava.net.preferIPv4Stack=true
org.neo4j.server.db.tuning.properties=neo4j.properties 
```

***但服务拒绝启动！***

干杯，
Ob。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T07:12:01.510

在版本 1.8.2 和使用 windows 8 中我遇到了同样的问题：我将安装文件夹移动到

程序文件\neo4j

然后获得完全访问权限

并编辑了 bin\base.bat，上面写着：

```
set wrapperJarFilename=windows-service-wrapper-*.jar 
```

我改为：

```
set wrapperJarFilename=windows-service-wrapper-4.jar 
```

现在它起作用了：

```
C:\Program Files\Neo4j\bin>Neo4j.bat install
[SC] CreateService SUCCESS

SERVICE_NAME: Neo4j-Server
        TYPE               : 10  WIN32_OWN_PROCESS
        STATE              : 2  START_PENDING
                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x7d0
        PID                : 2936
        FLAGS              :

C:\Program Files\Neo4j\bin> 
```

卸载也可以

```
C:\Program Files\Neo4j\bin>Neo4j.bat uninstall

SERVICE_NAME: Neo4j-Server
        TYPE               : 10  WIN32_OWN_PROCESS
        STATE              : 3  STOP_PENDING
                                (STOPPABLE, NOT_PAUSABLE, ACCEPTS_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x1388
[SC] DeleteService SUCCESS

C:\Program Files\Neo4j\bin> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T08:23:42.570

在我在程序文件夹中创建 neo4j 目录之前，我无法安装 neo4j 1.8 控制台，如果您知道我以管理员身份运行，这听起来很奇怪，我知道这是一种特权情况！但谁在乎，它正在运行。（我有时讨厌窗户）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T13:38:48.570

对于 1.9 和 windows 7，重新安装到 c:\program 文件也可以解决这种情况。

对于 1.9，无需更改 wrapperJarFilename（已设置为 5）

# matlab - 如何获取基于视觉的车道保持控制系统的反馈

> ID：12937849
> 
> 赞同：0
> 
> 时间：2012-10-17T15:29:21.757
> 
> 标签：matlab

我正在研究基于视觉的车道检测。我的问题是，如果我们考虑这个框图：

[![框图](../Images/21fb5d0920f5564e47d77c40caa313b4.png)](https://i.stack.imgur.com/tfqEI.jpg)

我已经单独完成了每个块，但是在连接它们时我很困惑。

考虑图像，图像是由传感器测量值，计算参考值和传感器值之间的误差，然后给出`pid`空间状态，但根据第二个框图：

[![第二个框图](../Images/0cab069f7cc3eb49934a5c3d50533926.png)](https://i.stack.imgur.com/5WLSg.jpg)

来自空间状态的值作为反馈并计算误差。现在我很困惑在哪里反馈。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:11:53.673

从您的图像来看，应该在下一个周期为 PID 控制器输入反馈。直接或通过将反馈与参考合并的某些功能。

# ios - 使用 GCD 在 UITableView 中轻松异步加载图像

> ID：12937850
> 
> 赞同：3
> 
> 时间：2012-10-17T15:29:35.790
> 
> 标签：ios, uitableview, grand-central-dispatch, asynchronous

经过两天搜索此答案后，我找到了解决方案。

*   使用 GCD 异步下载图像。
*   使用 NSMutableDictionary 将图像保存在内存中。

我找到了 Duncan C 在此处解释的解决方案：

[http://iphonedevsdk.com/forum/iphone-sdk-development/104438-grand-central-dispatch-tableview-images-from-the-web.html](http://iphonedevsdk.com/forum/iphone-sdk-development/104438-grand-central-dispatch-tableview-images-from-the-web.html)

如何实施：

```
- (void)viewDidLoad
{
(...)
dispatch_queue_t mainQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

imagesDictionary = [[NSMutableDictionary alloc] init];
  (...)
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
(...)

NSData *imageData = [imagesDictionary objectForKey:@"IMAGE URL"];

    if (imageData)
    {
        UIImage* image = [[UIImage alloc] initWithData:imageData];

        imageFlag.image = image;
        NSLog(@" Reatriving ImageData...: %@", @"IMAGE URL");

    }
    else
    {

    dispatch_async(mainQueue, ^(void) {

        NSString *url = @"IMAGE URL";
        NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]];
        UIImage* image = [[UIImage alloc] initWithData:imageData];

        imageFlag.image = image;

        [imagesDictionary setObject:imageData forKey:@"IMAGE URL"];

        NSLog(@" Downloading Image...: %@", @"IMAGE URL");

    });

    }

(...)
} 
```

GitHub中的项目：[https ://github.com/GabrielMassana/AsynchronousV2.git](https://github.com/GabrielMassana/AsynchronousV2.git)

我知道如果项目很大并且有很多单元格，我可能会耗尽内存。但我认为这个解决方案对于新手来说是一个不错的方法。

你觉得这个项目怎么样？如果项目真的很大，最好的选择是将图像保存在磁盘中？但是问题是磁盘中的内存可能会用完，不是吗？那么，也许我们需要一种机制来从磁盘中删除所有图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T21:45:17.060

使用 NSCache 而不是 NSDictionary 来保存下载的图像。这将在内存不足的情况下自行管理并删除一段时间未访问的项目。在这种情况下，如果需要，它们将再次从 URL 加载。

# python - 在 Hadoop Streaming 中使用大象鸟输入格式时出错

> ID：12937851
> 
> 赞同：3
> 
> 时间：2012-10-17T15:29:38.293
> 
> 标签：python, hadoop, lzo

我正在尝试在我的 Hadoop Streaming 脚本中使用[Elephant Bird的输入格式。](https://github.com/kevinweil/elephant-bird)特别是，我想使用 LzoInputFormat 并最终使用 LzoJsonInputFormat（在此处使用 Twitter 数据）。但是当我尝试这样做时，我不断收到一个错误，提示 Elephant Bird 格式不是 InputFormat 类的有效实例。

这就是我运行 Streaming 命令的方式：

```
hadoop jar /usr/lib/hadoop/contrib/streaming/hadoop-streaming-0.20.2-cdh3u5.jar \                                                                                                          
    -libjars /project/hanna/src/elephant-bird/build/elephant-bird-2.2.0.jar \                                                                                                              
    -D stream.map.output.field.separator=\t \                                                                                                                                              
    -D stream.num.map.output.key.fields=2 \                                                                                                                                                
    -D map.output.key.field.separator=\t \                                                                                                                                                 
    -D mapred.text.key.partitioner.options=-k1,2 \                                                                                                                                         
    -file /home/a/ahanna/sandbox/hadoop-textual-analysis/streaming/filter/filterMap.py \                                                                                                   
    -file /home/a/ahanna/sandbox/hadoop-textual-analysis/streaming/filter/filterReduce.py \                                                                                                
    -file /home/a/ahanna/sandbox/hadoop-textual-analysis/streaming/data/latinKeywords.txt \                                                                                                
    -inputformat com.twitter.elephantbird.mapreduce.input.LzoTextInputFormat \                                                                                                             
    -input /user/ahanna/lzotest \                                                                                                                                                          
    -output /user/ahanna/output \                                                                                                                                                          
    -mapper filterMap.py \                                                                                                                                                                 
    -reducer filterReduce.py \                                                                                                                                                             
    -partitioner org.apache.hadoop.mapred.lib.KeyFieldBasedPartitioner 
```

这是我得到的错误：

```
Exception in thread "main" java.lang.RuntimeException: class com.hadoop.mapreduce.LzoTextInputFormat not org.apache.hadoop.mapred.InputFormat
    at org.apache.hadoop.conf.Configuration.setClass(Configuration.java:1078)
at org.apache.hadoop.mapred.JobConf.setInputFormat(JobConf.java:633)
at org.apache.hadoop.streaming.StreamJob.setJobConf(StreamJob.java:707)
at org.apache.hadoop.streaming.StreamJob.run(StreamJob.java:122)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
at org.apache.hadoop.streaming.HadoopStreaming.main(HadoopStreaming.java:50)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.apache.hadoop.util.RunJar.main(RunJar.java:197) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-30T11:53:30.037

在 hadoop 2.4 中，我设法让它运行：

```
-D org.apache.hadoop.mapreduce.lib.input.FileInputFormat=your.package.path.FileInputFormat 
```

而不是标准`-inputformat`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:25:46.503

为了兼容性，Hadoop 支持两种用 Java 编写 map/reduce 任务的方法：“旧”一种通过`org.apache.hadoop.mapred`包中的接口，“新”通过`org.apache.hadoop.mapreduce`包中的抽象类。

即使您使用流式 API，您也需要知道这一点，因为流式传输本身是使用旧方法编写的，因此当您想使用外部库更改流式传输机制的某些内部时，您应该确保该库是也是用老派的方式写的。

这正是发生在你身上的事情。通常情况下，您会编写一个包装器，但幸运的是[Elephant Bird](https://github.com/kevinweil/elephant-bird)提供了一个老式的`InputFormat`，所以您只需要替换`com.twitter.elephantbird.mapreduce.input.LzoTextInputFormat`为`com.twitter.elephantbird.mapred.input.DeprecatedLzoTextInputFormat`.

# c# - 在静态方法中使用语句/调用 Dispose

> ID：12937855
> 
> 赞同：2
> 
> 时间：2012-10-17T15:29:41.807
> 
> 标签：c#, .net, entity-framework, memory-leaks, parallel-processing

我正在开发一个实用程序类，其中包含多个线程经常调用的静态方法。我注意到内存使用量随着时间的推移而增长，所以在我看来我有一些内存泄漏。

这是我用于这些静态方法的模式的一个简单示例：

```
public static int CreateNewThing(int IDofSomeDBObjectHoldingInfoToCreateNewThing)
{
    using(SomeDBContext context = new SomeDBContext(connectionString))
    {
        SomeDBObjectHoldingInfoToCreateNewThing createNewThingyInfo = context.SomeDBObjectsHoldingInfoToCreateNewThing.First(obj => obj.ID == IDofSomeDBObjectHoldingInfoToCreateNewThing);
        // Do some stuff to create the new object
        // Return the ID of the newly created thingy...
        return theNewThingThatWasCreated.ID;
     }
} 
```

我的问题是使用“使用”语句或在静态方法中直接调用 Dispose 是否实际上会清除任何内存。当然，我没有说明这个应用程序的整体架构或目的，但我也想知道我是否在这里使用了最好的模式。在 .NET 中创建线程安全实用程序类的最佳实践是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:33:05.890

> 我注意到内存使用量随着时间的推移而增长，所以在我看来我有一些内存泄漏。

不一定——您需要提供更多数据让我们真正了解这一点。

> 我的问题是使用“使用”语句或在静态方法中直接调用 Dispose 是否实际上会清除任何内存。

`using`声明不是关于清理内存的。那是GC的工作。它们是关于释放*非内存*资源的。您是否使用静态方法与是否`SomeDBContext`应该处理完全无关。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T15:36:08.607

> 我的问题是在静态方法中使用“使用”语句或直接调用 Dispose 是否实际上清除了任何内存

`using`只是一种语法上更简单的调用方式`Dispose`。

```
using(MyClass obj = new MyClass())
{

} 
```

和写作一样：

```
MyClass obj;
try
{
    obj = new MyClass()
}
finally
{
    ((IDisposable)obj).Dispose();
} 
```

接下来，确实`Dispose`释放内存。不，它没有。Dispose 旨在释放不会被清理的非托管资源，然后垃圾收集器释放该对象的内存。它实际上并没有更快地释放对象的内存。需要处理的常见事情是网络连接（如这里的情况）文件句柄，通过与另一种语言互操作创建的非托管内存等。

那么，为什么你的记忆会上升。简而言之，这只是通常的行为。您正在创建对象，它们正在使用内存，因此您的内存正在增加。在某些时候，垃圾收集器将确定它需要执行收集以释放一些内存。（可能是因为系统运行不足而需要更多，可能是因为它已经足够长了，或者 C# 语言指定的任何其他条件。它几乎总是比你更清楚何时真正需要集合。）

因此，除非您遇到真正的问题，否则不要担心，这是托管语言中的正常行为。如果您开始耗尽内存，或者即使*确实*发生了收集，内存也没有下降，那么您需要开始寻找问题。

# vbscript - 自动登录 Bloomberg Anywhere

> ID：12937858
> 
> 赞同：2
> 
> 时间：2012-10-17T15:29:50.033
> 
> 标签：vbscript, bloomberg

我编写了一个访问彭博 API 的 JAVA 程序。数据作为文件存储在我的 PC 上。但是，理想情况下，我希望设置一个 cron 作业，允许我每天早上 5 点在我进入办公室之前运行我的脚本。我有一个 Bloomberg Anywhere 帐户，是否有任何 VB 脚本示例可以让我在我的机器上自动登录该帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:46:58.640

根据我的经验，您不必运行 Bloomberg 终端即可使用 API。我不认为这是定义的行为，但只要您没有在其他 PC 或移动设备上登录您的 Bloomberg 帐户并且没有重新启动您的 PC - API 应该可以工作。

# javascript - Rails如何检测是否使用javascript / jQuery插入了部分

> ID：12937859
> 
> 赞同：0
> 
> 时间：2012-10-17T15:29:48.743
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3.2

如何在 javascript 中检测部分当前是否正在显示？

所以使用半伪代码并尝试尽可能简单地表达我的意图，

在我的控制器中，我有：

```
def index
    if (request.xhr?)//coming from pagination ajax request
        @sessions = Session.paginate(.......)
        if @sessions.empty?
            render: partial => 'nomoresessions'
        else
            render: partial => 'sessions'
        end
    else//standard request to display
        @sessions = Session.paginate(.....)
    end

end 
```

在我的 javascript 中：

```
function doCheck(){
  var canContinuePaginating = true;
  if (nomoresessions partial was inserted){//<--- This is what I need to figure out
      canContinuePaginating = false;
  }
  if (canContinuePaginating){
      //do stuff
  }  

} 
```

如果有人想知道我为什么需要这个，我将通过部分将行附加到表格的底部，并在用户滚动时使用分页，一旦我到达底部，我想附加某种视觉指示器来指示我们是通过 nomoresessions 部分在列表的底部。然后，如果用户继续尝试滚动，我想通过 javascript 检测 nomoresessions 部分当前正在显示，因此不再尝试分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:51:47.547

我能想到的一种简单方法是，您可能希望在“nomoresessions”部分中添加一些类或 id，例如

```
<li class="end-of-list">
  <img src="end.png" />
</li> 
```

然后在你的`doCheck`你可以做：

```
function doCheck(){
  var canContinuePaginating = true;
  if ($('ul.content .end-of-list').length) {
    canContinuePaginating = false; 
```

# java - 在模态窗口中打开 YouTube Player API

> ID：12937862
> 
> 赞同：1
> 
> 时间：2012-10-17T15:30:06.463
> 
> 标签：java, youtube, window, youtube-api, modal-dialog

我正在使用引导框架构建一个站点，并希望允许用户单击一个按钮，该按钮将在模态窗口内打开一个 youtube 视频。我希望模态窗口中的播放器成为使用 youtube 播放器 api 的无铬播放器，我将创建自己的所有按钮，例如播放、暂停、停止等。使用此代码，我可以打开模态窗口并播放一次正确的视频，但是在关闭窗口并单击另一个链接以在模态窗口中打开不同的视频后，每次都会加载第一个视频。如何让它打开并加载不同的视频？

```
 <a class="btn btn-small btn-inverse" onClick="openPlayerLoadVideo('bR2bMFwU6sI');">Demo Video</a>
  <a class="btn btn-small btn-inverse" onClick="openPlayerLoadVideo('KqX-4aRC0K4');">Demo Video</a>

  function openPlayerLoadVideo(videoCode) {
    $('#demo_viewer').modal({show:true});
    var videoID = videoCode; 
    var params = { allowScriptAccess: "always" };
    var atts = { id: "ytPlayer" };
    swfobject.embedSWF("http://www.youtube.com/v/" + videoID + "?version=3&enablejsapi=1&playerapiid=ytplayer", 
                       "videoDiv", "590", "400", "9", null, null, params, atts);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:03:26.710

看起来这可能是一个缓存问题。尝试使用 YouTube iframe embed，这也是嵌入视频的首选方式。这是关于它的博客文章。 [http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)

您可以像现在一样继续构建 url，也可以尝试使用`loadVideoById`api 中的详细信息。 [https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

# iphone - 看起来像一个小错误“预期表达式”但无法找到解决方案

> ID：12937865
> 
> 赞同：1
> 
> 时间：2012-10-17T15:30:27.683
> 
> 标签：iphone, objective-c, ios, opencv, objective-c++

我在下面的链接中使用了该项目

[http://aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)

当我将该项目集成到我的项目中时，反之亦然错误出现错误图像如下所示

如果我运行示例，它工作正常，但是当我想使用“OpenCVClientViewController”时，它会显示错误

我还集成了 UIImage+OpenCV.h 和 UIImage+OpenCV.mm

![在此处输入图像描述](../Images/edde8caa8eb3b75f867110218c14801c.png) 非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:48:49.903

我猜你的实现文件是`.m`（Objective-C），虽然它应该是`.mm`（Objective-C++）。

# xcode - Xcode 4.5 IDE 符号图标

> ID：12937872
> 
> 赞同：2
> 
> 时间：2012-10-17T15:30:51.100
> 
> 标签：xcode

谁能告诉我 Xcode 4.5 的 Find Panel 或 Symbol Navigator 中的图标代表什么？

![在此处输入图像描述](../Images/9cd28715b835aa390a84d53a5a312146.png)

一些例子是：

*   包含“M”的蓝色背景（可能是方法？）
*   绿色含
*   'X'
*   紫色包含“C”
*   绿色包含“L”
*   绿色包含“V”
*   紫色包含'Pr'（我猜是协议）

我在 Xcode 的 Organizer Help 和在线搜索都无济于事。如果有一个所有 Xcode 图标的全局列表会更好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:44:54.453

这是我所知道的。

*   M 表示方法
*   C 事物表示类
*   P 事物表示一个属性
*   O 表示插座
*   V 是一个实例变量（除非它以其他名称为人所知）
*   带下划线的 C，我认为是 .m 文件中的接口扩展
*   Pr 是一个协议

以前从未见过“L”。

# c# - 映射父枚举时生成子对象（Fluent Nhibernate）

> ID：12937874
> 
> 赞同：2
> 
> 时间：2012-10-17T15:30:54.957
> 
> 标签：c#, nhibernate, inheritance, enums, fluent-nhibernate

我正在做一些项目，我遇到了一些我不知道是否可以解决的问题。所以我的问题是这样的：

我的项目中有 4 个类：

```
public abstract class ABaseDynamicLayer
{
    public virtual int LayerID { get; set; }
    public virtual string URIPath { get; set; }
}

public class RasterDynamicLayer : ABaseDynamicLayer
{
}

public class TerrainDynamicLayer : ABaseDynamicLayer
{
}

public class VectorDynamicLayer : ABaseDynamicLayer
{
} 
```

现在我的数据库看起来像这样：

T_DYNAMIC_LAYERS

```
ID  |   URIPath  |  TYPE  |
---------------------------
1   | c:\map1.mp |   1    |
2   | c:\map2.mp |   3    |
3   | c:\map5.mp |   2    | 
```

T_TYPES

```
ID  |  DESCRIPTION  |
---------------------
1   |  Raster       |
2   |  Terrain      |
3   |  Vector       | 
```

现在我的目标是将 T_DYNAMIC_LAYERS 映射到我的项目中，当我这样做时，我不想保存图层的类型，而是想从我的类列表中创建合适的对象作为 T_DYNAMIC_LAYERS 中提到的类型。

例如：

假设我们正在映射 T_DYNAMIC_LAYERS 中的第一行。1）我们将 ID 列映射到 ID 属性。2) 我们将 URIPath Column 映射到 URIPath 到 URIPath 属性。

这很容易，但毕竟想要的结果是我想从第一行获取一个 RasterDynamicLayer 对象，因为该行中的类型是 1（1 等于 RasterDynamicLayer）。

可以做到吗？如果可以做到，我该怎么做？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:37:43.253

我认为你需要[工厂模式](http://msdn.microsoft.com/en-us/library/ee817667.aspx) 的简单使用示例：

```
enum LayerType
{
    Raster,
    Terrain,
    Vector
}

public static ABaseDynamicLayer CreateLayer(LayerType type, int id, string uri)
{
    ABaseDynamicLayer layer;
    switch (type)
    {
        case LayerType.Raster:
            layer = new RasterDynamicLayer();
            break;
        case LayerType.Terrain:
            layer = new TerrainDynamicLayer();
            break;
        case LayerType.Vector:
            layer = new VectorDynamicLayer();
            break;
        default: throw new ArgumentException("Type not supported:" + type.ToString()); 
    }
    layer.LayerID = id;
    layer.URIPath = uri;
    return layer;
} 
```

# sql - 使用 group by 检索主键上的聚合行

> ID：12937878
> 
> 赞同：4
> 
> 时间：2012-10-17T15:31:14.503
> 
> 标签：sql, sql-server, sql-server-2005, group-by, aggregate

好的，所以我知道当您使用 group by 执行 SQL 命令时，您无法在没有聚合的情况下提取特定字段，但在我看来，如果您对保证唯一的主键进行聚合，则应该是一种将该列的其他行与它一起拉动的方法。像这样的东西：

```
SELECT Max(id), 
       foo, 
       bar 
FROM   mytable 
GROUP  BY value1, 
          value2 
```

所以 ID 保证是唯一的，所以 foo 和 bar 的值正好是 1，有没有办法生成这样的查询？

我已经尝试过了，但是在这种情况下 MyTable 有数百万行，并且运行时是不可接受的：

```
SELECT * 
FROM   mytable 
WHERE  id IN (SELECT Max(id) 
              FROM   mytable 
              GROUP  BY value1, 
                        value2) 
       AND ... 
```

理想情况下，我想要一个至少可以追溯到 SQL Server 2005 的解决方案，但如果在更高版本中有更好的解决方案，我也希望听到它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:16:03.077

确保您定义了一个索引，例如：

```
CREATE NONCLUSTERED INDEX idx_GroupBy ON mytable (value1, value2) 
```

`IN`如果你有很多行，可能会很慢。将您的`IN`变成`INNER JOIN`.

```
SELECT
    data.*
FROM
    mytable data
        INNER JOIN
    (
        SELECT id = MAX(id) 
        FROM mytable 
        GROUP BY value1, 
                 value2
    ) ids
        ON data.id = ids.id 
```

不幸的是，Sql Server 没有任何功能可以更好地做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T16:18:58.093

试试这个：

```
SELECT foo
       ,bar
       ,MAX(ID) OVER(Partition By Value1, Value2 Order by Value1,Value2)
FROM myTable

CREATE NONCLUSTERED INDEX myIndex ON MyTable(Value1,Value2) INCLUDE(foo,bar) 
```

这个 NCI 将覆盖整个查询，因此它根本不需要查找表

# c - if 和 else 语句在这个小程序中不起作用，请帮助:)

> ID：12937879
> 
> 赞同：-1
> 
> 时间：2012-10-17T15:31:17.187
> 
> 标签：c

编译器错误：

```
pythagoras.c: In function ‘main’:
pythagoras.c:22:4: fejl: ‘else’ without a previous ‘if’
pythagoras.c:29:5: fejl: ‘else’ without a previous ‘if’ 
```

编码：

```
#include <stdio.h>
#include <math.h>
int main(void)
{
  double a, b, c;
  double secondside1, secondside2, secondside3;
char Scanres;
printf("Hvilken side vil du finde? a, b eller c?\n");
Scanres = scanf("%c", &Scanres);
secondside1 = a * a;
secondside2 = b * b;
secondside3 = c * c;

    if(Scanres = c);

    printf("Indtast værdierne af a og b\n");
    scanf("%lf%lf", &a, &b);
    c = sqrt(secondside1 + secondside2);
        printf("c er %f", c);

        else if(Scanres = b);

        printf("Indtast værdierne af a og c\n");
        scanf("%lf%lf", &a, &c);
        b = sqrt(secondside3 - secondside2);
        printf("b er %f\n", b);

            else(Scanres = a);

            printf("Indtast værdierne af b og c\n");
            scanf("%lf%lf", &b, &c);
            a = sqrt(secondside3 - secondside1);
            printf("a er %lf", a);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:33:16.720

语句的语法`if`是：

```
if (expr) statement; 
```

`statement`可能是一个指令块，所以你必须添加括号。

```
int main(void)
{
    double a, b, c;
    double secondside1, secondside2, secondside3;
    char Scanres;
    printf("Hvilken side vil du finde? a, b eller c?\n");
    Scanres = scanf("%c", &Scanres);
    secondside1 = a * a;
    secondside2 = b * b;
    secondside3 = c * c;

    if (Scanres == c) 
    {
        printf("Indtast værdierne af a og b\n");
        scanf("%lf%lf", &a, &b);
        c = sqrt(secondside1 + secondside2);
        printf("c er %f", c);
    }
    else if (Scanres == b) 
    {

        printf("Indtast værdierne af a og c\n");
        scanf("%lf%lf", &a, &c);
        b = sqrt(secondside3 - secondside2);
        printf("b er %f\n", b);
    }
    else 
    {
        printf("Indtast værdierne af b og c\n");
        scanf("%lf%lf", &b, &c);
        a = sqrt(secondside3 - secondside1);
        printf("a er %lf", a);
    }
    return 0;
} 
```

*   `else`不需要表达。
*   你不使用好的运算符。`==`是比较运算符，不是`=`。
*   `a`,`b`并且`c`没有被初始化。
*   `scanf`返回值是成功匹配和分配的输入项的数量，而不是读取的值。

你应该阅读基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:32:42.753

C 中的比较运算符是`==`. 用一个单一的`=`你正在做任务。

此外，在 之后有一个分号`if()`使其执行一个空语句，而不是您认为的代码路径。

请注意，缩进在 C 中是免费的，它没有任何意义，因此如果它看起来不合理，编译器不会警告您。

此外，这：

```
Scanres = scanf("%c", &Scanres); 
```

没有多大意义。该`scanf()`函数会将它读入的字符写入`Scanres`，但随后您将通过将 的返回值`scanf()`（即它进行的转换次数）存储到同一个变量中来覆盖该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:33:36.373

嘿删除分号

```
if(Scanres = c); 
```

并使用括号如

```
if ( statement)
{
  code
}
else if ( statement )
{
code
}
else
{
code
} 
```

这应该解决它。请确保您正确输入定义的变量“a”“b”和“c”

```
#include <stdio.h>
#include <math.h>
int main(void)
{
  double a, b, c;
  a = 10 ;
  b = 12 ;
  c = 15 ;

  // Here you must make it that the user inputs the 3 variables ; I have entered them manually first 
  // Use scanf or fgets to input the 3 variables. And there you go !!

  double secondside1, secondside2, secondside3;
  char Scanres;
  printf("Hvilken side vil du finde? a, b eller c?\n");
  Scanres = scanf("%c", &Scanres);
  secondside1 = a * a;
  secondside2 = b * b;
  secondside3 = c * c;

    if(Scanres == c)
    {
    printf("Indtast værdierne af a og b\n");
    scanf("%lf%lf", &a, &b);
    c = sqrt(secondside1 + secondside2);
        printf("c er %f", c);
    }
        else if(Scanres == b)
    {
        printf("Indtast værdierne af a og c\n");
        scanf("%lf%lf", &a, &c);
        b = sqrt(secondside3 - secondside2);
        printf("b er %f\n", b);
    }
    else if(Scanres == a)
    {
            printf("Indtast værdierne af b og c\n");
            scanf("%lf%lf", &b, &c);
            a = sqrt(secondside3 - secondside1);
            printf("a er %lf", a);
    }
return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:34:40.013

您的 if/else 语法很不可靠，您需要使用花括号`{}`来识别与每个条件关联的块。此外，使用`==`运算符来测试相等性：

```
if (Scanres == c) { /* Start the block for this case */
  /* ... */
} else if (Scanres == b) { /* Here's how you do an "else if" block. */
  /* ... */ 
```

# c++ - 继承成员函数的模板特化

> ID：12937881
> 
> 赞同：3
> 
> 时间：2012-10-17T15:31:21.087
> 
> 标签：c++, templates

我们想专门化基类的成员函数。但是，它不会编译。有人知道可以编译的任何替代方案吗？

这是一个例子

```
struct Base
{
    template<typename T>
    void Foo()
    {
        throw "Foo() is not defined for this type";
    }
};

struct Derived : public Base
{
    template<>
    void Foo<int>() { cout << "Foo<int>()" << endl; } // compile error (cannot specialize members from a base class)

    template<>
    void Foo<double>() { cout << "Foo<double>()" << endl; }  // compile error (cannot specialize members from a base class)
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:11:20.080

最终，我们使用重载解决了这个问题。

这是基类的样子

```
struct Base
{
    template<typename T>
    class OfType {}

    template<typename T>
    void Foo(OfType<T>) { static_assert(false, "Foo is not implemented for this type. Please look in the compiler error for more details."); }
};

struct Derived : public Base
{
    using Base::Foo;

    void Foo(OfType<int>) { // here comes logic for ints }
    void Foo(OfType<double>) { // here comes logic for doubles }
}; 
```

这是使用的客户端代码示例`Foo()`

```
template<typename S>
class ClassThatUsesFoo
{
    private: S s;

    template<typename T>
    void Bar(T item) 
    {  
        s.Foo(Base::OfType<T>());  // this is the code that uses Foo
        DoSomeStuffWithItem(item); 
    } 
};

void main()
{
    ClassThatUsesFoo<Derived> baz;
    baz.Bar(12); // this will internally use Foo for ints
    baz.Bar(12.0); // this will use Foo for doubles
    baz.Bar("hello world"); // this will give a verbose compile error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:35:37.493

这将编译，除了调用`Foo<char>()`：

```
#include <iostream>
#include <string>
using namespace std;

struct Base
{
    template<typename T>
    void Foo()
    {
        throw "Foo() is not defined for this type";
    }
};

struct Derived : public Base
{
    template<typename T> void Foo();
};

template<>
void Derived::Foo<int>() { cout << "Foo<int>()" << endl; }

template<>
void Derived::Foo<double>() { cout << "Foo<double>()" << endl; }

int main()
{
    Derived derived;

    // this is client code
    derived.Foo<int>(); 
    derived.Foo<double>(); 
    derived.Foo<char>();   // this throws
} 
```

如果你想要调用`Foo<char>()`——或者任何不是你专门专门化的类型——那么这行得通。如果您想要一个适用于所有类型的非专业实现，那么您还需要添加一个非专业实现`Foo()`：

```
template<typename T> 
void Derived::Foo() { cout << "generic" << endl; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:51:04.827

为了回应与亚历克斯的讨论（见约翰迪布林的回答的评论），这就是我的意思（SSCCE）：

```
#include <iostream>
using namespace std;

struct Base
{
    template<typename T>
    void Foo()
    {
        //static_assert(false, "Foo() is not defined for this type");
        throw "Foo() is not defined for this type";
    }
};
    // you can add as many specializations in Base as you like
    template <>
    void Base::Foo<char>()  {  cout << "Base::Foo<char>()" << endl;  }

struct Derived : public Base
{
    // just provide a default implementation of Derived::Foo
    // that redirects the call to the hidden Base::Foo
    template < typename T >
    void Foo()
    {  Base::Foo<T>();  }
};
    // the specializations for Derived
    template<>
    void Derived::Foo<int>() { cout << "Foo<int>()" << endl; }

    template<>
    void Derived::Foo<double>() { cout << "Foo<double>()" << endl; }

struct Derived_wo_specialization : public Base
{
    /* nothing */
};

int main()
{
    Derived d;
    d.Foo<char>();
    d.Foo<double>();

    Derived_wo_specialization dws;
    dws.Foo<char>();
    dws.Foo<double>();
} 
```

# mongoose - 如何使用 Mongoose 与 2 组不同的模型建立 2 个连接？

> ID：12937883
> 
> 赞同：1
> 
> 时间：2012-10-17T15:31:30.990
> 
> 标签：mongoose

我无论如何都找不到定义两组模型并在我想要的连接中使用它们..

我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:29:21.363

创建两个连接并为每个连接添加不同的模型：

```
var mongoose = require('mongoose');

var db1 = mongoose.createConnection('localhost', 'test');
var Cat = db1.model('Cat', new mongoose.Schema({ name: String }));

var db2 = mongoose.createConnection('localhost', 'test');
var Dog = db2.model('Dog', new mongoose.Schema({ name: String })); 
```

在此示例中，“Cat”模型与 connection 相关联，`db1`并且该`Dog`模型与`db2`.

# adobe-indesign - inDesign 脚本：使用 JavaScript 获取具有特定段落样式样式的文本和页码

> ID：12937884
> 
> 赞同：2
> 
> 时间：2012-10-17T15:31:33.847
> 
> 标签：adobe-indesign, indesign-server

我有一个包含 10 页的 inDesign 文档，里面填满了文本。文本使用不同的段落样式设置样式，其中一些与构建自定义目录有关。

有两种相关的段落样式，“Header1”和“Header2”，我试图从中构建自己的目录，我想将其导出到文本文件中。

我需要获取的相关信息是带有“Header1”和“Header2”样式的文本以及相应的页码。

我试图通过 GREP 来实现这一点并且成功了一半，但是 GREP 扫描整个文档而不是逐页扫描。

有没有办法按段落样式逐页浏览所有样式文本？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:19:07.160

如果您不想使用 GREP，则可以遍历故事的每个段落，以收集应用了特定样式的段落。

在下面的示例代码中，我收集了`para_with_style`变量中的段落：

```
var doc = app.activeDocument;

var story = doc.stories[0];

// Get every paragraph in `story` (using `everyItem().getElements()` is more efficient)
var paras = story.paragraphs.everyItem().getElements();

// Collect every paragraph with a certain paragraph style
var applied_style = doc.paragraphStyles.itemByName('style-name');
var paras_with_style = [];
for (var i=0,l=paras.length; i<l; i++) {
   var para = paras[i];
   if (para.appliedParagraphStyle == applied_style) {
      paras_with_style.push(para);
   }
}

// Do something with each `para` in `paras_with_style` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:09:04.820

是的。

查看 InDesign API 的对象模型。

您有 Pages 类，因此使用方法 length 遍历所有 Pages

然后，在这个循环中，为每个页面获取所有 TextFrame

对于每个 textFrame 使用 Class Paragraph 来迭代每个 TextFrame

在每个段落中，获取您想要的属性。

# perl - 从分隔文件中删除列

> ID：12937889
> 
> 赞同：2
> 
> 时间：2012-10-17T15:31:52.250
> 
> 标签：perl, unix

我正在尝试将制表符分隔的文件剪切并粘贴在一起，并且一直以这种方式使用 unix 中的剪切和粘贴实用程序：

```
cut -f 1-66 file1 > file1a
cut -f 68- file1  > file1b
paste file1a file1b 
```

但是我想知道是否有办法在 Perl/Ruby 中使用 -F 命令来完成它，因为从长远来看这可能会更快。例如

```
perl -F/\\t/ -ane
for every line in document
  for i (0..66) and (67..Last field in line)
    print $[i]
   end
   print \n
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:48:50.637

Perl 可以这样工作：

```
perl -F/\\t/ -ane  'print join("\t", @F[0..66,68..$#F])' 
```

`@F`包含部分字符串，`$#F`包含最后一个元素的索引`@F`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:45:52.533

您的原始代码似乎缺少一些重定向。

怎么样：

```
cut -f1-66,68- input > output 
```

我认为 perl 或 ruby​​ 不太可能比这更快。

# c# - 如何浏览 XML 上的特定级别？

> ID：12937891
> 
> 赞同：0
> 
> 时间：2012-10-17T15:31:53.690
> 
> 标签：c#, .net, xml

这是我拥有的 XML：

```
<ordinanze>
    <dataagg>17/10/2012 ore 16:30</dataagg>
    <ordinanza>
        <numero>02/2012</numero>
        <titolo>02/2012</titolo>
    </ordinanza>

    <ordinanza>
        <numero>02/2012</numero>
        <titolo>02/2012</titolo>
    </ordinanza>

    <ordinanza>
        <numero>02/2012</numero>
        <titolo>02/2012</titolo>
    </ordinanza>
</ordinanze> 
```

我想用属性浏览第一级`ordinanza`（而不是其余的）所以，foreach 中有 3 个节点。我该怎么做？

我的代码：

```
XmlNodeList StudentNodeList = myXmlDocument.SelectNodes("ordinanza");

foreach (XmlNode node in StudentNodeList)
{
    Response.Write(node.SelectSingleNode("//numero[1]").InnerText);
} 
```

但它什么也没打印！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:39:34.413

如何使用 Linq To Xml

```
var xDoc = XDocument.Parse(xml); //or XDocument.Load(fileName)
var list =  xDoc.Descendants("ordinanza")
                .Select(n => new
                {
                    Numero = n.Element("numero").Value,
                    Titolo = n.Element("titolo").Value,
                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:37:49.270

您的 XPath 不正确。这是我最喜欢的[XPath 参考](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C)。要回答您关于如何在 foreach 中获取三个节点的问题，请尝试

```
var students = myXmlDocument.SelectNodes("/ordinanze/ordinanza"); 
```

但是，如果您还不熟悉 LINQ，我建议您尝试一些 LINQ。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:34:17.293

尝试使用 XElement 和[Linq to XML](http://www.dotnetcurry.com/ShowArticle.aspx?ID=564)。

# javascript - Backbone.js 事件绑定未触发

> ID：12937896
> 
> 赞同：1
> 
> 时间：2012-10-17T15:32:21.583
> 
> 标签：javascript, backbone.js, backbone-events

是从模板呈现的`select`，并且在被调用之前不存在于 DOM`renderGroups()`中。

我认为这些*事件是绑定到视图的*，所以如果选择一开始在 DOM 中不存在并不一定重要？

我是新手，`backbone.js`所以它可能很明显：

```
var DirectoryView = Backbone.View.extend({
    el: $("table tbody"),
    initialize: function(){
        // Populate our collection
        this.collection = new Directory(contacts);

        // Get our unique groups
        var groups = this.getGroups();
        this.renderGroups(groups);
    },

    renderGroups: function(groups) {
        var group = $("#groups");

        var groupView = new GroupView({
            model: {groups: groups}
        })

        group.append(groupView.render().el)

    },

    events : {
        "change select" : "select"
    },

    select: function(e) {
        console.log("hello")
    },

    getGroups: function() {
        // Pluck all the group properties from our array of contacts and return the unique groups
        return _.uniq(this.collection.pluck("group"), false, function(group){
            return group.toLowerCase();
        });
    }
}); 
```

**模板**：

```
 <script id="group-option-tmpl" type="text/template">
        <option value="all">All</option>
        <% _.each(groups, function(group) { %>
            <option value="<%= group %>"><%= group %></option>
        <% }); %>
    </script> 
```

**JSFiddle**

[http://jsfiddle.net/BDgMu/1/](http://jsfiddle.net/BDgMu/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:37:16.083

貌似`$("#groups")`不在里面`DirectoryView.el`。我想`$('#groups')`是`select`。

# jquery - bootstrap.js 类型错误

> ID：12937897
> 
> 赞同：2
> 
> 时间：2012-10-17T15:32:32.530
> 
> 标签：jquery, twitter-bootstrap

我的网站出现错误。错误是：

> 时间戳：10/17/2012 8:27:23 PM
> 错误：TypeError：$ 不是函数
> 源文件：我的站点/js/bootstrap.js 的路径
> 行：23

如果这与其他一些 jQuery 文件冲突，我该如何删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:38:30.070

大概你错过了 jQuery。确保在包含 Bootstrap 之前将其包含在页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:40:55.503

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script> 
```

你的写作顺序和上面一样吗？

# c++ - 在 if 语句之外使用 ==？

> ID：12937900
> 
> 赞同：4
> 
> 时间：2012-10-17T15:32:40.267
> 
> 标签：c++, c

我只见过在 if 语句中使用“==”。那么“==”在这种情况下是如何工作的呢？

```
a = 5;
b = (a == 18 % 13); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T15:33:57.637

如果`b`是 a `bool`，您可以将表达式的结果分配给它。在这种情况下，如果条件`a == 18 % 13`成立，`b`将变为`true`，否则`false`。

基本上，

```
a == 18 % 13 - would yield b = true or b = 1 
```

和

```
a != 18 % 13 - would yield b = false or b = 0 
```

取决于`b`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:35:23.840

这

```
a == 18 % 3 
```

相当于

```
a == (18%3) 
```

因为模运算符`%`的优先级高于等式运算符`==`。

此表达式的计算结果为`true`或`false`（实际上，`true`在这种情况下）。因此，您将其结果分配给 variable `b`。`b`本身可以是 a`bool`或任何可以从`bool`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:42:16.517

好吧，让我们分解它..

问题是：

```
a = 5, b=(a==18%13); // What is b? 
```

我们将从括号开始。%，称为模运算符，为您提供两个数字相除的余数。所以 18/13 给你 1 余数 5。所以：

```
18%13 = 5;

// so now we have
b=(a==5); 
```

现在等价运算符 == 只能返回 true 或 false，1 或 0。这与询问左操作数是否等价于右操作数相同。在这种情况下：

```
 5 == 5; returns true or 1; 
```

因此 b = 1;

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T15:36:53.043

C 和 C++ 不是*那么*高级。它们没有真正的布尔类型（尽管在 C++ 和 C99 中有 typedef 用于提供一些小宽度整数类型来充当布尔值），因此任何非零整数、浮点或指针值都被视为布尔值 true，而零则被视为 false . 因此，逻辑表达式的计算结果为 1（真）或 0（假），因此可以分配给整数。

# c# - Dispatcher.CheckAccess() 的正确使用（或不使用）

> ID：12937902
> 
> 赞同：16
> 
> 时间：2012-10-17T15:32:43.043
> 
> 标签：c#, wpf

在 Winforms 中，所有控件都有一个`InvokeRequired`属性，如果我必须在控件上调用 .[Begin]Invoke 以对其进行修改，则该属性返回 true。

`DispatcherObject.CheckAccess()`在 WPF 中， and中有一个明显相似的结构`Dispatcher.CheckAccess()`，但我被这个`EditorBrowsable(EditorBrowsableState.Never)`属性吓到了。当我像这样禁用编辑器浏览时，我用它来表示“你*不*应该这样做。不，真的。如果需要这样做来解决你的直接问题，那么你错误地设计了你的总体问题的解决方案。” 另一方面，我找到的唯一替代方案（事实上，我最初的解决方案）是`Thread.CurrentThread.ManagedThreadId == 1`. （这太可怕了。它在一般情况下不起作用。我知道。不过，它确实适用于我的有限用途。）

[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.checkaccess%28v=vs.100%29.aspx) [文档](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.checkaccess%28v=vs.100%29.aspx)`EditorBrowsable`对属性的存在和推理保持沉默。它是否确实意味着“不要使用它”，就像我输入它一样，或者它是否有其他一些不那么禁止的含义？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-17T15:59:11.627

在 WPF 中，`Dispatcher.Invoke`无论当前线程如何，您都可以调用，它会相应地处理调用 - 如果您已经在正确的线程上，它只会调用您的代码，并`CheckAccess`用于处理此行为。

对于`BeginInvoke`您当前所在的线程是无关紧要的：`BeginInvoke`始终是异步的，并且执行顺序取决于您添加到调度程序队列中的项目的优先级。

如果您根本不应该使用该方法，它就不会是公开的：该属性的目的只是将成员隐藏在诸如 Intellisense 和其他编辑器浏览器之类的机制中。您通常不需要使用`Dispatcher.CheckAccess()`自己，这可能就是为什么它被标记为不可浏览的原因，但是我们只能猜测它的智慧（除非 Eric Lippert 正在观看 ;-)

总结：只需打电话`Dispatcher.Invoke`，不用担心`CheckAccess`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:33:29.567

我要补充一点：如果您想模仿“ `If invokeRequired then`...”
，我会说：不要使用“ `if Dispatcher.CheckAccess`”，而是使用：

```
If Me.Dispatcher.Thread Is System.Threading.Thread.CurrentThread Then
    Label1.Content = value
Else
    Me.Dispatcher.BeginInvoke(New Action(Of String)(AddressOf displaymessage), value)
    Return
End If 
```

我遇到的问题是 CheckAccess 总是正确的，即使在开始调用之后......

没关系，以下代码也可以正常工作：

```
 If Me.Dispatcher.CheckAccess Then
    Label1.Content = value 
  Else
    Me.Dispatcher.BeginInvoke(New Action(Of String)(AddressOf displaymessage), value)
    Return
End If 
```

# javascript - 使用 JavaScript 添加删除类的最有效方法

> ID：12937905
> 
> 赞同：7
> 
> 时间：2012-10-17T15:32:50.673
> 
> 标签：javascript, performance, firefox, dom-manipulation

我很好奇是否有人知道其中哪个更有效，我只关心 Firefox 作为浏览器，不需要知道这段代码在 IE 等中不起作用......

基本上，我根据输入字段的值显示和隐藏 DOM 元素，如果您愿意，可以进行即时搜索。如果没有显示搜索结果，我需要显示或隐藏“未找到”元素。我很好奇在修改其类属性之前检查“未找到”元素是否处于正确状态或仅修改类属性是否更便宜（更有效）。

问题：我是否应该在每次运行函数时删除/添加隐藏类，即使元素的类属性没有变化？

```
if (shown_count > 0) {
    element.classList.add('hidden');
}
else {
    element.classList.remove('hidden');
} 
```

或者我应该在实际更新之前检查元素是否需要更新其类属性？

```
if (shown_count > 0) {
    if (element.classList.contains('hidden') == false) {
         element.classList.add('hidden');
    }
}
else {
    if (element.classList.contains('hidden')) {
         element.classList.remove('hidden');
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T15:37:08.687

我认为存在检查已经由本机代码完成，因此您无需再次检查。

那么让我们看一下源代码（注：`classList`是`DOMTokenList`对象）

```
String DOMTokenList::addToken(const AtomicString& input, const AtomicString& token)
{
    if (input.isEmpty())
        return token;

    StringBuilder builder;
    builder.append(input);
    if (input[input.length()-1] != ' ')   // <--- check happens here
        builder.append(' ');
    builder.append(token);
    return builder.toString();
} 
```

*源码来自WebKit的WebCore*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:22:48.933

在 jsperf 上运行一些测试后，答案很简单，即第一个选项更快。可能由于 xdazz 的回答， classList.add 方法已经进行了检查。

这是性能测试的链接：http: [//jsperf.com/add-remove-class-performanci](http://jsperf.com/add-remove-class-performanci)

# shared-libraries - 将 CI 原生库扩展为一个包

> ID：12937907
> 
> 赞同：0
> 
> 时间：2012-10-17T15:32:56.617
> 
> 标签：shared-libraries, codeigniter-2

我正在使用 CodeIgniter2 开发一个 php 应用程序，该应用程序位于：

```
/public_html/community/
 -application
 -system
 -index.php 
```

此应用程序有自己的`My_Session`库（从本地 CI_Session 库扩展）。好吧，这里一切都很好。但是，我想在根目录创建一个 Portal/Frontpage，对于这个 porpusee，我已经安装了另一个 CI2 应用程序：

```
/public_html/
 -application
 -system
 -index.php
 -community/  (here resides the another CI2 installation) 
```

我尝试做的是使用Loader 类中的[$this->load->add_package_path()](http://codeigniter.com/user_guide/libraries/loader.html)`community`方法将 Session 库从根“共享”，如下所示：

```
$this->load->add_package_path('/public_html/community/application/');
$this->load->library('Session'); 
```

这里的问题是 Loader 类从根系统加载 Session 库而不是包库（社区/应用程序/库）。你知道我该怎么处理吗？或者如果您知道共享会话库的另一种方式。

## 编辑

这是我的会话库所在的位置：

```
/public_html/community/application/libraries/My_Session.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:41:25.693

好吧，我得到了这个主题的帮助：[两个 CodeIgniter 应用程序之间的会话共享](https://stackoverflow.com/questions/11502748/session-sharing-between-two-codeigniter-applications)。最后的剪辑是：

1.  **添加应用程序包**

    $this->add_package_path('/public_html/community/application/');

2.  **从 Root CI 应用程序加载 Session 库**

    $this->library('session');

3.  **从应用程序包（社区）加载库**。这里的神奇之处在于，这个类是从之前在第 2 点加载的 Session 类扩展而来的。

    $this->library('MY_Session', '', 'csession'); //重命名对象以避免名称冲突

现在，在我的根应用程序控制器中，我可以执行以下操作：

```
$this->csession->custom_method(); 
```

# php - 如何在 mysql 时间戳为 1 个月前后自动运行 php 脚本？

> ID：12937909
> 
> 赞同：1
> 
> 时间：2012-10-17T15:33:03.470
> 
> 标签：php, mysql

当列表已在线 1 个月时，我想运行一个脚本来结束我本地分类广告网站上的列表。该站点是使用 MySQL 数据库用 PHP 编写的。

我如何使用时间戳来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:18:16.297

如果您想`MySQL`向您推送一些信息，可以创建一个由[触发器调用的](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)[UDF](http://dev.mysql.com/doc/refman/5.0/en/adding-functions.html)函数。看一下，你会发现它是否矫枉过正。

# javascript - JavaScript, oninput 改变选项标签的innerHTML

> ID：12937910
> 
> 赞同：0
> 
> 时间：2012-10-17T15:33:04.560
> 
> 标签：javascript, if-statement, option, innerhtml

我需要根据输入表单的输入来更改选项标签的 innerHTML 文本。我是这样做的，但是一旦我写“1”，它就会被锁定，我不能在那里写任何其他东西。它确实会更改文本，但不允许您写任何其他内容，或者例如从 1 更改为 2 的值。

```
function change_let_rok()
{
    if (document.kombpred.nn.value = "1") {
        document.kombpred.obdobi.options[0].innerHTML = "Rok";
    }
        else {
            document.kombpred.obdobi.options[0].innerHTML = "Let";
    }
} 
```

html代码是：

```
<form name="kombpred">
<input style ="display:inline;" name=nn type=text size=15 class='innerc resform' oninput="change_let_rok()"> 
    <select name="obdobi" style="display:inline;">
    <option value="let">Let</option>
    <option value="mesice">Mesice</option>
    <option value="ctvrtlety">Ctvrtlety</option>
    <option value="pulroky">Pulroky</option>
    </select>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:34:25.950

您的 if 语句中只有 1 个等号。应该是'=='。此外，您的选项值可能分别为 1、2、3 和 4。

# python - 我可以在 Windows 上运行 py2app 吗？

> ID：12937916
> 
> 赞同：10
> 
> 时间：2012-10-17T15:33:15.717
> 
> 标签：python, windows, py2app

我最近发现过时的 Python 版本导致我的 Wx 应用程序出错。

我无法在我的 Mac 上安装 Python 2.7.3，当我在虚拟机中尝试它时，py2app 在一夜之间运行后仍在“编译”应用程序（我的 Windows/Linux 机器有一个 ≈1GHz 的处理器）。

是否有在 Windows 上运行的 py2app 版本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T18:17:38.647

根据[项目页面](http://pypi.python.org/pypi/py2app/)和[自述](http://svn.pythonmac.org/py2app/py2app/trunk/README.txt)文件，py2app 旨在用 python 代码创建 Mac 应用程序。显然，您将无法在 Windows 机器上运行最终产品。但是如果问题是你能在 windows 上构建应用程序并在 mac 上运行它，那么答案仍然是否定的，因为如果你去[setup.py](http://svn.pythonmac.org/py2app/py2app/trunk/setup.py)，它说`'Operating System :: MacOS :: MacOS X'`windows 没有分叉，因为它取决于一些Mac SDK 工具，例如`/Developer/SDKs/MacOSX10.5.sdk`. 看来你运气不好。如果您绝望，请尝试使用[Virtual box](https://www.virtualbox.org/)在您的 windows 机器上模拟 mac，或者满足于使用 py2exe 构建的 windows

# javascript - 为什么在 IE 中替换 setInterval div 后我的容器会丢失其内容？

> ID：12937919
> 
> 赞同：3
> 
> 时间：2012-10-17T15:33:21.800
> 
> 标签：javascript, jquery, asp.net, css, internet-explorer

我一直在使用 chrome 和 ff 开发网页。我最近被告知它也必须在 IE 中工作。我已经解决了 IE 双填充问题。问题是在 javascript setinterval 导致 div 被替换后，我的“网格”的内容消失了。只有在 IE 中查看页面时才会发生这种情况。

这是通往动态创建和打印出来的页面的代码

```
 <div  id=\"col1a\" style=\"float:left; width:605px; height:300px;\"> \
            <div id=\"GridContent\" class=\"FormContent\"> \
                <div id=\"ContentPlaceHolder1_FormSection\" class=\"FormSection\"> \
                    <div id=\"ContentPlaceHolder1_ProgramGridHeader\" class=\"ProgramGridHeader\"> \
                        <div id=\"ContentPlaceHolder1_HeaderRow\" class=\"HeaderRow\"> \
                            <div readonly=\"readonly\" class=\"Cell\" style=\"width: 57px\">Stage</div><div class=\"Cell\" style=\"width: 78px\">Type</div><div class=\"Cell\" style=\"width: 50px\">Time</div><div class=\"Cell\" style=\"width: 44px\">Int</div><div class=\"Cell\" style=\"width: 44px\">Dry</div><div class=\"Cell\" style=\"width: 44px\">Wet</div><div class=\"Cell\" style=\"width: 52px\">RH%</div><div class=\"Cell\" style=\"width: 72px\">Option</div><div class=\"Cell\" style=\"width: 72px\">Damper</div><div class=\"Cell\" style=\"width: 44px\">Fan</div> \
                        </div><br /> \
                        <div class=\"Row\" position: relative;> \
                                 "}; 
```

以下是我仅适用于 IE 的 CSS

```
.Row { border: solid 0px green; float: left; min-width: 0; clear:both; position: relative; -webkit-border; padding 1;}
.RowCompleted { border: solid 0px #7F9DB9; background-color: #C0C0C0; color: #000;}
.RowNoShower { border: solid 0px #7F9DB9; background-color: #FFF; color: #000;  min-width: 0; }
.RowColdShower { border: solid 1px #7F9DB9; background-color: #ADD8E6; color: #000; }
.RowWarmShower { border: solid 1px #7F9DB9; background-color: #FB0; color: #000; }
.RowHotShower { border: solid 1px #7F9DB9; background-color: #F00; color: #FFF; }
.RowInProgress { border: solid 0px #7F9DB9; background-color: #0F0; color: #000;}
.RowPaused { border: solid 0px #7F0DB9; background-color: #00F; color: #FFF;} 
```

非常感谢帮助理解内容消失的原因-谢谢--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:54:50.463

某些版本的 IE 只会在 HTML 有效的情况下填充元素。

我会假设有一个未关闭的标签或额外的报价。

你能显示你试图替换它的所有 HTML 吗？

来源： http: [//www.dottodotnet.com/2010/03/jquery-html-problems-in-internet.html](http://www.dottodotnet.com/2010/03/jquery-html-problems-in-internet.html)

# git - 在 GitHub 上保留旧分支有什么好处？

> ID：12937921
> 
> 赞同：4
> 
> 时间：2012-10-17T15:33:28.410
> 
> 标签：git, github

我的团队已经将项目的分支合并到 master 并部署了更改。我们的 DevOps 人员想知道将这些旧的远程分支保留在 GitHub 上是否有任何好处。

分支中是否有任何元数据在合并到另一个分支后被删除后丢失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:03:18.837

分支只是一个指向提交的名称。删除已合并`master`（或等效）的分支不会丢失任何信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:00:13.510

您必须在删除之前进行标记，以便保留对分支的引用。删除后，它将不再显示在您的分支列表中，但如有必要，仍可通过标签访问。

在此处查看此答案：[Git 分支删除](https://stackoverflow.com/questions/2342821/git-branch-deletion?rq=1)

# c++ - 在 Ubuntu 中翻译快捷键

> ID：12937923
> 
> 赞同：0
> 
> 时间：2012-10-17T15:33:37.217
> 
> 标签：c++, c, linux, ubuntu

我正在 Ubuntu 中制作类似记事本的程序。我有这样的想法，如果我的记事本程序已打开但当前不在焦点上，那可能是我打开了一个文件夹或其他东西并且我的程序位于该窗口后面，如果我想将一些数据粘贴到我的记事本中，然后按 CTRL+ P ，即使记事本位于该窗口后面，该数据也会粘贴到记事本文件中。

问题是当我的记事本在窗口后面时，我不知道如何检测按下了哪些键。我该怎么做？我听说为此目的有一个系统调用。我正在用 C++ 编程

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:38:13.707

一种（不常见的）解决方案是让您的程序充当网络服务器*和*客户端。这样，您可以使用特殊参数调用程序，这些参数被解释为发送到当前运行程序的命令。然后，您可以创建一个标准的 Ubuntu Unity 热键，该热键使用一个参数来调用您的程序，该参数表示“连接到正在运行的程序并发送命令‘粘贴’”。

当然，您可以利用 dbus 或其他 RPC 框架来执行此操作，而不是将其合并到程序的仅命令行版本中。

# java - 使用 getName() 时如何摆脱文件类型？

> ID：12937924
> 
> 赞同：0
> 
> 时间：2012-10-17T15:33:39.753
> 
> 标签：java

这样做只是因为我很懒。我刚刚编写了一个程序，将我所有的音乐都列在一个 excel 文件中。

```
 import java.io.*;
   import org.apache.commons.io.FileUtils;

      public class NewClass {

        public static void main( String args[] ) 
        {
           File folder = new File("C:/Users/Public/Music/OldMusic");
           File[] listOfFiles = folder.listFiles();

            for (int i = 0; i < listOfFiles.length; i++) {
             try{
                 FileUtils.writeStringToFile(new File("test.xls"), listOfFiles[i].getName(), true);
                 BufferedWriter output;
                 output = new BufferedWriter(new FileWriter("test.xls", true));
                 output.newLine();
                 output.close();
             }
             catch (IOException e){
             }
          }
      }
     } 
```

代码运行良好，但在每首歌曲的结尾都有*.mp3*（即：*Metallica - Nothing Else Matters.mp3*）。

有没有办法让歌曲的名称在结尾不带*.mp3 ？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:39:32.787

由于您已经在使用`FileUtils`，请注意您获得了处理扩展的方法。

见[`FileUtils.removeExtension`](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html#removeExtension%28java.lang.String%29)。

查看代码，您会发现这些处理文件扩展名的方法 - 也`getExtension`, `isExtension`- 都只使用`lastIndexOf`，因此它们只会处理简单的情况，但这应该足以满足您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:36:01.950

采用：

```
String fname = listOfFiles[i].getName();
fname.substring(0, fname.lastIndexOf(".")) 
```

而不是通过..

```
listOfFiles[i].getName() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:36:21.007

```
import java.io.*;
import org.apache.commons.io.FileUtils;

  public class NewClass {

    public static void main( String args[] ) 
    {
       File folder = new File("C:/Users/Public/Music/OldMusic");
       File[] listOfFiles = folder.listFiles();

        for (int i = 0; i < listOfFiles.length; i++) {
         try{
             FileUtils.writeStringToFile(new File("test.xls"), listOfFiles[i].getName().substring(0, listOfFiles[i].getName().indexOf(".mp3")), true);
             BufferedWriter output;
             output = new BufferedWriter(new FileWriter("test.xls", true));
             output.newLine();
             output.close();
         }
         catch (IOException e){
         }
      }
  }
 } 
```

# python - 装饰器在 Python 中制作一组顺序任务？

> ID：12937925
> 
> 赞同：0
> 
> 时间：2012-10-17T15:33:48.060
> 
> 标签：python, scipy, distributed-computing, pipeline

我正在编写一个按顺序执行一组任务的程序。每个任务都是一个输出新文件的函数，但是如果文件名已经存在，则任何给定的任务都不应该执行。我发现自己一遍又一遍地编写这种代码：

```
task1_fname = task1()
# come up with filename for next task
task2_fname = "task2.txt"
if not os.path.isfile(task2_fname):
  # task2 might depend on task1's output, so it gets task1's filename
  task2(task1_fname)
task3_fname = "task3.txt"
if not os.path.isfile(task3_fname):
  task3(...) 
```

基本思想是，如果文件存在（并且理想情况下是非空的），那么您不应该执行生成该文件的任务。

`os.path.isfile`无需每次都编写调用的最佳 Pythonic 方式是什么？装饰者可以更简洁地表达这一点吗？或类似的东西：

```
with task2(task1_fname):
  # continue to next task 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:49:10.587

你在寻找这样的东西吗？

```
def preserve_output(f):
    def wrap(input, output):
        if not os.path.isfile(output):
            f(input, output)
    return wrap

@preserve_output
def task1(input, output):
    ...

@preserve_output
def task2(input, output):
    ...

task1('input', 'output_1')
task2('output_1', 'output_2')
task3('output_2', 'output_3') etc 
```

# matlab - 我可以使用什么 MATLAB 函数“Plot3D”？

> ID：12937926
> 
> 赞同：-5
> 
> 时间：2012-10-17T15:33:48.147
> 
> 标签：matlab, graph, 3d

我是使用 MATLAB 的初学者。我有个问题。
功能

```
f(x; y) = x^2 - 4x + y^2 - y - xy 
```

有一个局部最小值在`f(3; 2) = -7`。
使用 MATLAB 函数`Plot3D`绘制 和的`z = f(x; y)`曲面`x \in [2:5; 3:5]``y \in [1:5; 2:5].`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:45:15.390

可能“网格”是适合您的。有关更多信息，请参阅文档，但您可以尝试：

x=linspace(....);y=...

[x,y]=网格网格(x,y);

z= x^2 - 4*x + y^2 - y - x.*y

网格（x，y，z）

# android - Android 无法针对 API 级别 13 构建

> ID：12937927
> 
> 赞同：0
> 
> 时间：2012-10-17T15:33:49.943
> 
> 标签：android, sdk, admob, manifest

我正在尝试将 Admob 集成到应用程序中。在 Admob 要求针对级别 13 编译项目的情况下，我遇到了同样的问题。我安装了级别 13 SDK，并且清单中的 Admob 活动如下所示：

```
<activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
    </activity> 
```

我将 default.properties 中的目标更改为`target=android-13`.

我在清单中的 sdk 目标看起来像`<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="13" />`

但我仍然收到错误`String types not allowed (at 'configChanges' with value 'keyboard|keyboardHidden|orientation|screenLayout| uiMode|screenSize|smallestScreenSize')`消息，最重要的是，SDK 没有生成我的资源类（my.app.package.R）。我已经清理了项目，重建，重新启动了 Eclipse，我不知道还能做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:49:37.917

较新的 ADT 版本使用`project.properties`，但`default.properties`应该（可能）也可以工作。要排除这部分，请尝试从 UI 更改 API 级别：右键单击项目，选择 Properties->Android，然后选择 API 13。同时构建最新的 API 更可取，因此您可能需要选择 API 16 (Android 4.1）。如果更改似乎没有被采纳，请关闭并重新打开项目。

# android - 应用无法在安卓设备上打开

> ID：12937933
> 
> 赞同：0
> 
> 时间：2012-10-17T15:34:15.567
> 
> 标签：android

我在 Eclipse 中创建了一个非常简单的应用程序，当我在我的设备 (g2x) 上运行它时，它会安装但应用程序没有打开。我还在我的手机中找到了应用程序 .apk 并重新安装了它，但安装后它不会打开。

> [2012-10-17 10:20:44 - 简单按钮] 执行同步
> [2012-10-17 10:20:44 - 简单按钮] 自动目标模式：使用设备 '0428000541a032d7'
> [2012-10-17 10:20 :44 - 简单按钮] 将简单按钮.apk 上传到设备'0428000541a032d7' [2012-10-17 10:20:44 - 简单按钮] 安装简单按钮.apk... [2012-10-17 10:20:47 - 简单的按钮] 成功！[2012-10-17 10:20:47 - 简单按钮] \Simple button\bin\Simple button.apk 安装在设备上 [2012-10-17 10:20:47 - Simple button] 完成！

这是来自 Eclipse 的控制台代码

```
10-17 10:45:00.048: D/Beautiful Widgets(4100)(6043): WidgetRefreshService
10-17 10:45:00.048: D/test(6043): else
10-17 10:45:00.097: D/dalvikvm(6043): GC_CONCURRENT freed 396K, 48% free 3405K/6471K, external 26K/512K, paused 2ms+1ms
10-17 10:45:00.117: D/dalvikvm(6043): GC_FOR_MALLOC freed 377K, 48% free 3405K/6471K, external 51K/512K, paused 18ms
10-17 10:45:10.197: D/AndroidRuntime(19168): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
10-17 10:45:10.197: I/AndroidRuntime(19168): Heap size: -Xmx48m
10-17 10:45:10.197: D/AndroidRuntime(19168): CheckJNI is OFF
10-17 10:45:10.197: D/dalvikvm(19168): creating instr width table
10-17 10:45:10.347: D/AndroidRuntime(19168): Calling main entry com.android.commands.pm.Pm
10-17 10:45:10.357: D/AndroidRuntime(19168): Shutting down VM
10-17 10:45:10.357: D/dalvikvm(19168): GC_CONCURRENT freed 103K, 70% free 308K/1024K, external 0K/0K, paused 0ms+0ms

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.simple.button"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Mainscreen"
            android:label="@string/title_activity_mainscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.dev.gup" />
        </activity>
    </application>

</manifest> 
```

这是清单，这是正确的吗？到目前为止，除此之外，注意到确实发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:52:24.250

发生这种情况是因为从 Eclipse 安装应用程序时，会打开`Activity`具有操作的默认应用程序。`android.intent.action.MAIN`可能您的应用程序意外丢失了这个`Activity`。转到清单文件并确保 main`Activity`具有这种意图过滤器：

```
<intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

希望这可以帮助。

# java - 向 Guava ImmutableList 添加和删除项目

> ID：12937938
> 
> 赞同：15
> 
> 时间：2012-10-17T15:34:30.070
> 
> 标签：java, guava

在 Guava 中，是否有一种有效的方法来添加或删除项目`ImmutableList`（当然，在此过程中创建新列表）。

我能想到的最简单的方法是：

```
private ImmutableList<String> foos = ImmutableList.of();

public void addFoo(final String foo) {
    if (this.foos.isEmpty()) {
        foos = ImmutableList.of(foo);
    } else {
        foos = ImmutableList.<String>builder().addAll(foos).add(foo).build();
    }
}

public void removeFoo(final String foo) {
    final int index = this.foos.indexOf(foo);
    if (index > -1) {
        final Builder<String> builder = ImmutableList.<String>builder();
        if (index > 0) builder.addAll(this.foos.subList(0, index));
        final int size = this.foos.size();
        if (index < size - 1) builder.addAll(this.foos.subList(index+1, size));
        this.foos = builder.build();
    }
} 
```

我想避免这样做的是：

```
public void removeFoo(final String foo) {
    final ArrayList<String> tmpList = Lists.newArrayList(this.foos);
    if(tmpList.remove(foo))this.foos=ImmutableList.copyOf(tmpList);
} 
```

但不幸的是，它比我能想到的任何仅 Guava 的方法都简单得多。我错过了什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T17:13:26.600

您可以通过过滤来移除，它不会创建中间件`ArrayList`或构建器，并且只会遍历列表一次：

```
public void removeFoo(final String foo) {
    foos = ImmutableList.copyOf(Collections2.filter(foos,
            Predicates.not(Predicates.equalTo(foo)));
} 
```

对于添加，我没有看到更好的解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T21:35:59.273

与`ConcurrentModificationException`并发和同步无关。同时访问一个可变的`List`可能会破坏它和/或抛出异常（准备好所有 3 种可能性）。您的代码不能以这种方式失败，但是对于多线程它也不起作用：

*   没有同步也没有`foos`存在`volatile`，就不能保证另一个线程会看到你所做的更改。
*   即使使用`volatile`，也可能会丢失一些更改，例如，当两个线程向 中添加一个项目时`foos`，它们都可以从原始值开始，然后最后写入的那个获胜（并且只有它的项目被添加）。

您试图避免的代码是不可避免的。

*   *“我必须创建多余的中间集合”* - 是的，但没有免费的午餐：
    *   提前确定结果的大小，这意味着对整个列表进行额外的迭代
    *   或分配足够大的数组并在结果列表中复制所需的范围
    *   或者分配一个足够大的数组并只使用它的一部分（节省时间和浪费内存）
    *   或创建一个不可变视图（节省时间和内存，但以后可能会浪费时间）
*   AFAIK Frank 的答案实现了第一种可能性，如果谓词很快，这很好。
*   *“我必须将 java.util Collections 与 guava ImmutableCollections 混合使用，而我想坚持一种范式。”* - 是的，但是为了改变集合，需要一个可变集合。涵盖了最`ImmutableList.Builder`常见的情况，允许以紧凑的方式处理它们。

您可能想查看针对此类操作进行了优化的[持久性集合。](https://stackoverflow.com/questions/8575723/whats-a-good-persistent-collections-framework-for-use-in-java)但是，您不应期望持久列表与`ArrayList`or一样快`ImmutableList`。

# jquery - jvectormap：如何在标记标签/工具提示中实现 HTML 而不是简单的字符串？

> ID：12937946
> 
> 赞同：13
> 
> 时间：2012-10-17T15:34:58.993
> 
> 标签：jquery, jquery-plugins, plugins, tooltip, jvectormap

我刚刚实现了 jQuery 插件**[jvectormap](http://jvectormap.com/)**，用于世界地图。一切正常，除了这个可能......我添加了一些标记，并一直在尝试将 HTML 实现到标记标签/工具提示。因此，当悬停标记时，我希望显示图像/html，而不仅仅是“blabla”。

我怎样才能达到这个结果？

**这是初始化JS：**

```
$('#map').vectorMap({
    markerStyle: {
      initial: {
        fill: '#F8E23B',
        stroke: '#383f47'
      }
    },
    backgroundColor: '#383f47',
    markers: [
      {latLng: [46.90, 8.45], name: "<img src=\"img/logo.png\">"}
    ],
...(other code isn't important)... 
```

重要的部分是**`name: "<img src=\"img/logo.png\">"`**

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T01:07:16.267

如果您想自定义鼠标悬停在标记上时显示的标签/工具提示，您应该为**[onMarkerLabelShow](http://jvectormap.com/documentation/javascript-api-v1/jvm-worldmap/)**提供一个函数。

> **onMarkerLabelShow** 函数`(Event e, Object label, String code)`将在标记标签显示之前被调用。

例如：

```
$('#map').vectorMap({
    markerStyle: {
      initial: {
        fill: '#F8E23B',
        stroke: '#383f47'
      }
    },
    backgroundColor: '#383f47',
    markers: [
      {latLng: [46.90, 8.45], name: "My marker name"}
    ],
    onMarkerLabelShow: function(event, label, code) {
     label.html("<img src=\"img/logo.png\"><br>"+ label.html());                
    }
}); 
```

# html - 捕捉丢失 div 的工具？

> ID：12937951
> 
> 赞同：0
> 
> 时间：2012-10-17T15:35:19.133
> 
> 标签：html

是否有任何工具可以检查我们的`HTML`代码是否缺少任何`div`. 或者有没有一种方法可以轻松做到这一点而不会发脾气和沮丧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:37:11.967

[W3C 标记验证服务](http://validator.w3.org/)将检查许多问题。如果您有`</div>`没有匹配的 a `<div>`，它将捡起它。

# objective-c - 根据 NSFetchedResultsController 所属的关系对 NSFetchedResultsController 进行排序

> ID：12937954
> 
> 赞同：0
> 
> 时间：2012-10-17T15:35:24.323
> 
> 标签：objective-c, ios, core-data, nssortdescriptor

iOS6 不支持带有自定义块的排序描述符，所以我需要想出另一种方法来做到这一点：

Student 实体可以属于以下两个集合之一：`confirmedClasses`或`pendingClasses`。我想用以下谓词获取学生：

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ANY confirmedClasses.classId== %@
    OR ANY pendingClasses.classId == %@", currentClass.classId, currentClass.classId]]; 
```

因此，用户可以是班级中已确认的学生，也可以是待定学生。我想要的是对结果进行排序，以便首先列出所有已确认的学生，并在所有已确认的学生之后列出待处理的学生。

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:07:33.497

我只使用两个谓词，复合用于获取，并用于过滤结果：

```
NSPredicate *confirmed = [NSPredicate predicateWithFormat:@"ANY confirmedClasses.classId== %@,currentClass.classId];

NSPredicate *pending = [NSPredicate predicateWithFormat:@"ANY pendingClasses.classId== %@,currentClass.classId];

NSArray *predicates = [NSArray arrayWithObjects:confirmed,pending,nil];

[fetchRequest setPredicate:[NSCompoundPredicate orPredicateWithSubpredicates:predicates]];

//Perform fetch into an array called 'results'

NSArray *filteredConfirmed = [results filteredArrayUsingPredicate:confirmed];
NSArray *filteredPending = [results filteredArrayUsingPredicate:pending];

NSArray *sortedResult = [filteredConfirmed arrayByAddingObjectsFromArray:filteredPending]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:10:09.167

为什么不只进行两次单独的提取？这样一来，您将把所有已确认的学生放在一个数组中，将所有待处理的学生放在另一个数组中。按您想要的顺序连接两个组比全部检索它们然后根据状态对它们进行排序更容易。

# magento - Magento Admin 凭据无效错误

> ID：12937955
> 
> 赞同：0
> 
> 时间：2012-10-17T15:35:27.053
> 
> 标签：magento, admin

我在 magento 网站的管理部分输入了正确的凭据，但仍然得到**无效的用户名/密码**

我登录了 cPanel，进入 phpMyAdmin 并更改了数据库本身的密码（MD5），但仍然出现相同的错误。

以下行与它有什么关系

`php_value memory_limit 128M`

迁移到新主机后，我不得不从我的**.htaccess**文件中删除它，因为它产生 500 错误并且新主机问我这样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:58:52.960

您可以通过运行以下查询来更改密码：

```
UPDATE admin_user SET password=CONCAT(MD5('qXpassword'), ':qX') WHERE username='admin'; 
```

`qX`是盐，因此您可以将其更改为您想要的任何内容，只需确保在查询中的两个位置都进行更改，并且`'admin'`显然是用户名，因此请将其更改为您的任何用户名。

# jquery - 在中心启动slidingdiv脚本

> ID：12937957
> 
> 赞同：0
> 
> 时间：2012-10-17T15:35:34.187
> 
> 标签：jquery, jquery-plugins, scroll, center

我有一个用于项目的脚本，但有一些奇怪的问题。

*   它的一个问题是我不能从绝对中心开始，我只能从左边开始：xx px 位置。
*   第二个问题是有时移动背景有效，有时无效。刷新后。（尝试刷新 F5、浏览器刷新符号、主页按钮） FF 和 IE9 有效，Safari 和 chrome 并非一直有效。

这是项目：tinyurl.com/bogwvle/

这是告诉从左侧 xx 位置开始的脚本。

```
$(函数(o){  
    o = $("#overscroll").overscroll({
      cancelOn: '.no-drag',
            //hoverThumbs: true,
            //persistThumbs: true,
            //showThumbs: false,
            向左滚动：500，
            滚动顶部：200
        }).on('overscroll:dragstart overscroll:dragend overscroll:driftstart overscroll:driftend', function(event){
            控制台日志（事件类型）；
        });
        $("#link").click(function(){
            如果（！o.data（“拖动”））{
                console.log("点击了！");
            } 别的 {
                返回假；
            }
        });
});

```

有谁知道如何解决这些问题之一？

# spring - Karaf 2.3 Camel 2.10：是否可以切换到 Spring 3.1？

> ID：12937959
> 
> 赞同：0
> 
> 时间：2012-10-17T15:35:43.993
> 
> 标签：spring, apache-camel, apache-karaf

是否可以在 Karaf 2.3 上使用 Spring 3.1 而不必担心破坏任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:35:30.463

我在这个问题上有点挣扎。基本上我们使用的是 Camel 2.10.1、Spring Integration 2.1.3.RELEASE（是的，我知道两个集成框架），我们使用的是 Spring 3.1.2.RELEASE、activemq 5.7.0 和 Karaf 2.3.0。正如克劳斯所说，OSGi 总是令人担忧，尤其是当您无法控制时

1.  第三方 OSGi 清单
2.  Karaf 特征描述符（这不那么令人担心，因为您可以通过创建自定义分布来解决这个问题）。

我们还使用 Spring DM，因此您基本上可以使用三种 Spring 版本 3.0、3.1 和 2.5.6。您最终可以安装三个版本的 spring-core，例如通过传递依赖解析或其他方式，并且取决于启动顺序等，您可能会遇到讨厌的“使用”约束，这总是很痛苦，有时不容易解决.

我们最终做的是与 Karaf 保持一致并放弃 Spring 3.1.2.RELEASE 以支持 3.0.7，这在我们的案例中很容易，因为 3.0.7 很好。

一般来说，我发现与容器提供的开箱即用的内容保持一致是处理依赖项的合理策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:30:40.040

使用 OSGi 总是让人担心 :(

Camel 支持 Spring 3.0 和 3.1。所以从骆驼的角度来看，你应该没问题。Karaf 随 Spring 3.0.7 开箱即用，您需要重新配置 Karaf 以使用 Spring 3.1.x。

恕我直言，这是错误的（例如，Karaf 开箱即用地公开 Spring 3.0.7），因为我认为 Karaf 不应强迫用户使用特定的 Spring 版本。但是让最终用户自由选择他们想要使用的 Spring。甚至根据容器中部署的应用程序的需要，让 Spring 3.0、3.1 和 3.2 并排运行。或者至少 Karaf 应该恕我直言，更容易选择开箱即用的 Spring 版本。

Karaf @dev 邮件列表上有关于这个问题的讨论，以及如何解决这个问题。 [http://karaf.922171.n3.nabble.com/Apache-Karaf-2-3-0-very-close-tp4026295.html](http://karaf.922171.n3.nabble.com/Apache-Karaf-2-3-0-very-close-tp4026295.html) 和这里 [http://karaf.922171.n3.nabble.com/Re-3rd -Party-Feature-Definitions-tp4026366.html](http://karaf.922171.n3.nabble.com/Re-3rd-Party-Feature-Definitions-tp4026366.html)

当 Karaf 团队在那里列出时，请在这些邮件列表中提高您的声音！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:04:39.620

好吧，Karaf 2.3.0 提供了 Spring31 功能。将其作为可选功能提供可能不是最佳选择，但现在标准。关于 2.3.0 系列的 spring 特性是 spring 3.0.x 特性。对于开箱即用的支持，您需要稍等一下 Karaf 3.0

# php - symfony2 - 输出 pdf 页面

> ID：12937960
> 
> 赞同：1
> 
> 时间：2012-10-17T15:35:49.347
> 
> 标签：php, symfony

我正在尝试创建一个将返回 pdf（HTML 到 PDF）的操作。

我的 twig 文件中有一个按钮，它在 AJAX 中调用路由模式，该模式将调用下一个控制器操作：

```
public function pageToPDFAction(){
    $html = file_get_contents("http://www.google.com");      
    $headers = array(
        'Content-type' => 'application/pdf'
    );
    $response = new Response($html,200,$headers);
    return $response;
} 
```

我得到的输出实际上是 google.com 网站，但我想要得到的是浏览器打开一个 pdf 文件，就像单击 pdf 文件时发生的那样。

我怎样才能做到这一点？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:43:23.143

您可以使用[KnpSnappyBundle](https://github.com/KnpLabs/KnpSnappyBundle)。它使用 webkit 引擎从您的 html 文档创建 pdf 或图像文件。`README`您可以在文件中查看示例代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-17T18:10:30.357

我在几个项目中成功使用了 psliwa 的**[PHPPdf](https://github.com/psliwa/PHPPdf)**，并且对它的工作方式非常非常满意。一定要检查一下...

# php - MySQL GROUP BY 和条件

> ID：12937961
> 
> 赞同：0
> 
> 时间：2012-10-17T15:35:51.150
> 
> 标签：php, mysql, database, codeigniter, group-by

我想对下表进行分组并在检查选项值时返回parts_number。也就是说，对于具有相同parts_number 的部件，将相同的选项值组合在一起。不能将parts_number 与不同的选项值混合。

```
parts | parts_number | option
A | 100 |1
B | 120 |1
A | 100 |0
C | 110 |1
B | 120 |1
C | 110 |0
A | 100 |0
A | 100 |0
A | 100 |1 
```

在上述情况下，我的结果应该返回如下行：

```
parts | parts_number | option
A | 100 |1
B | 120 |1
A | 100 |0
C | 110 |1
C | 110 |0

A => 2
B => 1
C => 2 
```

注意分组，而不是混合不同选项的部分。我曾尝试按parts_number 分组，但我也陷入了必须满足我的选择的地步。

我正在使用 PHP (CodeIgniter) 和 MySQL。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:39:06.187

```
SELECT parts, parts_number, option
FROM parts
GROUP BY parts, parts_number, option 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:44:04.733

我同意[@YogendraSingh 的回答](https://stackoverflow.com/a/12938020)；但是很难从您的问题中判断您是否（也？）想要分组结果的计数，可以通过以下方式获得：

```
SELECT parts, COUNT(DISTINCT parts_number, option) FROM my_table GROUP BY parts 
```

# c++ - 以纳秒为单位获取本地时间

> ID：12937963
> 
> 赞同：26
> 
> 时间：2012-10-17T15:36:01.997
> 
> 标签：c++, boost, time, benchmarking

> **可能重复：**
> [C++ Timer 函数以纳秒为单位提供时间](https://stackoverflow.com/questions/275004/c-timer-function-to-provide-time-in-nano-seconds)

我需要以纳秒分辨率测量函数执行的持续时间。可能吗？我们普通的计算机硬件和软件能够给出这样的时间精度吗？如果是，如何用 C++ 来实现？Boost库可以吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-17T15:44:25.887

是的，今天大多数硬件都支持这种分辨率，C++ 标准库也有一个 API 可以支持它。不幸的是，并非所有 C++ 实现都确实提供了它。

API是[`<chrono>`](http://en.cppreference.com/w/cpp/chrono)C++11中引入的库：

```
#include <iostream>
#include <chrono>

int main() {
    auto start = std::chrono::high_resolution_clock::now();

    // operation to be timed ...

    auto finish = std::chrono::high_resolution_clock::now();
    std::cout << std::chrono::duration_cast<std::chrono::nanoseconds>(finish-start).count() << "ns\n";
} 
```

达尔文的 libc++ 中的`<chrono>`实现提供了纳秒级的分辨率，但似乎 VS2012 中的实现只达到了十分之一毫秒。上面的代码仍然会以纳秒为单位给出时间，但小于 100 微秒的时间最终将为零纳秒。

Boost 还提供了一个实现，boost::chrono，它似乎在 Windows 上使用纳秒。它也可用于 C++03。

```
#include <boost/chrono.hpp>

int main() {
    boost::chrono::high_resolution_clock::time_point t1 =
        boost::chrono::high_resolution_clock::now();

    boost::chrono::high_resolution_clock::time_point t2 =
        boost::chrono::high_resolution_clock::now();

    std::cout << boost::chrono::duration_cast<boost::chrono::nanoseconds>(t2-t1) << "\n";
    // boost chrono has more advanced output, .count() isn't needed, nor is manually writing out the units
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:41:03.703

我不确定您是否正在寻找时钟或 difftime，但其中之一应该是您正在寻找的：

[http://www.cplusplus.com/reference/clibrary/ctime/clock/](http://www.cplusplus.com/reference/clibrary/ctime/clock/)

[http://www.cplusplus.com/reference/clibrary/ctime/difftime/](http://www.cplusplus.com/reference/clibrary/ctime/difftime/)

您可以在函数之前和之后使用它并比较运行时的差异以查看函数的整体运行时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T15:42:03.040

使用 Windows API 可以做的最好的事情是[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904.aspx)。[您可以使用QueryPerformanceFrequency](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905.aspx)获得其分辨率。视情况而定，这可能是使用 CPU 的 RDTSC 指令，在这种情况下，频率基本上是 CPU 的时钟频率。在其他情况下，它使用频率为 1.024 MHz 的单独时钟，因此分辨率基本为 1 微秒。

C++11 添加了一个`chrono`可能也有用的类——假设您使用的是已经拥有它的编译器。如果您的编译器不提供实现，[Boost Chrono](http://www.boost.org/doc/libs/1_51_0/doc/html/chrono/reference.html)是一个合理的替代品，适用于大多数现有的编译器/库。同样，不能保证它会提供纳秒级分辨率，但我希望在 Windows 上它可能是 QPC/QPF 的便携式包装器，因此它可能会提供与它们相同的分辨率，只是更便携。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:50:21.047

当然还有旧的[Boost::date_time](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time/posix_time.html#date_time.posix_time.ptime_class)：

```
#include <boost/date_time/posix_time/posix_time.hpp>

boost::posix_time::ptime date_time = boost::posix_time::microsec_clock::universal_time(); 
```

不过，只有微秒。

# android - Twitter4j：如何删除转推

> ID：12937964
> 
> 赞同：0
> 
> 时间：2012-10-17T15:36:04.163
> 
> 标签：android, twitter4j

我有一条已由经过身份验证的用户转发的推文的 ID。

如何使用 Twitter4j 删除转推？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:32:03.100

不幸的是，没有直接的方法可以删除转推状态。Twitter API 根本没有实现该功能。

一种选择是记住所有转发的状态 ID，或者您必须通过调用[`getRetweetedByMe()`](http://twitter4j.org/en/oldjavadocs/2.2.6/twitter4j/TwitterImpl.html#getRetweetedByMe%28%29)（[Twitter API 文档](https://dev.twitter.com/docs/api/1/get/statuses/retweeted_by_me)）并遍历列表来获取所有转发。

例子：

```
List<Status> retweets = twitter.getRetweetedByMe();
for (Status retweet : retweets) {
    if(retweet.getRetweetedStatus().getId() == ID_OF_TWEET_YOU_DONT_WANT_TO_RETWEET_ANYMORE)
        twitter.destroyStatus(retweet.getId());
} 
```

# c# - 将 UTC 日期时间转换为本地日期时间

> ID：12937968
> 
> 赞同：20
> 
> 时间：2012-10-17T15:36:16.577
> 
> 标签：c#, datetime, utc

我有以下 ASP.Net MVC 控制器方法：

```
public ActionResult DoSomething(DateTime utcDate)
{
   var localTime = utcDate.ToLocalTime();
} 
```

问题是 localTime 将具有与 utcDate 完全相同的值。我认为这是因为 utcDate 不知道它具有 UTC 值。所以我的问题是如何将 utcDate（我知道是 UTC）转换为本地？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-17T15:39:23.163

如果您*知道*`DateTime`包含 UTC 值，则可以使用以下[内容](http://msdn.microsoft.com/en-us/library/system.datetime.specifykind.aspx)：

```
DateTime iKnowThisIsUtc = whatever;
DateTime runtimeKnowsThisIsUtc = DateTime.SpecifyKind(
    iKnowThisIsUtc,
    DateTimeKind.Utc);
DateTime localVersion = runtimeKnowsThisIsUtc.ToLocalTime(); 
```

例如，在我当前的应用程序中，我使用 SQL 在我的数据库中创建时间戳`utcnow`，但是当我将它们读入我的 C# 应用程序时，`Kind`属性总是`Unknown`. 我创建了一个包装函数来读取时间戳，故意将其设置`Kind`为`Utc`，然后将其转换为本地时间 - 基本上如上所述。

请注意，[`DateTime.ToLocalTime()`](http://msdn.microsoft.com/en-us/library/system.datetime.tolocaltime.aspx)仅当以下一项（或两项）成立时才不会影响该值：

*   的属性`DateTime`是`Kind``DateTimeKind.Local`
*   您当地的时区是这样的，“没有变化”是正确的转换

我认为我们可以假设第二点是不正确的。因此，似乎`iKnowThisIsUtc`'`Kind`属性已设置为`Local`。您需要弄清楚为什么向您提供这些`DateTime`s 的任何东西都认为它们是本地的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T15:38:49.670

尝试以下操作：

```
public static DateTime UtcToPacific(DateTime dateTime)
        {
            return TimeZoneInfo.ConvertTimeFromUtc(dateTime, TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time"));
        } 
```

显然将太平洋更改为您当地的时区。

如果您想了解您的机器上存在哪些时区，请参阅以下链接：http: [//msdn.microsoft.com/en-us/library/bb397781.aspx](http://msdn.microsoft.com/en-us/library/bb397781.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T15:45:13.547

如 MSDN 所述，您需要 Date 的 Kind 属性为 UTC，以便 ToLocalTime() 工作（并将日期转换为本地时间。http: [//msdn.microsoft.com/en-us/library/system .datetime.tolocaltime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.tolocaltime.aspx)

试试这个：

```
utcDate = DateTime.SpecifyKind(utcDate, DateTimeKind.Utc);
var localTime = utcDate.ToLocalTime(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:43:12.133

或这个：

```
var localTime = new DateTimeOffset(utcDate,TimeSpan.FromHours(0))
                    .ToLocalTime().DateTime; 
```

# php - Zend：在每次页面加载时调用一个动作

> ID：12937975
> 
> 赞同：2
> 
> 时间：2012-10-17T15:36:47.467
> 
> 标签：php, zend-framework, frameworks

我正在尝试使用 Zend Framework 中的 cookie 完成永久登录。
因此，如果设置了特定的 cookie，我想检查每个页面加载，如果是这样`loginAction`，我`IndexController`的（操作工作正常）中的那个调用从 cookie 传递两个参数。

我有两个问题：

**1.我应该在哪里放置函数调用以便每次都执行？Bootstrap.php、layout.phtml、index.php 还是其他地方？**

**2.如何在传递参数`loginAction`的同时从外部调用`IndexController`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:56:41.487

我认为在这种情况下插件会更合适。

> preDispatch() 在调度程序调度操作之前调用。此回调允许代理或过滤器行为。通过改变请求并重置它的调度标志（通过 Zend_Controller_Request_Abstract::setDispatched(false)），可以跳过和/或替换当前操作。

[http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html](http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:48:05.673

1.  绝对不是 layout.phtml （您的视图最好只有 HTML 输出）。如果您的应用程序有多个引导程序，您可以将此函数放在 index.php 中，这样您就不会在不同的引导程序中拥有相同的代码。如果您只有一个引导程序，请在那里调用该函数。

2.  `IndexController::loginAction($param1, $param2);`

# objective-c - 等待 NSURLConnection 委托完成

> ID：12937976
> 
> 赞同：1
> 
> 时间：2012-10-17T15:36:48.370
> 
> 标签：objective-c, ios, cocoa-touch, nsurlconnection

我有以下顺序：

1.  启动 MBProgressHUD 微调器
2.  使用 NSConnectionURL 下载多个图像并实现 connectionDidFinishLoading 委托以显示图像
3.  下载所有图像后停止微调器并显示包含所有图像的父视图

我应该如何实施`connectionDidFinishLoading:`以确定是否下载了所有图像以便我可以停止微调器？

我应该跟踪下载次数，但是线程安全呢？

还是我应该看GCD？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:43:32.600

我将使用`NSOperationQueue`并提交下载作为具有同步`NSURLConnection`请求的单独块操作。您可以在那里设置最大并发操作数，这样您就不会一次下载所有内容，并且可以免费取消。跟踪完成可以简单地通过向队列提交另一个操作来完成——最后提交的操作将在所有下载完成后运行。不过，这可能需要将并发操作的数量限制为一个，因此另一种方法是监视（KVO）剩余操作的数量。当它下降到零时，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:24:01.577

> 我应该如何实现 connectionDidFinishLoading: 以确定是否下载了所有图像以便我可以停止微调器？

我会通过跟踪活动连接的数量来做到这一点。您可以将连接本身保存在一个可变数组中并在它们完成时将其删除，或者在连接开始时增加一个计数器并在它们完成时减少它。无论哪种方式，当活动连接数达到零时，您都会删除微调器。

# spring - 在 apache tomcat 6.0.14 中使用 spring 3 最新源

> ID：12937977
> 
> 赞同：0
> 
> 时间：2012-10-17T15:36:49.057
> 
> 标签：spring, hibernate, tomcat, spring-security

最新的 spring 3 框架是否与 apache tomcat 应用程序服务器 - 版本 6.0.14 兼容？

我可以与最新版本的spring一起使用最好的hibernate版本。

在 spring 3 应用程序设置中使用配置 xml 文件而不是代码中的 @configuration 注释可以吗？

请分享你的想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:43:42.460

是的 - Spring 3 可以与 Tomcat 6.0.14 版一起正常工作。

休眠 4.1.7 应该可以正常工作。是的，您可以使用 XML 配置而不是注释，我在 Spring 和 Tomcat 中都使用过，它工作正常。

老实说，我发现我更喜欢注释，因为 XML 往往会很快被侵蚀，并且在初始创建后的几个月内都不会被触及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:43:52.163

*spring 3 框架兼容 apache tomcat 6* **是的。**

*hibernate* **4 的最佳版本，最新最好的。**

***使用配置xml文件可以***吗？**

 ***（顺便说一句，tomcat 不是一个成熟的应用程序服务器，那就是 jboss glassfish 等）***

# php - 从 php 文件运行 phpunit 测试用例文件

> ID：12937979
> 
> 赞同：0
> 
> 时间：2012-10-17T15:36:49.353
> 
> 标签：php, selenium, console, phpunit

我目前正在使用 phpunit 使用 selenium 执行一些自动化任务。我想在客户端从 javascript 的 ajax 调用中调用 phpunit 文件。问题是 phpunit 测试用例文件只能通过使用控制台命令“phpunit filename.php”运行。如果我在 ajax 调用中运行测试用例文件，我猜它会被解释为普通的 php 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:34:02.973

我从未尝试过，但您可以使用：

```
passthru('phpunit --colors yourfilehere.php') 
```

或`èxec`功能系列之一（http://www.php.net/manual/en/ref.exec.php）但是..请..首先评估更好的方法并小心使用它们，以免您失去对你的服务器。如果可能的话，我倾向于不使用这些功能。

# python - Tornado/python 中的 if else 语句

> ID：12937988
> 
> 赞同：1
> 
> 时间：2012-10-17T15:37:17.737
> 
> 标签：python, if-statement, tornado

我在 Tornado 中有这个 python 代码：

```
if not usr:
    self.lock_tables("write", ['devices_permissions'])
        self.db.execute("INSERT devices_permissions SET user_id=%s, network_id=%s, device_id=%s, perm=%s",
                         usrid, netid, sensid, perm)
        self.unlock_tables();

    else:

      if perm == 0:
        self.lock_tables("write", ['devices_permissions'])
        self.db.execute("DELETE FROM devices_permissions \
                         WHERE user_id=%s AND device_id=%s", usrid, sensid)
        self.unlock_tables();

      else:
        self.lock_tables("write", ['devices_permissions'])
        self.db.execute("UPDATE devices_permissions SET perm=%s \
                         WHERE user_id=%s AND device_id=%s", perm, usrid, sensid)
        self.unlock_tables(); 
```

我对第二个*if...else*语句有疑问。我的程序进入第一个 else 块，但在第二个*if...else*似乎无法使用*if perm == 0*语句。我已经打印了*perm*变量，它的值为 0。所以我不知道错误在哪里。

我想要这个*if...else*语句，因为我想从我的数据库中删除不再拥有设备权限的用户。

*perm*是值为 0 或 1 的变量。*usr*是用户列表。非常感谢你。

**编辑**

我以这种方式更改语句：

```
# Check whether the user has already priviledges on the device
    self.lock_tables("read", ['devices_permissions'])
    usr = self.db.get("SELECT device_id, user_id FROM devices_permissions \
                              WHERE user_id=%s AND device_id=%s", usrid, sensid)
    self.unlock_tables();

    if not usr:
    self.lock_tables("write", ['devices_permissions'])
        self.db.execute("INSERT devices_permissions SET user_id=%s, network_id=%s, device_id=%s, perm=%s",
                         usrid, netid, sensid, perm)
        self.unlock_tables();

    elif perm == 0:
        self.lock_tables("write", ['devices_permissions'])
        self.db.execute("DELETE FROM devices_permissions \
                         WHERE user_id=%s AND device_id=%s", usrid, sensid)
        self.unlock_tables();          

    else:
        self.lock_tables("write", ['devices_permissions'])
        self.db.execute("UPDATE devices_permissions SET perm=%s \
                         WHERE user_id=%s AND device_id=%s", perm, usrid, sensid)
        self.unlock_tables(); 
```

经过一些测试，我认为程序总是在 if not usr 语句中输入，如果 usr 列表不为空。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:21:29.723

会不会`perm`是*字符串*零而不是整数零？如果是这样，测试`perm == 0`将失败。您可以使用打印语句来回答这个问题：

```
print type(perm) 
```

如果它打印`<type 'str'>`，那是你的问题。

# database - 提交到数据库时访问 Itemrenderer 中的 DataField 值

> ID：12937992
> 
> 赞同：1
> 
> 时间：2012-10-17T15:37:34.087
> 
> 标签：database, apache-flex, itemrenderer, datefield, datafield

我真的坚持这个。我在管理 DateField 的 Datagrid 中设置了一个 Itemrenderer。用户可以直接在数据网格中输入日期和其他值。当他们单击“提交”时，我想在数据库中填充一行，并且为此设置了服务。在数据库中创建了一行，其中包含来自数据网格的所有值，如预期的那样，但是尽管用户输入了一个值，但并未填充日期。下面是一个代码片段：

数据网格

```
<s:GridColumn dataField="datf" headerText="Period From" rendererIsEditable="true">
<s:itemRenderer>
  <fx:Component>
       <s:GridItemRenderer dataChange="updateRenderer()">
            <fx:Script>
                 <![CDATA[
                           public function updateRenderer():void {
                                periodFrom.text = outerDocument.dtf1.format(data.datf);
                           }

                           private function dateField_labelFunc(item:Date):String {
                                return outerDocument.dtf1.format(item);
                           }
                 ]]>
            </fx:Script>
                 <mx:DateField horizontalCenter="0" verticalCenter="0" width="90%" id="periodFrom" labelFunction="dateField_labelFunc"/>
       </s:GridItemRenderer>
  </fx:Component> 
```

处理程序

```
protected function createBillResult_resultHandler(event:ResultEvent):void
        {
            var dataProvider = itemsDg.dataProvider;
            var item = null;

            for (var i:int = 0; i < dataProvider.length; i++){
                item = dataProvider.getItemAt(i);
                trace(item.datf);<!--WHAT SHOULD GO HERE-->
                billItems.lnid = item.lnid;
                billItems.days = item.days;
                billItems.ratu = item.ratu;
                createBillItemsResult.token = billingService.createBillItems(billItems);
            }
        } 
```

我原以为我可以使用 dataField 属性从 itemrenderer 访问值，就像我对其他项目所做的那样，尽管这些不是 itemrenderers，但 trace(item.datf) 只返回“未定义”。我使用了错误的语法吗？

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:40:56.860

您的 itemRenderer 中没有将数据传输回数据对象的函数。但是，DateField 实现了 IDataRenderer 和 IDropInListItemRenderer，所以我怀疑如果您删除 GridItemRenderer 包装器，这将按预期工作。似乎他们已经从 spark datagrid 中删除了 labelFunction（奇怪的是，它有一个 dataTipFunction），因此您可能需要像扩展 GridItemRenderer 一样稍微扩展 DateField 以使其工作。

* * *

编辑以回答更多问题，请查看[Spark DataGrid 中 labelFunction 的替代品是什么？](https://stackoverflow.com/questions/6029922/what-is-the-replacement-for-labelfunction-in-spark-datagrid)

# c# - 使用企业库从库创建时工作流活动引发异常

> ID：12937995
> 
> 赞同：2
> 
> 时间：2012-10-17T15:37:43.680
> 
> 标签：c#, .net, workflow-foundation-4, enterprise-library

我有两个非常简单的测试项目。一个是库 (TestClassLibrary)，它只包含简单的工作流活动，如 MyTestActivity.xaml。另一个项目（TestUnitProject）是由一个方法和一个测试行组成的单元项目 var test = new TestClassLibrary.MyActivities.MyTestActivity(); 它工作正常。

但是，如果我通过企业库中的 nuget 程序集添加到我的库（TestClassLibrary）中，我总是会遇到运行时异常

喜欢

> 无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.Common，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

这可能是什么原因造成的？据我所知，图书馆是存在的。

PS：工作流4.0、企业库5.0、Visual Studio 2012