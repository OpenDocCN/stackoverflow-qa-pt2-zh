# StackOverflow 问答 13702000-13702999

# android - 将音频文件重叠为一个

> ID：13702000
> 
> 赞同：0
> 
> 时间：2012-12-04T11:36:40.867
> 
> 标签：android, audio

我需要创建一个带有两个音频文件作为输入的音频文件。也就是说，一个具有语音的音频文件和另一个具有背景音乐的音频文件，我想混合这些文件并输出第三个（混合）文件。我用谷歌搜索了过去两天，但没有发现有用的东西。请给我一些建议。谢谢。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:41:08.983

You can try to use FFMPEG util compiled for Android to merge two audio files to one file, but it's pretty hard to compile it and also you will need to write wrapper class to run it on Android like from command line.

# clojure - 如何使用 clojure-liberator 实现用户认证？

> ID：13702003
> 
> 赞同：8
> 
> 时间：2012-12-04T11:36:45.460
> 
> 标签：clojure, liberator

我不太了解[https://github.com/clojure-liberator/liberator](https://github.com/clojure-liberator/liberator)以及它提供给开发人员的决策点列表。如何使用/与/在库顶部实现基本的身份验证/身份验证服务？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-06T21:55:59.787

惯用的方法是实现`:authorized?`决策点。但是，目前不支持处理基本或摘要身份验证。一种实用的方法是`ring-basic-authentication`用于身份验证并仅处理资源中的授权。以下示例使用 ring-basic-authentication 并将令牌设置为用户角色。然后这个角色由解放者检查`authorized?`

```
(defresource admin-only
  :handle-ok "secrect"
  :handle-unauthorized "for admins only"
  :authorized? (fn [{{token :token} :request}]
                 (= "admin" token)))

;; token returned encodes role
(defn authenticated? [name pass] 
  (cond (and (= name "scott") 
             (= pass "tiger")) "admin")
        (and (= name "jack")
             (= pass "jill"))  "user)))

(def app (wrap-basic-authentication admin-only authenticated?)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T18:08:31.690

来自自述文件”

> 资源与 Ring 兼容，可以封装在 Ring 中间件中。评估时，资源返回一个函数，该函数接受一个 Ring 请求并返回一个 Ring 响应。

这样您就可以将其包装在[ring-basic-authentication](https://github.com/remvee/ring-basic-authentication)

```
(use 'ring.middleware.basic-authentication)
(defn authenticated? [name pass] (and (= name "foo") (= pass "bar")))
(def app (-> routes .. (wrap-basic-authentication authenticated?)) 
```

# c# - 在 msi 数据库 c# 的所有表中编辑字符串

> ID：13702005
> 
> 赞同：0
> 
> 时间：2012-12-04T11:36:53.283
> 
> 标签：c#, build, msbuild, windows-installer

有什么方法可以编辑 msi 数据库安装程序的所有表。例如，我在安装程序中某些表的某些表中有一个字符串“标签”。我想用“文本”替换“标签”。我正在使用c# 中的 Api Windowsinstaller

```
using Windowsinstaller 
```

谢谢

# sockets - 有没有办法在魔兽世界 Lua 脚本中使用套接字？

> ID：13702008
> 
> 赞同：3
> 
> 时间：2012-12-04T11:37:08.560
> 
> 标签：sockets, lua, world-of-warcraft

我曾尝试使用：`require("socket")`，但我在有关 WoW 的论坛上发红说我无法使用该`require`命令。有没有其他方法可以做到这一点？我想将数据从 Lua 线程传递到 Java 线程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T12:01:19.543

您不能使用套接字，也没有其他方法可以与其他程序进行通信。这是暴雪为防止某些形式的作弊以及避免恶意软件传播和其他帐户安全漏洞而施加的限制。

通常，您将无法与第三方应用程序通信。有一些变通方法，但它们是 hack，它们可能会在 WoW 的未来更新中中断，并且它们可能违反某些服务条款。

# android - Http 响应上的空指针异常

> ID：13702009
> 
> 赞同：1
> 
> 时间：2012-12-04T11:37:10.860
> 
> 标签：android, android-networking

我正在使用以下用于连接到 Internet 进行解析的类，但是我在 HTTPResponse 上遇到了 NullPointerException。我还在清单文件中添加了 Internet 权限。这是我的代码

```
public class XMLParser {

    public String getXMLfromUrl(String Url){

        String xml =  null;

        try{

                 DefaultHttpClien httpClient = new DefaultHttpClient();
                 HttpPost httpPost = new HttpPost();
                 HttpResponse httpRes = httpClient.execute(httpPost);
                 final int status = httpRes.getStatusLine().getStatusCode();

                 if (status != HttpStatus.SC_OK) {
                     Log.d("meassage", "------------");
                 }

                 HttpEntity httpEnt = httpRes.getEntity();
                 xml = EntityUtils.toString(httpEnt);

        }catch(UnsupportedEncodingException e){
            e.printStackTrace();
        }catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return xml;
    }

    public Document getDomElement(String xml){

        Document doc = null;

        DocumentBuilderFactory  dbf = DocumentBuilderFactory.newInstance();

        try{

            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        }catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
    }
} 
```

帮助我找出我在哪里做错并建议需要更改。谢谢。这是一个堆栈跟踪

```
12-04 16:58:00.109: E/AndroidRuntime(2662): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gallery.parsing.madhuri/com.example.gallery.parsing.madhuri.MainActivity}: java.lang.NullPointerException
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.os.Looper.loop(Looper.java:137)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at java.lang.reflect.Method.invokeNative(Native Method)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at java.lang.reflect.Method.invoke(Method.java:511)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at dalvik.system.NativeStart.main(Native Method)
12-04 16:58:00.109: E/AndroidRuntime(2662): Caused by: java.lang.NullPointerException
12-04 16:58:00.109: E/AndroidRuntime(2662):     at org.apache.http.impl.client.AbstractHttpClient.determineTarget(AbstractHttpClient.java:496)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at com.example.gallery.parsing.madhuri.XMLParser.getXMLfromUrl(XMLParser.java:37)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at com.example.gallery.parsing.madhuri.MainActivity.onCreate(MainActivity.java:40)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.Activity.performCreate(Activity.java:4465)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-04 16:58:00.109: E/AndroidRuntime(2662):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-04 16:58:00.109: E/AndroidRuntime(2662):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:48:34.900

您尚未为 httpPost 指定任何网址。这就是为什么响应为空。

它应该被初始化为

```
 HttpResponse httpResponse = new HttpResponse(url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:16:38.940

使用 AsyncTask 加载和解析数据，它将提高性能并且您不会收到 NetworkOnMainThreadException 因为 AsyncTask 是另一个线程。使用您的方法 (getXmlFromUrl(Url)) 在您的课程中发布以下代码。要执行，您只需调用（可能在 OnCreate() 上）：

```
new YourTask().execute(""); 
```

这是代码：

```
 private class YourTask extends AsyncTask<String, Void, String> {
          String xmlContent = "";
           @Override
        protected String doInBackground(String... s) {

            //Here you have to make the loading / parsing tasks
            //Don't call any UI actions here. For example a Toast.show() this will couse Exceptions
            // UI stuff you have to make in onPostExecute method
              xmlContent=getXMLfromUrl(YOUR_URL);
        }

        @Override
        protected void onPreExecute() {
            // This method will called during doInBackground is in process
            // Here you can for example show a ProgressDialog
        }

        @Override
        protected void onPostExecute(Long result) {
            // onPostExecute is called when doInBackground finished
            // Here you can for example fill your Listview with the content loaded in doInBackground method

                  // here you can process he loading content in doInBackground
                  // for example:

  Toast.makeText(getApplicationContext(), xmlContent, Toast.LENGTH_SHORT).show();

        }

} 
```

在这里您可以了解有关 AsyncTasks 的更多信息：

[AsyncTask 开发者指南](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDQQFjAA&url=http://developer.android.com/reference/android/os/AsyncTask.html&ei=XXWvUJivB8XIswajxIDABg&usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&sig2=CmICU1zanbO_qVgO4V9uEg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:08:19.513

o specified any url for httpPost

It should be initialized as

```
 HttpResponse httpResponse = new HttpResponse(url); 
```

and Also create async class for them. call them in an asych class

# xtify - Xtify iOS SDK 2.06 中的泄漏

> ID：13702018
> 
> 赞同：1
> 
> 时间：2012-12-04T11:37:46.577
> 
> 标签：xtify

我正在使用 iOS SDK 2.06，并且在收到警报时发现了泄漏。泄漏似乎始于 XLappMgr

```
-(void)appDisplayNotification:(NSDictionary *)pushMessage withAlert:(BOOL) alertFlag

lastPush=[[NSDictionary alloc] initWithDictionary:pushMessage]; 
```

哪里`lastPush`永远不会被释放

我试图释放它，但应用程序崩溃了......

我注意到，当我注释掉`XLMetricMgr`请求时，一切正常。

这种行为有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:19:32.150

2.0.6 已经很老了（http://developer.xtify.com/display/sdk/iOS+SDK）。将库升级到 2.26。

# javascript - 纯 JS 中的工具提示

> ID：13702020
> 
> 赞同：0
> 
> 时间：2012-12-04T11:37:52.773
> 
> 标签：javascript, tooltip

我正在尝试这段代码，但我得到：`document.getElementsByName(...).style is undefined`

我认为代表团也有问题。有什么帮助吗？

```
<html>
    <head>
    <style type="text/css">
    #toolTip {
        position:relative;
        width:200px;
        margin-top:-90px;
    }

    #toolTip p {

        padding:10px;
        background-color:#f9f9f9;
        border:solid 1px #a0c7ff;
        -moz-border-radius:5px;-ie-border-radius:5px;-webkit-border-radius:5px;-o-border-radius:5px;border-radius:5px;
    }

    #tailShadow {
        position:absolute;
        bottom:-8px;
        left:28px;
        width:0;height:0;
        border:solid 2px #fff;
        box-shadow:0 0 10px 1px #555;
    }

    #tail1 {
        position:absolute;
        bottom:-20px;
        left:20px;
        width:0;height:0;
        border-color:#a0c7ff transparent transparent transparent;
        border-width:10px;
        border-style:solid;
    }

    #tail2 {
        position:absolute;
        bottom:-18px;
        left:20px;
        width:0;height:0;
        border-color:#f9f9f9 transparent transparent transparent;
        border-width:10px;
        border-style:solid;
    }
    </style>
    <script type='text/javascript'>
    function load () {
            var elements = document.getElementsByName('toolTip');
            for(var i=0; i<elements.length; i++) {
                document.getElementsByName(elements[i]).style.visibility = 'hidden';
            }
        }
    </script>

    </head>

    <body onload="load()">
    <br><br><br><br><br><br><br><br><br><br><br><br>
    <a class="hd" 
    onMouseOver="document.getElementsByName('toolTip')[0].style.visibility = 'visible'"
    onmouseout ="document.getElementsByName('toolTip')[0].style.visibility = 'hidden'">aqui</a>
    <div id="toolTip" name="toolTip">
        <p>i can haz css tooltip</p>
        <div id="tailShadow"></div>
        <div id="tail1"></div>
        <div id="tail2"></div>
    </div>

    <br><br><br>
    <a class="hd" 
    onMouseOver="document.getElementsByName('toolTip')[0].style.visibility = 'visible'"
    onmouseout ="document.getElementsByName('toolTip')[0].style.visibility = 'hidden'">aqui</a>
    <div id="toolTip" name="toolTip">
        <p>i can haz css tooltip</p>
        <div id="tailShadow"></div>
        <div id="tail1"></div>
        <div id="tail2"></div>
    </div>

    </body>
    </html> 
```

[演示](http://jsbin.com/imosiz/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:51:10.237

尝试将 id 更改`toolTip`为类：

```
<div class="toolTip">...</div> 
```

并更改您的 JS 以使用`display`样式而不是可见性，并且最好使用 JS 事件委托来处理 onmouseover：

```
function load()
{
    var i, tooltips = document.getElementsByClassName('toolTip'),
    mouseOver = function(e)
    {//handler for mouseover
        e = e || window.event;
        var i, target = e.target || e.srcElement,
        targetToolTip = target.nextElementSibling || nextSibling;//gets the next element in DOM (ie the tooltip)
        //check if mouse is over a relevant element:
        if (target.tagName.toLowerCase() !== 'a' || !target.className.match(/\bhd\b/))
        {//nope? stop here, then
            return e;
        }
        targetToolTip.style.display = 'block';//make visible
        for (i=0;i<tooltips.length;i++)
        {//closures are neat --> you have a reference to all tooltip elements from load scope
            if (tooltips[i] !== targetToolTip)
            {//not the one you need to see
                tooltips[i].style.display = 'none';
            }
        }
    };
    for (i=0;i<tooltips.length;i++)
    {
        tooltips[i].style.display = 'none';
    }
    //add listener:
    if (document.body.addEventListener)
    {//IE > 9, chrome, safari, FF...
        document.body.addEventListener('mouseover',mouseOver,false);
    }
    else
    {//IE8
        document.body.attachEvent('onmouseover',mouseOver);
    }
} 
```

如果这段代码不清楚，谷歌 JavaScript 事件委托和闭包，但这正是我处理这类事情的方式。IMO，它相当有效（您*可以*使用闭包范围来跟踪当前可见的工具提示，而不是遍历所有工具提示，这样会更好：

```
function load()
{
    var i, tooltips = document.getElementsByClassName('toolTip'),
    currentToolTip,//<-- reference currently visible
    mouseOver = function(e)
    {
        e = e || window.event;
        var i, target = e.target || e.srcElement,
        targetToolTip = target.nextElementSibling || nextSibling;

        if (target.tagName.toLowerCase() !== 'a' || !target.className.match(/\bhd\b/) || targetToolTip === currentToolTip)
        {//add check for currently visible TT, if so, no further action required
            return e;
        }
        if (currentToolTip !== undefined)
        {
            currentToolTip.style.display = 'none';//hide currently visible
        }
        targetToolTip.style.display = 'block';//make new visible
        currentToolTip = targetToolTip;//keep reference for next event
    };
    for (i=0;i<tooltips.length;i++)
    {
        tooltips[i].style.display = 'none';
    }
    if (document.body.addEventListener)
    {
        document.body.addEventListener('mouseover',mouseOver,false);
    }
    else
    {
        document.body.attachEvent('onmouseover',mouseOver);
    }
} 
```

而你在那里。

*编辑：*
要在鼠标移出时隐藏工具提示，您可以直接添加第二个侦听器：

```
function load()
{
    var i, tooltips = document.getElementsByClassName('toolTip'),
    currentToolTip,//<-- reference currently visible
    mouseOver = function(e)
    {
        e = e || window.event;
        var i, target = e.target || e.srcElement,
        targetToolTip = target.nextElementSibling || nextSibling;

        if (target.tagName.toLowerCase() !== 'a' || !target.className.match(/\bhd\b/) || targetToolTip === currentToolTip)
        {//add check for currently visible TT, if so, no further action required
            return e;
        }
        if (currentToolTip !== undefined)
        {
            currentToolTip.style.display = 'none';//hide currently visible
        }
        targetToolTip.style.display = 'block';//make new visible
        currentToolTip = targetToolTip;//keep reference for next event
    },
    mouseOut = function(e)
    {
        e = e || window.event;
        var movedTo = document.elementFromPoint(e.clientX,e.clientY);//check where the cursor is NOW
        if (movedTo === curentToolTip || currentToolTip === undefined)
        {//if cursor moved to tooltip, don't hide it, if nothing is visible, stop
            return e;
        }
        currentTooltip.style.display = 'none';
        currentTooltip = undefined;//no currentToolTip anymore
    };
    for (i=0;i<tooltips.length;i++)
    {
        tooltips[i].style.display = 'none';
    }
    if (document.body.addEventListener)
    {
        document.body.addEventListener('mouseover',mouseOver,false);
        document.body.addEventListener('mouseout',mouseOut,false);
    }
    else
    {
        document.body.attachEvent('onmouseover',mouseOver);
        document.body.attachEvent('onmouseout',mouseOut);
    }
} 
```

请注意，这是完全未经测试的。我不完全确定 IE < 9 是否支持`elementFromPoint`（获取在特定坐标处呈现的 DOM 元素），或者即使 IE 事件对象具有`clientX`and`clientY`属性，但我认为快速谷歌会告诉你更多，包括如何在旧的、肮脏的、可怕的 IE8 中获取光标下的坐标和元素，但这*应该*对您有所帮助。当然，如果你不希望工具提示的内容是可选择的，只需将`mouseOut`函数更改为：

```
mouseOut = function(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    if (currentToolTip)
    {
        currentToolTip.style.diplay = 'none';
        currentToolTip = undefined;
    }
}; 
```

无需检查鼠标移出是否在正确的元素上，只需检查是否有当前工具提示，然后将其隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:42:26.643

尝试使用类来标记工具提示：

```
<div id="toolTip1" class="toolTip">
    <p>i can haz css tooltip</p>
    <div id="tailShadow"></div>
    <div id="tail1"></div>
    <div id="tail2"></div>
</div> 
```

和 JQuery 使用类作为选择器来切换可见性：

```
$('.toolTip').attr('visibility', 'hidden') 
```

绝对清理非唯一的 ID - 否则这会给你带来无穷无尽的麻烦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:42:58.897

您的问题很可能是因为您`id`对两个工具提示都使用了相同的。这是无效的；an`id`应该是唯一的——给定页面中只有一个元素应该具有特定的 ID。

如果您需要多个对象的共享标识符，请改用 a `class`。

# java - 使用 jax-ws 调用位于负载均衡器上的 Web 服务返回 http 状态为 302，但是当我使用 SoapUI 时它工作正常

> ID：13702022
> 
> 赞同：2
> 
> 时间：2012-12-04T11:37:53.553
> 
> 标签：java, web-services, soap, jax-ws, load-balancing

当我使用 jax-ws 调用位于负载均衡器上的 Web 服务时，它会返回

> 服务器发送 HTTP 状态码 302: Moved Temporarily

然后失败了，但是当我使用 SoapUI 时它工作正常。

有没有办法可以配置服务来正确处理这个问题？

我使用生成 web 服务代码`wsimport`并进行调用

```
NotificationWebService service = new NotificationWebService(wsdlLocation, qName);
NotificationWebServiceSoap serviceSoap = service.getNotificationWebServiceSoap();
String xmlString = serviceSoap.getRSAPublicKeyXMLString(); 
```

我被困住了，我无法在任何地方找到解决方案，因此将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T15:36:28.163

因此，经过大量调查，我终于弄清楚了问题所在。这一切都归结为从http重定向到https。从我在网上找到的文章（不再记得网址）中，由于安全原因，**wsdl2java**和**wsimport**存根生成器用于进行 Web 服务通信的库不允许遵循 http 到 https 的重定向。

因此，即使我是从 https wsdl 位置生成存根，即。[https://wsdl.location.com?wsdl](https://wsdl.location.com?wsdl)，当我运行代码进行网络服务调用时，它试图调用[http://wsdl.location.com](http://wsdl.location.com)导致重定向请求到[https:/ /wsdl.location.com](https://wsdl.location.com)，但 http 库不允许这样做。所以它只是将 302 http 代码作为异常转发。

此外，还有两个 Web 服务 URL。一个是测试服务，它是普通的 http url，然后是一个通过 https 的生产服务器。因此，要解决这个问题，我所做的就是通过使用**BindingProvider**类动态配置服务以使用我指定的端点（现在是 https 地址）。这也允许我根据要调用的环境动态指定使用测试 URL 或生产 URL。

```
NotificationWebService service = new NotificationWebService();
NotificationWebServiceSoap serviceSoap = service.getNotificationWebServiceSoap();

BindingProvider bindingProvider = (BindingProvider) serviceSoap;
bindingProvider.getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, "https://wsdl.location.com");

String xmlString = serviceSoap.getRSAPublicKeyXMLString(); 
```

所以简而言之，如果有人遇到这个问题。确保您需要指向的端点是否在 https 上，即您正在进行直接 https 调用，而不是会要求 https 重定向的 http 调用。您可以通过在调试时检查**serviceSoap来检查这一点。**它会说它正在拨打哪个网址。

我没有考虑或选择配置**wsdl2java**和**wsimport**以生成存根并强制存根使用 https 调用的选项，以便我可以为不同的环境配置多个 url 端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:48:25.547

是的。您没有说您使用什么进行传输，但如果它类似于 HttpClient，您需要将其设置为遵循重定向。您可能需要修改自动生成的代码，或者尝试使用更高级别的抽象，例如 Spring Web Services 或 CXF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T05:44:05.453

原因是 Web 服务调用控制上的重定向问题从 HTTP 转移到 HTTPS。编辑您的 WSDL 文件，您将找到以下代码：

原始代码：

```
soap:address location="http://www.google.com/Services/Services_xyz.asmx" 
```

更改代码：

```
soap:address location="https://www.google.com/Services/Services_xyz.asmx" 
```

只需将位置属性 HTTP 更改为 HTTPS 并使用更改后的 WSDL 文件位置生成新存根。

# jakarta-ee - 由于 logging.properties 部署 Arquillian 测试时出现 Jboss 错误

> ID：13702024
> 
> 赞同：1
> 
> 时间：2012-12-04T11:37:55.720
> 
> 标签：jakarta-ee, jboss7.x, jboss-arquillian

尝试使用 maven 部署 Arquillian 测试时，我收到以下错误消息

Surefire 报告的一部分：

```
Test set: de.shop.bestellverwaltung.domain.ArtikelTest
------------------------------------------------------------------------------- Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed:
104.813 sec <<< FAILURE! de.shop.bestellverwaltung.domain.ArtikelTest  Time elapsed: 104.812 sec  <<< ERROR! org.jboss.arquillian.container.spi.client.container.DeploymentException: Could not deploy to container: {"JBAS014671: Fehlgeschlagene Dienste"
=> {"jboss.deployment.unit.\"shop.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"shop.war\".POST_MODULE: JBAS018733: Failed to process phase POST_MODULE of deployment \"shop.war\"
    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011555: Failed to configure logging using 'logging.properties' configuration file.
    Caused by: java.lang.IllegalArgumentException: className is null"}}      
...
Caused by: java.lang.Exception: {"JBAS014671: Fehlgeschlagene Dienste"
=> {"jboss.deployment.unit.\"shop.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"shop.war\".POST_MODULE: JBAS018733: Failed to process phase POST_MODULE of deployment \"shop.war\"
    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011555: Failed to configure logging using 'logging.properties' configuration file.
    Caused by: java.lang.IllegalArgumentException: className is null"}}     
    at org.jboss.as.controller.client.helpers.standalone.impl.ServerDeploymentPlanResultFuture.getActionResult(ServerDeploymentPlanResultFuture.java:134)   
    at org.jboss.as.controller.client.helpers.standalone.impl.ServerDeploymentPlanResultFuture.getResultFromNode(ServerDeploymentPlanResultFuture.java:123)     
    at org.jboss.as.controller.client.helpers.standalone.impl.ServerDeploymentPlanResultFuture.get(ServerDeploymentPlanResultFuture.java:85)    
    at org.jboss.as.controller.client.helpers.standalone.impl.ServerDeploymentPlanResultFuture.get(ServerDeploymentPlanResultFuture.java:42)    
    at org.jboss.as.arquillian.container.ArchiveDeployer.executeDeploymentPlan(ArchiveDeployer.java:91)     
    at org.jboss.as.arquillian.container.ArchiveDeployer.deploy(ArchiveDeployer.java:58)    ... 94 more 
```

这里是 Logging.properties 文件

```
# Siehe %JAVA_HOME\jre\lib\logging.properties

############################################################
# Globale Properties
############################################################

# Konsole und Log-Datei handlers= java.util.logging.ConsoleHandler, java.util.logging.FileHandler

# Globaler Log-Level .level= INFO

############################################################
# LogHandler
############################################################

# Logdatei java.util.logging.FileHandler.pattern = target/junit-%g.log java.util.logging.FileHandler.limit = 5000000 java.util.logging.FileHandler.count = 3 java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter java.util.logging.FileHandler.encoding = ISO-8859-1

# Konsole java.util.logging.ConsoleHandler.level = INFO java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

# [<date/time>] <level> <source> <method>: <log message> java.util.logging.SimpleFormatter.format = [%1$tc] %2$s %4$s : %5$s%n

############################################################
# Einzelne Log-Level
############################################################

de.shop.level = FINEST 
```

我不明白“className is null”在这种情况下是什么意思，也不明白如何进一步定位错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:08:27.580

JBoss AS 7 使用 JBoss Log Manager 作为日志管理器。它需要比 JDK 风格更多的 log4j 风格的属性配置。

看起来您没有配置任何处理程序，但它们的配置与您注释掉的 FWIW 不同。

我假设上面的 logging.properties 文件在您的部署中。如果是这样，它应该如下所示：

```
loggers=de.shop
de.shop.level=TRACE 
```

# ios - 在 iOS 应用程序中查找物体到我们的 iPhone 相机的距离

> ID：13702030
> 
> 赞同：0
> 
> 时间：2012-12-04T11:38:18.060
> 
> 标签：ios, xcode

> **可能重复：**
> [iOS 相机焦点值](https://stackoverflow.com/questions/9465198/ios-camera-focus-value)

我的客户需要一个像这样工作的应用程序。当我将相机聚焦在一个物体上时，它会测量相机和聚焦的 Object 之间的距离。我不知道该怎么做。请帮助我做到这一点。如果您需要任何细节或不清楚的问题，请告诉我。

谢谢和问候， 斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:40:56.007

Hey you using iphone or radar system ?

Tell your client it will come in ios 7 .

# jboss - 编辑 JBoss Standalone.xml

> ID：13702032
> 
> 赞同：0
> 
> 时间：2012-12-04T11:38:22.950
> 
> 标签：jboss, cloudbees

是否可以在 cloudbees 上编辑已部署 JBoss 的standalone.xml（和域）？例如，如果我因为与部署的 .war 冲突而想禁用 rest 和 webservices 模块？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:15:05.450

您不能，但作为替代方案，您可以使用[clickstack](https://wiki.cloudbees.com/bin/view/RUN/ClickStack)部署自己的自定义容器，请参阅运行 jboss 7.1 的[示例](https://github.com/CloudBees-community/jboss71-clickstack)

# php - 使用 GROUP by 的 PHP(SQL) 脚本无法正确显示某些字段

> ID：13702034
> 
> 赞同：0
> 
> 时间：2012-12-04T11:38:32.070
> 
> 标签：php, sql

我对 PHP 相当陌生，但已经坚持了好几天。基本上，我有一个钓鱼网站，它有两个数据库。一个是个人最好成绩，一个是所有时间记录。现在，我认为只有一张表会更简单，每个人都最好，然后我可以使用 PHP/SQL 脚本来检索所有时间记录。

问题是，它检索了鱼的名称和捕获的最大重量，但始终显示一个人，而不是捕获它的正确人。

表由基本上像 Species、FishName、Rank、Weight (Drams)、Angler、Peg、DateCaught 等字段组成。

脚本是

```
$query = "SELECT Type, Name, Rank, Person, MAX(Drams) as Drams FROM table GROUP BY Name  ORDER BY Type ASC, Rank ASC"; 

$result = mysql_query($query) or die(mysql_error());
echo "<b>Testing a display of All Time Records from PB Table.</b> <br>";

while($row = mysql_fetch_array($result)){
echo "Records for ". $row['Type']. " with name ". $row['Name']. " weighs ". $row['Drams']. " caught by ". $row['Person'];
echo "<br>";
}
mysql_close($con); 
```

应该发生的是现在将生成一个列表，其中显示一条鱼的每个名称和它们被捕获的重量，以及谁像示例 1 中那样捕获了它，但示例 2 正在发生。

示例 1：

David Bloggs 捕获的名为 Piggy 的鲤鱼的记录重达 1024

亚瑟·史密斯（Arthur Smith）捕获的重达 123 的名为 Flipper 的鲤鱼

示例 2：

David Bloggs 捕获的名为 Piggy 的鲤鱼的记录重达 1024

亚瑟·史密斯（Arthur Smith）捕获的重达 123 的名为 Flipper 的鲤鱼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:31:50.057

我的猜测是你得到的是正确的`MAX(Drams)`，但是`GROUP BY Name`你得到的是第一个`Person`数据而不是`Person`那个`MAX(Drams)`

这里有两种不同的方法来完成你想要做的事情-

* * *

这第一个有 a ，它通过and`nestled` `SELECT`重新排列你的行，外面做的是获得最高记录`Name - ASC``Drams - DESC``GROUP BY Name`

```
SELECT Type, Name, Rank, Person, Drams 
FROM (SELECT Type, Name, Rank, Person, Drams FROM table ORDER BY Name, Drams DESC) a
GROUP BY Name 
ORDER BY Type ASC, Rank ASC 
```

**这是它的工作原理 -**
1- 嵌套`SELECT`首先运行，并按名称 (AZ) 和 Drams (High-Low) 重新排序表行。然后将这个有组织的表临时存储为 table `a`。

```
(SELECT Type, Name, Rank, Person, Drams FROM table ORDER BY Name, Drams DESC) a 
```

2- 外部`SELECT`现在获取 table`a`并执行`GROUP BY Name`，为我们提供每个鱼名的第一个（或顶部/最高）记录，并按类型（AZ）和排名（低-高）对结果进行排序。

```
SELECT Type, Name, Rank, Person, Drams 
FROM  a  /* table a was set in step 1 */
GROUP BY Name 
ORDER BY Type ASC, Rank ASC 
```

* * *

第二个有 a `nestled` `SELECT`，它获取`MAX(Drams)`，然后`JOIN`将其发送到具有最高记录的行

```
SELECT table.Type, table.Name, table.Rank, table.Person, table.Drams
FROM table
JOIN ( SELECT Name, MAX(Drams) AS Drams FROM table GROUP BY Name) maxDrams
ON table.Name = maxDrams.Name 
AND table.Drams = maxDrams.Drams
ORDER BY Type ASC, Rank ASC 
```

**这是它的工作原理 -**
1- 嵌套`SELECT`首先运行，并选择每个鱼名（通过`GROUP BY Name`）及其 MAX(Drams)。然后将这个有组织的表临时存储为 table `maxDrams`。

```
(SELECT Name, MAX(Drams) AS Drams FROM table GROUP BY Name) maxDrams 
```

2-现在外面`SELECT`拿桌子`maxDrams`，和`JOIN`原来的桌子做一个- `table`。它找到 中的行`table`和`Name`中`Drams`的`==`行`maxDrams`，并按类型（AZ）和排名（低-高）对结果进行排序。

```
SELECT table.Type, table.Name, table.Rank, table.Person, table.Drams
FROM table
JOIN maxDrams  /* table maxDrams was set in step 1 */
ON table.Name = maxDrams.Name 
AND table.Drams = maxDrams.Drams
ORDER BY Type ASC, Rank ASC 
```

* * *

[您可以在 - http://sqlfiddle.com/#!2/b6b66/7](http://sqlfiddle.com/#!2/b6b66/7)看到一个示例。这显示了两个示例，其中`nestled`首先执行查询，然后执行整个查询。希望这使它更清楚一点。

# oracle - PL/SQL 中的 2 个日期/时间之间没有给出预期的答案

> ID：13702036
> 
> 赞同：1
> 
> 时间：2012-12-04T11:38:35.657
> 
> 标签：oracle, plsql, oracle10g

我在 Oracle 10g 上的 PL/SQL 中有一个查询，它的行为与我想象的不同。我 100% 确定我在做一些愚蠢的事情，所以我很抱歉.. 这里是：

我在一个看起来像这样的表中有一些数据：

![在此处输入图像描述](../Images/f0361c8f5b4e46bf330515fc68c35e52.png)

然后我去查询，但使用时间元素，如下所示：

```
select * from dw_time
where createdtime > to_date('2012/04/12 03:06:00', 'yyyy/mm/dd hh24:mi:ss') 
```

执行此操作时，我们会返回包含图像 03:05AM 中的行的记录。所以我认为这是 to_date 函数，我检查了：

```
select  to_date('2012/04/12 10:24:00', 'yyyy/mm/dd hh:mi:ss')
from dual; 
```

![结果](../Images/0d75c44ef2a3d39b219c57acf362a402.png)

现在我完全糊涂了，因为它清楚地知道这是一个时间。于是我又试了一次：

```
select * from dw_time
where createdtime > to_date('2012/04/12 03:06:00', 'yyyy/mm/dd hh24:mi:ss') 
```

![在此处输入图像描述](../Images/724c4b71a149a415689a81256eebf766.png)

如您所见，它完全忽略了时间组件！在这一点上，我认为是时候在这里问大师了！

非常感谢

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:00:04.687

是否有可能在您的表中 '12/4/2012' 表示 2012 年 12 月 4 日并且查询以 MM/DD/YYYY 格式输出它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:52:37.010

查看 DB 输出日期格式 - 它是 MM/DD/YYYY - 您可以在以下输出中看到它：

```
 select  to_date('2012/04/12 10:24:00', 'yyyy/mm/dd hh:mi:ss') from dual; 
```

因此，将您的选择更改为：

```
select * from dw_time where createdtime > to_date('2012/12/04 03:06:00', 'yyyy/mm/dd hh24:mi:ss') 
```

您可以通过此查询查看日期输出格式：

```
select * from nls_session_parameters where parameter = 'NLS_DATE_FORMAT'; 
```

您可以通过以下方式更改日期输出格式：

```
alter session set NLS_DATE_FORMAT='DD/MM/YYYY HH24:MI:SS'; 
```

# postgresql - Exporting sequences in PostgreSQL

> ID：13702038
> 
> 赞同：7
> 
> 时间：2012-12-04T11:38:43.677
> 
> 标签：postgresql

I want to export ONLY the sequences created in a Database created in PostgreSQL. There is any option to do that?

Thank you!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T12:26:44.877

您可以编写一个查询来生成一个脚本，该脚本将通过查询此信息模式视图来创建您现有的序列对象。

```
select *
from information_schema.sequences; 
```

像这样的东西。

```
SELECT 'CREATE SEQUENCE ' || sequence_name || ' START ' ||  start_value || ';'
from information_schema.sequences; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-10T08:03:19.350

我知道它太旧了，但今天我有类似的要求，所以我尝试通过创建一系列“CREATE SEQUENCE”查询以相同的方式解决它，这些查询可用于在导入错误的其他数据库上重新创建序列（缺少序列）这是我使用的 SQL：

```
SELECT 
'CREATE SEQUENCE '||c.relname||
' START '||(select setval(c.relname::text, nextval(c.relname::text)-1))
AS "CREATE SEQUENCE SQLs"
FROM 
  pg_class c 
WHERE 
  c.relkind = 'S' 
```

也许这对某人有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-10T15:34:01.097

使用 DBeaver，您可以

1.  打开架构
2.  选择它的序列
3.  `crtl-F`搜索您感兴趣的序列
4.  `crtl-A`选择所有这些
5.  `Right-click`并选择生成 SQL -> DDL

您将获得 SQL 语句来创建所有选定的序列。

# c# - 如何在 mvc3 模型中设置文本框的宽度

> ID：13702040
> 
> 赞同：0
> 
> 时间：2012-12-04T11:38:52.743
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

如何从 mvc3 模型设置文本框宽度，假设我的模型如下，

```
public class MVCMODEL
{
    [Required] 
    public  int Name{ get; set; }
} 
```

我希望当这个文本框在视图中呈现时，它的宽度将`800px`如何在模型中添加自定义样式？

谢谢 ，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:41:55.620

你不能从模型中做到这一点。在 MVC 中，模型是数据结构的表示，它对应于您向页面发送和从页面发送的信息。MVC 的关键是将站点的美学与实际使其运行的逻辑分开。为了设置视图的视觉方面，您需要更改视图的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:44:24.700

您不能这样做，因为它是一种特定的布局行为，因此您应该根据`width`需要在 View 上设置。这样的事情可以解决你的问题：

```
@Html.TextBoxFor(model => model.Name, new { style = "width: 800px;"}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:52:59.333

尽管您可以添加自己的`DataAnnotation`类型属性扩展并相应地装饰您的模型/视图模型属性（根据[此博客文章](http://aspadvice.com/blogs/kiran/archive/2009/11/29/Adding-html-attributes-support-for-Templates-_2D00_-ASP.Net-MVC-2.0-Beta_2D00_1.aspx)），但这将是对 IMO 关注点的可怕污染。

更好的是使用类似的技术，而不是呈现硬编码的宽度，而是使用 CSS 类装饰您的模型属性，然后使用 CSS 相应地控制格式。然而，纯粹主义者可能仍然不同意——即使将 CSS 类应用于视图模型也可能越界。

例如

```
[HtmlProperties(CssClass="LargeTextBox")]
[Required] 
public  int Name{ get; set; } 
```

认为呈现的 Html 是

```
<input type="text" value="" name="Name" id="Name" class="LargeTextBox"/> 
```

实际宽度将控制在适当的范围内`.css`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:18:43.537

同意所有其他答案...您还可以将模型中字段的最大长度定义为：

```
public class MVCMODEL
{
    [Required] 
    [MaxLenght(300)] // number of characters allowed in this field.
    public  int Name{ get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T08:27:47.140

你可以写这样的东西。

> :<%=Html.TextBoxFor(m => m.Name, new { size=4})%>

# android - How to execute a method just after the second onResume?

> ID：13702042
> 
> 赞同：0
> 
> 时间：2012-12-04T11:39:07.487
> 
> 标签：android, android-lifecycle

I have two differents methods that are executed on onCreate() and onResume(), but I want that when onCreate() is executed, the method in onResume don't run. Have some way to achieve this?

--EDIT--

I removed the piece of code from onCreate(), and created a flag to interact with onPause() and passed the boolean flag as params:

```
Boolean flagFirstTime = true;

@Override
    public void onResume()
    {
        super.onResume();
        new asyncTask().execute(flagFirstTime);
    }

    @Override
    protected void onPause() {
        super.onPause();
        flagFirstTime = false;
    } 
```

Before I asked, I was thinking put a flag, but in my opinion, this is very ugly. XD

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:42:18.783

创建一个在 onCreate = true 中设置的模块级布尔值。当 onResume 执行时，将其设置为 false - 在您通过仅应在值为 false 时运行的方法之后。这样，在onPause之后执行onResume时，onResume中的methond就会运行。

```
boolean skipMethod = false;

onCreate(){

    skipMethod = true;

}

onResume(){

    if(!skipMethod){
       myMethoed();
    }
    skipMethod = false;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:43:14.427

```
public class SomeActivity extends Activity{

    bool onCreateCalled = false;

    @Override onCreate()...

       ...
       onCreatedCalled = true;
       ...

    @Override onResume()...

       ...
       if !onCreatedCalled){doSomething();}
       ... 
```

然而，这很丑陋。我建议您再次查看这个常用方法，并且只从 onResume() 调用它，因为 onResume() 总是在 onCreate() 之后。

# php - Invalid Content-Length and HTTP 413 error?

> ID：13702051
> 
> 赞同：2
> 
> 时间：2012-12-04T11:39:29.140
> 
> 标签：php, linux, apache2, cgi, mailman

I'm stack because all the websites on my Linux Apache2 web server which have a form to fulfil are returning 413 Request Entity Too Large Error **only after first fulfil (refresh makes it working)**. Error looks like:

```
Request Entity Too Large

The requested resource
/mailman/subscribe/konrad
does not allow request data with POST requests, or the amount of data provided in the    request exceeds the capacity limit.

Request Entity Too Large

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, [no address given] and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

Here is apache2 error log:

```
[Tue Dec 04 12:06:27 2012] [error] [client 5.184.118.16] Invalid Content-Length, referer:   http://62.87.177.20/mailman/admindb/konrad
[Tue Dec 04 12:06:27 2012] [error] [client 5.184.118.16] (-3)Unknown error 4294967293:    Error reading request entity data, referer: http://62.87.177.20/mailman/admindb/konrad
[Tue Dec 04 12:07:12 2012] [error] [client 46.134.87.133] Invalid Content-Length, referer: http://www.comfortzg.com/~lekumed2010/login.php?PHPSESSID=e6b9c4d160a2b06435bb8c0676acbe51 
```

It gives the error on both (one using PHP and second Perl (cgi)) scripts. I'm not using SSL.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:42:48.630

可能表单是使用 GET http 方法提交的，但是浏览器构建的 url 太长。在这种情况下，通常的服务器回答是 HTTP 错误 413**请求**实体太大。

在这种情况下，您应该使用 POST 方法来解决这个问题。

# java - Ant Build 没有给出确切的类文件

> ID：13702053
> 
> 赞同：1
> 
> 时间：2012-12-04T11:39:37.843
> 
> 标签：java, ant, build

我为我的项目创建了一个 ant build。
提取 myfile.class(r) 之类的 jar 文件时，我看到了一些不同的类名。
并且这个类文件的大小与编译后的类文件的大小不同。
为什么会这样。当我运行 jar 时，我得到了找不到方法的异常。但是我从 eclipse 中导出的 jar 工作正常。

这是我的 build.xml 文件

```
<path id="master-classpath">
    <fileset dir="${lib.dir}">
        <include name="*.jar"/>
    </fileset>

</path>

<manifestclasspath property="lib.list" jarfile=".">
        <classpath refid="master-classpath" />
</manifestclasspath>

<target name="clean" description="Clean output directories">
        <delete dir="${build.dir}"/>
</target>

<target name="build" description="Compile source tree java files">
        <echo>copy src files</echo>
        <mkdir dir="${copy.dir}"/>
        <copy todir="${copy.dir}">
                <fileset dir="${src.dir}">
                    <exclude name="**/*.class"/>
                    <include name="**/*.java"/>
                    <include name="**/*.properties"/>
                    <include name="**/*.MIB"/>
                    <include name="**/*.java.bak"/>

                </fileset>        
        </copy>

    <echo>Compiling the source code</echo>
    <echo>Apache Ant java version is ${ant.java.version}</echo>
    <mkdir dir="${build.dir}"/>
    <javac destdir="${build.dir}" srcdir="${copy.dir}" source="1.6" target="1.6" debug="on">

        <classpath refid="master-classpath"/>
    </javac>
    <copy todir="${build.dir}">
        <fileset dir="${src.dir}/src">
            <exclude name="**/*.java"/>
            <exclude name="**/*.class"/>
            <include name="**/*.properties"/>
            <include name="**/*.MIB"/>
        </fileset>        
    </copy>  
</target>

<target name="jar" depends="build">

    <mkdir dir="${jar.dir}"/>
    <echo>building jar!</echo>

    <jar destfile="${jar.dir}/${ant.project.name}.jar" >

        <fileset dir="${build.dir}" >
                <include name="**/*.class" />
                <include name="**/*.properties" />
                <include name="**/*.MIB" />
                <include name="**/*.java.bak"/>
                <include name="**/*.png"/>
                <include name="**/*.jpg"/>
        </fileset>

        <zipfileset includes="**/**.**" src="${lib.dir}/junit.jar"/>
        <zipfileset includes="**/*.*" src="${lib.dir}/mysql-connector-java-5.0.8-bin.jar"/>
        <zipfileset includes="**/*.*" src="${lib.dir}/NicManager.jar"/>
        <zipfileset includes="**/**.**" src="${lib.dir}/log4j-1.2.14.jar"/>
        <zipfileset includes="**/*.*" src="${lib.dir}/snmp4j-1.11.3.jar"/>
        <zipfileset includes="**/*.*" src="${lib.dir}/snmp4j-agent-1.4.3.jar"/>
        <zipfileset includes="**/*.*" src="${lib.dir}/NMSLookAndFeel.jar"/>
        <zipfileset includes="**/*.*" src="${lib.dir}/rt.jar"/>   
        <manifest>
            <attribute name="Main-Class" value="com.ushustech.nmsazzist.NMSAzzistApp" />
            <attribute name="Class-Path" value="${lib.list}"/>
        </manifest>

    </jar>
</target>
<target name="main" depends="clean,jar"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:09:37.783

几天后我发现了问题。这是因为一个重复的 jar 文件也包含我项目中的类。这些类看起来像 myfile.class(r)。

# c - 多次调用malloc会浪费内存吗？

> ID：13702055
> 
> 赞同：2
> 
> 时间：2012-12-04T11:40:01.933
> 
> 标签：c, memory-management

目前正在编写一个代码，我意识到它曾经`malloc`多次调用（大约 1000 万次调用）并且每次都分配小块（大约 10 个字节）。

我稍微更改了代码，而不是调用`malloc`1000 万次，我现在调用`malloc`10 次，每次都分配一大块内存（1000 万字节）。

通过此更改，我注意到我的代码的峰值内存消耗从 ~15 GB 变为 ~14 GB。

为什么会这样？`malloc`每次调用都会分配一些额外的块吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T11:42:48.330

确实。因为`malloc()`为元数据分配了一些字节。所以如果多个 malloc() 导致更多的元数据。

此[链接](http://www.inf.udec.cl/~leo/Malloc_tutorial.pdf)为您提供有关 malloc 如何分配内存和元数据的更多详细信息。

# cryptography - A Simpler Analogy for Zero-Knowledge Proof in Cryptography?

> ID：13702059
> 
> 赞同：3
> 
> 时间：2012-12-04T11:40:12.567
> 
> 标签：cryptography

I just read the Wikipedia article about zero-knowledge proof/protocol at [http://en.wikipedia.org/wiki/Zero-knowledge_proof](http://en.wikipedia.org/wiki/Zero-knowledge_proof). I understood the story of Peggy and Victor but I have a question. Could not Peggy just enter the cave from Path A and exit the cave at Path B, the whole process being watched by Victor, who is standing at the bifurcation of Path A and B? I did not see any problem of this plan of violating the rule of completeness, soundness, and zero-knowledge. In addition, it is definitive: Peggy can just prove he knows the magic word with one try. So what is wrong with that plan?

# sql-server - 使用哈希和随机盐查找密码是否正确

> ID：13702070
> 
> 赞同：0
> 
> 时间：2012-12-04T11:40:31.007
> 
> 标签：sql-server, hash, salt, password-encryption

我有一个包含用户的数据库，我想为每个用户保存一个随机盐，该盐保存在盐列中，并在密码字段中使用他们的盐+密码的哈希值。

我可以像这样插入它们：

```
INSERT INTO users([Username], [Password], [Salt])
VALUES('David', HASHBYTES('SHA1', 'randomgeneratedsalt' + 'theirpw'), 'randomgeneratedsalt') 
```

但是我该如何选择它们呢？

我自己的尝试是：

```
select * 
from users 
where Username = 'David' 
  AND Password = HASHBYTES('SHA1', Salt + 'enteredpw') 
```

当然，我可以为尝试登录的用户选择盐，但我不想这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:49:17.240

您可以通过用户名选择它们，该用户名必须是唯一的。找到用户后，您可以将提供的密码哈希与存储的密码进行比较。只需要注意是否找不到用户名或哈希不匹配显示相同的错误（即防止用户名有效的信息泄露）。

# php - showing internal server issue while uploading a big file

> ID：13702072
> 
> 赞同：3
> 
> 时间：2012-12-04T11:40:39.640
> 
> 标签：php, upload

I am trying to upload one excel file by php code. If that excel file contains 200 records then it works fine. But if that excel file contains more than 500 records, then it shows `"Internal Server Error"` though I set the following:

```
set_time_limit(10000);
ini_set('memory_limit', '256M');
ini_set('upload_max_filesize', '30M');
ini_set('post_max_size', '200M');
ini_set('max_input_time', 1000); 
```

Also, in the file internally I am doing a lot, read data from excel file and store in an array then again checking from database whether any element is there in the database or not,. If so then remove that particular data. Again for the remaining data, inserting into a table and checking some conditions with for date. And finally with the remaining push in an array. So is there any option to solve this internal server error issue? If so please let me know.

Code is like the following:

```
 <?php
    ini_set("display_errors", 1);
    set_time_limit(10000);
    ini_set('memory_limit', '256M');
    ini_set('upload_max_filesize', '30M');
    ini_set('post_max_size', '200M');
    ini_set('max_input_time', 1000);
    ?>
    <fieldset style="border:2px solid #60006B;">
      <legend >Upload Excel File</legend>
        <form enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
           <input type="hidden" name="MAX_FILE_SIZE" value="2000000" />
           <table width="600">
             <tr>
                <td>Excel File:</td>
                <td><input type="file" name="cur_pic" style="border:1px solid #ccc;" /></td>
             </tr>
             <tr>
                <td colspan="2" style="padding-left:150px;"><input type="submit" value="Upload" name="upload" class="button" /></td>
             </tr>
            </table>
           </form>
        </fieldset>
<?php
  if(isset($_REQUEST['upload'])){
    $image =$_FILES["cur_pic"]["name"];
    $uploadedfile = $_FILES['cur_pic']['tmp_name'];
    if ($image) {

      $filename = stripslashes($_FILES['cur_pic']['name']);

      $extension = getExtension($filename);
      $extension = strtolower($extension);

      if (($extension != "xls") && ($extension != "xlsx")) 
      {

        $change='<div class="msgdiv">Unknown file extension </div> ';
            $errors=1;
       }
       else
       {
         $size=filesize($_FILES['cur_pic']['tmp_name']); 
         move_uploaded_file($_FILES["cur_pic"]["tmp_name"],"sampleData/" . $_FILES["cur_pic"]["name"]);
        }
    }

   set_include_path(get_include_path() . PATH_SEPARATOR . '../../../Classes/');

/** PHPExcel_IOFactory */
   include 'PHPExcel/IOFactory.php';
   $inputFileName = './sampleData/'.$_FILES["cur_pic"]["name"];
   echo 'Loading file ',pathinfo($inputFileName,PATHINFO_BASENAME),' using IOFactory to  identify the format<br />';
   $objPHPExcel = PHPExcel_IOFactory::load($inputFileName);
   echo '<hr />';
   $sheetData = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true);
   foreach($sheetData as $key => &$value) {
    if(is_array($value) && isset($value['A'])) $value = $value['A'];
   }
   $sql = mysql_query("SELECT email,type FROM subscribe WHERE status='0'");
   $ultimate_array = array();
   while($res = mysql_fetch_array($sql)){
     if($res['type'] == '1'){
      if (in_array($res['email'], $sheetData)) {
    unset($sheetData[array_search($res['email'], $sheetData)]);
      }
     }
   } 

   $replace_string2 = array_unique($sheetData);

   $today_date = date('Y-m-d h:i:s');

   foreach($replace_string2 as $ins_email){
    $chk_email = mysql_num_rows(mysql_query("SELECT id FROM add_email WHERE email='".$ins_email."'"));
    if($chk_email == 0){
        mysql_query("INSERT INTO add_email VALUES('','".$ins_email."','".$today_date."','1')");
    }
   }

   $final_email = array();
   foreach($replace_string2 as $f_email){
     $orig_sql = mysql_query("SELECT email,status FROM add_email WHERE email='".$f_email."'");
     while($res = mysql_fetch_array($orig_sql)){
        if($res['status'] == 1){
      array_push($final_email,$res['email']);       
        }
    else if($res['status'] == 0){
       $days = mysql_fetch_array(mysql_query("SELECT day FROM days"));
       $sql = mysql_query("SELECT email FROM add_email WHERE email='".$res['email']."' AND  DATEDIFF( NOW(),sending_date) > ".$days['day']);
       $no = mysql_num_rows($sql);
       if($no > 0){
        array_push($final_email,$f_email);  
           }    
         }
    }

     }

     $final_emails = array_unique($final_email);

     $_SESSION['record'] = $final_emails;

     foreach($final_emails as $ca){
    $ca_trim = trim($ca);
    mysql_query("UPDATE add_email SET sending_date='".$today_date."',status='0' WHERE email='".$ca_trim."'");
     }
            header('location:https://fgtpl.com/fugenx1/public_html/unsubscribe/Tests/14excel5.php');

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:45:10.717

您可以检查**php.ini**文件中的 disable_functions 设置。如果这是共享主机

`<?php echo phpinfo(); ?>`检查设置。

如果共享主机是一个案例，我严重怀疑您是否可以上传 200MB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:09:31.673

如果你有你的专用服务器，你可以这样做：

1.  登录到您的服务器
2.  如果您在服务器上运行 whm+cpanel，请执行此操作

    **tail -f /usr/local/apache/error.log** 然后尝试上传。如果发生错误，您将在此处看到原因

3.  如果您不使用 whm+cpanel，请执行此操作

    **tail -f /var/log/apache/error.log** 然后尝试上传。如果发生错误，您将在此处看到原因

在这两种情况下，您都需要找到您的 apache 错误文件。在此处粘贴 apache 日志文件的错误输出。

# android - ZXing calls parent's onCreate after scanning

> ID：13702076
> 
> 赞同：1
> 
> 时间：2012-12-04T11:40:48.173
> 
> 标签：android, zxing, oncreate

I have a problem with ZXing activities : When a scan succeeds, it works properly, goes back to parent activity, sets the result in the textfield, but calls the onCreate method of its parent which is very problematic for me.

Here is my result listener :

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
    if(resultCode == RESULT_OK) {
        if (scanResult != null) {
            String ean = scanResult.getContents();
            eanEdit.setText(ean);
        }
    } else {
        // Nothing
    }
} 
```

The button listener :

```
public void addScanButtonListener() {
    scanButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            IntentIntegrator integrator = new IntentIntegrator(MainActivity.this);
            integrator.addExtra("SCAN_WIDTH", 800);
            integrator.addExtra("SCAN_HEIGHT", 200);
            integrator.addExtra("RESULT_DISPLAY_DURATION_MS", 0L);
            integrator.addExtra("SCAN_FORMATS", "EAN_13,EAN_8");
            integrator.addExtra("SAVE_HISTORY", false);
            integrator.addExtra("PROMPT_MESSAGE", "Scan please");
            integrator.initiateScan(IntentIntegrator.PRODUCT_CODE_TYPES);
        }
    });
} 
```

Would you have any clue ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:51:18.433

不，如果有任何事情，Android 会打电话给`onCreate()`您`Activity`。如果需要，Android 可能会随时销毁并重新创建您的应用。因此，您需要实施`onDestroy()`并`onCreate()`为此做好适当的准备。

# yaml - 如何在 behat.yml 中定义多个格式化程序？

> ID：13702077
> 
> 赞同：3
> 
> 时间：2012-12-04T11:40:48.330
> 
> 标签：yaml, behat

Behat 命令行配置选项支持定义多个格式化程序： http: [//docs.behat.org/guides/6.cli.html#format-options](http://docs.behat.org/guides/6.cli.html#format-options)。

我想在 YAML 配置文件中定义多个格式化程序，但我对 YAML 很烂，并且似乎无法获得正确的语法。

到目前为止，我有：

```
default:
  - formatter:
      name: junit
      parameters: 
        output_path: xml
  - formatter:  
      name: pretty
      parameters: ~

  extensions:
    Behat\MinkExtension\Extension:
      base_url:  'http://myurl.com'
      javascript_session: sahi
      browser_name: chrome
      goutte: ~
      sahi: ~ 
```

这给出了错误：

> 在序列中时不能定义映射项

我也尝试过将元素定义为单个格式化程序中的列表，但表示格式化程序不能包含编号索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T11:57:52.893

在 Behat 3.x 中使用：

```
build:
  formatters:
    progress:
    junit: [./build/logs/behat]
    html: [./build/behat/index.html] 
```

在 Behat 2.x 中，使用逗号分隔格式化程序名称，就像在命令行中一样：

```
default:
  formatter:
    name: progress,junit,html
    parameters:
      output_path: ,./build/logs/behat,./build/behat/index.html 
```

# javascript - 如何访问Json中的给定元素

> ID：13702081
> 
> 赞同：0
> 
> 时间：2012-12-04T11:41:00.577
> 
> 标签：javascript

我是 Json 的新手。请告诉我如何访问以下元素。这是我的 Json

```
var data = {"student":[{"fname":"mad", "sname":"cha"}, {"fname":"sun", "sname":"ban"}, {"fname":"sha", "sname":"kiri"}]}; 
```

所以我如何获得`"mad"`价值。

实际上这就是我想做的

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script>
    function click_me(){
        var data = {"student":[{"fname":"mad", "sname":"cha"}, {"fname":"sun", "sname":"ban"}, {"fname":"sha", "sname":"kiri"}]};
        localStorage.setItem('my_name',data);
        alert('OK');
    }

    function show_me(){
        var x = localStorage.getItem('my_name');
        x = x.student[0].fname;
        alert(x);
    }
</script>

</head>
<body>
  <input type="button" name="btn" value="Click" onclick="click_me()">
  <input type="button" name="btn" value="show_me" onclick="show_me()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:42:10.503

它是

```
var yourValue = data.student[0].fname 
```

顺便说一句，这不是 JSON，而是一个普通的 javascript 对象。[JSON](http://www.json.org/)是一种基于字符串的交换格式。

* * *

**编辑后编辑。**

localStorage 只存储字符串。这就是为什么`getItem`给你一个你找不到你的“疯子”的字符串。

这是您可以执行的操作：

```
function click_me(){
    var data = {"student":[{"fname":"mad", "sname":"cha"}, {"fname":"sun", "sname":"ban"}, {"fname":"sha", "sname":"kiri"}]};
    localStorage.setItem('my_name', JSON.stringify(data));
    alert('OK');
}

function show_me(){
    var x = JSON.parse(localStorage.getItem('my_name')||"{}");
    x = x.student[0].fname; // it would be cleaner to test x.student exists
    alert(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:42:28.483

按如下方式访问该值：

```
var firstName = data.student[0].fname; 
```

示例：http: [//jsfiddle.net/N8bSk/](http://jsfiddle.net/N8bSk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:44:51.900

你可以这样做

```
 var yourValue = data.student[0].fname 
```

# macos - Sublime Text 2 OSX Grunt build system woe

> ID：13702090
> 
> 赞同：0
> 
> 时间：2012-12-04T11:41:35.380
> 
> 标签：macos, sublimetext2, gruntjs

I'm trying to use Sublime Text 2s build system to run a Grunt task. I have no issues using Grunt within Terminal. My setup works well on my Windows machine but my Mac hates it.

This is my .sublime-build configuration:

```
{
  "selector": "grunt.js",
  "working_dir": "${project_path}/js",
  "windows": {
    …
  },
  "osx": {
    "cmd": ["grunt", "--no-color"]
  }
} 
```

And the output returned is:

```
[Errno 2] No such file or directory 
```

The working directory and path returned are correct. My software versions are:

*   OSX 10.8.2
*   Node 0.8.9
*   NPM 1.1.68
*   Grunt 0.3.17
*   Sublime Text 2.0.1

Please save me any more frustrated Googling!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:21:56.893

确保`grunt`在您的`path`with sublime 中（它可能与您的终端路径不同）。查找路径类型：`npm bin -g`. 您可以在 sublime-build 配置中设置路径：

```
{
  "selector": "grunt.js",
  "working_dir": "${project_path}",
  "path": "/usr/local/bin",
  "osx": {
    "cmd": ["grunt", "--no-color"]
  }
} 
```

只是一个挑剔，将 设置`working_dir`为基本项目路径。并不重要，因为 grunt 会在到达 gruntfile 之前找到它，但这会稍微快一点地找到 gruntfile ;)

# core-data - 核心数据编程

> ID：13702092
> 
> 赞同：1
> 
> 时间：2012-12-04T11:41:44.943
> 
> 标签：core-data

我对核心数据编程比较陌生。任何人都可以在以下问题上帮助我。我在 1 个实体中创建了一个具有 4 个属性的对象模型。图像名称、图像坐标、文本、特征。并将所有值设置为数据库，我从数组中获取所有对象。实际上我需要将当前图像与数据库图像进行比较。如果存在，我需要从数据库中加载所有值，即图像名称。相关加载图像的图像坐标、文本和特征。如何将 self.image 与数据库中的图像进行比较。实际上我正在将图像的所有 url 存储到数据库中。如何与数据库中的 self.image url 和 image url 进行比较，并将所有值加载到当前视图中。

请帮我。提前致谢

# javascript - localStorage 对象处理数组

> ID：13702100
> 
> 赞同：19
> 
> 时间：2012-12-04T11:42:10.093
> 
> 标签：javascript, arrays, html, object, local-storage

JSON 对象数组存储在 HTML5 中`localStorage`。
现在分隔符是 用于访问和修改对象数组， 以及使用的操作。**`;`**
`localStorage``split(';')``join(';')`

但是，分隔符方法看起来不稳定。
例如**`;`**可能会在对象属性内部遇到并且`split(';')`操作将不正确。

它可以用于**`;;`**分隔符，但我不确定它是否也会稳定。

是否有任何可靠的方法来处理`localStorage`作为对象数组呈现的对象，就`localStorage`保存为`String`？

**编辑**

阻止者之一是对象数组无法像经典一样保存到 localStorage：`"[{},{}]"`
`localStorage`将其自动转换为 String 之类`"{},{}"`

我当前的数据在`localStorage`：

```
"{"name":"volvo","id":"033"};{"name":"saab","id":"034"}" 
```

**也许假设**
，我可以`[`在开头和`]`结尾添加，但它看起来并不优雅

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-04T11:47:04.667

只需将对象转换为 JSON 字符串：

```
localStorage.setItem("savedData", JSON.stringify(objects)); 
```

反之亦然：

```
objects = JSON.parse(localStorage.getItem("savedData"))); 
```

或者您可以在同一个 localStorage 值中添加多个对象：

```
localStorage.setItem("savedData", JSON.stringify([object1, object2 /*, etc*/]));
object1 = JSON.parse(localStorage.getItem("savedData"))[0];
object2 = JSON.parse(localStorage.getItem("savedData"))[1]; 
```

[这是 DOM 存储规范](https://developer.mozilla.org/en-US/docs/DOM/Storage)。

你也可以`savedData`这样访问：

```
localStorage.savedData = "Hello world"
var foo = localStorage.savedData; 
```

这可用于获取和设置数据，但它被认为不如`getItem('name');`和`setItem('name', 'value');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:48:45.703

读取变量：

`var xyz = JSON.parse( localStorage.getItem( 'element' ) );`

存储变量：

`localStorage.setItem( 'element' , JSON.stringify(xyz));`

其中`element`是本地存储变量`xyz`的名称和js变量的名称。

# sql - 获取唯一序列的 SQL 查询

> ID：13702103
> 
> 赞同：2
> 
> 时间：2012-12-04T11:42:14.040
> 
> 标签：sql, sql-server

我有以下数据：

```
Txn Nmbr    Item ID     Desc
4           1111        Test 1
6           2222        Test 2
6           3333        Test 3
7           4444        Test 4
7           5555        Test 5
7           6666        Test 6 
```

我希望所有上述数据都包含一列，这是每个“Txn Nmbr”的唯一序列号。所以，所需的输出是，

```
Txn Nmbr    Item ID     Desc        Unique Txn
4           1111        Test 1      1
6           2222        Test 2      2
6           3333        Test 3      2
7           4444        Test 4      3
7           5555        Test 5      3
7           6666        Test 6      3 
```

请帮我！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:48:46.870

请试试：

```
DECLARE @table as TABLE(TxnNmbr INT, ItemID INT, Descr NVARCHAR(50))

insert into @table values (4, 1111, 'Test1')
insert into @table values (6, 2222, 'Test2')
insert into @table values (6, 3333, 'Test3')
insert into @table values (7, 4444, 'Test4')
insert into @table values (7, 5555, 'Test5')
insert into @table values (7, 6666, 'Test6')

SELECT
   *,
   DENSE_RANK() OVER (ORDER BY [TxnNmbr]) AS [Unique Txn]
FROM @table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:41:33.617

询问：

**[SQLFiddle示例](http://sqlfiddle.com/#!3/305da/2)**

```
SELECT
t1.*,
(SELECT COUNT(*)
 FROM tbl t2
 WHERE t1.[Txn Nmbr] = t2.[Txn Nmbr]) as [Unique Txn]
FROM tbl t1 
```

结果：

```
| TXN NMBR | ITEM ID |   DESC | UNIQUE TXN |
--------------------------------------------
|        4 |    1111 | Test 1 |          1 |
|        6 |    2222 | Test 2 |          2 |
|        6 |    3333 | Test 3 |          2 |
|        7 |    4444 | Test 4 |          3 |
|        7 |    5555 | Test 5 |          3 |
|        7 |    6666 | Test 6 |          3 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:47:29.980

看看 TSQL `RANK`- [MSDN 链接](http://msdn.microsoft.com/en-us/library/ms176102.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:48:15.507

```
select txn_number, 
       item_id, 
       desc, 
       row_number() over (partition by txn_number order by item_id) as unique_txn
from the_table 
```

# python - windows 8 不兼容？

> ID：13702106
> 
> 赞同：2
> 
> 时间：2012-12-04T11:42:20.873
> 
> 标签：python, qt, windows-8, pyside, stackless

我无法让我的代码在我的 win8 笔记本电脑上运行。我正在使用以下组合：

*   无堆栈 Python 2.7.2
*   Qt 4.8.4
*   PySide 1.1.2
*   Eclipse/Pydev 和 WingIDE

这在我的 Win7 PC 上运行良好，但现在我买了一台装有 Windows 8 的演示笔记本电脑。据我所知，所有的安装方式都与我的 PC 上的相同。

当我现在运行我的程序（相同的代码）时，我收到一个警告：

“Qt：检测到未经测试的 Windows 6.2 版！”

好的，这可能是我的问题的根源，但我也得到了错误：

*   有时程序会在上面的警告之后退出（我认为只有 eclipse）
*   有时我会得到一个 APPCRASH（我认为只有 eclipse）
*   有时我得到异常：TypeError：调用元类基础时出错：mro（）返回的基础布局不合适（''）
*   有时我得到异常：TypeError：调用元类基础时出错：多个基础有实例布局冲突

特别是最后两个似乎不是Windows问题，但我看不出与我的PC win7安装有任何其他区别。有谁知道发生了什么或如何解决这个问题？我是否错过了安装步骤，或者可能是一些不兼容？

干杯，拉斯

有人对此有意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:30:49.450

我对 Pyside 1.1.2 和 Qt 4.8.4 也有同样的问题。我的解决方案是通过右键单击可执行文件 -> 属性 -> 兼容性 -> 以兼容模式运行此程序，将 Python 可执行文件的兼容模式设置为 Windows 7：Windows 7

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:36:28.077

尝试使用 Hyper-V，但 Windows 8 中默认未安装 Hyper-V。您需要转到“打开或关闭 Windows 功能”。

# jakarta-ee - WebLogic 远程热部署

> ID：13702109
> 
> 赞同：1
> 
> 时间：2012-12-04T11:42:27.817
> 
> 标签：jakarta-ee, weblogic, jdeveloper

我在 JDeveloper 中使用 Oracle WebCenter Portal 工作。我已经集成了 Weblogic 服务器实例，可以轻松地进行热部署。此外，我还可以将我的远程（独立）实例声明为集成实例。所以，当我们在团队中工作时，我有一个问题——是否可以在独立的 WebLogic 服务器上热部署应用程序？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:50:57.983

我认为单独使用 JDeveloper 不可能直接做到这一点，但您可能会发现使用[JRebel](http://zeroturnaround.com/software/jrebel/)之类的东西可以实现目标。

# php - 查询不适用于数据查找

> ID：13702116
> 
> 赞同：0
> 
> 时间：2012-12-04T11:42:52.437
> 
> 标签：php, mysql

我有这个查询！为什么它不起作用？

```
 $start=$_REQUEST['to'];
$end=$_REQUEST['from'];
echo $start1 = strftime('%Y-%m-%d', strtotime($start));
echo $end1 = strftime('%Y-%m-%d', strtotime($end));

echo $data = mysql_query( "select * from cdr
WHERE DATE(calldate) BETWEEN '$start1' AND '$end1';
") 
```

我的意思是 $date_get 的输出是： 20121203 ，它应该可以工作。如果我设置它会起作用：

```
echo $data = mysql_query( "select * from cdr
WHERE DATE(calldate) BETWEEN'20121201' AND '20121203';
") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:52:23.220

使用
`BETWEEN '$start1' AND '$end1'`
或者你可以使用
`where DATE(calldate) >= "$start1" and DATE(calldate) =< "$end1"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:48:48.283

[时间](http://php.net/manual/en/function.strftime.php) `Returns a string formatted according format using the given timestamp`。所以在第一个查询中加上引号并得到这样的结果

```
echo $data = mysql_query( "select * from cdr
WHERE DATE(calldate) BETWEEN '$start1' AND '$end1';
"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:49:58.223

你必须替换这个：

```
$data = mysql_query( "select * from cdr 
        WHERE DATE(calldate) BETWEEN $start1 AND $end1;"); 
```

有了这个

```
$data = mysql_query( "select * from cdr 
        WHERE DATE(calldate) BETWEEN '$start1' AND '$end1'"); 
```

没有回显的最终代码：

```
$start=strftime('%Y-%m-%d', strtotime($_REQUEST['to']));
$end=strftime('%Y-%m-%d', strtotime($_REQUEST['from']));

$data = mysql_query( "select * from cdr
    WHERE DATE(calldate) BETWEEN '$start' AND '$end'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:58:51.460

尝试这个

```
 $start1 = date('Y-m-d', strtotime($start));
   $end1   = date('Y-m-d', strtotime($end));

 "SELECT * from `cdr` 
  WHERE DATE_FORMAT(cont_msg_received_dt,'%Y-%m-%d') BETWEEN '".$start1."' AND '".$end1."' " 
```

# android - 如何使用适用于 Android V2 的 Google Maps 处理地图移动端？

> ID：13702117
> 
> 赞同：50
> 
> 时间：2012-12-04T11:42:56.677
> 
> 标签：android, google-maps, android-mapview, google-maps-android-api-2

我想在地图中心更改后立即对地址进行地理编码。

如何使用适用于 Android V2 的新 Google 地图处理地图移动端？（我说的是用户用手指拖动地图的情况）

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-08-05T08:15:58.300

查看新的地图 API。

```
 @Override
public void onMapReady(GoogleMap map) {
    mMap = map;

    mMap.setOnCameraIdleListener(this);
    mMap.setOnCameraMoveStartedListener(this);
    mMap.setOnCameraMoveListener(this);
    mMap.setOnCameraMoveCanceledListener(this);

    // Show Sydney on the map.
    mMap.moveCamera(CameraUpdateFactory
            .newLatLngZoom(new LatLng(-33.87365, 151.20689), 10));
}

@Override
public void onCameraMoveStarted(int reason) {

    if (reason == OnCameraMoveStartedListener.REASON_GESTURE) {
        Toast.makeText(this, "The user gestured on the map.",
                       Toast.LENGTH_SHORT).show();
    } else if (reason == OnCameraMoveStartedListener
                            .REASON_API_ANIMATION) {
        Toast.makeText(this, "The user tapped something on the map.",
                       Toast.LENGTH_SHORT).show();
    } else if (reason == OnCameraMoveStartedListener
                            .REASON_DEVELOPER_ANIMATION) {
        Toast.makeText(this, "The app moved the camera.",
                       Toast.LENGTH_SHORT).show();
    }
}

@Override
public void onCameraMove() {
    Toast.makeText(this, "The camera is moving.",
                   Toast.LENGTH_SHORT).show();
}

@Override
public void onCameraMoveCanceled() {
    Toast.makeText(this, "Camera movement canceled.",
                   Toast.LENGTH_SHORT).show();
}

@Override
public void onCameraIdle() {
    Toast.makeText(this, "The camera has stopped moving.",
                   Toast.LENGTH_SHORT).show();
} 
```

[developer.google.com 示例](https://developers.google.com/maps/documentation/android-api/events#camera-change-events)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-05T16:38:11.287

这是确定拖动开始和拖动结束事件的可能解决方法：

您必须扩展 SupportMapFragment 或 MapFragment。在 onCreateView 中，您必须将 MapView 包装在自定义的 FrameLayout 中（在下面的示例中，它是“TouchableWrapper”类），您可以在其中拦截触摸事件并识别地图是否被点击。如果您的“onCameraChange”被调用，只需检查地图视图是否被按下（在下面的示例中，这是变量“mMapIsTouched”）。

示例代码：

更新 1：

*   在 getView() 中返回原始创建的视图
*   使用 dispatchTouchEvent() 而不是 onInterceptTouchEvent()

自定义框架布局：

```
private class TouchableWrapper extends FrameLayout {

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {

        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                mMapIsTouched = true;
                break;
            case MotionEvent.ACTION_UP:
                mMapIsTouched = false;
                break;
        }

        return super.dispatchTouchEvent(ev);

    }

} 
```

在您自定义的 MapFragment 中：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup parent, 
        Bundle savedInstanceState) {
    mOriginalContentView = super.onCreateView(inflater, parent, 
            savedInstanceState);

    mTouchView = new TouchableWrapper(getActivity());
    mTouchView.addView(mOriginalContentView);

    return mTouchView;
}

@Override
public View getView() {
    return mOriginalContentView;
} 
```

在您的相机更改回调方法中：

```
private final OnCameraChangeListener mOnCameraChangeListener = 
        new OnCameraChangeListener() {

    @Override
    public void onCameraChange(CameraPosition cameraPosition) {
        if (!mMapIsTouched) {
            refreshClustering(false);
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-04-21T20:05:43.357

**已过时**请改用新的地图 API。请参阅**punksta**的回答。

在使用了上面AZ13的解决方案后，遇到了评论中提到的问题，我创建了以下解决方案，可以更可靠地解决问题。但是，由于我在 onRelease 事件之后使用计时器来确定地图是否仍在动画中，因此此解决方案存在轻微延迟。

代码可以通过这个链接在 Github 上找到：[https ://github.com/MadsFrandsen/MapStateListener](https://github.com/MadsFrandsen/MapStateListener)

我的解决方案可以通过以下方式从活动中使用：

```
new MapStateListener(mMap, mMapFragment, this) {
  @Override
  public void onMapTouched() {
    // Map touched
  }

  @Override
  public void onMapReleased() {
    // Map released
  }

  @Override
  public void onMapUnsettled() {
    // Map unsettled
  }

  @Override
  public void onMapSettled() {
    // Map settled
  }
}; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-04T11:54:25.337

我会尝试一个[onCameraChangeListener](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#setOnCameraChangeListener%28com.google.android.gms.maps.GoogleMap.OnCameraChangeListener%29)。每次摄像机移动完成时都会调用监听器。侦听器还将为您提供新位置。在我的测试中，监听器在拖动过程中经常被调用，也许有更好的解决方案。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-12-02T11:05:01.723

最简单的方法是使用 setOnCameraIdleListener 方法来处理地图片段上触摸侦听器的移动结束状态。请参见下面的示例：

```
mMap.setOnCameraMoveStartedListener(new GoogleMap.OnCameraMoveStartedListener() {
    @Override
    public void onCameraMoveStarted(int i) {
        mapPin.startAnimation(animZoomOut);
    }
});

mMap.setOnCameraIdleListener(new GoogleMap.OnCameraIdleListener() {
    @Override
    public void onCameraIdle() {
        mapPin.startAnimation(animZoomIn);
    }
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-06-06T19:40:07.593

从 play-services-maps 9.4.0 开始，您可以简单地使用`GoogleMap.OnCameraMoveStartedListener`,`GoogleMap.OnCameraMoveListener`和`GoogleMap.OnCameraIdleListener`.

如果出于某种原因，您想使用现在已弃用的旧 API，您可以使用`onCameraChangeListener`. 但是你必须注意两点：

1.  `onCameraChange()`拖动地图时可能会调用多次或仅调用一次（拖动停止时）。
2.  最后一次调用中的摄像头位置`onCameraChange()`可能与最终的摄像头位置略有不同。

以下代码将这两个问题都考虑在内：

```
private static final int MESSAGE_ID_SAVE_CAMERA_POSITION = 1;
private static final int MESSAGE_ID_READ_CAMERA_POSITION = 2;
private CameraPosition lastCameraPosition;
private Handler handler;
private GoogleMap googleMap;

public void onMapReady(GoogleMap theGoogleMap) {
    googleMap = theGoogleMap;

    handler = new Handler() {
        public void handleMessage(Message msg) {
            if (msg.what == MESSAGE_ID_SAVE_CAMERA_POSITION) {
                lastCameraPosition = googleMap.getCameraPosition();
            } else if (msg.what == MESSAGE_ID_READ_CAMERA_POSITION) {
                if (lastCameraPosition.equals(googleMap.getCameraPosition())) {
                    Log.d(LOG, "Camera position stable");
                }
            }
        }
    };

    googleMap.setOnCameraChangeListener(new GoogleMap.OnCameraChangeListener() {
        @Override
        public void onCameraChange(CameraPosition cameraPosition) {
            handler.removeMessages(MESSAGE_ID_SAVE_CAMERA_POSITION);
            handler.removeMessages(MESSAGE_ID_READ_CAMERA_POSITION);
            handler.sendEmptyMessageDelayed(MESSAGE_ID_SAVE_CAMERA_POSITION, 300);
            handler.sendEmptyMessageDelayed(MESSAGE_ID_READ_CAMERA_POSITION, 600);
        }
    });
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-10-19T14:45:06.993

[相机空闲是你现在应该使用的](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraIdleListener)

```
 googleMap.setOnCameraIdleListener(new GoogleMap.OnCameraIdleListener() {
        @Override
        public void onCameraIdle() {
           //Called when camera movement has ended, there are no pending animations and the user has stopped interacting with the map.
        }
 }); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-02T10:21:46.363

只要用户拖动地图，我就必须将我的标记设置为中心。我已经使用**Stas Shakirov**答案实现了它

**MapDragListenerFragment.class**

```
public class MapDragListenerFragment extends Fragment implements OnMapReadyCallback, GoogleMap.OnMapLoadedCallback {

    private Context mContext;
    private SupportMapFragment supportMapFragment;
    private Marker centerMarker;
    private LatLng mapCenterLatLng;
    private TextView tvLocationName;
    private Button btnFinalizeDestination;
    private GoogleMap mGoogleMap;

    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_map_drag_listener, container, false);
    }

    @Override
    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        mContext = getActivity();

        tvLocationName = (TextView) view.findViewById(R.id.tv_location_name);
    }

    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        FragmentManager fm = getActivity().getSupportFragmentManager();//getChildFragmentManager();//
        supportMapFragment = (SupportMapFragment) fm.findFragmentById(R.id.map_container);
        if (supportMapFragment == null) {
            //// FIXME: 2/13/2017 crashes at casting to TouchableMapFragment
            supportMapFragment = SupportMapFragment.newInstance();
            fm.beginTransaction().replace(R.id.map_container, supportMapFragment).commit();
        }
        supportMapFragment.getMapAsync(this);

    }

    @Override
    public void onMapReady(GoogleMap googleMap) {

        if (googleMap != null) {
            mGoogleMap = googleMap;

            centerMarker = mGoogleMap.addMarker(new MarkerOptions().position(mGoogleMap.getCameraPosition().target)
                    .title("Center of Map")
                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.end_green)));

            mGoogleMap.setOnCameraIdleListener(new GoogleMap.OnCameraIdleListener() {
                @Override
                public void onCameraIdle() {
                    mapCenterLatLng = mGoogleMap.getCameraPosition().target;

                    animateMarker(centerMarker,mapCenterLatLng,false);

                    Toast.makeText(mContext, "The camera has stopped moving.",
                            Toast.LENGTH_SHORT).show();

                    String address = getCompleteAddressString(mapCenterLatLng.longitude,mapCenterLatLng.longitude);
                    tvLocationName.setText(address);
                }
            });
            mGoogleMap.setOnCameraMoveStartedListener(new GoogleMap.OnCameraMoveStartedListener() {
                @Override
                public void onCameraMoveStarted(int reason) {
                    if (reason == GoogleMap.OnCameraMoveStartedListener.REASON_GESTURE) {
                        ///tvLocationName.setText("Lat " + mapCenterLatLng.latitude + "  Long :" + mapCenterLatLng.longitude);
                        Toast.makeText(mContext, "The user gestured on the map.",
                                Toast.LENGTH_SHORT).show();
                    } else if (reason == GoogleMap.OnCameraMoveStartedListener
                            .REASON_API_ANIMATION) {
                        Toast.makeText(mContext, "The user tapped something on the map.",
                                Toast.LENGTH_SHORT).show();
                    } else if (reason == GoogleMap.OnCameraMoveStartedListener
                            .REASON_DEVELOPER_ANIMATION) {
                        Toast.makeText(mContext, "The app moved the camera.",
                                Toast.LENGTH_SHORT).show();
                    }
                }
            });
            mGoogleMap.setOnCameraMoveListener(new GoogleMap.OnCameraMoveListener() {
                @Override
                public void onCameraMove() {
                    Toast.makeText(mContext, "The camera is moving.",
                            Toast.LENGTH_SHORT).show();
                }
            });
            mGoogleMap.setOnCameraMoveCanceledListener(new GoogleMap.OnCameraMoveCanceledListener() {
                @Override
                public void onCameraMoveCanceled() {
                    Toast.makeText(mContext, "Camera movement canceled.",
                            Toast.LENGTH_SHORT).show();
                }
            });

            mapCenterLatLng = mGoogleMap.getCameraPosition().target;// it should be done on MapLoaded.

            if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.ACCESS_FINE_LOCATION) !=
                    PackageManager.PERMISSION_GRANTED &&
                    ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.ACCESS_COARSE_LOCATION) !=
                            PackageManager.PERMISSION_GRANTED) {
                return;
            }
            mGoogleMap.setMyLocationEnabled(true);
            mGoogleMap.animateCamera(CameraUpdateFactory.zoomTo(15));

            mGoogleMap.setOnMapLoadedCallback(this);
            mGoogleMap.setOnCameraMoveListener(new GoogleMap.OnCameraMoveListener() {
                @Override
                public void onCameraMove() {

                }
            });
        }
    }

    public void animateMarker(final Marker marker, final LatLng toPosition,
                              final boolean hideMarker) {
        final Handler handler = new Handler();
        final long start = SystemClock.uptimeMillis();
        Projection proj = mGoogleMap.getProjection();
        Point startPoint = proj.toScreenLocation(marker.getPosition());
        final LatLng startLatLng = proj.fromScreenLocation(startPoint);
         final long duration = 500;
        final Interpolator interpolator = new LinearInterpolator();
        handler.post(new Runnable() {
            @Override
            public void run() {
                long elapsed = SystemClock.uptimeMillis() - start;
                float t = interpolator.getInterpolation((float) elapsed
                        / duration);
                double lng = t * toPosition.longitude + (1 - t)
                        * startLatLng.longitude;
                double lat = t * toPosition.latitude + (1 - t)
                        * startLatLng.latitude;
                marker.setPosition(new LatLng(lat, lng));
                if (t < 1.0) {
                    // Post again 16ms later.
                    handler.postDelayed(this, 16);
                } else {
                    if (hideMarker) {
                        marker.setVisible(false);
                    } else {
                        marker.setVisible(true);
                    }
                }
            }
        });
    }
} 
```

其中**fragment_map_drag_listener.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1">

        <fragment
            android:id="@+id/map_container"
            android:name="com.google.android.gms.maps.SupportMapFragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <ImageView
            android:id="@+id/iv_center_overlay"
            android:layout_width="25dp"
            android:layout_height="25dp"
            android:visibility="gone"
            android:layout_centerInParent="true"
            android:src="@drawable/start_blue" />
    </RelativeLayout>

    <TextView
        android:id="@+id/tv_location_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="4dp"
        android:text="Location Name" />
</LinearLayout> 
```

**MapDragListenerActivity**在哪里

 **```
public class MapDragListenerActivity extends AppCompatActivity {

    private Context mContext;
    private static final String TAG = MapDragListenerFragment.class.getSimpleName();
    private MapDragListenerFragment mapDragListenerFragment;

    private Button selectPlaceBtn;
    public static final int PLACE_AUTOCOMPLETE_REQUEST_CODE = 1219;

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map_drag_listener);

        mContext = MapDragListenerActivity.this;

        mapDragListenerFragment = new MapDragListenerFragment();
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.frame_container,//where frame_container is a FrameLayout
                        mapDragListenerFragment,
                        MapyFragment.class.getSimpleName()).commit();

        selectPlaceBtn = (Button) findViewById(R.id.btn_select_place);

        selectPlaceBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                try {
                    Intent intent = new PlaceAutocomplete.IntentBuilder(
                            PlaceAutocomplete.MODE_FULLSCREEN).build(MapDragListenerActivity.this);
                    startActivityForResult(intent, PLACE_AUTOCOMPLETE_REQUEST_CODE);
                } catch (GooglePlayServicesRepairableException e) {
                    e.printStackTrace();
                } catch (GooglePlayServicesNotAvailableException e) {
                    e.printStackTrace();
                }
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if(requestCode == PLACE_AUTOCOMPLETE_REQUEST_CODE){
            if (resultCode == RESULT_OK) {
                Place place = PlaceAutocomplete.getPlace(mContext, data);
                if(mapDragListenerFragment != null && mapDragListenerFragment.isVisible())
                    mapDragListenerFragment.updateMarkerAtPosition(
                            place.getLatLng() ,place.getName().toString());

                Log.i(TAG, "Place:" + place.toString());
            } else if (resultCode == PlaceAutocomplete.RESULT_ERROR) {
                Status status = PlaceAutocomplete.getStatus(mContext, data);
                Log.i(TAG, status.getStatusMessage());
            } else if (requestCode == RESULT_CANCELED) {

            }
        }
    }
} 
```

**activity_map_drag_listener.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <Button
        android:id="@+id/btn_select_place"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Select Place" />

    <FrameLayout
        android:id="@+id/frame_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-06-16T20:02:31.677

```
@Override
public boolean onTouchEvent(MotionEvent event, MapView mapView){

    if(event.getAction() == MotionEvent.ACTION_MOVE)
        return true;

    return false;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-06T03:26:04.440

我认为地图中的事件 onclick 是：**map.setOnMapClick** ...但**事件拖动**是：**map.onCameraChangeListener**因为我在这两个函数中都调用了**log.e**，它显示为**onClick** view 和**onDrag** view 。所以只是为你使用它们。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-06T15:24:12.277

基于 Tobus 答案，在 Xamarin Android 中使用 Handler 内部类的增强解决方案：

```
public void OnMapReady(GoogleMap googleMap)
{
        _googleMap = googleMap;

        if (_googleMap != null)
        {
            _cameraPositionHandler = new CameraPositionlHandler(_googleMap);

            _googleMap.CameraChange += OnCameraChanged; 

        }
}

void OnCameraChanged (object sender, GoogleMap.CameraChangeEventArgs e)
{   
    _cameraPositionHandler.RemoveMessages(MESSAGE_ID_SAVE_CAMERA_POSITION);
    _cameraPositionHandler.RemoveMessages(MESSAGE_ID_READ_CAMERA_POSITION);                 
    _cameraPositionHandler.SendEmptyMessageDelayed(MESSAGE_ID_SAVE_CAMERA_POSITION, 300);
    _cameraPositionHandler.SendEmptyMessageDelayed(MESSAGE_ID_READ_CAMERA_POSITION, 600);

} 
```

具有以下内部类：

```
 private class CameraPositionlHandler :  Handler 
    {
        private CameraPosition _lastCameraPosition;
        private GoogleMap _googleMap;

        public CameraPositionlHandler (GoogleMap googleMap)
        {
            _googleMap = googleMap;
        }

        public override void HandleMessage(Message msg) 
        {
            if (_googleMap != null) 
            {
                if (msg.What == MESSAGE_ID_SAVE_CAMERA_POSITION) {
                    _lastCameraPosition = _googleMap.CameraPosition;
                } else if (msg.What == MESSAGE_ID_READ_CAMERA_POSITION) {
                    if (_lastCameraPosition.Equals(_googleMap.CameraPosition)) {
                        Console.WriteLine("Camera position stable");
                        //do what you want
                    }
                }
            }
        }
    } 
```**

# javascript - 我的 JavaScript 代码在本地无法运行，但在 jsfiddle 上运行良好，为什么？

> ID：13702123
> 
> 赞同：0
> 
> 时间：2012-12-04T11:43:14.387
> 
> 标签：javascript, html, javascript-events

我创建了一些 javascript 代码，将表单提交到标签之外。这是代码：

```
<script type="text/javascript">
var myForm = document.forms['myForm'];

var formSubmit = document.getElementById('formSubmit');

formSubmit.onclick = function(){
myForm.submit();
}
</script>

<form name="myForm" action="http://msn.com" method="post"> 
</form>
<div id="formSubmit"><button>Click me</button></div> 
```

[当我在http://jsfiddle.net/HrCxz/](http://jsfiddle.net/HrCxz/)上尝试此代码时，它工作正常。但是当我在 HTML 文件中添加此代码并运行该页面时，它不起作用。代码有什么问题？请解决此问题，并在此先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:45:00.863

在小提琴中，您的代码在`onload`处理程序中运行。这是默认选项，但左侧​​面板允许您更改它。如果您将其更改为在其中运行，`<head>`则小提琴也不起作用：http: [//jsfiddle.net/HrCxz/1/](http://jsfiddle.net/HrCxz/1/)

您需要添加`onload`自己的处理程序，或者将脚本块移动到它尝试操作的元素之后。当浏览器从上到下解析页面时，脚本块按照它们被发现的顺序执行。任何给定脚本块中的 JS 只能操作已解析的元素，即出现在源代码开头的元素，除非您将代码放在从事件调用的事件处理程序`onload`中（或从为浏览器准备好的文档中）支持它，或者如果您使用提供它的库或自己编写代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:45:29.357

JSFiddle 正在使用`onload`事件。

**第1步：**

`<form>`通过将您的 JS 移动到标签下方来尝试此操作，

```
<form name="myForm" action="http://msn.com" method="post"> 
</form>
<div id="formSubmit"><button>Click me</button></div>

<script type="text/javascript">
   var myForm = document.forms['myForm'];

   var formSubmit = document.getElementById('formSubmit');

   formSubmit.onclick = function(){
      myForm.submit();
   }
</script> 
```

**第2步：**

或者你可以像这样附加`onload`事件，

```
<script type='text/javascript'>//<![CDATA[ 
  window.addEvent('load', function() {
     var myForm = document.forms['myForm'];

     var formSubmit = document.getElementById('formSubmit');

     formSubmit.onclick = function(){
         myForm.submit();
     }
  });//]]>  

</script>

<form name="myForm" action="http://msn.com" method="post">
</form>

<div id="formSubmit"><button>Click me</button></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:46:54.083

您在 div 元素上调用 click 函数，是否需要在按钮上执行此操作？`var formSubmit = document.getElementById('BUTTONIDHERE');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:04:36.177

您的代码示例不起作用，因为在浏览器有机会加载 DOM 元素之前正在处理 JavaScript。有必要将您的 JavaScipt 片段放在结束 body 标记之前（因此在加载 DOM 元素后对其进行处理），或者使用“加载时”或“准备就绪”事件处理程序来检测 DOM 何时加载然后触发你的Javascript。

下面是三个在 DOM 元素加载后如何触发 JavaScript 的示例：

1）如果您使用的是 jQuery，请将您的 Javascript 传递到 $(document).ready() 事件处理程序中：

```
$(document).ready(function() {
  // Handler for .ready() called.
  var myForm = document.forms['myForm'];
  var formSubmit = document.getElementById('formSubmit');

  formSubmit.onclick = function(){
    myForm.submit();
  }
}); 
```

2) 您可以使用 jQuery 的备用语法来处理文档“就绪”：

```
$(function() {
  // Handler for .ready() called.
  var myForm = document.forms['myForm'];
  var formSubmit = document.getElementById('formSubmit');

  formSubmit.onclick = function(){
    myForm.submit();
  }
}); 
```

2) 将您的 JavaScript 添加到绑定到窗口“加载”事件的回调函数中 - 这也是一个事件处理程序：

```
window.addEvent('load', function() {
  var myForm = document.forms['myForm'];
   var formSubmit = document.getElementById('formSubmit');

   formSubmit.onclick = function(){
     myForm.submit();
   }
}) 
```

干杯!

# css - 如何设置 Eclipse JS 以将文件编辑为 CSS

> ID：13702129
> 
> 赞同：1
> 
> 时间：2012-12-04T11:43:42.580
> 
> 标签：css, eclipse, editor, less

我使用了lesscss，它工作正常，但是Eclipse 编辑器没有突出显示这些单词，Zen Coding 也没有识别出那个css 文件。如何将 .less 文件作为 .css 文件打开？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:01:29.110

我找到了解决方案：在常规菜单 -> 内容类型选项中，我可以将文件关联添加到 css 内容类型。

# visual-c++ - VS 2005 中 32 位和 64 位 C++ 编译器的区别

> ID：13702132
> 
> 赞同：2
> 
> 时间：2012-12-04T11:43:58.110
> 
> 标签：visual-c++, visual-studio-2005, 32bit-64bit

我打算将一个大型 C++-Project 移植到 x64（其中一些部分是大约 15 年前编写的），我发现 64 位编译器不支持内联汇编，所以我不得不更改代码。我想知道两个编译器之间是否存在更多差异或不兼容性。或者更好的问题是 32 编译器的某些部分是否 64 编译器不支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:20:42.487

相关文章：

*   [64位程序开发中被遗忘的问题](http://www.viva64.com/en/a/0010/)
*   [将程序迁移到 64 位系统的七个步骤](http://www.viva64.com/en/a/0042/)
*   [实际程序中的 64 位错误示例集](http://www.viva64.com/en/a/0065/)

# android - 谷歌在安卓中的应用计费问题

> ID：13702136
> 
> 赞同：1
> 
> 时间：2012-12-04T11:44:11.593
> 
> 标签：android, in-app-billing

我已经在我的 Android 应用程序中实现了应用程序计费，它运行良好，我有一个小问题，我还无法解决它。我没有在本地数据库或任何第三方服务器中保存任何购买项目的记录。因此，当我请求已购买的商品时，在应用程序 API 中显示一个对话框，其中包含文本“您已经拥有此商品”，按下对话框应用程序的确定按钮正在导航到所需的活动。在这里，我想删除此对话框，但由于此对话框由应用程序 API 处理，因此我无法删除此对话框。有什么方法可以删除此对话框，使其不会出现在活动中。任何机构都可以提供任何线索来解决这个小问题。我附上了我的活动中出现的对话框的屏幕截图。 ![在此处输入图像描述](../Images/47bd3fca4a755aaf8c0bffe25cf9541a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:52:04.700

你的问题有答案。您应该跟踪已经购买的物品。

# c++ - 与默认 IF 相比，速记 IF 会提高效率吗？

> ID：13702137
> 
> 赞同：3
> 
> 时间：2012-12-04T11:44:13.247
> 
> 标签：c++, c, performance, if-statement, shorthand

如果我有一个包含任意长度整数的大型数据文件，需要按它的第二个字段进行排序：

```
1 3 4 5
1 4 5 7
-1 34 56 7
124 58394 1384 -1938
1948 3848089 -14850 0
1048 01840 1039 888
//consider this is a LARGE file, the data goes on for quite some time 
```

我呼吁 qsort 作为我的首选武器，在我的排序函数中，使用速记 IF 是否会显着提高数据排序所需的总时间？还是简写 IF 仅用作组织代码的便利工具？

```
num2 = atoi(Str);
num1 = atoi(Str2);
LoggNum = (num2 > num1) ? num2 : num1; //faster? 
```

* * *

```
num2 = atoi(Str);
num1 = atoi(Str2);
if(num2 > num1)    //or the same?
    LoggNum = num2;
else
    LoggNum = num1; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T11:46:05.937

任何现代编译器都会在这两种情况下构建相同的代码，不同之处仅在于样式和便利性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T11:47:08.003

这个问题没有答案……编译器可以自由地生成它认为合适的任何代码。也就是说，只有一个特别愚蠢的编译器才会为这些情况生成截然不同的代码。你应该写任何你觉得最能表达你的程序如何工作的东西......对我来说，三元运算符版本更简洁易读，但不习惯 C 和/或 C++ 的人可能会发现 if/else 版本一开始更容易理解。

如果您对此类事情感兴趣并希望更好地了解代码生成，您应该学习如何调用编译器，要求它生成显示程序 CPU 指令的汇编语言输出。例如，GNU 编译器接受`-S`生成`.s`汇编语言文件的标志。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T11:48:04.530

唯一知道的方法是剖析。但是，三元运算符允许您对对象进行初始化：

```
Sometype z = ( x < y) ? something : somethingElse; // copy initialization 
```

使用`if-else`，您将不得不使用额外的分配来获得等效的行为。

```
SomeType z; // default construction
if ( x < y) {
  z = something; // assignment
} else {
  z = somethingElse; // assignment
} 
```

如果分配给 a 的开销`SomeType`很大，这可能会产生影响。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T12:02:50.673

我们在 VC 2010 中测试了这两个语句：

?= 生成的程序集是：

```
 01207AE1 cmp byte ptr [ebp-101h],0
 01207AE8 jne CTestSOFDlg::OnBnClickedButton1+47h (1207AF7h)
 01207AEA push offset (1207BE5h)
 01207AEF call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207AF4 add esp,4
 01207AF7 cmp byte ptr [ebp-0F5h],0
 01207AFE jne CTestSOFDlg::OnBnClickedButton1+5Dh (1207B0Dh)
 01207B00 push offset (1207BE0h)
 01207B05 call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207B0A add esp,4
 01207B0D mov eax,dword ptr [num2]
 01207B10 cmp eax,dword ptr [num1]
 01207B13 jle CTestSOFDlg::OnBnClickedButton1+86h (1207B36h)
 01207B15 cmp byte ptr [ebp-101h],0
 01207B1C jne CTestSOFDlg::OnBnClickedButton1+7Bh (1207B2Bh)
 01207B1E push offset (1207BE5h)
 01207B23 call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207B28 add esp,4
 01207B2B mov ecx,dword ptr [num2]
 01207B2E mov dword ptr [ebp-10Ch],ecx
 01207B34 jmp CTestSOFDlg::OnBnClickedButton1+0A5h (1207B55h)
 01207B36 cmp byte ptr [ebp-0F5h],0
 01207B3D jne CTestSOFDlg::OnBnClickedButton1+9Ch (1207B4Ch)
 01207B3F push offset (1207BE0h)
 01207B44 call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207B49 add esp,4
 01207B4C mov edx,dword ptr [num1]
 01207B4F mov dword ptr [ebp-10Ch],edx
 01207B55 mov eax,dword ptr [ebp-10Ch]
 01207B5B mov dword ptr [LoggNum],eax 
```

对于 if else 运算符：

```
 01207B5E cmp byte ptr [ebp-101h],0
 01207B65 jne CTestSOFDlg::OnBnClickedButton1+0C4h (1207B74h)
 01207B67 push offset (1207BE5h)
 01207B6C call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207B71 add esp,4
 01207B74 cmp byte ptr [ebp-0F5h],0
 01207B7B jne CTestSOFDlg::OnBnClickedButton1+0DAh (1207B8Ah)
 01207B7D push offset (1207BE0h)
 01207B82 call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207B87 add esp,4
 01207B8A mov eax,dword ptr [num2]
 01207B8D cmp eax,dword ptr [num1]
 01207B90 jle CTestSOFDlg::OnBnClickedButton1+100h (1207BB0h)
 01207B92 cmp byte ptr [ebp-101h],0
 01207B99 jne CTestSOFDlg::OnBnClickedButton1+0F8h (1207BA8h)
 01207B9B push offset (1207BE5h)
 01207BA0 call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207BA5 add esp,4
 01207BA8 mov eax,dword ptr [num2]
 01207BAB mov dword ptr [LoggNum],eax
 01207BB0 cmp byte ptr [ebp-0F5h],0
 01207BB7 jne CTestSOFDlg::OnBnClickedButton1+116h (1207BC6h)
 01207BB9 push offset (1207BE0h)
 01207BBE call @ILT+840(__RTC_UninitUse) (120134Dh)
 01207BC3 add esp,4
 01207BC6 mov eax,dword ptr [num1]
 01207BC9 mov dword ptr [LoggNum],eax 
```

如您所见 ?= 运算符还有两个 asm 命令：

```
01207B4C mov edx,dword ptr [num1]
01207B4F mov dword ptr [ebp-10Ch],edx 
```

这需要更多的 CPU 滴答声。

如果 else 更快，则为 97000000 大小的循环。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-04T12:31:57.433

这种特殊的优化让我在一个真实的代码库中受到了影响，在锁定函数中从一种形式更改为另一种形式在宏基准测试中节省了 10% 的执行时间。

让我们在 MacOS 上使用 gcc 4.2.1 进行测试：

```
int global;

void
foo(int x, int y)
{
    if (x < y)
        global = x;
    else
        global = y;
}

void
bar(int x, int y)
{
    global = (x < y) ? x : y;
} 
```

我们得到（清理）：

```
_foo:
        cmpl    %esi, %edi
        jge     L2
        movq    _global@GOTPCREL(%rip), %rax
        movl    %edi, (%rax)
        ret
L2:
        movq    _global@GOTPCREL(%rip), %rax
        movl    %esi, (%rax)
        ret

_bar:
        cmpl    %edi, %esi
        cmovle  %esi, %edi
        movq    _global@GOTPCREL(%rip), %rax
        movl    %edi, (%rax)
        ret 
```

考虑到专门添加了 cmov 指令来提高这种操作的性能（通过避免管道停顿），很明显，这个特定编译器中的“？：”更快。

编译器是否应该在两种情况下生成相同的代码？是的。会吗？不，当然不是，没有编译器是完美的。如果您真的关心性能（在大多数情况下您不应该），请测试并查看。

# matlab - 最大可以引入舍入误差吗？

> ID：13702138
> 
> 赞同：2
> 
> 时间：2012-12-04T11:44:14.217
> 
> 标签：matlab, max, precision

通常， == 运算符不适合测试“数字”相等性，但应该执行类似`abs(a - b) < eps`. 但是，当我想找到数组中最大元素的位置时，假设`max`将返回元素不变是否可以保存？可以吗

```
[row, col] = find(a == max(a(:)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:46:37.473

是的。

`max`只比较两个值，不对它们做任何可能改变它们值的操作。

这是 a 的典型 C++ 实现`max`：

```
template <class T>
T max(T a, T b) {
    return a>b ? a : b; 
} 
```

如您所见，此函数将返回与or*完全相同的*值。`a``b`

Matlab 只是添加了矩阵形式，花哨的格式化包装器等，但它的内核将遵循与上面示例相同的原则。

所以是的，在这里使用相等是可以的。

# mysql - 将 mysql 转储转换为 sqlite 兼容文件时出错

> ID：13702148
> 
> 赞同：0
> 
> 时间：2012-12-04T11:45:00.797
> 
> 标签：mysql, sqlite, mysqldump

我尝试使用以下脚本将 mysqldump 文件转换为 Sqlite 3 兼容文件。

```
#!/bin/bash
if [ "x$1" == "x" ]; then
 echo "Usage: $0 <dumpname>"
exit
fi

cat $1 |
grep -v ' KEY "' |
 grep -v ' UNIQUE KEY "' |
grep -v ' PRIMARY KEY ' |
sed '/^SET/d' |
sed 's/ unsigned / /g' |
sed 's/ auto_increment/ primary key autoincrement/g' |
sed 's/ smallint([0-9]*) / integer /g' |
sed 's/ tinyint([0-9]*) / integer /g' |
sed 's/ int([0-9]*) / integer /g' |
sed 's/ character set [^ ]* / /g' |
sed 's/ enum([^)]*) / varchar(255) /g' |
sed 's/ on update [^,]*//g' |
sed 's/\\r\\n/\\n/g' |
sed 's/\\"/"/g' |
sed 's/ "id" bigint(20) NOT NULL/ "id" integer primary key autoincrement/g' |
perl -e 'local $/;$_=<>;s/,\n\)/\n\)/gs;print "begin;\n";print;print "commit;\n"' |
perl -pe '
if (/^(INSERT.+?)\(/) {
$a=$1;
s/\\'\''/'\'\''/g;
s/\\n/\n/g;
s/\),\(/\);\n$a\(/g;
 }
' > $1.sql
cat $1.sql | sqlite3 $1.db > $1.err
ERRORS=`cat $1.err | wc -l`
if [ $ERRORS == 0 ]; then
echo "Conversion completed without error. Output file: $1.db"
else
echo "There were errors during conversion.  Please review $1.err and $1.sql for   details."
fi 
```

尝试转换以下转储文件时出现以下错误：

```
DROP TABLE IF EXISTS "acos";
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE "acos" (
  "id" int(10) NOT NULL,
 "parent_id" int(10) DEFAULT NULL,
  "model" varchar(255) DEFAULT NULL,
  "foreign_key" int(10) DEFAULT NULL,
  "alias" varchar(255) DEFAULT NULL,
  "lft" int(10) DEFAULT NULL,
  "rght" int(10) DEFAULT NULL,
  PRIMARY KEY ("id"),
  FULLTEXT KEY "alias" ("alias")
 ); 
```

错误：

```
'/home/anees/TestProjects/mysqltosqlite/sqltests/mysql-to-sqlite.sh'     '/home/anees/TestProjects/mysqltosqlite/sqltests/mydb.sql'
Error: near line 26: near ")": syntax error
Error: near line 41: near "LOCK": syntax error
Error: near line 43: no such table: acos
Error: near line 44: no such table: acos
Error: near line 45: no such table: acos
Error: near line 46: no such table: acos
Error: near line 48: near "UNLOCK": syntax error
Conversion completed without error. Output file:    /home/anees/TestProjects/mysqltosqlite/sqltests/mydb.sql.db 
```

anees@anees-desktop:~/TestProjects/mysqltosqlite/sqltests$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:47:39.250

删除表名中的双引号以及字段声明，例如：

```
DROP TABLE IF EXISTS acos;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE acos ( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:39:43.680

删除`FULLTEXT KEY`; 在 SQLite 中，全文搜索的工作方式[不同](http://www.sqlite.org/fts3.html)。

转储中还有其他错误，但您没有显示代码。在任何情况下，您都可以删除`LOCK`/`UNLOCK`命令。

# asp.net - Microsoft Solver Foundation - 从不返回值

> ID：13702150
> 
> 赞同：1
> 
> 时间：2012-12-04T11:45:05.620
> 
> 标签：asp.net, c#-4.0, ms-solver-foundation

我需要将使用求解器插件的 excel 电子表格移植到 ASP.NET c# 站点，我使用的是 Solver Foundation 3.1 无济于事。

该方程是迭代的，需要满足两个条件才能确定两个决策值。

电子表格上的两个决策值设置为 1

```
Ng = 1
Nv = 1 
```

那么目标是在满足以下条件时找到Formula1的MAX：

```
Decision 1: Formula1 = _na
Decision 2: Formula2 = Formula3 
```

所有公式都使用 Ng 和 Nv，点击求解更改 Ng 和 Nv 以满足每个方程，它需要电子表格上 22 次迭代的平均值。

我在 c# 中实现了它，如下所示：

```
 public class FluxSolver
    {
        public FluxSolver(double _na, double _ygo, double _k, double _alpha, double _inletVoidFraction)
        {
            var solver = SolverContext.GetContext();
            solver.ClearModel();

            var model = solver.CreateModel();

            var decisionNG = new Decision(Domain.RealNonnegative, "NG");
            var decisionNV = new Decision(Domain.RealNonnegative, "NV");

            model.AddDecision(decisionNG);
            model.AddDecision(decisionNV);

            Term formula1 = (_ygo * decisionNG) + ((1 - _ygo) * decisionNV);

            model.AddGoal("Goal", GoalKind.Maximize, formula1);

            model.AddConstraint("Constraint1", ((_inletVoidFraction / _k) * (1 / decisionNG)) == (_alpha * ((1 / decisionNV) - 1)));
            model.AddConstraint("Constraint2", ( _ygo * decisionNG) + ((1 - _ygo) * decisionNV) == _na);

            var solution = solver.Solve();

            NV = decisionNV.GetDouble();
            NG = decisionNG.GetDouble();
            Quality = solution.Quality.ToString();

        }

        public double NG { get; set; }
        public double NV { get; set; }
        public string Quality { get; set; }
    } 
```

我已经用了 3 天了，但仍然没有取得任何进展，求解器只是加载然后消失，从不超时，不返回值等。我的代码中有什么根本错误吗？

任何帮助表示赞赏！

# r - 将某些符号前面的字符串值写入 R 中的 Csv 时出错

> ID：13702154
> 
> 赞同：0
> 
> 时间：2012-12-04T11:45:21.510
> 
> 标签：r

> **可能重复：**
> [数据帧的每个值在写入函数之前转换为字符串](https://stackoverflow.com/questions/13701260/each-value-of-dataframe-convert-to-string-before-write-function)

我有这样的数据

*输入（头部（结果））*

```
structure(c("-y59OhclSVSb18Z-Zhfd-g", "EtfWVLsBThGuJ9-jDwGF-w", 
"OsEpUFRfQ4GPaX8Oh8J6Hw"), .Dim = c(3L, 1L)) 
```

* * *

```
write.csv(result, file =filename,row.names=FALSE) 
```

使用这个函数我可以写入数据，但是在这种情况下，当我写入 csv 文件时，一些值在 id 前面有“-”，它在 excel 中显示#Name（错误）。

在那种情况下我该怎么办？谢谢

# batch-file - 搜索和替换文件名 - 错误修复

> ID：13702156
> 
> 赞同：0
> 
> 时间：2012-12-04T11:45:27.497
> 
> 标签：batch-file, vbscript, batch-rename

我有一个脚本可以更改文件名中的特定字符串（文件存储在“my_folder”中）：

```
Set objFso = CreateObject("Scripting.FileSystemObject")
Set Folder = objFSO.GetFolder("g:\my folder")
For Each File In Folder.Files
sNewFile = File.Name
sNewFile = Replace(sNewFile,"._epf","_v0_1._epf")
if (sNewFile<>File.Name) then
    File.Move(File.ParentFolder+"\"+sNewFile)
end if
Next 
```

如果“g:\my 文件夹”下没有文件夹，则脚本可以正常工作，否则，如果“我的文件夹”中有文件夹并且其中一个（或多个）文件夹的名称与某个文件名相似，则脚本导致不需要的结果，例如乘以替换字符串。

例如，如果“我的文件夹”包含：

> 你好（文件夹）
> 
> hello_.epf（文件）

那么脚本最终会将文件名更改为：

> hello_v0_1_v0_1._epf（不需要的结果）

我希望结果是：

> 你好_v0_1._epf

我会以这种方式感谢快速帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:03:44.663

我没有费心去弄清楚你的 VBScript 哪里出错了。但是您用`batch-file`,`batch`和标记了您的问题`batch-rename`。

这是一个简单的单行程序，可以从命令提示符运行，它可以执行您想要的操作。它甚至不需要批处理脚本。

```
for %F in ("g:\my folder\*._epf") do @ren "%F" "%~nF_v0_1%~xF" 
```

如果要在批处理脚本中运行命令，则需要将所有百分比加倍。

```
@echo off
for %%F in ("g:\my folder\*._epf") do ren "%%F" "%%~nF_v0_1%%~xF" 
```

**编辑**

以上将在扩展名之前为每个文件名附加一个新的版本后缀。

如果要替换现有版本号，则解决方案更加简单。我假设您的版本始终以 开头`_v`，并且`v`永远不会出现在文件扩展名中。

```
ren "g:\my folder\*_v0_1._epf" "*v0_2.*" 
```

上面的命令重命名所有以 . 结尾的文件`_v0_1._epf`。它保留名称中最后一次出现的所有字符`v`，然后添加新版本号，最后附加原始扩展名。

请参阅[Windows RENAME 命令如何解释通配符？](https://superuser.com/q/475874/109090)有关 REN 如何使用通配符的规则。

# c# - 是否可以在 Windows 服务 C# 中获取用户输入

> ID：13702160
> 
> 赞同：2
> 
> 时间：2012-12-04T11:45:46.750
> 
> 标签：c#, windows-services

我正在用 C# 开发一个 Windows 服务。我的要求之一是获得一些用户输入：提供一些选项并让他们选择一个；根据他们的选择，服务应该执行相关的操作。是否可以使用 C# 在 Windows 服务中获取用户输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:47:12.423

不，Windows 服务不是为此而设计的。您将需要使用桌面或 Web 应用程序。如果有充分的理由使用服务，您将需要创建一个应用程序并让它向服务发送或传达输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:49:06.753

我会编写一个单独的应用程序来管理数据库中的选项，用户可以更新服务也连接到的这个数据库，这取决于服务应该采取相应行动的这些值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:48:30.863

不，这是不可能的。您应该创建另一个 Windows 应用程序（例如 winforms 或 WPF）并与服务通信并发送用户输入。您可以通过 WCF 进行通信。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T11:49:42.257

您可以使用 ServiceBroker 对用户输入消息进行排队，并将结果转储到另一个队列中，以针对 UserId 或唯一用户密钥。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T11:56:22.243

就像其他人说的那样，这是不可能的。顾名思义，Windows 服务就是一个服务。如果您想将数据发送到 Windows 服务，您可以通过 ServiceController 类（来自另一个应用程序）来完成，或者如果您感觉特别喜欢 WCF，则可以这样做。

您为什么将其开发为服务？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-27T10:32:34.383

是的，可以从 Windows 服务获取鼠标和键盘的输入。这并不意味着，我们可以直接与 windows 服务交互。服务代码可以读取最后的键盘输入和鼠标位置等事件。例如，服务可以使用`Cursor.Position`属性读取当前鼠标位置。

# javascript - 经典的 asp 页面在 IE9 上无法正常工作

> ID：13702161
> 
> 赞同：1
> 
> 时间：2012-12-04T11:45:52.167
> 
> 标签：javascript, asp-classic, internet-explorer-9

我在一个用经典 asp 编写的 iframe 中有一个旧的弹出页面，它在 IE8 中运行良好，但在 IE9 中没有。它产生了一个很长的任务，我显示了一个等待消息和一个带有 response.flush 的 gif，经过详细说明，它们分别转入成功文本和一个锚点以下载生成的文件。这是在详细说明结束后以这种方式通过 response.write 调用脚本来完成的

```
Response.Write "<script language=Javascript>"   
Response.Write "afterExp();"
Response.Write "</SCRIPT>" 
```

afterExp 函数执行此操作

```
function afterExp() {

var f= document.getElementById("TDtxt");
var a= "Esportazione Terminata";
f.innerText = a

f= document.getElementById("TDimg");
a="<A id='A1' target='_blank' href='<%=sURL %>'>Apri File</A>"
f.innerHTML = a
f.align="right"
sdone="ok"
} 
```

但现在这没有刷新，页面仍然在等待 gif 上。任务还是结束了，我可以在下载文件夹中看到文件。

我还调查了 IIS 7.5 问题，但似乎一切都很好。我认为是IE9的问题。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:03:39.667

我们在 IE 9 和一个长时间运行的任务中遇到了类似的问题。似乎某些 IE 安装程序设置了 10 秒的奇怪请求超时。没有真正的解释为什么会这样，但它确实发生了。因此，即使在两台相同的 Windows 7 计算机上，一台可以正常超时，而一台可以有 10 秒超时（发生在我们的工作中）。

10 秒后 IE 将结束任务，但在服务器上它将继续并因此创建文件。解决方案是更改注册表以允许更大的超时。

[请参阅http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/what-is-default-receivetimeout-for-ie9-get-error/457051d0-25a1-426d-bf19-](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/what-is-default-receivetimeout-for-ie9-get-error/457051d0-25a1-426d-bf19-4d912f946f8b?msgId=1c559500-08fe-420f-83ce-bedd57f208a9)上的遮阳篷[4d912f946f8b?msgId=1c559500-08fe-420f-83ce-bedd57f208a9](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/what-is-default-receivetimeout-for-ie9-get-error/457051d0-25a1-426d-bf19-4d912f946f8b?msgId=1c559500-08fe-420f-83ce-bedd57f208a9)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T12:03:09.223

这是一个`IE9`问题。当您`IFrame`通过`DOM`. `IE9`当您移动`IFrame`.

# database - TYPO3 Extbase：检查数据库条目是否已经存在

> ID：13702162
> 
> 赞同：0
> 
> 时间：2012-12-04T11:45:56.310
> 
> 标签：database, typo3, extbase

如何使用 extbase 进行数据库查询以检查数据库条目是否已存在？我知道如何使用 php 但不使用 extbase 语法来做到这一点。

我想在数据库中添加一个用户。这样可行。但仅当 regId 尚不存在时才应添加用户。

到目前为止，这是我的代码：

```
/**
 * action registerDevice  
 * @param Tx_xxx_Domain_Repository_UserRepository $muserRepository 
 * @return void
 */

public function registerDeviceAction(){

    $userRepository = $this->objectManager->get('Tx_xxx_Domain_Repository_UserRepository');
    $user = $this->objectManager->create('Tx_xxx_Domain_Model_User');

    $allUser = $this->userRepository->findAll();

    if ( isset($_POST["regId"]) && $_GET['os'] ) {

        $regDevice = $_POST["regId"];
        $regMobileOs = $_GET["os"];

        $user->setMobileOs( $regMobileOs );
        $user->setFirstName('TEST');
        $user->setRegId( $regDevice );  

        $this->userRepository->add($user);

        $persistenceManager = t3lib_div::makeInstance('Tx_Extbase_Persistence_Manager');
        $persistenceManager->persistAll();

        }

    } 
```

非常感谢！:)

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:13:10.750

从 Extbase 1.1 开始，您可以使用 Magic Method`find(One)ByProperty`和`countByProperty`.

因此，在不创建新方法的情况下，您可以使用以下内容：

```
if(!$this->someRepository->countByRegId($regId)) {
    // there isnt a object with $regId yet
} 
```

# mysql - 如何在MYSQL中计算时差

> ID：13702164
> 
> 赞同：6
> 
> 时间：2012-12-04T11:46:01.497
> 
> 标签：mysql

我有使用 MYSQL 作为数据库的 Rails 应用程序。在某些情况下，我必须从当前时间前 2 小时存储的表中删除所有记录。

我的查询是：

```
DELETE FROM TABLE_NAME WHERE (NOW() - created_at) > 7200; 
```

这里 create_at 是日期时间列类型。以“2012-12-04 06:39:44”格式存储值

我的问题是，即使记录创建时间仅为 40 到 50 分钟并被删除，上述查询也会获取记录。唯一的问题是记录在创建时间达到 40 到 50 分钟后被删除。

任何人都可以更正我的查询。我想要 MySQL 解决方案。请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:49:44.860

如果您想删除恰好在 2 小时前创建的记录，您可能需要这个：

```
DELETE FROM TABLE_NAME WHERE created_at = NOW() - INTERVAL 2 HOUR 
```

或者这个，这将删除超过 2 小时前创建的所有记录：

```
DELETE FROM TABLE_NAME WHERE created_at < NOW() - INTERVAL 2 HOUR 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:50:52.763

尝试这个 ：：

```
DELETE FROM TABLE_NAME WHERE TIMEDIFF(NOW(),created_at) < '02:00:00'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:52:53.123

尝试：

```
DELETE FROM TABLE_NAME WHERE created_at<DATE_SUB(NOW(),INTERVAL 2 HOUR) 
```

此查询将删除超过 2 小时前创建的所有内容。放一个等号意味着正好 2 小时前（以秒为单位）。当然，您可以格式化日期以仅考虑分钟，但这会减慢查询速度。如果 created_at 被索引（我认为应该是），不要对其执行任何功能，以便它可以使用索引更快地执行删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:55:22.463

我了解您想删除在一段时间内创建的所有记录。因此，您不应将“大于”运算符应用于减法运算。相反，您应该尝试指定适当的时间范围。

您还可以查看 timediff 函数 [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)

抱歉，我无法为您发布正确的声明，因为我手头没有 mysql 服务器。

# wpf - Path.Data 样式仅适用于样式对象的第一个实例

> ID：13702171
> 
> 赞同：8
> 
> 时间：2012-12-04T11:46:20.060
> 
> 标签：wpf, windows-phone-7, xaml, styles

A 有一个 ListBox 项目，每个 ListBoxItem 都包含一个`Path`对象形式的图标，如下所示：

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <Grid ...>
            ...
            <Path Margin="4" Style="{StaticResource ErrorIconPath}" 
                  Stretch="Uniform" Width="26" Height="26"
                  RenderTransformOrigin="0.5,0.5" Grid.Column="1" Grid.Row="1"
                  UseLayoutRounding="False"
                  HorizontalAlignment="Center" VerticalAlignment="Center" />
        </Grid>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

Path 的样式包含在`Appl.xaml`( `Application.Resources`section) 中，如下所示：

```
<Style x:Key="ErrorIconPath" TargetType="Path">
    <Setter Property="Data" Value="F1M874.094,289.369L854.3,254.63C854.028,254.151 853.515,253.856 852.958,253.856 852.403,253.856 851.89,254.151 851.617,254.63L831.824,289.369C831.555,289.84 831.559,290.416 831.835,290.883 832.111,291.348 832.618,291.634 833.165,291.634L872.752,291.634C873.299,291.634 873.805,291.348 874.081,290.883 874.357,290.416 874.361,289.84 874.094,289.369 M855.653,287.189L850.264,287.189 850.264,282.745 855.653,282.745 855.653,287.189z M855.653,279.41L850.264,279.41 850.264,266.077 855.653,266.077 855.653,279.41z" />
</Style> 
```

问题在于，只有 ListBox 中的第一项`Data`按预期绑定属性，其他项根本不绑定它（因此它们显示为空白，但与 的大小匹配`Path`）。此外，当我在其他任何地方（即在 ListBox 之外）使用该样式时，只有发生的第一个实例会绑定。

奇怪的是，如果我在而不是 inline 中定义例如`Fill`属性`Style`，它就可以正常工作并且不会出现与`Path`属性相同的问题。

我的猜测是这与`Data`不是原始类型有关，但我还没有找到任何修复方法。

编辑：有趣的是，当我将`Data`属性直接绑定到`System.String`资源时，它可以工作。我仍然希望能够通过 Style 定义这个属性。

编辑 2：我刚刚在 WPF 中遇到了同样的问题，当通过在更多按钮中使用的样式将路径设置为按钮的内容时。路径仅显示在一个按钮中，其他按钮为空白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T04:33:44.443

Path.Fill 是一个 DependencyProperty，而 Path.Data 不是。而是这样做：

```
<DataTemplate>
    <Grid ...>
        ...
        <ContentPresenter Content="{StaticResource MyPath}"/>
    </Grid>
</DataTemplate> 
```

`ContentPresenter.Content`是一个 DependencyProperty 所以这应该工作：

```
<Path x:Key="MyPath" Margin="4" Style="{StaticResource ErrorIconPath}" 
      Stretch="Uniform" Width="26" Height="26" VerticalAlignment="Center"
      RenderTransformOrigin="0.5,0.5" Grid.Column="1" Grid.Row="1"
      UseLayoutRounding="False" HorizontalAlignment="Center"
      Data="F1M874.094,289.369L854.3,254.63C854.028,254.151 853.515,253.856 852.958,253.856 852.403,253.856 851.89,254.151 851.617,254.63L831.824,289.369C831.555,289.84 831.559,290.416 831.835,290.883 832.111,291.348 832.618,291.634 833.165,291.634L872.752,291.634C873.299,291.634 873.805,291.348 874.081,290.883 874.357,290.416 874.361,289.84 874.094,289.369 M855.653,287.189L850.264,287.189 850.264,282.745 855.653,282.745 855.653,287.189z M855.653,279.41L850.264,279.41 850.264,266.077 855.653,266.077 855.653,279.41z"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T23:38:38.077

我猜[几何](http://msdn.microsoft.com/en-us/library/system.windows.media.geometry.aspx)不能共享。您是否尝试过将其设置为：[`x:Shared`](http://msdn.microsoft.com/en-us/library/aa970778.aspx)`= "false"`

```
<Style x:Key="ErrorIconPath" TargetType="Path"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T23:43:49.310

我在 Silverlight 中遇到过同样的行为，并在 StackOverflow.com ( [https://stackoverflow.com/q/13426198/1796930](https://stackoverflow.com/q/13426198/1796930) ) 上提出了类似的问题，但在我写这篇文章时，已经 1 个月了，我还没有得到一个答案。

但是，正如您在第一次编辑中提到的那样，我也能够通过使用我的几何数据作为字符串创建资源然后`Data`将对象的属性绑定`Path`到字符串资源资源来执行解决方法。

我还必须创建两个`Path`相同的对象实例，而不是使用不同的资源（即两个不同的图标），然后将每个实例的可见性绑定到我的 ViewModel 中的一个属性以显示适当的一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T10:59:31.160

我很确定你没有忘记路径风格的笔画

```
<Setter Property="Stroke" Value="Red"/> 
```

我已经在我的机器上测试了你的代码，如果上面的行添加了样式，它工作得很好

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T14:14:20.680

我的第一个问题是您的路径将被破坏或无效。但后来我看到你正在使用 Syncfusion Metro Studio。我使用与您完全相同的代码进行了尝试，并且效果很好。在 5 个项目的数据模板中或作为单个路径项目。

您是否尝试将填充静态设置为红色或其他？

也可以试试这个样式定义

```
<Style x:Key="ErrorIconPath" TargetType="{x:Type Path}"> 
```

第三个建议是将样式定义从应用程序移动到您的页面，甚至移动到您的控件本身。

为确保不会应用默认样式，请尝试

```
OverridesDefaultStyle="True" 
```

希望这可以帮助 ：）

# php - PHP中的数组和函数

> ID：13702180
> 
> 赞同：-4
> 
> 时间：2012-12-04T11:46:45.033
> 
> 标签：php, arrays, function

我有这个代码：

```
<?php
function maxvalue() {
    $a=array(12,17,4,25,8);
    $temp=$a[0];
    for ($i=0; $i<=3; $i++) {
        if($temp<$a[$i+1]) {
            $temp=$a[$i+1]; 
        }
    }
    echo $temp."<br>";
}
maxvalue();
?> 
```

此代码将显示最大数量 {25}。但我想显示中间的数字。我怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:50:47.700

利用

[arsort](http://php.net/manual/en/function.arsort.php)为此，然后遍历数组`count/2+1`item no ，您将获得您的号码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:52:49.160

## 非动态方式

```
<?php
function maxvalue()
{
    $a = array(12,17,4,25,8);
    return $a[2];
}

echo maxvalue();
?> 
```

## 动态方式

```
<?php
function maxvalue()
{
    $a = array(12,17,4,25,8);
    $middle = floor(count($a) / 2);
    return $a[$middle];
}

echo maxvalue();
?> 
```

但是调用这个方法/函数 maxvalue 是不行的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:54:50.260

怎么样：

```
$temp;
$midvalue = $temp / 2;
echo "Midvalue: " . $midvalue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:56:11.010

中间值 van 采用：

```
$a=array(12,17,4,25,8);

function arMiddle($ar) {
    if (!is_array($ar)) {
        trigger_error("Not an array");
    }

    $c = count($ar);

    if ($c%2==0) {
        trigger_error("Equal number of records, no middle");
    }   

    $m = floor($c/2);
    sort($ar);

    return $ar[$m];
}

print arMiddle($a); 
```

输出将是 12。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:01:47.620

我想你想要的是**Median**然后你可以使用：

```
$a = array(12,17,4,25,8);
rsort($a);
echo $a[round(count($a) / 2) - 1]; 
```

输出

```
 12 
```

[现场演示](http://3v4l.org/NtScm)

# xamarin.ios - 如何防止单个 UIViewContoller 在 Monotouch 中旋转？（所有其他视图都可以旋转）

> ID：13702182
> 
> 赞同：0
> 
> 时间：2012-12-04T11:46:50.783
> 
> 标签：xamarin.ios, rotation, orientation

我有一个支持所有方向的 iPhone 应用程序，但在一个 UIViewController 中我只想支持纵向（或倒置）。

我已将以下代码添加到我的 UIViewController 但它仍然旋转。

```
public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation     toInterfaceOrientation)
    {
        // Return true for supported orientations
        return ((toInterfaceOrientation != UIInterfaceOrientation.LandscapeLeft) && (toInterfaceOrientation != UIInterfaceOrientation.LandscapeRight));
    } 
```

无论我在哪里添加 ShouldAutorotateToInterfaceOrientation 代码，它仍然会旋转！

有没有办法让应用程序支持所有 UIViewControllers 的所有方向，除了一个？

我也在使用 NavigationController - 这会影响事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T17:15:35.257

可能发生这种情况是因为您的根导航控制器带来了自己的旋转。让我们假设你的根导航控制器是一个普通的 UINavigationViewController。创建派生自己的版本：

```
public class UINavigationControllerWithoutRotation : UINavigationController
{
    public UINavigationControllerWithoutRotation()
    {
    }

    public UINavigationControllerWithoutRotation(UIViewController viewController) : base(viewController)
    {
    }

    public override bool ShouldAutorotate()
    {
        return false;
    }
} 
```

现在使用它作为根控制器。找到这样的代码：

```
var myRootController = new UINavigationController(); 
```

并将其替换为

```
var myRootController = new UINavigationControllerWithoutRotation(); 
```

那应该做的工作。请记住，如果您的根视图控制器是 UITabBarController，则您必须做一些不同的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:10:36.807

如果您使用 iOS 6，则必须覆盖 GetSupportedInterfaceOrientations 方法，而不是 ShouldAutorotateToInterfaceOrientation

```
 public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()
    { ... } 
```

# iphone - 无法将导入的类方法与 cocos2d 一起使用

> ID：13702185
> 
> 赞同：0
> 
> 时间：2012-12-04T11:46:57.767
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, xcode4.5

有个问题，我刚装了cocos2d for iPhone。
第一个问题是它不能识别像 CCDirectory.h 这样的任何头文件。
所以我在项目中打开了用户搜索路径，但这样我可以只导入标头并拥有一个对象指针而不会收到任何警告，但方法无法识别。
很难解释，所以看这段代码：

标题：

```
#import <UIKit/UIKit.h>
#import <CCMenuItem.h>
#import <cocos2d.h> 
```

在 applicationDidFinishLaunching 内部：

```
CCMenuItem* item; // This does not give a warning, except for the "unused variable"
                  // But the class is recognized

[CCMenuItem setFontName: @""]; // Warning 
```

警告是：

```
Class method '+setFontName:' not found (return type default to 'id') 
```

它不识别任何其他方法，只识别 NSObject 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:21:09.397

您确定您调用的方法存在于该类中吗？CCMenuItem 不包含名为 setFontName 的静态方法。尝试将 CCMenuItem 更改为 CCMenuItemFont。

```
[CCMenuItemFont setFontName: @""]; 
```

# excel - 如何防止用户删除工作表，但让所有其他工作保持打开状态

> ID：13702186
> 
> 赞同：1
> 
> 时间：2012-12-04T11:47:02.447
> 
> 标签：excel, excel-2007, vba

我开发了一个 Excel 应用程序，用户可以在其中输入自定义类别。我让用户使用自定义功能区中的按钮调用并隐藏此数据输入工作表。

现在我意识到用户可能会不小心删除这些工作表。如何禁用此工作表的删除命令，同时保持所有其他内容处于打开状态？

我一直在网上搜索，但对此一无所知。

这适用于 Excel 2007

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:48:40.240

保护他们。

`Tools > Protection > Protect Worksheet.`

添加密码并选择您的用户应在工作表中执行的操作。

您也可以使用相同的方法`VBA`。检查以下[链接](http://excelusergroup.org/blogs/nickhodge/archive/2008/02/03/ribbon-step-by-step-part-3-the-office-menu-and-re-purposing.aspx)

**更新了用于表级保护的代码**

您可以将以下代码放入您需要管理任何恶作剧的工作表中；）

```
Private Sub Worksheet_Activate()
    ThisWorkbook.Protect Password:="Password", Structure:=True
End Sub

Private Sub Worksheet_Deactivate()
    ThisWorkbook.Unprotect Password:="Password"
End Sub 
```

但是你看，当你有一本书有 100 页，如果你想保护 50 页。然后，您必须将所有工作表索引保存到`very hidden sheet`. 在模块级 VBA 代码中使用该列表来触发保护。因为不是每次你都会有按升序排列的床单。如果按顺序排列索引，您可以简单地迭代它们。

如果您也想拥有工作簿级别的代码，请告诉我。

# r - 在 for 循环中添加值而不是覆盖

> ID：13702190
> 
> 赞同：0
> 
> 时间：2012-12-04T11:47:07.250
> 
> 标签：r, loops, for-loop

我有一个简单的问题，我无法用 for 循环解决。我每次在我的 for 循环中计算并保存一列的平均值。

在第一个循环中，平均值被保存到变量中。但在第二个循环中，column2 的平均值将替换 column1 的平均值。这是一个非常基本的问题，但我不知道该怎么做。

```
#read.table(file1)
for (x in 1:100){
f <- mean(file1[,x])
} 
```

我想将所有列的平均值保存在 1 个变量中（假设它被称为“f”）。

```
f <- c(meancol1, meancol2, meancol3... meancol100) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:56:15.787

更简单的是你可以使用`colMeans`函数。这是一个例子

```
> set.seed(001)  # Generating some random data
> file1 <- data.frame(matrix(rnorm(50, 100, 5), ncol=5))
> file1 # this is how the artificial data.frame should look like
          X1        X2        X3        X4        X5
1   96.86773 107.55891 104.59489 106.79340  99.17738
2  100.91822 101.94922 103.91068  99.48606  98.73319
3   95.82186  96.89380 100.37282 101.93836 103.48482
4  107.97640  88.92650  90.05324  99.73097 102.78332
5  101.64754 105.62465 103.09913  93.11470  96.55622
6   95.89766  99.77533  99.71936  97.92503  96.46252
7  102.43715  99.91905  99.22102  98.02855 101.82291
8  103.69162 104.71918  92.64624  99.70343 103.84266
9  102.87891 104.10611  97.60925 105.50013  99.43827
10  98.47306 102.96951 102.08971 103.81588 104.40554
> colMeans(file1)  # this part computes the means for each column without a 'for' loop
       X1        X2        X3        X4        X5 
100.66101 101.24422  99.33163 100.60365 100.67068 
```

看一眼`?colMeans`

如果您有非数字列，您可以使用`sapply`内部自动跳过它们`colMeans`，例如：

```
set.seed(001)  # Generating some random data
file1 <- data.frame(matrix(rnorm(50, 100, 5), ncol=5))
# Creating three columns with non-numeric data
factors <- data.frame(matrix(sample(letters, 30, TRUE), ncol=3))

file1 <- cbind(factors, file1) # this is your data.frame
colnames(file1) <- paste0('Col.', 1:ncol(file1)) # set some colnames
file1 # this is the data.frame to work with
> colMeans(file1[sapply(file1, is.numeric)])# colmeans for only those numeric cols
    Col.4     Col.5     Col.6     Col.7     Col.8 
100.65027 101.52467 102.04486  99.14944 100.23847 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:50:08.070

你不需要循环。

```
f<-apply(file1,2,mean) 
```

# java - 父母舞台的中心舞台

> ID：13702191
> 
> 赞同：19
> 
> 时间：2012-12-04T11:47:08.280
> 
> 标签：java, javafx-2, javafx, stage

我正在 JavaFx 中创建一个应用程序，我想在其中执行此操作，如果任何子阶段正在打开，那么它应该在父阶段的中心打开。我正在尝试这样做，`mystage.centerOnScreen()`但它会将子阶段分配到屏幕中心，而不是父阶段的中心。如何将子阶段分配到父阶段的中心？

```
private void show(Stage parentStage) {
    mystage.initOwner(parentStage);
    mystage.initModality(Modality.WINDOW_MODAL);
    mystage.centerOnScreen();
    mystage.initStyle(StageStyle.UTILITY);
    mystage.show();
 } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T12:13:48.020

您可以使用父阶段的 X/Y/width/height 属性来执行此操作。您可以执行以下操作，而不是使用`Stage#centerOnScreen`：

```
public class CenterStage extends Application {
    @Override
    public void start(final Stage stage) throws Exception {
        stage.setX(300);
        stage.setWidth(800);
        stage.setHeight(400);
        stage.show();

        final Stage childStage = new Stage();
        childStage.setWidth(200);
        childStage.setHeight(200);
        childStage.setX(stage.getX() + stage.getWidth() / 2 - childStage.getWidth() / 2);
        childStage.setY(stage.getY() + stage.getHeight() / 2 - childStage.getHeight() / 2);
        childStage.show();
    }

    public static void main(String[] args) {
        Application.launch(args);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-20T20:40:52.867

当您没有确定 childStage 的大小时，您必须在调用 onShown 时监听宽度和高度的变化，因为宽度和高度仍然是 NaN。

```
final double midX = (parentStage.getX() + parentStage.getWidth()) / 2;
final double midY = (parentStage.getY() + parentStage.getHeight()) / 2;

xResized = false;
yResized = false;

newStage.widthProperty().addListener((observable, oldValue, newValue) -> {
    if (!xResized && newValue.intValue() > 1) {
        newStage.setX(midX - newValue.intValue() / 2);
        xResized = true;
    }
});

newStage.heightProperty().addListener((observable, oldValue, newValue) -> {
    if (!yResized && newValue.intValue() > 1) {
        newStage.setY(midY - newValue.intValue() / 2);
        yResized = true;
    }
});

newStage.show(); 
```

# android - 在android中删除草稿短信

> ID：13702196
> 
> 赞同：3
> 
> 时间：2012-12-04T11:47:24.363
> 
> 标签：android

我想删除草稿短信。我可以删除收件箱短信。如何删除草稿短信？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:17:56.993

试试下面的代码

```
private void deleteDrafts() {
    /*
     * This will delete all drafts from Messaging App.
     */
    try { 
        Uri uriSms = Uri.parse("content://sms/draft"); 
        Cursor c = getContentResolver().query(uriSms, new String[] { "_id", "thread_id", "address", 
                "person", "date", "body" }, null, null, null); 

        if (c != null && c.moveToFirst()) { 
            do { 
                long id = c.getLong(0); 
                getContentResolver().delete(Uri.parse("content://sms/" + id), null, null); 
            } while (c.moveToNext()); 
        } 
    } catch (Exception e) { 

    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:51:46.277

尝试删除草稿短信

```
this.getContentResolver().delete(Uri.parse("content://sms/draft"),
                          "_id=?", new String[]{"PASS_DRAFT_SMS_ID_HERE"}); 
```

# android - findViewById 多次 VS 全局变量

> ID：13702201
> 
> 赞同：12
> 
> 时间：2012-12-04T11:47:49.123
> 
> 标签：android, performance

我一直在争论什么是有效的方法：当我必须多次使用 xml 中的任何小部件时，**什么**更好：

*   多次使用 findViewById
*   使用 findViewById 结果创建一个字段并使用该字段。

我认为（？）第一个选项是时间问题，第二个选项是空间问题，但可接受的方式是什么？

我是 android/开发初学者，正在寻找公认/真实的方法来更好地做事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:00:19.323

制作一个类似 private void initialize(){} 的方法，并放置所有使用 findViewById() 方法的代码。您可以在需要初始化时使用此方法。最好在类中创建一个方法，而不是为此创建一个新类。

# jquery - 测试是否加载了 jQuery 库并且“$ 未定义”错误

> ID：13702206
> 
> 赞同：1
> 
> 时间：2012-12-04T11:48:01.540
> 
> 标签：jquery

在我将由外部用户使用的 .js 文件中，我想检查是否在他们的页面上加载了 jQuery 库。为此，我正在使用：

```
if (!window.jQuery) {
    var script = document.createElement('script');
    script.type = "text/javascript";
    script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js";
    document.getElementsByTagName('head')[0].appendChild(script);
}    

$(document).ready(function () {
    //do some jquery $.ajax({}); stuff
}); 
```

但是，在`$(document).ready(function () {`我收到错误消息`ReferenceError: $ is not defined`如何解决它？

## 编辑：

我已经添加了行

```
if (!window.jQuery) {
    ...
    document.getElementsByTagName('head')[0].appendChild("<script type='text/javascript'>$(document).ready(function () {...});</script>");
} 
```

现在我得到了`NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMHTMLHeadElement.appendChild]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:08:41.613

在这种情况下，人们通常会被要求尝试类似[require.js](http://requirejs.org/)的东西……如果你不想使用它，你可以尝试设置自己的处理程序来捕捉 jquery 完成加载的时刻。

```
if (!window.jQuery) {
    var script = document.createElement('script');
    script.type = "text/javascript";
    script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js";
    document.getElementsByTagName('head')[0].appendChild(script);

    var loadHandlerAlreadyRun = false;
    script.onload = function() {
        if (!loadHandlerAlreadyRun) {
           loadHandlerAlreadyRun = true;
           onLoadHandler();
        }
    };
    script.onreadystatechange = function() {
        if (!loadHandlerAlreadyRun && (this.readyState === "loaded" || this.readyState === "complete")) {
            loadHandlerAlreadyRun = true;
            onLoadHandler();
        }
    }
}    

function onLoadHandler() {
    $(document).ready(function () {
        console.log("jquery loaded");
        //do some jquery $.ajax({}); stuff
    });

} 
```

[在这里](http://jsfiddle.net/4n5D4/)试试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:09:21.747

删除 document.ready 部分，并在您用于将 jQuery 附加到头部的脚本标签下方的单独脚本标签中，执行以下操作：

```
<script>
 window.onload = function() {
   //do the same code in here as you would've done in document.ready
 }
</script> 
```

**编辑**

下面的评论提出了一个很好的观点......在这种情况下，你可以这样做：

```
<script>
 (function() {
     var load = function() {
       //do the same code in here as you would've done in document.ready
     };

     if(window.addEventListener) {
        window.addEventListener('load',load);
     } else {
        window.attachEvent('onload',load);
     }
 }());
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:55:14.313

你可以用代码检查：

```
if (typeof jQuery == 'undefined') {  
    // jQuery is not loaded
    var script = document.createElement('script');
    script.type = "text/javascript";
    script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js";
    document.getElementsByTagName('head')[0].appendChild(script);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:11:27.300

像这样的东西

```
if( window.jQuery === undefined ) {
    //create script tag for appending script source
    var scriptTag = document.createElement("script");
    scriptTag.type = "text/javascript";
    //check for IE
    if( scriptTag.readyState ) {
        scriptTag.onreadystatechange = function() {
            if( scriptTag.readyState == 'loaded' || scriptTag.readyState == 'complete' ) {
                scriptTag.onreadystatechange = null;
                scriptHandler();
            }
        };
    }
    else {
        scriptTag.onload = function() {
            scriptHandler();
        };
    }
    scriptTag.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js";
    ( document.getElementsByTagName("head")[0] || document.documentElement ).appendChild( scriptTag );
}
else {
    jQuery = window.jQuery;
    process();
}

function scriptHandler() {
    jQuery = window.jQuery.noConflict( true );
    process();
}
function process() {
    jQuery(document).ready(function($) {
        //use $ here
    });
} 
```

# c# - 值不能为空。参数名称：字符串

> ID：13702212
> 
> 赞同：1
> 
> 时间：2012-12-04T11:48:14.913
> 
> 标签：c#, exception, handler, request.querystring, nul

请看下面的代码。它在`handler.asxh`。

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "application/json";
    new RequestManagementFacade().PinRequest(Int32.Parse(context.Request.QueryString["requestId"]), (Boolean.Parse(context.Request.QueryString["isPinned"])));
} 
```

这显示以下错误：

```
Value cannot be null. Parameter name: String 
```

当我检查了上下文请求查询字符串时，传递了一些值，但是，代码在这个阶段中断了。

该处理程序将连接到业务逻辑层。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:50:34.763

> 有值被传递，因为我检查了上下文请求查询字符串

我强烈怀疑你的诊断是不正确的。价值观不会神奇地消失——你需要质疑你的假设。不过，这很容易调试。我建议将您的代码更改为：

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "application/json";
    string requestId = context.Request.QueryString["requestId"];
    string isPinned = context.Request.QueryString["isPinned"];
    var facade = new RequestManagementFacade();
    facade.PinRequest(Int32.Parse(requestId), Boolean.Parse(isPinned));
} 
```

然后，一步一步找出发生了什么*真的很简单。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:50:18.807

很可能要么返回一个有效的字符串值，`context.Request.QueryString["requestId"]`要么`context.Request.QueryString["isPinned"]`没有返回一个有效的字符串值。检查这两个值是否都以正确的 ID 在查询字符串中传递，当然是`requestId`和`isPinned`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:34:06.617

好的解决了将值传递给处理程序时我将其插入为

```
"PinRequest.ashx?="+requestId+isPinned" 
```

这给了我结果 2True

所以我意识到打嗝是不包括字符串名称

```
"PinRequest.ashx?requestId=" + this._requestId + "&isPinned=" + this._isPinned 
```

谢谢你们的帮助

LeviBotelho 谢谢你让我检查我在检查它的 javascript 时遗漏的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-11T13:42:03.967

`Int32.Parse(myString)`在使用将字符串转换为 int 并随后将值分配给对象的属性时遇到错误。使用另一种方法将（`Convert.ToInt32(myString)`）字符串转换为 int 对我有用。

# android - 如何在android中控制webview横向和纵向？

> ID：13702214
> 
> 赞同：1
> 
> 时间：2012-12-04T11:48:22.640
> 
> 标签：android, webview

在我的应用程序中，我使用 webview 来显示 html 页面。Html 页面包含一个 youtube 视频。在纵向模式下，它正在加载并正常工作。但是当方向更改为横向模式时，页面再次加载（重新创建）并且 html 页面中的视频仅显示一半大小。我在清单文件中使用了 android:configChanges="orientation" 但无法正常工作......并且定向时视频应该继续播放

这是我的代码...，

```
 webb=(WebView)findViewById(R.id.weeeb1);
                 webb.getSettings().setJavaScriptEnabled(true);
                    webb.setWebChromeClient(new WebChromeClient() {
                        public void onProgressChanged(WebView view, int progress)
                        {}
                    });

                    webb.setWebViewClient(new WebViewClient() {
                        @Override
                        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
                        {
                            // Handle the error
                        }

                        @Override
                        public boolean shouldOverrideUrlLoading(WebView view, String url)
                        {
                            view.loadUrl(url);
                            return true;
                        }
                    });
                    webb.getSettings().setPluginsEnabled(true);
                    //webb.setInitialScale(12);
                    webb.getSettings().setLoadWithOverviewMode(true);
                    webb.getSettings().setUseWideViewPort(true);
                    webb.setPadding(0,0,0,0); 
                    webb.loadUrl("file:///android_asset/index1.html");

Portrait mode

    <ScrollView android:id="@+id/row33"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:layout_below="@+id/titletext"
          android:fillViewport="false"
          android:scrollbars="none"
          android:layout_weight="1"
          >
        <LinearLayout
          android:id="@+id/row35"
          android:layout_width="fill_parent"
          android:layout_height="600dp"
          android:layout_below="@+id/row33"
          android:layout_margin="8dp" 
          android:orientation="vertical" 
          android:layout_weight="1"
          >
    <LinearLayout
          android:id="@+id/row34"
          android:layout_width="fill_parent"
          android:layout_height="260dp"
          android:layout_below="@+id/row33"
          android:layout_marginLeft="6px"
          android:layout_marginRight="17px"
          android:orientation="horizontal" 
          android:layout_weight="1"
          android:background="#1C2F69"
          >

        <ImageView
            android:id="@+id/gimage1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:layout_marginTop="10px"
            android:layout_marginLeft="30px"
            android:layout_marginRight="10px"
            android:layout_marginBottom="10px"
            android:background="@drawable/natureimage4"
            />

        <ImageView
            android:id="@+id/gimage2"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:layout_marginTop="10px"
            android:layout_marginLeft="10px"
            android:layout_marginRight="30px"
            android:layout_marginBottom="10px"
            android:background="@drawable/natureimage5"
            />

     </LinearLayout>
      <WebView 
         android:id="@+id/weeeb1" 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" 
          android:layout_marginLeft="6px"
          android:layout_marginRight="17px"
          android:layout_marginTop="5px"
          android:layout_marginBottom="29dp"
         android:layout_below="@+id/row35"
          android:layout_weight="1"
         />
         </LinearLayout>
     </ScrollView>

Landscape mode

<ScrollView android:id="@+id/row33"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_below="@+id/titlemain"
      android:fillViewport="false"
      android:scrollbars="none"
      android:layout_weight="1">
    <LinearLayout
      android:id="@+id/row35"
      android:layout_width="fill_parent"
      android:layout_height="600dp"
      android:layout_below="@+id/row33"
      android:layout_marginLeft="190dp" 
      android:layout_marginRight="190dp"
      android:layout_marginTop="5dp"
      android:orientation="vertical" 
      android:layout_weight="1">
<LinearLayout

          android:id="@+id/row34"
          android:layout_width="fill_parent"
          android:layout_height="200dp"
          android:layout_below="@+id/row33"
          android:orientation="horizontal" 
          android:layout_weight="1"
          android:background="#1C2F69">

        <ImageView
            android:id="@+id/gimage1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:layout_marginTop="10px"
            android:layout_marginLeft="35px"
            android:layout_marginRight="25px"
            android:layout_marginBottom="10px"
            android:background="@drawable/natureimage4" />

        <ImageView
            android:id="@+id/gimage2"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:layout_marginTop="10px"
            android:layout_marginLeft="25px"
            android:layout_marginRight="35px"
            android:layout_marginBottom="10px"
            android:background="@drawable/natureimage5" />

     </LinearLayout>
      <WebView 
         android:id="@+id/weeeb1" 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_marginBottom="9dp"
         android:layout_below="@+id/row35"
         android:layout_weight="1" />
         </LinearLayout>
     </ScrollView>

Please suggest me the solution.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:56:10.320

一种解决方案是避免旋转。添加此项以仅在清单中修复纵向活动。

```
android:screenOrientation="portrait" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-18T13:09:13.297

在您的清单中使用它。它可能会帮助你。

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

# python - 在python中调整UDP广播速率

> ID：13702219
> 
> 赞同：1
> 
> 时间：2012-12-04T11:48:37.300
> 
> 标签：python, network-programming, udp

我在 python 中使用 UDP 广播将数据包从移动节点发送到固定节点。我想要的是在移动节点接近静态节点时提高数据速率，并在节点移开时降低数据速率，以便我可以将更多数据包传输到接收节点。

实际上，我正在为我的论文做一个实验，我想测量信号强度以及相对于静态节点的距离。因此，根据接收信号强度的值，我想调整广播速率的距离。

任何帮助和建议都会非常有帮助。

这是代码

```
from socket import *
import os
import time

# A dummy string that I want to send
a = os.urandom(1400)

s = socket(AF_INET, SOCK_DGRAM)
s.bind(('', 0))
s.setsockopt(SOL_SOCKET, SO_BROADCAST, 1)

# Send data along with the sequence number and current time
i=0  
while 1:  
    if os.system("iwconfig wlan0 | awk '/Signal level/ {print $4}'|cut -c 7-9") >= -90:   #-90 dbm is set as threshold  
        data = (str(i)+"###"+str(time.time())+"@@@"+ a.encode('hex'))[:1400] # only send 1400bytes of data  
        s.sendto(data, ('192.168.169.255', 5000))  
        i+=1  
    else sleep('<broadcast interval>') # sleep until the next broadcast interval 
```

我很不确定如何调整广播速率，所以我没有它的代码。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:57:20.743

如果你想以线性方式完成它，你可以使用这样的东西

```
def calc_delay(signal):
   rate = 11 * ( float(signal) + 90 ) / 20
   return(rate)

rate_cmd = 'iwconfig wlan0 rate %sM" % calc_delay(signal)
os.system(rate_cmd) 
```

这是假设您将获得 -90 和 -70 之间的信号强度，并且您的无线网卡的最大速率为 11M 。所以在你的循环中，你可以为这个函数的返回值休眠。如果信号强度在不同的范围内，90 和 20 显然需要改变。

# c++ - 在 C++ 中生成和重用唯一 ID

> ID：13702220
> 
> 赞同：3
> 
> 时间：2012-12-04T11:48:37.993
> 
> 标签：c++

我正在研究一个要求，其中请求应该具有从 -2 到 -101 的唯一编号，即一次有唯一的 100 个请求。如果在给定时间有超过 100 个请求，那么我应该发送错误。最初我没有任何要求。一旦我发送请求，我将使用唯一编号，例如 -2 、 -3 等等。这里的要求是我可能会从客户端获取命令不要向服务器发送请求，例如 -2 所以我应该删除这个请求，并且我应该将此数字用于将来的请求。

在 C++ 中实现这一点的最佳方法是什么？

另外，我不应该使用 Boost。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:16:12.130

扩展我的`std::bitset`评论：

您可以使用 id 作为 bitset 的索引，使用 value ( `true/false`) 作为 id 的可用性。

```
class IdStorage {
    const int N = 100;
   std::bitset<N> ids;

   bool allIdsUsed() { 
       return ids.all();
   }

   int getId() {
     if(allIdsUsed())
         throw "Error";

     for(int i = 0; i < N; ++i )
        if(ids.test(i))
            return i - 2;
   }

   void releaseId(int i) {
       ids.set(i + 2);
    }

} 
```

请注意，这是在课堂上输入的，这不是我的想法。检查[文档](http://en.cppreference.com/w/cpp/utility/bitset)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:26:18.847

您至少必须维护一组未使用的 ID。此外，我会放入一个查找表来验证是否分发了一个 id（为了稳健性）。对于两者，我建议使用`std::vector`，而不是列表。

首先，将未使用的集合存储在一个`std::vector<int>`中，您可以很容易地对其进行初始化：

```
class IdStore {
  private:
    std::vector<int> unused;
    static int const MIN_ID = -101;
    static int const MAX_ID = -2;
  public:
    IdStore::IdStore()
    : unused(MAX_ID - MIN_ID + 1) {
      for (auto i = 0; i <= MAX_ID-MIN_ID; ++i) {
        unused[i] = i;
      }
    }
    int getId();
    void releaseId(int);
}; 
```

此外，您可能希望跟踪使用的 id，以便验证它们是否已分发；我会为此使用一个`std::vector<bool> used;`成员，您可以简单地对其进行初始化，`used(MAX_ID - MIN_ID +1)`因为它的值将全部默认为`false`初始值。当然，您也可以制作`used`a`bitset`但请注意，这需要在编译时知道从`MIN_ID`到的距离。`MAX_ID`

从那里分发东西非常简单：

```
int IdStore::getId() {
  if (unused.empty())
    throw "error"; // put something better here
  auto r = unused.back();
  used[r] = true;
  unused.pop_back();
  return MIN_ID + r;
} 
```

并释放它们：

```
void IdStore::releaseId(int id) {
  if (id < MIN_ID || id > MAX_ID)
    throw "error"; // put something better here
  id -= MIN_ID;
  if (!used[id])
    throw "error"; // put something better here
  used[id] = false;
  unused.push_back(id);
} 
```

请注意，不会发生重新分配！向量将[保持其大小](http://en.cppreference.com/w/cpp/container/vector/pop_back)，并且既不需要`getId`也不`releaseId`需要对使用列表的方法进行昂贵的调用`malloc`或与之相反。`free`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:56:05.987

只有 100 个数字可能没有显着的性能差异，您可以使用集合或数组；普通的旧数组`id_used[100]`可能会在性能测量中获胜。

如果您需要可扩展的解决方案，请尝试使用“free-set”和“used-set”，其中 free-set 存储 id 可供使用，并且 used-set 和 id 已在使用中。使用 id 后，将其存储回自由集。

对于允许的 id 与并发使用的足够大的比率，只使用“used-set”，并使用拒绝抽样来找到一个空闲的 id：

```
do {
    id = generate_id();
} while(std::end != used_set.find(id)); 
```

无论如何，没有确定的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:59:40.370

我还没有编译它，但它应该是这样的：

```
std::list<int> list;
for(int i=start; i<=end; ++i)
  list.insert(i);

//when get Id request
Id2send = list.first();
list.remove(list.first());

//when delete id request
list.remove(id);

//when add id request (this happens when an id is freed or other times)
list.add(id); 
```

# windows - 在 Windows 资源管理器中显示文件

> ID：13702222
> 
> 赞同：7
> 
> 时间：2012-12-04T11:48:40.150
> 
> 标签：windows, explorer

我最喜欢的 IDE [Wing IDE](http://www.wingware.com/)有一个用于在资源管理器中显示活动文件的命令。这意味着当您启动该命令时，它会在文件所在的文件夹上打开一个资源管理器窗口，然后选择该文件。

问题是，如果窗口已经打开，则无法选择文件。它激活窗口，但文件没有被选中。这很烦人。我希望始终选择该文件

我与一位开发人员交谈，他说他们正在使用`'explorer /select,%s' % filename`显示文件，并且上述烦恼可能是该命令的一个怪癖。

有谁知道如何避免这种行为？

（该解决方案需要在 Windows 2000、XP、2003 Server、Vista 和 Windows 7 中运行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:44:53.890

As per [https://support.microsoft.com/en-us/kb/152457](https://support.microsoft.com/en-us/kb/152457), which states "switches can be combined", what about:

```
explorer /n,/select,c:\path\to\file.ext 
```

/n *should* force a new window.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:07:40.543

I dont know if one exists, but if you create utility which would be implement such solution(C++) it would work as you expected:

```
void OpenFileInExplorer(LPCTSTR filename)
{
    ITEMIDLIST *pidl = ILCreateFromPath(filename);
    if(pidl) 
    {
        SHOpenFolderAndSelectItems(pidl,0,0,0);
        ILFree(pidl);
    }
} 
```

# css - HTML5 正文间距问题

> ID：13702226
> 
> 赞同：2
> 
> 时间：2012-12-04T11:48:51.517
> 
> 标签：css, html

`<div>`在此示例中，我似乎无法删除页面顶部与 the 之间的间距：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index</title>
    <style type="text/css">
        html, body{
            padding: 0;
            margin: 0;
        }
        #container{
            background-color: #808080;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="inner-container">
            <h3>Index</h3>
        </div>
    </div>
</body>
</html> 
```

我已将其缩小到这一行：

```
<!DOCTYPE html> 
```

似乎删除它`<div>`会使页面顶部对齐。我在 CSS 中看不到实现相同目标的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:51:27.257

删除你的页`<h3>`边距

```
h3 { margin-top: 0 } 
```

[**演示**](http://jsfiddle.net/Hw4zq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:52:27.603

边距相互折叠。

`html`(0)、`body`(0)、`#container`(0) 和(not 0) 的上`h3`边距合并为第一个内容和窗口边缘之间的组合非零上边距。

设置`h3 { margin-top: 0 }`为删除它。

`h1`（尽管您应该以标题 ( ) 而不是子标题 ( )开始您的文档`h3`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:57:50.997

实际上[H1 到 H6 的默认边距](http://www.htmlcssdeveloper.com/tutorial/advanced-html-css/what-is-the-default-margin-of-h1-h2-h3-h4-h5-h6.html)是您面临的问题，因此覆盖此值将解决您的问题。

```
h3 { margin-top: 0;margin-bottom: 0; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:29:29.450

额外信息：

您可能还想在开始项目之前考虑使用[CSS 重置脚本](http://www.cssreset.com/)，这样您就不必担心这样的小事。

# php - 使用 ajax 按钮发布数据和重定向页面失败

> ID：13702233
> 
> 赞同：0
> 
> 时间：2012-12-04T11:49:27.857
> 
> 标签：php, html, ajax, redirect, post

我想单击页面上的一个按钮并转到另一个带有已发布数据的页面，但它正在引导而不发布！$_POST 为空，$_SESSION 也为空

这是我的ajax函数：

```
function ajax4(Div_Submit,Div_Response,SuccessScript,Data_Submit) 
            {
                var Type = 1;
                var post_data = '';
                if(!Data_Submit) 
                    post_data = $('#'+Div_Submit+' *').serialize();
                else
                    post_data = Data_Submit;
                $.ajax({
                    data: post_data,
                    type: "POST",
                    url: document.URL,
                    dataType: 'text',
                    success:function(response){
                            $('#'+Div_Response).html(response);
                            window.location.href = "index.php";
                    }
                    ,
                    complete: function(){
                        $.unblockUI();
                    }
                });
                return false;
            } 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:05:47.490

你打电话时

```
window.location.href = "index.php"; 
```

浏览器重定向到 index.php 页面，而不是在`Div_Response`. 如果您想使用响应中的信息转到 index.php 并且此信息很小，您可能需要执行类似的操作

```
window.location.href = "index.php?" + encodeURIComponent(response); 
```

但是如果你要一直重定向，你应该让你的服务器来做。您可以查看[this SO answer](https://stackoverflow.com/questions/768431/how-to-make-a-redirect-in-php)了解如何在php中重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:54:49.520

我在你们的帮助下解决了这个问题，谢谢大家:) 答案是：

```
success:function(response)
{ 
    //$('#'+Div_Response).html(response); 
     window.location.href = "index.php";
 } 
```

没有在 php 页面中回显任何内容，也没有 if 条件。

# c# - 处理异常 - 捕获后返回错误

> ID：13702234
> 
> 赞同：0
> 
> 时间：2012-12-04T11:49:29.130
> 
> 标签：c#, .net, exception

我想以特定方式处理异常。

```
try
{
    for (int i = 0; i < rows.Count; i++)
    {
        doSomething();
    }
}
catch (Exception e)
{
    return false;
} 
```

我正在运行抛出一个 ienum 并尝试使用 doSomething() 方法找到一个元素。问题是这个方法在他找不到时会抛出异常，但我需要确保我在**整个**枚举中找不到元素。

所以这就是事情......我想知道在catch里面是否有办法做到这一点：

```
if(i<rows.Count)
  continueFor; 
```

提前泰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:52:09.333

将 try catch 放在 for 循环中

```
for (int i = 0; i < rows.Count; i++)
 {
    try{
      doSomething();
     }
     catch(Exception ex){

        // do something else

     }
 } 
```

这样你就可以参考 i. 或者将属性设置为 i ，然后在您的捕获中您将知道 (i) 是什么。

```
Int32 lastNumber = 0;

try{
for (int i = 0; i < rows.Count; i++)
 {
     lastNumber = i;
      doSomething();

 } 
}
catch(Exception ex){

        // do something else with lastNumber

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:53:23.903

相反，您应该从 DoSomething 方法返回一个布尔值并测试循环内返回的值。如果您真的需要一个 try/catch 块，请将其放在方法中，尤其是因为您没有使用 catch 中引发的异常。

```
 bool returnValue;
 for (int i = 0; i < rows.Count; i++)
                {
                    if(doSomething())
                        returnValue = true;
                }
 return returnValue; 
```

# android - 对话的优先级（两个活动）

> ID：13702235
> 
> 赞同：0
> 
> 时间：2012-12-04T11:49:30.873
> 
> 标签：android

在 onCreate 之后，我有 2 种方法：

```
checkFirstTime();
checkVersion(); 
```

checkFirstTime() 如果应用程序是第一次打开另一个活动， checkVersion() 显示一个对话框。

好的，第一次打开应用程序时，我首先看到第二个活动，当我按下此按钮时（因此活动关闭），我看到对话框（方法 checkVersion）。

我需要始终显示第一个带有更改日志的对话框，然后显示第二个活动。

任何想法？

谢谢！

# ruby-on-rails - 更新未在嵌套模型中传播

> ID：13702242
> 
> 赞同：0
> 
> 时间：2012-12-04T11:49:46.027
> 
> 标签：ruby-on-rails

我有一个嵌套模型集：

```
class Event < ActiveRecord::Base  
    belongs_to :place
      :place
    attr_accessible :place_attributes, :reject_if => :all_blank, :allow_destroy => false

class Place < ActiveRecord::Base
    has_many :events
    validates :label, :presence => true, 
        :uniqueness => {:case_sensitive => true, :on => :create }
    validates :description, :presence => {:on => :create}, 
        :uniqueness => {:case_sensitive => true , :on => :create} 
```

在测试场景中，使用嵌套表单，用户只能更新 Place#label 属性，保留所有其他信息。

```
test "should_update_event_place_data" do
    put :update, :locale => I18n.locale, :id => @event[:id],
      :event => { :place_attributes => { label: "a very beautiful place" } } 
```

这导致对 EventsController#update 的请求，接收参数：

```
params
    {"event"=>{"place_attributes"=>{"label"=>"a very beautiful place"}}, "locale"=>"en",
    "id"=>"145", "controller"=>"backoffice/events", "action"=>"update"}

(rdb:1)  @event.update_attributes(params[:event])
 false
@messages={:"place.description"=>["cannot be blank"] 
```

但是验证是在创建，而不是更新....没有验证错误应该被检测到..可能有什么问题？

感谢帮助

```
I did more testing 
debugger , right after the test setup ( before sending the put request)
@event_0
#<Event id: 161, account_id: 3, place_id: 249, slug: "my-new-event-on-2013-01-01-at-    edinburgh-united-king...", title: "My New Event"
 @event_0.place
#<Place id: 249, label: "new fake place",..

test request:
put :update, :locale => I18n.locale, :id => @event_0[:id], :event => { :place_attributes => {  label: "a very beautiful place"} }

params in request are OK, @request/method = PUT

In EventsController#update
@event.update_attributes(params[:event])
.... I inserted a debug in the Place model... 
(before_validation :i_am_on_create, :on => :create)
  def i_am_on_create
    debugger
    p "CREATING"
  end

 and it's creating !! don't understand why it's not updating the parent nested model 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:54:23.390

update_attributes 不会将更新传播到关联。如果您查看源代码 (http://apidock.com/rails/ActiveRecord/Base/update_attributes)，您会看到最后调用了 #save。这是默认行为：

```
# existing resource 'mazeratti car' 
car.name = "Wheelz"
car.brand.label = "Ferrari"
car.save
car.reload
car.name #=> "Wheelz"
car.brand.label #=> "Mazeratti" 
```

如果您希望在更新对象时始终更新关联，请考虑使用“自动保存”（http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/belongs_to：选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:29:03.947

如果您只想测试标签属性是否已更新，为什么不尝试仅在该字段而不是整个“事件”上执行 update_attribute 呢？就像是：

```
@event.place_attributes.update_attribute(
      :label => params[:event][:place_attributes][:label]
) 
```

未经测试 - 但你明白了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:51:41.870

解决了

为了更新嵌套模型，我需要添加模型实例 id：

```
 put :update, :locale => I18n.locale, :id => @event_0[:id], :event => { :place_attributes => { id: @event_0.place[:id],  label: "a very beautiful place"} } 
```

所以在 :place_attributes 中，我添加了现有的 @event_0.place[:id] ，现在它正在更新

我在 2 月 17 日 17:04 在底页的 [Accept_nested_attributes_for 和 find_or_create 的 Anson 回答中找到了它？](https://stackoverflow.com/questions/3579924/accepts-nested-attributes-for-with-find-or-create/)

# java - 如何使用 selenium webdriver 定位自定义 html 元素

> ID：13702243
> 
> 赞同：1
> 
> 时间：2012-12-04T11:49:45.247
> 
> 标签：java, selenium, svg, webdriver

我有以下html代码

```
 <svg height="600" width="910" xmlns:xlink="http://www.w3.org/1999/xlink"  
   id="svgcontent" overflow="visible" x="910" y="600" viewBox="0 0 910 600">
    <g style="pointer-events:all">
      <text fill="rgb(0,0,0)" font-family="Sans-Serif" font-size="13" id="80-155-126" 
        transform="rotate(-90, 168, 126)" y="126" x="168" style="pointer-
         events:inherit">A100A</text>
   </g>
  </svg> 
```

我尝试了以下方式但没有成功

```
assertEquals(driver.findElements(By.xpath("//*[local-name()='svg' 
 and namespace-uri()='http://www.w3.org/2000/svg' and @id='svgcontent']//*[local-
 name()='g' and namespace-uri()='http://www.w3.org/2000/svg']/text")).size(), 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:25:17.717

尝试关注

```
assertEquals(driver.findElements(By.xpath("//*[local-name()='svg' and @id='svgcontent']//*[local-name()='text']")).size(), 1); 
```

它应该可以工作，但是

```
assertEquals(driver.findElements(By.xpath("//*[local-name()='svg' and namespace-uri()='http://www.w3.org/2000/svg' and @id='svgcontent']//*[local-name()='g' and namespace-uri()='http://www.w3.org/2000/svg']/*[local-name()='text']")).size(), 1); 
```

应该也可以。

# c# - 通过 C# 在 Lotus Notes 中预订房间

> ID：13702253
> 
> 赞同：3
> 
> 时间：2012-12-04T11:50:10.317
> 
> 标签：c#, lotus-notes

我正在尝试从下面的代码中通过 C# 在 Lotus Notes 中预订房间。

我到目前为止的代码：

```
//First, create a new Lotus Notes Session Object
Domino.NotesSession LNSession = new Domino.NotesSession();
//Next add a Database and a Document Object (not new)
Domino.NotesDatabase LNDatabase;
Domino.NotesDocument LNDocument;

//Initialize your Session with your Password
LNSession.Initialize("qwerty");                
//Connect to your Notes Server and the path of your 
//.nsf File (in my case its in a subfolder 'mail').
LNDatabase = LNSession.GetDatabase("Clone/testdomain", "mail\\asystem.nsf", false);
//Create an in memory document in the server database
LNDocument = LNDatabase.CreateDocument();
//-------Assign Field Values-------
//Define Start&End Date+Time of your appointment
//Year, Month, Day, Hour, Minute and Second
System.DateTime StartDate = new DateTime(2012, 12, 03, 17, 15, 0);
System.DateTime EndDate = new DateTime(2012, 12, 03, 17, 30, 0);
//This Defines that it is an Calendar Entry
LNDocument.ReplaceItemValue("Form", "Appointment");
LNDocument.ReplaceItemValue("Location", "Home");
LNDocument.ReplaceItemValue("Room", "Testroom/TestSite");
LNDocument.ReplaceItemValue("AppointmentType", "3");
//Type of the appointment, means:
//0 = Date, Appointment           
//1 = Anniversary
//2 = All Day Event (Do Not Set Time Here!)
//3 = Meeting
//4 = Reminder
//5 = Date (Special, experimental!)    
// Title of your entry
LNDocument.ReplaceItemValue("Subject", "hello Sir");
// Set Confidential Level (Public=1 or Private=0) 
LNDocument.ReplaceItemValue("$PublicAccess", "1");
//Add Start&End Time of your event
LNDocument.ReplaceItemValue("CALENDARDATETIME", StartDate);
LNDocument.ReplaceItemValue("StartDateTime", StartDate);
LNDocument.ReplaceItemValue("EndDateTime", EndDate);
LNDocument.ReplaceItemValue("StartDate", StartDate);
LNDocument.ReplaceItemValue("MeetingType", "1");
//Infos in The Body
LNDocument.ReplaceItemValue("Body", "Body Text Body Text ...");
//Add an alarm to your appointment
LNDocument.ReplaceItemValue("$Alarm", 1);
LNDocument.ReplaceItemValue("$AlarmDescription", "hello world (alarm)");
LNDocument.ReplaceItemValue("$AlarmMemoOptions", "");
//-5 = Time (in minutes) before alarm goes on
LNDocument.ReplaceItemValue("$AlarmOffset", -5);
LNDocument.ReplaceItemValue("$AlarmSound", "tada");
LNDocument.ReplaceItemValue("$AlarmUnit", "M");
//This saves your Document in the Notes Calendar
LNDocument.ComputeWithForm(true, false);
LNDocument.Save(true, false, false); 
```

它在客户端中正确创建会议，但在资源数据库上它不会将时间和日期保存到指定的房间。我到处寻找此类问题的代码示例，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:34:59.350

From the scratch i guess, you should use a NotesDateTime object instead of System.DateTime. Something like this...

```
Domino.NotesDateTime datetime = LNSession.CreateDateTime("3.12.2012 17:15");
LNDocument.ReplaceItemValue("CALENDARDATETIME", datetime.LSLocalTime); //maybe GetLSLocalTime... 
```

Hope it will help, JiKra

# php - 使用 PHP 从 XML 下载所有图像？

> ID：13702259
> 
> 赞同：1
> 
> 时间：2012-12-04T11:50:45.310
> 
> 标签：php, xml, image

我从服务提供商加载一个 XML 文件，然后我的 HTML 将图像显示在必要的位置。但是，我希望在本地缓存所有这些文件，而不是让浏览器每次都从远程服务器加载它们。

这是我的 XML 文件的示例...

**提要.xml**

```
<URI>http://imt.boatwizard.com/images/1/14/77/3801477_-1_20120229071449_0_0.jpg</URI>
<URI>http://imt.boatwizard.com/images/1/40/6/3794006_-1_20120814035230_16_0.jpg</URI>
<URI>http://imt.boatwizard.com/images/1/21/74/4012174_-1_20120706051335_21_0.jpg</URI> 
```

有人可以帮我编写 PHP 以循环遍历 XML，并下载每个图像。

1) 下载图片

2) 在 XML 中重命名图像 URL，以匹配本地文件。

3) 保存 XML

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:02:03.467

我想你应该做这样的事情

```
// xmlize your... ehm... xml
$xml = new SimpleXMLElement($xml_content);

// extract uri elements
$result = $xml->xpath('/URI');

// loop through uris
while(list( , $node) = each($result)) {

    // with curl functions, download every image
    curl_stuff_i_dont_remember($node);

    // move it to your folder
    rename($downloaded_img, $newpath_img);

    // if everything went ok, add a new line into the output xml
    $outxml = $outxml . '<URI>' . basename($newpath_img) . '</URI>';
}

// dump the outxml
$fp = fopen('newxml.xml', 'w+');

fwrite($fp, $outxml); 
```

# android - Android地图视图错误：您只能在MapActivity中有一个MapView

> ID：13702262
> 
> 赞同：5
> 
> 时间：2012-12-04T11:50:50.830
> 
> 标签：android, android-fragments, actionbarsherlock-map

我正在创建一个具有操作栏和 2 个选项卡的应用程序。像这样：![在此处输入图像描述](../Images/2655d8cb8134053866765624fdb99c78.png)

Tab1：点击时应该显示一个地方的一些细节。Tab2：点击应该显示地图。

我为此使用片段。

我的听众：

```
private class MyTabListener implements ActionBar.TabListener {
        @Override
        public void onTabSelected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {
            // TODO Auto-generated method stub
            if (tab.getPosition() == 0) {
                DetailsFragment fragment = new DetailsFragment();
                ft.replace(android.R.id.content, fragment);

            } else {
                MapsFragment fragment = new MapsFragment();
                ft.replace(android.R.id.content, fragment);
                //ft.commit();
            }
        } 
```

MapsFragment.java

```
public class MapsFragment extends MapFragment {

    private MapView map = null;
    private MyLocationOverlay me = null;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return (new FrameLayout(getActivity()));
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        map = new MapView(getActivity(),
                "0rQAS47Cicu2t7z4w8Ev6A6de7QlbjvKyi8I-QQ");
        map.setClickable(true);

        map.getController().setCenter(
                getPoint(40.76793169992044, -73.98180484771729));
        map.getController().setZoom(17);
        map.setBuiltInZoomControls(true);

        Drawable marker = getResources().getDrawable(R.drawable.marker);

        marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                marker.getIntrinsicHeight());

        map.getOverlays().add(new SitesOverlay(marker));

        me = new MyLocationOverlay(getActivity(), map);
        map.getOverlays().add(me);

        ((ViewGroup) getView()).addView(map);
    }

    @Override
    public void onResume() {
        super.onResume();

        me.enableCompass();
    }

    @Override
    public void onPause() {
        super.onPause();

        me.disableCompass();
    }

    private GeoPoint getPoint(double lat, double lon) {
        return (new GeoPoint((int) (lat * 1000000.0), (int) (lon * 1000000.0)));
    }

    private class SitesOverlay extends ItemizedOverlay<OverlayItem> {
        private List<OverlayItem> items = new ArrayList<OverlayItem>();

        public SitesOverlay(Drawable marker) {
            super(marker);

            boundCenterBottom(marker);

            items.add(new OverlayItem(getPoint(40.748963847316034,
                    -73.96807193756104), "UN", "United Nations"));
            items.add(new OverlayItem(getPoint(40.76866299974387,
                    -73.98268461227417), "Lincoln Center",
                    "Home of Jazz at Lincoln Center"));
            items.add(new OverlayItem(getPoint(40.765136435316755,
                    -73.97989511489868), "Carnegie Hall",
                    "Where you go with practice, practice, practice"));
            items.add(new OverlayItem(getPoint(40.70686417491799,
                    -74.01572942733765), "The Downtown Club",
                    "Original home of the Heisman Trophy"));

            populate();
        }

        @Override
        protected OverlayItem createItem(int i) {
            return (items.get(i));
        }

        @Override
        protected boolean onTap(int i) {
            Toast.makeText(getActivity(), items.get(i).getSnippet(),
                    Toast.LENGTH_SHORT).show();

            return (true);
        }

        @Override
        public int size() {
            return (items.size());
        }
    }
} 
```

问题是当我第一次点击地图标签时地图出现。但是当我转到详细信息选项卡并再次返回地图选项卡时，我的应用程序崩溃并出现错误：

日志猫：

```
12-04 03:28:02.228: E/AndroidRuntime(14466): FATAL EXCEPTION: main
12-04 03:28:02.228: E/AndroidRuntime(14466): java.lang.IllegalStateException: You are only allowed to have a single MapView in a MapActivity
12-04 03:28:02.228: E/AndroidRuntime(14466):    at com.google.android.maps.MapActivity.setupMapView(MapActivity.java:398)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at com.google.android.maps.MapView.<init>(MapView.java:289)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at com.google.android.maps.MapView.<init>(MapView.java:235)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at com.m7.nomad.MapsFragment.onCreate(MapsFragment.java:34)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.support.v4.app.BackStackRecord.run(Unknown Source)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.support.v4.app.FragmentManagerImpl$1.run(Unknown Source)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.os.Handler.handleCallback(Handler.java:725)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.os.Looper.loop(Looper.java:137)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at java.lang.reflect.Method.invokeNative(Native Method)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at java.lang.reflect.Method.invoke(Method.java:511)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-04 03:28:02.228: E/AndroidRuntime(14466):    at dalvik.system.NativeStart.main(Native Method) 
```

问题是什么。我知道 MapView 不能从片段中膨胀。但我使用了这种技术：http: [//xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/](http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/)

但这仍然行不通。我需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:34:23.327

就在几天前，谷歌推出了 Map Api 2。它包含 MapFragment。所以现在你不需要这样的钩子了。 [https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment)

# c# - 如何将 RectangleF[] 转换为 CGRects 的 NSArray？

> ID：13702264
> 
> 赞同：6
> 
> 时间：2012-12-04T11:50:52.857
> 
> 标签：c#, xamarin.ios, core-graphics

我确定我以前做过，但我不知道怎么做：我这里有一个绑定，需要一个`NSArray`. 内容是`CGRect`对象。

如何从数组中获取`NSArray`of ？`CGRect``RectangleF[]`

我必须转换的另一件事是：`PointF[][]`转换为 CGPoint[] 的 `NSArray

请注意，我实际上在这里遇到了绑定问题：

```
/// Coordinates for highlight annotation (boxed CGRect's)
@property (nonatomic, strong) NSArray *rects;

/// Array of lines (which is a array of CGPoint's)
@property (nonatomic, copy) NSArray *lines; 
```

他们目前是这样的：

```
[Export ("rects")]
NSArray Rects { get; set; }

[Export ("lines")]
NSArray Lines { get; set; } 
```

这是不会编译的（在绑定项目中）：

```
[Export ("rects")]
RectangleF[] Rects { get; set; }

[Export ("lines")]
PointF[][] Lines { get; set; } 
```

**编辑/解决方案：**

按照 PouPou 的建议，我想出了以下工作代码。要将 PointF 数组的数组转换为 NSArray，我实现了此方法。请注意，它的输入实际上是一个 AnnotationPoint，但它被转换为 PointF：

```
/// <summary>
/// Extends AnnotationPoint[][] to allow conversion into an NSArray containing arrays of CGPoint.
/// </summary>
/// <returns>the NSArray</returns>
/// <param name='aStrokePath'>the path to convert</param>
public static NSArray ToPSPDFInkLines(this AnnotationPoint[][] aStrokePath)
{
    List<NSArray> aLines = new List<NSArray>();
    foreach ( AnnotationPoint[] aLine in aStrokePath )
    {
        List<NSObject> aLinePoints = new List<NSObject>();
        foreach (AnnotationPoint oPoint in aLine)
        {
            aLinePoints.Add(NSObject.FromObject(oPoint.ToPointF()));
        }
        var oNSLineArray = NSArray.FromNSObjects(aLinePoints.ToArray());
        aLines.Add(oNSLineArray);
    }
    NSArray oNSArray = NSArray.FromNSObjects(aLines.ToArray());
    return oNSArray;
} 
```

要将 RectangleF[] 转换为 NSArray，这就是我所追求的。请注意，在这里，我正在使用 AnnotationRegion 对象，但它们被转换为 RectangleF：

```
NSObject[] aRects = oHighlightAnnot.Coords.Select(oRegion => NSObject.FromObject(oRegion.ToRectangleF())).ToArray();
NSArray oNSArray = NSArray.FromNSObjects(aRects); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:08:11.750

CoreGraphic 的类型`CGRect`映射到`RectangleF`MonoTouch 中的 System.Drawing。在编写绑定时，当您看到前者（在 ObjectiveC 中）时，您会编写后者（在 C# 中）。

**编辑**但是，绑定生成器不能转换`NSArray`为非数组`NSObject`（例如，值类型，如`RectangleF`）。在这种情况下，您可以将它们绑定为`NSArray`并标记它们，`[Internal]`然后为公共消费提供更好的（手动）重载。

然后你可以创建你自己的`Rectangle[]`，根据 的大小`NSArray`，然后迭代`NSArray`元素来获取元素。您需要将每个元素转换（参见`NSObject`和`NSValue`助手）为`RectangleF`.

当你不知道你会得到什么类型时，你也需要**保留**。`NSArray`

# c# - Windows 服务在特定日期发送邮件

> ID：13702267
> 
> 赞同：0
> 
> 时间：2012-12-04T11:51:04.157
> 
> 标签：c#, windows, email, service

> **可能重复：**
> [当应用程序未运行时从 asp.net 发送邮件](https://stackoverflow.com/questions/13490630/send-mail-from-asp-net-when-application-is-not-running)

我正在编写一个 Windows 服务来在某些日子发送邮件。我正在使用 sql server 表来确定发送邮件的日期，为此我需要定期检查。我怎样才能做到这一点。

我在事件中编写了代码，`onStart()`但它只适用于开始。`OnContinue()`似乎不起作用。

```
protected override void OnStart(string[] args)
{
    eventLog1.WriteEntry("In OnStart");
    Test();
}

protected override void OnContinue()
{
    eventLog1.WriteEntry("In OnContinue."); 
    Test();           
}

void Test()
{
   //code to sendout mail
} 
```

# wordpress - JSP 中的类似 Wordpress 的 Urlrewriting，带有 Urlrewritefilter 的 Tomcat

> ID：13702269
> 
> 赞同：4
> 
> 时间：2012-12-04T11:51:08.053
> 
> 标签：wordpress, jsp, tomcat, url-rewriting, tuckey-urlrewrite-filter

我正在为在线健康杂志开发一个简单的 cms，使用 JSP、Tomcat 和 urlrewritefilter 进行 url 重写。我正在从 wordpress 迁移内容，应该保留网站上的永久链接。永久链接如下所示，只有字母和数字。

```
http://www.example.com/post-or-category-name-with-letters-or-1234/ 
```

我想在我的 jsp 应用程序中重写我的 url，这样我就可以拥有像上面这样的 url。重写规则应该如下工作。

```
http://www.example.com/post/?pid=1234&name=post-name
http://www.example.com/category/?cid=1234&slug=category-slug 
```

进入

```
http://www.example.com/post-name/
http://www.example.com/category-slug/ 
```

当然反之亦然。

如何使用 urlrewritefilter 拥有类似 wordpress 的永久链接结构？我是否需要编写一个 Servlet 来从数据库中获取名称或 slug 的 id？

有人知道如何做到这一点或以前做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:05:13.363

我已经为帖子和类别制作了一个带有自定义 URL 的 JavaServer Faces CMS。我基本都用过`javax.servlet.Filter`和`javax.faces.application.ViewHandler`。由于您使用的是直接 JSP，因此您不需要`javax.faces.application.ViewHandler`.

我如何声明我的过滤器：

```
<filter>
    <filter-name>URLFilter</filter-name>
    <filter-class>com.spectotechnologies.jsf.filters.URLFilter</filter-class>
    <async-supported>true</async-supported>
</filter>

<filter-mapping>
    <filter-name>URLFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

基本过滤器实现：

```
/**
 *
 * @author Alexandre Lavoie
 */
public class URLFilter implements Filter
{
    @Override
    public void doFilter(ServletRequest p_oRequest, ServletResponse p_oResponse, FilterChain p_oChain) throws IOException, ServletException
    {
        // Determining new url, get parameters, etc
        p_oRequest.getRequestDispatcher("newurl").forward(p_oRequest,p_oResponse);
    }

    @Override
    public void init(FilterConfig p_oConfiguration) throws ServletException
    {

    }

    @Override
    public void destroy()
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:56:47.463

我认为您的答案在于： [如何在 Tomcat 6 中重写 URL](https://stackoverflow.com/questions/1563799/how-to-rewrite-url-in-tomcat-6)

[是否有 Tomcat/Java 的 url 重写引擎？](https://stackoverflow.com/questions/950497/is-there-a-url-rewriting-engine-for-tomcat-java)

# sql - 使用 sql developer 查询多个数据库连接

> ID：13702271
> 
> 赞同：1
> 
> 时间：2012-12-04T11:51:15.960
> 
> 标签：sql, oracle, plsql, database-schema, oracle-sqldeveloper

我在 ORACLE SQL DEVELOPER 连接中有 2 个数据库，con1 和 con2（具有不同的模式）

我需要根据两个 db 的列创建一个视图，方法是：

```
Create VIEW testviewAS (SELECT col1, col2, col3 FROM con1.table1);
ALTER VIEW AS (SELECT col1, col2, col3 FROM con2.table2); 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:11:41.343

找到了这个解决方案

在第二个连接工作表中，我将 table2 上的授权访问到连接 1 一个

```
GRANT SELECT on table2 to Connection1 
```

然后我创建视图（在 1sr 连接工作表上）：

```
Create VIEW testview AS (SELECT col1, col2, col3 FROM con1.table1);
ALTER VIEW AS (SELECT col1, col2, col3 FROM con2.table2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:03:11.053

您是否打算合并不同架构上的两个表？

```
Create VIEW testviewAS (
    SELECT t1.col1, t1.col2, t1.col3, t2.col1, t2.col2, t2.col3 FROM con1.table1 t1, con2.table2 t2 where t1.col1 = t2.col1
); 
```

# perl - 在 perl 中发送文件句柄作为参数

> ID：13702278
> 
> 赞同：4
> 
> 时间：2012-12-04T11:51:40.317
> 
> 标签：perl, filehandle

是否可以将**文件句柄**作为参数发送到 PERL 中的子例程？

如果是，您能否提供一个示例代码片段来说明如何接收它并在子例程中使用它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T12:06:45.460

You're using lexical variables (`open(my $fh, ...)`) as you should, right? If so, you don't have to do anything special.

```
sub f { my ($fh) = @_; print $fh "Hello, World!\n"; }
f($fh); 
```

If you're using a glob (`open(FH, ...)`), just pass a reference to the glob.

```
f(\*STDOUT); 
```

Though many places will also accept the glob itself.

```
f(*STDOUT); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T12:15:38.533

是的，您可以使用 .below 来实现。下面是相同的示例代码。

```
#!/usr/bin/perl

use strict;
use warnings;

open (MYFILE, 'temp');

printit(\*MYFILE);

sub printit {
    my $fh = shift;
    while (<$fh>) {
        print;
    }
} 
```

下面是测试：

```
> cat temp
1
2
3
4
5 
```

perl 脚本示例

```
> cat temp.pl
#!/usr/bin/perl

use strict;
use warnings;

open (MYFILE, 'temp');
printit(\*MYFILE);
sub printit {
    my $fh = shift;
    while (<$fh>) {
        print;
    } 
} 
```

执行

```
> temp.pl
1
2
3
4
5
> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T11:53:43.360

是的，像这样：

```
some_func($fh, "hello"); 
```

where`some_func`定义如下：

```
sub some_func {
    my ($fh, $str) = @_;
    print { $fh } "The message is: $str\n";
} 
```

# javascript - jQuery 中的事件处理程序序列

> ID：13702279
> 
> 赞同：3
> 
> 时间：2012-12-04T11:51:41.157
> 
> 标签：javascript, jquery, html, events

我正在将事件动态绑定到文本元素。这是我的代码：

```
<input type="text" id="myTxt" />

<script type="text/javascript">
    function attachEvent1(element){
        element.keyup(function(){
            console.log("Event:"+event.keyCode);
        });
    }
    function attachEvent2(element){
        element.keyup(function(){
            console.log("Value:"+this.value);
        });
    }   
    attachEvent1($('#myTxt'));
    attachEvent2($('#myTxt'));      
</script> 
```

我需要它，我希望第二个事件处理程序（由 attachEvent2 附加）首先被调用，即使它是在 attachEvent1 之后绑定的。可以在 jQuery 中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:56:42.363

像这样的东西怎么样：

```
function handler1()
{
  console.log("Event:"+event.keyCode);
}

function handler2()
{
  console.log("Value:"+this.value);
}

function attachEvent1(element)
{
  element.keyup(handler1);
}

function attachEvent2(element)
{
  element.unbind('keyup', handler1);
  element.keyup(handler2);
  element.bind('keyup', handler1);
}   

attachEvent1($('#myTxt'));
attachEvent2($('#myTxt')); 
```

如果您想要更高级的东西，您可以保留处理程序列表，并在循环中进行重新绑定等，但是重新绑定事件的基本思想具有预期的效果。

# php - 与数据库的 PDO 连接错误

> ID：13702283
> 
> 赞同：4
> 
> 时间：2012-12-04T11:52:06.243
> 
> 标签：php, database, pdo

我试图在我的本地机器上运行我的项目，但它带来了以下错误：

> 错误号：`2`
> 文本：`PDO::__construct() [pdo.--construct]: php_network_getaddresses: getaddrinfo failed: The requested name is valid, but no data of the requested type was found. LOCATION: C:\xampp\htdocs\rsecrets\business\database_handler.php, line 25, at December 4, 2012, 12:46 pm`

我如何定义连接：

```
define('DB_PERSISTENCY', 'true');
define('DB_SERVER', 'localhost');
define('DB_USERNAME', 'root');
define('DB_PASSWORD', '');
define('DB_DATABASE', 'xxyy');
define('PDO_DSN', 'mysql:host=' . DB_SERVER . ';dbname=' . DB_DATABASE); 
```

这是 database_handler.php 第 25 行的内容：

```
 self::$_mHandler =
          new PDO(PDO_DSN, DB_USERNAME, DB_PASSWORD,
                  array(PDO::ATTR_PERSISTENT => DB_PERSISTENCY)); 
```

我没有得到什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:10:57.307

`localhost`您的主机文件中可能没有有效的 IPv4 条目。

`notepad.exe`以管理员身份运行并编辑`%SystemRoot%\system32\drivers\etc\hosts`

确保出现以下行（没有前导`#`）

```
127.0.0.1    localhost 
```

# php - 管理员权限不起作用

> ID：13702290
> 
> 赞同：-3
> 
> 时间：2012-12-04T11:52:36.200
> 
> 标签：php, mysql, phpmyadmin

我有这个代码，它必须过滤管理员的权限，我什至做了仔细检查。但这似乎不起作用。

**代码 ：**

```
<?php
    include("db.php");
    $result=mysql_query("SELECT * FROM members where admin='true' AND admincheck='1'");
    while($test = mysql_fetch_array($result)) {
        echo"<li><a href='archief.php'><span>archief</span></a></li>";
    }
    mysql_close($conn);
?> 
```

**数据库：**

```
CREATE TABLE `members` (
`member_id` int(11) unsigned NOT NULL,
`admin` varchar(5) NOT NULL default 'false',
`admincheck` int(1) NOT NULL default '0',
`firstname` varchar(100) default NULL,
`lastname` varchar(100) default NULL,
`mail` varchar(150) NOT NULL,
`login` varchar(100) NOT NULL default '',
`passwd` varchar(32) NOT NULL default '',
PRIMARY KEY  (`member_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

INSERT INTO `members` (`member_id`, `admin`, `admincheck`, `firstname`, `lastname`,   `mail`, `login`, `passwd`) VALUES 
(607, 'true', 1, '---', '----', '---', '---', '---'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:58:56.297

您需要将当前登录的会员ID放入查询中，因此假设您将登录的用户存储在会话中：

```
$member_id = (int)$_SESSION['member_id'];
$result=mysql_query("SELECT * FROM members where member_id = '$member_id' AND admin='true' AND admincheck='1' LIMIT 1");

if($result && mysql_num_rows($result) == 1)
{
    // user is an admin, show secret links
    echo "<li><a href='archief.php'><span>archief</span></a></li>";
} 
```

# asp.net - 在 asp.net Web 服务中调用异步方法

> ID：13702293
> 
> 赞同：0
> 
> 时间：2012-12-04T11:52:45.500
> 
> 标签：asp.net, web-services

我想在 asp.net Web 服务中调用一个 Web 方法（job1），然后在这个 Web 方法中异步调用一个过程（job2）。作业 1 不必等待作业 2 完成。

最好的方法是什么？(.net 4.5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:22:34.470

使用 jquery ajax 函数调用 Web 服务的方法。

```
 $.ajax({ 
             url: "test.html",
             context: document.body,
             async: true
         }); 
```

默认情况下 async 为 true，这将异步调用方法。

要异步调用存储过程，请查看以下链接：

[ADO.NET 异步 SQL 调用](http://www.codeproject.com/Articles/42266/ADO-NET-Asynchronous-SQL-Calls)

# c# - 在 where 子句中使用整数主键的 SQLite 选择查询返回空结果

> ID：13702297
> 
> 赞同：2
> 
> 时间：2012-12-04T11:52:53.310
> 
> 标签：c#, sqlite, servicestack, ormlite-servicestack

我正在使用 ServiceStack.OrmLite 将一些对象保存到带有主键“ID INTEGER AUTOINCREMENT”的 SQLite 数据库中。一切正常。

但是当我尝试通过查询“SELECT * FROM Table WHERE (ID = 112) OR (ID = 113)”来加载对象时，结果为空。

如果我将 where 子句更改为“(ID+0 = 112) OR (ID+0 = 113)”，则结果中有 2 行。当我使用 sqlite 命令行工具浏览数据库时，我看到所有记录都在这里，列类型为 INTEGER，所有行的 typeof(ID) 返回“整数”。可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:23:13.587

尝试使用**INTEGER PRIMARY KEY** ... 而不是**ID INTEGER AUTOINCREMENT**或**ID INTEGER PRIMARY KEY AUTOINCREMENT**重新创建表。

SQLite 处理 ROWID 的方式因语法而异。

查看[SQLite 自动增量](http://www.sqlite.org/autoinc.html)以获取更多信息。

# java - 如何在java中从String中检索特定值

> ID：13702299
> 
> 赞同：0
> 
> 时间：2012-12-04T11:52:56.683
> 
> 标签：java, string

我有一个包含值的字符串字段：

```
 String a = "Local/5028@from-queue-bd7f,1"; 
```

现在根据我的需要，我需要从上面的字符串字段中提取值“5028”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:58:44.877

`/` *这会在每个和* 上拆分字符串`@`。

```
String a = "Local/5028@from-queue-bd7f,1";
System.out.println(a.split("[/@]")[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:56:05.530

使用`String#substring`函数检索值。您需要将开始和结束索引作为参数传递。

```
String a = "Local/5028@from-queue-bd7f,1";
System.out.println(a.substring(a.indexOf('/')+1, a.indexOf('@'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:55:54.797

如果您知道您的格式是一致的，那么您可以使用 substring 方法，也可以使用 / 和 @ 拆分字符串，然后从 tokens 数组中获取第二个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:57:04.593

如果此字符串始终采用给定格式，那么您可以尝试以下操作：

```
String temp=a.split("@")[0];
System.out.println(temp.substring(temp.length()-4,temp.length())); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:01:45.187

**使用正则表达式：**

```
 String a = "Local/5028@from-queue-bd7f,1";
         Pattern p = Pattern.compile("\\d+");
         Matcher m = p.matcher(a);
         System.out.println(m.find() + " " + m.group()); 
```

**使用 String.Split：**

```
String a = "Local/5028@from-queue-bd7f,1";
         String[] split = a.split("/");
         System.out.println(split[1].split("@")[0]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T12:03:48.490

如果您的字符串格式是固定的，您可以使用：

```
String a = "Local/5028@from-queue-bd7f,1";
a = a.substring(a.indexOf('/') + 1, a.indexOf('@'));
System.out.println(a); 
```

# php - Cookie 未设置但数据库已更改

> ID：13702302
> 
> 赞同：2
> 
> 时间：2012-12-04T11:53:11.923
> 
> 标签：php, jquery, database, cookies

我正在使用 jQuery 让用户向上/向下投票。当用户投票时，设置了一个 cookie，因此用户只能为一篇文章投票一次（不刷新 cookie）。这很好用，除非用户在投票后立即投票并刷新页面：

jQuery：

```
$.post('vote.php',{id:id,field:field},function(){
// change button graphics
}); 
```

PHP：

```
setcookie(User::$cookieStart . User::$db_fields[$field_index], 
        $cookie . ':' . $id, time()+60*60*24*30,'/'); 
// This calls a function that effects the db
User::actionArticleTable($id,$field_index,1); 
```

当用户刷新时，cookie**未**设置但**mysql-info 已更改**，即使 db 代码位于 cookie 代码之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:59:57.180

Cookie 只是 HTML 页面中的标题项，因此在加载 vote.php 页面之前，cookie 不会发生任何变化。如果用户在 vote.php 页面返回之前刷新主页，则没有设置 cookie。下次用户访问此页面时，cookie 很好，但如果您想立即阻止投票，请考虑通过 javascript 设置 cookie。

```
function setCookie(c_name,value,exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
} 
```

# c++ - 使用 boost::format 打印布尔值作为符号值？

> ID：13702304
> 
> 赞同：5
> 
> 时间：2012-12-04T11:53:25.247
> 
> 标签：c++, boost, boost-format

如何使用`boost::format`符号值打印布尔值？

这可以在没有 的情况下完成`boost::io::group`吗？似乎预先发送到流的标志得到了重新测试：

```
#include <iomanip>
#include <iostream>
#include <boost/format.hpp>

int main()
{
  std::cout
    << std::boolalpha
    << true << " "
    << boost::format("%1% %2%\n")
         % true
         % boost::io::group(std::boolalpha, true)
    ;
} 
```

输出

```
true 1 true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-02T16:15:37.350

您可以像这样存档：

```
#include <iomanip>
#include <iostream>
#include <boost/format.hpp>

int main()
{
  std::cout
    << std::boolalpha
    << true << " "
    << boost::format("%1$b %2%\n")
         % true
         % boost::io::group(std::boolalpha, true)
    ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:42:18.503

在我看来，你不能。

我查看了 Boost.Format 文档和代码，但什么也没看到。

另一方面，[示例代码](http://www.boost.org/doc/libs/1_52_0/libs/format/example/sample_userType.cpp)展示了如何为用户定义的类型编写格式化程序。你可以为“bool”写一个

# ios - 如何在没有 UIWebView 的情况下播放 youtube 视频或在 youtube 视频开始使用 webview 播放时检测视频播放器？

> ID：13702306
> 
> 赞同：6
> 
> 时间：2012-12-04T11:53:31.223
> 
> 标签：ios, uiwebview, youtube, video-streaming, overlay

我需要在我的 iOS 应用程序中播放 youtube 视频，并且在播放视频时我需要在视频上添加一个覆盖。

1.现在如何在本机播放器中运行 youtube 视频？

2.如果我在 UIWebview 中播放视频，那么我如何检测到该视频正在播放以及如何在视频上添加叠加层？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T12:04:04.047

`MPMoviePlayerViewController`无法直接播放 youtube 视频 url。您需要在使用 url 加载之前提取`MPMoviePlayerViewController`url。

你可以在我的 github repo 中看到一个工作演示：

试试这个:: [https://github.com/DpzAtMicRO/IOSYoutubePlayer](https://github.com/DpzAtMicRO/IOSYoutubePlayer)

`LBYoutubeExtractor`使用 JSON 提取 youtube Url。
在您的应用程序中使用它之前，请务必阅读 README.md。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T03:49:16.807

MPMoviePlayerViewController 是一个不错的选择，但最后一次提交是几年前的事了。我找到了另一个名为“XCDYouTubeKit”的解决方案，它支持 iPhone/iPad 和 iOS7 及以上的全屏 YouTube 视频。

[您可以在此处](http://cocoadocs.org/docsets/XCDYouTubeKit/2.5.2/)访问 github 页面，并在[此处](https://github.com/0xced/XCDYouTubeKit)访问完整文档的教程

这是官方开发人员在他的页面中所说的：

> 在应用程序中播放 YouTube 视频的唯一官方方法是使用 Web 视图和 iframe 播放器 API。不幸的是，这很慢而且很丑陋，所以我写了这个播放器来给用户更好的观看体验。

# eclipse - 为什么eclipse总是在JavaDoc中的@param myParameter之后换行？

> ID：13702309
> 
> 赞同：11
> 
> 时间：2012-12-04T11:53:41.657
> 
> 标签：eclipse, autoformatting

我有这段 Java 代码：

```
/**
 * Initializes the Levenshtein Object with the two given words.
 * 
 * @param word1 first word
 * @param word2 second word
 */
public Levenshtein(String word1, String word2) {
    this.word1 = "." + word1.toLowerCase();
    this.word2 = "." + word2.toLowerCase();
    this.distance = new int[this.word2.length()][this.word1
            .length()];
} 
```

如果我按 Ctrl + Shift + F，我会得到：

```
/**
 * Initializes the Levenshtein Object with the two given words.
 * 
 * @param word1
 *            first word
 * @param word2
 *            second word
 */
public Levenshtein(String word1, String word2) {
    this.word1 = "." + word1.toLowerCase();
    this.word2 = "." + word2.toLowerCase();
    this.distance = new int[this.word2.length()][this.word1
            .length()];
} 
```

为什么 eclipse 做这个婴儿车换行？我如何切换它（而不是完全为 JavaDoc 切换它）？

这些是我目前在 eclipse 3.5.2 (Galileo) 中使用的[格式化程序设置。](https://github.com/MartinThoma/prog-ws1213/blob/master/Dokumente/Formatter.xml)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T12:14:23.323

Window > Preferences > Java > Code style > Formatter
(Edit) > Comments
复选框：@param 标记后的新行

见于朱诺 (4.2)。

# c++ - 跟踪简单的递归函数

> ID：13702311
> 
> 赞同：0
> 
> 时间：2012-12-04T11:53:44.497
> 
> 标签：c++, recursion

我越来越接近揭穿这个递归之谜了，在这行代码中只有一件事我无法追踪，那就是最终的返回值，`243`如果我调用`rec()`它传递值 5。这应该是痕迹：

```
n: 4 *3: 12
n: 3 *3: 9
n: 2 *3: 6
n: 1 *3: 3
n: 0 *3: 0
n: 1 *3: 3

result: 243 
```

正确的？它如何得到243的结果？

```
int rec(int n)
{
if (n == 0)
    return 1;

return 3 * rec(n-1);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T11:56:49.903

您的函数计算：**3^n**。

数字 3 与 n-1 次调用的结果相乘。

**f(n)** = 3 * **f(n-1)** ;

**f(0)** = 1；

**f(1)** = 3 * **f(0)** = 3 * 1 = 3；

**f(2)** = 3 * **f(1)** = 3 * 3 = 9；

**f(3)** = 3 * **f(2)** = 3 * 3 * **f(1)** = 3 * 3 * 3 = 27

. . .

**f(5)** = 3 * 3 * 3 *3 * 3 = **243**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:59:39.150

该函数计算

`3^n where n >= 0`

如果你通过 5 它计算 3 * 3 * 3 * 3 * 3 * (1) = 243

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T11:56:42.987

它只会乘以 3、4 倍：

```
return 3 * rec(n-1); 
```

我想你想要这样的东西：

```
return n * rec(n-1); 
```

# hadoop - map 函数中的更新计数器和 reduce 中的访问

> ID：13702313
> 
> 赞同：1
> 
> 时间：2012-12-04T11:53:56.827
> 
> 标签：hadoop

我正在使用 Hadoop 管道。我想在 map 中使用应该可以在 reduce 函数中访问的计数器。
可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:22:49.893

不，在同一个工作中是不可能的。但是，您可以有一个没有减速器的作业，收集您想要计算的任何计数器信息，然后开始第二个作业，在作业配置对象中添加这些计数值，然后第二个作业的减速器可以访问这些值.

编辑：

这是一个代码示例：

```
enum COUNTERS {C1; C2;}

class DriverCode
{
  Configuration conf = new Configuration();
  //the Mapper increases C1
  Job job1 = new Job(conf, "Job1"); 
  job1.setJarByClass(MyJar.class);
  job1.setMapperClass(MyMapper1.class); 
  ...

  //read out C1 
  long c1 = job.getCounters().findCounter(COUNTERS.C1).getValue();

  //set it for the new job
  conf.setLong("c1",c1);
  Job job2 = new Job(conf, "Job2"); 
  //and now you can access this configuration object in your second job
  job2.setJarByClass(MyJar.class); 
  job2.setMapperClass(MyMapper2.class);
  ...
} 
```

# javascript - 谷歌闭包库：组件上的 stopPropagation

> ID：13702319
> 
> 赞同：4
> 
> 时间：2012-12-04T11:54:31.980
> 
> 标签：javascript, google-closure-library

我试图弄清楚为什么 stopPropagation 在与谷歌闭包组件一起使用时不起作用。它适用于 browserEvents，但不适用于组件上的事件。请参阅下面的示例代码，在您的浏览器上演示该现象：

```
<html>
<head>
    <script type="text/javascript" src="closure/goog/base.js"></script>
</head>
<body>

<div id="div1" style="border: 1px solid black; width: 500px; height: 300px; padding: 10px">
    <div id="div2"></div>
</div>

<script>
    goog.require('goog.dom');
    goog.require('goog.ui.CustomButton');
    goog.require('goog.ui.Component');
    goog.require('goog.ui.Control');
    goog.require('goog.style');
</script>

<script>
    var outerBtn = new goog.ui.Control();
    outerBtn.decorate(goog.dom.$('div1'));
    var innerBtn = new goog.ui.CustomButton('Inner Button');
    outerBtn.addChild(innerBtn, true);
    outerBtn.setSupportedState(goog.ui.Component.State.FOCUSED, false);
    innerBtn.setSupportedState(goog.ui.Component.State.FOCUSED, false)

    goog.style.setStyle(innerBtn.getElement(), {
        border : '1px solid red',
        height : '100px'
    });
    goog.events.listen(outerBtn, goog.ui.Component.EventType.ACTION, function() {
        console.info('outer');
    });
    goog.events.listen(innerBtn, goog.ui.Component.EventType.ACTION, function(e) {
        console.info('inner');
        e.stopPropagation();
    });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:57:11.943

您的示例输出：

```
inner
outer 
```

在这种情况下， e.stopPropagation 可以正常工作。控制台输出“outer”是由于 outerBtn 自己的事件处理程序。没有从innerBtn冒泡。此外，注释掉 e.stopPropagation，输出将改变如下：

```
innner
outer
outer 
```

# grid - 如何使用 Netlogo 编程数独识别图像中的数字

> ID：13702327
> 
> 赞同：3
> 
> 时间：2012-12-04T11:55:02.813
> 
> 标签：grid, numbers, cells, sudoku, netlogo

大家好，我在使用 netlogo 编程识别图像中的数字时遇到了问题，请问有什么想法或技术可以识别单元格中的数字吗？我正在使用 netlogo 编码制作数独游戏。首先，我需要将图像导入屏幕并能够设置图像。

我需要能够使用图像生成随机数独谜题而无需任何重复。但首先要制作数独游戏，我必须能够使用图像中的数字。

到目前为止我已经得到了这个代码

```
to setup
    clear-all
    import-pcolors "s1.png"
    reset-ticks
end

to go
    ask patches with [pcolor != black]
    [ set pcolor white ]
end 
```

请我需要一个简单的算法来识别数独 netlogo 中的数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:12:18.710

看来您要问的是如何在 NetLogo中进行 OCR（[光学字符识别）。](http://en.wikipedia.org/wiki/Optical_character_recognition)

这不是 NetLogo “开箱即用”所做的事情，据我所知，目前也没有[NetLogo 扩展](https://github.com/NetLogo/NetLogo/wiki/Extensions)可以做到这一点。

不，没有“识别数字的简单算法”，您可以在 NetLogo 代码中复制粘贴。

所以，你可以做什么？

理论上，您可以[编写一个新的 NetLogo 扩展](https://github.com/NetLogo/NetLogo/wiki/Extensions-API)来与现有的 OCR 包交互，但这不是一项简单的任务。

您也可以询问[NetLogo 用户组](http://groups.yahoo.com/group/netlogo-users/)是否有人曾经尝试过这样做。也许那里的人会对你有更多的见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:10:08.790

您可以尝试在 NetLogo 中构建模式识别，前提是您的单个数独单元具有不错的分辨率（例如至少 9x9 块）。然后将每个单元格与代表 9 个数字中的每一个的预定义 9x9 补丁模式匹配。将您的结果保存为 9 种不同品种的海龟。

（我自己没有尝试过）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:11:43.280

如果我这样做，我会做 10 个形状为“0”..“9”的乌龟面包。所以我不必识别数字，而只需识别海龟的品种。

# php - php的PNG图像Alpha颜色问题

> ID：13702330
> 
> 赞同：0
> 
> 时间：2012-12-04T11:55:19.880
> 
> 标签：php, image, alpha

我有这个公共功能：

```
 public function resize($width, $height)
{
    $newImage = imagecreatetruecolor($width, $height);
    if($this->_imageType == IMAGETYPE_PNG && $this->_transparent === true){
        imagealphablending($newImage, false);
        imagesavealpha($newImage, true);
        imagefilledrectangle($newImage, 0, 0, $width, $height, imagecolorallocatealpha($newImage, 255, 255, 255, 127));
    }
    imagecopyresampled($newImage, $this->_image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
    $this->_image = $newImage;
} 
```

预览图像时出现我的问题。它不显示 alpha 颜色。我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:02:14.473

尝试将 imagealphablending 设置为 true，而不是 false。

# c# - ClientContext.ExecuteQuery() 产生连接错误消息

> ID：13702335
> 
> 赞同：2
> 
> 时间：2012-12-04T11:55:33.017
> 
> 标签：c#, sharepoint-2010

我正在尝试运行`ClientContext.ExecuteQuery()`，但收到​​以下错误消息：

> “底层连接已关闭：预期保持活动的连接已被服务器关闭。” >> “无法从传输连接读取数据：现有连接被远程主机强行关闭。”

我的代码如下：

```
ClientContext _clientcontext = new ClientContext("<URL of sharepoint site>");
NetworkCredential _cred = new NetworkCredential("userid", "password", "domain");
_clientcontext.Credentials = _cred;
Web _site = _clientcontext.Web;
CamlQuery _query = new CamlQuery();
try
{
    _query.ViewXml = <View><Where><Eq><FieldRef Name=\"Created\"/><Value         Type=\"DateTime\"><Today OffsetDays=\"-4\"/></Value></Eq></Where></View>";
    List _splist = _site.Lists.GetById(new Guid("<GUID>"));
    ListItemCollection _listitems = _splist.GetItems(_query);
    _clientcontext.Load(_listitems);
    _clientcontext.ExecuteQuery(); 
```

# javascript - 从数据库复制到剪贴板文本输出

> ID：13702341
> 
> 赞同：5
> 
> 时间：2012-12-04T11:56:05.653
> 
> 标签：javascript

我有一个搜索表单，可以将商家详细信息（每个商家的姓名、电话、电子邮件地址）输出到表格中。
我希望在每个字段旁边都有一个复制按钮，以便用户可以单击它并将其复制到剪贴板（复制时文本会突出显示）。我的用户将只使用 IE9 浏览。

问题是可能有不止一组结果，因此脚本无法调用特定编号的函数，就像我在下面的 textarea 中所做的那样：

```
function highlightmetasearch01() {
    document.copydata01.text2copy01.select();
     document.copydata01.text2copy01.focus(); 
}
function copymetasearch01() {
    highlightmetasearch01();
    textRange = document.copydata01.text2copy01.createTextRange();
    textRange.execCommand("RemoveFormat");
    textRange.execCommand("Copy");
}

function highlightmetasearch02() {
    document.copydata02.text2copy02.select();
    document.copydata02.text2copy02.focus(); 
}
function copymetasearch02() {
    highlightmetasearch02();
    textRange = document.copydata02.text2copy02.createTextRange();
    textRange.execCommand("RemoveFormat");
    textRange.execCommand("Copy");
} 
```

HTML：

```
<textarea name="text2copy01">The first textarea.</textarea>
<br />
<button onclick="copymetasearch01();return false;">COPY</button>

<textarea name="text2copy02">The second textarea.</textarea>
<br />
<button onclick="copymetasearch02();return false;">COPY</button> 
```

我想知道这是否可能？...

```
<td><span>Name from DB here</span> <button onclick="<!--copy and highlight text within most recent span tag-->">COPY</button></td>

<td><span>Phone from DB here</span> <button onclick="<!--copy and highlight text within most recent span tag-->">COPY</button></td>

<td>Other text here that shouldn't be highlighted or copied <span>Email address from DB here</span> <button onclick="<!--copy and highlight text within most recent span tag-->">COPY</button></td> 
```

还是有更有效的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:07:26.770

This question:

[How do I copy to the clipboard in JavaScript?](https://stackoverflow.com/q/400212/1068266)

...contains a fairly long discussion about copying text to the clipboard with JavaScript. The most upvoted (and in my opinion the correct) answer does not actually do the copying, but makes use of a popup to present a text box with the text already selected, allowing the user to simply CTRL+C to copy.

The reasoning behind this is because for a site to control what is on a user's clipboard can be dangerous and undesirable for the user. Understood that here you are getting the user's permission to do so, but still... If you want to take what the answer in above post suggests and apply it to your site, perhaps include a button which automatically selects the text to copy in the field next to it. For information on selecting text in a field see this post: [Programmatically selecting partial text in an input field](https://stackoverflow.com/questions/646611/programmatically-selecting-partial-text-in-an-input-field).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:15:30.573

由于您似乎已经弄清楚了复制方法，并且只需要一种访问动态生成的元素的方法，请使用`document.getElementById('text2copy02').createTextRange()`而不是`document.copydata02.text2copy02.createTextRange()`. 请参阅下面的示例代码。我希望我正确理解了您的问题。

html:

```
<td><span id="copyMe1">Name from DB here</span> <button onclick="copyMeToClipboard('copyMe1')">COPY</button></td>

<td><span id="copyMe2">Phone from DB here</span> <button onclick="copyMeToClipboard('copyMe2')">COPY</button></td> 
```

js：

```
function copyMeToClipboard(elementId) {
    document.getElementById(elementId).select();
    document.getElementById(elementId).focus(); 
    textRange = document.getElementById(elementId).createTextRange();
    textRange.execCommand("RemoveFormat");
    textRange.execCommand("Copy");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:21:51.300

我将插入[jQuery](http://jquery.com/)作为解决您问题的好方法。我知道问题中没有提到它，但是通过让您使用 CSS 样式的选择器，它使遍历 DOM 树变得非常容易。将此与单击事件处理程序结合起来，您会得到“我想知道这是否可能？” 解决方案：

```
// Give your copy buttons the "copier" class
// This will add a click event handler:
$('.copier').click(function() {
    // Find the nearest-parent td to the clicked button:
    var row = $(this).closest('td');

    // Find the first span within that td:
    var txt = row.find('span:first');

    // Do the copying:
    window.clipboardData.setData('Text', txt.text());

    // And the highlighting:
    var range = document.body.createTextRange();
    range.moveToElementText(txt[0]);
    range.select();
}); 
```

现在我留下了副本并突出显示代码（**编辑：**除了现在我没有），因为它有点长，但你可以在 Stack Overflow 的其他地方找到一些好的（跨浏览器）实现：

*   [JQuery：在元素中选择文本（类似于用鼠标突出显示）](https://stackoverflow.com/q/985272/589985)
*   [使用 jQuery 将文本复制到客户端的剪贴板](https://stackoverflow.com/q/1539641/589985)

希望有帮助！

# ios - 核心数据数组作为属性

> ID：13702347
> 
> 赞同：1
> 
> 时间：2012-12-04T11:56:12.627
> 
> 标签：ios, core-data, entity

我想创建“事件”实体的属性，它将有一个简短的事件列表，正确的方法是什么？我认为正确的方法是使用数组，但我该怎么做呢？如果有人可以给我代码示例，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:57:21.387

不要听任何关于外键的建议——它们在 Core Data 中不存在。您需要做的是通过关系将您的实体链接**到**`Event`另一个（或自身）。

 **目前尚不清楚为什么一个事件会有一个简短的事件列表。也许您想区分事件类型或类似的东西。然后，您可以在 Core Data Model Editor 中创建一个新实体`EventType`并建立一对多关系：

```
Event <<----->> EventType 
```

现在一个事件可以链接任意数量的`EventType`对象。您可以`allowedEventTypes`为每个事件使用关系名称并访问该集合（不是数组，请注意，而是`NSSet`具有无序的唯一对象）：

```
NSSet *types = event.allowedEventTypes; 
```

一旦掌握了核心数据建模技术，编码就会变得异常简单。**

# javascript - 我如何从网格中获取/编辑字段（adminhtml）

> ID：13702353
> 
> 赞同：0
> 
> 时间：2012-12-04T11:56:39.700
> 
> 标签：javascript, magento

请告诉我，我如何从 adminhtml 网格获取/编辑文件。jQuery 没有得到这个字段的值。事件 - 单击行。我尝试编辑“grid.js”。

```
alert(jQuery("table#productGrid_table tbody>tr>td:nth-child(3)").html) 
```

得不到结果

如果

```
alert(jQuery(this).html) 
```

结果是

```
function(a){ifa===b}return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace.... 
```

理想情况下我不会使用那个脚本，在简单的桌子上它可以工作

```
jQuery("table#productGrid_table tbody>tr>td:nth-child(3)").on('click', function(){
    jQuery(this).parent('tr').find('input:checkbox').attr("checked","checked");
    jQuery(this).html("<input type='text' value='"+jQuery(this).text()+"' class='filterInput' autofocus/>");
    }).on('click', 'td input', function(){
        return false;
    }).on('focusout', 'td input', function(){
        jQuery(this).parent('td').text(jQuery(this).val());
}); 
```

请有人帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:06:11.803

您没有调用 html 函数 - 添加括号来执行此操作：

```
// alerts html content from selected node
alert(jQuery("table#productGrid_table tbody>tr>td:nth-child(3)").html())
//                                                                   ^^ 
```

# java - 如何从包含联系人详细信息且对象不在电话簿中的对象生成 .vcf 文件

> ID：13702357
> 
> 赞同：10
> 
> 时间：2012-12-04T11:56:46.433
> 
> 标签：java, android, vcf-vcard

我想为一个包含联系信息的对象生成一个 .vcf 文件，如姓名、图像、电话号码、传真号码、电子邮件 ID、地址等。这个对象没有添加到电话的通讯录中，但它存储在我的应用。

生成我的 .vcf 文件后，我可以像这样发送此 vcard

```
Intent i = new Intent();
i.setAction(android.content.Intent.ACTION_VIEW);
i.setDataAndType(Uri.parse("**generated.vcf**"), "text/x-vcard");
startActivity(i); 
```

但我不知道如何获取这个生成的 .vcf 文件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-04T12:15:52.840

生成 .vcf 文件实际上很容易。看看[VCF 格式](http://en.wikipedia.org/wiki/VCard)- 它是一个简单的文本文件。您需要做的就是创建文本文件并使用 VCF 字段将信息写入其中。你最终会得到这样的东西：

```
Person p = getPerson();

File vcfFile = new File(this.getExternalFilesDir(null), "generated.vcf");
FileWriter fw = new FileWriter(vcfFile);
fw.write("BEGIN:VCARD\r\n");
fw.write("VERSION:3.0\r\n");
fw.write("N:" + p.getSurname() + ";" + p.getFirstName() + "\r\n");
fw.write("FN:" + p.getFirstName() + " " + p.getSurname() + "\r\n");
fw.write("ORG:" + p.getCompanyName() + "\r\n");
fw.write("TITLE:" + p.getTitle() + "\r\n");
fw.write("TEL;TYPE=WORK,VOICE:" + p.getWorkPhone() + "\r\n");
fw.write("TEL;TYPE=HOME,VOICE:" + p.getHomePhone() + "\r\n");
fw.write("ADR;TYPE=WORK:;;" + p.getStreet() + ";" + p.getCity() + ";" + p.getState() + ";" + p.getPostcode() + ";" + p.getCountry() + "\r\n");
fw.write("EMAIL;TYPE=PREF,INTERNET:" + p.getEmailAddress() + "\r\n");
fw.write("END:VCARD\r\n");
fw.close();

Intent i = new Intent();
i.setAction(android.content.Intent.ACTION_VIEW);
i.setDataAndType(Uri.fromFile(vcfFile), "text/x-vcard");
startActivity(i); 
```

（请注意，此代码要放在活动中。如果它不在活动中，则将`this`前面替换为`getExternalFilesDir`的实例`Context`。）

您可以根据需要拥有更多或更少的字段。如果字段值中有或字符`,`，则需要使用;对其进行转义。将换行符放入一个值中，写入文件（即文件本身必须包含，第二个斜杠用于转义换行符中的斜杠）。`;``\``\``\\n``\n`

这段代码相当粗糙，但它应该可以帮助您入门。再一次，看看 VCF 的格式，然后从那里开始。

**更新：**感谢@Michael 指出我原始答案中的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T16:56:55.120

您可能对使用 vCard 库而不是手动创建 vCard 字符串感兴趣。这样，您就不必担心所有格式细节，例如要转义的字符。 [ez-vcard](http://code.google.com/p/ez-vcard)就是这样一个库。

使用 ez-vcard，@AleksG 的代码示例中的 vCard 将像这样生成：

```
Person p = getPerson();

File vcfFile = new File(this.getExternalFilesDir(null), "generated.vcf");

VCard vcard = new VCard();
vcard.setVersion(VCardVersion.V3_0);

StructuredNameType n = new StructuredNameType();
n.setFamily(p.getSurname());
n.setGiven(p.getFirstName());
vcard.setStructuredName(n);

vcard.setFormattedName(new FormattedNameType(p.getFirstName() + " " + p.getSurname()));

OrganizationType org = new OrganizationType();
org.addValue(p.getCompanyName());
vcard.setOrganization(org);

vcard.addTitle(new TitleType(p.getTitle()));

TelephoneType tel = new TelephoneType(p.getWorkPhone());
tel.addType(TelephoneTypeParameter.WORK));
tel.addType(TelephoneTypeParameter.VOICE));
vcard.addTelephoneNumber(tel);

tel = new TelephoneType(p.getHomePhone());
tel.addType(TelephoneTypeParameter.HOME));
tel.addType(TelephoneTypeParameter.VOICE));
vcard.addTelephoneNumber(tel);

AddressType adr = new AddressType();
adr.setStreetAddress(p.getStreet());
adr.setLocality(p.getCity());
adr.setRegion(p.getState());
adr.setPostalCode(p.getPostcode());
adr.setCountry(p.getCountry());
adr.addType(AddressTypeParameter.WORK);
vcard.addAddress(adr);

EmailType email = new EmailType(p.getEmailAddress());
email.addType(EmailTypeParameter.PREF);
email.addType(EmailTypeParameter.INTERNET);
vcard.addEmail(email);

vcard.write(vcfFile);

Intent i = new Intent();
i.setAction(android.content.Intent.ACTION_VIEW);
i.setDataAndType(Uri.fromFile(vcfFile), "text/x-vcard");
startActivity(i); 
```

# windows - 带括号和管道的多行 Windows shell 命令

> ID：13702359
> 
> 赞同：2
> 
> 时间：2012-12-04T11:56:50.100
> 
> 标签：windows, batch-file, cmd, command-prompt

我正在尝试在 Windows 上使用 OpenSSL 加密一些表单数据，但我很难弄清楚什么是正确的语法。使用以下命令，OpenSSL 返回一条 PKCS7 消息，但仍然给我一条`& was unexpected at this time`消息。

```
(openssl smime -sign -signer client-public.pem -inkey client-private.pem -outform der -nodetach -binary^ 
formkey1=formvalue1^ 
formkey2=formvalue2^ 
formkey3=formvalue3^ 
^ 
^ 
) | openssl smime -encrypt -des3 -binary -outform pem server-public.pem 
```

我觉得我的管道在那里造成了一些问题，但我不知道我应该怎么做才能获得干净、无错误的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:47:30.567

无需将其拆分为多行。
因此，您应该首先测试它是否适用于单行。

然后你可以使用多行插入符号，但不要忘记在下一行添加一个空格，否则它将把完整的文本粘贴在一起而没有任何分隔符。
并且右括号之前的插入符号将失败，因为多行插入符号会转义下一行的第一个字符，因此您的右括号不会关闭任何内容。

这应该工作

```
(openssl smime -sign -signer client-public.pem -inkey client-private.pem -outform der -nodetach -binary^
 formkey1=formvalue1^
 formkey2=formvalue2^
 formkey3=formvalue3^
 ^
 ^
 ) | openssl smime -encrypt -des3 -binary -outform pem server-public.pem 
```

# c# - 如何在 Silverlight 中将节点附加到 xml 文件？

> ID：13702365
> 
> 赞同：1
> 
> 时间：2012-12-04T11:57:11.323
> 
> 标签：c#, xml, silverlight

我在 ClientBin 文件夹中有一个名为 XMLFile1.xml 的 xml 文件。文件中有三个节点：

```
<?xml version="1.0" encoding="utf-8" ?>
<People>
  <Person FirstName="Ram" LastName="Sita"/>
  <Person FirstName="Krishna" LastName="Radha"/>
  <Person FirstName="Heer" LastName="Ranjha"/>
</People> 
```

我可以像这样从文件中读取节点：

```
 public class Person
        {
            public string FirstName { get; set; }
            public string LastName { get; set; }
        }

private void Button_Click_1(object sender, RoutedEventArgs e)
{

    Uri filePath = new Uri("XMLFile1.xml", UriKind.Relative);
    WebClient client1 = new WebClient();
    client1.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client1_DownloadStringCompleted);

    client1.DownloadStringAsync(filePath);
}

  void client1_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                XDocument doc = XDocument.Parse(e.Result);
                IEnumerable<Person> list = from p in doc.Descendants("Person")
                                           select new Person
                                           {
                                               FirstName = (string)p.Attribute("FirstName"),
                                               LastName = (string)p.Attribute("LastName")
                                           };
                DataGrid1.ItemsSource = list;
            }
        } 
```

但我不能将节点附加到这个。我对 XDocument 和 XMLDocument 所做的事情给了我编译错误。谢谢。

**更新**：例如，我尝试过这样的事情：

字符串 FirstName = "Ferhad"; 字符串 LastName = "Cebiyev";

```
 XDocument xmlDoc = new XDocument();
    string path = "C:\\Users\\User\Desktop\\temp\\SilverlightApplication3\\SilverlightApplication3.Web\\ClientBin\\XMLFile1.xml";
    xmlDoc.Load(path);
    xmlDoc.Add(new Person { FirstName=FirstName, LastName = LastName});

    xmlDoc.Save(path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:04:04.457

这就是问题：

```
xmlDoc.Add(new Person { FirstName=FirstName, LastName = LastName}); 
```

两个问题：

*   这试图添加到文档的*根目录*。已经有一个根元素，所以这将失败。
*   那是试图`Person`在文档中添加一个。您想添加一个`XElement`.

所以你可能想要：

```
xmlDoc.Root.Add(new XElement("Person",
                             new XAttribute("FirstName", FirstName),
                             new XAttribute("LastName", LastName))); 
```

# php - 为 Windows 编译 PHP 扩展

> ID：13702366
> 
> 赞同：4
> 
> 时间：2012-12-04T11:57:14.110
> 
> 标签：php, php-extension

我之前已经设法在 Linux 环境中使用扩展名编译了[XHP 。](https://github.com/facebook/xhp)`.so`我正在尝试编译它以在 Windows 环境中使用（`.dll`），我已经按照php.net 上的以下[教程](https://wiki.php.net/internals/windows/stepbystepbuild)`buildconf`进行操作，但是在我之后，我看不到扩展名`configure --help`（我在将源文件夹放入`ext`目录时下载了源代码） ）。任何帮助，将不胜感激。

我正在使用 Visual Studio 2008 并希望为 PHP 5.4 编译扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:06:06.037

XHP 没有`config.w32`支持 Windows 构建环境的文件（请参阅[Build for Windows](https://github.com/facebook/xhp/issues/20) .

Windows 使用与 Linux 不同的构建系统，因此它需要不同的配置。我记得手动将 a 转换为 a`config.m4`以`config.w32`获取有关如何编写自己的 PHP 扩展的教程，并且相对轻松。本来可以这样，因为与[XHP 的 config.m4](https://github.com/facebook/xhp/blob/master/config.m4)相比，它很简单。

复制 to 的内容`config.m4`并`config.w32`尝试构建它以查看会发生什么不会有什么坏处。

# jsf-2 - 如何防止多个复合组件在 JSF 页面上自行重置？

> ID：13702370
> 
> 赞同：4
> 
> 时间：2012-12-04T11:57:24.907
> 
> 标签：jsf-2, composite-component

我把这个问题放在一个简单的例子中，一个计算 2 个输入之和并将结果打印到 outputText 中的复合组件

主要 JSF 页面：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ez="http://java.sun.com/jsf/composite/ezcomp/">
    <h:head></h:head>
    <h:body>
      <ez:Calculator />
      <br/>
      <br/>
      <ez:Calculator />
      <br/>
      <br/>
      <ez:Calculator />
    </h:body>
</html> 
```

复合组件 XHTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:composite="http://java.sun.com/jsf/composite"
  xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>This content will not be displayed</title>
    </h:head>
    <h:body>
    <composite:interface componentType="calculator">
    </composite:interface>

    <composite:implementation>
      <h:form>
      <h:inputText id="first" value="#{cc.firstNumber}" /> 
      <h:commandButton value="+" action="#{cc.sum}"/>
      <h:inputText id="second" value="#{cc.secondNumber}" /> 
      </h:form>
      <h:outputText id="result" value="#{cc.result}" />
  </composite:implementation>

</h:body>
</html> 
```

复合组件支持bean：

```
package ez;

import javax.faces.component.FacesComponent;
import javax.faces.component.UINamingContainer;

@FacesComponent("calculator")
public class Calculator extends UINamingContainer  {

    private Long firstNumber;
    private Long secondNumber;
    private Long result;

    public Calculator() {
    }

    @Override
    public String getFamily() { 
      return "javax.faces.NamingContainer"; 
    }

    public void setFirstNumber(String firstNumber) {
      this.firstNumber = Long.parseLong(firstNumber);
    }

    public String getFirstNumber() {
      if(firstNumber == null) {
        return null;
      }
      return firstNumber.toString();
    }

    public void setSecondNumber(String secondNumber) {
      this.secondNumber = Long.parseLong(secondNumber);
    }

    public String getSecondNumber() {
      if(secondNumber == null) {
        return null;
      }
      return secondNumber.toString();
    }

    public String getResult() {
      if(result == null) {
        return null;
      }
      return result.toString();
    }

    public void setResult(String result) {
      this.result = Long.parseLong(result);
    }     

    public void sum() {
      this.result = this.firstNumber + this.secondNumber;
    }
} 
```

所以，我有 3 个复合组件，它们都应该做同样的事情，但是当我按下 SUM 按钮时，服务器处理请求后，结果会打印在页面上，但其他 2 个组件的值被清除。

我怎样才能防止这种情况？我怎样才能强迫它保留这些价值观？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T12:55:12.073

`UIComponent`每次请求都会重新创建实例，因此每次都会丢失所有实例变量。它们基本上就像请求范围内的托管 bean，而您打算将它们放在视图范围内。您需要在每个属性的基础上考虑视图状态保存。默认情况下，这通常已经为 的所有属性完成`#{cc.attrs}`。因此，如果可以，请使用它：

```
<cc:interface componentType="calculator">
    <cc:attribute name="firstNumber" type="java.lang.Long" />
    <cc:attribute name="secondNumber" type="java.lang.Long" />
</cc:interface>
<cc:implementation>
    <h:form>
        <h:inputText id="first" value="#{cc.attrs.firstNumber}" /> 
        <h:commandButton value="+" action="#{cc.sum}"/>
        <h:inputText id="second" value="#{cc.attrs.secondNumber}" /> 
    </h:form>
    <h:outputText id="result" value="#{cc.attrs.result}" />
</cc:implementation> 
```

仅此（省略空检查；我建议`required="true"`在输入上使用）

```
@FacesComponent("calculator")
public class Calculator extends UINamingContainer {

    public void sum() {
        Long firstNumber = (Long) getAttributes().get("firstNumber");
        Long secondNumber = (Long) getAttributes().get("secondNumber");
        getAttributes().put("result", firstNumber + secondNumber);
    }

} 
```

否则，您必须通过将所有属性 getter/ *setter*委托给[`UIComponent#getStateHelper()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getStateHelper%28%29). 基于与您所拥有的完全相同的 Facelets 代码，整个支持组件将如下所示：

```
@FacesComponent("calculator")
public class Calculator extends UINamingContainer {

    public void sum() {
        setResult(getFirstNumber() + getSecondNumber());
    }

    public void setFirstNumber(Long firstNumber) {
        getStateHelper().put("firstNumber", firstNumber);
    }

    public Long getFirstNumber() {
        return (Long) getStateHelper().eval("firstNumber");
    }

    public void setSecondNumber(Long secondNumber) {
        getStateHelper().put("secondNumber", secondNumber);
    }

    public Long getSecondNumber() {
        return (Long) getStateHelper().eval("secondNumber");
    }

    public void setResult(Long result) {
        getStateHelper().put("result", result);
    }

    public Long getResult() {
        return (Long) getStateHelper().eval("result");
    }

} 
```

看，没有局部变量了。`String-Long`请注意，我还通过声明正确的 getter 返回类型和 setter 参数类型来消除对那些丑陋的手动转换的需要。JSF/EL 将根据默认转换器或自定义`Converter`s 自动进行转换。由于 已经有一个默认值`Long`，因此您无需提供自定义`Converter`.

* * *

**与具体问题无关**，您可以安全地删除该`getFamily()`方法。`UINamingContainer`已经提供了这一点。如果您要实现`NamingContainer`接口，那么您确实需要自己提供它，但这里不是这种情况。上述支持组件示例已将其删除。

# c++ - vim 或 gcc 的无法解释的行为

> ID：13702375
> 
> 赞同：2
> 
> 时间：2012-12-04T11:57:34.640
> 
> 标签：c++, regex, linux, vim

我运行了这个简单的程序：

```
#include <iostream>
#include <string>
using namespace std;

#include <boost/regex.hpp>

int main ()
{

//    boost::regex fullname_regex ("[A–Z]+[a–z]*, [A-Z][a–z]*");
boost::regex fullname_regex ("[A-Z]+[a-z]*, [A-Z][a-z]*");

string name;
cout << "Enter you full name: " << flush;

getline (cin, name);
if (! regex_match (name, fullname_regex))
{
    cout << "Error: name not entered correctly" << endl;
}

return 0;
} 
```

我刚刚从某个地方复制的。当我取消注释注释行（原始副本/粘贴的一部分）并注释下一行（由我自己键入）时，程序总是拒绝该名称。否则它会按预期工作。我正在使用 vim。我确实`:set list`看到了隐藏的字符，并且线条是相同的。我在原始行之前插入了一个很长的注释以便将其向下移动，怀疑是磁盘故障（非常旧的系统），但我仍然得到了同样的错误。这是一个没有 gui 的 ubuntu 服务器，我使用 putty 来执行此操作。我不习惯在 linux 下遇到这样的问题，如果有人知道什么可以解释这种奇怪的行为，请告诉我。也许 vim 仍然使用原始页面中的一些选项，这些选项确实[在这里](http://www.mochima.com/tutorials/strings.html)并且已格式化，但`:set list`没有显示它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:03:09.240

破折号不一样。注释的更长，由不同的字符表示，因此解释不同。常见的复制+粘贴错误。

[http://en.wikipedia.org/wiki/Dash](http://en.wikipedia.org/wiki/Dash)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T12:08:45.557

`-`注释掉的行中的那个字符是 U+2013 *EN DASH*，而不是 ASCII 破折号 U+002d。

由于我使用的位图字体有限，打开文件时Unicode字符已经凸出来了，但是可以使用`g8`命令打印光标下字符的UTF-8编码值，或者使用`:call search('[^\x00-\x7F]')`定位下一个非-ASCII 字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:04:56.080

当我将您的代码粘贴到我的文本编辑器中时，我立即看到您在注释行中的第一个 [AZ] 实际上使用了一个长破折号。

您想要一个简单的破折号，这就是您键入的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T13:21:45.593

# css - 图形图像无法根据主题选择图像

> ID：13702376
> 
> 赞同：0
> 
> 时间：2012-12-04T11:57:42.193
> 
> 标签：css, jsf-2, primefaces

我的项目中有 3 个不同的主题。将 context -param 值更改为 web.xml 后，所有主题都可以正常工作
，就像我当前的主题一样
`<context-param> <param-name>primefaces.THEME</param-name> <param-value>NSFPortalGreenTheme</param-value> </context-param>`

但是在更换主题时，我发现primefaces无法从当前主题的IMAGE文件夹中获取图片

我有一个图像代码行如下
`<p:graphicImage library="images" alt="NSF" name="logo.png"></p:graphicImage>`

如何选择不同主题的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:36:41.170

确保您拥有 primefaces 3.4+，因为库和名称属性仅在 3.4 版中添加。

目录结构应该是这样的：

```
--resources
----theme1
-------images
----theme2
-------images 
```

然后您可以在`<p:graphicImage>`library 属性中使用指定库名称作为主题名称，如下所示：

```
<p:graphicImage library="theme1" alt="NSF" name="images/logo.png" /> 
```

# android - 如何使用 Google Maps V2 删除单个标记？

> ID：13702379
> 
> 赞同：80
> 
> 时间：2012-12-04T11:57:47.340
> 
> 标签：android, google-maps, android-mapview, google-maps-android-api-2

从地图中删除标记的唯一方法是明确的。但是，它会清除地图上的所有标记。

我只想删除单个标记或一组标记。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-12-04T12:13:39.240

添加标记后，可以获得其参考：

```
Marker marker = map.addMarker(..); 
```

该类`Marker`有一个[`remove`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker#remove())方法：

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-07T22:16:20.560

我遇到了同样的问题，所以我正在解决它

```
mMap = super.getMap();
map.clear(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-06T19:09:19.123

我写了一篇关于如何在标记从屏幕上移出时删除它们并在它们出现在屏幕上时再次添加它们的博客文章。如果您尝试同时向 GoogleMap 添加数千个标记，但又不希望性能像它们同时都在地图上那样受到影响，这很有用。它使用您详述的相同方法（在标记上调用 remove()）。

[使用 Google Maps Android API V2 隐藏和显示屏幕标记](http://discgolfsoftware.wordpress.com/2012/12/06/hiding-and-showing-on-screen-markers-with-google-maps-android-api-v2/)

# python - sqlite3 :memory: db 在多个 python 脚本和 sqlite3 性能

> ID：13702384
> 
> 赞同：-1
> 
> 时间：2012-12-04T11:58:16.780
> 
> 标签：python, performance, sqlite, concurrency

我在通过[apsw](http://code.google.com/p/apsw/)连接的多个 python 脚本中使用 sqlite3 :memory: db 。
问题是，运行 :memory: db 的多个程序是否会相互影响，还是 sqlite3 的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:05:50.920

根据 sqlite 自己的文档（[此处](http://www.sqlite.org/inmemorydb.html)），使用创建的每个数据库`:memory:`都不同。因此，如果您使用`:memory:`它们创建两个数据库，它们都彼此不同。

关于`:memory:`性能问题，您可以在这里找到很好的信息：[SQLite Performance Benchmark -- Why is :memory: so slow...only 1.5X as fast as disk?](https://stackoverflow.com/questions/764710/sqlite-performance-benchmark-why-is-memory-so-slow-only-1-5x-as-fast-as-d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:06:47.770

当您一次运行多个程序时，总是会影响性能，因此肯定会对性能产生一些影响。大小取决于你在做什么。同时运行多个复杂的 SQL 查询可能会导致系统资源的显着消耗，但如果您只有足够少的数据可以全部放入内存，那么它可能可以处理您提供的任何查询。

多个连接`:memory:`不共享内存，因此 python 和 sqlite 的多个实例不会通过更改数据而相互影响，如果这就是您要问的

# jquery - WP mobile jquery scrolltodiv 从菜单

> ID：13702386
> 
> 赞同：1
> 
> 时间：2012-12-04T11:58:35.263
> 
> 标签：jquery, wordpress, scrollto, page-jump

我正在开发一个响应式 wordpress 网站，在小屏幕（移动设备）上，当菜单占用大部分屏幕空间时，我想在单击菜单项时滚动到 #content。我试过这些脚本但没有用。

1

```
$("#access a").click(function() {
$("#goto").animate({scrollTop: $("#goto").offset().top});
}); 
```

2

```
$("html, body").animate({ scrollTop: $('#goto').offset().top }, 1000); 
```

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:17:22.717

[不久前我在这里](https://stackoverflow.com/questions/1903574/jquery-scroll-to-anchor-when-calling-url-replace-browsers-behaviour/8733764#8733764)回答了一个类似的问题，效果很好。

根据那个答案，试试这个：

```
$(function() {
var scrollElement = '#content';
var destination = $(scrollElement).offset().top;
$("#access a").click(function() {
    $(scrollElement).offset().top;
    $("html:not(:animated),body:not(:animated)").animate({
        scrollTop: destination-75 }, 800 );
    });
});​ 
```

请注意，可以调整数字 75 以使页面准确滚动到您想要的位置。

# mysql - 表中不同的结果

> ID：13702389
> 
> 赞同：-2
> 
> 时间：2012-12-04T11:58:44.027
> 
> 标签：mysql

我做了一个查询，它输出了我真正想要从内容表中区分出来的结果。这就是我的查询的样子：

```
SELECT distinct c.*
FROM ng2s3_content c
JOIN ng2s3_similar S ON S.similar_id = c.id 
```

所以基本上我希望我通过这个查询得到的结果在 ng2s3_content 结果中隐藏（区分）。ng2s3_content 的查询将是 ->`SELECT * FROM ng2s3_content`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:05:48.423

[NOT IN](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)会做你想做的事，但你必须选择一列。我将`id`在此示例中使用：

```
SELECT *
FROM ng2s3_content
WHERE id NOT IN (
    SELECT id FROM ng2s3_content c JOIN ng2s3_similar S ON S.similar_id = c.id
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:09:59.773

您可以改用左连接并选择没有条目的所有行`ng2s3_similar`

```
SELECT distinct c.*
FROM ng2s3_content c
left JOIN ng2s3_similar S ON S.similar_id = c.id
where s.similar_id is null 
```

请参阅[SQL Fiddle](http://www.sqlfiddle.com/#!2/e2f3e/1/1)进行测试。

# c# - 更改数据网格视图的突出显示颜色

> ID：13702392
> 
> 赞同：0
> 
> 时间：2012-12-04T11:58:50.270
> 
> 标签：c#, .net, datagridview

我们有一个数据网格视图。如果我们选择一个列标题，该列中的所有单元格都将以蓝色突出显示。我们需要将所选列标题的颜色更改为黄色，并防止突出显示列中的其他单元格。

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:51:40.903

// 将 dataGridView 设置为仅处理全列选择。

```
this.dataGridView1.SelectionMode =
DataGridViewSelectionMode.FullColumnSelect;
this.dataGridView1.MultiSelect = false; 
```

// 获取所选列的索引：-

```
var index = this.dataGridView1.SelectedColumns[0].Index; 
```

// 设置前景色和背景色。

```
dataGridView1.Columns[index].DefaultCellStyle.BackColor = Color.Yellow;
dataGridView1.Columns[index].DefaultCellStyle.BackColor = Color.Black; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:11:02.463

看看[这个](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellstyle.aspx)：

尝试这样的事情：

```
dataGridView.DefaultCellStyle.SelectionBackColor = Color.Yellow;
dataGridView.DefaultCellStyle.SelectionForeColor = Color.Black; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:21:41.410

用于更改列标题；

```
dataGridView.ColumnHeadersDefaultCellStyle.BackColor = Color.Yellow; 
```

也尝试将`EnableHeadersVisualStyles`标志设置为`False`. 但我不知道要防止突出显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:28:31.530

此代码可以帮助您

```
private void dataGridView1_ColumnHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
    {
       dataGridView1.Columns[e.ColumnIndex].DefaultCellStyle.BackColor = Color.Aqua;
    } 
```

# c++ - opus_encoder_create() 返回一个空指针

> ID：13702394
> 
> 赞同：2
> 
> 时间：2012-12-04T11:58:54.140
> 
> 标签：c++, c, codec

我在使用 opus-codec 时遇到了一些问题。

opus_encoder_create() 返回一个空指针并抛出一个 OPUS_BAD_ARG 错误

```
OpusEncoder * m_enc;
m_enc = opus_encoder_create(44100, 2, OPUS_APPLICATION_VOIP, &this->m_error); 
```

这就是我用 gdb 得到的：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000001fa4
opus_encode_float (st=0x0, pcm=0x100717e20, frame_size=8, data=0x100840c00 "", out_data_bytes=4000) at opus_encoder.c:581
581     st->rangeFinal = 0;
(gdb) bt
#0  opus_encode_float (st=0x0, pcm=0x100717e20, frame_size=8, data=0x100840c00 "", out_data_bytes=4000) at opus_encoder.c:581
#1  0x0000000100002b1d in Encoder::Encode (this=0x7fff5fbffa70, audioFrame=0x100717e20, frameSize=8) at Encoder.cpp:39
#2  0x000000010000192c in main () at main.cpp:101 
```

任何想法为什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:18:22.750

[文档](https://mf4.xiph.org/jenkins/view/opus/job/opus/ws/doc/html/group__opus__encoder.html#gaa89264fd93c9da70362a0c9b96b9ca88)列出了支持的采样频率：

> 这必须是 8000、12000、16000、24000 或 48000 之一。

请注意，44100 不在列表中；这似乎是“错误论据”错误的绝佳原因。

# json - 是否可以使用 Twitter 搜索 API 来确定搜索关键字是否是人/姓名（流行）？

> ID：13702399
> 
> 赞同：1
> 
> 时间：2012-12-04T11:59:26.667
> 
> 标签：json, api, twitter

我想更改我的搜索 API 上的一些选项，以防搜索的关键字是受欢迎的人甚至是地方。有没有办法使用 JSON GET API 响应来确定这一点。我查看了像 result_type 这样的选项，但似乎没有什么明显的。

我有能力打多次电话来提高我的结果的相关性。这会带来一些可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:28:29.407

让我首先重新表述您的问题：您想确定关键字是否是人。此外，如果那个人很受欢迎，即有很多追随者？或者你的意思是，关键字是一个人，并且经常提到那个人的真实姓名（不是 screen_name）？

除非关键字是 twitter screen_name，否则我认为您不会很幸运地确定关注者的数量。您需要推断名称 -> twitter screen_name。

如果您想确定关键字的受欢迎程度，那么可以肯定的是，您可以使用[https://dev.twitter.com/docs/api/1.1/post/statuses/filter](https://dev.twitter.com/docs/api/1.1/post/statuses/filter)调用来获取特定单词随时间变化的频率. 然后获取一些其他关键字的基线，以确定该频率是否高于/低于您的基线。

或者您可以只使用 infochimps API： http: [//www.infochimps.com/datasets/twitter-word-usage](http://www.infochimps.com/datasets/twitter-word-usage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:22:54.423

Twitter 搜索 API 为开发人员提供了搜索推文和用户的方法。

如果要根据给定的关键字查看相关用户，可以使用 user/search api，查看关键字是否返回任何相关用户。

[https://dev.twitter.com/docs/api/1.1/get/users/search](https://dev.twitter.com/docs/api/1.1/get/users/search)

由于您可以进行多次通话，因此您可以使用 twitter 搜索 api 进行高级搜索。你可以先通过“from”运算符搜索是否有推特用户，如果你检索到任何推文，你就会知道搜索到的关键字是推特用户的用户名。不幸的是，您只能使用用户名进行此类搜索，因此您需要 Twitter 帐户的确切用户名。

> from:twitterapi 发自用户@twitterapi

您可以按照以下页面上的说明为这些地点提供类似的场景：[https ://dev.twitter.com/docs/finding-tweets-about-places](https://dev.twitter.com/docs/finding-tweets-about-places)

# c - 预期，或；如果之前

> ID：13702400
> 
> 赞同：8
> 
> 时间：2012-12-04T11:59:31.860
> 
> 标签：c, gcc

我犯了一个愚蠢的错误（忘记了分号，最近 Python 太多了），但从 gcc 收到了一条有趣的错误消息：“expected ',' or ';' 在‘如果’之前”。

我知道这些错误消息只是为可能的源代码提供了一个“上限”，但我想知道 C 中是否有任何构造使得“if”标记真的出现在 ',' 之后而不是 ';' 之后。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:05:29.267

After 不一定是*紧随其后*。错误信息更多：'我刚刚打了一个'if'构造。在这一点上，我期待（上一个）语句的结束，或者列表中的下一个项目。其中一件事必须在这个'如果'之前，所以我让你知道'

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T12:10:39.767

> 我想知道C中是否有任何构造使得“if”标记真的出现在'，'之后而不是';'之后。

根据[C BNF 语法](http://www.cs.man.ac.uk/~pjj/bnf/c_syntax.bnf)，an`if`总是*在*语句的开头。所以不，它不能以`,`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:16:35.323

不，没有逗号可以出现在`if`语句之前的情况。所以这一定是 gcc 中的编译器错字/错误。

我猜 gcc 解析器正在寻找if 语句之前的*[序列点。](https://stackoverflow.com/questions/3575350/sequence-points-in-c)*分号处有一个序列点，但也有一个在表达式中使用逗号运算符的地方。因此，不知何故，整个语句和表达式中错误的错误打印似乎是相同的。

# android - Android WebView 仅在单击/滚动后显示内容

> ID：13702404
> 
> 赞同：2
> 
> 时间：2012-12-04T11:59:48.603
> 
> 标签：android, android-webview

我正在编写一个包含 webview 的 Android 应用程序，它加载一个包含相当大表单的页面。我在加载表单的过程中显示了一个进度条。当进度条消失时，我经常只看到一个空白页面或表单的一些元素（比如几个复选框，没有文本）。在我尝试滚动页面（单击）后，一切都会显示出来。知道这里有什么问题吗？

webview的设置是：

```
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setDatabaseEnabled(true);
mWebView.getSettings().setDomStorageEnabled(true);
mWebView.getSettings().setAppCacheMaxSize(1024*1024*128);
mWebView.getSettings().setAppCachePath(getActivity().getApplicationContext().getCacheDir().getAbsolutePath());
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setAppCacheEnabled(true);
mWebView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
mWebView.setWebChromeClient(new WebChromeClient() {
       @Override
       public void onExceededDatabaseQuota(String url,
                            String databaseIdentifier,
                            long currentQuota,
                            long estimatedSize,
                            long totalUsedQuota,
                            WebStorage.QuotaUpdater quotaUpdater)
       {
           quotaUpdater.updateQuota(estimatedSize * 2);
       }
    });
mWebView.addJavascriptInterface(new WebFormJavascriptInterface(), "jsinterface");
mWebView.getSettings().setRenderPriority(RenderPriority.HIGH);
mWebView.getSettings().setPluginState(android.webkit.WebSettings.PluginState.ON_DEMAND); 
```

布局文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:hardwareAccelerated="false"
    android:persistentDrawingCache="all"
/>
<ProgressBar
    android:id="@+id/progressbar"
    style="@android:style/Widget.Holo.ProgressBar.Large"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:indeterminate="true"
    android:visibility="gone"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T20:21:50.473

我有一个不同的问题，但遇到了这个。正在做

```
webview.postInvalidateDelayed(1500); 
```

在声明中的 1.5 秒后，`onPageFinished()`几乎有助于`WebView`刷新本身`new WebViewClient(){}`。不过，可能有比这个更好的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T11:00:14.303

你覆盖 WebViewClient 吗？覆盖 WebViewClient 的 onPageStarted() 和 onPageFinished() 方法时，我遇到了同样的问题，删除了 super.onPageStarted() 和 super.onPageFinished()。WebView 首先加载空白页面并在我触摸屏幕时显示内容。super (super.onPageStarted(), super.onPageFinished()) 的返回调用方法解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-20T07:51:42.940

我有一个类似的问题。`mWebView.requestFocusFromTouch()`当我想在 webview 中查看新内容时调用解决了我的问题。

# sublimetext2 - 在 sublimetext2 中编写 html 时创建文件（从范围创建文件）

> ID：13702405
> 
> 赞同：1
> 
> 时间：2012-12-04T11:59:53.827
> 
> 标签：sublimetext2, sublimetext

在观看 angular.js 如何录制视频时，我注意到了一个有用的功能：

[http://www.youtube.com/watch?feature=player_embedded&v=WuiHuZq_cg4#t=56s](http://www.youtube.com/watch?feature=player_embedded&v=WuiHuZq_cg4#t=56s)

该功能是根据您在 html/css 代码中编写的内容创建文件（文件名 + 文件扩展名）。

这可能与崇高的 text2 吗？如果是这样，我可以使用这样的插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:11:33.577

我观看了操作视频，确实发现此功能很有用。受此启发，我创建了一个模拟这种行为的插件：

[https://github.com/gregsadetsky/NewFileFromScope](https://github.com/gregsadetsky/NewFileFromScope)

（安装说明出现在插件描述文本中，靠近底部）

* * *

很快，这个插件向命令面板添加了一个“从范围新建文件”命令，它将伪智能地尝试从当前范围中提取文件名，并创建一个相应命名的新文件。

例如，如果您有以下行：

`<link href="app.css" rel="stylesheet">`

将光标放在*app.css*文本中的任意位置（或选择它）并调用该命令将创建一个名为“app.css”的新空文件。

享受！

# c++ - pThread 中的 curl 请求在请求完成后崩溃

> ID：13702408
> 
> 赞同：0
> 
> 时间：2012-12-04T12:00:04.713
> 
> 标签：c++, curl, cocos2d-x

我在使用 curl 和 pthread 时遇到了有线问题。[我在给定的URL](http://curl.haxx.se/libcurl/c/multithread.html)引用了官方代码。如果我添加`CURLOPT_TIMEOUT`或，代码会崩溃`CURLOPT_CONNECTTIMEOUT`。还有一个有趣的事情是，当我的响应完全完成时，会发生这种崩溃。:(。我想知道是否有人经历过这个。下面是我从场景运行的代码`cocos2dX`。

- 确保代码运行，等待 30 秒完成，应用程序会崩溃。但是，如果排除超时选项，则不会发生此崩溃。下面是导致问题的代码片段。

```
static void *pull_one_url(void *url)
{
    CURL *curl;

    curl = curl_easy_init();

    //curl_easy_setopt(curl, CURLOPT_TIMEOUT, 30); // will crash if enabled  just wait for 30 second to pass away
    //curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT, 30); // will crash if enabled  just wait for 30 second to pass away

    curl_easy_setopt(curl, CURLOPT_URL, url);
    curl_easy_perform(curl); /* ignores error */
    curl_easy_cleanup(curl);

    return NULL;
}

void mainTest()
{
    pthread_t tid[NUMT];
    int i;
    int error;

    /* Must initialize libcurl before any threads are started */
    curl_global_init(CURL_GLOBAL_ALL);

    std::cout<<"go go ";

    for(i=0; i< NUMT; i++)
    {
        error = pthread_create(&tid[i],
                               NULL, /* default attributes please */
                               pull_one_url,
                               (void *)urls[i]);
        if(0 != error)
            fprintf(stderr, "Couldn't run thread number %d, errno %d\n", i, error);
        else
            fprintf(stderr, "Thread %d, gets %s\n", i, urls[i]);
    }

    std::cout<<"come come ";
    /* now wait for all threads to terminate */
    for(i=0; i< NUMT; i++) {
        error = pthread_join(tid[i], NULL);
        fprintf(stderr, "Thread %d terminated\n", i);
    }

} 
```

[http://curl.haxx.se/libcurl/c/multithread.html](http://curl.haxx.se/libcurl/c/multithread.html)[卷曲网站参考](http://curl.haxx.se/libcurl/c/multithread.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T03:03:10.167

尝试 CURLOPT_NOSIGNAL 应该可以解决问题

# c# - CollectionView Current 改成什么？

> ID：13702410
> 
> 赞同：3
> 
> 时间：2012-12-04T12:00:28.780
> 
> 标签：c#, wpf, collectionview

在 WPF 中使用 CollectionView 并侦听 CurrentChanging 时，如果正在选择的项目不是要选择的有效项目，我想取消更改。问题是我无法找出 CollectionView 正在更改的项目。如果我不知道这一点，我无法验证该项目是否可选择。如何使用 CollectionView 完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:56:12.173

也许您应该阻止选择任何无效项目。我会使用[IDataErrorInfo 接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)并绑定到[IsEnabled Property](http://msdn.microsoft.com/en-us/library/system.windows.uielement.isenabled.aspx)。

# yii - Yii 使用标准

> ID：13702411
> 
> 赞同：2
> 
> 时间：2012-12-04T12:00:33.203
> 
> 标签：yii, criteria

我有两张桌子`order`和`order_version`

```
order

|  id |
|  1  |
|  2  |

order_version
| id | order_id | status |
| 1  |     1    |    0   |
| 2  |     2    |    0   |
| 3  |     1    |    1   |
| 4  |     1    |    2   | 
```

我想查找所有已更改版本的订单。这意味着我只想获得订单`id='1'`，因为另一个没有更改并且只有一个版本。
试过这个：

```
1)   $criteria = new CDbCriteria();
2)   $criteria->with = array('orderVersions');
3)   $criteria->addCondition("(SELECT MAX(status)  FROM order_version) != '0'");
4)   $criteria->addInCondition('order.id', $orderArray);        
5)   $criteria->order = 'order.id DESC';
6)   $orders = Order::model()->findAll($criteria); 
```

`$orderArray`变量是`order` `id`s 的数组。

首先问题出在第四行。

```
Column not found: 1054 Unknown column 'order.id' in 'where clause' 
```

如果我这样做`id`而不是`order.id`那么我有

```
Integrity constraint violation: 1052 Column 'id' in where clause is ambiguous. 
```

第 5 行也有同样的问题。
另：我真的不知道如何在yii中使用子查询，这是第3行。
有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:41:21.407

而不是`order.id`尝试`t.id`。

这是因为当您使用该`$criteria->with`选项时，您将该表连接到查询中，因此将有两个`id`字段，一个在`order`表中，一个在`order_version`表中。

Yii 通常会给你正在查询的主表（`order`在这种情况下）一个别名，`t`我认为通常会给由关系连接的任何表一个它们的关系名称的别名。

如果您想获得 yii 使用的实际别名，您可以使用[getTableAlias](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getTableAlias-detail)。但是我认为您在`findAll()`静态调用时不能在您的情况下使用它。如果你在模型上下文中使用它，你可以这样称呼它：

```
$alias = $this->getTableAlias(); 
```

或者像这样，如果您在默认范围或其他地方使用，您不想运行额外的检查或引用别名；

```
$alias = $this->getTableAlias(false,false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:28:19.297

从您的文字中，我得出结论，您想要获得所有状态不等于 0（或大于零）的订单？尝试这个：

```
$criteria = new CDbCriteria(array(
  'together' => TRUE,
  'with' => array('orderVersions' => array(
  'having' => 'MAX(`orderVersions`.`status`) > 0'
)),
'order' => '`t`.`id` DESC'
));
$criteria->addInCondition('`t`.`id`',$orderArray); 
```

如果您只想要具有最高版本但状态高于 0 的分组订单：

```
$criteria = new CDbCriteria(array(
  'together' => TRUE,
  'with' => array('orderVersions' => array(
  'having' => 'MAX(`orderVersions`.`status`) > 0'
)),
'order' => 'MAX(`t`.`id`) DESC',
'group' => '`t`.`id`'
));
$criteria->addInCondition('`t`.`id`',$orderArray); 
```

# sql-server - SQL Server 数据库大小

> ID：13702414
> 
> 赞同：0
> 
> 时间：2012-12-04T12:00:44.147
> 
> 标签：sql-server, database, size

从 C# 我运行 SQL 查询`EXEC sp_spaceused`来查找数据库使用的空间。

我只得到数据库及其日志文件的空间。但我还需要 FileStream 大小。

我怎样才能获得文件流大小？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:09:49.803

检查这个：[Sql Server FILESTREAM Total File Size](https://stackoverflow.com/questions/5086603/sql-server-filestream-total-file-size)

```
SELECT SUM(DATALENGTH(filestreamcolumn)) FROM filestreamtable; 
```

# c# - MimeType 始终是 application/octet-stream

> ID：13702416
> 
> 赞同：0
> 
> 时间：2012-12-04T12:00:58.837
> 
> 标签：c#, asp.net, flash, mime-types, uploadify

我有一个问题，在我的 ashx.cs 处理程序中，`application/octet-stream`即使我上传图像，我也总是得到一个内容类型。

我使用 uploadify 进行上传，首先我使用的是 uploadify `v2.1.0`。我已经升级到 uploadify `3.1`。无论如何，我`application/octet-stream`使用任一版本作为 ContentType 接收。

我读到这可能是 Flash 播放器的问题，所以我使用[他们的卸载](http://helpx.adobe.com/flash-player/kb/uninstall-flash-player-windows.html)程序卸载了 Flash，并尝试了 Flash Player `10.1.102.64`，`11_1r102_55_64bit`并尝试再次重新安装最新版本。所有三个版本都没有更改内容类型。

我使用了 Internet Explorer 8 和 9，没有任何改变。还有 Windows Server 2008 R2 64bit 和 Windows 7 64bit。

我的`.ashx`处理程序：

```
namespace HttpHandlers
{
    public class UploadsHandler
        : IHttpHandler
    {
        /// <summary>
        /// Enables processing of HTTP Web requests by a custom HttpHandler that implements the <see cref="T:System.Web.IHttpHandler" /> interface.
        /// </summary>
        public void ProcessRequest(HttpContext context)
        {
            try
            {
                HttpPostedFile file = context.Request.Files["Filedata"];
                string mimeType = file.ContentType; // always application/octet-stream

                context.Response.ContentType = "text/plain";
                context.Response.Write("success");
            }
            catch (Exception ex)
            {
                context.Response.ContentType = "text/plain";
                context.Response.Write(ex.Message);
            }
        }

        /// <summary>
        /// Gets a value indicating whether another request can use the <see cref="T:System.Web.IHttpHandler" /> instance.
        /// </summary>
        /// <returns>true if the <see cref="T:System.Web.IHttpHandler" /> instance is reusable; otherwise, false.</returns>
        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

在这一点上我没有想法......这在以前一直有效，直到*发生了一些*变化，现在我正试图弄清楚......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:53:34.743

好吧，这根本不是 asp.net 问题。

mime 类型是浏览器发送的 HTTP 协议序列的一部分，他有责任确定它。

有些很烂，有些还可以，有时。

查看

[http://blog.futtta.be/2009/08/24/http-upload-mime-type-hell/](http://blog.futtta.be/2009/08/24/http-upload-mime-type-hell/)

用于分析哪些 mime 类型会为 cs 上传而传输。颇有启迪。

如果您需要识别文件是什么，则必须在服务器端进行，假设文件扩展名正确和/或解析文件。我记得 10 年前我们写一个 CMS 时，我们实际上将所有上传到内存中的图像加载到内存中以确保它们是有效的。您不能依赖 mime 类型是正确的。但是你确实得到了一个文件名，它可以用来找到“正确的”mime 类型，除非文件的扩展名错误。

# ruby-on-rails - PostgreSQL gem pg 无法安装

> ID：13702417
> 
> 赞同：30
> 
> 时间：2012-12-04T12:00:59.567
> 
> 标签：ruby-on-rails, ruby

我的数据库是 PostgreSQL。我在 CENTOS.... 安装 pg gem 时收到以下错误。我也重新安装以清除我的 YAML 问题，但这没有用，但这只是一个警告。我的主要问题是 pg gem 的安装：

```
[root@vdimc04 ~]# gem install pg
/usr/local/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /usr/local/bin/ruby extconf.rb
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config

Gem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/pg-0.14.1 for inspection.
Results logged to /usr/local/lib/ruby/gems/1.9.1/gems/pg-0.14.1/ext/gem_make.out 
```

我也尝试使用以下命令，但没有用：

```
 gem install pg -- --with-pg-config=/usr/pgsql-9.1/bin/pg_config 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-05T05:31:12.307

我在 Centos 上遇到了同样的错误。通过谷歌搜索，我发现了两个要使用的命令：

1.  `yum install postgresql-libs`- 它给我消息说，它已经安装了。
2.  `yum install postgresql-devel`- 它解决了我与`pg_config`安装“pg”.gem 相关的错误。

希望能帮助到你 ：）

apos 写道： 在 Ubuntu 14.04 上安装：

1.  `apt-get install postgresql-server-dev-9.3 libpq-dev`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-05T08:20:51.540

这是我在 CentOS 上启动并运行 PostgreSQL、RVM、Ruby、Rails 的秘诀

# PostgreSQL

首先，按照[http://wiki.postgresql.org/wiki/YUM_Installation](http://wiki.postgresql.org/wiki/YUM_Installation)上的说明安装 PostgreSQL：

`sudo vi /etc/yum.repos.d/CentOS-Base.repo`

```
[base]
exclude=postgresql*

[updates]
exclude=postgresql* 
```

获取最新的 PGDG RPM 文件（适用于您的平台/架构），例如：

```
curl -O http://yum.postgresql.org/9.2/redhat/rhel-latest-x86_64/pgdg-redhat92-9.2-7.noarch.rpm 
```

然后

```
sudo rpm -ivh pgdg-redhat92-9.2-7.noarch.rpm
sudo yum install -y postgresql92-server postgresql92-devel 
```

初始化数据库：

```
sudo service postgresql-9.2 initdb 
```

配置`/var/lib/pgsql/9.2/data/postgresql.conf`和`/var/lib/pgsql/9.2/data/pg_hba.conf`根据需要。

启动 PostgreSQL 服务器：

```
sudo service postgresql-9.2 start 
```

# 虚拟机

```
sudo yum -y groupinstall "Development Tools"
sudo yum -y install zlib zlib-devel sqlite-devel httpd curl-devel httpd-devel apr-devel apr-util-devel mlocate man libxml2-devel libxslt-devel libffi-devel readline-devel 
```

注意，*不是*root：

```
\curl -L get.rvm.io | sudo bash -s stable 
```

注销并重新打开。之后，`which rvm`应回复`/usr/local/rvm/bin/rvm`和`type rvm|head -1`应说`rvm is a function`。

# Ruby + Rails

```
rvm install 1.9.3 --with-openssl-dir=/usr
rvm use 1.9.3 --default
gem install rake
gem install rails 
```

# PostgreSQL 宝石

```
gem install pg -- --with-pg-config=/usr/pgsql-9.2/bin/pg_config 
```

`--with-pg-config`我最新安装的 CentOS 不知何故需要它，否则，`gem install pg`找不到`pg_config`. YMMV，但是如果您按照以上所有内容（在过去几个月中我已经完成了足够多的时间），请告诉我是否有任何绊倒您的地方。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-04T12:05:04.730

尝试通过执行以下操作安装 libpq 包：

```
sudo apt-get install libpq-dev 
```

该软件包对 pg gem 有帮助，之后您应该会没事的 :)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-30T17:20:16.017

试试这个，答案不是我的，但它对我有用。请记住指出您的 Postgres.app 应用程序所在的位置：

```
bundle config build.pg --with-pg-config=/Applications/Postgres.app/Contents/MacOS/bin/pg_config 
```

然后做

```
bundle update
bundle install 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-04T12:08:36.017

```
$ sudo apt-get install libpq-dev
$ sudo apt-get install libdbd-pg-ruby1.8 
```

then:

```
$ sudo apt-get install pg 
```

for CentOS please read the below link..

[http://wiki.postgresql.org/wiki/YUM_Installation](http://wiki.postgresql.org/wiki/YUM_Installation)

To install pg in centOS

```
run this commands

bundle config build.pg 

gem install pg -v '0.12.0' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T12:50:01.023

尝试安装 postgresql 服务器和相应的库。然后安装 pg gem。然后它会为你工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-08T07:55:08.920

我的问题是在已经安装 pg gem 之前.. 但它没有加载到捆绑包中.. 现在的解决方案是：当我们声明一个新的应用程序时，比如'rails new Demo'，我们必须包括

'--数据库=postgresql'。所以现在总命令是：'rails new Demo --database=postgresql'

然后 pg gem 文件将被捆绑..

在捆绑包中，只有一个 gem 会被存储。pg gem 或 sqlite3 gem ..

现在相应地编辑 database.yml 文件..就是这样

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-30T08:30:12.020

我遇到了同样的问题，我尝试安装所有依赖项，但一切都没用。最后，我尝试使用PostgreSQL9.3，而不是PostgreSQL9.4，一切都很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-20T23:31:08.507

使用 AWS Cloud 9 Linux：

`sudo yum install postgresql-libs`

然后：

`sudo yum install postgresql-devel`

然后：

`gem update --system`

如果需要，那么：

`gem install bundler`（捆绑器 2.0）

然后：

`bundle install`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-12-04T12:06:06.380

首次安装

```
sudo apt-get install postgresql postgresql-server-dev-9.1 
```

下次安装

```
sudo apt-get install libpq-dev 
```

然后安装`gem install pg`

# c++ - 使用 gcc 在 C++ 中将静态类型转换为字符串

> ID：13702421
> 
> 赞同：3
> 
> 时间：2012-12-04T12:01:10.603
> 
> 标签：c++, gcc, typeof

这与是否可以在标准 C++ 中打印变量的类型是同一个问题[？](https://stackoverflow.com/questions/81870/print-variable-type-in-c)但我不想要 RTTI。我正在使用表达式模板（例如 Eigen）编写代码，这意味着我的变量的类型可以真正涉及到，而我不知道实际的类型。但是，编译器知道类型并且可以在出现问题时告诉我：

```
error: ‘const struct Eigen::EigenBase<Eigen::Matrix<double, 1, 1, 0, 1, 1> >’ ... 
```

有什么方法可以将变量名称转换为具有（静态）类型名称的字符串，以便在不破坏程序的情况下调试程序？例如

```
int a;
M b;
cout << TYPEOF(a) << endl << TYPEOF(b) << endl; 
```

会打印

```
int
const struct Eigen::EigenBase<Eigen::Matrix<double, 1, 1, 0, 1, 1> >’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:43:07.720

`typeid`可以应用于一个类型（5.2.8p4）：

```
std::cout << typeid(int).name() << '\n'
  << typeid(M).name() << '\n'; 
```

这不涉及任何运行时开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T18:06:19.023

std::cout << typeid(int).name() << '\n' << typeid(M).name() << '\n';

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:30:59.837

[我将https://stackoverflow.com/a/13703184/1693829](https://stackoverflow.com/a/13703184/1693829)标记为答案，谢谢！这是我写的一个包装器：

```
#include <cxxabi.h>
#include <string>

template <typename T>
std::string t2s(T tt) {
  char *name;
  int status;
  name = abi::__cxa_demangle(typeid(tt).name(), 0, 0, &status);
  std::string namestring(name);
  free(name);
  return namestring;
} 
```

# bash - 在 sh shell 中找不到源命令

> ID：13702425
> 
> 赞同：218
> 
> 时间：2012-12-04T12:01:43.300
> 
> 标签：bash, shell, sh

我有一个使用`sh`shell 的脚本。我在使用该`source`命令的行中出现错误。它似乎`source`不包含在我的`sh`外壳中。

如果我明确尝试`source`从 shell 运行，我会得到：

```
sh: 1: source: not found 
```

我应该以某种方式安装“源”吗？我有错误的版本`sh`吗？

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2012-12-04T12:26:30.743

`/bin/sh`通常是其他一些试图模仿 The Shell 的 shell。许多发行版都使用`/bin/bash`for `sh`，它支持`source`. 但是，在 Ubuntu 上，`/bin/dash`使用的是不支持`source`. 大多数 shell 使用`.`而不是`source`. 如果您无法编辑脚本，请尝试更改运行它的 shell。

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2012-12-04T12:03:55.643

在 Bourne shell(sh) 中，使用 . 获取文件的命令

```
. filename 
```

在某些操作系统/环境（至少 Mac OS、Travis-CI、Ubuntu）中，这必须是：

```
. ./filename 
```

（[归功于 Adrien Joly 下面的评论](https://stackoverflow.com/questions/13702425/source-command-not-found-in-sh-shell/13702876#comment78470475_13702462)）

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2014-01-07T06:16:01.100

```
$ls -l `which sh`
/bin/sh -> dash

$sudo dpkg-reconfigure dash #Select "no" when you're asked
[...]

$ls -l `which sh`
/bin/sh -> bash 
```

然后就OK了

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2017-07-13T19:38:09.703

`source`内置是一个bashism 。把它简单地写成这样`.`。

**例如**

```
. $FILE

# OR you may need to use a relative path (such as in an `npm` script):

. ./$FILE 
```

> [https://wiki.ubuntu.com/DashAsBinSh#source](https://wiki.ubuntu.com/DashAsBinSh#source)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-01-25T09:06:02.997

发生此问题是因为 jenkins Execute Shell 通过其 /bin/sh 运行脚本

因此，/bin/sh 不知道“来源”

您只需要在 jenkins 的 Execute Shell 顶部添加以下行

```
#!/bin/bash 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-03-27T17:04:31.470

我在尝试从 #Jenkins 执行 shell调用**源命令时遇到了这个错误。**

`source profile.txt` 或者 `source profile.properties`

替换**源**命令是使用，

`. ./profile.txt` 或者 `. ./profile.properties`

**注意：**两个点之间有一个空格（.）

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-12-04T12:04:58.333

该`source`命令内置在某些 shell 中。如果您有脚本，则应在第一行指定要使用的 shell，例如：

```
#!/bin/bash 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-07T18:28:21.120

我在 Ubuntu 上的 gnu Makefile 中找到了（其中 /bin/sh -> bash）

我需要使用 . 命令，以及使用 ./ 前缀指定目标脚本（参见下面的示例）

source 在这种情况下不起作用，不知道为什么，因为它应该调用 /bin/bash..

我的 SHELL 环境变量也设置为 /bin/bash

```
test:
    $(shell . ./my_script) 
```

请注意，此示例不包含制表符；必须为堆栈交换格式化。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-15T08:42:53.533

**source**是 bash 内置命令，因此要执行 source 命令，您可以以 Root 身份登录。

`sudo -s source ./filename.sh`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-01-11T03:55:22.100

在 Ubuntu 上，我没有使用 sh scriptname.sh 来运行文件，而是使用 . scriptname.sh 并且成功了！我的文件的第一行包含： `#!/bin/bash`

使用此命令运行脚本

```
.name_of_script.sh 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2016-11-11T22:10:25.300

这可能会对您有所帮助，我收到此错误是因为我试图`.profile`用命令重新加载我的`. .profile`并且它有一个语法错误

* * *

## 回答 #12

> 赞同：-8
> 
> 时间：2014-10-08T08:25:50.457

Bourne shell (sh) 使用 PATH 定位到`source <file>`. 如果您尝试获取的文件不在您的路径中，则会收到错误“找不到文件”。

尝试：

```
source ./<filename> 
```

# java - 如何列出自己的向量元素？

> ID：13702429
> 
> 赞同：1
> 
> 时间：2012-12-04T12:01:52.767
> 
> 标签：java, vector, imagej

我有一个自己的vector.class 和一个polygon.class Vector.class

```
package org.onvif.ver10.schema;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)

@XmlType(name = "Vector")

public class Vector {

    @XmlAttribute(name = "x")
    protected Float x;
    @XmlAttribute(name = "y")
    protected Float y;

    /**
     * Gets the value of the x property.
     * 
     * @return
     *     possible object is
     *     {@link Float }
     *     
     */
    public Float getX() {
        return x;
    }

    /**
     * Sets the value of the x property.
     * 
     * @param value
     *     allowed object is
     *     {@link Float }
     *     
     */
    public void setX(Float value) {
        this.x = value;
    }

    /**
     * Gets the value of the y property.
     * 
     * @return
     *     possible object is
     *     {@link Float }
     *     
     */
    public Float getY() {
        return y;
    }

    /**
     * Sets the value of the y property.
     * 
     * @param value
     *     allowed object is
     *     {@link Float }
     *     
     */
    public void setY(Float value) {
        this.y = value;
    }
    } 
```

和多边形类

```
public class Polygon {

@XmlElement(name = "Point", required = true)
protected List<Vector> point;

/**
 * Gets the value of the point property.
 * 
 * <p>
 * This accessor method returns a reference to the live list,
 * not a snapshot. Therefore any modification you make to the
 * returned list will be present inside the JAXB object.
 * This is why there is not a <CODE>set</CODE> method for the point property.
 * 
 * <p>
 * For example, to add a new item, do as follows:
 * <pre>
 *    getPoint().add(newItem);
 * </pre>
 * 
 * 
 * <p>
 * Objects of the following type(s) are allowed in the list
 * {@link Vector }
 * 
 * 
 */
public List<Vector> getPoint() {
    if (point == null) {
        point = new ArrayList<Vector>();
    }
    return this.point;
}

} 
```

所以，我给出向量元素：

```
org.onvif.ver10.schema.Vector MyVector = new Vector(); // létrehozzuk az
                                                                // onvif féle
                                                                // vector-t
        org.onvif.ver10.schema.Polygon op = new org.onvif.ver10.schema.Polygon();

        for (int i = 1; i <= p.npoints; i++) {
//          IJ.log("X: "+ i);
//          MyVector.setX((float) p.xpoints[i]); // hozzáadjuk az elemet
//          MyVector.setY((float) p.ypoints[i]);

            MyVector.setX((float)p.xpoints[i-1]);
            op.getPoint().add(MyVector);
            IJ.log("Vector X Elements "+i+" :"+ MyVector.getX());

        }
        IJ.log("Op size " + op.getPoint().size()); 
```

我的问题是如何获得 op（onvif 多边形）元素？因为无论我如何尝试，我都只得到了最后一个元素 10 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:08:45.850

您的错误是您将相同的`Vector`实例添加到多边形 10 次，并一遍又一遍地设置该实例上的点。

您的代码应更改为在循环*内*`new Vector()`移动该行：

 *```
 org.onvif.ver10.schema.Polygon op = new org.onvif.ver10.schema.Polygon();

    for (int i = 1; i <= p.npoints; i++) {
        org.onvif.ver10.schema.Vector MyVector = new Vector(); 
        MyVector.setX((float)p.xpoints[i-1]);
        op.getPoint().add(MyVector);
        IJ.log("Vector X Elements "+i+" :"+ MyVector.getX());

    } 
```

您的代码的样式问题包括但不限于：

*   变量名应该以小写字母开头，所以`myVector`不要`MyVector`
*   永远不要创建与 JDK 类同义的类名（如`Vector`）*

# php - 错误消息 Joomla 网站中的严格标准

> ID：13702433
> 
> 赞同：1
> 
> 时间：2012-12-04T12:02:01.143
> 
> 标签：php, joomla2.5

Joomla 网站网址： http: [//gero-teufert.de/impro_for_biz3/index.php](http://gero-teufert.de/impro_for_biz3/index.php)

自从我们更新了 PHP 版本以来，我们在这个 Joomla 网站上遇到了几个错误。

错误如：

> 严格标准：非静态方法 JApplication::getMenu() 不应在第 540 行的 /var/www/l3s8433/html/impro_for_biz3/includes/application.php 中静态调用

我们已经通过编辑 php.ini 文件和 Joomla 配置文件解决了本地机器上的错误，但由于我们无法访问服务器上的这个文件，所以我们无法做到。

无论如何我们可以通过编辑 Joomla 文件来解决这些错误，因为我们能够解决一些错误并且仍然很少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:10:59.673

您收到此错误是因为您的错误报告**在**您的`configuration.php`. 要修复，请转到“全局配置”并 `/server/ Error reporting/`设置为**none**。这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:10:09.360

如果您的托管服务使用 FastCGI，您必须在 FTP 帐户的某个位置拥有自己的副本`php.ini`（可能名称稍有不同）。或者，您应该能够使用[.user.ini](http://php.net/manual/en/configuration.file.per-user.php)文件配置 PHP。

如果它将 PHP 作为 Apache 模块运行，则可以使用`.htaccess`. 语法不同并且您不能使用以下常量是毫无价值的`E_ALL`：

```
php_value error_reporting -1 
```

如果它使用另一个 SAPI，请提供适当的信息。

*顺便说一句，您实际上并没有解决错误。您只是在隐藏它们；-)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T08:11:02.430

打开joomla 主目录中的**configuration.php**。设置`$error_reporting`为`'6135'`。

对我来说是第 23 行，编辑后它看起来像这样：

```
public $error_reporting = '6135'; 
```

# c# - transform.lookat 问题（C# Unity3D）

> ID：13702435
> 
> 赞同：2
> 
> 时间：2012-12-04T12:02:04.810
> 
> 标签：c#, unity3d

我一直在研究如何让一个物体像另一个物体上的轨道一样旋转。

```
if (Spin == true)  
{  
  transform.LookAt(ParentOrb.transform);  
  transform.Rotate(90,0,0);  
  transform.Translate(transform.forward*Time.deltaTime*5,Space.World);   
} 
```

但是，一旦应该围绕另一个对象运行的对象，当它达到 0 的世界 y 值（正下方/正上方）时，它就会开始疯狂地旋转。

我确实将lookat 的第二个参数更改为vector.3.up、transform.up 和vector3.zero。

当我有 vector3.up 时，旋转也是同样的问题。
当我使用 transform.up 时，它开始自转。
当我有vector3.zero时，它确实开始围绕自己旋转，但它与实际的球体无关，而是它自己的轨道。

我希望能够让它在一个完整的周期中绕着 parentorb 运行。

感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:30:39.497

恭喜，您可能刚刚遇到[云台锁](http://en.wikipedia.org/wiki/Gimbal_lock)！

Unity3D 框架的光荣之处在于，您的解决方案通常有一个现有的方法。在这种情况下，有[Transform.RotateAround](http://docs.unity3d.com/Documentation/ScriptReference/Transform.RotateAround.html)。

此代码的功能应该更接近您最初的预期：

`transform.RotateAround(ParentOrb.transform.position, Vector3.back, 40f * Time.deltaTime);`

其中 40f 是每秒的任意预期旋转速度（以度为单位）。

# java - JAVA RMI，定义离线方法，所以当方法调用时不会去服务器

> ID：13702441
> 
> 赞同：1
> 
> 时间：2012-12-04T12:02:35.200
> 
> 标签：java, rmi, remoteobject

我已经在很多地方搜索了解决方案，但我找不到。

我的问题是如何定义一个离线方法，所以在我从 RMI 服务器获取对象后，我将能够调用此方法，它不会从服务器获取数据，而是从客户端中的对象获取数据。

更具体地说，可以说我有带有 2 个方法和一个私有变量的 Database 类。方法1：返回变量的值（属性方法..） - 应该是离线方法，因为我已经在客户端的对象中有变量。方法2：向数据库中插入新数据（sql命令..）。- 应该是在线方法，以便服务器可以连接到数据库。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:09:46.040

如果您需要此功能，我建议您改用 JMS 消息传递，因为这可以让您更有效地管理异步消息。它还支持可选持久化的队列和主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:54:30.180

你不能那样做。您将需要调整您的设计。令人高兴的是，我认为您不需要对设计进行太多调整。

关键是能够决定每个对象是远程对象还是本地对象。对远程对象的调用将转到服务器，而对本地对象的调用将保持在本地。如果您有一个想要同时成为两者的对象，则需要将其一分为二，因此您有一个本地部分和一个远程部分。为了为客户端维护一个方便的界面，您可以将远程对象隐藏在本地对象后面。

这是您如何执行此操作的草图：

```
public interface RemoteDatabase extends Remote {
    public void insertData(String data) throws RemoteException;
}

public class RemoteDatabaseImpl implements RemoteDatabase {
    @Override
    public void insertData(String data) throws RemoteException {
        // whatever
    }
}

public class Database implements Serializable {
    private final RemoteDatabase remote;
    private final String property;

    public Database(RemoteDatabase remote, String property) {
        this.remote = remote;
        this.property = property;
    }

    public String getProperty() {
        return property;
    }

    public void insertData(String data) throws RemoteException {
        remote.insertData(data);
    }
} 
```

请注意，当您`Database`在服务器上创建实例时，您需要给它一个实现的[存根](http://docs.oracle.com/javase/6/docs/api/javax/rmi/PortableRemoteObject.html#toStub%28java.rmi.Remote%29)`RemoteDatabaseImpl`，而不是真实的东西（我认为）。

您甚至可以使它们实现相同的接口，以加强对象之间的关系。像这样的东西：

```
public interface RemoteDatabase extends Remote {
    public String getProperty() throws RemoteException;
    public void insertData(String data) throws RemoteException;
}

public class RemoteDatabaseImpl implements RemoteDatabase {
    @Override
    public void insertData(String data) throws RemoteException {
        // whatever
    }

    @Override
    public String getProperty() {
        return "whatever";
    }

    public Database toLocal() throws NoSuchObjectException {
        return new Database((RemoteDatabase) PortableRemoteObject.toStub(this), getProperty());
    }
}

public class Database implements RemoteDatabase, Serializable {
    private final RemoteDatabase remote;
    private final String property;

    public Database(RemoteDatabase remote, String property) {
        this.remote = remote;
        this.property = property;
    }

    @Override
    public String getProperty() {
        return property;
    }

    @Override
    public void insertData(String data) throws RemoteException {
        remote.insertData(data);
    }
} 
```

# facebook - 如何获取安全封面 URL？

> ID：13702442
> 
> 赞同：1
> 
> 时间：2012-12-04T12:02:41.440
> 
> 标签：facebook, facebook-graph-api, ssl, https, cover

我正在尝试使用以下方法获取 FBpage 的封面网址：

```
$fql_query_url = "https://graph.facebook.com"
    ."/$fb_id[id]?fields=cover"
."";
try {
    $fql_query_result = @file_get_contents($fql_query_url);
    $fql_query_obj = json_decode($fql_query_result, true);
} catch(Exception $o){   }
$cover = $fql_query_obj[cover][source]; 
```

我得到一个 http://... url 而不是 https://... url

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:27:33.923

正如@CBroe 指出的那样，您需要通过将 return_ssl_resources 参数设置为 1 来指定您需要一个安全的 URL：[https://graph.facebook.com/wtf.no.username/picture?return_ssl_resources=1](https://graph.facebook.com/wtf.no.username/picture?return_ssl_resources=1)。

编辑：请注意，这不是 FQL（Facebook 查询语言），这只是一个标准的 API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:16:14.507

获取到 url 后，可以`preg_replace()`在 PHP 中将 http 替换为 https 。

```
$cover = $fql_query_obj[cover][source];
$secure_cover = preg_replace('/^http(?=:\/\/)/i','https',$cover); 
```

据我测试，它工作正常。

您也可以使用 javascript 更改它。

```
cover = cover.replace(/^http:\/\//i, 'https://'); 
```

希望这对某人有帮助:)

# php - 是否可以显示实时预览markitUp？

> ID：13702443
> 
> 赞同：0
> 
> 时间：2012-12-04T12:02:44.607
> 
> 标签：php, jquery, yii, markitup

我从这里使用 wyswim 编辑器标记：http: [//markitup.jaysalvat.com/](http://markitup.jaysalvat.com/)

问题是我需要按一个按钮来预览内容。

我想在输入内容时添加实时预览。类似于 stackoverflow 所做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:12:38.970

这是您希望在客户端而不是在服务器上执行的操作（如上所述）。此外，WYSIWYM 代表所见即所得 - 根本不是 MarkItUp！是 - [http://en.wikipedia.org/wiki/WYSIWYM](http://en.wikipedia.org/wiki/WYSIWYM)。

您可能会更幸运地实现具有此功能的编辑器 - 尽管我相信添加实时预览不会太难哟 MarkItUp！- 如EpicEditor（点击可全屏编辑）[http://epiceditor.com/](http://epiceditor.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:06:06.317

不是纯PHP。PHp 是**服务器端**，您正在寻找**客户端**，很可能是基于 JavaScript、Flash 或 Java 的。您可以将这两个执行 JavaScript 异步请求（又名 AJAX）的 bo 组合到服务器并在击键时更新您的预览

# php - netbeans 7.2.1 和 7.3beta 2 html 自动完成和 php go to declaration 停止工作

> ID：13702447
> 
> 赞同：0
> 
> 时间：2012-12-04T12:02:54.590
> 
> 标签：php, html, netbeans, autocomplete

这是问题，我有情况1

```
<html>
<head></head>
<body>
<di <-- here ctrl+space
</body>
</html> 
```

情况2

```
<html>
    <head></head>
    <body>
    <div>
some data
</    <-- here ctrl+space
    </body>
    </html> 
```

在这两个自动完成中它都不起作用。接下来在 php 上，当我 ctrl+click（转到声明）时，IDE 打开声明函数的文件，但不会滚动到实际声明。两者都在 100% 工作，这是在 ubuntu 12.4.1 + openjdk-7 上。我已经搜索了一个解决方案，删除了设置和缓存没有变化，重新安装，删除，旧，（缓存和设置）没有变化。尝试任何其他解决方案吗？我真的很喜欢netbeans，我不想切换到其他smt。

# javascript - 地理编码器 Internet Explorer 问题

> ID：13702454
> 
> 赞同：0
> 
> 时间：2012-12-04T12:03:17.117
> 
> 标签：javascript, internet-explorer, google-maps, geocoding

**大家好**，

我正在尝试使用谷歌地图 API 在我的网站上显示一些地址。问题是在 IE 上不起作用...我的代码是这样的：

```
function displayAdress (address) {

geocoder = new google.maps.Geocoder();
geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        var myOptions = {
            zoom: 15,
            center: results[0].geometry.location,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("gmap-event"),myOptions); ////$("div[id^='map_canvas']").first()
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
    } else {
        alert(
        /*"Geocode was not successful for the following reason: " + status*/
        'Google map was unable to found the address: '+ address
        );
    }
}); 
```

当我在 IE 上使用时，日志控制台会出现问题`geocoder = new google.maps.Geocoder();`

有人遇到过这个问题吗？感谢您的帮助。

托马斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:20:10.117

我的猜测（因为您没有包含足够的上下文）是您的页面上有一个 id="geocode" 的元素，并且您没有在全局上下文中的 javascript 中声明“var geocode”。

# facebook - 从 facebook 消息中检索附件

> ID：13702457
> 
> 赞同：0
> 
> 时间：2012-12-04T12:03:25.933
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

如何使用 Facebook C# SDK 从消息中获取附件，即添加的照片或文件。我能够获取消息作为 json 响应，但在其中没有看到任何附件密钥。

例如

我已经回复了带有图片的消息。

当我使用 Facebook C# SDK 从 facebook 检索 Message 项时

```
FacebookClient fbclient = new FacebookClient("AccessToken");
fbclient.get("me\inbox"), 
```

我没有看到图像的条目。回复在评论部分。

我从上述查询中收到的 Json 响应如下：

```
 {
      "data": [
       {

  "id": "1234567890123456",
  "to": {
    "data": [
      {
        "name": "John Doe",
        "id": "100001234567890"
      },
      {
        "name": "Jane Doe",
        "id": "100001234567891"
      },
      {
        "name": "Jack Smith",
        "id": "100001234567892"
      }
    ]
  },
  "updated_time": "2012-12-04T11:28:18+0000",
  "unread": 0,
  "unseen": 0,
  "comments": {
    "data": [
      {
        "id": "1234567890123456_1",
        "from": {
          "name": "Jack Smith",
          "id": "100001234567891"
        },
        "message": "attachment testing",
        "created_time": "2012-12-04T11:28:18+0000"
      }
    ],
    "paging": {
      "previous": "https://graph.facebook.com/1234567890123456/comments?limit=25&since=1234567890&__paging_token=1234567890123456_3",
      "next": "https://graph.facebook.com/1234567890123456/comments?limit=25&until=1234567890&__paging_token=1234567890123456_1"
    }
  }
    ] 
```

回复在评论部分。我也在回复中附上了图片。但是我没有看到图像的条目。

# .net - 如何根据 Windows RT 上的绑定值更改背景颜色

> ID：13702458
> 
> 赞同：0
> 
> 时间：2012-12-04T12:03:30.960
> 
> 标签：.net, xaml, windows-runtime, winrt-xaml

`<ListView>`我将如何利用Windows RT / Windows Store 应用程序中的控件（假设我有一个整数列表用作我的）在 Excel（没有灰线）中实现这种效果`ItemsSource`。

本质上，我想知道根据每个数据绑定值的内容直接应用样式或设置背景颜色的最有效方法。

![数据条](../Images/e95d695c246c1177d2ffcc3ace201f05.png)

我们真的需要[这样的东西](https://stackoverflow.com/a/1020306/41211)。但看起来 Windows RT 应用程序不支持数据触发器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:33:52.203

在您的`ItemTemplete`创建矩形上，然后`Fill`使用下面将其属性绑定到您的列表元素`ValueConverter`

```
public sealed class IntegerToColorBrushConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        switch ((int)value)
        {
            case 5:
                return new Windows.UI.Xaml.Media.SolidColorBrush(Windows.UI.Colors.Green);
            case 10:
                return new Windows.UI.Xaml.Media.SolidColorBrush(Windows.UI.Colors.Yellow);
            case 15:
                return new Windows.UI.Xaml.Media.SolidColorBrush(Windows.UI.Colors.Orange);
            case 25:
                return new Windows.UI.Xaml.Media.SolidColorBrush(Windows.UI.Colors.Red);
            case 0:
                return new Windows.UI.Xaml.Media.SolidColorBrush(Windows.UI.Colors.DarkGreen);
            default:
                return new Windows.UI.Xaml.Media.SolidColorBrush(Windows.UI.Colors.Transparent);
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

XAML：

```
 <ResourceDictionary>
        <local:IntegerToColorBrushConverter x:Key="IntegerToColorBrushConverter"/>
        <DataTemplate x:Key="DataTemplate1">
            <Grid>
                <Rectangle Fill="{Binding Converter={StaticResource IntegerToColorBrushConverter}, Mode=OneWay}" />
            </Grid>
        </DataTemplate>
    </ResourceDictionary>

    <ListView ItemsSource="{Binding Elements}" ItemTemplate="{StaticResource DataTemplate1}"/> 
```

# javascript - 如何检查是否选择了单选按钮，然后检查下一个单选按钮并显示不同的内容？

> ID：13702459
> 
> 赞同：1
> 
> 时间：2012-12-04T12:03:38.107
> 
> 标签：javascript, jquery, html, radio-button

理想的情况是`<div class="resp">`在每个单选按钮被选中时显示其下方，并且每个单选按钮`<div class="resp">`包含不同的内容。When the next radio btn is selected, the previous `<div class="resp">`should be hidden and the selected radio btn should have the respective `<div class="resp">`shown below. 对于每个问题，应该同时显示 1 个响应，当我点击 Q2 收音机 btn 时，应该显示一个 Q1 响应。

目前的情况是我只能在选择时显示所有 div 类，但无法根据需要将它们隐藏起来。

**Javascript**

```
$(".resp").hide();

$(".radioBtn").change(function(){
    if($(this).attr("checked")) {
        $(this).parent().next().show().addClass('expand');
    };
}); 
```

**HTML**

```
<div class="span9">

            <div class="qnstitle">Q1\. Lorem ipsum dolor sit amet</div>
            <label class="radio">
                <input name="qns1" class="radioBtn" type="radio" value="A">a) asdf
            </label>
            <div class="resp" data-qns="qns1">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris aliquet ligula mi. Aenean eu magna quam. In ultrices nisi non tellus molestie ut mattis turpis convallis. </p>
            </div>

            <label class="radio">
                <input name="qns1" class="radioBtn" type="radio" value="B">b) bsdf
            </label>
            <div class="resp" data-qns="qns1">
                <p>Proin porta, ante eu feugiat facilisis, nulla erat porta dui, sed pellentesque orci sapien quis libero. Nam nec nibh metus, nec luctus massa.</p>
            </div>

            <label class="radio">
                <input name="qns1" class="radioBtn" type="radio" value="C">c) csdf
            </label>
            <div class="resp" data-qns="qns1">
                <p>Donec metus nibh, pharetra vitae semper id, blandit non lorem. Fusce ut metus a dui egestas congue quis quis augue. Suspendisse sed nunc sed nulla volutpat pharetra at vel purus.</p>
            </div>

            <br>

            <div class="qnstitle">Q2\. Nunc sed aliquet enim.</div>
            <label class="radio">
                <input name="qns2" class="radioBtn" type="radio" value="A">a) azzzddsaf
            </label>
            <div class="resp" data-qns="qns2">
                <p>Donec metus nibh, pharetra vitae semper id, blandit non lorem.</p>
            </div>

            <label class="radio">
                <input name="qns2" class="radioBtn" type="radio" value="B">b) bzzzzddafdsf
            </label>
            <div class="resp" data-qns="qns2">
                <p>Aenean eu metus id dui tristique aliquam. Pellentesque non scelerisque nisi. Integer a nibh orci</p>
            </div>

            <label class="radio">
                <input name="qns2" class="radioBtn" type="radio" value="C">c) czzdfasdf
            </label>
            <div class="resp" data-qns="qns2">
                <p>Pellentesque turpis libero, consectetur nec dictum eu, accumsan a sapien. Integer eget ultrices risus. Pellentesque vel orci purus.</p>
            </div>
        </div><!-- end of span9 --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:06:28.973

try this :

```
$(".resp").hide();
$(".radioBtn").change(function(){
    $(".resp").removeClass('expand').hide(); // <--- add this
    if(this.checked) {
        $(this).parent().next().show().addClass('expand');
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:33:05.483

如果这仍然适用，则此代码的较短版本。我问了同样的问题。这是链接。有两个工作示例，只有两个答案。

[显示/隐藏 Divs 多个单选按钮 JQuery](https://stackoverflow.com/questions/16135946/show-hide-divs-multiple-radio-buttons-jquery/16136075?noredirect=1#comment23051720_16136075)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:13:38.993

简单到

```
$(".radioBtn").change(function(){
   $(".resp").hide();
   if($(this).attr("checked")) {
    $(this).parent().next().show().addClass('expand');
   };
});​ 
```

检查这个小提琴：http: [//jsfiddle.net/rdcLg/](http://jsfiddle.net/rdcLg/)

# qt - 无法将图标添加到 QML 桌面应用程序

> ID：13702465
> 
> 赞同：1
> 
> 时间：2012-12-04T12:04:03.197
> 
> 标签：qt, window, icons, qml

我正在用 QtCreator 和 c++（在 Win7 上）编写 QML 桌面应用程序。

在我的 main.cpp 中，我已经像这样加载了应用程序：

```
Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QDeclarativeView view;
    view.setWindowFlags(Qt::Window | Qt::MSWindowsFixedSizeDialogHint);
    view.setSource(QUrl("qrc:/qml/GenericHostApplicationQML/myMain.qml"));
    view.show();
    menu->load();
    return app.exec();
} 
```

现在我想在我的应用程序窗口中添加一个图标，所以我尝试了这个：

```
view.setWindowIcon(QIcon("qrc:/qml/GenericHostApplicationQML/content/pics/TXE.ico")); 
```

而且我没有收到任何错误，但是当我运行它时，窗口有常规的 .exe 文件图标，而不是想要的。我尝试更改图片，但没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:35:31.337

[这](http://doc.qt.digia.com/4.0/appicon.html)是有关如何设置桌面 Qt 应用程序图标的文档。

**编辑**：此外，对于您正在设置的窗口图标，请确保引用的图像文件实际上列在您的应用程序资源中（请参阅[this](http://doc.qt.digia.com/4.0/resources.html)）。

# wpf - 如何定义控件的自定义类，并在其中定义自定义事件和处理程序（在 WPF 中）？

> ID：13702466
> 
> 赞同：0
> 
> 时间：2012-12-04T12:04:02.580
> 
> 标签：wpf, winforms, events, inheritance

我是 WPF 和 Windows 窗体的新手。我需要知道如何定义控件的自定义类（例如标签或文本框...）并定义它的外观并**为该**控件的任何所需事件编写自定义方法。就像单击时在标签周围放置黑色边框一样。

我需要做所有这些，**以便**我可以根据需要动态创建该类的尽可能多的实例，确保它们都具有相同的功能和我放入它们的外观。

有没有关于这个的简单教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:15:27.847

您正在寻找的是从已经存在的控件（CustomControl）继承创建一个新控件，您可以将控件添加到该控件（UserControl）中。如果它只是一个控件的自定义类（如标签或文本框），那么我会尝试使用 CustomControl 来解决它

WinForms 和 WPF 的名称相同。我可以提供一些链接，但我认为你最好只是谷歌它，这样你就可以找到最适合你需要的示例/教程。

*编辑*

好的，所以我会说 - 根据您的背景 - WinForms 更简单一些。但是，如果您制作专业程序，WPF 可能是要走的路。（WinForms 有点老了）

**WinForm**

至少，这里是一个非常简短的 WinForm CustomControl 示例：

```
namespace BorderLabelWinForms
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using System.Drawing;

    public class BorderLabel : Label
    {
        private bool _showBorder = false;

        protected override void OnMouseClick(MouseEventArgs e)
        {
            _showBorder = !_showBorder;
            base.OnMouseClick(e);
            this.Refresh();
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);

            if (_showBorder)
            {
                Pen pen = new Pen(new SolidBrush(Color.Black), 2.0f);
                e.Graphics.DrawRectangle(pen, this.ClientRectangle);
                pen.Dispose();
            }
        }
    }
} 
```

然后你可以从那里开始并扩展它。

**WPF**

WPF 更复杂，但要创建自定义控件，您可以在项目视图中右键单击项目，然后选择添加 > 新项目。在弹出的对话框中，选择一个自定义控件 (WPF)。现在您将获得一个新的 {choosen name}.cs（在我的示例中为 BorderLable）和一个目录；主题和 Generic.xaml 文件。通用文件是描述如何构建控件的资源。例如这里我在 CustomControl 中添加了一个标签：

通用的.xaml：

```
 <Style TargetType="{x:Type local:BorderLabel}">
        <Style.Resources>
            <local:ThicknessAndBoolToThicknessConverter x:Key="tabttc" />
        </Style.Resources>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:BorderLabel}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}" >
                        <Border.BorderThickness>
                            <MultiBinding Converter="{StaticResource tabttc}" >
                                <Binding Path="BorderThickness" RelativeSource="{RelativeSource TemplatedParent}" />
                                <Binding Path="ShowBorder" RelativeSource="{RelativeSource TemplatedParent}" />
                            </MultiBinding>
                        </Border.BorderThickness>
                        <Label Content="{TemplateBinding Content}" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

边界标签.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace BorderButton
{
    /// <summary>
    /// Bla. bla bla...
    /// </summary>
    public class BorderLabel : Label
    {
        //DependencyProperty is needed to connect to the XAML
        public bool ShowBorder
        {
            get { return (bool)GetValue(ShowBorderProperty); }
            set { SetValue(ShowBorderProperty, value); }
        }

        public static readonly DependencyProperty ShowBorderProperty =
            DependencyProperty.Register("ShowBorder", typeof(bool), typeof(BorderLabel), new UIPropertyMetadata(false));

        //Override OnMouseUp to catch the "Click". Toggle Border visibility
        protected override void OnMouseUp(MouseButtonEventArgs e)
        {
            base.OnMouseUp(e);
            ShowBorder = !ShowBorder;
        }

        //Contructor (some default created when selecting new CustomControl)
        static BorderLabel()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(BorderLabel), new FrameworkPropertyMetadata(typeof(BorderLabel)));
        }
    }

    //So doing it the WPF way, I wanted to bind the thickness of the border
    //to the selected value of the border, and the ShowBorder dependency property
    public class ThicknessAndBoolToThicknessConverter : IMultiValueConverter
    {

        public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (values[0] is Thickness && values[1] is bool)
            {
                Thickness t = (Thickness)values[0];
                bool ShowBorder = (bool)values[1];

                if (ShowBorder)
                    return t;
                else
                    return new Thickness(0.0d);

            }
            else
                return null;
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

最后，您必须将控件添加到 MainWindow：

```
<Window x:Class="BorderButton.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:BorderButton"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <!-- Note that the BorderThickness has to be set to something! -->
        <local:BorderLabel Content="HelloWorld" Margin="118,68,318,218" MouseUp="BorderLabel_MouseUp" BorderBrush="Black" BorderThickness="2" ShowBorder="False" />
    </Grid>
</Window> 
```

如您所见，WPF 稍微复杂一些……无论如何，现在您有两个示例可以开始！希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:20:49.490

[这是](https://stackoverflow.com/questions/13274956/wpf-custom-button-best-approach/13276319#13276319)我发布的先前答案的链接。有人对按钮和自定义属性/设置感兴趣。它还展示了我如何开始采样和学习控件、自定义模板等并利用这些属性。您可以通过“触发器”（与您可以绑定的依赖项属性相关联）处理事件来扩展它。

我相信你会在那里找到许多其他样本，但这可能会帮助你同时不伤你的头撞墙:)

# php - Wordpress，为所有链接添加标签

> ID：13702470
> 
> 赞同：2
> 
> 时间：2012-12-04T12:04:13.537
> 
> 标签：php, html, wordpress

当我在我的 Wordpress 网站上写博客文章时，我想在所有锚标签内动态添加一个跨度标签，其数据属性与锚标签具有相同的值。

**例子**

我在 Wordpress 中写的内容：

```
<p>Some text with <a href="#">a link in it</a></p> 
```

产生什么：

```
<p>Some text with <a href="#"><span data-title="a link in it">a link in it</span></a> 
```

你怎么能用 jQuery 或 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T12:22:52.960

使用 PHP，您应该可以这样做：

```
function wrap_anchor_text_with_span( $content ) {
    if ( ! is_admin() && preg_match( '~<a(.*?)>(.*?)</a>~', $content ) ) {
        $content = preg_replace_callback( '~<a(.*?)>(.*?)</a>~', '_add_span', $content );
    }
    return $content;
}
add_filter('the_content', 'wrap_anchor_text_with_span', 10);

function _add_span( $matches ) {
    if ( ! ( $title = strip_tags( $matches[2] ) ) ) { // If we only have an image inside the anchor
        return '<a' . $matches[1] . '>' . $matches[2] . '</a>';
    } else {
        return '<a' . $matches[1] . '><span data-title="' . esc_attr( $title ) . '">' . $matches[2] . '</span></a>';
    }
} 
```

这个函数的作用是它挂钩`the_content`过滤并在所有锚标签内放置一个跨度。

**请注意**，如果锚点包含图像，则不会添加跨度 - 如果需要，可以通过将`_add_span`函数更改为：

```
function _add_span( $matches ) {
    return '<a' . $matches[1] . '><span data-title="' . esc_attr( strip_tags( $matches[2] ) ) . '">' . $matches[2] . '</span></a>';
} 
```

jQuery 解决方案也不会很困难，但我认为只有 PHP 就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:07:31.207

jQuery 和 wrapInner() 也可以：

```
<p>Some text with <a class="generate_span" href="#">a link in it</a></p>

<script>
$('.generate_span').each(function(){
    $(this).wrapInner('<span data-title="'+($(this).attr('href'))+'"></span>');
});
</script> 
```

[http://jsfiddle.net/242b8/](http://jsfiddle.net/242b8/)

# tsql - 从 SQL Server SEQUENCE 获取当前值

> ID：13702471
> 
> 赞同：46
> 
> 时间：2012-12-04T12:04:18.497
> 
> 标签：tsql, sequence, sql-server-2012

我想从我的序列中获取当前值 - 与序列属性窗口 SQL Server Management Studio 中显示的值相同

![在此处输入图像描述](../Images/22e30e974ed1523a1d5f7c52d1141da3.png)

我的序列是用这个语句创建的：

```
CREATE SEQUENCE [OrderNumberSequence]
    as int
    START WITH 4000
    INCREMENT BY 1
    MINVALUE 0
    NO MAXVALUE
    NO CACHE;
GO 
```

我[从 MSDN](http://msdn.microsoft.com/en-us/library/ff878352.aspx)尝试过这个 SQL——但结果是每次运行查询时我的数字都会增加 5

```
DECLARE  
  @FirstSeqNum sql_variant
, @LastSeqNum sql_variant
, @CycleCount int
, @SeqIncr sql_variant
, @SeqMinVal sql_variant
, @SeqMaxVal sql_variant ;

EXEC sys.sp_sequence_get_range
@sequence_name = N'[OrderNumberSequence]'
, @range_size = 5
, @range_first_value = @FirstSeqNum OUTPUT 
, @range_last_value = @LastSeqNum OUTPUT 
, @range_cycle_count = @CycleCount OUTPUT
, @sequence_increment = @SeqIncr OUTPUT
, @sequence_min_value = @SeqMinVal OUTPUT
, @sequence_max_value = @SeqMaxVal OUTPUT ;

-- The following statement returns the output values
SELECT
  @FirstSeqNum AS FirstVal
, @LastSeqNum AS LastVal
, @CycleCount AS CycleCount
, @SeqIncr AS SeqIncrement
, @SeqMinVal AS MinSeq
, @SeqMaxVal AS MaxSeq ; 
```

有没有办法在不改变数字的情况下获得价值？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-04T12:12:18.900

您可以选择 `current_value`从`sys.sequences`：

```
SELECT current_value FROM sys.sequences WHERE name = 'OrderNumberSequence' ; 
```

[**演示**](http://sqlfiddle.com/#!6/6f59b/1/0)

# ruby-on-rails - 使用带有 github-markup/gollum 和 Rails 3 的自定义 markdown 渲染器

> ID：13702472
> 
> 赞同：2
> 
> 时间：2012-12-04T12:04:20.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundler, ruby-1.9.3, gollum-wiki

我遇到了我认为使用 github-markup 的负载排序问题。

我正在尝试覆盖默认的降价渲染器并在 Rails 初始化程序中使用我自己的自定义渲染器。但是它不起作用；它似乎只是忽略了我的初始化程序**，除非**我在我的 Gemfile 中特别包含 githum-markup gem**并**指定添加 :git 或 :path 设置。（github-markup 是 gollum gem 的依赖项）

宝石文件

```
## Github-Markup #######
# Initializer wiki.rb wont work properly unless this gem is loaded via path: or git:
gem 'github-markup', :git => 'git://github.com/github/markup.git'

gem 'gollum' #gollum already includes github-markup so I shouldn't need the lines above 
```

初始化程序/wiki.rb

```
GitHub::Markup.add_markup(/md|mkdn?|mdwn|mdown|markdown/) do |content|
  CustomMarkdown.new(content).to_html
end 
```

查看 github-markup 代码，该类调用该文件底部附近的标记：

[https://github.com/github/markup/blob/master/lib/github/markup.rb](https://github.com/github/markup/blob/master/lib/github/markup.rb)

```
instance_eval File.read(File.dirname(__FILE__) + '/markups.rb') 
```

你可以在这个文件的顶部看到我试图覆盖的降价渲染器：

[https://github.com/github/markup/blob/master/lib/github/markups.rb](https://github.com/github/markup/blob/master/lib/github/markups.rb)

```
MD_FILES = /md|mkdn?|mdwn|mdown|markdown/

if markup('github/markdown', MD_FILES) do |content|
    GitHub::Markdown.render(content)
  end
elsif markup(:redcarpet, MD_FILES) do |content|
    RedcarpetCompat.new(content).to_html
  end
elsif markup(:rdiscount, MD_FILES) do |content|
    RDiscount.new(content).to_html
  end
elsif markup(:maruku, MD_FILES) do |content|
    Maruku.new(content).to_html
  end
elsif markup(:kramdown, MD_FILES) do |content|
    Kramdown::Document.new(content).to_html
  end
elsif markup(:bluecloth, MD_FILES) do |content|
    BlueCloth.new(content).to_html
  end
end 
```

为了清楚起见，我使用的是 Ruby 1.9.3，我想得到它，所以我可以在 Gemfile 中调用 gem 'gollum' 并使用我的初始化程序用我自己的自定义渲染器覆盖默认的 github-markup markdown 渲染器.

# wkhtmltopdf - 在 Windows 上的 Tiki 中使用 wkhtmltopdf

> ID：13702475
> 
> 赞同：0
> 
> 时间：2012-12-04T12:04:39.187
> 
> 标签：wkhtmltopdf, tiki-wiki

我在运行 Apache 2.2 和 PHP 5.2.17 的 Windows XP 机器上安装了 Tiki 9.2。我已经在程序文件文件夹（C:\Program Files\wkhtmltopdf）下安装了 wkhtmltopdf。我在 $PATH 变量中输入了路径。但是，似乎无论我在 Tiki 配置界面中输入什么路径，它都不会调用可执行文件。我已经使用命令行检查了可执行文件的工作。

我尝试了反斜杠、正斜杠、双引号、双引号 x2、%20 空间中的文件 /// 在前面。没有任何东西可以从界面调用它。

有人有这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:03:06.503

只是一个猜测：尝试 C:\Program Files\wkhtmltopdf\wkhtmltopdf.exe 或 wkhtmltopdf.exe 如果你在 $PATH 中有它（不确定可执行文件是否命名为 wkhtmltopdf.exe - 请仔细检查）。

# hive - Hive 查询输出分隔符

> ID：13702476
> 
> 赞同：4
> 
> 时间：2012-12-04T12:04:44.620
> 
> 标签：hive, delimiter

我在 Hive 中有 2 个表 - 第一个是外部的，第二个是托管的。使用 INSERT OVERWRITE...SELECT FROM external_table 从外部填充托管表。两个表都是用“，”分隔的行创建的。当我对文件运行选择查询时，结果文件中的分隔符是制表符，但我需要逗号。如何将其更改为逗号，我看不到任何属性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T12:56:51.257

首先，您需要更改字段分隔符，而不是行分隔符。

```
hive >> CREATE TABLE some_table 
        (col1 int,
         col2 int,
         col3 string)
        ROW FORMAT DELIMITED
        FIELDS TERMINATED BY ','
        STORED AS TEXTFILE; 
```

其次，如果你仍然面临这个问题，你可以简单地使用 sed 来改变它。

```
bash >> hive -e 'select * from some_Table' | sed 's/[\t]/,/g'  > outputfile.txt 
```

请注意 [\t] 是按 Control+V 然后按制表符字符：

```
sed 's/<Control+V><TAB character>/,/g' 
```

# common-lisp - 如何将字符串与字符串列表进行比较（不带引号）

> ID：13702477
> 
> 赞同：0
> 
> 时间：2012-12-04T12:04:52.907
> 
> 标签：common-lisp

所以我收到一个字符串，我想将它与我列表的第一个元素进行比较，但它不会工作，因为如果字符串是 asd，它会将“asd”与 asd 进行比较。

```
(defun test (thistring list) 
 (cond 
  ((null list) nil) 
  ((equal thistring (car(car list))
     (print "ok"))))) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:25:15.067

```
CL-USER 42 > (find "foo" '(bar foo baz) :key #'string-downcase :test #'equal) 
```

食品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:21:33.397

如果您想简单地将输入字符串 ('thisstring') 与输入列表的第一个元素 ('list') 进行比较，那么这些行的内容会更合适：

```
(defun test (thistring list) 
  (cond 
    ((null list)
        nil) 
    ((equal thistring (car list))
        (print "ok"))
  )
) 
```

# java - 在状态已创建上设置 Location 标头路径时，Javax 响应预先添加方法路径

> ID：13702481
> 
> 赞同：6
> 
> 时间：2012-12-04T12:04:59.240
> 
> 标签：java, http, jersey, dropwizard

我们正在使用 Dropwizard / Jersey 来构建 Web 服务。资源有路径，方法有子路径。当返回创建的响应（201）时，我们获取的方法的路径被添加到我们提供的位置。当返回一个位置的 OK 状态时（我知道是人为的），一切都很好，并且返回的位置就像我们提供的一样。

我们如何返回一个不是我们方法位置的子路径的位置？

在下面的示例中：访问“http://localhost/foo/bar”（创建状态）以“http://localhost/foo/bar/wibble”的位置响应（注意**/foo/bar**）

而对“http://localhost/foo/baz”（ok 状态）的访问则以“http://localhost/wibble”的位置响应，这正是我们想要的。

```
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.core.Response;
import java.net.URI;

@Path("/foo")
public class FooResource {

    @POST
    @Path("/bar")
    public Response bar() {

        URI uriOfCreatedResource = URI.create("/wibble");
        return Response.created(uriOfCreatedResource).build();
    }

    @POST
    @Path("/baz")
    public Response baz() {

        URI uriOfCreatedResource = URI.create("/wibble");
        return Response.ok().location(uriOfCreatedResource).build();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-28T13:40:18.550

万一有人偶然发现这里想知道这一点；我深入研究了泽西岛的代码，看看为什么会发生这种情况。这应该可以解释您的问题和 Carlo 的解决方法。

com.sun.jersey.spi.container.ContainerResponse 包含这个 gem：

```
private void setHeaders(MultivaluedMap<String, Object> headers) {
    this.headers = headers;
    Object location = headers.getFirst(HttpHeaders.LOCATION);
    if (location != null) {
        if (location instanceof URI) {
            final URI locationUri = (URI)location;
            if (!locationUri.isAbsolute()) {
                final URI base = (statusType.getStatusCode() == Status.CREATED.getStatusCode())
                        ? request.getAbsolutePath() // WHY!?
                        : request.getBaseUri();
                location = UriBuilder.fromUri(base).
                        path(locationUri.getRawPath()).
                        replaceQuery(locationUri.getRawQuery()).
                        fragment(locationUri.getRawFragment()).
                        build();
            }
            headers.putSingle(HttpHeaders.LOCATION, location);
        }
    }
} 
```

换句话说：由于某种原因，有人认为如果响应状态代码是 201，则以不同的方式处理位置标头是一个好主意。就像 Carlo 注意到的那样，使用绝对路径可以避免这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T13:42:08.167

在 GlassFish (JavaEE6) 上发生在我身上。我认为这是一个错误，但我从未设法将代码挖掘到实际的 URI 转换......

我找到了一个解决方法：

```
public Response bar(@Context UriInfo info) {
   URI absoluteURI=info.getBaseUriBuilder().path("/wibble").build();
   return Response.created(absoluteURI).build();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T14:17:31.090

在 Jersey 2.x 中，相关代码被完全重写并移到了另一个地方。在 class 内部`org.glassfish.jersey.server.ServerRuntime`，在写入响应数据时会调用以下方法：

```
 private static void ensureAbsolute(final URI location, final MultivaluedMap<String, Object> headers,
                                       final ContainerRequest request) {
        if (location == null || location.isAbsolute()) {
            return;
        }
        // according to RFC2616 (HTTP/1.1), this field can contain one single URI
        headers.putSingle(HttpHeaders.LOCATION, request.getBaseUri().resolve(location));
    } 
```

如前所述，除非应用程序为 Location 标头设置绝对 URI（以类似`http:`or的模式开头的 URI `ftp:`），否则 Jersey 会自动在其前面加上请求的基本 URI。

奇怪的是，泽西岛不允许控制或禁用这种行为。

# iphone - 如何在 iPhone 中使用 AFNetWorking 在 Web 服务器上发布数据

> ID：13702486
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:05:13.877
> 
> 标签：iphone, web-services, afnetworking

我第一次使用 AFNetworking 库，我已经成功实现了 json 解析，它运行良好，现在我需要创建一个注册页面，用户将在其中填写所有详细信息，如用户名、密码、问题、答案、名称它会将所有数据发布到网络服务器上。我试过几个例子，但它没有发布在网络服务器上。

以下是在网络服务器上发布的代码

```
NSURL *baseURL = [NSURL URLWithString:@"http://apollowebservice.10summer.com/registration.php"];

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
[httpClient defaultValueForHeader:@"Accept"];

NSMutableDictionary *requestArray = [NSMutableDictionary new];
[requestArray setObject: @"Kashif"
                 forKey: @"user_name"];
[requestArray setObject: @"Kashif.jilani@triffort.com"
                 forKey: @"user_email"];
[requestArray setObject:@"ila@1234" forKey:@"user_password"];
[requestArray setObject:@"What is your name" forKey:@"user_question"];
[requestArray setObject:@"Kashif Answer" forKey:@"user_answer"];

[httpClient postPath:@"method" parameters:requestArray success:^(AFHTTPRequestOperation *operation, id responseObject) {
    // reponseObject will hold the data returned by the server.

}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", error);
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:52:27.777

在这种情况下，您可以使用空白的 baseURL 并将路径设置为

```
NSURL *baseURL = [NSURL URLWithString:@""];

// ...your code....

[httpClient postPath:@"http://apollowebservice.10summer.com/registration.php" parameters:requestArray success:^(AFHTTPRequestOperation *operation, id responseObject) {
    // reponseObject will hold the data returned by the server.
}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", error);
}]; 
```

# java - 如何在 jenkins 中部署 .war 文件？

> ID：13702491
> 
> 赞同：0
> 
> 时间：2012-12-04T12:05:31.527
> 
> 标签：java, jenkins

我使用 ANT 在 javascript 中创建了一个 .war 文件。我将它部署在 tomcat 服务器中。但我想使用詹金斯部署它。请帮助提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:11:33.297

Jenkins 有一个 Deploy 插件。[https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)

出于好奇，如何（也许更重要的是为什么）“使用 ANT 在 javascript 中创建 .war 文件”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:13:44.230

我会在构建文件中添加一个部署目标。然后从作业中调用该目标。

**延伸阅读（外部文章）**

*   [http://www.avajava.com/tutorials/lessons/how-do-i-deploy-to-tomcat-using-ant.html](http://www.avajava.com/tutorials/lessons/how-do-i-deploy-to-tomcat-using-ant.html)

# ios6 - 如何使用自动布局约束使具有自定义宽度的按钮居中？

> ID：13702495
> 
> 赞同：0
> 
> 时间：2012-12-04T12:05:48.817
> 
> 标签：ios6, autolayout, rubymotion, nslayoutconstraint, visual-format-language

请看以下代码：

```
def viewDidLoad
    super
    self.view.translatesAutoresizingMaskIntoConstraints = false
    self.view.backgroundColor = UIColor.whiteColor

    @start = UIButton.buttonWithType(UIButtonTypeRoundedRect).tap do |el|
      el.translatesAutoresizingMaskIntoConstraints = false          
      el.setTitle('Start', forState:UIControlStateNormal)
      el.addTarget(self, action:'toStartController', forControlEvents:UIControlEventTouchUpInside)
      self.view.addSubview(el)
    end

    self.layout_subviews
  end

def layout_subviews
    metrics = { 'space' => 8 }

    views_dict = { 
      'superview' => self.view, 
      'start' => @start
    }

    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('H:|-[start(100)]-|', 
                                                                    options: NSLayoutFormatAlignAllCenterX, 
                                                                    metrics: metrics, 
                                                                      views: views_dict))

    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('V:[start]-|', 
                                                                    options: NSLayoutFormatAlignAllBottom, 
                                                                    metrics: metrics, 
                                                                      views: views_dict))
  end 
```

我遇到的问题是`H:|-[start(100)]-|`行不通。我想要的是一个宽度为 100 的按钮，以 X 轴为中心，并以默认边距连接到屏幕底部。一旦我删除它`(100)`，这个按钮就会延伸到屏幕宽度减去默认边距。当我指定自定义宽度时，我认为自动布局系统无法计算出左右边距应该是什么。我得到一个`Unable to simultaneously satisfy constraints.`错误。我想这与 中的破折号有关`H:|-[start(100)]-|`，它需要具有流体宽度才能将`start`元素附加到`superview`，而不是默认边距。

关于我如何解决这个问题的任何想法？

**更新（感谢 ghettopia）：**

*这有效（注意我`UINavigationController`在应用程序委托中使用 a 并且in`self.view.translatesAutoresizingMaskIntoConstraints = false`被注释掉了）：`viewDidLoad``TestController`*

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds).tap do |win|
      controller = TestController.alloc.initWithNibName(nil, bundle:nil)
      win.rootViewController = UINavigationController.alloc.initWithRootViewController(controller).tap do |root|
        root.navigationBarHidden = true
        root.wantsFullScreenLayout = true
      end
      win.makeKeyAndVisible
    end
    true
  end
end

class TestController < UIViewController

  def viewDidLoad
    super
    # self.view.translatesAutoresizingMaskIntoConstraints = false
    self.view.backgroundColor = UIColor.blueColor

    @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
    @button.translatesAutoresizingMaskIntoConstraints = false
    self.view.addSubview(@button)

    views = { 
      'view' => self.view, 
      'button' => @button
    }

    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('H:[button(100)]', options: 0, metrics: nil, views: views))
    self.view.addConstraint(NSLayoutConstraint.constraintWithItem(@button, attribute: NSLayoutAttributeCenterX, relatedBy: NSLayoutRelationEqual, toItem: self.view, attribute: NSLayoutAttributeCenterX, multiplier: 1, constant: 0))
    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('V:[button]-|', options: 0, metrics: nil, views: views))
  end
end 
```

![正确的画面](../Images/48252e15c5f12df832d926825b417f64.png)

*伟大的。现在我得到一个蓝屏，按钮以 X 轴为中心，底部有默认边距，正如我想要的那样。但是，根据我所阅读`self.view.translatesAutoresizingMaskIntoConstraints = false`的内容，需要使自动布局工作。为了实现这一点，这也有效（请注意，我`UINavigationController`这次没有使用 a 并且`self.view.translatesAutoresizingMaskIntoConstraints = false`正在`viewDidLoad`使用`TestController`IS）：*

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds).tap do |win|
      win.rootViewController = TestController.alloc.initWithNibName(nil, bundle:nil)
      win.makeKeyAndVisible
    end
    true
  end
end

class TestController < UIViewController

  def viewDidLoad
    super
    self.view.translatesAutoresizingMaskIntoConstraints = false
    self.view.backgroundColor = UIColor.blueColor

    @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
    @button.translatesAutoresizingMaskIntoConstraints = false
    self.view.addSubview(@button)

    views = { 
      'view' => self.view, 
      'button' => @button
    }

    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('H:[button(100)]', options: 0, metrics: nil, views: views))
    self.view.addConstraint(NSLayoutConstraint.constraintWithItem(@button, attribute: NSLayoutAttributeCenterX, relatedBy: NSLayoutRelationEqual, toItem: self.view, attribute: NSLayoutAttributeCenterX, multiplier: 1, constant: 0))
    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('V:[button]-|', options: 0, metrics: nil, views: views))
  end
end 
```

但这似乎不是一个合适的解决方案。我需要一个`UINavigationController`来创建我的应用程序结构。问题是当我不使用上述任何解决方案时，我会得到一个黑屏，中间有一个按钮死了（在两个轴上）。观点似乎被打破了： ![黑屏](../Images/4e9f2a17941ee19293f01fb9a9286802.png)

想法？我应该删除`self.view.translatesAutoresizingMaskIntoConstraints = false`并忘记它还是确实需要它？如果是，那我的代码一定有问题。

**更新 2：**

有趣的教程：[iOS 6 中的自动布局：通过代码添加约束](http://ioscreator.com/auto-layout-in-ios-6-adding-constraints-through-code/)。作者不使用`self.view.translatesAutoresizingMaskIntoConstraints = false`in `viewDidLoad`，仅在子视图上使用。

**更新 3：**

我想我可能已经通过转移`self.view.translatesAutoresizingMaskIntoConstraints = false`到`init`方法而不是`viewDidLoad`. 虽然不知道为什么会这样，但屏幕现在看起来与屏幕截图相同，就像我最初的意图一样。这是更新的代码：

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds).tap do |win|
      controller = TestController.alloc.initWithNibName(nil, bundle:nil)
      win.rootViewController = UINavigationController.alloc.initWithRootViewController(controller).tap do |root|
        root.navigationBarHidden = true
        root.wantsFullScreenLayout = true
      end
      win.makeKeyAndVisible
    end
    true
  end
end    

class TestController < UIViewController

  def init
    self.view.translatesAutoresizingMaskIntoConstraints = false
  end

  def viewDidLoad
    super
    self.view.backgroundColor = UIColor.blueColor

    @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
    @button.translatesAutoresizingMaskIntoConstraints = false
    self.view.addSubview(@button)

    views = { 
      'view' => self.view, 
      'button' => @button
    }

    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('H:[button(100)]', options: 0, metrics: nil, views: views))
    self.view.addConstraint(NSLayoutConstraint.constraintWithItem(@button, attribute: NSLayoutAttributeCenterX, relatedBy: NSLayoutRelationEqual, toItem: self.view, attribute: NSLayoutAttributeCenterX, multiplier: 1, constant: 0))
    self.view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat('V:[button]-|', options: 0, metrics: nil, views: views))
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T18:56:06.680

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeRoundedRect] ;
button.translatesAutoresizingMaskIntoConstraints = NO ;
[self.view addSubview:button] ;

NSDictionary* views = @{ @"view" : self.view  ,  @"button" : button } ;
// Make button's width 100.
[self.view addConstraints: [NSLayoutConstraint constraintsWithVisualFormat:@"H:[button(100)]"  options:0   metrics:nil  views:views ] ] ;
// Make button's CenterX the same as self.view's CenterX.
[self.view addConstraint: [NSLayoutConstraint constraintWithItem:button  attribute:NSLayoutAttributeCenterX  relatedBy:NSLayoutRelationEqual  toItem:self.view  attribute:NSLayoutAttributeCenterX  multiplier:1  constant:0 ] ] ;
// Make button's NSLayoutAttributeBottom the default space away from self.view's NSLayoutAttributeBottom.
[self.view addConstraints: [NSLayoutConstraint constraintsWithVisualFormat:@"V:[button]-|"  options:0   metrics:nil  views:views ] ] ; 
```

# java - 如何在浏览器的 pdf 查看器中禁用另存为按钮？

> ID：13702499
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:05:58.127
> 
> 标签：java, javascript

如何在浏览器的 pdf 查看器中禁用另存为按钮和打印按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:25:50.180

这个 Araf 没有硬性和快速的解决方案，您应该以 HTML 形式显示文本，否则，您将不得不修改 Adob​​e 插件（当然，未经他们的许可，您不能这样做）或设计您自己的插件。

# jquery - 将 jquery 与 xml 集成

> ID：13702504
> 
> 赞同：0
> 
> 时间：2012-12-04T12:06:11.330
> 
> 标签：jquery, xml-parsing, xmlhttprequest

我使用过**jQuery 和 JSON**对象，但是如何使用 jQuery 获取和显示***xml页面中的数据？***或者如何使用 jQuery 获取**XML 文件中的数据并将其显示在页面上？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:09:00.697

Have you read through this tutorial [http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

and I think what you want is

```
$.ajax({
    type: "GET",
url: "sites.xml",
dataType: "xml",
success: function(xml) {

}
}); 
```

from here : [http://think2loud.com/224-reading-xml-with-jquery/](http://think2loud.com/224-reading-xml-with-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:11:24.030

您可以使用 jQuery 以与处理 HTML 节点完全相同的方式处理 XML 节点：

```
$(response).find('somenode'); 
```

假设您设置`dataType`为`xml`，响应已经是一个 XML 文档对象。只需将其包装在一个 jQuery 对象中，您就可以`find`在其上使用 etc。

# magento - 最终库存可用值 [magento]

> ID：13702506
> 
> 赞同：0
> 
> 时间：2012-12-04T12:06:17.770
> 
> 标签：magento

在检查数量和“有货”下拉选项后，我想找出目录中产品的库存情况。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:15:06.787

Mage_Catalog_Model_Product::isSalable

# android - ActionBar Tabs Navigation with Custom ActionBar view strange behavior

> ID：13702509
> 
> 赞同：2
> 
> 时间：2012-12-04T12:06:30.717
> 
> 标签：android, android-actionbar, actionbarsherlock, android-tabs, ui-patterns

I'm having this strange behavior with the action ActionBar Tabs showing above the ActionBar. This happens to be happening when I am setting a custom view for the ActionBar.I'm implementing the Done-Discard pattern using Roman Nurik's example [here](http://code.google.com/p/romannurik-code/source/browse/misc/donediscard#donediscard)

This is happening due to the masking of ActionBar.DISPLAY_SHOW_HOME in setDisplayOptions()

```
final ActionBar actionBar = getActionBar();
    actionBar.setDisplayOptions(
            ActionBar.DISPLAY_SHOW_CUSTOM,
            ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_SHOW_HOME
                    | ActionBar.DISPLAY_SHOW_TITLE);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setCustomView(customActionBarView, new ActionBar.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.MATCH_PARENT)); 
```

The screen looks like this: ![enter image description here](../Images/1f3307254b4e54025c072fe365efbb86.png)

But when I dont mask the ActionBar.DISPLAY_SHOW_HOME it works fine but the App Logo is displayed. like this.

![enter image description here](../Images/bf0558dc4757c955879a3d5a19d1a294.png)

This seems to be a bug.Please suggest a fix.I don't want the logo to be displayed.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:19:54.623

这里的解决方案：

[ActionBarSherlock - 使用自定义视图显示在操作栏上方的选项卡](https://stackoverflow.com/questions/12973143/actionbarsherlock-tabs-appearing-above-actionbar-with-custom-view)

在这里：[https ://github.com/JakeWharton/ActionBarSherlock/issues/327](https://github.com/JakeWharton/ActionBarSherlock/issues/327)

这对我来说似乎有点 hacky，但这是解决方法：在你的 onCreate 中添加这段代码并隐藏主页图标。现在 ActionBar 和 Tabs 可以按预期工作。

请记住不要禁用/屏蔽 ActionBar.setDisplayOptions() 中的 DISPLAY_HOME_HOME。如果您屏蔽/禁用它，这将不起作用。

```
View homeIcon = findViewById(android.R.id.home);
        ((View) homeIcon.getParent()).setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T06:59:04.483

首先将操作栏的“DisplayShowHomeEnabled”属性设置为“true”：

actionBar.setDisplayShowHomeEnabled(true);

接着：

```
View homeIcon = findViewById(android.R.id.home);
    ((View) homeIcon.getParent()).setVisibility(View.GONE);
    ((View) homeIcon).setVisibility(View.GONE); 
```

我希望它有帮助:)

# .net - Forwarding ServiceStack requests to other service handlers

> ID：13702510
> 
> 赞同：4
> 
> 时间：2012-12-04T12:06:32.223
> 
> 标签：.net, servicestack

I have a requirement to have one service handle a request, transform it to some other request, pass that request to the inner service, get the response, and transform it back to the outer service response. Some code may explain it better. This is what I have done:

```
public class InviteUserService : Service, IPost<Invitee>
{
    public RegistrationService RegistrationService { get; set; }

    public object Post(Invitee invitee)
    {
        // Do other invitation related work that is part of my domain.

        var registration = invitee.TranslateTo<Registration>();
        registration.UserName = invitee.EmailAddress;
        registration.Email = invitee.EmailAddress;

        // It previously threw a null ref exception until I added this.
        RegistrationService.RequestContext = RequestContext;

        var response = RegistrationService.Post(registration);
        if (response is RegistrationResponse)
        {
            var inviteeResponse = response.TranslateTo<InviteeResponse>();
            return inviteeResponse;
        }
        // Else it is probably an error and just return it directly to be handled by SS.
        return response;
    }
} 
```

As the comment in the code above shows, before I passed down the `RequestContext` it was failing with a NullReferenceException. Now that I have done that it does work, but I'm wondering if I'm heading into an upstream battle in regards to how ServiceStack works? Will it cause me more problems down the track?

If both services were under my control, I would simply move the registration code into a separate shared dependency. However `RegistrationService` is built into ServiceStack, and doesn't seem to be callable in any other way apart from this. Unless I am missing something?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T19:26:18.167

将请求委托给[ServiceStack](http://www.servicestack.net/)中的其他服务的方法是调用`base.ResolveService<T>`它，它只是[从 IOC 解析服务并为您注入当前的 RequestContext](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs#L39-L45)。这基本上与您正在做的事情相似，但由于这是执行此操作的官方 API，因此如果需要做其他任何事情，它将被维护。

使用此 API，您的服务将如下所示：

```
public class InviteUserService : Service, IPost<Invitee>
{
    public object Post(Invitee invitee)
    {
        // Do other invitation related work that is part of my domain.

        var registration = invitee.TranslateTo<Registration>();
        registration.UserName = invitee.EmailAddress;
        registration.Email = invitee.EmailAddress;

        // Resolve auto-wired RegistrationService from IOC
        using (var regService = base.ResolveService<RegistrationService>())
        {
            var response = regService.Post(registration);
            if (response is RegistrationResponse)
            {
                var inviteeResponse = response.TranslateTo<InviteeResponse>();
                return inviteeResponse;
            }
            return response;
        }    
    }
} 
```

# ruby-on-rails - 使用 simple_form 选择值的数字范围

> ID：13702511
> 
> 赞同：1
> 
> 时间：2012-12-04T12:06:33.587
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, simple-form

我用 simple_form 选择了这个：

```
<%= f.input :theme, :collection => ["#{t('.text_1')}", "#{t('.text_2')}", "#{t('.text_3')}", "#{t('.text_4')}", :value_method => lambda { |n| n } %> 
```

html是：

```
<select class="select required" id="inquiry_theme" name="inquiry[theme]"><option value="">Choose a topic related to your query</option>
<option value="Text1">Text1</option>
<option value="Text2">Text2</option>
<option value="Text3">Text3</option>
<option value="Text4">Text4</option> 
```

我想用范围数字而不是文本设置值，例如：

```
<select class="select required" id="inquiry_theme" name="inquiry[theme]"><option value="">Choose a topic related to your query</option>
<option value="1">Text1</option>
<option value="2">Text2</option>
<option value="3">Text3</option>
<option value="4">Text4</option> 
```

**可以使用 lambda in`:value_method`吗？**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:13:55.910

鉴于您的示例，我认为 using`value_method`有点矫枉过正。

```
<%= f.input :theme, :collection => [[1, "#{t('.text_1')}"], [2, "#{t('.text_2')}"], [3, "#{t('.text_3')}"], [4, "#{t('.text_4')}"]] %> 
```

虽然我会把它写成

```
<%= f.input :theme, :collection: (1..4).map { |i| [i, t(".text_#{i}")] }.unshift([nil, 'Choose a topic related to your query'] %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:19:36.790

根据您的示例输出，我这样写它可能对您有用。

```
<%= f.select :theme,options_for_select((1..4).to_a.map{|x| [x,"Text#{x}"]}.insert(0, "Choose a topic related to your query")) ,:id=>"inquiry_theme" %> 
```

# php - utf-8 bom 和 php 中的标头

> ID：13702522
> 
> 赞同：0
> 
> 时间：2012-12-04T12:07:25.570
> 
> 标签：php, utf-8, http-headers, byte-order-mark

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

当我使用 utf-8 bom 创建我的 php 文件时，header() 函数不起作用，因为 bom 字符是在 http 标头之前发送的。

*   这是否意味着我们不应该在 php 源文件中使用 bom？
*   它是功能还是错误？
*   在使用 utf-8 编码的 php 源文件时，您有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:10:38.363

BOM 是发送到浏览器的实际数据，但是浏览器会忽略它，一旦发送，您将无法发送标头，除非您使用输出缓冲。一般不使用BOM。如果您使用的文本编辑器需要 BOM，则将编辑器更改为不那么过时的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:10:48.447

*   BOM 在 UTF-8 中是无用的。
*   两者都不是。PHP 正在按预期工作。您的文件包含此内容，并且 PHP 按预期工作，因为它首先输出开始`<?php`标记之前的所有数据：

--

```
<byte order mark><?php // code here 
```

--

*   不要使用 BOM。

# ios - 当 UIViewController 因为按下后退按钮而被推到前面时，如何捕捉这一刻？

> ID：13702526
> 
> 赞同：0
> 
> 时间：2012-12-04T12:07:30.063
> 
> 标签：ios, uiviewcontroller

好吧，问题就在标题中：

**当 UIViewController 因为按下后退按钮而被推到前面时，如何捕捉这一刻？**

当 UIViewController 再次出现在前面时，我需要它重新加载列表中的数据。问题是我不想每次视图出现时都这样做，例如当视图首次显示时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:15:31.370

简单的方法是在您的第一个控制器上设置一个标志，当您进入另一个视图时将其设置为 YES 并`viewWillAppear:`检查您是否需要重新加载。

另一个选项，假设您的第二个视图将为视图 A 配置一些东西，是创建一个委托方法，让视图 A 知道它需要重新加载。

第三个选项是使用自定义后退按钮（圆形，而不是后退按钮形状），捕获事件并在您执行任何您想做的事情后手动执行 popViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:59:06.157

然后你创建一个新方法并在视图控制器前面的推送（pop）之前调用它，这个方法也可以帮助你在自身类上重新加载列表:-) 我希望你明白我想说的话当你想重新加载您只需调用该函数和列表的数据 reload 。

# maven - Maven build to generate only changed artifact

> ID：13702531
> 
> 赞同：6
> 
> 时间：2012-12-04T12:08:07.693
> 
> 标签：maven, maven-plugin

In our project, Maven build generates artifacts for different modules i.e. jar, console, car etc in corresponding folder structure.

Everytime we check in the code, the build genarates full new artifacts even if there is only change in "console" module.

Is there any Maven plugin or a way to generate only the artifacts which were changed since last successful build?

For instance, if I have changed the code for "console" module, then the artifact generated should only have console file in its corresponding folder.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:50:08.880

如果你在命令行上，你可以使用

```
mvn -pl moduleToBuild 
```

可以结合：

```
mvn -pl moduleToBuild -am 
```

这还将构建**moduleToBuild**的依赖项。

如果您在 jenkins 之类的 CI 解决方案中，则有一个复选框可以激活此行为。这可以在 Maven 配置部分**Incremental build-only build changed modules**下找到。

您必须在多模块构建的根目录上启动 maven 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:26:53.337

您可能想查看使用[maven reactor 插件](http://maven.apache.org/plugins/maven-reactor-plugin/index.html)的[reactor:make-scm-changes](http://maven.apache.org/plugins/maven-reactor-plugin/make-scm-changes-mojo.html)目标。[这个链接](http://maven.apache.org/plugins/maven-reactor-plugin/examples.html)有关于如何使用它的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-10T06:34:17.647

这是 Ondra Žižka 提到的方法的一个示例，使用 mvn clean install 和 bash。

请注意，它忽略了 pom 打包模块（因为它们通常是子树的根，通常会导致构建额外的、不必要的模块。它还会查找 3 级深度的 pom.xml 文件（为了速度），假设它们都是相同的反应器，但这可以根据您的项目进行调整。

```
find . -maxdepth 3 -name pom.xml | xargs -I{} grep -iL -F "<packaging>pom</packaging>" {} | xargs dirname | grep -v target | sed -e 's/^.[/]*//g' | grep . > /tmp/mvn-modules.txt && git diff --name-only @{u}...HEAD | grep -o -F -f /tmp/mvn-modules.txt | xargs | tr ' ' ',' | xargs -I{} mvn clean install -U -pl {} -amd 
```

在示例中，参考了当前分支与上游相比的更改，但如果这更合适`@{u}...HEAD`，可以将其交换为另一个差异（示例）。`<branchname> master`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-21T08:17:16.800

我一直在寻找可以检查与“上游”版本相比我更改了哪些文件的东西，并构建了所有包含这些文件的 Maven 模块，并且都依赖于它们。

由于`reactor:make-scm-changes`似乎没有这样做，因此一种方法（Linux Bash 方式）是

1.  使用 ( `git diff --name-only master...`)[列出更改的文件，](https://stackoverflow.com/questions/6913263/is-there-a-way-to-see-all-changed-files-on-a-branch-in-git)
2.  [为所有人找到最近`pom.xml`](https://unix.stackexchange.com/questions/6463/find-searching-in-parent-directories-instead-of-subdirectories)的，
3.  去重 ( `... | sort | uniq`),
4.  `--project-list`使用, 和`--also-make`.将其作为列表提供给 Maven

剩下的就是使用管道和函数将它连接在一起。
当然，这假设所有源都在带有 的文件夹中`pom.xml`，这通常是正确的。

# php - Why this submit form "check list" data doesn't send to email with PHP?

> ID：13702535
> 
> 赞同：1
> 
> 时间：2012-12-04T12:08:15.023
> 
> 标签：php, html, forms, email, submit

I am trying to create a check list that allows users to check off each item they want and then send an email to their chosen email. I am using JQueryMobile and I don't know if it's causing any problems, but the page just keeps on loading continuously when I press submit.

This is my HTML code:

```
<form name="emailform" enctype="multipart/form-data" action="form-to-email.php" method="post">
  <div data-role="fieldcontain">
  <label for='name'>Festival name: </label><br>
  <input type="text" name="name">
   <h3>
   Essentials
   </h3>

   <fieldset data-role="controlgroup" data-type="vertical">
    <legend>
    </legend>
    <input name="checkbox1" id="checkbox1" type="checkbox" />
    <label for="checkbox1">
    Tickets
    </label>
    <input name="checkbox2" id="checkbox2" type="checkbox" />
    <label for="checkbox2">
    Parking pass
    </label>
    <input name="checkbox3" id="checkbox3" type="checkbox" />
    <label for="checkbox3">
    Directions
    </label>
    <input name="checkbox4" id="checkbox4" type="checkbox" />
    <label for="checkbox4">
    Cash &amp; Cards
    </label>
    <input name="checkbox5" id="checkbox5" type="checkbox" />
    <label for="checkbox5">
     Keys
    </label>
    </fieldset>

     <label for='email'>Send to Email:</label><br>
     <input type="text" name="email">

     <input name="share" type="submit" value="Share">

     </form> 
```

And this is my PHP:

```
 <?php
    if(!isset($_POST['submit'])){
    if (!$_POST['name'] | !$_POST['email']) 
    {
    echo"<div class='error'>Error<br />You did not fill in a required field, please       review your form and correct the missing information.</div>";
    }
    }
    $name = $_POST['name'];
    $email = $_POST['email'];
    $checkbox1 = $_POST['checkbox1'];

    $email_from = "Application";
    $email_subject = $name;
    $email_body = "You have received a new checklist via App.\n".
    "Here is the checklist so far:\n $checkbox1".

    $headers = "From: $email_from \r\n";
    mail($email, $email_subject,$email_body,$headers);
    header('Location: index.html');

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:26:53.707

如果您尝试从 localhost 发送电子邮件，那么您肯定会遇到此错误，因为默认情况下没有邮件设置。但是，您可以在您的计算机上安装一个测试邮件服务器来测试来自 localhost 的电子邮件。

如果您从实时服务器发送电子邮件，那么您需要按照本教程来克服代码中可能存在的任何问题：http: [//www.w3schools.com/php/php_mail.asp](http://www.w3schools.com/php/php_mail.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:39:21.477

我认为您应该通过 AJAX 与 jQuery 进行通信，在这种情况下您不应该发送标头。您还应该注意复选框值是 TRUE/FALSE，所以

“您已通过 App 收到一份新的清单。”。“这是迄今为止的清单：”。

# c++ - 如何通过套接字发送存储在流中的图像？

> ID：13702536
> 
> 赞同：0
> 
> 时间：2012-12-04T12:08:15.433
> 
> 标签：c++, windows, visual-studio, sockets, istream

如何通过套接字连接在 IStream 接口中发送使用 GdipSaveImageToStream() 存储的图像？

send() 函数需要一个 char 数组，但我不知道如何将数据从 IStream 提取到 char 数组。

使用 memcpy() 会是个好主意吗？将数据存储在 char 数组中并在另一端重建流？

[编辑]

我尝试使用 read 但我错过了一些东西。

```
//stream to char array, to send
STATSTG myStreamStats;
ULONG bytesSaved;
myStream->Stat(&myStreamStats, 0);
char* streamData = new char[myStreamStats.cbSize.QuadPart];
if(myStream->Read(streamData, myStreamStats.cbSize.QuadPart, &bytesSaved) == S_OK)
    cout<<"OK!"<<endl;
else
    cout<<"Not OK!"<<endl;

//char array to stream, to save
if(myStreamR->Write(streamData, myStreamStats.cbSize.QuadPart, &bytesSaved) == S_OK)
    cout<<"OK!"<<endl;
else
    cout<<"Not OK!"<<endl;

myImage = Image::FromStream(myStreamR);
myImage->Save(lpszFilename, &imageCLSID, NULL); 
```

[注1：]程序编译并运行，但我没有得到我的图像。如果我使用原始的“myStream”而不是“myStreamR”，它是由从原始流中读取的字符数组构造的，我会得到它。

[注意2：] 输出是两个“OK！”，这意味着所有字节都被复制到数组中，并且都被粘贴到新的流中。但是，我检查了 savedBytes，我发现在 read() 之后它是 0（不好），而在 write() 之后它等于我给的流大小。那么，如果什么都没读，为什么 read() 会给我一个“S_OK”标志呢？

[注3：]我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:12:08.590

正如 Joachim Pileborg 和 Zane 所指出的，使用读写确实是正确的方法。

但是，请记住，每次使用流时，查找光标都会改变位置，因此在读取之前和写入之前，使用 Seek 方法将光标返回到流的开头。

例子：

```
LARGE_INTEGER li;
li.QuadPart = 0;
myStream->Seek(li, STREAM_SEEK_SET, NULL); 
```

# android - cocos2d-x v 2.0.4 致命异常 GLThread 在 Android 模拟器上运行时

> ID：13702538
> 
> 赞同：6
> 
> 时间：2012-12-04T12:08:20.470
> 
> 标签：android, opengl-es, android-emulator, cocos2d-x

我创建 cocos2d-x 应用程序我正在使用 cocos2d-2.0-x-2.0.4 尝试在 Android 模拟器上从 Eclipse 运行应用程序时出错。

```
12-04 08:03:13.792: E/AndroidRuntime(1081): FATAL EXCEPTION: GLThread 105
12-04 08:03:13.792: E/AndroidRuntime(1081): java.lang.IllegalArgumentException: No config chosen
12-04 08:03:13.792: E/AndroidRuntime(1081): at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:874)
12-04 08:03:13.792: E/AndroidRuntime(1081): at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1024)
12-04 08:03:13.792: E/AndroidRuntime(1081): at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1401)
12-04 08:03:13.792: E/AndroidRuntime(1081): at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

我设置

```
<uses-feature android:glEsVersion="0x00020000" android:required="true" /> 
```

在清单中。我为 AVD 打开了 gpu 仿真。我为 AVD 使用 API 级别 17 我在 cocos2d-x 论坛上找到了有关该问题的讨论：http: [//www.cocos2d-x.org/boards/6/topics/12563](http://www.cocos2d-x.org/boards/6/topics/12563) 我已经尝试了那里提到的所有内容，但没有成功。这个问题的原因是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T09:31:44.490

我通过添加解决了这个问题

```
gLSurfaceView.setEGLConfigChooser(8 , 8, 8, 8, 16, 0); 
```

前

```
gLSurfaceView.setCocos2dxRenderer(new Cocos2dxRenderer()); 
```

在 Cocos2dxActivity.java

现在我的应用程序在模拟器上运行。

我在此链接上的帖子包含带有 AVD 设置的屏幕截图：

[http://www.cocos2d-x.org/boards/6/topics/12563?r=19274#message-19274](http://www.cocos2d-x.org/boards/6/topics/12563?r=19274#message-19274)

# php - 我将 php 变量传递给 javascript。有没有更好的方法来构建它？

> ID：13702539
> 
> 赞同：0
> 
> 时间：2012-12-04T12:08:23.147
> 
> 标签：php, javascript, styles

所以我正在写一个有一系列老虎机的网页。您按下特定的老虎机，它会告诉您您赢了（或输了）多少。我想大量更改这些值，因此我使用 php 从文件中读取它们，这样我就可以轻松更改文件以更改老虎机的行为。（文件只是一堆数字，例如“14、-3、6、9、-12等”

现在老虎机的工作方式，正如您可以想象的那样，当您按下机器时，老虎机上会出现一个值，指示您获得的奖金。然后通过添加刚刚出现在老虎机中的值来更新运行总计。我正在使用 javascript 来实现这种效果。但是为了改变页面上元素的值，我需要知道用什么来替换元素。所以我正在考虑将所有数据发送到 javascript 方面。

但我多次读到这是不好的做法，人们通常会问“你到底想做什么？”。所以这就是我真正想做的事情，根据服务器上文件中的值操作页面上的值。有没有合适的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:19:55.100

更好的方法当然是 AJAX。您将能够同时使用服务器值和更新页面内容。我更喜欢将 AJAX 与 JQuery 一起使用，因为它可以解决跨浏览器问题，并且还可以更轻松地从服务器获取数据。以下是一些关于在 JQuery 中使用 AJAX 的相当简单的教程：http: [//www.w3schools.com/jquery/jquery_ajax_intro.asp](http://www.w3schools.com/jquery/jquery_ajax_intro.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:19:56.167

我不清楚您的网站是如何运作的。但我认为你可以使用 ajax 来做到这一点。

当用户单击机器时，javascript“在后台”发送请求。也就是使用ajax。然后就可以拿到这个请求返回的数据了。然后更新页面上的数据。看看 Jquery ajax。

# objective-c - Zooming UIView inside a ScrollView via Pinch gesture on a Point

> ID：13702548
> 
> 赞同：0
> 
> 时间：2012-12-04T12:08:47.543
> 
> 标签：objective-c, ios, uitableview, uiscrollview, zooming

Due to some requirements I'm zomming `subview` of UIScrollView with `UIPinchGestureRecognizer` and not using `UIScrollView`'s default zooming. In selector of gesture I resize my `subview` with a factor and reset `contentSize` of `UIScrollView`. It's working perfectly. The problem is that when I resize the `frame` of subview then it's increased or decreased in one direction. I want it to zoomin/zoomout on touched point like in a `UIScrollView` or in Gallery of iOS. How can I achieve this?

# magento - Magento 自定义模块 - 节省产品

> ID：13702549
> 
> 赞同：0
> 
> 时间：2012-12-04T12:08:57.207
> 
> 标签：magento, magento-1.7

这是我几天来一直挑战的事情，我对寻找帮助/解决方案感到相当沮丧——它是如此值得信赖的 StackOverflow！

我在 Magento 1.7 中使用自定义数据库制作了一个自定义模块（包含标题、内容等一些内容），基本上是一个自定义静态块。[我已经实现了此处](https://github.com/andrei-tara/magento-product-selector)可用的产品选择器。

虽然 - 这只是实际的产品选择 - 没有保存功能！

我非常坚持如何保存选定的magento产品-正确/最佳方法是什么？

为了简单起见，我认为要么用逗号分隔 ID/SKU，要么我应该创建一个新的实体类型？关于后者的任何知识/指导都会非常有帮助 - 特别是保存新实体类型的产品。

保存产品的代码会进入`<Module>/controllers/Adminhtml/<Module>Controller.php -> saveAction()`还是其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:03:55.113

在`<Module>/controllers/Adminhtml/<Module>Controller.php`

```
public function saveAction()
{
    if ( $this->getRequest()->getPost() ) {
        try {
            $postData = $this->getRequest()->getPost();

            Mage::getModel('productsselector/productsselector')->setId($this->getRequest()->getParam('id'))
                ->setProductSku($postData['product_sku'])
                ...
                ->save();

            Mage::getSingleton('adminhtml/session')->addSuccess(Mage::helper('adminhtml')->__('Item was successfully saved'));
            Mage::getSingleton('adminhtml/session')->setProductsselectorData(false);

            $this->_redirect('*/*/');
            return;
        } catch (Exception $e) {
            Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
            Mage::getSingleton('adminhtml/session')->setLocalshipData($this->getRequest()->getPost());
            $this->_redirect('*/*/edit', array('id' => $this->getRequest()->getParam('id')));
            return;
        }
    }
    $this->_redirect('*/*/');
} 
```

阅读更多@[带有自定义数据库表的自定义模块](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/custom_module_with_custom_database_table)

# php - php 数组键=> 值搜索

> ID：13702551
> 
> 赞同：3
> 
> 时间：2012-12-04T12:09:01.290
> 
> 标签：php

* * *

嗨，我对 php 相当陌生。

我有一个数组

$arr = array(0 => array('GID'=>1,'groupname'=>"cat1",'members'=>array(0=>array('mid'=>11,'mname'=> 'wwww'),1=>array('mid'=>12,'mname'=>'wswww'))), 1 => array('GID'=>2,'groupname'=>"cat2", 'members'=>array(0=>array('mid'=>13,'mname'=>'gggwwww'),1=>array('mid'=>14,'mname'=>'wvvwww') )), 2 => array('GID'=>3,'groupname'=>"cat1",'members'=>array(0=>array('mid'=>15,'mname'=>'wwddsww ')),1=>array('mid'=>16,'mname'=>'wwwdddw')));

```
 ie...,I have GID,groupname,mid(member id),mname(member name).I want to insert a new mid and mname into a group if it is already in the array ,if it is not exists then create a new subarray with these elements..I also need to check a member id(mid) is also present.........................I used the code but its not working fine............. if (!empty($evntGroup)) {

            foreach ($evntGroup as $k => $group) {

                if ($group['GID'] == $group_id) {
                    foreach($group as $j=> $mem){

                    if($mem['mid'] == $mem_id){

                        unset($evntGroup[$k]['members'][$j]['mid']);
                        unset($evntGroup[$k]['members'][$j]['mname']);
                    }
                    else{

                    $evntGroup[$k]['members'][] = array(
                        'mid' => $mem_id,
                        'mname' => $mem_name);

                    }}
                } else {

                    $evntGroup[] = array(
                        'GID' => $group_id,
                        'groupname' => $Group['event_group_name'],
                        'members' => array(
                            0 => array(
                                'mid' => $mem_id,
                                'mname' => $mem_name
                            )
                        )
                    );

                }

            }
        } else {

            $evntGroup[$i]['GID'] = $group_id;
            $evntGroup[$i]['groupname'] = $Group['event_group_name'];
            $evntGroup[$i]['members'][] = array(
                'mid' => $mem_id,
                'mname' => $mem_name);
            $i++;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:12:25.917

以函数的形式，最简单的解决方案如下所示：

```
function isGidInArray($arr, $val) {
    foreach($arr as $cur) {
        if($cur['GID'] == $val)
            return true;
    }
    return false;
} 
```

您已经更新了问题以指定在找到指定的 GID 时要执行的操作，但这只是对循环的一个微不足道的补充：

```
function doSomethingIfGidInArray($arr, $val) {
    foreach($arr as $cur) {
        if($cur['GID'] == $val) {
            doSomething();
            break; //Assuming you only expect one instance of the passed value - stop searching after it's found
        }
    }
} 
```

不幸的是，没有原生 PHP 数组函数可以检索父数组中每个数组的相同索引。我经常想要这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:13:26.947

如果 GID 等于 3，这样的东西会匹配：

```
foreach( $arr as $item ) {
  if( $item['GID'] == 3 ) {
     // matches
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:20:11.627

有代码

```
function updateByGid(&$array,$gid,$groupname,$mid,$mname) {
    //For each element of the array
    foreach ($array as $ii => $elem) {
        //If GID has the same value
        if ($elem['GID'] == $gid) {
            //Insert new member
            $array[$ii]['members'][]=array(
                        'mid'=>$mid,
                        'mname'=>$mname);
            //Found!
            return 0;
        }
    }       
    //If not found, create new
    $array[]=array(
            'GID'=>$gid,
            'groupname'=>$groupname,
            'members'=>array(
                0=>array(
                    'mid'=>$mid,
                    'mname'=>$mname
                )
            )
    );

    return 0;
} 
```

# javascript - JS 中超过 700 毫秒的 800 万次迭代可以吗？如何加快速度？

> ID：13702552
> 
> 赞同：1
> 
> 时间：2012-12-04T12:09:04.670
> 
> 标签：javascript, performance

我有一个游戏并初始化一个 2000 x 4000 块的地图。它仅在 onLoad 上运行一次，需要大约 700 毫秒。我怎样才能加快速度？其他逻辑取决于这张地图。这是代码：

```
var start = new Date();
var g = {};
g.world = { h:2000, w:4000, cellInfo: [] };
var i, j,
    world = g.world,
    hlim = world.h,
    wlim = world.w,
    cellInfo = world.cellInfo;
for ( i = hlim; i; i--) {
    cellInfo[i] = [];
    for (j = wlim; j; j--) {
        cellInfo[i][j] = 1;
    }
}
g.world.cellInfo = cellInfo;
alert(new Date() - start);​ 
```

这是小提琴：http: [//jsfiddle.net/NSX9z/](http://jsfiddle.net/NSX9z/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:16:28.220

几个选项供您选择：

### 惰性初始化

加快速度的最佳选择是使用延迟初始化。例如，与其初始化所有 800 万个插槽，不如让依赖它们的代码在它们不存在时处理它。例如，获取一个单元格

```
function getCell(x, y) {
    var row, cell;

    row = cellInfo[x];
    if (!row) {
        row = cellInfo[x] = [];
    }

    cell = row[y];
    if (typeof cell === "undefined") {
        cell = row[y] = 1; // 1 appears to be the default value
    }

    return cell;
} 
```

...和类似的`setCell`. 这分散了初始化。当然，这意味着事情会稍微慢一些，尽管不太可能有明显的差异。

### 阵列克隆

如果你不这样做，另一种选择是创建一次 4,000 槽数组，然后克隆它而不是手动创建它，希望在 JavaScript 引擎中完成工作比自己执行实际循环更快：

```
// ...
var the4k = [];
// ...build it...
// Now use it for one row and clone it for the others
cellInfo[hlim] = the4k;
for ( i = hlim - 1; i; i--) {
    cellInfo[i] = the4k.slice(0);
} 
```

阵列克隆对我来说[*大大*](http://jsfiddle.net/NSX9z/4/)[加快了速度](http://jsfiddle.net/NSX9z/4/)*，Chrome 从 ~780ms 到 ~130ms，IE9 从 ~530ms 到 ~50ms。*

 *另一个需要考虑的问题是，在 IE8 及更早版本上，“慢速脚本警告”不是基于*时间*，而是基于*操作次数*。你的小提琴给了我 IE8 上的慢速脚本警告。我的没有。

不过，IE8 支持惰性初始化，因为即使是我的小提琴版本也需要将近**9 秒的时间才能运行。***

# ios - is it possible to use something like "reloadData" between 2 scroll views in iOS to keep the data loaded efficiently?

> ID：13702554
> 
> 赞同：1
> 
> 时间：2012-12-04T12:09:05.280
> 
> 标签：ios, view, scroll, scrollview, reloaddata

I have 2 scroll views. When click one of the buttons in the first Scroll view, some images related to this button will be retrieves from a plist and loaded into the second Scroll view.Is it possible to use something like "reloadData" between the 2 scroll views in iOS to keep the data loaded efficiently? Customers may click the buttons in the first Scroll view frequently, so we have to consider its efficiency and low system cost. Some sample code is appreciated. thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:02:39.233

您只需简单地创建两个数组来保存两个滚动视图的数据并创建一个清空滚动视图并将所有数据再次添加到（两个）滚动视图中的方法，如果您想删除任何元素或数据，那么您可以从滚动视图中删除以及从保存该滚动视图数据的数组中删除，然后您只需调用该函数并重新加载您的滚动视图:-)

# ios - 使用 CGPathAddArcToPoint 构建路径的 CAKeyframeAnimation 不起作用

> ID：13702555
> 
> 赞同：0
> 
> 时间：2012-12-04T12:09:09.550
> 
> 标签：ios, core-animation, calayer, caanimation, cakeyframeanimation

我有一个 keyframeAnimation 并定义了一个路径，但动画不起作用。

你看有什么不对吗？:S

这是代码：

```
CAKeyframeAnimation *animKF = [CAKeyframeAnimation animationWithKeyPath:@"position"];

CGMutablePathRef animationPath = CGPathCreateMutable();

CGPathMoveToPoint(animationPath, NULL, 300, 100);

CGPathAddArcToPoint(animationPath, NULL, 300, 100, 800, 500, 500);

animKF.path = animationPath;

animKF.duration = 3;

animKF.rotationMode =  kCAAnimationRotateAuto;

[imageView.layer addAnimation:animKF forKey:@"keyframe"]; 
```

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:33:04.973

您可能认为这`CGPathMoveToPoint()`是真正“移动”要点的方法，抱歉并非如此。我猜您的意图是为“路径”属性设置动画。因此，您应该创建几个（在您的情况下为 3 个）`CGMutablePathRef`对象作为`keyframe`. 然后打电话

```
[animKF setValues: @[path1,path2,path3]]; 
```

# mysql - NHibernate Profiler 不显示查询计划

> ID：13702562
> 
> 赞同：2
> 
> 时间：2012-12-04T12:09:37.133
> 
> 标签：mysql, nhibernate, mysql.data, nhibernate-profiler

我的应用程序使用 NHibernate 连接到 MySQL 数据库。分析工作正常，但底部的链接（“查看此语句产生的 x 行”和“此语句的查询计划”）不起作用。当我单击查询计划语句时，没有任何反应。当我单击“查看 x 行”链接时，会打开一个不显示任何内容的新窗口。当我单击“编辑连接”并选择正确的 MySQL 连接字符串时，出现以下错误：“找不到连接类型 mysql.data.mysqlclient.mysqlconnection”我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:09:37.133

问题是 NHibernate Profiler 不知道路径`MySql.Data.dll`，因此无法显示结果或查询计划。解决方案非常简单。在 Edit Connection 窗口中，您必须`MySql.Data.dll`通过单击**Browse**来选择文件。选择它后，单击“**确定**” ，一切正常。

# javascript - 如何创建自定义事件处理程序

> ID：13702564
> 
> 赞同：0
> 
> 时间：2012-12-04T12:09:43.597
> 
> 标签：javascript, jquery

如何创建自定义事件处理程序并将一些默认变量放入其中？

# 范围一：

```
var a = 'weee';
var b = 'hmm';
var click = function(){
    alert(a+' '+b);
} 
```

# 范围B：

```
$('#btn').click = click; 
```

单击按钮时 var`a`并且`b`未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:11:03.093

简单地尝试

```
$('#btn').click(click); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:11:09.613

采用

```
$('#btn').click(click); 
```

或者

```
var a = 'weee';
var b = 'hmm';
$('#btn').click(function(){
    alert(a+' '+b);
}); 
```

或者

```
$('#btn').click(function(){
    var a = 'weee';
    var b = 'hmm';
    alert(a+' '+b);
}); 
```

当你这样做的问题

```
$('#btn').click = click; 
```

是不是将您的函数绑定到事件，而是用您自己的函数替换[此处](http://api.jquery.com/click/)定义`"click"`的 jQuery函数。`click`

# regex - 仅接受数字的正则表达式，应以数字 8 开头

> ID：13702568
> 
> 赞同：0
> 
> 时间：2012-12-04T12:09:59.107
> 
> 标签：regex, extjs

我需要一个验证 extjs 中的文本字段的正则表达式。

**文本字段应仅接受数字，数字应以8**开头

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:17:30.457

假设 8 本身是一个有效条目，您希望将此属性添加到您的文本字段配置中。

```
regex: /^8\d*$/ 
```

如果 8 无效，则将其替换`*`为`+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:11:22.560

试试`8\d+`- 它选择数字 8 后跟 0 个或更多小数。**

# c# - 设置组合框项和数据源

> ID：13702570
> 
> 赞同：1
> 
> 时间：2012-12-04T12:09:59.727
> 
> 标签：c#, winforms, visual-studio-2010

我遇到了一个问题，每次构建我的解决方案时，编译都会成功，但是当我运行我的程序时，它会出错，因为表单 Designer.cs 文件已自动添加了我的自定义组合框的数据源；导致异常说明

> 设置 DataSource 属性时无法修改项目集合。

关于可能是什么问题的任何想法？我尝试在初始化组件方法之后设置数据源，但这会导致不同的错误，因为单元类型为空。

数据源的类型在控件的属性中设置，下面是相关代码

*form.Designer.cs（这是为您生成的，而不是名为设计器的自定义 cs 文件）*

```
// 
// cmbWheelUnitCR
// 
this.cmbWheelUnitCR.DataSource = ((object)(resources.GetObject("cmbWheelUnitCR.DataSource")));
this.cmbWheelUnitCR.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
this.cmbWheelUnitCR.FormattingEnabled = true;
this.cmbWheelUnitCR.Items.AddRange(new object[] {
"mm",
"yd"}); 
```

*我的自定义组合框*

```
public string UnitType
{
   get { return m_unitType; }
   set { m_unitType = value;
   this.DataSource = Units.Instance.UnitTypes(m_unitType);}
}
public UnitComboBox()
{
   InitializeComponent();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:44:32.823

我能够通过在覆盖 onLoad 事件中设置数据源来意外解决这个问题。

# cakephp - 没有url编码的cakephp链接

> ID：13702577
> 
> 赞同：4
> 
> 时间：2012-12-04T12:10:14.470
> 
> 标签：cakephp

CakePHP 2.2.3

我有这样的事情：

```
$this->Html->link('here',
      array(
        'controller' => 'biz',
        'action' => 'search',
        'range' => '1+3'),
      array('escape' => false)); 
```

当我单击此链接时，网址将被编码如下：

```
/biz/search/range:1%2B3 
```

但是我需要

```
/biz/search/range:1+3 
```

有什么方法可以关闭 url 编码，或者我应该更改解析命名参数的控制器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:27:00.003

尝试使用：

```
    $this->Html->link('这里',
      大批（
        '控制器' => '商务'，
        '动作' => '搜索',
        '范围' => '1\+3'),
      数组（'转义' => '\'））；

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T12:44:23.760

你可以试试这个吗

```
//search.ctp
echo $this->Html->link('here', '/biz/search/range:1+3'); 
```

在控制器中接收这个

```
 //BizController.php
 public function search() {
    var_dump($this->request->params['named']);
    // do something     
 } 
```

# javascript - 提交时调用的动态函数

> ID：13702578
> 
> 赞同：0
> 
> 时间：2012-12-04T12:10:17.460
> 
> 标签：javascript, function, validation

我想验证一个表单，但我想要 9 个不同的函数来验证表单。使用哪个验证功能应由屏幕上的滑块确定，或者由滑块控制的跨度“范围”中的值确定）

如果我只使用一个函数来执行以下操作，我可以很好地验证表单：

```
<script>
    function validateFormMethod1() {
        // do my validation stuff here
    }
</script>

<form method="post" action="whatevermailscript.php"name="GuestInfo" onSubmit="return validateFormMethod1();">
    <input type="submit" value="Send" name="submit" />
    <span>Guests</span>
    <span id="range">1</span>
    <input id="scaleSlider" type="range" value="1" min="1"  max="9" step="1" onchange="showValue(this.value) ; showOrHide(this.value)"/> 
```

但是我该如何添加这个以便 if`range.value==2` `validateFormMethod2`会被调用而不是`validateFormMethod1`？

* * *

更新 3：

```
<script>

   function validateFormMethod0() {

    }  

    function validateFormMethod1() {
       window.alert("Method 1");
       return false;
    }

    function validateFormMethod2() {
        window.alert("Method 2");
        return false;
    }

    function validateFormMethod3() {
      window.alert("Method 3.");
      return false;
    }

    function validateFormMethod4() {
       window.alert("Method 4.");
       return true;
    }

    var validationFunctions = [
    validateFormMethod0,
   validateFormMethod1,
   validateFormMethod2,
   validateFormMethod3,
    validateFormMethod4

];
    function validateForm() {    

     var range = document.getElementById("range");

    validationFunctions[range.innerHTML]();
}

</script> 
```

仍然不能完全按照建议工作，但这符合我的目的：

```
 function validateForm()
{

 var range = document.getElementById("range");

   if (range.innerHTML == "1")
    {
        // do my validation stuff for case one here

    }

   if (range.innerHTML == "2")
    {
        // do my validation stuff for case two here

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:14:20.447

使用函数数组。

```
var validationFunctions = [
   validateFormMethod1,
   validateFormMethod2,
   validateFormMethod3,
   ....
];

function validateForm() {        
    validationFunctions[range.value]();
} 
```

# php - 可以从 iframe 中提取数据并通过 ajax 发送它们吗？

> ID：13702584
> 
> 赞同：0
> 
> 时间：2012-12-04T12:10:46.747
> 
> 标签：php, javascript, ajax, iframe

我创建了一个简单的链接生成器，但我有一个小问题。

现在它的工作原理是这样的：Url 地址 => [通过 curl 发布到服务器并解析页面] => 直接链接。

问题是，链接被分配给服务器 ip，所以用户不能使用它们。所以我想出了通过用户浏览器从 iframe 中提取数据并使用 ajax 将它们发送到服务器的想法。这样的事情有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:57:05.737

只有当 iframe 在域上时才有可能。

使用`html5`您有沙盒选项`allow-same-origin`，但在大多数浏览器中不可用。

在这里阅读更多：http: [//www.w3schools.com/html5/att_iframe_sandbox.asp](http://www.w3schools.com/html5/att_iframe_sandbox.asp)

# mysql - 如果 mysql 列有数据，则返回 1 或 0

> ID：13702586
> 
> 赞同：0
> 
> 时间：2012-12-04T12:10:47.910
> 
> 标签：mysql, pdo

如果给定列有任何数据，我想返回 1 或 0（或 true 或 false，或 true 或 null，或任何最简单的）。无论该字段是否有数据，其他列仍然会被返回。下面是正确的方法吗？谢谢

```
SELECT varchar_field IS NOT NULL, some_other_fields 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:13:30.827

您可以使用`case`声明

```
CASE WHEN varchar_field is null 
THEN 1
ELSE 0
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:12:35.353

尝试

```
SELECT ISNULL(varchar_field), some_other_fields 
```

如果你想要 0 而`varchar_field`不是`null`

```
SELECT NOT ISNULL(varchar_field), some_other_fields 
```

如果你想要 1 当`varchar_field`不是`null`

# regex - 正则表达式：数字重复 7 或 9 次

> ID：13702600
> 
> 赞同：2
> 
> 时间：2012-12-04T12:11:36.153
> 
> 标签：regex

它可能很简单，但我在这里挣扎......我需要一个正则表达式来表示重复的数字，如果字符串长度为 7 或 9 位，它应该匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:13:22.373

试试`(\d{7}|\d{9})`。这样你就不会匹配一个八位数的长字符串。

编辑 I：正如 Alex 提出的（见评论）`\d{7}(\d{2})?`甚至可能表现更好。

编辑二：好的，重新阅读问题，得到问题。`\D\d{7}(\d{2})?\D`应该这样做。这也不匹配 8 位数字中的 7 位数字。

编辑 III：或使用 M42 建议的单词边界

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:20:31.753

怎么样：

```
\b\d{7}(?:\d\d)?\b 
```

单词边界确保您只有 7 或 9 位数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:13:32.287

试试这个。这是针对 C# 的。但它应该适用于其他语言。

```
(\d{7})|(\d{9}) 
```

这是它的工作原理：

| 表示或

{7} 表示匹配 7 次

\d 代表任何数字

# wordpress - 将 wordpress 网站中的锚标记链接到 wordpress 页面

> ID：13702601
> 
> 赞同：0
> 
> 时间：2012-12-04T12:11:37.300
> 
> 标签：wordpress

我正在尝试将静态页面的网站移至 wordpress。在主页上的主导航菜单中，如何编辑导航菜单，以便当我单击链接时，用户也会被定向到其他静态 html 页面？我知道wordpress中的页面在功能上是相似的，那么我该如何将它们的html代码放在wordpress中的这些页面中呢？一直在尝试，但不知道该怎么做。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:53:32.290

您可以通过菜单编辑器进行操作...

您可以将链接添加到任何您想要的地方。

如果您希望务实地这样做，这里有一个解释：[https ://wordpress.stackexchange.com/questions/44736/programmatically-add-a-navigation-menu-and-menu-items](https://wordpress.stackexchange.com/questions/44736/programmatically-add-a-navigation-menu-and-menu-items)

# functional-programming - 为什么 **let (+) xyz = x + y + z in 5+6 7** 是错误的？

> ID：13702603
> 
> 赞同：1
> 
> 时间：2012-12-04T12:11:41.503
> 
> 标签：functional-programming, ocaml

如标题所示：

**让 (+) xyz = x + y + z 在 5+6 7**

为什么这个表达是错误的？

错误说`Error: This expression is not a function; it cannot be applied`。但我看到的是一个函数，它只是重新定义了`+`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:13:57.133

因为您尝试`6`使用参数调用`7`而`6`不是函数。尝试

```
let (+) x y z = x + y + z in (5 + 6) 7 
```

# opengl - gluLookAt 故障

> ID：13702606
> 
> 赞同：1
> 
> 时间：2012-12-04T12:11:58.600
> 
> 标签：opengl, glulookat

我画了一个由 2 个切线球体组成的对象，它本身与墙相切（下图）。使用 gluLookAt()，我将相机设置在 x 点（第一个球体中心），看着 y 点（第二个球体中心），所以实际上我沿着墙壁看到。*但是，我可以在墙内*看到一点（一些']'）。

```
 [ ]
(x)[ ]
(y)[ ]
   [ ] 
```

有谁知道是什么问题？

观察：如果我将球体从墙壁移开一点，故障就会消失，但是我不明白为什么当球体非常靠近墙壁时它会出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:43:37.800

对我来说，这听起来像是一个剪辑伪影——相机离墙壁有多远，近剪辑平面在哪里？

如果剪裁平面足够远以延伸到墙壁中，则墙壁将被剪裁，您将看到（或看到）它。

# mysql - 将 MySQL 转换为 SQL Server

> ID：13702609
> 
> 赞同：2
> 
> 时间：2012-12-04T12:12:03.040
> 
> 标签：mysql, sql-server

我正在尝试运行以下查询（针对 Foodmart 2000），它在 MySQL 上运行良好。在 SQL Server 2005 上，我得到的只是“' 附近的语法错误”消息。

```
SELECT * FROM ((SELECT COUNT(state_province) AS 'WA'
                FROM customer c1
                WHERE c1.state_province LIKE 'WA'
                GROUP BY c1.state_province) as t1,
               (SELECT COUNT(state_province) AS 'OR'
                FROM customer c1
                WHERE c1.state_province LIKE 'OR'
                GROUP BY c1.state_province) as t2,
               (SELECT COUNT(state_province) AS 'CA'
                FROM customer c1
                WHERE c1.state_province LIKE 'CA'
                GROUP BY c1.state_province) as t3); 
```

究竟是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:21:02.813

您缺少别名：

```
SELECT * 
FROM 
(
  select *
  from 
  (SELECT COUNT(state_province) AS 'WA'
   FROM customer c1
   WHERE c1.state_province LIKE 'WA'
   GROUP BY c1.state_province) as t1,
  (SELECT COUNT(state_province) AS 'OR'
   FROM customer c1
   WHERE c1.state_province LIKE 'OR'
   GROUP BY c1.state_province) as t2,
   (SELECT COUNT(state_province) AS 'CA'
    FROM customer c1
    WHERE c1.state_province LIKE 'CA'
    GROUP BY c1.state_province) as t3
) src;  -- < add this alias 
```

您**必须**在所有派生表和子查询上都有一个别名。

您还可以`count`通过以下方式使用 @Kaf's 的一个版本：

```
SELECT count(CASE WHEN state_province LIKE 'WA' THEN 1 ELSE null END) AS 'WA',
       count(CASE WHEN state_province LIKE 'OR' THEN 1 ELSE null END) AS 'OR',
       count(CASE WHEN state_province LIKE 'CA' THEN 1 ELSE null END) AS 'CA'
FROM customer 
```

见[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!6/cc7b9/30)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:26:56.050

```
SELECT * FROM (Select (SELECT COUNT(state_province) AS 'WA'
                FROM customer c1
                WHERE c1.state_province LIKE 'WA'
                GROUP BY c1.state_province) as t1,
               (SELECT COUNT(state_province) AS 'OR'
                FROM customer c1
                WHERE c1.state_province LIKE 'OR'
                GROUP BY c1.state_province) as t2,
               (SELECT COUNT(state_province) AS 'CA'
                FROM customer c1
                WHERE c1.state_province LIKE 'CA'
                GROUP BY c1.state_province) as t3) a ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:29:02.923

试试这个; 单次`SELECT`使用`SUM`而不是`COUNT`

```
SELECT SUM(CASE WHEN state_province LIKE 'WA' THEN 1 ELSE 0 END) AS 'WA',
       SUM(CASE WHEN state_province LIKE 'OR' THEN 1 ELSE 0 END) AS 'OR',
       SUM(CASE WHEN state_province LIKE 'CA' THEN 1 ELSE 0 END) AS 'CA'
FROM customer --c1
--GROUP BY c1.state_province 
```

**编辑：**工作演示，[这里的 SQL Fiddle](http://www.sqlfiddle.com/#!6/cc7b9/15)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:41:39.223

只需省略子选择周围的大括号并删除`group by`，它们是不必要的

```
SELECT * FROM (SELECT COUNT(state_province) AS 'WA'
               FROM customer c1
               WHERE c1.state_province LIKE 'WA') as t1,
              (SELECT COUNT(state_province) AS 'OR'
               FROM customer c1
               WHERE c1.state_province LIKE 'OR') as t2,
              (SELECT COUNT(state_province) AS 'CA'
               FROM customer c1
               WHERE c1.state_province LIKE 'CA') as t3; 
```

请参阅[SQL Fiddle](http://www.sqlfiddle.com/#!6/cc7b9/20/0)进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:46:05.283

我宁愿`PIVOT`我的数据

```
SELECT [WA] AS [WA], [OR] AS [OR], [CA] AS [CA] FROM
(SELECT state_province FROM customer) C
PIVOT
(
  COUNT(C.state_province) FOR state_province IN ([WA],[OR],[CA])
) AS pivoted 
```

[Fiddle here](http://www.sqlfiddle.com/#!6/56079/3)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T12:46:12.060

Well, first of all, thanks for all the suggestions. All of you were right, I was missing an alias. Also, as it turns out, I had to add a "use foodmart2000" before the statement. Stupid me :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T12:46:31.473

@bluefeet and @bummi are extremely close. The issue is that you can't use the `as` keyword with table aliases in SQL Server:

```
SELECT * 
FROM 
(
  (SELECT COUNT(state_province) AS 'WA'
   FROM customer c1
   WHERE c1.state_province LIKE 'WA'
   GROUP BY c1.state_province) t1,
  (SELECT COUNT(state_province) AS 'OR'
   FROM customer c1
   WHERE c1.state_province LIKE 'OR'
   GROUP BY c1.state_province) t2,
   (SELECT COUNT(state_province) AS 'CA'
    FROM customer c1
    WHERE c1.state_province LIKE 'CA'
    GROUP BY c1.state_province) t3
) src; 
```

You will probably get better performance from @kaf's example, however.

# c++ - 为什么智能指针没有转换运算符回到基指针？

> ID：13702623
> 
> 赞同：2
> 
> 时间：2012-12-04T12:13:18.157
> 
> 标签：c++, smart-pointers, scoped-ptr

如果经常发现自己使用这样的代码：

```
boost::scoped_ptr<TFoo> f(new TFoo);

Bar(f.get());  // call legacy or 3rd party function : void Bar (TFoo *) 
```

现在，我认为智能指针可以轻松地将隐式转换运算符定义回“原始”指针类型，这将允许该代码仍然有效，并简化旧代码的“智能”

```
Bar(f); 
```

但是，他们没有——或者至少，不是我找到的那些。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T12:15:03.680

IMO 隐式转换是 C++ 中万恶之源，也是最难追踪的错误之一。

最好不要依赖它们——你无法预测所有行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:53:43.907

因为很容易意外绕过智能指针。例如，如果你写： -

```
delete f; 
```

在您的示例中，会发生不好的事情。您的函数可能类似，它们可能会存储自己的指针副本，从而破坏智能指针。至少调用 get 会迫使你思考“这安全吗？”

# iphone - 动态调整 MPMoviePlayerController 的大小

> ID：13702628
> 
> 赞同：2
> 
> 时间：2012-12-04T12:13:25.457
> 
> 标签：iphone, ios, xcode, ipad, mpmovieplayercontroller

如何动态调整 MPMoviePlayerController 的大小以修复 iPhone/iPad 的所有屏幕尺寸（纵向和横向）？

这是我的代码：

```
 - (void)viewDidLoad
{
[super viewDidLoad];

UIBarButtonItem *about = [[UIBarButtonItem alloc] initWithTitle:@"About" style:UIBarButtonItemStyleDone target:self action:@selector(openPopup)];
self.navigationItem.leftBarButtonItem = about;

NSURL *streamURL = [NSURL URLWithString:@"http:/streamUrl/playlist.m3u8"];

_streamPlayer = [[MPMoviePlayerController alloc] initWithContentURL:streamURL];

self.streamPlayer.controlStyle = MPMovieControlStyleEmbedded;

[self.view addSubview: self.streamPlayer.view];

[self.streamPlayer play];

} 
```

我也尝试添加

```
[self.streamPlayer.view setFrame:self.view.bounds]; 
```

但这使得视频不固定在屏幕上，如屏幕截图所示

![在此处输入图像描述](../Images/0257803c95efe8b5adfefba252b118f1.png)

我怎样才能让它修复所有不同设备的所有屏幕？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:14:30.350

我找到的最佳解决方案是使用以下

```
 CGFloat width = [UIScreen mainScreen].bounds.size.width;
 CGFloat height = [UIScreen mainScreen].bounds.size.height;

 [self.streamPlayer.view setFrame:CGRectMake(10, 10 ,height-20, width-70)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:22:31.053

我在 ios 5 中解决了这个问题：

```
AvPlayerLayer *avPlayerLayer =[[AVPlayerLayer alloc]init];
avPlayerLayer = [[AVPlayerLayer playerLayerWithPlayer:avPlayer] retain];
avPlayerLayer.frame = self.playerView.layer.bounds;
avPlayerLayer.transform = CATransform3DMakeRotation(M_PI / 2.0, 0, 0, 1);

[self.playerView.layer addSublayer:avPlayerLayer]; 
```

这里是 avPlayerLayer.transform 你可以在任何方向设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:26:45.873

```
 MPMoviePlayerViewController *moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL fileURLWithPath:contentURL]];
        if (moviePlayerViewController) {

            [self presentMoviePlayerViewControllerAnimated:moviePlayerViewController];
            [moviePlayerViewController.moviePlayer setMovieSourceType:MPMovieSourceTypeFile];

            if ([moviePlayerViewController.moviePlayer respondsToSelector:@selector(setAllowsAirPlay:)]) {
                [moviePlayerViewController.moviePlayer setAllowsAirPlay:YES];
            }

            [[NSNotificationCenter defaultCenter] addObserverForName:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayerViewController queue:nil usingBlock:^(NSNotification *notification) {
                [[NSNotificationCenter defaultCenter] removeObserver:self];
                [self dismissMoviePlayerViewControllerAnimated];
            }];
            [moviePlayerViewController.moviePlayer play];
        } 
```

# java - 检查数组中的多个值

> ID：13702634
> 
> 赞同：1
> 
> 时间：2012-12-04T12:13:42.950
> 
> 标签：java, slick2d

我目前正在尝试在 Slick2d 框架中制作一个小型聊天游戏。框架有一个方法叫做

```
isKeyPressed() 
```

以及我可以用来检查的一长串变量。例如：

```
input.KEY_A 
```

目前，我可以注册一封信的唯一方法是拥有这些检查员的完整列表：

```
if (input.isKeyPressed(input.KEY_A)) {
    this.text += "a";
}
if (input.isKeyPressed(input.KEY_B)) {
    this.text += "b";
}
if (input.isKeyPressed(input.KEY_C)) {
    this.text += "c";
} 
```

有没有更聪明的方法可以做到这一点？

我可以想象我能够以某种方式将 input.KEYS 存储在数组中，但我不确定这是否是正确的方式，甚至不确定如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:16:15.600

您可以使用[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)来存储映射（！） - 假设它们`KEY_XX`是整数，例如，它可能如下所示：

```
private static final Map<Integer, String> mapping = new HashMap<Integer, String> () {{
    put(input.KEY_A, "a");
    put(input.KEY_B, "b");
    //etc
}};

for (Map.Entry<Integer, String> entry : mapping.entrySet()) {
    if (input.isKeyPressed(entry.getKey()) this.text += entry.getValue();
} 
```

如果地图始终相同，则可以将其设为静态，因此您只需填充一次。
注意：如果您有`input.getKeyPressed()`方法或类似的东西，这可能会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:24:19.327

```
 Map<Integer,Character> keyWithLetterMap = new HashMap<Integer,Character>();
 //populates initially the map, for instance: keyWithLetterMap.put(input.KEY_A, 'a');

 for (Map.Entry<Integer, Character> keyWithLetter : keyWithLetterMap.entrySet()) {
     if(input.isKeyPressed(keyWithLetter.getKey())) 
        this.text += keyWithLetter.getValue();
 } 
```

否则，甚至更好的方法，使用`enum`代替`Map`;）

# java - Java中带有命名空间的XPath

> ID：13702637
> 
> 赞同：24
> 
> 时间：2012-12-04T12:13:49.143
> 
> 标签：java, xpath, namespaces

我想获取标签之间的所有内容，但由于 urn: 命名空间，我不知道该怎么做。

```
<urn:ResponseStatus version="1.0" xmlns:urn="urn:camera-org">

<urn:requestURL>/CAMERA/Streaming/status</urn:requestURL>
<urn:statusCode>4</urn:statusCode>
<urn:statusString>Invalid Operation</urn:statusString>
<urn:id>0</urn:id>

</urn:ResponseStatus> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-04T12:24:42.123

1.  简短的回答：使用 XPath `local-name()`。像这样：`xPathFactory.newXPath().compile("//*[local-name()='requestURL']/text()");`将返回`/CAMERA/Streaming/status`
2.  或者，您可以实现一个`NamespaceContext`映射命名空间名称和 URI 的方法，并在查询之前将其设置在 XPath 对象上。
3.  看看这篇[博文](http://blog.davber.com/2006/09/17/xpath-with-namespaces-in-java/)，**更新：**文章下架了，可以在[webarchive上看到](https://web.archive.org/web/20070328212209/http://blog.davber.com/2006/09/17/xpath-with-namespaces-in-java/)

解决方案 1 示例：

```
XPath xpath = XPathFactory.newInstance().newXPath();
String responseStatus = xpath.evaluate("//*[local-name()='ResponseStatus']/text()", document);
System.out.println("-> " + responseStatus); 
```

解决方案 2 示例：

```
// load the Document
Document document = ...;
NamespaceContext ctx = new NamespaceContext() {
    public String getNamespaceURI(String prefix) {
        return prefix.equals("urn") ? "urn:camera-org" : null; 
    }
    public Iterator getPrefixes(String val) {
        return null;
    }
    public String getPrefix(String uri) {
        return null;
    }
};
XPath xpath = XPathFactory.newInstance().newXPath();
xpath.setNamespaceContext(ctx);
String responseStatus = xpath.evaluate("//urn:ResponseStatus/text()", document);
System.out.println("-> " + responseStatus); 
```

**编辑**

这是一个完整的例子，它正确地检索了元素：

```
String xml = "<urn:ResponseStatus version=\"1.0\" xmlns:urn=\"urn:camera-org\">\r\n" + //
        "\r\n" + //
        "<urn:requestURL>/CAMERA/Streaming/status</urn:requestURL>\r\n" + //
        "<urn:statusCode>4</urn:statusCode>\r\n" + //
        "<urn:statusString>Invalid Operation</urn:statusString>\r\n" + //
        "<urn:id>0</urn:id>\r\n" + //
        "\r\n" + //
        "</urn:ResponseStatus>";
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setNamespaceAware(true);
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse(new java.io.ByteArrayInputStream(xml.getBytes()));
XPath xpath = XPathFactory.newInstance().newXPath();
xpath.setNamespaceContext(new NamespaceContext() {
    public String getNamespaceURI(String prefix) {
        return prefix.equals("urn") ? "urn:camera-org" : null;
    }

    public Iterator<?> getPrefixes(String val) {
        return null;
    }

    public String getPrefix(String uri) {
        return null;
    }
});
XPathExpression expr = xpath.compile("//urn:ResponseStatus");
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    Node currentItem = nodes.item(i);
    System.out.println("found node -> " + currentItem.getLocalName() + " (namespace: " + currentItem.getNamespaceURI() + ")");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T07:36:14.580

**带有[命名空间](http://docs.oracle.com/javase/7/docs/api/javax/xml/namespace/NamespaceContext.html)的XML [xpath](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-summary.html)**

*简单的 XML*

```
String namespaceXML = "<?xml version='1.0' ?><information><person id='1'><name>Deep</name><age>34</age><gender>Male</gender></person>  <person id='2'><name>Kumar</name><age>24</age><gender>Male</gender></person> <person id='3'><name>Deepali</name><age>19</age><gender>Female</gender></person><!-- more persons... --></information>";
String jsonString = "{}";
String expression = "//information"; 
```

*名称空间 XML*

```
String namespaceXML = "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"><soap:Body><m:NumberToDollarsResponse xmlns:m=\"http://www.dataaccess.com/webservicesserver/\"><m:NumberToDollarsResult>nine hundred and ninety nine dollars</m:NumberToDollarsResult></m:NumberToDollarsResponse></soap:Body></soap:Envelope>";
String jsonString = "{'soap':'http://schemas.xmlsoap.org/soap/envelope/', 'm':'http://www.dataaccess.com/webservicesserver/'}";
String expression = "//m:NumberToDollarsResponse/m:NumberToDollarsResult/text()"; 
```

*将命名空间 xml 文件作为字符串提供给`asscerionXpath(namespaceXML, jsonString, expression)`方法并以文本/节点的形式获取结果。*

> 文本（） ：`nine hundred and ninety nine dollars`
> 
> 节点： `<m:NumberToDollarsResult xmlns:m="http://www.dataaccess.com/webservicesserver/"> nine hundred and ninety nine dollars </m:NumberToDollarsResult>`

```
public static String asscerionXpath(String namespaceXML, String jsonString, String expression){
    if(namespaceXML.indexOf("><") > -1) namespaceXML = namespaceXML.replace("><", ">\r\n<");
    if(jsonString.indexOf("'") > -1)    jsonString = jsonString.replace("'", "\"");

    System.out.println("namespaceXML : \n"+namespaceXML);
    System.out.println("nsmespaces : \n"+jsonString);

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setValidating(false);
    factory.setNamespaceAware(true);
    factory.setIgnoringComments(true);
    factory.setIgnoringElementContentWhitespace(true);
    try {
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document source = builder.parse( string2Source(namespaceXML) );
        XPath xpath = XPathFactory.newInstance().newXPath();

        addNameSpaces(jsonString, xpath);
        // An XPath expression is not thread-safe. Make sure it is accessible by only one Thread.
        XPathExpression expr = xpath.compile(expression);

        // The NodeList interface provides the abstraction of an ordered collection of nodes,
        NodeList nodes = (org.w3c.dom.NodeList) expr.evaluate(source, XPathConstants.NODESET);;
        Node tree_base = nodes.item(0);
        return document2String(tree_base);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (XPathExpressionException e) {
        System.out.println("If the expression cannot be evaluated.");
    }
    return "";
}
static InputSource string2Source( String str ) {
    InputSource inputSource = new InputSource( new StringReader( str ) );
    return inputSource;
}
static void addNameSpaces(String jsonString, XPath xpath) {
    JSONParser parser = new JSONParser();
    try {
        JSONObject namespaces = (JSONObject) parser.parse(jsonString);

        if (namespaces.size() > 0) {
            final JSONObject declaredPrefix = namespaces; // To access in Inner-class.
            NamespaceContext nameSpace = new NamespaceContext() {
                // To get all prefixes bound to a Namespace URI in the current scope, XPath 1.0 specification
                // --> "no prefix means no namespace"
                public String getNamespaceURI(String prefix) {
                    Iterator<?> key = declaredPrefix.keySet().iterator();
                    System.out.println("Keys : "+key.toString());
                    while (key.hasNext()) {
                        String name = key.next().toString();
                        if (prefix.equals(name)) {
                            System.out.println(declaredPrefix.get(name));
                            return declaredPrefix.get(name).toString();
                        }
                    }
                    return "";
                }
                public Iterator<?> getPrefixes(String val) {
                    return null;
                }
                public String getPrefix(String uri) {
                    return null;
                }
            };// Inner class.

            xpath.setNamespaceContext( nameSpace );
        }

    } catch ( org.json.simple.parser.ParseException e) {
        e.printStackTrace();
    }
} 
```

# apache - .htaccess 不被 apache 读取

> ID：13702639
> 
> 赞同：0
> 
> 时间：2012-12-04T12:13:54.543
> 
> 标签：apache, .htaccess, ubuntu

我的 .htaccess 文件包含垃圾值，例如

```
'dfdfsdfdsfdfdf' 
```

另一个文件 httpd.conf(/etc/apache2/httpd.conf) 不包含任何内容

我希望至少 .htaccess 文件能够执行并将页面显示为

`internal server error`

我还更改了代码并更改了两个文件（.htaccess 和 httpd.conf），但页面 index.php 显示为好像没有两个文件（.htaccess 和 httpd.conf）。

原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:21:35.097

`httpd.conf`应该包含`AllowOverride All`文档根目录。

```
DocumentRoot "D:/Projects/Example/htdocs"
<Directory "D:/Projects/Example/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory> 
```

否则，`.htaccess`将禁用文件的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:26:53.490

我通过修改And使它`/etc/apache2/sites-available/default`
`AllowOverride All`工作
`Directory /var/www/``Directory /`

# c# - 我们如何为 Windows Phone 8 创建、编写和读取 excel 文件

> ID：13702643
> 
> 赞同：2
> 
> 时间：2012-12-04T12:13:59.427
> 
> 标签：c#, excel, windows-phone-8

我已经创建了文件并在上面写了一些数据。当我在 Windows 资源管理器中查找创建的文件时，它不存在。另一方面，我无法与我在模拟器上获得的文件的路径相关联。这是我正在使用的链接。请帮忙。

[http://www.codeproject.com/Articles/33850/Generate-Excel-files-without-using-Microsoft-Excel?fid=1536838&df=90&mpp=10&noise=1&prof=True&sort=Position&view=Expanded&spc=None&fr=11#xx0xx](http://www.codeproject.com/Articles/33850/Generate-Excel-files-without-using-Microsoft-Excel?fid=1536838&df=90&mpp=10&noise=1&prof=True&sort=Position&view=Expanded&spc=None&fr=11#xx0xx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:56:17.423

WP8 支持以只读模式打开你的文件。为此，您需要激活 Excel 的 app2app 文件扩展名。excel office 应用程序已注册到 XLS 和 XLSX 文件扩展名。

要发送 Office 文件，您首先需要将完整的文件写入独立存储。一旦文件在 IsolatedStorage 中，使用`Launcher.LaunchFileAsync()`.

```
 private async void LaunchExcel(object sender, RoutedEventArgs e)
    {
        var file = await ApplicationData.Current.LocalFolder.CreateFileAsync("myExcelFile.xlsx");
        using (var s = await file.OpenAsync(FileAccessMode.ReadWrite))
        using (var dw = new DataWriter(s))
        {
            dw.WriteString("hello world");
        }

        await Launcher.LaunchFileAsync(
            await ApplicationData.Current.LocalFolder.GetFileAsync("myExcelFile.xlsx"));
    } 
```

我不确定您链接到的文章的 XLS 格式是否真的被 WP8 上的 office 支持。如果不考虑使用 ClosedXML OSS 项目生成 XLSX office open XML @ [http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)

# android - 如何解决重复调用同一个Android Activity

> ID：13702646
> 
> 赞同：0
> 
> 时间：2012-12-04T12:14:12.290
> 
> 标签：android

活动1：显示朋友列表的
A。 在好友列表中的某个项目之后，它将转到显示该好友详细信息的活动 2。 `ListView`
`onClick()``ProfileActivity`

活动 2 ( `ProfileActivity`):
之后`Button`，`onClick()`将进入活动 3 ( `NearByActivity`)，显示 10 公里内的 20 个附近好友列表。

活动 3 ( `NearByActivity`)：`onClick()`一个项目结束后，将转到活动 2 ( `ProfileActivity`)。

故事是从 Activity 2 到 Activity3，我不想在`finish()`Activity 2 开始之前 Activity 因为用户可能想返回。

所以，问题是：
如果用户单击 Activity 3 中的任何项目，如何完成 Activity2 以防止 Activity 2 -> Activity 3 -> Activity 2 -> Activity 3 ...

尽管 Activity 2 会调用多次，但配置文件详细信息取决于单击的用户。

或者有什么其他建议？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:33:51.067

您可以在 Activity2 中覆盖 onActivityResult()。完成 Activity3 后，只需将结果传递给 Activity2 。

例如

```
 //In Activity2
onActivityResult(ReqCode , ResultCode, Intent) {
  if(ResultCode == FINISH){
     finish();
  } else if(ResulCode == DO_SOMETHING_ELSE){
     // Do Somthing
  }

}

//Activity 3
onClick1(){
 setResult(FINISH);
 finish();
}

onClick2(){
  setResult(DO_SOMETHING_ELSE);
  finish();
} 
```

[在此处](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)查看 onActivityResult

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:20:21.770

使用[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)。

如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:22:10.480

当从活动 3 中单击按钮时。只需发送广播消息（您也可以使用 localbroadcas）。并且在活动 2 中将有一个广播接收器，因此如果它收到包含退出命令的广播消息，那么它将完成（）

# c# - 无法返回 IEnumerable 代替 IEnumerable

> ID：13702647
> 
> 赞同：1
> 
> 时间：2012-12-04T12:14:18.547
> 
> 标签：c#, c#-4.0, generics, covariance

我写了这个 EnumHelper 方法

```
 public static IEnumerable<T> AsEnumerable<TEnum, T>(Func<TEnum, T> projection = null) where TEnum : struct
    {
        if (!typeof(TEnum).IsEnum)
            throw new InvalidOperationException("Type parameter TEnum must be an enum");

        if (projection == null)
            return Enum.GetValues(typeof (TEnum)).OfType<TEnum>();

        return Enum.GetValues(typeof (TEnum)).OfType<TEnum>().Select(projection);
    } 
```

第一次返回时出现编译时错误。返回一个`IEnumerable<TEnum>`

错误 46 无法将类型隐式转换`System.Collections.Generic.IEnumerable<TEnum>`为`System.Collections.Generic.IEnumerable<T>`

我对 没有任何限制`T`，因此`T`比`TEnum`. in`IEnumerable<out T>` `T`是不变的，那么为什么我仍然会收到错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:24:52.367

仅当两种类型之间存在多态关系时，协方差才适用。在您的情况下，`TEnum`并且`T`不限于相关，因此协方差不适用。

您可以通过将枚举成员直接转换为目标类型来轻松解决此问题：

```
if (projection == null)
    return Enum.GetValues(typeof(TEnum)).OfType<T>(); 
```

**编辑**：我建议消除`projection`参数，并更简单地定义您的方法，如下所示：

```
public static IEnumerable<TEnum> AsEnumerable<TEnum>() where TEnum : struct
{
    if (!typeof(TEnum).IsEnum)
        throw new InvalidOperationException("Type parameter TEnum must be an enum");

    return Enum.GetValues(typeof(TEnum)).OfType<TEnum>();
} 
```

如果确实需要执行投影，可以`Select`对返回的序列使用标准 LINQ 操作：

```
var optionsA = AsEnumerable<RegexOptions>();
var optionsB = AsEnumerable<RegexOptions>().Select(o => o.ToString()); 
```

这将为您提供与您的代码几乎相同的简洁性，但省去了维护可选参数的麻烦。

**编辑[2]**：如果您真的想为投影定义重载，我建议在其中实现所有逻辑，然后使用无参数版本中的标识函数调用它：

```
public static IEnumerable<TEnum> AsEnumerable<TEnum>() where TEnum : struct
{
    return AsEnumerable<TEnum, TEnum>(e => e);
}

public static IEnumerable<TResult> AsEnumerable<TEnum, TResult>(
    Func<TEnum, TResult> projection) where TEnum : struct
{
    if (!typeof(TEnum).IsEnum)
        throw new InvalidOperationException("Type parameter TEnum must be an enum");

    return Enum.GetValues(typeof(TEnum)).OfType<TEnum>().Select(projection);
} 
```

示例调用：

```
var optionsA = AsEnumerable<RegexOptions>();
var optionsB = AsEnumerable<RegexOptions, string>(o => o.ToString()); 
```

# php - 使用验证器检查 zend 中已经存在的数据库条目

> ID：13702652
> 
> 赞同：0
> 
> 时间：2012-12-04T12:14:25.497
> 
> 标签：php, zend-framework, zend-form, zend-validate

我有一个带有`$recipe_name`如下元素的 zend 表单。我想`_recipename`使用验证（Zend_Validate_DbNoRecordExists）检查是否已经存在。

```
$recipe_name= $this->createElement('text',$i.'_recipename',array('label'=> "Extra      Item   Name in ".$data['language'].'', 'class'=> 'inp-form',) );
$recipe_name->setDecorators(array( 'ViewHelper',
                                    array(array('data'=>'HtmlTag'), array('tag' => 'td')),
                                    array('Label', array('tag' => 'td','style')),
                                    array(array('row'=>'HtmlTag'),array('tag'=>'tr','openOnly'=>true))));   
$recipe_name->setRequired(true);
$recipe_name->addValidator('NotEmpty',true);
$recipe_name->getValidator('NotEmpty')->setMessage("Please enter     Recipe section  name in ".$data['language']); 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:38:30.620

```
$clause = $db->quoteInto ( '<your column Name>  ?', "<Your Value>" );
$validator = new Zend_Validate_Db_RecordExists ( array ('table' => '<Table Name>', 'field' => 'Field Name', 'exclude' => $clause ) );
if ($validator->isValid ( "<value to validate>" )) {
//..............
//.............
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T09:34:26.117

对于这种验证，您必须添加一个像这样的验证器..

```
$recipe_name->addValidator(
    'Db_NoRecordExists', 
    true, 
    array(
        'table' => 'recipes',
        'field' => 'recipe_name',
        'messages' => array( "recordFound" => "Recipe Name already exist ... ! <br>") ,

    )
); 
```

当您从**isValid**检查表单验证时，这将检查您的姓名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T14:03:22.563

是的！`Zend_Validate_Db_NoRecordExists`将满足您的需求。您应该执行以下操作：

```
 $db_lookup_validator = new Zend_Validate_Db_NoRecordExists('<your table name>', '<column name>');
    $your_field = new Zend_Form_Element_Text('<your form element name>'); // you already created an element, so you can skip this line.
    $your_field->addValidator($db_lookup_validator); 
```

干杯和快乐的编码！

# objective-c - 当块的参数数量和类型可能变化时，使用来自 va_list 的参数调用块

> ID：13702656
> 
> 赞同：5
> 
> 时间：2012-12-04T12:14:40.083
> 
> 标签：objective-c, ios, call, objective-c-blocks

我有一个带有接受一些参数的块的变量。参数的确切数量及其类型可能会有所不同。例如它可以是一个块

```
void(^testBlock1)(int) = ^(int i){} 
```

或一个块

```
void(^testBlock2)(NSString *,BOOL,int,float) = ^(NSString *str,BOOL b,int i,float f){} 
```

参数类型仅限于`{id, BOOL, char, int, unsigned int, float}`.

我知道当前的参数数量及其类型。我需要实现一个可以使用给定参数执行块的方法：

```
-(void)runBlock:(id)block withArguments:(va_list)arguments 
          types:(const char *)types count:(NSUInteger)count; 
```

我有一个可行的天真的解决方案，但它非常难看，只支持不超过 4 字节大小的类型并且依赖于对齐。所以我在寻找更好的东西。我的解决方案是这样的：

```
#define MAX_ARGS_COUNT 5
-(void)runBlock:(id)block withArguments:(va_list)arguments 
          types:(const char *)types count:(NSUInteger)count{

    // We will store arguments in this array.
    void * args_table[MAX_ARGS_COUNT];

    // Filling array with arguments
    for (int i=0; i<count; ++i) {
        switch (types[i]) {
            case '@':
            case 'c':
            case 'i':
            case 'I':
                args_table[i] = (void *)(va_arg(arguments, int));
                break;
            case 'f':
                *((float *)(args_table+i)) = (float)(va_arg(arguments, double));
                break;
            default:
                @throw [NSException exceptionWithName:@"runBlock" reason:[NSString stringWithFormat:@"unsupported type %c",types[i]] userInfo:nil];
                break;
        }
    }

    // Now we need to call our block with appropriate count of arguments

#define ARG(N) args_table[N]

#define BLOCK_ARG1 void(^)(void *)
#define BLOCK_ARG2 void(^)(void *,void *)
#define BLOCK_ARG3 void(^)(void *,void *,void *)
#define BLOCK_ARG4 void(^)(void *,void *,void *,void *)
#define BLOCK_ARG5 void(^)(void *,void *,void *,void *,void *)
#define BLOCK_ARG(N) BLOCK_ARG##N

    switch (count) {
        case 1:
            ((BLOCK_ARG(1))block)(ARG(0));
            break;
        case 2:
            ((BLOCK_ARG(2))block)(ARG(0),ARG(1));
            break;
        case 3:
            ((BLOCK_ARG(3))block)(ARG(0),ARG(1),ARG(2));
            break;
        case 4:
            ((BLOCK_ARG(4))block)(ARG(0),ARG(1),ARG(2),ARG(3));
            break;
        case 5:
            ((BLOCK_ARG(5))block)(ARG(0),ARG(1),ARG(2),ARG(3),ARG(4));
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T03:58:03.143

好吧，您在这里遇到了 C 中经典的缺少元数据和 ABI 问题。基于 Mike Ash[关于 MABlockClosure 的 Awesome Article](http://www.mikeash.com/pyblog/friday-qa-2011-05-06-a-tour-of-mablockclosure.html)，我认为您可以检查块的底层结构并假设 va_list 与块的预期匹配。您可以将块转换为 struct Block_layout，然后 block->descriptor 将为您提供 struct BlockDescriptor。然后你有代表块的参数和类型的@encode 字符串（@encode 是一个完整的其他蠕虫罐）。

因此，一旦您拥有参数列表及其类型，您就可以深入研究 block_layout，获取调用，然后将其视为函数指针，其中第一个参数是提供上下文的块。Mike Ash 还有一些关于[Trampolining Blocks](http://www.mikeash.com/pyblog/friday-qa-2010-02-12-trampolining-blocks-with-mutable-code.html)的信息，如果您不关心任何类型信息，但只想调用该块，这些信息可能会起作用。

让我添加一个大胖子“这里有龙”警告。这一切都非常棘手，因 ABI 而异，并且依赖于晦涩和/或未记录的功能。

似乎您也可以在需要的地方直接调用该块，可能使用 NSArray 作为唯一参数，使用 id 作为返回类型。然后，您不必担心任何“聪明”的黑客攻击会适得其反。

编辑：您也许可以使用 NSMethodSignature 的 signatureWithObjCTypes:，传入块的签名。然后你可以调用 NSInvocation 的 invocationWithMethodSignature:，但是你必须调用私有的 invokeWithIMP: 方法才能真正触发它，因为你没有选择器。您将目标设置为块，然后调用WithIMP，传递块结构的调用指针。请参阅[通用块代理](http://www.mikeash.com/pyblog/friday-qa-2011-10-28-generic-block-proxying.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T09:23:10.660

使用私有 invokeWithIMP: 的一个很好的替代方法是调配您想要具有不同实现的方法，并使其在调用时查找所需的 IMP。我们使用类似的东西：[https ://github.com/tuenti/TMInstanceMethodSwizzler](https://github.com/tuenti/TMInstanceMethodSwizzler)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T09:30:29.683

真正的解决方案是拥有一个带有 va_list 参数的块，并让该块自行排序。这是一种行之有效且简单的方法。

# c# - 反序列化 JSON - 如何忽略根元素？

> ID：13702657
> 
> 赞同：22
> 
> 时间：2012-12-04T12:14:45.870
> 
> 标签：c#, .net, deserialization, json.net

我正在使用 WCF 服务，该服务返回包装在“d”根元素中的 JSON 结果。JSON 响应如下所示：

```
{"d":[
  {
    "__type":"DiskSpaceInfo:#Diagnostics.Common",
    "AvailableSpace":38076567552,
    "Drive":"C:\\",
    "TotalSpace":134789197824
  },
  {
    "__type":"DiskSpaceInfo:#Diagnostics.Common",
    "AvailableSpace":166942183424,
    "Drive":"D:\\",
    "TotalSpace":185149157376
  }
]} 
```

我不想使用动态类型，我有我想在反序列化时使用的类 Diagnostics.Common.DiskSpaceInfo。

我正在使用 Json.NET (Netwonsoft JSON)。

问题是如何告诉它忽略根元素（那个'd'元素）并解析里面的内容。

到目前为止，我最好的解决方案是使用匿名类型：

```
DiskSpaceInfo[] result = JsonConvert.DeserializeAnonymousType(json, new
    {
        d = new DiskSpaceInfo[0]
    }).d; 
```

这实际上有效，但我不太喜欢它。还有其他方法吗？我想要的是这样的：

```
DiskSpaceInfo[] result = JsonConvert.Deserialize(json, skipRoot: true); 
```

或类似的东西...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T17:12:12.147

如果您知道在这种情况下要搜索什么“d”是根节点，那么您可以执行以下操作。

```
JObject jo = JObject.Parse(json);
DiskSpaceInfo[] diskSpaceArray = jo.SelectToken("d", false).ToObject<DiskSpaceInfo[]>(); 
```

如果您只是想忽略您不知道的根类，那么您可以使用您可以使用的**“@Giu Do”**解决方案，`test2.ToObject<DiskSpaceInfo[]>();`而不是`Console.Write(test2);`

```
 JObject o = JObject.Parse(json);
        if (o != null)
        {
            var test = o.First;
            if (test != null)
            {
                var test2 = test.First;
                if (test2 != null)
                {
                    DiskSpaceInfo[] diskSpaceArray = test2.ToObject<DiskSpaceInfo[]>();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-09T09:41:22.340

继这里以前的答案之后，我想建议使用您自己的静态实用程序类。这是可重用的，并且可以让您获得您正在寻找的语法。

```
public static class JsonUtil
{
    public static T Deserialize<T>(string json, bool ignoreRoot) where T : class
    {
        return ignoreRoot 
            ? JObject.Parse(json)?.Properties()?.First()?.Value?.ToObject<T>()
            : JObject.Parse(json)?.ToObject<T>();
    }
} 
```

你会像这样调用它：

```
var resultA = JsonUtil.Deserialize<DiskSpaceInfo[]>(json, ignoreRoot: true); 
```

或者

```
var resultB = JsonUtil.Deserialize<DiskSpaceInfoRoot>(json, ignoreRoot: false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:31:20.093

通过 Newtonsoft，我想您使用的是**JSon.net**，这是我的解决方案，我使用了此框架中可用的 Linq to JSon：

```
using System;
using Newtonsoft.Json.Linq;

namespace JSonTest
{
    class Program
    {
        static void Main(string[] args)
        {
            string json = @"{""d"":[
  {
    ""__type"":""DiskSpaceInfo:#Diagnostics.Common"",
    ""AvailableSpace"":38076567552,
    ""Drive"":""C:\\"",
    ""TotalSpace"":134789197824
  },
  {
    ""__type"":""DiskSpaceInfo:#Diagnostics.Common"",
    ""AvailableSpace"":166942183424,
    ""Drive"":""D:\\"",
    ""TotalSpace"":185149157376
  }
]}";
        JObject o = JObject.Parse(json);

        if (o != null)
        {
            var test = o.First;

            if (test != null)
            {
                var test2 = test.First;
                if (test2 != null)
                {
                    Console.Write(test2);
                }
            }
        }

        Console.Read();

    }
}
} 
```

我使用了属性**First**，因为你需要找到d之后的第一个节点，也就是你收到的json的第一个节点。

您只需要创建一个重现 Main 的函数，不要忘记检查对象是否不为 null 以避免**NullReferenceException**。

# quartz-scheduler - 如何在 Quartz 中按名称获取调度程序（即）特定调度程序？

> ID：13702658
> 
> 赞同：0
> 
> 时间：2012-12-04T12:14:50.127
> 
> 标签：quartz-scheduler

我创建了不同的调度程序，名称为 sched1、sched2 等，

如何按名称获取特定的调度程序？

例如：getScheduler("sched1"); -> 需要 sched1 实例

请让我知道你的想法。

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:16:24.403

好吧，我错过了一些关于上下文的信息，你如何构建/启动调度程序，如果你使用 spring ioc 或类似的东西，但无论如何使用 SchedulerFactory 你有一些方法来获取调度程序：[http://quartz-scheduler。 org/api/2.1.5/org/quartz/SchedulerFactory.html#getScheduler(java.lang.String](http://quartz-scheduler.org/api/2.1.5/org/quartz/SchedulerFactory.html#getScheduler(java.lang.String) )。

例如，您可以使用 StdSchedulerFactory 实现：http: [//quartz-scheduler.org/api/2.1.5/org/quartz/impl/StdSchedulerFactory.html#StdSchedulerFactory](http://quartz-scheduler.org/api/2.1.5/org/quartz/impl/StdSchedulerFactory.html#StdSchedulerFactory(java.lang.String) (java.lang.String )

HIH

# php - PHP：如何从字符串进行数学运算？

> ID：13702659
> 
> 赞同：0
> 
> 时间：2012-12-04T12:14:53.000
> 
> 标签：php, string, math

> **可能重复：**
> [如何用 PHP 制作计算器？](https://stackoverflow.com/questions/12692727/how-to-make-a-calculator-in-php)

我得到了像 5*100/4 这样的字符串，我需要从中做一个数学语句......简单地说，当这是输入时，输出应该是 125。有谁知道任何简单的方法来实现这一点？我试过 `$input = "5*100/4"; eval('$output = '.$input.';');` 了，但由于某种原因这不起作用......有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:18:13.823

尝试这个：

```
$math = '5*100/4';
$result = eval( "return ${math};" );
printf("%s = %s\n", $math, $result); 
```

会产生

```
5*100/4 = 125 
```

注意：`eval()`如果您不特别注意传递给它的内容，则很危险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:24:36.813

@Michal 您的示例在我的 PHP 环境中运行。您确定您的环境中没有禁用 eval 功能吗？尝试签`disabled_functions`入您的`php.ini`文件。如果您在 Web 主机上运行，​​请尝试联系您的 Web 主机提供商以获取您的服务器 PHP 配置（或使用 php 信息）。

# vba - 如何编写 Excel 2013 的电子表格比较脚本？

> ID：13702663
> 
> 赞同：15
> 
> 时间：2012-12-04T12:15:09.467
> 
> 标签：vba, excel, office-2013, excel-2013

我正在尝试将Excel 2013 的 Inquire Add-in 中花哨的新[电子表格比较功能合并到 VBA 脚本中。](https://support.office.com/en-US/article/Basic-tasks-in-Spreadsheet-Compare-F2B20AF8-A6D3-4780-8011-F15B3229F5D8)

计划是有一个宏来自动比较具有预定义名称的两个电子表格，并将所有差异导出为新电子表格。

迄今为止，没有成功。

这是我到目前为止所尝试的：

1.  通常，为了学习如何自动化一些 Excel 功能，我使用 Record Macro。
2.  如果失败了，我会查看可添加引用的列表，看看我是否遗漏了一些明显的东西。

在这种情况下，这两个都失败了。当我录制一个宏时，没有出现与电子表格比较相关的代码（只出现了像单元格选择这样的外围东西）。并且没有任何可添加的引用看起来像电子表格比较。

那么如何从 VBA 编写 Excel 的 2013 电子表格比较脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-24T08:11:16.503

我打开了一个[类似的问题](https://stackoverflow.com/questions/24366238/spreadsheet-compare-office-2013-automation-from-net-application-or-vsto-add-i)，用于从 .NET 应用程序自动化电子表格比较工具，但除了从命令行执行它之外，我还没有找到任何其他方法。

您可以从您的 VBA 加载项中执行此操作。您只需找到可执行文件 SPREADSHEETCOMPARE.EXE（通常在 C:\Program Files (x86)\Microsoft Office\Office15\DCF 中）并在命令行中使用指令文件作为输入参数执行它。

该指令文件必须是一个 ASCII 文件，两个 Excel 文件路径以单独的行进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:59:44.363

你不能。

VBA 不包括在这种情况下的插件。

电子表格比较是被微软吞并的第 3 方插件。

如果您需要可编写脚本的比较，您可以在网上找到对每个单元格、每一行执行的比较……这类事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T00:17:07.577

1.  创建一个 runCompare.cmd 文件：

    ```
    REM Execute from command line spreadsheetcompare.exe 
    REM 
    cd C:\Program Files (x86)\Microsoft Office 2013\Office15\DCF
    spreadsheetcompare.exe  C:\reportNames.txt 
    ```

2.  在 C:\reportNames.txt 中，将要比较的 .xlsx 文件保存在同一行中：

    ```
    C:\fileA.xlsx C:\fileB.xlsx 
    ```

3.  执行 runCompare.cmd。

# javascript - JW Player 无法在 iOS 中运行

> ID：13702664
> 
> 赞同：1
> 
> 时间：2012-12-04T12:15:20.973
> 
> 标签：javascript, html, drupal, jwplayer, amazon-cloudfront

我在使用 jw 播放器时遇到问题。它在 iOS（safari）中不起作用（播放器未显示）。该视频托管在带有云端的 s3 上。它在 Mac 的 safari 上运行良好。这是我的一段代码。

```
<?php 
echo media_site_play_video_media_files();

function media_site_play_video_media_files(){
   global $base_url;
  drupal_add_js(libraries_get_path('jwplayer') . '/jwplayer.js');

  $output = '<div id="video-player">ENI Video</div>';

  $flash_player_path = $base_url.'/sites/all/libraries/jwplayer/player.swf';

  $output .= "<script>
            jwplayer('video-player').setup({
             autostart: false,
              flashplayer: '".$flash_player_path."',
              width : 220,
              height: 150,
              image: '".$base_url.'/sites/all/themes/evansnewton/images/ENI Logo w Partnership Progress.png'."',
              'provider': 'rtmp',
              'streamer': 'rtmp://s22ljyq61fr9xw.cloudfront.net/cfx/st/',
              'file': 'mp4:ENICorporateUpdate09-2012016large'
            });
            </script>";
  return $output;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:10:40.983

惊人！！！我能够解决这个问题。刚刚发现 iPAD 不支持 flash 播放器，我使用了模式（flash 和 html5），效果很好。这是新代码

```
<?php 
echo media_site_play_video_media_files();

function media_site_play_video_media_files(){
   global $base_url;
  drupal_add_js(libraries_get_path('jwplayer') . '/jwplayer.js');

  $output = '<div id="video-player">ENI Video</div>';

  $flash_player_path = $base_url.'/sites/all/libraries/jwplayer/player.swf';

  $output .= "<script>
            jwplayer('video-player').setup({
             autostart: false,
              flashplayer: '".$flash_player_path."',
              width : 220,
              height: 150,
              image: '".$base_url.'/sites/all/themes/evansnewton/images/ENI Logo w Partnership Progress.png'."',
              'modes': [
                {   'type': 'flash',
                    'src': '".$flash_player_path."',
                        'config': {
                            'file': 'mp4:ENICorporateUpdate09-2012016large',                            
                            'streamer': 'rtmp://s22ljyq61fr9xw.cloudfront.net/cfx/st/',
                            'provider': 'rtmp'
                        }                    
                },
                {   'type': 'html5',
                        'config': {
                            'file': 'http://eni-video.s3.amazonaws.com/ENICorporateUpdate09-2012016large.mp4'
                        }
                }
              ]
            });
            </script>";
  return $output;
}
?> 
```

# xml - 如何在 XSLT 中组合两个模板？

> ID：13702669
> 
> 赞同：0
> 
> 时间：2012-12-04T12:15:31.890
> 
> 标签：xml, xslt

我有两个 XSLT 模板，我需要将它们合并为一个，然后按字母顺序对其进行排序：

```
<xsl:template match="properties-for-sale">
  <xsl:for-each select="entry">
    <option value="{name}">
        <xsl:value-of select="name"/>
    </option>
  </xsl:for-each>
</xsl:template>

<xsl:template match="properties-for-rent">
  <xsl:for-each select="entry">
    <option value="{name}">
        <xsl:value-of select="name"/>
    </option>
  </xsl:for-each>
</xsl:template> 
```

这如何在 XSLT 中实现？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:52:43.003

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

  <xsl:template match="properties-for-sale|properties-for-rent">
    <xsl:for-each select="entry">
      <xsl:sort select="name" order="ascending"/>
      <option value="{name}">
        <xsl:value-of select="name"/>
      </option>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

用于`|`多个 XPaths.. 并`<xsl:sort>`用于对值进行排序..

如果您想了解更多信息，请提供参考！

[http://www.w3schools.com/xsl/el_sort.asp](http://www.w3schools.com/xsl/el_sort.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:22:30.957

您可以使用`|`运算符进行匹配

```
<xsl:template match="properties-for-sale|properties-for-rent">
  <xsl:for-each select="entry">
    <option value="{name}">
        <xsl:value-of select="name"/>
    </option>
  </xsl:for-each>
</xsl:template> 
```

# javascript - 如何防止 iPhone Safari 键盘向上滚动固定导航栏？

> ID：13702675
> 
> 赞同：1
> 
> 时间：2012-12-04T12:15:45.680
> 
> 标签：javascript, iphone, cordova, safari

我正在使用 PhoneGap 构建一个应用程序，我有一个屏幕，它有一个固定的导航栏、一个下方的可滚动区域以及该区域中的一个文本字段（想想 facebook 消息屏幕）。当您点击文本字段时，键盘会弹出，虽然导航栏是固定的，但它会向上滚动并离开屏幕。我希望它保持固定并且可滚动区域应该变窄。

有没有办法做到这一点？

这是一个图表（对不起质量差）： [图表](http://i.imgur.com/kaExi.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:02:57.897

而不是使用C，只需使用javascript和**window.scrollTo**（在输入焦点上）

```
$('input').live('focus', function(e) {
    e.preventDefault(); e.stopPropagation();
    window.scrollTo(0,0); //no scroll > stays fixed!
}); 
```

如果您不想为 Y 滚动位置设置静态值，请随意使用[我编写的这个简短插件，它会自动在输入字段下方对齐键盘](https://stackoverflow.com/a/13808307/1262619)（除非不需要滚动）。只需将其称为焦点，如上所示：

```
setKeyboardPos(e.target.id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:27:49.930

```
set frames here:

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
 // change base view frame
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{
 // reset  base view frame
} 
```

# c++ - C/C++ 中固定长度实际输入数据的高效 2D FFT

> ID：13702679
> 
> 赞同：4
> 
> 时间：2012-12-04T12:15:59.677
> 
> 标签：c++, optimization, opencv, fft, fftw

我正在开发一种多次调用 FFT 函数的算法。我有几个时间限制（需要实时），所以我需要尽量减少每次 FFT 调用所花费的时间。

我正在使用 OpenCV 库，并且已经使用两种不同的方法实现了我的代码：

*   使用 FFTW 库。数据/内存管理 + FFT(8ms) = 14ms（平均为 FFT_MEASURE 标志）。
*   使用 OpenCV fft 函数。数据/内存管理 + FFT (21ms) = 23ms（平均）。

由于我的输入数据总是固定为 512x512 像素的真实图像，你认为如果我自己实现基于 DFT 数学定义的 FFT 算法，存储正弦/余弦表可以实现更好的性能还是 FFTW 库真的非常优化？有更好的想法吗？

所有的想法和建议将不胜感激。到目前为止，我不考虑并行化或 GPU 实现。

谢谢

**更新：**

系统：Windows 7 中的 Intel Xeon 5130 2.0GHz CPU、Visual Studio 10.0 和 FFTW 3.3.3（按照站点中的说明编译）、OpenCV 2.4.3。

使用 FFTW 进行 FFT 调用的代码示例（输入：OpenCV Mat CV_32F（1 通道，浮点型），输出 OpenCV Mat CV_32FC2（2 通道，浮点型）：

```
float           *im_data;

fftwf_complex    *data_in;
fftwf_complex    *fft;      

fftwf_plan       plan_f;

int             i, j, k;

int height=I.rows;
int width=I.cols;
int N=height*width;

float* outdata = new float[2*N];
im_data = ( float* ) I.data;

data_in = ( fftwf_complex* )fftwf_malloc( sizeof( fftwf_complex ) * N );
fft     = ( fftwf_complex* )fftwf_malloc( sizeof( fftwf_complex ) * N );

plan_f = fftwf_plan_dft_2d( height , width , data_in , fft ,  FFTW_FORWARD ,  FFTW_MEASURE );

for(int i = 0,k=0; i < height; ++i) {
    float* row = I.ptr<float>(i);
    for(int j = 0; j < width; j++) {
        data_in[k][0]=(float)row[j];
        data_in[k][1] =(float)0.0;
        k++;
    }
} 

fftwf_execute( plan_f );

int width2=2*width;
// writing output matrix: RealFFT[0],ImaginaryFFT[0],RealFFT[1],ImaginaryFFT[1],...
for( i = 0, k = 0 ; i < height ; i++ ) {
    for( j = 0 ; j < width2 ; j++ ) {

        outdata[i * width2 + j] = ( float )fft[k][0];
        outdata[i * width2 + j+1] = ( float )fft[k][1];
        j++;
        k++;
    }
}

Mat fft_I(height,width,CV_32FC2,outdata);

fftwf_destroy_plan( plan_f );
fftwf_free( data_in );
fftwf_free( fft );

return fft_I; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:23:13.313

您使用 FFTW 的 FFT 时间似乎非常高。为了充分利用具有固定大小 FFT 的 FFTW，您应该使用该`FFTW_PATIENT`标志生成一个计划，然后理想地保存生成的“智慧”以供后续重用。您可以从自己的代码或使用[fftw-wisdom](http://www.fftw.org/fftw-wisdom.1.html)工具生成智慧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:12:55.823

[大多数时候，英特尔数学核心函数库](http://software.intel.com/en-us/intel-mkl)（独立于英特尔编译器）的 FFT比 FFTW 快。我不知道这是否足以改善您的情况以证明价格合理。

我同意其他人的观点，即滚动你自己的 FFT 可能不是很好地利用你的时间（除非你想学习如何去做）。多年来，可用的 FFT 实现（FFTW、MKL）已经过微调。我并不是说你不能做得更好，但这可能需要大量的工作和时间来获得边际收益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:44:46.007

相信我 fftw 真的非常优化，你可以做得更好的机会非常小。

您用于编译 fftw 的编译器是什么？有时来自 Intel 的编译器提供比 gcc 更好的性能

# apache - .htaccess 文件夹到虚拟文件夹重写

> ID：13702680
> 
> 赞同：4
> 
> 时间：2012-12-04T12:16:00.343
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

Apache 的 RewriteEngine 是否可以执行以下操作，以及如何操作？

这是环境：

**domain.com**有一个包含**index.html页面的****文件夹**，htaccess 设置为剥离文件，因此**domain.com/folder/**打开**domain.com/folder/index.html**

 ******现在我需要实现的是显示**domain.com/folder/**内容（index.html），因为它来自**domain.com/virtualfolder/**其中**virtualfolder**不存在并且 url 必须显示为**domain.com/virtualfolder/**

我希望我写的内容是可以理解的。

非常感谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T12:21:53.143

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^virtual-folder/(.*)$ folder/$1 [QSA]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:19:13.577

你需要一个别名：

```
Alias /virtualfolder /full_path_to/domain.com/folder 
```

有关详细信息，请参阅[http://httpd.apache.org/docs/2.2/mod/mod_alias.html 。](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-18T10:10:19.300

别名是最方便的方式，但需要将别名放在 httpd.conf 中。如果您租用一些网络空间，提供商通常只允许您编辑 .htaccess 文件，并且不可能在其中放置别名。在这种情况下，您需要使用 mod_rewrite。只是现在打字时遇到同样的问题。

但是，如果您租用一些网络空间并安装了 Plesk 11.5 或 12.0，通常会有一个选项“虚拟目录”（如果未停用）******

# ruby-on-rails - Ruby on Rails 中的照片网站 - 如何通过管理员上传照片？

> ID：13702681
> 
> 赞同：1
> 
> 时间：2012-12-04T12:16:10.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, photo-gallery

能够通过管理员将照片上传到在 ruby​​ on rails 创建的网站上的投资组合的最佳方式是什么？然后我需要将照片上传到 javascript 库中。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:18:34.883

使用[回形针](https://github.com/thoughtbot/paperclip)或[CarrierWave](https://github.com/jnicklas/carrierwave)。这两个是照片上传的好宝石。根据“通过管理员”的说法，这取决于您的身份验证系统。

# css - 如何在我的 rails 3.2 应用程序中使用样式表然后在 Heroku 中使用它？错误：ActionView::Template::Error（file.css 未预编译）

> ID：13702682
> 
> 赞同：1
> 
> 时间：2012-12-04T12:16:13.887
> 
> 标签：css, ruby-on-rails-3, heroku, ruby-on-rails-3.2, stylesheet

[在我的 rails 3.2 应用程序中，使用ruby​​ guides:assets pipelin](http://guides.rubyonrails.org/asset_pipeline.html)具有以下布局：

```
application layout:
...
<%= stylesheet_link_tag :application %>
...

participant layout:
...
<%= stylesheet_link_tag params[:controller] %>
... 
```

在 app/assets/stylesheets 我有 manifest(application.css) 和参与者.css.scss

我在 config/application.rb 中插入，通过[heroku assets学习：](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

```
config.assets.initialize_on_precompile = false 
```

我已经在我的本地应用程序中完成了“rake assets:precompile”，它使用各种文件创建了公共/资产。

在当地一切正常！

然后，通过[Asset Pipeline 在 Heroku Cedar 上](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)的学习，我对存储库进行了提交，并且我确实推送了 Heroku，控制台说：

```
...
-----> Preparing app for Rails asset pipeline
Detected manifest.yml, assuming assets were compiled locally
... 
```

但是当我打电话给 myApp / 参与者时，它会出现以下错误：

```
2012-12-05T13:40:08+00:00 app[web.1]: Started GET "/participants" for 2.235.56.84 at     2012-12-05 13:40:08 +0000
2012-12-05T13:40:09+00:00 app[web.1]: Processing by ParticipantsController#index as HTML
2012-12-05T13:40:09+00:00 app[web.1]:   Rendered participants/index.html.erb within layouts/participants (4.8ms)
2012-12-05T13:40:09+00:00 app[web.1]: ActionView::Template::Error (participants.css isn't precompiled):
2012-12-05T13:40:09+00:00 app[web.1]:     6:   <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
2012-12-05T13:40:09+00:00 app[web.1]: 
2012-12-05T13:40:09+00:00 app[web.1]:     5: <head>
2012-12-05T13:40:09+00:00 app[web.1]:     7:   <title>Participants: <%= controller.action_name %></title>
2012-12-05T13:40:09+00:00 app[web.1]:     9: </head>
2012-12-05T13:40:09+00:00 app[web.1]: Completed 500 Internal Server Error in 154ms
2012-12-05T13:40:09+00:00 app[web.1]:     8:   <%= stylesheet_link_tag params[:controller] %>
2012-12-05T13:40:09+00:00 app[web.1]:     10: <body>
2012-12-05T13:40:09+00:00 app[web.1]:     11: 
2012-12-05T13:40:09+00:00 app[web.1]:   app/views/layouts/participants.html.erb:8:in `_app_views_layouts_participants_html_erb__1645329556414684428_17128800'
2012-12-05T13:40:09+00:00 app[web.1]:   app/controllers/participants_controller.rb:29:in `index'
2012-12-05T13:40:09+00:00 app[web.1]:
2012-12-05T13:40:09+00:00 app[web.1]: 
2012-12-05T13:40:13+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-12-05T13:40:13+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-12-05T13:40:15+00:00 heroku[web.1]: Process exited with status 137 
```

而当我调用 myApp/?token=test 然后加载布局/应用程序时，一切正常：

```
 2012-12-05T13:46:06+00:00 app[web.1]: Started GET "/?token=test" for 2.235.56.84 at     2012-12-05 13:46:06 +0000
 2012-12-05T13:46:06+00:00 app[web.1]: 
 2012-12-05T13:46:06+00:00 app[web.1]: 
 2012-12-05T13:46:06+00:00 app[web.1]: Processing by MainController#index as HTML
 2012-12-05T13:46:06+00:00 app[web.1]:   Parameters: {"token"=>"test"}
 2012-12-05T13:46:06+00:00 app[web.1]: Completed 200 OK in 63ms (Views: 3.7ms | ActiveRecord: 16.0ms)
 2012-12-05T13:46:06+00:00 app[web.1]:   Rendered main/noYaml.html.erb within layouts/application (0.3ms) 
```

缺少什么或我做错了什么？

# php - 如果文件不存在，则从 php 生成 xml

> ID：13702686
> 
> 赞同：0
> 
> 时间：2012-12-04T12:16:22.423
> 
> 标签：php, xml

如果文件先前存在，则此代码有效，但如果文件不存在，则此代码无效。

```
$doc = new DOMDocument();
        $doc->version = '1.0';
        $doc->encoding = 'ISO-8859-1';
        $response = $doc->createElement('response');
        $doc->appendChild($response);
        $response_type= $doc->createElement('response_type','Yes');
        $response_id = $doc->createElement('response_id',$max_id_site);
        $response->appendChild($response_type);
        $response->appendChild($response_id);
        $doc->formatOutput = true;
        echo $doc->saveXML();
        $doc->save('$filename_xml'); 
```

更新代码

```
$doc = new DOMDocument();
        $doc->version = '1.0';
        $doc->encoding = 'ISO-8859-1';
        $response = $doc->createElement('response');
        $doc->appendChild($response);
        $response_type= $doc->createElement('response_type','Yes');
        $response_id = $doc->createElement('response_id',$max_id_site);
        $response->appendChild($response_type);
        $response->appendChild($response_id);
        $doc->formatOutput = true;
        echo $doc->saveXML();
        if (! is_file($filename_xml)) {
            touch($filename_xml) or trigger_error("Can't Create File");
            $doc->save($filename_xml);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:21:16.653

用于`file_exists()`检查文件是否已经存在。

替换最后一行：

```
$doc->save('$filename_xml'); 
```

和

```
if( file_exists( $filename_xml ) == false ) {
  $doc->save( $filename_xml );
} 
```

一般来说，如果文件在那里，你甚至不应该生成 xml。

顺便说一句：将`$filename_xml`) 放在“`”中是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:25:42.713

你可以更换

```
$doc->save('$filename_xml'); 
```

和

```
if (! is_file($filename_xml)) {
    touch($filename_xml) or trigger_error("Can't Create File");
    $doc->save($filename_xml);
} 
```

# sql - ORACLE SQL 使用窗口函数运行 TOTAL 和 daytotal

> ID：13702693
> 
> 赞同：3
> 
> 时间：2012-12-04T12:16:41.620
> 
> 标签：sql, oracle, cumulative-sum

从 EMPLOYEE 表中，我想对记录的数量（雇用的员工）进行分组，并且还要每天运行 TOTAL。输入的格式是这样的：

```
rownum Hired_date_time
1 2012 年 1 月 10 日 11:00
2 2012 年 1 月 10 日 13:00
3 2012 年 11 月 20 日 10:00
4 2012 年 11 月 20 日 15:00
5 2012 年 11 月 20 日 16:00
6 2012 年 12 月 30 日 1:00

```

所需的输出：

```
Hired_date.......Hired_per_day............TOTAL_number_of_employees
2012 年 1 月 10 日 ....................2 ........2
2012 年 11 月 20 日 ....................3 ..................5
2012 年 12 月 30 日 ....................1 ........ 6

```

每天分组没有问题：

```
select  trunc(Hired_date_time) as "Hired_date" , 
        count(*) as "Hired_per_day"
from employee
group by trunc(Hired_date_time)
order by trunc(Hired_date_time); 
```

***问题***：如何使用窗口函数获得运行总计（在最后一列）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T12:35:02.050

```
select trunc(hired), 
       count(*) hired_today,       
       sum(count(*)) over (order by trunc(hired)) as running_total
from emp
group by trunc(hired) 
```

[http://sqlfiddle.com/#!4/4bd36/9](http://sqlfiddle.com/#!4/4bd36/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:30:03.090

```
select trunc(hire_date), 
       count(*) over (partition by trunc(hire_date)) as hired_per_day,
       count(*) over (order by hire_date) as total_number_of_employees
from employee
order by trunc(hire_date) 
```

# php - 按价格/平方米的 SQL 订单

> ID：13702696
> 
> 赞同：2
> 
> 时间：2012-12-04T12:16:51.173
> 
> 标签：php, sql

快速提问。我有一个房地产数据库，以及价格和 Floorsize 值，这是房产平方米的整数。通常我会按价格或楼层面积订购，但这次我想按每平方米的价格订购。无论如何我可以在SQL中做到这一点。也许

```
SELECT * FROM Properties ORDER By (Price / Floorsize) 
```

这是一个猜测。感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:20:21.463

由于 Mahmoud 回答了正确的解决方案，这里是另一个您还需要选择每平方米价格的解决方案：

```
SELECT *, (Price / Floorsize) ppsqm FROM Properties ORDER BY ppsqm; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:18:35.310

你的猜测是对的。这与您在问题中发布的方式相同。像这样：

```
SELECT * 
FROM Properties ORDER BY (Price / Floorsize); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/5bf16/1)

# android - Web 视图显示“在这种情况下不支持 Android WebCore”警告

> ID：13702698
> 
> 赞同：6
> 
> 时间：2012-12-04T12:16:55.353
> 
> 标签：android, webview

webView.load(url) 没有加载网页（以前是）。当我检查 android 日志时，发现此警告消息：

```
WebCore is not supported in this case Warning. 
```

有没有人遇到过这个问题？

# ios - 为什么 ARC 抱怨 iOS 6 中的 dispatch_queue_create 和 dispatch_release？

> ID：13702701
> 
> 赞同：20
> 
> 时间：2012-12-04T12:16:57.973
> 
> 标签：ios, memory-management, automatic-ref-counting, grand-central-dispatch

我声明了一个引用 GCD 队列的属性：

```
@property (assign) dispatch_queue_t backgroundQueue; 
```

在一个类的 init 方法中，我创建了一个串行队列：

```
backgroundQueue = dispatch_queue_create("com.company.app", DISPATCH_QUEUE_SERIAL); 
```

ARC 抱怨：“将保留对象分配给 unsafe_unretained 变量；分配后对象将被释放”

我必须使用 __bridge_transfer 吗？

在 -dealloc 我释放队列：

```
dispatch_release(backgroundQueue); 
```

再次，ARC 抱怨：“ARC 禁止发送明确的‘release’消息”

我觉得这很令人困惑，因为这是一个 C 函数调用，并且认为队列是 C 对象，我必须自己负责内存管理！从什么时候开始 ARC 为我处理 C 对象？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-04T14:47:54.837

在 iOS 6 中，您可以 cmd+单击 dispatch_queue_t 并查看：

```
/*
 * By default, dispatch objects are declared as Objective-C types when building
 * with an Objective-C compiler. This allows them to participate in ARC, in RR
 * management by the Blocks runtime and in leaks checking by the static
 * analyzer, and enables them to be added to Cocoa collections.
 * See <os/object.h> for details.
 */ 
```

所以只需在属性中使用 strong （除非队列在其他地方被引用并且你真的想要一个弱引用）。

在 iOS 6 之前，您必须使用 dispatch_retain 和 dispatch_release 自己进行内存管理。在 iOS 6 中这样做会引发编译器错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T12:55:36.393

如果您使用的是**iOS 6** SDK，则会出现此错误消息。

在`iOS 6.0 SDK`和 中`Mac OS X 10.8 SDK`，每个 dispatch 对象也是 Objective C 的一部分。所以你不用担心内存，ARC 会管理`dispatch_queue`.

详情请参阅[链接](https://github.com/AFNetworking/AFNetworking/pull/517)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-12T21:43:17.730

你不应该坚持使用`assign`. 您可以使用：

```
@property (nonatomic) dispatch_queue_t backgroundQueue; 
```

甚至

```
@property dispatch_queue_t backgroundQueue; 
```

没有任何警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T11:48:58.593

魔术`dispatch_retain`和`dispatch_release`功能是根据许多条件定义的。

我的测试的底线： - 如果您为 sdk 5 部署，请使用它们，一切都很好 - 如果您为 sdk >= 6 部署，甚至不要考虑它们，只需将所有内容视为对象

您可以在这里看到更好的解释：[https ://stackoverflow.com/questions/8618632/does-arc-support-dispatch-queues?rq=1](https://stackoverflow.com/questions/8618632/does-arc-support-dispatch-queues?rq=1)

# javascript - 哪些 HTML 标签支持 onbeforeunload 事件？

> ID：13702704
> 
> 赞同：0
> 
> 时间：2012-12-04T12:17:14.693
> 
> 标签：javascript, ajax, html

是否任何 HTML 标记都支持 onbeforeunload 事件，例如 window.onbeforeunload 事件。

iframe 标记具有 onload 事件而不是 onbeforeunload。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:32:20.410

该属性`onbeforeunload`未在任何 HTML 规范中定义。在 HTML5 草案中，[属性列表](http://www.w3.org/TR/html5/section-index.html#attributes-1)提到它`body`仅适用于元素；并且对于其他元素几乎没有意义（没有重新定义）。关于内联框架，请使用`body`框架文档内元素的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:32:21.110

小心使用“onbeforeunload”。这是 Internet Explorer 的专有事件。我认为您可以使用“onunload”获得相同的功能：http: [//www.w3schools.com/jsref/event_onunload.asp](http://www.w3schools.com/jsref/event_onunload.asp)

而且，为了更好的兼容性，请使用 jQuery 之类的 Javascript 框架：http: [//api.jquery.com/unload/](http://api.jquery.com/unload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:34:33.673

通过查看[HTML5 工作草案](http://dev.w3.org/html5/spec-LC/history.html#unloading-documents)，*beforeunload*仅被分派给*Window*对象。
如果您希望将其分派到您选择的节点，请在*Window*上侦听它，然后创建一个您分派到该节点的[自定义事件。](https://developer.mozilla.org/en-US/docs/DOM/Event/CustomEvent)

如果您有兴趣查看*iframe*何时即将卸载并且您没有遇到[相同的源策略](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)`.contentWindow`，则可以在该 iframe`<iframe>`的*Window*对象上放置一个侦听器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T12:24:06.173

以下链接将为您提供一个很好的见解[http://msdn.microsoft.com/en-us/library/ie/ms536907(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536907(v=vs.85).aspx)

据我所知，只能使用元素标签。

HTML 属性

```
<element onbeforeunload = "handler(event)"> 
```

# java - Eclipse 构建路径损坏？

> ID：13702706
> 
> 赞同：1
> 
> 时间：2012-12-04T12:17:22.043
> 
> 标签：java, eclipse, apache-commons, buildpath

我想我在尝试安装 Apache Commons 时搞砸了我的 Eclipse 安装......

它显示了像这样可怕的事情，对做什么几乎没有帮助......

![在此处输入图像描述](../Images/88c8d0181efd5a1c84dbd4b6c8bedca8.png)

![在此处输入图像描述](../Images/be33cc8dde3e5b94361398d1c938890e.png)

奇怪的是，除了将`commons-lang3-3.1.jar`我正在使用的所有其他 jar 复制到文件夹中之外，我并没有真正做任何事情......

我可能做了什么，我怎么可能解决这个问题？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:21:15.653

看起来 jre 到 Eclipse 的链接已损坏。右键单击项目转到`BuildPath -> Configure Build Path -> Libraries -> Add Library`并选择`JRE System Library`。现在选择`jre`您安装的 Java 位置的文件夹并刷新项目。这应该可以解决问题。或者，如果是 Linux OS，您可以在 eclipse 文件夹内创建`softlink`文件`jre` 夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:24:15.627

确保 `preferences->java->installed JREs`您有一个有效的 JRE，并确保您的项目在项目首选项中使用该 JRE。

你也不必复制。只需添加一个用户库`preferences->java->build path-> user Libarys`并添加您需要的罐子。

# r - 如何从数据框中的列中选择一个数据范围，例如四分位数范围？

> ID：13702707
> 
> 赞同：2
> 
> 时间：2012-12-04T12:17:23.650
> 
> 标签：r, statistics

假设我有一个数据框 df，其中包含一个取实际值的列“A”。我知道我只能从数据框中选择此列，并且我知道一些命令可以从中提取某些数据，例如

`df.A = df[df$A > 5 & df$A < 10, c("A")]`

但是，我将如何选择例如四分位距，更一般地，将列减去值的最小 X 百分比和最大 Y 百分比？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:05:07.957

您可以使用`quantile()`：

```
df.A <- df[df$A > quantile(df$A,0.25) & df$A < quantile(df$A,0.75), c("A")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:09:45.683

使用子集，请参阅 ?subset 了解更多详细信息。但最好给出一个可重现的例子，不要使用 df 作为变量名，有一个 df 函数。

我重现一个例子

```
 dff <- data.frame(A= sample(1:100),B=sample(1:100)) 
```

我计算分位数范围

```
 qq <- quantile(A,probs=c(.025,.975)) 
```

我使用子集进行选择

```
 subset(dff, A > qq[1] & A< qq[1],select=c('A')) 
```

# ios - 使用导航控件返回时，UIImageView 不会删除旧图像

> ID：13702710
> 
> 赞同：1
> 
> 时间：2012-12-04T12:17:30.207
> 
> 标签：ios, uinavigationcontroller, uiimageview, back-button

我在 UIScrollView 中有一个 UIImageViews。点击图像会移动到另一个视图控制器，我可以在其中编辑信息，然后更改原始点击的 UIImage。当我通过导航控制器返回时，新图像确实出现了（取决于在第二个视图控制器中所做的更改），但是旧图像也出现在它后面。

如果我回到另一个级别，然后再前进，旧图像现在就消失了。我怎样才能解决这个问题而不必来回走动？

（代码又长又复杂，不知道能不能贴出来）

* * *

发现用了

```
-(void) viewDidDisappear: (BOOL) animated {
  [super viewDidDisappear:animated]; 
  for (UIImageView *img in [MyScrollView subview]) {
    [img removeFromSuperview]; 
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:55:02.147

然后在您将新图像设置为空或将图像视图设为空之前

```
imgview.image=nil; 
```

然后设置新图像，如果有任何问题，我希望这是可行的，然后发表评论:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:24:51.557

在 viewDidDisappear 中试试这个

```
- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    [imageView setImage:[UIImage imageNamed:@""]];
} 
```

# blackberry-10 - blackbery10中的CDATA解析

> ID：13702712
> 
> 赞同：0
> 
> 时间：2012-12-04T12:17:41.067
> 
> 标签：blackberry-10

我是 blackberry 10 平台的新手，我被 XML CDATA 解析困住了。我目前正在使用 QXMLSTREAMREADER，获取属性但不获取 CDATA 是有效的。我使用的xml如下

```
<message_list>
    <message title = "title1" date = "21-08-2012 10:20">
        [CDATA[ Sample data here ]]
    </message>

    <message title = "title2" date = "21-08-2012 10:20">

        [CDATA[Sample data here]]
    </message>

</message_list> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:32:00.470

使用从 QXmlDefaultHandler 扩展的自定义类，并且可以在那里解析 CDATA

# jsf-2 - 如何检查复合组件中是否存在可选属性

> ID：13702713
> 
> 赞同：13
> 
> 时间：2012-12-04T12:17:44.827
> 
> 标签：jsf-2, attributes, composite-component

我需要验证我的复合组件中是否传递了可选属性。我怎样才能做到这一点？

```
<composite:interface>
    <composite:attribute name="attr1" />
    <composite:attribute name="attr2" required="false" /> <!-- means OPTIONAL -->
</composite:interface>
<composite:implementation>
    <!-- How I can verify here whether attr2 is present or not whenever this component is used? -->
</composite:implementation> 
```

将`default`属性设置为`xxx`for`<composite:attribute>`不是我想要的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T13:32:14.270

您可以检查是否`#{not empty cc.attrs.attr2}`评估为`true`.

例如`rendered`，在任意组件的属性内：

```
<composite:implementation>
    <h:panelGroup rendered="#{not empty cc.attrs.attr2}">
        Attribute attr2 is not empty!
    </h:panelGroup>
</composite:implementation> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-15T02:10:45.070

您可以使用以下方法检查表达式是否存在：

> cc.getValueExpression('someAttribute')

```
<composite:implementation>
    <h:outputText rendered="#{cc.getValueExpression('attr2') ne null}">
        Attribute attr2 has been passed!
    </h:outputText>
</composite:implementation> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-06T13:33:16.360

您可以通过以下方式有条件地向组件添加属性：

```
<c:if><f:attribute> 
```

样本：

```
<composite:interface>
    <composite:attribute name="label" />
    <composite:attribute name="required" default="false" />
    <composite:attribute name="readonly" default="false" />
    <composite:attribute name="value" />
    <composite:attribute name="title" />
    <composite:attribute name="placeholder" />
    <composite:attribute name="maxlength" type="java.lang.Integer"/>
</composite:interface>
<composite:implementation>
    <p:inputText
      id="field"
      value="#{cc.attrs.value}">
        <c:if test="#{empty cc.attrs.maxLength}">
           <f:attribute name="maxlength" value="#{cc.attrs.maxlength}" />
        </c:if>
    </p:inputText>
</composite:implementation> 
```

我在以下位置找到了答案：

[如果组合组件为空，如何不设置组件的属性？](https://stackoverflow.com/questions/33474926/how-not-to-set-an-attribute-of-a-component-inside-a-composite-component-if-it-is)

# http - 将服务请求重定向到另一台服务器

> ID：13702714
> 
> 赞同：3
> 
> 时间：2012-12-04T12:17:48.550
> 
> 标签：http, grails, http-redirect

我创建了一个过滤器，以便我可以拦截所有控制器操作并将请求转发到不同的服务器。我需要根据用户代理临时重定向。

所以我在[http://www.mysite1.com中有以下内容](http://www.mysite1.com)

```
class DealsFilters {

    def filters = {
    all(controller: '*', action: '*') {
        before = {
                if (someConditionHere)
                {
                    redirect(url:"http://www.mysite2/")
                    return
                }               
        }
    }       
} 
```

我想知道的是请求及其所有参数是否会正确传递给 mysite2？
即 mysite1 充当服务并接收获取用户数据、更新交易、添加新用户等的请求...

mysite2 是 mysite1 的新版本（mysite1 将在 mysite2 测试后停用）。

它像重定向一样简单吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:30:47.073

正如向lucke84指出的那样，我正在使用grails 1.3.7（我应该在原始问题中说明这一点）。

发现以下链接给了我大部分答案：
[Best practice for redirecting from one web domain to another in Grails?](https://stackoverflow.com/questions/7077313/best-practice-for-redirecting-from-one-web-domain-to-another-in-grails)

```
redirect(url:"http://localhost:8080${request.forwardURI}?${request.queryString}",params:params) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:24:42.097

[文档](http://grails.org/doc/latest/ref/Controllers/redirect.html)说，如果您使用 url 参数执行重定向，您的 url 应该包含发送新请求所需的所有信息。

我想你应该重新创建你的网址，或多或少是这样的：

```
redirect(base: 'http://www.mysite2/', controller: params.controller, action: params.action, params: params) 
```

未经测试，但它应该适用于大多数情况。让我知道 ：）

# java - 非英文字体编码

> ID：13702715
> 
> 赞同：0
> 
> 时间：2012-12-04T12:17:48.867
> 
> 标签：java, c++, c, fonts

我遇到了一个典型的问题，但不确定我应该使用哪种编程语言来解决它。

要求：

> 我想使用美国标准键盘输入我的母语脚本（完全是泰米尔语，一种印度语言）。Google 产品 (gmail) 允许我们在从下拉框中选择泰米尔语后输入泰米尔语。但问题是，我想输入文字处理器/Adobe 产品等。

在付出了高昂的代价后，有一些现成的软件可以完成我的任务。

但我想用 C/C++/Java 编写自己的代码并让它们工作。

[此](http://www.unicode.org/charts/PDF/U0B80.pdf)链接提供泰米尔语脚本的 Unicode 字符映射。

任何关于如何前进/实施的指导或任何链接参考都非常感谢。

**补充：**到目前为止，我在即用型软件中看到的只是，它们启动程序并开始输入泰米尔语脚本。完成后，他们退出程序并启用通常的英文键盘。我想知道程序的启动如何重新映射字符以及我应该用什么语言对其进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:34:07.883

如果您使用的是 Windows 7，那应该没问题 - Windows 支持多种键盘布局和相应的字体和代码页。我刚刚安装了对泰米尔语键盘的支持（虽然我不知道这些符号的含义）并在 MSVC2010 中编写（并翻译）了这个小程序：

```
#include <string>
#include <iostream>

int main()
{
  auto ந = 5;
  std::string த = "Whatsup?: ";
  std::cout << த << ந << '\n';
} 
```

Java 和 C++11 支持 unicode 源代码并允许标识符包含 unicode 字符。这应该与任何支持 unicode 的编辑器和 IDE 无缝协作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:33:16.727

据我了解您的问题，您需要在英文字母上包装泰米尔语字母。

我认为您应该使用英文字母映射到泰米尔语字母，因为您没有泰米尔语键盘。

因此，对于键盘上的每个键`A`，`B`您需要映射到您的泰米尔语对应的字母。

当您`char`从键盘输入 a 时，它将检查该`ASCII`字母的值，并使用表格或地图，您可以获得相应的`wchar_t`字母并相应地打印。

# php - 从字符串中查找价格的正则表达式

> ID：13702716
> 
> 赞同：4
> 
> 时间：2012-12-04T12:17:49.460
> 
> 标签：php, regex, preg-replace

我正在尝试从字符串中提取价格：

例子：

```
$money='Rs.109.10';
$price=preg_replace('/[^0-9.]/u', '', $money);
echo $price; 
```

这个例子的输出

```
.109.10 
```

我期待以下输出：

```
109.10 
```

帮助我找到正确的正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:23:21.850

```
preg_match('/(\d[\d.]*)/', $money, $matches);
$price = $matches[1]; 
```

或者，更好的是，正如@Smamatti 的回答所暗示的那样：

```
preg_match('/\d+\.?\d*/', $money, $matches);
$price = $matches[0]; 
```

IE。数字中最多只允许一个点。并且不需要显式捕获，因为我们想要整个匹配，在这里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T12:25:47.427

怎么样：

```
$price=preg_replace('/^\D+/', '', $money); 
```

# jquery - PHP json数据，获取数据但不工作

> ID：13702717
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:17:53.577
> 
> 标签：jquery, json

有什么想法我在这里做错了吗？

```
$(document).ready(function(){
    var f_page = "ID";
    var t_page = "ID";

    function add_commas(number) {
        if (number.length > 3) {
            var mod = number.length % 3;
            var output = (mod > 0 ? (number.substring(0,mod)) : '');
            for (i=0 ; i < Math.floor(number.length / 3); i++) {
                if ((mod == 0) && (i == 0)) {
                    output += number.substring(mod+ 3 * i, mod + 3 * i + 3);
                } else {
                    output+= ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
                }
            }
                return (output);
            } else {
                return number;
        }
    }

    // grab from facebook
    $.getJSON('https://graph.facebook.com/'+f_page+'?callback=?', function(data) {
        var fb_count = data['likes'].toString();
        fb_count = add_commas(fb_count);
        $('#fb_count').html(fb_count);
    });

    // grab from twitter
    $.getJSON('http://api.twitter.com/1/users/show.json?screen_name='+t_page+'&callback=?', function(data) {
        twit_count = data['followers_count'].toString();
        twit_count = add_commas(twit_count);
        $('#twitter_count').html(twit_count);
    });

    // grab from website
    $.getJSON('json.php?callback=?', function(data) {
        web_count = data['count'].toString();
        web_count = add_commas(web_count);
        $('#website_count').html(web_count);
    });

}); 
```

但没有显示在 html 上，但我确实得到了回复 {"count":3} 所以也许 data['count'] 错了？twiiter / facebook 的工作但不是我的计数，就像我在控制台中说的那样，我取回了数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:49:32.150

似乎是由于 ?callback=? 我删除了它并且它工作正常

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T12:26:42.997

您必须解析 JSON 数据

```
$.getJSON('json.php?callback=?', function(data) {
        var responseObj = $.parseJSON(data);
        website_count = responseObj.count;
        website_count = add_commas(website_count);
        $('#website_count').html(website_count);
    }); 
```

# jquery - 谷歌地图 api 自动完成限制/偏向我镇的街道地址

> ID：13702720
> 
> 赞同：6
> 
> 时间：2012-12-04T12:18:02.217
> 
> 标签：jquery, google-maps-api-3, google-places-api

我正在尝试为我在 uni 的最后一年项目编写一个 Web 应用程序，我需要解决的第一个问题是获取一个用于本地地址输入的自动完成文本框。我花了一些时间浏览互联网并花一些时间玩谷歌地图 V3 地点自动完成插件。

在 api 文档中有一些我不太了解的东西，我希望有人能够为我澄清，也可能为我指明正确的方向。

在文档中它说：

> (regions) 类型集合指示 Place 服务返回与以下类型匹配的任何结果：

```
locality
sublocality
postal_code
country
administrative_area1
administrative_area2 
```

这是我目前不明白的，我住在康沃尔（确切地说是博德明），我想让结果偏向博德明。我做了以下事情：

```
var input = document.getElementById('inputOne');
var defaultBounds = new google.maps.LatLngBounds(
  new google.maps.LatLng(50.423394,-4.803829),
  new google.maps.LatLng(50.508623,-4.692593));

        //need to set bounds to cornwall/bodmin
        var options = {
            bounds: defaultBounds,
          types: ['geocode'],
          componentRestrictions: {country: 'GB'}
        };
var autocomplete = new google.maps.places.Autocomplete(input,options); 
```

现在这可行，但是例如，如果我输入“st n”，我希望它首先想出位于博德明的圣尼古拉斯街。但它会想出几英里外的st neot之类的东西。

我的一部分人认为我需要将类型设置为不同的值，但我现在很困惑。

编辑：我想要实现的示例是在 maps.google.com 页面上，如果您输入，Bodmin 然后将光标移动到逗号之前并开始输入街道名称，甚至是 Asda，它会将其保留在本地那个区域。我宁愿不必输入 ,bodmin ，但这是我可以解决的问题

如果有人有任何很棒的想法。然后我需要弄清楚用户如何输入一些值，比如`"Asda"`获取本地 asda 地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:47:16.420

目前不可能将结果限制在特定的位置，除非像您在上面所做的那样使用边界。然而，这只会使结果偏向但不限于包含在指定范围内的位置。

如果您认为按地区划分的结果将是一项有用的功能，请提交[Places API - 功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

正如您所提到的，如果您`,Bodmin`在查询末尾键入，则更有可能返回本地结果。临时解决方案可能是使用[AutocompleteService](https://developers.google.com/maps/documentation/javascript/places#place_autocomplete_service)并附加到requests 输入参数`,Bodmin`的末尾。`getPlacePredictions()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-13T14:31:10.453

将类型设置为**区域**。

```
 var options = {
        bounds: defaultBounds,
       types: ['(regions)'],
       componentRestrictions: {country: 'GB'}
     };
    var autocomplete = new google.maps.places.Autocomplete(input,options); 
```

希望它有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T19:45:39.623

```
<div class="well container">
    <form role="form">
      <div class="form-group">
        <label for="locality" class="sr-only">Stadt oder PLZ</label>
          <input type="text" class="form-control" id="locality" name="locality" placeholder="Stadt oder PLZ" />
          <p class="help-block">Bitte zuerst die Stadt oder PLZ eingeben.</p>
      </div>
      <div class="form-group">
        <label for="route" class="sr-only">Straße / Hausnummer</label>
        <div class="row">
          <div class="col-xs-6">
            <input type="text" class="form-control col-xs-8" id="route" name="route" placeholder="Straße" disabled="true" />
          </div>
          <div class="col-xs-6">
            <input type="text" class="form-control col-xs-4" id="street_number" name="street_number" placeholder="Nr." disabled="true" />
          </div>
        </div>
      </div>
    </form>
</div>

<script>
var localityInput = document.getElementById('locality');
var localityOptions = {
  types: ['geocode'], //['(cities)'], geocode to allow postal_code
  componentRestrictions: {country: 'de'}
};
autocomplete = new google.maps.places.Autocomplete(localityInput, localityOptions);

google.maps.event.addListener(autocomplete, 'place_changed', function() {
    $('#route').attr('disabled', false).focus();
    $('#street_number').attr('disabled', false);

    var boundsByCity = autocomplete.getPlace().geometry.viewport;
    var routeInput = document.getElementById('route');
    var routeOptions = {
        bounds: boundsByCity,
        types: ['geocode']
    };
    new google.maps.places.Autocomplete(routeInput, routeOptions);
});
</script> 
```

演示：[jsfiddle](http://jsfiddle.net/txog6sgz/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-20T17:03:56.147

```
var input = document.getElementById('inputSearch');
var cityBounds = new google.maps.LatLngBounds(
        new google.maps.LatLng(12.864162, 77.438610),
        new google.maps.LatLng(13.139807, 77.711895));
var options = {
        bounds: cityBounds,
        strictBounds: true,
        componentRestrictions: {country: 'in'}
    };
var inputBox = new google.maps.places.Autocomplete(input, options);
google.maps.event.addListener(inputBox, 'place_changed', function() {
        var place = inputBox.getPlace();
        console.log(place.geometry.location.lat() +', '+ place.geometry.location.lng());
    }); 
```

这对我很有用！

# iphone - 如何知道用户的 iPhone 是 iPhone 4 还是 iPhone 5？

> ID：13702723
> 
> 赞同：-4
> 
> 时间：2012-12-04T12:18:04.600
> 
> 标签：iphone, objective-c, xcode, device, screen-size

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

我想知道是否有一种简单的方法可以知道设备是 iPhone 4 还是 iPhone 5？也许有一个存储这些信息的全局变量？我想做这样的事情：

```
 if (device == iphone 5){
 frame.size = 300px;
 }
 else if (device == iphone 4){
 frame.size =  200px;
 } 
```

只是一个非常简单的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:35:45.590

```
[[UIDevice currentDevice] localizedModel] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T12:34:24.327

```
 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
     CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568)
 {
    //For iPhone5
 }

else
{
   //for iPhone4 and all other

} 
```

# ruby - 如何使用 rspec 模拟模块内的类方法

> ID：13702725
> 
> 赞同：4
> 
> 时间：2012-12-04T12:18:12.767
> 
> 标签：ruby, rspec, mocking, rspec2

我试图测试一个调用外部 API 的 create 方法，但我在模拟外部 API 请求时遇到了麻烦。这是我的设置以及到目前为止我尝试过的内容：

```
class Update
  def self.create(properties)
    update = Update.new(properties)

    begin
      my_file = StoreClient::File.get(properties["id"])
      update.filename = my_file.filename
    rescue
      update.filename = ""
    end    

    update.save  
  end
end

context "Store request fails" do
  it "sets a blank filename" do
    store_double = double("StoreClient::File")
    store_double.should_receive(:get).with(an_instance_of(Hash)).and_throw(:sad)
    update = Update.create({ "id" => "222" })
    update.filename.should eq ""        
  end
end 
```

目前我遇到了这个失败

```
 Failure/Error: store_double.should_receive(:get).with(an_instance_of(Hash)).and_throw(:sad)
   (Double "StoreClient::File").get(#<RSpec::Mocks::ArgumentMatchers::InstanceOf:0x000001037a9208 @klass=Hash>)
       expected: 1 time
       received: 0 times 
```

为什么我的 double 不起作用以及如何最好地模拟对 的调用`StoreClient::File.get`，以便我可以在 create 方法成功或失败时对其进行测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T12:33:28.800

问题是`double("StoreClient::File")`创建了一个*名为*“StoreClient::File”的双精度对象，它实际上并没有用自己代替真实的`StoreClient::File`对象。

在您的情况下，我认为您实际上不需要双打。您可以直接在对象上存根`get`方法，`StoreClient::File`如下所示：

```
context "Store request fails" do
  it "sets a blank filename" do
    StoreClient::File.should_receive(:get).with(an_instance_of(Hash)).and_throw(:sad)
    update = Update.create({ "id" => "222" })
    update.filename.should eq ""        
  end
end 
```

# java - 将图像加载到 Oracle 并在 servlet 中检索

> ID：13702726
> 
> 赞同：0
> 
> 时间：2012-12-04T12:18:20.970
> 
> 标签：java, image, hibernate, servlets

我认为这将是一个快速有趣的项目，但它变成了一个问题。:(

我想将一些图像加载到 Oracle 表中，然后通过 servlet 使用休眠模式检索它们。

所以这是插入图像的加载器部分。

```
 String imageFileName = row[col++];
  String ext = imageFileName.substring(imageFileName.lastIndexOf('.') + 1);
  String imageFilePath = imageDir + imageFileName;
  String mimeType = "image/" + ext;
  image.setImageType(mimeType);

  Image found = imageDAO.retrieve(imageId);
  if(found==null){
    //create a new one
    byte[] bytes = loadImage(imageFilePath, mimeType);
    image.setImageData(bytes);
    image = imageDAO.create(image);
    ++created;
  }
  else{
    //check if an update is needed
    if(updateDate.after(found.getUpdated())){
      byte[] bytes = loadImage(imageFilePath, mimeType);
      found.setImageData(bytes);
      found.setUpdated(updateDate);
      image = imageDAO.update(found);
      ++updated;
    }
  }
} 
```

这是servlet内部：

```
 @Override
  protected ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response) throws Exception {
    String imageId = request.getParameter(KeyNames.PARM_IMAGE_ID);
    if(imageId==null){
      throw new NullPointerException("Image ID parameter is required");
    }

    Image image = getImageDAO().retrieve(imageId);
    if(image==null){
      throw new IllegalArgumentException(imageId + " is not a valid image ID");
    }

    response.setContentType(image.getImageType());
    response.getOutputStream().write(image.getImageData());
    response.getOutputStream().close();

    return null;
  } 
```

对我来说似乎很简单，但是当我使用浏览器点击 URL 时，我得到：

“图片 [url] 无法显示，因为它包含错误”

由于 servlet 包装成功，我必须猜测在加载或检索中，我已经损坏了图像数据。我不知道下一步该怎么做，所以任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:39:34.783

真丢人！这就是我从互联网上运行代码而没有实际研究它以找出它的作用的结果！

所以答案是我通过可写光栅运行图像以便存储在数据库中。嗯，呃！当您栅格化图像时，它不再是 png。

所以我只是从输入文件中复制一个字节并将其存储在 blob 中，它工作正常。

现在就拍我。

谢谢您的帮助！

# mysql - 具有多个聚合列的 100M/月行的方法

> ID：13702732
> 
> 赞同：3
> 
> 时间：2012-12-04T12:18:41.047
> 
> 标签：mysql, mongodb, database-design

我需要存储具有多个分段（聚合）可能性的原始（未聚合）数据。例如：一天、一天中的小时、设备等。将至少有 6 个分段列，每列平均有 5 个唯一值。而且我需要在各种范围内管理这些数据的所有可能聚合。

例如：

*   我需要从上个月开始按天和小时分组的 columnX 总和
*   我需要 columnX 的总和，按月份和设备分组的 columnY 的平均值，从去年开始

它必须是原始数据。此要求将导致平均每月 1 亿条记录。我无法存储任何总和，因为我必须为每个分段列组合存储所有可能的总和。

哪种数据库引擎/设计最适合此类任务？最初对于应用程序，我们选择了 MySQL 数据库，但在选择时我们并不完全了解需要提取的数据结构和统计信息。现在，当我知道它时，我想到了表分区，但我不熟悉它，并且由于范围广泛，不确定它是否真的有帮助。如果它没有帮助，如果 MySQL 失败了这个任务，不管表设计，怎么办？例如像MongoDB这样的非关系引擎？

查询要求 - 不超过 2-3 秒。

假设用于数据库处理的公司硬件资源 - 几个高质量的服务器，但肯定不是几十个或几百个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:01:07.370

我发现最好的方法是不将原始数据存储在任何类型的数据库中，而是将您要在这些系统中查询的内容存储起来。围绕这个的原因是原始数据很笨重，并且在一天内搜索超过 1 亿行可能会产生巨大的延迟问题，无论您使用什么搜索，特别是如果您拥有整个原始数据集。您想要这些日志文件，因此您可以汇总它以产生您想要的结果。

我发现在 HTTP 请求工作时存储这些日志，或者甚至编写一些东西来存储原始 JSON 文件有助于达到第二级。

例如，我看到你想做一个设备组。您可以使用 Mongo 将其聚合成类似于以下结构的内容：

```
{
    "_id": "20121005_siteKey_device",
    "hits": 512,
    "hours": {
        "0": 52,
        "1": 31
    }
} //mongo structure 
```

或者，如果您想进一步汇总到分钟：

```
{
    "_id": "20121005_siteKey_device",
    "hits": 512,
    "minutes": {
        "0": 52,
        "1": 31
        ...
        "3600":31
    }
} 
```

除此之外，如果你有更小的数据集，你可以考虑使用 Redis。在此链接上取得高峰：

[使用 Redis 的指标](http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps/)

不管解决一个有趣的问题。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:06:37.313

您可以存储按 分组的聚合`Hour, Device, ...`。换句话说，按所有有趣的维度组合在一起。如果有几个不同的组合（你说有），这个聚合表会很小。然后，您可以查询聚合（当然，再次聚合）而不是扫描巨大的基表。

请注意，NoSQL 数据库的做事方式并没有根本不同。您将在此任务中遇到所有相同的问题。您需要扫描整个表或存储聚合。对于 SQL Server 和 NoSQL，这将是相同的。

# javascript - Creating a custom echo node with web-audio

> ID：13702733
> 
> 赞同：7
> 
> 时间：2012-12-04T12:18:41.003
> 
> 标签：javascript, web-audio-api

I'm playing with the webkit Audio API and I'm trying to create an Echo effect, to accomplish that I've connected a DelayNode with a GainNode in a loop (The output of one is the input of the other, and viceversa).

![Echo Node](../Images/34009f40936382a59fda4529a7efc986.png)

The effect works fine, but now I want to create an EchoNode Object that I can just plug-in and connect with the other AudioNode objects.

Something like:

```
myEchoNode = new EchoNode(); 
myConvolverNode = context.createConvolver();
myConvolverNode.connect(myEchoNode); 
```

I think that I should make my EchoNode inherit from AudioNode, so that the connect function of every other AudioNode would work, but I don't know how to do that in Javascript with the web Audio API.

Can anyone give me a hint, or if you think that there is a better way to accomplish that I would greatly appreciate it.

Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T22:28:28.747

Oskar's solution should do the trick, but I want to point out that it will require you to connect to your EchoNode in a nonstandard way (using `EchoNode.input` rather than simply connecting to the EchoNode itself). For simple effects such as feedback delay, this can be avoided by creating the EchoNode via a factory function that returns a native DelayNode mixed with some extra properties. Here's an example from [SynthJS](https://github.com/mattdiamond/synthjs):

```
function FeedbackDelayNode(context, delay, feedback){
    this.delayTime.value = delay;
    this.gainNode = context.createGainNode();
    this.gainNode.gain.value = feedback;
    this.connect(this.gainNode);
    this.gainNode.connect(this);
}

function FeedbackDelayFactory(context, delayTime, feedback){
    var delay = context.createDelayNode(delayTime + 1);
    FeedbackDelayNode.call(delay, context, delayTime, feedback);
    return delay;
}

AudioContext.prototype.createFeedbackDelay = function(delay, feedback){
    return FeedbackDelayFactory(this, delay, feedback);
}; 
```

As you can see, the result is a native DelayNode that can be connected to other nodes in the standard fashion, but it has an attached gain node that provides the feedback effect.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:41:10.083

Have a look at this article I wrote, it might give you some ideas: [http://www.html5rocks.com/en/tutorials/casestudies/jamwithchrome-audio/](http://www.html5rocks.com/en/tutorials/casestudies/jamwithchrome-audio/) (which explains the basic idea behind tuna.js that Taoist recommended).

# actionscript-3 - Openscales 2.2 空对象参考

> ID：13702736
> 
> 赞同：1
> 
> 时间：2012-12-04T12:18:54.757
> 
> 标签：actionscript-3, flash, mobile, openstreetmap

我使用 Flash Builder 4.6 和 openscales 2.2 构建了一个移动应用程序

我使用了openscales 1.2.1，它工作得很好，但是速度很慢，缩放效果也不好。

所以我想升级到openscales 2.2。我将 .swc 添加到我的 libs 文件夹中，并将 FeatureLayer 更改为 VectorLayer，因为它在新版本中已重命名。

如果我测试应用程序，调试器会给我以下错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at org.openscales.core::Map()[D:\workspace\openscales\target\checkout\openscales-core\src\main\flex\org\openscales\core\Map.as:296]
    at org.openscales.fx::FxMap()[D:\workspace\openscales\target\checkout\openscales-fx\src\main\flex\org\openscales\fx\FxMap.as:70]
    at views::mapView/_mapView_FxMap1_i()
    at views::mapView/_mapView_Array1_c()
    at mx.core::DeferredInstanceFromFunction/getInstance()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\DeferredInstanceFromFunction.as:108]
    at spark.components::SkinnableContainer/createDeferredContent()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\SkinnableContainer.as:1049]
    at spark.components::SkinnableContainer/createContentIfNeeded()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\SkinnableContainer.as:1078]
    at spark.components::SkinnableContainer/createChildren()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\SkinnableContainer.as:885]
    at mx.core::UIComponent/initialize()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:7634]
    at spark.components::View/initialize()[E:\dev\4.y\frameworks\projects\mobilecomponents\src\spark\components\View.as:999]
    at views::mapView/initialize()
    at mx.core::UIComponent/http://www.adobe.com/2006/flex/mx/internal::childAdded()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:7495]
    at mx.core::UIComponent/addChildAt()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:7199]
    at spark.components::Group/addDisplayObjectToDisplayList()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Group.as:2037]
    at spark.components::Group/http://www.adobe.com/2006/flex/mx/internal::elementAdded()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Group.as:1628]
    at spark.components::Group/addElementAt()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Group.as:1387]
    at spark.components::Group/addElement()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Group.as:1345]
    at spark.components::SkinnableContainer/addElement()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\SkinnableContainer.as:761]
    at spark.components::ViewNavigator/createViewInstance()[E:\dev\4.y\frameworks\projects\mobilecomponents\src\spark\components\ViewNavigator.as:2018]
    at spark.components::ViewNavigator/commitNavigatorAction()[E:\dev\4.y\frameworks\projects\mobilecomponents\src\spark\components\ViewNavigator.as:1932]
    at spark.components::ViewNavigator/commitProperties()[E:\dev\4.y\frameworks\projects\mobilecomponents\src\spark\components\ViewNavigator.as:1301]
    at mx.core::UIComponent/validateProperties()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:8219]
    at mx.managers::LayoutManager/validateProperties()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:597]
    at mx.managers::LayoutManager/doPhasedInstantiation()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:813]
    at mx.managers::LayoutManager/doPhasedInstantiationCallback()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:1180] 
```

D:\workspace\openscales\target\checkout\openscales-core\src\main\flex\org\openscales\core\Map.as:296] 这行真的很奇怪，因为我的电脑上没有这个文件夹正因为如此，我认为 openscales 的 .swc 中存在错误的路径？

最好的问候珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T16:45:24.990

我有同样的问题，我在我的mac上用错误的windows路径ORZ创建了项目....但是在阅读了源代码后问题已经解决了。在名为“org.openscales.core.Map.as”的类文件中，大约第 300 行。

```
var menu:ContextMenu = new ContextMenu();
menu.hideBuiltInItems();

var notice:ContextMenuItem = new ContextMenuItem("Powered by OpenScales");
notice.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, openLink);
menu.customItems.push(notice);
contextMenu = menu; 
```

空中移动应用程序不支持 contextMenu。所以，只需评论它们并重建 openscales 库。祝你好运。

# android - JSON 检索图像

> ID：13702737
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:18:57.383
> 
> 标签：android, json, url

我正在使用 JSON 来检索用户数据，并且我还获取了图像 URL，但是如何显示图像而不是 URL？目前它只显示图像中的 URL。

这是代码：

```
StringBuilder tweetResultBuilder = new StringBuilder();
            try {
                //get JSONObject from result
                JSONObject resultObject = new JSONObject(result);
                //get JSONArray contained within the JSONObject retrieved - "results"
                JSONArray tweetArray = resultObject.getJSONArray("results");
                //loop through each item in the tweet array
                for (int t=0; t<tweetArray.length(); t++) {
                    //each item is a JSONObject
                    JSONObject tweetObject = tweetArray.getJSONObject(t);
                //get the username and text content for each tweet
                tweetResultBuilder.append(tweetObject.getString("from_user")+": ");

           tweetResultBuilder.append(tweetObject.get("profile_image_url")+"\n");

                tweetResultBuilder.append(tweetObject.get("text")+"\n\n");
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:25:55.783

您应该先下载并兑现您的图像。请阅读这篇文章[高效显示位图](http://developer.android.com/intl/ru/training/displaying-bitmaps/index.html)，并查看[示例应用程序](http://developer.android.com/shareables/training/BitmapFun.zip)

从 url 显示图像的较短方法：

```
new DownloadImageTask((ImageView) findViewById(R.id.imageView1))
                .execute("http://java.sogeti.nl/JavaBlog/wp-content/uploads/2009/04/android_icon_256.png");

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:27:19.250

试试这个

```
try {
   ImageView i = (ImageView)findViewById(R.id.image);
   Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(imageUrl).getContent());
   i.setImageBitmap(bitmap); 
} catch (MalformedURLException e) {
   e.printStackTrace();
} catch (IOException e) {
  e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:33:38.733

您需要从您获得的网址下载图像。

为此，您需要做以下事情。

```
ImageView my_image = (ImageView) findViewById(R.id.my_imageView);        
        String image_url = "http://www.clker.com/cliparts/1/d/7/e/12570918991185627521Ramiras_Earth_small_icon.svg.med.png";
        Bitmap bm = getImageFromServer(image_url);
        my_image.setImageBitmap(bm); 
```

这将调用以下函数来下载图像。

```
private Bitmap getImageFromServer(String image_url) {
        Bitmap bm = null;
        try {
            URL aURL = new URL(image_url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
        } catch (IOException e) {
            Log.e("DEBUGTAG", "Remtoe Image Exception", e);
        }
        return bm;
    } 
```

就是这样。希望这对您有所帮助。

谢谢。

# r - 如何匹配最长的匹配字符串

> ID：13702741
> 
> 赞同：4
> 
> 时间：2012-12-04T12:19:24.853
> 
> 标签：r

我有字符串和字符向量。我想从字符串的开始中找到尽可能多的字符匹配的字符向量中的所有字符串。例如：

```
s <- "abs"
vc <- c("ab","bb","abc","acbd","dert")

result <- c("ab","abc") 
```

字符串 s 应该与前 K 个字符完全匹配。我希望尽可能匹配（最大 K<=length(s)）。这里没有匹配 "abs" (grep("abs",vc))，但是对于 "ab" 有两个匹配 (result <-grep("ab",vc))。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:00:12.647

另一种解释：

```
s <- "abs"
# Updated vc
vc <- c("ab","bb","abc","acbd","dert","abwabsabs")

st <- strsplit(s, "")[[1]]
mtc <- sapply(strsplit(substr(vc, 1, nchar(s)), ""), 
              function(i) {
                m <- i == st[1:length(i)]
                sum(m * cumsum(m))})

vc[mtc == max(mtc)]
#[1] "ab"        "abc"       "abwabsabs"

# Another vector vc
vc <- c("ab","bb","abc","acbd","dert","absq","abab")
....
vc[mtc == max(mtc)]
#[1] "absq" 
```

由于我们只考虑字符串的开头，在第一种情况下，最长的匹配是`"ab"`，即使有`"abwabsabs"`which has `"abs"`。

**编辑：**这是一个“单一模式”的解决方案，可能更简洁，但我们开始......

```
vc <- c("ab","bb","abc","acbd","dert","abwabsabs")
(auxOne <- sapply((nchar(s)-1):1, function(i) substr(s, 1, i)))
#[1] "ab"   "a"
(auxTwo <- sapply(nchar(s):2, function(i) substring(s, i)))
#[1] "s" "bs" 
l <- attr(regexpr(
  paste0("^((",s,")|",paste0("(",auxOne,"(?!",auxTwo,"))",collapse="|"),")"),
  vc, perl = TRUE), "match.length")
vc[l == max(l)]
#[1] "ab"        "abc"       "abwabsabs" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:18:46.420

这是一个函数，它使用`grep`并检查给定的字符串是否`s`与 中的任何字符串的开头匹配`vc`，递归地从 的末尾删除一个字符`s`：

```
myfun <- function(s, vc) {
  notDone <- TRUE
  maxChar <- max(nchar(vc))  # EDIT: these two lines truncate s to
  s <- substr(s, 1, maxChar) # the maximum number of chars in vc
  subN <- nchar(s)
  while(notDone & subN > 0){
    ss <- substr(s, 1, subN)
    ans <- grep(sprintf("^%s", ss), vc, val = TRUE)
    if(length(ans)) {
      notDone <- FALSE
    } else {
      subN <- subN - 1
    }
  }
  return(ans)
}

s <- "abs"
# Updated vc from @Julius's answer
vc <- c("ab","bb","abc","acbd","dert","absq","abab")

> myfun(s, vc)
[1] "absq"

# And there's no infinite recursion if there's no match
> myfun("q", "a")
character(0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T23:18:11.653

只是在很久之后，[triebeard](https://cran.r-project.org/web/packages/triebeard/index.html)包现在已经存在了。对于查找最长或部分匹配项，它非常非常高效且用户友好。

# python - 为什么 XBEE Sensor.py 会检查 self.__tracer.info()：

> ID：13702742
> 
> 赞同：2
> 
> 时间：2012-12-04T12:19:27.213
> 
> 标签：python, xbee

我一直在使用 XBEE S2B Pro 和 ConnectPort X4，我对可以在文件夹 C:\Program Files\Digi\python\DevTools-2.1\Dia\Dia_2.1.0 中找到的驱动器 xbee_sensor.py 有一些疑问\src\devices\xbee\xbee_devices\xbee_sensor.py

我在驱动器中插入了一些 Traces 以了解它是如何工作的。

在我的一条踪迹中，我可以在 def sample_indication(self, buf, addr) 中看到：

```
if self.__tracer.info():
    msg = []
    TRACER.critical('msg = [] %s', self.__tracer.info())
else:
    msg = None
    TRACER.critical('msg = None %s', self.__tracer.info()) 
```

返回`msg = None False`

由于后续代码取决于 msg 的内容

```
if msg is not None:
    msg.append("%d %s" % (temperature, scale)) 
```

温度没有附加在味精缓冲区中，这导致味精缓冲区没有填充任何数据。

我的问题是：为什么要进行测试`self.__tracer.info()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:47:24.820

安东尼奥，发生了一些无证行为...

查看第 921 行的 src/core/tracing.py ，我们有

```
def info(self, msg=None, *args):
    '''
    Send a message at the warning level.
    '''
    return self.log(LEVELS['INFO'], msg, *args) 
```

和

```
def log(self, level, msg, *args):
    '''
    All other exposed Tracer methods call this method with their
    respective numerical values as the level argument.

    '''
    # basic cut-off
    if self.level > level:
        return False

    if msg == None:
        True
    ... 
```

在第 866 行。

所以

```
self.__tracer.info() 
```

如果将记录信息级别消息，则返回 True。

# jquery - yii qtip 扩展不工作

> ID：13702749
> 
> 赞同：1
> 
> 时间：2012-12-04T12:19:44.463
> 
> 标签：jquery, yii, qtip2, yii-extensions

我正在尝试使用 YII qtip 扩展。

```
Yii::import('ext.qtip.QTip');
$qtip = new QTip(array(
    'options' => array(
        'content' => 'A nice progress bar',
        'position' => array(
            'corner' => array(
                'target' => 'topMiddle',
                'tooltip' => 'bottomLeft'
            )
        ),
        'show' => array(
            'when' => array('event' => 'mouseover' ),
            'effect' => array( 'length' => 300 )
        ),
        'hide' => array(
            'when' => array('event' => 'mouseout' ),
            'effect' => array( 'length' => 300 )
        ),
    )
));

$qtip->addQTip('i', array(
    'style' => array('tip' => 'bottomLeft', 'name' => 'dark')
)); 
```

我可以看到浏览器中加载了 qtip 脚本文件，并且还生成了 qtip 代码。但是qtips不会来。谁能帮我这个？我哪里做错了？

# c# - 从后面的代码向 jQuery validate 添加规则

> ID：13702750
> 
> 赞同：0
> 
> 时间：2012-12-04T12:19:44.380
> 
> 标签：c#, jquery, asp.net, jquery-plugins

我知道要使用 jQuery 添加验证器，您需要执行以下操作：

```
 $(document).ready(function() {
            $("#form1").validate({
                rules: {
                    <%=txtUserName.UniqueID %>: {
                    maxlength: 5,
} 
```

但是我将如何从后面的代码中添加规则，例如将所需的规则添加到文本框。

我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:31:03.690

一种方法是使用后面代码中的函数生成整个规则参数，例如在页面上您将拥有：

```
 $(document).ready(function() {
        $("#form1").validate(<%=GetValidationRules()%>); 
```

然后在后面的代码中添加一个函数，GetValidationRules，它返回包含要验证的所有控件的规则的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:54:50.763

要将规则添加到元素，您可以尝试

```
$("#input_ID").rules("add", "required"); // input_ID is element's id 
```

上面的行会将`required`规则添加到具有 id 的元素`input_ID`。但在这种情况下，你必须先打电话`$("#form1").validate();`，而且你已经有了。你也可以使用

```
$("#form1").validate({
    rules: {
        name: "required",
        email: {
            required: true,
            email: true
        }
   },
   messages: {
       name: "Please specify your name",
       email: {
           required: "We need your email address to contact you",
           email: "Your email address must be in the format of name@domain.com"
        }
    }
}); 
```

上面的代码指定了一个`name`元素 as`required`和一个`email`元素 as`required`以及一个有效的电子邮件地址。`name`为元素指定了一条消息，为`email`. 在这里，`name`和`email`是两个元素的名称。

[阅读更多](http://docs.jquery.com/Plugins/Validation#Plugin_methods)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:56:59.640

通过使用 StringBuilder 构建字符串查询然后在页面上注册脚本来解决此问题：

```
ScriptManager.RegisterClientScriptBlock 
```

# jsf-2 - 没有效果的 Bean 验证

> ID：13702754
> 
> 赞同：1
> 
> 时间：2012-12-04T12:20:00.300
> 
> 标签：jsf-2, bean-validation

在我点击页面中的“保存”时引入了验证后，没有任何反应。在页面中，我有“保存”和“取消”。我将“immediate=true”设置为取消按钮，这样就不会执行任何验证，它会按预期返回到前一个视图。当我单击保存时，将执行验证并正确显示错误，但是如果/当我输入正确的输入时（以便验证没有错误），而不是处理数据并返回上一页，什么也没有发生...

我错过了什么吗？

这里有一些代码片段：

看法：

```
<f:metadata>
  <f:viewParam name="mode" value="#{roomDetailController.model.mode}"/>
  <f:viewParam name="dbId" value="#{roomDetailController.model.dbId}"/>

  <f:event listener="#{roomDetailController.processCommand}" type="preRenderView"/>
</f:metadata>

...

<tr>
  <td>
    <h:outputLabel value="#{msg.roomFormFieldRoomName}:"/>
  </td>
  <td>
    <h:inputText id="roomName" value="#{detailModel.afterObject.roomName}" disabled="#{detailModel.mode == detailModel.viewMode}">
      <f:validateBean/>
    </h:inputText>
    <h:message for="roomName" style="color:red"/><br/>
  </td>
</tr>
<tr>
  <td>
    <h:outputLabel value="#{msg.roomFormFieldRoomIPs}:"/>
  </td>
  <td>
    <h:inputText id="roomIPs" value="#{detailModel.afterObject.roomIPs}" disabled="#{detailModel.mode == detailModel.viewMode}">
      <f:validateBean/>
    </h:inputText>
    <h:message for="roomIPs" style="color:red"/><br/>
  </td>
</tr>

...

<!-- SUBMIT BUTTON -->
<h:commandButton
  styleClass     = "waiButton"
  value          = "#{commonButtonSubmit}"
  action         = "#{detailController.submitAction()}"
  rendered       = "#{detailModel.mode != detailModel.viewMode}"
/>

<!-- CANCEL BUTTON -->
<h:commandButton
  styleClass = "waiButton"
  value      = "#{commonButtonCancel}"
  action     = "#{detailController.cancelAction()}"
  immediate  = "true"
  rendered   = "#{detailModel.mode == detailModel.cancelMode or detailModel.mode == detailModel.editMode or detailModel.mode == detailModel.multiEditMode or detailModel.mode == detailModel.createMode}"
/>
... 
```

控制器：

```
...
// Action: "submit" clicked
public String submitAction()
{
  detailModel.setCommand( DetailModel.Command.SUBMIT );
  return null;
}

// Action: "cancel" clicked
public String cancelAction()
{
  if ( detailModel.getEditMode().equals( detailModel.getMode() ) )
  {
    detailModel.setMode( detailModel.getViewMode() );
    return null;
  }
  else
  {
    // Multi Edit Mode
    return appendUrlParameter( getListViewName(), FACES_REDIRECT_TRUE );
  }
}
... 
```

如果您需要更多信息，请告诉我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:01:14.457

问题解决了。如前所述，它与验证无关。

# asp.net - 哪个更快：实体框架与存储过程？

> ID：13702756
> 
> 赞同：1
> 
> 时间：2012-12-04T12:20:01.260
> 
> 标签：asp.net, .net, sql-server, stored-procedures, entity-framework-4

当涉及在 ARRAY 对象中插入大量数据（例如 100.000 行）时，您认为哪一个会更快？

1.  通过实体框架？（`SaveChanges()`当你插入 100.000 行时调用）
2.  `INSERT`使用存储过程循环每一行（100.000 次） ？

如果您还可以提供参考，那将是非常棒的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:35:23.790

循环 100K 次调用存储过程将至少创建 100K 跨进程和/或跨网络调用会很慢。

如果您使用的是 SQL 服务器，另一种选择是使用 TVP（[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)）来避免在 C# 代码的循环中调用 insert。它允许您在一次调用中将数据表传递给存储过程。

从上面的链接中，他们建议一次 1000 行（但始终为您的应用测量和试验）：

> 使用表值参数与使用基于集合的变量的其他方式相当；但是，对于大型数据集，经常使用表值参数会更快。与启动成本高于表值参数的批量操作相比，表值参数在插入少于 1000 行时表现良好。

所以，也许尝试循环 100 次，一次通过 1000 行（而不是越过边界 100K 次）。

您可能还想重新评估为什么 asp.net 在您的应用程序中一次有 10 万个项目。是否会因为可能存在内存问题而立即传递到服务器并保存在内存中？那能拆吗？您是否在 asp.net 正在读取和处理 100K 行的情况下进行数据处理，而 sql server 代理作业可能更合适？如果您提供有关应用程序数据流及其功能的更多详细信息，人们可能会提供更多选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T12:59:36.810

实际上最快的方法是使用 SqlBulkCopy 对象，该对象正是为这种情况而设计的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:12:13.287

存储过程会更快。实体框架没有批处理，因此除了访问数据库 10 万次之外，您还要承受 EF 的性能开销。对于这类东西，Raw ado 将比 ORM 更快。

这是一些比较的链接[http://blog.staticvoid.co.nz/2012/03/entity-framework-comparative.html](http://blog.staticvoid.co.nz/2012/03/entity-framework-comparative.html) 它在比较中没有原始的 ado.net，但 dapper 是您将看到的最接近的速度。

# css - 无法在引导 div 上正确使用背景图像

> ID：13702757
> 
> 赞同：0
> 
> 时间：2012-12-04T12:20:02.097
> 
> 标签：css, twitter-bootstrap

我正在尝试将背景图像应用到 div 中，它可以工作，但我无法正确放置：

1.  我的 div 顶部和背景图像顶部之间有一个空间，通过添加 a 已经减少了很多，`background-position: 0;`但它仍然有很多像素的空间。
2.  我应用了一个`background-repeat: x;`（这显然是默认状态），但我的图像之间有一个重要的空间。

我怎么能解决这些问题？

这是使用引导程序的 html 代码：

```
<div class="row-fluid" id="header">
  <div id="bar" class="row-fluid">
    <div class="span12">
    </div>
  </div>
</div> 
```

这是CSS代码：

```
#bar > .span12{
    position: relative;
    border-top: 3px solid black;
    border-bottom: 3px solid black;
    margin-bottom: 10%;
    height: 8%;
    background-image:url('../img/ban.png');
    background-repeat:repeat-x;
    background-position:0;
} 
```

这是我得到的结果：

![这是我得到的结果](../Images/ab68a6dd2806dcdf24453530984aa605.png)

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:51:28.567

这张图片有点损坏，我尝试使用另一张只是因为我没有看到任何解决方案并且它有效，也许是透明背景，我不知道，但它来自图像......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:01:30.480

你试过`background-position:0 !important;`吗？也许它被覆盖的属性。

# javascript - 带有 AJAX 和链接的 jQuery 自动完成错误

> ID：13702759
> 
> 赞同：0
> 
> 时间：2012-12-04T12:20:11.177
> 
> 标签：javascript, jquery, jquery-ui

所以，我的代码是：

```
$( "#global-search" ).catcomplete({
    delay: 0,
    source: "globalsearch.php",
    select: function( event, ui ) { 
        window.location.href = ui.item.value;
        $( "#global-search" ).val('');
    }
}); 
```

问题是我正在使用 jquery catcomplete，当我单击结果时，它第一次起作用，例如，到`localhost/#!/mylink1`.

然后我再次尝试搜索我的 catcomplete，当我单击结果时，链接不起作用。

而当我点击结果的时候，输入并没有清空值，而是值变成了结果的链接，比如我输入的值变成了，`#!/mylink/`而不是什么都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:29:27.377

当您更改浏览器的位置时，页面还在做什么？我的意思是，它是否刷新了内容？如果正在刷新/替换内容，则可能是 #global-search 没有使用 catcomplete 函数再次初始化。

关于它与值的行为，尝试在函数的主体上添加一个 event.preventDefault() 。

# ios - Cocos2d：批处理精灵的讨厌异常

> ID：13702760
> 
> 赞同：0
> 
> 时间：2012-12-04T12:20:12.673
> 
> 标签：ios, xcode, debugging, exception, cocos2d-iphone

我无法安静地弄清楚如何调试它。我有一个 CCScene 正在运行，当场景被替换时，我收到以下错误消息。

该场景有一个精灵批处理节点，其中添加了 CCSpriteSubclass。

这就是清理方法，您将在下面找到断言失败消息：

```
-(void) cleanup
{
    [[GameController sharedGameController].musicLayer removeMusicSourceForKey:backgroundMusicFileName];

    [CCTextureCache purgeSharedTextureCache];
    [CCSpriteFrameCache purgeSharedSpriteFrameCache];
    [CCAnimationCache purgeSharedAnimationCache];

//    [[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];
    [super cleanup];
} 
```

批处理节点在 initWithId:(int)sceneId 方法中创建如下：

```
//Prepare sprites sheets for the rest of the game art
[frameCache addSpriteFramesWithFile:[NSString stringWithFormat:@"art%i-hd.plist", sceneId]];
sharedSpriteMainBatchNode = [CCSpriteBatchNode batchNodeWithFile:[NSString stringWithFormat:@"art%i-hd.png", sceneId]]; 
```

然后我添加所有 CCSpriteSubclass 对象。

这是断言失败消息：

```
** Assertion failure in -[CCSpriteSubclass setTexture:], /Users/xxx/Desktop/xxx/xxx/libs/cocos2d/CCSprite.m:934
2012-12-03 12:54:33.335 RockTale[869:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'CCSprite: Batched sprites should use the same texture as the batchnode'
*** First throw call stack:
(0x338d28bf 0x303c61e5 0x338d27b9 0x311193b3 0x9ad43 0x9a2fb 0x4bca3 0x44ddf 0x38b07 0x503f7 0x94c03 0xbbeed 0xbcfe7 0x34fb7423 0x34fb7379 0x31b4cf93 0x36e52891 0x3389bf43 0x338a6553 0x338a64f5 0x338a5343 0x338284dd 0x338283a5 0x37f9afcd 0x3128b743 0x2edf 0x2ea0)
terminate called throwing an exception(lldb) 
```

编辑：在 setTexture 方法中添加了一个断点，这是我“不”看到的:)

![子类中 setTexture 方法的断点](../Images/ac15de20331a8a9728967b69e43255e8.png)

编辑 2：我希望我能像在 Java 中一样设法检索完整的堆栈跟踪。我在另一个问题中问过这个问题，有人告诉我应该添加一个全局异常。我仍然需要弄清楚如何检索堆栈跟踪。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:31:45.990

[我以与此处](https://stackoverflow.com/questions/14319211/cocos2d-2-0-and-ccspritebatchnode-ccanimation-crashes-app-when-ccrepeatforever#comment19925690_14319211)相同的方式解决了这个问题。这是由于在前一个类替换现有类时引用了精灵帧，因此前一个类清理方法调用了清除帧缓存，从而删除了尚未使用的精灵帧，这些精灵帧由新创建的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:38:50.600

从您的异常消息的文本看来，您使用来自不同 spritesheet 的 spriteframes 创建了 sprite。

# c#-4.0 - 如何使用 C# 应用程序获取 Firefox 历史记录？

> ID：13702762
> 
> 赞同：1
> 
> 时间：2012-12-04T12:20:14.497
> 
> 标签：c#-4.0, firefox, windows-forms-designer

我需要使用 C# windows Form 应用程序检索 Firefox 历史记录（url）。

我正在使用 Firefox 17.0.1 版本。

我已经尝试过使用`DDEClient`类和`SQLLite`数据库。两者都不起作用。

当我使用`DDEClient`该类时，我可以从 Firefox 获取活动选项卡 URL，当我使用 SQLLite 数据库时，它在 VS2010 中不起作用。

我怎样才能达到这个要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-03T22:06:01.867

```
private static Logger logger = LogManager.GetCurrentClassLogger();
private static string dbName = "places.sqlite";
private static int dbColumnUrl = 1;
private static int dbColumnVisitDate = 9;

String strConnection = @"Data Source=" + newPath + @";Version=3;";

using (SQLiteConnection connection = new SQLiteConnection(strConnection))
{
    string query = "select * from moz_places;";
    using (SQLiteCommand cmd = new SQLiteCommand(query, connection))
    {
        connection.Open();

        using (SQLiteDataReader dr = cmd.ExecuteReader())
        {
            while (dr.Read())
            {
                logger.Info("time: " + dr.GetValue(dbColumnVisitDate));
                logger.Info("URL: " + dr.GetValue(dbColumnUrl));
            }
        }
    }
} 
```

# .net - 二进制序列化

> ID：13702766
> 
> 赞同：0
> 
> 时间：2012-12-04T12:20:27.400
> 
> 标签：.net, serialization

假设我的应用程序中有加载项目文件的选项（实际上它是 .bin 文件的反序列​​化）。如何防止我的应用程序运行用户修改的文件？我也知道是否可以合并 2 个 .bin 文件？例如，我可以将“历史”类序列化对象（history.bin）和“文档”类序列化对象（document.bin）合并到一个文件中，例如“project.bin”吗？我想只使用一个文件来反序列化这两个对象。.NET 中是否有任何内置的压缩​​方法？

# powershell - Powershell：根据文件名更改文件中的特定文本，然后将所述文件重命名为与更改后的文本相同

> ID：13702768
> 
> 赞同：0
> 
> 时间：2012-12-04T12:20:39.413
> 
> 标签：powershell

我有一堆 txt 文件，其中引用了与 txt 文件同名的 PDF 文件。

问题是这些文件的文件名太长。这些 txt 和 pdf 文件是自动生成的，我无法在收到它们之前更改文件名长度。

所以我要做的是打开所有文件，根据文件名在文件中找到文件名，将文件名更改为最多 16 个字符+扩展名（总共 20 个字符）的文件名，然后输出带有新的文本文件文件名，并将相应的 PDF 重命名为新文件名。

我对 Powershell 很陌生，在谷歌搜索了大约两天后，我发现了这样的东西：

```
$files = Get-ChildItem "C:\Test\Done" -recurse -include *.txt 
foreach ($file in $files){
$outputfile = (Get-Date).hour + (Get-Date).minute + (Get-Date).millisecond + ".txt"
Get-Content $file | Foreach-object {$_ -replace '$file', '$outputfile' ` }
Set-Content $outputfile } 
```

但我觉得我离我真正追求的东西还很远。

有谁知道我可以如何让这个脚本做我想做的事？

克里斯托弗

编辑：

我尝试了@Christian 的解决方案，它似乎有效，但它没有在文件中编辑和添加新文件名。

我试过这个只是作为一个测试：

```
$files = "testfil2.txt" 
$output = "testfil3.txt"
(Get-Content "C:\test\done\1456390000.txt") | ForEach-Object {$_ -replace $files, $output  } | Set-Content "C:\test\done\1456390000.txt" 
```

我从 ForEach-Object 中的变量中删除了“”，它按预期工作，它找到变量 $files 并用 $output 更改它。但是，当我对 @Christian 的脚本执行相同操作时，我收到一条错误消息：

```
Regular expression pattern is not valid: C:\Test\Done\1542644000.txt.
At line:7 char:39
+ (Get-Content $file) | Foreach-object {$_ -replace $file, $outputfile  } | Set-Co ...
+                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidOperation: (C:\Test\Done\1542644000.txt:PSObject) [], RuntimeException
+ FullyQualifiedErrorId : InvalidRegularExpression 
```

有任何想法吗？

下面由克里斯蒂安回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:26:08.840

这样的事情应该是可行的：

```
$files = Get-ChildItem "C:\Test\Done" -recurse -include *.txt
$i = 0
foreach ($file in $files){

$outputfile = "{0}{1}{2}{3}.txt" -f (Get-Date).hour , (Get-Date).minute , (Get-Date).millisecond , ([string]$i).padleft(3,'0')

(Get-Content $file) | 
Foreach-object {
$_.replace(("$($file.name)" -replace '.txt',''), ("$outputfile" -replace '.txt',''))}| 
Set-Content $file 

rename-item $file $outputfile
rename-item ($file -replace '.txt','.pdf') ($outputfile -replace '.txt','.pdf') 

$i++
} 
```

# struts2 - Struts2 标签 我需要将返回的字符串小写

> ID：13702772
> 
> 赞同：0
> 
> 时间：2012-12-04T12:20:46.207
> 
> 标签：struts2

所以我有一个这样的标签

```
<s:text name="furniture_logs" /> 
```

其中 s 被定义：

```
<%@ taglib prefix="s" uri="/WEB-INF/tld/struts-tags.tld"%> 
```

并且“furniture_logs”是数据库中的一个键（返回一个字符串）。我想显示这个字符串的小写字母，我该怎么办？我是 Struts2 的新手，我没有找到任何参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:28:51.607

该`<s:text>`标签用于呈现 I18n 文本消息。如果你真的想使用它，那么你可以尝试调用`getText`方法和`toLowerCase`标签`<s:property>`：

```
<s:property value="getText('furniture_logs').toLowerCase()"/> 
```

Struts2 使用 OGNL，这意味着您可以在 Struts2 标记中调用 Java 方法。阅读 OGNL [http://commons.apache.org/ognl/](http://commons.apache.org/ognl/)。

**更新**
如果`<s:text>`您必须使用标签，请使用`var`它的属性。

```
<s:text var="flogs" name="furniture_logs"/>
<s:property value="#flogs.toLowerCase()"/> 
```

# c# - 如何允许日期时间字段接受 AM 和 PM

> ID：13702774
> 
> 赞同：1
> 
> 时间：2012-12-04T12:20:49.117
> 
> 标签：c#, asp.net, datetime, informix

我的数据库中有一个类型的字段，`DateTime`但我将它配置为只是这样的时间`10:00`。

现在我想以这样的格式接受时间：

`10:00 AM`或`10:00 PM`..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:44:14.250

1.  `DateTime`在您的查询中获取所有信息
2.  将[IF](http://msdn.microsoft.com/en-us/library/ms182717.aspx)用于您的领域
3.  使用类似的语法

    If (Hours of Datetime > 12) Then Hours of Datetime - 12 + "PM"

我同意这有点困惑，但这是你应该遵循的结构。

# c# - MVC RadioButtonFor 组

> ID：13702777
> 
> 赞同：3
> 
> 时间：2012-12-04T12:21:06.980
> 
> 标签：c#, asp.net-mvc, razor, radiobuttonfor

我有一堂 PDF 课

```
public class UIClonePDFDetail
    {
        public int CatalogueID { get; set; }

        public List<PDF> PDFToClone { get; set; }

    } 
```

pdf类是：

```
public class PDF
    {
        public int ID{ get; set; }

        public bool Selected{ get; set; }

    } 
```

我正在尝试为用户创建一个单选按钮列表以选择 1，这会在 PDFToClone 列表中的 PDF 元素上设置 selected 属性。

```
Html.RadioButtonFor(model => Model.UIClonePDFDetail[Model.UIClonePDFDetail.IndexOf(stageSelection)].Selected, "stageSelection") 
```

但这允许选择多个单选按钮。我可以看到为什么会发生这种情况，因为 Html 标签的名称元素是不同的。有没有办法强迫他们进入同一个家庭？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-22T16:34:13.877

[RadioButtonFor](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.radiobuttonfor%28v=vs.108%29.aspx)包含一个接受 HTML 属性的重载。您可以创建一个匿名类型并包含 Name 属性，如下所示：

```
Html.RadioButtonFor(model => Model.UIClonePDFDetail[Model.UIClonePDFDetail
          .IndexOfstageSelection)].Selected, "stageSelection", new { Name = "grp" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:29:02.557

请尝试使用：

```
Html.RadioButtonFor(model => 
    Model.UIClonePDFDetail[Model.UIClonePDFDetail.IndexOf(stageSelection)].Selected,
    "stageSelection") 
```

代替：

```
Html.CheckBoxFor(model => 
    Model.UIClonePDFDetail[Model.UIClonePDFDetail.IndexOf(stageSelection)].Selected, 
   "stageSelection") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:35:58.343

您可以尝试使用单选按钮组传递 htmlAttributes，例如：

```
@Html.RadioButtonFor(model => Model.UIClonePDFDetail[Model.UIClonePDFDetail
      .IndexOfstageSelection)].Selected, "stageSelection", new { Group = "A" }) 
```

# android - 如何在 Android 中使用 Intent 将音频文件附加到电子邮件？

> ID：13702778
> 
> 赞同：0
> 
> 时间：2012-12-04T12:21:06.197
> 
> 标签：android, android-intent

我想将音频文件附加到电子邮件中。

我正在附加它，但无法在接收器端获取该附件。我不确切知道该文件必须使用哪种 mimetype。

我已经试过了`setType("*/*")`。但它仍然对我不起作用。甚至有可能吗，如果是这样，那我该怎么办？

我已经在 SO 和 Google 上找到了很多，但仍然没有找到正确的解决方案。

```
Intent email = new Intent(Intent.ACTION_SEND);

email.putExtra(Intent.EXTRA_EMAIL, new String[] {});
email.setType("image/jpeg");
email.setType("audio/mpeg3");
email.putExtra(Intent.EXTRA_SUBJECT, TAG);
email.putExtra(Intent.EXTRA_TEXT, getResources().getText(R.string.Message));

Uri uri = Uri.parse("file:///android_asset/Male_Hard_2.mp3");

email.putExtra(Intent.EXTRA_STREAM, uri);
startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:25:47.263

以下链接对我有帮助[在电子邮件中附加文件](https://stackoverflow.com/questions/9272964/attaching-file-in-email).. 关键部分是

```
ArrayList<Uri> uris = new ArrayList<Uri>();
    for (String file : filePaths)
    {
        File fileIn = new File(file);
        Uri u = Uri.fromFile(fileIn);
        uris.add(u);
    }
    intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris); // intent is your email intent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:51:29.067

你必须使用：

```
startActivity(Intent.createChooser(new Intent(Intent.ACTION_SEND_MULTIPLE)
    .setType("audio/wav").setType("image/jpeg")
    .setType("message/rfc822")
    .putExtra(Intent.EXTRA_EMAIL, emails)
    .putExtra(Intent.EXTRA_SUBJECT, subject)
    .putExtra(Intent.EXTRA_TEXT, strDetails)
    .putExtra( android.content.Intent.EXTRA_STREAM, uris)
    .putExtra( android.content.Intent.EXTRA_STREAM, strAudioFilePath), "Send your email in:")); 
```

在上面的代码中，**strAudioFilePath**是音频文件的路径。

# php - 为什么我的脚本中有未定义的函数？

> ID：13702782
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:21:24.000
> 
> 标签：php

我在使用 PHP 联系表单时遇到了一些问题，提交时此表单仅返回电话号码：并且还查询：未定义。它应该返回姓名、电话号码和我的查询。知道为什么它不返回名称以及为什么 Inquiry 未定义吗？

**我的 PHP**

```
 $name=$_POST['name'];
    $phone=$_POST['phone'];
    $enquiry=$_POST['enquiry'];

    $subject="NINJA2k - EMAIL INQUIRY FROM: $name";
    $message="
          Phone:<br>
          <strong>$phone</strong><br>
          <br>
          Enquiry:<br>
          <strong>$enquiry</strong><br>
          <br>
    ";

    mysql_close();

    include("class.phpmailer.php");
    include("class.smtp.php");

    $mail = new PHPMailer();
    $mail->IsSMTP();// send via SMTP
    $mail->Host = "localhost"; // SMTP servers
    $mail->SMTPAuth = false; // turn on/off SMTP authentication
    $mail->From = "user1@mydomain.com";
    $mail->FromName = "http://mail.mydomain.com/";
    $mail->AddAddress("user1@mydomain.com");
    $mail->AddReplyTo("user1@mydomain.com");
    $mail->WordWrap = 50;// set word wrap
    //now Attach all files submitted

    $mail->Body = $message;
    //
    $mail->IsHTML(true);// send as HTML
    $mail->Subject = $subject;

    if($mail->Send()) 
    {
        echo "Thank You <b>$name</b><br>Your email has been sent.";
    } 
    else 
    {
        echo "There was a problem sending the mail. Please check that you filled in the form correctly.";
    }
?>

$('.contact_form').dialog({
        width:500,
        height:450,
        modal:true,
        buttons: {
            "Send": function() {
                if(($("#ct_name").val()=="") || ($("#ct_phone").val()=="") || ($("#ct_enquiry").val()=="") || ($("#ct_captcha").val()==""))
                    alert("You must fill all the field");
                else
                {
                    var capt=$(div_list[ind]).attr("id");
                    if(capt!=$("#ct_captcha").val().toLowerCase())
                        alert("Captcha Code is Invalid!");
                    else
                    {
                        var send_string;
                        send_string="name=";
                        send_string+=$("#ct_name").val();
                        send_string+="&phone=";
                        send_string+=$("#ct_phone").val();
                        send_string+="&enquiry=";
                        send_string+=$("#ct_enquiry").val();

                        $.ajax({
                             type: "POST",
                             url: "send_mail.php",
                             data:   send_string,
                             async: false,
                             success: function(msg){ 
                                alert("Your mail was sent successfully!");
                             } ,
                             error: function(msg){
                                alert("Sorry! We couldn't send email"); 
                             }
                        }); 
                    }
                }

            }
        }
    }); 
```

**我的 HTML**

```
 <div class="contact_form" title="Dialog Title" style="display:none">
    <table width="100%" style="padding:30px">
        <tr><td>Name</td><td><input type="text" id="ct_name"/></td></tr>
        <tr><td>Phone Number</td><td><input type="text" id="ct_phone"/></td></tr>
        <tr><td>Enquiry Data</td><td><textarea rows="4"></textarea></td></tr>
        <tr>
        <td>Captcha</td>
        <td>
            <div>
                <div class="captcha" id="28ivw"><img src="images/captcha1.png" /></div>
                <div class="captcha" id="k4ez"><img src="images/captcha2.png" /></div>
                <div class="captcha" id="jw62k"><img src="images/captcha3.png" /></div>
                <div class="captcha" id="fh2de"><img src="images/captcha4.png" /></div>
                <div class="captcha" id="gwprp"><img src="images/captcha5.png" /></div>
                <div class="captcha" id="4d7ys"><img src="images/captcha6.png" /></div>
                <div class="captcha" id="e5hb"><img src="images/captcha7.png" /></div>
                <div class="captcha" id="xmqki"><img src="images/captcha8.png" /></div>
                <div class="captcha" id="6ne3"><img src="images/captcha9.png" /></div>
                <div class="captcha" id="xdhyn"><img src="images/captcha10.png" /></div>
                <div class="captcha" id="q98p"><img src="images/captcha11.png" /></div>
                <div class="captcha" id="hrai"><img src="images/captcha12.png" /></div>
            </div>
            <input type="text" style="margin-top:15px" id="ct_captcha"/>
        </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:23:40.837

您需要`name`在 HTML 中使用属性才能达到该值。所以而不是

```
<tr><td>Name</td><td><input type="text" id="ct_name"/></td></tr> 
```

你应该有

```
<tr><td>Name</td><td><input type="text" name="name" id="ct_name"/></td></tr> 
```

**编辑**

“技巧”是将`name`值用作`$_POST`数组中输入的键。但是如果你同时使用 jQuery，那么你可能仍然需要`id`或者`class`因为在 DOM 中使用它们比使用名称更容易到达输入。

# c# - 在 IIS 服务器上发布后，svn 命令行命令在网页中不起作用

> ID：13702784
> 
> 赞同：1
> 
> 时间：2012-12-04T12:21:25.083
> 
> 标签：c#, asp.net, svn, command-line

我正在使用 svn cmd 行命令从 c#.net 网页中的 SVN 服务器获取最高修订号，如下所示。

```
ProcessStartInfo processStartInfoSVNorTFS = new ProcessStartInfo(@"C:\Windows\System32\cmd.exe");
processStartInfoSVNorTFS.RedirectStandardInput = true;
processStartInfoSVNorTFS.RedirectStandardOutput = true;
processStartInfoSVNorTFS.UseShellExecute = false;
processStartInfoSVNorTFS.CreateNoWindow = true;

Process processSVNorTFS = Process.Start(processStartInfoSVNorTFS);
if (processSVNorTFS != null)
{
   process.StandardInput.WriteLine("c:");
   process.StandardInput.WriteLine("cd\\");
   process.StandardInput.WriteLine(@"cd C:\INETPUB\WWWROOT\SlikSvn\bin");       

   processSVNorTFS.StandardInput.WriteLine("svn ls svn://india01/Repo" + svnloc);
        processSVNorTFS.StandardInput.Close(); // line added to stop process from hanging on ReadToEnd()

   SVNorTFS = SVNorTFS + processSVNorTFS.StandardOutput.ReadToEnd();
   if (svnloc == "/branches")
   {
      SVNorTFS_branches = SVNorTFS;
      //SVNorTFS_branches = processSVNorTFS.StandardOutput.ReadToEnd();
   }

} 
```

此代码在我的机器上运行良好，但在将其发布到 IIS(V5.1) 服务器后它无法运行。我需要为像 sliksvn 这样的 IIS 服务器配置什么吗？请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:35:56.773

最后我知道（这可以追溯到很多年前，所以它可能已经过时了），通过 IIS 执行应用程序存在重大的安全问题。

如果您正在使用 .NET 代码并需要执行 SVN 操作，您应该使用[SharpSVN](http://sharpsvn.open.collab.net/)

# java - 如何通过java程序找到最新的jar版本？

> ID：13702785
> 
> 赞同：1
> 
> 时间：2012-12-04T12:21:27.837
> 
> 标签：java

在我的项目中有 40 到 50 个 jar 文件可用，每次都需要花费大量时间来找出每个 jar 的最新版本。你能帮我**写一个java程序**吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:23:38.513

您可能只想使用 maven：[http](http://maven.apache.org/) ://maven.apache.org/ 或其他依赖项管理器，例如 Ivy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:47:46.407

```
At the time of ant-build please call this method
public void ExpungeDuplicates(String filePath) {
    Map<String,Integer> replaceJarsMap = null;
    File folder = null;
    File[] listOfFiles = null;
    List<String> jarList = new ArrayList<String>();
    String files = "";
    File deleteFile = null;
    Iterator<String> mapItr = null;
    //String extension ="jar";
    try {
            folder = new File(filePath);
        listOfFiles = folder.listFiles();
        for (int i = 0; i < listOfFiles.length; i++) {
            if (listOfFiles[i].isFile()) {
                files = listOfFiles[i].getName();
                jarList.add(files);
            }
        }
        if (jarList.size() > 0) {
            replaceJarsMap = PatternClassifier.findDuplicatesOrLowerVersion(jarList);  
            System.err.println("Duplicate / Lower Version - Total Count : "+replaceJarsMap.size());
            mapItr = replaceJarsMap.keySet().iterator();
            while (mapItr.hasNext()) {
                String key = mapItr.next();
                int repeat = replaceJarsMap.get(key);
                System.out.println( key +" : "+repeat);
                for (int i = 0; i <repeat; i++) {
                    deleteFile = new File(filePath + System.getProperty ("file.separator")+key);
                    try{
                    if (deleteFile != null && deleteFile.exists()){
                        if(deleteFile.delete()){
                            System.err.println(key +" deleted");
                        }
                    }
                    }catch (Exception e) {
                    }
                }
            }
        }

} catch (Exception e) {
    // TODO: handle exception
}
} 
```

You only need to give the path of your Lib to this function.This method will find all the duplicate or lower version of of file. And the crucial function is given below...Which finds out the duplicates from the list of files you provided.

```
public static Map<String,Integer> findDuplicatesOrLowerVersion(List<String> fileNameList) {
    List<String> oldJarList = new ArrayList<String>();
    String cmprTemp[] = null;
    boolean match = false;
    String regex = "",regexFileType = "",verInfo1 = "",verInfo2 = "",compareName = "",tempCompareName = "",tempJarName ="";
    Map<String,Integer> duplicateEntryMap = new HashMap<String, Integer>();
    int count = 0;
    Collections.sort(fileNameList, Collections.reverseOrder());
    try{
        int size = fileNameList.size();
        for(int i = 0;i<size;i++){
            cmprTemp = fileNameList.get(i).split("[0-9\\._]*");
            for(String s : cmprTemp){
                compareName += s;
            }
            regex = "^"+compareName+"[ajr0-9_\\-\\.]*";
            regexFileType = "[0-9a-zA-Z\\-\\._]*\\.jar$"; 
            if( fileNameList.get(i).matches(regexFileType) && !oldJarList.contains(fileNameList.get(i))){
                for(int j = i+1 ;j<size;j++){
                    cmprTemp = fileNameList.get(j).split("[0-9\\._]*");
                    for(String s : cmprTemp){
                        tempCompareName += s;
                    }
                    match = (fileNameList.get(j).matches(regexFileType) && tempCompareName.matches(regex));
                    if(match){
                            cmprTemp = fileNameList.get(i).split("[a-zA-Z\\-\\._]*");
                            for(String s : cmprTemp){
                                verInfo1 += s;
                            }
                            verInfo1 += "000";
                            cmprTemp = fileNameList.get(j).split("[a-zA-Z\\-\\._]*");
                            for(String s : cmprTemp){
                                verInfo2 += s;
                            }
                            verInfo2 += "000";
                            int length = 0;
                            if(verInfo1.length()>verInfo2.length()){
                                length = verInfo2.length();                         
                        }else{
                            length = verInfo1.length();
                        }
                        if(Long.parseLong(verInfo1.substring(0,length))>=Long.parseLong(verInfo2.substring(0,length))){
                            count = 0;
                            if(!oldJarList.contains(fileNameList.get(j))){
                                oldJarList.add(fileNameList.get(j));
                                duplicateEntryMap.put(fileNameList.get(j),++count);
                            }else{
                                count = duplicateEntryMap.get(fileNameList.get(j));
                                duplicateEntryMap.put(fileNameList.get(j),++count);
                            }
                        }else{
                            tempJarName = fileNameList.get(i);
                        }
                        match = false;verInfo1 = "";verInfo2 = "";
                }
                    tempCompareName = "";
                }
                if(tempJarName!=null && !tempJarName.equals("")){
                    count = 0;
                    if(!oldJarList.contains(fileNameList.get(i))){
                        oldJarList.add(fileNameList.get(i));
                        duplicateEntryMap.put(fileNameList.get(i),++count);
                    }else{
                        count = dupl    icateEntryMap.get(fileNameList.get(i));
                        duplicateEntryMap.put(fileNameList.get(i),++count);
                    }
                    tempJarName = "";
                }
            }
            compareName = "";
        }
    }catch (Exception e) {
        e.printStackTrace();
    }
    return duplicateEntryMap;
} 
```

What findDuplicatesOrLowerVersion(List fileNameList) function task - Simply it found the duplicates and passting a map which contains the name of the file and number of time the lower version repeats.

```
Try this. The remaining file exist in the folder should be latest or files with out duplicates.Am using this for finding the oldest files.on the basis of that it will find the old and delete it.
This am only checking the name..Futher improvement you can made.

Where PatternClassifier is a class which contains the second method given here. 
```

# file - 如何在动作脚本 3 中播放 swf 文件后转到下一帧

> ID：13702787
> 
> 赞同：1
> 
> 时间：2012-12-04T12:21:29.773
> 
> 标签：file, flash

我目前正在开发一款小型 Flash 游戏，但不知何故无法实现我对游戏的介绍。我导出了一个 swf 文件，该文件在第一帧中加载和播放。播放完介绍后，我希望它转到第 2 帧以进入开始屏幕，但由于某种原因，介绍 swf.file 只是循环播放。

我也尝试使用 nextFrame 方法，但发生了同样的情况。有任何想法吗？我真的很感激。

```
var swfLoader:Loader = new Loader();

// URLRequest points to your external SWF
var swfFile:URLRequest = new URLRequest("intro_stop.swf");

var container:MovieClip= new MovieClip();

swfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, swfLoadedHandler);

function swfLoadedHandler(e:Event):void {
    trace("swf loaded");
}

swfLoader.load(swfFile);

container.addChild(swfLoader);

var currentSWF:MovieClip= new MovieClip();
 currentSWF = MovieClip(swfLoader.content);

currentSWF.gotoAndStop(2); 
```

# objective-c - IOS：无法从按下主页键的位置恢复动画

> ID：13702793
> 
> 赞同：1
> 
> 时间：2012-12-04T12:21:41.837
> 
> 标签：objective-c, ios, xcode, caanimation, home-button

我的项目中有一个问题，即 UIView 动画不会从按下主页按钮的位置恢复。

这些是步骤（讨论的简化示例）：

1) 我有一个简单的项目，其中包含应用程序委托 h&m 文件和单个视图控制器

2) 在 xib 中，我有一个设置为 alpha=0 的 UIView

3）在视图控制器的viewdidload中，我正在做一个动画如下：

```
 [UIView animateWithDuration:20.0 animations:^{_testView.alpha = 1.0;}]; 
```

4）这很好 - 在 20 秒内，视图逐渐变得完全可见（如预期的那样）

问题是当我在两者之间按下主页底部时 - 例如从动画开始 5 秒 - 如果我在按下主页键后立即返回应用程序，则动画不会从按下主屏幕的位置开始 - 而是它加载一个完全可见的视图。

这就是我为解决这个问题所做的：

1) 从应用委托创建本地通知。- 在 applicationDidEnterBackground 中：用于暂停和在 applicationDidBecomeActive 中：用于恢复动画

2）在视图控制器中，我正在检查本地通知并基于该通知执行恢复层和暂停层（根据苹果推荐的带有 CALayer 对象的 pauselayer 和 resumelayer 方法）

3) 在调试模式下检查断点 - 控件按预期进入暂停和恢复方法

4) 但是，最终结果并不像预期的那样 - 总是在完全提交动画的情况下加载视图

我怀疑无论我做什么，视图都会加载 alpha=1.0 的承诺动画；

有人可以指点我解决这个问题吗？检查了其他 SO 帖子的暂停/恢复动画 - 没有任何帮助。

基本上我想从按下主页按钮的那一刻重新开始动画

谢谢

# spring - 延迟初始化休眠

> ID：13702794
> 
> 赞同：0
> 
> 时间：2012-12-04T12:21:43.063
> 
> 标签：spring, hibernate

我有这种类型的错误。原因是因为我使用的是 sessionFactory bean 和 transactionmanager。基本上我用谷歌搜索并说将列设置为 FetchType.EAGER。但是即使我这样做了，它仍然显示相同的错误，就好像什么都没发生一样。请帮忙。

谢谢

错误：org.hibernate.LazyInitializationException：未能延迟初始化角色集合：com.database.entity.User.roles，没有会话或会话已关闭

```
POJOS:
@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER, mappedBy="user")
public Set<Role> getRoles() {
return this.roles;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T12:49:30.270

可能是交易问题。标记获取用户并使用注释检查其角色的方法（或测试）`@Transactional`。检索用户后，数据库会话将关闭。因此，当您尝试获取用户的角色时，您会收到“没有会话或会话已关闭”错误。

提供更多信息（例如调用方法代码列表）是必须知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T12:05:08.087

可能在您提到 LAZY 的角色侧映射中，在这里您提到了 EAGER。这就是为什么它可能会出错。我认为，实际的解决方案是 .. 给 LAZY 而不是给 EAGER 并使用 Hibernate.initialize(yourset); 在 DAO 实现中，您要从其中加载此集合。在我的情况下，我正在使用 findById 加载集合：

```
 @Override
    public Branch findByBranchId(Long id) {
            Branch branch=findById(id);
            Hibernate.initialize(branch);
            Hibernate.initialize(branch.getEmployeeSet());
            return branch;
       } 
```

Hibernate.initialize(SetYouWantToFetch) 将解决 Fetch Type 的问题：LAZY

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:41:06.170

我会尝试`Hibernate.initialize( pojo.getRoles() );`在关闭 Hibernate 会话之前做。

# java - Jbehave：我可以得到一个运行 Jbehave 的示例，对此我没有几个问题。

> ID：13702796
> 
> 赞同：1
> 
> 时间：2012-12-04T12:21:47.700
> 
> 标签：java, selenium, selenium-webdriver, jbehave, jbehave-plugin

这是我可以开始工作的示例。[http://ivanz.com/2011/05/25/java-bdd-with-jbehave-and-watij-in-eclipse-with-junit/](http://ivanz.com/2011/05/25/java-bdd-with-jbehave-and-watij-in-eclipse-with-junit/)

问题：

1.  这个例子有一个故事。如果我需要多个故事，
    我可以将它写在同一个文件中，还是应该为我拥有的每个故事创建一个新的 .story 文件？
2.  一个故事可以有多个场景，如何处理这种场景

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:50:23.210

一般来说，一个故事包含一个或多个关于软件特定行为/功能的场景。例如，“登录故事”处理用户尝试登录、使用有效数据、过期帐户、已登录等的所有情况。试图涵盖注销功能是，双关语，一个不同的故事。

因此，按照惯例，一个故事文件只包含一个故事的场景。该框架不限制您将注销场景放入处理登录场景的同一个故事文件中，但只有一个叙述块可用。此外，它还允许您更好地分离相应的步骤；例如，在登录故事期间不需要提供用于注销的必要绑定步骤。

至于将更多场景添加到故事文件中，只需用新行分隔它们并以“场景：”关键字开头。

例如：

```
Scenario: Successfull login
Given ...
When ...
Then ...

Scenario: Login with no password
Given ... 
```

# html - 带有页面链接的 HTML iframe

> ID：13702801
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:21:53.313
> 
> 标签：html, iframe, hyperlink

我知道使用 iframe 并不总是最好的主意，但就我而言，它使事情变得更容易。我有一个网站 A，其中包含指向同一网站上其他部分的链接（使用`<a name=...`）。我有一个秒站点 B，它有一个包含 A 的 iframe。一切正常，除了页面超链接，如果你点击它们，什么也不会发生。

有谁知道在 iframe 中是否可以使用命名超链接？如果是的话，如何让它们工作。

**编辑：**

好像我说的不够清楚。该文件名为 test.html (http://www.domain.com/embedded/test.html)，顶部包含一个超链接

```
<a href="#examples">Examples</a> 
```

然后在最后的某个地方有一个链接

```
<a name="examples"></a> 
```

因此，当您单击顶部链接时，页面应向下滚动到底部链接。我有第二页（http://www.domain.com/index.html），其中包含 test.html 的 iframe。将鼠标悬停在链接上（在 iframe 内）时，它会显示[http://www.domain.com/embedded/test.html#examples](http://www.domain.com/embedded/test.html#examples)。我不是 iframe 专家，但这个链接似乎更愿意重定向到实际文件（到 #examples），而不是跳转到 iframe 内。正如我之前所说，单击链接时没有任何反应。刚刚在 Chrome 中测试，它可以工作。似乎这是 Firefox 特有的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:26:46.847

您问题的这些部分让我闻到了一些东西：“指向同一站点上其他部分的链接（使用`<a name=...`）”和“命名超链接”......

用于移动到*同一*页面其他部分的超链接：

`<a href="#BOOKMARK">Goto BOOKMARK</a>`

*以及同一*页面中其他地方的锚点（书签） ：

`<a name="BOOKMARK"></a>`

无论它们是否显示在每个 HTML 文档中，它们都`iframe`适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-21T08:57:12.870

I had a similar problem. I too wanted a link in an embedded page to point to a bookmark in the containing page. But I am not sure if our circumstances are exactly the same.

A local link such as

`<a href="#BOOKMARK">`

will only look for an anchor in the same page as the link, i.e. in the embedded page. An approach such as

`<a href="containing-page.html#BOOKMARK" target="top">`

will only work if your link always references the same containing page. (The target needs to be specified, to display the page outside the iframe.) I am not sure if this will meet your needs.

If you want to re-use a common bookmark name in different containing pages, as I do, the design effectively requires the destination url to be treated as a variable, and that cannot be done using pure HTML. It requires javascript or similar.

It was in fact more elegant for me to add the bookmark link to the containing page, so that I do not need to standardize my bookmark names. This does not even need javascript, just a bit of css.

What I did was to position the bookmark link over the embedded display, so that it looks like it is part of the embedded page. In this example, the iframe is fixed at the top of the page and the bookmark link positioned over its top left corner.

```
<iframe style="position:fixed; left:0pt; top:0pt;" src="embedded-page.html"></iframe>
<div style="position:fixed; left:0pt; top:0pt;">
    <a href="#BOOKMARK">My Bookmark</a>
</div> 
```

With a bit of css refinement, this gives some flexibility of layout. For your issue, you may need to stick with javascript.

# javascript - 防止组合框更改其值

> ID：13702803
> 
> 赞同：0
> 
> 时间：2012-12-04T12:21:57.120
> 
> 标签：javascript, jsp, combobox

我有 4 个组合框，attr1、attr2、attr3、attr4 基于一个，另一个将在 jquery Ajax 中绘制。

要求是

如果 attr1 大小为 1，则自动加载 attr2，如果 attr2 大小为 1，则应加载 attr3，但如果 attr2 大小大于 1 值，则选择组合中的一个值并加载 attr3。同样，其他两个也需要被完成。

如何防止组合框改变其值加载下一个组合？是否有任何事件阻止选择但应该调用 js 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:30:27.507

您能否发布一些代码或您尝试过的内容，例如

脚本：

```
<script type="text/javascript">
$(
  function()
  {
    $('#officeItemList').combobox();    
  });
</script> 
```

HTML：

```
<head>
<title>jquery.combox example</title>
<script type="text/javascript" src="Scripts/jquery.js"></script>    
<script type="text/javascript" src="Scripts/jquery.dimensions.js"></script>
<script type="text/javascript" src="Scripts/jquery.combobox.js"></script>
</head>
<body>
<select id="officeItemList">
    <option value="1">eraser</option>
    <option value="3">pencil</option>
    <option value="4">ruler</option>
    <option value="5">ink</option>
    <optgroup label="paper types">
        <option value="7">A4 paper</option>
        <option value="8">A3 paper</option>
        <option value="9">letter-sized paper</option>
    </optgroup>
    <optgroup label="chair types">
        <option value="10">executive</option>
        <option value="11">janitor</option>
        <option value="12">developer</option>
    </optgroup>     
</select>
</body> 
```

# javascript - 父窗口 打开子窗口

> ID：13702808
> 
> 赞同：6
> 
> 时间：2012-12-04T12:22:22.297
> 
> 标签：javascript, jsp

我想要一个打开子窗口的页面。子窗口将被重定向到其他网站进行处理。其他网站将通过重定向子窗口将结果发送到我们的服务器。我们的服务器将处理结果并返回父窗口并关闭子窗口。可以做到吗？怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T12:27:16.627

1.  您使用[window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)方法打开一个子窗口并存储返回的引用以便以后与它进行交互。
2.  您可以使用子窗口中的[window.parent](https://developer.mozilla.org/en-US/docs/DOM/window.parent)属性来访问父窗口。

[这](http://www.codeproject.com/Articles/25388/Accessing-parent-window-from-child-window-or-vice)是一篇演示该方法的文章。

# rtc - 如何在 RTC 源代码管理中恢复本地删除的文件

> ID：13702809
> 
> 赞同：2
> 
> 时间：2012-12-04T12:22:25.863
> 
> 标签：rtc

我从本地源目录中删除了一个文件和包，我正在尝试使用 RTC 替换它。当我查看“未决更改”时，该文件没有出现以便再次添加它。此外，当我右键单击项目并选择“比较”时，没有选项可以与存储库中的最新版本进行比较。右键单击并查看“团队”似乎也没有比较的选项。如何恢复本地删除的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:32:58.110

您需要重新加载您的 repo 工作区，除非您可以选择要加载的项目部分。

从“[从 Rational Team Concert 2.0、3.0 和 3.0.1 中的 Jazz 源代码控制存储库加载内容](https://jazz.net/library/article/192/)”：

![加载文件夹](../Images/3127b13810f07f48e0f108146a6dc80f.png)

这将在本地工作区中恢复文件的最新签入版本。

[您将在文章“使用 Rational Team Concert 查找丢失的内容](https://jazz.net/library/article/191/)”中看到更多选项（对于其他删除情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T07:32:35.440

如果您只需要重新加载几个文件，您可以右键单击该组件，然后选择 Show->Repository File

在存储库文件浏览器中，您可以查找要恢复的文件。右键单击并选择“加载”或“加载为”（如果需要指定加载位置。

# android - Android - 不想反编译我的 apk 文件

> ID：13702814
> 
> 赞同：1
> 
> 时间：2012-12-04T12:22:44.190
> 
> 标签：android, security, apk

我正在开发一个 android 电子邮件客户端应用程序并使用 ksoap2 库调用 web 服务，并编写一些加密算法来加密我的客户端中的数据。

在一些网站上，我读过“可以使用一些反编译器来反编译 apk”。（即）从 apk 文件中获取源代码。

但我想保护我的代码。反编译后不要显示加密算法代码或者不想反编译我的apk文件。有可能这样做吗？请你能给一些建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T12:26:22.153

编辑文件（在项目根目录中）`project.propiertie`并添加该行

```
proguard.config=proguard.cfg 
```

它完成了。当您尝试生成应用程序的签名 apk 时，它会花费更长的时间并且会被混淆。

如果在生成 apk 时收到“转换为 dalvik 错误”，则需要更新 sdk 的 proguard。为此，您需要转到[ProGuard](http://proguard.sourceforge.net/)页面的下载部分。下载最后一个稳定版本并将其内容放入

```
SDK_ROOT/tools/proguard 
```

当然之前删除现有的内容。

您可以在他们的页面上查看 Proguard 手册（链接在上面）和[Android 的 Proguard 页面](http://developer.android.com/tools/help/proguard.html)以获取有关 ProGuard 的更多信息

这个过程称为**混淆代码。**

编辑：

**获取混淆apk的步骤：**

1) 从“http://sourceforge.net/projects/proguard/files/”下载最新的proguard。当前最新版本是proguard4.7

2) 将“C:\Program Files (x86)\Android\android-sdk\tools\proguard”的“bin”和“lib”文件夹替换为最新下载的proguard文件夹。

3) 检查 Eclipse 中的 SDK 位置是否有空格，然后转到窗口 > 首选项 > Android。如果有空格，则将其替换为：

```
c:\Progra~2\android\android-sdk (for windows 64-bit)
c:\Progra~1\android\android-sdk (for windows 32-bit) 
```

4) 检查 proguard.cfg 文件是否在项目的根文件夹中，并在 android 项目的 project.properties 文件中添加“proguard.config=proguard.cfg”。

5) 现在导出您的项目以获得混淆的 apk。

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:25:24.990

[您绝不能通过默默无闻来](http://en.wikipedia.org/wiki/Security_through_obscurity)依赖安全性。

如果您认为加密数据会受到加密算法知识的影响，那么您就没有做安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:27:07.543

It will always be possible to decompile any file, if the "hacker" knows how to do so. That's why there are still cracks for paid applications, because people take their spare time to decompile/crack applications. All you can do is to make them have a hard time by using as many tools as you can. The first choice (and that comes disabled by default) is [ProGuard](http://developer.android.com/tools/help/proguard.html)

# c++ - std::map 性能 C++

> ID：13702817
> 
> 赞同：2
> 
> 时间：2012-12-04T12:22:58.357
> 
> 标签：c++, stl, map, containers

我对 std::map 性能有疑问。在我的 C++ 项目中，我有一个`GUIObject`s 列表，其中还包括`Window`s。`for`我在循环中绘制所有内容，如下所示：

```
unsigned int guiObjectListSize = m_guiObjectList.size();
for(unsigned int i = 0; i < guiObjectListSize; i++)
{
    GUIObject* obj = m_guiObjectList[i];
    if(obj->getParentId() < 0)
    obj->draw();                                
} 
```

在这种情况下，当我运行一个项目时，它可以顺利运行。我有 4 个窗口和一些其他组件，如按钮等。

但是我想单独处理绘制窗口，所以修改后，我的代码如下所示：

```
// Draw all objects except windows
unsigned int guiObjectListSize = m_guiObjectList.size();
for(unsigned int i = 0; i < guiObjectListSize; i++)
{
    GUIObject* obj = m_guiObjectList[i];
    if((obj->getParentId() < 0) && (dynamic_cast<Window*>(obj) == nullptr))
        obj->draw();        // GUIManager should only draw objects which don't have parents specified
                            // And those that aren't instances of Window class
                            // Rest objects will be drawn by their parents
                            // But only if that parent is able to draw children (i.e. Window or Layout)
}

// Now draw windows
for(int i = 1; i <= m_windowList.size(); i++)
{
    m_windowList[i]->draw(); // m_windowList is a map!
} 
```

所以我创建了一个`std::map<int, Window*>`，因为我需要在地图中将 s 的 z-indexes`Window`设置为`key`s。但问题是当我运行这段代码时，它真的很慢。尽管我只有 4 个窗口（地图大小为 4），但我可以看到 fps 速率非常低。我不能说一个确切的数字，因为我还没有实现这样的计数器。

谁能告诉我为什么这种方法这么慢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:38:39.350

这就是虚函数的用途。你不仅消除了慢`dynamic_cast`，而且你得到了更灵活的类型检查。

```
// Draw all objects except windows
unsigned int guiObjectListSize = m_guiObjectList.size();
for(unsigned int i = 0; i < guiObjectListSize; i++)
{
    GUIObject* obj = m_guiObjectList[i];
    if(obj->getParentId() < 0)
        obj->drawFirstChance();
}

// Now draw windows
for(int i = 1; i <= m_windowList.size(); i++)
{
    m_windowList[i]->drawSecondChance();
} 
```

Where`drawFirstChance`对 windows 和其他浮动对象没有任何作用。

下一个优化机会是使窗口列表 a`vector`并仅在其更改时执行 z 顺序排序（假设窗口的创建/销毁/重新排序的频率远低于绘制窗口的频率）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:27:53.607

这段代码的问题似乎与使用 std::map 无关。相反，瓶颈在于使用`dynamic_cast`，这是一个非常昂贵的操作，因为它需要遍历给定类的继承树。

对于您的 GUI 组件，这棵树很可能相当大，这肯定可以解释为什么在每次迭代中这样做会减慢整个方法的速度。

# dojo - Dojo Dijit - 小部件中的小部件

> ID：13702818
> 
> 赞同：0
> 
> 时间：2012-12-04T12:23:08.290
> 
> 标签：dojo

*   我正在使用 OneUI，它基本上只是 dojo didjit 小部件的扩展。

我需要将一个小部件放在一个小部件中。我正在使用带有 data-dojo-type="dojo.store.Memory" 的 div。然后我使用 data-dojo-props 设置这个的各种元素。例如，我在 data-dojo-props 中设置了一些跨度和链接。这些工作和显示都很好。我现在正在尝试添加一个 div，它本身就是一个小部件。所以我添加了 div，在这个 div 中我将 data-dojo-type 设置为 HoverHelpToolTip 并设置一些其他元素，例如 onmouseover 和一些 data-dojo-props。

本质上应该发生的是悬停帮助工具提示应该在鼠标悬停时弹出 - 但它根本不起作用。

所以我想我的问题是如何正确地将一个小部件嵌套在另一个小部件中？

谢谢

示例代码

我声明如下...

```
<div data-dojo-id="store1819454249457680384" data-dojo-type="dojo.store.Memory"     id="store1819454249457680384" data-dojo-props="data:[{"Name":"<!--o3nv-->&nbsp;","id":1,"gender":"Female","ActionColumn":"<span class=\"actions\" ><a href=\"...\" onclick=\"...\" title=\"Click here to edit this item\" >Edit<\/a><span class=\"linksDivider\" > | <\/span><a href=\"#\" onclick=\"...\" title=\"Click here to delete this item\" >Delete<\/a><\/span>","Person.firstName":"werrwewre",

<!-- This is the start of the code in question -->

"HelpColumn":"<div class=\"hiddenHelpDialog\" data-dojo- props=\"forceFocus:true,connectId:['helpAnchor_rowHelp10309939']\" data-dojo- type=\"idx\/oneui\/HoverHelpTooltip\" id=\"rowHelp10309939\" style=\"text-align: left;  position:relative; display:none\" widgetid=\"rowHelp10309939\" ><div  class=\"helpDivDialog\" ><p class=\"helpFieldHeadingDialog\" >\u00a0<\/p><p  class=\"helpDescriptionTextDialog\" >BLAH BLAH BLAH BLAH<\/p><\/div><\/div><a  class=\"openHelpLink openHelpLinkDisplayField\" id=\"helpAnchor_rowHelp10309939\"  onmouseover=\"idx.oneui.HoverHelpTooltip.defaultPosition=['above']\" ><\/a>"}]" ><!-- comment--></div> 
```

它生成以下 HTML，除了 HoverHelpTip 没有出现之外，它可以正常工作。onmouseover 正在触发。就像小部件没有在dojo注册一样？！？！

```
<div widgetid="rowHelp1248193624" style="text-align: left; position:relative; display:none" id="rowHelp1248193624" data-dojo-type="idx/oneui/HoverHelpTooltip" data-dojo-props="forceFocus:true,connectId:'helpAnchor_rowHelp1248193624'" class="hiddenHelpDialog">        <div class="helpDivDialog">
<p class="helpFieldHeadingDialog">&nbsp;</p>
<p class="helpDescriptionTextDialog">BLAH BLAH BLAH BLAH</p></div></div>
<a class="openHelpLink openHelpLinkDisplayField" id="helpAnchor_rowHelp1248193624" onmouseover="idx.oneui.HoverHelpTooltip.defaultPosition=['above'];">
<span class="hidden">&nbsp;</span></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:06:49.193

当 dojo 准备好时，我通过在 DOM 节点上调用 parser.instantiate(node) 来解决此问题。我不知道为什么，但由于某种原因，小部件没有被拾取/解析。

我检查了 dijit.registry 并没有提及它，使用 dijit.byid 的查找返回未定义。然而，显式实例化节点有效。有人知道为什么吗？？？

# linux - 使用 awk/sed 更改第一列中的日期格式

> ID：13702824
> 
> 赞同：3
> 
> 时间：2012-12-04T12:23:35.533
> 
> 标签：linux, sed, awk

我有一个每天早上自动运行的 shell 脚本，它将当天的结果附加到一个文本文件中。该文件的第一列应该有今天的日期，后面是用逗号分隔的结果。我使用命令 date +%x 以所需格式 (dd/mm/yy) 获取日期。但是在一台计算机上 date +%x 返回 mm/dd/yyyy （知道为什么会这样吗？）。然后我按日期顺序对文件中的数据进行排序。

这是这样一个文本文件的片段

```
29/11/12,9654.80,194.32,2.01,7.19,-7.89,7.65,7.57,3.98,9625.27,160.10,1.66,4.90,-4.79,6.83,4.84,3.54                
03/12/12,5184.22,104.63,2.02,6.88,-6.49,7.87,6.67,4.10,5169.52,93.81,1.81,5.29,-5.45,7.87,5.37,4.10                
04/12/12,5183.65,103.18,1.99,6.49,-6.80,8.40,6.66,4.38,5166.04,95.44,1.85,6.04,-6.49,8.40,6.28,4.38                
11/07/2012,5183.65,102.15,1.97,6.78,-6.36,8.92,6.56,4.67,5169.48,96.67,1.87,5.56,-6.10,8.92,5.85,4.67                
07/11/2012,5179.39,115.57,2.23,7.64,-6.61,8.83,7.09,4.62,5150.17,103.52,2.01,7.01,-6.08,8.16,6.51,4.26                
11/26/2012,5182.66,103.30,1.99,7.07,-5.76,7.38,6.37,3.83,5162.81,95.47,1.85,6.34,-5.40,6.65,5.84,3.44                
11/30/2012,5180.82,95.19,1.84,6.51,-5.40,7.91,5.92,4.12,5163.98,91.82,1.78,5.58,-5.07,7.05,5.31,3.65 
```

是否可以使用 awk 或 sed 将后四行的日期格式更改为正确的日期格式？我只想将 mm/dd/yyyy 格式的日期格式更改为 dd/mm/yy。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:50:34.260

看起来您正在使用两种不同风格（版本）的`date`. 要检查你有哪些版本，我认为`GNU date`接受这个`--version`标志，而其他版本，比如`BSD/OSX`不会接受这个标志。

由于您可能使用完全不同的系统，因此`date`完全避免使用`perl`打印当前日期可能是最安全的：

```
perl -MPOSIX -e 'print POSIX::strftime("%d/%m/%y", localtime) . "\n"' 
```

如果你确定你`GNU awk`在两台机器上都有，你可以像这样使用它：

```
awk 'BEGIN { print strftime("%d/%m/%y") }' 
```

* * *

要修复您拥有的文件，这是我的使用方法`GNU awk`：

```
awk '{ print gensub(/^(..\/)(..\/)..(..,)/, "\\2\\1\\3", "g"); next }1' file 
```

或使用`sed`：

```
sed 's/^\(..\/\)\(..\/\)..\(..,\)/\2\1\3/' file 
```

结果：

```
29/11/12,9654.80,194.32,2.01,7.19,-7.89,7.65,7.57,3.98,9625.27,160.10,1.66,4.90,-4.79,6.83,4.84,3.54                
03/12/12,5184.22,104.63,2.02,6.88,-6.49,7.87,6.67,4.10,5169.52,93.81,1.81,5.29,-5.45,7.87,5.37,4.10                
04/12/12,5183.65,103.18,1.99,6.49,-6.80,8.40,6.66,4.38,5166.04,95.44,1.85,6.04,-6.49,8.40,6.28,4.38                
07/11/12,5183.65,102.15,1.97,6.78,-6.36,8.92,6.56,4.67,5169.48,96.67,1.87,5.56,-6.10,8.92,5.85,4.67                
11/07/12,5179.39,115.57,2.23,7.64,-6.61,8.83,7.09,4.62,5150.17,103.52,2.01,7.01,-6.08,8.16,6.51,4.26                
26/11/12,5182.66,103.30,1.99,7.07,-5.76,7.38,6.37,3.83,5162.81,95.47,1.85,6.34,-5.40,6.65,5.84,3.44                
30/11/12,5180.82,95.19,1.84,6.51,-5.40,7.91,5.92,4.12,5163.98,91.82,1.78,5.58,-5.07,7.05,5.31,3.65 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:31:49.300

这应该有效：`sed -re 's/^([0-9][0-9])\/([0-9][0-9])\/[0-9][0-9]([0-9][0-9])(.*)$/\2\/\1\/\3\4/'`

它可以做得更小，但我做了它，所以它的作用会更明显（4组，只需切换月/日并删除一年的前两个字符）。

提示：如果您不想要`cat`该文件，您可以`in place`使用`sed -i`. 但是要小心，如果你把错误的表达式放进去，你最终可能会破坏你的源文件。

**注意**：这假设如果年份指定为 4 位数字，则月/日是相反的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:50:29.190

另一种解决方案：

```
awk -F/ 'NR<4;NR>3{a=$1;$1=$2;$2=a; print $1"/"$2"/" substr($3,3,2) substr($3,5)}' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T12:53:17.757

下面的命令将做到这一点。

*注意：无论文件中有多少行。这只会更改最后 4 行。*

```
tail -r your_file| awk -F, 'NR<5{split($1,a,"/");$1=a[2]"/"a[1]"/"a[3];print}1'|tail -r 
```

好吧，我可以在不使用管道和使用单个 awk 语句的情况下找到某种方法，并且该解决方案确实需要一个 tail 命令：

```
awk -F, 'BEGIN{cmd="wc -l your_file";while (cmd|getline tmp);split(tmp,x)}x[1]-NR<=4{split($1,a,"/");$1=a[2]"/"a[1]"/"a[3];print}1' your_file 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-04T12:34:46.800

使用 awk：

```
$ awk -F/ 'NR>3{x=$1;$1=$2;$2=x}1' OFS="/" file 
```

通过使用 / 作为分隔符，您需要做的就是交换第一个和第二个字段，这在此处使用临时变量完成。

# php - 即使用户会话被劫持，也可以避免丢失用户数据的额外步骤

> ID：13702826
> 
> 赞同：0
> 
> 时间：2012-12-04T12:23:38.013
> 
> 标签：php, session, security, local-storage

我正在考虑一种额外的安全措施来保护我的网站用户数据，即使他的会话被劫持。请给我指点，也可能对其他正在考虑额外安全性的人有所帮助。

我的计划是在浏览器的本地存储中使用一个额外的密钥，如会话 ID，这里可能有一个论点，它可能不适用于某些浏览器，但无论如何我的应用程序正在使用网络套接字，所以我可以假设他们有本地存储也。

所以..当用户登录时，我将分配一个存储在本地存储中的密钥，之后通过 POST 或 AJAX 从服务器请求的任何安全数据都应该包含这个密钥作为请求的一部分，并且这个验证关键是在会话 id 验证之上。

你们怎么想，这是否会为我提供更多的安全性来防止会话劫持（可能不是 100%，但它仍然可能让黑客的生活变得困难）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:25:45.333

所以你想避免杂项用户的数据丢失......当会话被劫持时你不需要关心丢失数据，因为这样做的用户肯定会是杂项用户......而普通用户不会这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:26:54.457

大多数情况不必那么严重，但如果认为有必要：

[http://php.net/manual/en/session.security.php](http://php.net/manual/en/session.security.php)

这也非常有用：

[http://wblinks.com/notes/secure-session-management-tips](http://wblinks.com/notes/secure-session-management-tips)

# multithreading - 是否每次调用 SetEvent for autoreset 事件都会唤醒一个线程？

> ID：13702828
> 
> 赞同：0
> 
> 时间：2012-12-04T12:23:40.130
> 
> 标签：multithreading, winapi, synchronization

有三个线程和自动重置事件。当第二个和第三个线程正在等待这个事件时，第一个线程调用 SetEvent 两次。系统是否保证两个等待线程都会唤醒？

我在 MSDN 中阅读了 .NET Framework AutoResetEvent 类的注释：不能保证每次调用 Set 方法都会释放一个线程。如果两个调用靠得太近，以至于第二个调用发生在一个线程被释放之前，那么只有一个线程被释放。就好像第二次通话没有发生一样。

Win32 API 是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:02:06.653

考虑以下场景：

```
Event Signaled | Thread 1   | Thread 2      | Thread 3
---------------------------------------------------------
false          | SetEvent() |               |            
true           |            |               |            
true           |            | Wait Complete |            
false          |            |               |            
false          | SetEvent() |               |            
true           |            |               |            
true           |            |               | Wait Complete
false          |            |               | 
```

成功

```
Event Signaled | Thread 1   | Thread 2      | Thread 3
---------------------------------------------------------
false          | SetEvent() |               |            
true           |            |               |  
true           | SetEvent() |               |            
true           |            |               |            
true           |            | Wait Complete |            
false          |            |               |            
false          |            |               | Wait does not complete
false          |            |               | 
```

失败的

根据在特定时间执行哪个线程，您可能会也可能不会完成对其他线程的等待。

您应该将事件更改为手动重置事件，以确保所有线程都将完成等待，并`ResetEvent`在需要时将事件设置回非信号状态。

还有其他选项，例如使用[信号量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685129%28v=vs.85%29.aspx)来控制访问，或者如果您计划只等待很短的时间（自旋锁性能），则使用[关键部分](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)，但手动重置事件似乎是可行的方法。通常，检查[同步对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686364%28v=vs.85%29.aspx)。

# php - 显示每个父类别中可用的产品

> ID：13702832
> 
> 赞同：0
> 
> 时间：2012-12-04T12:23:57.047
> 
> 标签：php, mysql, arrays, categories

我正在使用 osCommerce 创建一个报告页面来显示每天销售的农产品总量。这是迄今为止我用来显示类别和子类别的标记：

```
<table border="0" width="100%" cellspacing="0" cellpadding="2">
<tr class="dataTableHeadingRow">
<td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
<td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
</tr>

<?php

function category_list( $category_parent_id = 0 )
{
   $sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id AND c.parent_id='.$category_parent_id;
   $res  = tep_db_query( $sql );
   $cats = array();

    while ( $cat = tep_db_fetch_array( $res ) )
  {
    $cats[] = $cat;
  }

   if (count($cats) == 0)
    {
  return '';
  }

$list_items = array();

foreach ( $cats as $cat )
{
$list_items[] = '<tr class="dataTableRow"><td class="dataTableContent">'; 
if($category_parent_id != 0)$list_items[] = '&nbsp;&nbsp;&nbsp;';
if($category_parent_id == 0)$list_items[] = '<b>';
$list_items[] = $cat['categories_name'];

if($category_parent_id == 0)$list_items[] = '</b>';
$list_items[] = '</td><td class="dataTableContent">';
$list_items[] = category_list( $cat['categories_id'] );
$list_items[] = '</td></tr>'; 
}
$list_items[] = '';

return implode( '', $list_items );

}  

echo category_list();

?>

</table> 
```

我想在子类别之后显示的是每个产品中的产品，这意味着使用`TABLE_PRODUCTS_TO_CATEGORIES`表格。我有以下代码用于计算产品`$query = 'SELECT COUNT(*) FROM '.TABLE_PRODUCTS_TO_CATEGORIES.' WHERE`categories_id` = "'.$cat['categories_id'].'"';。

我将把它放在我的标记中的哪里，我将如何展示产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:27:29.730

为什么不使用您正在使用的同一查询中`JOIN`的表，如下所示：`TABLE_PRODUCTS_TO_CATEGORIES`

```
select 
  cd.categories_name,
  c.categories_id, 
  c.parent_id, 
  c.sort_order,
  p.* -- You can here select the products details you want to select.
from TABLE_CATEGORIES  c
INNER JOIN TABLE_CATEGORIES_DESCRIPTION cd ON c.categories_id = cd.categories_id 
INNER JOIN TABLE_PRODUCTS_TO_CATEGORIES p  ON p.categories_id = c.categories_id 
WHERE c.parent_id = '.$category_parent_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:21:06.470

这是获取产品的想法，在您检查类别的地方，您还会获得 CATEGORIES_ID

只需在它之后进行另一个查询并调用相同的过程

# javascript - sammyJS javascript插件中的导航问题？

> ID：13702840
> 
> 赞同：5
> 
> 时间：2012-12-04T12:24:25.830
> 
> 标签：javascript, jquery, sammy.js

我`sammy.js`在我的单页应用程序中使用插件。该插件不起作用，每当用户尝试在页面中导航时，它都会在控制台上显示以下错误：

```
[Tue Dec 04 2012 17:48:13 GMT+0530 (India Standard Time)] #main 404 Not Found get /page_home  
Error
arguments: undefined
get stack: function () { [native code] }
message: "404 Not Found get /page_home "
set stack: function () { [native code] }
type: undefined
__proto__: d 
```

这是什么问题，如何解决？

**编辑**

萨米配置代码：

```
 var app = $.sammy('#main', function () {
        this.get('#/:name', function () {
            var id = this.params['name'];
            $.trim(id);
            var flag = true;

            if ($("#main").hasClass("presentation")) {
                $.each(slides, function (i, v) {
                    if ($(v).attr("class") == id) {
                        ScanNavigationD(id);
                        flag = false;
                        return false;
                    }
                });
                if (flag) {
                    ScanNavigationD($(slides[0]).attr("class"));
                }
            }
            else if ($("#main").hasClass("printdoc") || typeof $("#main").attr("class") == "undefined") {
                $.each(Pages, function (i, v) {
                    if ($(v).attr("class") == id) {
                        ScanNavigationD(id);
                        flag = false;
                        return false;
                    }
                });
                if (flag) {
                    ScanNavigationD($(Pages[0]).attr("class"));
                }
            }
        });
    });

    $(function () {
        app.run();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:14:52.683

@tom-rider 问题是 app.run 没有参数调用。sammy app.run 函数接受一个 start_url 参数来设置（通过 _setLocation 方法）在调用 _checkLocation 方法以检查 url 是否更改之前的应用程序当前位置......所以尝试更改

```
app.run(); 
```

和

```
app.run('#/'); 
```

这对我有用。

按照这个[小提琴](http://jsfiddle.net/joeyramone76/qqu56/5/)进行工作演示并查看控制台：没有错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:59:43.033

似乎您`page_home`在运行解析为 404 not found 错误的脚本时作为参数发送。尝试在整个文件中查找“page_home”，以递归方式查找其来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:24:20.120

这个简单的代码会起作用吗？

```
var app = $.sammy('#main', function () {
    this.get('#/:name', function () {
        alert(this.params['name']);
    });
});

$(function () {
    app.run();
}); 
```

如果这个小代码警告'page_home'，你的脚本里面有问题：那么你应该能够回答这些问题：ScanNavigationD-Function 在哪里？“幻灯片”/“页面” - 数组定义在哪里？

编辑：

好的，我在我的电脑上做了另一个测试。这就是我所做的：

1.  创建了一个 html 文档
2.  首先包括 jQuery，然后是 sammy.js

    <script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript">

    <script src="sammy.js" type="text/javascript">

3.  我用虚拟内容填充了我要求的变量和函数：

    <脚本>

    var ScanNavigationD = function() {}, slides = ['slide1', 'slide2'], Pages = ['page1', 'page2'];

    <脚本>

4.  然后我将您的代码复制粘贴到我的 html 文档中。

    <script> //你的代码 <script>

5.  然后我创建了 div-main 容器：

一切正常。我看到你做错的最后一件事是，你只是在你的本地文件系统上。

sammy.js 似乎需要一个网络服务器才能运行！至少本地主机！

```
file://... 
```

不管用

# javascript - 如何重新绑定变量赋值

> ID：13702846
> 
> 赞同：1
> 
> 时间：2012-12-04T12:24:55.800
> 
> 标签：javascript, model-view-controller

我目前正在尝试构建自己的 JS 框架作为一种学习方式。我创建了一种制作新模型的方法，如下所示：

```
var myModel = new $n.model.make({
    data: {
        id: _contentID,
        name: $('#frm_content_name').val()
    },
    route: '/my/path',
    callback: function(){}
}); 
```

make() 函数很简单：

```
$n.model.make = function(obj){

    var self = this;

    self.data = obj.data;
    self.route = obj.route;
    self.callback = obj.callback;

} 
```

如您所见，name 参数被分配给表单输入字段的值。如果我在 UI 上更改此输入字段值，名称参数仍会分配给输入字段的原始值，因此如果我尝试将数据保存到数据库，则没有任何变化。

建立模型后，将数据参数“重新绑定”到其分配的表单字段以获取最新信息的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:38:09.747

如评论中所述，您可以这样做：

```
data: {
    id: _contentID,
    name: function() {
        return $('#frm_content_name').val();
    }
}, 
```

调用`data.name()`总是会获取最新信息。另一种方式是这样的：

```
data {
    id: _contentID,
    name: $('#frm_content_name')
}, 
```

现在你需要打电话`data.name.val()`；由于缺少封装，我个人不太喜欢这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:26:08.410

我找到了我正在寻找的答案——双向数据绑定。这是我用来解决问题的教程：[http ://www.lucaongaro.eu/blog/2012/12/02/easy-two-way-data-binding-in-javascript/](http://www.lucaongaro.eu/blog/2012/12/02/easy-two-way-data-binding-in-javascript/)

# cakephp - 过滤器 AppController 中的 CakePHP 重定向

> ID：13702849
> 
> 赞同：2
> 
> 时间：2012-12-04T12:25:15.213
> 
> 标签：cakephp

在 CakePHP 中，AppController beforeFilter 函数我试图重定向但它不起作用......我收到浏览器错误：重定向太多。

```
if ($this->Session->read('Check.val')) 
{
    $this->redirect(array('controller'=>'pages','action' => 'login')); exit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:29:23.303

原因是，如果会话*中确实*存在该值，那么它总是会重定向。

看起来你正在构建一个登录系统。查看[CakePHP 的内置身份验证组件](https://book.cakephp.org/2/en/core-libraries/components/authentication.html)。

# c++ - C++ 变量总是为零

> ID：13702854
> 
> 赞同：0
> 
> 时间：2012-12-04T12:25:26.383
> 
> 标签：c++, for-loop, zero

我正在运行一个带有一些 if 语句的简单 for 循环。在这个 for 循环中，将根据 for 循环中的索引值给 3 个变量赋值。看起来相当简单，但是，当我运行代码时，值总是为零，我不知道为什么会这样。下面提供了我的 for 循环。我很感激任何建议。

```
double A [N+1];
double r;
double s;
double v;
for(int i = 2; i < N+1; i++)
{
    if(i == 2)
    {
         r = 1/2/i/(i-1);
         s = -1/2/(i*i - 1);
         v = 1/4/i/(i+1);
    }
    else if(i <= N-2 && i > 2)
    {
        r = 1/4/i/(i-1);
        s = -1/2/(i*i - 1);
        v = 1/4/i/(i+1);
    }
    else if(i <= N-4 && i > N-2)
    {
        r = 1/4/i/(i-1);
        s = 0;
        v = 1/4/i/(i+1);
    }
    else
    {
        r = 1/4/i/(i-1);
        s = 0;
        v = 0;
    }

    A[i] = r*F[i-2] + s*F[i] + v*F[i+2];
    cout << r << s << v << endl;

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T12:27:20.263

发生这种情况是因为您使用的是整数除法。一个例子：

```
r = 1/2/i/(i-1); 
```

这与以下内容相同：

```
r = ((1 / 2) / i) / (i - 1); 
```

这与以下内容相同：

```
r = (0 / i) / (i - 1); 
```

......这与：

```
r = 0 / (i - 1); 
```

……那是`0`。

因为`1 / 2`是`0`整数算术。要解决此问题，请使用浮点值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T12:29:12.893

三件事：

1.  `else if(i <= N-4 && i > N-2)`没有意义，那个条件不能成立
2.  您所有的除法都是整数除法 - 要修复，将其中一个数字转换为双精度数。
3.  作为 1 的结果，当 i = N-1 且 i = N 时，将采用最后一个分支，您无论如何都将两个变量强制为 0！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T12:27:46.927

1、2 和 4 是整数。在整数域 1/2 = 0 和 1/4 = 0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T12:28:59.660

对于整数，`1/2` *为零*。我建议（首先）将常量更改`2`为 into`2.0`以确保它们被视为双打。

您可能还希望（尽管可能没有必要）将所有`i`变量也转换为浮点值，只是为了完整性，例如：

```
r = 1.0 / 2.0 / (double)i / ((double)i - 1.0); 
```

这是一个双精度的事实`r`绝不会影响在右侧完成的计算`=`。它只影响最后一位（实际分配）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:31:02.450

由于整数除法，1/2、1/4 和 -1/2 将始终为零。因此请尝试使用 1.0/2.0、1.0/4.0 和 -1.0/2.0 快速排序。但是要遵循基础知识，不要在代码中使用很多幻数。考虑为它们创建常量并使用 .

# java - 静态检查错误：避免在循环中实例化新对象

> ID：13702864
> 
> 赞同：0
> 
> 时间：2012-12-04T12:25:52.770
> 
> 标签：java

我有以下循环，我得到 PMD 静态检查消息：避免在循环中实例化新对象 Voc 是构造函数。我需要在每个循环中创建新实例，有一种不同的方法吗？

```
for (AnnoValue currValue : collection.getValues())
{

Voc(termName, this.nameSpace, this.alias);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:08:36.503

首先确保无论如何您都可以在每次迭代中重用这个 Voc 实例。在这种情况下，将此实例创建移出循环，并可能在循环开始时清除状态信息。

```
Voc vocInst = new Voc();
vocInst.setNamespace(this.nameSpace);
vocInst.setAlias(this.alias);
for (AnnoValue currValue : collection.getValues())
{
  vocInst.clear();
  vocInst.setTermName(termName); // I believe this is local variable and the rest of the parameters are instance variables.
  .....
  .....
} 
```

# php - 处理 PHP 表单时如何将变量分配给重定向标头

> ID：13702870
> 
> 赞同：1
> 
> 时间：2012-12-04T12:26:05.500
> 
> 标签：php, variables, redirect, header, captcha

我有一个表格，我正在通过验证码进行验证。我有一个 if 语句。如果用户输入错误的验证码，它会告诉它返回。否则页面应重定向到以下内容

```
 http://tre.emv3.com/D2UTF8?emv_tag=876020001C384269&emv_ref=EdX7CqkdLe_d8SA9MOPQNCffL0p6Hq3D-jmueKEyWsbQKbo&FIRSTNAME_FIELD=XXXXXXXXX&LASTNAME_FIELD=XXXXXXXXX&DATEOFBIRTH_FIELD=XXXXXXXXX&EMAIL_FIELD=XXXXXXXXX&EMVCELLPHONE_FIELD=XXXXXXXXX&STORE_NAME_FIELD=XXXXXXXXX& 
```

其中每个 XXXXXXXX 都应替换为表单中的变量。当我尝试下面的代码时，变量不会被替换。感谢您的帮助。

```
 <?php session_start(); ?>
      <?php 
      ob_start();
          date_default_timezone_set("Europe/London");
          include_once $_SERVER['DOCUMENT_ROOT'] . '/maininc/securimage/securimage.php';

          $securimage = new Securimage();
          if ($securimage->check($_POST['captcha_code']) == false) {
            // the code was incorrect
            // you should handle the error so that the form processor doesn't continue

            // or you can use the following code if there is no validation or you do not know how
            echo "THIS IS WRONG.<br /><br />";
            echo "Please go <a href='javascript:history.go(-1)'>back</a> and try again.";
            exit;
          }else{
           $FIRSTNAME_FIELD = $_POST['FIRSTNAME_FIELD'];
           $LASTNAME_FIELD = $_POST['LASTNAME_FIELD'];
           $DATEOFBIRTH_FIELD = $_POST['DATEOFBIRTH_FIELD'];
           $EMAIL_FIELD = $_POST['EMAIL_FIELD'];
           $EMVCELLPHONE_FIELD = $_POST['EMVCELLPHONE_FIELD'];
           $STORE_NAME_FIELD = $_POST['STORE_NAME_FIELD'];
           header('location: http://tre.emv3.com/D2UTF8?emv_tag=876020001C384269&emv_ref=EdX7CqkdLe_d8SA9MOPQNCffL0p6Hq3D-jmueKEyWsbQKbo&FIRSTNAME_FIELD=echo$FIRSTNAME_FIELD;&LASTNAME_FIELD=echo$LASTNAME_FIELD;&DATEOFBIRTH_FIELD=echo$DATEOFBIRTH_FIELD;&EMAIL_FIELD=echo$EMAIL_FIELD;&EMVCELLPHONE_FIELD=echo$EMVCELLPHONE_FIELD;&STORE_NAME_FIELD=echo$STORE_NAME_FIELD;&');
          }
      ob_end_flush();
      exit;
      ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:31:41.350

`header`您在函数中的字符串由`'`. 这不会转换变量。更改周围环境`'`并`"`删除 echo 命令。

```
 header("location: http://tre.emv3.com/D2UTF8?emv_tag=876020001C384269&emv_ref=EdX7CqkdLe_d8SA9MOPQNCffL0p6Hq3D-jmueKEyWsbQKbo&FIRSTNAME_FIELD=$FIRSTNAME_FIELD&LASTNAME_FIELD=$LASTNAME_FIELD&DATEOFBIRTH_FIELD=$DATEOFBIRTH_FIELD&EMAIL_FIELD=$EMAIL_FIELD&EMVCELLPHONE_FIELD=$EMVCELLPHONE_FIELD&STORE_NAME_FIELD=$STORE_NAME_FIELD"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:35:03.103

摆脱链接中的回声并使用 header(" .. ") 而不是 '

在这里阅读为什么[http://php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)

# refresh - 使用事务后刷新 DataContext

> ID：13702871
> 
> 赞同：1
> 
> 时间：2012-12-04T12:26:09.463
> 
> 标签：refresh, datacontext

我想用 linq 2 sql 更新 4 个表并使用横断面。在 cummit all 命令之后，DataContext 不会使用新数据进行更新。但所有数据都保存在数据库中。我需要在 subchange 命令之后刷新 DataContext。任何机构都可以帮助我吗？

# javascript - 如何根据来自 javascript 的值在 ui:repeat 中渲染 ah:panelGroup？

> ID：13702872
> 
> 赞同：2
> 
> 时间：2012-12-04T12:26:14.393
> 
> 标签：javascript, jsf, jsf-2, el, rendered-attribute

我将布尔值放入 中，`<h:inputText>`但我找不到将其`rendered`放入`<h:panelGroup>`. 我也看不到使用 bean 值的方法，因为每次迭代都需要一个独立的迭代。

这是我的jsf代码：

```
<ui:repeat var="item" value="#{itemBean.items}" id="iterateItems" varStatus="iteration">
    <script type="text/javascript">         
        showItem("#{item.id}","#{iteration.index}");
    </script>
    <h:inputText id="rendered"/>
    <h:panelGroup layout="block" rendered="???">
        Iteration #{iteration.index} rendered
    </h:panelGroup>
</ui:repeat> 
```

这是我的 javascript：

```
function showItem(item,iteration){
    if((clientSideValue==something){
        document.getElementById("iterateItems"+":"+iteration+":"+"rendered").value = true;
    }
    else{
        document.getElementById("iterateItems"+":"+iteration+":"+"rendered").value = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:08:44.023

JavaScript 在客户端运行并在从服务器端检索的 HTML DOM 树上工作（在您的特定情况下由 JSF 生成）。因此，JavaScript 期望您想要显示/隐藏的所需 HTML 元素**始终**存在于 HTML DOM 树中。

JSF 在服务器端运行并基于 JSF 组件树（“视图”）生成 HTML 代码。当`rendered`JSF 组件的属性评估为 时`false`，不会为给定组件生成任何 HTML 代码，因此 HTML DOM 树中不会有任何内容，因此 JavaScript 的`document.getElementById()`.

您认为这将是解决方案的具体功能要求尚不清楚，因此很难为您的具体问题提出正确的解决方案。但是，如果您绝对肯定需要在客户端（通过 JavaScript）而不是服务器端（通过 JSF）执行显示/隐藏，那么您应该`display`为此使用 CSS 的属性，您可以在`block`和`none`。

这是一个基本的启动示例，假设您最初想隐藏它：

```
<ui:repeat var="item" value="#{itemBean.items}" id="iterateItems" varStatus="iteration">
    <script type="text/javascript">         
        showItem(#{iteration.index});
    </script>
    <h:inputText id="rendered" />
    <div id="foo#{iteration.index}" style="display:none">
        Iteration #{iteration.index} shown
    </div>
</ui:repeat> 
```

和

```
function showItem(index) {
    var div = document.getElementById("foo" + index);

    if (someCondition) {
        div.style.display = "block"; // Show it.
    } else {
        div.style.display = "none"; // Hide it.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:36:31.300

不要将服务器端脚本与客户端脚本混用！

只需根据需要使用 EL：

```
<ui:repeat var="item" value="#{itemBean.items}" id="iterateItems" varStatus="iteration">
    <h:panelGroup layout="block" rendered="#{item.id le 1}">
        Iteration #{iteration.index} rendered
    </h:panelGroup>
</ui:repeat> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:07:38.300

这是不可能的：JSF 标记——尤其是渲染的属性在`RenderResponse`JSF 阶段使用。当最终的 HTML 生成后，没有更多`rendered`的属性 - 包含该属性的 HTML 元素要么被渲染，要么不被渲染。

因此，如果您需要根据客户端的值做某事，则需要将该值传输到您的服务器。

一种解决方法是设置 css-property `display:none`。但请注意，这将不会显示元素。它在页面源中仍然可用。

如果您正在使用 Javascript，您应该真正查看最终的源代码。JSF 标签被解析，甚至自动生成的 ID`23:58:23`对于某个元素也不总是相同的。

# reference - 在 Mono for Android 中使用 SmartThreadPool 的参考问题

> ID：13702878
> 
> 赞同：0
> 
> 时间：2012-12-04T12:26:36.850
> 
> 标签：reference, mono, xamarin.android, monodevelop, threadpool

我想在 Mono for Android 应用程序中使用[SmartThreadPool 。](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)不幸的是，当我从项目中引用 SmartThreadPool.dll 时出现错误：

```
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(2,2): 
Error: Exception while loading assemblies: System.IO.FileNotFoundException: 
Could not load assembly 'System.Web, Version=2.0.0.0, Culture=neutral, 
PublicKeyToken=b03f5f7f11d50a3a'. Perhaps it doesn't exist in the Mono for 
Android profile?
File name: 'System.Web.dll'
at Monodroid.Tuner.MonoDroidResolver.Resolve(AssemblyNameReference reference, 
ReaderParameters parameters)
at Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences(List`1 
assemblies, AssemblyDefinition assembly)
at Xamarin.Android.Tasks.ResolveAssemblies.Execute() 
```

我已经尝试将库放在 Assets 文件夹下并将其 BuildAction 设置为 AndroidAssets，如[http://adnankhan12.wordpress.com/2012/10/23/android-mono-error-using-other-dlls-novell-中所述monodroid-common-targets](http://adnankhan12.wordpress.com/2012/10/23/android-mono-error-using-other-dlls-novell-monodroid-common-targets)。但它仍然不起作用。

目前，我无法使用 SmartThreadPool，但在项目的网页上明确说明了单声道支持。那么我错过了什么或做错了什么？

有人可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:15:54.013

根据[API 参考文档](http://androidapi.xamarin.com/)，可以从命名空间访问的唯一类`System.Web`是`HttpUtility`类。

你可能是对的，Mono 确实有`SmartThreadPool`，但它不包含在 Mono for Android 和 MonoTouch 中。

您可以[在此处查看适用于 Android 的 Mono](http://docs.xamarin.com/android/guides/advanced_topics/assemblies)和此处的[MonoTouch](http://docs.xamarin.com/ios/guides/advanced_topics/Assemblies)随附哪些程序集。

**编辑：** 您引用的 DLL 也不是使用 Mono for Android 或 Monotouch 编译构建的，因此您将无法在项目中引用它。您还需要了解它可能具有的依赖关系。

# delphi - 如何防止另一个进程终止我的服务？

> ID：13702882
> 
> 赞同：1
> 
> 时间：2012-12-04T12:26:48.653
> 
> 标签：delphi, windows-services

我有一个 Windows 服务，它为我的应用程序执行各种“工作”（发送电子邮件、创建备份、检查我的应用程序更新、提供一些服务......）

最近一些客户报告了使用一些网上银行网站和我的应用程序之间的问题。

在寻找解决方案时，我发现了有关网上银行网站安装的插件 (ActiveX) 的报告。

这个 ActiveX 安装了一个**奇怪的**服务（GbPlugin，来自 GAS Tecnologia），它会根据一些愚蠢的启发式方法杀死可疑的应用程序，而我的服务是受害者！

现在我正在尝试“免疫”我的服务。

**是否有一些方法可以限制我的服务终止以保护它？**

我不能使用服务属性中的“自动重启”选项，因为我不能被杀死！

这两个服务都作为 LOCALSYSTEM 运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:29:31.090

该服务最有可能运行`LOCALSYSTEM`，因此可以杀死它喜欢的任何东西。因此，您极不可能防御它。

事实上，快速的网络搜索会引发一些命中，表明该服务确实以`LOCALSYSTEM`.

您唯一可行的解​​决方案将涉及其他软件。要么强迫你的用户删除它，要么与它的开发者一起寻找一种方法来将你的程序列入白名单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:59:02.573

假设 GbPlugin 正在通过正常的 SCM 程序来停止服务，而不仅仅是暴力终止它们，那么您有几个选择来阻止您的服务停止：

1.  将服务的`AllowStop`属性设置为 False。

2.  在这种情况`OnStop`下，将`Stopped`参数设置为 False。

这两种方法都会阻止您在正常情况下停止自己的服务。要解决这个问题，您可以编写一个单独的应用程序，该应用程序使用 Win32 API`ControlService()`函数向您的服务发送自定义命令。在您的服务中，让它覆盖虚拟`DoCustomControl()`方法以查找该命令。让它要么将属性重置为 True，要么在事件可以查看的`AllowStop`某处设置一个标志，然后调用以启动正常停止。`OnStop``Controller(SERVICE_CONTROL_STOP)`

不用说，这有点矫枉过正。如果可能，更好的选择是简单地联系 GAS Tecnologia 并询问为什么您的服务被 GbPlugin 的启发式标记，然后更改您的服务中的条件，或者要求他们修复 GbPlugin 以忽略您的服务。

# java - 投射链表 到链表 （爪哇）

> ID：13702889
> 
> 赞同：1
> 
> 时间：2012-12-04T12:27:02.590
> 
> 标签：java, casting, linked-list

我有一个接口 SenseFitSensor。类 HardwareSensor 实现它（未来的实现可能是例如 DummySensor）。

现在我有了一个需要`LinkedList<SenseFitSensor>`.

```
public ExerciseLearner(LinkedList<SenseFitSensor> sensorList){ 
```

我不能为它提供一个`LinkedList<HardwareSensor>`，因为 LinkedList 不能强制转换为`SensefitSensor`。

工作是什么

```
LinkedList<SenseFitSensor> senseFitSensors = new LinkedList<SenseFitSensor>(hardwareSensors);
    learner = new ExerciseLearner(senseFitSensors); 
```

但是每次都会创建一个新的链表。有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:29:16.230

您可以使用有界通配符

```
public ExerciseLearner(LinkedList<? extends SenseFitSensor> sensorList){ 
```

* * *

参考

*   [上限通配符](http://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html)

# php - TCPDF 不使用 writeHTML 显示图像

> ID：13702891
> 
> 赞同：7
> 
> 时间：2012-12-04T12:27:07.207
> 
> 标签：php, tcpdf

这个问题似乎是 TCPDF 上的常青树......
我有一个让我发疯的问题。

我有一个 html 代码，用作我的 PDF 的“模板”，这里有我的公司徽标。
在本地主机（Windows）上一切正常，但是当我上网时，图像没有显示。
请注意：我的PDF 上没有任何错误（即*无法获取图像错误），图像是简单的空白！*
事实上，如果我在应该是图像的位置单击 PDF，我可以选择它，然后 Adob​​e 启用“复制图像”选项。

显然图像存在，在这里，并且许可是正确的。
如果我尝试在那里冲浪或查看生成的 HTML 页面，一切都很好。

这是PHP代码：

```
$pdf->SetMargins($params->get('pdfMarginLeft', 15), $params->get('pdfMarginTop', 27), $params->get('pdfMarginRight', 15));
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);
$pdf->SetFont('helvetica', '', 8);
$pdf->AddPage();

$pdf->writeHTML($html, true, false, true, false, '');

$pdf->lastPage(); 
```

然后这是我的 HTML 代码（我只是跳过了除图像之外的所有内容）：

```
<img alt="logo black" src="../images/logo_black.png" height="60" width="210" /> 
```

我已经尝试使用 url（相对和绝对）和路径（相对和绝对），问题仍然存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-12-11T22:53:50.743

这不是您的问题，但对于将来遇到类似问题的人来说，这是一个可能的解决方案。**请确保 HTML 属性有双引号。**

```
$html = "<img src='...' />"; // This will not work

$html = '<img src="..." />'; // This will work 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T06:38:31.253

由于事情在本地工作，因此您可以尝试将图像类型从*png*更改为*jpg*，并在相应地修改代码并将*jpg*上传到服务器后进行检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-23T09:42:47.200

您可以将图像类型“jpg/png”转换为 base64。 `<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgA...."/>` 这可能会帮助你！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-21T20:40:22.363

就我而言，我尝试了上述所有解决方案均无济于事。原来我缺少宽度和高度属性。添加这些，并使用根路径最终为我工作：

`<img src="/images/image.png" width="50" height="50"/>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-05T12:43:27.903

在我的情况下，IMG 标签在我写入文件的完整路径之前不起作用

不工作

```
<img src="/pdfrender/XXX.jpg" width="50" height="50"> 
```

工作（本地主机示例）

```
<img src="http://site.local/pdfrender/XXX.jpg" width="50" height="50"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-13T08:34:48.250

我为图像 src 实现了一个 str_replace，现在可以正常工作了。

```
$html = str_replace("../images", $_SERVER["DOCUMENT_ROOT"] . '/images', $html); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-14T19:52:36.880

我不得不“重新保存”图像：

```
$image = 'images/logo_example.png';    
imagepng(imagecreatefrompng($image),$image); 
```

然后它起作用了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-19T12:42:45.103

也可以将图像数据内联添加为 base64：

```
<img src="@Base64encodedImageFile" /> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-05T13:21:33.023

这不是一个真正的答案，但由于每个人都试图添加一个“砖块”，这是我面临的一个非常奇怪的细节：

我在页面上一个接一个地放置了小的 HTML“条”。如果我将第一个具有 2 个 png 和一个小文本的文件放在文件上，则 png 在 PDF 上可见。如果我将具有 2 个 png 和一个小文本的第二个文件放在文件上，则 png 在 PDF 上可见。现在，如果我把这两个，只有第一个作为图像。第二张是空白图片。如果我更改第二条带的图片，图像就会变得可见。

*细节：第一条和第二条使用相同的图像！*

请注意，这似乎只发生**在**PNG 图像上。所以似乎有一个错误，你不能在一个页面上有两次相同的 PNG 图像。使用JPG解决问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-08T14:34:35.110

我遇到了同样的问题，它在本地工作并且在服务器空白图像上。我发现 htaccess 密码是问题所在。我已将带有行`Satisfy any`的 .htaccess 文件放入带有图片的文件夹中，现在它可以正常工作了。

# hadoop - Hadoop Yarn 可以运行网格吗？

> ID：13702894
> 
> 赞同：0
> 
> 时间：2012-12-04T12:27:12.210
> 
> 标签：hadoop, grid, cluster-computing, hadoop-yarn

Hadoop Yarn 实例可以管理来自地球上不同地方的节点、网络吗？它可以管理使用不同平台的节点吗？

我发现的关于 Yarn 的每条注释都表明 Yarn 管理集群，但如果我部署的应用程序是用 Java 编写的，那么它应该可以在节点上运行，而不管节点的硬件如何。同样，Yarn 似乎足够通用，可以支持的不仅仅是 LAN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:59:12.367

YARN 不支持平台。它也不知道不同主机上的应用程序进程如何相互通信以执行工作。
同时对于 YARN 应用程序 master 应该作为命令行运行 - 并且集群上任何具有足够资源的节点都应该能够运行它。
如果不是每个平台都能够运行特定的应用程序主程序，那么 YARN 应该知道它。今天它不能，但我可以将平台想象成一种特殊的资源——然后 YARN 将选择适当的节点
关于 LAN，如果你有知道如何在多个 LAN 上管理作业的应用程序主机——它应该可以使用 YARN。

# c# - 用另一个列表更新列表

> ID：13702899
> 
> 赞同：-2
> 
> 时间：2012-12-04T12:27:21.263
> 
> 标签：c#, asp.net

我有 List 并且我从这个 List 创建了一个新副本并将其绑定到一个 Gridview 中，用户可以在其中更新、删除和插入记录。

我想要的是当用户单击按钮以使用绑定列表更新列表时。

考虑到以下几点，我该如何做到这一点：

*   仅更新已更改的记录。
*   将新闻记录插入列表。
*   删除绑定列表中不存在的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:13:23.130

我仍然不相信你正在做的事情需要完成，但这是一个简单的解决方案，它应该或多或少地得到你正在寻找的东西（我认为）。

```
for(int i = 0; i < myListB.Count; i++)
{
    //if items have been added to list B, they will be added to end of A
    if( i >= myListA.Count ) myListA.Add(myListB[i]);
    /* if item at index i in list A does not match item at index i 
     * in list B, assign item at index i in list B to index i in 
     * list A
     */
     else if( myListA[i] != myListB[i] ) myListA[i] = myListB[i];
} 
```

# ios - ABAddressBookCopyArrayOfAllPeople 在设备上错误 - 在模拟器上正确

> ID：13702903
> 
> 赞同：0
> 
> 时间：2012-12-04T12:27:32.277
> 
> 标签：ios

我有以下代码：

```
NSMutableArray *contacts = [[NSMutableArray alloc]init];
CFErrorRef *error = nil;
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, error);
if (error)
}
NSArray *arrayOfPeople = (__bridge_transfer NSArray*)ABAddressBookCopyArrayOfAllPeople(addressBook); 
```

它可以在模拟器上运行并给我预期的结果 - 但是在设备上的联系人数量为 0 并且没有错误（该应用程序奇怪地没有要求我访问通讯簿的权限 - 我什至删除并重新安装了该应用程序） 有任何想法吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T09:10:39.210

在 ios 6 上，您需要访问地址簿。打电话`ABAddressBookRequestAccessWithCompletion()`获得许可。看到[这个](https://stackoverflow.com/a/12517542/1375233)和[AddressHelper](https://stackoverflow.com/a/12533918/1375233)

```
CFErrorRef error = nil;
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, &error);
ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
    if (error) {
        NSLog(@"error %@", error);
    }else if (granted){
        // Do what you want with the Address Book

    }else{
        NSLog(@"permission denied");
    }

    CFRelease(addressBook);
}); 
```

# android - onclick 仅在单击三下后触发

> ID：13702904
> 
> 赞同：4
> 
> 时间：2012-12-04T12:27:32.163
> 
> 标签：android, html, kendo-ui

我在 html5 有 phonegap 应用程序，带有 kendo ui。我的按钮在浏览器上工作正常，但在 android 设备上我需要点击三下才能触发警报。这是我的代码：

```
 <!DOCTYPE html>
<html>
<head>
<title></title>
<script src="js/jquery-1.8.2.js"></script>
<script src="js/kendo.all.min.js"></script>
<link href="styles/kendo.mobile.all.min.css" rel="stylesheet" />
<link href="styles/kendo.common.min.css" rel="stylesheet" />
<link href="styles/kendo.default.min.css" rel="stylesheet" />
</head>

<body>
    <div data-role="view" data-title="Login/Sign-up"
        id="view-transitions-login" data-transition="overlay:left"
        style="background-color: white;">

        <input type="button" id="logButton" value="login"
            style="width: 100px; height: 60px" />
    </div>
    <script>
        $(document).ready(function() {

            $("#logButton").click(function() {
                alert(33);
            });

        });
    </script>

    <script>
        var app = new kendo.mobile.Application(document.body);
    </script>
</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:47:52.777

我找到了答案。我使用了最新版本的 kendo.all.min，这导致了问题。我更改了文件，一切正常。

# php - .htaccess 重写问题。可能是保留字？

> ID：13702909
> 
> 赞同：2
> 
> 时间：2012-12-04T12:27:48.610
> 
> 标签：php, regex, apache, .htaccess

这不需要太多解释，很简单，以下是如何工作的：

```
RewriteRule ^errors/browser/?$ /_errors/browser.php?error=browser [NC,QSA,L] 
```

这不起作用：

```
RewriteRule ^error/browser/?$ /_errors/browser.php?error=browser [NC,QSA,L] 
```

**上面两个片段的唯一区别是`s`从单词末尾删除了字母`error`**

我不明白为什么在`s`单词上添加一个`error`突然使该代码起作用。我能想到的唯一解释`error`是保留字？是这样吗？

如果是这种情况，那么我如何`error`使用`.htaccess`文件匹配和重写单词？

**更新**

这是我的整个`.htaccess`文件：

```
# Define the default document
DirectoryIndex index.php

# Turn on the rewrite engine
RewriteEngine On

# Compress all HTML, Javascript, CSS, XML... files
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

# Set the error page rewrites
RewriteRule ^errors/browser/?$ /_errors/browser.php?error=browser [NC,QSA,L]

# Set the general first level rewrites
RewriteRule ^([a-z-]+)\/?$ $1.php? [NC,QSA,L]
RewriteRule ^([a-z-]+)\/([a-z-0-9]+)\/?$ $1.php?id=$2&amp; [NC,QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:00:53.157

很奇怪 vim 会突出显示“错误”这个词，但你可以简单地尝试这个来破解它：

```
RewriteEngine On
RewriteRule ^erro[r]/index.html [NC,QSA,L] 
```

这是一个可能相关的问题：[question-10872503](https://stackoverflow.com/questions/10872503/htaccess-and-the-word-find)

# java - Lucene 文本搜索以非字母结尾的名称失败

> ID：13702913
> 
> 赞同：3
> 
> 时间：2012-12-04T12:27:54.320
> 
> 标签：java, lucene, webmethods, query-parser

在我的 Webmethods 应用程序中，我需要实现一个搜索功能，并且我已经使用 Lucene 完成了它。但是，当我搜索标题以 alpabet.for 以外的文件结尾的文件时，搜索不会检索结果，例如：- doc1.txt 或 new$.txt
在下面的代码中，当我尝试**打印 queryCmbd**时，它的打印搜索结果>> >>>>>title:"doc1 txt" (contents:doc1 contents:txt)。当我搜索像 doc.txt 这样的字符串时，结果是 Search Results>>>>>>>title:"doc.txt"内容：doc.txt。为了解析这些类型的字符串（如 doc1.txt、new$.txt）应该怎么做？

```
 public java.util.ArrayList<DocNames> searchIndex(String querystr,
                String path, StandardAnalyzer analyzer) {
            String FIELD_CONTENTS = "contents";
            String FIELD_TITLE = "title";
            String queryStringCmbd = null;

            queryStringCmbd = new String();

            String queryFinal = new String(querystr.replaceAll(" ", " AND "));
            queryStringCmbd = FIELD_TITLE + ":\"" + queryFinal + "\" OR "
                    + queryFinal;

            try {

                FSDirectory directory = FSDirectory.open(new File(path));

                Query q = new QueryParser(Version.LUCENE_36, FIELD_CONTENTS,
                        analyzer).parse(querystr);

                Query queryCmbd = new QueryParser(Version.LUCENE_36,
                        FIELD_CONTENTS, analyzer).parse(queryStringCmbd);

                int hitsPerPage = 10;
                IndexReader indexReader = IndexReader.open(directory);
                IndexSearcher indexSearcher = new IndexSearcher(indexReader);

                TopScoreDocCollector collector = TopScoreDocCollector.create(
                        hitsPerPage, true);
                indexSearcher.search(queryCmbd, collector);
                ScoreDoc[] hits = collector.topDocs().scoreDocs;

                System.out
                        .println("Search Results>>>>>>>>>>>>"
                                + queryCmbd);

                docNames = new ArrayList<DocNames>();
                for (int i = 0; i < hits.length; ++i) {
                    int docId = hits[i].doc;
                    Document d = indexSearcher.doc(docId);
                    DocNames doc = new DocNames();
                    doc.setIndex(i + 1);
                    doc.setDocName(d.get("title"));
                    doc.setDocPath(d.get("path"));
                    if (!(d.get("path").contains("indexDirectory"))) {
                        docNames.add(doc);
                    }
                }

                indexReader.flush();
                indexReader.close();
                indexSearcher.close();
                return docNames;
            } catch (CorruptIndexException e) {
                closeIndex(analyzer);
                e.printStackTrace();
                return null;
            } catch (IOException e) {
                closeIndex(analyzer);
                e.printStackTrace();
                return null;
            } catch (ParseException e) {
                closeIndex(analyzer);
                e.printStackTrace();
                return null;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:57:08.443

您的问题来自您正在使用的事实`StandardAnalyzer`。如果您阅读它的[javadoc](http://lucene.apache.org/core/4_0_0-ALPHA/analyzers-common/org/apache/lucene/analysis/standard/StandardAnalyzer.html)，它会告诉您它正在`StandardTokenizer`用于令牌拆分。这意味着短语 like`doc1.txt`将被拆分为`doc1`and `txt`。

如果要匹配整个文本，则需要使用`KeywordAnalyzer`-both **for indexing 和 search**。下面的代码显示了区别：使用`StandardAnalyzer`标记是`{"doc1", "txt"}`和使用`KeywordAnalyzer`唯一的标记是`doc1.txt`。

```
 String foo = "foo:doc1.txt";
    StandardAnalyzer sa = new StandardAnalyzer(Version.LUCENE_34);
    TokenStream tokenStream = sa.tokenStream("foo", new StringReader(foo));
    while (tokenStream.incrementToken()) {
        System.out.println(tokenStream.getAttribute(TermAttribute.class).term());
    }

    System.out.println("-------------");

    KeywordAnalyzer ka = new KeywordAnalyzer();
    TokenStream tokenStream2 = ka.tokenStream("foo", new StringReader(foo));
    while (tokenStream2.incrementToken()) {
        System.out.println(tokenStream2.getAttribute(TermAttribute.class).term());
    } 
```

# java - 二进制 XML 文件第 19 行：仅在 Android 3.2 上膨胀类时出错

> ID：13702914
> 
> 赞同：2
> 
> 时间：2012-12-04T12:27:53.967
> 
> 标签：java, android, android-fragments, android-manifest

我正在开发一个使用支持库的片段的应用程序。该应用程序正在运行并已发布，但我收到此错误报告（仅限 3.2 操作系统版本）：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.naviter.seeyou/com.naviter.seeyou.MenuDisplayActivity}: android.view.InflateException: Binary XML file line #19: Error inflating class
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
android.app.ActivityThread.access$500(ActivityThread.java:122)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:132)
android.app.ActivityThread.main(ActivityThread.java:4123)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:491)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #19: Error inflating class
android.view.LayoutInflater.createView(LayoutInflater.java:596)
com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
android.view.LayoutInflater.onCreateView(LayoutInflater.java:644)
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
android.view.LayoutInflater.inflate(LayoutInflater.java:479)
android.view.LayoutInflater.inflate(LayoutInflater.java:391)
com.naviter.seeyou.DisplayFragment.onCreateView(DisplayFragment.java:57) 
```

在 onCreateView 方法的最后一行抛出异常：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState){
    if (container == null)
        return null;
    getActivity().setTitle(R.string.Display);
    return inflater.inflate(R.layout.settings_display, container, false); //here
} 
```

这是xml文件：

```
<ListView
    android:id="@+id/listViewDisplay"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >

</ListView>

<LinearLayout
    android:id="@+id/rlAsDialog"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/buttonDisplayOk"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:text="@string/Ok" />

    <Button
        android:id="@+id/buttonDisplayCancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/Cancel" />

</LinearLayout>
</LinearLayout> 
```

我再说一遍，该应用程序运行良好，我只在少数装有 Android 3.2 操作系统的设备上遇到了这个异常。我正在从以下位置导入片段：

> android.support.v4.app.Fragment；

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:50:19.520

没有什么立竿见影的。我*已经*看到崩溃报告作为主要堆栈跟踪，当它试图从资源创建位图以用于它正在膨胀的视图时，内存异常“引起”。也许这就是正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:14:31.693

我的事情我解决了这个问题。我不小心扩展了课程：

> 对话片段

代替：

> 分段

然后使用 DialogFragment 的自定义布局。显然这只会在 Android 3.2 上引起问题

我后来也发现了另一个问题。在 Manifest 中，我使用的是 Theme.DeviceDefault 主题，它是在 android api 级别 14 中添加的，而 android 3.2 显然不能忍受这个。然后我实现了一个主题选择器，它根据设备 API 级别选择主题。

# android - 旋转设备时 onConfigurationChanged 不起作用

> ID：13702916
> 
> 赞同：0
> 
> 时间：2012-12-04T12:28:07.100
> 
> 标签：android, screen-orientation, onconfigurationchanged

我在一个新项目中使用 api 2.3.3，我使用我的平板电脑三星银河选项卡 2，当我改变方向时会创建一个新活动。

这是我正在尝试的简单代码：

**主要活动**

```
public class MainActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            Log.e("TAG","ONCREATE");
        }

        @Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);
            if (getResources().getConfiguration().orientation==Configuration.ORIENTATION_LANDSCAPE) {
                Log.e("TAG","LANDSCAPE");
            }else{
                Log.e("TAG","PORTRAIT");
            }
        } 
```

**显现**

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:configChanges="orientation|keyboardHidden|keyboard"> 
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />            
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

我认为我的代码很好，我已经阅读了很多示例，并且是一样的。

我怎么了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:45:03.810

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) 
{
    super.onRestoreInstanceState(savedInstanceState);
    if (savedInstanceState != null) 
    {
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
        {
            // code for portrait
        }
        else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
        {
            // code for landscape
        }

    }
} 
```

试试上面的代码而不是 onConfigurationChanged 方法，它对我很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:28:04.777

如果您正在为大于 13 的 API 构建，那么您需要使用：

```
android:configChanges="orientation|screenSize" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:38:01.970

尝试删除清单文件中的键盘和键盘隐藏字并检查它。像：

```
android:configChanges="orientation" 
```

# android - Android 应用程序中的内存指标

> ID：13702917
> 
> 赞同：5
> 
> 时间：2012-12-04T12:28:18.097
> 
> 标签：android, memory-management, out-of-memory

我编写了 Android 应用程序，它有一些奇怪**的内存不足**异常问题，随机出现。是的，我知道 OOM 异常的问题通常是因为图像，我尽我所能来避免这个问题。我想找到消耗内存的地方的唯一方法是将日志与有关内存的信息放在任何地方。但我真的很困惑我需要哪些值。

我使用了下一个值：

*   Runtime.getRuntime().maxMemory()
*   Runtime.getRuntime().freeMemory()
*   Runtime.getRuntime().totalMemory()
*   Debug.getNativeHeapAllocatedSize()
*   Debug.getNativeHeapFreeSize()
*   Debug.getNativeHeapSize()

在 OOM 异常之前，我有下一个值：

*   最大内存：57344K
*   空闲内存：9581K
*   总内存：22407K
*   NativeHeapAllocatedSize：34853K
*   NativeHeapFreeSize：302K
*   NativeHeapSize：40060K
*   低内存错误

在这个问题[Android Bitmap Limit - Preventing java.lang.OutOfMemory](https://stackoverflow.com/questions/6892676/android-bitmap-limit-preventing-java-lang-outofmemory)我看到[在这个博客](http://organicandroid.blogspot.com/2010/12/totalfree-memory-on-android-apps-and.html)中使用了 compeering ((reqsize + Debug.getNativeHeapAllocatedSize() + heapPad) >= Runtime.getRuntime().maxMemory()) ant一些奇怪的信息：

> Debug.getNativeHeapFreeSize(); 空闲大小是堆中由于碎片或配置而未使用的内存量。

如果（totalMemory：22407K）远小于（maxMemory：57344K），我也无法理解为什么会出现OOM异常。

请帮助我了解如何使用此值。

# java - JRadioButtonMenuItem 不是 JRadioButton 扩展

> ID：13702919
> 
> 赞同：0
> 
> 时间：2012-12-04T12:28:20.433
> 
> 标签：java, swing

看下面的图片，注意`JRadioButtonMenuItem`不要延伸`JRadioButton`，甚至没有`JToggleButton`。我的猜测是他们重复代码。`:P`或者他们在这些切换组件中有一个中间类？

![在此处输入图像描述](../Images/8736e631df019c0fff11605590ce5511.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:15:27.137

问题是 Java 不支持多重继承，否则您可以考虑同时`JRadioButtonMenuItem`扩展`JMenuItem`和`JRadioButton`（尽管尚不清楚这是否是一个好的实现选择）。

所以这意味着你必须选择一个或另一个，在这种情况下，已经选择了扩展`JMenuItem`。

现在，如果您看一下，您会看到`JMenuItem`并`JRadioButton`有一个共同的祖先，`AbstractButton`它实际上封装了`ButtonModel`与按钮当前状态相关的所有内容（武装、选定等）的存储位置。

在 a 的情况下，`JRadioButtonMenuItem`它使用 a ，因此在这里您可以了解和`ToggleButtonModel`共享相同模型的方式。`JRadioButton``JRadioButtonMenutItem`

关于视图，这一切都被委托给了`BasicRadioButtonMenuItemUI`，尤其是更多地委托给`BasicMenuItemUI`（它是 的父级`BasicRadioButtonMenuItemUI`）。最终它依赖于当前的外观来提供不同的图标、样式、边框、字体等......

这就是整个事情的进展。

# jquery - 无法在 Chrome 扩展中使用 JQuery

> ID：13702924
> 
> 赞同：5
> 
> 时间：2012-12-04T12:28:51.533
> 
> 标签：jquery, html, google-chrome, google-chrome-extension

我有一个 Google Chrome 扩展程序，其中有一个 background.js，我正在尝试在其中使用 JQuery。

出现以下错误。

```
Uncaught ReferenceError: $ is not defined 
```

我的清单文件代码部分

```
 "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["script.js", "jquery.js","front.js"]
    }
  ],
  "web_accessible_resources": ["https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"],
  "content_security_policy": "script-src 'self' https://ajax.googleapis.com; object-src 'self'", 
```

我无法获得在此扩展中使用 JQuery 函数的任何线索。如果您需要更多理由，请告诉我。

编辑#1：清单文件

```
{
  "name": "Tool",
  "description": "Extension",
  "manifest_version": 2,
  "version": "5.0.0.0",
  "manifest_version": 2,
  "background": { "scripts": ["background.js"] },
  "permissions": [
    "tabs", "http://*/*", "https://*/*", "storage"
  ],
  "options_page": "options.html",
  "icons":{"16": "images/F_icon_16x16.png",
           "48": "images/F_icon_48x48.png",
          "128": "images/F_icon_128x128.png"},
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["jquery.js", "script.js", "front.js"]
    }
  ],
  "content_security_policy": "script-src 'self' ; object-src 'self'",
  "browser_action": {
      "default_title": "Tool",
      "default_icon": "images/F_icon.png"
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:35:38.917

改变这部分：

```
"js": ["script.js", "jquery.js","front.js"] 
```

对此：

```
"js": ["jquery.js","script.js","front.js"] 
```

该行的顺序是包含文件的顺序。所以你首先需要 jquery.js 来定义 $ （用于 jquery），然后是你的脚本的其他脚本......

# java - actionPerformed 无法解析类型

> ID：13702932
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:29:07.487
> 
> 标签：java, swing, actionlistener

当我尝试从 actionPerformed 调用方法时，可以说“text1.setText("asdasdasd");" （已经在 TestBookShelf 的构造函数中创建了 text1 对象）它说我无法解析类型。但它在构造函数中工作。我有点新手，但不应该所有来自 TestBookShelf 类的废话都可用于 actionPerformed 方法吗？我不允许发布照片，因为我只有 6 个代表 ![在此处输入图像描述](../Images/2e6b5fa4674facf6921fd30bacad5876.png) ![在此处输入图像描述](../Images/b7f27717f01ee4d5b18bb211dfaf1cec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:34:00.693

我的猜测`text1`实际上是构造函数的本地。所以在你的构造函数中你正在做：

```
public ClassConstructor()
{
  JTextField text = new JTextField() ;
} 
```

如果这是真的，`text1`必须声明为实例变量，那么它会被解析。像这样：

```
public class ClassConstructor
{
   JTextField text ;
} 
```

# spring - 带有 Bitronix jndi 查找失败的 Spring JTA 事务管理器

> ID：13702937
> 
> 赞同：1
> 
> 时间：2012-12-04T12:29:25.733
> 
> 标签：spring, jta

我为在 Tomcat 7 上运行的 Bitronix 配置了 Spring JTA 事务管理器。事务管理器正常启动并且应用程序运行良好。但是，我收到很多调试消息，说明

在回退 JNDI 位置 [java:comp/TransactionManager] 未找到 JTA TransactionManager 在回退 JNDI 位置 [java:pm/TransactionManager] 在回退 JNDI 位置未找到 JTA TransactionManager [java:appserver/TransactionManager]

ETC..

我知道这是 JtaTransactionManager 扫描已知的 jndi 位置，这不是错误，而是调试异常。以下是我的事务管理器配置

```
<bean id="BitronixTransactionManager" factory-method="getTransactionManager" class="bitronix.tm.TransactionManagerServices" 
     destroy-method="shutdown" /> 
```

和 jta 事务管理器

```
<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
<property name="autodetectTransactionManager" value="false"/>
<property name="transactionManager" ref="BitronixTransactionManager" />    
<property name="userTransaction" ref="BitronixTransactionManager" /> 
```

我认为将 autodetectTransactionManager 值设置为 false 会阻止此扫描和由此产生的调试异常，但似乎此设置无效。

我还尝试使用 transactionManager 的以下属性来设置 jndi 位置。

```
<property name="transactionManagerName" value="java:comp/TransactionManager"/>
<property name="userTransactionName" value="java:comp/UserTransaction"/> 
```

我正在使用 jta 1.1 并且还为 TransactionSynchronizationRegistry 获得相同的查找消息：

调试 [main] JtaTransactionManager.findTransactionSynchronizationRegistry(146) | 在默认 JNDI 位置 [java:comp/TransactionSynchronizationRegistry] 找不到 JTA TransactionSynchronizationRegistry

我真的很想了解这一点，而不仅仅是用我的 Log4J 过滤掉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T16:12:34.663

问题可能是在 Tomcat 中，默认的 jndi 位置在 java:comp/env 中。所以你应该做

```
<property name="transactionManagerName" value="java:comp/env/TransactionManager"/>
<property name="transactionSynchronizationRegistryName" value="java:comp/env/TransactionSynchronizationRegistry"/>
<property name="userTransactionName" value="java:comp/env/UserTransaction"/> 
```

# ruby-on-rails - 奇怪的行为 - irb 和 rails 控制台

> ID：13702938
> 
> 赞同：1
> 
> 时间：2012-12-04T12:29:28.643
> 
> 标签：ruby-on-rails, rails-console

对于命令**require rails ，** *irb*首先给出**true**，然后总是给出**false**。

 ***rails 控制台*总是给出**错误**的。

这是怎么回事？

请看下面的cmd-

```
~/Workspaces/eclipse/image_cropper_ws/image_cropper$ irb

1.9.2-p180 :001 > require 'rails'
=> true 
1.9.2-p180 :002 > require 'rails'
=> false 
1.9.2-p180 :003 > exit

~/Workspaces/eclipse/image_cropper_ws/image_cropper$ rails console
Loading development environment (Rails 3.2.8)

1.9.2-p180 :001 > require 'rails'
=> false 
1.9.2-p180 :002 > require 'rails'
=> false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:34:45.013

`false`当您尝试要求的内容已经加载时， require 返回 - 第一次，`require 'rails'`它没有加载，并且 require 返回 true。
第二次`require 'rails'`，它已经加载并且 require 返回 false。

Rails 总是加载到 rails 控制台中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:34:23.477

检查文档的[require](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-require)，它指出

> 加载给定的名称，如果成功则返回 true，如果已加载功能则返回 false。

因此，第一次调用`require`irb 时，它会加载并返回 true。第二次它已经加载，所以它返回 false。

当你调用`rails c`它时，它会在你的 Rails 环境中加载 irb，所以它必须已经需要`rails`**

# iphone - 不想对 UITableViewCell 使用 dequeueReusableCellWithIdentifier

> ID：13702941
> 
> 赞同：0
> 
> 时间：2012-12-04T12:29:32.080
> 
> 标签：iphone, ios, uitableview

在我的 UITableViewCells 中，我需要为每个单元格下载不同的图像，这种问题我该怎么办......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:32:27.577

您仍应使用该方法，然后独立配置每个单元。只要确保您的单元设置不在您的构造块上

```
UITableViewCell *cell = [tableView dequeue..];
if (!cell) {
    cell = ...;
}

cell.image = ...; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:37:18.333

item 将是您的图像字典

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"]];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}
NSDictionary *item = (NSDictionary *)[self.content objectAtIndex:indexPath.row];
cell.textLabel.text = [item objectForKey:@"mainTitleKey"];
cell.detailTextLabel.text = [item objectForKey:@"secondaryTitleKey"];
NSString *path = [[NSBundle mainBundle] pathForResource:[item objectForKey:@"imageKey"] ofType:@"png"];
UIImage *theImage = [UIImage imageWithContentsOfFile:path];
cell.imageView.image = theImage;
return cell;
  } 
```

# c# - 为什么 DispatcherTimer 在随机时间后停止触发？

> ID：13702943
> 
> 赞同：2
> 
> 时间：2012-12-04T12:29:34.557
> 
> 标签：c#, wpf, parallel.foreach, dispatchertimer

我已正确设置 DispatchTimer 以每秒触发一次-

```
OneSecondChecker = new DispatcherTimer();
OneSecondChecker.Tick += new EventHandler(OneSecondChecker_Tick);
OneSecondChecker.Interval = new TimeSpan(0, 0, 1);                 
OneSecondChecker.Start(); 
```

**问题：**它会在一段时间内正确触发，然后停止触发。

**附加信息：** 现在您可能会问它有什么作用？如果 OneSecondChecker_Tick() 方法正在运行，则有一个类级别（静态）布尔变量设置为 true，如果不是，则设置为 false，因此我们没有此方法的两个实例在运行即使它设置为每秒触发一次。确保 OneSecondChecker_Tick() 运行无任何延迟是应用程序要求。我也不想在无限循环中运行。在 OneSecondChecker_Tick() 运行之前，会进行第二次检查以查看表值是否已更新。正是该表值“某种”通知 OneSecondChecker_Tick() 运行。该表值由另一个应用程序更新。

在方法本身中，我确实调用了使用 TPL 并行运行线程。我不知道这是否与它有关。

**编辑** 我仍然无法弄清楚这一点。可能是应用程序被冻结。任务管理器并没有这么说。是否可以判断应用程序是否没有从任务管理器以外的其他地方响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:10:52.640

问题不在于 DispatchTimer。甚至 TPL 都没有。问题在于代码在无限循环中运行并导致堆栈溢出 - 之后它停止触发。

# ios - 在哪里以编程方式设置 TableViewController 的 UIBarButtonItem 和单元格“segue”

> ID：13702944
> 
> 赞同：0
> 
> 时间：2012-12-04T12:29:38.033
> 
> 标签：ios, segue

我有一个可以从其他两个视图控制器转换到的 TableViewController；一个通过 segue 转换，另一个以编程方式转换。通过 segue 转换时一切正常，但是当 TableViewController 在编程转换后出现时，UIBarButtonItem 丢失并且单元格 segue 不起作用（它应该将用户带到新屏幕）。

我猜是因为 UIBarButtonItem 和 cell segue 是在 Storyboard 中设置的，所以当 TableViewController 以编程方式加载时它们不会被加载。所以，我假设我需要在某个地方手动加载它们。我的问题是合适的地方在哪里？

谢谢阅读。

**编辑：** 这是转换的代码：

```
OtherTVC *otherTVC=[[OtherTVC alloc] init];
[self.navigationController pushViewController:otherTVC animated:YES]; 
```

这与地图图钉的标注附件相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:40:12.587

要获取在情节提要中创建的控制器实例，请尝试给它一个标识符并使​​用`instantiateViewControllerWithIdentifier:`而不是`alloc/init`路由。如果运行代码的当前控制器来自同一个故事板，则可以通过控制器的`storyboard`属性获取对它的引用以进行该调用。

# android - 与 ActionBar 重叠的 SearchView

> ID：13702951
> 
> 赞同：2
> 
> 时间：2012-12-04T12:30:07.600
> 
> 标签：android, actionbarsherlock, searchview

**当按下MenuItem**时，而不是使用**ActionLayout**来替换 ActionBar 。我希望 ActionLayout 在 ActionBar 上重叠。

 **由于大多数应用程序都使用这种行为，我认为它是标准的**SearchView**小部件。

而且由于我的应用程序适用于 API 10 及更高版本，因此我无法使用**SearchView**，因此使用了最新的**ActionBarSherlock**库（4.2.0），Jake 在其中添加了 SearchView。

**问题是，即使在这里它就像用ActionViewClass**替换初始菜单项。

我希望**ActionLayout**重叠但不替换**ActionBar**的原因是，我需要在 ActionBar 中有 3 个 MenuItem，如果我将它们全部保留为

```
android:showAsAction="always|collapseActionView" 
```

**当显示ActionLayout**时，它们甚至是可见的，这为**ActionLayout提供了很小的宽度**

如果我正在使用

```
android:showAsAction="ifRoom" 
```

最后一个图标不见了。只有 2 个图标可见。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:38:46.460

如果您的设备中有物理菜单按钮（例如 Nexus S），则不会显示虚线。当您按下菜单按钮时，它会显示出来。

您可以使用某些东西作为 this Use`android:showAsAction="never"`来强制操作项进入溢出。**

# c# - C# XAML 如何绑定源属性

> ID：13702952
> 
> 赞同：1
> 
> 时间：2012-12-04T12:30:07.973
> 
> 标签：c#, xaml

我想知道如何绑定源属性。在我的测验应用程序中，我想在按钮中显示 4 个选项（它们是图像）。但我所做的是查看它的引用。

请在下面查看我的代码：

我的 xaml 的片段：

```
 <Canvas Name="Canvas_StartGame" 
            VerticalAlignment="Center"
            HorizontalAlignment="Center" Grid.Row="1"
            Height="200" Width="300"
            Visibility="Visible">
        <Canvas.Background>
            <ImageBrush Stretch="Fill" ImageSource="/images/mainlogo.png"/>
        </Canvas.Background>
        <!--Visibility="Visible">-->

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Button Content="Start Game" Click="btnStartGame" HorizontalAlignment="Left" Margin="-22,205,0,0" VerticalAlignment="Top" Width="325"/>
        </Grid>
    </Canvas>

    <Canvas Name="Canvas_Game" 
            VerticalAlignment="Center"
            HorizontalAlignment="Center" 
            Height="800" Width="480"
            Visibility="Collapsed">
        <!--Visibility="Collapsed">-->
        <Grid  Height="800" Width="480">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Name="TextBlock_ScoreToHave" Text="Score to have:"/>
                <TextBlock Name="TextBlock_Score" Text="Score:"/>
                <TextBlock Width="480" Text="Question:" FontSize="40"/>
                <TextBlock VerticalAlignment="Top" Name="TextBlock_Question" Text="What is the meaning of life?" FontSize="32" Width="480" TextAlignment="Left" TextWrapping="Wrap" MaxHeight="400"/>
                <Button Name="btnAnswer1"   Click="Button_AnswerClick">
                    <Image Source="chords/a_major_chord.gif" />
                </Button>
                <Button Name="btnAnswer2"   Click="Button_AnswerClick"/>
                <Button Name="btnAnswer3"   Click="Button_AnswerClick"/>
                <Button Name="btnAnswer4"   Click="Button_AnswerClick"/>

            </StackPanel>
        </Grid>
    </Canvas> 
```

**我的 DataEntry 类：**

```
class DataEntry
{
    List<DataModel> dataModelList = new List<DataModel>();
    public List<DataModel> GetData()
    {
        dataModelList.Add(new DataModel { ID = 0, Question = "A major", Answer1 = "chords/g_major.gif", Answer2 = "chords/c_major.gif", Answer3 = "chords/b_major.gif", CorrectAnswer = "chords/a_major.gif" });
        dataModelList.Add(new DataModel { ID = 1, Question = "B major", Answer1 = "chords/g_major.gif", Answer2 = "chords/d_major.gif", Answer3 = "chords/e_major.gif", CorrectAnswer = "chords/b_major.gif" });

    } 
```

**还有我的主页类：**

```
public partial class MainPage : PhoneApplicationPage
{
    List<DataModel> dataModelList = new List<DataModel>();
    List<ScoreModel> scoreModelList = new List<ScoreModel>();
    Random rand = new Random();
    DataEntry dataEntry = new DataEntry();
    int number1, number2, number3, number4, score = 0, scoreToHave = 4;
    string CorrectAnswer;
    int QuestionID = 0;

    public MainPage()
    {
        InitializeComponent();
        dataModelList = dataEntry.GetData();
        Question();
    }

    private void Question()
    {

        foreach (var item in dataModelList)
        {
            if (item.ID == QuestionID)
            {
                TextBlock_Question.Text = item.Question;
                CorrectAnswer = item.CorrectAnswer;
                RandomAnswerPlaces(item.Answer1, item.Answer2, item.Answer3, item.CorrectAnswer);
            }
        }
    }

    public void RandomAnswerPlaces(string Answer1, string Answer2, string Answer3, string Answer4)
    {
        String[] Answers = new string[4];
        noRepeat();
        Answers[number1] = Answer1;
        Answers[number2] = Answer2;
        Answers[number3] = Answer3;
        Answers[number4] = Answer4;
        btnAnswer1.Content = Answers[0];
        btnAnswer2.Content = Answers[1];
        btnAnswer3.Content = Answers[2];
        btnAnswer4.Content = Answers[3];
    }

    private void noRepeat()
    {
        number1 = rand.Next(0, 4);
        number2 = rand.Next(0, 4);
        number3 = rand.Next(0, 4);
        number4 = rand.Next(0, 4);
        if (number1 == number2 ||
            number1 == number3 ||
            number1 == number4 ||
            number2 == number3 ||
            number2 == number4 ||
            number3 == number4)
        {
            noRepeat();
        }
    }

    private void btnStartGame(object sender, RoutedEventArgs e)
    {
        Canvas_StartGame.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_Game.Visibility = System.Windows.Visibility.Visible;
    }

    private void Button_AnswerClick(object sender, RoutedEventArgs e)
    {
        string ClickedAnswer = ((System.Windows.Controls.Button)(sender)).Content.ToString();
        string ClickedButtonName = ((System.Windows.Controls.Button)(sender)).Name.ToString();

        switch (ClickedButtonName)
        {
            case "btnAnswer1":
                btnAnswer1.IsEnabled = false;
                break;
            case "btnAnswer2":
                btnAnswer2.IsEnabled = false;
                break;
            case "btnAnswer3":
                btnAnswer3.IsEnabled = false;
                break;
            case "btnAnswer4":
                btnAnswer4.IsEnabled = false;
                break;
            default:
                break;
        }
        if (CorrectAnswer == ClickedAnswer)
        {
            if (QuestionID < (dataModelList.Count() - 1))
            {
                QuestionID++;
            }
            else
            {
                MessageBox.Show(string.Format("Game Over! your final score : {0}", score));
                SaveHighScore();
            }

            score += scoreToHave;
            scoreToHave = 5;
            Question();
            btnAnswer1.IsEnabled = true;
            btnAnswer2.IsEnabled = true;
            btnAnswer3.IsEnabled = true;
            btnAnswer4.IsEnabled = true;
        }
        else
        {
            scoreToHave -= 2;
        }
        TextBlock_ScoreToHave.Text = string.Format("Score you can get: {0}", scoreToHave.ToString());
        TextBlock_Score.Text = string.Format("Score: {0}", score.ToString());
    }

    private void SaveHighScore()
    {
        if (IsolatedStorageSettings.ApplicationSettings.Contains("scoreList"))
        {
            scoreModelList = IsolatedStorageSettings.ApplicationSettings["scoreList"] as List<ScoreModel>;
            scoreModelList.Add(new ScoreModel { Score = score, DateSaved = DateTime.Now.ToShortDateString() });
            IsolatedStorageSettings.ApplicationSettings.Clear();
            IsolatedStorageSettings.ApplicationSettings.Add("scoreList", scoreModelList);
            IsolatedStorageSettings.ApplicationSettings.Save();
        }
        Canvas_StartGame.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_Game.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_HighScore.Visibility = System.Windows.Visibility.Visible;
        var tempList =
           from item in scoreModelList
           where item.Score > 0
           orderby item.Score descending
           select string.Format("Date: {0} Score: {1}", item.DateSaved, item.Score);
        ListBox_HighScore.ItemsSource = tempList.ToList();
        score = 0;
        scoreToHave = 5;
        QuestionID = 0;
        Canvas_StartGame.Visibility = System.Windows.Visibility.Visible;
        Canvas_Game.Visibility = System.Windows.Visibility.Collapsed;
    }

    private void Button_DoneClick(object sender, RoutedEventArgs e)
    {
        Canvas_StartGame.Visibility = System.Windows.Visibility.Visible;
        Canvas_Game.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_HighScore.Visibility = System.Windows.Visibility.Collapsed;
    }
}
} 
```

如果您能提供帮助，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:42:46.780

要绑定源属性，您可以在页面资源中定义一个数据模板，您可以将 Canvas_Game 元素放入其中。并且可以使用 wpf 的列表框控件。您可以将其 ItemTemplate 属性设置为资源中定义的数据模板名称。然后可以将 Listbox 的 ItemSource 属性设置为 GetData() 方法在加载 xaml 页面时的集合。

# android - Listview 显示更新后的新旧内容

> ID：13702953
> 
> 赞同：-2
> 
> 时间：2012-12-04T12:30:10.777
> 
> 标签：android, android-listview, listactivity, listadapter, simpleadapter

在我的应用程序中，listview 是从 SQLite 数据库加载的，它使用 SimpleAdapter 来设置 ListView。当用户在 listitem 上执行 longclick 时，该项目将从数据库中删除，它应该更新 listviw。但是当我从数据库中删除项目时，listview 会同时显示旧数据和新数据。请提出一些解决方案。谢谢。

以下是我的代码：

```
public class FavouriteListActivity extends ListActivity {       
    public final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    ListAdapter adapter;
    public ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>(); 
    ArrayList<String> titles = new ArrayList<String>();
    String title,artist;    
    SQLiteAdapter adp;
    SimpleCursorAdapter cursoradp;
    Cursor cursor,cursorDB; 

    @Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);      
        setContentView(R.layout.favouritelist);         

        // Adding menuItems to ListView
        final String[] from = {"songTitle", "artist","duration"};
        final int[] to={R.id.fav_songTitle,R.id.fav_songArtist,R.id.fav_duration};

        ListView lv = getListView();            
        songsListData = getFavourites();
        final ListAdapter adapter = new SimpleAdapter(this,songsListData,
                    R.layout.favouritelist_item, from, to);
        lv.setFastScrollEnabled(true);  
        setListAdapter(adapter);
        lv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener()
        {
            public boolean onItemLongClick(AdapterView<?> av, View v,
                     final int pos,final long id) {
                final AlertDialog.Builder b = new AlertDialog.Builder(FavouriteListActivity.this);
                b.setTitle("Are you sure you want to delete?");
                b.setIcon(android.R.drawable.ic_delete);               
                b.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        String title = songsListData.get(pos).get("songTitle");
                        ListAdapter adapter = null;
                        adp.delete_byTitle(title);
                        songsListData.clear();
                        setListAdapter(null);
                        songsListData = getFavourites();                                                                                         
                        adapter = new SimpleAdapter(getApplicationContext(), songsListData,R.layout.favouritelist_item, from, to);

                        setListAdapter(adapter);
                        Toast.makeText(FavouriteListActivity.this,"Song is removed from Favourites", Toast.LENGTH_SHORT).show();
                    }
                });
                b.setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        dialog.cancel();
                    }
                });
                b.show();
                return true;
            }           
        });        
    }
    public ArrayList<HashMap<String,String>> getFavourites()
    {
        ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();
        ArrayList<String> titles = new ArrayList<String>();
        adp = new SQLiteAdapter(this);        
        adp.openToRead();
        cursorDB = adp.queueAll();
        if(cursorDB.moveToFirst())
        {
            for(int i=0;i<cursorDB.getCount();i++)
            {
                titles.add(cursorDB.getString(cursorDB.getColumnIndex("Title")));
                cursorDB.moveToNext();
            }
            String[] songTitles = new String[titles.size()];
            songTitles = titles.toArray(songTitles);
            if(songTitles == null)
            {
                songTitles =null;
            }
            String whereClause = MediaStore.Audio.Media.TITLE + " IN ( ?";
            if (songTitles.length>1) 
            {
                for (int j = 1 ; j < songTitles.length; ++j) 
                {
                    whereClause+=", ?";
                }
            }
            whereClause+=")";             
            Cursor cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,null ,whereClause,songTitles,MediaStore.Audio.Media.TITLE);            
            if (cursor == null) 
            {
                  //Query Failed , Handle error.
            }
            else if (!cursor.moveToFirst()) 
            {
                 //No media on the device.
            }
            else
            {            
                int titleColumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.TITLE);  
                int idColumn = cursor.getColumnIndexOrThrow(android.provider.MediaStore.Audio.Media.DATA);                
                int artistcolumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.ARTIST);
                int durationcolumn =cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.DURATION);
                for(int i=0;i<cursor.getCount();i++)
                {
                    String thisTitle = cursor.getString(titleColumn);                   
                    String path = cursor.getString(idColumn);
                    String artist = cursor.getString(artistcolumn);
                    Long duration = cursor.getLong(durationcolumn);
                    Utilities objUtilities = new Utilities();
                    String timeDuration = objUtilities.milliSecondsToTimer(duration);   
                    HashMap<String, String> song = new HashMap<String, String>();
                    song.put("songTitle",thisTitle);
                    song.put("songPath", path);
                    song.put("artist", artist);
                    song.put("duration",timeDuration);
                    // Adding each song to SongList
                    songsList.add(song);
                    cursor.moveToNext();
                 }
            }
                // looping through playlist
            for (int i = 0; i < songsList.size(); i++) {
                    // creating new HashMap
                HashMap<String, String> song = songsList.get(i);
                    // adding HashList to ArrayList
                songsListData.add(song);
            }       
        }
        return songsListData;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:03:04.830

您永远不会清除歌曲列表，因此在每次删除时都会将您的所有项目添加到其中。

而这些又都被复制到songsListData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:39:07.277

从数据库中删除数据后，调用

```
Listview.invalidateViews(); 
```

并将适配器重置为列表。

实际上，它已从数据库中删除，但它在 ListView 中显示旧列表，因此使旧视图无效并重置适配器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-04T12:38:19.950

每次数据更改时调用 adapter.notifyDataSetChanged() 。

```
b.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        String title = songsListData.get(pos).get("songTitle");                        
                        adp.delete_byTitle(title);
                        songsListData.clear();
                        setListAdapter(null);
                        songsListData = getFavourites();                                                                                         
                        adapter = new SimpleAdapter(getApplicationContext(), songsListData,R.layout.favouritelist_item, from, to);

                        setListAdapter(adapter);
                        adapter.notifyDataSetChanged();
                        Toast.makeText(FavouriteListActivity.this,"Song is removed from Favourites", Toast.LENGTH_SHORT).show();
                    }
                }); 
```

# java - 如何使用现有的 Hadoop 集群配置 Jaql 并使用 jaql 运算符过滤结果？

> ID：13702954
> 
> 赞同：0
> 
> 时间：2012-12-04T12:30:13.120
> 
> 标签：java, hadoop, playback, jjaql

当我通过提供正确的路径从 hdfs 读取文件时，文件被成功读取，但是当我尝试使用 jaql 的转换运算符时，它会引发如下所示的异常，如果我尝试在 JAQL shell 上执行代码，则会引发异常的 job.jar 但即使在添加 jar 之后仍然会抛出异常。如果有人知道现有的hadoop集群没有正确配置JAQL，或者异常是由于其他原因造成的？

* * *

我的代码是：

```
 jaql.setQueryString("read(lines('hdfs://hadoopserver:54310/dbreports/reports.json'," +
                                    "{format: 'org.apache.hadoop.mapred.TextInputFormat',converter: 'com.ibm.jaql.io.hadoop.converter.FromJsonTextConverter'})) -> transform $.store_number;"); 
                System.out.println("jaql running successfully...."); 
                JsonValue jv = jaql.evaluate();
                System.out.println("value is "+jv);

        when run it throws an exception as:

        Exception in thread "Thread-38" java.lang.NoClassDefFoundError: org/apache/commons/httpclient/HttpMethod
            at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:295)
        Caused by: java.lang.ClassNotFoundException: org.apache.commons.httpclient.HttpMethod
            at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
            at sbt.PlayCommands$$anonfun$61$$anonfun$63$$anon$2$$anonfun$loadClass$1.apply(PlayCommands.scala:563)
            at sbt.PlayCommands$$anonfun$61$$anonfun$63$$anon$2$$anonfun$loadClass$1.apply(PlayCommands.scala:563)
            at scala.Option.map(Option.scala:133)
            at sbt.PlayCommands$$anonfun$61$$anonfun$63$$anon$2.loadClass(PlayCommands.scala:563)
            ... 1 more
        java.io.IOException: Job failed!
            .......... 
```

有人知道我错过了什么吗？

# svg - 带有 Illustrator 的透明 SVG

> ID：13702958
> 
> 赞同：9
> 
> 时间：2012-12-04T12:30:28.383
> 
> 标签：svg, adobe-illustrator

如何使用 Adob​​e Illustrator 创建具有透明背景的 SVG 文件？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-04T12:32:22.187

只要您不插入矩形或填充整个图形的内容或使用 CSS 为根元素设置背景颜色，SVG 始终具有透明背景。

如果您还有其他问题，请提供一个基本的 SVG 示例来展示您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-24T12:31:45.373

.svg 就像 .png（就透明背景而言），除了它是矢量格式，而 .png 是光栅格式（即它在放大时像素化）

# sql - 如何自动更新长度

> ID：13702966
> 
> 赞同：0
> 
> 时间：2012-12-04T12:31:22.310
> 
> 标签：sql

从表中我得到一列中字符的长度。我的查询如下

```
SELECT b.[file_id],b.[lineno],b.fileContent, datalength(b.fileContent) Length1
FROM FileBascContent b join filebasic on filebasic.[file_id]=b.[file_id]
WHERE substring(b.fileContent,1,4)
 NOT IN ('VOL1','HDR1','UHL1','UTL1','HDR2','EOF1','EOF2') 
AND filebasic.[file_id]=347 
```

我得到的结果是 98、97 和 100，这对我来说很好。

有什么方法可以增加空间2或3，长度为100。我想要的是所有不是100的长度都应该是100。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:50:31.483

您的问题不清楚，但您可能需要[Oracle 上的 LPAD 功能](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_2017.htm)。这是关于在 SQL Server 上执行此操作的问题：[SQL Server 2008 中的 LPAD](https://stackoverflow.com/questions/5912416/lpad-in-sql-server-2008)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:48:41.583

你是这个意思吗？

```
Right(Space(100) + b.fileContent,100) fileContent 
```

# javascript - 尽管将 globalCompositeOperation 设置为 source-over，但 HTML5 画布颜色会变浅一些

> ID：13702974
> 
> 赞同：0
> 
> 时间：2012-12-04T12:31:47.763
> 
> 标签：javascript, html, gwt, canvas

我在另一幅画布上作画。在某些情况下，两个画布具有相同的线条（相同的像素、相同的颜色）。我正在将上下文的全局复合操作设置为 source-over。但是，生成的线条的颜色比原始颜色浅。我不知道为什么。如果有任何区别，我正在使用 GWT

# iphone - 想在ios中以编程方式在UIView中实现UIPageController和UIScrollView

> ID：13702977
> 
> 赞同：0
> 
> 时间：2012-12-04T12:31:52.333
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我的 ViewController 现在有一个视图控制器和一个 UIView，当我单击 barButton 时，第二个视图会像弹出窗口一样出现，现在我想在第二个视图中添加页面控制器和滚动视图，我的第二个视图不是 UIViewController 但它是 UIView.so我怎样才能做到这一点...

我的第一个视图是“ImageViewController”，第二个视图是“PopupView”

在 ImageViewController.m

```
#import "PopupView.h"

@implementation ImageViewController

- (void)viewDidLoad
{
UIBarButtonItem *clipArt = [[UIBarButtonItem alloc] initWithTitle:@"Clip Art"
                                                                style:UIBarButtonItemStyleBordered  
                                                               target:self
                                                               action:@selector(popUpView:)];
}

- (void)popUpView:(id)sender {
    CGRect * imageFrame = CGRectMake(10, 90, 300, 300);
    PopupView *popUpView = [[PopupView alloc] initWithFrame:imageFrame];
    [self.view addSubview:popUpView];

} 
```

在 PopupView.m

```
- (id)initWithFrame:(CGRect)frame
{

    if (self) {
        CGRect * imageFrame = CGRectMake(0, 0, 300, 300);
        self = [super initWithFrame:frame];
        UIImageView *starImgView = [[UIImageView alloc] initWithFrame:imageFrame]; //create ImageView 

        starImgView.alpha =0.8;
        starImgView.layer.cornerRadius = 15;
        starImgView.layer.masksToBounds = YES;
        starImgView.image = [UIImage imageNamed:@"black"];

        [self addSubview:starImgView];
        self.backgroundColor = [UIColor clearColor];
}
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:49:36.460

在第二个视图中像这样实现，用于带有页面控件的滚动视图（此示例说明了两个视图的场景）：

```
CGRect scrollViewFrame = CGRectMake(ur dimensions for scroll view);
UIScrollView *myScrollView = [[UIScrollView alloc] initWithFrame:scrollViewFrame];
myScrollView.pagingEnabled = YES;
myScrollView.contentSize = CGSizeMake(scrollViewFrame.size.width * 2, scrollViewFrame.size.height);
//content size is the actual size of the content to be displayed in the scroll view. 
//Since, here we want to add two views so multiplied the width by two.

CGRect viewFrame = [myScrollView bounds];

UIView *view1 = [[UIView alloc] initWithFrame:viewFrame];

viewFrame.origin.x = viewFrame.size.width; //setting the offset so that view2 is next to view 1
UIView *view2 = [[UIView alloc] initWithFrame:viewFrame];

//add both the view to scroll view
[myScrollView addSubview:view1];
[myScrollView addSubview:view2];

//add scroll view to parent view
[self addSubview:myScrollView]; 
```

您可以将 view1/2 替换为任何视觉元素。要使用页面控件进行滚动，请确保要添加到滚动视图的所有视图都具有相同的宽度/高度。这样它就可以开箱即用，您不必做任何事情。此外，将 UIPageControl 添加到视图以向用户提供某种反馈总是一个好主意。虽然它是可选的。

还有一件事，如果您想使用页面控件进行水平滚动，请按上述方法增加宽度。如果要垂直滚动，请增加高度并保持宽度不变。

# iphone - 我如何在滚动视图上方的 uislider 上强制触摸 End：iphone

> ID：13702980
> 
> 赞同：1
> 
> 时间：2012-12-04T12:32:15.703
> 
> 标签：iphone, objective-c, uiscrollview, uislider, uitouch

在我的应用程序中，我在滚动视图上有一个 UISlider，

当用户从滑块上移开手指时，我需要**将滑块移动到下一个 ciel/flor/round 值，**

我实现了 Touch 委托方法，begin & Cancel 但这些在滑块上不起作用（可能是由于 UIScroll 视图）。

**触摸 uiscroll 视图不工作**

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:00:25.290

考虑到您的情况，我建议使用**UITapGestureRecognizer**。首先在 init 上设置 TapGestureRecognizer。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapRecognizer:)];
[scrollView addGestureRecognizer:tap]; 
```

然后从以下内容中获取信息：

```
 - (void)tapRecognizer:(UITapGestureRecognizer *)gesture
  { 
    CGPoint touchPoint=[gesture locationInView:scrollView];
  } 
```

# authentication - 如何限制对 FTP 文件夹的访问？

> ID：13702988
> 
> 赞同：2
> 
> 时间：2012-12-04T12:32:37.233
> 
> 标签：authentication, ftp, file-permissions, directory-permissions

我正在使用可以管理 FTP 帐户的共享网络服务器。我想知道如何设置文件夹的访问限制，

假设我有一个文件：

```
www.somepage.com/ftp/import/ 
```

它被命名为`someData.txt`

为什么我可以通过点击来访问这个文件：

```
www.somepage.com/ftp/import/someData.txt 
```

如果文件就在那里，为什么要让一个具有登录名/密码的 FTP 用户来访问它。如果我检查文件限制， public 有`read/write/execute/sticky`，所以我不明白为什么我可以通过点击它的 URL 来填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:58:18.253

[关于权限的文章](http://www.pageresource.com/cgirec/chmod.htm)

尝试使用`chmod`通过命令行/终端更改服务器上文件/文件夹的权限。似乎您的权限当前设置为 777，允许任何人做任何事情。

*   7 允许用户读/写/执行
*   7 允许组读/写/执行
*   7 允许世界读/写/执行

您可能希望使用 770 之类的东西，它可以防止除用户和组之外的任何人对文件和文件夹执行任何操作。这些权限对于安全非常重要，因为如果设置不正确，您可能会成为攻击的受害者。

# algorithm - 随机数生成/哪种算法？

> ID：13702989
> 
> 赞同：0
> 
> 时间：2012-12-04T12:32:44.310
> 
> 标签：algorithm, encryption, cryptography

我们需要迁移到更好的 RNG 或 RBG 以生成一些密钥值，这些密钥值将进一步用于数据加密。

哪个是最合适的算法？我应该为此考虑 NIST 文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:51:20.653

由于我们是一个编程站点，因此我会认真研究在您的特定运行时环境中可供您使用的安全随机数生成器。通常，您将不得不依赖系统资源来生成随机数，至少要为伪随机数生成器播种。唯一可能的例外是 CPU 特定的随机指令，例如最新的 Intel CPU 上使用的指令（希望经过充分测试的安全 RNG 将成为 CPU 的主要功能）。

`/dev/random`在许多编程环境中，除了使用 OpenSSL 或用于播种之外，别无选择。一般来说，很难找到有关随机数生成器的有用信息。有时 RNG 根本不适合（例如原生 PHP 版本）。

如果可能，请尝试找到符合 NIST 要求的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:45:55.650

任何产生高斯分布并具有宽输出（例如至少 32 位）的伪随机数生成器都应该足以创建密钥。由您决定您的需求，然后找到匹配的 RNG。

有关详细信息，请参阅[http://www.random.org/randomness](http://www.random.org/randomness)。

根据您选择实现此功能的语言，我相信您可以在 Web 上找到伪 RNG 的源代码，如果您系统中内置的源代码不够好的话。

# java - 休眠：以错误的顺序创建的对象？

> ID：13702990
> 
> 赞同：2
> 
> 时间：2012-12-04T12:32:45.433
> 
> 标签：java, hibernate

我刚刚从 XML 映射切换到注释，不得不意识到我的序列化类不再工作了！我希望你能帮助我找出原因:)

我有一个`School`包含一个类`Address`

```
@Entity
@Table(name="schools")
    public class School {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name = "id")
    private Long id;

    @ManyToOne
    @JoinColumn(name="address_id", nullable=true)
    private Address address;
        ...
} 
```

`Address`班级：

```
@Entity
@Table(name="addresses")
public class Address {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name = "id")
    private Long id;

    @Column(name="street", nullable=false, updatable=true)
    private String street;      // with nr
    ...
} 
```

我尝试像这样序列化：

```
sessionFactory = MyFactory.getSessionFactory();
            session = sessionFactory.openSession();

            Transaction tx = session.beginTransaction();

            School mbs = new School("interesting school");
            Address a = new Address("garden street 5","12345", "somewhere");
            mbs.setAddress(a);

            session.save(mbs);
            tx.commit(); 
```

这以前适用于 XML，但现在不行。

控制台上可见的第一个 Hibernate 查询操作是： Hibernate：插入学校（address_id，layout_id，name）值（？，？，？）

因此发生错误：错误：列'address_id'不能为空

我怎样才能解决这个问题？

.

这些是表：

```
CREATE TABLE schools(
    id INTEGER NOT NULL AUTO_INCREMENT,
    name CHAR(50),

    address_id INTEGER NOT NULL,
    layout_id INTEGER NOT NULL,

    CONSTRAINT fk_address FOREIGN KEY (address_id) REFERENCES addresses(id),
    CONSTRAINT fk_layout FOREIGN KEY (layout_id) REFERENCES layout_headers(id),

    PRIMARY KEY (id)
);
CREATE TABLE addresses(
    id INTEGER NOT NULL AUTO_INCREMENT,
    street CHAR(55),
    zip CHAR(6),
    city CHAR(60),

    CONSTRAINT addr_pk PRIMARY KEY (id)
); 
```

在我的 hibernte.cfg.xml 我有以下内容：

```
<hibernate-configuration>
    <session-factory>
     ...
        <mapping class="creator.models.school.Address" />
        <mapping class="creator.models.school.Report" />
        <mapping class="creator.models.school.School" />
        <mapping class="creator.models.school.SchoolClass" />
        ...
    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:17:54.373

您应该在班级字段上指定注释`cascade`属性以保存上学前的地址。例如，`@ManyToOne``address``School``CascadeType.ALL`

# windows-phone-7 - 提交 Windows Phone 应用程序时是否可以选择退出 WP8？

> ID：13702991
> 
> 赞同：2
> 
> 时间：2012-12-04T12:32:46.650
> 
> 标签：windows-phone-7, windows-phone-8

我有一个使用 7.1 SDK 构建的 Windows Phone 应用程序，该应用程序在 WP7 上运行良好，但在 WP8 上根本不工作（我使用 UDP 使用多播，WP8 可以加入组，但由于某种原因不发送/接收任何消息，其他人有同样的问题：[Windows Phone 8 上的 UDP 多播组](https://stackoverflow.com/questions/13528262/udp-multicast-group-on-windows-phone-8)）。

当我提交我的应用程序时，有没有办法退出 WP8？我只希望 WP7 用户可以使用该应用程序。我正在寻找类似 256MB 退出选项的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:34:52.807

不，没有办法让第 3 方应用程序退出 WP8。一些在 WP7 上使用第一方 API 的应用程序在升级到 WP8 时从 WP8 中选择退出，但仅此而已。

听起来您在应用程序中遇到了令人讨厌的应用程序兼容性错误。有没有办法让你的代码在 WP8 上工作？如果这是一个足够小的更改，我建议您使用[运行时检查](http://www.developer.nokia.com/Resources/Library/Lumia/#!co-development-and-porting-guide.html;#toc_Runtimeadaptation)来应用一些特定于 WP8 的代码。有关在 WP7 和 WP8 之间共享代码的更多信息，请参阅本文@http [://www.developer.nokia.com/Resources/Library/Lumia/# !co-development-and-porting-guide.html](http://www.developer.nokia.com/Resources/Library/Lumia/#!co-development-and-porting-guide.html)

```
if (IsRunningOnWP8)
{
// add some WP8 specific UDP Magic
}

public bool IsRunningOnWP8
{
    get
    {
        return Environment.OSVersion.Version.Major >= 8;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:31:08.703

无法选择退出为 Windows Phone 8 发布和下载 7.1 应用程序。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-04T17:19:28.540

旨在在 Windows Phone 7.1 上运行的应用程序将在 Windows Phone 8.0 上以怪异模式运行。这意味着引入重大更改的 API 将在运行 7.1 应用程序时保留其旧行为。

但是，有一些注意事项记录在[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx)中。

# c# - 为什么产量与常规可枚举具有不同的行为？

> ID：13702995
> 
> 赞同：3
> 
> 时间：2012-12-04T12:33:03.430
> 
> 标签：c#, .net, iterator

当我通过比较来迭代两个具有不同类型的可枚举时，我发现了这一点：

```
class Program
{
    public static IEnumerable<mm> YieldlyGet()
    {
        yield return new mm { Int = 0 };
        yield return new mm { Int = 1 };
        yield return new mm { Int = 2 };
        yield return new mm { Int = 3 };
        yield return new mm { Int = 4 };
        yield return new mm { Int = 5 };
    }

    public static IEnumerable<int> YieldlyGetInt()
    {
        yield return 0;
        yield return 1;
        yield return 2;
        yield return 3;
        yield return 4;
        yield return 5;
    }

    public static IEnumerable<int> Get() 
    {
        return new List<int> { 0, 1,2,3,4,5 };
    }

    static void Main(string[] args) 
    {
        var yieldr = YieldlyGet().GetEnumerator();
        var yieldv = YieldlyGetInt().GetEnumerator();

        var list = Get().GetEnumerator();

        int i = -1;
        Console.WriteLine("For the current index: {0}", ++i);
        Console.WriteLine("y-r: Should I move next? {0}, if yes, value: {1}", yieldr.MoveNext(), yieldr.Current != null ? yieldr.Current.Int : 0);
        Console.WriteLine("y-v: Should I move next? {0}, if yes, value: {1}", yieldv.MoveNext(), yieldv.Current);
        Console.WriteLine("l: Should I move next? {0}, if yes, value: {1}", list.MoveNext(), list.Current);

        Console.WriteLine("For the current index: {0}", ++i);
        Console.WriteLine("y-r: Should I move next? {0}, if yes, value: {1}", yieldr.MoveNext(), yieldr.Current != null ? yieldr.Current.Int : 0);
        Console.WriteLine("y-v: Should I move next? {0}, if yes, value: {1}", yieldv.MoveNext(), yieldv.Current);
        Console.WriteLine("l: Should I move next? {0}, if yes, value: {1}", list.MoveNext(), list.Current);

        Console.WriteLine("For the current index: {0}", ++i);
        Console.WriteLine("y-r: Should I move next? {0}, if yes, value: {1}", yieldr.MoveNext(), yieldr.Current != null ? yieldr.Current.Int : 0);
        Console.WriteLine("y-v: Should I move next? {0}, if yes, value: {1}", yieldv.MoveNext(), yieldv.Current);
        Console.WriteLine("l: Should I move next? {0}, if yes, value: {1}", list.MoveNext(), list.Current);

        Console.WriteLine("For the current index: {0}", ++i);
        Console.WriteLine("y-r: Should I move next? {0}, if yes, value: {1}", yieldr.MoveNext(), yieldr.Current != null ? yieldr.Current.Int : 0);
        Console.WriteLine("y-v: Should I move next? {0}, if yes, value: {1}", yieldv.MoveNext(), yieldv.Current);
        Console.WriteLine("l: Should I move next? {0}, if yes, value: {1}", list.MoveNext(), list.Current);

        Console.WriteLine("For the current index: {0}", ++i);
        Console.WriteLine("y-r: Should I move next? {0}, if yes, value: {1}", yieldr.MoveNext(), yieldr.Current != null ? yieldr.Current.Int : 0);
        Console.WriteLine("y-v: Should I move next? {0}, if yes, value: {1}", yieldv.MoveNext(), yieldv.Current);
        Console.WriteLine("l: Should I move next? {0}, if yes, value: {1}", list.MoveNext(), list.Current);

        Console.WriteLine("For the current index: {0}", ++i);
        Console.WriteLine("y-r: Should I move next? {0}, if yes, value: {1}", yieldr.MoveNext(), yieldr.Current != null ? yieldr.Current.Int : 0);
        Console.WriteLine("y-v: Should I move next? {0}, if yes, value: {1}", yieldv.MoveNext(), yieldv.Current);
        Console.WriteLine("l: Should I move next? {0}, if yes, value: {1}", list.MoveNext(), list.Current);

        Console.WriteLine("For the current index: {0}", ++i);
        Console.WriteLine("y-r: Should I move next? {0}, if yes, value: {1}", yieldr.MoveNext(), yieldr.Current != null ? yieldr.Current.Int : 0);
        Console.WriteLine("y-v: Should I move next? {0}, if yes, value: {1}", yieldv.MoveNext(), yieldv.Current);
        Console.WriteLine("l: Should I move next? {0}, if yes, value: {1}", list.MoveNext(), list.Current);

        Console.ReadLine();
} 
```

问题是，当我在最后一个位置之后，列表为我提供了默认值，而 yield 创建的迭代器继续显示最后一个值。

对于当前指数：**6**
年：我应该下一步移动吗？**False**，如果是，值：**5**
yv：我应该下一步移动吗？**False**，如果是，值：**5**
l：我应该下一步移动吗？**假**，如果是，值：**0**

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T12:40:54.897

根据关于该[`IEnumerator<T>.Current`](http://msdn.microsoft.com/en-us/library/58e146b7.aspx)属性的 MSDN 文档：

> `Current`is undefined [when]：最后一次调用`MoveNext`返回`false`，表示集合结束。

`Current`这意味着枚举器的底层实现可以自由地从一次`MoveNext`返回中返回任意值`false`。它可以是 0、6、-1、2147483647，或者只是随机选取的值；无论如何，您应该不会使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:43:46.040

这取决于继承的 IEnumerator 实现。对于列表，有描述此的 Enumerator 的实现：

```
[Serializable]
    public struct Enumerator : IEnumerator<T>, IDisposable, IEnumerator
    {
      private List<T> list;
      private int index;
      private int version;
      private T current;

      public T Current
      {
        get
        {
          return this.current;
        }
      }

      ....

      internal Enumerator(List<T> list)
      {
        this.list = list;
        this.index = 0;
        this.version = list._version;
        this.current = default (T); //there are default of T
      }

      ....
    } 
```

对于产量实现是不同的。它返回最后一个值（因为电流在下一个不会改变）。

这种差异可能是由于这段代码是由不同的人在不同的时间编写的。此行为未定义，此外，如果您正确使用 IEnumerables，则不应看到此行为（因为通常人们不会显式使用 Enumerator.Next() 而是使用 foreach、linq 或通过索引直接访问（对于数组）） .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T13:01:18.993

让我们看看枚举器中发生了什么，它被`List<T>`类使用（这是 a [`List<int>.Enumerator`](http://msdn.microsoft.com/en-us/library/x854yt9s.aspx)）。实际上[msdn](http://msdn.microsoft.com/en-us/library/5ztkdk88.aspx)说当前值是未定义的，但我们可以分析 Framework 4.0 的实现。因此，当枚举器位于最后一个元素之后时，`MoveNextRare`将被调用：

```
public bool MoveNext()
{
    List<T> ts = this.list;
    if (this.version != ts._version || this.index >= ts._size)
    {
        return this.MoveNextRare();
    }
    else
    {
        this.current = ts._items[this.index];
        List<T>.Enumerator<T> enumerator = this;
        enumerator.index = enumerator.index + 1;
        return true;
    }
} 
```

因此列表有效（未更改）此方法返回`defaut(T)`值（`0`用于 int）

```
private bool MoveNextRare()
{
    if (this.version != this.list._version)
        trow new InvalidOperationException();

    this.index = this.list._size + 1;
    this.current = default(T);
    return false;
} 
```

那么生成的枚举器呢？C# 生成枚举器类，该类将具有每个`yield return`语句的状态。移动到下一个状态会`Current`为此枚举器设置值：

```
bool MoveNext()
{
    bool flag;
    int state = this.state;
    if (state == 0)
    {
        this.state = -1;
        this.current = 0;
        this.state = 1;
        flag = true;
    }
    else if (state == 1)
    {
        this.state = -1;
        this.current = 1;
        this.state = 2;
        flag = true;
    }
    // ...
    else if (state == 5)
    {
        this.state = -1;
        this.current = 5;
        this.state = 6;
        flag = true;
    }
    else if (state == 6)
    {
        this.state = -1;
        flag = false;
        return flag;
    }
    else
    {
        flag = false;
        return flag;
    }
    return flag;
    flag = false;
    return flag;
} 
```

有趣的是`this.current`，在最后一次分配之后（状态为 时`5`）并没有改变。这就是为什么所有后续调用都`Current`将返回值，该值由上次`yield return`调用设置。

# iphone - 如何制作像tableview header 一样的evernote？

> ID：13702999
> 
> 赞同：0
> 
> 时间：2012-12-04T12:33:09.543
> 
> 标签：iphone, uitableview

当我将 UISearchBar 添加到 UITableView 时，我无法将其他 ui 控件放到标题中。如何制作像印象笔记一样的 UITableView Header？

![在此处输入图像描述](../Images/6063a5b70b3175bb95a23697681aa811.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:20:50.303

那是作为标题添加到表视图的单独视图。此外，还有一些稍作修改的控件。前两个是段控制。第三，您可以使用 UIControlStateNormal 的背景图像创建自定义 UIButton。然后添加搜索栏。实施将完全取决于您的要求。在 IB 中连接 IBAction 方法是其中一种方法。