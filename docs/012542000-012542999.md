# StackOverflow 问答 12542000-12542999

# ios - CGContextRef 旋转不起作用

> ID：12542002
> 
> 赞同：0
> 
> 时间：2012-09-22T08:05:21.897
> 
> 标签：ios, rotation, core-graphics, cgcontextref

我想将 CGContextRef 的内容旋转 -90 度。我找到了一些代码，但它无法正常工作。

```
CGContextRef tempColorRef = CGBitmapContextCreate(NULL, width, height, bitsPerComponent,
                                                  bytesPerRow, colorspace,
                                                  kCGImageAlphaPremultipliedLast);
CGImageRef colorImageRef = CGBitmapContextCreateImage(colorContextRef);
CGContextTranslateCTM(tempLayerRef, width / 2, height / 2);
CGContextRotateCTM(tempLayerRef, DegreesToRadians(-90));
CGContextScaleCTM(tempColorRef, 1.0, -1.0);
CGContextDrawImage(tempColorRef, CGRectMake(-width / 2, -height / 2, width, height), colorImageRef);
CGImageRelease(colorImageRef);

colorContextRef = tempColorRef; 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:19:55.323

根据 H2CO3 的评论，我尝试了各种转换。

这是我的错。`width`并且`height`是`size_t`变量，所以这些不能包含负值。错误发生在以下说明中。

`CGRectMake(-width / 2, -height / 2, width, height)`

现在工作正常。

# c++ - TDateTime 数据类型

> ID：12542009
> 
> 赞同：-1
> 
> 时间：2012-09-22T08:06:04.157
> 
> 标签：c++, visual-studio-2012, tdatetime

我一直在使用 C++ Builder 开发一些类。我一直在通过包含“vcl.h”来使用 TDateTime 数据类型。这只是 C++ Builder 独有的吗？

我问这个是因为我现在正在使用 Microsoft Visual Studio C++ 并且收到“TDateTime 是未定义的错误”。

如何在 Visual Studio 中使用这种类型？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:30:24.927

我建议看一下[boost.datetime](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html)，如果您可以访问 C++11 支持，请查看标头中提供的[标准 C++ 时间和持续时间实用程序](http://en.cppreference.com/w/cpp/chrono)`<chrono>`。使用其中任何一个的一个优点是它们是可移植的，因此您不必受限于给定的编译器或开发环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:27:27.510

大多数 Borland 的 Visual Component Library 都是围绕它自己的编译器特定的扩展和 delphi 代码构建的。我非常怀疑您是否可以轻松地让它在任何其他编译器下工作。

幸运的是，有很多选择。如果您使用的是 Visual C++，那么您可以使用 Microsoft 的日期/时间库：http: [//msdn.microsoft.com/en-us/library/6ahxxcsz%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/6ahxxcsz%28v=vs.100%29.aspx)

还有来自 Boost 和 QT 的可移植库，它们应该在任何现代 C++ 编译器下运行

*   [http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html)
*   [http://doc.qt.digia.com/4.5/qdatetime.html](http://doc.qt.digia.com/4.5/qdatetime.html)

# c - 将结构数组传递给函数

> ID：12542010
> 
> 赞同：2
> 
> 时间：2012-09-22T08:06:46.637
> 
> 标签：c

我如何将结构从一个函数传递到另一个函数？

```
typedef char word_t[MAX_WORD_LEN+1];

typedef struct {
    int nwrds;
    word_t words[MAX_PARA_LEN];
} para_t;

int
main() {
    para_t onepara;
    while (get_paragraph(onepara, MAX_PARA_LEN) != EOF) {
        put_paragraph(onepara, MAX_SNIPPET_LEN);
    }
    end_output();
    return 0;
}

int
get_paragraph(para_t p, int limit) {
    int d, i;
    word_t w;
    for (i=0;i<limit;i++) {
        if ((d=get_word(w, MAX_WORD_LEN))==EOF) {
            return EOF;
        } else if(d==WORD_FND) {
            strcpy(p.words[i], w);
        } else if (d==PARA_END) {
            new_paragraph();
            break;
        }
    }
    return PARA_FND;
}

void
put_paragraph(para_t p, int limit)  {
    int i;
    for (i=0;i<limit; i++)  {
    printf("%s\n", p.words[i]);
    }
} 
```

我已经使用 strcpy 将单词 'w' 复制到结构 'p' 中的数组（在 get_paragraph 中），但是当我打印出该结构时，我无法获得任何输出。目前 put_paragraph 没有输出任何字符串，但我不知道为什么。

get_paragraph 中的 get_word 函数可以正确识别一个单词，我没有包含它以节省空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:17:14.063

`para_t`如果您希望函数以调用者可见的方式修改它，则需要传递一个指向 a 的指针。

C 中的所有内容都是通过*value*传递的，所以你的结构的副本被传递给`get_paragraph`函数，并且只有一个*副本*被修改。如果您希望函数修改参数，则需要传递一个指针。

```
typedef struct {
    char p[10];
} foo;

void bar(foo *f) {
    strcpy(f->p, "hello");
}

int main() {
    foo f = {0};
    bar(&f);
    printf("%s", f.p);  // prints "hello"
} 
```

由于一切都是按值传递的，如果`words`是指针而不是数组，这将起作用（尽管我仍然会传递指针，无需在此处进行复制）。

指针将被复制，但指针的*值*是内存地址，因此将在副本中维护，并且原始`words`变量所引用的同一块内存将被修改。

```
typedef struct {
    char *p;
} foo;

void bar(foo f) {
    strcpy(f.p, "hello");
}

int main() {
    foo f = {0};
    f.p = malloc(10);
    bar(f);
    printf("%s", f.p);  // prints "hello"
} 
```

* * *

附带说明...

随之而来的是，如果函数需要为参数本身分配一个全新的值，则必须使用*另一个*级别的间接，即指向指针的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:22:42.967

```
while (get_paragraph(onepara, MAX_PARA_LEN) != EOF) {
        put_paragraph(onepara, MAX_SNIPPET_LEN);
    } 
```

在您的代码中，您已经按值传递了结构变量`onepara`，*并且*当您按*值*传递变量时，函数只会访问变量的副本，而不是实际值 - 因此您对变量所做的任何修改都将是复制并不会反映在调用函数中的变量中。

在您的情况下，您已经`onepara`按值传递，但是为了使您的代码按预期工作，您需要传递`onepara`while 调用`get_paragraph`and的地址`put_paragraph`。

函数声明应该类似于，

```
int get_paragraph(para_t *p, int limit)

void put_paragraph(para_t *p, int limit) 
```

并且在调用上述函数时，需要传递的地址`one_para`

```
while (get_paragraph(&onepara, MAX_PARA_LEN) != EOF) {
        put_paragraph(&onepara, MAX_SNIPPET_LEN); 
```

在函数`get_paragraph`and中，您需要通过运算符而不是运算符`put_paragraph`来访问结构的成员，如下所示：`->``.`

`p->words[i]`（而不是`p.words[i]`）

例如，你会这样做`strcpy`，

```
strcpy(p->words[i], w) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T08:12:52.763

你可以通过它（也可以返回）：

```
#include <stdio.h>

typedef struct
{
  int x;
  const char* str;
} T;

T fxn(T t)
{
  t.x++;
  t.str++;
  return t;
}

int main(void)
{
  T t1 = { 1, "XYZ" };
  T t2;
  printf("t1: %d, %s\n", t1.x, t1.str);
  t2 = fxn(t1);
  printf("t1: %d, %s\n", t1.x, t1.str);
  printf("t2: %d, %s\n", t2.x, t2.str);
  return 0;
} 
```

输出（[ideone](http://ideone.com/tDix3)）：

```
t1: 1, XYZ
t1: 1, XYZ
t2: 2, YZ 
```

上面的例子展示了如何*按值*传递（和返回）结构。`fxn()`，如您所见，获取传递给它的内容的副本。所以，如果你想修改被传递的结构，你必须要么像上面的例子那样返回新的结构，要么*通过引用*传递结构：

```
#include <stdio.h>

typedef struct
{
  int x;
  const char* str;
} T;

void fxn2(T* t)
{
  t->x++;
  t->str++;
}

int main(void)
{
  T t1 = { 1, "XYZ" };
  printf("t1: %d, %s\n", t1.x, t1.str);
  fxn2(&t1);
  printf("t1: %d, %s\n", t1.x, t1.str);
  return 0;
} 
```

输出（[ideone](http://ideone.com/bfs3Q)）：

```
t1: 1, XYZ
t1: 2, YZ 
```

# php - Zend 文件上传重命名错误

> ID：12542013
> 
> 赞同：1
> 
> 时间：2012-09-22T08:06:56.107
> 
> 标签：php, zend-framework, zend-form, zend-filter, zend-file

我正在使用 Zend Element File 上传三个文件。我正在上传和重命名文件。现在的问题是，在上传相同的扩展程序时，它会产生错误

```
Zend_Filter_Exception: File 'D:\wamp2\tmp\php2443.tmp' could not be renamed. It already exists. 
```

例如，如果在第一个文件中我`.txt`在第二个文件中上传扩展文件，`.docx`在第三个文件中我再次选择`.txt`or `.docx`，它将产生上述给定的错误。

但是如果我选择三个不同的扩展名，那么一切都会变得最好。我正在使用以下代码

```
 if ($form->med_file_1->isUploaded()) {

    $originalFilename = pathinfo($form->med_file_1->getFileName());

    $newFilename = time() . '.' . $originalFilename['extension'];
    $form->med_file_1->addFilter('Rename', "application_data/uploaded_files/patients/" . $newFilename,$originalFilename['basename']);
    $form->med_file_1->receive();

}

 if ($form->med_file_2->isUploaded()) {

    $originalFilename = pathinfo($form->med_file_2->getFileName());
    $newFilename = time() . '.' . $originalFilename['extension'];
    $form->med_file_2->addFilter('Rename', "application_data/uploaded_files/patients/" . $newFilename,$originalFilename['basename']);
    $form->med_file_2->receive();

}

    if ($form->med_file_3->isUploaded()) {
                $originalFilename = pathinfo($form->med_file_3->getFileName());
                $newFilename = time() . '.' . $originalFilename['extension'];
                $form->med_file_3->addFilter('Rename', "application_data/uploaded_files/patients/" . $newFilename,$originalFilename['basename']);
                $form->med_file_3->receive();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:05:05.967

错误的原因是因为您正在命名每个上传的文件：

```
time() . '.' . $originalFilename['extension']; 
```

调用`receive()`发生得如此之快，以至于`time()`每次调用都返回相同的值，因此您最终可能会得到重复的文件名。您只需要为每个文件生成一个更唯一的名称。像下面这样的东西应该可以工作：

```
md5(uniqid(time(), true)) . '.' . $originalFilename['extension'];
//or
$originalFilename['basename'] . '_' . time() . '.' . $originalFilename['extension']; 
```

# javascript - 如何在 MVC 的 Razor 语法中使用 Jscript 中的“@”符号？

> ID：12542015
> 
> 赞同：0
> 
> 时间：2012-09-22T08:07:11.680
> 
> 标签：javascript, asp.net-mvc-3

我正在使用 Razor 语法开发 MVC 3 应用程序。

我正在 cshtml 文件中编写 Jscript.... 我想在 JScript 中使用 @ 但它显示黄色背景。

我想将整数值分配给按钮 ID 怎么做？

这是代码...

```
 success: function (data) {

                $("p.p12").append

                ("<div style=\"background-color:#FAFAFA\";>Recently Added... <br /><a href=\"../../Employee/Details/" + data.OwnerID + "\">" + data.OwnerName + "</a>"
                + data.cmtDateTime + "  <span class=\"EmpName\"><button type=\"button\" id = \" @item.Id \"class=\"deleteComment\">Delete</button></span> <br />" + data.msg + "</div>");

                document.getElementById('Comment').value = "";
                $(".ParentBlock").slideDown("slow");
                $(".ParentBlock").attr("DataCommentId",data.Id);

                $('.ShowComments').text('Hide Comments');

            } 
```

这是图像...

![在此处输入图像描述](../Images/9dc55f88d5ca15cf1e122f513cd9cd80.png)

我应该为@符号做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:32:43.477

您当前的代码是正确的。运行它，你会发现它会起作用。就黄色曲线而言，好吧，忽略它并停止信任自动代码编辑器，相信您编写的代码 - Razor Intellisense 远非完美。希望他们会在未来的版本中改进它。

作为构建此元素的替代方法，您可以使用以下代码，因为您的代码一团糟（例如，属性之间没有空格，您已经反转了`;`and `"`，...）：

```
$('p.p12').append(
    $('<div/>', {
        style: 'background-color:#FAFAFA;',
        html: 'Recently Added...'
    })
    .append($('<br/>'))
    .append($('<a/>', {
        href: '@Url.Action("Details", "Employee", new { id = "__employeeId__" })'.replace('__employeeId__', data.OwnerID),
        html: data.OwnerName
    }))
    .append(data.cmtDateTime)
    .append($('<span/>', {
        'class': 'EmpName',
        html: $('<button/>', {
            type: 'button',
            id: '@item.Id',
            'class': 'deleteComment',
            html: 'Delete'
        })
    }))
    .append($('<br/>'))
    .append(data.msg)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:14:26.180

你确定`item`存在吗？（只有这个词有下划线）您收到什么类型的错误？请显示更多代码。

**添加：**

工作示例：

```
@{ int item = 123; } 
```

jQuery代码：

```
$(function () {
    var name = 'some_name';
    alert('<div class="' + name + '">@item</div>');
}); 
```

这很完美。

# jquery - $.ajaxStop 似乎没有触发

> ID：12542016
> 
> 赞同：1
> 
> 时间：2012-09-22T08:07:14.107
> 
> 标签：jquery

我在一个脚本中有几个 ajax 请求，一些同步一些异步我使用 pload.gif 在 ajax 请求处于活动状态超过 1 秒时显示。我发现在一种情况下，即使请求成功并且预期的操作已完成，pload.gif 仍会继续显示。N：B：没有其他请求被触发，即 $.active = 1。但是 ajaxStop 没有触发此外我已经测试了 ajaxComplete 和 ajaxSuccess（不是我想要这些，因为我想捕获任何异步请求）并且这些也不会触发任何一个。

这是有问题的请求：

```
$.ajax({
    beforeSend: function(){
        $("#loading p").append("validate class schedules");
        console.log("validate class schedules");
    },
    type: "POST",
    url: "../_admin/admin_Validate_Class_Schedule.php",
    data: {class_Key: current_Class_Key, schedule_Key : current_Schedule_Key},
    dataType: "text",
    async: false,
    success: function(return_Data){
        console.log("success");
        var result = $.trim(return_Data);
        console.log("result: " + result + " " + "call count: " + call_Count + " : " + $("#schedule_Description").val() + " " + $("#schedule_Description").val().length + " " +  current_Class_Key);

        if (result == "exists"){
            $("#create_Schedule .form_Submit").attr("value", "Update Schedule");
            $("#create_Schedule").attr("action", "process_Schedule_Update.php");
            $(".form_Footer .form_Submit").css("color", "#fff");
            $(".form_Footer .form_Submit").removeAttr("disabled");                  
        } else {
            $("#create_Schedule .form_Submit").attr("value", "Create Schedule");
            $("#create_Schedule").attr("action", "process_Schedule_Create.php");
            $(".form_Footer .form_Submit").css("color", "red");
            $(".form_Footer .form_Submit").attr("disabled","disabled");             
            if ((current_Class_Key.length != 0) && ($("#schedule_Description").val().length != 0)){
                $(".form_Footer .form_Submit").css("color", "#fff");
                $(".form_Footer .form_Submit").removeAttr("disabled");
            }
        }   
    },
    error: function(){
        console.log("Validate Could not retrieve XML file.");
    }
});  // end ajax call 
```

我的诱惑是在成功分支的末尾使用以下内容

```
if ($.active == 1){                // nothing else requested which should be the case
   $.event.trigger( "ajaxStop" );  // force a stop
   $.active = 0;                   // force active to zero as belt and braces as not
}                                  // sure if triggering stop will set active to zero 
```

但是我不确定-这是否会为以后存储问题以及为什么无论如何都需要这样做。我不想在我的所有请求中都开始编码。我希望我的所有请求在完成后减少 $.active。所以我想真正的问题是为什么不是这样？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:27:40.410

也许不是直接回答你为什么它似乎没有触发的问题，但对于评论来说太长了，并且可能是解决你的问题的方法：

您可以使用 jQuery 的新延迟系统来附加 ajax 回调。jQuery 对象上的 ajax 调用返回一个延迟对象：

```
var dfd = $.ajax({
              beforeSend: function(){
                  $("#loading p")
                      .append("validate class schedules");
                  console.log("validate class schedules");
              },
              type: "POST",
              url: "../_admin/admin_Validate_Class_Schedule.php",
              data: {class_Key: current_Class_Key, schedule_Key : current_Schedule_Key},
              dataType: "text",
              async: false
          }); 
```

您可以使用`deferred.then`, `deferred.done`,将回调附加到该对象上`deferred.fail`：

```
dfd.done(function(){
    // ajax succes, handle
});
dfd.fail(function(){
    // ajax failure, handle
});

// OR

dfd.then(function(){
    // ajax succes, handle
}, function(){
    // ajax failure, handle
}); 
```

一旦延迟对象得到“解决”（这发生在 ajax 调用完成或失败时），就会调用适当的回调。即使您在已解决回调时附加回调，您的回调也会立即触发（当然如果合适的话）

这是在 jQuery 中做事的新方式，它可以为您省去很多麻烦！它很干净，并且使处理异步性变得容易得多。

[此处的文档中的更多信息](http://api.jquery.com/category/deferred-object/)

# ruby-on-rails - 使用 rspec 测试页面查看计数器

> ID：12542026
> 
> 赞同：2
> 
> 时间：2012-09-22T08:08:34.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我在帖子模型中添加了一个非常简单的计数器。每当有人打开帖子时，它都会将相应的字段更新`:counter`1。

```
 def show
    @story = Story.find(params[:id])
    @comment = @story.comments.build
    @comments = @story.comments.arrange(order: :created_at)

    @story.increment!(:counter) # ---Here---

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @story }
    end
  end 
```

实际上，我检查了数据库，这件事正在工作。但是我的测试失败了：

```
it "raise the counter by one when visiting a page" do
  story = FactoryGirl.create(:story)
  expect {
    visit story_url(story)
    }.to change { story.counter }.by(1)
end 
```

它显示：

```
1) Stories raise the counter by one when visiting a page
  Failure/Error: expect {
    result should have been changed by 1, but was changed by 0
    # ./spec/requests/stories_spec.rb:8:in `block (2 levels) in <top (required) >' 
```

这是我的test.log：

```
Started POST "/stories" for 127.0.0.1 at 2012-09-22 11:31:32 +0330
Processing by StoriesController#create as HTML
  Parameters: {"utf8"=>"✓", "story"=>{"title"=>"sfomqd8s2r", "content"=>"Beatae voluptatibus quia cumque voluptate. Beatae sed aut sit. Fugiat deleniti et vitae accusantium blanditiis. Consequatur at itaque temporibus autem. Quo beatae delectus minus porro et.", "tag_names"=>""}, "commit"=>"submit"}
   (0.1ms)  SELECT MIN("tags"."stories_count") AS min_id FROM "tags" 
   (0.1ms)  SELECT MAX("tags"."stories_count") AS max_id FROM "tags" 
  Tag Load (0.1ms)  SELECT name, stories_count FROM "tags" ORDER BY name asc
   (0.1ms)  SAVEPOINT active_record_1
  SQL (1.5ms)  INSERT INTO "stories" ("comments_count", "content", "counter", "created_at", "publish_date", "slug", "title", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["comments_count", 0], ["content", "Beatae voluptatibus quia cumque voluptate. Beatae sed aut sit. Fugiat deleniti et vitae accusantium blanditiis. Consequatur at itaque temporibus autem. Quo beatae delectus minus porro et."], ["counter", 0], ["created_at", Sat, 22 Sep 2012 11:31:32 IRST +03:30], ["publish_date", nil], ["slug", nil], ["title", "sfomqd8s2r"], ["updated_at", Sat, 22 Sep 2012 11:31:32 IRST +03:30], ["user_id", nil]]
   (0.1ms)  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/stories/2
Completed 302 Found in 18ms (ActiveRecord: 1.9ms)

Started GET "/stories/2" for 127.0.0.1 at 2012-09-22 11:31:32 +0330
Processing by StoriesController#show as HTML
  Parameters: {"id"=>"2"}
   (0.1ms)  SELECT MIN("tags"."stories_count") AS min_id FROM "tags" 
   (0.1ms)  SELECT MAX("tags"."stories_count") AS max_id FROM "tags" 
  Tag Load (0.1ms)  SELECT name, stories_count FROM "tags" ORDER BY name asc
  Story Load (0.1ms)  SELECT "stories".* FROM "stories" WHERE "stories"."id" = ? LIMIT 1  [["id", "2"]]
  CACHE (0.0ms)  SELECT "stories".* FROM "stories" WHERE "stories"."id" = ? LIMIT 1  [["id", "2"]]
  Comment Load (0.2ms)  SELECT "comments".* FROM "comments" WHERE "comments"."story_id" = 2 ORDER BY (case when comments.ancestry is null then 0 else 1 end), comments.ancestry, created_at
  SQL (0.3ms)  UPDATE "stories" SET "counter" = 1 WHERE "stories"."id" = 2
  Tag Load (0.2ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."story_id" = 2
  Rendered stories/_story_operation.html.erb (3.5ms)
  Rendered stories/_story.html.erb (5.4ms)
  Rendered comments/_form.html.erb (7.1ms)
Completed 200 OK in 34ms (Views: 18.1ms | ActiveRecord: 1.1ms | Solr: 0.0ms)
   (0.7ms)  rollback transaction 
```

我无法理解发生了什么。也许这与 Capybara 或我编写测试的方式有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:30:16.297

如你所知，

```
expect {
  visit story_url(story)
}.to change { story.counter }.by(1) 
```

比较`story.counter`块执行前后的值。当您的控制器加载和修改故事时，这是一个完全独立的 ruby​​ 对象（恰好引用数据库中的同一行）：`story`您的规范代码中的对象不知道对数据库所做的更改并保持相同（现在陈旧）数据。

为了让您的规范通过，您可以检查是否`story.reload.counter`正在更改。

# sql - SQL Server 2008 无法使用脚本以新创建的用户登录

> ID：12542029
> 
> 赞同：0
> 
> 时间：2012-09-22T08:09:18.037
> 
> 标签：sql, sql-server, sql-server-2008-r2

我`SQL-2008 R2`使用以下脚本创建了一个用户

```
Use [CamelotShiftManagement]
CREATE LOGIN [CamelotShiftManagementUser] 
WITH PASSWORD=N'123', 
DEFAULT_DATABASE=[CamelotShiftManagement], 
DEFAULT_LANGUAGE=[us_english], 
CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF 
```

当我尝试使用该用户登录时，出现以下错误

标题：连接到服务器

* * *

> 无法连接到本地主机。
> 
> 附加信息：
> 
> 无法打开用户默认数据库。登录失败。用户“CamelotShiftManagementUser”登录失败。（Microsoft SQL Server，错误：4064）
> 
> 如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=4064&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=4064&LinkId=20476)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:17:01.387

在此之前运行：

```
ALTER LOGIN [CamelotShiftManagementUser] WITH DEFAULT_DATABASE = master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T11:33:48.687

您可以重置登录的默认数据库。使用 sqlcmd，您可以执行以下操作：

```
sqlcmd -d master -U sa -P mypassword
and then:
alter login sa with default_database = master 
```

# c# - Windows8 出现错误“检测到布局周期。布局无法完成 。” 触摸自定义控制日期选择器

> ID：12542034
> 
> 赞同：2
> 
> 时间：2012-09-22T08:09:47.117
> 
> 标签：c#, xaml, windows-8, windows-runtime

我使用 C# 和 Xaml 为日期选择器 n Wndows8 App 创建了一个自定义控件。当我使用鼠标为日期或月份或年份展开组合框时，当我使用触摸屏并单击控件时它工作正常，然后它一直崩溃给我“检测到布局周期。布局无法完成​​”。错误。我应该怎么做才能消除这个错误？自定义控件代码：

XAML 代码：

```
 <UserControl
    x:Class="Win8.MainApp.User_Control.DatePicker"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Win8.MainApp.User_Control"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">
    <UserControl.Resources>
        <DataTemplate x:Key="DateTemplate">
            <TextBlock Text="{Binding}" FontWeight="Light" FontFamily="Segoe UI" FontSize="24" HorizontalAlignment="Left" Margin="9,2,0,0" VerticalAlignment="Center"/>
            <!--<ComboBoxItem Content="{Binding}" FontWeight="Light" FontSize="24" HorizontalAlignment="Left" VerticalAlignment="Center"/>-->
        </DataTemplate>
    </UserControl.Resources>
        <Grid Width="370">
            <StackPanel Orientation="Horizontal">
            <ComboBox ScrollViewer.VerticalScrollBarVisibility="Hidden" ItemTemplate="{StaticResource DateTemplate}" ItemsSource="{Binding Date.Day}"  Width="100" Height="30" MaxDropDownHeight="1" SelectedItem="{Binding Day, Mode=TwoWay}"/>
            <ComboBox ScrollViewer.VerticalScrollBarVisibility="Hidden" Margin="20,0,0,0" ItemTemplate="{StaticResource DateTemplate}" ItemsSource="{Binding Date.Month}"  Width="100" Height="30" MaxDropDownHeight="1" SelectedItem="{Binding Month, Mode=TwoWay}" />
            <ComboBox ScrollViewer.VerticalScrollBarVisibility="Hidden" Margin="20,0,0,0" ItemTemplate="{StaticResource DateTemplate}" ItemsSource="{Binding Date.Year}"  Width="120" Height="30" MaxDropDownHeight="1" SelectedItem="{Binding Year, Mode=TwoWay}"/>
            </StackPanel>
    </Grid>
</UserControl> 
```

.cs代码

```
 public sealed partial class DatePicker : UserControl, INotifyPropertyChanged
{
    private int _day;
    private int _month;
    private int _year;
    private Date _date = new Date();

    public int Day
    {
        get { return _day; }
        set
        {
            if (_day == value) return;
            _day = value;
            NotifyPropertyChanged("Day");
        }
    }

    public int Month
    {
        get { return _month; }
        set
        {
            if (_month == value) return;
            _month = value;
            _date.Day =
                new ObservableCollection<int>((Enumerable.Range(1, DateTime.DaysInMonth(DateTime.Now.Year, _month))));
            NotifyPropertyChanged("Month");
        }
    }

    public int Year
    {
        get { return _year; }
        set
        {
            if (_year == value) return;
            _year = value;
            _date.Day = new ObservableCollection<int>((Enumerable.Range(1, DateTime.DaysInMonth(_year, _month))));
            NotifyPropertyChanged("Year");
        }
    }

    public Date Date
    {
        get { return _date; }
    }

    private int GetDaysInMonth(int year, int month)
    {
        return DateTime.DaysInMonth(year, month);
    }

    public DatePicker()
    {
        this.InitializeComponent();
        SetTodaysDate();
        SetDataSource();
    }

    private void SetTodaysDate()
    {
        Day = DateTime.Now.Day;
        Month = DateTime.Now.Month;
        Year = DateTime.Now.Year;
    }

    private void SetDataSource()
    {
        int year = DateTime.Now.Year - 10;
        _date.Day = new ObservableCollection<int>(Enumerable.Range(1, GetDaysInMonth(Year, Month)));
        _date.Month = new ObservableCollection<int>(Enumerable.Range(1, 12));
        _date.Year = new ObservableCollection<int>(Enumerable.Range(year, 20));
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
}

public class Date : INotifyPropertyChanged
{
    private ObservableCollection<int> _day;
    private ObservableCollection<int> _month;
    private ObservableCollection<int> _year;

    public ObservableCollection<int> Day
    {
        get { return _day; }
        set
        {
            if (_day == value) return;
            _day = value;
            NotifyPropertyChanged("Day");
        }
    }

    public ObservableCollection<int> Month
    {
        get { return _month; }
        set
        {
            if (_month == value) return;
            _month = value;
            NotifyPropertyChanged("Month");
        }
    }

    public ObservableCollection<int> Year
    {
        get { return _year; }
        set
        {
            if (_year == value) return;
            _year = value;
            NotifyPropertyChanged("Year");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T19:34:36.637

成立！

我在 WinRT 上遇到了完全相同的问题并找到了解决方法：需要删除“MaxDropDownHeight”属性。一旦分配了此属性，无论值如何，都会在触摸设备上导致此问题。

尝试在您的代码中也将其删除:-)。

# wordpress - WordPress 将搜索限制为自定义帖子类型

> ID：12542039
> 
> 赞同：2
> 
> 时间：2012-09-22T08:10:20.020
> 
> 标签：wordpress, search

**我试图将我的 WordPress 搜索限制为单一的自定义帖子类型。**

似乎我可以更改搜索查询的大多数参数，除了帖子类型变量。

```
$query_args = explode("&", $query_string);
$search_query = array();

foreach($query_args as $key => $string) {
    $query_split = explode("=", $string);
    $search_query[$query_split[0]] = urldecode($query_split[1]);
}

$search_query['post_type'] = 'thread';

$search = new WP_Query($search_query); 
```

此查询仍将返回所有帖子类型。但是如果我设置一个不同的参数，比如“posts_per_page”，它就可以正常工作。

这是怎么回事？如何将我的搜索查询限制为自定义帖子类型？

谢谢你的帮助！

**编辑：顺便说一句，我正在使用 WP 3.4.2**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:26:45.940

把它放在你的`functions.php`文件中。:)

```
<?php
add_filter('pre_get_posts', 'filter_search_cpt_threads');
/** filter search for threads CPT */
function filter_search_cpt_threads($query)
{
    if( $query->is_search ) $query->set('post_type', array('thread'));

    return $query;
}
?> 
```

最好的！
**R**

# statistics - 如何进行分类

> ID：12542042
> 
> 赞同：1
> 
> 时间：2012-09-22T08:11:08.693
> 
> 标签：statistics, machine-learning, classification, weka, document-classification

我正在尝试使用 Weka 将文档分类为两个类别（类别 1 和类别 2）。

我收集了一个训练集，其中包含属于这两个类别的 600 个文档，要分类的文档总数为 1,000,000。

因此，为了执行分类，我应用了 StringToWordVector 过滤器。我从过滤器中将以下内容设置为真： - IDF 变换 - TF 变形 - OutputWordCounts

我想问一些关于这个过程的问题。

1）我应该使用多少个文​​档作为训练集，以避免过度拟合？

2）应用过滤器后，我得到了训练集中的单词列表。我是否必须删除它们中的任何一个才能在分类器中获得更好的结果，或者它不起作用？

3）作为分类方法，我通常选择naiveBayes，但我得到的结果如下：

```
-------------------------
Correctly Classified Instances         393               70.0535 %
Incorrectly Classified Instances       168               29.9465 %
Kappa statistic                          0.415 
Mean absolute error                      0.2943
Root mean squared error                  0.5117
Relative absolute error                 60.9082 %
Root relative squared error            104.1148 %
---------------------------- 
```

如果我使用 SMO，结果是：

```
------------------------------
Correctly Classified Instances         418               74.5098 %
Incorrectly Classified Instances       143               25.4902 %
Kappa statistic                          0.4742
Mean absolute error                      0.2549
Root mean squared error                  0.5049
Relative absolute error                 52.7508 %
Root relative squared error            102.7203 %
Total Number of Instances              561     
------------------------------ 
```

那么在文档分类中，哪一个是“更好”的分类器？哪一个更适合小型数据集，比如我拥有的那个？我读过 naiveBayes 在大数据集上表现更好，但如果我增加我的数据集，会导致“过度拟合”效应吗？另外，关于 Kappa 统计，是否有任何可接受的阈值，或者在这种情况下并不重要，因为只有两个类别？

很抱歉这篇长文，但我已经尝试了一周来改进分类结果，但没有成功，尽管我试图获得更适合每个类别的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:55:02.973

> 1）我应该使用多少个文​​档作为训练集，以避免过度拟合？\

您不需要选择训练集的大小，在 WEKA 中，您只需使用 10 倍交叉验证即可。回到问题，机器学习算法对过拟合问题的影响远不止数据集。

* * *

> 2）应用过滤器后，我得到了训练集中的单词列表。我是否必须删除它们中的任何一个才能在分类器中获得更好的结果，或者它不起作用？\

确实如此。但不能保证结果是否会好转。

* * *

> 3）作为分类方法我通常选择naiveBayes，但我得到的结果如下：\

通常，为了定义一个分类算法的好坏，ROC/AUC/F-measure值总是被认为是最重要的指标。您可以在任何机器学习书籍中学习它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:39:09.020

要回答您的问题：

1.  我会使用（10 倍）交叉验证来评估您的方法。该模型在 90% 的数据上训练了 10 次，并且每次使用数据的不同部分对 10% 的数据进行测试。因此，结果对您当前（随机）选择的训练和测试集的偏差较小。
2.  删除*停用词*（即，频繁出现的词，具有很少的区分值，如`the`,`he`或`and`）是改进分类器的常用策略。Weka's`StringToWordVector`允许您选择包含这些停用词的文件，但它还应该有一个包含英文停用词的默认列表。
3.  鉴于您的结果，SMO 执行两个分类器中最好的（例如，它有更多`Correctly Classified Instances`）。您可能还想看看 (Lib)SVM 或 LibLinear（如果它们本身不在 Weka 中，您可能需要安装它们；Weka 3.7.6 有一个包管理器，可以轻松安装），它可以在文档分类也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:30:52.537

关于第二个问题 2）应用过滤器后，我得到了训练集中的单词列表。我是否必须删除它们中的任何一个才能在分类器中获得更好的结果，或者它不起作用？

我正在构建一个分类器并使用著名的 20news 组数据集对其进行训练，在没有预处理的情况下对其进行测试时，结果并不好。因此，我根据以下步骤对数据进行了预处理：

1.  用空格替换 TAB、NEWLINE 和 RETURN 字符。
2.  只保留字母（即将标点、数字等变成空格）。
3.  将所有字母转为小写。
4.  用一个空格代替多个空格。
5.  每个文档的标题/主题只是简单地添加在文档文本的开头。
6.  no-short 从上一个文件中获得，通过删除长度小于 3 个字符的单词。例如，删除“他”但保留“他”。
7.  no-stop 从上一个文件中获得，通过删除 524 个 SMART 停用词。其中一些已经被删除，因为它们少于 3 个字符。
8.  通过将 Porter's Stemmer 应用于剩余的单词，从上一个文件中获得。可以在此处找到有关词干提取的信息。

这些步骤取自[http://web.ist.utl.pt/~acardoso/datasets/](http://web.ist.utl.pt/~acardoso/datasets/)

# json - 如何解析在元素属性值中包含特殊字符的xml。如何用空格替换该特殊字符并在java中解析它

> ID：12542053
> 
> 赞同：0
> 
> 时间：2012-09-22T08:12:20.547
> 
> 标签：json, xmlhttprequest, xml-serialization

我正在尝试使用 DOM 或 SAX 解析 java 中的 xml 文件。问题是在解析时，如果我的 xml 包含属性值作为特殊字符，例如 < >"，那么解析器会抛出 ParserException。

例如 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<abc>
<check name="bike" value="apache <nice model"/> 
<check name="car" value="tata sumo "style" />
</abc> 
```

在此示例中，xml 元素检查具有属性值，并且包含 < 或 " 。解析器将其视为无效并引发解析器异常。

现在我的问题是，在将 xml 文件解析为解析器之前，检测 xml 文件属性值中的特殊字符（< 或 > 或 "），并且必须用空格替换该符号（< > "）。

例如：如果 xml 包含 <

```
<check name="bike" value="apache <nice model"/> 
```

替换为空格

```
<check name="bike" value="apache  nice model"/> 
```

.请给我建议。用什么方法可以完成...我们可以使用 XSD 来完成...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:35:25.380

用实体替换这些符号怎么样？

```
&apos; is an apostrophe: '
&amp; is an ampersand: &
&quot; is a quotation mark: "
&lt; is a less-than symbol: <
&gt; is a greater-than symbol: > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:37:21.003

有人可能会争论它是否真的是 xml。一条规则是 xml 必须格式正确。这意味着标签必须有开始和结束，在所有地方都不允许使用某些字符（特别是属性中的 <>）。

如果您不能从源头纠正这个问题，即生成格式良好的 xml，那么我想您需要先按照@Visher 的建议进行简单的搜索和替换，然后将其视为 xml 或提出自己的解析器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:45:12.797

此代码运行良好（替换引号中的 '<' 和 '>'）：

```
public static void main(String[] args)
{
    char[] characters = new char[]{'<', '>'};
    String[] entities = new String[]{"&lt;", "&gt;"};

    String text = "<check name=\"bike\" value=\"apache <nice model\"/> ";
    StringBuilder sb = new StringBuilder();
    boolean insideQuotation = false;

    for (int i = 0; i < text.length(); i++)
    {
        char character = text.charAt(i);

        if (insideQuotation)
        {
            int index = -1;

            for (int x = 0; x < characters.length; x++)
            {
                if (characters[x] == character)
                {
                    index = x;
                    break;
                }
            }

            if (index != -1)
                sb.append(entities[index]);

            else
                sb.append(character);

            if (character == '"')
                insideQuotation = false; 
        }
        else
        {
            if (character == '"')
                insideQuotation = true;

            sb.append(character);
        }
    }

    System.out.println(sb.toString());
} 
```

如果您在引号内添加另一个引号，则会出现问题。

# javascript - 在 express.js 上使用 ejs (ejs-locals) 插入带有数据的脚本标签

> ID：12542056
> 
> 赞同：0
> 
> 时间：2012-09-22T08:12:41.583
> 
> 标签：javascript, node.js, express, ejs

我将 ejs-locals 用于 express 3.x (https://github.com/RandomEtc/ejs-locals)

如何从包含动态数据的模板中插入脚本标签？

在我的 layout.ejs 我有

```
<%- block.scripts %> 
```

在我的页面模板 login.ejs 中，我想用一些动态数据替换它：

```
<% block('scripts', "<script> var app = window.app || {}; app.err = <%- JSON.stringify(err) %>, app.q = <%- JSON.stringify(q) %>; </script>") -%> 
```

我收到一个错误：

`500 SyntaxError: Unexpected token %`- 我假设是因为我不能在`<%= JSON.stringigy(err) %>`这里做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:09:59.670

我通过将脚本插入移动到 layout.ejs 解决了这个问题，因为它总是一样的。

```
 <% include script %>
  </body> 
```

否则，您必须终止字符串：

```
//this works but is rather cumbersome to do on every page template.
  <% block('script', '<script>' +
    'app.req.err = '+ JSON.stringify(err) +";\n" +
    'app.req.q = '+ JSON.stringify(q) +";\n" +
  '</script>') %> 
```

# php - REGEX 匹配整数 6 到 10

> ID：12542060
> 
> 赞同：9
> 
> 时间：2012-09-22T08:13:01.373
> 
> 标签：php, mysql, sql, regex

我想找到 6 到 10 之间的任何整数。我试过了：

```
[6-10]{1,2} 
```

但这会引发 mysql 错误（这是用于 mysql 查询）。你如何匹配 6 到 10 之间的数字？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-22T08:14:25.213

为什么要使您的语法复杂化？不能这么简单吗？使用`BETWEEN`,

```
SELECT...
FROM..
WHERE columnName BETWEEN 6 AND 10 
```

但无论如何如果你有其他用途，你可以`REGEXP`在 MySQL中使用

```
where columName REGEXP '10|[6-9]' 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/8f6fe/3)

# c# - 处理 NUnit 中的任何错误

> ID：12542073
> 
> 赞同：1
> 
> 时间：2012-09-22T08:15:01.517
> 
> 标签：c#, .net, unit-testing, junit, nunit

我有一个标准的 NUnit 单元测试。

```
 [TestFixture]
    public class MyTest
    {
        [SetUp]
        public virtual void Setup()
        {   
        }

        [TearDown]
        public void CleanUp()
        {
        }

        [Test]
        public void Test01()
        {
            Assert.AreEqual(10, 10);
        }

        [Test]
        public void Test02()
        {
            Assert.AreEqual(4, 1);
        }

        [Test]
        public void Test03()
        {
            Assert.AreEqual(1, 51);
        }

        //......a huge amount of Tests
        [Test]
        public void TestN()
        {
            Assert.AreEqual(1, 1);
        }
 } 
```

如您所见，这里有很多测试。我需要做的是处理每个测试中的任何错误，并在**不**修改测试方法主体的情况下获取有关错误的信息。

因此，`JUnit`有一个调用的接口`TestListener`允许处理任何测试错误，查看错误消息，查看测试名称等。

我没有找到类似的东西`NUnit`。它存在吗？或者有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T08:26:15.937

听起来您可能想要[EventListeners](http://nunit.org/index.php?p=eventListeners&r=2.6.1)：

> EventListener 能够响应测试运行过程中发生的事件，通常是通过记录某种信息。请注意，EventListener 在测试执行方面是异步调用的，并且无法影响测试的实际执行。

听起来您会对这种方法感兴趣：

```
void TestFinished(TestResult result); 
```

（顺便说一句，这对我来说似乎很奇怪，它不使用普通的 .NET 事件*或*在抽象类中提供无操作接口实现，但我们开始了......）

# actionscript-3 - 如何比较向量内对象的属性？

> ID：12542075
> 
> 赞同：1
> 
> 时间：2012-09-22T08:15:48.540
> 
> 标签：actionscript-3, vector, comparison

我有几个显示对象在屏幕上移动，它们都属于同一个`Vector`. 我想创建一个函数，让我在调用函数时选择一个具有最低`x`值的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:32:18.903

这很容易，如果你喜欢编程，你应该可以自己做，但如果你是初学者，我会给你一些代码：

```
var vec:Vector.<DisplayObject> = new Vector.<DisplayObject>();

function getLowestXObject():DisplayObject 
{
    var minX:DisplayObject = vec[0];

    for(var i:int = 1; i < vec.length; i++) 
    {
        if(minX.x > vec[i].x)
        {
            minX = vec[i];
        }
    }
    return minX;
} 
```

# linux - 提交后忽略 Git 中的文件

> ID：12542077
> 
> 赞同：4
> 
> 时间：2012-09-22T08:16:14.263
> 
> 标签：linux, git

我最近切换到 git。

在我使用 git 后的上一次和第一次提交中，我注意到它还在提交期间列出了 pyc 文件。我没有考虑任何事情，并承诺并推动他们。

现在我意识到它们在开发过程中不断更新，在列表中看到它们非常烦人。它只会产生太多噪音。

我做了一些研究，并`echo "*.pyc" >> .gitignore`在项目目录中做了。

这并没有帮助，因为 pyc 文件仍在显示中。难道是因为我之前已经提交了那些 pyc 文件，我不能再忽略它们了？（因为他们现在被跟踪并且状态再次改变）如果是这样我永远被诅咒还是仍然希望从存储库中删除事后的文件？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T08:21:03.633

只是文件`git rm`，`.pyc`并确保您`.gitignore`从现在开始设置为忽略它们。您是正确的，git 不会忽略已提交的文件，因为它们已经被添加。如果您不想删除磁盘，请使用`git rm --cached`删除文件。这只是从索引中删除它们而不从磁盘中删除。

# c++ - QGraphicsView不显示图像

> ID：12542079
> 
> 赞同：1
> 
> 时间：2012-09-22T08:16:32.977
> 
> 标签：c++, qt

我在 UI 中有一个 graphicsView，我使用此代码从资源中设置图像但不起作用：

- 在头文件中：

```
QGraphicsScene *scene; 
```

- 在 cpp 文件中：

```
scene = new QGraphicsScene();
scene->addPixmap(QPixmap(":/images/alert.png"));
ui->graphicsView->setScene(scene); 
```

代码有什么问题？

# c++ - 如何更改在不同线程中打开的表单的标签文本？

> ID：12542084
> 
> 赞同：4
> 
> 时间：2012-09-22T08:17:15.787
> 
> 标签：c++, winforms, multithreading, visual-c++, c++-cli

由于一些 GUI 滞后（表单变得无响应）问题，我已经在新线程中启动了一个表单。该线程在调用函数 (some_function()) 时启动。如...

```
/*========some_function=========*/
     void some_function()
     {
          System::Threading::Thread^ t1;
          System::Threading::ThreadStart^ ts = gcnew System::Threading::ThreadStart(&ThreadProc);
          t1 = gcnew System::Threading::Thread(ts);
          t1->Start();
          while(condition)
          {
               Form1^ f1=gcnew Form1();
              //some coding
              //to change the values of a different form (Form1)
          }
     }

/*======ThreadProc=========*/
    void ThreadProc()
    {
         Form1^ f1=gcnew Form1();
         f1->Show(); //OR Application::Run(Form1());
    } 
```

现在的问题是关于在“while”循环中更改表单（Form1）的值，例如标签文本、进度条等。是否有任何方法可以更改在不同线程中打开的表单值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:42:43.457

检查[Control::Invoke](http://msdn.microsoft.com/en-us/library/30s4t80c.aspx)以将方法扔到安全线程中以更改控件。要显示示例的形式：

```
public delegate void SwapControlVisibleDelegate(Control^ target);

public ref class Form1 : public System::Windows::Forms::Form
{
  /*Ctor and InitializeComponents for Form1*/
  /*...*/

  protected : 
    virtual void OnShown(EventArgs^ e) override
    {
        __super::OnShown(e);
        some_function();
    }

    void some_function()
    {
        System::Threading::Thread^ t1;
        System::Threading::ThreadStart^ ts = gcnew ystem::Threading::ThreadStart(this, &Form1::ThreadProc);
        t1 = gcnew System::Threading::Thread(ts);
        t1->Start();

    }

    void ThreadProc()
    {
        Threading::Thread::Sleep(2000);
        for each(Control^ c in this->Controls)
        {
            SwapVisible(c);
        }
    }

    void SwapVisible(Control^ c)
    {
        if(c->InvokeRequired) // If this is not a safe thread...
        {
            c->Invoke(gcnew SwapControlVisibleDelegate(this, &Form1::SwapVisible), (Object^)c);
        }else{
            c->Visible ^= true;
        }
    }
} 
```

这是如何将方法控件调用到安全线程中以进行更改。现在我已经阅读了你对这个问题的评论。看一下[BackgroundWorker 组件](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，它非常适合运行具有取消支持的异步任务，并且它还实现了接收有关任务进度和结束的通知的事件。

# css - 使 div 内的所有内容都固定大小

> ID：12542085
> 
> 赞同：1
> 
> 时间：2012-09-22T08:17:31.213
> 
> 标签：css

如何调整 div 标签内所有内容的大小，使其最大尺寸为 nwidth 和 height

我的 div 是：

```
<div style="width: 300px; height:60px">dynamique content </div> 
```

但是，如果我有图片，图像，如果它大于 div，则图像不会调整为 div，而是 div 越来越大。

我怎样才能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T08:19:27.017

使用 CSS，您可以：

```
div * {
    max-width: 300px;
} 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/aEJuq/](http://jsfiddle.net/aEJuq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T08:21:58.607

您可以通过以下方法做到这一点

```
id or class or name {
    max-width: 300px;
    max-height: 60px;
} 
```

您可以通过 id 或 key 或内联 css 或在 html img 标签中设置`max-height`和in picture 来为图像执行此操作`max-width``<img src="image your" width="your width" height="your height">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T08:23:08.170

使用最大宽度和最大高度

```
 #blockUI img {
    max-width: 100%;
    max-height: 100%;
} 
```

# sql-server-2008 - 如何关闭 SQL Server 2008 事务？

> ID：12542089
> 
> 赞同：0
> 
> 时间：2012-09-22T08:18:15.553
> 
> 标签：sql-server-2008, transactions

我已连接到 SQL Server 2008 中的数据库，并使用数据库上的新查询窗口，我运行

```
DBCC OPENTRAN 
```

它显示

```
Replicated Transaction Information:
        Oldest distributed LSN     : (0:0:0)
        Oldest non-distributed LSN : (93627:242:1)
DBCC execution completed. If DBCC printed error messages, contact your system administrator. 
```

即使我关闭查询并在几个小时后运行相同的`DBCC OPENTRAN`命令，结果也是一样的。

我假设我有一个未提交的事务。我对么？如果是这样，因为我是这台机器的管理员，我该如何关闭/提交这个交易？

日志大小为 3-4GB，每天增长近 200MB 或更多。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:04:40.043

这可以通过以下方式解决：

```
Execute SP_ReplicationDbOption Blog2012,Publish,true,1
GO
Execute sp_repldone @xactid = NULL, @xact_segno = NULL, @numtrans = 0, @time = 0, @reset = 1
GO
DBCC ShrinkFile(Blog_Log,0)
GO
Execute SP_ReplicationDbOption Blog2012,Publish,false,1
GO 
```

其中 Blog2012 是数据库名称，Blog_Log 是日志名称。

# windows - 如何在 Windows 中为 Apache Tomcat 配置 xuggle

> ID：12542100
> 
> 赞同：1
> 
> 时间：2012-09-22T08:20:25.910
> 
> 标签：windows, tomcat, xuggler

我一直在使用 Netbeans 和 Windows 平台上的 Tomcat 开发视频共享 Web 应用程序（如 youtube）。在那里，我想在视频上传后立即生成视频文件的缩略图。所以在网上搜索我发现了一个叫做 Xuggle 的东西。我在 Tomcat 的 lib 文件夹中安装了 Xuggler。我已经设置了必要的环境变量。当我只运行一个 java 应用程序时，我得到了结果，但是当我对 Java web 应用程序执行同样的操作时，我得到以下错误：

```
 HTTP Status 500 -

    type Exception report

    message

    description The server encountered an internal error () that prevented it from         

    fulfilling this request.

    exception

    javax.servlet.ServletException: Servlet execution threw an exception

 org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    root cause

 java.lang.UnsatisfiedLinkError: com.xuggle.xuggler.XugglerJNI.Global_NO_PTS_get()J
com.xuggle.xuggler.XugglerJNI.Global_NO_PTS_get(Native Method)
com.xuggle.xuggler.Global.<clinit>(Global.java:240)
xugglerPack.Main.<clinit>(Main.java:43)
xugglerPack.VT.processRequest(VT.java:86)
xugglerPack.VT.doPost(VT.java:137)
javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:3
  93)
   note The full stack trace of the root cause is available in the Apache Tomcat/6.0.26   
 logs. 
```

==================================================== ==========================================

@pd40 >>> 我重新安装了 Xuggler（这次是在 C:\Program Files 中，安装后我重新启动了我的电脑。我在环境变量中设置了以下内容：

**XUGGLE_HOME** = C:\Program Files (x86)\Xuggle

**CLASSPATH** = .;C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\lib\commons-cli.jar;C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\lib\logback-classic.jar; C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\lib\logback-core.jar;C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\lib\slf4j-api.jar;C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\lib\xuggle-xuggler.jar;C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\lib\xuggle-xuggler-test.jar;

**PATH** = C:\Program Files (x86)\Xuggle\bin;C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\bin;C:\Apache Tomcat 6.0.26\Apache Tomcat 6.0.26\lib;C :\Program 文件 (x86)\Xuggle\lib

我已经在 Tomcat's\lib 文件夹中复制了 Xuggle/java/jars 的 jars（6 个 jar 文件）并设置了它们的 CLASSPATH。

现在，当我在 Web 应用程序中执行此操作时，我仍然会遇到问题，但是独立的 Java 应用程序可以很好地生成图像。怎么了？？？当我上传视频时，它会上传但未生成缩略图，我收到以下错误...

```
 HTTP Status 500 -

  type Exception report

  message

  description The server encountered an internal error () that prevented it from     
  fulfilling this request.

  exception

  javax.servlet.ServletException: Servlet execution threw an exception
  root cause

  java.lang.NoClassDefFoundError: Could not initialize class com.xuggle.ferry.FerryJNI
  com.xuggle.ferry.RefCounted.acquire(RefCounted.java:179)
  com.xuggle.xuggler.IContainer.copyReference(IContainer.java:80)
  com.xuggle.mediatool.AMediaCoderMixin.<init>(AMediaCoderMixin.java:68)
  com.xuggle.mediatool.MediaReader.<init>(MediaReader.java:137)
  com.xuggle.mediatool.ToolFactory.makeReader(ToolFactory.java:77)
  xugglerPack.Main.main(Main.java:51)
  xugglerPack.VT.processRequest(VT.java:87)
  xugglerPack.VT.doPost(VT.java:135)
  javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
  javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
  note The full stack trace of the root cause is available in the Apache Tomcat/6.0.26    
  logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:38:56.033

确保将 Xuggler lib 放在 Windows **PATH**或**LD_LIBRARY_PATH**中。

类似于[Tomcat 本机](http://tomcat.apache.org/native-doc/)。我假设你已经尝试过了。

您可能还想查看[此线程](https://groups.google.com/forum/?hl=pl&fromgroups=#!topic/xuggler-users/Ex5hxTbbpuo)

# php - Redbean，使用同一对象的多个多对多

> ID：12542102
> 
> 赞同：5
> 
> 时间：2012-09-22T08:20:40.137
> 
> 标签：php, orm, redbean

多对多映射在redbean中很容易使用，场景简单。但是如何在同一个对象之间进行多个多对多映射呢？

例子：

我想要完成的结构与“关注者”和“关注者”的 twitter/instagram 设置非常相似

```
// this c

$user = R::dispense('user');
$user2 = R::dispense('user');

// ..

//Usr1 follows user2
$user->sharedUser[] = $user2;

// user2 follows user1
$user2->sharedUser[] = $user1; 
```

现在，我想从 user1 的角度列出关注者和以下用户。

但是，如果不查询数据库中的所有用户并查找 user1，我就无法列出“关注者”。有没有办法在redbean中拥有多个“共享”列表或这些特殊情况的任何好的解决方法，或者查询方式是要走的路？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:43:20.403

这是我与测试一起使用的代码，以证明它有效:)

```
<?php
include_once 'rb.php';
R::setup();

//create users
$users = array();
foreach (array('arul', 'jeff', 'mugunth', 'vish') as $name) {
    $user = R::dispense('user');
    $user->name = $name;
    $user->follows = R::dispense('follows');
    //create variables with specified names ($arul, $jeff, etc)
    $$name = $user;
    $users[] = $user;
}

//set relationships
$arul->follows->sharedUser = array($jeff);
$mugunth->follows->sharedUser = array($jeff, $arul);
$vish->follows->sharedUser = array($arul, $mugunth);

R::storeAll($users);

//print relationships
$id = 1;
while (true) {
    echo "-----------------------------------\n";
    $u = R::load('user', $id++);
    if (!$u->id) break;
    echo "$u->name follows " . count($u->follows->sharedUser) . " user(s) \n";
    if ($u->follows) {
        foreach ($u->follows->sharedUser as $f) {
            echo "    - $f->name \n";
        }
    }
    echo "\n$u->name is followed by "
        . R::getCell("SELECT COUNT(*) FROM follows_user WHERE user_id = $u->id")
        . " user(s) \n";
    foreach ($u->sharedFollows as $f) {
        $follower = array_shift($f->ownUser);
        echo "    - $follower->name \n";
    }
}

/* echos the following
-----------------------------------
jeff follows 0 user(s)

jeff is followed by 2 user(s)
    - arul
    - mugunth
-----------------------------------
arul follows 1 user(s)
    - jeff

arul is followed by 2 user(s)
    - mugunth
    - vish
-----------------------------------
mugunth follows 2 user(s)
    - jeff
    - arul

mugunth is followed by 1 user(s)
    - vish
-----------------------------------
vish follows 2 user(s)
    - arul
    - mugunth

vish is followed by 0 user(s)
-----------------------------------
*/ 
```

# python - 在python中分离类定义和实现

> ID：12542111
> 
> 赞同：7
> 
> 时间：2012-09-22T08:22:44.580
> 
> 标签：python

我是 Python 初学者，我的主要语言是 C++。您知道在 C++ 中，将类的定义和实现分开是很常见的。（如何）Python 会这样做吗？如果没有，我如何获得一个类接口的干净配置文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T08:27:53.473

Python中没有这样的概念。如果我正确理解了您的需求，则应通过适当的类文档生成“干净的配置文件”。

您还可以使用 Python 的自省功能以[编程方式访问类的所有方法](https://stackoverflow.com/questions/1911281/how-do-you-get-list-of-methods-in-a-python-class)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:41:03.690

Python 编程在许多方面与 c++ 不同。如果您想知道如何在 python 中编写高质量、专业级别的代码，那么[这](http://www.ibm.com/developerworks/aix/library/au-cleancode/index.html)是一篇很好的文章。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T10:37:37.023

    出于某种原因，许多 Python 程序员将类及其实现组合在同一个文件中。我喜欢将它们分开，除非绝对有必要这样做。
    这很容易。只需创建实现文件，导入定义类的模块，直接调用即可。
    因此，如果类 - **ShowMeTheMoney** - 在**class1_file.py**中定义，并且文件结构为：

```
  /project
    /classes
           /__init__.py
           /class1_file.py
           /class2_file.py
    /class1_imp_.py 

```

（顺便说一句，**文件**名和**类**名必须不同；如果**类**名和**文件**名相同，程序将失败。）
    您可以在**class1_imp_.py**中使用：

```
 # class1_imp_.py
   import classes.class1_file as any_name

   class1_obj = any_name.ShowMeTheMoney()
   #continue the remaining processes 

```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-02T22:42:31.563

您可能想要实现一种可以与您的实现分开导入的“接口”。在 python 中，这称为[抽象基类，通过内置 abc 模块提供](https://docs.python.org/3/library/abc.html)

```
# mymodule/types.py
# --------------------------------------------

import abc

class AbstractSomeClass(abc.ABC):
  some_property: str

  @abc.abstractmethod
  def somemethod(self, some_param: str) -> int:
    raise NotImplementedError

# mymodule/someclass.py
# --------------------------------------------

from mymodule.types import AbstractSomeClass

class SomeClass(AbstractSomeClass):
  def __init__(self):
    self.some_property = "some val"

  def somemethod(self, some_param: str) -> int:
    return 5

# mymodule/file_causing_circular_import.py
# --------------------------------------------
# Refactored to use the ABC instead of the implementation

from mymodule.types import AbstractSomeClass

def mymethod(instance: AbstractSomeClass):
  instance.somemethod("some param")
` 
```

# vb.net - 如何在 vb.net windows 应用程序中创建自动建议文本框？

> ID：12542116
> 
> 赞同：0
> 
> 时间：2012-09-22T08:23:17.620
> 
> 标签：vb.net

我想在 vb.net windows 窗体中创建一个自动建议文本框，下拉列表中的数据应该来自 sql 数据库表中的特定列。

谁能建议如何实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:27:03.240

它被称为`AutoComplete`。下面是一个例子，`ComboBox`但`TextBox`也有相同的属性名称。

![在此处输入图像描述](../Images/f0dbff58dee13947f01ae2df01f7fc51.png)

![在此处输入图像描述](../Images/a30c636ffe32b77b139e76438a503913.png)

![在此处输入图像描述](../Images/657827aa389bebdcf6441c015b1b3f97.png)

**[有关此链接的更多信息（完整详细信息）](http://www.vbdotnetheaven.com/uploadfile/mahesh/auto-complete-textbox-in-vb-net/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T12:06:24.007

```
Dim months As New AutoCompleteStringCollection
data.Add("January");
data.Add("February");
data.Add("March");
data.Add("April");
data.Add("May");
data.Add("June");
data.Add("July");
data.Add("August");
data.Add("Septeber");
data.Add("October");
data.Add("November");
data.Add("Decmber")

'Then Set ComboBox AutoComplete properties
ComboBox1.AutoCompleteMode = AutoCompleteMode.Suggest
ComboBox1.AutoCompleteSource = AutoCompleteSource.CustomSource
ComboBox1.AutoCompleteCustomSource = months 
```

# cookies - 当我的网站打开时从浏览器中删除 cookie

> ID：12542118
> 
> 赞同：0
> 
> 时间：2012-09-22T08:23:45.927
> 
> 标签：cookies, browser

嗨，我希望 JavaScript 代码在我的网站打开时从浏览器中删除 cookie。

问题：我要注册我的网站，如果注册不成功，下次我打开我的网站时，它会自动转到注册页面，如果我删除浏览器上的所有 cookie，它将转到我的网站首页..

任何人都可以帮助解决这个问题...

谢谢……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:19:25.483

[如何使用 JavaScript 删除所有 cookie？](https://stackoverflow.com/questions/595228/how-can-i-delete-all-cookies-with-javascript)

```
var cookies = document.cookie.split(";");
for (var i = 0; i < cookies.length; i++)
eraseCookie(cookies[i].split("=")[0]); 
```

# qt - QML ButtonRow checkedButton 没有响应

> ID：12542119
> 
> 赞同：2
> 
> 时间：2012-09-22T08:23:47.607
> 
> 标签：qt, button, row, qml, qt-quick

当我这样称呼时：

```
buttonrow1.checkedButton = _button1 
```

然后我没有收到任何错误，也没有任何反应，我也不能使用状态更改属性，无论我做什么，它都保持默认设置。知道如何更改此值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:18:00.227

buttonrow 不是内置类型。因此，请添加您的定义并告诉我们您需要做什么：

```
buttonrow1.checkedButton = _button1 
```

# windows-phone-7 - 是否可以在 sqlite 中使用 sqlmetal

> ID：12542121
> 
> 赞同：2
> 
> 时间：2012-09-22T08:23:56.047
> 
> 标签：windows-phone-7

你好朋友我想使用sqlite在windows phone中开发数据库应用程序。我只想知道**sqlmetal**是否可以在**wp7**中使用，也想知道它是否支持**.net v4.0**或任何替代解决方案。当我用谷歌搜索时，我发现在**sqlite中使用****了 dblinq**。请为此提供一些样本。

# gdb - 加载断点文件错误

> ID：12542126
> 
> 赞同：7
> 
> 时间：2012-09-22T08:25:02.990
> 
> 标签：gdb, breakpoints

我以前使用保存过的断点列表

```
save breakpoints blist 
```

现在在编译程序后，当我尝试使用 load 命令重新加载相同的断点时

```
load blist 
```

我收到这个错误

```
You can't do that when your target is `exec' 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-23T03:04:52.100

> load blist

Try `source blist` instead.

From `"help save breakpoints"`:

```
Save current breakpoint definitions as a script. 
```

The way to read a script is the `source` command. The `load` command means something different entirely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T10:09:13.597

我将断点保存到文件中，例如**gdb.br**，文件内容如下所示：

```
br /project/src/file.c : 100
commands
silent
printf "\nbacktrace:\n"
bt
cont
end 
```

这个中断只是输出回溯并继续执行。你也可以使用简单的休息，比如：

```
br /project/src/file.c : 100
br className::methodName 
```

我有很多休息时间 - gdb 无法通过复制过去添加它们。我也不能在我的多线程系统上使用*load命令。*要附加 gdb 并加载断点，我使用以下序列：

```
gdb -p 1523 -x gdb.br 
```

其中**1523**是您要附加到的进程 pid。**-x**主要用于加载命令、设置环境，但也可用于加载中断。希望这会有所帮助。

# overriding - Prestashop 1.5 覆盖 FrontController

> ID：12542127
> 
> 赞同：0
> 
> 时间：2012-09-22T08:25:07.987
> 
> 标签：overriding, prestashop, front-controller

我正在尝试为/classes/controller/FrontController.php 创建一个覆盖。出于测试目的，我得到了这样写的原始方法：

```
protected function canonicalRedirection($canonical_url = '')
{
    die('Original method');
    ... 
```

并且测试类/override/classes/controller/FrontController.php是这样写的

```
class FrontController extends FrontControllerCore
{
    protected function canonicalRedirection($canonical_url = '')
    {
        die('Overriden method');
    }

} 
```

但它总是输出**原始方法**

有什么我做错了吗？顺便说一句，这适用于不同的域，但不适用于我希望它工作的域，因此可能会发生更复杂的事情。

谢谢你的踢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:43:37.687

不应该覆盖`/override/classes/FrontController.php`- 虽然没有查看任何晚于 1.5.0.3 的版本，所以他们可能已经移动了一些东西......再次。

这很令人困惑，但`FrontController`该类不是控制器；这是一个基类。

编辑：嗯....我刚刚看了看 1.5.0.17，他们确实已经移动了它。对我来说看起来像一个错误:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:44:58.327

为了覆盖`FrontController`，您需要添加新文件`override/classes/FrontController.php`

# javascript - 正则表达式匹配 '\n' 使用环视

> ID：12542132
> 
> 赞同：2
> 
> 时间：2012-09-22T08:26:06.850
> 
> 标签：javascript, regex

我在 javascript 中有一个多行匹配的情况

*   只匹配'\n'，不消耗其他字符
*   '\n' 不在行首（空行）
*   '\n' 后面不跟 '#'

似乎应该是这样的，`/(?<=.+)\n(?!#)/m`
但 javascript 不支持后向，我该如何编写这个正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:38:46.557

你不能。一个典型的后视技巧是暂时反转字符串并对其采取行动，但这也仅在没有前瞻时才有效。请参阅[http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)了解其他一些可能性，包括支持后向和前瞻（但不表示为单个正则表达式）的可能性 - 请参阅“使用 while 循环模仿后视”部分和 regexp.lastIndex”。

# android - 片段未显示

> ID：12542133
> 
> 赞同：0
> 
> 时间：2012-09-22T08:26:10.157
> 
> 标签：android

我正在尝试制作一个简单的片段示例，其中一个片段将显示文章列表，另一个片段将显示详细文章。这是我的主要活动课-

```
public class ArticleFragment extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        }       
}// end class 
```

这是主要的布局文件-

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment android:name="com.example.ArticleList"
            android:id="@+id/list"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="match_parent" />

    <fragment android:name="com.example.ArticleDetails"
            android:id="@+id/viewer"
            android:layout_weight="2"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
</LinearLayout> 
```

这是我的 ArticleList 和 ArticleDetails 的两个片段类

```
public class ArticleList extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.articlelist, container, false);
        }

public class ArticleDetails extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.articledetails, container, false);
    }
    } 
```

我还有两个用于 articleList、ArticleDetails 片段的 XML 布局文件（包含一个 textview）。但该应用程序已停止工作。我在这里错过了什么？请帮助谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:17:51.940

在代码中检查您的包名称

```
<fragment android:name="com.abc.def............./> 
```

.谢谢你，我知道我们可以做到。

# c++ - linux标准输出管道问题

> ID：12542134
> 
> 赞同：1
> 
> 时间：2012-09-22T08:26:12.147
> 
> 标签：c++, linux, perl, pipe

我有一个服务器程序只是将输出日志写入 STDOUT。我还有另一个名为“logfile”的 Perl shell 脚本，它将从 STDIN 获取数据并显示一些输出。

```
linux$ server |  logfile 
```

起初日志文件有输出，但过了一会儿它停止了..有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T08:29:21.453

`server`可能会缓冲其输出，将其分块送入管道。是`server`Perl 脚本吗？添加

```
$| = 1; 
```

或者

```
use Handle qw( );
STDOUT->autoflush(1); 
```

以禁用 STDOUT 的缓冲。（好吧，第一个将禁用您`select`编辑的任何句柄的缓冲，但默认情况下是 STDOUT。）

# c# - DateTime 格式仅获取小时数

> ID：12542142
> 
> 赞同：0
> 
> 时间：2012-09-22T08:27:28.573
> 
> 标签：c#, asp.net

如何仅在 DateTime 中获取时间？

例子

2012 年 1 月 27 日下午 4:00

我只想显示 04:00PM 有没有办法做到这一点？:)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:28:59.963

当然 - 只需指定一个仅包含您想要的信息的[自定义格式字符串。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)例如，我相信“hh:mmtt”会在这里做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:30:13.987

使用带有选项的 ToString 方法：

```
DateTime.Now.ToString("hh:mmtt") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:26:55.520

试试这个代码：

```
DateTime thisDate1 = new DateTime(01/27/12 04:00PM);
Console.WriteLine("The current date and time: {0:H:mm:ss zzz}", 
                   thisDate1); 
```

如需更多帮助，请访问此链接[自定义日期格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# javascript - 在backbonejs中创建一个复杂的集合

> ID：12542154
> 
> 赞同：0
> 
> 时间：2012-09-22T08:29:36.977
> 
> 标签：javascript, backbone.js

简而言之，我想对其他收藏和模型进行深度收集

结构是这样的

```
[{
    mainCategory: "Something"
    subCategories: [
        {
            category: "SomethgingElse",
            labs: [
            {
                id: 1,
                title: "Title",
                description : "Lorem ipsum dolor sit amet"
                availablelanguages: ["fr","en"]
            },
            {
                id: 2,
                title: "Another Title",
                description : "Lorem ipsum dolor sit amet",
                availablelanguages: ["fr","en"]
            }]
        },
        {
            category: "Testing",
            labs: [
            {
                id: 1,
                title: "ZZZZ",
                description : "Lorem ipsum dolor sit amet"
                availablelanguages: ["ar","en"]
            },
            {
                id: 2,
                title: "VVVVV",
                description : "Lorem ipsum dolor sit amet",
                availablelanguages: ["ar","en"]
            }]
        }

    ]
}] 
```

我定义了一些集合和模型，如下所示

```
var Item = Backbone.Model.extend({
    defaults: {
        title : '',
        description: '',
        availableLangagues : []
    }
});
var Items = Backbone.Collection.extend({
    model: Item
});

var Category = Backbone.Model.extend({
    defaults: {
        categoryName: '',
        labsList: new Items()
    }
});
var Categories = Backbone.Collection.extend({
    model: Category
});
var TopCategory = Backbone.Model.extend({
    defaults: {
        topCategory: "",
        categories: new Categories()
    }
});
var TopCategories = Backbone.Collection.extend({
    model: TopCategory
}); 
```

`fetch`我的问题在这里我想调用`TopicCategories`我想填充所有内容，`fetch`它将返回`JSON`示例中传递的类似，但如果我调用它将返回数据，但数组将只是普通的 JavaScript 数组，而不是像我这样的骨干`fetch`集合`TopCategories`在默认值中通缉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:46:54.937

您要做的是利用您`parse()`的顶级模型的功能。在这个修改后的解析中，您所做的是从响应中梳理出不同的对象/数组，并将它们转换为您想要的集合。示例：`parse()`在 TopCategory 模型中。

```
parse: function(response) {

    if (response.subCategories){

        if (!this.subCategories) {
            this.subCategories = new Categories(response.subCategories);
        } else {
            this.subCategories.reset(response.subCategories);
        }

        delete response.subCategories;
    }

    return response;
} 
```

您将在每个父模型的解析定义中执行此模式，这些父模型具有您想要解析出的某种主干集合。

这个链接可能会给你一些关于这一切如何运作的更多想法。

[处理嵌套集合](https://stackoverflow.com/a/12354034/972393)

# javascript - 单独 div 上的 JQuery 和动态子列表

> ID：12542157
> 
> 赞同：0
> 
> 时间：2012-09-22T08:30:05.297
> 
> 标签：javascript, jquery

我正在尝试创建一个与典型的笼式页面分开的子列表视图页面：

这就是我想要做的：

STEP1 - 循环获取所有数据并在列表视图中创建列表：

```
$(document).ready(function() {

     var data = {"id":[{"id":1,"title":"title1","bodytext":"sometext 1"},{"id":2,"title":"title2","bodytext":"sometext 2"},{"id":3,"title":"title3","bodytext":"sometext 3"}
                   }]

    var output = ''

    $.each(data.id, function(index, value){

       output += '<li><a href="#mypage">'+value.title+'</a></li>';

       $('#mypage').text(value.title); //will this be different for each item?

    });

    $('#mylistview').html(output).listview('refresh'); //Refresh the listview with new added data

}); 
```

第2步：

列表视图现在看起来像这样：

```
<ul id-"mylistview">
   <li><a href="populate_#mypage_with_data_from_item_1">title1</a></li>
   <li><a href="populate_#mypage_with_data_from_item_2">title2</a></li>
   <li><a href="populate_#mypage_with_data_from_item_3">title3</a></li>
</ul> 
```

第 3 步：

我有一个预制模板：

```
<div id="mypage">
Data from selected item goes here
</div>

So, if I click on list item 1 mypage will look like this:

<div id="mypage">
Sometext 1
</div>

or if item 2 is clicked:

<div id="mypage">
Sometext 2
</div> 
```

我的问题是，无论我在列表视图中单击哪个项目，我总是从项目 1 中获取数据。

我怎样才能制作它，以便每个项目都有自己的数据显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:14:46.307

```
$(document).ready(function() {
    var data = {"ids":[
         {"id":1,"title":"title1","bodytext":"sometext 1"},
         {"id":2,"title":"title2","bodytext":"sometext 2"},
         {"id":3,"title":"title3","bodytext":"sometext 3"}]};

    var output = '',
        myPages = $('.mypage'),
        container = $('#mylistview');

    $.each(data.ids, function(index, value){
       output += '<li><a href="#mypage">'+value.title+'</a></li>';
       myPages.eq(index).text(value.bodytext);
    });

    container.html(output);

    container.on('click', 'a', function(e){
        e.preventDefault();
        var links = container.find('a');
        alert(myPages.eq(links.index(this)).text());
    });
}); 
```

演示：http: [//jsfiddle.net/mDnE6/](http://jsfiddle.net/mDnE6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:32:35.297

那是因为你只能有一个 id 调用“pagetitle”

# php - 在杂货店 CRUD 中上传文件时检查文件格式

> ID：12542158
> 
> 赞同：1
> 
> 时间：2012-09-22T08:30:11.843
> 
> 标签：php, mysql, codeigniter, file-upload, grocery-crud

我有以下代码用于使用杂货店 CRUD 上传文件

```
function test(){
        $crud=new grocery_CRUD();       
        $crud->set_table('test');
        $crud->add_fields('name', 'image');
        $crud->set_field_upload('image', 'test');
        $crud->callback_before_upload('image', array($this, 'before_test_upload'));
        $output=$crud->render();
        $output->page_title="Test Page";
        $this->_crud_output($output);       
    }
function before_test_upload($files_to_upload, $field_info){
        // Here I want to check the file format before that file upload to source folder.
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T08:40:08.737

是的，您是否尝试过以下方式：

```
function employees_management()
{
    $crud = new grocery_CRUD();

    $crud->set_table('employees');
    $crud->set_relation('officeCode','offices','city');
    $crud->display_as('officeCode','Office City');
    $crud->set_subject('Employee');

    $crud->set_field_upload('file_url','assets/uploads/files');
    $crud->callback_before_upload(array($this,'example_callback_before_upload'));

    $output = $crud->render();

    $this->_example_output($output);
}    

function example_callback_before_upload($files_to_upload,$field_info)
{
/*
 * Examples of what the $files_to_upload and $field_info will be:    
$files_to_upload = Array
(
        [sd1e6fec1] => Array
        (
                [name] => 86.jpg
                [type] => image/jpeg
                [tmp_name] => C:\wamp\tmp\phpFC42.tmp
                [error] => 0
                [size] => 258177
        )

)

$field_info = stdClass Object
(
        [field_name] => file_url
        [upload_path] => assets/uploads/files
        [encrypted_field_name] => sd1e6fec1
)

*/

    foreach($files_to_upload as $value) {
        $ext = pathinfo($value['name'], PATHINFO_EXTENSION);
    }

    $allowed_formats = array("jpg","gif");
    if(in_array($ext,$allowed_formats))
    {
        return true;
    }
    else
    {
        return 'Wrong file format';    
    }

} 
```

# javascript - 设备方向元数据

> ID：12542164
> 
> 赞同：0
> 
> 时间：2012-09-22T08:30:49.370
> 
> 标签：javascript, jquery, html, css, media-queries

我设计了一个使用媒体查询的网站。在浏览器中它看起来很完美。但是当我在平板电脑或移动设备中检查时，在纵向模式下很好，

但是当我将设备方向纵向更改为横向时，它看起来并不完美。所以我的疑问是“是否有任何元数据来禁用设备方向，所以即使用户改变设备方向，内容也不会旋转。”

谢谢，纳雷什库马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:37:19.610

如果我理解正确，您无需禁用方向，而是即使在设备旋转时也可以调整屏幕元素。您可以使用以下查询：

```
@media all and (orientation: portrait) { ... }
@media all and (orientation: landscape) { ... } 
```

因为一个好的设计应该完美地适合所有设备和所有方向......

# python - 在pygame中旋转图像

> ID：12542166
> 
> 赞同：2
> 
> 时间：2012-09-22T08:31:31.833
> 
> 标签：python, graphics, python-3.x, rotation, pygame

所以我有一个箭头作为图像。从外观上看，它似乎围绕着中心旋转。但是当它旋转时，无论哪种方式，当它在每边大约 75 度的角度时都会出现错误： ValueError: subsurface rectangle outside surface area

我不确定问题是什么，我从 pygames 网站获得了旋转功能。如果有人知道问题出在哪里，我将非常感谢您的帮助。这是代码：

```
screen = pygame.display.set_mode(ss)
arrow = pygame.image.load("obj.png").convert_alpha()

x = 400
y= 300
a = 0
turn = 2

def rot_center(image, angle):
    """rotate an image while keeping its center and size"""
    orig_rect = image.get_rect()
    rot_image = pygame.transform.rotate(image, angle)
    rot_rect = orig_rect.copy()
    rot_rect.center = rot_image.get_rect().center
    rot_image = rot_image.subsurface(rot_rect).copy()
    return rot_image

while True:
    screen.fill((255, 255, 255))
    if turn == 1:
        a += 10
    if turn == 2:
        a -=10
    if a == 90:
        turn = 2
    if a == -90:
        turn = 1

    rotarrow = rot_center(arrow, a)
    screen.blit(rotarrow, (x, y))
    pygame.display.update()
    sleep(0.1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T00:31:05.053

该页面上的第一个功能仅适用于方形图像。

对于任意尺寸，使用第二个：

```
def rot_center(image, rect, angle):
        """rotate an image while keeping its center"""
        rot_image = pygame.transform.rotate(image, angle)
        rot_rect = rot_image.get_rect(center=rect.center)
        return rot_image,rot_rect 
```

# c# - System.Web.UI.Page 的 Partial 类中的非静态属性在函数中被重置

> ID：12542167
> 
> 赞同：0
> 
> 时间：2012-09-22T08:31:34.353
> 
> 标签：c#, .net, web-applications

部分类 _Default 中的变量在函数调用中被重置，如下面的代码中所述。但是，在将属性标记为静态时，它们的值将被保留。

我的问题是，为什么会发生这种情况？每个函数调用不是使用相同的页面类实例吗？

```
public partial class _Default : System.Web.UI.Page
{
    public double ValueToConvert { get; set; }
    public double ConvertedValue { get; set; }

    protected void Page_Load(object sender, EventArgs e){}

    protected void btnUC_Click(object sender, EventArgs e)
    {
        //In this method, the non-static properties ValueToConvert and ConvertedValue
        //get reset. But why?
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:34:54.610

> 每个函数调用不是使用相同的页面类实例吗？

那么每个*请求*都会创建一个新的类实例。哎呀，他们可能在不同的进程甚至不同的机器上。如果您*在同一个请求*中有多个方法调用将使用同一个实例，否则您需要确定您希望如何传播状态。您可以通过客户端（视图状态）传播它或将其存储在服务器端的某个地方（例如，在数据库中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:03:15.247

你可以通过使用隐藏字段并用这样的属性包装它们来解决这个问题

```
public partial class _Default : System.Web.UI.Page
{
    public double ValueToConvert \
    { 
       get{
           return hfValueToConvert.Value;  
       }
       set{
           hfValueToConvert.Value = this.value.ToString();
       }
    }

    public double ConvertedValue
    { 
       get{
           return hfConvertedValue.Value;  
       }
       set{
           hfConvertedValue.Value = this.value.ToString();
       }
    }

    protected void Page_Load(object sender, EventArgs e){}

    protected void btnUC_Click(object sender, EventArgs e)
    {
        //In this method, the non-static properties ValueToConvert and ConvertedValue
        //get reset. But why?
    }

} 
```

现在将两个 HiddenField 控件名称**hfValueToConvert**和**hfConvertedValue 添加**到您的 aspx 页面。

# multithreading - 在 Ruby 中创建 Web 爬虫。如何解决性能问题？

> ID：12542171
> 
> 赞同：3
> 
> 时间：2012-09-22T08:32:13.190
> 
> 标签：multithreading, web-crawler, nokogiri, mechanize

我正在用 Ruby 构建一个网络爬虫，Rails 作为前端。我正在使用建立在 Nokogiri 之上的 Mechanize。我已经实现了一个可以抓取网页的解决方案，但我希望能够在一次运行中抓取 200k 个网站，我知道有比等待数小时完成更好的方法。我希望能够通过启动并行请求而不使其过于复杂来实现最佳性能。我对线程一无所知，它有什么限制，所以如果有人想指出我可以在哪里学习如何做到这一点，或者至少告诉我应该做什么，请不要在爬虫运行时劫持服务器寻找。请记住，我将写入数据库和文件（可能我可以在爬网完成后从数据库中导出，而不是直接写入文件）。谢谢。

注意：这里有一个类似的问题，但是已经有几年了，也许人们现在的做法有所不同，而且看起来很复杂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:32:05.963

看看使用[Typhoeus 和 Hydra](https://github.com/typhoeus/typhoeus)。它们将使并行处理 URL 变得容易。

您不需要使用 Mechanize，除非您必须从每个页面请求特殊数据。对于普通的爬虫，您可以使用 Open::URI 和 Nokogiri 抓取主体并解析它，而无需 Mechanize 的开销或附加功能。出于您的目的，将 Typhoeus 替换为 Open::URI 并让 Hydra 处理线程管理。

请记住，如果您尝试一次全部完成，爬取 200k 个网站将会使您的带宽饱和。这将使您的 Rails 站点不可用，因此您需要限制您的请求。而且，这意味着您将不得不在几个（或多个）小时内完成它们。速度并不像在此处保持您的网站在线那么重要。我可能会将爬虫放在与 Rails 服务器不同的机器上，并让数据库将所有东西联系在一起。

创建一个表或文件，其中包含您要抓取的网站 URL。我推荐这个表格，这样您就可以整理一个表格来编辑/管理 URL。您需要跟踪以下内容：

*   上次抓取 URL 的时间。（约会时间）
*   是否应抓取特定 URL（布尔值或字符[1](https://github.com/typhoeus/typhoeus)）
*   URL（字符串或 var char[1024] 应该没问题）。这应该是唯一的键。
*   当前是否正在抓取该 URL（布尔值或字符[1](https://github.com/typhoeus/typhoeus)）。这在所有记录的运行开始时被清除，然后在蜘蛛加载该页面时设置并离开。
*   显示什么时候可以运行该站点的字段。
*   显示可以运行该站点的时间的字段。

最后两个很重要。您不想抓取一个功率不足的小站点并终止其连接。这是被禁止的好方法。

创建另一个表作为下一个 URL，以检查从您在爬网时遇到的链接收集的特定站点。您需要提出一个规范化例程，以将带有会话数据和参数的 URL 简化为可用于测试唯一性的东西。在这个新表中，您希望 URL 是唯一的，这样您就不会陷入循环或不断添加具有不同参数的同一页面。

您可能需要注意在任何重定向之后检索到的实际登录 URL，而不是“获取”URL，因为重定向和 DNS 名称在站点内可能会有所不同，并且生成内容的人可能使用不同的主机名。同样，您可能希望在 head 块中查找元重定向并遵循它们。这些是做你想做的事情的一个特别令人讨厌的方面。

当您遇到新的 URL 时，请检查它们是否正在退出 URL，如果您关注它们，这将导致您离开该站点。如果是这样，请不要将它们添加到您的 URL 表中。

将数据库信息写入文件可能无济于事，因为要找到正确的文件，您可能无论如何都需要进行数据库搜索。只需将您需要的内容存储在字段中并直接请求即可。200K 行在数据库中算不了什么。

注意网站的“蜘蛛”规则，如果他们提供 API 来获取数据，请使用它，而不是爬行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:56:52.507

我不是 Ruby 专家，但这里有一些基于其他编程语言经验的想法和答案：

A. 您必须了解 Web 服务器或运行 Ruby 应用程序的环境的线程模型。
例如，我正在使用一个名为 tomcat 的 Web 服务器，它可以配置它打开的线程数。
当然，这不能超过操作系统上可能的线程数。

B. 此外，请记住，由于您需要“爬行”，这意味着您可能需要处理文件（即 - Linux 上的文件描述符），而这些资源是有限的。
例如，在 Linux 上，您可以使用 ulimit 配置文件描述符的限制。

C. 我会认真地推荐你有一个线程池（我确信 Ruby 有这方面的框架，这[是](http://burgestrand.se/articles/quick-and-simple-ruby-thread-pool.html)我在谷歌搜索时想到的）。
使用线程池，意味着您正在使用线程，但您没有打开/关闭线程，而是有一组线程，从共享数据结构中提取作业并执行它们。
例如，您可以做的是，对于每个作业，您将执行以下伪代码：
1\. 解析网页
2\. 对于每个链接执行：
2.1。使用 URL 创建作业。
2.2 将作业放在队列中（以便线程池线程工作）

我也会认真考虑使用集群（例如 - 云上的几台机器）并开发可扩展的解决方案。
这意味着您将在集群节点之间拥有某种共享数据结构（可能是数据库或 NoSQL DB），并且您的工作线程将提取作业，并将新作业放入这种集群方式（云方式）共享数据结构中.
我还建议您阅读有关[map-reduce](http://en.wikipedia.org/wiki/MapReduce)模式的信息，它可以在此处为您提供帮助，
并且可能将 Hadoop 与 Ruby 结合使用（请参阅[此处](http://www.bigfastblog.com/map-reduce-with-ruby-using-hadoop)的链接）。

再次抱歉，我不是 ruby​​ 专家，但我在使用的其他计算机语言中遇到了您的问题。
我希望我给了你一些提示和阅读材料。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:02:23.870

检查[http://anemone.rubyforge.org/index.html](http://anemone.rubyforge.org/index.html)

我认为它可能适合您的需求，如果不是，您应该能够从它的源代码中学到很多东西。

# php - 如何优化mysql查询

> ID：12542178
> 
> 赞同：-1
> 
> 时间：2012-09-22T08:32:56.450
> 
> 标签：php, mysql, database, query-optimization

我从我的网络托管公司收到通知，以优化我网站中的 MySQL 查询。他们告诉我，共享托管中不允许运行超过 15 秒的 MySql 查询，而该域的 mysql 查询运行时间超过 75 秒。

但我不知道该做什么以及在哪里更改以优化 MySQL 查询。请帮我解决这个问题。

**User@Host: khabarin_suprusr[khabarin_suprusr] @ localhost []
Query_time: 76.546533 Lock_time: 1.408959 Rows_sent: 5 Rows_examined: 3038**

```
use khabarin_portal3;
SET timestamp=1347378163;
SELECT *
FROM (`art_conts`)
JOIN `art_cats` ON `art_cats`.`cat_id`=`art_conts`.`cat_id`
JOIN `art_secs` ON `art_secs`.`sec_id`=`art_cats`.`sec_id`
WHERE `art_conts`.`cont_status` = 'public'
ORDER BY `cont_id` desc
LIMIT 5; 
```

**User@Host: khabarin_suprusr[khabarin_suprusr] @ localhost []** 强文本**Query_time: 54.002604 Lock_time: 1.403354 Rows_sent: 1 Rows_examined: 3033**

```
use khabarin_portal3;
SET timestamp=1347376289; 
```

**User@Host: khabarin_suprusr[khabarin_suprusr] @ localhost []
Query_time: 24.436448 Lock_time: 13.889496 Rows_sent: 1 Rows_examined: 0**

```
use khabarin_portal3;
SET timestamp=1347376151;
SELECT COUNT(*) AS `numrows`
FROM (`art_conts`)
JOIN `art_cats` ON `art_cats`.`cat_id`=`art_conts`.`cat_id`
JOIN `art_secs` ON `art_secs`.`sec_id`=`art_cats`.`sec_id`
WHERE `art_conts`.`cat_id` = '59'
AND `art_conts`.`cont_status` = 'public'
ORDER BY `cont_id` desc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:44:40.980

一个好的开始是在 SELECT 语句前面使用关键字“EXPLAIN”。

大多数时候存在不正确或未使用的索引。

如果可能，请避免在语句中使用“*”，并仅选择您真正需要的行和列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:46:01.827

在 art_conts 上尝试如下索引：

```
cont_id desc,
cont_status,
cat_id,
sec_id 
```

# eclipse - 发布时Eclipse Juno空指针错误

> ID：12542179
> 
> 赞同：1
> 
> 时间：2012-09-22T08:33:04.977
> 
> 标签：eclipse, tomcat

我刚刚升级到现在尝试发布到 Apache Tomcat 7.0.30 时出现错误。错误是：

```
java.lang.NullPointerException
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.eclipse.wst.server.core.util.PublishHelper.copyFile(PublishHelper.java:501)
    at org.eclipse.wst.server.core.util.PublishHelper.copy(PublishHelper.java:563)
    at org.eclipse.wst.server.core.util.PublishHelper.publishFull(PublishHelper.java:537)
    at org.eclipse.wst.server.core.util.PublishHelper.copy(PublishHelper.java:554)
    at org.eclipse.wst.server.core.util.PublishHelper.publishFull(PublishHelper.java:537)
    at org.eclipse.wst.server.core.util.PublishHelper.copy(PublishHelper.java:554)
    at org.eclipse.wst.server.core.util.PublishHelper.publishFull(PublishHelper.java:537)
    at org.eclipse.jst.server.tomcat.core.internal.PublishOperation2.publishDir(PublishOperation2.java:132)
    at org.eclipse.jst.server.tomcat.core.internal.PublishOperation2.execute(PublishOperation2.java:82)
    at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.performTasks(ServerBehaviourDelegate.java:1290)
    at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:933)
    at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:774)
    at org.eclipse.wst.server.core.internal.Server.publishImpl(Server.java:3108)
    at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Server.java:345)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

请注意，我对 Juno 进行了全新安装，为它创建了一个新工作区（即没有复制/转换/重命名旧的 eclipse 工作区）并在 Juno 中从头开始创建服务器！

TIA

# android - android向Facebook添加一个新地方

> ID：12542181
> 
> 赞同：-1
> 
> 时间：2012-09-22T08:33:12.200
> 
> 标签：android, facebook, checkin

我已经构建了一个 android 应用程序，您可以在其中签入 Facebook 位置。如果该地点在 Facebook 中存在，则没有问题，但我想为用户提供一个选项，以在不存在时添加新地点（例如他们在 Facebook 或 Facebook 应用程序中的选项）。我找不到任何关于它的文档...

有人可以就这个问题提出建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:48:17.637

> 如果新地点不存在，我想给用户一个添加新地点的选项

“地点”用户可以签入必须是Facebook 上具有适当位置数据集的实际*页面。*所以你想要的基本上是动态地*创建*一个新的 Facebook 页面供你的用户签到。

恕我直言，这没有多大意义，因为它只会创建另一个没有实际有用信息的“幽灵”页面，在未来任何可预见的时间点上都不会采取太多行动……所以我的建议是：不要这样做它。

取而代之的是，让您的用户检查他们周边地区的任何*可用*地点——您可以使用 Graph API 通过纬度/经度坐标和距离来搜索这些地点，请参阅[https://developers.facebook.com/docs/reference/ api/#搜索](https://developers.facebook.com/docs/reference/api/#searching)

# java - 根据其中的一个字段对 Java 集合对象进行排序

> ID：12542185
> 
> 赞同：29
> 
> 时间：2012-09-22T08:34:02.453
> 
> 标签：java, sorting, collections

我有以下收藏：

```
Collection<AgentSummaryDTO> agentDtoList = new ArrayList<AgentSummaryDTO>(); 
```

哪里`AgentSummaryDTO`看起来像这样：

```
public class AgentSummaryDTO implements Serializable {
    private Long id;
    private String agentName;
    private String agentCode;
    private String status;
    private Date createdDate;
    private Integer customerCount;
} 
```

现在我必须`agentDtoList`根据`customerCount`字段对集合进行排序，如何实现呢？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-22T09:55:09.860

这是我的“1liner”：

```
Collections.sort(agentDtoList, new Comparator<AgentSummaryDTO>(){
   public int compare(AgentSummaryDTO o1, AgentSummaryDTO o2){
      return o1.getCustomerCount() - o2.getCustomerCount();
   }
}); 
```

Java 8 的更新：对于 int 数据类型

```
 Collections.sort(agentDtoList, (o1, o2) -> o1.getCustomerCount() - o2.getCustomerCount()); 
```

甚至：

```
 Collections.sort(agentDtoList, Comparator.comparing(AgentSummaryDTO::getCustomerCount)); 
```

对于 String 数据类型（如注释中所示）

```
Collections.sort(list, (o1, o2) -> (o1.getAgentName().compareTo(o2.getAgentName()))); 
```

..它需要吸气剂`AgentSummaryDTO.getCustomerCount()`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-12-05T09:38:49.727

[Jiri Kremser](https://stackoverflow.com/a/12542755/1421925)的答案可以进一步简化，这确实是 Java 8 的完整方法：

```
Collections.sort(agentDtoList, Comparator.comparing(AgentSummaryDTO::getCustomerCount)); 
```

这只是通过整数字段进行比较，并且自`Integer`实现以来运行良好`Comparable`。

一个更清洁的解决方案可能是使用内置[`comparingInt()`](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparingInt-java.util.function.ToIntFunction-)方法：

```
Collections.sort(agentDtoList, Comparator.comparingInt(AgentSummaryDTO::getCustomerCount)); 
```

当然，这可以通过静态导入`sort`和更短地表达`comparingInt`：

```
sort(agentDtoList, comparingInt(AgentSummaryDTO::getCustomerCount)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-22T08:39:22.467

看看[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)和[Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)类。

一种简单的方法是实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口`AgentSummaryDTO`，然后将列表传递给`Collections.sort()`.

如果您无法编辑`AgentSummaryDTO`，则需要一个 Comparator，如下所示：[如何使用对象名称字段按字母顺序对 List<Object> 进行排序](https://stackoverflow.com/questions/8432581/how-to-sort-a-listobject-alphabetically-using-object-name-field)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-22T09:33:52.367

看看下面的代码。

```
package test;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Date;
import java.util.List;

public class AgentSummary {
    private Long id;
    private String agentName;
    private String agentCode;
    private String status;
    private Date createdDate;
    private Integer customerCount;

    /**
     * @param args
     */
    public static void main(String[] args) {
        new AgentSummary().addObjects();   
    }

    public void addObjects(){
        List<AgentSummaryDTO> agentSummary = new ArrayList<AgentSummaryDTO>();
        for (int j = 0; j < 10; j++) {
            agentSummary.add(new AgentSummaryDTO(j));
        }
        Collections.sort(agentSummary);

        for (AgentSummaryDTO obj : agentSummary) {
            System.out.println("File " + obj.getCustomerCount());
        }
    }
}

class AgentSummaryDTO implements Serializable, Comparable<AgentSummaryDTO> {

    private Long id;
    private String agentName;
    private String agentCode;
    private String status;
    private Date createdDate;
    private Integer customerCount;

    AgentSummaryDTO() {
        customerCount = null;
    }

    AgentSummaryDTO(int customerCount) {
        this.customerCount = customerCount;
    }

    /**
     * @return the id
     */
    public Long getId() {
        return id;
    }

    /**
     * @param id
     *            the id to set
     */
    public void setId(Long id) {
        this.id = id;
    }

    /**
     * @return the agentName
     */
    public String getAgentName() {
        return agentName;
    }

    /**
     * @param agentName
     *            the agentName to set
     */
    public void setAgentName(String agentName) {
        this.agentName = agentName;
    }

    /**
     * @return the agentCode
     */
    public String getAgentCode() {
        return agentCode;
    }

    /**
     * @param agentCode
     *            the agentCode to set
     */
    public void setAgentCode(String agentCode) {
        this.agentCode = agentCode;
    }

    /**
     * @return the status
     */
    public String getStatus() {
        return status;
    }

    /**
     * @param status
     *            the status to set
     */
    public void setStatus(String status) {
        this.status = status;
    }

    /**
     * @return the createdDate
     */
    public Date getCreatedDate() {
        return createdDate;
    }

    /**
     * @param createdDate
     *            the createdDate to set
     */
    public void setCreatedDate(Date createdDate) {
        this.createdDate = createdDate;
    }

    /**
     * @return the customerCount
     */
    public Integer getCustomerCount() {
        return customerCount;
    }

    /**
     * @param customerCount
     *            the customerCount to set
     */
    public void setCustomerCount(Integer customerCount) {
        this.customerCount = customerCount;
    }

    @Override
    public int compareTo(AgentSummaryDTO arg0) {

        if (this.customerCount > arg0.customerCount)
            return 0;
        else
            return 1;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-16T06:02:28.957

Java 8的更新。它的工作原理：

```
Collections.sort(agentDtoList, (o1, o2) -> o1.getCustomerCount() - o2.getCustomerCount()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-12T10:37:10.313

对于任何正在寻找答案的人：

您还可以使用 JAVA-8 Stream-API 对列表进行排序。

```
List<AgentSummaryDTO> sortedList = agentDtoList.stream()
  .sorted(Comparator.comparing(AgentSummaryDTO::getCustomerCount).reversed())
  .collect(Collectors.toList()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-15T18:02:51.260

你可以使用这个代码

```
agentDtoList.sort((t1, t2) -> t1.getCustomerCount()); 
```

# php - 使用德语时的字母数字验证错误

> ID：12542187
> 
> 赞同：4
> 
> 时间：2012-09-22T08:34:05.780
> 
> 标签：php, validation, preg-match

在一个针对**德国**的应用程序中，我正在编写一些**网络**服务，我必须对用户名、密码等应用一些验证规则。比如**字母数字**、不支持的特殊字符等。我使用正则表达式来实现这一点，但它失败了，它对英语很好用，但**它不支持德语**，我该如何解决这个问题。

任何帮助将不胜感激...`preg_match("#.*^(?=.{8,20})(?=.*[a-zA-Z])(?=.*[0-9]).*$#", $string)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:29:17.497

首先，对 UTF-8 使用 'u' 修饰符（您应该将其编码用于国际应用程序）。其次，如果您试图在 [a-zA-Z] 块中允许变音等，您可以使用转义序列添加您想要的特定字符，如下所示：

分别：

```
preg_match( "/\x{00FC}/u" , 'ü' ); // 1 
```

或在一组中：

```
preg_match('/^[\x{00DF}\x{00E4}\x{00C4}\x{00F6}\x{00D6}\x{00FC}\x{00DC}]+$/u', 'ßäÄöÖüÜ'); // 1 
```

...或者只使用单词字母匹配`\w`（注意这也将允许数字和下划线以及其他可以用作单词字母的国际字符）。

```
preg_match( "/\w/u" , 'ü' ); // 1 
```

（顺便说一句，我不确定你`^`在表达式中间做什么，没有'm'修饰符。）

# php - 如何为php文件输出创建图像

> ID：12542189
> 
> 赞同：0
> 
> 时间：2012-09-22T08:34:22.343
> 
> 标签：php, css

我想用 PHP 创建照片拼贴。我在本地主机上创建了一个测试代码，如下所示：

```
<style type="text/css">
body{background:url('images/Winter.jpg'); }
#collage:after{content:"";clear:both;display:block;}
}

</style> 
```

```
<?php

ob_start();
$dir = "images";

if($fp = opendir($dir))
{
  while($file = readdir($fp))
  {
    if('jpg'==(pathinfo($file, PATHINFO_EXTENSION)))
    {
      $style = "style='float:left; -webkit-transform:rotate(".mt_rand(2, 30)."deg); border:solid 5px #eee;'";
       $ht = "height='".mt_rand(100, 300)."'";
    echo "<div class='img_div' $style>";
    echo "<img src='$dir/$file' $ht >";
    echo "<div style='background:#eee;font-size:20px;'>hi</div>";
    echo '</div>';
     }
   }
}
closedir($fp);
?> 
```

它生成了我想要的输出，但现在我希望用户能够将其下载为图像文件。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:00:57.387

如果您愿意，您将不得不使用 php 的 GD 库之类的东西创建一个新的空白图像，并将您的图像定位到其中，而不是使用 html/css 打印和定位它们

（我相信我在某处读到过，将来您将能够在 html5 画布上显示 html/css，如果这是真的，您将能够使用它来提取图像，但现在我认为这不会是可能的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:23:22.463

缺少使用新的 HTML5 画布功能，这将让浏览器为您完成将马赛克合并到一个图像中的所有工作（但是许多浏览器都支持它吗？我真的不知道。），

您还可以使用 php 的 GD 库在服务器端创建该图像。我认为，这是 HTML5 之前的唯一方法，并且可能在一段时间内仍然是最好的方法（正如我所说，我至今还不知道 HTML5 实现到底有什么价值）

一个好的起点是： http: [//php.net/manual/en/ref.image.php](http://php.net/manual/en/ref.image.php)（阅读访问者在该页面和特定功能页面上的许多示例，它们可能是有价值的教育）。

现在，这种方法有一个不方便的地方（除了你必须完成整个工作之外）：它会占用你服务器的 CPU 并减慢它的响应速度。如果您一次只有几个访客，那也没关系。但除此之外，您的拼贴应该一劳永逸地预先计算，因此服务器不必为每次访问重做工作。

# java - 嵌套类中私有构造函数的范围

> ID：12542193
> 
> 赞同：30
> 
> 时间：2012-09-22T08:35:14.880
> 
> 标签：java, inheritance, constructor, superclass

这更像是一个*谜*而不是问题。我有以下代码：

```
public class PrivateBaseConstructor {
    public static class BaseClass {
        private BaseClass() {
        }

    }

    public static class DerivedClass extends BaseClass {
        public DerivedClass() {
            super(); // 1*
        }
    }
} 
```

`super();`即使基类构造函数是 ，这里也允许调用at 1* `private`。如果我们将这些类写成同一个包中的单独类：

```
BClass.java
public class BClass {
    private BClass() {

    }
}

DClass.java
public class DClass extends BClass {
    public DClass() {
        super(); // 2*
    } 
```

编译器正确地在 2* 处给出错误，因为基类构造函数不可见。

当两个类都在一个类中声明为静态时，为什么编译器在我的第一个场景中不会抛出错误？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-22T08:48:34.840

如果成员或构造函数被声明为私有，则当且仅当它出现在包含成员或构造函数声明的顶级类（第 7.6 节）的主体内时，才允许访问。

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T08:47:31.877

因为嵌套类可以看到彼此的成员。这与静态声明无关。请参阅以下代码示例，其中仅包含嵌套内部类（非静态）。

```
public class PrivateBaseConstructor {
    public class BaseClass {
        private BaseClass() {}
    }

    public class DerivedClass extends BaseClass {
        public DerivedClass() {
            super(); // 1*
        }
    }

    public static void main(String[] args)
    {
       new PrivateBaseConstructor(). new DerivedClass();
    }
} 
```

在此处阅读有关嵌套类的更多信息：http: [//docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T08:45:41.030

因为在类中声明的任何东西都可以访问其私有成员，包括内部类。但是，如果您在类上运行[PMD](http://pmd.sourceforge.net/)，您会发现它建议您将构造函数的可见性更改为非私有。

# c# - 两个站点之间的数据传输

> ID：12542195
> 
> 赞同：0
> 
> 时间：2012-09-22T08:35:37.503
> 
> 标签：c#, xml, asp.net-mvc, json

我使用 Asp.Net Mvc 4
www.hostname.com 从我的 report.hostname2.com 向我的站点
发送和接收数据，以通过字符串 bi 代码隐藏直接移动到该地址。
querysstring 不是，因为发送一个很长的字符串

我的意思是 rapor.coskunoglu.net/Pdf 地址发送字符串数据直接移动到
屏幕的那个地址 PDF 使它看起来如此。

我怎样才能做到这一点？谢谢你，放轻松。

对不起，我的英语不好。

* * *

**EDIT0：**
我想使用 POST。
某人-> 我的 StringBuilder。

```
byte[] bytt = Encoding.UTF8.GetBytes(sb.ToString());   
 WebRequest wr = WebRequest.Create("http://report.hostname2.com/Pdf");   
 wr.ContentType = "application/x-www-form-urlencoded";   
 wr.ContentLength = bytt.Length;   
 wr.Method = "POST";   
 Stream st = wr.GetRequestStream();   
 st.Write(bytt, 0, bytt.Length);   
 st.Close(); 
```

发送 POST 后，我想访问 report.hostname2.com。你看到我的工作了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:38:01.077

实现此目的的一种方法是将要传输的数据存储到两个站点之间的某个常用共享数据库中，然后简单地将 id 作为查询字符串发送到另一个站点，以便它可以检索数据。如果您不能使用共享数据库，那么剩下的就是标准 HTTP 协议意味着：

*   GET - 查询字符串 - 如果数据很大，在您的情况下不切实际
*   POST - 生成一个表单，然后将此表单提交到远程站点 - 可能是您的案例的一个很好的解决方案，因为您的大小不受限制

或者，您可以使用 WebClient 发布一些数据：

```
StringBuilder sb = ... the data to send

using (var client = new WebClient())
{
    var values = new NameValueCollection
    {
        { "data", sb.ToString() }
    };
    byte[] result = client.UploadValues("http://report.hostname2.com/Pdf", values);
} 
```

然后在远程站点上，您可以`data`从请求中读取 POST 参数。

# java - 为什么相同算法的运行时差异如此之大？

> ID：12542197
> 
> 赞同：1
> 
> 时间：2012-09-22T08:35:56.120
> 
> 标签：java, python, performance

我做了面试街头问题[字符串相似性](https://www.interviewstreet.com/challenges/dashboard/#problem/4edb8abd7cacd)。最初我是在 python 中执行此操作的。这给了我最后 5 个测试用例的 Time Limit Exceeded 错误。然后我在java中尝试了相同的解决方案并被接受。最后 5 个测试用例的 java 和 python 版本之间的时间差非常高，但前 5 个测试用例的 python 优于 java。为什么呢？

字符串的长度可以达到 100000。

字符串sim.py

```
N=int(raw_input())
while N!=0:
    rootstr=[i for i in raw_input()]
    solution=0
    for i in xrange(len(rootstr)):
        for j in xrange(i,len(rootstr)):
            if(rootstr[j-i]==rootstr[j]):solution+=1
            else:break
    print solution
    N-=1 
```

解决方案.java：

```
class Solution{
    public static void main(String[] args) {
    java.util.Scanner sc=new java.util.Scanner(System.in);
    int N=sc.nextInt(),sol;
    while(N--!=0){
        sol=0;
        char[] s=sc.next().toCharArray();
        for(int i=0;i<s.length;i++){
            for(int j=i;j<s.length;j++){
                if(s[j]==s[j-i]) sol++;
                else break;
            }
        }
        System.out.println(sol);
    }
    }
} 
```

```
java的运行时间：
1 成功 0.172387
2 成功 0.172177
3 成功 0.172185
4 成功 0.172178
5 成功 0.263904
6 成功 2.82661
7 成功 4.66869
8 成功 4.83201
9 成功 1.36585
10 成功 1.02123

对于蟒蛇：
1 成功 0.081229
2 成功 0.081047
3 成功 0.081032
4 成功 0.081015
5 成功 0.910672
6 超出时间限制。16.1818
7 超出时间限制。16.2357
8 超出时间限制。16.2001
9 超出时间限制。16.2408
10 超出时间限制。16.1831

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:31:47.080

尝试在 Java 中自己测量时间。我的意思是在 main 方法中计算毫秒数。在 Python 中做同样的事情。我猜你答案中的时间是在操作系统中测量的——java进程运行的时间。前 5 个示例的时间可能主要是启动 JVM 进程的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:03:15.507

我同意 iccthedral 的评论：Java JIT 可能是 Python 对于前几个小输入更快的一个可能原因。为了验证这一点，颠倒输入顺序（因此大输入首先出现），在同一过程中对所有输入运行它，然后再次测量每个单独输入的时间。如果 Python 在这种情况下对于最后几个（小）输入很慢，则该假设得到确认。

验证它的另一种方法是将小输入也添加到末尾（也将它们保留在开头），并查看 Java 执行所有内容需要多长时间。如果增量远大于仅小输入的执行时间，则确认该假设。

Java JIT 将 Java 字节码编译为机器码（CPU 可以直接且非常快速地执行）。但只有那些 Java 花费大量时间执行它们的 Java 方法才被转换。（这是因为将所有方法转换为机器代码会很慢，并且生成的机器代码需要太多内存。）所以当 Java 进程启动时，它开始以字节码的形式执行所有方法，它测量每个方法花费了多少时间方法，一旦达到某个方法的阈值，它就会使用 JIT 将该方法编译为机器代码。之后，该方法执行得更快。但是，在流程执行的开始，所有的方法都很慢，并且在很短的时间内，Java 进程变得更慢，因为它忙于运行 JIT。

您的情况很可能正在发生这种情况：当 Python 找到简单问题的答案时，Java 仍在运行字节码或运行 JIT 以将字节码编译为机器码。但最终 Java 会赶上来，因为机器码要快得多。

# android - 从facebook获取朋友的位置

> ID：12542199
> 
> 赞同：2
> 
> 时间：2012-09-22T08:36:18.650
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试通过我的应用程序获取我所有朋友的家乡位置和当前位置。我开始知道要获取位置，我必须设置权限并编写 FQL。我写了那个，并且 URL 变成了 [My Graph API 格式](https://developers.facebook.com/tools/explorer?fql=SELECT%20name,%20uid,%20current_location,%20hometown_location%20FROM%20user%20WHERE%20uid%20in%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20=%20me%28%29%29)
，但是当我使用这个链接来获取 json 时，我没有得到值。我尝试用空格替换 %20 并尝试过，但这也很有效。请告诉我出了什么问题。并告诉我应该使用哪个 URL。

我获取json值的代码..：

```
String q = "https://developers.facebook.com/tools/explorer?fql=SELECT name, uid, current_location, hometown_location FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me())";
              HttpClient httpClient = new DefaultHttpClient();
              HttpGet httpGet = new HttpGet(q);
              try {
                    HttpEntity httpEntity = httpClient.execute(httpGet).getEntity();
                    if (httpEntity != null){
                        InputStream inputStream = httpEntity.getContent();
                        Reader in = new InputStreamReader(inputStream);
                        BufferedReader bufferedreader = new BufferedReader(in);
                        StringBuilder stringBuilder = new StringBuilder();

                        String stringReadLine = null;

                        while ((stringReadLine = bufferedreader.readLine()) != null) {
                         stringBuilder.append(stringReadLine + "\n");
                         }

                        qResult = stringBuilder.toString();
                        inputStream.close();
                       }
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
              try {
                 Log.e("in try block", "in try block");
                JSONObject JsonObject = new JSONObject(qResult);
                JSONArray JsonArray = JsonObject.getJSONArray("data");
                for(int i = 0;i < JsonArray.length(); i++){
                    Log.e("jksdhkvjsdlvm", "inside 1st for loop");
                    JSONObject fbInfo = JsonArray.getJSONObject(i);
                    name = fbInfo.getString("name");
                    uid = fbInfo.getString("uid");
                    current_location = JsonObject.getJSONArray("current_location");
                    for(int j = 0;j < current_location.length(); j++){
                        JSONObject currentInfo = current_location.getJSONObject(j);
                        c_city = currentInfo.getString("city");
                        c_state = currentInfo.getString("state");
                        c_country = currentInfo.getString("country");
                        Log.e("--->>>>", c_city);
                    }
                    hometown_location = JsonObject.getJSONArray("hometown_location");
                    for(int k = 0;k < hometown_location.length(); k++){
                        JSONObject homeInfo = hometown_location.getJSONObject(k);
                        h_city = homeInfo.getString("city");
                        h_state = homeInfo.getString("state");
                        h_country = homeInfo.getString("country");
                    }
                }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:35:54.550

> 我尝试用空格替换 %20 并尝试过，但这也很有效。

URL 编码一个值不仅仅是替换空格。还有其他字符也希望被它们的 %xy 表示替换——例如逗号。

*以正确的方式对整个*FQL 查询进行 URL 编码，它将起作用：

[https://developers.facebook.com/tools/explorer?fql=SELECT+name%2C+uid%2C+current_location%2C+hometown_location+FROM+user+WHERE+uid+in+%28SELECT+uid2+FROM+friend+ WHERE+uid1+%3D+我%28%29%29](https://developers.facebook.com/tools/explorer?fql=SELECT+name%2C+uid%2C+current_location%2C+hometown_location+FROM+user+WHERE+uid+in+%28SELECT+uid2+FROM+friend+WHERE+uid1+%3D+me%28%29%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:07:32.300

你也可以通过 Graph API 来做更简单的事情。

1）您需要具有权限的access_token；

```
To read Posts with location information, you need:
    user_photos or friends_photos for Photos
    user_status or friends_status for Posts (not including Photos)
    user_checkins or friends_checkins for Checkins only (excluding all other types of Posts) 
```

2）然后调用这个

```
https://graph.facebook.com/search?type=checkin&access_token= 
```

这将返回我（经过身份验证的用户）+朋友的 location_tagged 项目

# delphi - Free Pascal 中的函数 Copy()

> ID：12542200
> 
> 赞同：6
> 
> 时间：2012-09-22T08:36:22.970
> 
> 标签：delphi, copy, freepascal

Delphi 允许 3 个版本的`Copy`函数：

```
function CopyTest(const S: string): string;
begin
  Result:= Copy(S, 1, 5);
  Result:= Copy(S, 1);
//  Result:= Copy(S);   //  not allowed for strings, allowed for dyn arrays
end; 
```

FreePascal 似乎只编译第一个（3-arg）版本；对于其他人，我有编译时错误

```
Error: Wrong number of parameters specified for call to "$fpc_ansistr_copy" 
```

我是否缺少某些 FPC 编译器开关或`Copy`Free Pascal 中没有重载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T14:27:37.600

“复制”节点生成器代码是FPC 源的`inline_copy`功能。[`pinline.pas`](http://svn.freepascal.org/cgi-bin/viewvc.cgi/branches/fixes_2_6_0/compiler/pinline.pas?view=markup)仅对动态数组变体 1 和 3 有效（生成代码以将第二个和第三个参数的 -1 传递给`fpc_dynarray_copy`变体 3）。对于所有其他情况（ansi 字符串、宽字符串、unicode 字符串、char(*) 和短字符串），需要 3 个参数（编译器在不检查参数的情况下生成对复制函数之一的调用（例如`fpc_ansistr_copy`in ），因为被调用的函数具有`astrings.pas`没有重载或默认参数，需要完全匹配的参数）。不涉及任何开关/指令。

(*)这个[**有点奇怪**][，它返回一个它自己或''的短字符串。]

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T09:05:40.973

据我所知，Free Pascal 支持默认值参数，所以不需要重载函数。您可以编写新`Copy`功能，例如...

```
function Copy(const S: string; From: integer = 1; Count: integer = MaxInt): string;
begin
//There is no need to check the string length
//      if Count > Length(S) then
//        Count := Length(S);
        result := system.Copy(S, From, Count);
end; 
```**

# visual-studio - VS的版本是否影响打开解决方案

> ID：12542201
> 
> 赞同：0
> 
> 时间：2012-09-22T08:36:30.787
> 
> 标签：visual-studio, version, visual-studio-2012

我在谷歌上搜索过这个，但没有运气。

我目前有VS2012的企业版（由我公司支付）。如果/当我离开公司时，我认为我也将失去许可证并且可能不得不返回到 Express 版本。

我认为答案是否定的，但是，在 VS2012 的“降级”版本中加载任何项目会有任何问题吗？我认为我将失去的只是 VS 企业提供的功能，但我的项目会正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:50:47.090

至于我，Express 版本最有价值的限制是

*   没有资源编辑器
*   没有远程调试器
*   不支持解决方案中的文件夹，但可以访问文件夹中的项目，它们只会显示在解决方案的根目录中，而不是文件夹中。

想了想，还有更多的限制，但你可能不会害怕，Express 会打开你的解决方案。

# php - 在多个域上模块化使用页面

> ID：12542202
> 
> 赞同：0
> 
> 时间：2012-09-22T08:36:36.147
> 
> 标签：php, javascript

我正在寻找最好的方法来做到这一点.. 基本上我在同一台服务器上托管了多个域。每个域都会有一个在它们之间都相同的页面。我希望它是模块化的，因为如果我在一个地方更改它，它将在所有地方都被更改。做这个的最好方式是什么？顺便说一句，我的网站是使用 PHP 和 Javascript 构建的。

谢谢

（我的想法是将页面列在一个主站点上，然后让所有其他站点都“包含”它？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:41:10.243

如果我理解你，你希望有 n 个域名重定向到你复制的同一个代码库。

如果是这种情况，那么处理此问题的最佳方法是使用虚拟主机。在apache中它会这样

```
<VirtualHost *:80>
  ServerName example1.com
  ServerAlias www.example1.com
  ServerAlias example2.com
  ServerAlias www.example2.com
  ApplicationRoot /home/myWebSite
</VirtualHost> 
```

这样做的目的是创建一个 Apache 虚拟主机，该主机提供包含在`/home/myWebSite`所有 DNS 中的代码，`ServerAlias`以及`ServerName`.

这是迄今为止最干净的方法，通过这样做，每个 DNS 都将保留在 url 中，没有重定向。

# php - 尝试在核心 php 中下载文件并获取无效文件作为响应

> ID：12542203
> 
> 赞同：0
> 
> 时间：2012-09-22T08:36:45.967
> 
> 标签：php, core

我下载了一个文件，但它给出了无效的文件作为回报。

这是我的`download_content.php`

```
<?php    
  $filename = $_GET["filename"]; 

    $buffer = file_get_contents($filename);

    /* Force download dialog... */
    header("Content-Type: application/force-download");
    header("Content-Type: application/octet-stream");
    header("Content-Type: application/download");

    /* Don't allow caching... */
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");

    /* Set data type, size and filename */
    header("Content-Type: application/octet-stream");
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: " . strlen($buffer));
    header("Content-Disposition: attachment; filename=$filename");

    /* Send our file... */
   echo $buffer; 
?> 
```

下载文件链接：

```
<a href="download_content.php?filename=/gallery/downloads/poster/large/'.$r['file'].'"> Download</a> 
```

`$r['file']`包含要下载的文件名。

包含该文件的文件夹的完整路径是：

```
localhost/ja/gallery/downloads/poster/large/'.$r['file'].' 
```

`ja`是中的根文件夹`htdocs`。

我不知道实际问题是什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:05:16.110

正如在另一个问题中所说，这种方式看起来更好：

```
$filename = $_GET["filename"];
// Validate the filename (You so don't want people to be able to download
// EVERYTHING from your site...)

// For example let's say that you hold all your files in a "download" directory
// in your website root, with an .htaccess to deny direct download of files.
// Then:

$filename = './download' . ($basename = basename($filename));

if (!file_exists($filename))
{
    header('HTTP/1.0 404 Not Found');
    die();
}
// A check of filemtime and IMS/304 management would be good here
// Google 'If-Modified-Since', 'If-None-Match', 'ETag' with 'PHP'

// Be sure to disable buffer management if needed
while (ob_get_level()) {
   ob_end_clean();
}

Header('Content-Type: application/download');
Header("Content-Disposition: attachment; filename=\"{$basename}\"");
header('Content-Transfer-Encoding: binary'); // Not really needed
Header('Content-Length: ' . filesize($filename));
Header('Cache-Control: must-revalidate, post-check=0, pre-check=0');

readfile($filename); 
```

也就是说，“无效文件”是什么意思？长度不好？零长度？文件名不好？MIME 类型错误？文件内容错误？眼下的一切，你的意思可能很清楚，但从我们的角度来看，这远非显而易见。

**更新**：显然找不到文件，这意味着`filename=`PHP 脚本的参数错误（指的是不存在的文件）。修改了上面的代码以允许一个目录包含所有文件，并从那里下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T07:40:03.993

```
 <?php
    header( "Content-Type: application/vnd.ms-excel" );
    header( "Content-disposition: attachment; filename=spreadsheet.xls" );

    // print your data here. note the following:
    // - cells/columns are separated by tabs ("\t")
    // - rows are separated by newlines ("\n")

    // for example:
    echo 'First Name' . "\t" . 'Last Name' . "\t" . 'Phone' . "\n";
    echo 'John' . "\t" . 'Doe' . "\t" . '555-5555' . "\n";
   ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T08:48:06.877

您的 $filename 变量包含整个路径，如下所示

```
 header("Content-Disposition: attachment; filename=$filename"); 
```

这样做

```
$newfilename = explode("/",$filename);
$newfilename = $newfilename[count($newfilename)-1];

$fsize = filesize($filename);

Then pass new variable into header

header("Content-Disposition: attachment; filename=".$newfilename);
header("Content-length: $fsize");

//newline added as below
ob_clean();
flush();
readfile($filename); 
```

# asp.net-mvc - 每个域实体的用户角色关联

> ID：12542205
> 
> 赞同：1
> 
> 时间：2012-09-22T08:37:07.697
> 
> 标签：asp.net-mvc, authorization

我的数据库中有以下结构：

> ```
> DomainEntities:
>  +EntityID
>  +Name
>  +ParentID
>  +...
> 
> Users:
>  +UserID
>  +Username
>  +...
> 
> Roles:
>  +RoleID
>  +Name
> 
> UserRolesAssociation:
>  +RoleID
>  +UserID
>  +EntityID 
> ```

所以我想使用 MVC 的内置授权属性来过滤我的控制器中由不同成员制作的操作。

如果 user1 对 entity1 或其下的任何实体执行删除操作，我能说什么，我可以查看他是否具有执行此操作的正确角色并相应地过滤操作。

解决该主题的最佳做法是什么？我应该创建自己的权限引擎来为我提供所需的答案，还是可以使用现有的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:54:49.693

> 解决该主题的最佳做法是什么？

自定义`[Authorize]`似乎是实现此逻辑的好地方。

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            // the use ris not authenticated or not authorized - no need to continue
            return false;
        }

        string username = httpContext.User.Identity.Name;
        // read the entity id that this user is attempting to manipulate
        string entityId = (string)httpContext.Request.RequestContext.RouteData.Values["id"] ?? httpContext.Request["id"];

        return IsAllowed(username, entityId);
    }

    private bool IsAllowed(string username, string entityId)
    {
        // You know what to do here - hit the database and check whether
        // the current user is the owner of the entity
        throw new NotImplementedException();
    }
} 
```

接着：

```
[HttpDelete]
[MyAuthorize]
public ActionResult Delete(int id)
{
    ...
} 
```

# php - 正则表达式，字母数字，少数特殊字符，没有其他

> ID：12542210
> 
> 赞同：1
> 
> 时间：2012-09-22T08:37:23.137
> 
> 标签：php, regex

首先请原谅我的英语语法。无论如何，我正在尝试创建一个包含字母数字字符的正则表达式，包括空格、逗号、句号、感叹号和问号，但不允许使用其他字符和符号。

这个正则表达式会起作用吗？

```
'/[^a-zA-Z\s,!?]$' 
```

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:48:46.810

试试这个`/^[a-zA-Z0-9\s\.,!?]*$/`

# android - 实时编辑后如何在android EditText中格式化数字

> ID：12542211
> 
> 赞同：6
> 
> 时间：2012-09-22T08:37:23.027
> 
> 标签：android, android-edittext, number-formatting

我有一个 EditText，用户应该在其中输入一个包含小数的数字，我希望在输入数字上自动添加一个千位分隔符我尝试了其他几种方法，但有些方法不允许浮点数，所以我想出了这个有效的代码只是字符串输入没有被实时编辑为一个可能有千位分隔符的字符串，并且错误似乎源于 s.replace();

```
 am2 = new TextWatcher(){
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }
    public void onTextChanged(CharSequence s, int start, int before, int count) {}
    public void afterTextChanged(Editable s) {
        if (s.toString().equals("")) {
            amount.setText("");
            value = 0;
        }else{
            StringBuffer strBuff = new StringBuffer();
            char c;
            for (int i = 0; i < amount2.getText().toString().length() ; i++) {
                c = amount2.getText().toString().charAt(i);
                if (Character.isDigit(c)) {
                    strBuff.append(c);
                }
            }
            value = Double.parseDouble(strBuff.toString());
            reverse();
            NumberFormat nf2 = NumberFormat.getInstance(Locale.ENGLISH);
            ((DecimalFormat)nf2).applyPattern("###,###.#######");
            s.replace(0, s.length(), nf2.format(value));
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-22T18:07:18.013

这个类解决了这个问题，允许十进制输入并添加千位分隔符。

```
 public class NumberTextWatcher implements TextWatcher {

    private DecimalFormat df;
    private DecimalFormat dfnd;
    private boolean hasFractionalPart;

    private EditText et;

    public NumberTextWatcher(EditText et)
    {
        df = new DecimalFormat("#,###.##");
        df.setDecimalSeparatorAlwaysShown(true);
        dfnd = new DecimalFormat("#,###");
        this.et = et;
        hasFractionalPart = false;
    }

    @SuppressWarnings("unused")
    private static final String TAG = "NumberTextWatcher";

    public void afterTextChanged(Editable s)
    {
        et.removeTextChangedListener(this);

        try {
            int inilen, endlen;
            inilen = et.getText().length();

            String v = s.toString().replace(String.valueOf(df.getDecimalFormatSymbols().getGroupingSeparator()), "");
            Number n = df.parse(v);
            int cp = et.getSelectionStart();
            if (hasFractionalPart) {
                et.setText(df.format(n));
            } else {
                et.setText(dfnd.format(n));
            }
            endlen = et.getText().length();
            int sel = (cp + (endlen - inilen));
            if (sel > 0 && sel <= et.getText().length()) {
                et.setSelection(sel);
            } else {
                // place cursor at the end?
                et.setSelection(et.getText().length() - 1);
            }
        } catch (NumberFormatException nfe) {
            // do nothing?
        } catch (ParseException e) {
            // do nothing?
        }

        et.addTextChangedListener(this);
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after)
    {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count)
    {
        if (s.toString().contains(String.valueOf(df.getDecimalFormatSymbols().getDecimalSeparator())))
        {
            hasFractionalPart = true;
        } else {
            hasFractionalPart = false;
        }
    }

} 
```

来源：[http ://blog.roshka.com/2012/08/android-edittext-with-number-format.html](http://blog.roshka.com/2012/08/android-edittext-with-number-format.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-06T20:33:25.597

不幸的是，代码没有像答案那样工作。

它有两个问题：

1.  如果电话区域设置配置使用“，”作为小数分隔符，则它不起作用。
2.  如果数字在小数部分有尾随零，则它不起作用。示例 1.01。

我疯狂地修复它。最后，我找到了在我的手机上运行良好的代码：

**NumberTextWatcher.java**

```
import android.text.Editable;
import android.text.TextWatcher;
import android.text.method.DigitsKeyListener;
import android.util.Log;
import android.widget.EditText;

import java.math.RoundingMode;
import java.text.DecimalFormat;
import java.text.DecimalFormatSymbols;
import java.text.ParseException;
import java.util.Locale;

public class NumberTextWatcher
        implements TextWatcher {

    private static final String TAG = "NumberTextWatcher";

    private final int numDecimals;
    private String groupingSep;
    private String decimalSep;
    private boolean nonUsFormat;
    private DecimalFormat df;
    private DecimalFormat dfnd;
    private boolean hasFractionalPart;

    private EditText et;
    private String value;

    private String replicate(char ch, int n) {
        return new String(new char[n]).replace("\0", "" + ch);
    }

    public NumberTextWatcher(EditText et, Locale locale, int numDecimals) {

        et.setKeyListener(DigitsKeyListener.getInstance("0123456789.,"));
        this.numDecimals = numDecimals;
        DecimalFormatSymbols symbols = new DecimalFormatSymbols(locale);

        char gs = symbols.getGroupingSeparator();
        char ds = symbols.getDecimalSeparator();
        groupingSep = String.valueOf(gs);
        decimalSep = String.valueOf(ds);

        String patternInt = "#,###";
        dfnd = new DecimalFormat(patternInt, symbols);

        String patternDec = patternInt + "." + replicate('#', numDecimals);
        df = new DecimalFormat(patternDec, symbols);
        df.setDecimalSeparatorAlwaysShown(true);
        df.setRoundingMode(RoundingMode.DOWN);

        this.et = et;
        hasFractionalPart = false;

        nonUsFormat = !decimalSep.equals(".");
        value = null;

    }

    @Override
    public void afterTextChanged(Editable s) {
        Log.d(TAG, "afterTextChanged");
        et.removeTextChangedListener(this);

        try {
            int inilen, endlen;
            inilen = et.getText().length();

            String v = value.replace(groupingSep, "");

            Number n = df.parse(v);

            int cp = et.getSelectionStart();
            if (hasFractionalPart) {
                int decPos = v.indexOf(decimalSep) + 1;
                int decLen = v.length() - decPos;
                if (decLen > numDecimals) {
                    v = v.substring(0, decPos + numDecimals);
                }
                int trz = countTrailingZeros(v);

                StringBuilder fmt = new StringBuilder(df.format(n));
                while (trz-- > 0) {
                    fmt.append("0");
                }
                et.setText(fmt.toString());
            } else {
                et.setText(dfnd.format(n));
            }

            endlen = et.getText().length();
            int sel = (cp + (endlen - inilen));
            if (sel > 0 && sel <= et.getText().length()) {
                et.setSelection(sel);
            } else {
                // place cursor at the end?
                et.setSelection(et.getText().length() - 1);
            }

        } catch (NumberFormatException | ParseException nfe) {
            // do nothing?
        }

        et.addTextChangedListener(this);
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        Log.d(TAG, "beforeTextChanged");
        value = et.getText().toString();
    }

    private int countTrailingZeros(String str) {
        int count = 0;

        for (int i = str.length() - 1; i >= 0; i--) {
            char ch = str.charAt(i);
            if ('0' == ch) {
                count++;
            } else {
                break;
            }
        }
        return count;
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        Log.d(TAG, "onTextChanged");

        String newValue = s.toString();
        String change = newValue.substring(start, start + count);
        String prefix = value.substring(0, start);
        String suffix = value.substring(start + before);

        if (".".equals(change) && nonUsFormat) {
            change = decimalSep;
        }

        value = prefix + change + suffix;
        hasFractionalPart = value.contains(decimalSep);

        Log.d(TAG, "VALUE: " + value);

    }

} 
```

然后简单地使用它来做：

```
 Locale locale = new Locale("es", "AR"); // For example Argentina
    int numDecs = 2; // Let's use 2 decimals
    TextWatcher tw = new NumberTextWatcher(myEditText, locale, numDecs);
    myEditText.addTextChangedListener(tw); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T08:44:13.573

您需要将`DecimalFormat`类与`DecimalFormatSymbols`类一起使用，请查看以下方法，

```
public static String formatAmount(int num) 
{
    DecimalFormat decimalFormat = new DecimalFormat();
    DecimalFormatSymbols decimalFormateSymbol = new DecimalFormatSymbols();
    decimalFormateSymbol.setGroupingSeparator(',');
    decimalFormat.setDecimalFormatSymbols(decimalFormateSymbol);
    return decimalFormat.format(num);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-02T10:17:48.350

您可以像这样使用 kotlin 扩展功能...

```
fun EditText.onCommaChange(input: (String) -> Unit) {
this.addTextChangedListener(object : TextWatcher {
    override fun afterTextChanged(s: Editable?) {
        if (!edit) {
            edit = true
            if (s.toString() != "₹") {
                try {
                    val flNumber = getCommaLessNumber(s.toString()).toInt()
                    val fNumber = getFormattedAmount(flNumber)
                    setText(fNumber)
                    setSelection(text.length)
                    input(flNumber.toString())
                } catch (e: NumberFormatException) {
                    Timber.e(e)
                }
            } else {
                setText("")
                input("")
            }
            edit = false
        }
    }

    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}

    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {}
})}

fun getCommaLessNumber(commaNumber: String): String {
var number = commaNumber.replace("₹", "")
number = number.replace(",".toRegex(), "")
return number}

fun getFormattedAmount(amount: Int): String {
return "₹${String.format("%,d", amount)}"}

fun EditText.text() = this.text.toString() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-17T09:12:40.010

```
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;
import java.text.DecimalFormat;
public class MyNumberWatcher_3Digit implements TextWatcher {
    private EditText editText;
    private int digit;

    public MyNumberWatcher_3Digit(EditText editText) {
        this.editText = editText;

    }

    @Override
    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

    }

    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

    }

    @Override
    public void afterTextChanged(Editable editable) {
        editText.removeTextChangedListener( this );

        String s = editText.getText().toString();
        s = s.replace( ",", "" ).replace( "٬", "" );
        s = replaceNonstandardDigits( s );
        if (s.length() > 0) {
            DecimalFormat sdd = new DecimalFormat( "#,###" );
            Double doubleNumber = Double.parseDouble( s );

            String format = sdd.format( doubleNumber );
            editText.setText( format );
            editText.setSelection( format.length() );

        }
        editText.addTextChangedListener( this );
    }

    static String replaceNonstandardDigits(String input) {
        if (input == null || input.isEmpty()) {
            return input;
        }
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < input.length(); i++) {
            char ch = input.charAt( i );
            if (isNonstandardDigit( ch )) {
                int numericValue = Character.getNumericValue( ch );
                if (numericValue >= 0) {
                    builder.append( numericValue );
                }
            } else {
                builder.append( ch );
            }
        }
        return builder.toString();
    }

    private static boolean isNonstandardDigit(char ch) {
        return Character.isDigit( ch ) && !(ch >= '0' && ch <= '9');
    }

} 
```

// 创建活动

```
 input_text_rate.addTextChangedListener(new MyNumberWatcher_3Digit(input_text_rate)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-29T16:20:01.367

**我在Kotlin**中使用这种方式进行**Dialog**：

```
val et = dialog.findViewById(R.id.etNumber) as EditText
et.addTextChangedListener(object : TextWatcher {
                override fun afterTextChanged(s: Editable) {

                    et.removeTextChangedListener(this)
                    forChanged(et)
                    et.addTextChangedListener(this)
                }

                override fun beforeTextChanged(
                    s: CharSequence,
                    start: Int,
                    count: Int,
                    after: Int
                ) {

                }

                override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {

                }
            }) 
```

然后写一个这样的方法：

```
private fun forChanged(alpha: EditText) {
        val string = alpha.text.toString()
        val dec = DecimalFormat("#,###")
        if (!TextUtils.isEmpty(string)) {
            val textWC = string.replace(",".toRegex(), "")
            val number = textWC.toDouble()
            alpha.setText(dec.format(number))
            alpha.setSelection(dec.format(number).length)
        }
    } 
```

# wpf - 反向双向多重绑定

> ID：12542212
> 
> 赞同：0
> 
> 时间：2012-09-22T08:37:48.093
> 
> 标签：wpf, binding, multibinding, two-way-binding

我试图将视图模型中的枚举属性表示为视图中的一组单选按钮。到目前为止，一切都很好; 我可以用两种方式表达[`MultiBinding`](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)：

> (rb1.IsChecked, rb2.IsChecked, rb3.IsChecked) <-> vm.Value

这里使用的多重绑定将具有一个多重转换器，可以在`(bool, bool, bool) <-> MyValue`;之间进行转换。显然，类型的（三个）允许值之一是根据is`MyValue`来选择的，反之亦然。`bool``true`

不过，这已经有点不方便了：我无法在视图的 Xaml 中定义该绑定，因为必须从单个值的一侧定义多重绑定。因此，我必须在代码隐藏中定义多重绑定，并[`SetBinding`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.setbinding.aspx)在我的视图模型的`Value`属性上使用它。

现在，我遇到的问题是我不只是将一组单选按钮绑定到该值，而是两个。因此，我的绑定必须如下所示：

> (rbA1.IsChecked, rbA2.IsChecked, rbA3.IsChecked) <-> vm.Value <-> (rbB1.IsChecked, rbB2.IsChecked, rbB3.IsChecked)

**问题是我不能使用一次`SetBinding`连接多个绑定`vm.Value`。**

到目前为止我尝试过的解决方案是：

*   使用一个*大*的多重绑定，一次绑定到所有单选按钮。这将意味着表单的绑定`(rbA1.IsChecked, rbA2.IsChecked, rbA3.IsChecked, rbB1.IsChecked, rbB2.IsChecked, rbB3.IsChecked) <-> vm.Value`。该解决方案的问题在于，如果选中了一个单选按钮（例如`rbB2`），我无法判断`rbA2`（未选中）或`rbB2`（选中）是否具有“新的、正确的”值。
*   首先通过定义一个仅公开一个属性的*单选组*控件来抽象单选按钮组。`SelectedIndex`然后可以方便地从我的*无线电组*控件`vm.Value`的所有实例将此属性绑定到我的属性。虽然可行，但它需要编写一个新的控件类，我想知道这是否是 WPF 中的唯一方法。
**   将一组单选按钮绑定到另一组：通过双向绑定`rbB1`to `rbA1`、`rbB2`to`rbA2`等，并且`vm.Value`仅在 my 和第一组单选按钮之间使用多重绑定，我会达到预期的效果，但我不喜欢拥有“主广播组”的概念。它将滥用 GUI 元素进行数据传输。*   在代码隐藏中执行所有操作并手动更新单选按钮和视图模型值。当然这是一个可行的后备解决方案，但这*感觉*在 Xaml/with 绑定中应该是可行的。*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:34:39.983

将 VMEnum 单独绑定到每个 RadioButton（使用单个双向绑定）。每个绑定都应该有 CommandParameter 它是枚举。喜欢：

```
<RadioButton IsChecked="{Binding VMEnum, Converter={StaticResource EnumConverter}, ConverterParameter={Enums:VMEnums.FirstRadioButtonGroupA}}" /> 
```

在转换器中，

*   Convert 应该根据 VMEnum 和 COMmandParameter 返回正确的值（真/假）。本质上，逻辑是 VMEnum == (YourEnum)CommandParameter。
*   ConvertBack 应该根据 IsChecked 返回正确的枚举。如果 IsChecked 为真，则返回正确的枚举。否则返回 Binding.DoNothing ，这将中止该特定情况的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:42:17.750

将复杂的多重绑定与转换器和代码隐藏一起使用不仅会使您的代码更难调试，而且更难测试。在我看来，最好将每组单选按钮（标志）表示为视图模型。在选中/取消选中任何单选按钮时评估您的值。

**单选按钮组**

```
public class RadioButtonGroup : ViewModel {

    public RadioButtonGroup(string groupName, int count, Action<bool[]> whenAnyChanaged = null) {

        RadioButtons = Enumerable.Range(0, count).Select(_ => {
            var button = new RadioButton { GroupName = groupName };
            button.PropertyChanged += (s, e) => {
                if (e.PropertyName == "IsChecked")
                    whenAnyChanaged(Flags);
            };
            return button;
        }).ToList();           
    }

    public List<RadioButton> RadioButtons { get; private set; }

    public bool[] Flags { get { return RadioButtons.Select(rb => rb.IsChecked).ToArray(); } }
} 
```

**单选按钮**

```
 public class RadioButton : ViewModel {

    private bool isChecked;

    public bool IsChecked {
        get { return isChecked; }
        set { SetProperty(ref this.isChecked, value); }
    }

    public string GroupName { get; set; }
} 
```

**主视图模型**

```
public class MainViewModel : ViewModel {
    public MainViewModel() {
        GroupA = new RadioButtonGroup("A", 10, flags => GroupToggle(flags, GroupB.Flags));
        GroupB = new RadioButtonGroup("B", 10, flags => GroupToggle(GroupA.Flags, flags));
    }

    public RadioButtonGroup GroupA { get; private set; }

    public RadioButtonGroup GroupB { get; private set; }

    void GroupToggle(bool[] groupA, bool[] groupB) {
        MyValue = Evaluate(groupA, groupB);
    }
} 
```

**看法**

```
<Window x:Class="WpfLab.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="{Binding Title}" Height="350" Width="525">
<Window.Resources>
    <DataTemplate x:Key="RadioButton">
        <RadioButton IsChecked="{Binding IsChecked, Mode=OneWayToSource}" GroupName="{Binding GroupName}"/>
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="30"/>
        <RowDefinition Height="30"/>
    </Grid.RowDefinitions>

    <ListBox Grid.Row="0" ItemsSource="{Binding GroupA.RadioButtons}" ItemTemplate="{StaticResource ResourceKey=RadioButton}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>

    <ListBox Grid.Row="1" ItemsSource="{Binding GroupB.RadioButtons}" ItemTemplate="{StaticResource ResourceKey=RadioButton}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>
</Grid> 
```*

# html - 当内容需要滚动时内容会发生变化

> ID：12542214
> 
> 赞同：1
> 
> 时间：2012-09-22T08:38:05.620
> 
> 标签：html, css

当制作一个不需要滚动的网站时，内容是居中的。我已将所有页面内容放在一个 div 中：#Pagecontent，它的边距设置为自动，因此屏幕的宽度无关紧要 - 内容始终位于中心。

但是，当页面因为内容的长度而需要滚动时，页面上的所有内容都会轻微移动。我怎么能防止这种情况，因为我觉得这很烦人。

希望这是一个好的问题。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:03:44.177

您可以通过 css 一直显示溢出， `overflow:scroll`因此页面不会在滚动条上移动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:42:02.370

HTML with`overflow: scroll`将强制页面始终显示滚动条，无论它是否需要。

```
html{
   overflow:scroll;//for both vertical and horizontal 
   /*  overflow-y: scroll; // for only horizontal 
       overflow-x: scroll;  // for only vertical  */
} 
```

但是您无法阻止滚动条出现在任何正常站点上，因为它 100% 取决于访问者的屏幕分辨率和/或是否偏好最大化窗口。

防止滚动条移动页面内容的唯一方法是通过 javascript 禁用它们，这可能会使某些访问者无法访问您的某些页面

好读：[如何防止滚动条重新定位网页？](https://stackoverflow.com/questions/1417934/how-to-prevent-scrollbar-from-repositioning-web-page)

# php - PHP顺序foreach

> ID：12542215
> 
> 赞同：-1
> 
> 时间：2012-09-22T08:38:10.657
> 
> 标签：php, foreach, sequential

伙计们，我有一个这样的数组：

```
 array(3) {
    [2]=>
    array(1) {
      ["name"]=>
      array(2) {
        [0]=>
        string(13) "row1"
        [1]=>
        string(13) "row3"
      }
    }
    [5]=>
    array(1) {
      ["name"]=>
      array(2) {
        [0]=>
        string(15) "row1"
        [1]=>
        string(15) "row3"
      }
    }
    [3]=>
    array(1) {
      ["name"]=>
      array(2) {
        [0]=>
        string(13) "row1"
        [1]=>
        string(13) "row3"
      }
    } 
```

我想要实现的是让 foreach 循环 0 个元素（row1），然后循环 1（row3）并像这样继续。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:51:13.947

您可以尝试重建阵列：

```
$rows = array();
foreach($array as $subarray) 
  foreach($subarray as $key => $value)  
    $rows[$key][] = $value; 
```

此时，数组中的所有相同子元素都在一个新数组中，现在您可以轻松地循环遍历子元素：

```
 foreach($rows as $key => $value)  
    echo 'processing row: ' . $key ' with value ' . $value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:10:37.210

我找到了解决这个问题的不同方法，JvdBeg 解决方案效果很好，但是如果有人陷入类似的情况，我就是这样做的： $key = key($arr); $keys = array_keys($arr);

```
 for ($i=0;$i<sizeof($arr[$key]['index']);$i++) {
      for($k=0;$k<sizeof($arr);$k++) {
        $key = $keys[$k];
        echo "\n";
      }
    } 
```

# caching - 缓存 rtmp 流

> ID：12542216
> 
> 赞同：1
> 
> 时间：2012-09-22T08:38:33.600
> 
> 标签：caching, rtmp, squid

有没有办法缓存 rtmp 流？通常 squid 会成功缓存基于 http 的视频。rtmp呢？你知道其他工具吗？

关于 rtmp：[http ://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol](http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)

谢谢，

# php - 没有数组的php中python的输出

> ID：12542220
> 
> 赞同：-2
> 
> 时间：2012-09-22T08:40:02.187
> 
> 标签：php

我努力了

```
$output = null;
exec('python hyp.py' $output);
echo var_export($output, TRUE); 
```

和

```
var_dump($output); 
```

两者都工作得很好。我得到的输出是

```
array(0 => 'first line output', 1 => 'second line output',) 
```

我需要一种输出python文件的方法，而不需要在每行输出之间显示数组和箭头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:46:04.020

您可以操作数组 - 或者只[使用正确的函数](http://php.net/manual/en/function.shell-exec.php)：

```
$completeOutputAsString = shell_exec('python hyp.py'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:45:16.907

您必须遍历输出数组，然后回显每一行：

```
$output = null;
exec('python hyp.py' $output);

if($output)
  foreach($output as $line)
    echo $line; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T08:45:09.093

怎么样而不是转储变量，你只需使用循环遍历它[`foreach()`](http://php.net/manual/en/control-structures.foreach.php)：

```
foreach ($output as $value) {
    echo $value . "<br />";
} 
```

或者用数组/值做你想做的事。这只是一个例子。

# twitter-bootstrap - 自定义引导程序未在平板电脑中显示响应行为

> ID：12542223
> 
> 赞同：0
> 
> 时间：2012-09-22T08:40:14.353
> 
> 标签：twitter-bootstrap, drupal-7, responsive-design, drupal-themes

我使用**定制的 twitter 引导框架**来为 Drupal 站点设置主题。它给了我两个文件

```
bootstrap.css 

bootstrap.min.css. 
```

当我上传简单​​主题（不是 Drupal）时，它在 tablet 中显示响应行为。我将相同的主题转换为 Drupal，当我调整计算机中浏览器的大小时，drupal 站点会显示响应行为。但是当我在平板电脑上访问该网站时，它是一个普通网站，而不是一个响应式网站。

这是 theme.info 中 css 文件的层次结构。

```
stylesheets[all][] = css/bootstrap.css

stylesheets[all][] = css/bootstrap.min.css

stylesheets[all][] = css/custom.css 
```

我哪里错了？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T15:12:43.653

首先，您不必同时包含这两个文件。

其次，您必须使用一些类来使行为响应。据我所知，没有引导响应文件（专用文件），因为引导本身支持响应。

例如，如果您想让表格具有响应性，请使用 class="table-responsive" 和其他类。如果你想让按钮响应使用 class=" col-lg-* col-md-* col-sm-* col-xs-*" 其中 * 代表从 1 到 12 的数字范围。这称为网格系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:51:38.370

您不包括响应式样式表，您只包括主引导样式表（`bootstrap.css`用于开发）和缩小版本（`bootstrap.min.css`用于生产的用户）。只需删除`bootstrap.css`样式表并在[`bootstrap-responsive.css`](http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css).

# google-apps-script - 谷歌应用脚 本+缓存或每天运行一次脚本

> ID：12542224
> 
> 赞同：0
> 
> 时间：2012-09-22T08:40:30.970
> 
> 标签：google-apps-script, google-sheets

我在一个脚本中有一个函数（比方说叫做 f1），它需要太多时间来运行（在电子表格中，它使用 setformula transpose importrange 和 query.. 大约需要 2 分钟才能运行）。

F1 用于合并 2 个电子表格，并使用 . 在第二个电子表格的某些列中设置结果`setformula()`。

我安排此功能在夜间运行（使用触发器），但每次有人打开它时，该功能都会再次重新运行（处理相同的数据）。我尝试放置一个 void onload() 函数，但即使我没有调用它，f1 也会运行。

有没有办法每天运行一次函数，而不是在人们打开电子表格时运行？
有没有办法将结果缓存一整天..直到函数重新按计划运行？
或者有没有办法将整个电子表格的值（不是单元格中包含的公式）复制到另一个（我在文档中没有找到）？
或者，还有其他解决方法吗？

感谢帮助

洛伊克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:37:28.410

如果您的函数被称为公式，则每次有人打开电子表格时都会重新计算它，在其他一些情况下也会重新计算。

正如您所建议的，您可以做的是缓存数据并立即返回缓存的数据。这些线上的东西。

```
var ONE_DAY = 24 * 60 * 60 * 1000;

function f1(parameters, force){
  var returnVal = CacheService.getPrivateCache().get('somevariablename'); 
  if (force == true || returnVal == null) {
    /* Do your long drawn calculation here */
    CacheService.getPrivateCache.put('somevariablename, value, ONE_DAY);
  }
  else {
    return returnVal;
  }
} 
```

并在您的电子表格中调用您的函数

```
 =f1(parameters, false) 
```

# sql - 在 SQL Server 2008 中使用日期函数

> ID：12542227
> 
> 赞同：1
> 
> 时间：2012-09-22T08:40:46.400
> 
> 标签：sql, sql-server-2008, sql-date-functions

我需要结果，如果`end_dt`小于一个月的 15 号，它应该考虑上个月的日期

例如 - 如果`end_dt`比`08-May-2011`它应该考虑`30-APR-2011`

我使用了以下代码，但有没有更好的方法

```
select
    id, 
    start_dt, 
    end_dt,
    End_mth = 
        case
            when end_dt<=DATEADD(YY,(DATEPART(yy,end_dt))-1900,0) + DATEADD(MM,(DATEPART(MM,end_dt))-1,0)+ 15 then month(DATEADD (mm,-1,end_dt))
            else month(isnull(end_dt,'31-Mar-2012'))
        end
from 
    sd_table 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:47:40.003

> 如果 end_dt 小于一个月的 15 日，则应考虑上个月的日期，例如 - 如果 end_dt 为 2011 年 5 月 8 日，则应将其视为 2011 年 4 月 30 日

以下将解决这个问题：

```
SELECT
    id, 
    start_dt, 
    end_dt,
    CASE
        WHEN DATEPART(dd, end_dt) < 15 THEN DATEADD(dd, -1 * DATEPART(dd, end_dt), end_dt)
        ELSE end_dt
    END as End_mth
from 
    sd_table 
```

# c# - 模板之间的区别

> ID：12542229
> 
> 赞同：8
> 
> 时间：2012-09-22T08:41:07.903
> 
> 标签：c#, wpf, datatemplate, controltemplate, itemtemplate

和有什么区别

*   控制模板
*   数据模板
*   分层数据模板
*   项目模板

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-22T04:56:18.827

# 控制模板

ControlTemplate 指定控件的视觉结构和视觉行为。您可以通过给它一个新的 ControlTemplate 来自定义控件的外观。创建 ControlTemplate 时，您替换现有控件的外观而不更改其功能。例如，您可以将应用程序中的按钮设为圆形而不是默认的方形，但按钮仍会引发 Click 事件。

ControlTemplate 的一个例子是

**创建一个按钮**

```
<Button Style="{StaticResource newTemplate}" 
        Background="Navy" 
        Foreground="White" 
        FontSize="14"
        Content="Button1"/> 
```

**按钮的 ControlTemplate**

```
<Style TargetType="Button" x:Key="newTemplate"> 
      <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border x:Name="RootElement">
                <!--Create the SolidColorBrush for the Background 
                as an object elemment and give it a name so 
                it can be referred to elsewhere in the control template.-->
                    <Border.Background>
                        <SolidColorBrush x:Name="BorderBrush" Color="Black"/>
                    </Border.Background>
                    <!--Create a border that has a different color by adding smaller grid.
                    The background of this grid is specificied by the button's Background
                    property.-->
                    <Grid Margin="4" Background="{TemplateBinding Background}">
                    <!--Use a ContentPresenter to display the Content of
                    the Button.-->
                        <ContentPresenter
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                        Margin="4,5,4,4" />
                    </Grid>
                </Border>
            </ControlTemplate>      
        </Setter.Value>
    </Setter>
</Style> 
```

更多关于[ControlTemplate](https://msdn.microsoft.com/en-us/library/cc189093(VS.95).aspx)

# 数据模板

数据模板是与控制模板类似的概念。它们为您提供了一个非常灵活且功能强大的解决方案，用于替换 ListBox、ComboBox 或 ListView 等控件中数据项的视觉外观。WPF 控件具有支持自定义数据表示的内置功能。

DataTemplate 的一个例子是

```
<!-- Without DataTemplate -->
<ListBox ItemsSource="{Binding}" /> 

<!-- With DataTemplate -->
<ListBox ItemsSource="{Binding}" BorderBrush="Transparent" 
         Grid.IsSharedSizeScope="True"
         HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid Margin="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Key" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Name}" FontWeight="Bold"  />
                <TextBox Grid.Column="1" Text="{Binding Value }" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

有关[数据模板和触发器的更多信息](http://www.codeproject.com/Articles/18303/A-Guided-Tour-of-WPF-Part-Data-templates-and-tri)

# 项目模板

您使用 ItemTemplate 来指定数据对象的可视化。如果您的 ItemsControl 绑定到集合对象，并且您没有使用 DataTemplate 提供特定的显示指令，则每个项目的结果 UI 都是基础集合中每个对象的字符串表示形式。

项目模板的一个例子是

```
<ListBox Margin="10" Name="lvDataBinding">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <WrapPanel>
                <TextBlock Text="Name: " />
                <TextBlock Text="{Binding Name}" FontWeight="Bold" />
                <TextBlock Text=", " />
                <TextBlock Text="Age: " />
                <TextBlock Text="{Binding Age}" FontWeight="Bold" />
                <TextBlock Text=" (" />
                <TextBlock Text="{Binding Mail}" TextDecorations="Underline" Foreground="Blue" Cursor="Hand" />
                <TextBlock Text=")" />
            </WrapPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

在 ItemsControl 上设置 ItemTemplate 时，生成的 UI 如下（以 ListBox 为例）：

1.  在内容生成期间，ItemsPanel 向 ItemContainerGenerator 发起请求，为每个数据项创建一个容器。对于 ListBox，容器是 ListBoxItem。生成器回调 ItemsControl 以准备容器。

2.  部分准备工作涉及将 ListBox 的 ItemTemplate 复制为 ListBoxItem 的 ContentTemplate。

3.  与所有 ContentControl 类型类似，ListBoxItem 的 ControlTemplate 包含一个 ContentPresenter。应用模板时，它会创建一个 ContentPresenter，其 ContentTemplate 绑定到 ListBoxItem 的 ContentTemplate。

4.  最后，ContentPresenter 将 ContentTemplate 应用到自身，并创建 UI。

如果定义了多个 DataTemplate，并且想要提供逻辑以编程方式选择和应用 DataTemplate，请使用 ItemTemplateSelector 属性。

ItemsControl 为可视化定制提供了极大的灵活性，并提供了许多样式和模板属性。使用 ItemContainerStyle 属性或 ItemContainerStyleSelector 属性设置样式以影响包含数据项的元素的外观。例如，对于 ListBox，生成的容器是 ListBoxItem 控件；对于 ComboBox，它们是 ComboBoxItem 控件。要影响项目的布局，请使用 ItemsPanel 属性。如果您在控件上使用分组，则可以使用 GroupStyle 或 GroupStyleSelector 属性。

有关详细信息，请参阅[数据模板概述。](https://msdn.microsoft.com/en-us/library/ms742521(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:42:10.357

1.  ControlTemplaes 定义控件的“外观”和“行为”。默认情况下，按钮是矩形的。默认情况下，ListBox 具有白色背景。这些都是由 Control 的 ControlTemple 定义的。

2.  DataTemplae 通过它所拥有的数据布局来帮助控件。如果将用户列表添加到列表框中，并且您希望 UserName 出现在 UserPassword 之前，那么您将在 DataTemples 中定义它。DataTemples 分配给 ListBox 的 ItemTemplate (4) 属性。

3.  HierarchalDataTemplte 与 DataTemples 相同，只是它处理层次数据源。它通常与 TreeView 控件一起使用。

# c++ - Visual Studio 2010 的模板问题

> ID：12542232
> 
> 赞同：2
> 
> 时间：2012-09-22T08:41:14.853
> 
> 标签：c++, visual-studio-2010, templates

使用 Linux 中的 GCC，以下代码可以很好地编译。但是使用 Visual Studio，会出现错误 C2893。你有什么想法 ？

```
struct A
{
};
struct B
{
    typedef A Data;
};
struct C
{
    typedef B Data;
};
template<typename Type>
typename Type::Data::Data  test( Type in)
{
    return Type::Data::Data();
}

int main(){
    C c;
    C::Data::Data a;//works
    test(c);//error C2893: The specialization of the function template 'Type :: Data :: {ctor} test (Type)' failed
} 
```

非常感谢

Avakar 的解决方案：因为 Data::Data 引用了 Data 类型的构造函数，所以你必须使用这个成语：

```
typename identity<typename Type::Data>::type::Data 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T08:44:48.973

编译器未能专门化函数模板。此错误可能有多种原因。通常，解决 C2893 错误的方法是查看函数的签名并确保您可以实例化每种类型。

# facebook - asp.net webforms - 页面选项卡上的 facebook 服务器端身份验证

> ID：12542240
> 
> 赞同：0
> 
> 时间：2012-09-22T08:42:21.730
> 
> 标签：facebook, facebook-c#-sdk

我在从服务器端对用户进行身份验证方面苦苦挣扎了大约 2 天。使用 asp.net 4、c# web 表单并开始使用 C# SDK，为页面选项卡构建应用程序。我需要使用 Oauth 诊断对用户进行身份验证。如果我使用`Response.Redirect`，我会在选项卡上看到一个空白屏幕。根据[http://developers.facebook.com/docs/authentication/pagetab/](http://developers.facebook.com/docs/authentication/pagetab/) 我需要发送一个 JS 命令来更改 window.top.location 但我该怎么做呢？

我的登录网址： [https](https://www.facebook.com/dialog/oauth?client_id=482264391791260&redirect_uri=http://www.facebook.com/pages/null/153715871344670/?sk=app_482264391791260&response_type=code&display=popup&scope=email) ://www.facebook.com/dialog/oauth?client_id=482264391791260&redirect_uri=http://www.facebook.com/pages/null/153715871344670/?sk=app_482264391791260&response_type=code&display=popup&scope=email 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:40:56.587

> 我需要发送一个 JS 命令来更改 window.top.location 但我该怎么做呢？

标题为**2a 的部分。在您提到的同一页面上加载页面时重定向到 OAuth 对话框**有一个这样做的示例……</p>

那么你在完成它时到底有什么问题呢？

# c# - 如何设置网格/行列的边框/背景颜色

> ID：12542251
> 
> 赞同：0
> 
> 时间：2012-09-22T08:44:01.733
> 
> 标签：c#, windows-phone-7

我希望网格的每一行/单元格都具有独特的颜色，边框厚度和代码中的颜色比 XAML 还要好，我该怎么做。

```
<Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" BorderThickness="1" BorderBrush="White">
    <Border.Background>
        <LinearGradientBrush EndPoint="1,0" StartPoint="1,1">
            <GradientStop Color="LightGray" Offset="0" />
            <GradientStop Color="LightGray" Offset="1" />
        </LinearGradientBrush>
    </Border.Background>
    <TextBlock Foreground="Black"  Text="Account Number :"   Margin="10" Grid.ColumnSpan="2"  />
</Border> 
```

以上是 XAML 代码，对于我的 Grid Row，我正在尝试在 C# 代码中类似地执行此操作。如何将边框属性添加到行或单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:03:42.360

首先，您必须命名您的边界，假设您设置了`x:Name=myBorder`.

比在代码隐藏中你可以做的`Grid.SetRow(myBorder, 1);`：同样对于您设置的列：`Grid.SetColumn(myBorder, 1);`。

有关更多信息，您可以参考 msdn 文章：[如何：创建网格元素](http://msdn.microsoft.com/en-us/library/ms752271.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:09:51.323

我不知道这是否可以帮助你。我使用画布从 C# 代码中更改了行颜色，在将内容添加到网格之前，我在每隔一行添加了一个画布并更改了画布背景颜色，然后像往常一样添加了我的内容。问候。

# java - 在 Runnable 类中调用活动方法

> ID：12542258
> 
> 赞同：0
> 
> 时间：2012-09-22T08:44:43.150
> 
> 标签：java, android, class, runnable

在我的`Android`项目中，我有`Activity`Morseapp 和一个 Runnable 类 flash_code。现在我想通过 Activity 启动 runnable 以创建一个新线程并刷新代码。但是`Runnable`需要摩尔斯电码字符串和**ledon()/ledoff()**方法。所以我想定义根来调用字符串等。但在这一行，它崩溃并告诉我一些关于 a 的信息`Handler`- 但我没有处理程序.. 是否有可能获取字符串或方法？

**flash_code**

```
public class flash_code implements Runnable{

    public void run() {

         Morseapp root = new Morseapp();
                 Code = root.Code;
                 [...]

     }
} 
```

**Morseapp.start_flash()**

```
 public void start_flash() {
    if(!flash) {
        flash = true;
        EditText OutText = (EditText) findViewById(R.id.out_text);
        Code = OutText.getText().toString();
        Code = translate(Code, 2);
        t_flash.start();
    } else {
        flash = false;
        t_flash.interrupt();

    }
  } 
```

# java - 如何使用 Java 下载受保护的网页

> ID：12542266
> 
> 赞同：1
> 
> 时间：2012-09-22T08:45:47.743
> 
> 标签：java, security, download, automation, webpage

我们有一个任务，设计一个可以下载任何网页源代码的类。但是当我尝试测试我的代码并获取页面时`http://anidb.net/perl-bin/animedb.pl?show=main`- 没有任何工作。

像这样的标准代码失败：

```
import java.net.*;
import java.io.*;

public class URLReader {
    public static void main(String[] args) throws Exception {
        URL link = new URL("http://www.anidb.net/");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(link.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }
} 
```

这是我得到的结果：

```
&#352;wq>&#178;"¦§5&#180;_&#239;__&#199;U&#186;=&#244;&#217;&#246;?k&#352;}~“bd`?l“&amp;#207;&#231;z&#162;&#199;&#234;&#245;>_"?j&#215;‰R“y}K&#184;\&#204;c_DL&#217;&#170;&#207;_
    –&amp;#243;Mm_&#188;_0”•&amp;#246;°&#203;C_a&#237;&#189;s&#238;¤&#236;&#193;S ‚&gt;dC0&#236;s_–y&#185;&#241;±&#207;&#221;&#220;A&#248;%&#200;_&#228;&#214;&#225;__&#230;©A@,4x„&amp;#352;¶_&#235;&#201;&#402;? 
```

我已经尝试了一切：cookies、头文件，但似乎没有任何效果。如果您对我有一些提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T08:54:12.863

编写一个 http 客户端，您必须考虑 gzip 编码以及分块传输。最好使用库来下载网页。

尝试这样的事情： [http ://code.google.com/p/google-http-java-client/](http://code.google.com/p/google-http-java-client/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T09:00:40.180

您在问题中提到的网站似乎不尊重“接受”请求标头，也没有正确设置“内容编码”响应标头，我认为这是不正确的。

无论如何，您也可以使用`java.util.zip.GZipInputStream`以纯文本格式读取响应：

```
public static void main(String[] args) throws Exception
{
    URL link = new URL("http://www.anidb.net/");
    HttpURLConnection con = (HttpURLConnection) link.openConnection();

    GZIPInputStream in = new GZIPInputStream(con.getInputStream());
    byte[] b = new byte[1024];
    StringBuilder content = new StringBuilder();
    while (in.read(b) > 0)
    {
        content.append(new String(b));
    }
    System.out.println(content);
} 
```

# php - 在 $html = file_get_html(); 中使用变量

> ID：12542271
> 
> 赞同：-1
> 
> 时间：2012-09-22T08:46:18.503
> 
> 标签：php, parsing, variables, html-parsing

我不明白为什么变量在这里不起作用。这是代码：

```
include_once('../simple_html_dom.php');
$url = htmlentities($_GET['q']);
$urlall = str_replace(" ", "+", $url);
$html = file_get_html('http://www.example.com/some?key=$urlall&hl=en');
echo $html->plaintext; 
```

如果您查看此代码，您会发现`$urlall`我已在网址中应用的变量，但此变量无法提取其数据。作为一个新的 PHP 程序员无法理解现在该怎么做才能使它工作.. 在这里我使用了 HTML DOM PARSER..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:48:18.090

单引号内的字符串是文字，所以`$urlall`只是一个字符串，它不会被实际变量值替换。你想要做的是使用双引号：

```
$html = file_get_html("http://www.example.com/some?key=$urlall&hl=en"); 
```

有关进一步的解释，请参阅[PHP 字符串](http://php.net/manual/en/language.types.string.php)：

> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:48:20.490

尝试用双引号替换单引号：

```
"http://www.example.com/some?key=$urlall&hl=en" 
```

或使用字符串连接而不是直接将变量输入到字符串中：

```
'http://www.example.com/some?key='.$urlall.'&hl=en' 
```

第二种变体更优选。

我希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T08:51:28.123

PHP 变量不会被解析并用单引号替换。

尝试

```
$html = file_get_html("http://www.example.com/some?key=$urlall&hl=en"); 
```

# c# - Crystal 报表 ExportToDisk 消耗大量时间

> ID：12542272
> 
> 赞同：1
> 
> 时间：2012-09-22T08:46:35.790
> 
> 标签：c#, performance, crystal-reports

我在 C# 中有一个控制台应用程序，它适用于水晶报表。我正在使用以下方法加载报告（仅一次）：

```
 static ReportDocument cryReportDocument = new ReportDocument();

    static void Main(string[] args)
    {            
        cryReportDocument.Load("reportLocation");
        ....
        //I am exporting about 20.000 .pdf files
        while(true)
        {
            ....
            //destianationPath is file location 
            ExportToPdf(destinationPath)
        }
    } 
```

然后我使用以下方法将此报告导出为 pdf 文件：

```
 //Export pdf file
    static void ExportToPdf(string destianationPath)
    {                     
        cryReportDocument.SetDatabaseLogon("userName", "password", "Database", "");
        //Adding paremeters to report
        cryReportDocument.SetParameterValue(.., ..);    
        //This line consumes a lot of time now  
        cryReportDocument.ExportToDisk(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat, destianationPath);
    } 
```

我之前（大约两三天前）使用过这个程序来导出大约 15.000 个 .pdf 文件，并且效果很好。在大约不到一秒的时间内导出一个 .pdf 文件。我在代码中没有进行任何更改，但该行需要大约 5 秒来导出一个 .pdf 文件。这会导致什么？电脑也是一样的，我什么都没改。但它不能正常工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:53:13.127

可能是数据库速度慢吗？（应阿迪尔的要求）

* * *

附加信息（*希望你不介意*）：

ExportToDisk 方法使水晶实际执行数据库查询。在这种情况下，最好的测试是直接执行查询以查看需要多长时间。根据需要进行调整。

# iphone - 如何从分组部分 uitableview 添加/删除单元格？

> ID：12542276
> 
> 赞同：2
> 
> 时间：2012-09-22T08:46:45.363
> 
> 标签：iphone, ios, uitableview

如何以编程方式从分组部分中添加或删除单元格？

我使用情节提要中的静态单元格创建了一个分组的表格视图。在情节提要中，我使用 Attribute Inspector 面板设置了行数。例如，对于第 1 节，我定义了 3 行。然后使用 3 个项目的 NSMutableArray，我可以在启动时正确地将值加载到每个部分中。

我最终希望能够在运行时添加/删除单元格。该部分尚未编码，但为了模拟添加新单元格的场景，我在代码中的数组中添加了一个新项目，但没有增加“属性检查器”面板中该部分的行数。我曾希望我不需要进行任何其他更改来容纳新项目，因为在 numberOfRowsInSection 方法中，我正在返回特定部分的数组计数。

这是我重新运行代码时收到的错误消息：

*** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]”

显然我需要以某种方式指定额外的行数。谁能阐明我如何在运行时做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:59:03.000

你不应该通过属性检查器来做。它禁止您进行单元格的动态插入和删除。尝试

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [yourArray count];
} 
```

否则这样做。

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    if(section==0){
       return 3;
    }else if(section==1){
       return 4;
    }
 return 0;
} 
```

如果您有很多部分，则依此类推。..当您从中读取数据的数组更新时，您可以重新加载整个表..

```
[tableView reloadData]; 
```

但更好的方法是在一个块中插入一行或多行这样的行。

```
[tableView beginUpdates];
[tableView insertRowsAtIndexPaths:yourIndexPath withRowAnimation:UITableViewRowAnimationRight];
[tableView endUpdates]; 
```

您还可以添加动画以从右侧或 lect 或顶部或底部添加单元格。

我希望这可以帮助你！！干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:59:28.600

我猜你硬编码了你的部分的行数。因为查看错误，您的部分似乎需要 4 个对象，但您的数据源仅包含 3 个。

在你的内部：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

您应该返回类似 [myArray count] 的内容，因此如果您从数组中添加或删除对象，添加或删除行应该不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:59:34.393

您在 UITableview 中有用于插入和删除行的预定义方法，对于插入我们可以使用 insertRowAtIndexPath 方法，对于删除使用 deleteRowAtIndexPath 方法。

# php - Zend php 代码补全 netbeans 7.2

> ID：12542277
> 
> 赞同：1
> 
> 时间：2012-09-22T08:46:49.310
> 
> 标签：php, zend-framework, netbeans, code-completion

我非常想在 Netbeans 7.2 中使用 php Zend 框架的代码完成。我正在运行 Windows Zend CE 服务器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:58:41.833

首先，确保您安装了 Netbeans for PHP。( [http://netbeans.org/features/php/](http://netbeans.org/features/php/) )

创建新项目时（或在项目属性中），可以选择 Zend 库（和其他（Doctrine 等）。）进行代码完成和其他任务。

希望这可以帮助。

# javascript - 使用 Javascript 在 HTML 中加载 XML

> ID：12542280
> 
> 赞同：0
> 
> 时间：2012-09-22T08:47:24.027
> 
> 标签：javascript, xml-parsing

我正在尝试使用 xmlLoad 加载 XML 文件

```
<script LANGUAGE=JavaScript>
if (document.implementation && document.implementation.createDocument)
{

var xmlDoc= document.implementation.createDocument("","doc",null);  
xmlDoc.async=false;                   //make sure doc is fully loaded
loaded = xmlDoc.load("order.xml");

if(!loaded)
{ 
alert(“Error”);
}
else 
{
alert(xmlDoc.xml);
} 
} 
```

谁能告诉我这段代码有什么问题？以及如何检查我的代码是否已加载？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:54:36.997

三件事：

1.  不确定这是否是粘贴错误，但其中的引号`alert(“Error”);`需要是直引号。
2.  访问器`.xml`仅适用于 IE。您需要`new XMLSerializer().serializeToString(xmlDoc)`其他浏览器。
3.  对于odes不支持的IE `document.implementation.createDocument()`，可以有条件地使用`var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");`。

这适用于 IE 和 Firefox（在与此 HTML 文件相同的目录中具有格式良好的“order.xml”文件）：

```
var xmlDoc = document.implementation && document.implementation.createDocument ? 
                document.implementation.createDocument("","doc",null) :
                new ActiveXObject("Microsoft.XMLDOM");
xmlDoc.async = false; //make sure doc is fully loaded
loaded = xmlDoc.load("order.xml");
if (!loaded) { 
    alert("Error");
}
else {
    alert(xmlDoc.xml || new XMLSerializer().serializeToString(xmlDoc));
} 
```

# c# - “应用程序没有调用 WSAStartup，或者 WSAStartup 失败”是什么意思？

> ID：12542287
> 
> 赞同：2
> 
> 时间：2012-09-22T08:48:07.840
> 
> 标签：c#, sockets, networking, dongle, wsastartup

我正在尝试开发通过网络连接到网络服务器的软件；在尝试使用加密狗保护我的软件之前，一切正常。我的加密狗有一些网络功能，它的 API 在网络基础设施下工作。w当我将加密狗检查代码添加到我的程序时，我收到了这个错误：

```
"Either the application has not called WSAStartup, or WSAStartup failed" 
```

我放置了引发异常的代码块。我遇到异常的情况是；我登录到程序（一切正常）然后拔出加密狗，然后程序停止并要求加密狗，我再次插入加密狗并尝试登录，但我在网上遇到异常

> 响应 = (HttpWebResponse)request.GetResponse();

```
DongleService unikey = new DongleService();

                checkDongle = unikey.isConnectedNow();

                if (checkDongle)
                {
                    isPass = true;
                    this.username = txtbxUser.Text;
                    this.pass = txtbxPass.Text;
                    this.IP = combobxServer.Text;
                    string uri = @"https://" + combobxServer.Text + ":5002num_events=1";
                    request = (HttpWebRequest)WebRequest.Create(uri);
                    request.Proxy = null;
                    request.Credentials = new NetworkCredential(this.username, this.pass);
                    ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);
                    response = (HttpWebResponse)request.GetResponse();

                    Properties.Settings.Default.User = txtbxUser.Text;
                    int index = _servers.FindIndex(p => p == combobxServer.Text);
                    if (index == -1)
                    {
                        _servers.Add(combobxServer.Text);
                        Config_Save.SaveServers(_servers);
                        _servers = Config_Save.LoadServers();
                    }

                    Properties.Settings.Default.Server = combobxServer.Text;
                    // also save the password
                    if (checkBox1.CheckState.ToString() == "Checked")
                        Properties.Settings.Default.Pass = txtbxPass.Text;

                    Properties.Settings.Default.settingLoginUsername = this.username;
                    Properties.Settings.Default.settingLoginPassword = this.pass;
                    Properties.Settings.Default.settingLoginPort = "5002";
                    Properties.Settings.Default.settingLoginIP = this.IP;
                    Properties.Settings.Default.isLogin = "guest";

                    Properties.Settings.Default.Save();
                    response.Close();
                    request.Abort();
                    this.isPass = true;
                    this.Close();
                }
                else
                {
                    MessageBox.Show("Please Insert Correct Dongle!", "Dongle Error", MessageBoxButtons.OK, MessageBoxIcon.Stop);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:58:15.577

WSAStartup 是套接字库中的第一个函数，它在开始使用网络时执行。你可以导入

```
 [DllImport("ws2_32.dll", CharSet = CharSet.Auto, SetLastError=true)]
 static extern Int32 WSAGetLastError(); 
```

当引发异常时，执行 WSAGetLastError 并从[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)查看错误代码。希望它会帮助你。在获得 Win32Exception 的特定情况下，您可以使用来自异常的 NativeErrorCode，如[@Patrick](https://stackoverflow.com/users/116249/patrick)的注释中所写。

# iphone - 我们如何处理没有 armv7s 切片的第三个库

> ID：12542293
> 
> 赞同：2
> 
> 时间：2012-09-22T08:48:31.383
> 
> 标签：iphone, architecture, ios6, armv7

在我的项目中，我有一个没有用于新 iPhone 的 armv7s 切片的第三个库，所以我想知道如何设置项目目标架构和第三个库架构以与 iPhone 5 一起使用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:06:31.297

您可以`armv7s`在构建设置中简单地从有效架构中删除。

请参阅[文件是通用的（三个切片），但它不包含 iOS 上静态库的 (n) ARMv7-s 切片错误，无论如何要绕过？](https://stackoverflow.com/questions/12402092/file-is-universal-3-slices-but-does-not-contain-an-armv7s-slice-error-for-st)和[适用于 iOS6/Xcode 4.5 的 Facebook SDK 无法正常工作](https://stackoverflow.com/questions/12513222/facebook-sdk-for-ios6-xcode-4-5-not-working)。

# vb.net - VB.NET中的动态控制

> ID：12542299
> 
> 赞同：1
> 
> 时间：2012-09-22T08:49:15.820
> 
> 标签：vb.net, dynamic

这是我在按钮单击事件中用于动态文本框控件的代码。代码运行良好。如果我单击该按钮 3 次，则会生成 3 个文本框。但我不知道将文本框值分配给变量。我不知道动态生成控件的名称。如果我想为第三个文本框添加值，该怎么做？

```
Dim txtBx As TextBox
Static x As Integer
Static i As Integer

txtBx = New TextBox

txtBx.Location = New Point(10, 10 + x)
txtBx.Size = New Size(100, 20)

i = i + 1
x = x + 20

Me.Controls.Add(txtBx) 
```

如果我创建普通的文本框，我可以做到，

```
TextBox3.Text = "Some value" 
```

但我不知道为动态控件执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:03:02.347

这是一个示例，将引用存储在 List(Of Textbox) 中：

`Public Class Form1`

 ````
Private tbList As New List(Of TextBox)

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim tb As TextBox
    Dim n As Integer

    n = tbList.Count + 1
    tb = New TextBox
    With tb
        .Location = New Point(10, 10 + (n * 20))
        .Name = "dynTB" & n.ToString
        .Size = New Size(100, 20)
    End With
    Me.tbList.Add(tb)
    Me.Controls.Add(tb)

End Sub

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    ' Testing:
    If Me.tbList.Count >= 3 Then Me.tbList(2).Text = "This is textbox 3"
End Sub 
```` 

`End Class`

# jquery - jquery中的异步替换

> ID：12542300
> 
> 赞同：1
> 
> 时间：2012-09-22T08:49:18.980
> 
> 标签：jquery, asp.net

我读过很多关于异步不是用户友好的文章，但是在下面的过程中，当我删除异步时一切都搞砸了，因为它需要一个一个地执行。

```
for (var k = 0; k < selectedValueArr.length - 1; k++) {
    var value = selectedValueArr[k];
    $.ajax({
        type: "POST",
        url: dm + "Services/AjaxService.asmx/GetCityCheck",
        dataType: "json",
        data: JSON.stringify({ code: value }),
        contentType: "application/json; charset=utf-8",
        async: false,
        success: function(data) {
            html += '<li style="height: 25px;"><div style="font-weight: bold; background-color: #91c8e2; padding: 3px 3px; font-size: 13px;">' + document.getElementById('stateName' + selectedValueArr[k]).innerHTML + '</div></li>';
            var datafromServer = jQuery.parseJSON(data.d.toString());
            $.each(datafromServer, function(key, value) {
                html += '<li style="height: 18px; font-size: 12px;"><span pvalue="' + key + '"><input id="chkCity' + key + '" type="checkbox" title="' + value + '" style="border: 0px;" onchange="javascript:CityCheck(this)"><span title="' + value + '" id="cityName' + key + '">' + value + '</span></span></li>';
            });
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
        }
    });
} 
```

谁能告诉我什么是异步的替代品，因为它真的会挂起浏览器......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:57:43.127

这里有一个建议：与其在一个循环中用许多 AJAX 请求锤击您的服务器，不如在一个 AJAX 请求中发送所有数据，即使更多数据将通过线路传输。尽量减少服务器往返总是更好的。

所以摆脱 for 循环，然后发送一个 AJAX 请求：

```
$.ajax({
    type: 'POST',
    url: dm + 'Services/AjaxService.asmx/GetCityCheck',
    data: JSON.stringify({ codes: selectedValueArr }),
    contentType: 'application/json; charset=utf-8',
    success: function(data) {
        // work with data.d directly here, don't do any $.parseJSON
        // see below for how you need to modify your WebMethod for
        // this to work
        ...
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert(textStatus);
    }
}); 
```

然后修改您的 WebMethod，使其将数组作为输入参数并返回数组作为输出：

```
[WebMethod]
public SomeModel[] GetCityCheck(string[] codes)
{
    ...    
} 
```

请注意，如果您的 WebMethod 直接返回模型而不是字符串，则您无需`jQuery.parseJSON`在成功回调中执行任何操作，而是直接使用`data.d`.

如果您不想听从我的建议并在循环中使用 AJAX 请求杀死您的服务器，您将不得不`k`在闭包中捕获索引器变量：

```
for (var k = 0; k < selectedValueArr.length - 1; k++) {
    (function(i) {
        var value = selectedValueArr[i];
        $.ajax({
            type: "POST",
            url: dm + "Services/AjaxService.asmx/GetCityCheck",
            dataType: "json",
            data: JSON.stringify({ code: value }),
            contentType: "application/json; charset=utf-8",
            context: value,
            success: function(data) {
                html += '<li style="height: 25px;"><div style="font-weight: bold; background-color: #91c8e2; padding: 3px 3px; font-size: 13px;">' + document.getElementById('stateName' + this).innerHTML + '</div></li>';
                var datafromServer = jQuery.parseJSON(data.d.toString());
                $.each(datafromServer, function(key, value) {
                    html += '<li style="height: 18px; font-size: 12px;"><span pvalue="' + key + '"><input id="chkCity' + key + '" type="checkbox" title="' + value + '" style="border: 0px;" onchange="javascript:CityCheck(this)"><span title="' + value + '" id="cityName' + key + '">' + value + '</span></span></li>';
                });
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    })(k);
} 
```

还要注意我如何将`context`参数用于 AJAX 请求，以便将值传递给成功回调。然后在这个成功回调中，我`selectedValue[k]`用这个替换了，因为当前上下文现在不同了。这是从 $.ajax 调用的外部上下文向成功回调传递信息的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:03:55.327

您可以尝试这样做：
- 删除异步：fals
- 删除 for 循环
- 重写您的服务器方法以接受多个“代码”并输出结果数组
- 一次将所有请求的“代码”发送到服务器
- 当你得到你的结果，遍历每个“代码”结果并用它做你想做的事

# javascript - 在 contenteditable 元素中，在 HTML 标记之间移动光标

> ID：12542302
> 
> 赞同：5
> 
> 时间：2012-09-22T08:49:30.533
> 
> 标签：javascript, html, contenteditable

[http://jsfiddle.net/Y7tgx/2/](http://jsfiddle.net/Y7tgx/2/)

Firefox 比 Chrome 处理得更好，但都不是我想要的方式。它们都将所有相邻的 HTML 标记集中在一起，并将它们视为一个（我不想要）。

Firefox：当光标在一个标签（或一组相邻标签）的左侧并且您按右时，光标会跳过标签前面的第一个字符。然后，如果你按左键，它会在字符和标签之间移动。（按左然后右相同。）

Chrome：标签和它后面的第一个字符集中在一起。无法将光标放在标签和后面的字符之间。

期望：标签被视为相对于光标的单个字符。如果光标在标签的左侧并且您按右，它应该转到标签的右侧，反之亦然按左。

如何在浏览器上强制执行所需的行为？

这不适用于所见即所得的编辑器。为了达到特定目的，标签在生产中以视觉方式表示，就像它们在 jsfiddle 中一样。用户希望任意控制哪个元素包含光标。

```
b:before, b:after,
i:before, i:after,
p:before, p:after {
    color: blue;
}

b:before {
    content: '<b>';
}

b:after {
    content: '</b>';
}

p:before {
    content: '<p>';
}

p:after {
    content: '</p>';
}

i:before {
    content: '<i>';
}

i:after {
    content: '</i>';
}​

----------

<p contenteditable='true'>regular regular<b>bold</b>regular - 
try moving the cursor to either side of either blue tag.</p>
<p contenteditable='true'>try it in this: regular<b><i>bolditalic</i></b></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:40:59.613

修改代码以确保不跳过字符将是一个合理的修复，但能够在相邻标签之间导航或编辑标签将与浏览器如何处理标记（将不可见标签视为文本内容）相反。为了做到这一点，标签的视觉表示应该作为文本内容完成，任何更神奇的解决方案很可能不得不在某个时候依赖它（所以直接做会更清楚）。一种相当简单的方法是使用类似的东西`<span class="tag">&lt;b&gt;</span>`，然后添加附加到的 JavaScript，`*[contenteditable='true'] span.tag`以控制光标在该跨度上作为一个单元移动。

与/从的转换可能最好使用服务器端代码完成，但否则在 JavaScript 中使用基本自省将允许所需的代码替换或补充（替换将使编辑更容易，但简单地添加额外的跨度将不那么具有侵入性如果元素结构是固定的并且只编辑文本内容。

# java - 如何为 dataSource.getPooledConnection() 编写测试

> ID：12542303
> 
> 赞同：0
> 
> 时间：2012-09-22T08:50:27.120
> 
> 标签：java, mysql, database, junit

我有一个类，它使用数据库池连接。我的问题是如何编写相同的测试用例请帮助举个例子

我在课堂上使用这个

```
MysqlConnectionPoolDataSource dataSource = new MysqlConnectionPoolDataSource();
dataSource.setURL("dbc:mysql://localhost:3306/unittest");
dataSource.setUser("root");
dataSource.setPassword("root123");
PooledConnection pconn;
pconn = dataSource.getPooledConnection(); 
```

我可以测试 dataSource.getPooledConnection()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:48:35.643

您不需要测试连接池。它来自供应商。主要供应商。他们测试它。您需要测试您对连接所做的操作。如果测试揭示了供应商代码的明显问题，您可以细化为演示该问题的测试用例，并向供应商提交错误报告。

# sql-server - 如何创建单用户登录页面？

> ID：12542310
> 
> 赞同：0
> 
> 时间：2012-09-22T08:51:25.843
> 
> 标签：sql-server, asp-classic

我想使用asp页面创建一个用户帐户，其中只有一个用户可以登录他们的帐户，如果该页面当前已登录，那么注销后没有人可以登录该页面，只有另一个用户可以登录该帐户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:07:01.937

这可能会让您一目了然，在数据库中您可以添加一个表 UserLogin，其中包含两个字段 UserId、IsLogin。在任何用户登录时检查 islogin 状态，如果它返回 true，则不允许用户登录。如果返回 false 则允许用户登录。登录成功后切换islogin state true。

希望我能理解你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:42:16.813

Darshan Joshi 的回答是一种方法，如果您有一个足够简单的应用程序，它可能就足够了。

根据应用程序的具体情况，您可能需要考虑不同的角度。

例如：如果多个不同的页面一次只需要一个用户，我会考虑创建一个新表，其中每个页面都有一条记录。这样，当有人登录或访问页面时，您可以使用用户的唯一 ID 将页面设置为已登录/正在使用。当用户注销/离开页面时（或者如果他们的 ASP 会话过期 - 用户并不总是干净地注销！）您可以再次“解锁”页面。不仅如此，您还可以通过专门搜索页面记录而不是任何具有登录标志的用户来减少数据库负载。

# android - 如何在其背景可绘制的按钮中设置重力？

> ID：12542313
> 
> 赞同：0
> 
> 时间：2012-09-22T08:51:40.040
> 
> 标签：android, android-button

我有一个按钮，我将它的背景设置如下：

```
button.setBackgroundResource(R.drawable.bg); 
```

之后我向按钮添加了文本，我希望它居中：

```
button.setGravity(Gravity.CENTER); 
```

但它不起作用。

可绘制的形状是：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:top="-1dp" android:right="-1dp">
      <shape>
            <solid android:color="@color/white" />
            <stroke android:width="1dp" android:color="@android:color/darker_gray" />
      </shape>
    </item>
</layer-list> 
```

如何设置按钮的重力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:44:58.103

在您的 XML 布局文件中放置一个按钮。

xml的代码如下

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:text="Button" /> 
```

现在在你的活动中

设置按钮的重力做这个..

```
 public class MainActivity extends Activity {

private Button b;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b = (Button) findViewById(R.id.button1);
    b.setBackgroundResource(R.drawable.ic_launcher);

    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        params.gravity = Gravity.CENTER;

        b.setLayoutParams(params);

} 
```

}

这对我有用....

快乐的编码......

# ios - ios委托不触发

> ID：12542318
> 
> 赞同：2
> 
> 时间：2012-09-22T08:52:17.777
> 
> 标签：ios, delegates

我尝试了一个简单的委托，但该方法不会触发。这是我的代码：带有协议的视图和一个应该触发委托的按钮：ViewController.h

```
#import <UIKit/UIKit.h>
@protocol InitStackDelegate <NSObject>
@required
-(void)initstack:(NSInteger)amount;
@end

@interface ViewController : UIViewController{
    IBOutlet UITextField *amountTextField;
    __unsafe_unretained id<InitStackDelegate> delegate;
}

- (IBAction)init:(id)sender;

@property (nonatomic,assign)id  delegate;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize delegate;
- (IBAction)init:(id)sender {
    //send the delegate

    [delegate initstack:[amountTextField.text intValue]];

} 
```

AppDelegate.h

```
#import <UIKit/UIKit.h>
#import "ViewController.h"
@interface AppDelegate : UIResponder <UIApplicationDelegate,InitStackDelegate> {
}  

@property (strong, nonatomic) UIWindow *window;
@property (strong,nonatomic) ViewController *myView;
@end 
```

AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window;
@synthesize myView;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    //..... push second controller into navigation stack
    myView.delegate = self;
    return YES;
}
...
#pragma mark Delegate Method
-(void)initstack:(NSInteger)amount{
    NSInteger test;
}

@end 
```

当我按下按钮时，我进入（IBAction）初始化，但代表什么也不做。我在 AppDelegate.m 中设置了一个断点，但从未达到。有什么帮助吗？

谢谢马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:58:44.317

在您的 App Delegate 中，当您设置 myView.delegate=self myView 实际上并没有指向任何东西！您需要将 myView 设置为指向您的 ViewController。

使用这个`didFinishLaunchingWithOptions`

```
myView = (ViewController *)self.window.rootViewController;
myView.delegate = self; 
```

# javascript - 带有 24 个 cookie 和“不再显示”选项的 Javascript 便笺

> ID：12542319
> 
> 赞同：0
> 
> 时间：2012-09-22T08:52:23.167
> 
> 标签：javascript, cookies, popup, sticky

我在动态驱动器上找到了一个我想修改的脚本，称为便笺。我想将每个 cookie 的会话更改为 7 天，而不是“每个浏览器会话”，并且还显示一个“不再显示”复选框或链接，这样弹出窗口就不会经常惹恼网站的读者。

这是脚本的链接：[http ://www.dynamicdrive.com/dynamicindex17/stickynote.htm](http://www.dynamicdrive.com/dynamicindex17/stickynote.htm)

我找到了一个线程，它显示了如何创建一个 cookie 以每 24 小时显示一次，但我希望每 7 天显示一次：[http ://www.dynamicdrive.com/forums/showthread.php?29947-Sticky -Note-With-Cookie-Write-Read-Addition](http://www.dynamicdrive.com/forums/showthread.php?29947-Sticky-Note-With-Cookie-Write-Read-Addition)

我将如何去做这两件事？7 天 cookie 和“不再显示”选项？

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:00:07.757

看一下示例代码，这是真正的工作发生的地方：

```
var expireDate = new Date()
var expstring=expireDate.setDate(expireDate.getDate()+1) //1 day to expire
document.cookie="fadedin=yes; expires="+expireDate.toGMTString() 
```

上面的代码创建了一个新日期，并将其设置为明天，然后将其包含在 cookie 中作为过期时间。您可以将“1”更改为“7”以使其在 7 天后过期。

对于 Never Show Again，您可以设置相同格式的 cookie（但永不过期）并在打开弹出窗口的代码中读取它。

我建议查看 https://developer.mozilla.org/en/JavaScript 之类的内容`document.cookie`以[了解](https://developer.mozilla.org/en/JavaScript)它们的结构，这样您就可以超越仅仅剪切和粘贴其他人的代码并完全理解它，或者如果不是，了解如何了解更多信息。

# java - 我可以只用整数变量（java）输入非常大的数字吗？

> ID：12542320
> 
> 赞同：-6
> 
> 时间：2012-09-22T08:52:57.347
> 
> 标签：java, int, largenumber

我想用非常大的两个数字计算（总和）但是当我使用`Scanner`方法时，`IOException`当我输入非常大的数字时。有一些规则。

*   我无法使用`BigInterger`
*   我只能纯粹使用`integer`.
*   我可以使用`InputStream`.

请给我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:32:27.937

我假设这是一场竞赛、家庭作业或自学练习，而完整的解决方案将弄巧成拙。

您需要找到一种方法将大数表示为较小数字的数组，然后使用这种表示法进行算术运算。这本质上就是 BigInteger 在幕后所做的。想想你是如何用铅笔和纸做算术的，然后将其概括。

如果你的谜题不允许你使用数组，你可以用输入和输出流模拟它们（非常低效）。

但我得出的结论是，这根本不是一个真正的问题......

# backbone.js - Backbone.js 查看事件禁用启用

> ID：12542325
> 
> 赞同：2
> 
> 时间：2012-09-22T08:53:37.123
> 
> 标签：backbone.js

如果我在backbone.js 中有一个视图并且它在事件列表中有一个事件：

```
events: {
    'click #somebutton': 'clicked'         
},
clicked: function () {
    console.log('clicked');
} 
```

然后如何禁用/启用该事件？因此，例如，如果它被单击，则事件被删除（按钮保留在屏幕上，但呈灰色显示等）。当视图的其他部分更新或启用任何事件时。当然我可以使用 jquery，但我想知道这个功能在主干中是否可用。

感谢您的任何回答

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:05:30.910

您始终可以使用`delegateEvents()`和`undelegateEvents()`重做 DOM 和 Backbone 视图之间的事件绑定。也就是说，我通常只保留事件处理程序并在处理程序中添加条件。

```
// .disabled class (CSS) grays out the button

clicked: function(event) {
    var buttonEl = $(event.currentTarget);

    if (buttonEl.hasClass('disabled')) {
        // Do nothing
    } else {
        // Do something AND...
        buttonEl.addClass('disabled');
    }
} 
```

`removeClass('disabled')`然后，当您想要恢复功能时，您就可以拥有其他视图或代码。

**更新 - 禁用属性**

请参阅评论，但更简单、更好的解决方案是使用`disabled="disabled"`按钮的 disabled 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T09:07:01.657

用于绑定和解除绑定事件`delegateEvents`。`undelegateEvents`检查参考：[delegateEvents](http://backbonejs.org/#View-delegateEvents)

# c# - 如何调用显式实现的方法

> ID：12542327
> 
> 赞同：1
> 
> 时间：2012-09-22T08:54:02.230
> 
> 标签：c#, oop

我在下面有一个代码。

```
interface IFirst
{
   void Show();
}

public class Test : IFirst
{
   void IFirst.Show()
   {
       Console.WriteLine("First");
   }
} 
```

在实现类中，我无法为 Show() 提供公共访问说明符。我如何从主程序调用这个 Show()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T08:56:39.543

尝试，

```
IFirst obj = new Test();
obj.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:06:16.353

您必须将变量转换为接口类型，因为显式接口方法只能使用接口访问，而不能使用实现它们的类访问。使用显式接口实现是一种代码封装形式，可以让您隐藏类的实现细节（也允许实现许多具有冲突方法名称的接口）。

```
Test test = new Test();
var casted = test as IFirst;
casted.Show(); 
```

您也可以使用隐式转换发送变量到方法：

```
public void ShowMeATrick(IFirst first) {
    first.Show();
}

Test test = new Test();
ShowMeATrick(test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:08:38.493

显式接口方法只能通过接口访问，而不能通过实现它们的类。

在您的代码中，您可以将类的实例强制转换为接口，然后引用显式定义的方法/属性。

显式接口上的 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/ms173157%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms173157%28v=vs.100%29.aspx)

另一个问类似问题的问题： [编译错误：“修饰符 'public' 对此项无效”，同时显式实现接口](https://stackoverflow.com/questions/2669031/compilation-error-the-modifier-public-is-not-valid-for-this-item-while-crea)

# c++ - 为什么“char ptr[n]; free(ptr);”会导致程序失败？

> ID：12542328
> 
> 赞同：-2
> 
> 时间：2012-09-22T08:54:09.500
> 
> 标签：c++, c, memory, heap-memory, stack-memory

使用 c：

```
 char ptr[n];
  free(ptr); 
```

在我看来：当“char ptr[n];” 已使用，内存已分配，并且 ptr 指向它， free(ptr) 应该可以工作。程序失败了，为什么？（n == 5 eg）有什么深入的分析吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T08:54:59.460

因为您调用`free`了未分配的变量`malloc`。
这会导致**未定义的行为**。幸运的是，它会崩溃并且您可以检测到它，否则它可能会在最尴尬的时候崩溃。

您要求`free`释放堆分配变量的内存，您拥有的是本地存储上的一个数组（假设它在一个函数中），它会在创建它的作用域（`{`，`}`）结束时自动释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T08:55:01.760

因为这是你正在做的未定义的行为。（这意味着它实际上可以做任何事情，包括崩溃、看似正常运行、[让守护进程飞出你的鼻子](http://www.google.hu/url?sa=t&rct=j&q=nasal%20demon&source=web&cd=1&cad=rja&ved=0CCQQFjAA&url=http://www.catb.org/jargon/html/N/nasal-demons.html&ei=YX1dUIaDKcvEsgbMloCADA&usg=AFQjCNFYm-W1P-Tx0DGQ_Z-89Dv3DULQOA&sig2=usF1ShzHe47ihLlYunLYKQ)等。）你只能`free()`使用你获得的指针`malloc()`。

自动数组不必是 free()'d。它们在作用域结束时被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T08:54:44.907

仅`free`由 分配的对象`malloc`。释放尚未分配的对象`malloc`是未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T12:04:34.277

因为 `char ptr[n];' 不在**堆栈**内存中声明一个数组，并且它具有块的范围，这意味着它在块完成时从内存中销毁。

但是当你使用`malloc(size)`指针时，它会指向**堆**内存中的一块内存，它会占用程序员给它的范围。我的意思是，当你想销毁它时，你必须使用它，`free(ptr)`否则操作系统会在程序完成后释放它。

因此，当您使用`free`指向**堆栈**内存中的一块内存的指针时，它会导致未定义行为和程序崩溃，因为`free`仅在**HEAP**内存上操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T07:00:29.250

这看起来很相似[，在 c 中对 free 的调用是否会失败（SO）](https://stackoverflow.com/questions/5308758/can-a-call-to-free-in-c-ever-fail) 根据标准，行为是未定义的，在某些情况下，您的代码不会那么快崩溃。它可能会在执行过程中破坏堆并在很晚的时候崩溃，并使调试变得困难。
在某种程度上，它取决于 malloc/free 方法的设计。

我知道的一种方法是：对于每个 malloc，一个额外的内存块附加到 malloc() 返回的块。此块包含调用 free() 时需要的一些内务数据。在您的情况下，由于内存不是由 malloc() 分配的，因此缺少此数据。所以 free() 试图在不知道它的垃圾的情况下使用你的数组之前的数据。

# .htaccess - .htaccess - 文件夹的子域 = 子文件夹 404

> ID：12542329
> 
> 赞同：0
> 
> 时间：2012-09-22T08:54:10.030
> 
> 标签：.htaccess, subdomain, directory, virtualhost, subdirectory

对不起，如果标题令人困惑。

我已经在我的本地机器上设置了一个*虚拟主机。*我已经设置`http://dev`映射到我的`/htdocs/dev`文件夹。在*dnsmasq*和*.htaccess*的帮助下，我进行了设置，以便将 的子域映射`.dev`到 .htaccess 中的文件夹`/htdocs/dev`。当我尝试访问时，这一切都很完美，例如，`http://dev/file1.html`或`http://folder.dev/file2.html`. 访问子文件夹时会出现问题。如果我`404 Object not found`尝试访问`http://folder.dev/subfolder/`或`http://folder.dev/subfolder/file3.html`.

我想它可以用.htaccess来解决，但我试过了，但我没能做到。这是我的`/htdocs/dev/.htaccess`样子：

```
# Default index file
  DirectoryIndex index.php

# Interpret .html files as .php scripts
  AddHandler php5-script .php .html

# Redirect subdomains to their respective folders
  RewriteEngine on
  RewriteBase /

  RewriteCond %{HTTP_HOST} !^www\.dev$ [NC]
  RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.dev$ [NC]
    RewriteRule !^([a-z0-9-]+)($|/) /%2%{REQUEST_URI} [PT,L] 
```

我应该提到，如果我尝试访问`http://dev/folder/subfolder/file3.html`，没有问题。

如何设置诸如`http://folder.dev/subfolder/`指向的地址`/htdocs/dev/folder/subfolder`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:14:01.137

首先，感谢@JonLin 给了我这个提示。

我已经设法用这个 .htaccess 文件解决了这个问题：

```
# Ordered list of index files, if none exist, show directory listing
  DirectoryIndex index.php index.html

# Interpret .html files as .php scripts
  AddHandler php5-script .php .html

# Redirect subdirectories to their respective folders
  RewriteEngine on
  Options +FollowSymlinks
  RewriteBase /

  RewriteCond %{HTTP_HOST} !^www\.dev$ [NC]
  RewriteCond %{HTTP_HOST} ^(www\.)?(.*)\.dev(.*)?$ [NC]
  RewriteRule !^%2\.dev%3?/$ http://dev/%2%{REQUEST_URI}/ [P] 
```

Rewrite 部分所做的是它采用[http://folder.dev/subfolder](http://folder.dev/subfolder)形式的 URL，并将其指向 /dev/folder/subfolder，同时保留 URL。无论有无 www，它都适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:52:06.887

尝试将您的规则更改为：

```
RewriteCond %{HTTP_HOST} !^www\.dev$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.dev$ [NC]
RewriteCond %{DOCUMENT_ROOT}/%2{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%2{REQUEST_URI} -d
RewriteRule ^ /%2%{REQUEST_URI} [PT,L] 
```

# eclipse - Eclipse JDT 静态字段修饰符

> ID：12542333
> 
> 赞同：2
> 
> 时间：2012-09-22T08:54:16.170
> 
> 标签：eclipse, static, field, eclipse-jdt

我想获取有关字段修饰符的信息。确切地说，我想找出该字段是静态字段。例如，我想检查以下代码：

```
ASTParser parser = ASTParser.newParser(AST.JLS3); 
```

如何推断**JLS3**是静态字段？在分析方法时，我将*getModifiers*与*Modifier.isStatic*一起使用，效果很好。但是，现在我无法获得上述代码片段中的**JLS3**是静态字段的信息。有什么我想念的吗？

编辑：

这是我正在使用的代码：

```
private boolean visit(SimpleName name){
   boolean isStatic = Modifier.isStatic(name.resolveTypeBinding().getModifiers());
   ...
   return true;
} 
```

***在JLS3**的情况下*isStatic*为假。*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T00:58:01.347

这显然是错误的，使用`name.resolveBinding()`而不是`name.resolveTypeBinding()`--- 所以你应该得到一个 IVariableBinding 类型的对象。

`name.resolveTypeBinding()`返回字段*类型*的绑定，但不返回字段本身的绑定，这不是您想要的。*

# mysql - Mysql丢失的例程/存储过程

> ID：12542334
> 
> 赞同：0
> 
> 时间：2012-09-22T08:54:18.860
> 
> 标签：mysql, stored-procedures

我正在使用 MySQL Workbench 5.2.40 CE，我将数据库导出到转储文件中，我错过了检查“转储存储的例程”，在我删除它
之后，导入这个转储例程后丢失了如何恢复存储过程/例程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:24:52.680

简单的答案，如果你有，你可以恢复数据库，`the backup in any form.`否则你可能会不走运。之前在这里问过类似的问题，请参阅此[链接](https://serverfault.com/a/92670)

# eclipse - Eclipse Indigo 和 m2e 和 wsimport 目标。2012年如何生成ws文件

> ID：12542345
> 
> 赞同：2
> 
> 时间：2012-09-22T08:55:38.447
> 
> 标签：eclipse, maven, sts-springsourcetoolsuite, m2e, wsimport

我是构建 jsp/j2ee webapp 团队的一员。我决定使用`STS 2.9.2 based on eclipse Indigo`而不是组中的每个其他人，因为他们都使用`netbeans`。每件事都是完美的，直到我们到达一个阶段，我们中的一个人负责在一个不是`webapp module`本身的 maven 模块中创建一些 web 服务。那时我无法运行 webapp。它抛出这个错误：

> com.sun.xml.ws.transport.http.servlet.WSServletContextListener parseAdaptersAndCreateDelegate SEVERE：WSSERVLET11：解析运行时描述符失败：java.lang.Error：未解决的编译问题：无法解析导入org.tempuri

根据我从谷歌搜索中读取的内容，我向 pom 添加了其他配置或设置 eclipse 以忽略目标。第一个选项已退出，因为我真的不想编辑它，`pom`因为它与团队和整个项目无关。我不太确定第二个选项。

但本质上问题是你如何解决这个问题？同时我切换回netbeans，它似乎很酷，但我想使用eclipse

# java - 这个 Java 程序是做什么的？

> ID：12542350
> 
> 赞同：-3
> 
> 时间：2012-09-22T08:56:22.600
> 
> 标签：java, regex

```
Matcher m = Pattern.compile("\\@[^\\@]+\\@").matcher(myMsg);
while (m.find()){
  totalPlaceHoldersList.add(m.group().toString());
} 
```

我有这个程序。它有什么作用？有人可以用例子向我解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:59:46.493

它将`myMsg`根据该正则表达式匹配变量。然后它将结果（如果找到与模式匹配的内容）添加到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:07:30.610

此代码处理字符串 myMsg。查找以下分隔符之间所有出现的子字符串：'\@'，并将它们放入一个名为 totalPlaceHoldersList 的列表中。

假设你有这个 myMsg：

```
myMsg = 'bla bla \@value1\@ bla bla \@value2\@ bla bla'; 
```

运行代码后，您将在 中获得以下值`totalPlaceHoldersList`：

```
["value1", "value2"] 
```

请注意，此代码不会编译和运行，因为`totalPlaceHoldersList`没有声明。你会像这样声明它：

```
List<String> totalPlaceHoldersList = new ArrayList<String>(); 
```

# java - Java：如何使用 switch 语句

> ID：12542352
> 
> 赞同：2
> 
> 时间：2012-09-22T08:56:39.103
> 
> 标签：java, switch-statement, string-comparison

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我无法理解如何使用 Java switch 语句。在其中一个 case 语句中执行方法后，它仍然会转到默认语句并运行它。这是代码：

```
Scanner scanner = new Scanner(System.in);
String option = null;

while (option != "5") {
    ShowMenu();
    option = scanner.nextLine();
    switch (option) {
        case "1": ViewAllProducts(); break;
        case "2": ViewProductDetails(scanner); break;
        case "3": DeleteProduct(scanner); break;
        case "4": AddProduct(scanner); break;
        case "5": break;
        default: System.out.println("Invalid option. Please try again."); break;
    }
} 
```

上面的代码在 main 方法中。例如，在运行案例“4”后，它会打印“无效选项”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T08:59:08.857

```
 while (!option.equals("5")){...} 
```

用于`.equals()`字符串比较。

`==`比较字符串引用（内存位置） `.equals()`比较字符串值

*   [看这里](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T08:58:08.137

您正在将字符串与`==`您的 while 条件（比较引用而不是值 -[使用`equals`值相等的方法](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)）进行比较，while 循环应更改为以下 -

```
while (!option.equals("5")) 
```

[由于运算符重载](http://msdn.microsoft.com/en-us/library/system.string.op_equality.aspx)，它在 C# 中完美地工作，而[在 Java 中不允许](https://stackoverflow.com/questions/1686699/operator-overloading-in-java)运算符重载（尽管“+”对于字符串和数字被重载）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T09:10:14.097

我认为问题出在while循环的情况下。您可以将条件更改为`while(!"5".equals(option))`然后尝试运行问题。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T11:26:37.117

您的scanner.nextLine() 应该在您的while 之外。通常 do-while 与 switch-case 结合使用效果更好。所以，你可以更好地使用它。

当您从用户那里阅读时，do-while 与 switch-case 的一般用法是这样的：-

```
boolean flag = false;
do {
    String option = scanner.nextLine();
    switch (option) {
        case "1": break;
        case "2": break;
        default : flag = true;
                  break;
    }
} while(! flag); 
```

一件重要的事情是： -***字符串***在 Java 中是不可变的。

通常对于 Java 中的字符串比较，如果你想比较它们的值，你应该使用 equals() 函数。而且，我建议你在你的类中重写这个 equals() 和 hashcode() 方法（将来如果你做一个)，比较你的类的两个实例..

实际上，== 和 equals() 之间有很大的不同。这实际上取决于您如何创建字符串。例如，假设这是您的代码：-

```
String a = "5"; 
String b = new String("5");
String c = "5"; or String c = a;

System.out.println("a == b?" + (a == b));  // Will Print false
System.out.println("a.equals(b)?" + a.equals(b));   // Will Print true..

System.out.println("a == c?" + (a == c));  // Will Print true
System.out.println("a.equals(c)?" + a.equals(c));   // Will Print true.. 
```

在上面的代码中，您的字符串引用“a”和“c”指向由“5”表示的同一个对象。而引用“b”指向不同的对象“5”，因为使用“new”运算符创建字符串总是会创建一个新对象。

现在，**== 运算符**检查被比较的两个字符串引用是指向同一个对象还是不同，而**equals()**函数比较两个字符串对象包含的实际值。

因此，程序中的输出现在将很清楚了。我只是解释了这一点，因为在您的 while 中，您将不得不使用 equals() 函数来检查您的“选项”引用是否与“5”具有相同的值。

现在，我认为您可以稍微更改您的代码，并且最好使用 do-while 来获得所需的输出..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T01:20:28.680

在阅读新选项之前，我正在修改您的代码以重新初始化您的扫描仪参考。

```
 Scanner scanner = new Scanner(System.in);
    String option = null;

    ShowMenu();
    option = scanner.nextLine();

    while (!"5".equals(option)) {
        switch (option) {
            case "1": ViewAllProducts(); break;
            case "2": ViewProductDetails(scanner); break;
            case "3": DeleteProduct(scanner); break;
            case "4": AddProduct(scanner); break;
            case "5": break;
            default: System.out.println("Invalid option. Please try again..."); break;
        }
        ShowMenu();
        scanner = new Scanner(System.in);  // Add this here

        option = scanner.nextLine();    // Use brand new scanner without any problem..
    } 
```

休息，你可以从我提供的链接中阅读，了解读取用户输入的各种方法之间的区别..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T01:39:44.750

> 我停止将扫描仪传递给每个函数，而是在每个函数中创建了一个新函数。这解决了问题。所以，我想出了这个问题..但是，我想知道为什么..

如果您发布了 SSCE，我们可能会回答这个问题。不幸的是，您所描述的行为涉及您没有向我们展示的代码。

> 这是Java中的错误还是正常的？

这**不太可能**是 Java 错误。该`Scanner`代码已经在 J​​ava 中使用了几年，任何重大错误都可能在之前遇到过并已修复。

另一方面，我想不出为什么将 a 传递`Scanner`给方法*本身*会产生任何影响。

但最重要的是，如果没有 SSCE，就不可能弄清楚你的代码到底在做什么……并解释根本原因。

> 如果我能理解为什么这是一个问题，那么我将来也可以在其他课程中避免它。除非这只发生在 Scanner 上？

没有 SSCE，我们无法帮助您理解。

# drupal-6 - 显示 drupal 节点以及 iphone 应用程序的评论

> ID：12542361
> 
> 赞同：0
> 
> 时间：2012-09-22T08:58:45.970
> 
> 标签：drupal-6, drupal-views, drupal-services

我正在使用 REST 服务器以 JSON 格式从**drupal 6**站点提取数据，然后在 iphone 应用程序中解析 JSON 数据。

**我想显示一个特定的节点，然后是它的所有注释。节点 ID 将由 iphone 应用程序提供。** 我不能使用 REST 服务器来做到这一点...如果我将 url 指定为

```
<drupal site>/<REST server endpoint>/node/<node id>.json 
```

然后我得到关于节点的所有相关信息，除了评论。

我不能使用drupal 视图来做到这一点……因为我只能显示一条评论……不是所有评论。此外，使用视图我必须指定节点 ID。

如何实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:10:16.243

如果没有直接的方法可以通过服务模块获取它，那么有一种方法可以通过创建您自己的自定义模块并实现 hook_services_resources 来获取节点及其注释。这种钩子机制类似于 drupal 菜单钩子。

这是用 drupal 7 编写的代码片段，但它也应该在 drupal 6 中工作。

```
Url : <drupal site>/<REST server endpoint>/my_rest_api/<node id>.json 
```

让我看看它是否有效，否则我将在 D6 中创建整个模块并将其粘贴到此处。

```
 /**
 * Implements hook_services_resources().
 * my_rest_api should appear in your resource list and do enable it before using it.
 */
function YOURMODULE_services_resources() {
  return array(
    'my_rest_api' => array(
      'retrieve' => array(
        'callback' => 'getMyRestNodeWithComments',
        'args' => array(
          array(
            'name' => 'nid',
            'optional' => FALSE,
            'source' => array('path' => 0),
            'type' => 'int',
          ),
        ),
        'access callback' => 'getMyRestAcces',
      ),

    ),
  );
}

/**
 * Get the node along with comment
 */
function getMyRestNodeWithComments($nid) {
    $node = node_load($nid);
    $node->comments = getMyRestCommentByNid($nid);
    return $node;

}

/**
 * Access callback.
 * TRUE for now but you change it according to your requirement
 */
function getMyRestAcces() {
  return TRUE;
}
/**
 * Get comment by nid
 */
function getMyRestCommentByNid($nid){
    //drupal 7
    $query = db_select('comment', 'c');
    $comments = $query
        ->fields('c')
        ->condition('c.nid', $nid)
        ->execute()
        ->fetchAll();
    return $comments;

    /*
    //In Drupal 6 something like this 
    $result = db_query("select * from {comment} where nid = %d",$nid);
    $records = array();
    while($row = db_fetch_array($result)){
        array_push($records, $row);
    }
    return $records; 
    */

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:13:24.733

为此，我开始开发一个模块......我还没有包含评论，但该框架可能是一个很好的起点。

[http://drupalcode.org/sandbox/nally/1365370.git/tree](http://drupalcode.org/sandbox/nally/1365370.git/tree)

# java - 如何在java中对对象进行排序？

> ID：12542364
> 
> 赞同：-3
> 
> 时间：2012-09-22T08:59:03.513
> 
> 标签：java

> **可能重复：**
> [如何按属性对对象的数组列表进行排序？](https://stackoverflow.com/questions/2535124/how-to-sort-an-arraylist-of-objects-by-a-property)
> [Java的排序算法是什么](https://stackoverflow.com/questions/12228659/what-is-the-sorting-algorithm-for-java)

我在 java 中有一个记录`diffSeconds`.

```
class fileObj
    {
        public String fileName; 
        public Date modificationTime; 
        public long diffSeconds;     

        fileObj()
        {
            modificationTime = null; 
        }
    } 
```

我有一个 forloop，它创建了`fileObj`类的多个实例并将它们添加到列表中。

```
List<fileObj> fileView = new ArrayList<fileObj>();
for(int j=0; j<10; j++)
       {
         fileView.add(new fileObj());
       } 
```

假设每个类都有一个`diffSeconds`分配给它们的值，我如何根据值对列表进行排序（最大优先）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:11:20.460

您可以使用`Collections.sort(fileView)`; 并实现`Comparable`接口并编写实现的方法`compareTo(fileObj arg0)`来决定对列表进行排序。

为了实施，

```
class fileObj implements Comparable<fileObj>

@Override
    public int compareTo(fileObj arg0) {

        if(this.diffSeconds > arg0.diffSeconds )
        return 0;
        else return 1;
    } 
```

[参考：](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

**详细编码。**

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Date;
import java.util.List;

public class SortExample {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        List<fileObj> fileView = new ArrayList<fileObj>();
        for(int j=0; j<10; j++)
               {
                 fileView.add(new fileObj(j));
               }
        Collections.sort(fileView);

        for(fileObj obj: fileView){
            System.out.println("File " + obj.getDiffSeconds());
        }

    }

}
class fileObj implements Comparable<fileObj>
{
    public String fileName; 
    public Date modificationTime; 
    public long diffSeconds;     

    fileObj()
    {
        modificationTime = null; 
    }

    fileObj(long diffSeconds)
    {
        modificationTime = null;
        this.diffSeconds = diffSeconds;
    }

    @Override
    public int compareTo(fileObj arg0) {

        if(this.diffSeconds > arg0.diffSeconds )
        return 0;
        else return 1;
    }

    public long getDiffSeconds() {
        return diffSeconds;
    }

    public void setDiffSeconds(long diffSeconds) {
        this.diffSeconds = diffSeconds;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:00:15.747

使用[比较器](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCMQFjAA&url=http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html&ei=S35dUPStM8i00QXx3IDADQ&usg=AFQjCNGDXaJ95_rdRgYPLcMa6V9gczDyEg&sig2=DoL8WO-K_Hhc-1XQVcbFOQ)或[可比较](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:07:03.453

看看下面的链接：-

[http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

搜索以对象为参数的排序方法，并在您的类中实现可比较的接口。

# php - 其他页面上的不同会话值

> ID：12542366
> 
> 赞同：0
> 
> 时间：2012-09-22T08:59:21.803
> 
> 标签：php, session

第 1 页

```
$formData = array();
$formData[0] = 'insert data done';
$_SESSION['form_data'] = $formData;
header('Location: view.php'); 
```

第2页

```
if (isset($_SESSION['form_data'][0])) {
echo $_SESSION['form_data'][0];
unset($_SESSION['form_data']);
} 
```

在第 1 页代码中，我注释掉标题并放置一个

```
var_dump($_SESSION['form_data'][0]); 
```

正如我所希望的

```
"string(16) "insert data done"" 
```

这是正确的，但在第 2 页我放了一个

`var_dump($_SESSION['form_data'][0]);`

输出是

字符串（1）“我”

我做错了什么。在第 2 页中，我只想回显该值并取消设置它，但我尝试使用

```
var_dump($_SESSION['form_data']); 
```

输出是正确的

也许我令人不安的方法可能是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:01:08.243

你试过`echo $_SESSION['form_data']`吗？似乎你得到了字符串的第一个字母。

我认为如果在 $_SESSION 变量上只设置了一对 key => value，它会自动减少到它的值。但我在网上找不到任何参考资料。

尝试在第 1 页使用此代码：

```
$formData['someKey'] = 'insert data done'; 
```

这在第 2 页：

```
echo $_SESSION['form_data']['someKey']; 
```

让我们看看发生了什么...

# java - 让 Nifty GUI ScreenController 吞下输入

> ID：12542367
> 
> 赞同：0
> 
> 时间：2012-09-22T08:59:36.687
> 
> 标签：java, slick2d, nifty-gui

在我的 Slick2D 游戏中，我`NiftyOverlayBasicGameState`使用 Nifty GUI 覆盖扩展`PlainSlickInputSystem`. 对于大多数覆盖屏幕，我希望 Nifty GUI 忽略所有输入并将其传递给`GameState`.

对于一个特定的屏幕，我想阻止所有输入通过底层`GameState`- 但我只希望这发生在一个屏幕上，而不是所有屏幕上。

这可能使用 Nifty GUI，还是我采取了错误的方法？单个屏幕可以指定不同的输入处理行为吗？或者我应该`GameState`在我希望 Nifty GUI 处理输入的一个屏幕上使用不同的 Niftyu GUI 输入系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:07:42.450

有几个选项可用。最基本的一个是有某种背景层并`visibleToMouse="true"`为其设置。这样，您的所有鼠标事件都将命中该层，并且鼠标事件将被标记为由**Nifty**处理。这应该可以防止事件被转发到`GameState`.

# c++ - 为什么变量名可以使用$？

> ID：12542373
> 
> 赞同：-1
> 
> 时间：2012-09-22T08:59:57.120
> 
> 标签：c++, variables

如：

```
int $a = 1;
int $$a = 2; 
```

为什么允许这样做？

我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T09:05:13.607

来自 C++ 标准，2.11 标识符：

```
identifier:
    identifier-nondigit
    identifier identifier-nondigit
    identifier digit 
identifier-nondigit:
    nondigit
    universal-character-name
    other implementation-defined characters 
```

请参阅明确允许实现在标识符中具有实现定义的非数字字符的最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:05:25.437

`$`在 C++ 中（例如 bash/Perl）没有特殊含义，并且 C++ 标准没有任何限制。`$`就像任何其他标识符一样。但是这样看起来会很尴尬`int $;`

# java - 不区分大小写的匹配方法

> ID：12542374
> 
> 赞同：2
> 
> 时间：2012-09-22T09:00:06.220
> 
> 标签：java, case-sensitive

当我阅读[关于 Patterns 的 Holub 时](http://www.holub.com/goodies/patterns/)，我发现我无法理解的代码。

代码看起来像这样，如果你愿意，你可以在[这里](http://books.google.co.kr/books?id=1e-4ovUlZy0C&pg=PA263&lpg=PA263&dq=holub+on+pattern+case+insensitive&source=bl&ots=heiqZmTP9V&sig=XA3Gm9-zeI4dLQcw2MPrLDSCe3k&hl=en&sa=X&ei=Nn1dUJ7_Ea2fiAfGgYH4Cg&redir_esc=y#v=onepage&q=holub%20on%20pattern%20case%20insensitive&f=false)阅读部分书籍。

```
/** Matches a simple symbol that doesn't have to be on a "word"
 *  boundary; punctuation, for example. SimpleToken
 *  is very efficient, but does not recognize characters in
 *  a case-insensitive way, as does {@link WordToken} and
 *  {@link RegexToken}.
 *
 *  @include /etc/license.txt
 */

public class SimpleToken implements Token
{   
  private final  String     pattern;

  /** Create a token.
   *  @param pattern a string that defines a literal-match lexeme.
   */

  public SimpleToken( String pattern )
  { this.pattern = pattern.toLowerCase();
  }

  public boolean match( String input, int offset )
  { return input.toLowerCase().startsWith( pattern, offset );
  }

  public String lexeme()  { return pattern; }
  public String toString(){ return pattern; }
} 
```

评论（和书）说 SimpleToken 类“**不**以不区分大小写的方式识别字符”，但该`match`方法以小写比较模式，这意味着它**确实**以不区分大小写的方式识别。

我在这里想念什么？

**编辑**

我在[勘误表中](http://neuroning.com/pages/holub_errata)搜索了这个（虽然不是官方的），但没有。很难将其视为勘误表。它多次提到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:24:36.290

我可以向您保证，此代码*不区分大小写*。

我不在乎评论或书怎么说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:41:28.513

> 很难将其视为勘误表。

尽管如此，这本书是不正确的。该代码显然以不区分大小写的方式匹配令牌，您的实验证实了这一点。即使是作者（和他们的编辑）也会犯错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:13:25.993

有两种方法可以进行匹配：

1.  比较字符，一次一个，并允许将小写字母视为相同字母，仅大写字母。如果这些字符级别匹配中的每一个都相等，则整个字符串都匹配。
2.  一开始将字符串和模式都小写，然后执行精确的字符匹配。

第一种情况不区分大小写，因为“这个字符与那个字符是否相同”问题忽略了字母的大小写。第二个可能区分大小写，因为测试确实考虑了大小写，尽管这个问题没有实际意义，因为您在测试之外将两个字符串都更改为小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T09:19:26.980

显然是搜索`is case-insensitive`。我所能推测的是，只有通过查看（和）才能`can be bugs everywhere`在其中构建。`javadocs` `and in books``javadocs``not at exact code`

# opengl - glu.LookAt 用于具有任意垂直轴方向的倾斜顶置摄像头

> ID：12542376
> 
> 赞同：2
> 
> 时间：2012-09-22T09:00:18.850
> 
> 标签：opengl, camera, glulookat, gambas

[2012 年 9 月 23 日编辑] 从自上而下的角度想象 FPS 控制（扫射、转弯）。现在想象一下，当玩家转动时，整个屏幕都会旋转，所以他们总是面向显示器的顶部。现在想象一下，相对于他们的方向，投射这个的“相机”总是在玩家上方和后方 10 英尺处。这意味着相机以 45 度角俯视风景，随着玩家的转动而旋转。我试图掌握为此所需的代码而失去理智，这就是我迄今为止所得到的结果好坏参半：

```
Public Sub Mode_Perspective()

  ' Set OpenGL matrices to perspective mode.

  ' Set projection mode.
  Gl.MatrixMode(Gl.PROJECTION)
  Gl.LoadIdentity()
  Glu.Perspective(45, sWidth / sHeight, Camera.Near, Camera.Far)
  Gl.MatrixMode(Gl.MODELVIEW)
  Gl.LoadIdentity()
  Gl.Scalef(1, -1, 1 * ElevationScale)

End

Public Sub Update_Camera()

  ' Calculate translated camera position.
  CameraXY = Calculate.TranslateInDirection(Camera.WorldX, Camera.WorldY, 10, Camera.Orientation + 90)

  ' Calculate up vector.
  CameraTarget[0] = Client.PlayerData[Client.Number].WorldX_Current
  CameraTarget[1] = Client.PlayerData[Client.Number].WorldY_Current
  CameraTarget[2] = Client.PlayerData[Client.Number].WorldZ_Current
  CameraLeft[0] = Calculate.RotateX(CameraXY[0], CameraXY[1], Camera.WorldX, Camera.WorldY, 1)
  CameraLeft[1] = Calculate.RotateY(CameraXY[0], CameraXY[1], Camera.WorldX, Camera.WorldY, 1)
  CameraLeft[2] = Camera.WorldZ
  CameraRight[0] = Calculate.RotateX(CameraXY[0], CameraXY[1], Camera.WorldX, Camera.WorldY, -1)
  CameraRight[1] = Calculate.RotateY(CameraXY[0], CameraXY[1], Camera.WorldX, Camera.WorldY, -1)
  CameraRight[2] = Camera.WorldZ
  UpVector = Calculate.Normal(CameraTarget, CameraLeft, CameraRight)

  ' Update OpenGL matrix.
  Glu.LookAt(CameraXY[0], CameraXY[1], Camera.WorldZ, Client.PlayerData[Client.Number].WorldX_Current, Client.PlayerData[Client.Number].WorldY_Current, Client.PlayerData[Client.Number].WorldZ_Current, UpVector[0], UpVector[1], UpVector[2])

End

Public Function TranslateInDirection(StartX As Single, StartY As Single, Distance As Single, Direction As Single) As Single[]

  ' Translate specified coordinates by specified units at specified direction.

  ' General declarations.
  Dim NewXY As New Single[2]

  NewXY[0] = StartX + Distance * Cos(Rad(Direction))
  NewXY[1] = StartY + Distance * Sin(Rad(Direction))

  ' Return new coordinates.
  Return NewXY

End

Public Function RotateX(PWOX As Single, PWOY As Single, OriginX As Single, OriginY As Single, Orientation As Single) As Single

  ' Rotate specified point about specified point and return new X coordinate.

  Return (OriginX + (Cos(Rad(Orientation)) * (PWOX - OriginX) - Sin(Rad(Orientation)) * (PWOY - OriginY)))

End

Public Function RotateY(PWOX As Single, PWOY As Single, OriginX As Single, OriginY As Single, Orientation As Single) As Single

  ' Rotate specified point about specified point and return new Y coordinate.

  Return (OriginY + (Sin(Rad(Orientation)) * (PWOX - OriginX) + Cos(Rad(Orientation)) * (PWOY - OriginY)))

End

Public Function Normal(p1 As Single[], p2 As Single[], p3 As Single[]) As Single[]

  ' Calculate and return surface normal of specified triangle.

  ' General declarations.
  Dim N As New Single[3]
  Dim Magnitude As Single

  ' Calculate normal.
  N[0] = (p2[1] - p1[1]) * (p3[2] - p1[2]) - (p2[2] - p1[2]) * (p3[1] - p1[1])
  N[1] = (p2[2] - p1[2]) * (p3[0] - p1[0]) - (p2[0] - p1[0]) * (p3[2] - p1[2])
  N[2] = ((p2[0] - p1[0]) * (p3[1] - p1[1]) - (p2[1] - p1[1]) * (p3[0] - p1[0])) * -1

  ' Normalize normal.
  Magnitude = Sqr(N[0] ^ 2 + N[1] ^ 2 + N[2] ^ 2)
  N[0] = N[0] / Magnitude
  N[1] = N[1] / Magnitude
  N[2] = N[2] / Magnitude

  Return N

End 
```

以下是我对 Update_Camera 过程所做工作的总结：

1) 暂时将相机移动到其身后十英尺（它松散地跟随玩家）。

2) 计算三个点。一个是玩家的位置，或相机目标。第二个和第三个是移动相机的位置，一个围绕玩家稍微顺时针旋转，另一个稍微逆时针旋转。

3) 使用步骤 2 中的三个点计算“向上”向量。

4) 使用 glu.LookAt 正确定位和定向“相机”。

起初这似乎效果很好，但是当我降低相机或增加它与玩家的距离时，事情开始扭曲。相机似乎放大了，风景的垂直比例似乎增加了。平行于景观渲染的 Sprite 四边形也仍然被渲染，就好像相机在它们的正上方一样，当相机降低时它们应该以增加的视角渲染。我会错过什么？

# ios - 预加载 UITableView 单元格

> ID：12542377
> 
> 赞同：9
> 
> 时间：2012-09-22T09:00:22.050
> 
> 标签：ios, uitableview

我有一个 UITableView，它从数据库中检索一些数据，这些数据的预取成本相对较高。为了解决这个问题，我使用了[LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)示例代码中的设计理念，在滚动结束时使用`[UITableView visibleCells]`.

这在性能方面效果很好，但它有两个我想解决的交互问题：

1.  直到滚动完全停止（即`scrollViewDidEndDecelerating`）才加载数据。因此，如果我在列表中缓慢滚动，我必须停止滚动才能将数据加载到这些可见单元格中。理想情况下，如果滚动速度很慢，我会将数据加载到单元格中。
2.  我想预取 1 或 2 个表格单元格数据，这些表格单元格数据刚刚离开屏幕，期待滚动到它们。

有没有一种优雅的方式来实现这一目标？我觉得我可能错过了解决这个问题的通用设计模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:38:43.073

我认为您可以在滚动开始时开始加载数据，这样您就不必等待滚动结束。您可以使用以下两种方法之一：

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{}

-(void)scrollViewDidScroll:(UIScrollView *)scrollView{} 
```

而且您始终可以获取可见单元格的索引，因此我认为您应该能够加载更多数据而不仅仅是可见单元格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:51:12.420

如果您按原样使用 LazyTableImages 代码，那是正常的。加载被推迟到滚动结束。在我的测试应用程序（一个简单的类似 instagram 的流）中，我使用了一种不同的方法：基本上我将单元格子类化，从单元格本身开始下载，使用单元格作为我的下载管理器的代表，然后更新单元格的 UI下载完成时

详细地

*   我在 cellForRowAtIndexPath 方法中开始下载（如果视图正在滚动，LazyTableImages 会延迟下载，我不这样做，因为对我来说可以在滚动时加载）调用我的单元格的“startDownload”方法。
*   我的单元子类设置为我的下载管理器的代表，当下载完成时，单元格用真实图像更改占位符（这是在自定义的“downloadManagerDidFinishDownloadForImage:(UIImage*)image”委托方法中完成的，在细胞亚类）
*   在我的单元子类中，我重写了 prepareForReuse 方法。在这里，如果要重复使用单元格，我可以选择停止下载。就我而言，我只是取消设置委托并继续下载，因为我有一些使用核心数据进行的图像缓存，我希望缓存继续进行。

此外，您必须注意两件事：

*   您的下载管理器需要在后台线程中工作
*   请务必在主线程中更新您的单元格 UI。您可以使用

：

```
dispatch_async(dispatch_get_main_queue(), ^{
    //update here your cell UI
}); 
```

在委托方法中（如果该方法由您的下载管理器调用，它肯定会在后台线程中调用，因此您必须使用调度“在主线程中“移动”）。

如果你愿意，你可以看看我的例子，但它是“原样”（它是一个测试应用程序，有很多意大利面条代码和与你的问题无关的东西;-)

[http://www.lombax.it/documents/InstaXplore.zip](http://www.lombax.it/documents/InstaXplore.zip)

在我的示例中，您必须查看：

*   BrowseCell <-- 单元子类
*   BrowsePhotoViewController <-- 表格视图控制器

其他的东西都和核心数据存储和instagram有关，但基本上

*   在 cellForRowAtIndexPath 我创建一个新单元格（或重用以前的单元格）并传递一个 InstaImage 项目（我的自定义图像）
*   InstaImage 检查是否存在缓存副本，如果不存在，则开始下载，然后提醒单元格

你有一个清晰的缓存按钮可以一次又一次地尝试:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T05:07:44.383

Lazy Image 逻辑是一个很好的解决方案，我曾经在我的 tableviews 中使用，但最近我一直在为 UITableViews 实现不同的解决方案。首先是实现 NSOperation 队列，就像 Apple 在 WWWDC [https://developer.apple.com/videos/wwdc/2012/?include=211#211中提供的视频中的那些](https://developer.apple.com/videos/wwdc/2012/?include=211#211)

或者您可以尝试创建一个无限滚动，当您到达某个 uitableviewcell 时，您将加载一个包含更多数据的新“页面”，如果您需要有关此解决方案的帮助，请告诉我！

希望这可以帮助！

此致，

乔治。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T15:53:00.923

```
// called on finger up if the user dragged. decelerate is true if it will continue moving afterwards
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate;

(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate)
    {
        //fetch data for visible rows
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T09:59:24.820

如果我没有误解你的问题，我认为你可以使用它。您确实在显示*某些*单元格时加载。

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

} 
```

# c# - NHibernate 是否应该清除 ISessionFactory.Dispose 上的分布式二级缓存？

> ID：12542378
> 
> 赞同：5
> 
> 时间：2012-09-22T09:00:23.827
> 
> 标签：c#, .net, nhibernate

我正在[为`CacheProvider`Redis](https://github.com/TheCloudlessSky/NHibernate.Caches.Redis)工作。我偶然发现了一些对预先构建的[NHibernate Cache Providers](http://nhcontrib.svn.sourceforge.net/viewvc/nhcontrib/trunk/src/NHibernate.Caches/)非常好奇的东西。

在分布式环境中，我希望每个 Web 服务器共享相同的 NHibernate 缓存。因此，如果其中一个 Web 服务器被删除，缓存也不会受到影响（因为集群中的*另一个*Web 服务器仍将使用该缓存！）。

但是，根据我的测试和这些提供程序的来源，每次`ISessionFactory`关闭（调用`Dispose`或`Close`）时，**都会清除整个缓存区域**！

例如，[Memcached Provider](http://nhcontrib.svn.sourceforge.net/viewvc/nhcontrib/trunk/src/NHibernate.Caches/MemCache/NHibernate.Caches.MemCache/MemCacheClient.cs?revision=1697&view=markup#l224)在被调用`Clear()`时`Destroy()`调用。在[of 中](https://github.com/nhibernate/nhibernate-core/blob/88a4f98deb4e4c908d193d12660d741b34d4c8ea/src/NHibernate/Impl/SessionFactoryImpl.cs#L788)[，`Close()``ISessionFactory`](https://github.com/nhibernate/nhibernate-core/blob/88a4f98deb4e4c908d193d12660d741b34d4c8ea/src/NHibernate/Impl/SessionFactoryImpl.cs#L788)每个 created`ICache`都`Destroy()`调用过，最后调用`ICacheProvider`过`Stop()`。因此，即使 Memcached 是分布式缓存，它也会在`ISessionFactory`被处理掉时被清除！

这*真的*是分布式环境中的预期行为吗？每次关闭 Web 服务器时清除*分布式*缓存似乎会产生*大量*缓存未命中，从而失去缓存的全部意义！

我在想的是`Destroy()`应该用来清理任何*资源*（比如`Dispose()`......但它是从 Hibernate 带来的）并且这些缓存提供程序有一个**严重的错误**。例如，我发现的Hibernate [*Memcached*缓存提供程序](https://github.com/raykrueger/hibernate-memcached/blob/master/src/main/java/com/googlecode/hibernate/memcached/MemcachedCache.java#L186) *不在* `clear()`.`destroy()`

FWIW，我已经在 NHibernate Development Group 上[发布了这个。](https://groups.google.com/d/topic/nhibernate-development/oqGFx7BOYew/discussion)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:27:47.493

你说的对。分布式缓存不应该这样，因为它违背了目的。当`Destroy()`被调用时，提供者中调用的函数应该是`Dispose()`. 这个函数只是断开缓存而不清除它，因此其他客户端的数据在分布式缓存中保持不变。

# javascript - 如何为 HTML 页面的特定行添加书签？（应该在 chrome 和 IE 中工作）

> ID：12542379
> 
> 赞同：1
> 
> 时间：2012-09-22T09:00:28.030
> 
> 标签：javascript, html, bookmarks

我正在从一个打印成 HTML 电子书的网站在线阅读内容。

我不想下载任何东西或转换任何东西，但我想为我所在的当前行添加书签，这样当我点击书签时，我想被带到相应的行（不仅仅是页面） .

该站点仅包含文本，因此我无法像 www.wikipedia.org/article#subchapter 那样使用“#”来解决问题

（我为这门粗俗的语言道歉，我是一名初级开发人员，曾在 Java 和 ABAP 工作，但没有网络相关内容的经验）

我想我可以保存实际上是 Javascript 代码的书签，将我带到特定的行，但不知道从哪里开始，不是一个网络人。

任何想法（或实现）都会很棒。

Thx，你们统治。

[编辑] 如果我的书签保存了部分文本，也可以使用 AFAIK，然后单击书签时我会被带到该文本

[编辑]

[http://gutenberg.spiegel.de/buch/2095/2](http://gutenberg.spiegel.de/buch/2095/2)这基本上是网站。不介意德国人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:04:24.467

DOM 中没有一行这样的东西。但是你可以滚动到一个元素。有一个非常好的 jQuery 扩展，它可以[滚动](http://demos.flesler.com/jquery/scrollTo/)到。

但是做一个书签可能有点乱。因为你需要 jQuery 和这个插件。

要使其正常工作，您必须在以下位置添加书签：

```
javascript: document.location = [website url] ; [jQuery's File content] ; [the plugin] ; [jQuery scrollTo code] 
```

在哪里`[jQuery scrollTo code]`会是这样的：

```
$(...).scrollTo( $('ul').get(2).childNodes[20], 800 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:24:25.060

您可以编写一个小 chrome 扩展，每 100 个单词插入一个标签。然后您实际上可以使用您引用的 # 语法。

插入 HTML**：

```
<a name="line40" /> 
```

你的书签

```
<a href="page.html#line40">bookmark</a> 
```

**注意：在 HTML5 中使用带有“ID”的标签而不是带有“name”属性的锚点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T10:11:01.093

BlackJackMack 在总体思路上击败了我，但这里有一些插入元素的代码以及事后跳转到特定散列的方法（因为当你第一次进入页面时，id 不存在时需要）。

```
paragraphs = document.getElementsByTagName('p');
for (x = 0; x < paragraphs.length; x++) {
    var p = paragraphs[x];
    var a = document.createElement('a');
    a.id = 'p' + x;
    a.href = '#' + a.id;
    a.innerText = '#';
    p.parentNode.insertBefore(a, p)
}

if (document.location.hash) {
    var hash = document.location.hash;
    document.location.hash = '';
    document.location.hash = hash;
} 
```

我只在 Chrome 上测试过，所以请记住这一点。可以将其粘贴到控制台中进行试用。我没有使用 jQuery 或任何插件来使其更容易适应书签代码。

请记住，这仅在页面正确使用段落标签时才有效，因此如果所有内容都是 div 或其他内容，则必须对其进行调整。

# grails - grails 2.x 中的 log4j dsl 带有可加性标志

> ID：12542385
> 
> 赞同：0
> 
> 时间：2012-09-22T09:01:19.710
> 
> 标签：grails

我可以使用给定日志级别的可加性标志和附加程序执行以下操作吗？

```
log4j =
{
  appenders
  {
    ...
  }
  root
  {
    debug additivity: true, 'stdout', 'errorlog'
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:01:55.757

您不能在根记录器上设置可加性标志。可加性不是继承的（设置为可`foo`加性`false`也不会自动导致），它只是为所有记录器设置为，除了那些您明确设置为.`foo.bar``false``true``false`

由于可加性标志控制从记录器的父级继承附加程序，因此允许在根记录器上进行可加性设置是没有意义的，根据定义，根记录器没有父级。

# android - 如何从 php webservice 获取 JSON 数据：“no value for data”错误

> ID：12542387
> 
> 赞同：0
> 
> 时间：2012-09-22T09:01:23.937
> 
> 标签：android, json

我是 Android 平台的新手，我想通过`JSON`Parser 从 PHP Web 服务中获取值。但我没有得到数据，而是错误：`No value for data25 ,data26 and data27`.

感谢您对解决此问题的任何帮助。

```
try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++)
            {
            HashMap<String, String> map = new HashMap<String, String>();

              JSONObject json_data = jArray.getJSONObject(i);

            map.put("data25", "date25:" + json_data.getString("data25"));
            map.put("data26", "data26:" + json_data.getString("data26"));
            map.put("data27", "data27:" + json_data.getString("data27"));

            mylist.add(map);

            } 
```

JSON结果如下：

```
[
{
    "data1": "5794",
    "data2": "2922",
    "data3": "6799",
    "data4": "2729",
    "data5": "9860",
    "data6": "4486",
    "data7": "9903",
    "data8": "0113",
    "data9": "9936",
    "data10": "5470",
    "data11": "7423",
    "data12": "1237",
    "data13": "6564",
    "data14": "1261",
    "data15": "4730",
    "data16": "7714",
    "data17": "2410",
    "data18": "7486",
    "data19": "7046",
    "data20": "8263",
    "data21": "4305",
    "data22": "6244",
    "data23": "2495",
    "data24": " 19\/09\/2012(Wed)"
},
{
    "data1": "555",
    "data2": "039",
    "data3": "353",
    "data4": "1438",
    "data5": "8720",
    "data6": "7490",
    "data7": "1294",
    "data8": "4000",
    "data9": "6017",
    "data10": "2294",
    "data11": "4042",
    "data12": "0064",
    "data13": "8441",
    "data14": "1252",
    "data15": "9609",
    "data16": "0797",
    "data17": "1680",
    "data18": "0917",
    "data19": "7492",
    "data20": "9488",
    "data21": "3253",
    "data22": "7915",
    "data23": "1071",
    "data24": " 19\/09\/2012(Wed)",
    //--heredata25,
    data26,
    data27----------"data25": "9555",
    "data26": "3039",
    "data27": "6353"
},
{
    "data1": "0395",
    "data2": "5928",
    "data3": "8998",
    "data4": "6447",
    "data5": "1827",
    "data6": "8131",
    "data7": "7454",
    "data8": "4647",
    "data9": "1892",
    "data10": "3656",
    "data11": "1989",
    "data12": "9095",
    "data13": "6826",
    "data14": "1860",
    "data15": "9766",
    "data16": "6069",
    "data17": "6050",
    "data18": "6526",
    "data19": "8392",
    "data20": "0520",
    "data21": "7540",
    "data22": "3608",
    "data23": "7430",
    "data24": " 19\/09\/2012(Wed)"
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:50:05.020

根据您发布的响应，它是 JSONObjects 的 JSONArray。每个 JSONObject 都包含带有诸如 data1、data2...etch 之类的键的值。但是每个 JSONObject 都不包含键 data25、data26、data27。如果您不想抛出异常，即使响应不包含每个 JSONObject 中的 data25、data26、data27 键，那么您需要修改如下代码：

```
 JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++)
        {
        HashMap<String, String> map = new HashMap<String, String>();

          // getJSONObject() will throw exception if the key is not found in the jsonObject. Instead of it use optJSONObject() to get the values from JSONObject. It returns the value if contains otherwise returns the empty jsonObject.
          // JSONObject json_data = jArray.getJSONObject(i);
          JSONObject json_data = jArray.optJSONObject(i);

        //map.put("data25", "date25:" + json_data.getString("data25"));
         map.put("data25", "date25:" + json_data.optString("data25")); // returns empty string on not finding the key in JSONObject.

        //map.put("data26", "data26:" + json_data.getString("data26"));
        //map.put("data27", "data27:" + json_data.getString("data27"));

        mylist.add(map);

        } 
```

# html - 3 DIV's - Centre Middle 和其他占据剩余空间

> ID：12542388
> 
> 赞同：0
> 
> 时间：2012-09-22T09:01:46.683
> 
> 标签：html, css

![在此处输入图像描述](../Images/16dc5116034021bad6cb54c1b9bce291.png)

我需要 3 个 DIV - 您可以在上图中看到 3 种颜色。

中间的 DIV 需要始终为 960 像素，并且所有内容都需要居中（您可以看到上面的 2 条灰线）。

其他 2 DIV 需要占用所有其他可用空间。如果我放大和缩小页面，红色和黄色的 DIV 需要随页面一起扩展，而中间的绿色仍然居中。

我已经尝试过 DIV 解决方案和 Table 解决方案，但我无法让它适应。

HTML

```
<div id="div1" style="background-color:red"></div>
<div id="div2" style="background-color:red"></div>
<div id="div3" style="background-color:red"></div> 
```

任何意见，将不胜感激。

谢谢

** 更新：http: [//jsfiddle.net/scxAq/](http://jsfiddle.net/scxAq/)

努力解决这个问题......成功有限......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:14:33.753

您需要向我们展示 css 代码以了解您到底在做什么。但据我了解，我认为你需要这个：

```
#div2{
    margin-left:auto;
    margin-right:auto;
} 
```

这将使中间居中`div`。我希望这是你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:33:21.813

有点陷阱，但它应该以响应的方式工作。

代码：

```
<div id="wrapper">
<div id="div1" style="background-color:red;"><p>test</p></div>
<div id="div2" style="background-color:green;"><p>test</p></div>
<div id="div3" style="background-color:yellow;"><p>test</p></div>
</div>​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
​#wrapper {
    width:100%;
    position:relative;
    overflow:hidden;
}
#div2 {
    z-index:2;
    margin:0 auto;
    width:960px;
}
#div1, #div3 {
    position:absolute;
    top:0;
    width:50%;
    z-index:1;
}
#div1 {
    margin-left:-480px; /* half of central div */
}
#div1 > * {
    margin-left:480px; /* half of central div */
}
#div3 {
    right:0;
    margin-right:-480px; /* half of central div */
}
#div2 > * {
    margin-right:480px; /* half of central div */
}​ 
```

[现场演示](http://jsfiddle.net/gionaf/xsxks/)（尝试调整窗口大小）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:30:26.127

HTML

```
 <div class="left">hello world!</div>
<div class="center"></div>
<div class="right"> blah balh blah blah balh blah blah balh blah</div> 
```

CSS

```
.left{
float: left;
width:auto;
background-color:red;
height:30px;
 }
.center{
float: left;
width:960px;
background-color:blue;
margin:auto;
height:30px;
}
.right{
float: left;
width:auto;
background-color:yellow;
height:30px;
} 
```

# iphone - 像 Vimeo 这样的 iOS 原生应用程序如何将 cookie 设置为移动 Safari？

> ID：12542389
> 
> 赞同：10
> 
> 时间：2012-09-22T09:01:54.343
> 
> 标签：iphone, ios, ipad, mobile-safari, privacy

我发现 Vimeo iOS 本机应用程序可以将 cookie 设置为移动 Safari。它是怎么做的？

回购步骤：

1、在iOS设备上安装Vimeo iOS原生应用。

2、打开这个 Vimeo iOS 原生应用，然后用你的 Vimeo 账号登录。

3、打开手机版Safari，然后打开网页“https://vimeo.com/”。您发现您没有登录 Vimeo。

4、打开Vimeo iOS原生应用，然后点击左侧导航栏中的“帮助（问号）”图标。你会看到 Vimeo 的网页帮助中心是通过 UIWebView 打开的。然后你可以关闭这个帮助中心。

5、打开手机Safari，然后打开网页“https://vimeo.com/”。您发现您已登录 Vimeo。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T05:47:28.653

如[this question](https://stackoverflow.com/q/5954382/937822 "这个问题")所示，您可以使用类设置cookie `NSHTTPCookieStorage`。

**编辑：**
正如 Kitsune 指出的那样，文档指出这在 iOS 中的**应用程序之间**不会像在 OSX 中那样工作。

我现在没有时间对此进行测试，但也许您可以使用 javascript 设置一个 cookie `stringByEvaluatingJavaScriptFromString`，并且它的方法`UIWebView`将被共享？这是我在互联网上找到的一个可以调用的函数：

```
function SetCookie(cookieName,cookieValue,nDays) {
 var today = new Date();
 var expire = new Date();
 if (nDays==null || nDays==0) nDays=1;
 expire.setTime(today.getTime() + 3600000*24*nDays);
 document.cookie = cookieName+"="+escape(cookieValue)
                 + ";expires="+expire.toGMTString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T06:03:18.690

It's possible that vimeo's native app is passing some kind of sign in token through the query string to the help page, which could immediately redirect you to a page with no signin token in the URL any more after setting a cookie. Since the cookie is set by the web server to the UIWebView (Safari), it's found when you use the Safari app.

That wouldn't require a supporting API in iOS...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-08T19:07:41.433

这显然不会在 OP 提出问题时适用，但最近 cookie 在 Safari 和`SFSafariViewController`iOS 9 和 10 中的实例之间共享。Vimeo 可以通过不可见设置 cookie`SFSafariViewController`来实现此结果。但是，**这在 iOS 11 中发生了变化。**展望未来，每个应用程序（包括 Safari 本身）都将拥有一个完全沙盒化的数据存储。官方公告[在这里](https://developer.apple.com/videos/play/wwdc2017/702/)（在 17:28 标记）。

在 iOS 11 中，这样的行为将不再可能（事实上，阻止它是 Apple 关于此更改的公告中的特色示例）。

如果您需要一种方法将有保证的用户匹配从 Safari 传递到您的应用程序，您将需要使用现有的设备匹配网络，例如[Branch.io](https://branch.io)（完全披露：我在 Branch 团队中）。[您可以在此处](https://dev.branch.io/getting-started/matching-accuracy/)阅读有关 Branch 使用的技术而不是 cookie passthrough 的信息。

# crystal-reports - 我在空白页中运行 CrystalReportViewer 我无法进入下一页？

> ID：12542391
> 
> 赞同：2
> 
> 时间：2012-09-22T09:01:58.463
> 
> 标签：crystal-reports

我使用此代码重定向到空白页

```
Response.Write("<script type='text/javascript'>window.open('Show_Report_Goods.aspx', '_blank','location=0');</script>"); 
```

如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:53:58.907

您在哪里使用此代码，也许您在页面回发中使用了此代码，它在页面回发中不起作用。去别的地方试试……

# android - 我应该在表单中使用标签或提示吗？

> ID：12542393
> 
> 赞同：2
> 
> 时间：2012-09-22T09:02:09.413
> 
> 标签：android, forms, user-interface, usability

我不确定哪种方法是设计表单的更好方法。

*   当我们有实现相同目标的提示时，标签似乎有点毫无意义（它们占用了宝贵的空间）
*   另一方面，当您将字符放入 InputText 时，提示消失
*   当您预先填写表单（例如，您正在编辑项目）时，可能更糟糕的是 - 然后您看不到任何提示

有什么推荐的解决方案，还是我应该坚持我自己喜欢的那个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T09:09:07.043

正如您自己怀疑的那样，提示是否足够，我会使用标签。对用户来说越明显越好。

尤其是在使用预填充表单时，提示对用户是不可见的，因此没有任何用处。

并且您应该使用放置在输入字段上方的标签，而不是标签。这似乎得到了[可用性专家](http://www.thatwebguyblog.com/post/15-steps-towards-better-form-usability/)的更好评价，并且不会减少用户输入文本的空间。它需要更多的垂直空间并不是什么大问题，因为用户习惯于垂直滚动，尤其是在屏幕空间有限的移动设备上。

# android - 服务中的消息处理程序是静态的有多重要？

> ID：12542394
> 
> 赞同：0
> 
> 时间：2012-09-22T09:02:14.023
> 
> 标签：android, static, android-service, android-handler

考虑一个相当基本的服务：

```
class KeepANumberService extends Service {
    // The codes used in incoming messages
    final static int REQUEST_SET_NUMBER = 0;
    final static int REQUEST_GET_NUMBER = 1;

    // The information this service works with internally
    int numberToKeep = 0;

    // The handler for incoming messages
    private IncomingMessageHandler incomingMessageHandler = new IncomingMessageHandler();

    // Start up and close down stuff
    < Insert standard start up and close down code OnCreate, OnBind etc etc here >

    void returnNumber(Messenger destination) {
         Message msg = <construct message with numberTo>;
         destination.send(msg);
    }

    // Handler that receives messages from the thread
    private class IncomingMessageHandler extends Handler {

        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case REQUEST_SET_NUMBER:
                numberToKeep = msg.whatever; // get data from wherever it's hidden in the msg
                break;
            case REQUEST_GET_NUMBER:
                returnNumber(msg.replyTo);
                break;
            } 
          }
      }
  } 
```

}

现在，如果我在运行 lint 的 eclipse 中开发它，我目前可以在两个选项之间进行选择：

1.  上面的代码将在私有 final 类 IncomingMessageHandler 行上有一个警告，说它应该被声明为静态，以确保一切在运行时正常工作。
2.  如果我将该类 (IncomingMessageHandler) 设为静态，它就不能再访问整个类 (KeepANumberService) 中的数据和函数，这对编码来说是一种痛苦（在某些情况下可能是不可能的？）。

那么，使消息处理程序静态化有多重要？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:28:59.980

关键字`static`，当用于内部类定义时，表示内部类不需要对外部类的引用。`struct`如果内部类是“数据容器”（想想“在 C 中”），通常你会这样做。在您的情况下，您的内部类不是数据容器，它只是一个私有内部类，它具有方法并且需要访问外部类的成员变量。所以绝对没有理由将这个类声明为静态的。那会适得其反。

查看您的代码，我不知道为什么您会收到声明此类静态的警告。忽略它。

# iphone - 如何在 UIAlertView 的两个水平显示按钮之间放置空间？

> ID：12542397
> 
> 赞同：0
> 
> 时间：2012-09-22T09:03:11.033
> 
> 标签：iphone, objective-c, ios, xcode, uialertview

*这可能是一个简单的问题？*

但我不知道如何在 的两个按钮之间放置空格`UIAlertView`。所以请帮助我如何在 UIAlertView 的两个水平按钮之间放置空间。

**UIAlertView 的代码：**

在我的**AlertView**中，我还添加了`UITextFiewd`

```
-(void)add:(UIBarButtonItem *) sender
{
    self.alertView = [[UIAlertView alloc] initWithTitle:alertViewTitle message:@"\n\n" delegate:self  cancelButtonTitle:@"Cancle"
                                      otherButtonTitles:@"Save",nil];

    self.alertTxtField = [[UITextField alloc]initWithFrame:CGRectMake(15, 55, 260, 35)];
    self.alertTxtField.backgroundColor = [UIColor whiteColor];
    self.alertTxtField.returnKeyType = UIReturnKeyDone;
    self.alertTxtField.delegate = self;
    [alertView addSubview:self.alertTxtField];

    [alertView show];

} 
```

**我的截图：**

![在此处输入图像描述](../Images/99b7bf936538bbc37beb052712601492.png)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:41:24.747

出于您的目的，我认为您需要像使用文本字段一样向 AlertView 添加自定义按钮。您需要创建两个`UIButtons`并设置适当的框架并将其设置为 alertview 为`subView`. 您的方法将更改为：

```
-(void)add:(UIBarButtonItem *) sender
{
    self.alertView     = [[UIAlertView alloc] init];
    alertView.delegate = self;
    alertView.title    = alertViewTitle ;

    self.alertTxtField = [[UITextField alloc]initWithFrame:CGRectMake(15, 55, 260, 35)];
    // You need to allocate two buttons here and set the frame
    //add it to alerts sub view
    self.alertTxtField.backgroundColor = [UIColor whiteColor];
    self.alertTxtField.returnKeyType = UIReturnKeyDone;
    self.alertTxtField.delegate = self;
    [alertView addSubview:self.alertTxtField];

    [alertView show];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:21:59.357

你不能在`UIAlertView`课堂上做到这一点。正如评论中提到的，您要么必须从头开始编写自己的类，要么使用在[github](http://www.github.com)`UIAlertView`等网站上在线找到的替代类之一。一个快速的谷歌搜索带来了这个类：[CODialog](https://github.com/eaigner/CODialog)。

您可能还会考虑是否真的想在那里放置一个空间，因为默认外观是用户在基本上所有其他应用程序中看到的。

# c++ - boost property_tree::json_parser::read_json & iostreams::filtering_streambuf

> ID：12542399
> 
> 赞同：0
> 
> 时间：2012-09-22T09:03:19.180
> 
> 标签：c++, json, boost, stream

我试图读取放气的 json 并遇到类型转换问题，这里是代码

```
boost::iostreams::filtering_streambuf<boost::iostreams::input> in;
std::istringstream iss(std::ios::binary);
iss.rdbuf()->pubsetbuf(buf, len);
iss.imbue( std::locale("ru_RU.CP1251") );
in.push( boost::iostreams::zlib_decompressor() );
in.push( iss );

boost::property_tree::ptree pt;
boost::property_tree::json_parser::read_json(in, pt); // <-- Compile error 
```

编译器说：

> src/ABPacking.cpp:48: 错误: 没有匹配函数调用'read_json(boost::iostreams::filtering_streambuf, std::allocator, boost::iostreams::public_>&, boost::property_tree::ptree&) '</p>

问题是如何在没有不必要的数据复制的情况下将**filtering_streambuf**传递给**read_json ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:53:36.310

`read_json`需要一个文件名或带有 JSON 内容的*流。*您正在尝试传递一个流*缓冲区*，它不知道如何处理它。

作为一种解决方案，只需将流缓冲区传递给`istream`消耗它的一个并将其传递给`read_json`：

```
std::istream input(&in_buf);
read_json(input, pt); 
```

# mysql - MySQL Workbench 更改表

> ID：12542409
> 
> 赞同：3
> 
> 时间：2012-09-22T09:04:26.993
> 
> 标签：mysql, sql, mysql-workbench, alter-table

我用 mysql 工作台创建了一个表。

“申请”前的截图；

![在此处输入图像描述](../Images/88fae5b53405cd0c2caf968afb8dc810.png)

它创建的表没有任何错误。

“Alter Table...”之后的截图；

![在此处输入图像描述](../Images/018388c5708fcb5f82fd192c2356efc4.png)

这是土耳其人的性格问题吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:06:22.923

根据屏幕截图，我猜数据类型：(10) (11) 和空的是问题所在。

如果不是，您应该发布错误消息（它应该包含生成的 sql）。

# opencv - 将灰度图像复制到 Mat_ 类型的第一个通道

> ID：12542418
> 
> 赞同：1
> 
> 时间：2012-09-22T09:05:16.293
> 
> 标签：opencv

到目前为止，我已经了解到这`merge()`是一种将特定频道从源复制到目标的选项，但我似乎无法完全理解如何实现这一点。

我的示例代码：

```
Mat_<float> my_grayscale_image = load_image(some_image, CV_LOAD_IMAGE_GRAYSCALE);
Mat_<Vec2f> my_grayscale_2chan; 
```

所以基本上我想将灰度图像复制`my_grayscale_image`到新的 2 通道图像的第一个通道中`my_grayscale_2chan`。

我希望有人能指出我正确的方向，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:43:33.373

`cv::merge`用于将多个 Mat 对象连接到一个 Mat 中，例如您可以`Mat_<Vec2f>`从 2`Mat_<float>`

```
Mat_<float> first, second;
Mat_<Vec2f> result;
Mat tmp[] = { first, second };
merge(tmp, sizeof(tmp)/sizeof(Mat), result); 
```

要将通道复制到现有的 Mat 对象中，您可以使用通用[mixChannels](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#mixchannels)函数。或者您的案例有一个未记录的速记：

```
//void cv::insertChannel(InputArray _src, InputOutputArray _dst, int coi)
insertChannel(my_grayscale_image, my_grayscale_2chan, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:03:52.990

您可以尝试以下...

```
cvMerge(my_grayscale_image,NULL,NULL,NULL,my_grayscale_2chan).. 
```

# ruby-on-rails - 在视图中显示带有 solr 结果的连接表信息

> ID：12542419
> 
> 赞同：0
> 
> 时间：2012-09-22T09:05:23.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, solr, has-many-through, sunspot

我有一系列面料，每种面料都有多种颜色。

我的数据库关联 Fabric has_many Colors through Fabric_colours

我正在使用 solr 来索引我的 Fabrics，因此无法构建复杂的 SQL 查询。

连接模型 Fabric_colours，保存 fabric_id colour_id 百分比

颜色模型保存每种颜色的十六进制值。

我想在我的视图中显示，

所述织物中存在的每种颜色，所述颜色存在的百分比

我的观点是一次加载几十个结构，我不想执行额外的查询来获取这些信息。据我了解，Solr 已将所有关联表的数据提取到单个“文档”中，因此没有必要这样做。

目前在我的 _fabric 部分中，我有以下代码显示该织物中存在的颜色。

```
 <% fabric.colours.each do |c| %>
        <%= c.hex %>
    <% end%> 
```

我如何调用链接织物和特定颜色的特定连接表条目来提取百分比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:09:35.330

Solr can store data inside its index so it won't hit the database when you want to display the data. I recommend you the [sunspot](https://github.com/sunspot/sunspot) gem that will you to achieve this. Checkout its wiki, especially the [Setting up classes for search and indexing](https://github.com/sunspot/sunspot/wiki/Setting-up-classes-for-search-and-indexing) section where it is described.

Be aware that this way leads to data doubling - you will have the same data stored in the database and in the solr index.

Instead of storing data in solr index I advise you to use eager loading. You can preload colour percentages and also the color objects in the controller.

```
def show
  # Loads fabrics, the join table and colours
  @fabrics = Fabric.includes(:fabric_colours => [:colour])... # .all or .where or whatever
end

def search
  # Searches for fabrics with eager loading
  search = Fabric.search(:include => { :fabric_colours => :colour }) do
    # ... search criteria
  end
  @fabrics = search.results
end 
```

If this is still slow for you, use caching.

# java - Java - 如何有效地绘制图形

> ID：12542422
> 
> 赞同：2
> 
> 时间：2012-09-22T09:05:35.213
> 
> 标签：java, graphics, draw

我在这里尝试做的是尽可能快地渲染我游戏中的所有图形。该游戏是基于图块的，需要渲染大量图像。我遇到的问题是绘制所有图像需要很长时间。我不知道我是否应该以特殊方式绘制图块，但现在我正在逐一渲染视口内的所有图块。

这是我的绘图方法：

```
public void draw(Graphics2D g){

    boolean drawn=false; // if player is drawn
    int px=vpPosX, py=vpPosY; // Viewport Position

    for(int y=Math.round(py/64); y<Math.round(py/64)+core.blcHeight; y++){
        for(int x=Math.round(px/64); x<Math.round(px/64)+core.blcWidth; x++){
            if(y<height && x<width && y>-1 && x>-1 && worldData[currentLayer][x][y] != 0){ // if tile is inside map
            BufferedImage img = tileset.tiles[worldData[currentLayer][x][y]]; //tile image
            if(-py+player.PosY+64-15 < (y*64)-py-(img.getHeight())+64 && drawn==false){player.draw(g);drawn=true;} // if player should be drawn
                if(worldBackground[currentLayer][x][y]!=0){ // if tile has background
                    BufferedImage imgBack = tileset.tiles[worldBackground[currentLayer][x][y]]; // background tile
                    g.drawImage(imgBack, (x*64)-px-(((imgBack.getWidth())-64)/2), (y*64)-py-(imgBack.getHeight())+64, null); //draw background
                }
                g.drawImage(img, (x*64)-px-(((img.getWidth())-64)/2), (y*64)-py-(img.getHeight())+64, null); // draw tile
            }
        }
    }

    if(!drawn){player.draw(g);} // if drawn equals false draw player

    } 
```

所有图像都加载到tileset 类中。
游戏的 fps/ups 锁定在 60。
此方法是从具有游戏循环的核心类调用的。

我想知道的是我做错了什么？
我需要更改绘图方法吗？
我需要以特殊方式加载图像吗？
我需要改变我的绘画方式吗？

我的目标是制作一个无延迟的 2d 瓷砖游戏。

我自己注意到的事情是我保存平铺图像的缓冲图像是 RGBA 格式的。但是当我把它做成 RGB 时，渲染时间要少得多。我知道额外的信息需要更多的时间来绘制。但我不知道它到底有多少。

我设法找到了使性能更好的一件事。
如果我加载了所有图像并将它们复制到以这种方式创建的图像中：

```
BufferedImage bi = ImageIO.read(ims[i]);
GraphicsConfiguration gc = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
BufferedImage b = gc.createCompatibleImage(bi.getWidth()*4, bi.getHeight()*4, BufferedImage.TYPE_INT_ARGB);
Graphics2D g = b.createGraphics();
g.drawImage(bi, 0, 0, bi.getWidth()*4, bi.getHeight()*4, null);
tiles[id]=b;
g.dispose(); 
```

然后，绘制所有瓷砖花费的时间要少得多。但它仍然可以更好。当我要制造光引擎时（例如地下）。然后我将不得不在瓷砖上使用透明矩形。或者，如果有人可以建议一种更好的方法，在不使用透明矩形的情况下使瓷砖更暗。但问题是，在尝试绘制透明矩形时也会出现滞后。我不知道我是否应该避免使用透明图像和矩形或什么。

希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:37:09.500

您可能会发现一些有用的技巧：

*   如果您有很多**静态背景图块**，则**不要在每一帧都重绘它们**- 只需将它们绘制一次到 BufferedImage 中，然后使用它一次性绘制整个背景。如果其中一个图块发生更改或滚动屏幕等，您只需要更新此背景图像。
*   确保您**只绘制可见的瓷砖**。看起来您可能正在这样做，但如果 core.blcHeight 和 core.blcWidth 太大，那么您可能会绘制太多图块。
*   **不用担心锁定到 60FPs**。对于基于图块的游戏，这可能不是必需的。我建议将您的游戏逻辑与帧速率分离，并让游戏以它可以处理的任何速度渲染。
*   对于纯色背景图块，您**不需要使用 alpha shading 进行绘制**。在某些情况下，这可以显着加快绘图速度。即你可以使用`TYPE_INT_RGB`而不是`TYPE_INT_ARGB`

如果您真的想要高性能绘图/动画，那么您可能需要考虑切换到基于 OpenGL 的渲染引擎 -例如[Slick2D](http://slick.cokeandcode.com/)或[LWJGL](http://www.lwjgl.org/)。

# c# - 重定向到其他页面后如何显示响应消息？

> ID：12542428
> 
> 赞同：0
> 
> 时间：2012-09-22T09:05:57.880
> 
> 标签：c#, javascript, asp.net

我正在使用 ASP.NET 和 C#。在单击提交后的注册页面中，我将所有详细信息存储在数据库中并重定向到登录页面。因此，在登录页面中，我需要显示成功注册的消息。

有人可以告诉我这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:08:51.140

使用查询字符串将消息传递到登录页面并在标签的帮助下显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T09:09:26.757

您可以在登录页面上创建一个标签，并且一旦响应。将用户重定向到登录页面，您就可以传递会话或查询字符串，因为他们已成功注册。

在登录页面的 onload 事件处理程序上，检查查询字符串/会话是否包含您插入的任何内容，如果有，则在标签中显示消息，否则忽略。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T10:25:54.743

成功注册用户后，使用

```
Response.Redirect("YourLoginPage.aspx?status=registered"); 
```

在`YourLoginPage.aspx`页面中，

```
string strStatus = Request.QueryString["status"].ToString();
if(strStatus.ToUpper()=="REGISTERED")
Response.Write("You are registered successfully"); // or place it in any label. 
```

如果您想同时登录他，您可以`Session`同时存储身份验证详细信息和调用登录方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T09:23:06.377

为此，您可以使用 Session、QueryString、Cookie。

但我建议在同一注册页面上向您显示消息。并在页面上放置继续按钮，这会将用户重定向到主页或其他页面。

为什么我说在同一页面上显示消息，因为一件事是固定的，如果注册成功，您将重定向用户，否则您将显示错误。

Session, QueryString 将是一个简单方便的选择：

```
Session["RegisterMessage"] = "Hello User, You have successfully registered"; 
```

或者

```
Response.Redirect("Home.aspx?msg=Hello User, You have successfully registered"); 
```

您可以在页面上的标签上显示此值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T09:13:08.033

您应该在会话或登录页面上存储消息或信息。

在页面加载时检查会话或消息是否不为空，然后使用 javascript 通过警报框显示消息。

# ruby-on-rails - 达尔文库验证尚未实施

> ID：12542433
> 
> 赞同：0
> 
> 时间：2012-09-22T09:06:37.180
> 
> 标签：ruby-on-rails, ruby, macos, rvm

尝试在 OS X 上设置 Rails 环境。当我运行时`rvm reinstall all --force`，我收到一条错误消息：

```
"Darwin libraries validation not yet implemented" 
```

在 Google 中没有提及该错误消息。我很好奇这意味着什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:46:00.160

此消息是因为 Linux bianry ruby​​ 已通过 验证`ldd`，可以使用`otool -L`此处实现对 OSX 的相同检查：[https ://github.com/wayneeseguin/rvm/blob/master/scripts/external#L307](https://github.com/wayneeseguin/rvm/blob/master/scripts/external#L307)

您可以找到有关二进制红宝石阅读的更多信息：

```
rvm help install
rvm help mount 
```

# sql - 如何在sql中得到这个结果？

> ID：12542439
> 
> 赞同：1
> 
> 时间：2012-09-22T09:07:04.017
> 
> 标签：sql

这是可用的数据库。

```
create table tab1 (
  masterid integer(2) primary key,
  name varchar(22),
  l2 integer(2)
);

insert into tab1 values(1,'g-1',50);
insert into tab1 values(2,'g-1',50);
insert into tab1 values(3,'g-1',50);
insert into tab1 values(50,'grup1',-1);
insert into tab1 values(5,'g-1',50);
insert into tab1 values(60,'grup2',-1);
insert into tab1 values(7,'g-2',60);
insert into tab1 values(8,'g-2',60); 
```

也可在：[http ://sqlfiddle.com/#!2/b7fe9/1](http://sqlfiddle.com/#!2/b7fe9/1)

结果应该是分组的。例如，第 50,grup1,-1 行有 50 将用作主键，并且无论哪一行在 l2 列中具有该 masterID（此处为 50），都应该被检索。所以基本上我想要以下输出。

```
MasterId    Name    l2  
   50       grup1   -1
   1        g-11    50
   2        g-12    50
   3        g-13    50
   5        g-14    50
   60       grup2   -1
   7        g-21    60
   8        g-22    60 
```

请注意，所有组将在 L2 列中具有 -1 值。我已经尝试了很多事情，但我很困惑这个输出是否可以实现。我将感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:13:47.747

试试这个查询：

```
SELECT *
FROM tab1
-- Order records by "master id groups", first
ORDER BY CASE WHEN l2 = -1 THEN Masterid ELSE l2 END,
-- Within a "master id group", get the master first and then its children
         CASE WHEN l2 = -1 THEN 0        ELSE 1 END 
```

或者，您可以修改`ORDER BY`子句的更多表达式，以订购“兄弟姐妹”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:58:44.997

最好将数据规范化为组表，并使用 l2 作为外键。您可能无法获得所需的输出，但您可以编写代码以使用组数据来执行您需要对数据执行的操作。

```
create table groups (
  masterid integer(2) primary key,
  name varchar(22),
);
create table tab1 (
  masterid integer(2) primary key,
  name varchar(22),
  l2 integer(2)
);

insert into groups values(50,'grup1');
insert into groups values(60,'grup2');
insert into tab1 values(1,'g-1',50);
insert into tab1 values(2,'g-1',50);
insert into tab1 values(3,'g-1',50);
insert into tab1 values(5,'g-1',50);
insert into tab1 values(7,'g-2',60);
insert into tab1 values(8,'g-2',60); 
```

# susy-compass - 将 Susy 与 Codekit 一起使用

> ID：12542445
> 
> 赞同：1
> 
> 时间：2012-09-22T09:09:04.683
> 
> 标签：susy-compass

嗨，我尝试使用 codekit。我已经安装了最新的 codekit 版本（1.26）除了我还通过终端安装了最新版本的 sass 和 compass。在 Codekit 中，我切换到使用安装在终端中的外部版本的指南针。根据 Codekit 开发人员的说法，目前这是必要的，因为对于指南针扩展，内部代码包指南针版本是外部的，这会导致一些依赖性问题。然后我从 github 下载了最新的 susy 压缩版本。在我的项目的 config.rb 文件中，我为 susy 的普通解压缩版本设置了要求：

```
require "/Users/danton/Documents/Coding/Templates/Compass/susy-d6a2a1f/lib/susy.rb"; 
```

在我的 scss 文件中：

```
@import 'susy'; 
```

在我设置的整个页面的包装器 div 中：

```
.wrapper {
    width: 100%;
    @include container;
    @include susy-grid-background;
    @include bleed;

} 
```

Bleed 是 Eric 在这里发布的 mixin。直到那里一切看起来都很好。我得到了 susy 网格背景和 bleed mixin，元素被拉伸到整个页面宽度。但是，当我尝试添加“跨列”代码包时，编译时会出现错误：

```
error style.scss (Line 24 of _layout.scss: Undefined mixin 'span-columns'.) 
```

_layout.scss 中与 susy 相关的代码如下所示：

```
$total-columns: 24;
$column-width: 4em;
$gutter-width: 1em;
$grid-padding: $gutter-width;  // 1em

@mixin bleed($padding: $grid-padding, $sides: left right) {
  @if $sides == 'all' {
    margin: - $padding;
    padding: $padding;
  } @else {
    @each $side in $sides {
       margin-#{$side}: - $padding;
       padding-#{$side}: $padding;
    }
  }
}

.testcol { @include span-columns(18,24); } 
```

我是否也必须在终端中安装 susy，而不是仅链接到未压缩的 zip 文件或如何才能使事情顺利进行。仍然不确定是什么导致编译错误？我用过的代码？代码包？苏西？如果有人提示如何使事情正常进行，那就太好了。提前致谢。河。

# php - 将 PHP 代码从 MSSQL 迁移到 MySQL

> ID：12542449
> 
> 赞同：4
> 
> 时间：2012-09-22T09:09:45.447
> 
> 标签：php, mysql, sql-server

我目前有一个连接到 MSSQL 以获取其数据的大型 Web 应用程序。这个网络应用程序有数百个 .php 文件。我有一个新客户，他不想使用 MSSQL，而是使用 MySQL。

我搜索并找到了很多关于如何迁移数据的文章。但这不是我的问题。我知道该怎么做，除了我们将从一个空白数据库开始，除了一些默认目录。

我需要知道的是是否有办法自动将 mssql_query 代码更改为 mysqli 代码。例如：

```
$SqlText = 'SELECT a, b, c FROM table WHERE x=y';
if (!$result = mssql_query($SqlText) {
   die('Error');
}
while ($row = mssql_fetch_assoc($result) {
   echo '<td>' . $row['a'] . '</td>';
   echo '<td>' . $row['b'] . '</td>';
   echo '<td>' . $row['c'] . '</td>';
} 
```

变成这样的东西：

```
$SqlText = 'SELECT a, b, c FROM table WHERE x=y';
if (!$result = mssqli_query($db, $SqlText) {
   die('Error');
}
while ($row = mssqli_fetch_assoc($result) {
   echo '<td>' . $row['a'] . '</td>';
   echo '<td>' . $row['b'] . '</td>';
   echo '<td>' . $row['c'] . '</td>';
} 
```

此外，如您所见，我使用的是旧的 mssql_query 代码，新版本的 PHP 甚至不支持它。是否至少有一个工具可以将我的代码从 mssql_query 更改为新版本的 sqlserv_query 类型的命令？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:16:09.527

我不认为有一种完全自动的方式。因为 MySQL 有“LIMIT”，例如 MSSQL 有“TOP”。当然这不是问题，但我不确定复杂的 MSSQL 查询是否会 1:1 转换为 MySQL。

并建议你使用`` 符号来向MySql 指出它是一个数据库、表或列名的成员。例子：

```
$SqlText = 'SELECT a, b, c FROM table WHERE x=y'; 
```

将更改为

```
$SqlText = 'SELECT `a`, `b`, `c` FROM `table` WHERE `x`=y'; 
```

现在您可以进行如下查询

```
'SELECT `select` FROM `datetime` WHERE `limit` = 1' 
```

否则的话，select，datetime 和 limit 会干扰 MySql 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:19:57.743

您可以在喜欢的 IDE 中使用 find&replace，例如，在 netbeans 中单击项目窗口，然后编辑、替换并键入您的函数名称

您还可以使用这样的 php 脚本：

```
$config = array('msssql_query'=>'mysqli_query' /*... all the functions*/)

$dirs = array('./','subDirectory1','subDirectory2');/*all your sub dirs*/);
foreach($dirs as $dir){
    foreach(glob($dir.'/*.php') as $filename){

         $filecontent = file_get_contents($filename);
         file_put_contents(str_replace($config,$filecontent,$filename));

    }
} 
```

此外，正如@endyourif 所说，您最好将数据库连接包装在类和接口中。

```
interface DAOInterface{
     public function query($string);
     public function prepare($string);
     public function quote($string);//etc

}
interface DAOStatementInterface{
    public function execute($array = array());
    public function bind($value,$param,$type);
    /*etc*/
} 
```

或者你可以使用 PDO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T09:30:19.367

我最近实际上遇到了这个问题。发现使用 MYSQL Workbench 确实解决了将数据库从 MSSQL 迁移到 MYSQL 的问题。但是，仍然存在一个问题，虽然数据库中没有太多的编辑发生，但由于某些问题，PHP 端代码经常被编辑。因此，很难每天一个一个地迁移每个文件。所以我研究并提出了一个仍然不是 100% 并且有其缺点的功能，但解决了我的问题。

我使用了 Sublime Text Editor，并使用它将所有出现的 mssql_ 替换为 sql_，然后包含该函数。

我尝试先定义 mssql_ 函数，但事实证明，我实际上必须从 PHP 模块中禁用 mssql。如果只有一个应用程序使用该 PHP，那很好，但由于有很多，我不得不将每个页面都重写为新功能。

[你可以在这里](https://github.com/atj4me/needed-codes/blob/master/MSSQL%20to%20MySQL%20using%20PHP/function.php "PHP 函数")找到我的代码。但我不能保证你得到完整的结果。

# iphone - 不完整的实现 - @implementation 视图控制器

> ID：12542454
> 
> 赞同：0
> 
> 时间：2012-09-22T09:10:32.233
> 
> 标签：iphone, xcode, ios5, ios6, iphone-5

我在编写应用程序时遇到了一些麻烦，当我尝试运行时，它会出错，导致实现不完整。

这是 ViewController.m 的代码 - 你能告诉我我做错了什么吗？

我还将在 .m 的代码下方包含 ViewController.h 的代码

### 视图控制器.m

```
#import "ViewController.h"
#import "SecondViewController.h"

@interface ViewController ()

@end

@implementation ViewController

 -(IBAction)infoButtonpressed:(id)sender;
 {
SecondViewController *second = [[SecondViewController alloc] initWithNibName:nil bundle:nil];

second.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:second animated:YES];

}

-(IBAction)sound1 {

CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef;

soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound1", CFSTR("wav"), NULL);

UInt32 soundID;

AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);

AudioServicesPlaySystemSound(soundID);

}

-(IBAction)sound2 {

CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef;

soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound2", CFSTR("wav"), NULL);

UInt32 soundID;

AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);

AudioServicesPlaySystemSound(soundID);

}

-(IBAction)sound3 {

CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef;

soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound3", CFSTR("wav"), NULL);

UInt32 soundID;

AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);

AudioServicesPlaySystemSound(soundID);

}

-(IBAction)sound4 {

CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef;

soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound4", CFSTR("wav"), NULL);

UInt32 soundID;

AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);

AudioServicesPlaySystemSound(soundID);

}

-(IBAction)sound5 {

CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef;

soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound5", CFSTR("wav"), NULL);

UInt32 soundID;

AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);

AudioServicesPlaySystemSound(soundID);

}

-(IBAction)sound6 {

CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef;

soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound6", CFSTR("wav"), NULL);

UInt32 soundID;

AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);

AudioServicesPlaySystemSound(soundID);

}

@end 
```

### 视图控制器.h

```
#import <AudioToolbox/AudioToolbox.h>

@interface ViewController :UIViewController {

}

-(IBAction)switchviews;

-(IBAction)sound1;

-(IBAction)sound2;

-(IBAction)sound3;

-(IBAction)sound4;

-(IBAction)sound5;

-(IBAction)sound6;

-(IBAction)infoButtonpressed:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:16:01.643

```
-(IBAction)switchviews; 
```

在头文件中声明，但从未在实现 ( `.m`) 文件中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:24:47.923

@H2CO3 - 是对的

在您的应用程序`-(IBAction)switchviews;`中声明在`.h`文件中，但未在文件中声明`.m`。所以首先你需要声明 -(IBAction)switchviews; `.m`带有相关代码的文件中的方法。

# java - Java中TCP的几个问题

> ID：12542458
> 
> 赞同：1
> 
> 时间：2012-09-22T09:11:17.683
> 
> 标签：java, tcp

好的，首先它确实连接到服务器，所以连接没有问题，以下代码显示连接并向服务器发送消息，当我单击运行时它不会打开 JFrame，我可以的窗口看看我的工具......我也在尝试将从 jMessage.getText 获得的内容发送到 ows 中，但在这一行出现错误：

```
String process = jMessage.getText(); 
```

我也想调用 osw.write(process); 仅当我单击 bSend 按钮时，如何在 main 方法中使用它？请看一下代码，还记得第一个问题，即我的 JFrame 不会在显示我的工具的新窗口中打开，它只是在 netbeans 控制台打印出 System.out.println：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package tcpservidor;

import java.io.*;
import java.net.InetAddress;
import java.net.Socket;

/**
 *
 * @author Damage
 */
public class TeKServer extends javax.swing.JFrame {

/**
 * Creates new form TeKServer
 */
public TeKServer() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jScrollPane1 = new javax.swing.JScrollPane();
    textArea = new javax.swing.JTextArea();
    jMessage = new javax.swing.JTextField();
    bSendMessage = new javax.swing.JButton();
    jLabel2 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
    jLabel1.setText("Chat Client");

    textArea.setColumns(20);
    textArea.setRows(5);
    textArea.setEnabled(false);
    jScrollPane1.setViewportView(textArea);

    bSendMessage.setText("Send");
    bSendMessage.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            bSendMessageActionPerformed(evt);
        }
    });

    jLabel2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
    jLabel2.setText("Message");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addGap(0, 0, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addComponent(jLabel1)
                    .addGap(294, 294, 294))
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addComponent(jLabel2)
                    .addGap(303, 303, 303))))
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jScrollPane1)
                        .addComponent(jMessage))
                    .addContainerGap())
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addGap(0, 291, Short.MAX_VALUE)
                    .addComponent(bSendMessage, javax.swing.GroupLayout.PREFERRED_SIZE, 81, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(286, 286, 286))))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 319, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jLabel2)
            .addGap(3, 3, 3)
            .addComponent(jMessage, javax.swing.GroupLayout.PREFERRED_SIZE, 61, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(bSendMessage)
            .addContainerGap())
    );

    pack();
}// </editor-fold>

private void bSendMessageActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:

}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(TeKServer.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(TeKServer.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(TeKServer.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(TeKServer.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>
    /** Define a host server */
        String host = "192.168.0.8";
        /** Define a port */
        int port = 7777;

        StringBuffer instr = new StringBuffer();
        String TimeStamp;
        System.out.println("SocketClient initialized");
        try {
        /** Obtain an address object of the server */
        InetAddress address = InetAddress.getByName(host);
        /** Establish a socket connetion */
        Socket connection = new Socket(address, port);
        System.out.println("Connection Established!");
        /** Instantiate a BufferedOutputStream object */
        BufferedOutputStream bos = new BufferedOutputStream(connection.
        getOutputStream());

        /** Instantiate an OutputStreamWriter object with the optional character
        * encoding.
        */
        OutputStreamWriter osw = new OutputStreamWriter(bos, "US-ASCII");
        TimeStamp = new java.util.Date().toString();

        String process = jMessage.getText();
        /** Write across the socket connection and flush the buffer */
        osw.write(process);
        osw.flush();
         /** Instantiate a BufferedInputStream object for reading
        /** Instantiate a BufferedInputStream object for reading
        * incoming socket streams.
        */

        BufferedInputStream bis = new BufferedInputStream(connection.
            getInputStream());
        /**Instantiate an InputStreamReader with the optional
        * character encoding.
        */

        InputStreamReader isr = new InputStreamReader(bis, "US-ASCII");

        /**Read the socket's InputStream and append to a StringBuffer */
        int c;
        while ( (c = isr.read()) != 13)
            instr.append( (char) c);

        /** Close the socket connection. */
        connection.close();
        System.out.println(instr);
        }
        catch (IOException f) {
        System.out.println("IOException: " + f);
        }
        catch (Exception g) {
        System.out.println("Exception: " + g);
        }

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new TeKServer().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton bSendMessage;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
public javax.swing.JTextField jMessage;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JTextArea textArea;
// End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:27:01.143

线

```
String process = jMessage.getText(); 
```

导致编译错误，因为它是在实例变量的`static main`方法中声明的。`jMessage`由于方法中有很多代码`main`，我建议将其提取到`launchApp`方法中并像这样调用它：

```
new TeKServer().launchApp(); 
```

在新`launchApp()`方法中，您将替换

```
java.awt.EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        new TeKServer().setVisible(true);
    }
}); 
```

和

```
setVisible(true); 
```

> 我想打电话给 osw.write(process); 仅当我单击 bSend 按钮时

如果您想这样做，您可以将其维护`osw`为全局成员变量***，但*** 无限期地保持套接字打开通常是一种不好的方法。建议仅在需要时打开套接字，写入并关闭。

# c++ - boost asio：“找不到主机（权威）”

> ID：12542460
> 
> 赞同：6
> 
> 时间：2012-09-22T09:11:37.650
> 
> 标签：c++, boost, boost-asio

我正在为学校制作一个程序，其中两个程序相互通信。到目前为止，我还无法连接这两个程序。每当我尝试连接到 localhost:8888 或 127.0.0.1:8888 时，都会出现错误“找不到主机（权威）”。

到目前为止，我的代码是这样的：

### 连接.cpp

```
Connection::Connection(std::string Arg) {
    try
    {
        tcp::resolver resolver(io_service);
        cout<<Arg<<endl;
        tcp::resolver::query query(Arg, "daytime");
        tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
        tcp::resolver::iterator end;

        tcp::socket socket(io_service);
        socket_p = &socket;
        boost::system::error_code error = boost::asio::error::host_not_found;
        while (error && endpoint_iterator != end)
        {
           socket.close();
           socket.connect(*endpoint_iterator++, error);
        }
        if (error)
           throw boost::system::system_error(error);
    }
    catch (std::exception& e)
    {
        std::cerr << e.what() << std::endl;
    }
}
void Connection::Receiver() {
    try{
        for (;;)
        {
            boost::array<char, 128> buf;
            boost::system::error_code error;

            size_t len = socket_p->read_some(boost::asio::buffer(buf), error);

            if (error == boost::asio::error::eof)
                break; // Connection closed cleanly by peer.
            else if (error)
                throw boost::system::system_error(error); // Some other error.

            std::cout.write(buf.data(), len);
        }
    }
    catch (std::exception& e)
    {
        std::cerr << e.what() << std::endl;
    }
} 
```

如果这有帮助，我会使用 Fedora。

编辑：完整的代码可以在这里找到：http: [//www.boost.org/doc/libs/1_36_0/doc/html/boost_asio/tutorial/tutdaytime1.html](http://www.boost.org/doc/libs/1_36_0/doc/html/boost_asio/tutorial/tutdaytime1.html) 我试图让它OOP（不确定我是否做了做得好）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T09:38:06.523

你应该使用：

```
tcp::resolver::query query(host, PORT, boost::asio::ip::resolver_query_base::numeric_service); 
```

> 问题是查询的构造函数默认设置了 address_configured 标志，如果环回设备是唯一具有地址的设备，则不会返回地址。只需将标志设置为 0 或 address_configured 以外的任何内容，问题就得到了解决。

[Boost Asio 的主机名解析如何在 Linux 上工作？可以使用 NSS 吗？](https://stackoverflow.com/questions/5971242/how-does-boost-asios-hostname-resolution-work-on-linux-is-it-possible-to-use-n)

如果您粘贴整个代码，我会为您提供更多帮助。一开始这里有一段非常有用的代码：

[http://boost.2283326.n4.nabble.com/Simple-telnet-client-demonstration-with-boost-asio-asynchronous-IO-td2583017.html](http://boost.2283326.n4.nabble.com/Simple-telnet-client-demonstration-with-boost-asio-asynchronous-I-O-td2583017.html)

它可以工作，您可以使用本地 telnet 对其进行测试。

# php - 使用 php 脚本作为源的 JQuery 自动完成

> ID：12542461
> 
> 赞同：0
> 
> 时间：2012-09-22T09:11:39.137
> 
> 标签：php, javascript, html, jquery-ui, autocomplete

我正在使用以下代码将源定义为 php 脚本：

```
$("#fav_rides_select").autocomplete({
            source: "http://localhost/coaster/CoasterInsider/index.php?page=getRideAndParksJson&type=rides&keyword=test",
            minLength: 1,
            delay: 1000,
            select: function( event, ui ) { 
                        //window.location.href = ui.item.valuea;
                        alert(ui.item.label);
            }
            }).data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( '<a><div class="autocompleteItemDiv"><div class="autocompleteImageDiv"><img src="' + item.image + '"></div><div class="autocompleteTextDiv">' + item.label + '<br/>' + item.description + '</div></div></a>' )
                    .appendTo( ul );
            };
    }); 
```

并且没有显示任何结果，但是当我在浏览器中明确键入上述 url 时，它在浏览器中正确显示以下输出：

```
 [ {label:"Alton Towers" , valuea:"http://alto1.com" , description:"Alton tower parks" ,image:"images/altontowerslogothumb.png"}, {label:"Animal Kingdom" , valuea:"http://alto2.com" , description:"Animal Ride" ,image:"images/animalkingdomlogothumb.png"}, {label:"Busch Garden" , valuea:"http://alto3.com" , description:"Jeorge Bush" ,image:"images/buschgardenslogothumb.png"}, {label:"Chessingona" , valuea:"http://alto4.com" , description:"Play chessy" ,image:"images/chessingonlogothumb.png"}, {label:"Disneyland Paris" , valuea:"http://alto5.com" , description:"Visit parisano disney" ,image:"images/disneylandparislogothumb.png"}, {label:"Epcota" , valuea:"http://alto6.com" , description:"Epcot park" ,image:"images/epcotlogothumb.png"}, {label:"Fujia" , valuea:"http://alto7.com" , description:"Fujiyama" ,image:"images/fujilogothumb.png"}, {label:"Gardland" , valuea:"http://alto8.com" , description:"Gards here" ,image:"images/gardalandlogothumb.png"} ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:39:33.167

根据 jQuery 自动完成文档`source can be String, Array, Callback (javascript function)`

可能你需要这个：

```
$("input").autocomplete({
  source: function(request, response) {
    $.ajax({
      url: "url",
      data: request,
      dataType: "json",
      method: "post",
      success: response
    }
  }
}); 
```

# graphics - Loop's Subdivision Mask 中原始顶点的加权平均值

> ID：12542462
> 
> 赞同：5
> 
> 时间：2012-09-22T09:12:03.967
> 
> 标签：graphics, geometry

在 Loop 的细分中，我不明白通常写成“*选择新顶点的位置作为本地邻域中原始顶点的加权平均值*”。

![在此处输入图像描述](../Images/dc2d587c24a5688955d3fd25d0ec7f3b.png)

新顶点来自于在每条边的中间添加新点。这与原始顶点的“加权平均”有什么关系？怎么做

首先，什么是“原始顶点的加权平均”？网格中看到的“重量”在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:35:40.410

在边缘中间添加一个点实际上只是该过程的第一阶段。细分算法通常有两种：

1.  拓扑阶段 - 添加新的顶点和边
2.  几何阶段——调整新添加的顶点，使它们与邻居“形成更平滑的表面”

以下[幻灯片](http://www.cs.virginia.edu/~gfx/Courses/2010/IntroGraphics/Lectures/20-SubdivisionSurfaces.pdf)提供了有关权重方案（beta 参数）的更多详细信息。

# android - 在前台运行不干扰常规用户输入的动画

> ID：12542463
> 
> 赞同：1
> 
> 时间：2012-09-22T09:12:10.940
> 
> 标签：android

我正在开发一个应用程序，动画将在前台播放而不会中断用户的正常操作。应用程序应在启动时加载，因此用户无需实际打开 Activity。

1) 在启动时加载应用程序。

2) 让 Activity 以透明背景运行，不会阻止用户的正常输入。

我可以获得有关如何执行此操作的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:10:51.013

1）在启动时加载应用程序

为此，您需要一个接收器。像这样创建一个类：

```
public class BootReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent arg1) {

        // start your activity here

    }

} 
```

您必须像这样在您的 android 清单中注册您的“BootReceiver”：

```
<receiver
   android:name=".BootReceiver"
   android:enabled="true"
   android:exported="true">
   <intent-filter>
      <action android:name="android.intent.action.BOOT_COMPLETED" />
      <action android:name="android.intent.action.QUICKBOOT_POWERON" />
   </intent-filter>
</receiver> 
```

并确保您设置了必要的权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

# c++ - std::vector 的默认参数 >

> ID：12542468
> 
> 赞同：1
> 
> 时间：2012-09-22T09:12:41.383
> 
> 标签：c++

这是我的代码

```
void push(const PetModel& petModel, const std::string& host, UInt8 side,
     bool full = false, const std::string& master = "", 
     const std::vector<std::pair<UInt8, UInt8> >& skill
              = std::vector<std::pair<UInt8, UInt8> >());  // This is the error Occur 
```

编译器说：

```
 error: expected ‘,’ or ‘...’ before ‘&gt;’ token
 error: wrong number of template arguments (1, should be 2) 
```

我在 SLES 中使用 Gcc 4.1.2。我写了一个演示，演示有效。那是gcc的错误吗？

```
#include <iostream>
#include <vector>
#include <map>

void fun(int a , int b , int c, int d = 0, int e = 0,          
         int f = 0, const std::vector<std::pair<int, int> >& v = std::vector<std::pair<int, int> >()) {
}

int main() {
  fun(1, 2, 3);
} 
```

这是演示。

# php - 如何使用php从url读取xml文件

> ID：12542469
> 
> 赞同：35
> 
> 时间：2012-09-22T09:12:48.880
> 
> 标签：php, xml, url

我必须从 URL 读取 XML 文件

```
$map_url = "http://maps.google.com/maps/api/directions/xml?origin=".$merchant_address_url."&destination=".$customer_address_url."&sensor=false"; 
```

这给了我一个像这样的 URL：

> [http://maps.google.com/maps/api/directions/xml?origin=Quentin+Road+Brooklyn%2C+New+York%2C+11234+United+States&destination=550+Madison+Avenue+New+York% 2C+New+York%2C+10001+United+States&sensor=false](http://maps.google.com/maps/api/directions/xml?origin=Quentin+Road+Brooklyn%2C+New+York%2C+11234+United+States&destination=550+Madison+Avenue+New+York%2C+New+York%2C+10001+United+States&sensor=false)

我正在使用这个函数来读取然后获取数据：

```
 $response_xml_data = file_get_contents($map_url);
 if($response_xml_data){
     echo "read";
 }

 $data = simplexml_load_string($response_xml_data);
 echo "<pre>"; print_r($data); exit; 
```

但是没有运气，有什么帮助吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-22T09:17:33.200

您可以使用“simplexml_load_file”函数从 XML 中获取数据。请参考这个链接

[http://php.net/manual/en/function.simplexml-load-file.php](http://php.net/manual/en/function.simplexml-load-file.php)

```
$url = "http://maps.google.com/maps/api/directions/xml?origin=Quentin+Road+Brooklyn%2C+New+York%2C+11234+United+States&destination=550+Madison+Avenue+New+York%2C+New+York%2C+10001+United+States&sensor=false";
$xml = simplexml_load_file($url);
print_r($xml); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-22T09:25:49.237

您的代码似乎正确，检查您是否启用了[fopen 包装器](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)`allow_url_fopen = On`（在 php.ini 上）

此外，正如其他答案所述，您应该提供正确编码的 URI 或使用[urlencode()](http://php.net/manual/en/function.urlencode.php)函数对其进行编码。您还应该检查获取 XML 字符串是否有任何错误以及是否有任何解析错误，您可以使用[libxml_get_errors()](http://php.net/manual/en/function.libxml-get-errors.php)输出如下：

```
<?php
if (($response_xml_data = file_get_contents($map_url))===false){
    echo "Error fetching XML\n";
} else {
   libxml_use_internal_errors(true);
   $data = simplexml_load_string($response_xml_data);
   if (!$data) {
       echo "Error loading XML\n";
       foreach(libxml_get_errors() as $error) {
           echo "\t", $error->message;
       }
   } else {
      print_r($data);
   }
}
?> 
```

如果问题是您无法获取 XML 代码，可能是因为您需要在请求中包含一些自定义标头，请检查如何使用[stream_context_create()](http://php.net/manual/en/function.stream-context-create.php)创建自定义流上下文，以便在[http:/](http://php.net/manual/en/function.file-get-contents.php)`file_get_contents()`上调用示例 4 时使用[/php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-19T02:01:23.417

`file_get_contents()`通常有权限问题。要避免它们，请使用：

```
function get_xml_from_url($url){
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');

    $xmlstr = curl_exec($ch);
    curl_close($ch);

    return $xmlstr;
} 
```

例子：

```
$xmlstr = get_xml_from_url('http://www.camara.gov.br/SitCamaraWS/Deputados.asmx/ObterDeputados');
$xmlobj = new SimpleXMLElement($xmlstr);
$xmlobj = (array)$xmlobj;//optional 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-12T20:28:21.033

`$url = 'http://www.example.com'; $xml = simpleXML_load_file($url,"SimpleXMLElement",LIBXML_NOCDATA);`

$url可以是php文件，只要文件生成xml格式的数据作为输出即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T09:17:28.633

它对我有用。我认为您可能需要`urlencode()`在`$map_url`.

# android - 如何让 Twitter4J 使用照片流式传输帖子？

> ID：12542470
> 
> 赞同：0
> 
> 时间：2012-09-22T09:12:50.693
> 
> 标签：android, twitter, twitter4j

使用 Twitter4J 我可以通过使用方法获取 home_line 推文

```
 Twitter.getHomeTimeline(); 
```

我想检索包含照片标签的推文，我想出了解决方案 FilterQuery 但我不知道如何使用此 FilterQuery 类来获取包含照片标签的推文。

请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:27:13.207

neufuture 有这个例子，使用 Processing(P5) 和 twitter4j。它这样做。当我运行它时，我将 draw() 中的测试从 第 42 行更改为，它停止出现空指针错误`if(imageLoaded)`。`if(img != null)`除此之外，它是处理图像 url 的一个很好的例子。希望能帮助到你。

[https://github.com/neufuture/SimpleTwitterStream/](https://github.com/neufuture/SimpleTwitterStream/)

# xcode - 为什么 iPhone 5 不倒转

> ID：12542472
> 
> 赞同：25
> 
> 时间：2012-09-22T09:13:06.977
> 
> 标签：xcode, rotation, ios6

我将新方法添加到我的代码中，如苹果 iOS 6 文档中所述，但在 iPhone 5 上，应用程序不会倒置。只有景观方式。

这是来自rootViewController的我的代码：

```
- (NSUInteger)supportedInterfaceOrientations{
    NSLog(@">>> Entering %s <<<", __PRETTY_FUNCTION__);
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
            UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown);
}
- (BOOL)shouldAutorotate{
    NSLog(@">>> Entering %s <<<", __PRETTY_FUNCTION__);
    return YES;
} 
```

我也试过“UIInterfaceOrientationMaskAll”但没有改变。奇怪的是，我的带有 iOS6 的 iPhone 4 确实使用相同的代码颠倒了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-06T09:55:43.400

`UIInterfaceOrientationMaskAll`IOS 6 使用iPad 和`UIInterfaceOrientationMaskAllButUpsideDown`iPhone的默认方向。如果您希望 iPhone 上的 ViewControllers 旋转到包括 UpsideDown 在内的所有方向，您必须添加 iOS 6 方法：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

到所有视图控制器。如果您已完成此操作并且它不起作用，那么我打赌您使用的是 TabViewController 或 NavigationController，其中某些视图不会返回此内容。所有的 ViewController 都必须返回这个，以便它们中的任何一个来支持它。

或者，您可以将 Category 添加到作为您的 rootViewController 的 UITabViewController 或 NavigationController 类并覆盖该方法。你这样做：

```
@interface UITabBarController (RotationAll)
    -(NSUInteger)supportedInterfaceOrientations;
@end

@implementation UITabBarController (RotationAll)
-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}
@end 
```

这些也是目前推荐的方法，现在在 Apple 开发者论坛中与 Apple 工作人员讨论，他们说早期不鼓励对 UINavigationController 进行子类化的文档已经过时，从 iOS 6 开始可以这样做。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-26T10:02:44.627

感谢 Cliff Ribaudo 确实帮助您完成了基于 UITabbarController 的项目的答案，但在我的情况下，我只使用 UINavigationController 所以我修改了您对 UINavigationController 类别的答案。

```
@interface UINavigationController (RotationAll)
-(NSUInteger)supportedInterfaceOrientations;
@end   

@implementation UINavigationController (RotationAll)
  -(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
  }
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:05:45.377

原谅冗长，但我认为您的答案如下。

我遇到了同样的问题，但它发生在包括我的 iphone 4 在内的所有 IOS 6 设备上。阅读你的问题实际上回答了我的问题。我很久以前就删除了这个，因为它没有做任何事情：

```
- (NSUInteger)supportedInterfaceOrientations{    
    NSLog(@">>> Entering %s <<<", __PRETTY_FUNCTION__);
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
            UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown); } 
```

我的代码在之前的 ios 版本中运行良好。看来这已成为 ios 6 中的强制要求。但仅适用于颠倒。其他方向工作正常。

所以谢谢。

回到你的问题。您是否查看过您的项目目标以查看是否所有“支持的界面方向”都是深灰色的？我想知道颠倒是否是浅灰色（即未选中）。我在快速测试中发现，在之前的 ios 版本中，这些也被忽略了。只要您从 shouldAutorotateToInterfaceOrientation 返回 YES，它将支持方向，但在 iOS 6 中不支持。

最后，您实现了 shouldAutorotate，我的代码中没有。我认为这默认为是。而且我认为这只是告诉操作系统尝试旋转，但是您必须告诉它您使用 shouldAutorotateToInterfaceOrientation 支持哪些方向。但是您的代码段并未显示您已经实现了 shouldAutorotateToInterfaceOrientation。我建议实现这一点，因为它告诉操作系统您支持哪些方向返回一个简单的“是”意味着您支持所有。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations.
    //return (interfaceOrientation == UIInterfaceOrientationPortrait);
    return YES;
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:57:01.803

默认目标设置是没有倒置方向，所以试试这个：

转到项目文件选择您的应用程序目标选​​择“Summery”选项卡检查所有方向类型是否已按下

祝你好运 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T00:47:27.597

如果您打算为所有视图控制器启用或禁用旋转，则不需要继承 UINavigationController。而是使用：

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

在您的 AppDelegate 中。

如果您计划支持应用程序中的所有方向，但父视图控制器（例如 UINavigationController 堆栈）上的不同方向，您应该使用

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

从 AppDelegate 结合您的父视图控制器中的以下方法。

```
 - (BOOL)shouldAutorotate 
```

和

```
- (NSUInteger)supportedInterfaceOrientations 
```

但是，如果您计划在同一个导航堆栈中的不同 CHILDREN ViewControllers 中有不同的方向设置（像我一样），您需要检查导航堆栈中的当前 ViewController。

我在 UINavigationController 子类中创建了以下内容：

```
 - (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    int interfaceOrientation = 0;

    if (self.viewControllers.count > 0)
    {
        id viewController;
        DLog(@"%@", self.viewControllers);
        for (viewController in self.viewControllers)
        {
            if ([viewController isKindOfClass:([InitialUseViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else if ([viewController isKindOfClass:([MainViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else
            {
                 interfaceOrientation = UIInterfaceOrientationMaskAllButUpsideDown;
            }
        }
    }
    return interfaceOrientation;
} 
```

由于您无法再从子 ViewControllers 控制呈现的视图控制器的旋转设置，因此您必须以某种方式拦截当前在导航堆栈中的视图控制器。所以这就是我所做的:)。希望有帮助！

# php - 我认为这个正则表达式不应该失败，我错过了什么？

> ID：12542488
> 
> 赞同：1
> 
> 时间：2012-09-22T09:16:25.480
> 
> 标签：php, regex, unicode, pcre

```
^(?![_\.\'\-])(?:[\p{L} ]+)$ 
```

如果我理解正确的话，有：

*   `(?![_\.\'\-])`负前瞻，即字符串不能以下划线、点、撇号或减号（任意数量）开头。
*   `(?:[\p{L} ]+)`允许在 Ll、Lm、Lo、Lt 和 Lu 中至少有一个字符以及空格。

**第一个问题**是：像“1Bob”这样的东西不应该失败（因为前瞻）。那么[为什么会失败](http://rubular.com/r/OJq1J4lUbH)呢？

**第二个问题**是在哪里可以找到 Ll、Lm、Lo、Lt 和 Lu 中字符的列表或解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T09:29:51.783

数字`"1"`不匹配`\p{L}`（这仅匹配字母！）。如果要匹配任何（数字）数字，`\p{N}`也可以使用该类：

```
$text = "1Bob";

if (preg_match("/^(?![_\.\'\-])(?:[\p{N}\p{L} ]+)$/u", $text)) {
  echo "Matched!\n";
} else {
  echo "No match...\n";
} 
```

这将打印：

```
Matched! 
```

此外，Ruby 的正则表达式引擎与 PHP 的正则表达式引擎之间也存在细微差别。由于您的目标语言似乎是 PHP，因此我建议使用 PHP 进行测试，而不是使用 Rubular (Ruby)。

请注意，在字符类中，“普通”正则表达式元字符没有任何*特殊功能*，也不需要转义：`preg_match("/^(?![_.'-])(?:[\p{N}\p{L} ]+)$/u", $text)`

许多 Unicode 字符属性/类的概述可以在这里找到：[http ://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:46:39.960

```
(?![_\.\'\-]) 
```

是相同的

```
(?![_.'-]) 
```

括号字符类中的大多数元字符不需要转义。如果破折号是可理解范围的一部分，则需要转义。由于破折号位于括号字符类的末尾，因此也不需要转义。

# jsp - struts，包含jsp页面

> ID：12542490
> 
> 赞同：2
> 
> 时间：2012-09-22T09:16:32.157
> 
> 标签：jsp, struts

我需要将 jsp 页面包含到 jsp 页面中。

我有

`page="<%=contextPath%>/admin/admin_left.jsp"`

而且我想包含在一个jsp页面中。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:20:34.993

听起来你想使用

```
<jsp:include page="/admin/admin_left.jsp" /> 
```

# jquery - 在拥有超过 1 个表时获取每个表中的行数

> ID：12542491
> 
> 赞同：2
> 
> 时间：2012-09-22T09:16:33.317
> 
> 标签：jquery

我在同一页面上有多个表格，并希望添加每个表格的行显示计数，如下所示。我尝试了一些东西，但它给出了所有表格行的总数。

```
<table>
 <tr>
   <td>Some data</td>
   <td>More data</td>
 </tr>
 <tr>
   <td>Some data</td>
   <td>More data</td>
 </tr>
</table>

<table>
 <tr>
   <td>Some data</td>
   <td>More data</td>
 </tr>
 <tr>
   <td>Some data</td>
   <td>More data</td>
 </tr>
</table>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
 $().ready(function(){

  //I want to add a line after each table showing each table row count
  $("table").after(??? + " rows found.");
 });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:19:14.587

```
$("table").each(function(){
    $(this).after($(this).find('tr').length + " rows found.");    
}) 
```

[工作小提琴](http://jsfiddle.net/FFJ7w/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T09:43:41.080

根据需要，不`.each()`使用循环，仅使用`after()`.

```
$("table").after(function(){
    return $('tr', this).length + " rows found.";    
}); 
```

***[演示](http://jsfiddle.net/FFJ7w/3/)***

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T09:20:33.343

您可以像这样很容易地获得行数：

```
// loop over all tables
$("table").each(function(){ 
    // get number of rows, uses jQuery's context parameters to speed things up
    // (it is apparently somewhat faster than using 'find' in most cases)
    var nrOfRows = $("tr", this).length;

    $(this).after(nrOfRows + " rows found");
}); 
```

[工作演示](http://jsfiddle.net/jXPBx/)

**更新**您当然可以用更少的行来完成，我将其拆分以使用注释使其更清晰。你可以写：

```
$("table").each(function(){ 
    $(this).after($("tr", this).length + " rows found");
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-22T09:20:43.427

那这个呢？

```
$("table").each(function(){
    $(this).after($(this).find('tr').length + " rows found.")
}); 
```

**编辑**

要在最后一个表之后从两个表中获取总数：

```
$('table:last').after($('tr').length + " rows found.") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T09:21:51.763

我建议：

```
​$('table tbody').each(
    function(){
        var tfoot = $('<tfoot />', {'class' : 'rowSummary'}).insertBefore($(this)),
            tr = $('<tr />').appendTo(tfoot),
            len = $(this).find('tr').length,
            cell = $('<td />',{'colspan' : '2' }).text(len).appendTo(tr);
    });​​​​​​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/WRnm3/1/)。

# ios - 获取 UIWebView 的选定文本

> ID：12542494
> 
> 赞同：5
> 
> 时间：2012-09-22T09:16:57.347
> 
> 标签：ios, objective-c, iphone, swift, uiwebview

我正在尝试`UIWebView`使用以下代码行访问当前选定的文本：

```
NSString *highlighted = [_webView stringByEvaluatingJavaScriptFromString:@"window.getSelection();"]; 
```

但它只返回一个空字符串。关于我所缺少的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T09:21:29.387

试试这个：

```
NSString * highlighted = [_webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:21:48.487

我也偶然发现了这个问题，这真的很令人沮丧。我不完全记得我从哪里得到解决方案，但它是以下内容；`getSelection()`返回一个无法转换为字符串的 JavaScript 对象。您必须将其显式转换为 JavaScript 代码中的字符串：

```
NSString *highlighted = [_webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString();"]; 
```

[在行动中看到它。](https://github.com/H2CO3/ExplainIt/blob/master/ExplainIt.m)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T09:22:24.863

我认为这会有所帮助

```
NSString *selection = [self.webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"]; 
```

请也检查此[链接](https://stackoverflow.com/questions/1968872/iphone-development-grabbing-selected-highlighted-text-on-uiwebview)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-23T10:26:55.720

迅速： self.webView.stringByEvaluatingJavaScriptFromString("window.getSelection().toString();")

Javascript 末尾的分号是必需的，没有它就不起作用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-11T11:58:44.420

用 swift 试试这个：

```
// stringByEvaluatingJavaScript retunr optional string, hence use if-let block

if let selectedString = self.webView.stringByEvaluatingJavaScript(from: "window.getSelection().toString()") {
   print(selectedString - \(selectedString))
} 
```

# scala - 运行简单的远程 Akka 应用程序

> ID：12542496
> 
> 赞同：6
> 
> 时间：2012-09-22T09:17:24.843
> 
> 标签：scala, akka

我正在尝试设置一个简单的服务器/客户端 akka（使用 Akka 2.0.3）应用程序，但无法连接。预先这里是基本代码：

```
import com.typesafe.config.ConfigFactory
import akka.actor.Actor
import akka.actor.ActorSystem
import akka.actor.Props

class Server extends Actor {
  def receive = {
    case s: String => println("Got " + s)
  }
}

val serverSystem = ActorSystem("server", ConfigFactory.load(ConfigFactory.parseString("""
  akka {
    actor {
      provider = "akka.remote.RemoteActorRefProvider"
    }
    remote {
      transport = "akka.remote.netty.NettyRemoteTransport"
      netty {
        hostname = "localhost"
        port = 5678
      }
    }
  }
""")))

val server = serverSystem.actorOf(Props[Server], name = "server")
Thread.sleep(500)
println("started")
Thread.sleep(500)

val clientSystem = ActorSystem("client", ConfigFactory.load(ConfigFactory.parseString("""
  akka {
    actor {
      provider = "akka.remote.RemoteActorRefProvider"
    }
  }
""")))
val remoteServer = clientSystem.actorFor("akka://server@XXX:5678/user/server")

remoteServer ! "HEY"

Thread.sleep(3000)
clientSystem.shutdown
serverSystem.shutdown 
```

我知道配置应该放在外部文件中。
如果你用它替换`XXX`它`localhost`：

```
started
Got HEY 
```

但是，如果我使用我的外部（已解析）IP（家庭路由器后面的 PC），`XXX`则`HEY`消息永远不会到达。我认为这是由于某些防火墙问题并在我的路由器上转发了相关的 TCP 和 UDP 端口，并在我的 Windows 防火墙上打开/允许它们。因此，之后以下代码起作用（也`XXX`替换为我的外部 IP）。一个开始`ServerTest`可以通过一个连接`ClientTest`：

```
import java.net.ServerSocket
object ServerTest extends App {
  println("START server")
  val ss = new ServerSocket(5678)
  val s = ss.accept()
  println(s)
  println("END")
}

import java.net.Socket
object ClientTest extends App {
  println("START client")
  val s = new Socket("XXX", 5678)
  println(s)
  println("END")
} 
```

所以这不是端口/防火墙问题，不是吗？！那么问题出在哪里？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:54:40.550

`localhost`通常表示`127.0.0.1`, 这只是计算机中可能的许多接口（卡）之一。绑定到 localhost 的服务器不会接收到连接到其他接口（包括具有外部地址的接口）的连接。

您应该在服务器中指定外部地址，或者`0.0.0.0`这意味着“绑定到所有接口”。

# android - 使用 Apache Poi 将 doc 文件转换为 html

> ID：12542498
> 
> 赞同：4
> 
> 时间：2012-09-22T09:17:30.837
> 
> 标签：android, apache-poi

我正在开发一个 android 应用程序，在该应用程序中我需要使用 Apache Poi 将 MS Office 文件转换为 HTML。到现在为止，我可以使用以下项目源将 .xlsx 转换为 htm-

[http://display-msoffice-docs-android-with-apache-poi.googlecode.com/svn/trunk/TestOfficeAndroid/](http://display-msoffice-docs-android-with-apache-poi.googlecode.com/svn/trunk/TestOfficeAndroid/)

我可以看到包中有一个`WordToHtmlConverter`类`org.apache.poi.hwpf.converter`可以在其主要方法中转换 .doc 文件，因为它的`main()`方法将输入文件路径和输出文件路径作为参数。但是当我调用 WordToHtmlConverter 的 main 方法时，它给了 classnotfound 异常异常`java.rmi.unexpectedexception`。android 没有 java.rmi.unexpectedexception 类。我该如何克服这个问题。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T04:09:56.607

你试过[Docx4j](http://www.docx4java.org/trac/docx4j "dox4j")吗？我不知道这是否是您的答案，因为我才刚刚开始使用它。（我在查看 Stackoverflow 以查看是否有人使用它来创建 HTML5 时遇到了您的问题，我认为这应该很容易做到）

# c++ - 创建一个不同对象的数组

> ID：12542500
> 
> 赞同：1
> 
> 时间：2012-09-22T09:17:33.913
> 
> 标签：c++, inheritance, casting

这是我最后一个问题的后续，其中我需要一组对象，它们是一个基类的子类。有人建议我尝试 dynamic_cast 但速度在这个项目中非常重要。

这基本上就是我所追求的。

```
class Object
{
protected:
    int id;
};

class Bike: public Object
{
public:
    bike();

private:
    int bells;
};

class Car: public Object
{
public:
    void drive();

private:
    int wheels;
}; 
```

我需要这些对象的数组，所以我决定使用基类。

```
// Imagine I have 10 objects and don't know what they will be
Object* objects[10];

// Let's make the first object
objects[0] = new Car; 
```

有人告诉我动态铸造是个好主意。问题是速度很重要，我有一些实例需要执行以下操作：

1.  Car 8 引用索引值为 3 的自行车。

没有dynamic_casting还有其他解决方法吗？

编辑：如果我用一堆子类填充数组，我怎么能在特定索引处访问子类的数据。换句话说，想象一辆自行车的索引为 8。我怎么能从该对象中仅使用数组和索引获取 int 铃声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:28:24.470

这取决于您在做什么，但您可以拥有一个结构数组，其中存储一个枚举，该枚举指定它存储的对象类型以及对象指针。

IE：

```
class CObject;

enum EObjectType
{
    OT_Bike,
    OT_Car
};

struct SObjectInfo
{
    EObjectType Type;
    CObject* Object;
}; 
```

遍历数组时，您可以检查对象的类型，然后将对象指针*静态*转换为适当的派生类型。我在无法避免的情况下广泛使用这种方法，并且在通用容器中绝对需要对象类型的运行时识别。

但是，为什么需要将不同类的对象存储在同一个数组中，而不使用多态性和虚方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:42:16.117

看起来您的问题需要一些运行时开销，无论实现看起来如何：这是因为在某些时候程序需要决定它实际存储的类型。请注意，如果您可以负担得起使用 Boost，您还有更多替代方法可以引入一点人工继承：

*   [Boost.Variant](http://www.boost.org/doc/libs/1_51_0/doc/html/variant.html) - 如果您提前知道要存储的所有类型
*   [Boost.Any](http://www.boost.org/doc/libs/1_51_0/doc/html/any.html) - 如果你不这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:23:51.527

如果对象不同，为什么要有基类？此链接可能会有所帮助： http: [//www.codeproject.com/Articles/23304/High-Performance-Heterogeneous-Container](http://www.codeproject.com/Articles/23304/High-Performance-Heterogeneous-Container)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T09:28:55.333

首先，如果您需要它非常快，请不要使用 operator new 在堆上创建它。如果可能，您需要在本地创建它们。

如果您确定总会有您的对象，那么您可以将转换更改为 static_cast，这是一个更快的解决方案。

对我来说，这里最好的想法是使用带有纯虚拟方法的接口。喜欢：

```
Class Objects //interface
{
public:
   virtual void ride() = 0;
} 
```

然后使用接口作为基类。在编程中很常见。

# c# - 如何转换列表 列出 在 C# 3.5 中

> ID：12542502
> 
> 赞同：1
> 
> 时间：2012-09-22T09:17:59.800
> 
> 标签：c#

代码例如：

```
public Interface IArticle
{
    int cid{get;set;}
    string Name{get;set;}
    string Content{get;set;}
    ...
}
public Class Article:IArticle
{
   public int cid{get;set;}
   public string Name{get;set;}
   public string Content{get;set;}
   public string Extension{get;set;}
    ...
}

/*
ArticleBiz.GetArticles(int cid) is select some items from database,return type:List<Article>
*/
List<IArticle> articleList=ArticleBiz.GetArticles(2).FindAll(p=>p.cid==cid) 
```

例外：

```
Error   1   Cannot implicitly convert type 
    'System.Collections.Generic.List<Zm.Models.Article>'
to
    'System.Collections.Generic.IList<Zm.Models.IArticle>'.
An explicit conversion exists (are you missing a cast?) 
```

问题：我不想`List<IArticle>`在`GetArticles(..)`方法中将返回类型更改为。如何更改代码以`List<Article>`成功转换`List<IArticle>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:32:04.170

这是我的方法：

```
IList<IArticle> articles = new List<Article>().Cast<IArticle>().ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:25:25.130

您可以使用 LINQ：

```
List<IArticle> articleList = ArticleBiz
    .GetArticles(2)
    .Where(p => p.cid == cid)
    .Cast<IArticle>()
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T09:26:47.153

怎么样

```
List<IArticle> articleList = ArticleBiz.GetArticles(2).Where(p => p.cid == cid) 
                                       .Select(x => (IArticle)x).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T09:29:59.590

您可以编写自己的隐式演员表。

```
public static implicit operator IArticle(Article article)
{
    return article;
} 
```

另一种解决方案是编写显式转换运算符

```
///No need for an explicit cast though.
public static explicit operator IArticle(Article article)
{
    return (IArticle)article;
} 
```

但是您能告诉我为什么要从数据库中返回 Articles 而不是 IArticle 对象吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T09:19:34.810

希望，选择可以帮助你。

```
List<IArticle> articleList = ArticleBiz.GetArticles(2).FindAll(p => p.cid == cid)
                                       .Select(x => x as IArticle).ToList() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T14:08:59.503

将 List 分配给 List 不起作用的原因是您可以执行以下操作：

```
class CrazyArticle : IArticle { ... }

List<Article> articles = ...
List<IArticle> iarticles = articles; // this is not actually legal

iarticles.Add(new CrazyArticle());
// now either things should crash because we tried to add CrazyArticle to a List<Article>,
// or we have violated type safety because the List<Article> has a CrazyArticle in it! 
```

这里至少有两个选项：

(1) 您可以使用 LINQ Cast<> 运算符构建 IArticle 类型的新列表：

```
var iarticles = articles.Cast<IArticle>().ToList(); 
```

(2) 可以改为返回IEnumerable：

```
// this is legal because IEnumerable<T> is declared as IEnumerable<out T>
IEnumerable<IArticle> iarticles = articles; 
```

# phpstorm - 我的 PhpStorm 5 不知道 php 原生函数

> ID：12542506
> 
> 赞同：11
> 
> 时间：2012-09-22T09:18:48.420
> 
> 标签：phpstorm

我最近下载了 PhpStorm 5。verion 4 一切正常，但现在我无法在自动完成时访问本机 php 函数。我的项目中声明的函数和类仍然存在。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T09:39:41.237

尝试`File`| **Invalidate Caches**，还要检查是否为项目配置了 PHP 解释器（`File`| `Settings`| `PHP`，**解释器**）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-14T08:12:10.883

我通过 linux 中的这个命令在我的 PhpStorm2020.2 中解决了同样的问题：

在 Linux 上，执行以下命令：`rm -rf ~/.cache/JetBrains/PhpStorm2020.2/`

在 macOS 上：`rm -rf ~/Library/Caches/JetBrains/PhpStorm2020.2/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T03:27:34.973

[如果您在 Ubuntu 上使用了多个版本的 Phpstorm（例如 2020.1、2020.2 和 2020.3），那么sj59](https://stackoverflow.com/users/2042775/sj59)如何回答更高，删除缓存会有所帮助，但在我删除所有 JetBrains Cache 文件夹之前，它对我不起作用，如下所示：

```
rm -rf ~/.cache/JetBrains/ 
```

在此之前，我尝试过使缓存无效，关闭所有插件并完全重新安装 IDE

# spring - spring maven 存储库问题（博客参考但想使用较新版本）

> ID：12542510
> 
> 赞同：0
> 
> 时间：2012-09-22T09:19:51.043
> 
> 标签：spring, maven

我使用以下站点创建了一个 Maven Web 项目。

```
http://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/ 
```

我已经执行了那里给出的所有步骤并执行了一个简单的 hello world 程序。现在，我必须将 spring 依赖项包含到我的 eclipse web 项目中。

所以

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring</artifactId>
    <version>3.1.2</version>
</dependency> 
```

在依赖项标签中，我添加了上述配置。现在，它是这样说的：

```
unable to find jars from the repositories (local and as well as remote) 
```

它给出了执行命令的建议：

```
mvn install -artifactid=springframework   (something like this) 
```

但是当我提到版本为 2.5.6 时，它是正确的。maven存储库中版本3.1.2不可用的问题吗？如果 maven 对于最新版本不能正常工作，我如何获得最新版本？

它还给了我手动下载并放入本地存储库的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:26:32.047

Maven 坐标随时间而变化。

尝试：

```
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.core</artifactId>
        <version>3.1.2.RELEASE</version>
</dependency> 
```

或尝试：

```
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.2.RELEASE</version>
</dependency> 
```

我会发现是否存在一体化 POM 或依赖项。但是“spring-full”看起来只有 1.2.x 而“spring”看起来是 2.5.x。已检查：找不到一个我一直在所有项目中使用单独的模块一段时间（无论如何这更好，细粒度的依赖项）。

您可以搜索的位置是[http://ebr.springsource.com/repository/app/](http://ebr.springsource.com/repository/app/)

对于 3.1.2，请参阅[http://ebr.springsource.com/repository/app/library/version/detail?name=org.springframework.spring&version=3.1.2.RELEASE&searchType=librariesByName&searchQuery=spring](http://ebr.springsource.com/repository/app/library/version/detail?name=org.springframework.spring&version=3.1.2.RELEASE&searchType=librariesByName&searchQuery=spring)

据我所知，在过去的 4 年中，Spring 至少 3 次更改了他们的存储库 URL 和在线位置。因此，我会在他们的网站上查找有关设置 Maven`<repositories>`配置以获取其 JAR 的当前信息。谨防信息过时的文章:(

还要注意 2 示例中的 artifactId 不同，这是 spring 的另一个问题。“org.springframework.core”是他们软件的 EBR 和 OSGi 兼容版本。“spring-core”是旧的 pre-OSGi 坐标。找到适合你的方法，不要将它们混在同一个项目中。例如，我使用的是“spring-core”，因为我使用的是里程碑版本的 3.2.0.M2。但是生产版本的 EBR 坐标是最好用的。

很抱歉进行了如此多的编辑……但即使您了解获取 Spring Source 软件的传统，这也是一个雷区。

# jsp - 尽管在 web.xml 中配置了异常类型，但未显示错误页面

> ID：12542514
> 
> 赞同：3
> 
> 时间：2012-09-22T09:20:31.977
> 
> 标签：jsp, tomcat, servlets, exception-handling, struts

**主题：Servlet 和 JSP，声明式异常处理**

我在 web.xml 中创建了以下错误声明

```
<error-page>
    <exception-type>exercises.MyException</exception-type>
    <location>/WEB-INF/errors/error.jsp</location>
</error-page> 
```

然后我创建了 MyException 类

```
public class MyException extends Exception {
    public static int JustThrowError(int n) throws MyException{
        if(n<10)
        throw new MyException();
        else
            return n;
    }
} 
```

为了测试这一点，我使用了一个简单的 jsp。

```
<body>
<%@ page import="exercises.*" %>
<%=MyException.JustThrowError(9) %>
</body> 
```

我希望它显示在我的 web.xml 中指定的错误页面（error.jsp）。相反，我得到了异常堆栈跟踪，如下所示。

**谁能解释为什么异常没有被捕获并重定向到我的web.xml中定义的error.jsp？**

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [/my-struts-errors] threw exception [An exception occurred processing JSP page /forms/riskyPage.jsp at line 9

6: </head>
7: <body>
8: <%@ page import="exercises.*" %>
9: <%=MyException.JustThrowError(9) %>
10: </body>
11: </html>

Stacktrace:] with root cause
exercises.MyException
    at exercises.MyException.JustThrowError(MyException.java:8)
    at org.apache.jsp.forms.riskyPage_jsp._jspService(riskyPage_jsp.java:63)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:417)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:30:31.740

我猜您的问题是 Tomcat 将您的异常包装在 org.apache.jasper.JasperException 中（在 JspServletWrapper.handleJspException 中）。要对此进行测试，请尝试更改为：

```
<error-page>
    <exception-type>org.apache.jasper.JasperException</exception-type>
    <location>/WEB-INF/errors/error.jsp</location>
</error-page> 
```

我打赌这行得通，像 java.lang.Throwable 这样的超类也行。（显然，这不是解决您的具体问题的方法）。

您可以在 error.jsp 中找到异常，所以我想您可以将与异常类型相关的逻辑放在那里。

但是，一般来说 - 使用 scriptlet 是一种不好的做法（请参阅[业务层的 jsp 了解](https://stackoverflow.com/questions/1831238/jsp-for-business-layer)其中的一些原因）。我*认为*您从标记或 servlet（或其他“中间层”代码）中抛出异常，它不会被包裹在 JasperException 中，因此会按您的预期工作。（我会在某个时候对此进行调查，然后编辑我的答案——除非其他人在评论中确认了任何一种方式）。

# git - 如何从分支中拉出？

> ID：12542517
> 
> 赞同：1
> 
> 时间：2012-09-22T09:20:36.667
> 
> 标签：git

这个问题听起来太微不足道了。我希望是的。:)

我最近创建了一个名为`deals_feature`. 经过一天的工作，我已经提交并将更改推送回服务器。我什至去了服务器并做了一个`git log deals_feature`，我可以在该分支上看到最新的提交日志消息。

现在回到电脑上，我正在尝试获取该分支的最新信息。

我做了一个`git branch -a`以确保我在分支上：

```
* deals_feature
  master
  remotes/origin/HEAD -> origin/master
  remotes/origin/deals_feature
  remotes/origin/master 
```

但是当我做 a 时`git pull`，它似乎是从 Master 而不是分支中拉出来的。

```
From .
 * branch            master     -> FETCH_HEAD
Already up-to-date. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:01:07.090

您必须指定要推送的分支

```
$ git pull origin deals_feature 
```

当你在分支时拉动`deals_feature`也可以，但现在我没有时间测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:01:08.937

尝试`git fetch origin`然后`git diff origin/deals_feature`在您当地的交易功能分支上执行。如果它什么也没输出，那么你已经是最新的了。

在使用多个遥控器和多个分支时，我总是使用`git fetch`+`git merge`而不是我认为它更灵活。`git pull`

# c# - C# 类字段声明中的 this 运算符

> ID：12542518
> 
> 赞同：3
> 
> 时间：2012-09-22T09:20:40.510
> 
> 标签：c#

这是一个纯粹的学术问题-我很容易找到解决方法。

在将 VB.Net 类移植到 C# 时，我发现在一个类中声明了一个字段，该类使用 this 关键字作为 new() 语句中的参数。编译器说“关键字'this'在当前上下文中不可用'（VB编译器认为这种情况没有问题）。我很容易通过将字段的初始化移动到类的构造函数来解决这个问题。

编辑：阅读评论后，我添加了以下代码块

```

    public class cTransactions
    {
        private List Trans = new List();
        private List Archive = new List();
        private cDDs Debits = new cDDs(this); // complier error 
                                            //Keyword 'this' is not available in the current context
        private string path = Directory.GetCurrentDirectory() + "\";
        private bool dirty = false;
        private int LastID;
        // followed by Property declarations, ctor, methods etc.
        //...
    }

```

但是，在执行类的构造函数之前，我找不到对关键字“this”不可用的任何引用（尽管我可能错过了 500 多页语言规范中的这一启示）。是这种情况还是我应该在字段声明之前的其中一行中查看一些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:10:19.593

查看[C# 语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)第 7.6.7 节：

> **7.6.7 本次访问**
> 
> 仅在实例构造函数、实例方法或实例访问器的块中才允许this*访问。*...（省略细节） ...在除上面列出的上下文之外的上下文中的主表达式中使用 this 是编译时错误。特别是，不可能在静态方法、静态属性访问器或字段声明的变量初始化程序中引用它。

因此，在上面示例中的变量初始化器中使用它是一个编译时错误。要修复它，请将初始化移动到构造函数中。

# c++ - 不同线程中的多个 atexit 处理程序

> ID：12542520
> 
> 赞同：2
> 
> 时间：2012-09-22T09:20:54.800
> 
> 标签：c++, gcc, g++

`atexit`我对在多线程应用程序中使用 有疑问。

假设我有以下场景

```
 Thread A calls atexit(handler_a)
 Thread B calls atexit(handler_b)
 main()   calls atexit(handler_main)
 Thread C calls atexit(handler_c)
 .... 
```

所有处理函数是在一个唯一的线程中执行还是在单独的线程中执行？

如果它们确实在单个线程中执行（一个接一个），该线程会是主线程吗？

我正在使用 Linux 和 g++。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:16:00.117

正如 rici 所说，atexit 处理程序是从调用 exit 的线程调用的。如果你想要每个线程的处理程序，你可以使用 pthread_key_create 析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:41:08.823

我没有看到标准中需要`atexit`从单个线程调用处理程序的任何约束。

事实上，我相信同时注册的处理程序（因为两个注册都没有在另一个之前排序）也可以同时执行。然而，该标准确实保证注册在另一个之前排序的处理程序将在后者之后执行。

# facebook - Facebook 标签 iframe 共享

> ID：12542521
> 
> 赞同：-1
> 
> 时间：2012-09-22T09:21:11.790
> 
> 标签：facebook, facebook-page, facebook-iframe

我在一个页面中有一个标签，一个 iframe 到一个网站，就像一个简单的 facebook 应用程序，用户可以在其中创建带有图像和一些文本的简单个人资料页面。

现在，一旦创建了配置文件（这是一个带有自己 URL 的简单 html 页面），我需要能够使用一些共享服务（如 addthis）甚至标准发送按钮来共享它。问题是必须始终隐藏原始站点（用户必须无法看到“站点”的 URL），但共享系统需要一个绝对 URL 才能知道……实际共享的内容。

Obiouvsly，在 iframe 中工作，网址始终是 facebook 页面的网址（它不会改变导航网站页面），那么我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:29:19.207

> 问题是必须始终隐藏原始站点（用户必须无法看到“站点”的 URL）

为什么不？

请不要现在说“安全问题”，因为您应该知道没有“默默无闻的安全”之类的东西......</p>

* * *

如果您只想拥有可以被喜欢和共享的 Open Graph URL，但希望用户单击其中一个 URL 最终再次出现在 Facebook 上的 iframe 选项卡中 - 然后为实际用户重定向到您的页面选项卡。

要么通过 JavaScript（Facebook 爬虫不关心）；或者为任何*不是*Facebook 抓取工具的客户端（它可以通过它的用户代理或请求的原始 IP 地址识别）进行服务器端重定向。

# java - 如何从 GWT 中的 RichTextArea 获取光标位置或位置？

> ID：12542522
> 
> 赞同：7
> 
> 时间：2012-09-22T09:21:20.250
> 
> 标签：java, gwt, textarea, richtextbox, text-cursor

我想从 RichTextArea 获取光标位置或位置。我不知道如何在没有任何鼠标事件的情况下获取当前光标位置。

例如TextArea 有getCursorPos() 方法，但RichTextArea 没有TextArea 之类的方法。

有人知道吗？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:27:35.117

如果你想在光标位置的 RichTextArea 中插入一些东西，你可以使用格式化程序来完成：

```
RichTextArea.Formatter formatter = richText.getFormatter();
formatter.insertHTML("My text is inserted at the cursor position"); 
```

要使用 JavaScript 查找光标位置，请尝试 Tim Down 提出的解决方案：

[获取范围相对于其父容器的开始和结束偏移量](https://stackoverflow.com/questions/4811822/get-a-ranges-start-and-end-offsets-relative-to-its-parent-container/4812022#4812022)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T12:55:51.457

在 Vaadin 7.5 @AndreiVolgin 答案似乎不起作用。但是如果有人只想在光标位置粘贴一些文本，那么Vaadin插件的**CKEditor 包装器可能会有所帮助（**[链接](https://vaadin.com/directory#!addon/ckeditor-wrapper-for-vaadin)）。

这是后代的一个例子：

```
CKEditorTextField textArea;
// and for example in some listener function we could call:
textArea.insertHtml("<b>some html</b>");
textArea.insertText("sample text"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T21:13:23.847

不知道这是否仍然需要，但我今天一直在尝试做同样的事情，但无法真正找到明确的答案。我确实找到了这个非 GWT 解决方案（[Get caret (cursor) position in contentEditable area contains HTML content](https://stackoverflow.com/questions/4767848/get-caret-cursor-position-in-contenteditable-area-containing-html-content/4770562#4770562)），需要稍微调整一下。希望这可以帮助某人。

```
 public static native int getCursor(Element elem) /*-{
    var node = elem.contentWindow.document.body
    var range = elem.contentWindow.getSelection().getRangeAt(0);

    var treeWalker = $doc.createTreeWalker(node, NodeFilter.SHOW_TEXT, function(node) {
        var nodeRange = $doc.createRange();
        nodeRange.selectNodeContents(node);
        return nodeRange.compareBoundaryPoints(Range.END_TO_END, range) < 1 ? NodeFilter.FILTER_ACCEPT
                : NodeFilter.FILTER_REJECT;
    }, false);

    var charCount = 0;
    while (treeWalker.nextNode()) {
        charCount += treeWalker.currentNode.length;
    }

    if (range.startContainer.nodeType == 3) {
        charCount += range.startOffset;
    }

    return charCount;
}-*/; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T07:16:09.210

试试这个，对我有用。基本上你在富文本区域中插入一个唯一的文本，然后你得到插入文本的索引，然后你删除它。

```
 richText=new RichTextArea();
    basicFormatter=richText.getFormatter();
    basicFormatter.insertHTML("dummydata");
    int cursor=richText.getText().indexOf("dummydata");
    basicFormatter.undo(); 
```

# android - 如何连接到蓝牙 a2dp 设备？

> ID：12542523
> 
> 赞同：4
> 
> 时间：2012-09-22T09:21:21.637
> 
> 标签：android, bluetooth, a2dp

我正在尝试将运行 android 4.1 的 android 设备与支持 a2dp 的音频接收器配对。我可以在蓝牙设置屏幕上毫无问题地做到这一点，但我正在努力在代码中做到这一点。

基本上我能够发现该设备，但我无法通过套接字连接到它。也许我使用了错误的 UUID 或者我应该使用预定义的 android.bluetooth.BluetoothA2dp 类。这是我正在做的事情：

```
UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
socket = device.createInsecureRfcommSocketToServiceRecord(uuid);
socket.connect(); 
```

但是我收到一个异常，指出它无法连接。

```
java.io.IOException: Service discovery failed
at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:403)
at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:213) 
```

我还尝试使用设备提供的 UUID 进行连接，`device.getUuids()`但这些都无助于连接到 a2dp 设备。

任何有关如何连接到 a2dp 设备的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:41:26.797

A2DP 不是通过 RFCOMM 完成的，因此您不能使用`createRfcommSocket`API。数据通过具有指定协议复用器 ID（一个用于控制，另一个用于流数据）的 L2CAP 流直接传输。

# javascript - 在其中隐藏 iframe div

> ID：12542531
> 
> 赞同：0
> 
> 时间：2012-09-22T09:22:11.127
> 
> 标签：javascript, jquery, html, iframe

所以我有这个 HTML 例如：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

 <div>how are you</div>
 <p>whatttt</p>
<div id="main">
<div id="test">
  div content
<br>
<table class="table">
  <thead> </thead>
    <tr>
       <th>
         some header
       </th>
    </tr>
    <tr>
       <td> cell </td>
    </tr>
  </table>  
</div>  
  </div>
</body>
</html> 
```

所以如果我想用 i 框架加载它但只加载`div class="main"`它会是这样的：

`<iframe class="test" src="testing.html" onload="$('body>*',this.contentWindow.document).not('#main').hide();"></iframe>`

如果我只想显示例如：the `div id="test"`or that are in the 或 the `table class="table"`that are in the `din class="main"`main div 我如何才能更深入地了解该主 div 中的那些 div 呢？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:25:12.063

尝试这个，

*对于 id = test 的 div id = main*

```
this.contentWindow.document).not('#main #test').hide();

<iframe class="test" src="testing.html" onload="$('body>*',this.contentWindow.document).not('#main #test').hide();"></iframe> 
```

*对于 div 类 = table 内 div id = main*

```
this.contentWindow.document).not('#main .table').hide();

<iframe class="test" src="testing.html" onload="$('body>*',this.contentWindow.document).not('#main .table').hide();"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:33:43.653

我认为您不能修改 iframe 中的内容。您可以尝试将其加载到 div 中。

```
$('.test').load('testing.html #main'); 
```

代替

```
<iframe class="test"> with <div class="test"> 
```

# resteasy - RestEasy 2 不服从@XmlTransient

> ID：12542538
> 
> 赞同：3
> 
> 时间：2012-09-22T09:23:13.890
> 
> 标签：resteasy, xmltransient

我的实体有一个财产，

```
@Embedded
@XmlTransient
private ReleaseTraits traits;

@XmlTransient
public ReleaseTraits getTraits() { 
    return traits; 
} 
```

但是 RestEasy（在 JBoss AS 7.1 中）一直把它放到 JSON 中。此外，不会省略空值。

知道为什么以及如何实现被排除在外的属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:43:03.763

`@JsonIgnore`作品。关于 JBoss AS 7 中的默认提供者，文档似乎是错误的。

我提交了[https://issues.jboss.org/browse/AS7-5604](https://issues.jboss.org/browse/AS7-5604)和[https://issues.jboss.org/browse/AS7-5605](https://issues.jboss.org/browse/AS7-5605)来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:52:27.917

这个相关问题讨论了配置 JBoss 部署以使用 Jettison 而不是 Jackson 进行 JSON 编组的一些选项：[Set JSON provider at RESTEasy on JBoss 7.1.1](https://stackoverflow.com/questions/11831119/set-json-provider-at-resteasy-on-jboss-7-1-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T13:13:02.087

为了他人的利益，@XmlTransient 在使用 RestEasy 3.0.x 的 WildFly 8.0 中为我正常工作。

# azure - 使用 Microsoft Fakes 模拟 Azure RoleEnvironment API

> ID：12542539
> 
> 赞同：3
> 
> 时间：2012-09-22T09:23:29.020
> 
> 标签：azure, microsoft-fakes

我正在尝试使用 Microsoft Fakes 模拟 Azure RoleEnvironment API。问题是我找不到安排垫片/存根的方法，以便我可以在单元测试中练习代码。

例如，假设我有以下代码：

```
using Microsoft.WindowsAzure.ServiceRuntime;
// ...
Role role = RoleEnvironment.CurrentRoleInstance.Role;
int count = role.Instances.Count; 
```

我将如何用 Fakes 模拟上述内容，以便我可以在单元测试中运行它？

到目前为止，我的尝试失败了，因为 RoleInstance 类似乎具有带有内部设置器的抽象属性，这阻止了我从 RoleInstance 派生类。这反过来又阻止了我为 RoleEnvironment.CurrentRoleInstance 提供 shim。

顺便说一句，我完全清楚过度依赖假货会被认为是有害的。问题是，我已经有了 RoleEnvironment 的包装器，以及生产和测试实现。我试图模拟的代码在我也想测试的生产实现中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:44:58.287

不幸的是，我认为今天不可能用 Microsoft Fakes 来隔离此代码。通常，您希望填充 RoleEnvironment.CurrentRoleInstance 属性以返回一个存根 RoleInstance，该存根 RoleInstance 返回一个存根角色。我们可以填充 CurrentRoleInstance 属性。但正如您所指出的，RoleInstance 和 Role 都是具有内部构造函数的抽象类，我们无法使用当前版本的 Fakes 存根。

# model-view-controller - Play框架中从视图到控制器的ajax调用

> ID：12542541
> 
> 赞同：0
> 
> 时间：2012-09-22T09:24:01.413
> 
> 标签：model-view-controller, jquery, playframework, playframework-1.x

我是 MVC 和 Play 框架（Java）的新手。我没有将 Groovy 用于动态 HTML，而是使用静态 HTML 创建了我们自己的页面，我的意思是我们没有任何 Groovy 表达式。在这里，我有一个控制器“客户”，生成 JSON 对象，该对象必须发送到视图中的 ajax 调用。我尝试了 render() 方法，似乎我没有正确使用。你能给我一些想法从这里转发吗？谢谢。

```
public static void customer(){
    WordAPI objWordAPI=new WordAPI();
    List<WordInfo> listObjWord= objWordAPI.MakeAPIObject(nSurveyId);
    JSONSerializer modelSerializer=new JSONSerializer().exclude("NSpontanity","NWordRepresentativity","NWordValue","NWordFrequency","class").rootName("Words");
    render("Application/wordcloud.html",modelSerializer.serialize(listObjWord));
  } 
```

并在视图“wordcloud.html”中调用 ajax

```
$.ajax({
    url: "/customer",
    dataType : 'json',
    success: function (data) {
        alert(data);
             }
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:42:35.417

我相信这应该有效：

```
public static void customer(){
    WordAPI objWordAPI=new WordAPI();
    List<WordInfo> listObjWord= objWordAPI.MakeAPIObject(nSurveyId);
    JSONSerializer modelSerializer=new JSONSerializer().exclude("NSpontanity","NWordRepresentativity","NWordValue","NWordFrequency","class").rootName("Words");
    renderJSON(modelSerializer.serialize(listObjWord));
  } 
```

我以前从未使用过 rootName，我通常只是做类似这样的事情：

```
public static void refreshNotifications()
    {
        JSONSerializer notifySerializer = new JSONSerializer().include("message","notifyId","class").exclude("*");
        List<Notification> notificationList = user.getNotifications();
        renderJSON(notifySerializer.serialize(notificationList));
    } 
```

旁注：使用 refreshNotifications 我有一个安全方法，我在它之前运行验证并填充用户对象。

# python - Python 3：打印功能中的星号

> ID：12542544
> 
> 赞同：13
> 
> 时间：2012-09-22T09:24:17.923
> 
> 标签：python, python-3.x

我们来看一下：

```
print([object, ...], *, sep=' ', end='\n', file=sys.stdout) 
```

[http://docs.python.org/py3k/library/functions.html?highlight=print#print](http://docs.python.org/py3k/library/functions.html?highlight=print#print)

我们该如何解释`'*'`呢？通常星号 ('*') 表示许多对象。但这对我来说是个谜。在两个逗号之间......我什至害怕认为这可能是一个错字。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T09:39:25.027

这是文档中的一个错误，由将新的 Python 3 功能应用到不应该使用它的地方的人插入。它已被修复（参见[issue 15831](http://bugs.python.org/issue15831)）。

使用的文档中的函数签名以伪形式语法形式给出，但`*`只有在使用实际 python 语法时添加标记才有意义。在这种情况下，签名的`[object, ...], *`部分应该被列为`*objects`代替。

更正后的版本现在为：

> `print(*objects, sep=' ', end='\\n', file=sys.stdout, flush=False)`

文档的在线[开发版本](http://docs.python.org/dev/library/functions.html#print)目前尚未更新，但[文档来源已更正](http://hg.python.org/cpython/rev/b01eb870f84f#l4.49)；我会看看我们是否可以请求重新生成文档。

需要明确的是：`*`语法在 Python 3 中有效，这意味着以下参数只能用作关键字参数，而不是位置参数。然而，这*不适*用于该`print()`函数，因为无论如何都要打印*所有位置参数，并且永远不会被误认为是关键字参数。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-22T09:39:23.340

这意味着以下参数仅是关键字，即您不能将它们作为位置参数提供，您必须使用它们的名称，例如：

```
>>> def f(*, a): pass
... 
>>> f(1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: f() takes exactly 0 positional arguments (1 given)
>>> f(a=1)
>>> # ok 
```

另一个例子：

```
>>> def g(*a, b): pass
... 
>>> g(1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: g() needs keyword-only argument b
>>> g(1, 2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: g() needs keyword-only argument b
>>> g(1, b=2)
>>> # ok
>>> g(1, 2, b=3)
>>> # ok 
```

# hyperlink - 通过 Adob e Illustrator 在 SVG 中创建文本链接

> ID：12542546
> 
> 赞同：0
> 
> 时间：2012-09-22T09:24:26.603
> 
> 标签：hyperlink, svg, adobe-illustrator, xlink

链接出文本时，我将图形保存为**Tiny-SVG**，并将文本段落嵌入到`tspan`元素中并`tspan`使用`<a xlink:href="http://....">`. 它有效，但我想了解更多关于替代品的信息，以及与使用其他元素（如组）相比的*优缺点*`g`： .

**问题**

1.  有没有直接在 Adob​​e Illustrator CS 4+ 中快速执行此操作的方法？

2.  你用什么做链接？（标记方面，即）

**参考代码**

```
 <text font-size="6">created by 
    <a xlink:href="https://github.com/..."><tspan>{APPNAME}</tspan></a>
    {APPVERSION}
  </text> 
```

**链接**

[W3C：17.2 SVG 内容外的链接：'a' 元素](http://www.w3.org/TR/SVG/linking.html#Links)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:49:31.843

1.  不知道
2.  您可以将任何渲染 svg 元素包装在 <a> 元素中，例如，如果您愿意，可以将整个 <text> 元素包装在其中，甚至包括一些形状。这取决于你想让什么成为可点击的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T13:08:53.700

我最近也尝试在 Illustrator 中执行此操作，并在 Graphic Design Stack Exchange 论坛上找到[了一个很好的答案。](https://graphicdesign.stackexchange.com/questions/27497/add-a-hyperlink-within-illustrator/27500#comment62545_27500)但是，Illustrator 在执行此操作时对我来说似乎有点问题（请查看我的评论）。此外，我发现如果我在 Illustrator 中打开并编辑现有的 svg，它在保存修订版时不会保留链接。

# iphone - 将 xib 文件添加到具有情节提要的项目中

> ID：12542547
> 
> 赞同：0
> 
> 时间：2012-09-22T09:24:44.693
> 
> 标签：iphone, ios, ipad, storyboard, xib

我是 iPhone 初级，我正在使用 Xcode 4.3 和 iOS5。我使用 iPhone5 的故事板创建了一个巨大的项目，当我尝试发布时，该项目已被拒绝，因为他们告诉我它不在 iPhone4 和 iPad3 中运行。现在，我正在尝试解决这个问题，并试图让它在 Xcode 的 iPhone4 模拟器中运行，但它给出了这个错误：

```
storyboards are unavailable on ios 4.3 and prior 
```

我用谷歌搜索发现我必须创建 xib 文件。

但我不知道如何执行此操作并为每个视图控制器创建 Xib 文件，因为现在只有 (h & m) 文件。如果我创建了 Xib 文件，在我花了很长时间构建它之后，这是否会导致从项目中删除情节提要？请帮我。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:16:31.397

使用兼容版本更改部署目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:52:15.240

如果你想支持旧版本的 IOS，你必须使用 XIB 文件而不是 Storyboards。故事板仅适用于 IOS 5 及更高版本。我们不能在同一个项目中使用故事板和 xib。您可能想要删除 StoryBoard 并从 XIB 文件开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:27:07.770

如果您的目标是 < 5.0，那么首先使用 .xibs 可能会更好。

基本上是的，您必须使用 .xib 文件重新创建故事板。根据您设置情节提要的方式，这也可能包括对代码的更改。

~~不过，您也可以保留故事板 - 据我所知，有两个 plist 选项沿着“初始 XIB”和“初始故事板”行 - iOS 5+ 将使用后者来加载应用程序。~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T09:33:28.193

在项目导航器中选择您的项目，选择摘要选项卡，并将部署目标设置为 5.0 或更高版本（以您的 iPhone 上可用的为准），它可能会工作

# android - XMLParser 编码问题

> ID：12542555
> 
> 赞同：0
> 
> 时间：2012-09-22T09:25:38.437
> 
> 标签：android, xml, utf-8

```
public XMLParser(InputStream is) {
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db;
        db = dbf.newDocumentBuilder();
        Document doc = db.parse(is);
        node = doc.getDocumentElement();
    } catch (Exception e) {
        DebugLog.log(e);
    }
} 
```

inputStream 包含如下内容：“嘿，这是一个 ü 字符。” 字符'ü' 是一个'ü'；

当读取节点的内容 System.out.println(node.getTextContent()) 我收到“嘿，这是一个字符。” ü 被剪掉了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:12:11.530

问题是 XML 实体和 HTML 实体。我请求一个返回 HTML 实体数据的网页。我必须将 HTML 实体转换为 XML 实体，它成功了！

[检查此答案以获取一些代码](https://stackoverflow.com/questions/10438694/java-convert-named-html-entities-to-numbered-xml-entities "检查此答案以获取一些代码")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:31:03.790

那么，这是一份有效的文件吗？是否指定了编码？-> [http://www.w3schools.com/XML/xml_encoding.asp](http://www.w3schools.com/XML/xml_encoding.asp)

这些可能会有所帮助：

> [如何让 SAX 解析器从 xml 声明中确定编码？](https://stackoverflow.com/questions/3482494/howto-let-the-sax-parser-determine-the-encoding-from-the-xml-declaration) [http://www.coderanch.com/t/127052/XML/XML-parsers-encoding-byte-order](http://www.coderanch.com/t/127052/XML/XML-parsers-encoding-byte-order)

# jquery - CSS div 定位辅助

> ID：12542563
> 
> 赞同：8
> 
> 时间：2012-09-22T09:27:04.843
> 
> 标签：jquery, css, html, hover

我需要一些帮助来定位出现在每个#box 的悬停事件上的 div。隐藏的 div 应该以如下方式显示在悬停的框上：

1.  每个#tooltip div 都覆盖了悬停的框以及旁边的框
2.  框 1 和 2 的工具提示应覆盖右侧的框
3.  # 框 3 和 4 的工具提示应覆盖其左侧的框

    （为了更容易理解，请看附图
4.  会有几行框，所以定位应该是相对的，而不是固定到页面尺寸（我想）

到目前为止，我还没有设法让#tooltip 定位正确（我知道一个应该是绝对的，另一个应该是相对的，但无论我如何努力，我还没有确定它）。

这是一个要处理的[jsfiddle](http://jsfiddle.net/4Svrj/1/)，这是我追求的结果：

![在此处输入图像描述](../Images/8d7de0e303448582fcd97bd6dc10bd30.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T09:48:15.270

我整理了一个我认为可以完成您所描述[的小提琴。](http://jsfiddle.net/4Svrj/10/)

它背后的想法是我在盒子及其工具提示周围放置了一个包装器。然后我在包装器上监听鼠标悬停事件，而不是单独监听盒子和它的工具提示。这样我们就可以避免在显示工具提示时闪烁，从而覆盖最初悬停的元素。

使包装器位置相对可以相对于它绝对定位工具提示。在您的 jQuery 悬停回调中使用一个小的 if 语句，我们可以确定工具提示是否应该与框的左侧或右侧对齐。

如果小提琴由于某种原因会消失，请在答案中附加小提琴中的代码。

**标记：**

```
<div class="container">
    <div class="boxwrapper">
       <div id="box1" class="box">Box 1</div>
       <div id="tooltip1" class="tooltip">Description 1</div>
    </div>
    <div class="boxwrapper">
       <div id="box2" class="box">Box 2</div>
       <div id="tooltip2" class="tooltip">Description 2</div>
    </div>
    <div class="boxwrapper">
       <div id="box3" class="box">Box 3</div>
       <div id="tooltip3" class="tooltip">Description 3</div>
    </div>

    <div class="boxwrapper">
       <div id="box4" class="box">Box 4</div>
       <div id="tooltip4" class="tooltip">Description 4</div>
    </div>
    <div class="clearfix"></div>
</div>​ 
```

**CSS：**

```
.container {
    width: 450px;
    height: auto;
}

.box {
    background: #CCC;
    padding: 20px;
    float: left;
    height: 60px;
    width: 60px;
    list-style-type: none;
    margin: 5px;
    z-index: 1;
}
.tooltip {
    background: rgba(153,153,153,0.7);
    padding: 20px;
    height: 60px;
    width: 170px;
    margin: 5px;
    display:none;
    position: absolute;
    z-index: 2;
}
.clearfix {
    clear: both;
    float: none;
    height: 1px;
}
.boxwrapper {
    position: relative;
    float: left;
} 
```

**jQuery：**

```
$(document).ready(function() {

    $(".boxwrapper").mouseenter(function() {
        var tooltip = $(".tooltip", this);
        tooltip.show();
        if ($(".boxwrapper").index(this) < 2) {
            tooltip.css("left", 0);
        } else {
            tooltip.css("right", 0);
        }
    });

    $(".boxwrapper").mouseleave(function(event) {
        $(".tooltip", this).hide();
    });

});  ​ 
```

**更新：**

如果您要在不止一排的盒子上使用它，您将不得不稍微改进 if 语句以考虑到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T10:33:47.513

这就是你想要得到的吗？

[http://jsfiddle.net/xnrdp/1/](http://jsfiddle.net/xnrdp/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:25:28.767

您可以在 CSS 本身中执行此操作，使用“悬停”选择器和“nth-of-type”。

选择每第三行：

```
:nth-of-type(3), :nth-of-type(7), :nth-of-type(13), :nth-of-type(15) 
```

和第四行：

```
:nth-of-type(4), :nth-of-type(8), :nth-of-type(12), :nth-of-type(16) 
```

并赋予其飞出框必要的属性。

演示：[http ://dabblet.com/gist/3765761](http://dabblet.com/gist/3765761)

标记：

```
<div class='box'>1
    <div class='fly-out'></div>
</div>

<div class='box'>2
    <div class='fly-out'></div>
</div>

<div class='box right-aligned'>3
    <div class='fly-out'></div>
</div>
<div class='box right-aligned'>4
    <div class='fly-out'></div>
</div>

<div class='box'>5
    <div class='fly-out'></div>
</div>

<div class='box'>6
    <div class='fly-out'></div>
</div>

<div class='box right-aligned'>7
    <div class='fly-out'></div>
</div>

<div class='box right-aligned'>8
    <div class='fly-out'></div>
</div>

<div class='box'>9
    <div class='fly-out'></div>
</div>

<div class='box'>10
    <div class='fly-out'></div>
</div>

<div class='box right-aligned'>11
    <div class='fly-out'></div>
</div>

<div class='box right-aligned'>12
    <div class='fly-out'></div>
</div>

<div class='box'>13
    <div class='fly-out'></div>
</div>

<div class='box'>14
    <div class='fly-out'></div>
</div>

<div class='box right-aligned'>15
    <div class='fly-out'></div>
</div>
<div class='box right-aligned'>16
    <div class='fly-out'></div>
</div> 
```

CSS：

```
* {
margin: 0; 
padding: 0; 
box-sizing: border-box; /* paulirish.com/2012/box-sizing-border-box-ftw/ */
position: relative; 
}

body {
    width: 440px;
    margin: 0 auto;
    }

.box {
    width: 100px;
    height: 100px;
    border: 1px solid #999;
    float: left;
    margin: 5px;
    }
    .fly-out {
        position: absolute;
        top: 0;
        background: rgba(0,0,0,.4);
        opacity: 0;
        z-index: -1;
        }
    .box:hover .fly-out {
        z-index: 1;
        opacity: 1;
        height: 100%;
        width: 210px;
        }
    .box:nth-of-type(3):hover .fly-out,
    .box:nth-of-type(7):hover .fly-out,
    .box:nth-of-type(11):hover .fly-out,
    .box:nth-of-type(15):hover .fly-out,
    .box:nth-of-type(4):hover .fly-out,
    .box:nth-of-type(8):hover .fly-out,
    .box:nth-of-type(12):hover .fly-out,
    .box:nth-of-type(16):hover .fly-out,

    .right-aligned {
        left: -110px;
        right: 0;
        background: rgba(0,0,120,.7);
        } 
```

在您的标记中，“工具提示”位于框外，并且具有“可见性：隐藏”，这很像给它“不透明度：0”。虽然看不到，但它仍然存在。要真正使它对布局不可用，您需要“显示：无”，但是您将无法使用 CSS 转换正确地对其进行动画处理。

**注意：**就像下面评论中提到的 Christofer Eliason 一样，':nth-of-type' 选择器没有得到很好的支持，因此您可以为每个 div 添加一个类，以便让弹出窗口右对齐或查看使用 'nth-of-type' 的 jquery 版本：[https](https://stackoverflow.com/a/4761510/604040) ://stackoverflow.com/a/4761510/604040 。

我使用了 ':nth-of-type' 选择器，因为您可以从 CSS 本身控制飞出的对齐方式，如果它们是动态添加的，则无需将类添加到新框，这在数学上可能有点复杂（至少为了我）。

但是，如果您对此感到满意，我已经在每行的第 3 和第 4 框中添加了一个类“.right-aligned”，您可以在 CSS 中删除此块，您仍然很好：

```
.box:nth-of-type(3):hover .fly-out,
.box:nth-of-type(7):hover .fly-out,
.box:nth-of-type(11):hover .fly-out,
.box:nth-of-type(15):hover .fly-out,
.box:nth-of-type(4):hover .fly-out,
.box:nth-of-type(8):hover .fly-out,
.box:nth-of-type(12):hover .fly-out,
.box:nth-of-type(16):hover .fly-out 
```

# objective-c - Xcode：如何知道实际导入的头文件？

> ID：12542566
> 
> 赞同：0
> 
> 时间：2012-09-22T09:27:58.920
> 
> 标签：objective-c, xcode, import, restkit

具体来说，我使用的是 RestKit 框架。我想使用`RKObjectManager+RKTableController`在我的视图控制器中调用的框架类类别`mainTVC`。这是我在 mainTVC.m 中的#import 部分：

```
// framework headers, which should be enough
#import <RestKit/RestKit.h>
#import <RestKit/UI.h>

// my project headers, not relating to framework
#import "MainTVC.h"
#import "Photo.h"

// Do this to guarantee import does happen. But still got error, see below
#import <RestKit/RKObjectManager+RKTableController.h> 
```

但是，Xcode 发出错误：

```
No known class method for selector 'fetchRequest:groupedBy:inContext:' 
```

作为参考，此方法是仅在类别头中声明的类方法`RKObjectManager+RKTableController.h`，而不是在“RKObjectManager.h”中声明。

此外，如果相关，我将 -ObjC 和 -all_load 添加到构建设置中的“其他链接器标志”中。

我怀疑该错误是由于类别标题实际上并未以某种方式导入的事实引起的。我该如何验证呢？或者错误是由我不知道的其他原因引起的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:33:42.013

该方法属于类别 NSManagedObject (ActiveRecord)，而不是 RKObjectManager (RKTableController)。我用“NS”前缀弄乱了“RK”前缀。好尴尬..大声笑，问题已解决。

# android - 如何从服务器获取通知到 android 设备？

> ID：12542567
> 
> 赞同：4
> 
> 时间：2012-09-22T09:28:16.697
> 
> 标签：android, servlets, webserver

我正在创建一个用户共享一些信息的应用程序。我通过servlet将这些数据存储在数据库中，即我正在调用我自己的servlet，它将通过url获取数据并将其存储在数据库中。因此，我希望同一应用程序的其他用户能够收到一些信息可用的通知，然后他们将获得其他用户已更新的信息。为此，我们可以使用轮询或推送器。但轮询会消耗大量电池电量。我尝试过 C2DM，但它对我不起作用。所以我正在考虑其他一些机制，我可以通过它来实现 C2DM 以外的其他机制。请提出一些工作方法。例如，如果你遇到过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:30:10.213

C2DM 已弃用，新版本称为[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html) (GCM)，这正是您的用例所需要的。甚至还有一个使用 Java servlet的[GCM 演示应用程序。](http://developer.android.com/guide/google/gcm/demo.html)源代码可以在[这里](http://code.google.com/p/gcm/)找到，您[可以直接浏览它，](http://code.google.com/p/gcm/source/browse/)或者如果您更喜欢 GitHub，您可以使用[这个存储库](https://github.com/ketanpatel25/GCM-Demo)。

servlet 代码可以在文件中找到

```
samples/gcm-demo-server/src/com/google/android/gcm/demo/server/HomeServlet.java 
```

如果您按照[入门指南](http://developer.android.com/guide/google/gcm/gs.html)中的说明进行操作，您很快就会拥有一个工作应用程序。我建议您不要尝试将其复制粘贴在一起，您必须清楚地了解 GCM 架构的工作原理。

# c# - 从另一个类访问 mainwindow.xaml.cs 方法

> ID：12542576
> 
> 赞同：1
> 
> 时间：2012-09-22T09:29:35.333
> 
> 标签：c#, wpf

嗨，我在 Wpf 应用程序方面相对较新

我想知道我可以`mainwindow.xaml.cs` 在其他类中创建一个对象
然后使用该对象超出用户定义的方法`mainwindow.xaml.cs`

我正在尝试这样的事情，它创建了主窗口的对象，但无法访问该方法我尝试访问的方法是公共定义的

```
MainWindow window = new Mainwindow();
window.point_to_screen(); 
```

它给出了这个错误

> 错误 2 类型名称“point_to_screen”在类型“System.Windows.Window”中不存在

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-17T14:21:50.640

您应该将当前主窗口转换为 MainWindow 对象。如果您创建一个新窗口，您将无法访问当前打开的窗口

```
MainWindow wnd = (MainWindow)Application.Current.MainWindow;
wnd.point_to_screen(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T06:01:02.133

确保您的方法处于***`public`***保护级别，并检查您是否使用实例方法（不是`static`）：

```
public class MainWindow 
{
...
    public void point_to_screen()
    {
       ...
    }
 } 
```

并使用它：

```
 MainWindow window = new Mainwindow();
 window.point_to_screen(); 
```

* * *

如果你使用一种`static`方法，你的代码应该是这样的：

```
public class MainWindow 
{
...
    public static void point_to_screen()
    {
       ...
    }
 } 
```

并使用它：

```
 MainWindow.point_to_screen(); 
```

# android - Android 服务 getSharedPreferences 问题

> ID：12542577
> 
> 赞同：1
> 
> 时间：2012-09-22T09:29:44.080
> 
> 标签：android, service, sharedpreferences

所以基本上，我的服务会显示一个通知，如果用户愿意，可以将其关闭。

该设置由应用程序内部控制，并通过 PreferenceActivity 进行设置。

退出活动时：

```
public void onDestroy(){
    prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    debug.postLog(Log.DEBUG, "Settings", "("+this.toString()+") showNotification: " + prefs.getBoolean("showNotification", true)); 
```

显示正确的值，如果用户取消选中该复选框，则显示为 false，反之亦然。

同时，当我在我的服务中随时调用它时：

```
prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    Boolean show = prefs.getBoolean("showNotification", true);
    debug.postLog(Log.DEBUG, "Passive Service", "("+this.toString()+") showNotification: " + prefs.getBoolean("showNotification", true));       
    if(prefs.getBoolean("showNotification", true)){ 
```

我得到相同的结果，直到应用程序完全停止然后重新启动，然后保留当前值。这几乎就像服务获得了偏好的快照。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:19:50.123

解决了，该服务作为远程运行。

# php - 使用 PHP/MySQL 的评分表

> ID：12542581
> 
> 赞同：3
> 
> 时间：2012-09-22T09:30:12.083
> 
> 标签：php, javascript, mysql, sql

我想建立一个显示特定人得分的网页。
它将有 3 列，即等级、名称和点数。
排名列是一个自动更新列。
我希望数据库以升序方式显示分数和相应的排名。
我将手动将分数更新到数据库中或使用 SQL 查询“更新”。但是然后通过刷新网页，排名应该根据分数进行排序。

我试过这个

```
SELECT * FROM 'SCORE' ORDER BY 'POINTS' ASC; 
```

这里，score 是表格，points 是点数列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:31:54.903

不要在列名周围使用单引号。改用反引号，

```
SELECT *
FROM `SCORE` 
ORDER BY `POINTS` ASC; 
```

# android - Android：如何制作国际吐司（不同语言）？

> ID：12542585
> 
> 赞同：1
> 
> 时间：2012-09-22T09:30:30.410
> 
> 标签：android, toast

我有一个简单的问题：我想根据用户的语言进行国际祝酒。

`Toast.makeText(this,"hello", Toast.LENGTH_SHORT).show();`

我已经使用文件 string.xml 创建了文件夹“values”和“values-fr”，其中分别有：

`<string name="hello">Hello World</string>`

和

`<string name="hello">Bonjour</string>`

现在如何将它添加到我的吐司中？先感谢您 ;）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T09:32:51.727

你可以写以下。

```
Toast.makeText(getApplicationContext(), getResources().getString(R.string.hello), Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:36:49.800

采用

```
getResources().getString(R.string.hello) 
```

而不是“你好”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:41:18.457

试试下面的代码...

```
Toast toast = Toast.makeText(getBaseContext(), R.string.hello, Toast.LENGTH_LONG);
toast.show(); 
```

# asp.net - 从数据库加载对象列表以实例化单个对象的有效方法

> ID：12542587
> 
> 赞同：4
> 
> 时间：2012-09-22T09:30:38.727
> 
> 标签：asp.net, sql, performance, linq-to-sql

**我的情况**

我有包含一些列表的 ac# 对象。例如，这些列表之一是标签列表，它是 c#“SystemTag”对象的列表。**我想以最有效的方式实例化这个对象**。

在我的数据库结构中，我有以下表格：

*   dbObject - 包含有关我的 c# 对象的一些基本信息的表
*   dbTags - 所有可用选项卡的列表
*   dbTagConnections - 一个包含 2 个字段的列表：TagID 和 ObjectID（确保一个对象可以有多个标签）

*（我还有其他几个类似类型的数据）*

**我现在就是这样做的...**

1.  使用 ID 从数据库中检索我的对象
2.  将 DB 对象发送到“对象工厂”模式，然后意识到我们必须获取标签（和其他列表）。然后它使用我们的 C# 对象的 ID 向 DAL 层发送调用
3.  DAL 层从数据库中检索数据
4.  这些数据被发送到转换为标签的“TagFactory”模式
5.  我们回到了对象工厂

这确实效率低下，我们对数据库有很多调用。这尤其会带来问题，因为我有 4 种以上类型的列表。

**我尝试了什么？**

我不太擅长 SQL，但我尝试了以下查询：

```
SELECT * FROM dbObject p
LEFT JOIN dbTagConnection c on p.Id=  c.PointId
LEFT JOIN dbTags t on c.TagId = t.dbTagId
WHERE .... 
```

但是，这会检索与标记连接一样多的对象 - 所以我不认为连接是实现此目的的好方法。

**其他信息...**

*   使用 .NET Framework 4.0
*   使用 LINQ to SQL（BLL 和 DAL 层与 BLL 中的工厂模式从 DAL 对象转换）

...

**那么 - 我如何尽可能有效地解决这个问题？：-） 谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:52:07.483

我们使用了返回多个结果集的存储过程，在以前使用 Java/MSSQL 服务器/Plain JDBC 的项目中的情况类似。

存储过程取要检索的对象对应的ID，返回构建主对象的行，后跟与主对象的每个一对多关系的多条记录。这使我们能够在单个数据库交互中完整地构建对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:50:27.860

你有没有想过使用实体框架？然后，您将与您的数据库进行交互，就像您与应用程序中的任何其他类型的类进行交互一样。

设置起来非常简单，您可以在实体设计器中创建数据库表之间的关系 - 这将为您提供调用相关对象所需的所有外键。如果您在数据库中设置了所有键，那么实体设计器将使用这些键 - 创建所有对象就像选择“从数据库创建模型”一样简单，当您对数据库进行更改时，您只需右键单击您的设计师并选择“从数据库更新模型”

该框架会为您处理所有 SQL - 因此您无需担心；大多数情况下..

一个很好的开始和运行的地方就是[这里](http://www.dotnetcurry.com/ShowArticle.aspx?ID=599)，[这里](http://www.dotnetcurry.com/ShowArticle.aspx?ID=600)

完成所有设置后，您可以使用 LINQ 轻松查询数据库。

您会发现这比沿表适配器路由更有效（假设您目前正在这样做？）

抱歉，如果我错过了什么，而您已经在使用它.. :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:58:37.323

乍一看，我不认为您当前的工作方式“效率低下”（提供的信息）。我会替换代码：

```
SELECT * FROM dbObject p
LEFT JOIN dbTagConnection c on p.Id=  c.PointId
LEFT JOIN dbTags t on c.TagId = t.dbTagId
WHERE ... 
```

通过两次调用 DALs 方法，首先检索对象主要数据 (1)，然后仅获取相关标签的数据 (2)，以便您的工厂可以填充对象的标签列表：

(1)

```
SELECT * FROM dbObject WHERE Id=@objectId 
```

(2)

```
SELECT t.* FROM dbTags t
INNER JOIN dbTag Connection c ON c.TagId = t.dbTagId
INNER JOIN dbObject p ON p.Id = c.PointId
WHERE p.Id=@objectId 
```

如果您有很多对象并且数据量只有少数（这意味着您不会管理大量数据），那么我会寻找一个基于 ORM 的解决方案作为`Entity Framework`.

我（仍然）觉得在 DAO 中编写 SQL 查询来控制所有发送到数据库服务器的查询很舒服，但最后是因为在我们的情况下是需要的。我认为必须查询数据库以首先恢复对象数据（`SELECT * FROM dbObject WHERE ID=@myId`）并填充对象实例，然后再次查询数据库以恢复您可能需要的所有卫星数据（您的情况下的标签）。

您对您的场景更加简洁，以便我们可以为您的特定场景提供有价值的建议。无论如何，希望这对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:03:12.490

据我猜测，您的数据库已经存在并且您对 SQL 足够熟悉。

您可能想要使用微型 ORM，例如**[petapoco](http://www.toptensoftware.com/petapoco/)**。

要使用它，您必须编写与数据库中的表匹配的类（有 T4 生成器可以使用 Visual Studio 2010 自动执行此操作），然后您可以编写包装器来创建更丰富的业务对象（您可以使用[ValueInjecter](http://valueinjecter.codeplex.com/)这样做，这是我用过的最简单的），或者你可以照原样使用它们。

Petapoco 处理插入/更新操作，并自动检索生成的 ID。

因为 Petapoco 也[处理多个关系](http://www.toptensoftware.com/Articles/115/PetaPoco-Mapping-One-to-Many-and-Many-to-One-Relationships)，所以它似乎符合您的要求。

# java - 在 Android 中获取 GPS 数据时，我们可以将 GPS 数据写入 CSV 文件吗？

> ID：12542589
> 
> 赞同：4
> 
> 时间：2012-09-22T09:30:42.963
> 
> 标签：java, android, file, csv

我已经编写了获取 GPS 数据的代码并将其打印在 Toast 消息中。GPS 数据打印为 Toast 消息。但在应用程序关闭时不要写入 CSV 文件。这是我的代码，

```
public class MyLocationListener implements LocationListener
{
    public void onLocationChanged(Location loc)
    {
        if(root1.canWrite())
        {
            dir1 = new File (root1.getAbsolutePath() + "/TrackingData");

            if(!dir1.exists())
            {
                Toast.makeText(getBaseContext(), "Directory creation", Toast.LENGTH_LONG).show();
                dir1.mkdirs();
                file1 = new File(dir1, "Data.csv");
            }
        }

        try {
            out = new FileOutputStream (file1,append);

        } catch (FileNotFoundException e) {
            e.printStackTrace();

        }
        mlongitude = loc.getLongitude();  
        mlatitude = loc.getLatitude();

        //  location = loc;
        if (mlatitude != 0 && mlongitude !=0)
        {
            Toast.makeText( getApplicationContext(),"Lat "+mlatitude+" Long "+mlongitude,Toast.LENGTH_SHORT).show();

            //Writing in CSV file on device     

            //String SDcardpath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/TrackData/Data.csv";
            strlat = String.valueOf(mlatitude);
            strlong = String.valueOf(mlongitude );
            String strspeed = String.valueOf(speed);
            locationManager.removeUpdates(this);
            locationManager.removeUpdates( mlocListener);
            //send location to server

            if(file1.exists())
            {
                sb1.append("Time");
                sb1.append(",");
                sb1.append("Latitude");
                sb1.append(",");
                sb1.append("Longitude");
                sb1.append(",");
                sb1.append("Speed");
                if (root1.canWrite()){
                    try {
                        out.write(sb1.toString().getBytes());
                        out.write('\n');
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    sb1.delete(0, sb1.length());
                }
                sb1.append("\""+sdate+"\"");
                sb1.append(",");
                sb1.append("\""+strlat+"\"");
                sb1.append(",");
                sb1.append("\""+strlong+"\"");
                sb1.append(",");
                sb1.append("\""+strspeed+"\"");

                if (root1.canWrite()){

                    try {
                        out.write(sb1.toString().getBytes());
                        out.write('\n');
                    } 
                    catch (IOException e) 
                    {
                        Toast.makeText(getBaseContext(), "Can't write in file", Toast.LENGTH_LONG).show();
                        e.printStackTrace();
                    }

                    sb1.delete(0, sb1.length());
                }
            }
            else
            {
                try {
                    file1.createNewFile();

                    sb1.append("Time");
                    sb1.append(",");
                    sb1.append("Latitude");
                    sb1.append(",");
                    sb1.append("Longitude");
                    sb1.append(",");
                    sb1.append("Speed");
                    if (root1.canWrite()){
                        try {
                            out.write(sb1.toString().getBytes());
                            out.write('\n');
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                        sb1.delete(0, sb1.length());
                    }
                    sb1.append("\""+sdate+"\"");
                    sb1.append(",");
                    sb1.append("\""+strlat+"\"");
                    sb1.append(",");
                    sb1.append("\""+strlong+"\"");
                    sb1.append(",");
                    sb1.append("\""+strspeed+"\"");

                    if (root1.canWrite()){

                        try {
                            out.write(sb1.toString().getBytes());
                            out.write('\n');
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                        sb1.delete(0, sb1.length());
                    }
                } catch (IOException e) {
                    Toast.makeText(getBaseContext(), "Can;t create new file", Toast.LENGTH_LONG).show();
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:36:21.017

我已经在 AndroidManifest 文件中声明了这一点

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

现在工作正常

# google-chrome - 如何编译 Google Courgette 工具？

> ID：12542591
> 
> 赞同：17
> 
> 时间：2012-09-22T09:30:47.803
> 
> 标签：google-chrome, compilation, chromium, gyp, binary-diff

Courgette ([描述](http://dev.chromium.org/developers/design-documents/software-updates-courgette),[来源](http://src.chromium.org/viewvc/chrome/trunk/src/courgette/)) 是一个谷歌工具，用于有效地更新 Chrome。

它似乎是一个很棒且易于使用的工具，但我无法编译它。我已经尝试过 VS2010、GYP 并直接使用 C++ 编译器，但都失败了。

有人对如何编译 Courgette 有任何建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-17T15:21:00.770

至少，您可以按照 Google 官方指南了解[如何编译](http://www.chromium.org/developers/how-tos/build-instructions-windows)整个 Chromium。`ninja -C out/Debug chrome`但是，您可以只构建 courgette: ，而不是调用`ninja -C out/Debug courgette`。或者，如果你坚持 VS 的方式——在 Chromium 项目树中找到 courgette 项目并“构建”它。

# exchange-server - Microsoft Exchange – 获取所有邮件流量发件人和收件人

> ID：12542601
> 
> 赞同：2
> 
> 时间：2012-09-22T09:32:25.800
> 
> 标签：exchange-server

我正在创建解决特定类型安全问题的安全软件。为此，我需要收集有关使用 Microsoft Exchange 发送的所有邮件的信息。需要的信息是邮件的发件人、收件人和时间戳。实际上，我什至不需要在特定时间范围内为每个发送方-接收方对保存实时计数器的信息。我怎样才能做到这一点？是否有一些 Exchange 服务可用于获取此信息？必须在每个交换服务器（集线器、邮箱服务器等）上安装这样的组件吗？是否有包含此类信息的 Exchange 日志或内部数据库？

# ssis - 转换图像列很慢

> ID：12542614
> 
> 赞同：1
> 
> 时间：2012-09-22T09:34:12.203
> 
> 标签：ssis, lookup

我想将旧数据库中的数据转换为具有新结构的新数据库。在旧数据库中，我有必须转换为新数据库中的附件表的附件表。

旧数据库附件表结构如下：

```
Attachment (ID int, Image Image, ...) 
```

新的数据库附件表结构如下：

```
Attachment (ID int, Image Image, OldID Int, ...) 
```

每次我执行转换包副本时，仅不存在从旧数据库到新数据库的数据（新数据）。

我使用以下格式进行操作：

![在此处输入图像描述](../Images/2eeb0e1c7b4fed59c3fe27db5beefed6.png)

在旧表和新表 ( `ID --> OldID`) 之间查找以检查是否存在记录。

当我运行 SSIS 包时；SSIS，首先将所有查找和源组件数据缓存在内存中，然后执行打包。我在这个包中的源数据非常庞大，当我运行这个包时，它的运行速度会非常慢。我想从旧数据库中获取`lookup for check exists`组件后每个新记录的图像列数据。如果我使用新的查找组件从旧数据库中获取图像列数据，SSIS 缓存这个新的查找数据并且运行这个包的执行时间不会改变。我必须做什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:47:34.150

1.  仅从`ID`源表中 选择
2.  在目标数据库中进行查找而不做任何更改
3.  对于`no match output`在源表中进行查找，`Cache Mode`设置为`No cache`，这会将 Image 附加到流中。

在这种情况下，将单独获取每个图像，这可能会影响性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:34:05.003

您也可以在两个数据流中执行此操作。

在第一：

1.  从源表中仅选择 ID
2.  在目标数据库中进行查找而不做任何更改
3.  `Ids`使用 Srcipt 组件作为目标女巫代码，将字符串变量中的新内容存储`IdListToBeFetched`为逗号分隔列表，类似于：

```
 using System.Text;
[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{
    StringBuilder sb;
    public override void PreExecute()
    {
        base.PreExecute();
        sb = new StringBuilder();
    }

    public override void PostExecute()
    {
        base.PostExecute();
        Variables.IdListToBeFetched = sb.ToString().TrimEnd(',');
    }

    public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        if (!Row.ID_IsNull)
        {
            sb.AppendFormat("{0},", Row.ID);
        }
    }
} 
```

在第二个数据流中，将源的 sql 命令设置为从类似于`"select ID, Image from Attachment where ID in (" + @[User::IdListToBeFetched] + ")"`和 set `DelayValidation`=的表达式动态生成的查询`True`。它将把所有图像都放在一个`select`应该更快的位置。

将动态生成的查询设置为`SqlCommand`像`ADO NET Source`或这样的源`ODBC Source`：

1.  选择包含您的来源 `Expression`的属性`Data Flow Task`
2.  在此处查找属性`[your source name].[SqlCommand]`并设置表达式

将动态生成的查询设置为 sql 命令`OLE DB Source`（取自[Jamie Thomson 博客](http://consultingblogs.emc.com/jamiethomson/archive/2005/12/09/SSIS_3A00_-Using-dynamic-SQL-in-an-OLE-DB-Source-component.aspx)）：

1.  创建一个名为 SourceSQL 的新变量
2.  打开 SourceSQL 变量的属性窗格（按 F4）
3.  设置 EvaluateAsExpression=TRUE
4.  设置`Expression`为`"select ID, Image from Attachment where ID in (" + @[User::IdListToBeFetched] + ")"`
5.  对于您的 OLE DB 源组件，打开编辑器
6.  设置数据访问模式="来自变量的 SQL 命令"
7.  设置变量名 = "SourceSQL"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T16:09:59.540

你确定你的想法正确吗？即使您加载的数据量很大，SSIS 也不应该很慢。

您的 LOOKUP 组件需要确保它没有做任何它不需要做的事情。如果您将其指向新数据库中的表，请立即将其更改为 SQL 查询。在此查询中，您只需要将`SELECT OldId FROM tbl`来自旧数据库的传入 ID 指向此。您的数据流应该包含来自旧数据库的 ID 和图像，该数据库在您的 OLE DB 目标中被映射`ID -> OldId`和“图像 -> 图像”。不再需要像您在此处执行的“仅插入新行”操作。

对于这项工作，不需要任何自定义代码或动态 SQL。您-确实-希望从数据流中的源系统获取 ID 和图像（除非您有主要的网络瓶颈需要解决）- 进行 RBAR 查找以从旧系统获取图像数据是一种非常落后的方式考虑你的 ETL。

# spring - 找不到元素“jpa:repositories”的声明

> ID：12542616
> 
> 赞同：6
> 
> 时间：2012-09-22T09:34:16.873
> 
> 标签：spring, jpa, spring-mvc

我已经构建了一个简单的 spring 项目，并想在其中配置 JPA。我遵循了本教程：[http ://duckranger.com/2012/04/spring-mvc-3-x-with-sts-tutorial-part-iii-add-some-jpa/comment-page-1/#comment- 3085](http://duckranger.com/2012/04/spring-mvc-3-x-with-sts-tutorial-part-iii-add-some-jpa/comment-page-1/#comment-3085)

现在我已经结束了，但是当我尝试根据教程运行测试时，我收到以下错误：

```
 ERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@11bed71] to prepare test instance [com.tok.hello.domain.TrampTest@81b1fb]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 24 in XML document from class path resource [META-INF/spring/applicationContext.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'jpa:repositories'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:205)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:100)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'jpa:repositories'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:417)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3182)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1927)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:725)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:377)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 36 more 
```

这是抱怨的确切部分：

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'jpa:repositories'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195) 
```

这就是我的 ApplicationContext.xml 的样子：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<beans xmlns="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/jee
http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/data/jpa
http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

 <jpa:repositories base-package="com.tok.hello.repository" /> 

   <context:property-placeholder location="classpath*:META-INF/spring/*.properties"/>
   <context:spring-configured/>

    <context:component-scan base-package="com.tok.hello">
        <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>
    <bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="true"/>
        <property name="testOnReturn" value="true"/>
        <property name="testWhileIdle" value="true"/>
        <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
        <property name="numTestsPerEvictionRun" value="3"/>
        <property name="minEvictableIdleTimeMillis" value="1800000"/>
        <property name="validationQuery" value="SELECT 1"/>
    </bean>
    <bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>
    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
    <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
        <property name="persistenceUnitName" value="persistenceUnit"/>
        <property name="dataSource" ref="dataSource"/>
    </bean>
</beans> 
```

任何人都可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T18:22:15.467

为了解决这个问题，applicationContext.xml 中的定义必须正确排序，在“spring-context”之后放置“tx”和“tx-spring”，然后错误将得到解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T09:38:23.673

在 XML 声明头中包括以下行以声明 Spring Data Repositories 模式：

```
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       OTHER DEFINITIONS
       xmlns:repository="http://www.springframework.org/schema/data/repository"
       xsi:schemaLocation=" OTHERS
       http://www.springframework.org/schema/data/repository
       http://www.springframework.org/schema/data/repository/spring-repository.xsd">

</beans> 
```

希望有帮助。

# sql-server - 如何对 SQL Server 中的列使用加号操作，结果在下一行？

> ID：12542617
> 
> 赞同：0
> 
> 时间：2012-09-22T09:34:16.577
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 中有一个表，我想加上特定列的数量并将结果**放在下一行**。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:42:02.950

> 我想加上特定列的数量并将结果放在下一行。

如果您希望在添加一定数量后从上一行插入另一个，您可以使用以下内容：

```
INSERT INTO MyTable (Col1, Col2, Col3)
SELECT Col1, Col2 + <additional amount>, Col3
FROM MyTable
WHERE 
    <Criteria to select that row of interest> 
```

如果您要选择表中的所有行和`aggregate`金额列并将结果显示在单独的行中，则可以使用以下命令：

```
SELECT Col1, Col2, Col3 FROM MyTable
UNION
SELECT '', SUM(Col2), '' FROM MyTable 
```

# node.js - 如何使用猫鼬进行分页

> ID：12542620
> 
> 赞同：11
> 
> 时间：2012-09-22T09:34:25.523
> 
> 标签：node.js, mongodb, express, mongoose

我想在我的收藏中创建一个分页功能。如何在单个查询中找到具有“开始”和“限制”位置的文档并获得总文档数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-22T13:27:12.533

您不能在一个查询中同时获得两个结果；您能做的最好的事情是使用一个 Mongoose[`Query`](http://mongoosejs.com/docs/api.html#query-js)对象来获取它们：

```
var query = MyModel.find({});
query.count(function(err, count) {...});
query.skip(5).limit(10).exec('find', function(err, items) {...}); 
```

如果需要，请使用流控制框架，如[`async`](https://github.com/caolan/async)干净地并行执行它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-12T18:35:39.470

您可以使用插件[猫鼬分页](https://www.npmjs.com/package/mongoose-paginate)：

```
$ npm install mongoose-paginate 
```

在您的路线或控制器之后，只需添加：

```
Model.paginate({}, { page: 3, limit: 10 }, function(err, result) {
    // result.docs 
    // result.total 
    // result.limit - 10 
    // result.page - 3 
    // result.pages 
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-22T13:59:13.800

如果您计划有很多页面，则不应使用跳过/限制，而应计算范围。

请参阅 Scott 对类似问题的回答：[MongoDB - paging](https://stackoverflow.com/questions/5049992/mongodb-paging)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T09:54:18.103

**更新 ：**

使用跳过和限制不利于分页。[这是关于它的讨论。](https://stackoverflow.com/questions/5049992/mongodb-paging)

@Wes Freeman，给了一个很好的答案。我阅读了链接的姿势，您应该使用范围查询。n = 0; 我=n+10；db.students.find({ "id" : { $gt: n, $lt: (n+i)} } );

**旧答案**（不要使用这个）

使用类似的东西

```
n = db.students.find().skip(n).limit(10);
//pass n dynamically, so for page 1 it should be 0 , page 2 it should be 10 etc 
```

更多文档位于[http://www.mongodb.org/display/DOCS/Advanced+Queries](http://www.mongodb.org/display/DOCS/Advanced+Queries)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-24T06:20:03.827

```
 user.find({_id:{$nin:friends_id},_id:{$ne:userId}},function(err,user_details){
    if (err)
    res.send(err);
    response ={
        statusCode:200,
        status:true,
        values:user_details
    }
    res.json(response);
   }).skip(10).limit(1); 
```

# c# - 如何将原始电子邮件字符串解析为 System.Net.Mail.MailMessage 对象？

> ID：12542622
> 
> 赞同：4
> 
> 时间：2012-09-22T09:34:52.203
> 
> 标签：c#, asp.net, .net, tcp, pop3

我编写了一个程序，`C#`其中连接到 a并使用command`POP Server`从服务器检索原始电子邮件消息字符串。由于程序检索的电子邮件是纯文本格式，所有标题和邮件正文都相同，因此很难从原始字符串中提取每个标题和邮件正文。`POP3``RETR`

谁能告诉我一个解决方案，通过它我可以将整个原始文本解析为一个`System.Net.Mail.MailMessage`对象？

以下是示例电子邮件原始字符串：

```
+OK 1281 octets
Return-Path: <sample@test.in>
Delivered-To: samplenet-sample:in-sample2@test.in
X-Envelope-To: sample2@test.in
Received: (qmail 53856 invoked from network); 22 Sep 2012 06:11:46 -0000
Received: from mailwash18.pair.com (66.39.2.18)
MIME-Version: 1.0
From: "Deepu"
 <sample@test.in>
To: sample2@test.in
Date: 22 Sep 2012 11:41:39 +0530
Subject: TEST Subject
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Message-Id: <20120922061146.2975C11554D@mailwash18.pair.com>

TEST Body

. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:11:03.587

经过一番研究，我可以找到**OpenPop.Net**开源库，它几乎包含与 POP3 服务器通信的所有速记方法。

它非常有用，因为它将原始电子邮件消息包装为强类型`Message`对象，并且电子邮件消息的不同部分（包括其任何附件）也可以单独访问。真是太棒了！

链接在这里：

[http://hpop.sourceforge.net/](http://hpop.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:52:14.387

我目前正在调查同样的事情。本文包含一种将电子邮件字符串解析为自定义电子邮件对象的方法：

[http://dotnetslackers.com/articles/aspnet/Creating-a-Dynamic-Email-Drop-Box-Part2.aspx](http://dotnetslackers.com/articles/aspnet/Creating-a-Dynamic-Email-Drop-Box-Part2.aspx)

需要大量工作才能正确解析所有电子邮件。例如，发送日期字段的格式可以不同，此脚本仅捕获一种格式。但这个项目是一个好的开始。

# android - 从图像中检测人脸并从该照片中裁剪人脸

> ID：12542628
> 
> 赞同：4
> 
> 时间：2012-09-22T09:35:42.577
> 
> 标签：android, face-detection

我已经完成了编码，因为我成功地得到了矩形绘图的脸，现在我想裁剪那个矩形区域。如果有很多矩形（意味着很多面），用户可以选择一个面或矩形，并且应该裁剪该矩形区域，任何身体都可以帮助我...

下面是我的代码

```
 class AndroidFaceDetector extends Activity {
public String path;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle bundle = this.getIntent().getExtras();
    path = bundle.getString("mypath");
    setContentView(new myView(this));

}

class myView extends View {

    private int imageWidth, imageHeight;
    private int numberOfFace = 5;
    private FaceDetector myFaceDetect;
    private FaceDetector.Face[] myFace;
    float myEyesDistance;
    int numberOfFaceDetected;
    Bitmap myBitmap;

    public myView(Context context) {
        super(context);
        System.out.println("CONSTRUCTOR");
        System.out.println("path = "+path);
        if (path != null) {
            BitmapFactory.Options BitmapFactoryOptionsbfo = new BitmapFactory.Options();
            BitmapFactoryOptionsbfo.inPreferredConfig = Bitmap.Config.RGB_565;
            myBitmap = BitmapFactory.decodeFile(path, BitmapFactoryOptionsbfo);
            imageWidth = myBitmap.getWidth();
            imageHeight = myBitmap.getHeight();
            myFace = new FaceDetector.Face[numberOfFace];
            myFaceDetect = new FaceDetector(imageWidth, imageHeight, numberOfFace);
            numberOfFaceDetected = myFaceDetect.findFaces(myBitmap, myFace);

        } else {
            Toast.makeText(AndroidFaceDetector.this, "Please Try again", Toast.LENGTH_SHORT).show();
        }

    }

    @Override
    protected void onDraw(Canvas canvas) {
        System.out.println("ON DRAW IS CALLED");
        if (myBitmap != null) {

            canvas.drawBitmap(myBitmap, 0, 0, null);

            Paint myPaint = new Paint();
            myPaint.setColor(Color.GREEN);
            myPaint.setStyle(Paint.Style.STROKE);
            myPaint.setStrokeWidth(3);

            for (int i = 0; i < numberOfFaceDetected; i++) {
                Face face = myFace[i];
                PointF myMidPoint = new PointF();
                face.getMidPoint(myMidPoint);
                myEyesDistance = face.eyesDistance();
                canvas.drawRect((int) (myMidPoint.x - myEyesDistance), (int) (myMidPoint.y - myEyesDistance),
                        (int) (myMidPoint.x + myEyesDistance), (int) (myMidPoint.y + myEyesDistance), myPaint);

            }

        }
    }
} 
```

}

# visual-studio-2010 - 在 VisualStudio 中召回的旧解决方案

> ID：12542629
> 
> 赞同：0
> 
> 时间：2012-09-22T09:35:47.540
> 
> 标签：visual-studio-2010, visual-studio

我有一个奇怪的场景，我无法弄清楚，并希望提供任何建议。

我正在运行 VisualStudio 2010 专业版。

我有一个包含 6 个项目的 Web 应用程序解决方案。

有一次，我从许多备份解决方案中打开了一些文件，以查看一些历史代码。我查看了它们并关闭了文件。我在当前项目打开的情况下做到了这一点。

我可能已经在打开它们的情况下重建了解决方案，但我不确定。

我最近做了一个“查找”，搜索了整个解决方案，并注意到备份中的文件被引用为解决方案的一部分。

如何删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:13:04.010

我找到了答案。

解决方案是发布网站而不是构建网站。

# javascript - 如何使用phonegap将数组值加载到iphone应用程序的tableview中

> ID：12542630
> 
> 赞同：1
> 
> 时间：2012-09-22T09:36:02.980
> 
> 标签：javascript, html, cordova

我是phonegap的新手。现在我在我的 Lion mac 中使用 phonegap2.0。我的 xcode 版本是 4.3。现在我使用 html 为 iphone 应用程序创建了 Tableview。我使用 JavaScript 创建了包含一些值的数组。请参阅下面的链接：在下面的链接中，我附上了我的 html 文件和我的 Javascript 文件。

```
"http://pastie.org/4779045" 
```

现在我想在 tableview 中加载数组值。请一些人帮我加载完成这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:40:31.997

这是一个示例代码

HTML部分：

```
<!--HTML code -->
<ul data-role="listview" data-inset="true" id="lstMyList">
</ul> 
```

Javascript

```
/*javascript code*/
var i;
var names= new Array();
names[0] = "Gopi";
names[1] = "Vinoth";
names[2] = "Yuvaraj";

for (i=0;i<names.length;i++){
    $('#lstMyList').append('<li><a href="#">'+names[i]+'</a></li>');//append list items to the list view dynamically 
}
//If you add items to a listview, you'll need to call the refresh() method on it to update the styles and create any nested lists that are added.
$('#lstMyList').listview("refresh"); 
```

希望它对你很清楚。

# iphone - 利用 1136x640 iPhone 5 屏幕上的额外像素？

> ID：12542637
> 
> 赞同：0
> 
> 时间：2012-09-22T09:37:20.477
> 
> 标签：iphone, screen, screen-size, iphone-5

没有 1136 启动图像，应用程序现在在信箱模式下运行，两端都有黑条。

如果您添加 Default-568h@2x.png 启动图像，则应用程序以 1136 像素运行（在我的情况下，在横向模式下 - 1136x640）。

在横向模式下，额外的 176 个像素都被添加到屏幕的右侧。

有没有一种方法可以让我在 Interface Builder 中使用的屏幕左侧 88 和右侧分布 88 个添加的 176 个像素？

解释：如果我在 Interface Builder 中将 1136x640 图像（为了使它工作，它实际上是一个 568x320 图像，在项目中具有 @2x 版本）在 0,0 并在 iPhone 5/模拟器上运行它，屏幕显示整个图像，即使它在 Interface Builder 中并不完全可见，因为它离开了屏幕的右侧。

我希望将 1136x640 图像放置在 -88,0，因为它只是我的应用程序的背景图像。如果可能的话，我可以将所有菜单按钮保留在其当前位置，并且能够将我的应用程序的背景扩展到任一端，而不是在信箱模式下用黑条填充该区域。

如果这是可能的，我很想听听……否则我最好重新定位我所有的按钮和其他屏幕元素！我最近阅读了有关 AutoLayout 的文章，这肯定是在任何新应用程序中强烈考虑的事情，但我只是希望快速更新我现有的应用程序，这些应用程序将使用我提供的额外背景艺术而不是黑色来对应用程序进行信箱化两端的酒吧。

**编辑：**只是试图在屏幕上移动按钮，似乎放置在最右边 176 像素的按钮甚至无法点击！所以即使我重新定位所有东西，我也不能使用右边的额外空间...... =/

**然后：**我尝试了 AutoLayout，它也忽略了右侧的 176 像素。如果我放置了一个距离屏幕右侧 20 像素约束的按钮，它将显示右侧 196 像素，因为它没有考虑已添加的额外屏幕尺寸。

有谁知道真正让艺术充满新 iPhone 5 的整个屏幕的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:57:02.420

我遇到了同样的问题，即无法访问新 iPhone 的新 176 像素。但是，这就是我所做的，现在我可以访问它们。

使用 Interface Builder 打开 MainWindow.xib 在 Attributes 中选择 Window，选中 Visible at Launch 和 Full Screen at Launch。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:59:04.030

如果您没有在任何元素上设置自动调整大小，然后启用对 4 英寸显示屏的支持，那么实际上您可能没有最好的视图。

您可以使用自动调整大小来将视图/元素设置为拉伸、居中和对齐，因此您应该能够操纵调整大小的蒙版来做您想做的事情。

如果您只想支持新的屏幕尺寸，自动布局非常繁琐，并且在大多数情况下过度杀伤力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T07:20:28.013

最终为 iPhone 5 尺寸创建了一个 .xib，为 iPhone 4 尺寸创建了一个 .xib。两者都连接到同一个 .h/.m 文件。

# javascript - 如何将 readOnly 属性设置为 html textarea 中的选定文本

> ID：12542638
> 
> 赞同：2
> 
> 时间：2012-09-22T09:37:21.167
> 
> 标签：javascript, jquery, html, tinymce

> **可能重复：**
> [有没有办法使文本区域部分可编辑？（仅使部分文本可编辑）](https://stackoverflow.com/questions/5444874/is-there-a-way-to-make-a-text-area-partially-editable-make-only-portions-of-th)

关于如何将 readOnly 属性设置为 html textarea 中选定文本的任何建议。这是textarea中选定文本的图像..

![在此处输入图像描述](../Images/88234e1507e024a44399e7c1b58aecdf.png)

任何指导和帮助表示赞赏..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:47:19.893

据我了解您想要什么，[这](http://jsfiddle.net/WSrww/3/)是一个可行的解决方案。

这是代码：

```
$("#my-text").select(function() {
    $(this).readonly = true;
});
$("#my-text").mouseup(function() {
    $(this).readonly = false;
});
$("#my-text").keydown(function() {
    $(this).readonly = false;
}); 
```

基本上我正在利用`select`事件来制作 textarea `readonly`。并且，删除`read only`和使用.`click``keydown``removeAttr`

感谢@Bergi 指向`readonly`jQuery 对象的属性。

# javascript - 在 TinyMCE 中设置默认字体大小失败

> ID：12542646
> 
> 赞同：1
> 
> 时间：2012-09-22T09:38:53.453
> 
> 标签：javascript, jquery, html, tinymce

我正在使用 TinyMCE，我想将默认字体大小设置为 12。

在这里，我为活动的 TinyMCE 编辑器分配了一个变量，但它不起作用......

**HTML 内容：**

```
<textarea id="text_message"></textarea> 
```

**JavaScript：**

```
$("#text_message").tinymce({        
    // Location of TinyMCE script
    script_url: '/static/app/a/scripts/tinymce/jscripts/tiny_mce/tiny_mce.js'
});

var fontSize = 12;
tinyMCE.activeEditor.formatter.apply('fontSize', 
{
    value: fontSize
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:31:22.950

您应该等待几个不同的事件阶段：

1.  页面在某种状态下准备就绪。（`tinyMCE.init()`也可以使用，视情况而定。）
2.  编辑器已经初始化，可以开始使用了。

第一个可以使用以下任一方式完成：

```
$(document).ready() 
```

或者：

```
$(window).load() 
```

两者都处理与页面就绪相关的事件。`$.ready()`在 DOM 可用时`$.load()`触发`window`，在页面内容已加载时触发（例如 inline `img`、`script`和`link`sources ）。`.ready()`稍微先于另一个触发，但在许多情况下，任何一个都可以工作。

^(请注意，下面我有`jQuery(function($){...});`一个快捷方式，可以帮助管理与全局`$(document).ready();`使用的其他框架的冲突。`$`)

在第二阶段，您需要为您的编辑器创建请求添加一个[初始化事件处理程序](http://www.tinymce.com/wiki.php/Configuration%3ainit_instance_callback)，例如：

```
$.tinymce({ init_instance_callback: function(){ ... } }); 
```

在全：

```
$tiny.tinymce({
    // ... other stuff here, comma-delineated
    init_instance_callback: function(){
        ac = tinyMCE.activeEditor;

        ac.dom.setStyle(ac.getBody(), 'fontSize', fontSize);
    }
    // ... other stuff here, comma-delineated
}); 
```

您可以在此处设置*显示*值`font-size`（使用 的 Javascript 属性`fontSize`，因为 Javascript 不允许`-`在诸如 之类的标签中使用`font-size`）。这将等待您添加的编辑器进行初始化并说“嘿，我现在在这里”。一旦您收到发泄触发的通知，您可以将编辑器`body`（`ac.getBody()`返回的内容）设置为`font-size: 18px`.

这意味着`font-size`一旦您选择保存编辑器内容就不会返回；在大多数情况下（除非您选择[初始化选项](http://www.tinymce.com/tryit/full_page.php)） ，它在编辑器“body”（字面意思是`iframe`'s元素）中位于其上方。所以这是一个“默认”，但没有在内容本身中明确设置。`body`[`plugins : "fullpage"`](http://www.tinymce.com/tryit/full_page.php)

如果您安装了带有 Firebug 插件的 Chrome 或 Firefox，请观看`console`此小提琴：

[http://jsfiddle.net/userdude/9PuUx/1/](http://jsfiddle.net/userdude/9PuUx/1/)

这是工作代码演示和指向小提琴演示的链接（我`18px`用来轻松查看更改）：

```
jQuery(function a($){
    var $tiny = $("#text_message"),
        fontSize = '18px',
        ac;

    $tiny.tinymce({
        mode : "textareas",
        theme : "advanced",
        theme_advanced_buttons1 : "fontsizeselect,bold,underline,italic",
        init_instance_callback: function(){
            ac = tinyMCE.activeEditor;

            ac.dom.setStyle(ac.getBody(), 'fontSize', fontSize);
        }
    });
});​ 
```

[http://jsfiddle.net/userdude/9PuUx/](http://jsfiddle.net/userdude/9PuUx/)

tinyMCE 文档和 API 可能有点混乱和缺乏，而且我也不是使用它的专家，所以我知道可能有四五种其他方法来解释正在发生的事情以及如何做到这一点。你的旅费可能会改变。如果您对我这样做的方式有疑问，或者它似乎没有达到您想要或期望的效果，请发表评论并告诉我。

# svn - 在分支中保留额外的文件（待办事项列表、打包）

> ID：12542647
> 
> 赞同：2
> 
> 时间：2012-09-22T09:38:56.990
> 
> 标签：svn, branch

我一直在寻找一种简单的方法来将一些待办事项和注释与我的个人项目一起保留在版本控制中，并且在此过程中我到处都遇到了ditz和错误。Ditz 自述文件提到有 3 种不同的方式来维护文件，其中一种是：

> 将问题数据库保留在存储库中，但在单独的分支中。问题更改可以由您的 VCS 管理，但不直接与代码提交相关联。

这使我认为我可以使用相同的东西将一些用于打包的文件保存在与其他一些开发人员共享的存储库中，我现在将这些文件分开。所以我有几个问题：

1.  为什么我应该使用/不使用这种方法？
2.  这个设置如何？不是专门针对 Ditz，而是针对任何文件。
3.  它是如何每天工作的？

我几乎没有使用分支的经验，而且在我所见的任何地方，它都被用来保存经过编辑的主干副本，稍后将被合并。我主要使用颠覆，但 dvcs 的答案也可以，只要它可以翻译。

**更新**

我对此进行了更多研究，这就是我发现的。以下适用于颠覆。

从svnbook，

> Subversion 没有分支的内部概念——只有副本

这可能意味着 svn 分支并不完全符合 ditz 自述文件中的建议。在我看来，ditz 的建议可以使用`svn:externals`. 假设以下结构：

```
/trunk/project1/
/trunk/project2/
/branches/notes/ 
```

可以将`svn:externals`project1 和 project2 中的属性设置为：

```
notes http://reposerver/branches/notes 
```

通过这种方式更新项目的工作副本也将获得“外部”注释，但提交需要单独针对 projectX 树中的注释和其他文件进行。除此之外，一切都和往常一样。缺点或多或少是 svn:externals 的缺点，即仅适用于目录并且它们被定义为绝对 URL。

不过，如果有人有任何进一步的见解，我会很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:16:33.117

由于有很多开源和专有跟踪器可用，我非常怀疑使用您提出的解决方案是否明智。例如，[Trac](http://trac.edgewall.org)与您的源代码控制集成（显示提交，允许在特殊提交消息中关闭工单（或 TODO 项，如果您愿意的话）等）。基于文本文件的 TODO 列表不是那么灵活。您还应该考虑您确实需要将您的任务放在普通任务跟踪器以外的文件中。也许你没有关注本质问题？

# c# - 如何使用许多连接字符串到 SQL 数据库配置 app.config？

> ID：12542651
> 
> 赞同：-1
> 
> 时间：2012-09-22T09:39:30.210
> 
> 标签：c#, sql, database

我有一个应用程序应该连接到不同服务器上的许多数据库。最好的编码方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:46:27.507

通过在 ConnectionStrings 标记内使用具有不同名称的多个添加标记，您可以在 app.config 中提供多个连接字符串。

```
<connectionStrings>
    <add name="name1" connectionString="Your connection1"  providerName="DataBaseProvider1" />
    <add name="name2" connectionString="Your connection2" providerName="DataBaseProvider2"  />
</connectionStrings> 
```

要读取连接字符串，请使用，

```
 string connection1 = System.Configuration.ConfigurationManager.ConnectionStrings["name1"].ConnectionString 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T09:47:51.263

您可以根据需要添加任意数量的连接字符串，如下所示：

```
<configuration>
  <connectionStrings>
    <add name="Name1" connectionString="ConnectionString1" providerName="DataBaseProvider" />
    <add name="Name2" connectionString="ConnectionString2" providerName="DataBaseProvider" />
    <add name="Name3" connectionString="ConnectionString3" providerName="DataBaseProvider" />
    <add name="Name4" connectionString="ConnectionString4" providerName="DataBaseProvider" />
    ....  
  </connectionStrings>
</configuration> 
```

有关 DataBaseProvider 的更多信息，您可以访问以下链接：
[.NET Framework Data Providers at msdn](http://msdn.microsoft.com/en-us/library/a6cd7c08.aspx)
[ADO.NET Data Providers](http://msdn.microsoft.com/en-us/data/dd363565.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:43:50.517

您可以添加多个设置：

```
<add key="server1_db1" value="here give connection string"> 
```

然后像这样查询它们：

```
var connectionString = ConfigurationManager.AppSettings[
    System.Environment.MachineName + "_db1"]; 
```

这样您就可以为不同的服务器设置不同的设置。

# c# - XNA - 没有任何明显模式的 2D 碰撞失败

> ID：12542656
> 
> 赞同：0
> 
> 时间：2012-09-22T09:40:38.147
> 
> 标签：c#, xna, collision

好的，所以我对 XNA 编程很陌生，我正在尝试编写一个平台游戏。我已经实现了像素完美的碰撞，但有时似乎没有明显的原因失败（我无法弄清楚模式）并且英雄精灵穿过平台。

```
static bool IntersectsPixel(Rectangle rect1, Color[] data1, Rectangle rect2, Color[] data2)
    {
        int top = Math.Max (rect1.Top, rect2.Top);
        int bottom = Math.Min(rect1.Bottom, rect2.Bottom);
        int left = Math.Max (rect1.Left,rect2.Left);
        int right = Math.Min(rect1.Right,rect2.Right);

        //Top
        for(int y = top; y<bottom;y++)
            for (int x = left; x < right; x++)
            {
                Color color1 = data1[x-rect1.Left + (y-rect1.Top) * rect1.Width];

                Color color2 = data2[x - rect2.Left + (y - rect2.Top) * rect2.Width];

                if (color1.A != 0 && color2.A != 0)
                    return true;
            }

        return false;
    } 
```

这是更新方法

```
 protected override void Update(GameTime gameTime)
    {

        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

       foreach(Platform platform in platformList)
       {
           Rectangle check = new Rectangle(hero.GetRectangle().X - 300, hero.GetRectangle().Y - 300, 600, 600);
            if(check.Intersects(platform.rectangle))
           if (IntersectsPixel(hero.GetRectangle(), hero.textureData, platform.rectangle, platform.platformTextureData))
           {
               int direction = CheckDirection(platform,hero);
               if (hero.hasJumped == true && direction == 3 && hero.velocity.Y <= 0 )
                   {
                         hero.velocity.Y = 0f;
                         hero.SetPosition(new Vector2((float)hero.GetPosition().X, (float)platform.rectangle.Bottom));

                       break;
                   }
               else
               if (direction == 4 && hero.velocity.X >= 0)
               {
                   hero.velocity.X = 1;
                   hero.SetPosition(new Vector2((float)platform.rectangle.Left - (float)hero.GetRectangle().Width, (float)hero.GetPosition().Y));
                   break;
               }
               else
                   if (direction == 2 && hero.velocity.X <= 0)
                   {
                       hero.velocity.X = -1;

                       hero.SetPosition(new Vector2((float)platform.rectangle.Right - 1, (float)hero.GetPosition().Y));
                       break;
                   }
                   else

               if (direction == 1 && hero.velocity.Y >= 0)
               {
                   hero.velocity.Y = 0;
                   hero.hasJumped = false;
                   hero.SetPosition(new Vector2((float)hero.GetRectangle().X, (float)platform.rectangle.Y - (float)hero.GetRectangle().Height + 1));
                   hero.SetRectangle(new Rectangle((int)hero.GetPosition().X, (int)hero.GetPosition().Y, (int)hero.GetSize().X, (int)hero.GetSize().Y));
                   break;
               }

               }

           }

        hero.Update(gameTime);
        camera.Update(gameTime, hero, screenBounds);
        base.Update(gameTime);
    } 
```

这是方向检查：

```
 private int CheckDirection(Platform platform,Hero hero)
    {
        int distance = Math.Abs(platform.rectangle.Top - hero.GetRectangle().Bottom);
        int direction = 1; //Top
        if (distance > Math.Abs(platform.rectangle.Right - hero.GetRectangle().Left))
        {
            distance = Math.Abs(platform.rectangle.Right - hero.GetRectangle().Left);
            direction = 2;
        }
        if (distance > Math.Abs(platform.rectangle.Bottom - hero.GetRectangle().Top))
        {
            distance = Math.Abs(platform.rectangle.Bottom - hero.GetRectangle().Top);
            direction = 3;
        }
        if (distance > Math.Abs(platform.rectangle.Left - hero.GetRectangle().Right))
        {
            direction = 4;
            distance = Math.Abs(platform.rectangle.Left - hero.GetRectangle().Right);
        }
        return direction;
    } 
```

这些都是我与碰撞检测相关的所有功能。如果您碰巧对可能导致此问题的原因有任何想法，请告诉我。

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:16:12.147

我看到的一件事可能是一个可能的原因，那就是一开始你在两个对象周围构建了一个盒子：

```
 int top = Math.Max (rect1.Top, rect2.Top);
    int bottom = Math.Min(rect1.Bottom, rect2.Bottom);
    int left = Math.Max (rect1.Left,rect2.Left);
    int right = Math.Min(rect1.Right,rect2.Right); 
```

除非您翻转它，否则 XNA 的 Y 通常会随着您下降（而不是上升）而增长。这意味着您实际上想要取底部的最大值和顶部的最小值，因为顶部总是小于底部。看起来你已经知道了，尽管从这一行来看：

```
 for(int y = top; y<bottom;y++) 
```

我会继续寻找（没有实际项目很难测试）。我给你的另一个建议是做一些调试绘图。在交叉函数认为像素接触或不接触的地方绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:50:51.277

由于滞后，您的角色每帧移动的距离可能超过块高度，因此碰撞可能会认为它位于块之间，并导致它飞过。

[https://gamedev.stackexchange.com/questions/30458/platformer-starter-kit-collision-issues](https://gamedev.stackexchange.com/questions/30458/platformer-starter-kit-collision-issues)

检查一下，它为我解决了问题。

减慢移动速度，或者将位置变化限制为块的大小应该可以解决这个问题。

# asp.net-mvc-4 - 数据注释 - asp.net mvc 4

> ID：12542658
> 
> 赞同：0
> 
> 时间：2012-09-22T09:40:42.653
> 
> 标签：asp.net-mvc-4

我是 MVC 的新手。我制作了一个模型**LoginModel**

```
{
    [Required (ErrorMessage="Username is required field.")]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required (ErrorMessage="Password is required field.")]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }
} 
```

并为它设计一个**id = "CustomLogin"**的表单，它的**action="User/Validate"** 和**Validate**操作返回**JsonResult**

在**web.config 中，**

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

在我的**_Layout.cshtml 中，**

```
@Scripts.Render("~/bundles/jqueryval") 
```

现在，如果我直接单击**表单 (CustomLogin)**的“提交”按钮，那么它会阻止我跳转**用户/验证**，这是正确的..

但是在外部 Javascript 中说**mycode.js**，我也写过

```
 $(document).ready(
     function()
     {
          $('#CustomLogin').submit(
            function(e)
            {
               alert ('i executed.');
               //suppose, here i wrote JSON call, it will also be executed
            });
     }); 
```

它也被执行。所以可以吗..??

我的想法是，如果我**点击提交按钮，而不传递任何值，**

不显眼的 javascript 可防止对我的发布请求“用户/验证”进行跳转控制，

> 那么它也应该阻止我的**提交**事件。为了解决这个问题，我 在提交事件处理程序中使用**了 $("form").valid() 。**

像这样，

```
 if ( $("#CustomLogin").valid() ) 
  {
       alert('I executed.');
  } 
```

我认为 Unobtrusive javascript 使表单状态：无效或有效......

**> 但是，我的问题是如果我需要使用 $("form").valid()，那么是什么

> 使用 Unobtrusive javascript 进行验证...???? **

这可以吗..或者我做错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:25:06.227

因为您的模型无效，并不一定意味着您不想与服务器通信。这只是意味着您不想提交该模型。

# android - 使用 XML Drawable 创建列表框背景

> ID：12542667
> 
> 赞同：0
> 
> 时间：2012-09-22T09:41:32.047
> 
> 标签：android, xml, android-layout, drawable, android-xml

我正在尝试创建一个复杂的 xml drawable 来表示一个列表框，并将其设置为 TextView 的背景。

接下来是我想要获得的内容以及我获得的内容的屏幕截图。

![列表框截图](../Images/eb602d423f589067e7d15823697c2b22.png)

如您所见，我想将箭头放在右侧的渐变灰色框中。

查看 android 文档，似乎 xml 形状支持 size 标签，如此处所述[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)，但我无法让它工作！

这是我的 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

  <item>
    <shape android:shape="rectangle">
      <stroke android:width="1dp" android:color="#999999" />
      <corners android:radius="5dp" />
      <solid android:color="#ffffff" />
    </shape>
  </item>

  <item>
      <shape android:shape="rectangle">
        <stroke android:width="1dp" android:color="#999999" />
        <corners android:topRightRadius="5dp" android:bottomRightRadius="5dp" />
        <gradient android:startColor="#606060" android:endColor="#303030" android:angle="270" />
        <padding android:top="7dp" android:bottom="7dp" android:right="7dp" />
      </shape>
  </item>

  <item>
    <bitmap android:src="@drawable/listbox_arrow_icon" android:gravity="right|fill_vertical" android:tileMode="disabled" />
  </item>

</layer-list> 
```

我尝试在形状标签中指定 android:width ，如此处指定的[http://developer.android.com/reference/android/graphics/drawable/ShapeDrawable.html#attr_android:width](http://developer.android.com/reference/android/graphics/drawable/ShapeDrawable.html#attr_android:width)，但它也不起作用。

我不想使用代码来做，但如果它是不可避免的，最后，我想我会构建一个组件来代替 TextView 用于这些东西。

谢谢你的帮助！

@EDIT 抱歉，在复制和粘贴期间，我删除了第一个形状的实心标签！固定的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:10:45.490

尝试这个 ：

```
 <item><shape>
        <solid android:color="#fff" />

        <stroke android:width="1px" android:color="#10000000" />

        <corners android:radius="6dp" />

        <gradient android:angle="270" android:endColor="#10000000" android:startColor="#10FFFFFF" />
    </shape></item> 
```

# bash - 如何通过 bash 安装脚本将 pip 安装到 virtualenv 中？

> ID：12542670
> 
> 赞同：1
> 
> 时间：2012-09-22T09:41:56.897
> 
> 标签：bash, ubuntu, virtualenv, pip, virtualenvwrapper

我最近尝试使用 bash 脚本自动设置 Ubuntu VM（我是 bash 脚本的新手）。

问题是我设置它的方式，它不起作用。特别是 mkvirtualenv 和 workon 命令在 bash 脚本中不起作用。如何在 bash 脚本中创建一个 virtualenv 并传递一个变量，然后通过 pip 安装到 virtualenv 中？

```
#!/bin/bash
VENV_NAME='name_of_virtualenv'

#Setting up virtualenv
mkdir --mode=770 /var/virtualenvs
chown -R www-data:www-edit /var/virtualenvs
chmod 771 /var/virtualenvs
echo '# virtualenv and virtualwrapper' >> ~/.bashrc
echo '  export VIRTUALENV_USE_DISTRIBUTE=1'  >> ~/.bashrc # <-- Always use pip/distribute
echo '  export WORKON_HOME=/var/virtualenvs'  >> ~/.bashrc
echo '  source /usr/local/bin/virtualenvwrapper.sh'  >> ~/.bashrc
echo '  export PIP_VIRTUALENV_BASE=$WORKON_HOME'  >> ~/.bashrc
echo '  export PIP_RESPECT_VIRTUALENV=true'  >> ~/.bashrc
source ~/.bashrc

mkvirtualenv --distribute '{VENV_NAME}'
workon {VENV_NAME}

pip install psycopg2
pip install --upgrade PIL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:06:36.480

您在通话前丢失了美元，也没有看到 VENV_NAME 的导出

```
export VIRTUALENV_USE_DISTRIBUTE=1
echo {VIRTUALENV_USE_DISTRIBUTE}
{VIRTUALENV_USE_DISTRIBUTE}

echo ${VIRTUALENV_USE_DISTRIBUTE}
1 
```

不确定为什么需要导出到 bashrc 并且每次运行时从外观上看，它会将相同的导出添加到 bashrc 中，最终每次都会生成一个越来越大的 bashrc 文件

为什么不让它们像局部变量一样

```
VIRTUALENV_USE_DISTRIBUTE=1

workon $VIRTUALENV_USE_DISTRIBUTE 
```

# java - Java 多种声音

> ID：12542674
> 
> 赞同：5
> 
> 时间：2012-09-22T09:42:23.687
> 
> 标签：java, audio

我正在开发Java RPG。现在我想在需要时播放背景音乐和其他声音。例如开门的声音。如何始终播放背景音乐，有时播放声音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:46:56.353

OpenAL 可能是您正在寻找的。绑定由多个项目提供，例如：[JOAL](https://jogamp.org/joal/www/)和[轻量级 Java 游戏库](http://lwjgl.org/)。

# python - xvfb 无法在 ubuntu 中启动

> ID：12542675
> 
> 赞同：4
> 
> 时间：2012-09-22T09:42:29.240
> 
> 标签：python, qt, ubuntu, webkit, xvfb

我试图通过使用以下两个工具（可能与 qt、webkit 等相关的东西）来获取屏幕截图

*   [https://github.com/adamn/python-webkit2png](https://github.com/adamn/python-webkit2png)
*   [http://cutycapt.sourceforge.net/](http://cutycapt.sourceforge.net/)

当按照他们的指南使用 xvfb-run 在服务器上运行它时，我收到错误：Xvfb failed to start

然后我搜索了情况并在这里找到了类似的问题

[xvfb 在 ubuntu 11.04 中运行错误](https://stackoverflow.com/questions/8805032/xvfb-run-error-in-ubuntu-11-04)

然后尝试添加

```
--auto-servernum --server-num=1 
```

现在整个命令是：

```
xvfb-run --auto-servernum --server-num=1 -server-args="-screen 0, 640*480*24" python webkit2png.py --url=http://google.com --out=test.png 
```

但出现另一个错误：/usr/bin/xvfb-run: 187: kill: No such process

如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T06:02:37.853

当我删除“-server-args”时它可以工作。尝试这样做。

```
xvfb-run --auto-servernum --server-num=1 python webkit2png.py --url=http://google.com --out=test.png 
```

这是您要查找的命令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-22T15:19:33.023

`server-args`选项是错误的，在你的情况下它应该是：

> --server-args="-screen 0, 640x480x24"

# data-structures - 哈希表设计以在恒定时间内实现 nextElement()

> ID：12542676
> 
> 赞同：2
> 
> 时间：2012-09-22T09:42:33.280
> 
> 标签：data-structures

有人问我如何设计一个允许我在恒定时间内实现 nextElement() 的哈希表。

我的回答是，为了避免检查那些为空的桶，我们可以将添加到哈希中的元素添加到双链表中。

如果我们被要求遍历哈希表的元素，我们只需要从头到尾遍历列表。当从散列中删除一个元素时，从列表中删除也是在恒定时间内完成的。

当然，这需要额外的空间用于列表和指向下一个/上一个的指针。

这种方法可以吗？更好的选择？

谢谢你。

**编辑：** 我更改了标题以使其更准确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:51:40.377

我不明白这个问题。
遍历所有元素当然是一种`O(N)`操作，不能在恒定时间内完成。
使用您的列表，您说您只是保存了一系列`table[i]==null`操作，这些操作并没有真正增加循环的任何开销。

# jquery - 使用 jQuery 在页面之间转换时，我必须刷新才能应用 CSS 属性

> ID：12542677
> 
> 赞同：0
> 
> 时间：2012-09-22T09:42:53.043
> 
> 标签：jquery, css

早些时候我遇到了 jQuery 的问题，似乎我有同样的问题，只是这次是 CSS 而不是 JavaScript：[为什么我必须刷新我的页面才能使 javascript 函数工作？](https://stackoverflow.com/questions/12539974/why-do-i-have-to-refresh-my-page-for-a-javascript-function-to-work-)

从一个页面转换到另一个页面时，不会应用目标页面上的自定义 css 属性。我必须刷新页面才能应用它们。

我尝试绑定，`pageinit`但它不起作用。

我该怎么做才能停止这种胡说八道，所以我不会第三次回到这里。?

我对此感到厌倦，它让我放慢了速度。

谢谢。

编辑：

我`rel="external"`在原始页面中使用它并且它有效。你能解释一下为什么：

```
<a href="page2.php?c=x" rel="external">Page2</a>` 
```

**session.header.php**（模板文件）

```
<!DOCTYPE html> 
<html> 
<head> 
<title>{$TITLE}</title> 
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<link rel="stylesheet"  href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" media="all" />
<!-- Custom css -->
<link rel="stylesheet" href="jquery.mobile.custom/jqm-icon-pack-2.1.2-fa.css" media="all" />
<!-- Javascript includes -->
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<script src="events.js" type="text/javascript"></script>
<style>
#td-menu
{
padding-left:75px;  
}
</style>
</head> 
<body> 
<div data-role="page" id="page1" style="background-color:#FFF">
<div align="center"><img src="images/logo.png" alt="logo" width="230" height="123" /></div>
<div data-role="header" data-position="inline">
<div data-role="navbar">
<ul>
<li><a href="index.php" data-role="button" data-ajax="false" data-theme="b">Home</a></li>
</ul>
</div>
</div> 
```

如果我访问在此模板文件上运行的页面，则不会应用内联 CSS。如果我在地址框中键入 URL 或刷新页面（来自另一个页面之后），它会应用 CSS。

但就目前而言，它似乎适用于`rel="external"`，我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:49:57.563

您是否使用相同的文件名？如果是这样，它可能已被缓存，因此不会刷新。

您可以通过在 url 中添加一些无用的变量来“欺骗”浏览器：

```
<link rel="stylesheet" href="/screen.css?v=001"> 
```

然后在第 2 页上，您将**?v=001**更改为**?v=002**等。您还可以使其随机（使用 php）强制浏览器从不缓存它：

```
<link rel="stylesheet" href="/screen.css?v=<?=rand(0,1000);?>"> 
```

但是会增加加载时间。

如果不是这种情况，请发布您的代码;-)

# html - 可以从不同站点复制css吗？

> ID：12542678
> 
> 赞同：0
> 
> 时间：2012-09-22T09:42:56.697
> 
> 标签：html, css

可以从不同站点复制css吗？

我的意思是说我从一个站点复制了导航菜单 css，从另一个站点复制了侧边栏 css，从另一个站点复制了按钮 css，从另一个站点复制了页脚等等......

我会因为这种复制而陷入法律纠纷吗？

更新：我认为如果我向您展示设计本身会更有意义:)

![在此处输入图像描述](../Images/4643b4b8e2ef2c94d3e9c26904d96c30.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:52:13.753

您可以使用网络上允许复制和粘贴的所有内容，但图像、视频和内容除外，因为这可能存在版权问题。

用于复制 CSS、JavaScript、jQuery.... 你可以随意使用它 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T09:52:41.180

如果你还抄袭平面设计 ( `background-image: url(img/bg-border-top.png);`) 肯定是的, 你就有法律问题了。

如果您在没有图像的情况下复制 CSS，您*可能*会遇到问题，IANAL，取决于您所在的国家/地区、您窃取的网站及其各自的国家/地区等。
使用相同的技术是完全可以的（也就是说，CSS 的某些部分如这里的 CSS 精灵，那里的手风琴菜单等）

现在为什么？有数十个 CSS 框架、数百个模板和设计在**GPL**或**Creative Commons-Attribution**等许可下（允许衍生和商业使用），所以你为什么还要冒任何风险复制（*逐字*）他们的作者不想要的 CSS你要复制吗？
只需 39 美元，这个 WordPress 主题在接下来的 24 小时都是你的（完全由`div`耶！</joking>）

# c - C可以包含使用宏吗？

> ID：12542683
> 
> 赞同：-1
> 
> 时间：2012-09-22T09:43:32.703
> 
> 标签：c, include

我想要`include`一个宏扩展的结果。好像`include`只知道<>""？

这失败了：

```
#define audio sinwave

#ifdef audio
#include audio".c"
/*#include "sinwave.c"*/
#endif 
```

但这有效：

```
#ifdef audio
        if(i==0){set_audio((char *)audio);return;}
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:44:55.577

你可以这样做：

```
#define audio audio

#define FF(X) #X
#define F(X) FF(X.c)

#ifdef audio
#include F(audio)
#endif 
```

也就是说，`.c`在将所有内容放入字符串之前，您必须附加。相邻字符串的通常连接`"audio" ".c" -> "audio.c"`发生在比预处理更晚的编译阶段，因此`#include`指令无法处理此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:47:10.313

不可以。不能像这样使用预处理器指令。您可以使用宏来连接和字符串化名称，但这是另一种情况。如果你需要这个，你很可能应该重新考虑你的设计，因为它目前还不够好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:29:03.590

也许我不清楚......但我看到你在问几个不同的问题......

我认为您询问是否可以包含源文件，是的，您可以，但这不是最好的主意；看到[这里](https://stackoverflow.com/questions/232693/including-one-c-source-file-in-another)很好的讨论为什么。

如果您想知道使用“...”与 <...> 包含文件，区别在于引号是当文件位于本地目录中时（或者您想要包含文件的路径），<> 是当文件在您的搜索路径中时。

如果你想对文件名进行字符串化，那么 Jens Guestedt 的答案就是你想要的......但我质疑这样做背后的逻辑......

为什么不将 .c 文件正常包含在您的项目中（将其添加到您的 makefile 或其他文件中），然后将有问题的代码（或 while 文件）包装在 #ifdef 中？这是有条件地编译代码的更标准的方法。

# php - Magento - 使用表单的问题

> ID：12542686
> 
> 赞同：1
> 
> 时间：2012-09-22T09:43:55.760
> 
> 标签：php, magento, authentication, apache2, magento-1.6

我已经为我的 magentocommerce 设置了一个新服务器。

不幸的是，当我将域移动到新位置（已使用另一个域完成测试）时，一个奇怪的问题开始发生：当登录页面显示在前端或后端时，我（当然还有客户）确实提交了正确的凭据页面刷新，cookie 被设置，但表单再次显示。提供这样的缓存而不是正确的内容（目录）。

实际上唯一的解决方案是删除浏览器上的缓存并重试。

我已经使用 varnish http 加速器两天了，但是由于我在处理它时遇到了太多问题，所以我卸载了它并清理了一些东西（现在只有 apache 实例来服务用户请求）。

我还安装了 APC 缓存和 Fooman Speedster。

**导致此问题的原因是什么？**

你能帮我找到正确的方向来解决这个问题吗？在旧服务器上它没有发生，但从那时起对存储进行了一些修改（无论如何与身份验证无关）。

apache 错误日志不报告任何内容，其中唯一`PHP: syntax error, unexpected BOOL_TRUE in /etc/php5/apache2/conf.d/apc.ini on line 4`与该行有关的内容`apc.enabled = 1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T11:56:32.530

我不知道它是否解决了您的特定表单问题，但我们在 apache 错误日志中遇到了同样的错误。

我们的失败是，我们从[http://magebase.com/magento-tutorials/speeding-up-magento-with-apc-or-memcached/](http://magebase.com/magento-tutorials/speeding-up-magento-with-apc-or-memcached/)复制了 apc.ini 代码。他们使用“#”进行评论。

原来我们不得不使用“;” 征求意见。在这些更改之后，apache 错误日志中不再有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:04:04.050

查看管理面板中的系统 -> 配置 -> Web 选项卡，查看是否为新服务器正确设置了 Cookie 路径和 Cookie 域。您也可以直接在数据库中执行此操作。在这种情况下，搜索带有`web/cookie/cookie_path`和`web/cookie/cookie_domain`路径的行。在管理面板中将它们设置为空值或在数据库中设置为 NULL 也可能会有所帮助。

您还应该清除 Magento 缓存（系统 -> 缓存管理）和 APC 缓存（操作方法如下：[如何清除 APC 缓存条目？](https://stackoverflow.com/questions/911158/how-to-clear-apc-cache-entries)）。

# java - 我可以使 jdbc 4.1 源代码级别与 jdk 1.6 兼容吗？

> ID：12542687
> 
> 赞同：4
> 
> 时间：2012-09-22T09:44:01.967
> 
> 标签：java, jdbc, openjdk

我有扩展 java.sql.Statement、java.sql.Connection 和 java.sql.DataSource 的代码。

我的兼容性目标是 java 1.6，我不想在 jdk 1.7 中使用 JDBC 4.1 引入的特定功能。

但是我系统上默认安装的 jdk 是 Openjdk 7。我想坚持下去，但我仍然想让我的代码以 1.6 为目标。

在 Eclipse 中，我将 1.6 设置为编译目标，但 jdk 坚持我在 java.sql 类中实现新方法……我创建了存根，除了抛出 UnsupportedOperationException 之外什么都不做。所以这是我的问题：

*   有没有用 1.7 sdk 编译 1.6 源代码的解决方案？
*   如果不是，只要我不使用 jdbc 4.1 特性，我选择将新方法“实现”为 UnsupportedOperationException 是否安全？
*   是否有任何实现 jdbc 4.1 的连接池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:02:27.620

JDBC4.0是针对JDK1.6的，你应该使用条件编译来产生一个JDBC4.0兼容的包。

# emacs - JSHint + Flymake - 无限循环错误检查

> ID：12542691
> 
> 赞同：0
> 
> 时间：2012-09-22T09:44:33.120
> 
> 标签：emacs, jshint, flymake

我已经尝试自己解决问题，并且可能会继续，但由于错误报告很差，这太耗时了。所以，也许，如果有人以前遇到过这个问题，请分享。

发生了什么：flymake-jshint 遇到错误后，无论错误是什么，例如可能是缺少分号。它会陷入无限循环。我可以`C-g`循环，但这很烦人，并且会在同一行发生多次，因此绝对不可能写任何东西。

然后，当我查看`*Messages*`缓冲区时，它会显示如下内容：

```
missing ; after statement [NNNN times] 
```

即 Flymake 被要求多次执行检查。计时器间隔设置为 2 秒，但显然过度，因为它会在两秒内进行数百次检查。试图增加`flymake-log-level`显示没有额外的信息。

我已经自定义了这些变量：

```
(flymake-no-changes-timeout 2)
(flymake-start-syntax-check-on-newline nil) 
```

但没有更多的额外定制。

**编辑：**

这似乎与自动完成模式有关。禁用此次要模式“解决”了问题，但现在我收到了数百条“无效的面部参考：nil [NNNN times]”类型的消息。*叹*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:33:37.217

我想，我终于找到了问题所在。这是`highlight-current-line`次要模式。每当 Flymake 检测到错误并需要绘制错误位置时，它都会尝试读取叠加层，但会被高亮创建的叠加层弄糊涂。我还没有开始尝试修复它，但是简单地禁用突出显示使它至少可以工作。

# c# - 资源文件字符串添加

> ID：12542693
> 
> 赞同：0
> 
> 时间：2012-09-22T09:44:37.270
> 
> 标签：c#, resources

我正在开发多语言桌面应用程序。我为它创建了一个资源文件并添加了一些字符串。它工作正常，但现在我想添加更多字符串，当我运行程序时它失败并出现以下异常。

> 找不到适合指定区域性或中性区域性的任何资源。确保“Madrassa.String.resources”在编译时正确嵌入或链接到程序集“TelicMadrassaProject”中，或者所有所需的附属程序集都是可加载且完全签名的。方法：Void HandleResourceStreamMissing(System.String)
> 
> 堆栈跟踪：
> 
> 在 System.Resources.ManifestBasedResourceGroveler.HandleResourceStreamMissing（字符串文件名）

即使资源文件中存在字符串名称，也会引发此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:13:12.313

您可能需要将 LogicalName 元素添加到项目定义中。有关详细信息，请参阅 [使用 MSBuild 构建后运行测试时的 MissingManifestResourceException（.mresource 在清单中有路径）](https://stackoverflow.com/questions/7080737/missingmanifestresourceexception-when-running-tests-after-building-with-msbuild)。

# javascript - 如何将 id 添加到隐藏字段并将其与其他数据一起发送到控制器，以便它们与父模型关联？

> ID：12542695
> 
> 赞同：0
> 
> 时间：2012-09-22T09:44:44.480
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, mongoid3

我有一篇有很多图片的帖子。在一个视图中，我有两个表单，一个带有标准的 post 字段，另一个用于将图片异步发送到pictures_controller，我的 JavaScript 仅接收带有新添加图片的 ID 的回调，尚未与父级关联。如何将 JavaScript 接收到的许多 ID 添加到 post 表单中的隐藏字段，并在 post_controller 循环中发送隐藏字段中的 ID 并将其与 post 模型相关联？我正在尝试执行第 3 步（有趣的部分）：[如何在创建帖子期间使用 JQuery-File-Upload 在一个页面上上传多个图像？](https://stackoverflow.com/questions/12350019/how-to-use-jquery-file-upload-to-upload-multiple-images-on-one-page-during-creat).

帖子视图：

```
= form_for @post do |f|
  .field
    = f.label :title
    = f.text_field :title
  .field
    = f.label :description
    = f.text_area :description
  = f.hidden_field :picture_ids
  .actions
    = f.submit 'Save'
= form_for @picture, :html => { :multipart => true, :id => "fileupload"  } do |f|
  = f.file_field :image, :multiple => true
  %ul.thumbnails.files 
```

JavaScript（我不知道如何正确地将新收到的 id 添加到隐藏字段，开始时它只包含：）`[]`：

```
$('#fileupload').fileupload({
...
  completed: function(e, data) {
    console.log(data.result[0].picture_id); //e.g. pure: 505e1d811e7bf2b815000139, 505d80181e7bf2b8150000ab etc.
    $("#post_picture_ids").val(data.result[0].picture_id);
  });
}); 
```

post_controller：

```
def create
  @post = Post.new(params[:post])
  #@post.picture_ids = params[:post][:picture_ids]
end 
```

邮政：

```
{"utf8"=>"✓",
 "authenticity_token"=>"FZA1rg53Qc21MCkT4YMDdIrkttmiRmdoGhPC7HS8Fx8=",
 "notify"=>{"title"=>"",
 "description"=>"",
 "picture_ids"=>"505e1d811e7bf2b815000139"},
 "commit"=>"Save"} 
```

Mongoid 抛出错误：`undefined method 'compact' for #<Picture:0x007faf2513d810>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:40:42.353

如果你的`post`has_many`pictures`映射，

那么你的创建控制器代码应该是

`@post.picture_ids = params[:post][:picture_ids]`

代替

`@post.picture_ids = (Picture.find(received_post).id)`

# c# - 如何在 C# 中使用 DSASignatureFormatter 来验证签名

> ID：12542697
> 
> 赞同：1
> 
> 时间：2012-09-22T09:44:48.367
> 
> 标签：c#, .net, cryptography

这可能不是一个非常明确的问题，因为我是**加密**算法的新手。请帮我改进它。

这是我遇到的问题。

我有一个密钥对（**DS128**），如下所示：

> 私钥：a8a5ea3b0249e822731133f52d24b29d152a0c05
> 
> public key: 91053fd2f09ec4fbfeb9713245855b7dcd33906a7f7d5bedf28e3f39ce6641e4de956ad81206874f2a8647596bb9004ef8b9021f5a519291e417f6a86064e976f845b59990c1efbd2a13f2dd12221d6bc82f7c39acfbbbd46a1f56a10930162630d76700f1d4b1b501d378986aa0614efafb91c12f1c34939a2f92b6e4248803

更多，我有**JWT**格式的签名：

> eyJhbGciOiJEUzEyOCJ9.eyJleHAiOjEzNDM3MDQxNDQyMDgsImF1ZCI6Imh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnIn0.ozqgmide0XtMKkT2Gp3DcVD3Fr3RaL031O9F_zgMfRB_olekSQTc

我所知道的是算法是**DSA128**，它可以通过解码符号的标题（第一个“。”之前的字符串）来获得。此外，中间部分是签名的数据，最后一部分是符号。

我的问题是，有谁知道如何使用**.net 加密**类***DSASignatureFormatter***来验证上述签名？

主要问题是，我不知道如何使用公钥。***在我可以将它发送到DSASignatureFormatter***提供的验证功能之前，似乎应该对公钥进行一些转换......

# security - 如何安全地将 Backbone.js 应用程序连接到数据库？

> ID：12542698
> 
> 赞同：6
> 
> 时间：2012-09-22T09:44:54.823
> 
> 标签：security, rest, backbone.js, client-side, restful-authentication

我开始计划一个网络应用程序，Backbone.js 将非常适合客户端。我一直在计划使用 node 作为后端，但目前它是开放的。

我需要一种方法来保护前端应用程序与数据库的连接。我[在 Quora 上与其他人进行过讨论，](http://www.quora.com/Backbone-js-1/What-is-the-best-way-to-ensure-my-RESTful-server-only-talks-to-my-BackBone-js-application)但我认为思考过程过于抽象于核心问题。

我更愿意通过 RESTful 端点访问数据，但我需要确保只有我的应用程序可以与 API 对话。我将完全控制应用程序的前端和后端。有可能围绕数据库构建其他应用程序（在一两年内），但是它们将由我开发（即不是公共 API），并且这些应用程序可能会使用单独的 OAuth 端点。

应用程序上的一些注释（可能有用也可能没用）：

*   该应用程序计划以 SaaS 模式提供，公司订阅并允许多个用户。
*   每家公司的数据都必须是安全的，并且只有该公司的成员才能访问。
*   所有流量（前端和应用程序到 API）都将通过 SSL 发送。

任何有关执行此操作的最佳方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:25:45.343

我们的设置与您完全相同 - SaaS 模型、多个应用程序（移动、网络等），当我点击您的链接时，Miguel 拥有我们使用的确切解决方案。

带有时间戳并在身份验证时发送给客户端的令牌。我们将该哈希令牌存储在用户模型中，然后我们验证该令牌的每个后续请求。

您可以使用 BaseModel 扩展 Backbone.Model，通过覆盖 Backbone.Sync 将令牌附加到每个服务器请求

请参阅[此处](https://stackoverflow.com/questions/7567404/backbone-js-repopulate-or-recreate-the-view/7607853)了解他们如何扩展基本视图，您可以将相同的东西应用于基本模型。

# python - 在连接之前为 reactor.connectTCP 设置sockopt

> ID：12542700
> 
> 赞同：0
> 
> 时间：2012-09-22T09:45:13.853
> 
> 标签：python, twisted

我有一个小型 python 客户端，它在 create_socket 之后但在连接之前需要一个 setsockopt。非扭曲的python代码如下。这在扭曲的环境中如何表达？

```
 create_socket (socket.AF_INET, socket.SOCK_STREAM)
    socket.setsockopt(socket.IPPROTO_IP, 24,1)                        
    socket.bind((clientip, 0))                         
    connect ((serverip,serverport)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:11:30.683

在`twisted`您可以使用`reactor.adoptStreamPort`：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
socket.setsockopt(socket.IPPROTO_IP, 24,1) 
s.bind((serverip, serverport))    
s.listen(1)
port = reactor.adoptStreamPort(
       s.fileno(), AF_INET, YourFactory()) 
```

如果您正在构建侦听套接字或连接套接字，我真的不明白您的代码。我假设它是一个监听套接字。更多细节可以在这里找到：http: [//twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IReactorSocket.html](http://twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IReactorSocket.html)

# doctrine-orm - 在ZF2中扩展ZfcUserDoctrineORM的用户实体

> ID：12542701
> 
> 赞同：6
> 
> 时间：2012-09-22T09:45:58.133
> 
> 标签：doctrine-orm, zend-framework2, zfdoctrine

我对ZF2很陌生。我在 ZF1 的项目中有一堆学说实体，其中一个是用户实体。

我正在尝试扩展 \ZfcUserDoctrineORM\Entity\User 以便我可以包含我的旧关系 - 但没有取得很大成功。

如果我尝试运行模式生成器`./doctrine-module orm:schema-tool:create`，我会收到一条错误消息，指出表名用户已经存在。

到目前为止，我已经尝试扩展类并将我的类设置为 UserEntityClass

```
return array(
    'zfcuser' => array(
        'UserEntityClass' => '\Application\Entity\User',
    ),
); 
```

该模块似乎还没有任何文档。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T19:03:12.487

所以问题是默认的 ZfcUserDoctrineORM 实体仍在使用中。要解决此问题，您可以将 EnableDefaultEntities 设置为 false，如下所示：

```
return array(
    'zfcuser' => array(
        'UserEntityClass' => '\Acme\Entity\User',
        'EnableDefaultEntities' => false
    ),
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T22:15:52.740

我从记忆中走出来，因为我曾经玩过 ZfcUser[DoctrineORM] 。

你不想扩展任何东西。相反，只需编写您自己的用户实体并使其实现 ZfcUser\Entity\UserInterface。

然后确保您正确设置了配置（使用您自己的 UserInterface 实现，而不是默认的），您应该一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T07:42:30.163

尽管OP的答案是正确的，但它并不完整。下面我做了什么以及为什么。

创建自己的用户实体。AbstractEntity 是用于我所有实体的一种，仅包含 ID 属性、getter/setter 和一些用于实体调试的全局功能。

**用户.php**

```
use Doctrine\ORM\Mapping as ORM;
use Keet\Mvc\Entity\AbstractEntity;
use ZfcUser\Entity\UserInterface;

/**
 * Entity Class representing a post of our User module.
 *
 * @ORM\Entity
 * @ORM\Table(name="users")
 * @ORM\Entity(repositoryClass="Keet\User\Repository\UserRepository")
 * @ORM\HasLifecycleCallbacks
 */
class User extends AbstractEntity implements UserInterface
{
    /**
     * @var string
     * @ORM\Column(name="username", type="string", length=255, unique=true, nullable=false)
     */
    protected $username;

    /**
     * @var string
     * @ORM\Column(name="email", type="string", length=255, unique=true, nullable=false)
     */
    protected $email;

    /**
     * @var string
     * @ORM\Column(name="display_name", type="string", length=255, nullable=false)
     */
    protected $displayName;

    /**
     * @var string
     * @ORM\Column(name="`password`", type="string", length=255, nullable=false)
     */
    protected $password;

    /**
     * @var int
     * @ORM\Column(name="state", type="integer", length=3, nullable=false)
     */
    protected $state = 1;

    // Getters/Setters
} 
```

**zfcuser.config.php**

[包含与OP 的答案](https://stackoverflow.com/a/12628392/1155833)相同的配置：

```
'zfcuser' => [
    //Some other config
    'userEntityClass' => User::class,
    'EnableDefaultEntities' => false,
], 
```

**模块.config.php**

*重要提示：*覆盖 zfcuser 的默认学说实体配置！

```
'doctrine' => [
    'orm_autoload_annotations' => true,
    'driver' => [
        __NAMESPACE__ . '_driver' => [
            'class' => 'Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver',
            'cache' => 'array',
            'paths' => [
                __DIR__ . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . 'src'
                . DIRECTORY_SEPARATOR . 'Entity',
            ]
        ],
        'orm_default'             => [
            'drivers' => [
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver',
                'ZfcUser\Entity'  => __NAMESPACE__ . '_driver'
            ],
        ],
        'zfcuser_entity' => [ // Section overwrites the default config for location of Annotation. Original found
            // in vendor ZfcUserDoctrineModule /config/xml/zfcuser/ZfcUser.Entity.User.dcm.xml
            'class' => 'Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver',
            'paths' =>
                __DIR__ . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . 'src'
                . DIRECTORY_SEPARATOR . 'Entity',
        ],
    ],
], 
```

在上面你通常只有`'driver'`and '`orm_default'`配置。ZfcUser 模块包含一个`'zfcuser_entity'`配置，但将其指向它自己的模块中的驱动程序。要没有对不同驱动程序的浮动引用，请将其覆盖并将其指向您自己定义的驱动程序，由`__NAMESPACE__ . '_driver'`. 此外，在我的示例中，我使用了`AnnotationDriver`for reading 注释，而 ZfcUser 模块使用了`XmlDriver`. ZfcUser 模块配置如下

*这是原始配置，在上面的示例中被覆盖*

```
'zfcuser_entity' => array(
    'class' => 'Doctrine\ORM\Mapping\Driver\XmlDriver',
    'paths' => __DIR__ . '/xml/zfcuser'
), 
```

* * *

此配置允许您完全使用自己的实体，但仍使用 ZfcUser 模块。

在我的情况下，我可以将我自己的`AbstractActionController`操作与我自己编写的 CRUD 操作一起使用，这需要一个`AbstractEntity`. 这节省了大量的写作/思考；）

# date - 如果上一行为空，则自动填充当前日期

> ID：12542703
> 
> 赞同：0
> 
> 时间：2012-09-22T09:46:48.253
> 
> 标签：date, excel, excel-2007, autofill, vba

我有一个按日期排序的电子表格。每天，我都会在其中输入新数据。每天之后，我会在第二天开始之前留一排空。例子：

```
20.09.12 XXXXX XXXXX XXXXX XXXX
         XXXXX XXXX  XXXXX XX
         XX    XXXXX XX    XXXX

21.09.12 XXX   XXXXX XXX   XXXX
         X     XXXX  XXXX  XXX

22.09.12 XXXX  XX    XXXX  XXXX 
```

所以我希望 excel 总是在我在一个空白行之后输入数据时填写当前日期，但显然日期应该保持不变 - 每当我打开 excel 时都不会更新为当前日期。我正在使用 Excel 2007，虽然首选非 vba 想法，但 vba 也不是问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:18:38.700

插入今天的日期有一个快捷方式：`Ctrl``;`
我认为如果您使用快捷方式，您可能不需要宏。

类似的时间捷径是`Ctrl``Shift``;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:54:38.670

这是使用`Worksheet_Change`工作表事件使用 VBA 执行此操作的一种相当简单（粗略？）的方法。

实际上，每次更改单元格时，它都会检查上面的整行是否为空白，如果是，则将今天的日期放在 A 列中。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If WorksheetFunction.CountA(Rows(Target.Offset(-1, 0).Row)) = 0 Then
        Range("A" & Target.Row) = Format(Now(), "dd.mm.yy")
    End If
End Sub 
```

# eclipse - Eclipse Maven - 在提交到 GitHub 之前自动增加 pom 版本？

> ID：12542707
> 
> 赞同：4
> 
> 时间：2012-09-22T09:47:22.853
> 
> 标签：eclipse, maven, jenkins, pom.xml

我正在寻找解决方案。这是我的设置：

带有所有 maven 项目的本地 Eclipse。当我将它们提交到 GitHub 时，我的 Jenkins 服务器会自动构建项目。（每次推送到 github）

但是，在 Jenkins 服务器上的 Maven 存储库中，我希望能够获得每一个（1.0.1 -> 1.0.2 等）有什么办法可以做到这一点吗？理想情况下是一个 Eclipse 插件，以便它在到达 GitHub 之前更改版本。

如果我使用 maven-version-plugin，它不会在我的本地 eclipse 机器上更新，因此它每次只会使用相同的版本。

任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:04:28.433

我建议使用 maven-release-plugin 正是这样做的事情。这包括两个步骤。第一个 mvn [release:prepare](http://maven.apache.org/plugins/maven-release-plugin/examples/prepare-release.html)和第二个 mvn [release:perform](http://maven.apache.org/plugins/maven-release-plugin/examples/perform-release.html)。

# sql - 没有枢轴运算符的部分枢轴

> ID：12542711
> 
> 赞同：2
> 
> 时间：2012-09-22T09:47:51.983
> 
> 标签：sql, sql-server, pivot

我正在寻找不使用 PIVOT 运算符（旧的 ms-sql 服务器）来部分透视表的查询。桌子：

```
id-------item---------rank1---------rank2
231------it1--------- 1 ----------- 1
231------it2-------- 1 ----------- 2 
231------it3--------- 1 ----------- 3
154------it4--------- 3 ----------- 4
154------it2--------- 1 ----------- 2
155------it2--------- 1 ----------- 2
156------it3 -------- 2 ----------- 2
156------it1 -------- 1 ----------- 1 
```

**预期结果：**

```
id---------item1----item2----item3---item*... 
231 -------it1------it2---------it3 
154--------it2------it4 
155--------it2 
156--------it1------it3 
```

**按**rank1 和 rank2 排序

我在谷歌上搜索，但我发现的解决方案太复杂而无法应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:50:29.973

在 SQL Server 中，您可以使用`row_number`为每个`id`组分配一个行号。然后你可以使用这个`max(case(...`技巧来旋转：

```
select  id
,       max(case when rn = 1 then item end) as item1
,       max(case when rn = 2 then item end) as item2
,       max(case when rn = 3 then item end) as item3
from    (
        select  row_number() over (partition by id
                    order by rank1, rank2) as rn
        ,       *
        from    YourTable
        ) as SubQueryAlias
group by
        id 
```

不使用动态 SQL 就没有 N 个项目的通用解决方案。

# .net - SQLite CE 异常 - 数据库被锁定

> ID：12542713
> 
> 赞同：0
> 
> 时间：2012-09-22T09:48:31.830
> 
> 标签：.net, sqlite, compact-framework, windows-ce

我对以下代码有疑问。该程序似乎有时会卡住（显然没有模式......通常在第二个查询中，因为包含此代码的表单运行但并非总是如此）连续 5-20 秒

Dim rdr As SQLiteDataReader = cmd.ExecuteReader

如果代码在表单启动后没有卡在第二个查询中，它就永远不会卡住。如果我关闭并重新打开表单，我有相同的 50-60% 的机会在第二次查询中出现相同的错误。

然后它总是从这一点重新启动，有时没有错误......只是5-20秒的大延迟，有时在行出现错误“数据库文件已锁定，数据库已锁定”

cmd.ExecuteNonQuery() （2°时间..不在 if 块内）

此错误将禁止用户保存其更改并且有时会损坏数据记录，当然，还会引入我无法接受的巨大延迟:(

知道我做错了什么吗？

我正在使用 Visual Studio 2008 为具有 3.5 框架的 Windows CE 6.0 设备和

ADO.NET 2.0/3.5 SQLite 数据提供程序版本 1.0.66.0 2010 年 4 月 18 日 使用 SQLite 3.6.23.1 [http://sqlite.phxsoftware.com/](http://sqlite.phxsoftware.com/)

谢谢

```
'Update current program on database
Public Sub AggiornaUserOnDatabase(ByVal name As String, ByVal password As String, ByVal permission As String)
    'No spaces
    name = Trim(name)
    'Database var
    Dim ConString As String = "Data Source = " + DatabaseAccountPath + ";"
    Dim con As New SQLiteConnection
    Dim cmd As SQLiteCommand
    'Read from database
    Try
        con.ConnectionString = ConString
        con.Open()
        'Check if row is existing
        cmd = con.CreateCommand
        cmd.CommandText = "SELECT " + DBACCNAME + " FROM " + DatabaseAccountTableName + " WHERE " + DBACCNAME + " = '" + name + "'"
        Dim rdr As SQLiteDataReader = cmd.ExecuteReader
        'If empty...create the record
        If Not rdr.Read Then
            cmd = con.CreateCommand
            cmd.CommandText = "INSERT INTO " + DatabaseAccountTableName + " (" + DBACCNAME + ") VALUES ('" + name + "')"
            cmd.ExecuteNonQuery()
        End If
        rdr.close()
        'Update the values
        cmd = con.CreateCommand
        cmd.CommandText = "UPDATE " + DatabaseAccountTableName + " SET " _
                        + DBACCPASSWORD + " = '" + password + "', " _
                        + DBACCPERMISSION + " = '" + permission + "' " _
                        + "WHERE " + DBACCNAME + " = '" + name + "'"
        cmd.ExecuteNonQuery()
        cmd.Dispose()
        con.Close()
    Catch ex As Exception
        AggiungiRigaSuFile(ErroriPath, "Editing users account database: " + ex.Message, Configurazione.DiagnosticaOff, True)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:46:17.730

当它有一个开放的阅读器时，您正在使用 cmd。您需要在再次使用 cmd 之前关闭阅读器。甚至不要使用阅读器。执行 select count(*) 以查看记录是否存在。

```
cmd.CommandText = "SELECT count(*) FROM " + ...
int rowRet = (Int32)sqlCmd2.ExecuteScalar();

if (rowCount == 0)
{
    // do NOT create the command gain just use it
    cmd.CommandText = "INSERT INTO " + DatabaseAccountTableName ...
    // insert all the values here so the update is not required
    cmd.ExecuteNonQuery();
}
else if (rowCount == 1)
{
    cmd.CommandText = "UPDATE " + DatabaseAccountTableName + " SET " _
                    + DBACCPASSWORD + " = '" + password + "', " _
                    + DBACCPERMISSION + " = '" + permission + "' " _
                    + "WHERE " + DBACCNAME + " = '" + name + "'"
    cmd.ExecuteNonQuery();
}
else 
{
     // throw an error expected 0 or 1
} 
```

# r - R 的 Apache 日志文件格式分析

> ID：12542720
> 
> 赞同：1
> 
> 时间：2012-09-22T09:49:06.587
> 
> 标签：r

我试图通过 R 对博客文件进行分析。我很乐意处理日期和字节，只要存在数字数据但无法处理字符串。

从日志文件（CSV 格式的日志文件）中，我想找出特定用户（在 IP 和代理的帮助下）及其在网页上的总支出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:04:29.520

有许多库可以进行这种分析，尽管我在 R 中找不到任何库。谷歌[在 Perl](http://search.cpan.org/~akira/Apache-ParseLog-1.02/ParseLog.pm)`parse apache logfile`中产生了一个库，并产生了[Scratchy 库](http://scratchy.sourceforge.net/)。两者都依赖[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)来解析文件的内容。`python parse apache logfile`

从这里有两种方法可以处理 apache 日志文件：

*   从 R 调用 perl 或 python，可以使用直接链接，也可以使用系统调用（这更简单）。
*   从 perl 或 python 库中获取想法并使用它来实现 R 版本的函数。这将需要很多时间。

你指的是一个 csv 文件，但我认为上面的库可以使用带有 Apache 日志的原始文本文件，所以我会使用它们，而不是你的 csv 文件。

此外，[这篇 SO 帖子](https://stackoverflow.com/questions/5664997/logfile-analysis-in-r)提到了 @doug ( [profile](https://stackoverflow.com/users/66549/doug) ) 的回答，他说他已经创建了一些函数来创建由 Python 解析的 apache 日志文件数据的可视化。也许你可以给他发消息或邮件，看看他是否愿意分享代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:10:05.030

R 中的日志文件分析是我们之前讨论过的一个有趣的话题，你可以[在这里](https://stackoverflow.com/questions/5664997/logfile-analysis-in-r)找到我们的讨论。也许这个讨论也可以帮助你适应 SO 礼仪以获得更好的反馈（不要拿走你的任何东西，保罗）。

# units-of-measurement - JSR-275 和 Units of Measure API 以外的 Java 度量单位库

> ID：12542727
> 
> 赞同：1
> 
> 时间：2012-09-22T09:50:25.957
> 
> 标签：units-of-measurement, jsr-275

除了 JSR-275（被拒绝和放弃）和 Units of Measure API（似乎没有任何生产质量的实现）之外，是否有任何 Java 库处理度量单位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-07T21:44:43.360

我编写了一个不使用静态排版的[单位](https://github.com/uhoefel/units)库（在我遇到的许多实际应用程序中，我希望这样的库更麻烦）。它旨在处理基于字符串的单位以及更清晰的定义单位。一些支持的功能包括：

*   值的转换，例如：

    ```
    Units.convert(3, "m", "mm");
    Units.convert(3, SiBaseUnit.METER, "mm"); 
    ```

    都会返回`3000`。

*   简化基于字符串的单位，例如：

    ```
    Units.simplify("kg^3 m^4 s^-6 A^-1"); 
    ```

    会回来`"J^2 T"`的。

*   在特定上下文中查找单位的名称，例如：

    ```
    Units.inContext("lx s", UnitContextMatch.COMPATIBLE, PhysicsContext.PHOTOMETRY) 
    ```

    将返回一个包含`("luminous exposure")`.

*   支持[SI 单位](https://www.bipm.org/en/publications/si-brochure/)、二进制单位、[英制单位](https://www.legislation.gov.uk/ukpga/1985/72)、[美国惯用单位](https://en.wikipedia.org/wiki/United_States_customary_units)、[原子单位](https://en.wikipedia.org/wiki/Hartree_atomic_units)、[普朗克单位](https://en.wikipedia.org/wiki/Planck_units)等等。用户还可以轻松定义自己的单位。

*   完全支持任意对数单位，例如

    ```
    LevelUnit.BEL.inReferenceTo(1, Unit.of("mV")); // automatically determines ref type -> root power
    LevelUnit.BEL.inReferenceTo(1, Unit.of("W"), LevelUnitReferenceType.POWER); // specify type explicitly
    Unit.of("ln(re 1 nA)") == LevelUnit.NEPER.inReferenceTo(1, Unit.of("nA")); // true 
    ```

*   支持 SI 前缀、二进制前缀并允许用户轻松实现自己的前缀

*   如果不相关，可以处理未知单位，例如：

    ```
    Units.convert(3, "m^2 this_is_not_a_unit", "mm^2 this_is_not_a_unit"); 
    ```

    将返回，因为转换两边的`3e6`未知单位相同。`this_is_not_a_unit`

*   对于代码的性能关键部分，可以获得转换因子（如果转换是纯乘法的），例如：

    ```
    Units.factor("kg", "t"); 
    ```

    将返回`1e-3`。

*   允许检查等价性，例如

    ```
    Units.equivalent(1, "s", "min"); 
    ```

    将返回 false，因为`1min`与`1s`. 另一方面，检查可兑换性

    ```
    Units.convertible("s", "min"); 
    ```

    将返回`true`。

*   紧密集成在[坐标](https://github.com/uhoefel/coordinates)库中（从 Java 16 开始，该库仍然需要预览功能，但从 Java 17 开始，它将准备好生产）

常量通过`Constant`支持例如的接口实现：

*   定义自己的常量，例如

    ```
    // (3 ± 0.2) mole
    Constant.of(3, 0.2, "mole"); 
    ```

*   链接命令，例如

    ```
    // constant with the distance travelled by light in vacuum in (2 ± 0) seconds as value
    PhysicsConstant.SPEED_OF_LIGHT_IN_VACUUM.mul(2, 0, SiBaseUnit.SECOND);

    // constant of the elementary charge per (electron) mass
    PhysicsConstant.ELEMENTARY_CHARGE.div(PhysicsConstant.ELECTRON_MASS);

    Constant c = Constant.of(3, 0.2, "mole");
    PhysicsConstant.SHIELDING_DIFFERENCE_OF_T_AND_P_IN_HT.mul(c); 
    ```

*   （简单）不确定性传播

*   该接口为来自[jatex](https://github.com/uhoefel/jatex)`Constant`模块的接口提供了默认实现，因此常量可以轻松返回正确的 LaTeX 代码。`Texable`

*   NIST 定义的大多数物理常数以及一些数学常数的正确记录实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-16T22:13:54.857

[https://github.com/unitsofmeasurement/uom-se](https://github.com/unitsofmeasurement/uom-se)来自 JSR 363

[https://mvnrepository.com/artifact/org.unitsofmeasurement/unit-api/0.6.2-RC1](https://mvnrepository.com/artifact/org.unitsofmeasurement/unit-api/0.6.2-RC1)

希望您的问题得到解决。4年前！

# java - 无法在 Jena 库中创建用于从 RDF 解析或提取 URIS 的模型类？XML 页面

> ID：12542729
> 
> 赞同：1
> 
> 时间：2012-09-22T09:50:55.987
> 
> 标签：java, xml, parsing, rdf, jena

我使用[Jena 库](http://jena.apache.org)编写了以下代码以在网页上打印 URI，但它显示错误。代码是

```
 public static void test(String url)
     {
      try
      {
           System.out.println("to go");
           Model read = ModelFactory.createDefaultModel().read(url);
           System.out.println("to go");
           StmtIterator si=read.listStatements();
            System.out.println("to go");
            while(si.hasNext())
             {
             Statement s=si.nextStatement();
               Resource r=s.getSubject();
             Property p=s.getPredicate();
                RDFNode o=s.getObject();
              System.out.println(r.getURI());
               System.out.println(p.getURI());
              System.out.println(o.asResource().getURI());

            }
      }
           catch(JenaException | NoSuchElementException c)
            {    }
          } 
```

谁能帮我进一步解决这个问题？？？

它无法创建模型读取对象。URL 是 xml 页面的网址。

出现以下错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
        at com.hp.hpl.jena.util.Metadata.<clinit>(Metadata.java:39)
         at com.hp.hpl.jena.JenaRuntime.<clinit>(JenaRuntime.java:37)
         at com.hp.hpl.jena.rdf.model.impl.RDFReaderFImpl.<clinit>(RDFReaderFImpl.java:74)
         at com.hp.hpl.jena.rdf.model.impl.ModelCom.<clinit>(ModelCom.java:54)
         at com.hp.hpl.jena.rdf.model.ModelFactory.createDefaultModel(ModelFactory.java:142)
at com.hp.hpl.jena.rdf.model.ModelFactory.createDefaultModel(ModelFactory.java:136)
at web.crawler.WebCrawler.test(WebCrawler.java:52)
at web.crawler.WebCrawler.main(WebCrawler.java:98)
    Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:59:00.147

在发行版的 lib/ 目录中添加所有 jar。您可以将 lib/* 形式用于类路径。

如果您仍然缺少 org.w3c.dom.ElementTraversal（位于 xml-apis 中），那是因为您使用的是旧版本的 Xerces 和旧的 xml-apis。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:35:30.663

```
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory 
```

您的类路径中缺少库 slf4j*.jar。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T12:10:08.060

以下是我必须添加的库：

```
 import org.slf4j.*;
  import org.apache.xerces.util.XMLChar;
  import org.w3c.dom.ElementTraversal;
  import org.apache.jena.iri.IRIFactory; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-18T16:26:37.107

我解决了它，在 jena lib dir 中添加了所有可用的库。我猜 Jena 需要另一个 lib 或 jar 文件，但我不知道具体的 .jar，所以我将它们全部添加。然后它工作！

# cordova - PhoneGap & Sencha Touch 2 载入画面

> ID：12542730
> 
> 赞同：3
> 
> 时间：2012-09-22T09:51:09.230
> 
> 标签：cordova, sencha-touch-2

我正在构建一个基于 sencha touch 2 phonegap 的应用程序，我的应用程序从远程服务器中提取 JSON 数据。目前，phonegap native load 屏幕出现直到设备准备好，然后出现 sencha touch 2 加载屏幕，直到 sencha touch 2 准备好。

我希望在加载所有内容之前显示本机 phonegap 屏幕，包括 sencha touch 2。

我已经用谷歌搜索了一个解决方案，但找不到任何东西。有没有一种方法可以告诉 phonegap 在隐藏加载屏幕之前等待 sencha touch 2？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:31:36.917

在 iOS 上，您可以在 Cordova.plist 中将 AutoHideSplashScreen 设置为 NO，然后使用

`navigator.splashscreen.hide();`

在 Android 上你可以做类似的事情，Simon Mac Donald 对此有一个指南：
[http ://simonmacdonald.blogspot.nl/2012/04/phonegap-android-splashscreen-just-got.html](http://simonmacdonald.blogspot.nl/2012/04/phonegap-android-splashscreen-just-got.html)

# android - 在 Android 中下载的 .apk 文件已损坏

> ID：12542731
> 
> 赞同：0
> 
> 时间：2012-09-22T09:51:29.770
> 
> 标签：android, download, corrupt-data

我需要通过程序下载一个 .apk 文件，然后启动它的活动。我正在使用的代码如下

```
private String downloadFile(String sourceURL, String destinationPath)
    {
        try {
            URL url = new URL(sourceURL);
            URLConnection connection = url.openConnection();
            connection.connect();

            // download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(destinationPath);

            byte data[] = new byte[1024];
            int count;
            while ((count = input.read(data)) > 0) {
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close(); 
```

// EDITED here: 将文件设为 rw，否则将不会安装 apk 文件 Runtime.getRuntime().exec("chmod 666 " + destinationPath);

```
 message = "OK";
        }
        catch (MalformedURLException e) {
            message = "Malformed URL error: " + e.getMessage();
        }
        catch (ProtocolException e) {
            message = "Protocol exception error: " + e.getMessage();
        }
        catch (FileNotFoundException e) {
            message = "File not found error: " + e.getMessage();
        }
        catch (IOException e)   {
            e.printStackTrace();
            message = "Failed to download the file : " + e.getMessage();
        }
        return message;
    } 
```

我提到我首先为文本文件调用该方法，然后为 apk 文件调用该方法。因此，每次我在本地处理文件时，我都知道出了什么问题。通过这种方式，我知道文本文件已正确下载。但是 .apk 文件已损坏。因为我在本地开发，可以访问 DDMS 和 localhost（IP：10.0.2.2），所以我可以肯定地说罪魁祸首是上面的代码。当我通过 DDMS 人为地将“下载”文件替换为原始 .apk 文件时，接下来的所有处理都可以。另外，当我比较原始和下载的 .apk 文件时，我有区别。我究竟做错了什么？谢谢 PS：搜索，我意识到，虽然是一个流行的问题，但没有一致的答案。就我而言，我将其确定为纯粹的下载方法问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:56:43.040

请参阅上方 EDITED 行下的答案。已实施，工作正常，可能对其他人有帮助

# java - 在 JEditorPane 中设置默认字体

> ID：12542733
> 
> 赞同：16
> 
> 时间：2012-09-22T09:51:59.183
> 
> 标签：java, swing, fonts, jeditorpane

```
editorPane.setContentType("text/html");    
editorPane.setFont(new Font("Segoe UI", 0, 14));
editorPane.setText("Hello World"); 
```

这不会更改文本的字体。我需要知道如何使用 HTML Editor Kit 为 JEditorPane 设置默认字体。

编辑：

![在此处输入图像描述](../Images/0686425f39b621effb05a5b4bb6cb938.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-02T22:24:16.690

试试这个：

```
JEditorPane pane = new JEditorPane();
pane.putClientProperty(JEditorPane.HONOR_DISPLAY_PROPERTIES, Boolean.TRUE);
pane.setFont(SOME_FONT); 
```

所有学分都归功于**de-co-de**博主！资料来源： [http ://de-co-de.blogspot.co.uk/2008/02/setting-font-in-jeditorpane.html](http://de-co-de.blogspot.co.uk/2008/02/setting-font-in-jeditorpane.html)

我刚刚测试过了。这使得 JEditorPane 使用与 JLabel 相同的字体

```
JEditorPane pane = new JEditorPane();
pane.putClientProperty(JEditorPane.HONOR_DISPLAY_PROPERTIES, Boolean.TRUE);
pane.setFont(someOrdinaryLabel.getFont()); 
```

完美运行。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-22T14:33:22.583

渲染 HTML 时，JEditorPane 的字体需要通过其样式表进行更新：

```
 JEditorPane editorPane = 
            new JEditorPane(new HTMLEditorKit().getContentType(),text);
    editorPane.setText(text);

    Font font = new Font("Segoe UI", Font.PLAIN, 24));
    String bodyRule = "body { font-family: " + font.getFamily() + "; " +
            "font-size: " + font.getSize() + "pt; }";
    ((HTMLDocument)editorPane.getDocument()).getStyleSheet().addRule(bodyRule); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-28T14:38:00.333

当您使用 HTML 工具包时，您可以使用标准样式在 HTML 中设置字体。因此，将 setText 更改为如下内容：

```
editorPane.setText("<html><head><style>" + 
                   "p {font-family: Segoe UI; font-size:14;}" + 
                   "</style></head>" +
                   "<body><p>It Works!</p></body></html>"); 
```

并删除 setFont 语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T10:18:51.430

我检查了你的代码，应该没有问题。你测试过其他字体吗？请尝试“Segoe Script”字体，看看它是否改变。

**编辑：** 我已经尝试了下面的代码，它对我来说很好。您确定您发布的代码与您实现的代码完全相同吗？

```
 editorPane.setContentType("text/html");
    editorPane.setFont(new Font("Segoe Script", 0, 14));
    editorPane.setText("it works!"); 
```

**Edit2：** 更改您的主要方法如下。它设置了 Nimbus LookAndFeel。我还没有检查其他 LookAndFeels。

```
public static void main(String[] args)
{
    try
    {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels())
        {
            if ("Nimbus".equals(info.getName()))
            {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex)
    {
        java.util.logging.Logger.getLogger(EditorPaneDemo.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }

    java.awt.EventQueue.invokeLater(new Runnable()
    {
        @Override
        public void run()
        {
            new EditorPaneDemo();
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T10:52:17.547

试试下面

```
editorPane.setFont(new Font("Segoe UI", Font.PLAIN, 24)); 
```

以下是工作代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Font;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;

public class jeditorfont extends JFrame {
  private JTextPane textPane = new JTextPane();

  public jeditorfont() {
    super();
    setSize(300, 200);

    textPane.setFont(new Font("Segoe UI", Font.PLAIN, 24));

    // create some handy attribute sets
    SimpleAttributeSet red = new SimpleAttributeSet();
    StyleConstants.setForeground(red, Color.red);
    StyleConstants.setBold(red, true);
    SimpleAttributeSet blue = new SimpleAttributeSet();
    StyleConstants.setForeground(blue, Color.blue);
    SimpleAttributeSet italic = new SimpleAttributeSet();
    StyleConstants.setItalic(italic, true);
    StyleConstants.setForeground(italic, Color.orange);

    // add the text
    append("NULL ", null);
    append("Blue", blue);
    append("italic", italic);
    append("red", red);

    Container content = getContentPane();
    content.add(new JScrollPane(textPane), BorderLayout.CENTER);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  }

  protected void append(String s, AttributeSet attributes) {
    Document d = textPane.getDocument();
    try {
      d.insertString(d.getLength(), s, attributes);
    } catch (BadLocationException ble) {
    }
  }

  public static void main(String[] args) {
    new jeditorfont().setVisible(true);
  }
} 
```

参考： [http ://www.java2s.com/Code/JavaAPI/javax.swing/JTextPanesetFontFontfont.htm](http://www.java2s.com/Code/JavaAPI/javax.swing/JTextPanesetFontFontfont.htm)

# javascript - 将新列表项插入其正确的字母位置

> ID：12542738
> 
> 赞同：9
> 
> 时间：2012-09-22T09:52:16.377
> 
> 标签：javascript, sorting

我想知道将项目（在本例中为字符串）插入正确的字母顺序，仅使用 JavaScript（不是 jQuery）的最有效方法是什么？我认为在插入项目后直接对列表进行排序就足够了，但不起作用。我通过输入到文本字段中的值获取要插入的值。

在插入新项目之前，列表如下所示：

*   信天翁
*   扇尾
*   基亚
*   猕猴桃
*   高边
*   推

如果我选择将“Bellbird”添加到此列表中，我希望该列表现在看起来像：

*   信天翁
*   铃鸟
*   扇尾
*   基亚
*   猕猴桃
*   高边
*   推

这是我用来尝试实现预期结果的代码：

***HTML：***

```
<ul id="birds">
  <li>Albatross</li>
  <li>Fantail</li>
  <li>Kea</li>
  <li>Kiwi</li>
  <li>Takahe</li>
  <li>Tui</li>
</ul>

<p><label for="addNewBirdField">Add new bird: </label>
   <input type="text" id="addNewBirdField" /></p>

<p><button id ="addItem">Add new bird</button></p> 
```

***JavaScript：***

```
function addNewBird()
{
  var birdList = document.getElementById("birds"); //get birds unordered list

  var newBirdItem = document.createElement("li"); // create new li element

  var bird = document.getElementById("addNewBirdField").value // get data from form field

  var birdValue = document.createTextNode(bird); // create new textNode with value from previous step

  newBirdItem.appendChild(birdValue); // append textNode from previous step to li element (newBirdItem)

  birdList.appendChild(newBirdItem); // append li element to bird list

  birdList.sort();
}

var addItem = document.getElementById("addItem");
addItem.onclick = addNewBird; 
```

我在排序数组中查看了[这个链接](http://www.javascriptkit.com/javatutors/arraysort.shtml)（我假设我的编程知识是每个列表元素都在一个数组中）。我了解按字典顺序排序是什么-本周早些时候我学到了这一点。

如果有人可以帮助我解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T09:54:55.477

```
birdList.sort(); 
```

这是行不通的，因为返回的值`document.getElementById()`永远*不是*an `Array`，它要么是对元素的引用，要么`null`是未找到该元素。只有`Array`s （默认）有一个`sort()`方法。

相反，你想要的是...

```
var birds = birdList.getElementsByTagName("li");

birds = Array.prototype.slice.call(birds).sort(function(a, b) {
    return a.firstChild.data.toLowerCase().localeCompare(b.firstChild.data.toLowerCase());
});

for (var i = 0, length = birds.length; i < length; i++) {
    birdList.appendChild(birds[i]);
} 
```

[js小提琴](http://jsfiddle.net/UCgaB/)。

如果您不需要支持旧版浏览器...

```
var birds = birdList.querySelectorAll("li");

birds = Array.prototype.slice.call(birds).sort(function(a, b) {
    return a.textContent.toLowerCase().localeCompare(b.textContent.toLowerCase());
}).forEach(function(bird) {
    birdList.appendChild(bird);
}); 
```

[js小提琴](http://jsfiddle.net/MabhY/)。

最后，如果您*确实*有 jQuery 供您使用...

```
$(birdList).find("li").sort(function(a, b) {
    return $(a).text().toLowerCase().localeCompare($(b).text().toLowerCase());
}).each(function() {
    $(birdList).append(this);
}); 
```

[js小提琴](http://jsfiddle.net/FhQPc/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T14:24:00.967

您不必重新排序整个列表，并重新插入每个项目。

您可以在排序列表中找到插入新项目的位置。

```
<!doctype html>
<html lang="en">
<head>
<meta charset= "utf-8">
<title>Test Page</title>

<script>
function addNewBird(){
    var bird= document.getElementById("addNewBirdField").value;
    if(bird){
        bird= bird.charAt(0).toUpperCase()+ bird.substring(1).toLowerCase();
        var birdList= document.getElementById("birds"),
        list= birdList.getElementsByTagName('li'),
        i= 0, who= list[0],

        newBirdItem= document.createElement("li");
        newBirdItem.appendChild(document.createTextNode(bird));

        while(who && who.innerHTML<bird) who= list[++i];
        if(who) birdList.insertBefore(newBirdItem, who);
        else birdList.appendChild(newBirdItem);
    }
    return newBirdItem;
}

</script>
</head>
<body>

<div>
<ul id="birds">
  <li>Albatross</li>
  <li>Fantail</li>
  <li>Kea</li>
  <li>Kiwi</li>
  <li>Takahe</li>
  <li>Tui</li>
</ul>

<p><label for="addNewBirdField">Add new bird: </label>
<input type="text" id="addNewBirdField" /></p>

<p><button id ="addItem" onclick="addNewBird()">Add new bird</button></p>
</div>

</body>
</html> 
```

# ruby - Rails 自动登录

> ID：12542746
> 
> 赞同：1
> 
> 时间：2012-09-22T09:52:53.890
> 
> 标签：ruby, ruby-on-rails-3

我的生产日志 1GB，当大小达到 1GB 时，我需要自动设置 logrotate。我正在使用 rails 3，ruby 1.9.3。如何旋转登录轨道？谁能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:07:25.630

要创建一个记录器，该记录器一旦达到大约 102,400,000 字节就会老化日志文件并留下 10 个旧日志文件：

```
require 'logger'
logger = Logger.new('foo.log', 10, 102_400_000) #10 logs, about 1 GB all together 
```

# nullreferenceexception - EmitMapper 讨人喜欢的配置 NullReferenceException

> ID：12542749
> 
> 赞同：1
> 
> 时间：2012-09-22T09:54:37.897
> 
> 标签：nullreferenceexception, emitmapper

我使用 EmitMapper 和奉承配置表单 EmitMapper 示例将我的实体映射到 DTO。

问题是如果源值是对象的属性（即为空），我会得到 NullReferenceException，例如：

```
public class User
{
  public Guid Id { get; set; }
  public Company Company { get; set; }
}    

public class Company
{
  public Guid Id { get; set; }
}

public class UserDTO
{
  public Guid Id { get; set; }
  public Guid CompanyId{ get; set; }
} 
```

我将用户映射到 UserDTO：`var mapper = ObjectMapperManager.DefaultInstance.GetMapper<User, UserDTO>( new FlatteringConfig() );`

`var dto = mapper.Map(new User());`

当 EmitMapper 将尝试获取 CompanyId 时，它会调用 Company 对象 Id 属性的 getter，但它为 null。

任何帮助将不胜感激。

# c++ - 如何在 C++ 中获取 MIDI 输入数据？

> ID：12542758
> 
> 赞同：9
> 
> 时间：2012-09-22T09:56:10.320
> 
> 标签：c++, input, midi

我已经在网上搜索了 ****，以寻找一种从连接的 MIDI 设备获取数据的简单方法。我在 Win7 64 位 PC 上使用 Visual Studio 2010。

我已经尝试过[Improv](http://improv.sapp.org/)、[JDKSmidi](https://github.com/jdkoftinoff/jdksmidi/tree/master/examples)、[Portmidi](http://sourceforge.net/apps/trac/portmedia/wiki/Installing%20portmidi%20on%20Windows)等库，它们 的所有示例程序都编译时出现错误，而 Portmidi 并没有真正提供有用的文档。

我想做的就是在我的程序中读取 windows 上的 midi 输入。（也许即使没有外部库？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T11:30:09.623

看看rtmidi。它很小（2 个头文件和一个 .cpp 文件）并且非常易于使用。 [http://www.music.mcgill.ca/~gary/rtmidi/](http://www.music.mcgill.ca/~gary/rtmidi/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T11:41:16.987

如果您在 Windows 上，则可以使用 Windows 多媒体 API。

这很简单。

[MSDN MIDI 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/dd798495%28v=vs.85%29.aspx)

关于 codeproject 有几篇文章：

[http://www.codeproject.com/Articles/2771/Wrapper-Library-for-Windows-MIDI-API](http://www.codeproject.com/Articles/2771/Wrapper-Library-for-Windows-MIDI-API)

[http://www.codeproject.com/Articles/36313/MIDI-Star](http://www.codeproject.com/Articles/36313/MIDI-Star)

# c# - 注销后如何防止访问该页面？

> ID：12542760
> 
> 赞同：0
> 
> 时间：2012-09-22T09:56:58.170
> 
> 标签：c#, javascript, asp.net

我正在使用 ASP.NET 和 C#。单击注销后，我正在使用它。

```
Session.Abandon();
Session.RemoveAll();
Page.Responce.Cache.setCacheability(HttpCacheability.NoCache);
Response.Redirect("Default.aspx"); 
```

但在此之后，如果他们点击浏览器中的后退按钮，它将转到上一页。

有什么办法可以防止这种情况发生吗？

谢谢..

**编辑：**

我确实用过这个。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        if (Session["LoginId"] == null)
            Response.Redirect("frmLogin.aspx");
        else
        {
            Response.ClearHeaders();
            Response.AddHeader("Cache-Control", "no-cache, no-store, max-age=0, must-revalidate");
            Response.AddHeader("Pragma", "no-cache");
        }
    }
} 
```

因此，他们单击浏览器后退按钮，然后将调用页面加载，因此我们可以检查会话变量以进行身份​​验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:42:23.013

我正在发布一个链接我希望这个链接可以指导你并帮助你任何你需要的点击这里

[http://www.dotnetfunda.com/](http://www.dotnetfunda.com/codes/code1651-prevent-back-button-after-logout-in-aspnet.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:33:29.790

protected void Page_Load(object sender, EventArgs e) { if (!IsPostBack) {

```
 if (Session["Navigation"] == null)
            {
                Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
                Response.Cache.SetCacheability(HttpCacheability.NoCache);
                Response.Cache.SetNoStore();
                Response.Redirect("~/Login.aspx");
            }                                                                               protected void lnkbtnLogOut_Click(object sender, EventArgs e)
    {

        Session["Navigation"] = null;
        Session.Abandon();

        Response.Redirect("~/Login.aspx");
    }                                                                                             but it's not working.It still redirects to prevoios page after click on back button 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:00:51.123

设置页面属性`<outputcache=none>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T10:08:34.123

以下将为您服务：

该代码禁用浏览器中的缓存。

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
Response.Cache.SetNoStore(); 
```

或者

注销后，您可以添加脚本以删除浏览器上的历史记录。

```
Page.ClientScript.RegisterStartupScript(this.GetType(),"cle","windows.history.clear",true); 
```

希望以上两个中的任何一个都可以。

* * *

您可以检查`Session["---"]`变量可用性，如果会话不可用，则将用户重定向到登录/注册页面。

我的意思是，您正在放弃会话，这可能会破坏会话变量。所以当用户点击后退按钮时，系统会检查会话，它不会发现并且用户将被重定向到登录/注册页面。

如果您使用内置的成员资格类进行用户管理，那么用户 [Authorize] 属性。这可能会阻止用户在注销后访问页面，并将未注册的用户重定向到登录/注册页面。

# asp.net - 将值从 ASP.NET 传递到 Silverlight 应用程序

> ID：12542762
> 
> 赞同：0
> 
> 时间：2012-09-22T09:57:02.453
> 
> 标签：asp.net, silverlight

我在 .web 部件上的 Microsoft Visual Web Developer 2010 Express 中创建了一个 ASP.NET 项目，并包含了一个 Silverlight 项目。我创建了一个音乐博客之类的东西，我想将“路径”值传递给 Silverlight。用户上传文件，曲目将在 Silverlight 应用程序中播放。

例如，我在数据库中创建了一个名为 Posts 的表和另一个从 Posts 派生的名为 Track 的表，其中存储了文件的路径。我还包含在我的 Index.aspx 文件中：

```
<form id="form1" runat="server" style="height:50%">
<div id="silverlightControlHost">
    <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="770" height="530">
      <param name="source" value="ClientBin/MusicBlog.xap"/>
      <param name="onError" value="onSilverlightError" />
      <param name="background" value="white" />
      <param name="minRuntimeVersion" value="3.0.40818.0" />
      <param name="autoUpgrade" value="true" />
      <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=3.0.40818.0" style="text-decoration:none">
          <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Holen Sie sich Microsoft Silverlight" style="border-style:none"/>
      </a>
    </object><iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe></div>
</form> 
```

创建帖子时，我调用：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create(Posts model, HttpPostedFileBase file)
    {

        if (ModelState.IsValid)
        {
            if (file != null)
            {
                if (file.ContentLength > 0)
                {
                    var fileName = Path.GetFileName(file.FileName);
                    var path = Path.Combine(Server.MapPath("~/Music"), fileName);
                    file.SaveAs(path);
                    Track track = new Track();
                    track.Path = path;
                    model.Track.Add(track);
                    DateTime today = DateTime.Today;
                    Posts post = new Posts();
                    /*post.Body = model.Body;
                    post.Created = model.Created;
                    post.Modified = model.Modified;
                    post.Title = model.Title;*/
                    model.Created.ToLocalTime();
                    postRepository.Create(model);
                    return RedirectToAction("Index");
                }
                else
                {
                    ModelState.AddModelError("", "The given Path is invalid");
                }
            }
            else
            {
                ModelState.AddModelError("", "The given Path is invalid");
            }

        }
        return View(model);
    } 
```

我现在如何将路径传递给 Silverlight 中的播放器，以便我可以在嵌入在 ASP.NET 页面中的 Silverlight 应用程序中播放曲目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:15:04.460

要让 Silverlight 访问本地文件系统上的轨道，用户必须启动选择，您不能“为他们”访问文件系统。您可以在 Silverlight 浏览器外应用程序中以提升的信任度运行（实际上您可以在[Silverlight 5 in browser](http://silverlightedweb.blogspot.com/2011/12/how-to-get-unrestricted-access-in.html)中执行此操作，但这是一个边缘情况）。

为什么不让 Silverlight 应用程序提示曲目并同时上传？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:10:41.223

Create an overload for Index

```
public ActionResult Index(string trkPath) { } 
```

and add Route Values while redirecting

```
return(RedirectToAction("Index", new { trkPath = track.Path })); 
```

and access the params in silverlight

```
NavigationContext.QueryString["trkPath"] 
```

# .htaccess - Magento 301 重定向某些页面

> ID：12542763
> 
> 赞同：0
> 
> 时间：2012-09-22T09:58:12.910
> 
> 标签：.htaccess, magento

一位 SEO 专家建议我 301 将某些页面（例如 .com/about-us、.com/contact-us）从我的 Magento 安装重定向到带有结尾/尾部斜杠的版本。

完成此操作并仅影响所需页面的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:27:33.437

假设这将是从一个页面重定向到另一个页面，如果我想将此页面移动和/或重命名为新 URL，例如：

来自： http: [//www.domain.com/old-url.html](http://www.domain.com/old-url.html)

至： http: [//www.domain.com/new-url.html](http://www.domain.com/new-url.html)

我会在 Magento 中执行以下操作来创建适当的永久重定向：

1.  导航到目录 > 网址重写管理
2.  单击“添加 Urlrewrite”按钮
3.  从“创建 Urlrewrite”下拉菜单中选择“自定义”
4.  “Urlrewrite Information”表格将这样完成：

ID 路径：old-url.html 请求路径：old-url.html 目标路径： http: [//www.domain.com/new-url.html](http://www.domain.com/new-url.html) 重定向：Permanent(301)

因此，回顾一下：ID 路径和请求路径是相同的：从 url 的根目录开始重定向 FROM 的路径——在（不包括）域名和尾部斜杠之后的所有内容。目标路径是要重定向到的 URL。

或试试这个

[http://www.isitebuild.com/301-redirect.htm](http://www.isitebuild.com/301-redirect.htm)

希望对你有帮助

# plone - 头 block with plone.app.z3cform

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-09-22T09:59:07.387144 次This question shows research effort; it is useful and clear1This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I have a grok'ed plone.directives.form code below:

```
class EditForm(TreeFormMixin, form.SchemaForm):
 """
 Edit form for our model.

 We got one dummy button which allows us to manually inspect the data postback values.
 """
 grok.context(ISiteRoot)
 grok.name("dgftreeselect-test")
 grok.require('zope2.View')

 ignoreContext = True
 schema = IFormSchema

 label = u"Tree selection demo and manual testing"

 @button.buttonAndHandler(u'Turbo boost')
 def handleApply(self, action):

 data, errors = self.extractData()
 if errors:
 self.status = self.formErrorsMessage
 return

 raise ActionExecutionError(Invalid(u"Please see that data stays intact over postback")) 
```

it results to this form - which is not that good looking:

![DGFs in the action](https://i.stack.imgur.com/FzGEF.png)

Since it is a demo form I'd like to keep all the related material in the same .py file. However, as the form is ugly looking, I'd like to inject a `<style>` CSS block on the page from a Python source code string to fix some of the most outstanding issues with the CSS styles.

What kind of hooks plone.app.forms / BrowserViews provide to inject your own `<style>` block in the `<head>` or in any part of the resulting HTML page? I prefer not to create any additional files and CSS registrations for this task.

Full source:

[https://github.com/miohtama/collective.z3cform.dgftreeselect/blob/master/src/collective/z3cform/dgftreeselect/testform.py](https://github.com/miohtama/collective.z3cform.dgftreeselect/blob/master/src/collective/z3cform/dgftreeselect/testform.py)

[plone](/tags/plone "show questions tagged 'plone'")4

## 1 回答 1

This answer is useful2

plone.app.z3cform and Zope browser views don't provide any hooks to inject custom things into the head directly, but you can use a custom template by specifying the template attribute in the form class:

```
template = grok.Template('path/to/template.pt') 
```

And then in template.pt, fill the style_slot to include your styles. The entire template could look like this:

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 xmlns:tal="http://xml.zope.org/namespaces/tal"
 xmlns:metal="http://xml.zope.org/namespaces/metal"
 xmlns:i18n="http://xml.zope.org/namespaces/i18n"
 lang="en"
 metal:use-macro="context/main_template/macros/master"
 i18n:domain="plone">
<body>

<metal:block fill-slot="style_slot">
 <style type="text/css">
 /* insert styles here */
 </style>
</metal:block>

<metal:content-core fill-slot="main">
 <metal:content-core define-macro="content-core">
 <tal:button metal:use-macro="context/@@ploneform-macros/titlelessform" />
 </metal:content-core>
</metal:content-core>

</body>
</html> 
```

This is not a best practice since the styles must be served every time the widget is rendered. Instead it's usually better to register CSS in the portal_css tool.

于 2012-09-24T05:50:32.490 回答

#### Related

[2](/questions/17178497 "Question score (upvotes - downvotes)")[rspec - RSpec、Rails 4、Postgres、UUID 主键：在 Rake + RSpec 中 id 为空，但在 RSpec 或控制台中很好](/questions/17178497)[1](/questions/17178498 "Question score (upvotes - downvotes)")[android - 过滤 Null 然后在列表或 TextView 中返回消息与什么都不返回](/questions/17178498)[2](/questions/17178499 "Question score (upvotes - downvotes)")[c++ - std::get 是如何工作的？](/questions/17178499)[2](/questions/17178500 "Question score (upvotes - downvotes)")[matlab - 从数组的每一行中减去多个向量（超级广播）](/questions/17178500)[2](/questions/17178504 "Question score (upvotes - downvotes)")[r - 返回包含向量中每个元素索引的列表](/questions/17178504)[2](/questions/17178509 "Question score (upvotes - downvotes)")[extjs4 - Extjs 4 中 Ext.panel.Panel 上的“激活”和“显示”事件有什么区别？](/questions/17178509)[1](/questions/17178510 "Question score (upvotes - downvotes)")[javascript - Jquery选择一个父母的孩子](/questions/17178510)[1](/questions/17178512 "Question score (upvotes - downvotes)")[c# - 在创建对象之前使用它](/questions/17178512)[3](/questions/17178513 "Question score (upvotes - downvotes)")[sql - 如何查看配置单元变量的值？](/questions/17178513)[1](/questions/17178514 "Question score (upvotes - downvotes)")[c++ - C 样式数组的替代方案有多可行？](/questions/17178514)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：12542768
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# javascript - jQuery(document).ready() 不会触发

> ID：12542770
> 
> 赞同：4
> 
> 时间：2012-09-22T09:59:26.630
> 
> 标签：javascript, jquery

有谁知道为什么 jQuery document ready 可能不会在网站上触发？我把这个脚本完全放在页脚中，它根本不会触发（jQuery 1.8 包含在 head 部分中）：

```
<script type="text/javascript">
jQuery(document).ready(function() { 
     alert('test');
     jQuery("#slideshow iframe").each(function(){ 
          alert('test');
     });
});
</script> 
```

没有 Javascript 错误，控制台为空，当我在 Firebug 的控制台中运行它时，它可以工作：

```
jQuery("#slideshow iframe").each(function(){ 
     alert('test');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-12T15:36:55.873

虽然在这个特定实例中并非如此，但可能发生这种情况的一种非常烦人的方式是[jQuery 错误 10251](http://bugs.jquery.com/ticket/10251)：`$(document).ready()`回调中的错误将阻止在其运行之后注册的所有回调。（在这种情况下会出现一个 Javascript 错误，但它可能看起来完全不相关。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T10:16:50.697

您目前在您的页面上收到此错误

```
Uncaught TypeError: Property '$' of object [object Window] is not a function 
```

此错误的原因在您的`flow.anything-slider-1.0.js`at 行内`11`。

该文件正在使用`jQuery(document).ready()`，因此`$`未定义。

将线路`11`从使用更改`$`为`jQuery`工作：

```
// doesn't work
$("#content").before("<div id=\"cycledump\"></div>");

// Does work
jQuery("#content").before("<div id=\"cycledump\"></div>"); 
```

整个文件使用 jQuery 而不是`$`因此该文件可能应该坚持使用 jQuery 而不是混合使用的一种方式。

**编辑**
我只是仔细检查了[**.ready()**](http://api.jquery.com/ready/)文档，以下段落很有趣，因为它似乎与问题有关：

> **为 jQuery 命名空间命名**
> 当使用另一个 JavaScript 库时，我们可能希望调用`$.noConflict()`以避免命名空间困难。调用此函数时，`$`快捷方式不再可用，迫使我们`jQuery`每次正常写时都要写`$`。
> 
> 但是，传递给`.ready()`方法的处理程序可以接受一个参数，该参数被传递给全局 jQuery 对象。这意味着我们可以在`.ready()`处理程序的上下文中重命名对象，而不会影响其他代码：
> 
> ```
> jQuery(document).ready(function($) {
>   // Code using $ as usual goes here.
> }); 
> ```

这意味着，除了固定线之外`11`，您还可以将您的第一线更改为`jQuery(document).ready(function($) {`，将 the`$`作为参数传递。这可能允许您`$`在整个文件以及 jQuery 中使用。

无论如何，不​​确定`$`作为参数传递是否适用于您的情况，我只是想我提到它以防万一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T10:08:12.907

可能是 jQuery 库路径问题。[**尝试从jquery.com**](http://jquery.com)加载它-

```
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>

<script type="text/javascript">

$(document).ready(function() { 
     alert('test');
});

</script> 
```

复制此代码并粘贴到`head`部分

编辑：

您正在使用`jQuery 1.4.2`和`1.8 jQuery UI`

尝试移动`script tag`in`head`部分，它应该可以工作

# tridion - 有时发布失败并出现错误“您无权执行此操作”

> ID：12542772
> 
> 赞同：2
> 
> 时间：2012-09-22T09:59:32.647
> 
> 标签：tridion, tridion-2011

从 Tridion 5.3 升级到 Tridion 2011 SP1 后，当我们发布任何页面时，它会因错误“您无权执行此操作”而失败，页面预览工作正常。我们试图准确检查问题出现在哪个阶段，但双击失败的事务后，它只会在“发布流程详细信息”选项卡下显示错误消息。我是 Tridion CMS 的管理员。是否与 cd_deployer_conf 或 cd_storage_conf 的配置有关？

似乎该问题与用户访问权限有关，在 cd_Transport.log 中的 CME 服务器上出现以下错误消息轮询时发生意外错误：IP:PORT/httpupload.aspx 原因：未授权

在 CME 上的事件日志中出现以下错误：您无权执行此操作。组件：Tridion.ContentManager.Publishing 错误代码：0 用户：NT AUTHORITY\SYSTEM

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T18:47:36.543

您对 HttpUpload 应用的权限有问题。确保它正在执行的用户对传入内容的 Content Deployer 位置具有权限。

通过检查应用程序池的身份来查看它是什么用户来执行此操作。IIS 7.5 使用 ApplicationPoolIdentity 作为默认用户，这与以前的默认用户是 NetworkService 的版本不同（[这里](http://blogs.iis.net/webdevelopertips/archive/2009/10/02/tip-98-did-you-know-the-default-application-pool-identity-in-iis-7-5-windows-7-changed-from-networkservice-to-apppoolidentity.aspx)有更多关于它的内容）。如果您将应用程序池的标识设置回您在 ​​5.3 中使用的标识，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T05:27:28.540

该错误表明代表 SDL Tridion Content Delivery Deployer 写入文件的用户（可能是 NetworkService）存在权限问题。

如果您不确定哪个用户正在代表 SDL Tridion Content Delivery Deployer 写入文件，那么您应该能够使用文件系统监控应用程序，例如 Process Monitor（可从 Microsoft TechNet 获得：[http ://technet.microsoft.com /en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645) ) - 请运行此程序，重现问题，然后查找“拒绝访问”事件。

这应该让您知道哪个用户正在执行写入操作 - 为该用户提供写入目录的权限并查看错误是否消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T07:06:04.640

根据 SDL LiveContent 的说法，这可能会有所帮助

> 新的 TOM.NET API 在呈现和发布期间在功能上仍然是只读接口。也就是说，您不能在执行模板时创建、更新或删除 Content Manager 项目。此行为也适用于现已弃用的 TOM API，这意味着如果您有使用 TOM API 并执行写入操作的模板，这些模板现在将失败。
> 
> 如果您确实希望您的旧 TOM 模板能够写入内容管理器，您可以将内容管理器配置为允许在呈现和发布期间进行写入。您可以通过打开 Tridion Content Manager 配置文件`<Tridion.ContentManager.config>`（位于 Tridion Content Manager 根位置的 config 子文件夹中）并将`<allowWriteOperationsInTemplates>`设置为 true 的属性添加到名为`<tridion.contentmanager.security>`.

来源：[SDL LiveContent 上的“内容管理器中的向后兼容性问题”页面](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_1453B827EA0C4607BA8A68AAB2E95CCC)

# android - SQLiteException：绑定或列索引超出范围

> ID：12542774
> 
> 赞同：0
> 
> 时间：2012-09-22T09:59:34.450
> 
> 标签：android, android-contentprovider

尝试基本的内容提供者示例，但不断出错。`android.database.sqlite.SQLiteException: bind or column index out of range`,

我是下面的代码

```
 String[] mSelectionArgs = {""};
 String[] mProjection = {
        UserDictionary.Words._ID,
        UserDictionary.Words.WORD,
        UserDictionary.Words.LOCALE,
        UserDictionary.Words.APP_ID,
        UserDictionary.Words.FREQUENCY
};

 private void getFromDictionary(){
    // If the word is "*" get everything
       if(mSearchString.equalsIgnoreCase("*")){
        // Setting the selection clause to null will return all words
            mSelectionClause = null;
            mSelectionArgs[0] = "";
        }else{
         // Constructs a selection clause that matches the word that the user entered.
            mSelectionClause = UserDictionary.Words.WORD+ " = ?";
            // Moves the user's input string to the selection arguments.
            mSelectionArgs[0]=mSearchString;
        }

    mCursor = mResolver.query(
            UserDictionary.Words.CONTENT_URI,  // The content URI of the words table
            mProjection,                       // The columns to return for each row
            mSelectionClause,           // Either null, or the word the user entered
            mSelectionArgs,             // Either empty, or the string the user entered
            null);                            //  The sort order for the returned rows 
```

# 下面是Logcat

```
09-22 15:22:50.545: W/dalvikvm(21939): threadid=1: thread exiting with uncaught exception (group=0x40abe1f8)
09-22 15:22:50.553: E/AndroidRuntime(21939): FATAL EXCEPTION: main
09-22 15:22:50.553: E/AndroidRuntime(21939): android.database.sqlite.SQLiteException: bind or column index out of range: handle 0x2213aa0
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:180)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.content.ContentProviderProxy.query(ContentProviderNative.java:362)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.content.ContentResolver.query(ContentResolver.java:311)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at com.example.contentprovider.ContentProviderActivity.getFromDictionary(ContentProviderActivity.java:107)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at com.example.contentprovider.ContentProviderActivity.access$1(ContentProviderActivity.java:66)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at com.example.contentprovider.ContentProviderActivity$1.onClick(ContentProviderActivity.java:164)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.view.View.performClick(View.java:3526)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.view.View$PerformClick.run(View.java:14149)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.os.Handler.handleCallback(Handler.java:605)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.os.Looper.loop(Looper.java:137)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at android.app.ActivityThread.main(ActivityThread.java:4697)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at java.lang.reflect.Method.invokeNative(Native Method)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at java.lang.reflect.Method.invoke(Method.java:511)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
09-22 15:22:50.553: E/AndroidRuntime(21939):    at dalvik.system.NativeStart.main(Native Method) 
```

# css - 使用 css3 为背景图像着色

> ID：12542779
> 
> 赞同：1
> 
> 时间：2012-09-22T10:00:52.863
> 
> 标签：css

是否可以使用 css3 为灰度背景图像着色？

这是一个图标。我希望它是蓝色的。

```
input[name=email] { background-image: url(/static/images/icons/glyphicons_010_envelope.png); background-size: 16px auto; background-position: 8px 7px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T19:07:34.773

一种可能性是在图像上覆盖蓝色 + alpha 颜色。

这样做的一种可能性是：

```
.base {
    width: 200px;
    height: 200px;
    background: linear-gradient(45deg, black, white, black);
}
#shadow {
    box-shadow: 0px 0px 3000px 0 rgba(0,0,255,0.5) inset;
 } 
```

为了避免寻找黑白图像，我在基础中设置了渐变。

然后，在阴影中，我创建了一个巨大的嵌入阴影，蓝色，alpha 0.5

[演示](http://jsfiddle.net/vals/4L4kk/)

在演示中，您可以看到基本图像，并且同一图像被染成蓝色。

**解释**

盒子阴影被设置为 inset，所以它在盒子里面，在边界周围。如果尺寸太小，您会看到盒子的中心没有阴影。

而且，由于颜色是带有 alpha 的蓝色，它有点透明，你可以通过它看到背景。

# javascript - 在 Facebook 和 Twitter 上共享动态数据

> ID：12542784
> 
> 赞同：1
> 
> 时间：2012-09-22T10:01:31.827
> 
> 标签：javascript, jquery, sharing, facebook-sharer

有什么方法可以从我的 facebook 和 twitter 页面分享一些动态数据吗？

我用静态数据尝试了这段代码并且它有效，但我动态应用它却没有。

对于推特：

```
<a href="http://twitter.com/share" 
data-url="http://your.url.com/yourdynamicpage" 
class="twitter-share-button" 
data-text="What should I share?" 
data-count="horizontal">Tweet</a> 
```

对于脸书：

```
<a href="javascript:window.location=%22http://www.facebook.com/sharer.php?u=%22+encodeURIComponent(document.location)+%22&#38;t=%22+encodeURIComponent(document.title)" title="Share on Facebook..."><img src="/path/to/your/image/" width="12" height="12" alt="alt" /></a> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:55:16.873

[http://shantacreations.com/facebook_share_old/example_1/share.php/](http://shantacreations.com/facebook_share_old/example_1/share.php/)

是的，上面的链接可以按照您的意愿运行。

# iphone - 应用程序（tableview）在滚动时崩溃

> ID：12542789
> 
> 赞同：1
> 
> 时间：2012-09-22T10:02:17.720
> 
> 标签：iphone, xcode, tableview

我正在制作一个尝试从**.plist**文件中读取信息的应用程序（放在那里解析的**JSON**）。

从文件中读取的流程很好：得到了字典数组，但是在尝试在 tableview 上显示它时，问题就开始了。初始视图已正确加载，但当我开始滚动时，应用程序崩溃。

```
#define DOCUMENTS [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]

- (void)viewDidLoad
{
    [super viewDidLoad];    
    NSString *filePathDocArray = [DOCUMENTS stringByAppendingPathComponent:@"filters.plist"];
    NSString *filePathBundleArray = [[NSBundle mainBundle] pathForResource:@"filters" ofType:@"plist"];

    if (![[NSFileManager defaultManager] fileExistsAtPath:filePathDocArray]) {
        [[NSFileManager defaultManager] copyItemAtPath:filePathBundleArray toPath:filePathDocArray error:nil];
        NSLog(@"File saved");
    } else {
        NSLog(@"File already exists");
        filters = [NSArray arrayWithContentsOfFile:filePathDocArray];
    }

} 
```

**在这里，我将所需的所有信息放入过滤器数组（通过循环检查）。然后：**

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [filters count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *myIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:myIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:myIdentifier];                              
    }

    NSInteger crow = indexPath.row;
    NSDictionary *story = [filters objectAtIndex: crow];
    cell.textLabel.text = [story objectForKey:@"Name"];
    cell.detailTextLabel.text = [story objectForKey:@"Description"];
    return cell;
}
@end 
```

**当应用程序启动时一切正常：我看到了 normel 表格视图，但是当我开始滚动时它崩溃了**

在我评估了一系列断点调试之后，在模拟器上启动应用程序后，数组**过滤器**上的链接会拧紧，所以当我尝试填充下一个单元格时，无法正确创建**故事字典。**

这可能是什么问题？

这里控制台报告：

> `2012-09-22 13:37:43.545 JSONExample[4559:207] -[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 0x6a083c0`
> 
> `2012-09-22 13:37:43.547 JSONExample[4559:207] *** Terminating app due to uncaught exception 'NSInvalidArgumentException',` `reason: '-[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 0x6a083c0'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:06:56.800

[-[NSCFString objectAtIndex:]: unrecognized selector](https://stackoverflow.com/questions/3960351/nscfstring-objectatindex-unrecognized-selector)似乎是同样的问题。

在您调用时，您的“过滤器”变量是一个 NSString/CFString `objectAtIndex:`- 而不是您假设的数组。链接到的问题中给出的解决方案是设置`retain`您的过滤器数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:10:39.823

你在用ARC吗？？如果没有，那么首先自动释放单元格！并且如果过滤器不是保留属性..请使其成为一个并合成它，如果没有使用ARC，则将其释放到dealloc块中..我想应该这样做..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:38:15.233

如果你为`filters`like写属性，`@property (nonatomic, retain) NSArray *filters;`你需要写like`self.filters = [NSArray arrayWithContentsOfFile:filePathDocArray];`

否则你需要像这样写`filters = [[NSArray arrayWithContentsOfFile:filePathDocArray] retain];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T11:52:07.667

您需要记住另一件事..如果您执行此步骤

```
 NSDictionary *story = [[filters objectAtIndex: crow]retain]; 
```

每次调用 cellForRowAtIndexPath 时，保留计数都会增加 1。但您只会对它进行一次 delloc。因此，您的应用程序中会出现内存泄漏。我建议您阅读一次内存管理指南。它是一个小文件。最多需要你一天的时间。但是会更加自信地知道什么该做，什么不该做。

[http://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.pdf](http://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.pdf)

干杯！！快乐编码！

# asp.net - 在日历单元格中单击按钮时从日历单元格和数据库中删除数据

> ID：12542790
> 
> 赞同：1
> 
> 时间：2012-09-22T10:02:34.330
> 
> 标签：asp.net, .net, sql, c#-4.0, calendar

![在此处输入图像描述](../Images/8ca3c2268305bbf78c4ad149f524b357.png)

```
Label lbl = new Label();
lbl.BorderColor = System.Drawing.Color.Black;
lbl.BorderStyle = BorderStyle.Double;
lbl.BackColor = System.Drawing.Color.BlanchedAlmond;
lbl.Text = eventname + "<br/>" + dt + "--" + dt1;
e.Cell.Controls.Add(lbl);

btn.Click += new System.EventHandler(this.btnCross_Click);
e.Cell.Controls.Add(btn);

public void btnCross_Click(object sender, EventArgs e)
{
    string id = ((Button)sender).ID;
} 
```

我的数据库字段是 id, name , eventstartdate , eventenddate

**我应该如何完成这个**我的日历控件在 UpdatePanel 中，这就是为什么这个 btnCross_Click 没有触发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:10:41.253

下面代码的想法是在 Page_Load 方法中创建所有必需的控件，并将它们进一步移动到适当的容器中。

```
<asp:Calendar runat="server" ID="Calendar1" Width="800px" Height="700px" BackColor="White"
    BorderColor="Black" DayNameFormat="Shortest" Font-Names="Times New Roman" Font-Size="10pt"
    ForeColor="Black" NextPrevFormat="FullMonth" TitleFormat="Month" ShowGridLines="true" >
    <DayHeaderStyle BackColor="#CCCCCC" Font-Bold="True" Font-Size="7pt" ForeColor="#333333"
        Height="10pt" />
    <DayStyle Width="14%" />
    <NextPrevStyle Font-Size="8pt" ForeColor="White" />
    <OtherMonthDayStyle ForeColor="#999999" />
    <SelectedDayStyle BackColor="#CC3333" ForeColor="White" />
    <SelectorStyle BackColor="#CCCCCC" Font-Bold="True" Font-Names="Verdana" Font-Size="8pt"
        ForeColor="#333333" Width="1%" />
    <TitleStyle BackColor="Black" Font-Bold="True" Font-Size="13pt" ForeColor="White"
        Height="14pt" />
    <TodayDayStyle BackColor="#CCCC99" />
</asp:Calendar>
<asp:PlaceHolder runat="server" ID="PlaceHolder1"></asp:PlaceHolder> 
```

代码隐藏：

```
private Dictionary<DateTime, List<Control>> DayControls = new Dictionary<DateTime, List<Control>>();

protected void Page_Init(object sender, EventArgs e)
{
    Calendar1.DayRender += new DayRenderEventHandler(Calendar1_DayRender);
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if(Calendar1.VisibleDate == DateTime.MinValue)
        {
            Calendar1.VisibleDate = DateTime.Today;
        }
    }
    FillDayControls(Calendar1.VisibleDate);
}

void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
    if (!DayControls.ContainsKey(e.Day.Date)) return;

    foreach (var control in DayControls[e.Day.Date])
    {
        control.Parent.Controls.Remove(control);

        e.Cell.Controls.Add(control);

        if (control is Button)
        {
            ClientScript.RegisterForEventValidation(control.UniqueID);
        }
    }
}

private void FillDayControls(DateTime dateTime)
{
    var firstMonthDate = new DateTime(dateTime.Year, dateTime.Month, 1);

    var calendarFirstWeekDay = Calendar1.FirstDayOfWeek == FirstDayOfWeek.Default
                                ? CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek
                                : (DayOfWeek) (int) Calendar1.FirstDayOfWeek;

    var currentDate = firstMonthDate.DayOfWeek == calendarFirstWeekDay ? firstMonthDate.AddDays(-7) : firstMonthDate.AddDays((int)firstMonthDate.DayOfWeek * -1);
    var lastDate = currentDate.AddDays(41);

    do
    {
        var events = GetCalendarEvents(currentDate);
        if (events.Count > 0)
        {
            DayControls.Add(currentDate, new List<Control>());
        }

        foreach (var calendarEvent in events)
        {
            var lbl = new Label
                            {
                                BorderColor = System.Drawing.Color.Black,
                                BorderStyle = BorderStyle.Double,
                                BackColor = System.Drawing.Color.BlanchedAlmond,
                                Text = string.Format("{0}<br />{1:hh:mm:ss tt} -- {2:hh:mm:ss tt}", calendarEvent.Title, calendarEvent.Start, calendarEvent.End)
                            };
            DayControls[currentDate].Add(lbl);
            PlaceHolder1.Controls.Add(lbl);

            var btn = new Button
                            {
                                Text = "x",
                                ID = "DeleteEvent_" + calendarEvent.Id,
                                CommandName = "DeleteEvent",
                                CommandArgument = calendarEvent.Id
                            };

            DayControls[currentDate].Add(btn);
            PlaceHolder1.Controls.Add(btn);
            btn.Click += new EventHandler(btn_Click);

        }

        currentDate = currentDate.AddDays(1);
    } while (currentDate <= lastDate);
}

private void btn_Click(object sender, EventArgs e)
{
    var eventId = ((Button)sender).CommandArgument;
}

private List<CalendarEvent> GetCalendarEvents(DateTime dateTime)
{
    return new List<CalendarEvent>{
                    new CalendarEvent
                    {
                        Id = string.Format("{0:MMMddyyyy}Event" ,dateTime),
                        Start = dateTime.Date.AddHours(10),
                        End = dateTime.Date.AddHours(12),
                        Title = string.Format("{0:dd/MM} meeting", dateTime)
                    }};
} 
```

CalendarEvent 类存根：

```
public class CalendarEvent
{
    public string Id { get; set; }

    public DateTime Start { get; set; }

    public DateTime End { get; set; }

    public string Title { get; set; }
} 
```

# php - 使用 mysql 字段值填充饼图

> ID：12542791
> 
> 赞同：0
> 
> 时间：2012-09-22T10:02:43.053
> 
> 标签：php, mysql

有什么方法可以用 mysql 列值在 php 中创建、填充饼图？

我有一个名为 subject 的列，其中包含 40 个左右不同的值，我想创建一个饼图并显示前 10 个值。我已经尝试使用 rgraph 但根本无法让它工作，有没有更容易设置的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:45:26.023

您可以使用 ORDER BY 按值对列进行排序并从数据库中检索它们，然后在 PHP 中使用 for 循环获取前十个并将它们保存到数组中。然后，您可以从您的数组中填充一个 javascript 饼图。

# php - php 替代extendAccessTokenIfNeeded

> ID：12542794
> 
> 赞同：0
> 
> 时间：2012-09-22T10:02:57.640
> 
> 标签：php, facebook, facebook-graph-api

我创建了一个 facebook 应用程序，并检索了有效期为 60 天的用户 access_token。

在android中有一些东西

> 公共无效 onResume() {
> super.onResume(); facebook.extendAccessTokenIfNeeded(this, null); }

如果 accesstoken 即将过期，这将扩展它。**PHP**中是否有类似的替代方案？这样 60 天后令牌会刷新，而不要求用户再次登录 Facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:18:51.810

# jquery - 如何显示多个手动打开的 fancybox 画廊？

> ID：12542795
> 
> 赞同：0
> 
> 时间：2012-09-22T10:02:59.133
> 
> 标签：jquery, fancybox

我正在尝试使用 fancybox 显示多个手动调用的图像库。我可以让一个画廊工作，但第二个将无法打开。这是代码：

JAVASCRIPT

```
 $(document).ready(function() {
            $('.fancybox').fancybox();

            /* MANUAL OPEN */
            $("#fancybox-manual-c").click(function(){
            $.fancybox.open([
                {
                    href : 'image1.jpg',
                    rel : 'set01',
                    title : 'My title'
                }, {
                    href : 'image2.jpg',
                    rel : 'set01',
                    title : '2nd title'
                }, {
                    href : 'image3.jpg',
                    rel : 'set02',
                    title : '3rd title'
                }, {
                    href : 'image4.jpg',
                    rel : 'set02',
                    title : '4th title'
                }
            ]);
        });
        /* END OF MANUAL OPEN */
        }); 
```

HTML

```
 <div>
                    <a id="fancybox-manual-c" rel="set01" href="javascript:;"><img src="thumbnail01.jpg"></a>
               </div><!-- END OF PICTURE THUMBS -->
               <div><hr /></div>
               <div>
                    <a id="fancybox-manual-c" rel="set02" href="javascript:;"><img src="thumbnail02.jpg"></a>
               </div><!-- END OF PICTURE THUMBS --> 
```

我最终想以某种方式调用图像，这样我就不必每次上传图片时都向文件添加代码行，但到目前为止，我什至很难让两个实例正常工作。

请注意，我正在使用fancybox，页面上的其他链接按原样运行，并且在同一页面上，我也毫无问题地调用YouTube视频，我还尝试了一些更受欢迎的问题，这里没有答案成功。

另外，我很确定我在复制该 JS 代码的部分时犯了一个错误——所以关于最后的右括号的任何错误都是拼写错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:08:52.567

您应该尝试更改 id 值。将它们与外部 div 或具有相同的类名分组。

[如何通过手动调用 html 中的画廊而不是通过 jquery 选项打开fancybox？](https://stackoverflow.com/questions/10835849/how-do-i-open-fancybox-via-manual-call-for-a-gallery-in-the-html-not-via-the-jqu)

该链接可能会对您有所帮助。

# php - 最好用我的日期案例在 PHP 中处理大型数组

> ID：12542796
> 
> 赞同：0
> 
> 时间：2012-09-22T10:03:01.530
> 
> 标签：php, arrays, date, data-processing

我在 PHP 中有一个大数组，大约有 168000 个键和值。键中有日期（Ymd）和小时，值中有数值。所以 value 只是一个数字。密钥为 Ym-d_H 格式。数组如下所示：

```
$input = array('2008-01-01_00' => 123, '2008-01-01_01' => 456, ...... , '2012-09-22_16' => 789); 
```

我需要找到上个月、去年、当年、当月等的总和。找到它的最佳方法是什么？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:13:30.757

将键更改为整数，例如

'2008-01-01_00' -> 2008010100

使用 ksort() 对数组进行排序

然后，您可以使用快速搜索查找 2008010100 和 2009010100 之间的内容。

此外，Fastest 是遍历数组一次并计算您需要的所有统计信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:15:59.490

将其分解为可管理的执行单元并将它们线程化...

[http://pthreads.org/](http://pthreads.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:09:29.463

那这个呢：

```
$results=array();

foreach ($input as $k=>$v) {

  $date=explode('_',$k);
  $date=explode('-',$date[0]);

  //Store year
  $key=$date[0];
  if (!isset($results[$key])) $results[$key]=0;
  $results[$key]+=$v;

  //Store month
  $key.='-'.$date[1];
  if (!isset($results[$key])) $results[$key]=0;
  $results[$key]+=$v;

  //Store day
  $key.='-'.$date[2];
  if (!isset($results[$key])) $results[$key]=0;
  $results[$key]+=$v;
}

print_r($results); 
```

# python - 在 Python 中与 USB 设备通信

> ID：12542799
> 
> 赞同：4
> 
> 时间：2012-09-22T10:03:21.060
> 
> 标签：python, usb, libusb

我想与 USB 设备通信并将数据发送到 USB 设备。我能够找到该设备，但是在将设备与它提供的内核驱动程序连接时`USB Error: Resource Busy`。以下是我的代码：

```
import usb

dev = usb.core.find(idVendor=0x0403, idProduct=0x6001)
dev.set_configuration()

cfg = dev.get_active_configuration()

dev.attach_kernel_driver(interface)

interface_number = cfg[(0, 0)].bInterfaceNumber
alternate_settting = usb.control.get_interface(interface_number)
intf = usb.util.find_descriptor(
    cfg, bInterfaceNumber=interface_number,
    bAlternateSetting=alternate_setting)

ep = usb.util.find_descriptor(
    intf, custom_match=lambda e:
    usb.util.endpoint_direction(e.bEndpointAddress) == usb.util.ENDPOINT_OUT)

dev.detach_kernel_driver(interface)

ep.write("\r" + linea1[:19] + "\n\r" + " " * (20 - len(linea2)) + linea2) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T10:59:01.853

假设您使用 Linux 并`libusb-1.0`作为`PyUSB`的后端库。

根据[libusb 文档](http://libusb.sourceforge.net/api-1.0/group__dev.html)：

```
// Detach a kernel driver from an interface.
// If successful, you will then be able to claim the interface and perform I/O.
int libusb_detach_kernel_driver (libusb_device_handle *dev, 
                                 int interface_number)  

// Re-attach an interface's kernel driver, which was previously 
// detached using libusb_detach_kernel_driver().
int libusb_attach_kernel_driver(libusb_device_handle *dev,
                                int interface_number) 
```

因此，基本上，您需要先调用`detach_kernel_driver` **以**从设备接口中分离已连接的内核驱动程序（如果有），以便您可以在代码中与它通信（它是您的代码或某些内核驱动程序与设备接口通信）。完成后，您可能需要再次调用`attach_kernel_driver`重新附加内核驱动程序。

如果您可以确保没有为给定设备加载内核驱动程序（或在运行代码之前手动卸载它），我相信没有必要调用任何这些 C 函数/Python 方法。

**编辑：**

我刚刚得到了这段代码（基于你的示例）工作。注意：为简单起见，我将 0 硬编码为`detach_kernel_driver`和的接口编号`attach_kernel_driver`- 我想你应该让它更聪明。

```
import usb

dev = usb.core.find(idVendor=0x0403, idProduct=0x6001)

reattach = False
if dev.is_kernel_driver_active(0):
    reattach = True
    dev.detach_kernel_driver(0)

dev.set_configuration() 
cfg = dev.get_active_configuration() 

interface_number = cfg[(0,0)].bInterfaceNumber 
alternate_settting = usb.control.get_interface(dev, interface_number) 
intf = usb.util.find_descriptor(cfg, bInterfaceNumber = interface_number, 
                            bAlternateSetting = alternate_settting) 

ep = usb.util.find_descriptor(intf,custom_match = \
      lambda e: \
    usb.util.endpoint_direction(e.bEndpointAddress) == \
    usb.util.ENDPOINT_OUT) 
ep.write("test\n\r")

# This is needed to release interface, otherwise attach_kernel_driver fails 
# due to "Resource busy"
usb.util.dispose_resources(dev)

# It may raise USBError if there's e.g. no kernel driver loaded at all
if reattach:
    dev.attach_kernel_driver(0) 
```

# python - 使用 insort(lst,ele) 时函数不返回值

> ID：12542801
> 
> 赞同：1
> 
> 时间：2012-09-22T10:03:32.150
> 
> 标签：python

我正在使用 Bisect 函数在 python 中编写一个简单的集合抽象。这里的问题是，当我使用 insort 函数将数据添加到列表中时，该函数返回 None。但是当我使用 BISECT.BISECT(lst,ele) 时，该函数返回的值将是列表的索引，如果需要，可以在其中插入元素。

```
# Python program to implement collection abstraction
# using Bisect Algorithm
# The program would add an element into the SORTED LIST"
# which would be the input
# The program would test whether the element is in the collection
# And also, to return the element of the collection if it is there

from bisect import bisect
from bisect import insort_right

the_list = []

def add(lst,ele):

    return insort_right(lst,ele)

#def test(lst,ele)

#def remove(lst,ele):

print("Enter the size of the list:")
N = int(input())

for x in range(N):

    x = input("")    
    the_list.append(x)
    the_list.sort()

print(the_list)

print("Enter the element to be added in the list")
element = input("")

add_element = add(the_list,element)
print("The element is added in collection at location:", add_element) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:38:48.790

`insort`不返回值，因为它改变了列表本身。通常，以这种方式使用副作用的 Python 函数不会返回值。如果要从 中返回修改后的列表`add`，请执行以下操作：

```
def add(lst, ele):
    insort_right(lst, ele)
    return lst 
```

但是这样做确实没有意义，因为返回的列表与传入的列表相同。调用上下文已经可以访问该列表，因此无需返回它，这样做有点不习惯。

# c# - 为什么 Math.Pow(x, 2) 没有优化到 x * x 既不是编译器也不是 JIT？

> ID：12542802
> 
> 赞同：8
> 
> 时间：2012-09-22T10:03:39.227
> 
> 标签：c#, .net, performance, optimization, jit

我在几个开源项目中遇到过非最佳代码，当时程序员不考虑他们在使用什么。

由于 Math.Pow 在内部使用 Exp 和 Ln 函数，两种情况之间的性能差异高达 10 倍，如何[在此答案](https://stackoverflow.com/questions/8870442/how-is-math-pow-implemented-in-net-framework/8870593#8870593)中进行解释。

在大多数情况下，通常的乘法比幂（小幂）要好，但最好的当然是[平方算法的指数](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)。

因此，我认为编译器或 JITter 必须使用权力和其他功能执行此类优化。为什么还没有介绍？我对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T10:14:33.977

再次阅读您引用的anwser，它明确指出CRT使用`pow()`微软从英特尔购买的功能。您看到`Math.Log`的`Math.Exp`示例是本文作者在编程书中找到的示例。

一般取幂方法的“问题”是它们的构建是为了在*所有*情况下产生最准确的结果。对于某些情况，这通常会导致次优性能。为了提高这些特定情况的性能，必须添加条件逻辑，这会导致所有情况的性能损失。因为在没有该方法的情况下对一个值进行平方或立方运算很容易编写`Math.Pow`，因此无需优化这些情况并为所有其他情况承担额外的损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:37:34.273

我会说这不是一个好主意，因为这两种方法每次都不会返回相同的结果。

这是一个小测试脚本

```
 var r = new Random();

        var any = Enumerable.Range(0, 1000).AsParallel().All(p =>
            {
                var d = r.NextDouble();

                var pow = Math.Pow(d, 2.0);
                var sqr = d * d;

                var identical = pow == sqr;
                if (!identical)
                    MessageBox.Show(d.ToString());

                    return identical;
            }); 
```

两种实现的精度不同。如果进行了可靠的计算，它应该是可重现的。例如，如果仅在发布实现中使用方形优化，则调试和发布版本将返回不同的解决方案。这对于错误调试来说可能是一团糟......

# javascript - 使用 javascript 验证 youtube url，包括缩短的版本

> ID：12542805
> 
> 赞同：3
> 
> 时间：2012-09-22T10:03:52.867
> 
> 标签：javascript, jquery, validation, youtube-api

我需要使用适用于所有类型的 youtube 视频 url 的 javascript/jquery 验证 youtube 视频 URL，包括缩短的 youtu.be 版本。有很多关于如何执行此正则表达式的示例，但它们都没有包含缩短的版本。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:22:02.510

验证 YouTube 观看页面 URL（包括 youtu.be URL）的唯一受支持方法是使用 oEmbed：[http ://apiblog.youtube.com/2009/10/oembed-support.html](http://apiblog.youtube.com/2009/10/oembed-support.html)

# iphone - 使用 UIScrollView 从上到下滚动

> ID：12542809
> 
> 赞同：3
> 
> 时间：2012-09-22T10:04:09.997
> 
> 标签：iphone, objective-c, ios, xcode

我正在寻找一个仅显示 iPhone 中垂直滚动的示例。

*   Apple 提供的滚动示例允许从左到右滑动图像。

    1.  [示例链接](https://developer.apple.com/library/ios/#samplecode/Scrolling/Introduction/Intro.html)
    2.  [示例链接](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html)
*   我想让我的图像`top to bottom`像[Instagram App](http://www.youtube.com/watch?v=821f5Bic294&feature=related)一样滚动。

*   我对此进行了研究并发现了很多示例，但它们都显示了水平滚动。

    1.  [例子](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)
    2.  [例子](http://idevzilla.com/2010/09/16/uiscrollview-a-really-simple-tutorial/)
    3.  [例子](http://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html)

**有谁知道如何做到这一点？**

如果您向我发送指向教程的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T10:41:12.593

嗨，我用苹果代码解决了你的问题，

只需更改功能

```
- (void)layoutScrollImages
{
    UIImageView *view = nil;
    NSArray *subviews = [scrollView1 subviews];

    // reposition all image subviews in a horizontal serial fashion
    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(0,curXLoc);
            view.frame = frame;

            curXLoc += (kScrollObjHeight);
        }
    }

    // set the content size so it can be scrollable
    [scrollView1 setContentSize:CGSizeMake(([scrollView1 bounds].size.width),kNumImages * kScrollObjHeight)];
} 
```

或者如果你想要样品，我会给你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:21:43.463

为了您的目的，请参考您的链接：

[http://idevzilla.com/2010/09/16/uiscrollview-a-really-simple-tutorial/](http://idevzilla.com/2010/09/16/uiscrollview-a-really-simple-tutorial/)

有这样的代码：

```
scroll.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height); 
```

对于水平滚动，您需要将`width`of`contentSize`属性设置为比滚动视图的 f 更高的值`rame width`。同样，对于垂直滚动，您需要将`height`of`contentSize`属性设置为比滚动视图更高的值`frame height`。

[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

在上面的代码中，可以这样做：

```
scroll.contentSize = CGSizeMake(self.view.frame.size.width, numberOfViews * self.view.frame.size.height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T10:36:27.440

您可以使用以下代码从上到下滚动图像，反之亦然。！！

```
- (void)viewDidLoad
{
//....
UISwipeGestureRecognizer *recognizer;
//for scrolling up
    recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeUp)]; // calling method SwipeUp
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionUp)];
    [[self view] addGestureRecognizer:recognizer];

  //for scrolling down  
    UISwipeGestureRecognizer *recognizer1;
    recognizer1 = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeDown)]; //calling method SwipeDown
    [recognizer1 setDirection:(UISwipeGestureRecognizerDirectionDown)];
    [[self view] addGestureRecognizer:recognizer1];

} 
```

//初始化和合成 `IBOutlet UIImageView *bgImage;`

```
-(IBAction)SwipeUp
{

        [bgImage setImage:[UIImage imageNamed:@"yourImage1"] ];

          bgImage.opaque=YES;
    [self.view addSubview:bgImage];
}

-(IBAction)SwipeDown
{

        [bgImage setImage:[UIImage imageNamed:@"yourImage2"] ];

        bgImage.opaque=YES;
    [self.view addSubview:bgImage];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T10:19:33.653

我不知道我是否正确理解了您想要完成的任务，但基本上您可以使用 setContentOffset 设置滚动视图的位置。

```
CGPoint bottomOffset = CGPointMake(0, scrollView.contentSize.height - self.scrollView.bounds.size.height);
[scrollView setContentOffset:bottomOffset animated:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T11:10:19.757

*有几种方法可以做到这一点，例如：*

1.  将 UITableView 与自定义单元格一起使用
2.  添加 UIScrollingView 并添加内容/图像并根据数组中对象的数量增加滚动视图的高度。

**这是为图像创建 2*2 网格的代码片段：**

```
//Over here adding the image names into the Array
NSMutableArray *imageArray=[[NSMutableArray alloc]init];
    [Arr addObject:[UIImage imageNamed:@"image_1.png"]];
    [Arr addObject:[UIImage imageNamed:@"image_2.png"]];
    [Arr addObject:[UIImage imageNamed:@"image_3.png"]];
    [Arr addObject:[UIImage imageNamed:@"image_4.png"]];
    [Arr addObject:[UIImage imageNamed:@"image_5.png"]]; 
```

**// 初始化 ScrollView 并设置框架：**

```
scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0,320, 460)];
[scrollView setBackgroundColor:[UIColor clearColor]];
scrollView.showsHorizontalScrollIndicator = NO;
scrollView.showsVerticalScrollIndicator = NO;
int row = 0;
int column = 0;
for(int i = 0; i < imageArray.count; i++) {

    UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.backgroundColor=[UIColor clearColor];
    button.frame = CGRectMake(column*160+0,row*210+10, 160, 190);
    [button setImage:[imageArray objectAtIndex:i] forState:UIControlStateNormal];
    [button setBackgroundColor:[UIColor clearColor]];
    [button addTarget:self action:@selector(chooseCustomImageTapped:) forControlEvents:UIControlEventTouchUpInside];
    button.tag = i; 
    [view1 addSubview:button];

    if (column == 1) {
        column = 0;
        row++;
    } else {
        column++;
    }

}

[scrollView setContentSize:CGSizeMake(320, (row+1) * 210)];

[self.view addSubview:view1]; 
```

**//这是用于Tapping的方法：**

```
- (IBAction)chooseCustomImageTapped:(id)sender
{

} 
```

现在，一旦 scrollView 准备好进行垂直滚动，您就可以相应地进行自己的自定义。我希望这对你有用。

# php - php函数进 标签

> ID：12542811
> 
> 赞同：1
> 
> 时间：2012-09-22T10:04:50.787
> 
> 标签：php, function, html-lists

我想附加一个 php 函数，例如：`dtlan(text)`< 到 `<li>`标签中，但我有一个问题。我现在将显示我的代码和输出：

```
echo "<a href=/".$array['id']."><li id='menu_".$array['id']."'>"
     .dtlan($array['name'])."</li></a>"; 
```

**输出**必须是这样的：

```
<a href='/2'> <li id='2'>wazaap </li></a> 
```

实际输出为：

```
 wazaaap
    <a href='/2'><li id='2'></li></a> 
```

多数民众赞成在功能首先运行。现在我的问题是如何将函数插入标签。谢谢大家，对不起我丑陋的英语：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:09:54.423

我认为（或者我很确定）该函数不返回值，而是回显它。

因为在构建要回显的字符串的过程中调用了该函数。这意味着，在回显 html 时，该函数已经回显了它的值。这就是函数结果显示在 html 之前的原因。

要么让函数返回值而不是回显它：

```
function dtlan($x)
{
  // echo $x;  <- Not like this
  return $x; // But like this.
} 
```

或者这样做：首先回显第一部分。然后让函数回显它的部分。然后呼应结束部分。

```
echo "<a href=/".$array['id']."><li id='menu_".$array['id']."'>";
dtlan($array['name']);
echo "</li></a>"; 
```

如果你有选择，我会选择第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:26:37.160

PHP 使用您的 HTML 创建一个新字符串。解析从左到右进行，PHP 解析所有变量。然后它进入函数`dtlan`（将其推入堆栈）并`dtlan`似乎调用了 echo 并且不返回任何内容。空返回被转换成一个空字符串。

然后你的标记的其余部分被连接起来并传递给函数`echo`（它有一个特殊的语法，使得括号不是强制性的）。

echo 调用的结果顺序是：

```
echo("wazaaap");
echo("<a href='/2'><li id='2'></li></a>"); 
```

# asp.net-mvc - mvc4 项目中的 Intellisense 在 vs 2012 专业版中不起作用？

> ID：12542813
> 
> 赞同：5
> 
> 时间：2012-09-22T10:05:03.533
> 
> 标签：asp.net-mvc, razor, visual-studio-2012

在我看来，智能感知不起作用。有什么解决办法吗？我正在使用新发布的 VS 2012 Professional 并构建一个 ASP.NET MVC 4 项目。我剃刀观点中的智能感知不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T03:16:33.590

What helped me was to delete the .csproj.user file. Additionally, I have also deleted a who bunch of other things: packages, .suo file, bin/ and obj/, I also did devenv.exe /setup, and devenv.exe /resetsettings, but what helped, I think, was exactly that - deleting the .csproj.user file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:53:35.923

在任何项目上使用 RazorGenerator.Mvc 时，我都遇到了同样的问题。在 RazorGenerator.Mvc 进入游戏之前，创建一个全新的 MVC4 项目运行良好。原因很可能是其他原因。

对我来说，检查 MVC4 项目是否使用带有 NuGet 的最新版本的 MVC4 是解决它的方法。

转到包管理员并搜索 MVC。你会发现微软的 MVC4 有两个可用的包，一个叫“Microsoft ASP.NET MVC 4”，另一个叫“ASP.NET MVC 4”，而且恰好两者的版本号相同：4.0.20710.0

其中一个（非微软的）说“旧包”，但很可能是您的项目正在使用的那个。在所有项目上使用 NuGet 卸载该软件，然后安装“Microsoft ASP.NET MVC 4”包。

关闭并重新打开屏幕中的每个 cshtml 视图，然后重新打开一些（您可能需要等待一两分钟才能突出显示）。如果五分钟后语法突出显示未显示，请关闭并重新打开 Visual Studio 2012。

（使用 Visual Studio 2012 Premium 试用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T10:09:13.483

**在此发行说明**帖子中从 MVC3 升级到 MVC4 时，您可能会遇到“已知问题和重大更改”部分中介绍的问题。

按照[“安装 ASP.NET MVC 4 中断 ASP.NET MVC 3 RTM 应用程序”](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)部分中的说明解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T09:28:33.007

我在工作解决方案中遇到了同样的问题。然而 Intellisense 仍在为 VS 向导创建的新 mvc4 项目工作。当我将我的 csproj 文件与新的 csproj 文件进行比较时，我提到对于所有引用的 mvc 程序集都设置了选项 SpecificVersion = true 并复制 local = true。所以我对我的项目做了同样的事情，问题就消失了。

# c++ - 需要一个关于如何使用 QThreadPool 的工作示例

> ID：12542815
> 
> 赞同：3
> 
> 时间：2012-09-22T10:05:19.017
> 
> 标签：c++, qt, qt-creator, qtwebkit

我想使用多线程 webkit`QThreadPool`

我的代码是：

**webkitrunnable.cpp：**

```
webkitRunnable::webkitRunnable(QUrl inputURL) : url(inputURL)
{
    init();
}

void webkitRunnable::run()
{
    qDebug() << "run ...";
    qDebug() << "webkit runnable --> " << url;

    loadPage(url);
}

void webkitRunnable::init()
{
    qDebug() << "WebKit--> init webkit";
    webView = new QWebView;

    connect(webView, SIGNAL(loadFinished(bool)), SLOT(finishLoading(bool)));

    manager = new QNetworkAccessManager(this);

    manager = webView->page()->networkAccessManager();

    webView->page()->setNetworkAccessManager(manager);

    connect(manager, SIGNAL(finished(QNetworkReply*)),this, SLOT(replyFinished(QNetworkReply*)));
}

void webkitRunnable::finishLoading(bool)
{
    qDebug() << "WebKit--> finish loading";
}

void webkitRunnable::replyFinished(QNetworkReply* Reply)
{
    qDebug() << "WebKit--> reply Finished";
}

void webkitRunnable::loadPage(QUrl url)
{
    qDebug() << "WebKit--> load Page";
    webView->load(url);
    webView->setFocus();
} 
```

**webkitrunnable.h：**

```
class webkitRunnable : public QObject, public QRunnable
{
    Q_OBJECT

public:
    webkitRunnable(QUrl inputURL);

    void loadPage(QUrl url);

protected:
    void run();

signals:

public slots:
    void finishLoading(bool);
    void replyFinished(QNetworkReply*);

private:
    void    init();

    QUrl                    url;
    QNetworkAccessManager   *manager;
    QWebView                *webView;
}; 
```

**我的线程.cpp：**

```
MyThread::MyThread(QObject *parent) :
    QObject(parent)
{
    threadPool = new QThreadPool(this);
    threadPool->setMaxThreadCount(20);

    webkit = new webkitRunnable(QUrl("http://www.google.com/"));
}

MyThread::~MyThread()
{
    delete threadPool;
}

void MyThread::startMultiThreadLoad(QUrl url)
{
    webkit = new webkitRunnable(url);

    connect(webkit, SIGNAL(threadFinished(int)), this, SLOT(finished(int)), Qt::QueuedConnection);

    for (int i = 0; i < threadPool->maxThreadCount(); i++)
    {
        threadPool->start(webkit);
        qDebug() << "start(active):" << threadPool->activeThreadCount();
    }
}

void MyThread::finished(int number)
{
    qDebug() << "thread number is: " << number;
    qDebug() << "finished(active):" << threadPool->activeThreadCount();
} 
```

我的线程.h：

```
class MyThread : public QObject
{
    Q_OBJECT
public:
    explicit MyThread(QObject *parent = 0);
    ~MyThread();
    void startMultiThreadLoad(QUrl url);

public slots:
    void finished(int);

private:
    webkitRunnable* webkit;
    QUrl            globalURL;

    QThreadPool     *threadPool;
}; 
```

每当`webkit->load()`执行时，我在 Qt Creator 中得到以下应用程序输出：

```
QObject: Cannot create children for a parent that is in a different thread.
(Parent is QNetworkAccessManager(0x6f1598), parent's thread is QThread(0x65dfd0), current thread is QThread(0x6ccd28) 
```

我该如何解决？谁能举个例子？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:04:37.490

我建议你看看

[http://wiki.qt.io/Threads_Events_QObjects](http://wiki.qt.io/Threads_Events_QObjects)

注意线程之间的 QObjects 所有权。

# c++ - 模板 ，希望得到解释

> ID：12542816
> 
> 赞同：3
> 
> 时间：2012-09-22T10:05:24.720
> 
> 标签：c++, templates, void-pointers

我正在读一本书，其中那个人制作了一个链表，他创建了一个这样的类

```
template < class extra_info = void*>
class NavGraphNode : public GraphNode
{
protected:
//the node's position
Vector2D m_vPosition;

extra_info m_ExtraInfo;
public:
/*INTERFACE OMITTED */
}; 
```

他解释说，extra_info 可以是例如一个枚举值或指向与该节点配对的实例的指针。但我不太了解第一行，例如阅读 [http://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/) 似乎如果您指定类型（为什么不指定 void* extra_info？）那么为什么使用首先是模板？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:08:47.130

`= void*`是默认模板参数。即，如果您在使用模板时没有指定类型`void*`。将使用作为额外信息`NavGraphNode<> n;`来实例化模板。`void*`

但是，您可以显式指定类型，然后使用此类型。例如，您可以使用`NavGraphNode<int>`将整数作为额外信息添加到您的图形节点。您还可以使用整个结构或指向这些结构的指针来向节点添加更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:12:02.443

`NavGraphNode`如果有人想在类中存储额外的信息并且可以指定他们想要存储的信息类型，这是一种扩展点。

```
NavGraphNode<bool> visitedNavGraphNode; 
```

如果此类的客户端对存储任何附加信息不感兴趣，则客户端可以简单地忽略并创建一个普通实例，如下所示：

```
NavGraphNode<> simpleNavGraphNode; 
```

# asp.net-mvc - Fluent Validation 与默认的 .NET Data Annotations 相比有什么优势

> ID：12542819
> 
> 赞同：6
> 
> 时间：2012-09-22T10:05:57.150
> 
> 标签：asp.net-mvc, data-annotations, fluentvalidation

FluentValidation 库与 .NET System.ComponentModel.DataAnnotations 相比有什么优势？

它是否提供更灵活的验证，因为它没有在属性上进行注释（静态字段验证），例如根据另一个属性值验证属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:13:58.490

我不确定数据注释，但我们已将 FluentValidation 用于业务逻辑中的验证部分。与 ASP.NET MVC 轻松集成是不错的奖励 :)

它支持许多内置规则，错误消息本地化，在错误消息中使用对象数据，自定义验证方法，条件验证 - 如果对象数据匹配条件，则应用一些规则，规则集 - 应用命名规则集，验证聚合对象和集合 - 以及属性名称将与 ASP.NET MVC 属性名称等兼容。

# cuda - cudaArray 简单示例——如何分配一维数组？

> ID：12542822
> 
> 赞同：1
> 
> 时间：2012-09-22T10:06:16.033
> 
> 标签：cuda

如何分配`cudaArrays`？我对分配一维数组特别感兴趣。配置后如何访问简单的元素呢？我阅读了`CUDA`编程指南，但没有完全理解。任何人都可以用示例代码解释一下。推荐使用 cuda1Darray 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:37:12.977

cudaArrays 是特殊结构，针对纹理获取进行了优化。您可以按如下方式分配一维 cudaArray：

```
 cudaArray* arr;

      //Create Channel Descriptor. float is just for example. Change it to required data type.
      cudaChannelFormatDesc channel = cudaCreateChannelDesc<float>();

      //Allocate Memory
      cudaMallocArray(&arr,&channel,Number_Of_Elements, 1,cudaArrayDefault); 
```

宽度和高度是 x 和 y 方向上的元素数。

在内核中，可以使用`tex1D`or`tex2D`函数访问这个数组的元素。cudaArrays 只能使用这些函数在设备代码中读取。

# inheritance - 如何使用：1\. ISerializable 与 Serializer.Merge/Serialize & 2\. ProtoInclude 与 RuntimeTypeModel.Default？

> ID：12542830
> 
> 赞同：2
> 
> 时间：2012-09-22T10:07:48.203
> 
> 标签：inheritance, serialization, protocol-buffers, protobuf-net, iserializable

我将我的项目翻译为使用 protobuf-net 而不是 BinaryFormatter。看起来缺少文档[http://code.google.com/p/protobuf-net/w/list我还从](http://code.google.com/p/protobuf-net/w/list)[http://code.google.com/p/protobuf-net](http://code.google.com/p/protobuf-net/source/browse/) 查找了一些示例[/source/browse/](http://code.google.com/p/protobuf-net/source/browse/) 但是有些事情对我来说仍然不清楚，这就是我决定在这里问的原因：

**1.关于ISerializable和Serializer.Merge/Serialize**

如果我们从 ISerializable 继承来进行特定的序列化。正如我从：[ProtoBuf-Net ProtoInclude Generic Type Subclass](https://stackoverflow.com/questions/9408133/protobuf-net-protoinclude-generic-type-subclass)中读到的， 我们必须使用钩子 Serializer.Merge/Serialize;

假设我们有类：

```
[Serializable]
[ProtoContract]
public class Anchor : ISerializable
{       
    [ProtoMember(1)]
    public int id;

    [ProtoMember(2)]
    public Ship ship;
    ...
 } 
```

*Serializer.Merge(info, this)* ; 必须添加到构造函数*Anchor(SerializationInfo info, StreamingContext context)*

和 *Serializer.Serialize(info, this);* 添加到*void GetObjectData(SerializationInfo info, StreamingContext context)*

所以，我们有：

```
 protected Anchor(SerializationInfo info, StreamingContext context)
    {
        //for binaryformatter:            
        Type myType = typeof(Anchor);
        foreach (SerializationEntry e in info)
        {
            FieldInfo f = myType.GetField(e.Name,BindingFlags.NonPublic|BindingFlags.Public|BindingFlags.Public|BindingFlags.Instance);
            f.SetValue(this,e.Value);
        }

        //added for protobuf-net:
        Serializer.Merge(info, this);
   }

    public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        //for binaryformatter:
        foreach (FieldInfo f in typeof(Anchor).GetFields(BindingFlags.NonPublic|BindingFlags.Public|BindingFlags.Instance))
        {
            if ((f.Attributes&FieldAttributes.NotSerialized)==0)
                info.AddValue(f.Name,f.GetValue(this));
        }

       //added for protobuf-net:
        Serializer.Serialize(info, this);
    } 
```

**问题：** 这是正确的吗？（“信息”被序列化程序覆盖？即 binaryformatter 将无法正常工作？目前我只是尝试使用 protobuf-net，我更愿意让 binaryformatter 也能正常工作）

**2.关于使用ProtoInclude和RuntimeTypeModel.Default**

假设我们有作为*类基础的 Message*类：*Ack 类、HandshakeClientInfo 类... Command 类*。如果我们想序列化 Message 的子类，正如我所读到的那样：[protobuf-net 的 [ProtoInclude(1, "MyClass")] 不起作用](https://stackoverflow.com/questions/7585638/protobuf-nets-protoinclude1-myclass-did-not-work) ，我们应该使用 ProtoInclude （“告诉”基类：关于它的子*类的消息类*）以防万一如果我们在编译时知道子类型 - 没关系。

对于那些我们在编译时无法确定的类型（因为它在另一个项目中），我们应该使用**RuntimeTypeModel.Default[typeof(Message)].AddSubType(207, typeof(Command));** 或使用 Type.AssemblyQualifiedName: *[ProtoInclude(207, "Trainer.Commands.Command, Simulator, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")]*

```
[Serializable]
[ProtoContract]
[ProtoInclude(200, typeof(Ack))]
[ProtoInclude(201, typeof(HandshakeClientInfo))]
[ProtoInclude(202, typeof(HandshakeReadyToSimulation))]
[ProtoInclude(203, typeof(FileMessage))]
[ProtoInclude(204, typeof(HandshakeResponse))]
[ProtoInclude(205, typeof(Sync))]
[ProtoInclude(206, typeof(HandshakeSimulationStart))]    

public abstract class Message {

    [ProtoMember(1)]
    public byte Sender;
...
} 
```

我使用 protobuf-net v2 (r580) 和带有*RuntimeTypeModel.Default[typeof(Message)].AddSubType(207, typeof(Command)) 的变体；*似乎更可取。

**问题：** 但我不明白它应该放在代码中的什么位置？在构造函数或....？可以同时使用*ProtoInclude*和*RuntimeTypeModel.Default*吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T20:01:59.140

首先，我需要非常清楚 protobuf-net 和`ISerializable`. 首先，`ISerializable`仅由 使用`BinaryFormatter`。protobuf-net 永远不会寻找这个接口，也永远不会直接使用这个接口。所以，你可能会问，为什么 protobuf-net 甚至会提到这个？

答：因为有些人有*需要*使用的现有代码`BinaryFormatter`，但想在内部使用其他东西。一个很好的例子可能是使用远程处理的现有代码。在这里， protobuf -net 可以用来*实现* . 典型用法如下：`ISerializable``BinaryFormatter`

```
protected Anchor(SerializationInfo info, StreamingContext context)
{
    Serializer.Merge(info, this);
}

public virtual void GetObjectData(SerializationInfo info,
    StreamingContext context)
{
    Serializer.Serialize(info, this);
} 
```

然后在内部使用 protobuf-net；protobuf-net 将序列化对象（和任何子数据），并将数据存储在单个字段中；在反序列化期间，它将扭转这一点。该`ISerializable`接口不用于向 protobuf-net 添加附加信息。在大多数情况下，如果您想**分别**支持 protobuf-net*和* `BinaryFormatter`，那么`Serializer`在构造函数/ 中将没有 /protobuf-net 代码`GetObjectData`，您也不需要对`ISerializable`您已经拥有的任何现有实现进行任何更改（或不）。这仅适用于您想要*从内部*更改工作方式的*非常特定的场景*`BinaryFormatter`*. 在这种情况下，您通常会将完全控制权交给 protobuf-net。*

 ** * *

对于您关于子类型的问题；是的，您可以`[ProtoInclude]`与`RuntimeTypeModel.Default`. 基本上，默认情况下（可以调整），protobuf-net 第一次看到一个类型时，它会检查属性。如果有的话，它将使用这些属性来配置模型。但是，您仍然可以对配置进行任何所需的更改，*直到*它必须序列化/反序列化该类型，此时它将配置信息烘焙到执行工作的策略中。一旦它决定了一个策略，它就不喜欢你改变配置。

因此，配置模型的最佳时间是：在应用启动时。或者至少，在你开始做任何有趣的事情之前。为了完整起见，我应该注意，如果您想完全手动配置模型，您也可以要求它忽略属性（这很少见）。

所以你的线：

```
RuntimeTypeModel.Default[typeof(Message)].AddSubType(207, typeof(Command)); 
```

在应用程序启动时会很好。

在某些（罕见的）情况下，您可能会在很久以后才发现新类型。由于各种非常复杂的原因，在您开始序列化之后允许更改现有模型并不是很实际，但是：`RuntimeTypeModel.Default`只是*一个默认实例*。在一些更高级的场景中，您*可能*想要做的是维护*自己的*模型，然后根据需要配置一个新*的知识更丰富*的模型。因此，`RuntimeTypeModel.Default`您可以使用，而不是使用：

```
static RuntimeTypeModel serializer = TypeModel.Create(); 
```

然后稍后，您可以配置新设置：

```
var workInProgress = TypeModel.Create();
// TODO: add whatever you need here
serializer = workInProgress; 
```*

# android - 在哪里声明很多常量对象？

> ID：12542831
> 
> 赞同：0
> 
> 时间：2012-09-22T10:07:58.710
> 
> 标签：android

这可能看起来像一个愚蠢的问题，但我实际上有对象 - 我们称对象为“鸡尾酒” - 其中包含一定数量的字段，如鸡尾酒名称、成分列表、食谱等......所以基本上我想要要做的是在我的应用程序需要时提供我的鸡尾酒列表，但我真的不知道如何存储它们。我想在 Android 字符串数组中声明所有鸡尾酒，如下所示：<

```
?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array
        name="first_cocktail_name">
        <item>ingredient1</item>
        <item>ingredient2</item>
        <item>ingredient3</item>
        <item>recipe</item>
    </string-array>
    <string-array
        name="second_cocktail_name">
        <item>ingredient1</item>
        <item>ingredient2</item>
        <item>ingredient3</item>
        <item>recipe</item>
    </string-array>
</resources> 
```

依此类推，但问题是我没有声明项目密钥的可能性，因此检索所有信息会有点乏味，例如，如果不同鸡尾酒之间的成分数量不同，索引检索将不起作用......我'我不喜欢在应用程序启动时直接在代码中对所有鸡尾酒对象进行硬编码，所以我真的不知道该怎么做......知道吗？

谢谢 ！

# java - TCP 消息未收到超过 1 次

> ID：12542833
> 
> 赞同：1
> 
> 时间：2012-09-22T10:08:19.523
> 
> 标签：java, tcp, client

```
class SomeUI     
{ 
SocketMessageSender messageSender; 
// ensure that its initialized ... 
private void bSendMessageActionPerformed(java.awt.event.ActionEvent evt) {
        try {
            // TODO add your handling code here:
            messageSender.sendMessage(jMessage.getText()); 
            jMessage.setText("");
        } catch (IOException ex) {
            Logger.getLogger(TeKServer.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
} 
```

错误：线程“AWT-EventQueue-0”中的异常 java.lang.RuntimeException：无法编译的源代码 - 错误的 sym 类型：bSendMessageActionPerformed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:02:54.740

为什么每次单击按钮时都要打开套接字并关闭它。创建一个类，允许您在应用程序运行期间保持套接字打开。应用启动时就可以进行socket连接了，可以试试下面的类

```
public class SocketMessageSender
{
    private String host;
    private int port;
    private DataOutputStream dos;

    public SocketMessageSender(String host, int port)
    {
        this.host = host;
        this.port = port;
    }

    // call when application starts
    public void initConnection() throws IOException
    {
        InetAddress address = InetAddress.getByName(host);
        Socket connection = new Socket(address, port);
        dos = new DataOutputStream(connection.getOutputStream());
    }

    //call from button click
    public void sendMessage(String message) throws IOException
    {
        if(dos != null)
        {
            dos.writeUTF(message);
            dos.flush();
        }
    }

    // call when application exits
    public void closeConnection() throws IOException
    {
        if(dos!= null)
        {
            dos.close();
        }
    }
} 
```

希望能帮助到你 ...

假设你有一个像

```
class SomeUI
{
   SocketMessageSender messageSender;
   // ensure that its initialized ...

 private void bSendMessageActionPerformed(java.awt.event.ActionEvent evt) {
    messageSender.sendMessage(jMessage.getText());
    jMessage.setText("");
 }
} 
```

我认为类签名应该是这样的......

```
public class MyPanel extends JPanel implements ActionListener
{
    private SocketMessageSender messageSender;
    private Message jMessage = new Message();// This is just a temp class, replace this with your class

    public MyPanel()
    {
        messageSender = new SocketMessageSender("some host", 8080);
        try
        {
            messageSender.initConnection();
        }
        catch(IOException e)
        {
             Logger.getLogger(MyPanel.class.getName()).log(Level.SEVERE, null, e);
        }
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        try {
            // TODO add your handling code here:
            messageSender.sendMessage(jMessage.getText()); 
            jMessage.setText("");
        } catch (IOException ex) {
            Logger.getLogger(MyPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:16:47.200

考虑使用 ObjectOutputStream/ObjectInputStream 并通过套接字写入对象。java2s.com 上有很多例子

请注意，如果您多次写入同一个对象，则需要在写入之前 reset() 流，并在之后刷新。

# function - 计算输入函数值的程序

> ID：12542835
> 
> 赞同：1
> 
> 时间：2012-09-22T10:08:28.013
> 
> 标签：function

我在作业中遇到了一个问题。我的作业是关于编写一个程序来近似输入函数的解决方案（`f(x) = 0`例如：形式`x*sinx -2 = 0`）。当然，函数的概念实在是太庞大了，我的老师把它限制在由连续的基本子函数组成的基本函数，如`sin`, `cos`, `log`, 指数, 平方根...我打算用遗传算法来解决这个问题，但是如何我可以在某些变量值处计算此函数吗？因为函数是用户输入的，所以是字符串的形式。例如，该函数可能非常复杂，以至于难以计算

```
f(x) = 1/(x-2) + sin (sqrt (1/x  + 1))... 
```

# c++ - 合并排序中的动态内存分配

> ID：12542840
> 
> 赞同：0
> 
> 时间：2012-09-22T10:08:35.710
> 
> 标签：c++, sorting, pointers, dynamic, merge

我写了一个合并排序程序（我写了基本算法）——它工作得很好。但是，由于我必须从一个非常大的文件中读取整数，所以我想在递归调用中动态声明数组。因此我写了以下代码，但是它给了我一些错误，你能帮我确定我在哪里犯了错误吗？

该程序实际上是计算数组中反转的数量（如果 i < j 和 arr[i]>arr[j] ，那么这是一个反转）。我编写的程序如下：我不想每次进行递归调用时都在堆栈上声明一个包含 10000 个整数的数组

我得到的错误是：std::bad_alloc at memory location 0x004dd940 ..我已经编辑了这个问题，所以它包含了错误消息。执行中断，Visual Studio 进入调试模式并打开文件 osfinfo.c

```
 #include<stdio.h>
    #include <iostream>
    using namespace std;
    unsigned int mixAndCount(int * arr,int low, int mid,int high) {
        int *num = new int[high-low+1];// THIS IS WHERE THE ERROR OCCURS
        int l = low ;
        int r = mid+1;
        unsigned int count=0;
        int i =low;

        while((l<=mid)&&(r<=high))
     {
      if(arr[l]<=arr[r])
      {
       num[i]=arr[l];
       l++;

      }
      else
      {
      num[i]=arr[r];
       r++;
       count=count + (mid-l+1);

      }
      i++;
         }
     if(l>mid)
     {
      for(int k=r;k<=high;k++)
      {
       num[i]=arr[k];
       i++;
        }
     }
     else
     {
      for(int k=l;k<=mid;k++)
      {
       num[i]=arr[k];
       i++;
        }
     }
     for(int k=low;k<=high;k++) arr[k]=num[k];
delete[] num;    
return count;
    }

    unsigned int mergeAndCount(int * arr, int low , int high ) {
        if(low>=high) {
        return 0;
        }
        else {
            int mid = (low+high)/2;

            unsigned int left = mergeAndCount(arr, low , mid);
            unsigned right = mergeAndCount(arr, mid+1, high);
            unsigned int split = mixAndCount(arr, low , mid , high);
            return left+right+split;

        }

    }
    int main ()
    {
        int  numArr[100000];
        FILE * input = fopen("IntegerArray.txt", "r");
        int i =0;
        while(!feof(input)) {
            int num;
        fscanf(input, "%d", &num);
        numArr[i] = num;
        i++;
        }
        fclose(input);
        unsigned int count = mergeAndCount(numArr,0, i-1  );
        cout<<count<<endl;
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T10:15:18.010

```
 std::bad_alloc at memory location 0x004dd940.. 
```

`new`无法成功分配请求的内存时抛出的异常。

```
int *num = new int[high-low+1]; 
```

请求的内存大小似乎太大，这意味着您需要跟踪`high`,的值`low`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:16:13.487

注意动态内存分配。它真的很慢。在您将代码保留在此表单中之前，请考虑两次。您可以制作一个简单的测试用例`std::chrono`

[http://en.cppreference.com/w/cpp/chrono/duration](http://en.cppreference.com/w/cpp/chrono/duration)

您不需要动态分配，一切都在一个本地命名空间中完成。

# c# - 阻止 ac# 控制台应用程序退出的最终代码 [直到自定义清理代码完成]

> ID：12542846
> 
> 赞同：2
> 
> 时间：2012-09-22T10:09:28.277
> 
> 标签：c#, .net, console-application, shutdown, resource-cleanup

我们可以一起努力想出一些适用于 control-c、control-break、注销、按下窗口 X 按钮等的东西吗？

这是我到目前为止所拥有的：

```
class Program
{  
    private static ConsoleEventHandlerDelegate consoleHandler;
    delegate bool ConsoleEventHandlerDelegate(CtrlTypes eventCode);

    static void Main(string[] args)
    {
        consoleHandler = new ConsoleEventHandlerDelegate(ConsoleCtrlCheck);
        SetConsoleCtrlHandler(consoleHandler, true);

        System.Diagnostics.Process.GetCurrentProcess().Exited 
           += delegate(object sender, EventArgs e) 
        {              
            GeneralManager.Stop();
        };

        Console.CancelKeyPress += delegate(object sender,
                                ConsoleCancelEventArgs e)
        {
            e.Cancel = false;
            GeneralManager.Stop();
        };

        GeneralManager.Start();
    }

    private static bool ConsoleCtrlCheck(CtrlTypes ctrlType)
    {
        switch (ctrlType)
        {                
            case CtrlTypes.CTRL_C_EVENT:

                Console.WriteLine("CTRL+C received!");
                GeneralManager.Stop();
                break;

            case CtrlTypes.CTRL_BREAK_EVENT:
                isclosing = true;
                Console.WriteLine("CTRL+BREAK received!");
                GeneralManager.Stop();
                break;

            case CtrlTypes.CTRL_CLOSE_EVENT:

                Console.WriteLine("Program being closed!");
                GeneralManager.Stop();
                break;

            case CtrlTypes.CTRL_LOGOFF_EVENT:
            case CtrlTypes.CTRL_SHUTDOWN_EVENT:

                Console.WriteLine("User is logging off!");
                GeneralManager.Stop();
                break;                           
        }
        return true;
    }

    #region unmanaged

            [DllImport("kernel32.dll")]
          static extern bool SetConsoleCtrlHandler(ConsoleEventHandlerDelegate
            handlerProc, bool add);

    public delegate bool HandlerRoutine(CtrlTypes CtrlType);

    public enum CtrlTypes
    {
        CTRL_C_EVENT = 0,
        CTRL_BREAK_EVENT,
        CTRL_CLOSE_EVENT,
        CTRL_LOGOFF_EVENT = 5,
        CTRL_SHUTDOWN_EVENT
    }

    #endregion
} 
```

两个问题：

1.  在 Managed Control-Break 处理程序中，如果我们设置`e.Cancel = true`它会失败并出现 .Net4 异常。这在没有解决方法的 MSDN 文章中注明：http: [//msdn.microsoft.com/en-us/library/system.consolecanceleventargs.cancel.aspx](http://msdn.microsoft.com/en-us/library/system.consolecanceleventargs.cancel.aspx)

2.  我不知道如何取消`ConsoleCtrlCheck`. 我有一两秒钟的时间来做一些清理工作，但我宁愿取消并确保一切都正确完成。

**更新：**

感谢您的回复。两者都赞成。将等待看看是否有人可以提出直接解决我要求的答复，否则将接受“使用 NT 服务”答案之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:57:46.443

> 我需要等待待处理的用户请求完成，干净地断开它们，在数据库上运行一些查询以反映状态的变化等等。它是一个 TCP 服务器。

然后不要将其作为控制台或任何其他类型的客户端应用程序运行。

只需将其作为 Windows (NT) 服务运行，您唯一需要担心的事件就是断电和停止信号。

使用 UPS 并确保您可以在合理的时间内关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:54:43.197

我没有尝试用控制台应用程序做这种事情，但你可能会用 Windows 窗体（或 WCF 应用程序）做得更好。他们会给你一个[`FormClosing`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)可以取消的活动。或者，如果您正在编写网络服务，请使用 Windows 服务，它提供了一个接口来干净地[停止](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstop.aspx)您的应用程序。

如果您真的热衷于控制台应用程序，也许`try {} finally {}`围绕您的所有代码的子句或更奇特的东西（如[关键终结器）](http://msdn.microsoft.com/en-us/library/fh21e17c.aspx)可能允许您运行清理代码。但这确实不是适合这项工作的工具。

在某些情况下，您无法阻止应用程序被关闭，例如：电源故障或任务管理器终止命令（如果应用程序没有通过 X 关闭，任务管理器是我要使用的第一个工具）。

因此，对您的服务应用程序进行编码，以便将所有客户端请求都记录到事务日志中（就像 SQL Server 一样）。如果您被意外打断（无论在何种情况下），在此之前发生的任何事情都会记录在日志中。当您的服务下一次启动时，重播该日志。

您要记录的一件事将是“我当时干净地关闭了`T`”。如果您重新启动并且在日志末尾没有找到该项目，您就知道出了点问题，您可以采取任何需要的操作。

如果您需要知道您的服务在做什么，请使用众多[日志](http://nlog-project.org/) [框架](http://logging.apache.org/log4net/)之一将事件传送到第二个应用程序，该应用程序仅显示活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T22:33:30.397

我花了几个小时看这个，因为我现在没有时间构建工作代码；虽然它可能很短，但要让它正确需要一段时间。我只会给你链接到完成这项工作所需的各种东西：

[http://pastebin.com/EzX3ezrf](http://pastebin.com/EzX3ezrf)

总结粘贴代码中的经验教训：

1.  需要一个消息泵来处理部分/全部 WM_QUERYENDSESSION、WM_ENDSESSION、CTRL_SHUTDOWN_EVENT（在 c# SystemEvents.SessionEnding 中可能涵盖部分/全部）

2.  获取消息泵的最简单方法是使其成为隐藏的表单/窗口应用程序，但我记得可以构建为控制台应用程序并添加消息泵。不过，我没有在粘贴中包含该代码。

3.  “如果应用程序必须阻止潜在的系统关闭，它可以调用 ShutdownBlockReasonCreate 函数”

4.  由于 AllocConsole 用于创建控制台，因此您需要使用 SetConsoleCtrlHandler 并在处理程序中使用 ExitThread(1)。这是一个“hack”，它会杀死关闭控制台的线程。它在 FarManager 中使用。例如，参见 interf.cpp

5.  使用 AllocConsole 时还需要初始化和清理控制台。

6.  据报道，按 CTRL+C 会弄乱输入。我不确定 FarManager 是否正在处理这种情况。interf.cpp 中的 CTRL_BREAK_EVENT 处理程序中有一些代码，我不确定它的作用。

7.  FarManager 还处理 WM_POWERBROADCAST，可能与挂起有关

如果这还不够（应该），您还可以将控制台添加到另一个进程中，并将您的消息 IPC 发送给它，如下所示。[为什么关闭使用 AllocConsole 启动的控制台会导致我的整个应用程序退出？我可以改变这种行为吗？](https://stackoverflow.com/questions/11959643/why-does-closing-a-console-that-was-started-with-allocconsole-cause-my-whole-app?rq=1)

RMTool 可用于模拟注销/关闭消息以进行测试：http: [//download.microsoft.com/download/d/2/5/d2522ce4-a441-459d-8302-be8f3321823c/LogoToolsv1.0.msi](http://download.microsoft.com/download/d/2/5/d2522ce4-a441-459d-8302-be8f3321823c/LogoToolsv1.0.msi)

MSDN 在 microsoft.win32.systemevents.sessionending.aspx 和 microsoft.win32.systemevents.aspx 也有一些 C# 代码（隐藏形式示例）

mischel.com/pubs/consoledotnet/consoledotnet.zip 有一个示例 winTest 项目，其中使用了 AllocConsole 并处理了一些事件。

# validation - 如何在Lua中验证字符串是否是有效日期？

> ID：12542853
> 
> 赞同：1
> 
> 时间：2012-09-22T10:10:36.587
> 
> 标签：validation, date, lua

s = "2010 年 2 月 29 日"

如何验证上面的字符串是 Lua 中的有效日期？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T11:01:03.630

标准 Lua 库中没有这样的东西，但可以自己轻松创建：

```
function is_valid_date(str)

  -- perhaps some sanity checks to see if `str` really is a date

  local m, d, y = str:match("(%d+)/(%d+)/(%d+)")

  m, d, y = tonumber(m), tonumber(d), tonumber(y)

  if d < 0 or d > 31 or m < 0 or m > 12 or y < 0 then
    -- Cases that don't make sense
    return false
  elseif m == 4 or m == 6 or m == 9 or m == 11 then 
    -- Apr, Jun, Sep, Nov can have at most 30 days
    return d <= 30
  elseif m == 2 then
    -- Feb
    if y%400 == 0 or (y%100 ~= 0 and y%4 == 0) then
      -- if leap year, days can be at most 29
      return d <= 29
    else
      -- else 28 days is the max
      return d <= 28
    end
  else 
    -- all other months can have at most 31 days
    return d <= 31
  end

end 
```

*（未经测试！）*

或者搜索[“lua date parsing”](https://www.google.com/search?q=lua+date+parsing)以找到可以为您执行此操作的 3 ^(rd方库。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-06T19:50:24.887

```
function checkDate(us_mdY) 
    local m, d, Y = us_mdY:match("(%d+)/(%d+)/(%d+)")
    local epoch = os.time{year=Y, month=m, day=d}
    local zeromdy = string.format("%02d/%02d/%04d", m, d, Y)
    return zeromdy == os.date('%m/%d/%Y', epoch)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-06T00:05:28.013

```
function isdate(value)
    --  Check for a UK date pattern dd/mm/yyyy , dd-mm-yyyy, dd.mm.yyyy
    --      My applications needs a textual response
    --      change the return values if you need true / false
    if (string.match(value, "^%d+%p%d+%p%d%d%d%d$")) then
        local d, m, y = string.match(value, "(%d+)%p(%d+)%p(%d+)")
        d, m, y = tonumber(d), tonumber(m), tonumber(y)

        local dm2 = d*m*m
        if  d>31 or m>12 or dm2==0 or dm2==116 or dm2==120 or dm2==124 or dm2==496 or dm2==1116 or dm2==2511 or dm2==3751 then
            -- invalid unless leap year
            if dm2==116 and (y%400 == 0 or (y%100 ~= 0 and y%4 == 0)) then
                return "valid"
            else
                return "invalid"
            end
        else
            return "valid"
        end
    else
        return "invalid"
    end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T14:55:29.957

虽然 Bart Kier 的响应在逻辑上组织、呈现和清晰，但它允许诸如“00/12/2011”和“02/00/2012”等零值的无意义日期通过验证。我通过将月、日和年的“<”检查更改为“<=”来更正它。

```
function is_valid_date(str)

  -- perhaps some sanity checks to see if `str` really is a date

  local m, d, y = str:match("(%d+)/(%d+)/(%d+)")

  m, d, y = tonumber(m), tonumber(d), tonumber(y)

  if d <= 0 or d > 31 or m <= 0 or m > 12 or y <= 0 then
    -- Cases that don't make sense
    return false
  elseif m == 4 or m == 6 or m == 9 or m == 11 then 
    -- Apr, Jun, Sep, Nov can have at most 30 days
    return d <= 30
  elseif m == 2 then
    -- Feb
    if y%400 == 0 or (y%100 ~= 0 and y%4 == 0) then
      -- if leap year, days can be at most 29
      return d <= 29
    else
      -- else 28 days is the max
      return d <= 28
    end
  else 
    -- all other months can have at most 31 days
    return d <= 31
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-01T19:40:55.417

Jeff Drumm 和 Bart Kier 的回答没有考虑到字符串可能根本不是日期。我添加了代码以在下面的代码中找不到 Jeff Drumms 回答的年份/月份/日期时返回 false。

```
function IsValidDate(str)
  -- perhaps some sanity checks to see if `str` really is a date
  local y, m, d = str:match("(%d+)/(%d+)/(%d+)")
  if y == nil or m == nil or d == nil
  then
    return false
  end
  m, d, y = tonumber(m), tonumber(d), tonumber(y)

  if d <= 0 or d > 31 or m <= 0 or m > 12 or y <= 0 then
    -- Cases that don't make sense
    return false
  elseif m == 4 or m == 6 or m == 9 or m == 11 then 
    -- Apr, Jun, Sep, Nov can have at most 30 days
    return d <= 30
  elseif m == 2 then
    -- Feb
    if y%400 == 0 or (y%100 ~= 0 and y%4 == 0) then
      -- if leap year, days can be at most 29
      return d <= 29
    else
      -- else 28 days is the max
      return d <= 28
    end
  else 
    -- all other months can have at most 31 days
    return d <= 31
  end
end 
```

# shopify - 尝试使用 curl 创建产品但不断收到错误 500

> ID：12542855
> 
> 赞同：1
> 
> 时间：2012-09-22T10:10:43.497
> 
> 标签：shopify

我正在尝试为通过 shopify_api gem 与 Shopify 交互的 Rails 应用程序生成一些测试数据。我在 OS X 机器上使用 curl（命令行实用程序）。我不断从 Shopify 收到错误 500（见下文）。我束手无策，因为我看不出我做错了什么。任何帮助将不胜感激。

```
* About to connect() to [edited out].myshopify.com port 80 (#0)
*   Trying 204.93.213.44...
* connected
* Connected to [edited out].myshopify.com (204.93.213.44) port 80 (#0)
* Server auth using Basic with user '[edited out]'
> POST /admin/products.json HTTP/1.1
> Authorization: Basic [edited out]
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: [edited out].myshopify.com
> Accept: */*
> Content-Type: application/json
> Content-Length: 694
> 
* upload completely sent off: 694 out of 694 bytes
< HTTP/1.1 500 Internal Server Error
< Server: nginx
< Date: Sat, 22 Sep 2012 10:06:22 GMT
< Content-Type: application/json; charset=utf-8
< Transfer-Encoding: chunked
< Connection: keep-alive
< Status: 500 Internal Server Error
< X-Shopify-Shop-Api-Call-Limit: 1/500
< HTTP_X_SHOPIFY_SHOP_API_CALL_LIMIT: 1/500
< Cache-Control: no-cache
< X-Request-Id: 3a03a70617be67e89ab103a9b8053da9
< X-UA-Compatible: IE=Edge,chrome=1
< X-Runtime: 1.566916
< 
* Connection #0 to host [edited out].myshopify.com left intact
{"errors":"Error"}* Closing connection #0 
```

这就是我调用 curl 的方式：

```
curl -v -X POST -d @ss12-absolute.json -H 'Content-Type: application/json' http://some_key:some_password@myshop.myshopify.com/admin/products.json 
```

POST 的数据文件如下所示：

```
{
  "product": {
    "title": "absolute",
    "handle": "ss12-absolute",
    "vendor": "deNada",
    "product_type": "top",
    "tags": "top,ss12,knits,casual,sleeveless",
    "body_html": "",
    "variants": [
      {
        "title": "absolute 08 eggplant",
        "sku": 555647,
        "price": "245.0",
        "compare_at_price": "245.0",
        "option1": "eggplant",
        "option2": "08",
        "option3": null
      }
    ],
    "options": [
      {
        "name": "Colour"
      },
      {
        "name": "Size"
      }
    ],
    "metafields": [
      {
        "namespace": "retail_pro",
        "key": "rp_style_sid",
        "value": -5642228920827310084,
        "value_type": "integer"
      }
    ]
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:30:44.400

Sku 是一个文本字段，您提交的是一个整数。切换它将为您修复它，我们将在我们这边修复它，以便您可以提交任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:20:30.017

服务器返回“ **500 Internal Server Error** ”，因此这不是您的客户端代码中的错误，如果您无权访问处理您的呼叫的服务器代码（**myshop.myshopify.com ），则需要在服务器中进行调试/admin/products.json**）然后您必须向该服务的管理员或支持团队提出问题，以便他们查看问题所在。

您的**POST**数据中的参数可能会导致错误，但如果不查看服务器代码，就无法准确找出问题所在。

# iphone - 需要简单的标签“屏幕保护程序”帮助

> ID：12542857
> 
> 赞同：1
> 
> 时间：2012-09-22T10:10:51.593
> 
> 标签：iphone, objective-c, ios, xcode

我只想让标签的 TextColor 每次从左到右进入屏幕时使用**arc4random** ..

以下代码在每次应用加载时适用于 1 种随机颜色，但在离开视图时无效！

```
NSTimer* myTimer;

int y = 15;
int x = 0;

-(void)textView
{
    myLabel = [[UILabel alloc] initWithFrame :CGRectMake(0, 0, 550, 30)];
    myLabel.backgroundColor = [UIColor clearColor];
    myLabel.textColor = [UIColor colorWithRed:arc4random()%100/100.0 green:arc4random()%100/100.0 blue:arc4random()%100/100.0 alpha:1];
    myLabel.font = [UIFont boldSystemFontOfSize:25];
    myLabel.text = @"My Sample Application";

    [self.view addSubview:myLabel];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [NSTimer scheduledTimerWithTimeInterval:0.005 target:self selector:@selector(animatedText) userInfo:nil repeats:YES];

    [self textView];
    [self animatedText];
}

-(void)animatedText
{
    if ( myLabel.center.x < 640 )
    {
        x += 1;
    }
    else
    {
        x = 0;
        y =(arc4random() % 500 ) ;
    }
    myLabel.center = CGPointMake(x, y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:14:53.483

颜色已设置`-(void)textView`- 只有在您的视图首次加载时才会调用。

复制`myLabel.textColor = ...`到您`animatedText`重置 x 和 y 位置的方法中。

# c++ - VCL 表格申请

> ID：12542863
> 
> 赞同：0
> 
> 时间：2012-09-22T10:11:14.330
> 
> 标签：c++, class, include, c++builder, vcl

我为控制台应用程序编写了一些 C++ 类。

如何在 VCL 表单应用程序中使用这些类。我正在使用 C++ Builder XE2。

我已经通过 Project->Add to project 添加了 .h 和 .cpp 文件。我需要写一个包含语句吗？如果是这样，我在哪里可以做到这一点？

我尝试将包含语句放在 .cpp 文件的顶部，但出现以下错误：无法打开包含文件。

我在与 Forms 项目相同的目录中有 .h 和 .cpp 文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:31:05.923

这是一个快速破解。它对我有用。

将您编写的整个类从`.CPP`文件移动到`.H`文件中。移动一切。

在里面 。`CPP`vcl 形式`form1.cpp`的`.H`文件，包括包含 C++ 类的文件。

或者您可以将部分类方法粘贴到`form1.h`其中，使它们成为 `public ref class form1{};`类的一部分，而不是让两个不同的类发生冲突，即 form1 类和您的类。

# sql - SQL SVR 08 R2 将字段限制为特定值

> ID：12542864
> 
> 赞同：3
> 
> 时间：2012-09-22T10:11:21.280
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

例如，假设我有“性别”字段，并且我只想允许值男性、女性或中性。这在 SQL Server 管理工作室中可行吗？

更新：到目前为止，解决方案指向“检查约束”功能，可以通过右键单击所需列找到该功能。

尽管如此，我还是遇到了语法错误。关于我应该如何输入约束的任何想法？

答案：原来我只需要像这样输入它

```
Gender = 'Male' OR Gender = 'Female' OR Gender = 'Unisex' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:12:50.937

与 MySQL 不同，MSSQL 没有`ENUM`数据类型。您唯一能做到的就是将值捕获在应用程序级别。或者通过使用`CHECK`约束

```
ColumnName varchar(10) 
CHECK(ColumnName IN ('Male', 'Female', 'Unisex')) 
DEFAULT 'Unisex' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T10:15:56.353

您可以执行以下操作： - 创建另一个表并创建从主表到 Gender 的一对多关系。- 创建一个约束，如下所示：

```
CREATE TABLE Person
(
   Id int NOT NULL,
   Gender varchar(200)
   CONSTRAINT chk_Gender CHECK (Gender IN ('Male', 'Unisex', 'Female'))
) 
```

# java - 在 Edittext 中输入数值时如何在键入时检查模式 ##.###

> ID：12542866
> 
> 赞同：1
> 
> 时间：2012-09-22T10:11:52.370
> 
> 标签：java, android

```
mPattern = Pattern.compile("([1-9]{1}[0-9]{0,2}([0-9]{3})*(\\.[0-9]{0,2})?
                            |[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})? 
                            |(\\.[0-9]{1,2})?)"); 
```

以上是模式，但在输入值时没有正确检查edittext中的值。

谁能帮我

验证这样的输入

```
12.325
95.365
85.665
87.256 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:10:26.560

从我从您的正则表达式中可以看出，您希望允许 1-3 位数字，然后是可选的，`.`然后是 1-3 位数字。此外，您似乎希望允许表单`0.##`, 和`.###`. 这验证了这些规范：

```
mPattern = Pattern.compile("[1-9][0-9]{0,2}(\\.[0-9]{1,3})?|0?\\.[0-9]{1,3}"); 
```

# php - Smarty 模板引擎的问题

> ID：12542872
> 
> 赞同：0
> 
> 时间：2012-09-22T10:12:52.110
> 
> 标签：php, smarty, smarty3, smarty2

我遇到了 Smarty 的问题。我需要在`.tpl`文件中进行一些计算、分配和删除，即 smarty。但我面临的问题是，当我这样做时`{$idlist[$iSum+1]}`，它会出现错误。这里 $idlist 是一个数组并且`$iSum`是一个整数。它可以正常工作，`{$idlist[$iSum]}`或者`{$idlist[3]}`但是在`{$idlist[$iSum+1]}`
运行这样的语句的语法必须是什么`{$idlist[$iSum+1]}`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:22:28.233

试试这个方法

```
{assign var="iSum" value=$iSum+1} 
```

既然你也想使用数学运算模板端，也请阅读 smarty**[数学函数](http://www.smarty.net/docsv2/en/language.function.math.tpl)**

# charts - 谷歌地图上的饼图聚类[batchgeo-like]

> ID：12542873
> 
> 赞同：2
> 
> 时间：2012-09-22T10:12:54.923
> 
> 标签：charts, maps, google-maps-markers, pie-chart

任何人都知道如何重新制作类似于*Batchgeo*在使用动态饼图对标记进行集群/分组时所做的事情？

示例：[带有饼图聚类的批处理地理地图](http://www.ilfattoquotidiano.it/patrie-galere-deaths-italian-prisons-since-2002-2012/)

谢谢，

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:47:18.470

我没有完整的操作方法，但确实有一些可能对您有所帮助并且似乎被 BatchGeo 使用的指针。

我会研究谷歌地图上的集群示例： [https ://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

这很好地涵盖了集群......然后你需要考虑将标记图像更改为对谷歌图表的调用： [https ://developers.google.com/chart/image/docs/gallery/pie_charts](https://developers.google.com/chart/image/docs/gallery/pie_charts)

*注意：这已被弃用，并将放弃对 2015 年的支持......但我相信 BatchGeo 会使用它。*

这里还有一个示例可以帮助您使用自定义集群标记图像，我无法发布（仅限于 2 个链接）（例如在 CLUSTER STYLE 中设置的 Hearts、People 等） . 如果您在 Google 上搜索“谷歌地图 v3 集群示例”，您应该会在顶部结果中找到它。

如果你把所有这些放在一起，那么我认为你应该到达那里。

问候，

詹姆士

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T14:29:00.760

我需要解决同样的问题，所以我通过扩展 Google Maps Marker Cluster Library 以使用饼图而不是集群标记来解决它。您可以从我的 GitHub 存储库下载解决方案：[https ://github.com/hassanlatif/chart-marker-clusterer](https://github.com/hassanlatif/chart-marker-clusterer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-27T11:12:29.003

很晚了，但我需要使用谷歌地图复制 BatchGeo 地图。所以在这里我展示了我的 CustomRendererClass，我用它来绘制 PieChart 作为具有集群大小的集群图标。根据您的自定义要求传递数据集。

```
public class TbmClusterRenderer extends DefaultClusterRenderer<VenueItemData> {

    private IconGenerator mClusterIconGenerator;
    private Context context;

    public TbmClusterRenderer(Context context, GoogleMap map,
                              ClusterManager<VenueItemData> clusterManager) {
        super(context, map, clusterManager);
        this.context = context;
        mClusterIconGenerator = new IconGenerator(context);
    }

    @Override
    protected void onBeforeClusterItemRendered(VenueItemData item,
                                               MarkerOptions markerOptions) {

        try {
            int markerColor = item.getMarkerColor();
            Bitmap icon;
            icon = BitmapFactory.decodeResource(context.getResources(),
                    R.drawable.map_marker).copy(Bitmap.Config.ARGB_8888, true);
            Paint paint = new Paint();
            ColorFilter filter = new PorterDuffColorFilter(markerColor,
                    PorterDuff.Mode.SRC_IN);
            paint.setColorFilter(filter);
            Canvas canvas = new Canvas(icon);
            canvas.drawBitmap(icon, 0, 0, paint);

            markerOptions.icon(BitmapDescriptorFactory.fromBitmap(icon));
        } catch (Exception ex) {
            ex.printStackTrace();
            Crashlytics.logException(ex);
        }
    }

    @Override
    protected void onClusterItemRendered(VenueItemData clusterItem, Marker marker) {
        super.onClusterItemRendered(clusterItem, marker);
    }

    @Override
    protected void onBeforeClusterRendered(Cluster<VenueItemData> cluster, MarkerOptions markerOptions) {
        ArrayList<VenueItemData> a = (ArrayList<VenueItemData>) cluster.getItems();
        Canvas canvas;
        @SuppressLint("UseSparseArrays")
        HashMap<Integer, Integer> markerColors = new HashMap<>();
//        ConcurrentHashMap<Integer, Integer> markerColors = new ConcurrentHashMap<>();
        for (VenueItemData data : a) {
            if (data.getMarkerColor() != 0) {
                if (!markerColors.containsValue(data.getMarkerColor())) {
                    markerColors.put(data.getMarkerColor(), 0);
                }
            }
        }
        Set set = markerColors.entrySet();
        Iterator iterator = set.iterator();
        while (iterator.hasNext()) {
            Object aSet = iterator.next();
            Map.Entry<Integer, Integer> entry = (Map.Entry<Integer, Integer>) aSet;
            for (VenueItemData data : a) {
                if (data.getMarkerColor() == entry.getKey()) {
                    entry.setValue(entry.getValue() + 1);
                }
            }
        }

        Log.e("graph values", new Gson().toJson(markerColors));
        Bitmap myBitmap = Bitmap.createBitmap(70, 70, Bitmap.Config.ARGB_8888);
        canvas = new Canvas(myBitmap);
        Paint paint = new Paint();
        paint.setAntiAlias(true);

        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(1f);
        paint.setStyle(Paint.Style.FILL_AND_STROKE);
        RectF rectf = new RectF(2, 2, myBitmap.getWidth() - 2, myBitmap.getHeight() - 2);
        set = markerColors.entrySet();
        float startAngle = 0.0f;
        for (Object aSet : set) {
            Map.Entry<Integer, Integer> entry = (Map.Entry<Integer, Integer>) aSet;
            float angle = (360.0f / (float) cluster.getSize()) * (float) entry.getValue();
            paint.setColor(entry.getKey());
            canvas.drawArc(rectf, startAngle, angle, true, paint);
            startAngle += angle;
        }

        BitmapDrawable clusterIcon = new BitmapDrawable(context.getResources(), myBitmap);
        if (set.isEmpty()) {
            mClusterIconGenerator.setBackground(context.getResources().getDrawable(R.drawable.circle1));
        } else {
            mClusterIconGenerator.setBackground(clusterIcon);
        }
        mClusterIconGenerator.setTextAppearance(R.style.ClusterTextAppearance);
        Bitmap icon = mClusterIconGenerator.makeIcon(String.valueOf(cluster.getSize()));
        markerOptions.icon(BitmapDescriptorFactory.fromBitmap(icon));
        mClusterIconGenerator.setContentPadding(20, 20, 20, 20);
    }
} 
```

这里我附上截图供参考： [![在此处输入图像描述](../Images/0d6a0b78dd426b99d9c5e7db19852954.png)](https://i.stack.imgur.com/SDoN5.png)

# jquery - 如何将具有子节点的 div 细分为多个部分

> ID：12542875
> 
> 赞同：0
> 
> 时间：2012-09-22T10:13:48.510
> 
> 标签：jquery, dom, split

我有一个 DOM 对象，例如带有任何孩子的 div。我需要将它正确地细分为两部分：标记元素之前和之后。例子：

```
<div>
  <p>para 1</p>
  <a href="#">Some text here
     <b>Bold<em>Italic <span id="marker"></span> </em> any other text</b>
     <p>Cool para 2</p>
  </a>
  <span>Bla-bla</span>
</div> 
```

结果应该是这样的：

```
<div>
  <p>para 1</p>
  <a href="#">Some text here
     <b>Bold<em>Italic</em></b>
  </a>
</div>

<span id="marker"></span>

<div>
  <a href="#">
     <b><em>text</em> any other text</b>
     <p>Cool para 2</p>
  </a>
  <span>Bla-bla</span>
</div> 
```

如您所见，所有标签都正确关闭，正确链接等。我看到的方式是克隆 DOM 节点，在第一个节点及其克隆之间插入标记，删除第一个节点中的右元素和克隆节点中的左元素。但是怎么做我不知道。所以我需要一个纯 JS 或 JQuery 中的示例或函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:41:34.943

文本节点不被视为兄弟节点，因此被 jQuery DOM 遍历方法忽略。要拆分文本字符串，您必须手动解析（或简单地将标记插入更有意义的位置）。这个[**demo**](http://jsfiddle.net/RtBmW/)应该和你想要的很接近，但是和marker同层的文字不会被分割。

```
$(document).ready( function() {
    var $contentDiv = $('div');
    var $prev = $contentDiv.clone();
    $prev.find("#marker").parentsUntil('div').andSelf().nextAll().remove();
    $prev.find("#marker").parentsUntil('div').andSelf().prevAll();
    $prev.find("#marker").remove();

    var $next = $contentDiv.clone();
    $next.find("#marker").parentsUntil('div').andSelf().prevAll().remove();
    $next.find("#marker").parentsUntil('div').andSelf().nextAll();
    $next.find("#marker").remove();

    $contentDiv.after($next);
    $contentDiv.after("<hr />");
    $contentDiv.after($prev);
    $contentDiv.after("<hr />");
});​ 
```

 [***jsFiddle***](http://jsfiddle.net/RtBmW/)

# mysql - 作为准备好的语句运行时出现Mysql语法错误

> ID：12542878
> 
> 赞同：0
> 
> 时间：2012-09-22T10:14:41.770
> 
> 标签：mysql, database, stored-procedures, pdo

我有这个存储过程，我在其中使用准备好的语句来执行两个查询。这是过程。

```
SET @uid    = puserid;
SET @rangee = plimit * 50;
SET @post = 'post';

PREPARE STMT FROM 
'
SELECT  notifications.postid,victims.victimid,friends.friendsname,notificationrecievers.status 

FROM friends,victims,notifications,notificationrecievers

WHERE victims.postid=notifications.postid 

AND notificationrecievers.notificationid=notifications.notid

AND notificationrecievers.recieverid=?

AND notifications.type=? 

AND friends.friendsid=victims.victimid

AND notificationrecievers.notificationid <=
(
   SELECT MAX(notid) FROM
   (
      SELECT n.notid FROM user u,notifications n,notificationrecievers nr WHERE
      nr.recieverid=? AND u.userid=n.senderid AND nr.notificationid=n.notid ORDER BY n.notid DESC
      LIMIT 50 OFFSET ?
   )a
)
AND notificationrecievers.notificationid >=
(
   SELECT MIN(notid) FROM
   (
      SELECT n.notid FROM user u,notifications n,notificationrecievers nr WHERE
      nr.recieverid=? AND u.userid=n.senderid AND nr.notificationid=n.notid ORDER BY n.notid DESC
      LIMIT 50 OFFSET ?
   )b
)
ORDER BY notifications.postid DESC;

UPDATE notificationrecievers 

SET notificationrecievers.status=1 

WHERE notificationrecievers.status=0
AND   notificationrecievers.recieverid=? 

AND

notificationrecievers.notificationid <=
(
     SELECT MAX(notid) FROM
     (
      SELECT n.notid FROM user u,notifications n,notificationrecievers nr WHERE
      nr.recieverid=? AND u.userid=n.senderid AND nr.notificationid=n.notid ORDER BY n.notid DESC
      LIMIT 50 OFFSET ?
     )e
)   

AND

notificationrecievers.notificationid >=
(
     SELECT min(notid) FROM
     (
      SELECT n.notid FROM user u,notifications n,notificationrecievers nr WHERE
      nr.recieverid=? AND u.userid=n.senderid AND nr.notificationid=n.notid ORDER BY n.notid DESC
      LIMIT 50 OFFSET ?
     )g
);

';
EXECUTE STMT USING @uid,@post,@uid,@rangee,@uid,@rangee,@uid,@uid,@rangee,@uid,@rangee; 
```

当我在过程中运行此查询时，它给了我语法错误。但是当我通过提供硬编码值代替它直接使用它时，`?`它工作正常。为什么会发生这种情况？`puserid`并且`plimit`是我传递给这个过程的参数。

这是错误：

```
Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ';

UPDATE 
notificationrecievers 
SET notificationrecievers.st' at line 25 
```

# linux - 为什么在未安装 cscope 时 vim 支持 cscope？

> ID：12542884
> 
> 赞同：1
> 
> 时间：2012-09-22T10:15:15.263
> 
> 标签：linux, vim, editor, cscope

vim 的版本信息：

```
root@lab:/home/mirror0/chrome# vim --version
VIM - Vi IMproved 7.2 (2008 Aug 9, compiled Jul 12 2010 12:48:02)
Included patches: 1-445
Modified by pkg-vim-maintainers@lists.alioth.debian.org
Compiled by buildd@
Huge version with GTK2-GNOME GUI.  Features included (+) or not (-):
+arabic +autocmd +balloon_eval +browse ++builtin_terms +byte_offset +cindent
+clientserver +clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments
+cryptv +cscope +cursorshape +dialog_con_gui +diff +digraphs +dnd -ebcdic
+emacs_tags +eval +ex_extra +extra_search +farsi +file_in_path +find_in_path
+float +folding -footer +fork() +gettext -hangul_input +iconv +insert_expand
+jumplist +keymap +langmap +libcall +linebreak +lispindent +listcmds +localmap
+menu +mksession +modify_fname +mouse +mouseshape +mouse_dec +mouse_gpm
-mouse_jsbterm +mouse_netterm -mouse_sysmouse +mouse_xterm +multi_byte
+multi_lang -mzscheme +netbeans_intg -osfiletype +path_extra +perl +postscript
+printer +profile +python +quickfix +reltime +rightleft +ruby +scrollbind
+signs +smartindent -sniff +startuptime +statusline -sun_workshop +syntax
+tag_binary +tag_old_static -tag_any_white +tcl +terminfo +termresponse
+textobjects +title +toolbar +user_commands +vertsplit +virtualedit +visual
+visualextra +viminfo +vreplace +wildignore +wildmenu +windows +writebackup
+X11 -xfontset +xim +xsmp_interact +xterm_clipboard -xterm_save
   system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  system gvimrc file: "$VIM/gvimrc"
    user gvimrc file: "$HOME/.gvimrc"
    system menu file: "$VIMRUNTIME/menu.vim"
  fall-back for $VIM: "/usr/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H -DFEAT_GUI_GTK  -pthread -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include   -DORBIT2=1 -pthread -I/usr/include/libgnomeui-2.0 -I/usr/include/libart-2.0 -I/usr/include/gconf/2 -I/usr/include/gnome-keyring-1 -I/usr/include/libgnome-2.0 -I/usr/include/libbonoboui-2.0 -I/usr/include/libgnomecanvas-2.0 -I/usr/include/gtk-2.0 -I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include -I/usr/include/orbit-2.0 -I/usr/include/dbus-1.0 -I/usr/lib/dbus-1.0/include -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/libbonobo-2.0 -I/usr/include/bonobo-activation-2.0 -I/usr/include/libxml2 -I/usr/include/pango-1.0 -I/usr/include/gail-1.0 -I/usr/include/freetype2 -I/usr/include/atk-1.0 -I/usr/lib/gtk-2.0/include -I/usr/include/cairo -I/usr/include/gio-unix-2.0/ -I/usr/include/pixman-1 -I/usr/include/libpng12     -Wall -g -O2    -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -I/usr/lib/perl/5.10/CORE  -I/usr/include/python2.6 -I/usr/include/tcl8.4  -D_REENTRANT=1  -D_THREAD_SAFE=1  -D_LARGEFILE64_SOURCE=1  -I/usr/lib/ruby/1.8/x86_64-linux -DRUBY_VERSION=18
Linking: gcc   -L.  -rdynamic -Wl,-export-dynamic  -Wl,-E  -Wl,--as-needed -o vim   -pthread -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lpangoft2-1.0 -lgdk_pixbuf-2.0 -lpangocairo-1.0 -lcairo -lgio-2.0 -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lrt -lglib-2.0     -lgnomeui-2 -lbonoboui-2 -lgnomevfs-2 -lgnomecanvas-2 -lgnome-2 -lpopt -lbonobo-2 -lbonobo-activation -lORBit-2 -lart_lgpl_2 -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lpangoft2-1.0 -lgdk_pixbuf-2.0 -lpangocairo-1.0 -lcairo -lgio-2.0 -lpango-1.0 -lfreetype -lfontconfig -lgconf-2 -lgmodule-2.0 -lgobject-2.0 -lgthread-2.0 -lrt -lglib-2.0   -lXt -lncurses -lselinux  -lacl -lgpm -Wl,-E  -fstack-protector -L/usr/local/lib  -L/usr/lib/perl/5.10/CORE -lperl -L/usr/lib/python2.6/config -lpython2.6 -lutil -Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions -L/usr/lib -ltcl8.4 -lieee -lruby1.8 -lrt -lm 
```

**vim 支持 cscope**：

```
root@lab:/home/mirror0/chrome# vim --version | grep cscope
+cryptv +cscope +cursorshape +dialog_con_gui +diff +digraphs +dnd -ebcdic 
```

实际上，**没有安装 cscope 命令**：

```
root@lab:/home/mirror0/chrome# which cscope 
```

那么，为什么 vim 支持 cscope 而没有安装 cscope 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:38:02.810

*cscope*支持有两个方面（类似于 Perl、Python 等语言的支持）：

1.  可以处理集成的程序代码必须在 Vim 编译期间激活，以便该功能包含在 Vim 可执行文件中。这就是所`:version`显示的。
2.  集成必须在安装 Vim 的系统上可用；即，还必须有一个`cscope`可执行/Perl 共享库等，然后当您发出相应的命令时，Vim 会动态调用该库。当这部分缺失时，Vim 会报错。

# mysql - MySQL 5.5 在查询中丢失尾随空格

> ID：12542889
> 
> 赞同：7
> 
> 时间：2012-09-22T10:16:07.577
> 
> 标签：mysql

我正在建立一个数据库，其中尾随空格对结果很重要。当我查询结果时，我发现

```
SELECT * where `field` = 'a ' 
```

当存在值为 'a' 的字段时返回结果。我希望尾随空格在结果集中很重要。我尝试过使用 Char、Varchar、Text 和 Blob。我会注意到这个字段是我的表的索引。

有人可以告诉我如何以使尾随（和/或前导）空格计数的方式进行查询吗？我是否需要以任何特殊方式格式化我的表格才能完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T10:41:44.233

这种行为是设计使然，不仅在 MySQL 中。

您可以使用以下方法在*比较*中解决它`BINARY`：

```
mysql> select version(), 'a' = 'a ', BINARY 'a' = BINARY 'a ';
+-------------+------------+--------------------------+
| version()   | 'a' = 'a ' | BINARY 'a' = BINARY 'a ' |
+-------------+------------+--------------------------+
| 5.5.25a-log |          1 |                        0 |
+-------------+------------+--------------------------+
1 row in set (0.00 sec) 
```

但不多。`SELECT`如果空格出现在搜索的用户输入中，这将帮助您处理s；但是如果你想实际输入空格结尾的信息，那将是一个问题（你不能同时拥有'a'和'a'的索引）。

也可以看看

[比较需要考虑 varchar 中的尾随空格](https://stackoverflow.com/questions/3668996/trailing-whitespace-in-varchar-needs-to-be-considered-in-comparison)

您可以想象*反转*该列中的字符串，并在显示它们时将它们反转回来。当然，这会破坏基于该列的任何排序，但如果您只测试相等或子字符串的存在，它可能会起作用。*前导*空格确实很重要。

对于相等搜索，您还可以存储字符串的 base64 编码，它应该保持字典顺序（即 a 和 b 之间的顺序应该保持在 base64(a) 和 base64(b) 之间）。或者您可以在字符串上附加一个终止符（“\n”可能会很好并且不会出现在搜索中）。

最后，但这是有风险的，因为人类无法区分，您可以用 UTF8 char(49824) 替换空格：

```
mysql> select concat ('\'a', char(49824),'\'') AS tricked,
              concat ('\'a', ' '        ,'\'') as honest,
              concat ('\'a', char(49824),'\'') =
              concat ('\'a', ' '        ,'\'') as equals;

+---------+--------+--------+
| tricked | honest | equals |
+---------+--------+--------+
| 'a '    | 'a '   |      0 |
+---------+--------+--------+
1 row in set (0.00 sec) 
```

这些行*似乎*相等，但事实并非如此。请注意，在 HTML 中，空格是空格，而 49824 是`&nbsp;`（不间断空格）。这会影响来回转换 HTML 的函数，并且 nbsp 实际上是 UTF8 代码点意味着*诚实*字符串是两个字节，但*被欺骗*字符串的长度实际上是*3*。

最后，您可以声明该列`VARBINARY`而不是`VARCHAR`，从而完全隐藏正在发生的事情。它看起来是最简单的解决方案，但我担心它可能会在几周或几个月后给你带来麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:59:58.787

我在以下方面取得了成功，但我不确定这是否是一种不稳定的方法。

```
CREATE TEMPORARY TABLE test (
  PRIMARY KEY(id),
  id INT AUTO_INCREMENT,
  val VARCHAR(20)
);

INSERT INTO test VALUES
(NULL, 'a'),
(NULL, 'a '),
(NULL, 'a  '),
(NULL, 'a   ');

SELECT * FROM test
WHERE val LIKE 'a '; 
```

输出

```
id  val
2   'a ' 
```

使用 WHERE val = 'a ' 将选择所有条目而不考虑尾随空格，但 LIKE 对我有用。

# javascript - 没有在 Firefox 中将焦点设置到文本字段

> ID：12542897
> 
> 赞同：2
> 
> 时间：2012-09-22T10:16:54.123
> 
> 标签：javascript, html, firefox, dom-events

我遇到了一个非常有趣的问题。我正在尝试使用 Javascript（没有 jQuery，我也尝试过但没有成功）将**焦点**`window.onLoad`设置在输入字段上。

看看这个小提琴：[setFocusOnLoad](http://jsfiddle.net/ravi441988/r5Rgr/4/)

它在 chrome 浏览器中运行良好，但在 Firefox 中运行良好。火狐有什么问题吗？我该如何解决。

**编辑：**
这是我在 html 文件中复制的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript">
            function onloadFocus(){
                var name = document.getElementById('name');
                //        name.value='window.onload called';
                name.focus();

            }

            window.onload=onloadFocus();
        </script>
    </head>
    <body>
        <div><input type='text' value='' id='name' name='name'></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T10:26:18.533

尝试添加一点延迟：

```
function onloadFocus(){
    setTimeout(function() {
        document.getElementById('name').focus()
    }, 10);
} 
```

[更新 jsFiddle](http://jsfiddle.net/r5Rgr/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:54:21.313

必须将函数调用包装成一个函数，否则会立即调用，而不是onLoad（此时输入仍未知）：

```
window.onload=function(){onloadFocus();} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:16:38.023

您应该使用`window.onload=onloadFocus;`，而不是`window.onload=onloadFocus();`因为`window.onload=onloadFocus();`onloadFocus 将立即运行，此时输入字段可能不可用。

[jsfiddle](http://jsfiddle.net/mUYrJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-27T12:18:51.167

我得到了解决方案。如果你想专注于 Firefox。在脚本标签的开头写下焦点函数。

```
<script type="text/javascript">
    document.getElementById('name').focus();
    // rest of the code here.
</script> 
```

希望这会帮助你。

# android - 资源覆盖警告

> ID：12542903
> 
> 赞同：0
> 
> 时间：2012-09-22T10:17:52.620
> 
> 标签：android

当我想在不同的文件夹（针对不同的配置）中创建布局文件时，总是会收到资源覆盖警告。我在 lib 目录中创建了一个文件夹作为布局端口（用于纵向），然后右键单击同一个文件夹，如果我想创建一个名为默认 xml 布局文件的新文件，它会给我“文件覆盖警告” . 这是为什么？据我所知，我可以在不同的资源文件夹中使用相同的文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:04:20.493

我也遇到过这种烦人的情况，似乎即使您选择`layout-land`在那里创建新文件，它仍然默认为`layout`，所以我的解决方法是创建具有不同名称的新文件，例如`main1.xml`. `layout`然后我将文件从,剪切/粘贴到`layout-land`.

# sql-server-2008 - 如何找到字符串中最长的字母序列

> ID：12542908
> 
> 赞同：3
> 
> 时间：2012-09-22T10:18:27.153
> 
> 标签：sql-server-2008, tsql, set-based

我想找出字符串中最长的字母序列

例如在单词`Honorificabcdwert`中，输出将是`abcd`.

我该怎么做？

我的想法是获取 Ascii，然后计算序列，直到它在某个点中断。但我只能继续

```
DECLARE @t TABLE(ID INT IDENTITY,String VARCHAR(100))
INSERT INTO @t SELECT 'Honorificabcdwert'

;with Get_Individual_Chars_Cte AS
( 
   SELECT 
        ID
        ,Row_ID =ROW_NUMBER() Over(PARTITION by ID Order by ID) 
        ,SUBSTRING(String,Number,1) AS [Char]
        ,ASCII(SUBSTRING(String,Number,1)) AS [Ascii Value]

FROM @t  
INNER JOIN master.dbo.spt_values ON
 Number BETWEEN 1 AND LEN(String)
 AND type='P'

)

Select * from Get_Individual_Chars_Cte 
```

在这之后我不知道该怎么办。为此或任何其他方式所需的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:20:18.157

这有帮助吗

```
DECLARE @t TABLE(ID INT IDENTITY,String VARCHAR(100))
INSERT INTO @t 
SELECT 'Honorificabcdwert' UNION ALL
SELECT 'AbCdEfxy' UNION ALL
SELECT 'abc1234defg' UNION ALL
SELECT 'XYZABCPPCKLMIDBABC' UNION ALL
SELECT 'MNOP$%^&~()MNOPQRS;:'

SELECT ID, OriginalString,Sequence
FROM (SELECT ID, REPLACE(string,'%','') AS Sequence,OriginalString,
      ROW_NUMBER() OVER(PARTITION BY ID ORDER BY LEN(string) DESC, string) AS rn
      FROM (SELECT OriginalString = b.String, CASE WHEN b.String LIKE a.strings THEN a.strings ELSE NULL END AS string, 
            b.ID, ROW_NUMBER() OVER(PARTITION BY ID ORDER BY LEN(strings) DESC, strings) AS rn
            FROM (SELECT COALESCE('%' + b.strings+a.strings + '%','%' + a.strings + '%') AS strings
                  FROM (SELECT SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ',t1.N,t2.N-t1.N+1) AS strings, t1.N
                        FROM (VALUES(1),(2),(3),(4),(5),(6),(7),(8),
                                    (9),(10),(11),(12),(13),(14),(15),
                                    (16),(17),(18),(19),(20),(21),(22),
                                    (23),(24),(25),(26)) t1(N)
                        CROSS JOIN (VALUES(1),(2),(3),(4),(5),(6),(7),(8),
                                          (9),(10),(11),(12),(13),(14),(15),
                                          (16),(17),(18),(19),(20),(21),(22),
                                          (23),(24),(25),(26)) t2(N)
                        WHERE t1.N <= t2.N) a
                  LEFT OUTER JOIN (SELECT REVERSE(SUBSTRING('ZYXWVUTSRQPONMLKJIHGFEDCBA',1,N)) AS strings, 1 AS ID
                                   FROM (VALUES(1),(2),(3),(4),(5),(6),(7),(8),
                                               (9),(10),(11),(12),(13),(14),(15),
                                               (16),(17),(18),(19),(20),(21),(22),
                                               (23),(24),(25),(26)) t1(N)
                                   UNION ALL SELECT '', 1) b ON a.N = b.ID) a
            CROSS JOIN @t b) a ) a
WHERE a.rn = 1
ORDER BY a.ID 
```

**结果**

```
ID  OriginalString          Sequence
1   Honorificabcdwert       ABCD
2   AbCdEfxy                ABCDEF
3   abc1234defg             DEFG
4   XYZABCPPCKLMIDBABC      XYZABC
5   MNOP$%^&~()MNOPQRS;:    MNOPQRS 
```

根据您在与@Martin Smith 讨论过程中提供的意见，该程序正在开发中。请对其进行测试，并让我知道它是否满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:44:44.233

对于字符按字母顺序上升的连续行（此处将字母顺序与 ASCII 顺序等同）`ROW_NUMBER() OVER (ORDER BY Row_ID) - [Ascii Value]`将是相同的。

这本身是不够的，但是对于`ABCZE`将放在`E`同一组中的字符串，`ABC`那么您需要第二次操作来查找该分组序列中的间隙。

像下面这样的事情应该做到这一点。

```
DECLARE @t TABLE(ID INT IDENTITY,String VARCHAR(100))
INSERT INTO @t SELECT 'Honorificabcdwfrt'

;with Get_Individual_Chars_Cte AS
( 
   SELECT 
        ID
        ,Row_ID =ROW_NUMBER() Over(PARTITION by ID Order by ID) 
        ,SUBSTRING(String,number,1) AS [Char]
        ,ASCII(SUBSTRING(String,number,1)) AS [Ascii Value]

FROM @t  
INNER JOIN master.dbo.spt_values ON
 number BETWEEN 1 AND LEN(String)
 AND type='P'
)
, T1 AS
(
Select *,
       ROW_NUMBER() OVER (ORDER BY Row_ID) - [Ascii Value] AS RN
 from Get_Individual_Chars_Cte 
 ), T2 AS
 (
 SELECT *,
        ROW_NUMBER() OVER (ORDER BY Row_ID) - 
        ROW_NUMBER() OVER (PARTITION BY RN ORDER BY Row_ID) AS Grp
 FROM T1
 )
 SELECT TOP 1 WITH TIES *
 FROM T2
 ORDER BY  COUNT(*) OVER (PARTITION BY RN, Grp) DESC 
```

# java - 无法在 BlackBerry Playbook 上设置音量

> ID：12542910
> 
> 赞同：8
> 
> 时间：2012-09-22T10:18:40.083
> 
> 标签：java, android, volume, blackberry-playbook

我在更改黑莓游戏书的音量时遇到问题。首先，我将我的 Android 应用程序重新打包到 Palybook 应用程序。我需要使用 seekbar 更改黑莓剧本的音量，并在 seeklistener 中设置音频管理器音量。这是代码：

```
audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

public void onStopTrackingTouch(SeekBar seekBar)
{
    // TODO Auto-generated method stub

}

public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub
}

public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) 
{

  // TODO Auto-generated method stub

   audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0);

} 
```

但是当我运行我的应用程序并更改搜索栏时，系统（Blackberry playbook）的音量没有改变。是因为黑莓 palybook 安全吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:59:14.943

您确定您已添加这些权限吗？

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" ></uses-permission>
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" ></uses-permission>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" ></uses-permission>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/> 
```

也试试这个代码

```
while(audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) < progress) {
audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI); 
```

}

# php - 如何使用php删除目录中的旧文件

> ID：12542912
> 
> 赞同：2
> 
> 时间：2012-09-22T10:18:52.357
> 
> 标签：php, mysql

我有一个用于数据库备份的目录，以及一个每天对数据库进行备份的 PHP 脚本。但大约一个月后，我将在备份目录中有 30 个文件。我如何编写一个每天删除旧备份文件的 PHP 脚本，以便我的目录中始终有 10 个备份文件？存储新备份时，将删除最旧的备份文件，依此类推...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:06:11.303

您可以读取备份目录并删除所有超过 30 天的文件。但是，我个人是动态创建文件的，每个文件都有这种格式：

`database_dump_DD-MM-YYYY_HH:MM:SS.sql`

所以我可以删除考虑文件名的文件。由于我不知道您的文件是什么格式，您可以像这样删除它们：

```
$files = readdir(opendir('backups')); //read directory for files

foreach($files as $file){
    if(filemtime($file) > (time() + 2592000)){ //check if the file is older than 30 days
        unlink($file); //delete
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T10:20:20.803

使用 PHP 备份进行备份后，您将遍历目录，然后删除最旧的备份文件：

```
$files = glob('backupfolder/*.bak');
if(count($files) > 10)
  foreach($files as $file)
    if(time() - filectime($file) > 10 * 24 * 60 * 60)
      unlink($file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:46:59.927

为什么要努力使用 PHP？[find](http://linux.die.net/man/1/find)命令和[cron](http://linux.die.net/man/8/cron)可以解决问题

# sql - 返回一串分隔电子邮件的 TSQL 函数 - 尝试嵌套选择

> ID：12542916
> 
> 赞同：2
> 
> 时间：2012-09-22T10:19:32.497
> 
> 标签：sql, string, tsql, function, append

我有一个带有 column 的表`email`。我需要以字符串形式返回所有这些电子邮件。我正在尝试这段代码，但得到：

```
Msg 102, Level 15, State 1, Procedure getemailjcp, Line 24
Incorrect syntax near '='.
Msg 102, Level 15, State 1, Procedure getemailjcp, Line 31
Incorrect syntax near 'a'. 
```

TSQL 函数：

```
ALTER function [dbo].[getemails]
(
    @DB_Name varchar(100)
)
Returns varchar(4000)
AS
BEGIN
    DECLARE @out varchar (4000);
    DECLARE @in varchar (4000);
    SET @out =
        (
            SELECT @in = @in + email +'; ' 
            FROM 
                (
                    SELECT DISTINCT ISNULL(U.nvarchar4, 'NA') as email
                    FROM
                        sometable
            ) a
        ) b
    RETURN @out
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:45:25.143

SO中有很多关于该主题的内容，例如，您将[在这里看到几种不同的解决方案。](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

维克多的正确评论。如果您的表具有重复的电子邮件值并且您不想要它们并且只是连接不同的值，则使用嵌套查询。

```
SELECT @in = COALESCE(@in, ';', '') + b.emails +'; ' 
  FROM (
        SELECT DISTINCT ISNULL(U.nvarchar4, 'NA') as emails FROM sometable
       ) b 
```

在这里，您有适用于这种情况的[**SQL Fiddle**](http://sqlfiddle.com/#!3/28a78/2)代码。

如果你想更深入地了解这个串联的事情，这里有一篇关于这个主题的详细的文章。

[**在 Transact-SQL 中连接行值**](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/#_Toc205129492)

如果不需要 DISTINCT 子句，则无需使用嵌套的 select 子句。您只需要将电子邮件列值添加到要输出的变量中。

对于您的情况，请使用此`SELECT`子句：

```
SELECT @in = COALESCE(@in + '; ', '') + ISNULL(U.nvarchar4, 'NA')
  FROM sometable 
```

检查此[**SQL Fiddle**](http://sqlfiddle.com/#!3/1ba7f/1)工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:45:53.457

尝试使用以下

```
CREATE function [dbo].[getemails] 
( 
    @DB_Name nvarchar(100) 
) 
Returns nvarchar(max) 
AS 
    BEGIN 
    DECLARE @in nvarchar (max); 
    SELECT @in = ISNULL(@in, '') + b.emails +'; '  
    FROM ( 
        SELECT DISTINCT ISNULL(U.nvarchar4, 'NA') as emails FROM sometable
       ) b
    RETURN @in 
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:35:06.307

这会起作用（不确定在哪里使用@DB_name，顺便说一句）：

```
ALTER function [dbo].[getemails]
(
    @DB_Name varchar(100)
)
Returns varchar(4000)
AS
BEGIN
    DECLARE @in varchar (4000);
    SELECT @in = ''
    SELECT @in = @in + email +'; ' 
    FROM 
        (
            SELECT DISTINCT ISNULL(U.nvarchar4, 'NA') as email FROM sometable
        ) b
    RETURN @in
END 
```

# java - 如何使用poi在excel中的背景设置水印图像

> ID：12542923
> 
> 赞同：2
> 
> 时间：2012-09-22T10:21:06.067
> 
> 标签：java, apache-poi

我正在使用以下代码在 excel 表中设置水印，我也得到了水印，但不是在后面显示水印，而是在前景显示水印。

如何解决这个问题，代码：

```
//to add water mark
                HSSFPatriarch dp = sheet.createDrawingPatriarch();
                HSSFClientAnchor anchor = new HSSFClientAnchor
                    (0, 0, 1023, 255, (short) 2, 4, (short) 13, 26);
                HSSFTextbox txtbox = dp.createTextbox(anchor);
                HSSFRichTextString rtxt = new HSSFRichTextString("POC");
                HSSFFont draftFont = hwb.createFont();
                draftFont.setColor((short) 27);
                draftFont.setBoldweight(HSSFFont.BOLDWEIGHT_NORMAL);
                draftFont.setFontHeightInPoints((short) 192);
                draftFont.setFontName("Verdana");
                rtxt.applyFont(draftFont);
                txtbox.setString(rtxt);
                txtbox.setLineStyle(HSSFShape.LINESTYLE_NONE);
                txtbox.setNoFill(true);

also how to merge the cells to add title at the top of the excel sheet using poi in java? 
```

请帮助我找到并解决问题。

# parsing - F# 规范中的字符类

> ID：12542924
> 
> 赞同：2
> 
> 时间：2012-09-22T10:21:09.983
> 
> 标签：parsing, unicode, f#

F# 规范在语法中做了以下定义（第 A.1.4.1 节）：

```
ident-char :
      letter-char
      digit-char
      connecting-char
      combining-char
      formatting-char
      '
      _ 
```

定义`connecting-char`为

```
connecting-char : '\Pc' 
```

我相信这意味着`connecting-char`任何`c`满足

```
System.Globalization.CharUnicodeInfo.GetUnicodeCategory(c) = UnicodeCategory.   ConnectorPunctuation 
```

当您对此进行测试时，`_`您会得到：

```
> System.Globalization.CharUnicodeInfo.GetUnicodeCategory('_');;
val it : System.Globalization.UnicodeCategory = ConnectorPunctuation 
```

我认为这意味着这`_`是一个有效的`connecting-char`. 这就提出了一个问题，为什么`_`.

在实际的编译源代码中，没有特殊处理`_`

（来自[https://github.com/fsharp/fsharp/blob/master/src/fsharp/lex.fsl](https://github.com/fsharp/fsharp/blob/master/src/fsharp/lex.fsl)），

```
let ident_char =
    letter
  | connecting_char
  | combining_char
  | formatting_char
  | digit
  | ['\''] 
```

那么问题来了 - 为什么 F# 规范有`_`in ident-char 的条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:38:59.857

我预计这将是出于历史原因（继承自 F# 在 SML 中的根源）或明确包含下划线（正如典型标识符规则所预期的那样：下划线或字母后跟零个或多个下划线或字母数字） .

（但这是推测性的，要获得真正的答案，为什么不问 F# 团队？）

# c# - 当Trackbar存在时拦截WinForm上的KeyDown事件

> ID：12542925
> 
> 赞同：0
> 
> 时间：2012-09-22T10:21:19.687
> 
> 标签：c#, winforms

这是荒唐的。我有一个我对 WinForm 感兴趣的 KeyDown 事件（获取 DownArrow Key 事件）。我添加了一个轨迹栏，它可以自动对焦（我不知道如何）。现在，当我按下向下箭头键时 - 它会自动更改 Trackbar 的值，而我的 Winform 代码不起作用。我尝试使用按钮隐藏 Trackbar，但无济于事。我什至有

```
e.SuppressKeyPress = true; 
```

在我的 Form1_KeyDown() 处理程序中。

救命啊，我快疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:48:00.540

您可以覆盖 ProcessCmdKey 方法。查看下面的链接了解更多信息。

[上、下、左、右箭头键不触发 KeyDown 事件](https://stackoverflow.com/questions/1646998/up-down-left-and-right-arrow-keys-do-not-trigger-keydown-event)

[http://www.getdotnetcode.com/gdncstore/free/Articles/Overriding%20a%20Controls%20ProcessCmdKey%20Function.htm](http://www.getdotnetcode.com/gdncstore/free/Articles/Overriding%20a%20Controls%20ProcessCmdKey%20Function.htm)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.processcmdkey(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.processcmdkey(v=vs.85).aspx)

# c++ - OpenCV 显示以 I420 编码的 avi 文件

> ID：12542929
> 
> 赞同：2
> 
> 时间：2012-09-22T10:21:56.083
> 
> 标签：c++, video, opencv, avi

我正在尝试使用 OpenCV 2.4.2（在 Windows 7 上的 Visual C++ 2010 Express 中）编写视频处理应用程序，但我无法显示某些 AVI 文件。大多数显示正确，但是当我使用以 I420 格式编码的 AVI 文件时，我得到的只是每一帧都有一个粉红色条纹图像（它在常规媒体播放器中正确显示）。

显示的输出：http: [//i.imgur.com/BOu6c.png ?1](http://i.imgur.com/BOu6c.png?1)

目前，我正在使用 C++ API，但是当我使用 C API 时也会发生同样的事情（来自此页面的代码：http: [//nashruddin.com/how_to_play_avi_files_with_opencv](http://nashruddin.com/how_to_play_avi_files_with_opencv)）。我觉得这很奇怪，因为在这个网站上的大多数答案和网络上的资源中，他们明确建议使用 I420 编码。有谁知道这可能是什么原因或如何解决？

这是我正在使用的代码的精简版本：

```
int main(int argc, char** argv){
string fname = "test.avi";
VideoCapture capture(fname);
if(!capture.isOpened()){
    cerr << "error opening " << fname << endl;
    return -1;
}

Mat frame;
namedWindow("output");
double rate = capture.get(CV_CAP_PROP_FPS);
int delay = 1000/rate;
while(true){
    if(!capture.read(frame)) break;
    cv::imshow("output", frame);
    if(waitKey(delay) >= 0) break;
}
capture.release();

return 0;
} 
```

我使用的是 OpenCV 的预编译版本，如果这会有所不同（http://sourceforge.net/projects/opencvlibrary/）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:31:54.383

好的，所以我设法在更多的计算机上进行了测试。一个刚刚崩溃，另一个，视频播放正常。事实证明，在默认 OpenCV 编译中启用 FFMPEG 是一个问题，而未压缩的 AVI 存在问题。在禁用 FFMPEG 的情况下重新编译 OpenCV，或者只使用不同的编解码器来压缩视频。

# c# - Windows 窗体、WPF 和 Windows 应用商店应用程序之间的线程模型差异

> ID：12542931
> 
> 赞同：1
> 
> 时间：2012-09-22T10:22:34.210
> 
> 标签：c#, windows-8, windows-runtime

将空闲的 Windows 窗体应用程序、WPF 应用程序或 Windows 应用商店应用程序中断到 Visual Studio（调试->全部中断）时，线程窗口显示它正在主线程上运行（= UI 线程对吗？）。调试单击事件处理程序时，前两个应用程序仍在主线程上执行，而 Windows 应用商店应用程序在工作线程上执行。这个线程实际上是 UI 线程吗？如果是，为什么它被标记为 Worker Thread？为什么前两个应用程序和 Windows Store 应用程序之间存在差异，这与 Windows 8 中的“所有异步”有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:02:19.037

是的，Windows 应用商店应用的运行方式与常规桌面应用*大不相同*。在底层，它们是进程外 COM 服务器，是与常规 Windows EXE 非常不同的激活模型。它们由 RPCSS 服务启动，启动线程调用 RoInitialize() 使自己成为 MTA 线程。WinRT 管道然后创建一个 STA 线程，该线程成为 UI 小工具和调度程序循环的所在地。这看起来像调试器中的工作线程。

所有这些都没有很好的记录，不知何故，CLR 鞋拔本身进入了这个激活模型。隐藏在 CLR 中内置的语言项目中且完全未记录的详细信息。你不应该担心它。这似乎可行，我很少看到程序员提出与 COM 线程模型作斗争的问题。

# c# - 有没有办法重构将事件附加到单独的静态方法？

> ID：12542933
> 
> 赞同：0
> 
> 时间：2012-09-22T10:23:10.643
> 
> 标签：c#, event-handling, dry, argument-passing, func

我会将表单的控件传递给另一个类，在那里我将为控件、其父控件等创建事件。我还需要在某些时候分离这些事件。但我需要确保我不会重复这些事件，如果事件已经附加。

所以我总是附加这样的事件，例如：

```
internal static void X(Control c, MouseEventHandler mouseDownEvent)
{
    c.TopLevelControl.MouseDown -= mouseDownEvent;
    c.TopLevelControl.MouseDown += mouseDownEvent;
} 
```

现在我也需要为其他处理程序附加类似的事件。例如，

```
internal static void X(Control c, EventHandler event)
{
    c.Enter -= event;
    c.Enter += event;
} 
```

现在我不想到处乱说`-=`，`+=`而是想拥有一个简单的实用功能，以便我可以在任何地方调用它。

就像是：

```
internal static void AttachEvent(this Control c, 
                                 Func<Control, MouseEventHandler> e, 
                                 MouseEventHandler m)
{
    e(c) -= m;
    e(c) += m;
} 
```

这样我就可以打电话了：

```
AttachEvent(c, control => control.MouseDown, mouseDownEvent); 
```

但这不会编译，我得到两个错误：

`The event 'System.Windows.Forms.Control.MouseDown' can only appear on the left hand side of += or -=`

和

`The left-hand side of an assignment must be a variable, property or indexer`

我希望将`AttachEvent`任何事件作为输入参数，但如果这太复杂，我可以单独使用 MouseEvents。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:39:33.217

我认为这是不可能的。C# 中的事件（类似于属性）由两种方法组成：添加和删除。因此，如果您在脑海中以两种方法扩展事件

```
e.add_MouseOver(Delegate)
e.remove_MouseOver(Delegate) 
```

您将看到无法传递对事件的引用并以其他方法对其进行处理。

+= 也是 C# 语法的一部分，仅适用于表达式左侧的引用事件。

# windows-phone-7 - 反应样本

> ID：12542939
> 
> 赞同：2
> 
> 时间：2012-09-22T10:24:05.490
> 
> 标签：windows-phone-7, winrt-xaml, reactiveui

我对微软创建的响应式扩展库以及在它之上构建的 MVVM 框架“reactiveui”感到非常惊讶。我很想在我的项目中使用它，但是我找不到在标准应用程序中使用它的任何示例。我看过 Paul（创建者）的博客文章，但我需要的不是代码示例，而是示例应用程序。

我想用 Reactive-UI 构建 windows phone7/windows 8 应用程序，但我想知道如何在那里准确地使用它（不是干的 3 行使用示例）。

如果您知道任何使用 Reactive-UI 的开源示例，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:31:24.757

您可以查看此[GitHub 存储库](https://github.com/reactiveui/reactiveui)

在 **ReactiveUI.Sample.WP7**文件夹中，您可以找到示例应用程序。

# php - 在Mysql中显示创建日期

> ID：12542945
> 
> 赞同：0
> 
> 时间：2012-09-22T10:25:43.710
> 
> 标签：php, mysql

我之前问过一个类似的问题，但仍然没有得到有效的答案。所以我在我的数据库中有一个表，其中包含有关用户的信息（名字，电子邮件...）和 2 个字段，其中包含创建日期（“创建”）和更新日期（“更新”）。“更新”字段的类型为 TIMESTAMP ，默认为 ="CURRENT_TIMESTAMP"，属性 ="on Current_timestamp" 。并且“created”字段具有 type="datetime" 而不是 null default="none"。问题是在显示创建日期时，我在每个用户“0000-00-00 00:00:00”旁边。这是将用户添加到数据库的代码：

```
$first_name = trim($_REQUEST['first_name']);
$last_name = trim($_REQUEST['last_name']);
$username = trim($_REQUEST['username']);
$password = trim($_REQUEST['password']);
$email = trim($_REQUEST['email']);
$created = strftime("%Y-%m-%d %H:%M:%S", time());
$insert_sql = sprintf("INSERT INTO users (first_name, last_name, username, password, email, created)" .
"VALUES('%s', '%s', '%s', '%s', '%s', '%s');",
mysql_real_escape_string($first_name),
mysql_real_escape_string($last_name),
mysql_real_escape_string($username),
mysql_real_escape_string(crypt($password, $username)),
mysql_real_escape_string($email),
mysql_real_escape_string($created));
mysql_query($insert_sql) or die(mysql_error()); 
```

请帮忙，我尝试了各种函数，如 date()、now()，但仍然不起作用。

编辑：我的表格显示的内容：

```
mysql> SELECT updated, created from users;
+---------------------+---------------------+
| updated             | created             |
+---------------------+---------------------+
| 2012-09-21 09:09:49 | 0000-00-00 00:00:00 |
| 2012-09-21 09:27:27 | 0000-00-00 00:00:00 |
| 2012-09-22 11:36:19 | 0000-00-00 00:00:00 |
| 2012-09-22 11:43:35 | 0000-00-00 00:00:00 |
+---------------------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:31:23.113

您正在时间戳字段中输入字符串；而是使用[*mysql 函数* `NOW()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)。您的查询应该是：

```
"INSERT INTO `users` (
     `first_name`,
     `last_name`,
     `username`,
     `password`,
     `email`,
     `created`) VALUES (
            '%s',
            '%s',
            '%s',
            '%s',
            '%s',
            NOW())" 
```

此外，考虑迁移以[`mysqli`](http://php.net/manual/en/book.mysqli.php)利用准备好的语句。

澄清评论；该字段的类型无关紧要，因为如果您给出它，MySQL将知道如何处理它`NOW()`：

```
mysql> create table temp (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, ts TIMESTAMP, dt DATETIME);
Query OK, 0 rows affected (0.00 sec)

mysql> insert into temp values ('',NOW(),NOW()),('',NOW(),NOW());
Query OK, 2 rows affected, 2 warnings (0.08 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> select * from temp;
+----+---------------------+---------------------+
| id | ts                  | dt                  |
+----+---------------------+---------------------+
|  1 | 2012-09-22 13:38:50 | 2012-09-22 13:38:50 |
|  2 | 2012-09-22 13:38:50 | 2012-09-22 13:38:50 |
+----+---------------------+---------------------+
2 rows in set (0.00 sec) 
```

如果您尝试插入，它将不起作用`UNIX_TIMESTAMP()`：

```
mysql> insert into temp values ('',UNIX_TIMESTAMP(),UNIX_TIMESTAMP());
Query OK, 1 row affected, 3 warnings (0.00 sec)

mysql> select * from temp order by id desc limit 1;
+----+---------------------+---------------------+
| id | ts                  | dt                  |
+----+---------------------+---------------------+
|  7 | 0000-00-00 00:00:00 | 0000-00-00 00:00:00 |
+----+---------------------+---------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:31:26.577

您能否检查记录是否具有`0000-00-00 00:00:00`其时间戳值。
如果您更改表，这是一个正常问题`create column timestamp (not null default CURRENT_TIMESTAMP) in MYSQL`，它会使用时间戳更新以前的记录`0000-00-00 00:00:00`。

解决方案是将数据库记录更新为具有除`0000-00-00 00:00:00`

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:33:13.570

由于您的字段是时间戳，因此您需要输入[时间戳](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)：

```
INSERT INTO users 
    (first_name, last_name, username, password, email, created)
    VALUES('%s', '%s', '%s', '%s', '%s', UNIX_TIMESTAMP()); 
```

# c++ - 从瑞典语到英语的词汇测试

> ID：12542954
> 
> 赞同：0
> 
> 时间：2012-09-22T10:27:31.357
> 
> 标签：c++, language-translation, lexicographic

这是我在这里的第一个三分！

此代码用于从瑞典语到英语的词汇表测试。

我有问题`(*it).engelska)`！为什么我不能`(*it).engelska`在这段代码中使用？

提前谢谢了！！

```
void prov(list<Glosor> lista)
{
        string testet;
        int santal = 0;
        int rsvar = 0;
        list<Glosor>::iterator it;
        for(it = lista.begin(); it != lista.end(); it++){
            cout << (*it).svenska << " betyder på engelska: "; // *it writes the swedish word for translate.
            getline(cin, testet); //Here you write the english word and "if" function test if it's correct.
            if(testet == (*it).engelska){
                cout << "Ratt svar!\n";
                rsvar++;
                }
            else{
            cout << "Tyvärr fel svar rätt svar är: "<< (*it).engelska) << endl; // Here i use "it" to write the correct answare if you guess wrong. But it keep telling me "error: expected ';' before ')' token"
            }
            santal++;
        }
        cout << "Du hade " << rsvar << " rätt svar av " << santal << " möjliga" << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T10:30:15.863

第 15 行有一个右括号，之后`engelska`没有匹配的左括号：

```
cout << "Tyvärr fel svar rätt svar är: "<< (*it).engelska) << endl;
//                           here------------------------^ 
```

同样在第`FOR`7 行的循环中，使用 ++it 而不是 it++。前者不会创建迭代器的副本，这意味着它执行得更快。

# firefox - Mozilla Firefox 单选按钮问题

> ID：12542957
> 
> 赞同：2
> 
> 时间：2012-09-22T10:28:16.333
> 
> 标签：firefox, cross-browser, radio-button

我正在开发一个网络应用程序。我使用单选按钮来选择类别，如下图所示。

![](../Images/c938e3889cfe1e902abb3bf8325237c2.png)

* * *

![在此处输入图像描述](../Images/84ec7ad35697475b23626c0769b6b35b.png)

On 选择第一个单选按钮会隐藏 Overlay 按钮。在选择第二个单选按钮时显示一个按钮，单击该按钮我可以从叠加层中选择数据。

单击第二个单选按钮后，如果我单击浏览器刷新按钮，则默认选择选项 2，但不显示“从覆盖中选择”。此问题出现在 Mozilla Firefox 中。谁能建议如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:31:48.583

在刷新过程中保留的值是表单的一项便利功能。在这种情况下，您将需要一些额外的页面初始化脚本来查看单选按钮上的值，以便像单击发生一样进行初始化。

注意：如果您使用 Ctrl+F5 刷新，您通常会看到浏览器将加载页面，其中包含刷新之前的所有表单值。您的用户不会这样做，但它说明了浏览器如何处理您的输入以保存它。

# android - 如何从 Views 触摸事件中获取正确的值

> ID：12542963
> 
> 赞同：0
> 
> 时间：2012-09-22T10:30:38.837
> 
> 标签：android, opengl-es, touch, glsurfaceview

我在`GLSurfaceView`. 视图大小为 1280x696，因为底部带有软键、时间等的 android（平板电脑）状态栏（屏幕分辨率为 1280x800），但`OnTouchListener`正在接收坐标为 [646.0,739.0] 的触摸事件，因此我的 gluunproject 方法失败返回正确的值有没有办法返回尊重这些边界的事件？或者我应该如何重新计算位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:36:26.783

通常在此类坐标系之间过渡：如果您从系统 A 过渡到 B 并且您有点

*   AOrigin（接收器视图的左上角）
*   AEnd（接收器视图的右下角（原点 + 大小））
*   BOrigin（您的 GL 视图的左上角）
*   BEnd（您的 GL 视图的右下角（原点 + 大小））

其中 AOrigin 和 BOrigin 表示视图中的相同位置，对于 AEnd 和 BEnd 也是如此，然后对于接收器视图中的点 P：

```
X = B.Origin.x + ((P.x - AOrigin.x)/(AEnd.x - AOrigin.x)) * (BEnd.x - B.Origin.x)
Y = B.Origin.y + ((P.y - AOrigin.y)/(AEnd.y - AOrigin.y)) * (BEnd.y - B.Origin.y) 
```

对于您的情况（由于缺乏信息，我不确定）AOrigin 位于 (0,0)，AEnd 位于 (646, 739)，BOrigin 位于 (0,0) 且 BEnd 位于 (1280, 800) ：

```
X = P.x/646 * 1280
Y = P.y/739 * 800 
```

您也可以使用它来转换到/从“GL”坐标。一个常见的情况是左上角位于 (0, 0) 且底部位于 (1280, 800) 的视图，并且您的“GL”坐标从 (-1, 1) 到 (1, -1)：

```
X = -1 + (P.x/1280)*2
Y = 1 + (P.y/800)*(-2) 
```

另请注意，您可以使用代表屏幕上相同位置的任意 2 对点，只要`(origin-end).x != 0`AND`(origin-end).y != 0`

# android - Android 数据库：预检代码

> ID：12542967
> 
> 赞同：1
> 
> 时间：2012-09-22T10:31:22.993
> 
> 标签：android, sqlite

我是 Android 新手，我正在制作我的第一个 Android 应用程序。在那，我正在创建一个数据库。在这个应用程序中，第一次启动应用程序时，我要求用户输入新*密码*并在 mynewscreen 中确认密码。下次用户启动应用程序时，它会要求用户输入他现有的密码并检查数据库中的密码。

但是在代码中，我附近有错误`checkDataBase()`

我的代码：

```
SQLiteDatabase sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);
          Cursor c = sampleDB.rawQuery("SELECT Password FROM " +
                  "password" +
                  " where Username = 'clicklock'", null); 
```

任何人都可以帮助游标 c 语句中的错误是什么？

```
 public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        logm("App started");

        String chreturn=Make_db();
        Toast.makeText(getApplicationContext(),chreturn,Toast.LENGTH_LONG).show();

        checkDataBase();       

}

 public String Make_db()
    {
   String errormsg = "";
   SQLiteDatabase sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);
   try {
        sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                PASSWORD +
                " (Username VARCHAR, Password VARCHAR);");

        sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +            PHOTO + " (photoname VARCHAR, photopath VARCHAR,id INTEGER PRIMARY KEY);");
           msg ="DatabaseCreated";
       } catch (SQLiteException se ) {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
        msg ="Not Done Error With Database";
       }
 return msg;

   }
   public  String checkDataBase() {

    try
    {
        SQLiteDatabase sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);
      Cursor c = sampleDB.rawQuery("SELECT Password FROM " +
              "password" +
              " where Username = 'clicklock'", null);

      String password_db = c.getString(c.getColumnIndex("password"));
        if(password_db=="")
        {

            Intent i = new Intent(CameraLaunch.this, MyNewScreen.class);                
            startActivity(i);               
        }
        else if(password_db=="123123")
        {               
            Intent i = new Intent(CameraLaunch.this, MyNewScreen.class);                
            startActivity(i);       
        }

      return "working";
    }
     catch (SQLiteException se ) {
         Log.e(getClass().getSimpleName(), "Could not create or Open the database");
         Make_db();
         return "Could not create or Open the database";
     }        
} 
```

# c++ - 使用带有 clang++ -stdlib=libc++ 的 libstdc++ 编译库

> ID：12542971
> 
> 赞同：73
> 
> 时间：2012-09-22T10:31:43.970
> 
> 标签：c++, c++11, clang, libstdc++, libc++

我在 Mac OS X (10.8.2) 下使用 C++ 工作，最近我想出了使用 C++11 功能的需求，这些功能可以通过使用 libc++ stdlib 的 clang++ 编译器获得。但是，我还需要使用一些针对 libstdc++（来自 MacPorts）编译和链接的遗留库。

这样做时，我得到了链接错误，因为使用例如 的遗留库的标头`std::string`需要针对`std::__1::basic_string`（即 libc++ 的实现`std::string`）而不是实现来解析`std::basic_string`。

有没有办法在开发中混合这两个库（例如，通过使用一些预处理器标志？）

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-22T17:57:35.903

您所看到的是使用*内联命名空间*来实现 ABI 版本控制。

**那是什么意思：**

libstdc++`std::string`是与 libc++ 不同的数据结构`std::string`。前者是参考计数设计，而后者不是。尽管它们与 API 兼容，但它们与 ABI 不兼容。这意味着，如果您`std::string`使用 libstdc++ 构造 a，然后将其传递给与 libc++ 链接的其他代码，则接收代码会认为它具有 libc++ `std::string`。即接收者不知道它应该增加或减少引用计数。

如果没有内联命名空间，结果将是运行时错误。你能期望的最好的结果就是崩溃。使用内联命名空间，此运行时错误将转换为链接时错误。

对于程序员来说，libstdc++`std::string`和 libc++`std::string`看起来像是同一类型。但是对于链接器来说，它们看起来像是完全不同的类型（线索是`std::__1`命名空间）。并且链接者的观点是正确的。它们**是**完全不同的类型。

所以是的，你可以操纵一些预处理器标志来链接东西。但是，您将不得不花时间调试由此产生的运行时错误。

做你想做的唯一方法是使这些dylibs之间的接口不涉及`std::`诸如`string`. 例如，您可以`char`改为传递数组。您甚至可以将内存所有权从 libstdc++ 链接的代码转移到 libc++ 链接的代码，反之亦然（它们都将掉入同一个 malloc 池）。

# jquery-ui - 如何为 html 表中的每一行添加一个 jquery 对话框？

> ID：12542974
> 
> 赞同：0
> 
> 时间：2012-09-22T10:31:53.037
> 
> 标签：jquery-ui, dialog

我正在尝试使用 jQuery 和 dataTables 插件在表格的每一行中添加一个 jQuery 对话框。我想添加特定于每一行的对话框数据。我在其他帖子中看到您可以想到两种方法：1）每行一个对话框。2）所有行只有一个对话框，然后用特定数据填充它。

在这个例子中，我在一个表中有一个课程列表，包括名称（nombre）、代码（codigo）和模式（modo）。对于每一行，都有一个按钮（修饰符），应该显示一个对话框来编辑该课程的数据。当然，在每个对话框中，都必须加载该行的数据。

我的想法（在其他帖子中查看了其他想法）是将对话框放在行内，这样我就可以从该行加载数据。

我创建了一个类（masInfo），并在 Javascript 代码中放置了一个函数，该函数应该在按钮之后打开对话框。但它不起作用。

你有什么主意吗？谢谢。

# HTML Y JSP

```
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link type="text/css"
                href="css/milk.css" rel="stylesheet" />
    <title>Paginadores tablas</title>
    </head>
    <body>
        <%
            CatalogoCursos catalogoCursos = CatalogoCursos.getCatalogoCursos();
            ArrayList<Curso> cursos = catalogoCursos.getCursos();
        %>
        <div id="miTabla">
            <form id="formulario" name="formulario" method="post">
                <table id="tabla">
                    <thead>
                        <tr>
                            <th>Nombre </th>
                            <th>Código </th>
                            <th>Modo de juego </th>
                            <th> Acción </th>
                        </tr>
                    </thead>
                    <tbody>
                    <%
                        for(Curso curso: cursos) {
                    %>
                        <tr>
                            <td><%=curso.getNombre()%></td>
                            <td><%=curso.getCodigo()%></td>
                            <td><%=curso.getStringModo()%></td>
                            <td> 
                                <input type="button" class="masInfo" value="modificar"/>
                                <div title="Modificar curso">
                                    <table>
                                        <tr>
                                            <td><input type="text" name="mod_nombre" value="<%=curso.getNombre()%>"/></td>
                                            <td><input type="text" name="mod_codigo" value="<%=curso.getCodigo()%>"/></td>
                                            <td><input type="text" name="mod_modo" value="<%=curso.getStringModo()%>"/></td>
                                        </tr>
                                    </table>
                                </div> 
                            </td>
                            </td>
                        </tr>
                    <%
                        }
                    %>
                    </tbody>
                </table>
            </form>
        </div>

    </body>
    </html> 
```

# JAVASCRIPT

```
<script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui.custom.js"></script>
    <script type="text/javascript" src="js/jquery.dataTables.js"></script>
    <script type="text/javascript">
    (function($) {
        // Dialog
        $('.masInfo').next().dialog({
            autoOpen: false,
            width: 600,
            buttons: {
                "Borrar": function() {
                    document.formulario.submit();
                    $(this).dialog("close");
                },
                "Cancelar": function() {
                    $(this).dialog("close");
                }
            }
        });

        // Dialog Link
        $('.masInfo').click(function(){
            $('#dialog').dialog('open');
            return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:38:06.733

您最好只使用一个对话框并在单击按钮时在对话框中填充相关信息。您当前执行此操作的方式将导致大量重复的输入元素。

因此，HTML 看起来像：

```
<div id="miTabla">
    <table id="tabla">
        <thead>
            <tr>
                <th>Nombre </th>
                <th>Código </th>
                <th>Modo de juego </th>
                <th> Acción </th>
            </tr>
        </thead>
        <tbody>
        <%
            for(Curso curso: cursos) {
        %>
            <tr>
                <td><%=curso.getNombre()%></td>
                <td><%=curso.getCodigo()%></td>
                <td><%=curso.getStringModo()%></td>
                <td> 
                    <input type="button" class="masInfo" value="modificar"/>
                </td>
                </td>
            </tr>
        <%
            }
        %>
        </tbody>
    </table>
</div>
<div title="Modificar curso" id="ModificarDialog">
    <form id="formulario" name="formulario" method="post">
        <table>
            <tr>
                <td><input type="text" name="mod_nombre" id="mod_nombre" /></td>
                <td><input type="text" name="mod_codigo" id="mod_codigo" /></td>
                <td><input type="text" name="mod_modo" id="mod_modo" /></td>
            </tr>
        </table>
    </form>
</div> 
​​​ 
```

JavaScript 将更改为：

```
(function($) {
    // Dialog
    $('#ModificarDialog').dialog({
        autoOpen: false,
        width: 600,
        buttons: {
            "Borrar": function() {
                document.formulario.submit();
                $(this).dialog("close");
            },
            "Cancelar": function() {
                $(this).dialog("close");
            }
        }
    });

    // Dialog Link
    $('.masInfo').click(function(){
        var cells = $(this).parent().find('td');
        $('#mod_monbre').val(cells.eq(0).text());
        $('#mod_codigo').val(cells.eq(1).text());
        $('#mod_modo').val(cells.eq(2).text());
        $('#dialog').dialog('open');
        return false;
    });
});​ 
```

# linux - HTML 到 PDF（使用 Google chrome API）？

> ID：12542975
> 
> 赞同：7
> 
> 时间：2012-09-22T10:31:59.413
> 
> 标签：linux, google-chrome, pdf-generation, server-side, html2pdf

我有一些 HTML 文档，我需要在服务器上打印/生成它（无 UI、自动化、基于 linux）。

我对文档的 Google Chrome“html 到 pdf”非常满意，但我想知道是否有可能为此目的使用 Google Chrome 浏览器中的“html 到 pdf”打印引擎的“组件”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:57:11.297

实际上我找到了解决方案：第一个 wkhtmltopdf [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

最后我意识到 mpdf (php lib) 也可以帮助我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-04T13:56:44.427

如果您需要 HTTP API 服务将 HTML 从 URL 转换为 PDF，您可能需要查看我写的[这个答案](https://stackoverflow.com/questions/25046187/how-to-generate-a-pdf-from-html-web-page/48608455#48608455)，它解释了如何做到这一点。

例子：

```
https://dhtml2pdf.herokuapp.com/api.php?url=https://www.github.com&result_type=show 
```

在浏览器中显示网站生成的 PDF `https://www.github.com`。

[请参阅 Github 中的项目](https://github.com/Dellos7/dhtml2pdf)。

希望能帮助到你。

# dreamweaver - cellSpace 在 DreamWeaver CS6 中不工作

> ID：12542976
> 
> 赞同：0
> 
> 时间：2012-09-22T10:32:28.430
> 
> 标签：dreamweaver

我已将表格代码粘贴到 gridContainer div 中的新 div（使用 Fluid Grid Layout 选项）一切似乎都很好，但定义了单元格间距，当我尝试更改间距时没有任何反应，它保持为 0。

以下是表格标记：

```
<table align="center" cellpadding="0" cellspacing="15">
    <col span="7" width="160px" />
    <row span="7" width="160px" />
    <!---Row 1--->  
    <tr align="center"  height="160px">
        <td colspan="2" >
            <img src="images/buttons/Optimus.png" />
            </td>
        <td colspan="2" >
            <img src="images/buttons/MapleSim.png">
            </td>
        <td colspan="2" >
            <a href="content/maple.html" ><img src="images/buttons/Maple.png"></a>
            </td>
        <td colspan="1" bgcolor="#40b040">
            <img src="images/buttons/about_us.png">
            </td>
    </tr>

    <!---Row 2--->  
    <tr align="center"  height="160px">
        <td colspan="2" bgcolor="#40b040">
            <img src="images/buttons/QFD.white.png">
            </td>
        <td colspan="1" bgcolor="#cc00cc">
            <img src="images/buttons/learning_maple.png">
            </td>
        <td colspan="3" rowspan="2" 
            align="left" valign="top" bgcolor="#aaaaff">
            <img src="images/buttons/news.png">                 
            News will be shown here
            </td>
        <td colspan="1" bgcolor="#ff0000">
            <img src="images/buttons/services.png">
            </td>
    </tr>

    <!---Row 3--->  
    <tr align="center"  height="160px">
        <td colspan="1" bgcolor="#6766cc">
            <img src="images/buttons/events.png">
            </td>
        <td colspan="1" bgcolor="#cccc00">
            <img src="images/buttons/forum.png">
            </td>
        <td colspan="1" bgcolor="#4040ff">
            <img src="images/buttons/links.png">
            </td>
        <td colspan="1" bgcolor="#ffbf00">
            <img src="images/buttons/shopping_cart.png">
            </td>
    </tr>

    <!---Row 4--->  
    <tr align="center"  height="160px">
        <td colspan="2" bgcolor="#ff0000">
            <img src="images/buttons/commercial_users.png">
            </td>
        <td colspan="1" bgcolor="#ffbf00">
            <img src="images/buttons/student_special.png">
            </td>
        <td colspan="1" bgcolor="#40b000">
            <img src="images/buttons/student_special.png">
            </td>
        <td colspan="1" bgcolor="#ff00cc">
            <img src="images/buttons/instruction.png">
            </td>
        <td colspan="1" bgcolor="#cc00cc">
            <img src="images/buttons/learning_maple.png">
            </td>
        <td colspan="1" bgcolor="#4040ff">
            <img src="images/buttons/download.png">
            </td>
    </tr>
</table> 
```

您可以在这一行中看到`<table align="center" cellpadding="0" cellspacing="15">`间距为 15，但是在检查任何浏览器时，它显示为设置为 0

任何想法如何解决它？

在此先感谢，沙哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:41:23.587

好吧，我想我太仓促了。

该表似乎使用了来自boilerplate.css 的两个定义

```
table {
    /* [disabled]border-collapse: collapse; */
    /* [disabled]border-spacing: 0; */
} 
```

如您所见，只需禁用它们即可解决问题。如果有任何其他选项可以在不禁用的情况下覆盖（可能使用！important），我会很高兴知道它。

# tomcat - Tomcat应用程序在一段时间后没有响应

> ID：12542986
> 
> 赞同：1
> 
> 时间：2012-09-22T10:34:17.557
> 
> 标签：tomcat

我有一个场景，其中部署在 Tomcat 上的应用程序运行良好，但大约一周后停止响应。

我无法理解问题可能是什么，尽管我的猜测是它与某些内存问题有关。

有没有其他人遇到过这个问题，以及解决这个问题的可能方法是什么。

谢谢，

切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:01:40.353

进行线程转储以查看应用程序的线程在做什么。

在您的 %JDK_Home%/bin 文件夹下有一个程序 jvisualvm.exe（或 linux 上的 .sh）将它连接到您正在运行的应用程序并选择线程选项卡并单击线程转储按钮。这将显示您是否有卡住的线程。一旦您的服务器用完线程，它将停止响应请求。

如果您首先想到的是内存问题，那么在您的 %tomcat%/logs 文件夹中，您会在日志中看到异常，说明存在内存异常。

# html - IE6（快乐）怪癖 - 零星问题

> ID：12542987
> 
> 赞同：0
> 
> 时间：2012-09-22T10:34:20.330
> 
> 标签：html, css, internet-explorer, internet-explorer-6

很抱歉给每个人发一个 IE6 帖子 - 希望有人遇到过这些问题。不幸的是，我现在没有链接，但第一个问题是偶尔会在不保持纵横比的情况下拉伸图像 - 图像在标签中定义了它们的高度和宽度，然后在 css 文件中它们的宽度设置为比那小一点。有时图像加载很好，有时真的很糟糕。有什么想法吗？在所有其他浏览器中都很好。

另一个我以前没有遇到过的问题是，我网站上的某些页面需要刷新页面才能使浮动元素正确对齐。IE6 中会发生这种情况有什么原因吗？

谢谢，再次道歉：）

# jquery - 选中取消选中 Yes No 单选按钮以编程方式 jQuery Mobile

> ID：12542988
> 
> 赞同：2
> 
> 时间：2012-09-22T10:34:21.220
> 
> 标签：jquery, html, jquery-mobile, cordova, radio-group

我有一个数据库，其中我得到值 0 或 1（分别为否/是）。
如何在 jQuery Mobile 中选中/取消选中单选按钮并检查其状态。我的代码如下

HTML 代码

```
<label>Are you Mad? </label>   
 <fieldset data-role="controlgroup" data-type="horizontal">     
 <input data-mini="true" type="radio" name="rdIsBP" id="rdIsBPYes" value="" />
 <label for="rdIsBPYes">YES</label>
 <input data-mini="true"  type="radio" name="rdIsBP" id="rdIsBPNo" value="choice-1"  />
 <label for="rdIsBPNo">NO</label>
</fieldset> 
```

JavaScript 代码

```
function  CheckRadioStateYNoo(val,rdButton){      
      try{
      var radios = document.getElementsByName(rdButton);
      for( i = 0; i < radios.length; i++ ) {
       if(i==0)
       {
          if(val==1) 
          {
              //radios[i].checked=true;
              $("#" + rdButton + "Yes").attr ("checked", "checked");
              alert('rdButton' +   radios[i].checked);               
          }          
      }
       else{
           if(val==1) 
           {
               radios[i].checked=true;
               alert('rdButton' +  radios[i].checked);               
           }
       }
      }
      }
      catch(e){alert(e);}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:40:14.460

```
$('#rdIsBPYes').prop('checked', value);
$('#rdIsBPNo').prop('checked', !value); 
```

这是**jQuery 1.6**及更高版本的首选方法。

如果您的**jQuery比****1.6**旧，您可以执行以下操作：

```
if (value) {
   $('#rdIsBPYes').attr('checked','checked');
   $('#rdIsBPNo').removeAttr('checked');
} else {
   $('#rdIsBPNo').attr('checked','checked');
   $('#rdIsBPYes').removeAttr('checked');
} 
```

更新：我误导了 的语法`.prop()`，现已更正

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:49:33.000

我尝试了很多实验，只有这段代码对我
有用

html代码

```
<label> Have you had surgery within the last 12 months?</label> 
            <fieldset data-role="controlgroup" data-type="horizontal">

            <input data-mini="true" type="radio" name="rdIsSurgery" id="rdIsSurgeryYes" value="choice-1" />
            <label for="rdIsSurgeryYes">YES</label>

            <input data-mini="true"  type="radio" name="rdIsSurgery" id="rdIsSurgeryNo" value="choice-4"  />
            <label for="rdIsSurgeryNo">NO</label>
    </fieldset> 
```

js代码

```
 function  CheckRadioStateYN(val,rdButton){      
     try{
             if (val==1){               
                 $('#' + rdButton + 'Yes').attr('checked', true).checkboxradio('refresh');
                 $('#' + rdButton + 'No').removeAttr('checked');          
                     }
         else{
         $('#' + rdButton + 'No').attr('checked', true).checkboxradio('refresh');
         $('#' + rdButton + 'Yes').removeAttr('checked');

         }        
        }
          catch(e)
          {alert(e);}
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T08:53:47.853

```
 <label>Are you Mad? </label>
    <fieldset data-role="controlgroup" data-type="horizontal">
        <input data-mini="true" type="radio" name="rdIsBP" class="fakeRadio" value="yes"  checked />
        <label for="rdIsBPYes">YES</label>
        <input data-mini="true"  type="radio" name="rdIsBP" class="fakeRadio" value="no"  />
        <label for="rdIsBPNo">NO</label>
    </fieldset> 
```

jQuery

```
$(".fakeRadio").click(function(){
    $(".fakeRadio").prop( "checked", false );
    $(this).prop( "checked", true );

    /* If you need to grab the value */
    // var val = $(this).attr("value") ;  
    // alert(val);   
}); 
```

# iphone - stringWithContentsOfURL 与 wifi 的结果不同

> ID：12542993
> 
> 赞同：0
> 
> 时间：2012-09-22T10:35:30.707
> 
> 标签：iphone, xcode, nsstring

我有以下代码：

```
NSString *url = [NSString stringWithContentsOfURL:myURL encoding:NSStringEncodingConversionAllowLossy error:&error]; 
```

并且我使用 Wifi 得到的字符串与使用移动网络不同。基本上是一样的，但我没有空格就得到它。就像在 wifi 中这样：

```
<html> hello </html> 
```

我的移动网络将是这样的：

```
<html>hello</html> 
```

怎么会这样？

我正在使用 iPhone SDK 6.0 和 Xcode 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:56:35.660

我认为这是因为，当您尝试使用移动数据获取数据时，会发送标头中的信息表明该请求已使用移动数据，因此它会尝试最小化响应，而 wifi 则不是这样，它不会不要尝试在使用 wifi 时尽量减少响应。

# ajax - 编辑后刷新数据表行（添加、修改、删除...）

> ID：12542994
> 
> 赞同：0
> 
> 时间：2012-09-22T10:35:31.637
> 
> 标签：ajax, jsf-2, xhtml, primefaces

> **可能重复：**
> [如何从 p:dataTable 本身内部对 p:dataTable 进行 ajax 更新？](https://stackoverflow.com/questions/12516397/how-to-ajax-update-the-pdatatable-from-inside-the-pdatatable-itself)

在我的 xhtml 页面中，我有一个包含 Group 类型对象的 dataTable 和一个用于将新组添加到数据表的按钮，最终在数据库中我使用的是 sessionScoped 托管 Bean，因此我需要在添加后刷新我的数据表行新纪录 。

为此，我使用了命令按钮组件的更新属性，但数据表未刷新，代码如下：

```
 <p:fieldset legend="Groups">  

     <p:commandButton id="newGroup" value=" New  Group" onclick="newGoupDlg.show();" 
      type="button" update="groupsDataTable"/>
                   <br/>

      <p:dataTable id="groupsDataTable" var="group" value="#
         {projectAdminisrationMB.groupsList}" 
                    rowKey="#{group.name}"
                     rowIndexVar="rowIndex"
                      binding="#{table}">  

                      <f:facet name="header">  

                      </f:facet>  

                         <p:column id="column2">
            <f:facet name="header">
            <h:outputText value="Group Name"></h:outputText>
            </f:facet>
         <p:graphicImage value="/images/group/#{group.name}.gif" />  

     <h:commandLink action="#{projectAdminisrationMB.showGroupDetails}" 
         value="#{group.name}">  
 <f:setPropertyActionListener target="#{projectAdminisrationMB.selectedGroup}" 
       value="#{group}" />
 <f:setPropertyActionListener target="#{projectAdminisrationMB.selectedGroupName}" 

    value="#{group.name}" />

     <f:setPropertyActionListener target="#
    {projectAdminisrationMB.selectedGroupDescription}" value="#{group.description}" />
       <f:setPropertyActionListener target="#
     {projectAdminisrationMB.selectedGroup.dbRowIndex}" value="#{table.rowIndex}" />

       </h:commandLink>

    </p:column>
        <p:column id="column3">
    <f:facet name="header">
    <h:outputText id="text3" value=" Group Description "></h:outputText>
     </f:facet>
      <h:outputText value="#{group.description}"></h:outputText>
    </p:column>

               <f:facet name="footer">  

                      </f:facet>  
                 </p:dataTable>  

             <p:dialog header="New Group" widgetVar="newGoupDlg"  width="750" 

       showEffect="explode" hideEffect="explode">  
                        <br/>   <br/>  
                        <h:outputText value=" New Group : " /> 

                        <p:inputText id="newGroupName" value="# 

             {projectAdminisrationMB.newGroup.name}">
                          <f:validator validatorId="requiredValidator"></f:validator>
                        </p:inputText>
                         <br/>   <br/>   
                         <h:outputText value="Group Description :" />  
                            <br/>   <br/>   
                         <p:editor id="newGroupDescription" value="# 

        {projectAdminisrationMB.newGroup.description}" width="600"/> 
                        <br/>   <br/>   

         **<p:commandButton id="ValidateNewGroup"  value="Validate"  
            actionListener="#{projectAdminisrationMB.addNewGroup}" 
            onclick="newGoupDlg.hide()"  update="groupsDataTable" ></p:commandButton>**

                        <p:commandButton id="CancelNewGroup" value=" Cancel " 
              onclick="newGoupDlg.hide()"></p:commandButton>

                    </p:dialog>  

                    <br/>   <br/>   

               </p:fieldset> 
```

任何想法都会被欣赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:30:35.730

问题的最常见原因是未正确引用数据表的 id。

在浏览器中检查数据表的实际 id 是什么。

当您的数据表位于像表单这样的容器中时，容器的 id 会附加到数据表的 id 之前（默认情况下），由`:`.

所以这：

```
<h:form id="form">
    <p:dataTable id="dt" ...
</h:form> 
```

将导致数据表的 id 为`form:dt`

当从另一个容器内引用容器内的元素时，您需要从根开始搜索。这是通过`:`在 id 前面添加一个来完成的。

例子：

```
<h:form id="form">
    <p:dataTable id="dt" ...
</h:form>

<h:form id="btnForm">
    <p:commandButton update=":form:dt" ...
</h:form> 
```

您还可以使用绑定：

```
<h:form binding="#{form}">
    <p:dataTable id="#{dt}" ...
</h:form>

<h:form id="#{btnForm}">
    <p:commandButton update=":#{dt.clientId}" ...
</h:form> 
```

# jquery - 使用 jquery 禁用表行

> ID：12542996
> 
> 赞同：0
> 
> 时间：2012-09-22T10:35:38.693
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试使用 jquery 禁用表格行内的所有控件，但无法这样做...下面是我的 html 代码

```
<tr id="trChild2">
                    <td>
                        2
                    </td>
                    <td style="height: 30px;">
                        <%:Html.TextBoxFor(m=>m.childName2) %><%--<br />
                        <%: Html.ValidationMessageFor(m=>m.SpouseName,null,new{@Class="field-validation-message"}) %>--%>
                    </td>
                    <td style="height: 30px; text-align: center;">
                        &nbsp;M<%: Html.RadioButtonFor(m=>m.genderIdChild2,1) %>
                        &nbsp;F<%:Html.RadioButtonFor(m=>m.genderIdChild2,2) %>
                    </td>
                    <td style="height: 30px; text-align: center;">
                        <%:Html.TextBoxFor(m=>m.ageChild2,new{Style="width:30px;",maxlength=3}) %><%--<br />
                        <%:Html.ValidationMessageFor(m=>m.SpouseAge,null,new{@Class="field-validation-message"}) %>--%>
                    </td>
                    <td style="height: 30px; text-align: center;">
                        &nbsp;&nbsp;&nbsp;Married<%: Html.RadioButtonFor(m=>m.maritialStatusChild2,1) %>
                        UnMarried<%:Html.RadioButtonFor(m=>m.maritialStatusChild2,2) %>
                    </td>
</tr> 
```

下面是我的 jquery 代码，我用它来禁用表格行内的所有控件。

```
$("#trChild2").find("input,button,textarea").attr("disabled", true); 
```

请注意，这`#trChild2`是我的表格行 ID

请让我知道我做错了什么......

感谢和问候萨米尔谢赫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:50:50.730

将您的代码放在`ready`块中：

```
$(function(){
    $("#trChild2").find("input,button,textarea").attr("disabled", true); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:04:02.190

可能有几个原因。您的代码中可能存在 jQuery 冲突。使用下面的代码忽略冲突。

```
$.noConflict();/jQuery.noConflict(); 
```

然后不要使用 $，而是使用 jQuery 单词。[阅读更多](http://api.jquery.com/jQuery.noConflict/)

尝试添加 (document).ready 函数。它允许您在加载 DOM 后执行您想要的功能。

```
jQuery(document).ready(function($) {
  jQuery("#trChild2").find("input,button,textarea").attr("disabled", true);
}); 
```

如果您想知道 (document).ready 是如何工作的，请[在此处阅读更多](http://api.jquery.com/ready/)

希望这可以帮助您完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:50:33.890

请检查[http://jsfiddle.net/3QuT4/](http://jsfiddle.net/3QuT4/)这是一个简单的例子，它按照您指定的方式工作。

# ios - Why are applicationFrame and statusBarFrame obtained from two different objects?

> ID：12542998
> 
> 赞同：0
> 
> 时间：2012-09-22T10:36:01.640
> 
> 标签：ios, cocoa-touch, uikit

I think `statusBarFrame` and `applicationFrame` complement each other exactly to form the whole screen's bounds. And the frame's value is relative to the "raw" portrait orientation screen coordinates (which I think is the screen's bounds). So for example, when an iPad is rotated upside down, the output of

```
NSLog(@"the status bar frame is %@", 
    NSStringFromCGRect([[UIApplication sharedApplication] statusBarFrame]));

NSLog(@"the applicationFrame is %@", 
    NSStringFromCGRect([[UIScreen mainScreen] applicationFrame])); 
```

is

```
the status bar frame is {{0, 1004}, {768, 20}}
the applicationFrame is {{0, 0}, {768, 1004}} 
```

But a questions is, how come these two values that complement each other come from two different objects: the application instance and the `UIScreen` instance, but not from the same object? (say, both from the `UIScreen` object?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:00:52.187

Simply, it's because there is only one status bar per application, but there could be multiple screens (e.g. via AirPlay) for a single application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:51:08.517

A lot of Application Kit API and also Objective-C paradigms are based around the concept of ownership.

An application owns its statusBar while the Screen owns the Application Window.

For example (No cars here) I own the table in my House but the landlord owns my House.

And more to the point Apple created the Appkit API and has created its own 'physics' and consistency . If you want your own universe and physics make your own API.

Have a look at a WWDC 2012 lecture about creating long lasting code. It goes into this really well.