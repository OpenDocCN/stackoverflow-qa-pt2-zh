# StackOverflow 问答 14888000-14888999

# r - 如何将多个文件中的列写入一个数据框

> ID：14888011
> 
> 赞同：3
> 
> 时间：2013-02-15T03:55:30.857
> 
> 标签：r, lapply

我有大约 100 个文本文件，每个文件有 3 列。我想将每个文件读入一个对象，然后将内容读入一个包含 300 列的矩阵。

创建了一个矩阵：

```
ptamat <- matrix(ncol=300, nrow=2665) 
```

将文件读入对象

```
myfiles <- lapply(Sys.glob('pta_out__*'), read.table) 
```

在 myfiles 对象中显示前 2 个文件的内容

```
myfiles[[1:2]] 
```

将“myfiles”对象中的文件复制到矩阵

```
ptamat[,1:300] <- myfiles[[1:100]] 
```

最后一部分不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:03:41.347

以下应`cbind`列出所有元素：

```
do.call(cbind, myfiles) 
```

# linux - 如何 RSYNC 单个文件？

> ID：14888012
> 
> 赞同：115
> 
> 时间：2013-02-15T03:55:38.760
> 
> 标签：linux, file, rsync

目前我只 RSync`Directories`像这样：

```
* * * * * rsync -avz /var/www/public_html/images root@<remote-ip>:/var/www/public_html 
```

那么我如何`rsync`像一个文件一样，`/var/www/public_html/.htaccess`？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2013-02-15T04:36:54.653

您可以按照与目录相同的方式执行此操作，但您将文件名的完整路径指定为源。在您的示例中：

```
rsync -avz   --progress  /var/www/public_html/.htaccess root@<remote-ip>:/var/www/public_html/ 
```

正如评论中提到的：由于`-a`包含*recurse*，一个小错字就可以启动完整的目录树传输，因此更简单的方法可能只是使用`-vz`，或将其替换为`-lptgoD`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-02T08:42:03.040

基本语法

```
rsync options source destination 
```

例子

```
rsync -az /var/www/public_html/filename root@<remote-ip>:/var/www/public_html 
```

[阅读更多](http://dasunhegoda.com/rsync-practical-examples/727/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-08-16T18:50:47.213

如果相对于源和目标的根目录，文件路径中的所有目录都已经存在，Michael Place 的答案非常有效。

但是如果你想用这个源路径同步文件怎么办：

*/source-root/a/b/文件*

到具有以下目标路径的文件：

*/目标根/a/b/文件*

并且目录*a*和*b*不存在？

您需要运行 rsync 命令，如下所示：

```
rsync -r --include="/a/" --include="/a/b/" --include="/a/b/file" --exclude="*" [source] [target] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-19T19:22:47.700

迄今为止，其中两个答案并不完全正确，他们将获得多个文件，而另一个则不是那么简单，这是 IMO 的一个更简单的答案。

下面只得到一个文件，但你必须用 mkdir 创建 dest 目录。这可能是最快的选择：

```
mkdir -p ./local/path/to/file
rsync user@remote:/remote/path/to/file/ -zarv --include "filename" --exclude "*" ./local/path/to/file/ 
```

如果 /remote/path 中只有一个文件实例，则如果您执行以下操作，rsync 可以为您创建目录。这可能会花费更多时间，因为它会搜索更多目录。另外，它将为 /remote/path 中不在 ./local 中的目录创建空目录

```
cd ./local
rsync user@remote:/remote/path -zarv --include "*/" --include "filename" --exclude "*" . 
```

请记住 --include 和 --exclude 的顺序很重要。

# objective-c - 代码中的实例/对象是什么？

> ID：14888013
> 
> 赞同：1
> 
> 时间：2013-02-15T03:55:40.460
> 
> 标签：objective-c, object, xcode4

有人可以向我描述以下代码（objective-C）中的实例/对象是什么。我很困惑，因为 void 之前的 (-) void 意味着它是一个实例的方法，但我不知道实例/对象在哪里。

```
 #import <Foundation/Foundation.h>
//interface section
@interface Fraction: NSObject
- (void) print;
- (void)setNumerator: (int) n;
- (void)setDenominator: (int) d;
@end
//implementation section
@implementation Fraction
{
    int numerator;
    int denominator;
}
-(void) print;
{
    NSLog(@"%i/%i",numerator,denominator);
}
-(void) setNumerator:(int)n
{
    numerator = n;
}
-(void)setDenominator:(int)d
{
    denominator = d;
}
@end
//program section
int main(int argc, const char * argv[])
{
//this is a program to work with fractions-class version
    @autoreleasepool {
        Fraction *myFraction;
        //create an instance of a fraction
        myFraction = [Fraction alloc];
        myFraction = [myFraction init];
        //set fraction to 1/3
        [myFraction setNumerator:1];
        [myFraction setDenominator:3];
        //display the fraction via print methoD

        NSLog(@"the value of myFraction is:");
        [myFraction print];
         }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:30:44.137

myFraction 是 Fraction 类的实例。实例方法必须针对实例而不是类，如您所见，print、setNumerator 和 setDenominator 都针对 myFraction。

# javascript - 如何通过单击相应的文本字段在同一图像上显示不同的文本。使用 javascript 或 jquery？

> ID：14888014
> 
> 赞同：-1
> 
> 时间：2013-02-15T03:55:57.477
> 
> 标签：javascript, jquery, html

我将文本设置为一个按钮，单击该按钮我想在一个图像上显示该文本。如何使用 jquery 或 javascript 实现这一点。

可能这会有所帮助 [http://store.apple.com/us/browse/home/ipod/editorial/engraving_giftwrap](http://store.apple.com/us/browse/home/ipod/editorial/engraving_giftwrap)

在此页面上，您可以看到“iPad Engraving Gallery”链接我正在谈论这种东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:27:34.390

您可以拥有一个具有图像大小的元素，并将其视为`background-image: url(/path/to/image)`普通元素（文本和所有）

或者，您可以拥有`<img>`自己的元素，并在其上放置一个具有透明背景的固定/绝对定位元素。

假设在图像上有文本的 div 是`#img-text`.

```
$(".text-sample").on('click', function () {
    $("#img-text").text($(this).text());
}); 
```

# android - Facebook SDK/Android, Eclipse 找不到资源文件

> ID：14888015
> 
> 赞同：1
> 
> 时间：2013-02-15T03:55:57.710
> 
> 标签：android, eclipse, facebook

尝试在 Eclipse 中构建项目 HelloFacebookSampleActivity 时，layout/main.xml 有错误

> 在包“com.facebook.samples.hellofacebook”中找不到属性“confirm_logout”的资源标识符

违规行是

> 脸书：确认注销=“假”。

facebook:confirm_logout 是在 FacebookSDK 项目中定义的，而不是在这个项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:05:06.867

您需要正确配置您的构建路径，并确保将 Facbook SDK 项目作为库项目进行检查。这些错误通常是由于构建路径中的错误配置造成的。

在您确定上述内容后，再次清理并构建。

> 尝试转到项目>清理所有项目>确定，看看是否有帮助。如果您转到“问题”选项卡并粘贴您遇到的不同错误，它可能会为我们提供更多帮助您的上下文。

# php - 如何通过 jQuery (blueimp / jQuery-File-Upload) 动态设置上传目的地

> ID：14888020
> 
> 赞同：3
> 
> 时间：2013-02-15T03:57:39.530
> 
> 标签：php, jquery, upload, blueimp

这是一个关于 blueimp 的 jQuery-File-Upload 的问题，可以在这里找到：

[blueimp 的 jQuery 文件上传](https://github.com/blueimp/jQuery-File-Upload)

有谁知道如何通过 jQuery 设置上传目标 url 或文件夹？使用下载的 PHP 示例，您能提供一个示例吗？

非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-12T03:20:49.007

Blueimp 画廊插件有一个名为 main.js 的 .js 文件，只需更改此行：

```
$('#fileupload').fileupload({
    url: 'server/php/'
}); 
```

对于您先前声明的 DynamicVar：

```
var DynamicVar = "MyDynamic/folder";

$('#fileupload').fileupload({
    url: DynamicVar
}); 
```

干杯！。

# django - 使用代码更改重新启动 SuperVisor

> ID：14888022
> 
> 赞同：5
> 
> 时间：2013-02-15T03:57:59.723
> 
> 标签：django, supervisord

我正在用 Gunicorn 和 Nginx 和 Supervisor 运行一个 django 项目。一切正常，但是当我对代码进行一些更改时，主管无法识别它，它仍然会读取旧代码。你能帮我么。我试图重新启动supervisorctl，它没有工作

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T05:39:25.937

如果您正在谈论 python 代码更改，只需*使用* `supervisorctl`.

```
supervisorctl restart gunicorn (or whatever you called this) 
```

如果您正在谈论主管配置更改，`supervisorctl reread`请在启动主管启动脚本之前使用`supervisorctl start foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-09T07:26:35.530

**“您可以通过发送HUP**信号优雅地在 Gunicorn 中重新加载您的应用程序： `$ kill -HUP masterpid`”，[http ://docs.gunicorn.org/en/stable/faq.html](http://docs.gunicorn.org/en/stable/faq.html)

例如，`pkill -HUP gunicorn`

“向 Gunicorn 主进程发送**HUP**信号 - 重新加载配置，使用新配置启动新工作进程并正常关闭旧工作进程。”，[http://docs.gunicorn.org/en/stable/signals.html](http://docs.gunicorn.org/en/stable/signals.html)

# c++ - C++：尝试通过指针和函数复制类时出现分段错误

> ID：14888023
> 
> 赞同：0
> 
> 时间：2013-02-15T03:58:10.653
> 
> 标签：c++

代码最后一步的目的是创建一个类的临时实例，在该类的私有数据成员上使用一个集合，在该实例仍在作用域内时打印出该实例，然后使用一个析构函数来处理指针和类实例。我收到了分段错误错误，即使进行了很多更改，我也已经收到了一段时间，所以这让我非常沮丧。

```
 #include <cstdlib>
 #include <iostream>
 #include <cstring>

using namespace std;

//Class Definition

class Box{

      //Private data members
      private:
      int height;
      int width;
      int depth;
      char *name;
      void pri_setname(char *n);

      public:
      //Public constructors and deconstructor
      Box(int,int,int,char *);
      Box(const Box &obj);
      ~Box();
      //Public function prototypes
      void width_set(int w);
      void height_set(int h);
      void depth_set(int d);
      void name_set(char *n);
      void name_print();
      int volume_print();
      void objCreateKeep(Box **, char *n);
      void objCreateTmp(char *n);
};

//Default constructor
Box::Box(int h1 = 1,int w1 =1, int d1 =1,char *n1 = "Blue Box")
{
  strcpy(name,n1);
  height = h1;
  width = w1;
  depth  = d1;

}
//Copy constructor
Box::Box(const Box &obj)
{
  name = new char[25];
  strcpy(name,obj.name);
  height = obj.height;
  width = obj.width;
  depth = obj.depth;
}
//Destructor
Box::~Box()
{
  delete [] name;
  cout<<"Destructor invoked, name pointer is deallocated";
}

void Box::pri_setname(char *n)
{
   strcpy(name,n);  
}

//Set the width of Box()
void Box::width_set(int w)
{
     width = w;
}

//Set the height of Box()
void Box::height_set(int h)
{
     height = h;
}

//Set the depth of Box()
void Box::depth_set(int d)
{
     depth = d;
}

//Set the name of Box()
void Box::name_set(char *n)
{
    name = new char[30];
    strcpy(name,n);
    pri_setname(name);
}

//Prints the name of the box
void Box::name_print()
{
  cout<<"Box Name: "<<name;
}

//Calculate and Print volume of Box()
int Box::volume_print()
{
   int volume = 0;
   volume = height * width * depth;
   return volume ;
}

void Box::objCreateTmp(char *n)
{
   Box tmp;
   tmp.name_set(n);
   tmp.name_print();
   tmp.~Box();
}

void Box::objCreateKeep(Box **pp, char *n)
{
  Box *p = new Box;
  pp = &p;
  p->objCreateTmp(n);
  delete p;
}

int main(int argc, int argv[])
{

    //Check for correct # of cmd line args
    /*
    if(argc != 3)
    {
      cout<<"Wrong number of arguments";
    }
    */
/*
    Box a;
    a.height_set(argv[1]);
    a.width_set(argv[2]);
    a.depth_set(argv[3]);

    Box b = a;
    Box c = a;

    //Set the names of box B and C
    b.name_set("Red Box");
    c.name_set("Orange Box");

    a.name_print();
    b.name_print();
    c.name_print();

*/
    Box *keep;
    Box **pp;

    keep->objCreateKeep(pp,"Blue Box");
    keep->objCreateKeep(pp,"Red Box");
    keep->objCreateKeep(pp,"Orange Box");

    system("PAUSE");
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:01:53.407

除了这里的其他答案：

`tmp.~Box();`- 不。

析构函数在超出范围时被调用。

```
delete [] name; 
```

在你的析构函数中被调用，现在它将被调用两次。坏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:02:05.447

在行

```
pp = &p; 
```

您将`address`of分配`p`给`pp`

当你`delete`p 时，你记得它住在哪里并不重要......

```
p->objCreateTmp(n);
delete p; 
```

# django - 自定义 Django 表单

> ID：14888024
> 
> 赞同：1
> 
> 时间：2013-02-15T03:58:17.590
> 
> 标签：django, django-forms

有一个关于如何在 Django 框架中显示标签的基本问题。我希望我的 HTML 表看起来像：

### HTML 表格对象：

```
<table>
  <tr>
    <td>Cell1</td>
    <td>Cell2</td>
  </tr>
 </table> 
```

### 当前的 Django 代码

```
from django import forms

class PFAMInp(forms.Form):
    Cell1 = forms.CharField(widget=forms.Textarea (attrs={'cols': 20, 'rows': 2}))
    Cell2 = forms.FloatField(required=True) 
```

后来我在 GAE 上使用 Python 将这个 Django 表单转换为 HTML。

### 生成html的Python代码

```
class PFAMInputPage(webapp.RequestHandler):
    def get(self):
        html = html + str(PFAMdb.PFAMInp())
        self.response.out.write(html)
app = webapp.WSGIApplication([('/.*', PFAMInputPage)], debug=True)
def main():
    run_wsgi_app(app)
if __name__ == '__main__':
    main() 
```

我的问题是：有没有办法自定义这个 django 模板，让它在一行中显示两个，而不是显示两个标签？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:30:14.553

您可以选择使用`Form.as_p()`或`Form.as_ul()`将表单分别打印为一系列`<p>`标签或`<li>`标签来调用表单。

[完整的 API 规范在这里。](https://docs.djangoproject.com/en/dev/ref/forms/api/)

这是一个如何工作的示例：

```
from django import forms

    class PFAMInp(forms.Form):
        Cell1 = forms.CharField(widget=forms.Textarea (attrs={'cols': 20, 'rows': 2}))
        Cell2 = forms.FloatField(required=True)

    pfami_form = PFAMInp().as_p() 
```

# git - 从现有的“样板”存储库创建新项目

> ID：14888025
> 
> 赞同：16
> 
> 时间：2013-02-15T03:58:20.430
> 
> 标签：git, github

我创建了一个 Laravel “样板”项目，其中包含我常用的功能/库。

使用这个样板作为新项目的基础的正确 git 过程是什么？我可以想到两个选择：

1.  叉`boilerplate`到`newproject`并开始。我无意将`newproject`更改拉回`boilerplate`.
2.  克隆`boilerplate`并将远程源更新为新的干净存储库。

我倾向于第二个选项，因为它感觉像是与样板代码的一个很好的干净分离。这样做我会失去任何很酷的 git 可能性吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T07:54:00.567

2019 年 6 月更新，6 年后：

请参阅“[使用存储库模板生成新存储库](https://github.blog/2019-06-06-generate-new-repositories-with-repository-templates/)”

> 跨代码库共享样板代码是软件开发中的一种固定模式。
> 使用我们最喜欢的工具和目录结构引导一个新项目可以帮助程序员从想法变成“Hello world！” 效率更高，手动配置更少。
> 
> 今天，**我们很高兴引入存储库模板，使样板代码管理和分发成为 GitHub 上的一等公民。**
> 
> 要开始使用，您只需将存储库标记为模板，您就可以立即使用它来生成包含模板存储库的所有文件和文件夹的新存储库。

[![https://github.blog/wp-content/uploads/2019/06/repository-template.gif](../Images/6f4ae3c2f2f55a12b3591508f347036e.png)](https://i.stack.imgur.com/R4Kg0.gif)

> 每个模板存储库都有一个**名为的新 URL 端点`/generate`**，可让您更有效地分发模板

* * *

2013年的原始答案：

考虑到您将从GitHub 项目中包含的模板*之一*`boilerplate`将项目存储在 Github上，我会：

*   在 GitHub 上创建一个新的空仓库（没有链接`boilerplate`，[不需要 fork](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)）
*   克隆它
*   克隆`boilerplate` 到磁盘上的单独位置
*   将正确的模板从本地`boilerplate`克隆复制到新的本地克隆 Github 存储库
*   ( `git add`, `git commit`) 将该特定模板推回您的新 Github 存储库。
*   从那里开始工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T04:46:09.900

“叉子”不是 Git 的概念。你把 Git 和 Github 混为一谈了吗？如果你的意思是在 Github 上 fork 项目，那么它与克隆 repo 相同，克隆听起来就像你要找的一样。您永远不会将更改推回“样板”存储库。但是，您可以使用合并或变基将样板存储库的更新拉入从它衍生的项目中。如果没有这样的事情是可取的，那为什么还要用 Git 做呢？只需制作目录的递归副本，然后从那里开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-18T19:29:19.720

@VonC 的回答没有错，但您也可以使用[集线器](https://hub.github.com/)创建[一个单行](https://github.com/github/hub/issues/348#issuecomment-21292460)代码，根据您的种子存储库有效地启动一个新的存储库（本地和远程）：

```
clonefork() {
    hub clone "$1"
    cd "${1##*/}"
    hub fork
} 
```

在你的外壳中：

```
$ clonefork user/seed-repo 
```

通过“克隆”您的种子存储库，您还可以获得[一个网络图](https://github.com/blog/39-say-hello-to-the-network-graph-visualizer)，显示由它生成的所有存储库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-13T10:34:13.420

按照@VonC 的指示，我为我的终端创建了一个函数并将其粘贴到我的别名中。

每次我开始一个新项目时，我都会在 GitHub 上创建一个 repo，获取确切的项目名称，然后在我的终端上输入“bp newProject”

```
bp () {
# Clone the boilerplate project from GitHub
git clone https://github.com/username/boilerplate.git;

# Rename the boilerplate folder to newProject
mv boilerplate "$@";

# Access the newProject folder
cd "$@";

# Delet the .git folder
rm -rf .git;

# Initialize git
git init;

# Add;
git add .;

# Commit using 'initial setup; as  message;
git commit -m 'initial setup';

# And push it 
git remote add origin https://github.com/username/"$@".git;
git push -u origin master
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-26T21:19:36.160

我刚刚发布了 CLI 工具，即基于现有 repo 创建新项目，甚至在 Github 上远程创建自己的项目。 [https://github.com/theJacobDev/binit](https://github.com/theJacobDev/binit)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-15T22:04:49.727

这不完全是您要问的，但它也可能有助于解决类似的问题。

有一个工具可以从`yaml`配置文件[https://github.com/g4s8/gitstrap引导 Github 存储库](https://github.com/g4s8/gitstrap)

它可以：

1.  在 Github 上创建新的存储库
2.  与本地目录同步
3.  应用模板（例如带有徽章的 README、CI 配置、许可证内容等）
4.  为 Github 存储库配置 webhook
5.  邀请合作者

因此您可以为类似项目编写模板，而不是创建样板仓库，并在使用该工具创建新的 Github 仓库时使用配置文件应用它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-05T09:21:16.187

我也创建了一个工具来解决这类问题。我与[独裁者一起](https://github.com/tomasbjerre/dictator-builder)[开发了一个概念](https://github.com/tomasbjerre/dictator-builder)，该概念决定了文件系统的某些部分。

独裁者使用模板/样板项目配置。像这个例子： [https ://github.com/tomasbjerre/dictator-react-boilerplate](https://github.com/tomasbjerre/dictator-react-boilerplate)

独裁者配置dictatables，例如：

```
{
  "message": "Copy react-boilerplate",
  "actions": [
    {
      "beSupersetOfJsonFile": "react-boilerplate/package.json",
      "target": "package.json"
    },
    {
      "copyFrom": "react-boilerplate",
      "target": "."
    },
    {
      "haveLineContaining": ["*.tgz"],
      "target": ".gitignore"
    }
  ]
} 
```

这个独裁者可以作为命令行工具运行：

```
npx dictator-react-boilerplate 
```

或者让它与你的构建工具一起运行，也许像：

```
{
  "name": "react-boilerplate-example",
  "version": "1.2.3",
  "description": "asdasasd",
  "scripts": {
    "prepare": "dictator-react-boilerplate"
  },
  "devDependencies": {
    "dictator-react-boilerplate": "0.0.8"
  }
} 
```

# c - 互斥锁线程

> ID：14888027
> 
> 赞同：38
> 
> 时间：2013-02-15T03:58:46.053
> 
> 标签：c, linux, pthreads, mutex, multiprocess

我是多线程/进程编程的新手。所以这是我需要澄清的。

处理 A 代码

```
pthread_mutex_lock()
    pthread_create(fooAPI(sharedResource)) //fooAPI creates another thread with shared resource that shares across processes.
pthread_mutex_unlock() 
```

`sharedResource`使用上面的伪代码，如果互斥锁没有解锁，进程B是否可以访问？

如何正确访问进程 B 中的 sharedResource？

是否有任何清晰的可视化图表来解释互斥锁、线程和进程之间的关系？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-15T04:15:11.637

您需要做的是调用 pthread_mutex_lock 来保护互斥锁，如下所示：

```
pthread_mutex_lock(&mutex); 
```

一旦你这样做了，在你调用这个线程`pthread_mutex_lock(mutex)`之前，任何其他的调用都不会返回。`pthread_mutex_unlock`因此，如果您尝试调用 pthread_create，您将能够创建一个新线程，并且该线程将能够（错误地）使用共享资源。您应该`pthread_mutex_lock`从您的`fooAPI`函数中调用，这将导致函数等待共享资源可用。

所以你会有这样的事情：

```
#include <pthread.h>
#include <stdio.h>

int sharedResource = 0;
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

void* fooAPI(void* param)
{
    pthread_mutex_lock(&mutex);
    printf("Changing the shared resource now.\n");
    sharedResource = 42;
    pthread_mutex_unlock(&mutex);
    return 0;
}

int main()
{
    pthread_t thread;

    // Really not locking for any reason other than to make the point.
    pthread_mutex_lock(&mutex);
    pthread_create(&thread, NULL, fooAPI, NULL);
    sleep(1);
    pthread_mutex_unlock(&mutex);

    // Now we need to lock to use the shared resource.
    pthread_mutex_lock(&mutex);
    printf("%d\n", sharedResource);
    pthread_mutex_unlock(&mutex);
} 
```

编辑：跨进程使用资源遵循相同的基本方法，但您需要将内存映射到其他进程。下面是一个使用 shmem 的例子：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/file.h>
#include <sys/mman.h>
#include <sys/wait.h>

struct shared {
    pthread_mutex_t mutex;
    int sharedResource;
};

int main()
{
    int fd = shm_open("/foo", O_CREAT | O_TRUNC | O_RDWR, 0600);
    ftruncate(fd, sizeof(struct shared));

    struct shared *p = (struct shared*)mmap(0, sizeof(struct shared),
        PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);

    p->sharedResource = 0;

    // Make sure it can be shared across processes
    pthread_mutexattr_t shared;
    pthread_mutexattr_init(&shared);
    pthread_mutexattr_setpshared(&shared, PTHREAD_PROCESS_SHARED);

    pthread_mutex_init(&(p->mutex), &shared);

    int i;
    for (i = 0; i < 100; i++) {
        pthread_mutex_lock(&(p->mutex));
        printf("%d\n", p->sharedResource);
        pthread_mutex_unlock(&(p->mutex));
        sleep(1);
    }

    munmap(p, sizeof(struct shared*));
    shm_unlink("/foo");
} 
```

编写程序以更改 p->sharedResource 留给读者作为练习。:-)

顺便说一句，忘了注意，互斥锁必须设置 PTHREAD_PROCESS_SHARED 属性，这样 pthread 才能跨进程工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T04:37:39.083

Q1.) 假设进程 B 尝试获取您在进程 A 中锁定的同一个互斥锁的所有权（您将其留在伪代码之外），那么不，进程 B 在互斥锁被锁定时无法访问 sharedResource，因为它将等待锁定互斥锁直到它被进程 A 释放。当互斥锁被锁定时（或发生错误时！），它将从 mutex_lock() 函数返回

Q2.) 在进程 B 中，确保始终锁定互斥锁，访问共享资源，然后解锁互斥锁。此外，检查 mutex_lock( pMutex ) 例程的返回码，以确保您确实拥有该互斥锁，并且只有在您已锁定该互斥锁时才解锁该互斥锁。从过程 A 中执行相同的操作。

访问互斥体时，两个进程基本上应该做同样的事情。
lock() 如果锁成功，则 { access sharedResource unlock() }

Q3.) 是的，有很多图表：=) [https://www.google.se/search?q=mutex+thread+process&rlz=1C1AFAB_enSE487SE487&um=1&ie=UTF-8&hl=en&tbm=isch&source=og&sa=N&tab=wi&ei =ErodUcSmKqf54QS6nYDoAw&biw=1200&bih=1730&sei=FbodUbPbB6mF4ATarIBQ](https://www.google.se/search?q=mutex+thread+process&rlz=1C1AFAB_enSE487SE487&um=1&ie=UTF-8&hl=en&tbm=isch&source=og&sa=N&tab=wi&ei=ErodUcSmKqf54QS6nYDoAw&biw=1200&bih=1730&sei=FbodUbPbB6mF4ATarIBQ)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T04:41:11.817

一个进程至少包含一个线程（想想 main 函数）。多线程代码只会产生更多线程。互斥锁用于在共享资源周围创建锁，以避免数据损坏/意外/不需要的行为。基本上，它提供了异步设置中的顺序执行——其要求源于对共享数据结构的非常量非原子操作。

生动地描述了人们（线程）排队去洗手间（共享资源）时的互斥锁。当一个人（线程）在使用浴室时放松自己（非常量非原子操作），他/她应该确保门是锁定的（互斥锁），否则可能会导致被抓到（不需要的行为） )

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-07T11:56:34.020

下面的代码片段将帮助您理解互斥锁解锁概念。尝试对代码进行空运行。（进一步通过改变等待时间和处理时间，你可以建立你的理解）。

**供您参考的代码：**

```
#include <stdio.h>
#include <pthread.h>

void in_progress_feedback(int);

int global = 0;
pthread_mutex_t mutex;
void *compute(void *arg) {

    pthread_t ptid = pthread_self();
    printf("ptid : %08x \n", (int)ptid);    

    int i;
    int lock_ret = 1;   
    do{

        lock_ret = pthread_mutex_trylock(&mutex);
        if(lock_ret){
            printf("lock failed(%08x :: %d)..attempt again after 2secs..\n", (int)ptid,  lock_ret);
            sleep(2);  //wait time here..
        }else{  //ret =0 is successful lock
            printf("lock success(%08x :: %d)..\n", (int)ptid, lock_ret);
            break;
        }

    } while(lock_ret);

        for (i = 0; i < 10*10 ; i++) 
        global++;

    //do some stuff here
    in_progress_feedback(10);  //processing-time here..

    lock_ret = pthread_mutex_unlock(&mutex);
    printf("unlocked(%08x :: %d)..!\n", (int)ptid, lock_ret);

     return NULL;
}

void in_progress_feedback(int prog_delay){

    int i=0;
    for(;i<prog_delay;i++){
    printf(". ");
    sleep(1);
    fflush(stdout);
    }

    printf("\n");
    fflush(stdout);
}

int main(void)
{
    pthread_t tid0,tid1;
    pthread_mutex_init(&mutex, NULL);
    pthread_create(&tid0, NULL, compute, NULL);
    pthread_create(&tid1, NULL, compute, NULL);
    pthread_join(tid0, NULL);
    pthread_join(tid1, NULL);
    printf("global = %d\n", global);
    pthread_mutex_destroy(&mutex);
          return 0;
} 
```

# php - validate() 函数如何阻止虚假身份验证请求？

> ID：14888039
> 
> 赞同：1
> 
> 时间：2013-02-15T03:59:56.410
> 
> 标签：php, authentication, openid, lightopenid

我刚刚调试了一段我的 php 代码，其中我的登录代码没有正确验证请求。我不知何故跳过了使用 ->validate() 函数，我的一位网站测试人员通过从谷歌（下）获取响应并将他的电子邮件更改为管理员电子邮件，设法登录了管理员帐户。

> `http://mydomain/login/?openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2013-02-15T03%3A56%3A27ZY153c0JFI0G5wA&openid.return_to=http%3A%2F%2Flocalhost%2Flogin%2F&openid.assoc_handle=AMlYA9UI33WW3XfuQGjITXSgB0a0x8nsqD91iuWK9mdvwyBm4EEbk08g&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle%2Cns.ext1%2Cext1.mode%2Cext1.type.namePerson_first%2Cext1.value.namePerson_first%2Cext1.type.namePerson_last%2Cext1.value.namePerson_last%2Cext1.type.contact_email%2Cext1.value.contact_email&openid.sig=laAMatkmFjOPrKPsmaIEg%3D&openid.identity=https3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAawnUG6Mr7_ynO1mN-fThr9wbOo&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%OawnUG6Mr7_ymuB1mN-fTFhr9wbOo&openid.ns.ext1=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.ext1.mode=fetch_response&openid.ext1.type.namePerson_first=http%3A%2F%2Faxschema.org%2FnamePerson%2Ffirst&openid.ext1.value.namePerson_first=T&openid.ext1.type.namePerson_last=http%3A%2F%2Faxschema.org%2FnamePerson%2Flast&openid.ext1.value.namePerson_last=M&openid.ext1.type.contact_email=http%3A%2F%2Faxschema.org%2Fcontact%2Femail&openid.ext1.value.contact_email=**myemail%email.com**`

这让我们对 open id 如何使用 validate() 函数进行验证、请求来自何处、被发送回正确的源以及捕获任何未从 openid 服务器直接发送回的内容非常感兴趣？sig 或 identity 变量是否被用作某种公钥/私钥系统？

如果有人可以帮助我理解那将是很酷的。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:27:31.857

从提供者返回的肯定断言包含一个名为的字段`openid.signed`，用于在消费者端验证保存在`openid.sig`. [此处](http://openid.net/specs/openid-authentication-2_0.html#generating_signatures)概述了生成/验证签名的过程。

从您显示的断言中，这些是签名字段：

```
op_endpoint,claimed_id,identity,return_to,response_nonce,assoc_handle,ns.ext1,
ext1.mode,ext1.type.namePerson_first,ext1.value.namePerson_first,
ext1.type.namePerson_last,ext1.value.namePerson_last,ext1.type.contact_email,
ext1.value.contact_email 
```

您可以看到这`ext1.value.contact_email`是签名字段之一，因此是签名的一部分，因此如果签名匹配，您可以确定该值没有被篡改。

`assoc_handle`指的是在方法期间在消费者和提供者之间建立的共享秘密`associate`。此共享密钥用于生成签名字段值的键控散列，形成要比较的签名。

如果找不到共享密钥，则`check_authentication`必须使用该方法，在此处概述并[在](http://gitorious.org/lightopenid/lightopenid/blobs/master/openid.php#line739)[此处](http://openid.net/specs/openid-authentication-2_0.html#rfc.section.11.4.2)使用。

# java - JAVA：多线程环境中的 EntityManager 对象

> ID：14888040
> 
> 赞同：25
> 
> 时间：2013-02-15T03:59:59.613
> 
> 标签：java, persistence, entitymanager

如果我有多个线程，每个线程都使用注入器来获取 EntityManager 对象，每个线程都使用 em 对象来选择其他类对象的列表。准备在 for 循环中使用。

如果一个线程先完成并调用 clear()，那会影响其他线程吗？像for循环会有异常吗？

关闭（）怎么样？

如果答案是“取决于”，我应该查看什么（类定义？方法调用？）以及在哪里（java 代码？注释？xml？）以了解它是如何依赖的？

我没有写源代码，我只是在没有文档的情况下使用别人的库。

谢谢你。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-09-09T12:43:27.923

这是完整的工作`thread-safe Entity Manager Helper`。

```
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

public class EntityManagerHelper {

    private static final EntityManagerFactory emf;
    private static final ThreadLocal<EntityManager> threadLocal;

    static {
        emf = Persistence.createEntityManagerFactory("Persistent_Name");
        threadLocal = new ThreadLocal<EntityManager>();
    }

    public static EntityManager getEntityManager() {
        EntityManager em = threadLocal.get();

        if (em == null) {
            em = emf.createEntityManager();
            // set your flush mode here
            threadLocal.set(em);
        }
        return em;
    }

    public static void closeEntityManager() {
        EntityManager em = threadLocal.get();
        if (em != null) {
            em.close();
            threadLocal.set(null);
        }
    }

    public static void closeEntityManagerFactory() {
        emf.close();
    }

    public static void beginTransaction() {
        getEntityManager().getTransaction().begin();
    }

    public static void rollback() {
        getEntityManager().getTransaction().rollback();
    }

    public static void commit() {
        getEntityManager().getTransaction().commit();
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-15T04:22:51.207

实体管理器不是线程安全的（源[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html)）并且不能在线程之间共享。每个线程都需要使用自己的实体管理器，否则会发生不好的事情，不管是调用`clear()`还是`close()`调用。

但是，如果注入器使用自己的实体管理器注入每个线程，那么事情应该没问题。

Spring 和可能的其他 DI 框架将为真正的实体管理器注入一个基于 ThreadLocal 的代理到您的 bean 中。每个线程进行的调用将代理到实体管理器的真实线程本地实例——即使看起来实体管理器在多个线程之间共享，这也是事情的工作方式。

有关如何注入实体管理器的更多详细信息将有所帮助（Spring 等）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T04:20:30.947

EntityManager 的管理有两种类型：容器管理和应用程序管理。对于应用程序托管，获取 EntityManager 的首选方法是通过 EntityManagerFactory。Java EE 教程是这样说的：

> 容器管理的实体管理器
> 
> 使用容器管理的实体管理器，EntityManager 实例的持久性上下文由容器自动传播到在单个 Java Transaction API (JTA) 事务中使用 EntityManager 实例的所有应用程序组件。
> 
> JTA 事务通常涉及跨应用程序组件的调用。要完成 JTA 事务，这些组件通常需要访问单个持久性上下文。当通过 javax.persistence.PersistenceContext 注解将 EntityManager 注入应用程序组件时，就会发生这种情况。持久性上下文会随着当前 JTA 事务自动传播，映射到同一持久性单元的 EntityManager 引用提供对该事务内持久性上下文的访问。通过自动传播持久化上下文，应用程序组件不需要将 EntityManager 实例的引用传递给彼此，以便在单个事务中进行更改。Java EE 容器管理容器管理的实体管理器的生命周期。
> 
> 要获取 EntityManager 实例，请将实体管理器注入应用程序组件：
> 
> ```
> @PersistenceContext 
> EntityManager em; 
> ```
> 
> 应用程序管理的实体管理器
> 
> 另一方面，对于应用程序管理的实体管理器，持久性上下文不会传播到应用程序组件，并且 EntityManager 实例的生命周期由应用程序管理。
> 
> 当应用程序需要访问不随 JTA 事务在特定持久性单元中的 EntityManager 实例之间传播的持久性上下文时，使用应用程序管理的实体管理器。在这种情况下，每个 EntityManager 创建一个新的、隔离的持久性上下文。EntityManager 及其关联的持久性上下文由应用程序显式创建和销毁。当无法直接注入 EntityManager 实例时也会使用它们，因为 EntityManager 实例不是线程安全的。EntityManagerFactory 实例是线程安全的。

[http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T05:26:44.573

You normally have transactions around what you do with database objects. What each given thread sees about the changes made by other threads is controlled by 'transaction isolation' settings.

Start learning about different isolation settings and apply the right setting according to your needs. There is a trade-off between accuracy and speed. [http://en.wikipedia.org/wiki/Isolation_%28database_systems%29](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-26T08:34:15.823

我离开了三年左右:)，但就在 EJB 中注入 EntityManager 而言，这里是 Adam Bien 博客条目的链接[http://www.adam-bien.com/roller/abien/entry/is_in_an_ejb_injected](http://www.adam-bien.com/roller/abien/entry/is_in_an_ejb_injected)

从那里复制粘贴：

“您可以将 EntityManager 直接注入 EJB。但是：它是线程安全的吗？：

```
@Stateless
public class BookServiceBean implements BookService {

  @PersistenceContext EntityManager em;

  public void create(Book book) { this.em.persist(book);}

 } 
```

"

答案是，再次复制粘贴：

“在没有任何进一步配置的情况下使用 EJB 是线程安全的，无论您是同时调用一个方法还是多个方法。容器关心调用的序列化。”，

这可能会更清楚，但这意味着您可以在无状态会话 bean 中注入 EntityManager，而不必担心 EntityManager 并发问题。

# iphone - iOS 中的计算器示例：= 符号未响应我的代码

> ID：14888045
> 
> 赞同：-2
> 
> 时间：2013-02-15T04:00:48.593
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试学习 iOS，并且正在关注斯坦福大学的视频，我正在尝试重新创建一个计算器示例。但由于某种原因，= 按钮不起作用或没有给出结果。我一步一步地练习，但根本不适合我。任何人都可以帮助我，我将非常感激。

//这是我的Calculator.h

```
#import <UIKit/UIKit.h>
#import "CalculatorBrain.h"

@interface ViewController : UIViewController {

    IBOutlet UILabel *display;
    CalculatorBrain *brain;
    BOOL userIsInTheMiddleOfTypingANumber;
}
-(IBAction) digitPressed:(UIButton *) sender;
-(IBAction) operationPressed: (UIButton *) sender;

@end
<code>

//This is my Calculator.m 

<pre>
#import "ViewController.h"
#import "CalculatorBrain.h"

@implementation ViewController

-(CalculatorBrain *) brain
    {
    if (!brain) brain = [[CalculatorBrain alloc] init];

        return brain;
     }
-(IBAction) digitPressed:(UIButton *) sender
    {
    NSString *digit = [[sender titleLabel]text];

    if (userIsInTheMiddleOfTypingANumber)
    {
        [display setText:[[display text] stringByAppendingString:digit]];

    }else{

        [display setText:digit];
        userIsInTheMiddleOfTypingANumber = YES;

    }
}

-(IBAction) operationPressed: (UIButton *) sender
  {

    if (userIsInTheMiddleOfTypingANumber)
  {
        [[self brain] setOperand:[[display text] doubleValue]];
        userIsInTheMiddleOfTypingANumber = NO;

  }
    NSString *operation = [[sender titleLabel] text];
    double result = [[self brain] performOperation:operation];
    [display setText:[NSString stringWithFormat:@"%g", result]];
  }

@end
<code>

//This is my CalculatorBrain.h

<pre>
#import <Foundation/Foundation.h>

@interface CalculatorBrain : NSObject {

    double operand;
    NSString *waitingOperation;
    double waitingOperand;

}
-(void)setOperand:(double)anOperand;
-(double)performOperation:(NSString *) operation;

@end
<code>

//This is my CalculatorBrain.m
<pre>
#import "CalculatorBrain.h"

@implementation CalculatorBrain

-(void)setOperand:(double)anOperand{

    operand = anOperand;

}
-(void) performWaitingOperation{

    if ([@"+" isEqual:waitingOperation])
    {
        operand = waitingOperand + operand;
    }
    else if ([@"*" isEqual:waitingOperation])
    {
        operand = waitingOperand - operand;
    }
    else if ([@"-" isEqual:waitingOperation])
    {
        operand = waitingOperand * operand;
    }
    else if([@"/" isEqual:waitingOperation])
    {

        if (operand)
        {
            operand = waitingOperand / operand;

      }
   }

}
-(double)performOperation:(NSString *) operation
{

    if ([operation isEqual:@"sqrt"])
    {
        operand = sqrt(operand);
    }
    else if([@"*+/-=" isEqual:operation])
    {
        [self performWaitingOperation];
        waitingOperation = operation;
        waitingOperand = operand;

 }
return operand;

}

@end
<code> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:01:33.890

除了 if([@"*+/-=" isEqual:operation]) 捕获之外，另一个捕获是：

```
if ([@"*" isEqual:waitingOperation])
    {
        operand = waitingOperand - operand;
    }
    else if ([@"-" isEqual:waitingOperation])
    {
        operand = waitingOperand * operand;
    } 
```

逻辑是错误的。

接下来将 performWaitingOperation 函数更改为此，

```
-(double) performWaitingOperation{

    if ([@"+" isEqual:waitingOperation])
    {
        return operand = waitingOperand + operand;
    }
    else if ([@"*" isEqual:waitingOperation])
    {
        return operand = waitingOperand * operand;
    }
    else if ([@"-" isEqual:waitingOperation])
    {
        return operand = waitingOperand - operand;
    }
    else if([@"/" isEqual:waitingOperation])
    {

        if (operand)
        {
            return operand = waitingOperand / operand;

      }
   }else if ([@"=" isEqual:waitingOperation]){
        return operand;
     }

} 
```

和改变`[self performWaitingOperation]; to operand = [self performWaitingOperation];`

好的入门：[计算器教程](http://www.youtube.com/watch?v=HiA4AkmCezU)

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:31:05.547

如果您有任何问题，请参阅以下[链接](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall) 它为您提供了 Calculator Brain 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T04:19:21.080

我想这里就是这条线。if([@" *+/-=" isEqual:operation])。除非您的字符串“操作”实际上是字符串“* +/-=”，否则它永远不会评估为真。你可能想，instad，分别与每个人进行比较。例如 if([@"*" isEqual:operation] || [@"+" isEqual:operation] ... 等等

# struts2 - 如何在 struts2 上应用基于角色的安全性

> ID：14888048
> 
> 赞同：-1
> 
> 时间：2013-02-15T04:01:15.700
> 
> 标签：struts2, spring-security

嗨，我将在我的 struts2 应用程序上应用基于角色的安全性，但找不到任何工作教程，其中大多数在 xml 文件中定义了用户名和密码，但我正在寻找具有数据库访问权限的教程。

我想做的事 ：

当用户登录访问数据库时有一个登录页面以授权然后根据他的角色提供对应用程序不同资源的访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:17:08.613

这种安全性有两个级别 1\. 服务器端 2\. 客户端

最初，您必须在数据库中设置一个表，例如 task_permissions，其中说明了基于角色的任务权限。

那么这个方法将在服务器端帮助你

```
private boolean isTaskOpAllowed(String taskId, String operation) throws SQLException {

    String taskAllowedSql = "select"+operation+"from task_permissions where  role_id = ? and task_id = ?";
    PreparedStatement pstmt = null;
    ResultSet rst = null;
    boolean allowed = false;
    Connection conn = <make db connection>
    String role = <take role of user from session>
    try {
        pstmt = conn.prepareStatement(taskAllowedSql);
        pstmt.setString(1, roleId);
        pstmt.setString(2, taskId);
        rst = pstmt.executeQuery();

        if (rst.next()) {
            allowed = rst.getString(1);
        }
    } catch (SQLException se) {
        throw se;
    } finally {
                   cleanUpDbConnection(pstmt, rst);
    }
    return allowed;
} 
```

在 jsp 上，您可以在不同的模块上添加此检查，因此在渲染之前将调用上述函数并告诉您是否将此信息显示给该角色用户

```
<s:if test="%{@<packagename>.TaskSecurityHandler@isTaskOpAllowed(task,operation)}"> 
```

**编辑：** 另一种方法是缓存基于任务的权限的结果，每次查询该缓存时都会保存数据库命中。

`RoleTaskPrmsBean.java`用属性 等制作一个 。现在在系统或服务器启动时，从 db task_permissions 表中获取所有记录，并使此类的那么多对象将它们放在 Map 中。现在每次运行上述函数时，您都可以查询该 Map 而不是 db。`String role;
String task;
String operation1;
String operation2;``key:task+role`

# c - 总线错误：将 .txt 文件中的文本输入节点时 C 中的 10

> ID：14888052
> 
> 赞同：1
> 
> 时间：2013-02-15T04:01:58.537
> 
> 标签：c, arrays, linked-list, malloc, bus-error

我试图实现的代码是一种读取 .txt 文件并将字符串转换为节点的方法。本质上，当我阅读 .txt 文件时，我首先检查非字母（该词不能以数字开头，该词也不能在该词的任何索引中具有非字母数字）。一旦找到第一个字母，程序就会退出循环并进入另一个循环，直到它看到一个空格。当我成功地造一个词（当找到一个空格时，一个词“结束”），我将这个词输入到一个链表中。

当我运行它时，我得到一个总线错误：10。我认为这是由于 word[b] 数组，但是当我 malloc 它时，我仍然得到同样的错误。

先感谢您！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define TRUE 1
#define FALSE 0

struct Node{
   char value[100];
   int numOccur;
   int numVariance;
   struct Node *next;
};

void testprint(struct Node * head){
    int data;
    data = head->value;
    strcpy(data,head->value);
    while(head != NULL){

        printf("%s\n", data);
        head = head->next;
    }

}

int main()
{
   struct Node *curr;
   struct Node *n;
   struct Node *head =0;
   struct Node *tail =0;
   struct Node *next;
   char word[100];
   int a;
   int x;

   FILE *file1;
   file1 = fopen("test1.txt", "r");           //opens text file

   if(file1 == NULL){
       fprintf(stderr,"Error: Could not open file");     //if file1 has error, returns    error message
   exit(1);
   }
   a = fgetc(file1);
   int b = 0;
   while(a != EOF){
       while(!isalpha(a)){
           a = fgetc(file1);
           continue;
       }

       n = (struct Node *) malloc( sizeof( struct Node));
       while(isalnum(a)){
           while( a != ' ' && a != EOF){
               word[b] = a;
               a = fgetc(file1);
               b++;
           }
           word[b] = '\0';
       }
       n->next = 0;
       if(head == 0){
           head = n;
           tail = n;
       }
       else{
           tail->next = n;
           tail = n;
       }
   }
    testprint(head);
    fclose(file1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:33:44.627

您应该注意来自编译器的警告。（并且总是编译`-Wall -Wextra`以获得更多警告是一个好主意。）

正如 Barney Hsiao 所指出的，`testprint()`用 FILE 指针而不是 Node 指针调用。

* * *

*不*相关，但如果您需要*真假*常量，有一个标准头文件可以为您提供这些（小写，即, ）。*`true``false`*

 *```
#include <stdbool.h> 
```

* * *

编译此代码时，我收到以下编译器警告：

```
$ CFLAGS="-Wall -Wextra" 制作 bus10
cc -Wall -Wextra bus10.c -o bus10
bus10.c：在函数“testprint”中：
bus10.c:20:14：警告：来自不兼容指针类型的赋值
bus10.c：在函数“主”中：
bus10.c:48:8：警告：数组下标的类型为 'char'
bus10.c:54:8：警告：数组下标的类型为 'char'
bus10.c:68:23：警告：来自不兼容指针类型的赋值
bus10.c:34:8：警告：未使用的变量“x”
bus10.c:31:17：警告：未使用的变量“下一个”
bus10.c:27:17：警告：未使用的变量 'curr'
bus10.c:74:1：警告：控制到达非无效函数的结尾

```

现在其中一些比其他更严重。“数组下标的类型为'char'”对我来说听起来不是问题（老实说，我什至不知道它是什么意思）。“未使用的变量”意味着：您已经创建（声明）了一个变量，然后您从不使用它。“控制到达非 void 函数的末尾”意味着您有一个声明为返回值的函数，但代码在没有返回语句的情况下掉到了底部。

但是“从不兼容的指针类型赋值”是不好的。*不相容*这个词是坏的。第 20 行内容如下：

```
 head = head->next; 
```

第 68 行内容如下：

```
 tail->next = n; 
```

这是因为

```
struct Node{
   ...
   struct node *next;
}; 
```

看？`*next`不是一个`struct Node`而是一个`struct node`。大写/小写计数。

* * *

行。这是一个大的。编译器什么也没说。好吧，公平地说，确实如此。但我们不知道这意味着什么。第 33 行：

```
 char a; 
```

你说这有什么问题？它是一种拥有角色的类型，对吧？问题在这里：

```
 a = fgetc(file1); 
```

你看到了吗？这里怎么样？

```
 while(a != EOF){ 
```

EOF 是一个标记值，它太大而无法放入`char`. 它应该是这样的。为了让`fgetc`函数告诉您发生了文件结束条件，而不仅仅是文件中的另一个字节，它必须返回一个超出字符范围的值（0..255 无符号，-128..127 有符号） . `while`条件永远不会失败，因为没有值`char`可以与 EOF 进行比较。

所以声明`a`是`int`，不是`char`。*

# java - N * N 皇后算法获取坐标

> ID：14888055
> 
> 赞同：1
> 
> 时间：2013-02-15T04:02:21.237
> 
> 标签：java, arrays, algorithm, recursion, n-queens

我正在尝试`N*N`用一些扭曲来实现女王算法。在这个版本中，女王也可以像骑士一样移动......

一切正常，但我正在尝试获取所有可能解决方案的坐标。问题是，如果我把它放在里面`col == n`，它只会打印最后一个。关于如何解决这个问题的任何想法？

```
 static void placement(int col, int queens[], int n){
    //int solution =0; 
    for (int row = 1; row <= n; row++) {
      queens[col] = row;
      if((check_Queen(row,col,queens)) ==  true)
      {
        if((check_KnightMove(row,col,queens)) == true)
        {
          if(col == n)
          {
            System.out.println("("+row + "," + col);
            System.out.println("solution=" + solution);
            solution++;
          }
          else
          { 
            placement(col+1,queens,n);   
          }
        }
      }
    }
    queens[col] = 0;
  }

  public static void main(String[] args) {
    int solution =0;
    Scanner scanner=new Scanner(System.in);
    System.out.print("Please enter N");
    int n = scanner.nextInt();// TODO Auto-generated method stub
    int queens[] = new int[n+1];
    placement(1,queens,n);
    System.out.println("nQueens: solution=" + solution);
  }
      static boolean check_Queen(int row, int col, int queens[])
{

    //boolean flag = false;
    for(int i =1; i<col; i++)
    {
        if (queens[col-i] == row   ||
                 queens[col-i] == row-i ||
                 queens[col-i] == row+i) {
                //flag = false;
                return false;
             }

    }
    return true;

}
           static boolean  check_KnightMove(int row, int col, int queens[])
           {
    if(col>=2&&(queens[col-2] == (row -1) || queens[col-2] == (row+1) || queens[col-1] == (row-2) || queens[col-1] == (row+2)))
    {
        return false;
    }
    return true;

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:41:21.743

`check_Queen`在不知道如何定义和`check_KnightMove`定义的情况下，很难说出您的解决方案中有什么问题。这是我解决任务的方法：

```
public class Queens
{
    static void printSolution (int [] queens)
    {
        int l = queens.length;
        for (int i = 0; i < l; i++)
        {
            for (int j = 0; j < l; j++)
            {
                System.out.print (queens [i] == j ? 'Q' : '.');
                System.out.print (' ');
            }
            System.out.println ();
        }
        System.out.println ();
    }

    static int placement (int [] queens, int c)
    {
        if (c == queens.length)
        {
            printSolution (queens);
            return 1;
        }
        else
        {
            int solutionCount = 0;
            int l = queens.length;

            for (int r = 0; r < l; r++)
            {
                boolean flag = false;
                for (int i = 0; i < c; i++)
                {
                    int xd = c - i;
                    int yd = Math.abs (r - queens [i]);

                    if (yd == 0 || xd == yd)
                    {
                        flag = true;
                        break;
                    }

                    // Knight move support
                    if ((xd == 1 && yd == 2) || (xd == 2 && yd == 1))
                    {
                        flag = true;
                        break;
                    }
                }

                if (!flag)
                {
                    queens [c] = r;
                    solutionCount += placement (queens, c + 1);
                }
            }

            return solutionCount;
        }
    }

    public static void main (String [] args)
    {
        System.out.println (
            "Total solutions found: " + placement (new int [11], 0));
    }
} 
```

在您的解决方案中，方法`check_KnightMove`不正确。当`col == 2`它不允许Queen 放置在第1 行时，因为它认为始终有一个Queen 在`(col: 0, row: 0)`，即在棋盘之外。这里是修正版：

```
static boolean check_KnightMove (int row, int col, int queens[])
{
    if (col >= 3
            && (queens [col - 2] == (row - 1) || queens [col - 2] == (row + 1)))
    {
        return false;
    }

    if (col >= 2
            && (queens [col - 1] == (row - 2) || queens [col - 1] == (row + 2)))
    {
        return false;
    }
    return true;
} 
```

# ssh - 如何为同一主机使用多个 SSH 密钥？

> ID：14888056
> 
> 赞同：3
> 
> 时间：2013-02-15T04:02:34.977
> 
> 标签：ssh, key

我非常希望能够在同一台服务器上为不同的用户使用多个 SSH 密钥。我有一台用于虚拟主机和 SSH 隧道的服务器。我已经设置了一个没有专门用于 SSH 隧道的登录 shell 的帐户。我使用 root 用户来管理系统的其余部分。

我有两个 SSH 密钥，一个带有 root 用户的密码，一个没有 SSH 隧道的密码。如何做到这一点，当我以隧道用户身份连接时，它使用隧道密钥，而当我以 root 用户身份连接时，它使用 root 密钥？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:29:25.433

如果您为 root 用户设置了一个密钥，为您的隧道用户设置了另一个密钥（通过服务器/远程计算机上的文件*authorized_keys*），则应自动选择正确的密钥。

这是基于您加载了密钥`ssh-agent`并且它们可供`ssh`实用程序使用的假设。

否则，您可以使用 手动指定密钥`ssh -i <identity file>`。

*除此之外，您可以在 ssh_config 文件（ ~/.ssh/config*或*/etc/ssh/ssh_config* ）中设置别名：

```
Host server-root
User root
IdentityFile <path to your key>
Hostname <real hostname>

Host server-tunnel
User tunnel-user
IdentityFile <path to your key>
Hostname <real hostname> 
```

然后你使用`ssh server-root`or `ssh server-tunnel`。

但我想说使用 ssh-agent 可能是最简单的设置。

如果您想在没有 ssh-agent 的情况下自动选择正确的密钥，您可以通过`-i`.

引用 OpenSSH 手册页：

```
 -i identity_file
     Selects a file from which the identity (private key) for public
     key authentication is read.  The default is ~/.ssh/identity for
     protocol version 1, and ~/.ssh/id_dsa, ~/.ssh/id_ecdsa and
     ~/.ssh/id_rsa for protocol version 2\.  Identity files may also be
     specified on a per-host basis in the configuration file.  It is
     possible to have multiple -i options (and multiple identities
     specified in configuration files).  ssh will also try to load
     certificate information from the filename obtained by appending
     -cert.pub to identity filenames. 
```

# database - 表达标准

> ID：14888060
> 
> 赞同：0
> 
> 时间：2013-02-15T04:03:23.470
> 
> 标签：database, ms-access

好的，所以我在 MS Access 中工作并且有一个非常复杂的表达式（它考虑其他字段的值并使用`IIf`逻辑相应地输出一个值）。我不想在*我*的最终查询输出中包含一些值。

没有发布确切和完整`IIf`的声明，它就像这个例子：

`If field1=1 and field2>=field3 and field4=N`然后是，否则不（它比这更复杂，但你明白了......

假设我不想*包含*Yes 结果。

Access 不允许我为表达式字段设置条件。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:44:40.853

自从我使用 Access 以来已经有很长一段时间了——就像以前烟雾信号是一种现代的长距离通信方式一样。

话虽如此，我会采取将问题分解为更小的子集的方法。首先关注获取您想要的数据集，然后返回您需要的字段和任何其他可能的过滤。在 Access 中，如果内存可用，您应该能够基于查询进行查询。

做这样的事情：

**查询 1**：包含所有必填字段的复杂公式

**查询 2**：使用查询 2 作为其源，限制返回的字段并可能进行额外的过滤。

```
select field1,field3,field4
from (
        select field1,field2,field3, iif(field1 .....
        from myTable
      ) 
```

# ssh - 如何在 ssh 中删除 FTP 用户？

> ID：14888062
> 
> 赞同：8
> 
> 时间：2013-02-15T04:04:06.183
> 
> 标签：ssh, ftp, centos

我正在通过 ssh访问专用服务器**(centOS) 。**我创建了几个 FTP 帐户，让他们临时访问更改文件。现在我不需要它，我想**删除**我之前通过 SSH 创建的 FTP 用户。

我不知道删除 FTP 用户的命令。请帮我。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T04:05:18.170

```
userdel USERNAME 
```

这应该够了吧。

# ruby-on-rails - 路由错误没有路由匹配 [POST] "/book/create"

> ID：14888064
> 
> 赞同：6
> 
> 时间：2013-02-15T04:04:47.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试将一些数据插入到数据库中。但显示以下错误

```
Routing Error

No route matches [POST] "/book/create" 
```

表单提交的代码是 new.html.erb

```
<h1>Add new book</h1>
<%= form_tag :action => 'create' %>
<p><label for="book_title">Title</label>:
<%= text_field 'book','title' %></p>
<p><label for="book_price">Price</label>:
<%= text_field 'book','price'%></p>
<p><label for="book_subject">Subject</label>:
<%= text_field 'subject','subject'%></p>
<p><label for="book_description">Description</label><br/>
<%= text_area 'book','description'%></p>
<%= submit_tag "Create"%>
<%= link_to 'Back',{:action=>'list'}%> 
```

routers.rb 是

```
Library::Application.routes.draw do
  get "book/list"

  get "book/show"

  get "book/new"

  get "book/create"

  get "book/edit"

  get "book/update"

  get "book/delete"

    resources :books, :only => [:new, :create]
    match '/books' => 'books#create', :via => :post 
```

这是 new.html.erb 的 html 代码

```
<h1>Add new book</h1>
<form accept-charset="UTF-8" action="/book/create" method="post">
<p><label for="book_title">Title</label>:
<input id="book_title" name="book[title]" size="30" type="text" /></p>
<p><label for="book_price">Price</label>:
<input id="book_price" name="book[price]" size="30" type="text" /></p>
<p><label for="book_subject">Subject</label>:
<input id="subject_subject" name="subject[subject]" size="30" type="text" /></p>
<p><label for="book_description">Description</label><br/>
<textarea cols="40" id="book_description" name="book[description]" rows="20">
</textarea></p>
<input name="commit" type="submit" value="Create" />
<a href="/book/list">Back</a> 
```

这是 bookcontoller.rb

```
class BookController < ApplicationController
   def list
      @books = Book.find(:all)
   end
   def show
      @book = Book.find(params[:id])
   end
   def new
      @book = Book.new
      @subjects = Subject.find(:all)
   end
   def create
      @book = Book.new(params[:book])
      if @book.save
            redirect_to :action => 'list'
      else
            @subjects = Subject.find(:all)
            render :action => 'new'
      end
   end
   def edit
      @book = Book.find(params[:id])
      @subjects = Subject.find(:all)
   end
   def update
      @book = Book.find(params[:id])
      if @book.update_attributes(params[:book])
         redirect_to :action => 'show', :id => @book
      else
         @subjects = Subject.find(:all)
         render :action => 'edit'
      end
   end
   def delete
      Book.find(params[:id]).destroy
      redirect_to :action => 'list'
   end
   def show_subjects
      @subject = Subject.find(params[:id])
   end
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T06:31:31.227

只需包含 `post "book/create"`在您的 router.rb 文件中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:41:37.637

从我从您的问题中可以看出，您正在与 Rails 公约作斗争，这使一切变得更加困难。你应该：

*   只有`resources :books`在 routes.rb
*   使用`form_for(@book)`将生成正确表单的表单助手在 new.erb 中创建一本书。

我建议好好阅读 Rails 指南。以下指南与您的问题以及如何解决您的问题特别相关：

*   [http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)
*   [http://guides.rubyonrails.org/form_helpers.html#relying-on-record-identification](http://guides.rubyonrails.org/form_helpers.html#relying-on-record-identification)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:52:51.817

清理您的 routes.rb 文件以仅包含以下内容：

```
Library::Application.routes.draw do
  resources :books, :except => [:index] do
    collection do
      get :list
      get :show_subjects
    end
  end
end 
```

# php - 如何通过href将值传递到新的弹出窗口

> ID：14888069
> 
> 赞同：0
> 
> 时间：2013-02-15T04:05:20.897
> 
> 标签：php, popup, href

我想要一个我想从父页面传递到弹出窗口的变量。

在下面尝试但没有在弹出窗口上获得所需的输出。

父页面：

```
<a href=cancellation_policy.php?d=",urlencode($vendor_id),"  onclick="window.open('cancellation_policy.php','newwindow', 'width=700, height=450'); return false; "><?php echo "<h10>(Cancellation policy)</h10>";}?></a> 
```

在弹出窗口中：

```
<?php echo $vendor_id = $_GET['$d']; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:14:36.943

在您对 Popub 的 JavaScript 调用期间，您使用了没有任何参数的 canceling_policy.php。所以`echo $vendor_id = $_GET['$d'];`不会回应任何东西。您还在 URL 中调用了参数“d”而不是“$d”。

您可以将它们添加到 JavaScript 调用中：

```
window.open('cancellation_policy.php?d=[...]'... 
```

或者通过一个 JavaScript 函数使用 a 标签的 href 属性来构建一个完整的 URL，然后使用`window.open(...)`. 第一个想法可能是更快的解决方案。

**编辑：** 为了更好的解释：window.open 方法不使用 a 元素的 href 属性。所以这里不会使用配置的参数'd'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:15:07.420

您可以在任何标签中调用函数并让该函数打开窗口。像这样的东西：

```
<script type="text/javascript">
function test() {
  window.open('cancellation_policy.php?d=' + urlencode($vendor_id),'newwindow', 'width=700, height=450'); 
}
</script>

<a onclick="javascript:test()"><?php echo "<h10>(Cancellation policy)</h10>";}?></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:00:48.107

您可以`href`根据需要使用它，`onclick`以便在新窗口中打开链接：

```
<a href=".." onclick="window.open(this.href, 'newwindow', 'width=700,height=450'); return false; "> 
```

将`this.href`简单地获取您在*href*属性中的任何内容，无需重复。

# php - 从 MySQL 时间戳获取时间并以小时、分钟等显示？

> ID：14888071
> 
> 赞同：0
> 
> 时间：2013-02-15T04:05:49.450
> 
> 标签：php, mysql

我试图`timestamp`在 MySQL 中以秒、分钟、天等形式回显。

脚本运行良好，但我不得不稍微整理一下我的代码，现在它来不及了；它只是回显`0 days`or`0 hours`或`0 whatever`。

这是我触摸时间码之前的样子，但我不能这样，因为我不得不编辑一些`div`订单。

所以我的问题是，有人可以告诉我或告诉我我做了什么让它停止工作吗？谢谢你

以前是怎样的：

```
<div class="board-wall-feeds">        
<div class="social_header">
<?php echo "$profile[2]" ?>'s News & Updates:
</div>        
<?php
$timeline_set = get_timeline();
while ($news = mysql_fetch_array($timeline_set)) { 
echo "

<div class=\"news_feeds_board_text\">{$news['content']}
<div class=\"social_footer\"><a href=\"../../../delete_news_post.php?to=".$news['id']."</div><div class=\"social_clip\"></div></a>"; ?>

        <?
        $datetime1 = new DateTime();
        $datetime2 = new DateTime ($news['date_added']);
        $interval = $datetime1->diff($datetime2);
        $mdhms = explode('-',$interval->format('%m-%d-%H-%i-%s'));

$labels = Array(' months', ' days', ' hours', ' minutes', ' seconds');
$i = 0;
foreach($mdhms as $t){
  if($t > 0) break;
  $i+=1;
}

        echo "about ".$t.$labels[$i]." ago"; ?></div></div>
        <? } ?> 
```

`div`我的新订单现在如何：

```
 <div class="board-wall-feeds">        
<div class="social_header">
<?php echo "$profile[2]" ?>'s News & Updates:
</div>        
<?php

        $datetime1 = new DateTime();
        $datetime2 = new DateTime ($news['date_added']);
        $interval = $datetime1->diff($datetime2);
        $mdhms = explode('-',$interval->format('%m-%d-%H-%i-%s'));

$labels = Array(' months', ' days', ' hours', ' minutes', ' seconds');
$i = 0;
foreach($mdhms as $t){
  if($t > 0) break;
  $i+=1;
}

$timeline_set = get_timeline();
while ($news = mysql_fetch_array($timeline_set)) { 
echo "

<div class=\"news_feeds_board_text\">{$news['content']}
<div class=\"social_footer\">about ".$t.$labels[$i]." ago<a href=\"../../../delete_news_post.php?to=".$news['id']."</div><div class=\"social_clip\"></div></div></a>"; ?>

        <? } ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:11:41.113

下面的查询将小时、分钟、秒与 NOW() 所用的当前时间分开。

```
SELECT DATE_FORMAT(NOW(),'%H-%i-%S') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:30:38.917

您还可以在 mysql 查询中获取这些内容，如下所示。

```
SELECT  STR_TO_DATE(`time_stamp`, FORMAT) as ALIAS FROM 'table_name'
```

`format`你想要那个日期的格式在哪里。

**例如**对于 get 只`month`使用它，等等。 `STR_TO_DATE(`time_stamp`,'%m')`

# php - PHP-SQL数组结构

> ID：14888073
> 
> 赞同：0
> 
> 时间：2013-02-15T04:05:51.427
> 
> 标签：php, sql

我无法理解二维 php 数组，在我的数据库中，我有一个存储 URL 的表，它与另一个通过 1 到 N 关系存储标签的表相关，这些表如下所示：

```
URL         
ID    --->  URL_ID
            ID
            TAG 
```

我正在尝试获取此结构并将其存储在 PHP 类中，但我不明白

```
class Url extends databaseobject{

    $list = [

        "url" =>,
        "tags" => []

    ];
                                } 
```

有人可以帮我建立正确的结构来存储我的数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:04:56.383

它应该是这样的

```
   db_url            db_tags
id url id url_id 标签
 |----------------------|

```

```
class UrlTags
{
    public $url_id;
    public $url;
    public $tags = array();
} 
```

因此，当您需要保存带有相应标签的 URL 列表时。

```
$url_tags = new UrlTags();

$url_tags->$id = 1;
$url_tags->$url = 'http://www.example.com';
$url_tags->$tags[0] = 'zero';
$url_tags->$tags[1] = 'one';
$url_tags->$tags[2] = 'two'; 
```

**或者更多面向对象的风格：**

```
class Url
{
    public $url_id;
    public $url;
    public $tags = array();
}

class Tags
{
    public $tag_id;
    public $tag_name;
}

$url_list = new Url();

$url_list->$id = 1;
$url_list->$url = 'http://www.example.com';

$tag = new Tags();
$tag->$tag_id = 1;
$tag->$tag_name = 'one';

//Now store the tags
$url_list->$tags[0] = $tag;

$tag = new Tags();
$tag->$tag_id = 2;
$tag->$tag_name = 'two';

$url_list->$tags[1] = $tag; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:08:45.073

假设您正在迭代两个表连接的结果集，因此结果集中的每一行看起来像这样：

```
url, url_id, tag, tag_id 
```

还假设您使用的任何适配器都会创建某种可迭代的结果集，然后在您迭代时（这是一种伪代码，不知道您正在使用什么适配器）：

```
$list = array();
while($arr = $your_adapter's_current_row){
    if(empty($list[$arr[$url_id]]) {
        $list = array(
            'URL_ID' => $url_id,
            'URL' => $url,  
            'TAGS' => array()
        }
        $list[$arr[$url_id]]['TAGS'][$tag_id] = $tag;
} 
```

然后，您可以将数组添加为您的类的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:09:53.510

这是结构

```
$list  = array(
          1 => array(
            'URL_ID' => 1
            'ID' => 1
            'TAG' => 'hiiiii'
          ),  
          2 => array(
            'URL_ID' => 1
            'ID' => 2
            'TAG' => 'hello'
          ),
       ); 
```

# ruby-on-rails - 在这种情况下如何设置验证？

> ID：14888074
> 
> 赞同：1
> 
> 时间：2013-02-15T04:05:54.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3

标题不是必填字段。
我只想验证它不为零时（仅当用户输入内容时）

```
validates_format_of :title, :with => /\A[A-Za-z0-9_]+\z/, :message => "must be half-width English numbers and letters, and_" 
```

但是，一旦我设置了这个，标题字段就变成了必填字段。
我如何设置它仅在标题字段不为零时才验证？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:09:20.690

我认为这会起作用：

```
validates_format_of :title, :with => /\A[A-Za-z0-9_]+\z/, :message => "must be half-width English numbers and letters, and_", :if => lambda{ !self.title.nil? } 
```

# c# - 创建通用列表 有反射

> ID：14888075
> 
> 赞同：7
> 
> 时间：2013-02-15T04:06:22.673
> 
> 标签：c#, reflection

我有一堂有属性的课`IEnumerable<T>`。如何创建一个创建新`List<T>`属性并分配该属性的通用方法？

```
IList list = property.PropertyType.GetGenericTypeDefinition()
    .MakeGenericType(property.PropertyType.GetGenericArguments())
    .GetConstructor(Type.EmptyTypes); 
```

我不知道`T`类型在哪里可以是任何东西

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-15T04:26:31.187

假设您知道属性名称，并且您知道它是 an`IEnumerable<T>`那么此函数会将其设置为相应类型的列表：

```
public void AssignListProperty(Object obj, String propName)
{
  var prop = obj.GetType().GetProperty(propName);
  var listType = typeof(List<>);
  var genericArgs = prop.PropertyType.GetGenericArguments();
  var concreteType = listType.MakeGenericType(genericArgs);
  var newList = Activator.CreateInstance(concreteType);
  prop.SetValue(obj, newList);
} 
```

请注意，此方法不进行类型检查或错误处理。我把它作为练习留给用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:27:07.613

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication16
{
    class Program
    {
        static IEnumerable<int> Func()
        {
            yield return 1;
            yield return 2;
            yield return 3;
        }

        static List<int> MakeList()
        {
            return (List<int>)Activator.CreateInstance(typeof(List<int>), Func());
        }

        static void Main(string[] args)
        {
            foreach(int i in MakeList())
            {
                Console.WriteLine(i);
            }
        }
    }
} 
```

# php - 你可以在 PHP 中使用全局方法吗？

> ID：14888076
> 
> 赞同：1
> 
> 时间：2013-02-15T04:06:44.090
> 
> 标签：php, javascript, ruby, scalar

在 Ruby/Javascript 等语言中，您可以将对象运算符应用于任何事物。IE，

```
var string = "Pancakes";
alert(string.length);
// 8 
```

当一切都在对象中时，这叫什么？有什么东西可以使 PHP 以这种方式运行，而不必自己动手破解一些东西？这是 PHP 社区目前要求的吗？

做事的能力`echo (new String("Hello"))->length()`会很好，甚至`"Hello"->length();` 我什至会满足于：

```
$var = "Hello";
echo $var->length; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:10:17.317

它被称为[面向对象的编程](http://en.wikipedia.org/wiki/Object-oriented_programming)。PHP 支持 OOP，但很多语言都是作为接受参数的平面函数实现的。

如果要对它们进行操作，则需要定义自己的对象，否则您将不得不使用`strlen()`内置类型（例如`String`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:22:13.520

Java 程序员使用术语[自动装箱](http://en.wikipedia.org/wiki/Object_type_%28object-oriented_programming%29#Autoboxing)来表示对原始值调用方法的能力。JavaScript 也有这个特性，它通过创建临时包装对象来工作。我不知道鲁比。

在 PHP 中这是不可能的。`new String("Hello")->length()`也是不可能的，主要是因为没有`String`像`length`. 您可以创建自己的，但值得吗？此外，您可能对[这个 hack](http://www.talkphp.com/tips-tricks/4555-treat-php-strings-objects-like-javascript.html)感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:11:58.387

他们称之为面向对象编程。较新版本的 PHP 是 OO。您可以使用方法创建类来完成您所指的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T04:43:16.517

面向对象 (OO) 是“事后”附加到 PHP 上的东西。在实现 OO 之前，一切都是使用函数完成的（就像许多其他类似 C 的编程语言一样）。

对于 PHP，字符串、整数、布尔值等只是数据。它们是*原始类型*，不能做任何事情；它们只是存储在内存中的命名值。这就是为什么您需要使用函数，例如`strlen($str)`. 该函数*对 value 进行操作*。

In languages like Ruby and Javascript most data types, such as strings, are, practically speaking, actually objects (or in some cases kinda-sorta objects). They contain various properties like `.length`, and methods like `.indexOf()`. Another word for such data types is a *composite type* (they are composed of more than one thing).

So, in PHP you can say that it is *normal* to write `strlen($str)` to figure out how long a string is; likewise, in Javascript or Ruby it is *normal* to write `str.length`.

It is possible to write a `String` class in PHP, but it is kind of beside the point. It is like learning to count to ten, but insisting that it be done in base-7\. It is not very practical, and people will think you are crazy.

# php - 引导选项卡不起作用

> ID：14888078
> 
> 赞同：-1
> 
> 时间：2013-02-15T04:07:01.673
> 
> 标签：php, jquery, html, twitter-bootstrap, tabs

bootstrap 网站没有很好地解释如何让选项卡工作。我在堆栈上查看了一些类似的问题，但无法解决我的问题。这是我的html代码：

```
 <!doctype html>
    <html>
        <head>

    <meta charset="utf-8">
    <title>90 Minute IPA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Leopard - Clean & Responsive HTML Template">

    <!-- FAVICON & ICONS -->
    <link rel="icon" type="image/png" href="img/favicon.ico" />
    <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if IE 7]>
    <link rel="stylesheet" href="css/font-awesome-ie7.css">
    <![endif]-->

    <!-- CSS --> 
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.css"> 
    <!-- GOOGLE FONTS -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>  

    <!-- JAVA SCRIPT -->
    <script src="js/jquery-1.8.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.flexslider.js"></script>
    <script src="js/jquery.nivo.slider.js"></script>
    <script src="js/jquery.tweet.js"></script>
    <script src="js/jquery.quicksand.js"></script>
    <script src="js/superfish.js"></script> 
    <script src="js/custom.js"></script></head>
    <script src="myJava.js"></script>
    <script src="beerPageScripts.js"></script>

            <body>
        <div class="boxedWrap">

            <!-- HEADER -->
            <header>
            <div class="container"> 
            <div class="row">
                <!-- LOGO -->
                <div class="span3">
                    <a href="index.php"><img src="logo3.png" alt="Leopard"></a>
                </div>
                <!-- End LOGO -->
                <div class="span9"> 
                    <a class="btn btn-navbar pull-right visible-phone" data-toggle="collapse" data-target=".nav-collapse">
                      <span class="icon-align-justify"></span>
                    </a>
                    <!-- NAV --> 
                    <div class="nav-collapse">

            <nav id="primary-nav"> 
                            <ul>
                                <li><a href="index.php">Home</a> </li>
                                <li><a href="#">Portfolio</a>
                                    <ul>
                                        <li><a href="beerPortfolio.php">Beer Portfolio</a></li>
                                        <li><a href="beerMap.php">Brewery Map</a></li>
                                        <li><a href="tastePortfolio.php">Taste Profile</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Statistics</a>
                                    <ul>
                                        <li><a href="breweryStats.php">Brewery</a></li>
                                        <li><a href="styleStats.php">Style</a></li>
                                        <li><a href="tasteStats.php">Taste</a> </li>
                                    </ul>
                                </li>
                                <li><a href="#">Discover</a>
                                    <ul>
                                        <li><a href="tasteDiscover.php">Top Taste </a></li>
                                        <li><a href="topBreweries.php">Top Breweries </a></li>
                                        <li><a href="topBeers.php">Top Beers </a></li>
                                        <li><a href="topStyles.php">Top Styles</a></li>
                                    </ul>
                                </li>
                                <li><a href="blog.html">Friends</a></li>
                                <li><a href="contact.html">Settings</a></li>
                            </ul>
                        </nav>
                        </div>
                    <!-- End NAV -->
                </div>
            </div>
        </div> 
    </header>

             <!-- CONTAINER WRAPPER -->
                <div id="content" class="container">

                    <div class="row">

        <!-- RIGHT CONTENT -->

<script type="text/javascript" src="assets/twitterbootstrap/js/bootstrap-tab.js"></script>

<script type="text/javascript" src="js/jquery.raty.min.js"></script>
<script>
    $('#tabbable a').click(function (e) {
        e.preventDefault();
        $(this).tab('show');
})

</script>

<style type="text/css">
        .form{
            $('.form').show();    display: none;
        }​

    </style>

            <div class="span9">
                <div class="row">

                    <div class="span9 space">
                        <h3 class="title">90 Minute IPA</h3> 
                    </div>

                    <div class="clearfix"></div>

                    <div class="span4 space">
                        <img src = "https://s3.amazonaws.com/brewerydbapi/beer/qqTzHb/upload_mGIvsJ-medium.png">
                    </div>

                    <div class="span5 space">
                        <p> <strong>Brewery: </strong> Dogfish Head Craft Brewery</p>
                        <br>
                        <p> <strong>Style: </strong> Imperial or Double India Pale Ale</p>
                        <br>
                        <p> <strong>ABV: </strong> 9 %</p>
                        <br>
                        <p> <strong>IBU: </strong> 90</p>
                        <br>
                        <p> <strong>Glass: </strong> Snifter</p>
                        <br>
                        <p> <strong>Average Rateing: </strong> 4</p> 
        <script type="text/javascript">
                $(function() {
                $('#cancel-custom').raty({
                    cancel:         false,
                    cancelHint:     'remove my rating!',
                    cancelPlace:    'left',
                    hintList:       ['Bad', 'Poor', 'Regular', 'Good', 'Awesome!'],
                    start: 4 ,
                    click: function(score, evt) {

                        updateRate(score,3,'qqTzHb')
                    }
                });

            });
                </script>   
            <br>
            <p><strong> Your Rating: </strong>
            <div id="cancel-custom" >   </div> </p>
                </div> <!-- end information box --> 

                     <div class="span9 space">
                        <!-- Place this tag where you want the +1 button to render. -->
<div class="g-plusone" data-size="medium"></div>

<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

          </span>
                    </div>

                    <div class="span9 space">
                    <div class="tabbable">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#tab1" data-toggle="tab">Description</a></li>
                            <li class="active"><a href="#tab2" data-toggle="tab">Taste Profile</a></li>
                        </ul>

                        <div class="tab-content">
                            <div class="tab-pane active" id="tab1">
                                <p><strong>Description: </strong> Esquire Magazine calls our 90 Minute IPA., "perhaps the best I.P.A. in America." An Imperial I.P.A. brewed to be savored from a snifter. A big beer with a great malt backbone that stands up to the extreme hopping rate.

90 Minute IPA was our first continually-hopped beer, which is a method of hopping that allows for a pungent, but not crushing hop flavor. Since introducing the world to the continual-hopping method with our 90 Minute IPA, we've since released a continually-hopped 60 Minute IPA, 120 Minute IPA and even a 75 Minute IPA (a cask-conditioned blend of 60 & 90 Minute IPAs).

In addition to the continual-hopping 90 Minute IPA recieves during the boil, we also utilize our 'Me So Hoppy' device to dry-hop the beer during conditioning (check it out in the video below).

This beer is an excellent candidate for use with our Randall The Enamel Animal filter!</p>
                            </div>
                            <div class="tab-pane" id="tab2">
                                <p>Yummy, tastes go here</p>
                            </div>
                        </div>
                    </div>

                    </div></div>    <!-- end span9-->                        
            </div> <!-- end row -->

            <!-- SIDEBAR -->
            <div id="sidebar" class="span3">

                    <form name="input" action="search.php" method="get">
                        <div class="input-prepend">
                        <span class="add-on"><i class="icon-search"></i></span>
                            <input type="text" name="s"  id="s" placeholder="Beer Search" />
                        </div>
                    </form>

                <div class="textWidget">
                    <h6>Stats</h6>
                    <p><strong>Beer Count: </strong> 182 </p>
                    <p class="center"> &nbsp;</p>
                    <p><strong>Brewery Count: </strong> 83 </p>
                    <p class="center"> &nbsp;</p>
                    <p><strong>Style Count: </strong> 50 </p>
                    <p class="center"> &nbsp;</p>
                    <p><strong>High ABV: </strong> 18 </p>
                    <p class="center"> &nbsp;</p>
                    <p><strong>High IBU: </strong> 120 </p>
                    <p class="center"> &nbsp;</p>

                </div>

            </div>
            <!-- End SIDEBAR -->
           </div>

    </div> 
    <!-- End CONTAINER -->

    <!-- FOOTER -->
    <footer>
        <!-- FOOTER WIDGETS -->

        <!-- End FOOTER WIDGETS -->
        <div id="footerBottom">
            <div class="container">
                <div class="row">
                    <div class="span4">
                    © Copyright 2012 by <a href="index.html">Beer Portfolio</a> All Right Reserved.
                    </div>
                    <div class="span8 hidden-phone">
                        <!-- SECONDARY NAV -->
                        <nav id="secondary-nav"> 
                            <ul>
                                <li><a href="index.php">Home</a></li>
                                <li><a href="blog.html">Blog</a></li>
                                <li><a href="contact.html">Contact</a></li>
                                <li><a href="logOut.php">Log-Out</a></li>
                            </ul>
                        </nav>
                        <!-- End SECONDARY NAV -->
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- End FOOTER -->

</div>
</body>

</html> 
```

任何帮助将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:36:34.470

问题是这段代码，您正在使用“tabbable”类作为 id 。

```
 $('#tabbable a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
    }) 
```

为您创建了一个 Jsfiddle **[Jsfiddle -Tabs 示例](http://jsfiddle.net/shail/QgfsB/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:12:29.220

你应该包括

```
<script src="js/tabs.js"></script> 
```

在 head 中并从 second中删除**class="active"**`<li>`，Js 将添加您单击该选项卡的那些...还有一件事是在“tab-pane”旁边添加“fade”类

```
i.e. 
class="tab-pane fade" 
```

你可以在这里罚款 tabs.js

[http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js](http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js)

# javascript - 在文本区域隐藏 HTML 标签

> ID：14888082
> 
> 赞同：0
> 
> 时间：2013-02-15T04:07:34.280
> 
> 标签：javascript, jquery, html

我有一个场景，我使用带有 textarea 的自动完成 jquery UI。每次用户从建议中选择一个值时，textarea 都会填充选择，后跟一个分号。

我需要跟踪建议中选定值的 id。我的想法是将它们放在 span 标签的数据属性中，将选定的值包装在其中并填充 textarea。但现在 textarea 正在显示这些 HTML 标签。

关于应该做什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:00:51.930

简单地实现这一点并保持您的 ID 正确的最佳方法*（当您需要保持打开状态以便用户可以自由输入时）*是在您需要 ID 时而不是之前获取 ID。我的意思是，允许你的用户自动完成和选择，或者手动输入，但是当你对这些数据做一些事情时，你会为列表中的每个项目获取 ID。

```
<textarea>Item 1; Item 2; Manual Item 3;</textarea> 
```

然后在提交时说*（甚至在服务器端）*，然后拆分列表并根据名称查找每个 ID。这将自动防止用户执行手动修改`Item 1`或重新排序列表之类的操作：

```
<textarea>Item 42; Item 2; Manual Item 3;</textarea> 
```

对于上面的示例，因为列表中的每个项目在您需要它之前都会重新询问其 ID，因此`Item 42`将使用 代替`Item 1`. 如果您有任何其他形式的 ID 跟踪，无论如何您都必须检查这种可能性，这将导致一大堆额外的代码和工作。

在提交时检查 ID 时，您唯一需要做的额外工作是，如果您希望对尚不存在的项目进行任何特殊处理。但是，很可能无论如何您都需要使用专门跟踪 ID 的系统来执行此操作。

如果您担心优化，您始终可以使用名称作为查找键并将值作为 ID（在用户自动完成时返回）来保留哈希/对象。然后在用户完成时使用此哈希来填写 ID 列表。

```
/// create your lookup object
lookup = {};

/// store in the lookup
lookup[name] = id;

/// then after a few selections you'll end up with an object like so:
{
  'Item 1': 1,
  'Item 2': 2,
  'Item 42': 42
}; 
```

显然，您可能需要考虑名称的大小写可能性，但这可以通过`.toLowerCase()`

# javascript - 为背景图像过渡添加淡入淡出

> ID：14888084
> 
> 赞同：2
> 
> 时间：2013-02-15T04:07:41.153
> 
> 标签：javascript, jquery, jquery-ui

似乎我在这里找到的所有东西都提出了一些比它可能需要的复杂得多的东西。

我基本上只是想让这个在changeBackground上淡入淡出（“慢”）......
有什么简单的实施建议吗？

```
jQuery( function( $ ) {
    var images = [ "bg1.jpg", "bg2.jpg", "bg3.jpg", "bg4.jpg" ];
    var currentImage = 0;

    function changeBackground() {
        $( '#home' ).css( { backgroundImage: 'url(' + images[ ++currentImage ] + ')' } );
        if ( currentImage >= images.length - 1 ) {
            currentImage -= images.length;
        }
    }

    setInterval( changeBackground, 2600 );  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:55:06.377

这是一个简化版本（包装器，幻灯片）与包装器，幻灯片，幻灯片方法：

代码：

```
<script>
var images = [ "bg1.jpg", "bg2.jpg", "bg3.jpg", "bg4.jpg" ];
var cur_image = 0;

function changeBackground() {

    cur_image++;

    if ( cur_image >= images.length )
        cur_image = 0;

    // change images
    $( '#container' ).css({
        backgroundImage: 'url(' + images[ cur_image ] + ')'
    });

    $( '#container .slide' ).fadeOut( 'slow', function(){
        $( this ).css({
            backgroundImage: 'url(' + images[ cur_image ] + ')'
        }).show();
    } );

}

setInterval( changeBackground, 2600 );
</script> 
```

这是示例标记：

```
<div id="container">
    <div class="slide"></div>
    <div class="content">
        <p>This is example content.</p>
        <p>This is more content.</p>
    </div>
</div>
<style type="text/css">
#container { height: 768px; width: 1024px; background: url(bg2.jpg); }
#container .slide { height: 768px; width: 1024px; position: absolute; }
#container .content { position: absolute; top: 40px; left: 40px; padding: 1em; background: rgba(255,255,255,.5); }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:57:57.990

还有另一种方法可以使用 jQuery 来实现，并且仍然有一个简单的实现，看看这个小提琴：http: [//jsfiddle.net/WRMfU/](http://jsfiddle.net/WRMfU/)

我们的想法是放置带有两个 div 的图像播放器，一个在另一个上面，如下所示：

```
<div id="player">
    <div id="player-top"></div>
    <div id="player-bottom" class="img00"></div>
</div> 
```

使用 jQuery，您将图像放置在顶部 div `player-top`，将其设置为隐藏，并执行淡入动画，动画完成后，将顶部图像放置在底部 div`player-bottom`中，以便下次放置时准备好顶部的新图像并再次执行相同的任务。

```
var nImages = 3, currImage = 0;

function changePic(){
    var top = $("#player-top");
    currImage == nImages ? currImage = 0 : currImage++;
    top.hide().addClass("img0"+currImage).fadeIn(800, function(){
        $("#player-bottom").attr("class", top.attr("class"));
        top.attr("class", "");
    });
}

setInterval(changePic, 2000); 
```

我正在使用 CSS 创建类来保存背景图像，因此在 javascript 中处理它更容易......

```
#player > div.img00 { background-image: url("http://dummyimage.com/400x300/440/ffffff&text=Image+01"); }
#player > div.img01 { background-image: url("http://dummyimage.com/400x300/404/ffffff&text=Image+02"); }
... 
```

# php - PHP - 循环遍历百分比的多维列表

> ID：14888085
> 
> 赞同：1
> 
> 时间：2013-02-15T04:07:43.780
> 
> 标签：php, random, multidimensional-array, percentage

我正在构建一个与空间相关的游戏，但不知道如何遍历我的百分比“生成”机会数组，最终得到一个具有一定大小的生成星。

它必须如何生成的示例：

```
$star_chance = rand(1,100);
$star_size_chance = rand(1,100);
//loop through the list of stars here
//selected star - orange
    //loop through the size chances of star orange
    //selected star size = medium 
```

1.  红色、橙色和黄色星星各有一个生成机会，一次只能生成一个
2.  对于每个生成的恒星，它都有可能变成什么大小
3.  该方程需要适应可能更多的恒星或尺寸

    ```
    $star_array = array(
    "red" => array(
        "spawn_chance" => "25",
        "size_immense_chance" => "50",
        "size_giant_chance" => "25",
        "size_large_chance" => "15",
        "size_medium_chance" => "5",
        "size_small_chance" => "4",
        "size_dwarf_chance" => "1"
        ),
    "orange" => array(
        "spawn_chance" => "50",
        "size_immense_chance" => "4",
        "size_giant_chance" => "15",
        "size_large_chance" => "50",
        "size_medium_chance" => "25",
        "size_small_chance" => "6",
        "size_dwarf_chance" => "0"
        ),
    "yellow" => array(
        "spawn_chance" => "25",
        "size_immense_chance" => "0",
        "size_giant_chance" => "6",
        "size_large_chance" => "25",
        "size_medium_chance" => "50",
        "size_small_chance" => "15",
        "size_dwarf_chance" => "4",
        )
    ); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:20:40.877

不应该是这样的问题：

```
$star_array;

foreach($star_array as $chances_array) {
  foreach($chances_array as $chance) {
    // do sth
  }
} 
```

如果您需要密钥，您可以使用：

```
$star_array;

foreach($star_array as $star => $chances_array) {
  foreach($chances_array as $chance_name => $chance_percentage) {
    // do sth
  }
} 
```

# php - 如何进行 HTML5 文件上传？

> ID：14888088
> 
> 赞同：0
> 
> 时间：2013-02-15T04:08:20.367
> 
> 标签：php, jquery

由于某些奇怪的原因，当我上传文件时，以下代码不会打印出任何内容。我认为 HTML5 / jQuery 会返回一些东西，但是当我打印出我的变量时我没有得到任何东西。

```
<? print_r($_FILES) ?>
<? print_r($_POST) ?>
<? print_r($_GET) ?>
<? print_r($_REQUEST) ?>
<form enctype="multipart/form-data" action="/upload.php" 
method="post" class="putImages">
   <input name="media[]" type="file" multiple/>
   <input class="button" type="submit" alt="Upload" value="Upload" />
</form>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(function() {
var data = new FormData($('input[name^="media"]'));     
jQuery.each($('input[name^="media"]')[0].files, function(i, file) {
    data.append(i, file);
});

$(':file').on('change', function() {
$.ajax({
    type: 'POST',
    data: data,
    url: 'http://localhost/upload.php',
    cache: false,
    contentType: false,
    processData: false,
    success: function(data){
        alert(data);
    }
});
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:29:41.330

您可以使用`jquery form`文档[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)

一个简单的演示代码，如：

```
$(document).ready(function() { 
    var options = { 
        target:        '#output2',   // target element(s) to be updated with server response 
        beforeSubmit:  showRequest,  // pre-submit callback 
        success:       showResponse  // post-submit callback 

        // other available options: 
        //url:       url         // override for form's 'action' attribute 
        //type:      type        // 'get' or 'post', override for form's 'method' attribute 
        //dataType:  null        // 'xml', 'script', or 'json' (expected server response type) 
        //clearForm: true        // clear all form fields after successful submit 
        //resetForm: true        // reset the form after successful submit 

        // $.ajax options can be used here too, for example: 
        //timeout:   3000 
    }; 

    // bind to the form's submit event 
    $('#myForm2').submit(function() { 
        // inside event callbacks 'this' is the DOM element so we first 
        // wrap it in a jQuery object and then invoke ajaxSubmit 
        $(this).ajaxSubmit(options); 

        // !!! Important !!! 
        // always return false to prevent standard browser submit and page navigation 
        return false; 
    }); 
}); 
```

这是示例[http://malsup.com/jquery/form/file/](http://malsup.com/jquery/form/file/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:22:47.753

我建议不要使用太多代码，而是使用[Uplodify 文件上传插件](http://www.uploadify.com/)，它既快速又简单。

# python - Python List Index out of range 应该不是问题

> ID：14888092
> 
> 赞同：1
> 
> 时间：2013-02-15T04:08:42.203
> 
> 标签：python

每次在 Windows 中按下一个键时，我都使用此代码记录一次按键。在我看来，代码是完美的；没有不必要的循环或未定义的变量，它应该工作得很好。

但是，我一直在终端中得到这个：

```
Everything Imported Successfully
Starting Loop
Beginning Checks
Traceback (most recent call last):
  File "C:\Users\***\relogged.pyw", line 15, in <module>
    loop(OldKeyChar=[])
  File "C:\Users\***\relogged.pyw", line 9, in loop
    if OldKeyChar[num] == '1': #check to see if key was pressed
IndexError: list index out of range 
```

我错过了什么？它应该可以工作，但是我的代码会导致错误。

```
import win32api 
print("Everything Imported Successfully")

def loop(OldKeyChar):
    print("Beginning Checks")
    while(True): #always checking
        for num in range(0,127): #iterate through list of ascii codes
            if not win32api.GetAsyncKeyState(num): #if key is not being pressed
                if OldKeyChar[num] == '1': #check to see if key was pressed 
                    OldKeyChar[num] = '0' #make sure not recorded again
            else:
            OldKeyChar[num] = '1' #add pressed key to pressed list

OldKeyChar = ['0' for i in range(0,127)]
print("Starting Loop")
loop(OldKeyChar=[]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:11:23.260

因为您将一个空列表传递给`loop`函数？

```
loop(OldKeyChar=[]) 
```

应该是这样的：

```
loop(OldKeyChar) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:11:49.973

```
loop(OldKeyChar=[]) 
```

应该

```
loop(OldKeyChar) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T04:10:34.680

`OldKeyChar`是一个空列表，所以当你运行它时，它会进入`while`循环，然后进入`for`循环，分配`0`给`num`. 如果某个键被按下，它将尝试检查`OldKeyChar[0]`不存在的 。

在您的情况下，解决方案是用`0`s 预填充列表。您已尝试执行此操作，但由于某种原因，正在传递一个空列表。由于数字是不可变的，您实际上可以通过简单地将列表相乘来更轻松地构建这个预填充列表：

```
loop(OldKeyChar=[0]*128) 
```

请注意，[PEP-8](http://www.python.org/dev/peps/pep-0008/)建议`CapWords`为课程保留，并`lowercase_with_underscores`为其他内容使用。

请注意，我认为这不是一个很好的实现。相反，请考虑使用`set`在特定循环中按下的值：

```
def loop():
    print("Beginning Checks")
    while(True):
        pressed = {i for i in range(0, 127) if win32api.GetAsyncKeyState(i)} 
```

这里用[集合理解](http://www.youtube.com/watch?v=pShL9DCSIUw)构造。这允许您检查一个键是否被按下（如果它在`pressed`，它是，如果不是，它不是），并且不需要重置它，因为它将在下一次迭代中被替换（如果你必须保持与您在其他地方使用对它的引用相同的集合，您可以`set.clear()`在每次迭代中使用它，然后进行更新）。

# sql-server - 使用数据透视表生成“训练矩阵”

> ID：14888094
> 
> 赞同：0
> 
> 时间：2013-02-15T04:09:26.300
> 
> 标签：sql-server, pivot

我有一个“CertificateEntries”表，其内容如下：

```
Entity_ID | Certificate_ID | CertificateExpiry
1         | 1              | dd/mm/YYYY
1         | 2              | dd/mm/YYYY 
```

等等，等等。本质上是多对多的关系，实体可以有许多证书，证书可以分配给许多实体。

我想要做的是对此进行旋转，以便证书列表是列；

```
Entity_ID | 1 | 2 | 3 | 4 |
1         | T | T | F | F |
2         | T | F | F | T | 
```

我不太明白如何完成这项工作，所有在线示例似乎都表明您需要 COUNT、MAX、AVG 等。理想情况下，我希望到期代替 T/F，但如果那不可能， 我能理解...

如果有人可以帮助我指出正确的方向，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:57:24.997

试试这个 ：

```
begin try
create table #test 
(Entity_ID int,Certificate_ID int,CertificateExpiry date)

insert into #test values(1,1,'01/01/2013')
insert into #test values(1,2,'05/01/2013')
insert into #test values(1,5,'01/05/2013')
insert into #test values(1,9,'05/12/2013')

insert into #test values(2,1,'10/05/2013')
insert into #test values(2,2,'12/03/2013')
insert into #test values(4,6,'2/05/2013')
insert into #test values(5,8,'4/09/2013')

--select * from #test

DECLARE @Certificate_Ids VARCHAR(8000)

SELECT @Certificate_Ids = COALESCE(@Certificate_Ids + '], [', '') + cast(Certificate_ID as varchar(20)) FROM 
(select distinct Certificate_ID from #test ) as a

Set @Certificate_Ids='['+@Certificate_Ids+']'

--print @Certificate_Ids

Declare @query varchar(max)

Set @query=
'SELECT
Entity_ID, ' + @Certificate_Ids + ' 
FROM #test
PIVOT
(
  MAX(CertificateExpiry)
  FOR Certificate_ID in (' + @Certificate_Ids + ' )   
) A'

print @query

exec(@query)

drop table #test
end try

begin catch
drop table #test
end catch 
```

# c# - 区分管理员和用户登录？

> ID：14888099
> 
> 赞同：0
> 
> 时间：2013-02-15T04:10:11.260
> 
> 标签：c#, asp.net

我正在设计一个网站，它有一个登录模块.. 这里 3 个用户/人（主要）将访问登录页面：

1.  超级管理员（域所有者）
2.  本地管理员（在域所有者下）
3.  普通用户（在本地管理员下）

域所有者对本地管理员和普通用户拥有权限，而本地管理员对普通用户拥有权限。

现在，如何区分上述用户的登录类型？

我试过放一个下拉菜单，并添加三个成员，但我觉得它看起来不太好。

做上述场景的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:20:16.820

在普通网站中，这些将作为角色处理。

在以后的用户创建期间，您将角色分配给用户。

您的登录页面只需要用户输入用户名和密码。

您可以轻松地将用户角色关系保留在数据库中。

Asp.net 对 [`RoleProviders`](http://msdn.microsoft.com/en-us/library/8fw7xh74%28v=vs.100%29.aspx).

您可以使用角色来授权哪些用户可以访问网站的哪些部分。

参考：[创建和管理角色](http://www.asp.net/web-forms/tutorials/security/roles/creating-and-managing-roles-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:13:54.377

您需要另一个 [大概是 SQL] 表来获取访问权限/级别/权限。对于最基本的实现，在 an 中有 3 个选项`enum`，`update`每个选项都有`user`用户级别`enum`。

# hta - 为什么我得到一个空格而不是换行符？

> ID：14888101
> 
> 赞同：-1
> 
> 时间：2013-02-15T04:10:23.610
> 
> 标签：hta

好的，所以我正在为我的工作创建一个 .hta，但我也使用它来帮助我了解一些不同的编码技术。所以我完全有可能遗漏了一些简单的东西。

这是代码：

```
<script>
function TransferData()
{
  var textholder = "==============================";
  textholder += "\r\n";
  textholder += "\r\n" + document.getElementById("name").value;
  textholder += "\r\n" + document.getElementById("phone").value;
  textholder += "\r\n" + document.getElementById("email").value;
  document.getElementById("outputbox").innerHTML = textholder;
}
</script>

<textarea id="name" rows="1" cols="30" onkeyup="TransferData()"></textarea>
<textarea id="phone" rows="1" cols="30" onkeyup="TransferData()"></textarea>
<textarea id="email" rows="1" cols="30" onkeyup="TransferData()"></textarea>

<textarea id="outputbox" rows="20" cols="50"></textarea> 
```

每个元素 ID 从文本区域中提取并发送到文本区域。如果将其发送到其他地方会更容易，请随时提出建议。这些数据不能保存到任何东西，所有这些都必须从一个文档中运行。收集这些数据，然后很快就会被清除。谁能告诉我为什么 "\r\n" 只给我一个空格而不是换行符？

顺便说一句......如果我错过了标记这篇文章，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:15:24.807

您应该分配给`value`文本区域的属性，而不是`innerHTML`：

```
document.getElementById("outputbox").value = textholder; 
```

# php - 定义这样的变量的最干净的方法是什么？

> ID：14888105
> 
> 赞同：0
> 
> 时间：2013-02-15T04:10:39.690
> 
> 标签：php, variables, coding-style

我有一个变量：

```
$FolderName = date('c', time()); // I know time() is optional.. not the point. 
```

由于我可能正在使用此脚本，我正在 Windows 机器上编写并且输出中有冒号，因此我需要执行以下操作：

```
$FolderName = str_replace(':', '-', date('c', time())); 
```

我觉得函数中有太多的函数是草率的。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:52:17.510

为了使您的文件夹名称对 Windows 机器完全安全，您应该执行以下操作

```
$match = preg_match('/[\/|\\\|\?|"|\<|\>|\||\:|\*|%|\#]/is', $FolderName);
if($match)
{
  echo "Invalid filename. A filename can't contain any of the following characters: \ / : * ? \" < > | % # ";
}
else
{
  // do stuff..
} 
```

上述所有字符在 Windows 文件名中均无效

# http - Informatica HTTP 转换

> ID：14888106
> 
> 赞同：0
> 
> 时间：2013-02-15T04:10:58.037
> 
> 标签：http, etl, informatica-powercenter, informatica

我面临 Informatica HTTP 转换的问题。

在 HTTP 转换中，集成服务通过请求连接到 HTTP 服务器，服务器响应记录在目标表中。

我正计划构建一个 Web 应用程序，它将获取用户名并在下一页打印密码，密码将记录在目标表中。我在建立与数据库的连接时遇到了问题，现在只是寻找已经部署的可以实现这一点的网站。

你能推荐任何网站吗？一个非常简单的转换就可以了。一个简单的网站或任何使简单的 HTTP 转换成为可能的帮助都会有很大的帮助。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:38:54.953

您可以创建一个接受 UserId 并打印密码的简单 PHP 网页。您可以在 Windows 上使用 Wamp 服务器在本地机器上运行 PHP 站点。

在设置 HHTP 转换 HTTP 属性时，将 Base Url 指定为您提交表单的页面地址（即您在 html 表单标记的**操作**部分中指定的网页地址。在本例中为 /httptrans/submit.php）

注意：HTTP 转换中的端口名称应与表单元素中提及的相同。

下面是示例代码。

## httptrans/login.php

```
<html>
<body>
<form action=httptrans/submit.php' method='post'>
User: <input type=text name='userid' /><br/>
<input type="submit" value="submit" />
</form>
</body>
</html> 
```

## httptrans/submit.php

```
<?php

$user=$_POST['userid'];

/* your database operation */

echo "User added";  // this output is sent to http transformation as response

?> 
```

这应该有效。

# ruby - 为什么我必须声明 var = Class.new？

> ID：14888111
> 
> 赞同：-1
> 
> 时间：2013-02-15T04:11:28.390
> 
> 标签：ruby

为什么我不能只设置`var = Class?`为什么它必须是`var = Class.new?`您可以使用`var = [], {},`或设置数组、哈希、字符串中的变量`"some_string"`。Class 是否正在做一些使其与众不同的特定事情？

```
class Word
    def palindrome(string)
        string == string.reverse
    end
end

w = Word.new

puts w.palindrome("racecar") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:29:18.027

实际上，你已经把特殊情况倒过来了：

*   `[]`是简写`Array.new`
*   `{}`是简写`Hash.new`
*   `""`是`String.new`( 的简写，因为没有语法结构（例如 , 或 ) 就无法`"`指定`'`字符串`%`。

你*可以*这样做`var = Klass`，但是分配`var`给`Klass`, 而`Klass.new`调用`new`对象上的方法`Klass`（就像任何其他方法调用一样，没有什么特别的），它返回类的新*实例*`Klass`。

[注意：我已将`Class`您的问题替换为`Klass`(defined via `class Klass; end`) 以减少混淆，因为谈论`Class`和`Class`实例会引入很多元性，我认为您在这里并不关心，而您只是想`Class`代表任何课程。]

# r - 在 R 中存储数字到任何类型映射的好方法

> ID：14888117
> 
> 赞同：0
> 
> 时间：2013-02-15T04:12:24.047
> 
> 标签：r, list, hash, map

如果有人有兴趣以表格形式保存数据

```
numeric --> any_type 
```

不诉诸铸造，一个人应该怎么做呢？

意思是，虽然这是非法的：

```
x<-list(1 = "one", 2 = "two"); 
```

所需的功能/行为可以通过以下方式代理：

```
x<-list("1" = "one", "2" = "two"); 
```

并用于检索值，

```
x[as.character(1)]; # would produce the value "one" 
```

然而，第二种方法需要在构造列表和检索键值对时显式转换为字符。

我查看了包'hash'，但这也不能解决问题。

# ios - 在没有导航控制器的情况下返回导航栏（如 android 中的 Activity.this.finish() ）？

> ID：14888119
> 
> 赞同：0
> 
> 时间：2013-02-15T04:12:26.813
> 
> 标签：ios, ios6

我在 android 中有背景，简而言之，每个屏幕都有 Activity 被推送到堆栈上，当我在该 Activity 上调用 Activity.this.finish() 时，它会从堆栈中删除，并且应用程序会返回上一个屏幕（行为类似于后退按钮）。在 ios 6 应用程序中，我有导航栏（它没有嵌入在导航控制器中，有没有办法调用一些东西来破坏当前控制器并返回上一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:17:50.160

如果您无法访问 NavigationController，则无法更改它的堆栈。

我认为您应该只授予您对 NavigationController 的视图访问权限（例如，通过将引用 NC 的字段添加到视图的类），然后从您想要的任何地方调用它。

您还可以在 AppDelegate 类中保留对 NC 的引用，因此您可以从应用程序的任何位置调用 NC 的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:18:12.043

这取决于您如何带来“电流控制器”。由于不涉及导航控制器，您可以使用“PresentViewController”来带来这个“当前控制器”。然后，您可以“dismissViewController”为

```
[self dismissViewControllerAnimated:YES completion:Nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T04:19:04.247

视图与控制器没有显式关系，并且视图不能在控制器堆栈中。将按钮目标设置为 UIViewController 实例并在操作方法调用中：

```
[self.navigationController popViewControllerAnimated:YES|NO]; 
```

# magento - Magento 编辑 $this->getCurrentCategory()->getDescription() 中的内容

> ID：14888122
> 
> 赞同：0
> 
> 时间：2013-02-15T04:13:10.770
> 
> 标签：magento

我正在编辑一段文字（更正拼写）下

```
app\design\frontend\default\default\template\catalog\product\products_list.phtml 
```

该函数被调用：

```
$this->getCurrentCategory()->getDescription() 
```

但是，我在代码和管理面板中都找不到任何东西。我只是想调整其中的一些HTML文本，谁能告诉我在哪里可以找到这些内容？

我不是这个网站的原始开发者，这就是为什么我不知道在哪里可以找到这些文本。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:15:42.967

这需要类别描述。在管理员界面中，您将使用目录菜单选项（位于顶部），然后使用管理类别。

# r - 如何在 R 中创建散列数据帧

> ID：14888131
> 
> 赞同：1
> 
> 时间：2013-02-15T04:15:03.030
> 
> 标签：r, dataframe

给定以下数据（myinput.txt）：

```
A  q,y,h
B  y,f,g
C  n,r,q
### more rows 
```

如何将其转换为 R 中的这种数据结构？

```
$A
 [1] "q" "y" "h" 
$B
 [1] "y" "f" "g"
$C
 [1] "n" "r" "q" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:22:08.353

我假设这是您的数据：

```
dat <- read.table(text="q,y,h
y,f,g
n,r,q", header=FALSE, sep=",", row.names=c("A", "B", "C")) 
```

如果你想要一个自动方法：

```
as.list(as.data.frame((t(dat)), stringsAsFactors=FALSE))

## $A
## [1] "q" "y" "h"
##
## $B
## [1] "y" "f" "g"
## 
## $C
## [1] "n" "r" "q" 
```

另外两种有效的方法是：

```
lapply(apply(dat, 1, list), "[[", 1)

unlist(apply(dat, 1, list), recursive=FALSE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:06:52.710

使用一些`readLines` `strsplit`和正则表达式来说明从一开始就破坏名称：

```
dat <- readLines(textConnection("A  q,y,h
B  y,f,g
C  n,r,q"))

result <- lapply(strsplit(dat,"\\s{2}|,"),function(x) x[2:length(x)])
names(result) <- gsub("^(.+)\\s{2}.+$","\\1",dat)

> result
$A
[1] "q" "y" "h"

$B
[1] "y" "f" "g"

$C
[1] "n" "r" "q" 
```

或使用更少的正则表达式和更多步骤：

```
result <- strsplit(dat,"\\s{2}|,")
names(result) <- lapply(result,"[",1)
result <- lapply(result,function(x) x[2:length(x)])

> result
$A
[1] "q" "y" "h"

$B
[1] "y" "f" "g"

$C
[1] "n" "r" "q" 
```

# java - Swing 应用程序中的 MVC 架构

> ID：14888137
> 
> 赞同：2
> 
> 时间：2013-02-15T04:15:48.833
> 
> 标签：java, swing, model-view-controller, architecture

我有一个关于 MVC Swing java 应用程序的问题。

可以说，`Entity e`是一个没有任何逻辑的简单类——只有属性和 getter、setter、equals、hashCode、toString（或者可能是 compareTo）。它将代表 MVC 中的模型。

比我们拥有的`MainWindow`（作为 MVC 中的视图）。

可以使用`e.getSomething();`，`e.setSomething(someValue);`甚至排序/迭代一些`Element`s集合`MainWindow`吗？因此，在组件侦听器匿名类中进行一些 GUI 渲染和操作（我猜侦听器实现不能在 Controller 中，因为它是“依赖于视图” - HTML 没有侦听器）？

我做了这样的事情`MainWindow`：

```
...
final Element el = Controller.getInstance().getSomeElement();
JButton save = new JButton();
JTextField field = new JTextField(el.getSomething());

save.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        el.setSomething(field.getText());
        Controller.getInstance().persist(); //let controller know some Element has changed and needs to be saved
    }
});
... 
```

如何更改这段代码以使其符合 MVC？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:26:40.940

没有硬性规定；通常视图和控制器在 Swing 应用程序中组合在一起。

但是，在严格的 MVC 中，视图不应依赖于控制器。视图只是监听模型并绘制自己，然后将其组件和事件暴露给控制器。控制器对这些事件做出反应并根据需要更改模型，从而更改视图。

因此，在您的示例中，我将对 MainWindow 使用以下方法：

```
public void addSaveListener(ActionListener l) {
    save.addActionListener(l);
}

public void removeSaveListener(ActionListener l) {
    save.removeActionListener(l);
} 
```

此外，我会将 Element 的实例传递给 MainWindow 构造函数，这样它就不必从 Controller 中获取它。控制器将创建 MainWindow，并传入它自己的引用。

然后，在控制器中：

```
myMainWindow.addSaveListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        el.setSomething(field.getText());
        persist(); // Element has changed and needs to be saved
    }
}); 
```

在较大的应用程序中，我会考虑事件总线架构而不是我上面写的，但这可能是一个不同的问题。

# javascript - javascript中的全局对象

> ID：14888138
> 
> 赞同：0
> 
> 时间：2013-02-15T04:15:55.057
> 
> 标签：javascript

我有 2 个文件。1个html和一个js。html 文件有复选框。当我选择一个复选框时，我正在设置一个标志。这个标志必须放在 .js 文件中。根据是否设置了标志，我将在 js 文件中执行一些操作。基本上，我该怎么做才能使从 html 文件中设置的标志在 javascript 文件中可用？

谢谢你。

### html文件

```
function checkWIFI(){

if(document.getElementById('wifi').checked == true) 

wifiFlag.changeFlag(true);

else 

wifiFlag.changeFlag(false); 

} 
```

### 脚本文件

```
wifiFlag = new testFlag(); 

function testFlag()

{

this.flag = false;

} 

testFlag.prototype.changeFlag = function(newFlag)

{

 this.flag = newFlag; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:42:25.910

您可以为此使用**全局变量**并在 JS 文件的顶部声明它们。无论您在 下声明什么`window`，都将成为全局变量。在您的 JS 文件中，在顶部添加以下行。

```
window.flag = 0; 
```

在复选框中，当您更改时，设置标志。

```
<input type="checkbox" name="flag"
       onclick="if (this.checked) window.flag = 1; else window.flag = 0;" /> 
```

现在，您可以使用`window.flag`.

```
if (window.flag == 1)
    // Do something
else
    // Do something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:02:50.110

我建议的最安全的方法是使用可用的数据属性。例如，

```
<input type="checkbox" name="firstCheckbox" data-flag="old"> 
```

这种方法允许您优雅地回退，因为旧浏览器不会抱怨。如果您有多个复选框，则不需要为每个复选框进行额外标记。使用全局变量可能会导致问题和命名空间问题。隐藏值也是一种很好的方法:)

您可以使用以下两种方式之一获取数据属性的值。1) getAttribute，旧的 JavaScript 方法，你想获取数据标志。在jQuery中，使用attr()，2) HTML5的方式，存储在.dataset数组属性中，所以.dataset['flag']，在jQuery中相当于是.data('flag')

安吉拉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:49:04.700

我建议您编写 .js 文件中的 javascript，以便可以为其提供必要的上下文信息。因此，编写函数或可以传递复选框值的东西。这将有助于使您的代码更具可重用性，并且不会被绑定到全局窗口。您可以在复选框值更改时启动此代码，枚举复选框值并将它们传递给您的代码。我建议不要使用全局变量。如果你绝对必须，那么命名它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T04:45:20.537

在 html 中声明一个隐藏变量

```
<input type="hidden" id="hidden1" > 
```

并为其设置值

```
document.getElementById('hidden1').value = '//your returned value'; 
```

访问脚本中的隐藏值

```
var x=document.getElementById("hidden1").value;
alert(x); 
```

希望这对你有用..

# mysql - 关于 Wordpress 数据库设计的思考

> ID：14888141
> 
> 赞同：0
> 
> 时间：2013-02-15T04:16:17.610
> 
> 标签：mysql, database

我开始为用户生成的内容站点进行数据库设计，并尝试考虑最佳方法。我将在我的设置中包含组、主题和主题回复。我想知道是否最好将数据库设计为将所有这些信息存储在通用内容表中，类似于 Wordpress，并将相应的操作（为主题添加书签等）存储在操作表中。

我读了很多书，使用这种方法与为每种类型（组、主题、主题回复）创建单独的内容和操作表之间似乎存在分歧。

我很想知道你的意见是什么。这将是一个 SaaS 解决方案，每天都会有大量的主题和主题回复。

拥有单独的表意味着更多的 JOIN，但表不会增长得那么大、那么快，而单个内容和操作表会增长得非常快，但不需要那么多的连接。

想法？意见？这将是一个 MySQL 数据库，仅供参考。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:37:55.190

我可能在面向对象的方法中有多个实体，使用诸如教义之类的 orm 来持久化它们。这将为您做很多事情。顺便说一句，这种决定实际上取决于您如何定义类型以及它们的共同点。很难给你一个好的建议。

教义 ORM： http: [//www.doctrine-project.org/projects/orm.html](http://www.doctrine-project.org/projects/orm.html)

# java - 试图在 struts2 上应用 Spring 安全性，但它不起作用

> ID：14888146
> 
> 赞同：1
> 
> 时间：2013-02-15T04:16:46.813
> 
> 标签：java, struts2, spring-security

我有以下代码在 struts2 上应用 Spring 安全性，但它允许用户查看受保护的页面，尽管我还没有实现数据源部分（因为我不知道如何），但我不希望它允许未经授权的用户打开页面.

`Web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring/*-context.xml
        </param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <context-param>
        <param-name>org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG</param-name>
        <param-value>/WEB-INF/tiles.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

我的jsp

```
<%@taglib uri="/struts-tags" prefix="s"%>
    <sec:authorize ifAllGranted="ROLE_ADMIN">
        <a href="<s:url namespace ="/Profile" action="view.action"/>" >Profile</a>
    </sec:authorize> 
```

我的安全方法

```
import org.apache.struts2.convention.annotation.Action;
import org.springframework.security.access.annotation.Secured;

@Action
public class Profile{

    @Secured ({"ROLE_ADMIN"})
    public String view(){
        System.out.println("view");
        return "View"; 
    } 
```

安全上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:security="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/security
                           http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:global-method-security secured-annotations="enabled" />

    <security:http auto-config="true">
        <!-- Restrict URLs based on role -->
        <security:intercept-url pattern="/index*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/logoutSuccess*" access="IS_AUTHENTICATED_ANONYMOUSLY" />

        <security:intercept-url pattern="/css/main.css" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/resources/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />

        <security:intercept-url pattern="/**" access="ROLE_USER" />

        <!-- Override default login and logout pages -->
        <security:form-login login-page="/login.html" 
                             login-processing-url="/loginProcess" 
                             default-target-url="/index.jsp" 
                             authentication-failure-url="/login.html?login_error=1" />
        <security:logout logout-url="/logout" logout-success-url="/logoutSuccess.html" />
    </security:http>

    <security:authentication-manager>
        <security:authentication-provider >
            <security:jdbc-user-service data-source-ref="dataSource" />
        </security:authentication-provider>
    </security:authentication-manager>

</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:17:22.317

为了通过 URL 保护您的 struts 应用程序，您需要确保在 struts2 之前有 for springSecurityFilterChain。您发布的配置似乎根本没有 springSecurityFilterChain 。简而言之，更新您的配置如下：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<!-- The order of filter-mapping is important springSecurityFilterChain should be first! -->
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

上述设置将使用基于 URL 的安全性保护您的应用程序。但是，为了使用基于方法的安全性来保护您的应用程序，您需要确保您允许 Spring 创建使用 @Secured 注释的对象。为此，请确保您已遵循参考中提供的有关[集成 Spring 和 Struts](http://static.springsource.org/spring-framework/docs/3.1.x/spring-framework-reference/html/web-integration.html#struts)的说明。

# python - 图像模块 Python

> ID：14888147
> 
> 赞同：1
> 
> 时间：2013-02-15T04:17:04.887
> 
> 标签：python

我收到有关模块的错误，并且已经搜索了一段时间的解决方案并且空手而归。我正在用 python 编码并在 eclipse pydev 中工作。在我输入的代码顶部。

```
import Image 
```

我收到一个错误，指出`ImportError: No module named Image`

这里只是 Python 解释器系统 Pythonpath 的一些截图

[http://imageshack.us/a/img5/614/92989360.png](http://imageshack.us/a/img5/614/92989360.png)

[http://imageshack.us/f/545/79985417.png/](http://imageshack.us/f/545/79985417.png/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:21:53.283

您需要安装 Python 图像库：

[太平船务](http://www.pythonware.com/products/pil/)

您可以通过以下方式使用 pip 安装它：

```
pip install PIL 
```

# class - 是否可以将 Class 放入一个变量中并在 actionscript3 中访问该类的静态变量和函数？

> ID：14888148
> 
> 赞同：0
> 
> 时间：2013-02-15T04:17:38.050
> 
> 标签：class, variables, reflection, actionscript, hint

说我有以下课程

```
public class Scene{ 
  public static var title="new scene";
  public function Scene(){}
  public static function start() { trace("scene started"); }
} 
```

你怎么能像这样访问 Scene 类的静态变量和函数？

```
var i:Class = Scene;
trace(i.title);
i.start(); 
```

我试图弄清楚用 Class 分配的变量如何在 actionscript 中工作。欢迎任何提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:05:12.440

从类中调用[静态方法：](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f30.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f25)

```
trace(Scene.title);
Scene.start(); 
```

单例模式通过接口类启用构造函数、本地引用和潜在的抽象。

单例示例`Scene`：

```
package
{

    public class Scene
    {

        private static var instance:Scene = new Scene();

        public static function getInstance():Scene
        {
            return instance;
        }

        public var title:String = "new scene";

        public function Scene()
        {
            if (instance)
                throw new Error("Scene is a singleton and can only be accessed through Scene.getInstance()");
        }

        public function start():void
        {
            trace("scene started.");
        }

    }
} 
```

您的示例实现现在将是：

```
var i:Scene = Scene.getInstance();
trace(i.title);
i.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:05:39.467

这是您可以访问动态类（场景）及其属性/方法的方式：

```
var myDynamicClasses:Array = [Scene];   // Required

var i:Class = Class(getDefinitionByName("Scene"));
trace(i.title);
i.start.call(); 
```

如果第一行不包括在内，这可能会引发错误。因为，当编译器注意到没有使用场景类（不是 adobe 包中的场景）时，它会忽略它。因此它不能用于动态初始化。

我们可以强制编译器通过将这些类名放入变量中来包含这些类，或者像上面那样声明一个数组作为快速破解。

如果您有许多动态类，则可以在此数组中添加对它们的引用，并且编译器将包含每个类以进行动态初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:02:47.797

```
var i:Class = Scene;
trace(i.title); 
```

应该抛出一个错误，因为编译器在到达第 2 行时不能再假定 i 是一个场景。如果你要强制 Class 对象，它应该可以工作。

```
var i:Class = Scene;
trace((Scene(Class).title); 
```

# android - 如何在android中设置sqlite fts

> ID：14888151
> 
> 赞同：0
> 
> 时间：2013-02-15T04:17:56.363
> 
> 标签：android, database, sqlite

我有一个有 5 列的表。其中两个是文本。我想对这两列使用 fts 。我有一个包含所有 5 列或只有两列的 fts 表，我该如何设置？

注意：我正在运送我自己的数据库，而不是从代码中创建一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:55:58.183

```
Lets Start DBMS
       For Create table : `CREATE VIRTUAL TABLE book USING fts4 (id, author, title, excerpt);`
Select  Table:
       SELECT * FROM book WHERE excerpt MATCH 'best NEAR worst';
Insert int table:
       INSERT INTO pages(rowid, docid, title, body) VALUES(1, 2, 'A title', 'A document body'); 
```

> 有关更多信息，请参阅此链接 1\. [http://www.phparch.com/2011/11/full-text-search-with-sqlite/](http://www.phparch.com/2011/11/full-text-search-with-sqlite/) 2\. [http://www.sqlite.org/fts3.html](http://www.sqlite.org/fts3.html)

# python - python + 导入 C++ 编码帮助。MSVCCompiler 缺少 compiler_cxx 修复；找不到 vcvarsall.bat

> ID：14888152
> 
> 赞同：2
> 
> 时间：2013-02-15T04:18:00.773
> 
> 标签：python, mingw, scipy

我有 scipy 和 numpy。所以我安装`MinGW`了`Cygwin`. `o MinGW`我添加了环境变量的路径。但是当我运行我的 python 代码时，它会显示此错误消息。

* numpy.distutils 中没有名为 msvccompiler 的模块；尝试从 distutils Missing compiler_cxx fix for MSVCCompiler*

```
Traceback (most recent call last):
  File "C:\Python27\jicrd_simulation.py", line 633, in <module>
    cProfile.run('run()','infoprof_c_old')
  File "C:\Python27\lib\cProfile.py", line 29, in run
    prof = prof.run(statement)
  File "C:\Python27\lib\cProfile.py", line 135, in run
    return self.runctx(cmd, dict, dict)
  File "C:\Python27\lib\cProfile.py", line 140, in runctx
    exec cmd in globals, locals
  File "<string>", line 1, in <module>
  File "C:\Python27\jicrd_simulation.py", line 615, in run
    P,trace=search(g)
  File "C:\Python27\jicrd_simulation.py", line 580, in search
    hits=compute_hits(g,pos,P)
  File "C:\Python27\jicrd_simulation.py", line 299, in compute_hits
    source_counts = thetarange(g,g.source,move)
  File "C:\Python27\jicrd_simulation.py", line 229, in thetarange
    headers=['<stdio.h>','<stdlib.h>','<math.h>','"'+g.path +'/comp.h"'])
  File "C:\Python27\lib\site-packages\scipy\weave\inline_tools.py", line 355, in inline
    **kw)
  File "C:\Python27\lib\site-packages\scipy\weave\inline_tools.py", line 482, in compile_function
      verbose=verbose, **kw)
  File "C:\Python27\lib\site-packages\scipy\weave\ext_tools.py", line 367, in compile
      verbose = verbose, **kw)
    File "C:\Python27\lib\site-packages\scipy\weave\build_tools.py", line 272, in build_extension
      setup(name = module_name, ext_modules = [ext],verbose=verb)
    File "C:\Python27\lib\site-packages\numpy\distutils\core.py", line 186, in setup
      return old_setup(**new_attr)
    File "C:\Python27\lib\distutils\core.py", line 169, in setup
      raise SystemExit, "error: " + str(msg)
  CompileError: error: Unable to find vcvarsall.bat 
```

那我现在该怎么办？我有一个 MSVCCCompiler。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:24:18.513

当您谈论 C++ 编码时，我假设您想要编译 C/C++ 扩展。我使用 MinGW 在 Win **32**上编译 C 扩展的方法是显式附加编译器：

`python setup.py build_ext --compiler mingw32`

如果你想为 Win **64**编译，MinGW 似乎不是最好的选择。[我在这里](http://mattptr.net/2010/07/28/building-python-extensions-in-a-modern-windows-environment/)和[这里](http://mail.scipy.org/pipermail/numpy-discussion/2010-August/052408.html)得到了提示，并获得了我的扩展，以使用 Microsoft SDK 中的 VC++ 10 进行编译。

# ruby-on-rails - 为什么 Rails 为我的#collection# 路由寻找 ID？

> ID：14888153
> 
> 赞同：0
> 
> 时间：2013-02-15T04:18:01.553
> 
> 标签：ruby-on-rails, routing

我有...

**路线.rb**：

```
 resources :standards do
     collection do
        get :none
     end
  end 
```

我得到以下内容`rake routes`：

```
none_standards GET    /standards/none(.:format)                  standards#none 
```

我有以下内容`standards_controller.rb`：

```
def none
end 
```

那么为什么在 /standards/none 中会出现“找不到没有 ID 的标准”错误？

随着`better_errors`，它说：

```
(gem) activerecord-3.2.11/lib/active_record/relation/finder_methods.rb
  305 
  306       ids = ids.flatten.compact.uniq
  307 
  308       case ids.size
  309       when 0
  310         raise RecordNotFound, "Couldn't find #{@klass.name} without an ID"
  311       when 1
  312         result = find_one(ids.first)
  313         expects_array ? [ result ] : result
  314       else
  315         find_some(ids)

...

Instance Variables

@table  
#<Arel::Table:0x007fc321207650 @name="standards", @engine=Standard(id: integer, name: string, description: string, created_at: datetime, updated_at: datetime), @columns=nil, @aliases=[], @table_alias=nil, @primary_key=nil>
@klass  
Standard(id: integer, name: string, description: string, created_at: datetime, updated_at: datetime) 
```

这是一个收集路线而不是成员路线，所以这看起来很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:18:37.663

问题出在`declarative_authorization`. 我不得不`filter_resource_access`在.`filter_access_to :all``standards_controller.rb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:40:04.393

奇怪！，对我来说，它适用于以下设置（只需检查您的路线所说的内容）

```
#app/controllers/standards_controller.rb
class StandardsController < ApplicationController
   def none

   end 
end

#config/routes.rb
resources :standards do
  collection  do
    get :none
  end
end 
```

我的路线是

```
none_standards GET    /standards/none(.:format)     standards#none
     standards GET    /standards(.:format)          standards#index
               POST   /standards(.:format)          standards#create
  new_standard GET    /standards/new(.:format)      standards#new
 edit_standard GET    /standards/:id/edit(.:format) standards#edit
      standard GET    /standards/:id(.:format)      standards#show
               PUT    /standards/:id(.:format)      standards#update
               DELETE /standards/:id(.:format)      standards#destroy
          root        / 
```

# ios - 跟踪自上次尝试______以来的时间

> ID：14888158
> 
> 赞同：1
> 
> 时间：2013-02-15T04:18:27.680
> 
> 标签：ios, objective-c, date, time, save

我有一个游戏，用户可以每小时进行一次特定活动。如果他们不只是在设置中更改设备当前时间，我如何确保距离他们上次尝试某事已经过去了一个小时？

此外，如果我想阻止用户只是删除应用程序并重新安装它，以便他们可以不断尝试而不必等待整整一个小时，即使在应用程序删除后我有什么方法可以在设备上存储数据或那必须是服务器的东西吗？

如果我没有服务器，任何人都可以通过免费的应用内购买或其他方式想到一个聪明的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:33:49.877

[以在应用程序重新安装](https://stackoverflow.com/a/3680561/335858)后仍然存在的方式保存数据的唯一方法是将其保存到[keychain](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)。这是可行的，因为钥匙串数据可以[在多个应用程序之间共享](https://stackoverflow.com/q/4115744/335858)；卸载时删除应用程序的其余数据。

如果您需要一种可靠的方式来告知当前时间，则设备必须连接到互联网。在这种情况下，您将能够通过[NTP](http://en.wikipedia.org/wiki/Network_Time_Protocol)使用时间服务之一检查当前时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:23:30.640

这听起来正是您需要服务器来完成的任务。

当用户想要执行这个有限的操作时，让他们向服务器请求许可。您可以记录用户的 ID 和请求时间，决定他们是否可以执行操作，然后返回一个小的成功/失败消息。如果他们更改时钟就可以工作，如果他们从不同的设备登录就可以工作，如果他们擦除设备数据就可以工作。

# python - Python中的列表联合算法

> ID：14888164
> 
> 赞同：1
> 
> 时间：2013-02-15T04:19:45.027
> 
> 标签：python, algorithm

我现在正在尝试使用列表联合算法，具有以下规范：如果 L1 中的元素在 L1 中出现的次数多于在 L2 中出现的次数，则联合应该返回最大出现次数，即它在 L1 中出现的数量，如果一个元素在 L2 中出现的次数多于在 L1 中出现的次数，则 L1 和 L2 的角色会切换。如果 L1 和 L2 不相交，则并集只返回常规集合并集。到目前为止，我的思考过程是：

1.  遍历 L1。
2.  检查 L1 中的任何元素是否也在 L2 中。
3.  如果 L1 中的元素也在 L2 中，则检查哪个列表具有较大`count`的元素。
4.  如果 L1 和 L2 不相交，则返回正则集合并集。
5.  反转 L2 和 L1 重复步骤 3。
6.  归还工会。

我正在考虑使用该`max`函数来告诉 Python 返回列表，其中联合中每个元素的多重性是 L1 和 L2 中元素的最大出现次数。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:09:58.347

对于标准模块来说，这是一项完美的工作`collections`，它提供了多组：

```
from collections import Counter

result_list = list((Counter(list1)|Counter(list2)).elements()) 
```

一个`Counter`对象在这里表示一个多重集（通常是其元素的多个副本的集合），联合运算符`|`保持每个元素的最大计数，并`elements()`返回一个迭代器，其中每个元素返回与其计数对应的次数。

如果您真的不需要列表但可以在代码中使用多重集，那么您需要`Counter(list1) | Counter(list2)`的联合[多重集。](http://docs.python.org/2/library/collections.html#collections.Counter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:28:24.460

```
from collections import Counter

counts = Counter(L1)
for value, count in Counter(L2).items()
    counts[value] = max(counts[value], count)
newlist = [value for value, count in counts.items() for _ in range(count)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:06:01.483

您可能只使用计数作为值的字典。联合逻辑是：

```
counts = {i: max(L1.get(i,0), L2.get(i,0)) for i in set(L1)|set(L2) } 
```

最终名单是

```
newlist = [value for value, count in counts.items() for _ in range(count)] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-16T03:23:57.763

仅使用列表及其最大/最小属性的解决方案可能是

```
union = [] 
[union.extend([n] * max(l1.count(n), l2.count(n))) for n in range (min(min(l1),min(l2)), max(max(l1),max(l2))+1)] 
```

# c - scanf(...) != EOF 的有用上下文

> ID：14888169
> 
> 赞同：1
> 
> 时间：2013-02-15T04:20:58.267
> 
> 标签：c, scanf

Soo... 我看到一个人声称这段代码正在处理另一个问题。

```
while(scanf("%X", &hex) != EOF) {
    //perform a task with the hex value. 
} 
```

那么，在什么情况下会抛出 EOF 标志？我虽然它只会无限期地要求一个数字。我添加了另一行代码来测试它，它也完全符合我的预期......

这不是文件，这似乎是标准输入。所以....这段代码什么时候有用？
*即，在什么情况下抛出 EOF 返回？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:24:53.490

如果您查看 的文档`scanf`，您将看到`EOF`如果在分配第一个值之前发生读取失败，则会返回该值。（*即*文件结尾）

[http://en.cppreference.com/w/cpp/io/c/fscanf](http://en.cppreference.com/w/cpp/io/c/fscanf)

你同样可以测试：

```
while(scanf("%X", &hex) == 1) 
```

这是我的偏好。我希望有一个输入，所以我会很明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T04:20:27.943

`EOF` 在 I/O 错误和文件结束时返回。使用`stdin`时，I/O 错误是罕见的事件，使用键盘输入时，文件结束指示通常采用特殊的键序列。

实际使用发生在重定向输入上。

假设存在一个读取十六进制文本并打印出十进制文本的程序：

```
// hex2dec.c
#include <stdio.h>    
int main(void) {
  unsigned hex;
  int cnt;
  while((cnt = scanf("%X", &hex)) == 1) {
    printf("%u\n", hex);
  }
  // At this point, `cnt` should be 0 or EOF
  if (cnt != EOF) {
    puts("Invalid hexadecimal sequence found.");
    return 1;
  }
  return 0;
}

// hex.txt contents:
abc
123 
```

使用命令进行转换

```
hex2dec < hex.txt
2748
291 
```

通过检测`EOF`，`stdin`程序知道何时返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:37:00.327

实际上，此输入在 linux 上很好，因为 ^d 将结束流，从而引发“错误”。

在 Windows 上，这种行为是不同的……不管它是不是 ctrl+d。至少我现在知道了，因为我两者都用。

谢谢！

# android - 如何通过互联网定期更新 SQLlite 数据库？

> ID：14888171
> 
> 赞同：1
> 
> 时间：2013-02-15T04:21:05.420
> 
> 标签：android, sqlite

我正在制作一个需要定期更新字符串 SQLlite 数据库的 android 应用程序。是否可以通过互联网进行更新，如果可以，如何？

我的应用程序中有一些列表由 SQLlite 数据库填充。列表的内容每天都需要改变。这就是为什么我需要每天更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:28:27.840

是的，您可以从 Internet 更新您的 Sql 数据库。请参阅[服务指南](http://developer.android.com/guide/components/services.html)。您可以触发`Intent Service`在单独的线程上执行工作的哪个，您可以在那里建立连接（例如`HTTP GET`请求），然后将解析的数据放入适当的数据库中。如果您`Loaders`用于填充列表，则当您在数据库中存储新数据时，列表将更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:40:42.827

您可以采取以下方法：

> > 在共享首选项或 sqlite 中维护一个日期变量，并在应用程序启动时检查如果今天的日期大于存储的日期，那么您可以调用基于 rest/soap 的 Web 服务并从服务器获取更新的记录并更新您的 sqlite 表。打开您的列表将填充最新数据...使用 cursorAdapter

```
 OR 
```

> > 您可以在您的服务器上实现 GCM（谷歌云消息传递）服务，每天将更新的数据从服务器推送到客户端。

```
 OR 
```

> > 每次启动应用程序时，您都可以访问 Web 服务并更新您的 sqlite 数据库。

我希望解决方案能解决您的问题

# boolean - 如何确定 *exactly* 一个布尔值是否为真，无需类型转换？

> ID：14888174
> 
> 赞同：33
> 
> 时间：2013-02-15T04:21:38.113
> 
> 标签：boolean, logic

给定一个任意的布尔值列表，确定其中一个为真的最优雅的方法是*什么？*

最明显的技巧是类型转换：将它们转换为`0`for`false`和`1`for `true`，然后将它们相加，然后返回`sum == 1`.

我想知道是否有一种方法可以在*不*将它们转换为整数的情况下执行此操作，**实际上是使用 boolean logic**。

*（这似乎应该是微不足道的，idk，漫长的一周）*

**编辑：**如果不是很明显，这更像是一个代码高尔夫/理论问题。我对在 PROD 代码中使用类型转换/int 加法并不大惊小怪，我只是感兴趣是否有办法做到这一点。

**Edit2：**对不起，这是一个漫长的一周，我没有很好地解释自己。让我试试这个：

在布尔逻辑中，如果所有布尔值都为真，则对一组布尔值进行与运算为真，如果其中至少一个为真，则对集合进行或运算为真。如果恰好一个布尔值为真，是否有一个逻辑结构为真？例如，XOR 是用于两个布尔值的集合，但除此之外，它就会失败。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-10-21T20:19:11.413

您实际上可以仅使用布尔逻辑来完成此操作，尽管在您的示例中可能没有实际价值。布尔版本比简单地计算真值的数量要复杂得多。

无论如何，为了满足求知欲，就这样吧。首先，使用一系列 XOR 的想法很好，但它只让我们成功了一半。对于任意两个变量*x*和*y*，

*x* ⊻ *y*

只要其中一个为真，则为真。*但是，如果您添加第三个变量z* ，这将不再适用，

*x* ⊻ *y* ⊻ *z*

*如果x*和*y*中的一个为真，则第一部分*x* ⊻ *y*仍然为真。如果*x*或*y*为真，则*z*需要为假才能使整个表达式为真，这就是我们想要的。但是考虑一下如果*x*和*y*都为真会发生什么。那么*x* ⊻ *y为假，但如果**z*也为真，则整个表达式也可以为真。因此，一个变量或三个变量都必须为真。通常，如果您有一个 XOR 链的语句，那么如果**奇数**个变量为真，那么它就会为真。

 *****由于一个是奇数，这可能证明是有用的。当然，检查奇数个真相是不够的。我们还需要确保不超过一个变量为真。这可以通过取所有成对的两个变量并检查它们是否都为真来以成对的方式完成。将这两个条件结合起来确保变量为真时恰好是一个条件。

下面是一个小的 Python 脚本来说明该方法。

```
from itertools import product

print("x|y|z|only_one_is_true")
print("======================")
for x, y, z in product([True, False], repeat=3):
    uneven_number_is_true = x ^ y ^ z
    max_one_is_true = (not (x and y)) and (not (x and z)) and (not (y and z))
    only_one_is_true = uneven_number_is_true and max_one_is_true
    print(int(x), int(y), int(z), only_one_is_true) 
```

这是输出。

```
x|y|z|only_one_is_true
=======================
1 1 1 错误
1 1 0 错误
1 0 1 错误
1 0 0 真
0 1 1 错误
0 1 0 真
0 0 1 真
0 0 0 错误

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T04:49:14.720

在您澄清之后，这里没有整数。

```
 bool IsExactlyOneBooleanTrue( bool *boolAry, int size )
    {
      bool areAnyTrue = false;
      bool areTwoTrue = false;
      for(int i = 0; (!areTwoTrue) && (i < size); i++) {
        areTwoTrue = (areAnyTrue && boolAry[i]);
        areAnyTrue |= boolAry[i];
      }
      return ((areAnyTrue) && (!areTwoTrue));
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T04:35:48.637

当然，你可以做这样的事情（伪代码，因为你没有提到语言）：

```
found = false;
alreadyFound = false;
for (boolean in booleans):
    if (boolean):
        found = true;
        if (alreadyFound):
            found = false;
            break;
        else:
            alreadyFound = true;
return found; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-15T13:31:44.537

使用简单的布尔逻辑，可能无法实现您想要的。因为您要求的是不仅基于真值而且基于附加信息（在这种情况下为计数）的真值评估。但是布尔求值是二元逻辑，它不能依赖于其他任何东西，只能依赖于操作数本身。并且没有办法通过逆向工程来找到给定真值的操作数，因为可能有四种可能的操作数组合，但只有两种结果。给定一个假的，你能判断是因为你的情况是F ^ F还是T ^ T，以便可以根据它来确定下一个评估？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-05T17:01:31.043

没有人提到我们正在寻找的这个“操作”是类似于大多数语言中的布尔 AND 和 OR 的快捷方式。这是Java中的一个实现：

```
public static boolean exactlyOneOf(boolean... inputs) {
    boolean foundAtLeastOne = false;
    for (boolean bool : inputs) {
        if (bool) {
            if (foundAtLeastOne) {
                // found a second one that's also true, shortcut like && and ||
                return false;
            }
            foundAtLeastOne = true;
        }
    }
    // we're happy if we found one, but if none found that's less than one
    return foundAtLeastOne;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-15T04:49:42.687

booleanList.Where(y => y).Count() == 1;

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-15T06:56:18.927

它可以通过递归很好地完成，例如在 Haskell 中

```
-- there isn't exactly one true element in the empty list
oneTrue [] = False 
-- if the list starts with False, discard it
oneTrue (False : xs) = oneTrue xs
-- if the list starts with True, all other elements must be False
oneTrue (True : xs) = not (or xs) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-12-14T19:32:22.470

由于现在有大量读取，这里有一个快速清理和附加信息。

### 选项1：

询问是否只有第一个变量为真，或者只有第二个，...，或者只有第 n 个变量。

```
x1 & !x2 & ... & !xn |
!x1 & x2 & ... & !xn |
...
!x1 & !x2 & ... & xn 
```

*这种方法在O(n^2)*中扩展，在找到第一个正匹配后停止评估。因此，如果可能存在正匹配，则首选。

### 选项 2：

询问总共是否*至少有*一个变量为真。另外检查每一对*最多*包含一个真实变量（安德斯约翰森的答案）

```
(x1 | x2 | ... | xn) &
(!x1 | !x2) &
...
(!x1 | !xn) &
(!x2 | !x3) &
...
(!x2 | !xn) &
... 
```

由于可能对的数量，此选项也可以按*O(n^2)进行缩放。*延迟评估在第一个反例之后停止公式。因此，如果可能存在负匹配，则它是优选的。

### （选项 3）：

此选项涉及减法，因此对于受限设置*不是*有效答案。然而，它认为循环值可能不是不受限制的设置中最有益的解决方案。

将 x1 ... xn 视为二进制数 x。减一，然后与结果。输出为零 <=> x1 ... xn 最多包含一个真值。（旧的“检查二的幂”算法）

```
x    00010000
x-1  00001111
AND  00000000 
```

如果这些位已经存储在这样的位板上，这可能比循环更有利。不过，请记住，这会降低可读性并受到可用板长度的限制。

提高认识的最后一点：到目前为止，存在一个称为计算机科学的堆栈交换，它正是针对此类算法问题而设计的

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-04T10:40:19.787

一种方法是成对执行`AND`，然后检查是否有任何成对比较返回 true 与 chained `OR`。在python中，我将使用它来实现它

```
from itertools import combinations

def one_true(bools):
    pairwise_comp = [comb[0] and comb[1] for comb in combinations(bools, 2)]
    return not any(pairwise_comp) 
```

这种方法很容易推广到任意长度的列表，尽管对于非常长的列表，可能对的数量增长非常快。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-05T00:10:30.797

Python：

```
boolean_list.count(True) == 1 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-16T03:56:27.467

好的，再试一次。调用不同的布尔值`b[i]`，并调用它们的一部分（数组的范围）`b[i .. j]`。定义函数`none(b[i .. j])`和`just_one(b[i .. j])`（如果需要，可以替换递归定义以获得显式公式）。我们有，使用 C 符号进行逻辑运算（`&&`is and, `||`is or, `^`for xor (not really in C), `!`is not）：

```
none(b[i .. i + 1]) ~~> !b[i] && !b[i + 1]
just_one(b[i .. i + 1]) ~~> b[i] ^ b[i + 1] 
```

然后递归：

```
none(b[i .. j + 1]) ~~> none(b[i .. j]) && !b[j + 1]
just_one(b[i .. j + 1] ~~> (just_one(b[i .. j]) && !b[j + 1]) ^ (none(b[i .. j]) && b[j + 1]) 
```

并且您对`just_one(b[1 .. n])`.

表情会变得很可怕。

玩得开心！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-18T10:46:43.020

该python脚本很好地完成了这项工作。这是它使用的单线：

((x ∨ (y ∨ z)) ∧ (¬(x ∧ y) ∧ (¬(z ∧ x) ∧ ¬(y ∧ z))))

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-16T11:33:03.633

// Javascript 在数组上使用 .filter() 并检查新数组的长度。

```
// Example using array
isExactly1BooleanTrue(boolean:boolean[]) {
  return booleans.filter(value => value === true).length === 1;
}

// Example using ...booleans
isExactly1BooleanTrue(...booleans) {
  return booleans.filter(value => value === true).length === 1;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-14T08:56:05.517

Python：让我们看看使用示例...步骤：

1.  下面的函数`exactly_one_topping`需要三个参数

2.  将它们的值存储在列表中`True`，`False`

3.  通过检查计数是否精确为 1 来检查是否仅存在一个真值。

```
def exactly_one_topping(ketchup, mustard, onion):

  args = [ketchup,mustard,onion]
  if args.count(True) == 1:   # check if Exactly one value is True
      return True
  else:
      return False 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-04T18:28:03.153

[Retracted for Privacy](https://stackoverflow.com/a/53785863/4330657)和[Anders Johannsen](https://stackoverflow.com/a/33268481/4330657)提供了已经正确且简单的答案。但是这两种解决方案都不能很好地扩展（**O(n^2)**）。如果性能很重要，您可以坚持以下解决方案，该解决方案在**O(n)**中执行：

```
def exact_one_of(array_of_bool):
    exact_one = more_than_one = False
    for array_elem in array_of_bool:
        more_than_one = (exact_one and array_elem) or more_than_one
        exact_one = (exact_one ^ array_elem) and (not more_than_one)
    return exact_one 
```

*（为了简单起见，我使用了 python 和 for 循环。当然，这个循环可以展开为一系列 NOT、AND、OR 和 XOR 操作）*

它通过跟踪每个布尔变量/列表条目的两个状态来工作：

1.  从列表的开头到此条目是否恰好有一个“True”？
2.  从列表的开头到该条目是否有多个“True”？

列表条目的状态可以简单地从先前的状态和相应的列表条目/布尔变量中导出。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-02-15T05:04:46.840

*如果不计算*，你要如何*计算*有多少是真的？当然，你可以做一些乱七八糟的事情（C 语法，我的 Python 很糟糕）：

 *```
for(i = 0; i < last && !booleans[i]; i++)
     ;
if(i == last)
     return 0;  /* No true one found */
/* We have a true one, check there isn't another */
for(i++; i < last && !booleans[i]; i++)
     ;
if(i == last)
     return 1; /* No more true ones */
else
     return 0; /* Found another true */ 
```

我相信你会同意胜利（如果有的话）是轻微的，而且可读性很差。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2017-06-16T20:21:19.833

没有循环是不可能的。在 java 实现中检查 BitSet cardinality()。 [http://fuseyism.com/classpath/doc/java/util/BitSet-source.html](http://fuseyism.com/classpath/doc/java/util/BitSet-source.html)

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2016-12-14T09:21:39.457

我们可以这样做：-

```
if (A=true or B=true)and(not(A=true and B=true)) then
<enter statements>
end if 
```******

# macos - 将 NSArrayController 绑定到 NSPopupButton 和 NSTextField

> ID：14888175
> 
> 赞同：19
> 
> 时间：2013-02-15T04:21:38.593
> 
> 标签：macos, cocoa, cocoa-bindings, nsarraycontroller

我想要完成的似乎应该相当简单。我在[这里](https://github.com/ericgorr/arraycontrollerbindings)放置了一个示例项目。

我有一个 NSArrayController 填充了一个 NSDictionaries 数组。

```
[[self controller] addObject:@{ @"name" : @"itemA", @"part" : @"partA" }];
[[self controller] addObject:@{ @"name" : @"itemB", @"part" : @"partB" }];
[[self controller] addObject:@{ @"name" : @"itemC", @"part" : @"partC" }]; 
```

我正在使用基于“名称”键的此数组中的项目填充 NSPopupButton。这可以通过以下绑定轻松完成

![绑定](../Images/d5f22157217c7dd3392e6e6fd9bc6c0d.png)

然后，我想根据 NSPopupButton 的当前选择使用“部分”键中的文本填充 NSTextField。我已经设置了以下绑定：

![文本字段绑定](../Images/ba68995d054dcd4b749a2c3cfee0ae0a.png)

单独使用这些绑定，文本字段会显示“partC”。

![初始显示](../Images/2883c3b9ccfb63a843fd45365732600c.png)

但是，如果我更改 NSPopupMenu 的值，文本字段显示的内容不会改变。

我认为这只是在 NSPopupButton 上设置“选定对象”绑定的问题

![选定对象](../Images/281cca82b763b538fa0d6eb8187ddf63.png)

但这行不通。出于某种奇怪的原因，我最终在菜单中使用了代理对象（提供了奖励的原因）。

![窗口2](../Images/df0c311bfc4ed788bb6803999355c8e7.png)

那么，我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-18T12:41:25.843

在这种情况下不要使用“选定对象”。将弹出窗口的“选定索引”绑定到 NSArrayController 的`selectionIndex`控制器键。在您的示例项目上进行了尝试，并且可以正常工作。

编辑：

您问为什么使用`selectionIndex`over是合适的`selectedObject`。首先是一些背景：

绑定弹出菜单时，您可以绑定三个虚拟“集合”：**Content**是抽象的“菜单中应包含的内容列表”——您必须始终指定**Content**。如果您既不指定**Content Objects**也不指定**Content Values**，则绑定到**Content**的值的集合将用作“对象”，其`-description`方法返回的字符串将用作“值”。换句话说，**内容值**是弹出窗口中显示的字符串，**内容对象**是它们对应的东西（可能不是字符串，也可能没有`-description`适合在弹出窗口中生成文本的方法）。这里需要意识到的重要一点是，这里可能存在三个不同的“虚拟数组”：**内容**数组、**内容对象**数组（可能不同）和**内容值**数组（也可能不同）。它们都将具有相同数量的值，并且通常，**内容对象**和**内容值**将是**内容**数组中相应项目的函数（在数学意义上）。

下一件重要的事情是，`NSArrayController`生活中的一部分目的是跟踪用户的选择。在弹出窗口的情况下，这只是轻微（如果有的话）有趣，但在`NSTableView`. 在内部，`NSArrayController`通过保持包含在任何给定时间选择的**Content**数组`NSIndexSet`中的索引来跟踪这一点。从那里，为方便起见，选择状态以几种不同的方式显示：

 ***   `selectionIndexes`如上所述 -包含**Content**数组`NSIndexSet`中所选项目的索引
***   `selectionIndex`对于不支持多选的应用程序来说是一个方便的选项。可以认为它等价于`arrayController.selectionIndexes.firstIndex`。*   `selectedObject`在单选情况下也很有用，并且在概念上对应于`ContentObjectsArray[arrayController.selectionIndexes.firstIndex]`*   `selection`返回一个特殊对象（对消费者不透明），代理读取和写回数组控制器的**内容数组**中的底层对象（或多选情况下的对象） 。它的存在是为了在多个选择情况下一次编辑多个对象，并为其他特殊情况提供支持。（你应该认为这个属性是只读的；因为它的类型对消费者来说是不透明的，所以你永远无法创建一个合适的新值来写入它。像这样的调用是有意义的`-[arrayController.selection setValue: myObject forKey: @"modelKey"]`，但是像这样的调用是*没有*意义的`-[arrayController setValue: myObject forKey: @"selection"]`**

 **有了对属性的理解`selection`，让我们退后一步，看看为什么在这种情况下使用它不是正确的。 **尝试变得聪明：您已经通过Content**和**Content Values**绑定`NSPopUpButton`为其提供了应该在菜单中的内容列表。然后你还告诉它你想将它的**Selected Object**绑定到'属性。您可能认为这是一个“只写”绑定——即“亲爱的弹出窗口，请接受用户的选择并将其推送到 arrayController”，但绑定实际上是双向的。**因此，当绑定刷新时，弹出窗口首先使用内容/内容值**中的所有项目填充菜单******`NSArrayController``selection`**绑定，然后它说，“哦，你说 at 的值`arrayController.selection`是我的**Selected Object**。这很奇怪 - 它不在与我的**Content/Content Values**绑定绑定的事物列表中。我最好将它添加到列表中你！我会通过调用`-description`它来做到这一点，然后将那个字符串插入菜单中。但是您从**Selected Object**绑定中获得的对象是上述不透明的选择对象（您可以从结果中看到它属于 class `_NSControllerObjectProxy`，这是一个私有到 AppKit 的类，如前导下划线所示）。********

 ****总之，*这就是*为什么将弹出窗口的**Selected Object**绑定绑定到数组控制器的`selection`控制器键是错误的做法。遗憾的是，但我相信您已经发现，Cocoa 绑定的文档才刚刚开始，所以不要难过。几年来，我几乎每天都在使用 Cocoa 绑定，在一个大型项目中，我仍然觉得有很多用例我还没有完全理解。********

# drupal - 在 Drupal 中，在“sites/default/”下插入“files/”目录会破坏主题/css

> ID：14888176
> 
> 赞同：1
> 
> 时间：2013-02-15T04:21:38.350
> 
> 标签：drupal, drupal-6, drupal-theming, drupal-5

我有一个从 Drupal 5 升级到 Drupal 6 的 Drupal 站点。用户的个人资料图片不再显示，因为它们包含在站点/默认/文件下，并且现在站点/默认下没有“文件”文件夹。

我想确保图像缓存模块仍然有效，但它没有——当我尝试上传图片时，Durpal 告诉我它“无法移动文件”。所以我在“sites/default/”下创建了一个“files”目录来修复它。然而，这不仅不起作用，还导致主题的 CSS 无法呈现，使我的网站变成一团糟的普通旧 html。

在试验之后，我发现当我将一个名为“files”的文件夹放在任何其他目录（包括“sites/all/”）下时没有任何不好的事情发生，而当你在“sites/default”下放置一个不同命名的文件夹时也没有什么不好的事情发生，但如果我在“sites/default/”下放置一个名为“files”的文件夹，则会导致 CSS 无法呈现。

所以我的问题是，是什么原因造成的，我该如何解决？我怎样才能拥有目录“sites/default/files/”而不导致我的主题不显示？

# macos - 光标在突出显示的文本中丢失 - Vim

> ID：14888177
> 
> 赞同：5
> 
> 时间：2013-02-15T04:21:39.273
> 
> 标签：macos, vim, vi

当文本在 vim 中突出显示时，例如在编写 HTML 文档时使用“em”标签，我发现在某些配色方案中光标变得不可见，从而难以正确放置结束标签。有没有办法让光标在突出显示的文本上改变颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:23:44.083

[更改gvim中光标的颜色](https://stackoverflow.com/questions/6158860/change-color-of-cursor-in-vim)

看看这两个答案，先生，我想你会在那里得到你的答案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:12:14.353

您必须挂钩`CursorMoved,CursorMovedI`事件，然后使用 确定光标下的高亮组`synIDattr(synIDtrans(synID(line("."), col("."), 1)), "name")`。如果它是那些难以看到的组之一，您可以发出`:highlight Cursor ...`命令来更改它（或者将其更改回来）。

但这相当复杂。为什么不简单地修改配色方案并选择在所有情况下都易于识别的颜色？！（该`:hi`命令列出所有颜色并帮助您选择一种。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:25:35.997

这个问题让我陷入了一个相当大的困境，并让我比预期了解了更多关于语法突出显示的工作原理。

我了解到我的，据说是斜体的文本首先被突出显示的原因是因为 Mac 终端不支持斜体（“[在 mac 终端的 vim 语法突出显示中启用斜体](https://stackoverflow.com/questions/1326998/enabling-italics-in-vim-syntax-highlighting-for-mac-terminal)”）

我意识到，多亏了“[颜色无处不在！Linux 控制台的 256 色模式](http://www.robmeerman.co.uk/unix/256colours)”，由于我在终端首选项中选择的颜色配置文件，我的“明亮”和“正常”颜色没有区别，因此我的颜色配置文件看起来不像屏幕截图。

最后，我通过更改终端首选项中的光标颜色解决了我的光标丢失问题。

# javascript - 将 Web api 控制器连接到 html 页面以显示图像

> ID：14888182
> 
> 赞同：-1
> 
> 时间：2013-02-15T04:22:16.100
> 
> 标签：javascript, html, visual-studio-2012, asp.net-web-api

我是 Web 开发世界的新手以及在 Web api 和 html 页面之间创建交互的步骤

我找到[了这个教程](http://goo.gl/5tmCd)，但我真的不知道如何连接到我的控制器

我有一个接受一堆参数（字符串、整数、布尔值等）的函数，它返回一个图像（类型`Bitmap`）。该函数应从 HTML 页面获取这些参数

所以我需要在 javascript 函数中做类似的事情：

```
function()
{
      img = mywebapifunction(x,y,z,...);
} 
```

如何将控制器连接到我的页面以及如何编写此功能？

编辑 ：

我正在使用以下脚本（如果我理解正确）：

```
<script src="../../Scripts/jquery-1.7.1.min.js" 
        type="text/javascript"></script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:14:01.360

所以这比我想象的还要容易！！！

代码应如下所示：

```
function()
{
      $("#img").attr("src", myapicallstring);
} 
```

在哪里

myapicallstring 调用 api 函数

# java - 寻找 curl 库的 Java 包装器

> ID：14888184
> 
> 赞同：2
> 
> 时间：2013-02-15T04:22:38.343
> 
> 标签：java, curl, openssl, bouncycastle, fips

我正在寻找 curl 的 Java 包装器。我了解 Java 具有用于 http 和 https 连接的出色 api（即标准以及 Apache http 客户端）。我有一个场景，我的 https 连接需要通过 FIPS 认证的加密引擎。由于 Openssl 是通过 FIPS 验证并且 curl 使用它作为后端的，我想知道是否有一个易于使用的 curl lib 包装器。

android 附带的 Bouncycastle 加密货币未经过 fips 认证。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T07:12:01.673

有[curl-java](http://svwe10.itex.at/curl/curl-java/)，这应该是你需要的，加上[这篇博文中的一些说明以及对](http://chimpler.blogspot.fi/2009/03/logging-to-ebay-with-java-curl.html)[java-curl-jar 项目](http://code.google.com/p/java-curl-jar/)中代码的一些改进。

# java - 类不使用重写的等于

> ID：14888192
> 
> 赞同：1
> 
> 时间：2013-02-15T04:23:32.190
> 
> 标签：java, overriding, equals

为什么它没有到达“这里”的打印行？换句话说，为什么它不使用我覆盖的等于？提前致谢

```
import java.util.*;
class NumberClass extends Object{
    private int number;

    public NumberClass(int n){
        number=n;

    }
    @Override
    public boolean equals(Object other){
        System.out.println("here");
        return false;
    }
    @Override
    public String toString(){

        return number+"";
    }   
}
public class HelloWorld {
    public static void main(String[] args) {

        Set <NumberClass> set= new HashSet<NumberClass>();
        set.add(new NumberClass(0));
        set.add(new NumberClass(0));
        System.out.println(set);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:26:07.710

这是因为`HashSet`使用哈希码来测试对象是否已经在集合中，并且仅`equals`在发生冲突时使用。对象的默认哈希码是内部 id，因此两个对象相等并不意味着它们具有相同的哈希码。在这种情况下，显然没有碰撞，所以不需要`HashSet`调用`equals`。

这就是为什么在覆盖`hashCode`时应该始终覆盖的原因`equals`。有关此主题的更多信息，请参阅[本文](http://www.artima.com/lejava/articles/equality.html)。您应该编写一个`hashCode`方法，为`equals`. 例如：

```
public int hashCode() {
    return number;
} 
```

的一般要求`hashCode`是满足的对象`equals()`应该返回相同的哈希码。请注意，没有要求未通过`equals()`测试的对象具有不同的哈希码。如果您返回一个常数（如 Jayamohan 建议的那样），则满足`hashCode`合同；但是，这将完全消除使用 a 的好处，`HashSet`您还不如使用简单的`ArrayList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:29:44.980

在比较对象时，

*   `equals`*如果hashCode*不同，则**不会**调用方法
**   `hashCode`如果 (obj1 == obj2)将**不会**调用方法*

 *因此，在您的情况下，由于您尚未覆盖 hashCode 方法，因此哈希码不同，因此不会调用 equals 。尝试如下覆盖 hashCode 方法，您的 equals 方法将被调用。

```
@Override
public int hashCode() {
    return 1;
} 
```

[Java 中的Object.equals](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals%28java.lang.Object%29) API 状态如下

> 请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即相等的对象必须具有相等的哈希码。

因此，请记住在`hashCode`覆盖 equals 方法时进行覆盖。*

# javascript - Mootools 每 5 秒暂停一次 Array.each 循环

> ID：14888196
> 
> 赞同：1
> 
> 时间：2013-02-15T04:23:57.883
> 
> 标签：javascript, arrays, mootools

我有一个 Array.each 函数，每次循环运行 25 次时，我需要暂停 5 秒。

```
Array.each(response.data, function(thing, index){
    sendEmail(thing.id,sku,thing.email);
}); 
```

我尝试了各种方法，但它总是毫无延迟地调用 sendEMail 函数。有谁知道如何做到这一点？

循环可能会运行 15 到 500 次，具体取决于发送给它的数据。

谢谢。

Mootools 1.4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:11:14.383

`Array.each`除非允许您从传入的回调中提前退出并允许您从任意索引恢复，否则您将无法在循环的中途停止循环迭代。您仍然需要将逻辑包裹在它周围来处理暂停。

另一种方法是自己动手。

```
var eachWithPause = function( iterable, iterations, timeout, fn, ctx ) {
  // Sets up a callback to be passed back to the caller, allowing them
  // to cancel the `setTimeout` call created within `loop`.
  var timeoutID = 0;
  var cancel = function() {
    clearTimeout( timeoutID );
  };

  // `loop` will run the desired number of iterations, or iterate through
  // the remainder of the `iterable`, whichever comes first. If there are
  // still elements left after it is done, it will `setTimeout` for the
  // desired amount of time.
  var index = 0, l = iterable.length;
  var loop = function() {
    for ( var i = 0; i < iterations && index < l; ++i, ++index ) {
      fn.call( ctx, iterable[ index ], index, iterable );
    }

    if ( index < l ) {
      timeoutID = setTimeout( loop, timeout );
    } else {
      timeoutID = 0;
    }
  };

  loop();
  return cancel;
}; 
```

我在这里做的唯一有趣的事情是返回一个`cancel`函数，该函数将为调用者提供一种调用它无法访问`clearTimeout`的不断变化的方法。`setTimeout`

然后你会有类似的东西

```
var cancel = eachWithPause(response.data, 5, 5000, function(thing, index) {
  sendEmail(thing.id, sku, thing.email);
}); 
```

如果您需要取消此操作，您可以简单地取消`cancel()`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:01:00.640

我会选择更通用的分块方法。

```
Array.implement({
    chunkEach: function(offset, count, delay, fn, bind){
        // get a chunk
        var newOffset = offset + count,
            chunk = this.slice(offset, newOffset),
            ii = 0,
            len = chunk.length;

        if (!len)
            return this;

        // loop the chunk supporting natural index.
        for (; ii< len; ++ii)
            fn.call(bind, chunk[ii], offset + ii);

        // move pointer and self call
        if (newOffset < this.length)
            this.chunkEach.delay(delay, this, [newOffset, count, delay, fn, bind]);

        // pointless chaining return as its async. 
        return this;
    }
}); 
```

使用，例如，以 15 个块为单位循环电子邮件地址数组，并暂停 2 秒，将功能范围保持在具有选项属性的虚构对象中：

```
list.chunkEach(0, 15, 2000, function(el, index){
    console.log(this.options);
    new Element('div[html='+index + '. ' + el +']').inject(o);
}, this); 
```

见[http://jsfiddle.net/dimitar/aYwab/](http://jsfiddle.net/dimitar/aYwab/)

它的粗糙 - 缺乏对参数和东西的检查，但它会做你想做的事。

在这里解决延迟的责任可能存在疑问。您正在发送电子邮件，大概是通过 ajax。模棱两可的延迟是不可扩展的。

您应该考虑使`sendEmail`函数可链接 - 只需将数组和索引传递给它，如果索引小于数组长度 - 1，`sendEmail`则从`onSuccess`下一个索引再次调用。如果上次发送失败，这也允许您中断或重试。

此外，您可以使用 Promises。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T16:40:37.150

I would split your ploblem in two different subproblem, you want a way to group an Array by X items:

```
Array.implement('paginate', function(count){
   var result = [], pageIndex = -1

   for(var i=0, max = this.length; i<max; i++){
       if (i%count==0){ 
           pageIndex++
           result.push([])
       }

       result[pageIndex].push(this[i])             
   } 
   return result;
}); 
```

then you want to process each 'page' of the Array and wait Y seconds before doing anything with the rest of the data.

```
function process(data, index, delay){
   workondata(data[index]);
   if( data.length-index >1 ) setTimeout(
        function(){
           process(data, index +1, delay)
        },
        delay
   );
} 
```

So I believe something like this: [http://jsfiddle.net/kentaromiura/SmyU8/](http://jsfiddle.net/kentaromiura/SmyU8/) would do the job.

# vim - VIM中的键映射混乱，如何让vim以一种聪明的方式工作？

> ID：14888197
> 
> 赞同：0
> 
> 时间：2013-02-15T04:24:07.893
> 
> 标签：vim, mapping, key, confirmation

我想在vim中绑定`Ctrl`-with命令也就是说我想用`w`-来关闭vim的当前窗口，`:q``Ctrl``w`

所以我把这个添加到我的`~/.vimrc`：

```
nmap <C-W> :q<cr> 
```

当我使用它关闭未保存的窗口时，此命令无法工作。

所以我想让它以一种聪明的方式工作：保存内容后，只需关闭窗口即可。当内容仍未保存时，问我是否像这个命令一样直接关闭窗口

```
:0,$s/a/b/gc 
```

我不知道这对你来说是否足够清楚，但在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:14:10.370

有这个`:confirm`命令。把它放在前面`:quit`：

```
:nmap <C-W> :confirm q<cr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:44:33.997

最简单的做法是`set confirm`在您的`vimrc`- 这将在关闭之前提示您而不保存（以及其他一些事情；请参阅`:help confirm`）。

否则，您可以编写一个使用[`&modified`](https://stackoverflow.com/questions/13107453/vimscript-check-if-current-buffer-has-unsaved-changes)and的小 vim 脚本`confirm()`（请参阅参考资料`:help confirm()`）。

# javascript - 如何避免“字符串中的无效十六进制字符”异常

> ID：14888201
> 
> 赞同：0
> 
> 时间：2013-02-15T04:24:32.130
> 
> 标签：javascript, rhino

我正在使用 Javascript 和 Rhino（做一些 Java 代码）。我想执行以下代码。

```
service.push(deviceToken,payload); 
```

由于第一个字符串包含“x”，它给出了以下异常。

com.sun.phobos.script.util.ExtendedScriptException: org.mozilla.javascript.WrappedException: Wrapped java.lang.RuntimeException: 无效的十六进制字符：x

该字符串必须按原样存在。因此，不可能进行任何替换。

我正在使用 Java-apns，并使用此方法通过设备令牌和有效负载推送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T07:03:57.693

您的设备令牌应仅包含十六进制字符 0–9、A、B、C、D、E、F（或 a–f）

# java-bytecode-asm - ASM 字节码方法参数值

> ID：14888209
> 
> 赞同：1
> 
> 时间：2013-02-15T04:25:27.760
> 
> 标签：java-bytecode-asm

如何使用 ASM 字节码查看或访问方法参数值或对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:52:53.453

方法参数是前几个局部变量。要访问第一个参数，字节码助记符看起来像`aload_0`or`iload_0`或`lload_0`等，具体取决于参数的类型。对于第四个之后的论点，你会说`aload 4`等等。

请注意，实例方法的第一个参数是对`this`. 所以第一个参数将是本地#1，你会得到它，`aload_1`等等。

但是，您会使用 ASM 的东西生成字节码……这样做。看起来你会说类似的东西`mv.visitVarInsn(ALOAD, 0);`，`mv`你的 MethodVisitor 在哪里。将`0`替换为局部变量索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:39:28.703

考虑到方法参数类型，您可以执行以下操作：

```
int off = (access | Opcodes.ACC_STATIC) == 0 ? 0 : 1;
int opcode = Type.getArgumentTypes(desc)[param + off].getOpcode(Opcodes.IALOAD);
mv.visitVarIns(opcode, param);
... 
```

其中`param`是方法参数编号，`access`并且是您从[ClassVisitor.html#visitMethod](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassVisitor.html#visitMethod%28int,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)`desc`的相应参数中获得的值。

# python - 遍历嵌套列表

> ID：14888215
> 
> 赞同：0
> 
> 时间：2013-02-15T04:26:09.273
> 
> 标签：python, list, loops

我如何创建一个函数来以这种方式迭代我的列表。看起来很简单，但我卡住了......

```
 myList= [[1,2,3], [4,5,6], [7,8,9]]

    def name(myList):
        somework..

    newList = [[1,4,7]. [ 2,5,8], [3,6,9]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:27:21.740

```
In [3]: zip(*myList)
Out[3]: [(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

如果你特别想要列表

```
In [4]: [list(x) for x in zip(*myList)]
Out[4]: [[1, 4, 7], [2, 5, 8], [3, 6, 9]] 
```

有关`zip`功能的更多详细信息，请查看[此](http://docs.python.org/2/library/functions.html#zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:27:23.627

[`zip`](http://docs.python.org/2/library/functions.html#zip)是你想要的 + 参数解包。这很棒。我喜欢把它想象成python的内置转置。

```
newList = zip(*myList) 
```

这实际上会给你一个可迭代的 (python3.x) 或`list`(python2.x) `tuple`，但这对于大多数用途来说已经足够了。

# java - 什么是核心 Java 中的桥接模式示例？

> ID：14888218
> 
> 赞同：6
> 
> 时间：2013-02-15T04:26:15.563
> 
> 标签：java, design-patterns

我已经阅读[了 GoF 书中的 Bridge 模式](http://en.wikipedia.org/wiki/Design_Patterns)。现在尝试将模式映射到核心 Java 库，但很难找到 Bridge 模式的示例。什么是核心 Java 库中的桥模式示例，其中抽象与其实现之间有清晰的分离？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-13T21:44:32.967

(a) JDBC API（一组接口，如DataSource、PooledConnection、RowSet等）通常被认为是一个桥梁，它允许不同数据库（如Sybase、Oracle或其他ODBC数据库）的独立实现[http:// docstore.mik.ua/orelly/java-ent/servlet/ch09_02.htm](http://docstore.mik.ua/orelly/java-ent/servlet/ch09_02.htm)；

(b) SLF4J，正如它的名字所暗示的那样（Java 的 Simple Logging Facade），更像是一个门面而不是一个桥梁，因为你仍然可以在没有 SLF4J 的情况下使用 java.util.logging、logback、log4j（但事实并非如此对于网桥：不通过 JDBC 接口就不能直接访问 ODBC 数据库）；

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T05:02:30.387

这是一篇文章，上面写着`A Classic Example of Bridge is Drivers`- [http://www.informit.com/articles/article.aspx?p=29302](http://www.informit.com/articles/article.aspx?p=29302)。

对我来说，桥接的经典示例（尽管它不是核心 Java）是 JCL 和 SLF4J。

# php - PHP：过滤特定列的mysql_query结果？

> ID：14888222
> 
> 赞同：0
> 
> 时间：2013-02-15T04:26:31.583
> 
> 标签：php, mysql, filter

有没有一种快速的方法来过滤 mysql_query 结果以获取仅包含特定列的值的列表？

```
$query = mysql_query("SELECT * FROM users");
$list_of_user_names = get_values($query,"names"); 
```

要用来代替的函数的名称是`get_values`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:59:32.517

Assuming your field name in databse is "names"

```
$query = mysql_query("SELECT names FROM users");

while($row = mysql_fetch_assoc($query)){
    echo $row['names'];
    echo "<br>";
} 
```

**NOTE : mysql_* functions are deprecated in new version of php, use mysqli_* or PDO**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:54:18.700

尝试这个：

```
$query = mysql_query("SELECT names FROM users");

if (!$query) {
    echo "Could not successfully run query from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($query) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

// While a row of data exists, put that row in $row as an associative array
// Note: If you're expecting just one row, no need to use a loop
// Note: If you put extract($row); inside the following loop, you'll
//       then create $names

while ($row = mysql_fetch_assoc($query)) {
    echo $row["names"];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:29:26.830

使用以下功能。

```
 function get_values($q,$c)
  {
       $arr = array();
       while($row = mysql_fetch_array($q))
       {
            $arr[] = $row[$c];
       }
       return $arr; // return all names value.
  } 
```

# html - 在android webview中播放嵌入式base 64编码音频

> ID：14888224
> 
> 赞同：3
> 
> 时间：2013-02-15T04:26:46.913
> 
> 标签：html, webview, android-webview, html5-audio

我正在尝试从我的 webview 播放嵌入在 HTML 页面中的 base64 编码音频。它在 pc 浏览器中播放，但不在 android WebView 中播放。html页面如下所示。

```
 <!DOCTYPE html>
<html>
<head>
</head>
<body><h1>HTML test  </h1><p>testing  audio</p><`enter code here`audio controls="controls" autobuffer="autobuffer" autoplay="autoplay"><source src="data:audio/mpeg;base64,,SUQzAwAAAAABdlBSSVYAAAAOAABQZWFrVmFsdWUA/38AAFBSSVYAAAARAABBdmVyYWdlTGV2ZWwAICAgI  < Base64 encoded string of mp3 file >   CAgICAgICAgICAgICAg
ICAgICAgICAgICAgDA==" />
</audio></body></html> 
```

这就是我显示html页面的方式

```
 mWebView = (WebView)findViewById(R.id.webview);
 mWebView.loadUrl(HTML_FILE_URL_FOR_WEB_VIEW_TEST); 
```

但是音频没有在 android webview 中播放。是否可以在不使用 java 脚本的情况下做到这一点。欢迎任何帮助。

# c# - 在unty 3d中获取特定的孩子

> ID：14888229
> 
> 赞同：1
> 
> 时间：2013-02-15T04:27:18.813
> 
> 标签：c#, object, scripting, unity3d, parent-child

我知道父母的名字。

我必须轮换父母的特定孩子。

但我在 c# 中遇到错误。

如何将此代码更改为 c#？

```
aFinger = transform.Find("LeftShoulder/Arm");
aFinger.Rotate(Time.deltaTime*20, 0, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:51:24.283

您没有指定 aFinger 是如何定义的，我会假设它`var`会导致它是正确的。

尝试`aFinger.transform.Rotate(Time.deltaTime*20,0,0);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:33:34.897

你想要 C# 中的代码：

```
GameObject aFinger = transform.Find("LeftShoulder/Arm");
aFinger.Rotate(Time.deltaTime*20, 0,0); 
```

请告诉我们您已经尝试过什么以及得到了什么结果。从 Javascript 转换为 C# 通常并不难...

# jquery - 在 asp.net mvc 视图中使用 jquery 更新文本

> ID：14888235
> 
> 赞同：0
> 
> 时间：2013-02-15T04:27:31.280
> 
> 标签：jquery

我有这样的html

```
<div class="container">
   <input type="hidden" class="myID" value="123123123" />
   <div class="firstName"></div>
   <div class="lastName"></div>
   <div class="myImage"></div>
</div> 
```

它一遍又一遍地重复

我想用跟随特定隐藏字段的类“.firstName”更改 div 的值。我有这个值正确存储在`var`这样的

```
var myID = @Model.myID;  //this is from c# mvc, but nevermind that - its value is correct
$('input[value="'+ myID + '"]').next(".firstName").text("mynewvalue"); 
```

如何根据选择器中的变量的值选择隐藏输入？我知道隐藏字段甚至没有被选中，所以之后的代码 - .next() 并不重要，我只需要知道如何根据其值正确选择隐藏字段

我试过

```
$('input[value="myID"]').
$('input[value="'+ myID + '"]')
$('.myID[value="'+ myID + '"]')
$('[value="'+ myID + '"]') 
```

**更新**

哦，如果我尝试`$('input[value="123123123"]')` 手动输入一个值 - 它可以工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:45:04.703

您可以选择隐藏字段，并且可以通过匹配它们的属性和值来选择它们。

jQuery：

```
 $(":input[type='hidden'][value='123']"); 
```

这个[小提琴](http://jsfiddle.net/7Y43A/2/)应该让你排序，当然你必须让它适应你的代码。关于多个属性选择器的文档：http: [//api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)

# c++ - C++ 嵌套 For 循环

> ID：14888238
> 
> 赞同：0
> 
> 时间：2013-02-15T04:27:34.897
> 
> 标签：c++, for-loop, visual-c++, nested-loops

我认为这比最初计划的要容易。我正在尝试使此图像脱离嵌套的 for 循环：

![在此处输入图像描述](../Images/2d78bffd8cdf7cbc2249bff3bad99e34.png)

任何建议或解决方案都会有所帮助。

```
#include <iostream>

using namespace std;

int main()
{
    for(int i=0; i<1;i++)
    {
        cout<<i+1<<endl;

        for(int j=0;j<2;j++)
        {
            cout<<j+1;
        }
     }

    cout<<"\n";
    for(int k=0; k<3; k++)
    {
        cout<<k+1;
    }
    cout<<"\n";
    for(int l=0; l<4; l++)
    {
        cout<<l+1;
    }
    cout<<"\n";
    for(int m=4; m>0; m--)
    {
        cout<<m;
    }
    cout<<"\n";
    for(int n=3; n>0; n--)
    {
        cout<<n;
    }
    cout<<"\n";
    for(int o=2; o>0; o--)
    {
        cout<<o;
    }
    cout<<"\n";
    for(int p=0; p<1; p++)
    {
        cout<<p+1;
    }
    cin.get();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:59:52.867

这是为您提供的 C 解决方案 =)

```
#include <stdio.h>
#include <string.h>

int main(void) {
    char forward[5] = "1";
    char reverse[5] = "4321";

    int i;
    for( i = 1; i <= 4; i++ ) {
        printf( "%s\n", forward );
        forward[i] = forward[i-1]+1;
    }
    for( i = 0; i < 4; i++ ) printf( "% 4s\n", reverse+i );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T05:06:53.437

如果您想要一个非常紧凑且不太容易遵循的解决方案，我决定试一试。

```
int length = 4;

for(int i = 0; i < 2; i++) 
{
    for(int j = 0; j < length; j++) 
    {
        for(int k = 0; k < (i == 1 ? length - j : j + 1); k++) 
        {
            if(i == 1 && k == 0) 
                for(int x = 0; x < j; x++)
                    cout << " ";

            cout << (i == 1 ? (length - k) - j : k + 1);
        }

        cout << endl;
    }
} 
```

从到`length`的迭代次数在哪里。`1``length`

![输出](../Images/138b61947589fa8281a6e29ca20ba869.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T05:42:18.873

好的，因为 paddy 发布了他的 C 解决方案（有人说“紧凑”=P）......

```
#include <stdio.h>
int main()
{
    char line[] = "1234321";
    int i=0;
    for (; i<4; printf("%.*s\n",++i,line));
    for (i=0;i<4; printf("%4s\n",line+3+i++));
    return 0;
} 
```

**输出**

```
1
12
123
1234
4321
 321
  21
   1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T04:41:39.127

```
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
 /*first half: From level1 = 1 to less than 5, level2 = 1 to less than or equal to level1, print level2 */
 for(int level1 = 1; level1 < 5; level1++) { 
     for(int level2 = 1; level2 <= level1; level2++){
        cout << level2;
     }
     cout << '\n'; /*prints the newline AFTER each iteration of the `level2` loop*/
 }

 /*second half: reverse the logic of part1, but also add spaces in the beginning */
 for(int level1 = 4; level1 > 0; level1--){
     for(int interim = 4; interim > level1; interim--) cout << ' ';
     for(int level2 = level1; level2 > 0; level2--){
         cout << level2;
     }
     cout << '\n';
 }
 return 0;  
} 
```

如果您不理解此代码，请告诉我 :-)

# php - 发布内容后立即从mysql显示时间？

> ID：14888240
> 
> 赞同：0
> 
> 时间：2013-02-15T04:27:50.390
> 
> 标签：php, mysql

任何人都可以帮忙吗？我有这个脚本，它从可怕的标准日期转换 mysql 时间戳，并以用户友好的方式“大约 2 秒前或大约 1 小时前”。

我的问题是这个。它完美地工作，除了当用户发布内容时，他们发布的最新内容回显“大约 0 年前”没有给出发布时间，并且直到他们在此之后发布其他内容时才会看到时间他们在此之前发布过。

所以我想知道为什么这是因为我无法弄清楚，我希望它在用户发布后立即说“刚刚添加”，然后按照脚本说的内容继续执行 20 秒前、2 分钟前等添加.

一个例子是；

（内容 1）“大约 0 分钟前发布”（内容 2）“大约 8 分钟前发布”（内容 3）“大约 5 小时前发布”

那么内容 1 只会更新另一条内容发布的时间，否则它不会。

所以内容 1 应该说刚刚发布，然后在几秒钟后，发布大约 5 秒前、1 分钟前、5 小时前、7 天前等。

```
 <div class="board-wall-feeds">        
<div class="social_header">
<?php echo "$profile[2]" ?>'s News & Updates:
</div>        
<?php

$timeline_set = get_timeline();
while ($news = mysql_fetch_array($timeline_set)) { 
echo "

<div class=\"news_feeds_board_text\">{$news['content']}
<div class=\"social_footer\">about ".$t.$labels[$i]." ago<a href=\"../../../delete_news_post.php?to=".$news['id']."</div><div class=\"social_clip\"></div></div></a>";

  $datetime1 = new DateTime();
        $datetime2 = new DateTime ($news['date_added']);
        $interval = $datetime1->diff($datetime2);
        $mdhms = explode('-',$interval->format('%m-%d-%H-%i-%s'));

$labels = Array(' months', ' days', ' hours', ' minutes', ' seconds');
$i = 0;
foreach($mdhms as $t){
  if($t > 0) break;
  $i+=1;
}
        } ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:33:59.860

`relative time function`你可以在这里试试

```
function relativetime($ts)
{
    $diff = time() - $ts;
    if($diff == 0)
        return 'now';
    elseif($diff > 0)
    {
        $day_diff = floor($diff / 86400);
        if($day_diff == 0)
        {
            if($diff < 60) return 'just now';
            if($diff < 120) return '1 minute ago';
            if($diff < 3600) return floor($diff / 60) . ' minutes ago';
            if($diff < 7200) return '1 hour ago';
            if($diff < 86400) return floor($diff / 3600) . ' hours ago';
        }
        if($day_diff == 1) return 'Yesterday';
        if($day_diff < 7) return $day_diff . ' days ago';
        if($day_diff < 31) return ceil($day_diff / 7) . ' weeks ago';
        if($day_diff < 60) return 'last month';
        return date('F Y', $ts);
    }
    else
    {
        $diff = abs($diff);
        $day_diff = floor($diff / 86400);
        if($day_diff == 0)
        {
            if($diff < 120) return 'in a minute';
            if($diff < 3600) return 'in ' . floor($diff / 60) . ' minutes';
            if($diff < 7200) return 'in an hour';
            if($diff < 86400) return 'in ' . floor($diff / 3600) . ' hours';
        }
        if($day_diff == 1) return 'Tomorrow';
        if($day_diff < 4) return date('l', $ts);
        if($day_diff < 7 + (7 - date('w'))) return 'next week';
        if(ceil($day_diff / 7) < 4) return 'in ' . ceil($day_diff / 7) . ' weeks';
        if(date('n', $ts) == date('n') + 1) return 'next month';
        return date('F Y', $ts);
    }
} 
```

在此函数中，您必须传递`time`as `$ts`，转换为`strtotime function`。

可能是[PHP 的副本：从时间戳生成相对日期/时间](https://stackoverflow.com/questions/2690504/php-producing-relative-date-time-from-timestamps)

# android - 尝试在Android项目中使用数据库时没有此类表错误

> ID：14888242
> 
> 赞同：0
> 
> 时间：2013-02-15T04:28:23.450
> 
> 标签：android, android-sqlite

我正在为我的 android 项目创建数据库表，以下是帮助程序类。我能够创建数据库，当我尝试从方法 getSettings() 获取数据时，它显示一个错误，指出没有这样的表“设置”。

但是我在 onCreate 方法中创建了表。之后我调试并发现 OnCreate 方法没有调用。这是我的代码：

```
public class DataBaseHelper extends SQLiteOpenHelper 
{ 
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window 
//destination path (location) of our database on device 
private static String DB_PATH = "";  
private static String DB_NAME ="testDatabase";// Database name 
private SQLiteDatabase mDataBase;  
private final Context mContext; 

private final String SETTINGS_TABLE = "settings";
private final String SETTINGS_COLUMN_ID = "_id";
private final String SETTINGS_COLUMN_PROFILE_ID = "profileId";

private final String SETTINGS_TABLE_CREATE = "create table " + SETTINGS_TABLE
        + "(" + SETTINGS_COLUMN_ID + " integer primary key autoincrement, "
        + SETTINGS_COLUMN_PROFILE_ID + " varchar(100), );";
private final int SETTINGS_ID = 1;
   public DataBaseHelper(Context context)  
   { 
     super(context, DB_NAME, null, 1);// 1? its Database Version 
     DB_PATH = "/data/data/" + context.getPackageName() + "/databases/"; 
     this.mContext = context; 
  }    

 public void createDataBase() throws IOException 
 { 
   //If database not exists copy it from the assets 

boolean mDataBaseExist = checkDataBase(); 
if(!mDataBaseExist) 
{ 
    this.getWritableDatabase(); 
    this.close(); 
    try  
    { 
        //Copy the database from assests 
        copyDataBase(); 
        Log.e(TAG, "createDatabase database created"); 
    }  
    catch (IOException mIOException)  
    { 
        throw new Error("ErrorCopyingDataBase"); 
    } 
} 
} 
//Check that the database exists here: /data/data/your package/databases/Da Name 
private boolean checkDataBase() 
{ 
    File dbFile = new File(DB_PATH + DB_NAME); 
    //Log.v("dbFile", dbFile + "   "+ dbFile.exists()); 
    return dbFile.exists(); 
} 

//Copy the database from assets 
private void copyDataBase() throws IOException 
{ 
    InputStream mInput = mContext.getAssets().open(DB_NAME); 
    String outFileName = DB_PATH + DB_NAME; 
    OutputStream mOutput = new FileOutputStream(outFileName); 
    byte[] mBuffer = new byte[1024]; 
    int mLength; 
    while ((mLength = mInput.read(mBuffer))>0) 
    { 
        mOutput.write(mBuffer, 0, mLength); 
    } 
    mOutput.flush(); 
    mOutput.close(); 
    mInput.close(); 
} 

//Open the database, so we can query it 
public boolean openDataBase() throws SQLException 
{ 
    String mPath = DB_PATH + DB_NAME; 
    mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY); 
    mDataBase = getWritableDatabase();
    return mDataBase != null; 
} 

@Override 
public synchronized void close()  
{ 
    if(mDataBase != null) 
        mDataBase.close(); 
    super.close(); 
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    mDataBase = db;

    System.out.println("Oncreate table");
    try {
        db.execSQL(SETTINGS_TABLE_CREATE);
        InsertSettingsData();
        Log.d(TAG, "onCreate Success create SETTINGS_TABLE_CREATE");
    } catch (Exception e) {
        e.printStackTrace();
    }

}

private int InsertSettingsData() {
    // TODO Auto-generated method stub
    Log.d(TAG, "InsertConfigInitialData");

    try {
        ContentValues resourceTable = new ContentValues();
        resourceTable.put(SETTINGS_COLUMN_ID, SETTINGS_ID);
        resourceTable.put(SETTINGS_COLUMN_PROFILE_ID,
                "123456");

        int resourceId = (int) mDataBase.insert(SETTINGS_TABLE, null,
                resourceTable);
        if (resourceId >= 0) {
            return resourceId;
        }

    } catch (Exception e) {
        Log.d(TAG, "InsertConfigInitialData failed : " + e.toString());
        e.printStackTrace();
    }

    return -1;

}
public boolean UpdateConfigData() {
    Log.d(TAG, "UpdateConfigData");
    try {
        String condition = SETTINGS_COLUMN_ID + "=" + SETTINGS_ID;

        ContentValues resourceTable = new ContentValues();
        resourceTable.put(SETTINGS_COLUMN_PROFILE_ID,
                "34567");

        int totalUpdated = mDataBase.update(SETTINGS_TABLE,
                resourceTable, condition, null);
        if (totalUpdated > 0) {
            return true;
        } else {
            Log.d(TAG, "UpdateConfigData failed, no records updated");
        }
    } catch (Exception e) {
        Log.d(TAG, "UpdateConfigData failed : " + e.toString());
    }
    return false;
}

public SettingsObject getSettings() {
    Log.d(TAG, "LoadConfigs");
    SettingsObject settings = new SettingsObject();
    String condition = SETTINGS_COLUMN_ID + "=" + SETTINGS_ID;

    try {
        Cursor cursor = mDataBase.query(SETTINGS_TABLE, null,
                condition, null, null, null, null);
        if (cursor != null && cursor.moveToFirst()) {
            SettingsObject.setProfile_id(cursor.getString(cursor
                    .getColumnIndex(SETTINGS_COLUMN_PROFILE_ID)));

            cursor.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
        Log.d(TAG, "LoadConfigs failed : " + e.getMessage());
    }
    return settings;
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 

} 
```

从我的活动课上，我这样打电话，

```
 DataBaseHelper myDbHelper = new DataBaseHelper(this);
    myDbHelper = new DataBaseHelper(this);

    try {

        myDbHelper.createDataBase();

    } 
    catch (IOException ioe)
    {

        throw new Error("Unable to create database");

    }

    try 
    {

        myDbHelper.openDataBase();

    }
    catch(SQLException sqle){

    throw sqle;

    }

    SettingsObject object = myDbHelper.getSettings();

    System.out.println("settings profile Id" + object.getProfile_id()); 
```

## 编辑

我可以通过以下方法调用创建数据库表吗？

```
 //Open the database, so we can query it 
     public boolean openDataBase() throws SQLException 
     { 
       String mPath = DB_PATH + DB_NAME; 
       //Log.v("mPath", mPath); 
       mDataBase = SQLiteDatabase.openDatabase(mPath, null,   SQLiteDatabase.CREATE_IF_NECESSARY); 
    //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
    mDataBase = getWritableDatabase();
    mDataBase.execSQL(SETTINGS_TABLE_CREATE);
    InsertSettingsData();
      return mDataBase != null; 
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:36:25.923

您的创建表语法中有一个额外的字符`,`。您需要从语法中删除最后一个字符（逗号），

你的语法，

```
private final String SETTINGS_TABLE_CREATE = "create table " + SETTINGS_TABLE
        + "(" + SETTINGS_COLUMN_ID + " integer primary key autoincrement, "
        + SETTINGS_COLUMN_PROFILE_ID + " varchar(100), );"; 
```

将其更新为

```
private final String SETTINGS_TABLE_CREATE = "create table if not exists " + SETTINGS_TABLE
        + "(" + SETTINGS_COLUMN_ID + " integer primary key autoincrement, "
        + SETTINGS_COLUMN_PROFILE_ID + " varchar(100) );"; 
```

现在你的语法已经准备好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:54:57.780

`onCreate()`将不会被调用，因为数据库已经存在——如果数据库不存在，您的代码显示您正在从资产中复制数据库，因此当您调用 SQLiteOpenHelper 时，它**确实**存在并被`onCreate()`跳过。在您的特殊情况下，您不能依赖 SQLiteOpenHelper 来调度正确的事件，而是需要从资产中复制，然后一次打开并修改架构。

你想要这样的东西：

```
boolean mDataBaseExist = checkDataBase(); 
if(!mDataBaseExist) 
{ 
    try  
    { 
        //Copy the database from assests 
        copyDataBase(); 
        Log.e(TAG, "createDatabase database created"); 
        SQLiteDatabase db = getWriteableDatabase();
        db.execSQL( ...create ddl... );

    }  
    catch (IOException mIOException)  
    { 
        throw new Error("ErrorCopyingDataBase"); 
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:56:49.493

主要问题是 onCreate 没有被执行。

实际上，除非您在 SQLiteOpenHelper 类上调用 getWritableDatabase 或 getReadableDatabase 方法，否则根本不会调用 onCreate：

```
myDbHelper.getWritableDatabase(); 
```

或者

```
myDbHelper.getReadableDatabase(); 
```

onCreate 不是从它的构造函数中调用的，它是由 Android 框架在您尝试访问（读/写）数据库时调用的。

# ruby - 了解 Ruby 闭包

> ID：14888247
> 
> 赞同：3
> 
> 时间：2013-02-15T04:29:01.593
> 
> 标签：ruby, closures

我试图更好地理解 Ruby 闭包，但遇到了这个我不太理解的示例代码：

```
def make_counter
  n = 0
  return Proc.new { n = n + 1 }
end

c = make_counter
puts c.call # => this outputs 1
puts c.call # => this outputs 2 
```

当我打电话时，有人可以帮助我理解上述代码中实际发生的情况`c = make_counter`吗？在我看来，这就是我认为正在发生的事情：

Ruby 调用该`make_counter`方法并返回一个 Proc 对象，其中与 Proc 关联的代码块将是`{ n = 1 }`. 执行第一个时`c.call`，Proc 对象将执行与其关联的块，并返回`n = 1`. 但是，当执行第二个时`c.call`，Proc 对象是否仍然执行与其关联的块，它仍然是`{ n = 1 }`？我不明白为什么输出会变为 2。

也许我根本不理解这一点，如果您能提供一些关于 Ruby 中实际发生的事情的说明将会很有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T04:35:17.700

`make_counter`调用该块时不会评估该块。当您通过调用 Proc 时，该块被评估并运行`c.call`。所以每次你运行`c.call`时，表达式`n = n + 1`都会被计算并运行。Proc 的绑定将导致`n`变量保留在范围内，因为它（局部`n`变量）首先在 Proc 闭包之外声明。因此，`n`将在每次迭代中不断增加。

为了进一步澄清这一点：

*   定义 Proc（或 lambda）的块在初始化时不会被评估 - 里面的代码就像你看到的那样被冻结。
*   好的，代码实际上是“评估”的，但不是为了更改冻结代码。相反，它会检查当前在 Proc 代码块上下文中使用的范围内的任何变量。因为`n`它是一个局部变量（正如之前定义的那样），并且它在 Proc 中使用，所以它在绑定中被捕获并随之而来。
*   当在`call`Proc 上调用该方法时，它将在已捕获的绑定的上下文中执行“冻结”代码。因此`n`，最初分配为 0 的 将递增到 1。再次调用时，它`n`会再次递增到 2。依此类推...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-28T02:59:17.630

我总是想了解发生了什么，重新审视基础知识总是很重要。对于阅读这篇文章的新手来说，没有人回答过`Proc`Ruby 中的 a 是什么的问题，这将是至关重要的，并且有助于回答这个问题。

在高层次上，**procs 是可以存储在 variables 中的方法**。

`Procs`也可以将代码块作为其参数，在这种情况下它采用`n = n + 1`. 在其他编程语言中，块称为**闭包**。块允许您将语句组合在一起并封装行为。

在 Ruby 中创建块有两种方法。您提供的示例使用大括号语法。

那么，`Procs`如果您可以使用方法来执行相同的功能，为什么还要使用呢？

答案是 Procs 比方法给你更多的灵活性。`Procs`您可以将一整套流程存储在一个变量中，然后在程序中的任何其他位置调用该变量。

在这种情况下，`Proc`被写在一个方法中，然后该方法被存储在一个被调用的变量中`c`，然后`puts`每次递增的值都会被调用`n`。

与`Proc`s 类似，`Lambdas`还允许您将函数存储在变量中并从程序的其他部分调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-26T03:04:38.350

这里：

```
return Proc.new { n = n + 1 } 
```

实际上，返回一个 proc 对象，该对象有一个与之关联的块。Ruby 创建了一个带有块的绑定！所以执行上下文被存储起来供以后使用，因此我们可以增加 n。让我进一步解释 Ruby 闭包，以便您有更广泛的想法。

首先，我们需要澄清技术术语“绑定”。在 Ruby 中，绑定对象将执行上下文封装在程序的某个特定范围内，并保留此上下文以供将来在程序中使用。此执行上下文包括传递给方法的参数和方法中定义的任何局部变量、任何关联的块、返回堆栈和 self 的值。举个例子：

```
class SomeClass 
  def initialize
    @ivar = 'instance variable'
  end

  def m(param)
    lvar = 'local variable'
    binding
  end
end

b = SomeClass.new.m(100) { 'block executed' }
 => #<Binding:0x007fb354b7aca0>

eval "puts param", b
=> 100
eval "puts lvar", b
=> local variable
eval "puts yield", b
=> block executed
eval "puts self", b
=> #<SomeClass:0x007fb354ad82e8>
eval "puts @ivar", b
instance variable 
```

最后一条语句可能看起来有点棘手，但事实并非如此。记住绑定保存执行上下文以供以后使用。所以当我们调用yield时，它调用yield就好像它仍然在那个执行上下文中一样，因此它调用了块。

有趣的是，您甚至可以在闭包中重新分配局部变量的值：

```
eval "lvar = 'changed in eval'", b
eval "puts lvar", b
=> changed in eval 
```

现在这一切都很可爱，但没那么有用。绑定非常有用，因为它与块有关。Ruby 将绑定对象与块相关联。因此，当您创建 proc 或 lambda 时，生成的 Proc 对象不仅包含可执行块，还包含块使用的所有变量的绑定。

您已经知道块可以使用在块外定义的局部变量和方法参数。例如，在以下代码中，与 collect 迭代器关联的块使用方法参数 n：

```
# multiply each element of the data array by n
def multiply(data, n)
 data.collect {|x| x*n }
end
puts multiply([1,2,3], 2) # Prints 2,4,6 
```

更有趣的是，如果将块转换为 proc 或 lambda，即使在它作为参数的方法返回之后，它也可以访问 n。那是因为有一个绑定与 lambda 或 proc 对象的块相关联！以下代码演示：

```
# Return a lambda that retains or "closes over" the argument n
def multiplier(n)
 lambda {|data| data.collect{|x| x*n } }
end
doubler = multiplier(2) # Get a lambda that knows how to double
puts doubler.call([1,2,3]) # Prints 2,4,6 
```

multiplier 方法返回一个 lambda。因为这个 lambda 是在定义它的范围之外使用的，所以我们称它为闭包；它封装或“关闭”（或仅保留）方法参数 n 的绑定。

重要的是要理解闭包不仅仅保留它所引用的变量的值——它保留了实际的变量并延长了它们的生命周期。另一种说法是，在创建 lambda 或 proc 时，lambda 或 proc 中使用的变量不是静态绑定的。相反，绑定是动态的，并且在执行 lambda 或 proc 时会查找变量的值。

# java - 在 libGDX 中使用 Pool<> 类

> ID：14888255
> 
> 赞同：4
> 
> 时间：2013-02-15T04:29:30.403
> 
> 标签：java, libgdx

如何以及为什么要在 libGDX 中使用[Pool ？](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/Pool.html)官方开发指南中没有关于此类的任何内容，除了在某些示例中使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T05:44:50.030

[Pool](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/Pool.html)类是避免垃圾收集开销的优化。缺点是必须手动管理池中的对象（您必须记住释放它们以便它们可以重用），并且您的对象必须是可重用的（`final`例如，通常没有字段）。

在 libGDX 中，`Pool`该类用于在每个帧上分配的对象（如动作和事件）。

您可以为自己的代码忽略 Pool，直到遇到生成太多垃圾的问题。

### 如何使用游泳池

A`Pool<>`管理单一类型的对象，因此它由该类型参数化。对象通过调用从特定`Pool`实例中获取`obtain`，然后应该通过调用返回到池中`free`。池中的对象可以选择实现[`Pool.Poolable`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/Pool.Poolable.html)接口（只需要`reset()`存在一个方法），在这种情况下，`Pool`当对象返回池时会自动重置对象。对象最初是按需分配的（因此，如果您从不调用`obtain`，则 Pool 将不包含任何对象）。

您必须实现自己的子类，`Pool<>`因为该`newObject`方法是抽象的。

### 泳池注意事项

小心泄露对 Pooled 对象的引用。仅仅因为您在 Pool 上调用“free”并不会使任何未完成的引用无效。如果您不小心，这可能会导致细微的错误。如果将对象放入池中时对象的状态未完全重置，您还可以创建细微的错误。

# ruby-on-rails - 设计如何允许登录用户注册另一个用户

> ID：14888258
> 
> 赞同：2
> 
> 时间：2013-02-15T04:29:36.893
> 
> 标签：ruby-on-rails, devise

即使我已登录，我也希望能够注册新用户。

现在如果我在登录时点击“注册”，注册表格将不会显示。相反，错误消息将显示“您已经登录”。

我想允许用户（管理员）向系统添加新用户。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T05:39:34.650

创建一个`UsersController`并**以 admin 身份验证用户**。然后在控制器`new`和`create`actions中，你可以放上你的用户创建逻辑。并将文件内容复制`views/devise/registration/new.html.erb`到`views/users/new.html.erb`.

**扩展答案：**

如果要管理的角色超过两个，您可以创建角色表。这将使管理它们变得容易。如果需要，您可以使用宝石来管理角色的范围。

如果只有两个角色（管理员和其他/普通用户），那么您可以`admin`在`users table`.

# facebook - 如何在 iOS 中注销 Facebook

> ID：14888268
> 
> 赞同：2
> 
> 时间：2013-02-15T04:30:19.207
> 
> 标签：facebook, cocoa-touch

我知道如何登录

```
[FBSession openActiveSessionWithReadPermissions:readPermissions allowLoginUI:YES completionHandler:
 ^(FBSession *session,FBSessionState state, NSError *error) {
     [self sessionStateChanged:session state:state error:error];//This is done on main thread already
 }]; 
```

问题是注销时要做什么，比如当用户按下注销按钮时？

目前我只是做

```
[FBSession.activeSession closeAndClearTokenInformation];
[[NSNotificationCenter defaultCenter] postNotificationName:FACEBOOKSESSIONCHANGED object:self]; 
```

但是，我不认为这是真的。[FBSession.activeSession closeAndClearTokenInformation]; 应该在 [self sessionStateChanged:session state:state error:error] 处调用；注销后。

那么我应该怎么做才能注销？

我从 facebook 检查了美味的样本，我找不到他们的注销机制。似乎他们使用具有委托的专用 facebook viewController。但是没有一个代表被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:26:56.493

注销机制，他们只是通过释放访问令牌并将其设置为零来使访问令牌无效。但是，如果您的登录是使用 safari，那么 cookie 仍然存在。所以下次如果用户打开 safari 并尝试访问 Facebook，它会说它已经被授权。要删除 cookie，我使用以下方法

```
- (void)fbDidLogout
{
  NSLog(@"Logged out of facebook");
  NSHTTPCookie *cookie;
  NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
  for (cookie in [storage cookies])
   {
       NSString* domainName = [cookie domain];
       NSRange domainRange = [domainName rangeOfString:@"facebook"];
       if(domainRange.length > 0)
       {
            [storage deleteCookie:cookie];
       }
   }
} 
```

为了更加确定，您也可以调用，因为即使在调用 closeAndClearTokenInformation 之后，也有一些错误会返回打开的会话。[https://developers.facebook.com/bugs/497294866962479?browse=search_507cb8ebc4f025673237228](https://developers.facebook.com/bugs/497294866962479?browse=search_507cb8ebc4f025673237228)

```
[FBSession.activeSession closeAndClearTokenInformation];
[FBSession.activeSession close];
[FBSession setActiveSession:nil]; 
```

其他选项是在检查活动会话时使用以下条件。

```
if (FBSession.activeSession.isOpen)
 //logged in
else
 //not logged in 
```

因为 FBSession.activeSession.state 返回的是 FBSessionStateOpen，而不是 FBSessionStateCreatedTokenLoaded。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T20:35:10.517

不确定是否还有人对此感到困扰，但是使用最新版本的 Facebook SDK，我无法让 iPad 在注销后强制登录。这里仍然有些奇怪——“清除 cookie”代码被跳过了——有没有不同的方法来清除 iPad 中的 cookie？杰瑞

# jquery - Rails jquery 仅加载到第一个元素

> ID：14888269
> 
> 赞同：0
> 
> 时间：2013-02-15T04:30:22.353
> 
> 标签：jquery, ruby-on-rails, ruby, drop-down-menu

我想创建一个包含指向不同控制器操作的链接的下拉列表。我有一个辅助方法来为我的下拉菜单提供选项。

```
 def my_product_options(product)
    if product.status == Product::STATUS_INCOMPLETE
       my_options =  {"Select" => '', "Edit info" => edit_product_path(product)}
    elsif product.status == Product::STATUS_ACTIVE
       my_options =  {"Select" => '', "Edit info" => edit_product_path(product), "Suspend" => suspend_product_path(product)}
    end
    my_options
   end 
```

我遍历每个产品并获得每个产品的选项。但问题是所有产品的下拉菜单都加载了他们的选项，但点击仅适用于第一个产品。当我单击其余的下拉选项时，没有任何反应。

我有 jquery 来处理视图中的点击事件

```
<script>
$('#create_options').change(function() {
    window.location = $(this).find('option:selected').val();
});
</script> 
```

任何建议或解决方案或不同的方法都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:38:33.117

是的，当您`same ids for multiple elements`在同一个文档上使用时会发生这种情况。`You have to use class`反而。

```
$('.create_options').change(function() {
 //^-----use class instead of id
    window.location = $(this).find('option:selected').val();
}); 
```

## 见：http: [//jsfiddle.net/X5583/](http://jsfiddle.net/X5583/)

`In fiddle you can see both "using ids" and "using class" try commenting out each`
`one by one.`

如果您对同一页面中的多个元素使用相同的 id 表示法，那么只有第一次发生的事件会得到该事件，而其他事件则不会。

# angularjs - dijit.byId("").is not defined in Worklight 适用于 Angularjs

> ID：14888277
> 
> 赞同：1
> 
> 时间：2013-02-15T04:31:54.157
> 
> 标签：angularjs, dojo, ibm-mobilefirst

我在 worklight 中使用 dojo mobile 1.8.1 和 angularjs 1.0.1 制作了一个项目，但我遇到了一个奇怪的问题。

这是我的html部分：

```
<div data-dojo-type="dojox.mobile.ScrollableView" data-dojo-props="selected:true"  id="id1" ></div>

<div class="full" data-dojo-type="dojox.mobile.View" id="id2"></div> 
```

和我的 JavaScript 部分：

```
require([
"dojo", "dijit/_base/manager","dojo/parser", "dijit/registry",
], function(dojo) {
dojo.ready(function() {

// dijit.byId("id1").performTransition("id2");   //////////place I

});
});

var angularApp = angular.module('app', [])
.run(['$rootScope','$templateCache','$route',
  function($rootScope,$templateCache,$route) {

dijit.byId("id1").performTransition("id2");////////place II
}]); 
```

问题出在位置 I，它运行良好，但是当我将“dijit.byId("id1")”放在位置 II 时，它显示：

> dijit.byId(""). 未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:03:41.860

在 dojo 解析您的文档并构建您尝试使用 dijit.byId 获取的小部件之后执行 ready 函数。

第二部分没有放在 ready 函数中，所以 dojo 还找不到你的元素！

**解决方案：**在 ready 函数中访问您的元素，**或者**不要以声明方式声明它们（就像您所做的那样，使用 html 代码......）！

卢西安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:36:35.217

dojo.ready() 函数注册了一个事件处理函数（回调），它将在 DOM 完全解析后触发。如果您想确保在对它们执行操作之前将每个 html 元素重新呈现为 dojo-widget，这将非常方便。

因此，在您的示例中，代码 II 将在通过加载必要的模块（dijit/registry，...）使 dijit.byId() 函数可用之前执行。只有在 dom-ready 事件被触发并且您的“dojo.ready()”函数确实加载了所需的模块之后，代码 II 才能工作。

您绝对应该花 5 分钟时间阅读 dojo.ready() 的内容： [http ://dojotoolkit.org/reference-guide/1.8/dojo/ready.html](http://dojotoolkit.org/reference-guide/1.8/dojo/ready.html)

旁注：您不应该在 Dojo 1.8.1 中再使用 dijit.byId()。尝试使用 dijit.registry.byId() （您必须需要 dijit/registry 模块）。

[http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#dijit-registry-byid](http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#dijit-registry-byid)

# c - 在同一台计算机上的两个进程之间发送/处理信号的问题 - C 编程

> ID：14888279
> 
> 赞同：0
> 
> 时间：2013-02-15T04:32:01.407
> 
> 标签：c, signals, kill, interprocess

我在处理计算机上运行的两个进程之间的信号时遇到问题。scheduler.c 正在发送信号，而 producer.c 正在接收它们。生产者应该打印“Printing n”，其中每次接收到 SIGUSR1 时 n 都会增加 1。我曾尝试同时使用信号和 sigaction 来处理信号，但它们都不适合我。

调度程序.c：

```
/*
 * scheduler.c
 */

#include <signal.h>
#include <string.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>

int n = 1;

int main(int argc, char *argv[])
{
    int a = 0; // This variable will be used for the switch later

    // Check to ensure correct number of command line arguments
    if(argc != 2){
        printf("Usage error. Wrong number of arguments\n");
        return 1;
    }

    // Grab PID of producer.c
    int producer_pid = atoi(argv[1]);       

    while(1){
        printf("Choose an Option: \n");
        printf("1\. Request_Production\n");
        printf("2\. Stop_Producer\n");
        printf("3\. Stop_Scheduler\n");
        scanf("%d", &a);

        switch( a ) 
        {
            case 1:
                kill(producer_pid, 16);     //Send SIGUSR1 to producer.c
                break;

            case 2:
                kill(producer_pid, 2);      //Send SIGINT to producer.c
                break;

            // Successfully exit program
            case 3:
                return 0;

            // Invalid Choice
            default :
                printf("Invalid choice\n");
        }
    }
} 
```

生产者.c：

```
/*
 * producer.c
 */

#include <signal.h>
#include <string.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>

int n = 1;

void sigusr1(int signo)
{

    printf("Producing %d", n);
    n++;
}

int main()
{

    struct sigaction act;
    sigset_t block_mask;
    sigfillset(&block_mask);
    act.sa_handler = sigusr1;
    act.sa_mask = block_mask;
    act.sa_flags = 0;

    if(sigaction(SIGUSR1, &act, NULL) == 0){
        printf("success");
    }

    while(1) {

        sleep(2);
        fflush(stdout);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:18:02.263

此代码适用于我（在 Mac OS X 10.7.5 上）：

### 生产者.c

```
#include <signal.h>
#include <stdio.h>
#include <unistd.h>

static volatile sig_atomic_t n = 0;

static void sigusr1(int signo)
{
    n += signo / SIGUSR1;
}

int main(void)
{
    struct sigaction act;
    sigset_t block_mask;
    sigfillset(&block_mask);
    act.sa_handler = sigusr1;
    act.sa_mask = block_mask;
    act.sa_flags = 0;

    if (sigaction(SIGUSR1, &act, NULL) == 0)
    {
        printf("success %d\n", (int)getpid());
        while (1)
        {
            pause();
            printf("Producer: %d\n", n);
            fflush(stdout);
        }
    }
} 
```

### 调度程序.c

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    int a = 0; // This variable will be used for the switch later

    // Check to ensure correct number of command line arguments
    if (argc != 2)
    {
        fprintf(stderr, "Usage: %s pid\n", argv[0]);
        return 1;
    }

    // Grab PID of producer.c
    int producer_pid = atoi(argv[1]);       

    while(1)
    {
        printf("Choose an Option: \n");
        printf("1\. Request Production\n");
        printf("2\. Stop Producer\n");
        printf("3\. Stop Scheduler\n");
        scanf("%d", &a);

        switch (a) 
        {
            case 1:
                if (kill(producer_pid, SIGUSR1) != 0)
                    fprintf(stderr, "Failed to send signal %d to %d\n", SIGUSR1, producer_pid);
                break;

            case 2:
                if (kill(producer_pid, SIGTERM) != 0)
                    fprintf(stderr, "Failed to send signal %d to %d\n", SIGTERM, producer_pid);
                break;

            // Successfully exit program
            case 3:
                return 0;

            // Invalid Choice
            default :
                fprintf(stderr, "Invalid choice (%d)\n", a);
                break;
        }
    }
} 
```

### 样本输出

```
$ (./producer &)
$ success 40119
$ ./scheduler 40119
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 1
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 2
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 3
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 4
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 5
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 6
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 7
1
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
Producer: 8
2
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
1
Failed to send signal 30 to 40119
Choose an Option: 
1\. Request Production
2\. Stop Producer
3\. Stop Scheduler
3
$ 
```

### 发生了什么变化？

各种变化，但关键是：

1.  **确保输出消息以换行符结尾。**
2.  变成`n`一个`volatile sig_atomic_t`变量；这就是 C 标准所说的您可以在信号处理程序中访问的内容。
3.  在生产者中有主循环，`pause()`然后打印。系统调用仅在`pause()`被信号中断时返回。
4.  在调度程序中也使用符号信号名称。
5.  **让调度程序发送`SIGTERM`而不是`SIGINT`终止生产者。** 如果生产者在后台运行，它会忽略中断。
6.  让调度程序识别`kill()`调用何时失败。
7.  让生产者识别其 PID。

我已经从文件标题中删除了多余的标题。

信号处理程序中的有趣`signo / SIGUSR1`之处避免了未使用参数的警告；它没有其他用途。如图所示，程序在以下条件下干净地编译：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition scheduler.c -o scheduler  
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition producer.c -o producer 
```

这是使用 GCC 4.7.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:39:26.387

一句话：

有些函数是安全的，有些函数是不安全的，不能从信号处理程序中调用。

`printf`不能从信号处理程序中调用。`write`另一方面是安全的。

该列表由 POSIX-1 指定，但详细信息可能因操作系统而异。对于 Linux，您将在 signal(7) 中找到该列表：

[http://linux.die.net/man/7/signal](http://linux.die.net/man/7/signal)

# c# - Web.Optimizations - 从样式/脚本包中获取所有内容的任何方式？

> ID：14888283
> 
> 赞同：10
> 
> 时间：2013-02-15T04:33:10.463
> 
> 标签：c#, asp.net, asp.net-mvc, bundling-and-minification, asp.net-optimization

我正在使用一些动态捆绑，它根据配置添加 CSS 和 JS 文件。

我启动了一个新的 StyleBundle，这样：

```
var cssBundle = new StyleBundle("~/bundle/css"); 
```

然后遍历配置并添加任何找到的包括：

```
cssBundle.Include(config.Source); 
```

在循环之后，我想检查是否实际上包含任何文件/目录。我知道有 EnumerateFiles() 但我认为这 100% 不能达到目的。

其他人以前做过类似的事情吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-15T05:20:56.823

该类`Bundle`使用不向应用程序公开的内部项目列表~~，并且不一定可以通过反射访问（我尝试过但无法获得任何内容）~~。您可以使用`BundleResolver`类获取有关此的一些信息，如下所示：

```
var cssBundle = new StyleBundle("~/bundle/css");
cssBundle.Include(config.Source);

// if your bundle is already in BundleTable.Bundles list, use that.  Otherwise...
var collection = new BundleCollection();
collection.Add(cssBundle)

// get bundle contents
var resolver = new BundleResolver(collection);
List<string> cont = resolver.GetBundleContents("~/bundle/css").ToList(); 
```

如果您只需要计数，那么：

```
int count = resolver.GetBundleContents("~/bundle/css").Count(); 
```

**编辑：使用反射**

显然我之前的反射测试做错了。

这实际上有效：

```
using System.Reflection;
using System.Web.Optimization;

...

int count = ((ItemRegistry)typeof(Bundle).GetProperty("Items", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(cssBundle, null)).Count; 
```

当然，您可能应该在那里添加一些安全检查，并且像许多反射示例一样，这违反了该属性的预期安全`Items`性，但它*确实*有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T11:16:09.240

您可以使用以下扩展方法`Bundle`：

```
public static class BundleHelper
{
    private static Dictionary<Bundle, List<string>> bundleIncludes = new Dictionary<Bundle, List<string>>();
    private static Dictionary<Bundle, List<string>> bundleFiles = new Dictionary<Bundle, List<string>>();

    private static void EnumerateFiles(Bundle bundle, string virtualPath)
    {
        if (bundleIncludes.ContainsKey(bundle))
            bundleIncludes[bundle].Add(virtualPath);
        else
            bundleIncludes.Add(bundle, new List<string> { virtualPath });

        int i = virtualPath.LastIndexOf('/');
        string path = HostingEnvironment.MapPath(virtualPath.Substring(0, i));

        if (Directory.Exists(path))
        {
            string fileName = virtualPath.Substring(i + 1);
            IEnumerable<string> fileList;

            if (fileName.Contains("{version}"))
            {
                var re = new Regex(fileName.Replace(".", @"\.").Replace("{version}", @"(\d+(?:\.\d+){1,3})"));
                fileName = fileName.Replace("{version}", "*");
                fileList = Directory.EnumerateFiles(path, fileName).Where(file => re.IsMatch(file));
            }
            else // fileName may contain '*'
                fileList = Directory.EnumerateFiles(path, fileName);

            if (bundleFiles.ContainsKey(bundle))
                bundleFiles[bundle].AddRange(fileList);
            else
                bundleFiles.Add(bundle, fileList.ToList());
        }
    }

    public static Bundle Add(this Bundle bundle, params string[] virtualPaths)
    {
        foreach (string virtualPath in virtualPaths)
            EnumerateFiles(bundle, virtualPath);

        return bundle.Include(virtualPaths);
    }

    public static Bundle Add(this Bundle bundle, string virtualPath, params IItemTransform[] transforms)
    {
        EnumerateFiles(bundle, virtualPath);
        return bundle.Include(virtualPath, transforms);
    }

    public static IEnumerable<string> EnumerateIncludes(this Bundle bundle)
    {
        return bundleIncludes[bundle];
    }

    public static IEnumerable<string> EnumerateFiles(this Bundle bundle)
    {
        return bundleFiles[bundle];
    }
} 
```

然后只需将您的`Include()`电话替换为`Add()`：

```
var bundle = new ScriptBundle("~/test")
    .Add("~/Scripts/jquery/jquery-{version}.js")
    .Add("~/Scripts/lib*")
    .Add("~/Scripts/model.js")
    );

var includes = bundle.EnumerateIncludes();
var files = bundle.EnumerateFiles(); 
```

如果您也在使用`IncludeDirectory()`，只需通过添加相应的`AddDirectory()`扩展方法来完成示例。

# javascript - 使用元素生成 JavaScript 数组

> ID：14888284
> 
> 赞同：-2
> 
> 时间：2013-02-15T04:33:21.113
> 
> 标签：javascript, arrays

如何根据容器中的元素以及它们的顺序来操作 JavaScript 数组？

见：[http ://www.mobafire.com/league-of-legends/item-purchase-planner](http://www.mobafire.com/league-of-legends/item-purchase-planner)

单击一个项目会将其移动到“项目沙箱”中，该沙箱会生成或操作“项目”数组（见 URL/永久链接）。重新排序沙箱内的任何项目（调试）表明该数组是从该容器内的元素生成的。

编辑：我想我应该解释一下我的意图？我目前正在开发一个类似的系统，但在元素上使用数组 ID 来操作数组。但是，当我删除一个元素（及其在数组中的值）时，其他数组 ID 将不再准确，并产生不良结果。该数组可能包含重复项，因此我不能使用这些值本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:39:03.610

列表中的项目按其类显示和隐藏。

单击**Magic Resist**按钮，基本上会发生以下情况：

```
$(".tier-wrapper").not(".magic-resist").hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:48:50.247

另一个选择是为沙箱创建一个空 div，每次将项目添加到沙箱时，都会创建一个新元素并附加到该空 div。因此，使其可见，然后您可以从找到该沙箱 div 的子元素生成一个数组。同时，您可以决定是否在右侧 div 上设置不可见（子元素的来源）

至于显示顺序，这取决于您是添加还是添加子元素。老实说，我建议您复习一些基本的 JavaScript 并重新表述您的问题

安吉拉

# c# - 用于隐藏和显示面板的 Javascript 代码

> ID：14888287
> 
> 赞同：0
> 
> 时间：2013-02-15T04:33:28.683
> 
> 标签：c#, javascript, asp.net

我想要一个 javascript 代码来隐藏/显示面板
如果网格有数据，则面板有一个网格......然后应该显示面板，如果网格为空，则应该隐藏面板

我试过这个代码..但它不起作用......

```
<script language="javascript" type = "text/javascript">
    var gridview = (document.getElementById("#<%= gridview1.ClientID %>")) ? true : false;
    if (gridview) {
        document.getElementById("Panel1").style.display = 'inline';
        }
    else {
  document.getElementById("Panel1").style.display = 'none';
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:40:09.647

删除`#`in `document.getElementById("#<%= gridview1.ClientID %>")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:52:07.173

在行 -

var gridview = (document.getElementById("#<%= gridview1.ClientID %>")) ？真假;

而不是使用 ("#<%= gridview1.ClientID %>") ，自己编写网格的直接 ID。like

var gridview = (document.getElementById("gridview1")) ？真假;

试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:52:57.143

首先，我对C#不熟悉，所以我不能为其他部分的代码说话。至于 JavaScript，你应该知道几件事：

1.  getElementById 不返回布尔值，它返回一个对象。所以用！！强制转换为布尔值
2.  getElementById 不会告诉您元素中是否存在值。它只是返回由 getElementById 指定的 DOM 对象。您需要检查 innerText（对于 IE、chrome、safari）或 textValue（对于 firefox、chrome、safari）属性。如果使用 jQuery，请检查 .val() 或 .text() 是否为空。
3.  而getElementById 只是使用元素的名称，没有#。jQuery 使用它。

希望它有帮助，
安吉拉 :)

# gps - 如何获取谷歌地图路线上起点和终点之间的所有 GPS 坐标？

> ID：14888296
> 
> 赞同：3
> 
> 时间：2013-02-15T04:34:40.043
> 
> 标签：gps

有没有一种在线方法可以用来获取谷歌地图上两点之间的路线上的所有 gps 点？即，如果我给出起点和终点，我需要获取该特定路线上的所有 GPS 点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:09:09.193

每个人都想要那个，除了那个数据的所有者。（TomTom/TeleAtlas 通过谷歌）。通常你不能通过官方的 api 得到它。有或曾经有来自 Google 的私有网络服务，用于发送压缩和解码的路由。

但是从法律上讲，您无法获得该数据。

如果你想要这样的矢量数据（坐标），那么你必须`OpenStreetMap`通过像`RouteMe`.

# c# - C# 应用程序被防病毒软件阻止？

> ID：14888301
> 
> 赞同：2
> 
> 时间：2013-02-15T04:35:10.203
> 
> 标签：c#, virus, malware

我有一个使用 Visual C# Express 编写的薪资系统。我实际上已经完成了编码并发布了它。但是每当我将它安装在笔记本电脑上时，它就会被 Avast 阻止！防病毒软件可疑并停止该过程。之后应用程序无法启动事件，尽管它安装时说文件丢失。它有这个`details`：

```
PLATFORM VERSION INFO
    Windows             : 6.1.7601.65536 (Win32NT)
    Common Language Runtime     : 4.0.30319.296
    System.Deployment.dll       : 4.0.30319.1 (RTMRel.030319-0100)
    clr.dll             : 4.0.30319.296 (RTMGDR.030319-2900)
    dfdll.dll           : 4.0.30319.1 (RTMRel.030319-0100)
    dfshim.dll          : 4.0.31106.0 (Main.031106-0000)

SOURCES
    Deployment url          : file:///C:/Users/John%20Jayson/AppData/Roaming/Microsoft/Windows/Start%20Menu/Programs/IT%20Box%20Incorporated/Payroll%20System.appref-ms%7C

ERROR SUMMARY
    Below is a summary of the errors, details of these errors are listed later in the log.
    * Activation of C:\Users\John Jayson\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\IT Box Incorporated\Payroll System.appref-ms| resulted in exception. Following failure messages were detected:
        + Activation failed.
        + The system cannot find the file specified. (Exception from HRESULT: 0x80070002)

COMPONENT STORE TRANSACTION FAILURE SUMMARY
    No transaction error was detected.

WARNINGS
    There were no warnings during this operation.

OPERATION PROGRESS STATUS
    * [2/15/2013 12:39:05 PM] : Activation of C:\Users\John Jayson\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\IT Box Incorporated\Payroll System.appref-ms| has started.
    * [2/15/2013 12:39:05 PM] : Performing necessary update check as specified by the deployment.

ERROR DETAILS
    Following errors were detected during this operation.
    * [2/15/2013 12:39:05 PM] System.Deployment.Application.DeploymentException (Activation)
        - Activation failed.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.ComponentStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
            at System.Deployment.Application.SubscriptionStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
            at System.Deployment.Application.ApplicationActivator.Activate(DefinitionAppId appId, AssemblyManifest appManifest, String activationParameter, Boolean useActivationParameter)
            at System.Deployment.Application.ApplicationActivator.ProcessOrFollowShortcut(String shortcutFile, String& errorPageUrl, TempFile& deployFile)
            at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
        --- Inner Exception ---
        System.IO.FileNotFoundException
        - The system cannot find the file specified. (Exception from HRESULT: 0x80070002)
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.NativeMethods.CorLaunchApplication(UInt32 hostType, String applicationFullName, Int32 manifestPathsCount, String[] manifestPaths, Int32 activationDataCount, String[] activationData, PROCESS_INFORMATION processInformation)
            at System.Deployment.Application.ComponentStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)

COMPONENT STORE TRANSACTION DETAILS
    No transaction information is available. 
```

因此，在`Application cannot be started`弹出窗口之前，Avast 的通知窗口说这是一种`Win32:Evo-gen`威胁。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T08:04:15.537

It also happened with me, I have project in c#, I am using external Ribbon35 control in my project which has option in tabs like creating, scanning, processing etc. When I added 4 new tabs and added buttons on tabs it suddenly shows [Win32:Evo-gen] and exe was blocked. Please remember I did not rename Tab Names instead they were on its default names like [RibbonTab1, captiontext = Scanning] I though Antivirus would have thinking this as malicious behavior from my application, I rename all tabs as like its behavior and problem gone. (May be hackers don't care about naming controls as their behaviors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T15:37:14.533

我在使用 VB.NET 进行项目时也遇到了这个问题，然后我将最近的更新改回以找出问题所在。问题出在“插入”语句中，我使用下面的代码直接从 Datetimepicker 控件中获取日期值。

`dtpJD.Value.ToString("yyyy/MM/dd HH:mm:ss")`

然后我用 Insert 语句中的变量替换它，一切都很好。

`parJDDate = dtpJD.Value.ToString("yyyy/MM/dd HH:mm:ss")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T13:34:45.557

找到一条线索.. - 当我的应用程序从名称中包含外来字符的文件夹中运行时，Avast 将阻止它。- 在我将文件夹重命名为仅包含英文字符之后。问题解决了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-05T11:50:16.213

哥们，它检测为病毒，因为它包含付款，它认为你有一个勒索软件，你可以添加到排除我认为，但我从未使用过 avast，它不是最好的杀毒软件，如果你想要一个具有良好保护使用的免费杀毒软件comodo，或者如果您想要最好的：卡巴斯基，或者您应该使用其他方法，但我更喜欢卸载 avast 并安装更好的防病毒软件，检查[AV 测试](http://www.av-test.org/en/tests/home-user/windows-8/janfeb-2013/)站点 并选择您需要的最佳保护级别

问候

# jquery - 如何在删除时刷新 jQuery jTable？

> ID：14888303
> 
> 赞同：1
> 
> 时间：2013-02-15T04:35:30.910
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, jquery-jtable

我在我的 CRUD 应用程序中使用了 jQuery 的 jTable 插件。我的问题是，当我单击删除图标时，会出现一个确认对话框，但单击删除按钮后该对话框不会消失，我必须手动刷新页面以加载反映的表。

这是问题的屏幕截图：

![在此处输入图像描述](../Images/7466283382c2bac4501065f0a9dde1d3.png)

现在对话框没有消失，当我手动单击对话框的关闭按钮时，它显示：

![在此处输入图像描述](../Images/bc70371468a013a568ded4a3330d9e5d.png)

我不想要这种行为。我想点击删除按钮，对话框将消失，表格将被重新加载

**脚本如下：**

```
 <div id="StudentTable" style="width: 580px; margin: auto;"></div>

<script type="text/javascript">

    $(document).ready(function () {

        //Prepare jtable plugin
        $('#StudentTable').jtable({
            title: 'The Student List',
            actions: {
                listAction: '/jTableTest/StudentList',
                deleteAction: '/jTableTest/DeleteStudent',
                updateAction: '/jTableTest/UpdateStudent',
                createAction: '/jTableTest/CreateStudent'
            },
            fields: {
                id: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                name: {
                    title: 'Name',
                    width: '15%'
                },
                birthdate: {
                    title: 'Birth Date',
                    list: true,
                    width: '18%',
                    type: 'date',
                    displayFormat: 'yy-mm-dd'
                }
            }
        });

        //Load person list from server
        $('#StudentTable').jtable('load');

    });

</script> 
```

**删除操作如下：**

```
[HttpPost]
        public JsonResult DeleteStudent(int id)
        {
            try
            {
                //_personRepository.DeletePerson(personId);
                student student = db.students.Find(id);
                db.students.Remove(student);
                db.SaveChanges();
                return Json(new { Result = "OK" });
            }
            catch (Exception ex)
            {
                return Json(new { Result = "ERROR", Message = ex.Message });
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T19:31:41.433

你好，我在添加更新和删除时遇到了同样的问题。我最终做的是利用添加、更新和删除事件并手动重新加载表。有关详细信息，请参阅文档中的[事件](http://www.jtable.org/ApiReference#Events)。

```
 <div id="StudentTable" style="width: 580px; margin: auto;"></div>
<script type="text/javascript">

    $(document).ready(function () {

        //Prepare jtable plugin
        $('#StudentTable').jtable({
            title: 'The Student List',
            actions: {
                listAction: '/jTableTest/StudentList',
                deleteAction: '/jTableTest/DeleteStudent',
                updateAction: '/jTableTest/UpdateStudent',
                createAction: '/jTableTest/CreateStudent'
            },
            //What I added
            recordUpdated:function(event, data){
                $('#StudentTable').jtable('reload');
            },
            recordAdded: function (event, data) {
                $('#StudentTable').jtable('reload');
            },
            recordDeleted: function (event, data) {
                $('#StudentTable').jtable('reload');
            },

            fields: {
                id: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                name: {
                    title: 'Name',
                    width: '15%'
                },
                birthdate: {
                    title: 'Birth Date',
                    list: true,
                    width: '18%',
                    type: 'date',
                    displayFormat: 'yy-mm-dd'
                }
            }
        });

        //Load person list from server
        $('#StudentTable').jtable('load');

    });

</script>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:08:36.577

@Md。Arafat Al Mahmud
尝试更改如下代码：

```
 //ViewBag.ClientName is set to a random name in the Index action.
var myClientName = '@ViewBag.ClientName';

//Initialize jTable
$('#StudentTableContainer').jtable({
    title: 'Student List',
    actions: {
        listAction: '@Url.Action("StudentList")?clientName=' + myClientName,
        deleteAction: '@Url.Action("DeleteStudent")?clientName=' + myClientName,
        updateAction: '@Url.Action("UpdateStudent")?clientName=' + myClientName,
        createAction: '@Url.Action("CreateStudent")?clientName=' + myClientName
    },
   ......
   ...... 
```

删除功能：

```
//Define a function to get 'record deleted' events
    realTimeHub.RecordDeleted = function (clientName, recordId) {
        if (clientName != myClientName) {
            $('#StudentTable').jtable('deleteRecord', {
                key: recordId,
                clientOnly: true
            });
        }

        writeEvent(clientName + ' has <b>removed</b> 
        a record with id = ' + recordId, 'event-deleted');
    };
   -----
   ----- 
```

控制器中的删除功能：

```
[HttpPost]
public JsonResult DeleteStudent(int studentId)
{
    try
    {
        //Delete from database
        _repository.StudentRepository.DeleteStudent(studentId);

        //Inform all connected clients
        var clientName = Request["clientName"];
        Task.Factory.StartNew(
            () =>
            {
                var clients = Hub.GetClients<RealTimeJTableDemoHub>();
                clients.RecordDeleted(clientName, studentId);
            });

        //Return result to current (caller) client
        return Json(new { Result = "OK" });
    }
    catch (Exception ex)
    {
        return Json(new { Result = "ERROR", Message = ex.Message });
    }
}
------
------ 
```

代码项目示例可以帮助您[Real-time-Asynchronous-Web-Pages-using-jTable-Sign](http://www.codeproject.com/Articles/315938/Real-time-Asynchronous-Web-Pages-using-jTable-Sign)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T04:48:36.120

我看不到您在 javascript 中的删除代码在哪里。但我确实建议这个

```
$('#YourJqueryDialogbox').dialog('destroy');  // use this code in delete click event, once the delete action result returned. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:38:17.167

我有同样的问题。

选项 animationsEnabled : false 是我的解决方案。

```
$('#...').jtable({
              title: 'Bestellingen',
              paging: true, //Enable paging
              sorting: true, //Enable sorting
              defaultSorting: 'date ASC',
              pageSize : 10,
              animationsEnabled : false,

              actions: {
                  listAction:  'content/.../data.php',
                  deleteAction: 'content/.../delete.php',
                  updateAction: 'content/.../save.php',
                  createAction: 'content/.../save.php'
              },... 
```

您的 deleteSomething.php 文件也需要使用 json-array {"Result": "OK"} 回复

```
echo json_encode(array("Result" => "OK" )); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-19T19:44:08.450

当我的创建记录消息框根本没有消失时，我遇到了同样的问题。我通过在 Json 中添加“记录”属性并将其值设置为最近创建的记录来解决该问题。

所以我建议你返回你的 Json 对象，比如 return Json(new { Result = "OK", Record = deletedObject });

希望它会工作

乌斯曼

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-06T20:40:04.967

好吧，如果您使用 MVC，请尝试在删除函数中返回 ActionResult 而不是 JsonResult，其他一切对我来说都很好。

```
public ActionResult DeleteStudent(int studentId) 
```

# clojure - leiningen - clojurescript 相当于 lein run？

> ID：14888306
> 
> 赞同：3
> 
> 时间：2013-02-15T04:36:14.180
> 
> 标签：clojure, leiningen, clojurescript

在clojure中，我可以运行：

```
lein run -m my.namespace # run the -main function of a namespace 
```

这将从命令行运行我的代码。

Clojurescipt 是否有等效的方法在 node.js 中运行生成的代码？（在莱宁根）

（我已经阅读了启动 Clojurescript REPL 的文档，用于在 node.js 上运行并将回复集成到我的应用程序中。我只是在寻找一个单行命令行解决方案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:27:49.177

根据您的目标，您可能会发现使用“cljsbuild test”很有用。您可以在使用 node.js/v8/phantomjs 的 project.clj 上指定测试上下文。

例子：

```
:cljsbuild {
    :test-commands {
        "v8" ["v8"
              "target/generated-sources/private/js/client.js"
              "tests/v8-test-runner.js"]}} 
```

v8-test-runner.js：

```
path.to.your.entrypoint.start() 
```

您也可以让 'lein cljsbuild auto' 运行并直接启动 javascript 应用程序：

```
v8 target/generated-sources/private/js/client.js tests/v8-test-wrapper.js 
```

如果您使用 clojurescript 构建 node.js 应用程序，这可能是最佳选择。您无需担心 javascript 中的类路径（这是 lein run 提供的主要功能），您可以直接从组装好的 javascript 文件中运行您的应用程序。

# ubuntu - Yii - 无法登录

> ID：14888307
> 
> 赞同：0
> 
> 时间：2013-02-15T04:36:21.257
> 
> 标签：ubuntu, nginx, yii

对不起，这是一个非常新手的问题。我正在关注官方网站上的博客教程，我的代码就像[这个片段](http://paste.ubuntu.com/1655230/)一样。在我进行更改后，点击登录只会进入一个空白页面。其他页面仍然可以访问，但它们仍然显示我没有登录。感谢任何输入:)

[login.php 片段](http://fpaste.org/Bujn/)和[siteController.php 片段](http://fpaste.org/1Dyv/)

安吉拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:47:07.490

可能有很多因素，所以让我们先试试这些：

1)`'enableClientValidation'=>false,`在 login.php 中设置

2) 在站点控制器的第 81 行添加：

```
Yii::app()->user->setReturnUrl(Yii::app()->request->urlReferrer); 
```

# javascript - 如何在 Backbone.js 的集合中使用 url

> ID：14888314
> 
> 赞同：-3
> 
> 时间：2013-02-15T04:37:11.473
> 
> 标签：javascript, backbone.js

无法通过集合中的 url 函数访问我在 js 文件夹中的 xml 文件。如何链接到此 url 以检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:42:07.357

设置好文件的路径后，您必须在集合上调用 fetch。像这样：

```
var Things = backbone.Collection.extend({ url: "path/to/my/file" });
var things = new Things();
things.fetch().done(function() {
  console.log( things.toJSON() );
}); 
```

虽然，这仅适用于 JSON 数据格式。对于 XML，您需要重写[集合的`parse`方法](http://documentcloud.github.com/backbone/#Collection-parse)以从 XML 返回一个 javascript 对象。

# winforms - 获取/传递多维数组的函数

> ID：14888316
> 
> 赞同：0
> 
> 时间：2013-02-15T04:37:13.640
> 
> 标签：winforms, function, c++-cli

我正在使用 Visual Studio 2010 做一个小型 C++ Windows 窗体项目。我的代码变得太大，所以我决定在 header.h 文件中包含一些函数。我的问题是我不知道如何制作一个函数来接收/返回多维数组。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:18:44.987

对于托管数组，您可以将维度指定为**数组**关键字的第二个模板参数：

```
void TakesArray(array<Object^, 2>^ a)
{
    ...
}

array<Object^, 2>^ ReturnsArray()
{
} 
```

对于原始的非托管数组，它有点复杂。取一个数组如下所示：

```
void TakesArray(SomeType a[5][10])
{
} 
```

但您需要注意，这实际上相当于：

```
void TakesArray(SomeType (*a)[10])
{
} 
```

这意味着它确实需要*一个指向 10 个元素的数组的指针*。这也意味着第二个维度（以及更高维度，如果添加更多）的大小是类型的一部分，但第一个维度的大小不是，这反过来意味着您可以用二维来调用它数组，其第二维的大小必须为 10，并且其第一维可以是任意大小。

返回一个原始的非托管数组更奇怪：

```
void (*ReturnsArray())[10]
{
} 
```

无论如何，很少需要使用这种语法（这就是它不常见的原因）。更好的方法是使用数组类，例如 std::vector：

```
void TakesArray(const vector<vector<SomeTipe>>& v)
{
}

vector<vector<SomeType>> ReturnsArray()
{
} 
```

从技术上讲，这不是多维数组，而是数组数组，但您可以像使用多维数组一样使用它。

# android - 无法将值从 sqlite 数据库检索到 ListView

> ID：14888317
> 
> 赞同：1
> 
> 时间：2013-02-15T04:37:17.117
> 
> 标签：android, database, listview, sqlite, android-listview

我想将数据库中的数据检索到我的 ListView 中，但无法这样做。我的对应activity_view_list.xml 布局的java 文件名是ViewList.java。在这种情况下，请帮助我。下面是我的代码

DBHelper.java

```
package com.example.shoppinglist;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBHelper extends SQLiteOpenHelper
{

    private static final String DATABASE_NAME = "ShoppingDatabase";
    private static final int DATABASE_VERSION = 1;
    private static final String DATBASE_CREATE = "CREATE TABLE ShoppingList(Id integer primary key autoincrement not null," +
            "List_name varchar(255) default null,List_status varchar(255) default 'OPEN'," +
            "date datetime)";
    public DBHelper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub

    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(DATBASE_CREATE);

    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        Log.w(DBHelper.class.getName(), 
                "Upgrading database from version " + oldVersion + " to "
    + newVersion + ", which will delete the old data.");
    db.execSQL("DROP TABLE IF EXISTS ShoppingList");
    //Method is called during creation of new database
    onCreate(db);
    } 
} 
```

DBAdpater.java

```
package com.example.shoppinglist;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DBAdapter 
{
    private Context ctxt;
    private SQLiteDatabase db;
    private DBHelper dbHelper;
    public static final String KEY_ROWID = "Id";
    public static final String KEY_NAME = "List_name";
    public static final String KEY_STATUS = "List_status";
    public static final String KEY_DATE = "date";
    //public static final String KEY_TOTAL_ITEMS = "Total_items";
    private static final String DATABASE_TABLE = "ShoppingList";

    public DBAdapter(Context ctxt)
    {
        this.ctxt = ctxt;
    }

    //Open database
    public DBAdapter open() throws SQLException
    {
        dbHelper = new DBHelper(ctxt, null, null, 0);
        db = dbHelper.getWritableDatabase();
        return this;
    }

    //Close database
    public void close()
    {
        dbHelper.close();
    }

    //Create a new item
    public long insertItem(String list_name , String list_status, String date)
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, list_name );
        initialValues.put(KEY_STATUS, list_status);
        initialValues.put(KEY_DATE, date);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //update a item
    /*public boolean updateItem(long rowId, String list_name, 
        String list_status, String date)
    {
        ContentValues updateValues = new ContentValues();
        updateValues.put(KEY_NAME, list_name);
        updateValues.put(KEY_STATUS, list_status);
        updateValues.put(KEY_DATE, date);
        return db.update(DATABASE_TABLE, updateValues, KEY_ROWID + "=" + rowId,
                null) > 0;      
    }*/

    //delete a item
    public boolean deleteItem(long rowId)
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    //return cursor over the list of all items in the database
    public Cursor fetchAllItems(){
        return db.query(DATABASE_TABLE, new String[]{KEY_ROWID, KEY_NAME, 
                                KEY_STATUS, KEY_DATE}, 
                       null, null, null, null, null);
    }

    //return a cursor positioned at the defined item
    public Cursor fetchItem(long rowId) throws SQLException{
        Cursor mCursor = db.query(true, DATABASE_TABLE, 
                new String[]{KEY_ROWID, KEY_NAME, KEY_STATUS,
        KEY_DATE}, KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if(mCursor != null){
            mCursor.moveToFirst();
        }
        return mCursor;
    }   
} 
```

activity_view_list.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ViewList" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView>

</RelativeLayout> 
```

视图列表.java

```
package com.example.shoppinglist;
import android.os.Build;
import android.os.Bundle;
import android.annotation.TargetApi;
import android.app.ListActivity;
import android.database.Cursor;
import android.view.Menu;
import android.view.TextureView;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class ViewList extends ListActivity {

    private DBAdapter dbadpater;
    protected ListAdapter adapter;
    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_view_list);
        ListView listview = (ListView)findViewById(R.id.listView1);
        dbadpater = new DBAdapter(ViewList.this);
        dbadpater.open();
        Cursor values = dbadpater.fetchAllItems();
        adapter = new SimpleCursorAdapter(this, R.layout.list_example, values, new String[] {"Id","List_name"}, new int [] {R.id.txtid,R.id.txtname});
        setListAdapter(adapter);
        listview.setOnItemClickListener(new OnItemClickListener() {

            @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), ((TextureView)view).getTextAlignment(),Toast.LENGTH_LONG).show();
            }
        });
        dbadpater.close();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_view_list, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:20:44.360

通过使用从游标对象获取数据

```
if (cursor.moveToFirst()) {
        do {
        // looping through all rows and here we adding to list
        } while (cursor.moveToNext());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:23:17.823

阅读[Loaders 教程](http://developer.android.com/guide/components/loaders.html)并使用 a`SimpleCursorAdapter`来填充您的列表`Loaders`。这是非常简单和有效的。装载机自己处理打开、关闭和刷新`Cursor`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:32:51.163

您忘记将适配器设置为您的列表视图。尝试如下：

> ```
> listView.setAdapter(adapter); 
> ```

# c# - Caliburn.Micro 根据用户输入动态更改 IOC 绑定

> ID：14888318
> 
> 赞同：2
> 
> 时间：2013-02-15T04:37:25.293
> 
> 标签：c#, mvvm, dependency-injection, caliburn.micro

我有一种感觉，这个问题之前已经回答过好几次了，我只是没有经验知道如何寻找答案。所以，我提前为这个愚蠢的问题道歉。

在这里，我正在使用 Caliburn.Micro 并且正在考虑使用某种 IoC 容器来获得依赖注入的好处。我认为唯一目的是更改应用程序的配置设置。如果用户保存了任何更改，我使用 EventAggregator 将设置发布到配置文件管理器。配置文件管理器进行更改，将它们保存到文件中，然后通过事件聚合器发布所有设置。一种这样的设置是串行端口连接到无线电的 ComPort 和波特率。

现在进行依赖注入。据我所知，您在 Bootstrapper 中设置绑定，并在应用程序启动时对其进行配置。如何动态更改此设置，以便在请求时始终返回 RadioReader(newComPort, newBaudRate)。此外，我需要为用户提供通过 UDP 端口与无线电通信的选项。因此，我想制作一个 IRadioReader 接口，以允许用户动态更改传输以及设置。是否可以以这种方式使用 IoC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:48:06.843

使用 IOC 时，您通常会在应用程序根目录中配置所有依赖项，这些依赖项在应用程序的整个生命周期内都不会改变。

对于任何可配置/可更改的依赖项，您应该依赖一个抽象工厂，该工厂将完成创建具有可配置行为的初始依赖项的工作。

请参阅[此处](https://stackoverflow.com/questions/1993397/)以获得对该模式的一个很好的概述

# html - 无论如何，引导导航栏都不会居中

> ID：14888324
> 
> 赞同：2
> 
> 时间：2013-02-15T04:38:28.693
> 
> 标签：html, css, twitter-bootstrap

我一直在尝试使用 Bootstrap 将我的导航栏 li 居中在导航栏的中心。我曾尝试使用来自类似问题的信息，例如[**这个**](https://stackoverflow.com/questions/7165423/twitter-bootstrap-center-pills)、[**这个**](https://stackoverflow.com/questions/10128812/center-navbar-in-twitter-bootstrap-2-0)和[**这个**](https://stackoverflow.com/questions/10568103/modify-twitter-bootstrap-navbar)。我的导航不使用药丸或标签，但我希望我可以相应地编辑我的代码。 [**我的网站**](http://homegrowndevelopment.com/)使用粘性导航，这可能是我页面上最复杂的东西。我使用上传的相同代码创建了一个 JSFiddle，但由于某种原因，JSFiddle 代码正确对齐了所有内容，而在我的页面上，所有链接都向右偏移了 10 个左右像素。我也尝试将所有边距和填充设置为 0，但仍然没有运气。

有人可以帮帮我吗，这让我很烦，我要把我的电脑从屋顶上扔掉！如果你能解决我的问题，我会给你烤一些饼干。

谢谢，

布赖恩

PS对不起所有的链接：-/

这是我的[JSFiddle](http://jsfiddle.net/CcRC5/1/)

这是我的 HTML：

```
<div id="nav-wrapper">
<div id="nav" class="navbar navbar-inverse affix-top center" data-spy="affix">
  <div class="navbar-inner pull-center" data-spy="affix-top">
    <div class="container">

      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse">
        <ul class="nav">
            <li><a href="#home">Home</a></li>
            <li><a href="#service-top">Services</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul><!--/.nav-->
      </div><!--/.nav-collapse collapse pull-right-->
    </div><!--/.container-->
  </div><!--/.navbar-inner-->
</div><!--/#nav /.navbar navbar-inverse-->
</div><!--/#nav-wrapper--> 
```

这是我的CSS混乱：

```
.navbar {
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    padding:0;
    z-index:999;
    margin-bottom:0;
}
.navbar.navbar-inverse .navbar-inner {
    background: #390 url(../img/green-bg.png) repeat;
    border:none;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    border-radius: 0;
    margin-bottom:0;
}
.navbar .nav, .navbar .nav > li {
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
    padding:0 10px;
    margin:0 auto;
}
.navbar .nav > li a {
    color:white;
    background:rgba(0, 0, 0, 0.2);
    text-shadow:none;
    font-size:1.5em;
    font-family: marvel, serif;
    padding:.5em 1em;
    margin:.5em 1em;
    min-width:90px;
}
.navbar .nav > .active a:hover, .navbar .nav > li a:hover, .navbar .nav > .active a {
    color:#FFF;
    background: #390 url(../img/green-bg.png) repeat;
    text-shadow:none;
    font-size:1.5em;
    font-family: marvel, serif;
    padding:.5em 1em;
    margin:.5em 1em;
    -webkit-box-shadow: inset 0 0 10px #000;
    -moz-box-shadow: inset 0 0 10px #000;
    box-shadow: inset 0 0 10px #000;
}
.navbar .nav > li {
    padding:1em;
    margin:0;
    width:10em;
}
#nav.affix, #nav.affix-bottom {
    position: fixed;
    top: 0;
    width: 100%;
    -webkit-box-shadow: 0px 2px 4px #000;
    -moz-box-shadow: 0px 2px 4px #000;
    box-shadow: 0px 2px 4px #000;
}
#nav {
    position:relative;
    z-index:999;
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
}
.center.navbar .nav, .center.navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
}
.center .navbar-inner {
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:03:03.023

尝试改变

```
.navbar .nav, .navbar .nav > li {
    float:center;
    ... 
```

到

```
.navbar .nav, .navbar .nav > li {
    text-align:center;
    ... 
```

据我所知，没有浮动中心之类的东西。只有左、右、无和继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:17:48.987

`.navbar .nav > .active a:hover, .navbar .nav > li a:hover, .navbar .nav > .active a`并且`.navbar .nav > li a`两者都有一个规则`margin: 0.5em 1em;`。将其更改为`margin: 0.5em 0;`.

`.navbar .nav, .navbar .nav > li`有一个规则`float: center;`。去掉它。

添加此规则：

```
.navbar .nav {
    float: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:13:28.773

尝试在 nav 之后将此类添加到 ul

```
.nav-center {
    float: none;
} 
```

这将覆盖来自 bootstrap.css 的 float: left。

# xdebug - XDebug 在 PHPStorm 中停止工作

> ID：14888326
> 
> 赞同：14
> 
> 时间：2013-02-15T04:38:34.843
> 
> 标签：xdebug, phpstorm

几个小时以来，我一直在反对这一点。

在几个星期没有使用 PHPStorm 之后，我回来在 PHPStorm 中做一些工作，并且由于某种原因，调试不再起作用。它曾经工作，但现在它没有，我不知道发生了什么。

我在 Windows 上运行，使用 IIS，PHP 版本 5.3.8。XDebug 已安装，我已按照常规说明在 PHP.ini 中设置了配置。

当我运行 phpinfo() 时，一切看起来都很正常（即 XDebug 在那里）。

我重新检查了各种设置，下载了一个比我使用的版本稍新的 XDebug（Xdebug v2.2.1），但似乎没有任何东西可以让它生效。

有人可以给我一些关于我接下来可以看什么的线索吗？

**更新：**

我又花了几个小时来反对这一点，但似乎并没有走得更远。根据 phpinfo() 安装和加载 XDebug。我打开了日志记录，但除了 XDebug 确实在连接之外，它并没有真正告诉我太多...

```
Log opened at 2013-02-17 04:13:07
I: Connecting to configured address/port: localhost:9000.
I: Connected to client. :-)
-> <init xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" fileuri="file:///C:/web/dbg/index.php" language="PHP" protocol_version="1.0" appid="6912" idekey="PHPSTORM"><engine version="2.2.1"><![CDATA[Xdebug]]></engine><author><![CDATA[Derick Rethans]]></author><url><![CDATA[http://xdebug.org]]></url><copyright><![CDATA[Copyright (c) 2002-2012 by Derick Rethans]]></copyright></init>

-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" status="stopping" reason="ok"></response>

Log closed at 2013-02-17 04:13:07 
```

所以似乎问题出在 PHPStorm 方面，但我看不到在哪里。我尝试创建一个非常简单的项目，但也无法对其进行调试。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-17T05:22:00.717

当您花费数小时与某件事搏斗，然后在绝望中尝试一些简单的事情时，您不讨厌它吗？

我决定尝试一个不同的端口，9001 而不是默认的 9000，它成功了！

我现在意识到我最近安装了 Twonky（用于将视频流式传输到我的电视），当我检查设置时，它是……端口 9000。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-08T17:12:44.520

今天下午有同样的问题 - 发现这个问题以及其他几个 SO 问题，所以我想我会发布为我修复它的解决方案。

我缺少到文件系统的映射。这很奇怪，因为我已经看到 PHPStorm 在他们之前失踪时提示我。

![在此处输入图像描述](../Images/54edc118cd7510ea1a283caa1423dc00.png)

希望这对将来的人有所帮助:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-04T09:57:55.327

更新到 El Capitan 后遇到了同样的问题。我使用的第一个提示是运行 -> Web 服务器调试验证。PHPStorm 的这个工具给了我一个关于`xdebug.remote_host`我正在使用 v-hosts 的提示，它抱怨`localhost`那里的值不正确。所以我更新了 xdebug 设置，[`xdebug.remote_connect_back=On`](http://xdebug.org/docs/all_settings#remote_connect_back)它工作了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-06T16:24:09.410

显然，如果您尝试在较新版本的 xdebug 上进行调试，则必须将此行包含到您的 xdebug-php.ini 设置中 `xdebug.mode=debug`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-17T12:05:06.537

我有同样的问题，我通过删除所有手表来解决它，然后重新启动 phpStorm

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-08T23:10:10.007

较新版本的 PHPStorm 具有调试器验证。PHPStorm 官方博客对此功能[有一篇](http://blog.jetbrains.com/phpstorm/2013/08/debugger-configuration-validation-with-phpstorm/)文章，可能会帮助您弄清楚。

当我设置一个配置了 php-fpm 的盒子时，我遇到的一个问题是 php-fpm 默认也在端口 9000 上运行，所以我不得不将 php.ini 中配置的端口和 PHPStorm 的首选项更改为 9001 之类的东西。

对于它的价值，我当前的 xdebug 的 php.ini 设置：

```
[xdebug]
zend_extension="/the/path/to/xdebug.so"
xdebug.file_link_format="txmt://open?url=file://%f&line=%l"
xdebug.remote_enable=1
xdebug.remote_autostart=On
xdebug.remote_port=9001
xdebug.profiler_enable_trigger=1
xdebug.max_nesting_level=250 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-17T21:54:16.087

我有同样的问题！我终于意识到我所有的配置都是正确的，但是在浏览器方面，我没有启用 Chrome 浏览器的调试。每个浏览器都有自己的方式来启用调试开始工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-25T15:36:29.410

我遇到了同样的问题，我尝试了在 SO 和其他站点中可以找到的所有解决方案（检查 phpStorm 和 Xdebug 是否在相同的端口上，检查我在文件系统上是否有服务器映射，重新安装 Xdebug 等。 ) 但最终问题在于我们在内部服务器上运行该站点，并且 IT 人员将我的计算机的 IP 地址更改为从可连接到该服务器的允许地址中过滤掉的地址。这就是 phpStorm 开始忽略 Xdebug 断点的原因。

希望这将有助于将来的某人并为他节省很多时间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-29T04:00:15.623

我自己也解决了，因为 PHP-Storm 和 PHP-FPM 正在监听同一个端口......只需杀死所有 php-fpm 端口。 [![在此处输入图像描述](../Images/d516acde8ebaf5d321d9c951b59a7f34.png)](https://i.stack.imgur.com/wmDwH.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-14T00:51:08.400

有同样的问题。对我来说，我使用端口 9010 进行 xdebug。问题原来是我最近为新鼠标安装的罗技 GHub 软件在端口 9010 上监听！您可以使用它来查看 Mac 上给定端口上正在侦听的内容：

```
lsof -nP -iTCP:9010 | grep LISTEN 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-08-19T08:57:26.587

发现如果 xdebug 日志文件不可写，则它可能无法正常工作。总是最好设置 xdebug.remote_log 并使其可写。

# android - DialogFragment 中的 Date + Time Picker 实现 OnDateChangedListener 和 OnTimeChangedListener

> ID：14888328
> 
> 赞同：2
> 
> 时间：2013-02-15T04:38:54.890
> 
> 标签：android

我似乎无法设置我的 DateTimeDialogFragment 因为它一直在我放置的部分崩溃：

```
datePicker = (DatePicker) getView().findViewById(R.id.DatePicker); 
```

错误日志：

```
02-14 21:38:43.262: E/AndroidRuntime(2435): FATAL EXCEPTION: main
02-14 21:38:43.262: E/AndroidRuntime(2435): java.lang.NullPointerException
02-14 21:38:43.262: E/AndroidRuntime(2435):     at com.test.DateTimeDialogFragment.onActivityCreated(DateTimeDialogFragment.java:98)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:847)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.app.BackStackRecord.run(BackStackRecord.java:622)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.os.Handler.handleCallback(Handler.java:605)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.os.Looper.loop(Looper.java:137)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at java.lang.reflect.Method.invoke(Method.java:511)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-14 21:38:43.262: E/AndroidRuntime(2435):     at dalvik.system.NativeStart.main(Native Method) 
```

这是完整的代码：

```
public class DateTimeDialogFragment extends DialogFragment implements
        OnDateChangedListener, OnTimeChangedListener {
    // Define constants for date-time picker.
    public final int DATE_PICKER = 1;
    public final int TIME_PICKER = 2;
    public final int DATE_TIME_PICKER = 3;

    // DatePicker reference
    private DatePicker datePicker;

    // TimePicker reference
    private TimePicker timePicker;

    // Calendar reference
    private Calendar mCalendar;

    // Define activity
    private Activity activity;

    // Define Dialog type
    private int intDialogType;

    // Constructor start
    public DateTimeDialogFragment(Activity activity) {
        this.activity = activity;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(activity);

        // Get the layout inflater
        LayoutInflater inflater = activity.getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        builder.setView(inflater.inflate(R.layout.date_time_dialog, null));

        // Set title of dialog
        builder.setMessage("Set Date")
                // Set Ok button
                .setPositiveButton("Set",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                // User ok the dialog
                            }
                        })
                // Set Cancel button
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                // User cancelled the dialog
                            }
                        })
                // Set Neutral button (reset Time / Date)
                .setNeutralButton("Reset",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog, int id) {
                                // User reset the dialog
                                // reset();
                            }
                        });

        // Create the AlertDialog object and return it
        return builder.create();
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
        // Grab a Calendar instance
        mCalendar = Calendar.getInstance();

        // Init date picker
        datePicker = (DatePicker) getView().findViewById(R.id.DatePicker);
        datePicker.init(mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH), this);

        // Init time picker
        timePicker = (TimePicker) getView().findViewById(R.id.TimePicker);
        timePicker.setOnTimeChangedListener(this);
    }

    public void setIntDialogType(int intDialogType) {
        this.intDialogType = intDialogType;
    }

    // Convenience wrapper for internal Calendar instance
    public int get(final int field) {
        return mCalendar.get(field);
    }

    // Reset DatePicker, TimePicker and internal Calendar instance
    public void reset() {
        final Calendar c = Calendar.getInstance();
        updateDate(c.get(Calendar.YEAR), c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));
        updateTime(c.get(Calendar.HOUR_OF_DAY), c.get(Calendar.MINUTE));
    }

    // Convenience wrapper for internal Calendar instance
    public long getDateTimeMillis() {
        return mCalendar.getTimeInMillis();
    }

    // Convenience wrapper for internal TimePicker instance
    public void setIs24HourView(boolean is24HourView) {
        timePicker.setIs24HourView(is24HourView);
    }

    // Convenience wrapper for internal TimePicker instance
    public boolean is24HourView() {
        return timePicker.is24HourView();
    }

    // Convenience wrapper for internal DatePicker instance
    public void setCalendarViewShown(boolean calendarView) {
        datePicker.setCalendarViewShown(calendarView);
    }

    // Convenience wrapper for internal DatePicker instance
    public boolean CalendarViewShown() {
        return datePicker.getCalendarViewShown();
    }

    // Convenience wrapper for internal DatePicker instance
    public void updateDate(int year, int monthOfYear, int dayOfMonth) {
        datePicker.updateDate(year, monthOfYear, dayOfMonth);
    }

    // Convenience wrapper for internal TimePicker instance
    public void updateTime(int currentHour, int currentMinute) {
        timePicker.setCurrentHour(currentHour);
        timePicker.setCurrentMinute(currentMinute);
    }

    public String getDateTime() {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.US);
        return sdf.format(mCalendar.getTime());
    }

    // Called every time the user changes DatePicker values
    @Override
    public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        // Update the internal Calendar instance
        mCalendar.set(year, monthOfYear, dayOfMonth, mCalendar.get(Calendar.HOUR_OF_DAY), mCalendar.get(Calendar.MINUTE));
    }

    // Called every time the user changes TimePicker values
    @Override
    public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
        // Update the internal Calendar instance
        mCalendar.set(mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH), hourOfDay, minute);
    } 
```

这是 date_time_dialog.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/DateTimePicker"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="5dip" >

    <DatePicker
        android:id="@+id/DatePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginRight="40dp" />

    <TimePicker
        android:id="@+id/TimePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T05:39:55.437

我要感谢大家帮助我并带领我朝着正确的方向前进。我现在对Android有了更好的了解。这是完整的工人阶级：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Locale;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.app.DialogFragment;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.DatePicker;
import android.widget.DatePicker.OnDateChangedListener;
import android.widget.TimePicker;
import android.widget.TimePicker.OnTimeChangedListener;

public class DateTimeDialogFragment extends DialogFragment implements OnDateChangedListener, OnTimeChangedListener {
    // Define constants for date-time picker.
    public final static int DATE_PICKER = 1;
    public final static int TIME_PICKER = 2;
    public final static int DATE_TIME_PICKER = 3;

    // DatePicker reference
    private DatePicker datePicker;

    // TimePicker reference
    private TimePicker timePicker;

    // Calendar reference
    private Calendar mCalendar;

    // Define activity
    private Activity activity;

    // Define Dialog type
    private int DialogType;

    // Define Dialog view
    private View mView;

    // Constructor start
    public DateTimeDialogFragment(Activity activity) {
        this(activity, DATE_TIME_PICKER);
    }

    public DateTimeDialogFragment(Activity activity, int DialogType) {
        this.activity = activity;
        this.DialogType = DialogType;

        // Inflate layout for the view
        // Pass null as the parent view because its going in the dialog layout
        LayoutInflater inflater = activity.getLayoutInflater();
        mView = inflater.inflate(R.layout.date_time_dialog, null);  

        // Grab a Calendar instance
        mCalendar = Calendar.getInstance();

        // Init date picker
        datePicker = (DatePicker) mView.findViewById(R.id.DatePicker);
        datePicker.init(mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH), this);

        // Init time picker
        timePicker = (TimePicker) mView.findViewById(R.id.TimePicker);

        // Set default Calendar and Time Style
        setIs24HourView(true);
        setCalendarViewShown(false);

        switch (DialogType) {
        case DATE_PICKER:
            timePicker.setVisibility(View.GONE);
            break;
        case TIME_PICKER:
            datePicker.setVisibility(View.GONE);
            break;
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        // Use the Builder class for convenient dialog construction
        Builder builder = new AlertDialog.Builder(activity);

        // Set the layout for the dialog
        builder.setView(mView);

        // Set title of dialog
        builder.setMessage("Set Date")
                // Set Ok button
                .setPositiveButton("Set",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                // User ok the dialog
                            }
                        })
                // Set Cancel button
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                // User cancelled the dialog
                                DateTimeDialogFragment.this.getDialog().cancel();
                            }
                        }); 

        // Create the AlertDialog object and return it
        return builder.create();
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        timePicker.setOnTimeChangedListener(this);
    }

    // Convenience wrapper for internal Calendar instance
    public int get(final int field) {
        return mCalendar.get(field);
    }

    // Convenience wrapper for internal Calendar instance
    public long getDateTimeMillis() {
        return mCalendar.getTimeInMillis();
    }

    // Convenience wrapper for internal TimePicker instance
    public void setIs24HourView(boolean is24HourView) {
        timePicker.setIs24HourView(is24HourView);
    }

    // Convenience wrapper for internal TimePicker instance
    public boolean is24HourView() {
        return timePicker.is24HourView();
    }

    // Convenience wrapper for internal DatePicker instance
    public void setCalendarViewShown(boolean calendarView) {
        datePicker.setCalendarViewShown(calendarView);
    }

    // Convenience wrapper for internal DatePicker instance
    public boolean CalendarViewShown() {
        return datePicker.getCalendarViewShown();
    }

    // Convenience wrapper for internal DatePicker instance
    public void updateDate(int year, int monthOfYear, int dayOfMonth) {
        datePicker.updateDate(year, monthOfYear, dayOfMonth);
    }

    // Convenience wrapper for internal TimePicker instance
    public void updateTime(int currentHour, int currentMinute) {
        timePicker.setCurrentHour(currentHour);
        timePicker.setCurrentMinute(currentMinute);
    }

    public String getDateTime() {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.US);
        return sdf.format(mCalendar.getTime());
    }

    // Called every time the user changes DatePicker values
    @Override
    public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        // Update the internal Calendar instance
        mCalendar.set(year, monthOfYear, dayOfMonth, mCalendar.get(Calendar.HOUR_OF_DAY), mCalendar.get(Calendar.MINUTE));
    }

    // Called every time the user changes TimePicker values
    @Override
    public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
        // Update the internal Calendar instance
        mCalendar.set(mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH), hourOfDay, minute);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T05:46:38.467

编辑：

嗨，我使用过您的相同代码，并且可以打开日期和时间选择器对话框...您错过的地方是您没有夸大布局以获得视图

尝试像这样更改您的 onActivityCreate

```
public void onActivityCreated(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onActivityCreated(savedInstanceState);
// Grab a Calendar instance
mCalendar = Calendar.getInstance();
LayoutInflater inflater = activity.getLayoutInflater();

//Inflate and set the layout for the dialog
//Pass null as the parent view because its going in the dialog layout
View v=inflater.inflate(R.layout.date_time_dialog, null);

// Init date picker
datePicker = (DatePicker)v.findViewById(R.id.DatePicker);
datePicker.init(mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH), this);

// Init time picker
timePicker = (TimePicker) v.findViewById(R.id.TimePicker);
timePicker.setOnTimeChangedListener(this);
} 
```

这将解决您的问题....我很自信，因为使用相同的代码我已经成功打开了对话框。

* * *

嗨，请参阅有关[OnActivityCreate的文档](http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated%28android.os.Bundle%29)

根据文档， **这在 onCreateView(LayoutInflater, ViewGroup, Bundle) 之后和 onViewStateRestored(Bundle) 之前调用。**你需要使用 onCreateView 来获取 datePicker = (DatePicker) getView().findViewById(R.id.DatePicker); 这个...我不确定，但我已经用这样的对话框实现了 DatePicker，它可能会有所帮助

```
public class DateDialogFragment extends DialogFragment implements
            OnDateSetListener {
        boolean fired = false;

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            Calendar cal = Calendar.getInstance();
            int year = cal.get(Calendar.YEAR);
            int month = cal.get(Calendar.MONTH);
            int day = cal.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(getActivity(), this, year, month, day);
        }

        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {

            if (fired == true) {
                return;
            } else {
                // first time fired
                fired = true;
            }
            String date = checkDigit(monthOfYear + 1) + "/"
                    + checkDigit(dayOfMonth) + "/" + year;
            strDate = date;
            getAppointments(date);
        }
    } 
```

格式化结果日期

```
 public String checkDigit(int number) {
            return number <= 9 ? "0" + number : String.valueOf(number);
        } 
```

并在你的Activity中这样使用（推荐使用FragmentActivity）

```
 DateDialogFragment datepicker = new DateDialogFragment();
                datepicker.show(getSupportFragmentManager(), "DatePicker"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:18:30.503

你可以试试[这个](http://android-developers.blogspot.gr/2012/05/using-dialogfragments.html)不使用 `AlertDialog.Builder`的实现，你可以参考`view`. 以便您可以调用`view.findViewById(R.id.yourViewItem)`.

编辑： Pragnani 的解决方案和建议也帮助了我。非常感谢。

# c - 将用户的int变量存储到C中的数组中

> ID：14888333
> 
> 赞同：1
> 
> 时间：2013-02-15T04:39:45.920
> 
> 标签：c, arrays, user-input

我对 c 编程和这个论坛还很陌生，但我想我会试一试。我想要做的是让用户输入一个 4 位数字。从那里我想获取数字并将其存储在一个数组中，以便我可以在需要时调用 arr[2] 等等。提前感谢您的帮助！

我真的很想知道这里发生了什么。再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:42:52.190

您的代码没有按照您的想法执行。`scanf`从控制台读取一行。`%d`匹配*数字*（即 123），而不是*数字*（即 1、2、3）。您`printf`循环调用，而不是`scanf`（即您捕获一个数字并多次打印它）。

实际上，我认为它不止于此 - 您假设`integer`C++ 中的意思是数字。您的 4 个整数数组不包含 4 位数字 - 它包含四个单独的整数，每个整数可以（通常）从 -2147483648 到 +2147483648。

问题是，将数字分解为数字并不容易 - 因为“数字”是以 10 为底（十进制），而计算机以 2 为底（二进制）思考。相反，我们可以做的是将数字和数字作为*文本*读取和写入。将整数读取为字符串，并将每个数字写入一个字符：

```
#include <stdio.h>

int main()
{
    char input[4];

    //get input as text, instead of as a number
    printf ("Please enter a 4 digit number: ");
    scanf ("%s", input);

    for ( int i = 0; i < 4; i++ )
    {
        //print as char instead of as number
        printf ("%c\n", input[i]);
    }
} 
```

这段代码并不完美。如果用户输入“blah”，它将打印“b”“l”“a”“h”而不是抱怨非数字输入。如果用户输入超过 4 个字符，我们保存数字的字符数组将溢出，导致严重的安全风险和崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:47:19.743

实现您想要的行为存在许多可能性。这是一种方法：

```
int arr[4];
int i;
char var1[4];

printf("Please enter a 4 digit number: ");
scanf("%s", var1);

for (i = 0; i < 4; i++ ) {
    arr [i] = var1[i] - '0'; // convert char to int
    printf("%d", arr[i]);
}
printf("\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:13:41.740

var1 是一个整数，您将它存储在整数数组 arr 的每个元素中，因此输出

如果要将每个数字存储为字符，请使用 fgets，或者如果要将其存储为数字，请执行

```
i=0;
while(var1){
     arr[len-i-1] = var1%10; //len is 4 in your case
     var1 /= 10;
     i--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T04:43:49.843

您已要求`scanf`读取一个整数值。您可能想改为读取字符串。

在紧要关头，您可以使用`fgets`：

```
char number[5];
if( fgets(number, sizeof(number), stdin) != NULL )
{
    for( i = 0; i < 4; i++ ) {
        printf( "%c\n", number[i] );
    }
} 
```

# javascript - HTML/Javascript：如何使用 javascript 更改输入标签？

> ID：14888338
> 
> 赞同：0
> 
> 时间：2013-02-15T04:40:09.270
> 
> 标签：javascript, html, event-handling

这是我得到的一些东西，它是一个计算器，我尝试从按钮单击事件中调用 JS 方法，但是有问题，显示不会更新。

```
<script language="javascript" type="text/javascript" src="calculator.js"> 
        var display = document.getElementById('display');

        function digit( num ){
            if(display == 0){
                display.innerHTML = num;
                } else {
                    display.innerHTML = display.innerHTML + "" + num;
                    }
        };

    </script>
    </head>
    <body>
    <form name="calculator">
      <table width="auto" border="1">
        <tr>
          <!--<td colspan=4><input id="display" type="text"></td> -->
          <td colspan=4><div id="display"></div></td>
        </tr>
        <tr>
          <td>MC</td>
          <td>MR</td>
          <td>MS</td>
          <td><input type="button" value='/' onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
          <td><input type="button" value=7 onclick="javascript:digit(this.value);"></td>
          <td><input type="button" value=8 onclick="javascript.digit(this.value);"></td>
          <td><input  type="button" value=9 onclick="pushButton(this.value);"></td>
          <td><input  type="button" value='*' onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
          <td><input  type="button" value=4 onclick="pushButton(this.value);"></td>
          <td><input  type="button" value=5 onclick="pushButton(this.value);"></td>
          <td><input  type="button" value=6 onclick="pushButton(this.value);"></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:41:47.890

移动

```
var display = document.getElementById('display'); 
```

进入你的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:44:23.287

您`document.getElementById('display');`在该元素 ( `id=display`) 存在之前调用。你可以做各种各样的事情，但最简单的就是将 移到`<script>`之前`</body>`，或者至少在之后`id=display`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:52:54.647

在 div 中放置 0 或更改脚本中的条件（显示 == null ）

# ruby - 大写仅在字符串中的最后 4 个字符

> ID：14888339
> 
> 赞同：-2
> 
> 时间：2013-02-15T04:40:25.580
> 
> 标签：ruby

如何在 Ruby 中仅将字符串中的最后 4 个字符设为大写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:18:35.783

```
s = 'string'
"#{s[0..-5]}#{s[-4..-1].upcase}" # => stRING 
```

为了防止少于 4 个字符的字符串出错，您可以这样做：

```
s = 'foo'
s.length > 4 ? "#{s[0..-5]}#{s[-4..-1].upcase}" : s.upcase # => FOO 
```

查看[Ruby API](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)以获得解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:05:13.860

```
str = "let's upcase last 4 letters"
length = str.length
str = str[0..(length-5)] + str[(length-4)..length].upcase
# let's upcase last 4 letTERS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:19:43.717

**更新**

```
s = "string"
s.size > 3 ? s[0..-5]+s[-4..-1].upcase : s.upcase # "stRING" 
```

# python - 将变量从 python 脚本传递给 C 程序（命令行参数）

> ID：14888340
> 
> 赞同：0
> 
> 时间：2013-02-15T04:40:32.447
> 
> 标签：python, c, wxpython, subprocess, wxwidgets

我在这里遇到一个问题：我有一个 GUI（wxpython），它有 spinctrl，spinctrl 的输出必须发送到 c 文件，它接受命令行参数，所以每当我使用子进程执行 c 文件时，它接受来自的值GUI 必须将 spinctrl 值发送给它，而不是手动输入。

我的代码是：

```
 ps = "password" 
      var1 = self.sc1.Getvalue()
      var2 = self.sc2.Getvalue()
      subprocess.call(['echo xsxsxs | sudo "./license.exe"', str(ps), str(var1), str(var2)],shell = True) 
```

每当我运行此脚本时，它都不会显示输出/错误:(

如果我删除 echo xsxsxs| sudo 从第 4 行开始执行，然后显示错误：“您必须是 root 用户”、“无效密码”、“分段错误”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:41:51.857

每当您使用`shell=True`to `subprocess.Popen`（或其中一个便利包装器）时，您应该传递一个字符串，就像您在 shell 中键入它的方式一样，而不是`list`.

来自[文档](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)：

> 如果 shell 为 True，建议将 args 作为字符串而不是序列传递。

# sql - 数据库重命名错误

> ID：14888343
> 
> 赞同：0
> 
> 时间：2013-02-15T04:40:57.287
> 
> 标签：sql, database, sql-server-2008

我需要重命名我的一个数据库并尝试这样的查询

```
ALTER DATABASE Test MODIFY NAME = NewTest 
```

但这会引发错误

```
 Msg 5030, Level 16, State 2, Line 1
The database could not be exclusively locked to perform the operation. 
```

任何人都可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:01:23.193

Try something like;

```
USE master
GO
ALTER DATABASE Test 
SET SINGLE_USER 
WITH ROLLBACK IMMEDIATE
GO
ALTER DATABASE Test MODIFY NAME = NewTest
GO
ALTER DATABASE NewTest
SET MULTI_USER 
GO 
```

Be aware of the fact that this may not rename the physical file on the hard drive though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:51:32.213

您需要调查几件事。您收到该错误的原因可能是由于以下一项或多项原因：

1.  您使用的帐户没有运行命令的权限
2.  数据库被另一个进程/用户锁定
3.  数据库包含一个只读文件组

您可以尝试强制单用户模式检查 2。

`ALTER DATABASE SINGLE_USER ROLLBACK IMMEDIATE.`

这将终止与数据库的任何并发连接，从而允许您排除第二个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:53:54.600

你有两个选择：

1.  查找并杀死所有连接，如 OMG Priories 建议的
2.  如下所述以单服务器模式打开数据库： [http ://technet.microsoft.com/en-us/library/ms345598(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms345598(v=sql.105).aspx)

# java - Guice 和 JDBC 连接取决于凭证

> ID：14888349
> 
> 赞同：0
> 
> 时间：2013-02-15T04:41:30.307
> 
> 标签：java, guice

我正在尝试 Guice 一个返回 JDBC 连接的类。连接和凭据信息可能因一类而异。

在 Guice 中处理这个问题的最简单方法是什么？

前任：

a.java -> URL：localhost 用户：foo b.java -> URL：remoteserver 用户：bar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:10:31.763

在 Guice 中，您可以在构造函数上使用 @Named 注释，以便将正确的值注入到您要创建的对象中，如下所示：

```
@Inject
MyObject(@Named("jdbc.url") String jdbcUrl) {
    ...
} 
```

这些从何而来？在您的 *Module 类中，您需要加载属性，如下所示：

```
public class MyModule extends AbstractModule {
     @Override
     protected void configure() {
          // Handle exceptions, or this won't compile
          Properties properties = new Properties();
          ClassLoader loader = MyModule.class.getClassLoader();
          URL url = loader.getResource("my.properties");
          properties.load(url.openStream());
          Names.bindProperties(binder(),props);
          // Do the binding
          bind(bla).to(Bla.class);
     }
} 
```

# c# - 重载的一元运算符 ++ 采用一个参数

> ID：14888350
> 
> 赞同：0
> 
> 时间：2013-02-15T04:41:37.140
> 
> 标签：c#, overloading, operator-keyword

我想在 C# 中重载运算符“++”，但是当我编写以下代码时，VS 2012 给了我一条错误消息。

```
 public LogItem operator ++()
    {
        ++ visitTimes;
    } 
```

错误是**重载一元运算符++采用一个参数**

我这里是**类**LogItem 的定义：

```
 public class LogItem
     {
        /**
         * Constructor
         */
        public LogItem(string ip)
        {
            ipAddress = ip;
            visitTimes = 0;
        }

        /**
         * Operator Overload Function
         */
        public LogItem operator ++() 
        {
            ++ visitTimes;
        }

        public string ipAddress { get; private set; }
        public string location { get; set; }
        public int visitTimes { get; private set; }
     } 
```

我应该怎么做才能重载运算符'++'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T04:48:17.723

运算符需要是其定义类的静态成员，并且如果`++`需要该类型的参数：

```
public class LogItem
{ 
    ....
    public static LogItem operator ++(LogItem item) 
    {
       item.visitTimes ++;
       return item;
    }
} 
```

有关更多示例，请参阅MSDN 上的[运算符重载教程。](http://msdn.microsoft.com/en-us/library/aa288467(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:47:59.267

在 C# 中重载一元运算符 ++ 会重载运算符的后缀和前缀版本。

见：[http ://devhawk.net/2003/07/09/operator-overloading-in-c/](http://devhawk.net/2003/07/09/operator-overloading-in-c/) [http://www.programmingvideotutorials.com/csharp/csharp-operator-overloading](http://www.programmingvideotutorials.com/csharp/csharp-operator-overloading)

# clojure - ring-json 的 wrap-json-response 中间件和组合返回 text/plain？

> ID：14888359
> 
> 赞同：11
> 
> 时间：2013-02-15T04:42:24.710
> 
> 标签：clojure, compojure, ring

我正在尝试在我的 compojure 应用程序中使用 ring-json 的 wrap-json-response 中间件。我有一个简单的 GET 处理程序，它返回一个地图，比如`{:foo 1}`，当我点击 URL 时，环会响应`text/plain`和一个空的响应体。我似乎无法让它响应地图的 JSON 版本。

这是我的处理程序代码：

```
(ns localshop.handler
  (:use compojure.core)
  (:require [localshop.routes.api.items :as routes-api-items]
            [ring.middleware.json :as middleware]
            [compojure.handler :as handler]
            [compojure.route :as route]))

;; map the route handlers
(defroutes app-routes
  (context "/api/item" [] routes-api-items/routes))

;; define the ring application
(def app
  (-> (handler/api app-routes)
      (middleware/wrap-json-body)
      (middleware/wrap-json-params)
      (middleware/wrap-json-response))) 
```

路由处理函数实际上只是返回一个地图，所以代码很简单，我想我可以省略。如果从组合路由处理程序返回地图是问题所在，那么也许就是这样？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T09:27:40.777

看看[这个](https://github.com/ring-clojure/ring-json/blob/master/src/ring/middleware/json.clj#L35)。基本上，如果您返回`{:body {:my-map "hello"}}`，那么它将正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-10T21:59:20.173

在编写 REST API 时遇到类似的问题。

当处理程序返回向量时，我得到异常，即在 Compojure 的 Renderable 协议中没有实现 PersistentVector 的方法渲染。

返回地图时，标题为空。

返回序列时，我得到'text/html'。所以，我认为在我们的代码中扩展 Renderable 是很好的：来自 clojure 的非常好的礼物。

但是，作为 hack，为了快速解决方案，我使用下一个中间件：

```
(defn wrap-content-json [h]
  (fn [req] (assoc-in (h req) [:headers "Content-Type"] "application/json"))) 
```

# javascript - 如何构建 HTML 模板并添加到 DOM？

> ID：14888362
> 
> 赞同：0
> 
> 时间：2013-02-15T04:42:40.453
> 
> 标签：javascript, jquery, html

我知道我们可以使用：

```
var ele = "<div></div>";
$('body').append(ele); 
```

然而，这不像普通的 HTML 那样灵活，因为所有的 HTML 都被引用了......

我看到了 jQuery-templ，以便我们可以使用：

```
<script id='tmpl' type='text/html'>
    <div>test</div>
</script>
<script>
    $.tmpl('#tmpl').appendTo('body');
</script> 
```

这很好，但是这个项目不再继续了（虽然这很有用！）

有没有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:45:07.857

你想要一些东西模板引擎。那么这里是列表。

1.  淘汰赛 [JS 淘汰赛JS](http://knockoutjs.com/)
2.  句柄[栏 句柄栏 JS](http://handlebarsjs.com/)
3.  小胡子[小胡子](http://mustache.github.com/)

或者，您也可以根据自己的要求选择自己的模板引擎。[模板](http://garann.github.com/template-chooser/)选择器 ，甚至来自此链接[模板选择器](https://stackoverflow.com/questions/7788611/what-javascript-template-engines-you-recommend)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:47:18.587

非常轻量级的下划线库具有[模板](http://underscorejs.org/#template%20template)功能。这也允许您使用 erb 样式`<%` `%>`来内联 javascript 代码。

John Resig（jQuery 创建者）还编写了一个[微型模板](http://ejohn.org/blog/javascript-micro-templating/)函数，您可以将其放入代码中而无需调用库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T04:54:04.200

您也可以在不使用任何库（纯 JS）的情况下执行此操作（[演示](http://jsfiddle.net/Mottie/hMwNV/)）

```
var list = [
        'item1',
        'item2',
        'item3'
    ],
    tmpl = '<li>{item}</li>',
    i, t = '';

for (i = 0; i < list.length; i++) {
    t += tmpl.replace(/\{item\}/g, list[i]);
}
document.getElementById('list').innerHTML = '<ul>' + t + '</ul>'; 
```

# html - 我应该在标准 HTML 上使用表单助手吗？

> ID：14888367
> 
> 赞同：5
> 
> 时间：2013-02-15T04:43:07.160
> 
> 标签：html, codeigniter, zend-framework, helpers

使用这些类对性能或安全问题有好处吗，因为我们知道 HTML 应该是纯 HTML。

例子：

在 Codeigniter Framewỏrk 中：

```
 echo form_input(array('name' => 'one')); 
```

被称为

```
<input type="text" name="one"/> 
```

哪个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T05:02:11.267

**Copied from Phil Sturgeon Blog:**
The extra layer of abstraction, combined with helper extending/overriding makes it very easy to change simple bits of logic throughout your application output with minimal fuss.

To explain, I'll use an example.

```
<form action="<?php echo site_url('controller/method'); ?>" method="post">
vrs
<?php echo form_open('controller/method'); 
```

First you will see the standard `HTML` way to do it, with the `site_url()` function used to create the link to the form action. Second you will see the `form_open()` tag - and in this example its shorter too, wahey!

I wanted a way to set `accept-charset="UTF-8"` in all my forms to help keep my data all [UTF-8 in CodeIgniter](/news/2009/08/UTF-8-support-for-CodeIgniter). If I was using just `HTML` then I would have to go through **all** my forms and add that in myself, which would be wasting time I could have spent at the pub.

Instead, as CodeIgniter allows you to extend helpers, I just made my own slightly modified `form_open()` in `application/helpers/MY_form_helper.php` which contained this logic.
Because I was using PHP to wrap my useful data, I could make one simple change and update all of my tags.

The main problem is people are looking at these `HTML` helper functions and seeing them purely as different syntax.

For complete article visit:
[http://philsturgeon.co.uk/blog/2009/12/Why-CodeIgniter-HTML-helper-functions-rock](http://philsturgeon.co.uk/blog/2009/12/Why-CodeIgniter-HTML-helper-functions-rock)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:47:17.757

这是一个很好的问题。我认为最终归结为个人喜好。就我个人而言，我不喜欢使用表单助手，但我当然可以看到使用它们的好处，如果我正在处理一个大项目，我会尝试使用它们。因为就像 Phil Sturgeon 所说，当您想要对所有表单字段进行站点范围内的更改时，它会容易得多。

虽然我很想看看使用表单辅助函数是否会影响性能。使用 PHP 生成 HTML 肯定会比正常编写 HTML 有性能损失吗？

# javascript - Javascript检测表格单元格边框？

> ID：14888371
> 
> 赞同：1
> 
> 时间：2013-02-15T04:43:27.893
> 
> 标签：javascript, html

我正在制作一个 javascript 迷宫游戏，为了在角色到达墙壁时停止角色，我需要使用`if...else`语句来检测单元格边界。例如：

```
var blah = document.getElementById('hi').style.border-right;

if(blah==20px) {
    my function
} 
```

这可能吗？如果是这样，那怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:24:01.537

```
function getBorders(el)
{
    return ["Top", "Right", "Bottom", "Left"].map(
       function(v) { return el.style["border"+v+"Width"]; });
}

var b = getBorders(document.getElementById('hi'));
// b is an array with border-width strings (or empty strings)
// in the css order top, right, bottom, left——access with subscripts 0-3 
```

# iphone - 如何从我的应用程序中将 zip 文件存储在印象笔记中

> ID：14888375
> 
> 赞同：1
> 
> 时间：2013-02-15T04:43:51.100
> 
> 标签：iphone, ios, evernote

我将我的全部数据存储在`zip file`. 现在我想`zip file`通过`my app`.
我有一些示例（通过谷歌搜索）使用这些示例，我只能存储图像，但我无法`zip file`通过我的应用程序将其存储在 Evernote 中。

请帮助有什么方法可以将zip文件存储在evernote中

我正在使用以下代码发布图像及其描述

```
-(IBAction)authenticate:(id)sender  
{    
   EvernoteSession *session = [EvernoteSession sharedSession];  
   [session authenticateWithViewController:self completionHandler:^(NSError *error) {
      if (error || !session.isAuthenticated)  
     {

            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                  message:@"Could notauthenticate" delegate:nil
                                  cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        } else {
            NSLog(@"authenticated! noteStoreUrl:%@ webApiUrlPrefix:%@", session.noteStoreUrl, session.webApiUrlPrefix);
        }
    }];
}` 
```

```
-(IBAction)Postdata:(id)sender {

    NSString* filePath = [[NSBundle mainBundle] pathForResource:@"setting_tablecell" ofType:@"png"];
    NSData *myFileData = [NSData dataWithContentsOfFile:filePath];
    NSData *dataHash = [myFileData md5];
    EDAMData *edamData = [[EDAMData alloc] initWithBodyHash:dataHash size:myFileData.length body:myFileData];
    EDAMResource* resource = [[EDAMResource alloc] initWithGuid:nil noteGuid:nil data:edamData mime:@"image/png" width:0 height:0 duration:0 active:0 recognition:0 attributes:nil updateSequenceNum:0 alternateData:nil];
    NSString *noteContent = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
                             "<!DOCTYPE en-note SYSTEM \"http://xml.evernote.com/pub/enml2.dtd\">"
                             "<en-note>"
                             "<span style=\"font-weight:bold;\">Hello photo note.</span>"
                             "<br />"
                             "<span>Evernote logo :</span>"
                             "<br />"
                             "%@"
                             "</en-note>",[ENMLUtility mediaTagWithDataHash:dataHash mime:@"image/png"]];

    NSMutableArray* resources = [NSMutableArray arrayWithArray:@[resource]];
    EDAMNote *newNote = [[EDAMNote alloc] initWithGuid:nil title:@"Test photo note Nyt" content:noteContent contentHash:nil contentLength:noteContent.length created:0 updated:0 deleted:0 active:YES updateSequenceNum:0 notebookGuid:nil tagGuids:nil resources:resources attributes:nil tagNames:nil];
    [[EvernoteNoteStore noteStore] createNote:newNote success:^(EDAMNote *note) {
        NSLog(@"Note created successfully.");
    } failure:^(NSError *error) {
        NSLog(@"Error creating note : %@",error);
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:12:21.560

创建 EDAMResource 对象时，将 mime 类型更改为“application/zip”。

```
EDAMResource* resource = [[EDAMResource alloc] initWithGuid:nil noteGuid:nil data:edamData mime:@"application/zip" width:0 height:0 duration:0 active:0 recognition:0 attributes:nil updateSequenceNum:0 alternateData:nil]; 
```

# xml - 循环遍历地图对象并使用 xsl 转换修改 xml

> ID：14888378
> 
> 赞同：0
> 
> 时间：2013-02-15T04:44:15.237
> 
> 标签：xml, xslt, map

我有一个 xml 和 Map 对象，map 包含一些关于 xml 节点的附加信息，即。

```
<searchPersonResponse>
 <persons>
   <person>
     <id>123</id>
   </person>
   <person>
     <id>456</id>
   </person>
  </persons>
</searchPersonResponse> 
```

我的地图是这样的——

```
infoMap<123, <name="abc"><age="25">>
infoMap<456, <name="xyz"><age="80">> 
```

我想要的输出是这样的：-

```
<searchPersonResponse>
 <persons>
  <person>
   <id>123</id>
   <name>abc</name>
   <age>25</age>
  </person>
  <person>
    <id>456</id>
    <name>xyz</name>
    <age>80</age>
   </person>
 </persons>
</searchPersonResponse> 
```

我搜索了很多这种 eample/sample ，但没​​有找到类似的。请帮忙 ！！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:39:48.063

因为您可以将所有内容放在同一个 XML 文件中，所以您可以构建以下包含地图信息和数据的 XML 文件。

```
<xml>
    <!-- Original XML -->
    <searchPersonResponse>
        <persons>
            <person>
                <id>123</id>
            </person>
            <person>
                <id>456</id>
            </person>
        </persons>
    </searchPersonResponse>
    <!-- Map definition -->
    <map>
        <value id="123">
            <name>abc</name>
            <age>25</age>
        </value>
        <value id="456">
            <name>xyz</name>
            <age>80</age>
        </value>
    </map>
</xml> 
```

现在您可以使用此样式表将 XML 文件转换为所需的输出：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <!-- Identity template : copy all elements and attributes by default -->
    <xsl:template match="*|@*">
        <xsl:copy>
            <xsl:apply-templates select="*|@*" />
        </xsl:copy>
    </xsl:template>

    <!-- Avoid copying the root element -->
    <xsl:template match="xml">
        <xsl:apply-templates select="searchPersonResponse" />
    </xsl:template>

    <xsl:template match="person">
        <!-- Copy the person node -->
        <xsl:copy>
            <!-- Save id into a variable to avoid losing the reference -->
            <xsl:variable name="id" select="id" />
            <!-- Copy attributes and children from the person element and the elements from the map-->
            <xsl:copy-of select="@*|*|/xml/map/value[@id = $id]/*" />
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

# service - VMware 授权服务未运行

> ID：14888390
> 
> 赞同：48
> 
> 时间：2013-02-15T04:45:32.993
> 
> 标签：service, vmware

windows 无法在本地计算机上启动 vmware 授权服务。

> 错误 1075：依赖服务不存在或已被标记为删除

我已经安装了**windows7 home basic** ，所以我没有收到任何信息 -*计算机管理中的***本地用户和组**选项，我已经以管理员身份登录，尽管我无法**手动启动服务**

 **** * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-12-04T04:49:47.630

为了解决这个问题，我遵循了： [这个](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1007131)

1.单击开始，然后键入运行

2.键入 services.msc 并单击确定

3.向下滚动列表并找到 VMware Authorization 服务。

4.单击启动服务，除非服务显示状态为已启动。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-07-03T03:38:51.880

`vmware`通过使用正确修复服务的运行安装程序进行修复，我解决了这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-06T18:58:26.293

我遵循了 Telvin 的建议，它适用于 Windows 7：

1.  通过右键单击并选择“以管理员身份运行”来运行 VMware 安装程序
2.  在出现的弹出菜单中，选择“修复安装”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-29T04:51:54.570

1.单击开始，然后键入运行（或 Windows 按钮 + R）

2.键入**services.msc**并单击确定

3.找到所有VMware服务。

4\. 对于每个，单击启动服务，除非服务显示状态为已启动。

*   如果“***启动*服务**”**消失了**，请先做这些事情：

    1.  单击开始，然后键入运行（或 Windows 按钮 + R）
    2.  键入**msconfig**并单击确定
    3.  在“*服务*”选项卡中，找到并选中所有 VMware 服务复选框。
    4.  单击**应用**，然后**单击确定**。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-20T16:51:58.880

以管理员身份运行 - vmware 工作站即可。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-29T07:14:34.223

我最近也遇到了这个问题。

对我有用的解决方案是卸载 vmware，重新启动 Windows，然后重新安装 vmware。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-01T06:00:03.073

Error in Events:

The application (VMware Workstation, from vendor VMware, Inc.) has the following problem: To function properly, VMware Workstation must be reinstalled after you upgrade Windows.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-13T15:06:00.793

您可以通过手动启动服务来解决此问题。

1.  `services`在 Windows 搜索栏中键入。
2.  开放服务；滚动到 VMware Authorization Service（应该靠近页面底部）
3.  双击打开服务的属性页面。
4.  将启动类型更改为自动，然后启动服务。这样，每次登录时服务都会自动启动。

可以在 [打开虚拟机电源失败并显示错误：VMware 授权服务未运行 (1007131)中找到更多详细信息](https://kb.vmware.com/s/article/1007131)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-17T09:16:02.880

我有一个类似的问题：我必须不时手动启动此服务。对于那些有同样问题的人，您可以创建一个 bat 文件并在服务未运行时执行它（VMAuthdService 服务）。这并不能解决问题，它只是一种解决方法。该文件的内容如下：

```
:: BatchGotAdmin
:-------------------------------------
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    echo UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    pushd "%CD%"
    CD /D "%~dp0"
:--------------------------------------

net start VMAuthdService 
```

将文件命名为**Start Auth VmWare.bat**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-14T14:08:06.980

在搜索中输入`Services`，然后开始`Services`

[![在此处输入图像描述](../Images/0a4368de217fadae44ba058d4bf75a21.png)](https://i.stack.imgur.com/8OiNw.png)

然后启动所有VM服务

[![在此处输入图像描述](../Images/08fa82c18e8fc6c6983b9ffb65e03458.png)](https://i.stack.imgur.com/cancj.png)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-11-08T19:31:50.200

尝试以管理员身份执行 vmware

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-12-24T15:29:22.823

通过以 Windows 管理员身份运行 VMware 工作站为我解决了这个问题。从开始菜单中右键单击 VMware 工作站，然后选择“以管理员身份运行”***

# sqlite - 如何滚动到 QTableView 中 Sqlite 模型的最后一行？

> ID：14888391
> 
> 赞同：5
> 
> 时间：2013-02-15T04:45:46.563
> 
> 标签：sqlite, pyqt, qtableview

我有一个连接到 QTableView 的 1000 行的 Sqlite 模型。我可以查看 QTableView 中的行，但是当我滚动到 QTableView 的底部时，我只能到达前 100 行的末尾。如果我继续拉动滚动条按钮，新行会附加到视图中，但我无法轻松滚动到最后。一旦所有行都附加到视图中，我就可以轻松地从上到下滚动而不会出现问题。

这是代码的重要部分（这只是标准）：

```
self.db = QtSql.QSqlDatabase.addDatabase("QSQLITE")
self.db.setDatabaseName(dbFileName)

self.model = QtSql.QSqlTableModel(self.db)
self.model.setTable("results")
self.model.select()
self.tableViewResults.setModel(self.model) 
```

我一定错过了一些非常简单的东西。有什么建议么？

劳伦斯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T05:14:31.183

`QSqlTableModel`延迟加载数据，即它会在请求时加载项目。如果`QTableView`需要*显示*它们，它会询问项目。您观察到的延迟是`QSqlTableModel`从数据库中获取新数据的部分。

还有[一个问题](http://qt-project.org/doc/qt-4.8/qsqlquerymodel.html#details)，如果 SQL 驱动程序不报告查询大小，而 SQLite 就是其中之一：

> 如果数据库未返回查询中选定行的数量，则模型将增量获取行。有关详细信息，请参阅 fetchMore()。

所以模型实际上在加载所有项目*之前*并不知道会有多少项目。

为了消除延迟，您应该预先加载所有数据（如[`fetchMore`](http://qt-project.org/doc/qt-4.8/qsqlquerymodel.html#fetchMore)建议的那样）：

```
self.db = QtSql.QSqlDatabase.addDatabase("QSQLITE")
self.db.setDatabaseName(dbFileName)

self.model = QtSql.QSqlTableModel(self.db)
self.model.setTable("results")
self.model.select()
while self.model.canFetchMore():
    self.model.fetchMore()
self.tableViewResults.setModel(self.model) 
```

# google-app-engine - 如何使用 Objectify 从特定命名空间中保存/加载/删除实体？

> ID：14888392
> 
> 赞同：2
> 
> 时间：2013-02-15T04:46:02.943
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

谁能指出我**Objectify 示例代码**来保存/加载/删除属于特定**命名空间**的实体？

问候， 沙迪亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:59:05.160

只需像使用低级 API 一样[设置命名空间。`NamespaceManager`](https://developers.google.com/appengine/docs/java/multitenancy/multitenancy#Setting_the_Current_Namespace)请参阅 Objectify 作者的[第一个答案](https://groups.google.com/forum/?fromgroups=#!searchin/objectify-appengine/namespace/objectify-appengine/CjHQJJnrXso/T3aJPWHp5vAJ)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T04:52:36.167

根据[Objectify Docs](http://objectify-appengine.googlecode.com/svn/trunk/javadoc/com/googlecode/objectify/ObjectifyFactory.html#MEMCACHE_NAMESPACE)，指定命名空间的方法是覆盖 ObjectifyFactory 的 getRawMemcacheService() 函数，之后，使用该工厂，您将在该命名空间下操作

**编辑：**似乎这是我的一个不正确的答案，我会再调查一下，对不起

# mysql - 使用 sqlalchemy 将定义的列更改为更长的 unicode

> ID：14888393
> 
> 赞同：1
> 
> 时间：2013-02-15T04:46:06.590
> 
> 标签：mysql, sqlalchemy

我在我的应用程序中定义了一个表，如下所示：

```
users = Table('users', metadata,
    Column('user_id', Integer, autoincrement=True, primary_key=True),
    Column('user_name', Unicode(16), unique=True, nullable=False),
    Column('email_address', Unicode(255), unique=True, nullable=False),
    Column('display_name', Unicode(255)),
    Column('password', Unicode(80)),
    Column('created', DateTime, default=datetime.now),
    mysql_engine='InnoDB',
    mysql_charset='utf8',
) 
```

但是开发了一段时间后，想把user_name改成更长的长度，比如Unicode(255)。据我了解，此定义在首次启动时运行，因此仅更改此行不适用于现有数据库。它需要迁移到这个新定义。如何将已创建的数据库转换为新的、所需的定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:50:49.577

您是正确的，更新您的代码不会更新现有的数据库模式。您可以使用 Alembic 自动生成和运行架构迁移。Alembic 可以通过将新编辑的元数据的架构与数据库中的架构进行比较，为您自动生成更改脚本。从这里开始：http: [//alembic.readthedocs.org/en/latest/](http://alembic.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-08T04:01:26.510

编辑`alembic/env.py`和修改您的配置以包括`compare_type=True`：

```
def run_migrations_online():
    ...
    with connectable.connect() as connection:
            context.configure(
                connection=connection,
                target_metadata=target_metadata,
                compare_type=True, # <------------- THIS LINE HERE
            )
    ... 
```

披露，我从这个[有用的指南](https://eshlox.net/2017/08/06/alembic-migration-for-string-length-change)中得到了这个解决方案。

# regex - 正则表达式查找模式和空白

> ID：14888396
> 
> 赞同：0
> 
> 时间：2013-02-15T04:46:46.717
> 
> 标签：regex, visual-studio-2010

我想找到

```
//this is comment

//this is new comment 
```

使用正则表达式的字符串。

我的问题是，我在文件中有以下条目：

```
/// this is valid comment 
```

所以在这里，我不想找到并替换那些有效的评论，但只有那些在 // 之后有任何字符的评论

我正在尝试 Visual Studio 2010 查找和替换。所以我也想要正则表达式来替换大小写。这意味着，它应该替换`//this is comment with` `// this is comment`. 这里的区别是 之后的空白`//`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:55:43.233

寻找：`//{[^ ]}`

用。。。来代替：`// \1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:48:53.553

```
s@//([^\s/])@// \1@ 
```

第一部分匹配`//`和捕获的任何非空格字符。第二部分将`//`捕获的部分放回原位。

这假设您没有类似的评论`// comment //more comment`，尽管它应该仍然可以正常工作。

# asp.net-mvc-4 - Windows Azure UploadFromStream 在移植到 MVC4 后不再工作 - 指针？

> ID：14888398
> 
> 赞同：4
> 
> 时间：2013-02-15T04:46:52.817
> 
> 标签：asp.net-mvc-4, azure-storage

将我的 MVC3/.Net 4.5/Azure 解决方案更新为 MVC4。在升级的 MVC4 解决方案中，我将图像上传到 blob 存储的代码似乎每次都失败。但是，当我运行我的 MVC3 解决方案时工作正常。在 DLL 中进行上传的代码没有改变。

我在 MVC3 和 MVC4 解决方案中上传了相同的图像文件。我已经在流中进行了检查，它似乎很好。在这两种情况下，我都在我的机器上本地运行代码，并且我的连接指向云中的 blob 存储。

任何调试指针？升级到 MVC4 时我可能不知道的任何已知问题？这是我的上传代码：

```
 public string AddImage(string pathName, string fileName, Stream image)
    {
        var client = _storageAccount.CreateCloudBlobClient();
        client.RetryPolicy = RetryPolicies.Retry(3, TimeSpan.FromSeconds(5));
        var container = client.GetContainerReference(AzureStorageNames.ImagesBlobContainerName);

        image.Seek(0, SeekOrigin.Begin);
        var blob = container.GetBlobReference(Path.Combine(pathName, fileName));
        blob.Properties.ContentType = "image/jpeg";

        blob.UploadFromStream(image);

        return blob.Uri.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:03:39.277

我设法修复它。由于某种原因，直接从 HttpPostFileBase 读取流不起作用。只需将其复制到新的内存流中即可解决。我的代码

```
public string StoreImage(string album, HttpPostedFileBase image)
    {   
        var blobStorage = storageAccount.CreateCloudBlobClient();
        var container = blobStorage.GetContainerReference("containerName");
        if (container.CreateIfNotExist())
        {
            // configure container for public access
            var permissions = container.GetPermissions();
            permissions.PublicAccess = BlobContainerPublicAccessType.Container;
            container.SetPermissions(permissions);
        }

        string uniqueBlobName = string.Format("{0}{1}", Guid.NewGuid().ToString(), Path.GetExtension(image.FileName)).ToLowerInvariant();
        CloudBlockBlob blob = container.GetBlockBlobReference(uniqueBlobName);
        blob.Properties.ContentType = image.ContentType;
        image.InputStream.Position = 0;
        using (var imageStream = new MemoryStream())
        {
            image.InputStream.CopyTo(imageStream);
            imageStream.Position = 0;
            blob.UploadFromStream(imageStream);
        }

        return blob.Uri.ToString();           
    } 
```

# javascript - 在jQuery中验证邮政编码？

> ID：14888401
> 
> 赞同：1
> 
> 时间：2013-02-15T04:47:10.880
> 
> 标签：javascript, jquery, zip

在 jQuery 中验证邮政编码的最佳方法是什么，我不是在谈论它是否是 5 个字符的数字，我是在谈论一个有效的邮政编码，就像它与某些服务进行检查以确保其有效一样。有效的邮政编码是指在美国属于某个城市和州的邮政编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:20:13.540

> 我说的是一个有效的邮政编码，就像它通过一些服务检查以确保其有效。

```
var zipCode = getTheZipCodeFromSomeWhere();
jQuery.getJSON("http://example.com/some-service", { zipCode:zipCode }, function(data) {
    updateZipCodeValidity(data.isZipValid);
}); 
```

您需要根据您的情况定义`getTheZipCodeFromSomeWhere()`,`updateZipCodeValidity()`和`http://example.com/some-service`。

# visual-studio-2010 - 从源代码访问 Visual Studio 宏？

> ID：14888402
> 
> 赞同：15
> 
> 时间：2013-02-15T04:47:17.953
> 
> 标签：visual-studio-2010, visual-c++, visual-studio-macros

`$(TargetDirectory)`Visual Studio 有诸如等宏`$(OutputPath)`。
在我的源代码中，我想指定一个相对路径，用于从`TargetDirectory`.
目前我正在这样做：`mLayer = mEngine->AddLayer("D:\\Projects\\abc.osg");`我希望它像`mLayer = mEngine->AddLayer(($TargetDirectory)+"..\\..\\abc.osg");`

这只是一个临时要求，以便我可以将我的代码提供给某人进行小型演示，并且他的 TargetDirectory 与我的目录对齐方式不同。有没有办法在源代码中使用 Visual Studio 宏？（至少我知道系统环境变量是可以访问的）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-08T23:46:56.907

转到项目属性 -> 配置属性 -> C/C++ -> 预处理器 -> 预处理器定义并添加以下内容：

```
TARGET_DIRECTORY=LR"($(TargetDir))" 
```

这定义了一个名为 TARGET_DIRECTORY 的宽字符串文字，其中包含 $(TargetDir) 宏的内容。这里重要的是，这会创建一个不将反斜杠视为转义字符的 C++ 原始字符串。路径包含反斜杠。使用常规字符串文字是不正确的，在某些情况下甚至会给您带来编译器错误。

重要的！

如果您使用的宏可能包含右括号，后跟双引号 )"，则必须使用额外的分隔符，该分隔符不能出现在宏值中，例如：

```
TARGET_DIRECTORY=LR"|($(TargetDir))|" 
```

在 Windows 文件系统路径的情况下，这不是必需的，因为路径不能包含双引号。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T05:00:46.693

您不能自动执行此操作，但您可以将特定的 MSBuild 属性传递给预处理器：

```
<ItemDefinitionGroup>
  <ClCompile>
    <PreprocessorDefinitions>TARGET_DIRECTORY="$(TargetDirectory)"</PreprocessorDefinitions>
  </ClCompile>
</ItemDefinitionGroup> 
```

这可以在 IDE 中进行配置，方法是转到 Project Property Pages 对话框，浏览到 Configuration Properties -> C/C++ -> Preprocessor Definitions，然后添加

```
TARGET_DIRECTORY="$(TargetDirectory)" 
```

请注意，您使用`+`for 字符串文字连接是不正确的：字符串文字（以及一般的 C 字符串）不能使用`+`. 相反，字符串文字可以简单地通过将它们彼此相邻来连接。例如，

```
TARGET_DIRECTORY "..\\..\\abc.osg" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-06T12:56:43.870

在 Properties -> Configuration Properties -> C/C++ -> Preprocessor -> Preprocessor 中，您可以添加指令。

```
PROJECT_DIR=R"($(ProjectDir))" 
```

在代码中你可以使用它。

```
std::string com = "powershell groovy "PROJECT_DIR"generate_report.groovy " + EXE_DIR; 
```

`EXE_DIR`在我们的例子中是一个字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-15T04:52:34.327

我建议将这些与应用程序的工作目录或其他内容相关联。[也许在http://msdn.microsoft.com/en-us/library/aa364934%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa364934%28v=vs.85%29.aspx)上查看 GetCurrentDirectory 函数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T04:56:07.657

不是我知道的，但我有一个选择。

将您的文件部署为构建后步骤。在此步骤中，您可以使用代表二进制文件放置文件夹的 $(OutDir) 宏。这应该可以帮助您将此文件放置在您的应用程序的相对位置，并在您的代码中使用该相对位置。

这也将是一个持久的解决方案，而不是临时做的事情。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-02T13:38:11.707

使用 TARGET_DIRECTORY=""$(TargetDir)"" 代替 TARGET_DIRECTORY="$(TargetDir)" 字符串宏。（注意双引号）

在 VS2005 中为我工作。

# javascript - 从 C++ AST 生成 JS 源代码

> ID：14888411
> 
> 赞同：0
> 
> 时间：2013-02-15T04:48:19.297
> 
> 标签：javascript, c++

是否有允许从 C++ API 生成 js AST，然后从该 AST 制作源代码的库？

有点像这样：

```
Expression * expression1 = new Number(42);
Expression * expression2 = new Number(69);
Expression * result = new Addition(expression1, expression2);
Statement * stmt = new Return(result);
string code = Codegen().build(stmt); // "return ((42)+(69));" 
```

# c++ - 如何（动态）链接到 Windows 上的 math.h 函数？

> ID：14888412
> 
> 赞同：1
> 
> 时间：2013-02-15T04:48:26.470
> 
> 标签：c++, visual-studio, llvm, math.h

我正在开发一个使用 LLVM JIT 后端动态编译代码的 C++ 应用程序。在这个 JIT 编译的代码中，我希望能够调用所有`math.h`函数，但目前它只适用于其中的一些函数，即`fabs`存在但`fabsf`不存在。

似乎 for 的符号`fabs`在`msvsrt.lib`运行时库中，但不是`fabsf`，即使它们都在我系统的`math.h`. 我是否链接到错误的运行时库？或者我是否需要从其他地方获取“扩展”数学 dll 并链接到它？

*   平台：Windows 7、Visual Studio Express 2012
*   在属性中，`C/C++ > Code Generation > Runtime library`= 多线程 DLL ( `/MD`)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:09:41.117

看起来在某些情况下，math.h 像这样定义 fabsf（取自 MSVC2010 express 包含的 math.h）

```
#define fabsf(x)    ((float)fabs((double)(x))) 
```

您的运行时库可能是以这种方式实现的，这意味着 fabsf 根本不存在，并且“正常” fabsf 通过调用 _fabs() 被 C 预处理器替换。

# iphone - 无法向引导服务器注册 com.xxx.appname。错误：未知错误代码。程序接收信号：“SIGABRT”

> ID：14888421
> 
> 赞同：0
> 
> 时间：2013-02-15T04:49:08.333
> 
> 标签：iphone, xcode

在设备中运行时出现此错误。

```
Couldn't register com.xxxx.appname with the bootstrap server.
Error: unknown error code. 
This generally means that another instance of this process was already running or is hung in the debugger.Program received signal:  “SIGABRT”. 
```

现在我纠正了这个问题。如果有人收到此错误，请按照我的帖子发布答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:49:08.333

试试这个，

```
Deleteing the app, restarting Xcode, clean build, didn't do anything

--> restart your computer

--> restart the phone 
```

# django - python中的socketio

> ID：14888428
> 
> 赞同：0
> 
> 时间：2013-02-15T04:49:51.100
> 
> 标签：django, python-2.7, socket.io, gevent, gevent-socketio

请帮助我在我的 django 模块中配置 socketio。我正在使用 windows7 操作系统

*文件 wsgi.py*

**示例代码**-`from socketio import SocketIOServer`

**错误**-`Unresolved import:SocketIOServer`

我是 python 和 Django 框架的新手。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-05T13:56:39.970

尝试这个：

> pip install socketIO-server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:00:47.797

I think what you want is `from socketio.server import SocketIOServer`

# javascript - Jquery 将 aspx 加载到 div 中

> ID：14888430
> 
> 赞同：0
> 
> 时间：2013-02-15T04:49:57.063
> 
> 标签：javascript, jquery, asp.net

我之前的帖子[在 div 标签中加载 aspx 页面](https://stackoverflow.com/questions/14850246/load-aspx-page-in-a-div-tag)。我正在使用下面的代码在 div 中加载 aspx 页面。但我无法将 aspx 页面加载到 div 中。请任何人帮助我做到这一点。

```
 <script type="text/javascript" language="javascript" src="Plan_search/Scripts/jquery-1.9.0.js"></script>
    <script type="text/javascript" language="javascript" src="Plan_search/Scripts/jquery-ui-1.10.0.custom.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        try {
            $("#package").load("dss_more_pack.aspx", {}, function (data) {
                alert("loading complete");
            });
        }
        catch (ex) {
            alert("Error Status : " + ex);
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:02:45.343

简单的方法是您可以使用 IFrame，如下所示：

```
<iframe src="http://www.youraspxpage.aspx" height="100%">
            Alternative text for browsers that do not understand IFrames.
</iframe> 
```

或者在上面的评论中你可以试试这个

[如何在 div 标签中动态加载 aspx 页面？](https://stackoverflow.com/questions/7467488/how-to-dynamically-load-the-aspx-page-in-div-tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:59:50.760

I think you should load a webpage(aspx page) in a iframe not in a div. Iframe can be under div.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:28:43.217

Try this one:

```
$(document).ready(function () {
        $("#package").load("dss_more_pack.aspx", function(response, status, xhr) {
            if (status == "error") {
                var msg = "Error Status : ";
                console.log(msg + xhr.status + " " + xhr.statusText);
            }
            alert("loading complete");
        });
}); 
```

# c++ - 如何修复内存不足错误（openCV）

> ID：14888431
> 
> 赞同：3
> 
> 时间：2013-02-15T04:50:03.443
> 
> 标签：c++, opencv

请帮助如何处理这个问题：

> OpenCV 错误：未知函数中的内存不足（无法分配 921604 字节），文件 ........\ocv\opencv\modules\core\src\alloc.cpp，第 52 行

我的一种方法使用`cv::clone`和`pointer`

代码是：

每100ms有一个定时器；在定时器事件中，我调用了这个方法：

```
void DialogApplication::filterhijau(const Mat &image, Mat &result) {   
   cv::Mat resultfilter = image.clone();

   int nlhijau = image.rows;

   int nchijau = image.cols*image.channels();;

    for(int j=0; j<nlhijau; j++) {
       uchar *data2=resultfilter.ptr<uchar> (j);  //alamat setiap line pada result
       for(int i=0; i<nchijau; i++) {
          *data2++ = 0;       //element B
          *data2++ = 255;     //element G  
          *data2++ = 0;       //element R
       }
     //  free(data2);   //I add this line but the program hung up
   }

   cv::addWeighted(resultfilter,0.3,image,0.5,0,resultfilter);
   result=resultfilter;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:31:49.677

a的`clone()`方法`cv::Mat`执行数据的硬拷贝。所以问题在于，每`filterhijau()`分配一个新图像，在数百次调用此方法后，您的应用程序将占用数百 MB（如果不是 GB），从而**引发内存不足**错误。

似乎您需要重新设计当前的方法，以便占用更少的 RAM 内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-14T14:01:54.093

我之前遇到过这个错误，我通过在读取**图像时减小图像的大小**并牺牲了一些分辨率来解决它。

**在 Python**中是这样的：

```
# Open the Video 
cap = cv2.VideoCapture(videoName + '.mp4')
i = 0
while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break
    frame = cv2.resize(frame, (900, 900))
    # append the frames to the list
    images.append(frame)
    i += 1
cap.release() 
```

注意我知道这不是解决问题的最佳解决方案，但对我来说已经足够了。

# pascal - 使用哪种语言设计 1990 年的 Photoshop？

> ID：14888432
> 
> 赞同：0
> 
> 时间：2013-02-15T04:50:05.180
> 
> 标签：pascal

[http://news.cnet.com/8301-1023_3-57569533-93/adobe-releases-source-code-for-1990-version-of-photoshop/](http://news.cnet.com/8301-1023_3-57569533-93/adobe-releases-source-code-for-1990-version-of-photoshop/)

[http://www.computerhistory.org/atchm/photoshop-license-agreement/](http://www.computerhistory.org/atchm/photoshop-license-agreement/)

问题> 这是帕斯卡吗？

```
PROCEDURE AddCode (node: PNode; code: INTEGER; VAR word: Str255);

VAR
    branch: INTEGER;

BEGIN

IF LENGTH (word) = 0 THEN
    BEGIN

    IF node^.leaf OR (node^.branch [0] <> NIL) OR
                     (node^.branch [1] <> NIL) THEN
        BEGIN
        WRITELN ('? Conflict for code ', code:1);
        EXIT (PROGRAM)
        END;

    node^.leaf := TRUE;
    node^.code := code

    END

ELSE
    BEGIN

    IF word [1] = '0' THEN
        branch := 0
    ELSE IF word [1] = '1' THEN
        branch := 1
    ELSE
        BEGIN
        WRITELN ('? Invalid word for code ', code:1);
        EXIT (PROGRAM)
        END;

    DELETE (word, 1, 1);

    IF node^.branch [branch] = NIL THEN
        BEGIN

        NEW (node^.branch [branch]);

        node^.branch [branch]^.leaf := FALSE;
        node^.branch [branch]^.branch [0] := NIL;
        node^.branch [branch]^.branch [1] := NIL

        END;

    AddCode (node^.branch [branch], code, word)

    END

END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:19:26.160

Cnet 文章链接到[计算机历史博物馆的一篇博客文章，该](http://www.computerhistory.org/adobe-ps-source/)文章宣布了代码的发布，它告诉你答案：

> 按行数计算，大约 75% 的代码使用 Pascal，大约 15% 使用 68000 种汇编语言，其余的是各种数据。

问题中引用的特定代码确实是 Pascal。

# c++ - 这个带有指针功能的 strcpy 有什么问题？

> ID：14888436
> 
> 赞同：0
> 
> 时间：2013-02-15T04:50:46.700
> 
> 标签：c++, pointers, strcpy

几个小时以来，我一直在拆解我的程序，试图找到该程序。我终于将它限制在几行代码中，但我仍然很愚蠢（或厌倦）找到问题。

它只是一个使用指针的字符串复制函数。有人可以看一下吗？

```
void stringCopy(char *sourcePtr, char *destPtr)
{
    while(*sourcePtr!='\0')
    {
        *destPtr=*sourcePtr;
        destPtr++;
        sourcePtr++;
    }
} 
```

它将垃圾值注入到我的字符串中，就像我以某种方式超出了字符串的限制。

此外，它仅用于复制长度小于 10 的字符串。声明的源数组和目标数组的大小为 20。所有内容都是硬编码的。

我会使用 strcpy ，但这是一个班级的作业，这是不允许的。

编辑：我只是忘记将最终的空字符输入到目的地！抱歉给大家添麻烦了，伙计们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:54:02.960

最简单的`strcpyX()`功能：

```
void strcpyX(char *dest, const char *src){
   while(*src) *dest++ = *src++;
   *dest = '\0';
} 
```

请记住，这只有在您为目的地保留足够的空间时才有效。

您的目的地也必须由 a `'\0'`（现在不在您的代码中）终止，才能正确打印！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T05:30:13.657

You are failing to copy the terminating nul character. You can fix this with a

```
*destPtr = 0; 
```

at the ed of your function.

To my eye, however, the following is the simplest strcpy-style function. If I recall correctly, this version appeared in K&R.

```
void stringCopy(char *sourcePtr, char *destPtr) {
    while(*destPtr++ = *sourcePtr++)
        ;
} 
```

This will copy the entire string, stopping only after it has copied the terminating nul.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:02:04.387

Only problem in your code is your are not copying `'\0'` to destination. Below code works perfectly

```
/* strcpy: copy t to s */
void strcpy(char *s, char *t)
{
    while ((*s = *t)!=‘\0’) {
         s++;
         t++;
    }
} 
```

# variables - 来自文件的硒传递值

> ID：14888438
> 
> 赞同：0
> 
> 时间：2013-02-15T04:51:02.523
> 
> 标签：variables, testing, selenium, automation

我正在尝试将值从文件传递给测试用例。在这里，我研究了一个小例子，创建了一个包含内容的 js 文件，

```
var sch = 'java';    // sch.js and added to ide options - selenium ide extension 
```

我附上了我的测试用例和我得到的结果。ide 不读取变量值。

![在此处输入图像描述](../Images/879f690d7a55dd9f7640ba2956e1ddf4.png)

![在此处输入图像描述](../Images/e7ecc4ca32ac195ea16be1b250dc3f98.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:28:39.113

您需要再添加一个命令：

`storeEval | sch | sch`

从您的 js 文件中读取变量。

请注意，您需要保存您的测试，重新启动 Selenium IDE 并再次打开测试以正确保存您的 selenium ide 扩展。

此代码有效：

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>sch</td>
    <td>sch</td>
</tr>
<tr>
    <td>type</td>
    <td>id=gbqfq</td>
    <td>${sch}</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:34:54.490

Selenium IDE 并不是真正设计用于运行测试用例的工具。它有助于生成可用于编写测试用例的代码，例如使用 Java 等编程语言。当然，您可以使用 Java 从文件中读取参数。

# html - 移动到它时下拉菜单消失（导航即）（纯CSS）

> ID：14888443
> 
> 赞同：0
> 
> 时间：2013-02-15T04:51:31.263
> 
> 标签：html, css, navigation

我正在开发一个在除 ie 之外的所有浏览器中都能正常工作的菜单。有些事情有点奇怪并且很快就完成了，但是除了 ie 之外它工作正常。当移动到底部栏时，它会在您到达底部栏之前将显示恢复为无。我在 :hover 和 display:block 上都有 li 和 ul;，但我不知道如何解决这个问题。

我把导航放在小提琴上：http: [//jsfiddle.net/vUxpE/22/](http://jsfiddle.net/vUxpE/22/)

到目前为止我所尝试的一切都没有奏效。我现在不知道为什么。也许你们可以点亮它

CSS：

```
#nav {
    height:64px;
    width:100%;
    background:#f0f0f0;
    background: -moz-linear-gradient(top, #f0f0f0 0%, #d3d5d2 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #f0f0f0), color-stop(100%, #d3d5d2));
    background: -webkit-linear-gradient(top, #f0f0f0 0%, #d3d5d2 100%);
    background: -o-linear-gradient(top, #f0f0f0 0%, #d3d5d2 100%);
    background: -ms-linear-gradient(top, #f0f0f0 0%, #d3d5d2 100%);
    background: linear-gradient(to bottom, #f0f0f0 0%, #d3d5d2 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f0f0f0', endColorstr='#d3d5d2', GradientType=0);
    border:#e2e2e2 1px solid;
    -webkit-box-shadow: 0px 5px 5px rgba(0, 0, 0, 1);
    -moz-box-shadow: 0px 5px 5px rgba(0, 0, 0, 1);
    box-shadow: 0px 5px 5px rgba(0, 0, 0, 1);
}
#nav ul {
    padding:10px;
}
#nav li {
    float:left;
}
#nav a {
    color:#4d4d4d;
    font-size:14px;
    text-decoration:none;
    margin-top:10px;
    padding:10px;
    padding-bottom:11px;
    line-height:44px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
}
#nav a:hover {
    background:url(../images/navbutton.png);
    color:#fff;
}
#navtest li ul {
    display:none;
    z-index:100;
    position:absolute;
    margin:0;
    padding:20px;
    left:0;
    width:494px;
}
#navtest li:hover ul {
    display:block;
}
#navtest li ul:hover {
    display:block;
}
#navtest li ul a {
    color:#FFF;
    font-size:11px;
}
#navtest li ul a:hover {
    background:none;
    text-decoration:underline;
}
.subnav {
    background:url(../images/submenu.png) #000;
    height:64px;
    z-index:10;
}
.subnav li {
    float:left;
    margin:15px;
}
.subnav a {
    color:#fff;
    line-height:34px;
    text-decoration:none;
}
.subnav a:hover {
    text-decoration:underline;
} 
```

HTML：

```
<nav id="nav">
    <ul id="navtest">
        <li> <a href="#">News</a>

                <ul>
                    <li>    <a href="#">Latest</a>

                    </li>
                    <li>    <a href="#">Archive</a>

                    </li>
                </ul>
        </li>
        <li> <a href="#">Tournaments</a>
                <ul>
                    <li>    <a href="#">DSCL</a>

                    </li>
                    <li>    <a href="#">Starcraft 2</a>

                    </li>
                    <li>    <a href="#">League of Legends</a>

                    </li>
                </ul>
        </li>
        <li> <a href="#">Media</a>

                <ul>
                    <li>    <a href="#">Photo's</a>

                    </li>
                    <li>    <a href="#">Video's</a>

                    </li>
                    <li>    <a href="#">Extra</a>

                    </li>
                </ul>
        </li>
        <li> <a href="#">Partners</a>

                <ul>
                    <li>    <a href="#">DSCL</a>

                    </li>
                    <li>    <a href="#">Knights</a>

                    </li>
                </ul>
        </li>
        <li> <a href="#">About Us</a>

        </li>
        <li> <a href="#">Contact</a>

        </li>
    </ul>
</nav>
<div class="subnav"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:03:48.113

嗨，请删除最后一个 subnav div

并更改#navtest li ul 并尝试这个

```
#navtest li ul {
background: none repeat scroll 0 0 #000;
display: none;
left: 0;
margin: 0;
padding: 20px;
position: absolute;
top: 67px;
width: 520px;
z-index: 100; 
```

}

# jquery - 使用 ipad 中的加速度计移动物体

> ID：14888444
> 
> 赞同：1
> 
> 时间：2013-02-15T04:51:38.907
> 
> 标签：jquery, ios, html, cordova

嗨，我正在 ipad 中构建一个应用程序，我有对象，当我移动 ipad 时，甚至对象应该使用加速度计功能移动。但是当我使用下面的代码时，它没有进入`Mobeobject()`功能内部，我可能知道我哪里出错了。

我的对象没有移动。

```
// Start moving the object

var startMove = $('#startMove');

startMove.live("click",function()
{
    alert("startMoving>>");

    startMoving();

    $(this).hide();

});

// Start watching the acceleration

function startMoving(){

    alert("startMoving");

    var options = { frequency: 500 };

    alert("insidestartMoving");

    watchMove = navigator.accelerometer.watchAcceleration(moveObject, onError, options);

    alert("instartMoving");

}

// moveObject

function moveObject(acceleration) {

    alert("moveObject");

    var myObj = $('#obj');

    var wall = $('#obj_wall');

    var objPosition = myObj.position();

    var leftBoundary = 0;

    var topBoundary = 0;

    var rightBoundary = wall.width() - myObj.width() - 10; // 10 represents the 10px for the margin

    var bottomBoundary = wall.height() - myObj.height() - 10; // 10 represents the 10px for the margin

    if( acceleration.x < 0 && objPosition.left <= rightBoundary ) {

        myObj.animate({
            left:'+=10'
        },100);
    } else if( acceleration.x > 0 && objPosition.left > leftBoundary ) {
        myObj.animate({
            left:'-=10'
        },100);
    }
    if( acceleration.y < 0 && objPosition.top > topBoundary ) {
        myObj.animate({
            top:'-=10'
        },100);
    } else if(acceleration.y > 0 && objPosition.top <= bottomBoundary ) {
        myObj.animate({
            top:'+=10'
        },100);
    }
} 
```

```
<!DOCTYPE html>
<html>
    <head>
    <title></title>

    <body>
  <div data-role="page">
  <div data-role="content">
          <div id="obj_wall">
          <div id="obj"></div>
      </div>
      <div>
          <a href="#" id="startMove" data-role="button">Start Moving</a>
      </div>
  </div>
  </div> 
```

开始移动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:07:36.877

将动画代码更改为以下

```
myObj.animate({ 'left': -10}, "slow"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:28:27.580

经过长时间的分析和尝试，我发现问题出在cordova上。我们必须使用**cordova-1.7.0.js** ，上面的代码工作得很好......

# php - 在类中使用 MySQLi 的最佳方式

> ID：14888448
> 
> 赞同：1
> 
> 时间：2013-02-15T04:52:20.727
> 
> 标签：php, class, mysqli

目前我正在这样做：

```
function __construct( $mysqli_connection )
{
    if( ! empty($mysqli_connection) && is_object($mysqli_connection) && ! $mysqli_connection->connect_error )
    {
        //Make the $mysqli universal to the class equal the given connection
        $this->mysqli = $mysqli_connection;
    }
    else
    {
        die("An invalid MySQLi connection was given.\n");
    }

}//function __construct 
```

并通过以下方式启动课程：

```
new className( $mysqli ); 
```

它工作正常，但在我看来：

*   多余的代码是不必要的
*   用于占用 MySQLi 资源的内存最终翻了一番（一个在类的内存中，但在主代码中还有一个）

我的上述观点是否属实，如果是这样，是否有更好的方法从类中使用 MySQLi 资源？上述方法是我通过搜索找到的唯一方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:57:47.250

First of all, your code can be reduced to:

```
private $mysqli;

function __construct(mysqli $conn)
{
    $this->mysqli = $conn;
} 
```

Your class shouldn't have to worry about whether the connection was established, it should be able to assume that it is. Also, type hints help to indicate what class is expected when the constructor is called.

Second, the `mysqli` object is not duplicated when you're using it inside another object; instead, its reference count is increased. Once the count drops to zero the object gets removed. If an object was always copied, doing dependency injection would become very expensive.

# javascript - javascript，jQuery同时运行具有两个不同输入的单个函数

> ID：14888451
> 
> 赞同：0
> 
> 时间：2013-02-15T04:52:34.613
> 
> 标签：javascript, jquery

嘿伙计们，我只是在做一些乱七八糟的事情，学习一些新东西来消磨时间，我现在正在摆弄 javascript，我遇到了一个问题。

所以问题是我已经下载了互联网上的一个小的 jQuery 幻灯片，它是简单的淡入淡出幻灯片（我已经把它砍成碎片，删除了我认为没有必要的东西）并且我试图让它同时运行两个独立的幻灯片时间。我希望这些幻灯片具有不同的宽度和高度尺寸，最好还有过渡时间，我的问题是该功能只能运行一个幻灯片。

```
$(document).ready(function(){
    $('#slideshow').fadeSlideShow({
        width: 300,
        height: 343,
    }); 
```

有没有一种方法可以让我说更改`#slideshow`为`#slideshow1`，然后让它同时在同一段代码上运行`#slideshow`？显然，我可以更改一些名称并拥有大量文字，但我更喜欢找到一种更整洁的方式。

我是新手，所以非常感谢任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:56:37.903

```
$(document).ready(function()
{
     $('#slideshow').fadeSlideShow({ width: 300, height: 343 });
     $('#slideshow1').fadeSlideShow({ width: 300, height: 343 });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:03:20.007

假设插件使用多个元素：

```
 $('#slideshow', '#slideshow1').fadeSlideShow({
    width: 300,
    height: 343
  }); 
```

如果插件针对最佳实践进行了编码，则上述内容应该可以工作。循环选择器字符串数组也以相同的方式工作。

```
 var slideshows = ['#slideshow', '#slideshow1', '#slideshow2'];
  $.each(slideshows, function(el, i) {
    $(el).fadeSlideShow({
      width: 300,
      height: 343
    });
  }); 
```

否则，如果 div 按逻辑顺序排列，您可以以编程方式构造选择器。

```
 var slideshowStart = 1;
  var slideshowEnd = 50;
  for(var i = slideshowStart; i <= slideshowEnd; i++) {
    $('#slideshow'+i).fadeSlideShow({
      width: 300,
      height: 343
    });
  } 
```

或者，一个很好的轻量级图像幻灯片插件是 jQuery.cycle。它经过了很好的测试并且具有极强的可扩展性。

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:55:06.110

由于`#slideshow`只表示一个 DOM 元素 ID，例如单个 div 或其他内容，您能否不将其更改为`#slideshow2`并创建`div`一个 ID 为的附加元素`slideshow2`？如果这不起作用，那么幻灯片代码的编写方式可能是不可能的？

# javafx - 无法通过双击 jar 文件从计算机运行 Javafx

> ID：14888458
> 
> 赞同：3
> 
> 时间：2013-02-15T04:53:24.407
> 
> 标签：javafx

我使用 Netbeans 创建了一个 JavaFx 应用程序。它运行良好，如果我从 Netbeans 运行应用程序。但是，如果我双击 jar 文件，我会收到错误消息

`JavaFx 2.1.0 is required to view this content but JavaFx. Get the JavaFx runtime from javafx.com/javafx and run the installer. Then restart the application`

但是我已经在我的 PC 中安装了 JavaFX 运行时。但是，如果我从命令行运行 jar 文件 as `java -jar MyJavaFxApplication.jar`，那么它运行正常。

我的问题在某种程度上类似于“[无法使用 JRE7 运行 JavaFx Jar](https://stackoverflow.com/questions/13802528/unable-to-run-javafx-jar-with-jre7) ”的问题。但这个问题仍然没有答案。

我的 Java 版本是：

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T11:35:15.080

如果您使用 NetBeans 8 或 JDK 1.8，则必须使用 Java 8 运行该文件。

如果您的系统上安装了 Java 8，并且它应该与 NetBeans 捆绑在一起，只需从计算机属性变量中将其指向您的 JAVA PATH。

# java - Java：解析字符串“边缘”的正则表达式

> ID：14888460
> 
> 赞同：1
> 
> 时间：2013-02-15T04:53:48.613
> 
> 标签：java, regex, string, pattern-matching

Java新手在这里。

假设给了我一个字符串：

> ===这个锐是a= stri = ng身===

我将如何使用模式匹配来有效地确定“This 锐is a= stri = ng身”的边缘有多少个“=”符号？

另外，我正在尝试使用 Java 转义序列，例如 \G，但显然它们无法编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:22:34.097

我个人可能*不会*为此使用正则表达式，但是......这是有效的：

```
Matcher m = Pattern.compile("^(=+).+[^=](=+)$").matcher("===Som=e=Text====");
m.find();
int count = m.group(1).length() + m.group(2).length();
System.out.println(count); 
```

（请注意，这不是进行错误检查，并假设`=`两端都有）

**编辑以添加：**`=`无论两端是否存在，这都是有效的：

```
public static int equalsCount(String source)
{
    int count = 0;
    Matcher m = Pattern.compile("^(=+)?.+[^=](=+)?$").matcher(source);
    if (m.find())
    {
        count += m.group(1) == null ? 0 : m.group(1).length();
        count += m.group(2) == null ? 0 : m.group(2).length();
    }

    return count;
}

public static void main(String[] args)
{
    System.out.println(equalsCount("===Some=tex=t="));
    System.out.println(equalsCount("===Some=tex=t"));
    System.out.println(equalsCount("Some=tex=t="));
    System.out.println(equalsCount("Some=tex=t"));
} 
```

另一方面......您可以避免使用正则表达式并执行以下操作：

```
String myString = "==blah=";
int count = 0;
int i = 0;
while (myString.charAt(i++) == '=')
{
    count++;    
}
i = myString.length() - 1;
while (myString.charAt(i--) == '=')
{
    count++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:04:21.340

如果您想计算边缘出现“=”的次数，请尝试此操作。

```
int count = str.length() - str.replaceAll("[^=]=[^=]", "").length(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:42:39.183

如果`=`边缘是平衡的，您可以使用

```
^(=+).*\1$ 
```

Group1 的长度是`=`边缘的长度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T05:07:13.637

这可能是一个可能的答案：

```
public static void main(String[] args) {
    int count = 0;
    String str = "===This is a= stri = ng===";
    Pattern edgeEq = Pattern.compile("=");
    Pattern wordEq = Pattern.compile("[^=]=+[^=]");

    Matcher edgeMatch = edgeEq.matcher(str);
    while (edgeMatch.find()) {
        count++;
    }

    Matcher wordMatch = wordEq.matcher(str);
    while (wordMatch.find()) {
        count--;
    }

    System.out.println(count);
} 
```

这将帮助您找到`=`字符串边缘的数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T05:13:30.520

`=`假设开头和结尾总是有相同的数量：

```
import java.util.regex.*;
Matcher m = Pattern.compile("^=*").matcher(s);
int count = m.find()? m.group(0).length(): 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T05:40:10.777

使用以下代码

```
 String s1 = "===This 銳is a= stri = ng身===";
    System.out.println("Length : "+s1.length());
    p = Pattern.compile("^=+");

    m = p.matcher(s1);
    int count = 0;
    while (m.find())
    {
        count = m.group().length();
        System.out.println("Group : "+m.group());
    }

    p = Pattern.compile("(=+)$");
    m = p.matcher(s1);
    while (m.find())
    {
        count += m.group().length();
        System.out.println("End Group : "+m.group());
    }

    System.out.println("Total : " + count); 
```

# mongodb-query - 如何计算 MongoDB 中相邻文档之间的时间？

> ID：14888467
> 
> 赞同：0
> 
> 时间：2013-02-15T04:54:12.300
> 
> 标签：mongodb-query

我有一个 mongodb 数据库，其中包含数百万个代表事件的文档。每个文档都带有时间戳。我想评估事件之间经过的时间。较长的时间比较短的时间更重要。如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:59:39.740

好吧，我认为一个简短的答案是，这可能不是您可以使用查询来计算的东西。您的标签表明您可能正在寻找一个查询来计算它，但我认为这不可能。

听起来像 map reduce 之类的东西在这里也不起作用。

如果您确实需要每个事件之间的计算差异，那么您可能需要研究处理这些值并将结果存储在某处。或者，您可以在插入每个新事件并将它们存储在某处时预先计算它们。

无论如何，听起来你需要编写一些东西来计算它自己的议程并将结果存储在你的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:44:53.843

我已经能够让以下代码工作。

```
db.main.find()
    .forEach(function(doc){
        //print('got1 id: ' + doc._id);
        db.main.find({'_id': {$gt: doc._id}, user: doc.user})
               .sort({'_id': 1})
               .limit(1)
               .forEach(function(doc2){
                    //print('got2 id: ' + doc2._id);
                    print(doc._id + ': ' + (ISODate(doc2.startT).getTime() - ISODate(doc.startT).getTime()));
                })
        }
    ); 
```

可能还有其他方法可以解决这个问题，因为我有很多东西要学习，所以我也会感兴趣。

# jquery - 移动网站问题

> ID：14888470
> 
> 赞同：0
> 
> 时间：2013-02-15T04:54:25.997
> 
> 标签：jquery, css, html, jquery-mobile

我的`mobile website`位置似乎有问题，当您`swipe from left to right`或`right to left`屏幕移动时，其下方显示灰色背景。

这是可以通过锁定 div 来解决的问题，还是只是在移动网站上处理的问题。
我看到 twitters 移动网站在上下滚动时会做同样的事情，它会将查看区域向下拖动到足以看到灰色背景。
我附上了一张图片，以准确显示我在从右向左拖动时看到的内容。 ![在此处输入图像描述](../Images/01388ec1bf629aa53ef960842c1239dd.png)

注意：在此处添加 youtube 链接： [http ://www.youtube.com/watch?client=mv-google&hl=en&gl=US&v=MMPyZ51eO6E&feature=youtube_gdata_player&nomobile=1](http://www.youtube.com/watch?client=mv-google&hl=en&gl=US&v=MMPyZ51eO6E&feature=youtube_gdata_player&nomobile=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:31:38.793

您有一个 jQuery UI 覆盖类***ui-overlay-c***通常用于应用于您的身体的弹出窗口。删除这个类，你应该很好。此外，您的示例链接中的 HTML 看起来很奇怪。即：我在我的桌面浏览器中打开[http://www.happps.com/geishatemplate.php](http://www.happps.com/geishatemplate.php)然后 > 查看源代码 (ctrl+u) 我看不到 a 或 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:42:41.963

我要冒昧地说，由于您所指的行为发生在浏览器视口之外，这是由 IOS 决定的（我有一部 iPhone 5，您所展示的效果在查看**任何**网站时都会发生）。

底线 - 我不相信这可以做到（对于网络应用程序..）。

尽管值得注意的是，这种行为在 chrome for ios 中并不相同（灰色区域是不同的颜色，而是出现在地址栏下方）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T10:41:18.990

在您的 html 头部部分中添加此元标记。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# node.js - 命令行上的 Node.js 版本？（不是 REPL）

> ID：14888471
> 
> 赞同：658
> 
> 时间：2013-02-15T04:54:33.680
> 
> 标签：node.js, command-line

我想在命令行上获取 Node.js 的版本。我期望运行如下命令：

```
node -version 
```

但这不起作用。有人知道命令行是什么吗？（即不是REPL）

* * *

## 回答 #1

> 赞同：1158
> 
> 时间：2013-02-15T04:58:38.853

The command line for that is:

```
node -v 
```

Or

```
node --version 
```

Note:

If `node -v` doesn't work, but `nodejs -v` does, then something's not set up quite right on your system. See [this other question](https://stackoverflow.com/questions/18130164/nodejs-vs-node-on-ubuntu-12-04) for ways to fix it.

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-02-15T05:03:04.760

如果您指的是 shell 命令行，则以下任一方法都可以使用：

```
node -v

node --version 
```

只需键入`node version`将导致 node.js 尝试加载名为 version 的模块，除非您喜欢使用令人困惑的模块名称，否则该模块不存在。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-10-29T02:52:56.227

尝试 `nodejs`而不是仅仅`node`

```
$ nodejs -v
v0.10.25 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-02-03T07:16:12.253

如果要签入命令提示符，请使用 node -v 或 node --version

```
v6.9.5 
```

如果你有 node.exe 那么在 node 中你可以给。

```
>process
process {
  title: 'node',
  version: 'v6.9.5',
  ....... 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2019-02-16T11:29:48.610

只需输入`npm version`您的命令行，它将显示有关节点、npm、v8 引擎等的所有版本详细信息。

[![在此处输入图像描述](../Images/7a0f8c03ee1dced69d6634cd3c9219ac.png)](https://i.stack.imgur.com/NWv1S.png)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2017-10-03T05:14:29.913

> > Repl Command to find the Nodejs Version

```
$node
>process.version
`v8.x` 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2016-05-07T14:54:51.773

**节点**：

`node --version`或者`node -v`

**npm**：

`npm --version`或者`npm -v`

**V8引擎版本**：

```
node -p process.versions.v8 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-09-30T11:06:49.433

找到已安装的节点版本。

```
$ node --version 
```

或者

```
 $ node -v 
```

如果您想了解有关已安装节点的更多信息（即节点版本、v8 版本、平台、环境变量信息等）

然后就这样做。

```
$ node
> process
  process {
  title: 'node',
  version: 'v6.6.0',
  moduleLoadList: 
   [ 'Binding contextify',
     'Binding natives',
     'NativeModule events',
     'NativeModule util',
     'Binding uv',
     'NativeModule buffer',
     'Binding buffer',
     'Binding util',
     ... 
```

其中 process 对象是一个全局对象，它提供有关当前 Node.js 进程的信息并对其进行控制。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-02-02T18:48:07.773

默认节点包是nodejs，所以使用

```
$ nodejs -v 
```

或者

```
$ nodejs --version 
```

您可以使用

```
$ sudo ln -s /usr/bin/nodejs /usr/bin/node 
```

然后你可以使用

```
$ node --version 
```

或者

```
$ node -v 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2021-09-06T13:43:37.410

编写此命令以检查 node.js 的版本

```
node --version 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-10-25T18:24:42.840

如果您使用 Atom 编辑器，这是一个很酷的提示。

```
$ apm -v
apm  1.12.5
npm  3.10.5
node 4.4.5
python 2.7.12
git 2.7.4 
```

它不仅会返回节点版本，还会返回一些其他内容。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-08-18T12:09:26.637

对于 Node Js 版本 -

`node -v`

或者

`node --version`

对于 NPM 版本 -

`npm -v`

或者

`npm -version`

在 windows 操作系统中我们不能使用 nodejs -v，它不起作用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-02-12T12:37:16.223

在运行 Debian Stretch 的 Arm7 (armhf) 设备上，我必须发出以下任一命令：

```
$ nodejs -v
$ nodejs -h 
```

以下没有工作：

```
$ node -v
$ node -h
$ apm -v 
```

希望这对其他人有帮助。

# python - 列和行中的python pandas DataFrame子图

> ID：14888473
> 
> 赞同：14
> 
> 时间：2013-02-15T04:54:57.203
> 
> 标签：python, dataframe, pandas, subplot

我想从数据 4 列 DataFrame 生成一个子图到 2 行和 2 列

```
df =pd.DataFrame(np.random.randn(6,4),index=pd.date_range('1/1/2000',periods=6, freq='1h')) 
```

但是下面将给出一个 4 行和 1 列的图

```
 df.plot(use_index=False, title=f, subplots=True, sharey=True, figsize=(8, 6)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-05-02T07:21:27.757

在当前版本的 Pandas 中，为此目的[`DataFrame.plot`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.plot.html)提供了关键字。`layout`

```
df.plot(subplots=True, layout=(2,2), ...) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-14T10:13:23.807

cplcloud 的答案有效，但以下代码将为您提供更多结构，以便您可以在不需要循环时开始配置更多。

```
fig, axes = plt.subplots(nrows=2, ncols=2)
fig.set_figheight(6)
fig.set_figwidth(8)
df[0].plot(ax=axes[0,0], style='r', label='Series'); axes[0,0].set_title(0)
df[1].plot(ax=axes[0,1]); axes[0,1].set_title(1)
df[2].plot(ax=axes[1,0]); axes[1,0].set_title(2)
df[3].plot(ax=axes[1,1]); axes[1,1].set_title(3)
fig.tight_layout() 
```

在轴 0 上添加了一些示例，以显示如何进一步配置它。

# javascript - 如何使用 JQuery 或 JavaScript 检索 sharepoint 2013 列表数据并填充 DropDownList？

> ID：14888476
> 
> 赞同：0
> 
> 时间：2013-02-15T04:55:01.663
> 
> 标签：javascript, jquery, sharepoint, visual-studio-2012, sharepoint-2013

我正在尝试使用 JavaScript 检索列表数据。但是出了点问题。我正在尝试调试代码，但我无法理解那件事。
以下是 JavaScript 代码：

```
ExecuteOrDelayUntilScriptLoaded(PopulateDepartments, "sp.js");
var _ctx = null;
var _web = null;
var _allItems = null;

function PopulateDepartments() {
    debugger;
    _ctx = SP.ClientContext.get_current();
    _web = _ctx.get_web();
    var list = _web.get_lists().getByTitle("ServiceType");
    var query = new SP.CamlQuery();
    query.set_viewXml("<View><Query><OrderBy><FieldRef Name='Title'/></OrderBy></Query></View>");
    _allItems = list.getItems(query);
    _ctx.load(_allItems, 'Include(Title,ID)');
    debugger;
    _ctx.executeQueryAsync(Function.createDelegate(this, this.PopulateDepartmentSuccess),
        Function.createDelegate(this, this.PopulateDepartmentFaild));
}

function PopulateDepartmentSuccess() {
    var ddlEntry = this.document.getElementById("ddl1");
    ddlEntry.options.length = 0;
    var listEnumerator = _allItems.getEnumerator();
    while (listEnumerator.moveNext()) {
        var currentItem = listEnumerator.get_current();
        ddlEntry.options[ddlEntry.options.length] = new Option(currentItem.get_item("Title"), currentItem.get_item("ID"));
    }
}

function PopulateDepartmentFaild() {
    alert("Something went Wrong....!!");
} 
```

每当我运行此代码时，它都会显示警报框。
请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-13T09:19:34.217

有时 this 不采用正确的引用。检查它是否适用于删除此引用 .so 而不是这个 _ctx.executeQueryAsync(Function.createDelegate(this, this.PopulateDepartmentSuccess), Function.createDelegate(this, this.PopulateDepartmentFaild ));

尝试使用这样的东西

_ctx.executeQueryAsync(PopulateDepartmentSuccess,PopulateDepartmentFaild);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T07:27:25.267

我认为。如果您创建 Sharepoint App，则需要在 AppManifest.xml 中授予 web 权限。

# asp.net - SimpleMembership 向经过身份验证的用户提供登录表单

> ID：14888479
> 
> 赞同：4
> 
> 时间：2013-02-15T04:55:31.107
> 
> 标签：asp.net, asp.net-mvc, simplemembership

使用 SimpleMembership 开发一个 ASP.Net MVC 4 网站，即使用户已登录，有时也会调用 Login GET 控制器。到目前为止，这仅发生在开发期间（我们还没有进行 QA），并且仅在修改 . cshtml 页面。在修改 .cshtml 页面后*偶尔*会发生这种情况，但并非始终如一。

我已将日志记录添加到`Login()`模板提供的方法中，并看到用户确实经过身份验证，并且具有登录用户应具有的所有角色。

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{
    if (User.Identity.IsAuthenticated)
    {
        logger.Error("User " + User.Identity.Name + " is authenticated shown login form.  Roles: " + string.Join(", ", Roles.GetRolesForUser(User.Identity.Name)));
        // Temporary work-around: WebSecurity.Logout();
    }

    ViewBag.ReturnUrl = returnUrl;
    return View();
} 
```

**问题**

*   是什么导致了这种行为？
*   这是否会在生产系统中发生，例如，如果应用程序域被回收？
*   从安全角度来看，在返回登录视图之前调用的解决方法是否`WebSecurity.Logout()`合理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:56:27.563

如果要检查用户是否登录，而不是 User.Identity 试试这个：

```
if(Request.IsAuthenticated) {...} 
```

如果此时有任何用户登录，则为 true。希望这是您正在寻找的答案！

# c# - 粘贴时如何设置datagridview的最大字节长度

> ID：14888488
> 
> 赞同：1
> 
> 时间：2013-02-15T04:56:08.190
> 
> 标签：c#, winforms, .net-2.0, paste, maxlength

我有一个 datagridview可以在文本框列中输入***DataNames***。我通过使用`MaxInputLength`. 在这里，我想一步一步地解释我的问题。**1** . 我在记事本上写了双字节字符（例如１２３４５６７８９０）并复制。然后我到这个，右键单击然后选择。显示出１２３４５６。**2** .我在记事本上写了双字节字符（例如123456）并复制它。然后我到这个，右键单击然后选择。显示123456。 所以，属性只限于输入字符长度（***不关心单字节或双字节***）。`DataGridViewTextBoxColumn`

**`DataGridViewTextBox``Paste``DataGridViewTextBox`
**`DataGridViewTextBox``Paste``DataGridViewTextBox`
`MaxInputLength` *我只想显示１２３（6字节）。
是否有限制字节字符长度的属性或方法，尤其是在粘贴操作中？***** 

 *****提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:12:15.107

我想你可以在 TextChangedEvent 中处理它

就像是：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    var textBytes = Encoding.UTF8.GetBytes(textBox1.Text);
    var textByteCount = Encoding.UTF8.GetByteCount(textBox1.Text);
    var textCharCount = Encoding.UTF8.GetCharCount(textBytes);

    if (textCharCount != textByteCount && textByteCount >= 12)
    {
        textBox1.Text = Encoding.UTF32.GetString(Encoding.UTF32.GetBytes(textBox1.Text), 0, 12);
    }
    else if (textBox1.Text.Length >= 6)
    {
        textBox1.Text = textBox1.Text.Substring(0, 6);
    }
} 
```*****

# php - 使用 CodeIgniter CLI 编写 cron 作业？

> ID：14888489
> 
> 赞同：0
> 
> 时间：2013-02-15T04:56:11.823
> 
> 标签：php, api, codeigniter, cron, command-line-interface

嗨，我在使用`CI CLI`方式编写 cron 作业时遇到了一些问题。我的应用程序有一个名为的控制器名称`manager.php`，其中有一个名为 check_status 的方法，我将在其中`order_ids`使用一个模型函数来获取所有内容。曾经 order_id 行在数据库中记录了一个成功或失败的状态。

如果我将 order_id 传递给它，我有一个 api，它会告诉我订单是否成功交付。但是这里出现了我在顶部控制器中遇到的问题。

```
<?php if(! defined('BASEPATH') ) exit("NO Direct Script Access Allowed"); ?> 
```

因此，当我尝试`check_status`在 CI 中从 CLI 运行方法时，它会给我一个错误说明`NO Direct Script Access Allowed`。

这是我调用上述方法的方式`php application/controllers/manager.php check_status`

所以我决定像这样创建另一个名为 cron_job.php 的类文件，因为我没有保留上述错误行 `"No Direct Script Access Allowed"`。我认为当我尝试运行时它现在会提供访问权限，但它不会给出错误甚至输出。

这是我创建的类和方法。

```
<?php
class Cron_job extends CI_Controller {

    public function message($to = 'World')
    {
        echo "Hello {$to}!".PHP_EOL;
    }
}
?> 
```

我像这样从 CLI 运行这个控制器`php application/controller/cron_job.php message`

```
Note: I am in ROOT directory. 
```

根本没有输出。所以我尝试了另一种方式`php index.php application/controller/cron_job.php message`

现在它给了我错误说明`Error 404 page not found.`

我现在以另一种方式尝试了什么，我在视图文件夹中创建了一个文件，并且我正在调用旧的控制器/方法 url，如下所示。

```
$result = file_get_contents("http://application_path/controller/method");

echo $result; 
```

现在我得到了我在 manager.php 控制器的方法 check_status 中定义的输出。

但是在上述行之后出现了另一个问题，我将得到一个包含所有 order_id 的数组输出。

我会将每个 id 发送到 api 以检查状态。如果失败，它将检查是否已交付。如果完成，我需要根据该 order_id 在数据库中更新该状态。但是现在我在视图文件中，是否可以从视图文件中调用模型文件，或者有什么方法可以做到这一点。

有什么帮助吗？

注意：任何控制器或任何方法中都没有语法错误，当我使用 url 访问时，这些错误已得到充分验证并正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:31:33.960

您需要阅读有关[通过命令行运行](http://ellislab.com/codeigniter/user-guide/general/cli.html)的 CodeIgniter 帮助部分。这很容易。你原来的方法是正确的。但是您不要直接通过路径调用控制器方法，而是 CD 到您的项目根目录，然后以控制器和方法作为参数调用 index.php 文件。

```
// This is how you call CI via the command line.
// Use spaces between index.php and your arguments.
$ php index.php <controller> <method> [params]

// And in your instance
$ php index.php manager check_status [param1 param2 param3] 
```

根据您的主机，您可能需要调用为 CLI 编译的 PHP 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:44:44.253

ci 助手将在这方面为您提供帮助。

1）创建一个助手并在其中创建一个函数，调用您的模型函数

```
function getUserDetails($userId = '') {
  $CI = & get_instance(); 
  $getUserDetailsByUserId = $CI->user_model->getUserDetailsByUserId($userId);
  return $getUserDetailsByUserId;
} 
```

2) 现在你可以调用`getUserDetails($userId);`你的视图。

# asp.net-mvc - 如何构建 Entityframework 数据库上下文

> ID：14888491
> 
> 赞同：0
> 
> 时间：2013-02-15T04:56:21.523
> 
> 标签：asp.net-mvc, entity-framework

我一直无法在网上找到任何答案。

1.  与使用单个数据库上下文相比，使用多个数据库上下文的优点/缺点是什么？

2.  下面的解决方案是否可以设置相关对象，（保存到数据库时）（为了提高效率，因为我已经有了 ID，不需要获取对象）

3.  我听说它建议使用上下文`Using(MyContext c = MyContext) {}`，目前我正在使用默认的 MVC 方式，在控制器中实例化上下文，可以吗？

    ```
     Person P = new Person(); 
      P.QuickSetCar(CarID); 
      db.People.Add(P); 
      db.saveChanges(); 
    ```

    和

    ```
    private void QuickSetCar(int CarID)
    {
      if(this.Car == null) {
        Car C = new Car();
        C.ID = ID;
        this.Car = C;
     }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:02:16.817

1.  Using multiple contexts is always a disadvantage unless you have no choice (e.g. your data is dispersed across multiple databases).

2.  Almost, but you can simplify your new car initialization to:

    ```
    private void QuickSetCar(int CarID) {
      if(this.Car == null)
        this.Car = new Car(){ ID = CarID };
    } 
    ```

3.  That's fine. Just don't use more than one context for the duration of the web transaction (request/response) and don't keep it around for longer than that either.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:03:24.320

1.  多个上下文通常只对分布在多个数据库中的非常大的模型有用。如果您正在启动一个项目，通常最好使用单个上下文。

2.  您使用 ID 的方法很好。

3.  在控制器中创建上下文当然是可行的，但我强烈建议不要这样做。这种方法经常在演示和基本脚手架中展示，但在现实世界的应用程序中这不是一个好主意。通过在每个控制器中实例化和查询上下文，通常会复制大量代码。还有一个中央存储库将允许更容易缓存以提高性能。

# python - vim for epd python on windows

> ID：14888493
> 
> 赞同：0
> 
> 时间：2013-02-15T04:56:42.057
> 
> 标签：python, windows, enthought, vim

我已经在我的 Windows 上安装了[epd python 发行版](http://www.enthought.com/products/epd.php)。现在有人可以帮我设置vim吗？此外，对 vim 的基本快速调整（语法、颜色支持等）的一些帮助会有所帮助。

需要快速帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:35:47.727

我是Solarized [colorscheme](http://ethanschoonover.com/solarized/vim-colors-solarized)和[pymode 插件](https://github.com/klen/python-mode)的忠实粉丝。对于一般安装 Vim 插件，[Vundle 插件管理器](https://github.com/gmarik/vundle)非常棒。

# r - Up-sampling in R - randomForest

> ID：14888499
> 
> 赞同：1
> 
> 时间：2013-02-15T04:57:27.733
> 
> 标签：r, machine-learning, random-forest

I have a highly imbalanced data and want to up-sample the minority class to improve accuracy (the minority class is the object of interest).

I tried using the "sampsize" option in the "randomForest" function - but it only allows for down-sampling. I read someplace, the "classwt" option can be used - but i am not sure how to use it.

Can anyone suggest a way to run Random Forest in R by up-sampling the minority class (using the "randomForest" library or other such libraries).

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:03:04.743

最简单的方法是只复制少数类的数据，但随后您会丢失 OOB 估计值。

您想要直接执行的操作似乎没有实现，另请参见此[问题](https://stats.stackexchange.com/questions/45705/sampling-with-replacement-in-r-randomforest/)。

# jquery - Date Picker Integration with User's Google Calendar

> ID：14888503
> 
> 赞同：2
> 
> 时间：2013-02-15T04:57:44.333
> 
> 标签：jquery, datepicker, firefox-addon, google-calendar-api

I'm looking for a date picker for my site's forms, that integrates with the end-user's Google Calendar.

For example, I want user1 to be able to log into my site, and update their orders, and if they need to put a scheduled date in a field, the interaction would look something like:

*   focus into date field, or they click on a calendar icon next to the field
*   a fully functional date picker comes up, showing a monthly calendar view from user1's Google Calendar
*   inside the date picker, user1 selects a date, names the event, and clicks save
*   this should write the event to user1's Google Calendar, close the date picker, and populate the selected date into the form on my website.

A typical use case would be someone that does a lot of scheduling and customer contact. I'm looking for something that would eliminate the swivel chair that a person would normally incur, where they have to stop, look at their phone, and find an open block of time.

Preferably, this would be a date picker on a web form, but it could also be a widget on the side.

This really seems like something that there should be a FireFox plugin for, but I'm not finding one - I'm looking for something that eliminates the need for a second tab and/or second browser window.

Can someone point me in the right direction?

# asp.net-mvc - jsTree to send a Ajax request to web-service when new node is added

> ID：14888507
> 
> 赞同：1
> 
> 时间：2013-02-15T04:58:21.113
> 
> 标签：asp.net-mvc, web-services, treeview, jstree, treeviewitem

I am using jsTree, and on adding a new item to the tree, i want to send an AJAX request to the server when a new item is added.

Here's what i found [a link](https://stackoverflow.com/questions/14133984/create-custom-item-in-jstree-context-menu) , on searching

I want the Ajax request to be sent to a vb.net web-service, this is done by using create.jstree event as shown in the link above.

But what will my web-service consist of? I want the web-service to know and save the changes(new node added, deleted or renamed).

Can anybody help me out on this?

# python - 如何在python中刮掉分布在多行的html标签？

> ID：14888508
> 
> 赞同：2
> 
> 时间：2013-02-15T04:58:22.027
> 
> 标签：python, scripting, web-scraping

我正在尝试在 python 中抓取网页。我能够轻松地获得单行标签的结果，但是对于分布在多行的标签，我的代码无法检索任何内容。

在 HTML 源代码中，单行标签显示为：

```
<td><span class="facultyName">John Matthew Falletta, MD</span> 
```

并且多个行标签显示为：

```
<td><span class="label">Division:</span>
            &nbsp;&nbsp;
                  </td><td>Hematology/Oncology</td> 
```

这是我写的：

```
patFinderFullname = re.compile('<span class="facultyName">(.*)</span>')

fullname = re.findall(patFinderFullname,webpage)         #works fine

patFinderDivision = re.compile('<span class="label">Division:</span>&nbsp;&nbsp;</td><td>(.*)</td>')

division = re.findall(patFinderDivision,webpage)       #doesn't work 
```

这里我的网页变量包含必须被抓取的 url。有人可以指出，我错过了什么，或者我错在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T05:03:26.377

我强烈建议您使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。它是一个用于解析 HTML 文档的 Python 库。

Ps：如果您想坚持使用自己的代码，请使用 \s* 跳过正则表达式中的空格。

```
patFinderDivision = re.compile('<span class="label">Division:</span>\s*&nbsp;&nbsp;\s*</td><td>(.*)</td>') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:23:38.790

只需将示例添加到您需要拉出除法的哪种正则表达式：

```
re.compile('<span class="label">Division:</span>\s*&nbsp;&nbsp;\s*</td><td>(.*?)</td>') 
```

# r - 使用 as.POSIXct 转换日期

> ID：14888511
> 
> 赞同：-1
> 
> 时间：2013-02-15T04:58:40.253
> 
> 标签：r, date

我想生成一个从1990年到2010年的21年的向量。我使用的`as.POSIXct`函数如下

```
time=as.POSIXct("1990-01-01", tz="GMT")+0:20*3600*(24*365) 
```

我得到以下答案

```
 [1] "1990-01-01 GMT" "1991-01-01 GMT" "1992-01-01 GMT" "1992-12-31 GMT" "1993-12-31 GMT" "1994-12-31 GMT"
 [7] "1995-12-31 GMT" "1996-12-30 GMT" "1997-12-30 GMT" "1998-12-30 GMT" "1999-12-30 GMT" "2000-12-29 GMT"
[13] "2001-12-29 GMT" "2002-12-29 GMT" "2003-12-29 GMT" "2004-12-28 GMT" "2005-12-28 GMT" "2006-12-28 GMT"
[19] "2007-12-28 GMT" "2008-12-27 GMT" "2009-12-27 GMT" 
```

根据需要在 2009 年而不是 2010 年结束。

任何人都可以帮助，如果可能的话，如何生成没有月份和日期的年份，只有年份单独使用`as.POSIXct`函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:30:44.623

这是一个只需要您指定所需年份范围的解决方案：

```
time <- as.POSIXct(paste0(1990:2010, "-01-01"), tz = "GMT") 
```

我假设你想要每年 1 月 1 日，而不是一些接近的近似值。

现在，如果您只想显示年份，您可以执行以下操作：

```
format(time, "%Y")
 #[1] "1990" "1991" "1992" "1993" "1994" "1995" "1996" "1997" "1998" "1999" "2000" "2001" "2002" "2003"
 #[15] "2004" "2005" "2006" "2007" "2008" "2009" "2010" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T05:33:28.870

试试这个：

```
ISOdate(1990:2010,1,1) 
```

# java - iswritable method in blob in appengine using java

> ID：14888518
> 
> 赞同：0
> 
> 时间：2013-02-15T05:00:03.287
> 
> 标签：java, google-app-engine, blob

The blob is checked with a is writable method.

The code used is :

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile file = fileService.getBlobFile(str);
Boolean writea=file.isWritable(); 
```

The value of writea displays true. So it refers that the blob is not finalized and can be used again (if I'm right).

Now my question is how to retrieve the blob and use it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:13:42.717

Blob 在可写时无法读取。在最终确定它们之前，它们是只写的，之后它们是只读的。

# sphinx - Sphinx：字符串属性太多

> ID：14888519
> 
> 赞同：2
> 
> 时间：2013-02-15T05:00:06.317
> 
> 标签：sphinx

索引时写入错误：字符串属性过多（当前索引格式最多允许 4 GB）。如何在 8000 万行上解决此问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:34:15.083

使用较少的属性，或将索引拆分为多个部分。

# javascript - Disable parent window while child window is opened using javascript

> ID：14888523
> 
> 赞同：1
> 
> 时间：2013-02-15T05:01:00.123
> 
> 标签：javascript

*   I have a parent window named worklist.jsp
*   Parent window has a button. on click of the button, it calls a function named getEventLogUser().
*   getEventLogUser() function in turns calls a function named popupWindowWithPost() which opens the child window. both the function is in separate js file(utility.js)..
*   My need is, i have to disable the parent window when child is opened.

worklist.jsp:

```
<div class="claro" id="menuDiv21" onclick="setWidgetproperty(this.id,'x','navMenu21');" onmousedown="setMenuBarProperty('navMenu21');" onmouseup="setDocStyle(this.id)" style="border:1px dotted white; left: auto; position: absolute; top: 620px;">
     <div dojotype="dijit.MenuBar" id="navMenu21" style="font-size:11pt;" title="MenuBar">
          <div dojotype="dijit.MenuBarItem" id="SearchMenu21" onclick="getEventLogUser();setMenuId(this.id);" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="SearchMenu21" name="search5.png" onclick="setImgProperty(this.id)" src="images/uploads/search.png" style="height:20px; width:20px;">
               Search
          </div>
</div>
</div> 
```

utility.js:

```
function getEventLogUser(){
        var dummyvar = document.getElementById("CWPROCESSEVENTLOG.OBJECT_ID").value;
        popupWindowWithPost("eventLogUser.jsp",'height=600px,width=960px,top=50px,left=150px,scrollbars=no,sizable=yes,toolbar=no,statusbar=no','processManager',dummyvar);
}
function popupWindowWithPost(url, windowoption, name, params)
{
         var form = document.createElement("form");
         form.setAttribute("method", "post");
         form.setAttribute("action", url);
         form.setAttribute("target", name);
         var input = document.createElement('input');
         input.type = 'hidden';
         input.name = "PARAM";
         input.value = params;
         form.appendChild(input);
         document.body.appendChild(form);
         window.open(url, name, windowoption);
         form.submit();
         document.body.removeChild(form);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:09:04.587

禁用窗口的一种简单方法（假设您对 disable 的定义与我上面的评论相匹配）是简单地用不可见的 div 覆盖窗口并给它一个非常大的 z-index 以便如果您有任何其他带有 z- 的 dom 元素index > 1 它仍然会被那个不可见的 div 覆盖。

尝试避免诸如 window.showModalDialog() 之类的东西，它们是[坏消息](http://tjvantoll.com/2012/05/02/showmodaldialog-what-it-is-and-why-you-should-never-use-it/).. 如果我是你.. 除非绝对必要，否则我什至不会创建新窗口（老实说，我想不出一个单一的场景）。 . 我会使用 div 和 css 在同一个窗口中创建一个模式对话框.. 网上有大量的教程和库（即 twitter 引导程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:05:44.950

据我了解，您想打开模态对话框。签出`window.showModalDialog()`而不是`window.open()`. 请注意，它也有一些不同的参数......

而且，如果你想把它放在之前`form.submit();`，那么在模态窗口关闭之前它不会被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:08:28.960

查看用于创建模态 iframe的[fancybox库。](http://fancybox.net/)我已经在几个项目中使用了它，它可以满足您的要求；尽管在叠加层中，而不是在单独的窗口中。

# php - 为什么这个 PHP 正则表达式返回 1？

> ID：14888529
> 
> 赞同：4
> 
> 时间：2013-02-15T05:01:56.673
> 
> 标签：php, regex

为什么以下常规函数调用返回值`1`：

```
preg_match('<strong>', '<strong[\>\s]+') 
```

根据[文档](http://php.net/manual/en/function.preg-match.php)，我原以为应该将它们颠倒过来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T05:03:30.013

`<strong>`是用[尖括号作为分隔符](http://www.php.net/manual/en/regexp.reference.delimiters.php)的正则表达式。实际的正则表达式只是`strong`成功匹配主题字符串的一部分，因为它没有`^`和`$`锚点。

这将失败：

```
preg_match('/<strong>/', '<strong[\>\s]+') 
```

# c++ - Is it better to update the value or change the pointer?

> ID：14888533
> 
> 赞同：1
> 
> 时间：2013-02-15T05:02:25.320
> 
> 标签：c++, pointers, reference

C++

Is it better to update the value of a pointer or to change the pointer to point to something else?

Let's say we have two classes: ball and coordinates.

```
class ball
{
    Coordinates *ballCurrent;
    public:
        ball(int);
        ~ball();
        void setLoc(Coordinates&); // OR void setLoc(int, int);
};

class Coordinates
{
    int x, y;
    public:
        Coordinates(int, int);
        void setCoordinates(int, int);
}; 
```

For the setLoc method in the ball class, which parameters should is better? Would it be better to just setLoc by using (*ballCurrent).setCoordinates(int, int) OR by using (*ballCurrent).setLoc(*(new Coordinates(int, int)))? Please go into detail the reason for each case if possible.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:16:33.873

> 更新指针的值还是将指针更改为指向其他东西更好？

这不是那种没有上下文就可以回答的问题。知道一个对象是不可变的通常很有用——只要你有一个指向那个对象的指针，这个对象就不会在你眼皮子底下改变。例如，如果一个函数或方法将一个指向不可变类型的指针作为参数，那么您就知道可以将对象传递给该函数，而不必担心该函数会更改该对象。

另一方面，可变对象也有自己的位置。一方面，您有时希望能够分几个步骤构建一个对象，而不是一次完成所有工作，并且您可能不希望在此过程中创建多个中间对象只是为了获得最终对象。

所以，这取决于上下文。我看到您提供了一个简单的示例，但我认为即使您的示例也不一定有正确的答案。这取决于对您来说什么是重要的，以及所讨论的对象将如何与系统的其他部分交互。我认为我倾向于使用可变对象，因为在游戏中可能需要多个对象了解球。如果移动球的唯一方法是创建一个新球并将其传递给所有其他关心它的对象，那么这很容易成为一个大问题。不过，坐标对象很容易是不可变的——任何需要知道球位置的人都应该向球询问它的位置。一旦他们得到它，他们可能会期望位置不会每隔几毫秒就改变一次。如果你不

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:11:26.437

如果可以的话，我可能会这样写：

```
class ball
{
    Coordinates coordinate_;     // better name than ballCurrent?
    public:
        explicit ball(int)       // add explicit to avoid implicit converting
        : coordinate_(0,0)       // initialize corrdinate_ properly
        {
        }
        ~ball();
        void setLoc(const Coordinates& co) // add const
        {
           coordinate_ = co;
        }

        void setLoc(int x, int y)
        {
           coordinate_.setCoordinates(x,y);
        }
}; 
```

无需担心动态内存问题，可以`setLoc`通过函数重载两种方式。没有野指针，不用担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:13:16.170

如果您使用一个新对象，它将需要为自己分配内存，并且还需要对其进行初始化（构造函数/s 运行、分配属性等）。与仅更改您已经拥有的对象（以及您为此目的创建的对象）的值相比，这是很多开销。

此外，如果您创建一个新对象，则需要释放先前指针的内存，这又是开销……所以只需更改现有对象即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T05:13:52.923

只需更改指向的对象的值。每次要更新值时都创建一个全新的对象是没有意义的。

如果 Coordinates 有一个 const x 和 y 值并且没有 setCoordinates 函数，您可能必须创建一个全新的对象而只是更改值的一种情况。但是，如果您需要经常更新坐标，那么这很可能是一个糟糕的设计决策。

也不是这个：

```
(*ballCurrent).setCoordinates(int, int); 
```

你可以使用这个：

```
ballCurrent->setCoordinate(int, int); 
```

它做同样的事情，但更容易编写，很多人会发现它更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T05:22:27.167

在 的情况下`SetLoc(int,int)`，您正在创建构造函数之间`ball`和构造函数的`Coordinates`依赖关系`Coordinates`，更重要的是，它所代表的内容。如果构造函数签名发生更改，您必须将这些更改转移到`ball::SetLoc`. 这个参数在一般情况下是有效的，在这种情况下，您确实希望避免传递一组参数来初始化对象组件。

在这种特殊情况下，`Coordinates`体现了空间中的一个位置，并且可能应该附带一组方法来操纵它，以防止其实施细节渗透到程序的其余部分。如果您希望移动到 3D 坐标系，理想情况下，您只需要更改构造函数调用和类实现即可。因此，您确实希望将类外的必要更改减少到最低限度，这意味着要避免前面解释的问题。

您提出了两种不同的解决方案来设置`ball`对象的位置。在实践中会出现这些解决方案吗？在一个简单的程序中，球的位置是硬编码的，这是可能的，任何一种解决方案都可以工作。但在更复杂的软件中，球的位置可能最初由配置文件设置，并且在一些非平凡的计算之后完成任何后续的位置更新。`(int, int)`在这种情况下，将所有与坐标有关的逻辑都封装在类中，避免参数传递，更易于维护。

如果您担心内存分配开销（例如由函数返回的结果生成的临时内存），可以通过明智地使用常量、引用甚至指针来缓解它们，并定义合理的复制构造函数。

# php - 从 PHP 运行 exec() 不起作用

> ID：14888534
> 
> 赞同：2
> 
> 时间：2013-02-15T05:02:29.290
> 
> 标签：php, imagemagick

这适用于我的 PHP 代码

```
$output = array();
exec("ls /Applications/XAMPP/htdocs/MY_APP/images", $output);
var_dump($output); 
```

现在我需要使用 ImageMagick 的“转换”命令将 PNG 文件转换为 PDF 文件。但以下不做任何事情并且不返回任何错误。

```
$output = array()
exec("convert /Applications/XAMPP/htdocs/MY_APP/images/test.png /Applications/XAMPP/htdocs/MY_APP/images/test.pdf", $output);
var_dump($output); 
```

是权限问题吗？我把 chmod 777 给了 images 文件夹。我还应该检查什么？当我从终端运行命令时，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:58:58.277

尝试将转换更改为完整路径以进行转换，例如 usr/local/bin/convert

这可以通过以下方式找到：

```
<?php
echo "<pre>";
system("type convert"); 
echo "</pre>";
?> 
```

或者

```
<?php
echo "<pre>";
system('which convert',$path); print_r($path); 
echo "</pre>";
?> 
```

我刚刚重读了你的帖子，发现你在 XAMPP 上，所以上面的答案可能不起作用。

尝试将所有内容放在同一个文件夹中，以消除路径等方面的任何问题。

```
exec("convert test.png test.pdf"); 
```

你也安装了ghostscript吗？为了证明它有效而不是 ghostscript 问题，请尝试另存为 jpg 而不是 pdf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:10:27.793

如果您的 PHP 代码是通过您的 Web 服务器（例如 Apache）执行的，那么 Apache 进程 (httpd) 可能在受限的 unix 用户（例如 apache 或 httpd）下运行。受限制的 unix 用户通常`/Applications/XAMPP/htdocs/MY_APP/images/`在您尝试生成 pdf 的目录中没有写权限。试试这个命令，看看它是否有效：

```
exec("convert /Applications/XAMPP/htdocs/MY_APP/images/test.png /tmp/test.pdf", $output);
var_dump($output); 
```

上面的命令尝试在`/tmp`Apache unix 用户通常可写的目录中生成 pdf。

我注意到您已将 777 分配给图像文件夹。请理解仅对图像文件夹 chmod 777 是不够的。您还需要在所有父目录中授予 Apache 用户写入权限，例如 MY_APP、htdocs、XAMPP、应用程序等，这是一个**很大的安全风险**，我必须补充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-18T16:06:28.300

我遇到了同样的问题：安全模式已关闭，但我仍然无法执行 Image Magick 的转换。

我发现，由于某种原因，php 看不到脚本（甚至通过 php.ini 包括 include_path 中的路径）。检查日志，我发现错误是：

```
sh: convert: command not found 
```

尝试使用完整路径调用脚本（我使用它检查过`which convert`）我终于设法让它通过`exec`.

因此，假设转换完整路径为`/usr/local/bin`，请尝试运行以下命令：

```
<?php    
    $output = array();
    exec("/usr/local/bin/convert /Applications/XAMPP/htdocs/MY_APP/images/test.png /Applications/XAMPP/htdocs/MY_APP/images/test.pdf", $output);
    var_dump($output);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-25T12:19:28.837

如果您在 Windows 下遇到此问题，请尝试 exec('identify pathtoyourfile')。如果这有效但 exec('convert ...') 无效，您可能无意中调用了 Window 的转换实用程序而不是 IM 的转换。解决方案是将 IM 的 convert 重命名为 cconvert。或者，检查 IM 是否位于 PATH 环境变量的开头。

# r - 如何使用 shell() 命令从 Windows 文件夹中删除文件

> ID：14888536
> 
> 赞同：1
> 
> 时间：2013-02-15T05:02:40.893
> 
> 标签：r

我有一个脚本，它会生成很多我想在关闭 gWidgets 界面时删除的小 PNG 文件。我以为我可以在 Windows 中使用

```
shell( "del *.png" ) 
```

但无论是在脚本中还是在 R（2.15.2）中的交互模式下，这都没有任何影响（甚至没有错误或警告）。可能我做错了什么，但到目前为止我不知道是什么。

有人对我有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:23:43.410

我刚刚测试了你的命令——在 Windows XP 上使用相同版本的 R——它的工作方式完全符合你的预期。如果此命令对您不起作用，我强烈怀疑 R 的工作目录可能与您的 .png 文件所在的目录不同。

你可以试试：

```
shell('dir *.png') 
```

...在尝试删除它们之前验证 .png 文件实际上是否在当前工作目录中。如果他们不在那里，您将收到报告：

```
File Not Found
Warning messages:
1: running command 'C:\WINDOWS\system32\cmd.exe /c dir *.png' had status 1 
2: In shell("dir *.png") : 'dir *.png' execution failed with error code 1 
```

此外，如果您运行过`del`一次命令，因此目录中没有剩余的 .png 文件，那么第二次运行该命令时，您应该会收到如下错误消息：

```
> shell("del *.png")
Could Not Find C:\usr\sjl\dev\test\R\*.png 
```

# jscrollpane - 带有播放列表的 JScrollPane 和 jPlayer

> ID：14888540
> 
> 赞同：0
> 
> 时间：2013-02-15T05:02:54.727
> 
> 标签：jscrollpane, jplayer, playlist

我正在尝试在由 jPlayer（带有播放列表）生成的播放列表上实现 jScrollPane，但它不起作用。我认为正在发生的事情是 jPlayer 在播放列表 ul 元素上初始化 jScrollPane 之后动态构建播放列表。

jPlayer 和 jPlayerPlaylist 工作正常；我可以看到 jScrollPane 添加的元素 css，这表明它正在工作，但滚动条不可见。播放列表完成构建后，我可能需要调用 jScrollPane 吗？有人对这些插件有经验吗？

谢谢！该网站在这里：[http ://elricoshow.com](http://elricoshow.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:35:57.083

经过几次尝试后，我终于弄明白了……我认为这是css的问题，也许是因为我也试图拥有一个非javascript版本，我不确定。

无论如何，我已经设法制作了一些非常漂亮的滚动条，它们与页面很好地融合在一起，并且在触摸屏（或鼠标滚轮）上比旋转木马更好地工作（因为使用旋转木马你需要点击每一个进步） .

# c# - 将通用列表的元素添加到字典

> ID：14888541
> 
> 赞同：1
> 
> 时间：2013-02-15T05:02:59.853
> 
> 标签：c#, dictionary, generic-list

我有一个通用列表`List<String, String> ListName`

我正在尝试将列表的值插入字典`Dictionary<String, int>`

我查看了地方，但只发现将字典元素添加到列表中。而我的要求正好相反。我尝试使用 toDictionary，但它对我不起作用。不知道出了什么问题。

有没有人尝试将值从列表插入字典？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:14:25.553

我假设你的意思是`List<string[]>`因为我以前从未见过通用`List<T,WhoAmI>`的

如果您正在使用`List<string[]>`，您可以使用该`ToDictionary`功能

```
List<string[]> ListName = new List<string[]>();
ListName.Add(new[] { "Stack", "1" });
ListName.Add(new[] { "Overflow", "2" });

// Select the first string([0]) as the key, and parse the 2nd([1]) as int
Dictionary<string,int> result = ListName.ToDictionary(key => key[0], value => int.Parse(value[1])); 
```

如果您在列表中使用某种自定义对象，您也可以这样做

```
List<MyObject<string, string>> ListName = new List<MyObject<string, string>>();
Dictionary<string, int> result = ListName.ToDictionary(key => key.String1, value => int.Parse(value.String2));

public class MyObject<T, U>
{
    public MyObject(T string1, U string2)
    {
        String1 = string1;
        String2 = string2;
    }

    public T String1 { get; set; }
    public U String2 { get; set; }
} 
```

**注意：**如果有可能它可能不是数字，您应该在`int.Parse`或使用周围添加错误检查。`Int.TryParse`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:16:12.753

你可以这样使用：

```
List<KeyValuePair<String, String>> ListName = new List<KeyValuePair<String, String>>();
Dictionary<String, Int32> dict = new Dictionary<String, Int32>();
ListName.ForEach(e=> dict.Add(e.key, Int32.Parse(e.Value))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:12:58.873

我不确定整数的确切来源，但这样的事情应该可以工作：

```
Dictionary<string, int> dict = new Dictionary<string, int>();
list.ForEach(x => dict.Add(x, theInteger)); 
```

# c++ - 为什么 PyObject_Print 会崩溃？

> ID：14888544
> 
> 赞同：1
> 
> 时间：2013-02-15T05:03:11.570
> 
> 标签：c++, python, python-3.x, c-api

我一直在使用 Python 3.3 C-API 来查看是否可以在计划中的即将进行的项目中使用它，但几乎立即遇到了问题。

甚至用 0xc0000005 作为返回来编写这个简单的崩溃：

```
#include <Python.h>
#include <cstdio>

int main(){
    Py_Initialize();

    Py_IncRef(Py_True); //just in case?
    PyObject_Print(Py_True,stdout,Py_PRINT_RAW);
    Py_DecRef(Py_True);

    Py_Finalize();
    return 0;
} 
```

测试显示 PyObject_Print 正在产生崩溃。这段代码和/或我的设置有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:09:12.740

这很可能是由于不正确的链接。当`File*`您的代码中的 与`File*`您链接的 python 库中的不同时，崩溃很常见。当喜欢的库由不同的编译器或不同版本的编译器编译时，可能会发生这种情况，这些编译器使用不同的运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T17:21:28.893

当我从 Pyhton 2.x -> 3.x 移动一个 C 模块时，我的 PyObject_Print() 崩溃了

首先，检查 C 模块中的 MS VS 版本 (MSC) 是否与 Python 报告的版本匹配。

例如，运行 python.exe 报告：Python 3.3.2 (v3.3.2:d047928ae3f6, May 16 2013, 00:03:43) [MSC v.1600 32 bit (Intel)] on win32

将 fprintf 添加到模块的 init 函数中：

fprintf(stderr, "C - MSC_VER %d\n", _MSC_VER);

给予：

C - MSC_VER 1600

其次，检查您的命令行选项。同样，我的简单测试模块的命令是：

cl.exe /Fosmod.obj /c /I "%INCLUDE%" /I c:\python33\include smod.c link.exe /dll /out:smod.pyd smod.obj /LIBPATH:c:\python33\libs

这些导致我的模块在 PyObject_Print() 中崩溃！

快速阅读“cl”命令行选项并添加“/MD”：

cl.exe /MD /Fosmod.obj /c /I "%INCLUDE%" /I c:\python33\include smod.c link.exe /dll /out:smod.pyd smod.obj /LIBPATH:c:\python33 \库

固定的！

# android - 如何在 Android 中显示 UpComing Facebook Friends 生日

> ID：14888546
> 
> 赞同：2
> 
> 时间：2013-02-15T05:03:24.693
> 
> 标签：android, facebook, android-facebook

我正在编写一个应用程序，我在其中以 1 月到 12 月的形式获取朋友列表，如屏幕截图所示

现在我想通过使用当前日期以即将到来的 Facebook 朋友生日的形式显示...请有人帮助我...

如下图所示，您可以看到我的朋友排在首位，那些生日已经消失，但我仍然排在首位，所以我只想以即将到来的生日的形式显示列表

```
 public View getView(int position, View convertView, ViewGroup parent) 
    {
        JSONObject jsonObject = null;
        try 
        {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e) {

        }

        FriendItem friendItem;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.listfb_friends, null);
            friendItem = new FriendItem();
            convertView.setTag(friendItem);
        } else 
        {
            friendItem = (FriendItem) convertView.getTag();
        }

        friendItem.friendPicture = (ImageView) convertView
                .findViewById(R.id.picture);
        friendItem.friendName = (TextView) convertView
                .findViewById(R.id.name);
        friendItem.friendDob = (TextView) convertView
                .findViewById(R.id.dob);
        friendItem.friendLayout = (RelativeLayout) convertView
                .findViewById(R.id.friend_item);

        try 
        {
            String uid = jsonObject.getString("uid");
            String url = jsonObject.getString("pic_square");
            friendItem.friendPicture.setImageBitmap(picturesGatherer.getPicture(uid, url));
        } catch (JSONException e) 
        {
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("Birthday Not Mentioned");
        }

        try 
        {
            friendItem.friendName.setText(jsonObject.getString("name"));
            friendItem.friendDob.setText(jsonObject.getString("birthday"));

            if(!(jsonObject.getString("birthday").equalsIgnoreCase("null")))
            {
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
            }
            else
            {
            friendItem.friendDob.setText("Birthday Not Added");
            }

        } catch (JSONException e) 
        {
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }
        listofshit.put(position, friendItem);
        return convertView;
    } 
```

查询获取记录：

```
 String query = "SELECT name, birthday, uid, pic_square FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1=me())AND birthday_date >= '01/01' AND birthday_date <= '31/12' ORDER BY birthday_date"; 
```

您可以在这里找到原始代码：

```
https://github.com/chrtatu/FacebookFriendsList 
```

# ruby - 哈特尔章。9.2.2 测试失败

> ID：14888549
> 
> 赞同：0
> 
> 时间：2013-02-15T05:03:41.580
> 
> 标签：ruby, testing, ruby-on-rails-3.2, railstutorial.org

我即将进入第二节。9.2.3 当我的规格测试突然变成红色时！！！！我究竟做错了什么？？这是我的错误：

```
Failures:

  1) Authentication authorization as wrong user visiting Users#edit page 
     Failure/Error: it { should_not have_selector('title', text: full_title('Edit user')) }
       expected css "title" with text "Ruby on Rails Tutorial Sample App | Edit user" not to return anything
     # ./spec/requests/authentication_pages_spec.rb:72:in `block (5 levels) in <top (required)>'

  2) Authentication authorization as wrong user submitting a PUT request to the Users#update action 
     Failure/Error: specify { response.should redirect_to(root_path) }
       Expected response to be a <:redirect>, but was <200>
     # ./spec/requests/authentication_pages_spec.rb:77:in `block (5 levels) in <top (required)>'

Finished in 1.57 seconds
64 examples, 2 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:72 # Authentication authorization as wrong user visiting Users#edit page 
rspec ./spec/requests/authentication_pages_spec.rb:77 # Authentication authorization as wrong user submitting a PUT request to the Users#update action 
```

authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  private

    def signed_in_user
      redirect_to signin_url, notice: "Please sign in." unless signed_in?
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

session_helper.rb

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end
end 
```

user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end

        it "should create a user" do
         expect { click_button submit }.to change(User, :count).by(1)
      end
    end
  end

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }
      before do
        fill_in "Name",             with: new_name
        fill_in "Email",            with: new_email
        fill_in "Password",         with: user.password
        fill_in "Confirm Password", with: user.password
        click_button "Save changes"
      end

      it { should have_selector('title', text: new_name) }
      it { should have_selector('div.alert.alert-success') }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should  == new_name }
      specify { user.reload.email.should == new_email }
    end
  end
end 
```

可能是什么问题？这些东西几乎正是本教程所要求的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:10:53.857

将您的操作更改`edit`为：

```
def edit
  @user = User.find(params[:id])
end 
```

您操作的第一行`update`也应该这样做：

```
def update
  @user = User.find(params[:id])
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T18:34:27.760

对于可能遇到此问题的其他人，UsersController 缺少以下内容：

```
before_action :correct_user,    only: [:edit, :update] 
```

这使用您在 SessionsHelper 中的方法，因为它是在编辑和更新之前完成的，`@user = User.find(params[:id])`在编辑和更新中相同的评估变得多余。

# javascript - Javascript 函数从 div 中减去不起作用。

> ID：14888551
> 
> 赞同：0
> 
> 时间：2013-02-15T05:03:56.190
> 
> 标签：javascript, html, function

我想在调用时使用 javascript 函数从 div 中减去 50px。为什么这不起作用？

```
<!DOCTYPE html>
<html>
<head>
<script>
        function resizeDiv(id)
        {
            obj.style.height = ( parseFloat( obj.style.height ) - 50 ) + 'px';
        }
        </script>

<style type="text/css">
            #divId{
            background:blue;
            width:300px;
            height:100px;

</style>
</head>
<body>
    <button onclick="resizeDiv('divId')">Try it</button>   
    <div id="divId"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:12:19.640

您没有为高度定义 obj 或样式属性，并且错过了 css 中的括号：

```
<!DOCTYPE html>
<html>
<head>
<script>
function resizeDiv(id){
   var obj=document.getElementById(id);
    if(obj){
        obj.style.height= (obj.offsetHeight- 50)+ 'px';
    }
}
</script>
<style type= "text/css">
#divId{
    background:blue;
    width:300px;
    height:100px;
}
</style>

</head>
<body>
    <button onclick="resizeDiv('divId')">Try it</button>   
    <div id="divId"></div>
</body>
</html> 
```

# c - 编写我自己的内存管理器

> ID：14888555
> 
> 赞同：-1
> 
> 时间：2013-02-15T05:04:35.950
> 
> 标签：c, algorithm, memory-management, memory-fragmentation

我想分配一些巨大的动态内存，然后为它编写我自己的内存管理器。即当我的代码需要内存时，我会从这个内存池中分配。我希望算法能够处理内部和外部碎片。哪个是最有效的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:19:34.790

对于这些标准，我会选择 Doug Lea 的[http://g.oswego.edu/dl/html/malloc.html](http://g.oswego.edu/dl/html/malloc.html)，它为许多不同大小的每一个维护存储块的集合 - 它可以快速找到大小您需要，并且重复使用相同大小的块可以减少碎片。请注意（[http://entland.homelinux.com/blog/2008/08/19/practical-efficient-memory-management/](http://entland.homelinux.com/blog/2008/08/19/practical-efficient-memory-management/)）这不是针对多线程进行调整的。

如果我自己写一个，我会选择[http://en.wikipedia.org/wiki/Buddy_memory_allocation](http://en.wikipedia.org/wiki/Buddy_memory_allocation)，因为它速度快而且在用户空间中不常用（不常用，因为它限制了可能的块大小，导致内部碎片化）。事实上，前段时间我做过 - [http://www.mcdowella.demon.co.uk/buddy.html](http://www.mcdowella.demon.co.uk/buddy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:51:10.310

这个问题是模棱两可的，因为“最有效”这个词并不清楚。你没有说它应该是最有效的。

举个例子：有一种称为第一次拟合的策略，它可能比最佳拟合更快，但可能导致堆的更多碎片化（一件非常糟糕的事情）。另一方面，最佳拟合在一定程度上减少了外部碎片，但仍然受到它的影响，同时找到一块空闲内存需要更多时间。还有一种称为伙伴堆的策略，您不会受到外部碎片的影响，而是会受到内部碎片的影响。但至少在那里找到一个空闲块通常很快。

您会看到选择算法实际上取决于您的要求。分配应该快还是碎片少？分配行为是什么？是否经常分配和释放小的不均匀块或只有大块？还有更多的因素在这里发挥作用。

也许你想要这样的答案。如果不是，我建议您明确您的要求。

# javascript - 如何暂停/杀死站点中的第三方脚本？

> ID：14888556
> 
> 赞同：0
> 
> 时间：2013-02-15T05:04:38.977
> 
> 标签：javascript, html, css, ajax, database

在我的页面中，我运行了名为 fls.doubleclick 的第三方脚本。由于请求被发送到服务器并且响应时间很差，因此影响了页面性能。

我尝试实现此代码以在页面加载 5 秒后推迟脚本请求。

```
<script type="text/javascript">
function fltFunction()
{
    setTimeout(function(){
        //my third party script goes here
    },5000); 
}       
fltFunction();
</script> 
```

有没有一种方法可以暂停或终止在一定时间后发送到服务器的请求，比如 10 秒后？

# jms - 使用临时队列超时读取的 JMS 同步请求/回复

> ID：14888564
> 
> 赞同：1
> 
> 时间：2013-02-15T05:05:31.957
> 
> 标签：jms, java-ee-6, glassfish-3

我目前在使用 jms 同步请求/回复方法时遇到问题，这就是发生的情况：

1.）ProgramA创建一个jms消息，一个临时队列并将其设置为replyTo。

2.) ProgramB 有一个从 ProgramA 创建的消息的侦听器，处理消息并回复它。但是 ProgramB 需要与有时需要超过 10 秒才能回复的第 3 方 Web 服务进行通信，这就是我将消费者设置为侦听 5000（5 秒）的问题，当然之后它会超时。所以没有收到消息。

我的观察： 1.) 即使 ProgramA 已读完（还没有回复，那一刻我尝试删除临时队列）。它不能并且 ProgramB 仍然能够写入回复队列，但没有人会阅读该消息（为时已晚）。

当我尝试将 5s 更改为 20s 收听时间时，问题就解决了，但这是正确的方法吗？

当 ProgramA 停止读取时，ProgramB 是否有可能不尝试写入队列？

部分代码：

```
Destination replyQueue = send(jmsUtil, actionDTO);
SalesOrderResponseDTO responseDTO = readReply(jmsUtil, replyQueue, actionDTO);

public Destination send(JmsSessionUtil jmsUtil, SalesOrderActionDTO soDTO) {
    try {
        utx.begin();        
        jmsUtil.send(soDTO, null, 0L, 1, Long.parseLong(configBean.getProperty("jms.payrequest.timetolive")), true);
        utx.commit();
        return jmsUtil.getReplyQueue();
    } catch (Exception e) {
        try {
            utx.rollback();
        } catch (Exception e1) {

        }       
    }
    return null;
}

public SalesOrderResponseDTO readReply(JmsSessionUtil jmsUtil, Destination replyQueue, SalesOrderActionDTO actionDTO) {
    SalesOrderResponseDTO responseDTO = null;
    try {       
        utx.begin();

        responseDTO = (SalesOrderResponseDTO) jmsUtil.read(replyQueue);

        if (responseDTO != null) {
            // fires the response event
            SalesOrderResponsePayload eventPayload = new SalesOrderResponsePayload();
            eventPayload.setResponseDTO(responseDTO);
            responseEvent.fire(eventPayload);
        } else { // timeout
            ((TemporaryQueue) replyQueue).delete();
            jmsUtil.dispose();
        }
        utx.commit();
        return responseDTO;
    } catch (Exception e) {
        try {
            utx.rollback();
        } catch (Exception e1) {
        }
    }
    return responseDTO;
}

public String send(MessageDTO messageDTO,
            JMSQueueEnum resultNotificationQueue, Long parentProcessId,
            int JMSPriority, long timeToLive, boolean hasReply)
            throws JMSException, InvalidDTOException, NamingException {

    try {
        // Process optional parameters
        messageDTO.setResultNotificationQueue(resultNotificationQueue);
        messageDTO.setParentProcessId(parentProcessId);

        // Wrap MessageDTO in a JMS ObjectMessage
        ObjectMessage msg = MessageDTOHelper.serialize(session, messageDTO);
        msg.setJMSType(messageDTO.getClass().getSimpleName());
        msg.setStringProperty("DTOType", messageDTO.getClass()
                .getSimpleName());

        requestProducer = session.createProducer(queue);

        if (hasReply) {
            replyQueue = session.createTemporaryQueue();
            replyConsumer = session.createConsumer(replyQueue);     
            msg.setJMSReplyTo(replyQueue);
        }

        if (JMSPriority > -1) {
            requestProducer.send(msg, DeliveryMode.PERSISTENT, JMSPriority,
                    timeToLive);
        } else {
            // Send the JMS message
            requestProducer.send(msg);
        }
        return msg.getJMSMessageID();
    } catch (Exception e) {

    }

    return null;
}

public MessageDTO read(Destination replyQueue) throws JMSException,
            NamingException {
    if (replyQueue instanceof Queue) {
        Message msg = replyConsumer.receive(20000);

        if (msg == null) {
            return null;
        }

        MessageDTO messageDTO = MessageDTOHelper
                .deserialize((ObjectMessage) msg);

        return messageDTO;
    } else {

    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:46:18.393

您可以让 A 在其消息中添加一个带有当前时间戳 + 5 秒的标头。当 B 收到第 3 方的响应时，如果当前时间大于 header，它应该丢弃结果而不发送。您可以为此使用 time-to-live jms 消息属性，尽管这不是它的明确目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:41:40.757

这里的实际问题是您需要同步还是异步通信。

我总是更喜欢异步，从你的问题看来，在你的情况下也不需要同步通信。但是，如果出于某种原因进行同步，那么您将陷入临时队列 - 您必须指定超时间隔，并且您将面临问题中表达的问题。如果程序 A 可以等待，请提高超时间隔，尽管这远非最佳。据我所知，程序 B 不可能检查 A 是否还在听。

在异步通信的情况下，您（至少）有两个 JMS 选项：

1.  使用不同的消息队列 - 程序 A 在 Queue1 上发送消息并完成，但在 Queue2 上侦听（例如，通过消息驱动 Bean），程序 B 在完成后将其响应。小缺点是使用了一对额外的生产者和消费者。
2.  使用相同的消息队列 - 程序 A 和程序 B 都在 Queue1 上发送和接收消息，但使用不同的消息选择器（参见[此处](http://docs.oracle.com/javaee/6/api/javax/jms/Message.html)的描述）。基本上，消息选择器将过滤特定侦听器的消息，从而允许使用相同的队列进行双向通信。

也可以看看：

*   [JMS同步消息消费](http://effectivemessaging.blogspot.com/2009/01/jms-synchronous-message-consumption.html)

# c++ - 在 C++ 中调用 matlab mex 文件

> ID：14888569
> 
> 赞同：2
> 
> 时间：2013-02-15T05:05:58.697
> 
> 标签：c++, matlab, mex

我有一个已知接口的 Matlab mex 文件，这个 mex 文件是由其他人提供的，所以我无法访问代码。有没有什么有效的方法可以在 C++ 中调用 mex 函数？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:55:48.497

你考虑过使用[`mexCallMatlab`](http://www.mathworks.com/help/matlab/apiref/mexcallmatlab.html)吗？
您可以将 mex 文件视为标准 matlab 函数，并使用`mexCallMatlab`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:00:43.420

mex 文件只是动态库。您可以使用 加载它们`LoadLibrary`并使用 调用它们的函数`GetProcAddress`。（或等效于 *nix`dlopen`和`dlsym`）。

将参数设置为与 MatLab 传递的内容兼容会有点痛苦，但并不是特别困难。如果您有自己编写 mex 函数的经验，这将有所帮助，因此您熟悉调用约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:13:38.553

1.  ***来自 Matlab***的mexext 调用会告诉您系统允许的兼容性。（32 位或 64 位）

2.  无法从 C++ 环境*AFAIK*调用 mex 编译的可执行文件。它们与 Matlab 命令窗口/ Matlab 函数一起工作。

前任：

> system("mymex") 会给我错误：

```
'mymex' is not recognized as an internal or external command,
operable program or batch file. 
```

> 系统（“ttt.mexw32”）；

```
will popup a window asking me to select a program to open that file with. 
```

我也怀疑在一个系统上编译的 .mexw32/.mexw64 可能与 .exe （可执行文件）一样在其他系统上工作。原因可能是Matlab Release版本不兼容等。（对此不太了解，请查过一次）

**不过，您可以轻松地将他们的 mex 可执行文件与 Matlab 一起使用。**

# .net - 在异步 void 操作中引发未处理的异常会使 Web API 服务崩溃

> ID：14888572
> 
> 赞同：6
> 
> 时间：2013-02-15T05:06:28.560
> 
> 标签：.net, exception, asp.net-web-api

根据[文档](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling) `HttpResponseException`由 Web API 自动处理，Web API 应该只是返回`HttpResponseMessage`给客户端对应的`HttpStatusCode`. 它工作......通常。

`HttpResponseException`但是，如果我们从标记为的操作中抛出，`async`那么这将不起作用，并且`HttpResponseException`只会使整个服务崩溃，并显示“异常已被用户代码未处理”消息。添加自定义异常过滤器并不能解决问题，因为 Web API 不会捕获`HttpResponseException`消息。

**更新 1** 我进一步调查并发现，一旦您将`await`修饰符添加到操作，则该操作的每个未处理异常都会使 Web API 服务崩溃。并且不涉及 ExceptionFilterAttributes，Web API 只是不执行它们。您甚至不必从真正的异步代码中抛出异常，添加`async`到操作以使每个异常都完全未处理就足够了。

在这里，这可以正常工作，异常可以被一些异常过滤器捕获：

```
public void Test()
{
    throw new Exception("Hello");
} 
```

这会导致服务崩溃：

```
public async void Test()
{
    throw new Exception("Hello");
} 
```

**更新 2**`void`好吧，如果我们更改为某种真实类型， 看起来一切正常，这里：

```
public async Task<int> Test()
{
    throw new Exception("Hello");
} 
```

因此，看起来像是`async void`导致服务崩溃的未处理异常，但`async Task<SomeType>`运行良好，异常过滤器捕获除此之外的所有内容`HttpResponseException`，`HttpResponseException`并由 Web API 正确处理。

看起来我刚刚自言自语，但是找出为什么**无法正确处理动作中****的异常会很有趣？`async void`**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T05:47:02.020

避免的原因之一`async void`是这些方法进行错误处理的方式。

`async void`方法旨在用作事件处理程序。*所有*其他`async`方法应该是`async Task`or `async Task<T>`。`async`同步`void`返回方法的等价物是`async Task`，*不是* `async void`。

`async`返回任务对象的方法会将异常放在该任务对象上。`async void`方法没有任务对象，因此它们通过在方法开始执行`SynchronizationContext`时处于活动状态的情况下引发异常来处理异常。`async void`这模拟了事件处理程序的行为。

# iphone - CorePlot 极坐标图

> ID：14888577
> 
> 赞同：1
> 
> 时间：2013-02-15T05:07:10.010
> 
> 标签：iphone, ios6, core-plot

很明显，我需要尝试修改 CorePlot 代码以允许我绘制 Polar/Radar 图，因为试图将圆/辐条绘制为 ScatterPlot 时内存使用量很大。

我意识到我可以继续对实际的极坐标数据使用 CPTScatterPlot，但是不知何故我需要修改 drawGridLinesInContext，这样，CPTXCoordinate 将绘制圆形线，而不是在每个位置绘制直线，CPTYCoordinate 将被忽略，而 CPTZCoordinate 将绘制辐条。

我必须基于它们的 XY 兄弟创建新类，即 CPTPolarGraph、CPTPolarPlotSpace、CPTPolarAxisSet、CPTPolarAxis。新代码继续使用 X 和 Y 轴来绘制这些轴，但是引入了 Z 轴来管理辐条。

现在我似乎已经破解了这个，但是如果我向上和向下滚动，圆圈会继续通过 X 和 Y 轴刻度，就像它们应该做的那样，但是当我左右滚动时，圆圈会被重新绘制并且不再坐在蜱虫上。

我显然需要在这里进行更多调试，但希望 CorePlot 工作人员提供一些关于可能发生的事情的指示。我可以压缩我修改过的 CorePlot_1.1 版本，包括一个示例极坐标散点图，如果需要，可以转发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:24:28.500

这可能是像素对齐问题。刻度绘图代码将刻度标记与像素网格对齐，但新的轴绘图没有。查看**CPTUtilities.h**`CPTAlignRectToUserSpace()`中的其他对齐功能。

 **编辑：您可能还需要`zRange`在绘图空间中使用自定义设置器方法。使其类似于`xRange`和`yRange`设置器。这些方法发出的通知很重要——当绘图空间发生变化时，它们会强制图形的其他部分重新绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:30:31.747

centerViewPoint 的定位精确跟踪，因为辐条总是从同一点生成，无论中心在 plotArea 中的何处。环也总是从同一个中心生成。在我看来，不知何故，当我左右滚动时，环的直径从第一个绘图演示中发生了变化，但是当我向上滚动时，它们没有。请注意，当绘图滚动到左边缘或右边缘时，主要环再次排列在主要刻度上，次要刻度也是如此。我尝试反转代码，以便仅绘制 CPTCoordinateY，我看到相同的效果，除了向上滚动显示环直径大小的变化。现在`CGPoint startViewPoint = [thePlotSpace plotAreaViewPointForPlotPoint:startPlotPoint];`，从 x 坐标确定环的直径的方法可能没有正确返回。虽然也许也是`locations`设置正在改变，但如果没有进行缩放，为什么要这样做。我在这里有点挣扎，因为当我浏览代码时`locations`似乎没有改变。**

# ruby-on-rails - 在哈希中保存错误排序后的 activerecord-postgres-hstore

> ID：14888580
> 
> 赞同：2
> 
> 时间：2013-02-15T05:07:26.150
> 
> 标签：ruby-on-rails, postgresql, serialization, rails-activerecord, hstore

**使用 Hstore 存储为哈希表，保存后在哈希中排序错误**

```
class Service < ActiveRecord::Base
  serialize :properties, ActiveRecord::Coders::Hstore
end

service = Service.new
service.properties = { "aaa" => 1, "zz" => 2, "cc" => 3, "d" => 4 }
#=> { "aaa" => 1, "zz" => 2, "cc" => 3, "d" => 4 }
service.save
reload!
service = Service.find(:id)
service.properties
#=> { "d" => "4", "cc" => "3", "zz" => 2, "aaa" => 1 }
Bug::: wrong ordering after save 
```

是不是因为在序列化之后它按树排序。有任何想法或任何人以前遇到过这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T05:29:37.870

来自[精美的 PostgreSQL 手册](http://www.postgresql.org/docs/current/static/hstore.html)：

> **F.16。hstore**
> [...]
> 这个模块实现了 hstore 数据类型，用于在单个 PostgreSQL 值中存储键/值对集。
> [...]
> 对的顺序并不重要（并且可能不会在输出中复制）。

所以 PostgreSQL 的 hstore 类型是一组无序的键/值对，不保证键/值对的任何特定顺序。一旦您的 Ruby 哈希转换为 hstore，排序就会丢失。

如果您需要维护 Hash 中的顺序，则必须使用不同的序列化格式。

# spring - Bean 属性“xxx”不可写或设置方法无效

> ID：14888588
> 
> 赞同：5
> 
> 时间：2013-02-15T05:07:57.153
> 
> 标签：spring, properties, javabeans, writable

我有弹簧网络应用程序。我已经定义了将服务 bean 作为属性的控制器 bean。也服务 bean 取道。Dao 已经过测试并且工作正常。现在服务的问题。实际上，我会确保那里的二传手！

那么问题是什么？

控制器豆：

```
<bean id="listTypeController" class="me.web.servlet.controller.ListTypeController">
<property name="typeService" ref="typeService" />
</bean> 
```

服务豆：

```
<bean id="typeService"class="me.general.service.impl.TypeServiceImpl">
<property name="genericDao" ref="genericDao" />
<property name="typeDao" ref="typeDao" />
</bean> 
```

服务等级：

```
 public class TypeServiceImpl implements TypeService {

    private TypeDao typeDao;
        private GenericDao genericDao;
    public TypeDao getTypeDao() {
    return typeDao;
}

public GenericDao getGenericDao() {
    return genericDao;
}
public void setTypeDao(TypeDao typeDao) {
    this.typeDao = typeDao;
}

public void setGenericDao(GenericDao genericDao) {
    this.genericDao = genericDao;
}
} 
```

列表控制器：

```
public class ListTypeController {

public static final String SEARCH_TYPE_FORM_ATTRIBUTE_NAME = "SearchTypeForm";

private TypeService typeService;

@ModelAttributeSEARCH_TYPE_FORM_ATTRIBUTE_NAME)
public SearchTypeForm createForm() {
    SearchTypeForm form = new SearchTypeForm();
    form.setPageSize(SystemConfiguration.getCurrentConfiguration().getDefaultPageSize());
    form.setActive(Boolean.TRUE);
    return form;
}

@RequestMapping("/administration/types")
public String listTypes(@ModelAttribute(SEARCH_TYPE_FORM_ATTRIBUTE_NAME) SearchTypeForm form,
                             Model model) {
    Page<Type> all = typeService.findTypes(form);
    model.addAttribute("all", all);
    return "/master/general/List";
}

public void setTypeServic(TypeService typeService) {
    this.typeService = typeService;
}
} 
```

错误 ：

```
Invalid property 'typeService' of bean class 
[me.web.servlet.controller.ListTypeController]: 
Bean property 'typeService' is not writable or has an invalid setter method.
Does the parameter type of the setter match the return type of the getter? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T05:14:41.737

`ListTypeController`没有适当类型的属性来接收`typeService`bean，否则该属性的设置器格式错误。请注意，如果您正在进行一些代理并且您`ListTypeController`将类型指定为`TypeServiceImpl`，那么可能是因为您应该通过其接口类型来引用 bean，`TypeService`。您的代理`typeService`将是 a `TypeService`，但不是 a `TypeServiceImpl`。

**更新：**根据您的新代码：`setTypeServic`应该是`setTypeService`，否则您的属性名称实际上是`typeServic`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-26T10:58:35.783

在我的情况下，我将我的属性命名为：`isMyProperty`并且`is`在前缀中导致了一个问题。我不得不将名称更改为`myProperty`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-07T12:09:42.180

就我而言，这是因为我有正确的 setter 和 getter，但每个都有不同的类型。

我的 setter 获取 String 并将其解析为目标枚举类型，而我的 getter 直接返回枚举。

由于某种原因，Spring (v3) 感到困惑。

# plugins - PlayPlugin 实例是否在不同线程之间共享（Play 1.2.5）

> ID：14888589
> 
> 赞同：0
> 
> 时间：2013-02-15T05:07:58.387
> 
> 标签：plugins, playframework, thread-safety, playframework-1.x

我试图找出 PlayPlugin 对象是如何在 Play Framework (1.2.5) 中使用的。

不同的 Play 线程之间是否共享相同的 PlayPlugin 实例？

通过一些源代码查找，我想是的，但由于 Play 在很多地方都有一些元编程，而且我对这一切不太熟悉，所以我不能 100% 确定。

PlayPlugin.beforeInvocation 的调用堆栈：

*   PlayPlugin.beforeInvocation
*   PluginCollection.beforeInvocation
    *   启用插件列表是 PluginCollection 中的一个字段）
*   调用.before
    *   使用静态字段 Play.PluginCollection
    *   `Thread.currentThread().setContextClassLoader(Play.classloader)`例如，可能会影响 Play.PluginCollection 的一件事。

所有线程的单一实例 - 行为也将由文章[Play Framework: Introduction to Writing Modules](http://www.packtpub.com/article/play-framework-introduction-writing-modules)确认：

> beforeActionInvocation()：此代码在控制器调用之前执行。用于验证，Play 也使用它。您也可以在此处将其他对象放入渲染参数中。一些插件还在线程局部变量中设置了一些变量，以确保它们是线程安全的。

所以，我想答案是肯定的，实例是共享的，但想确认一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:11:24.343

你说的对。PlayPlugin（当然是子类）的每个实例都在整个 JVM 中共享。`Play.plugin(class<T> clazz)`您可以通过方法调用获得该实例。

# javascript - 由于“为空或不是对象”错误，谷歌地图标记聚类器无法在 IE7 和 IE8 中工作

> ID：14888591
> 
> 赞同：0
> 
> 时间：2013-02-15T05:08:04.403
> 
> 标签：javascript, internet-explorer, google-maps, google-maps-api-3, markerclusterer

[我有一个](http://expertforum.ro/extra/harta-bugetelor/primarii.html)在 Internet Explorer 7 和 8 中不显示的谷歌地图（js api v3）+ 标记聚类器 - 我得到了经典的 js 错误：

> 消息：'addresses[...].lt' 为空或不是对象

另一方面，[另一个](http://expertforum.ro/extra/harta-bugetelor/judete.html)使用非常相似的 json 文件但不使用标记聚类器的示例 - 显示相同的错误，但在地图上呈现标记。

所以我什至不确定它是 .json 语法错误，而是困扰标记聚类器实例的东西，但我不知道是什么

# fireworks - Adobe Fireworks CS6 纹理位于我的 Win7 机器上的什么位置？

> ID：14888592
> 
> 赞同：0
> 
> 时间：2013-02-15T05:08:07.127
> 
> 标签：fireworks

我希望在我的网站上使用一种不太糟糕的纹理，但在我的机器上找不到它。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:25:11.317

我相信实际文件位于隐藏文件夹中，因此您需要先[显示这些](http://helpx.adobe.com/x-productkb/global/show-hidden-files-folders-extensions.html)文件，然后它们应该在或附近`C:Users/USERNAME/AppData/Roaming/Adobe/Fireworks CS6/Textures`。

# mysql - MySql 错误：#105（代码 150）。创建数据库架构时，我收到错误代码 150。

> ID：14888593
> 
> 赞同：4
> 
> 时间：2013-02-15T05:08:27.457
> 
> 标签：mysql, sql, database-design, mysql-error-1005

```
DROP SCHEMA IF EXISTS `YouthMinistry` ;
CREATE SCHEMA IF NOT EXISTS `YouthMinistry` DEFAULT CHARACTER SET utf16 COLLATE utf16_general_ci ;
USE `YouthMinistry` ;

-- -----------------------------------------------------
-- Table `YouthMinistry`.`group`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `YouthMinistry`.`group` ;

CREATE TABLE IF NOT EXISTS `YouthMinistry`.`group` (
  `groupid` INT NOT NULL AUTO_INCREMENT ,
  `group_name` VARCHAR(100) NOT NULL ,
  `group_desc` VARCHAR(255) NULL ,
  PRIMARY KEY (`groupid`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `YouthMinistry`.`groupmembers`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `YouthMinistry`.`groupmembers` ;

CREATE TABLE IF NOT EXISTS `YouthMinistry`.`groupmembers` (
  `groupid` INT NOT NULL ,
  `memberid` INT NOT NULL ,
  PRIMARY KEY (`groupid`, `memberid`) ,
  INDEX `groupid_idx` (`groupid` ASC) ,
  CONSTRAINT `groupid`
    FOREIGN KEY (`groupid` )
    REFERENCES `YouthMinistry`.`group` (`groupid` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `YouthMinistry`.`role`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `YouthMinistry`.`role` ;

CREATE TABLE IF NOT EXISTS `YouthMinistry`.`role` (
  `roleid` INT NOT NULL AUTO_INCREMENT ,
  `role_name` VARCHAR(100) NOT NULL ,
  `role_desc` VARCHAR(255) NULL ,
  PRIMARY KEY (`roleid`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `YouthMinistry`.`rolemembers`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `YouthMinistry`.`rolemembers` ;

CREATE TABLE IF NOT EXISTS `YouthMinistry`.`rolemembers` (
  `roleid` INT NOT NULL ,
  `memberid` INT NOT NULL ,
  PRIMARY KEY (`roleid`, `memberid`) ,
  INDEX `groupid_idx` (`roleid` ASC) ,
  FOREIGN KEY (`roleid` )
    REFERENCES `YouthMinistry`.`role` (`roleid` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `YouthMinistry`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `YouthMinistry`.`users` ;

CREATE TABLE IF NOT EXISTS `YouthMinistry`.`users` (
  `memberid` INT NOT NULL AUTO_INCREMENT ,
  `username` VARCHAR(45) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  `email` VARCHAR(100) NULL ,
  `first_name` VARCHAR(45) NOT NULL ,
  `last_name` VARCHAR(45) NOT NULL ,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` DATETIME NOT NULL ,
  PRIMARY KEY (`memberid`, `username`, `password`) ,
  UNIQUE INDEX `username_UNIQUE` (`username` ASC) ,
  INDEX `memberid_idx` (`memberid` ASC) ,
  INDEX `memberid_idx1` (`memberid` ASC) ,
  FOREIGN KEY (`memberid` )
    REFERENCES `YouthMinistry`.`groupmembers` (`memberid` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  FOREIGN KEY (`memberid` )
    REFERENCES `YouthMinistry`.`rolemembers` (`memberid` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `YouthMinistry`.`eventgroup`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `YouthMinistry`.`eventgroup` ;

CREATE TABLE IF NOT EXISTS `YouthMinistry`.`eventgroup` (
  `eventid` INT NOT NULL ,
  `groupid` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`eventid`, `groupid`) ,
  INDEX `groupid_idx` (`groupid` ASC) ,
  FOREIGN KEY (`groupid`)
    REFERENCES `YouthMinistry`.`group` (`groupid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `YouthMinistry`.`event`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `YouthMinistry`.`event` ;

CREATE TABLE IF NOT EXISTS `YouthMinistry`.`event` (
  `eventid` INT NOT NULL AUTO_INCREMENT ,
  `event_name` VARCHAR(255) NOT NULL ,
  `event_desc` VARCHAR(255) NULL ,
  PRIMARY KEY (`eventid`) ,
  INDEX `eventid_idx` (`eventid` ASC) ,
  FOREIGN KEY (`eventid` )
    REFERENCES `YouthMinistry`.`eventgroup` (`eventid` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

我正在为我正在制作的网站创建数据库，当我运行创建脚本时，它给了我以下错误：错误代码：1005。无法创建表'youthministry.users'（错误号：150）

我查看了以下资源以获取此错误的可能解决方案： [http ://www.webdeveloper.com/forum/showthread.php?68260-mySQL-multiple-foreign-](http://www.webdeveloper.com/forum/showthread.php?68260-mySQL-multiple-foreign-keys) [keys http://forums.devarticles.com/ mysql-development-50/mysql-foreign-key-problem-errno-150t-7704.html](http://forums.devarticles.com/mysql-development-50/mysql-foreign-key-problem-errno-150t-7704.html)

我检查了主键和外键声明，以确保一切正确。

任何帮助深表感谢。此外，这仍然是一个原型，欢迎对初始模式发表任何评论。我还是数据库设计的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:25:11.303

您只能在一个表上创建引用另一表上的键的外键。这个特定的问题是`memberid`不是任何一个`groupmembers`或`rolemembers`表上的键。只需添加`KEY (memberid)`到这些表中，您就可以开始使用了。

外键类型必须匹配的另一个问题。 `eventgroup`有`groupid varchar`，但正在引用具有 的`groups`表`groupid INT`。纠正这一点。

* * *

至于建议，我强烈建议每个主键只有一列：您的自动增量代理键。您也应该制作这些无符号整数。

# c# - 运行应用程序时出现错误的图像格式异常

> ID：14888599
> 
> 赞同：2
> 
> 时间：2013-02-15T05:09:21.607
> 
> 标签：c#, exception, .net-assembly, badimageformatexception

请阅读问题，它不会重复。

我有一个英特尔感知计算的 dll。**他们提供了使用 dll 并且工作正常的演示控制台应用程序。**

我试图在 Windows 应用程序中使用相同的 dll。一旦我创建类的对象，它就会抛出错误：

**无法加载文件或程序集“libpxcclr，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。**

这里有什么问题我想不通。我在 x64 位机器上运行它。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:46:58.547

不是答案，但不适合评论...

*   您需要验证所有涉及的 DLL 的位数。您只指定了机器的位数，它对进程和 DLL 的位数几乎为零。如果每个 DLL 需要进程的特定位数 (x86/x64)，则需要检查它。
*   您需要获取所需的 DLL 列表以及它们必须放置的位置（GAC，相对于进程，在某些特殊文件夹中......）。通常，提供库/样本的人将拥有 DLL 列表和位置，或者拥有在正确位置配置所有 DLL 的安装程序。
*   您需要确保所有文件都在它们应该在的位置（即 DLL 可能需要标记为“复制本地”，在构建过程中显式复制本机二进制文件到适当的位置......）。重建通常会手动清理文件位置 - 尝试使所有复制操作成为构建的一部分。

在最坏的情况下，使用“depends”和“process explorer”之类的工具来挖掘依赖关系......

# javascript - 使用提交按钮提交数据表

> ID：14888603
> 
> 赞同：2
> 
> 时间：2013-02-15T05:09:43.467
> 
> 标签：javascript, jquery, html, datatables, jeditable

我有一个数据表，其中一个列是可编辑的（使用 jeditable 插件）。所以现在我需要一个通用的提交按钮来提交整个更改。这是我的数据表条目。

```
 $(document).ready(function(){
            $('#jtable').html( '<table cellpadding="1" cellspacing="1" border="1" class="pretty" id="edit_table"></table>' );
            $("#edit_table").dataTable({
                "aaData": {{ result | safe }},
                "aLengthMenu" : 100,
                "aaSorting": [],
                "aoColumns" : [
                    {'sTitle' : 'Options' },
                    {'sTitle' : 'Values'}
                ],
                "iDisplayLength": -1,
                "bFilter" : false,
                "bSearchable" :false,
                "bInfinite" :true,
                "bSort" :false,
                "bPaginate": false
            });
          $('#edit_table tbody td:eq(3),td:eq(5),td:eq(7)').editable( 'Reschedule.html',{
                "callback": function( sValue, y ) {
                    var aPos = oTable.fnGetPosition( this );
                    oTable.fnUpdate( sValue, aPos[0] );
                },
                "submitdata": function ( value, settings ) {
                    return {
                        "row_id": this.parentNode.getAttribute('id'),
                        "column": oTable.fnGetPosition( this )[2]
                    };
                }
            } );
        } ); 
```

所以我需要一个通用的提交按钮来提交表格上的数据。我必须使用 python 将数据更新到数据库。（我正在使用 python + flask 框架工作）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:16:53.177

我还没有使用 Python 来处理表单，所以这里的信息可能是错误的，但我希望它有一些用处。

您的 html 表单应该只有一种方法，获取或发布，而不是两者。邮寄更安全。此外，您应该使用一个操作，并将其指向您的 .py 文件，该文件将处理发布的数据。动作="myPy.py"

您还可以创建一个通用按钮并提供一个 onclick 函数来在提交表单之前执行其他操作。例如..

html部分：

```
<input type="button" value="Submit Form" class="btn_submit" onclick="submitOrder()" /> 
```

或者，您可以使用提交按钮“input type='submit'...”，然后在提交之前先使用 jQuery 调用函数，例如

```
$('#yourFormID').submit(function(e) {
//prevent default submit action        
e.preventDefault();
//run your function instead
submitOrder();
}); 
```

我还发现了一篇关于使用 Python 提交表单的文章，它可能对你有帮助...... [http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms)

# emacs - 通知关键字未在按钮小部件中触发

> ID：14888604
> 
> 赞同：0
> 
> 时间：2013-02-15T05:09:46.830
> 
> 标签：emacs, elisp

我正在从 alist 创建一个小部件，并且当小部件（通过 for 循环创建）正确显示时， :notify 指令*永远不会*被处理。我无法解释。

```
 (widget-create (get-data (author score num_comments title subreddit) a 
            (list 'push-button
              :action (lambda (&rest ignore)
                    (message "test"))
              :post-id n
              :reddit-author author
              :reddit-score score
              :reddit-comments num_comments
              :reddit-title title
              :reddit-subreddit subreddit
              (format "%s" author)))) 
```

我还尝试从头开始创建一个小部件，并且通知指令也被忽略了；

```
 (widget-create 'push-button 
   :notify (lambda (&rest ignore) 
             (message "trigger")) 
   "click me") 
```

我还读到*action*关键字的作用类似于 notify，所以我试了一下。没啥事儿。

谁能指出我正确的方向？

2012 年 6 月 10 日在 MARVIN 上的 GNU Emacs 24.1.1 (i386-mingw-nt6.2.9200)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:28:06.087

弄清楚了。事实证明，您必须将它们的键映射设置为小部件的映射才能使此功能起作用。有道理，我只是没有看过这部分文档。如果您使用自己的键盘映射，则可以将小部件的键盘映射设为父级，如下所示：

```
(defvar your-mode-map
  (let ((map (make-sparse-keymap)))
    (set-keymap-parent map widget-keymap)
    (define-key map "q" 'your-quit)
    map)
  "Custom key map") 
```

# php - 保存到磁盘时，块只能包含字符串错误

> ID：14888605
> 
> 赞同：0
> 
> 时间：2013-02-15T05:09:55.920
> 
> 标签：php, phpexcel, cakephp-2.2

**背景**

我正在生成一个通过电子邮件发送到某个地址的 Excel 工作表。它在本地主机上完美运行（完美保存，无法测试邮件，因为我没有运行本地邮件服务器）。当我托管它时，我遇到了一些问题。

**什么问题**

我把它缩小到这一行：

```
$this->PhpExcel->saveToDisk($path); 
```

`$path`是在运行时设置的自定义路径。当我运行它时，它会将文件保存到磁盘，但它给了我这个：

![在此处输入图像描述](../Images/0fed1fcce4ddf991fb46376de4337e4f.png)

这是自定义助手类中的一个函数。下面是该函数的代码：

```
public function saveToDisk($path) {
    // set layout
    $this->_View->layout = '';
    // headers
    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Content-Disposition: attachment;filename="'.$filename.'"');
    header('Cache-Control: max-age=0');
    // writer
    $objWriter = PHPExcel_IOFactory::createWriter($this->xls, 'Excel2007');
    ob_end_clean();
    $objWriter->save($path);
    // clear memory
    $this->xls->disconnectWorksheets();
} 
```

但这就是问题所在。当我将它输出到浏览器时，通过更改`$objWriter->save($path);`它`$objWriter->save('php://output');`不会给我任何错误并完美地导出文件。

**问题**

我已经用谷歌搜索了错误并尽力找到解决方案，但无济于事。有关此错误的可用信息量非常稀少或过时。有人可以告诉我我错过了什么或做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:26:18.107

当您将文件保存到磁盘时，CakePHP 仍然希望您给它一些东西以返回到发出请求的浏览器，即使它只是一条消息说文件已成功保存，或者电子邮件已发送成功。如果要保存到磁盘，则不想发送标头，因为服务器不会返回 Excel 文件，因此没有标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:34:29.457

我通过删除此行来修复它：

```
ob_end_clean(); 
```

# android - 从ViewPager android替换片段

> ID：14888608
> 
> 赞同：0
> 
> 时间：2013-02-15T05:10:05.947
> 
> 标签：android, android-fragments, android-viewpager, swipe, swipeview

## 设想

我正在创建一个带有动态片段创建的片段结构。片段中的每个项目都会创建下一个片段。在场景中，我将所有这些片段存储在片段的 ArrayList 中，以便我可以轻松替换创建的片段。

## 问题

现在，我通过从特定索引中删除片段并添加新索引来替换 ArrayList 中的片段。但是，当我尝试从该特定索引中获取片段时，它会返回旧数据，而无需再次调用 FragmentStateAdapter 的 getItem 函数。

这是我的主要课程。

## MainActivity.java

```
public class MainActivity extends FragmentActivity implements
    onPageSelectedListener {
SectionsPagerAdapter mSectionsPagerAdapter;
static int current, listItem;
static String TAG = "MainActivity";
static ViewPager mViewPager;
static ArrayList<Fragment> FragmentList;
static ArrayList<String> titles;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init();
}

public void init(){
    FragmentList = new ArrayList<Fragment>();
    titles = new ArrayList<String>();
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());
    mViewPager.setAdapter(mSectionsPagerAdapter);
}

public void addPage(int position, String title, String file, String tag) {
    Fragment fragment = new DummySectionFragment();
    Bundle args = new Bundle();
    args.putString(DummySectionFragment.ARG_FILE_NAME, file);
    args.putString(DummySectionFragment.ARG_FILE_TAG, tag);
    args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position);
    fragment.setArguments(args);
    titles.add(position, title);
    FragmentList.add(position, fragment);
}

public void NextScreen(int position, String title, String file, String tagname) {
    if(FragmentList.size()>(position-1)){
        for(int i=position; i<FragmentList.size(); i++){
            FragmentList.remove(i);
        }
    }
    addPage(position, title, file, tagname);
    mViewPager.setCurrentItem(position);

}

public static class PageChanger extends
        ViewPager.SimpleOnPageChangeListener {
    private int currentPage;

    @Override
    public void onPageSelected(int position) {
        currentPage = position;
    }

    public int getCurrentScreen() {
        return currentPage;
    }
}
public class SectionsPagerAdapter extends FragmentStatePagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
        addPage(0, "Main Fragment", "test.xml", "mytag");
    }

    @Override
    public Fragment getItem(int position) {
        return FragmentList.get(position);

    }

    @Override
    public int getCount() {
        return FragmentList.size();
    }

    @Override
    public CharSequence getPageTitle(int position) {
        if (position == 0) {
            return "Main Categories";
        }
        getItem(position);
        return titles.get(position);
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        super.destroyItem(container, position, object);
    }

}
public static class DummySectionFragment extends Fragment {
    public static final String ARG_SECTION_NUMBER = "section_number";
    public static final String ARG_FILE_NAME = "file_name";
    public static final String ARG_FILE_TAG = "tag_name";

    public DummySectionFragment() {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        savedInstanceState = this.getArguments();
        ListView parent_list = new ListView(getActivity());
        String file_name = savedInstanceState.getString(ARG_FILE_NAME);
        String tag_name = savedInstanceState.getString(ARG_FILE_TAG);
        int current_level = savedInstanceState.getInt(ARG_SECTION_NUMBER);
        PullParser pull = new PullParser(getActivity());
        pull.pullXml(file_name, tag_name);
        parent_list.setAdapter(new ListAdapter(getActivity(),
                PullParser.Xml_Tag_Info, current_level));
        return parent_list;
    }
}

@Override
public void onPageSelected(int pageno) {
    current = pageno;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:14:36.643

我找到了答案，只是在进行必要的更改后重新实例化适配器。编辑后的代码在这里。

## MainActivity.java

```
public class MainActivity extends FragmentActivity {
    SectionsPagerAdapter mSectionsPagerAdapter;
    static int current, listItem;
    static String TAG = "MainActivity";
    static boolean flag = false;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    static ViewPager mViewPager;
    static ArrayList<DummySectionFragment> FragmentList;
    static ArrayList<String> titles;
    static FragmentManager fragManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        init();
    }

    public void init() {
        FragmentList = new ArrayList<DummySectionFragment>();
        titles = new ArrayList<String>();
        mViewPager = (ViewPager) findViewById(R.id.pager);
        fragManager = getSupportFragmentManager();
        mSectionsPagerAdapter = new SectionsPagerAdapter(fragManager);
        mViewPager.setAdapter(mSectionsPagerAdapter);
        titles.add(0, "Main Categories");
    }

    public void addPage(final int position, String file, String tag) {
        DummySectionFragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putString(DummySectionFragment.ARG_FILE_NAME, file);
        args.putString(DummySectionFragment.ARG_FILE_TAG, tag);
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position);
        fragment.setArguments(args);
        try {
            FragmentList.set(position, fragment);
        } catch (IndexOutOfBoundsException e) {
            FragmentList.add(position, fragment);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void destroyFragment(int position) {
        SectionsPagerAdapter pagerAdapter = (SectionsPagerAdapter) mViewPager
                .getAdapter();
        pagerAdapter.destroyItem(mViewPager, position,
                FragmentList.get(position));
        pagerAdapter.notifyDataSetChanged();
    }

    public void addFragment(int position, Object object) {
        SectionsPagerAdapter pagerAdapter = (SectionsPagerAdapter) mViewPager
                .getAdapter();
        pagerAdapter.notifyDataSetChanged();
    }

    public void NextScreen(int position, String title, String file,
            String tagname) {

        if (FragmentList.size() > position - 1) {
            for (int i = FragmentList.size() - 1; i > position; i--) {
                titles.remove(i);
                FragmentList.remove(i);
            }
            titles.trimToSize();
            FragmentList.trimToSize();
        }

        titles.add(position, title);
        addPage(position, file, tagname);
        mViewPager.setAdapter(new SectionsPagerAdapter(fragManager));
        mViewPager.setCurrentItem(position);
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentStatePagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
            addPage(0, "catlist.xml", "pid-0");
        }

        @Override
        public Fragment getItem(int position) {
            return FragmentList.get(position);

        }

        public void setId() {

        }

        @Override
        public int getCount() {
            return FragmentList.size();
        }

        @Override
        public int getItemPosition(Object object) {
            return FragmentList.indexOf(object);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Log.v("titlePosition", position + "");
            return titles.get(position);
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static ArrayList<Xml_Item_Data> resultList = new ArrayList<Xml_Item_Data>();
        public static final String ARG_SECTION_NUMBER = "section_number";
        public static final String ARG_FILE_NAME = "file_name";
        public static final String ARG_FILE_TAG = "tag_name";
        ListView parent_list;
        public static Bundle setValues;

        public DummySectionFragment() {

        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            savedInstanceState = this.getArguments();
            parent_list = new ListView(getActivity());
            String file_name = savedInstanceState.getString(ARG_FILE_NAME);
            String tag_name = savedInstanceState.getString(ARG_FILE_TAG);
            int current_level = savedInstanceState.getInt(ARG_SECTION_NUMBER);
            PullParser pull = new PullParser(getActivity());
            pull.pullXml(file_name, tag_name);
            ListAdapter list_Creator = new ListAdapter(getActivity(),
                    PullParser.Xml_Tag_Info, current_level);
            parent_list.setAdapter(list_Creator);
            return parent_list;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:17:06.780

我认为您可以尝试在 getItemPosition() 方法中返回 POSITION_NONE。喜欢这里：[如何强制 ViewPager 重新实例化其项目](https://stackoverflow.com/questions/7369978/how-to-force-viewpager-to-re-instantiate-its-items)

# ios - 随着 x 坐标值的增加改变 alpha 值

> ID：14888609
> 
> 赞同：1
> 
> 时间：2013-02-15T05:10:19.997
> 
> 标签：ios, objective-c

是否可以同时为同一个视图赋予不同的 alpha 值？我想在 uiview 中显示颜色，但它应该淡出一个方向。意味着我想在增加它的 x 坐标值的同时改变它的 alpha 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:45:42.843

是的，您可以做到这一点，但您必须记住，alpha 值的范围是 0-1。所以在这种情况下，您可以定义您可以根据宽度定义更改，即

```
float changeInAlphaPerX = 1/self.frame.width; 
```

在你改变 x 值的地方，你可以做..

```
view.alpha = changeInAlphaPerX * x; 
```

希望能帮助到你..

# ruby-on-rails - 显示操作没有匹配的路由

> ID：14888611
> 
> 赞同：0
> 
> 时间：2013-02-15T05:10:26.637
> 
> 标签：ruby-on-rails

我在使用omniauth 通过Twitter 登录的Rails 应用程序中遇到无路由匹配错误。我使用 Railscast 启动了应用程序，其中登录的 Twitter 用户是在这样的会话控制器中创建的

```
class SessionsController < ApplicationController
def create
  twitteruser = Twitteruser.from_omniauth(env["omniauth.auth"])
  session[:twitteruser_id] = twitteruser.id
  redirect_to twitterquestions_url, notice: "Signed in!"
end 
```

我创建了一个表来存储这样的用户 Twitter 信息

```
def change
    create_table :twitterusers do |t|
      t.string :provider
      t.string :uid
      t.string :name
      t.string :image

      t.timestamps
    end
  end 
```

这是一个数据库条目

```
=> [#<Twitteruser id: 1, provider: "twitter", uid: "1121308772", name: "mytwitteraccou t", image: "http://a0.twimg.com/profile_images/3164285746/.", created_at: "2013-02-12 23:52:44", updated_at: "2013-02-12 23:52:44">] 
```

我还创建了一个这样的 Twitterusers 控制器，以便向用户展示

```
class TwitterusersController < ApplicationController

  def show
    @twitteruser = Twitteruser.find(params[:id])
  end
end 
```

在路由文件中

```
resources :twitterusers 
```

基于 rake 路由的输出，我像这样创建了一个指向 currentusers 配置文件的链接（并且还在视图中添加了一个 show.html.erb 文件）

```
<li>Signed in as <%= link_to "current_user.name", twitteruser_path %>!</li> 
```

耙路线

```
twitterusers GET    /twitterusers(.:format)                         twitterusers#index
                         POST   /twitterusers(.:format)                         twitterusers#create
         new_twitteruser GET    /twitterusers/new(.:format)                     twitterusers#new
        edit_twitteruser GET    /twitterusers/:id/edit(.:format)                twitterusers#edit
             twitteruser GET    /twitterusers/:id(.:format)                     twitterusers#show
                         PUT    /twitterusers/:id(.:format)                     twitterusers#update
                         DELETE /twitterusers/:id(.:format)                     twitterusers#destroy 
```

当我收到这个错误时，我想知道它是否与用户是在 session_controller 中创建的事实有关，所以我在会话控制器中创建了一个显示操作

session_controller

```
def show
    @twitteruser = Twitteruser.find(params[:id])
end 
```

并在路由中创建了会话资源

```
resources :sessions 
```

然后基于 rake routes 我创建了以下链接

*   以 <%= link_to "current_user.name", session_path %> 身份登录！

但得到了同样的错误

```
sessions GET    /sessions(.:format)                             sessions#index
                         POST   /sessions(.:format)                             sessions#create
             new_session GET    /sessions/new(.:format)                         sessions#new
            edit_session GET    /sessions/:id/edit(.:format)                    sessions#edit
                 session GET    /sessions/:id(.:format)                         sessions#show
                         PUT    /sessions/:id(.:format)                         sessions#update
                         DELETE 
```

会话控制器中已经有这些路由

```
 match 'auth/:provider/callback', to: 'sessions#create'
match 'auth/failure', to: redirect('/')
match 'signout', to: 'sessions#destroy', as: 'signout' 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:13:24.887

尝试改变：

```
<%= link_to "current_user.name", twitteruser_path %> 
```

到：

```
<%= link_to current_user.name, twitteruser_path(current_user) %> 
```

并将此部分修改为仅在`current_user`填充时呈现：

```
<% if current_user %>
  Your link here
<% end %> 
```

# wordpress - wordpress 3.5.1 特色图片未显示...？

> ID：14888614
> 
> 赞同：0
> 
> 时间：2013-02-15T05:10:41.797
> 
> 标签：wordpress

这就是我的function.php里面的内容

`<?php if ( function_exists( 'add_theme_support' )){ add_theme_support( 'post-thumbnails' ); }`

`if ( function_exists( 'add_image_size' )){ add_image_size('featured', 400, 340, true); add_image_size('post-thumb', 100, 140, true); } ?>`

这就是我的 index.php 里面的内容

`<?php the_post_thumbnail('post-thumb'); ?>`

1.  特色图片已`Screen Options`启用。
2.  特色图像元框显示在`Edit Post`
3.  特色图片已设置。

问题是 index.php（主页）中未显示缩略图。我错过了什么吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:16:56.987

把下面的代码放在上面：the_content();

```
<?php
   if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
   the_post_thumbnail('post-thumb');
   }
 ?> 
```

有关更多信息，请参阅：http: [//codex.wordpress.org/Function_Reference/the_post_thumbnail](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)和[https://wordpress.stackexchange.com/questions/39798/thumbnail-cropping-with-add-image-size](https://wordpress.stackexchange.com/questions/39798/thumbnail-cropping-with-add-image-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:56:38.013

替换非工作代码

```
add_theme_support(‘post-thumbnails’); 
```

使用工作变体：

```
add_theme_support( ‘post-thumbnails’, array( ‘post’, ‘page’, ‘player’ ) ); 
```

# java - (Java) 碰撞检测墙

> ID：14888619
> 
> 赞同：2
> 
> 时间：2013-02-15T05:11:22.697
> 
> 标签：java, collision-detection

我一直在尝试使用我的碰撞检测来阻止物体相互穿过。我不知道该怎么做。

当物体碰撞时，我尝试反转它们的速度矢量的方向（这样它就会远离碰撞的地方），但有时物体会相互卡住。

我试过改变他们的速度，但这只是父母互相反对。

有没有一种简单的方法来限制物体的运动，使它们不会穿过其他物体？我一直在使用矩形相交进行碰撞，我也尝试过圆形碰撞检测（使用对象之间的距离）。

想法？

```
package objects;

import java.awt.Rectangle;

import custom.utils.Vector;
import sprites.Picture;
import render.Window;

// Super class (game objects)
public class Entity implements GameObject{

    private Picture self;
    protected Vector position;
    protected Vector velocity = new Vector(0,0);
    private GameObject[] obj_list = new GameObject[0];

    private boolean init = false;

    // Takes in a "sprite"
    public Entity(Picture i){
        self = i;
        position = new Vector(i.getXY()[0],i.getXY()[1]);
        ObjectUpdater.addObject(this);
    }

    public Object getIdentity() {
        return this;
    }

    // position handles
    public Vector getPosition(){
        return position;
    }

    public void setPosition(double x,double y){
        position.setValues(x,y);
        self.setXY(position);
    }

    public void setPosition(){
        position.setValues((int)Window.getWinSize()[0]/2,(int)Window.getWinSize()[1]/2);
    }

    // velocity handles
    public void setVelocity(double x,double y){ // Use if you're too lazy to make a vector
        velocity.setValues(x, y);
    }
    public void setVelocity(Vector xy){ // Use if your already have a vector
        velocity.setValues(xy.getValues()[0], xy.getValues()[1]);
    }

    public Vector getVelocity(){
        return velocity;
    }

    // inferface for all game objects (so they all update at the same time)

    public boolean checkInit(){
        return init;
    }

    public Rectangle getBounds() {
        double[] corner = position.getValues(); // Get the corner for the bounds
        int[] size = self.getImageSize(); // Get the size of the image

        return new Rectangle((int)Math.round(corner[0]),(int)Math.round(corner[1]),size[0],size[1]); // Make the bound
    }

    // I check for collisions where, this grabs all the objects and checks for collisions on each.

    private void checkCollision(){
        if (obj_list.length > 0){
        for (GameObject i: obj_list){
            if (getBounds().intersects(i.getBounds()) && i != this){
                // What happens here?
            }
        }
        }
    }

    public void updateSelf(){
        checkCollision();
        position = position.add(velocity);
        setPosition(position.getValues()[0],position.getValues()[1]);
        init = true;
    }

    public void pollObjects(GameObject[] o){
        obj_list = o;
    }

} 
```

希望阅读起来不会太难。

**编辑：** 所以我一直在使用矩形相交方法来计算对象的位置并修改速度。它工作得很好。唯一的问题是某些物体会推动其他物体，但这太重要了。碰撞对于我正在创建的迷你游戏来说几乎是一个*额外的东西。*非常感谢您的帮助。

尽管如此，我仍然非常感谢对所提到的想法进行详细说明，因为我不完全确定如何将它们实施到我的项目中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:18:28.930

没有看到你的代码，我只能猜测发生了什么。我怀疑您的对象被卡住了，因为它们超出了其他对象的边界，最终进入了内部。确保每个对象的步长不仅仅是速度 * delta_time，而是步长受到潜在碰撞的限制。当发生碰撞时，计算它发生的时间（在 delta_time 中的某处）并跟随反弹来确定最终的对象位置。或者，只需将物体设置为接触，速度根据动量守恒定律变化。

**编辑**看到你的代码后，我可以扩展我的答案。首先，让我澄清一下您询问的一些术语。由于每次调用都`updateSelf`只是将速度矢量添加到当前位置，因此您实际上是一个单位时间增量（增量时间始终为 1）。换句话说，您的“速度”实际上是自上次调用`updateSelf`. 我建议使用显式（浮动）时间增量作为模拟的一部分。

其次，跟踪多个运动物体之间的碰撞的一般问题非常困难。无论使用什么时间增量，一个对象都可能在该增量中经历许多碰撞。（想象一个物体挤在另外两个物体之间。在任何给定的时间间隔内，物体在两个周围物体之间来回反弹的次数没有限制。）此外，一个物体可能（在分辨率的范围内）计算）同时与多个对象发生碰撞。如果对象在移动时实际改变大小（正如您的代码所暗示的那样），问题会更加复杂。

第三，您有一个重要的错误来源，因为您将所有对象位置四舍五入为整数坐标。我建议用浮点对象（`Rectangle2D.Float`而不是`Rectangle`;`Point2D.Float`而不是`Vector`）来表示你的对象。我还建议将`position`字段替换为同时捕获位置和大小的矩形`bounds`字段。这样，您不必在每次调用`getBounds()`. 如果对象大小是恒定的，这也将简化边界更新。

最后，每个对象内部都有碰撞检测逻辑存在一个重大问题：当对象 A 发现它会撞到对象 B 时，那么对象 B 也会撞到对象 A！但是，对象 B 会独立于对象 A 进行自己的计算。如果先更新 A，则 B 可能会错过碰撞，*反之亦然*。将整个碰撞检测和对象移动逻辑移动到全局算法并保持每个游戏对象相对简单会更好。

一种方法（我推荐）是编写一个“updateGame”方法，将游戏状态推进给定的时间增量。它将使用记录碰撞的辅助数据结构，可能如下所示：

```
public class Collision {
    public int objectIndex1;  // index of first object involved in collision
    public int objectIndex2;  // index of second object
    public int directionCode; // encoding of the direction of the collision
    public float time;        // time of collision
} 
```

整个算法将游戏从当前时间推进到由参数定义的新时间`deltaTime`。它的结构可能是这样的：

```
void updateGame(float deltaTime) {
    float step = deltaTime;
    do (
        Collision hit = findFirstCollision(step);
        if (hit != null) {
            step = Math.max(hit.time, MIN_STEP);
            updateObjects(step);
            updateVelocities(hit);
        } else {
            updateObjects(step);
        }
        deltaTime -= step;
        step = deltaTime;
    } while (deltaTime > 0);
}

/**
 * Finds the earliest collision that occurs within the given time
 * interval. It uses the current position and velocity of the objects
 * at the start of the interval. If no collisions occur, returns null.
 */
Collision findFirstCollision(float deltaTime) {
    Collision result = null;
    for (int i = 0; i < obj_list.length; ++i) {
        for (int j = i + 1; j < obj_list.length; ++j) {
            Collision hit = findCollision(i, j, deltaTime);
            if (hit != null) {
                if (result == null || hit.time < result.time) {
                    result = hit;
                }
            }
        }
    }
    return result;
}

/**
 * Calculate if there is a collision between obj_list[i1] and
 * obj_list[i2] within deltaTime, given their current positions
 * and velocities. If there is, return a new Collision object
 * that records i1, i2, the direction of the hit, and the time
 * at which the objects collide. Otherwise, return null.
 */
Collision findCollision(int i1, int i2, float deltaTime) {
    // left as an exercise for the reader
}

/**
 * Move every object by its velocity * step
 */
void updateObjects(float step) {
    for (GameObject obj : obj_list) {
        Point2D.Float pos = obj.getPosition();
        Point2D.Float velocity = obj.getVelocity();
        obj.setPosition(
            pos.getX() + step * velocity.getX(),
            pos.getY() + step * velocity.getY()
        );
    }
}

/**
 * Update the velocities of the two objects involved in a
 * collision. Note that this does not always reverse velocities
 * along the direction of collision (one object might be hit
 * from behind by a faster object). The algorithm should assume
 * that the objects are at the exact position of the collision
 * and just update the velocities.
 */
void updateVelocities(Collision collision) {
    // TODO - implement some physics simulation
} 
```

该`MIN_STEP`常数是一个最小时间增量，以确保游戏更新循环不会因更新如此小的时间步而无法取得进展而卡住。（对于浮点，它可能`deltaTime -= step;`保持`deltaTime`不变。）

关于物理模拟：关于[弹性碰撞](http://en.wikipedia.org/wiki/Elastic_collision)的维基百科文章为这个问题提供了一些很好的数学。

# android - 如何使用我自己的加密库在 android 中加密 sqlite？

> ID：14888621
> 
> 赞同：2
> 
> 时间：2013-02-15T05:11:35.170
> 
> 标签：android, sqlite, encryption

我希望我的 sqlite 数据库使用特定算法（AES、TwoFish）加密。如果我可以提供加密方法的名称并且我的数据库将使用该方法加密，那将是理想的。我怎样才能做到这一点？

# windows-8 - 安静时间的 ToastNotification

> ID：14888622
> 
> 赞同：1
> 
> 时间：2013-02-15T05:11:35.357
> 
> 标签：windows-8

我开发了一个桌面应用程序，它在用户处于 Metro 模式时显示 ToastNotifications。单击后，它将使用户回到显示标准桌面通知的桌面模式。

这一切都很好，除非 Windows 处于 QUNS_QUIET_TIME。桌面通知未按预期显示，但 ToastNotfications 仍会显示。我的客户希望在安静时间不显示 ToastNotifications。

代码调用 SHQueryUserNotificationState 返回一个[QUERY_USER_NOTIFICATION_STATE 枚举](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762533%28v=vs.85%29.aspx "QUERY_USER_NOTIFICATION_STATE 枚举")。提供的链接说明如下：

> 请注意，在安静时间期间，如果用户处于其他阻塞模式之一（QUNS_NOT_PRESENT、QUNS_BUSY、QUNS_PRESENTATION_MODE 或 QUNS_RUNNING_D3D_FULL_SCREEN），则 SHQueryUserNotificationState 仅返回该值，并且不报告 QUNS_QUIET_TIME。

这就是我正在经历的。对 SHQueryUserNotificationState 的调用返回的是 QUNS_APP（Windows 应用商店应用程序正在运行。）而不是 QUNS_QUIET_TIME。

有谁知道确定 QUNS_QUIET_TIME 是否有效的另一种方法或一种强制敬酒尊重安静时间的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:47:03.970

桌面通知使用与toast 通知不同的[设置。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762533%28v=vs.85%29.aspx)[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.toastnotifier.setting.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)找到 toast 通知设置。当用户在 Windows 8 设置中将通知设置为一小时时 | 通知，应用程序将无法设置 toast 通知。在此处尝试“[从桌面发送 toast 通知](http://code.msdn.microsoft.com/windowsdesktop/Sending-toast-notifications-71e230a2)”示例（C++ 代码或 C# 代码）。

# linker - 链接器错误在库中找不到符号名称

> ID：14888626
> 
> 赞同：1
> 
> 时间：2013-02-15T05:11:58.060
> 
> 标签：linker, g++

```
g++ (GCC) 4.7.2 
3.7.6-201.fc18.x86_64 #1 SMP Mon Feb 4 15:54:08 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
Fedora release 18 (Spherical Cow) 
```

你好，

我正在编译并在尝试链接程序时遇到问题。

链接器错误是：

```
/usr/bin/ld: point.o: undefined reference to symbol '_Znwj@@GLIBCXX_3.4'
/usr/bin/ld: note: '_Znwj@@GLIBCXX_3.4' is defined in DSO /lib/libstdc++.so.6 so try adding it to the linker command line
/lib/libstdc++.so.6: could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status 
```

此目标文件正在`point.o`尝试调用 libstdc++ 中不存在的函数。

当我尝试使用 readelf 检查符号名称是否存在时，我找不到它。

```
readelf --all libstdc++.so.6.0.17 | grep _Znwj@@GLIBCXX_3.4 
```

这是因为 point.o 正在寻找较旧的 libstdc++ 中可能已在更高版本中删除的符号吗？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-09-17T00:44:34.440

就我而言，我使用的是 gcc 而不是 g++。它曾经在 12 年工作，但后来在 14 年在另一台机器上构建时阻塞了。gnu 编译器确实发生了变化。我的答案是添加

```
 -lstdc++ 
```

到链接行的末尾，如错误消息所示。HTH。

# c++ - 如何找到圆碰撞响应

> ID：14888633
> 
> 赞同：1
> 
> 时间：2013-02-15T05:12:35.327
> 
> 标签：c++, game-physics, directx-9

我目前正在制作一个 2D 台球游戏，我必须使用真实的物理模拟。到目前为止，我已经完成了圆形碰撞和弹性碰撞，但是我想要一个可以找到碰撞响应速度的公式，当球在不同点与其他球碰撞时会有所不同，这要提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:23:02.447

有很多方法，但如果你能负担得起让球重叠一点（也就是说，让球的一部分“进入”另一个球），你可以把它变成一个弹簧阻尼系统并用[胡克定律](http://en.wikipedia.org/wiki/Hooke%27s_law)解决。

由于胡克定律给了你力量，你需要整合它才能找到动力。动量除以质量就是您要寻找的速度。

看看[这个](http://gafferongames.com/game-physics/spring-physics/)用于游戏开发的优秀弹簧物理介绍（其中也有他的数值积分介绍的链接）。

编辑：如果您正在寻找实用的解决方案，我建议您使用[Box2D 物理引擎](http://box2d.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:30:03.727

池碰撞可以被认为是整个板的弹性碰撞，摩擦减慢了它的运动。

不要以与圆的角度来考虑碰撞响应。使用向量将缓解这个问题。

圆-圆碰撞速度响应很容易： 1\. 检测到碰撞时 2\. 求出球朝向另一个球的法向速度。3\. 交换两个球之间的法线速度 4\. 求解 x 和 y 方向的速度

一个非常有用的网站，可以根据向量找到速度响应：http: [//archive.ncsa.illinois.edu/Classes/MATH198/townsend/math.html](http://archive.ncsa.illinois.edu/Classes/MATH198/townsend/math.html)

# objective-c - 解析问题：预期表达式（目标 C）

> ID：14888635
> 
> 赞同：0
> 
> 时间：2013-02-15T05:13:08.693
> 
> 标签：objective-c, macos, tableview

无论出于何种原因，我的 xcode 决定它不喜欢我...我收到此行标题中所述的错误

```
- (void)tableViewSelectionDidChange:(NSNotification *)notification
{
    NSInteger row = [_tableView selectedRow];
    if (row == –1) //<---- this line
    {
        return;
    }
    NSString *selectedVoice = [_voices objectAtIndex:row];
    [_speechSynth setVoice:selectedVoice];
    NSLog(@"new voice = %@", selectedVoice);
} 
```

我确实认为这与 _tableView 被弄糊涂有关，因为当我试图让 IDE 帮助我输入时（你知道它何时通过对可用函数进行 API 查找来猜测你可能会用什么来完成你的单词）它没有显示 selectedRow 的可能性:(

如果需要的话，我已将 .m 和 .h 放入[pastebin](http://pastebin.com/4gMcYd1K)以节省屏幕上的一些空间...仅供参考，我正在关注 Coca Programming for Mac OSX 第四版第 6.10 章

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:07:18.987

在你的行

```
if (row == –1) 
```

减号不是真正的减号，而是“EN DASH”（Unicode U+2013）。也许您在键入该代码时不小心按下了选项键和减号键。

用减号替换该字符可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:20:05.617

UITableView 没有名为 selectedRow 的方法。

也许你应该使用：

```
- (NSIndexPath *)indexPathForSelectedRow 
```

# php - 使用 file_get_contents 并使用表 havinfg 类中的特定部分内容

> ID：14888637
> 
> 赞同：0
> 
> 时间：2013-02-15T05:13:19.353
> 
> 标签：php, domdocument

我正在使用从另一个网站获取数据`file_get_contents()`，但我需要提取一个`<table>`带有 class 的元素`inputpanelfields`，例如：

```
...
<table class="inputpanelfields">
<!-- this is what I need -->
</table>
... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:18:15.260

```
$body = file_get_contents('http://example.org/path/to/page');
$d = new DOMDocument;
libxml_use_internal_errors(true);
$d->loadHTML($body);
libxml_clear_errors();

$x = new DOMXPath($d);
if (($table = $x->query('//table[contains(@class, "inputpanelfields")]'))) {
    echo $d->saveHTML($table->item(0));
} 
```

[**演示**](http://codepad.viper-7.com/2OqdJs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:17:59.257

您正在尝试使用 PHP 执行“Javascript 工作”。如果您的内容是 XHTML，最好的方法应该是将内容加载到 DOMDocument 中，然后使用 XPath 搜索您的特定节点，最后检索元素的输出。

在这里检查：http: [//php.net/manual/fr/domdocument.loadhtml.php](http://php.net/manual/fr/domdocument.loadhtml.php)

注意：不确定是否可行，但您可以尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:19:23.937

您将不得不构建一个函数来查找并提取它。

您可以使用 PHP stristr 检查表是否存在。函数 substr_count 会告诉你它是否存在不止一次。

假设它在页面上一次，让 $pagepart = your file_get_contents 和 $term = "inputpanelfields"

那么这应该从页面中抓取表格

```
$end = mb_stristr($pagepart,$term,false); // Case insensitive; finds the first occurrence
$beg = mb_stristr($pagepart,$term,true); // Case insensitive; finds the first occurrence
$end = mb_stristr($end,'</table>',true); // Case insensitive
$beg = mb_strrichr($beg,'<table',false); // Case insensitive
$beg = str_replace($term,'',$beg); 
```

希望这可以帮助。

史蒂夫

# iphone - 如何通过单击 iPhone 故事板中的 ActionSheet 按钮移动到下一个 viewController

> ID：14888645
> 
> 赞同：1
> 
> 时间：2013-02-15T05:13:42.633
> 
> 标签：iphone, uiactionsheet

我正在开发一个应用程序，因为我需要一个要求，即当我单击 ActionSheet 按钮时，我想转到下一个视图控制器。我尝试使用休闲代码，但它不会转到下一个视图控制器。我如何在 storybord 中连接 segues。任何人都可以帮助我。谢谢你的提前...

```
#import <UIKit/UIKit.h>
#import "SecondViewController.h"

@interface Tab2ViewController : UIViewController<UIActionSheetDelegate>
{

    UIActionSheet *actionSheet;
    SecondViewController *secondViewController;
}
@end

#import "Tab2ViewController.h"

@interface Tab2ViewController ()

@end

@implementation Tab2ViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib. 

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(60.0f, 180.0f, 200.0f,70.0f);
    [button setTitle:@"Show Action Sheet" forState:UIControlStateNormal];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    button.tintColor = [UIColor darkGrayColor];
    [button addTarget:self action:@selector(showActionSheet:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];

}

- (void)showActionSheet:(id)sender
{
     NSString *actionSheetTitle = @"Action Sheet Demo"; //Action Sheet Title
     NSString *destructiveTitle = @"Destructive Button"; //Action Sheet Button Titles
     NSString *other1 = @"Other Button 1";
     NSString *other2 = @"Other Button 2";
     NSString *other3 = @"Other Button 3";
     NSString *cancelTitle = @"Cancel Button";
     UIActionSheet *actionSheet1 = [[UIActionSheet alloc] initWithTitle:actionSheetTitle delegate:self
     cancelButtonTitle:cancelTitle destructiveButtonTitle:destructiveTitle
     otherButtonTitles:other1, other2, other3, nil];
      actionSheet1.actionSheetStyle=UIActionSheetStyleBlackTranslucent;
     [actionSheet1 showInView:self.view];

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"prepareForSegue1");
    if([[segue identifier] isEqualToString:@"third"])
    {
         NSLog(@"prepareForSegue2");
        secondViewController=[segue destinationViewController];       

    }
}

- (void)actionSheet:(UIActionSheet *)actionSheet1 clickedButtonAtIndex:(NSInteger)buttonIndex
{
    //Get the name of the current pressed button
    NSString *buttonTitle = [actionSheet1 buttonTitleAtIndex:buttonIndex];
    if  ([buttonTitle isEqualToString:@"Destructive Button"])
    {
        NSLog(@"Destructive pressed --> Delete Something");
        [self performSegueWithIdentifier:@"third" sender:nil];
    }
    if ([buttonTitle isEqualToString:@"Other Button 1"])
    {
        NSLog(@"Other 1 pressed");
        [self performSegueWithIdentifier:@"third" sender:nil];
    }
    if ([buttonTitle isEqualToString:@"Other Button 2"])
    {
        NSLog(@"Other 2 pressed");
        [self performSegueWithIdentifier:@"third" sender:nil];
    }
    if ([buttonTitle isEqualToString:@"Other Button 3"])
    {
        NSLog(@"Other 3 pressed");
        [self performSegueWithIdentifier:@"third" sender:nil];
    }
    if ([buttonTitle isEqualToString:@"Cancel Button"])
    {
        NSLog(@"Cancel pressed --> Cancel ActionSheet");
        [self performSegueWithIdentifier:@"third" sender:nil];
    }

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:16:47.323

如果您想打开新的 Viewcontroller，请尝试以下行，希望对您有所帮助：

```
 UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
   Synergy *objSynergy = (Synergy *)[mainStoryboard instantiateViewControllerWithIdentifier:@"Synergy"];
  [self presentModalViewController:objSynergy animated:YES]; 
```

Synergy 是我的新控制器名称，您将其替换为您的类名称，根据您的要求更改此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T07:31:26.093

尝试这个。这个对我有用：：

```
if ([buttonTitle isEqualToString:@"Other Button 1"]) {

    NSString * storyboardName = @"Main";
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:storyboardName bundle: nil];
    Paypal_ViewController * vc = [storyboard instantiateViewControllerWithIdentifier:@"Paypal_ViewController"];
    [self presentViewController:vc animated:YES completion:nil];

} 
```

# android - Android 计时器任务 UI 未更新？

> ID：14888649
> 
> 赞同：1
> 
> 时间：2013-02-15T05:13:57.653
> 
> 标签：android, timer, android-ui

我正在尝试制作一个颜色渐变器，它基本上是使用渐变更新布局背景，所以下面是我的主要活动

MainActivity.java

```
 public class MainActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    Thread thread;
    Button btnColor;
    View layout;
    Timer updateTimer;
    int red,green,blue;
    boolean flag=true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btnColor=(Button)findViewById(R.id.btnColor);
        btnColor.setOnClickListener(this);
        layout = findViewById(R.id.lOut);
        updateTimer=new Timer();
        red=green=blue=0;
    }

    @Override
    protected void onStop() 
    {
        super.onStop();
        updateTimer.purge();
    }

    public void changeBackground()
    {
        int colors[]=new int[2];
        if(red==255)
        {
            red=green=blue=0;
        }   
        colors[0]=Color.rgb(red, green, blue);
        colors[1]=Color.rgb(++red, ++green, ++blue);
        GradientDrawable gd = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM,colors);
        gd.setCornerRadius(0f);
        layout.setBackgroundDrawable(gd);
    }

    private class UpdateTask extends TimerTask
    {
        Handler handler;
        MainActivity ref;
        public UpdateTask(Handler handler,MainActivity ref)
        {
            super();
            this.handler=handler;
            this.ref=ref;
        }

        @Override
        public void run() 
        {
            handler.post(new Runnable() {

                @Override
                public void run() 
                {
                    ref.changeBackground();
                }
            });

        }

    }

    @Override
    public void onClick(View v) 
    {
        if(v.getId()==R.id.btnColor)
        {
            String text=btnColor.getText().toString();
            if(text.equalsIgnoreCase("start"))
            {
                updateTimer.schedule(new UpdateTask(new Handler(), this), 200, 500);// =new UpdateTask(new Handler(),this);
                btnColor.setText("stop");
            }   
            else
            {
                btnColor.setText("start");
                updateTimer.cancel();
                updateTimer.purge();
            }
        }
    }

} 
```

问题是 UI 没有按应有的方式更新，在调试代码时，确实到达了更改背景的方法，但我看不到 UI 有任何变化。

我错过了什么？

**PS：我用这个[视频](http://www.youtube.com/watch?v=4VQBn-JKpfA)作为参考**

LogCat 日志：

```
02-15 05:14:37.421: ERROR/AndroidRuntime(419): java.lang.IllegalStateException: Timer was cancelled
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at java.util.Timer.scheduleImpl(Timer.java:566)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at java.util.Timer.schedule(Timer.java:485)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at com.android.gradient.MainActivity.onClick(MainActivity.java:91)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at android.view.View.performClick(View.java:2408)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at android.view.View$PerformClick.run(View.java:8816)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at android.os.Handler.handleCallback(Handler.java:587)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at android.os.Looper.loop(Looper.java:123)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at java.lang.reflect.Method.invokeNative(Native Method)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at java.lang.reflect.Method.invoke(Method.java:521)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-15 05:14:37.421: ERROR/AndroidRuntime(419):     at dalvik.system.NativeStart.main(Native Method) 
```

# android - Android画布 - 在点之间绘制弧线并从路径中删除弧线

> ID：14888650
> 
> 赞同：4
> 
> 时间：2013-02-15T05:14:01.350
> 
> 标签：android, android-canvas, android-view, android-gesture

在我的 android 应用程序中，我想提供跟踪字母功能，如下图所示：

![在此处输入图像描述](../Images/e508f6716d65e19fca8dd8bfb218bee0.png)

在这里，我想提供字母 D 的跟踪，为此，当用户开始在弧上移动手指时，我需要在两点之间绘制弧。在这里，如果用户从起点开始移动手指并在终点停止，那么只有它应该在这些点之间绘制弧线。它还应该在弧路径上移动手指时显示弧。为此，我在下面编写了代码。我面临的问题是，当`ACTION_UP`在弧路径上触发事件时，它仍然在画布上显示弧绘图。`ACTION_UP`但是如果它在弧路径之间触发事件，我想从路径中删除它。

这是我的代码：

```
public class DrawView extends View implements OnTouchListener {

List<Point> pointsD = new ArrayList<Point>();
pointsD.add(new Point(520, 70));
    pointsD.add(new Point(520, 335));
    pointsD.add(new Point(520, 70));
    pointsD.add(new Point(520, 335));

public boolean onTouch(View view, MotionEvent event) {

    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up(x, y);
        invalidate();
        break;
    default:
        break;
    }
    return true;
}
private void touch_start(float x, float y) {
      if (checkPoint(x, y, mLastPointIndex)) {
                mPath.reset();
            isPathStarted = true;
          } else {
            isPathStarted = false;
      }
}

private void touch_move(float x, float y) {

    if (isPathStarted) {
        mPath.reset();
        Point p = null;
         p = pointsD.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
            float radius = 1;
        RectF oval = new RectF();
        oval.set(scalePointX((int) (486 - radius)),scalePointY(70),                               scalePointX((int) (686 + radius)),
                        scalePointY((int) (334 + radius)));
        if (sweepAngelD <= 180 && startAngleD <= 360) {
            mPath.arcTo(oval, startAngleD, sweepAngelD, true);
        sweepAngelD += 1;
        startAngleD += 2;
        mCanvas.drawPath(mPath, mPaint);
    }
    mPath.reset();
}

private void touch_up(float x, float y) {
       mPath.reset();
            if (isPathStarted) {
                float radius = 1;
                RectF oval = new RectF();
                oval.set(scalePointX((int) (486 - radius)),
                        scalePointY(70), scalePointX((int) (686 + radius)),
                        scalePointY((int) (334 + radius)));
                Point p = pointsD.get(mLastPointIndex);
                mPath.moveTo(p.x, p.y);
                mPath.arcTo(oval, startAngleD, sweepAngelD, true);                  
                mCanvas.drawPath(mPath, mPaint);
                mPath.reset();
                ++mLastPointIndex;
            } else {
                sweepAngelD = 1;
                startAngleD = 270;
                mPath.reset();
             }
            isPathStarted = false;
 }

private boolean checkPoint(float x, float y, int pointIndex){
if (pointIndex == pointsD.size()) {
            // out of bounds
            return false;
        }
        point = pointsD.get(pointIndex);
        // EDIT changed point.y to poin.x in the first if statement
        if (x > (point.x - TOUCH_TOLERANCE)
                && x < (point.x + TOUCH_TOLERANCE)) {
            if (y > (point.y - TOUCH_TOLERANCE)
                    && y < (point.y + TOUCH_TOLERANCE)) {
                return true;
            }
        }
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:34:20.633

我编辑了我的代码如下，现在它正在工作..

```
 public class DrawView extends View implements OnTouchListener {

List<Point> pointsD = new ArrayList<Point>();
pointsD.add(new Point(520, 70));
    pointsD.add(new Point(520, 335));
    pointsD.add(new Point(520, 70));
    pointsD.add(new Point(520, 335));

public boolean onTouch(View view, MotionEvent event) {

    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up(x, y);
        invalidate();
        break;
    default:
        break;
    }
    return true;
}
private void touch_start(float x, float y) {
      if (checkPoint(x, y, mLastPointIndex)) {
                mPath.reset();
            isPathStarted = true;
          } else {
            isPathStarted = false;
      }
}

private void touch_move(float x, float y) {

    if (isPathStarted) {
        mPath.reset();
        Point p = null;
         p = pointsD.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
            float radius = 1;
        RectF oval = new RectF();
        oval.set(scalePointX((int) (486 - radius)),scalePointY(70),                               scalePointX((int) (686 + radius)),
                        scalePointY((int) (334 + radius)));
        if (sweepAngelD <= 180 && startAngleD <= 360) {
            mPath.arcTo(oval, startAngleD, sweepAngelD, true);
        sweepAngelD += 1;
        startAngleD += 2;

    }
    mPath.reset();
}

private void touch_up(float x, float y) {
       mPath.reset();
            if (isPathStarted) {
                float radius = 1;
                RectF oval = new RectF();
                oval.set(scalePointX((int) (486 - radius)),
                        scalePointY(70), scalePointX((int) (686 + radius)),
                        scalePointY((int) (334 + radius)));
                Point p = pointsD.get(mLastPointIndex);
                mPath.moveTo(p.x, p.y);
                mPath.arcTo(oval, startAngleD, sweepAngelD, true);                  
                mCanvas.drawPath(mPath, mPaint);
                mPath.reset();
                ++mLastPointIndex;
            } else {
                sweepAngelD = 1;
                startAngleD = 270;
                mPath.reset();
             }
            isPathStarted = false;
 }

private boolean checkPoint(float x, float y, int pointIndex){
if (pointIndex == pointsD.size()) {
            // out of bounds
            return false;
        }
        point = pointsD.get(pointIndex);
        // EDIT changed point.y to poin.x in the first if statement
        if (x > (point.x - TOUCH_TOLERANCE)
                && x < (point.x + TOUCH_TOLERANCE)) {
            if (y > (point.y - TOUCH_TOLERANCE)
                    && y < (point.y + TOUCH_TOLERANCE)) {
                return true;
            }
        }
    return false;
}
} 
```

# objective-c - 美味的 Facebook 示例不适用于真 iPhone

> ID：14888652
> 
> 赞同：1
> 
> 时间：2013-02-15T05:14:29.407
> 
> 标签：objective-c, xcode4.5

我下载了facebook sdk。我在那里运行美味的样本，这是主要样本。

如果我在模拟器上运行，sdk 不会发布任何内容。

如果我在自己的 iPhone 上运行它，我会不断得到它

首先它去

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                             [self sessionStateChanged:session state:state error:error];
                                     }];    
} 
```

然后它很快进入完成处理程序。state 的状态是 FBSessionStateClosedLoginFailed

立即地

它似乎没有尝试连接到 facebook 或做任何事情。

在我自己的程序中，我使用了完全相同的代码，并且可以正常登录。

我可以在模拟器上运行美味。

错误代码是这样的：

```
(lldb) po error
$0 = 0x1e891580 Error Domain=com.facebook.sdk Code=2 "The operation couldn’t be completed. (com.facebook.sdk error 2.)" UserInfo=0x1dd87870 {com.facebook.sdk:ErrorLoginFailedReason=com.facebook.sdk:ErrorLoginFailedReason} 
```

至少在我仍然可以看到正在调用哪个 facebook URL 并查看哪里出了问题之前。现在什么都没有。它只是（不）工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:46:15.473

事实证明，在设置中，为了美味而关闭了 Facebook 将其打开可以解决问题。

目前还不清楚，是谁把它关掉的。是关闭默认吗？谁知道。

从 iPhone 中删除美味并不会使其默认打开。

这恰到好处。大多数用户无法弄清楚他们必须去设置并打开东西。

# java - Java：将字符串转换为日期

> ID：14888654
> 
> 赞同：2
> 
> 时间：2013-02-15T05:14:35.297
> 
> 标签：java, parsing, date-formatting

我尝试将字符串转换为日期，但是在转换后月份设置为 jan ，但在输入中月份是其他示例 'sep' 。以下是我的代码。

```
Date tempDate = new SimpleDateFormat("mm/dd/yyyy").parse("09/12/2014");
System.out.println("Current Date " +tempDate); 
```

输出 ：

```
Current Date Sun Jan 12 00:09:00 IST 2014 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T05:16:33.200

它是 MM/dd/yyyy。不是 mm/dd/yyyy

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T05:20:52.837

参考这些格式[Java 日期格式文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)：

![日期时间格式](../Images/4b9aeae00145d055f8837b0d52d719c6.png)

所以`mm`以小时为单位参考分钟，而`MM`以月为单位。

这就是你得到的原因：

`Current Date Sun Jan 12 00:09:00 IST 2014`从`("09/12/2014")`

默认情况下，月份是`Jan`由于`mm`.

# ruby-on-rails-3 - 范围为“:locale”和嵌套资源的 Rails 路由

> ID：14888657
> 
> 赞同：0
> 
> 时间：2013-02-15T05:14:45.947
> 
> 标签：ruby-on-rails-3, routes

我对rails中的路线有疑问。

在我的新项目中，我的模型名称为

```
 1\. Country
  2\. States
  3\. Category
  4\. Subcategory
  5\. advertisements 
```

我想生成如下路线

```
1\. /en
2\. /en/advertisements
3\. /en/indiana
4\. /en/indiana/advertisements
5\. /en/indiana/cars
6\. /en/indiana/cars/advertisements
7\. /en/indiana/cars/bmw/advertisements
8\. /en/cars/advertisements 
```

前任 ：-

```
 en is country locale
  indiana is state
  cars is category
  bmw is sub category 
```

这是我在 routes.rb 中的路由声明

```
 scope ":language" do <br />
      &nbsp;&nbsp;&nbsp;&nbsp;scope "(:state)" do <br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scope "(:main_category)" do <br />
       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      scope "(:category)" do <br />
       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;    resources :advertisements <br />
       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;    match "search" => "advertisements#index"
       <br />  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;end<br />
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end<br />
  &nbsp;&nbsp;&nbsp;&nbsp;  end<br />
  end  <br /> 
```

如果 url 是“/en/indiana/cars/bmw/advertisements”，上述路线可以正常工作

现在我想要“/en/cars/advertisements”“/en/cars/advertisements”的路线，然后它将分配 en 到语言和汽车状态

我如何声明此“/en/cars/advertisements”的路线，

请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:22:40.357

使用匹配路由。我认为这可能会解决您的问题。

```
 match '/:language/:category/advertisements' => 'controller#action_name' 
```

# r - 不一定连续的时间间隔的联合

> ID：14888660
> 
> 赞同：3
> 
> 时间：2013-02-15T05:15:02.553
> 
> 标签：r, datetime, lubridate

我正在寻找一个`union`时间间隔的实现，它能够处理本身不是间隔的联合。

我注意到`lubridate`包括一个`union`时间间隔的函数，但它总是返回一个间隔，即使联合不是一个间隔（即它返回由两个开始日期的最小值和两个结束日期的最大值定义的间隔，忽略不由任一区间覆盖）：

```
library(lubridate)
int1 <- new_interval(ymd("2001-01-01"), ymd("2002-01-01"))
int2 <- new_interval(ymd("2003-06-01"), ymd("2004-01-01"))
union(int1, int2)
# Union includes intervening time between intervals.
# [1] 2001-01-01 UTC--2004-01-01 UTC 
```

我也看过这个`interval`包，但它的文档没有提到`union`.

我的最终目标是使用复杂的联合`%within%`：

```
my_int %within% Reduce(union, list_of_intervals) 
```

因此，如果我们考虑一个具体的例子，假设`list_of_intervals`是：

```
[[1]] 2000-01-01 -- 2001-01-02 
[[2]] 2001-01-01 -- 2004-01-02 
[[3]] 2005-01-01 -- 2006-01-02 
```

then `my_int <- 2001-01-01 -- 2004-01-01`is not `%within%`the `list_of_intervals`so it should return`FALSE`和`my_int <- 2003-01-01 -- 2006-01-01`is so it should be `TRUE`。

但是，我怀疑复杂联合的用途不止于此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-09T14:05:41.087

如果我正确理解您的问题，您希望从一组可能重叠的区间开始，并获取代表输入集 UNION 的区间列表，而不仅仅是跨越输入集的最小值和最大值的单个区间. 这是我的同一个问题。

在以下位置提出了类似的问题：[区间的联合](https://stackoverflow.com/questions/1034802/union-of-intervals)

...但接受的响应因时间间隔重叠而失败。但是，hosolmaz（我是 SO 新手，所以不知道如何链接到该用户）发布了修复问题的修改（在 Python 中），然后我将其转换为 R，如下所示：

```
library(dplyr) # for %>%, arrange, bind_rows

interval_union <- function(input) {
  if (nrow(input) == 1) {
    return(input)
  }
  input <- input %>% arrange(start)
  output = input[1, ]
  for (i in 2:nrow(input)) {
    x <- input[i, ]
    if (output$stop[nrow(output)] < x$start) {
      output <- bind_rows(output, x)
    } else if (output$stop[nrow(output)] == x$start) {
      output$stop[nrow(output)] <- x$stop
    }
    if (x$stop > output$stop[nrow(output)]) {
      output$stop[nrow(output)] <- x$stop
    }
  }
  return(output)
} 
```

以您的示例具有重叠和不连续的间隔：

```
d <- as.data.frame(list(
  start = c('2005-01-01', '2000-01-01', '2001-01-01'),
  stop = c('2006-01-02', '2001-01-02', '2004-01-02')),
  stringsAsFactors = FALSE) 
```

这会产生：

```
> d
       start       stop
1 2005-01-01 2006-01-02
2 2000-01-01 2001-01-02
3 2001-01-01 2004-01-02

> interval_union(d)
       start       stop
1 2000-01-01 2004-01-02
2 2005-01-01 2006-01-02 
```

我是 R 编程的相对新手，所以如果有人可以将上面的 interval_union() 函数转换为不仅接受输入数据帧作为参数，而且还接受“开始”和“停止”列的名称以使用该函数可以更容易地重复使用，那就太好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:28:08.007

好吧，在您提供的示例中， and 的`int1`并集`int2`可以看作是具有两个间隔的向量：

```
int1 <- new_interval(ymd("2001-01-01"), ymd("2002-01-01"))
int2 <- new_interval(ymd("2003-06-01"), ymd("2004-01-01"))
ints <- c(int1,int2) 
```

`%within%`适用于向量，因此您可以执行以下操作：

```
my_int <- new_interval(ymd("2001-01-01"), ymd("2004-01-01"))
my_int %within% ints
# [1]  TRUE FALSE 
```

因此，您可以使用以下命令检查您的时间间隔是否在列表的某个时间间隔内`any`：

```
any(my_int %within% ints)
# [1] TRUE 
```

您的评论是正确的，给出的结果`%within%`似乎与文档不一致，文档中说：

> 如果 a 是一个区间，则它的开始日期和结束日期都必须在 b 范围内才能返回 TRUE。

如果我查看`%within%` when a 和 b 都是区间的源代码，它似乎如下：

```
setMethod("%within%", signature(a = "Interval", b = "Interval"), function(a,b){
    as.numeric(a@start) - as.numeric(b@start) <= b@.Data & as.numeric(a@start) - as.numeric(b@start) >= 0
}) 
```

因此，似乎只针对 的起点进行了`a`测试`b`，并且看起来与结果一致。也许这应该被视为一个错误并应该报告？

# c# - 我应该在编译之前编写测试吗？

> ID：14888662
> 
> 赞同：5
> 
> 时间：2013-02-15T05:15:16.357
> 
> 标签：c#, unit-testing, tdd, nunit, api-design

我一直在尝试为我的一个开源项目遵循松散的 TDD 工作流程。它是供其他程序员使用的 API。

因此，除了使 API “工作”之外，一个关键方面也是设计如何使用它。我听说有些人说在编译之前编写测试是浪费时间，并且在 API 稳定之前容易不断重写。我还听说它应该遵循这样的工作流程：

1.  编写不会编译的测试
2.  让它编译
3.  让它变绿

我一直在尝试遵循此工作流程，但最终遇到了一些奇怪的事情。例如，在我的 API 中，我有以下两种方法：

```
Handles(string pattern); //had this one already
Handles(IPatternMatcher pattern); //needed this one 
```

我需要将第二种形式的方法添加到我的 API 中。所以，我最终得到了一个像这样的简单测试：

```
public void Handles_SupportsIPatternMatcher()
{
  var api=new MyAPI();
  api.Handles(new TestPatternMatcher());
} 
```

实施后这似乎是一种浪费。

我应该继续遵循这个工作流程，还是有办法改进它？我如何避免编写基本上只是检查编译器错误的测试？既然它是一个可公开使用的 API，我应该担心这样的测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:54:04.233

不。

不要编写测试编译器是否工作的代码。如果您使用动态语言（或静态语言中的动态功能），这些测试会很有意义，它们实际上会告诉您您忘记了某些东西，或者将某些东西重构为失败的单元测试。

单元测试执行的重点是在构建出错时使构建失败。如果您的代码中有编译器错误，则构建已经失败。没有必要事后猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:23:16.767

我使用 resharper，您可以创建空的 Handles 方法，该方法将获得 IPatternMatcher。TDD 是强大的东西，你应该继续尝试。我尝试了在代码之前测试和在代码之后测试的两种方式，我发现在代码之前测试是强大的东西。您可以非常快速地调试代码错误。测试是保证您的代码将按预期工作的保证。

# android - 如何在android中的未来日期运行代码

> ID：14888663
> 
> 赞同：0
> 
> 时间：2013-02-15T05:15:31.267
> 
> 标签：android, alarmmanager, reminders

我正在开发一个生日提醒应用程序，它将在指定日期通知用户生日事件。我在网上搜索了一下，并在 android 中找到了警报管理器来执行我的任务。

但我只是想确保这是制作提醒等应用程序的唯一方法，或者我们也有一些方法

[我检查了这个教程](http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:24:37.543

是的，Alarm Manager 就是您想要的。不要忘记注册启动接收器以在重新启动后重新设置警报。

也不，这不是唯一的方法。但是其他方法仍然更复杂，并且可能不太可靠。例如，您可以将日期/时间保存到服务器，并让它发送推送通知以在适当的时间触发警报。

然而，Alarm Manger 是为这样的事情而设计的，所以最好使用它。做事总是有不止一种方法，任何聪明的人都可以想出一种不合时宜的方法来做某事。但是警报管理器很简单，而且是标准化的。

# wpf - 创建只接受文本的 WPF 文本框

> ID：14888664
> 
> 赞同：1
> 
> 时间：2013-02-15T05:15:31.773
> 
> 标签：wpf

```
private void txtLastName_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (!char.IsDigit((char)e.Key)) e.Handled = true;
    } 
```

但它不支持键盘中的所有键。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-19T20:57:13.377

```
 private void txtLastName_PreviewTextInput(object sender, TextCompositionEventArgs e)
    {
        if (!System.Text.RegularExpressions.Regex.IsMatch(e.Text, "^[a-zA-Z]"))
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:12:23.283

您必须使用`IsLetter`.

```
private void txtLastName_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (Char.IsLetter((char)e.Key)) e.Handled = true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-28T19:10:29.420

这个线程真的很旧，但如果有人仍然需要它，这里是为我工作的代码

（编辑了一点 Usman 的代码）

```
private void TextValidationTextBox(object sender, TextCompositionEventArgs e)
{
      Regex regex = new Regex("[^a-zA-Z]+");
      e.Handled = regex.IsMatch(e.Text);
} 
```

并且不要忘记将下面的代码放入您只想接受文本的 TextBox （在 xaml 中）

```
PreviewTextInput="TextValidationTextBox" 
```

# c++ - opencv中的视频数据

> ID：14888665
> 
> 赞同：0
> 
> 时间：2013-02-15T05:15:40.043
> 
> 标签：c++, c, opencv, video-capture

任何人都可以告诉我视频数据在通过ffmpeg解码后以什么格式保存在opencv中。我的意思是，如果它被保存为矩阵，那么它是 8 位/像素之类的东西吗？如果有人可以提供一些详细解释的文件或链接将是一个很大的帮助。我也尝试谷歌但找不到相关的东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:23:48.910

检查的权威参考可能是代码本身！查看`CvCapture_FFMPEG::open`文件中的函数`modules/highgui/src/cap_ffmpeg_impl.hpp`。例如，此方法由`cvCaptureFromAVI()`和调用`cvCaptureFromFile()`。下面摘录的代码清楚地从文件中获取了宽度和高度，但它忽略了输入位深度，并且始终使用内存中视频的压缩 8:8:8 位 RGB 表示（如`PIX_FMT_BGR24`常量所示）：

```
#if LIBAVFORMAT_BUILD >= CALC_FFMPEG_VERSION(52, 111, 0)
    int err = avformat_open_input(&ic, _filename, NULL, NULL);
#else
    int err = av_open_input_file(&ic, _filename, NULL, 0, NULL);
#endif

    .......    

#if LIBAVFORMAT_BUILD >= CALC_FFMPEG_VERSION(53, 3, 0)
    avformat_find_stream_info(ic, NULL);
#else
    av_find_stream_info(ic);
#endif

    .......    

    avpicture_fill( (AVPicture*)&rgb_picture, rgb_picture.data[0],
                    PIX_FMT_BGR24, enc->width, enc->height ); 
```

下面的代码提供了进一步的证据来证明这种情况`CvCapture_FFMPEG::retrieveFrame`：

```
img_convert_ctx = sws_getCachedContext(
                NULL,
                video_st->codec->width, video_st->codec->height,
                video_st->codec->pix_fmt,
                video_st->codec->width, video_st->codec->height,
                PIX_FMT_BGR24,
                SWS_BICUBIC,
                NULL, NULL, NULL
                ); 
```

查看 ffmpeg 文档，`PIX_FMT_BGR24`此调用中的 指定*目标*像素格式，即将传递给 opencv 的内容。

# php - 仅包含带有 php 的特定文件的下拉列表

> ID：14888666
> 
> 赞同：0
> 
> 时间：2013-02-15T05:15:45.083
> 
> 标签：php, file

我目前正在制作一个下拉列表，但在下拉列表中，假设我只想包含 .txt 扩展名文件，因此任何其他扩展名（如 .php .jpg 或任何其他扩展名）都不会出现在下拉列表中。我怎样才能尽可能简单地做到这一点？

另一个问题是如果文件夹没有任何 .txt 扩展名文件，我想发出警告，则会显示错误消息。因此，即使文件夹中有其他 .jpg .php 或任何其他文件，只要文件夹中没有 .txt 文件，就会显示警告。

谁能帮我一把？

这就是我所做的，但它只显示了一个最后没有 .txt 的下拉列表，但它仍然会在下拉列表中显示其他随机文件。

```
if(!(is_dir("./aaa")))
{
    die("Must create a folder first, sorry");
}

    $lists = scandir("./aaa");

    echo "<form action=\"./page2.php\" method=\"get\">";
    echo "<select>";

    foreach($lists as $list)
    {
    if(($list == ".") || ($list == ".."))
        {
        continue;
        }
    echo "<option value=\"";
    echo basename($list,".txt");
    echo "\">";
    echo basename($list,".txt");
    echo "</option>";
    }
    echo "</select>";
    echo "</form>"; 
```

* * *

编辑添加了带有 $hasTxt 的 substr

```
<?php
if(!(is_dir("./aaa")))
{
    die("Must create a <strong>aaa</strong> folder first, sorry");
}
echo "<form action=\"./page2.php\" method=\"get\">";
echo "<select name=\"aaa\">";
    $aaa_files = scandir("./aaa"); 
$hastxt = false; 
foreach($aaa_files as $file_list) 
{
    if(($file_list == ".") || ($file_list == ".."))
    {
    continue;
    }
    if(strlen($file_list)>4 && strtolower(substr($file_list, -4))!='.txt')
    {
    continue;
    }
    else 
    {
    $hastxt = true; 
    echo "<option value=\"";
    echo basename($file_list,".txt");  
    echo "\">";
    echo basename($file_list,".txt");
    echo "</option>";
    }
}
echo "</select>";
echo "<br/><input type=\"submit\">";
echo "</form>";

if($hastxt == false) 
{
    echo "Must create text files first, sorry";
    die();
}
?> 
```

* * *

如果文件夹没有任何 txt 文件，这就是我现在拥有的脚本会发生的情况。

![在此处输入图像描述](../Images/145ad3d7c1a7393d482591312db85b33.png)

* * *

如果没有 txt 文件但当然没有箭头，这就是我真正想要的

![在此处输入图像描述](../Images/ae881e181170f5c6e932943dd0415453.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:27:11.210

您可以使用 PHP 的 substr() 函数来测试文件名：

```
if(substr($filename, -3) == 'txt') {
  // show file
} 
```

见这里： http: [//php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:27:34.387

对于第一部分，就像您继续目录一样。和..，您可以继续处理非文本文件：

```
if(strlen($list)>4 && strtolower(substr($list, -4))!='.txt') continue; 
```

对于警告部分，在 foreach 之前放置一个标志

```
$hasTxt = false; 
```

并将其设置为 true 每当您收到您不忽略的输入时（即在 if(unwanted) continue 之后；）

```
$hasTxt = true; 
```

最后，在 foreach 之后检查 $hasTxt 的值并根据需要使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:29:03.327

试试这个，希望它对你有用

```
<?php
    if(!(is_dir("./aaa")))
    {
        die("Must create a folder first, sorry");
    }

    $lists = scandir("./aaa");
    $i =0;
    foreach($lists as $list)
    {
        if (strstr($list, '.txt')) {
        $i++;
        }
    }
    if($i == 0){
        die("the folder does not have any .txt extension files");
    }

    echo "<form action=\"./page2.php\" method=\"get\">";
    echo "<select>";

    foreach($lists as $list)
    {
        if (strstr($list, '.txt')) {
            echo "<option value=\"".substr($list,0, -4)."\">".substr($list, 0,-4)."    </option>";
        }
    }
    echo "</select>";
    echo "</form>";
?> 
```

# java - java 二维数组中的单词搜索

> ID：14888667
> 
> 赞同：3
> 
> 时间：2013-02-15T05:15:53.380
> 
> 标签：java, algorithm, search, iteration, multidimensional-array

我正在尝试为课堂作业创建一个简单的单词搜索，并且我已经设法弄清楚如何搜索东（从左到右）和西（从右到左）。但是我在试图弄清楚如何向南搜索（从上到下）时遇到了麻烦。

我的代码适用于我读入的一个文件，但第二个文件返回一个`ArrayIndexOutOfBoundsException`. 我的代码中是否有任何特定的内容使其无法扩展？

我**更正**的代码如下所示：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

import wordSeek.GameBoard;

public class WordGame {

    private char[][] letters;
    GameBoard gb;

    public static void main(String[] args) {
        WordGame wg = new WordGame();
        wg.play();

    }

    public WordGame() {
        letters = readLettersFromFile();
        gb = new GameBoard(letters);

    }

    private void play() {
        Scanner s = new Scanner(System.in);
        String word;

        do {
            System.out.println("Enter word to find: ");
            word = s.next();

            // reset all highlighted tiles
            gb.reset();

            search(word);

        } while (!word.equals("QUIT"));

        gb.dispose();
    }

    // Nothing to be done above
    // Complete all the methods below

    private char[][] readLettersFromFile() {
        // From the data in the file Letters.txt determine the size (number of
        // rows and number of columns) for the letters array

        int rowCount = 0;
        int colCount = 0;
        char c;

        File file = new File("resources/Places.txt");

        Scanner fileScanner = null;
        try {
            fileScanner = new Scanner(file);
            } 
        catch (FileNotFoundException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        ArrayList<String> data = new ArrayList<String>();

        while(fileScanner.hasNextLine())
        {
            String line = fileScanner.nextLine();
            data.add(line);
        }

        fileScanner.close();
        rowCount = data.size();
        colCount = data.get(0).trim().length()/2+1;

        // Instantiate a two dimensional array of characters of the appropriate
        // size

        letters = new char [rowCount][colCount];

        // Populate the array with the letters in Letters.txt
        for (int i = 0; i < rowCount; i++) {
            String line = data.get(i);
            int pos = 0;
            for (int j = 0; j < colCount; j++) {
                letters[i][j] = line.charAt(pos);
                pos += 2;
            }

        }

        // return the array

        return letters;

    }

    private void search(String word) {
        System.out.println("Searching for " + word);

        //Call the other search methods below as needed
        searchIterativeEast(word);
        searchIterativeWest(word);
        searchIterativeSouth(word);
        searchIterativeNorth(word);
    }

    //The following four methods must employ ITERATION to search the game board
    private boolean searchIterativeEast(String word) {
        int k = 0;

        for (int i = 0; i < letters.length; i++) 
        {
            for (int j = 0; j < letters[i].length; j++) {
                if (word.charAt(k) == letters[i][j]) {
                    k++;
                } 
                else {
                    k = 0;
                }
                if (k == word.length()) {
                    for (int col = j - k + 1; col <= j; col++) {
                        gb.highlight(i, col);
                    }

                    return true;
                }
            }
        }

        return false;
    }

    private boolean searchIterativeWest(String word) {

            String reversedWord = "";
            for (int i = word.length() - 1; i != -1; i--)
            {
                reversedWord += word.charAt(i);
            }

            int k = 0;

            for (int i = 0; i < letters.length; i++) 
            {
                for (int j = 0; j < letters[i].length; j++) {
                    if (reversedWord.charAt(k) == letters[i][j]) {
                        k++;
                    } 
                    else {
                        k = 0;
                    }
                    if (k == reversedWord.length()) {
                        for (int col = j - k + 1; col <= j; col++) {
                            gb.highlight(i, col);
                        }

                        return true;
                    }
                }
            }

            return false;

    }

    private boolean searchIterativeSouth(String word) {
        int k = 0;
        int store = letters[0].length;

        for (int j = 0; j < letters[store].length; j++)
        {
            for (int i = 0; i < letters.length; i++)
            {
                if (word.charAt(k) == letters[i][j])
                {
                    k++;
                }
                else
                {
                    k = 0;
                }
                if (k == word.length())
                {
                    for(int row = i-k+1 ; row <= i; row++)
                    {
                        gb.highlight(row, j);
                    }
                    return true;
                }
            }
        }

        return false;
    }

    private boolean searchIterativeNorth(String word) {

        String reversedWord = "";
        for (int i = word.length() - 1; i != -1; i--)
        {
            reversedWord += word.charAt(i);
        }

        int k = 0;
        int store = 0;

        for(int i = 0; i < letters.length; i++)
        {
            store = letters[i].length;
        }

        for (int j = 0; j < letters[store].length; j++)
        {
            for (int i = 0; i < letters.length; i++)
            {
                if (reversedWord.charAt(k) == letters[i][j])
                {
                    k++;
                }
                else
                {
                    k = 0;
                }
                if (k == reversedWord.length())
                {
                    for(int row = i-k+1 ; row <= i; row++)
                    {
                        gb.highlight(row, j);
                    }
                    return true;
                }
            }
        }

        return false;
    } 
```

第一个文件（Animals.txt）的游戏板看起来像：5X4 2d Array

```
X C A T
P A L Q
I R B U
G P X N
G O D W 
```

输出突出显示 CARP。

第二个文件（Places.txt）的游戏板看起来像：11x15 2d Array

```
O M J G D A X V C S Q N K I F 
D A X V T Q O M J H A A H F C 
A Y W U R P N L F E I T A L Y
J N H N E T H E R L A N D S F 
D B I Z X V T O A R Q O A Y K 
M K I A H F K R N O D B N N I
N Z Y W P H T V C G C T A A N 
R A Q O T S N L E K K I C M G 
I H P U U F D C A Z D O X R D 
X W O A L E U Z E N E V N E O 
V S U S J R Q L I Z A R B G M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:22:27.960

```
for (int j = 0; j < letters[i].length; j++) 
```

代替

```
for (int j = 0; j < letters.length; j++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:57:41.540

return 语句位于 for 循环之外，否则您只会突出显示第一个字母。

```
...
for (int row = j-k+1; row <=i; row++ )
    {
        //gb.highlight() just calls a method that    highlights the letters.
        gb.highlight(row, j);
        //return true;
    }
return true;
... 
```

# xcode - 如何在 Xcode 中设置 dyld_library_path

> ID：14888668
> 
> 赞同：3
> 
> 时间：2013-02-15T05:15:55.670
> 
> 标签：xcode, macos, xcode4, dylib, dyld

我是 Xcode 和 Mac 环境的新手。我正在使用一些动态和静态库，如 boost、Clucene 等。我有所有的库

> MyApp.app/内容/资源

我想将此路径设置为应用程序的 dyld_library_path。我尝试编辑 XXX.plist 文件，例如

> DYLD_LIBRARY_PATH /mypath/xxx

并在 Xcode 中设置环境变量和参数无效。

但是如果我运行如下所示的 shell 脚本而不双击 .dmg 中的应用程序，它就可以工作

```
#!/bin/bash
clear
cd /Volumes/xxx/myapp.app/Contents/MacOS
export DYLD_LIBRARY_PATH="/Volumes/xxx/myapp.app/Contents/Resources"
./myapp 
```

我确信这不是正确的方法。每次执行我的应用程序时是否有正确的方法来设置 dyld_library_path ？

编辑：如果您手动将所有库复制到客户端 /usr/lib 路径，它也可以工作......我想这也不是正确的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T07:51:10.313

设置`DYLD_LIBRARY_PATH`不是解决此问题的最佳方法。它正在解决这样一个事实，即您错误地告知`dyld`在哪里可以找到您的库。

如果您运行`otool -L MyApp.app/Contents/MacOS/MyApp`，您将看到 MyApp 想要加载的库的路径。如果在指定路径未找到任何库，`dyld`则将在`DYLD_FALLBACK_LIBRARY_PATH`. 设置`DYLD_LIBRARY_PATH`原因以在上述命令返回`dyld`的路径之前的给定位置查找库。`otool`

解决此问题的最佳方法是让您的应用程序指定要开始的库的正确位置，这样`DYLD_LIBRARY_PATH`就不需要设置。为此，您需要执行以下操作：

1.  将您在应用程序中捆绑的每个库的库标识符设置为`@rpath`-relative 值。您可以使用`install_name_tool -id @rpath/libFoo.dylib libFoo.dylib`.
2.  添加复制文件构建阶段以将库复制到您的应用程序包装器中。`MyApp.app/Contents/Frameworks`是一个典型的位置。`MyApp.app/Contents/Resources`应该避免，因为二进制文件不是通常意义上的资源。
3.  链接应用程序时指定运行路径搜索路径。这为链接器提供了一个路径列表，用于解析`@rpath`它在任何加载命令中遇到的任何变量。如果要将库复制到，则`MyApp.app/Contents/Frameworks`需要指定`@loader_path/../Frameworks`. 您可以通过`LD_RUNPATH_SEARCH_PATHS`应用程序目标上 Xcode 中的（运行路径搜索路径）配置设置来执行此操作。

完成所有这些之后，您应该能够重新运行`otool`上面提到的命令，并看到您的库的路径正在使用`@rpath`-relative 路径。然后，您应该能够运行`otool -lV MyApp.app/Contents/MacOS/MyApp`并看到`LC_RPATH`指定值为 的加载命令`@loader_path/../Frameworks`。最后，您应该能够运行您的应用程序并看到它在其 Frameworks 目录中找到库而无需`DYLD_LIBRARY_PATH`设置！

# object - Memcached 部分对象无效

> ID：14888669
> 
> 赞同：0
> 
> 时间：2013-02-15T05:16:00.040
> 
> 标签：object, memcached

我们正在缓存以下类格式的对象。

公共类 CachedObject {

```
@javax.persistence.Transient
public List<ObjectA> objectAs;

@javax.persistence.Transient
public Date cacheExpirationDate; 
```

}

我们有一个进程检查缓存对象的过期日期并在过期之前刷新缓存。如果有任何更新，还有另一个进程也使用 replace (spymemcached) 方法更新缓存对象。在我们的情况下，更新通常发生在 objectAs 上。缓存的对象永远不会被驱逐。我们还使用默认的slab (1MB) 大小设置启动了memcached。

问题：当我们获取一些对象时，我们发现缓存对象不为空，但 objectAs 为空。我们随后在尝试对 objectAs 执行任何操作时遇到空指针异常。我检查过，我们总是在缓存/更新之前设置 objectAs 值。我还从 telnet 接口看到了不完整的缓存对象。当我刷新缓存时，它开始显示缓存中的完整对象。

有人可以建议可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:04:34.497

在运行了更多测试单元/集成后，我发现了一个将此字段设置为 null 的情况。所以我在问题中所说的问题与memcached缓存服务器无关。这是一个与应用程序相关的问题。

# android - 如何在使用选项卡视图时设置警报

> ID：14888691
> 
> 赞同：1
> 
> 时间：2013-02-15T05:18:39.783
> 
> 标签：android, android-alarms

我对在android中设置警报知之甚少；我已经编写了一些设置警报的代码，如下所示；使用单个活动时对我来说效果很好

```
Intent intent = new Intent(getBaseContext(), ReminderService.class);
intent.putExtra("ti", name);  
intent.putExtra("id", id); 
PendingIntent pendingIntent = PendingIntent.getService(getBaseContext(), id,intent,PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarmManager =(AlarmManager)getSystemService(Context.ALARM_SERVICE);   
alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(), pendingIntent); 
```

此代码在选项卡视图中不起作用。请帮我。

# adapter - 部署适配器在控制台中显示 null

> ID：14888695
> 
> 赞同：0
> 
> 时间：2013-02-15T05:19:21.967
> 
> 标签：adapter, ibm-mobilefirst

在过去的 3 个月里，我没有接触过工作灯。但在版本中进行了很多更改。在我的一个项目中，我创建了 http 适配器，它之前工作正常。但是现在我尝试运行该项目，它显示了一些错误。我无法在 ibm 论坛中获得帮助，因为他们将我的帐户更改为只读。

```
[2013-02-15 10:20:37] Starting adapter deployment on Worklight Server
[2013-02-15 10:20:37] Deploying adapter: university
[2013-02-15 10:20:37] Server host: localhost
[2013-02-15 10:20:37] Server port: 8085
[2013-02-15 10:20:37] null
[2013-02-15 10:20:37] Adapter deployment failed
[2013-02-15 10:20:37] ERROR 
```

它在版本 platformVersion="5.0.2" 中运行。我是否需要更改版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:38:05.650

确保查看从 Worklight 5.0.0.3 开始的身份验证机制中所做的更改；在您的项目中进行适当的更改并重新部署。

IBM 技术说明：[IBM Worklight 项目自动升级到 5.0.0.3 身份验证模型](http://www-01.ibm.com/support/docview.wss?uid=swg27036063)

请注意，您没有提供有关您的项目和环境设置的任何其他信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:02:29.420

我找到了解决方案

```
<loadConstraints maxConcurrentConnectionsPerNode="0"/> 
```

而是将 maxConcurrentConnectionsPerNode 从 0 更改为 2。启用适配器部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:55:59.707

就我而言，对 maxConcurrentConnectionsPerNode 的更改并没有解决问题。我发现我的适配器的数据源定义中的用户名和密码是强制性的（即使数据库没有设置用户名和密码）。

# asp.net - 应用程序的通用处理程序的数量应该是多少

> ID：14888703
> 
> 赞同：1
> 
> 时间：2013-02-15T05:20:10.093
> 
> 标签：asp.net, jquery, ado.net, httphandler

我有一个运行在`asp.net 4.0`和上的 Web 应用程序`oracle 11G`。
我正在使用`ado.net`连接数据库服务器。
我的应用程序在 15-20 左右使用一切就绪`generic-http-handlers`。
我`generic-http-handler`从 jquery 调用那些。
我想使用更多这些，但我不确定这对我的应用程序的影响。

请建议多买点好主意`generic-http-handers`吗？

## 编辑 1

我正在通过网络找出`concurrent http request`我可以在同`browser`一个域的表单的同一个选项卡中拥有多少个。
我遇到了一个关于这个主题的小众问题
[在流行的浏览器中允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

它表明，尽管您`async=true`已经从 jquery 进行了 ajax 调用，但它必须等到其他调用`http request`完成。

它还建议您可以创建子域来克服这个问题。

现在有人可以建议我天气我应该多去还是不去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:48:55.990

*我不确定您是否要问定义*20 个处理程序是否太多，或者从 jQuery*调用20 个处理程序是否太多，所以我将同时解决这两个问题。*

在*定义*许多处理程序方面，通用 HTTP 处理程序 (ASHX) 类似于 ASP.NET 页面处理程序 (ASPX)，但更轻量级，因为它没有页面的完整生命周期，并且不用于返回 UI . 许多大型应用程序定义了数百个 ASPX 页面，这与 ASP.NET Web 窗体的设计意图是一致的，其中每个 UI 页面都是一个不同的 ASPX。因此，拥有数百个 ASHX，将比数百个 ASPX 更轻，完全没有问题。

就*调用*20 个处理程序而言，这里我们进入关于“矮胖”与“健谈”接口的对话。当通过 WAN 连接（即浏览器和服务器之间）时，“粗大”的接口（产生较少数量的繁重调用的接口）更好：当您尝试扩展应用程序时，“健谈”的接口（使更多的较轻的调用）将在服务器上保持打开更多的连接，通常会在更多的事务和更多打开的同时连接方面导致更多的数据库负载，因此通常不会扩展在服务器端。

在浏览器方面，消息更糟。根据 HTTP 规范，浏览器将您限制为两个同时请求，因此如果您打算同时触发 20 个请求，它不会发生，这意味着您可能会因为有这么多 jquery get/post 调用排队而遇到一些性能问题一次。

当然，折衷方案是编程通常更简洁，具有“健谈”的界面。所以在这里你必须对你未来的扩展需求做出判断，而不是更干净的代码的重要性。

我会说，如果你正在构建一个应用程序，它的预期寿命和发展，可以舒适地在单个 Web 和单个数据库服务器上运行其所有流量；而且，您的浏览器代码的设置方式使得 2 个同时请求不会给您带来任何性能问题，那么如果它为您提供**更**清晰的代码，那么选择“聊天”界面是合理的。

但是，如果您预计需要扩展到单个服务器之外；或者，在一些常见的用例中，这些 jquery get/posts 中的许多将被同时调用并妨碍性能，那么我无论如何都会重构为一个更“矮胖”的接口，这意味着不会从单个调用超过 20 个处理程序页面通过 jQuery。

如果您已经阅读了这篇文章，但仍然无法确定哪个是正确的，那么我建议您重构界面以使其更加“厚实”。

希望这对您有所帮助，并祝您好运！

# html5-video - 在智能电视上播放多个视频

> ID：14888706
> 
> 赞同：0
> 
> 时间：2013-02-15T05:20:20.450
> 
> 标签：html5-video, samsung-smart-tv

我正在创建一个三星智能电视应用程序，它可以播放播放列表中的视频。截至目前，此示例在浏览器上运行良好，但在模拟器上运行良好。

如何使用 JAVASCRIPT 和 HTML5 在三星智能电视上播放多个视频？

代码：

```
<div id="playlist1" class="sv_playlist">
  <div class="video_wrap">
    <video id="video1" poster="frame1.jpg" width="640" height="360" preload="none">
      <source src="video1.mp4"/>
    </video>
  </div>
  <div class="video_wrap">
    <video id="video2" poster="frame2.jpg" width="640" height="360" preload="none">
      <source src="video2.mp4" />
    </video>
  </div>
  <ul class="thumbs">
    <li id="thumbnail_v1">
      <a href="v1.mp4">
        <img alt="Thumbnail 1" src="thumbnail1.jpg" width="144" height="81" />
        <span class="play"/>
      </a>
    </li>
    <li id="thumbnail_v2">
      <a href="v2.mp4">
        <img alt="Thumbnail 2" src="thumbnail2.jpg" width="144" height="81" />
        <span class="play"/>
      </a>

    </li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:30:40.200

三星仅支持页面上的 1 个视频。您不能播放超过 1 个视频。如果您想制作缩略图，请尝试动画 gif。

# c# - 自定义验证器在页面上所有控件的单击时被调用

> ID：14888709
> 
> 赞同：0
> 
> 时间：2013-02-15T05:20:39.390
> 
> 标签：c#, javascript, asp.net, customvalidator

我编写了一个自定义验证函数来检查是否显示面板
我希望在单击 NEXT 按钮时调用该函数。

但相反，它会在页面上的每个按钮的点击时被调用。

这是代码：

```
 function Validate(sender, args)
    {
        if (document.getElementById("Panel1").style.display == 'none') {
                args.IsValid = false;
        }
        else {
                args.IsValid = true;
            }
    } 
```

这是应该调用它的按钮代码 onclick。

```
<asp:Button ID="btnNext" runat="server" Text="Next" Font-Bold="True" CssClass="InputButton" OnClick="btnNext_Click" />
<asp:CustomValidator ID="cvValidate" runat="server" ErrorMessage="Panel has no data." ClientValidationFunction="Validate" Display="none" EnableViewState="false"></asp:CustomValidator> 
```

如果我设置 Controltovalidate="btnNext" 那么它再次抛出我的错误。“无法验证 btnNext”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:09:29.517

嘿，我为我的问题做了一个非常简单的解决方案。首先是 ws 在页面上的 evry 按钮单击时调用的 java 脚本代码。

```
 function Validate(sender, args)
    {
        if (document.getElementById("Panel1").style.display == 'none') {
                args.IsValid = false;
        }
        else {
                args.IsValid = true;
            }
    } 
```

然后在下一步按钮上：

```
<asp:Button ID="btnNext" runat="server" Text="Next" Font-Bold="True" CssClass="InputButton" OnClick="btnNext_Click" />

<asp:CustomValidator ID="cvValidate" runat="server" ErrorMessage="Panel has no data." ClientValidationFunction="Validate" Display="none" EnableViewState="false"></asp:CustomValidator> 
```

对于其余按钮，我确实设置了 Causesvalidation=false 属性。有了这个，函数 wwas 只在 Next 按钮上被调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:22:50.473

您需要将其连接到正确的元素。

`document.getElementById("btnNext").onclick = function() { //Do Your Stuff Here };`

安吉拉

# c# - 如何在按钮单击时在 GridView 中显示通过 TextBox 输入的值而不将数据保存到数据库？

> ID：14888712
> 
> 赞同：1
> 
> 时间：2013-02-15T05:21:02.043
> 
> 标签：c#, asp.net, visual-studio-2010, sql-server-2005, web-applications

我在 Visual Studio 2010 上使用 C# 创建了两个文本框来输入员工的名字和姓氏以及在基于 Web 的 ASP.NET 应用程序中的按钮。当我单击按钮时，我在文本框中输入的值应该是显示在 Gridview 中而不存储在数据库中。

我怎样才能做到这一点？您能否提供一个示例代码来执行上述功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:38:07.290

这是一个工作代码..

```
protected void Page_Load(object sender, EventArgs e)
{
        dt = new DataTable();
        DataColumn dc1 = new DataColumn("FIRST NAME");
        DataColumn dc2 = new DataColumn("LAST NAME");
        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);
        DataRow dr1 = dt.NewRow();
        GridView1.DataSource = dt;
        GridView1.DataBind();
}
DataTable dt;

protected void Button1_Click(object sender, EventArgs e)
{
    DataRow dr1 = dt.NewRow();
    dr1[0] = TextBox1.Text;
    dr1[1] = TextBox2.Text;
    dt.Rows.Add(dr1); 
    GridView1.DataSource = dt;
    GridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:32:59.793

您可以在这样的代码中访问 gridview：

```
var gridview = document.getElementById("<%=Gridview1.ClientID%>"); 
```

在您可以访问该网格视图之后，将是在客户端**更新/添加/删除信息的方法。**但请注意，您还必须告诉服务器端您更新了 DB 中的信息，以便他可以将更改保存到 DB。
我希望您应该发送**ajax**请求以更新 DB 中的数据，并使用代码从**javascript访问网格并通过****javascript**在客户端更新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:36:20.430

取您在**DataTable**的文本框中输入的值，并将该 dataTable 作为**数据源**提供给该**datagrid**。
检查此链接 [http://forums.asp.net/t/1672122.aspx/1](http://forums.asp.net/t/1672122.aspx/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T12:53:49.883

您提供的代码工作正常。但它只会向 GridView 添加一条记录。如果您添加了新记录，则旧数据将被替换。所以我们必须保留旧记录。

只需在按钮单击事件中输入以下代码即可。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        if(Session["Data"] == null) //Checking if the session contain any value.
        {
            DataTable dt = new DataTable(); //creating the columns.
            dt.Columns.Add("Name");
            dt.Columns.Add("Price");
            dt.Columns.Add("Stock");

            DataRow dr = dt.NewRow(); //Create a new row and add the row values.
            dr[0] = TextBox1.Text;
            dr[1] = TextBox2.Text;
            dr[2] = TextBox3.Text;
            dt.Rows.Add(dr);

            GridView1.DataSource = dt; //Populate values to Gridview.
            GridView1.DataBind();

            Session["Data"] = dt; //Storing that table into session.           
        }
        else
        {
            DataTable dt = new DataTable();
            dt = (DataTable)Session["Data"]; //Retrieve the stored table from session.

            DataRow dr = dt.NewRow(); //Adding a new row to existing table.
            dr[0] = TextBox1.Text;
            dr[1] = TextBox2.Text;
            dr[2] = TextBox3.Text;
            dt.Rows.Add(dr);

            GridView1.DataSource = dt; //Populate new table values to Gridview.
            GridView1.DataBind();

            Session.Remove("Data"); //Clear the session.
            Session["Data"] = dt; //Store the new table to the session.
        }

    } 
```

# c# - 在 DotNetNuke 中打开模块 URL？

> ID：14888714
> 
> 赞同：1
> 
> 时间：2013-02-15T05:21:13.143
> 
> 标签：c#, dotnetnuke

我正在尝试打开一个绑定的模块弹出窗口，但它显示错误。我正在使用的代码是：

```
protected void grdStudentAttendanceList_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "ViewStudent")
    {
        lbntSurnnameClick(e.CommandArgument.ToString());
    }
}

void lbntSurnnameClick(string StudentID)
{
    string url = UrlUtils.PopUpUrl(EditUrl("StudentID", StudentID, "AddOrUpdateStudent"), this, PortalSettings,true,false, 390, 670);
    Response.Redirect(url);
} 
```

它显示了这个错误：

> 从客户端 (:) 检测到具有潜在危险的 Request.Path 值。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：从客户端 (:) 检测到潜在危险的 Request.Path 值。

那么，如何根据`studentID`数据网格打开模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T05:46:01.177

您不能对弹出 URL 执行 response.redirect。

PopUp url 中包含一些 javascript，而不仅仅是一个常规 URL。

您更好的选择是在学生出勤列表中使用超链接，只需将 NavigateUrl 设置为 ItemDataBound 上的 PopUrl！

# java - 通过 hssf/xssf 将数据写入现有 excel 中的单元格。

> ID：14888716
> 
> 赞同：1
> 
> 时间：2013-02-15T05:21:29.630
> 
> 标签：java, eclipse, eclipse-plugin

我处于两难境地。我一直在尝试通过 Java 中的 hssf/xssf 将数据写入现有的 excel 文件。我没有错误，但是当我运行它时仍然无法对 excel 表进行更改。谁能帮我解决这个问题？我的代码是：

```
try {
    FileInputStream inp = new FileInputStream("C:/Users/Training/Desktop/saurav.xlsx");  

            Workbook wb = null;
            try {
                wb = WorkbookFactory.create(inp);
            } catch (InvalidFormatException e) {
                e.printStackTrace();
            }  
            Sheet sheet = wb.getSheetAt(0);  
            Row row = sheet.getRow(3);  
            Cell cell = row.getCell(4);  
            if (cell == null)  
                cell = row.createCell(4);  
            cell.setCellType(Cell.CELL_TYPE_STRING);  
            cell.setCellValue("a test");  

            // Write the output to a file  
            FileOutputStream fileOut = new FileOutputStream("C:/Users/Training/Desktop/saurav.xlsx");  
            wb.write(fileOut);  
            fileOut.close();  
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

有人请帮我解决这个问题。自从过去 2 天以来一直在尝试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T09:06:12.790

而不是使用这个，它在我的系统中工作。

```
try {
FileInputStream inp = new FileInputStream("C:/Users/Training/Desktop/saurav.xlsx");  

        Workbook wb = null;
        try {
            wb = WorkbookFactory.create(inp);
        } catch (InvalidFormatException e) {
            e.printStackTrace();
        }  
        Sheet sheet = wb.getSheetAt(0);  
        Row row = sheet.getRow(3);  
        Cell cell = row.getCell(4);  
            cell = row.createCell(4);  
        cell.setCellType(Cell.CELL_TYPE_STRING);  
        cell.setCellValue("a test");  

        // Write the output to a file  
        FileOutputStream fileOut = new FileOutputStream("C:/Users/Training/Desktop/saurav.xlsx");  
        wb.write(fileOut);  
        fileOut.close();  
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

还要确保在每次运行后刷新 excel 文件。

# c - --*--指针操作？

> ID：14888717
> 
> 赞同：1
> 
> 时间：2013-02-15T05:21:34.507
> 
> 标签：c, pointers

在下面的程序中，

```
int main()
   {

     char a[] = "azmruf";
     char *ptr = a;

     ptr += 5;  

     //Now ptr points at 'f'

     printf("%c", --*ptr--); //e got printed. Bcos of post increment now ptr in u.
     printf("%c", *ptr);     // so 'u' got printed now.

     // Next --*--ptr becomes --*(--ptr), 
     // ptr is moved to r, then --r i.e q is printed, but pointer should 
     // be in 'r'   
     printf("%c", --*--ptr);

     //Im here getting 'q' only instead of 'r'. There is no 'q' in my string.(??!!!)
     printf("%c", *ptr);        

     return 0;
   } 
```

我如何在最后一个 printf() 中得到“q”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:27:20.633

减量运算符有一个非常重要的副作用。即，它将存储的值减少一。您的原始数组中有一个“r”，但已被“q”取代。代码运行后，整个数组如下所示：

```
"azmque" 
```

存储的值实际上发生了变化，因此当您第二次引用数组的第四个元素（又名`*ptr`or `a[3]`）时，该位置的值是“q”。

# c# - 如何格式化没有 \ / 日期的 JSON 日期？

> ID：14888721
> 
> 赞同：2
> 
> 时间：2013-02-15T05:22:09.980
> 
> 标签：c#, serialization

我需要这种格式的 JSON 日期格式：docDate":"1360905419116"、","inDocDate":"1360905419116" 等。

我的序列化：

```
JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
string result = jsonSerializer.Serialize( new {
    docDate = DateTime.Now,
    inDocDate = DateTime.Now,
    outDocDate = DateTime.Now } ); 
```

序列化后我收到的结果：

```
{"docDate":"\/Date(1360905419116)\/","inDocDate":"\/Date(1360905419116)\/","outDocDate":"\/Date(1360905419116)\/"} 
```

我希望有

```
{"docDate":"1360905419116","inDocDate":"1360905419116","outDocDate":"1360905419116"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:35:54.507

您可以使用此扩展方法

```
public static class DateTimeExtensions
{
  internal static readonly long DatetimeMinTimeTicks = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc).Ticks;

  public static long ToJsTime(this DateTime dateTime)
  {
    return (dateTime.ToUniversalTime().Ticks - DatetimeMinTimeTicks) / 10000L;
  }
} 
```

所以你的代码变成：

```
string result = jsonSerializer.Serialize( new {
    docDate = DateTime.Now.ToJsTime().ToString(),
    inDocDate = DateTime.Now.ToJsTime().ToString(),
    outDocDate = DateTime.Now.ToJsTime().ToString() } ); 
```

# .htaccess - .htaccess 不允许我执行除 index.php 之外的根文件

> ID：14888722
> 
> 赞同：0
> 
> 时间：2013-02-15T05:22:12.423
> 
> 标签：.htaccess

我在域中的 .htaccess 文件中有此代码

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f [NC] 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index\.php?main_page=$1&%{QUERY_STRING} [L]

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

但我不能在 http://www.mydomain.com/test1.php 等同一域上执行 index.php[文件](http://www.mydomain.com/test1.php)。它将我重定向到[http://www.mydomain.com/](http://www.mydomain.com/)

请帮我解决这个问题提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:31:13.977

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
     ErrorDocument 404 /index.php
</IfModule> 
```

使用此代码..

# javascript - jQuery 函数在 Chrome 中不起作用

> ID：14888727
> 
> 赞同：0
> 
> 时间：2013-02-15T05:22:37.757
> 
> 标签：javascript, jquery, html, css, cross-browser

我有以下 Jquery 脚本来隐藏和显示一个按钮，具体取决于它所在的 li 标记的类

```
$('li#test').each(function() {
        if($(this).hasClass('active'))
        {
            //Active class is applied
            $(this).children().children().closest("img").attr("src", "assets/img/button_home_selected3.png");
            $(this).children().children().closest("button").css("display","table");
        }
        else
        {
            $(this).children().children().closest("img").attr("src", "assets/img/button_home_plain1.png");
            $(this).children().children().closest("button").css("display","none");
        }
    }); 
```

默认情况下，按钮标签显示：无。

html是：

```
<ul id="nav-tabs" data-tabs="tabs">
  <li id="test" style="list-style: none;" class="active">
   <a href="#home" data-toggle="tabs" ><img src="assets/img/button_home_selected3.png" id="test2"  width="83"/><span>Home</span></a>
  </li>
</ul> 
```

li 标签是使用脚本动态添加的

```
$('.plus').click(function(e) {
 e.preventDefault();
 var li_count = $('#nav-tabs').length;
 if (li_count <= 3){
  if(counter <= 3){
   $('#nav-tabs').append('<li id="test" ><a href="#tab' + counter + '" data-toggle="tabs" ><img src="assets/img/button_home_plain1.png" width="83" id="test2">Tab' + counter + '</span><button type="button" class="close">&times;</button></a></li>');
} else { alert("Only 3 Tabs Allowed!")};
} 
```

还有一个活动标签可以在选项卡之间切换，这是使用脚本完成的

```
$('li#test').each(function() {
if($(this).hasClass('active'))
 {//Active class is applied
  $(this).children().children().attr("src", "assets/img/button_home_selected3.png");
 }
 else
 {
  $(this).children().children().attr("src", "assets/img/button_home_plain.png");
 } 
```

});

这适用于 IE 和 firefox，但不适用于谷歌浏览器......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:04:58.857

我得到了答案，经过一些研究，谷歌浏览器似乎不会隐藏和显示除 div 和 span 之外的任何其他标签，因为我的按钮标签不在任何 div 或 span 标签内，因此它没有在 Chrome 上执行操作。 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:53:48.760

您的代码存在一些问题：

1.  ID应该是唯一的。因此，将您的 HTML 更改为：

    ```
    <ul id="nav-tabs" data-tabs="tabs">
      <li class="test active" style="list-style: none;">
       <a href="#home" data-toggle="tabs" >
        <img src="assets/img/button_home_selected3.png" class="test2" width="83"/> 
        <span>Home</span>
       </a>
      </li>
    </ul> 
    ```

    的JavaScript：

    ```
    $('li.test').each(function() {
      if($(this).hasClass('active'))
      {
        //Active class is applied
        $(this).find("img").attr("src", "assets/img/button_home_selected3.png");
        $(this).find("button").show();
      }
      else
      {
        $(this).find("img").attr("src", "assets/img/button_home_plain1.png");
        $(this).find("button").hide();
      }
    }); 
    ```

2.  获取`li`'s 的长度，而不是`ul`:

    ```
    $('.plus').click(function(e) {
      e.preventDefault();
      var li_count = $('#nav-tabs').find('li').length;
      if (li_count <= 3){
        if(counter <= 3){
          $('#nav-tabs').append('<li class="test"><a href="#tab' + counter + '" data-toggle="tabs" ><img src="assets/img/button_home_plain1.png" width="83" class="test2">Tab' + counter + '</span><button type="button" class="close">&times;</button></a></li>');
        } else {
          alert("Only 3 Tabs Allowed!")
        }
      }
    }); 
    ```

# php - 如何将 PHP 变量从一个函数传递到另一个函数？

> ID：14888733
> 
> 赞同：2
> 
> 时间：2013-02-15T05:23:15.037
> 
> 标签：php, class, function, variables, global-variables

我想将变量`($q_view)`从函数`q_view_main`传递给函数`sidebar`。还搜索了stackoverflow的解决方案，但不明白。

两个函数都在同一个类中。

```
function main()
{       
    $content=$this->content;

    $this->main_parts($content);

    $this->suggest_next();

    $this->widgets('main', 'bottom');

    $this->main_sidebar();
}
function main_sidebar()
{
    $content=$this->content;
    $main_class = ((!empty ($content['widgets']['main']['high'])) ? 'twelve' : 'nine');
    if (!empty ($content['widgets']['main']['high'])){                              
        $this->output('<DIV class="main-sidebar three columns">', '');
        $this->post_tags($q_view_for_sidebar, 'qa-q-view'); //want 
        $this->widgets('main', 'high');

        $this->output('</DIV>');
    }
}
function main_parts($content)
{
    foreach ($content as $key => $part) {
        $this->set_context('part', $key);
        $this->main_part($key, $part);
    }
}
function main_part($key, $part)
{
    if (strpos($key, 'custom')===0)
        $this->output_raw($part);

    elseif (strpos($key, 'form')===0)
        $this->form($part);

    elseif (strpos($key, 'q_list')===0)
        $this->q_list_and_form($part);

    elseif (strpos($key, 'q_view')===0)
        $this->q_view($part);

    elseif (strpos($key, 'a_form')===0)
        $this->a_form($part);

    elseif (strpos($key, 'a_list')===0)
        $this->a_list($part);

    elseif (strpos($key, 'ranking')===0)
        $this->ranking($part);

    elseif (strpos($key, 'message_list')===0)
        $this->message_list_and_form($part);

    elseif (strpos($key, 'nav_list')===0) {
        $this->section(@$part['title']);        
        $this->nav_list($part['nav'], $part['type'], 1);
    }
}
function q_view_main($q_view)
{           
    $this->q_view_stats($q_view);           
    $this->post_meta_author($q_view, 'qa-q-view');
    $this->q_view_content($q_view);
    $this->q_view_extra($q_view);
    $this->q_view_follows($q_view);
    $this->q_view_closed($q_view);

    $this->post_tags($q_view, 'qa-q-view');         
    $this->post_meta_other($q_view, 'qa-q-view');
    $this->q_view_buttons($q_view);
    $this->c_list(@$q_view['c_list'], 'qa-q-view');
    $this->output('</DIV>');

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:51:43.053

如果您的两个函数都驻留在同一个类中，您可以使用 $this 在另一个函数中调用一个函数，如其他答案中所指出的

```
class myclass{

public $var1 = 121;
    public function foo($postid){
        echo $postid;
    }
    public function bar(){
        $this->foo($this->var1);
    }
}
$objectmyclass = new myclass();
$objectmyclass->bar(); 
```

或者

```
class myclass{

public $var1 = 122;
    public function foo($postid){
        echo $postid;
    }
    public function bar($postid){
        $this->foo($postid);
    }
}
$objectmyclass = new myclass();
$objectmyclass->bar($objectmyclass->var1); 
```

两种方式你都可以在函数 foo 中执行语句希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:32:25.083

如果我没有误会您，您只需在侧边栏功能中调用 post 功能

```
function sidebar($postID)
{
    $postID=$this->post($postID);
    $this->output($this->content);
    $this->tag($postID); //get $postID from sidebar
} 
```

# python - TypeError：“NoneType”对象不可迭代 - Python

> ID：14888736
> 
> 赞同：1
> 
> 时间：2013-02-15T05:23:20.930
> 
> 标签：python, nonetype

我知道以前有人问过这个问题，但我似乎无法让我的工作。有人可以帮我解决这个问题吗？

```
import sys

class Template:
    def processVariable(self, template, data):
        first = template.find('{{')
        second = template.find('}}')
        second = second + 2
        out = template[first+second]
        assert[out.startswith('{{')]
        out = out.strip('{}')
        rest = template[second:]
        if out in data:
            newstring = data[out]
            return(rest, newstring)
        else:
            print "Invalid Data Passed it"

t = Template()
vars = {
    'name': 'Jane',
    'course': 'CS 1410',
    'adjective': 'shimmering'
}

(rest, out) = t.processVariable('{{name}} is in {{course}}', vars) 
```

这是我得到的错误：

```
File "template.py", line 28, in <module>
    (rest, out) = t.processVariable('{{name}} is in {{course}}', vars)
TypeError: 'NoneType' object is not iterable 
```

我了解 NoneType 但这是因为我的 for 循环还是我只是错过了一些简单的事情？提前致谢！

我的代码将被传递到一个字段中，以便我的老师可以针对它运行代码，它会通过或失败。这是他的代码将运行的内容：

```
import Candidate

t = Candidate.Template()
vars = {
    'name': 'Jane',
    'course': 'CS 1410',
    'adjective': 'shimmering'
}

(rest, out) = t.processVariable('{{course}} is {{adjective}}', vars)
print 'rest is: [' + rest + ']'
print 'out is : [' + out + '] 
```

它应该返回的是：

```
rest is: [ is in {{course}}]
out is : [Jane] 
```

如果有效，它将返回是或否。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T05:27:12.680

您没有从您的`else`部分返回任何内容，因此默认情况下您的函数将返回`None`。

当然，您不能将 a 解压缩`None`为两个变量。尝试从 else 部分返回一个元组，如下所示：

```
if out in data:
    newstring = data[out]
    return (rest, newstring)
else:
    print "Invalid Data Passed it"
    return (None, None) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T05:38:07.300

您的代码中有错误。

这：

```
out = template[first+second]
assert[out.startswith('{{')] 
```

应该：

```
out = template[first:second]
assert out.startswith('{{') 
```

和：

```
 else:
        print "Invalid Data Passed it" 
```

应该是：

```
 else:
        raise ValueError('Invalid data') 
```

这个功能也已经在 Python 中了：

```
from string import Template
t = Template('$name is in $course')

vars = {
    'name': 'Jane',
    'course': 'CS 1410',
    'adjective': 'shimmering'
}

print(t.substitute(vars)) 
```

输出：

```
Jane is in CS 1410 
```

# c++ - 我必须在 C++ 中删除一个静态数组吗？

> ID：14888737
> 
> 赞同：9
> 
> 时间：2013-02-15T05:23:22.453
> 
> 标签：c++, arrays, memory-management

我正在写一些这样的代码：

```
while(true) {
    int array[5];
    // do something
} 
```

对于循环的每一轮，数组都是一个新数组。我需要在循环结束时删除数组吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-15T05:26:08.137

> 我需要在循环结束时删除数组吗？

**不**，您不需要删除它，因为它`array`具有自动存储期限。当退出每个while循环时，它将被释放。

您需要调用`delete [] / new []`, 并`delete / new`成对调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:24:29.303

不。

在堆栈上声明的变量不需要手动释放。`while`您的数组在循环范围内。对于循环的每次迭代，数组在堆栈上分配，然后自动释放。

只有用声明的数组`new[]`必须手动释放`delete[]`

此外，您声明的数组没有`static`任何意义。该[`static`](http://en.wikipedia.org/wiki/Static_variable)关键字在 C 中具有特定含义。您声明的数组实际上存储为`auto`（自动存储）变量，这意味着它在超出范围时会自动释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:31:31.767

其他答案已正确解释 a`delete`是不必要的，因为您的数组在堆栈上，但他们没有解释堆栈是什么。这里有一个非常好的解释：[堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

因为它适用于您的问题：在 C 和 C++ 中，除非您明确告诉编译器，否则您的变量将放置在堆栈中，这意味着它们仅存在于声明它们的范围（即块）内。显式告诉编译器将某些东西放在堆上的方法是使用`malloc`（C 方式）或`new`（C++ 方式）。只有这样你才需要调用`free`（在 C 中）或`delete`/ `delete[]`（C++）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T05:26:58.047

您不能（除非您使用一些复杂的程序集）并且不需要删除分配在堆栈上的数组或对象。

如果由于某种原因您觉得需要删除创建的数组，则：

```
int *array = new int[5];
//do something
delete[] array; 
```

另外，我的建议是使用`std::vector`而不是数组。

# javascript - 引导模式未显示

> ID：14888744
> 
> 赞同：1
> 
> 时间：2013-02-15T05:24:16.913
> 
> 标签：javascript, jquery, twitter-bootstrap

出于某种原因，我无法触发引导模式，下面是我的代码。

```
<!DOCTYPE html>
    <html lang="en">
      <head>
        <link href="http://localhost/scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      </head>
      <body>
        <div id="modal" class="modal hide fade">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3>Modal header</h3>
              </div>
              <div class="modal-body">
                <p>One fine body…&lt;/p>
              </div>
              <div class="modal-footer">
                <a href="#" class="btn">Close</a>
                <a href="#" class="btn btn-primary">Save changes</a>
              </div>
            </div>
            <button id="button">Fire</button>
        <script src="http://localhost/scripts/bootstrap/js/bootstrap.min.js"></script>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script>
          $(function(){
             $("#button").click(function(){
                $('#modal').modal('show');
             });
          });
        </script>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:25:23.193

您必须在`bootstrap`库**之后**包含`jQuery`库。您是否费心检查浏览器的控制台是否有任何错误？

# iphone - 如何添加用于垂直滚动的滚动视图以及标签

> ID：14888750
> 
> 赞同：0
> 
> 时间：2013-02-15T05:25:28.657
> 
> 标签：iphone, ipad, uiscrollview, uilabel

我想添加带有标签的 UIScrollView 并使其垂直滚动，如果我有更多标签我正在添加以下代码但它没有滚动。我还有 5 个标签要添加。

在头文件中

```
IBOutlet UIScrollView*scrollView;

    @property(nonatomic,retain) IBOutlet UIScrollView*scrollView; 
```

在 viewDidLoad 的实现文件中

```
 titleLabel = [[UILabel alloc ] initWithFrame:CGRectMake(892,257,206,84)];
 titleLabel.textAlignment =  UITextAlignmentRight;
 titleLabel.textColor = [UIColor blackColor];
 titleLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
 [scrollView addSubview:titleLabel];

titleLabel = [[UILabel alloc ] initWithFrame:CGRectMake(10,20,206,84)];
titleLabel.textAlignment =  UITextAlignmentRight;
titleLabel.textColor = [UIColor blackColor];
titleLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
[scrollView addSubview:titleLabel];

titleLabel1 = [[UILabel alloc ] initWithFrame:CGRectMake(10,110,206,84)];
titleLabel1.textAlignment =  UITextAlignmentRight;
titleLabel1.textColor = [UIColor blackColor];
titleLabel1.font = [UIFont fontWithName:@"Helvetica" size:14];
titleLabel1.text=@"tilte Working Fine";

[scrollView addSubview:titleLabel1];

titleLabel2 = [[UILabel alloc ] initWithFrame:CGRectMake(10,190,206,84)];
titleLabel2.textAlignment =  UITextAlignmentRight;
titleLabel2.textColor = [UIColor blackColor];
titleLabel2.text=@"tilte Working Fine";
titleLabel2.font = [UIFont fontWithName:@"Helvetica" size:14];
[scrollView addSubview:titleLabel2];

titleLabel3 = [[UILabel alloc ] initWithFrame:CGRectMake(10,270,206,84)];
titleLabel3.textAlignment =  UITextAlignmentRight;
titleLabel3.textColor = [UIColor blackColor];
titleLabel3.font = [UIFont fontWithName:@"Helvetica" size:14];
titleLabel3.text=@"tilte Working Fine";

[scrollView addSubview:titleLabel3];

titleLabel4 = [[UILabel alloc ] initWithFrame:CGRectMake(10,360,206,84)];
titleLabel4.textAlignment =  UITextAlignmentRight;
titleLabel4.textColor = [UIColor blackColor];
titleLabel4.font = [UIFont fontWithName:@"Helvetica" size:14];
titleLabel4.text=@"tilte Working Fine";

[scrollView addSubview:titleLabel4];

titleLabel5 = [[UILabel alloc ] initWithFrame:CGRectMake(10,450,206,84)];
titleLabel5.textAlignment =  UITextAlignmentRight;
titleLabel5.textColor = [UIColor blackColor];
titleLabel5.font = [UIFont fontWithName:@"Helvetica" size:14];
titleLabel5.text=@"tilte Working Fine";

[scrollView addSubview:titleLabel5];

titleLabel6 = [[UILabel alloc ] initWithFrame:CGRectMake(10,530,206,84)];
titleLabel6.textAlignment =  UITextAlignmentRight;
titleLabel6.text=@"tilte Working Fine";

titleLabel6.textColor = [UIColor blackColor];
titleLabel6.font = [UIFont fontWithName:@"Helvetica" size:14];
[scrollView addSubview:titleLabel6]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:28:14.417

如果内容大小大于将滚动的框架大小，则需要增加滚动视图的内容大小，使其与框架大小不同。

# ios - ios应用程序后台内存分配失败

> ID：14888753
> 
> 赞同：0
> 
> 时间：2013-02-15T05:25:46.680
> 
> 标签：ios, objective-c, ipad, memory-management

我正在尝试在本地使用的函数中创建一些无符号整数的二维数组。但是，应用程序在移至后台时会崩溃。之后我尝试了以下代码：

对于后台任务：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

    if([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]){
        if([[UIDevice currentDevice] isMultitaskingSupported]){
            __block UIBackgroundTaskIdentifier bgTask;
            UIApplication *application = [UIApplication sharedApplication];
            bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
                [application endBackgroundTask:bgTask];
                bgTask = UIBackgroundTaskInvalid;
            }];

            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                //[self captureImage];
                [self memCheck];
                [application endBackgroundTask:bgTask];
                bgTask = UIBackgroundTaskInvalid;
            });
        }
    }
} 
```

功能：

```
-(void) memCheck{
    size_t XY[768][1024];
    for(int i=0;i<768; ++i){
        for(int j=0;j<1024;++j){
            XY[i][j]=1;
        }
    }      
} 
```

上面的测试代码片段导致应用程序崩溃。但是，如果我尝试只分配 768*4 字节而不是 768*1024*4，它工作正常。

操作系统是否由于内存膨胀或任何其他原因暂停了应用程序？另外，是否有解决方法？

谢谢。

PS：我使用过 IOSurfaces（私有 iOS API 的一部分），在后台创建和发布它们，我从未遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:32:17.887

可能这不是背景问题，而是一般线程问题。通过使用`dispatch_async`您在辅助线程中执行块。[Apple 的文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)建议堆栈大小为 512 KB。局部变量通常分配在堆栈中。因此，一个 768*1024*4 =3.145.728 的数组超出了堆栈限制。

# javascript - 选择元素后带有自动完成触发器的Jquery

> ID：14888757
> 
> 赞同：0
> 
> 时间：2013-02-15T05:26:09.223
> 
> 标签：javascript, jquery, jquery-autocomplete

我正在尝试使用自动完成 jquery API。问题是一旦我选择了一个项目，我想触发一个函数或一组代码，但我不断收到未定义的项目。

这是我的代码：

```
function init()
{
    var input = document.getElementById('event_address');
    var options = 
    {
      types: ['geocode']
    };

    var autocomplete = new google.maps.places.Autocomplete(input, options);

    // event triggered when drop-down option selected
    select: function(event, ui) {
        var address = document.getElementById(event_address).value;
        geocoder.geocode( { 'address': address}, function(results, status) 
        {
            if (status == google.maps.GeocoderStatus.OK)
            {
                alert(results[0].geometry.locations);
            }
        });
    }
} 
```

这是我的错误： Uncaught SyntaxError: Unexpected token (

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:45:37.777

首先，我相信您指的是 jqueryUI 的自动完成小部件。该`select`方法在进行自动完成选择时触发。我假设您要做的是显示从自动完成列表中选择的地理区域的坐标。

你需要做这样的事情：

```
$('#inputbox').autocomplete({
   select: function(event, ui){
     // code to get selection
     var address = $('#inputbox').text();
     //assuming your geocode is correct
     geocoder.geocode( { 'address': address}, function(results, status) 
    {
        if (status == google.maps.GeocoderStatus.OK)
        {
            alert(results[0].geometry.locations);
        }
    });
   }

}); 
```

有关详细信息，请参阅自动完成文档：[http ://api.jqueryui.com/autocomplete/#event-select](http://api.jqueryui.com/autocomplete/#event-select)

# jquery - Which option is correct, i am unable to find out difference between top 3 options

> ID：14888761
> 
> 赞同：0
> 
> 时间：2013-02-15T05:26:41.380
> 
> 标签：jquery

![](../Images/f7027871e2f9d7394eba450adcddcf45.png)

I encountered this question and can't figure out what is right answer for it. Help Please.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:31:02.740

其实没有一个是对的。他们正在寻找的答案可能是 (a)，这意味着每个链接都有一个以 https*开头的 HREF。*但是由于它们不包含协议字符串，因此没有什么可以阻止它匹配类似`https.wordpress.com`或之类的 URL `https/images/kitten.gif`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:30:10.083

According to the [jQuery documentation](http://api.jquery.com/attribute-starts-with-selector/), it should be option a, BUT that won't help if you are already on a page loaded by https and you have relative links.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:30:48.277

This is a question about CSS and regular expressions, though it looks like a jQuery question. The trick is that RegEx's use the `^` and `$` characters to indicate the beginning and ending of a line, respectively. Therefore, the `^=` operator would match the beginning of the `href` attribute of the anchor elements, and the right answer is option a.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T05:30:53.267

The correct answer is

```
$('a[href^=https]'); 
```

according to jQuery website..

Selects elements that have the specified attribute with a value beginning exactly with a given string.

```
jQuery( "[attribute^='value']" ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T05:46:17.253

好的，我找到了.. 是的，正确的选项是'a'....

as '^' - 将检查初始表达式 '$' - 将检查确切的单词 https

# macos - 在 64 位 Mac 上构建 Lua 5.0

> ID：14888763
> 
> 赞同：3
> 
> 时间：2013-02-15T05:26:43.800
> 
> 标签：macos, lua, makefile, luac

出于兼容性/遗留原因，我需要在我的 64 位 Intel Mac 上从 5.0 版构建 Lua 编译器 (luac)。（5.1或更高版本无法使用。）

通过 Xcode 4.6 的 Preferences 窗口安装的开发工具。

在我“cd”到 Lua 目录后，我发出命令“make”。

```
cd include; make all
make[1]: Nothing to be done for `all'.
cd src; make all
make[1]: Nothing to be done for `all'.
cd src/lib; make all
make[1]: Nothing to be done for `all'.
cd src/luac; make all
gcc -o ../../bin/luac  luac.o print.o lopcodes.o -L../../lib -llua -llualib -lm
Undefined symbols for architecture x86_64:
  "_UNUSED", referenced from:
      _writer in luac.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make[1]: *** [../../bin/luac] Error 1
make: *** [all] Error 2 
```

我不知道如何为 x86_64 配置 make 过程。有人可以帮我完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:25:25.060

它对我有用，但下面的输出与你的不同：

```
...
cd src/luac; make all
gcc -O2 -Wall -I../../include -I..      -c -o luac.o luac.c
gcc -O2 -Wall -I../../include -I..      -c -o print.o print.c
gcc -o lopcodes.o -c -O2 -Wall -I../../include -I..    -DLUA_OPNAMES ../lopcodes.c
gcc -o ../../bin/luac  luac.o print.o lopcodes.o -L../../lib -llua -llualib -lm 
cd src/lua; make all
gcc -O2 -Wall -I../../include      -c -o lua.o lua.c 
```

`make clean all`先在顶层试试。

# iphone - How to Name navigation bar

> ID：14888767
> 
> 赞同：-3
> 
> 时间：2013-02-15T05:26:56.463
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uinavigationbar

in my app i'm am basically pushing a viewcontroller from another one `[self.navigationController pushViewController:vc animated:YES];`

The view controller that results from this call has a navigation bar but I can't name it through the story board. Basically, how do I set the navigation bar's text in code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:24:42.697

如果您在情节提要中工作，那么您还可以设置导航栏的标题，只需双击导航栏即可。我会为你工作得很好。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:31:02.843

将此行添加到 viewDidLoad self.navigationItem.title = @"MyTitle";

# java - java.sql.SQLException: [DataDirect][SQLServer JDBC Driver]Unhandled token type: Unknown token: 0x50

> ID：14888769
> 
> 赞同：0
> 
> 时间：2013-02-15T05:27:00.883
> 
> 标签：java, jdbc

I'm using jdk 1.4 and trying to connect SQL server 2000.

I am getting following exception.

Please provide solution to fix this

```
java.sql.SQLException: [DataDirect][SQLServer JDBC Driver]Unhandled token type: Unknown token: 0x50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:32:02.677

这 - 我只是用谷歌搜索它。看起来你必须升级。

[http://msdn.microsoft.com/en-us/library/ms378422.aspx](http://msdn.microsoft.com/en-us/library/ms378422.aspx)

# android - Broadcast receiver at a specific Time

> ID：14888773
> 
> 赞同：3
> 
> 时间：2013-02-15T05:27:15.240
> 
> 标签：android

I want to create a broadcast receiver which will be invoking at the specific time say 9'o clock in morning.Is it possible in android,If yes Somebody please help me to do it

# javascript - event.ctrlKey 适用于 IE 和 Chrome，但不适用于 legendItemClick 上的 Firefox

> ID：14888778
> 
> 赞同：3
> 
> 时间：2013-02-15T05:27:52.183
> 
> 标签：javascript, firefox, highcharts

构建了一个功能，可以取消选择除 ctrl-clicked 项目之外的所有项目。它在 IE 和 Chrome 中运行良好，但在 Firefox 中则不行。[在http://jsfiddle.net/PJVK3/](http://jsfiddle.net/PJVK3/)
尝试 jsfiddle

尝试使用简单的 javascript 代码捕获相同的事件，并出现相同的问题。这适用于 Chrome(24.0.1312.57) 和 IE(9)，但不适用于 Firefox(18.0.2)：

```
<!DOCTYPE html>
<html>
<head>
<script>
function myFunction()
{
if (event.ctrlKey){document.getElementById("demo").innerHTML="ctl key pressed";}
if (!event.ctrlKey){document.getElementById("demo").innerHTML="ctl key NOT pressed";}
}
</script>
</head>
<body>
<p>Click the button to trigger a function.</p>
<button onclick="myFunction()">Click me</button>
<p id="demo"></p>
</body>
</html> 
```

怎么了？任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:29:54.890

如果您查看源代码，您会看到它将事件存储在`event.browserEvent`.
这是一个固定的错误：[https ://github.com/highslide-software/highcharts.com/pull/992](https://github.com/highslide-software/highcharts.com/pull/992)

那么，为什么你必须使用`event.browserEvent`而不是`window.event`？
很简单，因为`window.event`Firefox 中不存在。

```
legendItemClick: function(e) {
    var visibility = this.visible ? 'visible' : 'hidden';

    if (!e.browserEvent.ctrlKey) {
        if (!confirm('The series is currently '+ 
            visibility +'. Do you want to change that?')) {
            return false;
        }
    }
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/u7p5r/)

**源代码**-*相关代码*：

```
.on('click', function (event) {
    var strLegendItemClick = 'legendItemClick',
        fnLegendItemClick = function () {
            item.setVisible();
        };

    // Pass over the click/touch event. #4.
    event = {
        browserEvent: event                  // < -- here is the magic
    };

    // click the name or symbol
    if (item.firePointEvent) { // point
        item.firePointEvent(strLegendItemClick, event, fnLegendItemClick);
    } else {
        fireEvent(item, strLegendItemClick, event, fnLegendItemClick);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T01:35:25.373

你可以使用这样的东西：

```
 var evtobj = window.event ? event : e;
                if (evtobj.shiftKey) {
                    //do something
                } else {
                   //other things
                } 
```

这适用于 Chrome、IE 和 firefox。

# iphone - How to get executing line number, method name and file name at runtime in Objective C(Dynamically)

> ID：14888779
> 
> 赞同：1
> 
> 时间：2013-02-15T05:27:55.603
> 
> 标签：iphone, ios, objective-c, logging, dynamic

I am developing an iphone application. I want log file name, method name and line number of the method while it is executing. I have used following code for getting the required values.

`NSLog(@"Hi! I'm in method %s at %s:%u", __FUNCTION__, __FILE__, __LINE__);`

But, I want to log the values dynamically without using NSLogs in code.

I have tried environment variable `NSObjCMessageEnabled: YES` which gives only method names, but I want file name and line number as well. Please help.

# android - 视图无法在android布局中投射到ViewGroup

> ID：14888782
> 
> 赞同：4
> 
> 时间：2013-02-15T05:28:08.413
> 
> 标签：android, android-layout

我正在为 android 应用程序设计布局。这是布局的骨架。 ![在此处输入图像描述](../Images/6847767e24ecf34980b415490cfe4c30.png)

我尝试的是使用表格布局，因为 GUI 可以分解为表格行和列。基本上，我想将布局分成两列，如您所见。这是xml代码

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <!-- 2 columns -->
    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip" >

        <View
            android:id="@+id/view1"
            android:layout_weight="7"
            android:layout_width="0dp"
            android:layout_height="wrap_content">
            <TextView
                android:id="@+id/textView1"
                android:text="Column 1"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </View>

        <View
            android:id="@+id/view2"
            android:layout_weight="3"
            android:layout_width="0dp"
            android:layout_height="wrap_content" >
            <Button
                android:id="@+id/button1"
                android:text="Column 2" />
        </View>

    </TableRow>

</TableLayout> 
```

我在 GUI 中收到以下错误

```
Exception raised during rendering: android.view.View cannot be cast to android.view.ViewGroup 
```

我认为这说明我们不能对意见进行分组。如果不可能，如何处理。我来自网络背景。我以为我可以像在 html 中一样将视图用作 div。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T06:52:43.257

您可以对视图进行分组，但您需要使用视图组而不是视图。

ViewGroup 的示例是 LinearLayout（用于水平或垂直显示子视图）、RelativeLayout（用于使用相对位置显示子视图）、FrameLayout、TableLayout 等。使用适合您需要的任何 ViewGroup。

要使某些东西正常工作，请将 XML 中的两个视图更改为 FrameLayouts。并且还要给出 Button 和 TextView 布局参数（例如`android:layout_width="wrap_content"`，高度相同） - 否则当你运行它时你会得到另一个错误。

# php - Getting Canada Post Shipping warning (REST + PHP)

> ID：14888783
> 
> 赞同：0
> 
> 时间：2013-02-15T05:28:08.767
> 
> 标签：php

When I am sending Transmit Shipment Request to canada Post Shipping Server then it is giving me warning message "postal-zip-code value is not a valid instance of type".

My Transmit Shipment Request XML is as follows :

```
<?xml version="1.0" encoding="UTF-8"?><transmit-set xmlnssi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.canadapost.ca/ws/manifest" ><group-ids><group-id>ACCOUNTGROUPID</group-id></group-ids><requested-shipping-point>MYREQUESTSHIPPINGPOINT</requested-shipping-point><detailed-manifests>true</detailed-manifests><method-of-payment>Account</method-of-payment><manifest-address><manifest-company>COMPANY</manifest-company><phone-number>123456</phone-number><address-details><address-line-1>PACIFIC COAST HWY</address-line-1><city>MALIBU</city><prov-state>CA(For California)</prov-state><postal-zip-code>90265</postal-zip-code></address-details></manifest-address></transmit-set> 
```

Please help me out.

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T19:09:25.813

您的 xml 是说您打算在发件人地址位于加利福尼亚的一组货件上传输货件。

有些东西告诉我这不是你想要的。

如果您从加利福尼亚运送到加拿大，则需要使用 USPS，他们将移交给加拿大邮政。

如果您从加拿大运送到加利福尼亚，则需要在 createShipments() 调用中指定加利福尼亚的目的地地址，并且您在 transmitShipments() xml 中提供的地址信息应该是您计划从哪里发货（即如果加拿大邮政要取货，请填写您的仓库地址，或您计划通过加拿大邮政投递货物的邮局地址）。

# android - 如何在android中单击按钮时滚动Horizo ntalScrollView？

> ID：14888785
> 
> 赞同：5
> 
> 时间：2013-02-15T05:28:15.230
> 
> 标签：android, horizontal-scrolling, horizontalscrollview

我的 android 应用程序中有水平滚动视图，带有下一个和上一个按钮。我只想在 scollview 需要滚动时显示这些按钮。即，滚动视图内容的宽度超过显示宽度。还想在到达第一个和下一个时隐藏上一个和下一个按钮分别是最后一个项目。单击这些按钮时如何转到下一个/上一个项目？

**主要的.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mainLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#ffffff" >

        <Button
            android:id="@+id/btnPrevoius"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="Previous"
            android:visibility="gone" />

        <HorizontalScrollView
            android:id="@+id/horizontalScrollView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip"
            android:layout_toLeftOf="@+id/btnNext"
            android:layout_toRightOf="@+id/btnPrevoius"
            android:fillViewport="true" >

            <LinearLayout
                android:id="@+id/linearLayout1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >
            </LinearLayout>
        </HorizontalScrollView>

        <Button
            android:id="@+id/btnNext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:text="Next"
            android:visibility="gone" />

    </RelativeLayout> 
```

**活动**

```
 public class SampleActivity extends Activity {
            private static LinearLayout linearLayout;
            private static HorizontalScrollView horizontalScrollView;
            private static Button btnPrevious;
            private static Button btnNext;
            private static int displayWidth = 0;
            private static int arrowWidth = 0;
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
                horizontalScrollView = (HorizontalScrollView) findViewById(R.id.horizontalScrollView1);
                linearLayout = (LinearLayout) findViewById(R.id.linearLayout1);
                btnPrevious = (Button) findViewById(R.id.btnPrevoius);
                btnNext = (Button) findViewById(R.id.btnNext);
                for (int i = 0; i < 15; i++) {
                    Button button = new Button(this);
                    button.setTag(i);
                    button.setText("---");
                    linearLayout.addView(button);
                }
                ViewTreeObserver vto = linearLayout.getViewTreeObserver();
                vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

                    @Override
                    public void onGlobalLayout() {
                        ViewTreeObserver obs = linearLayout.getViewTreeObserver();
                        obs.removeGlobalOnLayoutListener(this);
                        Display display = getWindowManager().getDefaultDisplay();
                        displayWidth = display.getWidth();
                        if (linearLayout.getMeasuredWidth() > (displayWidth - 40)) {
                            btnPrevious.setVisibility(View.VISIBLE);
                            btnNext.setVisibility(View.VISIBLE);
                        }
                    }

                });
                btnPrevious.setOnClickListener(listnerLeftArrowButton);
                horizontalScrollView.setOnTouchListener(listenerScrollViewTouch);
            }

            private OnTouchListener listenerScrollViewTouch = new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    showHideViews();
                    return false;
                }
            };

            private OnClickListener listnerLeftArrowButton = new OnClickListener() {

                @Override
                public void onClick(View v) {
                    horizontalScrollView.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, new KeyEvent(0, 0));
                }
            };

        public static void showHideViews() {
            int maxScrollX = horizontalScrollView.getChildAt(0).getMeasuredWidth()- displayWidth;
            Log.e("TestProjectActivity", "scroll X = " +horizontalScrollView.getScrollX() );
            Log.i("TestProjectActivity", "scroll Width = " +horizontalScrollView.getMeasuredWidth() );
            Log.d("TestProjectActivity", "Max scroll X = " + maxScrollX);

            if (horizontalScrollView.getScrollX() == 0) {
                hideLeftArrow();
            } else {
                showLeftArrow();
            }
            if (horizontalScrollView.getScrollX() == maxScrollX) {
                showRightArrow();
            } else {
                //hideRightArrow();
            }
        }

        private static void hideLeftArrow() {
            btnPrevious.setVisibility(View.GONE);
        }

        private static void showLeftArrow() {
            btnPrevious.setVisibility(View.VISIBLE);
        }

        private static void hideRightArrow() {
            btnNext.setVisibility(View.GONE);
        }

        private static void showRightArrow() {
            btnNext.setVisibility(View.VISIBLE);
        }
    } 
```

这个`'maxScrollX'`值对我来说不正确。**如何为此找到最大滚动值？** 提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-31T13:59:31.297

这可能来得有点晚，但对于那些将面临这个问题的人，我建议替代解决方案。

首先，使用与 Horizo​​ntalScrollView 不同的组件。以下是选项：

**选项 1：** [水平 ListView](https://github.com/dinocore1/DevsmartLib-Android/blob/master/devsmartlib/src/com/devsmart/android/ui/HorizontalListView.java) - 将此类添加到您的项目中（创建一个单独的包，例如 com.yourproject.widgets）。此外，您还需要创建自定义适配器，请参阅此[示例](https://github.com/dinocore1/DevsmartLib-Android/blob/master/demo/src/com/devsmart/demo/HorizontalListViewDemo.java)中的操作方式。我建议您创建单独的适配器类（exp.Horizo​​ntalListViewAdapter）并将其放入已创建的 com.yourproject.widgets 包中。

*   将此小部件添加到 xml 中的布局中（将其放在需要模拟滚动行为的按钮之间），您需要添加以下内容：

```
<com.yourproject.widgets.HorizontalListView
            android:id="@+id/hList"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/> 
```

*   在使用小部件的 Activity/Fragment 中引用这个（连同按钮）

```
HorizontalListView mHList = (HorizontalListView) findViewById (R.id.hList); 
Button bPrevoius = (Button) findViewById (R.id.btnPrevoius);
Button bNext = (Button) findViewById (R.id.btnNext); 
```

*   将 onClickListeners 添加到按钮。使用 Horizo​​ntalListView 小部件中预定义的 scrollTo() 函数。正如您在代码中看到的，滚动需要 int dp 值。如果要向右滚动（下一个），请添加正值，如果要向左滚动（上一个），请使用负值：

    ```
    bPrevoius.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            //value 500 is arbitrarily given. if you want to achieve 
            //element-by-element scroll you should get the width of the 
            //previous element dynamically or if the elements of the 
            //list have uniform width just put that value instead
             mHList.scrollTo(-500);
            //if it's the first/last element you can bPrevoius.setEnabled(false)

        }
    });

    bNext.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            mHList.scrollTo(500);

        }
    }); 
    ```

**选项 2：**此问题的最新解决方案可能是 Android L 中引入的新小部件 [RecyclerView](https://developer.android.com/preview/material/ui-widgets.html#recyclerview)（添加 android:scrollbars="vertical" 似乎可以解决问题；除此之外应该具有常规的 ListView 行为）。有关更多信息，请查看官方文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:32:13.193

德武

请查看以下链接

1) [http://android-er.blogspot.in/2012/07/implement-gallery-like.html](http://android-er.blogspot.in/2012/07/implement-gallery-like.html)

2) [http://androiddreamers.blogspot.in/2012/09/horizo​​ntal-scroll-view-example.html](http://androiddreamers.blogspot.in/2012/09/horizontal-scroll-view-example.html)

3) [http://code.google.com/p/mobyfactory-uiwidgets-android/](http://code.google.com/p/mobyfactory-uiwidgets-android/)

如果您遇到任何问题，请告诉我

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-19T12:27:46.260

在钛应用加速器中，您可以使用 scrollableView 执行此操作

```
var scrollableView = Ti.UI.createScrollableView({
            showPagingControl:true,
            scrollingEnabled: true,     
            top: 360                             
}); 
```

然后，您可以运行所有图像或您拥有的任何内容的循环，并将它们添加到此视图中。

for(loop) {
eval("var view"+i+"=Ti.UI.createView();");

```
profile_image = Ti.UI.createImageView({
                image: result[0]['profile_image'],
                left:15,
                width:82,
                height:104,
                top: 0
            });

eval("view"+i+".add(profile_image);");

eval("scrollableView.addView(view"+i+");"); 
```

}

mywin.add(scrollableView);

# perl - 重定向到子程序，而不是文件或外部命令

> ID：14888798
> 
> 赞同：0
> 
> 时间：2013-02-15T05:29:20.350
> 
> 标签：perl, filehandle

我知道我可以打开一个文件句柄并将其重定向到这样的文件：

```
open(HANDLE, ">", "filename.txt"); 
```

我还可以将其重定向到如下命令：

```
open(HANDLE, "|-", "grep hello"); 
```

我想做的是将它指向一个函数：

```
open(HANDLE, "|func", f); 
```

where`f`是一个函数，它接受一个参数，一个文件句柄，然后可以从该文件句柄中读取它认为合适的内容，并随心所欲地写入。

我知道我可以通过在其中创建一个新文件来模拟这`f(FILEHANDLE)`一点，但这有一些问题，例如，如果`f(FILEHANDLE)`s 行为有时会发生变化，而不是创建一个`g(option1, option2)`接受参数并返回函数的函数`f(FILEHANDLE)`，在单独的文件情况下，我们'd 需要传递命令行参数，以及命令行引用等的所有问题。

任何允许我将文件句柄定向到子例程的方式（或任何库）？我不介意幕后的库是否执行 a `fork()`，我只是想避免将数据传送到 shell 脚本的混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:05:35.967

当您希望代码具有变量的接口时，您希望对`tie`变量进行编码。请参阅[Tie::Handle](http://search.cpan.org/perldoc?Tie%3a%3aHandle)。

# python - Disable console messages in Flask server

> ID：14888799
> 
> 赞同：113
> 
> 时间：2013-02-15T05:29:24.823
> 
> 标签：python, flask

I have a Flask server running in standalone mode (using `app.run()`). But, I don't want any messages in the console, like

```
127.0.0.1 - - [15/Feb/2013 10:52:22] "GET /index.html HTTP/1.1" 200 -
... 
```

How do I disable verbose mode?

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-08-22T11:57:07.057

您可以将 Werkzeug 记录器的级别设置为 ERROR，在这种情况下，只会记录错误：

```
import logging
log = logging.getLogger('werkzeug')
log.setLevel(logging.ERROR) 
```

这是一个在 OSX、Python 2.7.5、Flask 0.10.0 上测试的完整示例：

```
from flask import Flask
app = Flask(__name__)

import logging
log = logging.getLogger('werkzeug')
log.setLevel(logging.ERROR)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-07-18T03:23:42.430

其他答案对我来说都没有正确工作，但我根据[彼得的评论](https://stackoverflow.com/questions/14888799/disable-console-messages-in-flask-server#comment90473839_18379764)找到了一个解决方案。Flask 显然不再`logging`用于记录，并已切换到[click](https://click.palletsprojects.com/en/7.x/)包。通过覆盖`click.echo`，`click.secho`我消除了 Flask 的启动消息`app.run()`。

```
import logging

import click
from flask import Flask

app = Flask(__name__)

log = logging.getLogger('werkzeug')
log.setLevel(logging.ERROR)

def secho(text, file=None, nl=None, err=None, color=None, **styles):
    pass

def echo(text, file=None, nl=None, err=None, color=None, **styles):
    pass

click.echo = echo
click.secho = secho

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

在将日志记录级别设置为`ERROR`和用空函数覆盖 click 方法之间，应防止所有非错误日志输出。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-02-15T12:48:23.237

此解决方案为您提供了一种获取自己的打印和堆栈跟踪的方法，但没有来自烧瓶的信息级别日志`127.0.0.1 - - [15/Feb/2013 10:52:22] "GET /index.html HTTP/1.1" 200`

```
from flask import Flask
import logging

app = Flask(__name__)
log = logging.getLogger('werkzeug')
log.disabled = True 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-05-12T21:19:19.460

压制`Serving Flask app ...`：

```
os.environ['WERKZEUG_RUN_MAIN'] = 'true'
app.run() 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-04-10T10:25:00.717

@Drewes 解决方案大部分时间都有效，但在某些情况下，我仍然倾向于获取 werkzeug 日志。如果您真的不想看到它们中的任何一个，我建议您像那样禁用它。

```
from flask import Flask
import logging

app = Flask(__name__)
log = logging.getLogger('werkzeug')
log.disabled = True
app.logger.disabled = True 
```

对我来说，它在被提出时失败`abort(500)`了。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-10-29T06:46:07.883

如果您使用 WSGI 服务器，请将日志设置为无

```
gevent_server = gevent.pywsgi.WSGIServer(("0.0.0.0", 8080), app,log = None) 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-07-02T16:40:57.993

迟到的答案，但我找到了一种方法来抑制每个和每个控制台消息（包括在`abort(...)`错误期间显示的消息）。

```
import os
import logging

logging.getLogger('werkzeug').disabled = True
os.environ['WERKZEUG_RUN_MAIN'] = 'true' 
```

这基本上是[Slava V](https://stackoverflow.com/users/37141/slava-v)和[Tom Wojcik给出的答案的组合](https://stackoverflow.com/users/5833429/tom-wojcik)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-10-12T02:29:11.797

您可能想要更改日志输出的另一个原因是为了测试，并将服务器日志重定向到日志文件。

我也无法让上面的建议起作用，看起来记录器是作为应用程序启动的一部分设置的。启动应用程序**后**，我可以通过更改日志级别来使其工作：

```
... (in setUpClass)
server = Thread(target=lambda: app.run(host=hostname, port=port, threaded=True))
server.daemon = True
server.start()
wait_for_boot(hostname, port)  # curls a health check endpoint

log_names = ['werkzeug']
app_logs = map(lambda logname: logging.getLogger(logname), log_names)
file_handler = logging.FileHandler('log/app.test.log', 'w')

for app_log in app_logs:
    for hdlr in app_log.handlers[:]:  # remove all old handlers
        app_log.removeHandler(hdlr)

    app_log.addHandler(file_handler) 
```

不幸的是`* Running on localhost:9151`，第一个健康检查仍然打印到标准输出，但是当运行大量测试时，它会清理大量输出。

“那为什么`log_names`？”，你问。就我而言，我需要删除一些额外的日志。我能够通过以下方式找到要添加到 log_names 的记录器：

```
from flask import Flask
app = Flask(__name__)

import logging
print(logging.Logger.manager.loggerDict) 
```

旁注：如果有一个 flaskapp.getLogger() 或其他东西会很好，这样在各个版本中都会更加健壮。有任何想法吗？

更多关键词：flask test log remove stdout output

谢谢：

*   [http://code.activestate.com/lists/python-list/621740/](http://code.activestate.com/lists/python-list/621740/)和
*   [如何使用不同的类和导入动态地使用 Python 日志更改文件句柄](https://stackoverflow.com/questions/13839554/how-to-change-filehandle-with-python-logging-on-the-fly-with-different-classes-a)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-04-16T12:26:20.240

我花了很长时间试图用所有不同的解决方案摆脱这些响应日志，但事实证明不是 Flask / Werkzeug 而是 Gunicorn 访问日志转储在 stderr 上......

解决方案是通过在 Gunicorn 配置文件中添加此块来用 NullHandler 替换默认访问日志处理程序：

```
logconfig_dict = {
    "version": 1,
    "disable_existing_loggers": False,
    "handlers": {
        "console": {"class": "logging.StreamHandler", "level": "INFO"},
        "null": {"class": "logging.NullHandler"},
    },
    "loggers": {
        "gunicorn.error": {"level": "INFO", "propagate": False, "handlers": ["console"]},
        "gunicorn.access": {"level": "INFO", "propagate": False, "handlers": ["null"]},
    },
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-11-18T18:47:56.693

不知何故，上述选项（包括`.disabled = True`）都不适合我。

下面的伎俩虽然：

```
logging.getLogger('werkzeug').setLevel(logging.CRITICAL) 
```

在 Python 3.7.3 下使用截至 2021 年 11 月的最新版本：

```
pip3 list | grep -E "(connexion|Flask|Werkzeug)"
connexion2               2.10.0
Flask                    2.0.2
Werkzeug                 2.0.2 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-02-23T04:00:26.130

如果您真的不希望任何东西在 print() 语句旁边登录到控制台，那么一种**蛮力**`logging.basicConfig(level=logging.FATAL)`的方法是. 这将禁用所有处于致命状态的日志。它不会禁用打印，但是是的，只是一个想法：/

编辑：我意识到不给我使用的文档链接是自私的:) [https://docs.python.org/3/howto/logging.html#logging-basic-tutorial](https://docs.python.org/3/howto/logging.html#logging-basic-tutorial)

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2019-08-26T12:22:21.650

第一点：根据官方 Flask 文档，您不应该使用 app.run() 运行 Flask 应用程序。最好的解决方案是使用 uwsgi，因此您可以使用命令“--disable-logging”禁用默认烧瓶日志

例如：

`uwsgi --socket 0.0.0.0:8001 --disable-logging --protocol=http -w app:app`

# c - 将特定数据从源缓冲区复制到多个目标缓冲区

> ID：14888807
> 
> 赞同：0
> 
> 时间：2013-02-15T05:29:56.853
> 
> 标签：c

我有一个使用 malloc 声明的源缓冲区，并且我使用 fread 将一些大文件中的数据读入缓冲区。现在我想从这个源缓冲区中分离出交替的数据块（比如每个 2 个字节）到两个目标缓冲区中。这个问题可以外推为将每第 n 个块复制到 n 个目标缓冲区。对于两个目标缓冲区的最简单情况，我需要示例代码形式的帮助。这是我的想法，我很确定这不是正确的事情。

```
int totsamples = 256*2*2;
int *sbuff = malloc(totsamples);
int *tbuff1 = malloc(totsamples/2);
int *tbuff2 = malloc(totsamples/2);
elements = fread(sbuff, 2, 256*2, fs);
for(i = 0; i<256; i++)
{
  tbuff1[i] = sbuff[i*2];
  tbuff2[i] = sbuff[(i*2) + 1];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:25:06.800

也许这会给你和想法：

```
for(i = 0; i<256; i++)
{
  tbuff1[2*i+0] = sbuff[i*4+0];
  tbuff1[2*i+1] = sbuff[i*4+1];
  tbuff2[2*i+0] = sbuff[i*4+2];
  tbuff2[2*i+1] = sbuff[i*4+3];
} 
```

注意：上面的代码对于您的`malloc()`参数是错误的，因为不清楚您的`totsamples`意思是什么，所以在使用之前修复一些东西......

另一个注意事项：如果您想要超过 2 个项目的长块，那么使用它来进行`memcpy`复制就开始有意义了。

建议：使用常量而不是幻数，例如`const int SAMPLES=256;`. 我也不确定，但看起来你认为大小`int`是 2？不要，而是使用`sizeof(int)`etc （并且大小`int`很少是 2，顺便说一句）。

嗯...您实际上是在尝试通过使用整数复制字节来一次复制 4 个字节来优化事物吗？[**不！**“过早优化是万恶之源”](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)。您可能会考虑稍后，在您的代码以其他方式工作之后，但首先创建一个工作的非hacky版本，如果您需要询问如何做到这一点，就像这里...

# java - H2 数据库 - 创建索引

> ID：14888811
> 
> 赞同：2
> 
> 时间：2013-02-15T05:30:18.637
> 
> 标签：java, database, h2

我正在使用 H2 数据库 - 以嵌入式模式运行 - 当我的应用程序启动时，我使用来自 mySQL 数据库的数据加载 H2 数据库。我正在使用链接表来指向 mySQL 表。

我的问题是我试图加快 H2 在表上创建索引的时间，特别是对于较大的表（500 万+）。

有谁知道在我将下一个表的数据加载到 H2 时在单独的线程中运行 CREATE INDEX 命令是否安全？例如：线程 1：加载表 1 -> 告诉线程 2 开始创建索引，然后线程 1 加载表 2，等等。

加载表格时我不能使用 MVCC 模式，因为稍后我在进行选择时需要使用 MULTI_THREADED 模式。当我尝试使用 MULTI_THREADED 模式时，即使我将数据加载到离散表中，我也会遇到锁定错误。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:49:02.103

什么可能有效（但我不确定它是否更快）是首先创建表和索引，然后并行加载表。这应该避免系统表中的锁定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:38:47.113

我还想添加方法 rst.findColumn("columnName") 以在获取表的结果集之后查找索引。rst 是一个 ResultSet 对象。这是我用过的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-09T23:18:54.477

另一种*显着*提高 H2 加载，尤其是索引性能的方法是将初始内存设置为接近预期的内存要求。举个例子，这一改变允许一个大约需要 1.5GB 的应用程序在 47 秒内启动，而不是在 15 到 20 分钟后失败。在此之前，我们看到超过 GC Overhead limit 和 JVMTI 错误。

将以下内容添加到您的 VM 参数中（例如）：

```
 -Xms2g
 -Xmx4g 
```

# c# - mongodb中的数据引用

> ID：14888817
> 
> 赞同：2
> 
> 时间：2013-02-15T05:30:55.117
> 
> 标签：c#, mongodb

我有两个模型类用户和产品，并且我有共同的属性 productId。我想从 Mongodb 获取用户数据。我想获取与他下面应该显示的产品相关的用户。

用户模型

公共类用户：产品{

```
 [BsonId] 
    public string GuId { get; set; }

    public string Name { get; set; }

    public string EMailAddress { get; set; }

    public  string ProductId { get; set; }

} 
```

产品型号

公共类产品{

```
 [BsonId]
    public int Id { get; set; }
    public string ProductId { get; set; }

    public string  ProductName { get; set; }
} 
```

我的应用层有以下代码： -

```
 public IEnumerable<User> GetAllUsers()
    {
        // var users = new User();
        IList<User> itemCollection = new List<User>();
        var itemIdList = new List<string>();
        itemCollection = _users.Include<User>.Load(itemIdList.ToArray())

                                    .OrderByDescending(x => x.LastUpdatedDate).ToList();

       // var itemCollection = _users.Load<User>(itemIdList.ToArray());

        this.LoadItemStatusDefinitions(itemCollection);

        var users = _users.
                         FindAll().
                         SetSortOrder(SortBy.Descending("createdate"));

        return users;
    }

    private void LoadItemStatusDefinitions(IEnumerable<User> items)
    {
        // iterates through each items in the collection.
        foreach (var item in items)
        {
            // check whether status definition is already assigned to the item 
            if (!string.IsNullOrEmpty(item.ProductId))
            {
                // loading the status definition associated with each item
                var statusDefinition = _users.Load<Product>(item.ProductId);
                if (statusDefinition != null)
                {
                    // assign the status definition to the item.
                    item.ProductId = statusDefinition;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T16:45:20.407

您的模型看起来像是在设计时考虑到了关系数据库。[MongoDB 站点](http://www.mongodb.org/)有很好的模式[设计](http://docs.mongodb.org/manual/core/data-modeling/)资源。尝试为 MongoDB 设计一个好的文档模式绝对是一种不同的心态。不要害怕对数据进行非规范化。

一种可能的模式可能是：

```
{
    GuID: "",
    Name: "",
    EMailAddress: "",
    Product: {
        Id: 0,
        ProductId: "",
        Name: ""
    }
} 
```

目前尚不清楚您是否需要产品子文档中的两个 id 字段。

# android - android中复选框的oncheckedchangelistener

> ID：14888820
> 
> 赞同：0
> 
> 时间：2013-02-15T05:31:13.070
> 
> 标签：android, checkbox, oncheckedchanged

在我的应用程序中，我动态添加了复选框。在应用程序中，当我单击其中一个复选框 n 然后单击确定按钮时，我正在执行一些操作。下面是代码。它在单击复选框时不起作用。请告诉我该怎么办？

```
 public class ImportFile extends Activity{
  TableLayout tl;
 Intent i;
 ImageView im;
 int idcount;
 TextView nameoffile,sizeoffile,line;
 CheckBox[] ch=new CheckBox[100];

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylist); 
        tl=(TableLayout) findViewById(R.id.table);

        File file = new File(Environment.getExternalStorageDirectory()
            + File.separator
            + "gallery" //folder name
        );
        if (!file.exists()) {
            file.mkdirs();
        }

               /* i=new Intent();
                i.putExtra("file","string");
                setResult(RESULT_OK, i);
                finish(); */

        TableRow tr=new TableRow(this);

        int id=1;

        File f = new File("/sdcard/download");//or Environment.getExternalStorageDirectory().getPath()
        File[] files = f.listFiles();

        for(int i = 0; i < files.length; i++) {
            File file1 = files[i];
            //take the file name only
            long size = file1.length()/1024;

            String myfile = file1.getPath().substring(file1.getPath().lastIndexOf("/")+1,file1.getPath().length()).toLowerCase(); 
            if(myfile.endsWith(".jpeg")||myfile.endsWith(".png")|| myfile.endsWith(".gif") || myfile.endsWith(".jpg"))
            {

            ch[id]=new CheckBox(this);
            ch[id].setId(id);
            ch[id].setText("  ");

            System.out.println("id is........"+id);

            Bitmap b=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile((file1.getPath())), 40,40);

            im=new ImageView(this);
            im.setImageBitmap(b);       

            nameoffile=new TextView(this);
            nameoffile.setText("  "+myfile);
            nameoffile.setWidth(200);

            sizeoffile=new TextView(this);
            sizeoffile.setText(size+"KB");
            sizeoffile.setWidth(100);

            tr=new TableRow(this);
            tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            if((id%2)==0)
            {
                tr.setBackgroundResource(R.color.Thistle);
            }
            else{

                tr.setBackgroundResource(R.color.Bisque);
            }
            tr.addView(ch[id++]); 
            idcount=id;
            tr.addView(im);
            tr.addView(nameoffile);
            tr.addView(sizeoffile);

            tl.addView(tr,new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

            }

        }
    }

    int j;

    public void ok(View v)
    {

        for (j=1;j<idcount;j++)
        {

             ch[j].setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        System.out.println("Checked ID :: " + ch[j].getId());
                    }

                });
        } 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:41:01.110

尝试这个

```
OnClickListener checkBoxListener;
checkBoxListener =new OnClickListener()
{
@Override
public void onClick(View arg0) {
// TODO Auto-generated method stub
if(checkbox1.isChecked())
{

Toast.makeText(getBaseContext(), "something", Toast.LENGTH_SHORT).show();
}
}

};
checkbox1.setOnClickListener(checkBoxListener); 
```

# javascript - 使用 angularJS 在 ng-bind 中解析 html

> ID：14888822
> 
> 赞同：41
> 
> 时间：2013-02-15T05:31:15.000
> 
> 标签：javascript, angularjs, html-parsing

我遇到了 angularJs 的问题。我的应用程序从服务器请求一些数据，从服务器返回的数据中的一个值是一个 html 字符串。我像这样在我的角度模板中绑定它

```
<div>{{{item.location_icons}}</div> 
```

但正如你所料，我看到的不是图标图像，而是标记基本上 div 中的东西看起来像

```
 "<i class='my-icon-class'/>" 
```

这不是我想要的。

任何人都知道我可以做些什么来解析嵌入中的 html

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-15T05:42:33.100

你想使用`ng-bind-html`和`ng-bind-html-unsafe`用于那种目的。

示例显示[在这里](https://docs.angularjs.org/api/ngSanitize/service/$sanitize#examples)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-02-01T14:23:27.387

由于 ng-bind-html-unsafe 已弃用，您可以改用此代码。

您需要在控制器中创建函数：

```
$scope.toTrustedHTML = function( html ){
    return $sce.trustAsHtml( html );
} 
```

并在您的视图中使用类似的东西：

```
<span ng-bind-html='toTrustedHTML( myHTMLstring )'></span> 
```

不要忘记注入 $sce：

```
AppObj.controller('MyController', function($scope, $sce) {
    //your code here 
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-14T13:41:42.930

更好的方法是使用`$compile`而不是`ng-bind-html-unsafe`.

请参阅：[http ://docs.angularjs.org/api/ng.$compile](http://docs.angularjs.org/api/ng.%24compile)

最后，目前，angularJS 的最后一个版本（候选版本 1.2.0）没有任何`ng-bind-html-unsafe`指令。所以我真的鼓励你在将来更新你的应用程序之前考虑这个选项。（`ng-bind-html-unsafe`可能/不会再工作了......）

[http://code.angularjs.org/1.2.0rc1/docs/api/ng.directive:ngBindHtml](http://code.angularjs.org/1.2.0rc1/docs/api/ng.directive%3angBindHtml)

# php - PHP重复查询结果？

> ID：14888823
> 
> 赞同：0
> 
> 时间：2013-02-15T05:31:28.477
> 
> 标签：php, sql

出于某种原因，当我通过 PHP 运行此查询时，它返回 8 行，而实际上我的数据库中只有 2 行，而当我通过 phpmyadmin 运行它时，它显然返回 2。

```
 $sql = "SELECT url FROM bookmarks,users WHERE bookmarks.user_id = {$session->user_id}";
 $resultado = $db->query($sql);

 echo mysql_num_rows($resultado); 
```

我要打破我的头了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T05:32:53.240

您的查询产生`cartesian product`是因为您没有提供两个表之间的关系：`bookmarks`并且`users`，

```
SELECT url 
FROM   bookmarks 
       INNER JOIN users 
          ON bookmarks.COLNAME = users.COLNAME
WHERE  bookmarks.user_id = '$session->user_id' 
```

where`COLNAME`是定义表如何相互关联或表应如何链接的列。

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T05:37:55.013

正如 JW 指出的那样，您正在生产笛卡尔积——您没有加入针对用户的书签。这就是为什么你要复制行。

话虽如此，您根本不需要在上述查询中加入用户：

```
"SELECT url FROM bookmarks WHERE bookmarks.user_id = {$session->user_id}" 
```

祝你好运。

# runtime - 试图找到递归的渐近运行时遇到问题

> ID：14888827
> 
> 赞同：1
> 
> 时间：2013-02-15T05:31:54.740
> 
> 标签：runtime, clr, big-o, notation, recurrence

我试图弄清楚算法的运行时间。这是一种通过将问题分成 2/3 组来工作的排序（它是 CLR 排序）。我在想出它时遇到了一些麻烦，这就是我所拥有的：

T(n)=3T([2n]/3)+1 （1是因为除了递归调用之外，还有一个交换可能会也可能不会。假设它完成了，它仍然只是一个恒定的成本.)

```
T(n)=3T([2([2n]/3+1)]/3+1)+1
T(n)=3T([2([2([2n]/3+1)]/3+1)]/3+1)+1
T(n)=3T([2([2([2([2n]/3+1)]/3+1)]/3+1)]/3+1)+1 
```

等等......直到我们可以假设在某个时刻我们最终达到了 T(n) 的基本情况并在该运行时获得了一个恒定值 1。这给了我们：

```
3([2([2([2([2(...........)]/3+1)]/3+1)]/3+1)]/3+1)+1 with logn terms (that's the "......." in the middle). This gives:

3*(2n/3+1)^(logn)+1*logn

3*(2n/3+1)^(logn)+logn 
```

然后我认为既然，如果对数的基数是 2n/3+1，我们可以将它简化为简单的 3*logn+logn，我们可以这样做。（我一直听说在做渐近符号时，我们选择的日志的基数无关紧要......）

这变成了 4logn。系数下降到简单的logn。

这个对吗？我不确定我是否正确扩展了它，或者我的日志操作是否合法......此外，这个最终结果是什么——big-O、theta 等。我不确定我在看什么。 ..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:46:05.953

您可以查看[此](http://en.wikipedia.org/wiki/Master_theorem)页面以获得分治算法的通用递归关系解决方案。

在这种情况下，b = 3/2，a = 3，f(n) = O(1)。log base 3/2 of 3 大约是 2.709，所以我们使用 case 1，这意味着运行时间是 O(n^2.709)。

希望有帮助！

# android - 减小 AlertDialog.Builder 组件的字体大小

> ID：14888832
> 
> 赞同：14
> 
> 时间：2013-02-15T05:32:15.470
> 
> 标签：android, android-alertdialog, android-custom-view, android-fonts

`AlertDialogue`我使用以下代码创建了一个：

```
 int selectedModeId=0;
 public void sortTypeModeSelection(){

    AlertDialog.Builder alertBuilder=new AlertDialog.Builder(WatchListDetailActivity.this);

    alertBuilder.setSingleChoiceItems(R.array.watchlist_sorting_modes,selectedModeId, new DialogInterface.OnClickListener(){
        public void onClick(DialogInterface dialog, int which) {
            switch (which){
                case 0:
                    selectedModeId=0;
                    break;
                case 1:
                    selectedModeId=1;
                    break;
                case 2:
                    selectedModeId=2;
                    break;
                case 3:
                    selectedModeId=3;
                    break;
                case 4:
                    selectedModeId=4;
                    break;
                case 5:
                    selectedModeId=5;
                    break;
                case 6:
                    selectedModeId=6;
                    break;
                case 7:
                    selectedModeId=7;
                    break;
            }
            dialog.cancel();
        }
    });
    alertBuilder.show();
} 
```

![在此处输入图像描述](../Images/2291ef01fd2fca459dbc01f1c6e2bde7.png)

我发出了警报，但我想减小对话框列表项的字体大小。我怎样才能做到这一点？

**注意**：不建议膨胀自定义布局来完成此操作，我想知道是否有另一种方法。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-23T02:35:47.927

我能够通过样式来实现这一点。我将此样式添加到`styles.xml`值目录中的文件中：

```
<style name="AlertDialogTheme" parent="android:Theme.Dialog">
    <item name="android:textSize">14sp</item>
</style> 
```

然后在创建时`AlertDialog`，我将活动上下文包装在 a 中`ContextThemeWrapper`并将其传递给`Builder`构造函数：

```
ContextThemeWrapper cw = new ContextThemeWrapper( this, R.style.AlertDialogTheme );
AlertDialog.Builder b = new AlertDialog.Builder( cw ); 
```

这为对话框中的列表项产生了较小的文本大小。

![在此处输入图像描述](../Images/7efe1669746e6092fc4cedea657ce310.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T05:40:27.940

您必须为此使用自定义布局。

![在此处输入图像描述](../Images/80e8294d9892970508053e1541fe7906.png)

检查下面的代码它肯定对你有帮助

```
AlertDialog.Builder builder = new AlertDialog.Builder(forgatps.this);
            builder.setTitle("Select Your Account");

            builder.setAdapter(new ArrayAdapter<String>(forgatps.this,
                    R.layout.row_email, R.id.textView1, emails),
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            MainEmail = emails.get(which);
                            editEmail.setText("" + MainEmail);

                        }
                    });

            builder.show(); 
```

行文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:background="#ffffff"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000"
        android:textSize="26dp" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T05:47:06.550

尝试如下：

这只是我向你展示它可能的方式的一种方式。

> ```
>  final CharSequence[] itemsMark =
>    {getResources().getString(R.string.Mark_As_Beautiful),
>               getResources().getString(R.string.Mark_As_Fun),
>               getResources().getString(R.string.Mark_As_Not_A_Portrait),
>               getResources().getString(R.string.Mark_As_Offensive),
>               getResources().getString(R.string.Mark_As_Spam),
>               getResources().getString(R.string.Mark_As_Cancel)
>    };
>    ArrayAdapter<CharSequence> itemsAdapter = new
>    ArrayAdapter<CharSequence> (this,
>             R.layout.menu_items, itemsMark);
>    builder = new AlertDialog.Builder(this);
>    builder.setTitle("My Title");
>    builder.setIcon(R.drawable.icon);
>    builder.setAdapter(itemsAdapter, new DialogInterface.OnClickListener()
>    {
>        public void onClick(DialogInterface dialog, int item) {
>                   switch(item) {
>                           case 0:
>                       //Mark as Beautiful
>                           break;
>                        case 1:
>                       //Mark as Beautiful
>                           break;
>                     case 2: 
>                         //Mark as Not a Portrait
>                           break;
>                     case 3:
>                       //Mark as Offensive
>                           break;
>                    case 4:
>                       //Mark as Spam
>                           break;
>                    case 5:
>                       //cancel
>                    break;
>            }
>        }
>    }); 
> ```

## 在 layout/menu_items.xml 中：

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@android:id/text1"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:padding="10dip"
       android:layout_margin="5dip"
       android:gravity="center_vertical"
       android:textSize="22dip"
       android:textColor="#ff000000"
       android:typeface="normal"
       android:lineSpacingExtra="0dip"/> 
```

我希望它会帮助你。

谢谢。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T13:22:29.180

我不明白为什么您需要在不使用当前答案中显示的自定义布局文件的情况下更改文本大小（除非您可能正在实施某种可访问性选项以保持当前平台的外观和感觉？）。无论如何，您仍然可以通过直接修改对话框列表来修改文本大小。像这样的东西：

```
private static int mTextSize = 5;
private static int mFirstVisible = -1;
private static int mLastVisible = -1;

v.post(new Runnable() {

                @Override
                public void run() {
                    changeCurrentVisibleSize(ad.getListView());
                    // ad is the AlertDialog resulted from alertBuilder.create
                    ad.getListView().setOnScrollListener(
                            new OnScrollListener() {

                                @Override
                                public void onScrollStateChanged(
                                        AbsListView view, int scrollState) {
                                    // TODO Auto-generated method stub

                                }

                                @Override
                                public void onScroll(AbsListView view,
                                        int firstVisibleItem,
                                        int visibleItemCount,
                                        int totalItemCount) {
                                    if (visibleItemCount != 0) {
                                        if (mFirstVisible != firstVisibleItem
                                                || mLastVisible != (firstVisibleItem
                                                        + visibleItemCount - 1)) {
                                            updateRow((ListView) view);
                                        }
                                    }
                                }
                            });
                }

            }); 
```

其中`changeCurrentVisibleSize()`and`updateRow()`方法是：

```
static void updateRow(ListView listView) {
    final int count = listView.getChildCount();
    final View firstRow = listView.getChildAt(0);
    final View secondRow = listView.getChildAt(count - 1);
    if (firstRow instanceof TextView) {
        ((TextView) firstRow).setTextSize(mTextSize);
        ((TextView) secondRow).setTextSize(mTextSize);
    }
}

static void changeCurrentVisibleSize(ListView listView) {
    final int count = listView.getChildCount();
    mFirstVisible = listView.getFirstVisiblePosition();
    mLastVisible = listView.getLastVisiblePosition();
    for (int i = 0; i < count; i++) {
        final View rowView = listView.getChildAt(i);
        if (rowView instanceof TextView) {
            ((TextView) rowView).setTextSize(mTextSize);
        }
    }
} 
```

增加文本应该可以正常工作，再次减少文本应该可以正常工作（但在这种情况下，根据使用的布局文件，该行将继续具有一定的高度）。

# javascript - 在 rollup12 之后，多选查找在 crm 2011 中不起作用

> ID：14888836
> 
> 赞同：2
> 
> 时间：2013-02-15T05:32:42.863
> 
> 标签：javascript, dynamics-crm-2011

这在汇总 12 之后不起作用。

```
var value = crmForm.all["new_state"].DataValue; 
```

如果我选择单个选项，则此语法可以正常工作，但是当我在查找中选择多个选项时，它会返回“未定义”。

```
Xrm.Page.getAttribute("new_state").getValue(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:34:24.007

调试你的网站，试着看看你有什么：

```
Xrm.Page.getAttribute("new_state") 
```

在我看来，您将拥有一些数组，因此要获取某个数组成员的值，您应该编写：

```
Xrm.Page.getAttribute("new_state")[0].getValue() 
```

# android - 从 webview 历史记录中检测 post call

> ID：14888838
> 
> 赞同：0
> 
> 时间：2013-02-15T05:32:51.247
> 
> 标签：android, webview

我想检查 webview url 中的调用是 post 还是 get 调用。有没有办法从 Webview 历史记录中检查以前的 URL 是“post”调用还是“get”调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:48:35.480

假设您的 GET 或 POST 请求至少向服务器发送了一个变量，那么您可以通过从历史记录中检索 URL 并查看 URL 中是否有任何参数来检查上一个请求是否是 GET。对于您期望的 GET `mypage.html?param=value`。

查看此内容以获取浏览历史记录： [https ://stackoverflow.com/a/7763254/483708](https://stackoverflow.com/a/7763254/483708)

请参阅此解析 URL： [https ://stackoverflow.com/a/4342549/483708](https://stackoverflow.com/a/4342549/483708)

# python - 如何在 Django 的一个 HTML 页面中打开两个日志文件？

> ID：14888843
> 
> 赞同：2
> 
> 时间：2013-02-15T05:33:03.427
> 
> 标签：python, linux, django, django-class-based-views

我的 django 根目录中有两个日志文件，`apache.error.log`名为`django.log`. 在我`app/static`的文件夹中，我有 HTML 文件`mylog.html`。现在我想在那个 HTML 页面中查看这些日志文件。

这可能吗？我想查看这两个文件的最后 20 行。基本上类似于`tail -f`，但在浏览器中，这样我就可以始终打开一个选项卡进行调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:49:15.680

如果您使用基于类的视图：

```
class LogTemplateView(TemplateView):
    template_name = "mylog.html"
    apache_log_file = "apache.error.log"
    django_log_file = "django.log"

    def get_context_data(self, **kwargs):
        """
        This has been overriden to give the template access to the log files.
        i.e. {{ apache_log_file }} and {{ django_log_file }}
        """
        context = super(LogTemplateView, self).get_context_data(**kwargs)
        context["apache_log_file"] = self.tail(open(self.apache_log_file, "r"), 20)
        context["django_log_file"] = self.tail(open(self.django_log_file, "r"), 20)
        return context

    # Credit: Armin Ronacher - http://stackoverflow.com/a/692616/1428653
    def tail(f, n, offset=None):
        """Reads a n lines from f with an offset of offset lines.  The return
        value is a tuple in the form ``(lines, has_more)`` where `has_more` is
        an indicator that is `True` if there are more lines in the file.
        """
        avg_line_length = 74
        to_read = n + (offset or 0)

        while 1:
            try:
                f.seek(-(avg_line_length * to_read), 2)
            except IOError:
                # woops.  apparently file is smaller than what we want
                # to step back, go to the beginning instead
                f.seek(0)
            pos = f.tell()
            lines = f.read().splitlines()
            if len(lines) >= to_read or pos == 0:
                return lines[-to_read:offset and -offset or None], \
                       len(lines) > to_read or pos > 0
            avg_line_length *= 1.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:38:00.047

在 Django 中创建一个新视图

在控制器中，`import os`

采用`lastLines = os.popen("tail /path/to/logFile").read()`

`listLines`在视图中显示这些

# c++ - 使用 Visual Studio 2008 构建 C++ 项目

> ID：14888844
> 
> 赞同：2
> 
> 时间：2013-02-15T05:33:10.637
> 
> 标签：c++, visual-studio, visual-c++

我正在处理一个需要在 Visual Studio 2010 中制作的项目的 exe 文件。但是有一个项目仅在 Visual Studio 2008 中构建时才有效（因为外部依赖项）。

现在我们是否有一些机制，以便我可以编译 Visual Studio 2010 中的其余项目和 2008 年的这个特殊项目

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:36:08.037

将 2008 项目创建为 dll 并使用它来处理您的 2010 exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:45:04.643

一般来说，最好不要混合使用不同编译器编译的代码。2008 和 2010 使用不同的运行时，所以你会遇到问题。用 2008 创建 COM 模块并使用它的最简单方法。

# c# - 可以在 ASP.NET 网站中调用非托管代码吗？

> ID：14888845
> 
> 赞同：0
> 
> 时间：2013-02-15T05:33:17.457
> 
> 标签：c#, asp.net, vb.net

在我的身份证读取应用程序中，我正在导入一些非托管代码 (dll) 进行身份验证。我无法导入此 DLL。我没有收到任何错误，但是 DLL 没有被导入并且无法访问。当它在 Web 应用程序中完成时，它在 Windows 窗体中工作。我没有得到输出。关于如何使用它，我可以有一些想法或一些例子吗？这是我的代码：

```
 /// <param name="readerNumber">The reader number.</param>
        [DllImport("EIDReader.dll", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.StdCall)]
        internal static extern void InitSelectedReaderEx(ManagerData data, int readerNumber);

[DllImport("EIDReader.dll", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.StdCall)]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool ReadSISCard([In, Out] SISRecord identity); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:49:33.240

C#/Winforms 加载 DLL 的方式与 ASP.NET 的工作方式之间存在差异。

C# winforms 在 .NET VM 中执行，ASP.NET（也在 .NET VM 上运行）在 IIS 中被沙盒化。

您必须首先将 dll**加载**到内存中，然后调用您想要的方法。

在此处查看教程[如何互操作 ASP.NET](http://blogs.msdn.com/b/eldar/archive/2006/09/22/how-to-call-c-dll-from-asp-net-c-code.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:44:30.450

您要引用的库是 COM 库吗？如果是这样，那么您需要为它创建一个 COM 包装 DLL。查看工具**[tlbimp](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.80%29.aspx)**，它将创建一个包装 DLL，您可以在 ASP.NET 应用程序中引用它。

# jquery - 关闭fancybox后如何获取fancybox文本框值

> ID：14888849
> 
> 赞同：0
> 
> 时间：2013-02-15T05:33:30.490
> 
> 标签：jquery, fancybox

关闭fancybox后如何获取fancybox文本框值...我试过这样

```
'onStart' : function(){
        x = $('#fancybox-frame').contents().find('#comment_count').val();
        alert(x);
 },
 'onClosed': function(){
        x = $('#fancybox-frame').contents().find('#comment_count').val();
        alert(x);
 } 
```

并且我也在脚本顶部声明了 var x ，但它两次都显示 undefined ....任何人都可以建议我正确的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:43:24.893

`onClosed`将在所有 fancybox 内容被删除时执行，因此它给出 undefined.use`onCleanup`它能够在关闭 fancybox 后给出 x 的值。

```
"onCleanup": function(){
  x = $('#fancybox-frame').contents().find('#comment_count').val();
  alert(x);
},
"onClosed": function(){
  x = $('#fancybox-frame').contents().find('#comment_count').val(); //opt
  alert(x); //opt
} 
```

# oracle10g - 无法从嵌入式 SQL 执行 SELECT MAX(ORA_ROWSCN)

> ID：14888854
> 
> 赞同：2
> 
> 时间：2013-02-15T05:34:30.553
> 
> 标签：oracle10g, proc, hp-ux, embedded-sql, acc

环境：HP-UX 11.x C++ (ProC & aCC 编译器) Oracle 10g)

我无法从我的 C++ 嵌入式 SQL 代码中执行以下命令

```
EXEC SQL SELECT MAX(ORA_ROWSCN) INTO :scn_timestamp
FROM table_name ; 
```

我所做的更改是针对现有文件的。以下是显示编译器错误的自动构建脚本的摘录：

```
/data/tsd_oracle/hpux/10.2.0.2/bin/proc +z ireclen=200 ORECLEN=200 LRECLEN=208 code=cpp cpp_suffix=C lines=yes sqlcheck=semantics maxopencursors=10 parse=PARTIAL unsafe_null=yes mode=oracle dbms=V8 sys_include='(/opt/aCC,/opt/aCC/include/iostream,/opt/aCC/include/rw,/usr/include)' include=/data/tsd_oracle/hpux/10.2.0.2/precomp/public include=/usr/include include=/opt/aCC/include include=/opt/aCC/include/SC iname=FILENAME.PC;

Pro*C/C++: Release 10.2.0.2.0 - Production on Fri Feb 15 12:48:35 2013

Copyright (c) 1982, 2005, Oracle. All rights reserved.

System default option values taken from: /data/tsd_oracle/hpux/10.2.0.2/precomp/admin/pcscfg.cfg

Error at line 81, column 5 in file FILENAME.PC
EXEC SQL SELECT MAX(ora_rowscn) INTO :scn_timestamp
....1
PLS-S-00201, identifier 'ORA_ROWSCN' must be declared
Error at line 81, column 5 in file FILENAME.PC
EXEC SQL SELECT MAX(ora_rowscn) INTO :scn_timestamp
....1
PLS-S-00000, SQL Statement ignored
Semantic error at line 81, column 5, file FILENAME.PC:
EXEC SQL SELECT MAX(ora_rowscn) INTO :scn_timestamp
....1
PCC-S-02346, PL/SQL found semantic errors
*** Error code 1
clearmake: Error: Build script failed for "FILENAME.C" 
```

默认选项值文件/data/tsd_oracle/hpux/10.2.0.2/precomp/admin/pcscfg.cfg的内容如下

```
sys_include=(/data/tsd_oracle/hpux/10.2.0.2/precomp/public,/usr/include)
ltype=short
define=ORASTDARG 
```

我也尝试过该命令的变体，例如

```
EXEC SQL SELECT MAX(A.ORA_ROWSCN) INTO :scn_timestamp
FROM table_name A; 
```

为此我收到错误说 ORA_ROWSCN 列不存在。

我已验证此 sql 查询在 SQLPlus 控制台中有效。嵌入时为什么不起作用的任何特殊原因？

--------------------------解决方法---------- ---------

根据多米尼克的建议，我成功地使用以下方法检索了我想要的东西

```
EXEC SQL PREPARE timestamp_stmt FROM 'SELECT MAX(A.ora_rowscn) FROM table_name A';
EXEC SQL DECLARE timestamp_cur CURSOR FOR timestamp_stmt;
EXEC SQL OPEN timestamp_cur;    
EXEC SQL FETCH timestamp_cur INTO :scn_timestamp;   
EXEC SQL CLOSE timestamp_cur; 
```

我对这种解决方法感到满意，但我仍然想知道为什么它不能以通常的方式工作。我之前也尝试过使用游标，并且出现相同的错误，指出“必须声明标识符'ORA_ROWSCN'”。

无论如何，谢谢多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:44:47.993

您是否尝试将其包装在动态 sql 块中以将其隐藏在 pro*c 编译器中以查看是否有效？

即使用类似`EXEC SQL PREPARE sql_stmt FROM :select_stmt;`where select_stmt 是您的`char`数组，其中包含`select max(a.ora_rowscn) from table_name a`

# java - JSP中访问源页面路径

> ID：14888855
> 
> 赞同：1
> 
> 时间：2013-02-15T05:34:31.773
> 
> 标签：java, jsp, jakarta-ee

我允许用户登录我的 JSP 站点。但是当他登录时，他/她会被重定向到主页。

所以我希望他保持在同一页面上，而不是被重定向到某个特定位置。

所以我想访问发起登录/注销请求的源页面的链接，以便我将注销用户然后重定向到同一页面。我还需要访问查询字符串。

我尝试了 request.getRequestURL/URL，但它们返回用于访问此 servlet 的链接（即实际上是 LoginHendlerServlet 链接本身）而不是单击登录按钮的页面的链接。

是否有任何现成的 API 方法可以访问这个较旧的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:17:12.997

这是我的做法：

使用过滤器拦截所有需要提供身份验证的页面。在此过滤器中，如果请求是 GET 请求，不是 AJAX 请求，并且用户未经过身份验证，则将请求的 URL 及其查询字符串存储在请求属性中，然后转发到登录页面。

登录页面包含一个带有请求 URL 的隐藏字段，该字段与登录表单一起提交。

在登录 servlet/action 中，如果填充了请求的 URL 请求参数，一旦登录成功，重定向到该 URL。否则，重定向到登录页面。

您也可以使用会话来存储请求 URL，但我更喜欢将会话保持为空。

# php - 如何多次加入cakephp？

> ID：14888856
> 
> 赞同：0
> 
> 时间：2013-02-15T05:34:47.577
> 
> 标签：php, mysql, cakephp, cakephp-1.3, cakephp-2.0

我想在我的查询中加入连接，但我无法获得任何成功，如果表中存在，我想`productname`从`product`表中找出。`product_id``productplan`

```
 Producttable     
 id name
  1   a
  2   b 

 productplantable
 id product_id
  1   1
  2   2 
```

这是我的查询：

```
$p_products = $this->ProductPlan->find('all',   
                                       array('fields'=> 
                                         array('ProductPlan.product_id',
                                               'Product.name')
                                       )
                                    );
$this->set('p_products',$p_products); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:24:42.623

如果您的关系在您的 ProductPlan 模型中正确设置，则以下内容应该有效。如果没有，请提供您的 ProductPlan 模型的源代码。

```
$this->ProductPlan->Behaviors->attach('Containable');

$p_products = $this->ProductPlan->find('all', array(
  'fields'  => array('product_id'),
  'contain' => array('Product' => array('fields' => array('name')))  
));
$this->set('p_products',$p_products); 
```

# google-chrome-extension - Chrome 扩展保留 html 数据

> ID：14888858
> 
> 赞同：2
> 
> 时间：2013-02-15T05:34:55.413
> 
> 标签：google-chrome-extension

我有一个扩展，它有一个包含大型 jstree 的 popup.html。我想做的是：用户在浏览器窗口打开后第一次单击弹出窗口时，会获取用于填充 jstree 的数据。弹出窗口的后续单击将保留生成的 html，因此不再需要生成树。

换句话说，我只想生成一次 jstree 并让弹出窗口将其 html 的内容保存在内存中。这是可行的吗？

这是 popup.js 代码：

```
$(document).ready(function() {
    var backgroundPage = chrome.extension.getBackgroundPage();

    function logIt(text) {
        backgroundPage.console.log(text);
    }

    function buildUI(feedData) {
        $('#jstree').jstree({
            'core': {
                'animation': 0
            },

            'json_data': feedData,

            'themes': {
                'theme': 'classic',
                'dots': false,
                'icons': true
            },

            'types': {
                'valid_children': [ 'folder' ],
                'types': {
                    'folder': {
                        'valid_children': [ 'file' ],
                        'max_depth': 1
                    },
                    'file' : {
                        'valid_children': [ 'none' ],
                        'icon': { 'image': 'images/file.png' }
                    }
                }
            },

            'plugins': [
                'json_data',
                'themes',
                'sort',
                'types',
                'search'
            ]
        })
        .on('click', '.jstree-leaf', function() {
            logIt($(this).text());
        });
    }

    chrome.extension.sendRequest({'action': 'fetchFeed'}, function(response) {
        var output = JSON.parse(response);
        buildUI(output.data);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:53:05.697

`window.localstrorage`里面有`popup.html`。因此您可以将数据存储在 localStorage 中。但是每次进行保存/检索操作时，您都必须进行序列化/反序列化。除非您的 jstree 非常庞大，否则这不应该是一个问题（提示：您可以`eval`自由地使用反序列化，除非您期望来自第三方来源的数据）。

您也可以使用`indexedDB`，这将使您免于序列化/反序列化开销。

# 更新

我记得有一个用于 chrome 扩展的存储 api `chrome.storage`。对象在和`chrome`都可用。它的优点是`background.html``popup.html`

*   简单的 API。
*   它不需要您反序列化数据以进行存储。
*   它的异步。所以 UI 在检索时不会阻塞。但是在这种情况下，增益并不相关，因为`popup.html`如果您尝试导航离开，它在其上下文中无论如何都会关闭，因此它与阻止 UI 相同。
*   您可以使用 google sync 同步数据，以便用户可以从用户使用您的扩展程序的多个 chrome/chromium 实例访问数据。这是最大的一个。

`storage`PS如果您要使用`chrome.storage`api ，您将需要许可。

# 更新

请参阅我的拉取请求[#1](https://github.com/gdanko/delicious-chrome/pull/1)。我已经实现了api；

# php - PHP敏感性分析脚本

> ID：14888859
> 
> 赞同：1
> 
> 时间：2013-02-15T05:35:10.063
> 
> 标签：php, jquery, ajax

我有一个基于 PHP 的应用程序，它根据几种形式的用户输入计算最终结果。

为简单起见，假设用户启动应用程序，在下一页他输入值 5，该值由 _post 发送到下一页，在下一页用户输入 2，在最后一页计算结果为 5* 2= 10（所有值都保存到_SESSION）。

我的问题是是否有一个很好的脚本来说明如何在最终页面上操作这些输入......让我们以滑块的方式说，用户将能够将先前给定的值 5 更改为 10，并且脚本将重新计算结果以产生 10*2=20。

我的最终目标是为用户提供一种敏感性分析工具，以便他们在看到结果后可以更改他们已经给定的输入，并看看这种更改将如何改变给定的结果。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:39:02.647

我假设你想要一种交互式的东西，当用户移动滑块时，结果应该会改变。您应该使用 JavaScript 进行计算，对于 Sliders 可能使用 jQuery UI。

# php - 将特定部分 div 转换为 pdf

> ID：14888861
> 
> 赞同：1
> 
> 时间：2013-02-15T05:35:48.227
> 
> 标签：php, html, css, pdf

我有一个订单表格，用户在其中下订单，下订单后，他们是用 jquery 生成的发票，要求他们打印。我希望能够仅将页面上包含发票的那个 div 提交给引擎或现在将其转换为 pdf 的东西，它是一个表格结构的订单打印出来。以及如何在打印时仅使该部分可用，以便打印输出仅包含订单发票并隐藏页面的所有其他部分。伪代码：

```
 Function make_pdf($html){
    // run thought the submitred html
    // create pdf version
    // make available for download.
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:40:55.690

使用打印按钮调用函数。

1.  `onclick`在打印按钮的事件中添加一个 javascript 函数。获取收据 div 的内容（使用 jquery:`$('#receipt').html()`或 javascript `document.getEmementById('invoice').innerHTML')`。
2.  将此内容添加到表单中的隐藏变量中。将表单提交到专用的 php 文件。( `<form target='_blank'`) 您在专用的 php 文件中获得了帖子数据。

3.  `$html = $_POST['hiddenHtml'];`

4.  `$pdf->writeHTML($html, true, false, true, false, '');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:50:49.400

您将需要某种 PDF 生成器来运行您发布必要信息的服务器端。有一些常见的 PDF 生成器库，但我不确定它们的功能。看看这篇文章：

[PHP PDF 生成器建议](https://stackoverflow.com/questions/12350265/php-pdf-generator-advice)

最简单的做法是找到一个支持 HTML 到 PDF 转换的工具，然后通过 ajax 等将 html 标记直接发布到服务器。否则，如果没有转换，您将不得不从表单传递原始数据并将 PDF 模板化服务器端，同时在相关占位符中插入数据。然后只需使用正确的标题将 PDF 输出回客户端，允许用户下载文件。

例如：`header('Content-type: application/pdf');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:38:34.317

You can use `jQuery Print Element` from [here](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/). When printing a div, you just have to call the plugin's function:

```
$('#invoiceContainer').printElement(); 
```

You can pass the div id that containts the invoice, then you can save it as pdf.

# symfony - Symfony FOSUserBundle 不翻译

> ID：14888862
> 
> 赞同：4
> 
> 时间：2013-02-15T05:35:53.303
> 
> 标签：symfony, translation, fosuserbundle

我正在学习 Symfony 2。根据文档，我添加了 FOSUserBundle，除了翻译之外一切正常。我有

```
 translator:      { fallback: "%locale%" } 
```

in`config.yml`但表单标签没有翻译，即使我在上面更改为`~`. 我应该怎么做才能在表单中使用默认翻译值？

**编辑** 问题已解决：刚刚清除了缓存并出现了翻译...

# android - 错误“在启动活动时找不到类 'android.support.v4.app.FragmentActivity'

> ID：14888863
> 
> 赞同：1
> 
> 时间：2013-02-15T05:36:01.330
> 
> 标签：android, android-emulator, robotium, android-support-library

哪些步骤将重现该问题？
1\. 创建一个具有一个活动的虚拟 AUT android 本机应用程序。
2\. 创建测试robotium 项目
3\. 在测试项目中添加“AndroidTestUtility.jar”文件（此处无法附加）到libs 文件夹以及robotium 3.6 jar 文件。
4.“AndroidTestUtility.jar”自行处理设置和拆卸。
5.添加类似代码如下：

```
private static final String TARGET_PACKAGE_ID ="com.sap.esm.retail";
private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME2 ="com.sap.esm.retail.MobileRetailingActivity"; // First Activity

 public InitialTest() throws ClassNotFoundException {
            super(TARGET_PACKAGE_ID,LAUNCHER_ACTIVITY_FULL_CLASSNAME2);

 } 
```

6\. 添加robotium 将执行的示例测试方法。
7.运行android junit测试。
8\. logcat中的错误信息显示：

```
Could not find class 'android.support.v4.app.FragmentActivity', referenced from method com.jayway.android.robotium.solo.Waiter.getSupportFragment 
```

1.  IDE 中显示的错误消息：
    java.lang.NullPointerException

什么是预期的输出？你看到了什么呢？

测试框架“AndroidTestUtility”由测试机器人项目的主类扩展。预期的输出应该是活动的启动和随后的自动化步骤。实际输出是活动已启动，但未执行任何自动步骤（单独语句）。错误消息显示在随附的屏幕截图中。

您使用的是什么版本的产品？在什么操作系统上？
Windows 7 64 位，Android ADT 包，Robotium 3.6（也检查了 3.4.1），目标：Android API 15

有人能帮我一下吗 ？

谢谢并恭祝安康，

阿布舍克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:08:52.057

要使用等待支持片段的机器人方法，您需要在其中一个 APK 中导出 android support v4 库，通常这将在 AUT 中，因为它是实际使用它的部分（显示片段）然后是您的机器人项目将能够使用这些类的实例。

因此，要解决此问题，请将 android-support-v4.jar 包含在您的测试项目或应用程序项目 lib 文件夹中。

# jquery - 单击页面上的任意位置时如何隐藏切换（div）

> ID：14888869
> 
> 赞同：1
> 
> 时间：2013-02-15T05:36:34.947
> 
> 标签：jquery, toggle

我曾经`toggle`隐藏/显示`DIV`

HTML

```
<div class="wrap">

  <h1 id="selectBox">Service you&#39;re interested in</h1>

  <div class="selectBox">
    <div class="selectBoxWrap">

      <ul class="selectBoxContent">
        <li><input type="checkbox" name="#" value="New Web Site" /> <span class="innerPageSelect">Website Design and Development</span></li>
        <li><input type="checkbox" name="#" value="New Web Site" /> <span>Website Maintenance</span></li>
        <li class="other">
          <p>
            <label for="other">Other</label><br />
        <input type="text" name="other" value="" id="other" />
          </p>
         </li>
       </ul> 

      </div>
    </div>
</div> 
```

查询

```
$(function() {

            $('#selectBox').click(function() {
        $('.selectBoxContent').slideToggle('fast');
        return false;

    });
        }); 
```

我想要，在选择服务后单击页面上的任意位置时隐藏切换 div`checkbox`或在`textbox`.

[这](http://jsfiddle.net/jhunlio/TEyHC/2/)是我的小提琴

感谢您的意见和建议

先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:54:20.237

用这个

```
$(document).click(function() {
 $('.selectBoxContent').slideUp('fast');
});

$(".selectBoxContent").click(function(e) { // Wont toggle on any click in the div
e.stopPropagation();
}); 
```

检查这个[小提琴](http://jsfiddle.net/TEyHC/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:56:30.173

```
$(function() {
    $(document).on("click", function(e) {
        if ($(e.srcElement).closest('.selectBoxWrap').length) return;
        if ($('.selectBoxContent').is(":visible")) $('.selectBoxContent').slideToggle('fast');
    });
    $('#selectBox').on("click", function(e) {
        if ($(e.srcElement).closest('.selectBoxWrap').length) return;
        $('.selectBoxContent').slideToggle('fast');
        return false;
    });
}); 
```

小提琴：http: [//jsfiddle.net/TEyHC/9/](http://jsfiddle.net/TEyHC/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:43:24.943

您可以将单击事件处理程序绑定到 html 标记：

```
$(function() {
    $('#selectBox').click(function() {
        $('html').click(function() {
            $(this).unbind('click');
            $('.selectBoxContent').slideToggle('fast');
        });
        $('.selectBoxContent').slideToggle('fast');
        return false;
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T05:46:38.117

你可以这样使用

```
 $('html').click(function() {
       $('.selectBoxContent').slideToggle('fast');
  }); 
```

这是一个[小提琴](http://jsfiddle.net/TEyHC/3/)

# android - 在android中创建动态控件后如何刷新活动

> ID：14888872
> 
> 赞同：3
> 
> 时间：2013-02-15T05:37:00.753
> 
> 标签：android, android-asynctask, android-gallery

在我的活动 Oncreate() 函数中，我正在调用**AsyncTask**。在那个**PostExecute(** ) 中，我创建了一些**动态图库控件**并调用**ImageAdapterL.notifyDataSetChanged();** . 但我得到空指针异常。

我需要刷新活动而不调用 Oncreate() [B'coz in Oncreate only im call async Task]。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home_page);

        new testAynscTask().execute();
    }
    private class testAynscTask extends AsyncTask<Void, Void, Void>{

        @Override
        protected Void doInBackground(Void... params) {
            processTogetImages();
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        CreateDynamicGallery();
            aImageAdapterL.notifyDataSetChanged();
        }
    }
public void CreateDynamicGallery(){
        CategoryGalleryLayout = (LinearLayout) findViewById(R.id.linearLayout1);
        Gallery g = new Gallery(getApplicationContext());
        GalleryLayout.addView(g,new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            g.setSpacing(15);

        aImageAdapterL = new ImageAdapter(getApplicationContext());
        g.setAdapter(aImageAdapterL);
        g[positionP].setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(@SuppressWarnings("rawtypes") AdapterView parent, View v, int position, long id) {
                Toast.makeText(getBaseContext(), "" + position, Toast.LENGTH_SHORT).show();
            }
        });

    }

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T21:00:59.540

在我看来，您并没有真正刷新活动，只是适配器中的图像。我建议使用空适配器从 onCreate 调用 createDynamicGallery（编写良好的适配器视图应该通过将空适配器视为空来处理空适配器）然后加载图像并用图像填充真实适配器（或新适配器）。将画廊视图的适配器设置为真实的适配器应该会导致画廊刷新，一切都会好起来的。

作为额外的观察，您可能希望查看使用带有 loadermanager 的 asynctaskloader 来帮助您正确处理旋转。使用您当前的代码，如果异步任务需要很长时间才能执行，则可能会出现错误（可能是“活动破坏”错误）或两个异步任务在屏幕旋转后尝试加载图像的竞争条件。

# redis - 如果您只需要不到 5MB 的存储空间，为什么还要使用 redis 而不是 localStorage？

> ID：14888874
> 
> 赞同：9
> 
> 时间：2013-02-15T05:37:08.903
> 
> 标签：redis, local-storage

我试图弄清楚使用 localStorage 是否比 redis 更好地存储不会超过 localStorage 5MB 限制的数据集。在我正在实施的网站中，计划是当最终用户访问任何页面时，检查用户是否将最新数据存储在 localStorage 中。如果没有，则刷新它。

通过这种方式，用户不需要去像redis这样的外部数据存储，这应该会更快。

我在网上找不到任何可以回答这个问题的资源。我不确定原因是否是因为我以错误的方式去做。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T18:01:53.990

我会说你没有找到这个问题的任何答案的一个原因可能是因为 Redis 不应该在浏览器中使用......

考虑到 localStorage 是一种浏览器工具，它无法与 Redis 相提并论。Redis 为后端提供远程存储。它不应该暴露在 Internet 上，而是部署在受信任的网络上（就像许多其他 NoSQL 存储一样）。

IMO你在这里比较苹果和橘子......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-09T22:47:34.590

@Didier or anyone else ...

What if the webapp is on a trusted company network? How would you answer it then? Because the same question as OP has crossed my mind.

Redis is simply a cached service to speed up data access. So the question is, when one is considering the use of Redis on a intra company web app, then does it may make sense to use Local Storage as the cache, instead of Redis, to speed data access. That is the root of the question.

EDIT: found something interesting BankersBox - Mimics Redis api and uses local storage as the persistent data store. [https://github.com/twilio/BankersBox](https://github.com/twilio/BankersBox)

# android - 保存自定义对象的状态 - 在 onResume 方法中

> ID：14888875
> 
> 赞同：1
> 
> 时间：2013-02-15T05:37:19.223
> 
> 标签：android, object, savestate

我在一个活动中有一个名为 custom obj 的对象，现在当用户启动应用程序时，该对象工作得很好，但假设用户在该活动中并点击，`HOME button`所以现在活动进入暂停状态，现在可能是 2到 3 小时用户恢复活动但对象状态不再可用，为什么会这样？

我尝试使用 onsaveInstanceState 来存储对象但不工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:54:56.997

例子：

```
int aNumber;
int aString;

@Override
public void onCreate( Bundle data ) {
    aNumber = data.getInt( "aNumber", 0 );
    aString = data.getString( "aString", "" );

    // .. set content and restore state
}

@Override
public void onSaveInstanceState( Bundle data ) {
    super.onSaveInstanceState( data );
    data.putInt( "aNumber", aNumber );
    data.putString( "aString", aString );
} 
```

# scala - 如何从调用者返回回调参数值？

> ID：14888876
> 
> 赞同：2
> 
> 时间：2013-02-15T05:37:21.393
> 
> 标签：scala

我正在使用来自第三方代码的函数，如下所示：

```
scala> def willCallback(fun: Function1[Int, Unit]) {
     | doWork()
     | fun(1)
     | }
willCallback: (fun: Int => Unit)Unit 
```

在我的代码中，我定义了一个函数并希望它返回回调函数参数，以实现此目的：

```
scala> def callbackResult():Int = {
     |   willCallback( (i:Int) => {
     |     // What do I put here 
     |     // to make the return value of callbackResult to be i?
     |   })
     | } 
```

我该怎么做才能让它发挥作用？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:41:14.447

从您的评论看来，您希望`willCallback`在回调执行之前阻止。以下是使用[Scala 2.10 中的](http://docs.scala-lang.org/sips/pending/futures-promises.html)[`Future`/`Promise`](http://docs.scala-lang.org/sips/pending/futures-promises.html) API 的方法，

```
import scala.concurrent._

// Library code (which you can't modify)
def willCallback(fun: Int => Unit) { fun(1) }

// Your code. You can fulfill a `promise` in your callback
def callbackResult(): Int = {
  val p = promise[Int]
  val f = p.future

  willCallback { i: Int =>
    p.success(i)
  }

  // Block until the promise has been fulfilled (the callback has executed).
  // In this case, the return value is 1
  Await.result(f, duration.Duration.Inf)
} 
```

当然，如果回调永远不会执行，您的`callbackResult()`方法将无限期挂起。正如 Régis Jean-Gilles 所建议的那样，为了避免这种危险，与其等待它的价值，不如`callbackResult()`返回`f: Future[Int]`而不是等待它的价值可能会更好。`Int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:04:28.623

真的不清楚你想要什么或期望什么，但`return`对新手来说既是困惑又是不可取的。

尝试将您的“回调”表述为表达式或表达式序列。最后一个表达式是您要“返回”的值。

您需要知道的是`return`从顶级方法返回，而不是函数或内部方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:37:17.603

你是这个意思吗？

```
def callbackResult(result:Int) = {
   // code
}

willCallback(callbackResult) 
```

另一个版本是：

```
willCallback( { result =>
   // code
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T07:42:04.047

目前尚不清楚您要达到的目标，但这是另一个镜头：

```
def callbackResult():Int = {
  var result = 0
  willCallback( (i:Int) => {
    result = i
    // rest of your code
  })
  result
} 
```

# css - CSS混合相对高度和绝对高度

> ID：14888877
> 
> 赞同：1
> 
> 时间：2013-02-15T05:37:25.143
> 
> 标签：css, html

有没有办法同时使用 html div 元素的绝对高度（以 px 为单位）和相对高度？我想创建一个导航栏，并希望内容 div 使用其余部分。

我创建了一个[jsfiddle](http://jsfiddle.net/5YHX7/801/)（`.bot`需要分配剩余的高度）。在示例中，它有一个不需要的滚动条。

编辑：我[读](http://webdesign.about.com/od/csstutorials/f/set-css-height-100-percent.htm)得越多，我就越意识到这似乎是一个真正的问题。我当然不打算将边距带到所有嵌套级别......

Edit2：我正在寻求一种解决方案，该解决方案允许我`.bot`分成两个等高的 div，这意味着机器人 div 不能只被顶部的 div 覆盖。我找到了一个解决方案（使用`calc`），但以前从未听说过它，并且不确定它是否可以保存以供使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:44:16.563

您可以通过添加`margin-top`-ve 值来操作输出并添加一个空 div 来指定高度

**HTML**

```
 <div class='top'>
        some top stuff...
    </div>

    <div class='bot'>
      <div class="space"></div>        
     some bot stuff...
    </div> 
```

**CSS**

```
.space{height:40px}
.bot {
    margin-top:-40px;
    z-index:0;
    height: 100%;
    background-color: blue;
    position: relative;
} 
```

**[演示](http://jsfiddle.net/5YHX7/806/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:47:48.440

对于第一个问题：

```
.top {
 width: 100%;
 height: 40px;
 position: absolute;
}
.bot {
 height:100%;
 width:100%;
 margin-top:40px;
} 
```

对于第二个问题，它适用于它的父元素，除非它是固定创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:02:13.193

这肯定会帮助你......在ie，ff，chrome上测试

```
html, body { 
    height: 100%; 
    width: 100%; 
    margin: 0; 
}

.top {
    height: 7%;
    min-height: 38px;
    max-height: 38px;
    background-color: green;
}

.bot {
    height: 93%;
    background-color: blue;
    position: relative;
}

.half {
    height: 50%;
    background-color: pink;
    position: relative;    
}

.half2 {
    height: 50%;
    background-color: yellow;
    position: relative;    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T07:05:29.147

I'm not sure how good of an answer this is in terms of browser compatibility, but [this](http://jsfiddle.net/BxZds/1/) seems to be working in chrome. Apparently, there's a `calc` function that dynamically updates the result in css. Can anyone comment on this solution?

# iphone - 数组的 iOS 6 格式

> ID：14888888
> 
> 赞同：2
> 
> 时间：2013-02-15T05:38:08.703
> 
> 标签：iphone, arrays, ios6

在 iOS 6 中，您可以使用以下简单代码从数组中获取项目：

myArray[index] 或 myArray[0]

在 iOS 6 之前，我们必须使用：

```
 [myArray objectAtIndex:0] 
```

我们还可以创建一个数组：

```
@[@"item1", @"item2", @"item3"] 
```

而不是编码：

```
[NSArray arrayWithObjects:@"item1", @"item2"] 
```

我的问题是确保...如果我开始使用新格式，它不会在未更新到 OS 6 的设备上正常运行？

我很想这样简单地编写我的代码，但如果我必须检查设备正在运行哪个操作系统并且如果它低于 6.0 则编写单独的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:58:14.183

新的下标语法调用 libarclite 中定义的方法。根据[Objective-C Feature Availability Index](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html)，可以将 NSDictionary 和 NSArray 下标部署到 iOS 5。如果您在项目中链接 libarclite 并添加以下[标头](https://github.com/tewha/iOS-Subscripting/blob/master/Foundation+sdfsubscripts.h)，它也适用于 iOS 4.3 。这意味着您至少需要在目标设备上安装 iOS 4.3 才能运行生成的代码。

# android - 使用 ruboto 的“rake”命令返回中止和权限被拒绝

> ID：14888895
> 
> 赞同：1
> 
> 时间：2013-02-15T05:38:59.483
> 
> 标签：android, ruby, rake, dx, ruboto

我最近决定冒险使用 ruboto 进行 android 应用程序开发。我安装了带有所有必要开发工具的 Android SDK，以及 jruby、javac、ant 和 ruboto。但是，当我调用“rake”（ruby make）命令时，出现以下错误：

```
morgan@ubuntu:~/quick_start$ rake
rake aborted!
Permission denied - /home/morgan/android/android-sdk-linux/platform-tools/dx
/home/morgan/quick_start/rakelib/ruboto.rake:27:in `initialize'
/home/morgan/quick_start/rakelib/ruboto.rake:27:in `open'
/home/morgan/quick_start/rakelib/ruboto.rake:27:in `<top (required)>'
/home/morgan/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
/home/morgan/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>' 
```

等等...似乎问题出在我的android平台工具中的dx文件...我想知道是否有人遇到过类似的问题以及我将如何寻找解决方案以便我可以运行“rake”并生成一个 .apk 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:27:05.030

最近通过检查 dx 命令的存在和文件权限解决了这个错误。它应该适用于最新的 Ruboto 版本。

如果仍有问题，请在[https://github.com/ruboto/ruboto/issues提出问题](https://github.com/ruboto/ruboto/issues)

# php - 如何在 xampp 包中安装 sqlbuddy？

> ID：14888896
> 
> 赞同：2
> 
> 时间：2013-02-15T05:39:00.403
> 
> 标签：php, installation

`sqlbuddy`文件夹放在哪里`xammp`？

我们需要更改哪些文件？

```
My xampp path: d:\xampp

sqlbuddy folder path : d:\xampp\htdocs\sqlbuddy 
```

试图在浏览器中访问“localhost/xampp/sqlbuddy”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:06:01.463

下载[SQL Buddy](http://sqlbuddy.com/)并将其放入您的 XAMPP htdocs 文件夹中。

使用此 url 从浏览器访问它，`http://127.0.0.1/sqlbuddy`或`http://localhost/sqlbuddy`

# php - phpMyAdmin 中的 MySQL 条目

> ID：14888901
> 
> 赞同：2
> 
> 时间：2013-02-15T05:39:16.663
> 
> 标签：php, mysql, sql, phpmyadmin

这是一个奇怪的问题。

我有一个`users`第一列作为`ID`（PRIMARY，AUTO_INCREMENT）的普通表。它工作正常。在检查我的表单是否有效时，我插入了一些随机数据（不是通过表格，而是通过表单本身）。然后我删除了这些条目。现在，显然没有。表的行数减少但`ID`值保留。所以在某种程度上，`ID`表中的最后一个是`567`，不是。行数是`540`. （差距是`27`）

但是，今天我重新检查了表格的条目，差距已经增加到`89`. （最后`ID`是 1809，行数是`1720`）。这怎么可能？之后，当我为其他用户打开表单时，我从未删除任何其他条目。

我的表结构`USERS`：

```
ID-->PRIMARY,A_I
EMAIL-->VARCHAR(60),UNIQUE
NAME-->VARCHAR(60) 
```

用户注册后，他/她会`ID`通过所选电子邮件 ID 上的邮件收到有关他/她的通知。

在以其他形式申请为活动预留座位时，用户必须输入他/她的团队成员的 ID。我检查在`USERS`表中输入的 ID，从那里检索结果并将其添加到另一个表中，例如`EVENTS`。php代码的形式为：

```
 $members=array containing the IDs entered by the user of his/her team members.
        $result_rows = mysql_query("SELECT * FROM users");
                $num_rows = mysql_num_rows($result_rows);
                foreach($members as $key=>$value){
                    if ($value>($num_rows+89))
                    $err[]="Error. One of the ID you entered doesnot exist";
}
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:57:14.453

如何从您的系统中删除用户？

Auto_increment 字段就是这样做的——对于每个新行，它们 +1。删除也没关系——它们只是相应地增加。

因此，如果您添加 John Doe，然后删除该记录并读取它，您的新 ID 为 2——ID 1 消失了。然后你添加 Jane Doe，删除它，读取它，新的 Id 是 4，但表中只有 2 条记录。

因此，在您的情况下，当 ID 为 567 时，必须删除 89 条用户记录才能到达 1809。

或者，根据您的表结构，另一个可能的选项是 INSERT IGNORE - 例如，如果您尝试插入重复的用户 John Doe 两次，并且您有唯一键约束，即使没有新的 id 也会自动递增将添加记录。

最后一点——这真的不重要。让数据库处理 ID。如果你真的需要1、2、3等。方法，您需要自己构建。

# php - 循环遍历 mysql 字段

> ID：14888902
> 
> 赞同：2
> 
> 时间：2013-02-15T05:39:20.553
> 
> 标签：php, mysql, loops

我正在尝试制作一个匿名评论系统，以下是打印现有评论的代码。它要求我遍历数据库中的 comm_id 字段以获取所有评论。我怎样才能做到这一点？

```
<ol id="update" class="timeline">
<?php
$sql=mysql_query("SELECT * from comments where com_id='' ");
while($row=mysql_fetch_array($sql) )
{
$comment=$row['comment'];
?>
<li class="box">
<?php echo $comment; ?>
</li>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:30:49.583

删除它`where com_id=''`然后它将考虑所有评论，然后循环显示：

```
<ol id="update" class="timeline">
<?php
$sql=mysql_query("SELECT * from comments  ");
while($row=mysql_fetch_array($sql) )
{
$comment=$row['comment'];
?>
<li class="box">
<?php echo $comment; ?>
</li>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:20:55.130

试试这个...它将显示您数据库表中的所有评论

```
<ol id="update" class="timeline">
  <?php
    $sql=mysql_query("SELECT * from comments");
    while($row=mysql_fetch_array($sql) )
    {
    $comment=$row['comment'];
    ?>
    <li class="box">
    <?php echo $comment; ?>
    </li>
    <?php
    }
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:46:40.247

删除`where com_id=''`. 这将无条件选择*所有评论。*

* * *

如果可以，请避免使用`ext/mysql`和使用`PDO`/ 。`mysqli`无需使用`SELECT *`. 您可以只选择`comment`列。

# java - 在 jsp/xhtml/html 调用小程序时出现异常

> ID：14888906
> 
> 赞同：1
> 
> 时间：2013-02-15T05:39:36.263
> 
> 标签：java, applet

使用 JSF 2.0 在 xhtml 调用小程序时出现异常“ClassNotFoundException。我在小程序中实现了两种形式。这些小程序存档到 console.jar 文件。这些 .jar 文件添加到我的 Web 应用程序类路径中。应用程序在 JSF 2.0 中实现。项目结构如

```
scheamaconsole    
          |__src    
          |
          |__webapps
            |
            |____WEB-INF
             |
             |__lib
                 |
                 |__console.jar
             |
             |____ui
                |
                |__admin
                |
                |________ sechemaapplet.xhtml 
```

schemaapplet.xml:-

```
<applet code="com.schema.apps.schemamain.class" width="100%" height="100%" archive="console.jar"  codebase="/classes/"/> 
```

但是上面的小程序标签不起作用。所以我尝试了另一种方法，我将 console.jar 文件复制到 webapps>ui 和小程序代码中

```
<applet code="com.schema.apps.schemamain.class" width="100%" height="100%" archive="console.jar"  codebase="/webapps/ui"/> 
```

但是这个也有同样的异常。请帮助我，为什么会出现这个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:33:55.543

是的，它解决了问题。我将所有依赖项 .jar 复制到 ui>admin 文件夹中，因为客户端只能访问 html、jsp 等资源。applet 标记是

```
<applet code="com.schema.apps.schemamain.class" width="100%" height="100%" archive="console.jar"  /> 
```

# hadoop - hadoop 映射过程错误：百分比下降到 0，映射完成变成负数

> ID：14888907
> 
> 赞同：2
> 
> 时间：2013-02-15T05:39:48.200
> 
> 标签：hadoop, mapreduce

奇怪的是我的工作是这样的：

地图的百分比下降到 0。

```
13/02/15 06:04:44 INFO mapred.JobClient:  map 20% reduce 20%
13/02/15 06:14:33 INFO mapred.JobClient:  map 19% reduce 20%
13/02/15 06:22:30 INFO mapred.JobClient:  map 18% reduce 20%
13/02/15 06:30:41 INFO mapred.JobClient:  map 17% reduce 20%
13/02/15 06:40:39 INFO mapred.JobClient:  map 16% reduce 20%
13/02/15 06:49:30 INFO mapred.JobClient:  map 15% reduce 20%
13/02/15 06:57:41 INFO mapred.JobClient:  map 14% reduce 20%
13/02/15 07:06:49 INFO mapred.JobClient:  map 13% reduce 20%
13/02/15 07:16:22 INFO mapred.JobClient:  map 12% reduce 20%
13/02/15 07:24:19 INFO mapred.JobClient:  map 11% reduce 20%
13/02/15 07:33:22 INFO mapred.JobClient:  map 10% reduce 20%
13/02/15 07:42:14 INFO mapred.JobClient:  map 9% reduce 20%
13/02/15 07:50:47 INFO mapred.JobClient:  map 8% reduce 20%
13/02/15 07:59:12 INFO mapred.JobClient:  map 7% reduce 20%
13/02/15 08:08:04 INFO mapred.JobClient:  map 6% reduce 20%
13/02/15 08:16:44 INFO mapred.JobClient:  map 5% reduce 20%
13/02/15 08:25:26 INFO mapred.JobClient:  map 4% reduce 20%
13/02/15 08:34:16 INFO mapred.JobClient:  map 3% reduce 20%
13/02/15 08:42:21 INFO mapred.JobClient:  map 2% reduce 20%
13/02/15 08:51:55 INFO mapred.JobClient:  map 1% reduce 20%
13/02/15 08:59:56 INFO mapred.JobClient:  map 0% reduce 20% 
```

完成的地图是-4169

```
Jobid   Priority    User    Name    Map % Complete  Map Total   **Maps Completed**  Reduce % Complete   Reduce Total    Reduces Completed   Job Scheduling Information  Diagnostic Info
job_201302111406_2339   NORMAL  hadoop  MonitorUVFreqStatMRPrepare  0.00%
34140   **-4169**   20.92%
60   0  NA  NA 
```

有人可以知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:47:17.647

通常，百分比的下降表示 map/reduce 任务在执行一段时间后失败（因此百分比为正）。在您的情况下，也许所有映射器都未能使其百分比为零。

# ajax - ajax 调用在 Safari 中不起作用

> ID：14888909
> 
> 赞同：1
> 
> 时间：2013-02-15T05:39:55.427
> 
> 标签：ajax, jquery, asp.net-ajax

这个 ajax 调用在 chrome、IE、firefox、opera 中有效，但在 safari 中无效。谁能知道原因。

```
 var functionToCall = "CallUserControlFunctionAdd";
 var schoolInformation = JSON.stringify({ SchoolName: schoolName, schoolId: SchoolId, UserName: userName });

    $.ajax({
        type: 'POST',
        url: "Account/MyAccount.aspx/" + functionToCall,
        data: schoolInformation,
        contentType: "application/json; charset=utf-8",
        dataType: "json",

        success: function () {

        },
        error: function () {

        }
    }); 
```

# android - Google Maps API + Android 位置数据

> ID：14888910
> 
> 赞同：2
> 
> 时间：2013-02-15T05:39:57.797
> 
> 标签：android, google-maps, geocode

对于可能已经这样做的人，使用 Google 地图将用户位置与建筑物或区域匹配的好方法是什么？正如 Google Maps API 有一种方法可以调用 Google 已经标记的建筑物位置/名称，因此我不必返回并用某些多边形标记某些区域。我的用例是我有 Android GPS 数据，但我想说哦，那些纬度，经度点通过将它们提供给 API 来构建 xyz。我很确定 API 支持这一点，我只是想了解我应该搜索的内容，以便找到适当的指南/文档来完成此操作。

有什么比这里建议的更好：

[Google GeoCode - 建筑物的坐标 [关闭]](https://stackoverflow.com/questions/12106676/google-geocode-coordinates-of-the-bulding)

[谷歌地图 - 如何从地址获取建筑物的多边形坐标？](https://stackoverflow.com/questions/5401661/google-maps-how-to-get-buildings-polygon-coordinates-from-address)

或者有没有办法给 API 一个 lat,lon 并找到用户最接近的建筑物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:50:17.260

这非常困难。谷歌地图似乎没有获取实际建筑物名称而不是地址的内置方式。

您可以尝试使用 FourSquare API。我们将其与实际绘制多边形坐标相结合（尽管不是完全可扩展的）。或者，如果您可以让用户通过签到来众包信息，那将很有用。

# vb.net - 复杂的条件

> ID：14888912
> 
> 赞同：2
> 
> 时间：2013-02-15T05:40:02.303
> 
> 标签：vb.net, datatable

我有一个关于从`DataTable`VB.NET 中的对象中选择函数数据的问题。例子：

> 在 PL/SQL 中：Select * from Table where A not in (Select B from Table)

那么，我如何实现`DataTale Object`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:36:21.623

我关注该查询中的 where 条件。

现在我通过使用解决了我的问题

```
Dim selectChil = From p In _ps.AsEnumerable()
                 Select p.Field(Of String)(_childKey)
Dim selectParent = (From p In _ps.AsEnumerable()
                   Where selectChil.Contains(p.Field(Of String)(_parentKey)) = False
                   Select p.Field(Of String)(_parentKey)) 
```

谢了，兄弟们，

# jquery - 如何在 html 中使用 jquery 访问托管的 WCF Web 服务

> ID：14888913
> 
> 赞同：2
> 
> 时间：2013-02-15T05:40:09.030
> 
> 标签：jquery, wcf, web-services

1.我有一个简单的`WCF`网络服务，说你好方法返回字符串“你好”。我已经将它托管在服务器上。假设我可以通过[http://demo.test.com/myservice/Service.svc?wsdl](http://demo.test.com/myservice/Service.svc?wsdl)访问它。

2.我想通过简单的html页面来`jquery`调用它。

问题是该`html`页面无法访问该服务。我没有在服务上添加任何东西，除了 Visual Studio 2010 的默认设置。我是否需要在服务器端服务上添加任何东西才能通过`jquery`调用访问它们？我怎样才能访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:54:15.090

服务是否与带有 JavaScript 代码的页面在同一域上运行？

如果没有，您需要启用 CORS [http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)以向其他域发出 AJAX 请求

# asp.net - Silverlight 无法访问 FormsAuthentication

> ID：14888917
> 
> 赞同：1
> 
> 时间：2013-02-15T05:40:30.757
> 
> 标签：asp.net, silverlight, login

我有一个 ASP.Net 登录

```
    if (Membership.ValidateUser("User", "Password"))
    {
       FormsAuthentication.SetAuthCookie("Testuser", false);
       Response.Redirect("TestingAuthNewTestPage.aspx");
    }

```

这工作正常。我到了silverlight页面。

然后，如果我想注销，我尝试使用 FormsAuthentication.SignOut()，但在我的 silverlight 应用程序中，我无法访问 FormsAuthentication？

它起作用的唯一方法是如果我打电话：

```
    WebContext.Current.Authentication.Logout();

```

这是退出的好方法吗？或者我如何访问 FormsAuthentication 类？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:59:19.950

您也应该清除身份验证 cookie。

```
FormsAuthentication.SignOut(); 
Session.Abandon(); //Clears Sessions

//This modification will Clear cookies
HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
cookie1.Expires = DateTime.Now.AddYears(-1);
Response.Cookies.Add(cookie1);

//Redirect to login page
FormsAuthentication.RedirectToLoginPage(); 
```

# php - XML中的PHP函数？

> ID：14888921
> 
> 赞同：1
> 
> 时间：2013-02-15T05:40:48.133
> 
> 标签：php, xml, simplexml, eval

是否可以在 XML 中编写 PHP 函数

```
<doThis>

doThis(){
bang bang bang!
}

</doThis> 
```

并使用`simplexml_load_file`该功能获取对象？

```
$foo = simplexml_load_file($xmlAbove);
$foo->doThis();   //bang bang bang! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:47:03.323

首先，您应该始终考虑像这样运行“代码”的安全隐患。如果此 XML 文件具有远程来源，并且您执行代码，那么它可能会做任何事情。怎么样`exec(rm -fR /some/important/path);`？还是删除所有内容的数据库调用？发送者和您的代码之间需要有非常强的信任关系，并且还需要强大的安全协议来防止中间人攻击和其他攻击。

对于你的问题，这是不可能的。正如所评论的，XML 是数据，而不是代码，并且应该是可移植的，这意味着您的 PHP 代码对于接受此 XML 的另一个客户端来说是无意义的。

但是，您*可以*使用`eval`. 也许是这样的：

```
eval($foo->doThis); 
```

注意：我根本不推荐这个。这不是 XML 的预期用途，它有很多问题。请想点别的办法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:28:39.283

XML 支持嵌入所谓的[*处理指令*(PI)](http://www.w3.org/TR/REC-xml/#sec-pi)，有效的 XML 可能如下所示：

```
<doThis><?php
doThis()
{
   bang bang bang!
}    
?></doThis> 
```

这与您从 PHP 语言中所知道的非常相似。然而，仅支持意味着您可以将处理指令放在那里，但这些指令的处理不属于 XML 的业务。

此外，您使用的 XML 解析器 - [SimpleXML](http://php.net/SimpleXML) - 对处理指令没有专门的支持。您可以使用[DOMDocument](http://php.net/DOMDocument)来代替。来自 XML 方面的内容太多了。

对于 PHP 方面，您遇到的问题是您以某种方式定义了一个函数，而您却想调用它。此外，PHP 代码在其他部分无效（可能是因为您只是提出了一个快速问题）。也许这样更好：

```
<doThis><?php
    function doThis()
    {
        return 'bang bang bang!';
    }
?></doThis> 
```

使用一些基于 DOM 的小解析器（这里称为`PiDOMDocument`），可以将其转换为类/对象：

```
$doc = new PiDOMDocument();
$doc->loadXML($xml);
$obj = $doc->getObject();
echo $obj->doThis(); 
```

`echo`最后一行的输出是：

```
bang bang bang! 
```

（平息惊喜）。您可以在内部将其映射到 SimpleXMLElement 以将其简化为上面的示例代码：

```
$foo = simplexml_load_string($xml, 'PiSimpleXMLElement');
echo $foo->doThis();   //bang bang bang! 
```

这就像：

```
/**
 * SimpleXMLElement integration of PiDOMDocument
 */
class PiSimpleXMLElement extends SimpleXMLElement
{
    public function __call($name, $args) {
        $doc = new PiDOMDocument();
        $doc->loadXML($this->asXML());
        $callback = array($doc->getObject(), $name);
        return call_user_func_array($callback, $args);
    }
} 
```

作为 PHP 处理器，您可以使用`eval`or `include`（[两者基本相同](https://stackoverflow.com/q/1184628/367456)）。PHP 是直接执行的，所以如果你的代码有致命的解析错误，整个脚本就有致命的错误，如果你不喜欢这个 PHP 默认行为，你可以在 eval'ing 之前解析字符串，看看[`token_get_all()`](http://php.net/token_get_all)这个[例子](https://stackoverflow.com/a/7874314/367456)或[这个例子](https://stackoverflow.com/a/3268443/367456)。

`eval`我在我的[在线演示](http://eval.in/9908)/示例代码中选择了一个未经验证的[作为 gist](https://gist.github.com/hakre/4959346)。

# java - 在程序完成之前出现异常详细信息？

> ID：14888927
> 
> 赞同：3
> 
> 时间：2013-02-15T05:41:05.403
> 
> 标签：java, exception, netbeans

我有一个 for 循环：

```
for(Location l : locs) {
    System.out.println("X:"+l.getX()+", Y:"+l.getY());
    try {
        if(layer.getObject(l) != null) 
            out.add(layer.getObject(l));

    } catch(NullPointerException e) {

    }
} 
```

每次迭代，它从`Location[]`数组中获取一个位置，并打印出该位置的 X 和 Y。然后，下一行从地图图层（不是标准地图库）中的位置获取对象，并将其添加到`ArrayList`.

我得到一个`java.lang.ClassCastException`，但这不是我的问题。这个问题我可以自己解决。我的问题是为什么输出看起来像这样（特别是显示异常的方式）：

```
run:
X:0, Y:1
X:0, Y:2
X:0, Y:3
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [LMapGrid.OverlayObject;
X:1, Y:1
X:1, Y:3
X:2, Y:1
X:2, Y:2
X:2, Y:3
    at MapGrid.MapGrid.getAdjacentOfType(MapGrid.java:86)
    at BehaviorMap.BehaviorMap.main(BehaviorMap.java:26)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

它找到的对象位于位置 (1,1)，因此，异常在位置 (1,1) 处引发。这是从程序开始时设置的。程序在主线程上运行。不过，我的问题是，为什么输出会以这种方式出现？

这种布局方式似乎意味着当程序到达 (0,3) 时抛出了异常，但当它到达 (1,1) 时肯定已经抛出异常。然后，输出将暗示，一旦发现异常，程序将继续执行，直到循环退出。

我不明白这种行为。当遇到未处理的异常时，为什么程序不直接退出？此外，为什么异常消息会出现在调用异常的行之前？请注意，`System.out.println`在块之前`try`。

最后，为什么错误会以如此奇怪的方式分裂？（在那个错误信息出现，然后细节出现后程序出现继续执行。） 平台是NetBeans 7.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:48:19.017

> 这种布局方式似乎意味着当程序到达 (0,3) 时抛出了异常，但当它到达 (1,1) 时肯定已经抛出异常。然后，输出将暗示，一旦发现异常，程序将继续执行，直到循环退出。

未捕获异常的默认行为是将它们打印到标准错误流 ( `System.err`)。这可以以与标准输出流 ( `System.out`) 不同的顺序显示在控制台上。

> 我不明白这种行为。当遇到未处理的异常时，为什么程序不直接退出？此外，为什么异常消息会出现在调用异常的行之前？请注意 System.out.println 位于 try 块之前。

这取决于`MapGrid.MapGrid.getAdjacentOfType`在做什么。看起来它正在捕获异常并调用`Exception.printStackTrace()`，它会打印为标准错误。

> 最后，为什么错误会以如此奇怪的方式分裂？既然出现了错误信息，那么在程序出现继续执行之后就会出现详细信息。平台是 NetBeans 7.2。

同样，因为输出和错误流不一定按照它们写入的顺序（相对于彼此）显示在控制台上。

# opengl - 处理大量图像

> ID：14888928
> 
> 赞同：3
> 
> 时间：2013-02-15T05:41:24.090
> 
> 标签：opengl, image-processing, 3d, large-data-volumes, volume-rendering

我有一个巨大的 3D 卷，大小超过 2GB。我想加载这些数据，对其进行处理并在我的应用程序中显示为 3D 体积，在其中执行体积 cn 的缩放和旋转。

我看到了加载大量数据并显示它的应用程序。

我的疑问是，Windows32 位应用程序地址空间被限制为 2GB，那么这些应用程序内部使用什么技术来处理这么大的容量？

或者

如何在我的应用程序中以最佳性能管理这些海量数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:36:31.490

> 我的疑问是，Windows32 位应用程序地址空间限制为 2GB

仅在 32 位系统上。

> 那么在这些应用程序中使用什么技术来处理如此庞大的数据量呢？

使用 64 位系统，它为您提供 2 ^(34) GiB 的地址空间。然而，真正的瓶颈是现代 GPU 上纹理空间的大小。例如，我正在做这样的医疗体积渲染，即使使用 2 GiB GPU 内存，您的纹理也被限制在 1.5 GiB 左右，因为您仍然需要一些空间用于屏幕帧缓冲区和其他资源。

> 如何在我的应用程序中以最佳性能管理这些海量数据？

使用 64 位系统。当然，您还需要这些数量的系统内存 (RAM)。例如，我的~~玩具~~工作站有 64 GiB 的内存。

# java - 扩展的链接列表方法在单独的类中不起作用主要方法

> ID：14888929
> 
> 赞同：1
> 
> 时间：2013-02-15T05:41:30.617
> 
> 标签：java, methods, linked-list

这是扩展 LinkedList 的类我正在使用 addtopq 来制作优先级 que 系统，其中 que 的第一个元素是字符串，第二个是与该字符串相关的优先级。忽略异常

```
class PQ extends LinkedList {

public void addtopq(String s, Integer p){
    if (p<1 || p>20) throw new InvalidPrioty("Priority number must be between 1 and 20");
    int pos = 0;
    int k = 0;
    int i = 1;
    int j = 0;
    LinkedList nlist = new LinkedList();

    if (this==null){
        addLast(s);
        addLast(p);
        System.out.println(this);
    }
} 
else {
       while (i<size()){
            int x  = Integer.valueOf(get(i).toString());
            if (p > x) pos = 1;
            else  if (p==x){
                pos = 0;
                break;
            }
            else if (p < x) {
                pos = -1;
                break;
            }
        }
        if (pos==1){
            addLast(s);
            addLast(p);
        }
        if (pos==-1||pos==0){
            for (k=0; k<(i-1); k++) nlist.add(j, get(j));
            nlist.addLast(s);
            nlist.addLast(p);
            for (k=k+1 ; k<size(); k++) nlist.add(get(k));
        }
    }
}
} 
```

这是拒绝将 2 个新对象添加到列表中的主文件：

```
public class Main {
public static void main(String[] args) {
    PQ list = new PQ();
    list.addtopq("first", 1);
    System.out.println(list);

} 
```

我在输出中得到 [] 而不是我想要的 [first, 1]。我需要在 PQ 类中创建构造函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:08:11.160

将项目添加到列表的更正确实现如下所示：

```
import java.util.LinkedList;

class PQ extends LinkedList {

    public void addtopq(String s, Integer p) {
        addLast(s);
        addLast(p);
    }

    public static void main(String[] args) {
        PQ list = new PQ();
        list.addtopq("first", 1);
        System.out.println(list);
    }
} 
```

查看您在代码中犯了多少基本错误，我建议您通过[Luiggi Mendoza](https://stackoverflow.com/users/1065197/luiggi-mendoza)推荐的链接和评论中给出的建议。学习数据结构的基础课程也不会受到伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:08:20.613

这是有效的：

```
public class Main {
    public static void main(String[] args) {
        PQ list = new PQ();

        //Insert test code here:
        list.addtopq("First",20);
        list.addtopq("Second",3);
        list.addtopq("Third", 1);
        list.addtopq("Forth",3);
        list.addtopq("Fifth",2);
        list.addtopq("Sixth",4);
        list.tostring();

import java.util.LinkedList;

class InvalidPrioty extends RuntimeException{
    public InvalidPrioty(String s){
        super(s);
    }
}

class PQ extends LinkedList{

    public void addtopq(String s, Integer p){
        if (p<1 || p>20) throw new InvalidPrioty("Priority number must be between 1 and 20");
        System.out.println("Adding "+'"'+s+'"'+" with priority "+p);
        int pos = 0;
        int k;
        int i = 1;
        PQ nlist = new PQ();
        //The list will initially be empty so the first call the the addtopqmethod
        // will add the objects to the queue and avoid errors when checking if objects values
        // are greater than null.
        if (isempty()){
            addLast(s);
            addLast(p);
        }else {
           while (i<size()){
               // Creates an object to see whether the priority in the item being added is higher
               // than the one in the queue already.
                Integer x  = Integer.valueOf(get(i).toString());
               //The loop will break if priority is less than or equal to x so that it can place it behind the items
               //with higher or the same priority. I assumed that as long as all the strings in the list with the same
               //priority were together, that it wouldn't matter what order they in.
                if (p > x) pos = 1;
                else  if (p<=x){
                    pos = 0;
                    break;
                }
               i=i+2;
            }
            //Adds to the end of the que as it has the largest priority
            if (pos==1){
                addLast(s);
                addLast(p);
            }
            if (pos==0){

                //Adds everything up to the one being replaced into a seperate list...
                for (k=0; k<(i-1); k++) nlist.add(k, get(k));
                //Adds the new String with its priority into the List...
                nlist.addLast(s);
                nlist.addLast(p);
                //Adds the rest of the items
                for (; k<size(); k++) nlist.add(get(k));
                //Clears the list and adds the new order
                clear();
                addAll(nlist);
                nlist.clear();
            }
        }
    }

    public boolean isempty(){
        if (contains(null)) return true;
        else return false;
    }

Output:

Adding "First" with priority 20
Adding "Second" with priority 3
Adding "Third" with priority 1
Adding "Forth" with priority 3
Adding "Fifth" with priority 2
Adding "Sixth" with priority 4

Queue Contents: <"Third":1,"Fifth":2,"Forth":3,"Second":3,"Sixth":4,"First":20> 
```

感谢您的帮助，尽管人们真的很感激:)

# java - 我无法运行任何不包含特定字符串的 java 文件

> ID：14888933
> 
> 赞同：-1
> 
> 时间：2013-02-15T05:41:43.993
> 
> 标签：java, maven, pom.xml

我看到一个奇怪的问题：我有大约 5 个用 java 编写的测试用例，并且我正在使用 maven 运行这些测试用例，但是如果类名不包含，我将无法运行任何测试用例（.java 文件）关键字“测试”。

因此，我可以执行任何包含“Test”的类名（例如 LoginTest），但不能执行任何没有“Test”的类名（例如 LoginModule）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:47:00.200

这不是奇怪的行为。这是一个 Maven 约定。测试类通过使用单词“Test”开始或结束类名来标识。与任何 Maven 约定一样，您可以通过为运行测试[的 surefire 插件提供配置来更改它。](http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:28:20.147

谢谢大家，更新 pom.xml 文件后，此问题已解决，如下所示：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
       <configuration>
          <includes>
            <include>**/*Page.java</include>
            <include>**/Page*.java</include>
            <include>**/*Test.java</include>
            <include>**/Test*.java</include>
         </includes>
      <redirectTestOutputToFile>true</redirectTestOutputToFile>
       </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:48:25.223

重命名您的测试类可能是最简单的。

否则，使用 surefire 插件，您可以指定要包含的测试用例。默认情况下，它具有以下规则：

> 默认情况下，Surefire 插件会自动包含所有具有以下通配符模式的测试类：
> 
> `"**/Test*.java"`- 包括其所有子目录和所有以“Test”开头的 java 文件名。 `"**/*Test.java"`- 包括其所有子目录和所有以“Test”结尾的 java 文件名。 `"**/*TestCase.java"`- 包括其所有子目录和所有以“TestCase”结尾的 java 文件名。

如果您愿意，也可以包含一个特定的包：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.13</version>
    <configuration>
      <includes>
        <include>**/package/*.java</include>
      </includes>
    </configuration>
  </plugin> 
```

[http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html](http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html)

# c# - 如何使用 C# 在运行时将值发送到 XML 文件

> ID：14888935
> 
> 赞同：1
> 
> 时间：2013-02-15T05:42:11.853
> 
> 标签：c#, xml

我想使用用户在文本框中给出的值作为 XMl 文件中 TestMode 的值。XML 文件如下所示。

```
<appSettings>
    <add key="SaveWindowItemsMap" value="true"/>
    <add key="TestMode" value=""/>
</appSettings> 
```

该值将在运行时由用户（在文本框中）给出，并且不应在 XML 文件中更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T05:52:01.420

你可以试试这个：

这是修改应用程序设置值的代码示例：

```
XmlDocument xmlDoc = new XmlDocument();

xmlDoc.Load(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);

foreach (XmlElement element in xmlDoc.DocumentElement)
{
    if (element.Name.Equals("appSettings"))
    {
        foreach (XmlNode node in element.ChildNodes)
        {
            if (node.Attributes[0].Value.Equals("SaveWindowItemsMap"))
            {
                node.Attributes[1].Value = "New Value";
            }
        }
    }
}

xmlDoc.Save(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);

ConfigurationManager.RefreshSection("appSettings"); 
```

我假设您要更新“SaveWindowItemsMap”值。

# html - 从 xml 文件中提取 xslt:text 作为可点击链接的文本

> ID：14888938
> 
> 赞同：1
> 
> 时间：2013-02-15T05:42:27.003
> 
> 标签：html, xml, xslt, xslt-1.0

所以我正在尝试使用 xml 和 xslt 文件创建一个站点地图。

我希望站点地图的 URL 在显示时可以点击（对此非常新）......据我所知：

```
<h3>Sitemap</h3>
<xsl:for-each select="urlset/url">
<p>
    <xsl:element name="a">
    <xsl:attribute name="href">
        <xsl:value-of select="loc"/>
    </xsl:attribute>
    <xsl:text>Link</xsl:text>
    </xsl:element>
</p>
</xsl:for-each> 
```

任何知道如何将“链接”一词更改为其指向的站点地址的 URL？同时仍然保留超链接？

我已经尝试过：

```
<h3>Sitemap</h3>
<xsl:for-each select="urlset/url">
<p>
    <xsl:element name="a">
    <xsl:attribute name="href">
        <xsl:value-of select="loc"/>
    </xsl:attribute>
    <xsl:text><xsl:value-of select="loc"/></xsl:text>
    </xsl:element>
</p>
</xsl:for-each> 
```

但我得到一个错误:(

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:20:28.123

该`<xsl:text>`元素[不能有任何子元素](http://msdn.microsoft.com/en-us/library/ms256107.aspx)。尝试`<xsl:text>`从 around 移除元素`<xsl:value-of select="loc"/>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:16:35.337

您不需要额外`<xsl:text>`标签，因为[`<xsl:value>`已经创建了一个文本节点](http://www.w3.org/TR/xslt#value-of)：

> xsl:value-of 元素被实例化以在结果树中创建一个文本节点。

此外，正如[@eero-helenius](https://stackoverflow.com/a/14889915/802365)已经说过的那样`<xsl:text>`，它不接受子元素。

# cakephp - 在 CakePHP 中，多选框不会根据传递的数组进行多选

> ID：14888939
> 
> 赞同：2
> 
> 时间：2013-02-15T05:42:31.727
> 
> 标签：cakephp, cakephp-2.1, drop-down-menu

问题是我无法根据我在表单助手中使用的数组在多选框中进行多项选择。从控制器我已将一个名为 $selected_colors 的数组传递给视图。如下图所示完成 -

```
$this->set(compact('colors', 'selected_colors')); 
```

在`debug($selected_colors);`$selected_colors 上是下面给定的数组-

```
array(
(int) 0 => '1',
(int) 2 => '20',
(int) 4 => '21'
) 
```

我在视图中使用的表单助手如下所示 -

```
$this->Form->input('MasterArticle.0.color_id', array('type' => 'select', 'multiple' => true, 'options' => $colors, 'label' => false, 'class' => 'input-xlarge', 'selected' => $selected_colors)); 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:38:07.413

这很可能是 CakePHP < 2.3.1 中的一个已知错误。我也偶然发现了它。它已在 CakePHP 2.3.1 中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T06:54:23.043

使用下面给出的默认关键字：

```
<?php echo $this->Form->input('Article.tags',array('options'=>$tags,'type'=>'select','label'=>'TDSP','class'=>'distributeSelect','multiple'=> 'true','selected' => $selected));?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T05:16:39.560

试试这个代码：

```
$this->Form->input('MasterArticle.0.color_id', array('type' => 'select', 'multiple' => true, 'options' => $colors, 'label' => false, 'class' => 'input-xlarge', 'default' => $selected_colors)); 
```

如果这个答案是正确的，请投票

# python - 我可以就地克隆一个 xml 节点吗？

> ID：14888941
> 
> 赞同：2
> 
> 时间：2013-02-15T05:42:32.897
> 
> 标签：python, xml, python-3.x, deep-copy

对 Python 来说有点新手，对 xml 来说更是如此，所以请多多包涵:)

我有一个现有的 xml 文件，其结构如下。我想克隆任何`<Zone>`匹配的节点`<name>.text == "Bill"`或我指定的任何节点。

我尝试循环并使用`elem.append(copy.deepcopy(---))`，但最后我添加了节点，然后添加到我的循环中 - 不用说它运行了一段时间！

我可以轻松地做到这一点，还是必须将所有内容都写入另一个文件？我会添加代码，但担心它会被破坏并且会使事情复杂化！

希望我已经把问题说清楚了。

```
<DBname>  
    <Level_1>  
        <Zone>  
            <name>Fred</name>  
            <att1>xxx</att1>  
            <att2>yyy</att2>  
        </Zone>  
        <Zone>  
            <name>Bill</name>  
            <att1>111</att1>  
            <att2>222</att2>  
        </Zone>  
        <Zone>  
            <name>Bob</name>  
            <att1>333</att1>  
            <att2>444</att2>  
        </Zone>  
    </Level_1>  
</DBname> 
```

好的，我可能已经制定了解决方案，但欢迎任何评论/改进。

这不起作用。附加的项目填充了“for”循环：

```
from lxml import etree as ET
import copy

tree = ET.parse(xml_file)
root  = tree.getroot()
for elem in root:
    for source in elem:
        if source.find('name').text == "Bill":
            elem.append(copy.deepcopy(source)) 
```

这似乎确实有效：

```
from lxml import etree as ET
import copy

tree = ET.parse(xml_file)
root  = tree.getroot()
for elem in root:
    for zone in elem.findall('Zone'):
        if zone.find('name').text == "Bill":
            elem.append(copy.deepcopy(zone)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:14:05.647

您的第二次尝试看起来是正确的。问题是您在尝试迭代对象时正在修改它。

在 的情况下`for source in elem`，它似乎`lxml`懒惰地迭代子节点，因此在`lxml`到达末尾之前添加的任何新节点都包含在迭代中。通过使用`.findall`，您可以获得不受后续更改影响的后代的新列表`elem`。

请注意，您的工作代码现在具有不同的语义；它会找到*所有*后代`Zone`标签，而不仅仅是孩子。给定您的架构，这可能无关紧要，但您已经知道您不需要它是额外的工作。

您可以通过以下方式修复第一次尝试：

```
for source in list(elem): 
```

这会创建一个单独的子节点列表，因此修改`elem`是安全的并且不会影响循环。

如果您想明确地将循环限制为`Zone`s：

```
for source in list(elem.iter('Zone')): 
```

# embedded - 串行外设接口

> ID：14888946
> 
> 赞同：1
> 
> 时间：2013-02-15T05:43:26.833
> 
> 标签：embedded, master-slave, spi

我正在浏览一篇与 SPI 相关的文章。在多个从站的情况下，有一个名为“菊花链”的配置。

到目前为止，我对 SPI（基于维基百科）的理解是，

SPI 可以同时传输和接收一些数据。

我的问题是，

1）如果有多个从设备，是指在与多个从设备的连接中将数据传输到多个从设备，还是将数据传输到其中一个从设备？

2）根据[这个链接](http://www.maximintegrated.com/app-notes/index.mvp/id/3947)图4，假设主机保持其SS低，直到它需要发送到3个从设备的所有数据都发送完毕，然后将引脚拉高。如果是这样，主设备最后从哪个从设备接收什么数据？

3）如[本链接](http://www.mikroe.com/chapters/view/67/chapter-4-at89s8253-microcontroller/)中给出的，在增强模式下，检查加载启用（LDEN）和WCOL是否将下一个字节移动到缓冲区中。为什么我们需要同时检查它们？WCOL 还不够吗？

4）给定，`Master configures the clock - frequency less than or equal to the maximum frequency the slave device supports. Such frequencies are commonly in the range of 1–100 MHz.`主设备如何找到从设备的时钟频率？

5) SPSR、SPCR 和 SPDR 寄存器是否保留在主机和从机中？

6) 假设在传输完成后设置SPIF标志。如果SPIE 也被使能，则产生中断。主从都设置了标志吗？主从都产生中断吗？

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:03:09.057

1) 一个或多个从机的任意组合同时（在 /CS 的上升沿）。

2）把从机的组合看成一个大的移位寄存器。假设三个从机中的每一个都有一个 8 位寄存器，总共 24 位。主机将输出 24 位，前 8 位将输入最后一个从机，第二个 8 位输入第二个从机，最后 8 位输入第一个从机。当 /CS 被取消断言（上升沿）时，每个从机中的数据被接受，因此只有那些在数据时钟期间具有 /CS 低电平的从机会受到影响。

# google-app-engine - 导入 urlfetch 在 Jython Google App Engine 上不起作用

> ID：14888947
> 
> 赞同：1
> 
> 时间：2013-02-15T05:43:30.920
> 
> 标签：google-app-engine, jython, urlfetch

我在 Google App Engine 上使用 Jython，但无法让“import urlfetch”工作。'import sys' 和 'import zlib' 等其他导入工作，但不是 'import urlfetch'。我收到 500 服务器错误。我究竟做错了什么？

我的仪表板日志中的错误消息是：

1)`javax.servlet.ServletContext log: debug: Callable object not in cache`

2) 错误`/java.lang.ExceptionInInitializerError`

3）嵌套在`java.lang.ExceptionInInitializerError:java.security.AccessControlException:access`拒绝（java.lang.RuntimePermission modifyThreadGroup）

4) servlet 未捕获的异常

```
java.lang.ExceptionInInitializerError 
```

我还尝试将 threadsafe 切换为 false 和 true，但似乎都没有任何效果（我在某处看到 jython 和 threadsafe=TRUE 可能存在问题）。

感谢你给与我的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:15:50.030

你有没有尝试过：

```
from google.appengine.api import urlfetch 
```

从此：

> 您可以使用 Python 标准库 urllib、urllib2 或 httplib 来发出 HTTP 请求。在 App Engine 中运行时，这些库使用 App Engine 的 URL 获取服务执行 HTTP 请求，该服务在 Google 的可扩展 HTTP 请求基础架构上运行。

我读到这不是 GAE 中使用的“正常”urlfetch。

[https://developers.google.com/appengine/docs/python/urlfetch/overview](https://developers.google.com/appengine/docs/python/urlfetch/overview)

# ios - Facebook apprequests 现在显示在应用中心而不是通知中

> ID：14888949
> 
> 赞同：2
> 
> 时间：2013-02-15T05:43:34.120
> 
> 标签：ios, facebook, facebook-graph-api, facebook-app-requests

我们将 facebook 用户发送到来自 ios 应用的用户应用请求。之前它们出现在用户 facebook 页面的通知部分，但现在它们开始出现在应用中心->请求部分。用户不会注意到它们。

Facebook 应用程序配置为具有 Facebook 登录和本机 iOS 应用程序的网站。

我们如何切换回以前的行为？

# python - python本地范围

> ID：14888950
> 
> 赞同：1
> 
> 时间：2013-02-15T05:43:34.287
> 
> 标签：python, local

运行此代码：

```
import re
regex = re.compile("hello")
number = 0
def test():
  if regex.match("hello"):
    number += 1

test() 
```

产生此错误：

```
Traceback (most recent call last):
  File "test.py", line 12, in <module>
    test()
  File "test.py", line 10, in test
    number += 1
UnboundLocalError: local variable 'number' referenced before assignment 
```

为什么我可以`regex`从函数内部引用，但不能`number`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:54:45.000

因为您正在定义一个`number`在函数内部调用的新变量。

这是您的代码有效执行的操作：

```
def test():
    if regex.match("hello"):
        number = number + 1 
```

当 Python 第一次编译这个函数时，它一看到`number =`，就会`number`变成一个本地的。`number`对该函数内部的任何引用，*无论它出现在何处*，都将引用新的本地。全局被遮蔽。因此，当函数实际执行并且您尝试计算`number + 1`时，Python 会查询尚未分配值的*local 。* `number`

这完全是由于 Python 缺少变量声明：因为你没有显式声明局部变量，它们都是在函数*顶部*隐式声明的。

在这种情况下，您可以使用`global number`（在自己的行上）告诉 Python 您总是想引用全局`number`. 但首先避免需要它通常会更好。您想将某种行为与某种状态结合起来，而这正是对象的用途，因此您可以只编写一个小类并且只实例化一次。

# c++ - 如何比较同一对象的两个向量并获取其他元素

> ID：14888951
> 
> 赞同：3
> 
> 时间：2013-02-15T05:43:48.363
> 
> 标签：c++, vector

我想比较两个对象向量元素并相应地获取同一对象的其他向量元素。例如对象有一个向量； `foo1.a=[4 2 1 3] foo2.a=[2 1 4]` 我想找到相同的元素，然后相应地获取其他向量包含，例如`foo1.b=[8 8 2 10]`并`foo2.b=[8 2 8]`根据我从`foo.a`. 我试图比较循环中的两个向量，然后得到相同的结果，但我失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:50:22.010

给定两个向量：

```
std::vector<int> v1; // {4, 2, 1, 3};
std::vector<int> v2; // {2, 1, 4}; 
```

首先，[`sort`](http://www.cplusplus.com/reference/algorithm/sort/)两个向量，以便很容易找到共同的元素：

```
std::sort(v1); // {1, 2, 3, 4}
std::sort(v2); // {1, 2, 4} 
```

用于[`set_intersection`](http://www.cplusplus.com/reference/algorithm/set_intersection/)查找共同元素：

```
std::vector<int> vi;
std::set_intersection(v1.begin(), v1.end(), v2.begin(), v2.end(), vi.begin()); // {1, 2, 4} 
```

用于[`set_difference`](http://www.cplusplus.com/reference/algorithm/set_difference/)查找独特元素：

```
std::vector<int> vd;
std::set_difference(v1.begin(), v1.end(), v2.begin(), v2.end(), vd.begin()); // {3} 
```

# javascript - 在带有 ContentEditable 的页面中使用 Codemirror

> ID：14888955
> 
> 赞同：0
> 
> 时间：2013-02-15T05:44:06.630
> 
> 标签：javascript, jquery, codemirror

我正在创建一个嵌入 codemirror 实例并在页面上有一个 contenteditable 部分的页面。我的动机是在 codemirror 编辑器中显示 contentEditable 部分的 html 代码，并且每当用户在可编辑部分内单击时，codemirror 值都会更新。我面临的问题是，一旦用户在 contentEditable 部分内单击，更新编辑器值的代码就会运行 `editor.setValue(..content value from editable..)`，这会使 contentEditable 失去焦点，从而无法将数据添加到 contentEditable。

我该如何防止这种情况？这样用户就可以直接在 contentEditable 部分中添加文本，并且 codemirror 值会不断更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:09:34.300

您可以使用 CodeMirror 事件 onChange 将焦点返回到 contentEditable 部分。 [codemirror 手动部分事件](http://codemirror.net/doc/manual.html) 在 codemirror 编辑器中发生任何更改后都会触发此事件。

```
var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
                lineNumbers: true, 
                matchBrackets: true,  
                onChange: function(instance, changeObj) {
                    //  loose focus here                 
                }  
        }); 
```

如果我正确理解您，每次用户更改 contentEditable 中的某些内容时，都会使用 editor.setValue 函数替换整个 codeMirror 编辑器内容。您可以使用 changeObj 属性 - from 和 to，以指示是否替换了整个内容并仅在更改来自 contentEditable 时才重新获得焦点。这可以防止在 codemirror 编辑器中失去对用户所做更改的关注。

# php - preg_replace 在使用大量空格时返回空字符串

> ID：14888957
> 
> 赞同：0
> 
> 时间：2013-02-15T05:44:12.170
> 
> 标签：php, regex, preg-replace

我知道[不建议使用 reg-ex 解析 XML / HTML](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)，但我正在尝试做这个简单的事情：

```
<?php
echo phpversion()."<br><br>";

$test_1 = '<Tag attr="attr_value">Tag_value</Tag>';
$test_2 = $test_1.str_repeat(' ',1000);
$test_3 = $test_1.str_repeat(' ',2000);

$match = '!<(.*?) (.*?)="(.*?)">!';
$replace = '<\\2>\\3</\\2><\\1>';

$output_1 = preg_replace($match, $replace, $test_1);
$output_2 = preg_replace($match, $replace, $test_2);
$output_3 = preg_replace($match, $replace, $test_3);

echo "xml: ".htmlspecialchars($test_1)."<br>";
echo "1: ".htmlspecialchars($output_1)."<br>";
echo "2: ".htmlspecialchars($output_2)."<br>";
echo "3: ".htmlspecialchars($output_3)."<br>";
?> 
```

我的意思是，将一个属性及其值放在容器标签之外。在 test_1 和 test_2 示例中一切正常，但如果我在 test_3 中添加更多空格，则返回字符串为空。有人可以试试这个代码吗？

在此示例中，它可以添加 1411 个空格。再来一张 (1412) 并没有...

我已经在 5.3.8 和 5.3.19 PHP 版本上进行了测试。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:57:44.760

使用此正则表达式，它将正常工作：

```
$match = '!<([^ ]+) ([^=]+)="(.*?)">!'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:58:10.110

从命令行在 PHP 4.4.8 上对我来说工作正常。你的表达似乎非常低效。可能它会导致某种错误，例如内存不足，因此 preg_replace 返回`NULL`这意味着“错误”。这是您的表达式的优化版本：

```
<(\S*?) (\S*?)="([^"]*?)"> 
```

# jquery - 在花式框中提交联系表格

> ID：14888959
> 
> 赞同：0
> 
> 时间：2013-02-15T05:44:21.553
> 
> 标签：jquery, fancybox, form-submit, contact

我在 FancyBox 2 模式窗口中打开了一个联系表单。但是当您提交表单时，当前页面会刷新并且联系表单会消失。

您可以通过单击主菜单中的**支持来检查**[我的站点](http://magichome.doubledot.in/)中的此错误

 **这是我的代码，

```
$(document).ready(function() {
    $(".various").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    });
}); 
```

这是我的联系表格链接，

```
<a href="formhome.php" class="menu-support fancybox.ajax">Support</a> 
```

谁能告诉我如何在不重新加载页面的情况下在花哨的框中提交我的联系表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:00:22.060

你需要的是[jquery ajax](http://api.jquery.com/jQuery.ajax/)

**jQuery**

```
$('#idOfcontactForm').submit(function(){
   $.ajax({
     url:"yourpage.php", // action of the form ,
     data:$(#contactform).serialize(), // send forms data to server
     dataType:"json", // take response as json
     type:"post", //send form by post or get
     success:function(result){
       alert(result.msg);
    }
   });
    return false;  // default submit return false
 }); 
```

**PHP(你的页面.php)**

```
 //manupulate you submited data..
  // if using post you can get data by $_POST;
  echo json_encode(array('msg'=>"successfully saved"); 
```**

# javascript - 使用 jQuery 清理代码注入

> ID：14888968
> 
> 赞同：2
> 
> 时间：2013-02-15T05:45:12.303
> 
> 标签：javascript, jquery

我正在使用注释框并使用 ajax 将值插入 mysql。同时，我将使用 jQuery 输入的评论附加到同一页面。问题是如果输入的文本是一些 JavaScript 代码，比如

```
<script>alert('hello');</script> 
```

它显示警报。在我的数据库中，我清理了这些代码，但由于我将其附加到客户端，因此我需要按原样显示输入的文本。

嗯，我用，

```
<div contenteditable="true"></div> 
```

请问有什么即时的帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:48:38.073

以下代码片段 HTML 将字符串编码为：

```
"&lt;div&gt;Here is an HTML&lt;/div"

$("p").text("<div>Here is an HTML</div").html() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:37:15.203

我用了这个方法！

```
str.replace(/</g, "&lt;");
str.replace(/>/g, "&gt;"); 
```

# iphone - 如何在 IOS 中从 NSDictionary 获取图像数组

> ID：14888969
> 
> 赞同：1
> 
> 时间：2013-02-15T05:45:17.803
> 
> 标签：iphone, ios, xcode, web-services

我想获取具有配方 ID 的所有图像的数组，并希望将此图像数组传递给下一个 viewController，但我的问题是我只得到一个图像，我使用 recipeDC 作为实体类，对于所有图像的数组，我应该使用另一个实体类或者也可以使用同一个类来完成，我该怎么办，我卡住了请帮助我，

```
-(NSMutableArray *)getAllRecipiesByUserId:(RecipeDC *)recipeid
{
    NSMutableArray *dataArray = [[NSMutableArray alloc] init];

     NSString *url = [NSString stringWithFormat:@"%@get_all_recipies_by_user_id&user_id=%d",kWSURL,recipeid.user_id];

    NSDictionary * returnDict = (NSDictionary *) [self callWebService:url];
    if([returnDict objectForKey:@"response"])
    {
        NSDictionary * returnDictSuccess = (NSDictionary *) [returnDict objectForKey:@"response"];
        NSArray *returnedDealArray = [returnDictSuccess objectForKey:@"recipies"];

        RecipeDC *recpie = [[RecipeDC alloc] init];
        for(NSDictionary *dealDict in returnedDealArray)
        {

            recpie.recipe_id=[[dealDict objectForKey:@"recipe_id"]intValue ];
            recpie.category_id=[[dealDict objectForKey:@"category_id"]intValue ];
            recpie.user_id=[[dealDict objectForKey:@"user_id"]intValue ];
            recpie.recipe_name = [dealDict objectForKey:@"recipe_name" ];
            recpie.recipe_detail = [dealDict objectForKey:@"recipe_detail"];

            NSArray *img = [dealDict objectForKey:@"images"];

           for(NSDictionary *dealDict in img)
            {
               recpie.recipie_img_id=[[dealDict objectForKey:@"recipe_images_id"]intValue];
                recpie.recipe_id=[[dealDict objectForKey:@"recipe_id"]intValue];
                recpie.recipie_img_url=[dealDict objectForKey:@"image_url"];

           }
            [dataArray addObject:recpie];
        NSLog(@"arr count is %u",[dataArray count]);

        }
    }
    return dataArray;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:49:13.290

你已经完成了

```
RecipeDC *recpie = [[RecipeDC alloc] init];
    for(NSDictionary *dealDict in returnedDealArray)
    { 
```

它应该是

```
 for(NSDictionary *dealDict in returnedDealArray)
    {
       RecipeDC *recpie = [[RecipeDC alloc] init]; 
```

循环内..

**已编辑** 要获取图像数组，您可以保存您正在执行的整个数组字典

```
NSArray *img = [dealDict objectForKey:@"images"];

       for(NSDictionary *dealDict in img)
        {
           recpie.recipie_img_id=[[dealDict objectForKey:@"recipe_images_id"]intValue];
            recpie.recipe_id=[[dealDict objectForKey:@"recipe_id"]intValue];
            recpie.recipie_img_url=[dealDict objectForKey:@"image_url"];

       } 
```

相反，将 RecipeDC 类中的属性声明为 NSArray *images; 只需执行以下操作

```
recpie.images=[dealDict objectForKey:@"images"]; 
```

# java - 无法为对话框设置视图

> ID：14888974
> 
> 赞同：0
> 
> 时间：2013-02-15T05:45:49.903
> 
> 标签：java, android, eclipse, dialog, android-alertdialog

请看下面的代码

用于创建自定义对话框的代码。这个类是一个动作类`AlertDialog`。当用户单击该按钮上的“是”按钮时`AlertDialog`，该类将被触发。私有类 PositiveDialogBtnAction 实现 DialogInterface.OnClickListener {

```
 @Override
        public void onClick(DialogInterface arg0, int arg1) {
            // TODO Auto-generated method stub
            //Toast.makeText(getApplicationContext(), databaseConnector.getStreetAddress(selectedBranch), Toast.LENGTH_LONG).show();

            Dialog dialog = new Dialog(getApplicationContext());
            dialog.setContentView(R.layout.activity_call_dialog);
            dialog.setTitle("Select a Phone Number");

            dialog.show();
        }

    } 
```

**activity_call_dialog.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".CallDialog" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

**CallDialog.java**

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class CallDialog extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_call_dialog);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_call_dialog, menu);
        return true;
    }

} 
```

当我尝试运行自定义对话框时，出现以下错误

```
02-15 11:04:02.170: E/AndroidRuntime(585): FATAL EXCEPTION: main
02-15 11:04:02.170: E/AndroidRuntime(585): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
02-15 11:04:02.170: E/AndroidRuntime(585):  at android.view.ViewRoot.setView(ViewRoot.java:531)
02-15 11:04:02.170: E/AndroidRuntime(585):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
02-15 11:04:02.170: E/AndroidRuntime(585):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-15 11:04:02.170: E/AndroidRuntime(585):  at android.app.Dialog.show(Dialog.java:241)
02-15 11:04:02.170: E/AndroidRuntime(585):  at com.example.esoftcallmanager.Form$PositiveDialogBtnAction.onClick(Form.java:155)
02-15 11:04:02.170: E/AndroidRuntime(585):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
02-15 11:04:02.170: E/AndroidRuntime(585):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-15 11:04:02.170: E/AndroidRuntime(585):  at android.os.Looper.loop(Looper.java:123)
02-15 11:04:02.170: E/AndroidRuntime(585):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-15 11:04:02.170: E/AndroidRuntime(585):  at java.lang.reflect.Method.invokeNative(Native Method)
02-15 11:04:02.170: E/AndroidRuntime(585):  at java.lang.reflect.Method.invoke(Method.java:507)
02-15 11:04:02.170: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-15 11:04:02.170: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-15 11:04:02.170: E/AndroidRuntime(585):  at dalvik.system.NativeStart.main(Native Method)
02-15 11:04:05.520: I/Process(585): Sending signal. PID: 585 SIG: 9 
```

为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:47:53.133

采用

```
Dialog dialog = new Dialog(CallDialog.this); 
```

代替

```
Dialog dialog = new Dialog(getApplicationContext()); 
```

因为要显示 Dialog 你需要传递 Activity Context 而不是 Application

# c# - 当第二次单击 GridView 时，页面加载函数未调用

> ID：14888975
> 
> 赞同：0
> 
> 时间：2013-02-15T05:45:59.743
> 
> 标签：c#, asp.net, sql-server-2008-r2

错误信息

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，动态添加控件时，在回发过程中添加的控件必须与 cont 的类型和位置相匹配

问题是在*GridView上第二次单击时没有调用***Pageload**函数。*GridView*列是链接按钮。它有多个带有链接按钮的列。单击 gridview 时，它将重定向到链接按钮功能。

 **对于第一次单击它的工作正常，问题在于第二次单击。

如果页面加载被调用，我的问题就解决了。
我尝试通过谷歌搜索，我无法找到解决方案。帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:24:53.960

如果你想在每次页面重新加载时执行一段代码，那么不要写如下代码

```
if(!isPostBack)
{ //code } 
```

不要写在 !IsPostBack

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:28:41.680

如果您不需要它，请尝试将托管您的控件的 PlaceHolder 设置为 EnableViewState="False"，否则请检查[Failed to load viewstate。视图状态被加载到的控制树](https://stackoverflow.com/questions/11795994/failed-to-load-viewstate-the-control-tree-into-which-viewstate-is-being-loaded)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:02:49.040

您提到的错误发生在您动态添加控件时。似乎您在第一个 PortBack 上添加了一些控件。

此后，Asp.net 需要您在每个 PostBack 上重新添加控件。添加这些的最佳位置是`Init`.

如果 ViewState 中的控制树与您在上一个响应中发送的控制树不匹配，您将收到错误消息。`Load`除非您解决此问题，否则之前调用 LoadViewState`Load`不会触发。

参考：[Asp.net 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)**

# java - 使用 Lucene 索引 zip 文件

> ID：14888979
> 
> 赞同：0
> 
> 时间：2013-02-15T05:46:20.463
> 
> 标签：java, lucene

是否可以在 lucene 中索引压缩文件夹。如果我解压缩它，内容太大。如果我只是索引一堆包含文本文件的压缩文件夹，则 serach 无法正常工作。lucene 是否可以在不提取 zip 文件的情况下进行索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:09:21.493

Lucene 只是一个搜索库，它不可能“知道”所有可能的场景——例如如何索引 XML 文档、word 文件、.zip 中的文件、切尔诺贝利核电站创建的文件等。

但是 Lucene[的作用是提供 API](http://lucene.apache.org/core/4_1_0/analyzers-common/org/apache/lucene/analysis/standard/StandardAnalyzer.html)让您将数据挂接到 Lucene。

如果无法解压缩存档文件的内容，您可以编写一个类来[读取 zip 文件](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipInputStream.html)（但不会将其解压缩到磁盘上）并将此数据提供给 Lucene。

如果您主要关心的是索引的大小，那么您无法做任何事情来减少它。不过有一些提示：

*   尝试不使用停用词进行索引
*   不存储字段，只索引它们（提示：[Field.Store.NO](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/document/Field.Store.html)）
*   总是小写所有术语以减少术语计数

# vb.net - 在调用方法中不使用 Await 启动异步任务

> ID：14888984
> 
> 赞同：3
> 
> 时间：2013-02-15T05:46:49.810
> 
> 标签：vb.net, windows-runtime, multitasking, windows-store

具有长时间运行方法的窗口商店应用程序，我需要在应用程序启动时调用它，但我不需要等待它完成。我希望它作为后台任务运行。如果转到应用程序的某个部分（报告），那么我将检查并在必要时等待该任务。

```
Public Shared Async Function UpdateVehicleSummaries(p_vehicleID As Int32) As Task(Of Boolean)
    Dim tempVehicle As Koolsoft.MARS.BusinessObjects.Vehicle

    For Each tempVehicle In Vehicles
        If p_vehicleID = 0 Or p_vehicleID = tempVehicle.VehicleID Then
            UpdateVehicleStats(tempVehicle)
        End If
    Next

    Return True

End Function 
```

它是这样称呼的

```
Dim updateTask As Task(Of Boolean) = UpdateVehicleSummaries(0) 
```

它没有 Await 调用，我收到警告说它将同步运行。我如何开始这样的事情并让它异步运行？我希望它在自己的线程/任务上运行而不阻塞接口线程。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T06:01:39.103

你应该在你的函数中运行代码，`Task`然后你可以从中返回：

```
Public Shared Function UpdateVehicleSummaries(p_vehicleID As Int32) As Task(Of Boolean)

    Return Task.Factory.StartNew(Of Boolean)(
        Function()
            Dim tempVehicle As Koolsoft.MARS.BusinessObjects.Vehicle

            For Each tempVehicle In Vehicles
                If p_vehicleID = 0 Or p_vehicleID = tempVehicle.VehicleID Then
                    UpdateVehicleStats(tempVehicle)
                End If
            Next

            Return True
        End Function)

End Function 
```

然后，您可以按照您的建议调用您的函数：

```
Dim updateTask As Task(Of Boolean) = UpdateVehicleSummaries(0) 
```

稍后您可以在需要结果时等待任务完成：

```
Dim result = Await updateTask 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-15T21:30:52.647

我认为这是一个更简单的解决方案，更容易阅读

```
Public Shared RunningTask As Task

Public Shared Sub CallingSub()
    'No need for sub to be async but can be async if needed for other reasons (see below)
    'but that doesn't stop the execution in the CallingSub
    'Get the task started... it's not going to wait for the task to be done just sets the task variable
    RunningTask = UpdateVehicleSummaries(0)

    'if a parameter comes from a function it may look like this
    'note that if you do this then the CallingSub would need the async keyword
    RunningTask = UpdateVehicleSummaries(Await FunctionReturnInt32())

    'Do stuff that does not require task to be done

End Sub
Public Shared Async Sub UseTaskResults()
    'Must be async so you can await the result
    Await RunningTask
    'Do stuff that requires task to be done
End Sub

Public Shared Function UpdateVehicleSummaries(p_vehicleID As Int32) As Task
    'No need for this function to be async since the function has no await
    Dim tempVehicle As Koolsoft.MARS.BusinessObjects.Vehicle

    For Each tempVehicle In Vehicles
        If p_vehicleID = 0 Or p_vehicleID = tempVehicle.VehicleID Then
            UpdateVehicleStats(tempVehicle)
        End If
    Next
End Function 
```

# c++ - 谁能解释一下这个特定的打印语句在 for 循环中做了什么？

> ID：14888986
> 
> 赞同：3
> 
> 时间：2013-02-15T05:46:59.033
> 
> 标签：c++, arrays

```
int a[] = { 1, 2, 3, 4, 5 };
const int N = sizeof(a)/sizeof(a[0]);
cout<<N<<endl;

for (int i = 0; i < N; ++i)
{
    cout << (i[a-i]%N)[a+i-1] << " ";
} 
```

//它打印 1 2 3 4 5 即我不理解的数组是 cout << (i[ai]%N)[a+i-1] << " ";

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T05:56:01.787

这就是 CBCPAT，令人困惑但正确的指针算术技巧。

由于 C++（和 C）中的数组订阅是使用指针算术完成的，如果`a`是一个数组并且`i`是索引（一个整数），那么

```
a[i] 
```

相当于

```
*(a + i) 
```

并且由于加法是可交换的，这与

```
*(i + a) 
```

这又可以写成

```
i[a] 
```

即你用数组索引整数（WTH？）。

了解了这一点后，您可以轻松地重写代码以了解它的作用：它等效于

```
(a + i - 1)[(a - i)[i] % N] 
```

这只是

```
(a + i - 1)[1 % N] 
```

反过来

```
(a + i - 1)[1 % 5], 
```

那是

```
*(a + i - 1 + 1) 
```

这是

```
a[i] 
```

瞧。搞砸写这个废话的程序员。

# php - 在没有命令行的情况下设置 websocket

> ID：14888990
> 
> 赞同：16
> 
> 时间：2013-02-15T05:47:03.530
> 
> 标签：php, websocket, phpwebsocket

如何在不使用命令行的情况下按照这样的教程进行操作？

[http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/)

我需要能够使用 websockets 但有一个共享服务器并且无法访问命令行。

我不能简单地从浏览器运行脚本，如果在我关闭浏览器/断开互联网连接时脚本会停止运行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-22T20:29:17.573

假设您的共享主机提供商支持 crontab 和 cron 作业（大多数都支持），请将以下作业添加到 crontab：

```
@reboot nohup php /path/to/server.php 2>&1 >/dev/null & 
```

此外，您需要立即启动它，因此只需在浏览器中创建以下 PHP 文件并访问它一次：

```
<?php shell_exec('nohup php /path/to/server.php 2>&1 > /dev/null &');?> 
```

这应该够了吧。希望您的共享主机提供商允许进行*execve()*调用。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:19:33.167

那么尝试在浏览器上运行 Server.php。大多数时候 php-cli-script 在浏览器上也可以正常工作（直到使用一些仅命令行功能，如 argv/argc 等）。在另一个浏览器的其他浏览器选项卡上，您可以运行通常的 URL，如给定教程中的屏幕截图。

一件重要的事情，请检查您的共享服务器上是否启用了套接字和其他必需的扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-22T07:43:16.213

`@reboot`直到刚才我才知道 CRON 的指令，所以@Octav O 解决方案可能要好得多。但是在测试时，我发现以下代码（在[Saran 的 websocket 教程](http://www.sanwebe.com/2013/05/chat-using-websocket-php-socket/comment-page-1#comment-2838)中找到）非常有用。

将其保存在与...`websocket_launch.sh`相同的目录中`server.php`

```
PID=`ps -aef | grep "server.php" | grep -v grep | awk '{print $2}'`
if [ -z $PID ]
then
    #echo "Launching now"
    nohup php server.php > error_log &
else
    #echo "Running as PID $PID"
fi 
```

...然后每分钟使用 CRON 运行 shell 脚本。该脚本检查 server.php 是否正在运行，如果没有，则启动它。

# javascript - 尼沃滑块 v3.1

> ID：14888992
> 
> 赞同：-1
> 
> 时间：2013-02-15T05:47:04.007
> 
> 标签：javascript, jquery, css

当我们将鼠标光标指向在滑块中运行的图像时，图像过渡停止。如何停止鼠标指针效果？我需要连续的图像过渡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:40:15.250

您需要将以下默认设置更改为 false，您可以如下更改

例如：

```
 $('#yourElement').nivoSlider({pauseOnHover: false}); 
```

更多在这里：

[nivo 滑块文档](http://dev7studios.com/nivo-slider/#/documentation)

# php - Magento 模块配置错误

> ID：14888994
> 
> 赞同：0
> 
> 时间：2013-02-15T05:47:10.823
> 
> 标签：php, magento

该模块用于添加客户地址属性。命名空间是 Thushara，模块名称是 New

属性名称是联系人

在管理面板中，模块显示为已激活，但未添加属性。

这是 \local\Thushara\New\etc\config.xml

```
<config>
<modules>
    <Thushara_New>
        <version>0.1.0</version>
    </Thushara_New>
</modules>
<frontend>
    <routers>
        <new>
            <use>standard</use>
            <args>
                <module>Thushara_New</module>
                <frontName>new</frontName>
            </args>
        </new>
    </routers>
    <layout>
        <updates>
            <new>
                <file>new.xml</file>
            </new>
        </updates>
    </layout>
</frontend>
<global>
    <models>
        <new>
            <class>Thushara_New_Model</class>
            <resourceModel>new_mysql4</resourceModel>
        </new>
        <new_mysql4>
            <class>Thushara_New_Model_Mysql4</class>
            <entities>
                <new>
                    <table>new</table>
                </new>
            </entities>
        </new_mysql4>
    </models>
    <resources>
        <new_setup>
            <setup>
                <module>Thushara_New</module>
                <class>Mage_Customer_Model_Entity_Setup</class>
            </setup>
            <connection>
                <use>core_setup</use>
            </connection>
        </new_setup>
        <new_write>
            <connection>
                <use>core_write</use>
            </connection>
        </new_write>
        <new_read>
            <connection>
                <use>core_read</use>
            </connection>
        </new_read>
    </resources>
    <blocks>
        <new>
            <class>Thushara_New_Block</class>
        </new>
    </blocks>
    <helpers>
        <new>
            <class>Thushara_New_Helper</class>
        </new>
    </helpers>
 </global>
 <global>
    <fieldsets>
        <sales_convert_quote_address>
                <contact>
                    <to_order_address>*</to_order_address>
                    <to_customer_address>*</to_customer_address>
                </contact>
        </sales_convert_quote_address>
        <customer_address>
                <contact>
                    <to_quote_address>*</to_quote_address>
                </contact>
        </customer_address>
    </fieldsets>
</global> 
```

这是 \local\Thushara\New\sql\new_setup\mysql4-install-0.1.0.php

![在此处输入图像描述](../Images/14e6eee38f60f3c15b8f4d5569fab445.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:14:23.627

您的配置看起来正确。如果您在创建安装脚本之前测试模块上的某些内容，通常会发生这种情况。检查 core_resource 表以查看您的模块是否已列出。如果是，请删除该行，清除缓存，然后刷新页面，它应该会触发安装脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:31:11.663

如果您在 core_resource 表中添加设置文件，您应该检查 eav_attribute 表中的新字段。

# android - Android 在来电时关闭媒体服务

> ID：14888995
> 
> 赞同：3
> 
> 时间：2013-02-15T05:47:43.690
> 
> 标签：android, service, media

我对android和java真的很陌生。我正在制作一个应用程序，它有一个媒体服务，我希望媒体在来电时停止或暂停。这是我的媒体服务代码

公共类 ServiceMusic 扩展服务 {

```
MediaPlayer music;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onDestroy() {
    super.onDestroy();
    music.stop();
    music.release();
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    if (music !=null)
    music.stop();

    music = MediaPlayer.create(ServiceMusic.this, R.raw.music);
    music.start();
    music.setLooping(true);
} 
```

}

如果你能帮助我，我将非常感激，如果你能给我一个完整的指导，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T05:58:26.193

您必须为来电创建接收器，如下所示：

```
public class call_reciver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        String number = "";
        Bundle bundle = intent.getExtras();

        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            // Phone is ringing
            number = bundle.getString("incoming_number");

        } else if (state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)) {
            // Call received

        } else if (state.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
            // Call Dropped or rejected

        }

    } 
```

在清单中放这个：

```
<receiver android:name=".call_reciver" >
            <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver> 
```

允许 ：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" >
    </uses-permission> 
```

使您的媒体播放器变量静态和全局，在接收器中调用另一个服务来检查您的媒体播放器是否正在运行。如果它正在运行，则停止它。您也可以使用相同的服务。

您必须从接收器启动服务：

```
Intent myIntent = new Intent(context, Service_temp.class);
        context.startService(myIntent); 
```

在服务中使用这个：

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        return super.onStartCommand(intent, flags, startId);
    } 
```

* * *

**检查编辑答案：**

在下面的示例中，我已经完成了所有事情。有一个按钮它会在服务中播放歌曲。那时您收到来电，然后它会停止您的服务（停止播放歌曲），当您拒绝或挂断电话时，它会再次开始播放歌曲

主要活动类：

```
package com.example.androidmediaplay;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void clickBtn(View v) {
        if (v.getId() == R.id.button1) {
            UtilClass.playing = true;
            Intent i = new Intent(MainActivity.this,
                    BackgroundSoundService.class);
            startService(i);
        }
    }

} 
```

背景声音服务类：

```
package com.example.androidmediaplay;

import java.io.File;

import android.app.Service;
import android.content.Intent;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Environment;
import android.os.IBinder;
import android.util.Log;

public class BackgroundSoundService extends Service {

    private static final String TAG = null;
    MediaPlayer player;

    public IBinder onBind(Intent arg0) {

        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        player = MediaPlayer.create(
                this,
                Uri.fromFile(new File(Environment.getExternalStorageDirectory()
                        + "/Songs/test.mp3")));
        player.setLooping(true); // Set looping
        player.setVolume(100, 100);

    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.e("onStartCommand", "onStartCommand");
        if (player.isPlaying()) {
            player.pause();
            UtilClass.pause = true;

            Log.e("onStartCommand pause", "onStartCommand pause");
        } else {
            UtilClass.pause = false;
            player.start();
        }

        return 1;
    }

    public void onStart(Intent intent, int startId) {
        // TO DO
    }

    public IBinder onUnBind(Intent arg0) {
        // TO DO Auto-generated method
        return null;
    }

    public void onStop() {

    }

    public void onPause() {

    }

    @Override
    public void onDestroy() {
        UtilClass.playing = false;
        player.stop();
        player.release();
    }

    @Override
    public void onLowMemory() {

    }

} 
```

呼叫接收类：

```
package com.example.androidmediaplay;

import android.app.ActivityManager;
import android.app.ActivityManager.RunningServiceInfo;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.telephony.TelephonyManager;
import android.util.Log;

public class call_reciver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        String number = "";
        Bundle bundle = intent.getExtras();

        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            // Phone is ringing
            number = bundle.getString("incoming_number");
            Log.e("incoming_number", "incoming_number");
            _stopServices(context);

        } else if (state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)) {
            // Call received

        } else if (state.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
            // Call Dropped or rejected
            _stopServices(context);
        }

    }

    private void _stopServices(Context con) {
        // TODO Auto-generated method stub
        if (UtilClass.playing == true) {
            Log.e("start services", "start services");
            Intent i = new Intent(con, BackgroundSoundService.class);
            con.startService(i);
        } else {
            Log.e("start not services", "start not services");
        }
    }

} 
```

静态成员的额外类：

```
package com.example.androidmediaplay;

public class UtilClass {

    public static Boolean playing = false;
    public static boolean pause = false;
} 
```

在最后一个清单文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidmediaplay"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.androidmediaplay.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service
            android:name=".BackgroundSoundService"
            android:enabled="true" >
        </service>

        <receiver android:name=".call_reciver" >
            <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

所有代码都在我这边工作。请检查并告诉我。