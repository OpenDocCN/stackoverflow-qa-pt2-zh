# StackOverflow 问答 12754000-12754999

# apache-camel - Apache Camel：如何向其他进程发出我移动/重命名文件的信号？

> ID：12754001
> 
> 赞同：2
> 
> 时间：2012-10-05T21:03:59.097
> 
> 标签：apache-camel

我正在尝试使用 Camel 开发文件接收流程。我想做的似乎很简单：

*   接收文件
*   调用将查看该文件并生成一些元数据的 Web 服务
*   根据该元数据将文件移动到新位置
*   调用后续进程，该进程将作用于新位置的文件

我尝试了几种不同的方法，但似乎没有一个能完全按照我的意愿工作。我的主要问题是，由于在路由完成之前不会移动/重命名文件，因此我无法向任何下游进程发出该文件在该路由中可用的信号。

我需要调用 web 服务来确定新的名称和位置，一旦我这样做了，主体就会改变，我不能使用文件生产者从路径中移动文件。

我真的很感激听到任何其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:15:46.623

您可以向处理路由发出信号，然后使用文件组件的 doneFile 功能让它们轮询。

您的第一个进程将复制文件，发出处理路径的信号，当它完成复制文件时，它将写入一个完成的文件。完成文件写入后，处理路径中的文件使用者将获取您要处理的文件。这保证了文件在处理之前被写入。

查看文件组件的“使用完成的文件”部分。

[http://camel.apache.org/file2.html](http://camel.apache.org/file2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:01:40.170

使用其他组件，您可以使用 OnCompletion DSL 语法来触发路由后消息以进行进一步处理。

但是，对于文件组件，这并不是真正可行的，因为移动/完成的事情与“OnCompletion”触发器并行发生，并且您不能确定文件是否真的完成了。

[您可能对Unit of Work API](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/spi/UnitOfWork.html)有一些运气，它可以注册路由后执行逻辑（这是在路由完成时 File 组件触发移动的方式）。

但是，你真的需要这个逻辑吗？我看到您可能想向某个文件使用者发送唤醒呼叫，但是文件真的必须准备好毫秒吗？收到触发消息后，您就不能开始轮询文件并在准备好后抓取它吗？这通常是您使用基于文件的协议执行操作的方式（或者只是不时地忽略触发器并轮询一次）。

# xml - XML 架构问题：重复元素不重复

> ID：12754003
> 
> 赞同：1
> 
> 时间：2012-10-05T21:04:04.377
> 
> 标签：xml, xsd

我有一个非常标准的 xml 模式，它定义了一个应该重复的名为“part”的元素。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="part">
  <xs:complexType>
   <xs:sequence>
   <xs:element name="part_number" type="xs:string"/>
   <xs:element name="price" type="xs:decimal"/>
  </xs:sequence>
 </xs:complexType>
</xs:element>

</xs:schema> 
```

问题是，当我使用此模式导出价目表时，我得到以下信息：

```
<?XML version="1.0" encoding="UTF-8" standalone="yes"?>
<part>
<part_number>10-000</part_number>
<price>151.8</price>
</part> 
```

当我想要多个`<part>`元素时。我在哪里搞砸了架构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:19:52.830

```
 <xs:element name="parts">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="part" maxOccurs="unbounded" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="part_number" type="xs:string"/>
              <xs:element name="price" type="xs:decimal"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

[http://www.w3schools.com/schema/schema_example.asp](http://www.w3schools.com/schema/schema_example.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:09:20.683

您的元素需要 maxOccurs="unbounded" 因为 maxOccurs 的默认值为 1。

```
<xs:element name="part" maxOccurs="unbounded"> 
```

# jquery - 从 Jquery 进行 Ajax 调用的最佳方式

> ID：12754005
> 
> 赞同：1
> 
> 时间：2012-10-05T21:04:08.890
> 
> 标签：jquery, ajax

我正在尝试像这样使用 AJAX 加载页面，我对 Jquery 和 ajax 非常陌生，请让我知道我在这里犯了什么错误，我总是得到错误页面。

```
<html>
<head>
   <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<div id="ajax-panel">

</div>
<script>
$.ajax({
  url: 'http://www.cnn.com',
   success:function(data){
   alert(data);
  },
  error:function(){
    // failed request; give feedback to user
    $('#ajax-panel').html('</p> Try that again in a few moments.</p>');
  }
});
 </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:06:04.237

您不能向另一个域上的页面发出 *AJAX 请求。您需要阅读有关[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing "CORS")的信息并查看您的选择。最简单的方法是轮询服务器上为您聚合数据的后端资源

# qt - Qt 的 moc 预处理器是否需要所有 C++ 预处理器标志

> ID：12754007
> 
> 赞同：2
> 
> 时间：2012-10-05T21:04:23.097
> 
> 标签：qt

我注意到 qmake 将所有 C++ 预处理器标志传递给 moc 实用程序。我在一个文件上尝试了没有这些标志的 moc，它产生了相同的结果。我的问题是：在某些情况下 moc 会需要这些标志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:21:54.423

moc 创建一个管理类的 SLOTS 和 SIGNALS 的 CPP 文件。

如果其中任何一个在预处理器规则下，MOC 需要知道它。例如：

```
class A {
 Q_OBJECT
public slots:
#ifdef ENABLE_SLOT1
  void slot1();
#endif;
  void slot2();
}; 
```

如果您在没有“-DENABLE_SLOT1”参数的情况下运行 moc，则生成的 CPP 文件将不知道它需要生成代码处理 slot1()。

# jsf-2 - 注销链接不起作用

> ID：12754009
> 
> 赞同：1
> 
> 时间：2012-10-05T21:04:53.773
> 
> 标签：jsf-2, primefaces

我在我的 Web 应用程序中使用**JSF**和**Primefaces 。**

在这个我使用一个表格，其中包括一些由学生填写的细节。所以对这些字段有一些验证

而且，在这个页面上有两个按钮，一个是提交，另一个是注销

当我按下提交按钮时，如果详细信息未完成，表单将显示验证错误。

但是在按下 LOGOUT 链接时也会显示相同的内容

注销是 p:commadLink

```
<p:commandLink styleClass="logout" type="submit"  action="#{userManagedBean.logout}">
     <p:graphicImage value="/images/logout.png"></p:graphicImage>
     </p:commandLink> 
```

提交是 h:commandButton

```
<h:commandButton image="/images/submit_button.png" type="submit" action="#{referManagedBean.saveDetails}" value="submit"></h:commandButton> 
```

我需要注销链接跳过此验证步骤并直接转到名为函数的托管 bean。

**如何跳过验证步骤？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:33:47.820

由于注销操作似乎与详细信息表单（正在验证）无关，您可以将按钮移动到不同的表单（h：form），这样它就不会触发详细信息表单验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:15:23.900

我解决了我的问题，我使用**了 immediate="true"**它跳过了验证阶段。

```
<p:commandLink styleClass="logout" type="submit" immediate="true"  action="#{userManagedBean.logout}">
     <p:graphicImage value="/images/logout.png"></p:graphicImage>
     </p:commandLink> 
```

# java - 在 Java 和数字类型中使用泛型

> ID：12754010
> 
> 赞同：4
> 
> 时间：2012-10-05T21:05:11.913
> 
> 标签：java, generics

嘿，我刚刚开始学习 Java，我*将*很快参加一门课程（是的，我是个书呆子，我在开始上课之前就学习了）。我想把一些概念塞在一起，以了解 Java 中的一切是如何协同工作的。

现在，我想做的是一个简单的 Shape（法语中的 Forme）类，它至少有 1-2 个继承自它的类，并在集合对象中创建一些实例。我也想让这些类泛型来尝试一下。那是我遇到麻烦的部分。

我非常习惯 C++，所以这可能是混乱所在，但似乎我不能使用泛型，例如，我可以指定维度将是，比如，整数或双精度或浮点数或其他. 可能吗 ？

`base`下面的 GetArea() 方法因为和无法编译`hauteur`。

```
package testconcepts;

import java.util.*;
import java.lang.*;

abstract class Forme <T extends Number> {
    protected String nom_forme;

    String NomForme() { return nom_forme; }

    abstract Double GetArea();
}

class Triangle <T extends Number> extends Forme {
    protected T base, hauteur;

    Triangle() { 
        this.nom_forme = "TRIANGLE"; 
    }

    @Override
    Double GetArea() { return base * hauteur / 2; }

    T GetBase() { return base; }
    T GetHauteur() { return hauteur; }
    void SetBase(T base) { this.base = base; }
    void SetHauteur(T hauteur) { this.hauteur = hauteur; }
}

public class TestConceptsJava {
    public static void main(String[] args) {
        ArrayList list = new ArrayList();
        list.add(new Triangle<Double>());
    }
} 
```

请注意，由于类型问题，我也无法在构造函数中对 0 进行赋值。

另外，我知道有非常相似的主题，但在其他问题中我还没有找到解决我的问题的方法。

**TLDR 如何使用原始类型包装器（Double、Integer..）使工作泛型？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:11:29.903

所以你的问题是我猜的这条线：

```
Double GetArea() { return base * hauteur / 2; } 
```

您收到错误的原因`*`是未定义类型对象的运算符`Number`。既然你知道你将处理`int`​​s 和`double`s （我假设），你可以试试这个：

```
Double GetArea() { return base.doubleValue() * hauteur.doubleValue() / 2; } 
```

* * *

需要注意的是，通常我们以小写字母开头方法名称，即`getArea()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T21:11:36.683

在 GetArea() 中，您在两个类上调用 * 运算符。说这样的话有多大意义：

```
Object o1 = //whatever;
Object o2 = //whatever;

return o1 * o2; 
```

不多吧？你不能将两个类相乘。您真正想要做的是乘以这些包装类的基础值（这在 Java 中不会为您隐式完成）。像这样重写 GetArea() 应该可以解决您的问题：

```
Double GetArea() { return base.doubleValue() * hauteur.doubleValue() / 2; } 
```

请注意，您还必须在该类中您关心的其他任何地方使用基础值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T21:11:56.267

您正在寻找的内容称为“自动（取消）装箱”。不幸的是，操作`T`必须对 的**所有**子类型有效`Number`，而“自动（取消）装箱”不是这样的操作（例如，它不适用于`BigInteger`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T21:10:57.037

更改为`Double GetArea() { return base.doubleValue() * hauteur.doubleValue() / 2; }`将使代码编译，但这在 Java 中是个坏主意，因为 Java 中的泛型不适用于此。基本上，它们只是在使用对象集合时确保静态类型安全。

Java 没有运算符重载，因此您不能期望`*`除原始类型之外的任何东西都可以工作。

我建议阅读基本的 Java 泛型教程以了解它们在 Java 中的用途：http: [//docs.oracle.com/javase/1.5.0/docs/guide/language/generics.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/generics.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T21:11:28.173

查看计算的这一部分：

```
base * hauteur 
```

由于和*都是* 使用包装类声明的，因此您不能像使用原始类型那样使用运算符。相反，您需要显式获取值：`base``hauteur``*`

```
base.doubleValue() * hauteur.doubleValue() 
```

请注意，如果使用原始类型声明`base`或声明，这将不是问题。`hauteur`然后，Java 编译器将能够使用自动拆箱将另一个转换为适当的类型，并进行所需的任何隐式转换。

# zend-framework - Zend Framework 中的默认主页设置

> ID：12754011
> 
> 赞同：2
> 
> 时间：2012-10-05T21:05:45.250
> 
> 标签：zend-framework

有多少种方法可以更改[Zend Framework](http://en.wikipedia.org/wiki/Zend_Framework)的默认主页设置？

我认为有`application.ini`和`bootstrap.php`文件。我正在尝试，但如果使用这些文件无法正常工作，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:54:18.803

如果“默认主页”是指将请求`/`路由到的位置，则可以通过指定默认路由器以外的路由器来更改。

我假设您使用的是 1.x ZF 库，如果您使用的是 2.x，它可能有点相似。

更好地理解 Zend 如何路由请求，查看[Zend Framework 应用程序中的路由概述，特别](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)[是标准路由器部分](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.standard)的末尾，它显示了本质上是什么路由。没错，您可以使用`Bootstrap.php`以编程方式定义路线：

```
//get the front controller
$this->bootstrap('frontController');
$front = $this->getResource('frontController');

//custom route
$route = new Zend_Controller_Router_Route(
    ':module/:controller/:action/*',
    array('module' => 'default',
          'controller' => 'welcome',
          'action' => 'index')
);
$router->addRoute('default', $route);
$front->getRouter()->addRoute('site', $siteRoute); 
```

要修改路由`application.ini`，请遵循该[资源插件的文档](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html#zend.application.available-resources.router)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T14:38:20.647

将以下内容添加到您的 application.ini...

```
resources.router.routes.home.type = "Zend_Controller_Router_Route_Static"
resources.router.routes.home.route = "/"
resources.router.routes.home.defaults.module = "default"
resources.router.routes.home.defaults.controller = "defaultController"
resources.router.routes.home.defaults.action = "defaultAction" 
```

感谢：[https ://stackoverflow.com/a/5359588/369326](https://stackoverflow.com/a/5359588/369326)

# javascript - 使用 CSS3 变换将视口围绕鼠标单击位置居中

> ID：12754013
> 
> 赞同：2
> 
> 时间：2012-10-05T21:05:47.200
> 
> 标签：javascript, jquery, css, css-animations

感谢您对以下问题的帮助：我想使用 CSS3 转换以使浏览器的视口围绕鼠标单击的位置居中。请查看我在[http://jsfiddle.net/XjpdU/](http://jsfiddle.net/XjpdU/)上的评论示例。

我遇到的问题是翻译只有在第一次点击时才能正常工作。第一次单击后，视口中心和鼠标单击位置之间的距离似乎计算正确，但平移似乎只是在任何地方跳跃。

我试图明确地将“转换原点”（在我的示例中为-webkit-translate-origin）设置为最后一次点击的位置（即视口的当前中心），但似乎使用“翻译” 'transform-origin' 指令会被忽略。

感谢您的帮助！y

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:20:55.150

是的，transform-origin 对翻译没有影响。它是这样工作的：

> 1.  从单位矩阵开始。
> 2.  通过“transform-origin”的计算 X、Y 和 Z 值进行转换</li>
> 3.  依次乘以“变换”属性中的每个变换函数
> 4.  通过“transform-origin”的求反计算 X、Y 和 Z 值进行转换

[http://www.w3.org/TR/css3-transforms/#transform-rendering](http://www.w3.org/TR/css3-transforms/#transform-rendering)

您可以做的是记住翻译，并将新计算的翻译添加到其中，这将导致从前一点开始的相对翻译。

```
x = prevX = prevX + newX
y = prevY = prevY + newY 
```

[http://jsfiddle.net/XjpdU/1/](http://jsfiddle.net/XjpdU/1/)

# javascript - 进行 ajax 调用时的警报窗口

> ID：12754015
> 
> 赞同：1
> 
> 时间：2012-10-05T21:05:55.890
> 
> 标签：javascript, jquery, ajax, jsp

我从我的 js 文件中对 servlet 的 post 方法进行了 ajax 调用。我希望在收到回复之前显示一个警告框。我怎么能用ajax做到这一点。

在我自动得到响应后，警报窗口应该关闭。ajax 发布请求

```
 $.post(fullpath, function(data) {
        fnBookTicket(data);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:07:00.170

这很简单..您**无法**使用任何事件关闭警报窗口..

您需要通过单击它来明确关闭它..

尝试显示一个您有更多控制权的 div 或弹出窗口。

您还可以使用[blockUI jQuery](http://www.malsup.com/jquery/block/)插件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:07:53.483

改为使用弹出 DIV，然后将其关闭...

CSS

```
 div#popup { display: none; position: absolute; width: 200px; height 100px; 
     top: 50%; left:50%; margin-top: -50px; margin-left: -100px; 
     background: white; border: 1px solid blue; z-index: 9999 } 
```

HTML

```
 <div id="popup">Alert! Loading...</div> 
```

JS

```
 $('div#popup').show();
  $.post(fullpath, function(data) {  
    $('div#popup').hide();
    fnBookTicket(data); 
  }); 
```

弹出窗口显示在 ajax 调用之前并隐藏在成功处理程序中，即加载数据时......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T21:08:26.500

您需要使用灯箱脚本来创建一个模态对话框，该对话框漂浮在页面上，直到您的资源被返回。然后，将其移除。该`alert`框不能以编程方式关闭 - 它必须由用户关闭。

[以下](https://stackoverflow.com/questions/4653841/smallest-jquery-lightbox-script)是轻量级灯箱脚本的一些不错的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T21:08:30.070

您不能以这种方式关闭警报框。改用[灯箱](http://en.wikipedia.org/wiki/Lightbox_%28JavaScript%29)。

# asp.net - 如何从 aspx 页面调用代码隐藏方法？

> ID：12754016
> 
> 赞同：13
> 
> 时间：2012-10-05T21:05:55.767
> 
> 标签：asp.net, data-binding

我有一个对象，其中包含一个名为**DevList**的字段，其定义如下

```
public List<string> DevList { get; set; } 
```

我还定义了一个名为**DisplayListOfDevelopers**的方法，它应该连接开发人员列表并将其显示为一个字符串。

这就是我从 aspx 调用该方法的方式。

```
<asp:TemplateField HeaderText = "Developer(s)">
 <ItemTemplate>
   <asp:Label 
        ID="_lblDevList" 
        runat="server" 
        Text= '<%# DisplayListOfDevelopers(DevList) %>'>
   </asp:Label>
 </ItemTemplate>
</asp:TemplateField> 
```

但是，我收到此错误：**当前上下文中不存在名称“DevList”**

我错过了什么吗？

# 编辑

```
_gvStatus = ds;
_gvStatus.DataBind(); 
```

ds 现在只是包含**DevList**的对象列表。

感谢您的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T21:22:49.860

假设这是您的课程的外观：

```
public class MyItem
{
    public List<string> DevList { get; set; }
} 
```

然后

```
ds = List<MyItem>(); 
```

做这个：

在您的代码隐藏中：

```
protected string DisplayListOfDevelopers(object _devList)
{
    //Cast your dev list into the correct object
} 
```

在您的标记中：

```
<asp:TemplateField HeaderText = "Developer(s)">
 <ItemTemplate>
   <asp:Label 
        ID="_lblDevList" 
        runat="server" 
        Text= '<%# DisplayListOfDevelopers(Eval("DevList")) %>'>
   </asp:Label>
 </ItemTemplate>
</asp:TemplateField> 
```

只需确保使代码隐藏中的函数受保护或公开即可。

# c# - 为什么 System.Drawing.Image.GetThumbnailImage 需要未使用的委托？

> ID：12754021
> 
> 赞同：4
> 
> 时间：2012-10-05T21:06:24.860
> 
> 标签：c#, asp.net

这让我大吃一惊。为什么这个方法需要一个未使用的参数？此外，它需要一个“必须为零”的 IntPtr。这似乎完全没有意义。谁能解释一下？

此处的文档：http: [//msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:17:58.160

如果您查看早期版本的文档，例如[框架 1.1 中的 GetThumbnailImage](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage%28v=vs.71%29.aspx)，它会说：

> “在 GDI+ 1.0 版中，不使用委托。”

参数是早期版本的遗留物，方法签名没有改变。

# django - OneToOneField 和删除

> ID：12754024
> 
> 赞同：51
> 
> 时间：2012-10-05T21:06:39.337
> 
> 标签：django

我有以下模型：

```
from django.db import models
from django.contrib.auth.models import User

class Profile(models.Model):
    user = models.OneToOneField(User)
    # ...

    def __unicode__(self):
        return u'%s %s' % (self.user.first_name, self.user.last_name) 
```

当使用 Django 管理员删除用户时，配置文件也会被删除，这就是我想要的。但是，当使用 Django 管理员删除配置文件时，用户不会*被*删除，这*不是*我想要的。我怎样才能使删除配置文件也会删除用户？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-05T21:24:00.673

由于`Profile`链接到`User`，它是关系中的依赖模型。因此，当您删除用户时，它会删除所有相关模型。但是，当您删除配置文件时，由于`User`不依赖于配置文件，因此不会将其删除。

不幸的是，根据`on_delete`Django[文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)，没有`on_delete`删除父关系的规则。为此，您可以覆盖`Profile`'`delete`方法：

```
class Profile(models.Model):
    # ...

    def delete(self, *args, **kwargs):
        self.user.delete()
        return super(self.__class__, self).delete(*args, **kwargs) 
```

然后在做的时候：

```
Profile.objects.get(...).delete() 
```

还将删除配置文件的用户。但是，`delete`当使用查询集（在 Django Admin 中调用）删除配置文件时，不会调用该方法，因为 Django 使用 SQL DELETE 批量删除对象：

```
Profile.objects.filter(...).delete() 
```

在这种情况下，按照 Django [docs](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.delete)的建议，您将不得不使用`post_delete`信号 ( [docs](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_delete) )。

```
from django.dispatch import receiver
from django.db.models.signals import post_delete

@receiver(post_delete, sender=Profile)
def post_delete_user(sender, instance, *args, **kwargs):
    if instance.user: # just in case user is not specified
        instance.user.delete() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-05T21:18:35.983

在 的 delete 方法上使用信号`Profile`去删除相关的用户：

```
from django.db.models.signals import post_delete

def delete_related_user(sender, **kwargs):
    deleted_profile = kwargs['instance']
    deleted_profile.user.delete()

post_delete.connect(delete_related_user, sender=Profile) 
```

# asp.net - 如何仅检索没有元素属性的 ASP.NET MVC3 集合的计数

> ID：12754026
> 
> 赞同：1
> 
> 时间：2012-10-05T21:06:41.183
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, collections

我正在使用 ASP.NET MVC 3 来跟踪一组存储链接的命中。显示点击数时遇到问题。我认为这是因为因为我使用延迟加载，所以每当我调用

```
link.Hits.Count 
```

它加载所有点击的数据，包括代理和推荐人信息等。（点击是一个集合。）当链接有超过 9000 次点击时，这是一个问题。有没有办法在不提取点击数据的情况下获得点击数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:15:28.090

如果 Hits 是这样写的，则 Count 将起作用：

```
Hits = repository.GetAll(....).Where(....); 
```

但如果这样，Count 将不起作用，因为 ToList() 已经加载了所有数据：

```
Hits = repository.GetAll(....).Where(....).ToList(); 
```

# html - 字体“Myriad Pro”在 Chrome 中看起来很奇怪/模糊

> ID：12754027
> 
> 赞同：2
> 
> 时间：2012-10-05T21:06:42.957
> 
> 标签：html, css, fonts, font-face

我在我的网页上使用了“Myriad Pro”字体，与 FF/IE/Safari 相比，它在 Chrome 上看起来既有趣又奇怪。

当字体大小小于 23~25px 范围时，我看到了差异。有什么我想念的吗？例如，它根本就不是一种安全的字体吗？我也读过[这个](https://graphicdesign.stackexchange.com/questions/350/web-safe-alternative-to-myriad-pro-font)。

仅供参考，我的 chrome 版本是 Window 7 Pro 机器上的 22.0.1229.79 m 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:27:52.623

我会建议一个解决方法：使用[Vegur](http://www.fontspace.com/arro/vegur)（这是公共领域）和 @font-face 它与[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)；根据我的经验，我总是在网络上遇到 Myriad 的问题（行高、混叠等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:24:09.253

尝试在 css 中使用它

```
html, html a {
    /*text-shadow: 1px 1px 1px rgba(0,0,0,0.004);*/
     text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;

} 
```

# cassandra - 关于 Yii 和 cassandra 的工作

> ID：12754030
> 
> 赞同：2
> 
> 时间：2012-10-05T21:06:57.563
> 
> 标签：cassandra, yii

我想知道 yii 与 cassandra 一起工作。如果有人知道它是如何工作的。请张贴链接或一些参考资料。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:08:54.007

我在 Yii 中使用主要的 PHP ORM，真正的问题是“PDO 是否有可以与 cassandra 一起使用的驱动程序？”

```
 http://code.google.com/a/apache-extras.org/p/cassandra-pdo/ 
```

如果你使用的是 Yii 的原生 Active Record ORM，它只支持 AR（来自他们的网站）：

对 AR 的支持受到 DBMS 的限制。目前，仅支持以下 DBMS：

```
MySQL 4.1 or later
PostgreSQL 7.3 or later
SQLite 2 and 3
Microsoft SQL Server 2000 or later
Oracle 
```

如果您想使用 db 以外的应用程序组件，或者如果您想使用 AR 处理多个数据库，您应该重写 CActiveRecord::getDbConnection()。CActiveRecord 类是所有 AR 类的基类。

当然，ORM 旨在用于**关系数据库**，因此使用 cassandra、Mongodb 或 Couchdb 之类的东西可能不适合放在 ORM 下。

否则，你的问题没有多大意义。这就像问“数据库是否与我的代码一起工作”。

# python - 字典python中的第二个最大值

> ID：12754035
> 
> 赞同：1
> 
> 时间：2012-10-05T21:07:21.353
> 
> 标签：python, dictionary

我有一本普通的字典，例如：

```
A = {37:4783, 92:47834, 12:234234,....} 
```

我需要返回第二个最大值，第三个，依此类推。我正在尝试：

```
max(A, key=lambda x: x[1]) 
```

但我收到了这个错误：TypeError: 'float' object is unsubscriptable

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T21:18:09.600

看起来这些键根本不相关。因此，您可以调用[`sorted`](http://docs.python.org/library/functions.html#sorted)：

```
>>> A = {37:4783, 92:47834, 12:234234}
>>> sorted(A.values(), reverse=True)
[234234, 47834, 4783] 
```

你的代码

```
max(A, key=lambda x: x[1]) 
```

失败是因为遍历字典会产生它的键。因此，您本质上是在调用

```
max([37, 92, 12], key=lambda x:x[1]) 
```

如您所见，密钥在这里没有任何意义。`37[1]`会抛出错误。如果要按相应的值对键进行排序，请对字典进行排序`items`或在 lambda 函数（或 via [`dict.get`](http://docs.python.org/library/stdtypes.html#dict.get)）中检索值：

```
>>> [k for k,v in sorted(A.items(), key=lambda item: item[1], reverse=True)]
[12, 37, 92]
>>> sorted(A, key=lambda k: A[k], reverse=True)
[12, 37, 92]
>>> sorted(A, key=A.get, reverse=True)
[12, 37, 92] 
```

请注意，后者可能会更慢，因为您需要从字典中检索每个键（尽管 Python 中的字典访问[速度非常快](http://wiki.python.org/moin/TimeComplexity#dict)）。

# php - 在 PDF 发票中包含客户备注字段

> ID：12754043
> 
> 赞同：0
> 
> 时间：2012-10-05T21:08:08.807
> 
> 标签：php, pdf-generation, prestashop, invoices

我在问是否可以在我的 PDF 发票中添加客户附加信息（我认为这是客户表中的注释列），如果可以，那么我是新手，必须学习很多东西。我检查了这篇[文章](http://www.prestashop.com/forums/topic/67723-how-to-edit-pdf-invoice-content-in-prestashop-131/)，但根本不清楚。有什么可以帮助我的吗？

提前欢呼和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:38:11.257

是的，可以添加客户附加信息。`class`很简单，在文件>中找到您想要修改和匹配的发票的功能调用发票`pdf.php`。

例如：`multipleOrderSlips`函数。该函数`multipleOrderSlips`具有调用`order`对象。您应该修改`order`添加客户信息，您可以添加`JOIN`表。

# c# - 如何在 C# 的阻塞队列中获取当前正在运行的任务？

> ID：12754045
> 
> 赞同：0
> 
> 时间：2012-10-05T21:08:14.283
> 
> 标签：c#, task-parallel-library, blockingqueue

我想获取我在阻塞队列中添加的当前正在执行的任务，如何完成？

编辑：我正在使用这个优先级调度程序，并添加多个具有不同优先级的任务：

```
public class PriorityScheduler : TaskScheduler
{
    public static PriorityScheduler Highest = new PriorityScheduler(ThreadPriority.Highest);
    public static PriorityScheduler AboveNormal = new PriorityScheduler(ThreadPriority.AboveNormal);
    public static PriorityScheduler Normal = new PriorityScheduler(ThreadPriority.Normal);
    public static PriorityScheduler BelowNormal = new PriorityScheduler(ThreadPriority.BelowNormal);
    public static PriorityScheduler Lowest = new PriorityScheduler(ThreadPriority.Lowest);

    public static BlockingCollection<Task> _tasks = new BlockingCollection<Task>();
    private Thread[] _threads;
    private ThreadPriority _priority;
    private readonly int _maximumConcurrencyLevel = Math.Max(1, Environment.ProcessorCount);

    public PriorityScheduler(ThreadPriority priority)
    {
        _priority = priority;
    }

    public override int MaximumConcurrencyLevel
    {
        get { return _maximumConcurrencyLevel; }
    }

    protected override IEnumerable<Task> GetScheduledTasks()
    {
        return _tasks;
    }

    protected override void QueueTask(Task task)
    {
        _tasks.Add(task);

        if (_threads == null)
        {
            _threads = new Thread[_maximumConcurrencyLevel];
            for (int i = 0; i < _threads.Length; i++)
            {
                int local = i;
                _threads[i] = new Thread(() =>
                {
                    foreach (Task t in _tasks.GetConsumingEnumerable())
                        base.TryExecuteTask(t);
                });
                _threads[i].Name = string.Format("PriorityScheduler: ", i);
                _threads[i].Priority = _priority;
                _threads[i].IsBackground = true;
                _threads[i].Start();
            }
        }
    }

    protected override bool TryExecuteTaskInline(Task task, bool taskWasPreviouslyQueued)
    {
        return false; // we might not want to execute task that should schedule as high or low priority inline
    }
} 
```

我想根据那里的优先级停止和恢复任务，例如，如果具有更高优先级的新任务到达，较低的停止并让任务执行，然后自行恢复......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:11:54.140

如果您指的是`BlockingCollection<T>`，则不能（直接）。当您调用`Take()`（或通过 获取下一个项目`GetConsumingEnumerable()`）时，该项目（任务？）实际上已从底层连接中删除。

如果您希望它可用，您将需要拥有您的消费者商店并公开“当前任务”。

Note that the [Parallel Extension Extras](http://code.msdn.microsoft.com/ParExtSamples) project provides a great [QueuedTaskScheduler](http://blogs.msdn.com/b/pfxteam/archive/2010/04/09/9990424.aspx) which may accomplish your goals here. It allows you to create prioritized `TaskScheduler` instances, and handles all of the scheduling for you.

# php - 如何裁剪图像的垂直和水平居中版本？

> ID：12754051
> 
> 赞同：0
> 
> 时间：2012-10-05T21:08:29.757
> 
> 标签：php, image, resize, crop

我目前正在将图像大小调整为保持纵横比的自定义：

```
class ImgResizer {
var $originalFile = '$newName';
function ImgResizer($originalFile = '$newName') {
    $this -> originalFile = $originalFile;
}
function resize($newWidth, $targetFile) {
    if (empty($newWidth) || empty($targetFile)) {
        return false;
    }
    $src = imagecreatefromjpeg($this -> originalFile);
    list($width, $height) = getimagesize($this -> originalFile);
    $newHeight = ($height / $width) * $newWidth;
    $tmp = imagecreatetruecolor($newWidth, $newHeight);
    imagecopyresampled($tmp, $src, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);
    if (file_exists($targetFile)) {
        unlink($targetFile);
    }
    imagejpeg($tmp, $targetFile, 95);
}
} 
```

用法：

```
$work = new ImgResizer($path);
$work -> resize(200, $path); 
```

但我想获得 200x200px 版本的图像。它应该是垂直和水平居中的（基本上得到图像的主要200px）

那可能吗？

-编辑-

```
function resize($newWidth, $targetFile) {
    if (empty($newWidth) || empty($targetFile)) {
        return false;
    }
    $src = imagecreatefromjpeg($this -> originalFile);
    list($width, $height) = getimagesize($this -> originalFile);

    $newHeight =  $newWidth;

      if ($width > $newWidth){
       $srcx = $width/2 - $newWidth/2;
       $destx = 0;
   }
   else{
       $srcx = 0;
       $destx = $newWidth/2 - $width/2;
   }
   if ($height > $newHeight){
       $srcy = $height/2 - $newHeight/2;
       $desty = 0;
   }
   else{
       $srcy = 0;
       $desty = $newHeight/2 - $height/2;
   }

     $tmp = imagecreatetruecolor($newWidth, $newHeight);
    imagecopyresampled($tmp, $src, $destx, $desty, $srcx, $srcy, $newWidth, $newHeight, $width, $height);

    if (file_exists($targetFile)) {
        unlink($targetFile);
    }
    imagejpeg($tmp, $targetFile, 95);
} 
```

会产生意想不到的东西：`HTTP://209.51.221.243/integracion/files/uploads/1_050.JPG`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:22:13.127

尝试

```
if ($width > $newWidth){
    $srcx = $width/2 - $newWidth/2;
    $destx = 0;
    $w = $newWidth;
}
else{
    $srcx = 0;
    $destx = $newWidth/2 - $width/2;
    $w = $width;
}
if ($height > $newHeight){
    $srcy = $height/2 - $newHeight/2;
    $desty = 0;
    $h = $newHeight;
}
else{
    $srcy = 0;
    $desty = $newHeight/2 - $height/2;
    $h = $keight;
}
imagecopyresampled($tmp, $src, $destx, $desty, $srcx, $srcy, $w, $h, $w, $h); 
```

# r - n 行的静态平均值列

> ID：12754054
> 
> 赞同：5
> 
> 时间：2012-10-05T21:08:39.313
> 
> 标签：r, mean

给定一个包含两列的数据框，我希望计算第三列，该列将包含每 n 行的平均值，同时保持数据框完整。

给定数据框

```
 index<-1:20
 V<-c(2,5,7,4,8,9,4,6,8,NA,3,4,5,6,0,4,5,7,5,3)
 DF<-data.frame(index,V) 
```

我怎样才能创建 DF$mean 这将是每 5 行的非滚动平均值。

```
 index V  mean
      1 2    5.2
      2 5    5.2
      3 7    5.2
      4 4    5.2
      5 8    5.2
      6 9    6.75
      7 4    6.75    
      8 6    6.75    
      9 8    6.75    
     10 NA   6.75  
     11 3    3.6
     12 4    3.6
     13 5    3.6
     14 6    3.6 
     15 0    3.6
     16 4    4.8
     17 5    4.8
     18 7    4.8
     19 5    4.8
     20 3    4.8 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:10:53.910

您可以使用 colMeans 和 rep

```
DF$mean <- rep(colMeans(matrix(DF$V, nrow=5), na.rm=TRUE), each=5) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T21:15:24.993

```
DF$mean <- ave(DF$V, 
               rep(1:(nrow(DF)/5), each=5), 
               FUN=function(x){mean(x, na.rm=TRUE)}) 
```

这使

```
> DF
   index  V mean
1      1  2 5.20
2      2  5 5.20
3      3  7 5.20
4      4  4 5.20
5      5  8 5.20
6      6  9 6.75
7      7  4 6.75
8      8  6 6.75
9      9  8 6.75
10    10 NA 6.75
11    11  3 3.60
12    12  4 3.60
13    13  5 3.60
14    14  6 3.60
15    15  0 3.60
16    16  4 4.80
17    17  5 4.80
18    18  7 4.80
19    19  5 4.80
20    20  3 4.80 
```

# xml - XPath，测试列表中的最后一个属性值

> ID：12754058
> 
> 赞同：0
> 
> 时间：2012-10-05T21:08:59.123
> 
> 标签：xml, xslt, xpath, saxon

我正在尝试测试此输入 XML 中的最后一个属性值。我正在使用 Saxon 和 XSLT 2.0

```
<history>
  <value date='2010-01-01' price='5.99'/>
  <value date='2010-01-02' price='6.49'/>
  <value date='2010-01-03' price='6.19'/>
</history> 
```

我已经用 Eclipse Xpath 评估器尝试了这些，它得到了最后一个节点，但属性比较没有评估为真。

```
 (/history/value[@price])[last()] = '6.19'
 (/history/value[last()])[@price] = '6.19' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:21:47.913

你需要的是这样的：

```
/history/value[last()]/@price = '6.19' 
```

# lwuit - LWUIT Form.show() 有一个奇怪的边距（或填充）

> ID：12754059
> 
> 赞同：2
> 
> 时间：2012-10-05T21:09:04.237
> 
> 标签：lwuit, nokia, lwuit-form, nokia-s40

当我使用 form.show() 将表单添加到 LWUIT 时，表单没有完全设置在 (0,0) 坐标中，它在顶部留下 20 个像素，在左侧留下 3 个像素。

我正在为诺基亚 SDK 1.1 FYI 开发，我正在使用他们的 LWUIT 版本

让我知道是否有解决方法。

干杯! 阿尔贝托

编辑：

这是我创建表单的方式

```
Display.init(this);
this.view = new Form();
this.view.setLayout(new CoordinateLayout(Display.getInstance().getDisplayWidth(), Display.getInstance().getDisplayHeight()));
this.view.setScrollableY(false);
this.view.show(); 
```

这显示了顶部和左侧的填充（顶部大于左侧）

查看屏幕截图：

![查看表格的上边距和照片的左边距](../Images/141644df72cc1037b44958506700b28f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:47:10.370

发现2个问题：

1）我必须像这样将titleArea填充和边距设置为0： this.view.getTitleArea().getStyle().setMargin(0, 0, 0, 0); this.view.getTitleArea().getStyle().setPadding(0, 0, 0, 0); this.view.revalidate();

2）对于左侧填充，它位于我放置照片的标签中，因此只需将其样式（填充）更改为 0 即可

干杯，

# python - 为什么 ndimage.label(image) 在考虑的形状中标记额外的形状？

> ID：12754061
> 
> 赞同：3
> 
> 时间：2012-10-05T21:09:07.610
> 
> 标签：python, numpy, scipy

当我使用`ndimage.label(img)`从`scipy`包中导入来标记灰度 PNG 图像时，它的行为是这样的。
我有两张图片，其中一些形状由以下人员制作`Photoshop`：
第一张图片：
[test_one http://imageshack.us/a/img140/8669/onehx.png](http://imageshack.us/a/img140/8669/onehx.png)
我在上面的图片上执行此代码。

```
>>> from scipy.misc import imread
>>> from scipy.ndimage import (label,find_objects)

>>> img=imread('first.jpg')
>>> x,y = label(img)
>>> print y                 # Prints exactly "4" shapes ,which is right.
4

>>> f=find_objects(x)
>>> print f                 # Returns exactly the "4" slices of the considered shapes.
[(slice(16L, 61L, None), slice(149L, 189L, None)),  
(slice(30L, 40L, None), slice(60L, 90L, None)),  
(slice(50L, 70L, None), slice(20L, 120L, None)),  
(slice(96L, 149L, None), slice(130L, 186L, None))] 
```

到目前为止，它工作正常。
但是当我用光滑的刷子制作一个形状时，如下所示：

第二张图片：
[test_one http://imageshack.us/a/img822/5696/twozg.png](http://imageshack.us/a/img822/5696/twozg.png)
我在第二张图片上执行此代码

```
>>> from scipy.misc import imread
>>> from scipy.ndimage import (label,find_objects)

>>> img=imread('second.jpg')
>>> x,y = label(img)
>>>print y               # Prints more than "5" shapes ,which is wrong.
6

>>> f=find_objects(x)
>>> print f               # Return more than the "5" slices of the considered shapes.
                          #But still has the "5" slices of the "5" considered shapes 
                          #among the other slices which I'm confused of.  
[(slice(16L, 61L, None), slice(149L, 189L, None)),  
(slice(30L, 40L, None), slice(60L, 90L, None)),  
(slice(50L, 70L, None), slice(20L, 120L, None)),  
(slice(96L, 149L, None), slice(130L, 186L, None)),  
(slice(126L, 170L, None), slice(65L, 109L, None)),  
(slice(127L, 128L, None), slice(79L, 80L, None))]    #This is the extra object. 
```

我只想知道为什么`ndimage.label(img)`当我使用光滑的刷子时标记的形状比考虑的形状要多。
是的，它可以标记考虑的形状，但为什么要额外标记以及如何摆脱额外标记的形状。

注意：
（1）多余的形状不是偶数形状，它们是有点薄的黑色区域。！！
(2) 如果图像是 RGB 格式，它的行为方式相同。
(3) 用光滑画笔绘制的形状中的非零值模式如下所示：

```
>>> obj_6            #Not quite right but it's similar to this structure
array([[  0,   0,   1,   1,   1,   1,   0,   0],  
       [  0,   1,   6,  12,  15,   9,   3,   0],  
       [  0,   7,  24,  50,  57,  35,  12,   1],  
       [  2,  14,  52, 105, 119,  74,  24,   3],
       [  2,  16,  60, 122, 139,  86,  29,   4],
       [  1,  10,  37,  77,  88,  54,  18,   3],
       [  0,   3,  12,  25,  29,  18,   5,   1],
       [  0,   0,   1,   4,   5,   3,   1,   0]], dtype=uint8) 
```

(4) 全面了解：
一：
![在此处输入图像描述](../Images/e69eda08ace2bd2e3fb8d22c3adafadc.png) 二：
![在此处输入图像描述](../Images/62b2225d9f748229a69accdf9d4842ab.png)
感谢您的耐心等待。

更新（1）：
为了清楚起见，我发布了两张图片和相关结果：

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T15:59:19.457

要回答您的问题，它标记附加区域的原因是因为您使用的是连接性为 1 的默认结构，并且它不知道寻找对角线连接。

除了 Warren 指出的需要鲁棒标记的地方（将对角像素视为连接）之外，还可以更改这种结构。默认结构如下

```
In [32]: ndimage.morphology.generate_binary_structure(2, 1).astype("uint8")
Out[32]: 
array([[0, 1, 0],
       [1, 1, 1],
       [0, 1, 0]], dtype=uint8) 
```

其连通性为 1。这扩展到您正在使用的任何维度图像。

如果您想使用标签而不担心默认情况下获得的小额外内容，您可以通过添加“结构”关键字参数来更改对 ndimage.label 的调用。结构（或内核）是与图像（维度）具有相同等级的二进制对象，并且可以轻松更改。创建全等级

```
In [41]: struct=np.ones((3,3), dtype="bool8")

In [42]: struct
Out[42]: 
array([[ True,  True,  True],
       [ True,  True,  True],
       [ True,  True,  True]], dtype=bool)
In [43]: ndimage.label(img, structure=struct) 
```

理论上，这应该可以解决在结果中添加小对象的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T05:37:41.103

使用平滑笔刷绘制的形状中的非零值模式是什么样的？如果那里有很多零，`label`就会发现很多不连贯的特征。

例如，对于这个 4x4 像素块：

```
In [16]: img
Out[16]: 
array([[ 0\. ,  0.5,  0\. ,  1\. ],
       [ 0\. ,  0.5,  0.5,  0\. ],
       [ 0.5,  0\. ,  1\. ,  0\. ],
       [ 0.5,  0\. ,  1\. ,  0\. ]]) 
```

`label(img)`发现三个特征：

```
In [17]: lbl, n = label(img)

In [18]: lbl
Out[18]: 
array([[0, 1, 0, 2],
       [0, 1, 1, 0],
       [3, 0, 1, 0],
       [3, 0, 1, 0]])

In [19]: n
Out[19]: 3 
```

我怀疑这是用平滑画笔绘制的像素中发生的情况。

# objective-c - 如何在 iOS 6 中获取默认日历的名称/ID

> ID：12754064
> 
> 赞同：0
> 
> 时间：2012-10-05T21:09:18.750
> 
> 标签：objective-c, xcode4, icalendar

我的 iPad 上有两 (2) 个日历 (iCal)（一个用于个人，一个用于应用程序）。它们同步到我的 iMac 仅用于测试。（节省了我输入特定应用程序日历的时间）。

我目前正在编写一个需要访问应用程序日历的应用程序。它是 iPad 上的主日历。我试图让 Apple 的 SimpleEKDemo（未修改）与应用程序的日历一起使用，但到目前为止，我什至无法让它不崩溃，更不用说返回任何东西了。几个小时以来，我一直在研究 Google 和 SO 问题，并决定是时候召集大炮了。

这是它崩溃的代码：

```
- (void)viewDidLoad
{
    self.title = @"Events List";

    // Initialize an event store object with the init method. Initilize the array for events.
    self.eventStore = [[EKEventStore alloc] init];

    self.eventsList = [[NSMutableArray alloc] initWithArray:0];

    // Get the default calendar from store.
    self.defaultCalendar = [self.eventStore defaultCalendarForNewEvents];  //  <---- crashes here    --------

    //  Create an Add button
    UIBarButtonItem *addButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:
                                      UIBarButtonSystemItemAdd target:self action:@selector(addEvent:)];
    self.navigationItem.rightBarButtonItem = addButtonItem;
    [addButtonItem release];

    self.navigationController.delegate = self;

    // Fetch today's event on selected calendar and put them into the eventsList array
    [self.eventsList addObjectsFromArray:[self fetchEventsForToday]];

    [self.tableView reloadData];
} 
```

这是“崩溃”的输出：

```
2012-10-05 14:33:12.555 SimpleEKDemo[874:907] defaultCalendarForNewEvents failed: Error Domain=EKCADErrorDomain Code=1013 "The operation couldn’t be completed. (EKCADErrorDomain error 1013.)" 
```

我需要确保我在正确的日历上......我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T21:38:50.840

您需要确保在尝试访问 Event Store 之前获得许可。请注意，您只需要调用一次。如果用户拒绝访问，他们需要转到 iOS 设置（请参阅代码中的注释）为您的应用启用权限。

```
/* iOS 6 requires the user grant your application access to the Event Stores */
if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    /* iOS Settings > Privacy > Calendars > MY APP > ENABLE | DISABLE */
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if ( granted )
         {
             NSLog(@"User has granted permission!");
         }
         else
         {
             NSLog(@"User has not granted permission!");
         }
     }];
} 
```

在 iOS 5 中，您只能**`EKEntityTypeEvent`**在 Event Store 中访问事件 ( )，这与在 iOS 6 中您可以访问提醒 ( **`EKEntityTypeReminder`**) 不同。但是您需要上述代码至少获得 1 次授权。

我还应该提到，在您访问之前，您需要获得许可`EventStore`，在您的情况下：**`[self.eventStore defaultCalendarForNewEvents];`**.

此外，**`defaultCalendarForNewEvents`**这将是访问用户默认日历的正确方法。如果您希望访问具有其他名称的日历，则需要遍历日历并根据返回的结果选择适当的日历。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T03:48:55.070

//检查用户设备上是否安装了iOS6或更高版本***** ** *** ** *** ****

```
if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {

    //Request the access to the Calendar
    [eventStore requestAccessToEntityType:EKEntityTypeReminder completion:^(BOOL granted,NSError* error){

        //Access not granted-------------
        if(!granted){
            NSString *message = @"Hey! I Can't access your Calendar... check your privacy settings to let me in!";
            UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Warning"
                                                               message:message
                                                              delegate:self
                                                     cancelButtonTitle:@"Ok"
                                                     otherButtonTitles:nil,nil];
            //Show an alert message!
            //UIKit needs every change to be done in the main queue
            dispatch_async(dispatch_get_main_queue(), ^{[alertView show];});

            //Access granted------------------
        }
        else
        {
            self.defaultCalendar=[self.eventStore defaultCalendarForNewEvents];

        }
    }];
}

//Device prior to iOS 6.0  *********************************************
else{
    self.defaultCalendar=[self.eventStore defaultCalendarForNewEvents];
    } 
```

# google-chrome-extension - 如何枚举 chrome.contentSettings 值

> ID：12754065
> 
> 赞同：1
> 
> 时间：2012-10-05T21:09:19.230
> 
> 标签：google-chrome-extension

有没有办法枚举 contentSettings 的设置条目？似乎是一个重大的疏忽。

例如，如何使用 chrome.contentSettings.javascript.set 枚举为 chrome.contentSettings.javascript 设置的条目？

我知道您可以使用 chrome.contentSettings.get 来读取已设置的确切内容，但这并不能为您提供所有内容。

# java - 动态定义和使用选择器

> ID：12754067
> 
> 赞同：7
> 
> 时间：2012-10-05T21:09:23.533
> 
> 标签：java, android, selector

我有一个 ListView，里面有自定义元素。我想为每个元素创建选择器。选择器本身不会很复杂，因为它们只需要在项目悬停/选择/等时处理背景颜色。然而，这些选择器的颜色必须来自外部源，即我需要能够从变量中设置它们，所以一些简单的静态代码是行不通的。

1.  ***如何以编程方式使用所有参数定义扇区？***
2.  ***如何以编程方式将该选择器分配给特定视图？***

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T21:33:26.690

```
StateListDrawable states = new StateListDrawable();
int yourBackgroundColor = Color.parseColor("#FFFFFF");
// Add specific color when your view has state 'pressed'
states.addState(new int[] {android.R.attr.state_pressed}, new ColorDrawable(yourBackgroundColor));
// Add other states wanted and associated drawable
// ...
// As StateListDrawable extend Drawable, you can use it as background for exemple       
yourView.setBackground(states); 
```

您可以在 StateListDrawable 中添加任意数量的状态（可用状态列表：http: [//developer.android.com/guide/topics/resources/color-list-resource.html](http://developer.android.com/guide/topics/resources/color-list-resource.html)）。对于每个状态组合，您可以设置特定的动态可绘制对象。

您可以指定多个状态以匹配可绘制对象

```
states.addState(new int[] { -android.R.attr.state_focused,
                            android.R.attr.state_selected,
                            -android.R.attr.state_pressed}, ColorDrawable(yourBackgroundColor)); 
```

这一次，如果您的视图未聚焦、已选中且未按下，则将应用颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-23T04:28:51.287

```
StateListDrawable states = new StateListDrawable();
int yourBackgroundColor = Color.parseColor("#FFFFFF");
// Add specific color when your view has state 'pressed'
states.addState(new int[] {android.R.attr.state_pressed}, 
        new ColorDrawable(yourBackgroundColor));
// Add other states wanted and associated drawable
// ...
// As StateListDrawable extend Drawable, you can use it as background for exemple       
yourView.setBackground(states); 
```

# python - 将列表中的相似词典合并在一起

> ID：12754070
> 
> 赞同：3
> 
> 时间：2012-10-05T21:09:34.777
> 
> 标签：python, dictionary

这里是 python 的新手。我已经拉了几个小时的头发，仍然无法弄清楚这一点。

我有一个字典列表：

```
[ {'FX0XST001.MID5': '195', 'Name': 'Firmicutes', 'Taxonomy ID': '1239', 'Type': 'phylum'}
  {'FX0XST001.MID13': '4929', 'Name': 'Firmicutes', 'Taxonomy ID': '1239','Type': 'phylum'},
  {'FX0XST001.MID6': '826', 'Name': 'Firmicutes', 'Taxonomy ID': '1239', 'Type': 'phylum'},
                                        .
                                        .
                                        .
                                        .

  {'FX0XST001.MID6': '125', 'Name': 'Acidobacteria', 'Taxonomy ID': '57723', 'Type': 'phylum'}
  {'FX0XST001.MID25': '70', 'Name': 'Acidobacteria', 'Taxonomy ID': '57723', 'Type': 'phylum'}
  {'FX0XST001.MID40': '40', 'Name': 'Acidobacteria', 'Taxonomy ID': '57723', 'Type': 'phylum'} ] 
```

我想根据字典的类型、名称和分类 ID 合并列表中的字典

```
 [ {'FX0XST001.MID5': '195', 'FX0XST001.MID13': '4929', 'FX0XST001.MID6': '826', 'Name': 'Firmicutes', 'Taxonomy ID': '1239', 'Type': 'phylum'}
                                        .
                                        .
                                        .
                                        .

    {'FX0XST001.MID6': '125', 'FX0XST001.MID25': '70', 'FX0XST001.MID40': '40', 'Name': 'Acidobacteria', 'Taxonomy ID': '57723', 'Type': 'phylum'}] 
```

我有这样的数据结构设置，因为我需要稍后使用 csv.DictWriter 将数据写入 CSV。

有人会指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T21:18:53.450

您可以为此使用 groupby 函数：

[http://docs.python.org/library/itertools.html#itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)

```
from itertools import groupby

keyfunc = lambda row : (row['Type'], row['Taxonomy ID'], row['Name'])

result = []

data = sorted(data, key=keyfunc)
for k, g in groupby(data, keyfunc):
    # you can either add the matching rows to the item so you end up with what you wanted
    item = {}        
    for row in g:
        item.update(row)
    result.append(item)

    # or you could just add the matched rows as subitems to a parent dictionary
    # which might come in handy if you need to work with just the parts that are
    # different
    item = {'Type': k[0], 'Taxonomy ID' : k[1], 'Name' : k[2], 'matches': [])
    for row in g:
        del row['Type']
        del row['Taxonomy ID']
        del row['Name']
        item['matches'].append(row)
    result.append(item) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T21:31:05.477

做一些测试数据：

```
list_of_dicts = [
                 {"Taxonomy ID":1, "Name":"Bob", "Type":"M", "hair":"brown", "eyes":"green"},
                 {"Taxonomy ID":1, "Name":"Bob", "Type":"M", "height":"6'2''", "weight":200},
                 {"Taxonomy ID":2, "Name":"Alice", "Type":"F", "hair":"black", "eyes":"hazel"},
                 {"Taxonomy ID":2, "Name":"Alice", "Type":"F", "height":"5'7''", "weight":145}
                ] 
```

我认为这（下）是一个巧妙的技巧`reduce`，可以改进其他`groupby`解决方案。

```
import itertools
def key_func(elem):
    return (elem["Taxonomy ID"], elem["Name"], elem["Type"])

output_list_of_dicts = [reduce((lambda x,y: x.update(y) or x), list(val)) for key, val in itertools.groupby(list_of_dicts, key_func)] 
```

然后打印输出：

```
for elem in output_list_of_dicts:
    print elem 
```

这打印：

```
{'eyes': 'green', 'Name': 'Bob', 'weight': 200, 'Taxonomy ID': 1, 'hair': 'brown', 'height': "6'2''", 'Type': 'M'}
{'eyes': 'hazel', 'Name': 'Alice', 'weight': 145, 'Taxonomy ID': 2, 'hair': 'black', 'height': "5'7''", 'Type': 'F'} 
```

仅供参考，[Python Pandas](http://pandas.pydata.org/)对于这种聚合要好得多，尤其是在处理 .csv 或 .h5 文件的文件 I/O 时，比其他**东西**`itertools`要好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T21:23:32.400

也许最简单的做法是创建一个新字典，由 (Type, Name, Taxonomy ID) 元组索引，然后遍历您的字典，按 (Type, Name, Taxonomy ID) 存储值。使用默认 dict 使这更容易。例如：

```
from collections import defaultdict
grouped = defaultdict(lambda : {})

# iterate over items and store:
for entry in list_of_dictionaries:
    grouped[(entry["Type"], entry["Name"], entry["Taxonomy ID"])].update(entry)

# now you have everything stored the way you want in values, and you don't
# need the dict anymore
grouped_entries = grouped.values() 
```

这有点骇人听闻，特别是因为您每次使用时都会覆盖“Type”、“Name”和“Phylum” `update`，但由于您的 dict 键是可变的，这可能是您能做的最好的事情。这会让你至少接近你需要的东西。

更好的是在您的初始导入中执行此操作并跳过中间步骤（除非您实际上需要事先转换数据）。另外，如果您可以获取唯一的可变字段，则可以将其更改`update`为：`grouped[(type, name, taxonomy_id)][key] = value`其中键和值类似于：'FX0XST001.MID5'，'195'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T22:15:07.503

```
from itertools import groupby

data = [ {'FX0XST001.MID5': '195', 'Name': 'Firmicutes', 'Taxonomy ID': '1239', 'Type':'phylum'},
  {'FX0XST001.MID13': '4929', 'Name': 'Firmicutes', 'Taxonomy ID': '1239','Type': 'phylum'},
  {'FX0XST001.MID6': '826', 'Name': 'Firmicutes', 'Taxonomy ID': '1239', 'Type': 'phylum'},
  {'FX0XST001.MID6': '125', 'Name': 'Acidobacteria', 'Taxonomy ID': '57723', 'Type': 'phylum'},
  {'FX0XST001.MID25': '70', 'Name': 'Acidobacteria', 'Taxonomy ID': '57723', 'Type': 'phylum'},
  {'FX0XST001.MID40': '40', 'Name': 'Acidobacteria', 'Taxonomy ID': '57723', 'Type': 'phylum'} ,]

kk = ('Name', 'Taxonomy ID', 'Type')

def key(item): return tuple(item[k] for k in kk)

result = []
data = sorted(data, key=key)
for k, g in groupby(data, key):
    result.append(dict((i, j) for d in g for i,j in d.items()))

print result 
```

# matlab - Matlab中随机函数的分布

> ID：12754073
> 
> 赞同：1
> 
> 时间：2012-10-05T21:09:47.897
> 
> 标签：matlab, random, distribution

我在matlab中使用随机函数来产生[1，n]之间的整数和随机函数。例如 random('unid', n) 每次产生一个介于 [1, n] 之间的数字。如果我想将分布从统一更改为另一个怎么办。如何指示随机我想要 [1, n] 之间的整数??????????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:16:05.823

[exprnd](http://www.mathworks.com/help/stats/exprnd.html)使用指数分布。这是最简单的方法。

否则，AFAIK，您将使用该理论来实现随机生成并在其上使用分布。

# git - 如何从 Git 中的标签名称中获取分支？

> ID：12754078
> 
> 赞同：5
> 
> 时间：2012-10-05T21:10:16.777
> 
> 标签：git, git-branch, git-tag

我正在尝试从给定标签中获取分支名称。我试过`git describe --tag <tag-name>`了，但这并没有为我提供任何分支名称。我尝试使用`gitk`显示标签和分支，但 gitk 没有显示标签。当我列出标签时，`git tag -l`我看到标签名称存在于列表中。

我只想要一个简单的命令，它可以在提供标签名称时告诉我分支。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T21:16:48.540

Git 中的标签和分支只是指向文件特定快照的标签。话虽如此，标签不是链接到分支，而是链接到提交。

因此，您必须检查哪个分支包含您的标签指向的提交，如下所示：

```
git branch --contains <tag name> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:23:18.583

标签只是提交的别名。

也就是说，这应该回答你的问题： [https ://stackoverflow.com/a/2707110/550177](https://stackoverflow.com/a/2707110/550177)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-04T13:23:36.027

如果您知道标签链接到的提交编号，您可以通过以下命令找到放置标签的分支：

```
git_branch=$(git for-each-ref | grep ${commit_num} | grep origin | sed "s/.*\///") 
```

# google-app-engine - 每个条目的 AppEngine BlobStore 元数据有多大？

> ID：12754082
> 
> 赞同：1
> 
> 时间：2012-10-05T21:10:40.837
> 
> 标签：google-app-engine, size, metadata, blob, blobstore

我正在尝试处理在 AppEngine 的 BlobStore 中存储 blob 所需的数据开销。

假设我保存了一个 1KB 的 blob，在 BlobStore 和 DataStore 中分别会花费我多少字节？

换句话说：实体需要有多大，才值得将其移至 BlobStore？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:31:22.623

这个问题的答案没有记录，但您可以做一些猜测工作以获得每个 blob 的最小开销。

创建的每个 blob 都需要一个 blob 信息和一个 blob 键。我相信，blob 密钥是 500 字节。blob-info 具有 content_type（字符串）、创建时间（日期时间）、文件名（字符串）和大小（整数）。我们可以假设[每个字符串比它们的长度多使用 1 个字节](https://developers.google.com/appengine/articles/storage_breakdown)。此外，假设您不使用可选的文件名或内容类型字段。那么 blob-info 项将分别约为 1 个字节、8 个字节、1 个字节和 8 个字节，总共 18 个字节。

因此，**一个 blob 项的最小开销可能是每个 blob 至少 518 个字节，存储在数据存储中。**但我们还没有完成，我们仍然需要找出最优定价。

Blob 商店每月的定价为：

```
= $0.13/G * blob_file_size + 518 bytes * $0.24 / gig 
= blob_file_size/1024/1024*.13 + 0.00011856079 
```

而完全在数据存储中的存储定价是：

```
= blob_file_size/1024/1024*.24 
```

**两者成本相同的盈亏平衡点是 1130.2 字节。**再多一点，blobstore 会更便宜，少一点，datastore 会更便宜。当然，这是基于 518 字节的最小开销，我敢打赌开销通常会更高，所以经验法则可能是 2kb。

# json - Coldfusion - 将 CFIF 与 JSON 数据结合使用

> ID：12754090
> 
> 赞同：1
> 
> 时间：2012-10-05T21:11:23.090
> 
> 标签：json, coldfusion

我正在使用 Web API，它返回以下数据（这是 cfhttp.filecontent 的 cfdump）；

```
{"id":"xxx","service1":["xxx"],"service2":["xxx"]} 
```

我需要能够阅读并确定服务是否在列表中。例如，

```
<cfscript>
pdata = deserializeJSON(cfhttp.FileContent);
</cfscript>

<cfif IsDefined(pdata.service1)>Do something</cfif> 
```

但是，我收到上述代码的错误。我最近才开始使用 JSON，到目前为止我已经取得了相当大的成功——但我一直坚持这一点！

非常感谢任何指针！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:15:06.407

它应该是`IsDefined("pdata.service1")`

> 使用 isDefined() CF 需要知道您要询问的变量的名称。名称是一个字符串，因此您传入一个字符串。

起初我发现它有点违反直觉，但 JasonDean 在评论中对此进行了透视。

# php - Magento - 购物车未显示且结帐/购物车页面为空（不显示 .cart div）

> ID：12754096
> 
> 赞同：2
> 
> 时间：2012-10-05T21:11:36.187
> 
> 标签：php, magento, shopping-cart

好的，所以我是 Magento 的新手，并且一直在进行很多更改以使其按照客户想要的方式工作。

显然，在安装和早期，购物车运行良好。我用 CSS 将它移到右上角一段时间，然后我认为我显示：没有它，因为我只是想在继续设计它之前先专注于其他事情一段时间。现在我已经完成了所有其他事情，并且想要处理购物车。麻烦的是 - 它无处可寻，并且我认为我曾经关闭它的 display:none 同样丢失了。也许我从来没有这样做过？

我在 CSS 中找不到任何会关闭购物车的东西 - 我找不到 display:none 或任何父母。大多数网站都使用带有左侧边栏布局的 2 列，我知道购物车默认位于右侧。但是当我在右侧边栏上转身时 - 没有购物车。此外，当我将产品添加到购物车时，我会按预期重定向到 mydomain.com/checkout/cart，但页面上没有任何内容。我的样式、菜单等都存在，但是整页详细购物车应该是空的 .col-main 元素。这让我再次想到问题不在于 CSS。

就好像该网站没有调用购物车（我假设是 cart.phtml？）。我完全有可能在搞砸其他事情的同时搞砸了一些事情（在顶部添加一个 CMS 页面菜单，与调整图像大小有关，将类别菜单移动到左侧边栏）。我的 php 不够好，无法找到罪魁祸首，我什至不确定应该查看哪个文件 - checkout.phtml？

我意识到这个问题几乎没有有价值的信息，但是有人对我应该去哪里有任何想法吗？如果我知道要查看哪个文件，我可以发布相关代码。该站点是 cart.oldfloridian.com。如果你想尝试添加一个产品，目前只有一个，在“ak starfish --> starfish women's”

编辑：所以 /checkout/cart 页面是一个 3column 布局。这是 3columns.phtml 代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->getLang() ?>" lang="<?php echo $this->getLang() ?>">
<head>
<?php echo $this->getChildHtml('head') ?>
</head>
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<div id="cms-menu">
    <?php $collection = Mage::getModel('cms/page')->getCollection()->addStoreFilter(Mage::app()->getStore()->getId());?>
    <?php  $collection->getSelect()
          ->where('is_active = 1'); ?>
    <ul>
    <?php foreach ($collection as $page): ?>
      <?php $PageData = $page->getData(); ?>
      <?php if($PageData['identifier']!='no-route') { ?>
      <li>
        <a href="/<?php echo $PageData['identifier']?>"><?php echo $PageData['title'] ?></a>
      </li>
      <?php } ?>
    <?php endforeach; ?>
    </ul>
</div>
<?php echo $this->getChildHtml('after_body_start') ?>
<div class="wrapper">
    <?php echo $this->getChildHtml('global_notices') ?>
    <div class="page">
        <?php echo $this->getChildHtml('header') ?>
        <div class="main-container col3-layout">
            <div class="main">
                <?php echo $this->getChildHtml('breadcrumbs') ?>
                <div class="col-wrapper">
                    <div class="col-main">
                        <?php echo $this->getChildHtml('global_messages') ?>
                        <?php echo $this->getChildHtml('content') ?>
                    </div>
                    <div class="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
                </div>
                <div class="col-right sidebar"><?php echo $this->getChildHtml('right') ?></div>
            </div>
        </div>
        <?php echo $this->getChildHtml('footer') ?>
        <?php echo $this->getChildHtml('before_body_end') ?>
    </div>
</div>
<?php echo $this->getAbsoluteFooter() ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:00:29.993

那里似乎确实有一个错误 - 我们有一个类似的问题，团队中的两个开发人员看不到购物车，1 个可以 - 但它不仅仅是购物车，而是整个客户部分（登录、购物车、我的帐户等） ）。

我们尝试启用模板路径提示，但页面主要部分中唯一的内容是“frontend/default/default/template/catalog/msrp/popup.phtml”。我们重新安装了大部分 magento - 不走运

我们几乎尝试了所有方法，修复它的是将所有主题文件转换为新主题并重新命名。我唯一能想到的可能是主题名称中的连字符

# bash - Shell 脚本语法错误：意外的行尾

> ID：12754097
> 
> 赞同：2
> 
> 时间：2012-10-05T21:11:38.323
> 
> 标签：bash, shell, cygwin

我编写了一个简单的 shell 脚本来检查 xml 文件是否存在，如果存在，则将旧 xml 文件重命名为备份，然后将新 xml 文件移动到旧 xml 文件的存储位置。

```
#!/bin/sh    

oldFile="/Documents/sampleFolder/sampleFile.xml"
newFile="/Documents/sampleFile.xml"
backupFileName="/Documents/sampleFolder/sampleFile2.backup"
oldFileLocation="/Documents/sampleFolder"

if [ -f "$newFile" ] ; then
    echo "File found"
    #Rename old file
    mv $oldFile $backupFileName
    #move new file to old file's location
    mv $newFile $oldFileLocation
else
    echo "File not found, do nothing"
fi 
```

但是，每次我尝试运行脚本时，我都会收到 4 command not found 消息和语法错误：意外的文件结尾。关于为什么我得到这些命令未找到错误或文件意外结束的任何建议？我仔细检查了我是否关闭了所有双引号，我有代码突出显示:)

编辑：运行脚本的输出：

```
: command not found: 
: command not found: 
: command not found1: 
: command not found6: 
replaceXML.sh: line 26: syntax error: unexpected end of file 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T21:35:19.630

我相信你在 Cygwin 上运行。错误消息比您看到的更多：

```
: command not found: 
: command not found: 
: command not found1: 
: command not found6: 
replaceXML.sh: line 26: syntax error: unexpected end of file 
```

您可能使用 Windows 编辑器创建脚本文件，这意味着它使用 Windows 样式的 CR-LF ( `"\r\n"`) 行结尾，而不是 Unix 样式的 LF ( `'\n'`) 行结尾。Cygwin 下的某些程序可以处理任何一种形式，但 shell 不能。

例如，看起来像的线

```
then 
```

看起来像贝壳

```
then^M 
```

其中 ^M 是 ASCII CR 字符。如果它存在，这实际上是一个有效的命令名，但它不存在，所以 shell 抱怨：

```
then^M: command not found 
```

但是打印 CR 字符会导致光标回到行首，因此之前的所有`:`内容都会被覆盖。

您收到“文件意外结束”消息，因为 shell 从未见过`fi`与`if`.

您可以使用该`dos2unix`命令来修复行尾。请务必阅读手册页 ( `man dos2unix`)；与大多数文本过滤器不同，`dos2unix`它替换其输入文件而不是写入标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:27:28.350

我真的看不出你的代码有什么问题，除了旧的 shell 不在合法的地方。还要注意 mv 参数周围的引号（但如果文件命名正确，这应该不是问题）。

试试这个：

```
#!/bin/sh    

oldFile="/Documents/sampleFolder/sampleFile.xml"
newFile="/Documents/sampleFile.xml"
backupFileName="/Documents/sampleFolder/sampleFile2.backup"
oldFileLocation="/Documents/sampleFolder"

if [ -f "$newFile" ]
then
    echo "File found"
    mv "$oldFile" "$backupFileName"
    mv "$newFile" "$oldFileLocation"
else
    echo "File not found, do nothing"
fi 
```

PS：验证 /bin/sh 是（或指向）基于 bourne 的 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T03:02:52.690

我在我的情况下做了什么：我使用`Bash On Ubuntu on Windows`(in `Windows 10`) 而不是`Cygwin`然后安装`dos2unix`使用`sudo apt-get install dos2unix`并使用以下命令来解决此问题：

```
$ dos2unix < compilelibs.sh > output.sh 
```

# c#-4.0 - 模型中的递归属性

> ID：12754105
> 
> 赞同：0
> 
> 时间：2012-10-05T21:12:13.277
> 
> 标签：c#-4.0, recursion

模型中是否有可能具有递归属性？目标是为每个操作动态构建一个字符串。这是我正在使用的：

```
public class Action
{
    public int ActionId { get; set; }
    public int? ParentId { get; set; }
    public string Name { get; set; }
    public string ActionName { 
    {
        get
        {
            // example result: 1Ai or 2Bi
            return ....
        }
    }
}

List<Action> aList = new List<Action>() {
    new Action { ActionId = 1, Name = "Step 1" },
    new Action { ActionId = 2, Name = "Step 2" },
    new Action { ActionId = 3, ParentId = 1, Name = "A" },
    new Action { ActionId = 4, ParentId = 1, Name = "B" },
    new Action { ActionId = 5, ParentId = 2, Name = "A" },
    new Action { ActionId = 6, ParentId = 2, Name = "B" },
    new Action { ActionId = 5, ParentId = 3, Name = "i" },
    new Action { ActionId = 6, ParentId = 6, Name = "i" }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:23:08.460

这当然是可能的（尽管我不会称之为递归）。您可以通过在构造函数中传递父级来做到这一点。

```
public class Foo
{
   public Foo(string name)
   {
      Name = name;
   }

   public Foo(Foo parent, string name)
   {
      Name = parent.Name + name;
   }

   public string Name {get; set;}
}

//

var foo = new Foo("Step 1");
var bar = new Foo(foo, "A");

// etc. 
```

有时人们喜欢在子类中保留对整个父类的引用，因此例如可以使用最新版本动态生成 name 属性。

这确实会产生一连串的调用（所以要小心！）

```
public class Foo
{
   string _innerName;

   public Foo(string name)
   {
      _innerName = name;
   }

   public Foo(Foo parent, string name)
   {
      _innerName = name;
      _parent = parent;
   }

   public string Name
   {
      get
      {
         return parent == null? _innerName; parent.Name + _innerName;
      }
   }
}

//

var foo = new Foo("Step 1");
var bar = new Foo(foo, "A");

// etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:30:44.840

有很多方法可以做到这一点，其中一种可能的方法：

```
 class Program
    {
        static List<Action> aList;

        static void Main(string[] args)
        {
            aList = new List<Action>() {
    new Action { ActionId = 1, Name = "Step 1" },
    new Action { ActionId = 2, Name = "Step 2" },
    new Action { ActionId = 3, ParentId = 1, Name = "A" },
    new Action { ActionId = 4, ParentId = 1, Name = "B" },
    new Action { ActionId = 5, ParentId = 2, Name = "A" },
    new Action { ActionId = 6, ParentId = 2, Name = "B" },
    new Action { ActionId = 5, ParentId = 3, Name = "i" },
    new Action { ActionId = 6, ParentId = 6, Name = "i" }
};
            Console.WriteLine(aList[2].ActionName);
            Console.ReadKey();

        }

        public class Action
        {
            public int ActionId { get; set; }
            public int? ParentId { get; set; }
            public string Name { get; set; }
            public string ActionName
            {

                get
                {
                    // example result: 1Ai or 2Bi
                    var parent = aList.Find((p) => p.ActionId == ParentId).ActionId;
                    var child = aList.Find((p) => p.ParentId == ActionId).Name;
                    return  String.Format("{0}{1}{2}", parent, Name, child) ;
                }
            }
        }
    } 
```

# php - 展开任务时间

> ID：12754107
> 
> 赞同：2
> 
> 时间：2012-10-05T21:12:19.217
> 
> 标签：php, explode

我的一个 csv 导入到数据库的字段值看起来像这样 '24h 30m'

我如何分解这以分离两组数字？这是我到目前为止所拥有的

```
$tasktime  = "24h 30m";
$pieces = explode("h ", $tasktime);
echo $pieces[0]; // want this to echo 24
echo $pieces[1]; // want this to echo 30 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:16:45.300

非常简单（[演示](http://codepad.viper-7.com/wYtdKK)）

```
$pieces = array_map('intval', explode(' ', "24h 30m")); 
```

这将按空格分割字符串，然后从两个元素中的每一个中获取整数值。

进一步参考：

*   [`explode`— 逐个字符串拆分](http://php.net/manual/en/function.explode.php)
*   [`array_map`— 将回调应用于给定数组的元素](http://php.net/array_map)
*   [`intval`— 获取变量的整数值](http://php.net/manual/en/function.intval.php)
*   [回调](http://php.net/manual/en/language.types.callable.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:18:26.480

```
$tasktime  = "24h 30m";
$pieces = explode("h ", $tasktime);
$pieces[1] = rtrim($pieces[1], "m");
echo $pieces[0]; // want this to echo 24
echo $pieces[1]; // want this to echo 30 
```

我实际上不知道php，但这对我来说很有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:18:32.083

这行得通。谢谢！

```
$tasktime  = "24h 30m";
$pieces = array_map('intval', explode(' ', $tasktime)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T21:20:12.567

如果它总是这种格式，你可以这样做来获取一个[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)对象。

```
$tasktime  = "24h 30m";    
$interval = new DateInterval('PT' . strtoupper(str_replace(' ', '', $tasktime)));

print_r($interval); 
```

输出

```
DateInterval Object
    (
        [y] => 0
        [m] => 0
        [d] => 0
        [h] => 24
        [i] => 30
        [s] => 0
        [invert] => 0
        [days] =>
    ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T21:40:27.640

以下是您可以如何将其编写为正则表达式：

```
$tasktime = "24h 30m";
preg_match('/(\d+)h (\d+)m/', $tasktime, $pieces);
echo $pieces[1]; // echoes 24
echo $pieces[2]; // echoes 30 
```

# jquery - 使用 jQuery 隐藏/显示 html 表中的列 - 单元格不保留大小

> ID：12754110
> 
> 赞同：0
> 
> 时间：2012-10-05T21:12:33.447
> 
> 标签：jquery, html-table

我有一个 html 表，其中填充了来自数据库的信息。为了显示/隐藏列，我在这篇文章中实现了单行方法 [Hide/Show Column in an HTML Table](https://stackoverflow.com/questions/455958/hide-show-column-in-an-html-table)

我实现该方法的代码如下所示：

```
$("#ID").change(function(){
if ($(this).is(':checked'))
{
    $('th:nth-child(2)').hide("fast");
    $('td:nth-child(2)').hide("fast");
} else {
    $('th:nth-child(2)').show("fast");
    $('td:nth-child(2)').show("fast");
    }

}); 
```

除了当我在表格中再次显示该列时，单元格宽度和内容都被弄乱了，这很好用。我想知道是否有任何方法可以将其设置为扩展？

这是正在发生的事情的照片：

![表格单元格不展开图片](../Images/f493672f1a71215021762aeff154239a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:03:17.377

具体来说，使用您上面提供的示例，我不确定是什么导致了您的问题。

虽然问题可能出在 hide() 方法上，但我已经使用您的脚本在同一个想法上尝试了几次不同的迭代，但我无法让它重现相同的行为。

然而，一些更正...

1.  忽略上面关于“display:hidden;”的评论 ...没有这样的属性。我认为这个人可能一直在尝试引用“可见性：隐藏”，但这会使内容消失，但空间不会消失......所以你会有一个空列仍然坐在那里，其内容是不可见的。
2.  如果您将处理程序设置为一堆复选框，您可能会考虑对您的处理方式进行一些优化。我创建了一个 jsfiddle，它展示了另一种可以完成类似事情的方式。看看这对您是否有意义，如果没有，我很乐意澄清您有任何疑问。

[http://jsfiddle.net/mori57/znKUJ/](http://jsfiddle.net/mori57/znKUJ/)

如果您想在单独的 jsFiddle 中发布一些标记和 CSS，我很乐意查看并尝试为您提供更具体的指导。

# jquery - 如何创建一个从 onclick 事件加载外部页面的简单弹出 div？

> ID：12754113
> 
> 赞同：0
> 
> 时间：2012-10-05T21:12:45.093
> 
> 标签：jquery, html, parameters, onclick, popup

因为我对 jQuery 很陌生，所以我在这个问题上遇到了一些麻烦。我正在将人员显示在表格中。当我单击一个人时，我想要一个简单的弹出窗口，其中包含有关该人的更多信息。我可以找到如何从单击事件中弹出 div 的示例，但不能找到如何将 id 解析到加载的页面中。如果我点击外面的某个地方，如何关闭 div。

我还在寻找一个在离开时清除 div 的选项，所以如果你点击另一个 id，在加载之前你不会看到旧的。

如果我能让弹出窗口正常运行，我发现这个例子适合我的需要。看看[这里的演示。](http://hjalmarson.net/divtest/).

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery Tutorial - Pop-up div on hover</title>
<style type="text/css">
  body {
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #000 url(bg-texture.png) repeat;
    color: #dddddd;
  }

  h1, h3 {
    margin: 0;
    padding: 0;
    font-weight: normal;
  }

  a {
    color: #EB067B;
  }

  div#container {
    width: 580px;
    margin: 100px auto 0 auto;
    padding: 20px;
    background: #000;
    border: 1px solid #1a1a1a;
  }

  /* HOVER STYLES */
  div#pop-up {
    display: none;
    position: absolute;
    width: 280px;
    padding: 10px;
    background: #eeeeee;
    color: #000000;
    border: 1px solid #1a1a1a;
    font-size: 90%;
  }
</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script type="text/javascript">

  $(function() {
    var moveLeft = 20;
    var moveDown = 10;

    $('a#trigger').click(function(e) {
  $('#pop-up').load('page.php?id=$id');
      $('#pop-up').show();
  $("#pop-up").css('top', e.pageY + moveDown).css('left', e.pageX + moveLeft);
      //.css('top', e.pageY + moveDown)
      //.css('left', e.pageX + moveLeft)
      //.appendTo('body');
    }, function() {
      $('div#pop-up').hide();
    });

  });
</script>
</head>
<body>
<div id="container">
  <h1>jQuery Tutorial - Pop-up div on hover</h1>
  <p>
    To show hidden div, simply hover your mouse over
    <a href="#" id="trigger" value="999">this link</a>.
  </p>

  <!-- HIDDEN / POP-UP DIV -->
  <div id="pop-up">pop-up</div>
  <br />

what im trying to do<br>
onclick - show div, and load name.php?id=999 into the div<br>
keep the div open until one click outside the div, or if there is a exit button inside div.
</div>
</body>
</html> 
```

这是我创建的要包含在 div 中的文件：

```
<?php

if (isset($_GET['id'])) {
$id = $_GET['id'];
echo "You have clicked on id: $id";

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:22:48.820

id 的问题出在这一行：

$('#pop-up').load('page.php?id=$id');

将其更改为：

$('#pop-up').load("page.php?id="+id);

然后在某处设置您的 ID 变量。

为了让它下次干净，当你隐藏它时，我只是清空 div 的内容。

不确定是否要从头顶关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:34:46.153

这就是我解决它的方法。单击下面的链接，将打开弹出窗口并将参数 332 添加到 url。

```
<a href="#" id="332">this link has id 332, but is just an example</a>.

$("body").click(function(e) {

    $.ajaxSetup({
    cache: false 
    }); 

    //get the value from the clicked DIV
    var idName = e.target.id;

    //pass the id from the div to the URL by adding idName
    var urlToLoad = 'page.php?groupId=' + idName

    //load the url with the passed parameter
    $('#popUp').load(urlToLoad);
    $('#popUp').show();
}) 
```

# bash - Bash：限制 ls 和 grep 的输出

> ID：12754114
> 
> 赞同：0
> 
> 时间：2012-10-05T21:12:59.447
> 
> 标签：bash, grep, ls

让我举一个例子，然后尝试解释我的问题：

```
noob@noob:~/Downloads$ ls | grep srt$
Elementary - 01x01 - Pilot.LOL.English.HI.C.orig.Addic7ed.com.srt
Haven - 01x01 - Welcome to Haven.DVDRip.SAiNTS.English.updated.Addic7ed.com.srt
Haven - 01x01 - Welcome to Haven.FQM.English.HI.C.updated.Addic7ed.com.srt
Supernatural - 08x01 - We Need to Talk About Kevin.LOL.English.HI.C.updated.Addic7ed.com.srt
The Big Bang Theory - 06x02 - The Decoupling Fluctuation.LOL.English.HI.C.orig.Addic7ed.com.srt
Torchwood - 1x01 - Everything changes.0TV.English.orig.Addic7ed.com.srt
Torchwood - 1x01 - Everything changes.divx.English.updated.Addic7ed.com.srt 
```

现在我只想删除`four results`上面的第一个命令。通常，如果我必须删除所有我会做的文件，`ls | grep srt$ | xargs -I {} rm {}`但在这种情况下，我只想删除前四个。

那么，如何限制 ls 和 grep 的输出或建议我另一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:14:55.723

您可以通过管道将命令`head -n`限制为`n`行：

```
ls | grep srt | head -4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:19:45.680

```
$ for i in `seq 1 345`; do echo $i ;done | sed -n '1,4p' 
1
2
3
4
geee: ~
$ for i in `seq 1 345`; do echo $i ;done | sed -n '335,360p' 
335
336
337
338
339
340
341
342
343
344
345 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T21:28:15.283

如果文件不多，可以使用`bash`数组：

```
matching_files=( *.srt )
rm "${matching_files[@]:0:4}" 
```

# c++ - 在 C++ 中创建一些序列化原型的快速'n'dirty 方法？

> ID：12754115
> 
> 赞同：0
> 
> 时间：2012-10-05T21:13:01.460
> 
> 标签：c++, serialization

我需要做一个原型，其中涉及一些 C++ 中的序列化。这是一个快速的'n'dirty原型，所以我不需要一般地解决问题，提供良好的错误检查，或类似的东西。但同时，我确实需要能够序列化任意长度和任意字符的字符串。

是否有一些关于如何在 C++ 中快速进行数据序列化的最佳实践？通常我只是将输出记录放入一个文本文件中，每行一条记录，但我的字符串中可能有新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:15:29.737

您可以考虑使用[JSON](http://json.org/)，特别是通过[JsonCpp](http://jsoncpp.sourceforge.net/)。您还可以使用[libs11n](http://s11n.net/s11n/)，这是一个成熟的、模板友好的 C++ 序列化框架。（如果您想要 Json 的 C 库，请考虑[jansson](http://www.digip.org/jansson/)）。

您也可以考虑使用旧的[XDR](http://en.wikipedia.org/wiki/External_Data_Representation)或[ASN1](http://en.wikipedia.org/wiki/Asn1)技术。

对于一个快速而肮脏的原型，我推荐`JsonCpp`上面提到的库。在这种情况下使用 JSON 很有用，因为它是一种文本的、几乎对人类友好的格式。

稍后您甚至可以考虑使用具有类似 Json 模型的[MongoDb 。](http://www.mongodb.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:16:23.707

带 bo​​ost 的结帐序列化：

[http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)

一点也不脏，但绝对很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:32:48.540

如果您不介意二进制数据，请为每个字符串转储一个长度（转换为 char*），然后将字符串的值转储到文件中。很容易回读。POD 结构也可以通过转换为 char* 直接转储

# magento - 如何放置 Magento 主题块？

> ID：12754120
> 
> 赞同：0
> 
> 时间：2012-10-05T21:13:55.920
> 
> 标签：magento, themes, magento-1.7

我正在使用两个插件，easycatalogimg 和bannerslider。

出于理智的目的，我使用的是默认的 Magento 主题，我只是想学习模板引擎。

当我启用 easycatalogimg 时，它会出现在主页的横幅滑块**上方。**我正在使用以下代码在 CMS -> 主页中调用 bannerslider.phtml。

```
{{block type='bannerslider/bannerslider' template='bannerslider/bannerslider.phtml'}} 
```

我想调用bannerslider，然后调用easycatalogimg。问题是，我无法确定`block type`easycatalogimg 是什么。如果可以的话，我会关闭主页显示，然后将块放在其下方。当我打开设置以使 easycatalogimg 出现在主页上时，它会将自身插入到页面内容的其余部分**之上。**

我可以打开哪些文件来确定 easycatalogimg 是什么块类型？然后我可以在横幅滑块下方执行此代码。

```
{{block type='foo/bar' template='default/default/easycatalogimg.home.phtml'}} 
```

现在，easycatalogimg 出现在主页上。

在一个理想的世界中，这里的解决方案是我会编辑一个页面，比如......

```
frontend/base/default/template/cms/content_heading.phtml 
```

...在该页面中，调出bannerslider.phtml 和easycatalogimg/homepage.phtml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:30:02.937

打开你想知道类型的块的模板文件。如果它是一个默认的 Magento 模板，它通常会在顶部有 Block_Class 名称。如果没有，请运行：

```
<?php echo get_class($this) ?> 
```

这将为您提供 Block_Class 名称，然后将其转换为 Magento 的调用约定，例如：

```
<?php $block = $this->getLayout()->getBlock('core/template') ?> 
```

'core/template' 被翻译成 Mage_Core_Block_Template

# ruby - 改变数组中对象的属性，一个数学问题

> ID：12754122
> 
> 赞同：0
> 
> 时间：2012-10-05T21:14:17.650
> 
> 标签：ruby

我有一个硬汉给你。

我有一个程序用“w”类型的 Tile 对象填充二维数组。然后程序在数组中选择一个随机点（中心）并尝试转动距离中心为 4 的半径内的所有对象。不知何故，程序没有这样做，我认为问题出在数学公式上，但我找不到错误。

```
class Map
  def initialize(d1,d2)
    @data = Array.new(d1) { Array.new(d2)}
  end

  def [](x, y)
   @data[x][y]
  end

  def x(x)
    @data[x]
  end

  def y(y)
    @data[y]
  end

  def []=(x, y, value)
    @data[x][y] = value
  end
end

# TILES
class Tile
  # Types = ["l", "w", "r"]
  attr_accessor :type
  def initialize(type)
    @type = type
  end

  def set(string)
    @type = string
  end
  def to_s
     @type
  end
end

# REAL ACTION HERE
def generate 
  h = 20
  w = 20
  i = 0
  worldmap = Map.new(20, 20)
  while i < h do
    n = 0
    while n < w do
      worldmap.[] = (i, n, Tile.new("w"))
      n = n + 1 
    end
    i = i + 1
  end 

  gen(worldmap)
  look(worldmap)
end

def look(map)
  z = 0
  b = 0
  c = 0
  string = " "
  while b < 20 do
    while z < 20 do  
      string = string + map.[](b, z).to_s
      z = z + 1
    end 
    b = b + 1 
    puts string
    c = c + 1
  end
end

def gen(map)
  circle_amount = 1

  i = 0
  x = 0
  y = 0
  while i < circle_amount do 
    #select a center
   cy = (rand(1..20))
   cx = (rand(1..20))
   center = map.[](cx,cy)
   center.set("C")

   radius = 4
   puts cy.to_s + " " +  cx.to_s

   while y < 20
     while x < 20
       offsetY = y - cy 
       offsetX = x - cx 
       distance = offsetY**2 + offsetX**2
       if distance <= radius**2 then 
           tile = map.[](y, x)
           tile.set("l") # I DID IT
         end
       x = x + 1
     end
      y = y + 1
   end
   i = i + 1
  end
end

generate 
```

以下是输出示例

> wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww wwwwwwwwwwwwlllllwww
> 
> C:/Users/borya/Documents/NetBeansProjects/LearningPurporse/lib/main.rb:7:in `[]': >undefined method`[]' for nil:NilClass (NoMethodError)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:50:45.387

```
 > m = Map.new(5,5)
 => #<Map:0x007fa5d9838fc0 @data=[[nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil]]> 
ruby-1.9.3-p125 :040 > m[1,1]="hi"
(x=1, y=1) = hi
@data[x][y]=hi
 => "hi" 
 > m
 => #<Map:0x007fa5d9838fc0 @data=[[nil, nil, nil, nil, nil], [nil, "hi", nil, nil, nil], [nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil]]> 
```

* * *

我可能会编写更接近下面的代码，尽管它有点不合时宜，并且我保留了你的一些原始代码，即使它可能不是我会这样做的。

```
class Map
  attr_reader :data, :x, :y

  def initialize(x, y)
    @x = x
    @y = y
    @data = Array.new(x) { Array.new(y) }
  end

  def set(&block)
    (0..x-1).each do |i|
      (0..y-1).each do |j|
        result = yield i, j, @data[i][j]
        @data[i][j] = result if result
      end
    end
  end

  def [](x, y)
    @data[x][y]
  end

  def []=(x, y, value)
    @data[x][y] = value
  end

  def dump
    (0..x-1).each do |i|
      string = ""
      (0..y-1).each do |j|
        string += "#{self[i, j]} "
      end
      puts string
    end
  end
end

def generate 
  map = Map.new(20, 20)
  map.set { |x, y, at| Tile.new('w') }
  gen(map)
end

def gen(map)
  3.times do |i|
    cy = rand(0..map.x-1)
    cx = rand(0..map.y-1)
    puts "cx=#{cx}, cy=#{cy}"
    map[cx, cy].set('C')
    map.dump

    radius = 3.0

    map.set do |x, y, at|
      offsetX = x - cx
      offsetY = y - cy
      distance = Math.sqrt(offsetY**2 + offsetX**2)
      distance.abs <= radius ? '.' : false
    end

    puts ''
    map.dump
  end
end 
```

一旦你修正了你的数学，你最终会得到这样的结果：

```
w w w w w w w w w w w w w w w w w . w w 
w w w w w w w w w w w w w w w . . . . . 
w w w w w w w w w w w w w w w . . . . . 
w w w w w w w w w w w w w w . . . . . . 
w w w w w . w w w w w w w w w . . . . . 
w w w . . . . . w w w w w w w . . . . . 
w w w . . . . . w w w w w w w w w . w w 
w w . . . . . . . w w w w w w w w w w w 
w w w . . . . . w w w w w w w w w w w w 
w w w . . . . . w w w w w w w w w w w w 
w w w w w . w w w w w w w w w w w w w w 
w w w w w w w w w w w w w w w w w w w w 
w w w w w w w w w w w w w w w w w w w w 
w w w w w w w w w w w w w w w w w w w w 
w w w w w w w w w w w w . w w w w w w w 
w w w w w w w w w w . . . . . w w w w w 
w w w w w w w w w w . . . . . w w w w w 
w w w w w w w w w . . . . . . . w w w w 
w w w w w w w w w w . . . . . w w w w w 
w w w w w w w w w w . . . . . w w w w w 
```

警告：此代码超出您的技能水平，您可能希望将其翻译回具有额外冗长的 while 循环，直到您进一步了解为止。

Boris，您的原始代码很难推理，原因有很多，包括随机缩进/格式和简单的语法错误。一致地格式化代码很重要。这样做可以让您和其他人更轻松地阅读它。

熟悉您使用的语言的范例很重要。一般来说，如果 Ruby 代码有 while 循环、计数器增量等，而它们实际上并没有用于索引以外的任何事情，那就是代码异味。Canonical Ruby 倾向于使用`.each`、 块等更实用的风格。

你是正确的，你的数学是错误的，尽管我怀疑你不知道它有多么错误。像这样的数学*很*容易调试：手工完成。画一个网格。使用程序`(cx, cy)`并手动进行计算。做一些健全的检查，以确保你*认为*你在做的是（a）你实际上在做的，和（b）合理的。

例如，您的距离有时是数百。显然，当您的网格是...时，这是*没有*意义的`(20, 20)`……一旦您看到了，解决方案就很明显了——您省略了一个步骤。

相同的逻辑可用于其余的数学问题。

玩电脑……做电脑。按照它的步骤，在纸上。没有比内化“屏幕下方”实际发生的事情更快的理解途径了。

# android - 以编程方式取消/选择 ListView 项目

> ID：12754135
> 
> 赞同：1
> 
> 时间：2012-10-05T21:14:55.823
> 
> 标签：android, android-listview

> **可能重复：**
> [退出选择模式后，ListView 选择保持不变](https://stackoverflow.com/questions/9754170/listview-selection-remains-persistent-after-exiting-choice-mode)

我的应用程序中有一个列表视图，它在 listitem_row.xml 中包含多个组件（我为每个项目使用的布局）。我面临的问题是我有一个用于选择每个项目的 ActionMode。当用户选择任何项目时，将创建操作模式并按预期工作。当我关闭动作模式时，我想让项目看起来像选择之前一样未选择/突出显示/激活/检查。这是我正在使用的代码：

```
if (selectedView.isPressed()) {
    selectedView.setPressed(false);
}
if (selectedView.isActivated()) {
    selectedView.setActivated(false);
}
if (selectedView.isSelected()) {
    selectedView.setSelected(false);
}
if (selectedView.isFocused()) {
    selectedView.clearFocus();
    selectedView.dispatchWindowFocusChanged(false);
}
selectedView.refreshDrawableState();
selectedView.requestLayout();
if (selectedView.isDirty()) {
    selectedView.postInvalidate();
} 
```

为了信息的缘故：我单独尝试了所有组合。我上面粘贴的代码是我在似乎没有任何工作时达到的状态。我使用调试检查了所有状态，当用户单击关闭操作模式按钮时，唯一处于真实状态的状态是激活状态。

这是我的列表视图行的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/row"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="?android:attr/activatedBackgroundIndicator"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/innerrow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/listview_selector"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/listViewHeading"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:drawableLeft="@drawable/mydrawable"
            android:drawablePadding="5sp"
            android:gravity="center|left"
            android:paddingBottom="5sp"
            android:paddingLeft="15sp"
            android:paddingRight="15sp"
            android:paddingTop="5sp"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/app_text_color"
            android:textStyle="bold" />

        <View
            style="@style/line"
            android:layout_width="match_parent"
            android:layout_height="1dp" />

        <TextView
            android:id="@+id/listViewDetail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="15sp"
            android:paddingLeft="15sp"
            android:paddingRight="15sp"
            android:paddingTop="5sp"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/app_text_color" />
    </LinearLayout>

</LinearLayout> 
```

任何建议/反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:32:07.080

For any ListView item, which already has a single choice mode for it, only two lines are required for the removal of the selection:

```
myListView.clearChoices();
myListView.requestLayout(); 
```

This solved my problem.

# ruby - 用 Ruby 解析电子邮件：意外的令牌 ATOM（预期的 SPACE）（Net::IMAP::ResponseParseError）

> ID：12754144
> 
> 赞同：1
> 
> 时间：2012-10-05T21:15:33.643
> 
> 标签：ruby, email

我开始使用 Ruby 解析电子邮件。我正在尝试从我的 GMail 帐户中读取：

```
require 'rubygems'
require 'mail'

Mail.defaults do
  retriever_method :imap, :address    => "imap.gmail.com",
                          :port       => 995,
                          :user_name  => 'example@gmail.com',
                          :password   => 'password',
                          :enable_ssl => true
end

emails = Mail.all

emails.each do |email|
    puts email.inspect
end 
```

...但我收到此错误：

```
/Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/imap.rb:3277:in `parse_error': unexpected token ATOM (expected SPACE) (Net::IMAP::ResponseParseError)
    from /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/imap.rb:3129:in `match'
    from /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/imap.rb:2100:in `continue_req'
    from /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/imap.rb:2087:in `response'
    from /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/imap.rb:2015:in `parse'
    from /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/imap.rb:1166:in `get_response'
    from /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/imap.rb:1051:in `initialize'
    from /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/network/retriever_methods/imap.rb:143:in `new'
    from /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/network/retriever_methods/imap.rb:143:in `start'
    from /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/network/retriever_methods/imap.rb:65:in `find'
    from /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/network/retriever_methods/base.rb:41:in `all'
    from /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/mail.rb:171:in `all' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:15:39.830

Ruby 的 IMAP 解析器有错误。您的错误输出表明问题不太可能出在您的代码中，很可能是 Ruby IMAP 解析器代码，如果不修补 Ruby，您将无法轻易更改。

如果您只是对 Gmail 感兴趣，并且想尝试更简单的解决方案，请尝试使用 Gmail gem：

[https://github.com/nu7hatch/gmail](https://github.com/nu7hatch/gmail)

如果您有兴趣了解正在发生的事情的详细信息以及可能如何修补 Ruby：

[http://claudiofloreani.blogspot.com/2012/01/monkeypatching-ruby-imap-class-to-build.html](http://claudiofloreani.blogspot.com/2012/01/monkeypatching-ruby-imap-class-to-build.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-26T12:45:11.360

如果您尝试在 POP3 邮件服务器上执行 IMAP，则此错误消息很典型。

Google Mail 的 IMAP 端口是 993。您尝试的端口是 POP3。

# jquery-mobile - backbone view passed to jQuery Mobile

> ID：12754151
> 
> 赞同：0
> 
> 时间：2012-10-05T21:16:17.663
> 
> 标签：jquery-mobile, backbone-views

I've been trying to use backbonejs and jqm together.

I can render the main page alright. The page has a list that the user can tap on. The item selected should show a detail page with info on the list item selected. The detail page is a backbone view with a template that's rendered in the item's view object.

The detail's view .render() produces the html ok and I set the html of the div tag of the main page to the rendered item's detail markup. It looks like this:

```
podClicked: function (event) {             
        console.log("PodListItemView: got click from:" + event.target.innerHTML + " id:" + (this.model.get("id") ? this.model.get("id") : "no id assigned") + "\n\t CID:" + this.model.cid);
        var detailView = new PodDetailView({ model: this.model });
        detailView.render();
    }, 
```

The detail view's render looks like this:

```
 render: function () {
        this.$el.html(this.template({ podId: this.model.get("podId"), isAbout_Name: this.model.get("isAbout_Name"), happenedOn: this.model.get("happenedOn") }));
        var appPageHtml = $(app.el).html($(this.el));
        $.mobile.changePage("");  // <-- vague stab in the dark to try to get JQM to do something.  I've also tried $.mobile.changePage(appPageHtml).
        console.log("PodDetailView: render");
        return this;
    } 
```

I can see that the detail's view has been rendered on the page by checking Chrome's dev tools html editor but it's not displaying on the page. All I see is a blank page.

I've tried $.mobile.changePage() but, without an URL it throws an error.

How do I get JQM to apply it's class tags to the rendered html?

the HTML and templates look like this:

```
<!-- Main Page -->
<div id="lessa-app" class="meditator-image" data-role="page"></div>
<!-- The rest are templates processed through underscore -->
<script id="app-main-template" type="text/template">
    <div data-role="header">
        <h1>@ViewBag.Title</h1>
    </div>
    <!-- /header -->

    <div id="main-content" data-role="content">
        <div id="pod-list" data-theme="a">
            <ul data-role="listview" >
            </ul>
        </div>
    </div>

    <div id="main-footer" data-role='footer'>
        <div id="newPod" class="ez-icon-plus"></div>
    </div>
</script>
<script id="poditem-template" type="text/template">
   <span class="pod-listitem"><%= isAbout_Name %></span> <span class='pod-listitem ui-li-aside'><%= happenedOn %></span> <span class='pod-listitem ui-li-count'>5</span>
</script>
<script id="page-pod-detail-template" type="text/template">
    <div data-role="header">
        <h1>Pod Details</h1>
    </div>
    <div data-role="content">
        <div id='podDetailForm'>
            <fieldset data-role="fieldcontain">
                <legend>PodDto</legend>
                <label for="happenedOn">This was on:</label>
                <input type="date" name="name" id="happenedOn" value="<%= happenedOn %>" />
            </fieldset>
        </div> 
        <button id="backToList" data-inline="false">Back to list</button>
    </div>
    <div data-role='footer'></div>
</script> 
```

Thanks in advance for any advice... is this even doable?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:25:08.773

I've finally found a way to do this. My original code has several impediments to the success of this process.

The first thing to do is to intercept jquerymobile's (v.1.2.0) changePage event like this: (I've adapted the outline from jqm's docs and left in the helpful comments: see [http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html) )

```
 $(document).bind("pagebeforechange", function (e, data) {

        // We only want to handle changePage() calls where the caller is
        // asking us to load a page by URL.
        if (typeof data.toPage === "string") {

            // We are being asked to load a page by URL, but we only
            // want to handle URLs that request the data for a specific
            // category.
            var u = $.mobile.path.parseUrl(data.toPage),
                re = /^#/;

            // don't intercept urls to the main page allow them to be managed by JQM
            if (u.hash != "#lessa-app" && u.hash.search(re) !== -1) {

                // We're being asked to display the items for a specific category.
                // Call our internal method that builds the content for the category
                // on the fly based on our in-memory category data structure.
                showItemDetail(u, data.options); // <--- handle backbone view.render calls in this function

                // Make sure to tell changePage() we've handled this call so it doesn't
                // have to do anything.
                e.preventDefault();
            }
        }
    }); 
```

The changePage() call is made in the item's list backbone view events declaration which passes to the podClicked method as follows:

```
 var PodListItemView = Backbone.View.extend({
        tagName: 'li', // name of (orphan) root tag in this.el
        attributes: { 'class': 'pod-listitem' },

        // Caches the templates for the view
        listTemplate: _.template($('#poditem-template').html()),
        events: {
            "click .pod-listitem": "podClicked"
        },
        initialize: function () {
            this.model.bind('change', this.render, this);
            this.model.bind('destroy', this.remove, this);
        },
        render: function () {
            this.$el.html(this.listTemplate({ podId: this.model.get("podId"), isAbout_Name: this.model.get("isAbout_Name"), happenedOn: this.model.get("happenedOn") }));
            return this;
        },
        podClicked: function (event) {
            $.mobile.changePage("#pod-detail-page?CID='" + this.model.cid + "'");
        },
        clear: function () {
            this.model.clear();
        }
    }); 
```

In the 'showItemDetail' function the query portion of the url is parsed for the CID of the item's backbone model. Again I've adapted the code provided in the jquerymobile.com's link shown above.

Qestion: I have still figuring out whether it's better to have the code in showItemDetail() be inside the view's render() method. Having a defined function seems to detract from backbone's architecture model. On the other hand, having the render() function know about calling JQM changePage seems to violate the principle of 'separation of concerns'. Can anyone provide some insight and guidance?

```
 // the passed url looks like #pod-detail-page?CID='c2'
    function showItemDetail(urlObj, options) {

        // Get the object that represents the item selected from the url
        var pageSelector = urlObj.hash.replace(/\?.*$/, "");
        var podCid = urlObj.hash.replace(/^.*\?CID=/, "").replace(/'/g, "");

        var $page = $(pageSelector),
           // Get the header for the page.
           $header = $page.children(":jqmData(role=header)"),
           // Get the content area element for the page.
           $content = $page.children(":jqmData(role=content)");

        // The markup we are going to inject into the content area of the page.
        // retrieve the selected pod from the podList by Cid
        var selectedPod = podList.getByCid(podCid);

        // Find the h1 element in our header and inject the name of the item into it
        var headerText = selectedPod.get("isAbout_Name");
        $header.html("h1").html(headerText);

        // Inject the item info into the content element
        var view = new PodDetailView({ model: selectedPod });
        var viewElHtml = view.render().$el.html();
        $content.html(viewElHtml);

        $page.page();

        // Enhance the listview we just injected.
        var fieldContain = $content.find(":jqmData(role=listview)");
        fieldContain.listview();

        // We don't want the data-url of the page we just modified
        // to be the url that shows up in the browser's location field,
        // so set the dataUrl option to the URL for the category
        // we just loaded.
        options.dataUrl = urlObj.href;

        // Now call changePage() and tell it to switch to
        // the page we just modified.
        $.mobile.changePage($page, options);
    } 
```

So the above provides the event plumbing.

The other problem I had was that the page was not set up correctly. It's better to put the page framework in the main html and not put it in an underscore template to be rendered at a later time. I presume that avoids issues where the html is not present when jqm takes over.

```
<!-- Main Page -->
<div id="lessa-app" data-role="page">
  <div data-role="header">
    <h1></h1>
  </div>
  <!-- /header -->
  <div id="main-content" data-role="content">
    <div id="pod-list" data-theme="a">
      <ul data-role="listview">
      </ul>
    </div>
  </div>
  <div id="main-footer" data-role='footer'>
    <div id="main-newPod" class="ez-icon-plus"></div>
  </div>
</div>
<!-- detail page -->
<div id="pod-detail-page" data-role="page">
    <div data-role="header">
        <h1></h1>
    </div>
    <div id="detail-content" data-role="content">
        <div id="pod-detail" data-theme="a">
        </div>
    </div>
  <div id="detail-footer" data-role='footer'>
     <a href="#lessa-app" data-role="button" data-mini="true">back</a>
  </div>
</div> 
```

# actionscript-3 - 从另一个电影剪辑中获取图形/电影剪辑 x,y 位置？

> ID：12754157
> 
> 赞同：0
> 
> 时间：2012-10-05T21:16:51.723
> 
> 标签：actionscript-3, flash, movieclip, graphic

我认为这应该相当简单，我只是对动作脚本不太熟悉哈哈。

我有一个游戏，我让背景在屏幕上停留在一个位置的角色后面移动。我对 actionscript 3 比较陌生，但我希望每当玩家在背景中传递的某些对象上按下一个键时都会弹出文本框。

所以，基本上背景本身就是一个影片剪辑，而我在背景 mc 中还有其他图形和影片剪辑。

我正在考虑获取 player.x 和 y 位置，然后将该位置（>= 和 <= 等）与背景中的图形/电影剪辑“比较”。但我就是不知道如何获取后台mc中图形/电影剪辑的x和y坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:11:43.500

您可以尝试通过获取它们的坐标，然后删除其父级的位置（背景容器）来定位背景中的影片剪辑。

就像是 ：

var finalXPosition:int = targetMovieClip.x - backgroundContainer.x;

var finalYPosition:int = targetMovieClip.y - backgroundContainer.y;

通过将目标动画剪辑父级的位置减去它的位置，您可以获得父级范围坐标中的最终位置。只要您的角色和背景容器位于显示列表的同一级别，它就应该适合您。

这是我试图解释的快速图表（请原谅我无法画出漂亮而明确的图纸^^） ![在此处输入图像描述](../Images/2b0b1c475583012a0c9e457390a36697.png)

通常，当我偶然发现这种情况时，我会尝试快速甚至肮脏的绘图，从我想要的开始，然后分解我必须达到的每个有用的数据，你应该记住这个方法并尝试它下一次 ！:-)

# css - 在 CSS 位置中，绝对是相对内部，绝对是文档还是父元素？

> ID：12754159
> 
> 赞同：0
> 
> 时间：2012-10-05T21:17:32.953
> 
> 标签：css

为什么 position:absolute 对文档不总是意味着绝对？例如，当您有一个 divB 时，在另一个 divA 内。如果 divA 没有位置，那么 divB 的绝对位置对文档来说是绝对的吗？

如果您创建一个位置元素并在其中放置另一个具有位置的元素，那么该子元素是否*总是*相对于父/包含元素（因为缺少更好的词）？换句话说，如果我有一个 position:relative 的容器，但有一个 position:absolute 的子容器，那么绝对值只对父级是绝对的，对吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:22:19.447

具有 position: absolute 的元素对于它最近的**非静态**父容器是绝对的。例如，我有一个位置：相对 div，在正常段落内，在绝对跨度内。该跨度是绝对的，而不是段落（没有定义的位置，因此默认为静态），而是相对的 div。

为了与整个文档相关，您使用了 position: fixed。divB 对文档来说*似乎*是绝对的原因（在您的示例中）是因为它没有找到任何具有 position:relative 的父级，并最终使用了正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:22:26.150

Absolute 不一定是相对于其父级的绝对值，而是相对于其最近定位的祖先的绝对值。因此，如果绝对定位元素的父级没有声明的位置，则依赖关系将下降，直到祖先（父级的父级......等）被定位。

[http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)
（注意底部的属性值部分）

# perl - 查找重复项并在匹配项上执行脚本

> ID：12754160
> 
> 赞同：2
> 
> 时间：2012-10-05T21:17:41.553
> 
> 标签：perl, bash, grep

我正在尝试创建一个脚本来解析日志文件并查找每行特定部分的重复匹配项，如果存在重复项，我需要在与重复项匹配的第一行执行脚本。我的日志详细信息是：

```
#: 177          101 User 1 Channel: SIP/101
#: 178          117 User 2 Channel: SIP/117
#: 179          150 User 3 Channel: SIP/150
#: 356          166 User 4 Channel: SIP/166
#: 387          117 User 2 Channel: SIP/117 
```

我想根据日志文件的 SIP/ 部分查找重复项，但我需要根据日志文件的 # 部分执行脚本。根据此日志，我需要为 #: 178 行执行脚本。

到目前为止，我已经使用

`egrep -o ".{50}SIP.{4}"`

根据线路的 SIP/ 部分查找重复项。我不清楚我如何才能让整行得到 #: 178 并生成要执行的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:32:18.370

这是一种使用方法`GNU awk`：

```
awk '$NF in array && !dup[$NF] { print array[$NF]; dup[$NF]++ } { array[$NF]=$2 }' file.txt 
```

结果：

```
178 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:47:56.140

一次性解决方案。它利用了`uniq`支持跳过字段和仅重复标志的优势

```
sed -n '/SIP/{s/^#:\s\+\([0-9]\+\).*SIP\/\([0-9]\+\)/\1 \2/;p}' file.txt | sort -k2,2 -n | uniq -f 1 -d | cut -f1 -d ' ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:31:24.440

一种方法：

```
grep -nE "$(sed -ne '/^#/s/.*SIP\/\([0-9]*\)$/\1/p' log.txt | sort -n | uniq -d | paste -sd '|')"  log.txt | head -n 1 
```

这将打印（基于您的示例文件）：

```
2:#: 178          117 User 2 Channel: SIP/117 
```

主要命令是`grep -nE "$(...)" log.txt`，它将在您的日志文件中搜索重复的行并打印它们（为此的正则表达式是动态生成的，我将在下面解释它）。然后将输出通过管道传输到`head -n 1`仅打印第一行。该命令的`-n`标志`grep`打印匹配的实际行号，如果不需要，可以将其删除。

要生成正则表达式，我们有 4 个命令。

1.  将`sed -ne '/^#/s/.*SIP\/\([0-9]*\)$/\1/p' log.txt`仅提取以 . 开头的行中存在的 SIP 号码`#`。
2.  sed 的输出（数字列表）然后通过管道进行数字排序
3.  排序后，我们可以使用该`uniq -d`命令只打印重复的行。
4.  最后，我们使用命令将所有数字连接在一行中`paste`，我们使用`-d '|'`选项指定我们想要用“|”分隔的数字，这是 OR 的正则表达式运算符。

因此，正则表达式将查找具有任何一个重复数字的行。

希望这会有所帮助=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T21:59:50.030

AWK 适用于这种事情。

这是一个可读的一次性解决方案。

```
#!/usr/bin/env awk -f

{
    sip = $3
    script = $2

    count[sip]++

    if (count[sip] == 1) {
        scripts[sip] = script
    }
    else if (count[sip] > 1) {
        to_run[sip] = scripts[sip]
    }
}

END {
    for (sip in to_run) {
        print to_run[sip]
    }
} 
```

# c - 初始化为 char str[]="S\032ABCD" 的字符串 str 的大小

> ID：12754161
> 
> 赞同：2
> 
> 时间：2012-10-05T21:17:52.800
> 
> 标签：c

`str`初始化为的字符串的大小`char str[]="S\032ABCD"`

这个空字符对运算符的结果究竟意味着`sizeof`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:28:38.663

字符串文字的大小是终止 NUL 字节的字符数加 1。在您的情况下`sizeof "S\032ABCD"`是 7 （因为 \032 是八进制转义序列并表示单个字符）。由于此文字用作字符数组的数组初始值设定项，`sizeof str`因此也是 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:30:50.767

在 C 中，任何带有前导的数字`0`都被视为八进制。因此，`032`整体被视为单个字符。所以`sizeof`是 7（6 个字符 + 1 个用于 nul 终止）。

如果您只是删除八进制转义符`\`，那么您将得到 sizeof 为 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:22:51.817

`sizeof`运算符返回由其类型确定的字节大小 。

不要将其与`strlen`以字符为单位测量字符串长度并查找 NUL 终止符的方法混淆。

`sizeof`不在乎您的 NULL 终止符，它不会查看您的数组并认为“实际上，这可能是一个字符串，因此我将寻找 NUL 终止符。” 此外，在一般情况下，它不可能像`sizeof`编译时那样做到这一点。

# java - Ldaptemplate 搜索以正确的次数返回相同的条目

> ID：12754168
> 
> 赞同：0
> 
> 时间：2012-10-05T21:18:08.520
> 
> 标签：java, ldap

我一直在尝试搜索 LDAP 目录中的所有用户。当我执行搜索时，它会以目录中正确数量的条目返回，但它都是同一个条目（最后一个）的重复项。我似乎无法弄清楚为什么会这样。以下是我的一些代码片段：

实际执行搜索的函数：

```
public List<User> getAllUsers(){
    AndFilter filter = new AndFilter();
    filter.and(new EqualsFilter("objectclass", "person"));
    List<User> users = ldapTemplate.search(DistinguishedName.EMPTY_PATH,
                            filter.encode(), new UserAttributesMapper());

    return users;
} 
```

User 只是一个具有 getter 和设置的类，其中包含有关用户的所有信息。`UserAttributesMapper`如下：

```
private static class UserAttributesMapper implements AttributesMapper {
    public Object mapFromAttributes(Attributes attrs) throws NamingException {
        ...
        User user = (User) AppUtils.getBean("user");    
        NamingEnumeration ae = attrs.getAll();
        ...
        //set user attributes through setters
        // ie: if(attrs.get("uid") != null) user.setUid((String) attrs.get("uid").get());
        ...
        return user;
    }
} 
```

我知道映射器可以正常工作，因为我可以毫无问题地返回一个用户并且它工作得很好。我只是不明白为什么它只返回`List`最后一个用户条目。我的一个想法是`static`在声明中使用

```
User user = (User) AppUtils.getBean("user"); 
```

User 类带有注释，`@Component("user")`函数`getBean`为

```
public static Object getBean(final String name) {
    if(applicationContext == null) {
        throw new IllegalArgumentException(
                "ApplicationContext is not initialized");
    }
    return applicationContext.getBean(name); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:41:22.443

显然，您在列表的每个位置都使用相同的 User 对象，因此您不断更新相同的对象，而不是为每个搜索结果创建一个新对象。

# actionscript-3 - 检测按键释放的帧

> ID：12754171
> 
> 赞同：0
> 
> 时间：2012-10-05T21:18:23.533
> 
> 标签：actionscript-3, flashdevelop

我试图让它检测何时在向下状态和向上状态之间切换键。我需要它来显示键在恢复到 UP 状态之前释放一帧。

如果需要，我可以添加更多信息或代码。先感谢您。

```
package engine 
{
import flash.display.Stage;
import flash.events.KeyboardEvent;

/**
 *  Input Manager
 */
public class Input 
{
    static private const UP         : uint = 0;
    static private const PRESS      : uint = 1;
    static private const HELD       : uint = 2;
    static private const END_PRESS  : uint = 3;

    static private const START_PRESS:uint = 9999;

    static private var keys     : Vector.<uint>;
    static private var active   : Vector.<KeyState>;

    static public function init( stage:Stage ):void 
    {
        stage.removeEventListener( KeyboardEvent.KEY_DOWN, onKeyDown );
        stage.removeEventListener( KeyboardEvent.KEY_UP,   onKeyUp );   

        keys    = new Vector.<uint>(255);   // state of all keys
        active  = new Vector.<KeyState>();      // only keys in a state other than up
        //time    = new Vector.<Time>();

        stage.addEventListener( KeyboardEvent.KEY_DOWN, onKeyDown );
        stage.addEventListener( KeyboardEvent.KEY_UP,   onKeyUp );  
    }

    /// Flash Event: A key was just pressed
    static public function onKeyDown( e:KeyboardEvent ):void
    {
        // If the system is sending another key down event, but the key is marked
        // as being in some other state than down; ignore it.
        if ( keys[ e.keyCode ] != UP )
            return;

        keys[ e.keyCode ] = START_PRESS;

        var keyState:KeyState = new KeyState( e.keyCode, Time.frameCount );
        active.push( keyState );
    }

    /// Flash Event: A key was raised
    static public function onKeyUp( e:KeyboardEvent ):void
    {

        keys[ e.keyCode ] = UP

        // Loop through all active keys; there is a slight chance that
        // more than one entry for a key being "down" snuck in due to
        // how Flash / OS handles input.
        var keyState:KeyState;
        for ( var i:int = active.length - 1; i > -1; i-- )
        {

            keyState = active[i];               // get next keystate in active list
            if ( keyState.code == e.keyCode )   // if the code matches
                active.splice( i, 1 );          // remove
        }
    }

    /// Call this once per frame
    static public function update():void
    {
        var code    :uint;
        var keyState:KeyState;

        // Go through all the inputs currently mark as being active...
        for ( var i:int = active.length - 1; i > -1; i-- )
        {
            keyState = active[i];
            code = keyState.code;

            // If a key is pressed and it's the frame after it was pressed,
            // change the state.
            if ( keys[code] == PRESS && keyState.frame < Time.frameCount )
            {
                keys[code] = HELD;
                continue;
            }

            // If a press is just starting, mark it as started and update
            // the frame for the press to be this frame.
            if ( keys[code] == START_PRESS )
            {
                keys[code] = PRESS;
                keyState.frame = Time.frameCount;
            }

        }

    }

    /// Has a key just been pressed in this frame?
    static public function getKeyDown( code:uint ):Boolean
    {
        return keys[ code ] == PRESS;
    }

    /// Is a key in state other than being "up"?
    static public function getKey( code:uint ):Boolean
    {
        return keys[ code ] == HELD;
    }

    static public function getKeyRelease( code:uint ):Boolean
    {
        return keys[ code ] == END_PRESS;
    }
}
}

internal class KeyState
{
public var code :uint;
public var frame:uint;

/// CTOR
function KeyState( code:uint, frame:uint ) :void
{
    this.code   = code;
    this.frame  = frame;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:20:39.490

因为您希望在框架内完成某些事情，所以您必须使用 Event.ENTER_FRAME 侦听器。这样，您就可以正确地将“刚刚释放”的键重置为“向上”状态。在这种情况下，您可以：

```
static public function onKeyUp( e:KeyboardEvent ):void
{
    keys[ e.keyCode ] = END_PRESS;
    // I'm not sure why you need other checks in here, add them if you like
}

static public function onEnterFrame( e:Event ):void
{
    for (var i:int=keys.length-1; i>=0;i--) if (keys[i]==END_PRESS) {
        keys[i]=UP;
        // do whatever you need with i'th key, as this will be the "just released" key.
    }
} 
```

更新：您已经有了一个基本的输入框程序，并且您已经有了一些关于按下和按住状态的机制，因此您可以清楚地将此循环添加到该程序中。

# c# - 使用 EF 将实体添加到大表需要越来越多的时间

> ID：12754173
> 
> 赞同：1
> 
> 时间：2012-10-05T21:18:28.650
> 
> 标签：c#, entity-framework, sql-server-ce

在精简应用程序以挖掘我面临的性能问题后，我有一个非常基本的数据模型。数据模型存在两个实体，例如 callend Product 和 Category：

```
class Product {
    public virtual int ID {get;set;}
    public virtual string Name {get;set;}
    public virtual int CategoryID {get;set;}
    public virtual Category Category {get;set;}
}

class Category {
    public virtual int ID {get;set;}
    public virtual string Name {get;set;}
} 
```

当我添加 100 个新产品时，所有产品的引用都使用 CategoryID 属性设置为同一类别，我调用 db.SaveChanges() 可能需要相当长的时间。通过将 AutoDetectChangesEnabled 设置为 false，我能够减少所需的时间。但经过几次运行后，我注意到当数据库中存在的产品数量增加时，插入 100 个新产品所需的时间也会增加：

```
23416 -->  +/- 7000 ms
25516 -->  +/- 7500 ms 
```

因为我知道表在生产中会变得更大，所以我想知道在我回退到使用原始 Sql 查询或 BulkInsert 之前我的选择是什么。

针对斯坦利和拉斐尔的评论：

在我的测试用例中，ID 属性都是主键，CategoryID 有一个索引。没有触发器等。

我正在执行一个循环 100 次，在其中我初始化一个新的 DbContext，插入 100 个产品并处理 DbContext。

**明确一点：我可以创建一个新项目，使用 SqlCe 设置 EF，使用 Code-First 像上面一样构建数据模型并获得*相同的结果*。**

在进行了一些其他测试之后，似乎问题出在 Sql Server Compact Edition 上。使用常规的 MSSQL 服务器，观察到的性能问题消失了，现在插入 100 行始终需要大约 50 毫秒。尽管我现在似乎找到了问题的根源，但它仍然没有回答为什么使用外部查询工具在紧凑型数据库中插入 100 行与使用 EF 插入 100 行时没有相同的性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:28:55.937

我之前使用过 ETL 的实体框架，并且遇到了内存消耗问题，即使我很努力地处理我的上下文。我发现将垃圾收集作为日常工作的一部分减少了内存消耗，但只是部分减少了。

在使用实体框架进行批量插入或更新时，我不知道有一种方法可以避免 n+1 反模式。如果这种加载数百或数千条记录的场景是您可以控制的并且很少这样做，您可以尝试以下操作：

```
using (MyDbContext db = new MyDbContext())
{
    // prep your records and add them to your context

    // Save the records
    db.SaveChanges
}

GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

这对我有用，因为 ETL 是一次性负载，我们有时间将其延长几天。我不会把这样的东西推到生产环境中，特别是如果你打算让你无法控制的用户或系统有权进行批量插入。

我的团队最终仅将 EF 用于事务性用途，并且我们有一个单独的数据访问层用于批量加载、集成和报告。

我解决这个问题的方法是在尝试保持模型驱动开发的同时，利用 SQL Server 中的 xml 数据类型。我准备对象作为 ICollection 的一部分，将它们序列化为 XML，然后将该字符串作为参数发送到存储过程，如下所示：

```
create procedure [dbo].[BulkAddProducts]
        @Values xml = null
    as begin
        insert into dbo.Products
            select
                    Products.Product.value('*:Name[1]', 'nvarchar(512)') as Name
                    ,Products.Product.value('*:CategoryID[1]', 'int') as CateogryID
                from @Values.nodes(N'/*:ArrayOfProduct/*:Product') Products(Product)
    end
go 
```

这是一个没有 proc 的查询的工作示例：

```
declare @Val xml = '
<ArrayOfProduct xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/MyAppName.Models">
    <Product>
        <Name>Product1</Name>
        <CategoryID>5</CategoryID>
    </Product>
    <Product>
        <Name>Product2</Name>
        <CategoryID>5</CategoryID>
    </Product>
</ArrayOfProduct>
'
select
        Products.Product.value('*:Name[1]', 'nvarchar(512)') as Name
        ,Products.Product.value('*:CategoryID[1]', 'int') as CateogryID
    from @Val.nodes(N'/*:ArrayOfProduct/*:Product') Products(Product)
go 
```

# android - Android 唯一 UDID

> ID：12754181
> 
> 赞同：0
> 
> 时间：2012-10-05T21:18:59.517
> 
> 标签：android, uniqueidentifier, udid

有人能告诉我我一直在使用的代码是否是获取唯一 ID 的正确方法吗？我怀疑我可能有骗子，这可能会导致我公司的行政级别出现问题......

```
final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
String UDID = tm.getDeviceId(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:21:17.603

这是正确的调用方式`getDeviceId()`。这可能不是唯一标识符，因为并非所有设备都是手机，有些手机有错误。有关更多详细信息，请参阅[此 Android 开发者博客文章](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:15:40.863

如果您想要一个 android 的唯一标识符，那么您会看到大量的问题出现在一个简单的谷歌搜索中。类似于 CommonsWare 提到的。

但是，您仍然可以获得唯一标识符。真正的问题是你想要识别什么。是用户还是设备？

如果要识别特定用户：

你要IMSI值。

```
final TelephonyManager tm = (TelephonyManager)context`.getSystemService(Context.TELEPHONY_SERVICE);

String UDID = tm.getSubscriberId() 
```

如果要识别硬件，则需要 IMEI 值：

```
final TelephonyManager tm = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

String UDID = tm.getDeviceId() 
```

现在：我建议使用 getDeviceID() 选项，因为它对隐私的影响较小。

但是您可以进一步采取步骤事件并在存储之前对该值进行哈希处理。

但是，如果您无法获得正确的返回值，您总是可以做一些事情，比如让用户输入他们的电话号码，并通过短信验证它。然后将其用作标识符。

# .net - SQL中的继承和关联

> ID：12754192
> 
> 赞同：1
> 
> 时间：2012-10-05T21:20:14.823
> 
> 标签：.net, sql, sql-server, sql-server-2012, .net-4.5

我有两张桌子：

```
create table [Customer]
(
    [Id] int primary key identity not null,
    [Type] int not null check([Type >= 0 and [Type] <= 2)
    -- other columns
)
create table [Partial Record]
(
    [Id] int primary key identity not null,
    [Student Id] int references [Customer]([Id])
) 
```

我之所以调用 [Student Id]，是因为 Customer 表具有继承性，问题是：我想添加一个检查`[Partial Record]`以确保关联具有仅属于学生的`"[Type] = 1"`for 。`[Partial Record]`

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:38:15.670

您可以通过向`Customer`表中添加超级键并添加强制外键来做到这一点：

```
create table [Customer]
(
    [Id] int primary key identity not null,
    [Type] int not null check([Type] >= 0 and [Type] <= 2)
    ,constraint UQ_Customer_TypeCheck UNIQUE (ID,Type)
)
create table [Partial Record]
(
    [Id] int primary key identity not null,
    [Student Id] int references [Customer]([Id]),
    Type as 1 persisted,
    constraint FK_Partial_TypeCheck FOREIGN KEY ([Student Id],Type) references Customer (ID,Type)
) 
```

（如果每个学生应该只有一行，我可能会删除`Id`-只需制作主键）`[Partial Record]``[Student Id]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:40:50.243

我只能考虑使用触发器来执行此操作，例如：[SQL Server: halt an INSERT in a trigger](https://stackoverflow.com/questions/4915002/sql-server-halt-an-insert-in-a-trigger)。可能不会很有效率或性能，但应该做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:24:04.327

如[this answer](https://stackoverflow.com/a/3200817/243925)（和[this one](https://stackoverflow.com/a/3880768/243925)）中描述的类似问题，您可以创建一个[用户定义函数](http://msdn.microsoft.com/en-us/library/ms186755.aspx)来检查另一个表中的值，然后编写一个约束来调用该函数。

但正如其他人评论的那样，如果可以的话，我会考虑改变你的桌子。不同的设计将消除对该`type`字段的需求。

# javascript - jQuery 工具提示插件基于另一个 div 而不是鼠标定位工具提示？

> ID：12754193
> 
> 赞同：0
> 
> 时间：2012-10-05T21:20:14.573
> 
> 标签：javascript, jquery, jquery-plugins, jquery-tooltip

我正在使用[这个 jQuery 工具提示插件](http://docs.jquery.com/Plugins/Tooltip)在我的页面的各种 div 上创建简单的工具提示。该插件相对于鼠标位置定位工具提示。相反，我希望工具提示显示在 div 上方的中心，每次都在同一个地方悬停，不动。是否可以使用此插件，如果可以，您能指出我正确的方向吗？如果没有，也许建议替代方案？

这是[一个带有我所拥有的设置的 jsFiddle](http://jsfiddle.net/WN4sN/1/)。不幸的是，如果没有插件，样式就无法真正工作。我希望这段代码足够好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:27:29.817

我不认为这是你可以用那个 jQuery Tooltip 插件做的事情。

其中一些看起来更适合该任务： [http ://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)

干杯，罗伯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:30:06.453

有问题的工具提示插件似乎不支持相对定位。

Qtip 可以：http: [//craigsworks.com/projects/qtip/](http://craigsworks.com/projects/qtip/)

# facebook - Facebook sharer.php 需要多次单击共享链接按钮或刷新缓存才能成功提交

> ID：12754197
> 
> 赞同：0
> 
> 时间：2012-10-05T21:20:49.987
> 
> 标签：facebook, share, facebook-sharer

**描述：**

这个问题开始于 2012 年 10 月 4 日星期四左右的某个时间。

HTTP 跟踪显示响应代码 500 - 来自 www.facebook.com/ajax/sharer/submit_page/ 的内部服务器错误。

重复单击按钮有时会清除问题，否则需要使用 developers.facebook.com/tools/debug 对共享 URL 进行缓存刷新。

我们使用 sharer.php 的以下“风格”：

[http://www.facebook.com/sharer/sharer.php?s=100&p[medium]=103&p[url]=url&p[images][0]=imageUrl&p[summary]=summaryText&p[title]=titleText](http://www.facebook.com/sharer/sharer.php?s=100&p[medium]=103&p[url]=url&p[images][0]=imageUrl&p[summary]=summaryText&p[title]=titleText)

**示例缩短的共享链接：**

*   [http://on.fb.me/RiDHzy](http://on.fb.me/RiDHzy)
*   [http://on.fb.me/OaHFwh](http://on.fb.me/OaHFwh)
*   [http://on.fb.me/VFNSCd](http://on.fb.me/VFNSCd)

您可以调整 p[url]=url ta_pid 查询字符串参数的值以破坏 FB 缓存。

**预期行为**

*   显示共享此链接页面。
*   单击共享链接按钮。
*   链接已共享到您的 Facebook 时间线。

**实际行为**

*   显示共享此链接页面。
*   单击共享链接按钮。
*   没有任何可见的事情发生。
*   HTTP 跟踪显示响应代码 500 - 来自 www.facebook.com/ajax/sharer/submit_page/ 的内部服务器错误。
*   重复单击共享链接按钮有时会导致链接成功共享。
*   使用developers.facebook.com/tools/debug 对共享URL 进行缓存刷新后——p[url]——单击共享链接按钮将导致链接成功共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:03:08.213

在通过多个渠道升级后，Facebook 似乎已经解决了这个问题。

# php - 无法从 IFRAME 访问 jQuery（在父文档中）

> ID：12754205
> 
> 赞同：0
> 
> 时间：2012-10-05T21:22:11.127
> 
> 标签：php, jquery, dom

![我的备份程序](../Images/4c6b5d03e0ddaf0afe9a824dda5b020c.png)

我为 SugarCRM 编写了一个备份程序。我的程序将 iframe 设置为 src=BACKUP.PHP

我的备份程序将更新发送到父窗口：

```
echo "<script type='text/javascript'>parent.document.getElementById('file_size').value='".fileSize2human(filesize($_SESSION['archive_file_name']))."';parent.document.getElementById('file_count').value=".$_SESSION['archive_file_count'].";parent.document.getElementById('description').innerHTML += '".$log_entry."\\r\\n';parent.document.getElementById('description').scrollTop = parent.document.getElementById('description').scrollHeight;</script>";
echo str_repeat( ' ', 4096);
flush();
ob_flush(); 
```

我添加了一个 JQUERY UI PROGRESS BAR，我需要知道如何更新父窗口上的进度条。

我试过这个：

```
$percent_complete = $_SESSION['archive_file_count'] / $_SESSION['archive_total_files'];

echo "<script type='text/javascript'>parent.document.jquery('#progressbar').animate_progressbar($percent_complete);
</script>"; 
```

.........并在浏览器中收到此错误。

未捕获的类型错误：对象 [object HTMLDocument] 没有方法“jquery”

**如何从 IFrame 更新父文档中的进度条？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:36:01.953

我用一个函数更新了父窗口，并像这样调用该函数：

```
 echo "<script type='text/javascript'>window.parent.updateProgessBar(50);</script>"; 
```

它奏效了

这是父函数：

```
 function updateProgessBar(percentComplete){
                $("#progressbar").animate_progressbar(percentComplete);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:37:21.690

我认为你不能因为安全原因。

# php - 使 WordPress 可从任何域使用

> ID：12754209
> 
> 赞同：2
> 
> 时间：2012-10-05T21:22:21.547
> 
> 标签：php, wordpress, plugins

我正在尝试创建一个插件，允许从任何域访问 WordPress，当然前提是该域指向它。

我有 option_siteurl 和 option_home 的过滤器钩子，这在几乎所有情况下都被证明是有用的。

但是，它似乎不适用于附加到帖子的图像，也不适用于主题的标题图像。看起来对于这些，它正在获取选项的数据库值-> siteurl。

我已经尝试过 update_option，但这也没有成功。

我正在使用以下代码来获取主机：

```
public function getGoodURL() {
    $scheme = ($_SERVER["SERVER_PORT"] == 80 ? "http://" : "https://");
    $host = $_SERVER["HTTP_HOST"];
    return $scheme.$host;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T21:42:06.890

可能想尝试将站点 url 配置放在配置文件中，即：

```
$domain = sprintf('%s://%s', 
        $_SERVER['SERVER_PORT'] == 80 ? 'http' : 'https', 
        $_SERVER['SERVER_NAME']);
define('WP_SITEURL',       $domain);
define('WP_HOME',          $domain); 
```

这样，您的站点将始终接受当前域。

# javascript - 根据滚动条的位置更改 div 的背景，而不会使它看起来像已加载

> ID：12754224
> 
> 赞同：0
> 
> 时间：2012-10-05T21:23:22.720
> 
> 标签：javascript, jquery, css, scroll, parallax

基本上我看到了这个页面[这个页面](http://www.smokeybones.com/#deals)，如果你向上和向下滚动，你会看到一杯饮料变得满了，空的取决于你的滚动条所在的位置。知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:25:22.887

它实际上是一张背景位置发生变化的图像。当您最初看到玻璃时，图像已完全加载。

[http://www.smokeybones.com/static/img/tv/beer_sprite_lrg.jpg?e3e4e50f54ea](http://www.smokeybones.com/static/img/tv/beer_sprite_lrg.jpg?e3e4e50f54ea)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:30:34.593

做这样的事情非常复杂，但并不是特别难。

首先，您需要使用 jQuery 之类的东西来管理它。你已经这么好了...

下面的 html 是一个假设用户有图像的工作示例： ![在此处输入图像描述](../Images/d1a41284ecca588312486ac3cb6f02b7.png)

它是 700 x 100。代码非常简单。对窗口的 scrollTop() 值进行四舍五入，并根据结果计算正确的帧偏移量。无需解释，下面的代码说明了一切。

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Test</title>
    <meta name="viewport" content="width=device-width">
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
</head>
<style>
#main{position:relative;}
.dummy{height:500px;}
#glass{
    height:200px;
    width:100px;
    background:url(http://www.hep-g.com/glass.jpg) no-repeat;
    background-position:0 0;
}
</style>
<script type="text/javascript">
$(document).ready(function(){
    var frame = 0;
    $(window).scroll(function(){

        if($(window).scrollTop() % 100 < 10)
            frame = Math.floor($(window).scrollTop() / 100) * 100;

        if(frame > 700)
            frame = 700;

        $('#glass').css('background-position', '-' + frame + 'px 0');
    });

});
</script>
<body>
    <div id="main">
        <section class="dummy">
            This is dummy content
        </section>
        <section id="glass"></section>
        <section class="dummy">
            This is dummy content
        </section>
        <section class="dummy">
            This is dummy content
        </section>
    </div>
</body>
</html> 
```

# java - 从略有不同的多个文件映射多个列

> ID：12754233
> 
> 赞同：2
> 
> 时间：2012-10-05T21:24:39.877
> 
> 标签：java, excel, etl, normalize, talend

我正在寻找一种很好的实用方法来处理多个文件之间的元数据规范化，这些文件的架构略有不同，用于 Talend 中的批处理 ETL 作业。

我有几百个历史报告（每个大约 25K 到 200K 记录），每个 excel 文件大约有 100 到 150 列。所有文件的大多数列名都是相同的（98% 重叠），但是存在细微的邪恶差异：

*   不同的列顺序
*   不同的列名（有时使用，有时不使用缩写）
*   不同的列数
*   有时列在单词之间有空格，有时是点、破折号或下划线
*   等等

除了编写专门的应用程序或通过手动更正它们来强制所有文件，是否有任何好的免费工具或方法可以以智能或半自动的方式提供文件列名之间的差异和更正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:46:26.877

我暂时将其写为“答案”，因为我没有链接来演示它是如何完成的。但是 Pentaho 数据集成提供了一种很好的方式来加载这样的文件 - 有一种方法可以在第一次转换中读取文件的元数据，我的意思是列名，然后您可以使用“元数据注入”功能将该元数据注入到读取文件的下一个转换中。

现在; 在您的列名略有不同的情况下，您必须以某种方式进行一些额外的映射。也许您可以在某处存储“别名”列名和真实列名的查找表。

无论哪种方式，这听起来都是一个非常复杂/讨厌的自动化任务！

我还没有看到任何方法可以在 Talend 中处理文件的不同元数据 - 尽管很高兴在这一点上得到纠正！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T11:58:46.900

你可以`Talend Open Studio`用来实现这一点。但我确实看到了一个警告。

## 官方方式

1.  为了让 Talend 理解您的 Excel 文件，您需要首先加载它的元数据。需要注意的是，您需要手动（一个一个）加载所有元数据。在 Talend（Open Studio Data）的免费版本中，不支持动态元数据。

2.  使用像`tMap`您这样的组件可以将输入元数据映射到所需的输出元数据（可以是 Excel 文件或数据库或其他东西）。在此步骤中，您可以将输入数据塑造成您想要的输出（修复/忽略/转换它/等）。

## 非官方方式

似乎存在一个用户贡献的组件，它提供对 Excel 动态元数据的支持。我没有测试它，但值得一试： [http ://www.talendforge.org/exchange/?eid=663&product=tos&action=view&nav=1,1,1](http://www.talendforge.org/exchange/?eid=663&product=tos&action=view&nav=1,1,1)

*这可以随着组件的发布和频繁更新而发展。我的回答是关于 5.3.1 版的状态*

# javascript - 防止在 IE 中不正确的 URL 转义

> ID：12754235
> 
> 赞同：1
> 
> 时间：2012-10-05T21:24:46.027
> 
> 标签：javascript, internet-explorer

如何防止 IE8 在 URL 中将“#”转义为“%23”？

我正在使用 Javascript 动态设置 window.location.href，其 URL 有时包含“#”作为锚名称（例如“/some/path/#anchorname”）

Firefox/Safari/Chrome 完美地诠释了这一点。自然，IE 经常将“#”替换为“%23”，从而导致 URL 完全错误（例如“/some/path/%23anchorname”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:27:59.160

[History.js](https://github.com/balupton/History.js/)可以很好地处理这些事情。否则我不确定你是否可以在 IE8 上使用它，但 location.hash

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:46:50.580

如果您使用 window.location.hash 它应该可以正常工作

# c - 位/字节寻址 - 小/大端

> ID：12754237
> 
> 赞同：2
> 
> 时间：2012-10-05T21:24:48.680
> 
> 标签：c

考虑下面的 16 位数据包，它以网络字节顺序通过网络发送，即 Big Endian：

0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15（字节数）
34 67 **89** **45** 90 AB FF 23 65 37 56 C6 56 B7 00 00（值）

假设 8945 是一个 16 位的值。所有其他都是 8 位数据字节。

在我的小端系统上，如何接收和存储数据？

可以说，我们被配置为一次接收 8 个字节。RxBuff 是接收数据的 Rx 缓冲区。

Buff 是存储数据的存储缓冲区。

请指出一次读取8个字节后数据存储哪种情况是正确的： 1) Buff[] = {0x34, 0x67, 0x45, 0x89, 0x90, 0xAB....... 0x00};

2) Buff[] = {0x00, 0x00, .......0x67, 0x89, 0x45, 0x34};

整个 16 字节数据会被反转还是仅包含在该数据包中的 2 字节值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:26:04.490

只有数据包中包含的 2 个字节值会被反转。
Endianess 关注字节顺序，而不是位顺序。

这是[维基百科上的解释](http://en.wikipedia.org/wiki/Endianness)

# c# - iText PDF MultiColumnText 行高

> ID：12754238
> 
> 赞同：1
> 
> 时间：2012-10-05T21:24:54.320
> 
> 标签：c#, .net, itextsharp, itext

将 Paragraph 对象添加到 MultiColumnText 对象内的 Column 时，我无法为其设置行高。

注意每个新行之间的任意间距。第二列渲染内容的屏幕截图。[https://dl.dropbox.com/u/249320/Foliotek/Capture.PNG](https://dl.dropbox.com/u/249320/Foliotek/Capture.PNG)

我让它渲染并正确进入下一列。但我似乎无法设置每个新行的高度。想法？

我的代码：

```
MultiColumnText mct = new MultiColumnText();
            mct.Alignment = Element.ALIGN_JUSTIFIED_ALL;
            //8

            // setup column 1
            float[] left = {1020, 280, 1020, 7 };
            float[] right = {1022, 576,
                         1022, 280,
                         1096, 280,
                         1214, 154,
                         1214, 7
                        };
            mct.AddColumn(left, right);

            // setup column 2
            left = new float[] { 1422, 576,
                              1422, 266,
                              1259, 106,
                              1246, 105,
                              1246, 7
                             };
            right = new float[] {1433, 280, 1433, 7 };
            mct.AddColumn(left, right);
            techDataColumnText += " GALLIA est omnis divisa in partes tres, quarum unam incolunt Belgae, aliam Aquitani, tertiam qui ipsorum lingua Celtae, nostra Galli appellantur.  Hi omnes lingua, institutis, legibus inter se differunt. Gallos ab Aquitanis Garumna flumen, a Belgis Matrona et Sequana dividit. Horum omnium fortissimi sunt Belgae, propterea quod a cultu atque humanitate provinciae longissime absunt, minimeque ad eos mercatores saepe commeant atque ea quae ad effeminandos animos pertinent important, proximique sunt Germanis, qui trans Rhenum incolunt, quibuscum continenter bellum gerunt.  Qua de causa Helvetii quoque reliquos Gallos virtute praecedunt, quod fere cotidianis proeliis cum Germanis contendunt, cum aut suis finibus eos prohibent aut ipsi in eorum finibus bellum gerunt.";
            Paragraph techDataPhrase = new Paragraph(techDataColumnText, new Font(FuturaBoldBaseFont, 8f));

            mct.AddElement(techDataPhrase);
            do
            {
                document.Add(mct);
                mct.NextColumn();
            } while (mct.IsOverflow()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:19:26.880

三个想法：

1.  `MultiColumnText`已从最新的 iText 版本中删除，因此您可能不想在它上面投入太多时间。`ColumnText`如果您想要一个面向未来的解决方案，请使用。
2.  你说有一个任意的行高。在 PDF 语言中，行高称为行高。我没有看到你`setLeading()`在任何地方使用（也许我忽略了一些东西）。
3.  `(Multi)ColumnText`并`PdfPCell`有两种不同的模式。文本模式和复合模式。

在*复合模式下*，容器（列或单元格）的设置将被忽略，而有利于内容（`Paragraph`添加的对象和其他对象）的设置。在这种模式下，容器的内容可以有不同的前导、对齐、...

在*文本模式*中，您在容器（列或单元格）级别设置前导，所有内容都遵循该设置。在这种模式下，所有内容都具有相同的前导、相同的对齐方式、...

您正在创建一个不规则的列，这意味着您只能在*文本模式下*工作。您需要在列的级别设置前导。

# asp.net-mvc-3 - 线程安全缓存

> ID：12754239
> 
> 赞同：1
> 
> 时间：2012-10-05T21:24:59.890
> 
> 标签：asp.net-mvc-3, caching, thread-safety

我正在尝试分析我的代码中的不安全线程可能会遇到什么问题。

在我的 mvc3 web 应用程序中，我尝试执行以下操作：

```
// Caching code
public static class CacheExtensions
{
    public static T GetOrStore<T>(this Cache cache, string key, Func<T> generator)
    {
        var result = cache[key];
        if(result == null)
        {
          result = generator();
          lock(sync) {
              cache[key] = result;
          }
        }
    return (T)result;
    }
} 
```

像这样使用缓存：

```
// Using the cached stuff
public class SectionViewData 
{
    public IEnumerable<Product> Products {get;set;}
    public IEnumerable<SomethingElse> SomethingElse {get;set;}
}

private void Testing() 
{
    var cachedSection = HttpContext.Current.Cache.GetOrStore("Some Key", 0 => GetSectionViewData());

    // Threading problem?
    foreach(var product in cachedSection.Products)
    {
         DosomestuffwithProduct...
    }
}

private SectionViewData GetSectionViewData() 
{
    SectionViewData viewData = new SectionViewData();
    viewData.Products = CreateProductList();
    viewData.SomethingElse = CreateSomethingElse();

    return viewData;
} 
```

我可以用 IEnumerable 运行 inte 问题吗？我对线程问题没有太多经验。如果其他线程将新值添加到缓存中，cachedSection 不会被触及，对吧？对我来说，这行得通！

我应该单独缓存 Products 和 SomethingElse 吗？这会比缓存整个 SectionViewData 更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:44:42.830

线程很难；

在您的`GetOrStore`方法中，get/generator 序列是完全不同步的，因此任何线程都可以从缓存中获取 null 并同时运行生成器函数。这可能——也可能不是——是个问题。

您的`lock`语句只锁定了 cache[string] 的设置器，它已经是线程安全的，不需要“额外锁定”。

缓存中双重检查锁定的变化是可疑的，我会尝试摆脱它。由于从不进入 lock() 部分的线程可以在`result`没有内存屏障的情况`result`下获得，因此在线程获得它时可能尚未完全构建。

只要*没有任何东西同时修改它们，*枚举缓存的 IEnumrator 是安全的。如果`GetSectionViewData()`返回一个具有不可变（如不变）集合的对象，那么您是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:41:21.663

您的代码缺少部分，例如如何填充产品？仅在 GetSectionViewData 中？如果是这样，那么我认为您的代码没有重大问题。然而，两个线程有​​可能为同一个键生成相同的数据（CachedSection），它不应该产生线程问题，除非你做两次工作，所以如果这是一个昂贵的操作，我会改变代码所以每个密钥只生成一次。如果它不贵，它就可以正常工作。

产品的 IEnumerable 没有被触及（假设您为每个线程单独创建它，但是缓存上的枚举数会针对每个插入操作进行修改，因此它不是线程安全的。所以如果您使用它，我会小心的。

# android - 使用 SOOMLA Android Store 计费包装器请求交易

> ID：12754240
> 
> 赞同：1
> 
> 时间：2012-10-05T21:25:19.630
> 
> 标签：android, in-app-purchase, in-app-billing, android-billing

我正在尝试为我的 Android 游戏设置应用内结算。Google Play 并不容易（叹气）。我遇到了一些开源库，似乎[SOOMLA 项目](https://github.com/soomla/android-store)更适合游戏。

他们的自述文件解释了如何更改 android 清单和所有内容，但没有说明如何请求事务。有没有人有这个库的经验并且可以帮助我开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:03:54.520

显然我的问题让他们编辑了他们的自述文件，所以答案是：

```
StoreController.buyCurrencyPack(TEN_COINS_PACK.getProductId()); 
```

您必须首先根据他们的文档定义它。

```
VirtualCurrencyPack TEN_COINS_PACK = new VirtualCurrencyPack(
        "10 Coins",            // name
        "A pack of 10 coins",  // description
        "themes/awsomegame/img/coins/10_coins.png", // image file path
        "10_coins",            // item id
        TEN_COINS_PACK_PRODUCT_ID, // product id in Google Market
        1.99,                  // actual price in $$
        10,                    // number of currencies in the pack
        COIN_CURRENCY,
        CURRENCYPACKS_CATEGORY); 
```

[https://github.com/soomla/android-store#in-app-purchasing](https://github.com/soomla/android-store#in-app-purchasing)

# c++ - 提升共享指针构造函数/析构函数

> ID：12754242
> 
> 赞同：0
> 
> 时间：2012-10-05T21:25:35.060
> 
> 标签：c++, boost, constructor, shared-ptr, smart-pointers

我正在尝试在我的代码中实现智能指针。我创建了一个类来将 Point 转换为 shared_ptr，并为 shared_ptr 添加了打印功能。在我的主体中，我创建了一个 Shape 类型的 shared_ptr 数组。当我将点分配给数组时，我只看到原始构造函数/析构函数，而不是共享构造函数/析构函数。这段代码正确吗？

谢谢。

```
#include "Point_H.hpp"
#include "Shape_H.hpp"
#include "Array_H.hpp"
#include "boost/shared_ptr.hpp"

using namespace CLARK::Containers;
using namespace CLARK::CAD;

class P1
{
private:
    boost::shared_ptr<Point> pp;

public:
    P1(boost::shared_ptr<Point> value) : pp(value) { cout << "P1 constructor call (default)" << endl; }
    virtual ~P1() { cout << "P1 destructor call" << endl; }
    void print() const { cout << "Point: " << *pp << endl; }
};

void Print()
{       
        boost::shared_ptr<Point> myPoint (new Point);
        {
            P1 point1(myPoint);
            point1.print();
        }           
}    

int main()
{   

    // Typedef for a shared pointer to shape
    // a typedef for an array with shapes stored as shared pointers.
    typedef boost::shared_ptr<Shape> ShapePtr;
    typedef Array<ShapePtr> ShapeArray;

    ShapeArray my_ShapeArray(3);

    ShapePtr my_Point (new Point(3.1459, 3.1459));

    my_ShapeArray[0] = my_Point;

    my_ShapeArray[0]->Print();

    return 0;    
} 
```

输出如下所示（构造函数/析构函数语句来自 Point/Shape/Array 类本身，而不是来自此源文件中的代码。

> > 数组构造函数调用
> > 
> > 形状构造函数调用（默认）
> > 
> > 点构造函数调用 (3.1459,3.1459) ID:41
> > 
> > 点析构函数调用
> > 
> > 形状析构函数调用
> > 
> > 数组析构函数调用

我期待看到 shared_ptr 构造函数/析构函数语句。我的问题是在 P1 代码中还是在主要或其他地方的实现中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:47:32.830

你在打电话

```
my_ShapeArray[0]->Print(); 
```

它必须是 Shape 的成员函数。

你没有打电话给

```
Print(); 
```

您在给定代码中定义的函数，它是使用 P1 类的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:05:22.633

您没有从`main`函数中的代码中调用任何位...您从不实例化`P1`，从不调用独立函数`Print`，那么您的任何日志记录语句怎么可能被调用？

# c# - 在远程计算机上模拟用户时 WMI 的访问被拒绝

> ID：12754243
> 
> 赞同：0
> 
> 时间：2012-10-05T21:25:35.883
> 
> 标签：c#, wmi, impersonation

我正在尝试使用 System.Management 从远程机器收集进程信息。

我正在使用类似[这些行](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)的东西来模拟远程计算机上的管理员，但以下代码引发异常：“访问被拒绝”。

```
ConnectionOptions options = new ConnectionOptions();
options.Impersonation = System.Management.ImpersonationLevel.Impersonate;

ManagementScope scope = new ManagementScope(@"\\" + machine + @"\root\cimv2", options);
scope.Connect();

ObjectQuery query = new ObjectQuery("Select * from Win32_Process where ProcessId = "
                        + procID.ToString());

ManagementObjectSearcher mos = new ManagementObjectSearcher(scope, query);

string cmdLn = "";
foreach (ManagementObject mo in mos.Get())
{
    cmdLn = (string)mo.GetPropertyValue("CommandLine");
} 
```

但是，如果我向 提供用户名和密码`options`，一切正常。

我已经验证此代码作为模拟上下文执行（在远程计算机上具有足够的权限），所以我不确定为什么如果没有传递用户名/密码它就无法工作。

是否可以在不显式传递用户凭据的情况下成功进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:29:42.337

使用 WMI，在模拟特定用户时，您必须提供明确的凭据。您在上面提供的链接使用变量 lpszUsername 和 lpszPassword 说明了这一点。

# html - PhoneGap + HTML5 数据库

> ID：12754251
> 
> 赞同：1
> 
> 时间：2012-10-05T21:26:33.460
> 
> 标签：html, cordova

我正在使用 PhoneGap 开发 iPhone/Android 应用程序，并考虑使用 HTMl5 WebSQL 数据库在本地存储数据。在移动设备上使用 HTML 5 WebSQL 数据库有哪些风险？

我发现 iPhone 上的性能比 Sqlite 数据库慢。有什么安全问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:31:02.067

我可以推荐这本手册，它对我很有用。

[Coenraets.org](http://coenraets.org/blog/2012/05/simple-offline-data-synchronization-for-mobile-web-and-phonegap-applications/)

是我在网上找到的最好的实现，它有助于为 phonegap 存储创建一个持久的解决方案。

问候。

# azure - Azure 表存储拒绝具有值为接口的属性的实体

> ID：12754252
> 
> 赞同：1
> 
> 时间：2012-10-05T21:26:37.587
> 
> 标签：azure, azure-storage, azure-table-storage

我有一种名为“评论”的类型，我将其保存到 Azure 表存储。由于评论可以是任意数量的其他类型，因此我创建了一个所有这些类型都实现的接口，然后将 ICommentable 类型的属性放在评论上。所以 Comment 有一个名为 About 的 ICommentable 类型的属性。

当我尝试将评论保存到 Azure 表存储时，如果 Comment.About 属性有一个值，我会收到毫无价值的无效输入错误。但是，如果 Comment.About 没有值，我没有问题。为什么会这样？

Comment.About 不是唯一的引用类型的属性。例如，Comment.From 是引用类型，但 Comment.About 是接口类型的唯一属性。

失败：

```
var comment = new Comment();
        comment.CommentText = "It fails!";
        comment.PartitionKey = "TEST";
        comment.RowKey = "TEST123";
        comment.About = sow1;
        comment.From = person1; 
```

作品：

```
var comment = new Comment();
        comment.CommentText = "It works!";
        comment.PartitionKey = "TEST";
        comment.RowKey = "TEST123";
        //comment.About = sow1;
        comment.From = person1; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:55:30.040

Windows Azure 表存储只能存储少数几种类型，它们都不是您创建的 ICommentable 类型：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:28:39.003

Azure 表存储客户端不支持控制哪些属性可持久化的精细方法。

您可能希望查看我在 CodePlex 上的开源项目，该项目允许对哪些字段/属性持久保存到表存储以及如何序列化它们进行细粒度控制。( [http://lucifurestash.codeplex.com/](http://lucifurestash.codeplex.com/) )

编辑：修正错字+澄清。

# python - 是否有一个 python 包可以在 perl 中完成 WWW::Mechanize 的功能？

> ID：12754254
> 
> 赞同：0
> 
> 时间：2012-10-05T21:26:41.650
> 
> 标签：python, perl, www-mechanize

是否有一个 python 包可以处理 perl 中 WWW::Mechanize 所涵盖的相同任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T21:27:51.493

WWW::Mechanize: [mechanize](http://wwwsearch.sourceforge.net/mechanize/)的 python 端口怎么样？

# javascript - 删除 JavaScript 中的无效字符

> ID：12754256
> 
> 赞同：23
> 
> 时间：2012-10-05T21:26:46.657
> 
> 标签：javascript, regex, string

有人可以提供正则表达式来搜索和替换找到的非法字符吗

例如，删除 �

我不确定存在多少种“非法”字符，但我认为这将是一个好的开始。

非常感谢

编辑-我无法控制数据，我们正在尝试为我们收到的潜在不良数据创建一个陷阱。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-05T21:31:33.827

无效字符在解析时被转换为 0xFFFD，因此任何无效字符代码都将被替换为：

```
myString = myString.replace(/\uFFFD/g, '') 
```

[您可以在此处](http://www.cl.cam.ac.uk/~mgk25/ucs/examples/UTF-8-test.txt)获取所有类型的无效字符

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-06T01:56:16.380

您可以使用白名单，而不是黑名单。例如，如果您只想接受字母、数字、空格和一些标点符号，您可以这样做

```
myString.replace(/[^a-z0-9 ,.?!]/ig, '') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-14T13:27:35.913

试试这个，它适用于所有意想不到的角色，如 ♫ ◘ 等...

```
dataStr.replace(/[\u{0080}-\u{FFFF}]/gu,""); 
```

# websocket - WebSockets + Haxe？

> ID：12754261
> 
> 赞同：1
> 
> 时间：2012-10-05T21:27:07.493
> 
> 标签：websocket, haxe

我需要使用 WebSockets 和 Haxe 开发一个应用程序。
我遇到了这个库： http: [//lib.haxe.org/p/hxWebSockets](http://lib.haxe.org/p/hxWebSockets)
但它已经过时了。
然后我找到了这篇博文：http: [//bp.io/post/322](http://bp.io/post/322)
但是代码的链接坏了:(

那么，任何人都知道 Haxe 的任何其他 WebSocket 资源吗？
如果没有，是否有人知道从哪里开始寻找开始实施我自己的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:05:32.917

如果您使用 node.js 作为平台，我建议您绑定到 socket.io。如果您使用其他平台，我建议使用 socket.io 作为参考实现，或者只是将其移植到 haxe，这应该不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T07:41:33.780

您提到的库确实已过时。幸运的是，有人做了一个新的，支持最新的 websocket 协议：

[http://lib.haxe.org/p/WebSocket](http://lib.haxe.org/p/WebSocket)

...但是，它仍然比 nodejs/socket.io 低一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-14T02:14:18.700

我正在将 haxe 用于 websockets 应用程序并使用 js 库：

```
import js.html.WebSocket; 
```

使用以下函数连接到服务器。

```
private function connect() {
    trace("Calling connect");
    try {
    websocket = new WebSocket(connectionString());
    websocket.onclose = onClose;
    websocket.onerror = onServerConnectionError;

    var openStream = initializeElementStream(cast websocket, "open");
    openStream.then(onOpen);
    var eventStream = initializeElementStream(cast websocket, "message");
    eventStream.then(onMessage);

    var closeStream = initializeElementStream(cast websocket, "close");
    closeStream.then(onClose);

    var errorStream = initializeElementStream(cast websocket, "error");
    errorStream.then(onServerConnectionError);
    }catch(err : Dynamic) {
        trace("Error establishing connection " + err);
    }
    trace("Connection successful");
} 
```

这对你有用吗？我坚持为我的项目使用标准 js 库。这对我有用，因为该项目没有外部依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-15T18:47:16.070

我最近开始使用 Haxe-Js-Kit，它为包括 Socket.IO 在内的许多 nodejs 库提供了不错的绑定。

[https://github.com/clemos/haxe-js-kit/](https://github.com/clemos/haxe-js-kit/)

确保使用 dev 分支进行开发，因为它比 haxelib 或 master 分支更先进。

# javascript - 有没有什么预防方法可以去除`IsTrial`，随便破解WinRT应用程序？

> ID：12754265
> 
> 赞同：2
> 
> 时间：2012-10-05T21:27:26.380
> 
> 标签：javascript, licensing, windows-runtime, reverse-engineering, windows-store

我读了一篇关于[逆向工程](http://justinangel.net/ReverseEngineerWin8Apps)Windows 8 应用程序的文章。最令人担忧的事情之一是修改它们的难易程度，以及微软如何在其中包含许可。

特别值得注意的是 Javsscript（尽管 C# 也容易受到 IL 重建的影响）。它们提供功能`LicenseInformation.IsTrial()`。但是，如文章中所述，如果您更改了一些权限，您可以直接编辑 javascript 并替换`IsTrial`为`false`.

不过，这篇文章是在 Windows 8 的一个非常早期（第一次）公开版本中制作的。他们采取了哪些措施来防止在当前发布版本中发生修改？Javascript 应用程序是否应该被视为不可能货币化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:26:34.560

应用程序包经过签名并定期检查是否被篡改。Windows 不会启动已被标记为已被篡改的打包应用程序（修改包中的文件是一种篡改形式）。

“[应用程序包和部署”](http://msdn.microsoft.com/en-us/library/windows/apps/hh464929.aspx)文档页面指出：

> 所有包都必须使用受信任的签名进行签名。这使 Windows 能够确认签名者的身份并验证包的内容没有被篡改。Windows 不会部署未签名的包。

“[签署应用程序包”](http://msdn.microsoft.com/en-us/library/windows/apps/br230260.aspx)文档页面指出：

> 如果已安装包中的任何文件被修改，签名验证可能会阻止应用程序启动。

也就是说，没有*技术*限制可以阻止某人打开应用程序包并构建一个新的、修改过的包。为此，需要开发人员许可证。但是，在这一点上，它与用户可以下载和安装的任何其他程序没有什么不同。

# c# - 将复杂文本作为字符串获取

> ID：12754269
> 
> 赞同：3
> 
> 时间：2012-10-05T21:27:32.897
> 
> 标签：c#, winforms, string, text, console-application

```
abc @cnn("sujsl d(*) sfv @nor dsf ",dn,".",@tn); ator '`,`') sds
@cns1 or '`,"\','\",`') fdhg @cns2 sf \",dn,"; nj 
```

如何在 C# 中将此文本作为字符串获取。它不能简单地完成，因为包含`"`我宁愿以某种方式粘贴它，而不是`"`用复制，`\"`因为我的文本已经包含类似的东西

一种方法是将其粘贴到静态文本框（textBox1）中，然后将其作为文本框的文本获取（如果我必须在 winform 中使用它），例如`string st = textBox1.Text`

如何在不使用文本框的情况下在字符串变量中获取这种类型的文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:00:30.220

这是资源文件的一个很好的例子。它们将允许您输入字符串文字，而不必担心任何形式的转义，并且可以以编程方式提供给您。请参阅[http://msdn.microsoft.com/en-us/library/3xhwfctz(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/3xhwfctz(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:50:09.723

查看[string literals](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)，这可能是您正在寻找的。

# ruby-on-rails-3 - 什么会导致代码库之外的 Rails 3 资产预编译问题（例如：gems、ruby 版本等）？

> ID：12754270
> 
> 赞同：1
> 
> 时间：2012-10-05T21:27:36.060
> 
> 标签：ruby-on-rails-3, bundler, sprockets

**Rails**代码库之外的哪些东西会影响资产预编译？

我的同事遇到了资产预编译问题，但对我来说效果很好。我们正在运行相同的代码。我们在版本控制中有 Gemfile 和 Gemfile.lock，所以它们是相同的，并且 application.rb 对我们双方来说都是相同的（例如，`config.assets.enabled = true`为我们双方设置了。）

这是两个相关文件。我们遇到的问题如下。

应用程序/视图/布局/application.html.erb：

```
...
<%= stylesheet_link_tag    "application", :media => "all" %>
... 
```

应用程序/资产/样式表/application.css：

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require_self
 *= require booking_availability_table
 *= require bootstrap_and_overrides
 *= require browse_coaches
 *= require landing_pages
 *= require layout
 *= require lightbox
*/ 
```

**注意**：这些文件有些是 .css，有些是 .css.less，有些是 .css.scss。

**问题：**

加载主页时，他收到错误

```
TypeError in Static_pages#home
can't convert nil into String
  (in /path/to/app/assets/stylesheets/layout.css.scss)

Extracted source (around line #20)

20: <%= stylesheet_link_tag "application", :media => "all" %> 
```

从实验性删除中，我们看到只有**.css.scss**文件导致了问题。删除`application.css`与 SASS 文件对应的行会阻止错误发生并让页面加载。但是，如果我们这样做：

然后主页有大量指向 的链接`/stylesheets/___.css`，这会导致 404，而不是`/assets/____.css`像我那样正确。

**我们尝试了什么**：

我尝试使用调试器在我们的两台机器上逐步加载主页。我们的代码执行在这里发散：

.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/sprockets/helpers/rails_helper.rb：

```
 def stylesheet_link_tag(*sources)
   ...
   sources.collect do |source|
     if debug && asset = asset_paths.asset_for(source, 'css')
       asset.to_a.map { |dep|
         super(dep.pathname.to_s, { :href => path_to_asset(dep, :ext => 'css', :body => true, :protocol => :request, :digest => digest) }.merge!(options))
       }
     else
       super(source.to_s, { :href => path_to_asset(source, :ext => 'css', :body => body, :protocol => :request, :digest => digest) }.merge!(options))
     end
   end.join("\n").html_safe 
```

具体来说，该声明`asset_paths.asset_for(source, 'css')`对我的同事提出了错误，但对我没有。

我们还尝试卸载并重新安装 rails 和 rvm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:34:35.163

哦，感觉很愚蠢......我们修复了它。`rm -rf`'ing 整个目录并重新克隆它修复它。我猜那里有一个额外的文件漂浮着什么的。

# mysql - 从 .sql 文件中探索数据库内容

> ID：12754275
> 
> 赞同：1
> 
> 时间：2012-10-05T21:27:53.920
> 
> 标签：mysql

我继承了一个小型网络论坛的维护。据我所知，它由后端的 MySQL 数据库提供支持（前端都是 PHP）。

我需要提取一些数据（这也涉及到搜索我需要提取的数据），但我不想接触生产数据库。我导出了一个数据库备份，它生成了一个数百兆字节的 .sql 文件。

挖掘这些数据的最佳方法是什么？我可以看到几个选项：

*   grep 在文本模式下通过 .sql 脚本，尝试提取相关数据
*   在 sqlite3 中加载它（我试过这样做，但它在脚本中的一些语句上出现问题并且没有生成任何表。不过我没有任何数据库经验，所以我没有排除它是死胡同刚刚）。
*   在我的 home box 上安装 MySQL，创建一个数据库，然后执行 .sql 脚本来重新创建数据。然后只需附加一些数据库浏览器工具。
*   找到一些可以本机理解 .sql 文件的（Linux）应用程序（经过一番谷歌搜索后似乎不太可能）。

任何指向这些选项中的哪一个（或我还没有想到的选项）将是最有成效的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:05:30.563

我想说任何选项都可能有效，但对于数据挖掘，您肯定希望将其加载到新数据库中，以便您可以开始查询数据并在数据上构建报告。我会把它加载到你的 Home box 上。无需远程。

# perl - Perl 帮助取消对包含记录集数据的哈希引用数组的引用

> ID：12754276
> 
> 赞同：1
> 
> 时间：2012-10-05T21:27:54.653
> 
> 标签：perl, amazon-route53

我正在使用一个 Amazon Perl 模块，它返回对哈希引用数组的引用作为 $record_sets，其中包含记录集数据，我很难取消引用它。我可以使用数据转储器打印数据，但我需要能够操作数据。以下是为模块提供的文档

提前致谢：

```
#list_resource_record_sets
#Lists resource record sets for a hosted zone.
#Called in scalar context:

$record_sets = $r53->list_resource_record_sets(zone_id => '123ZONEID');

#Returns: A reference to an array of hash references, containing record set data. Example:

$record_sets = [
{
name => 'example.com.',
type => 'MX'
ttl => 86400,
records => [
'10 mail.example.com'
]
},
{
name => 'example.com.',
type => 'NS',
ttl => 172800,
records => [
'ns-001.awsdns-01.net.',
'ns-002.awsdns-02.net.',
'ns-003.awsdns-03.net.',
'ns-004.awsdns-04.net.'
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:39:59.273

当您有一个数组引用时，例如 $x = ['a','b','c']，您可以通过两种方式取消引用它。

```
print $x->[0]; # prints a
print $x->[1]; # prints b
print $x->[2]; # prints c

@y = @{$x}; # convert the array-ref to an array (copies the underlying array)
print $y[0]; # prints a
print $y[1]; # prints b
print $y[2]; # prints c 
```

hash-ref 的工作原理相同，只是它使用花括号。例如 $x = {a => 1, b => 2, c => 3}。

```
print $x->{a}; # prints 1
print $x->{b}; # prints 2
print $x->{c}; # prints 3

%y = %{$x}; # convert the hash-ref to a hash (copies the underlying hash)
print $y{a}; # prints 1
print $y{b}; # prints 2
print $y{c}; # prints 3 
```

将此应用于您的示例，该示例具有嵌套结构，您可以执行此操作。

```
for my $x ( @{$record_sets} ) {
  print $x->{name}, "\n";
  print $x->{type}, "\n";

  for my $y ( @{$x->{records}} ) {
    print $y, "\n";
  }
}

# or something more direct
print $record_sets->[0]->{name}, "\n";
print $record_sets->[0]->{records}->[1], "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:36:20.790

$record_sets 是一个数组引用。要取消引用它，您可以使用

```
my @array = @{ $record_sets }; 
```

每个记录集都是一个哈希引用。

```
for my $record_set ( @{ $record_sets } ) {
    my $set = %{ $record_set };
} 
```

例如，要获取名称和记录（数组 ref）：

```
for my $record_set ( @{ $record_sets } ) {
    print $record_set->{name},
          ': ',
          join ', ', @{ $record_set->{records} };
    print "\n";
} 
```

# jquery - Knockout JS: Visible 适用于 foreach: 循环中的所有元素，而不是当前元素

> ID：12754278
> 
> 赞同：4
> 
> 时间：2012-10-05T21:28:01.070
> 
> 标签：jquery, knockout.js

基本上我只想`visible:`在我悬停的 div 上启动，但它适用于所有这些，无论我悬停在哪一个上。

我想这是有道理的，因为我绑定到`visible:`内部`foreach:`循环，所以它适用于所有循环。是否有 KnockoutJS 解决方法，或者我应该使用`$jQuery.hover()`它来代替它？

**html:**

```
<div>
 <div data-bind="foreach: hostGroups">
  <div data-bind="css: { style: true }, event: { mouseover: $root.showDeleteLink, mouseout: $root.hideDeleteLink }">
   <span data-bind="text: hostName"></span>
   <span class="delete-link" data-bind="visible: $root.deleteLinkVisible">this is a delete link</span>
  </div>
 </div>
</div>​ 
```

**JavaScript：**

```
var data = [ 
    { "hostName": "server1" }, 
    { "hostName": "server2" }, 
    { "hostName": "server3" }
]; 

var viewModel = {

    hostGroups: ko.observableArray(data),

    deleteLinkVisible: ko.observable(false),

    showDeleteLink: function() {
         viewModel.deleteLinkVisible(true);
    },

    hideDeleteLink: function() {
        viewModel.deleteLinkVisible(false);
    }

};  

ko.applyBindings(viewModel); 
```

[http://jsfiddle.net/pruchai/KXtTU/3/](http://jsfiddle.net/pruchai/KXtTU/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:47:09.010

您应该在每个单独的项目上而不是在根视图模型上实现隐藏和显示链接。例如：

**JavaScript：**

```
var data = [
    {
    "hostName": "server1"},
{
    "hostName": "server2"},
{
    "hostName": "server3"}
];

function Item(hostName) {
    var self = this;
    this.hostName = ko.observable(hostName);
    this.deleteLinkVisible = ko.observable(false);
    this.showDeleteLink = function() {
        self.deleteLinkVisible(true);
    };
    this.hideDeleteLink = function() {
        self.deleteLinkVisible(false);
    };
}

function ViewModel() {
    var self = this;

    this.hostGroups = ko.observableArray(ko.utils.arrayMap(data, function(item) {
        var newItem = new Item(item.hostName);
        return newItem;
    }));

}

var viewModel = new ViewModel();

ko.applyBindings(viewModel);​ 
```

**html:**

```
<div>
 <div data-bind="foreach: hostGroups">
  <div data-bind="css: { style: true }, event: { mouseover: showDeleteLink, mouseout: hideDeleteLink }">
   <span data-bind="text: hostName"></span>
   <span class="delete-link" data-bind="visible: deleteLinkVisible">this is a delete link</span>
  </div>
 </div>
</div>​ 
```

**示例：http:** [//jsfiddle.net/KXtTU/4/](http://jsfiddle.net/KXtTU/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:41:30.140

您发布的 jsfiddle 中的 showDeleteLink 和 hideDeleteLink 正在引发 JavaScript 错误。

这是修复：http: [//jsfiddle.net/KXtTU/1/](http://jsfiddle.net/KXtTU/1/)

更新的 JS：

```
var data = [ 
        { "hostName": "server1" }, 
        { "hostName": "server2" }, 
        { "hostName": "server3" }
    ]; 

var viewModel = {

    hostGroups: ko.observableArray(data),

    deleteLinkVisible: ko.observable(false),

    showDeleteLink: function() {
         viewModel.deleteLinkVisible(true); // added "viewModel."
    },

    hideDeleteLink: function() {
        viewModel.deleteLinkVisible(false); // added "viewModel."
    }

};  

ko.applyBindings(viewModel); 
```

# javascript - 为什么我的函数会在页面加载时触发，我该怎么办？

> ID：12754281
> 
> 赞同：1
> 
> 时间：2012-10-05T21:28:13.453
> 
> 标签：javascript, jquery

我有以下 javascript。例如`console.log('test')`加载 javascript 时的触发器。我希望它在我单击带有类登录的按钮时触发。我究竟做错了什么？

```
$(document).ready(function() {
    switchImage(5000, '#top .images');
    switchImage(5000, '#top .feature-text');
    $('.login input').focus(function(){
        $('.login .hidden').removeClass("hidden");
        $('.login [type=text]').removeClass("span2").addClass("span3");
    });
    $('.loginbutton').click(login());
});

function login(){
    event.preventDefault();
    console.log('test')
}

function switchImage(wait, element){

    //Fades out first element and put's it in the bottom of the stack
    $(element+'>*:first-child').delay(wait).fadeOut('slow', function() {

        //fade in imag2
        $(element+'>*:nth-child(2)').fadeIn('slow');
        $(element+'>*:first-child').appendTo(element); 
        switchImage(wait, element);
    });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T21:29:49.147

你有：

```
$('.loginbutton').click(login()); 
```

这表示“单击按钮时，调用`login()`.

你想要的是：

```
$('.loginbutton').click(login); 
```

即“单击按钮时，调用`login`函数”。

# php - 获取动态电台 ID 和值 (jQuery)

> ID：12754286
> 
> 赞同：1
> 
> 时间：2012-10-05T21:28:27.103
> 
> 标签：php, jquery

我们有从这样的数据库生成的动态 ID：

```
<input type="radio" id="brand1" value="1">
<input type="radio" id="brand1" value="2">
----
<input type="radio" id="brand2" value="1">
<input type="radio" id="brand2" value="2"> 
```

如何通过单击单选按钮获取/提醒它是哪个 ID？

（我想我的错误在第一行：'input#brand'。）

```
$('input#brand').live('click',function() { 
    var radiovalue = $('input[name=brand + id]:checked').val()
    alert(radiobuttonID + radiovalue);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:30:29.650

```
$(document).on('click', 'input[type=radio]' , function() {

     alert('Radio Button ID  is : ' + this.id + ' - Value is : ' + this.value);
}) 
```

还要确保您在页面上有唯一的 id。

最好为页面上要处理此事件的所有单选按钮分配一个类。

```
$(document).on('click', '.myradio' , function() {

         alert('Radio Button ID  is : ' + this.id + ' - Value is : ' + this.value);
    }) 
```

这样做将使您的代码更清晰，更易于理解

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:31:53.563

使用[attribute-starts-with-selector](http://api.jquery.com/attribute-starts-with-selector/attribute)，这将选择所有以 id 开头的输入`brand`。

```
$('input[id^=brand]').live('click',function() { 
    alert(this.id + ' ' + this.value);
}); 
```

同样，从 jQuery 1.7[`.live()`](http://api.jquery.com/live/)开始，已弃用，请[`.on()`](http://api.jquery.com/on/)改用。id 也应该是唯一的，在您的标记中，您有多个具有相同 id 的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T21:33:30.833

你会使用这样的东西来获取 id：

```
$('input[id^=brand]').live('click',function() {
    alert($(this).attr('id'));
});​ 
```

这是为了获得价值：

```
$('input[id^=brand]').live('click',function() {
    alert($(this).attr('value'));
});​ 
```

`^=`请注意，我们可以在所有以 ( ) "brand"开头的元素上放置一个实时点击处理程序。

见[JSFiddle](http://jsfiddle.net/bozdoz/WDUKZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T21:31:27.650

请更正您的选择器。$('input#brand') 表示您正在寻找具有确切 ID“品牌”的 INPUT。

# asp.net-mvc - MVC Html.BeginForm 捕获按键事件

> ID：12754289
> 
> 赞同：0
> 
> 时间：2012-10-05T21:28:59.047
> 
> 标签：asp.net-mvc, razor, html-helper

我有一个 MVC 应用程序，我正在使用 Html.BeginForm 来制作表单。页面上有几个表单，每个表单代表一行选项卡中的一个选项卡。我需要检测在其中一个选项卡上按下的“Enter”键。有人知道怎么做吗？

代码示例 -

```
<div>
@using (Html.BeginForm("MyAction", "MyController", FormMethod.Post, new { id = "MyForm1" }))
{
    <div id="divId">
    </div>
}
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-14T15:39:36.287

```
@using (Html.BeginForm("Create", "ApplicationSchedule", FormMethod.Post, 
        new { onkeydown = "return event.keyCode!=13" })) 
```

您可以使用 htmlAttributes 对象参数将事件侦听器添加到表单，就像我使用`new { onkeydown = "return event.keyCode!=13" }`代码中的部分所做的那样。在我的情况下，当使用 onkeydown 侦听器在表单中按下回车键时，我忽略了它。这可以使用您自己的代码轻松替换，例如`onkeydown = "yourJavascriptFunction()"`在表单中按下回车键时实现您需要实现的任何目标。有关 Html.BeginForm() 接受的参数的更多信息，请参阅[MSDN](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.118).aspx)

# javascript - 如果页面未使用 Javascript 在 IFrame 中加载，请更改 IFrame 源

> ID：12754291
> 
> 赞同：1
> 
> 时间：2012-10-05T21:29:04.707
> 
> 标签：javascript, iframe

我有这样的代码： -

```
<html>
    <head>
        <title>Test Page</title>
    </head>
    <body>
        <a href="http://www.abc.com" target="iframe">ABC</a>
        <iframe name="iframe"></iframe>
    </body>
</html> 
```

我想要这个功能：-如果加载页面时出现错误，如果 IFrame，则它将 IFrame 源更改为其他 url。我想要使​​用 javascript 的 Firefox 和 IE

# php - Codeigniter 不显示页面

> ID：12754295
> 
> 赞同：2
> 
> 时间：2012-10-05T21:29:23.877
> 
> 标签：php, codeigniter, controller

我已经制作了一个名为“Controller”的 codigniter 控制器，我已将其设置为默认控制器，但是当我尝试访问该控制器内的不同功能时，例如。博客它只是显示主页...

除了默认控制器之外，我没有对路由器进行任何更改。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:31:35.730

您不能将控制器命名为“控制器”

[http://codeigniter.com/user_guide/general/reserved_names.html](http://codeigniter.com/user_guide/general/reserved_names.html)

# objective-c - 从目标 c 中的一组 int 值中找到最接近的 Int 值

> ID：12754308
> 
> 赞同：2
> 
> 时间：2012-10-05T21:30:51.410
> 
> 标签：objective-c, math, int

目标c数学函数问题

我有一个 x 值，我想将它与一组中的其他值进行比较，然后确定我的 x 值最接近该组中的哪个值。

例如，假设我有整数 5、10、15、20、25。

确定这些数字中哪个最接近 7 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:44:29.420

```
 int closestDistance = INT32_MAX;
    int indexOfClosestDistance = -1;
    int x = 7;

    for (int i=0; i < [yourArray count]; i++)
    {
        int num = yourArray[i];
        int diff = abs(num - x);

        if (diff < closestDistance)
        {
            closestDistance = diff;
            indexOfClosestDistance = i ;
        }
    } 
```

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:41:07.420

Objective-C 和 Cocoa 都没有为你提供任何解决这个问题的方法。您可以将 int 存储在一个普通的旧数组中`int`，或者您可以将每个int`NSNumber`包装在 an 中并将包装器存储在`NSArray`.

如果您要多次探测数组，请提前对它进行一次排序，然后对每个探测使用二进制搜索（标准 C 函数`bsearch`或 Core Foundation`CFArrayBSearchValues`或 Cocoa 的`-[NSArray indexOfObject:inSortedRange:options:usingComparator:]`）来查找最近的两个元素。如果您只打算对数组进行一次或两次探测，只需使用 for 循环、减法`abs`和`MIN`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:15:11.147

最简单的方法是从较大的数字中减去较小的数字。所以你想先比较这两个数字，然后做简单的减法。所以你会看到 10-7 距离 3 远，而 7-5 距离只有 2 远。

# ruby-on-rails - 在服务器上部署之前，我应该在本地预编译资产吗？

> ID：12754312
> 
> 赞同：1
> 
> 时间：2012-10-05T21:31:07.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

我可以选择在本地开发或生产服务器上预编译我的资产。我使用 git 进行部署，所以我不想检查所有这些资产（尤其是如果它们使用缓存破坏摘要）。

在本地预编译资产有什么好处（除了在生产机器上缺乏写访问权限）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:43:43.503

我发现在本地编译资产要快得多，然后您的网站会在较短的时间内关闭。

当然，这取决于您的服务器设置等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:25:56.957

预编译资产时，您的网站不需要关闭。如果您使用 capistrano 或类似工具，则在服务器中预编译资产，然后（在完成此步骤和更多步骤之后）重新启动应用程序。同时，该应用程序是从旧代码（和资产）提供的。

另一方面，我不同意“缓存破坏”的评论。如果可能的话，Git 足够聪明，可以理解两个不同命名文件之间的差异。因此，无论名称是否更改，结果都将完全相同。在这种情况下，我完全同意用生成的数据（如编译的资产）加载存储库是没有意义的。

# installation - 使用 Inno Setup，如何导入证书 .cer 文件？

> ID：12754314
> 
> 赞同：11
> 
> 时间：2012-10-05T21:31:08.553
> 
> 标签：installation, certificate, distribution, inno-setup

我可以使用 Inno Setup 导入`.cer`文件（证书）吗？

我该怎么做？

我需要为 Windows XP、Windows Vista 和 Windows 7 创建证书安装程序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-10-21T10:13:50.907

实际上，`CertMgr.exe`并非在所有 PC 上都可用，而且它似乎不可再分发（如 @TLama 所暗示的那样）；而且你甚至不需要它。

`CertUtil`在每台 Windows 机器上都可用（我已经测试过）并且可以完美运行：

```
[Run]
Filename: "certutil.exe"; Parameters: "-addstore ""TrustedPublisher"" {app}\MyCert.cer"; \
    StatusMsg: "Adding trusted publisher..." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T10:16:13.453

将 Certmgr.exe 和 yourcertificate.cer 添加到设置中：

```
[Files]
Source: CertMgr.exe; DestDir: {app}; Flags: deleteafterinstall
Source: yourcertificate.cer; DestDir: {app}; Flags: deleteafterinstall 
```

在 [Run] 部分，编写如下内容：

```
Filename: {app}\CertMgr.exe; Parameters: "-add -all -c yourcertificate.cer -s -r localmachine trustedpublisher"; Flags: waituntilterminated runhidden; 
```

# javascript - RegEx 需要在“|”上拆分 javascript 字符串 但不是“\|”

> ID：12754321
> 
> 赞同：1
> 
> 时间：2012-10-05T21:31:24.483
> 
> 标签：javascript, regex

我们想在管道字符的实例上分割一个字符串`|`，但如果该字符前面有一个转义字符，例如`\|`.

例如，我们希望将以下字符串拆分为以下组件

```
1|2|3\|4|5

1
2
3\|4
5 
```

我希望能够使用以下 javascript 函数 split，它采用正则表达式。我会通过什么正则表达式来拆分？我们是跨平台的，如果可能的话，我们希望支持 IE、FF 和 Chrome 的当前和以前的版本（1 个版本）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T21:52:10.050

而不是拆分，而是进行全局匹配（与词法分析器相同的方式）：

*   匹配除`\\`或以外的任何内容`|`
*   或匹配任何转义字符

像这样的东西：

```
var str = "1|2|3\\|4|5";
var matches = str.match(/([^\\|]|\\.)+/g); 
```

快速解释：`([^\\|]|\\.)`匹配除`'\'`and `'|'`(pattern: `[^\\|]`) 或 (pattern: `|`) 之外的任何字符，它匹配任何转义字符 (pattern: `\\.`)。`+`after 它告诉它匹配前一个一次或多次：因此该模式将`([^\\|]|\\.)`匹配一次或多次。正`g`则表达式文字末尾的 告诉 JavaScript 正则表达式引擎*全局*匹配模式，而不是只匹配一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:44:29.413

您正在寻找的是“负后视匹配正则表达式”。

这并不漂亮，但它应该为您拆分列表：

```
var output = input.replace(/(\\)?|/g, function($0,$1){ return $1?$1:$0+'\n';}); 
```

这将获取您的输入字符串并替换所有的 '|' 字符前不紧跟 '\' 字符并将它们替换为 '\n' 字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:06:17.840

当我正在研究这个时，发布了一个正则表达式解决方案。所以我只是继续写了一个没有它的东西。我做了一些简单的基准测试，它 - 稍微 - 更快（我预计它会更慢......）。

在不使用正则表达式的情况下，如果我理解您的需求，这应该可以完成工作：

```
function doSplit(input) {
    var output = [];
    var currPos = 0,
        prevPos = -1;
    while ((currPos = input.indexOf('|', currPos + 1)) != -1) {
        if (input[currPos-1] == "\\") continue;
        var recollect = input.substr(prevPos + 1, currPos - prevPos - 1);
        prevPos = currPos;
        output.push(recollect);
    }
    var recollect = input.substr(prevPos + 1);
    output.push(recollect);
    return output;
}
doSplit('1|2|3\\|4|5'); //returns [ '1', '2', '3\\|4', '5' ] 
```

# javascript - 是否可以扩展 KineticJS 事件处理程序，特别是可拖动对象的 _touchend() 处理程序？

> ID：12754322
> 
> 赞同：0
> 
> 时间：2012-10-05T21:31:26.450
> 
> 标签：javascript, events, html5-canvas, kineticjs

我在图层上有一些可拖动的 KineticJS 图像对象，我想在“touchend”事件上执行我自己的处理程序。听起来很简单！我为每个图像对象添加了处理程序，例如：

```
toyKinObj.on('touchend', openBoxContactEnded); 
```

然而，由于对象的“可拖动”属性为“真”，似乎 KineticJS 除了我自己的处理程序代码外，还调用了它的内置 _touchend() 处理程序。

我的代码执行 stage.clear() 和 e.shape.setDraggable(false) 但这些对象修改似乎会干扰内置的 _touchend() 处理程序。根据我使用的代码版本，我看到 KineticJS _handleEvent() 处理程序失败，因为事件不再存在，或者我稍后清除的图层上的图像重新出现（后者可能发生，因为我 KineticJS 是尝试重新绘制舞台/图层作为其事件处理的一部分，即使我想清除舞台）。

更复杂的是，我自己的处理程序代码似乎也在内置的 KineticJS _touchend() 处理程序代码的中间被调用，我确信这没有帮助。

所以我的问题是：我可以扩展 _touchend() 处理程序以在主 _touchend() 代码之后执行我的代码，而不是拥有自己的处理程序吗？或者以某种方式确保我的代码在 _touchend() 完成之前不会执行？即控制处理程序执行的顺序？

我可以破解 _touchend() 以在用户定义的事件完成时调度它，触发我自己的代码，或者我可以忘记 KineticJS 触摸事件并实现我自己的拖放处理程序，但我确定我只是遗漏了一些东西，还有一种更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:10:06.893

我认为您正在寻找的是取消事件传播，请尝试：

```
 shape.on('touched', function(evt) {
    evt.cancelBubble = true;
  }); 
```

更多信息：[http ://www.html5canvastutorials.com/kineticjs/html5-canvas-cancel-event-bubble-propagation-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-cancel-event-bubble-propagation-with-kineticjs/)

# git - git repo 对象目录无明显原因膨胀到大尺寸

> ID：12754338
> 
> 赞同：4
> 
> 时间：2012-10-05T21:32:57.087
> 
> 标签：git

我遇到了 git 存储库突然膨胀到非常大的问题。

这是设置。

这里有一个 git master repo，其中包含大约 900megs 的文件和 1.8g 的对象文件：

```
[gitmaster.local] du -hs 
2.7G    .
[gitmaster.local]$ cd .git/objects/
[gitmaster.local]$ du -hs
1.8G    . 
```

我确实对这个 repo 进行了一些维护以保持它的清洁。每天我在一个脚本中运行这两个命令：

```
GIT_PROG2="/usr/bin/git-reflog expire --expire=now --all"
GIT_PROG3="/usr/bin/git-gc" 
```

每周我都会运行这些：

```
GIT_PROG2="/usr/bin/git-reflog expire --expire=now --all"
GIT_PROG3="/usr/bin/git-repack -a -d --depth=250 --window=250 -f " 
```

大约每 15-30 分钟从该服务器拉出几个不同的 git 客户端。他们通过一个简单的 'git pull' 的 cron 作业来拉动完全相同的东西。每周这些回购做一个：

```
GIT_PROG2="/usr/bin/git-reflog expire --expire=now --all"
GIT_PROG3="/usr/bin/git-gc" 
```

但是，偶尔，其中一个会失控并用 .git/objects 填充其磁盘空间，占 99.9% 的空间。它所做的只是一个简单的“git pull”。

```
gitclient001
1.3G    .
gitclient002
1.3G    .
gitclient003
1.3G    .
gitclient004  <-- woops!
101.2G  .
gitclient005
1.3G    .
gitclient006
1.3G    . 
```

发生这种情况时，我当前的解决方案是将其吹走并以 depth=1 重新克隆。因为我不太关心历史数据。我宁愿它是可操作的，而不是担心几天的变化。

显然，我宁愿这一切顺利进行。什么可能导致这种行为发生？关于在哪里看的任何想法或建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:53:28.097

您是否尝试过运行`git fsck`并查看它是否报告了可以解释问题的任何内容？

您也许可以编写一些脚本并传递 blob 以`git show <sha>1 |wc`查看是否有任何大的。

# jquery - 使用 jQuery 切换 ID

> ID：12754339
> 
> 赞同：0
> 
> 时间：2012-10-05T21:33:09.550
> 
> 标签：jquery, html

我正在尝试为产品列表模板切换一个 ID（我知道一个类会更好，但在这种情况下我需要使用一个 ID）。不幸的是，它只适用于第一次点击。完成后我无法切换回来。我究竟做错了什么？

这是我正在使用的代码

```
$(document).ready(function(){

    $("a.toggle").bind("click", function(e){
        e.preventDefault();

        var theid = $(this).attr("id");
        var thecontainer = $("div#container");

    if($(this).hasClass("active")) { 
        return false;
    } else {

        if(theid == "gridView") {
           $(this).addClass("active");
           $("#listView").removeClass("active");

        thecontainer.removeAttr('id');
        thecontainer.attr('id', 'container');
        }
        else if(theid == "listView") {
            $(this).addClass("active");
            $("#gridView").removeClass("active");

            thecontainer.removeAttr('id');
            thecontainer.attr('id', 'containerList');

            } 
        }

    });
}); 
```

这是我用来切换视图的链接的 html。

```
 <div class="buttonPanel">
    <a id="gridView" class="btnGridView toggle active" href="#">Grid</a> 
    <a id="listView" class="btnListView toggle" href="#">List</a>   
  </div> 
```

CSS 很长，但简而言之，有两个版本，一个是带有框和功能的网格视图，一个是直接列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:52:03.623

将此行添加到您的 document.ready： `$("div#container").addClass("containerClass");` 不在单击事件中。

然后更换`var thecontainer = $("div#container");`

和`var thecontainer = $(".containerClass");`

# oop - 我可以在许多奴隶（即多态）上使用相同的 Jenkins 工作名称吗？

> ID：12754340
> 
> 赞同：2
> 
> 时间：2012-10-05T21:33:17.587
> 
> 标签：oop, continuous-integration, jenkins, agile

到目前为止，我们正在 POCing 一个 Jenkins“构建农场”，该农场由 1 个主人、2 个奴隶组成（将在路上成长）。

我们主要使用 Jenkins 来监控我们的 C++ 构建。我们的软件针对许多不同的 Linux 和 FreeBSD 发行版和发行版，以及不同的编译器套件，因此我们可以看到 Jenkins 可以帮助显着提高我们的效率。

但是在测试它时，在我看来，即使对于相同的构建作业，我也必须以不同的方式命名作业。我想知道这是因为我误解了 Jenkins 的用法还是我必须忍受的当前限制？

具体来说，假设我们有 `m0`、`s0`和`s1`，`m0`主人在哪里`s0`，`s1`两个奴隶在哪里。 `j0`, `j1`, ...`jn`作为我们的 C++ 构建/测试作业的相应“原始”名称（即，当这些作业仅在 POC 主机上运行时）

现在，要使用`s0`and `s1`，我们似乎必须将我们的工作重命名为：

```
On m0: m0-j0, m0-j1, ... m0-jn
On s0: s0-j0, s0-j1, ... s0-jn
On s1: s1-j0, s1-j1, ... s1-jn 
```

这似乎是一个相当繁琐的要求。我们可以以更面向对象的方式来做吗 - 在某处使用一个属性来表示一个`j0`应该运行`s0`，另一个`j0`应该运行`s1`等，同样适用于其他工作？

提前感谢任何提示/提示。

问候，

——扎克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:43:53.397

听起来您需要一个[Matrix Project](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project)，它可以让您在多个配置中运行相同的构建作业。要运行的从站是可用于配置的轴之一。

# android - 在 Eclipse Android PhoneGap 项目中使用 Dreamweaver CS6 站点文件时，Eclipse 抛出错误

> ID：12754344
> 
> 赞同：0
> 
> 时间：2012-10-05T21:33:36.973
> 
> 标签：android, eclipse, cordova, dreamweaver, phonegap-plugins

如何将生成的 Dreamweaver PhoneGap 站点文件导入 Eclipse IDE for Android Platform。

我目前正在使用 Dreamweaver CS6 Trail 版本来构建 PhoneGap 应用程序。

我复制了 Dreamweaver 站点文件夹中生成的所有文件并将其粘贴到 assets/www 文件夹中。

它最初适用于 hello world 应用程序并在 Android 模拟器中正确显示，但现在我的带有 5 个 HTML 页面的 PhoneGap 应用程序在 Dreamweaver CS6 中运行良好，但在 Eclipse 上无法运行。

当我尝试运行该应用程序时，它显示一个空白的白屏 2 分钟，然后黑屏 30 秒，然后抛出一个错误

```
"E/Web Console(302): SECURITY_ERR: DOM Exception 18: An attempt was made to break through the security policy of the user agent. at file:///android_asset/www/jquery.mobile-1.0.min.js:70". 
```

我尝试为 .js 文件中存在的函数添加 try catch 块，但对我来说不起作用。我仍然遇到同样的错误。

难道我做错了什么 ？还是两者都是开发Phonegap应用程序的不同方式的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:15:40.863

该错误消息表明这是内容安全策略问题。您的网站是否在制作跨域 XHR 或其他对 CSP 不友好的活动？

这可能与 Dreamweaver 本身无关。Phonegap URL 白名单也可能存在问题。

# php - 定义根路径

> ID：12754349
> 
> 赞同：3
> 
> 时间：2012-10-05T21:33:48.257
> 
> 标签：php, codeigniter

我正在寻找一种将配置变量定义为我网站的根路径的方法。定义这个的最好方法是什么。我正在使用 Codeigniter。

```
$config['root_path'] = ? 
```

这是用于我的配置文件夹中的 site_config 文件。

```
/
/dev
/dev/application
/dev/application
/dev/application/config
/dev/application/config/site_config.php
/dev/system/
/dev/assets/
/public_html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:36:34.853

我通常使用`__DIR__`. 例如，如果您的配置文件位于根目录中，您可以使用：

```
$config['root_path']=__DIR__; 
```

或者，如果它位于项目的子目录中（例如`/anyframework/config/config.php`）：

```
$config['root_path']=dirname(dirname(__DIR__)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:35:00.533

我认为

```
$config['root_path'] = $_SERVER['DOCUMENT_ROOT']; 
```

无论哪个脚本从哪里调用它，都会为您提供所需的内容。

另一方面，我对 codeigniter 的经验几乎为零，这可能会对我的建议的有效性产生负面影响。

# ruby - 无法上传食谱（因为我的食谱有问题？）

> ID：12754351
> 
> 赞同：0
> 
> 时间：2012-10-05T21:33:52.737
> 
> 标签：ruby, chef-infra, recipe

我在现有食谱中添加了另一个模板，但食谱不会上传。这是我的代码：

`/cookbook/recipe/default.rb`

```
template "/opt/graphite/conf/blacklist.conf" do
  source "blacklist.erb"
  mode 0755
  variables( :mac => node[:graphite][:blacklist][:mac] )
end 
```

`/cookbook/recipe/template/blacklist.erb`

```
mac = <%= @mac %> 
```

`/cookbook/recipe/attributes/default.rb`

```
default[:graphite][:blacklist][:mac] = "xyz\.mac" 
```

这只是告诉厨师为石墨创建一个黑名单文件。我做错什么了？这是我的错误：

```
Uploading graphite                       [1.0.5]
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-1u45f5v.lock"]}
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-1mlzi8g.lock"]}ERROR: RestClient::InternalServerError: 500 Internal Server Error
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-1pvrxcv.lock"]}
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-1pl351l.lock"]}
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-1crdpij.lock"]}
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-v8ijj3.lock"]}
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-ufrny2.lock"]}
ERROR: Failed to upload #<Chef::CookbookVersion:0x00000001e2bcc8> : 500 Internal Server Error
{"error":["No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-server-api-0.10.8.3/sandbox20121005-2129-jtztmr.lock"]}

/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rest-client-1.6.7/lib/restclient/abstract_response.rb:48:in `return!': 500 Internal Server Error (RestClient::InternalServerError)
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rest-client-1.6.7/lib/restclient/request.rb:230:in `process_result'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rest-client-1.6.7/lib/restclient/request.rb:178:in `block in transmit'
    from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:745:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rest-client-1.6.7/lib/restclient/request.rb:172:in `transmit'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rest-client-1.6.7/lib/restclient/request.rb:64:in `execute'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/rest-client-1.6.7/lib/restclient/resource.rb:76:in `put'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-0.10.8.3/lib/chef/cookbook_uploader.rb:134:in `block in uploader_function_for'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-0.10.8.3/lib/chef/cookbook_uploader.rb:25:in `call'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-0.10.8.3/lib/chef/cookbook_uploader.rb:25:in `block (3 levels) in setup_worker_threads'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-0.10.8.3/lib/chef/cookbook_uploader.rb:24:in `loop'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/chef-0.10.8.3/lib/chef/cookbook_uploader.rb:24:in `block (2 levels) in setup_worker_threads' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T17:33:06.827

这个问题与食谱完全无关。couchDB 有一些问题，因为这是很久以前的事了，我似乎不记得我是否必须重新安装或只是重新启动 couchDB，但它确实解决了这个问题。

# c# - 使用 LINQ 解析 XML 字符串（带有命名空间）

> ID：12754354
> 
> 赞同：6
> 
> 时间：2012-10-05T21:34:13.630
> 
> 标签：c#, visual-studio-2010, linq, xml-parsing

**我的输入**

```
<A xmlns="http://abc.com"> 
    <B>"b"</B>
    <C>"c"</C>
    </A> 
```

**我的代码**

```
XNamespace ns = XNamespace.Get("http://abc.com");

var query= from node in doc.Descendants(ns+ "A") 
           select new
            (
                        B = (string)node.Element(ns+"B"),
                            C = (string)node.Element(ns+ "C")
             ); 
```

**我的问题**

我`ns`每次都必须添加`node.Element()`吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T21:36:52.517

> 每次我做node.Element()时都必须添加ns吗？

是的，基本上。您正在寻找（比如说）一个本地名称为`B`且名称空间 URI 为“http://abc.com”的元素。

您*可以*编写自己的扩展方法来匹配具有正确本地名称的任何元素，但我建议不要这样做。它会是这样的：

```
public IEnumerable<XElement> ElementsWithLocalName(this XContainer container,
    string localName)
{
    return container.Elements().Where(x => x.Name.LocalName == localName);
}

public IEnumerable<XElement> ElementsWithLocalName<T>(
    this IEnumerable<T> source,
    string localName) where T : XContainer
{
    return source.Elements().Where(x => x.Name.LocalName == localName);
} 
```

不过，这会使您的代码不那么可靠——您*真的*想将任何旧名称与正确的本地名称匹配吗？

# c++ - Mac 中的 GCC 与 Linux 中的 GCC

> ID：12754355
> 
> 赞同：1
> 
> 时间：2012-10-05T21:34:32.980
> 
> 标签：c++, c, linux, macos, gcc

我已经阅读了无数线程说 gcc 在 Xcode 目录中等等。我知道它在那里。我能看到它。但我不想在那里知道它，我不想 a) 运行 XCode 或 b) 从 /Developer/usr/bin 编辑我的 c 程序

我想从命令行和我选择的任何目录编译 ANSI C 中的 c 和 c++ 程序，类似于我在 linux 中的操作。

即：gcc -o foo foo.c

然后运行 ​​./foo

这在 OSX lion 或更高版本中是否可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:38:22.520

在 Xcode 的选项面板中，选择“下载”，然后单击“组件”选项卡。选择“命令行工具”旁边的“安装”。这会将它们安装在通常的 Unix 位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:39:05.313

在 Xcode 3.2.6 中，您需要`UNIX Development`使用`Xcode 3`安装程序包安装组件。`/usr`这将在和中安装必要的链接和头文件`/System/Library`。请参阅`About Xcode 3.2.6`安装程序 dmg 中包含的文档或可从 Apple 开发者网站下载的文档（[此处](http://groups.ascd.org/resource/documents/122959-AboutXcode.pdf)为网络上的非官方副本）。

在 Xcode 4 的最新版本中，`Command Line Tools`组件是使用`Xcode.app`自身安装的，正如其他人所描述的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:37:13.577

是的。取决于你的 shell，`export`或者`setenv`（无论你是在 bash 还是 tcsh）[PATH](http://en.wikipedia.org/wiki/PATH_%28variable%29)变量和你的 gcc 路径。

# magento - CMS WYSIWYG 编辑器 - 您使用什么技术来验证这些类型的页面？

> ID：12754356
> 
> 赞同：0
> 
> 时间：2012-10-05T21:34:38.413
> 
> 标签：magento, content-management-system, wysiwyg, expressionengine, prestashop

这是一个可能被认为不一定“与编程相关”的话题；但是，我觉得这是因为我要求特定的技术。

从本质上讲，作为一名 Web 开发人员，我使用各种平台，包括后端的 WYSIWYG 编辑器（TinyMCE、WYGWAM 等），此类系统的卖点之一是管理自己的内容变得更容易，因为这些工具。

从理论上讲，听起来不错，在实践中，没有那么多。

通过使用所见即所得编辑器的许多高级功能，客户很容易破坏布局。他们可以开始浮动，设置过多的边距/填充等。

通常，我尝试构建任何这些类型的页面，只将一些合理的默认样式应用于一些最常见的标签，例如设置字体大小、颜色、一些边距和一些文本装饰。

我想知道是否有人使用更先进的东西来本质上转换以下输出：

```
$cms->getContent(); 
```

...或等效于被有效沙盒化的东西，并且完全不依赖于正在使用的任何其他样式/布局元素。

我尽可能多地向客户表示，他们应该为 Dummies 购买一本 HTML/CSS 书籍并阅读它，这样当他们在 WYSIWYG 中单击“代码视图”时，他们就不会陷入困境。但我知道他们不会这样做，也不会雇佣任何有经验的人，这最终会让客户拥有比他们应该负责任的更多的控制权。

另外，当您将他们的网站用作工作样本以向其他人展示他们知道他们有能力采用您的精美设计和开发并使其看起来像垃圾时，这很糟糕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T23:07:40.043

一些东西：

*   我有一个标准的 WYGWAM 配置，我通过导入 exp_wygwam_configs 表在新站点上重用它。
*   我在编辑器中的选项非常有限
*   为图像划定的页面区域应使用文件字段，并使用像 CE Image 这样的图像调整器来确保适当的大小
*   客户培训。如果需要，可以使用 Camtasia 或类似工具制作视频。
*   为 WYGWAM 使用具有一小部分样式的自定义样式表，因此他们可以选择 h2...h4，例如，但不能选择 h1 或 h5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:13:00.453

在遇到很多所见即所得编辑器的问题后（​​顺便说一句，它永远不会准确地反映你最终“得到”的东西），我现在更愿意在编辑器的配置中只保留最基本的格式化功能。例如，看看 stackoverflow 的编辑器。它具有以下功能：粗体、斜体、链接、引用、图片、列表和对齐。这里唯一的特殊功能是代码示例和 html，它们是针对该站点的受众的。您的大多数客户都不需要它们。

我认为这是最好的方法，因为如果您让您的客户感觉他们可以在页面中为所欲为，但最终，当页面呈现时，这些内容会被过滤，他们会非常沮丧。更不用说网站会因过滤过程而变慢，并且需要将过滤后的内容放入缓存中。

有时客户确实希望在页面中有一个特殊的布局，但我认为最好通过自定义 CMS 来满足客户的需求。

# java - 如何在 Adob e AIR 原生扩展中获取上下文？

> ID：12754357
> 
> 赞同：1
> 
> 时间：2012-10-05T21:34:44.867
> 
> 标签：java, android, air-native-extension

在以下代码行中...

```
ProgressDialog progressDialog = ProgressDialog.show(getBaseContext(), "LOADING_TITLE", "LOADING_MESSAGE"); 
```

代替 getBaseContext() 我试过了......

```
getApplicationContext() // returns "java.lang.NullPointerException"
getBaseContext() // returns "java.lang.NullPointerException"
(NativeActivity)getApplicationContext()
this // returns "The method show(Context, CharSequence, CharSequence) in the Type ProgressDialog is not applicable for the arguments(new Runnable(){}, String, String)"
NativeActivity.this // returns "java.lang.NullPointerException"
NativeActivity.this.getApplicationContext() // returns "java.lang.NullPointerException"
NativeExtension.context.getActivity().getBaseContext() // returns “android.view.WindowManager$BadTokenException: Unable to add window — token null is not for an application”
myActivity.getApplicationContext() // returns “android.view.WindowManager$BadTokenException: Unable to add window — token null is not for an application”
myActivity.getBaseContext() // returns “android.view.WindowManager$BadTokenException: Unable to add window — token null is not for an application” 
```

其中。我不确定为什么它不起作用。在扩展 FREContext 的 NativeExtensionContext 中，我使用 getActivity() 将活动传递给 NativeActivity。一切正常，但是当我尝试获取对上下文的引用时，我得到一个“Nullpointerexception”或“android.view.WindowManager$BadTokenException: Unable to add window - token null is not for an application”。

任何有使用 Adob​​e AIR Native Extensions 和/或 Android Java 经验的人都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:50:46.533

```
NativeExtension.context.getActivity().getBaseContext() // this should work. 
```

我能想到的唯一一件事就是确保您在 Activity 内部工作。也就是说，您从 FREFunction 实例初始化的 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T21:53:22.987

将此添加到您的课程中：

```
public static FREContext myANEContext=null;

....
....

  ProgressDialog progressDialog = ProgressDialog.show(myANEContext.getActivity().getBaseContext(), "LOADING_TITLE", "LOADING_MESSAGE"); 
```

`FREFunction`不要忘记在使用你的类之前传递值：

```
 public class MyANEfunction implements FREFunction{

    @Override
      public FREObject call(final FREContext context, FREObject[] args) {
      try{
            myANEClass.myANEContext=context;

         .... 
```

# .net - 使用触发器更改 SolidcolorBrush 资源的颜色？

> ID：12754358
> 
> 赞同：5
> 
> 时间：2012-10-05T21:35:10.233
> 
> 标签：.net, wpf, silverlight, xaml

我有一个用户控件，它使用如下的画笔资源为控件中的几个元素提供颜色：

```
 <UserControl.Resources>
            <SolidColorBrush x:Key="BlackBrush" Color="Black"/>
        </UserControl.Resources> 
```

现在，我想使用触发器更改此资源的颜色，以便在发生特定条件时提供突出显示。

这可能吗？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:30:17.660

我认为您不能从 xaml 中的触发器更改资源颜色。

您可以在代码隐藏中更改颜色，或者将 SolidColorBrush 中的颜色设置为对象的数据绑定属性。

```
SolidColorBrush myBrush = (SolidColorBrush)this.TryFindResource("BlackBrush");

if (myBrush != null)
{
    myBrush.Color = Colors.Yellow;
} 
```

否则，您需要根据触发器交换画笔。下面是一个例子：

```
 <Grid Margin="50">
      <Grid.Resources>
         <SolidColorBrush x:Key="BlackBrush" Color="Black"/>
         <SolidColorBrush x:Key="WhiteBrush" Color="White"/>

         <Style x:Key="test" TargetType="TextBlock">

           <Setter Property="Background" Value="{StaticResource BlackBrush}"/>

            <Style.Triggers>
               <Trigger Property="Text" Value="white">
                  <Setter Property="Background" Value="{StaticResource WhiteBrush}"/>
               </Trigger>
               <Trigger Property="Text" Value="black">
                  <Setter Property="Background" Value="{StaticResource BlackBrush}"/>
               </Trigger>
            </Style.Triggers>
         </Style>

      </Grid.Resources>
      <TextBlock
         Height="20"
         Margin="50"
         Padding="50"
         Style="{StaticResource test}"
         Text="white">
      </TextBlock>
   </Grid> 
```

这将根据文本值更改背景颜色；如果文本为白色，则背景为白色，黑色，则背景为黑色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:44:03.460

不，您不能这样做 XAML，但问题是您想根据其他控件/控件的状态更改某些控件。

您至少有以下选择（[看看这个线程](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7d4bfb6c-b8b0-42aa-beb3-528e19ef0896/)）：

*   如果元素可以在一个内容模板中，您可以使用触发器并为 setter 提供 SourceName 和 TargetName 以指向目标元素
*   您也可以在元素上使用 EventTriggers，它看起来像这样：

    ```
    <StackPanel>
    <Label Margin="10" x:Name="lbl">My Label</Label>
    <Button Width="150" Height="100" Background="Yellow" x:Name="btn1">My Button
    </Button>
    <StackPanel.Triggers>
        <EventTrigger RoutedEvent="Button.MouseMove" SourceName="btn1">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="lbl" Storyboard.TargetProperty="(Label.Background)">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0">
                                <DiscreteObjectKeyFrame.Value>
                                    <SolidColorBrush Color="Yellow"/>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
        <EventTrigger RoutedEvent="Button.MouseLeave" SourceName="btn1">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="lbl" Storyboard.TargetProperty="(Label.Background)">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0">
                                <DiscreteObjectKeyFrame.Value>
                                    <SolidColorBrush Color="White"/>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </StackPanel.Triggers> 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-11T11:11:51.093

您可以创建画笔并将其“Color”属性绑定到隐藏控件的“Foreground.Color”属性。然后可以在任何地方使用此画笔，并在执行触发器时更改其颜色：

```
<Grid Background="Black">
    <Grid.Resources>
      <SolidColorBrush x:Key="BrushForeground" Color="{Binding ElementName=collapsedControl, Path=Foreground.Color}" />
      <SolidColorBrush x:Key="BrushGreen" Color="Lime" />
      <SolidColorBrush x:Key="BrushRed" Color="Red" />
    </Grid.Resources>
    <Control Name="collapsedControl" Visibility="Collapsed">
      <Control.Style>
        <Style TargetType="Control">
          <Setter Property="Foreground" Value="{StaticResource BrushGreen}" />
          <Style.Triggers>
            <DataTrigger Binding="{Binding IsIncorrect}" Value="True">
              <Setter Property="Foreground" Value="{StaticResource BrushRed}" />
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </Control.Style>
    </Control>
    <Label Content="Sample Text" Foreground="{StaticResource BrushForeground}" />
    <Button Width="150"
            Height="50"
            Click="Button_Click"
            Content="Set IsIncorrect to true" />
  </Grid> 
```

# performance - 如何分析这个算法的效率 Part 2

> ID：12754359
> 
> 赞同：0
> 
> 时间：2012-10-05T21:35:09.473
> 
> 标签：performance, big-theta

我在之前解释这个问题的方式中发现了一个错误，所以再次出现：

```
FUNCTION SEEK(A,X)
1\. FOUND = FALSE
2\. K = 1
3\. WHILE (NOT FOUND) AND (K < N)
   a.  IF (A[K] = X THEN
       1\.  FOUND = TRUE
   b.  ELSE
       1\.  K = K + 1
4\. RETURN 
```

分析这个算法（伪代码），我可以计算完成所需的步骤数，并用线性算法 Θ(n) 来分析它的效率。好的。

以下代码依赖于循环内部的内部公式才能完成，交易是代码中没有变量 N，因此该算法的效率将始终相同，因为我们将值 1 分配给A & B 变量：

```
1\.  A = 1
2\.  B = 1
3\.  UNTIL (B > 100)
    a.  B = 2A - 2
    b.  A = A + 3 
```

现在我相信这个算法总是在恒定时间内执行。但是我如何使用代数来找出完成需要多少步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:45:12.647

是的，第二部分在 O(1) 时间内运行。您需要证明的唯一论点是每次它都会迭代一定次数。

代数上，A 每次增长 3，所以 B 每次增长 6。它将执行大约 100/6 次。

# c# - c# 如果文本框为空或包含非整数，则发出警告

> ID：12754361
> 
> 赞同：1
> 
> 时间：2012-10-05T21:35:16.263
> 
> 标签：c#, textbox, string

在我的具体情况下，我需要 propertyPriceTextBox 中的值仅为数字和整数。还必须输入一个值，我可以只 Messagebox.Show() 一个警告，这就是我需要做的。

这就是我到目前为止所拥有的。

```
 private void computeButton_Click(object sender, EventArgs e)
    {
        decimal propertyPrice;

        if ((decimal.TryParse(propertyPriceTextBox.Text, out propertyPrice)))
            decimal.Parse(propertyPriceTextBox.Text);
        {

            if (residentialRadioButton.Checked == true)

                commisionLabel.Text = (residentialCom * propertyPrice).ToString("c");

            if (commercialRadioButton.Checked == true)

                commisionLabel.Text = (commercialCom * propertyPrice).ToString("c");

            if (hillsRadioButton.Checked == true)

                countySalesTaxTextBox.Text = ( hilssTax * propertyPrice).ToString("c");

            if (pascoRadioButton.Checked == true)

                countySalesTaxTextBox.Text = (pascoTax * propertyPrice).ToString("c");

            if (polkRadioButton.Checked == true)

                countySalesTaxTextBox.Text = (polkTax * propertyPrice).ToString("c");

            decimal result;

                result = (countySalesTaxTextBox.Text + stateSalesTaxTextBox.Text + propertyPriceTextBox.Text + comissionTextBox.Text).ToString("c");
        }

        else (.)

            MessageBox.Show("Property Price must be a whole number.");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:38:40.810

如果值是非整数，而不是使用`decimal.TryParse`use这将返回 false：`Int32.TryParse`

```
int propertyPrice;
if (Int32.TryParse(propertyPriceTextBox.Text, out propertyPrice)
{
    // use propertyPrice
}
else
{
    MessageBox.Show("Property Price must be a whole number.");
} 
```

不需要`Parse`像转换一样再次调用`TryParse`，如果成功则返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T11:50:11.260

你可以通过这种方式实现

```
 int outParse;

   // Check if the point entered is numeric or not
   if (Int32.TryParse(propertyPriceTextBox.Text, out outParse) && outParse)
    {
       // Do what you want to do if numeric
    }
   else
    {
       // Do what you want to do if not numeric
    } 
```

# html - 网站页脚下方的颜色

> ID：12754364
> 
> 赞同：0
> 
> 时间：2012-10-05T21:35:29.100
> 
> 标签：html, css, footer

> **可能重复：**
> [如何让页脚留在网页底部？](https://stackoverflow.com/questions/42294/how-do-you-get-the-footer-to-stay-at-the-bottom-of-a-web-page)

我一直在帮助一个人在[这里](http://saveamillioncampaign.com/)建立网站。如果您会注意到，在某些页面上（像[这样](http://saveamillioncampaign.com/leave-a-testimonial/)），页脚下方有一些大的空白，因为页面很短。

无论页面高度（和窗口/浏览器高度如何？），我们如何才能让页脚中的黑色一直向下延伸？

注意：我们不想要一个粘性页脚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:40:33.113

设置 HTML 元素的背景颜色：

```
html { background-color: #000 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:42:51.237

我不知道有任何可靠的方法可以将页脚扩展到页面底部。但是，要获得您想要的效果，您可以执行以下操作：

*   将黑色背景应用于正文
*   将白色背景应用于#primary
*   将页脚的上边距交换为 #primary 上的底部填充

# php - Doctrine 2.3 实体生成器：示例、文档？

> ID：12754365
> 
> 赞同：2
> 
> 时间：2012-10-05T21:35:29.850
> 
> 标签：php, doctrine, doctrine-orm

Doctrine 可以根据小数据输入生成实体，包括关系信息。但是，我没有找到有关该主题的任何示例或简明信息。官方文档只有一小段，有一个小的命令行示例，完全没有解释，

任何人都可以参考这本书、文章甚至代码示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:13:46.143

首先，您需要[引导`Doctrine`并获取 的实例`EntityManager`](https://stackoverflow.com/questions/5444459/doctrine-2-0-bootstrap#5446215)，然后一旦拥有它，您可以执行以下操作：

```
 $cmf = new Doctrine\ORM\Tools\DisconnectedClassMetadataFactory();
    $cmf->setEntityManager($em); // $em is EntityManager instance
    $metadata = $cmf->getAllMetadata();
    $generator = new \Doctrine\ORM\Tools\EntityGenerator();
    $generator->setGenerateAnnotations(true);
    $generator->setGenerateStubMethods(true);
    $generator->setRegenerateEntityIfExists(true);
    $generator->setUpdateEntityIfExists(false);
    $generator->generate($metadata, '/path/to/entities'); 
```

有关配置的更多信息，请阅读：
[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:16:11.773

我通常在 yml 中声明元数据，并最初从那里生成类和数据库。

这是一个完整的示例以及 yml 元数据文件：

```
//example.php

   function getDbConfig()
   {
      //An example configuration
      return array(
         'driver'   => 'pdo_mysql',
         'user'     => 'root',
         'password' => 'potatoes',
         'dbname'   => 'garden',
         'host'     => 'localhost',
         'charset' => 'utf8',
               'driverOptions' => array(
                  1002=>'SET NAMES utf8'
               )
      );
   }

   function bootstrapDoctrine()
   {
      require_once ($this->_libDir . DS . 'Doctrine/ORM/Tools/Setup.php');
      Doctrine\ORM\Tools\Setup::registerAutoloadDirectory('/full/path/to/lib');//So that Doctrine is in /full/path/to/lib/Doctrine   
   }

   function getEntityFolders()
   {
      //An example configuration of two entity folders
      return array(
         '/full/path/to/App/Module1/Entities/yml' => '\\App\\Module1\\Entities',
         '/full/path/to/App/Module2/Entities/yml' => '\\App\\Module2\\Entities'
      );
   }

   function setupDoctrine()
   {
      $config = Doctrine\ORM\Tools\Setup::createConfiguration();
      $driver = new \Doctrine\ORM\Mapping\Driver\SimplifiedYamlDriver(getEntityFolders());
      $driver->setGlobalBasename('schema');
      $config->setMetadataDriverImpl($driver);

      $entityManager = \Doctrine\ORM\EntityManager::create($dbConfig, $config);
      return $entityManager;
   }

   function getEntitiesMetaData($em)
   {
      $cmf = new Doctrine\ORM\Tools\DisconnectedClassMetadataFactory();
      $cmf->setEntityManager($em);  // we must set the EntityManager

      $driver = $em->getConfiguration()->getMetadataDriverImpl();

      $classes = $driver->getAllClassNames();
      $metadata = array();
      foreach ($classes as $class) {
        //any unsupported table/schema could be handled here to exclude some classes
        if (true) {
          $metadata[] = $cmf->getMetadataFor($class);
        }
      }
      return $metadata;
   }

   function generateEntities($rootDir, $metadata)
   {
      $generator = new Doctrine\ORM\Tools\EntityGenerator();
      $generator->setUpdateEntityIfExists(true);    // only update if class already exists
      //$generator->setRegenerateEntityIfExists(true);  // this will overwrite the existing classes
      $generator->setGenerateStubMethods(true);
      $generator->setGenerateAnnotations(true);
      $generator->generate($metadata, $rootDir);
   }

   function generateDatabase()
   {
      $schema = new Doctrine\ORM\Tools\SchemaTool($em);
      $schema->createSchema($metadata);
   }

   //Sets up the Doctrine classes autoloader
   bootstrapDoctrine();
   //Sets up database connection, schema files (yml) and returns the EntityManager
   $em = setupDoctrine();
   //Returns the metadata specified by the two schema.orm.yml files
   $metadata = getEntitiesMetaData($em);
   /* Generates the classes based on the yml schema. Using the yml files in the example
    * the result will be the following files:
    *    /full/path/to/App/Module1/Entities/User.php
    *    /full/path/to/App/Module2/Entities/Comment.php
    *    /full/path/to/App/Module2/Entities/Page.php
    */
   generateEntities('/full/path/to', $metadata);
   //Now generate database tables:
   generateDatabase($metadata); 
```

以及示例模式文件：模块 1 的 YAML 模式：

```
 # /full/path/to/App/Module1/Entities/yml/schema.orm.yml
  App\Module1\Entities\User:
    type: entity
    table: user
    id:
      id:
        type: integer
        generator:
          strategy: AUTO
    fields:
      name:
      email: 
```

模块 2 的 YAML 架构：

```
 # /full/path/to/App/Module2/Entities/yml/schema.orm.yml
  App\Module2\Entities\Page:
    type: entity
    table: page
    id:
      id:
        type: integer
        generator:
          strategy: AUTO
    fields:
      name:
      content:
        type: text

  App\Module2\Entities\Comment:
    type: entity
    table: comment
    id:
      id:
        type: integer
        generator:
          strategy: AUTO
    fields:
      comment_date:
        type: datetime
      content:
        type: text
    manyToOne:
      user:
        targetEntity: App\Module1\Entities\User 
```

请注意，我使用的是[SimplifiedYamlDriver](http://docs.doctrine-project.org/en/latest/reference/yaml-mapping.html)元数据驱动程序，它可以从单个 yml 文件加载多个实体。

这是一个工作示例，我使用这些确切的步骤从 yml 生成类文件和 db。此外，[入门教程](http://docs.doctrine-project.org/en/latest/tutorials/getting-started.html)包含相当多的 yml 示例。

# objective-c - 将核心数据存储从 iCloud 迁移到本地

> ID：12754366
> 
> 赞同：9
> 
> 时间：2012-10-05T21:35:34.387
> 
> 标签：objective-c, cocoa, core-data, migration, icloud

我目前正在为**Core Data iCloud 迁移而苦苦挣扎。**

我想将商店从 iCloud 通用容器 ( `.nosync`) 移动到本地 URL。问题是，每当我调用这样的东西时：

```
[self.persistentStoreCoordinator migratePersistentStore: currentiCloudStore 
                                                  toURL: localURL 
                                                options: nil 
                                               withType: NSSQLiteStoreType 
                                                  error: &error]; 
```

我收到此错误：

```
-[NSPersistentStoreCoordinator addPersistentStoreWithType:configuration:URL:options:error:](1055): CoreData: Ubiquity:  Error: A persistent store which has been previously added to a coordinator using the iCloud integration options must always be added to the coordinator with the options present in the options dictionary. If you wish to use the store without iCloud, migrate the data from the iCloud store file to a new store file in local storage. file://localhost/Users/sch/Library/Containers/bla/Data/Documents/tmp.sqlite. This will be a fatal error in a future release 
```

有人见过这个吗？也许我只是缺少正确的迁移选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:56:53.043

是的，我也有这个问题。

我想将 iCloud 商店变成本地商店。

* * *

## 解决方案 1：将 managedObjects 一个一个移动到 localStore。

但是如果你有一个大数据库，它会很慢。

所以我昨天找到了第二个解决方案。

* * *

## 解决方案 2：编辑 iCloud 商店的元数据，

## 并将其保存到新位置。

删除元数据中的“com.apple.coredata.ubiquity.*”键后，您将获得一个完全本地的存储。

* * *

这是我的解决方案 2 的代码：

已经设置了一些属性：

```
@property (nonatomic, strong) NSPersistentStoreCoordinator *coordinator;
@property (nonatomic, strong) NSManagedObjectContext *context;

@property (nonatomic, strong) NSPersistentStore *iCloudStore;
//represent the iCloud store already using 
//(after [coordinator addPersistentStore] you get this NSPersistentStore)

@property (nonatomic, strong) NSURL *iCloudStoreURL;
//represent the iCloud store real location
//(it is the URL you send to the [coordinator addPersistentStore])

@property (nonatomic, strong) NSURL *iCloudStoreLocalVersionURL;
//represent the location of local version store you want to save 
```

以及迁移方法：

```
-(void)migrateCloudStoreToLocalVersion
{
    if(!self.iCloudStore)
        return;

    // remove previous local version
    [FILE_MANAGER removeItemAtURL:self.iCloudStoreLocalVersionURL
                            error:nil];

    // made a copy from original location to the new location
    [FILE_MANAGER copyItemAtURL:self.iCloudStoreURL
                          toURL:self.iCloudStoreLocalVersionURL
                          error:nil];

    //prepare meta data
    NSDictionary *iCloudMetadata = [self.coordinator metadataForPersistentStore:self.iCloudStore].copy;

    NSMutableDictionary *localVersionMetadata = iCloudMetadata.mutableCopy;
    for(NSString * key in iCloudMetadata){
        if([key hasPrefix:@"com.apple.coredata.ubiquity"]){
            [localVersionMetadata removeObjectForKey:key];
        }
    }

    //modify iCloud store
    [self.coordinator setMetadata:localVersionMetadata forPersistentStore:self.iCloudStore];
    [self.coordinator setURL:self.iCloudStoreLocalVersionURL forPersistentStore:self.iCloudStore];

    //save to the localVersion location
    [self.context save:nil];

    //restore iCloud store
    [self.coordinator setMetadata:iCloudMetadata forPersistentStore:self.iCloudStore];
    [self.coordinator setURL:self.iCloudStoreURL forPersistentStore:self.iCloudStore];
} 
```

然后您可以使用`iCloudStoreLocalVersionURL`本地版本存储。

您可以将此本地版本存储用作本地存储，而不会出现任何错误。

**笔记：**

注意`NSStoreUUIDKey`元数据中的

您可以选择将其替换为新商店。

**麦克风：**

问题是：

如果我们在添加 iCloud 商店时使用完整的 iCloud 选项，我们将一切顺利，但它仍然是 iCloud 商店。**我们在这里想把一个 iCloud 商店变成本地商店。**

如果我们添加除 iCloud 选项之外的一些选项，我们将收到错误消息并且无法将任何更改保存到此商店。

所以你的答案不适用于这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T21:00:44.360

我的猜测是，根据错误消息，通过将您的选项设置为零，PSC 无法移动商店。您可能需要获取原始商店的选项字典并将其传递，而不是将它们设置为 nil。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-06T00:07:13.013

这对我来说很好。如果用户选择另存为菜单选项，我正在使用 NSPersistentDocument 并调用此方法。还值得注意的是，我在文件上设置了自己的元数据，以便知道它是否通过 iCloud 同步。您必须知道，以便在实际打开商店之前设置 pac 时传递正确的选项。我不相信有任何 API 可以以任何其他方式执行此操作。

```
// File is NEVER iCloud enabled when we do this.
- (bool)buildNewStoreAtURL:(NSURL*)newURL type:(NSString *)typeName error:(NSError **)error {

    //FLOG(@"buildNewStoreAtURL:type: called");

    NSError *myError;

    // We only have one store
    NSPersistentStore *currentStore = [self.managedObjectContext.persistentStoreCoordinator.persistentStores objectAtIndex:0];
    NSDictionary *currentOptions = currentStore.options;

    // We need to create new options for the new document if it is currently synced via iCloud.
    NSMutableDictionary *newOptions = [[NSMutableDictionary alloc] initWithDictionary:currentOptions];
    [newOptions setObject:@"DELETE" forKey:@"JOURNAL"];

    // Remove any iCloud options
    [newOptions removeObjectForKey:NSPersistentStoreUbiquitousContentNameKey];

    // Instruct to remove any Core Data iCloud metadata
    [newOptions setObject:[NSNumber numberWithBool:YES] forKey:NSPersistentStoreRemoveUbiquitousMetadataOption];

    NSPersistentStoreCoordinator *psc = self.managedObjectContext.persistentStoreCoordinator;

    //FLOG(@"   create a new store at the required URL");
    NSPersistentStore *newStore = [psc migratePersistentStore:currentStore toURL:newURL options:newOptions withType:typeName error:&myError];

    if (newStore) {
        //FLOG(@"   store seems OK");
        // Set our own metadata flags so we can tell of the file is synced via iCloud
        // before we open the store (we have to pass in the right ubiquity name if it is)
        NSDictionary *dict = [self getiCloudMetaDataForStore:[psc metadataForPersistentStore:newStore] iCloud:NO ubiquityName:nil];
        [psc setMetadata:dict forPersistentStore:newStore];
        return YES;
    }
    else {

        FLOG(@" problem creating new document");
        FLOG(@"  - error is %@, %@", myError, myError.userInfo);
        *error = myError;
        return NO;
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-05T20:40:15.057

从 iOS 7 开始，有一种更简单、更合乎逻辑的方式来迁移商店，同时放弃 iCloud 无处不在，只需传递以下`NSPersistentStoreRemoveUbiquitousMetadataOption`选项：

```
NSDictionary *options = [NSDictionary dictionaryWithObject:@YES
                                                    forKey:NSPersistentStoreRemoveUbiquitousMetadataOption];
[self.persistentStoreCoordinator migratePersistentStore: currentiCloudStore 
                                              toURL: localURL 
                                            options: nil 
                                           withType: NSSQLiteStoreType 
                                              error: &error]; 
```

这会将商店迁移到本地 URL，并删除所有 iCloud 元数据，基本上是 @frogcjn 手动执行的操作。

# c# - 将网页内容渲染为图像

> ID：12754367
> 
> 赞同：0
> 
> 时间：2012-10-05T21:35:36.030
> 
> 标签：c#, .net, wpf

我有一个 WPF 应用程序。我想将网页的内容呈现为图像。我怎样才能做到这一点？该功能还应支持具有滚动条的页面（内容大于容器）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:45:01.727

这可以通过[awesomium 轻松完成，](http://labs.awesomium.com/capturing-web-pages-with-c-net/) [包括整个页面大小](http://labs.awesomium.com/capturing-web-pages-with-c/)。但它不是免费的。CEF（铬嵌入式框架）应该提供相同的功能，只要它基于相同的 WebKit。

# ubuntu - 如何从 Ubuntu 终端通过 MS Shell 创建、编辑和保存文件？

> ID：12754369
> 
> 赞同：2
> 
> 时间：2012-10-05T21:35:49.540
> 
> 标签：ubuntu, save, dos, metasploit, windows-xp-sp2

我正在通过使用 Metasploit 来利用 Windows XP SP2 上的一个错误，我从 Ubuntu 终端执行此操作。

现在，我已连接到 Windows Shell，但现在保存文本文件时遇到了小问题。我正在使用`edit file.txt`命令，然后键入文件的内容。问题是当我按下`CTRL+Z`它时关闭我`msfconsole`而不保存文件。

在没有 GUI 的情况下保存该文件的其他方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:12:27.740

就像@dbenham 建议的那样，您可以执行以下操作：

```
> echo First line of file > file.txt
> echo Second line of file >> file.txt
...
> echo Last line of file >> file.txt 
```

***注意**：* `...` *不是命令，它只是表示中间的行。*

# lisp - 在 lisp 中将字符串/字符转换为字节时遇到问题

> ID：12754370
> 
> 赞同：0
> 
> 时间：2012-10-05T21:35:54.950
> 
> 标签：lisp, babeljs

我有一些正在读取的数据，`read-line`我想将其转换为字节数组。`babel:string-to-octet`大部分情况下都有效，除非字符\字节较大（大于 200），在这种情况下它返回两个数字。例如，如果角色`ú`使用`babel:string-to-octet`返回`(195 185)`而不是`250`我正在寻找的。我在 babel 中尝试了许多编码，但它们似乎都不起作用。

如果我使用`read-byte`或`read-sequence`它确实读入`250`. 但是出于向后兼容性的原因，我只剩下 using 了`read-line`，我想知道在使用`babel:string-to-octet`to 转换`ú`为`250`.

我正在使用 ccl 1.8 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:47:56.940

大多数 common-lisp 实现支持超过 256 个字符。根据鸽巢原理，这意味着您不能将所有字符都转换为单个字节。

如果您只想将 lisp 内部字符代码 0-255 转换为字节，那么 char-code 将满足您的需求。但是，结果将由实现定义，因为实现不需要在内部使用任何特定的编码。

# facebook-graph-api - FQL 是否有“NOT NULL”类型的运算符？

> ID：12754372
> 
> 赞同：6
> 
> 时间：2012-10-05T21:36:09.257
> 
> 标签：facebook-graph-api, facebook-fql

我在搞乱 FQL，我有这个查询：

```
SELECT created_time, attachment, message FROM stream  WHERE source_id = me() LIMIT 1000 
```

它返回 1000 个结果，与我最不相关。例如，我想过滤 MESSAGE IS NOT NULL。FQL 可以做到这一点（或类似的东西）吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T20:56:49.070

只需添加`AND message`到 WHERE 子句也可以 - FQL 将空值视为“假”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:06:00.577

添加`type`到`SELECT`子句并在`WHERE`子句中添加`AND type > 0`.

# javascript - jquery 插件方法 - 访问缩进方法

> ID：12754376
> 
> 赞同：2
> 
> 时间：2012-10-05T21:36:27.957
> 
> 标签：javascript, jquery, jquery-plugins

我写了一个 jquery 插件。我已经定义了这样的方法：

```
(function($) {

    var methods = {
        init: function() {
            var initfunctions= {
                initbuttons: function() {
                    alert("bbb");
                }
                initnavbar: function() {
                    alert("ccc");
                }
            }
            subobject.initbuttons();
            subobject.initnavbar();
        },
        afterload: function() {
            ///some code 
            this.a.initfunctions.initbuttons(); //can't access b() from c function
        }
    };

    $.fn.dudaGallery = function() {

        return this.each(function() {
            methods.init();
            //methods.afterload();
        });

    };
})(jQuery);

$('#element').dudaGallery();   
​ 
```

我需要从 c() 访问 b() 函数，但我无法做到。 [这](http://jsfiddle.net/ohadpartuck/uAzMJ/12/)是一个jsfidde。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:52:28.163

看起来你在这里没有正确访问它..

`subobject`**在c**中没有范围，它仅限于**a**

`this.a.subobject.b();` // 这里**a**是一个函数

试试这个

```
 c: function() {
            ///some code 
            this.a();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:43:37.650

不太确定您要在那里实现什么，但您的问题是范围`subobject`仅限于`a()`功能。在此处阅读有关私人成员范围的更多信息[http://www.crockford.com/javascript/private.html](http://www.crockford.com/javascript/private.html)

# iphone - UITableView CoreData 断言失败

> ID：12754379
> 
> 赞同：2
> 
> 时间：2012-10-05T21:36:44.427
> 
> 标签：iphone, objective-c, ipad, core-data, tableview

当我的 iPhone 应用程序崩溃时，我在控制台中收到此错误：

`*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit/UIKit-2372/UITableView.m:1070`

当到达这行代码时它崩溃并给我这个：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [tableView endUpdates];
} 
```

关于我的应用程序的一些细节以及我是如何做到这一点的。我有一个带有表格视图的视图控制器，它显示我的核心数据对象。我有这个视图设置来显示来自两个实体的数据，所以表部分 1 显示来自实体的对象，然后部分 2 显示来自我的第二个实体的对象。

这就是我的问题开始的地方。虽然这已经很好地解决了，但我可以推送我的下一个视图控制器，并将对象添加到我的第一个实体并立即弹出回我的 tableviewcontroller 没有问题。但是，如果我尝试将对象添加到第二个实体，则在返回到我的 tableviewcontroller 时，它会崩溃，如上所述。

我无法弄清楚是什么原因造成的，所以我不确定从哪里开始寻找。

来自控制台的一些额外错误信息：

> CoreData：错误：严重的应用程序错误。在调用 -controllerDidChangeContent: 期间，从 NSFetchedResultsController 的委托中捕获了一个异常。无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (2) 必须等于更新前该节中包含的行数 (2)，加上或减去数字从该部分插入或删除的行数（1 插入，0 删除）加上或减去移入或移出该部分的行数（0 移入，0 移出）。与用户信息（空）

代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSInteger rows;

    id <NSFetchedResultsSectionInfo> sectionInfoAccounts = [[fetchedResultsControllerAccounts sections] objectAtIndex:0];
    id <NSFetchedResultsSectionInfo> sectionInfoCosts = [[fetchedResultsControllerCosts sections] objectAtIndex:0];

    if (section == 0) rows = [sectionInfoAccounts numberOfObjects];
    else if (section == 1) rows = [sectionInfoCosts numberOfObjects];

    return rows;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:50:37.200

您正在为表视图使用 2 个获取的结果控制器：一个 FRC 用于表部分 0，一个 FRC 用于表部分 1。我在这里有点猜测，但可能是错误在

```
- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath 
```

`indexPath`如果为第二个 FRC 调用该函数，则/的节部分`newIndexPath`为 0（因为 FRC 只有一个节）。但是对应的表部分是1。

`insertRowsAtIndexPaths:...`因此，您必须在调用之前将 FRC 索引路径映射到表视图的索引路径`insertRowsAtIndexPaths:...`等。

例如在插入事件的情况下：

```
NSIndexPath *newIndexPath1 = [NSIndexPath indexPathForRow:newIndexPath.row inSection:1];
[self.tableView insertItemsAtIndexPaths:@[newIndexPath1]]; 
```

否则，第二个实体的新对象将作为第一个表视图部分的行插入，这会导致不一致异常。

# php - 来自数据库提交的php表单邮件

> ID：12754381
> 
> 赞同：0
> 
> 时间：2012-10-05T21:36:59.890
> 
> 标签：php, forms, email, while-loop

是时候进行一个新项目了...我有一个服务器，它对一天内可以发送的电子邮件数量有限制，所以我想也许我应该让表单将它们放入数据库中，然后将它们作为一条消息通过电子邮件发送一次一天作为单个消息被换行符打破，因为每次提交表单时都会出现新消息。我的提交表格有效，以及我的查找。我的 while 语句将数据拉出，如果我回显它，它会完美显示。我唯一遇到的问题是当我尝试将数组放入 mail() 函数时。它也每次都给我发电子邮件，只是每次都没有内容。

我的while语句如下（回声留在里面）：

```
while ($ctform_row = mysql_fetch_array($ctform_query, MYSQL_ASSOC)) {
echo $ctform_row['name']." - ".$ctform_row['email']." - ".$ctform_row['Phone']." - ".$ctform_row['message']." - ".$ctform_row['date']."<br />";
} 
```

我试图用 $message 替换 echo，它在电子邮件中随机显示一行。我究竟做错了什么？我的表单邮件功能如下：

```
mail($destination, $subject, $message); 
```

我的主题和目的地已经设置好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:41:14.397

在没有看到您的代码的情况下，您的描述使我相信您使用的是赋值运算符而不是串联运算符。

即你这样做：

```
$message = $ctform_row['name']." - ".$ctform_row['email']." - ".$ctform_row['Phone']." - ".$ctform_row['message']." - ".$ctform_row['date']."<br />"; 
```

你应该这样做：

```
$message .= $ctform_row['name']." - ".$ctform_row['email']." - ".$ctform_row['Phone']." - ".$ctform_row['message']." - ".$ctform_row['date']."<br />"; 
```

注意`.=`

只需确保`$message`在进入 while 循环之前定义（`$message = "";`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:44:31.660

你说它每次都给你发电子邮件，我想这对你来说是个问题。您应该将所有用于收集、发送和清除（？！）数据的代码放在一个单独的 PHP 文件中，然后在您的服务器上创建一个 cronjob 以每天向您发送电子邮件。

# c++ - Emacs C/C++ 注释填充：希望注释中的段落不被合并

> ID：12754384
> 
> 赞同：4
> 
> 时间：2012-10-05T21:37:03.893
> 
> 标签：c++, c, emacs

输入

```
// This is an example, a test, of what I want emacs filling, in this case of C++ comments, to do.
// This is a paragraph that needs to get filled.
//     But I want to start a new paragraph, within the same comment, that is indented,
// but not joined to the previous by filling.
//     And another. 
```

这是我当前设置的结果。我不想要这个。它连接段落。

```
// This is an example, a test, of what I want emacs filling,
// in this case of C++ commentrs to do.  This is a paragraph
// that needs to get filled.  But I want to start a new
// paagraph, within the same comment, that is indented, but
// not joined the the previous by filling.  And another. 
```

这就是我想要的

```
// This is an example, a test, of what I want emacs filling,
// in this case of C++ comments to do.  This is a paragraph
// that needs to get filled.
//     But I want to start a new paragraph, within the same
// comment, that is indented, but not joined to the previous
// by filling.
//     And another. 
```

使用自适应填充。

GNU Emacs 24.1.1

* * *

有人问“emacs 如何将您的非标准段落标记与对空格有点草率的用户区分开来？新段落的标准标记是空行。”

有一些 emacs 模式可以用标准的英文缩进正确填充段落，其中新段落的第一行比附近的段落正文行有更多的缩进。

```
This is an example, a test, of what I want emacs filling,
in this case of non-comments to do.  This is a paragraph
that needs to get filled.
    But I want to start a new paragraph, within the same
comment, that is indented, but not joined to the previous
by filling.
    And another. 
```

我想要的只是将其扩展到额外的缩进，超过填充前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:13:33.903

您可以通过各种[正则表达式变量](http://www.gnu.org/software/emacs/manual/html_node/emacs/Paragraphs.html)来控制它。你可能可以让它做你想做的事，但它有点“艺术”。

# php - $_SERVER['REQUEST_METHOD'] 不存在

> ID：12754388
> 
> 赞同：2
> 
> 时间：2012-10-05T21:37:26.610
> 
> 标签：php, phpinfo

我刚刚安装了 WAMP，我可以访问 localhost 并获取 phpinfo() 输出。

但是，虽然我可以看到 _SERVER['REQUEST_METHOD'] 设置为 GET，但我正在尝试使用以下 PHP：

```
if ($_SERVER["REQUEST_METHOD"]=="POST") {
  ... 
```

但它会产生这个错误：

> PHP 通知：未定义索引：C:\ ... \test.php 中的 REQUEST_METHOD 第 40 行

使用 Komodo 在第 40 行停止并检查 $_SERVER——它在数组中根本没有“REQUEST_METHOD”——甚至没有 GET。

有人有想法么？我必须启用 POST、REQUEST_METHOD 吗？

为什么我可以在 phpinfo 中看到 REQUEST_METHOD=GET 而在 PHP 脚本中却看不到。

我也试过这个：

```
<?php
ob_start();
phpinfo();
$info = ob_get_contents();
ob_end_clean();
?> 
```

我生成了一些 phpinfo（在浏览器中使用 localhost/?phpinfo=1 查看），但不是全部。为什么不？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:43:58.540

大多数 $_SERVER 指令由 Web 服务器设置。如果您使用的是 WAMP，那将是 Apache。您可以检查您的 apache 配置以找出未设置此值的原因。

最好在尝试使用值之前测试它们是否存在。

```
$value = isset($_SERVER['REQUEST_METHOD']) ? $_SERVER['REQUEST_METHOD'] : null; 
```

您甚至可以使用[getenv()](http://us3.php.net/getenv)方法来缩短它。

```
$value = getenv('REQUEST_METHOD'); 
```

也没有必要做

```
<?php
ob_start();
phpinfo();
$info = ob_get_contents();
ob_end_clean();
?> 
```

这就是您在空白 PHP 文件中所需要的全部内容。

```
<?php phpinfo(); 
```

我会这样写你的例子：

```
$request_method = strtoupper(getenv('REQUEST_METHOD'));
$http_methods = array('GET', 'POST', 'PUT', 'DELETE', 'HEAD', 'OPTIONS');

if( ! in_array($request_method, $http_methods)
{
    die('invalid request');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-28T11:19:06.330

就我而言，我在 php.ini 文件中`variables_order`从更改`E`为`GPCS`

# cocos2d-iphone - Cocos2D：从另一个类获取图层在场景中的位置

> ID：12754390
> 
> 赞同：0
> 
> 时间：2012-10-05T21:37:38.310
> 
> 标签：cocos2d-iphone, position, layer, scene

我正在尝试在发生场景转换时检索在场景中作为子级添加的图层的当前位置。过渡是经过编辑的 Cocos2D 过渡，它会在出现新图层时将图层滑出屏幕。我使用更新方法在 CCActionEase 中创建了自己的实现：

```
#import "JoinedMapsScene.h"
#import "JoinedMapsLayer.h"

    @implementation CCEaseInWithPercentMult
    -(void) update: (ccTime) t
    {

        [other update: powf(t,rate)];

        CCScene * scene = [[CCDirector sharedDirector] runningScene];

        CCNode* layer = [scene getChildByTag:0];

        NSLog(@"% .2f",layer.position.x); //returns 0 
        NSLog(@"% .2f",layer.position.y); //returns 0 
    } 
```

但是，当转换发生时，这些返回 0。大概是因为我得到了相对于自身的位置？

**编辑：**

我发现这行不通。通过这样做，我已经通过指向正确的类正确地访问了我当前的场景：

JoinedMapsScene * 场景 = (JoinedMapsScene *)[[CCDirector sharedDirector] runningScene];

并通过这样做来调用我假设的方法：

[场景获取JoinedMapsLayerPosition];

令我惊讶的是，当转换发生时，当前的 runningScene 是我的转换类！

它给了我这个例外：-[ExitLTransition getJoinedMapsLayerPosition]: unrecognized selector sent to instance 0x5e4e20

我需要找出另一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:47:28.320

Add this in AppDelegate.h :

```
@class CCLayer;

@interface AppController : NSObject <UIApplicationDelegate, CCDirectorDelegate,UIGestureRecognizerDelegate>
{
    CCLayer             *mCurrentLayer;

}

@property (nonatomic, retain) CCLayer *currentLayer; 
```

Add this in AppDelegate.mm :

```
@implementation AppController
@synthesize currentLayer = mCurrentLayer; 
```

In your Layer init class use this. In all scene method.

```
@implementation MyMainMenu

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    MyMainMenu *layer = [MyMainMenu node];

    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    app.currentLayer = layer;

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
} 
```

You can check anywhere in project..

```
 AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

 if([app.currentLayer  isKindOfClass:[MyMainMenu class]])
 {
     MyMainMenu *mm = (MyMainMenu*) app.currentLayer;
     [mm calFunction]; 
 } 
```

# asp.net-mvc - MVC ViewModel [必需] DropDownListFor

> ID：12754392
> 
> 赞同：0
> 
> 时间：2012-10-05T21:37:54.250
> 
> 标签：asp.net-mvc

我有一个视图模型，其中需要一个名为 Type 的字段：

```
 [Required]  
   public string Type{ get; set; } 
```

我在不同的页面上使用这个视图模型，但在某些情况下，类型不是必需的。我想知道如何告诉页面不需要类型。

我尝试的是放一个

```
 @Html.HiddenFor(model => model.Type) 
```

但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:43:20.340

你不能这样做`RequiredAttribute`

编写/获取自定义条件属性，例如（[此处](https://gist.github.com/1547191)`RequiredIfAttribute`的示例 ）

或者使用[FluentValidation](http://fluentvalidation.codeplex.com/)代替 DataAnnotations。

或者使用不同的 ViewModel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:49:48.097

如果您出于某种原因想使用相同的视图模型，请查看使用[万无一失](http://foolproof.codeplex.com/)的库，万无一失旨在扩展 ASP.NET MVC 中提供的数据注释验证。最初的努力集中在添加条件验证上。

开箱即用的必需属性是：

```
[RequiredIf]
[RequiredIfNot]
[RequiredIfTrue]
[RequiredIfFalse]
[RequiredIfEmpty]
[RequiredIfNotEmpty]
[RequiredIfRegExMatch]
[RequiredIfNotRegExMatch] 
```

Foolproof 的美妙之处在于它支持使用开箱即用的非干扰技术进行客户端验证。

所以在你的情况下

```
[RequiredIfTrue("ShouldValidateType"]  
public string Type{ get; set; } 

public bool ShouldValidateType {get; set;} 
```

只有当 ShouldValidateType 为 true 时，属性类型才会验证。

# iphone - 如何在应用程序可见之前强制 OpenGL 进行绘制？

> ID：12754394
> 
> 赞同：0
> 
> 时间：2012-10-05T21:38:18.517
> 
> 标签：iphone, ios, ipad, opengl-es

我的 OpenGL 应用程序启动黑暗，然后一段时间后 OpenGL 开始绘图。我在启动时立即调用绘图方法。

有没有办法强制它在应用程序变得可见之前至少绘制一帧？或者我必须在 OpenGL 有机会绘制之前使用闪屏吗？是否有一个回调可以用来确定它是否已绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:35:00.957

您必须使用默认图像（启动画面），否则 iOS 将在您的应用程序完成初始化之前显示一个黑色窗口。

# java - 如何动态设置列表项的边框颜色？

> ID：12754403
> 
> 赞同：0
> 
> 时间：2012-10-05T21:39:35.027
> 
> 标签：java, android, border

我有一个 ListView，其中包含 RelativeLayout 作为其中的元素。我想根据项目的数据为每个项目的右边框设置不同的颜色。我知道我可能需要这样的东西来创建边界：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <stroke android:width="2dp" android:height="2dp"
                android:color="#FF0000" />
            <solid android:color="#000000" />
            <padding android:left="1dp" android:top="1dp" android:right="1dp"
                android:bottom="1dp" />

            <corners android:radius="1dp" android:bottomRightRadius="5dp"
                android:bottomLeftRadius="0dp" android:topLeftRadius="5dp"
                android:topRightRadius="0dp" />
        </shape>
    </item>

</layer-list> 
```

但我不知道如何为每个单独的元素设置颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:02:28.860

您需要您[自己的自定义适配器](http://www.vogella.com/articles/AndroidListView/article.html#listview_adapterown)和[XML-Drawables](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)来显示您需要的形状。在适配器的[getView-Method](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)中，您可以将可绘制对象动态添加到返回的视图中。希望有帮助！

# sql-server - EF 到 POCO - Oracle 或 SQL Server - 数值映射/转换

> ID：12754406
> 
> 赞同：1
> 
> 时间：2012-10-05T21:39:45.787
> 
> 标签：sql-server, oracle, entity-framework, poco

我有一个在 SQL Server 或 Oracle 上运行的旧数据库架构。我想为这两个数据库使用实体框架和一组 POCO，因此我一直在努力分解 edmx 文件并为数据使用不同的概念和物理定义。

我遇到问题的地方是现有的数字数据，因为我无法更改数据库中的类型。SQL Server 定义是一个浮点数，Oracle 是一个数字 (19,4)，它们分别被反向工程为双精度和小数。

如果我将概念模型更改为十进制（应该适应任何一种类型），我会收到一个错误，表明 Edm.decimal 与 SqlServer.float 不兼容。如果我将概念模型保留为反向工程值，那么它会给出一个错误，指出概念类型与 POCO 类型不匹配（这是十进制，因为它似乎与两个数据库都兼容）。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T14:08:32.800

我对此的最终解决方案是在 POCO 中有两个字段，一个用于处理 Oracle，一个用于处理 SQL Server。由于应用程序的余额（主要是 C++）使用浮点数，因此代码使用 SQL Server 字段，而 Oracle 字段仅转换为 SQL 字段以检索并保存到数据库。在 Oracle 数据模型中，该字段在逻辑模型中被重命名，以便它使用翻译。

```
public double Value { get; set; }
private decimal ValueDecimal
{
    get{ return (decimal) Value;}
    set{ Value = (double) value;}
} 
```

不一定很优雅，但我可以使用模型中的模板生成它并且它可以工作......

# javascript - JQuery .on() 和 .off() 不像我使用它们的方式工作

> ID：12754407
> 
> 赞同：2
> 
> 时间：2012-10-05T21:39:48.860
> 
> 标签：javascript, jquery, ajax, events, event-handling

我有一个页面，当用户向下滚动到页面的某个部分时，我会触发一个 ajax 加载事件。我在这里有以下 ajax 事件处理程序：

```
$(document).ajaxStart(function() {
$('#loader').show();
$(window).off('scroll');
    }); 

$(document).ajaxComplete(function() {
    $('#loader').hide();
  $(window).on('scroll');
    }); 
```

为了防止 ajax 事件多次触发，我在 ajax 调用开始时关闭了滚动事件处理程序（我还编写了一个延迟函数，它也会在触发前等待几毫秒）。我的意图是在 ajax 完成后重新绑定滚动。我知道这些事件正在发生，因为我的#loader div 正在按设计加载和卸载。不幸的是，卷轴永远不会重新绑定，它仍然关闭，我不明白为什么。因此，我加载了一个新内容的 ajax 页面，然后它停止工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:47:25.017

“开”和“关”的名称可能会令人困惑；您不能使用它们来打开和关闭事件。

该`off`方法从元素中完全删除事件处理程序。再次绑定事件时，必须指定事件处理程序：

```
$(window).on('scroll', handlerFunction); 
```

# java - 尝试使用 Java 从文本中删除 html

> ID：12754408
> 
> 赞同：3
> 
> 时间：2012-10-05T21:39:53.567
> 
> 标签：java, html, regex

我有一个`ArrayList<String>`名为`fields`. 我正在尝试`String`使用该`replaceAll`函数解析每个 HTML，但我觉得我搞砸了正则表达式字符串（我在这里得到了第二个正则表达式[来](http://www.mkyong.com/regular-expressions/how-to-validate-html-tag-with-regular-expression/)表示一个通用的 html 表达式）。谁能给我一些关于如何在这里纠正自己的提示？

```
for(int j = 0; j<fields.size(); j++)    
{
    String k = fields.get(j);
    k.replaceAll("<br>", "\n");
    k.replaceAll("<(\"[^\"]*\"|'[^']*'|[^'\">])*>", "");
    k.replaceAll("&lt;", "<");
    k.replaceAll("&gt;", ">");
    fields.set(j, k);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:42:52.617

`k`请记住，字符串是不可变的，因此您希望每次调用时都重新分配`replaceAll`：

```
String k = fields.get(j);
k = k.replaceAll("<br>", "\n");
... 
```

# shopify - x.myshopify.com 中购物车上的 SSL

> ID：12754411
> 
> 赞同：0
> 
> 时间：2012-10-05T21:40:06.963
> 
> 标签：shopify

我们有一个前端网站，可将用户转发到我们的 shopify 购物车以购买我们的产品。由于各种原因，我们的前端网站需要是 ssl。但是，x.myshopify.com/cart 页面不是 ssl。出现一个非常大的弹出窗口，警告用户他们正在从安全站点转到不安全站点。

我们需要能够在 myshopify.com 的购物车上添加 https。我们如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:04:48.427

如果你直接去结帐.. 你会得到无缝的 HTTPS 转换。您真的需要弄乱购物车还是可以直接从您的网站进行结帐？

# perl - Perl 在子例程中修改哈希 - 全局符号需要明确的包名称

> ID：12754414
> 
> 赞同：1
> 
> 时间：2012-10-05T21:40:21.093
> 
> 标签：perl, hash, reference

在向哈希添加一些键时遇到一些麻烦，即在子例程中修改。这是我的子程序调用：

```
getMissingItems($filename, \%myItems); #myItems is already defined above this 
```

和子程序本身：

```
sub getMissingItems {
    my $filename = shift;
    my $itemHash = shift;

    #... some stuff

    foreach $item (@someItems) {

        if (not exists $itemHash{$item}) {
            %$itemHash{$item} = 0; 
        }

    }

} 
```

我收到错误“全局符号 %itemHash 需要显式包名称”

我应该如何正确地做到这一点？谢谢。

编辑 - 谢谢大家，在这第一个障碍。我现在得到“在使用“严格引用”时不能使用字符串（“0”）作为 HASH 引用。” 我只想将缺少的密钥条目设置为零

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:42:54.403

您没有使用正确的语法来访问 hashref 的元素。

尝试`$itemhash->{$item}`或`$$itemhash{$item}`在最里面的循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:43:09.700

您的 sub 范围内没有`%itemHash`，但您尝试使用名为 that 的变量。

你的意思是访问引用的哈希`$itemHash`，所以

```
if (not exists $itemHash{$item}) {
    %$itemHash{$item} = 0; 
} 
```

应该

```
if (not exists $itemHash->{$item}) {
    $itemHash->{$item} = 0; 
} 
```

* * *

顺便说一句，您可以将其简化为

```
$itemHash->{$item} //= 0; 
```

（这会检查元素是否为`defined`，而不是如果它`exists`，但在这种情况下可能是同一件事。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T21:43:41.443

要访问哈希引用中的值，请使用箭头取消引用运算符：

```
if (not exists $itemHash->{$item}) {
    $itemHash->{$item} = 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T21:43:53.453

该行`%$itemHash{$item} = 0;`应为`$itemHash->{$item} = 0;`. 您拥有的版本尝试做一些不同的事情（和错误的）。为了帮助解开参考，我建议阅读[Perl 参考教程](http://p3rl.org/perlreftut)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T21:45:27.700

你的代码有$itemHash{$item}，它应该是$itemHash->{$item}。下面的代码指向错误所在的行。

```
sub getMissingItems {
    my $filename = shift;
    my $itemHash = shift;

    foreach $item (@someItems) {

        if (not exists $itemHash{$item}) { # <--- this is wrong
            %$itemHash{$item} = 0; # <--- this one too
        }

    }
} 
```

# java - 将字符串转换为有效的 Java 变量名

> ID：12754416
> 
> 赞同：7
> 
> 时间：2012-10-05T21:40:26.920
> 
> 标签：java, regex, code-generation

对于我正在使用的代码生成工具，我需要获取一个字符串并从中生成一个有效的 java 变量名，但我不确定最好的方法。

例如：

`"123 this is some message !"`=> `_123_this_is_some_message`（或类似的东西）

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T21:49:18.960

假设您用下面的代码替换所有无效字符`_`可能会起作用（粗略示例）。您可能想要为名称冲突等添加一些逻辑。它基于[JLS #3.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)：

> 标识符是 Java 字母和 Java 数字的无限长度序列，其中第一个必须是 Java 字母。
> [...]
> “Java 字母”是 Character.isJavaIdentifierStart(int) 方法返回 true 的字符。
> “Java 字母或数字”是 Character.isJavaIdentifierPart(int) 方法返回 true 的字符。

```
public static void main(String[] args) {
    String s = "123 sdkjh s;sdlkjh d";
    StringBuilder sb = new StringBuilder();
    if(!Character.isJavaIdentifierStart(s.charAt(0))) {
        sb.append("_");
    }
    for (char c : s.toCharArray()) {
        if(!Character.isJavaIdentifierPart(c)) {
            sb.append("_");
        } else {
            sb.append(c);
        }
    }

    System.out.println(sb);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T21:48:38.163

您希望将随机字符串转换为有效的 Java 标识符。根据[Java 语言规范 §3.8](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.8)，标识符的定义如下：

> *Identifier* :
> *IdentifierChars*但不是*关键字*或*BooleanLiteral*或*NullLiteral*
> 
> *IdentifierChars* :
> *JavaLetter*
> *IdentifierChars JavaLetterOrDigit*
> 
> *JavaLetter* :
> 任何作为 Java 字母的 Unicode 字符
> 
> *JavaLetterOrDigit* :
> 任何作为 Java 字母或数字的 Unicode 字符

那么，您所要做的就是逐步检查您的输入并将任何无效字符替换为有效字符（例如下划线）或将其完全删除。Java 甚至在`Character`类中提供方法来告诉您给定字符是*JavaLetter*还是*JavaLetterOrDigit* :`isJavaIdentifierStart()`和`isJavaIdentifierPart`. （这比尝试排除无效字符要容易得多，因为有效字符集很小，而无效字符集很大。）

最后，请记住确保您的结果不是以数字开头，而不是关键字或文字。如果冲突是可能的且不希望发生，您可以根据需要在结果中附加数字以获得唯一值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T21:51:11.347

你应该：

1.  替换`\\s+`为`_`
2.  删除所有出现的`\\W+`
3.  添加`_`为前缀，如果`^\d`匹配（或者即使不匹配）

所以像

```
"_" + myString.replaceAll("\\s+", "_").replaceAll("\\W+", "") 
```

# r - 导致四舍五入的 C 函数

> ID：12754420
> 
> 赞同：0
> 
> 时间：2012-10-05T21:40:37.893
> 
> 标签：r

**案子**

我已经将用于 dyn.loading 的共享库编译到 R 中。然后，当我在 RI 中调用包装函数时，会得到四舍五入的结果，并在小数点后截断部分。我可能遗漏了一些众所周知的东西，因为这是我第一次尝试使用 .C 函数，但我找不到舍入的原因。下面是我的代码。

**我的 C 代码**

```
#include <freesteam/steam_pT.h>
#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <R.h>

// gcc -Wall -fPIC -c Rsteam_h_pT_2.c -o  Rsteam_h_pT_2.o -I/usr/local/include -I/opt/R-2.14.0/lib/R/include -L/usr/local/lib -lfreesteam
// gcc -Wall -shared -o Rsteam_h_pT_2.so Rsteam_h_pT_2.o -I/usr/local/include -I/opt/R-2.14.0/lib/R/include -L/usr/local/lib -lfreesteam

// function
double steam_h_pT(double p, double T){
SteamState S = freesteam_set_pT(p, T);
double s = freesteam_h(S);
return s;
}

// wrapper
double steam_h_pT(double, double);
void steam_h_pT_R_wrapper(double *p, double *T, double *result) { *result = steam_h_pT(*p, *T); } 
```

**我的 R 函数**

```
steam_h_pT <- function(p_Pa,T_K)
 {
 dyn.load('Rsteam_h_pT.so')
 # Call the C function
 returned_data = .C('steam_h_pT_R_wrapper', p=as.numeric(p_Pa), T= as.numeric(T_K), result=numeric(1))
 # Return the value of the result parameter
 return(returned_data$result)
 } 
```

**我的 R 会话**

```
> steam_h_pT(100000,400)
[1] 2730398
> str(steam_h_pT(100000,400))
num 2730398
> 
```

**原始代码的预期结果**

```
bash>./steam_h_pT 1e5 400
2730397.845968 
```

**现在，为什么它会在 R 中四舍五入？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:56:55.577

这就是 R 格式化数字的方式。互操作很好，从 C 返回并由 R 保存的值具有完整的精度。它只是四舍五入值的显示。

```
x <- 2730397.845968
str(x) 
```

输出

```
num 2730398 
```

而不是`str`使用输出更精确的函数。例如：

```
print(steam_h_pT(100000,400), digits=16) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:58:29.110

它是由于函数`digits`参数的表示`print`。该号码仍然正确存储。

```
2730397 + 0.845968
[1] 2730398
print(2730397 + 0.845968, digits=15)
[1] 2730397.845968 
```

您可以使用 设置全局默认值`options(digits=15)`。

# .net - 读取 htm 文件的内容

> ID：12754423
> 
> 赞同：0
> 
> 时间：2012-10-05T21:41:00.263
> 
> 标签：.net, html, vb.net, c#-4.0

使用 Windows 窗体应用程序

我在本地驱动器上保存了一个 htm 文件。我需要编写该文件的内容并将其写入我的数据库字段。

```
 Dim objstream As New StreamReader("C:\Users\Readme.htm")
 textBox1.Text = objstream.ReadLine() 
```

似乎上面的代码仅适用于文本文件。你能帮我看看用什么来阅读 vb.net 中的 html 文件的内容吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:56:25.523

改用这个：

```
textBox1.Text = File.ReadAllText("C:\Users\Readme.htm") 
```

在这种情况下无需打开或关闭流。

# jquery - 图像上的 Ajax 函数

> ID：12754432
> 
> 赞同：0
> 
> 时间：2012-10-05T21:41:51.870
> 
> 标签：jquery, ajax, thumbnails

我想在图像上启动一个功能。我将 JQueryThumbGallery 与灯箱一起使用，我想检索图像 ID

我的代码是

```
<div class='thumbHolder' **data-id="MY-ID"** data-title="<?php echo '<span class=\'io_home\'>'.$row['io'].'</span><br /> '.$row['first_name'].' '.$row['last_name'].'<br/><span class=\'voti_home\'>'.$row['tot_voti'].' VOTI</span>'; ?>">
  <a rel="prettyPhoto[ajax]" href="index.php/image/view_image?ajax=true&width=700px&height=450px&id=<?php echo $row['id']; ?>" >
  <img class="thumb_hidden" src="<?php echo base_url().'upload/concorso1/thumb/'.$row['url']; ?>" width="151" height="120" alt="<?php echo $row['first_name'].' '.$row['last_name']; ?>" />
                                </a>

                            </div> 
```

jquery函数是

```
 function overThumb(i,j){

        //function called when mouse over thumb holder (plus returned item number: i = first level, j = second level)
        console.log('overThumb: ', i,' , ', j);
    } 
```

我需要从我打开的图像中检索 ID（overThumb 功能）。我曾尝试设置 data-id-i 和 data-id-j 但我还没有了解应该如何使用它们。你能帮助我吗？

链接到脚本

[http://www.interactivepixel.net/ccThumbGallery/index_grid_horizo​​ntal_100percent_buttons.html](http://www.interactivepixel.net/ccThumbGallery/index_grid_horizontal_100percent_buttons.html)

谢谢 fc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:55:30.440

更改您的 PHP 代码以呈现这样的 img 标签标记（仅 HTML ！没有连接函数）

```
<img class="thumb_hidden" src="Somepath/someimage.jpg" 
               data-myAttr="my custom val" id="someUniqueID" alt="some text" /> 
```

现在使用一些[普通的](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)javascript

```
<script type="text/javascript">
 $(function(){
   $("img.thumb_hidden").mouseover(function() {
       var ourImg=$(this);
       var urlOfImage=ourImg.attr("href");
       var idOfImage=ourImg.attr("id");
       //let's get the HTML5 data attribute as well
       var myCustomVal=ourImg.data("myAttr");
       //Now use these to make ajax call as necessary
   });    
 });
</script> 
```

# android - 为什么意大利语单词sì在TextView中失去了ì？

> ID：12754435
> 
> 赞同：0
> 
> 时间：2012-10-05T21:42:01.883
> 
> 标签：android, utf-8, internationalization, textview

在文本视图中，当我应该有“sì”时，我看到的只是“s”

我的价值观-it/strings.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources>
    <string name="msg_yes">sì</string> 
```

我的代码：

```
 txtMsg.setText(R.string.msg_yes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:01:20.237

我刚刚通过复制/粘贴在运行 Jellybean 的三星 Nexus S 上进行了测试，我发现在预览窗格和我的设备上都正确显示了字符。这可能与操作系统版本、电话、字体、主题或其他一些因素有关……

# php - 使用php获取当前用户的Windows用户名？

> ID：12754437
> 
> 赞同：10
> 
> 时间：2012-10-05T21:42:20.630
> 
> 标签：php, windows-users

> **可能重复：**
> [如何使用 PHP/IIS 读取 Windows 登录用户名](https://stackoverflow.com/questions/3899643/how-to-read-windows-loged-in-username-with-php-iis)

我正在使用生成数据访问层并为用户生成一些文件夹和文件的 php 工具，但我需要知道如何获取当前 Windows 用户的用户名以在桌面上生成这些文件夹

```
ex:
C:\\users\\<username>\\desktop 
```

我需要知道用户名。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T21:46:47.017

如果当前的 windows 用户是指运行脚本的用户，那么它是在一个环境变量中设置的，您可以使用它：

```
<?php echo getenv("username"); ?> 
```

如果要获取运行脚本的用户的主目录，则应使用

```
<?php echo getenv("HOMEDRIVE") . getenv("HOMEPATH"); ?> 
```

这应该输出 C:\Users\Fred 或 C:\Documents and Settings\Fred，具体取决于您使用的是 Windows Vista/7 还是 Windows XP。

要查看所有环境变量，您可以执行以下操作：

```
<?php global $_ENV; var_dump($_ENV); ?> 
```

# mysql - 如何对包含子句“order by”、“desc”和“Limit”的多个列使用 distinct

> ID：12754448
> 
> 赞同：0
> 
> 时间：2012-10-05T21:43:22.350
> 
> 标签：mysql, sql

*   我需要具有attributeId 和attribute 值的最新添加的三个值，但不同的不会对两者都起作用。我的要求主要是attributeValue，但具有不同的最新添加的attributeId。下面是我的查询.. 有什么解决方案吗？

    ```
     SELECT DISTINCT  attributeValue 
      FROM user_trans_service_selection 
      ORDER BY uniqueId DESC LIMIT 0,3 
    ```

下面是我的桌子

*   uniqueId - attributeId - attributeValue
*   1 - 101 - 6700
*   2 - 102 - 受雇
*   3 - 103 - 城市
*   4 - 101 - 8900
*   5 - 102 - 受雇
*   6 - 102- 学生
*   7 - 103 - 镇
*   8 - 103 - 村庄

> 我希望结果为：

*   属性 ID - 属性值
*   101 - 8900
*   102 - 学生
*   103 - 村庄

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:38:14.957

有点类似于戈登林诺夫的回答。在 sql server 中你不使用 LIMIT

[sqlfiddler](http://sqlfiddle.com/#!3/746e0/3)

```
select utss.attributeid, utss.attributeValue
from user_trans_service_selection utss 
    inner join
     (select top 3 attributeid, max(uniqueid) as maxid
      from user_trans_service_selection
      group by attributeid
      order by max(uniqueid)
     ) attr
     on attr.maxid = utss.uniqueid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:39:46.190

//我们将为此使用 GROUP BY 函数

> ```
> SELECT column_name, aggregate_function(column_name)
> FROM table_name
> WHERE column_name operator value
> GROUP BY column_name 
> ```

// 按照这些 V 步骤 {A, B 和 C} 为每个 [attributeId] 查找最后添加的记录 // {A} 为每个 [attributeId] 查找最后添加的记录（例如最高 [uniqueId]）

> ```
> SELECT attributeId, max(uniqueId)
> FROM table_name
> GROUP BY attributeId 
> ```

// {B} 我们稍后会将此结果嵌套在最终查询的 where 子句中，但首先我们必须去掉 [attributeId]

> ```
> SELECT uniqueId
> FROM( SELECT attributeId, max(uniqueId)
>       FROM table_name
>       GROUP BY attributeId) 
> ```

// {C} 现在我们可以创建最终查询并从表 [table_name] 中选择我们需要的内容。在此查询的 WHERE 子句中，我们可以放置一个过滤器，仅显示我们在 {B} 中找到的那些 id 的信息

> ```
> SELECT uniqueId, attributeId, attributeValue
> FROM table_name
> WHERE attributeId IN (    SELECT attributeId
>               FROM(   SELECT attributeId, max(uniqueId)
>           FROM table_name
>           GROUP BY attributeId)) 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T21:47:33.780

您想要的是每个属性具有最高 id 的行。你需要加入才能得到这个：

```
select utss.attributeid, utss.attributeValue
from user_trans_service_selection utss join
     (select attributeid, max(uniqueid) as maxid
      from user_trans_service_selection
      group by attributeid
     ) attr
     on attr.maxid = utss.id
order by maxid desc
limit 0, 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T00:10:39.397

最后完全没有错误的工作代码如下：

```
 select utss.attributeid, utss.attributeValue
     from user_trans_service_selection utss 
      inner join
     (select attributeid, max(uniqueid) as maxid
      from user_trans_service_selection
      group by attributeid
      order by max(uniqueId) desc limit 0,3
     ) attr
     on attr.maxid = utss.uniqueid 
```

感谢大家 ！！！

# javascript - jquery 和 CSS3 过渡

> ID：12754449
> 
> 赞同：0
> 
> 时间：2012-10-05T21:43:27.107
> 
> 标签：javascript, jquery, css, transitions

我编写了一个脚本，该脚本使用很多用户选项来进行动画计时、属性等，但似乎无法弄清楚如何添加 css3 动画（这将回退到 jquery）

**假设我有以下代码（只是一个例子）：**

```
$Element.bind('click',function(){
    var bc=options.borderColor,
        bw=options.borderWidth,
        l= options.left,
        speed=options.speed,
        bc_ease=options.borderColorEasing,
        bw_ease=options.borderColorWidth,
        l_ease=options.leftEasing;

if(Modernizr.csstransitions){
    // CSS3 .....

}else{
   // JS

    $Overlay.animate({borderColor: bc, borderWidth: bw, left: L },
     {duration:speed, queue:false, specialEasing: {borderColor: bc_ease,
     borderWidth: bw_ease, left: L_ease }});

};
}); 
```

**我还构建了一个 CSS 规则更新器功能，我想我会需要它：**

```
setCSSRule:function(getRule,newRule){
    var styles=document.styleSheets;
    for(var i=0,l=styles.length; i<l; ++i){
        var sheet=styles[i]; 
        if(sheet.title === "style"){
            var rules=sheet.cssRules;
            for(var j=0, l2=rules.length; j<l2; j++){
            var rule=rules[j];
                // SELECT APPROPRIATE RULE IN STYLESHEET AND UPDATE IT
                if(getRule === rule.selectorText){  
                                     rule.style.cssText=newRule;
                     };
            };
        };
    };
}, 
```

这只是遍历所有样式表，找到正确的规则，然后使用提供的新规则对其进行更新。

我对 CSS3 过渡有基本的了解，但习惯于在 jQuery 和 JS 中制作动画，所以 CSS3 过渡对我来说有点倒退。根据我的阅读，我可以使用 addClass 或 Toggle 类来实现这一点，但需要将用户选项（如第一段代码中的变量所示）插入 CSS3 转换（这就是我开始构建的原因CSS 规则更新功能），但现在卡住了。任何帮助都会很棒！多谢你们 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:44:24.750

这应该有效。您还可以为单个属性设置动画`all`，而不是像`transition: color 0.25s ease-in-out`(transition: property time easing;)

```
.overlay {
   border-color : #333;
   border-style : solid;
   border-width : 1px;
   left : 0;
    -webkit-transition  : all 0.25s ease-in-out;  
       -moz-transition  : all 0.25s ease-in-out;  
         -o-transition  : all 0.25s ease-in-out; 
            transition  : all 0.25s ease-in-out; 

    }

.overlay.animate {
    border-color : #000;
    border-width : 5px;
    left :100px;
    } 
```

和 jQuery——</p>

```
if(Modernizr.csstransitions){

      $Overlay.addClass('animate');

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:54:16.020

jquery-animate-enhanced 使用 jquery 和功能检测对 css3 的支持，并在可用时使用它：

```
http://playground.benbarnett.net/jquery-animate-enhanced/ 
```

# c# - 将事件处理程序分配给通过数据绑定创建的资源字典中定义的元素

> ID：12754451
> 
> 赞同：1
> 
> 时间：2012-10-05T21:43:39.540
> 
> 标签：c#, xaml, windows-8, microsoft-metro, resourcedictionary

我有一个 C# XAML Windows 8 项目。

HubPage.xaml 包含一个`GridView`名为*HubGridView*。*HubGridView*使用一个`ItemTemplateSelector`名为*HubItemTemplateSelector*的自定义。HubItemTemplateSelector选择在名为*HubResourceDictionary.xaml的文件**中*定义的命名*AdDataTemplate*。*AdDataTemplate*包含一个名为*HubAdControl*的元素。`DataTemplate`*`ResourceDictionary`**`AdControl`***

 ***我需要能够将`HubAdControl`s`ErrorOccurred`事件处理程序设置为在某处的代码隐藏中定义的方法。我该如何做到这一点？

**HubPage.xaml：**

```
<GridView x:Name="HubGridView" ItemTemplateSelector="{StaticResource HubItemTemplateSelector}" /> 
```

**HubResourceDictionary.xaml：**

```
<DataTemplate x:Key="AdDataTemplate">
    <Grid>
        <UI:AdControl x:Name="HubAdControl" />
    </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T14:41:55.720

您现在可能已经弄清楚了，但是我遇到了同样的问题。

我不确定我是否 100% 理解杰瑞的回答。我尝试将 AdControl 放在这样的资源文件中：

**模板.xaml**

```
<DataTemplate x:Key="AdTemplate1">
        <StackPanel Margin="70,40,70,140" HorizontalAlignment="Center" VerticalAlignment="Center">
            <ui:AdControl 
                ApplicationId="d25517cb-12d4-4699-8bdc-52040c712cab" 
                AdUnitId="10043030" HorizontalAlignment="Center" 
                Height="600" Margin="0,0,0,0" 
                VerticalAlignment="Center" Width="300" ErrorOccurred="OnAdError" />
        </StackPanel>
</DataTemplate> 
```

然后在我的 xaml 中，我使用 DataTemplateSelector 引用了 DataTemplate。我尝试在使用 DataTemplate 的 xaml 代码中创建 OnAdError 事件处理程序。我遇到了运行时异常，资源模板需要 OnAdError 方法。

也许我错过了一些东西，我当然不是 XAML 或 Windows 8(.1) 应用程序方面的专家。然而，我最终做的是在后面的代码中创建一个带有控件的 UserContol 以及 OnAdError 处理程序，并在资源文件中引用了这个 UserControl。现在一切都按预期工作，我从中得到了好处，我可以在这个用户控件中收集所有广告逻辑。下一步是动态更改 AdUnitId :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:45:53.923

它就像你想象的那样工作：

```
<Grid.Resources>
    <DataTemplate x:Key="MyTemplate">
        <TextBlock Loaded="TextBlock_Loaded_1">Hello World</TextBlock>
    </DataTemplate>
</Grid.Resources>

<GridView ItemTemplate="{StaticResource MyTemplate}" /> 
```

在我的示例中，每次呈现 TextBox 时都会引发 Loaded - 这是针对绑定到 GridView 的 ItemsSource 的每个项目。您可以轻松地使用另一个事件，例如 OnError 或其他任何事件。它在资源中并不重要。绑定到中继器的结果并不重要。

说得通？***

# php - 通过数字键访问 PHP 对象中的数据

> ID：12754462
> 
> 赞同：1
> 
> 时间：2012-10-05T21:44:22.203
> 
> 标签：php, solr

我在一个我不知道如何访问它的数据的对象中有一个 solr 查询“突出显示”的输出。可以说我想找回我尝试过的“黑色和红色”：

```
$object->{10304}->color_source_name[0];
$object->{'10304'}->color_source_name[0]; 
```

两者都没有给我任何东西。我如何访问数据？

这是我在下面引用的对象：

```
print_r($object);

SolrObject Object
(
[10304] => SolrObject Object
    (
        [color_source_name] => Array
            (
                [0] => Black & Red
            )

        [description] => Array
            (
                [0] =>  with their true identity safely masked.Midcalf Lucha Red
            )

        [name] => Array
            (
                [0] => Sock It To Me Lucha Red Midcalf
            )

        [color] => Array
            (
                [0] => Red
            )

    )

[4075] => SolrObject Object
    (
        [color_source_name] => Array
            (
                [0] => Beige/Red
            )

        [description] => Array
            (
                [0] => Very sheer with red tops and Cuban heels and an oh-so-sexy red backseam.  These are designed
            )

        [name] => Array
            (
                [0] => Two-Tone Red Cuban-Heeled Stockings
            )

        [color] => Array
            (
                [0] => Red
            )

    ) 
```

)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:48:23.230

根据[http://php.net/manual/en/class.solrobject.php](http://php.net/manual/en/class.solrobject.php) `SolrObject`实现`ArrayAccess`所以你可以使用方括号，例如

```
echo $object[4075]['colour_source_name'][0]; 
```

# c# - 反序列化期间的 JSON.Net Ignore Property

> ID：12754463
> 
> 赞同：39
> 
> 时间：2012-10-05T21:44:24.390
> 
> 标签：c#, json, json.net

我有一个班级设置如下：

```
public class Foo
{
    public string string1 { get; set; }
    public string string2 { get; set; }
    public string string3 { get; set; }
} 
```

我正在使用 Json.Net 反序列化以下 Json 响应：

```
[
    {
        "number1": 1,
        "number2": 12345678901234567890,
        "number3": 3
    },
    {
        "number1": 9,
        "number2": 12345678901234567890,
        "number3": 8
    }
] 
```

反序列化代码：

```
string json = @"[
    {
        ""number1"": 1,
        ""number2"": 12345678901234567890,
        ""number3"": 3
    },
    {
        ""number1"": 9,
        ""number2"": 12345678901234567890,
        ""number3"": 8
    }
]"

List<Foo> foos = JsonConvert.DeserializeObject<List<Foo>>(json); 
```

in 的值`number2`超过 a `Int64`，但我并不真正关心检索该值。有没有办法将`number2`属性转换为字符串，或者在反序列化过程中完全忽略它？

我尝试将`[JsonConverter(typeof(string))]`属性添加到`string2`属性，但收到错误：`Error creating System.String`. 我也试过设置`typeof(decimal)`。

我也尝试过使用`[JsonIgnore]`，但这不起作用。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-11-26T12:13:12.673

您可以使用对象`MissingMemberHandling`的属性`JsonSerializerSettings`。

示例用法：

```
var jsonSerializerSettings = new JsonSerializerSettings();
jsonSerializerSettings.MissingMemberHandling = MissingMemberHandling.Ignore;

JsonConvert.DeserializeObject<YourClass>(jsonResponse, jsonSerializerSettings); 
```

更多信息[在这里](http://james.newtonking.com/json/help/?topic=html/T_Newtonsoft_Json_JsonSerializerSettings.htm)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-05T22:13:22.873

这是一个蹩脚的解决方法，但您可以创建一种手动加载 json 的方法。如果在没有自动反序列化器的情况下加载的数据太多，只需删除您不想要的节点。不过，这要慢得多。

```
public static List<Foo> FromJson(string input) {
    var json = JToken.Parse(input);
    json["key"].Remove();
    var foo = JsonConvert.DeserializeObject<List<Foo>>(json.ToString());

} 
```

这是一个有趣的问题，我想知道是否有人有更好的解决方案。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-13T15:28:47.253

这是 Newtonsoft Json 忽略属性的首选方法，而无需根据[http://james.newtonking.com/json/help/index.html?topic=html/ReducingSerializedJSONSize.htm修改类](http://james.newtonking.com/json/help/index.html?topic=html/ReducingSerializedJSONSize.htm)

这个用于忽略 EF 或 Linq2Sql 的惰性引用属性

```
public class DynamicContractResolver : DefaultContractResolver
{
    protected override IList<JsonProperty> CreateProperties(Type type, 
        MemberSerialization memberSerialization)
    {
        Func<Type,bool> includeProperty = t => t.IsValueType || t.Namespace.StartsWith("System") && t.Namespace.StartsWith("System.Data")==false; 
        IList<JsonProperty> properties = base.CreateProperties(type, memberSerialization);
        var allProperties = properties.Select (p => new{p.PropertyName,Including=includeProperty(p.PropertyType), p.PropertyType});//.Dump("props");
        var warnProperties=allProperties.Where (a =>a.Including && a.PropertyType.IsValueType==false && a.PropertyType.Name.IsIgnoreCaseMatch("String")==false) ;

        //linq pad debugging helper
        //var propertyTypesSerializing= allProperties.Where (p => p.Including).Select (p => p.PropertyType).Distinct().OrderBy (p => p.Name).Dump();

        if(warnProperties.Any())
        {
            //LinqPad helper
            //Util.Highlight(warnProperties.ToArray()).Dump("warning flag raised, aborting");
            throw new ArgumentOutOfRangeException();
        }

        properties = properties.Where(p =>includeProperty(p.PropertyType)).ToList();
        return properties;
    }
} 
```

所有`.Dump()`调用都只是 linqpad 调试助手，不需要方法调用。

示例用法：

```
var inactives = from am in Aspnet_Memberships
        join mm in Member_members on am.UserId equals mm.Member_guid
        where mm.Is_active==false && mm.Org_id==1
        select new{am,mm};
        //inactives.Take(4).ToArray().Dump();
        var serialized = JsonConvert.SerializeObject(
            inactives.Skip(1).Select(i => i.mm).First(), 
            new  JsonSerializerSettings()
            {
                ContractResolver = new DynamicContractResolver(), 
                PreserveReferencesHandling = PreserveReferencesHandling.None,
                ReferenceLoopHandling= ReferenceLoopHandling.Ignore
            }); 
            //.Dump(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-24T17:33:30.787

与@Maslow[的解决方案](https://stackoverflow.com/a/21758478/1037948)类似，您可以使用[另一个通用“忽略器”](https://stackoverflow.com/questions/6851899/is-there-a-way-to-make-javascriptserializer-ignore-properties-of-a-certain-gener/14510098#14510098 "类似问题的回答")：

```
var jsonResolver = new IgnorableSerializerContractResolver();
// ignore your specific property
jsonResolver.Ignore(typeof(Foo), "string2");
// ignore single datatype
jsonResolver.Ignore(typeof(System.Data.Objects.DataClasses.EntityObject));
var jsonSettings = new JsonSerializerSettings() { ReferenceLoopHandling = ReferenceLoopHandling.Ignore, ContractResolver = jsonResolver }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-24T14:59:54.720

添加到 drzaus 答案：您可以使用`DefaultContractResolver`他建议的 .. 只是在它的`CreateProperty`使用中`property.Ignored = true;`而不是`property.ShouldSerialize`，然后当您将 传递`JsonSerializerSettings`给`DeserializeObject`函数或`SerializeObject`函数时它很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-15T23:45:26.047

这段代码对我来说就像一个魅力：

```
using System.Reflection;
using Newtonsoft.Json;
using Newtonsoft.Json.Serialization;
public class PropertyRenameAndIgnoreSerializerContractResolver : DefaultContractResolver
{
    private readonly Dictionary<Type, HashSet<string>> _ignores;
    private readonly Dictionary<Type, Dictionary<string, string>> _renames;

    public PropertyRenameAndIgnoreSerializerContractResolver()
    {
        _ignores = new Dictionary<Type, HashSet<string>>();
        _renames = new Dictionary<Type, Dictionary<string, string>>();
    }

    public void IgnoreProperty(Type type, params string[] jsonPropertyNames)
    {
        if (!_ignores.ContainsKey(type))
            _ignores[type] = new HashSet<string>();

        foreach (var prop in jsonPropertyNames)
            _ignores[type].Add(prop);
    }

    public void RenameProperty(Type type, string propertyName, string newJsonPropertyName)
    {
        if (!_renames.ContainsKey(type))
            _renames[type] = new Dictionary<string, string>();

        _renames[type][propertyName] = newJsonPropertyName;
    }

    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    {
        var property = base.CreateProperty(member, memberSerialization);

        if (IsIgnored(property.DeclaringType, property.PropertyName))
        {
            property.ShouldSerialize = i => false;
            property.Ignored = true;
        }

        if (IsRenamed(property.DeclaringType, property.PropertyName, out var newJsonPropertyName))
            property.PropertyName = newJsonPropertyName;

        return property;
    }

    private bool IsIgnored(Type type, string jsonPropertyName)
    {
        if (!_ignores.ContainsKey(type))
            return false;

        return _ignores[type].Contains(jsonPropertyName);
    }

    private bool IsRenamed(Type type, string jsonPropertyName, out string newJsonPropertyName)
    {
        Dictionary<string, string> renames;

        if (!_renames.TryGetValue(type, out renames) || !renames.TryGetValue(jsonPropertyName, out newJsonPropertyName))
        {
            newJsonPropertyName = null;
            return false;
        }

        return true;
    }
} 
```

//忽略 Foo 示例中的 number2

```
public class Foo
{
public string number1 { get; set; }
public string number2 { get; set; }
public string number3 { get; set; }
}
    string Foojson = @"[
    {
        ""number1"": 1,
        ""number2"": 12345678901234567890,
        ""number3"": 3
    },
    {
        ""number1"": 9,
        ""number2"": 12345678901234567890,
        ""number3"": 8
    }
]";
var jsonResolverFoo = new PropertyRenameAndIgnoreSerializerContractResolver();
jsonResolverFoo.IgnoreProperty(typeof(Foo), "number2");
var serializerSettingsFoo = new JsonSerializerSettings();
serializerSettingsFoo.ContractResolver = jsonResolverFoo;
var deserializedJsonFoo = JsonConvert.DeserializeObject<List<Foo>>(Foojson, serializerSettingsFoo); 
```

/* 资源链接：[https](https://blog.rsuter.com/advanced-newtonsoft-json-dynamically-rename-or-ignore-properties-without-changing-the-serialized-class/) ://blog.rsuter.com/advanced-newtonsoft-json-dynamically-rename-or-ignore-properties-without-sharing-the-serialized-class/ */

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-22T23:59:54.377

选择;

如果 ResponseAttribute 具有模型或字符串参数

```
public class ResponseAttribute : Attribute { }

public class ModelItem
{
    [Response]
    public Guid Id { get; set; }
} 
```

代码;

```
public class CustomJsonSerializer : JsonSerializerSettings
{
    public CustomJsonSerializer()
    {
        ContractResolver = new CustomContractResolver();
    }

    public CustomJsonSerializer(params string[] members)
    {
        ContractResolver = new CustomContractResolver(members);
    }

    public class CustomContractResolver : DefaultContractResolver
    {
        public string[] Members { get; set; }
        public CustomContractResolver(params string[] _members)
        {
            Members = _members;
        }

        protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
        {
            JsonProperty property = base.CreateProperty(member, memberSerialization);

            if (Members?.Length > 0)
                property.ShouldSerialize = instance => { return Members.Contains(member.Name); };
            else
                property.ShouldSerialize = instance => { return member.GetCustomAttribute<ResponseAttribute>() != null; };

            return property;
        }
    }
} 
```

利用;

```
return new JsonResult(model, new CustomJsonSerializer()); 
```

或者

```
return new JsonResult(model, new CustomJsonSerializer("Id","Test","Test2")); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-14T00:51:59.390

我遇到了类似的事情，但我的类包含 List<> 和 Dictionary<> ，它们已被填充，不应被 JSON 文件所包含的任何内容覆盖。我更容易将数据加载到临时对象中，然后只需拉出我需要的项目，而不是我当时能找到的任何其他方法。

所以对于这个例子，像这样的东西......

```
public class Foo
{
    public string string1 { get; set; }
    public string string2 { get; set; }
    public string string3 { get; set; }
}
List<Foo> foos = new List<Foo>();

List<Foo> tmp= JsonConvert.DeserializeObject<List<Foo>>(json);

foreach(Foo item in tmp)
{
    foos.string1 = tmp.string1;
    foos.string3 = tmp.string3;
} 
```

# mysql - MySQL 更新 CASE WHEN/THEN/ELSE

> ID：12754470
> 
> 赞同：94
> 
> 时间：2012-10-05T21:44:48.000
> 
> 标签：mysql

我正在尝试使用 CLI 脚本更新 LARGE MyISAM 表（2500 万条记录）。该表没有被其他任何东西锁定/使用。

我认为与其对每条记录进行单个 UPDATE 查询，不如利用 CASE 功能。

该`id`字段是主要的。我怀疑以下查询应该需要几毫秒。

```
UPDATE `table` SET `uid` = CASE
    WHEN id = 1 THEN 2952
    WHEN id = 2 THEN 4925
    WHEN id = 3 THEN 1592
    END 
```

瞧，查询占用了 CPU 并且不会永远完成。

然后，令我惊讶的是，我发现查询正在更新所有 2500 万行，在我没有指定的行上放置了一个 NULL。

这样做的目的是什么？我可以在每次执行此查询时只对特定行进行 MASS 更新而不更新 2500 万行吗？还是我必须进行个别更新然后提交？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-10-05T21:46:37.187

试试这个

```
UPDATE `table` SET `uid` = CASE
    WHEN id = 1 THEN 2952
    WHEN id = 2 THEN 4925
    WHEN id = 3 THEN 1592
    ELSE `uid`
    END
WHERE id  in (1,2,3) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T21:50:04.847

如果`id`从 1 开始连续，最简单（也是最快）的将是：

```
UPDATE `table` 
SET uid = ELT(id, 2952, 4925, 1592) 
WHERE id IN (1,2,3) 
```

因为[ELT()](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_elt)返回字符串列表的第 N 个元素：如果 N = 1，则返回 str1，如果 N = 2，则返回 str2，依此类推。如果 N 小于 1 或大于参数的数量，则返回 NULL。

显然，上面的代码只有在`id`1、2 或 3 时才有效。如果`id`是 10、20 或 30，则以下任一方法都可以：

```
UPDATE `table` 
SET uid = CASE id 
WHEN 10 THEN 2952 
WHEN 20 THEN 4925 
WHEN 30 THEN 1592 END CASE 
WHERE id IN (10, 20, 30) 
```

或更简单的：

```
UPDATE `table` 
SET uid = ELT(FIELD(id, 10, 20, 30), 2952, 4925, 1592) 
WHERE id IN (10, 20, 30) 
```

由于[FIELD()](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_field)返回 str 在 str1, str2, str3, ... 列表中的索引（位置）。如果未找到 str，则返回 0。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T21:51:48.573

那是因为你错过了 ELSE。

“返回第一个条件为真的结果。如果没有匹配的结果值，则返回 ELSE 之后的结果，如果没有 ELSE 部分，则返回 NULL。” （[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case)）

# css - 在 css 中显示不透明度的内容

> ID：12754475
> 
> 赞同：0
> 
> 时间：2012-10-05T21:45:17.400
> 
> 标签：css

我已经申请`opacity`了我的包装类，我想在我的页面上显示加载图像。加载图像放置在包装器内，并进行了`opacity`调整。因此，加载图像显示不清晰。我想清楚地显示加载图像，没有不透明性。有人可以让我知道我该怎么做吗？

```
 #wrapper{
     opacity:0.21;
     width:100%;
     height:100%;
 }
 #loading{ 
     background-image:url('loading.gif');
     width:200px;  
     height:20px;
     z-index:10px;
     position:fixed;
     top:50%;
     left:50%;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:47:34.513

如果您的背景是纯色，请使用 an`rgba` `background-color`而不是`opacity`：

```
background-color: rgba(255, 255, 255, 0.21); /* white, 0.21 opacity */ 
```

上面的结果将是只有元素的背景是 21% 不透明的，而不是元素的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:03:13.057

#wrapper 中的所有内容都将继承您分配的不透明度，无论其位置如何。这可能是你正在做的事情：

```
<!-- #loading will have the same opacity of its parent element -->
<div id="wrapper">
  <div id="loading"></div>
</div> 
```

您必须将#loading 元素的标签放在#wrapper 元素之外。

```
<!-- #loading and #wrapper will have their own separate opacity -->
<div id="loading"></div>
<div id="wrapper"></div> 
```

# sql-server - 如何用 Dapper 调用 UDF？

> ID：12754476
> 
> 赞同：12
> 
> 时间：2012-10-05T21:45:17.547
> 
> 标签：sql-server, orm, sql-server-2008-r2, user-defined-functions, dapper

有没有办法用 Dapper 调用表值 UDF，除了：

```
var rows = connection.Query("select * from My_UDF(@a,@b)", new {a=1, b=2 }); 
```

我更喜欢避免使用魔法字符串，因此我想使用类似于调用 SP 语法的东西。

我使用 MS SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T06:43:10.433

不。Dapper 基本上（有一些调整）遵循与 ADO.NET 相同的规则，并且在 ADO.NET 和原始 TSQL 中，您发布的是调用 UDF的*唯一*方法 - 因此，这仍然是使用的语法小巧玲珑。此外，在调用 UDF 时，您需要指定模式名称（通常是`dbo.My_UDF`）。

# vb.net - 从两个表（VB.NET / Access）填充数据网格

> ID：12754478
> 
> 赞同：1
> 
> 时间：2012-10-05T21:45:51.567
> 
> 标签：vb.net, winforms, ms-access, datagrid, vba

我有 Access 数据库，我正在使用 VB.NET。DB有两张表

1.  技术人员
2.  故障

我有我想要从数据网格中的技术人员表中获得的列，但我想要有额外的列，它应该显示每个技术人员根据故障表修复了多少故障（所以我认为查询需要为每一行运行）。这甚至可能吗？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:04:34.367

那应该是

```
SELECT technicians.techname, count(*) AS NoOfFaults
FROM technicians
LEFT JOIN faults ON technicians.ID = faults.TechnicianID
GROUP BY technicians.techname; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:40:31.390

您需要在表单的 Load() 方法中指定要添加的列，并为 gridview 启用自动生成列属性为 true。

# php - jquery选项卡，为每个选项卡重新加载页面

> ID：12754481
> 
> 赞同：2
> 
> 时间：2012-10-05T21:46:36.267
> 
> 标签：php, jquery, jquery-ui, redirect, jquery-tabs

使用 jQuery ui 选项卡，是否有一种有效的方法可以为每个选项卡重新加载页面？

我试着做

```
$('#tab_two').click(function() {
    window.location = 'http://localhost/page#tab_two';
    }); 
```

但是，它仍然落在当前页面上。但是，如果您在此之后刷新页面，那么它将重定向到#tab_two。

有效重定向页面的唯一方法似乎是使用 PHP。但是拥有

```
$('#tab_two').click(function() {
    header('location: http://localhost/page#tab_two');
    }); 
```

把页面弄乱了。

关于如何实现这一目标的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:27:15.107

我认为您可以使用`load`如下方法：

```
$(function() {
   $( "#tabs" ).tabs();

   $( "#tab_two" ).click(function() {
      $( "#tabs" ).tabs( "load" , 1 );   // zero-based (tab#1 = 0 index)
   });
}); 
```

文档：

> **.tabs( "load" , index )**以编程方式重新加载 Ajax 选项卡的内容。此方法始终从远程位置加载选项卡内容，即使缓存设置为 true。第二个参数是要重新加载的选项卡的从零开始的索引。

# database - 多个请求同步到我的 rest API。

> ID：12754482
> 
> 赞同：0
> 
> 时间：2012-10-05T21:46:36.640
> 
> 标签：database, rest, concurrency

我有一个更新数据库表的服务器端休息 api。桌子看起来像这样

```
ID PubId DocUuid DocFamUuid CorrelationUuid
1   156   1A       2A            3A 
```

唯一键是 ID，此服务器端 API 为每个请求生成唯一的 DocUuid，它基于 PubId 生成 DocFamUuid 和 CorrelationUuid。因此，具有相同 PubId 的每个文档都将具有相同的 DocFamUuid 和相同的 CorrelationUuid。

我的问题是我正在查找来自传入请求的特定 pubId 是否存在于数据库中，如果存在，我选择第一个返回结果的 docFamUuid 和相关性Uuid，否则我生成它们并保存它到分贝。现在，我有一个集群服务器环境，我可以让两个不同的服务器获取两个单独的文档，并且都启动它们的处理线程。那么，在这种情况下期望的行为是什么？1\. 请求 1 从服务器 1 进入 rest API，它的 pubId 为 156，服务在 db 中查找它。2\. 请求 2 从服务器 2 到 rest API 访问数据库，它的 pubId 也是 156，它查找 db 表中不存在的记录。3.请求1创建一个2A的docFamUuid和3A的correlationUuid，并保存到db 4。请求 2 现在还创建了 2B 的 docFamUuid 和 3B 的correlationUuid 并将其保存到 db 表中。现在我们有两个不同的值

```
ID ID PubId DocUuid DocFamUuid CorrelationUuid
1   156   1A       2A            3A
2   156   1B       2B            3B 
```

这是错误的，因为期望的结果是：

```
ID ID PubId DocUuid DocFamUuid CorrelationUuid
1   156   1A       2A            3A
2   156   1B       2A            3A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:24:45.147

这更像是一个并发问题而不是休息问题。您可以在数据库周围添加某种锁定机制，并在最终插入之前立即检查现有的 pubId。如果存在冲突，您可以以某种方式在服务器端解决它，或者从其余服务返回 409 CONFLICT。

# google-bigquery - 从 2012 年 9 月 27 日的加载操作中看到重复的数据

> ID：12754484
> 
> 赞同：3
> 
> 时间：2012-10-05T21:46:37.197
> 
> 标签：google-bigquery

我们刚刚注意到，在 2012 年 9 月 27 日左右，我们的数据已经从 csv 文件上传（使用 Java API）中复制。日志显示上传期间没有错误，但我们已经确认当天的大部分行都被重复（每行有不同的时间戳，以微秒为单位） 当天是否有任何已知的故障？我们不知道如何防止这种情况再次发生。

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:09:17.747

首先：确保（通过检查加载作业历史记录）您实际上并没有最终运行加载作业两次。如果您使用的是[bq 命令行客户端](https://developers.google.com/bigquery/docs/cli_tool)：

```
# Show all jobs for your selected project
bq ls -j

# Will result in a list such as:
...
job_d8fc9d7eefb2e9243b1ffde484b3ab8a   load      FAILURE   29 Sep 00:35:26   0:00:00   
job_4704a91875d9e0c64f7aaa8de0458696   load      SUCCESS   29 Sep 00:28:45   0:00:05   
...

# Find the load jobs pertaining to the time of data loading. To show detailed information
# about which files you ingested in the load job, run a command on the individual jobs
# that might have been repeats:
bq --format prettyjson show -j job_d8fc9d7eefb2e9243b1ffde484b3ab8a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:46:22.177

Thanks for looking into this for us. It is hard (almost impossible) to believe that data got duplicated on the bigquery side. That said nothing we can see seems to indicate otherwise. As mentioned we have a microsecond timestamp value on every row. For the two job IDs referenced I picked a row at random and made sure that within all of the data we've ever imported it was a unique value. When I run the same query I get two (identical) rows in our bigquery table.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:57:45.783

我们不知道在导入期间数据会重复的任何原因。如果您向我们提供更多信息，例如您的工作 ID 和项目 ID，这将有助于诊断问题。

一般来说，正如迈克尔在他的回答中提到的，看到重复数据的人通常会两次运行相同的工作。（请注意，如果作业失败，则不应以任何方式修改表）。

防止此类冲突的一种方法是命名您的作业，因为我们在每个项目级别强制执行作业名称的唯一性。例如，如果您每天加载一次，您可能希望将您的作业 ID 命名为“job_2012_10_08_load1”之类的名称。这样，如果您尝试两次运行同一个作业，第二个作业将在启动时失败。

# c - OpenMP 自定义缩减变量

> ID：12754485
> 
> 赞同：3
> 
> 时间：2012-10-05T21:46:37.963
> 
> 标签：c, openmp

我被指派在不使用归约子句的情况下实现归约变量的想法。我设置了这个基本代码来测试它。

```
int i = 0;
int n = 100000000;
double sum = 0.0;
double val = 0.0;
for (int i = 0; i < n; ++i)
{
    val += 1;
}
sum += val; 
```

所以最后`sum == n`。

每个线程都应该将 val 设置为私有变量，然后对 sum 的加法应该是线程收敛的关键部分，例如

```
int i = 0;
int n = 100000000;
double sum = 0.0;
double val = 0.0;
#pragma omp parallel for private(i, val) shared(n) num_threads(nthreads)
for (int i = 0; i < n; ++i)
{
    val += 1;
}
#pragma omp critical
{
    sum += val;
} 
```

我不知道如何为关键部分维护 val 的私有实例。我试过用一个更大的 pragma 来包围整个事情，例如

```
int i = 0;
int n = 100000000;
double sum = 0.0;
double val = 0.0;
#pragma omp parallel private(val) shared(sum)
{
#pragma omp parallel for private(i) shared(n) num_threads(nthreads)
    for (int i = 0; i < n; ++i)
    {
        val += 1;
    }
#pragma omp critical
    {
        sum += val;
    }
} 
```

但我没有得到正确的答案。我应该如何设置编译指示和子句来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T05:06:04.120

你的程序有很多缺陷。让我们看看每个程序（缺陷写成注释）。

程序一

```
int i = 0;
int n = 100000000;
double sum = 0.0;
double val = 0.0;
#pragma omp parallel for private(i, val) shared(n) num_threads(nthreads)
for (int i = 0; i < n; ++i)
{
    val += 1;
}
// At end of this, all the openmp threads die. 
// The reason is the "pragma omp parallel" creates threads, 
// and the scope of those threads were till the end of that for loop. So, the thread dies
// So, there is only one thread (i.e. the main thread) that will enter the critical section
#pragma omp critical
{
    sum += val;
} 
```

方案二

```
int i = 0;
int n = 100000000;
double sum = 0.0;
double val = 0.0;
#pragma omp parallel private(val) shared(sum)
 // pragma omp parallel creates the threads
{
#pragma omp parallel for private(i) shared(n) num_threads(nthreads)
  // There is no need to create another set of threads
  // Note that "pragma omp parallel" always creates threads.
  // Now you have created nested threads which is wrong
    for (int i = 0; i < n; ++i)
    {
        val += 1;
    }
#pragma omp critical
    {
        sum += val;
    }
} 
```

最好的解决方案是

```
int n = 100000000;
double sum = 0.0;
int nThreads = 5;
#pragma omp parallel shared(sum, n) num_threads(nThreads) // Create omp threads, and always declare the shared and private variables here.
// Also declare the maximum number of threads.
// Do note that num_threads(nThreads) doesn't guarantees that the number of omp threads created is nThreads. It just says that maximum number of threads that can be created is nThreads... 
// num_threads actually limits the number of threads that can be created
{
    double val = 0.0;  // val can be declared as local variable (for each thread) 
#pragma omp for nowait       // now pragma for  (here you don't need to create threads, that's why no "omp parallel" )
    // nowait specifies that the threads don't need to wait (for other threads to complete) after for loop, the threads can go ahead and execute the critical section 
    for (int i = 0; i < n; ++i)
    {
        val += 1;
    }
#pragma omp critical
    {
        sum += val;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:43:03.647

您不需要在 OpenMP 中显式指定共享变量，因为默认情况下始终共享外部范围的变量（除非`default(none)`指定了子句）。由于`private`变量具有未定义的初始值，因此您应该在累积循环之前将私有副本归零。循环计数器会自动识别并设为私有 - 无需明确声明它们。此外，由于您只是在更新一个值，因此您应该使用一个`atomic`构造，因为它比完整的关键部分更轻量级。

```
int i = 0;
int n = 100000000;
double sum = 0.0;
double val = 0.0;
#pragma omp parallel private(val)
{
    val = 0.0;
    #pragma omp for num_threads(nthreads)
    for (int i = 0; i < n; ++i)
    {
        val += 1;
    }
    #pragma omp atomic update
    sum += val;
} 
```

该`update`子句已添加到`atomic`OpenMP 3.1 的结构中，因此如果您的编译器符合早期的 OpenMP 版本（例如，如果您使用即使在 VS2012 中也仅支持 OpenMP 2.0 的 MSVC++），则必须删除该`update`子句。由于`val`没有在并行循环之外使用，它可以像 veda 的答案一样在内部范围内声明，然后它自动成为私有变量。

请注意，这`parallel for`是嵌套两个 OpenMP 构造的快捷方式：`parallel`和`for`：

```
#pragma omp parallel for sharing_clauses scheduling_clauses
for (...) {
} 
```

相当于：

```
#pragma omp parallel sharing_clauses
#pragma omp for scheduling_clauses
for (...) {
} 
```

对于其他两个组合结构也是如此：`parallel sections`和`parallel workshare`（仅限 Fortran）

# c++ - 测试cin异常

> ID：12754486
> 
> 赞同：0
> 
> 时间：2012-10-05T21:46:39.543
> 
> 标签：c++, ios, exception, cin

我应该在带有异常（）的程序中测试输入。我已经构建了以下代码，并且可以毫无错误地编译：

```
cin.exceptions(istream::failbit |istream::badbit);
    do
    {
        try
        {
            getline(cin,uppg);
        }
        catch(istream::failure e)
        {
            cerr << "Exception i inläsning";

        }
        ...
     }while(...) 
```

事情是......我不知道如何测试这段代码。我可以写什么类型的输入来获得故障位或坏位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:54:19.870

根据这个（[流的错误状态](http://www.math.hkbu.edu.hk/parallel/pgi/doc/pgC++_lib/stdlibug/err_7848.htm)）故障位在错误的输入序列时生成。例如，您编写如下内容： int n = 0; 辛 >> n; 并输入字符串而不是数字。

```
 int main(void)
    {
        int n = 0;
        cin.exceptions(istream::failbit | istream::badbit);

        try
        {
            cin >> n;
        }
        catch(istream::failure e)
        {
            cerr << "Exception" << endl;

        }
        return 0;
    } 

```

# java - ProJNA 数据类型映射

> ID：12754490
> 
> 赞同：1
> 
> 时间：2012-10-05T21:46:55.627
> 
> 标签：java, jna

以下问题已被修改以缩小问题范围，

我正在尝试使用 JNA 使用来自 Java 的本机 dll。我是 Java 和 JNA 的新手。对于对 dll 导出函数之一的特定调用，它返回无效参数。

这是结构，

PDU_RSC_DATA 是一个引用另一个结构 PDU_PIN_DATA 的结构，

```
typedef struct {
UNUM32 BusTypeId; 
UNUM32 ProtocolId;
UNUM32 NumPinData;
PDU_PIN_DATA *pDLCPinData;
} PDU_RSC_DATA; 
```

这就是 PDU_PIN_DATA 结构的外观，

```
typedef struct {
UNUM32 DLCPinNumber; 
UNUM32 DLCPinTypeId; 
} PDU_PIN_DATA; 
```

对应的JNA Mapping，

```
public class PDU_RSC_DATA extends Structure{ 

public int BusTypeId; 
public int ProtocolId; 
public int NumPinData; 
public Pointer pDLCPinData; 

}

public class PDU_PIN_DATA extends Structure implements Structure.ByReference{

public int DLCPinNumber;
public int DLCPinTypeId;

public PDU_PIN_DATA(){

}

public PDU_PIN_DATA(Pointer ptr_PDU_PIN_DATA) {
    super(ptr_PDU_PIN_DATA);
    read();
}

} 
```

本机方法 -> 为便于阅读而修改，

```
int _methodXYZ(PDU_RSC_DATA* obj); 
```

Java 调用 -> 仅显示所需的片段，

```
PDU_RSC_DATA obj = new PDU_RSC_DATA();
_methodXYZ(obj); 
```

请让我知道 struct* 在结构中的上述映射是否正确。从 DLL 日志中，我注意到**PDU_PIN_DATA pDLCPinData**的值无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:44:10.710

使用`NativeLong`（或`int`在 Windows 上）作为本机`long`类型。Java`long`是 64 位的，这肯定*不是*您想要的。

**编辑** JNA 默认使用结构指针作为函数参数，默认情况下在结构中使用结构指针。为了得到互补的行为，分别使用`Structure.ByValue`和`Structure.ByReference`。

如果您的结构字段是指针，请使用实现的结构版本`Structure.ByReference`。JNA 通常会在本地调用前后自动处理本地内存与 java 字段的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T22:16:42.743

DLL 规范不正确。**PDU_PIN_DATA *pDLCPinData**是指向结构数组的指针，而不是指向结构的指针。这就是technomage的建议起作用的原因。这是我的问题。**再次感谢技术。**

这是我为结构数组赋值的方法，它工作正常。我也修改了问题中的 PDU_RSC_DATA 结构。

```
 PDU_RSC_DATA pRscData = new PDU_RSC_DATA();
    pRscData.BusTypeId = 1;
    pRscData.ProtocolId = 7;
    pRscData.NumPinData = 2; 

    PDU_PIN_DATA pDLCPinData = new PDU_PIN_DATA();

    PDU_PIN_DATA[] pDLCPinDataArray= (PDU_PIN_DATA[])pDLCPinData.toArray(pRscData.NumPinData);

    pDLCPinDataArray[0].DLCPinNumber = 6;
    pDLCPinDataArray[0].DLCPinTypeId = 1;
    pDLCPinDataArray[1].DLCPinNumber = 14;
    pDLCPinDataArray[1].DLCPinTypeId = 2;

    pDLCPinData.autoWrite();

    Pointer ptr_pDLCPinData = pDLCPinData.getPointer();
    pRscData.pDLCPinData = ptr_pDLCPinData; 
```

# .htaccess - 特定 URL 错误重定向到正确的 URL

> ID：12754493
> 
> 赞同：0
> 
> 时间：2012-10-05T21:47:01.393
> 
> 标签：.htaccess, url, rewrite, http-status-code-404

我搜索了数据库并找到了与以下类似的解决方案，但它们似乎不起作用。问题是：我们认为在名片上添加二维码很聪明。

公交卡的智能手机 QR 扫描将带您到以下位置：

www.site_url.com/_brad

这是一个特定的错误（我知道 / 丢失了，应该是 ../_brad/）。

但是你最终会得到一个 404 - 当然。

我可以接受该错误并重定向到：www.site_url.com/_brad/index.html

这是我尝试过的......（不工作）

重写规则 ^(.*)_brad(.*)$ /_brad/index.html

我需要一个 RewriteCond 吗？

感谢您的任何帮助，您可以提供。原谅我的无知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:03:01.313

尝试

```
RewriteEngine On
RewriteRule ^/_brad  /_brad/index.html [R=301] 
```

# c++ - 在不使用标准库和字符串的情况下连接 char*

> ID：12754496
> 
> 赞同：0
> 
> 时间：2012-10-05T21:47:28.867
> 
> 标签：c++, pointers, char

我需要实现一种在不使用任何标准库的情况下将不同字符连接成 char* 的方法（它是规范的一部分）。所以，没有 strcat 或 strcopy。我也不能使用字符串。

这是我尝试做的（字符存储在我自己实现的 StringList 中，因此是“GetCell”方法和 ->next 指针）：

```
 char* IntlFinder::ConcatenateSrc ( int nSource, long beginPosition )
        char* res = new char;
        Cell* cell = ComList.GetCell(beginPosition);
        for (long i = beginPosition; i <= (CountTab[nSource]); i++)
        {
            if (nSource == 0 || cell->elem.source == nSource)
            {
                res[i-beginPosition] = cell->elem.caractere;
            }
            cell = cell->next;
        }

        *res = '\0';
        return res;
    } 
```

当我调试时，这看起来很棒，直到我到达某个字符，然后它无缘无故地出错（它当时指向的单元格看起来很正常，地址有效）。

对此有什么想法吗？

--

编辑：我试图这样做：

```
 for (long i = beginPosition; i <= (CountTab[nSource]-1); i++)
    {
        if (nSource == 0 || cell->elem.source == nSource)
        {
            *res = cell->elem.caractere;
            ++res = new char;
        }
        cell = cell->next;
    } 
```

这应该增加指针并分配内存（所以我可以在下一次迭代中添加另一个值），并且我不再有任何 SIGSERV 错误。但是当我返回这个指针或指针的原始值，指向第一个字符时，我什么也得不到（在第一种情况下）或只得到第一个字符（在第二种情况下）。

我没有忘记在末尾添加 '\0' ，但这仍然不能使它成为一个字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:52:29.737

就像是：

```
char * concat(char dest[], char src[])
{
   int i = 0, j = 0;
   while (dest[i]) ++i;
   while (src[j]) dest[i++] = src[j++];
   dest[i] = '\0';
   return dest;
} 
```

前提是`dest`它足够大，可以同时携带 itelt 和`src`. 否则，这可能会因为超出数组的范围而导致意外结果。

**添加**

```
int main()
{
    char * buf = new char[1 << 30]; // allocate 2^30 = 1e9+ chars (very huge size)
    // you can use char buf[1 << 30];
    // which is faster and not needing to be released manually
    char tmp[] = "First portion";
    char tmp2[] = "Second porition";
    buf[0] = '\0'; // so that concat begins copying at 0
    concat(buf, tmp);
    // buf == "First portion"
    concat(buf, tmp2);
    // buf = "First portionSecond portion"

    ....
    // don't forget to release memory after you have finished
    delete[] buf;
    return 0;
} 
```

# mongodb - 用grails启动mongodb？

> ID：12754503
> 
> 赞同：0
> 
> 时间：2012-10-05T21:47:58.480
> 
> 标签：mongodb, grails, intellij-idea

我正在开发一个使用 mongodb 的 grails 应用程序。

在启动 grails 之前，我启动了 mongod 进程。但老实说，我有点懒，我想在 grails 启动时启动 mongo 而不去终端（我从 intellij 启动 grails）。

有没有办法将它添加到 grails 启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:10:46.017

在 Bootstrap 中执行 OS 命令应该足够了。例如调用`Runtime.getRuntime().exec('/path/to/mongo/mongod')`

# ormlite - 构建 SQL 语句时出错

> ID：12754513
> 
> 赞同：0
> 
> 时间：2012-10-05T21:49:21.783
> 
> 标签：ormlite, query-builder

运行此代码时：

```
note = noteDAO.queryForFirst(
    noteDAO.queryBuilder().where().notIn("id",
        noteStateDAO.queryBuilder().distinct().selectColumns("noteId")
        .prepare())
    .prepare()); 
```

...我有以下例外：

```
Problems executing Android query: SELECT * FROM `notes` WHERE `id` NOT IN 
     (MappedStatement: SELECT DISTINCT `noteId` FROM `note_states`) 
```

`MappedStatement`对那个 SQL中的内容有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:19:16.713

你似乎已经解决了你的问题，但我想我会提供更多信息。

该`Where.notIn(...)`方法采用对象或`QueryBuilder`参数。通过做 a `prepare()`，它把它变成了 a ，不幸 的是，`MappedQuery`它被作为 a 传递了。`Object`

正如您所提到的，如果您删除`prepare()`，它将使用`QueryBuilder`参数。请参阅[.java 文档`notIn(String, QueryBuilder)`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/Where.html#notIn%28java.lang.String,%20com.j256.ormlite.stmt.QueryBuilder%29)。

我在[ORMLite](http://ormlite.com/)版本 4.43 中添加了更好的检查以防止传入准备好的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:07:14.583

好的，自己找的。无需`prepare`内部子选择查询：

```
note = noteDAO.queryForFirst(
    noteDAO.queryBuilder().where().notIn("id",
        noteStateDAO.queryBuilder().distinct().selectColumns("noteId")
        /*.prepare()*/)
    .prepare()); 
```

# c# - 在 XAML 中绑定 UserControl 的 DataContext 不起作用（Windows Phone）

> ID：12754514
> 
> 赞同：1
> 
> 时间：2012-10-05T21:49:22.927
> 
> 标签：c#, silverlight, windows-phone-7, mvvm

当我绑定`DataContext`a`UserControl`时，绑定工作正常。当我调试程序时，我可以看到 的`DataContext`绑定`UserControl`到正确的`ViewModel`. 但是，当我绑定到 中的特定属性（如文本框）时`UserControl`，`ViewModel`某些事情会失败。将正确`UserControl`获取初始值。`ViewModel`如果我有一些默认值为“test”的绑定字符串属性，`UserControl`则会正确显示。但是，没有任何更改会传播回`ViewModel`. 因此，在最初显示“test”的文本框中输入“abcd”不会将其更新`ViewModel`为“abcd”。`ViewModel`错误地包含“测试”字符串。

如果上述内容不清楚或不够具体，请继续。我将使用代码和 XAML 片段来布置我的体系结构。

我有一个聚合其他虚拟机的虚拟机。在此父虚拟机中，子虚拟机作为可绑定属性公开。

```
public class ParentViewModel : ViewModel
{
    #region Binding Properties

    private const string ChildViewModelPropertyName = "ChildViewModel";
    private ChildViewModel childViewModel = new ChildViewModel();
    public ChildViewModel ChildViewModel 
    {
        get { return this.childViewModel ; } 
        set
        {
            if (value == this.childViewModel )
            {
                return;
            }
            this.childViewModel = value;
            RaisePropertyChanged(ChildViewModelPropertyName);
        }
    }

    //... 
} 
```

这`ChildViewModel`是您的典型 VM，它公开了一些其他属性，例如`Strings`我想绑定到文本框或其他属性。

```
public class ChildViewModel : ViewModel
{
    #region Binding Properties

    private const string NamePropertyName = "Name";
    private string name = "";
    public string Name
    {
        get { return this.name; }
        set
        {
            if (value == this.name)
            {
                return;
            }
            this.name = value;
            RaisePropertyChanged(NamePropertyName);
        }
    }

    //...
} 
```

在 XAML 上。第一个 XAML 片段代表整个页面，并且此页面`DataContext`绑定到`ParentViewModel`. 此页面包含一个绑定，`UserControl`该绑定`DataContext`与.`ChildViewModel``ParentViewModel`

```
<phone:PhoneApplicationPage ...>

   <!-- Sets the DataContext for the page. -->
   <phone:PhoneApplicationPage.DataContext>
        <vm:ParentViewModel/>
   </phone:PhoneApplicationPage.DataContext>

   <ScrollViewer>
       <phone:Pivot>
           <phone:PivotItem>
               <!-- ChildView is the UserControl whose DataContext should be bound to ChildViewModel -->
               <view:ChildView DataContext="{Binding ChildViewModel}"/>
           </phone:PivotItem>
       </phone:Pivot>
   </ScrollViewer>

</phone:PhoneApplicationPage> 
```

`ChildView`XAML 非常简单。有一个文本框绑定`Name`到`ChildViewModel`. 为了清楚起见，我没有绑定任何内容`DataContext`，`ChildView`因为它已经绑定在上面的代码段中。

```
<UserControl ... >

    <StackPanel>
        <!-- Binding to the Name property -->
        <TextBox Text="{Binding Name}"/>
    </StackPanel>

</UserControl> 
```

如果有人能告诉我为什么这种方法不起作用，我会支持你的回答并说“谢谢！”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:28:25.237

```
<TextBox Text ="{Binding Name,
                Mode=TwoWay}"/> 
```

将绑定模式设置为`TwoWay`将让`View`更新`ViewModel`。

# c# - 每 4 个循环新表行

> ID：12754516
> 
> 赞同：8
> 
> 时间：2012-10-05T21:49:47.700
> 
> 标签：c#, .net, asp.net-mvc-3, razor

如何在 Razor 视图的每 4 个循环中创建一个新表行？这是为 4 之前的每个数字创建一个新行，然后退出创建新行：

```
 @{
            int i = 0;
         }
         @foreach (var item in ViewBag.ProgramIdList)
         {

          if((i / 4) == 0)
          {
              @:<tr>
          }
          <td>
          <input type="checkbox" name="@item.ProgramId" id="@item.ProgramId" />   
         <label for="@item.ProgramTitle">@item.ProgramTitle</label>
         </td>
        if((i / 4) == 0) 
        {
        @:</tr>
          }
             i++;
         } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-05T21:51:40.697

使用模运算符。为了 ：

```
if((i % 4) == 0)
{
  @:<tr>
} 
```

和

```
if((i % 4) == 3)
{
  @:</tr>
} 
```

如果项目数没有分成偶数行，您将在循环后添加剩余的单元格和结束行标记：

```
if ((i % 4) != 0) {
  while (i % 4) != 0) {
    @:<td></td>
    i++;
  }
  @:</tr>
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-13T14:53:00.567

对于那些讨厌上面答案代码中出现的语法高亮警告的人，有解决方案（机制大致相同）：

```
<table>
    @for (int i = 0; i < ViewBag.MyItems.Count; i++)
    {
        var cells = 4;
        var item = ViewBag.MyItems[i];

        if ((i % cells) == 0)
        {
            @:<tr>
        }

        <td>
            @item.MyTextOrWhatever
        </td>

        if (i == (ViewBag.MyItems.Count - 1))
        {
            while ((i % cells) != 0)
            {
                @:<td></td>
                i++;
            }
        }

        if ((i % cells) == (cells - 1)) // aka: last row cell
        {
            @:</tr>
        }
    }
</table> 
```

每个标签都在正确的位置（`<td>`inside `<tr>`，`<tr>`inside `<table>`），然后您的 Visual Studio 语法荧光笔将使您安心:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-18T12:06:46.203

100％有效的确切解决方案。

```
 @foreach (var item in ViewBag.data)
            {
                var cells = totalCells;

                if ((i % cells) == 0)
                {
                    @:<tr>
                }
                <td>
                    @item.Value
                </td>

                if ((i % cells) == (cells - 1)) // aka: last row cell
                {
                @:</tr>

                }
                i++;
            } 
```

# phpquery - 在一个循环中从 100 个网页中提取数据时遇到问题

> ID：12754520
> 
> 赞同：0
> 
> 时间：2012-10-05T21:50:40.100
> 
> 标签：phpquery, data-extraction

我有点卡住了。我的目标是从一个有几百页的网站中提取数据。它是一个体育网站，我必须提取球队名称和其他相关数据。到目前为止，我已经成功地做到了。我运行了 6-7 页的循环，它的效果非常好。但是当我将循环更改为大约一个月（25）时，它会检索到不完整的数据。例如，如果目的地日期是 10 月 25 日，它可能会在 10 月 10 日至 12 日随机停止。我正在使用`phpQuery`，我的互联网连接为 1MB。请在这件事上指导我，谢谢。

```
include 'phpQueryOneFile.php';

    $fileName = "test.txt";
    $fileHandle = fopen($fileName, 'w') or die("can't open file");

    $team2Arr[] = "" ; // Array that will store all th team2 names, in complete season
    $finalCount2 = 0 ; // counter that is maintained for the $team2Arr, including 'FFF', means this
                       // will hold the atual size of array including 'FFF'
    $totalNumberOfTeam2 = 0; // counter that will contain only the number of teams in total, 
                             // excluding the "FFF", hence the aise of team2Arr - 'FFF's = # of teams

    $team1Arr[] = "" ;  // Array that will store all th team1 names, in complete season  
    $finalCount1 = 0;   // counter that is maintained for the $team1Arr, including 'FFF', means this
                        // will hold the atual size of array including 'FFF'
    $totalNumberOfTeam1 = 0; // counter that will contain only the number of teams in total, 
                             // excluding the "FFF", hence the aise of team1Arr - 'FFF's = # of teams

    $year = '2012' ;
    $month = '10' ;
    $day = '6';

    while($day < 32)
    {
        if($day < 10)
        {
            $day = '0'.$day ; 
        }

        //$doc[] = phpQuery::newDocumentFileHTML('http://www.nba.com/gameline/'.$date.'/');
        phpQuery::newDocumentFileHTML('http://www.nba.com/gameline/'.$year.$month.$day.'/');
        $time1Element[$i] = pq('.nbaFnlStatTxSm');
        $time1[$i] = $time1Element[$i]->html();
        //echo '<h2>This is The Time</h2>';
        //echo '<pre>' . htmlentities($time1[$i]) . '</pre>';
        fwrite($fileHandle, "This is The Time"."\n");
        fwrite($fileHandle, $time1[$i]."\n"."\n");

        $time2Element[$i] = pq('.nbaPreMnStatus .nbaPreStatTx');
        $time2[$i] = $time2Element[$i]->html();
        //echo '<h2>This is The Second Time that is not visible</h2>';
        //echo '<pre>' . htmlentities($time2[$i]) . '</pre>';
        fwrite($fileHandle, "This is Only Time"."\n");
        fwrite($fileHandle, $time2[$i]."\n"."\n");

        $dateElement[$i] = pq('#nbaCalSelectedDate');
        $date[$i] = $dateElement[$i]->html();
        //echo '<pre>' . htmlentities($dateElement[$i]) . '</pre>';
        //echo '<h2>The Date of the match is</h2>';
        //echo '<pre>'.$dateElement[$i].'</pre>';

        fwrite($fileHandle, "The Date of the match is (Proccessed)"."\n");
        fwrite($fileHandle, $date[$i]."\n"."\n");
        fwrite($fileHandle, "The Date of the match is (Not Proccessed)"."\n");
        fwrite($fileHandle, $dateElement[$i]."\n"."\n");

        $team2Element[$i] = pq('.nbaPreMnStatusTeamHm .nbaModTopTeamName');
        $team2[$i] = $team2Element[$i]->html();
        //echo '<h2>The Home Team is </h2>';
        //echo '<pre>' . htmlentities($team2[$i]). '</pre>';
        fwrite($fileHandle, "The Home Team is "."\n");
        fwrite($fileHandle, $team2[$i]."\n"."\n");
        //here we split the data
        //get the lenght of the string 
        echo ("The lenght of arrays is = ".strlen($team2[$i]));
        //loop till 3

        $out2 = ""; // String of lenght 3 that will pick and store 3 char and put in team2Arr
        $threeCount = 0; // counter that is represents the second dimenssion of array, 
                         // i.e character in string and number of strings are stored in array
        $teamNumber = 1; // counter that is represents that team number of particular day

        $numberOfTeams = strlen($team2[$i]) / 3; // this calutate the numberOfTeams on one day
        echo ("<br / >"."team number = ".$numberOfTeams."<br />");
        for($j=0 ; $j<$numberOfTeams ; $j++)
        {
            echo '<br />'."Team".$teamNumber." is : ";
            //here we extract pair of 3 character 
            for($k=0 ; $k<3 ; $k++)
            {
                $out2 .= $team2[$i][$threeCount]; 
                $threeCount++;
            }
            echo $out2."\n";
            $team2Arr[$finalCount2] .= $out2;
            fwrite($fileHandle, $out2."\n");
            $teamNumber++;
            $finalCount2++;
            $totalNumberOfTeam2++;
            $out2 = "";
        }
        $team2Arr[$finalCount2] = "FFF";
        $finalCount2++;

        $team1Element[$i] = pq('.nbaPreMnStatusTeamAw .nbaModTopTeamName');
        $team1[$i] = $team1Element[$i]->html();
        //echo '<h2>The Away Team is </h2>';
        //echo '<pre>' . htmlentities($team1[$i]). '</pre>';
        fwrite($fileHandle, "The Away Team is "."\n");
        fwrite($fileHandle, $team1[$i]."\n"."\n");
        echo ("\n"."The lenght of arrays is = ".strlen($team1[$i]));
        //here we split the data
        //get the lenght of the string 

        //loop till 3
        $out1 = "";      // String of lenght 3 that will pick and store 3 char and put in team1Arr
        $threeCount = 0; // REINITIALIZED counter that is represents the second dimenssion of array, 
                         // i.e character in string and number of strings are stored in array 
        $teamNumber = 1; // REINITIALIZED counter that is represents that team number of particular day

        $numberOfTeams = strlen($team1[$i]) / 3;
        echo "<br />";
        echo ("team number = ".$numberOfTeams."<br />");
        for($j=0 ; $j<$numberOfTeams ; $j++)
        {
            echo "<br />"."Team".$teamNumber." is : ";
            //here we extract pair of 3 character 
            for($k=0 ; $k<3 ; $k++)
            {
                $out1 .= $team1[$i][$threeCount]; 
                $threeCount++;
            }
            echo $out1;
            $team1Arr[$finalCount1] .= $out1;
            fwrite($fileHandle, $out1."\n");
            $teamNumber++;
            $finalCount1++;
            $totalNumberOfTeam1++;
            $out1 = "";
        }
        $team1Arr[$finalCount1] = "FFF";
        $finalCount1++;
        $day = $day + 1 ;
        $i++;

    }
    fwrite($fileHandle, $team2Arr);
    fwrite($fileHandle, $team1Arr);

    fclose($fileHandle);
    echo "<br />"."number is iteratin : ".$i; 
```

# java - eclipse中add方法的正确实现

> ID：12754523
> 
> 赞同：-1
> 
> 时间：2012-10-05T21:50:52.623
> 
> 标签：java, arrays, eclipse, string, split

我正在尝试在这里使用 SharedPreferences 做一个教程[Simple Multiple Selection Checkboxes](http://appfulcrum.com/2010/09/12/listview-example-3-simple-multiple-selection-checkboxes/)它似乎我的所有其他代码都很好，但我收到一条参数不适用的错误消息。我猜在本教程中他们正在尝试向数组添加一些值。这是我尝试过的，但我仍然得到一个错误。

```
private void LoadSelections() {
    // if the selections were previously saved load them

    SharedPreferences settingsActivity = getPreferences(MODE_PRIVATE);

    if (settingsActivity.contains(SETTING_TODOLIST)) {
        String savedItems = settingsActivity
                .getString(SETTING_TODOLIST, "");

        this.selectedItems.addAll(Arrays.asList(savedItems.split(",")));
        int count = this.mainListView.getAdapter().getCount();

        for (int i = 0; i < count; i++) {
            String currentItem = (String) this.mainListView.getAdapter()
                    .getItem(i);
            if (this.selectedItems.contains(currentItem)) {
                this.mainListView.setItemChecked(i, true);
            }

        }

    }
}

    private ArrayList<string> PrepareListFromXml() {
    ArrayList<string> cheeseItems = new ArrayList<string>();
    XmlResourceParser ingredientsXML = getResources().getXml(R.xml.ingredients);

    int eventType = -1;
    while (eventType != XmlResourceParser.END_DOCUMENT) {
        if (eventType == XmlResourceParser.START_TAG) {

            String strNode = ingredientsXML.getName();
            if (strNode.equals("item")) {

                cheeseItems.add(ingredientsXML.getAttributeValue(null,"title"));

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:27:10.497

您正在混合您的类型，`R.string`与 Java 的`String`类型不同。

[`getAttributeValue(String, String)`](http://www.androidjavadoc.com/2.3/org/xmlpull/v1/XmlPullParser.html#getAttributeValue%28java.lang.String,%20java.lang.String%29)解析器对象上的方法返回`String`您尝试将其放入采用另一种类型的通用列表中的类型的对象。

所以你可以做两件事：

1.  将列表的泛型类型更改为`ArrayList<String>`，并将方法的签名更改`PrepareListFromXml`为返回该类型。

2.  `String`在将其添加到`R.string`列表之前，您需要进行转换。

# domain-driven-design - DDD：数据应该在哪里进行转换、格式化、加密等？

> ID：12754524
> 
> 赞同：6
> 
> 时间：2012-10-05T21:50:54.183
> 
> 标签：domain-driven-design, data-transfer-objects

对于未来的项目，我决定使用 dto 将数据传递到域层。这也是我进行大部分数据验证的地方。

我应该把数据格式放在哪里？

1）在 DTO 中准备好发送到域层
或
2）在基础设施层中，就在它被持久化之前？
或
3) 其他地方:)

ie ：在保存之前需要加密的密码，或者在存储之前需要转换、调整大小等的图像。

我想将所有数据格式保存在一层，不喜欢它分散在所有地方。

换句话说：是否应该为域准备数据来处理它，或者域应该获取原始数据并在域处理后更改它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T00:32:22.150

数据格式化是一个技术问题，因此它应该由基础设施服务处理，而不是由域处理。例如，密码散列应该由保存相应聚合的存储库处理。格式化也可能发生在DTO 通常驻留的[六边形架构中的适配器中。](http://alistair.cockburn.us/Hexagonal+architecture)这种类型的格式取决于手头的适配器类型。例如，您可以将公开域模型的 RESTful API 视为 HTTP 和域模型之间的适配器。在这种情况下，必须在资源表示和相应的域对象之间执行格式化或转换。

# java - 在 Java 中对 Radix64 字符执行按位运算

> ID：12754526
> 
> 赞同：1
> 
> 时间：2012-10-05T21:51:05.530
> 
> 标签：java, cryptography

我有一个 Radix64 字符的字符串：

```
HR5nYD8xGrw 
```

我需要能够对该字符串中的位执行按位运算，但保留 Radix64 编码。例如，如果我进行左移，让它丢弃溢出位，并留在 Radix64 的字符集中，而不是变成一些随机的 ASCII 字符。除了手动将它们转换为二进制并编写我自己需要的所有运算符的版本之外，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:53:00.410

您只需将它们转换为纯数字，对它们应用移位并转换回“base64”。

将位运算符应用于以 10 为底的数字并没有什么不同，您不使用字符串，而是使用与字符串相对应的数字，然后将其打印回字符串。

```
9 << 1 == 18 
```

但是`"9"`并`"18"`没有真正与字符串相关...

# php - PHP 在 XML 中增加价值

> ID：12754529
> 
> 赞同：-1
> 
> 时间：2012-10-05T21:51:24.990
> 
> 标签：php, xml

我试图完成的是增加 XML 的创建和增加价值。

代码：

```
 // CONNECT TO DATABASE
    $SQL = "SELECT * FROM ads ORDER BY id DESC";
    $result = mysql_query($SQL);

    // OPEN XML
    $_xml = "<?xml version='1.0' encoding='UTF-8' ?>\n";
    $_xml .="<ADS>\n";

    while ($db_field = mysql_fetch_assoc($result)) {

    $_xml .=" <AD>\n";
    $_xml .="   <ID><![CDATA[" . $counter . "]]></ID>\n";
    $_xml .="   <TITLE><![CDATA[" . $db_field['title'] . "]]></TITLE>\n";
    $_xml .="   <DESCRIPTION><![CDATA[" . $db_field['description'] . "]]></DESCRIPTION>\n";
    $_xml .="   <EMAIL><![CDATA[" . $db_field['email'] . "]]></EMAIL>\n";
    $_xml .="   <PHONE><![CDATA[" . $db_field['phone'] . "]]></PHONE>\n";
    $_xml .="   <ADDRESS><![CDATA[" . $db_field['address'] . "]]></ADDRESS>\n";
    $_xml .="   <ZIP_CODE><![CDATA[" . $zipcode . "]]></ZIP_CODE>\n";
    $_xml .="   <LOCATION_COUNTRY><![CDATA[" . $country . "]]></LOCATION_COUNTRY>\n";
    $_xml .="   <LOCATION_STATE><![CDATA[" . $state . "]]></LOCATION_STATE>\n";
    $_xml .="   <LOCATION_CITY><![CDATA[" . $city . "]]></LOCATION_CITY>\n";
    $_xml .="   <CATEGORY><![CDATA[" . $db_field['category'] . "]]></CATEGORY>\n";
    $_xml .="   <BEDROOMS>" . $db_field['bedrooms'] . "</BEDROOMS>\n";
    $_xml .="   <BATHROOMS>" . $db_field['bathrooms'] . "</BATHROOMS>\n";
    $_xml .="   <PETS>" . $db_field['pets'] . "</PETS>\n";
    $_xml .="   <BROKERFEE>" . $broker . "</BROKERFEE>\n";
    $_xml .="   <SURFACE>" . $db_field['surface'] . "</SURFACE>\n";
    $_xml .="   <IMAGE_URL><![CDATA[" . $db_field['image_url'] . "]]></IMAGE_URL>\n";
    $_xml .="   <IMAGE_URL><![CDATA[http://www.path to image]]></IMAGE_URL>\n";
    $_xml .="   <PRICE>" . $db_field['price'] . "</PRICE>\n";
    $_xml .="   <CURRENCY>" . $currency . "</CURRENCY>\n";
    $_xml .=" </AD>\n";
    } 

    // CLOSE XML
    $_xml .="</ADS>";

    // ECHO XML DATA
    echo $_xml; 
```

我希望“$counter”提供一个值为 1 的值，并且对于每个额外的结果，它应该为 1。不是我的杯具，在这方面完全是菜鸟。我可以从 mysql 数据库中获取一个值，但要求第一项应该以值 1 开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:54:44.423

替换`$counter`为`++$counter`。

# php - 选择一列是“val”，然后是“aaa”，然后是“ccc”的条目

> ID：12754544
> 
> 赞同：0
> 
> 时间：2012-10-05T21:52:31.067
> 
> 标签：php, mysql, sql, select

如何按一列对条目进行排序（比如说命名`column13`）。首先应该`column13`是“val”的条目，然后是“aaa”，然后是“ccc”。我不能使用`GROUP BY column13 ASC`或类似的。是否可以在不编写 3 个查询的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T21:55:04.857

使用`FIELD()`MySQL 中可用的构造：

```
SELECT       stuff
    FROM     table
    WHERE    condition
    ORDER BY FIELD(column13, 'val', 'aaa', 'ccc') 
```

# batch-file - 尝试将非典型命令行参数保存在变量批处理文件中

> ID：12754550
> 
> 赞同：1
> 
> 时间：2012-10-05T21:53:17.517
> 
> 标签：batch-file

想知道如何获取批处理文件命令行参数，如下所示并将它们存储在变量中 -

```
file.bat /* */ # /* /* */ # 
```

我试过这个，我得到了其中有斜线的文件名。我单独尝试了哈希（#），它工作正常，但不是带有斜杠的。我能以某种方式逃脱它们吗？

回复下面的答案-这是不工作的部分-

```
SETLOCAL ENABLEDELAYEDEXPANSION
set count=1
FOR %%i in (%*) do (
set var!count!=%%i
set /a count=!count!+1
) 
```

下面的答案解决了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:17:42.443

好的，我通过查看您上一个问题中已删除的帖子找到了您的[问题](https://stackoverflow.com/q/12739725/1012053)。在您删除的回复（应该是对您的问题的评论或编辑）中，您说：

> 谢谢大家，效果很好，虽然我只是看到了一些我没想到的东西。看起来我在不想更改的命令行部分有编号 1,2 和 3。我只需要以这种方式更改命令行参数 3 到 26，所以我会处理它。
> 
> 另一个注意事项是我使用这种方法是因为我尝试将 /*、*/ 和 # 直接放在命令行中，而我得到的返回变量是我计算机中的一些文件名。我猜反斜杠以某种方式被解释为文件名。
> 
> 有没有办法直接在命令行中使用 /*、*/ 和 # 并将它们正确地作为变量引入？如果不是，我将继续使用我的编号方法。

查看该问题中的代码，我发现您正在尝试通过 FOR 循环迭代参数。只要没有任何参数包含`*`or ，它就可以很好地工作`?`。不幸的是，没有办法逃避这些字符以获得您想要的结果。

我知道的唯一好的解决方案是使用带有 SHIFT 的 GOTO 循环来迭代您的参数。

```
@echo off
setlocal

set n=0
:parseArgs
set /a n+=1
(set arg%n%=%1)
if defined arg%n% (
  shift /1
  goto :parseArgs
)

::display the parsed arguments
set arg 
```

# php - for循环最佳实践

> ID：12754552
> 
> 赞同：6
> 
> 时间：2012-10-05T21:54:01.377
> 
> 标签：php

据我所知，第二个和第三个表达式每次都在 for 循环中执行。

我总是理所当然地认为性能明智的第二个选择是推荐的，有人可以证实这一点吗？

1)`for($i=0;$i<=dosomething();$i++) [...]`

2)

```
 $max = dosomething();
 for($i=0;$i<=$max;$i++) [...] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:24:37.820

您不应该在循环定义中调用函数，因为该函数将在每次迭代时执行。当您只有一个小循环时，效果可以忽略不计，但是如果您有数百或数千次迭代的循环，您肯定会注意到。

但即使你只有一个小循环，这也是不好的做法。所以一句话：不要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T22:05:34.767

除非您的 dosomething() 函数返回不同的值并且可以一次性完成，否则最好使用第二种方法。

$options = 数组（1,2,3,4,5）；$element_count = count($options);

像 count() 这样在多次调用中返回相同值的函数可以保存在一个变量中，并在 for 循环中使用。

如果您对性能非常严格，请使用 ++$i 而不是 $i++

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T21:58:34.273

第二种方法总是会更好地执行，特别是如果在 doSomething() 中有大量工作要做。如果你只做几十个循环，而 doSomething() 只是返回一个局部变量，那么它不会产生明显的差异。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-05T21:55:54.857

是的，我确认您可以根据需要搜索基准。

虽然我不知道这是否是真的，如果它只是一个对象的吸气剂

# javascript - JQuery UI 选项卡 - IE9 的 CSS 样式

> ID：12754553
> 
> 赞同：1
> 
> 时间：2012-10-05T21:54:15.957
> 
> 标签：javascript, jquery-ui, internet-explorer

我希望 css 大师能够帮助我缩小与 JQuery UI 选项卡的 IE 渲染相关的可能问题。在 Firefox 和 Chrome 中，我的标签呈现如下：

![在 Firefox 中呈现的选项卡](../Images/ae6a718bb47a2942eaa63e250e594daa.png)

Internet Explorer 9 中的渲染非常糟糕：

![在此处输入图像描述](../Images/4f83d7a7062641228b846fe3b8bd4050.png)

地图和字段选项卡的大小不再适合屏幕左侧的父容器，并且选项卡标题适合父容器的整个宽度。此外，许多 JQuery UI 事件不再触发，例如当我从窗格中单击按钮时。我没有从 IE 开发人员控制台中收到任何错误消息，所以我有点不知道为什么会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:55:35.047

发现了问题。嵌套在我的 jQuery UI 选项卡中的是几个在加载时隐藏的 jQuery UI 对话框。当它们在 Chrome 和 Firefox 中加载时，它们的尺寸会被忽略，并且 jQuery UI 会正确呈现其余包含的元素。在 Internet Explorer 9.0.8112.16421 中，这些元素的高度被合并到选项卡视图中，因此其他元素的大小调整不正确，尽管有任何元素样式。

将这些元素移到选项卡容器之外可以解决问题。

# java - 如何将所有用户安装的应用程序加载到gridview并使其在android中可点击

> ID：12754556
> 
> 赞同：0
> 
> 时间：2012-10-05T21:54:21.580
> 
> 标签：java, android, gridview

我正在制作一个 android 启动器，我需要知道如何将所有应用程序加载到 gridview 中。我希望像计算器这样的系统东西也能显示出来。我怎样才能做到这一点？我已经搜索了很长时间没有任何解决方案。请帮助我，非常感谢！

Java代码：

```
package com.mysoftware.mysoftwareos.launcher;

import java.util.List;

import android.app.Activity;
import android.app.ActivityManager;
import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.GridView;
import android.widget.LinearLayout;

public class AllAppsActivity extends Activity {
LinearLayout allappsLayout;
GridView allappsGridView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.allapps_screen);

    //Import views
    allappsLayout = (LinearLayout)findViewById(R.id.allappsLayout);
    allappsGridView = (GridView)findViewById(R.id.allappsGridView);

    //Setup animation for the main layout
    Animation a = AnimationUtils.loadAnimation(this, R.anim.fadeout);
    a.reset();
    allappsLayout.clearAnimation();
    allappsLayout.startAnimation(a);

    //Load all apps into the apptray
}
} 
```

我的xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/allappsLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/wallpaper"
android:orientation="vertical" >

<GridView
    android:id="@+id/allappsGridView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:numColumns="3" >

</GridView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:59:38.787

ADW.Launcher 是一个开源的安卓启动器...

浏览：[http ://code.google.com/p/adw-launcher-android/](http://code.google.com/p/adw-launcher-android/)

# cocos2d-iphone - cocos2d-x中如何给ipad/hd设置后缀名？

> ID：12754557
> 
> 赞同：0
> 
> 时间：2012-10-05T21:54:23.667
> 
> 标签：cocos2d-iphone, cocos2d-x

刚开始学习cocos2d-x，但是在cocos2d-iphone中没有找到以下代码对应的cocos2d-x API：

CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils]; [sharedFileUtils setEnableFallbackSuffixes:NO]; // 默认值：否。不会使用后备后缀 [sharedFileUtils setiPhoneRetinaDisplaySuffix:"-hd"]; // iPhone RetinaDisplay 默认为 "-hd" [sharedFileUtils setiPadSuffix:"-ipad"]; // iPad 上的默认值为 "ipad" [sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"]; // iPad RetinaDisplay 默认为“-ipadhd”

那么如何在 cocos2d-x 中自定义后缀名呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:11:09.267

从 2.0.2 版本开始，您应该针对文件名中的后缀使用不同设备的目录。您可以[在此处](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Mechanism_of_loading_resources)和 cocos2dx 示例中查看详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:00:03.690

您还可以在 CCFileUtils 中找到一个名为 setiPadSuffix 的方法（以及您上面提到的所有方法）来设置后缀。

# html - 单选按钮上 Tooltip 的 CSS 自定义

> ID：12754561
> 
> 赞同：1
> 
> 时间：2012-10-05T21:55:02.167
> 
> 标签：html, css, radio-button, tooltip, tipsy

所以我有这个html代码：

```
<label class="selection-confirm" title="some long tool-tip text goes here"><input type="radio" name="options" value="1" class="required selection-confirm" > Option1</label> 
```

所以这是我尝试的css：

```
.selection-confirm:hover {
    background-color:#FC0107;
} 
```

但这只是突出了选择。但我想自定义工具提示框本身。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:55:59.020

您无法设置工具提示的样式。您可以使用 content 属性结合 attr 表达式（？）制作类似于 CSS 的工具提示：http: [//jsfiddle.net/mjC7D/](http://jsfiddle.net/mjC7D/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:16:17.063

您可以使用 jQuery 创建自定义工具提示，如下所示

```
<label class="selection-confirm" title="some long tool-tip text goes here"><input type="radio" name="options" value="1" class="required selection-confirm" > Option1</label>​

#tooltip{
    border-radius:5px;
    border:thin black solid;
    background:red;
    color:white;
    width:200px;
    height:auto;
}​

$('.selection-confirm').mouseover(function(e) {
         var tip = $(this).attr('title');    
        $(this).attr('title','');
        $(this).append('<div id="tooltip"><div class="tipHeader"></div><div class="tipBody">' + tip + '</div><div class="tipFooter"></div></div>');     
        $('#tooltip').css('top', e.pageY + 10 );
        $('#tooltip').css('left', e.pageX + 20 );
        $('#tooltip').fadeIn('500');
        $('#tooltip').fadeTo('10',0.8);

    }).mousemove(function(e) {
        $('#tooltip').css('top', e.pageY + 10 );
        $('#tooltip').css('left', e.pageX + 20 );

    }).mouseout(function() {
        $(this).attr('title',$('.tipBody').html());
        $(this).children('div#tooltip').remove();
     });​ 
```

[jsFiddle](http://jsfiddle.net/afshinprofe/xbtsv/)

# ruby-on-rails - Ruby：将哈希插入数组？

> ID：12754563
> 
> 赞同：6
> 
> 时间：2012-10-05T21:55:05.540
> 
> 标签：ruby-on-rails, ruby

我正在尝试按照以下示例将哈希插入数组中：[如何在 ruby​​ 中制作动态多维数组？](https://stackoverflow.com/questions/1234108/how-to-make-dynamic-multi-dimensional-array-in-ruby). 什么地方出了错？

```
@array = Array.new
test1 = {"key1" => "value1"}
test2 = {"key2" => "value2"}
test3 = {"key3" => "value3"}            
@array.push(0)
@array[0] << test1
# ERROR: can't convert Hash into Integer    
@array[0] << test2    
@array.push(1)
@array[1] << test2
@array[1] << test3 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T22:04:33.497

`<<`附加到数组，与 相同`push`，所以只需执行以下操作：

```
@array << test1 
```

或者，如果您想覆盖特定元素，请说`0`：

```
@array[0] = test1 
```

* * *

或者你真的想要一个二维数组，这样`@array[0][0]["key1"] == "value1"`吗？在这种情况下，您需要先将空数组插入到正确的位置，然后再尝试追加它们：

```
@array[0] = []
@array[0] << test1
@array[0] << test2    
@array[1] = []
@array[1] << test2
@array[1] << test3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T22:09:54.083

有很多方法可以插入到 Ruby 数组对象中。这里有一些方法。

```
1.9.3p194 :006 > array = []
 => [] 
1.9.3p194 :007 > array << "a"
 => ["a"] 
1.9.3p194 :008 > array[1] = "b"
 => "b" 
1.9.3p194 :009 > array.push("c")
 => ["a", "b", "c"] 
1.9.3p194 :010 > array_2 = ["d"]
 => ["d"] 
1.9.3p194 :011 > array = array + array_2
 => ["a", "b", "c", "d"] 
1.9.3p194 :012 > array_3 = ["e"]
 => ["e"] 
1.9.3p194 :013 > array.concat(array_3)
 => ["a", "b", "c", "d", "e"] 
1.9.3p194 :014 > array.insert("f")
 => ["a", "b", "c", "d", "e"] 
1.9.3p194 :015 > array.insert(-1,"f")
 => ["a", "b", "c", "d", "e", "f"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T22:09:24.710

`@array[0] << test1`在这种情况下，表示，这是通过哈希`0 << { "key1" => "value1" }`进行位移的尝试。`0`Ruby 无法将散列转换为整数来实现这一点，这就是您收到该错误消息的原因。

# java - Xperia 手机不进入 AsyncTask 的 doInbackground()

> ID：12754565
> 
> 赞同：0
> 
> 时间：2012-10-05T21:55:13.537
> 
> 标签：java, android, android-asynctask, android-sdk-2.3

我正在测试我创建的一个库文件（一个 jar 文件）。在这个库中，我使用了一个异步任务。我主要用motorola Atrix 2.3.6 测试它。不过我也用三星nexus S和Galaxy平板电脑测试过，一切正常。

但是，我已经在 Xperia 2.3.7 上尝试过，当我调试时，我进入了我的 Asynctask 的 PreExecute()，但它甚至从未进入 doInBackground()。但是，我在主要活动中还有第二个异步任务。（不是从罐子里）。这在 Xperia 上可以正常工作。

没有错误日志，因为没有报告错误，它只是永远不会到达那里。

需要注意的是，这是一部植根手机，其中一些部件是从另一部手机交换的。这可能与它有关..但我不明白如何。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:06:31.093

我有点想通了这个问题。由于某种原因，代码永远无法断点。不知道为什么。但是代码仍在执行中，所以我能够继续前进。手机实际上有一些进一步的兼容性问题，导致我看到的其他问题引发了我的问题。

# configuration - 如何在不更改食谱的情况下使用 chef_solo 设置 vagrant

> ID：12754566
> 
> 赞同：2
> 
> 时间：2012-10-05T21:55:21.830
> 
> 标签：configuration, apache2, chef-infra, vagrant

我正在与[vagrant](http://vagrantup.com)和[chef-solo 合作](http://vagrantup.com/v1/docs/provisioners/chef_solo.html)，到目前为止效果非常好。我确实有一个用于 chef-solo 食谱的公共目录，因为我希望能够从他们的[git 存储库](https://github.com/opscode-cookbooks)中简单地克隆一个 opscode 食谱，然后能够提取更新。为了做到这一点，我希望尽可能保持食谱完整，以便快速转发任何更新。

opscode 的食谱很容易`module.json = {}`通过`Vagrantfile`. 但是，有些选项是不可配置的，例如设置`AllowOverride None`-Setting 或类似的能力。

因此，我希望能够覆盖后续目录中的文件，类似于覆盖 OOP 中的函数。示例：apache2 的说明书包含 apache2/templates/default/default-site.erb 中的默认站点模板，并带有上述 -Option`AllowOverride None`集。在 ProjectA 中，我将有一个 default-site.erb 使用 ProjectA 的项目特定设置覆盖全局模板，而 ProjectB 没有这样的文件，因此将使用全局模板。

有没有人正在运行这样的设置或关于如何实现这个或类似的良好设置的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T11:10:47.617

大厨 Solo 支持`site-cookbooks`。要使其与 vagrant 一起使用，您需要手动设置它。这就是我在我的`Vagrantfile`

```
chef.cookbooks_path = ["kitchen/cookbooks", "kitchen/site-cookbooks"] 
```

所以里面的任何东西`site-cookbooks`都会覆盖`cookbooks`. 例如，`kitchen/site-cookbooks/apache2/templates/default/default-site.erb`将用于代替`kitchen/cookbooks/apache2/templates/default/default-site.erb`.

# apache-flex - Flash Builder 4.6 在调试或发布运行时总是显示空白 html 页面

> ID：12754571
> 
> 赞同：0
> 
> 时间：2012-10-05T21:55:52.250
> 
> 标签：apache-flex, flash-builder, flex4.6, flashbuilder4

我在使用 Flash Builder 4.6 高级版时遇到问题。我正在使用 4.6 flex sdk 并创建一个 Web 应用程序。要测试我的开发环境，我只需添加：

```
<s:Label text="TEST" x="10" y="10"/> 
```

在 mxml 文件的 Application 标记之间。当我切换到设计模式时，我可以看到我的 TEST 标签。但是，如果运行调试或发布测试（作为 Web 应用程序），我总是以空白页结束。我什至尝试从我认为是好的代码的书中导入示例代码。这太奇怪了，因为我一直在使用这个程序没有问题这么久，然后突然就这样了。我为此花了一整天的时间。

请帮忙！谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T08:48:46.133

右键项目名称->属性->选择“Flex编译器”->

有一个标签“附加编译器参数”，在该标签下方的文本框中输入“-use-network=false”。

->好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:37:06.067

遇到同样的问题，Chrome 的问题是我的默认浏览器。在 flash builder 首选项中，您可以定义调试时使用的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:12:48.590

项目 -> 清理

并检查您是否在默认浏览器上运行 Flash Player 的调试版本。

# javascript - jQuery 虚拟键盘和向下滑动

> ID：12754575
> 
> 赞同：0
> 
> 时间：2012-10-05T21:56:06.893
> 
> 标签：javascript, jquery, css

我使用jQuery虚拟键盘，但是当我点击密码字段几次键盘向下滑动时发现问题，我检查了css并没有找到解决方案。有人有想法吗？

这是链接：

[http://www.devcurry.com/2010/12/jquery-virtual-keyboard-with-qwerty.html](http://www.devcurry.com/2010/12/jquery-virtual-keyboard-with-qwerty.html)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:21:08.007

我试过在这个小提琴中使用它，它可以工作[http://jsfiddle.net/TUAHC/](http://jsfiddle.net/TUAHC/)。主要区别在于我使用了最新版本的 jQuery 1.8.2，而不是您发布的演示中使用的 1.4.4 版本。升级 jQuery 版本似乎可以解决这个问题。

**编辑**

插件中使用的 jQuery UI Position 实用程序似乎存在问题，每次文本输入聚焦时都会调用该实用程序，并且它似乎仅在父元素上有填充/边距时才表现出来。修复它的一种方法是修改插件并将插件的定位代码移到焦点事件处理程序之外。所以找到这段代码（在插件 js 文件的第 141 行附近）：

```
element.focus(function() {
  var element = jQuery(this)
  jQuery('.ui-keyboard').hide();
  previewInput.val(element.val());

  keyboard.position({
    of: element,
    my: "left top",
    at: "left top",
    collision: "fit",
  }).show();

  previewInput.scrollTop(previewInput.attr('scrollHeight')).focus();
}); 
```

并将代码更改为：

```
keyboard.position({
  of: element,
  my: "left top",
  at: "left top",
  collision: "fit",
});

element.focus(function() {
  var element = jQuery(this)
  jQuery('.ui-keyboard').hide();
  previewInput.val(element.val());

  keyboard.show();

  previewInput.scrollTop(previewInput.attr('scrollHeight')).focus();
}); 
```

这似乎在我的测试[http://jsfiddle.net/TUAHC/2/](http://jsfiddle.net/TUAHC/2/)中起到了作用。

# c# - 为登录用户创建 ASP.Net MVC 的控制器逻辑

> ID：12754576
> 
> 赞同：0
> 
> 时间：2012-10-05T21:56:09.237
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我有以下型号：

```
public class Expense
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    [Column(TypeName = "Money")]
    public decimal Limit { get; set; }
    [Required]
    [ForeignKey("UserProfile")]
    public int UserProfileId { get; set; }
    [Required]
    public virtual UserProfile UserProfile { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public virtual ICollection<Expense> Expenses { get; set; }
} 
```

我有一个登录用户，我希望该用户能够添加新的费用。创建控制器操作如下所示：

```
 //
    // GET: /Expenses/Create

    public ActionResult Create()
    {

        return View();
    }

    //
    // POST: /Expenses/Create

    [HttpPost]
    public ActionResult Create(Expense expense)
    {            
        if (ModelState.IsValid)
        {
            UserProfile user = db.UserProfiles.Single(u => u.UserName == User.Identity.Name)
            user.Expenses.Add(expense);                
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(expense);
    } 
```

有观点：

```
@model MoneyDrainPlug.Models.Expense

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Expense</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Limit)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Limit)
            @Html.ValidationMessageFor(model => model.Limit)
        </div>        
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

当帖子发生时，控制器中的 ModelState.IsValid 为 false。这是因为费用中没有设置 UserProfileId。如果我在调用 ModelState.IsValid 之前设置了 UserProfile 和\或 UserProfileId，这将无济于事。

处理此问题的正确和安全方法是什么？我当然不应该相信从客户端发送的 UserProfileId 吗？

万一这很重要，我使用的是 asp.net MVC 4。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:16:44.210

可能的解决方案

删除`Required`属性`UserProfileId`（DataAnnotation 仅与视图相关：如果您不希望视图中有某些内容，请不要将其标记为`Required`：`RequiredAttribute`不是数据库约束）

或者

删除`UserProfileId`财产（你`UserProfile`有财产，这可能就足够了）

或者

创建一个`ViewModel`没有`UserProfileId`属性

编辑：要清楚：您可以完美地使用 ViewModel。请注意，必需的属性与您的数据库没有直接关系。如果您不`Expense`直接在视图中使用该类，则可以删除 中的所有`Required`属性`Expense`，它们将永远不会被使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:17:42.963

一方面，您应该确保这些页面只能由授权用户访问（在需要用户登录的控制器中的每个方法上方添加 [Authorize]）

实际上有几种方法可以做到这一点：

一种是**隐藏字段**，其名称为 UserProfileId 和登录用户 ID 的值。这将是最不安全的方法，因为 ID 将从客户端发布到服务器，因此它可以由客户端操作。

我注意到这些字段具有必需的注释，因此要么**删除 [Required] 以使其验证**，要么创建具有所有这些属性**的新视图模型**，而无需 UserProfileId（显然您不包含虚拟属性，因为它不需要在此案子）。

结果会是这样的：

```
public class ExpenseModel
{
    [Required]
    public string Name { get; set; }
    [Required]
    public decimal Limit { get; set; }
    public int UserProfileId { get; set; }
} 
```

最后，您更改视图期望的模型：

```
@model MoneyDrainPlug.Models.ExpenseModel 
```

以及控制器期望在发布后收到的模型：

```
[Authorize]
[HttpPost]
    public ActionResult Create(ExpenseModel expense)
    {            
        if (ModelState.IsValid)
        {
            UserProfile user = db.UserProfiles.Single(u => u.UserName == User.Identity.Name)
            _expense = new Expense() { Name = expense.Name, Limit = expense.Limit, UserProfile = user };
            user.Expenses.Add(_expense);                
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(expense);
    } 
```

# iphone - 使用来自字典数组的数据填充 Tapku 日历

> ID：12754581
> 
> 赞同：0
> 
> 时间：2012-10-05T21:56:24.853
> 
> 标签：iphone, objective-c, ios, ios5, cocos2d-iphone

我有一个充满与作业对象相对应的字典的数组。每个字典都有一个名为 Date 的条目，其中包含一个 NSDate！每个字典还有一个标题条目，其中包含一个 NSString 我想使用 TAPKU 日历在下面的表格视图中显示标题字符串，如果用户点击日期并且当天有作业到期！我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:26:51.043

Tapku 日历有一个方法

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {}` 
```

其中“d”是点击的日期。有了这个日期，你可以做任何事情。在实现日历的课堂上使用它。

我的示例，我使用来自数组的数据更改按钮的标题，其中包含很多日期的文本：

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
    [self setEditButtonTitle:d];
}

- (void)setEditButtonTitle : (NSDate*) d{
    for (int i=0; i<[array count]; i++) {
        if (/*  compare if NSDate from my array is equal to "d" */){
            [editButton setTitle:[array objectAtIndex:i] forState:UIControlStateNormal];
        }
    }
} 
```

部分作业我不明白:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:46:18.887

最后，更新的 Tapku 演示项目提供了我需要的确切答案！ [https://github.com/devinross/tapkulibrary](https://github.com/devinross/tapkulibrary)

# java - 如何从字符串的开头删除空格？

> ID：12754582
> 
> 赞同：8
> 
> 时间：2012-10-05T21:56:24.710
> 
> 标签：java, whitespace, trim

如何在 Java 中从字符串的开头删除空格而不从末尾删除？

如果值为：

```
String temp = "    hi    " 
```

那么我怎样才能只删除前导空白，所以它看起来像这样：

```
String temp = "hi    " 
```

我目前的实现是循环遍历，检查第一个字符并创建一个子字符串，直到达到第一个非空白值。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T21:59:20.857

你可以使用：

```
temp = temp.replaceFirst("^\\s*", "") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T21:59:50.373

您可以使用 Commons-lang StringUtils [stripStart](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#stripStart%28java.lang.String,%20java.lang.String%29)方法。

如果您传递 null ，它将自动修剪空格。

```
StringUtils.stripStart(temp, null); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-30T23:55:39.343

你`JDK11`可以使用[stripLeading](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#stripLeading())：

```
String result = temp.stripLeading(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T22:06:06.283

可能接近建议的 Commons-lang StringUtils.stripStart() 方法的实现：

```
public static String trimFront(String input) {
    if (input == null) return input;
    for (int i = 0; i < input.length(); i++) {
        if (!Character.isWhitespace(input.charAt(i)))
            return input.substring(i);
    }
    return "";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-30T18:08:31.570

公然从[java2s](http://www.java2s.com/Code/Java/Data-Type/Removeleadingwhitespacefromastring.htm)复制：

```
text = text.replaceAll("^\\s+", ""); 
```

...并使用`@Reimus`'s answer修改：

```
text = text.replaceFirst("^\\s+", ""); 
```

我不确定最有效的方法；fwiw，我选择了`@Reimus`原版。

# php - Mongodb 也选择了我的“where”

> ID：12754583
> 
> 赞同：1
> 
> 时间：2012-10-05T21:56:28.863
> 
> 标签：php, mongodb

我有这个查询

```
$collection->find(array('_id' => new MongoId($gameid)), array('players' => 1)); 
```

从这个结构中选择

```
var gameSchema = new Schema({
  name : String,
  map : String,
  mode : String,
  playerLimit : Number,
  players : [Player],
  isActive : Boolean
}); 
```

它确实有效，它选择了选定游戏中的所有玩家。但由于某种原因，它也返回_id。

```
 Array
 (
[_id] => MongoId Object
    (
        [$id] => 506f3c93e0b4791a86000001
    )

[players] => Array
    (
        [0] => Array
            (
                [hero] => Neal, the demon
                [state] => in lobby
                [name] => Test Spiller
            )

    )

) 
```

这迫使我使用两个循环，我怎样才能让它看起来像

```
 array(
        [0] => Array
            (
                [hero] => Neal, the demon
                [state] => in lobby
                [name] => Test Spiller
            )

    ) 
```

穿越。

```
$collection = new MongoCollection($db, 'games');
$trav = $collection->find(array('_id' => new MongoId($gameid)), array('players' => 1));
foreach($trav as $player) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:36:15.603

根据我的经验，所有驱动程序在选择字段时总是返回 _id。它也不能直接选择一个子文档——所以你需要把它拔出来。

这样的事情应该会有所帮助：

```
function array_pluck($key, $input) { 
  if (is_array($key) || !is_array($input)) return array(); 
  $array = array(); 
  foreach($input as $v) { 
      if(array_key_exists($key, $v)) $array[]=$v[$key]; 
  } 
  return $array; 
} 
```

那么你可以这样做：

```
foreach(array_pluck("players",$trav) as $player){
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:23:17.027

除非您明确排除它，否则您通常会将 _id 作为 MongoDB 查询的一部分返回。我不熟悉 PHP 语法，但看起来你可以尝试添加`_id => 0`

# python - Matplotlib：一张图像上的两个数据集

> ID：12754584
> 
> 赞同：3
> 
> 时间：2012-10-05T21:56:32.903
> 
> 标签：python, arrays, numpy, matplotlib

我正在尝试在一个图形上绘制两个数据集。本质上，这是用于跟踪二维孔隙空间中的流体。

两个数据集都是 250x250 `numpy array`，第一个数据范围为 0 到 1，第二个数据范围为 2 到 3。第一个是跟踪某个位置的流体量，因此 0 表示 0% 流体，0.35 表示35% 流体等。类似地，第二个阵列将有 2.00 表示 0%，2.35 表示 35%，3.00 表示 100%，等等。

单独绘制它们非常容易，并且根据阵列中某个位置的流体百分比，您可以获得很好的阴影效果。

**我想要做的是**使用 Blues 将两个图像与第一个数据集绘制在同一个图上（这样 0 是白色，1 是蓝色，中间的数据根据​​蓝色颜色图着色），然后绘制第二个数据在此之上使用绿色设置（因此 2 将是白色，3 将是绿色，并且中间的数据根据​​绿色颜色图进行着色）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T01:02:01.877

```
from matplotlib import pyplot
import numpy
x = numpy.arange(10)
y = x
z = -x
pyplot.plot(x, y)
pyplot.plot(x, z)  # pyplot.plot(x, y, x, z) works too.

pyplot.show() 
```

您只需在调用 show 之前绘制所有内容，它就会显示在同一张图像上。

您也可以同时使用 imshow、scatter 等。

# python - python编码正则表达式问题

> ID：12754585
> 
> 赞同：0
> 
> 时间：2012-10-05T21:56:40.283
> 
> 标签：python, regex, google-app-engine

我正在尝试从页面中获取这一行：

```
 $ 55 326 
```

我制作了这个正则表达式来获取数字：

```
 player_info['salary'] = re.compile(r'\$ \d{0,3} \d{1,3}') 
```

当我得到文本时，我使用 bs4 并且文本的类型为“unicode”

```
 for a in soup_ntr.find_all('div', id='playerbox'):
       player_box_text = a.get_text()
       print(type(player_box_text)) 
```

我似乎无法得到结果。我也尝试过像这样的正则表达式

```
 player_info['salary'] = re.compile(ur'\$ \d{0,3} \d{1,3}')
    player_info['salary'] = re.compile(ur'\$ \d{0,3} \d{1,3}', re.UNICODE) 
```

但我无法找到获取数据。我正在阅读的页面有这个标题：

```
 Content-Type: text/html; charset=utf-8 
```

希望得到一些帮助来弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:03:31.167

`re.compile`不匹配任何东西。它只是创建正则表达式的编译版本。

你想要这样的东西：

```
matchObj = re.match(r'\$ (\d{0,3}) (\d{1,3})', player_box_text)
player_info['salary'] = matchObj.group(1) + matchObj.group(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:02:40.637

这是掌握正则表达式的好网站。 [http://txt2re.com/](http://txt2re.com/index-python.php3?s=%24%2055%20326&2&1)

```
#!/usr/bin/python
# URL that generated this code:
# http://txt2re.com/index-python.php3?s=$%2055%20326&2&1

import re

txt='$ 55 326' 
re1='.*?'   # Non-greedy match on filler
re2='(\\d+)'    # Integer Number 1
re3='.*?'   # Non-greedy match on filler
re4='(\\d+)'    # Integer Number 2

rg = re.compile(re1+re2+re3+re4,re.IGNORECASE|re.DOTALL)
m = rg.search(txt)
if m:
    int1=m.group(1)
    int2=m.group(2)
    print "("+int1+")"+"("+int2+")"+"\n" 
```

# objective-c - 为什么我可以将字符串定义为@"this is" @"one string"？

> ID：12754586
> 
> 赞同：0
> 
> 时间：2012-10-05T21:56:42.623
> 
> 标签：objective-c

这似乎是一个完全有效的程序：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[]) {

    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

    NSString* hey = @"hey"
    @"there";
    NSLog(@"%@",hey);

    [pool drain];
    return 0;
} 
```

在 llvm gcc 和 apple llvm 中编译它不会显示任何警告或错误。为什么？似乎应该警告这一点，因为我只能认为这是引起混乱的。尤其是在这样的情况下：

```
NSArray* a = [NSArray arrayWithObjects:@"one",
              @"two,
              @"three
              @"four",
              nil]; 
```

你会期待四个条目......但没有！棘手，是吗？是因为您可能希望将字符串定义拆分为多行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:09:52.970

它是 Objective-C 中多行字符串的语法。

我无法明确回答为什么语言设计者会这样设计它，但我们可以假设他们希望 Objective-C 字符串的语法类似于 C 字符串的语法。

也就是说，在 C 中，您可以对多行​​字符串执行以下操作：

```
char *my_string = "Line 1 "
                  "Line 2"; 
```

在 Objective-C 中，您可以对多行​​字符串执行以下操作：

```
NSString *my_string = @"Line1 "
                      @"Line2"; // The @ on this line is optional. 
```

（代码片段改编自[https://stackoverflow.com/a/797351/25295](https://stackoverflow.com/a/797351/25295)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:07:25.367

> 是因为您可能希望将字符串定义拆分为多行吗？

是的。当您想要拆分非常长的字符串以更好地阅读代码时，它很有用，即在`NSLocalizedString`关键描述中。

# sql - 三个连接表的查询计数

> ID：12754587
> 
> 赞同：0
> 
> 时间：2012-10-05T21:56:52.077
> 
> 标签：sql

我整个下午都在想办法解决这个问题。我什至不确定当前的数据库结构是否可行。我已经尝试了以下语句，但它没有返回我需要的内容。下面语句的问题是它只返回 projectType 如果它存在。如果 projectType 不存在，我需要返回零。任何帮助深表感谢。

```
SELECT r.region, ISNULL(o.totalcount,0) AS TotalCount, o.projectType
  FROM region r 
  LEFT JOIN (
    SELECT COUNT(o2.id) AS TotalCount, o2.regionID, t2.projectType
      FROM projects o2 
      RIGHT JOIN projectTypes t2 on o2.typeID = t2.id
      GROUP BY o2.regionId, t2.projectType
  ) o ON r.id = o.regionId
  ORDER by r.Region 
```

```
地区：
-------------------------
编号 | 地区 |
-------------------------
1 | 东 |
-------------------------
2 | 中西部 |
-------------------------
3 | 西 |
-------------------------

项目类型：
-------------------------
编号 | 项目类型 |
-------------------------
1 | 网页设计 |
-------------------------
2 | 数据库 |
-------------------------
3 | 发展 |
-------------------------

项目：
-------------------------------------------------- ----------------------
编号 | 项目名称 | 地区ID | 项目类型ID | 发表于 |
-------------------------------------------------- ----------------------
1 | 项目 1 | 1 | 2 | 2012-09-02 |
-------------------------------------------------- ----------------------
2 | 项目 2 | 2 | 2 | 2012-09-02 |
-------------------------------------------------- ----------------------
3 | 项目 3 | 1 | 1 | 2012-09-02 |
-------------------------------------------------- ----------------------
4 | 项目 4 | 3 | 2 | 2012-09-02 |
-------------------------------------------------- ----------------------
5 | 项目 5 | 3 | 1 | 2012-10-02 |
-------------------------------------------------- ----------------------
6 | 项目 6 | 3 | 2 | 2012-10-02 |
-------------------------------------------------- ----------------------
7 | 项目 7 | 3 | 3 | 2012-10-02 |
-------------------------------------------------- ----------------------
8 | 项目 8 | 2 | 3 | 2012-10-02 |
-------------------------------------------------- ----------------------
9 | 项目 9 | 1 | 2 | 2012-10-02 |
-------------------------------------------------- ----------------------
10 | 项目 10 | 1 | 2 | 2012-10-02 |
-------------------------------------------------- ----------------------

期望的结果：
-----------------------------------------
地区 | 项目类型 | 总数 |
-----------------------------------------
东 | 网页设计 | 1 |
-----------------------------------------
东 | 数据库 | 3 |
-----------------------------------------
东 | 发展 | 0 |
-----------------------------------------
中西部 | 网页设计 | 0 |
-----------------------------------------
中西部 | 数据库 | 2 |
-----------------------------------------
中西部 | 发展 | 1 |
-----------------------------------------
西 | 网页设计 | 1 |
-----------------------------------------
西 | 数据库 | 2 |
-----------------------------------------
西 | 发展 | 1 |
-----------------------------------------

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:22:14.970

[http://sqlfiddle.com/#!3/6680f/1](http://sqlfiddle.com/#!3/6680f/1)

```
SELECT r.region
  , pt.projectType 
  , count(p.id)
FROM region r cross join ProjectTypes pt

  left join projects p on p.regionID = r.id and pt.id = p.TypeID

group by r.region, pt.projectType
order by r.region 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:21:21.020

为什么不

```
SELECT regions.region, projectTypes.projectType,
       (SELECT count(*) FROM projects
        WHERE projects.typeID = projectTypes.id
          AND projects.regionID = regions.id) as totalCount
FROM regions, projectTypes 
```

# emulation - 索尼智能手表模拟器：入门

> ID：12754590
> 
> 赞同：2
> 
> 时间：2012-10-05T21:57:15.850
> 
> 标签：emulation, sony-smartwatch

我下载了索尼最新的 SDK，其中包括一个不寻常的模拟器，它是一个在 Android 手机上运行的 APK（我想这就是你用它所做的）。

无论如何，我没有看到有关如何将其用于`test/deploy`应用程序的文档。

我应该有两部手机，一部运行模拟器，另一部运行“主机应用程序”，还是我在同一部手机上运行主机应用程序还是什么？

我在文档中找不到任何东西来解释这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:02:02.837

所以我已经想通了（有点）。您在手机上运行模拟器，然后在手机上运行 Smart Extension 应用程序（因此没有蓝牙连接，就像您拥有真正的智能手表时一样）。

手机还需要安装 SmartConnect（以前的 LiveWare）应用程序和 SmartWatch 应用程序（我认为）。这是三个应用程序（模拟器、SmartConnect、SmartWatch 应用程序）。

无论如何，我的实际智能手表在我发布原始问题后不久就收到了邮件，所以我可能不会再使用模拟器了。

# d - std.complex 设计背后的原因是什么？

> ID：12754591
> 
> 赞同：2
> 
> 时间：2012-10-05T21:57:20.410
> 
> 标签：d, phobos

```
unittest
{
  immutable float a = 1.1, b = 1.2;
  auto c1 = complex(a,b);
  auto r1 = c1 + c1;  //  error, not mutable
} 
```

这意味着我可以拥有`Complex!(immutable float)`，但我永远不能将它的`opBinary`功能用于`Complex!(immutable float)`. 那么，为什么 std.complex 会以这种方式实现呢？

这里是`opBinary`. 它调用`opOpAssign`，它不适用于`immutable`，因此出现错误。

```
Complex!(CommonType!(T,R)) opBinary(string op, R)(Complex!R z) const
{
    alias typeof(return) C;
    auto w = C(this.re, this.im);
    return w.opOpAssign!(op)(z);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:38:52.997

我会说这是一个错误。当然，如果它不是一个错误，那么它就是一个糟糕的设计。但是查看代码`opOpAssign`以及其中有多少，我的猜测是他们试图避免代码重复并且忘记考虑到他们正在做的事情不适用于`immutable`. 我建议您将[其报告为错误](http://d.puremagic.com/issues)。

# javascript - 使用未知数量的子级 underscore.js 遍历数组

> ID：12754593
> 
> 赞同：1
> 
> 时间：2012-10-05T21:57:52.997
> 
> 标签：javascript, arrays, underscore.js

我有一个这样的对象数组：

```
[{
name: "Peter",
childs: [{
    name: "John",
    childs: [{
        name: "Joseph",
        childs: []
    }]
}]
},
{
    name: "Carl",
    childs: [{
        name: "Sam",
        childs: []
    }]
}] 
```

每个人都可以有孩子，每个孩子都可以有任意数量的孩子，依此类推。有谁知道执行此操作的好方法`underscore.js`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:02:11.823

似乎您在问如何进行树遍历，但不是 underscore.js 独有的。您可以通过这种方式进行深度优先遍历：

```
var children = [{name: "Peter", childs: [...]}, ...]
function traverseAndPrint(tree) {
    for (var i = 0; i < tree.length; i++) {
        console.log(tree[i].name);
        traverseAndPrint(tree[i].childs);
    }
} 
```

如果您需要对每个元素执行任意操作，您可以执行以下操作：

```
function traverseAndCallFunction(tree, functionToCall) {
    for (var i = 0; i < tree.length; i++) {
        functionToCall(tree[i]);
        traverseAndPrint(tree[i].childs);
    }
} 
```

哪里`functionToCall`是一个接受子对象的函数（根据你的例子）

我不明白你为什么需要 underscore.js 来进行树遍​​历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:05:47.453

抱歉，我不知道下划线的具体含义，但似乎一个简单的递归函数对您来说已经足够简单了。

```
var data = [{ 
   name: "Peter",
   childs: [{
       name: "John",
       childs: [{
           name: "Joseph",
           childs: []
       }]
   }, { 
       name: "Carl",
       childs: [{
           name: "Sam",
           childs: []
       }]
   }]
}];

function trav(data, fn) {
    data.forEach(function(item) {
        for (var p in item)
            if (p === "childs")
                trav(item[p], fn);
            else
                fn(item[p], p);
    });
}

trav(data, function(val, prop) {
    console.log(prop, val);
}); 
```

# node.js - 在多个 NPM 包之间共享一个 Mongoose 实例

> ID：12754604
> 
> 赞同：9
> 
> 时间：2012-10-05T22:00:04.867
> 
> 标签：node.js, express, mongoose, npm

为了将现有的大型 Node+Express+Mongoose 应用程序模块化为多个可挂载应用程序，每个应用程序都作为单独的 NPM 包开发，我们想知道在它们之间共享单个 Mongoose 实例是否是个好主意？

假设我们有一套 NPM 包，每个包都包含客户端资产、Mongoose 模型和一个用 Express 实现的 REST-API。它们确实有一些共同的特征，但本质上被认为是单独的可重复使用的人工制品。一个主机应用程序，也是基于 Express 的，将这些安装在各种根 URI 下：

```
var discussions = require('discussions'),
    tickets     = require('tickets'),
    events      = require('events'),
    express     = require('express'),
    app         = express();

var environment = { ...see below... };

...

app.use('/events-api', events(environment));
app.use('/tickets-api', tickets(environment));
app.use('/discussions-api', discussions(environment)); 
```

现在，由于`events`,`tickets`和`discussions`应用程序（通过主机拉入的单独 NPM 包`package.json`）使用 Mongoose，主机应用程序本身也是如此，我们认为我们将通过某种`environment`对象传递主机 Mongoose 实例，该对象还包括主机的其他内容想与已安装的应用程序共享。

您是否发现这种方法有任何明显的缺陷？在这种情况下，挂载的应用程序**不会**将 Mongoose 指定为它们各自的依赖项`package.json`，并且它们**不会** `require('mongoose')` 像往常那样做，而是从负责将其连接到 MongoDB 的主机获取 Mongoose 实例。

如果这是一个坏主意，并且您建议每个子应用程序自己声明对 Mongoose 的依赖项，那么每个 NPM 包都会获得自己的 Mongoose 副本，并且每个都必须连接到 MongoDB，对吗？

一些背景资料：

*   我们确实希望将应用程序包含在主机应用程序中，在单个进程中运行，而不是拥有多个 Node 实例。主机包含用于身份验证和其他事情的中间件。
*   我们确实希望将应用程序作为单独开发的 NPM 包作为我们构建的各种主机应用程序的版本依赖项包含在内，而不是仅仅将它们的源代码复制到主机应用程序。
*   我们意识到在多个挂载的应用程序之间重用同一个 Mongoose 实例将使它们共享同一个模型命名空间。

**编辑：**为了澄清包结构毕竟已经被`npm install`编辑：

```
host/
  assets/
  models/
  routes/
  node_modules/
    express/ ...
    mongoose/ ...
    events/
      assets/ ...
      models/ ...
      routes/ ...
    tickets/
      assets/ ...
      models/ ...
      routes/ ...
    discussions/
      assets/ ...
      models/ ...
      routes/ ... 
```

也就是说`events`，`tickets`、 和`discussions`应用程序不包含它们自己的 Mongoose（或 Express），而是设计为依赖于提供这些依赖项的始终存在的主机应用程序。

我们在这里假设像 NPM 包这样的 NPM 包`tickets`不能简单地 `require`来自父级，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T22:28:59.873

如果你想在其他 NPM 包之间重用你的 Mongoose 包，最好的方法是在顶级应用程序中安装共享包，然后使用它来初始化其他 NPM 包。

在顶层：

```
var db = require('myMongooseDb'),
    events = require('events')(db),
    ... 
```

然后你的事件包只需要导出一个以 db 作为参数的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T10:15:03.010

我建议你看看[https://github.com/jaredhanson/node-parent-require](https://github.com/jaredhanson/node-parent-require)，这是一个最近发布的包，它为我解决了这个问题。

Github 项目页面上的[node-parent-require 自述文件](https://github.com/jaredhanson/node-parent-require/blob/master/README.md)提供了使用 mongoose 的详细演练。

基本上，您需要挖掘您的子模块并替换它：

```
mongoose = require("mongoose"); 
```

... 有了这个：

```
try {
  var mongoose = require('mongoose');
} catch (_) {
  // workaround when `npm link`'ed for development
  var prequire = require('parent-require')
    , mongoose = prequire('mongoose');
} 
```

不要忘记在子模块的 package.json 中添加 mongoose 作为 peerDependency。例如：

```
"peerDependencies": {
  "mongoose": "3.x"
} 
```

您可能还想先阅读[http://blog.nodejs.org/2013/02/07/peer-dependencies/](http://blog.nodejs.org/2013/02/07/peer-dependencies/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-04T19:01:49.463

```
const mongoose = require('mongoose-global')(); 
```

您可以只需要一个全局 mongoose 实例并在任何地方使用它。

[https://www.npmjs.com/package/mongoose-global](https://www.npmjs.com/package/mongoose-global)

# sql - Oracle SQL Developer：如果存在更新则插入缺少右括号编译器错误

> ID：12754611
> 
> 赞同：4
> 
> 时间：2012-10-05T22:00:45.183
> 
> 标签：sql, oracle, compiler-errors, oracle-sqldeveloper

我一直在尝试在 Oracle 的 SQL Developer 中编写一个 SQL 查询，如果它存在则更新一行，如果不存在则插入一个。除了主键 (UNITOFMEASURE_USERID)，还有三列：UNITOFMEASUREID、USERID 和 ACTIVE。UNITOFMEASUREID 和 USERID 的组合有一个独特的约束，因此对于每个值组合都有一行或 0。我一直在尝试两种不同的 SQL 安排，它们都返回一个类似的编译错误，抱怨缺少右括号. 这是我尝试过的： 第一种安排：

```
UPDATE NORSEMEN.UNITOFMEASURE_USER SET (ACTIVE=1) WHERE UNITOFMEASUREID=:unitOfMeasureId AND USERID=:userId
IF @@ROWCOUNT=0
    INSERT INTO NORSEMEN.UNITOFMEASURE_USER (UNITOFMEASUREID, USERID) VALUES (:unitOfMeasureId, :userId) 
```

第一次安排的 SQL Developer 错误响应：

```
Error at Command Line:1 Column:46
Error report:
SQL Error: ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis"
*Cause:    
*Action: 
```

第二种安排：

```
IF EXISTS (SELECT * FROM NORSEMEN.UNITOFMEASURE_USER WHERE UNITOFMEASUREID=:unitOfMeasureId AND USERID=:userId)
    UPDATE NORSEMEN.UNITOFMEASURE_USER SET (ACTIVE = 1) UNITOFMEASUREID=:unitOfMeasureId AND USERID=:userId
ELSE
    INSERT INTO NORSEMEN.UNITOFMEASURE_USER (UNITOFMEASUREID, USERID) VALUES (:unitOfMeasureId, :userId) 
```

第二种安排的 SQL Developer 错误响应：

```
Error at Command Line:2 Column:47
Error report:
SQL Error: ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis"
*Cause:    
*Action: 
```

我无法弄清楚为什么 SQL Developer 认为缺少括号。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T22:27:03.260

在您的情况下，如果记录匹配条件为真，则需要使用任何程序处理来更新`active`表的列，或者如果不是，则插入新记录。[您可以使用merge](http://docs.oracle.com/cd/E11882_01/server.112/e10592/statements_9016.htm)在单个语句中执行此操作。

```
merge 
 into unitofmeasure_user
using dual
  on (
      unitofmeasureid = :unitOfMeasureId AND 
      userid = :userId
     )
when matched 
then update 
        set active = 1
when not matched
then insert (unitofmeasureid, userid) 
       values (:unitOfMeasureId, :userId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:07:24.363

你有一个语法错误，会给你确切的错误信息；

```
UPDATE NORSEMEN.UNITOFMEASURE_USER SET (ACTIVE=1) WHERE ... 
```

应该

```
UPDATE NORSEMEN.UNITOFMEASURE_USER SET ACTIVE=1 WHERE ... 
```

在第二种安排中，您还缺少一个`WHERE`.

# objective-c - Objective-C - UIBarButtonItem 崩溃，奇怪的崩溃日志

> ID：12754612
> 
> 赞同：0
> 
> 时间：2012-10-05T22:00:46.893
> 
> 标签：objective-c

我有一个崩溃的 UIBarButtonItem，但我不知道发生了什么。它不会在调试器上产生任何错误，它的崩溃日志也没有象征某些部分。这是崩溃日志：

```
Last Exception Backtrace:
0   CoreFoundation                  0x354ba88f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x37861259 objc_exception_throw + 33
2   CoreFoundation                  0x354ba789 +[NSException raise:format:] + 1
3   Foundation                      0x34fa23ff -[NSAssertionHandler handleFailureInFunction:file:lineNumber:description:] + 87
4   Exame_iPhone                    0x000b9029 0x4b000 + 450601
5   Exame_iPhone                    0x000b9071 0x4b000 + 450673
6   Exame_iPhone                    0x0010a60d 0x4b000 + 783885
7   Exame_iPhone                    0x0010aa7b 0x4b000 + 785019
8   Exame_iPhone                    0x00069ff3 0x4b000 + 126963
9   CoreFoundation                  0x354143fd -[NSObject performSelector:withObject:withObject:] + 53
10  UIKit                           0x32f09e07 -[UIApplication sendAction:to:from:forEvent:] + 63
11  UIKit                           0x32fcf5e7 -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 119
12  CoreFoundation                  0x354143fd -[NSObject performSelector:withObject:withObject:] + 53
13  UIKit                           0x32f09e07 -[UIApplication sendAction:to:from:forEvent:] + 63
14  UIKit                           0x32f09dc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31
15  UIKit                           0x32f09da1 -[UIControl sendAction:to:forEvent:] + 45
16  UIKit                           0x32f09b11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 493
17  UIKit                           0x32f0a449 -[UIControl touchesEnded:withEvent:] + 477
18  UIKit                           0x32f0892b -[UIWindow _sendTouchesForEvent:] + 319
19  UIKit                           0x32f08319 -[UIWindow sendEvent:] + 381
20  UIKit                           0x32eee695 -[UIApplication sendEvent:] + 357
21  UIKit                           0x32eedf3b _UIApplicationHandleEvent + 5827
22  GraphicsServices                0x370ad22b PurpleEventCallback + 883
23  CoreFoundation                  0x3548e523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 39
24  CoreFoundation                  0x3548e4c5 __CFRunLoopDoSource1 + 141
25  CoreFoundation                  0x3548d313 __CFRunLoopRun + 1371
26  CoreFoundation                  0x354104a5 CFRunLoopRunSpecific + 301
27  CoreFoundation                  0x3541036d CFRunLoopRunInMode + 105
28  GraphicsServices                0x370ac439 GSEventRunModal + 137
29  UIKit                           0x32f1ccd5 UIApplicationMain + 1081
30  Exame_iPhone                    0x0004c23b 0x4b000 + 4667
31  Exame_iPhone                    0x0004c1e0 0x4b000 + 4576

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x35d7032c __pthread_kill + 8
1   libsystem_c.dylib               0x328bc208 pthread_kill + 48
2   libsystem_c.dylib               0x328b5298 abort + 88
3   libc++abi.dylib                 0x35872f64 abort_message + 40
4   libc++abi.dylib                 0x35870346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x37861350 _objc_terminate + 140
6   libc++abi.dylib                 0x358703be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x3587044a std::terminate() + 14
8   libc++abi.dylib                 0x3587181e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x378612a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x35410506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x35410366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x370ac432 GSEventRunModal + 130
13  UIKit                           0x32f1ccce UIApplicationMain + 1074
14  Exame_iPhone                    0x0004c234 0x4b000 + 4660
15  Exame_iPhone                    0x0004c1d8 0x4b000 + 4568 
```

有人知道发生了什么吗？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:06:56.843

断言在非符号行中失败，可能在您自己的方法中。在按钮方法的开头设置断点并逐步执行直到崩溃。

# html - favicon 不会出现在 chrome 中，但会出现在 IE、Firefox 等其他浏览器中

> ID：12754613
> 
> 赞同：7
> 
> 时间：2012-10-05T22:00:50.083
> 
> 标签：html, google-chrome, favicon

我有html：

```
<link rel="shortcut icon" href="/images/favicon_muse_me.ico"> 
```

在我的网站 Muse Me ( [http://www.musememobile.com](http://www.musememobile.com) ) 上，如果我用 Chrome 打开它，图标将不会显示。它显示在其他浏览器中。

该图标之前出现在 Chrome 中，但后来我更改了它。

我应该怎么做才能让它显示在 Chrome 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:43:49.247

将 ICO 文件作为“favicon.ico”添加到根目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:38:57.863

一些浏览器会忽略 favicon 元标记，只查找 /favicon.ico。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T19:20:52.640

Chrome 不支持动画网站图标，而且看起来没有人有兴趣实现它。

原始错误报告：[http ://code.google.com/p/chromium/issues/detail?id=19731](http://code.google.com/p/chromium/issues/detail?id=19731)

最新副本：[http ://code.google.com/p/chromium/issues/detail?id=130062](http://code.google.com/p/chromium/issues/detail?id=130062)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T22:05:07.173

如果你为你的链接声明一个“类型”呢？此外，您还可以尝试使用简单的“图标”。
试试这个：

```
<link rel="icon" href="/images/favicon_muse_me.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/images/favicon_muse_me.ico" type="image/x-icon" /> 
```

您也可以尝试将域附加到图像 src：

```
<link rel="icon" href="http://www.musememobile.com/images/favicon_muse_me.ico" type="image/x-icon" />
<link rel="shortcut icon" href="http://www.musememobile.com/images/favicon_muse_me.ico" type="image/x-icon" /> 
```

**更新**
您也可以尝试为您的 favicon 使用 png （显然需要一个 png 版本来执行此操作）。这是我在自己的网站上采用的方法，在 Chrome 中看起来不错：

```
<link rel="icon" type="image/png" href="/images/favicon_muse_me.png" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-06T23:12:27.310

确保它在`<head>`标签中。这是页面的……“元”信息。

```
<head>
<link href="//domain.com/favicon.png" rel="icon" type="image/x-icon">
</head> 
```

我尝试了其他选项，但这对我来说在 Chrome 中有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-29T20:21:56.010

我一直在使用的是 URI，你可以在[https://websemantics.uk/tools/image-to-data-uri-converter](https://websemantics.uk/tools/image-to-data-uri-converter)找到，然后把它放在 atrabute 中`href`。

例如，这是一个有效的 URI 一个 favicon

```
<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAADQpJREFUeJzt3XusFdUVx/HvhctT8XURUWwFERSt1rco0ic+0NgWq7FWSVqjNeo/rbWpLWm1iTW2GrVpm2hMrCGK9Q9rlZr6bLXV+qBWrShaVFRArCKIioDAvf1jXSyvs889M3vPmpnz+yQrJJywz2Jm7zOzZ/YDRERERERERERERERERERERERERERERERERERERERERERERERERERERKqqwzuBmukEBgMDe6MDWNUbaxzzkozUQPpuIDAB2AcYDYwB9gBGAF3AcGCbwL/vxhrKh8ASYCGwqPfPhcA8YC5qSKWiBrJ1ncCBwFHAROCzwPjev09pHfAi8CzwDPAo8CSwPvH3SgNqIP+3LzAVOA6YBAz1TecT7wMPAw8CDwDP+6Yj7aIDOBK4BngN6KlIzAd+Duwf/YiIAGOBy4HX8a/seeMF4KfA7lGPkLSd/sCp2G1KN/4VO3asBW4HvhjrgEl7GAZcSLVuofLGXOAcYED+wyd1tT1wKfAe/hXWKxYAZ5P+yZtUyFBgBrAM/wpalngF+BZ2myltqgOYjr14866QZY2nscfX0mYOBh7HvwJWIbqBmcDITEdaKmUIcCX29tm74lUtVgAXoBfFtXU08DL+Fa3qcR8wqsVjLyXWCVyGrhoxYznwzVZOgpTTHtjAPe8KVde4hfKMP5MWHQssxb8S1T2eBfbs4zmRkvgRNtzbu/K0SyzDRjRLyQ0AbsK/wrRjrAcuanqGxM0OwF/wryjtHlehR8GlMwKbTeddORQWM9F4rtIYhU059a4Uik3jbuzFrDjaHRtY510ZFFuPe4FBDc+eJDUSeAn/SqAIx11onknhurBJPt4nX9G3uA0NnS/MYGxpG++Trmgtbtzayawjz1+CDuBW9FKqig7CFrh7xDuROrsC/19CRfboBqZtcVYlilPxP8GK/LESm7BWWx5vSffDZgBu6/DdEt9ibJnWpd6JpNCv4O8biq3fpMZRH6OwMXO1VHQn/bfY0HWpl/HYGsKPeydSZdPwv2dWpIs1wCHUTFF9kOHY/hfDC/o+8TEf2ypilXcisRR1i3UDcERB3yV+urA69aB3IlVyAv6Xf0VxsRa7itRC6luswdit1ejE3yPlMgfbmavbO5G8Ut9iXQycnPg7pHxGYXPbn/BOJK+UV5BR2BD20MaWUl/LsM2K3vNOJI+UV5BrUce8nQ3B6tf93onkkeoKMg7re2jeQHtbDewNvOGdSFaphppcghqH2EOay7yTyCPFFWQ8dvUoepyXSCPXAd/F3va3JMVyLt9HjUPKYSVwLrbucCaxryA7Y/ebgyOXK9KqecAp2FbZmcX+pT8fNQ7xNws4jJyNA+JeQfpj2y1rU3vxsgbra1wXq8CYfZATUOMQPwuwqdxPxSw05i3WORHLEmnFbGxufNTGAfFusbqAt9Aix1K864HzsJHE0cW6gpyMGof4OAP4SqrCYzWQ0yKVI9KqbYE7sJ3Iootxi7UT8DYaWiL+bgbOJsMb80ZiXEGORY1DyuFM4CFgl1gFxmggUyOUIRLLRGy78ANjFJb3FqsDWELEFisSyUpgOtY/ySzvFWQf1DiknLbBVvGckaeQvA1kUs5/L5JSBzYf5RYyjhHM++5CDUSyepoKrAyf9wqiOeeS1WeowKageRrIEGz2oEgWA4D9vZNoJk8D2Q+9/5B8ojyKTSlPAyl965fSK/0SpXkayN7RspB2ta93As3kaSCjYyUhbWuCdwLNqIGIp12p8XZ8S2i8BH6SocdSSZ8mvF1CqfuyWa8gHdgSP43UcsdTyeTdJp9/qpAsMsraQHYg/Ij3nYzlSv2sJLwl265FJZJF1gbS1eRzNRDZWOiOInQn4i7PFSSk2WVV2kuogexUWBYZZG0gzUZGVnrTFIkuVB+GFZZFBlkbyMAmn3+UsVypp1AfZEhhWWSQdbh7swZS5s0bB2Drth6EdRD7YbcAc4FHsU5lGfXDhmYciq1gORBYDrwIPIJteVZWawOfDSgsiwJNJfxsezu/1BraBbgSawyN8l4FzKRcb3iHAT/GVs1vlPc64C7gSKccm/kTjXOf5ZhXMlMIN5Cydby+Dayg73t9rwMux//X7XjgTVrbp/x3lO/t9D00zvcmv7TSmUz4JI3yS20THcBVtFbBNo57gaGFZ20uwG5Vs+T9DOVaK+BvNM71ese8kjmc8Akqy0SqS8neODbEbIrfMWt6hLz/RXm24H6Kxnn+2jGvZCYQPjllmIr7BfJXsg1xUYF5j8OeAsbIO9o+GTm9SuMcr3DMK5mdCZ+YE/xSA+wXfy7xGsiHwIiCcr8zYt49lGPWXqj/V+SPT8uy3josw/5zjYzMWG4sU7EpwbFsg20vl9o+xF+p3LsCDiX8VLPUoy6yNpD12DP4Rrx3mjq9ImVu7hsJypyG776RuzX5vNQjv/N0PhcGPhudo9wYPpegzPGkfzKUIu+hwCEJyu2rMU0+X1xIFhnlaSCvBT7bM0e5eQ0h3RyD1PPwU5XvuX7A2CafLygki4zyNJDQf8zzhKR8i99sFHNeqXJPnXdIqC6sIHyr7i5PA3k58NlIms8ZSSXa5ilbsTph2ZAu99R5h4RWLnm1sCwyytNA5jb5/IAcZeexAng/UdmvJyp3gzcSlZs675DQ2lfPF5ZFRnkayL+bfO7VMezBNlCJbTkwP0G5G3siUbkpjkdfjCL8YKNZHXKXp4EsJ/wky/Nt+p0JypxN+mH8KfL+B35ToA9v8vlzhWTh6HYavyF90zGv7Wlt9G5f4rAC8u4PvBQ57yLe3zRydSCvHoobneDmQsIHYJxfalwUyKvVuK3AvL8WMe85+C4w/s8GefUA/3HMqzBHED5B5/mlRifwcIO8WolFFL/yxk0R8v4Q34lfXdiIi0b53eiXWnEGYCei0UFIcU/dii6sI5i1kr2Lzwrkg4H7MuS7IVYDxxWe9aZOJ5zjWX6pFWs2jQ/CSvwn5e8I3E3rlWwuvvNaBgE3bCWvvlzxjnLId3OzCOdZ6hUVYzqf8IGY5pfaJzqwSUiheQkbYhk2B9xzgN/Gjsf282uW9yqsU+z51nyDQYQfkjR7h1YrYwifuCI7uM30B44BrgEewjqKLwOPYb/Wp+E3xTakA1uQ4XLs1mse8ArWCZ6J3a7s6Jbdlr5KuE5c6Zeaj2cJ/7Jt75eaOAg9/u8hzajlUptB+ICc65eaFGw4NqasUV1YTPFz/N3tRbiBPO2XmhTsB4TrwrV+qfl6kvCBmeyXmhSkPzZPKFQPJnol5+07hA/MH/1Sk4KcRrgOlH70bkrDCL807MZvCLyk10H4YU0P8D237DLqiFzeDcDZkcuUeliDDX8v9Somm4v9NKFtO2DS1Cwq1jgg/kjPd7BO2F6Ry5Vq6wHOpIJb86V4Hn1VgjKl2u4BXvBOIovYfZANHqONH+fJFiZjm/xUTqo3mj9JVK5Uz71UtHFAuisI2GDAzycsX6rhMGxQZSWlHBNzMdY5k/b1ByrcOCDtfOVF2Jx0vRxsT2uwYe+V3hI89ajKH1LeXWMlrasp+bq7fZF6xYsPsA0xj0n8PVIuC7GtHD72TqQKOrH98ppNGVXUJ05EWnIwdiXxPnGK9HErNVLUomJLsCWC2m6qZZt5GzgJ24RUWtQJPI7/L5wiTXRje0NKDmOxjrv3yVTEj18hUTSbdaaoXszB1sKqHY+FjZ/HlgE60uG7Jb53gCnYgnsSSSfwV/x/+RT5Yh3wJSSJLuLvhaEoNjxX728LY7FLtPeJVrQev9zK+ZQEJhJeDUVRvvg9aadKyGa+jK3h633iFc1jNvbSVwp2Ija4zbsCKBrHA9T0cW5VnITtjuRdERRbxv2Uc2uItjMF9UnKFnegK0epHAUsxb9iKGxD0c7g2RIX44D5+FeQdo5Lmp4lcTUc+Dv+FaXdYjVwRh/Oj5TAAOA3+FeadonXgUP7dGakVKZjE3G8K1Cd4z5sCJBU1AT6tiWyorX4GFvHrO32Dqyjgdg2wt34V6w6xDxszQCpmaOxFcO9K1hVYy3wC2BIqwdeqmMg8DPC2w4rtow5wIEZjrdU1F7YJqHeFa/s8Ra2RZ76Gm1qCurEby0+Aq7ANlqVNtcBfB14Dv+K6R2rsH0jR+Y6olJL/YBTgCfwr6hFxwpsK7zdch9FaQuTsRGpdV/+dAFwIbBdnMMm7WY3YAbwCv6VOVasxtbDnYKmwUokHcAkbDXAxfhX8lbjY+DPwFnAjpGPjcgm+mGN5TJsu7CyvqF/G7gZ2298pyRHQragS/KWRmCr0E/qjYPwmTC0CHi0Nx4BnsEaihRIDaS5QdggyQOA/YG9gTHAaGDbnGWvxxrCa1i/aC72ePo54L85y5YI1EDy6QJ26f1zONYfGLRR9MP6C2t64wPgXWw68VJs35R1hWctIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIm3gf8BMNpljV21jAAAAAElFTkSuQmCC"> 
```

# ios - 在 iOS 上检查声音字体

> ID：12754617
> 
> 赞同：3
> 
> 时间：2012-10-05T22:01:21.713
> 
> 标签：ios, audiounit, soundfont

可以在 iOS 上使用 AudioUnits 创建加载和播放 soundfont（或 SF2）文件的采样器。这是一个非常棒的功能。问题是我没有看到任何用于检查声音字体的界面来查看：a）它包含多少个预设和 b）它包含的预设的名称。

`AudioUnitSetProperty`可以通过首先使用with将声音字体加载到采样器中`kAUSamplerProperty_LoadInstrument`，然后在采样器上调用`AudioUnitGetProperty`with来获取当前预设名称`kAudioUnitProperty_ClassInfo`。但是，这不是很有效，并且只会告诉您当前加载的预设的名称。它似乎也没有告诉您声音字体中包含多少预设。

不使用 3rd 方代码（当然它是本机支持的）如何做这些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T13:26:29.170

另一种选择是 OSX 的声音字体编辑器，称为[polyphone](http://www.polyphone.fr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-09T18:23:53.277

这是一个非常古老的问题，但我确实有另一个解决方案：我的[SoundFonts](https://github.com/bradhowes/SoundFonts) 应用程序。它可以在 AppStore 上以少量费用获得，或者您可以使用源代码来构建您想要的东西。

该 repo 包含一个[C++ 中的 SF2 解析器](https://github.com/bradhowes/SoundFonts/tree/master/SoundFontInfoLib)，我从网上找到的一些代码对其进行了修改。该 repo 还包含一个[catalog.py](https://github.com/bradhowes/SoundFonts/blob/master/SoundFontsFramework/Resources/SoundFonts/catalog.py) Python 脚本，该脚本从 SF2 文件生成列表。它使用[sf2utils](https://pypi.org/project/sf2utils/) Python 包。

# vb.net - 将 Combobox 添加到 datagridviewcell 抛出索引超出范围异常

> ID：12754618
> 
> 赞同：0
> 
> 时间：2012-10-05T22:01:30.487
> 
> 标签：vb.net, datagridview, datagridviewcomboboxcell

这是我的代码，它在`dgv2Cb`.
谁能告诉我哪里出错了？

```
Dim dgv2Cb As New DataGridViewComboBoxCell

Dim str1 = "Port"
Dim rowIndex = 0

If str1 = "Port" Then
    dgv2Cb.Items.Add("1")
    dgv2Cb.Items.Add("2")

    dgv2.Rows.Add(str1)
    dgv2.Rows(rowIndex).Cells(1) = dgv2Cb   'Index was out of range. Must be non-negative and less than the size of the collection. Parameter name: index
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:30:48.240

错误在于`.Cells(1)`代码，我敢猜测。

你期待`.Cells(1)`回来`"2"`吗？`Cells`指表中的列，而不是`ComboBox`.

您可能会发现此示例代码很有帮助：http:
[//msdn.microsoft.com/en-us/library/ms404353%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms404353%28v=vs.100%29.aspx)

**编辑**

在对您的代码进行第二次审查时，您似乎正在尝试向 DataGridView 添加一列？在这种情况下，您应该使用：

```
dgv2.Columns.Add(dgv2Cb) 
```

# database-design - 为什么在图形数据库中索引节点或索引属性会更好？

> ID：12754619
> 
> 赞同：12
> 
> 时间：2012-10-05T22:01:47.907
> 
> 标签：database-design, neo4j, graph-databases, titan

我刚刚进入图形数据库，我似乎一直在决定使用“索引节点”或“索引属性”来跟踪诸如“节点类型”之类的东西。由于到目前为止我还没有真正的经验，因此我没有任何信息可以作为决定的依据，而且这两种方法似乎都同样有效。

所以，问题是：**两种方法之间的权衡是什么，规模（即节点数量）如何影响决策？**

对于一个示例场景，假设有两种类型的“事物” ：`User`和，或者如果我们希望每个节点都有一条边分别指向一个节点和一个节点。`Product``type: User``type: Product``User``Product`

在哪种情况下哪种方法更好？

[注意：我特别关注 Neo4j 和 Titan，但我认为这也会更普遍地适用。]

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-19T21:59:43.663

首先，你需要问自己：*一个顶点/节点的类型需要被索引吗？*即您是否需要按类型检索顶点/节点，比如说，从图中检索所有“用户”顶点，或者您是否需要回答从检索给定类型的所有顶点开始的查询，然后进一步过滤/处理这些？

如果这个问题的答案是**yes**，那么我建议您将类型存储为索引的字符串属性。或者，如果您正在使用基于 jvm 的语言进行开发，您可以定义一个类型枚举并将其用作属性类型，以实现更多的类型安全和自动错误检查。Titan 支持任意用户定义的类/枚举作为属性类型，并将压缩它们以减少内存占用。

但是，这种方法的缺点是它不会扩展，因为您正在构建一个低选择性指数。这意味着可能会有很多类型为“用户”或“产品”的顶点，所有这些都需要分别与“用户”或“产品”的索引条目相关联。这使得维护和查询该索引非常昂贵且难以扩展（想象一下 facebook 有一个“类型”索引：“照片”条目下将有数十亿个顶点）。如果您（还）不关心缩放，那么这可以工作。

如果问题的答案是**否定**的，那么我建议将类型建模为图中的顶点/节点。即有一个“用户”顶点和一个“产品”顶点以及从每个用户到“用户”顶点的标记为“类型”的边等。

这种方法的优点是您可以使用图形对数据进行建模，而不是让数据库之外的字符串值代表关键的类型信息。在构建应用程序时，图形数据库将成为其中心组件并持续很长时间。随着编程语言和开发人员的来来去去，您不希望数据建模和类型信息与他们一起出现并面临以下问题：“SPECIAL_USER 是什么意思？” 相反，有一个 SPECIAL_USER 顶点并向其添加出处信息，即，谁创建了这种类型，它代表什么以及简短的描述——所有这些都在数据库中。

这种方法的一个问题是，当您的应用程序扩展时，“用户”和“产品”顶点将有很多边缘发生在它们身上。换句话说，您正在创建产生扩展问题的超级节点。这就是 Titan 引入单向边缘概念的原因。单向边就像网络上的链接：起始顶点指向另一个顶点，但该顶点不知道边。由于您不想从“用户”顶点遍历所有用户顶点，因此您不会失去任何东西，而是获得可伸缩性和性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T23:22:13.630

你想问什么样的问题？在 Neo4j 中，您可以创建一个`User`和一个`Product`索引，甚至将它们组合成一个，然后可以询问类似的问题

```
start bob = node:User(name='Bob') match .... 
```

甚至全文搜索。为了方便检查一个节点是用户还是产品，你可以让属性仍然在节点上，只是为了方便和快速的遍历。如果您没有从 User/Product 遍历到实例节点（您为此进行索引查找），您甚至可以通过将`PRODUCT`or`USER`关系返回到类型（超级）节点来进行检查，从而为您提供检查遍历像

```
start s = node:User(name='Bob') match s-[r]-(product)-[typeRel:PRODUCT]->() return product 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T15:09:08.507

在这里 imo 忽略了索引的一个非常重要的原因。假设您有一个具有许多不同属性和许多不同节点类型的复杂图，并且您希望将一个模式与具有一堆属性的“人”匹配。

如果没有索引，您别无选择，只能遍历该图，其中可能只有 0.01% 的节点是人员类型。并且遍历可能不会到达图中的未连接区域。

相反，如果我为人员编制了索引，我只需遍历每个人，并在每个人周围进行本地搜索以查看他们的模式是否匹配。

您应该能够立即看到，这些方法中的第一种与图表的总大小成比例，但第二种方法仅与图表中的总人数成比例。

道德：如果您设想一个用例，其中将使用特定类型的节点作为模式中的绑定节点对图形进行多次搜索（例如，这里有很多搜索“具有模式 X 的人”），那么您应该索引这些节点以提高搜索性能。

如果您要搜索诸如“人 Peter 的两个链接中的所有节点”之类的内容，那么按人的名称对其进行索引将是至关重要的，并且无论图形大小如何，都可以实现恒定的时间性能 - 因为您实际上是在查找彼得在哈希表中。

# c++ - C ++如何从类外部更改TextBox中的文本

> ID：12754620
> 
> 赞同：0
> 
> 时间：2012-10-05T22:01:50.997
> 
> 标签：c++, api, textbox

首先，我是 C++ 的新手。我正在用 C++ 实现我的一些有限元 Matlab 代码。将数据写入控制台时我做得很好，但现在我正在尝试使用 Visual Studio 做一个非常简单的 API。我创建了一个 CLR 项目，其中包含一个带有 1 个按钮和一个 TextBox 的表单。表单的代码由 Visual Studio 自动生成。

我正在尝试创建一个执行如下的 API。

1）当我按下按钮时，会执行一个类外的函数。2) 函数执行后，在文本框中打印执行结果。

我不想把函数放在 Form 类中，因为这个函数预计会增长到完整的 FEM 代码。我的问题是我无法设置文本框的文本属性，例如：`this->TextBox1->Text = "Result is 22"`。有没有办法轻松做到这一点？

我的代码组织如下。

```
// programa.cpp : main project file.

#include "stdafx.h"
#include "Form1.h"  // (cointains the Form1 Class)
#include <iostream>

using namespace programa;
using namespace std;

[STAThreadAttribute]

void calcular(int a) {  
    .... // Calculation
    .... // Some method to set Text of Text Box
}

int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    Application::Run(gcnew Form1());
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:20:35.487

只是一个建议，永远不要在你的算法中调用 gui，最好的方法是为你的算法创建一个类，在其中完成计算，另一个类作为控制器。

在 main 方法中，您为控制器创建一个 algo 实例和另一个实例，并将 form1 实例和 algo 实例提供给控制器，控制器将调用算法并在刷新表单后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:13:10.930

将您的`calcular`函数传递给文本框或类似内容的指针。我不知道您的文本框的正确类型，但代码如下所示：

```
void calcular(int a, TextBox* textbox) {  
    .... // Calculation
    textbox->Text = "Result is 22";
} 
```

您可能还需要调用`setText`函数或类似的东西，而不是直接修改属性。

# html - 不同类的两个元素没有正确对齐

> ID：12754623
> 
> 赞同：1
> 
> 时间：2012-10-05T22:02:06.807
> 
> 标签：html, css

CSS初学者在这里。正如您从代码中看到的那样，我希望“简介”和“内容”与顶部的距离相同，但“简介”会自行下降。

这是输出的屏幕截图：

![截屏](../Images/29385c6024286344c7abdc8a9806af30.png)

### 代码

```
<!DOCTYPE html>
<html>
<head>
    <style rel="stylesheet" type="text/css">

        body {
            background: #e7e6e1;
            font-family: Georgia, 'Times New Roman';
            font-size: 16px;
            line-height: 150%;
            color: #333;
        }

        index {
            display: block;
            margin: 20px;
            font-size: 25px
        }

        h1 {
            color: #0E0B06;
            font-weight: normal;
            margin-bottom: 0px;
        }

        h2 {
            color: #0E0B06;
            font-size: 15px;
            font-weight: normal;
            margin-bottom: 0px;
        }

        a {
            color: #333;
            text-decoration: none;
            padding: 1px 2px;
            background: #A3A3A1;
        }

        a:hover {
            color: #0E0B06;
            background: none;
        }

        .wrapper {
            width: 520px margin: auto;
        }

        .header {
            display: block;
            margin: 30px 50px 75px 400px;
        }

        .indexer {
            display: block;
            margin: 70px 50px 75px 70px;
        }

        .poster {
            display: block;
            margin: 70px 50px 75px 400px;
            padding-bottom: 30px;
        }

    </style>
</head>
<body>
<div class="wrapper">
    <div class="header">
        <h1><a href="main.html">Web Server</a></h1>

        <h2>Internet and Web Technology Assignment <br> by <b>Juhi Aswani</b> and <b>Kartikey Kushwaha</b></h2>
    </div>
    <div class="indexer">
        <h2><b><font size="5px">Contents</font></b></h2>
        <br>Introduction
        <br>History
        <br>Common features
    </div>
    <div class="poster">
        <h2><b><font size="5px">1\. Introduction</font</b></h2>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:14:04.403

给 .indexer 一个宽度，浮动它，并从 .poster 中删除左侧填充，因此（猜测宽度，调整以适应）：

```
 .indexer {
        width: 200px;
        float: left;
        margin: 70px 50px 75px 70px;
    }

    .poster {
        margin: 70px 50px 75px 0;
        padding-bottom: 30px;
    } 
```

此外，您不需要“显示：块”，因为默认情况下 div 是[块级元素](https://stackoverflow.com/questions/8969381/what-is-the-difference-between-display-inline-and-display-inline-block)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:41:59.970

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head> 
<style rel="stylesheet" type="text/css"> 

    body { 
        background: #e7e6e1; 
        font-family: Georgia, 'Times New Roman'; 
        font-size: 16px; 
        line-height: 150%; 
        color: #333; 
    } 

    index { 
        display: block; 
        margin: 20px; 
        font-size: 25px 
    } 

    h1 { 
        color: #0E0B06; 
        font-weight: normal; 
        margin-bottom: 0px; 
    } 

    h2 { 
        color: #0E0B06; 
        font-size: 15px; 
        font-weight: normal; 
        margin-bottom: 0px; 
    } 

    a { 
        color: #333; 
        text-decoration: none; 
        padding: 1px 2px; 
        background: #A3A3A1; 
    } 

    a:hover { 
        color: #0E0B06; 
        background: none; 
    } 

    .wrapper { 
        width: 520px margin: auto; 
    } 

    .header { 
        display: block; 
        margin: 30px 50px 75px 400px; 
    } 

    .indexer { 
    width: 200px; 
    float: left; 
    margin: 70px 50px 75px 70px; 
} 

</style> 
</head> 
<body> 
<div class="wrapper"> 
<div class="header"> 
    <h1><a href="main.html">Web Server</a></h1> 

    <h2>Internet and Web Technology Assignment <br> by <b>Juhi Aswani</b> and <b>Kartikey  Kushwaha</b></h2> 
</div> 
<div class="indexer"> 
    <h2><b><font size="5px">Contents</font></b></h2>
    <br>Introduction 
    <br>History 
    <br>Common features 
    <h2><b><font size="5px">1\. Introduction</font</b></h2> 
</div> 
</div> 
</body> 
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:42:48.993

```
 .poster {
        display: block;
        margin: 145px 50px 75px 400px;
        padding-bottom: 30px;

    } 
```

# ruby-on-rails-3 - 如何创建时事通讯部分

> ID：12754626
> 
> 赞同：0
> 
> 时间：2012-10-05T22:02:12.557
> 
> 标签：ruby-on-rails-3

我正在尝试创建一个非常简单的电子邮件注册表单，用户可以在其中输入他们的电子邮件并按提交。

我希望注册表单是部分的，所以我可以在网站的任何地方使用它。

表单编码如下： `<%= form_for @subscription do |f| %>`

如果当前视图、控制器和操作是主页，如何判断表单`@subscription`是什么？`Subscription.new`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:06:08.470

作为一个选项，您可以执行以下操作：

```
<%= form_for Subscription.new do |f| %> 
```

不过有一件事，我自己没有尝试过。试试看它是否有效。

**编辑：**

抱歉，我在第一次阅读时没有得到问题。您可以在 home 控制器中设置`@subscription`实例变量`Subscription.new`，然后将其传递给部分（在主视图内），如下所示：

```
<%= render partial, :subscription => @subscription %> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:07:16.600

您必须确保`@subscription`在调用部分之前已实例化 ... 或 do ：

```
 <%= form_for @subscription || Subscription.new do |f| %> 
```

因此，如果`@subscription`存在，它会使用它。如果没有，它将退回到`Subscription.new`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:08:03.010

您可以在 home 操作中声明`@subscription`为正确的`Subscription.new`

# objective-c - “重置内容和设置”后设置语言不起作用

> ID：12754627
> 
> 赞同：0
> 
> 时间：2012-10-05T22:02:14.023
> 
> 标签：objective-c, ios, ios5

在我的 iOS 模拟器中按下“重置内容和设置”后，下次打开我的 iOS 应用程序时，未设置语言。

我用以下方法设置我的语言：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 
```

使用

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects: @"es", nil] forKey:@"AppleLanguages"]; 
```

但是当我在重置后第一次打开我的应用程序时，我只看到我的文件 Localizable.strings 中的键。如果我再次运行该应用程序，一切正常。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:24:48.433

一定是因为在 iOS 应用程序中无法在运行时更改语言，至少使用您的解决方案是不可能的。在发生任何事情之前，您必须重新启动应用程序。

但是，除非您有特定要求（例如，支持语言学习应用程序的多种语言），否则在运行时更改应用程序的语言是一个糟糕且极不鼓励的想法。

# spring - 在 ActionServlet 初始化期间调用存储过程

> ID：12754636
> 
> 赞同：0
> 
> 时间：2012-10-05T22:03:29.110
> 
> 标签：spring, web-applications, struts, ibatis

可以在使用 ibatis 初始化 ActionServlet [init() 方法] 期间调用存储过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:35:24.553

是的，假设 ibatis 在`ActionServlet.init`执行之前已初始化，如果您在 ServletContextListener 中对其进行初始化，将会是这样。

但是，我会考虑您是否应该在`ActionServlet.init`. 我会在 ServletContextListener 的`contextInitialized`方法的实现中这样做。

Craig McClanahan 在 2002 年发表的一篇文章解释了为什么这是更好的做法：

“这样做的原因是 servlet 规范不*保证*servlet 将被加载一次，然后在应用程序的整个生命周期中都留在内存中，尽管原则上大多数容器都会为大量请求的 servlet 这样做。例如，它完全是容器丢弃 Struts 控制器 servlet，然后在 web 应用程序的生命周期内再次重新初始化它，多次重新初始化它是合法的。

ServletContextListener 的好处是，您可以保证 contextInitialized() 和 contextDestroyed() 仅在您需要它们时（webapp 启动和 webapp 关闭）被调用，无论中间的 servlet 和 JSP 页面发生什么情况。但这仅适用于添加了此 API 的 2.3 或更高版本的系统。”

# java - 将新单元格写入工作表 apache poi

> ID：12754641
> 
> 赞同：3
> 
> 时间：2012-10-05T22:03:50.837
> 
> 标签：java, selenium, junit, apache-poi

我正在使用以下代码，用于使用 apache poi 读取 excel，它是一个 .xlsx 文件。请让我知道我能做什么，以便在我的循环继续进行时更改每一行中的单元格的值。谢谢

```
import java.io.FileInputStream;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

String fileName = "C:/createCDN.xlsx";
FileInputStream fis = null;
fis = new FileInputStream(fileName);
XSSFWorkbook workbook = new XSSFWorkbook(fis);
FileOutputStream fos=new FileOutputStream(fileName);
XSSFSheet sheet = workbook.getSheetAt(0);
int totalRows=sheet.getLastRowNum();
for(int i=1;i<=totalRows;i++) {
    XSSFRow row = sheet.getRow(i);
    method.fillTextBox(row.getCell(0),"name", pageProp);
    method.fillTextBox(row.getCell(0),"name", pageProp);
} //Do something here, or inside loop to write to lets say cell(2) of same row. 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T22:25:25.023

它应该是这样的：

```
for(int i = 1; i <= totalRows; i++) {
    Row row = sheet.getRow(i);
    Cell cell = row.getCell(2);
    if (cell == null) {
        cell = row.createCell(2);
    }
    cell.setCellType(Cell.CELL_TYPE_STRING);
    cell.setCellValue("some value");
} 
```

要保存工作簿，您可以编写：

```
FileOutputStream fos = new FileOutputStream(fileName);
workbook.write(fos);
fos.close(); 
```

您应该查看[POI 的 Busy Developers' Guide](http://poi.apache.org/spreadsheet/quick-guide.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-03T19:55:29.053

首先，您需要在 excel 文件中创建空间，如下所示：

```
for(int row = 0; row < 10 ; row++) {
    sheet.createRow(row);
    for(int column = 0; column < 10; column++) { 
        sheet.getRow(row).createCell(column);                
    }                
} 
```

然后您可以使用以下命令编写 excel：

```
sheet.getRow(row).getCell(column).setCellValue("hello"); 
```

# php - foreach循环php中的子数组

> ID：12754643
> 
> 赞同：-3
> 
> 时间：2012-10-05T22:04:13.817
> 
> 标签：php, codeigniter, loops, foreach

我在这里有这段代码：

```
<?php foreach($blog_posts['post_category'] as $category) {  ?> 
```

我怎样才能让它工作？

基本上我有一个数据库，其中包含我所有的博客文章，其中一列是`post_category`我试图通过一个 foreach 语句从所有这些中列出一个列表，该语句得到如下结果：

```
$data['blog_categories'] = $this->db->query("SELECT `post_category` FROM `blog_posts`"); 
```

顺便说一句，这是codeigniter ...然后在我看来我有代码：

```
<?php foreach($blog_posts['post_category'] as $category) {  ?> 
```

我需要在一个列表中显示每个类别...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:38:29.700

我想你想使用内爆

```
$output = array();
forreach($blog_posts['post_category'] as $item){
    $output[] = "<li>$item</li>";
}
echo "<ul>".implode('',$output)."</ul>"; 
```

或者，如果您只是在列表项之后而不是列表，只需将最后一行替换为

```
echo implode('',$output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:56:52.207

很确定你要找的是

```
$data['blog_categories'] = $this->db->query("SELECT DISTINCT `post_category` FROM `blog_posts`");
foreach ($data['blog_categories'] as $category) {
  echo "<li>$category</li>";
} 
```

我，我会改成`$data['blog_categories']`just`$blog_categories`或其他东西，但我保持原样，以免混淆问题。

# javascript - 在 Coldfusion 中运行 CFgroovy 时如何在服务器端添加纯 javascript 编译器插件？

> ID：12754644
> 
> 赞同：4
> 
> 时间：2012-10-05T22:04:15.410
> 
> 标签：javascript, compilation, coldfusion, server-side, cfimport

我试图推销自己尝试在服务器上构建增强的 Jquery Mobile 标记（正在运行`Coldfusion8`），然后尝试使用[DustJS](http://akdubya.github.com/dustjs/)（Javascript 模板引擎）将标记预编译为 js 字符串，我希望将其作为服务器一个静态文件。

我想我可以尝试在 Coldfusion 中添加插件。这是我想做的事情：

从 Coldfusion 中这样的模板开始：

```
<cfsavecontent variable="renderedResults">
    <cfoutput>
        {##person}{root}: {name}, {age}{/person}
    </cfoutput> 
</cfsavecontent> 
```

通过 NodeJS 上的[DustJS](http://akdubya.github.com/dustjs/)编译器运行它会返回如下内容：

```
 (function() {
      dust.register("demo", body_0);

 function body_0(chk, ctx) {
     return chk.section(ctx.get("person"), ctx, {
       "block": body_1
      }, null);
   }
   function body_1(chk, ctx) {
     return chk.reference(ctx.get("root"), ctx, "h").write(": ").reference(ctx.get("name"), ctx, "h").write(", ").reference(ctx.get("age"), ctx, "h");
   }
   return body_0;
 })(); 
```

然后我将其另存为`someStaticTemplate.js`. 该文件被拉入客户端并填充动态数据。

我的问题是在 Coldfusion 中编译它。

我正在使用[`Cfgroovy`](http://www.barneyb.com/barneyblog/projects/cfgroovy2/)为了在服务器上运行 Javascript：

```
 <cfimport prefix="g" taglib="../../tags/cfgroovy/" />
     35k zipped plugin here
     <!--- COMPILE  --->
     var dustedTemplate = dust.compile( variables.tempLateToCompile, variables.templateName);
     <!--- OUT --->
     variables.put("renderedResult", dustedTemplate);
 </g:script> 
```

但是这样做会返回以下错误：

```
type: sun.org.mozilla.javascript.internal.JavaScriptException 
message: [object Error] (<Unknown Source>#1) 
```

所以我一定做错了什么......

**问题：**

是否有可能将此服务器端编译成 JS？如果是这样，任何想法如何包含插件。我也看过[这篇](http://www.bennadel.com/blog/1767-Running-Javascript-And-jQuery-In-ColdFusion-With-CFGroovy-And-Rhino.htm)文章，但我已经在扩展我能做的事情了，所以我希望这可以解决我在上面尝试的问题。

感谢您的一些投入！

**BOUNTY**：
好吧，我放弃尝试自己了。赏金时间...我正在寻找一个 Coldfusion 代码片段，它允许我
a) 在 CFgrooy 标记或替代 javascript 启用设置中加载 DustJS 插件
b) 让我运行 DustJS Javascript-compile 函数来转换我的模板

```
 {##person}{root}: {name}, {age}{/person} 
```

进入这个：

```
 (function() {
      dust.register("demo", body_0);

 function body_0(chk, ctx) {
     return chk.section(ctx.get("person"), ctx, {
       "block": body_1
      }, null);
   }
   function body_1(chk, ctx) {
     return chk.reference(ctx.get("root"), ctx, "h").write(": ").reference(ctx.get("name"), ctx, "h").write(", ").reference(ctx.get("age"), ctx, "h");
   }
   return body_0;
 })(); 
```

如果这在技术上是不可能的，我愿意接受替代方法，允许我在服务器上创建一个基于 HTML 并包含占位符的模板，以便我可以在客户端上添加动态数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:26:03.437

你应该看看[http://www.bennadel.com/blog/1766-Running-Javascript-In-ColdFusion-With-CFGroovy-And-Rhino.htm](http://www.bennadel.com/blog/1766-Running-Javascript-In-ColdFusion-With-CFGroovy-And-Rhino.htm)

[是否可以在 Coldfusion 服务器端将 HTML 标记编译为可模板化的 javascript](https://stackoverflow.com/questions/12742741/is-it-possible-to-compile-html-markup-to-templatable-javascript-on-coldfusion-se)？

快乐编码！！！

# c# - 为什么类实例覆盖另一个实例

> ID：12754645
> 
> 赞同：-1
> 
> 时间：2012-10-05T22:04:21.887
> 
> 标签：c#, class, console-application, instance, overwrite

我有个问题想请教各位。

**我有一个如下所示的课程：**

```
public class Node
        {
            public int Kova1;               // Kova 1
            public int Kova2;               // Kova 2
            public int Kova3;               // Kova 3

            public int ActionNo;            // Yapılan İşlem

            public Node(int kova1, int kova2, int kova3, int actionNumber)
            {
                Kova1 = kova1;
                Kova2 = kova2;
                Kova3 = kova3;
                ActionNo = actionNumber;
            }

            public Node(int kova1, int kova2, int kova3)
            {
                Kova1 = kova1;
                Kova2 = kova2;
                Kova3 = kova3;
            }

            public Node()
            {
            }

            public Node AnneNode;
        } 
```

**还有这些功能：**

```
public void CocukNodeOlustur(LinkedList<Node> Acik, LinkedList<Node> Kapali, Node temp)
{
    Node cocukState;

    Node temp2 = temp;

    for (int i = 0; i < 12; i++)
    {
        cocukState = YeniStateOlustur(temp, i);

        if ((ActionKontrol(cocukState)) && (GoalBulundu(Acik, Kapali, cocukState)) &&
        ((cocukState.Kova1 != temp2.Kova1) && (cocukState.Kova2 != temp2.Kova2) && (cocukState.Kova3 != temp2.Kova3)))
        {
            cocukState.AnneNode = temp;
            Acik.AddFirst(temp);
        }
    }
}

public Node YeniStateOlustur(Node s, int j)
{
    int tempKova1, tempKova2, tempKova3;

    Node yeniCocuk = new Node();

    yeniCocuk = s;
    yeniCocuk.ActionNo = j;

    // Gelen numaraya göre uygulanan işlemin seçimi yapılıyor.
    switch (j)
    {
        case 0:
            {
                yeniCocuk.Kova1 += (3 - yeniCocuk.Kova1);
                yeniCocuk.Kova2 += 0;
                yeniCocuk.Kova3 += 0;
            }
            break;
        case 1:
            {
                yeniCocuk.Kova1 += 0;
                yeniCocuk.Kova2 += (5 - yeniCocuk.Kova2);
                yeniCocuk.Kova3 += 0;
            }
            break;
    }

    return yeniCocuk;
} 
```

**在主函数中**

```
 Node temp = new Node();

            while (!(Acik.Count == 0))
            {
                p.CocukNodeOlustur(Acik, Kapali, temp);
                Kapali.AddLast(temp);
            } 
```

所以当我调试我的程序时，我看到每当代码跳转到**YeniStateOlustur** () 函数时，程序中的所有 Node 实例都会受到**YeniStateOlustur** () 中的更改的影响。**似乎函数中的实例覆盖了 Node 类的所有实例**。

我不明白为什么会这样？

我该如何克服呢？

我对这篇长文致以最诚挚的问候和歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:37:36.390

问题是*所有节点都是同一个实例*。您的示例代码仅包含两次“new Node()”，而在第二种情况下（在方法内部`YeniStateOlustur`），新实例会立即被丢弃。因此，该函数返回传递给它的相同节点：

```
public Node YeniStateOlustur(Node s, int j)  
{  
    int tempKova1, tempKova2, tempKova3;  

    Node yeniCocuk = new Node();  

    yeniCocuk = s;  

    //...

    return yeniCocuk;    
} 
```

在方法`CocukNodeOlustur`中，所有节点变量都指向同一个节点：

```
public void CocukNodeOlustur(LinkedList<Node> Acik, LinkedList<Node> Kapali, Node temp) 
{ 
    // here, temp == temp
    Node cocukState;
    // now, temp == temp and cocukState is uninitialized.
    Node temp2 = temp; 
    // now, temp == temp, temp2 == temp, and cocukState is uninitialized.

    for (int i = 0; i < 12; i++) 
    { 
        cocukState = YeniStateOlustur(temp, i); 
        // now, temp == temp, temp2 == temp, and cocukState == temp

        if ((ActionKontrol(cocukState)) && (GoalBulundu(Acik, Kapali, cocukState)) && 
        ((cocukState.Kova1 != temp2.Kova1) && (cocukState.Kova2 != temp2.Kova2) && (cocukState.Kova3 != temp2.Kova3))) 
        { 
            cocukState.AnneNode = temp; 
            Acik.AddFirst(temp); 
        } 
    } 
} 
```

您的代码似乎假定 Node 是一个值类型（结构），但它显然是一个引用类型（类）。如果您不确定差异，您应该退后一步，做一些阅读和实验。

一个快速的解决方法可能是将 Node 的声明更改为一个结构，但我建议不要这样做。使用结构进行编程可能非常棘手，如果您对结构和类之间的差异的理解不明确，那就更是如此。

# macos - Mac OS 上的蓝牙 4（蓝牙智能）

> ID：12754649
> 
> 赞同：0
> 
> 时间：2012-10-05T22:04:43.177
> 
> 标签：macos, bluetooth, bluetooth-lowenergy

开始开发支持新蓝牙标准的 OS X 应用程序的最佳方法是什么？有什么好的教程或详细的文档吗？不幸的是，我在网上找不到真正有用的信息。我正在使用内置支持蓝牙 4 的 macbook air，所以我没有遇到任何硬件问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:28:58.313

有大量的教程，尤其是在 Apple Developer 网站上。在此处查看所有 Apple 示例：[https ://developer.apple.com/search/index.php?q=CoreBluetooth](https://developer.apple.com/search/index.php?q=CoreBluetooth)

也搜索 Github。iOS / Mac OS 通常应该是一样的。[https://github.com/search?utf8=✓&q=CoreBluetooth&type=Everything&repo=&langOverride=&start_value=1](https://github.com/search?utf8=%E2%9C%93&q=CoreBluetooth&type=Everything&repo=&langOverride=&start_value=1)

# ruby - 简介 Jekyll 构建时间

> ID：12754656
> 
> 赞同：5
> 
> 时间：2012-10-05T22:05:46.163
> 
> 标签：ruby, jekyll, ruby-prof, jekyll-extensions

我使用 Jekyll 来构建我的站点，并且开始需要相当长的时间（几分钟）来编译站点（大约 600 多篇文章）。我怀疑某些插件可能是负责任的，但似乎必须有一种更好的方法来分析构建的性能，而不是简单地打开和关闭不同的插件和解析器。

构建过程中的最小输出没有给出任何提示——所有时间都只是花在“构建站点”步骤中。我想我可以通过运行 jekyll 脚本来获得一些想法，所以我在我的站点根目录中`ruby-prof`制作了 jekyll 脚本的快速本地副本并运行`jekyll.rb`

```
ruby-prof jekyll.rb 
```

该站点看起来构建良好，但分析器只是因丑陋的核心转储而窒息。

```
[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Aborted (core dumped) 
```

有没有更智能的方法来分析我的网站的构建过程并找出它为什么这么慢？

其次，有没有什么技巧可以加快编译时间？（例如，我看到 中存在一个`_cache`目录`_plugins`，但不知道它的确切作用。我还看到了`--auto`Jekyll 的标志，但不知道如何配置它以使其始终重新编译某些页面或他们没有改变（例如，推特插件每次都需要重新运行），而不是重新编译未更改的帖子）。

如果有人想亲身体验一下，[该网站的 Jekyll 源代码在 Github 上](https://github.com/cboettig/labnotebook)，自述文件中有一些关于额外 gem 依赖项的注释。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-03T20:48:31.997

试试 Ruby GSL

```
gem install gsl 
```

[http://rb-gsl.rubyforge.org/](http://rb-gsl.rubyforge.org/)

应该有助于加快构建时间。

# sql - 修复我的 SQL 查询视图

> ID：12754663
> 
> 赞同：4
> 
> 时间：2012-10-05T22:06:41.353
> 
> 标签：sql, tsql

我有一个正在尝试编写的查询，它显示 Action 表中的最新**状态 ID**数据。

这是我的数据库的样子（来自 SQL Server 2008 的屏幕截图）：

![截屏](../Images/0b576544171fa1f0d1cdb54b5f846415.png)

从我的示例数据中，您可以看到 Action 表包含`RequestID`#26 的两 (2) 个条目。我只想显示最新的`StatusID`值（基于`DateStamp`字段）。

![截图2](../Images/e570d4ac2496544c4431e28a2e6c5d95.png)

我为我的数据库创建了一个视图。它看起来很讨厌，并且影响了我的 SQL 编写能力。

```
SELECT
  P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
  RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
  R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
  LEFT OUTER JOIN Request AS R ON R.PacketID = P.ID
  INNER JOIN Action AS A ON A.RequestID = R.ID
  INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
  INNER JOIN Line AS L ON R.LineID = L.ID
  INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
  INNER JOIN Status AS S ON A.StatusID = S.ID 
```

但是，此视图显示了**所有**值，我需要它以某种方式仅拉取任何给定操作的最新行。

我将如何修改我的视图来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:20:17.337

```
SELECT
  P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
  RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
  R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
  LEFT OUTER JOIN Request AS R ON R.PacketID = P.ID
  INNER JOIN Action AS A ON A.RequestID = R.ID
  INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
  INNER JOIN Line AS L ON R.LineID = L.ID
  INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
  INNER JOIN Status AS S ON A.StatusID = S.ID
where A.StatusID = (
    select top 1 StatusID
    from Action
    where RequestID = R.ID
    order by DateStamp desc
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:27:37.397

您可以从 Action 表中创建一个派生表，该表获取按 RequestID 分组的最大 DateStamp（这将为您提供每个 RequestID 的最新 DateStamp）。获得派生表后，您可以将其连接回 Action 表中具有与给定 RequestID 匹配的最新 DateStamp 的行上的 Action 表。

```
SELECT
P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
LEFT OUTER JOIN Request AS R ON R.PacketID = P.ID

INNER JOIN
(SELECT RequestID, MAX(DateStamp) AS MostRecentDateStamp
 FROM Action GROUP BY RequestID) AS MostRecentAction
ON R.ID = MostRecentAction.RequestID

INNER JOIN Action AS A 
ON 
MostRecentAction.RequestID = A.RequestID
AND
MostRecentAction.MostRecentDateStamp = A.DateStamp

INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
INNER JOIN Line AS L ON R.LineID = L.ID
INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
INNER JOIN Status AS S ON A.StatusID = S.ID 
```

或者，另一种选择是采用 Karwin 先生在这里展示的方法： [Join single row from a table in MySQL](https://stackoverflow.com/questions/3120423/join-single-row-from-a-table-in-mysql)

```
SELECT
P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
LEFT OUTER JOIN Request AS R ON R.PacketID = P.ID

INNER JOIN Action AS A 
ON 
R.ID = A.RequestID

LEFT JOIN Action AS A2
ON
A.RequestID = A2.RequestID
AND
A.DateStamp < A2.DateStamp

INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
INNER JOIN Line AS L ON R.LineID = L.ID
INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
INNER JOIN Status AS S ON A.StatusID = S.ID

WHERE A2.RequestID IS NULL 
```

我喜欢 Karwin 先生使用的方法，尤其是在处理与您这样的结构的关系时：

```
SELECT
P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
LEFT OUTER JOIN Request AS R ON R.PacketID = P.ID

INNER JOIN Action AS A 
ON 
R.ID = A.RequestID

LEFT JOIN Action AS A2
ON
A.RequestID = A2.RequestID
AND
(A.DateStamp < A2.DateStamp OR (A.DateStamp = A2.DateStamp AND A1.RequestID < A2.RequestID))

INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
INNER JOIN Line AS L ON R.LineID = L.ID
INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
INNER JOIN Status AS S ON A.StatusID = S.ID

WHERE A2.RequestID IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T00:50:43.360

要实现您想要的，您可以加入一个子查询，按 packetID 对结果进行分组，并为每个 packetID 选择 MAX(ID)。这是有效的，因为 ID 字段是一个标识列，因此最高的数字将始终是最新的。这比在时间戳上进行比较更可取，因为整数（尤其是索引整数）比时间戳要快得多。

```
SELECT
  P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
  RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
  R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
  LEFT OUTER JOIN (SELECT MAX(ID) as ID FROM Request GROUP BY PacketID) as UR ON P.ID = UR.ID
  INNER JOIN Request AS R ON R.PacketID = UR.ID
  INNER JOIN Action AS A ON A.RequestID = R.ID
  INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
  INNER JOIN Line AS L ON R.LineID = L.ID
  INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
  INNER JOIN Status AS S ON A.StatusID = S.ID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T03:27:17.490

这将起作用。

```
WITH MaxDate AS
(
   SELECT RequestID, Max(DateStamp) AS MaxDate
   FROM Action
   GROUP BY RequestID
), ActionFiltered AS
(
   SELECT Action.* 
   FROM Action
   JOIN MaxDate ON Action.RequestID=MaxDate.RequestID AND Action.DateStamp = MaxDate.MaxDate
)
SELECT
    P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
    RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
    R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM ActionFiltered A
JOIN Request AS R ON A.RequestID = R.ID 
JOIN Packet AS P ON P.ID = R.PacketID
JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
JOIN Line AS L ON R.LineID = L.ID
JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
JOIN Status AS S ON A.StatusID = S.ID 
```

这是我正在做的事情：首先，对于每个 requestID，我找到最新的日期（MaxDate），然后我从操作表中获取这些行的所有数据（ActionFiltered），最后我将所有这些数据加入到您的表中内连接。

潜在问题：如果 Action 表中有两条记录具有相同的 requestID 和时间戳，您将在最终表中获得两行。

注意：我没有测试，所以可能有错别字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T05:14:08.610

我通常使用 rank() 根据时间获取最新版本的记录。它将根据您提供的键（分区：在本例中为请求 ID）为记录的每个版本分配一个等级。如果按 desc 排序，排名为 1 的行是最新的。如果按 asc 排序，排名为 1 的行是最旧的。

**编辑：**更改了在子查询中返回的 RequestId 列的名称，以删除您看到的错误。

```
SELECT
    P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
    RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
    R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
    LEFT OUTER JOIN Request AS R ON R.PacketID = P.ID
    INNER JOIN (
        select 
                req.ID as RequestIdForJoin
                , act.*
                , rank() over (partition by req.ID order by act.DateStamp desc) as [Rank]
            from Request as req 
                inner join Action as act on req.ID = act.RequestID
    ) as A
        on R.ID = A.RequestIdForJoin
    INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
    INNER JOIN Line AS L ON R.LineID = L.ID
    INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
    INNER JOIN Status AS S ON A.StatusID = S.ID         
    where A.[Rank] = 1 
```

**对于重复的操作：**如果@Hogan 的具有相同时间戳的多个操作的场景是可能的，您可以像这样暂存然后删除重复项：

```
declare @View table (
PacketID int, RequestID int, ActionID int, EmpID int, DateStamp datetime,
RequestType int, Line int, PartNo varchar(50), Workorder int, Qty int, 
ReasonType int, MTF varchar(50), Status int
)

insert into @View       
SELECT
    P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID, A.EmpID, P.DateStamp,
    RQ.Description AS RequestType, L.Description AS Line, R.PartNo, R.Workorder,
    R.Qty, RZ.Description AS ReasonType, R.MTF, S.Description AS Status
FROM Packet AS P
    LEFT OUTER JOIN Request AS R ON R.PacketID = P.ID
    INNER JOIN (
        select 
                req.ID as RequestIdForJoin
                , act.*
                , rank() over (partition by req.ID order by act.DateStamp desc) as [Rank]
            from Request as req 
                inner join Action as act on req.ID = act.RequestID
    ) as A
        on R.ID = A.RequestIdForJoin
    INNER JOIN RequestType AS RQ ON R.RequestTypeID = RQ.ID
    INNER JOIN Line AS L ON R.LineID = L.ID
    INNER JOIN ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
    INNER JOIN Status AS S ON A.StatusID = S.ID         
    where A.[Rank] = 1  

-- Removing all but one duplicate
;with dups as (
    select 
        RequestID
        ,row_number() over (partition by RequestID order by DateStamp) as [RowNumber]
    from @View
)
delete dups where [RowNumber] > 1

select * from @View 
```

# python - 每个用户在服务器上的 Python 进度条

> ID：12754665
> 
> 赞同：1
> 
> 时间：2012-10-05T22:06:46.190
> 
> 标签：python, webserver

我正在尝试实现这样的功能：

我会运行一个服务器，然后用户会来到服务器并提交他们的作业（我只需要按顺序运行作业）。每个工作都需要很长时间才能完成，并且每个工作都有很多状态（比如已经下载了多少推文等），我希望将状态呈现给用户。我将作业对象作为一个类来实现，即

```
Class Job:
   def __init__():
      initial status
   def do_download():
      do download 
   def report_status():
      return [self.tweets_downloaded, self.bad_tweets...] 
```

但是，我有点被困在这里，因为在服务器运行时我无法调用“report_status()” `do_download()`。有人有什么建议吗？我很感激。

我最终使用一个线程来执行“do_download”函数。在主线程中，只需调用“report_status”，它就会告诉我工作的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:24:53.813

使用[Celery](http://celeryproject.org/)或其他任务排队系统。您的所有作业都将在单独的进程中运行（无需担心线程安全或 GIL），并且可以根据需要随时更新中央数据存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:22:09.100

在更新您在 report_status 中扫描的一些 status.txt 文件的线程中完成您长期运行的工作

# jquery - 尝试调试 jquery 的 .hover 事件

> ID：12754674
> 
> 赞同：1
> 
> 时间：2012-10-05T22:07:18.597
> 
> 标签：jquery, hover

我正在使用 3 个选项卡，并且悬停事件似乎没有启动。我有一些 PHP 可以确定我们是否处于应该使用不同图像源的部分，因此是 PHP。据我所知，PHP 正在吐出正确的 SRC。

编码：

```
$("#tab1").hover(
  ("#tab1").attr("src","img/home_menu_images/png/home_mainmenu_hover_tab1.png"),
  ("#tab1").attr("src","PHP_SRC1"));

$("#tab2").hover(
  ("#tab2").attr("src","img/home_menu_images/png/home_mainmenu_hover_tab2.png"),
  ("#tab2").attr("src","PHP_SRC2"));

$("#tab3").hover(
  ("#tab3").attr("src","img/home_menu_images/png/home_mainmenu_hover_tab3.png"),
  ("#tab3").attr("src","PHP_SRC3")); 
```

`PHP_SRC(num)`围绕 echo 的 PHP 打开和关闭标记在哪里`$tab_image_(num)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:01:08.603

我的第一个倾向是你在函数`$`的开头错过了。`mouseover, mouseout`尝试将它们添加到：

```
$("#tab1").hover(
    $("#tab1").attr("src", "img/home_menu_images/png/home_mainmenu_hover_tab1.png"),
    $("#tab1").attr("src", "PHP_SRC1")
);
$("#tab2").hover(
    $("#tab2").attr("src", "img/home_menu_images/png/home_mainmenu_hover_tab2.png"),
    $("#tab2").attr("src", "PHP_SRC2")
);
$("#tab3").hover(
    $("#tab3").attr("src", "img/home_menu_images/png/home_mainmenu_hover_tab3.png"),
    $("#tab3").attr("src", "PHP_SRC3")
); 
```

如果这不起作用，请尝试将它们包装在匿名函数中：

```
$("#tab1").hover(
    function () {$("#tab1").attr("src", "img/home_menu_images/png/home_mainmenu_hover_tab1.png");},
    function () {$("#tab1").attr("src", "PHP_SRC1");}
);
$("#tab2").hover(
    function () {$("#tab2").attr("src", "img/home_menu_images/png/home_mainmenu_hover_tab2.png");},
    function () {$("#tab2").attr("src", "PHP_SRC2");}
);
$("#tab3").hover(
    function () {$("#tab3").attr("src", "img/home_menu_images/png/home_mainmenu_hover_tab3.png");},
    function () {$("#tab3").attr("src", "PHP_SRC3");}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:06:04.077

从我自己的角度来看，我真的不喜欢 jquery 选项卡...有一种更简单的方法来制作选项卡...您添加结合 ul li 标签的 html 锚点，然后在它们上添加 jquery 点击事件...在点击事件你制作一个 $post 或一个 $get 然后你在一个 div 容器中呈现你想要的东西......这比使用这些选项卡控件更简单......

```
<ul class="menu">
  <li><a onclick="function1()" class="active">tab1</a></li>
  <li><a onclick="function2()">tab2</a></li>
</ul>

<div id="content">
</div>

<script>
  function function1() {
     $('#content').html('Loading...');
        $.get("/yourdomain/someurl1", { }, function(data) {            
            $('#content').html(data);
        });
  }

  function function2() {
     $('#content').html('Loading...');
        $.post("/yourdomain/someurl2", { id: 1}, function(data) {            
            $('#content').html(data);
        });
  }
</script> 
```

由你决定

# ruby-on-rails-3 - Rails 3 Validation that only gets triggered once to simulate a warning on new records

> ID：12754675
> 
> 赞同：0
> 
> 时间：2012-10-05T22:07:22.460
> 
> 标签：ruby-on-rails-3, validation, activerecord

I was wondering what the best implementation for displaying a warning for a particular field being sent to the database.

To give you an example, somebody provides data which is considered valid, but questionable. So we want to treat it as if it was a regular validation error on the first go and confirm that it's what the user actually wants to enter. At this point they will have the option to either continue or change the data being entered. If they choose to continue they'll be given the go-ahead and we'll skip that validation on the next run-through.

**However** (and this is the part I'm not sure about), if they change that field to another value that can be considered questionable we want to take them through the same process. Keep in mind these are new records and not records that have already been persisted to the database.

Can such a feat be accomplished with basic conditional validations? Would there be a better option?

Just to clarify my application knows exactly how to handle this questionable data, but it's going to be processed differently than normal data and we just want to inform the user ahead of time with a warning.

Currently the validation is your typical custom validation method that dictates the validity of an object.

```
validate :some_field_some_rules   

def some_field_some_rules
    if some_conditions_must_be_true
      errors.add(:some_field, "warning message")
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:15:20.983

Edited, let's try with a custom validation that will be triggered only when you need to.

```
class MyModel < ActiveRecord::Base

  attr_accessor :check_questionable
  validate :questionable_values_validation, on: :create, if: Proc.new { |m| m.check_questionable }

  def initialize
    check_questionable = true
  end

  private
  def questionable_values_validation
    if attribute1 == "Questionable value"
      self.errors[:base] << "Attribute1 is questionable"
      check_questionable = false
    end
  end

end 
```

Then, when you render the create form, be sure to add an hidden_field for check_questionable :

```
f.hidden_field :check_questionable 
```

So the first time, when calling the create action, it'll save with `check_questionable = true`. If there's a questionable value, we add an error to ActiveRecord standard errors AND set the `check_questionable` to false. You'll then be re-rendering the `new` action but this time with the hidden_field set to false.

This way, when the form is re-submitted, it won't trigger `questionable_values_validation` ...

I didn't test it, might need some tweak, but it's a good start I believe!

# unit-testing - Code Contracts 在单元测试时抛出 MethodAccess 异常

> ID：12754678
> 
> 赞同：0
> 
> 时间：2012-10-05T22:07:24.450
> 
> 标签：unit-testing, exception, resharper, code-contracts

我不太清楚为什么，但是当我启用运行时合同检查时，我`MethodAccessException`在单元测试期间得到了一个。我使用*Machine.Specifications*测试框架和 ReSharper/dotCover 测试运行器。当我测试包含代码合同的程序集时，我得到了这个`MethodAccessException`：

```
Machine.Specifications.SpecificationException Should be of type System.ArgumentNullException but is of type System.MethodAccessException
    at BusinessLogic.Specifications.When_testing_whether_a_set_of_cart_items_contains_a_product_and_a_null_set_is_passed.<.ctor>b__3()
    in CartItemQuerySpecs.cs: line 66 
```

规范如下所示：

```
[Subject(typeof(ShoppingCartQueries), "Cart contains product")]
public class When_testing_whether_a_set_of_cart_items_contains_a_product_and_a_null_set_is_passed
    : with_fake_shopping_cart_repository
    {
    Establish context = () => QueryResult = CartItems.AsQueryable().ForUser(UserWithNoProductsInCart);
    Because of = () => Thrown = Catch.Exception(() => result = QueryResult.ContainsProduct(100));
    It should_throw = () => Thrown.ShouldBeOfType<ArgumentNullException>();
    static bool result;
    } 
```

被测单元如下所示：

```
[Pure]
public static bool ContainsProduct(this IQueryable<CartItem> items, int id)
    {
    Contract.Requires<ArgumentNullException>(items != null);
    return (items.Any(item => item.ProductId.Equals(id)));
    } 
```

为什么我会得到一个`MethodAccessException`？

# java - 如何在没有默认日期的情况下初始化 JCalendar

> ID：12754679
> 
> 赞同：0
> 
> 时间：2012-10-05T22:07:38.837
> 
> 标签：java, swing, calendar, jcalendar, jpopup

我正在使用[JCalendar](http://sourceforge.net/projects/flib/files/)并以这种方式对其进行初始化：

```
popup = new JPopupMenu();
calendar = new JCalendar();
popup.add(calendar);
calendar.addDateListener(new DateListener() {
    @Override
    public void dateChanged(DateEvent de) {
       Calendar c = de.getSelectedDate();
       if (c != null) {
          String data = c.get(Calendar.DAY_OF_MONTH) + "-" + (c.get(Calendar.MONTH) + 1) + "-" + c.get(Calendar.YEAR);
          dateTextField.setText(data);
          popup.setVisible(false);
       }
    }
});
dateTextField.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent e) {
        popup.show(e.getComponent(), e.getX(), e.getY());
        popup.setVisible(true);  
    }
}); 
```

这样，当我单击文本字段`dateTextField`时，它会显示弹出窗口，`JCalendar`但它会显示我今天选择的日期，如果我想在我的文本字段中显示该日期，我必须选择另一个日期，然后选择另一个时间今天的日期。如何删除默认选择的日期？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:33:34.563

似乎没有办法使用 JCalendar 完全按照您的意愿行事。一种替代方法是在您的弹出窗口中添加一个“完成”按钮，该按钮将获取当前选定的日期、设置按钮文本并关闭弹出窗口。无论如何，这对用户来说可能更直观，因为如果他们不小心点击了错误的日期，关闭弹出窗口可能会有点混乱。

# python - Python中的模运算符

> ID：12754680
> 
> 赞同：54
> 
> 时间：2012-10-05T22:07:43.957
> 
> 标签：python, operators, modulo

下面这段代码中的模有什么作用？

```
from math import *
3.14 % 2 * pi 
```

我们如何计算浮点数的模数？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-05T22:11:46.227

当你有表达式时：

```
a % b = c 
```

`n`这实际上意味着存在一个`c`尽可能小但非负的整数。

```
a - n*b = c 
```

手动，您可以一遍又一遍地减去`2`（或添加`2`，如果您的数字是负数），直到最终结果是可能的最小正数：

```
 3.14 % 2
= 3.14 - 1 * 2
= 1.14 
```

此外，`3.14 % 2 * pi`被解释为`(3.14 % 2) * pi`. 我不确定您是否打算写`3.14 % (2 * pi)`（在任何一种情况下，算法都是相同的。只需减/加，直到数字尽可能小）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-05T22:14:01.657

除了其他答案之外，[`fmod`文档](http://docs.python.org/library/math.html#math.fmod)还有一些关于该主题的有趣内容：

> `math.fmod(x, y)`
> 
> Return `fmod(x, y)`，由平台 C 库定义。请注意，Python 表达式`x % y`可能不会返回相同的结果。C 标准的意图是对于某个整数 n`fmod(x, y)`精确地（数学上；到无限精度）等于`x - n*y`，使得结果具有与 相同的符号`x`和幅度小于`abs(y)`。Python 会`x % y`返回带有符号的结果`y` ，并且对于浮点参数可能无法精确计算。例如`fmod(-1e-100, 1e100)`is `-1e-100`，但 Python 的 `-1e-100 % 1e100`is的结果`1e100-1e-100`不能完全表示为浮点数，并且四舍五入到令人惊讶的`1e100`。出于这个原因，`fmod()`使用浮点数时通常首选函数，而 Python 的`x % y`处理整数时是首选。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T22:14:23.710

您对正常模数的期望相同..例如`7 % 4 = 3`，`7.3 % 4.0 = 3.3`

当心浮点精度问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T22:12:23.347

与普通模数相同 `3.14 % 6.28 = 3.14`，就像`3.14%4 =3.14` `3.14%2 = 1.14`（余数...）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-15T14:26:32.083

**你应该使用 fmod(a,b)**

`While abs(x%y) < abs(y) is true`在数学上，因为`floats`它在数值上可能不正确，因为`roundoff`.

例如，假设 a`Python float`是一个`IEEE 754`双精度数的平台，为了与`-1e-100 % 1e100`具有相同的符号`1e100`，计算结果是`-1e-100 + 1e100`，它在数值上完全等于`1e100`。

数学模块中的函数`fmod()`返回一个结果，其符号与第一个参数的符号匹配，因此`-1e-100`在这种情况下返回。哪种方法更合适取决于应用程序。

`where x = a%b`用于整数模

# ios5 - ABAddressBook 自 iOS 6 以来性能不佳

> ID：12754683
> 
> 赞同：3
> 
> 时间：2012-10-05T22:07:59.650
> 
> 标签：ios5, ios6, abaddressbook, performance

我有一个应用程序可以在 3 个联系人和 1 个组中导入大约 12000 个号码。从 iOS 6 开始，这个过程需要的时间是 iOS 5.1 之前的 5 倍。在模拟器中它不像在设备上那么慢。

我尝试了一些分析，发现主要时间由 ABAddressBookSave 使用，执行时间为 28%。我也感觉到地址簿的一切都比以前慢了。在 iOS 5 上，它大约占总执行时间的 3%。内存和CPU没问题。

有没有人遇到过类似的问题，有没有人发现为什么会发生这种情况或找到解决方案来解决它？

**这是一个堆栈跟踪。为什么 iOS 6 这么慢？**

运行时间自身符号名称 3212.0ms 41.6% 0,0 ABAddressBookSave

3212.0ms 41.6% 0,0 ABCSave

3212.0ms 41.6% 0,0 ABCAddressBookSaveWithConflictPolicy

3198.0ms 41.4% 0,0 CPRecordStoreSaveWithPreAndPostCallbacksAndTransactionType

3134.0ms 40.6% 0,0 CFDictionaryApplyFunction

3134.0ms 40.6% 0,0 CFBasicHashApply

3134.0ms 40.6% 0,0 __CFDictionaryApplyFunction_block_invoke_0

3134.0ms 40.6% 0,0 CPRecordStoreUpdateRecord

2971.0ms 38.5% 0,0 _didSave

2971.0ms 38.5% 0,0 ABCDContextUpdateSearchIndexForPersonAndProperties

2773.0ms 35.9% 0,0 CPSqliteStatementPerform

2773.0ms 35.9% 0,0 sqlite3_step

2773.0ms 35.9% 0,0 sqlite3VdbeExec

2772.0ms 35.9% 0,0 fts3UpdateMethod

2765.0ms 35.8% 0,0 fts3PendingTermsAdd

2734.0ms 35.4% 0,0 ABCFFTSTokenizerOpen

2734.0ms 35.4% 0,0 ABTokenListPopulateFromString

2631.0ms 34.1% 1,0 CFStringGetBytes

2630.0ms 34.1% 2624,0 __CFStringEncodeByteStream

6.0ms 0.0% 0,0 CFStringEncodingIsValidEncoding

**这里是 iOS 5 中的相同方法**

运行时间自身符号名称

245.0ms 12.9% 0,0 ABAddressBookSave

245.0ms 12.9% 0,0 ABCSave

245.0ms 12.9% 0,0 ABCAddressBookSaveWithConflictPolicy

234.0ms 12.3% 0,0 CPRecordStoreSaveWithPreAndPostCallbacksAndTransactionType

167.0ms 8.8% 0,0 CFDictionaryApplyFunction

167.0ms 8.8% 0,0 CFBasicHashApply

167.0 毫秒 8.8% 0,0 __CFDictionaryApplyFunction_block_invoke_0

167.0ms 8.8% 0,0 CPRecordStoreUpdateRecord

162.0ms 8.5% 0,0 CFDictionaryApplyFunction

162.0ms 8.5% 0,0 CFBasicHashApply

162.0ms 8.5% 0,0 __CFDictionaryApplyFunction_block_invoke_0

162.0ms 8.5% 0,0 CPRecordStoreSaveProperty

158.0ms 8.3% 0,0 ABCMultiValueSave

158.0ms 8.3% 1,0 ABCDBContextSaveMultiValue

143.0ms 7.5% 0,0 CPSqliteConnectionAddRecord

143.0ms 7.5% 1,0 CPSqliteConnectionAddRecordWithRowid

85.0ms 4.5% 0,0 CPSqliteStatementPerform

16.0ms 0.8% 2,0 CFR释放

# php - 谷歌地理编码。解析 JSON 问题

> ID：12754686
> 
> 赞同：3
> 
> 时间：2012-10-05T22:08:19.190
> 
> 标签：php, json, geocode

我想从他们的邮政/邮政编码（加拿大/美国）的谷歌地理编码中获取用户城市、州/省、国家/地区。我以 JSON 格式检索数据：[https ://developers.google.com/maps/documentation/geocoding/#JSON](https://developers.google.com/maps/documentation/geocoding/#JSON)

问题是“address_components”的数量/顺序并不总是相同。我使用的是这样的：`$geocodedinfo['results'][0]['address_components'][3]['short_name'];` 但我很快意识到这并不总是省/州，因为有时谷歌会在'address_components'下添加一个额外的元素。

有没有办法仅针对我需要的细节（即：城市、州/省、国家/地区）解析结果？

**编辑**当我得到它时，我实际上解码了 JSON`json_decode($result, true)`

```
Array
(
[results] => Array
    (
        [0] => Array
            (
                [address_components] => Array
                    (
                        [0] => Array
                            (
                                [long_name] => V2X 2P6
                                [short_name] => V2X 2P6
                                [types] => Array
                                    (
                                        [0] => postal_code
                                    )

                            )

                        [1] => Array
                            (
                                [long_name] => Maple Ridge
                                [short_name] => Maple Ridge
                                [types] => Array
                                    (
                                        [0] => locality
                                        [1] => political
                                    )

                            )

                        [2] => Array
                            (
                                [long_name] => Maple Ridge
                                [short_name] => Maple Ridge
                                [types] => Array
                                    (
                                        [0] => administrative_area_level_3
                                        [1] => political
                                    )

                            )

                        [3] => Array
                            (
                                [long_name] => Greater Vancouver Regional District
                                [short_name] => Greater Vancouver Regional District
                                [types] => Array
                                    (
                                        [0] => administrative_area_level_2
                                        [1] => political
                                    )

                            )

                        [4] => Array
                            (
                                [long_name] => British Columbia
                                [short_name] => BC
                                [types] => Array
                                    (
                                        [0] => administrative_area_level_1
                                        [1] => political
                                    )

                            )

                        [5] => Array
                            (
                                [long_name] => Canada
                                [short_name] => CA
                                [types] => Array
                                    (
                                        [0] => country
                                        [1] => political
                                    )

                            )

                    )

                [formatted_address] => Maple Ridge, BC V2X 2P6, Canada
                [geometry] => Array
                    (
                        [bounds] => Array
                            (
                                [northeast] => Array
                                    (
                                        [lat] => 49.2214351
                                        [lng] => -122.6577849
                                    )

                                [southwest] => Array
                                    (
                                        [lat] => 49.219268
                                        [lng] => -122.663613
                                    )

                            )

                        [location] => Array
                            (
                                [lat] => 49.2202679
                                [lng] => -122.660587
                            )

                        [location_type] => APPROXIMATE
                        [viewport] => Array
                            (
                                [northeast] => Array
                                    (
                                        [lat] => 49.2217005303
                                        [lng] => -122.6577849
                                    )

                                [southwest] => Array
                                    (
                                        [lat] => 49.2190025697
                                        [lng] => -122.663613
                                    )

                            )

                    )

                [types] => Array
                    (
                        [0] => postal_code
                    )

            )

    )

[status] => OK
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:34:00.300

您将不得不遍历结果。
大多数相关的 PHP 函数不支持多维数组，而那些支持的函数无论如何都会循环。

你可能会想要这样的东西：

```
foreach ($geocodedinfo["results"] as $result) {
    foreach ($result["address_components"] as $address) {
        // Repeat the following for each desired type
        if (in_array("country", $address["types"])) {
            $country = $address["long_name"];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:35:29.347

试试看这个，[http](http://php.net/manual/en/control-structures.foreach.php) ://php.net/manual/en/control-structures.foreach.php它用于循环数组，你可以做类似的事情，

```
foreach ($result['results'][0]['address_components'] as $key => $val) 
    { 
    if (in_array('country', $result['results'][0]['address_components'][$key]['types'][0])) 
    { 
    echo $result['results'][0]['address_components'][$key]['long_name']; 
    } 
} 
```

像这样的东西应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:39:20.060

您可以通过`foreach`循环运行结果并获取您正在寻找的数据。

我正在对 Google 类型的含义做出最好的猜测，我可能会不以为然。

```
$translate = array(
    'locality' => 'city',
    'administrative_area_level_3' => 'area', // not sure what this one is
    'administrative_area_level_2' => 'county', // regional district ?
    'administrative_area_level_1' => 'state', // province
    'country' => 'country',
    'postal_code' => 'zip', // postal code
);

$address_components = array( );
foreach ($geocodedinfo['results'][0]['address_components'] as $component) {
    $address_components[$translate[$component['type'][0]]] = $component['long_name'];
}

var_dump($address_components); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-09T20:41:03.467

// 解析json响应 `$jsondata = json_decode($data,true);` `$results = $jsondata['results'][0];` `$addr =$results['formatted_address'];`

这允许您访问长格式的地址

326 London Road, Newbury, Berkshire, West Berkshire RG14 2DA, UK

# emacs - 如何通过键名检索 cons 单元格的值？

> ID：12754687
> 
> 赞同：3
> 
> 时间：2012-10-05T22:08:23.153
> 
> 标签：emacs, elisp

假设我有一个 cons 单元格列表，如下所示：

```
(setq foo '(("a" . 1) ("b" . 2) ("c" . 3))) 
```

我想通过“键名”检索特定 cons 单元格的值。有没有可以让我这样做的功能？

例如

```
(get-by-key "a" foo) ;; => 1 
```

或类似的东西。提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T22:41:09.983

这样的列表称为*关联列表*，简称*alist*。形式上，关联列表是键及其关联值的组合列表。

该`assoc`功能是您正在寻找的。它接受一个键和一个 alist 作为其参数，并返回 alist 中键的第一个关联[`equal`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Equality-Predicates.html#index-equal-127)：

```
ELISP> (setq foo '(("a" . 1) ("b" . 2) ("c" . 3)))
(("a" . 1)
 ("b" . 2)
 ("c" . 3))

ELISP> (assoc "a" foo)
("a" . 1)

ELISP> (cdr (assoc "a" foo))
1 
```

该`assoc-string`函数类似于该`assoc`函数，但特定于其键为字符串的关联列表。除了 key 和 alist 之外，它还可以采用另一个可选参数，使 key 比较不区分大小写：

```
ELISP> (assoc-string "a" foo)
("a" . 1)

ELISP> (assoc-string "A" foo)
nil

ELISP> (assoc-string "A" foo t)
("a" . 1) 
```

有关关联列表相关函数的完整列表，请参阅[GNU Emacs Lisp 参考手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Association-Lists.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-25T09:19:55.100

[assoc-default](https://www.gnu.org/software/emacs/manual/html_node/elisp/Association-Lists.html#index-assoc_002ddefault-429)允许您通过“键名”检索特定 cons 单元格的值。

```
ELISP> (setq foo '(("a" . 1) ("b" . 2) ("c" . 3)))
(("a" . 1)
 ("b" . 2)
 ("c" . 3))

ELISP> (assoc-default "a" foo)
1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-26T22:59:45.230

[`alist-get`](https://www.gnu.org/software/emacs/manual/html_node/elisp/Association-Lists.html#index-alist_002dget)以 KEY 和 ALIST 作为参数为您提供与 KEY 关联的 VALUE。例如，

```
(alist-get 'a '((a . 1) (b . 2) (c . 3))) 
```

评估为 1。

默认情况下进行比较`eq`。但它的完整参数列表是：

```
(alist-get KEY ALIST &optional DEFAULT REMOVE TESTFN) 
```

所以可以给出：

1.  如果 KEY 不匹配，则返回一个 DEFAULT 值，
2.  如果新值为 DEFAULT，则删除 KEY VALUE 对的标志 REMOVE

```
(setf (alist-get KEY ALIST DEFAULT t) DEFAULT) 
```

3.  `TESTFN`KEY 与 ALIST 的汽车比较的测试功能

# c# - 将类设为可序列化的缺点

> ID：12754688
> 
> 赞同：12
> 
> 时间：2012-10-05T22:08:24.057
> 
> 标签：c#, .net, serialization, azure

我正在使用 Azure Cache 预览版，需要使一些类可序列化。

使类可序列化有什么缺点 - 例如性能问题？

```
[Serializable]
public class MyClass {} 
```

我发现很少有相关的问题，但它们与缺点无关。

1.  [所有 .NET 异常都可序列化吗？](https://stackoverflow.com/questions/342528/are-all-net-exceptions-serializable)

2.  [将类标记为可序列化的缺点](https://stackoverflow.com/questions/1236857/drawbacks-of-marking-a-class-as-serializable)

预先感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T22:14:59.907

不，仅仅标记为 没有内在开销`[Serializable]`。我唯一的问题是，`BinaryFormatter`并且`NetDataContractSerializer`是糟糕的序列化程序，并且大多数其他序列化程序对这个标志不感兴趣（好吧，我可能有偏见）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T22:22:09.320

假设您谈论的是使用`Serializable`属性的成本而不是实际的序列化过程，一个缺点是第三方通常会假设该类被设计为可序列化的。虽然可能是这种情况，但如果您只是为了它而将其标记为可序列化（并且如果第三方有可能与之交互），那么您可能需要花时间确保该类适合以有效的方式进行序列化。因此，从这个角度来看，这更像是一种资源权衡，而不是技术权衡。

正如 Marc Gravell 所说，从技术角度来看，仅使用该属性不会有任何开销。

# python - 为什么我会收到此索引错误？

> ID：12754698
> 
> 赞同：0
> 
> 时间：2012-10-05T22:09:37.300
> 
> 标签：python

我正在尝试为[LPTHW](http://learnpythonthehardway.org/)做一个额外的学分分配，我想我可能正在尝试一些我不知道该功能的真正目的的东西。我正在尝试测试购买的东西，特别是在我的代码中，如果用户购买了一件物品，它会从他们当前的物品列表中弹出该物品，并将其替换为新的。当我测试购买功能时，我得到了一个索引错误。关于如何使这项工作正常工作的任何想法？

```
def buy_weapon(weapons):
    """big bit of code that allows you to buy a weapons from a weapon list.
The function acts a little differently after level zero weapons"""
    global current_weapon
    if weapons == level_zero_weapons:
        sword_price = level_zero_price()
        blunt_price = level_zero_price()
        agile_price = level_zero_price()
        print t.bright_yellow_on_magenta + """
Please type in the weapon you want to buy.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if "sword" in weapon_choice:
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append(current_weapon)
        elif weapons[1] in weapon_choice:
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append(current_weapon)
        elif weapons[2] in weapon_choice:
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append(current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_zero_weapons)

    elif weapons == level_one_weapons:
        sword_price = level_one_price()
        blunt_price = level_one_price()
        agile_price = level_one_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price, weapons[2],
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append(current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append(current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append(current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_one_weapons)

    elif weapons == level_two_weapons:
        sword_price = level_two_price()
        blunt_price = level_two_price()
        agile_price = level_two_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append(current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append(current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append(current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_two_weapons)

    elif weapons == level_three_weapons:
        sword_price = level_three_price()
        blunt_price = level_three_price()
        agile_price = level_three_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append(current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append(current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append(current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_three_weapons)

    elif weapons == level_four_weapons:
        sword_price = level_four_price()
        blunt_price = level_four_price()
        agile_price = level_four_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append(current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append(current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.pop(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append(current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_four_weapons)      
    else:
        print"~~~There is a bug somwhere, forgot to assign (weapons)\n\n\n"
    raw_input(t.white_on_red("""
Your current weapon is now a %s. Press Enter To Continue
""" % current_weapon))

# Weapon lists 
level_zero_weapons = ['short sword', 'club', 'dagger']
level_one_weapons = ['sword' 'mace', 'rapier']
level_two_weapons = ['long sword', 'morningstar', 'trident']
level_three_weapons = ['claymore', 'flail', 'sycthe']
level_four_weapons = ['bastard sword, dragon bone, crystal halbred'] 
```

这是我尝试运行文件的地方。

```
pp.pprint(character_sheet)
raw_input(t.white_on_red("Please Press Enter To Buy A Weapon"))
buy_weapon(level_zero_weapons)
buy_weapon(level_one_weapons)
pp = pprint.PrettyPrinter(indent=30)
pp.pprint(character_sheet) 
```

最后这是我的输出。

```
Your current weapon is now a dagger. Press Enter To Continue

Traceback (most recent call last):
  File "lodarena.py", line 398, in <module>
    character_gen()
  File "lodarena.py", line 393, in character_gen
    buy_weapon(level_one_weapons)
  File "lodarena.py", line 139, in buy_weapon
    """ % (weapons[0], sword_price, weapons[1], blunt_price, weapons[2], agile_price)
IndexError: list index out of range
Raymond-Weisss-MacBook-Pro:lodarena Raylug$ 
```

PS我正在使用python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:23:52.987

在您的`buy_weapons`函数中，将第一行设为“打印武器”，只是为了调试您的代码。. . 你可能没有通过你认为你正在通过的东西

当你在学习 Python 时，你正在做我们大多数人在第一次学习一门语言时所做的同样的事情，你可能想研究一些数据结构。我猜你还没有准备好使用对象，但使用嵌套字典可能是值得的，例如：

```
weapons = {1 : {'sword': {'name':'name here',
                            'price': 123},
                  'blunt': {'name':'name here',
                            'price': 123},
                  'agile': {'name':'name here',
                            'price': 123},
                  },
           2 : {'sword': {'name':'name here',
                            'price': 123},
                  'blunt': {'name':'name here',
                            'price': 123},
                  'agile': {'name':'name here',
                            'price': 123},
                  },
          #add levels as you need
          } 
```

基本上，您正在创建一个花哨的查找类型的东西，跟踪，级别，然后是武器类型，名称和价格，您可以像这样访问它们：

```
level = 1
type = 'sword'
weaponname = weapons[level][type]['name']
weaponprice = weapons[level][type]['price'] 
```

# c++ - 为什么 queue::pop() 之后 queue::front() 的返回值有效

> ID：12754701
> 
> 赞同：1
> 
> 时间：2012-10-05T22:09:57.083
> 
> 标签：c++

我是 C++ 新手，遇到了*所谓的* 错误，但不知何故我的程序可以正常工作.. 这是代码

```
#include<iostream>
#include<queue>
#include <string>

int main()
{
 string s ("cat");
 queue<string> _queue;
 _queue.push(s);
 string & s1 = _queue.front();
 _queue.pop();
 // at this time s1 should become invalid as pop called destructor on s
 std::cout << s1 << std::endl;
 return 0;

 } 
```

即使 s1 是对无效对象的引用，它也可以正常工作。有没有办法我可以断言 s1 真的指的是一个无效的对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:12:42.250

尝试以您在代码中的方式访问被破坏的对象会导致未定义的行为。不，没有语言提供的方法可以针对这种情况执行运行时检查。确保此类事情不会在您的代码中发生完全是您的责任。

在您的实验中“它只是有效”的事实只是一个意外（与往常一样，具有一定程度的典型计算机确定性）。您的程序中可能会发生一些完全不相关的事情，并且此代码将不再“工作”。

# meteor - 如何嵌套 Handlebars JS？

> ID：12754702
> 
> 赞同：1
> 
> 时间：2012-10-05T22:10:28.487
> 
> 标签：meteor, handlebars.js

由于我的 Handlebars JS 模板，我遇到了一个令人沮丧的错误。

```
Error: Parse error on line 9:
...      {{/each}}    {{/if}}
----------------------^
Expecting 'EOF' 
```

有问题的车把：

```
{{if showSingle}}
    {{#with single}}
        {{> postSingle}}
    {{/with}}
{{else}}
   {{#each posts}}
        {{> postItem}}
    {{/each}}
{{/if}} 
```

这样的嵌套是不可能的吗？

只是为了把事情放在上下文中，这工作得很好：

```
{{#each posts}}
    {{> postItem}}
{{/each}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:21:05.480

缺少`#`第一个`if`：

```
{{#if showSingle}}
    {{#with single}}
        {{> postSingle}}
    {{/with}}
{{else}}
   {{#each posts}}
        {{> postItem}}
   {{/each}}
{{/if}} 
```

# r - 使用带有 R 的 matlab mex 文件

> ID：12754703
> 
> 赞同：-3
> 
> 时间：2012-10-05T22:10:36.990
> 
> 标签：r, matlab

我想使用用 c 编写的某个函数与 matlab 和 mex 系统一起使用。关于如何将其移植到 R 的任何想法/经验？

由于评论说这是模糊的，一些细节。我需要与 R 一起使用某个编写良好的 matlab 函数（我的所有其余代码都在 R 中）。这个函数有一个空的 m 文件，只有文档。所有工作都在相应的 .c 文件中，但这是专门为与 matlab 一起使用而编写的 c 代码，因此包含对 mx 函数的大量调用，据我所知，这是对 matlab 内部生活的挂钩。

通过数据文件进行通信的建议不起作用，我需要在迭代算法中使用此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:45:18.907

[这个 pdf 文件](http://www.stat.berkeley.edu/classes/s243/calling.pdf)可能会给你一些提示。我没有任何将 C 与 R 结合使用的经验，但这似乎是可能的。

文件中未提及的一种我有时喜欢使用的方法是简单地使用您的 MATLAB/R 程序写出一个数字文本文件以输入到您的 C 程序中（例如`c_data.dat`），然后使用系统命令在喷出一些输出数字（例如`c_output.dat`）之前调用一个处理数据文件的独立 C 程序。然后让您的 MATLAB/R 程序从文件中读取数据。

在 MATLAB 中，这可能如下所示：

```
%# custom function to write to file
function_write_data( my_data_matrix, 'c_data.dat'); 

%# call the c program
system('./c_program c_data.dat c_output.dat');

%# read the results
my_results_matrix = function_read_data('c_output.dat'); 
```

（我对 R 语法没有信心——你必须自己解决这个问题！）

在您的场景中这样做的好处是您可以为 R 和 MATLAB 使用完全相同的 C 程序。但是，您必须编写读/写函数，并且在某些情况下，读/写开销可能会令人望而却步（即不会显着提高速度）..

# java - 带有apache常用电子邮件的进度条

> ID：12754709
> 
> 赞同：1
> 
> 时间：2012-10-05T22:11:54.553
> 
> 标签：java, jsp, email, progress-bar, apache-commons-email

我正在使用 apache **common email library**发送电子邮件，如下

```
// Create the attachment
   EmailAttachment attachment = new EmailAttachment();
   attachment.setPath("mypictures/john.jpg");
   attachment.setDisposition(EmailAttachment.ATTACHMENT);
   attachment.setDescription("Picture of John");
   attachment.setName("John");

// Create the email message
   MultiPartEmail email = new MultiPartEmail();
   email.setHostName("mail.myserver.com");
   email.addTo("jdoe@somewhere.org", "John Doe");
   email.setFrom("me@apache.org", "Me");
   email.setSubject("The picture");
   email.setMsg("Here is the picture you wanted");

// add the attachment
   email.attach(attachment);

// send the email
   email.send(); 
```

我想显示进度条，直到附加文件并发送..

我们该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:53:21.017

我看不出有任何方法可以从 commons-email 进行回调，它可以让您知道有多少数据已经转换，因此除非您侵入 apache commons 电子邮件本身，否则您不会从库本身收到通知。

我看到“模拟”的唯一另一种方法是建立一些关于传输通常需要多长时间的知识，即您通常每秒传输多少字节并将其用于进度对话框显示。但是如果传输速度随时间变化很大或者应用程序与不同的网络连接类型一起使用，这自然会导致进度条中的信息不准确。

# c++ - c#程序员尝试c++中的事件

> ID：12754710
> 
> 赞同：4
> 
> 时间：2012-10-05T22:12:01.080
> 
> 标签：c++

大家好：我是一位经验丰富的 c# 程序员，试图在 c++ 中做一些工作，但我不确定这样做的正确方法：

我正在创作一个需要通知消费类发生了什么事的类。

如果我用 c# 编写这个，我会在我的类上定义一个事件。

c++ 中没有事件，所以我试图找出正确的方法是什么。我已经考虑过回调函数，但是如何处理我想要执行成员函数（不是静态函数）的情况。

更具体地说，我真正需要做的是处理事件，但可以访问处理事件的对象实例中的成员状态。

我一直在研究 std::tr1:function，但我无法让它工作。

我不认为有人想将以下示例 c# 示例转换为正确/最佳实践 c++ 的示例（我需要 ANSI c++）？（请记住，我几乎没有 c++ 经验——不要假设我知道任何长期建立的 c++ 约定——我不知道；）；

一个简单的 c# 控制台应用程序（在我的机器上工作）：

```
 using System;

namespace ConsoleApplication1
{
    public class EventSource
    {
        public event EventHandler<EchoEventArgs> EchoEvent;

        public void RaiseEvent(int echoId)
        {
            var echoEvent = this.EchoEvent;
            if (echoEvent != null)
                echoEvent(this, new EchoEventArgs() {EchoId = echoId});
        }
    }

    public class EchoEventArgs : EventArgs
    {
        public int EchoId { get; set; }
    }

    public class EventConsumer
    {
        public int Id { get; set; }
        public EventConsumer(EventSource source)
        {
            source.EchoEvent += OnEcho;
        }

        private void OnEcho(object sender, EchoEventArgs args)
        {
            // handle the echo, and use this.Id to prove that the correct instance data is present.
            Console.WriteLine("Echo!  My Id: {0}  Echo Id: {1}", this.Id, args.EchoId);
        }
    }

    internal class Program
    {
        private static void Main(string[] args)
        {
            var source = new EventSource();
            var consumer1 = new EventConsumer(source) { Id = 1 };
            var consumer2 = new EventConsumer(source) { Id = 2 };
            source.RaiseEvent(1);
            Console.ReadLine();
        }
    }
} 

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:30:51.957

基本思想是采用函数对象，例如，`std::function<Signature>`作为回调之类的东西。这些不是函数指针，但可以调用。标准 C++ 库（用于 C++ 2011）包含许多类和函数，例如，`std::mem_fn()`它们`std::bind()`允许使用函数（包括成员函数）作为函数对象。

缺少的部分是支持注册多个事件的东西：`std::function<Signature>`代表一个功能。但是，很容易将它们放入，例如，放入`std::vector<std::function<Signature>>`. 变得更有趣（并且需要可变参数模板轻松完成）是创建一个事件类，该类封装了多个事件的抽象，这些事件开始注册、可能未注册和调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:29:06.287

C++ 有一个函子的概念：一个可调用的对象。你需要阅读它们。

考虑一个已覆盖的对象`operator()`。你传递这样一个对象的一个​​实例。之后，您可以像调用常规函数一样调用它。并且可以保持一个状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T23:03:20.377

Boost 中还有[Signals2](http://www.boost.org/doc/libs/1_51_0/doc/html/signals2.html)库，它提供了一个非常接近真实 C# 事件的 API，至少在惯用意义上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T00:39:50.623

Qt 有一些可以帮助你的东西，叫做 Signals and Slots：http: [//qt-project.org/doc/qt-4.8/signalsandslots.html](http://qt-project.org/doc/qt-4.8/signalsandslots.html)

它允许您指定对象具有的信号（您要侦听的事件）和插槽（接收端），然后您可以连接它们。不止一个对象可以听到您提到您需要的信号。

Qt 是一个大型应用程序框架，所以我不确定如何仅使用它的信号和插槽部分。但是，如果您正在构建一个完整的 GUI 应用程序，那么 Qt 的其余部分也可能使您受益（很多 ui 事件的东西都是基于信号和插槽的）。

# c# - Metro App - 使用 C#/VB 获取触摸/鼠标的绝对指针位置

> ID：12754711
> 
> 赞同：0
> 
> 时间：2012-10-05T22:12:12.687
> 
> 标签：c#, vb.net, windows-8, microsoft-metro

我一直在尝试这样做，但我没有成功。

我的 Metro 应用程序页面中有一个带有文本块的堆栈面板和一个背景为黑色的网格（名为：grdTheHelper，放置在网格外部）（以便在进入页面时可见）

我的要求是，当我触摸/单击堆栈面板中的文本块时，黑色网格恰好出现在我单击的位置。

这怎么可能。我试过了

```
 Dim XY As New TranslateTransform

  Private Sub MainPage_Loaded(sender As Object, e As RoutedEventArgs) Handles Me.Loaded
    grdTheHelper.RenderTransform = XY
  End Sub

 Private Sub txt1_Tapped(sender As Object, e As TappedRoutedEventArgs) Handles txt1.Tapped
         Dim AbsXY As Point
         AbsXY = e.GetPosition(Me)
         XY.X = AbsXY.X
         XY.Y = AbsXY.Y
    End Sub 
```

但这让网格离我接触的地方有点太远了。我一无所知。我做错什么了吗？TranslateTransform 是否仅用于通过处理 ManipulationDelta 来移动对象？应该使用其他东西吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:42:19.983

如果您有这样的 XAML：

```
<Rectangle x:Name="Rect1" Fill="White" Height="100" Width="100" />

<Rectangle x:Name="Rect2" Fill="Green" Height="100" Width="100" 
            ManipulationMode="All"
            ManipulationDelta="Rect2_ManipulationDelta_1">
    <Rectangle.RenderTransform>
        <CompositeTransform x:Name="Rect2Transform" />
    </Rectangle.RenderTransform>
</Rectangle> 
```

和这样的代码：

```
private void Rect2_ManipulationDelta_1(object sender, ManipulationDeltaRoutedEventArgs e)
{
    Rect2Transform.TranslateX += e.Delta.Translation.X;
    Rect2Transform.TranslateY += e.Delta.Translation.Y;

    var _Visual = Rect2.TransformToVisual(this);
    var _Location = _Visual.TransformPoint(new Point());

    Rect1.SetValue(Canvas.LeftProperty, _Location.X);
    Rect1.SetValue(Canvas.TopProperty, _Location.Y - 100);
} 
```

在上面的代码中，我将 rect2 保留在当前指针在屏幕上的任何位置。然后该方法将 rect1 直接放在 rect2 的新位置之上。

这确切地演示了如何从指针设备或相对于屏幕上的对象获取绝对位置。这就是你问题的答案！

# android - 在 Android 电话中添加背景噪音

> ID：12754712
> 
> 赞同：2
> 
> 时间：2012-10-05T22:12:16.420
> 
> 标签：android, audio, call

从我目前所了解的情况来看，在使用 API 进行电话通话期间，不可能弄乱从电话传出和传入的音频流。

如果有人操纵 Android 操作系统的源代码，是否有可能做到这一点，或者这是一项不可能完成的复杂任务？

# c# - 控件的默认属性

> ID：12754718
> 
> 赞同：0
> 
> 时间：2012-10-05T22:13:06.023
> 
> 标签：c#, winforms, visual-studio-2010, controls

当我通过设计器将控件添加到窗体时，并非控件的所有属性都出现在设计器代码中。例如，当我添加一个属性时，除非它设置为 ，否则`ListBox`该`UseWaitCursor`属性不会出现在设计器代码中`True`。当我将其更改为它时，`False`它会从设计器代码中消失，这让我认为这些属性以某种方式具有默认值，并且如果保留为默认值，则不会出现在设计器代码中。

有人可以帮助我了解设计师的工作方式以及所有这些都在哪里被跟踪。我问的原因是我目前正在编写一个扩展第三方 ActiveX 控件的类，我计划在运行时动态初始化它。我正在浏览设计器代码（当通过设计器添加第三方控件时）并且它的许多属性没有出现在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:29:20.883

这是通过 [DefaultValue] 属性完成的。Control.UseWaitCursor 属性与此类似：

```
[DefaultValue(false)]
public bool UseWaitCursor
{
   // etc..
} 
```

因此，如果您在“属性”窗口中将值保留为 False，则设计人员知道它不应该以**粗体**显示该值，并且没有必要将属性分配放在 InitializeComponent() 方法中，因为默认值已经很好了。ActiveX 控件当然也会有很多属性设置为其默认值。

# ruby-on-rails - mongoid-paperclip：“识别”命令无法识别照片

> ID：12754720
> 
> 赞同：2
> 
> 时间：2012-10-05T22:13:22.110
> 
> 标签：ruby-on-rails, mongoid, paperclip, unicorn

我正在从*Active Record*迁移到*Mongoid*，而这个回形针的东西过去可以正常工作。我正在使用*Ubuntu 12.04*。

我的 mongoid 文档中有这段代码：

```
has_mongoid_attached_file :photo,
  :styles => {
    :thumb => "60x60",
    :small => "100x100",
    :medium => "300x200",
    :large => "600x400"
  },
  :storage => :s3,
  :s3_credentials => "#{Rails.root}/config/s3.yml",
  :path => "#{Rails.env}/merc:attachment/:id/:style.:extension",
  :url => ":s3_alias_url",
  :bucket => '%^&*&^' 
```

我安装了*rmagick* gem 并`command_path`指向各种 imagemagick 命令所在的位置 -> '/usr/bin'。

我使用*Unicorn*作为我的网络服务器，并且通过将其放在我的视图中验证了 identiy 和 convert 可用：

```
<%= `which convert` %>
<%= `echo $PATH` %> 
```

但是，唉，当我尝试上传图像时，我得到：

```
Photo /tmp/qdoba20121005-27609-1m3kq9c.jpg is not recognized by the
'identify' command.  Photo /tmp/qdoba20121005-27609-1m3kq9c.jpg is not
recognized by the 'identify' command.  Photo
/tmp/qdoba20121005-27609-1m3kq9c.jpg is not recognized by the
'identify' command.   Photo /tmp/qdoba20121005-27609-1m3kq9c.jpg is
not recognized by the 'identify' command. 
```

似乎对我定义的每一种风格都有一种。

我已经确认该文件存在，并且可以从命令行对文件运行 identify。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:08:36.833

Cocaine gem 的最新更新正在破坏许多人的 imagemagick 文件名 - 检查它，因为将 Cocaine 回滚到以前的版本可能会有所帮助。

看这里：

[https://github.com/thoughtbot/paperclip/issues/1038](https://github.com/thoughtbot/paperclip/issues/1038)

# c# - 是否可以在不传递容器的情况下在温莎城堡中使用范围生活方式？

> ID：12754730
> 
> 赞同：9
> 
> 时间：2012-10-05T22:14:08.207
> 
> 标签：c#, dependency-injection, inversion-of-control, castle-windsor, ioc-container

人们普遍认为，在应用程序周围传递 IoC 容器并将其用作服务定位器是不好的做法。

我更喜欢仅在我的应用程序的复合根中使用容器，并且倾向于对 Resolve() 进行一次调用 - 解析我的应用程序中的顶级对象并回复容器以将依赖项注入对象图中较低的类。

Castle Windsor 最近添加了一种范围生活方式，您可以在其中调用 container.BeginScope() 在“使用”块中。在此“使用”块中，解析使用范围生活方式注册的组件将在“使用”块的持续时间内每次返回相同的实例。

```
container.Register(Component.For<A>().LifestyleScoped());

using (container.BeginScope())
{
    var a1 = container.Resolve<A>();
    var a2 = container.Resolve<A>();
    Assert.AreSame(a1, a2);
} 
```

**问题：**鉴于 BeginScope() 是容器上的扩展方法，我看不到如何在应用程序中使用作用域生活方式，除非容器被传递（我真的不想这样做）。有没有人有任何关于在哪里/如何使用范围生活方式的例子？

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T01:28:48.027

我认为使用通常是在工厂内部，通常可以看到容器。想象一个 Web 应用程序：从某种意义上说，MVC 应用程序或“页面”中控制器的每次调用都在运行一个半独立的程序。让那个“程序”解决它自己的依赖关系并不是不合理的。也就是说，每个控制器调用都应该使用容器解决其依赖关系。

在特定 Web 请求、TCP 请求或用户会话的范围内，您可能希望容器以不同的方式解析对象。这是您在自己的工厂内干净利落地这样做的一种方式。与 IoC 的所有用途一样，您必须小心不要滥用它，以免业务逻辑最终潜入您的注册代码。

# vbscript - 如何使用 VBScript 将数据添加到现有 Excel 文件中的特定列

> ID：12754731
> 
> 赞同：1
> 
> 时间：2012-10-05T22:14:15.207
> 
> 标签：vbscript

我目前正在进行自动化测试，需要将动态值写入特定列中的现有 excel 文档，这是我目前所拥有的。原谅我是新手

```
Sub WriteTRNtoExcelDoc
  Dim fileName, sheetName
  fname = "<Path_To_The_File>"
  sheetName = "Sheet1"

  Set app = Sys.OleObject("Excel.Application")
  Set book = app.Workbooks.Open(fname)
  Set sheet = book.Sheets(sheetName)

  ' What do I do next to add a value to a specific column or cell in this
  ' spreadsheet?

End Sub 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:11:30.870

在 VBScript 中创建一个 Excel 实例

```
CreateObject("Excel.Application") 
```

一个已经在运行的 Excel 实例可以被抓取

```
GetObject(, "Excel.Application") 
```

在工作表中，您可以使用以下[`Cells`](http://msdn.microsoft.com/en-us/library/office/bb148836%28v=office.12%29.aspx)属性访问单元格：

```
Set app = CreateObject("Excel.Application")
app.Visible = True
Set book = app.Workbooks.Open(fname)
Set sheet = book.Sheets(sheetName)

sheet.Cells(2,3).Value = "foo" 
```

**编辑：**如果您需要在给定列中找到第一个空单元格，您可以使用以下内容：

```
row = 1
Do Until IsEmpty(sheets.Cells(row, 3).Value)
  row = row + 1
Loop

sheet.Cells(row, 3).Value = RemPropValue 
```

# c - 用带符号的结果减去 2 个指针，适用于红黑树“比较器”的输入

> ID：12754733
> 
> 赞同：1
> 
> 时间：2012-10-05T22:14:19.827
> 
> 标签：c, pointers

在C中，以下工作吗？

```
struct fdBase *left, *right;
int result = (int)(left - right); 
```

`result`可以是负数。如果这不起作用，我该怎么写？

我的目标是为我的红黑树排序函数提供一些东西，即所谓的指针“比较器”。**我不是在做数组工作**，我需要指针之间的实际差异，以字节为单位。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T22:17:29.450

根据定义，C 中两个指针相减的结果具有带符号的结果。结果具有`ptrdiff_t`类型，即有符号整数类型。

这里重要的细节是你不能只减去两个任意指针。为了定义结果，指针必须指向同一数组的元素（或指向假想的“结束后一个”元素）。

减法的结果以元素表示，而不是以字节表示，即它与 C 中的其余指针算术一致。如果指向索引大于 的元素`A - B`，则结果可以并且将为负数。`A``B`

如果您需要指针指向的原始地址之间的字节差异，则或多或少正式有效的方法如下

```
intptr_t difference = (intptr_t) left - (intptr_t) right; 
```

这样你就不会减去指针（因为它不是为任意指针定义的），而是减去它们的整数表示。转换的结果`(intptr_t) some_pointer`是实现定义的，但通常是存储在指针中的物理内存地址。`1`不幸的是，这种方法有它自己的一些问题：它可能对具有高位的指针产生不正确的结果。此类指针在转换为 时通常会产生负值`intptr_t`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:48:04.573

尝试

```
struct fdBase *left, *right;
void *result = (void *)left - (void *)right; 
```

另外两个想法：

1 - 假设您使用的函数要求您的比较器在 (left < right) 时返回负数，如果 (left = right) 则返回 0，如果 (left > right) 则返回正数：

```
 struct fdBase *left, *right;
    if (left < right)
        return -1;
    else if (left == right)
        return 0;
    else
        return 1; 
```

或者更紧凑的版本：

```
 if (left < right) ? -1 : (if (left == right) ? 0 : 1) 
```

2 - 将减法的差乘以`sizeof(fdBase)`：

```
 struct fdBase *left, *right;
    int result = (int)(left - right) * sizeof(fdBase) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:54:30.557

根据到目前为止的答案，我想我想要的是：

```
struct fdBase *left, *right;
ptrdiff_t result = (char *)left - (char *)right; 
```

# ruby-on-rails - Rails 2.x 部分呈现为字符串，然后以其他内容响应

> ID：12754735
> 
> 赞同：1
> 
> 时间：2012-10-05T22:14:29.820
> 
> 标签：ruby-on-rails, ruby

我需要在控制器中渲染一个部分，而不是作为对请求的响应。问题是，如果我`render :partial => 'foo'`像在视图中那样调用，控制器会认为我正在呈现响应。然后稍后当我呈现真正的预期响应（或重定向）时，我得到了一个很棒的`ActionController::DoubleRenderError`.

```
class SalesController < ApplicationController
  def send_content_to_some_api
    @sale = Sale.find params[:id]
    SomeApi.send_content(
      render(:partial => 'some_content',
             :locals => { :sale => @sale })
    )

    flash[:notice] = 'Totally just sent that content!'
    redirect_to sale_path(@sale)
  end
end 
```

我可以通过将它放在视图中来解决这个问题，但这似乎破坏了 MVC，并使重定向更加混乱。

如何在控制器不尝试将其用作响应的情况下获得字符串中的部分结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:16:08.733

见[ActionController::Base#render_to_string](http://apidock.com/rails/ActionController/Base/render_to_string)

# javascript - 随机开始地点蛇

> ID：12754736
> 
> 赞同：0
> 
> 时间：2012-10-05T22:14:32.200
> 
> 标签：javascript

我一直在研究这个教程：http: [//blog.new-bamboo.co.uk/2009/12/30/html5-canvas-snake-game](http://blog.new-bamboo.co.uk/2009/12/30/html5-canvas-snake-game)

但由于某种原因，我无法弄清楚如何让蛇每次都从一个随机的地方开始..

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:19:11.897

这是在网格中设置起始位置的位置：

```
// The current position of the Snake's head, as xy coordinates
this.currentPosition = [50, 50]; 
```

从随机点开始：

```
var randX = Math.floor(Math.random() * x),  // x = 50 in the default grid
    randY = Math.floor(Math.random() * y);  // y = 50 in the default grid

this.currentPosition = [randX, randY]; 
```

根据博客的说法，如果您复制了实际源，它使用对象而不是数组作为坐标并且计算的东西有点不同。在`start`函数中，您只需要选择一个新的起始单元格。

```
var randX = Math.floor(Math.random() * 40) * this.gridSize,  
    randY = Math.floor(Math.random() * 30) * this.gridSize; 

this.currentPosition = {'x': randX, 'y': randY}; 
```

# python - fnmatch translate 正在转义 unicode 字符

> ID：12754740
> 
> 赞同：1
> 
> 时间：2012-10-05T22:15:01.843
> 
> 标签：python, unicode

我正在使用以下代码

```
str = fnmatch.translate(u'ö')
print str 
```

但它打印为

```
'\ö' 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:30:45.857

[fnmatch.translate](http://docs.python.org/library/fnmatch.html#fnmatch.translate)的目的是将 shell 模式转换为正则表达式。在非 ascii 字符前添加反斜杠可能不会尽可能简洁，但它仍然可以正常用作正则表达式：

```
In [25]: re.match('\ö', u'ö')
Out[25]: <_sre.SRE_Match object at 0x92fef38> 
```

反斜杠只有在某些字符（例如数字、、、、、 ... ）之前才有特殊含义。如果它在其他字符之前`A`，例如`b`，反斜杠将被忽略。`B``d``'ö'`

# scala - 带有 Lift 2.4 和 HTML5 的 Comet 表

> ID：12754741
> 
> 赞同：0
> 
> 时间：2012-10-05T22:15:06.070
> 
> 标签：scala, html-table, comet, lift

我正在尝试通过 Comet 动态更新 HTML 表。我有以下内容：

```
class EventsComet extends CometClient[Event] {
  def server = Event

  def render = {
    println("Binding on: " + defaultHtml)
    data.flatMap( event =>
      bind("event", "name" -> event.name.toString, "date" -> event.startDate.toString)
    )
  }
} 
```

和：

```
<lift:comet type = "EventsComet">
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><event:name />Test Name</td>
                <td><event:date />Oct. 25, 2012</td>
            </tr>
        </tbody>
    </table>
</lift:comet> 
```

这会一遍又一遍地打印出整个表格，每个事件对应一个由 EventsComet 呈现的事件。println 语句输出整个表节点。

所以我尝试了变化：

```
<table>
    <thead>
        <tr>
            <th>Race</th>
            <th>Track</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        <lift:comet type = "EventsComet">
            <tr>
                <td><event:name />Test Name</td>
                <td><event:date />Oct. 25, 2012</td>
            </tr>
        </lift:comet>
    </tbody>
</table> 
```

正如预期的那样，HTML5 解析器去除了 [lift:comet] 标记并且没有发生绑定。

所以我尝试将行切换为：

```
<tr lift:comet = "EventsComet">
    <td><event:name />Test Name</td>
    <td><event:date />Oct. 25, 2012</td>
</tr> 
```

...如此处的片段示例所示[，](https://www.assembla.com/spaces/liftweb/wiki/HtmlProperties_XHTML_and_HTML5)但使用此语法，我的 CometClient 根本没有被实例化。

任何人都可以就正确的语法提出建议吗？

EventsComet 本身运行良好；它可以毫无问题地使事件列表保持最新。我只在使用表时遇到问题（可能还有其他我还没有尝试过的高度嵌套的结构？）。

谢谢你。对于这样一个简单的问题，这一切都相当令人沮丧，并且让我只想开始使用强类型模板语言而不是使用绑定来实现我的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:21:24.510

正确的语法似乎是：

```
<tr class="lift:comet?type=EventsComet">
    <td><event:name />Test Name</td>
    <td><event:date />Oct. 25, 2012</td>
</tr> 
```

从这个线程： [https ://groups.google.com/forum/?fromgroups=#!topic/liftweb/NUDU1_7PwmM](https://groups.google.com/forum/?fromgroups=#!topic/liftweb/NUDU1_7PwmM)

有时我会得到重复的行（插入到表格标题上方），但我想这与我的彗星演员本身有关。

# c# - 创建数据库表 Windows 8 Metro

> ID：12754743
> 
> 赞同：0
> 
> 时间：2012-10-05T22:15:09.737
> 
> 标签：c#, sqlite, microsoft-metro

如果我以非管理员身份（例如来宾帐户）登录 Windows 8，此数据库创建代码会失败吗？如果是这样，我该如何更改它适用于非管理员用户：

```
protected List<Order> orders;
    string dbName;
    #region Constructors

    public RestaurantRepository()
    {
        Initialize();
    }

    protected void Initialize()
    {

        dbName = "db_sqlite-net.db3";

        // check the database, if it doesn't exist, create it
        CheckAndCreateDatabase(dbName);
    }

    #endregion

    #region Database

    protected string GetDBPath()
    {
        string dbRootPath = Windows.Storage.ApplicationData.Current.LocalFolder.Path;
        return Path.Combine(dbRootPath, "menufinderwin8.db");
    }

    // This method checks to see if the database exists, and if it doesn't, it creates
    // it and inserts some data
    protected void CheckAndCreateDatabase(string dbName)
    {
        // create a connection object. if the database doesn't exist, it will create 
        // a blank database
        SQLiteAsyncConnection conn = new SQLiteAsyncConnection(GetDBPath());
        conn.CreateTableAsync<Order>();
        conn.CreateTableAsync<Order>();
        conn.CreateTableAsync<OrderDetail>();
        conn.CreateTableAsync<Product>();
        conn.CreateTableAsync<Restaurant>();

        //using (SQLiteConnection db = new SQLiteConnection(GetDBPath()))
        //{

            // create the tables
          //  db.CreateTable<Order>();
            //db.CreateTable<OrderDetail>();
            //db.CreateTable<Product>();
            //db.CreateTable<Restaurant>();
            // close the connection
            //db.Close();
        //}

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:46:04.873

我认为只要为所有用户安装了该应用程序，它就应该可以访问自己的本地目录。我认为您无法在用户之间共享数据库，但我认为它不会失败。

让我知道结果如何，我很好奇:)

# c++ - C++ 良好的错误处理方法

> ID：12754745
> 
> 赞同：3
> 
> 时间：2012-10-05T22:15:10.720
> 
> 标签：c++, exception

我开始使用 C++ 编写一些代码，并且我从一个简单的任务管理器程序中获得了这个简单的类方法，我正在编写一个实验：

```
void Task::setText(string text)
{
    if(text.length() > MIN_LENGTH)
    {
        this->text = text;
    }
} 
```

如您所见，如果类`text`属性的长度大于`MIN_LENGHT`我显示的代码上方定义的变量，则此方法将类属性设置为传递给该方法的属性。因此，如果传递给方法的字符串的条件不为真，我必须做一些事情。

在我买的 C++ 书中，没有解释错误处理，而是`assert`到处使用。由于断言只是在表达式为假时中止程序，这旨在作为输入验证，所以我寻找了一种更好的方法。

这个搜索让我找到了[C++ exceptions](http://www.cplusplus.com/doc/tutorial/exceptions/)。它解释了如何通过创建一个继承自`exception`.

良好的 OOP 实践表明每个类都应该独立于程序中的其他类。那么我应该把我创建的这个异常类放在哪里呢？在同一个标​​题中，我定义了我的 Task 类？还是应该`task.cpp`在我定义类的每个方法的地方？

也许这是一个愚蠢的问题，但只是想从一开始就确保安全并遵循良好的软件架构实践。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T22:20:29.303

建议#1：你需要完整地阅读你的书。

如果发生每个错误，您都应该抛出异常，这是不正确的。异常应该比每 1000 次调用您的函数/方法时发生的频率低。1000 在这里不是一个神奇的值，特别是其他数字可能是合适的。

换句话说。您需要回答的第一个问题：此错误发生的频率。如果这可能经常发生，那么返回值（bool 或 enum 或 int）是更好的方法。

如果您决定使用异常，最好从`std::exception`. 您应该将项目的例外情况放在单独的文件中。考虑几节课，也许是 3-10 节课。最好在您的异常类中放置一个数据字段来解释发生的事情的详细信息，而不是创建数百个不同的异常类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:20:21.540

异常类可以在单独的 .h .cpp 文件中。这样你就可以重用其他东西。

作为我自己的经验法则：

断言适用于不应该发生的事情，但我们检查只是为了确保 100% 确定

异常用于处理程序在生产时可能发生的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:20:08.437

C++ 标准库提供了许多您可以使用的[异常](http://cplusplus.com/reference/std/stdexcept/)类。首先，您可以使用它们。在您的情况下，适用的似乎是[range error](http://cplusplus.com/reference/std/stdexcept/range_error/)。
如果你仍然想实现你自己的异常类，你在哪里声明和实现它应该取决于他们的代码。如果它们针对特定于类的错误进行编码，则可以将它们放入类文件中。如果您必须从多个文件中使用它们，请将它们放在它们自己的 .cpp/.hpp 对中。

# unix - 查看 UNIX 中的文件权限概念

> ID：12754748
> 
> 赞同：1
> 
> 时间：2012-10-05T22:15:20.153
> 
> 标签：unix, ubuntu

umask 设置为 022，创建的文件权限为 -rw- r-- r-- 即 644。我以这种方式创建了一个文件

```
echo date > date.sh
./date.sh 
```

运行代码后，我会得到错误权限被拒绝，但如果我使用 sh 命令调用文件

```
sh date.sh 
```

有用。

我最近开始练习 UNIX，想知道为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:18:32.930

您没有设置可执行位，因此 UNIX 不会运行该文件。但是，该`sh`实用程序是可执行的，并且`date.sh`无论其权限如何，都可以执行 的内容。

您可以使用以下命令将文件设置为可执行文件：`$ chmod +x date.sh`

观察`date.sh`with的权限`$ ls -l`，你会发现它现在对所有人都可以执行（`-rwxrwxr-x`）。

# eclipse - 中文开发者通知：使用eclipse juno 运行tomcat 7.0 抛出异常

> ID：12754750
> 
> 赞同：1
> 
> 时间：2012-10-05T22:15:32.520
> 
> 标签：eclipse, jakarta-ee, tomcat, tomcat7

当我尝试使用 eclipse juno 运行 tomcat 7.0 时，我遇到了一个问题。控制台抛出异常说

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/catalina/startup/Bootstrap 
    Caused by: java.lang.ClassNotFoundException: org.apache.catalina.startup.Bootstrap 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:15:32.520

原来是一个非常愚蠢的错误，我把tomcat放到了像/Users/thomas/Desktop/源码包/tomcat这样的带有**汉字**的路径中，然后我把文件夹放到了没有任何汉字的路径中， 问题解决了！

# ffmpeg - ffmpeg 和 libvpx 转换为 webm 时出错

> ID：12754752
> 
> 赞同：3
> 
> 时间：2012-10-05T22:15:59.110
> 
> 标签：ffmpeg, webm, libvpx

我在 Centos6 服务器上遇到了 Ffmpeg 和 Libvpx 问题。

**命令：**

```
ffmpeg -y -i /var/www/f1ccd3a27d36270492ce660da358b436.mp4 -t 99 acodec copy -vcodec libvpx -f webm /var/www/f1ccd3a27d36270492ce660da358b436.webm 2<&1 
```

**输出：**

```
FFmpeg version 0.6.5, Copyright (c) 2000-2010 the FFmpeg developers
  built on Jan 29 2012 17:52:15 with gcc 4.4.5 20110214 (Red Hat 4.4.5-6)
  configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-avfilter-lavf --enable-libdc1394 --enable-libdirac --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab
  libavutil     50.15\. 1 / 50.15\. 1
  libavcodec    52.72\. 2 / 52.72\. 2
  libavformat   52.64\. 2 / 52.64\. 2
  libavdevice   52\. 2\. 0 / 52\. 2\. 0
  libavfilter    1.19\. 0 /  1.19\. 0
  libswscale     0.11\. 0 /  0.11\. 0
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
Seems stream 1 codec frame rate differs from container frame rate: 59.94 (2997/50) -> 29.97 (30000/1001)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/var/www/vhosts/f1ccd3a27d36270492ce660da358b436.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
  Duration: 00:04:16.32, start: 0.000000, bitrate: 650 kb/s
    Stream #0.0(und): Audio: aac, 44100 Hz, stereo, s16, 108 kb/s
    Stream #0.1(und): Video: h264, yuv420p, 480x360 [PAR 1:1 DAR 4:3], 539 kb/s, 29.97 fps, 29.97 tbr, 30k tbn, 59.94 tbc
Unknown encoder 'libvpx' 
```

**ffmpeg 配置：**

```
--prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-avfilter-lavf --enable-libdc1394 --enable-libdirac --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab 
```

**问题：**

```
Unknown encoder 'libvpx' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T23:13:47.767

`ffmpeg`需要配置以下内容：

*   `--enable-libvpx`用于 VP8 和 VP9 视频编码
*   `--enable-libopus`用于 Opus 音频编码，**或**
*   `--enable-libvorbis`用于 Vorbis 音频编码

### 视频

*   要编码 VP9，请使用`-c:v libvpx-vp9`.
*   要编码 VP8，请使用`-c:v libvpx`.

WebM 的默认值为 libvpx-vp9。

有关更多信息，请参阅[FFmpeg Wiki：VP9](https://trac.ffmpeg.org/wiki/Encode/VP9)和[VP8](https://trac.ffmpeg.org/wiki/Encode/VP8)。

### 声音的

您只需要上述音频编码器之一：建议使用 Opus 而不是 Vorbis，但两者都可以。

*   要对 Opus 进行编码，请使用`-c:a libopus`.
*   编码器 Vorbis 使用`-c:a libvorbis`.

WebM 的默认值是 libopus。

### 得到`ffmpeg`

`ffmpeg`使用这些编码器的最简单方法是下载它。有关已编译的 Linux、macOS 和 Windows 可执行文件的链接，请参阅[FFmpeg 下载页面。](https://ffmpeg.org/download.html)或者，您可以遵循[编译指南](https://trac.ffmpeg.org/wiki/CompilationGuide)。

# c# - Windows 8 中的单元测试 MediaElement (C#/XAML)

> ID：12754755
> 
> 赞同：2
> 
> 时间：2012-10-05T22:16:08.363
> 
> 标签：c#, unit-testing, windows-8, mediaelement

我有一个带有 MediaElement 的类，我正在尝试为其编写单元测试，但我不知道如何对与 MediaElement 交互的部分进行单元测试。具体来说，我想确保打开文件会触发正确的代码，并且我自己的类的状态与 MediaElement 的状态一起更新。

我正在使用[此处](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/57815826-8cbb-4206-b2a6-3a3383dfe6ad)提到的 ExecuteOnUIThread() 技巧来创建和使用 MediaElement，否则我将获得 RPC_E_WRONG_THREAD 异常。

然后我使用[这个技巧](http://www.philosophicalgeek.com/2007/12/27/easily-unit-testing-event-handlers/)来测试我自己的类的事件，这些事件连接到 MediaElement 自己的 MediaOpened 和 CurrentStateChanged 事件。

但是，当我从 Internet 打开 MP3 文件时，无论我将 WaitOne 设置多长时间，我都没有看到任何东西被激活。我试过绕过我自己的类并直接测试 MediaElement，但这些事件似乎根本没有触发。

这是我正在使用的测试方法：

```
[TestMethod]
public async Task TestMethod1()
{
    await ExecuteOnUIThread(() =>
    {
        var me = new MediaElement();
        bool opened = false;
        var mre = new ManualResetEvent(false);
        me.MediaOpened += delegate
        {
            opened = true;
            mre.Set();
        };
        me.Source = new Uri("http://dl.dropbox.com/u/52389/test-song.mp3");
        mre.WaitOne(5000);

        Assert.IsTrue(opened);
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:36:59.473

在你的命令之后，检查 CurrentState (Windows.UI.Xaml.Media.MediaElementState); 这应该反映你的行为。如果您不能确定缓冲是否有足够的时间并且您不想等待它，这没关系，那么您可以检查多个。例如，以下是选项：

```
Closed = 0
Opening = 1
Buffering = 2
Playing = 3
Paused = 4
Stopped = 5 
```

调用 Play() 后，您可以检查 (Opening | Buffering | Playing)。明白了吗？同时，您可以检查它不应该是什么样的！（关闭|暂停|停止）。等等。您可能无法在一个小的 ole 单元测试中检查流本身。但是你应该能够检查状态。

祝你好运！

# symfony - Doctrine2：找不到具有 findById 的并发持久实体

> ID：12754759
> 
> 赞同：3
> 
> 时间：2012-10-05T22:16:58.033
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我有当前的设置：

一个常规的 Symfony2 Web 请求可以创建和持久化`Job`实体，该实体也创建了一个[Gearman](http://gearman.org)作业，假设这发生在`process 1`. Gearman Job 由一个 Gearman Worker 执行，它通过`Job`实体的`ID`.

我还使用 Symfony 创建了一个 Gearman Worker，它作为 PHP CLI 进程运行，我们称之为`process 2`.

对于那些不熟悉 Gearman 的人来说，worker 代码的操作如下：

```
for loop 5 times
    get job from gearman (blocking method call)
    get job entity from database
    do stuff 
```

本质上，这段代码让一个 Symfony2 实例运行以在 worker 死亡之前处理 5 个 Job。

我的问题是：在工作人员处理 Doctrine2 的第一项工作中，使用以下代码可以毫无问题地从数据库中检索创建的工作：

```
$job = $this->doctrine
            ->getRepository('AcmeJobBundle:Job')
            ->findOneById($job->workload()); // workload is the job id 
```

然而，一旦这个工作完成并且 for 循环递增以等待第二个工作，假设这是从另一个 Symfony2 Web 请求到达`process 3`创建`Job`with `ID`2，即使实体肯定在数据库中，对 Doctrine2 存储库的调用也会返回 null .

重新启动工人解决了这个问题，所以当它执行它的第一个循环时，它可以拾取`Job`2。

有谁知道为什么会这样？是否第一次调用`getRepository`或`findOneById`从 MySQL 进行某种表缓存，不允许它看到随后添加的`Job`2？

只要数据库保持打开状态，MySQL 是否只显示给定连接的数据库快照？

我也试过`entityManager`在拨打第二次电话之前重置`findOneBy`无济于事。

提前感谢您的任何建议，这个真的难倒我。

**更新：**

我创建了一个单进程测试用例来排除是否是并发导致了问题，并且测试用例按预期执行。似乎唯一一次存储库找不到作业 2 是在将它添加到另一个进程的数据库时。

```
 // Job 1 already exists
    $job = $this->doctrine
    ->getRepository('AcmeJobBundle:Job')
    ->findOneById(1);

    $job->getId(); // this is fine.

    $em->persist(new Job()); // creates job 2

    $em->flush();

    $job = $this->doctrine
    ->getRepository('AcmeJobBundle:Job')
    ->findOneById(2);

    $job->getId(); // this is fine too, no exception. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T11:21:39.567

也许一个进程在第二个进程保存之前尝试加载实体。

Doctrine 通过其 id 缓存加载的实体，因此当您收到对同一对象的第二次请求时，它会加载而无需对数据库进行另一次查询。[你可以在这里](http://docs.doctrine-project.org/en/latest/reference/working-with-objects.html)了解更多关于 Doctrine IdentityMap的信息

# c# - 为什么在 VS 2010 和 VS 2005 中编译客户端时 COM 互操作层会慢 40 倍？

> ID：12754761
> 
> 赞同：31
> 
> 时间：2012-10-05T22:17:02.777
> 
> 标签：c#, visual-studio-2010, visual-studio, com, visual-studio-2005

我的团队使用大型模拟应用程序的 COM API。大多数模拟文件运行到数百兆字节，并且在打开时似乎完全加载到内存中。

我们执行的主要任务是遍历文件对象模型中的所有元素，然后对每个元素执行“某些操作”。

我们最近在 VS 2010 中将代码库从 .NET 2 迁移到了 .NET 4，并且看到迭代速度下降了大约 40 倍（从大约 10 秒到大约 8 分钟）。我们已将其简化为尽可能小的代码示例（10 行左右）；在 VS 2005 中编译它，运行它，然后在 VS 2010 中打开项目并编译，将框架保留为 2（我们使用制造商提供的 COM 互操作程序集）。

2005 年测试应用程序在 10 秒内完成，而 2010 年则需要 8 分钟。

这可能是什么原因造成的？

**更新**

代码等价于：

```
var server = new Server();
var elements = server.Elements;
var elementCount = elements.Count;

for(int i = 0; i < elementsCount; ++i)
{
    var element = elements[i];
} 
```

这段代码在 VS 2010 中运行所需的时间是 VS 2005 的 40 倍。

**更新 2**

我合理地解释说，在一种情况下操作可能比另一种情况慢得多的唯一原因是数据在不同版本中通过 COM 传输的方式不同。

我们记录了这两种情况的绑定日志，这就是我们发现的；在快速版本中找不到 CustomMarshalers 的原生镜像**（**这些是 FUSLOGVW 捕获的绑定日志）

*mscorlib*

`mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.HTM`

***快速地***

```
LOG: Start binding of native image mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
LOG: Start validating native image mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
WRN: Native image does not satisfy request. Looking for next native image.
WRN: No matching native image found. 
```

***慢的***

```
LOG: Start binding of native image mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
LOG: Start validating native image mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
LOG: Bind to native image succeeded. 
```

*自定义封送器*

`CustomMarshalers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a`

***快速地***

```
LOG: Start binding of native image CustomMarshalers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.
LOG: Start validating native image CustomMarshalers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.
WRN: Native image does not satisfy request. Looking for next native image.
WRN: No matching native image found. 
```

***慢的***

```
LOG: Start binding of native image CustomMarshalers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.
LOG: Start validating native image CustomMarshalers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.
LOG: Start validating all the dependencies.
LOG: [Level 1]Start validating native image dependency mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
LOG: Dependency evaluation succeeded.
LOG: [Level 1]Start validating IL dependency Microsoft.VisualC, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.
LOG: Dependency evaluation succeeded.
LOG: Validation of dependencies succeeded.
LOG: Start loading all the dependencies into load context.
LOG: Loading of dependencies succeeded.
LOG: Bind to native image succeeded.
Native image has correct version information.
Attempting to use native image C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\CustomMarshalers\3e6deccf191ab943d3a0812a38ab5c97\CustomMarshalers.ni.dll.
Native image successfully used. 
```

**因此，当不**使用本机图像时，我们似乎获得了很大的性能提升。

为什么这种绑定在一种情况下会失败而在另一种情况下会成功，我们如何强制应用程序不使用本机映像？

**更新 3**

怪事还在继续。如果我在 VS 2010 中使用 R# 测试运行器或内置的 Visual Studio 测试运行器在测试方法中运行此代码，那么它运行速度很快。

我曾尝试将此代码包装在一个程序集中，然后动态加载它，这没有任何区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:29:39.177

这是一个很长的镜头。很高兴我能帮上忙。

在对任何 COM 对象进行大量不同调用时，匹配 MTA 与 STA（线程模型）非常重要。`[STAThread]`方法顶部的指令是确保该方法中每个调用的线程模型的一种方法 。

看起来`Thread.SetApartmentState(ApartmentState.STA)`适用于整个线程，但显然不适用于线程池线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:27:57.597

当您说“……即使在 STA 应用程序中，线程也是……”时，这实际上是不正确的。线程可以选择在访问任何 COM 对象之前设置其单元状态，但在 .NET 中，如果您什么都不做，这些线程将隐含地成为 MTA。

线程池是 MTA。如果您考虑一下，就必须如此，因为如果它充满了 STA 线程，那将是一个糟糕的线程池，因为任何时候线程尝试访问在池中的其他线程之一上创建的对象时都需要编组。

Thread.SetApartmentState 根据定义仅适用于每个线程。它永远不会影响任何其他线程（正如您所发现的）。对象属于一个单元，一个线程可能属于一个单线程模型。如果线程试图访问模型不匹配的对象，则需要对其进行编组。

如果您的 COM 服务器被标记为“两者”，那么您可以在没有来自 STA 或 MTA 线程的代理的情况下使用它。如果是这种情况，那么您很幸运，您应该首先在 MTA 线程上创建它（或者让线程池线程这样做）。

如果您在 STA 线程上创建它，即使（特别是如果）所有其他线程都是 STA，它们都将通过代理，除非您碰巧从最初创建它的线程调用该对象。

如果您的 COM 服务器是单线程的，那么您需要确保不仅从 STA 线程调用它，而且从首先创建它的 STA 线程调用它，否则您将通过代理进行编组。

# ruby-on-rails - Rails 的纯 HTML 模板解决方案？

> ID：12754762
> 
> 赞同：2
> 
> 时间：2012-10-05T22:17:04.073
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我喜欢 HAML，但是最近我们的项目在依赖非 html 结构化模板方面受到了一些审查。我想我会更进一步，问一个问题，“我们如何在 Ruby on Rails 中使用基于纯 HTML 设计的模板？”

到目前为止，我发现的最接近的东西是一个非常有趣的项目，它有来自 2010 年的最新更新，名为[***Kwartz***](http://www.kuwata-lab.com/kwartz/)，来自 Erubis 的作者。

是否有一个项目可以为设计人员提供这种纯 HTML 隔离，并且在 Rails 3.2.x 上是最新且可行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:02:13.637

你的设计师是正确的，HAML 没有广泛的 HTML 工具支持。

恕我直言，一个非常出色的解决方案是 Handlebars。它比 HAML 更简单，并且可以与更多的 HTML 工具一起使用，因为 Handlebars 强调将代码移出页面模板并进入控制器。这也有利于与设计师一起编写可维护的页面，也有利于安全。

Handlebars 由帮助编写 Rails 3 的 Yehuda Katz 领导，他是 JavaScript 的核心贡献者，目前正在研究同样利用 Handlebars 的 Ember.js。

[http://handlebarsjs.com/](http://handlebarsjs.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T06:21:28.100

你要么对模板做点什么，对吧？就像设计师给你模板一样，你去掉已经属于的部分`app/views/layouts/application`，注入必要的红宝石来把你的数据放到视图中等等。

所以有什么问题？让设计人员以 HTML 格式提供他们的模板，您在应用程序中使用时将它们转换为 HAML，而不是将它们转换为 ERB。

# file - Unix合并一堆文本文件而不占用额外的磁盘空间？

> ID：12754764
> 
> 赞同：0
> 
> 时间：2012-10-05T22:17:17.567
> 
> 标签：file, unix, concatenation

我有一堆文本文件需要临时连接，以便我可以将单个文件（代表所有文件）传递给一些后处理脚本。

目前我正在做：

```
zcat *.rpt.gz > tempbigfile.txt 
```

但是这个 tempbigfile.txt 是 3.3GB，而包含所有 *.rpt.gz 文件的文件夹的原始大小只有 646MB！所以我暂时将使用的磁盘空间翻了两番。当然，在我可以用 tempbigfile.txt 调用 myscript.pl 之后，它就完成了，我可以`rm`使用 tempbigfile.txt。

有没有一种解决方案可以不创建如此大的文件，并且仍然将所有这些文件放在一个文件对象中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:20:47.113

您正在使用 对文件进行放气`zcat`，因此您应该使用 再次压缩文本`gzip`：

```
zcat *.rpt.gz | gzip > tempbigfile.txt 
```

# jquery - jquery排序dom元素

> ID：12754768
> 
> 赞同：3
> 
> 时间：2012-10-05T22:18:18.610
> 
> 标签：jquery

当我点击 DIV 时，我有 div 元素，我添加了这个 DIV 的“选定”类。具有“选定”类的 DIV 转到 .each()。我可以按最后添加的顺序对这些元素进行排序吗？

例如，如果我选择 341 我想获得 341 这是我的代码

```
<!DOCTYPE html>
<html>
    <head>
        <style>.active{display: inline;margin:0 10px;border:1px solid #000;cursor: pointer;}</style>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <div id="content"> 
            <div class="row">
                <div class="nred"></div><div class="active">1</div><div class="active">2</div><div class="active">3</div><div class="active">4</div><div class="active">5</div><div  class="active">6</div><div class="active">7</div><div class="active">8</div>
            </div>
            <div id="bileti"></div>
        </div>
<script>
    $(".row").hover(
        function () {
            $(this).children("div.active").toggleClass('bounce');
            $(this).children("div.nred").toggleClass('izbranred');
        }
    );

    $("div.active").click(function () {
        $(this).toggleClass('selected');
        document.getElementById("bileti").innerHTML="";

        $(".selected").each(function(){
            var place=$(this).html();
            document.getElementById("bileti").innerHTML+=place;
        });
    });
</script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:22:59.720

试试这个：

```
var place = '';
$(".selected").each(function(){
    place += this.innerHTML;
});
document.getElementById("bileti").innerHTML = place; 
```

但是，您的 each 方法会根据元素在 DOM 中的位置来选择元素，因此结果总是按 134 排序，如果它们没有`selected`类，您可以附加 span 元素并删除它们。

```
$("div.active").click(function() {
    $(this).toggleClass('selected');
    if ($(this).hasClass('selected')) {
        $("#bileti").append('<span>' + this.innerHTML + '</span>');
    } else {
        $("#bileti span:contains(" + this.innerHTML + ")").remove();
    }
});​ 
```

[http://jsfiddle.net/MW2wH/](http://jsfiddle.net/MW2wH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:28:17.527

而不是使用`$(".selected").each`（每次都会按类重新选择以 DOM 顺序为您提供元素），而是跟踪数组中选定的 div：

```
(function(){

    var selected = [];

    $("div.active").click(function(){
        var i = $.inArray(this, selected);

        if(i >= 0){
            // Already in array, so remove it
            $(this).removeClass('selected');
            selected.splice(i, 1);
        }else{
            // Not in array, so add it
            $(this).addClass('selected');
            selected.push(this);
        }

        document.getElementById("bileti").innerHTML = "";

        // Iterate through the array

        $(selected).each(function(){
             var place = $(this).html();
             document.getElementById("bileti").innerHTML += place;
        });
    });

})(); 
```

请注意，您还可以优化以下内容：

```
$(selected).each(function(){
     var place = $(this).html();
     document.getElementById("bileti").innerHTML += place;
}); 
```

如果有很多元素要循环，那么该代码会非常慢，因为它通过附加到 innerHTML 来不断更新 DOM。构建一个 HTML 字符串然后在循环之后将其放入 DOM 会快得多：

```
var places = "";
$(selected).each(function(){
     places += $(this).html();
});
document.getElementById("bileti").innerHTML = places; 
```

然后，您还可以删除该行：

```
document.getElementById("bileti").innerHTML = ""; 
```

如果您进行所有这些更改，您的整个脚本将变为：

```
$(".row").hover(
    function(){
        $(this).children("div.active").toggleClass('bounce');
        $(this).children("div.nred").toggleClass('izbranred');
    }
);

(function(){

    var selected = [];

    $("div.active").click(function(){
        var i = $.inArray(this, selected);

        if(i >= 0){
            // Already in array, so remove it
            $(this).removeClass('selected');
            selected.splice(i, 1);
        }else{
            // Not in array, so add it
            $(this).addClass('selected');
            selected.push(this);
        }

        var places = "";
        $(selected).each(function(){
             places += $(this).html();
        });
        document.getElementById("bileti").innerHTML = places;

    });

})(); 
```

[**JSFiddle 演示**](http://jsfiddle.net/4hnzN/)

# java - 从本地网络 (WLAN) 中的 Android 设备调用 Tomcat 实例

> ID：12754771
> 
> 赞同：0
> 
> 时间：2012-10-05T22:18:39.730
> 
> 标签：java, android, tomcat, wifi

我有一个非常令人困惑的问题，从本地 WLAN 中的 Android 设备访问我的 Tomcat。

**情况：**

在我的 DesktopPC（内部 LAN IP：192.168.1.100）上，我运行了一个带有 JSF 站点的 Tomcat 应用程序服务器。

入口网址为**192.168.1.100:8080/pages/index.jsf**

如果我现在尝试从我的 Android 设备（也连接到 WLAN）调用此站点，我会在 Android 浏览器中看到典型的“未找到站点”页面。

我可以使用给定的 URL 从家庭网络中的任何其他 PC 调用站点。

谁能给我一个提示，如何从 Android 调用 JSF_Site？

我毫不费力地尝试了以下网址：

*   **192.168.1.100:8080/pages/index.jsf**
*   . **[http://192.168.1.100:8080/pages/index.jsf](http://192.168.1.100:8080/pages/index.jsf)**

**编辑：**

在同一台机器上使用模拟器进行了尝试，它适用于给定的 URL。

**编辑2：**

我用 Android Fling 尝试了 URL 并得到了以下输出。可能任何人都可以从中读取任何内容。

![在此处输入图像描述](../Images/127fbbcec2417efd51da3def781e1279.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:45:06.020

您是否在您的安卓设备上尝试过终端模拟器？尝试 ping 地址。我假设您在设备上使用 wifi。你也用过带wifi的笔记本电脑吗？这可以很好地排除您的家庭路由器作为可能的原因。

您是否访问过类似 myip 的网站以验证您使用的是相同的外部 IP。如果您有 3G 互联网连接或类似连接，这可能有助于排除其他互联网连接。

您是否尝试过使用静态 html 文件而不是 jsf。当您使用小屏幕设备时，是否有一些 jsf 标签会重定向您？

您的屏幕截图显示端口 80 作为您的端口。也许您没有获得正确的网址，或者您的设备受到限制。您可以更改 server.xml 文件中的 tomcat 端口，查找以下内容并将 8080 更改为 80，因为它是在这里...我的 tomcat 是 6.x

```
<Connector connectionTimeout="20000" port="80" protocol="HTTP/1.1" redirectPort="8443"/> 
```

根据 RFC，您收到 ->HTTP 400 Bad 请求，您的浏览器未正确形成请求。也许您应该尝试其他浏览器，例如 Firefox for android。

我希望我的建议可以帮助你。

问候

# iphone - Objective-C 中的对象层次结构

> ID：12754777
> 
> 赞同：4
> 
> 时间：2012-10-05T22:19:30.583
> 
> 标签：iphone, objective-c, ios, design-patterns, inheritance

我被介绍到一个 Objective-C 代码库，它有大约 50,000 个 LoC，我估计 25% 左右是重复代码。不幸的是，到目前为止，代码库中的 OO 原则大多被忽略，而倾向于复制和粘贴逻辑。耶！

我来自 Java 背景，很多这种重复可以通过老式的面向目标的编程来修复。在很多情况下，将共享逻辑提取到基类中感觉像是正确的解决方案。

然而，在我着手创建一堆基类并在派生类之间共享公共逻辑之前，我想我应该停下来看看是否还有其他可用的选项。从 2011 年开始观看 Ken Kocienda 的“Writing Easy-To-Change Code”WWDC 会议后，他建议我尽可能保持对象层次结构的浅层。他没有提供任何关于他为什么有这种观点的确切统计数据，所以我想知道我是否错过了一些东西。

无论如何，我都不是Objective-C专家，所以我想知道在决定对象层次结构时是否有任何最佳实践。基本上，当您决定停止创建基类并开始使用组合而不是继承作为在类之间共享代码的一种方式时，我想获得意见。

此外，从运行时性能的角度来看，有什么可以让我远离创建对象层次结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:50:30.053

不久前，我写了一些关于从其他背景（包括 Java）[进入 iOS 的](http://robnapier.net/blog/learning-cocoa-2-467)想法。由于ARC，有些事情发生了变化。特别是，内存管理不再那么重要。也就是说，您过去为简化内存管理所做的所有事情（使用访问器、使用访问器、使用访问器）在 ARC 中仍然同样有效。

@Radu 是完全正确的，你应该经常保持你的类层次结构相当简单和浅薄（如你所读）。在 Cocoa 中，组合通常是比扩展子类化更好的方法（这在 Java 中可能也是如此，但在 ObjC 中是常见的做法）。ObjC 也没有抽象方法或类的概念，这使得某些类型的子类化有点尴尬。与其将共享逻辑提取到基类（尤其是抽象基类）中，不如将它们提取到单独的策略对象中。

查看`UITableView`委托和数据源及其使用。看看像`NSAttributedString`which HAS-A`NSString`而不是 IS-A 之类的东西。这很常见，并且经常使事情变得更清洁。与所有大型对象层次结构一样，始终牢记[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。当有人忘记[正方形不是矩形](http://en.wikipedia.org/wiki/Circle-ellipse_problem)时，我看到很多 ObjC 设计偏向一边。同样，这适用于所有语言，但在设计时值得记住。

只要您可以使用不可变（值）对象，它们就是真正的胜利。

您会很快发现的另一部分是很少有像“final”或“protected”这样的“安全装饰”（有一个`@protected`，但实际上在实践中并没有那么有用并且很少使用）。具有 Java 和 C++ 背景的人往往会担心编译器对各种访问规则的强制执行。ObjC 没有编译器强制执行大多数保护（您始终可以在运行时向任何对象发送您想要的任何消息）。您只需使用一致的命名约定，不要到处寻找私有方法。程序员纪律取代了编译器的强制执行。在实践中，它在绝大多数情况下都能正常工作。

也就是说，ObjC 有很多警告，您绝对必须消除所有警告。大多数 ObjC 警告实际上是错误。

我偏离了对象层次结构的具体问题，但希望它是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:33:03.177

Objective-C 中深层层次结构的一个主要问题是 Xcode 根本无法帮助您理解/管理它们。另一个原因很简单，Objective-C 中的任何东西都比 Java 中的东西复杂两倍，所以你需要更加努力地保持简单。

但是我发现 Objective-C 中的组合很尴尬（虽然我不能确切地说出为什么），所以没有“完美”的答案。

我观察到，在 Objective-C 与 Java 中，小的子例程要少得多，而且更有可能看到代码在大部分相同的视图控制器等之间重复。我认为其中很大一部分只是开发工具和创建新类的相对尴尬。

PS：我不得不重新设计一个包含大约 55K 行的应用程序，我们可以数得差不多了。正如您所发现的，可能有大约 25% 的重复，但还有另外 25% 左右的完全死代码。（谢天谢地，从那以后，该应用程序几乎被遗弃了。）

# sql - 在 oracle 数据库过程注释头中存储内部版本号和日期

> ID：12754779
> 
> 赞同：2
> 
> 时间：2012-10-05T22:19:51.363
> 
> 标签：sql, oracle, hudson

我想将最新的内部版本号和日期存储在我的 Oracle 过程的注释标题部分中。我已经搜索过这个主题，但只发现在表格中存储日期和数字，而不是我需要的。

背景故事 - 在一个拙劣的部署过程中，我不得不提交差异程序以确认最新和最好的部署是否按预期进行。我们已经从一家初创公司成长为一家企业，并正在努力建立更好的流程。我们的大多数程序都没有标题，开发人员也不经常向它们添加修改/日期。作为部署操作的结果，我想更新评论标题中的构建版本和日期。我们正在使用 Hudson 来自动化部署。我相信我应该能够在标题中添加一些内容并在部署期间通过 Hudson 进行更新。然后，确认最新和最好的内容将一目了然，而不必费力浏览文件差异。

我使用谷歌搜索其他网站无济于事。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:30:49.037

您必须确保您需要存储在标题注释中的所有信息必须在包/过程/函数声明之后，这意味着

```
/* Build :
   Date:
*/
CREATE OR REPLACE PACKAGE SAMPLE AS
  function...
  procedure...
END SAMPLE;
/ 
```

不起作用，因为所有注释都在编译后被删除。而是使用：

```
CREATE OR REPLACE PACKAGE SAMPLE AS
/* Build :
   Date:
*/
  function...
  procedure...
END SAMPLE;
/ 
```

评论将作为存储过程的一部分存储。

此外，您必须确保您有一个先前的过程（自动或手动）来更新过程标头中的构建信息。

hth

# c++ - 尝试初始化 MFC CCriticalSection 时出现错误 C2248

> ID：12754784
> 
> 赞同：1
> 
> 时间：2012-10-05T22:20:29.280
> 
> 标签：c++, mfc

为此，我一直在尝试修复/寻找解决方案一个小时左右。基本上我有：

```
CCriticalSection pCS; 
```

在类声明中，然后我使用这样的 CSingleLock：

```
CSingleLock pSL(&pCS);
pSL.Lock();
*Stuff happening here*
pSL.Unlock(); 
```

锁定和解锁 PCS。但是初始化 CriticalSection 似乎总是以这种方式结束：

```
c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\afxmt.h(82): error C2248: 'CObject::operator =' : cannot access private member declared in class 'CObject'
c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\afx.h(535) : see declaration of 'CObject::operator ='
c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\afx.h(509) : see declaration of 'CObject'
This diagnostic occurred in the compiler generated function 'CSyncObject &CSyncObject::operator =(const CSyncObject &)' 
```

我在程序中有 4 个工作线程，我正在向它们发送指向 CCriticalSection 所在类的指针，并且线程正在 CCriticalSection 以及主线程上工作。线程使用类的指针来使用使用 CCriticalSection 的 CSingleLock。

供您参考，该代码还包括 Direct2D，但这不应该是相关的。

一些帮助将不胜感激。

编辑：

刚刚尝试使用以下内容创建一个新项目：

```
#include <afxmt.h> 
```

在里面。它给了我例外。这正常吗？我正在使用 VC++ 2010 Professional。

解决了：

那里也有一个 CEvent，所以我想我也会把它变成一个指针，你知道的。它解决了这个问题。现在有一个 afxmt.h 文件给了我例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:47:53.800

如果您希望多个线程在 CRITICAL_SECTION 上同步，您可以共享指向同一临界区的指针，但您实际上不能制作 CRITICAL_SECTION 的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:38:56.900

那里也有一个 CEvent，所以我想我也会把它变成一个指针，你知道的。它解决了这个问题。现在有一个 afxmt.h 文件给了我例外。

# facebook - Facebook 获取每个帖子的分享数，获得 (#613) 流式调用已超过每 600 秒 600 次调用的速率

> ID：12754790
> 
> 赞同：2
> 
> 时间：2012-10-05T22:21:09.550
> 
> 标签：facebook, facebook-graph-api

我们正在使用图形 API 来获取客户端每个页面上所有帖子的共享数量，每天运行一次，我们使用 graph.facebook.com/post_id，但我们经常得到

> (#613) 流式调用已超过每 600 秒 600 次调用的速率

我尝试使用批处理请求，似乎批处理中的每个请求都计入了限制。有什么建议么？

以下是我们迄今为止的发现：

1.  FQL 流表没有“共享”字段。
2.  发布见解没有与页面墙上显示的“#shares”匹配的指标。
3.  对 post 的 Graph API 调用将很快达到限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:27:13.310

减少调用次数 - 这是这里唯一真正的答案，假设您已经进行了其他优化，例如在一次调用中询问多个帖子的详细信息（通过`?ids=X,Y,Z`Graph API 文档主页上提到的语法）

为什么需要“每天一次”？为什么不把电话分散几个小时呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T12:57:24.467

如果您按批次请求也没关系，每个项目仍将被计为一次命中，并且您将达到相同的限制。它在 FB 文档中有说明

[https://developers.facebook.com/docs/graph-api/advanced/rate-limiting](https://developers.facebook.com/docs/graph-api/advanced/rate-limiting)

[![在此处输入图像描述](../Images/4788ac479dbc3771219356683d196e9f.png)](https://i.stack.imgur.com/npphe.png)

您可以尝试通过超时或延迟 cron 作业或其他方式分配负载。或者在一个小时内执行第一批和下一批可能是最安全的。

# sql - 原始和更新都在同一个字段 sql server

> ID：12754792
> 
> 赞同：0
> 
> 时间：2012-10-05T22:21:48.840
> 
> 标签：sql, sql-server-2008

我有这个问题要问你，为什么这会给我与原始相同字段“Ohio”中的原始值的更新值......现在在 proc“Ohio OH”之后我只想要更新的值。Th 函数只返回我在 proc 中使用它之前测试了一个值。提前感谢您调查它。

```
CREATE PROC [dbo].[Changestringstate] 
AS 
    UPDATE stage.statetable 
    SET    originalstatename = Rtrim(originalstatename) --avoiding trailing space issues 

    UPDATE stage.statetable 
    SET    originalstatename = Replace(originalstatename, 
                               Substring (originalstatename, 
                               Len (originalstatename) - ( 
                               Charindex(' ', Reverse( 
                               originalstatename)) ) + 1, Len(originalstatename) 
                               ), 
           dbo.Changefunction(originalstatename)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:11:15.880

考虑这个例子

```
create table statetable
(
  originalstatename varchar(100)
);
insert statetable values ('ohio oh');
GO

CREATE PROC [dbo].[Changestringstate] 
AS 
    UPDATE statetable 
    SET    originalstatename = Rtrim(originalstatename) --avoiding trailing space issues 

    UPDATE statetable 
    SET    originalstatename = Replace(originalstatename, 
                               Substring (originalstatename, 
                               Len (originalstatename) - ( 
                               Charindex(' ', Reverse( 
                               originalstatename)) ) + 1, Len(originalstatename) 
                               ), 
           'ohia') 
GO
exec changestringstate;
select * from statetable;

--- result
ohioohia 
```

你的过程在做什么：

整个 SUBSTRING 块做一件事，就是删除 LAST SPACE 之后的所有内容。这不包括尾随空格，因为它们在之前的 UPDATE 中被修剪掉了。它的作用示例：

```
state name    |  Substring result
Ohio OH          " OH"
Mi Ohio OH       " OH"
New York NY      " NY" 
```

**然后是REPLACE**块，它查找`substring result`，并用来自 的任何内容替换它的每一次出现。假设它以“xyz”返回。**`dbo.Changefunction()`**

 **```
state name    |  Substring result | after replace
Ohio OH          " OH"            | Ohioxyz
Mi Ohio OH       " OH"            | Mixyzioxyz
New York NY      " NY"            | New Yorkxyz 
```

希望这可以帮助您了解您的过程，以便您可以相应地修复它。**

# c# - PageMethods 可以返回 XML 吗？

> ID：12754796
> 
> 赞同：0
> 
> 时间：2012-10-05T22:22:13.163
> 
> 标签：c#, asp.net

我正在使用一些 ASP.NET PageMethods，我尝试使用以下方法简单地返回 XML：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
public static string GetIPLocation(string ip)
{
    var doc = XDocument.Load(HttpContext.Current.Server.MapPath("relative xml path"));
    var s = doc.ToString();

    return s;
} 
```

完全相同的代码**实际上适用于 ASMX 服务**，（尽管删除了`static`修饰符）

但事实证明，在使用 PageMethods 时我无法获取 XML，**而是收到了我的页面的 HTML 代码。**

这是我的 AJAX 代码：

```
$.ajax({
    url: "<%: this.ResolveClientUrl("~/relative path/GetIPLocation") %>",
    type: "POST",
    contentType: "application/xml; charset=utf-8;",
    dataType: "xml",
    data: "{ip:'"+$target.val()+"'}",
    async: true,
    cache: false,
    success: function (msg) {
        console.log("MSG: %o", msg);
        viewModel.ip1(msg.d.IP);
    },
    error: function (XHResponse, errorMessage, errorCode) {
        console.log("AJAX Error: %o", XHResponse);
    }
}); 
```

如果我将响应更改为 JSON，或者如果我使用 ASMX/WCF 服务而不是我的 PageMethod，它就像一个魅力

那么 PageMethods 是否无法通过设计返回 XML？...如果不是，我错过了什么？

### 编辑 1

正如@JamieSee 评论的那样，我做了这个修改，结果还是一样：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
public static XDocument(GetIPLocation(string ip)
{
     return XDocument.Load(HttpContext.Current.Server.MapPath("relative xml path"));
} 
```

和

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Xml)]
public static XmlDocument(GetIPLocation(string ip)
{
    var x = new XmlDocument();

    x.LoadXml(HttpContext.Current.Server.MapPath("relative xml path"));

    return x;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:16:34.497

由于您似乎正在发送 JSON 格式的数据，请尝试在您的 jQuery 调用中使用`application/json`而不是。`application/xml``contentType`

*   `contentType`描述了您通过 POST 发送的信息的格式。
*   `dataType`描述了您对响应的期望。

不匹配可能会产生奇怪的结果。

# jquery - 在 jqGrid 子网格中填充数据时遇到问题

> ID：12754798
> 
> 赞同：1
> 
> 时间：2012-10-05T22:22:34.793
> 
> 标签：jquery, jqgrid, subgrid

我正在尝试在子网格中填充数据，但我无法做到这一点。我想问题是我需要显示从同一个 URL 生成的数据。它是嵌套数据。数据是json。我四处寻找示例，有些指定了对 jsonreader 的需求，有些则完全省略了它。我对 jquery 和 jgrid 很陌生。我希望在展开项目时显示标题字段。我从服务器得到的数据如下：

```
{"total":18,"page":1,"records":18,"rows":[
    {"Name":"Jane", "Header":[{"Type":"bundle","Selected":"true"}]} 
```

这里我需要在Subgrid的Header中显示信息。主网格显示“行”中的信息。每个“行”都有一个标题信息，当用户单击它时我需要显示它。我设法得到像 [object Object] 这样的显示，但我想我错过了一些东西。我需要解析数组并显示信息：类型和选定。 [http://www.trirand.com/blog/?page_id=393/help/subgrid-from-nested-master-grid-data/](http://www.trirand.com/blog/?page_id=393/help/subgrid-from-nested-master-grid-data/)正是我正在寻找的。

非常感谢任何指针。

下面是我的代码片段：

```
$("#grid").jqGrid({
    url: '/requestData',
    datatype: "json",
    colNames:['ID', 'Name'],
    colModel:[
        {name:'ID',index:'ID',sorttype:'int'},         
        {name:'Name',index:'Name', width:450}
    ],
    jsonReader : {
        repeatitems:false,
        root: 'rows'
    },
    loadonce:true,      
    viewrecords: true,
    autowidth: true,
    height: 400,    
    rowNum:999,  
    subGrid: true,
    subGridOptions: {
        "plusicon"  : "ui-icon-triangle-1-e",
        "minusicon" : "ui-icon-triangle-1-s",
        "openicon"  : "ui-icon-arrowreturn-1-e",
        //expand all rows on load
        "expandOnLoad" : false
    },
    subGridRowExpanded: function(subgrid_id, row_id) { 
        var subgrid_table_id; 
        subgrid_table_id = subgrid_id+"_t";
        $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'>"); 
        jQuery("#"+subgrid_table_id).jqGrid({ 
            url: '/requestData', 
            datatype: "json", 
            colNames: ['Header'], 
            colModel: [{
                name:"Header",index:"Header"}
            ], 
            jsonReader: { repeatitems:false,
                          root: "rows" },
            loadonce: true,      
            viewrecords: true,
            rowNum: 999, 
            autowidth: true,
            sortorder: "asc", 
            height: '100%'
        }); 
        jQuery("#"+subgrid_table_id).jqGrid('navGrid',{edit:false,add:false,del:false}) 
   }
}); 
```

# actionscript-3 - 在类 ActionScript 3.0 之外使用的类变量 - AS3 Getter 和 Setter

> ID：12754799
> 
> 赞同：0
> 
> 时间：2012-10-05T22:22:38.320
> 
> 标签：actionscript-3, adobe, flash-cs5

我写了一个包含一些变量的类：

```
public class myButton extends Sprite{
    private var button:Sprite = new Sprite();
    public var Colors:Array;
    public var gType:String = GradientType.LINEAR;
    public var mRotate:Number = 0;
    ...
} 
```

我想像这样在主文件中编辑这些变量：

```
var btn:myButton = new myButton();
btn.Colors = [0xFFFFFF, 0xFFFF00];
btn.mRotate = Math.PI/2; 
```

脚本正在运行，但它没有看到这些变量的变化。我认为这是一个简单的问题，但我无法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:09:29.013

您想要的是类中的 setter 和 getter 函数： [http ://en.wikipedia.org/wiki/Mutator_method#Actionscript_3.0_example](http://en.wikipedia.org/wiki/Mutator_method#Actionscript_3.0_example)

然后，在每个 setter 中，您需要在变量更改时实际执行一些操作。

尝试这个

```
public class myButton extends Sprite{
    //....
    //note the change to private, common practice is to use lowercase first names in vars 
    //and include _ in front of private vars 
    private var _colors:Array;
    private var _mRotate:Number = 0;
    //...

    //getter and setter for _colors
    public function set colors(value:Array):void{
          _colors = value;
          var ct:ColorTransform = this.transform.colorTransform;
          ct.color = _colors[0]; //for simplicity I use only 1 color
          this.transform.colorTransform = ct;
    }

    public function get colors():Array{
         return _colors;
    }

    //do the same for mRotate but use the Number type

} 
```

这将允许你做

```
 var btn:MyBtn = new MyBtn();
 btn.colors = [...]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:41:19.147

修改公共变量应该没有理由不起作用（即使你不应该这样做）。这听起来更像是您的更新循环没有按照您的预期进行？

如果我粘贴您的代码并执行以下操作，它将按预期运行：

代码：

```
import MyButton;
var btn = new MyButton();
trace(">> mRotate: " + btn.mRotate); 
btn.mRotate = 5;
trace(">> mRotate: " + btn.mRotate); 
```

输出：

```
>> mRotate: 0
>> mRotate: 5 
```

但是同样，您真的不应该将变量声明为公共并直接访问它们。

# c# - 从数据表中提取列

> ID：12754800
> 
> 赞同：0
> 
> 时间：2012-10-05T22:22:42.997
> 
> 标签：c#, c#-4.0, datatable

有没有办法从 DataTable 中的单个列中提取所有项目，而不是使用 For Each 循环？

例如，以下从 DataTable 的单个列中的每一行构建一个 KeyValuePair 列表

```
List<KeyValuePair<string, double>> extract = new List<KeyValuePair<string, double>>();
foreach (DataRow item in _dataTableTest.Rows)
{
    KeyValuePair<string, double> selection = (KeyValuePair<string, double>)item["Selection"];
    extract.Add(selection);
} 
```

有没有更好的方法和/或更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:25:32.113

你可以使用`Linq-To-DataTable`

```
List<KeyValuePair<string, double>> extract = _dataTableTest.AsEnumerable()
          .Select(r => r.Field<KeyValuePair<string, double>>("Selection"))
          .ToList(); 
```

请注意，您需要添加`using System.Linq;`并且这在性能方面并不是“更快”。它还在内部使用循环。

# json - 在 JSON.NET 中反序列化 Jarray

> ID：12754801
> 
> 赞同：2
> 
> 时间：2012-10-05T22:22:54.863
> 
> 标签：json, json.net, deserialization

我需要反序列化这个。

```
{"previous_cursor_str":"0","next_cursor":0,"ids":[741999686,240455509,126524150,143548100,124328422,624776268,393738125,587829914,280834485,64818350,282713007,90425850,759794,164401208,114771958,114364910,89725893],"previous_cursor":0,"next_cursor_str":"0"} 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T01:29:37.537

Its a JObject really with an array of Id's inside it.

First you can create a class to represent the json like this:

```
public class RootObject
{
    public string previous_cursor_str { get; set; }
    public int next_cursor { get; set; }
    public List<int> ids { get; set; }
    public int previous_cursor { get; set; }
    public string next_cursor_str { get; set; }
} 
```

Then to deserialize the json into the object you do this:

```
var myJsonObject = JsonConvert.DeserializeObject<RootObject>(jsonString); 
```

Or if you just want the ids in a array:

```
var obj = JObject.Parse(jsonstring);

var idArray = obj["ids"].Children().Select(s=>s.value<string>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:28:33.113

刚刚尝试了[https://jsonclassgenerator.codeplex.com/](https://jsonclassgenerator.codeplex.com/)并得到了下面的代码。这与 geepie 的类相同。不错的工具。

```
using System;
using System.Collections.Generic;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

namespace Example
{
  class Result
  {
    [JsonProperty("previous_cursor_str")]
    public string PreviousCursorStr { get; set; }

    [JsonProperty("next_cursor")]
    public int NextCursor { get; set; }

    [JsonProperty("ids")]
    public IList<int> Ids { get; set; }

    [JsonProperty("previous_cursor")]
    public int PreviousCursor { get; set; }

    [JsonProperty("next_cursor_str")]
    public string NextCursorStr { get; set; }
  }    

  public static unsafe void Main()
  {
    Result result = JsonConvert.DeserializeObject<Result> (" ... your string ...");
    Console.WriteLine(result);
  }
} 
```

# android - Android cpp 源包含在 jar 文件中

> ID：12754806
> 
> 赞同：0
> 
> 时间：2012-10-05T22:23:25.593
> 
> 标签：android, ant, android-ndk

我正在将我的游戏移植到 Android。游戏是用 C++ 编写的，我使用 NDK 运行游戏逻辑代码。

我将 Android 特定的 Java 源代码与我的 C++ 源代码放在一起（实际上它是一个包含 C++ 和 Java 源文件的子文件夹 src/platform/android）。问题是，由于 C++ 和 Java 的源目录是相同的，所以当我构建我的 jar 文件时，ant 会将我所有的 .cpp 文件包含到 jar 中。

如何让 ant 忽略 .cpp 和 .mm（iPhone 版）文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:33:52.970

如果您使用的是自定义 ant 脚本，则可以使用如下内容：

```
<target name="jar" depends="compile">
<jar jarfile="${dir.dist}/xxx.jar" 
     basedir="${dir.build}"
     excludes="**/*.cpp"/>
</target> 
```

# javascript - JavaScript - 如何查看图像的原始数据

> ID：12754812
> 
> 赞同：1
> 
> 时间：2012-10-05T22:24:40.180
> 
> 标签：javascript, file, image-processing

是否可以在 javascript 中查看图像文件的原始数据？

我正在尝试编写一个将图像转换为其十六进制转储的脚本。

如何查看正在写入图像文件的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:52:13.540

你可以用 XHR 做到这一点：

```
var xhr = new XMLHttpRequest();
xhr.open('GET', '/my/image/file.png', true);
xhr.responseType = 'arraybuffer'; // this will accept the response as an ArrayBuffer
xhr.onload = function(buffer) {
    var words = new Uint32Array(buffer),
        hex = '';
    for (var i = 0; i < words.length; i++) {
      hex += words.get(i).toString(16);  // this will convert it to a 4byte hex string
    }
    console.log(hex);
};
xhr.send(); 
```

查看[ArrayBuffer](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBuffer)和[TypedArray](http://www.khronos.org/registry/typedarray/specs/latest/)的文档

[你可以在这里](https://github.com/samlecuyer/fontificate/blob/master/test/fontificate_test.js)看到我是如何在测试中使用它的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:37:11.887

> 是否可以在 javascript 中获取文件的源代码？

找到脚本的 URL 并将其加载到浏览器中。（或使用萤火虫）

# c# - 将 C# 应用程序连接到 Xeround 云数据库

> ID：12754817
> 
> 赞同：0
> 
> 时间：2012-10-05T22:25:05.807
> 
> 标签：c#, database, xeround

您好我正在尝试连接我的 c# 应用程序我使用了我在网上找到的这段代码，但它似乎在这里不起作用是代码

```
SqlConnection myConnection = new SqlConnection("user id=ayoya;" +
                                   "password=12333;" + 
                                    "server=instance28181.db.xeround.com:18422;" +
                                   "Trusted_Connection=yes;" +
                                   "database=salam;" +
                                   "connection timeout=30;");
        try
        {
            myConnection.Open();

        }
        catch (Exception a)
        {
            Console.WriteLine(a.ToString());
            MessageBox.Show("Failed");
        } 
```

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:47:27.603

通常，在连接到创建数据库的实例后（使用 CREATE DATABASE），您必须确保以下参数包含正确的参数：

`Hostname`– 请参阅详细信息选项卡中的 DNS 名称；`port #`– 以主机名出现；`username`& `password`– 您为数据库实例提供的用户名和密码（也显示在详细信息选项卡中）；`database`– 您尝试连接的数据库的名称（不是实例名称）。

现在，更具体地说，尝试使用以下代码将您的 c# 应用程序连接到您的 xeround DB：

```
MySqlConnection con = new
  MySqlConnection("Server=instance28181.db.xeround.com;
  Port=18422;Database=salam;Uid=ayoya;Pwd=1233"); 
```

祝你好运 ;）

# android - ListView 中的 TextView 更改 DrawableLeft

> ID：12754821
> 
> 赞同：2
> 
> 时间：2012-10-05T22:25:50.703
> 
> 标签：android, listview, textview, drawable

我有 ArrayList 它将简单的 xml textview 作为项目加载。在 TextView 中我有 drawableleft，但我无法弄清楚，如何更改该图像？在适配器中还是？因为现在有办法在字符串列表中插入可绘制对象。

我有加载项目，如：

```
items = new ArrayList<String>();
items.add(Some String item); 
```

这是适配器

```
ArrayAdapter<String> List = new ArrayAdapter<String>(this, R.layout.item_text, items);
ListView mylist = (ListView) findViewById(android.R.id.list);
mylist.setAdapter(List); 
```

和我的 TextView 项目

```
<TextView
android:id="@+id/item"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:drawableLeft="@drawable/folder"
android:drawableEnd="@drawable/next" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:47:58.513

扩展`ArrayAdapter`类并覆盖`getView()`方法。此方法返回`View`加载数据时将放置在每一行中的 。使用它可以根据需要更改图像。

# java - Java 输入需要两次

> ID：12754827
> 
> 赞同：0
> 
> 时间：2012-10-05T22:26:27.817
> 
> 标签：java

我的输入验证码有问题。我输入了它提示我的种子值，但之后我必须输入另一个有效输入才能打印出我的菜单选项。每次我也选择菜单选项之一时都会发生这种情况。

输入验证应该只接受 1 到 5 之间的整数值。因此，如果有人输入不在范围内的字母、负数或整数，它会要求他们输入一个，以便他们可以继续菜单选择。

我是不是写错了代码？我想摆脱不必要的第二个输入，只需要一个就可以继续游戏。由于某种原因，我还注意到 10 个作品之后的值，即使 6-9 被视为无效。我不确定为什么会这样。谢谢！

```
import java.util.Random;
import java.util.Scanner;

public class Sonowah
{

    public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);
        System.out.print("Please enter a seed value [integer]: "); 
        //assume input is integer for seed for RNG
        int seed = in.nextInt(); 
        Random rng = new Random(seed); //RNG

        int charge = 100;

    //loop here
    while (charge > 0)
    {           
        int number;
        do 
        {
            while (!in.hasNextInt(5))
            {
                System.out.println("Please enter valid interger");
                in.next();
            }
            number = in.nextInt();
        } 
        while (number <= 0);
        System.out.println("Interger is valid!");

            System.out.println("1\. Surrender");
        System.out.println("2\. Defend");
        System.out.println("3\. Fight");
            System.out.println("4\. Charge");
            System.out.println("5\. Potions");
            String menuchoice = in.next();

            if (menuchoice.equals("1"))
            {
                    statement
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:47:23.273

我认为您的循环不应该使用 in.hasNextInt() ...您已经向用户询问了一个数字，只需检查该数字是否在 1 到 5 之间。 Scanner.hasNextInt(5) 向用户询问一个 int然后尝试在基数 5 中解释它。请参阅[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextInt%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:49:15.157

这是你的问题：

```
do 
{
    while (!in.hasNextInt(5))
    {
        System.out.println("Please enter valid interger");
        in.next();
    }
    number = in.nextInt();
} 
while (number <= 0); 
```

基本上，所有这些代码在其余程序代码的上下文中都是无用的。

# ruby-on-rails-3 - 对 Ruby on Rails 中的嵌套感到沮丧

> ID：12754829
> 
> 赞同：1
> 
> 时间：2012-10-05T22:26:44.213
> 
> 标签：ruby-on-rails-3, foreign-keys, has-many-through, belongs-to, nested

这是我在这里的第一篇文章，老实说，我不会问太多问题，但是在 Ruby on Rails 中嵌套的事情让我很长时间以来一直很恼火。

我有一个`class Thought`（这是成员的个人帖子）分页为`@share_items`. 我包括一个喜欢按钮，允许成员喜欢其他成员的帖子（如 Facebook）。点赞按钮有`class Opinion`。

到目前为止我的代码：

```
Class Member
has_many :thoughts, dependent: :destroy
has_many :opinions, foreign_key: "fan_id", dependent: :destroy
has_many :fans, through: :opinions

Class Thought
belongs_to :member

has_many :opinions, foreign_key: "like_id", dependent: :destroy
has_many :likes, through: :opinions

validates :member_id, presence: true

Class Opinion
attr_accessible :like_id

belongs_to :fan, class_name: "Member"
belongs_to :like, class_name: "Thought"

validates :fan_id, presence: true
validates :like_id, presence: true

Member Model
def share
Thought.from_members_authenticated(self)
end

MemberPages Controller
def homepage
@share_items = registered_member.share.paginate(page: params[:page])
end 
```

部分`_share.html.erb`：

```
<% if @share_items.any? %>
<ol class="member_shares">
<%= render 'shared/share_item', collection: @share_items %>
</ol>
<%= will_paginate @share_items %>
<% end %> 
```

呈现部分`_share_item.html.erb`：

```
<li id="<%= share_item.id %>">
content...
<%= render 'thoughts/like_form' %>
...content
</li> 
```

一切都很顺利，直到我尝试`thoughts/like_form`在分页`@share_items`（`class Thought`）中呈现表单。它有奇怪和无法解释的结果（对我来说）。这是导致表单的代码。

```
Member Model

def liked?(random_thought)
opinions.find_by_like_id(random_thought.id)
end

def like!(random_thought)
opinions.create!(like_id: random_thought.id)
end

def unlike!(random_thought)
opinions.find_by_like_id(random_thought.id).destroy
end

OpinionsController

respond_to :html, :js

def create
@thought = Thought.find(params[:opinion][:like_id])
registered_member.like!(@thought)
respond_with @thought
end

def destroy
@thought = Opinion.find(params[:id]).like
registered_member.unlike!(@thought)
respond_with @thought
end
end 
```

最后是表格`thoughts/like_form`：

```
<div id="like_form">
<% if registered_member.liked?(@thought) %>
<%= render 'thoughts/unlike' %>
<% else %>
<%= render 'thoughts/like' %>
<% end %>
</div> 
```

这将呈现`thoughts/unlike`：

```
<%= form_for(registered_member.opinions.find_by_like_id(@thought),
html: { method: :delete },
remote: true) do |f| %>
<%= f.submit "Unlike", class: "btn btn-small btn-default" %>
<% end %> 
```

或`thoughts/like`：

```
<%= form_for(registered_member.opinions.build(like_id: @thought.id),
remote: true) do |f| %>
<div><%= f.hidden_field :like_id %></div>
<%= f.submit "Like", class: "btn btn-small btn-primary" %>
<% end %> 
```

结论`opinions/create.js.erb`：

```
$("#like_form<%= @thought.id %>").html("<%= escape_javascript(render('shared/unlike')) %>")
$("#likes").html('<%= @thought.likes.count %>') 
```

和`opinions/destroy.js.erb`：

```
$("#like_form<%= @thought.id %>").html("<%= escape_javascript(render('shared/like')) %>")
$("#likes").html('<%= @thought.likes.count %>') 
```

请注意，我对 js 做了一些可疑的事情......我试图告诉 like 表单以针对特定的想法（成员的分享）。注意：这是迄今为止最成功的一次，但没有雪茄。它将 fan_id (member) 和 like_id (thought) 添加到数据库中并呈现不同的按钮。但它有意想不到的结果。例如： 有时，无论我喜欢哪个成员的分享，它总是会呈现与页面的第一个分享不同的效果，尽管它会将正确的数据添加到数据库中。其他时候它会正常工作，但在刷新页面后，它会呈现点赞按钮（即使它当前是被点赞的），或者会呈现正确的按钮，但在尝试“取消赞”共享时会引发错误说没有匹配到“破坏/意见”

所以重申我的故意问题：当它位于定义为的分页列表中时，我将如何“成功”`class Opinion`在成员的 UNIQUE 共享 ( ) 内呈现一个赞按钮（带有 ）。`class Thought``@share_items`

抱歉，如果我感到困惑，这是第一次在这里发帖，我是 Ruby 新手。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:35:23.057

当你有嵌套对象时，你应该像这样声明你的表单：

```
form_for [@member, @opinion] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:17:29.383

我已经找到了一种方法，可以成功地为会员的个人帖子呈现喜欢/不喜欢的表格。虽然这很不可思议，但占用空间，最重要的是：缺乏趋势；它*确实*有效。

我没有渲染`like_form.html.erb`，而是直接将代码添加到`share_item.html.erb`并告诉表单不要寻找`@thought`而是寻找`share_item`（这是`@share_items`嵌套在集合中的单个项目`class Thought`）

`thoughts/unlike.html.erb`现在看起来像：

```
<%= form_for(registered_member.opinions.find_by_like_id(share_item),
html: { method: :delete },
remote: true) do |f| %>
<%= f.submit "Unlike", class: "btn btn-small btn-default" %>
<% end %> 
```

和`thoughts/like.html.erb`

```
<%= form_for(registered_member.opinions.build(like_id: share_item.id),
remote: true) do |f| %>
<div><%= f.hidden_field :like_id %></div>
<%= f.submit "Like", class: "btn btn-small btn-primary" %>
<% end %> 
```

`<%= @thought.id %>`我可以从 js 中省略，所以它看起来像`("#like_form")`

正如我所说，这使我不得不在其中添加代码而不是渲染表单部分，但如果我这样做，我会收到错误“share_item 是未知或未定义的局部变量”虽然我已经完成了我最初的目标是让表单真正工作，我仍在寻求有关如何呈现表单而不是直接将其添加到我的部分的建议，而不会收到该错误消息。

# perl - perl 找到最大值并记录它是哪一个

> ID：12754836
> 
> 赞同：0
> 
> 时间：2012-10-05T22:27:26.273
> 
> 标签：perl, max

如果我有三个带整数的变量并且想找出哪个是最大的（不仅是最大整数），例如如果 a 是 3，b 是 4，c 是 5，我想知道 c 是最大的而不是给我一个 5。如何实现这一点，或者我应该使用

```
use List::Util

$d = max($a,$b,$c);
if($d == $a){}
elsif($d == $b){}
else{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:32:58.370

*   将值存储在数组中

*   遍历数组中的每个索引（提示：使用`0..#$arrayName`构造）

*   保持，在一个单独的 2 个变量中，`$current_max_value`和`$current_max_index`

*   当您找到一个大于 的值时`$current_max_value`，将其存储在`$current_max_value`并将当前索引存储在 `$current_max_index`

*   循环结束后，您找到了最大元素的索引 ( `$current_max_index`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T03:31:15.177

通过使用单独的变量，你几乎可以做任何事情。假设您使用的是数组。

```
my @a = (3,4,5);

my $max_idx = 0;
for my $idx (1..$#a) {
   $max_idx = $idx
      if $a[$idx] > $a[$max_idx];
}

say $max_idx;
say $a[$max_idx]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:32:51.387

使用[PDL](http://pdl.perl.org/?docs=Ufunc&title=PDL%3a%3aUfunc#minmaximum)很容易，即使对于非常大的数据集也是如此。

```
#!/usr/bin/env perl

use strict;
use warnings;

use PDL;

my $pdl = pdl( 3,4,5 );
my (undef, $max, undef, $max_index) = $pdl->minmaximum;

print "Max: $max (at index $max_index)\n"; 
```

# jquery - 单击链接时如何显示隐藏的div

> ID：12754838
> 
> 赞同：2
> 
> 时间：2012-10-05T22:27:37.490
> 
> 标签：jquery, html, css, zurb-foundation

我需要仅在单击相关链接时才显示隐藏的 div。我一直在几个论坛上寻找答案，但我自己还没有问过这个问题。我正在使用 Foundation Grid System，并且对 javascript/jquery 知之甚少。提前感谢您提供的帮助。

[要查看标记..请点击链接： http](http://simplicitdesignanddevelopment.com/TENANT%20REP%20ZURB/tenant_reputations_home.html) ://simplicitdesignanddevelopment.com/TENANT%20REP%20ZURB/tenant_reputations_home.html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T01:27:49.827

给定您的代码，这个 jQuery 函数将起作用。

[**演示**](http://jsfiddle.net/gionaf/ffW5y/)

```
var links = $('.links a');
links.on('click',function(){
    var n = links.index(this);
    $('.row > div:not(.links)').eq(n).toggle();
});​ 
```

第二次单击同一链接将隐藏该段落。如果这不是您想要的，请替换`toggle()`为`show()`, 或`fadeIn()`, 或`slideDown()`...

您首先需要[包含 jQuery](http://jquery.com/download/)，对吗？;-)

* * *

如果您在实际布局中无法实现上述功能，请替换这部分代码：

```
<div class="row">
<div>Content to be shown when the first link is clicked</div>
/* ...etc... */ 
```

有了这个：

```
<div class="row" id="rowTarget">
<div>Content to be shown when the first link is clicked</div>
/* ...etc... */ 
```

和我的功能：

```
var links = $('.links a');
links.on('click',function(){
    var n = links.index(this);
    $('#rowTarget > div').eq(n).toggle();
});​ 
```

**[另一个演示](http://jsfiddle.net/gionaf/TszPL/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:32:48.217

使用 jQuery，您可以轻松地使链接显示/隐藏 div

```
$(function(){
   $('a#resources').click(function(){
       $('div#row div').eq(8).show();
   });

}); 
```

或通过使用切换，您可以显示/隐藏它：

```
 $(function(){
   $('a#resources').click(function(){
       $('div#row div').eq(8).toggle();
   });

}); 
```

（至少现在我数到它是八个`'div#row div'`......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:32:52.590

```
$("#search-tenant").click(function(e){
   $("#row div").eq(1).show();
   e.preventDefault();
}); 
```

对于其他链接也是如此。只需将 替换为`#search-tenant`链接的`id`，并将替换`.eq(1)`为 中隐藏元素的位置`<div id="row">`。

但是，我建议您为此使用其他类型的元素，而不是链接。如果您将拥有一个不符合链接目的的链接......那么为什么要使用它？

# java - 使用 putExtra 意图在新活动中显示特定布局

> ID：12754839
> 
> 赞同：0
> 
> 时间：2012-10-05T22:27:55.650
> 
> 标签：java, android, layout, android-intent

我很好奇我是如何使用的

```
putExtra("something", something); 
```

为了在我的应用程序中进行新活动，

```
Intent i = new Intent(getApplicationContext(), MainActivity.class);
i.putExtra("something", something)
startActivity(i); 
```

我需要知道发送端和接收端的外观如何，根据意图中通过 putExtra 发送的内容加载特定的布局文件。

因此，如果我在接收端发送 i.putExtra("a", a) ，它将使用 R.layout.a_layout.xml 创建一个内容视图

但如果我发送 i.putExtra("b", b) 它将加载 R.layout.b_layout.xml

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T22:38:04.173

这样做的一种好方法是说：

```
Intent i = new Intent(getApplicationContext(), MainActivity.class);
i.putExtra("layout", R.layout.a_layout.xml); 
```

将正确的布局发送到您的新班级。然后在新类中，您可以使用：

```
int layout = getIntent().getIntExtra("layout", R.layout.default_layout);
setContentView(layout); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:37:43.977

发送代表您的布局的 int：

```
i.putExtra("layout_id", R.layout.my_layout1); 
```

并加载它

```
setContentView(getIntent().getIntExtra("layout_id", R.layout.default_layout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:36:38.297

诸如`R.layout.a_layout`is 之类的值只是一个`int`. 所以，只需使用`putExtra("Key", R.layout.a_layout);`.

然后，在您的接收活动中，只需将其传递`int`给`setContentView()`，例如：

```
public void onCreate(Bundle savedInstanceState)
{
    int layout = getIntent().getIntExtra("Key", -1);
    if (layout != -1)
        setContentView(layout);
} 
```

# xml - Flex/AS3/XML：如何动态更改用于 Flex 子菜单的 XMLList？

> ID：12754843
> 
> 赞同：0
> 
> 时间：2012-10-05T22:28:26.643
> 
> 标签：xml, actionscript-3, apache-flex

使用actionscript 3，有人可以举例说明我如何动态更改下面的子菜单项吗？

```
<fx:Declarations>
<fx:XMLList id="menuData" xmlns="">
    <menuitem label="Column A">
            <menuitem label="Item A.1"/>
            <menuitem label="Item A.2"/>
    </menuitem>
    <menuitem label="Column B">
            <menuitem id="ItemB1" label="B.1"/>
            <menuitem type="separator"/>
            <menuitem label="Item B.2" type="check"/>
            <menuitem label="Item B.3" type="check"/>
            <menuitem id="myId" label="Item B.4">
                <menuitem label="SubItem B.4.1"/>
                <menuitem label="SubItem B.4.2"/>
            </menuitem>
    </menuitem>
        ...
</fx:XMLList>
<fx:Declarations>
...
<mx:MenuBar dataProvider="{menuData}" .../> 
```

例如，假设我们要将子菜单项 B.4.1 和 B.4.2 替换为：

```
<menuitem label="SubItem abc"/>
<menuitem label="SubItem def"/>
<menuitem label="SubItem ghi"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:05:44.210

通过标签抓取项目，或者更好的是，给它一个 id 并使用它来检索它，然后[替换它的 children](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html#setChildren%28%29)。

[您可以使用E4X](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e72.html)轻松做到这一点：

```
var item:XMLList = menuData..menuitem.(attribute('label') == "Item B.4");

var subItems:XML = 
    <items>
        <menuitem label="SubItem abc"/>
        <menuitem label="SubItem def"/>
        <menuitem label="SubItem ghi"/>
    </items>;

item.setChildren(subItems.menuitem); 
```

有关此主题的更多信息，请参阅[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html)。

# php - 聊天不起作用，萤火虫也没有帮助

> ID：12754845
> 
> 赞同：-2
> 
> 时间：2012-10-05T22:28:41.310
> 
> 标签：php, javascript, jquery, ajax, json

显然，我一定是对 firebug 做错了，因为当我去检查我的代码时，我看不到任何错误。我知道我的代码并不完美，主要是因为它是一个 ajax 聊天并且没有聊天正在进行。也许我用错了，但我检查了我的网站页面的“全部”、“错误”和“警告”，但[没有](http://www.entrilab.com/chatroom/)返回任何内容。我刚刚开始使用萤火虫以及整体编程，所以我确定我错过了一些东西。非常感谢任何关于我可以做些什么来变得更好的提示或指示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:32:38.527

如果您查看网络选项卡并尝试添加登录名，则表示您的 php 脚本丢失：

```
"NetworkError: 404 Not Found - http://www.entrilab.com/chatroom/php/ajax.php?action=login" 
```

# c# - 在结构中初始化一个不安全的固定双精度数组

> ID：12754851
> 
> 赞同：0
> 
> 时间：2012-10-05T22:29:08.820
> 
> 标签：c#, unsafe

[这个问题是从Marshalling C# structure 到 C++ Using StructureToPtr](https://stackoverflow.com/questions/12747330/marshalling-c-sharp-structure-to-c-using-structuretoptr)的后续问题。我有以下结构：

```
[StructLayout(LayoutKind.Explicit, Size = 120, CharSet = CharSet.Unicode)]
public unsafe struct DynamicState
{
    [FieldOffset(0)]
    public fixed double Position[3];

    [FieldOffset(24)]
    public fixed double Velocity[3];

    [FieldOffset(48)]
    public fixed double Acceleration[3];

    [FieldOffset(72)]
    public fixed double Attitude[3];

    [FieldOffset(96)]
    public fixed double AngularVelocity[3];
} 
```

如果我尝试像这样初始化一个数组：

```
var dynamicState = new DynamicState();
double[] array = new double[] { 1, 2, 3 };

fixed (double* pArray = array)
{
    dynamicState.Acceleration = pArray;
} 
```

我收到以下错误：`The left-hand side of an assignment must be a variable, property or indexer`。

初始化作为结构一部分的不安全数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:34:44.337

那么简单的方法似乎*有效*：

```
for (int i = 0; i < 3; i++)
{
    dynamicState.AngularVelocity[i] = array[i];
} 
```

不过，它可能不像您要寻找的那样远。这是一段性能关键的代码吗？

这*可能*会更好：

```
Marshal.Copy(array, 0, new IntPtr(dynamicState.AngularVelocity), array.Length); 
```

我不能说我对非托管代码有很多经验，但至少值得看看这些选项......

# c++ - 如何使用命令行解析器库对类别中的选项进行分组？

> ID：12754860
> 
> 赞同：3
> 
> 时间：2012-10-05T22:30:52.170
> 
> 标签：c++, parsing, options

我正在开发一个框架，并且一直在使用 TCLAP 来处理命令行选项。当程序`help`被调用时，**我想打印它的参数用法自动分组在 categories**。输出示例是：

```
$ ./program help

Learning Options
    -t          Train mode
    -neg        Specifies the path for the negative examples
    -pos        Specifies the path for the positive examples

Detection Options
    -d          Detection mode
    -param      Parameters file path
    -o          Output folder
    -track      Enables tracking

Feature Extraction Options
    -w          Window size
    -feat       Feature type. Available: SIFT and SURF. 
```

我一直在查看[TCLAP 的文档](http://tclap.sourceforge.net/manual.html)，但没有找到任何东西。我仍在研究这个[StackOverflow 帖子](https://stackoverflow.com/questions/253556/what-parameter-parser-libraries-are-there-for-c)。我发现这[`libobj`](http://people.cs.kuleuven.be/~ares.lagae/libobj/index.html)似乎可以做到这一点，但并不完全清楚。

**我怎么能用 TCLAP 做到这一点？如果不可能，是否有另一个我可以使用的库？**

**Bonus -**一个小型库，例如 TCLAP :-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T06:21:36.430

> 我可以使用另一个库吗？

您可以使用[Boost.Program_options](http://www.boost.org/doc/libs/1_51_0/doc/html/program_options.html)库。它相对较小（Fedora 17 上为 370k）。

可以在[这里](http://www.boost.org/doc/libs/1_51_0/doc/html/program_options/tutorial.html#id2547756)找到一个例子：

```
namespace po = boost::program_options;
// Declare the supported options.
po::options_description desc("Allowed options");
desc.add_options()
    ("help", "produce help message")
    ("compression", po::value<int>(), "set compression level")
;

po::variables_map vm;
po::store(po::parse_command_line(ac, av, desc), vm);
po::notify(vm);    

if (vm.count("help")) {
    cout << desc << "\n";
    return 1;
}

if (vm.count("compression")) {
    cout << "Compression level was set to " 
 << vm["compression"].as<int>() << ".\n";
} else {
    cout << "Compression level was not set.\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T23:44:08.947

您可以使用[Gengetopt](http://www.gnu.org/software/gengetopt/gengetopt.html#Basic-Usage)和 getopt 库。它包括一个`text`允许您插入分组标题的命令。一件好事是它支持许多人都知道的命令行参数的 GNU 约定。

# vb.net - 如何组织 DirectoryInfo.GetFiles()

> ID：12754861
> 
> 赞同：0
> 
> 时间：2012-10-05T22:30:54.150
> 
> 标签：vb.net, .net

所以我有以下几行代码

```
Dim di As New IO.DirectoryInfo(path)
    Dim diar1 As IO.FileInfo() = di.GetFiles("*." & filetype) 
```

是否可以根据文件名预先排列元素，现在组织文件的方式是有几个数字以错误的顺序显示。我问这个是因为我基本上是确定目录中是否缺少文件。我通过从另一个文件名中减去一个文件名来确定这一点。文件名的示例是 1.0001.tif 1.0002.tif 2.0001.tif 等等。确定文档id号和小数的整体就是文档的页码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:02:09.180

您可以使用 LINQ 对文件进行排序：

```
var tifs = Directory.EnumerateFiles(path, "*.tif", SearchOption.TopDirectoryOnly)
    .Select(fn => new { fn, name = Path.GetFileNameWithoutExtension(fn) })
    .Select(x => new
    {
        x.fn,
        x.name,
        major = int.Parse(x.name.Split('.')[0]),
        minor = int.Parse(x.name.Split('.')[1])
    })
    .OrderBy(x => x.major).ThenBy(x => x.minor); 
```

请注意，您需要添加`using System.Linq`并且这还不是故障安全的。它要求文件始终具有这种格式，否则`int.Parse`会抛出（您可以使用`int.TryParse`）。

您可以使用 foreach 来枚举结果：

```
foreach(var x in tifs)
    Console.WriteLine("File:{0}", x.fn); 
```

编辑：但`diar1.Sort()`如果您只想按字母顺序排序，您也可以简单地使用（如我的评论中所述）。

# backbone.js - Backbone.js 查看事件已注册但未触发

> ID：12754862
> 
> 赞同：0
> 
> 时间：2012-10-05T22:31:04.290
> 
> 标签：backbone.js, marionette, backbone-views, backbone-events

刚从这里开始，似乎无法让这个非常基本的东西发挥作用。我所有的元素都按照我的预期呈现。我的事件在“事件”选项卡中的 Firefox 中注册，但似乎都没有触发（单击、鼠标悬停等）。我正在使用以下内容。

*   骨干网 0.9.2
*   下划线 1.4.1
*   木偶 .10.2
*   需要 jquery (requireJs 2.1.0) (jquery 1.8.2)

# 路由器

```
define([
'jquery',
'backbone',
'underscore',
'views/TodaysProgramsView',
'collections/ProgramSnippetCollection'],
function($, Backbone, _, TodaysProgramsView, ProgramSnippetCollection){
    return Backbone.Router.extend({
        initialize:function () {

            var programSnippetCollection = new ProgramSnippetCollection([
                {title:'underwater basket weaving'},
                {title:'How to win friends and influence people and stuff'}
            ]);

            this.mainView = new TodaysProgramsView({
                el : $("#todays_programs"),
                collection:programSnippetCollection
            });

            Backbone.history.start();
        },
        routes:{
            '':'home'
        },
        'home':function () {
            this.mainView.render();
        }
    });
}); 
```

# 集合视图 [TodaysProgramsView.js]

```
define([
'jquery',
'backbone',
'underscore',
'views/ProgramSnippetView'],
function($, Backbone, _, ProgramSnippetView){
    return  Backbone.Marionette.CollectionView.extend({

        events: {
            "click"   : "clicked"

        },
        clicked : function(){
            alert("parent clicked")
        },

       itemView : ProgramSnippetView
    });
}); 
```

# 项目视图 [ProgramSnippetView.js]

```
define([
'jquery',
'backbone',
'underscore',
'text!templates/programSnippet.html'],
function($, Backbone, _, template){
    return Backbone.Marionette.ItemView.extend({

        events: {
            "click"   : "courseClicked",
            'mouseover' : 'mousedOver'
        },

        render: function(){

            var json = this.model.toJSON();
            console.log("RENDERING SNIPPET with data", json);
            $(this.el).html( _.template(template, json) );
            return this;
        },

        courseClicked : function(){
            alert("you clicked a course, good work");
        },

        mousedOver : function(){
            console.log("Mousin!");
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:56:43.113

在经历了很多挫折和数小时的 javascript 调整之后，我注意到有一个 div 的 z-index 设置为 2。这覆盖了我的目标并吞噬了所有事件。叹。

# c# - ASP.NET C# - 一个带有参数的函数来写下拉列表

> ID：12754863
> 
> 赞同：1
> 
> 时间：2012-10-05T22:31:21.957
> 
> 标签：c#, asp.net

我是 ASP.NET 和 C# 的新手。

我想做的是某种类型的函数，我可以在其中提供一些参数，这将为我生成一个下拉列表框。我知道 ASP.NET 要好得多，但我不知道如何实现类似甚至更好。

当我以前使用经典的 ASP/VBScript 完成时，我有一个子例程来生成一个下拉列表。例子：

```
Sub CreateSelectBox(selectboxID, onChangeTrigger, selectedValue, SQLTable, and SQLCondition)
     ' ... Query the databse from SQLTable, write a SelectBox with option values, and selected the selectedValue for arguments....
End Sub 
```

因此，我在任何提交表单中所要做的只是一行代码。像这样：

```
<tr><td><%CreateSelectBox "DropDownList1", "onChangeRunJavascript123();", "Selected123", "SQL_CustomerTable", "where CustomerType = 'Consumer' order by SortOrder ASC" %></td></tr> 
```

请建议在 ASP.Net C# 中执行此操作的更好方法，如果可能，请提供代码示例，因为我是新手。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:41:55.737

Asp.net 有一个[DropdownList 控件可以帮助做到这一点](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist%28v=vs.80%29.aspx)，[这是非常古老的教程](http://www.4guysfromrolla.com/webtech/071101-1.shtml)和数据[绑定控件](http://www.asp.net/web-forms/tutorials/moving-to-aspnet-20/data-bound-controls)

标记：.aspx 文件

```
<asp:DropdownList runat="server" ID="MyList" DataTextField="PersonName" DataValueField="PersonID">

</asp:DropdownList> 
```

代码隐藏：.aspx.cs 文件

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack)
   {
       MyList.DataSource = getDataFromDB();
       MyList.DataBind();
   }
}

//this function can return IEnumerable e.g. DataTable of Person, List<Person>, SqlDataReader etc
private DataTable getDataFromDB()
{
   //select data from database
   //return data;
} 
```

# php - PHP/MySQL 将数据类型为文本的时间戳转换为可用的日期格式

> ID：12754866
> 
> 赞同：0
> 
> 时间：2012-10-05T22:31:34.400
> 
> 标签：php, html, mysql, function, date

我有一个页面，允许用户注册定向日期和时间。我创建了错误检查来检查数据库中是否存在电子邮件地址。如果电子邮件地址确实存在，我会向学生发送一条错误消息：“您已经注册。您已注册（“orientation_student 表中的时间戳与他们用来注册的电子邮件相匹配”）。我的问题是：包含时间戳值的列有一个文本数据时间。我需要获取与电子邮件地址匹配的时间戳，并以如下格式返回：“Tuesday 10/02/2012”。时间部分有效，我只是可以t 让日期部分工作。我的 PHP 代码在下面。相关代码在代码中大约 50 行左右开始，在注释下方显示“// Jason McCoy 在 2012 年 10 月 5 日添加的代码”

PHP 代码

```
<?php
// set the mode
if(isset($_GET['p']))   $mode = $_GET['p'];
else if(isset($_POST['p'])) $mode = $_POST['p'];
else $mode = '';

// sanitize input
if(isset($_GET['time_id'])) {
    $timestamp = (int)$_GET['timestamp'];
    $time_id = (int)$_GET['time_id'];
}
if(isset($_POST['time_id'])) {
    $timestamp = (int)$_POST['timestamp'];
    $time_id = (int)$_POST['time_id'];
}

// validate input
$error = '';
if(date("G", $timestamp) != 0)
    $error .= 'Invalid timestamp.<br/>';
if(($time_result = valid_time_id($time_id)) == false)
    $error .= 'Invalid time id.<br/>';
else
    $time_row = mysql_fetch_array($time_result);

switch($mode) {
    default:
        break;

    case "schedule":
        // sanitize input
        $first_name = sanitize_input($_POST['first_name']);
        $last_name = sanitize_input($_POST['last_name']);
        $email = sanitize_input($_POST['email']);
        $retype_email = sanitize_input($_POST['retype_email']);
        $college_id = sanitize_input($_POST['college_id']);
        $retype_college_id = sanitize_input($_POST['retype_college_id']);
        $phone = sanitize_input($_POST['phone']);
        $first = (isset($_POST['first']) ? 1 : 0);
        $verification = $_POST['verification'];

        // validate input
        $error = '';
        if(empty($first_name))
            $error .= 'You must enter a first name.<br>';
        if(empty($last_name))
            $error .= 'You must enter a last name.<br>';
        if(!valid_email($email))
            $error .= 'Invalid email.<br>';
        if($email != $retype_email)
            $error .= 'The two email addresses don\'t match.<br>';
        // code added by Jason McCoy on October 5, 2012
        // code used to check if the email address already exists in the database
        // if email address exists, return an error message to the user
        // **** DISPLAY THE DATE AND TIME THAT THE STUDENT SIGNED UP FOR USING THIS EMAIL ADDRESS ****
        // **** THE STEP ABOVE HAS NOT BEEN COMPLETED AS OF OCT. 5TH, 2012 ****
         $student_result = db_query("select id, timestamp, time_id from orientation_student where email='".$email."'");
      if(mysql_num_rows($student_result) > 0) {
            $student_row = mysql_fetch_array($student_result);
            $date_result = db_query("select timestamp from orientation_student where email='".$email."'");
            $time_result = db_query("select time from orientation_time where id='".$student_row['time_id']."'");
            $time_row = mysql_fetch_array($time_result);
            $schedule_error .= 'You can only schedule an orientation once, and you are already scheduled for '
                .$formatted_date. ' at '.$time_row['time'].'. If you want to reschedule your test, '
                .'<a href="schedule.php?date='.$student_row['date'].'&time_id='.$student_row['time_id']
                .'">click here</a> to cancel the time you are scheduled for first.<br>';
            $error =. $schedule_error;
      }
        if(!valid_college_id($college_id))
            $error .= 'Invalid student id. Student id must contain seven digits including zeros.<br>';
        if($college_id != $retype_college_id)
            $error .= 'The two student ids don\'t match.<br>';
        if(empty($phone))
            $error .= 'You must enter a phone number.<br>';
        $student_result = db_query("select id from ".$GLOBALS['db_pre']."student where canceled='0' and timestamp='".$timestamp."' and time_id='".$time_id."'");
        if(mysql_num_rows($student_result) >= $time_row['slots'])
            $error .= 'Sorry, too many people are already scheduled for this time slot.<br>';
        if($_SESSION['captcha'] != $verification)
            $error .= 'Invalid image verification.<br>';

        // if there's no error
        if($error == '') {
            // schedule it
            db_query("insert into ".$GLOBALS['db_pre']."student set first_name='".$first_name
                ."',last_name='".$last_name
                ."',email='".$email
                ."',college_id='".$college_id
                ."',phone='".$phone
                ."',timestamp='".$timestamp
                ."',time_id='".$time_id
                ."',unschedule_code='".md5(time())
                ."',inserted_at='".gmdate("Y-m-d H:i:s")
                ."'");
            $student_id = mysql_insert_id();

            /* send email to student
            $subject = "A-B Tech New Student Appointment Confirmation";
            if(current_site() == "orientation") $subject = "A-B Tech New Student Orientation";
            else $subject = "A-B Tech Campus Tour";
            $message = format_text("Scheduling Email", $student_id);
            email($email, $subject, $message);
            */

            // get the start and end times for the appointment
            $time_result = db_query("select * from ".$GLOBALS['db_pre']."time where id='".$time_id."'");
            $time_row = mysql_fetch_array($time_result);
            //$timestamp_start = strtotime(date("F j, Y", $timestamp).", ".$time_row['time']);
            //$timestamp_end = strtotime("+1 hour", $timestamp_start);

            /*// send email, with calendar attachment, to counselors
            if(current_site() == "orientation") $subject = "A-B Tech New Student Orientation: ";
            else $subject = "A-B Tech Campus Tour: ";
            $subject .= date("F j, Y", $timestamp).", ".$time_row['time']."; ".$first_name." ".$last_name."";
            $message = "A student has scheduled an appointment:\r\n\r\n";
            $message .= "Name: ".$first_name." ".$last_name."\r\n";
            $message .= "Date: ".date("F j, Y", $timestamp).", ".$time_row['time']."\r\n";
            $message .= "Email: ".$email."\r\n";
            $message .= "Phone: ".$phone."\r\n";

            // send the email to all the counselors
            $user_result = db_query("select * from user where no_email=0");
            while($user_row = mysql_fetch_array($user_result)) {
                email($user_row['email'], $subject, $message);
            }*/
        }
        break;
}

// captcha image verification
srand(time());
$_SESSION['captcha'] = substr(md5(rand(1,9999)), rand(1,15), 5);
$_SESSION['captcha'] = str_replace("O", "1", $_SESSION['captcha']); // to avoid confusion
$_SESSION['captcha'] = str_replace("o", "2", $_SESSION['captcha']); // ...
$_SESSION['captcha'] = str_replace("0", "3", $_SESSION['captcha']); // ...

// the top layout
layout_top(date("F j, Y", $timestamp).', '.$time_row['time']);

// the middle layout
switch($mode) {
    default:
        if($mode == "schedule" && $error == "") {
            echo display_text("Scheduling Text", $student_id);
            ?><p><a href="index.php">Click here to go back</a></p><?php
        } else {
            ?>
            <h1 align="center" style="padding-bottom: 0; margin-bottom: 0;"><?=strtoupper(date("F j, Y", $timestamp).' '.$time_row['time'])?></h1>
            <p align="center" style="padding-top: 0; margin-top: 0;"><strong><a href="index.php?month=<?=date("n", $timestamp)?>&year=<?=date("Y", $timestamp)?>">choose another date</a></strong></p>

            <?php if($mode == "schedule" && $error != '') { ?>
            <p class="error"><?=$error?></p>
            <?php } ?>

            <form action="<?=$_SERVER['PHP_SELF']?>" method="post">
            <input type="hidden" name="p" value="schedule">
            <input type="hidden" name="timestamp" value="<?=$timestamp?>">
            <input type="hidden" name="time_id" value="<?=$time_id?>">
            <fieldset>
            <legend>Schedule an appointment for this date</legend>
            <p>Fill out this form to schedule a New Student appointment on this date. Make sure you use a valid email address.</p>
            <ul>
                <li>
                    <label for="first_name">First Name</label>
                    <input type="text" name="first_name"<?=($mode == "schedule" ? ' value="'.$first_name.'"' : '')?>>
                </li>
                <li>
                    <label for="last_name">Last Name</label>
                    <input type="text" name="last_name"<?=($mode == "schedule" ? ' value="'.$last_name.'"' : '')?>>
                </li>
                <li>
                    <label for="email">Email</label>
                    <input type="text" name="email" size="30"<?=($mode == "schedule" ? ' value="'.$email.'"' : '')?>>
                </li>
                <li>
                    <label for="retype_email">Retype Email</label>
                    <input type="text" name="retype_email" size="30"<?=($mode == "schedule" ? ' value="'.$retype_email.'"' : '')?>>
                </li>
                <li>
                    <label for="college_id">Student ID(For your student ID#, please refer to the e-mail you received regarding your A-B Tech WebAdvisor and Email Accounts.)</label>
                    <input type="text" name="college_id" size="30"<?=($mode == "schedule" ? ' value="'.$college_id.'"' : '')?>>
                </li>
                <li>
                    <label for="retype_college_id">Retype Student ID</label>
                    <input type="text" name="retype_college_id" size="30"<?=($mode == "schedule" ? ' value="'.$retype_college_id.'"' : '')?>>
                </li>

                <li>
                    <label for="phone">Phone</label>
                    <input type="text" name="phone"<?=($mode == "schedule" ? ' value="'.$phone.'"' : '')?>>
                </li>
                <li>
                    <label for="verification">Verification</label>
                    <img src="../images/verify.php" width="180" height="40" alt="Verification"><br/>
                    <input type="text" name="verification" size="10"> <small>&laquo; type the characters in the image above into this box</small>
                </li>
                <li>
                    <input type="submit" value="Submit">
                </li>
            </ul>
            </fieldset>
            </form>
            <?php
        }
        break;
}

// the bottom layout
layout_bottom();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:47:49.810

数据库中的时间戳看起来像 unix 秒，所以尝试：

```
$formatted_date=date("l, d/m/Y", $timestamp); 
```

更多关于`date()`格式选项的[信息](http://php.net/manual/en/function.date.php)。

# c# - 在等待在同一个线程上执行后如何获得继续？

> ID：12754867
> 
> 赞同：5
> 
> 时间：2012-10-05T22:31:37.003
> 
> 标签：c#, async-await, c#-5.0

正如我最近发现的那样，在`await`没有同步上下文的情况下执行可能会导致等待后的代码在不同的线程上执行。

我目前在 VSTO 办公室加载项中遇到奇怪行为的问题，我认为这可能是这种行为的结果。在处理 Office 应用程序引发的事件时，没有同步上下文（除非我创建了一个表单，它将创建一个同步上下文）。

我的问题是创建表单是否是确保我拥有同步上下文的最佳/最有效方法，或者是否有更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T01:05:09.730

Office 应用确实在 STA 上下文中调用它们的事件，但它们不提供适当的`SynchronizationContext`.

解决这个问题的最简单方法是在我的博客[`SynchronizationContext`Odds and Ends](http://nitoprograms.blogspot.com/2011/02/synchronizationcontext-odds-and-ends.html)中解释，我在其中简要描述了我在为我的文章进行研究时发现的一些杂项事情，但还不够重要，不能包括在内。要解决此问题，请在每个事件开始时执行以下操作：

```
SynchronizationContext.SetSynchronizationContext(
    new WindowsFormsSynchronizationContext()); 
```

之后的任何`await`s 都应该在 STA 线程上恢复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T23:09:06.510

您可能想查看[这篇文章](http://blogs.msdn.com/b/pfxteam/archive/2012/01/21/10259307.aspx)，它描述了如何在没有消息泵的情况下设置 SynchronizationContext。请注意，这仅在您希望有其他要等待的工作（排队多个回调）时才真正有用。如果您一次只等待一件事，您的代码也可能只是同步运行，因为您没有'与您的空闲时间无关，例如运行消息泵。

# javascript - 将 target="_blank" 添加到尚未指定目标的某些链接

> ID：12754869
> 
> 赞同：4
> 
> 时间：2012-10-05T22:32:07.730
> 
> 标签：javascript, jquery, regex, coldfusion

我意识到已经有数千个类似的问题被问过，但是在浏览了 30 分钟后，我找不到一个能解决我具体情况的问题。

我正在寻找 ColdFusion 7/8 或 Javascript 或 JQuery 解决方案。CF优先。

我需要一个脚本，它将搜索一个大文本字符串以查找所有不区分大小写的实例...
`<a href="http://[something_external]">`
尚未指定目标。并将它们替换为...
`<a href="http://[something_external]" target="_blank">`

因此，将要更改的链接的标准是：

1.  href 值以“http://”开头
2.  href 值不包含“ourdomain.com”
3.  尚未指定目标值

例如，我在网上找到了以下内容，但它并不完全正确：
`REReplaceNoCase(mystring, '(<a href="http://[^"]+")>', '\1 target="_blank">', 'ALL')`

说得通？可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T00:17:21.727

**jQuery**

```
$(function() {
  $.each($('a[href^=http]'), function() {
    var $this = $(this);
    $this.attr('href').indexOf('ourdomain.com') >= 0 || typeof($this.attr('target')) != "undefined" || $this.attr('target', '_blank');
  });
}); 
```

*   循环遍历从`http`文档准备就绪开始的所有链接
*   包含`ourdomain.com`?
*   有属性`target`？
*   设置属性`target`

# java - 在 Java 中使用 ==、>、< 等比较两个相同类型的对象时会发生什么？

> ID：12754870
> 
> 赞同：4
> 
> 时间：2012-10-05T22:32:11.653
> 
> 标签：java, conditional

> **可能重复：**
> [等于和 == 之间的差异](https://stackoverflow.com/questions/971954/difference-between-equals-and)

例如，如果我有

```
MyClass foo = new MyClass();
MyClass bar = new MyClass();

if (foo == bar) {
    // do something
}
if (foo < bar) {
    // do something
}
if (foo > bar) {
    // do something
} 
```

如何`foo`和`bar`得到比较？Java 会寻找`.compareTo()`要实现的方法`MyClass`吗？Java 是否会逐位比较内存中对象的实际二进制结构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T22:33:48.957

非常简单的算术比较运算符`==`和`!=`比较对象的引用，或对象的内存地址。`>`, and`<`和相关的运算符不能与对象一起使用。

因此`==`，`!=`仅当您想确定两个不同的变量是否指向*同一个*对象时才有用。

例如，这在事件处理程序中很有用：如果您将一个事件处理程序绑定到多个按钮，例如，您需要在处理程序中确定*哪个*按钮被按下。在这种情况下，您可以使用`==`.

您所询问的类型的对象比较是使用诸如 之类的方法`.equals`或诸如`String.compareTo`.

值得注意的是，默认`Object.equals`方法等价于`==`：比较对象引用；这在[docs](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)中有介绍。Java 中内置的大多数类都`equals`使用它们自己的实现来覆盖：例如，`String`覆盖`equals`以一次比较一个字符。要为您自己的对象获得更具体/有用的实现`.equals`，您需要`.equals`使用更具体的实现来覆盖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T22:36:21.860

显然，您自己没有尝试过，因为,`<`和不适用于对象。`>``<=``>=`

但是，`==`比较左右操作数。当它们的二进制相同时，结果为真。对于对象，in 比较指针。所以这意味着只有当对象在内存中左右是同一个对象时，这*才会导致 true。*

其他方法，如 compareTo 和 equals 提供了一种自定义方法来比较内存中的不同对象，但它们可能彼此相等（即数据相同）。

如果是字符串，例如：

```
String str0 = new String("foo");
String str1 = new String("foo");

// A human being would say that the two strings are equal, which is true
// But it are TWO different objects in memory. So, using == will result
// in false

System.out.println(str0 == str1); // false

// But if we want to check the content of the string, we can use the equals method,
// because that method compares character by character of the two objects

String.out.println(str0.equals(str1)); // true
String.out.println(str1.equals(str0)); // true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T22:35:03.977

不，它没有。它比较两个变量是否是对相同对象的引用。

除非您正在处理受自动装箱约束的类型，例如`Integer`，否则您根本不能使用`>`and`<`对象。

在您使用自动装箱类型的情况下，java 不会查找特定方法，而是会自动取消装箱变量，将它们转换为基元 - 但等号运算符并非如此。`==`即使在比较自动装箱对象时，操作员也会始终将对象作为引用进行比较：

```
 Integer i1 = new Integer(10);
    Integer i2 = new Integer(10);

    if(i1 < i2) { // evaluates to false!
        System.out.println("i1 is less than i2");
    }
    else if(i1 > i2) { // evaluates to false!
        System.out.println("i1 is greater than i2");
    }
    else if(i1 == i2) { // evaluates to false!
        System.out.println("i1 and i2 are equal");
    }
    else {
        System.out.println("Um... well that's just confusingi");
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T22:34:00.263

`foo`它比较参考值，并且只有在和`bar`指向同一个对象时才会返回 true 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T22:35:11.563

在 Java 中，“==”比较对象的身份。"new" 保证每次都返回一个新的对象标识。

如果“==”会调用 compareTo，我真的很喜欢。唉，它没有。

# python - 在 python 中使用 ElementTree 将 xml 元素作为第一个子元素插入

> ID：12754872
> 
> 赞同：7
> 
> 时间：2012-10-05T22:32:31.163
> 
> 标签：python, xml, elementtree

我正在使用 python 在 xml 文档中创建一个元素，然后将其作为文档的 FIRST CHILD 插入。所以，如果我正在创建一个名为的元素，`newChild`我会想要这样的 xml ......

```
<root>
  <childA></childA>
  <childB></childB>
  <childC></childC>
</root> 
```

成为...

```
<root>
  <newChild></newChild>
  <childA></childA>
  <childB></childB>
  <childC></childC>
</root> 
```

我知道任意 xml 中元素的顺序无关紧要，但是我为一个古老的系统编写 xml 文档，如果 xml 元素不在预期的顺序中，它就会中断，所以我在这方面没有选择。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T22:47:27.353

xml.etree.ElementTree.Element.insert方法允许您[向](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.insert)插入到特定位置的元素添加新的子元素。

在你的情况下`element.insert(0, new_sub_element)`应该做的伎俩。

# windows - exchange 2007如何删除特定邮箱中的邮件

> ID：12754873
> 
> 赞同：0
> 
> 时间：2012-10-05T22:32:33.877
> 
> 标签：windows, powershell, exchange-server

我想运行一个 powershell 命令来删除在特定日期发送给特定个人的包含特定主题的消息。

您能否给我建议或在可以执行此操作的 powershell 脚本上为我指出正确的方向？

非常感谢您的指导。

我发现了一个很酷的脚本：

```
#Add Exchanage snapin
add-pssnapin Microsoft.Exchange.Management.PowerShell.Admin

#Get list of mailboxes to delete
$users=Get-Content C:\MailboxesToDelete.txt

#For Loop to delete them
foreach ($user in $users)
{
#Print to screen user mailbox to delete
$user
#Delete AD user and Mailbox
Remove-Mailbox -Identity $user -Permanent $true -whatif

#Remove the -whatif if you want to really delete some users.
} 
```

从这里：

[http://randomtechminutia.wordpress.com/2012/05/03/powershell-script-to-delete-exchange-mailboxes-in-mass/](http://randomtechminutia.wordpress.com/2012/05/03/powershell-script-to-delete-exchange-mailboxes-in-mass/)

但这会删除邮箱而不是消息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:09:59.287

请参阅`Export-Mailbox`cmdlet 的帮助。更多信息在这里：

[http://technet.microsoft.com/en-us/library/bb266964(v=exchg.80).aspx](http://technet.microsoft.com/en-us/library/bb266964%28v=exchg.80%29.aspx)

# xna - 将 kinect 关节位置映射到 2d 点

> ID：12754875
> 
> 赞同：1
> 
> 时间：2012-10-05T22:32:41.730
> 
> 标签：xna, kinect

我是在 XNA 中使用官方 Kinect SDK 1.5 编程的新手。如何将 Skeleton 关节的位置映射到 XNA 2D 屏幕以匹配图像流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:22:21.307

这很容易，因为 Kinect SDK 提供了一些映射辅助方法。

MapSkeletonPointToColor 将为您提供 SkeletonPoint 在 2D 彩色框架中的位置。您只需传递两个参数：您的骨架点和目标颜色帧格式。

```
foreach (Joint joint in skeleton.Joints)
{
    // Transforms a SkeletonPoint to a ColorImagePoint
    var colorPoint = Kinect.MapSkeletonPointToColor(joint.Position, Kinect.ColorStream.Format);

    // colorPoint has two properties : X and Y which gives you the positions in the 2D color frame.
    // TODO : Do something with the colorPoint value. 
} 
```

# jquery - 当一个特定元素被包裹在另一个元素中时引用它

> ID：12754877
> 
> 赞同：0
> 
> 时间：2012-10-05T22:32:49.180
> 
> 标签：jquery

因此，我尝试使用 div 在屏幕上动态生成一些框，当您单击特定的框（`name=box1`）时，它会执行某些代码。当它们被硬编码到我的 html 中时，以下代码工作正常，但现在因为我将它们包装在 a 中`p`，所以它需要 'this' 作为对`p`not 的引用`div`。我相信它的第 11 行需要改变。

```
$(document).ready(function(){
  $('#swapboxes').click(function(){
        //build the box location array and boxes
        $('#boxeshere').html("");
        for(var i = 0;i < $.gameconfig.numofboxes;i++){
            $('<div class="boxes" style="background:#bf3215;height:100px;width:100px;left:'+200*i+'px;position:fixed;" name="box' + i + '" id="' + i + '"/>').appendTo('#boxeshere');
        }
  });
  //Execution for clicking on boxes
  $('.boxes').click(function(){
        if(this.attributes["name"].value == "box1"){
            $("#info").text("Congrats!!! You win!");
        }
        else{
            $("#info").text("I'm sorry, wrong box");
        }   
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:46:01.643

点击应该停留在方框上。

问题是 .boxes 是在页面加载*后*生成的，当点击#swapboxes 时，但是当 .boxes 尚不存在时，您尝试将点击事件直接绑定到页面加载时称为 box*的*东西。那是行不通的。

使用新的 .on() 委托方法，您绑定到在声明（页面加载）时存在的祖先元素（在这种情况下，您已经为 #swapboxes 获得了一个 jQuery 对象），并委托给目标元素。然后，当#swapboxes 感觉到点击时（它会因为事件冒泡），它会向下查找 .boxes 元素，并在那里应用操作。像这样：

```
$(document).ready(function(){
    $('#swapboxes').click(function(){
        //build the box location array and boxes
        $('#boxeshere').html("");
        for(var i = 0;i < $.gameconfig.numofboxes;i++){
            $('<div class="boxes" style="background:#bf3215;height:100px;width:100px;left:'+200*i+'px;position:fixed;" name="box' + i + '" id="' + i + '"/>').appendTo('#boxeshere');
        }
    }) 
    //Execution for clicking on boxes
    //delegate from #swapboxes, which exists on page-load, to .boxes:
    .on('click', '.boxes', function(){
        if($this.attr('name') == "box1"){
            $("#info").text("Congrats!!! You win!");
        }
        else{
            $("#info").text("I'm sorry, wrong box");
        }       
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:46:43.873

这里的问题是事件没有附加到新创建的元素..因为新创建的元素在页面上仍然不存在。

在这种情况下，您需要委托事件，它应该可以正常工作..试试这个

```
$('#boxeshere').on('click', '.boxes' ,function(){
        if($(this).prop("name") == "box1"){
            $("#info").text("Congrats!!! You win!");
        }
        else{
            $("#info").text("I'm sorry, wrong box");
        }   
  }); 
```

在这里，我们将事件添加到框的父级，因此即使由于事件冒泡而添加了新元素，新创建的元素也将与事件相关联。

# c# - Environment.GetEnvironmentVariable 找不到变量值

> ID：12754884
> 
> 赞同：55
> 
> 时间：2012-10-05T22:33:12.200
> 
> 标签：c#, .net, web-services, iis, environment-variables

`Environment.GetEnvironmentVariable("variableName")`如果调用是从托管在 IIS 上的 webMethod 中进行的，为什么不会获得变量的值，如果我从同一台机器上的控制台应用程序调用它，它会起作用？

我在哪里设置这些变量对 IIS Web 服务可见？我应该使用第二个参数`Environment.GetEnvironmentVariable(name, target)`来获取它吗？

其实很简单：

```
[WebMethod(Description = "Gets the environment variable value.")]
public string GetEnvironmentVariable()
{
    return Environment.GetEnvironmentVariable("VARIABLE_NAME_HERE");
} 
```

顺便说一句，VARIABLE_NAME_HERE 是在系统和用户级别设置的。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2017-11-09T21:49:47.920

重新启动 Visual Studio 为我修复了它（猜测 IIS Express 也会缓存这些值）。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-12-31T17:56:00.707

我遇到了同样的问题，感谢[sergserg 的回答](https://stackoverflow.com/questions/12754884/environment-getenvironmentvariable-wont-find-variable-value/12754934#12754934)，我想出了这个并且它有效：

```
var value = Environment.GetEnvironmentVariable(key, EnvironmentVariableTarget.User) 
```

重要的是使用`EnvironmentVariableTarget.User`

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-10-05T22:38:10.903

阅读此处了解更多信息：

[在 .NET 应用程序中使用系统范围的环境变量](http://www.beansoftware.com/NET-Tutorials/Environment-Variables.aspx)

* * *

具体来说：

> 什么是系统环境变量？
> 
> 环境变量是保存系统中整个环境信息的字符串。这些字符串值是动态的，它们会影响系统的行为方式。环境变量可以分为两种主要类型：
> 
> **系统变量**：无论当前用户是什么，它们都会影响整个系统。它们由 Windows 定义并保存在注册表中。您需要成为管理员才能修改它们。您通常需要重新启动计算机才能使这些更改生效。
> 
> **用户变量**：它们影响当前系统用户的当前环境。任何系统用户都可以删除、修改和添加它们。它们由 Windows 安装程序、某些程序和用户使用。对这些变量的更改将保存到注册表并立即生效。

* * *

如果您尝试访问计算机上不存在的环境变量，您将遇到问题。您必须尝试查找本地计算机上存在的变量，而不是您的 Web 服务主机上的变量。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-01-24T08:55:56.207

您需要使用该`iisreset`命令重新启动 IIS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-02T21:49:27.113

有一个 DLL 或一些代码被`cmd`PowerShell 和 Visual Studio（可能也由 VS Code）共享，它们在加载时缓存环境变量（分别为每个应用程序）。

因此，如果您正在测试要更改环境变量的东西，而不是重新启动 IDE（这很慢），您可以启动单独的`cmd`PowerShell 或 PowerShell 进行测试，更改环境变量，然后重新启动它`cmd`或 PowerShell。我推荐使用 PowerShell，因为您可以使用向上箭头来重用之前会话中键入的命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-10T17:18:28.667

我的项目的 csproj 文件没有（或预期的）local.settings.json。通过添加它的更新节点，Environment.GetEnvironmentVariable("variablename") 开始工作并从变量中获取信息。

```
<ItemGroup>
    <None Update="host.json">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Update="local.settings.json">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        <CopyToPublishDirectory>Never</CopyToPublishDirectory>
    </None>
</ItemGroup> 
```

# javascript - 选择多个字母按钮时，它替换了文本输入

> ID：12754885
> 
> 赞同：8
> 
> 时间：2012-10-05T22:33:24.290
> 
> 标签：javascript, jquery, html

我在下面有一个 jsfiddle 应用程序：

[JSFIDDLE](http://jsfiddle.net/ybZvv/3/)

如果您打开 jsfiddle，您将看到一个包含“Answer”按钮的顶部控件。您还将看到一些字母按钮、一个“True”按钮和一个“False”按钮。

“True”和“False”按钮完美运行，这意味着如果用户单击“True”然后单击“False”，它会替换文本输入，因为您无法同时获得“True”和“False”的答案”。

但是字母按钮有问题。如果单击字母按钮，您会意识到可以单击多个字母按钮，这很好，但问题是它会替换那些不正确的字母的文本输入。如果选择了多个字母按钮，那么它应该显示所有这些字母按钮的文本输入，而不是用选择的最新字母按钮替换文本输入。

那么有谁知道我需要在代码中更改什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:50:30.750

`data-hid`您在此处为按钮生成一个：

```
var hid = "hidden" + id + n + "value";  
$(btn).attr("data-hid", hid); 
```

基于此，您现在生成一个输入字段：

```
var input = '<input type="text" id="' + hid + '" value="' + value + '" name="' + id + 'value" />'; 
```

这里的 id 变量是按钮的 id，`answerC`例如。`#hiddenanswerC0value`因此，有了这个，您将在第一次单击按钮时得到隐藏。

但是，当您添加答案时，按钮将生成如下所示的 id：

```
.attr('id', $this.attr('id')+'Row'); 
```

所以最后会有一个额外`Row`的。所以`data-hid`和 输入框也会不同（`#hiddenanswerCRow0value`）。

**编辑：** 另一个问题是您实际上并没有为新按钮创建数据隐藏。您只需在单击它们后为第一组按钮创建它。但是，当您创建第二组（单击后）并激活 C 按钮时，它将没有该`data-hid`组，因此您无法删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:41:52.773

在您遇到问题的第一个输入 ID 上似乎没有正确设置输入 ID。我显示它的 ID 为“#hiddenanswerC0value”，但如果我没记错的话，应该是“#hiddenanswerCRow0value”。我会进一步研究它，但这可能足以让你弄清楚。

# c++ - __has_trivial_copy 在 clang 和 gcc 中的行为不同。谁是对的？

> ID：12754886
> 
> 赞同：7
> 
> 时间：2012-10-05T22:33:26.997
> 
> 标签：c++, c++11

`std::is_trivially_copyable`这两个编译器中的任何一个仍然不支持（至少就 gcc 4.6 而言）。但是两者都提供`__has_trivial_copy`了做得很好的指令。除非涉及已删除的复制构造函数。

```
struct A { A(A const&) =delete; }; 
```

`__has_trivial_copy(A)`在 clang 中返回 1，在 gcc 中返回 0。

我正在研究标准，找不到一个子句，说明当删除复制构造函数时，该类是否仍被认为是可简单复制的。

谁是对的？

我倾向于相信 gcc 是正确的，因为`struct A`根本不可复制，更不用说微不足道的可复制了。此外，还有一个广泛的共识，即删除的复制构造函数可以视为私有声明但未定义的构造函数，在这种情况下 gcc 仍然是正确的。

另一方面，第 9/6 节中的标准描述了不具有任何非平凡操作的平凡可复制性。我想如果你按照书面标准阅读，clang 可能是对的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:52:16.080

libc++ 是 clang 的本机库，它支持`std::is_trivially_copyable<T>`并且实际上在您的示例中假装该类型是可以简单复制的，尽管它显然不是简单可复制的。我认为，12.8 [class.copy] 第 12 段将删除的构造函数定义为非平凡的：

> 如果不是用户提供的，则类 X 的复制/移动构造函数是微不足道的......

删除的声明显然是用户提供的。当我在这里说“清楚地”时，我的意思是我不能立即按照将函数声明为已删除的标准作为用户提供的函数来支持它......

进一步调查显示 8.4.2 [dcl.fct.def.default] 第 4 段（感谢 Jesse Good 提供参考）使删除的功能非用户提供：

> ...如果一个特殊的成员函数是用户声明的，并且在其第一次声明时没有显式默认或删除，则它是用户*提供的。*...

因此，如果没有其他理由使非平凡可复制（但这些都不适用于`A`问题中的类型。这有点奇怪：类型类型不能使用其复制）复制构造函数，但*可以*使用复制`std::memcpy()`！我不确定这是否真的是故意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:00:55.317

既不正确也不不正确，因为两者都在使用扩展。

**警告**：此答案基于 C++11 草案 N3242 中的词语，但不在最终标准中。所以不是特别好。留待比较和讨论。

对于您似乎要问的问题：（`std::is_trivially_copyable<A>::value`而且`std::is_trivially_copy_constructible<A>::value`）必须是`false`.

12.8 第 13 段：

> 如果类的复制/移动构造函数`X`既不是用户提供也不是删除，并且如果......

只是为了完整，

9 第 6 段：

> 可*简单复制的类*是这样的类：
> 
> *   没有重要的复制构造函数（12.8），
> *   没有重要的移动构造函数（12.8），
> *   没有非平凡的复制赋值运算符（13.5.3、12.8），
> *   没有非平凡的移动赋值运算符（13.5.3、12.8），并且
> *   有一个微不足道的析构函数（12.4）。

3.9 第 9 段：

> 标量类型、可平凡复制的类类型（第 9 条）、此类类型的数组以及这些类型的 cv 限定版本（3.9.3）统称为*可平凡复制类型*。

20.9.4.3 表 49：

> 模板：`template <class T> struct is_trivially_copyable;`
> 
> 条件：`T`是一个可简单复制的类型（3.9）

# c++ - WaveOutWrite 回调创建断断续续的音频

> ID：12754891
> 
> 赞同：2
> 
> 时间：2012-10-05T22:33:46.880
> 
> 标签：c++, audio, winmm

我有四个缓冲区用于在合成器中播放音频。我最初提交两个缓冲区，然后在回调例程中将数据写入下一个缓冲区，然后提交该缓冲区。

当我生成每个缓冲区时，我只是将一个正弦波放入其中，其周期是缓冲区长度的倍数。

当我执行时，我听到每个缓冲区之间的短暂停顿。我已将缓冲区大小增加到 44100 Hz 的 16K 样本，因此我可以清楚地听到整个缓冲区正在播放，但每个缓冲区之间都有中断。

我认为正在发生的是，只有在所有已写入的缓冲区都完成时才会调用回调函数。我需要合成保持领先于播放，所以当每个缓冲区完成时我需要一个回调。

人们通常如何解决这个问题？

更新：我被要求添加代码。这是我所拥有的：

首先我连接到 WaveOut 设备：

```
// Always grab the mapped wav device.
UINT deviceId = WAVE_MAPPER;

// This is an excelent tutorial:
// http://planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=4422&lngWId=3

WAVEFORMATEX wfx; 
wfx.nSamplesPerSec = 44100; 
wfx.wBitsPerSample = 16; 
wfx.nChannels = 1; 
wfx.cbSize = 0; 
wfx.wFormatTag = WAVE_FORMAT_PCM;
wfx.nBlockAlign = (wfx.wBitsPerSample >> 3) * wfx.nChannels;
wfx.nAvgBytesPerSec = wfx.nBlockAlign * wfx.nSamplesPerSec;

_waveChangeEventHandle = CreateMutex(NULL,false,NULL);

MMRESULT res;
res = waveOutOpen(&_wo, deviceId, &wfx, (DWORD_PTR)WavCallback, 
    (DWORD_PTR)this, CALLBACK_FUNCTION); 
```

我初始化了我将使用的四个帧：

```
for (int i=0; i<_numFrames; ++i)
{
    WAVEHDR *header = _outputFrames+i;
    ZeroMemory(header, sizeof(WAVEHDR));
    // Block size is in bytes.  We have 2 bytes per sample.
        header->dwBufferLength = _codeSpec->OutputNumSamples*2; 
    header->lpData = (LPSTR)malloc(2 * _codeSpec->OutputNumSamples);
    ZeroMemory(header->lpData, 2*_codeSpec->OutputNumSamples);
    res = waveOutPrepareHeader(_wo, header, sizeof(WAVEHDR));
    if (res != MMSYSERR_NOERROR)
    {
        printf("Error preparing header: %d\n", res - MMSYSERR_BASE);
    }
}
SubmitBuffer();
SubmitBuffer(); 
```

这是 SubmitBuffer 代码：

```
void Vodec::SubmitBuffer()
{
WAVEHDR *header = _outputFrames+_curFrame;
MMRESULT res;
res = waveOutWrite(_wo, header, sizeof(WAVEHDR));
if (res != MMSYSERR_NOERROR)
{
    if (res = WAVERR_STILLPLAYING)
    {
        printf("Cannot write when still playing.");
    }
    else
    {
        printf("Error calling waveOutWrite: %d\n", res-WAVERR_BASE);
    }
}

_curFrame = (_curFrame+1)&0x3;

if (_pointQueue != NULL)
{
        RenderQueue();
    _nextFrame = (_nextFrame + 1) & 0x3;
}
} 
```

这是我的回调代码：

```
void CALLBACK Vodec::WavCallback(HWAVEOUT hWaveOut, 
    UINT uMsg, 
    DWORD dwInstance, 
    DWORD dwParam1,
    DWORD dwParam2 )
{
// Only listen for end of block messages.
if(uMsg != WOM_DONE) return;

    Vodec *instance = (Vodec *)dwInstance;
instance->SubmitBuffer();
} 
```

RenderQueue 代码非常简单 - 只需将模板缓冲区的一部分复制到输出缓冲区中：

```
void Vodec::RenderQueue()
{
double white = _pointQueue->White;
white = 10.0; // For now just override with a constant value
int numSamples = _codeSpec->OutputNumSamples;
signed short int *data = (signed short int *)_outputFrames[_nextFrame].lpData;
for (int i=0; i<numSamples; ++i)
{
    Sample x = white * _noise->Samples[i];
    data[i] = (signed short int)(x);
}
_sampleOffset += numSamples;
if (_sampleOffset >= _pointQueue->DurationInSamples)
{
    _sampleOffset = 0;
    _pointQueue = _pointQueue->next;
}
} 
```

更新：主要解决了这个问题。我需要增加 _nextFrame 和 _curFrame （不是有条件的）。播放缓冲区领先于写入缓冲区。

但是，当我将播放缓冲区减少到 1024 个样本时，它再次变得不稳定。在 2048 个样本中很明显。Debug 和 Release 版本都会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T10:10:05.227

1024 个样本只是大约 23ms 的音频数据。wav 是从 Windows Vista 开始的高级 API。如果你想要低延迟的音频播放，你应该使用[CoreAudio](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370784%28v=vs.85%29.aspx)。您可以在共享模式下将延迟降至 10 毫秒，在独占模式下将延迟降至 3 毫秒。此外，音频取决于系统上当前运行的进程。换句话说，这取决于您的音频线程运行以获取数据的频率。您还应该查看[MultiMedia Class Scheduler Service](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684247%28v=vs.85%29.aspx)和[AvSetMmThreadCharacteristics](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681974%28v=vs.85%29.aspx)函数。

# knockout.js - 在淘汰赛绑定上获取元素？

> ID：12754893
> 
> 赞同：0
> 
> 时间：2012-10-05T22:33:47.857
> 
> 标签：knockout.js

当以下 foreach 被绑定时，我需要能够让视图将 html 从 $.get 或硬编码添加到“body”div。我需要“模型”成为那个 vm，但我不知道如何让 vm 将 html 添加到页面

```
<!--ko foreach:modules -->
<div class="module" data-bind="attr: {id:id}">
    <div class="head" data-bind="text:title"></div>
    <div class="body" data-bind=""></div>
</div>
<!-- /ko -->

my.Module = function (mod) {
    var m = mod || { },
        id = m.id || new Date().getTime(),
        css = ko.observable(m.css || { }),
        title = ko.observable(m.title || 'New Module'),
        privy = ko.observable(),
        model = ko.observable(new my.Models.DailyStatus());
    return {
        id: id,
        css: css,
        title: title,
        privy: privy,
        model: model
    };
};

my.Models.DailyStatus = function () {

    var venues = ko.observableArray(),
        init = function () {
            //Get HTML specific to my needs
            //Add to desired area of page
            //?????

            // Get data to fill venues
            update();
        },
        update = function () {
            my.service.getNewVenues(function (c) {
                venues(c.d.Payload);
            });
        };

    init();
    return {
        init: init,
        update: update,
        venues: venues
    };
}; 
```

有没有办法让我的模型知道他的宿主是什么元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:05:29.750

不太确定这是否是您所要求的，但是当您使用该`ko.applybindings()`方法启动应用程序绑定时，您可以传入第二个参数，该参数指定您希望绑定到的 DOM 元素。

```
ko.applyBindings(myViewModel, document.getElementById("Some-Element")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:48:26.240

这在评论中得到了回答，所以我想我会把它移到我可以选择作为答案的地方。

'html' 绑定就是所需要的。

对于我的特殊需求，我似乎无法在插入的 html 中获取 ko 绑定来呈现/执行操作，因此我切换到使用模板标记，其函数作为其值，这也提供了插入 html 的有效方法。

# android - Android：带有标题栏的全屏活动

> ID：12754897
> 
> 赞同：7
> 
> 时间：2012-10-05T22:34:05.637
> 
> 标签：android, android-activity, themes

我想用标题栏设置我的活动全屏，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T23:14:18.813

在样式.xml 中：

```
<resources>
   <style name="Theme.FullScreen" parent="@android:style/Theme.Holo">
   <item name="android:windowNoTitle">false</item>
   <item name="android:windowFullscreen">true</item>
   </style>
</resources> 
```

请参阅您的 mainfest 中的自定义样式：

```
<activity android:name=".MyActivity" android:theme="@style/Theme.FullScreen"/> 
```

老实说，我自己没有测试过这种组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T23:45:46.680

这对我有用：

```
// Remove System bar (and retain title bar)
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                     WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

在代码中它看起来像这样：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class ActivityName extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Remove System bar (and retain title bar)
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // Set your layout
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T11:02:08.810

要创建具有自定义标题样式的全屏应用程序，请覆盖全屏主题的某些属性，如下所示：

```
<style name="AppTheme" parent="@android:style/Theme.Light.NoTitleBar.Fullscreen">
    <item name="android:windowNoTitle">false</item>
    <item name="android:windowTitleSize">45dip</item>
    <item name="android:windowTitleBackgroundStyle">@style/TitleBackgroundStyle</item>
</style>

<style name="TitleBackgroundStyle">
    <item name="android:background">@drawable/title</item>
</style> 
```

并根据需要进行修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T22:47:58.803

我建议您为活动设置全屏主题，例如 Theme.Black.NoTitleBar.Fullscreen 并在活动布局中创建自定义标题栏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-22T18:57:10.263

将您的应用主题设置为 Theme.Holo.Compactmenu 以使您的标题栏与图标一起可见

# c# - c# timer.elapsed?

> ID：12754898
> 
> 赞同：7
> 
> 时间：2012-10-05T22:34:08.987
> 
> 标签：c#, timer

我已经包含了这个`System.Timers`包，但是当我输入：

```
Timer.Elapsed; //its not working, the property elapsed is just not there. 
```

我记得它在 VB.NET 中。为什么这不起作用？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-05T22:36:46.667

它不是财产。[这是一个事件](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)。

因此，您必须提供一个事件处理程序，该处理程序将在每次计时器滴答时执行。像这样的东西：

```
public void CreateTimer() 
{
    var timer = new System.Timers.Timer(1000); // fire every 1 second
    timer.Elapsed += HandleTimerElapsed;
}

public void HandleTimerElapsed(object sender, ElapsedEventArgs e)
{
    // do whatever it is that you need to do on a timer
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T22:37:25.703

微软的例子。 [http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)

Elapsed 是一个事件，因此需要一个事件处理程序。

```
using System;
using System.Timers;

public class Timer1
{
private static System.Timers.Timer aTimer;

public static void Main()
{       
    // Create a timer with a ten second interval.
    aTimer = new System.Timers.Timer(10000);

    // Hook up the Elapsed event for the timer.
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    // Set the Interval to 2 seconds (2000 milliseconds).
    aTimer.Interval = 2000;
    aTimer.Enabled = true;

    Console.WriteLine("Press the Enter key to exit the program.");
    Console.ReadLine();       
}

// Specify what you want to happen when the Elapsed event is  
// raised. 
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
}
}

/* This code example produces output similar to the following:

Press the Enter key to exit the program.
The Elapsed event was raised at 5/20/2007 8:42:27 PM
The Elapsed event was raised at 5/20/2007 8:42:29 PM
The Elapsed event was raised at 5/20/2007 8:42:31 PM
...
 */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-06T14:42:44.107

这里之前的答案都是正确的，但是现在 .net 6 / VS2022 已经发布并且关于可空性很重要，并且所有上述答案都会引发编译器警告 CS8622。

解决方案是在回调函数的参数中简单地将源对象标记为可为空，如下所示：

```
...
    timer.Elapsed += TimerElapsedHandler;
...

public void TimerElapsedHandler(object? source, ElapsedEventArgs e)
{
    //Your Handling Code Here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-23T08:27:57.263

您需要一个事件处理程序，然后在分配事件处理程序时启用并在您的处理程序中停止一个条件

```
 Timer = new System.Timers.Timer();
 Timer.Elapsed += new System.Timers.ElapsedEventHandler(PageLoaded);
 Timer.Interval = 3000;
 Timer.Enabled = true; 
```

.....................

```
 public void PageLoaded(object source, System.Timers.ElapsedEventArgs e)
        {
            // Do what ever here
            if (StopCondition)Timer.Enabled = false;

        } 
```

# iphone - 命中区域仅在 UIButton 的标签上

> ID：12754899
> 
> 赞同：2
> 
> 时间：2012-10-05T22:34:20.950
> 
> 标签：iphone, ios, ipad, uibutton, cgrect

我像这样创建一个 UIButton：

```
button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0,0,100,100); 
```

该按钮有效，但点击区域仅在文本上，而不是整个按钮。我已将按钮的背景设置为`[UIColor clearColor]`. 我需要做什么才能使按钮的整个框架成为点击区域？

我想我可以将标签的框架更改为等于按钮，但这似乎很不礼貌。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:16:12.743

试试这样

```
 UIButton *button=[UIButton buttonWithType:UIButtonTypeCustom];
        button.frame=CGRectMake(0,0,100,100);
        button.backgroundColor=[UIColor clearColor];
        [button setTitle:@"Set" forState:UIControlStateNormal];
        [button setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(buttonClicked) forControlEvents: UIControlEventTouchUpInside];
        [self.view addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:26:05.737

有问题的按钮是用图层构建的。我最终做的是确保背景层具有纯色背景色。在这种情况下，简单地将按钮的背景设置为清除是行不通的。

```
//set a background color so it is clickable
[layer0 setBackgroundColor: CGCOLORA(0, 1) ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-06T11:42:02.783

将 UIButton 的 opaque 属性设置为 true 对我有用（iOS10）

# php - PHP：保存用户登录后选择的角色的最佳实践

> ID：12754900
> 
> 赞同：1
> 
> 时间：2012-10-05T22:34:34.163
> 
> 标签：php, session, object, cookies

我正在使用 Symfony2，但这个问题很笼统。

我想登录一个用户并在登录后立即让他从一定数量的“角色”中进行选择。这些角色是数据库中带有大量配置的对象。

问题：存储用户选择的角色的最佳实践是什么？

会议？但是在会话中存储对象是不好的做法，不是吗？会话中角色的 ID？cookie 中角色的 ID（或它的哈希）？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:39:14.197

我会说将角色的 ID 存储在会话中，并在需要时检索所需的对象部分（如果这是一个问题，可能全部在一个数据库调用中保存）。与 cookie 相比，您对会话的控制更多，用户将无法关闭它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:45:06.843

绝对存储会话 ID 而不是整个对象。特别是如果对象的数据不会因用户而异。事实上，如果对象的数据不会随时间变化，您可能会使用多种技术中的一种来缓存它。

您是否使用 cookie 或会话来存储信息取决于您的要求。如果您需要存储额外的数据（除了角色的 ID），并且要求这些数据不被编辑，那么您应该考虑使用会话，因为它们会阻止用户手动编辑存储的数据。否则，使用 cookie 效率更高，因为服务器不必处理会话存储和检索的所有麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:45:36.217

将角色存储在会话中是一个坏主意，除非角色永远不会改变（在这种情况下，您也可以对它们进行硬编码并仅存储角色 ID），或者您正在以一种允许您轻松更新角色的方式存储会话（数据库会话用于例子）。

将 id/hash 存储在 cookie 中只是愚蠢的 - 如果您可以在 session 中存储 id/hash，为什么还要添加另一个 cookie？

我的建议：在会话中存储角色 ID。如果您担心每次请求都获取它，您可以随时缓存角色。

# ios - 这个部分下载的图像是否可以通过运营商数据连接限制来解释？

> ID：12754910
> 
> 赞同：1
> 
> 时间：2012-10-05T22:35:28.093
> 
> 标签：ios, image, throttling, bandwidth-throttling

我在一个新的、具体的假设下重新提出[这个问题。](https://stackoverflow.com/questions/12712383/what-might-cause-a-partially-loaded-jpeg-in-a-uiimageview)如果这是答案，我将更新/折叠/合并两者。

AT&T 是否可以限制订阅者的数据使用量来解释当我们的 iOS 应用程序加载时看起来像这样的图像：

![在此处输入图像描述](../Images/eaaebd2833b24f88e86c2dfc4334164c.png)

最初我认为内容长度标头与发回的实际内容之间可能存在差异。我模拟了服务器发回的正文比报告的内容长度短并且我的客户端不以这种方式运行的情况；相反，客户端等待 60 秒，然后无法加载图像。这是一个很好的结果。

这里这个问题的后果是我的客户端认为它已经成功下载了图像并正在缓存它，永远不会再次重新下载，导致图像的所有后续视图都有不正确的灰色区域。

看到此图像的用户在 AT&T 4G、HSPA+ 上运行，并且非常接近他的最大值。AT&T 给他发了一条短信，说他们正在限制他。

请注意，提供此图像的服务器是 amazon S3；客户端已直接连接到 S3 以获取图像。

如果有人可以讨论当 AT&T 报告他们正在限制数据连接时会发生什么，我将不胜感激！

# twitter-bootstrap - 如何使 twitter 引导页面在不同的屏幕尺寸上看起来相同

> ID：12754912
> 
> 赞同：1
> 
> 时间：2012-10-05T22:35:36.217
> 
> 标签：twitter-bootstrap

我已经开始使用 twitter boostrap 并且找不到如何使网站在不同的屏幕尺寸上看起来相同

首先，顶部导航栏折叠并成为小屏幕上的菜单栏，然后​​内容也开始环绕并落在小屏幕上，

我很确定有一些选项或东西可以防止这种行为，搜索互联网和文档，我找不到任何东西，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:51:12.450

不要包含**bootstrap-responsive.css**。如果您从 CDN 加载，请确保您使用的是 CSS 的非组合版本。

例如，这是来自 BootstrapCDN 的非响应版本：

[http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.min.css](http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.min.css)

您可以在官方 Bootstrap 文档的[响应式设计部分中找到有关 Bootstrap 响应式设计的更多信息。](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

# assembly - 引导扇区致命：INT18 引导错误

> ID：12754917
> 
> 赞同：0
> 
> 时间：2012-10-05T22:36:29.553
> 
> 标签：assembly, bootstrapper

无法让我的 FAT32 引导扇区工作。请帮我。我已经尝试了从查看代码到在 virtualbox 中测试它的所有方法。当我在 virtualbox 中运行它时，我收到此错误：致命：INT18 启动错误。这是代码：

```
BITS 16
ORG 0x7C00
jmp START

OEM_ID db “PARADIGM"
BytesPerSector dw 0x0200
SectorsPerCluster db 0x08
ReservedSectors dw 0x0021
TotalFATs db 0x02
MaxRootEntries dw 0x0000
TotalSectorsSmall dw 0x0000
MediaDescriptor db 0xF8
SectorsPerTrack dw 0x003F
SectorsPerHead dw 0x0080
HiddenSectors dd 0x0000003F
TotalSectorsBig dd 0x0040994
BigSectorsPerFAT dd 0x00000778
SectorsPerFAT dd 0x0000101F
Flags dw 0x0000
FSVersion dw 0x0000
RootDirectoryStart dd 0x00000002
FSInfoSector dw 0x0001
BackupBootSector dw 0x0006
times 13 db 0x00
DriveNumber db 0x00
db 0x00
Signature db 0x29
VolumeID dd 0x1F040FD5
VolumeLabel db "PARADIGM_BOOT"
SystemID db "FAT32"

START:
cli
mov ax, 0x0000
mov ds, ax
mov es, ax
mov fs, ax
mov gs, ax
mov ax, 0x0000
mov ss, ax
mov sp, 0x0000
sti
mov si, msgLoading
call DisplayMessage
mov cx,  WORD[SectorsPerCluster]
xor ax, ax
mov al, BYTE [TotalFATs]
mul WORD[BigSectorsPerFAT]
add ax, WORD [ReservedSectors]
mov WORD [datasector], ax
xor ax, ax
mov ax, WORD [RootDirectoryStart]
call ClusterLBA
mov bx, 0x0200
call ReadSectors
mov cx, WORD [0x0080]
mov di, 0x0200
.LOOP:
push cx
mov cx, 0x000C
mov si, ImageName
push di
rep cmpsb
pop di
je LOAD_FILE
pop cx
add di, 0x0020
loop .LOOP
jmp FAILURE

LOAD_FILE:
mov si, msgCRLF
call DisplayMessage
mov dx, WORD [di + 0x001A]
mov WORD [cluster], dx
mov ax, 0x0100
mov es, ax
mov bx, 0
xor cx, cx
mov cl, BYTE[SectorsPerCluster]
mov ax, WORD[cluster]
call ClusterLBA
call ReadSectors
jmp DONE

DONE:
mov si, msgCRLF
call DisplayMessage
push WORD 0x0200
push WORD 0x0000
retf

FAILURE:
mov si, msgFailure
call DisplayMessage
mov ah, 0x00
int 0x16
int 0x19

DisplayMessage:
lodsb
or al, al
jz .DONE
mov ah, 0x0E
mov bh, 0x00
mov bl, 0x07
int 0x10
jmp DisplayMessage
.DONE:
ret

ReadSectors:
.MAIN:
mov di, 5
.SECTORLOOP:
push ax
push bx
push cx
call LBACHS
mov ah, 0x02
mov al, 0x01
mov ch, BYTE [absoluteTrack]
mov cl, BYTE [absoluteSector]
mov dh, BYTE [absoluteHead]
mov dl, BYTE [DriveNumber]
int 0x13
jnc .SUCCESS
xor ax, ax
int 0x13
dec di
pop cx
pop bx
pop ax
jnz .SECTORLOOP
int 0x18
.SUCCESS:
mov si, msgProgress
call DisplayMessage
pop cx
pop bx
pop ax
add bx, WORD [BytesPerSector]
inc ax
loop .MAIN
ret

ClusterLBA:
sub ax, 0x0002
xor cx, cx
mov cl, BYTE [SectorsPerCluster]
mul cx
add ax, WORD [datasector]
ret

LBACHS:
xor dx, dx
div WORD [SectorsPerTrack]
inc dl
mov BYTE [absoluteSector], dl
xor dx, dx
div WORD [SectorsPerHead]
mov BYTE [absoluteHead], dl
mov BYTE [absoluteTrack], al
ret

absoluteSector db 0x00
absoluteHead db 0x00
absoluteTrack db 0x00

datasector dw 0x0000
cluster dw 0x0000
ImageName dw "BOOTLOAD.BIN"
msgLoading db 0x0D, 0x0A, "Loading Boot Image", 0x0D, 0x0A, 0x00
msgCRLF db 0x0D, 0x0A, 0x00
msgProgress db ".", 0x00
msgFailure db 0x0D, 0x0A, "ERROR: Press Any Key to Reboot", 0x00

times 510-($-$$) db 0
dw 0xAA55´ 
```

我正在使用 iso 规范。似乎它没有正确读取扇区。我从[Amila Surendra那里得到了代码](http://www.amilasurendra.info/operating-system-tutorial-part2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:09:05.237

“Int 0x18”通常在 BIOS 找不到任何可引导的内容时使用。曾几何时它在 ROM 中启动 BASIC 解释器，但现在它只显示一条消息。

BIOS 检查设备的第一个扇区是否可以读取，以及它是否在扇区偏移量 0x01FE 处包含魔术签名 0xAA55。没有其他要求 - 扇区的其余部分可能充满随机字节，导致计算机崩溃，BIOS 不会关心并执行它（并且不会显示“Int 0x18”消息）。

您的代码确实包含偏移 0x01FE 处的魔术签名；因此问题不在于您的代码。问题可能在于您如何将引导扇区安装到磁盘映像中或如何配置模拟器。

检查事项：

1）模拟器被告知在哪里可以找到磁盘映像（例如，并没有尝试引导完全不同的东西，或者没有被告知从不存在的磁盘引导）

2）模拟器被告知从您将磁盘映像设置为的任何磁盘驱动器引导（例如，当引导扇区在硬盘或其他东西上时，您不尝试从软盘引导）

3) 磁盘映像是模拟器所期望的格式。大多数模拟器支持几种不同的磁盘映像格式（VDI、VHD 等）。如果磁盘映像是一种格式（例如，仅包含原始扇区数据的固定大小的映像），但仿真器认为它是另一种格式（例如 VDI），则可能会导致问题。

4）引导扇区正确安装在磁盘映像中（可以考虑使用“hexdump”之类的工具检查磁盘映像的第一个扇区）。这可能包括将您的代码安装为分区的第一个扇区，其中磁盘的第一个扇区中没有任何内容（请参阅下面的分区信息）。

未来笔记：

您的 BPB（“BIOS 参数块”）看起来像是用于硬盘（而不是软盘）。硬盘有不同的大小（通常你不能硬编码“sectorsPerCylinder”之类的东西），这意味着通常你需要编写一个特殊的实用程序来检测正确的值，调整 BPB 中的值，然后安装修改后的引导部门。

In addition, hard disks are normally partitioned. The BIOS (which doesn't know anything about partitions) loads and starts the first sector on the disk, and the first sector (typically called an MBR or Master Boot Record) contains code that checks the partition table for an "active" partition and loads the first sector of that partition (your boot sector). Also note that a partition may be split into more partitions; which means that all boot sectors for hard drives should have a partition table at offset 0x01BE (not just the MBR). Of course because the BIOS doesn't know about partitions it is technically possible to have an unpartitioned hard disk.

# sql - Insert only Month and Year date to SQL table

> ID：12754920
> 
> 赞同：1
> 
> 时间：2012-10-05T22:36:38.490
> 
> 标签：sql, sql-server, sql-server-2008

I am using MS SQLServer and trying to insert a month/year combination to a table like this:

```
INSERT INTO MyTable VALUES (1111, 'item_name', '9/1998') 
```

apparently, the above command cannot work since

```
Conversion failed when converting date and/or time from character string. 
```

Because `9/1998` is a bad format. I want to fix this and this column of the table will show something like:

```
9/1998
12/1998
(other records with month/year format) 
... 
```

Can someone help me with this?

thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:48:11.680

SQL Server only supports full dates (day, month, and year) or datetimes, as you can see over on the MSDN data type list: [http://msdn.microsoft.com/en-us/library/ff848733(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ff848733(v=sql.105).aspx)

You can use a date value with a bogus day or store the value as a string, but there's no native type that just stores month/year pairs.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-13T08:16:39.543

I see this is an old post but my recent tests confirm that storing Date or splitting the year and month to two columns (year *smallint*, month *tinyint*) results in the overall same size. The difference will be visible when you actually need to parse the date to the filter you need (year/month).

Let me know what do you think of this solution! :)

Kind regards

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:44:57.590

You can just use "01" for the day:

```
INSERT INTO MyTable VALUES (1111, 'item_name', '19980901') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T22:48:29.590

You can:

1) Change the column type to varchar

2) Take the supplied value and convert it to a proper format that sql server will accept before inserting, and format it back to 'M/YYYY' format when you pull the data: `SELECT MONTH([myDate]) + '/' + YEAR([myDate]) ...`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T22:57:47.247

You may want to consider what use you will have for your data. At the moment, you're only concerned with capturing and displaying the data. However, going forward, you may need to perform date calculations on it (ie, compare the difference between two records). Because of this and also since you're about two-thirds of the way there, you might as well convert this field to a Date type. Your presentation layer can then be delegated with the task of displaying it appropriately as "MM/yyyy", a function which is available to just about any programming language or reporting platform you may be using.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T22:59:59.477

if you want use date type, you should format value:

```
declare @a date
SELECT @a='2000-01-01'
select RIGHT( convert (varchar , @a, 103), 7) AS 'mm/yyyy' 
```

if you want make query like SELECT * FROM... you should use varchar instead date type.

# orientation - Xcode 4.5 SplitView 使用 iOS 5.1 破坏了方向（在 iOS6 上工作的想法）

> ID：12754922
> 
> 赞同：1
> 
> 时间：2012-10-05T22:36:52.603
> 
> 标签：orientation, ipad, ios5.1, xcode4.5

当 Xcode 更新到 v4.5 时，我正在开发一个 splitView 项目。从那时起，自转就完美无缺。更新后，自动旋转仅适用于 iOS 6。在 iOS 5.1 上，我是纵向堆栈。我已经阅读了所有可能的解决方案，但似乎没有什么能够解决我的问题。以下是我到目前为止所做的：

检查所有方向都在我的 plist 中。替换`(BOOL)shouldAutorotateToInterfaceOrientation:` 为

```
- (BOOL)shouldAutorotate
{
    return TRUE;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
} 
```

我在应用程序委托中添加了以下代码段

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
    {
        return (UIInterfaceOrientationMaskAll);
    } 
```

我在另一个答案中显示了下面的代码片段我如何不确定如何在 splitView 控制器中实现它

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   ...
   window.rootViewController = topLevelViewController;
   ...
} 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:46:17.020

您需要保留 iOS 5 中的方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
} 
```

继续支持 iOS 5。因此，为 iOS 6 保留新的，为 iOS 5 保留旧的。请注意，要在 iOS 5 中旋转 UISplitView，**所有**封闭的视图控制器都必须具有上述方法。

# php - xgettext 不会扫描复数形式

> ID：12754927
> 
> 赞同：4
> 
> 时间：2012-10-05T22:37:29.360
> 
> 标签：php, internationalization, gettext, xgettext, plural

我将 Poedit 用于我的 gettext i18n，效果很好。我使用 ZF2 有视图助手来集成翻译。一个是`translate`，另一个`translatePlural`。

用法：

```
<?php echo $this->translate('Welcome') ?>
<?php echo $this->translatePlural('Item', 'Items', $number) ?> 
```

在 Poedit 我添加关键字`translate`和`translatePlural`. 正常的翻译工作正常，但对于复数形式，只找到“项目”（而不是“项目”）。仅出于测试目的，我将`$this->translatePlural()`调用替换为`ngettext()`，但最终得到相同的结果。我的结论：（我的版本）Poedit 无法扫描复数形式。

我应该输入什么作为关键字让 Poedit 也扫描第二个字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T09:55:58.167

经过进一步搜索，我偶然发现了语法`[function]:1,2`。这对我有用。我现在将这两个函数确定为 Poedit 的关键字，如下所示：

```
translate
translatePlural:1,2 
```

现在我的第二个参数被扫描了。

# c++ - 动态规划（活动组织）

> ID：12754930
> 
> 赞同：0
> 
> 时间：2012-10-05T22:37:47.007
> 
> 标签：c++, dynamic-programming

任务是通过选择输入的订单来计算 48 小时时间段内可能的最大成本。以不重叠的方式选择订单。

例如，如果输入如下

4

1 2 100

2 3 200

3 4 1600

1 3 2100

然后通过选择 last 2 events 输出将是 3700。

请注意，在重叠事件的情况下，仅应选择会产生最大成本的事件。

输入

输入的第一行包含一个整数 T，即测试用例的数量。T 测试用例如下。测试用例的第一行包含一个整数 N，即接收到的用于执行事件的订单数。接下来的 N 行中的每一行都包含三个空格分隔的整数 Si、Ei、Ci，它们是问题陈述中描述的第 i 个事件的参数。约束

1≤T≤10

1≤N≤2000

0 ≤ Si < Ei ≤ 48

0 ≤ Ci ≤ 10^6

输出

每个测试用例的输出应在单独的行中包含一个整数，这是可能的最大成本。

这是一个标准的DP问题这是我的代码。我已经测试了我能想到的所有可能的测试用例，但是当我将此代码提交给在线法官时，我得到了错误的答案。请帮忙。

```
#include<iostream>
#include<stdio.h>
using namespace std;
unsigned long long A[50][50];
int main()
{
int t,m,S,E,C,i,j;
unsigned long long cost;

 scanf("%d",&t);
while(t--)
{

    int n=-1;

    scanf("%d",&m);

    for(i=0;i<50;++i)
    for(j=i;j<50;++j)
    A[i][j]=0;

    while(m--)
    {

        scanf("%d%d%d",&S,&E,&C);
        A[S][E]=C;
        if(E>n)
        n=E;
    }

    for(int l=2;l<=(n+1);++l)
    {
        for(i=0;i<=(n-l+1);++i)
        {
            j=i+l-1;

            for(int k=i;k<=j;++k)
            {
                cost=A[i][k]+A[k][j];
                if(cost>A[i][j])
                {
                    A[i][j]=cost;

                }
            }
        }
    }
   cout<<A[0][n]<<endl;

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:37:57.273

您没有考虑以下事项： **请注意，在重叠事件的情况下，仅应选择会产生最大成本的事件**

您使用的逻辑是正确的。

```
#include<iostream>
#include<stdio.h>
#include<string.h>
using namespace std;
unsigned long long A[50][50];
int main()
{
int t,m,S,E,C,i,j;
unsigned long long cost;

 scanf("%d",&t);
while(t--)
{

    int n=-1;

    scanf("%d",&m);

    /*for(i=0;i<50;++i)
    for(j=i;j<50;++j)
    A[i][j]=0;
    */
    memset(A,0,sizeof(A));

    while(m--)
    {

        scanf("%d%d%d",&S,&E,&C);
        A[S][E]= (C>A[S][E])?C:A[S][E];
        if(E>n)
        n=E;
    }

    for(int l=2;l<=(n+1);++l)
    {
        for(i=0;i<=(n-l+1);++i)
        {
            j=i+l-1;

            for(int k=i;k<=j;++k)
            {
                cost=A[i][k]+A[k][j];
                if(cost>A[i][j])
                {
                    A[i][j]=cost;

                }
            }
        }
    }
   cout<<A[0][n]<<endl;

}

} 
```

# excel - 宏更改单元格时 Excel Worksheet_Change 不起作用

> ID：12754931
> 
> 赞同：0
> 
> 时间：2012-10-05T22:37:47.637
> 
> 标签：excel, vba, ms-office

我正在尝试完成我的一个项目，我现在有一个表单控件，当按下它时会增加一个数字的值，另一个按钮会减去该值。

另一个值具有用于同一事物的两个不同按钮，但该值也取决于第一个值和其他事物，而不仅仅是按钮修改该值。我尝试实现此代码进行验证

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Not Intersect(Target, Target.Worksheet.Range("F19")) Is Nothing Then
 If Range("E19") = 2 And Range("F19") < 12 Then
  Range("E20") = 1
 End If
End If
End Sub 
```

但是 Excel 显然无法识别单元格 F19 在由按钮引起的更改时发生了更改，只有当它是由用户输入引起时。所以，这就是说，如果 F19 更新并且 19 为 2 且 F19 小于 12（E12 为 2 的先决条件是 F19 为 12 或更大）然后将 E20 设置为 1（E20 是 E19 的修饰符，它也有其他修饰符进入它）。此方法适用于不受按钮控制的其他值，但是当表单控件按钮更改值（或至少在按下表单控件时进行监视）时，我怎样才能让 excel 实现。）

编辑：如果单元格按公式更改，宏实际上也不起作用。我认为我不能使用 Worksheet_Calculate 来监控特定单元格中的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:09:20.683

无论如何，您为什么要使用代码执行此操作？您可以让单元格 E20 具有如下公式：`=IF(AND(E19=2,F19<12),1,"")`除非满足条件，否则将使单元格变为空白。

如果你真的想用代码来做，你应该考虑到这一点：[Worksheet_Change 事件](http://msdn.microsoft.com/en-us/library/office/ff839775.aspx)“当工作表上的单元格被用户或外部链接更改时发生。”

我会推荐而不是

```
If Range("E19") = 2 And Range("F19") < 12 Then
    Range("E20") = 1
End If 
```

在您的 Worksheet_Change 事件中，您将其添加为一个单独的子，您从 Worksheet_Change 调用。在您执行了按钮执行的任何操作之后，您还可以从按钮的代码中调用 sub。这样，您就可以保证检查运行并且不要尝试依赖事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:59:24.880

丹尼尔部分正确，`Worksheet_Change`“当工作表上的单元格被用户或外部链接更改时发生。” 但这*包括*由 VBA 引起的更改，并且*不包括*由公式引起的更改。

您的范围的唯一部分限定可能会导致（或至少加剧）您的问题：

`Range("E19")`*将在活动工作表上*引用“E19” ，这可能是也可能不是工作表`Target`所在的位置。你做对了`Target.Worksheet.Range("F19")`

尝试（注意`.`'s）

```
With Target.Worksheet
    If Not Intersect(Target, .Range("F19")) Is Nothing Then
        If .Range("E19") = 2 And .Range("F19") < 12 Then
            .Range("E20") = 1
        End If
    End If
End With 
```

顺便提一句。我同意丹尼尔的观点，你的整个解决方案似乎有点不对劲，但我们可能无法了解全貌......

# grails - 域对象上的 Class.forName newInstance 不是来自 grails 外部的 GroovyObject

> ID：12754932
> 
> 赞同：0
> 
> 时间：2012-10-05T22:37:58.983
> 
> 标签：grails, reflection, groovy, domain-object

我有一个已编译的 grails 项目，并且从一个单独的 groovy 项目中，我反射性地加载了一个域类，如下所示

```
Class clazz = Class.forName('mypack.myclass', true, Thread.currentThread().contextClassLoader)
def newDomainObject = clazz.newInstance() 
```

当从 grails 外部运行时（在我单独的 groovy 项目中），该对象不会被识别为 GroovyObject。

```
println newDomainObject instanceof GroovyObject // false 
```

因为我是从 grails 外部运行的，所以我认为 groovy 会像对待任何其他类一样对待域类（并且通过查看类文件，它确实实现了 GroovyObject）。

我最好的猜测是它与 grails 如何编译域对象有关，但我不确定这里发生了什么。

请注意，这与[为什么 Class.forName 不能在 grails 域类上工作有关](https://stackoverflow.com/questions/12749963/why-doesnt-class-forname-work-on-grails-domain-classes)，但不一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:11:05.807

这似乎是不可能的——就像 javac 更改未显式扩展基类的类一样`java.lang.Object`，groovyc 更改所有 Groovy 类以实现`groovy.lang.GroovyObject`。

您是在查看从共享 .groovy 类在 Groovy 项目中编译的类，还是在 jar 中编译的类？

`instanceof`由于 Groovy 的评估顺序，这很棘手；尝试添加括号：

```
println (newDomainObject instanceof GroovyObject) 
```

如果仍然打印错误，请尝试递归转储所有已实现的接口：

```
while (clazz != Object) {
   def interfaces = clazz.interfaces
   if (interfaces) {
      clazz.interfaces.each { println "$clazz.name implements $it.name" }
   }
   else {
      println "$clazz.name doesn't directly implement any interfaces"
   }
   clazz = clazz.superclass
} 
```

# mysql - 将带有“Connect By”和“TYPE”的 Oracle 存储过程转换为 MySQL

> ID：12754935
> 
> 赞同：1
> 
> 时间：2012-10-05T22:38:12.273
> 
> 标签：mysql, oracle, cursor

我很难将 oracle SP 转换为 MySQL 中的 SP。特别是对于“连接方式”和“类型”。

这是使用 Oracle 存储过程解决的问题。

有一个有 3 列的表

```
ID  |Last_Modified | Flag   
1   |2011-12-11 02:00:00|   0   
2   |2011-12-13 02:00:00|   0   
3   |2011-12-02 02:00:00|   0 
4   |2011-12-12 02:00:00|   0 
```

存储过程“getback(String pId, String pLast_Modified)。例如 pId =”1,2,3” 和 pLast_Modified = “2011-12-11 02:00:00, 2011-12-13 02:00:00, 2011-12-01 02:00:00”。

逻辑是，对于相同的 ID，如果表中的 last_modified 晚于传递的 last_modified，则将该记录的标志设置为“1”。

这是Oracle存储过程：

```
create or replace procedure test1(
p_ids varchar2,   
p_dates varchar2  
) IS

TYPE id_type IS TABLE OF NUMBER INDEX BY VARCHAR2(64);
TYPE date_type IS TABLE OF DATE INDEX BY VARCHAR2(64);

ids id_type;
last_updated date_type;
lvar1 varchar2(200);
lvar2 varchar2(200);

cursor c1 is 
With ids as (select rownum id, regexp_substr(p_ids,'[^,]+', 1, level) val from dual
connect by regexp_substr(p_ids, '[^,]+', 1, level) is not null), 
lupdated as (select rownum id, regexp_substr(p_dates,'[^,]+', 1, level) val from dual
connect by regexp_substr(p_dates, '[^,]+', 1, level) is not null)
select lut.id, 
case when lut.last_updated > to_date(lu.val,'yyyy-mm-dd hh24:mi:ss') then 1
          else 0
end flag
from last_updated_tbl lut,ids,lupdated lu
where lut.id = ids.val
and   ids.id = lu.id
;

BEGIN
open c1;
loop
 fetch c1 into lvar1,lvar2;
 exit when c1%notfound;

 dbms_output.put_line(lvar1||' flag:'||lvar2);

end loop;

close c1;

END; 
```

# matlab - 在 Matlab 中删除两个特定数据点之间的线

> ID：12754939
> 
> 赞同：4
> 
> 时间：2012-10-05T22:38:50.377
> 
> 标签：matlab, matlab-figure

我将在 Matlab 中绘制图形。该图非常简单，我正在使用绘图功能。假设我要绘制的数据是`(0:1:10)`. 我还在我的图表上放置了标记。然后，我们有一条在坐标`(0,0),(1,1),(2,2),...`等上有标记的线。

现在，我想删除`(2,2)`和`(3,3)`不删除整行之间的行。也就是说，我的目的是在不丢失整条线或任何标记点的情况下摆脱特定线段。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T23:03:36.120

绘制后删除线段很困难。您可以通过以下代码看到该行由一个 MATLAB 对象组成：

```
x = 1:10;
y = 1:10;
H = plot(x, y, '-o');
get(H, 'children') 
```

答案=

空矩阵：0×1

我们可以看到这条线没有孩子，所以没有我们可以删除的“子部分”。但是，我们可以使用一些厚颜无耻的技巧来尝试达到相同的效果。

* * *

**分别绘制两条线**

...使用`hold on`. 见维克多雨果的回答。这是实现我们目标的正确方法。

* * *

**将两条单独的线合二为一**

MATLAB 不会用 NaN 值绘制点。通过修改输入向量，您可以使 MATLAB 跳过一个点以产生折线的效果：

```
x = [0 1 2 2 3 4 5 6 7 8 9];
y = [0 1 2 nan 3 4 5 6 7 8 9];
plot(x, y, '-o'); 
```

这相当于从 [0, 0] 到 [2, 2] 绘制一条线，跳过下一个点，然后从 [3, 3] 重新开始并继续到 [9, 9]。

![在此处输入图像描述](../Images/ee7fea7552a979a7dadeeb6a3e8a3c17.png)

* * *

**'擦除'行的一部分**

这是最讨厌的方法，但如果您不为更改输入数组而烦恼，这是一种廉价的黑客方法。首先绘制线：

```
x = 1:10; y = 1:10;
plot(x, y, '-o'); 
```

![在此处输入图像描述](../Images/0e97768a962203a831cbfbdd249bc485.png)

现在在要擦除的部分上画一条白线：

```
hold on
plot([2 3], [2 3], 'w'); 
```

![在此处输入图像描述](../Images/6165a1a6d9ccf31270d579932bebeb8d.png)

如您所见，结果看起来不太正确，如果您尝试对图表执行其他操作，结果会很糟糕。简而言之，我不会推荐这种方法，但它可能会在绝望的时候派上用场！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:48:37.090

尝试以下操作：

```
y = [0.2751 0.2494 0.1480 0.2419 0.2385 0.1295 0.2346 0.1661 0.1111];
x = 1:numel(y);

plot(x(1:4), y(1:4), '-x')
hold
plot(x(5:end), y(5:end), '-x') 
```

![图表结果](../Images/7584266d3f1e72f912bd8ce50becd2ab.png)

# objective-c - ios6 ipad3 上没有调用 UITextFieldTextDidChangeNotification

> ID：12754948
> 
> 赞同：9
> 
> 时间：2012-10-05T22:39:36.360
> 
> 标签：objective-c, ios6

有以下几点：

```
// watch the fields
[[NSNotificationCenter defaultCenter]  addObserver:self
                                          selector:@selector(handleTextChange:)
                                              name:UITextFieldTextDidChangeNotification
                                            object:textField1]; 
```

进而：

```
-(void) handleTextChange:(NSNotification *)notification {
  ...
} 
```

在 中有一个断点`-handleTextChange:`，但不会被解雇。textField 在 Interface Builder 中连接。

* * *

适用于 iOS6 iPhone/iPad 模拟器，适用于 iOS5.1 iPad2，但不适用于 iOS6 iPad3。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T19:24:42.187

所以我想通了。IOS6 SDK 中的变化是，如果您以编程方式更改文本字段的文本，它不会发送通知。我在所有这些视图上都有一个自定义键盘。当我点击一个键时，它会通过添加我输入的任何内容来更改文本字段的文本值。在 ios 5 中它会发送通知“textdidchange”，但在 ios6 中不会。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T20:20:32.257

[Irena](https://stackoverflow.com/users/899178/irina)是正确的，当以编程方式设置文本字段时，UITextFieldTextDidChangeNotification 不会触发。但是我想澄清一下，它与 iOS6 无关，它与 iOS 6 SDK 有关。如果您使用 iOS 5.1 SDK 进行编译，UITextFieldTextDidChangeNotification 通知将在文本字段发生更改时触发，无论是编程方式还是其他方式，即使在 iOS 6 设备上运行也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T20:22:31.770

我的用例有点特殊，我正在创建 HH:MM:SS 持续时间 UITextField 并使用从后面输入的字符，因此将字符捕获`- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`，然后返回`return (NO);`以禁止 UITextField 的自动更新...在 iOS6 之前，它称为通知，在 iOS6 之后，我`[[NSNotificationCenter defaultCenter] postNotificationName:UITextFieldTextDidChangeNotification object:self.textField];`只是在`return`声明之前调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:20:15.583

在我的 ipad3 和 iOS6.0 通知 UITextFieldTextDidChangeNotification 上工作正常。放

```
[[NSNotificationCenter defaultCenter]  addObserver:self
                                      selector:@selector(handleTextChange:)
                                          name:UITextFieldTextDidChangeNotification
                                        object:textField1]; 
```

在你看来DidLoad

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T01:27:33.637

作为 Apple 修复此问题之前的临时解决方法，您可以使用以下代码示例：

```
//view is a UITextField
NSString *temp = ((UITextField*)view).text;
((UITextField*)view).text = @"";
[((UITextField*)view) insertText:[NSString stringWithFormat:@"%@%@", @"-", temp]]; 
```

该代码将继续触发该事件。

这也有效：

```
[((UITextField*)view) sendActionsForControlEvents:UIControlEventEditingChanged]; 
```

# c++ - 映射迭代器遍历技术

> ID：12754949
> 
> 赞同：1
> 
> 时间：2012-10-05T22:39:37.500
> 
> 标签：c++, map, iterator

我在声明迭代器以遍历地图并查找值时遇到问题。我收到“'fibiter'之前的预期初始化程序”错误。

```
map <int, int> fibHash;

int memoized_fib(int n)
{
    map <int, int> iterator fibiter = fibHash.find(n); //ERROR HERE

    if(fibiter != fibHash.end())
        return  *fibiter;

    int fib_val;
    if(n  <= 1)
        fib_val = 1;
    else
        fib_val = memoized_fib(n - 1) + memoized_fib(n - 2);

    fibHash[n] = fib_val;
    return fib_val;
}

int main()
[..] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:41:59.667

您忘记使用范围解析运算符`::`. 编译器认为您声明了一个`map<int, int>`named `iterator`，因此当它找到 时会感到非常困惑`fibiter`。

```
map<int, int>::iterator fibiter 
```

是你想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:41:38.887

`map <int, int> iterator`→`map <int, int>::iterator`

iterator 是在“map”类中定义的 typedef。`<bits/stl_map.h>`您可以在第 139 行中查看GCC 4.6.3 附带的标准库的实现，您有：

```
typedef typename _Rep_type::iterator               iterator; 
```

由于 typedef 属于类的定义，你应该添加“：”以便编译器知道在哪里找到它。

# mysql - 未显示过程的mysql out参数

> ID：12754950
> 
> 赞同：1
> 
> 时间：2012-10-05T22:39:42.367
> 
> 标签：mysql, parameters, out

我创建了一个过程，其中有 2 个输入参数和 1 个输出参数。但是，我不知道为什么我的输出不想出来。我不想使用 select 语句。我想使用 out 参数。谢谢。

```
create procedure quiz_totals(in q1 double unsigned, in q2 double unsigned, out p_total int)
begin
declare v_ceil_q1 int;
declare v_ceil_q2 int;
declare v_max int;
declare v_min int;

set v_ceil_q1 := ceiling(q1);
set v_ceil_q2 := ceiling(q2);

create table temp_tbl(t_scores int); 
insert into temp_tbl(t_scores) values(v_ceil_q1), (v_ceil_q2));

select max(t_scores) into v_max from temp_tbl;
select min(t_scores) into v_min from temp_tbl;

set p_total := (v_ceil_q1) + (v_ceil_q2) +  v_max - 2*v_min;

drop table temp_tbl;
end;
#
delimiter ;
call quiz_totals(23, 32.4, @total); 
```

这是我的输出：

```
Query OK, 0 rows affected (0.02 sec) 
```

没有 p_total ！为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:43:19.687

你需要一个选择，即使你不想......

```
SELECT @total; 
```

如果你想看看里面有什么！

# linux - 从文本文件中的一行代码中搜索和打印特定的单词

> ID：12754953
> 
> 赞同：1
> 
> 时间：2012-10-05T22:40:21.307
> 
> 标签：linux, search, printing, grep, command-line-interface

因此，在 linux 的命令行上，我尝试搜索一些 HTML 代码并仅打印代码的动态部分。例如这段代码

```
<p><span class="RightSideLinks">Tel: 090 97543</span></p> 
```

我只想打印 97543 而不是 090。下次我搜索文件时，代码可能已更改为

```
<p><span class="RightSideLinks">Tel: 081 82827</span></p> 
```

我只想要 82827。其余的代码保持不变，只是电话号码发生了变化。

我可以使用 grep 来执行此操作吗？谢谢

编辑：

是否也可以在此代码上使用它？

```
<tr class="patFuncEntry"><td align="left" class="patFuncMark"><input type="checkbox" name="renew0" id="renew0" value="i1061700" /></td><td align="left" class="patFuncTitle"><label for="renew0"><a href="/record=p1234567~S0"> I just want to print this part. </a></label> 
```

改变的是记录号：`p1234567~S0"`以及我要打印的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:47:38.833

一种使用方式`GNU grep`：

```
grep -oP '(?<=Tel: .{3} )[^<]+' file.txt 
```

的示例内容`file.txt`：

```
<p><span class="RightSideLinks">Tel: 090 97543</span></p>
<p><span class="RightSideLinks">Tel: 081 82827</span></p> 
```

结果：

```
97543
82827 
```

编辑：

```
(?<=Tel: .{3} ) ## This is a positive lookbehind assertion, which to be
                ## interpreted must be used with grep's Perl regexp flag, '-P'.

Tel: .{3}       ## So this is what we're actually checking for; the phrase 'Tel: '
                ## followed by any character exactly three times followed by a 
                ## space. Since we're searching only for numbers you could write
                ## 'Tel: [0-9]{3} ' instead.

[^<]+           ## Grep's '-o' flag enables us to return exactly what we want, 
                ## rather than the whole line. Therefore this expression will
                ## return any character except '<' any number of times.

Putting it all together, we're asking grep to return any character except '<' 
any number of times if we can find 'Tel: .{3} ' immediately ahead of it. HTH. 
```

# c++ - 可能丢失在 pthread_create 的丢失记录中

> ID：12754954
> 
> 赞同：1
> 
> 时间：2012-10-05T22:40:58.123
> 
> 标签：c++, memory, pthreads

我的程序因检测到堆栈粉碎而失败，而我从 Valgring 收到的唯一消息是“块可能在丢失记录中丢失”重复了三遍，我不知道如何解决。

```
==3726== 144 bytes in 1 blocks are possibly lost in loss record 74 of 87
==3726==    at 0x4025315: calloc (vg_replace_malloc.c:467)
==3726==    by 0x4010CD7: allocate_dtv (dl-tls.c:300)
==3726==    by 0x401146B: _dl_allocate_tls (dl-tls.c:464)
==3726==    by 0x40405C6: pthread_create@@GLIBC_2.1 (allocatestack.c:570)
==3726==    by 0x806BF36: Thread::Thread(void* (*)(void*), void*) (os.cpp:203) 
```

这是代码，Valgrind 是 pthread_create 调用。

```
Thread::Thread( PFUNC func, void * arg )
{
    int s = pthread_create( &_ThreadId, NULL, func, arg);  //here is msg from valgrind

    if (s != 0)
            throw EXCEPT_NOTHREAD;

    pthread_detach( _ThreadId ); 

} 
```

请您帮我看看 Thread 函数有什么问题？我在其他类似的问题中读到 pthread_detach 必须在创建线程之前？提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T23:52:35.177

> 请您帮我看看 Thread 函数有什么问题？

没有什么“错”的。它只是在程序结束之前没有释放线程的资源，而 Valgrind 将其报告为内存泄漏。由于您已分离线程，因此在线程终止之前不会释放其资源。如果它没有在程序执行之前终止，那么它们可能会被报告为泄漏。

> 我在其他类似的问题中读到 pthread_detach 必须在创建线程之前？

你不需要使用`pthread_detach`; 这用于使线程负责释放自己的资源。如果您不使用它，则需要`pthread_join`在停止线程时调用另一个线程。

如果您想清理泄漏，那么您不必分离线程，而是必须保持线程句柄（我猜您已经在这样做，假设`_ThreadId`是一个成员变量）。然后，在程序结束之前，告诉线程停止，然后调用`pthread_join`等待它并释放它的所有资源。是否值得这样做以消除（可能无害的）警告的麻烦取决于您，但干净的关闭可能有助于避免更严重的潜在问题。

顺便说一句，您不应该使用`_ThreadId`以 a`_`开头后跟大写字母的名称；像这样的名字是保留的。

# asp.net-mvc - 来自 System.Web.Optimization 的 Microsoft.Ajax.Utilities.JScriptException

> ID：12754970
> 
> 赞同：1
> 
> 时间：2012-10-05T22:42:23.660
> 
> 标签：asp.net-mvc, minify, asp.net-optimization, webgrease

我们在部署来自 NUGET 的最新 System.Web.Optimization 1.0 库时遇到问题。在我们在 Azure 上的生产实例中，日志充满了 Microsoft.Ajax.Utilities.JScriptException 错误，CPU 达到 100% 并且一切都停止了。内存转储显示以下错误（其中 211 个）。任何帮助将不胜感激！

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        try
        {
            BundleConfig.RegisterBundles(BundleTable.Bundles);  // to enable bundling & minification, set debug to false in web config
        }
        catch (Exception ex)
        {
            ErrorSignal.FromCurrentContext().Raise(ex);
        }

        SetupIgnoredProfilerItems();
    } 
```

错误：

* * *

```
00000000`0655a6b8 000007fe`fcf410dc ntdll!ZwWaitForSingleObject+0xa [x:\win7.obj.amd64fre\minkernel\ntdll\daytona\objfre\amd64\usrstubs.asm @ 180]
00000000`0655a6c0 000007fe`f7b64a6f KERNELBASE!WaitForSingleObjectEx+0x79 [d:\win7sp1_gdr\minkernel\kernelbase\synch.c @ 1301]
00000000`0655a760 000007fe`f7b64a1c clr!CLREventWaitHelper2+0x48 [f:\dd\ndp\clr\src\vm\synch.cpp @ 735]
00000000`0655a7a0 000007fe`f7b648d7 clr!CLREventWaitHelper+0x20 [f:\dd\ndp\clr\src\vm\synch.cpp @ 761]
00000000`0655a800 000007fe`f7d54258 clr!CLREvent::WaitEx+0x5e [f:\dd\ndp\clr\src\vm\synch.cpp @ 864]
00000000`0655a8a0 000007fe`f7d5413f clr!SVR::gc_heap::wait_for_gc_done+0x98 [f:\dd\ndp\clr\src\vm\gc.cpp @ 8028]
00000000`0655a8d0 000007fe`f7f22510 clr!SVR::GCHeap::GarbageCollectGeneration+0xff [f:\dd\ndp\clr\src\vm\gc.cpp @ 26464]
00000000`0655a920 000007fe`f7cae060 clr!SVR::gc_heap::try_allocate_more_space+0x274480 [f:\dd\ndp\clr\src\vm\gc.cpp @ 10232]
00000000`0655a980 000007fe`f7cae1d5 clr!SVR::gc_heap::allocate_more_space+0x40 [f:\dd\ndp\clr\src\vm\gc.cpp @ 10388]
00000000`0655a9b0 000007fe`f7b62f25 clr!SVR::gc_heap::allocate_large_object+0x65 [f:\dd\ndp\clr\src\vm\gc.cpp @ 22530]
00000000`0655aa10 000007fe`f6c5f52d clr!FramedAllocateString+0xae5 [f:\dd\ndp\clr\src\vm\jithelpers.cpp @ 3018]
00000000`0655ae50 000007ff`00645327 mscorlib_ni!System.String.InternalSubString(Int32, Int32, Boolean)+0x2d [f:\dd\ndp\clr\src\BCL\System\String.cs @ 1181]
00000000`0655aeb0 000007ff`00645092 WebGrease!Microsoft.Ajax.Utilities.JScriptException.get_LineText()+0xb7
00000000`0655aef0 000007ff`00644f57 WebGrease!Microsoft.Ajax.Utilities.JSParser.OnCompilerError(Microsoft.Ajax.Utilities.JScriptException)+0xd2
00000000`0655afe0 000007ff`006449c3 WebGrease!Microsoft.Ajax.Utilities.DocumentContext.HandleError(Microsoft.Ajax.Utilities.JScriptException)+0x17
00000000`0655b020 000007ff`006445e4 WebGrease!Microsoft.Ajax.Utilities.Context.HandleError(Microsoft.Ajax.Utilities.JSError, System.String, Boolean)+0x103
00000000`0655b080 000007ff`006460b5 WebGrease!Microsoft.Ajax.Utilities.JSParser.ReportError(Microsoft.Ajax.Utilities.JSError, Microsoft.Ajax.Utilities.Context, Boolean)+0x94
00000000`0655b0e0 000007ff`004e84dc WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseForStatement()+0x5b5
00000000`0655b200 000007ff`004ec324 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseStatement(Boolean)+0x1cc
00000000`0655b2c0 000007ff`004eb502 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseFunction(Microsoft.Ajax.Utilities.FunctionType, Microsoft.Ajax.Utilities.Context)+0x784
00000000`0655b3b0 000007ff`004ea087 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseLeftHandSideExpression(Boolean)+0x1262
00000000`0655b4c0 000007ff`00648391 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseUnaryExpression(Boolean ByRef, Boolean)+0x777
00000000`0655b560 000007ff`004eb38e WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseExpression(Boolean)+0x21
00000000`0655b5c0 000007ff`004ea087 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseLeftHandSideExpression(Boolean)+0x10ee
00000000`0655b6d0 000007ff`00640c85 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseUnaryExpression(Boolean ByRef, Boolean)+0x777
00000000`0655b770 000007ff`004ee184 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseExpressionList(Microsoft.Ajax.Utilities.JSToken)+0x185
00000000`0655b830 000007ff`004eb616 WebGrease!Microsoft.Ajax.Utilities.JSParser.MemberExpression(Microsoft.Ajax.Utilities.AstNode, System.Collections.Generic.List`1<Microsoft.Ajax.Utilities.Context>)+0xe4
00000000`0655b8f0 000007ff`004ea087 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseLeftHandSideExpression(Boolean)+0x1376
00000000`0655ba00 000007ff`004e8889 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseUnaryExpression(Boolean ByRef, Boolean)+0x777
00000000`0655baa0 000007ff`004ec324 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseStatement(Boolean)+0x579
00000000`0655bb60 000007ff`004eb502 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseFunction(Microsoft.Ajax.Utilities.FunctionType, Microsoft.Ajax.Utilities.Context)+0x784
00000000`0655bc50 000007ff`004ea087 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseLeftHandSideExpression(Boolean)+0x1262
00000000`0655bd60 000007ff`004ef226 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseUnaryExpression(Boolean ByRef, Boolean)+0x777
00000000`0655be00 000007ff`004ef242 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseExpression(Microsoft.Ajax.Utilities.AstNode, Boolean, Boolean, Microsoft.Ajax.Utilities.JSToken)+0x3b6
00000000`0655beb0 000007ff`004ef242 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseExpression(Microsoft.Ajax.Utilities.AstNode, Boolean, Boolean, Microsoft.Ajax.Utilities.JSToken)+0x3d2
00000000`0655bf60 000007ff`004ef242 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseExpression(Microsoft.Ajax.Utilities.AstNode, Boolean, Boolean, Microsoft.Ajax.Utilities.JSToken)+0x3d2
00000000`0655c010 000007ff`004e8b04 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseExpression(Microsoft.Ajax.Utilities.AstNode, Boolean, Boolean, Microsoft.Ajax.Utilities.JSToken)+0x3d2
00000000`0655c0c0 000007ff`004e55a9 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseStatement(Boolean)+0x7f4
00000000`0655c180 000007ff`004e3c76 WebGrease!Microsoft.Ajax.Utilities.JSParser.ParseStatements()+0x189
00000000`0655c2c0 000007ff`004e2685 WebGrease!Microsoft.Ajax.Utilities.JSParser.Parse(Microsoft.Ajax.Utilities.CodeSettings)+0x86
00000000`0655c310 000007ff`004e24a2 WebGrease!Microsoft.Ajax.Utilities.Minifier.MinifyJavaScript(System.String, Microsoft.Ajax.Utilities.CodeSettings)+0xe5
00000000`0655c3f0 000007ff`004d2096 System_Web_Optimization!System.Web.Optimization.JsMinify.Process(System.Web.Optimization.BundleContext, System.Web.Optimization.BundleResponse)+0x72
00000000`0655c440 000007ff`004e1b12 System_Web_Optimization!System.Web.Optimization.Bundle.ApplyTransforms(System.Web.Optimization.BundleContext, System.String, System.Collections.Generic.IEnumerable`1<System.IO.FileInfo>)+0xc6
00000000`0655c4c0 000007ff`004cf793 System_Web_Optimization!System.Web.Optimization.Bundle.GetBundleUrl(System.Web.Optimization.BundleContext, Boolean)+0x42
00000000`0655c510 000007ff`004cf1e8 System_Web_Optimization!System.Web.Optimization.AssetManager.EliminateDuplicatesAndResolveUrls(System.Collections.Generic.IEnumerable`1<System.String>)+0x263
00000000`0655c610 000007ff`004e1f05 System_Web_Optimization!System.Web.Optimization.AssetManager.DeterminePathsToRender(System.Collections.Generic.IEnumerable`1<System.String>)+0x1d8
00000000`0655c680 000007ff`004cc189 System_Web_Optimization!System.Web.Optimization.AssetManager.RenderScripts(System.Collections.Generic.IEnumerable`1<System.String>)+0x35
00000000`0655c730 000007ff`004c4778 App_Web_keqcxegb!ASP._Page_Views_Shared__Layout_cshtml.Execute()+0x1f29 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:36:52.313

您可以通过检查 fiddler（或任何其他工具）中该 JS 捆绑包的响应来查看捆绑 JS 的确切解析错误。解析错误将在顶部的 JS 注释代码中。通过修复 JS，您将摆脱服务器上的异常。

很高兴知道错误是否来自 jquery 本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T20:17:55.703

WebGrease 1.3 版解决了这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:51:57.310

由于无法解析 JS 包，看起来 WebGrease 正在抛出异常。您是否可以提供一个指向您的 JS 包内容的指针，以便 WebGrease 团队可以调查并希望找出导致潜在问题的原因？

# python - 如何将 3D vtkDataSet 转换为 numpy 数组？

> ID：12754971
> 
> 赞同：3
> 
> 时间：2012-10-05T22:42:30.680
> 
> 标签：python, numpy, vtk

我正在尝试读取一系列 DICOM 文件并将其渲染为 3D 模型。我已经做到了这一点。但是，我也希望能够在渲染之前删除某些切片。这就是我迷路的地方。我无法找到一种方法来访问每个加载的文件并删除我想要的文件。我读过我可以将数据集转换为 numpy 数组。但是，我不确定如何做到这一点。

```
 reader = vtkDICOMImageReader()
    reader.SetDirectoryName('loads a directory of DICOM files')
    reader.Update()

    imageDataGeometryFilter = vtkImageDataGeometryFilter()
    imageDataGeometryFilter.SetInputConnection(reader.GetOutputPort())
    imageDataGeometryFilter.Update()

    mapper = vtkPolyDataMapper()
    mapper.SetInputConnection(imageDataGeometryFilter.GetOutputPort())

    '''Here is where I want to take my vtkDataSet and convert it into a numpy array.
       Once in array form I can remove data that I do not want (ie DICOM slices).
       Then I want to convert it back into a vtkDataSet to continue program.
    '''

    actor = vtkActor()
    actor.SetMapper(mapper)

    ren = vtkRenderer()
    ren.AddActor(actor)
    ren.SetBackground(0.1,0.3,0.1)

    renWin = vtkRenderWindow()
    renWin.AddRenderer(ren)

    interactor = vtkRenderWindowInteractor()
    interactor.SetRenderWindow(renWin)

    renWin.Start()

    interactor.Initialize()
    interactor.Start() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T07:54:33.210

```
 pixelspace = reader.GetPixelSpacing()
    spacing = image.GetSpacing()

    vtk_data = image.GetPointData().GetScalars()

    numpy_data = numpy_support.vtk_to_numpy(vtk_data)

    numpy_data = numpy_data.reshape(dims[0], dims[1], dims[2])
    numpy_data = numpy_data.transpose(2,1,0)

    dims = numpy_data.shape

    dataImporter = vtkImageImport()
    dataImporter.SetDataScalarTypeToFloat() 
    dataImporter.SetNumberOfScalarComponents(1)
    dataImporter.SetDataExtent(0, dims[2]-1, 0, dims[1]-1, 0, dims[0]-1)
    dataImporter.SetWholeExtent(0, dims[2]-1, 0, dims[1]-1, 0, dims[0]-1)
    dataImporter.SetDataSpacing(spacing[0],spacing[1],spacing[2])
    dataImporter.CopyImportVoidPointer(numpy_data, numpy_data.nbytes) 
```

# serial-port - Arduino串行通信没有收到整个消息

> ID：12754972
> 
> 赞同：2
> 
> 时间：2012-10-05T22:42:33.977
> 
> 标签：serial-port, arduino, communication

我的 Arduino 通信有问题。这很难描述，所以我不能把它放在标题里。无论如何，这里有以下内容：

所以我的接收端有这个代码：

```
if(Serial1.available())
{
    while(Serial1.available())
    {
        uint8_t inByte = Serial1.read();

        inByte = inByte ^ k;

        Serial.write(inByte); 
    }

    Serial.println(" done");
} 
```

它应该打印在一行中并在完成后打印完成。`Serial1.available()`似乎跳过了下一个，`Serial1.available()`我不知道发生了什么。无论如何，这是我当前的坏输出：

```
h done
e done
l done
l done
o done

done 
```

什么时候应该：

```
hello done 
```

很抱歉，如果这句话可以更好地表达，但我现在只能打字了，我的大脑有点痛。我从未在 Windows c++ 控制台应用程序中遇到过这种行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T00:13:29.487

如果您在 loop() 中调用该例程，那么是的，它将从串行缓冲区读取并立即返回，因为您可能发送数据的速度不够快。

处理这类事情的一个更好的方法是使用一个控制字符来指示消息的结束，或者如果你有一个你希望接收的特定数据格式，那么在数据格式之前保留已经进入的字符的计数达到极限。

这里有一些您可能会发现有用的讨论：[使用 Arduino 的串行双工](http://itp.nyu.edu/physcomp/Labs/SerialDuplex)还有 Arduino IDE 附带的示例草图：菜单：示例：通信：

[此外，请阅读 Arduino 的序列](http://arduino.cc/en/Reference/Serial)列表下的所有条目。那里有好东西。

因此，您为使用串行输入开发的例程实际上取决于您的项目和您接收的数据类型。在上面的示例中，如果您要使用控制字符，它可能如下所示：

```
 while(Serial1.available()){
   char c = Serial1.read();

   if (c == '*'){
       Serial.println(" done");
   } else {
       Serial.write(c); 
   } 
 } 
```

# ruby-on-rails - 使用模型子文件夹时找不到 Rspec 方法

> ID：12754976
> 
> 赞同：0
> 
> 时间：2012-10-05T22:43:22.117
> 
> 标签：ruby-on-rails, rspec, guard

您好，我收到此错误：

> spec/models/stores/persistent_spec.rb:6:in `block (2 levels) in <top (required)>': undefined method`expect' for # (NoMethodError)

这是我的设置。我在 app/models 中有一个名为Store**的****类**

 **我有一个名为**Stores::Temporary < Store**的类位于**app/models/stores内**

我正在尝试为临时编写测试，但由于上述错误而失败

我在**spec/models/stores中创建了****temporary_spec.rb**，它的代码如下：

 **```
require "spec_helper"

describe Stores::Temporary do

end 
```

我正在尝试编写一个expect to raise_error 语句。

我也试过**5.should == 5**，结果在这个文件中没有检测到可用的测试。我正在使用警卫来自动运行测试，因此正在检测文件中的更改（正常工作）并且重新运行测试但显示为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:56:23.633

因此，在为此苦苦挣扎了 2 小时后，我重新启动了 PC，它在没有改变任何东西的情况下工作……其中一个愚蠢的错误你只需要休眠并重试。****

# clojure - 如何多次将函数应用于序列

> ID：12754981
> 
> 赞同：2
> 
> 时间：2012-10-05T22:44:19.620
> 
> 标签：clojure

我正在使用 Clojure进行一些 Lisp[练习。](http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/L-99_Ninety-Nine_Lisp_Problems.html)我正在尝试在不利用向量和某些 Clojure 函数的情况下进行这些练习。

这个功能

```
(defn rev-seq
    [s1]
    (concat (pop s1) (list (peek s1)))) 
```

将列表的第一个元素放在末尾。我想多次调用这个函数来反转列表（不调用 Clojure 的`reverse`函数）。

我不确定用什么代替它。我已经尝试过映射、应用和重复，但没有成功。我宁愿有一种不同的方式来思考这个问题，而不是一个直接的答案，但我不是要求讨论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T00:45:21.890

首先，如果您想处理一般序列，我认为您需要将 rev-seq 转换为使用`first`/`rest`而不是`peek`/ `pop`- 至少在 Clojure 1.4 中`peek`/`pop`似乎需要 PersistentStack：

```
(defn rev-seq
  [s1]
  (concat (rest s1) (list (first s1)))) 
```

那么您可能应该注意到，重复应用此函数将“循环”列表而不是反转它。如果您使用以下方法查看少量应用程序的结果，您会看到`iterate`：

```
(def s '(1 2 3 4 5 6 7 8 9))

(nth (iterate rev-seq s) 3)
=> (4 5 6 7 8 9 1 2 3) 
```

一个可行的选择是使用递归函数进行反转：

```
(defn reverse-seq [s]
  (concat (reverse (next s)) (list (first s))))

(reverse-seq s)
=> (9 8 7 6 5 4 3 2 1) 
```

或者，您可以使用 clojure.core 中的技术进行反向操作：

```
(defn reverse-seq [s]
  (reduce conj () s))

(reverse-seq s)
=> (9 8 7 6 5 4 3 2 1) 
```

希望这能给你一些想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:59:37.800

递归很强大！我将 [解决方案](http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/p05.lisp)翻译 成 Clojure。

```
(defn- inverte-aux
  [lista resto]
  (if lista
    (recur (next lista) (cons (first lista) resto))
    resto))

(defn inverte
  [lista]
  (inverte-aux lista nil))

user> (inverte [4 3 2 1 3])
(3 1 2 3 4) 
```

# python - Python - 无法调用/跳过方法

> ID：12754989
> 
> 赞同：0
> 
> 时间：2012-10-05T22:45:31.183
> 
> 标签：python, methods, skip

编辑：

我将添加整个代码，类和东西的名称是西班牙语，但我希望你明白：

```
class Rubro():
'''
Representa un rubro de venta. Por ejemplo: pastas y quesos son dos
rubros diferentes.
'''
def __init__(self, id, nombre, descripcion, icono=None):
    self.id = id
    self.nombre = nombre
    self.descripcion = descripcion
    self.icono = icono
    self.col_variedades = {}
    self.objBroker = persistencia.obtener_broker(self, None)

def obtener_todos(self):
    self.objBroker.cargar_todo() 

class Broker():
def cargar_todo(self):
    pass

class sqliteBrokerArticulos(Broker):

def __init__(self):
    self.obj_db = sqliteDB()

def cargar_todo(self):
    return self.ejecutar("SELECT * FROM articulos")

def ejecutar(self, sentenciaSQL):
    conn = self.obj_db.abrir_conexion()
    try:
        conn.execute(sentenciaSQL)
        conn.commit()
    except:
        return False
    self.obj_db.cerrar_conexion() 
```

我真的不知道如何解释它，这是代码：

```
class A():

    def a(self):
        return self.objC.b()

class B():
    def b(self):
       #do something

class C(B):

    def b(self):
       #do something else 
```

问题是它没有进入 b()，它只是跳过它，当它到达那条线时退出 a()

我不知道会是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:58:05.633

你想知道为什么 Bb() 方法永远不会被调用吗？或者为什么永远不会调用 Cb() 方法？

如果是前者，那是因为在 Cb() 中，你没有调用超类方法：

```
>>> class B(object):
...   def b(self):
...     print "in B.b"
...
>>> class C(B):
...   def b(self):
...     print "in C.b"
...
>>> c = C()
>>> c.b()
in C.b
>>> class C(B):
...   def b(self):
...     print "in C.b"
...     super(C, self).b()
...
>>> c = C()
>>> c.b()
in C.b
in B.b
>>> 
```

# java - Servlet Jsp 数组打印链接

> ID：12754995
> 
> 赞同：0
> 
> 时间：2012-10-05T22:46:06.763
> 
> 标签：java, jsp, servlets

我有一个将数组传递给jsp页面的java servlet，在那个jsp页面上它显示了一堆结果。我想要做的是当它打印出来时它会打印一个链接，这样我就可以将它用作参数。就我而言，它会打印出一堆实验室课程，我想要发生的是他们单击与该实验室相关的链接，然后我单击该链接并可以在 sql 语句中使用该 lab.id。

这是正在打印的数组的代码

这是小服务程序

```
private void sendBack(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    HttpSession session = request.getSession(true);

        //Set data you want to send back to the request (will be forwarded to the page)
    //Can set string, int, list, array etc.
    //Set data you want to send back to the request (will be forwarded to the page)
    //Can set string, int, list, array etc.
    String sql = "SELECT s.name, l.time, l.day, l.room" +
              " FROM lab l, subject s, user_lab ul" +
            " WHERE ul.user_id=" + (Integer)session.getAttribute("id") +" AND ul.lab_id ="+ "l.id"+" AND l.subject_id ="+"s.id";

  try{
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
    System.out.println("got boobs");
    System.out.println(session.getAttribute("id"));

      Statement stmt = con.createStatement();
      ResultSet res = stmt.executeQuery(sql);
      System.out.println(res);
      ArrayList<String> list1 = new ArrayList<String>();
      if (res.next()){
          do{
               list1.add(res.getString(1) + " " + res.getString(2) +" "+ res.getString(3) + " " + res.getString(4));
               System.out.print(res.getString(1) +  res.getString(2));
          }while(res.next());
      System.out.println("Outside");
      String[] arr = list1.toArray(new String[list1.size()]);
      request.setAttribute("res", arr);
      }

  }catch (SQLException e) {
    } 
    catch (Exception e) {
    } 

    //Decides what page to send the request data to
    RequestDispatcher view = request.getRequestDispatcher("Lecturer_labs.jsp");
    //Forward to the page and pass the request and response information
    view.forward(request, response); 
```

这是jsp页面

```
<h3>Manage Labs</h3>
<table>
<% String[] list1 = (String[])request.getAttribute("res");
         if(null == list1){%>

<% 
         }else{
        for(int i=0; i<list1.length; i++)
        {   %>
        <tr><%out.println(list1[i] + "<br/>");%></tr>        
    <%  }
        }
        %>
        </table> 
```

那么我怎样才能将结果打印为传递参数的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:57:20.970

要将结果显示为传递参数的链接`id`，每个链接可能如下所示：

```
<a href="/myapp/mypage.jsp?id="<%out.println(list1[i]);%>">Link <%out.println(list1[i]);%></a> 
```

但看看这看起来多么笨重。

**[JSTL 标记](http://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm)**可以消除所有这些 scriptlet 代码：

```
<c:forEach items="${res}" var="id">
   <tr><td><a href="/myapp/mypage.jsp?id=${id}">Link ${id}</a></td></tr>
</c:forEach> 
```

# matlab - 在 Matlab 中合并类型

> ID：12754998
> 
> 赞同：1
> 
> 时间：2012-10-05T22:46:50.690
> 
> 标签：matlab, types, merge

有人可以建议我如何在 Matlab 中合并“single”向量和“int8”向量吗？

详细说明：

泰克 AWG 波形格式：每个波点 = 数据和标记。数据 = 单精度浮点数，标记 = 字节。所以每个点是5个字节。我在 matlab 中有这些向量。每个高达32Mpoints。如何快速合并它们？我现在唯一的：

信号，标记

```
fsingle = fopen('temp.tmp','w');
fwrite(fsingle, signal, 'single');
fclose(fsingle);
f8 = fopen('temp.tmp','r');
b = fread(f8, [4 Inf],'int8');
fclose(f8);
f8 = fopen('output.wfm','w');
fwrite(f8, [b, markers]', 'int8');
fclose(f8); 
```

这行得通。如何在不写入磁盘的情况下执行第 1 到 6 行？似乎matlab中没有指向变量的指针......

将感谢每一个想法，

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:21:29.370

您可能想使用[`typecast`](http://www.mathworks.se/help/matlab/ref/typecast.html)：

> 在不更改基础数据的情况下转换数据类型

基本上这几乎就像一个指针。您可以将单曲数组视为字节。然后你可以将它与其他字节数组连接起来。