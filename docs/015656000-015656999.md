# StackOverflow 问答 15656000-15656999

# android - Android如何在应用程序中共享自定义对象实例

> ID：15656000
> 
> 赞同：1
> 
> 时间：2013-03-27T09:56:59.930
> 
> 标签：android

我创建了一个应用程序，它使用我创建的许多自定义对象来管理应用程序的各个部分。

例如：

*   FacebookManager 类 - 负责连接到 facebook
*   DatabaseManager 类 - 负责应用程序的数据库连接
*   ETC...

所有应用程序的类必须可以访问这些类。

我已经扩展了 Application 类，并且在类之间共享 Application 实例，因此每个类都可以访问全局对象（以及更多方法）。我想知道这是否是做我想做的事情的正确方法，或者我应该为同一个提议创建一个带有静态方法的类。

我已经阅读了很多关于它的内容，并从记忆的角度理解了这一点——这些方式都不是最好的。

有没有办法将对象保存到 SharedPereferences 并从另一个类中获取它？或任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:59:52.020

如果您的类不包含状态而仅包含实用程序方法 - 您可以将它们安排为 Utils 类，不包含构造函数和静态方法。否则，请查看[Singleton 设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)，它用于为类对象创建全局访问点，并确保整个系统中只有该类的一个对象。希望这可以帮助。

# html - 有没有一种方法可以覆盖margin-left，尽管margin：0 auto 使用CSS？

> ID：15656008
> 
> 赞同：1
> 
> 时间：2013-03-27T09:57:21.263
> 
> 标签：html, css

我目前正在使用居中的包装器（以margin 0 auto为中心）。现在我想要一个从左侧开始的容器，直到居中的包装器开始。使用这个给定的保证金规格，这可能吗？

我真的很感激一些提示！

另见小提琴：http: [//jsfiddle.net/TQhEa/1/](http://jsfiddle.net/TQhEa/1/)

我现在拥有的： ![在此处输入图像描述](../Images/2d9f55b1782216e23b6ff0b31204e1a0.png)

我想拥有的：

![在此处输入图像描述](../Images/32bed97a99d1ae34e4d0673a50a9179a.png)

我的代码：

```
<body>
    <div id="page-wrapper">
        <p><---- how can i cover the left side only with red without javascript but keeping the "0 auto margin?"

    </div>
</body> 
```

我的CSS：

```
body, html{
        width:100%;
        height:100%;
        top:0;
        margin:0;
        background-image: url('http://www.art-wallpaper.net/Full-Size-HD-Wallpaper29/images/HD%20Widescreen%20Wallpaper%2059.jpg');
        background-repeat:no-repeat;
       -webkit-background-size: cover;
       -moz-background-size: cover;
       -o-background-size: cover;
       background-size: cover;

}
#page-wrapper{
    background-color:red;
    margin: 0 auto;
    width: 400px;
    top:0;
    margin-top:0;
    height:100%;
}
p {
    padding:0;
    margin:0;
    font-size:30px;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:00:30.797

使用以下 CSS 再添加 1 个 DIV：

```
#left_div {
    position: absolute;
    left: 0;
    top: 0;
    width: 50%;
    height: 100%;
    background-color: #F00;
    display: table; /* note IE5-7 does not support this */
    z-index: 1;
} 
```

并修改当前居中的 DIV`$('#page-wrapper')`以具有更高的`z-index`值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:05:59.880

最简单的方法是设置 的`background-color`和 位置`background-image`。查看[这段代码](http://codepen.io/anon/pen/orHdE)： **html**

```
<div id="page-wrapper">content</div> 
```

**css**

```
body {
  margin: 0;
  background: #c11 url(http://placekitten.com/1000/1000) 100% 0 no-repeat;
}
#page-wrapper {
  width: 400px;
  height: 1000px;
  background: #ccc;
  margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:08:17.833

添加一个带有属性的额外 div`position: absolute;` `width: 50%;` `height: 100%;`和`z-index: -1;`

见：http: [//jsfiddle.net/skeurentjes/TQhEa/3/](http://jsfiddle.net/skeurentjes/TQhEa/3/)

# sitecore - Sitecore Stimulsoft Web 报表设计器开发的报表不呈现

> ID：15656011
> 
> 赞同：0
> 
> 时间：2013-03-27T09:57:45.233
> 
> 标签：sitecore, stimulsoft

我正在使用 stimulsoft Web 报表设计器在 Sitecore 中开发一些报表。因为我需要访问 Sitecore 主数据库中的数据。我为主数据库创建了一个 sql 数据连接，并创建了一个数据源。当我尝试使用参与度分析查看我的空白报告时，它会出现这样的异常

```
Report /sitecore/shell/Applications/Analytics/Reports/Scam/ScamReport.mrt cannot be rendered : System.Exception: c:\Windows\Temp\jp1ck2g2.0.cs(319,64) : error CS1026: ) expectedc:\Windows\Temp\jp1ck2g2.0.cs(319,74) : error CS1002: ; expectedc:\Windows\Temp\jp1ck2g2.0.cs(319,84) : error CS1002: ; expectedc:\Windows\Temp\jp1ck2g2.0.cs(319,84) : error CS1525: Invalid expression term ')'c:\Windows\Temp\jp1ck2g2.0.cs(319,141) : error CS1026: ) expectedc:\Windows\Temp\jp1ck2g2.0.cs(319,150) : error CS1002: ; expectedc:\Windows\Temp\jp1ck2g2.0.cs(319,160) : error CS1002: ; expectedc:\Windows\Temp\jp1ck2g2.0.cs(319,176) : error CS1002: ; expectedc:\Windows\Temp\jp1ck2g2.0.cs(319,176) : error CS1525: Invalid expression term ')'
   at Stimulsoft.Report.StiReport.Compile(String path, Stream stream, StiOutputType outputType, Boolean autoCreate, Object standaloneReportType)
   at Stimulsoft.Report.StiReport.Compile(String path, Stream stream, StiOutputType outputType, Boolean autoCreate)
   at Stimulsoft.Report.StiReport.Compile(String path, StiOutputType outputType, Boolean autoCreate)
   at Sitecore.Analytics.Reports.ReportFactory.CompileReport(StiReport report, String reportId)
   at Sitecore.Analytics.Reports.ReportFactory.FillReport(StiReport report, Database database, ID reportItemId, Nullable`1 startDate, Nullable`1 endDate, String email, IEnumerable`1 filters)
   at Sitecore.Shell.Applications.Analytics.ReportRunner.ReportPage.FillReport(StiReport report, IEnumerable`1 filterSelection)
   at Sitecore.Shell.Applications.Analytics.ReportRunner.ReportPage.OnLoad(EventArgs e) 
```

有人对此有任何想法吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:39:48.607

自从我与 Stimulsoft 网络报告设计器合作以来已经有一段时间了，但我注意到你的例外中的一件事：`"Invalid expression term ')'"`

您的表达似乎不正确，您的“）”太多或位置无效。

# templates - 我应该如何在 Ember 中检查 ArrayController 的内容是否脏

> ID：15656012
> 
> 赞同：3
> 
> 时间：2013-03-27T09:57:45.277
> 
> 标签：templates, ember.js, model, ember-data

在我正在使用的应用程序模板中：

```
 {{#if exampleModel.isDirty }}

  {{else}}

  {{/if}} 
```

...根据视图的模型是否脏来显示不同的 Ui。这很好用。

但是，我有另一个由 ArrayController 子类支持的视图。同样，我想根据 ArrayController 中是否有任何脏项目来更改 UI。我努力了：

```
{{#if controller.isDirty }} 
```

和

```
{{#if controller.content.isDirty }} 
```

但是，尽管两者都不会产生异常，但在任何时候都不会评估为 true，即使 ArrayController 子类中的模型是脏的。

**检查由 ArrayController 装饰的任何模型是否脏的正确方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:00:41.267

我想你可以在你的 ArrayController 上定义一个计算属性：

```
isDirty : function(){
  this.forEach(function(model){
    var dirty = false;
    if(model.get("isDirty"))
      dirty = true;
  });
  return dirty;
}.property("content.@each.isDirty") 
```

所以关键是**属性依赖的正确声明**。

**更新**评论中的有趣问题：**为什么这个功能没有嵌入到 Ember 中？**

关于您对烘焙功能的评论：您正在考虑 Ember 数据。我个人不将它与 ember-data 一起使用。所以在我的情况下，这个功能是无稽之谈。因此，可以讨论将其作为 Mixin 添加到 Ember 中，以便更多地促进集成。

例子：

```
Ember.IsArrayDirtyMixin = Ember.Mixin.create({
    isDirty : function(){
      this.forEach(function(model){
        var dirty = false;
        if(model.get("isDirty"))
          dirty = true;
      });
      return dirty;
    }.property("content.@each.isDirty")
});

App.YourController = Ember.ArrayController.extend(Ember.IsArrayDirtyMixin,{
    .... // your stuff
});

// shorter version proposed by pjlammertyn in the comments
Ember.IsArrayDirtyMixin = Ember.Mixin.create({
    isDirty : function(){
      return !this.every(function (model) { return !model.get('isDirty'); });
    }.property("content.@each.isDirty")
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T10:53:56.490

或者更简单地说，假设你在一个`ArrayController`：

```
 ...
  hasChanged: function() {
    var records = this.get('model');
    return records.isAny('isDirty', true);
  }.property('model.@each.isDirty'),
  isNotDirty: Ember.computed.not('hasChanged'),
  ... 
```

这些模式真的很常见，我很惊讶它们不是内置的。

# sql-server - 如何将我的连接字符串映射到我的 app_data 文件夹而不是使用绝对路径？

> ID：15656013
> 
> 赞同：0
> 
> 时间：2013-03-27T09:57:46.687
> 
> 标签：sql-server, sql-server-2008, connection-string

我有一个连接字符串，其中包含我的数据库的绝对路径。

这是我的连接字符串：

```
// removed 
```

我有两个问题：

1.  如何转换绝对路径以查看我的 app_data 文件夹而不是添加完整的字符串？
2.  这是一件好事/坏事吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:43:21.473

You should be able to use the `|DataDirectory|` substitution string:

```
AttachDbFilename=|DataDirectory|MyDb.mdf 
```

[MSDN Link](http://msdn.microsoft.com/en-us/library/cc716756.aspx#sectionSection2)

# c# - C# 通用约束问题

> ID：15656014
> 
> 赞同：3
> 
> 时间：2013-03-27T09:57:48.603
> 
> 标签：c#, .net

我收到以下错误。

> *类型“Test.ICacheProvider”不能用作泛型类型或方法“StorageManager.Test.IFileInfo”中的类型参数“TStorageProvider”。没有从“StorageManager.Test.ICacheProvider”到“StorageManager.Test.IStorageProvider”的隐式引用转换。*

这个程序设计结构有什么问题吗？

**程序 ：**

```
// Cache Provider Classes

public interface ICacheProvider { }

public class BaseCacheProvider : ICacheProvider { }

public class DerivedCacheProvider : BaseCacheProvider { }

// Storage Classes
public interface IStorageProvider<TCacheProvider> where TCacheProvider : 
    ICacheProvider { }

public interface BaseStorageProvider<TCacheProvider> : 
    IStorageProvider<TCacheProvider> where TCacheProvider : ICacheProvider { }

public interface DerivedStorageProvider : BaseStorageProvider<ICacheProvider> { }

// User Classes
public interface IFileInfo<TStorageProvider> 
    where TStorageProvider : IStorageProvider<ICacheProvider> { }

public class FileInfo : IFileInfo<ICacheProvider> { } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T10:01:48.213

错误在`FileInfo`类的定义中。您将模板参数设置为，`ICacheProvider`但约束是模板参数必须是`IStorageProvider<ICacheProvider>`.

这可能会更好：

```
public interface FileInfo
          : IFileInfo<IStorageProvider<ICacheProvider>> 
```

甚至你的名字也不匹配：`IFileInfo`需要**存储**提供者，但你给它**缓存**提供者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:07:17.863

您的约束不匹配：

```
// User Classes
public interface IFileInfo<TStorageProvider> 
    where TStorageProvider : IStorageProvider<ICacheProvider> { }

public class FileInfo : IFileInfo<ICacheProvider> { } 
```

`FileInfo`被声明为`IFileInfo`带有类型的泛型参数`ICacheProvider`。但是`IFileInfo`有一个约束，让它只接受`IStorageProvider`s。而且`ICacheProvider`不是`IStorageProvider`.

# algorithm - T(n)=T(n-1)+1/n的渐近复杂度

> ID：15656021
> 
> 赞同：8
> 
> 时间：2013-03-27T09:58:05.103
> 
> 标签：algorithm, math, recursion

有一种算法具有时间复杂度

```
 T(n)=T(n-1)+1/n if n>1
        =1          otherwise 
```

我正在解决它的渐近复杂性，并将顺序设为“n”，但给出的答案是“log n”。这是对的吗？如果是log n，那为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T12:32:08.317

很容易看出（或用归纳法正式证明）T(n) 是从 1 到 n 的 k 值的 1/k 之和。这是第*n*次[谐波数](http://en.wikipedia.org/wiki/Harmonic_number)，H [n] = 1 + 1/2 + 1/3 + ... + 1/n。

渐近地，谐波数在 log(n) 的数量级上增长。这是因为该和的值接近于 1/x 从 1 到 n 的积分，它等于 n 的自然对数。事实上，H [n] = ln(n) + γ + O(1/n) 其中 γ 是一个常数。由此，很容易证明 T(n) = Θ(log(n))。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:59:23.213

更多细节：

和`H(N) = 1 + 1/2 + 1/3 + ... + 1/N`

该函数`x :-> 1/x`是一个递减函数，因此：

![在此处输入图像描述](../Images/1fa55dd17a37969836e9b34fc4e5175f.png)

我们从`1 to N`左边求和，右边部分求和，`2 to N`然后加上`1`，我们得到：

![在此处输入图像描述](../Images/abc6050d884db3b7749e154d812eac47.png)

然后我们计算左右部分：`ln(N+1) <= H(N) <= 1 + ln(N)`

这意味着 `H(N)/ln(N) -> 1`因此`H(N)=Θ(log(N))`

（来自[http://fr.wikipedia.org/wiki/S%C3%A9rie_harmonique#.C3.89quivalent_de_Hn](http://fr.wikipedia.org/wiki/S%C3%A9rie_harmonique#.C3.89quivalent_de_Hn)）

# file-upload - 将文件发送到 Mule 入站端点

> ID：15656023
> 
> 赞同：3
> 
> 时间：2013-03-27T09:58:13.717
> 
> 标签：file-upload, mule, endpoint

我正在尝试将带有文件和两个输入的表单发送到 Mule 入站端点。我有一个自定义处理器，以及这样定义的流程：

```
<custom-processor class="informa.app.classifier.transformers.MyfileUploadProcessor" name="fileuploadprocessor"></custom-processor>
<flow name="httpTest">
    <http:inbound-endpoint
                    address="http://tango.privada.informa:11002/services/fileupload"></http:inbound-endpoint>
    <processor ref="fileuploadprocessor"/>
</flow> 
```

在 MyfileUploadProcessor 类中：

公共类 MyfileUploadProcessor 实现 MessageProcessor {

```
 @Override
    public MuleEvent process(MuleEvent event) throws MuleException {
        // TODO Auto-generated method stub
        String response = "success";

        MuleMessage mulemessage = event.getMessage();

        String countryCode = mulemessage.getInboundProperty("username");
        String sourceCode = mulemessage.getInboundProperty("password");
        InputStream input = (InputStream) mulemessage.getPayload();

... 
```

为了测试，一个简单的html：

```
<form action="http://tango.privada.informa:11002/services/fileupload" method="post"
enctype="multipart/form-data">
   <p>Country Code :<input type="text" name="username" /></p>
   <p>Source Code :<input type="text" name="password" /></p>
   <p>File :<input type="file" name="payload" /></p>
   <p><input type="submit" name="submit" value="submit" />
<input type="reset" name="reset" value="reset"></p>
</form>

</body>
</html> 
```

问题是我无法从 mulemessage 的有效负载创建文件，而且我不知道如何获取表单中输入的值......我做错了什么？任何线索？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:49:40.330

您需要配置 HTTP 连接器以使用`org.mule.transport.http.HttpMultipartMuleMessageFactory`来处理`multipart/form-data`HTTP POST。

为此，将以下内容添加到您的配置中：

```
<http:connector name="httpConnector">
    <service-overrides messageFactory="org.mule.transport.http.HttpMultipartMuleMessageFactory"/>
</http:connector> 
```

有了这个，`payload`表单字段将成为 Mule 消息的流式负载，所有其他字段值将在*入站附件*中（任何部分标头都将在*入站标头*中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T19:24:37.600

大卫（对我来说是救命稻草！！cudos david）给出了很好的答案，因为我最初没有意识到必须将 httpConnector 用作 http 传输参考的一些额外项目是值得的，完整的流程将是

```
<http:connector name="httpConnector" doc:name="HTTP\HTTPS">
        <service-overrides
            messageFactory="org.mule.transport.http.HttpMultipartMuleMessageFactory" />
    </http:connector>

<flow name="AttachmentTestFlow1" doc:name="AttachmentTestFlow1">        
    <http:inbound-endpoint connector-ref="httpConnector" doc:name="HTTP" exchange-pattern="request-response" host="localhost" port="8081"/>
    <component class="ProcessAttachment" doc:name="Java" />
</flow> 
```

我能够使用 jmeter 添加两个附件上传，第一个

*   有一个参数名称 = "payload" 和 mime-type="multipart/form-data"
*   第二个有一个用户指定的名称，例如“附件”

然后可以通过正常的 mule 流或组件来处理

```
public String process(@Payload String payload, @InboundAttachments("*") Map<String, DataHandler> headers  ) throws IOException{     
    InputStream in  = headers.get("attachment").getDataSource().getInputStream(); 
```

# php - 根据数据库中的值从 1 更改为 5

> ID：15656024
> 
> 赞同：0
> 
> 时间：2013-03-27T09:58:14.323
> 
> 标签：php, html, mysql, phpmyadmin

我想根据存储在数据库中的值在我的页面上显示从 1 到 5 的星星。我正在尝试编写 PHP 代码，以在 HTML 标记中回显来自 mySQL 数据库的数据。我不知道我的代码是**对**还是**错**。我通过一个while循环运行它并在许多HTML标签中调用数据。我已将图像存储在计算机中的文件夹图像中，分别为 1stars.png、2stars.png、3stars.png、4stars.png 和 5stars.png。以下是我的代码。

```
<?php
    $query = mysql_query("select * from printers where printers_id='1';");
    while ($row = mysql_fetch_array($query)) 
    {
?>
        <table width="281" border="0" style="margin-left:40px; margin-top:10px;" cellspacing="20">
        <tr>
            <td class="table_text_left"><figure>Value for money:&nbsp;&nbsp;&nbsp;&nbsp;<img src=images/"<?php echo $row['Value_For_Money'];?>".stars.png alt="5 stars" /></figure></td>
        </tr>
        </table>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:02:37.140

这都是关于报价的。改变

```
<img src=images/"<?php echo $row['Value_For_Money']; ?>".stars.png alt="5 stars" /> 
```

至

```
<img src="images/<?php echo $row['Value_For_Money']; ?>.stars.png" alt="5 stars" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:06:53.077

我已经编辑了 Coramba 的答案，现在对我来说效果很好。谢谢科兰巴。

从

```
img src="images/<?php echo $row['Value_For_Money']; ?>.stars.png" alt="5 stars" /> 
```

至

```
<img src="images/<?php echo $row['Value_For_Money']; ?>stars.png" alt="5 stars" /> 
```

# php - 如何创建一个接受字符串并执行数据库操作的 php web 服务

> ID：15656027
> 
> 赞同：4
> 
> 时间：2013-03-27T09:58:22.033
> 
> 标签：php, web-services

我正在尝试创建一个**php web 服务**。我是 PHP 新手。我有一个 Java 应用程序，它有 2 个字符串变量。这需要存储在服务器数据库中以访问从服务器运行的 php 应用程序。所以我需要把它放在服务器上。所以我需要创建一个网络服务。是否可以将数据发送到 Web 服务？是否可以使用 Web 服务将数据写入数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:20:07.120

**下面的示例说明了 PHP 中的简单 api/webservice（服务器端和客户端）**

如果需要 java 客户端（我只是看到有人评论它可能是这种情况），那么您需要找到一种方法来扰乱响应，以便您可以使用 java 处理它。例如，如果您以 javascript jQuery 的形式与 PHP 进行通信。Web 服务的响应很可能包含一个 json 响应，它可以被 javascript 理解。我对java不熟悉。。

**开始吧**

你的问题在你描述你想要什么的方式上有点奇怪。就我而言，*Web 服务*是在服务器上运行的应用程序，它可以根据传入请求（获取/发布/原始数据）处理操作。这些操作可以是获取数据、修改数据或注册数据。这也可以意味着涉及数据库或基于文本的文件来将数据保存到/从中获取数据。

如果这就是你的意思，那么是的.. 这是可能的。假设*服务器 a*包含您的数据模型和操作列表`add`，`get`然后`delete`。您可能要考虑的第一件事是为您的服务提供某种安全性。一个基本的安全示例是使用 webserver-key。我通常使用随机 md5() 生成的字符串。当然，这不是您可以采取的最好的安全措施，因为知道密钥的每个人都可以使用它，但我稍后再谈。

除了访问您的网络服务器的安全性之外，还要考虑您希望发送数据的方式。您可以选择使用 cURL 向您的服务发送 post/get 请求，但这将包含所有开放数据。另一种选择（有点混乱）是在发送之前进行序列化..再进一步，您可能希望对字符串进行base64_encode。这至少会创建一个不可读的数据参数，该参数会传输到您的网络服务器。在最好的情况下，您可以创建一个自定义密钥，该密钥可在 web 服务和与 web 服务通信的服务器上使用。此密钥会扰乱您的序列化参数，并可用于解扰 webapp 的服务/用户端的响应/参数。

现在我们知道有另一台服务器从我们的 web 服务请求数据，我们还可以为“webservice 密钥”添加另一层安全性。对您的网络服务的每个请求都会发送一些参数（例如`$_SERVER['REMOTE_ADDR']`），这些参数可用于将密钥与服务器 IP 或域主机配对。这限制了可能访问您的服务的用户数量。

现在，一个非常基本的例子会是什么样子？

首先，网络服务。您可以使用基于参数的 OO 方式处理传入请求，但您也可以使用纯 PHP 文件：

[http://www.webservice.com/api-contacts.php](http://www.webservice.com/api-contacts.php)

*   必需参数：动作
*   可选参数：id & name

使用 $_GET['action'] = 'get' 和 $_GET['id'] = '2' 向 api.php 发送请求很可能会返回包含 id 为 '2' 的联系人的响应。

对于请求此数据，有几个选项。最基本的是 file_get_contents 或 cURL。我认为 cURL 更好，因为您可以更改更多选项以获得您想要的内容。

考虑到这是您在客户端的脚本：

```
$param = array();
$param['action'] = 'get';
$param['id'] = 2;
$params = base64_encode(serialize($param)); // generates a scrambled string

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.webservice.com/api-contacts.php');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLTOP_POSTFIELDS, 'data='.$params);
$result = curl_exec($ch);
curl_close($ch); 
```

当然，api-contacts.php 将首先对 $_POST['data'] 字符串进行 base64_decoding，然后对结果进行反序列化：

```
$data = unserialize(base64_decode($_POST['data'])); 
```

然后进行一些检查： - $data['action'] 有效吗？- 如果是：是否找到所需的参数（删除/获取的 ID，添加的名称） - 如果是：执行字段检查（有效名称，有效 ID） - 如果是：插入、删除或获取结果 - 如果是：返回响应

响应也是一个数组，例如

```
$response = array(
  'result' => 'success',
  'data' => mysql_fetch_assoc($getUser) // obviously this is just to illustrate there's userdata in the 'api-contacts.php?action=get&id=2' request.
); 
```

最后但同样重要的是，不要忘记`$result`在客户端对您的字符串进行反序列化和 base64_decode。

这是我如何实现一个简单的 Web 服务以在不同服务器上的域之间共享数据的基本解释。当然，我愿意接受其他人的各种改进和提示。

// 小插件：

我序列化和base64编码我的响应的原因是因为数组不能作为文本响应发送，而且序列化的字符串在客户端接收时可能会导致问题。

参数的序列化和 base64 编码不是必需的，它只是在通过 http 协议传输数据时提供一点额外的安全性。只需将 CURL_OPTPOSTFIELDS 用作 '?action=get&id=2' 就可以了！或者，也许您希望服务使用友好的 url 并创建`www.webservice.com/api-contacts/get/2`例如 url。

作为响应类型，有一些常见的东西：1）XML 响应 2）JSON 响应 3）base64_encoded 序列化数组

但是，在某些情况下，一个简单的文本响应“ok”就足够了。或者您可能想要构建您的 Web 服务以了解 HTTP 标头响应，例如“200 OK”。

# sql - 在 SELECT 语句 JDBC 的 autoCommit=false 连接上调用提交？

> ID：15656034
> 
> 赞同：3
> 
> 时间：2013-03-27T09:58:42.033
> 
> 标签：sql, web-applications, jdbc, transactions, commit

我在 Tomcat 上确实有一个用 Java 编写的 webapp，所有连接都应该是`autoCommit=false`默认的。现在，如果我只在事务中运行 SELECT 语句。我还需要打电话`commit()`还是仅仅关闭连接就足够了？

对于它的价值：我在 Oracle 11.2 上。

有一个[类似的问题](https://stackoverflow.com/q/3794269/696632)，但实际上并没有给出这个案例的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:08:09.377

关闭连接就足够了，不需要调用`commit`or `rollback`。

但根据[connection.close()](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#close%28%29)，[建议](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#close%28%29)调用提交或回滚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:09:23.757

~~Select 语句不会干扰基础模型或模型中包含的数据。在不调用任何与事务相关的命令（如`commit`）的情况下关闭连接是安全的。~~

实际上打击那个。在我的第一个答案中，我没有考虑对模型进行的相邻选择。假设您执行`select id from users where age > 20`并跟进它`select id from users where age = 20`，在这些查询之间进行的任何更新都会影响选择的 ACID 特性并在 2 个查询中返回重复的结果。为了保证一致的结果，您需要使用 commit() 将两个选择包装在同一个事务中。

所以是的，提交你的选择是有意义的。

# jquery - 在输入字段旁边显示成功保存的消息

> ID：15656037
> 
> 赞同：0
> 
> 时间：2013-03-27T09:58:57.557
> 
> 标签：jquery, css, toggle, textinput

我有一个表单，它切换了编辑和保存按钮以使输入框可编辑和禁用。

我这里需要的是在输入框旁边添加一条成功消息。

**HTML**

```
<form>
        <label>First Name</label>
    <input type="text" placeholder="Lorem" readonly required  /><input name="Edit" type="button" value="Edit"> <span class="alert">test</span>
        <label>First Name</label>
        <input type="text" placeholder="Lorem" required readonly /><input name="Edit" type="button" value="Edit">
        <label>Email ID</label>
        <input type="email" placeholder="Lorem" required readonly /><input name="Edit" type="button" value="Edit">
        <label>Password</label>
        <input type="password" placeholder="********" required readonly /><input name="Edit" type="Button" value="Edit">
      </form> 
```

**脚本**

```
$('[name="Edit"]').on('click', function() {
    var prev = $(this).prev('input'),
        ro   = prev.prop('readonly');
    prev.prop('readonly', !ro).focus();
    $(this).val(ro ? 'Save' : 'Edit');
    $(".alert").fade();
}); 
```

这是[**小提琴**](http://jsfiddle.net/Nedzj/9/)。

这就是我需要在保存时显示消息的方式

![在此处输入图像描述](../Images/d796a4f705d41f1e3216df5b029ee16b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:04:12.803

改变：

```
$(".alert").fade(); 
```

至：

```
$(".alert").fadeIn(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:15:23.103

尝试这个：

```
 $('[name="Edit"]').on('click', function() {

        if($(this).val()=='Save')
        {
        $(".alert").fadeIn();    
        }
        var prev = $(this).prev('input'),
            ro   = prev.prop('readonly');
        prev.prop('readonly', !ro).focus();
        $(this).val(ro ? 'Save' : 'Edit');

    }); 
```

# asp.net-mvc-3 - IIS 6 中的应用程序池内存使用量没有下降

> ID：15656040
> 
> 赞同：0
> 
> 时间：2013-03-27T09:59:00.573
> 
> 标签：asp.net-mvc-3, performance, memory-leaks, iis-6, application-pool

我有一个带有简单页面的网站。单击一个按钮，我们执行一个 MDX 查询，该查询返回大约 200,000 行和 20 列。我使用以下代码使用 Microsoft.AnalysisServices.AdomdClient 库执行 MDX 查询（版本为 10.0.0.0 运行时版本 v2.0.50727）

```
 var connection = new AdomdConnection(connectionString);
        var command = new AdomdCommand(query, connection)
        {
            CommandTimeout =  900
        };

       connection.ShowHiddenObjects = true;
       connection.Open();
       var cellSet = command.ExecuteCellSet();
       connection.Close(); 
```

当查询正在执行时，应用程序池的内存使用量变得非常高。

**这是服务器上内存使用的初始状态：** ![初始状态](../Images/c4efafa71f35383ed00ca0d8b9c7bbb3.png)

**运行查询后：** ![在此处输入图像描述](../Images/7a1437d14eaf59ea1e691ff5ddca97e8.png)

我不确定为什么内存使用率如此之高并保持不变。我在本地机器上使用了探查器，一切看起来都很好。

我必须找出哪些选项保留在内存中？

有什么明确的方法可以清除这个记忆吗？

ADOMD 库是否总是消耗这么多内存？我们是否有任何替代选项来使用 C# 执行 MDX 查询？

当内存使用量如此之高时，IIS 将停止处理其他查询，并且托管在同一 IIS 服务器上的应用程序（使用不同的应用程序池）也会受到影响，并且请求需要更长的时间才能执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T11:52:33.370

我最近开始在一个我们有类似问题的地方。

找出持有内存的选项有：

1.  下载诸如 Redgate 的 Ants 分析器之类的内存分析器，这将允许您查看应用程序池中发生的情况。但是只有 2 周的试用期，但可以让您了解最初的情况。

2.  掌握CLR Profiler，这个工具可以下载并让你看到内存的快照，这样你就可以知道CLR中的内存是什么。

要注意的一件事是大对象堆，根据设计，CLR 不会压缩 LOH 中的空间，因此如果将对象放在那里，则可能导致内存碎片。大于 85000 字节的对象会放在那里。一个例子是大型对象列表。

我尝试做的一件事是创建一个专门的集合，如复合列表，它基本上是一个列表列表，然后由于每个组件列表低于 85000 字节，它将保留在正常堆中并且整个对象未命中被放入 LOH。其他人也提到了这种方法。

也就是说，我仍然遇到问题，因为综合列表并没有真正解决问题，所以还有其他因素需要解决。我对此感到困惑，并认为应用程序池的内存转储并使用 winDbg 进行分析可能会提供进一步的答案。

还有一点，虽然我确定它不是问题的根源，但它建议为您的连接使用 using 语句，否则如果您的 close 语句之前有异常，那么它可能不会被关闭。

# c# - RIA 服务的方法总是返回 null。如何解决？

> ID：15656042
> 
> 赞同：1
> 
> 时间：2013-03-27T09:59:10.333
> 
> 标签：c#, silverlight, wcf-ria-services

我有一个 RIA 服务，我需要使用 silverlight 应用程序中的一些方法。下面是示例 RIA 服务的方法的样子：

```
 [Invoke]
    public string TestService()
    {
        return "good!";
    } 
```

这是我尝试在 silverlight 应用程序中使用它的一种方式：

```
 var ctx = new MyDomainContext();

           public string str;
           ctx.TestService( (i) =>
           {
               if (!i.HasError)
               {
                    str= (string)i.Value;

               }
           }, null); 
```

出于某种奇怪的原因，我总是得到`null`；请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T09:51:13.103

str 必须是全局而非变量

```
private string Str { get; set; } 
```

# php - 使用 SimpleXML 更改文本节点的值

> ID：15656045
> 
> 赞同：5
> 
> 时间：2013-03-27T09:59:25.463
> 
> 标签：php, simplexml

我正在尝试编写一个代码，它将在我的 XML 文件中找到特定元素，然后更改文本节点的值。XML 文件具有不同的名称空间。到目前为止，我已经成功地注册了命名空间并回显了我想要更改的元素的文本节点。

```
 <?php

   $xml = simplexml_load_file('getobs.xml');

   $xml->registerXPathNamespace('g','http://www.opengis.net/gml');

   $result = $xml->xpath('//g:beginPosition');

   foreach ($result as $title) {
   echo $title . "\n";
   }
   ?> 
```

我的问题是：如何使用 SimpleXML 更改此元素的值？我尝试使用 nodeValue 命令，但无法使其正常工作。

这是 XML 的一部分：

```
 <sos:GetObservation xmlns:sos="http://www.opengis.net/sos/1.0"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" service="SOS" version="1.0.0"  srsName="urn:ogc:def:crs:EPSG:4326">
          <sos:offering>urn:gfz:cawa:def:offering:meteorology</sos:offering>
            <sos:eventTime>
              <ogc:TM_During xmlns:ogc="http://www.opengis.net/ogc" xsi:type="ogc:BinaryTemporalOpType">
              <ogc:PropertyName>urn:ogc:data:time:iso8601</ogc:PropertyName>
                <gml:TimePeriod xmlns:gml="http://www.opengis.net/gml">
                  <gml:beginPosition>2011-02-10T01:10:00.000</gml:beginPosition> 
```

谢谢迪米特里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T04:06:42.490

不想切换我已经为 SimpleXML 编写的代码，我找到了这个解决方案：

[http://www.dotdragnet.com/forum/index.php?topic=3979.0](http://www.dotdragnet.com/forum/index.php?topic=3979.0)

具体来说：

```
$numvotes = $xml->xpath('/gallery/image[path="'.$_GET["image"].'"]/numvotes');
...
$numvotes[0][0] = $votes; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:33:14.667

最后，我设法通过使用 PHP XML DOM 来做到这一点。这是我用来更改特定元素的文本节点的代码：

```
 <?php
  // create new DOM document and load the data
  $dom = new DOMDocument;
  $dom->load('getobs.xml');
  //var_dump($dom);
  // Create new xpath and register the namespace
  $xpath = new DOMXPath($dom);
  $xpath->registerNamespace('g','http://www.opengis.net/gml');
  // query the result amd change the value to the new date
  $result = $xpath->query("//g:beginPosition");
  $result->item(0)->nodeValue = 'sds';
  // save the values in a new xml
  file_put_contents('test.xml',$dom->saveXML());
  ?> 
```

# django - 仅返回单个对象（详细信息）而不是列表

> ID：15656047
> 
> 赞同：0
> 
> 时间：2013-03-27T09:59:28.177
> 
> 标签：django, tastypie

我有一个 UserResource 定义为：

```
class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'                                                                                                                       

        # No one is allowed to see all users
        list_allowed_methods = []
        detail_allowed_methods = ['get', 'put', 'patch']

        # Hide staff
        excludes = ('is_staff')

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(pk=request.user.pk)

    def prepend_urls(self):
        return [ url(r'^(?P<resource_name>%s)/$' % self._meta.resource_name, self.wrap_view('dispatch_detail'), name='api_dispatch_detail') ] 
```

我希望 URI /user/ 只返回当前用户的详细信息，根本没有列表。我的解决方案给出了“在这个 uri 中找到了多个资源”错误，并且确实 dispatch_list 也在那里。我怎样才能让 /user/ 只返回和处理当前用户的详细信息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:16:41.557

你应该写你自己的视图来包裹住美味**派 dispatch_detail**：

```
class UserResource(ModelResource):
  [...]

  def prepend_urls(self):
    return [ url(r'^(?P<resource_name>%s)/$' % self._meta.resource_name, self.wrap_view('current_user'), name='api_current_user') ]

  def current_user(self, request, **kwargs):
    user = getattr(request, 'user', None)
    if user and not user.is_anonymous():
        return self.dispatch_detail(request, pk=str(request.user.id)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:13:46.197

要获取当前登录用户的对象，您可以从请求对象中提取它。

```
user = request.user 
```

或者

```
user = User.Objects.get(username=user.username) 
```

或使用@gyln 的答案

```
user = get_object_or_404(User, username=user.username) 
```

显然，如果您这样做，请确保用户在视图中经过身份验证。

[`object.filter`](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters)即使只有一个结果，使用该函数也将始终返回一个列表；而该[`objects.get`](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-a-single-object-with-get)方法只会返回一个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:03:53.573

尝试：

```
user = get_object_or_404(User, username=username) 
```

# visual-studio - Nvidia Nsight 3 with OpenGL 3.3 error: Thisversion of OpenGL does not support capabilities

> ID：15656053
> 
> 赞同：0
> 
> 时间：2013-03-27T09:59:47.520
> 
> 标签：visual-studio, debugging, opengl, nsight

如果我使用 Nsight 3 开始图形调试，我会收到以下错误：

“此版本的 OpenGL 不支持 Nsight 所需的功能和扩展。”

我应该使用哪个 OpenGL 版本？到目前为止，我在 OpenGL 3.3 上使用 glut (3.7) 和 glew (1.9)。我可以看到第一帧，然后应用程序崩溃（正如您在上传的图片中看到的那样）。如果我调试我的 DirectX 应用程序之一，它可以工作。

![第一帧可见](../Images/51cbbb050f4dd8d866e9e51a67fb9ad9.png) ![错误信息](../Images/81f9d862de8574975cdadc9505096c0d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:17:13.167

请参阅[http://http.developer.nvidia.com/NsightVisualStudio/3.0/Documentation/UserGuide/HTML/Content/Release_Notes_Main.htm](http://http.developer.nvidia.com/NsightVisualStudio/3.0/Documentation/UserGuide/HTML/Content/Release_Notes_Main.htm)中的“图形检查器和图形调试器”部分。

# opencl - 与（英特尔 SDK）OpenCL 和 Code::Blocks 的链接问题

> ID：15656056
> 
> 赞同：0
> 
> 时间：2013-03-27T09:59:57.480
> 
> 标签：opencl, linker-errors, codeblocks

我试图解决我的问题几个小时，但我没有找到任何有用的提示。希望大家能帮帮我：

一些有用的数据：
操作系统：Windows 8 Basic 64bit
库：Intel OpenCL SDK
编译器：MinGW(-gcc)（最新版本）
IDE：Code::Blocks（最新版本）

最小不工作代码：

```
#include <stdlib.h>
#include <CL/cl.h>

int main(void)
{
  cl_uint available;
  cl_platform_id* platforms = (cl_platform_id*)malloc(sizeof(cl_platform_id));
  cl_int result = clGetPlatformIDs(1, platforms, &available);
  free(platforms);
  if(result == CL_SUCCESS)      
    return 0;      
  return -1;
} 
```

Code::Blocks 全局编译器设置：
链接器设置：添加了英特尔 OpenCL.lib 的路径（[...]\Intel\OpenCL SDK\3.0\lib\x64\OpenCL.lib）（也尝试将 -lOpenCL 作为其他选项）
编译器的搜索目录：英特尔 OpenCL-SDK 包含目录的路径 ([...]\Intel\OpenCL SDK\3.0\include)
链接器的搜索-目录：英特尔 OpenCL-Lib 目录的路径 ([...]\ Intel\OpenCL SDK\3.0\lib\x64)

构建日志：

```
mingw32-g++.exe -L"[...]\Intel\OpenCL SDK\3.0\lib\x64"  -o bin\Release\openCLTest.exe     obj\Release\main.o   -s "[...]\Intel\OpenCL SDK\3.0\lib\x64\OpenCL.lib" 
obj\Release\main.o:main.c:(.text.startup+0x39): undefined reference to `clGetPlatformIDs@12'
collect2.exe: error: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 0 seconds)
1 errors, 0 warnings (0 minutes, 0 seconds) 
```

我不知道为什么他没有正确链接。我修改了文本中的 [...] 以缩短路径，通常为“C:\Program Files (x86)...”。

希望你们能帮助我！真是令人沮丧！:(
您需要更多信息吗？

编辑：
好的......再过一小时，我就解决了自己的问题。
希望这个提示可以帮助其他一些人：
我必须另外链接到 x86 库（似乎某些功能没有在 X64 中实现）。
很高兴知道 -。-'''

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T09:05:57.330

我遇到了同样的问题，我努力找出解决方案，最后我做到了:)

首先我的硬件是 Intel Processor Intel(R) Core(TM) i5-2500 CPU @ 3.30GHz 和 Intel(R) HD Graphics，然后我在更新驱动程序后安装了 Intel OpenCL SDK 1.2。之后，我将 code::blocks 配置为包含文件夹和 lib 文件夹的新路径，如以下链接所述：[http ://www.obellianne.fr/alexandre/tutorials/OpenCL/tuto_opencl_codeblocks.php](http://www.obellianne.fr/alexandre/tutorials/OpenCL/tuto_opencl_codeblocks.php)

然后我尝试编译示例，我遇到了如下链接问题：

```
opencl.o(.text+0x6f):opencl.c: undefined reference to `clGetPlatformIDs@12'
opencl.o(.text+0xa7):opencl.c: undefined reference to `clGetDeviceIDs@24'
opencl.o(.text+0x142):opencl.c: undefined reference to `clGetDeviceInfo@20'
opencl.o(.text+0x263):opencl.c: undefined reference to `clGetDeviceInfo@20'
collect2: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 0 seconds)
4 errors, 0 warnings (0 minutes, 0 seconds) 
```

我尝试使用命令行，但遇到了同样的错误，然后我尝试卸载 Intel sdk 并将其替换为 AMD sdk 2.8，它支持带有 SSE（由 Intel 设计的 Streaming SIMD Extension）2.x 或更高版本的 X86 CPU

[http://developer.amd.com/tools-and-sdks/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/system-requirements-driver-compatibility/](http://developer.amd.com/tools-and-sdks/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/system-requirements-driver-compatibility/)

最后它起作用了:)

我希望你觉得这个评论有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:47:40.353

根据一个外部消息来源，我偶然发现了我自己对这个问题的启蒙之路，我发现 mingw-w64 链接器实际上有问题。mingw-w64 的 ld.exe 不想与标准的 libopencl.a 链接。这是否是特定于英特尔 SDK 的我不确定，但这里是解决方案的链接。

[http://sourceforge.net/p/mingw-w64/support-requests/46/](http://sourceforge.net/p/mingw-w64/support-requests/46/)

你只需要链接到提供的 libopencl.a 而不是默认的。

仍然不知道为什么链接器会出现问题，但我已经验证该解决方案确实（以某种方式）解决了问题。

# c# - 如何检查应用程序是否有权访问目录？

> ID：15656058
> 
> 赞同：5
> 
> 时间：2013-03-27T09:59:58.973
> 
> 标签：c#, .net

在我的应用程序中，我需要检查我是否有权写入文件夹。我使用以下方法：

```
public bool IsAvailable(string path)
        {
            bool hasPermissions = false;

            if (Directory.Exists(path))
            {
                var permission = new FileIOPermission(FileIOPermissionAccess.Write, path);
                try
                {
                    permission.Demand();
                    hasPermissions = true;
                }
                catch(SecurityException e)
                {
                    hasPermissions = false;
                }
            }

            return hasPermissions;
        } 
```

当我给它一个我确定没有人可以访问它的文件夹的路径时（我已经在文件夹属性的安全选项卡中删除了所有用户的所有权限），它不会引发任何异常。它只是沿着 try 块继续。

任何想法为什么或如何更好地进行此检查？

我在其他问题上找到的 AppDomain.PermissionSet 属性相关答案没有成功。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:15:51.180

我使用了以下方法来完成它：

```
public static bool HasWritePermissionOnDir(string path)
    {
        var writeAllow = false;
        var writeDeny = false;
        var accessControlList = Directory.GetAccessControl(path);
        if (accessControlList == null)
            return false;
        var accessRules = accessControlList.GetAccessRules(true, true, typeof(System.Security.Principal.SecurityIdentifier));
        if (accessRules == null)
            return false;

        foreach (FileSystemAccessRule rule in accessRules)
        {
            if ((FileSystemRights.Write & rule.FileSystemRights) != FileSystemRights.Write) continue;

            if (rule.AccessControlType == AccessControlType.Allow)
                writeAllow = true;
            else if (rule.AccessControlType == AccessControlType.Deny)
                writeDeny = true;
        }

        return writeAllow && !writeDeny;
    } 
```

请让我知道它是否对您有帮助，如果是，请标记它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:04:07.100

这种方法（询问是否可访问，然后做某事）容易出现竞争条件。在您检查和实际访问该目录中的内容之间，权限可能会发生变化。

最好尝试在该目录中读/写某些内容，然后捕获潜在的异常。

所以不要

```
if(IsAvailable(path)) {
    try {
        doSomething();
    } catch (...) {
    }
} 
```

反而

```
try {
    doSomething();
} catch (...) {
} 
```

* * *

格蕾丝·霍珀名言：

> “请求宽恕总是比获得许可更容易。”</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:04:26.020

```
var permissionSet = new PermissionSet(PermissionState.None);    
var writePermission = new FileIOPermission(FileIOPermissionAccess.Write, filename);
permissionSet.AddPermission(writePermission);

if (permissionSet.IsSubsetOf(AppDomain.CurrentDomain.PermissionSet))
{} 
```

# php - .htaccess 重写 url 并获取变量

> ID：15656072
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:00:41.587
> 
> 标签：php, .htaccess

我正在使用以下`.htaccess`代码强制`www`进入我的网站域名。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

现在我想从这里更改我的网址：

```
www.mysite.com/index.php?i=something 
```

至

```
www.mysite.com/something 
```

但我还是想有能力去

`www.mysite.com/admin.php`（例如）作为单独的页面。

我尝试将此代码添加`RewriteRule ^(.*)$ index.php?i=$1 [NC]`到我的`.htaccess`文件中，但是当我在之后键入任何内容时，`/`它将被视为获取变量。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:09:00.817

您可以在根目录的一个 .htaccess 文件中尝试类似的操作。

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !index\.php  [NC]
RewriteCond %{REQUEST_URI} !admin\.php  [NC]
RewriteRule ^(.+)/?  /index.php?i=$1    [L,NC] 
```

如果`admin.php`可以是任何文件，只需替换

```
RewriteCond %{REQUEST_URI} !admin\.php  [NC] 
```

和

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

要重定向到 404 错误处理程序脚本，请添加如下一行：

```
ErrorDocument 404 /path/404.php 
```

这只是一个示例，请进行相应修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:12:50.340

试试这个：-

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:06:52.293

你必须像这样添加过期它必须在你的 RewriteRule `S=1`Skip RewriteRule 之前在过期之后看到这个页面有关这个标志的更多信息[http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriteflags](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriteflags)

```
RewriteCond %{REQUEST_URI} ^(.*)/admin\.php$ [NC,OR]
RewriteRule ^ admin.php [S=1,L] 
RewriteRule ^(.*)/$ /index.php?i=$1 [NC] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:03:08.237

尝试这个...

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)/$ /index.php?i=$1 [L]  // www.mysite.com/something/ 
```

**或者**

```
RewriteRule ^(.*)$ /index.php?i=$1 [L]  // www.mysite.com/something 
```

# libc - libc-2.3.2.so 符号到 libc.so.6

> ID：15656074
> 
> 赞同：0
> 
> 时间：2013-03-27T10:00:46.260
> 
> 标签：libc

我编译了一个包含`binutils`, `linux-headers`,`linux-2.6.9`和`glibc 2.3.2`,`gcc`等的包。

这最终会创建一个用于加载到卫星信号接收器上的文件箱。

当我想运行已编译的外部程序时，出现错误：`relocation error symbol not defined in libc.so.6`.

符号是`bcopy`。它在静态库 ( `libc.a`) 中定义，动态也是正确的`libc-2.3.2.so`。但是我该怎么做才能被包括在内`libc.so.6`？

可以导出这个符号`libc.so.6`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:16:04.397

> 但是我该怎么做才能被包含在 libc.so.6 中

`libc.so.6`是（或*应该*`libc-2.3.2.so`是）您已构建的符号链接。

# c++ - 我需要并行化或多线程我的应用程序吗

> ID：15656076
> 
> 赞同：1
> 
> 时间：2013-03-27T10:00:47.467
> 
> 标签：c++, hardware

我对术语`thread`和`core`以及它们与我在家用计算机上编写和执行的程序之间的关系有一些概念上的混淆。假设我在我的机器上运行以下程序，这是一个具有四个线程的[四核主板](http://ark.intel.com/products/52210/Intel-Core-i5-2500K-Processor-6M-Cache-up-to-3_70-GHz)

```
#include <iostream>

using namespace std;

int main()
{
    int long long num = 1E15;
    while(num--)
    {
        cout << num << endl;
    }
    return 0;
} 
```

如果我希望该程序使用多个内核，我的程序是否需要支持多线程或是否需要并行化？或者在我的情况下是否会相同，因为我的 CPU 每个内核有 1 个线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:12:47.757

[内核](http://en.wikipedia.org/wiki/Multi-core_processor)是一个硬件概念。[笼统地](http://en.wikipedia.org/wiki/Hyper-threading) [说](http://en.wikipedia.org/wiki/Superscalar)，当我们说 CPU 有`n`内核时，我们的意思是它可以同时做`n`一些事情。

[线程](http://en.wikipedia.org/wiki/Thread_%28computing%29)是一个软件概念。它是指可以由操作系统调度程序独立管理的指令序列。通常，一个[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)由一个或多个线程组成，尽管在[某些操作系统中](http://en.wikipedia.org/wiki/Linux)，进程和线程之间的区别有些模糊。

在任何给定时刻，核心要么处于空闲状态，要么正在执行线程。

您的示例当前有一个线程。因此，它不能使用多个内核。要使用多个内核，您需要引入多个线程或多个进程。这可以描述为*并行化*您的程序，尽管值得注意的是，使用多个线程/进程并不是并行化程序[的唯一方法。](http://en.wikipedia.org/wiki/SIMD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:06:09.803

通常，`multithreading`会*强制*操作系统使用多个 CPU 内核。但这始终取决于操作系统。操作系统的调度程序负责根据其策略分配线程。

# dns - 在 github 页面上重定向 TLD 和“博客”子域

> ID：15656078
> 
> 赞同：3
> 
> 时间：2013-03-27T10:00:52.030
> 
> 标签：dns, tld, github-pages

我从 GitHub Pages 开始，但没有按我的意愿配置我的 DNS 和 GitHub 存储库。

我想将 和 都`mydomain.com`重定向`blog.mydomain.com`到`username.github.com`.

我将`mydomain.com`CNAME 文件放入我的 GitHub 存储库中，并添加了`@`to的 A 记录`204.232.175.78`和两个 CNAME 记录`www`和`blog`到`username.github.com`URL，`blog.mydomain.com`给我一个 GitHub 404 错误。

我的配置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T14:49:33.613

根据[GitHub Pages 帮助页面](https://help.github.com/articles/setting-up-a-custom-domain-with-pages)，

> 对于任何给定的页面集，您只能拥有一个自定义域。如果您希望多个域指向相同的页面，则需要找到可以将其他域重定向到您的 Pages 域的服务。

如果您想将两个子域 (`www`和`blog`) 重定向到 username.github.io，您可以使用您的 DNS 提供商设置从到的[转发](http://support.godaddy.com/help/article/422/forwarding-or-masking-your-domain-name?locale=en&pc_split_value=4)（不带掩码）。然后，如果访问者访问或，他们将看到 的内容，并且地址栏将显示。`www``blog``www.mydomain.com``blog.mydomain.com``username.github.io``blog.mydomain.com`

# jquery - Wordpress - Jquery 不工作

> ID：15656080
> 
> 赞同：1
> 
> 时间：2013-03-27T10:00:56.697
> 
> 标签：jquery, wordpress

我在functions.php中使用以下代码向我的页面添加了一个jquery

```
wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js', false, '1.9.1', true);
        wp_enqueue_script('jquery'); 
```

这工作了一段时间。之后它显示 jQuery 未定义

我在这里做错了吗？我应该这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:21:39.647

Wordpress 有它自己的`jquery library`，所以你不需要包含它。如果您包含`library`jquery，那么在某些情况下它可能会`conflict with wordpress`库。我在我的插件中多次使用 jquery，我总是使用这种方法
`wp_register_script('script', plugins_url('script.js', __FILE__));`
`wp_enqueue_script('script');`
，我认为这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:02:11.497

首次使用：

```
wp_deregister_script('jquery'); 
```

然后：

```
wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js', false, '1.9.1', false);
wp_enqueue_script('jquery'); 
```

在 header.php 中使用：

```
wp_head(); 
```

`</head>`标签之前。而且我认为最好将jquery放入`<head>`标签中。请记住，所有依赖于 jquery 的 javascript 都必须在 jquery 核心之后链接。

# push - 如何推送到本地远程？

> ID：15656086
> 
> 赞同：0
> 
> 时间：2013-03-27T10:01:26.150
> 
> 标签：push, libgit2sharp

我很难使用 libgit2sharp 将我的提交推送到远程存储库。使用 git bash 它工作正常。

远程通过 UNC 寻址，例如“//computer_name/remote.git”。所以它是本地网络中机器上的一个文件夹，它有一个可访问的文件夹。

使用 libgit2sharp 将其克隆到本地存储库工作得很好，并且构建远程也成功了

`Remote remote = localrepo.Network.Remotes["origin"];`

现在，当我尝试使用以下命令推送到遥控器时：

`localrepo.Network.Push(remote, "HEAD", "origin");`

我在 Proxy.cs 的 git_push_add_refspec() 中遇到异常

```
An error was raised by libgit2\. Category = Invalid (Error).
Not a valid reference 'origin' 
```

所以我尝试了：

`repo.Network.Push(remote, "HEAD", @"refs/remotes/origin/master");`

并在 Proxy.cs 的 git_push_finish() 中得到了异常

```
An error was raised by libgit2\. Category = Net (Error).
Remote transport doesn't support push. 
```

是否有正确的方法可以做到这一点，或者我的用例是否存在支持问题？提前致谢！

**[更新]**

现在我的命令看起来像这样

```
repo.Network.Push(remote, "HEAD", @"refs/remote/origin/master", pushStErrHnd, null); 
```

它`PushStatusErrorHandler`只有一行代码，它应该在其中写入`PushErrorStatus`控制台。但是控制台保持空白，然后发生上述异常。

**[更新 2]**

当我经历上述情况时，静态变量 Repository.Version 为 0.9.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:32:34.517

正如 nulltoken 已经提到的，最近才添加了本地推送。你需要确保你有一个最近的 LibGit2Sharp 版本（你需要 LibGit2Sharp 包含提交 547a6bd，于 3 月 12 日提交）

另外，API 的使用也有一点小错误。目标引用应该是远程更新的引用（例如@"refs/remote/origin/master" 应该是@"refs/heads/master"）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:27:04.303

推送到本地存储库最近已添加到 libgit2（请参阅**[PR #1406](https://github.com/libgit2/libgit2/pull/1406)**）并最终嵌入到 LibGit2Sharp 中。但是，此功能尚未经过适当测试。

为了尝试帮助您，您能否通过以下几个问题的答案更新您的问题：

*   `Push`接受附加参数以提供有关问题的更多信息：`onPushStatusError`. 您能否提供每个潜在`PushStatusError`的输出？
*   您声明*“将其克隆到本地回购工作”*。你是如何进行克隆的？通过 git? 通过 LibGit2Sharp？
*   如果您将远程的 url 更改为文件 URI 格式（例如。`file://computer_name/remote.git`）会发生什么？

## 更新

令人惊叹的**[@yorah](https://stackoverflow.com/users/565425/yorah)**正在处理一个**[拉取请求](https://github.com/libgit2/libgit2sharp/pull/376)**，以增强有关您的场景的测试覆盖率。

*   从本地存储库克隆
*   添加一个新的提交
*   推送新创建的提交
*   检索远程引用列表

# c++ - openGL中具有大存储空间的文本文件

> ID：15656088
> 
> 赞同：0
> 
> 时间：2013-03-27T10:01:31.607
> 
> 标签：c++, text-files, storage

我正在制作一个必须存储对象位置的程序。这个数据可以达到100MB以上，我想把它存储在硬盘上。现在，我四处搜索，有几种方法可以做到这一点：txt-file、sql、xml、...

我已经知道如何在 C++ 中制作一个 txt 文件。但是 .txt 文件存储大量数据的优势是什么？最好的方法是什么？

目前我逐行存储数字，以便我可以使用`getline()`. 但它给我带来了问题，它读得不好。可能是因为 .txt 无法处理太多数据，或者可能是因为逐行阅读非常慢，这给我带来了问题。有人知道如何解决这个问题吗？

这是一些代码：

```
 _chdir("c:/Documents and Settings/Bram/Bureaublad/cloth3d");

    ofstream mfile;
    mfile.open("example.txt", ifstream::out);

some calculations...
        mfile << (double) vervangplaats[i][j][0] << "\n";
        mfile << (double) vervangplaats[i][j][1] << "\n";
        mfile << (double) vervangplaats[i][j][2] << "\n";
// the data is stored in the .txt file
mfile.close(); 
```

这将数据存储在 txt 文件中，现在我将其提取回来。

```
std::string b;
ifstream file("example.txt", ifstream::out);
if(file.is_open())
{
        getline(file, b);
    result[0][teller_x][teller_y] = (double) atof(b.c_str());
        getline(file, b);
    result[1][teller_x][teller_y] = (double) atof(b.c_str());
        getline(file, b);
    result[2][teller_x][teller_y] = (double) atof(b.c_str());
} 
```

最后一个带有 getline 的函数每帧使用 2500 次。

并且帧不加载，可能是因为每帧的 getline 量很大，或者仅仅是因为 txt 不适合存储大量数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:03:34.730

呃，每帧从磁盘加载数据*从来*都不是一个好主意，那太慢了。在开始渲染之前，您必须将数据加载到内存中*一次。*

也就是说，文本文件最适合需要人类可读和可移植的数据。

诸如此类的低级数据通常以二进制形式存储，这使得文件更小，加载更简单、更快。

# c# - 从文本文件中读取一行并返回

> ID：15656089
> 
> 赞同：2
> 
> 时间：2013-03-27T10:01:37.823
> 
> 标签：c#, text, file-io

我正在开发一个 C# 应用程序，我需要从文本文件中读取一行并返回到第一行。

由于文件大小可能太大，我无法将其复制到数组中。

我试过这段代码

```
StreamReader str1 = new StreamReader(@"c:\file1.txt");
StreamReader str2 = new StreamReader(@"c:\file2.txt");

int a, b;
long pos1, pos2;

while (!str1.EndOfStream && !str2.EndOfStream)
{
    pos1 = str1.BaseStream.Position;
    pos2 = str2.BaseStream.Position;

    a = Int32.Parse(str1.ReadLine());
    b = Int32.Parse(str2.ReadLine());
    if (a <= b)
    {
        Console.WriteLine("File1 ---> " + a.ToString());
        str2.BaseStream.Seek(pos2, SeekOrigin.Begin);
    }
    else
    {
        Console.WriteLine("File2 ---> " + b.ToString());
        str1.BaseStream.Seek(pos1, SeekOrigin.Begin);
    }
} 
```

`str1.BaseStream.Position`当我调试程序时，我发现`str2.BaseStream.Position`每个循环都相同，所以什么都不会改变。

有没有更好的办法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T10:05:39.757

您可以[`ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)用于大文件，它是*延迟执行*并且不会将整个文件加载到内存中，因此您可以操作`IEnumerable`以下类型的行：

```
var lines = File.ReadLines("path"); 
```

如果您使用的是旧 .NET 版本，以下是如何`ReadLines`自己构建：

```
 public IEnumerable<string> ReadLine(string path)
    {
        using (var streamReader = new StreamReader(path))
        {
            string line;
            while((line = streamReader.ReadLine()) != null)
            {
                yield return line;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:56:46.330

我更喜欢使用的另一种方式。

像这样创建一个函数：

```
string ReadLine( Stream sr,bool goToNext)
        {            
            if (sr.Position >= sr.Length)
                return string.Empty;            
            char readKey;
            StringBuilder strb = new StringBuilder();
            long position = sr.Position;
            do
            {
                readKey = (char)sr.ReadByte();
                strb.Append(readKey);
            }
            while (readKey != (char)ConsoleKey.Enter && sr.Position<sr.Length);
            if(!goToNext)
            sr.Position = position;
            return strb.ToString();        
        } 
```

然后，为它的参数从文件创建一个流

```
Stream stream = File.Open("C:\\1.txt", FileMode.Open); 
```

# jquery - 使用 Ajax 获取网站的一部分并实现它

> ID：15656090
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:01:42.980
> 
> 标签：jquery, ajax

[我想知道我是否能以某种方式从网站http://www.preev.com/](http://www.preev.com/)获得货币转换器及其功能

我尝试下载页面并使用 ajax 来获取那部分，我确实得到了那部分，但它不起作用。所以我希望有办法在我的网站上获取货币转换器及其功能。您必须使用 jquery 的 get() 或 post() 或 load() ajax 函数代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:44:20.857

你为什么不使用相同的服务而不是抓取网站？

由 Mt.Gox 贸易 API 提供：[https](https://mtgox.com/api) ://mtgox.com/api ?

我想[http://data.mtgox.com/api/1/BTCUSD/ticker](http://data.mtgox.com/api/1/BTCUSD/ticker)正是您要找的。

# c# - 对多个字段的 solr 查询不起作用

> ID：15656093
> 
> 赞同：0
> 
> 时间：2013-03-27T10:02:00.387
> 
> 标签：c#, solr, solrnet

我有一个问题，我无法查询多个字段。我阅读了以下关于它的文章并做了同样的事情： [Solr - Query over all fields best practice](https://stackoverflow.com/questions/12833592/solr-query-over-all-fields-best-practise)

这是我的架构文件：

```
<fields>   

<field name="fileid" type="string" indexed="true" stored="true" required="true" /> 
   <field name="doctext" type="text_general" indexed="true" stored="true" required="false" /> 
   <field name="title" type="text_general" indexed="true" stored="false" required="false" /> 
   <field name="datecreated" type="date" indexed="true" stored="false" /> 
   <field name="text" type="text_general" indexed="true" stored="true" multiValued="true"/>

   <!-- catchall text field that indexes tokens both normally and in reverse for efficient
        leading wildcard queries. -->
   <field name="text_rev" type="text_general_rev" indexed="true" stored="false" multiValued="true"/>

   <!-- non-tokenized version of manufacturer to make it easier to sort or group
        results by manufacturer.  copied from "manu" via copyField -->
<!--    <field name="manu_exact" type="string" indexed="true" stored="false"/>

   <field name="payloads" type="payloads" indexed="true" stored="true"/>-->

   <field name="_version_" type="long" indexed="true" stored="true"/>

   <dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
   <dynamicField name="*_is" type="int"    indexed="true"  stored="true"  multiValued="true"/>
   <dynamicField name="*_s"  type="string"  indexed="true"  stored="true" />
   <dynamicField name="*_ss" type="string"  indexed="true"  stored="true" multiValued="true"/>
   <dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
   <dynamicField name="*_ls" type="long"   indexed="true"  stored="true"  multiValued="true"/>
   <dynamicField name="*_t"  type="text_general"    indexed="true"  stored="true"/>
   <dynamicField name="*_txt" type="text_general"   indexed="true"  stored="true" multiValued="true"/>
   <dynamicField name="*_en"  type="text_en"    indexed="true"  stored="true" multiValued="true"/>
   <dynamicField name="*_b"  type="boolean" indexed="true" stored="true"/>
   <dynamicField name="*_bs" type="boolean" indexed="true" stored="true"  multiValued="true"/>
   <dynamicField name="*_f"  type="float"  indexed="true"  stored="true"/>
   <dynamicField name="*_fs" type="float"  indexed="true"  stored="true"  multiValued="true"/>
   <dynamicField name="*_d"  type="double" indexed="true"  stored="true"/>
   <dynamicField name="*_ds" type="double" indexed="true"  stored="true"  multiValued="true"/>

   <!-- Type used to index the lat and lon components for the "location" FieldType -->
   <dynamicField name="*_coordinate"  type="tdouble" indexed="true"  stored="false" />

   <dynamicField name="*_dt"  type="date"    indexed="true"  stored="true"/>
   <dynamicField name="*_dts" type="date"    indexed="true"  stored="true" multiValued="true"/>
   <dynamicField name="*_p"  type="location" indexed="true" stored="true"/>

   <!-- some trie-coded dynamic fields for faster range queries -->
   <dynamicField name="*_ti" type="tint"    indexed="true"  stored="true"/>
   <dynamicField name="*_tl" type="tlong"   indexed="true"  stored="true"/>
   <dynamicField name="*_tf" type="tfloat"  indexed="true"  stored="true"/>
   <dynamicField name="*_td" type="tdouble" indexed="true"  stored="true"/>
   <dynamicField name="*_tdt" type="tdate"  indexed="true"  stored="true"/>

   <dynamicField name="*_pi"  type="pint"    indexed="true"  stored="true"/>
   <dynamicField name="*_c"   type="currency" indexed="true"  stored="true"/>

   <dynamicField name="ignored_*" type="ignored" multiValued="true"/>
   <dynamicField name="attr_*" type="text_general" indexed="true" stored="true" multiValued="true"/>

   <dynamicField name="random_*" type="random" />
</fields>

 <!-- Field to use to determine and enforce document uniqueness. 
      Unless this field is marked with required="false", it will be a required field
   -->
 <uniqueKey>fileid</uniqueKey>

   <copyField source="fileid" dest="text"/>
   <copyField source="doctext" dest="text"/>
   <copyField source="datecreated" dest="text"/>
   <copyField source="title" dest="text"/>

  <types>

<!-- A general text field that has reasonable, generic
     cross-language defaults: it tokenizes with StandardTokenizer,
 removes stop words from case-insensitive "stopwords.txt"
 (empty by default), and down cases.  At query time only, it
 also applies synonyms. -->
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

我执行了以下查询：

```
1:results = solrWorker.Query(new SolrQuery("fileid:1"));
2:results = solrWorker.Query(new SolrQuery("text:1"));
3:results = solrWorker.Query(new SolrQuery("doctext:preacher"));
4:results = solrWorker.Query(new SolrQuery("text:preacher")); 
```

查询 1 和 3 正在工作。查询 2 和 4 没有结果。

为什么？？

谢谢，特罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:12:39.800

我对这个问题有两个想法。

1.  您在索引数据后添加了复制字段定义。

    *   **解决方案：**架构更改后重新索引所有内容。
2.  复制字段应在 <fields> 标记内。（不确定这一点，在我的定义中它在字段标签内）。

    *   **解决方案：**在 <fields> 标签内移动复制字段标签。

# node.js - q.js：我可以停止一个函数的执行，直到一个promise被实现？

> ID：15656097
> 
> 赞同：6
> 
> 时间：2013-03-27T10:02:19.220
> 
> 标签：node.js, q

举个例子：

```
if(foo) {
    async_call(); // returns a Q promise object
}
// do this immediately if foo was false 
// or after the promise is resolved if foo was true 
```

这甚至可能吗？

我可以看到的替代方案要么总是调用 async 函数，而放弃“foo”检查，这不是最优的，但可以在代码中工作；或者只是假设 'foo' 为真，如果为假则抛出错误（要求调用者在调用异步函数本身后重试），由于显而易见的原因，这甚至更不理想。

编辑：作为临时解决方法，我发现这很有效，但这并不理想：

```
var promise = foo ? Q.defer().resolve(foo).promise : async_call();
promise.then(function(foo) {
    // this is done after the async call if it was necessary or immediately if not
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T11:13:13.660

`Q.when()`当您不知道一个值是否是一个承诺时，可以用于此目的。

```
Q.when(foo || async_call()).then(function (foo) {
  //...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:05:44.040

您可以通过定义一个函数，例如：

```
function do_this(err) {
    // yay.
}

if(foo) {
    async_call(arguments, do_this); 
} else {
    do_this();
} 
```

# powershell - 重新启动 PC 并使用自定义消息写入事件日志

> ID：15656106
> 
> 赞同：1
> 
> 时间：2013-03-27T10:02:51.760
> 
> 标签：powershell, powershell-2.0, event-log, powershell-3.0, powershell-remoting

我在 PowerShell 中编写了一个脚本，它将使用“Restart-Computer”命令远程重新启动 PC 列表。

有没有办法在系统事件日志中添加自定义消息，以解释计算机已被我的脚本重新启动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T18:06:12.900

[这是我上面用户CB](https://stackoverflow.com/users/520612/c-b)建议用来解决此问题的 PowerShell 代码。

`Shutdown /r /f /m ComputerName /d P:0:1 /c "Your comment"`

此代码将强制 (/f) 关闭并重新启动 (/r) 给定 PC，并使用自定义注释 (/c) 写入事件日志。**请注意**，要编写自定义注释，需要使用 (/d) 参数提供原因代码。另请注意，参数的顺序很重要。

有关原因代码和语法的列表，请点击以下链接。

*   [http://ss64.com/nt/shutdown.html](http://ss64.com/nt/shutdown.html)
*   [http://technet.microsoft.com/en-us/library/cc732503(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc732503%28v=ws.10%29.aspx)

# sql - 选择所有字段以及 LINQ VB.NET 中的一些新字段

> ID：15656111
> 
> 赞同：1
> 
> 时间：2013-03-27T10:03:09.407
> 
> 标签：sql, vb.net, linq

我想将简单的 SQL 转换为 LINQ（**请仅使用 VB.Net 解决方案**）

SQL: SELECT *, 'value' as col1 FROM TableA

林奇：？

我已经尝试过这个：

```
Dim query = From c In dbContext.TableAs _
            Select c, col1 = "value"

e.QueryableSource = query

or:  Select New With {c, .col1 = "value"}

or:  Let col1 = "value"
     Select c, col1 
```

什么都没用。提前致谢。

添加。此代码有效：

```
Dim dbContext As New TestLINQDataContext
Dim query = From c In dbContext.TableAs _
                Where c.colA > 10 _
                Select c.colA, c.colB, c.colC, col1 = "value"

e.KeyExpression = "colA"
e.QueryableSource = query 
```

问题是我有更多包含 30 列或更多列的表，所以我不想在 Select 中一一写入列，但我想对所有列使用 * 加上我的计算值。

# c# - 如何仅根据位置获取推文？

> ID：15656112
> 
> 赞同：0
> 
> 时间：2013-03-27T10:03:10.187
> 
> 标签：c#, twitter, geocode

我正在使用以下内容：[https](https://api.twitter.com/1.1/search/tweets.json?q=SearchTerm&geocode=37.781157,-122.398720,20km) ://api.twitter.com/1.1/search/tweets.json?q=SearchTerm&geocode= 37.781157,-122.398720,20km 从某个位置获取推文。我注意到 q 参数需要有一个值，否则我会得到*"The remote server returned an error: (401) Unauthorized"*。

使用现已弃用的搜索 API 时：[http](http://search.twitter.com/search.json?q=&geocode=37.781157,-122.398720,20km) ://search.twitter.com/search.json?q=&geocode= 37.781157,-122.398720,20km 可以省略**q 参数**的值，但仍会返回结果。

是否有通配符或任何其他方式来省略为 https://api.twitter.com/1.1/search/tweets.json?q=SearchTerm&geocode=37.781157,-122.398720 中的 q 参数指定值（搜索词 [）](https://api.twitter.com/1.1/search/tweets.json?q=SearchTerm&geocode=37.781157,-122.398720,20km)**，**[20公里](https://api.twitter.com/1.1/search/tweets.json?q=SearchTerm&geocode=37.781157,-122.398720,20km) ？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:58:42.333

问题是我的**OAuth 基本签名**字符串无效：

检查地理编码值**中**使用的 , 是否被双重转义 -**它必须像 37.781157%252C-122.398720%252C1mi 而不是 37.781157%2C-122.398720%2C1mi。**

下面是一个有效的 OAuth 签名示例：

```
GET&https%3A%2F%2Fapi.twitter.com%2F1.1%2Fsearch%2Ftweets.json
&geocode%3D37.781157%252C-122.398720%252C1mi
%26oauth_consumer_key%3D...
%26oauth_nonce%3DToul8
%26oauth_signature_method%3DHMAC-SHA1
%26oauth_timestamp%3D1364420628
%26oauth_token%3D...
%26oauth_version%3D1.0
%26q%3D 
```

# android - 动画方法 applyTransformation 在我单击任何布局之前不会触发

> ID：15656113
> 
> 赞同：6
> 
> 时间：2013-03-27T10:03:19.703
> 
> 标签：android, android-layout, android-animation

这太奇怪了，我有这个动画代码：

```
public class ExpandAnimation extends Animation {
private View mAnimatedView;
private MarginLayoutParams mViewLayoutParams;
private int mMarginStart, mMarginEnd;
private boolean mWasEndedAlready = false;

/**
* Initialize the animation
* @param view The layout we want to animate
* @param duration The duration of the animation, in ms
*/
    public ExpandAnimation(View view, int duration) {
        setDuration(duration);
        mAnimatedView = view;
        mViewLayoutParams = (MarginLayoutParams) view.getLayoutParams();

        mMarginStart = mViewLayoutParams.rightMargin;
        mMarginEnd = (mMarginStart == 0 ? (0- view.getWidth()) : 0);
        view.setVisibility(View.VISIBLE);
        mAnimatedView.requestLayout();
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.applyTransformation(interpolatedTime, t);
        if (interpolatedTime < 1.0f) {
            // Calculating the new bottom margin, and setting it
            mViewLayoutParams.rightMargin = mMarginStart
                    + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);
            // Invalidating the layout, making us seeing the changes we made
            mAnimatedView.requestLayout();

        // Making sure we didn't run the ending before (it happens!)
        } else if (!mWasEndedAlready) {
            mViewLayoutParams.rightMargin = mMarginEnd;
            mAnimatedView.requestLayout();
            mWasEndedAlready = true;
        }
    }
} 
```

我使用这个动画：

```
View parent = (View) v.getParent();
View containerMenu = parent.findViewById(R.id.containerMenu);
ExpandAnimation anim=new ExpandAnimation(containerMenu, 1000);
containerMenu.startAnimation(anim); 
```

此动画切换隐藏/显示它的布局。

默认情况下，它是隐藏的。当我单击时，动画会起作用并显示出来。当我再次单击时，它会正确收缩。但是第三次​​，它什么也没做。我已经调试过，我发现构造函数被调用**但不是** `applyTransformation`。 **不知何故，如果我单击屏幕周围的任何布局，动画就会突然开始。**

任何想法？

**编辑** 有谁知道 applyTransformation 何时触发？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T11:18:28.830

我不明白为什么，但是当我单击或对任何布局执行任何操作时，动画终于开始了。所以我以编程方式添加了一个解决方法。我的布局中有一个滚动视图，所以我移动了滚动位置：

```
hscv.scrollTo(hscv.getScrollX()+1, hscv.getScrollY()+1); 
```

这之后`containerMenu.startAnimation(anim);`

这只是工作，我不明白为什么。

另外，我发现一些动画在 android > 4 上运行完美，但在 2.3 上，它有同样的问题，可以扩大和缩小，但不能第二次扩大。

```
parent.invalidate(); 
```

成功了。

# sql - 如何使用 SQL Server 对分隔字符串中的数字求和

> ID：15656117
> 
> 赞同：1
> 
> 时间：2013-03-27T10:03:25.710
> 
> 标签：sql, sql-server

我有一个字符串，其中包含由这样的管道分隔的数字`23|12|12|32|43`。

使用 SQL 我想提取每个数字，加 10，然后求和以获得总数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:56:18.793

Here is another alternative:

```
declare @str nvarchar(max) = '23|12|12|32|43';

set @str = 'select '+replace(@str, '|', '+');

exec(@str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:03:25.710

使用递归公用表表达式的答案：

```
WITH cte AS (
  SELECT
    '23|12|12|32|43' + '|' AS string
    ,0 AS total
  UNION ALL
  SELECT
    RIGHT(string, LEN(string) - PATINDEX('%|%', string))
    ,CAST(LEFT(string, PATINDEX('%|%', string) - 1) AS INT) + 10
  FROM cte
  WHERE PATINDEX('%|%', string) > 0

)
SELECT SUM(total) AS total FROM cte 
```

作为递归终止符，我检查了字符串中是否存在更多管道，但是这错过了我通过在原始字符串的末尾连接一个额外的管道来解决的最后一个元素，我想那里可能是表达 WHERE 子句的更好方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T10:47:57.347

这是另一种方法：

```
DECLARE @s VARCHAR(1000) = '23|12|12|32|43'

SELECT CAST('<root><e>' + REPLACE(@s, '|', '</e><e>') + '</e></root>' AS XML)
        .value('sum(/root/e) + count(/root/e) * 10', 'INT') 
```

这使用转换为`XML`它提供的数据类型和函数。

**我只是作为一个例子发布了这个，你的方法有更好的性能。**

# ios - 我需要设计洒水图，但不使用 CorePlot。

> ID：15656122
> 
> 赞同：0
> 
> 时间：2013-03-27T10:03:27.103
> 
> 标签：ios

我需要设计显示在下面的 URL [http://screencast.com/t/paJruvguQ](http://screencast.com/t/paJruvguQ)的图表 但是我必须在不使用 CorePlot 库的情况下实现这个目标，必须从头开始编写代码。有什么解决方案我应该如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:33:43.147

最近我为此开发了一个库，你可以[在这里](https://github.com/DipenPanchasara/ChartView)下载。进行必要的修改以满足您的要求。祝你好运

# php - 加快搜索结果显示的最佳方法

> ID：15656123
> 
> 赞同：1
> 
> 时间：2013-03-27T10:03:29.107
> 
> 标签：php, mysql, performance, search, lucene

我们一直在为一个具有大约 200 万个姓名和地址以及 300 万个相关订阅和会议出席记录的 mySQL 数据库设计一个搜索结果系统的原型。

在执行搜索并返回所有结果的那一刻 - 对于每个结果，我执行第二个查询以查找该人的唯一 ID 的订阅/会议。我在所有重要列上都有索引，并且各个查询在 phpMyAdmin（0.0xxx 秒）中执行得非常快，但是将其输入网页以显示（PHP，使用 DataTables 分页）并且页面需要几秒钟才能呈现。我们已经尝试将数据移植到 Lucene 数据库，这就像 LIGHTNING 一样，但瓶颈似乎仍然是显示结果而不是检索结果。

我想这可能是由于在浏览器中构建、服务和呈现页面的开销。我想我可以通过执行 GROUP_CONCAT 来删除我上面提到的子查询，以获取原始查询中的订阅代码，但是如何加快页面的显示速度呢？

我想的很少，经常使用 AJAX/服务器端分页查询可能是这里的方式（可能会得到 50 个结果，查询更小，页面更小并且可以更快地提供服务）但我欢迎你们提出任何建议有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:11:46.003

即使您使用 Datatables 进行分页，所有结果都会首先加载到页面源代码中，尽管您使用的是[服务器端功能。](http://datatables.net/release-datatables/examples/server_side/server_side.html)

一次加载 200 万行总是会缓慢渲染。您必须进行服务器端分页，它可以通过 AJAX 或普通 PHP 脚本。

您还可以考虑使用缓存系统来加快从服务器加载数据的速度，并避免在不需要时调用数据库。如果您的数据可以随时间随机变化，您可以随时使用函数来检查自上次缓存数据以来数据是否发生了变化，如果是，则更新缓存的数据。

# c# - 通过控件和 MouseEventArgs 拖放表单

> ID：15656124
> 
> 赞同：1
> 
> 时间：2013-03-27T10:03:32.533
> 
> 标签：c#, winforms, user-interface

我目前正在使用提到的代码在特定控件（在本例中为 toolStrip）上单击并移动鼠标时移动我的表单。

```
private void toolStrip1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left) //Wenn die linke Maustaste gedrückt wurde,
            FormMouseDownLocation = e.Location; //wird die Position der Maus gespeichert
    }

    private void toolStrip1_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left) //Wird die Linke taste gedrückt und bewegt,
        {
            this.Left += e.X - FormMouseDownLocation.X; //so verschiebt sich das Fenster bei jeder Bewegung um die Positionänderung der Maus (hier die X Pos)

            this.Top += e.Y - FormMouseDownLocation.Y; //so verschiebt sich das Fenster bei jeder Bewegung um die Positionänderung der Maus (hier die Y Pos)
        }
    } 
```

现在我有一个问题。光标的移动速度比窗体快，因此光标经常离开工具条，窗体停止移动。只有当我将此代码与除主窗体之外的控件结合使用时，才会发生这种情况。

单击另一个控件时，是否有解决此问题的方法或者更改表单位置的更好方法？

提前致谢

附加信息：我正在使用 winforms，FormBorderStyle：无

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:17:38.527

这是一个常见问题，您必须捕获鼠标以确保当光标移出工具条窗口时您仍然收到 MouseMove 事件。任何窗口都有问题，但更有可能是工具条，因为它们往往很细。使固定：

```
private void toolStrip1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left) {
        FormMouseDownLocation = e.Location;
        toolStrip1.Capture = true;
    }
}

private void toolStrip1_MouseUp(object sender, MouseEventArgs e)
{
    toolStrip1.Capture = false;
} 
```

请选择更好的变量名。“FormMouseDownLocation”异常不准确，位置与表单完全无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:12:36.833

你可以参考[这个](https://stackoverflow.com/a/3579907/1129189)。例如，您可以使用面板甚至可以用作标题的任何对象。请检查链接。不是他们使用的部分`WndProc`

# osgi - 什么是“脂肪束”？

> ID：15656125
> 
> 赞同：0
> 
> 时间：2013-03-27T10:03:33.387
> 
> 标签：osgi, bundle

我在 OSGi 上下文中听到了俚语“胖包”，所以我想知道它与普通的 OSGi 包有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T11:34:19.693

胖包是包含其所有依赖项的包。由于包具有内部类路径，因此您可以获取应用程序并在包中运行它。一旦你有了这个“胖”的捆绑包，你就可以切割出一些碎片并制作更模块化的东西。

# html - IE中的行旋转

> ID：15656133
> 
> 赞同：0
> 
> 时间：2013-03-27T10:03:46.503
> 
> 标签：html, css, internet-explorer, rotation

如何使这条线旋转在 IE8 中工作？我用[**它**](http://www.useragentman.com/IETransformsTranslator/)来获取 ms-filter 但仍然无法工作..

这是一个[JSFIDDLE](http://jsfiddle.net/ncrzB/)。

继承人的HTML：

```
<div class="mainmenu">
    test
</div> 
```

和CSS：

```
.mainmenu:before {
    background: none repeat scroll 0 0 #333333;
    content: "";
    display: block;
    height: 1px;
    position: relative;
    right: 12.5%;
    transform: rotate(-45deg);
    width: 35%;
    z-index:10000;

    -webkit-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -o-transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
     -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.7071067811865483, M12=0.7071067811865467, M21=-0.7071067811865467, M22=0.7071067811865483, SizingMethod='auto expand')";
} 
```

非常感谢任何帮助..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:08:18.973

```
transform: rotate(45deg);  /* CSS3 (for when it gets supported) */
  -moz-transform: rotate(45deg);  /* FF3.5+ */
  -o-transform: rotate(45deg);  /* Opera 10.5 */
  -webkit-transform: rotate(45deg);  /* Saf3.1+, Chrome */
  -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476)"; /* IE8 */
  filter: progid\:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476); /* IE6,IE7 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:24:58.093

IE8 不支持标准的 CSS3 旋转，但它确实有`-ms-filter`样式，它能够做同样的事情（尽管语法要复杂得多，还有一些烦人的警告）。

但是，如果您准备使用一点 Javascript，我强烈建议您为此使用一个好的 polyfill 脚本，这将允许您使用标准的 CSS`rotate`语法，即使是旧的 IE 版本。

我所知道的用于旋转的最好的 polyfill 脚本是[CSS Sandpaper](http://www.useragentman.com/blog/2010/03/09/cross-browser-css-transforms-even-in-ie/#more-896)。

使用这意味着您可以使用（接近）标准 CSS 代码，这意味着（1）您的代码在浏览器之间更加一致，因此更易于维护，以及（2）您不需要学习可怕的`-ms-filter`语法。

`-ms-filter`因此，您将得到如下所示的一行，而不是代码：

```
-sand-transform: rotate(-45deg); 
```

除了`rotate`，CSS Sandpaper 还在旧版 IE 中实现了多种其他 CSS3 效果，这使它成为一个非常有用的工具。

希望有帮助。

# java - 获取分区和卷信息

> ID：15656139
> 
> 赞同：3
> 
> 时间：2013-03-27T10:04:02.177
> 
> 标签：java, disk-partitioning

有没有办法只使用 Java 库来获取磁盘分区和卷信息？我还需要删除的文件信息。磁盘格式化为 FAT-16 并具有标准 MBR。

我需要以下信息：

a)**分区信息**- 显示磁盘上的分区数量，并为每个分区显示起始扇区、分区大小和文件系统类型。

b)**卷信息**——仅对于第一个分区，显示每个簇的扇区数、FAT 区域的大小、根目录的大小以及簇#2 的扇区地址。

c)**已删除文件信息**- 对于卷根目录中的第一个已删除文件，显示该文件的名称和大小，以及第一个簇的编号。显示该文件内容的前 16 个字符（假设它是一个简单的文本文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:09:05.473

如果您需要[在 Java 中获取文件系统详细信息，请](http://littletutorials.com/2008/03/10/getting-file-system-details-in-java/)尝试以下操作：

```
import javax.swing.*;
import java.awt.*;
import java.awt.Color;
import java.awt.event.*;
import java.io.File;
import javax.swing.filechooser.FileSystemView;

public class Main {

    public static void main(String[] args) {

        System.out.println("File system roots returned byFileSystemView.getFileSystemView():");
        FileSystemView fsv = FileSystemView.getFileSystemView();
        File[] roots = fsv.getRoots();
        for (int i = 0; i < roots.length; i++) {
            System.out.println("Root: " + roots[i]);
        }

        System.out.println("Home directory: " + fsv.getHomeDirectory());

        System.out.println("File system roots returned by File.listRoots():");
        File[] f = File.listRoots();
        for (int i = 0; i < f.length; i++) {
            System.out.println("Drive: " + f[i]);
            System.out.println("Display name: " + fsv.getSystemDisplayName(f[i]));
            System.out.println("Is drive: " + fsv.isDrive(f[i]));
            System.out.println("Is floppy: " + fsv.isFloppyDrive(f[i]));
            System.out.println("Readable: " + f[i].canRead());
            System.out.println("Writable: " + f[i].canWrite());
            System.out.println("Total space: " + f[i].getTotalSpace());
            System.out.println("Usable space: " + f[i].getUsableSpace());
        }
    }
} 
```

[**从这个答案**](https://stackoverflow.com/a/9441330/1743852)中引用：

> 使用JNA，你可以调用Win32 Kernel32的GetVolumeInformation()来获取接收文件系统名称的lpFileSystemNameBuffer参数，例如FAT文件系统或NTFS文件系统

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-02-04T18:38:18.857

您可以获得以 GB 或 MB 为单位的分区大小

> 长GB=1024 * 1024 * 1024；

除以分区的实际大小 System.out.println("总空间：" + f[i].getTotalSpace()/gb+"GB"); System.out.println("可用空间：" + f[i].getUsableSpace()/gb+"GB");

# jquery - phonegap zoom in 不能滑动到缩放的其他部分

> ID：15656149
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:04:23.897
> 
> 标签：jquery, html, cordova, canvas

我添加了以下代码以启用我的 jquery 应用程序的缩放。

```
<meta name="viewport" content="user-scalable=yes" /> 
```

以下是我在正文中的代码：

```
<div id="header" data-theme="b" data-role="header">
      <h5>
            Book
      </h5>
</div>
<div data-role="content">
      <canvas id="myCanvas" width="300" height="400" style="border:1px solid #d3d3d3;">
</div> 
```

放大画布图片后，我无法滑动查看画布的其他部分。此外，似乎标题“书”也被放大了。如何解决滑动并保持标题不变的问题，而不受到缩放效果的影响？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:24:05.413

这是默认的缩放行为。

要修改它，首先将视口更改为

```
<meta name="viewport" content="user-scalable=no" /> 
```

有了这个，用户不能缩放。

现在您必须使用 javascript 处理您想要的元素的缩放。您必须使用 css3 检测`pinch gesture`（有用于此的库，例如[hammer.js](http://eightmedia.github.com/hammer.js/)），`transform scale`以根据手势使其更大 os 更小。并`drag gesture`用`transform translate`移动元素

或者你也可以试试[iScroll](http://cubiq.org/iscroll-4)，它有一个缩放选项，可以很好地捏/缩放/拖动

# android - 如何检查Edititext中输入的字符？

> ID：15656151
> 
> 赞同：1
> 
> 时间：2013-03-27T10:04:26.187
> 
> 标签：android, validation, android-edittext

我有在 EditText 中输入电话号码的规定。我想确保用户以 +91+电话号码的格式输入电话号码。即，如果用户输入第一个字符，请检查它是否为“+”，然后添加到EditText else not.like this 我想检查前3个字符。如何做到这一点？

```
editText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
                String phNum = charSequence.toString();
                if(phNum.trim() .length() > 0 ){
                    int length = phNum.trim().length();
                    switch (length) {
                    case 1:
                        if(phNum.substring(0) != null && !phNum.substring(0).equals("+")){
                            editText.setText("");
                        }
                        break;
                    case 2:
                        if(phNum.substring(0,2) != null && !phNum.substring(0,2).equals("+9")){
                            editText.setText(phNum.substring(0,1));
                        }
                        break;
                    case 3:
                        if(phNum.substring(0,3) != null && !phNum.substring(0,3).equals("+91")){
                            editText.setText(phNum.substring(0,2));
                        }
                        break;

                    default:
                        break;
                    }
                    Toast.makeText(CallFilterActivity.this, "Enter +91 before number", Toast.LENGTH_SHORT).show();
                }

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {

            }
        }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:09:06.583

你可以使用`TextWatcher`监听器。例如。

```
editText.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {
            if(isFirstCharacter){
              //check if the character is + and add
             }else{

             }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:10:32.263

```
Use something like this:

editText.addTextChangedListener(this);  
@Override
public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub
}
@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // TODO Auto-generated method stug
}
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub
}

Check for the entered character and then allow further typing or display an alert. 
```

# javascript - 根据输入设置jQuery datepicker minDate

> ID：15656152
> 
> 赞同：2
> 
> 时间：2013-03-27T10:04:33.270
> 
> 标签：javascript, jquery, datepicker

`minDate`我正在尝试根据单选按钮的值设置 jQuery 日期选择器。

当我尝试编写返回字符串的函数时，我的 JavaScript 不断崩溃。关于为什么这不起作用的任何想法？

```
$("#datepicker").datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "-35:+0",
    dateFormat: "yy-mm-dd",
    minDate: function() {
        var str = "-35Y";
        if($("#inputfield").val() == "value") {
            str = "-33Y";
        }
        return str;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:16:57.207

# [jsFiddle](http://jsfiddle.net/mohammadAdil/FPRrr/)

这很好......你需要确保你有`inputfield`一个`value`

```
 <input type='text' id='datepicker'></div>
 <input type='text' value='value' id='inputfield'>

$("#datepicker").datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "-35:+0",
    dateFormat: "yy-mm-dd",
    minDate:mdate()
});

function mdate(){
        var str = "-35Y";
        if($("#inputfield").val() == "value"){
            str = "-33Y";
        }
        return str;
} 
```

*   编辑：*

    `$('#inputfield').on('change',function(){ $('#datepicker').datepicker('option', 'minDate', mdate()); });`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:49:42.630

该选项[`minDate`](http://api.jqueryui.com/datepicker/#option-minDate)需要一个**值**，而不是一个**函数**。`minDate`每当您的单选按钮的选择发生变化时，日期选择器不会自动更新 的值。

如果您希望在单选按钮选择更改时更改日期选择器的最小日期，那么您必须明确对此进行编程。大致如下：

```
$('[name=myradiogroup]').change(function () {
    var newMininumDate = /*insert logic here*/;
    $('#datepicker').datepicker('option', 'minDate', newMininumDate);
}); 
```

见[http://api.jqueryui.com/datepicker/#method-option](http://api.jqueryui.com/datepicker/#method-option)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T05:50:45.407

这对我有用：

```
$("#datepicker").datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "-35:+0",
    dateFormat: "yy-mm-dd",
    minDate: $("#inputfield").val()
}); 
```

# dependency-injection - Scalatest 跨多个测试套件共享服务实例

> ID：15656154
> 
> 赞同：3
> 
> 时间：2013-03-27T10:04:46.883
> 
> 标签：dependency-injection, fixtures, scalatest

我有 FlatSpec 测试类，需要对一些夹具数据使用 REST 服务。当一次运行所有测试时，我真的只想实例化一次 REST 客户端，因为它可能非常昂贵。当我在我的 IDE 中运行时，我该如何解决这个问题，并且我还能让它运行一个测试类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T17:35:15.643

**1.使用模拟：**

我建议您在尝试测试 REST 服务时**使用**某种模拟。您可以尝试例如 scala-mock。创建模拟服务不消耗时间/CPU，因此您可以在所有测试中创建模拟并且不需要共享它们。看：

```
trait MyRestService {
  def get(): String
}

class MyOtherService(val myRestService: MyRestService) {
  def addParentheses = s"""(${myRestService.getClass()})"""
}

import org.scalamock.scalatest.MockFactory

class MySpec extends FreeSpec with MockFactory {

  "test1 " in {
    // create mock rest service and define it's behaviour
    val myRestService = mock[MyRestService]
    val myOtherService = new MyOtherService(myRestService)
    inAnyOrder {
      (myRestService.get _).expects().returning("ABC")
    }

    //now it's ready, you can use it
    assert(myOtherService.addParentheses === "(ABC)")
  }
} 
```

**2.或者使用共享灯具：**

如果您仍想使用 REST 服务的实际实现并仅创建一个实例，然后使用以下方法与一些测试条件共享它：

*   get-fixture 方法 => 当您在多个测试中需要相同的可变夹具对象时使用它，并且不需要在之后清理。

*   withFixture(OneArgTest) => 当所有或大多数测试需要相同的固定装置时使用，这些固定装置必须在之后清理。

有关更多详细信息和代码示例，请参阅[http://www.scalatest.org/user_guide/sharing_fixtures#loanFixtureMethods](http://www.scalatest.org/user_guide/sharing_fixtures#loanFixtureMethods)。

如果您想针对多个套件共享相同的夹具，请使用*org.scalatest.Suites*和*@DoNotDiscover*注释（这些至少需要 scalatest-2.0.RC1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T09:12:33.377

Pawel 的最后评论很合适。通过使用 BeforaAndAfterAll 而不是 Suites 从 Suite 继承会更容易。

```
import com.typesafe.config.ConfigFactory
import com.google.inject.Guice
import org.scalatest.{BeforeAndAfterAll, Suite}
import net.codingwell.scalaguice.InjectorExtensions.ScalaInjector

class EndToEndSuite extends Suite with BeforeAndAfterAll {

    private val injector = {
        val config = ConfigFactory.load
        val module = new AppModule(config) // your module here
        new ScalaInjector(Guice.createInjector(module))
    }

    override def afterAll {
        // your shutdown if needed
    }

    override val nestedSuites = collection.immutable.IndexedSeq(
        injector.instance[YourTest1],
        injector.instance[YourTest2] //...
    )
} 
```

# php - 如何关联 2 个下拉列表并在第 2 个下拉列表中加载与第 1 个相关的数据

> ID：15656155
> 
> 赞同：0
> 
> 时间：2013-03-27T10:04:59.113
> 
> 标签：php, drop-down-menu

我有两个下拉列表，一个用于部门，另一个用于产品。根据部门，我想在 Products.ie 中加载数据，而不是加载下拉列表中的每个产品，我想加载与所选部门相关的产品。

```
<select name="Division" id="division">
<option value='1'>Div1</option>
<option value='2'>Div3</option>
<option value='3'>Div3</option>
<option value='4'>Div4</option>
</select>
<select name="Products" id="product">
<option value='<?php echo $pid ?>' rel='1'>Prod1</option>
<option value='<?php echo $pid ?>' rel='1'>Prod2</option>
<option value='<?php echo $pid ?>' rel='2'>Prod3</option>
<option value='<?php echo $pid ?>' rel='3'>Prod4</option>
<option value='<?php echo $pid ?>' rel='3'>Prod5</option>
<option value='<?php echo $pid ?>' rel='3'>Prod6</option>
</select> 
```

有没有办法使用 PHP 和 jquery。感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:08:19.813

您可以添加**onChange**事件，将数据发布回后端并获取第二个下拉列表的值。

就像是

```
$('#division').change(function(){
    $.post("myPhpScript.php",{"divisionId":$('#division').val()}, function(data){
         $.each(data, function(i, opt){
              var elem = $('<option/>', { value : opt["value"], html: opt["label"] });
              $('#product').append(elem);
         });
    }
}); 
```

在 php 中，您将获得包含下拉列表值的 JSONObject

```
{"divisionId":$('#division').val()} 
```

并据此获取您的数据并返回包含新值的 JSONObjects 的 JSONArray。

```
[ { "value":"prod1", "label":"Product 1" }, { "value":"prod2", "label":"Product 2" } ] 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:13:10.950

将[onchange](http://api.jquery.com/change/)事件添加到第一个选择字段，其中包含一个[Ajax](http://api.jquery.com/jQuery.ajax/)请求以获取新选择字段的数据。

另一种方法是隐藏非活动选择字段并在触发 onchange 时显示它们。这更静态。

# android - 使用 mp4parser 库从电影中剪切多个剪辑的问题

> ID：15656158
> 
> 赞同：5
> 
> 时间：2013-03-27T10:05:21.450
> 
> 标签：android, mp4parser

我正在使用 mp4parser 库从录制的视频中剪切多个剪辑。如果我从视频中剪切一部分，它工作正常。但是当我尝试从视频中剪切多个剪辑时，只有第一个剪辑是正确的。其他的只有 0 或 1 秒。以下是我的代码：

```
import android.app.ProgressDialog;
import android.content.Context;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.widget.Toast;

import com.coremedia.iso.IsoFile;
import com.coremedia.iso.boxes.TimeToSampleBox;
import com.googlecode.mp4parser.authoring.Movie;
import com.googlecode.mp4parser.authoring.Track;
import com.googlecode.mp4parser.authoring.builder.DefaultMp4Builder;
import com.googlecode.mp4parser.authoring.container.mp4.MovieCreator;
import com.googlecode.mp4parser.authoring.tracks.CroppedTrack;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.channels.FileChannel;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Date;
import java.util.LinkedList;
import java.util.List;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import uk.org.humanfocus.hfi.Beans.TrimPoint;
import uk.org.humanfocus.hfi.Utils.Constants;
import uk.org.humanfocus.hfi.Utils.SimpleThreadFactory;
import uk.org.humanfocus.hfi.Utils.Ut;

/**
 * Shortens/Crops a track
 */
public class ShortenExample {

    private static final String TAG = "ShortenExample";
    private final Context mCxt;
    private ExecutorService mThreadExecutor = null;
    private SimpleInvalidationHandler mHandler;
    private ProgressDialog mProgressDialog;
    String filePath;
    ArrayList<TrimPoint> mTrimPoints;
    int videoLength;
    ArrayList<String> trimVideos;
    private class SimpleInvalidationHandler extends Handler {

        @Override
        public void handleMessage(final Message msg) {
            switch (msg.what) {
            case R.id.shorten:
                mProgressDialog.dismiss();

                if (msg.arg1 == 0)
                    Toast.makeText(mCxt,
                            mCxt.getString(R.string.message_error) + " " + (String) msg.obj,
                            Toast.LENGTH_LONG).show();
                else
                    Toast.makeText(mCxt,
                            mCxt.getString(R.string.message_shortened) + " " + (String) msg.obj,
                            Toast.LENGTH_LONG).show();
                break;
            }
        }
    }

    public ShortenExample(Context context) {
        mCxt = context;
        mHandler = new SimpleInvalidationHandler();
        //mProgressDialog = new ProgressDialog(mCxt);
        //mProgressDialog.setMessage("Wait Saving..");
        //mProgressDialog.setCancelable(false);
    }

    public void shorten(String filePath,ArrayList<TrimPoint> trimPoints, int endTime) {
        trimVideos = new ArrayList<String>();
        this.filePath = filePath;
        this.videoLength = endTime;
        this.mTrimPoints = trimPoints;
        Log.d(Constants.TAG,"End Time: "+endTime+" Trim Points: "+mTrimPoints.size());
        for (int i=0;i<trimPoints.size();i++){
            TrimPoint point = trimPoints.get(i);
            int start=0;
            int end = 0;
            if(point.getTime()-5<0){
                start = 0;
            }else{
                start = point.getTime()-5;
            }

            if(point.getTime()+5>videoLength){
                end = videoLength-1;
            }else {
                end = point.getTime() + 5;
            }
            Log.d(Constants.TAG,"Clip: "+start+" : "+end);
            doShorten(start,end);   
        }
        Log.d(Constants.TAG,"Done: "+trimVideos.size());
    }

    private void doShorten(final int _startTime, final int _endTime) {
        //mProgressDialog = Ut.ShowWaitDialog(mCxt, 0);

        //mProgressDialog.show();

        if(mThreadExecutor == null)
            mThreadExecutor = Executors.newSingleThreadExecutor(new SimpleThreadFactory("doShorten"));

        //this.mThreadExecutor.execute(new Runnable() {
        //  public void run() {
                try {
                    File folder = Ut.getTestMp4ParserVideosDir(mCxt);
                    //File folder = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM),"HFVideos"+File.separator+"TEMP");
                    //Log.d(Constants.TAG, folder.toString());
                    if (!folder.exists()) {
                        Log.d(TAG, "failed to create directory");
                    }

                    //Movie movie = new MovieCreator().build(new RandomAccessFile("/home/sannies/suckerpunch-distantplanet_h1080p/suckerpunch-distantplanet_h1080p.mov", "r").getChannel());
//                  Movie movie = MovieCreator.build(new FileInputStream("/home/sannies/CSI.S13E02.HDTV.x264-LOL.mp4").getChannel());
                    Movie movie = MovieCreator.build(new FileInputStream(new File(filePath)).getChannel());
                    //Log.d(Constants.TAG,"Movie: "+movie.toString());
                    List<Track> tracks = movie.getTracks();
                    movie.setTracks(new LinkedList<Track>());
                    // remove all tracks we will create new tracks from the old

                    double startTime = _startTime;
                    double endTime = _endTime;//(double) getDuration(tracks.get(0)) / tracks.get(0).getTrackMetaData().getTimescale();

                    boolean timeCorrected = false;

                    // Here we try to find a track that has sync samples. Since we can only start decoding
                    // at such a sample we SHOULD make sure that the start of the new fragment is exactly
                    // such a frame
                    for (Track track : tracks) {
                        if (track.getSyncSamples() != null && track.getSyncSamples().length > 0) {
                            if (timeCorrected) {
                                // This exception here could be a false positive in case we have multiple tracks
                                // with sync samples at exactly the same positions. E.g. a single movie containing
                                // multiple qualities of the same video (Microsoft Smooth Streaming file)

                                throw new RuntimeException("The startTime has already been corrected by another track with SyncSample. Not Supported.");
                            }
                            startTime = correctTimeToSyncSample(track, startTime, false);
                            endTime = correctTimeToSyncSample(track, endTime, true);
                            timeCorrected = true;
                        }
                    }

                    for (Track track : tracks) {
                        long currentSample = 0;
                        double currentTime = 0;
                        long startSample = -1;
                        long endSample = -1;

                        for (int i = 0; i < track.getDecodingTimeEntries().size(); i++) {
                            TimeToSampleBox.Entry entry = track.getDecodingTimeEntries().get(i);
                            for (int j = 0; j < entry.getCount(); j++) {
                                // entry.getDelta() is the amount of time the current sample covers.

                                if (currentTime <= startTime) {
                                    // current sample is still before the new starttime
                                    startSample = currentSample;
                                }
                                if (currentTime <= endTime) {
                                    // current sample is after the new start time and still before the new endtime
                                    endSample = currentSample;
                                } else {
                                    // current sample is after the end of the cropped video
                                    break;
                                }
                                currentTime += (double) entry.getDelta() / (double) track.getTrackMetaData().getTimescale();
                                currentSample++;
                            }
                        }
                        movie.addTrack(new CroppedTrack(track, startSample, endSample));
                    }
                    long start1 = System.currentTimeMillis();
                    IsoFile out = new DefaultMp4Builder().build(movie);
                    long start2 = System.currentTimeMillis();

//                  FileOutputStream fos = new FileOutputStream(String.format("output-%f-%f.mp4", startTime, endTime));
                    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
                    String filename = folder.getPath() + File.separator + String.format("TMP4_APP_OUT-%f-%f", startTime, endTime) + "_" + timeStamp + ".mp4";
                    trimVideos.add(filename);
                    FileOutputStream fos = new FileOutputStream(filename);

                    FileChannel fc = fos.getChannel();
                    out.getBox(fc);
                    fc.close();
                    fos.close();
                    long start3 = System.currentTimeMillis();
                    System.err.println("Building IsoFile took : " + (start2 - start1) + "ms");
                    System.err.println("Writing IsoFile took  : " + (start3 - start2) + "ms");
                    System.err.println("Writing IsoFile speed : " + (new File(String.format("TMP4_APP_OUT-%f-%f", startTime, endTime)).length() / (start3 - start2) / 1000) + "MB/s");

                    Message.obtain(mHandler, R.id.shorten, 1, 0, filename).sendToTarget();
                } catch (FileNotFoundException e) {
                    Message.obtain(mHandler, R.id.shorten, 0, 0, e.getMessage()).sendToTarget();
                    e.printStackTrace();
                } catch (IOException e) {
                    Message.obtain(mHandler, R.id.shorten, 0, 0, e.getMessage()).sendToTarget();
                    e.printStackTrace();
                }
                //mProgressDialog.dismiss();
        //  }
        //});

    }

    protected static long getDuration(Track track) {
        long duration = 0;
        for (TimeToSampleBox.Entry entry : track.getDecodingTimeEntries()) {
            duration += entry.getCount() * entry.getDelta();
        }
        return duration;
    }

    private static double correctTimeToSyncSample(Track track, double cutHere, boolean next) {
        double[] timeOfSyncSamples = new double[track.getSyncSamples().length];
        long currentSample = 0;
        double currentTime = 0;
        for (int i = 0; i < track.getDecodingTimeEntries().size(); i++) {
            TimeToSampleBox.Entry entry = track.getDecodingTimeEntries().get(i);
            for (int j = 0; j < entry.getCount(); j++) {
                if (Arrays.binarySearch(track.getSyncSamples(), currentSample + 1) >= 0) {
                    // samples always start with 1 but we start with zero therefore +1
                    timeOfSyncSamples[Arrays.binarySearch(track.getSyncSamples(), currentSample + 1)] = currentTime;
                }
                currentTime += (double) entry.getDelta() / (double) track.getTrackMetaData().getTimescale();
                currentSample++;
            }
        }
        double previous = 0;
        for (double timeOfSyncSample : timeOfSyncSamples) {
            if (timeOfSyncSample > cutHere) {
                if (next) {
                    return timeOfSyncSample;
                } else {
                    return previous;
                }
            }
            previous = timeOfSyncSample;
        }
        return timeOfSyncSamples[timeOfSyncSamples.length - 1];
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T07:18:29.740

问题仅在模拟器中。当我们在模拟器中录制视频时，它记录的秒数少于实际时间。在实际设备上工作的代码很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T08:03:15.563

顺便说一句，对于以秒为单位的持续时间，您需要除以时间刻度。我发现条目（或样本）计数在相同持续时间的音频和视频轨道之间有所不同。但我是个菜鸟，别听我的。

```
protected static double getDuration(Track track) {
    double duration = 0;
    for (TimeToSampleBox.Entry entry : track.getDecodingTimeEntries()) {
        duration += entry.getCount() * entry.getDelta() / (double) track.getTrackMetaData().getTimescale();
    }
    return duration;
} 
```

# css - 三个 div 未正确对齐

> ID：15656159
> 
> 赞同：2
> 
> 时间：2013-03-27T10:05:21.837
> 
> 标签：css

我在**垂直**对齐div时遇到问题，应该是什么问题？

这是我的html代码

```
 <div class="recentProfiles">
<div class="profiles" id="profile1">
</div>
<div class="profiles" id="profile2">
</div>
<div class="profiles" id="profile3">
</div>
</div> 
```

css

```
.recentProfiles
{
width:950px;
height:200px;
border:2px dotted green;
margin-left:20px;
margin-top:10px;
} 
.profiles
{
width:300px;
height:190px;
border:2px dotted black;
}
#profile1
{
float:left;
clear:both;
position:relative;
margin-left:5px;
margin-top:5px;
 }
#profile2
{
position:relative;
margin-left:310px;
margin-top:5px;    
}
#profile3
{
position:relative;
margin-left:620px;
margin-top:5px;
} 
```

我希望三个 div 在父级内部垂直对齐，这是[演示](http://codepen.io/yoyo/pen/AvJqI)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:12:27.220

我不确定为什么你需要这么多冗余代码来实现你所描述的，只需执行以下操作：

```
.recentProfiles
{
    width:300px;
    border:2px dotted green;
    margin-left:20px;
    margin-top:10px;
}

.profiles
{
    width:300px;
    height:190px;
    border:2px dotted black;
} 
```

演示：http: [//jsfiddle.net/VvqXF/](http://jsfiddle.net/VvqXF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:09:22.663

尝试`float:left`在`class`配置文件上使用，然后`margin`在 profile1、profile2、profile3 上不使用

工作示例：http: [//jsfiddle.net/rK38V/](http://jsfiddle.net/rK38V/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:09:57.490

让所有框向左浮动 ( `float: left`) 并删除所有边距属性，如下所示：http: [//jsfiddle.net/2ABmU/](http://jsfiddle.net/2ABmU/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:09:57.783

你对浮动的想法是错误的。这是新代码：[http ://cdpn.io/AvJqI](http://cdpn.io/AvJqI)

**HTML**

```
 <div class="recentProfiles">

    <div class="profiles" id="profile1">
    </div>
    <div class="profiles" id="profile2">
    </div>
    <div class="profiles" id="profile3">
    </div>
    <div class="floatClear"></div>
 </div> 
```

**CSS**

```
.recentProfiles
{
width:950px;
height:200px;
border:2px dotted green;
margin-left:20px;
margin-top:10px;

}
.profiles
{
width:300px;
height:190px;
border:2px dotted black;

}
#profile1
{
float:left;
position:relative;
margin-left:5px;
margin-top:5px;

}
#profile2
{
float:left;
position:relative;
margin-left: 10px;
margin-top:5px;

}
#profile3
{
float:left;
position:relative;
margin-left: 10px;
margin-top:5px;
}

.floatClear {
  clear: both;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T10:10:10.793

那是因为你的利润。如果您`clear:both`起飞`profile1`然后添加`float: left`到所有配置文件中，则取消这些边距。

演示：http: [//jsfiddle.net/WC5gT/](http://jsfiddle.net/WC5gT/)

# android - 意图数据传递错误

> ID：15656160
> 
> 赞同：0
> 
> 时间：2013-03-27T10:05:25.777
> 
> 标签：android, android-intent

我正在尝试使用意图在 android 应用程序中将用户输入从一个页面传递到另一个页面。应用程序中有一个按钮接收用户输入，然后在单击事件后将其发送到另一个页面。程序如下所示：

## MainActivity.java

```
public class MainActivity extends Activity{   EditText sendData;
Button toIntent;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    sendData=(EditText)findViewById(R.id.sendData);
    toIntent=(Button)findViewById(R.id.toIntent);
    toIntent.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent i = new Intent(MainActivity.this, Activity2.class);
            String toSend = sendData.getText().toString();
            i.putExtra("Display", toSend);
            startActivity(i);
            }
    });
} 
```

## Activity2.java

公共类 Activity2 扩展 Activity {

```
TextView act2;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity2);
    String defaultName = "";

    Intent i2 = getIntent();
    Bundle extras = i2.getExtras();
    if(extras!=null)
    {
        defaultName=extras.getString("Display");
        act2.setText(defaultName);
    }

    }

} 
```

不断弹出的错误是：

> 03-27 07:34:34.554: E/AndroidRuntime(3058): 致命异常: main 03-27 07:34:34.554: E/AndroidRuntime(3058): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.intentslinkin/com.example.intentslinkin.Activity2}: java.lang.NullPointerException 03-27 07:34:34.554: E/AndroidRuntime(3058): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180) 03 -27 07:34:34.554: E/AndroidRuntime(3058): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 03-27 07:34:34.554: E/AndroidRuntime(3058): 在 android.app .ActivityThread.access$600(ActivityThread.java:141) 03-27 07:34:34.554: E/AndroidRuntime(3058): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 03-27 07: 34:34.554: E/AndroidRuntime(3058): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-27 07:34:34.554: E/AndroidRuntime(3058): 在 android.os.Looper.loop(Looper.java:137) 03-27 07:34:34.554: E/AndroidRuntime(3058): 在android.app.ActivityThread.main(ActivityThread.java:5041) 03-27 07:34:34.554: E/AndroidRuntime(3058): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-27 07:34 :34.554: E/AndroidRuntime(3058): at java.lang.reflect.Method.invoke(Method.java:511) 03-27 07:34:34.554: E/AndroidRuntime(3058): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 03-27 07:34:34.554: E/AndroidRuntime(3058): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 03 -27 07:34:34.554: E/AndroidRuntime(3058): at dalvik.system.NativeStart.main(Native Method) 03-27 07:34:34.554: E/AndroidRuntime(3058): Caused by: java.lang. NullPointerException 03-27 07:34:34.554:E/AndroidRuntime(3058): 在 com.example.intentslinkin.Activity2.onCreate(Activity2.java:23) 03-27 07:34:34.554: E/AndroidRuntime(3058): 在 android.app.Activity.performCreate(Activity .java:5104) 03-27 07:34:34.554: E/AndroidRuntime(3058): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 03-27 07:34:34.554: E/AndroidRuntime(3058 ): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 03-27 07:34:34.554: E/AndroidRuntime(3058): ... 11 更多在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 03-27 07:34:34.554: E/AndroidRuntime(3058): ... 11 更多在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 03-27 07:34:34.554: E/AndroidRuntime(3058): ... 11 更多

有人请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:15:37.273

你没有初始化你的 TextView (NullPointerException)

```
TextView act2; 
```

# sql - 选择最大值

> ID：15656165
> 
> 赞同：1
> 
> 时间：2013-03-27T10:05:46.383
> 
> 标签：sql, sql-server, max

我创建了以下查询来检索我的律师事务所的各种客户和事项信息。- 本质上，我们需要查看过去三年谁为哪些客户处理了哪些问题。

除了事务创建日期之外，我们现在还被要求检索交易日期 - TT.TRAN_DATE -（计费小时数），这将使我们能够以更高的准确度查看最近谁在做某事。问题是每个客户/事项/收费者会有多个交易日期，我们只需要查看最近的交易日期。

不幸的是，我很挣扎，时间很短。有人能告诉我如何修改上述查询，以便为每个客户/事项/收费者返回最大交易日期吗？日期也应与现有的“事项创建日期”字段格式相同。

在此先感谢，加文

```
SELECT DISTINCT HC.CLIENT_NAME AS [Client Name],
  HC.CLIENT_CODE AS [Client Code],
  HM.MATTER_CODE AS [Matter Code], 
  HM.CLNT_MATT_CODE AS [Client Matter Code],
  convert(varchar,HM.OPEN_DATE,103) AS [Matter Creation Date],
  HP.EMPLOYEE_CODE AS [Fee Earner Code],
  HP.EMPLOYEE_NAME AS [Fee Earner Name],
  TT.TRAN_DATE AS [Transaction Date]
  FROM        HBM_MATTER HM  
  LEFT OUTER JOIN TAT_TIME TT 
        ON    HM.MATTER_UNO=TT.MATTER_UNO
  LEFT JOIN   HBM_CLIENT HC 
        ON    HM.CLIENT_UNO=HC.CLIENT_UNO 
  LEFT JOIN   HBM_PERSNL HP 
        ON    TT.TK_EMPL_UNO=HP.EMPL_UNO 
  WHERE             HM.INACTIVE='n' 
  AND         HM.STATUS_CODE <> 'CLOSE'
  AND         HP.INACTIVE = 'N'
  AND         TT.TRAN_DATE > dateadd(month,-36,getdate()) 
  ORDER BY    HC.CLIENT_CODE,   HM.MATTER_CODE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:18:15.317

假设 SQL Server 因为您没有指定，这是我的解决方案。我无法检查，但我认为应该没问题：

```
 WITH cte AS (SELECT DISTINCT 
      HC.CLIENT_NAME AS [Client Name]
      ,HC.CLIENT_CODE AS [Client Code]
      ,HM.MATTER_CODE AS [Matter Code]
      ,HM.CLNT_MATT_CODE AS [Client Matter Code]
      ,CONVERT(VARCHAR,HM.OPEN_DATE,103) AS [Matter Creation Date]
      ,HP.EMPLOYEE_CODE AS [Fee Earner Code]
      ,HP.EMPLOYEE_NAME AS [Fee Earner Name]
      ,TT.TRAN_DATE AS [Transaction Date]
      ,ROW_NUMBER() OVER(PARTITION BY HC.CLIENT_CODE, HM.MATTER_CODE, HP.EMPLOYEE_CODE 
                          ORDER BY TT.TRAN_DATE DESC) AS trans_order 
    FROM HBM_MATTER HM  
      LEFT OUTER JOIN TAT_TIME TT ON HM.MATTER_UNO=TT.MATTER_UNO
      LEFT OUTER JOIN HBM_CLIENT HC ON HM.CLIENT_UNO=HC.CLIENT_UNO 
      LEFT OUTER JOIN HBM_PERSNL HP ON TT.TK_EMPL_UNO=HP.EMPL_UNO 
    WHERE HM.INACTIVE = 'n' 
      AND HM.STATUS_CODE <> 'CLOSE'
      AND HP.INACTIVE = 'N'
      AND TT.TRAN_DATE > DATEADD(MONTH, -36, GETDATE()) 
   )
    SELECT * FROM cte 
    WHERE trans_order = 1
     ORDER BY 
      CLIENT_CODE
      ,MATTER_CODE 
```

# python - 'RelationshipProperty' 对象在 sqlalchemy 中没有属性 'c' 错误

> ID：15656171
> 
> 赞同：3
> 
> 时间：2013-03-27T10:06:02.930
> 
> 标签：python, orm, sqlalchemy, flask-sqlalchemy

我在为旧版 MSSQL 数据库实施 SQLalchemy 时遇到了很多麻烦。这是一个很大的现有数据库，所以我想使用[sqlautocode](https://code.google.com/p/sqlautocode/)为我生成文件，因为使用自动加载来反映数据库需要太长时间。

第一个问题是 sqlautocode 似乎不再适用于 SQLalchemy 0.8。我确实仍然有早期版本的现有输出，所以我想我会使用它，只是为了测试。

现在 sqlautocode 输出“[经典映射](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html#classical-mapping)”，这并不是真正的问题，但是每当我尝试使用外键时，`'RelationshipProperty' object has no attribute 'c'`都会出现。SQLalchemy 库深处的某个错误。

所以接下来，我尝试跳过 sqlautocode 并自己编写类和关系，使用 SQLalchemy 0.8 的[这段代码](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#building-a-relationship)。我使用了两个示例表，我得到了完全相同的错误。然后我注释掉了大部分列，所有的关系，我 - 仍然 - 得到错误。

下面是我的代码：

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, ForeignKey
from sqlalchemy.orm import relationship, backref
from sqlalchemy.dialects.mssql import *

Base = declarative_base()

class PeopleMemberhip(Base):
    __tablename__ = 'people_memberships'

    ppl_mshp_id = Column(VARCHAR(length=36), primary_key=True, nullable=False)
    ppl_mshp_startdate = Column(DATETIME())
    ppl_mshp_enddate = Column(DATETIME())
    # ppl_mshp_pmsd_id = Column(VARCHAR(length=36), ForeignKey('paymentschedules.pmsd_id'))

    # paymentschedule = relationship("PaymentSchedule", backref=backref('people_memberships'))

    def __repr__(self):
        return "<people_membership('%s','%s')>" % (self.ppl_mshp_id, self.ppl_mshp_startdate)

class PaymentSchedule(Base):
    __tablename__ = 'paymentschedules'

    pmsd_id = Column(VARCHAR(length=36), primary_key=True, nullable=False)
    pmsd_name = Column(NVARCHAR(length=60))
    pmsd_startdate = Column(DATETIME())
    pmsd_enddate = Column(DATETIME())

    # paymentschedule = relationship("PaymentSchedule", backref=backref('people_memberships'))

    def __repr__(self):
        return "<paymentschedule('%s','%s')>" % (self.pmsd_id, self.pmsd_name) 
```

以及由此产生的错误：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\JetBrains\PyCharm 2.7\helpers\pydev\pydevd.py", line 1472, in <module>
    debugger.run(setup['file'], None, None)
  File "C:\Program Files (x86)\JetBrains\PyCharm 2.7\helpers\pydev\pydevd.py", line 1116, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "C:/Users/erik/workspace/flasktest/test.py", line 16, in <module>
    contract = db.session.query(PeopleMemberhip).filter_by(ppl_mshp_id='98ABD7E9-4CFF-4F7B-8537-8E46FD5C79D5').one()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\scoping.py", line 149, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\session.py", line 1105, in query
    return self._query_cls(entities, self, **kwargs)
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\query.py", line 115, in __init__
    self._set_entities(entities)
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\query.py", line 124, in _set_entities
    self._set_entity_selectables(self._entities)
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\query.py", line 157, in _set_entity_selectables
    ent.setup_entity(*d[entity])
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\query.py", line 2744, in setup_entity
    self._with_polymorphic = ext_info.with_polymorphic_mappers
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\util\langhelpers.py", line 582, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\mapper.py", line 1425, in _with_polymorphic_mappers
    configure_mappers()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\mapper.py", line 2106, in configure_mappers
    mapper._post_configure_properties()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\mapper.py", line 1242, in _post_configure_properties
    prop.init()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\interfaces.py", line 231, in init
    self.do_init()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\properties.py", line 1028, in do_init
    self._setup_join_conditions()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\properties.py", line 1102, in _setup_join_conditions
    can_be_synced_fn=self._columns_are_mapped
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\relationships.py", line 115, in __init__
    self._annotate_fks()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\relationships.py", line 311, in _annotate_fks
    self._annotate_present_fks()
  File "C:\Users\erik\workspace\flasktest\lib\site-packages\sqlalchemy\orm\relationships.py", line 331, in _annotate_present_fks
    secondarycols = util.column_set(self.secondary.c)
AttributeError: 'RelationshipProperty' object has no attribute 'c' 
```

我真的很茫然，感谢任何有关此错误的帮助，但如果有人可以提出一种不同的方法，可以使 SQLalchemy 与我们的旧版 MSSQL 数据库一起工作，它也是一个解决方案。

正如我所说，sqlautocode 似乎不再工作了，但也许我使用它的方式错误，或者可能有一个我不知道的替代工具。

埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:43:59.950

好吧，伙计们，我自己想通了。

我有几个我正在处理的文件，其中包含表定义（来自 sqlautocode 的输出）。一个被称为“database.py”，另一个被称为“model.py”，最后一个被称为“ORM.py”。

我有一个导入“model.py”的 test.py 文件。Model.py 是我在其中编写表定义的文件。但是 - test.py 页面也在从 Flask ( `from app import app, db`) 中导入数据库，并且在`__init__()`Flask 应用程序的功能中，Flask 仍在加载“ORM.py” .

所以一些对象来自 ORM.py，这是一个由 sqlautocode 生成的旧文件，而不是来自我正在试验的 model.py。

重命名 ORM.py 给了我一个线索。我用 Python 编写了一个非常简单的脚本，它遍历 MSSQL 表和列并为我生成一个 model.py。我现在专门加载该 model.py 文件，并且整个工作正常！

抱歉，如果有人花时间在这上面。希望它可以帮助有人用谷歌搜索同样的问题。

埃里克

# c++ - 改变程序成为服务？

> ID：15656173
> 
> 赞同：0
> 
> 时间：2013-03-27T10:06:06.433
> 
> 标签：c++, windows, visual-studio, service, client-server

我想创建一个可以作为服务运行的应用程序以及另一个可以与之通信的程序（在 c++ 中）。基本上我希望程序向服务发送消息，而服务只是将它们回显给程序

程序的示例输出将是这样的： *请输入您的消息：你好 接收来自服务器的响应：你好*

我有一个非常简单的 UDP 客户端服务器程序来执行此操作 - 服务器回显客户端发送的消息。**所以我的问题是我可以将服务器更改为服务并更改客户端以使其仍与服务通信吗？如果是这样，这是怎么做的？**

我以前从未使用过代码来创建服务，所以如果有人可以链接任何很棒的教程

这是我要更改的程序：服务器

```
 void InitWinsock()
{
    WSADATA wsaData;
    WSAStartup(MAKEWORD(2, 2), &wsaData);
}

int _tmain(int argc, _TCHAR* argv[])
{
    SOCKET socketS;

    InitWinsock();
    struct sockaddr_in local;
    struct sockaddr_in from;
    int fromlen = sizeof(from);
    local.sin_family = AF_INET;
    local.sin_port = htons(1234);
    local.sin_addr.s_addr = INADDR_ANY;

    socketS = socket(AF_INET,SOCK_DGRAM,0);
    bind(socketS,(sockaddr*)&local,sizeof(local));
    while (1)
    {
        char buffer[1024];
        ZeroMemory(buffer, sizeof(buffer));
        printf("Waiting...\n");
        if (recvfrom(socketS,buffer,sizeof(buffer),0,(sockaddr*)&from,&fromlen)!=SOCKET_ERROR)
        {
            printf("Received message from %s: %s\n",inet_ntoa(from.sin_addr), buffer);
            sendto(socketS, buffer, sizeof(buffer), 0, (sockaddr*)&from, fromlen);
        }
        Sleep(500);
    }
    closesocket(socketS);

    return 0;
} 
```

客户：

```
void InitWinsock()
{
    WSADATA wsaData;
    WSAStartup(MAKEWORD(2, 2), &wsaData);
}

int _tmain(int argc, _TCHAR* argv[])
{
    SOCKET socketC;

    InitWinsock();
    struct sockaddr_in serverInfo;
    int len = sizeof(serverInfo);
    serverInfo.sin_family = AF_INET;
    serverInfo.sin_port = htons(1234);
    serverInfo.sin_addr.s_addr = inet_addr("127.0.0.1");

    socketC = socket(AF_INET,SOCK_DGRAM,0);
    while (1)
    {
        char buffer[1024];
        ZeroMemory(buffer, sizeof(buffer));
        printf("Please input your message: ");
        scanf("%s", buffer);
        if (strcmp(buffer,"exit") == 0)
            break;
        if (sendto(socketC, buffer, sizeof(buffer), 0, (sockaddr*)&serverInfo, len) != SOCKET_ERROR)
        {
            if (recvfrom(socketC, buffer, sizeof(buffer), 0, (sockaddr*)&serverInfo, &len) != SOCKET_ERROR)
            {
                printf("Receive response from server: %s\n", buffer);
            }
        }
    }
    closesocket(socketC);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:54:22.300

使用[服务示例](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540475%28v=vs.85%29.aspx)，如 sergmat 所说。使用 Svp.cpp 中的代码，并将其放入您的服务器。将 更新`SVCNAME`为您的服务名称。将代码放入您的代码`_tmain`并将其放入`SvcInit`所在位置的底部`TO_DO: Perform work until service stops`。取出`while`它下面的循环。

顺便说一句，您的服务器`Sleep(500)`在主循环中有一个。这是不必要的，因为`recv`无论如何服务器都会阻塞。

要终止服务，而不是使用`ghSvcStopEvent`，我只需将套接字句柄和一些`closing`标志设为全局，然后设置标志并在收到`SERVICE_CONTROL_STOP`信号时关闭套接字。

你会有更多的清理细节，但这不仅仅是让你开始......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:03:40.913

忘记更改代码，只需使用[srvany](http://support.microsoft.com/kb/137890/en-us)。

# android - 在eclipse中创建Android项目失败

> ID：15656174
> 
> 赞同：0
> 
> 时间：2013-03-27T10:06:07.770
> 
> 标签：android, eclipse, adt

我对 Android 开发非常陌生，当我尝试使用 ADT Bundle 完成最基本的[教程](http://developer.android.com/training/basics/firstapp/creating-project.html)时，我遇到了一个问题。按照步骤创建项目时，一切似乎都很好，直到向导的最后一页：

![在此处输入图像描述](../Images/1d62e2a0bb8f3370be093bab3f194a44.png)

当我单击完成时，项目出现在包资源管理器中，但向导没有关闭。单击错误日志中会显示以下错误：

![在此处输入图像描述](../Images/5c22359b4b5f003875257640c3026039.png) （“加载属性文件”错误没有 StackTraces；如果需要，我可以提供其他错误）

现在到生成的项目。这是空的，除了 a `proguard-project.txt`。

![在此处输入图像描述](../Images/931aab008541d8ba14d9f9c9f5ccb96d.png)

以下是我已经尝试过但到目前为止没有成功的事情：

*   重新安装 SDK
*   下载新的 ADT 包
*   重新安装 JDK
*   重启电脑
*   将ADT插件安装到正常版本的eclipse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:24:10.663

这个问题已经被问过了；你可以在这里找到一些你还没有尝试过的东西：

[无法加载 android 项目的属性文件](https://stackoverflow.com/questions/3288058/failed-to-load-properties-file-for-android-project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T02:38:33.257

尝试这个，

- 删除您的工作区文件夹，让 eclips 创建一个新文件夹

- 删除 C:\Users\"yourusername" 上的 .android 文件夹

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:24:03.980

你可以尝试一些事情：

*   右键项目 -> Android 工具 -> 修复项目属性

*   检查您是否设置了 ANDROID_SDK_HOME 系统环境变量。

*   删除整个工作区（首先备份）并使用相同的名称重新创建它。

*   删除 %USERPROFILE%/.android 下的 debug.keystore 文件。

# android-emulator - 当我们从一部安卓手机调用到另一部安卓手机时，如何找到所有中间的 Towers id？

> ID：15656179
> 
> 赞同：1
> 
> 时间：2013-03-27T10:06:34.437
> 
> 标签：android-emulator

在这里，我从一部 android 手机打电话到另一部。两者都是 GSM，我们将提供其他手机号码，如 1234567890，我必须找到所有中间塔 ID。我必须在调用手机上显示该信息（通过我们开发的应用程序）。

# highcharts - Highcharts 日期时间柱形图 - 区间数据

> ID：15656182
> 
> 赞同：2
> 
> 时间：2013-03-27T10:06:40.877
> 
> 标签：highcharts

所以我想知道，是否有可能将 x 轴上的日期时间值显示为间隔。

例如，我有 9:00 保存到数据库的数据，但如果选择了数据的每小时视图，这意味着数据是从 8:00 到 9:00 收集的，并且恰好在 9 点保存： 00\. 因此，当列在 x 轴值 9:00 上方呈现时，这是不正确的。它应该在“类别”9:00（从 8:00 到 9:00）呈现。

总而言之，我需要将 ONE 列放置在 8:00 和 9:00 之间，或者一般来说，在传递的给定日期时间值和少一个值（之前）的值之间。

是否可以将日期时间间隔传递给日期时间轴？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:18:01.730

我找到了答案。 [http://api.highcharts.com/highcharts#plotOptions.area.pointPlacement](http://api.highcharts.com/highcharts#plotOptions.area.pointPlacement)

设置为“between”的 pointPlacement 选项正是用于此目的。

我之前曾多次浏览过 Highchart 选项参考，但一定错过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:27:02.577

我建议使用 pointRange 选项：[http ://api.highcharts.com/highcharts#plotOptions.column.pointRange](http://api.highcharts.com/highcharts#plotOptions.column.pointRange)

使用您的示例，如果您将数据点设置为 8:30，并将 pointRange 设置为 1 小时，它将跨越从 8:00 到 9:00 的块

# teamcity - 如何从命令行运行的 Jetbrains dotCover 覆盖率报告中排除 xunit 测试程序集

> ID：15656183
> 
> 赞同：2
> 
> 时间：2013-03-27T10:06:42.790
> 
> 标签：teamcity, xunit, dotcover

我正在 TeamCity 上运行我的 CI 构建，并且试图让我的覆盖率报告排除我的测试 dll。这是我为可读性而格式化的 exec 命令。

我已经在所有团队城市代理上安装了用于 dotCover 2.0 的 xUnit contrib dll

```
dotCover.exe
    cover
    /TargetExecutable="Path/To/XUnit/Runner"
    /TargetArguments="My/Test/Assembly/Path"
    /Output=coverage.dcvr 
```

哪个有效并产生以下覆盖率报告

![我的报道报告](../Images/a1439d0886f55ed995dc38d48c930bf0.png) ![我的深度报道报告](../Images/815420cbb2d81d82bc7758885d0b1f5a.png)

正如您从第二张图片中看到的，我的 Web.Tests dll 包含在覆盖率报告中。我尝试了以下方法来过滤掉测试 dll

```
dotCover.exe
    cover
    /TargetExecutable="Path/To/XUnit/Runner"
    /TargetArguments="My/Test/Assembly/Path"
    /Output=coverage.dcvr
    /Filters=-:module=MyAssembly.Web.Tests;

/Filters=-:*.Tests
/Filters=-:MyAssembly.Web.Tests
/Filters=-:module=MyAssembly.Web.Tests 
```

这些在日志中生成以下 xml

```
 <DenyFilters>
    <Item>
        <AssemblyOrModuleFilter>MyAssembly.Web.Tests</AssemblyOrModuleFilter>            
        <ClassFilter>*</ClassFilter>
        <FunctionFilter>*</FunctionFilter>
    </Item>
 </DenyFilters> 
```

然而，这完全停止了任何报告

我正在使用 dotCover v2.0.425.72。

我想我可能在这里发现了 dotcover 和 xunit 的限制

* * *

相关Q

*   [如何使用 dotCover 从 TeamCity 覆盖中通过掩码 *.Tests.dll 排除程序集？](https://stackoverflow.com/questions/9256217/how-to-exclude-assemblies-by-mask-tests-dll-from-teamcity-coverage-with-dotcov)
*   [dotCover 排除代码仍显示在报告中](https://stackoverflow.com/questions/8167630/dotcover-excluded-code-still-show-up-in-report)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:52:41.383

当你写一个问题后不久就会找到答案的情况是多少......

没有过滤器会导致日志中出现以下 xml

```
<AllowFilters>
    <Item>
        <AssemblyOrModuleFilter>*</AssemblyOrModuleFilter>
        <ClassFilter>*</ClassFilter>
        <FunctionFilter>*</FunctionFilter>
    </Item>
</AllowFilters>
<DenyFilters /> 
```

在行中添加`/Filters=-:module=MyAssembly.Web.Tests`会更改 xml 以导致不报告任何内容，因为允许过滤器被杀死。

```
<AllowFilters />
<DenyFilters>
    <Item>
        <AssemblyOrModuleFilter>MyAssembly.Web.Tests</AssemblyOrModuleFilter>
        <ClassFilter>*</ClassFilter>
        <FunctionFilter>*</FunctionFilter>
    </Item>
</DenyFilters> 
```

所以修复是`/Filters=+:module=*;class=*;function=*;-:module=MyAssembly.Web.Tests;`给出以下xml

```
<AllowFilters>
    <Item>
        <AssemblyOrModuleFilter>*</AssemblyOrModuleFilter>
        <ClassFilter>*</ClassFilter>
        <FunctionFilter>*</FunctionFilter>
    </Item>
</AllowFilters>
<DenyFilters>
    <Item>
        <AssemblyOrModuleFilter>MyAssembly.Web.Tests</AssemblyOrModuleFilter>
        <ClassFilter>*</ClassFilter>
        <FunctionFilter>*</FunctionFilter>
    </Item>
</DenyFilters> 
```

什么鬼！

# android - 如何为 android avds 启用 open gl es

> ID：15656190
> 
> 赞同：0
> 
> 时间：2013-03-27T10:07:03.433
> 
> 标签：android, android-emulator, opengl-es-2.0, avd

根据我的果酱应用程序，我无法让我的 AVD 支持硬件渲染，它默认为其软件渲染器。

您如何检查您的 AVD 是否支持硬件渲染以及如何打开它？

也可能是我的新 gpu 吗？你的机器是否必须满足某些要求才能模拟open gl es 1.1+？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:47:25.243

我的问题是，当我拉出表面的末端时，它会损坏内存并导致我的应用程序无法在启用 GPU 的 AVD 上运行的错觉。

# c# - 对下拉列表进行排序

> ID：15656191
> 
> 赞同：2
> 
> 时间：2013-03-27T10:07:04.013
> 
> 标签：c#, database, entity-framework

我正在使用实体框架数据库，我想从表中填充我的下拉列表，但顺序正确。

现在我正在使用代码：

```
var databaseList = from p in db.TECHNICAL_SKILLS
                   where p.skill_type == "Database"
                   select new EmployeeTechnicalSkillInfo
                       {
                           TechnicalSkillId = p.technical_skill_id,
                           SkillType = p.skill_type,
                           SkillName = p.skill_name
                       };

        List<object> sDataValue = new List<object>();
        sDataValue.Add("- Select -");
        sDataValue.Remove("Other");

        foreach (var vData in databaseList)
        {
            sDataValue.Add(vData.SkillName);
        }

        sDataValue.Add("Other");

        DropDownListDB.DataSource = sDataValue.ToArray();
        DropDownListDB.DataBind(); 
```

这是**解决方案**

```
 var databaseList = from p in db.TECHNICAL_SKILLS
           where p.skill_type == "Database"
           orderby p.skill_name != "Other" descending, p.skill_name
           select new EmployeeTechnicalSkillInfo
               {
                   TechnicalSkillId = p.technical_skill_id,
                   SkillType = p.skill_type,
                   SkillName = p.skill_name
               }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:10:31.933

从列表中删除条目`-Select-`并将其作为第一项附加到您的`List<object>`：

```
List<object> sDataValue = new List<object>();
sDataValue.Add("-Select-");
foreach (var vData in databaseList){} 
```

我认为这将是最简单的方法。

**编辑**

那么你将使用`if/else`, 也许和

```
foreach (var vData in databaseList){} //fill your list
sDataValue.Add("-Other-"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:13:25.510

只需这样做：

像这样从 databaseList 中删除`-Select-`和删除：`Other`

```
var databaseList = from p in db.TECHNICAL_SKILLS
                   where p.skill_type == "Database"
                     && p.skill_name.ToLower() !="other"
                     && p.skill_name.ToLower() !="-select-"

                   select new EmployeeTechnicalSkillInfo
                       {
                           TechnicalSkillId = p.technical_skill_id,
                           SkillType = p.skill_type,
                           SkillName = p.skill_name
                       }; 
```

然后这样做：

```
DropDownListDB.DataSource = sDataValue.ToArray().OrderBy(s=>s);
DropDownListDB.Items.Insert(0, "-Select-");
DropDownListDB.Items.Add("Other"); 
```

如果您必须从数据库中带入 -Select- 和 Other 字段，将它们绑定到 DropDownList 然后删除它们并再次将它们插入到适当的位置并不昂贵。

您根本不会从数据库中选择这两行。它会更有效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:16:36.183

您可以在数据库中添加一个“section id”：0 表示“-Select-”，2 表示“Other”，1 表示其余部分。然后按 1) 部分 ID、2) 名称排序。

但最好根本不存储那个“-Select-”（它不代表有效值）并将其添加到数据绑定后的正确位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:38:07.280

您可以尝试使用带有布尔值的 orderby

```
orderby p.skill_name != "Other" descending, p.skill_name 
```

在您的代码中=>

```
var databaseList = from p in db.TECHNICAL_SKILLS
               where p.skill_type == "Database"
               orderby p.skill_name != "Other" descending, p.skill_name
               select new EmployeeTechnicalSkillInfo
                   {
                       TechnicalSkillId = p.technical_skill_id,
                       SkillType = p.skill_type,
                       SkillName = p.skill_name
                   };

    List<object> sDataValue = new List<object>();
    sDataValue.Add("- Select -");

    foreach (var vData in databaseList)
    {
        sDataValue.Add(vData.SkillName);
    }

    DropDownListDB.DataSource = sDataValue.ToArray();
    DropDownListDB.DataBind(); 
```

# jquery - 如果使用 jQuery 小于或大于某个数字，则隐藏/显示 div

> ID：15656193
> 
> 赞同：0
> 
> 时间：2013-03-27T10:07:13.857
> 
> 标签：jquery, show-hide

如果小于或大于 20000，我正在尝试让我们 jQuery 隐藏或显示某些内容

这是我正在使用的表格元素。td.weight 使用自定义运费计算器动态填充。api返回的最大重量为20000磅，然后为零。

如果他们的计算重量超过 20000 磅或小于 20000 磅，我试图通过隐藏或显示 div 来通知用户

如果此输出显示 div.shipping-weight：

```
<td class="weight"> 20000 <small><em> lb's </em></small><br>
<div class="shipping-weight"><small>*Note: Up to 20,000 lbs max.  For shipping requirements over 20,000 lb's call our</small><br>
<small>PRICING HOTLINE: 1-877-444-444 </small>
</div>
</td> 
```

如果出现以下输出，则隐藏 div.shipping-weight：

```
<td class="weight"> 19456 <small><em> lb's </em></small><br>
<div class="shipping-weight"><small>*Note: Up to 20,000 lbs max.  For shipping requirements over 20,000 lb's call our</small><br>
<small>PRICING HOTLINE: 1-877-444-444 </small>
</div>
</td> 
```

这是我到目前为止所拥有的。

```
 $('td.weight').filter(function(index){
return parseInt(this.innerHTML) > 20000;
    }).show('.shipping-weight'); 
```

这是一个[jsfiddel](http://jsfiddle.net/fNsNj/1/)

*修订：

这似乎不会在我的 ajax 请求中触发，但适用于 jsfiddle。我正在使用 keyup 和 livequery 来发出请求。如下：

```
 $('.input-mini').keyup().livequery('change', function () {
                url = $(this.form).attr('action');
                data = $(this.form).serialize();
                $.post(url, data, function () {
                        $('#checkout').load('/store/checkout_table');
                        $('#checkout_form').attr('action', url);
    $('.weight').filter(function(index){
        var num = parseInt(this.firstChild.textContent);
        return num >= 20000;
    }).find('.shipping-weight').show();

            $.cookie('all_cookie', null);

                });
                return false;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:56:15.620

```
 $('.weight').filter(function () {
      var weight = parseInt(this.firstChild.textContent);
      if (weight >= 20000) {
        $('.shipping-weight').show();
      } else {
        $('.shipping-weight').hide();
      }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:23:27.907

[工作解决方案](http://jsfiddle.net/fNsNj/1/)：

```
$('.weight').filter(function(){
    var num = parseInt(this.firstChild.textContent);
    return num >= 20000;
}).find('.shipping-weight').show(); 
```

注意：`this.firstChild`是里面的第一个DOM节点`.weight`，比如text节点`" 19456 "`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:31:52.040

尝试这个

```
<table>
    <tr>
        <td class="weight"> <SPAN>**200230**</SPAN> <small><em> lb's </em></small><br>
            <div class="shipping-weight"><small>*Note: Up to 20,000 lbs max.  For shipping requirements over 20,000 lb's call our</small><br>
                <small>PRICING HOTLINE: 1-877-444-444 </small>
            </div>
        </td>
    </tr>
</table>

<script type='text/javascript'>
    $(document).ready(function() {
         var weight = parseInt($('td.weight span').html().replace(/\*/g, ''));
        if(weight >= 2000){ 
            $('div.shipping-weight').show();
        } else {
            $('div.shipping-weight').hide();
        }

    });
</script> 
```

# javascript - 将 EventListeners 添加到 gmail 发送按钮

> ID：15656195
> 
> 赞同：0
> 
> 时间：2013-03-27T10:07:20.907
> 
> 标签：javascript, google-chrome, google-chrome-extension, addeventlistener

我正在编写一个 Chrome 扩展程序，它将从您发送的每封电子邮件中提取信息并将其存储在电子表格中。我正在用 javascript 编写内容脚本。

我希望它在您单击发送按钮时开始提取信息，所以我显然需要像这样附加一个事件侦听器：

```
var el = document.getElementById("some_ID");
el.addEventListener('build', function(e){...}, false); 
```

但是，gmail 会动态地将 id 分配给页面的各种元素，因此我无法提前知道要为元素 id 输入什么。

我的问题是如何解决这个问题？我确信还有其他方法可以附加事件侦听器或获取“发送”按钮所在的 DOM 节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:22:07.380

如果您谈论的是撰写电子邮件时弹出的标准 gmail 对话框，您可以像这样遍历发送按钮：

```
document.querySelector('table .HE td div[role="button"][data-tooltip^="Send"]') 
```

或者

```
document.querySelectorAll('table .HE td div[role="button"][data-tooltip^="Send"]')[0] 
```

转到Gmail并单击撰写，然后您可以在控制台中输入上述内容，这将使您进入发送按钮。

如果用户切换到弹出窗口，这可能不起作用。
一般来说，这也可能非常脆弱。一旦gmail改变了他们显示对话框的方式，你也必须改变你的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T16:50:16.307

可以根据`data-tooltip`语言更改，我使用以下选择器

```
$("[role=dialog] table .HE td div[role=button]").first(); 
```

但它仅在创建新电子邮件时有效（不回复或转发）

这是另一种对我有用的方法：

```
$(".gU.Up div[role=button]"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-11T15:42:17.887

我正在开发一个类似的扩展。像您写的选择器有效，但问题是“发送”按钮仅在作曲家存在时出现。

当作曲家不存在或已关闭时，听众就会死去。正确的？到目前为止，我有一个“间隔”来检查按钮是否存在。

谢谢。

# javascript - 在 Flot 中移动水平条形图中条形的位置

> ID：15656196
> 
> 赞同：2
> 
> 时间：2013-03-27T10:07:28.103
> 
> 标签：javascript, charts, flot

我有 2 个在 Flot 中生成的图表。![示例图表](../Images/a213c3bd18e07507759a0184abd70170.png)

我想将图表中的条形图移离 x 轴 1 个条形图。我希望它有类似于带有 10 个条形图的间隙。例如，是否有更简单的方法来指定我希望条形图距离 y 轴 10 像素？

这是生成这些图表的代码：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" language="javascript" src="./flot/jquery-1.8.2.js"></script>
    <script type="text/javascript" language="javascript" src="./flot/jquery.flot.js"></script>
    <script type="text/javascript" language="javascript" src="./flot/jquery.flot.categories.js"></script>
    <style type="text/css">
        .graph-container.store-container {
            height: 180px !important;
        }
        .graph-container.operator-container {
            height: 450px !important;
        }

        #top-stores-plot-numbers {
            height: 70px !important;
        }
        #top-operators-plot-numbers {
            height: 340px !important;
        }
    </style>

    <script type="text/javascript">
        $(function() {
            var plotOptions = {
                legend: {
                    show: false
                },
                series: {
                    bars: {
                        show: true,
                        barWidth: 0.7,
                        align: "center",
                        horizontal: true
                    }
                },
                yaxis: {
                    mode: "categories",
                    tickLength: 2,
                    axisMargin: 10,
                    autoscaleMargin: 0.05
                },
                xaxis: {
                    autoscaleMargin:0.1,
                    min: 0,
                    ticks: 2
                }
            };

            var sn_data = [
                    [ 6087, "ACME Store"],
            ];
            var sn_ticks = [
                    [ 0, "ACME Store"],
            ];
            var sn_options = plotOptions;
            sn_options["yaxis"]["ticks"] = sn_ticks;
            sn_options["yaxis"]["max"] = 1;
            $.plot("#top-stores-plot-numbers", [ sn_data ], sn_options);

            var on_data = [
                    [ 50, "CRISTINA"],
                    [ 68, "CASHIER2"],
                    [ 96, "MIESZKO"],
                    [ 115, "CASHIER1"],
                    [ 209, "TRAINING 1"],
                    [ 379, "JADE"],
                    [ 640, "HOST1"],
                    [ 711, "CAROLINA"],
                    [ 795, "SUPERVISER"],
                    [ 1376, "TRAINING"],
            ];
            var on_ticks = [
                    [ 0, "CRISTINA"],
                    [ 1, "CASHIER2"],
                    [ 2, "MIESZKO"],
                    [ 3, "CASHIER1"],
                    [ 4, "TRAINING 1"],
                    [ 5, "JADE"],
                    [ 6, "HOST1"],
                    [ 7, "CAROLINA"],
                    [ 8, "SUPERVISER"],
                    [ 9, "TRAINING"],
            ];
            var on_options = plotOptions;
            on_options["yaxis"]["ticks"] = on_ticks;
            on_options["yaxis"]["max"] = 10;
            $.plot("#top-operators-plot-numbers", [on_data], on_options);
        });
    </script>
</head>
<body>
    <div class="graph-container store-container">
        <h2>Top 10 by Number</h2>
        <div id="top-stores-plot-numbers" class="graph-placeholder"></div>
    </div>
    <div class="graph-container operator-container">
        <h2>Top 10 by Number</h2>
        <div id="top-operators-plot-numbers" class="graph-placeholder"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:31:03.633

您需要更改 `autoscaleMargin`图表之间的，而不是`max`y 轴的。

当您有 1 个小节时，将其设置为`0.5`. 当您有 10 个小节时，将其设置为`0.05`. 删除任何提及`yaxis.max`，应该这样做。

我将您的 yaxis 对象更改为如下所示`plotOptions`：

```
 yaxis: {
                mode: "categories",
                tickLength: 2,
                autoscaleMargin: 0.5
            } 
```

这就是 1 条形图所需的全部内容。

在调用`$.plot`第二张图之前，更改`autoscaleMargin`如下：

```
 on_options["yaxis"]["autoscaleMargin"] = 0.05; 
```

就是这样，看看它的实际效果（减去类别插件）：http: [//jsfiddle.net/ryleyb/tVmTt/](http://jsfiddle.net/ryleyb/tVmTt/)

# c# - 修改文本文件中特定行的内容

> ID：15656198
> 
> 赞同：4
> 
> 时间：2013-03-27T10:07:38.653
> 
> 标签：c#, file, text, line

我是 C# 新手，目前正在开发项目，因此我需要打开现有文本文件并编辑特定行（即 32）的内容，但我失败了！有什么帮助吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-27T10:11:29.927

好吧，根据您的问题，您知道行号，所以请执行以下操作：

```
var lines = File.ReadAllLines("path to file");
lines[31] = "some value";
File.WriteAllLines("path to file", lines); 
```

第一行代码将文件的所有行放入一个数组中。第二行清楚地将已知行设置为某个值，第三行用新的行集覆盖文件。

# meteor - 集合无法获取 Template.mytemplate.rendered 中的数据

> ID：15656201
> 
> 赞同：1
> 
> 时间：2013-03-27T10:07:55.640
> 
> 标签：meteor

我无法在 Template.my.rendered 中获取数据，但在 Chrome 的控制台中可以。这是我的代码：

html:

> ```
> <Template name="moitorContent">
>   <div class="tab-pane active" id="1">
>       ........
>   </div>
> </Template> 
> ```

js：

```
    Template.moitorContent.rendered = function(){
         如果（！this._rendered）{
          this._rendered = true;
          console.log(Svse.find({}).fetch());
        }
    }

```

使用 localhost:3000 打开 chrome 时，

控制台信息是“[]”

但是在chrome的控制台中输入它们

```
console.log(Svse.find({}).fetch());

```

console.log 可以获取数据

像这样： ![在此处输入图像描述](../Images/4d45291e8b89e97a7a15bb3d734b02da.png)

知道我做错了什么吗？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:05:33.190

发生这种情况是因为您在订阅完成之前使用了 console.log：

如果是这种情况，您应该会发现使用它应该可以工作：

```
Template.moitorContent.rendered = function(){
    console.log(Svse.find({}).fetch());
} 
```

要通过这个，您可以先检查那里是否有数据/或使用`Session`变量来检查您的订阅是否完成。

```
Template.moitorContent.rendered = function(){
    if(!this._rendered && Svse.find({}).count()) {
      this._rendered = true;
      console.log(Svse.find({}).fetch());
    }
} 
```

一种更清洁的方法是删除`autopublish`软件包并进行手动订阅和订阅。使用 a`Session`将订阅标记为已完成并检查您的订阅是否已完成`rendered`并使用它来使用所有可用数据执行下一个任务。

# php - 在 .png 图像上应用灰度

> ID：15656203
> 
> 赞同：1
> 
> 时间：2013-03-27T10:08:01.083
> 
> 标签：php, filter, png, alpha, grayscale

我正在尝试将 PNG 转换为灰度，但我不断得到黑色背景而不是透明背景。有谁知道我在这里做错了什么？

```
private function applyGrayscale($path,$name,$prefix,$infix='gray_'){
    list($filename,$extention) = explode('.',strtolower($name));

    switch($extention){
        case 'jpg'  :   $image=imagecreatefromjpeg($path.$prefix.$name);break;
        case 'jpeg' :   $image=imagecreatefromjpeg($path.$prefix.$name);break;
        case 'gif'  :   $image=imagecreatefromgif($path.$prefix.$name);break;
        case 'png'  :   $image=imagecreatefrompng($path.$prefix.$name);break;
        default     :   $image=imagecreatefromjpeg($path.$prefix.$name);break;
    }

    imagealphablending($image, true);
    imagesavealpha($image,true);
    imageFilter($image,IMG_FILTER_GRAYSCALE);

    switch($extention){
        case 'jpg'  :   imagejpeg($image,$path.$prefix.$infix.$name,100);break;
        case 'jpeg' :   imagejpeg($image,$path.$prefix.$infix.$name,100);break;
        case 'gif'  :   imagegif($image,$path.$prefix.$infix.$name);break;
        case 'png'  :   imagepng($image,$path.$prefix.$infix.$name,9);break;
        default     :   imagejpeg($image,$path.$prefix.$infix.$name,100);break;
    }
} 
```

# php - 在 CRUD 视图中循环中的项目的渲染选项

> ID：15656205
> 
> 赞同：1
> 
> 时间：2013-03-27T10:08:04.740
> 
> 标签：php, symfony, twig

我会尽量解释清楚。我正在做一个相当大的项目并创建了一个 CrudController。这个控制器有一些默认动作（`indexAction`, `createAction`, `archiveAction`...）。我还创建了一些相应的视图。

*   视图将`edit.html.twig`使用 form_widget() 函数绘制表单
*   该`list.html.twig`视图获取一个数据数组和一个（可配置的）列数组。这将绘制一个包含所需列**和**一些操作按钮（默认为编辑和存档按钮）的简单表格。

这个想法是我现在能够快速开发我的应用程序：我创建了一个新的实体、存储库、FormType，最后是一个扩展 CrudController 而不是 BaseController 的控制器。在我的 EntityController 中，我确保我的 CrudController 的配置是正确的（实体名称、指向 FormType 的指针......）。这一切都像一个魅力。

但是，我已经到了需要一些额外操作（除了编辑和存档）的实体（项目）的地步，即“渲染”或“下载”（渲染完成时）。因为我不想为了添加额外的操作而完全覆盖这个实体的列表视图，并且我将再次遇到这种情况，所以我决定尝试将操作的呈现移出列表视图：根据给定项目的状态，我创建了一个`actions.html.twig`仅呈现操作的视图和一个`actionsAction`添加其他操作的视图（它应该显示渲染按钮还是下载按钮？）。

在我的`list.html.twig`我用过：

```
{% for row in data %}
    {{ render(controller(entityControllerActionsAction, {'id': row.id})) }}
    ...
{% endfor %} 
```

然而，事实证明渲染是非常消耗内存的，一旦我在列表中显示一些实体，就会导致“内存耗尽”错误。以前只用了12MB的页面，现在突然用了128MB以上（内存限制），简直不能接受。加载时间也大幅增加

我正在寻找一个体面的、面向对象的、[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)解决方案来解决这个问题。

*   为什么 render() 函数在这里会占用大量内存和性能？如果我能减少它，问题就解决了。
*   有没有办法模仿 render() 函数或使用不同的东西。

我不是在寻找预构建的代码或任何东西，而是在寻找有关前进方向的建议。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:38:22.427

正如这篇[Stackoverflow 帖子](https://stackoverflow.com/questions/9077097/twig-render-vs-include)中提到的， “渲染”会产生一个新请求并因此增加内存使用量。尝试使用定义默认操作块的块结构。为项目实体覆盖此内容。

# perl - 迭代循环直到二维向量的倒数第二个元素

> ID：15656206
> 
> 赞同：1
> 
> 时间：2013-03-27T10:08:08.563
> 
> 标签：perl

如标题所示，我想对二维向量的倒数第二个元素进行 for 迭代；我写信去做：

```
for my $i (0..$#vector) {
    for my $j (1..${$vector[$i]}[-2]) {
        ....
    }
} 
```

但它不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:09:44.370

这个：

```
${$vector[$i]}[-2] 
```

为您提供倒数第二个元素的**值**。

相反，使用：

```
for my $j (1..$#{$vector[$i]}-1) { 
```

最后一个元素的**索引**，减一。

如果您实际上不需要算法中的索引，请考虑`for`在数组元素而不是索引上使用：

```
for my $outer_element (@vector) {
    for my $inner_element (@{$outer_element}[1..$#$outer_element-1]) {
        ....
    }
} 
```

# python - 使用内置视图登录

> ID：15656215
> 
> 赞同：2
> 
> 时间：2013-03-27T10:08:38.240
> 
> 标签：python, django, django-templates

我正在使用内置视图来执行用户登录：

```
(r'^login/$', 'django.contrib.auth.views.login', {'template_name':'login.html'}), 
```

其中 login.html 是模板。login.html 已正确加载。但是我需要将我的变量传递给模板。**我按照以下方式（ STATIC_URL** ）做我自己的观点：

```
class AboutView(TemplateView):
template_name = 'about.html'

def get_context_data(self, *args, **kwargs):
    context = super(AboutView, self).get_context_data(*args, **kwargs)
    context['STATIC_URL'] = settings.STATIC_URL
    return context 
```

那么，如何使用内置的“django.contrib.auth.views.login”视图将“STATIC_URL”传递给“login.html”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:17:43.617

STATIC_URL 应该通过 django 自己的上下文处理器自动传递。在您的设置文件中，您需要定义 STATIC_URL 。还要确保加载了适当的上下文处理器。

'django.core.context_processors.static'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:22:29.003

您不需要`STATIC_URL`显式传递。您可以使用 `'django.core.context_processors.static'`默认启用的 django 的上下文处理器。

确保您在`RequestConext()`从模板呈现响应时使用。

[您可以在此处](https://docs.djangoproject.com/en/dev/howto/static-files/#referring-to-static-files-in-templates)`STATUS_URL`获取模板中引用的其他方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:20:27.820

参考这个网址[https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

您可以按照相同的过程来获得您想要的东西。

# c - 通过广度优先搜索构造的树是二叉树吗？

> ID：15656217
> 
> 赞同：1
> 
> 时间：2013-03-27T10:08:42.257
> 
> 标签：c, algorithm, graph, graph-algorithm, breadth-first-search

我正在研究广度优先搜索。我想问：由广度优先搜索构造的树（即BFS树，我们存储每个节点的前身）是二叉树吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:26:36.330

广度优先搜索构造的树**不一定**是二叉树。

根据[维基百科](http://en.wikipedia.org/wiki/Binary_tree#Breadth-first_order)，*二叉树是一种树数据结构，其中每个节点**最多有两个子节点***。

由 构造的树的节点`BFS`可能包含`any number of Child nodes`。

**示例**：

以下是获得的**树**：

![在此处输入图像描述](../Images/0e0d2eba281e06898a98b1faf4d9f768.png)

通过`Breadth First Search`下图：

![在此处输入图像描述](../Images/a8466bc6ce9e3bf6f2cad68c4320fe66.png)

这里，BFS 树中的节点`Franfurt`有**3 个孩子**，因此违反了**二叉树的定义。**

因此，由 构造的树`BFS`不一定是二叉树。

# multithreading - adobe air 桌面的多线程和响应能力

> ID：15656218
> 
> 赞同：3
> 
> 时间：2013-03-27T10:08:47.977
> 
> 标签：multithreading, apache-flex, networking, air, adobe

1.  如何在 adobe air 桌面 for Linux 中实现多线程？

由于繁重的计算（客户端/服务器套接字、sql 更新和插入），我的 UI 有时无响应。我想让一个线程在后台和实时处理这些计算（UI不应该被模式/对话框打断，说“正在加载”）

1.  本机进程可以帮助这种情况吗？我在谷歌上搜索了几个小时，我发现了这个所谓的“绿色线程”，但这对我没有帮助......

2.  本机进程实际上会创建一个新线程吗？

注意：这是针对 linux

对不起我的英语不好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:20:05.003

在你的情况下，我会尝试工人[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)

我建议您使用您的主应用程序进行 UI 显示，并移动您迄今为止在外部工作人员中实现的所有“繁重”工作（Web 服务调用、解析器、实用程序类）。

你可以在这里找到一个很好的教程[http://gotoandlearn.com/play.php?id=162](http://gotoandlearn.com/play.php?id=162)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T07:39:00.940

看看这里[https://code.google.com/p/async-threading/](https://code.google.com/p/async-threading/)。AsyncThreading 是一个动作脚本库，用于方便 Flex 和 Air 应用程序中的线程。它非常简单，只需扩展 AbstractAsyncThread 类并实现 IAsyncThreadResponder 接口，或者实现一个扩展 IAsyncThreadResponder 接口的类，你可以做你需要的。

但是当你向另一个线程发送消息时要小心，我建议你获取你的类的实例，但不要接收来自它的消息。

# unicode - Unicode 字符串问题

> ID：15656220
> 
> 赞同：1
> 
> 时间：2013-03-27T10:08:56.250
> 
> 标签：unicode, gdb

我在 char 数组中存储了一些 unicode 字符“лфи”。当我查看 (x/30s ) gdb 中的值时，它会显示如下内容：

0x80ac47c: "?\004>\004" 0x80ac482: "A\0048\004;\004L\004D\004>\004=\004:\0045\004/"

为什么会这样，这些 \004 代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:15:58.100

您应该阅读[gdb 的字符集文档](http://sourceware.org/gdb/current/onlinedocs/gdb/Character-Sets.html#Character-Sets)，因为 gdb 似乎正在转义这些字符，而不是让终端显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:26:40.440

请参阅[Gdb Unicode 打印](http://www.csn.ul.ie/~caolan/pub/guides/GdbUnicodePrinting.txt)。如果您`dbg_dump`在代码中重载该函数，则通过`print dbg_dump("лфи")`在 gdb 中调用它有望调用您的重载函数，从而产生正确的 UTF-8 表示。请记住，在您的自定义中，`dbg_dump`您可能需要明确表示您想要显示 Unicode 字符。

# php - 如何获取在“类型”之后定义的ID：特征选择上的“特征”。？

> ID：15656223
> 
> 赞同：1
> 
> 时间：2013-03-27T10:09:01.667
> 
> 标签：php, google-maps, open-source, openlayers, layer

如何获取在“类型”之后定义的 id：特征选择上的“特征”。首先我将它设置为你所看到的。然后我尝试获取这个 id 警报（e.feature.id），它给了我这样的 OpenLayers.Feature.Vector_2345

```
var featurecollection = { 
          "type": "FeatureCollection", 
            "features": [ 
            <?php for($i=0;$i<$size_of_loop;$i++){ ?>
            { 
                "type": "Feature",
                id:"<?php echo $i ?>", 
                "geometry": 
                    { 
                      type: "Polygon",                                                
                       coordinates: 
                        [[                                                                
                            <?php 
                                echo $var[$i];
                            ?>
                        ]] 
                     }, 

             },
            <?php }?>                                
          ] 
       }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:10:31.043

`alert(featurecollection.features[0].id);`

如果您想对其进行迭代或使其动态化，请进行编辑：

```
for(var i = 0; i <featurecollection.features.length; i++) {
    var id = featurecollection.features[i].id;
}

function getFeatureId(var index) {
    if(typeof(index != 'undefined') && index > 0)
        return featurecollection.features[id].id;
} 
```

# winforms - 处理表单上所有控件的单击并获取鼠标位置

> ID：15656230
> 
> 赞同：4
> 
> 时间：2013-03-27T10:09:15.990
> 
> 标签：winforms, event-handling, controls, mouseevent

我正在研究一个覆盖在表示网格的面板中的 windows 窗体。

我正在尝试创建一个事件处理程序来处理所有鼠标单击，而不管单击发生在哪个面板上，然后将 a 移动`PictureBox`到面板的位置。

我设法找到了一个涵盖事件处理程序的主题，但我无法从事件处理程序中获取鼠标单击的位置。下面是我到目前为止的代码（主要来自另一篇文章）：

```
private void Form1_Load(object sender, EventArgs e)
{
    foreach (Control c in this.Controls)
    {
        c.MouseClick += new MouseEventHandler(myEvent_handler_click);
    }
}

public void myEvent_handler_click(object sender, EventArgs e)
{
    Point point = new Point(e.X, e.Y);

    game.MoveToSquare(point);
} 
```

这行代码`Point point = new Point(e.X, e.Y);`不起作用，因为我无法引用`X`of`e`或`Y`of `e`。

如何在单击鼠标时获取鼠标的位置？

任何帮助表示赞赏。如果我不够清楚，请随时问我更多问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:15:16.363

事件处理程序的[委托](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventhandler.aspx)定义如下：

```
public delegate void MouseEventHandler(object sender, MouseEventArgs e); 
```

[`MouseEventArgs`](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventargs.aspx)继承自`EventArgs`，这就是您的代码有效的原因。如果您更改 的定义`EventHandler`，您应该能够访问坐标：

```
public void myEvent_handler_click(object sender, MouseEventArgs e)
{
    Point point = new Point(e.X, e.Y);
} 
```

您也可以简单地访问[`e.Location`](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventargs.location.aspx)获取点：

```
Point point = e.Location; 
```

# matlab - 一个样本 Kolmogorov-Smirnov 用于测试理论分布的 gof（makedist 错误）matlab

> ID：15656232
> 
> 赞同：1
> 
> 时间：2013-03-27T10:09:20.647
> 
> 标签：matlab, math, statistics, data-fitting

我有几个看起来像这样的连续变量：

```
durs1=[3,40933 0,033630 0,25103 0,6361 0,71971 1,18311 1,91946 0,12842 0,97639 1,1383 0,46871 3,05241 2,34907 1,03788 0,76434 1,08798 1,462 0,4241 2,32128 0,29017..] 
```

每个都有超过 1000 个值（均为正值）。我用了

```
[a, b]=gamfit(durs1)

a =

2.3812    0.4200

b =

2.2316    0.3907
2.5408    0.4514 
```

寻找伽马分布的参数。现在我想进行拟合优度测试，以查看模型与我的数据的拟合程度。Matlab 提供了一个示例 Kolmogorov-Smirnov 测试来解决问题（[http://www.mathworks.com/help/stats/kstest.html#btnyrvz-1](http://www.mathworks.com/help/stats/kstest.html#btnyrvz-1)）但是当我运行我的代码时（基于他们的例子）：

```
test_cdf=makedist('Gamma','a',2.38,'b',0.42) 
[h, p]=kstest(durs1,'CDF',test_cdf) 
```

我有这个错误：“'char'类型的输入参数的未定义函数'makedist'。”

有人可以帮我修复我的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:33:14.667

好像`makedist`统计工具箱的功能只有 Matlab 版本才有`r2013a`。查看早期版本的文档，即使晚于`r2012b`，也没有提及`makedist`. 所以我认为更新到最新版本的 matlab 应该可以解决您的问题。

# laravel - mediaelements.js MP3 不能风

> ID：15656235
> 
> 赞同：1
> 
> 时间：2013-03-27T10:09:22.913
> 
> 标签：laravel, audio, mp3, audio-player

我在使用[mediaelements.js](http://mediaelementjs.com/)播放 MP3 文件时遇到问题。在我的 AJAX 请求中，我获取了我的 MP3 文件并设置了音频 src。

如果我通过 URL 获得真正的 MP3，例如：

```
http://host.com/real/path/tp/mp3 
```

并将其设置为我的音频 src 播放器运行良好。

现在......当我通过一个从我的存储文件夹中获取 MP3 的脚本请求我的 MP3 时，如下所示：

```
$headers = array(
    'Content-Type' => File::mime(File::extension($mp3)),
    'Content-Length' => filesize($mp3),
    'Content-Transfer-Encoding'=>'',
    'Cache-Control' => 'must-revalidate, post-check=0, pre-check=0',
);

return Response::make(readfile($mp3), 200, $headers); 
```

播放器开始播放 MP3 文件，但我无法卷曲。:(

真实 MP3 路径的响应头：

```
HTTP/1.1 200 OK
Date: Tue, 26 Mar 2013 18:47:27 GMT
Server: Apache/2.2.16 (Debian)
Last-Modified: Tue, 26 Mar 2013 14:37:28 GMT
ETag: "8d4b852-7b7342-4d8d4dc53fa00"
Accept-Ranges: bytes
Content-Length: 8090434
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: audio/mpeg 
```

发送 MP3 的 Laravel 脚本的响应标头：

```
HTTP/1.1 200 OK
Date: Tue, 26 Mar 2013 19:02:33 GMT
Server: Apache/2.2.16 (Debian)
Content-Length: 6330826
content-transfer-encoding: binary
cache-control: must-revalidate, post-check=0, pre-check=0, private
Set-Cookie:     laravel_session=16f4d83c0ce0262a90df3a0229f8b8ba261eaad7%2BDZIBuW8nbRbBMT7Nvu0NGQ9Rfqaiu6SAS    1wGjYse; expires=Tue, 26-Mar-2013 20:02:33 GMT; path=/; httponly
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: audio/mpeg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T19:59:03.240

我必须设置以下标题：

```
"Accept-Range" => "bytes" 
```

去工作。问题现在已解决。:)

# c# - 编译时隐式类型变量初始化

> ID：15656238
> 
> 赞同：3
> 
> 时间：2013-03-27T10:09:38.560
> 
> 标签：c#, compilation, var

当我阅读隐式类型变量时，我想到了这个问题。我在互联网上找不到答案，所以决定把它放在兔子身上。

假设我使用 'var' 关键字声明了一个变量。

```
var i = 10; 
```

编译后， i 被编译/视为“整数” i。

现在，我的问题是为什么“i”没有被编译为“short”，因为“i”的值非常小，无法适应“Short”数据类型；为什么它总是编译为'Integer'？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:11:52.190

因为[C# 规范 2.4.4.2](http://msdn.microsoft.com/en-us/library/aa664674%28v=vs.71%29.aspx)规定，如果数字文字没有小数或后缀，则它是`int`, `uint`,`long`或`ulong`可以包含它的最小值。自然`10`适合`Int32`所以选择它。

> 整数文字的类型确定如下：
> 
> *   如果字面量没有后缀，则它具有可以表示其值的第一种类型：int、uint、long、ulong。

C# 语言设计者决定，即使`10`可以适合 ，`Int16`该变量类型的使用也相对较少；这种`Int32`用法将是“现状”。

实际上，如果没有记错的话，C# 中无论如何都*没有* `Int16`文字。您必须显式声明并为 an 分配一个值`Int16`才能得到一个。

* * *

[有趣的是，我查看了编译后的 IL 代码并声明了 a`short s = 10`并`int i = 10`实际生成了完全相同的 IL ......所以现在我想知道如何管理 short ；也许它们实际上是在 CLI 中作为 32 位值进行管理的。我很想知道是否是这种情况。]

# javascript - 如何获取自定义 mvc3 属性来验证客户端

> ID：15656245
> 
> 赞同：1
> 
> 时间：2013-03-27T10:09:50.377
> 
> 标签：javascript, asp.net-mvc-3, attributes, customvalidator

我已经编写了一个自定义属性，但它似乎不适用于客户端。它仅在我调用 ModelState.IsValid() 方法时在服务器上有效。我在网上某处读到我需要在应用程序启动方法上注册自定义属性，但不清楚。请帮忙。

```
public class MaximumAmountAttribute : ValidationAttribute
    {
    private static string defErrorMessage = "Amount available '$ {0:C}' can not be more than loan amount '$ {1:C}'";
    private string MaximumAmountProperty { get; set; }
    double minimumValue = 0;
    double maximumValue = 0;

    public MaximumAmountAttribute(string maxAmount)
        : base(defErrorMessage)
    {
        if (string.IsNullOrEmpty(maxAmount))
            throw new ArgumentNullException("maxAmount");

        MaximumAmountProperty = maxAmount;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (value != null)
        {
            PropertyInfo otherPropertyInfo = validationContext.ObjectInstance.GetType().GetProperty(MaximumAmountProperty);

            if (otherPropertyInfo == null)
            {
                return new ValidationResult(string.Format("Property '{0}' is undefined.", MaximumAmountProperty));
            }

            var otherPropertyValue = otherPropertyInfo.GetValue(validationContext.ObjectInstance, null);

            if (otherPropertyValue != null && !string.IsNullOrEmpty(otherPropertyValue.ToString()))
            {
                minimumValue = Convert.ToDouble(value);
                maximumValue = Convert.ToDouble(otherPropertyValue);

                if (minimumValue > Convert.ToDouble(otherPropertyValue.ToString()))
                {
                    return new ValidationResult(string.Format(defErrorMessage, minimumValue, maximumValue));
                }
            }
        }

        return ValidationResult.Success;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:13:54.693

使用自定义验证属性创建服务器端验证不会将验证规则“传输”到客户端浏览器（呈现自定义 javascript 验证函数）。
您也必须将验证逻辑编写为客户端脚本。您必须做一些事情：

1.  确保必须在客户端验证的元素（输入）如下所示：

    `<input data-val-MaximumAmount="Validation error massage" />`

    需要包含错误消息的 data-val-XXX 属性。`Html.TextBoxFor`正在做同样的事情（将此类属性添加到呈现的 html 元素中）。

2.  您必须以这种方式创建和注册客户端验证：

    ```
    (function ($) {
        // Creating the validation method
        $.validator.addMethod('MaximumAmount', function (value, element, param) {
            if (...) // some rule. HERE THE VALIDATION LOGIC MUST BE IMPLEMENTED!
                return false;
            else
                return true;
        });

        // Registering the adapter
        $.validator.unobtrusive.adapters.add('MaximumAmount', function (options) {
            var element = options.element,
                message = options.message;

            options.rules['MaximumAmount'] = $(element).attr('data-val-MaximumAmount');
            if (options.message) {
                options.messages['MaximumAmount'] = options.message;
            }
        });

    })(jQuery);

    // Binding elements to validators
    $(function () {
        $(':input[data-val-MaximumAmount]').each(function () {
            $.validator.unobtrusive.parseElement(this, true);
        });
    }); 
    ```

# jquery - 引导轮播转换故障

> ID：15656246
> 
> 赞同：3
> 
> 时间：2013-03-27T10:09:54.993
> 
> 标签：jquery, css, twitter-bootstrap

我有引导轮播的问题。我添加了自定义控件并根据设计对它们进行了样式设置，但是当我单击下一张幻灯片时，上一张图像消失了，中间留下了空白。

我编辑了 bootstrap.css，在其中更改了 .carousel-caption，并为按钮添加了一些自定义 css。

这是测试页面：http: [//valters.me/b/](http://valters.me/b/)

我设法截图：[http ://d.pr/i/yGzY](http://d.pr/i/yGzY)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-05T18:45:46.913

我尝试从 .left 和 .right 中删除属性，但它并没有为我解决。我想出的解决办法是加快过渡。Bootstrap 的默认设置是 0.6s 缓入出局，0.5 似乎对我有用。尝试将此添加到您的 CSS 中：

```
.carousel-inner>.item{
   /*disables white flash*/
   -webkit-transition: -webkit-transform .5s ease-in-out;
   -o-transition: -o-transform .5s ease-in-out;
   transition: transform .5s ease-in-out;
} 
```

添加这个作为备份，因为白色比黑色更引人注目：

```
.carousel-inner{
/*just incase the flash (style above) comes back*/
   background: #000;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:51:49.713

如果您从 .carousel-control.left 和 .carousel-control.right 中删除过渡 css，似乎可以解决问题。

在 FF 和 Chrome 中测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-27T15:05:16.920

对于引导程序 4，这对我有用。在您的 .css 中：

```
.carousel { overflow: hidden; }
.carousel-item { overflow: hidden; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-17T12:55:11.570

就我而言，以前有人在轮播中的**img标签上放置了一个****position: absolute 。**删除它确实有帮助。

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-03T18:14:36.430

我试过了，它奏效了：

```
.carousel-inner > .item {
    -webkit-backface-visibility: visible;
            backface-visibility: visible;
} 
```

引导版本：3.3.7

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-22T19:42:48.277

我尝试了其他解决方案，但只有这对 FF 有效。

```
.carousel-item {backface-visibility: visible;} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-28T12:05:41.427

我在 bootstrap 5.0.2 和 react-bootstrap 1.6.1 中遇到了这个问题。

我能够通过修改正在应用的 .css 样式提出解决方案。

将此添加到您的自定义 .css 文件以覆盖默认 bootstrap.css

```
carousel-item-next{
  transition: transform 0s ease-in-out;
}

.carousel-item-prev{
    transition: transform 0s ease-in-out;
}
.carousel-item-left {
    transform: translateX(-100%);
}
.carousel-item-right {
    transform: translateX(100%);
} 
```**

# css - 在 Nivo Slider 中居中图像

> ID：15656247
> 
> 赞同：1
> 
> 时间：2013-03-27T10:09:56.580
> 
> 标签：css, nivo-slider

我的网站上有一个 Nivo Slider，请参见下面的代码：

```
<!-- SLIDER START -->
    <div id="wrapper">
      <div class="slider-wrapper theme-default">
            <div id="slider" class="nivoSlider">
                <img src="slider/images/image.jpg" />
            </div>
<!-- SLIDER END -->

/*===================*/
/*=== Main Styles ===*/
/*===================*/
.theme-default #slider {
    margin: 0 auto 0 auto;
    width: 100%; /* Make sure your images are the same size */
    height: 400px; /* Make sure your images are the same size */
}
.theme-pascal.slider-wrapper,
.theme-orman.slider-wrapper {
    margin-top:35px;
} 
```

如您所见，实际滑块的宽度为 100%，因此它始终适合窗口的宽度。

一些图像不会与用户窗口的宽度相同，因为它是 100%，但由于某种原因我无法让滑块中的图像居中。

我做了保证金：0自动0自动；试着让它居中，但仍然一无所获

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:31:40.600

如果你想居中，你应该能够使用`text-align:center;`而不是`margin:0 auto;`在你的声明中。`.theme-default #slider``<img>`

# ms-access - 使用多个左连接的 MS Access SQL

> ID：15656250
> 
> 赞同：5
> 
> 时间：2013-03-27T10:09:58.357
> 
> 标签：ms-access

以下联接在 Access 中有效，但我需要添加第四个联接。

```
FROM ((Agents
LEFT JOIN Resignation_Pool    ON Agents.PF = Resignation_Pool.PF)
LEFT JOIN Teams               ON Agents.Team = Teams.ID)
LEFT JOIN Skills              ON Agents.PF = Skills.PF 
```

当我添加第四个连接时，它不起作用。我知道 Access 对括号很奇怪，但我想我把它们放在它们所属的地方。查询只是永远运行，什么都不做（它根本不应该运行很长时间），我最终取消了它。有什么建议么？

```
FROM (((Agents
LEFT JOIN Resignation_Pool    ON Agents.PF = Resignation_Pool.PF)
LEFT JOIN Teams               ON Agents.Team = Teams.ID)
LEFT JOIN Skills              ON Agents.PF = Skills.PF)
LEFT JOIN OneMore             ON Agents.OM = OneMore.OM 
```

这是有效的代码 - 我的实际查询而不是我发现的看起来相似的查询。

```
SELECT DISTINCT A02.PID, A02.PS, A02.PN, A02.PM, C01.RC, C01.IC, C01.RD 
INTO AutoCR 
FROM ((02_CorrectResults A02 
LEFT OUTER JOIN dbo_pol_PGI C01 
  ON (A02.PID = C01.PID and C01.PS = '999' and C01.PEDate >= #04/01/2012#)) 
LEFT OUTER JOIN dbo_pol_IL C02 
  ON C01.PID = C02.PID) 
LEFT OUTER JOIN dbo_pol_UN C03 
  ON C02.ILID = C03.ILID 
```

我添加了另一个联接，但这不起作用。我尝试使用内部联接，但 Access 不喜欢那样。

```
SELECT DISTINCT A02.PID
, A02.PS
, A02.PN
, A02.PM
, C01.RC
, C01.IC
, C01.RD
, C04.CCode
, C04.PCode
, C04.CForm,
INTO AutoCR 
FROM (((02_CorrectResults A02 
LEFT OUTER JOIN dbo_rol_PGI C01 
  ON (A02.PID = C01.PID and C01.PS = '999' and C01.PEDate >= #04/01/2012#)) 
LEFT OUTER JOIN dbo_rol_IL C02 
  ON C01.PID = C02.PID) 
LEFT OUTER JOIN dbo_rol_UN C03 
  ON C02.ILID = C03.ILID) 
LEFT OUTER JOIN dbo_rol_HO C04 
  ON C03.UnID = C04.UnID 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-12T22:18:38.927

您的查询中有尾随`,`。去掉它。

```
SELECT DISTINCT A02.PID
, A02.PS
, A02.PN
, A02.PM
, C01.RC
, C01.IC
, C01.RD
, C04.CCode
, C04.PCode
, C04.CForm,   <--- this was the problem
INTO AutoCR 
FROM (((02_CorrectResults A02 
LEFT OUTER JOIN dbo_rol_PGI C01 
  ON (A02.PID = C01.PID and C01.PS = '999' and C01.PEDate >= #04/01/2012#)) 
LEFT OUTER JOIN dbo_rol_IL C02 
  ON C01.PID = C02.PID) 
LEFT OUTER JOIN dbo_rol_UN C03 
  ON C02.ILID = C03.ILID) 
LEFT OUTER JOIN dbo_rol_HO C04 
  ON C03.UnID = C04.UnID 
```

# java - 等到文本字段中出现文本

> ID：15656252
> 
> 赞同：15
> 
> 时间：2013-03-27T10:10:09.637
> 
> 标签：java, selenium, selenium-webdriver

在 webdriver 中，如何要求 webdriver 等到文本字段中出现文本。

实际上我有一个剑道文本字段，其值来自数据库，需要一些时间来加载。加载后，我可以继续进行。

请帮忙

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-27T10:50:35.833

您可以使用 WebDriverWait。从文档示例：

```
 (new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                return d.findElement(...).getText().length() != 0;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-08-25T10:59:19.080

您可以使用`WebDriverWait`. 来自文档示例：
上面的 ans 使用`.getTex()`this 不会从输入字段返回文本

使用`.getAttribute("value")`而不是`getText()`

```
(new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
    public Boolean apply(WebDriver d) {
        return d.findElement(...).getAttribute("value").length() != 0;
    }
}); 
```

测试 100% 工作希望这会有所帮助

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-01-19T08:12:04.633

一种可以工作并使用 lambda 函数的班轮。

```
wait.until((ExpectedCondition<Boolean>) driver -> driver.findElement(By.id("elementId")).getAttribute("value").length() != 0); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-28T14:25:05.163

使用`WebDriverWait (org.openqa.selenium.support.ui.WebDriverWait)`和`ExpectedCondition (org.openqa.selenium.support.ui.ExpectedConditions)`对象

```
WebDriverWait wait = new WebDriverWait(driver, 30);
wait.until(ExpectedConditions.textToBePresentInElementLocated(By.id("element_id"), "The Text")); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-07T04:51:02.060

您可以使用一个简单的方法，在该方法中，您需要传递将要发送文本的驱动程序对象 webelement 和要发送的文本。

```
public static void waitForTextToAppear(WebDriver newDriver, String textToAppear, WebElement element) {
    WebDriverWait wait = new WebDriverWait(newDriver,30);
    wait.until(ExpectedConditions.textToBePresentInElement(element, textToAppear));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-19T11:15:11.387

这是我将文本发送到输入的解决方案：

```
 public void sendKeysToElement(WebDriver driver, WebElement webElement, String text) {
    WebDriverWait wait = new WebDriverWait(driver, Configuration.standardWaitTime);
    try {

        wait.until(ExpectedConditions.and(
                ExpectedConditions.not(ExpectedConditions.attributeToBeNotEmpty(webElement, "value")),
                ExpectedConditions.elementToBeClickable(webElement)));

        webElement.sendKeys(text);

        wait.until(ExpectedConditions.textToBePresentInElementValue(webElement, text));

        activeElementFocusChange(driver);

    } catch (Exception e) {
        Configuration.printStackTraceException(e);
    }
}

WebElement nameInput = driver.findElement(By.id("name"));
sendKeysToElement(driver, nameInput, "some text"); 
```

# java - “在运行 android 游戏应用程序时”在 logcat 中给出警告消息

> ID：15656254
> 
> 赞同：1
> 
> 时间：2013-03-27T10:10:18.120
> 
> 标签：java, android, 2d-games

为了了解游戏应用的实现过程，所以导入了游戏项目，但是当我运行项目时，我在 logcat 中收到此错误消息“未找到启动器活动！启动只会同步设备上的应用程序包！” 甚至编辑了我的清单，但仍然可以得到输出“Manifeast.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.jamescho.androidgame"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:12:25.413

> 未找到启动器活动！

将活动声明为启动器，它在应用程序启动时最初打开并在 AndroidManifest.xml 中声明所有活动

```
<activity android:name=".ActitityName" android:label="@string/app_name" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T07:51:20.593

将活动声明为启动器，它在应用程序启动时最初打开并在 AndroidManifest.xml 中声明所有活动

# forms - AngularJS - 将输入文件范围绑定到不同的范围

> ID：15656261
> 
> 赞同：2
> 
> 时间：2013-03-27T10:10:33.200
> 
> 标签：forms, input, angularjs, scope, bind

不确定如何正确命名我的问题，我想在我的情况下它也可以命名为“范围未检测到 DOM 操作”，但这完全取决于我的问题的方法。

首先，我在 AngularJS 主网站上使用了一个与 Mongolab 连接的 Projects 应用程序的官方示例。唯一的区别是我想添加一个文件输入，它读取文件名及其 lastModifiedDate 属性，然后将这些值应用于我的表单。为了使文件输入工作，我在这里遵循了这个[例子](http://angularjstutorial.blogspot.com/2012/12/angularjs-with-input-file-directive.html)。

我让它工作了，但问题是当值被应用到我的表单范围时，并没有接受更改。

我正在我的 .apply() 函数中进行 DOM 操作，并且也使用了 $compile，但是缺少一些东西。或者也许有一种更简单的方法，无需进行 DOM 操作？

这是我到目前为止所拥有的，请看一下这个 plunker - **[http://plnkr.co/edit/mkc4K4?p=preview](http://plnkr.co/edit/mkc4K4?p=preview)** （只需单击加号图标添加新条目，然后尝试选择一个文件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:05:23.690

您需要在 CreateCtrl 中添加一条监视语句

```
function CreateCtrl($scope, $location, Movie) {

    $scope.inputfile = {};
    $scope.movie = {};

    $scope.$watch('inputfile.file', function(value){
      $scope.movie.filename = value ? value.name : '';
      $scope.movie.dateadded = value ? value.lastModifiedDate : '';
    })

    $scope.save = function() {
        Movie.save($scope.movie, function(movie) {
            $location.path('/edit/' + movie._id.$oid);
        });
    };
} 
```

演示：[示例](http://plnkr.co/edit/Ck2CJE?p=preview)

# ios - 如何防止用户在 textView 上选择文本？/ios/xcode

> ID：15656262
> 
> 赞同：1
> 
> 时间：2013-03-27T10:10:34.323
> 
> 标签：ios, uitextview

我有一些可滚动的文本视图，我想从中删除选择功能。滚动时，有时用户会在选择文本而不滚动时有点不高兴。

谢谢。

# android - 在android中单击按钮时如何画一个圆圈？

> ID：15656263
> 
> 赞同：1
> 
> 时间：2013-03-27T10:10:37.170
> 
> 标签：android, geometry

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<Button
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@+id/go"
android:text="go"
/> 
```

我想在线性布局的按钮下方加一个圆圈，怎么做？main.xml需要做哪些改动？

```
public class SomeActivity extends Activity {
 private Button checkButton;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
        start();
        }

        private void start() {
            checkButton=(Button)findViewById(R.id.go);
            checkButton.setOnClickListener(new View.OnClickListener(){
                public void onClick(View v){
                        }
                    });
} 
```

onClick方法需要填写什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:13:14.820

制作位图，然后在其画布上绘制，然后将此位图添加到图像视图中。

创建位图：

```
Bitmap bmp = Bitmap.createBitmap(100, 100,  Bitmap.Config.ARGB_8888);

Paint paint = new Paint();
paint.setAntiAlias(true);
paint.setColor(Color.BLUE);

Canvas c = new Canvas(bmp);
c.drawCircle(60,50,25, paint); 
```

设置为图像视图

```
img.setImageBitmap(bmp); 
```

# javascript - 当覆盖 div 可见时如何停止页面滚动？

> ID：15656264
> 
> 赞同：3
> 
> 时间：2013-03-27T10:10:39.610
> 
> 标签：javascript, css, dom, dom-events

我正在使用的页面有时会显示模态停留，其中 div（位置：固定）> div（位置：相对；宽度/高度：100%）> div（位置：绝对；左/右：50%）。

无论是在移动设备上还是在桌面上的 Chrome/Safari 上，滑动仍然会滚动停留后的页面。我可以使用 JavaScript 或 CSS 来防止这种情况发生吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:15:54.980

至少在桌面浏览器上，有两个与滚动相关的事件：`scroll`和`mousewheel`. 前者发生在滚动元素时，这是无法避免的。

您要做的是`mousewheel`在叠加层上捕获事件并阻止其默认操作。您可以使用 JavaScript 和 jQuery 来做到这一点，如下所示：

```
$('#overlay').on('mousewheel', function(e) {
    e.preventDefault();
}); 
```

但是，这在 IE 和 Firefox 中不起作用。有关浏览器兼容性的详细信息，请参阅[此页面](http://www.quirksmode.org/dom/events/scroll.html)。

在移动浏览器上似乎没有一致的方法，也没有通过 OS X 上的触摸板滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T12:59:27.857

这是真的，但要同时支持 Web 应用程序的移动设备，请使用以下命令：

```
document.ontouchstart = function(e){ 
    e.preventDefault(); 
```

}

# javascript - 将数学方程式翻译成 JS

> ID：15656265
> 
> 赞同：0
> 
> 时间：2013-03-27T10:10:46.970
> 
> 标签：javascript, math

我想看看这是否

```
 Math.sqrt(
           Math.pow((position.coords.latitude -45),2) + 
           Math.pow((position.coords.longitude-75),2)
          )*79; 
```

匹配这个：

```
 Distance to store (km) = Square Root (
                                       (Current Latitude – 45)^2 + 
                                       (Current Longitude ‐75)^2
                                      ) *79 
```

现在我得到了 11,XXX KM，这已经很多了，但我没有看到任何错误。

我也试过这样做：

```
var x = Math.pow((position.coords.latitude-45),2);
    var y = Math.pow((position.coords.longitude-75),2);
    var z = Math.sqrt(x+y);
    var zz = z*79; 
```

但它给了我同样的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:36:57.003

此公式适用于到纬度 45 和经度 75 的短距离。

由于您不在哈萨克斯坦，您想要的是到（45，-75）的距离，即

```
Math.sqrt(Math.pow((lat-45),2)+Math.pow((lon+75),2))*79; 
                                            ^ 
```

请注意，它仅与您的坐标精确一样精确，并且对于更大的距离，您应该获取[更好的公式](http://www.movable-type.co.uk/scripts/latlong.html)。

# python - 如何使用 numpy.ndpointer 从 C 声明一个 double ** 用于 ctypes python 调用？

> ID：15656267
> 
> 赞同：3
> 
> 时间：2013-03-27T10:10:49.263
> 
> 标签：python, c, numpy, ctypes

我想知道如何将 ndpointer 用于双 **。

考虑一个 vertex[100000][3] 矩阵和 C 中的一个函数，如：

```
double dist(double **vertex) 
```

要从 C 调用此函数，我需要创建以下指针矩阵：

```
 double **b=(double **)malloc(sizeof(double)*100000);
  for (i=0;i<100000;i++)
  {
      b[i]=(double*)malloc(sizeof(double)*3);
  } 
```

如果我使用 ctypes 从 python 调用这个 dist 函数，我需要执行以下操作：

```
import numpy as np
import ctypes
vertex_np=np.reshape(np.random.randn(nb_millions*3e6),(nb_millions*1e6,3))
pt=ctypes.POINTER(ct.c_double)
vertex_pt= (pt*len(vertex_np))(*[row.ctypes.data_as(pt) for row in vertex_np])
result=lib.dist(ctypes.pointer(vertex_pt)) 
```

问题是创建vertex_pt的循环......

如何使用 numpy.ctypeslib 中的 ndpointer 来避免这个循环？【如何用numpy.ctypeslib.ndpointer声明指针的指针？】

感谢帮助

-baco

**编辑 - 坏/低解决方案：**

我发现避免这个循环的唯一方法是修改 dist 的声明：

```
double dist(double (*vertex)[3]) 
```

然后我可以在 python 代码中使用 ndpointer：

```
lib.dist.argtypes = [np.ctypeslib.ndpointer(ndim=2,shape=(100000,3))]
result=lib.dist(vertex_np) 
```

# ios - UIActivityViewController 无法将图像添加到 imessage

> ID：15656271
> 
> 赞同：8
> 
> 时间：2013-03-27T10:11:01.717
> 
> 标签：ios, iphone, objective-c, uiactivityviewcontroller, imessage

我正在使用 UIActivityViewController 在 ios 6 和我的代码上共享图像

```
 UIImage *shareImage = [UIImage imageNamed:@"myImage.png"];

        // Init array
        NSMutableArray *items = [NSMutableArray new];
        [items addObject:@""];
        [items addObject:shareImage];

        // Add image to paste board
        UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
        pasteboard.persistent = YES;
        pasteboard.image = shareImage;

        UIActivityViewController *activityVC = [[UIActivityViewController alloc]initWithActivityItems:items applicationActivities:nil];

        //This is an array of excluded activities to appear on the UIActivityViewController
        activityVC.excludedActivityTypes = @[UIActivityTypePostToWeibo,
                                             UIActivityTypePrint,
                                             UIActivityTypeCopyToPasteboard,
                                             UIActivityTypeAssignToContact,
                                             UIActivityTypeSaveToCameraRoll];

        [self presentViewController:activityVC animated:TRUE completion:nil]; 
```

一切正常，但无法将 shareImage 粘贴到 iMessage。我不知道为什么？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T02:40:14.563

正如其他人所说，iMessage 只支持文本，不支持图像。虽然这听起来像在 iOS7 中，但它确实有效。

我个人知道我已经让它与 OvershareKit 一起工作：[https](https://github.com/overshare/overshare-kit) ://github.com/overshare/overshare-kit 。

它当然会增加一些开销，但允许您使用其流畅的界面/API 与几乎所有媒体共享。

# mysql - MySQL 数据透视表列数据作为行

> ID：15656273
> 
> 赞同：3
> 
> 时间：2013-03-27T10:11:04.560
> 
> 标签：mysql, sql, pivot

我正在努力寻找解决这个 MySQL 问题的方法。我似乎无法理解如何做到这一点。我有以下表格。

```
Question table
+----+-------------+
| id | question    |
+----+-------------+
| 1  | Is it this? |
| 2  | Or this?    |
| 3  | Or that?    |
+----+-------------+

Results Table
+----+---------+--------+
| id | user_id | job_id |
+----+---------+--------+
| 1  | 1       | 1      |
| 2  | 1       | 3      |
| 3  | 2       | 3      |
+----+---------+--------+

Answers table
+----+-------------------------+--------------+
| id | answer | fk_question_id | fk_result_id |
+----+-------------------------+--------------+
| 1  | Yes    | 1              | 1            |
| 2  | No     | 2              | 1            |
| 3  | Maybe  | 3              | 1            |
| 4  | Maybe  | 1              | 2            |
| 5  | No     | 2              | 2            |
| 6  | Maybe  | 3              | 2            |
| 7  | Yes    | 1              | 3            |
| 8  | Yes    | 2              | 3            |
| 9  | No     | 3              | 3            |
+----+-------------------------+--------------+ 
```

如果可能的话，我想将问题答案显示为每个结果集的列，如下所示。

```
+-----------+---------+--------+-------------+----------+----------+
| result_id | user_id | job_id | Is it this? | Or this? | Or that? |
+-----------+---------+--------+-------------+----------+----------+
| 1         | 1       | 1      | Yes         | No       | Maybe    |
| 2         | 1       | 3      | Maybe       | No       | Maybe    |
| 3         | 2       | 3      | Yes         | Yes      | No       |
+-----------+---------+--------+-------------+----------+----------+ 
```

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:16:32.167

```
SELECT  a.ID,
        a.user_ID,
        a.job_id,
        MAX(CASE WHEN c.question = 'Is it this?' THEN b.answer END) 'Is it this?',
        MAX(CASE WHEN c.question = 'Or this?' THEN b.answer END) 'Or this?',
        MAX(CASE WHEN c.question = 'Or that? ' THEN b.answer END) 'Or that? '
FROM    Results a
        INNER JOIN Answers b
            ON a.id = b.fk_result_id
        INNER JOIN Question c
            ON b.fk_question_id = c.ID
GROUP   BY a.ID,
        a.user_ID,
        a.job_id 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/37a94/1)

如果您有未知数量的问题（*特别是像 Matei Mihai 所说的 1000 个*），则非常需要动态版本。

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN c.question = ''',
      question,
      ''' then b.answer end) AS ',
      CONCAT('`',question,'`')
    )
  ) INTO @sql
FROM Question;

SET @sql = CONCAT('SELECT  a.ID,
                            a.user_ID,
                            a.job_id, ', @sql, ' 
                    FROM    Results a
                            INNER JOIN Answers b
                                ON a.id = b.fk_result_id
                            INNER JOIN Question c
                                ON b.fk_question_id = c.ID
                    GROUP   BY a.ID,
                            a.user_ID,
                            a.job_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/37a94/5)

输出

```
╔════╦═════════╦════════╦═════════════╦══════════╦══════════╗
║ ID ║ USER_ID ║ JOB_ID ║ IS IT THIS? ║ OR THIS? ║ OR THAT? ║
╠════╬═════════╬════════╬═════════════╬══════════╬══════════╣
║  1 ║       1 ║      1 ║ Yes         ║ No       ║ Maybe    ║
║  2 ║       1 ║      3 ║ Maybe       ║ No       ║ Maybe    ║
║  3 ║       2 ║      3 ║ Yes         ║ Yes      ║ No       ║
╚════╩═════════╩════════╩═════════════╩══════════╩══════════╝ 
```

# android - Android：无法打开文件 磁盘空间不足

> ID：15656274
> 
> 赞同：2
> 
> 时间：2013-03-27T10:11:15.590
> 
> 标签：android, file, xml-parsing, memorycache

我有一个应用程序包括读取和保存一个 xml 文件并在互联网连接可用时写入它，否则它将读取已保存在终端上的文件。

WriteFeed 函数：

```
// Method to write the feed to the File
            private void WriteFeed(RSSFeed data) {

                FileOutputStream fOut = null;
                ObjectOutputStream osw = null;

                try {
                    fOut = openFileOutput(fileName, MODE_PRIVATE);
                    osw = new ObjectOutputStream(fOut);
                    osw.writeObject(data);
                    osw.flush();
                }

                catch (Exception e) {
                    e.printStackTrace();
                }

                finally {
                    try {
                        fOut.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            } 
```

WriteFeed 函数：

```
// Method to read the feed from the File
            private  RSSFeed ReadFeed(String fName) {

                FileInputStream fIn = null;
                ObjectInputStream isr = null;

                RSSFeed _feed = null;
                File feedFile = getBaseContext().getFileStreamPath(fileName);
                if (!feedFile.exists())
                    return null;

                try {
                    fIn = openFileInput(fName);
                    isr = new ObjectInputStream(fIn);

                    _feed = (RSSFeed) isr.readObject();
                }

                catch (Exception e) {
                    e.printStackTrace();
                }

                finally {
                    try {
                        fIn.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }

                return _feed;

            } 
```

我有足够的磁盘空间，有时我得到“MemoryCach 将使用高达 16 Mb”，总是得到“磁盘空间不足，不会索引”和“功能代码 > 无法打开文件”

我的应用有什么问题？

# mongodb - $exists:false 是否使用索引？

> ID：15656277
> 
> 赞同：1
> 
> 时间：2013-03-27T10:11:31.337
> 
> 标签：mongodb, indexing

我们有以下用例： 由于协议原因，我们不会从数据库中删除已删除或更新的记录。我们`$set`将他们的`deleted`字段记录到更新/删除的日期/时间并创建新记录（如果已更新）。所以所有“当前”记录都没有“`deleted`字段”。当前记录上的所有索引看起来像这样：

```
{ 
    field_a: 1, 
    field_b: 1, 
    ..., 
    deleted: 1 
} 
```

有关当前记录的查询如下所示：

```
find( {
    field_a: "...", 
    field_b: "...", 
    deleted: { $exists: false}
} ) 
```

因为我不确定是否`{$exists: false}`使用索引，所以我添加了一个`current`设置`true`为所有当前字段（没有的字段`deleted`）的字段，并将索引更改为：

```
{ 
    field_a: 1, 
    field_b: 1, 
    ..., 
    current: 1 
} 
```

和我的查询：

```
find( {
    field_a: "...", 
    field_b: "...", 
    current: true
} ) 
```

谁能告诉我后一种情况是否真的更好？或者他们是否表现得很好，我可以节省额外的`current`领域？

感谢您的任何提示。

# c# - C# 清除/设置为空后重新填充字典

> ID：15656279
> 
> 赞同：4
> 
> 时间：2013-03-27T10:11:33.817
> 
> 标签：c#, dictionary, combobox, datasource, keyvaluepair

我有一本充满 KeyValuePairs (equalityMap) 的字典，我用它来填充组合框 (comBox1)。

我想调用下面的函数作为初始化 comBox1 的一部分。然后，我有一个来自另一个组合框 (comBox2) 的 selectedValueChanged 事件，它调用以下函数并根据 comBox2 的选定值的类型更改 comBox1 的内容。

首次初始化等式组合框时，一切都按预期工作。但是，当再次调用此函数时，组合框中不仅会显示“键”，还会以 [“键”，“值”] 的格式显示“键”和“值”

我才刚开始使用 c#（或任何带有 GUI 的东西），所以不确定调试这样的东西的最佳方法。任何帮助表示赞赏。

```
public void popEqualities(String fieldType)
    {

        this.equalities.DataSource = null;
        this.equalities.Items.Clear();
        this.equalityMap.Clear();

        if (fieldType == "string")
        {
            equalityMap.Add("is", "=");
            equalityMap.Add("is not", "!=");
            equalityMap.Add("contains", "CONTAINS");
            equalityMap.Add("begins with", "LIKE '%");
        }
        else if (fieldType == "int")
        {
            equalityMap.Add("is equal to", "=");
            equalityMap.Add("is not equal to", "!=");
            equalityMap.Add("is greater than", ">");
            equalityMap.Add("is less than", "<");
        }
        else if (fieldType == "date")
        {
            equalityMap.Add("is", "=");
            equalityMap.Add("is not", "!=");
            equalityMap.Add("is after", ">");
            equalityMap.Add("is before", "<");
        }
        else if (fieldType == "boolean")
        {
            equalityMap.Add("is", "=");
        }
        else
        {
            MessageBox.Show("Recieved bad Field Type");
            return;
        }

        this.equalities.DisplayMember = "Key";
        this.equalities.ValueMember = "Value";
        this.equalities.DataSource = new BindingSource(equalityMap, null);
    } 
```

编辑：要声明权益图，我调用

```
this.equalityMap = new Dictionary<string, string>(); 
```

在类构造函数中，并将以下内容作为类的私有成员。

```
private Dictionary<string, string> equalityMap 
```

调用这个函数的事件很简单

```
public void searchFieldChanged(object sender, EventArgs e)
    {
        string fieldType = getFieldType();
        popEqualities(fieldType);
    } 
```

这是几张图片来显示问题 在最初的通话中

![初次通话](../Images/0613aa1e3792c7b159262c2f1114b818.png).

在随后的通话中

![随后的电话](../Images/cf39872a98c6fac55e3087055b818110.png).

**固定的：**

事实证明，当我重新绑定 DataSource 时，它​​每次都清除 DisplayMember 属性 -

```
this.equalities.DisplayMember = "Key"; 
```

当您将重新绑定数据源的行移到这些分配之上时，它可以解决问题。

```
this.equalities.DataSource = new BindingSource(equalityMap, null);
this.equalities.DisplayMember = "Key";
this.equalities.ValueMember = "Value"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:16:40.273

a 中的条目`System.Collections.Generic.Dictionary`包含属性`Key`并`Value`显示内容。如果只显示一个条目，则隐式使用`ToString()`- 方法，该方法会将条目的内容显示为`["key", "value"]`.

如果您只想显示密钥，则必须使用`Key`-property 并将其打印出来。

看看[MSDN](http://msdn.microsoft.com/en-us/library/xfhwa508%28v=vs.110%29.aspx)和`System.Collections.Generic.Dictionary<TKey, TValue>`.

# linux - 如何转义变量以与 sed 一起使用？

> ID：15656280
> 
> 赞同：0
> 
> 时间：2013-03-27T10:11:36.563
> 
> 标签：linux, bash, shell, sed

我有一个变量`$salts`等于

```
define('AUTH_KEY', 'sBXb~#HPv(X>|2o2&C K&9@l+0.$M,(7-0sW.lpziIZ_EBbHIu3^S}OM-^n,)L S'); define('SECURE_AUTH_KEY', 'RX=tc=pj)y0he{FOqZp/:W{5{@[tnxUv3W_hZ+g4gL)]p!xH-.qb6]O$VHc5V@}1'); define('LOGGED_IN_KEY', '0cUHd}{d)g0X~%Qwy8wKc)cxxXFp2/wCcS=/-sH3z84jz47cV#9|%)1-uTtey(s1'); define('NONCE_KEY', 'J|_J>;_xvHA_UQ^5WDpnpq%,vy{WgNBc{K(SSqwFlwhZCCm>Db^cnBy%9X_q[<^E'); define('AUTH_SALT', '?S15/b~oVY&|ZZp]W<B%uF$<C6c%lIe_!nrVmmPWO`[37C45w9Oju!+xrL~zLnlM'); define('SECURE_AUTH_SALT', 'iX-i>DWhT-0[E1H,[Qqmx;w}$N{B,QAF$W^m9]!1!|_y58aYnHAcXL)l~L|}W39W'); define('LOGGED_IN_SALT', 'qN!?,ORKqNBv@Mf8hb]#VLVYY>+=w*M]|=x^!)>wEl%[]R+(jD{VKOSQueiB8eo('); define('NONCE_SALT', '>,i@yn,CIb<vKOR(2[]*x)SBZzy[T]cq%|[}LBFALEPULwEVa*%C;?b$CZIS-#;*'); 
```

我正在尝试执行命令

```
cat -n wp-config.php | sed '45,52d' | sed "45i ${salts}" 
```

并得到错误

```
sed: -e expression #1, char 102: extra characters after command 
```

如何`$salts`为 sed 转义变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:12:02.633

只需使用 awk，这样您就不必在余生中使用 sed 在哪些上下文中找出需要转义的字符 - 这是一个无法解决的问题，并且解决方案在 awk 中微不足道，而且您不需要 cat 和多个管道任何一个：

```
awk -v salts="$salts" '
   NR==45 { $0 = salts }
   (NR < 46) || (NR > 52) { print NR, $0 }
' wp-config.php 
```

sed 是用于在单行上进行简单替换的出色工具，其他任何事情只需使用 awk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:37:07.167

这行得通

```
cat -n wp-config.php | sed  '45,52d' | sed "45i $(echo $salts | sed -e 's/[\/&]/\\&/g')" 
```

`$salts`有特殊含义的字符`sed`需要先转义。

您可以通过以下方式转义变量：

```
echo $VARNAME | sed -e 's/[\/&]/\\&/g' 
```

# jquery - 使用 Visual Website Optimizer 的 HTML DOM 事件

> ID：15656286
> 
> 赞同：0
> 
> 时间：2013-03-27T10:11:54.543
> 
> 标签：jquery, dom, optimization

我试图在网站上进行 AB 测试，但我无法在原始变体中编辑任何内容，我想在假控制页面和变体页面上自定义转换目标。

如果我使用以下代码请求外部 js 文件

```
$(document).ready(function() {
    $('.lLink a').attr("onclick", "if(typeof(_vis_opt_top_initialize) == 'function') { _vis_opt_goal_conversion(204); _vis_opt_pause(500);}");
}); 
```

一切正常。如果我删除外部资源并尝试在 VWO 中执行它，它就不起作用。

所以我要做的是在链接上放置一个自定义转换目标。我在添加 css/js 选项中使用以下内容来执行此操作：

```
vwo_$('.lLink a').attr("onclick", "if(typeof(_vis_opt_top_initialize) == 'function') { _vis_opt_goal_conversion(204); _vis_opt_pause(500);}"); 
```

我正在运行测试，没有任何反应。

然后我尝试从控制台在站点上做同样的事情，没有。

再次在控制台我累了 `vwo_$('.lLink a').attr("WHATEVER", "if(typeof(_vis_opt_top_initialize) == 'function') { _vis_opt_goal_conversion(204); _vis_opt_pause(500);}");`

它奏效了。

那么 VWO 和 HTML DOM 事件有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:52:22.673

问题在于，如果将 DOM 添加到 Add JS/CSS 选项中，您不会等待 DOM 准备好。因此，请在 Add JS/CSS 选项中使用以下代码：

```
vwo_$(function() {
    vwo_$('.lLink a').attr("onclick", "if(typeof(_vis_opt_top_initialize) == 'function') { _vis_opt_goal_conversion(204); _vis_opt_pause(500);}");
}); 
```

# jetty - 具有 2 个 ContextHandlers 的嵌入式 Jetty 应用程序在同一端口上侦听 - 加载问题

> ID：15656289
> 
> 赞同：0
> 
> 时间：2013-03-27T10:12:10.457
> 
> 标签：jetty, threadpool

我的嵌入式码头应用程序（使用 6.1.26 码头）注册了 2 个上下文处理程序。两者都在同一个端口监听。下面是示例。

```
Server s = new Server();
Connector c = new SelectChannelConnector();
((SelectChannelConnector)connector).setAcceptors(2);
connector.setHost(IP);
connector.setPort(port);
server.addConnector(connector);

ContextHandler context1 = new ContextHandler();
context.setContextPath("/abc");
context.setHandler(handler1);
context.setAllowNullPathInfo(true);

ContextHandler context2 = new ContextHandler();
context2.setContextPath("/xyz");
context2.setHandler(handler2);
context2.setAllowNullPathInfo(true);

ContextHandlerCollection hc = new ContextHandlerCollection();
hc.addHandler(context1);
hc.addHandler(context2);

server.setHandler(hc);
server.start(); 
```

我还使用了在服务器级别设置的线程池。当我向一个上下文发送请求并对其施加负载以便使用所有线程时，那时当我向第二个上下文发送请求时，需要花费时间来处理对第二个上下文的请求。

我还尝试通过在 SelectChannelConnector 级别设置线程池并尝试过。还尝试使用相同的主机/端口添加更多连接器，以便每个连接器都有自己的线程池。

我的要求是，当一个上下文处于负载状态时，其他上下文（但端口相同）不应延迟处理。

我可以为每个上下文设置专用线程池吗？有没有其他解决方法。感谢对此的回复。

谢谢萨拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:54:15.287

With Jetty, the ThreadPool is at the connector level you can't have 2 different ThreadPools for handling different contexts. As the connector accepts the request, it pulls a Thread from the ThreadPool, and hands it off to the Server.getHandler() chain. at which point it goes through the hierarchy of handlers until one of your Contexts is used.

This means that the knowledge of the context comes in far too late to split up the ThreadPools.

Have you tried upgrading to Jetty 8 or Jetty 9 and using [Async processing](http://wiki.eclipse.org/Jetty/Feature/Continuations#Why_Asynchronous_Servlets_.3F) instead?

Or have you tried using the [QoSFilter](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/servlets/QoSFilter.html) in Jetty 7, 8, or 9 to prioritize the handling better?

# c# - 当我更改 combobox1 时，它也会更改 combobox2 中的值（两者都使用相同的列表）

> ID：15656303
> 
> 赞同：0
> 
> 时间：2013-03-27T10:12:40.230
> 
> 标签：c#, winforms

我的winform上有2个组合框。两个组合框都由下面的列表加载。一切正常。除了，当我更改 Combobox1 中的值时，它也会更改 combobox2 中的值......对于其他组合框也是如此。当我更改组合框 2 中的值时，它会在组合框 1 中更改...。

两者都必须使用相同的值列表。所以这就是我只绑定到同一个列表（_item）的原因。

那么我需要做什么才能将两个组合框相互分离？

```
 IList<CompteGeneral> _item = new List<CompteGeneral>(compt_repository.GetAll);
            combobox1.DataSource = _item;
            combobox1.DisplayMember = "AccountNumber";

            combobox2.DataSource = _item;
            combobox2.DisplayMember = "AccountNumber"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:17:32.897

```
IList<CompteGeneral> _item = new List<CompteGeneral>(compt_repository.GetAll);
IList<CompteGeneral> _item1 = new List<CompteGeneral>(compt_repository.GetAll);
combobox1.DataSource = _item;
combobox1.DisplayMember = "AccountNumber";

combobox2.DataSource = _item1;
combobox2.DisplayMember = "AccountNumber"; 
```

或者

```
IList<CompteGeneral> _item = new List<CompteGeneral>(compt_repository.GetAll);
BindingSource source=new BindingSource();
source.DataSource=_item ;
BindingSource source1=new BindingSource();
source1.DataSource=_item ;

combobox1.DataSource = source;
combobox1.DisplayMember = "AccountNumber";

combobox2.DataSource = source1;
combobox2.DisplayMember = "AccountNumber"; 
```

[例子](http://blogs.msdn.com/b/bethmassi/archive/2007/09/19/binding-multiple-comboboxes-to-the-same-datasource.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:20:48.173

`_item1`通过在构造函数中传递 来创建具有相同项目的新列表。

将新列表分配给第二个组合框。

```
 IList<CompteGeneral> _item1 = new List<CompteGeneral>(compt_repository.GetAll);

        IList<CompteGeneral> _item2 = new List<CompteGeneral>(_item1);

        combobox1.DataSource = _item1;
        combobox1.DisplayMember = "AccountNumber";

        combobox2.DataSource = _item2;
        combobox2.DisplayMember = "AccountNumber"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:03:52.630

`ICloneable`从接口实现克隆方法`CompteGeneral`

```
 IList<CompteGeneral> _item = new List<CompteGeneral>(compt_repository.GetAll);
            combobox1.DataSource = _item;
            combobox1.DisplayMember = "AccountNumber";

            combobox2.DataSource = _item.Select(p => p.Clone()).ToList();
            combobox2.DisplayMember = "AccountNumber"; 
```

克隆对象时还要搜索 ShallowCopy 和 DeepCopy 范例。

# ruby-on-rails - 安装了 Sqlite3 但说不是

> ID：15656311
> 
> 赞同：0
> 
> 时间：2013-03-27T10:12:51.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, macports

我正在阅读安装 Rails 的教程。当我第一次尝试使用 MacPorts 使用“sudo port upgrade sqlite3”升级 sqlite3 时，我得到的响应是“未安装 sqlite3”；但是，当我问“哪个 sqlite3”时，我得到了“/usr/bin/sqlite3”的路径，我也尝试在该路径中运行“sudo port upgrade sqlite3”，但没有运气。

是安装还是没安装？我应该如何进行 sqlite 和 Rails 的升级/安装？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:27:02.070

自从

```
which sqlite3 
```

回答'/usr/bin/sqlite3'，我会说你的系统上安装了sqlite3。你也可以试试

```
sqlite3 
```

哪个应该回答（版本可能不同）

```
SQLite version 3.7.12 2012-04-03 19:43:07
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> 
```

退出：

```
.quit 
```

我会继续尝试安装 gem：

```
gem install sqlite3 
```

如果它没有抱怨你很高兴，否则发布错误消息。

另外一条建议是，我在 MacPorts 方面有过一些不好的体验，请尝试使用[Homebrew](http://mxcl.github.com/homebrew/)。

hth

# clearcase - ClearCase 动态视图不显示空文件

> ID：15656312
> 
> 赞同：1
> 
> 时间：2013-03-27T10:12:54.973
> 
> 标签：clearcase

我们通常使用快照视图，它们工作得很好。
但是，我最近尝试使用动态视图并且没有在工作目录中显示空文件。我们使用 Python，即它不会显示空`__init__.py`文件，这会破坏我们的大部分代码。同一目录中的所有其他文件，并且存在非空`__init__.py`文件。

这是一个已知的问题？我能做些什么？

* * *

运行`cleartool ls`说明`__init__py`文件：“未选择版本”。

我的配置规范看起来像这样：

```
element * CHECKEDOUT
element * SubComponenet1_VersionX
element * SubComponenet2_VersionY
element * SubComponenet3_VersionZ
element /src_base /main/LATEST 
```

假设空文件在里面`src_base`并考虑最后一条规则，文件怎么可能没有选定的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:17:47.957

首先，尝试`cleartool ls`在这些文件的父目录中，在 shell 或 DOS 窗口中。

您可以在那里查看状态，并查看它们是否被您的配置规范选择。

还要检查您的动态视图的配置规范是否类似于您的快照视图：

*   `cleartool catcs`在您的快照视图中
*   `cleartool edcs`从您的动态视图

对于反映 UCM 快照视图的非 UCM 动态视图，它可能非常复杂。
最好在同一 Stream 上创建动态 UCM 视图。

至少，您的配置规范应该以[stop-rule](https://stackoverflow.com/a/12529284/6309)结尾：

```
element * /main/LATEST
# or
element /src_base/... /main/LATEST 
```

您的最后一条规则仅适用于 /src_base 目录，而不适用于子元素。

# jquery - 异步功能完成后重新加载当前页面

> ID：15656313
> 
> 赞同：0
> 
> 时间：2013-03-27T10:12:55.477
> 
> 标签：jquery, asynchronous

Arrghh，我知道有办法做到这一点，但它对我不起作用。

我有一个页面，如果它们存在于我的数据库中，则加载时会亮起图标。

仍然被禁用的图标有一个连接到它们的点击功能。这个 onclick-function 然后调用另一个将图标添加到我的数据库的函数（这是一个异步函数）。完成此异步功能后，我想重新加载页面，以便我的图标再次亮起，这次是添加到我的数据库中的新图标。

它确实会重新加载，但要快。它似乎没有等待异步功能完成。换句话说，我的图标在单击时不会亮起，但是当我在单击后手动刷新页面时，图标会亮起。

这是我认为应该起作用的功能。

```
$.when(addUserToNetwork(response.email, 2, response.id)).done(function(){location.reload();}); 
```

这个：

```
addUserToNetwork() 
```

是我的异步函数。完成后，我想重新加载页面。

我究竟做错了什么？

这是我的 addUserToNetwork 函数（）代码：

```
 function addUserToNetwork(_email, _networkID, _idAtNetwork){
   return $.ajax({
      url: '/fb/updateUserNetwork',
      type: 'POST',
      contentType: 'application/json',
      data: JSON.stringify({email:_email, networkID:_networkID, idAtNetwork:_idAtNetwork}),
      dataType: 'xml/html/script/json'
    });
 } 
```

# c++ - 为什么指向 char 的指针与其他数据类型的指针的行为不同

> ID：15656320
> 
> 赞同：2
> 
> 时间：2013-03-27T10:13:20.980
> 
> 标签：c++, pointers, char

我对以下陈述有疑问；

```
int intvalue = 3;
int *pointInt = &intvalue;

char* p = "string";
cout << pointInt << std::endl;  // this will give memory location of intvalue which is ok.
cout << p<< std::endl; // why this will give string value  rather than memory location of where string is stored? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:14:59.173

因为存在 的[重载`std::ostream& operator<<(std::ostream&, const char*)`](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2)，它假定是以[空字符结尾的字符串](http://en.wikipedia.org/wiki/Null-terminated_string)`char*`的第一个元素并打印出整个字符串。

通过尝试流式传输*不是*以 null 结尾的字符串的第一个元素的 a `char*`，您可以获得很多乐趣：

 *```
#include <iostream>
int main()
{
  char c = 'x';
  std::cout << &c << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:16:17.157

`char*`并且`const char*`最常用于指向 C 风格的以空字符结尾的字符串。标准 I/O 库在传递其中一种类型以插入或提取时考虑了这一点。根据想要打印出 C 样式字符串的常见程度，这些函数被简单地设计为具有这种特殊情况。

要获取指针值，您可以尝试转换为不同的指针类型：

```
std::cout << static_cast<void*>(p) << std::endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:15:29.207

关键字运算符重载 - iostream 实例的另一种方法`std::cout`负责处理字符并以不同方式处理。确切的实现也可以产生“Hello World”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:15:59.320

```
cout << (void *) p << std::endl; 
```

我希望这是因为`<<`运算符对参数有一个特定的覆盖`char*`，以输出字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T10:16:25.550

这是`operator<<()`cout 对象的类型作为第一个参数和类型`char*`或`const char*`作为第二个的重载。

有很多这样的重载，你也可以写一些。

这种特殊重载的原因是“打印” C 风格的字符串（以空字符结尾的 char 数组）*

# resharper - 突出显示文件中的用法 - Resharper 颜色设置

> ID：15656321
> 
> 赞同：1
> 
> 时间：2013-03-27T10:13:25.230
> 
> 标签：resharper

当我在 Resharper 中使用“突出显示文件中的用法”时，我的文本编辑器中没有突出显示任何内容。我看到底部的结果栏告诉“找到...的 x 用法”。所以 Resharper 找到了它，但不知何故我失去了颜色。

你知道我可以在哪里设置吗？我在 VS 的字体和颜色设置中考虑了 Resharper_Highlght，但它一定是为了别的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:32:17.960

在这种情况下，读取使用和写入使用设置应确定颜色。

转到`Tools -> Options -> Fonts and Colors`，在“显示项目”列表中找到`ReSharper Read Usage`并`ReSharper Write Usage`尝试设置背景颜色。

虽然“项目前景”似乎对我不起作用，但“项目背景”工作正常，所以我希望它也能帮助你！

# c# - 关于使用ManualResetEvent使用c#？

> ID：15656326
> 
> 赞同：13
> 
> 时间：2013-03-27T10:13:32.213
> 
> 标签：c#, manualresetevent

我不熟悉 ManualResetEvent 的用法？

是否与线程有关。它做什么以及何时使用？

在这里，我得到了一个使用 ManualResetEvent 的代码，但我只是不明白它的作用？

这是代码

```
public class Doc : SomeInterfaceFromTheDll
{
  private readonly IVersion version; // An interface from the DLL.
  private readonly ManualResetEvent _complete = new ManualResetEvent(false);

  private bool downloadSuccessful;

  // ...

  public bool Download()
  {
    this.version.DownloadFile(this);
    // Wait for the event to be signalled...
    _complete.WaitOne();
    return this.downloadSuccessful;
  }

  public void Completed(short reason)
  {
    Trace.WriteLine(string.Format("Notify.Completed({0})", reason));
    this.downloadSuccessful = reason == 0;
    // Signal that the download is complete
    _complete.Set();
  }

  // ...
} 
```

是什么意思`_complete.WaitOne(); & _complete.Set(); ?`

谁能给我一些ManualResetEvent类使用的小示例代码。

正在寻找 ManualResetEvent 的良好讨论和用法？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T10:23:16.283

[我建议您阅读MSDN 页面`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)的“备注”部分，其中非常清楚此类的用法。

为了回答您的具体问题，即使它是异步的，它`ManualResetEvent`也用于模拟同步调用。`Download`它调用异步方法并阻塞，直到`ManualResetEvent`发出信号。在`ManualResetEvent`基于异步事件的模式的事件处理程序中发出信号。所以基本上它会等到事件被触发并执行事件处理程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-22T08:45:46.213

换句话说，为了深入理解任何主题，我必须阅读几乎相同的信息。我已经阅读了有关 ManualResetEvent 的 MSDN 文档，这很好，我几乎要理解它，但是这个链接帮助我很好地理解了它：

[http://dotnetpattern.com/threading-manualresetevent](http://dotnetpattern.com/threading-manualresetevent)

**非常简单的解释**

如果当前线程调用**WiatOne()**方法，它将等待（所以停止做任何事情），直到任何其他线程调用**Set()**方法。

WaitOne 的另一个重载是**WaitOne(TimeSpan)**。这和上面的几乎一样，但是如果给这个方法**5 秒**的时间，当前线程将等待其他线程调用**Set()**方法**5 秒** ，如果没有人调用**Set()**，它自动调用它并继续工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-04T14:06:37.433

ManualSetEvent 是一个类，当某个线程必须停止并等待完成另一个线程（线程）时，它可以帮助您管理不同线程之间的通信，那么该类非常有用。

# php - 在php中创建搜索框

> ID：15656329
> 
> 赞同：0
> 
> 时间：2013-03-27T10:13:46.147
> 
> 标签：php, html, mysql, xampp

这是我的数据库中搜索框的编码，但是当我运行它时，它显示错误通知：未定义变量：在第 15 行的 /opt/lampp/htdocs/1234.php 中搜索然后 ii 在我的搜索框中键入任何内容它说对象未找到！

在此服务器上找不到请求的 URL。引用页面上的链接似乎是错误的或过时的。请将该错误通知该页面的作者。

如果您认为这是服务器错误，请联系网站管理员。

错误 404

本地主机 Apache/2.4.3 (Unix) OpenSSL/1.0.1c PHP/5.4.7

```
 <html>
  <h2>Search</h2> 
  <form name="search" method="post" action="<?=$PHP_SELF?>">
  Seach for: <input type="text" name="find" /> in 
  <Select NAME="field">
  <Option VALUE="fname">diseasename</option>
  <Option VALUE="lname">genename</option>
  </Select>
  <input type="hidden" name="searching" value="yes" />
  <input type="submit" name="search" value="Search" />
  </form>
  </html>
  <?php 
  //This is only displayed if they have submitted the form 
  if ($searching =="yes") 
  { 
  echo "<h2>Results</h2><p>"; 

  //If they did not enter a search term we give them an error 
  if ($find == "") 
  { 
  echo "<p>You forgot to enter a search term"; 
  exit; 
  } 

  // Otherwise we connect to our Database 
  mysql_connect("localhost", "root", "****") or die(mysql_error()); 
  mysql_select_db("missensencemuttation") or die(mysql_error()); 

  // We preform a bit of filtering 
  $find = strtoupper($find); 
  $find = strip_tags($find); 
  $find = trim ($find); 

  //Now we search for our search term, in the field the user specified 
  $data = mysql_query("SELECT * FROM users WHERE upper($field) LIKE'%$find%'"); 

  //And we display the results 
  while($result = mysql_fetch_array( $data )) 
  { 
  echo $result['fname']; 
  echo " "; 
  echo $result['lname']; 
  echo "<br>"; 
  echo $result['info']; 
  echo "<br>"; 
  echo "<br>"; 
  } 

  //This counts the number or results - and if there wasn't any it gives them a little message explaining that 
  $anymatches=mysql_num_rows($data); 
  if ($anymatches == 0) 
  { 
  echo "Sorry, but we can not find an entry to match your query<br><br>"; 
  } 

  //And we remind them what they searched for 
  echo "<b>Searched For:</b> " .$find; 
  } 
  ?> 
```

我不知道我在脚本中做错了什么。我是 php 的初学者，我正在使用互联网参考来获取 php 的知识。可以纠正这个脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:17:12.593

`$searching`目前在脚本中没有定义。我想你的意思是`$_POST['searching']`。

在比较周围添加一个`if (isset($_POST['searching'])) { //old if }`以确保`$_POST['searching']`已设置并替换`$searching`为`$_POST['searching']`

编辑：替换`$PHP_SELF`为`$_SERVER['PHP_SELF']`，这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:16:52.590

使用如下：

```
extract($_POST);
 if ($searching =="yes") 
```

# ios - 使用 Facebook 为 iOS 设置 Firebase 简单登录

> ID：15656330
> 
> 赞同：1
> 
> 时间：2013-03-27T10:13:49.937
> 
> 标签：ios, facebook, firebase

我是第一次使用 iOS 设置 Firebase，我在使用 Facebook 身份验证设置的简单登录时遇到了一些问题。

## 问题

我在模拟器中运行它 - 这可能是我的问题，因为模拟器没有 Facebook 应用程序或 Facebook 集成？但我目前没有 Apple Developer 帐户。

我希望这会触发 Facebook 应用程序中的 Facebook 身份验证视图，或者如果设备上未安装该应用程序，请切换到 Safari 并使用正常的身份验证页面，但没有任何反应。

## 设置

据我了解，这些是使其运行的最低要求：

1.  一个 Facebook 应用程序：
    *   Facebook 登录 URL 定义为的网站：[https ://auth.firebase.com/auth/facebook/callback](https://auth.firebase.com/auth/facebook/callback)
    *   与 XCode 项目目标摘要中的 Bundle 标识符匹配的原生 iOS 应用程序 Bundle ID
2.  一个 iOS 项目：
    *   将二进制文件与库链接：
        *   Firebase.framework
        *   Foundation.framework（显然...... :)）
        *   libicucore.lib
        *   安全框架
        *   CFNetwork.framework
        *   FirebaseAuthClient.framework
        *   Accounts.framework
        *   社会框架
    *   -ObjC 在其他链接器标志下
    *   将 Bundle 标识符与 Facebook 应用 Bundle ID 匹配
3.  Facebook 应用 ID 和应用机密添加到 Firebase Forge 中的 Auth

在此处查看我的 Facebook 应用程序设置（屏幕截图）： http: [//flashpatric.com/wp-content/uploads/2013/03/facebookSetup.png](http://flashpatric.com/wp-content/uploads/2013/03/facebookSetup.png)

**代码：**

```
Firebase* ref = [[Firebase alloc] initWithUrl:@"https://xxx.firebaseio.com"];
FirebaseAuthClient* authClient = [[FirebaseAuthClient alloc] initWithRef:ref];

[authClient loginToFacebookAppWithId:@"xxx-facebook-app-id-xxx" permissions:@[@"email"] withCompletionBlock:^(NSError *error, FAUser *user) {
    if (error != nil) {
        // There was an error logging in
        NSLog(@"There was an error logging in: code = %d", [error code]);
        NSLog(@"%@", error);
    } else {
        // We have a logged in facebook user
        NSLog(@"We have a logged in facebook user: %@",user);
    }
}];

[authClient checkAuthStatusWithBlock:^(NSError* error, FAUser* user) {
    if (error != nil) {
        NSLog(@"Oh no! There was an error performing the check %@",error);
    } else if (user == nil) {
        NSLog(@"No user is logged in");
    } else {
        NSLog(@"There is a logged in user %@",user);
    }
}]; 
```

**输出：**

```
2013-03-27 11:10:08.900 firebase[18729:1303] There was an error logging in: code = 6
2013-03-27 11:10:08.905 firebase[18729:1303] Error Domain=com.apple.accounts Code=6 The operation couldn’t be completed. (com.apple.accounts error 6.)
2013-03-27 11:10:08.924 firebase[18729:c07] No user is logged in 
```

好的，我在这里遗漏了一些明显的东西，还是我的问题只是 iOS 模拟器问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:24:00.440

你需要一些东西来使用 Facebook auth，它应该在模拟器上工作：

1.  Facebook 上的应用程序设置。听起来你已经有了这个
2.  在您的模拟器上设置 Facebook 帐户。目前，FirebaseAuthClient 不与 Facebook 应用程序交互，它只是使用内置于 iOS 的原生 Facebook 集成。
3.  确保您拥有最新版本的 FirebaseAuthClient。截至目前，它是 1.0.1，您可以在这里获得它：[https ://www.firebase.com/docs/downloads.html](https://www.firebase.com/docs/downloads.html)
4.  确保您已在 Forge 中启用 Facebook 身份验证。从您的描述看来，您已经这样做了。

根据您收到的错误，我的猜测是您缺少第 2 步。在您的模拟器上，转到“设置”->“Facebook”并登录到一个帐户。

# iphone - 实时图像处理 (OCR)

> ID：15656331
> 
> 赞同：15
> 
> 时间：2013-03-27T10:13:50.453
> 
> 标签：iphone, ios, image-processing, ocr, augmented-reality

我打算开发一个像[Word Lens](https://itunes.apple.com/in/app/word-lens/id383463868?mt=8)这样的应用程序。任何人都可以推荐一个我可以使用的好图书馆吗？或任何人解释 Word Lens 应用程序背后的技术？是卷轴时间图像匹配还是 OCR？我知道一些图像处理库，如 OpenCv、tesseract ......任何帮助都非常感谢......

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-28T05:59:34.813

我是 Word Lens 的创建者之一。虽然有一些 OCR 库（如 tesseract），但我们决定自己制作，以获得更好的结果和性能。我们的通用算法是这样的：

1.  从相机复制图像并获取其灰度分量
2.  平整图像，使文本在背景中清晰突出
3.  在看起来像字符和句子的东西周围画框
4.  进行 OCR：将每个框中的像素与字符数据库进行匹配——这实际上非常困难！
5.  把字符收集成单词，查字典（这也很难，因为OCR会出错）
6.  将结果绘制回图像上

图像匹配本身还不够好，因为字体、单词和语言种类繁多。

OpenCV 是一个很好的库，可以启动和运行，并总体上了解更多关于计算机视觉的信息。我建议建立他们的例子，并在那里玩。玩得开心！

# mysql - 如何在sql中给出出现次数

> ID：15656332
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:13:50.787
> 
> 标签：mysql, sql

我想在 sql 结果中给出出现次数，例如我有这样的表：

```
ID| Name | Login Date
1 |John  | 12/1/2013
2 |John  | 15/1/2013
3 |Ben   | 12/2/2013 
```

现在我想要额外的专栏来了解他们登录的时间：

```
ID| Name | Visit times
1 |John  |1
2 |John  |2 
3 |Ben   |1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:38:34.713

```
SELECT  t1.ID
,       t1.Name
        (
        SELECT  COUNT(t2.ID)
        FROM    tablename AS t2
        WHERE   t1.Name = t2.Name
                and t2.ID <= t1.ID
        ) AS 'Visit times'
FROM    tablename AS t1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:43:32.993

您的问题已在[此帖子](https://stackoverflow.com/questions/3162389/multiple-ranks-in-one-table/)中解决。

适应你的桌子：

```
CREATE TABLE IF NOT EXIST staging_table (
      id
    , name
    , visit_sequence
)
    SELECT id
         , name
         , (
              CASE name
              WHEN @curType THEN @curRow := @curRow + 1 
                            ELSE @curRow := 1 AND @curName := name 
              END
           ) + 1 AS visit_sequence
         , login_date
      FROM your_table
         , (SELECT @curRow := 0, @curNamee := '') r
  ORDER BY name ASC
         , login_date ASC
;

ALTER TABLE your_table ADD visit_sequence INTEGER AFTER login_date;

UPDATE your_table yt
     , staging_table st
   SET yt.visit_sequence = st.visit_sequence
 WHERE st.id = yt.id
     ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:38:49.960

看看下面的例子。

```
create table log(id integer, name varchar(100), time datetime);

insert into log values (1, 'John', '2013-01-12 00:00:00');
insert into log values (2, 'John', '2013-01-15 00:00:00');
insert into log values (3, 'Ben', '2013-02-12 00:00:00');

SELECT  @row_num := IF(@prev_value=l.name,@row_num+1,1) AS RowNumber
       ,@prev_value := l.name
  FROM log l,
      (SELECT @row_num := 1) x,
      (SELECT @prev_value := '') y
  ORDER BY l.name, l.time DESC 
```

# ios - 不平衡过渡ios

> ID：15656333
> 
> 赞同：0
> 
> 时间：2013-03-27T10:13:50.857
> 
> 标签：ios, objective-c, ios5, ios6

我有这个问题，当我的代码执行然后我单击表上的项目时，它会将我带到详细视图。事情显示正常，但在控制台中有这样的消息：

> 2013-03-27 13:09:30.616 LinkTest[3605:c07] 开始/结束外观转换的不平衡调用。

我知道这经常在这里报告并查看答案，但似乎没有任何效果。也许我搞错了。下面是 tableviewcontroller 的代码：

```
#import "EventListingTableViewController.h"
#import "EventListingDetailViewController.h"

@interface EventListingTableViewController ()

@end

@implementation EventListingTableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)fetchEventDetails
{    
    NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://xsysdevelopment.com/ios/read.php"]];
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];
    self.eventsTitles = [[NSMutableArray alloc] init];
    self.eventsCity = [[NSMutableArray alloc] init];

    for(id object in dict){
        [self.eventsTitles addObject:object[@"title"]];
        [self.eventsCity addObject:object[@"city"]];
    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self fetchEventDetails];
    // Uncomment the following line to preserve selection between presentations.
    //self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return self.eventsTitles.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

     int row = [indexPath row];

    cell.textLabel.text = self.eventsTitles[row];
    cell.detailTextLabel.text = self.eventsCity[row];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Navigation logic may go here. Create and push another view controller.

     EventListingDetailViewController *detailViewController = [[EventListingDetailViewController alloc] initWithNibName:@"EventListingDetailViewController" bundle:nil]; 
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
     if ([[segue identifier] isEqualToString:@"eventDetailSeague"])
     {

         NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
         EventListingDetailViewController *detailViewController = [segue destinationViewController];

         int row = [indexPath row];

         detailViewController.eventDetails = @[self.eventsTitles[row], self.eventsCity[row]];

     }
} 
```

如果有人告诉我哪里出错了，我将不胜感激。我是 iOS 新手，所以只有有用的批评才会有用。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:17:15.580

如果您通过情节提要使用 segues，`UITableView`那么您不需要`didSelectRowAtIndexPath:`. 我相信您会因此而两次推动。

# android - 如何创建一个只有 1 个广播接收器的 android 应用程序？

> ID：15656334
> 
> 赞同：6
> 
> 时间：2013-03-27T10:13:54.043
> 
> 标签：android, broadcastreceiver, android-manifest

我正在尝试在 Android 中创建一个仅由 1 个广播接收器（仅此而已）组成的应用程序。

广播接收者应该简单地捕获广播（例如收到短信，记录信息并完成）。但是，我注意到广播没有被接收者捕获，除非我指出我有主 Activity，因为以下 AndroidManifest.xml 将显示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.myapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.RECEIVE_SMS" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <receiver android:name="com.myapp.MyBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>

    <activity
        android:name="com.myapp.MainActivity"
        android:label="@string/activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我什至不必在应用程序中有一个 Activity 类。此外，如果我在意图过滤器中删除**android.intent.category.LAUNCHER**或 **android.intent.action.MAIN**，它也不起作用。我的手机和模拟器上的行为都是一样的，它们都运行 android 4.2

我的 Broadcastreceiver 类如下所示：

```
public class MyBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context,intent.getAction(),Toast.LENGTH_SHORT).show();
    }
} 
```

难道不能有一个只有广播接收器的应用程序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:51:41.520

从 Android 3.1 (API 12) 开始，在用户手动打开应用程序的 UI 组件（活动）至少一次之前，应用程序无法接收广播。即使用户强制停止应用程序，也同样适用。

参考：http: [//developer.android.com/about/versions/android-3.1.html#launchcontrols](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:15:49.883

你不应该做一个服务而不是一个应用程序吗？（我从未创建过服务，但我认为它应该更适合您的情况）

# jsf-2 - 里面可以用EL吗 标题？

> ID：15656335
> 
> 赞同：1
> 
> 时间：2013-03-27T10:14:02.313
> 
> 标签：jsf-2, primefaces

是否可以在 PrimeFaces 3.5 对话框的标题内使用 EL？

```
<p:dialog widgetVar="personneDialog" id="personDlg" hideEffect="explode">
    <f:facet name="header">
        Details of: #{personneMB.selectedPerson.name}"
    </f:facet> 
```

这仅打印一个空字符串：

![在此处输入图像描述](../Images/800c3e2ab87e116d6b387690a2f7e269.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:03:03.757

我通过更新对话框解决了我的问题，而不仅仅是里面的 panelGrid

刻面标题属于对话框，这就是为什么它一开始没有更新的原因。

# c# - 在 C# 中连接 gzipped 字节数组

> ID：15656336
> 
> 赞同：1
> 
> 时间：2013-03-27T10:14:08.297
> 
> 标签：c#, gzip, compression, gzipstream

我已经压缩了存储在数据库中的数据。有没有办法将 50 个单独的 gzip 压缩数据连接成一个可以解压缩的 gzip 输出？结果应该与解压缩这 50 个项目、连接它们然后 gzip 压缩它们相同。

我想避免减压阶段。合并已经压缩的数据而不是压缩整个字节数组是否也有一些性能优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:16:44.117

我假设仅以压缩格式连接任何文件将证明是灾难性的，因为压缩算法已在每个文件的特定内容上运行。我认为您必须手动解压缩所有文件，连接，然后再次压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:58:04.820

是的，您可以连接 gzip 流，当解压缩时，它会为您提供与连接未压缩数据并一次 gzip 压缩相同的效果。具体来说：

```
gzip a
gzip b
cat a.gz b.gz > c.gz
gunzip c.gz 
```

会给你一样`c`的：

```
cat a b > c 
```

然而，与一次压缩整个东西相比，压缩会降低，特别是如果你的 50 块中的每一个都很小，例如小于几十个 K 字节。压缩后的结果总是不同的，根据片段的大小会稍微大一点或大很多。

应该注意另一个关于 GZIPStream 的答案中的评论。我还建议您改用[DotNetZip](http://dotnetzip.codeplex.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:49:26.467

GZip 是错误的，因此解压缩本身具有多个 gzip 成员的 gzip 文件也是错误的……即使在 .net 4.5 中，也不是所有 gzip 错误都已解决

进一步考虑每个 gzip 是在哪台机器上创建的，即它是 BGZF “Blocked GNU Zip Format”吗？这使手头的问题复杂化。

此外，生成的 gzip 文件可能比将所有未压缩的单个文件连接在一起时更大（gzip 不是一个很好的压缩算法集）。

如果还不算太晚，我建议您改用[DotNetZip 。](http://dotnetzip.codeplex.com/)

GZipStream 并不是真正为处理多个文件而构建的，但是您可以使用 System.IO.BinaryWriter 和 System.IO.BinaryReader 来获得完全控制，尽管它可能会变得混乱。DotNetZip 可以正常工作！它旨在处理多个文件。

PS GZipStream 适用于 .Net 4 最大 8GB 的​​文件，尽管早期版本有一个下限，例如 GZipStream 适用于 .Net 3.5 最大 4GB 的文件

# jquery - 从数组中提取记录

> ID：15656338
> 
> 赞同：0
> 
> 时间：2013-03-27T10:14:19.000
> 
> 标签：jquery, html

我有一个排序数组包含固定长度的数据。数组如下，

```
var samplearray = [12122013sample2,
                   10122013sample1,
                   12122013sam   1.5
                  ]; 
```

从这个数组中，我想获得与“12122013”​​匹配的记录。即应返回以下记录：

```
 12122013sample2
                   12122013sam   1.5 
```

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:36:47.110

```
function searchInArray(what, where) {    
    var results = [];
    var regexp = new RegExp(what);
    for (var i=0;i<where.length; i++) {
       if (regexp.test(where[i]) ) results.push(where[i]);
    }
    return results.length>0 ? results : false;
} 
```

如果未找到匹配项，则返回匹配元素的数组或 false。what 参数可以是字符串或正则表达式模式。

[http://jsfiddle.net/gnYXJ/](http://jsfiddle.net/gnYXJ/)

# java - List 中的 .add() 方法不适用于参数

> ID：15656341
> 
> 赞同：0
> 
> 时间：2013-03-27T10:14:32.090
> 
> 标签：java, android, map, itemizedoverlay

我正在尝试使用 mapsforge 在手机上显示地图。

目前，我在向显示引脚添加覆盖方面遇到了一些小问题。这是给出错误的代码：

```
ArrayItemizedOverlay itemizedOverlay = new ArrayItemizedOverlay(defaultMarker, true);
myOpenMapView.getOverlays().add(itemizedOverlay); 
```

getOverlays() 将返回列表，如此[处所述](https://ci.mapsforge.org/job/mapsforge/org.mapsforge%24mapsforge-map/javadoc/)

这一行给出了这个错误：

```
 "The method add(Overlay) in the type List<Overlay> is not applicable for the arguments (ArrayItemizedOverlay)" 
```

我不太明白为什么 .add() 方法在这种情况下无效，因为 ArrayItemizedOverlay 类是 Overlay 类的子类。

这些是类定义，我希望有人能告诉我我能做什么，以便 .add() 方法接受对象。

[ArrayItemizedOverlay](https://code.google.com/p/mapsforge/source/browse/mapsforge-map/src/main/java/org/mapsforge/android/maps/overlay/ArrayItemizedOverlay.java?name=0.3.0)

```
public class ArrayItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    //codes....
} 
```

[逐项叠加](https://code.google.com/p/mapsforge/source/browse/mapsforge-map/src/main/java/org/mapsforge/android/maps/overlay/ItemizedOverlay.java?name=0.3.0)

```
public abstract class ItemizedOverlay<Item extends OverlayItem> extends Overlay {
    //codes...
} 
```

请随时指出您可能需要的任何缺失信息，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:33:57.117

你能找到使用的类和接口的完整路径吗？

```
public List<Overlay> getOverlays() 
```

返回一个列表

```
public interface org.mapsforge.android.maps.overlay.Overlay 
```

但是代码库有一个不同的覆盖类

```
public abstract class Overlay extends Thread { 
```

类路径中是否有旧版本？您可能必须清理旧的 JAR/API 并确保它引用正确的覆盖类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:21:52.183

使用 List 的[addAll()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#addAll%28java.util.Collection%29)方法添加 Object 的 Collection。

# javascript - Gauge.js - 仪表的颜色和渐变

> ID：15656344
> 
> 赞同：1
> 
> 时间：2013-03-27T10:15:00.143
> 
> 标签：javascript, jquery

我正在尝试从[http://bernii.github.com/gauge.js/](http://bernii.github.com/gauge.js/)在仪表上设置颜色但是当我设置

```
 colorStart: '#000000',   // Colors
  colorStop: '#ffffff',    // just experiment with them 
```

这些颜色很好，但不是从左到右进行渐变，因为仪表应该起作用，渐变是从下到上，这没有逻辑意义。

您可以在此处的右侧边栏中看到一个示例。 [http://app.calmpeople.co.uk/at/1512347430/1364379008](http://app.calmpeople.co.uk/at/1512347430/1364379008)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-06T12:36:52.393

此外`colorStart`，`colorStop`您还必须设置属性`gradientType: 1`

文档中没有提及此选项，仅在代码中：

```
gradientType: 0         # 0 : radial, 1 : linear 
```

# c# - 将图像加载到tabcontrol标签页内的picturebox控件

> ID：15656349
> 
> 赞同：0
> 
> 时间：2013-03-27T10:15:16.577
> 
> 标签：c#, winforms

我有一个带有选项卡控件的winform，并且正在向选项卡页添加一个图片框控件。我想在标签页中将图像加载到此图片框控件。我将控件添加到标签页如下：

```
// initializing the picture box control
m_Canvas = new PhotoCanvas(); 
m_Canvas.BackColor = Color.White;
m_Canvas.Width = 500;
m_Canvas.Height = 400;
m_Canvas.Left = 0;
m_Canvas.Top = 0;

//adding the picture box control to tabpage
this.MainTab.TabPages[0].Controls.Add(m_Canvas); 
```

我尝试使用以下方式加载图像`OpenFileDialog`：

```
m_Canvas.Image = new Bitmap(m_OpenFileDialog.FileName); 
```

但它没有显示加载的图像有人可以帮助我吗？

来自评论：

我正在使用一个按钮来加载图像，它的点击事件中的代码是

```
private void Openbutton_Click_1(object sender, EventArgs e) {
  m_OpenFileDialog.Title = "Select Image";
  if (m_OpenFileDialog.ShowDialog() == DialogResult.OK) {
    m_Canvas.Image = new Bitmap(m_OpenFileDialog.FileName);
    m_Canvas.Refresh();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:38:22.953

尝试：

```
string path = m_OpenFileDialog.FileName;
m_Canvas.Image = System.Drawing.Bitmap.FromFile(path); 
```

# php - PHP / Web：缓存数据库查询的结果以获得更好的页面性能

> ID：15656351
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:15:20.420
> 
> 标签：php, mysql, performance

我正在尝试改善网站上某些页面的加载时间。

每个页面在顶部由相同的导航标题部分组成，该标题包含网站的一些指标，每次用户访问另一个页面时都会重新加载。此标头中的信息非常动态，但不需要大约每小时更新一次以上。

我想知道如何找到一个好的解决方案，既不减少页面发出的数据库请求的数量，又不显示导航标头中的数据已经过时了几个小时。

谢谢

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:42:03.313

如您所说，您应该使用缓存系统。

您可以查看一些网站，例如[this](http://www.theukwebdesigncompany.com/articles/php-caching.php)或[this other one](http://www.xeweb.net/2010/01/15/simple-php-caching/)。

我个人使用我正在使用的框架提供的那个。如果您使用任何框架，它很可能有自己的缓存方法。

# android - 当我设置错误的凭据时，为什么我使用 http 基本身份验证的请求会得到状态 0？Phonegap安卓

> ID：15656355
> 
> 赞同：1
> 
> 时间：2013-03-27T10:15:23.247
> 
> 标签：android, jquery, cordova, xmlhttprequest, basic-authentication

在我使用 phonegap 制作的 android 应用程序中，用户可以登录。当他们这样做时，JQuery 会获取他们的登录名和密码，并按照 HTTP 基本身份验证规范使用他们的凭据进行 ajax 调用。一切正常。
但是，当用户设置错误的凭据时，我遇到了处理这种情况的问题。在 .error() 回调中，我想显示状态 401 的特定消息（如“身份验证失败”）和其他状态的另一条消息（“技术问题”）。我的代码：

```
$.ajax({
                url: "http://exemple.com",
                type: "GET",
                dataType: "text",
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                beforeSend: function (xhr)
                {
                    xhr.setRequestHeader("Authorization", "Basic "+$.base64.encode(email+":"+password));
                },
                success: function() {
                    //my success callback
                },
                error: function(xhr) {
                    if(xhr.status===401) {
                        //"authentication failed"
                    }
                    else {
                        //"technical problem"
                    }
                }
            }); 
```

此代码在浏览器中运行良好。状态 401 已发送。但是当我在我的phonegap android应用程序中测试时，状态发送为0。当我的凭据良好时，状态发送为200，并且我的应用程序的其他请求运行良好，所以我认为这不是一个cors问题。

任何想法 ？谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:04:33.980

通过更多的研究，我了解到问题出在 phonegap 上。服务器以状态 401 和标头响应 ajax 请求`WWW-Authenticate : Basic realm="Secured Area"`。WebView 拦截响应，并且由于标头，等待凭据。但是这种行为在手机上是不可见的，因此请求达到超时并触发 0 状态码。
一种好的解决方案是将服务器的响应更改为不包含 WWW-Authenticate 标头。我的解决方案（可能不好但很快）是将 0 状态视为 401 状态。

```
error: function(xhr) {
                        if(xhr.status===401 || xhr.status===0) {
                            //'authentication failed'
                        }
                        else {
                            //'technical error'
                        }
                    }, 
```

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:02:51.597

有趣的。我最近遇到了同样的问题，只是我将用户名和密码属性传递给 .ajax 而不是使用 beforeSend。

尝试将“$.base64.encode”更改为“btoa” [https://developer.mozilla.org/en-US/docs/DOM/window.btoa](https://developer.mozilla.org/en-US/docs/DOM/window.btoa)。

# php - 使用 JavaScript 更改的不需要的表数据

> ID：15656358
> 
> 赞同：0
> 
> 时间：2013-03-27T10:15:31.693
> 
> 标签：php, javascript, jquery, html, css

我正在制作一个在`<td>`标签中使用 PHP 的表格。这包含产品列表及其价格。在表格的顶部，我插入了两个按钮，一个用于按价格升序排列数据，另一个用于降序排列。

默认情况下，数据按升序排列。当我单击降序按钮时，它可以工作，但是不需要更改表数据。

这是我的 CSS 代码：

```
a {text-decoration:none; color:#0000FF;}
#hold .log {
  color:#0000FF;
   text-align:center;
   font-size:20px;
}

h2 {color:#0000FF;}
#left { width:200px;border:1px;border-style:solid;margin:0 auto;margin-top:20px;text-align:center;border-    color:#0000FF;float:left;}
#left div {border:1px;border-style:solid;border-color:#0000FF;}
#left div a {}
.style table {border:1px;border-style:solid;border-color:#0000FF;}
.style table tr td {border:1px;border-style:solid;border-color:#0000FF;color:#333;width:250px;}
.style table tr td input,select,textarea {width:250px;height:30px;} 
```

这是表格的代码：

```
<button onclick="as()">Ascending Order</button>
<button onclick="ds()">Descding Order</button>

<div class="style">
<table>
<tr>
<td>Title</td>
    <td>Price</td>
</tr>
<th><h2 style="text-align:left;">Cameras</h2></th>
<tr>    
  <?php $i=1;
        $qry_cam=mysql_query("SELECT* FROM camera ORDER BY camera.price ASC",$con);
        while($row=mysql_fetch_array($qry_cam))
        {
          echo "<tr id='cam_as'>
                  <td>$i-$row[title]<br /></td>
                  <td>$row[price]<br /></td>
                </tr>";
          $i++;
        }
  ?>
</tr>
<tr>    
  <?php $i=1;
        $qry_cam=mysql_query("SELECT* FROM camera ORDER BY camera.price DESC",$con);
        while($row=mysql_fetch_array($qry_cam))
        {
          echo "<tr id='cam_ds' style='display:none;'>
                  <td>$i-$row[title]<br /></td>
                  <td>$row[price]<br /></td>
                </tr>";
          $i++;
        }
  ?>

</tr>
</table>
</div><!-- style ends--> 
```

最后，这是执行所有必需工作的脚本：

```
<script type="text/javascript">

  function as()
  {
    $('#cam_as,#com_as,#cell_as').css('display','block');
    $('#cam_ds,#com_ds,#cell_ds').css('display','none');    
  }

  function ds()
  {
    $('#cam_ds,#com_ds,#cell_ds').css('display','block');
    $('#cam_as,#com_as,#cell_as').css('display','none');
  }

</script> 
```

我已经尝试过，但我无法找到我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:43:28.133

你的代码有足够的问题。我删除了额外的 < tr >。我添加了类并相应地更改了javascript函数。你的问题主要出在嵌套<tr>的

[http://jsfiddle.net/Sanya_Zol/kC9Tk/](http://jsfiddle.net/Sanya_Zol/kC9Tk/)

```
<button onclick="as()">Ascending Order</button>
<button onclick="ds()">Descding Order</button>

<div class="style">
<table>
<tr>
<td>Title</td>
    <td>Price</td>
</tr>
<th><h2 style="text-align:left;">Cameras</h2></th>

<?php $i=1;
    $qry_cam=mysql_query("SELECT* FROM camera ORDER BY camera.price ASC",$con);
    while($row=mysql_fetch_array($qry_cam))
    {
      echo "<tr class='cam_as'>
              <td>$i-$row[title]<br /></td>
              <td>$row[price]<br /></td>
            </tr>";
      $i++;
    }
?>

<?php $i=1;
    $qry_cam=mysql_query("SELECT* FROM camera ORDER BY camera.price DESC",$con);
    while($row=mysql_fetch_array($qry_cam))
    {
      echo "<tr class='cam_ds' style='display:none;'>
              <td>$i-$row[title]<br /></td>
              <td>$row[price]<br /></td>
            </tr>";
      $i++;
    }
?>

</table>
</div>

<script type="text/javascript">
function as(){
    $('.cam_as,#com_as,#cell_as').show();
    $('.cam_ds,#com_ds,#cell_ds').hide();
}

function ds(){
    $('.cam_ds,#com_ds,#cell_ds').show();
    $('.cam_as,#com_as,#cell_as').hide();
}
$(as); // run as() when document ready
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:30:39.587

`<tr>`循环内外都有标签，你只需要一次。该循环还会创建多个`<tr>`具有相同 ID 的标签，这是不正确的。尝试使用[jQuery-Toggle](http://api.jquery.com/toggle/)显示/隐藏元素。

问题的最后一部分对我来说不清楚，对不起。

# iphone - 是否需要 ARC 中的 NSNotificationCenter removeObserver？

> ID：15656367
> 
> 赞同：43
> 
> 时间：2013-03-27T10:15:56.510
> 
> 标签：iphone, ios, objective-c, cocoa-touch, automatic-ref-counting

添加观察者会增加对象的保留计数吗？如果是，ARC 是否也处理此观察者的移除？如果没有，我应该在哪里移除观察者？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-27T10:17:20.317

即使您使用`ARC`. 创建一个`dealloc`方法并在那里删除..

```
-(void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

如果您在这里看到不需要调用`[super dealloc];`的方法，则只需要没有 super dealloc 的方法。

**斯威夫特的更新**

如果您正在快速编写代码，则可以在**deinit**方法中删除观察者。

```
deinit {
        NSNotificationCenter.defaultCenter().removeObserver(self)
       } 
```

# android - Android - 访问不在屏幕上的gridview的子项

> ID：15656382
> 
> 赞同：0
> 
> 时间：2013-03-27T10:16:27.460
> 
> 标签：android

是否可以访问不在屏幕上的*gridview的子视图并进行更改？*

我在遍历gridview时尝试使用*getCount（） ，但是当它到达不可见的孩子（在屏幕显示上）时，他们失去了他们的类型（他们应该是ImageViews），我不能对他们做任何事情；*我想改变他们的形象。

一段代码；

```
GridView gridView = (GridView) findViewById(R.id.grid_view);
Integer items = gridView.getCount();
Log.d(TAG, "1)child count::"+((ViewGroup)gridView).getChildCount());
Log.d(TAG, "2)get count::"+items);
for (int i=0; i < items; ++i) {
    View nextChild = ((ViewGroup)gridView).getChildAt(i);
    if (nextChild instanceof ImageView) {
        Log.i(TAG, i+" is imageview");
        ((ImageView) nextChild).setImageResource(R.drawable.arrow2);
    } else {
        Log.i(TAG, i+" is NOT imageview");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:10:40.990

您应该在适配器的`getView()`方法中设置图像资源。然后代码将在它们变得可见时运行，而不是在它们进入屏幕之前尝试强制它。

# matlab - MATLAB：从每个类中抽取具有相同数量值的样本

> ID：15656385
> 
> 赞同：0
> 
> 时间：2013-03-27T10:16:34.787
> 
> 标签：matlab, statistics, distribution, sampling

我有一个完整的数据集，可以说是 50000 个观察值，这些观察值分配给 16 个类。我现在想绘制一个样本，假设 70% 的完整数据，但我希望 MATLAB 从每个类中获取相同数量的样本（当然，如果可能，因为某些类的数量少于需要的数量）

是否有可以做到这一点的 MATLAB 函数，还是我必须自己编写一个新函数？我只是想在这里节省时间。

我发现了`cvpartition`，但据我所知，这只能用于获取与原始数据集在类上具有相同分布的样本，而不是均匀分布的样本。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:52:40.697

应该不会太难。假设观察结果在一个向量中`observations`。然后你可以做

```
fraction = 0.7;

classes = unique(observations);
nObs = length(observations);
nClasses = length(classes);
nSamples = round(nObs * fraction / nClasses);

for ii = 1:nClasses
    idx = observations == classes(ii);
    samples((ii-1)*nSamples+1:ii*nSamples) = randsample(observations(idx), nSamples);
end 
```

现在`samples`是一个长度向量，`nClasses * nsamples`其中包含您的采样观测值，每个类别的数量相同。

目前，如果其中一个类不包含至少`nSamples`观察值，它将失败。最简单的解决方法是在`'replace','true'`对 的调用中添加额外的参数`randsample`，这将告诉它在被选中后替换每个观察值。

# flash - 无法连接到nodejs中的flash

> ID：15656391
> 
> 赞同：0
> 
> 时间：2013-03-27T10:16:45.560
> 
> 标签：flash, node.js

我无法`onConnect`在 nodeJS 中输入函数。所有的事情是我正在尝试使用 nodejs 作为服务器连接到闪存。

我的 server.js 是

```
 var net = require('net');

 var mySocket;

 var server = net.createServer(function(socket) {
   mySocket = socket;
   mySocket.on("connect", onConnect);
   mySocket.on("data", onData);
 });

 function onConnect()
 {
    console.log("Connected to Flash");
 }

 function onData(d)
 {
   if(d == "exit\0")
   {
      console.log("exit");
      mySocket.end();
      server.close();
    }
   else
   {
           console.log("From Flash = " + d);
            mySocket.write(d, 'utf8');
    }
 }

  server.listen(9001, "127.0.0.1");
  console.log("Connection Established"); 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:45:02.830

事件`connection`用于 net.Server 类（服务器）和`connect`net.Socket 类（客户端）。当您通过 net.createServer 创建服务器时，您传递的函数会自动设置为`connection`事件的侦听器。从[API 文档](http://nodejs.org/api/net.html#net_net_createserver_options_connectionlistener)-

> **net.createServer([options], [connectionListener])**
> 
> 创建一个新的 TCP 服务器。connectionListener 参数自动设置为“连接”事件的侦听器。

服务器没有`connect`事件。要使用`connect`create another create another `client.js`with following 并在运行`server.js`.

```
 var net = require('net');
 var port = 9001,
     host = '127.0.0.1';
 var socket = net.createConnection(port, host);
 console.log('Socket created.');
 socket.on('data', function (data) {
     console.log('RESPONSE: ' + data);
 }).on('connect', function () {
     socket.write("GET / HTTP/1.0\r\n\r\n");
 }).on('end', function () {
     console.log('DONE');
 }); 
```

# java - 获取子标签具有属性 x 的属性

> ID：15656399
> 
> 赞同：1
> 
> 时间：2013-03-27T10:17:00.687
> 
> 标签：java, xml, xpath

考虑这个 XML 文件结构

```
...
<sometag attr="foobar">
    <subtag>
        <subsubtag someattr="foo" />
        <subsubtag someattr="bla" />
        <subsubtag someattr="bar" />
    </subtag>
</sometag>
... 
```

目前我有这个 XPath Query:`/sometag/subtag/subsubtag[@someattr='foo']`这让我得到了这些子标签。是否可以`attr="foobar"`从此查询中获取？所以我想`attr`从`sometag`有`subsubtag`with的地方得到所有东西`someattr="foo"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:27:39.023

我刚刚发现的另一种可能性：

```
/sometag/subtag/subsubtag[@someattr='foo']/../../@attr 
```

您可以使用`..`来选择父节点。你需要在hirachie中选择属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:46:46.877

```
/sometag[subtag/subsubtag[@someattr="foobar"]]/@attr 
```

或更不严格：

> //sometag[//subsubtag[@someattr="foobar"]]/@attr

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:26:05.003

在xml文件上：

```
<root>
<sometag attr="foobar1"> 
  <subtag> 
    <subsubtag someattr="foo"/>  
    <subsubtag someattr="bla"/>  
    <subsubtag someattr="bar"/> 
  </subtag> 
</sometag>
<sometag attr="foobar2"> 
  <subtag> 
    <subsubtag someattr="foo"/>  
    <subsubtag someattr="bla"/>  
    <subsubtag someattr="bar"/> 
  </subtag> 
</sometag>
<sometag attr="foobar3">
    <subtag>
        <subsubtag someattr="f2342oo" />
        <subsubtag someattr="bla" />
        <subsubtag someattr="bar" />
    </subtag>
</sometag>
</root> 
```

尝试：

```
/root/sometag/subtag/subsubtag[@someattr='foo']/../../@attr 
```

[我在这里](http://www.xpathtester.com/test)做了一个快速测试，它似乎对我有用。

# php - Codeigniter 文件上传不起作用

> ID：15656401
> 
> 赞同：5
> 
> 时间：2013-03-27T10:17:03.180
> 
> 标签：php, codeigniter, file-upload

我编写用于上传图像文件的代码。但它总是显示`You did not select a file to upload.`这是我的代码。

看法

```
<?php echo form_open_multipart('template/advertisement', array('id' => 'template-add-form', 'class' => 'form-horizontal')); ?>
    <?php echo form_fieldset('Add Advertisement', array('class' => '')); ?>
    <div class="control-group">
        <label class="control-label" for="add_l">Left Advertisement </label>
        <div class="controls">
            <input type="file" name="add_l"/>
        </div>
    </div>  
    <div class="control-group">
        <div class="controls">
            <input type="submit" name="add" value="Update Advertisement" class="btn btn-primary" /> 
        </div>
    </div>  
    <?php echo form_fieldset_close(); ?>
<?php echo form_close(); ?> 
```

控制器

```
public function advertisement()
    {
        $headerData = array();
        $headerData['title'] = ucfirst('Advertisement');

        $data = array();

        if ($this->input->post() !== FALSE) {   
            $config = array();
            $config['upload_path'] = './images/add';
            $config['allowed_types'] = 'gif|jpg|png';
            $config['max_size'] = '100';
            $config['max_width'] = '1024';
            $config['max_height'] = '768';
            $config['max_filename'] = '100';

            $this->load->library('upload', $config);

            if ($this->upload->do_upload()) {
                $data['message'] = $this->upload->data();                       
            } else {
                $data['error'] = $this->upload->display_errors('<div class="alert alert-error">', '</div>');                
            }
        }

        $this->load->view('template/header.php', $headerData);
        $this->load->view('template/advertisement.php', $data);
        $this->load->view('template/footer.php');       
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T10:28:13.577

在您更改 PHP 时

```
$this->upload->do_upload() 
```

至

```
$this->upload->do_upload("add_1") 
```

其中“add_1”是您的输入名称属性。

[Codeigniter 上传库文档](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

PS 在您的 HTML 中，标签属性 for="" 以输入 ID 为目标，因此您必须将 id 添加到您的输入中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-07T23:32:45.397

我最近遇到了这个问题并解决了它。您可以检查 php 中的模块文件信息是否已经打开？如果您可以访问 CPanel，您可以转到 SOFTWARE TAB 然后搜索 Select PHP Version，然后您可以看到模块列表并检查该模块文件信息。并尝试再次上传。

# java - ListView 过滤器：IllegalStateException

> ID：15656402
> 
> 赞同：2
> 
> 时间：2013-03-27T10:17:03.287
> 
> 标签：java, android, listview, filter, illegalstateexception

为了理智起见，我将其发布在这里，因为我确信我现在无法自己解决它。我发布了所有要知道的内容，因为我认为为什么我过去没有解决这个问题是因为我没有发布所有内容。到目前为止，我已经剥离了代码，基本上它是尽可能轻的。但是仍然会发生此错误（尽管非常非常非常罕见）：

```
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929): The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class de.innosoft.android.mobileserviceclient.activities.ListEinsaetze$ArrayAdapterEinsatz)]
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class de.innosoft.android.mobileserviceclient.activities.ListEinsaetze$ArrayAdapterEinsatz)]
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.ListView.layoutChildren(ListView.java:1544)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.AbsListView.onLayout(AbsListView.java:1994)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.AdapterView.updateEmptyStatus(AdapterView.java:747)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.AdapterView.checkFocus(AdapterView.java:720)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:812)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.AbsListView$AdapterDataSetObserver.onChanged(AbsListView.java:5958)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:37)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.BaseAdapter.notifyDataSetChanged(BaseAdapter.java:50)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at de.innosoft.android.mobileserviceclient.ui.DynamicArrayAdapter.notifyDataSetChanged(DynamicArrayAdapter.java:291)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at de.innosoft.android.mobileserviceclient.ui.DynamicArrayAdapter.notifyDataSetChanged(DynamicArrayAdapter.java:268)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at de.innosoft.android.mobileserviceclient.ui.DynamicArrayAdapter$DynamicAdapterFilter.publishResults(DynamicArrayAdapter.java:119)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.os.Looper.loop(Looper.java:137)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at android.app.ActivityThread.main(ActivityThread.java:5039)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at java.lang.reflect.Method.invokeNative(Native Method)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at java.lang.reflect.Method.invoke(Method.java:511)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-27 10:57:27.783: E/java.lang.IllegalStateException(4929):    at dalvik.system.NativeStart.main(Native Method) 
```

在这篇文章的最底部，我解释了何时发生此错误。但首先，代码。我有这个 TextWatcher：

```
edSearch.addTextChangedListener(new TextWatcher() {
                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                }

                String text = null;

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                    text = s.toString();
                }

                @Override
                public void afterTextChanged(final Editable s) {
                    if (text != null && !text.equals(s.toString())) {
                        adapter.getFilter().filter(s.toString());
                    }
                    text = null;
                }
            }); 
```

该线程在场边运行，每 200 毫秒触发一次 textwatcher。我会很疯狂地手动测试这个：

```
new Thread(new Runnable() {
            public void run() {
                Runnable r = new Runnable() {
                    public void run() {
                         dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN,
                         KeyEvent.KEYCODE_S));
                         dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_UP,
                         KeyEvent.KEYCODE_S));
                    }
                };

                Runnable r2 = new Runnable() {
                    public void run() {
                         dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN,
                         KeyEvent.KEYCODE_DEL));
                         dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_UP,
                         KeyEvent.KEYCODE_DEL));
                    }
                };
                while (true) {

                    runOnUiThread(r);
                    try {
                        Thread.sleep(200);
                    } catch (InterruptedException e) {
                        ExceptionHandler.handle(e);
                    }
                    runOnUiThread(r2);
                    try {
                        Thread.sleep(200);
                    } catch (InterruptedException e) {
                        ExceptionHandler.handle(e);
                    }
                }
            }
        }).start();
    } 
```

这是我的适配器：

```
private class ArrayAdapterEinsatz extends DynamicArrayAdapter<Einsatz> {

        public ArrayAdapterEinsatz(int textViewResourceId) {
            super(ListEinsaetze.this, textViewResourceId, new ArrayList<Einsatz>());
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {

            Einsatz einsatz = getFilteredItems().get(position);

            View rowView = convertView;
            if (rowView == null) {
                LayoutInflater inflater = ListEinsaetze.this.getLayoutInflater();
                rowView = inflater.inflate(R.layout.eintrag_einsatz, null);
                ViewHolder viewHolder = new ViewHolder();

                viewHolder.tvId = (TextView) rowView.findViewById(R.id.eeinsatzid);
                viewHolder.tvDatumVonbis = (TextView) rowView.findViewById(R.id.eeinsatzvonbis);
                viewHolder.tvKundenName = (TextView) rowView.findViewById(R.id.eeinsatzkundenname);
                viewHolder.tvKundenOrt = (TextView) rowView.findViewById(R.id.eeinsatzort);
                viewHolder.tvEntfernung = (TextView) rowView.findViewById(R.id.eeinsatzentfernung);
                viewHolder.iveRotate = (ImageViewEffects) rowView.findViewById(R.id.eeinsatzrotate);
                viewHolder.iveRotate.setBitmap(Utils.drawableToBitmap(R.drawable.ic_refresh_1, 22), ImageViewEffects.ROTATE);
                viewHolder.ivAnsprechpartnerVorhanden = (ImageView) rowView.findViewById(R.id.eeinsatzimageansprechvorhanden);
                viewHolder.ivBelegeVorhanden = (ImageView) rowView.findViewById(R.id.eeinsatzimagebelegevorhanden);
                viewHolder.ivTaetigkeitVorhanden = (ImageView) rowView.findViewById(R.id.eeinsatzimagetaetigkeitvorhanden);

                rowView.setTag(viewHolder);
            }

            final ViewHolder holder = (ViewHolder) rowView.getTag();

            return rowView;
        }

    } 
```

最后这是基础适配器类。请注意最底部的实际过滤功能，它根据 new Random().nextBoolean() 进行过滤，这再简单不过了。

```
public class DynamicArrayAdapter<T> extends BaseAdapter implements Filterable {

  public class DynamicAdapterFilter extends Filter {

    private CharSequence m_Filter = null;
    private List<T> m_FilteredItems = null;

    public DynamicAdapterFilter() {
      m_FilteredItems = new ArrayList<T>();
    }

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {

      FilterResults r = new FilterResults();
      List<T> items = null;
      m_Filter = constraint;

      if (constraint == null) {
        items = m_AllItems;
      } else {
        items = m_FilteredItems;
        items.clear();

        synchronized (SyncLock) {
          List<T> l = new ArrayList<T>(m_AllItems);
          for (T item : l) {
            if (DynamicArrayAdapter.this.filter(item, constraint)) {
              items.add(item);
            }
          }
        }
      }

      r.values = items;
      r.count = items.size();

      return r;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {

      m_Items = (List<T>) results.values;

      notifyDataSetChanged();

    }

    public void refresh() {
      if (m_Filter != null) {

        filter(m_Filter);
      }
    }

    public void refresh(FilterListener listener) {
      if (m_Filter != null ) {

        filter(m_Filter, listener);
      }
    }
  }

  private final Object SyncLock = new Object();
  private Context m_Context = null;
  private LayoutInflater m_Inflater = null;
  private int m_DelegateResourceId;
  private boolean m_ChangeNotificationsEnabled = true;
  private List<T> m_AllItems = null;
  private List<T> m_Items = null;
  private DynamicAdapterFilter m_Filter = null;

  public DynamicArrayAdapter(Context context, int delegateResourceId) {
    this(context, delegateResourceId, new ArrayList<T>());
  }

  public DynamicArrayAdapter(Context context, int delegateResourceId, List<T> items) {
    m_Context = context;
    m_DelegateResourceId = delegateResourceId;
    initItems(items);

    m_Inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  }

  public void initItems(List<T> items) {
    m_AllItems = m_Items = items;
  }

  /**
   * returns the filtered item count (or all item count if no filter exists)
   */
  @Override
  public int getCount() {
        return m_Items != null ? m_Items.size() : 0;
  }

  /**
   * returns the item at the position in the filtered list (or all item count if
   * no filter exists)
   */
  @Override
  public T getItem(int position) {
    return m_Items.get(position);
  }

  /**
   * holt position von item, exakte gleiche implementation wie ArrayAdapter<T>
   * 
   * @param item
   * @return
   */
  public int getPosition(T item) {
    return m_Items.indexOf(item);
  }

  /**
   * {@inheritDoc}
   */
  @Override
  public long getItemId(int position) {

    return position;
  }

  /**
   * returns the list view item delegate view. this view is inflated if it isn't
   * already inflated. Override this method to perform custom view operations
   * for the list view item.
   */
  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
      convertView = m_Inflater.inflate(m_DelegateResourceId, parent, false);
    }

    return convertView;
  }

  /**
   * returns the filter. this filter is created if it hasn't yet been created.
   */
  @Override
  public DynamicAdapterFilter getFilter() {
    if (m_Filter == null) {
      m_Filter = new DynamicAdapterFilter();
    }

    return m_Filter;
  }

  /**
   * If notifications are enabled, this notifies the base adapter that the
   * backing data has changed
   */
  @Override
  public void notifyDataSetChanged() {
    notifyDataSetChanged(false);
  }

  /**
   * If forced or notifications are enabled, this notifies the base adapter that
   * the backing data has changed
   * 
   * @param force
   *          force notify even if notifications are disabled
   */
  public void notifyDataSetChanged(boolean force) {
    if (force || m_ChangeNotificationsEnabled) {

      super.notifyDataSetChanged();
    }
  }

  /**
   * @return UI context
   */
  public Context getContext() {
    return m_Context;
  }

  /**
   * @return UI inflater
   */
  public LayoutInflater getLayoutInflater() {
    return m_Inflater;
  }

  /**
   * @return Layout ID of the list view item delegate
   */
  public int getDelegateResourceId() {
    return m_DelegateResourceId;
  }

  /**
   * @return true if notifications are enabled, false otherwise
   */
  public boolean getChangeNotificationsEnabled() {
    return m_ChangeNotificationsEnabled;
  }

  /**
   * Set whether notifications are enabled or not
   */
  public void setChangeNotificationsEnabled(boolean value) {
    m_ChangeNotificationsEnabled = value;
  }

  // internal mechanism to handle automagical updates of the list items
  private void onDataChange() {

    if (m_Filter == null) {
      notifyDataSetChanged();
    } else {
      m_Filter.refresh();
    }
  }

  /**
   * @return All (unfiltered) items
   */
  public List<T> getAllItems() {
    return m_AllItems;
  }

  /**
   * Set the backing list
   */
  public void setAllItems(List<T> value) {
    m_AllItems = value;

    onDataChange();
  }

  /**
   * @return Current filtered items, or all items if there is no filter
   */
  public List<T> getFilteredItems() {
    return m_Items;
  }

  public void add(T item) {
    synchronized (SyncLock) {
      m_AllItems.add(item);
    }

    onDataChange();
  }

  public void insert(T item, int index) {
    synchronized (SyncLock) {
      m_AllItems.add(index, item);
    }

    onDataChange();
  }

  public void remove(T item) {
    synchronized (SyncLock) {
      m_AllItems.remove(item);
    }

    onDataChange();
  }

  public void removeAt(int index) {
    synchronized (SyncLock) {
      m_AllItems.remove(index);
    }

    onDataChange();
  }

  public void clear() {
    synchronized (SyncLock) {
      m_AllItems.clear();
    }

    onDataChange();
  }

  public void sort(Comparator<? super T> comparator) {
    synchronized (SyncLock) {
      Collections.sort(m_Items, comparator);
    }

    onDataChange();
  }

  protected boolean filter(T item, CharSequence constraint) { // AR
    return new Random().nextBoolean();

  }
} 
```

所以基本上程序每 200 毫秒触发一次 textwatcher。所以 textwatcher 一次又一次地过滤列表。程序中没有其他任何事情发生。

如果我没有设置断点，程序就可以正常运行，并且始终没有错误。

当我断点该行时发生错误

```
adapter.getFilter().filter(s.toString()); 
```

在 TextWatcher 中按住 F8（继续）按下（这似乎给程序流程带来了不规则性，我只能想象？）。没有断点就不会发生错误。

顺便说一句，如果我放

```
adapter.notifyDatasetChanged() 
```

后

```
adapter.getFilter().filter(s.toString()); 
```

100% 的时间都会发生相同的错误（我知道在 publishResults 中调用了 notifyDatasetChanged，所以我不需要它，但它仍然是正确的行为吗？）。

**TL;博士：**

我的代码（尤其是基本适配器代码）是否安全？（不可能，否则不会发生错误）

**编辑：**

当没有设置断点时也会发生错误我刚得到一个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:04:13.660

不要添加文本观察器，只需将适配器设置为编辑文本，如下所示。

edSearch.setAdapter（适配器）；

并覆盖 public Filter getFilter() 和 protected void publishResults(CharSequence contraint, FilterResults results)
方法。

这将解决您的问题..面临同样的问题并以这种方式解决了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:30:24.343

尝试移动你的

```
 adapter.getFilter().filter(s.toString()); 
```

在可运行文件中使用 view.post() 进入 ui 线程。

它“可能”解决您的问题。

# iphone - 以字节为单位的 NSData 大小不准确

> ID：15656403
> 
> 赞同：8
> 
> 时间：2013-03-27T10:17:04.077
> 
> 标签：iphone, ios, objective-c, uiimage, nsdata

我拍摄了一张 13.3MB 的图像并将其添加到 XCode。我知道在编译时，XCode 会执行一些技巧来减小文件大小。我这样做是为了测试转换为数据后的图像现在有多大：

```
UIImage *image = [UIImage imageNamed:@"image.jpg"];
NSData *data = UIImageJPEGRepresentation(image, 1.0);
NSLog(@"length: %i", data.length); 
```

我回来的长度是`26758066`。如果以字节为单位，那么它读取我为 26.7MB。图片怎么突然这么大？我是否有另一种方法可以在不先通过 UIImage 的情况下以数据形式获取图像？

编辑：进一步的测试表明这是可行的，并产生了约 13.3MB 的数据长度 - 预期数量：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"image" ofType:@"jpg"];
NSData *data = [NSData dataWithContentsOfFile:filePath];
NSLog(@"length: %i", data.length); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T10:22:37.687

您的代码正在做的是将图像解压缩到内存中，然后以最高质量比 ( `q=1.0`) 重新压缩为 JPEG。这就是为什么图像突然变得如此之大的原因。

如果要检查存储在资源包中的文件，请询问`NSBundle`完整的文件路径并用于`NSFileManager`读取文件大小。您可以在 Mac 上手动执行相同的操作，只需查看`BUILD_PRODUCTS_DIR`适用于您的项目的内容即可。

# mysql - 如何在“分组依据”查询中制作具有自动增量编号的假列

> ID：15656409
> 
> 赞同：0
> 
> 时间：2013-03-27T10:17:19.640
> 
> 标签：mysql

我在这样的表中有数据：

```
 fgid   qty   ntid
 1      100   10
 2      90    10
 6      200   11
 1      80    11
 1      120   12
 6      100   12
 6      30    13 
```

我进行查询：

```
SELECT fgid, SUM(qty) AS total_qty, COUNT(ntid) AS nt_count FROM sofg 
GROUP BY fgid 
```

结果是：

```
 fgid   total_qty   nt_count
 1      300         3
 2      90          1
 6      330         3 
```

**然后我想得到这样的结果**：

```
no    fgid    total_qty   nt_count
1     1       300         3
2     2       90          1
3     6       330         3 
```

**如何通过查询做到这一点？**其中“ **no** ”是（如）自动增量数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:27:55.017

试试这个查询。

```
SELECT 
  @rownum := @rownum + 1 rownum, 
  t.* 
  FROM (SELECT @rownum:=0) r, 
  (
   SELECT fgid, SUM(qty) AS total_qty, COUNT(ntid) AS nt_count FROM sofg GROUP BY fgid
  ) t; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:33:10.683

与 Dhinakaran 的答案基本相同，但无需将整个主查询放入子查询中。他的回答除了可能更令人赏心悦目之外没有任何区别，但请接受 Dhinakaran 的回答，因为他的速度更快。

```
SELECT 
@rownum:=@rownum + 1 as rownumber,
fgid, 
SUM(qty) AS total_qty, 
COUNT(ntid) AS nt_count 
FROM sofg
, (select @rownum:=0) v 
GROUP BY fgid 
```

# knockout.js - KoGrid如何自定义分页和使用lib

> ID：15656410
> 
> 赞同：0
> 
> 时间：2013-03-27T10:17:20.103
> 
> 标签：knockout.js, kogrid

您好，有人知道如何在 KoGrid 上自定义分页吗？

我想创建自己的分页控件（很简单），我需要将 koGrid 分页事件绑定到我的控件。（我尝试编写类似 koGrid generate 但它不起作用）

```
 <button data-bind="click: pagingOptions.pageToFirst" type="button">
    pageToFirst
    </button>

function mainViewModel() {
    var self = this;
    var checkmarkFilter = function (input) {
        return input ? '\u2714' : '\u2718';
    };
    var dateFilter = function (input) {
        return new Date(input);
    };
    self.mySelections = ko.observableArray([]);
    self.myData = ko.observableArray([]);
    self.myVisibleData = ko.observableArray([]);
    self.filterOptions = {
        filterText: ko.observable(""),
        useExternalFilter: false
    };

    self.pagingOptions = {
        pageSizes: ko.observable([10, 20, 50]), //page Sizes
        pageSize: ko.observable(10), //Size of Paging data
        totalServerItems: ko.observable(0), //how many items are on the server (for paging)
        currentPage: ko.observable(1) //what page they are currently on
    };
    self.getPagedDataAsync = function (pageSize, page, searchText) {    
         var pagedData = resultData.slice((page - 1) * pageSize, page * pageSize);  
         self.myVisibleData(pagedData);
         self.myData(resultData);
         self.pagingOptions.totalServerItems(resultData.length);

        // setTimeout(function () {
            // var data;
            // if (searchText) {
                // var ft = searchText.toLowerCase();
                // data = largeLoad().filter(function (item) {
                    // return JSON.stringify(item).toLowerCase().indexOf(ft) != -1;
                // });
            // } else {
                // data = largeLoad();
            // }
            // //var pagedData = data.slice((page - 1) * pageSize, page * pageSize);
            // self.myData(data);
            // self.pagingOptions.totalServerItems(data.length);
        // }, 100);
    };
    self.pagingOptions.pageSize.subscribe(function (a) {
        self.getPagedDataAsync(a, self.pagingOptions.currentPage(), self.filterOptions.filterText());
    });
    self.pagingOptions.currentPage.subscribe(function (a) {
        self.getPagedDataAsync(self.pagingOptions.pageSize(), a, self.filterOptions.filterText());
    });
    self.filterOptions.filterText.subscribe(function (a) {
        self.getPagedDataAsync(self.pagingOptions.pageSize(), self.pagingOptions.currentPage(), a);
    });
    self.getPagedDataAsync(self.pagingOptions.pageSize(), self.pagingOptions.currentPage());

    self.columnsChanged = function(newCols) {
        return true;
    };
    self.gridOptions = {
        data: self.myVisibleData,
        selectedItems: self.mySelections,
        displaySelectionCheckbox: true,
        multiSelect: true,
        showGroupPanel: false,
        showColumnMenu: false,
        showFilter: false,
        columnsChanged: self.columnsChanged,
        maintainColumnRatios: true,
        enablePaging: true,
        pagingOptions: self.pagingOptions,
        columnDefs: ko.observableArray( [{ field: 'name', displayName: 'Adr', width: 'auto' },
                     { field: 'type', displayName: 'type', width: 'auto' },
                     { field: 'id', displayName: 'id', width: 'auto' }   ])
    };
    self.refresh = function(myAjaxData){ self.myData(myAjaxData) }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:11:47.297

您`pagingOptions.pageToFirst`的 pagingOptions 对象中不存在您的。

如果您试图转到第一页，请创建一个新功能

```
self.pageToFirst = function(){
    self.pagingOptions.currentPage(1);
} 
```

然后这将调用 currentPage 上的 subscribe 函数，然后向服务器发出请求以获取结果的第一页。

# php - elseif 在 while 子页面中

> ID：15656419
> 
> 赞同：0
> 
> 时间：2013-03-27T10:17:48.233
> 
> 标签：php, mysql

我想为每一行创建 elseif ......我不知道该怎么做......试图谷歌（elseif in while）......希望有人能给我一个提示来解决这个问题......

```
$subgalSql = mysql_query("SELECT * FROM galerieCategories ORDER BY title ASC");
        while($subgalData = mysql_fetch_array($subgalSql)){

        elseif($_GET[galeriepath] == $subgalData[title]){
         ?>HTML HERE<?
        }

        } 
```

我希望有人能看到我在这里尝试做什么...... elseif 将成为子页面......

感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:20:26.727

“elseif”仅用作辅助“if”语句。

```
if (condition) {
 //if condition is true
} elseif (condition2){
 //otherwise, if condition 2 is true
} else {
 //all else
} 
```

长话短说：你想要的只是一个“如果”，因为它是第一个（也是唯一一个）条件。

这应该有效：

```
 $subgalSql = mysql_query("SELECT * FROM galerieCategories ORDER BY title ASC");
    while($subgalData = mysql_fetch_array($subgalSql)){
       if($_GET[galeriepath] == $subgalData[title]){
           ?>HTML HERE<?
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:20:44.283

```
$subgalSql = mysql_query("SELECT * FROM galerieCategories ORDER BY title ASC");
while($subgalData = mysql_fetch_array($subgalSql)){

   if($_GET[galeriepath] == $subgalData[title]){
      //HTML HERE
   }
   elseif(/*some condition here*/){
       // Code if it satifies the conditon
   } 
} 
```

参考： http: [//php.net/manual/en/control-structures.elseif.php](http://php.net/manual/en/control-structures.elseif.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:33:06.460

您不能在主要条件内放置 elseif，它必须在结束后继续。

```
// what I think your trying to do
if()
{
     while()
     {
          elseif()
          {
          }
     }
} 
```

你应该做什么

```
if($x='y')
{
    $elsecondtion=false;
}
else
{
    $elsecondtion=true;
}

$subgalSql = mysql_query("SELECT * FROM galerieCategories ORDER BY title ASC");
while($subgalData = mysql_fetch_array($subgalSql)){
    if($elsecondition && $_GET[galeriepath] == $subgalData[title]){
     ?>HTML HERE<?
    }

} 
```

# vb.net - 检查会话状态 OnStart

> ID：15656420
> 
> 赞同：1
> 
> 时间：2013-03-27T10:17:49.830
> 
> 标签：vb.net, windows-services

在 VB.NET 中开发 Windows 服务时，您可以跟踪当前会话中的更改（如 Logon、Logoff 或 ConsoleConnect）。下面的代码为您提供了一个示例。此过程仅在当前会话更改时运行。服务启动时不运行。

```
Protected Overrides Sub OnSessionChange(changeDescription As System.ServiceProcess.SessionChangeDescription)
    MyBase.OnSessionChange(changeDescription)

    If changeDescription.Reason = ServiceProcess.SessionChangeReason.ConsoleConnect Then
        'Do stuff
    End If
End Sub 
```

我的问题是：服务启动时如何检查当前会话状态？用户是否登录？他是通过控制台会话连接的吗？您可以通过该`OnSessionChange`过程跟踪相同的事情。

# ruby - 如何在数组数组中获取特定值

> ID：15656421
> 
> 赞同：4
> 
> 时间：2013-03-27T10:17:50.277
> 
> 标签：ruby, arrays, multidimensional-array, indexing

我有一个包含三个数组（内部数组）的数组（外部数组），每个数组都有三个元素。

```
array = [[a, b, c], [d, e, f], [g, h, i]] 
```

我想使用外部数组的索引选择特定的内部数组，然后根据其索引在选定的内部数组中选择值。这是我尝试过的：

```
array.each_index{|i| puts "letter: #{array[i[3]]} " } 
```

我希望这会给我以下输出

```
letter: c letter: f letter: i 
```

但相反，我得到

```
letter: [[a, b, c], [d, e, f], [g, h, i]] 
```

我也试过

```
array.each_index{|i| puts "letter: #{array[i][3]} " } 
```

但我得到了同样的结果。请任何建议都非常感谢。我需要一个简单的解释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T10:36:19.207

`each_index`是一个遍历所有索引并对每个索引执行操作的 Enumerable。完成后，它将返回您的**原始收藏**，因为更改它不是它的工作。如果你想通过`puts`/在屏幕上输出东西，`print`那`each_index`很好。

如果要通过遍历原始集合的所有元素来创建新集合，则应使用[map](http://apidock.com/ruby/Enumerable/map)。

例如

```
array = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]
new_array = array.map {|el| el[2]}
=> ["c", "f", "i"] 
```

array.map 遍历数组的元素，所以在每一步 |el| 是一个元素，而不是索引，例如：`['a', 'b', 'c']`在第一次迭代中，`['d', 'e', 'f']`在第二次迭代中，依此类推......

只是指出这一点，因为我不知道你想要做什么的目标是什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T10:22:40.783

像这样做：

```
array.each_index{|i| puts "letter: #{array[i][2]} " } 
```

因为你想要索引 2 的字母，而不是 3。

数组也应该这样定义：

```
array = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T12:47:10.167

你可以`map`这样使用：

```
a = [['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]
a.map(&:last)
# => ["c", "f", "i"] 
```

或者，如果您真的想要 put 而不是收集的值：

```
a.each {|v| puts "letter: #{v.last}"} 
```

`Matrix`如果你想做更多的 Matrix-y 东西，你也可以使用 Ruby 的类：

```
require 'matrix'
m = Matrix[['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]
last_column = m.column_vectors.last
# => Vector["c", "f", "i"] 
```

您现在可以使用 上的任何`Vector`方法`last_column`，包括`to_a`，这将使您回到熟悉的领域，使用最后一列的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:22:57.970

ruby 中的数组从 0 开始索引，而不是从 1 开始。所以：

```
array.each_index{|i| puts "letter: #{array[i][2]} " } 
```

应该给你你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T10:30:41.390

您也可以尝试以下方法：

```
p RUBY_VERSION

arr = [[1,2,3],[4,5,6],[11,12,13]]

arr.each{|x| p x; x.each_index{|i| p "Digit :: #{x[i]}" if i == 2} } 
```

*输出：*

```
"2.0.0"
[1, 2, 3]
"Digit :: 3"
[4, 5, 6]
"Digit :: 6"
[11, 12, 13]
"Digit :: 13 
```

# javascript - Cookie 不持久的三星智能电视开发问题

> ID：15656422
> 
> 赞同：1
> 
> 时间：2013-03-27T10:17:51.200
> 
> 标签：javascript, cookies, samsung-smart-tv

嗨，我正在用 JS 和 HTML 为三星 2012 开发智能电视应用程序。我使用这种方法来保存 cookie，保存和检索在模拟器上工作得很好，我遇到的问题是在真实设备上，cookie 只有在退出和重新进入应用程序时才会持久，但在关闭/打开电视时不会。

知道有什么问题吗？谢谢

```
setCookie: function(c_name,value,milis)
{            
    var exdate=new Date();
    exdate.setTime(exdate.getTime() + milis);
    var c_value=escape(value) + ((milis==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:25:36.647

三星智能电视上的应用程序是从本地文件系统加载的 html 文件。他们不存储cookies。

要将您的值存储在电视上，您可以使用[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)或[File API](http://www.samsungdforum.com/Guide/ref00001/index.html)。

# mysql - 并发选择和删除

> ID：15656425
> 
> 赞同：0
> 
> 时间：2013-03-27T10:17:58.497
> 
> 标签：mysql, database-concurrency

我有两笔交易。在创建后分配标签以发布的一种（事务 B）。另一个事务（事务 A）删除不再被任何帖子使用的标签。它是在删除后完成的。

交易A

```
SELECT COUNT(*) FROM post_tags WHERE tag_id = 45; 
```

交易 B

```
SELECT id FROM tag WHERE name = 'rss'; 
```

交易A

```
DELETE FROM tag WHERE id = 45; 
```

交易 B

```
-- Now, foreign key violation
INSERT INTO post_tags(post_id, tag_id) VALUES(123, 45); 
```

我知道我可以在两个事务中使用 SELECT FOR UPDATE，但我不想锁定只分配标签的事务。我希望它们仅在有尝试删除标签的事务时才锁定。

# batch-file - 使用批处理文件的每行的长度

> ID：15656431
> 
> 赞同：0
> 
> 时间：2013-03-27T10:18:20.847
> 
> 标签：batch-file

如果行的长度为 7999，我想逐行读取 CSV 文件并回显不同的内容。

我设法执行以下操作，它读取每一行并检查每行的字符数，但问题是我在 %result% 中没有得到任何值并`echo(%result%`打印一个空白值。知道我在这里做错了什么吗？谢谢

```
@echo off
setlocal
for /f "tokens=* delims= " %%a in (REPORTS.csv) do (
    set "line=%%a"
    call :strlen result line
    echo(%result%
    if %result% EQU 7999 (
        echo %%a
        echo(short=%result%
    ) else (
        echo %%a
        echo(long=%result%
    )

    pause
)
:strlen <resultVar> <stringVar>
(
    setlocal EnableDelayedExpansion
    set "s=!%~2!#"
    set "len=0"
    for %%P in (4096 2048 1024 512 256 128 64 32 16 8 4 2 1) do (
        if "!s:~%%P,1!" NEQ "" ( 
            set /a "len+=%%P"
            set "s=!s:~%%P!"
        )
    )
)
( 
    endlocal
    set "%~1=%len%"
    exit /b
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:58:35.583

将此部分放入另一个子程序中，类似于`:strlen`

```
echo(%result%
if %result% EQU 7999 (
    echo %%a
    echo(short=%result%
) else (
    echo %%a
    echo(long=%result%
) 
```

另请注意，您的主程序将在完成后继续进入您的子程序，因此在文件末尾（reports.csv）批处理将执行`:strlen`最后一次并通过`EXIT`

我建议添加一个

```
GOTO :EOF 
```

紧接在`:strlen`标签之前。处理器理解这一点以转到 physiacl-file 结尾（**需要**冒号）

当要执行括在括号中的复合语句时，该语句首先从左括号一直解析到匹配的右括号。

此时，any`%var%`将替换为在它被**解析时**`var`来自环境的值（即它的**PARSE-TIME**值。）

 ******那么**如果该语句看起来有效，它就会被执行。

**访问变量的RUN-TIME**值有三种常用方法（例如，在`FOR`循环执行时）。

1/`SETLOCAL ENABLEDELAYEDEXPANSION`切换到 !var! 可用于访问`var` 2/的运行时值，以从 3/ 的运行时值`CALL set var2=%%var%%`设置 的值 执行子程序，内部或外部，其中 将是运行时值。`var2``var``%var%`

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
FOR %%i IN (1 2 3) DO (
ECHO START of run %%i
ECHO using ^!time^! : !time! - PARSE TIME was %time%
CALL ECHO using CALL %%%%TIME%%%% : %%TIME%%
CALL :report
timeout /t 5
ECHO using ^!time^! : !time!
CALL ECHO using CALL %%%%TIME%%%% : %%TIME%%
CALL :report
ECHO END of run %%i
ECHO.
)
GOTO :eof

:report
ECHO :report says TIME is %TIME%
GOTO :eof 
```

需要注意的几点：

1.  该指令

    IF ERRORLEVEL n 回显错误级别为 n 或更大

    ***ALWAYS***解释 RUN-TIME 值`ERRORLEVEL`

2.  `IF SET VAR` ***ALWAYS***解释 RUN-TIME 值`VAR`

3.  `magic variables`永远不应该设置 ERRORLEVEL 和 TIME 。如果你执行

    设置错误级别=哑

then`ERRORLEVEL`将采用该值`dumb`，因为环境中的当前值优先于系统分配的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:52:46.860

`if`您应该在和循环中使用 DelayedExpansion`for`并注意括号：

```
@echo off
setlocal enabledelayedexpansion
for /f "tokens=* delims= " %%a in (REPORTS.csv) do (
set "line=%%a"
call :strlen result line
echo.!result!
if !result! EQU 7999 (
    echo.%%a
    echo.short=!result!
) else (
    echo.%%a
    echo.long=!result!
)
)
pause 
goto:eof    

:strlen <resultVar> <stringVar>
setlocal EnableDelayedExpansion
set "s=!%~2!#"
set "len=0"
for %%P in (4096 2048 1024 512 256 128 64 32 16 8 4 2 1) do (
    if "!s:~%%P,1!" NEQ "" ( 
        set /a "len+=%%P"
        set "s=!s:~%%P!"
    )
)
endlocal &set "%~1=%len%"
exit /b 
```

您的代码在许多领域都无法使用。****

# c++ - ＃包括 与#包括 在 C++ 程序中

> ID：15656434
> 
> 赞同：11
> 
> 时间：2013-03-27T10:18:33.930
> 
> 标签：c++, c, coding-style, include, header-files

在 C++ 程序中包含前者而不是后者的考虑因素是什么？我总是包括`math.h`，`stdlib.h`从不`cmath`等`cstdlib`。我不明白后者甚至存在的原因，有人可以赐教吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-27T10:19:58.953

更喜欢包含`<c ...>`标题。它们是 C++ 标准库头文件。`<... .h>`头文件是由 C 标准库定义的头文件：

> C++ 标准库还提供了 C 标准库的功能，经过适当调整以确保静态类型安全。

C++ 头文件的大部分内容与相应的 C 库头文件相同，只是名称都在`std`命名空间中定义。

> 除了第 18 到 30 条和附录 D 中的说明外，每个标题的内容`cname`应与相应标题的内容相同`name.h`，如 C 标准库 (1.2) 或 C Unicode TR 中规定的，视情况而定，如同通过包容。然而，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在命名空间 std 的命名空间范围 (3.3.6) 内。未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式使用声明注入命名空间 std

# c++ - 如何将绑定与通过引用传递的抽象类一起使用

> ID：15656436
> 
> 赞同：4
> 
> 时间：2013-03-27T10:18:39.770
> 
> 标签：c++, stl, standard-library, stdbind

我正在尝试将 std::transform 与 std::bind 一起使用来简化循环。这是一些代码：

```
class ITest
{
public:
    virtual CPrueba Prueba(double p, double d = 0)const = 0;
};

void foo(const ITest& test)
{
    std::vector<double> v;
    std::vector<CPrueba> vRes;
    // ...
    // ...
    std::transform(v.begin(), v.end(), back_inserter(vRes), 
                   bind(&ITest::Prueba, test, _1, 0));
    //...
} 
```

这不编译。

我正在使用 VS2008 SP1 并且遇到了很多我不理解的模板错误，所以[我在 ideone](http://ideone.com/OdWtXl) (gcc 4.7.2) 中进行了尝试。那里我有一些更易读的错误，我得出的结论是它与 ITest 是抽象的有关。

但是我尝试通过更改传递测试对象的方式来尝试，如果我[通过指针进行，它可以工作](http://ideone.com/u7NyUU)。

那么有什么我可以用来保留函数签名并仍然使用带有绑定的变换而不是循环的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:28:41.433

`std::bind`内部存储`std::decay`每个参数的 ed 类型。传递 时`test`，这会导致它尝试存储类型的对象`ITest`，这当然是抽象的。

`test`如果您传递包裹在 a 中，它将起作用`std::reference_wrapper`，因为这会导致`std::bind`存储对对象的左值引用：

```
std::transform(v.begin(), v.end(), back_inserter(vRes), 
               bind(&ITest::Prueba, std::ref(test), _1, 0)); 
```

您也可以将指针传递给对象，因为`std::bind`它也接受：

```
std::transform(v.begin(), v.end(), back_inserter(vRes), 
               bind(&ITest::Prueba, &test, _1, 0)); 
```

# c - int 促销：以下是否明确定义？

> ID：15656437
> 
> 赞同：11
> 
> 时间：2013-03-27T10:18:44.940
> 
> 标签：c, standards, c99

假设在 C 实现上（例如在 x86 C 编译器上）`USHRT_MAX = 65535`和`INT_MAX = 2147483647`. 那么，以下陈述是否定义明确？

```
unsigned short product = USHRT_MAX * USHRT_MAX; 
```

根据 C99 标准中的以下内容，两个操作数都被提升为`int`（因为`int`可以表示 的所有可能值`unsigned short`），因此，结果没有明确定义，因为会发生溢出（`65535 ^ 2 = 4294836225 > 2147483647`），这意味着 的值`product`不是定义明确：

> **6.3.1.1-1**
> 
> 如果一个 int 可以表示原始类型的所有值，则将该值转换为 int；否则，它将转换为无符号整数。这些被称为整数提升。(48) 所有其他类型都不受整数提升的影响。
> 
> 48) 整数提升仅适用于：作为通常算术转换的一部分，适用于某些参数表达式，适用于一元 +、- 和 ~ 运算符的操作数，以及移位运算符的两个操作数，由它们各自指定子条款。

但是，根据以下内容，结果是明确定义的，因为涉及无符号操作数的计算不会溢出：

> **6.2.5-9**
> 
> 有符号整数类型的非负值范围是相应无符号整数类型的子范围，并且每种类型中相同值的表示是相同的。(31)**涉及无符号操作数的计算永远不会溢出，因为结果不能用得到的无符号整数类型表示，以比结果类型可以表示的最大值大一的数字为模减少。**

`product`上述语句中的变量是否具有明确定义的值？

**编辑**：在以下情况下会发生什么？

```
unsigned short lhs = USHRT_MAX;
unsigned short rhs = USHRT_MAX;
unsigned short product = lhs * rhs; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:35:54.733

促销获胜。

`USHRT_MAX`关于常量等的第 5.2.4.2.1 节说：

> 下面给出的值应替换为适用于`#if`预处理指令的常量表达式。此外，除了`CHAR_BIT`and之外`MB_LEN_MAX`，以下内容**应替换为与根据整数提升转换为相应类型的对象的表达式具有相同类型的表达式**。

所以乘法在`int`s 上，并且不涉及无符号操作数，毫无疑问，没有一致的方法来实现`USHRT_MAX`涉及无符号操作数 if 的操作`USHRT_MAX < INT_MAX`。因此，您有溢出和未定义的行为。

关于添加的问题

> 编辑：在以下情况下应该发生什么？
> 
> ```
> unsigned short lhs = USHRT_MAX;
> unsigned short rhs = USHRT_MAX;
> unsigned short product = lhs * rhs; 
> ```

那是完全一样的情况。的操作数`*`受到整数提升，所有类型的值`unsigned short`都可以通过对和`int`的值的假设表示为 s ，因此乘法在s 上，并且与指定的值溢出。`USHRT_MAX``INT_MAX``int`

您需要将至少一个操作数转换为未提升为的无符号类型，以便`int`对无符号操作数执行乘法运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:35:22.957

您得到 UB，因为在应用乘法运算符时，它的操作数已经是有符号整数（因为首先发生的提升`int`）。

您可以使用以下方法解决此问题：

```
unsigned short product = USHRT_MAX * (unsigned)USHRT_MAX; 
```

`(unsigned)some_integer`未签名的证明：

```
#include <stdio.h>

int main(void)
{
  printf("1u * (-1) = %f\n", (((unsigned)1) * (-1)) + 0.0);
  printf("1 * (-1) = %f\n", (1 * (-1)) + 0.0);
  return 0;
} 
```

输出（[ideone](http://ideone.com/6u1Gde)）：

```
1u * (-1) = 4294967295.000000
1 * (-1) = -1.000000 
```

很好的收获，顺便说一句。

# c++ - 多读/多写解决方案

> ID：15656442
> 
> 赞同：0
> 
> 时间：2013-03-27T10:19:04.080
> 
> 标签：c++, multithreading, boost

我有以下希望由多个线程运行的函数：

```
float * readWrite(int & idx, const float * vector, const int & dimension){
    float * subPart = new float[dimension];
    for(int i=0; i < dimension; i++)
        subPart[i] = *(v+idx*dimension+i);
    idx++;
    return subPart;
} 
```

所以每个线程都会读取变量 idx 并增加它。我希望任何时候都不应允许读者和作家同时进入。解决方案是所有线程都能够访问 idx 并仅在 idx 更改时实际创建一个关键部分（boost::mutex）。我怎么能用 boost 甚至 C++11 std::mutex 来避免死锁和减慢读取访问速度。

谢谢

# c# - 无需等待永恒循环结束即可获取下一个函数

> ID：15656443
> 
> 赞同：1
> 
> 时间：2013-03-27T10:19:08.237
> 
> 标签：c#, windows-runtime, async-await

我有功能，它开始新的任务：

```
private async Task GetCamera()
{
  ....
  await Task.Run(async () => await MyAwesomeTask());//eternal cycle
  int a=10;//how start without waiting for the end of the thread?
  int b=15;
  SomeFunction(a,b);    
}

private async Task MyAwesomeTask()
{
  while (true)
  {
    await Task.Delay(TimeSpan.FromSeconds(0.5));
    //some task
  }
} 
```

但是下一行 (int a=10;) 等待 Task 结束。我需要，那 (int a=10;)**不要**等待，然后继续。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:39:21.670

因为您等待 Task.Run(...) 调用 GetCamera 方法的执行在等待行上“暂停”，直到任务完成。一旦异步调用终止，GetCamera 方法的执行就会继续。

> await 运算符应用于异步方法中的任务，以暂停该方法的执行，直到等待的任务完成。任务代表正在进行的工作。

[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)

要让您的方法继续执行，您需要删除该等待。

# python - Python使用win32com创建Access数据库

> ID：15656445
> 
> 赞同：5
> 
> 时间：2013-03-27T10:19:11.353
> 
> 标签：python, ms-access, win32com

我想从 Python 脚本中创建一个 Access 数据库 (*.accdb)。使用 win32com 和 Dispatch 我可以调用该应用程序。但是，我找不到有关如何创建新数据库的任何信息。

```
access = win32com.client.Dispatch('Access.Application') 
```

那时我不需要将数据放入数据库，我会使用 pyodbc 来做这件事——我只需要创建一个空数据库。

有人有如何做到这一点的例子吗？

干杯托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:41:15.493

您有一个 Access 应用程序对象。使用它的`DBEngine.CreateDatabase`方法来创建你的 db 文件。

此示例从 Python 2.7 开始创建 MDB 格式的数据库文件。要创建 ACCDB，请将 128 (dbVersion120) 用于`dbVersion`.

```
import win32com.client
oAccess = win32com.client.Dispatch('Access.Application')
DbFile = r'C:\Users\hans\Documents\NewDb.mdb'
dbLangGeneral = ';LANGID=0x0409;CP=1252;COUNTRY=0'
# dbVersion40 64
dbVersion = 64
oAccess.DBEngine.CreateDatabase(DbFile, dbLangGeneral, dbVersion)
oAccess.Quit()
del oAccess 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:02:48.187

要创建一个新的空 .accdb 文件，下面的 Python 代码应该可以解决问题：

```
import win32com.client
f = 'C:\\Users\\Gord\\Desktop\\pyTest.accdb'
c = win32com.client.Dispatch('ADOX.Catalog')
c.Create('Provider=Microsoft.ACE.OLEDB.12.0;Data Source=' + f + ';')
c = None
print '"' + f + '" created.' 
```

**[编辑 1]**

[对此处](http://vbadud.blogspot.ca/2007/11/create-database-with-ado-ado-create.html)发布的博客的评论表明，如果`.Create`调用生成“类未注册”错误，您可能需要使用`regsvr32.exe`重新注册`msadox.dll`。尝试此操作时请注意“位”：这*两个*文件都有 32 位和 64 位版本：

**64 位**
C:\Windows\System32\regsvr32.exe
C:\Program Files\Common Files\System\ado\msadox.dll

**32 位**
C:\Windows\SysWOW64\regsvr32.exe
C:\Program Files (x86)\Common Files\System\ado\msadox.dll

另外，请注意您可能在 64 位机器上运行 32 位 Python。

**[编辑 2]**

我进行了一些测试并得出结论，这种方法在这种特殊情况下不起作用，因为 Python 脚本以 64 位运行，但未安装 64 位 Access 数据库引擎。（32 位 Office 仅安装 32 位版本的 ACE。）

错误消息可能有点误导。丢失（未注册）的不是 ADOX 组件，而是找不到 ACE 引擎本身的 64 位版本。

此外，在安装了 32 位 Access 的 64 位机器上，64 位版本的 ACE 将*永远*不可用，因为它无法安装

![没有 64 位 ACE 和 32 位 Office](../Images/280d61b7d510fa31459d27375fb43568.png)

当您尝试从 64 位 Python 脚本操作 .accdb 文件中的数据时，这很可能会产生影响。我的“64 位 Windows 上的 32 位 Office”测试机上没有可用的 Python，但是当我尝试以下 VBScript 时...

```
Option Explicit
Dim con, rst
Set con = CreateObject("ADODB.Connection")
con.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data source=C:\Users\Gord\Desktop\adoTest.accdb;"
Set rst = CreateObject("ADODB.Recordset")
rst.Open "SELECT Field1 FROM Table1", con
Wscript.Echo rst(0).Value
rst.Close
Set rst = Nothing
con.Close
Set con = Nothing 
```

...结果如下：

```
C:\__tmp>C:\Windows\System32\cscript.exe /nologo dataAccessTest.vbs
C:\__tmp\dataAccessTest.vbs(4, 1) ADODB.Connection: Provider cannot be found. 
It may not be properly installed.

C:\__tmp>C:\Windows\SysWOW64\cscript.exe /nologo dataAccessTest.vbs
This is Table1 data in Access. 
```

该脚本在以 64 位运行时失败，但在以 32 位运行时有效。

建议：如果您的机器安装了 32 位 Access，您最好将 Python 脚本也运行为 32 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T17:31:55.970

```
import win32com.client
ConFileName = r'c:\mydb\myaccess.mdb'
try:
    Catalog = win32com.client.Dispatch('ADOX.Catalog')
    Catalog.Create('Provider=Microsoft.ACE.OLEDB.12.0;Data Source=' + ConFileName + ';')
    Catalog = None
except:
    Exception as e:
        print("Database generation failed, Error="+str(e))
print("NewAccessDB.mdb created successfully") 
```

然后你可以连接到访问数据库：

```
ConFileName=(r'c:\mydb\myaccess.mdb')
conn = pyodbc.connect(r'Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=' + ConFileName + ';')
cursor = conn.cursor() 
```

要插入访问表：

```
ConFileName=(r'c:\mydb\myaccess.mdb')
conn = pyodbc.connect(r'Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=' +ConFileName+ ';')
cursor = conn.cursor()
for ta in TableArray:
    Sql_insert_query = "INSERT INTO Table1(ID, Value1,Value2,Value3,Value4,Value5,Value6) " \
                         "VALUES ('{a}','{b}','{c}','{d}','{e}','{f}','{g}')".format(a=str(ta[0]),b=str(ta[1]),c=str(ta[2]),d=str(ta[3]),e=str(ta[4]),f=str(ta[5]),g=str(ta[6]))
    cursor.execute(Sql_insert_query)
    conn.commit()
cursor.close() 
```

请点击此链接了解更多信息：

[https://elvand.com/python-and-ms-access/](https://elvand.com/python-and-ms-access/)

# javascript - 刷新 JS 代码以在屏幕上显示正确的数据

> ID：15656453
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:19:51.213
> 
> 标签：javascript, jquery

我正在使用下面的脚本从给定时间倒计时，并实时显示脚本超时还剩多少小时+分钟+秒。

倒计时非常好，但我面临的问题是，在浏览器上使用**下一个**和**上一个**按钮时，时间不会刷新，而是看到旧时间。它要么显示以前的时间，要么显示以后的时间。

我知道浏览器上的**下一个**和**上一个**按钮不会刷新页面，但我该如何克服这个问题？

**JS**

```
function timeout_warning(login_timeout)
{
    var counter = 0;
    var total_seconds = 0;
    var colour = '';
    var interval_id = '';

    interval_id = setInterval(function ()
    {
        counter++;

        total_seconds = login_timeout - counter;
        hours = parseInt(total_seconds / 3600 ) % 24;
        minutes = parseInt(total_seconds / 60 ) % 60;
        seconds = parseInt(total_seconds % 60, 10);

        remaining = (hours < 10 ? "0" + hours : hours) + ":" + (minutes < 10 ? "0" + minutes : minutes) + ":" + (seconds  < 10 ? "0" + seconds : seconds);

        if (minutes == 0 && seconds == 0)
        {
            document.getElementById('font_timeout').innerHTML = 'Timeout';
            window.clearInterval(interval_id);
        }
        else
        {
            document.getElementById('font_timeout').innerHTML = remaining + 'sec';
        }
    }, 1000);
} 
```

**HTML 正文**

```
<body onload="timeout_warning('1800')"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:35:47.310

[已经在此发布了](https://stackoverflow.com/a/5642600/485048)一个解决方案，并使用表单在页面中存储数据以查看用户是否按下了返回按钮。它设置了一些表单数据，如果页面返回，它可以判断该数据是否已经设置，如果是，则需要强制重新加载（因此您的计时器将重新启动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:30:03.487

如果没有现场示例，我只能对解决方案发表意见。您可能希望我们的 JavaScript 从 cookie 中加载剩余时间，以便在单击浏览器箭头时，代码将从 cookie 中提取时间，而不是从缓存数据中提取时间。

# html - 超级简单但不可能的菜单

> ID：15656454
> 
> 赞同：0
> 
> 时间：2013-03-27T10:19:52.007
> 
> 标签：html, menu, fadein, fadeout

我该怎么做呢？带有 3 个链接 (ABC) 的菜单。“A.html”在开始时显示。单击链接“B”时，“A”淡出，“B”淡入。

每次点击链接。内容由淡出和淡入改变。如果可能的话，我希望浏览器返回按钮工作。

```
<div menu>
 <link> A </link>
 <link> B </link>
 <link> C </link>
</div menu>

<div content>
 A
</div content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:28:54.593

试试这个：http: [//jsfiddle.net/fAvcq/9/](http://jsfiddle.net/fAvcq/9/)

**HTML**

```
<div id="menu">
    <a href="#">A</a>
    <a href="#" class="active">B</a>
    <a href="#">C</a>
</div>
<div id="content">A</div> 
```

**CSS**

```
.active {
    color: red;
} 
```

**JS**

```
$(document).ready(function(){
    $('#menu a[class=active]').fadeOut('slow');

    $('#menu a').click(function(){
        $('#menu a[class=active]').fadeIn('slow');
        $('#menu a[class=active]').removeClass();

        $(this).addClass('active');
        $('#menu a[class=active]').fadeOut('slow');

        $('#content').html($(this).html());
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:27:05.910

你将需要 javascript 或 jquery

在下面查看您的不可能：

像这样放置您的标记

```
<div class="menu">
   <ul>
      <li class="active">
         <a href="#"  > A </a>
         <div class="A hidden">
            <h1> Hello I am A </h1>
            <img src="y.jpg">         
        </div>
      </li>
      <li>
         <a href="#" > B </a>
         <div class="B hidden">
            <h1> Hello I am B </h1>
            <img src="y.jpg"> 
        </div>
     </li>
   </ul>
</div>

<div class="content">

</div> 
```

并放置一个简单的 jQuery 代码，如下所示：

```
//find the changeContent function to the click of anchors 
$('a').on('click',function(){
    changeContent(this);
});

//load the first content by default
changeContent($('li.active').find('a:first')); 

function changeContent(target){
     $('li').removeClass('active');
     $(target).parent().addClass('active');
     $('.content').html($(target).siblings('div').html());
 } 
```

多田！！完成。

[在现场](http://jsfiddle.net/FJcGC/1/)看到这个

# sed - 如何使用 linux regex 创建多个 reg 文件

> ID：15656455
> 
> 赞同：1
> 
> 时间：2013-03-27T10:19:53.227
> 
> 标签：sed, awk, grep, tr

我有一个数据文件和一个 reg 模板文件：

数据文件包含：

```
c01218 172.20.13.50
c01203 172.20.13.35
c01204 172.20.13.36
c01220 172.20.13.52
c01230 172.20.13.55 
```

注册模板：

```
[HKEY_USERS\S-1-5-21-2000478354-2111687655-1801674531-230160\Software\SimonTatham\PuTTY\Sessions\name]
"Present"=dword:00000001
"HostName"="172.28.130.0" 
```

我想创建循环，从模板创建新的 reg 文件，名称来自第一列，并使用第一列更改位于 HKEY_USERS 中的“名称”，并使用第二列更改 IP 地址。

例如：

```
sed -e "s/name/name1/g" -e "s/172.28.130.0/172.28.130.1/g" 1.reg 
```

命令后的预期视图：

```
#cat c01218.reg

[HKEY_USERS\S-1-5-21-2000478354-2111687655-1801674531-230160\Software\SimonTatham\PuTTY\Sessions\c01218]
"Present"=dword:00000001
"HostName"="172.20.13.50" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:27:14.380

sed 是在单行上进行简单替换的出色工具，其他任何事情只需使用 awk：

```
awk '{ printf "[HKEY_USERS\\S-1-5-21-2000478354-2111687655-1801674531-230160\\Software\\SimonTatham\\PuTTY\\Sessions\\name]\n\"Present\"=dword:00000001\n\"HostName\"=\"%s\"\n", $2 > $1 }' data 
```

或者，如果您愿意：

```
awk -v template="\
[HKEY_USERS\\S-1-5-21-2000478354-2111687655-1801674531-230160\\Software\\SimonTatham\\PuTTY\\Sessions\\name]
\"Present\"=dword:00000001
\"HostName\"=\"%s\"
" '{ printf template, $2 > $1 }' data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:41:05.000

尝试：

```
$ while read a b; do sed "s/^\"HostName.*$/\"HostName\"=\"$b\"/" template > $a; done < data 
```

有点混乱，因为`"`必须使用 shell 来扩展 sed-substitution 中的变量，并且所有额外的变量都`"`需要转义。

输出：

```
$ ls
c01203  c01204  c01218  c01220  c01230  data  template

$ cat c*
[HKEY_USERS\S-1-5-21-2000478354-2111687655-1801674531-230160\Software\SimonTatham\PuTTY\Sessions\name]
"Present"=dword:00000001
"HostName"="172.20.13.35"
[HKEY_USERS\S-1-5-21-2000478354-2111687655-1801674531-230160\Software\SimonTatham\PuTTY\Sessions\name]
"Present"=dword:00000001
"HostName"="172.20.13.36"
[HKEY_USERS\S-1-5-21-2000478354-2111687655-1801674531-230160\Software\SimonTatham\PuTTY\Sessions\name]
"Present"=dword:00000001
"HostName"="172.20.13.50"
[HKEY_USERS\S-1-5-21-2000478354-2111687655-1801674531-230160\Software\SimonTatham\PuTTY\Sessions\name]
"Present"=dword:00000001
"HostName"="172.20.13.52"
[HKEY_USERS\S-1-5-21-2000478354-2111687655-1801674531-230160\Software\SimonTatham\PuTTY\Sessions\name]
"Present"=dword:00000001
"HostName"="172.20.13.55" 
```

# mysql - mysqldump - 仅导出结构，没有自动增量

> ID：15656463
> 
> 赞同：92
> 
> 时间：2013-03-27T10:20:06.807
> 
> 标签：mysql, export, mysqldump, database-schema, auto-increment

我有一个 MySQL 数据库，我试图找到一种仅导出其结构的方法，而不使用自动增量值。`mysqldump --no-data`几乎可以完成这项工作，但它保留了 auto_increment 值。有没有办法在不使用 PHPMyAdmin 的情况下做到这一点（我知道它可以做到）？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-27T10:22:20.580

你可以这样做 ：

```
mysqldump -u root -p -h <db-host> --opt <db-name> -d --single-transaction | sed 's/ AUTO_INCREMENT=[0-9]*\b//' > <filename>.sql 
```

正如其他人所提到的，如果您想`sed`正常工作，请添加`g`（用于**全局**替换）参数，如下所示：

```
mysqldump -u root -p -h <db-host> --opt <db-name> -d --single-transaction | sed 's/ AUTO_INCREMENT=[0-9]*\b//g' > <filename>.sql 
```

（这仅在您安装了 GUI 工具时才有效`mysqldump --skip-auto-increment`：）

# 感谢评论的新更新。

这`\b`是无用的，有时会破坏命令。有关说明，请参阅此[SO 主题](https://stackoverflow.com/questions/34283197/what-is-sed-b-command-in-linux)。所以优化的答案是：

```
mysqldump -u root -p -h <db-host> --opt <db-name> -d --single-transaction | sed 's/ AUTO_INCREMENT=[0-9]*//g' > <filename>.sql 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-10-12T18:09:30.157

JoDev 的回答对我来说非常有效，只需对 sed 正则表达式进行小幅调整：

```
mysqldump -d -h localhost -u<user> -p<password> <databaseName> | sed 's/ AUTO_INCREMENT=[0-9]*//g' > databaseStructure.sql 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-08T22:09:49.097

它是 --create-options，默认情况下包含在 --opt 中，它生成 AUTO_INCREMENT 表定义。

如果你只想要基表，

```
mysql -hlocalhost -uuser -ppass --skip-column-names --batch \
    -e "select table_name from tables where table_type = 'BASE TABLE' and table_schema = 'schemaname'" INFORMATION_SCHEMA \
| xargs mysqldump -hlocalhost -uuser -ppass \
    --no-data --skip-triggers --skip-opt --no-create-db \
    schemaname 
```

如果你也想要视图、触发器和例程，

```
mysqldump -hlocalhost -uuser -ppass \
    --skip-opt --events --routines --no-data \
    schemaname 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-28T19:29:30.787

感谢这篇文章，我能够回答我的问题：

> 如何对我的数据库进行版本控制？

然后我刚刚创建了这个脚本：`db_bkp.sh`

```
#!/bin/sh
filename="db_structure.sql"
backupfolder="/var/www/"
fpath="$backupfolder/$filename"
usr="DBUSER"
pass="DBPASS"
db="DBNAME"
mysqldump --user=$usr --password=$pass --no-data $db | sed 's/ AUTO_INCREMENT=[0-9]*//g' > "$fpath" 
```

然后我将它添加到 crontab：

```
30 5 * * * sh /home/scripts/db_bkp.sh 
```

然后在我的仓库中，我将结果添加`db_structure.sql`到 git 中，在将更改推送到 prod 之前，我总是检查是否有任何我忘记对所有 dbs 进行的结构更改。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-03-14T15:37:44.207

mysqldump -u [用户] -p [密码] -d --skip-opt --single-transaction [DB_SCHEMA] > [FILE.ESTENSIONE]

# html - HTML5 视频无法在 Firefox 中播放

> ID：15656465
> 
> 赞同：17
> 
> 时间：2013-03-27T10:20:15.780
> 
> 标签：html, firefox, video, html5-video

我已将文件转换为三种不同的格式：mp4、web 和 ogv。根据[caniuse](http://caniuse.com/#search=video)的说法， firefox 应该同时支持 ogg 和 webm，但没有播放。

我使用[Miro Converter](http://www.mirovideoconverter.com/)转换了文件，据其他人说这应该可以正常工作。我相信 Chrome 会选择 webm 文件（如果我右键单击 -> 在新选项卡中打开，它会显示 webm 文件），这很棒。

网站网址：[http ://dev.fristil.se/hbh/](http://dev.fristil.se/hbh/)

我有一个静态图像作为背景。视频应该显示在它上面，所以如果它没有移动，你可以判断它没有工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-27T10:36:29.063

您的服务器没有为该文件发送正确的 mime 类型。

它发送`Content-Type: text/plain`

HTML5 视频可以在 Safari、Chrome 和 IE 9 中播放，但不能在 Firefox 或 IE 7-8 中播放。如果您修复 MIME 类型的问题，它将在 Firefox 中播放。

如果您使用的是 Apache Web 服务器或 Apache 的某些衍生产品，您可以在站点范围的**httpd.conf**或存储视频文件的目录中的**.htaccess文件中使用 AddType 指令。**（如果您使用其他一些 Web 服务器，请查阅您服务器的文档以了解如何为特定文件类型设置 Content-Type HTTP 标头。）

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm

AddType audio/mpeg .mp3
AddType audio/ogg .ogg
AddType audio/mp4 .m4a
AddType audio/wav /wav 
```

您在这里有同样的问题：[视频文件 .ogv 在 Firefox 中本地播放，但不是来自服务器](https://stackoverflow.com/questions/6139969/video-file-ogv-plays-locally-in-firefox-but-not-from-server) 和更详细的答案：[https ://stackoverflow.com/a/6145629/1081079](https://stackoverflow.com/a/6145629/1081079)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:35:51.943

你的问题是服务器端的。服务器实际上是`text/plain`作为视频的 MIME 类型返回的（至少是 .ogg ）。您需要调整服务器的配置以返回正确的 MIME 类型，以便 Firefox 能够正确识别该文件。与此处描述的问题相同：[找不到支持格式和 MIME 类型的视频。这是什么意思，我该如何更改](https://stackoverflow.com/questions/10424729/no-video-with-supported-format-and-mime-type-found-what-does-this-mean-and-how)（您只是看不到消息，因为您的标签中没有`controls`选项）。`<video>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:33:26.103

您的服务器提供带有 HTTP 标头的资源[http://dev.fristil.se/hbh/wp-content/themes/skal/images/video/bubblybeer.webm](http://dev.fristil.se/hbh/wp-content/themes/skal/images/video/bubblybeer.webm)`Content-Type: text/plain` - 因此 Firefox 拒绝将其视为其他任何东西。

“教”您的服务器传送诸如`video/webm`.

（您的 ogv 也是如此——您的服务器还说资源将是文本，应该是文本`video/ogg`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-20T13:47:19.977

我在我的 Windows 主机中遇到了同样的问题。为了解决这个问题，我在 web.config 里面包含了 mime 设置

```
<staticContent>
  <mimeMap fileExtension=".webm" mimeType="video/webm" />
</staticContent> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T19:51:20.887

我在使用 Flowplayer HTML5 播放器时遇到了与 webm 相同的问题。Firefox 说“找不到 HTML5 视频”。起初我以为是 Miro 有编码问题，我尝试了几个不同的程序，结果都一样。因此，我将其缩小到服务器上不正确的 MIME 类型，将 webm 传输为文本/纯文本（您可以使用网络检查器查看此内容）或 Firefox 只是很糟糕。不久前我有托管服务提供商 AddType video/webm .webm，所以我不能肯定。在意识到我过去使用过 Flowplayer 并且只需要一个 mp4 文件之后，我所做的只是直接从我的 HTML 中删除了 webm 引用。火狐可以使用 mp4。删除这个：

```
 <source type="video/webm" src="URL_to_webm.webm" /> 
```

这使它适用于一切（IE、Chrome、Firefox、iPad、iPhone）。Mac 上的 Chrome 29 使用 mp4。

# google-maps - 我可以使用 Google Maps API 查看坐标 A 是否在坐标 B 的 50 米范围内？

> ID：15656466
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:20:17.120
> 
> 标签：google-maps, geolocation, gps, coordinates, google-latitude

**问题**

我有两个坐标：AB

**解决方案？**

我可以使用 Google Maps API 查看坐标 A 是否在坐标 B 的 50 米范围内？

**其他解决方案？**

如果没有，有没有办法在不使用谷歌 API 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:31:03.630

[Google Maps API v3 几何库中的computeDistanceBetween()](https://developers.google.com/maps/documentation/javascript/reference#spherical)返回两个 google.maps.LatLng 对象之间的直线距离（默认单位为米）。

一定要[包括几何库](https://developers.google.com/maps/documentation/javascript/libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:30:25.200

每部手机以及许多其他地理 api 都具有计算两个纬度、经度坐标之间距离的功能。

如果您没有，请使用半正弦距离公式。

# java - 如何在 Ognl 中编写循环？

> ID：15656467
> 
> 赞同：0
> 
> 时间：2013-03-27T10:20:23.417
> 
> 标签：java, ognl

我想用 Ognl 重新实现以下 Java 代码：

```
while((s=bufferedReader.readLine()) != null)  System.out.println(s); 
```

但我不知道，你能给我点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:05:47.067

OGNL 是对象图导航语言，而不是成熟的编程语言。您可以在 JSP 中将 ognl 与其他技术（如 Struts2 标记）一起使用，并实现相应的 while 循环

来自维基百科

> 它旨在用于将标记库作为表达式语言的 Java EE 应用程序中。

# sass - 在 Sass 中检索列表中的单个值

> ID：15656476
> 
> 赞同：0
> 
> 时间：2013-03-27T10:20:47.430
> 
> 标签：sass

说我有这样的事情：

```
$padding = 5px 25px;
$border  = 1px solid #f00; 
```

我可以检索单个值吗？就像是

```
$padding-vertical = $padding[0];  // returns 5px;
or:
$padding-vertical = $padding(top); // returns 5px
or:
$border-size      = $border[border-width]; // return 1px
$border-color     = $border(border-color); // return #f00
etc... 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:04:17.517

该`nth()`函数是检索列表中特定项目的唯一方法，并且需要知道其位置。

```
$padding-vertical = nth($padding, 1);  // returns 5px; 
```

由于许多速记属性不需要设置所有值，因此您可能无法获得所需的结果。对于您提供的变量，这将起作用：

```
$border-size      = nth($border, 1); // return 1px
$border-color     = nth($border, 3); // return #f00 
```

# android - 处理键盘中的“完成”事件不起作用

> ID：15656478
> 
> 赞同：1
> 
> 时间：2013-03-27T10:20:51.327
> 
> 标签：android, android-widget

我有一个带有编辑文本的对话框。我想在用户在键盘中单击完成时执行一项操作。我的代码看起来像

我的编辑文本 xml 看起来像

```
<EditText
            android:id="@+id/commondialog_userinput"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:imeOptions="actionDone"
            android:selectAllOnFocus="true"
            android:inputType="text" /> 
```

并且添加的侦听器是

```
final EditText inputField = (EditText)dialog.findViewById(R.id.commondialog_userinput);
            inputField.setInputType(EditorInfo.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
            inputField.setText(AndroidGlobalVariables.getDocumentName(), TextView.BufferType.EDITABLE);// No I18N
            inputField.setFocusableInTouchMode(true);
            inputField.requestFocus();
            inputField.selectAll();

        inputField.setOnKeyListener(new View.OnKeyListener() {
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                // If the event is a key-down event on the "enter" button
                if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                    Toast.makeText(EditorActivity.getActivity(), inputField.getText(),Toast.LENGTH_SHORT).show();
                    return true;
                }
                return false;
            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:28:36.180

将 setOnEditorActionListener 用于您想要在键盘上执行操作的 EditText，如下所示：

```
 your_editText.setOnEditorActionListener(new OnEditorActionListener() {

    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE)
                {
                      ** PUT YOUR ACTION HERE !!! **
                }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:27:00.920

您需要的是[http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#IME_ACTION_DONE](http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#IME_ACTION_DONE)。不同的 Android 实现和版本可能使用不同的键，您不能依赖“Enter”键码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:33:54.540

将此用于编辑文本侦听器

```
e_inputField .setOnEditorActionListener(new OnEditorActionListener() {

                public boolean onEditorAction(TextView arg0,
                        int actionId, KeyEvent arg2) {
                    // TODO Auto-generated method stub

                    if (actionId == EditorInfo.IME_ACTION_NEXT) {
                        //do your stuff here

                    }
                    return false;
                }
            }); 
```

# c# - 将数据表映射到类并将类型 Int 更改为 Enum

> ID：15656484
> 
> 赞同：0
> 
> 时间：2013-03-27T10:21:08.873
> 
> 标签：c#, .net, reflection

我有一个像这样返回一个选择的存储过程：

```
select name , family , sex from person 
```

我有一门这样命名的人：

```
 public class person {
         string name {get;set;}
         string family {get;set;}
         GenderEnum sex {get;set;}
       } 
```

我有一个 Enum 命名为 GenderEnum ，如下所示：

```
Enum GenderEnum
{
Man = 1 ,
Woman = 2 ,
} 
```

我想将我的数据表转换为 IList of Person 。

我的问题是：当我想将性别列转换为性别字段时，我最常将 int 类型转换为 GenderEnum。

不要忘记，我最有一个通用方法将所有 DataTable 转换为 All Class，并且这个方法最能识别每个属性都有枚举类型。

此方法根据名称将所有列映射到所有属性

我写了这个方法，但这不适用于所有类型。

例如：如果我的列是 int 并且我的属性是 strinbe 并且具有相同的名称，则映射不起作用。

```
public List<T> ConvertTo<T>(DataTable datatable) where T : new()
    {
        var temp = new List<T>();
        try
        {
            var columnsNames = (from DataColumn dataColumn in datatable.Columns select dataColumn.ColumnName).ToList();
            temp = datatable.AsEnumerable().ToList().ConvertAll<T>(row => GetObject<T>(row, columnsNames));
            return temp;
        }
        catch
        {
            return temp;
        }

    }
private T GetObject<T>(DataRow row, List<string> columnsName) where T : new()
    {
        T obj = new T();
        try
        {
            string columnname = "";

            PropertyInfo[] Properties = typeof(T).GetProperties();
            foreach (PropertyInfo objProperty in Properties)
            {
                columnname = columnsName.Find(name => name.ToLower() == objProperty.Name.ToLower());
                if (!string.IsNullOrEmpty(columnname))
                {
                    var value = row[columnname];

                    if (!string.IsNullOrEmpty(value.ToString()))
                    {

                        Type type;

                        type = Nullable.GetUnderlyingType(objProperty.PropertyType) ?? objProperty.PropertyType;

                        objProperty.SetValue(obj,
                                             type == value.GetType()
                                                 ? Convert.ChangeType(value, type)
                                                 : System.Enum.ToObject(type, value), null);
                    }
                }
            }
            return obj;
        }
        catch (Exception exception)
        {
            return obj;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:46:25.353

I think you're asking for trouble with this **GetObject** method and you'd be better off to switch to EF or (virtually) any other ORM since what you're doing is extremely risky. Consider the maintainability and readability of this code. However, I understand that you probably are under pressure of a deadline and can't do much about it at this stage.

To provide a quick fix for your problem, please consider modifying your **Person** class as follows:

```
public class Person
{
    public String Name { get; set; }

    public String Family { get; set; }

    public Int32 Sex  { get; set; }

    public GenderEnum EnumeratedSex
    {
        get
        {
            return Sex == 1 ? GenderEnum.Man : GenderEnum.Woman;
        }
    }
}

public enum GenderEnum
{
    Man = 1,
    Woman = 2
} 
```

I believe that your Sex field is simply an int in the database, but if not, please change it accordingly.

Please let me know if this is of any help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:24:35.430

而不是这样做，为什么不尝试使用实体框架呢？请参阅此[链接](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)以供参考

# testing - 测试意外的用户行为？

> ID：15656486
> 
> 赞同：0
> 
> 时间：2013-03-27T10:21:21.127
> 
> 标签：testing

我发现我在测试方面真的很糟糕，而且我认为要编写好的测试，你必须知道用户将要做什么。

例如，我最近接管了一个 ajax 应用程序。它写得非常好（我认为），我做了一些改变来实现一个新功能。

当我按照我们期望的用户将使用该应用程序的方式完成流程时，一切正常，但其他人出现并开始点击并破坏了一项功能。它没有灾难性地失败，但它绝对是一个错误。我无法想象用户曾经这样做过，但是，应用程序中有一个错误，我在测试中错过了它。

您如何处理此类案件？您如何设想用户可能使用该应用程序做的任何事情，然后对其进行测试？

我知道每个应用程序都有错误，所以我不是在寻求如何接受我不完美的支持。

您如何确保您正在测试尽可能多的可能性，而不仅仅是预期的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:52:23.583

显然，拥有一个专门的测试人员团队会有所帮助，并且与您的开发同行一起执行诸如走廊测试或 Bug Hunts 之类的事情将为您提供一些不错的错误。

但事实是，您只是在遭受大多数开发人员在测试他们的应用程序时所做的事情。我在我的博客中写了关于它的文章[，](http://qablog.practitest.com/2010/05/why-cant-developers-be-good-testers/)然后我写了一些你可以用来改进你在[这里](http://qablog.practitest.com/2010/12/teaching-programmers-to-test/)所做的测试的技术。

测试不是火箭科学，但它需要一些知识和正确的心态。

祝你好运！

-乔尔

（顺便说一句，与马蒂提到的乔尔不同 :-)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:00:49.360

您无法预测用户将使用您的应用程序做什么。您唯一能做的就是让尽可能多的人使用您的应用程序，正如您已经看到的那样，这将有助于清除您的错误。

尝试做一些走廊测试。你有专门的测试人员吗？如果没有，[乔尔会告诉你为什么你应该这样做](http://www.joelonsoftware.com/articles/fog0000000067.html)。

# asp.net-mvc - 错误 CS1704：DLL 加载了两次？-剃须刀机

> ID：15656487
> 
> 赞同：1
> 
> 时间：2013-03-27T10:21:22.703
> 
> 标签：asp.net-mvc, visual-studio, iis, razor

我想在我的 VS2012 MVC 4 .NET webapp 上使用 RazorMachine，称为“Haas2013”​​。

一切正常，直到我遇到了我实际调用 RazorMachine 的线路。

我不断收到此错误：

```
error CS1704: An assembly with the same simple name 'haas2013, Version=1.0.0.0, 
Culture=neutral, PublicKeyToken=null has already been imported. 
Try removing one of the 
references or sign them to enable side-by-side.

               Line 25:  RazorMachine rm = new RazorMachine();
-->Error here: Line 26:  ITemplate template = rm.ExecuteContent(res.Body); 
```

在查看 Debug/Windows/Symbols 时，我可以看到我的项目“haas2013.dll”的 DLL 加载了两次。

```
haas2013.dll    C:\Users\Reinhard\AppData\Local\Temp\Temporary ASP.NET Files\root\6224be98\f18ecea8\assembly\dl3\43249f4b\692c79c0_cd2ace01\haas2013.dll    No  Yes Symbols loaded. C:\Users\Reinhard\AppData\Local\Temp\Temporary ASP.NET Files\root\6224be98\f18ecea8\assembly\dl3\43249f4b\692c79c0_cd2ace01\haas2013.pdb    29  1.0.0.0 27.03.2013 10:30    05740000-057A0000   [3820] iisexpress.exe: Managed (v4.0.30319)     
haas2013.dll    E:\Arbeiten\haas2013\haas2013\haas2013\obj\Debug\haas2013.dll   No  Yes Symbols loaded. E:\Arbeiten\haas2013\haas2013\haas2013\obj\Debug\haas2013.pdb   84  1.0.0.0 27.03.2013 10:30    08F90000-08FF0000   [3820] iisexpress.exe: Managed (v4.0.30319) 
```

这是错误的根源，还是预期的行为？

我正在使用 IIS-Express。

# delphi - 使用来自 Builder C++ 或 Delphi 的 Windows 媒体中心 SDK

> ID：15656491
> 
> 赞同：1
> 
> 时间：2013-03-27T10:21:40.203
> 
> 标签：delphi, c++builder, windows-media-center

我已经完成了一个应用程序，它显示图像、视频等。我只想添加对电视频道的支持，并且我想从我的程序中使用 windows 媒体中心。

我已经下载了 Windows Media Center SDK，但我不知道如何实例化这些类... Microsoft.MediaCenter、Microsoft.MediaCenter.Hosting 等。

任何帮助都会受到欢迎，因为我有点迷路了。

主要目标是能够以编程方式控制 WMC、运行电视调谐器和更改电视频道

# shell - 最后在shell中写try catch

> ID：15656492
> 
> 赞同：80
> 
> 时间：2013-03-27T10:21:43.313
> 
> 标签：shell, syntax, try-catch, finally

有没有像 java try catch finally 这样的 linux bash 命令？还是 linux shell 总是在运行？

```
try {
   `executeCommandWhichCanFail`
   mv output
} catch {
    mv log
} finally {
    rm tmp
} 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-11-20T01:32:15.713

根据您的示例，无论脚本如何退出，您似乎都在尝试执行类似于始终删除临时文件的操作。在 Bash 中尝试使用`trap`内置命令来捕获`EXIT`信号。

```
#!/bin/bash

trap 'rm tmp' EXIT

if executeCommandWhichCanFail; then
    mv output
else
    mv log
    exit 1 #Exit with failure
fi

exit 0 #Exit with success 
```

脚本退出时始终执行中的`rm tmp`语句`trap`，因此文件“tmp”将始终尝试删除。

安装的陷阱也可以重置；仅使用信号名称调用 trap 将重置信号处理程序。

```
trap EXIT 
```

有关更多详细信息，请参阅 bash 手册页：`man bash`

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2013-03-27T10:29:10.127

好吧，有点：

```
{ # your 'try' block
    executeCommandWhichCanFail &&
    mv output
} || { # your 'catch' block
    mv log
}

 rm tmp # finally: this will always happen 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-29T18:31:24.480

我使用以下语法在我的脚本中找到了成功：

```
# Try, catch, finally
(echo "try this") && (echo "and this") || echo "this is the catch statement!"

# this is the 'finally' statement
echo "finally this" 
```

如果任一 try 语句抛出错误或以 结尾`exit 1`，则解释器继续执行 catch 语句，然后是 finally 语句。

如果两个 try 语句都成功（和/或以 结尾`exit`），解释器将跳过 catch 语句，然后运行 ​​finally 语句。

示例_1：

```
goodFunction1(){
  # this function works great
  echo "success1"
}

goodFunction2(){
  # this function works great
  echo "success2"
  exit
}

(goodFunction1) && (goodFunction2) || echo "Oops, that didn't work!"

echo "Now this happens!" 
```

输出_1

```
success1
success2
Now this happens! 
```

示例_2

```
functionThrowsErr(){
  # this function returns an error
  ech "halp meh"
}

goodFunction2(){
  # this function works great
  echo "success2"
  exit
}

(functionThrowsErr) && (goodFunction2) || echo "Oops, that didn't work!"

echo "Now this happens!" 
```

输出_2

```
main.sh: line 3: ech: command not found
Oops, that didn't work!
Now this happens! 
```

Example_3

```
functionThrowsErr(){
  # this function returns an error
  echo "halp meh"
  exit 1
}

goodFunction2(){
  # this function works great
  echo "success2"
}

(functionThrowsErr) && (goodFunction2) || echo "Oops, that didn't work!"

echo "Now this happens!" 
```

输出_3

```
halp meh
Oops, that didn't work!
Now this happens! 
```

请注意，函数的顺序会影响输出。如果您需要分别尝试和捕获两个语句，请使用两个 try catch 语句。

```
(functionThrowsErr) || echo "Oops, functionThrowsErr didn't work!"
(goodFunction2) || echo "Oops, good function is bad"

echo "Now this happens!" 
```

输出

```
halp meh
Oops, functionThrowsErr didn't work!
success2
Now this happens! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T10:30:43.233

`mv`接受两个参数，所以你可能真的想 cat 输出文件的内容：

```
echo `{ execCommand && cat output ; } || cat log`
rm -f tmp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-23T22:12:02.783

另一种方法是：

```
set -e;  # stop on errors

mkdir -p "$HOME/tmp/whatevs"

exit_code=0

(
  set +e;
  (
    set -e;
    echo 'foo'
    echo 'bar'
    echo 'biz'
  )
  exit_code="$?"
)

rm -rf "$HOME/tmp/whatevs"

if [[ "exit_code" != '0' ]]; then
   echo 'failed';
fi 
```

尽管上述内容并没有真正提供任何好处：

```
set -e;  # stop on errors

mkdir -p "$HOME/tmp/whatevs"

exit_code=0

(
    set -e;
    echo 'foo'
    echo 'bar'
    echo 'biz'
    exit 44;
    exit 43;

) || {
   exit_code="$?"  # exit code of last command which is 44
}

rm -rf "$HOME/tmp/whatevs"

if [[ "exit_code" != '0' ]]; then
   echo 'failed';
fi 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-18T22:28:01.410

**警告：出口陷阱并不*总是*被执行。**自从写了这个答案以来，我遇到了一些情况，我的退出陷阱不会被执行，导致文件丢失，我还没有找到原因。

当我用 停止 python 脚本时出现了问题`Ctrl+C`，该脚本又使用退出陷阱执行了 bash 脚本——这实际上应该导致退出陷阱被执行，因为退出陷阱是`SIGINT`在 bash 中执行的。

因此，虽然`trap .. exit`对清理很有用，但仍有一些场景不会执行，最明显的是断电和接收`SIGKILL`。

* * *

当我添加其他选项或以其他方式更改它们时，我经常会导致 bash 脚本变得非常大。当 bash 脚本包含很多函数时，使用“trap EXIT”可能变得不简单。

例如，考虑一个脚本调用为

```
dotask TASK [ARG ...] 
```

其中每个`TASK`可能包含子步骤，希望在其中执行清理。

在这种情况下，使用子shell 来生成作用域出口陷阱会很有帮助，例如

```
function subTask (
    local tempFile=$(mktemp)
    trap "rm '${tempFile}'" exit
    ...
) 
```

但是，使用子 shell 可能会很棘手，因为它们无法设置父 shell 的全局变量。

此外，编写单个退出陷阱通常很不方便。例如，清理步骤可能取决于函数在遇到错误之前走了多远。能够制作 RAII 样式的清理声明会很好：

```
function subTask (
    ...
    onExit 'rm tmp.1'
    ...
    onExit 'rm tmp.2'
    ...
) 
```

使用类似的东西似乎很明显

```
handlers=""
function onExit { handlers+="$1;"; trap "$handlers" exit; } 
```

更新陷阱。但这对于嵌套的子 shell 失败，因为它会导致父 shell 的处理程序过早执行。客户端代码必须`handlers`在子 shell 的开头显式重置变量。

[[多个 bash traps for the same signal]](https://stackoverflow.com/a/58689419/2075630)中讨论的解决方案，使用来自的输出修补陷阱`trap -p EXIT`同样会失败：即使子 shell 不继承`EXIT`陷阱，`trap -p exit`也会显示父 shell 的处理程序，因此需要手动重置.

# magento - 扩展中的setting.php模型文件破坏了Magento！与 Magento 文件冲突正常吗？

> ID：15656493
> 
> 赞同：0
> 
> 时间：2013-03-27T10:21:44.730
> 
> 标签：magento, module, settings, filenames, conflict

我们创建了一个 Magento 扩展，扩展的模型之一是扩展的设置。我们最终发现将模型文件命名为“setting.php”会导致各种功能停止工作，例如将图像上传到产品和运输计算。

Magento 版本 1.5.1.0

每次尝试上传图像时，都会在 var/log/system.log 中记录以下错误：

> 2013-03-26T16:57:20+00:00 ERR (3): 警告: session_start() [function.session-start]: 无法发送会话缓存限制器 - 标头已发送（输出开始于 /xxx/xxx/website /shop/our-extension/app/code/local/Company/Extension/Model/Setting.php:14) 在 /xxx/xxx/website/shop/app/code/core/Mage/Core/Model/Session/Abstract /Varien.php 在第 115 行

将文件重命名为其他名称消除了与 Magento 的 Varien.php 调用的冲突。这似乎是 Magento 中的一个错误，因为我找不到对此的记录理由。有人对此有任何看法吗？

***根据评论进行编辑：***

我们的扩展只能通过专门单击添加的扩展菜单在管理后端访问。因此，该调用看起来像是在调用 session_start() 期间加载了 settings.php 文件，但由于某种原因试图输出一些东西。最初在输出中看到我们的文件，我认为系统没有理由调用这个文件，因此加载它甚至是错误的。但我怀疑它正在加载它作为创建可从系统和所有扩展中获得的模型对象集合的一部分。然而，正如您在下面看到的，文件中没有输出。

的内容

/xxx/xxx/website/shop/our-extension/app/code/local/Company/Extension/Model/Setting.php:14

```
<?php

class Company_Extension_Model_Setting extends Mage_Core_Model_Abstract
{
        protected function _construct()
        {
                $this->_init('extension/setting');
        }

}

?> 
```

请注意，有 13 行，但消息声明第 14 行开始输出。

config.xml的部分内容：

```
 <global>
        <models>

            <extension>

                <class>Company_Extension_Model</class>

                <resourceModel>extension_mysql4</resourceModel>

            </extension>

            <extension_mysql4>
                <class>Company_Extension_Model_Mysql4</class>
                <entities>
                    <setting>
                        <table>extension_settings</table>
                    </setting>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:21:07.017

之前检查任何符号

```
<?php 
```

也许有 BOM 符号

# mysql - 用户订阅的数据库设计

> ID：15656496
> 
> 赞同：0
> 
> 时间：2013-03-27T10:21:53.957
> 
> 标签：mysql, database, database-design, relational-database

所以我是该主题范围内的数据库的新手，并且正在寻找一些我确信相当简单的建议。首先，我使用 MySql 作为我的数据库，我目前有两个表，一个用于存储用户帐户和详细信息：

```
TABLE user
id | username | password | email_address | user_devices | contact_method 
```

另一个用于存储制作者的视频内容，如下所示：

```
TABLE series
id | series_title | still_broadcasting | last_updated | 
```

我想实现一个功能，用户可以选择他们希望在新版本可用时收到通知的系列，还可以选择如何通知这些版本（电子邮件或推送通知）以及通知频率（到达时） ，每小时，每天，每周）我想知道这样做的最佳方法是什么？

我自己想到了这些想法，但我正在寻找第二种意见/更好的方法：（所有想法减去 4 都涉及存储如何通知用户以及用户表中的频率）

1.  向名为以下的用户表添加一个文本列，并且每个系列只有 csv
2.  为每个系列向用户表添加多个布尔列
3.  将文本列添加到系列表中，其中包含用户 ID 编号的 csv 跟随系列
4.  为通知创建一个全新的表，尽管我并不认为这样做的目的是非常多余的

然后，我计划将 cron 作业添加到我的服务器，以实际定期向用户发送通知

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:58:30.983

如果我是你，我会添加第三个表格，如下所示：

```
TABLE user
id | username | password | email_address | user_devices | contact_method |notification_type

TABLE series
id | series_title | still_broadcasting | last_updated

TABLE followings
id | user_id | series_id 
```

在 notification_type 我会放（到达时、每小时、每天或每周），现在在下表中我将存储所有用户的首选系列。

这样做可以轻松添加、删除、更新或选择所有用户的首选系列。所有这些都是简单的 SQL 查询。您还避免解析逗号分隔的字符串。

例如，如果您想获取用户的所有首选系列：

```
SELECT * FROM followings AS f INNER JOIN series AS s ON f.series_id = s.id WHERE f.user_id = ? 
```

如果想获得所有喜欢系列的用户：

```
SELECT * FROM followings AS f INNER JOIN user AS u ON f.user_id = u.id WHERE f.series_id = ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:58:59.690

First of all, it might be worth giving some articles on basic database design a read. A quick google turned up this which covers identifying relationships

[http://www.datanamic.com/support/lt-dez005-introduction-db-modeling.html](http://www.datanamic.com/support/lt-dez005-introduction-db-modeling.html)

Your best bet is to use a linking table i.e.

```
CREATE TABLE userHasSeries (
    userID INT,
    seriesID INT 
); 
```

This can then be used in an INNER JOIN query to get the users choices. What you are doing here is an n:m link between 2 tables. An example inner join would be

```
SELECT
    u.id AS userID,
    u.username,
    s.seriesID,
    s.series_title,
    s.still_broadcasting,
    s.last_updated
FROM users AS u
INNER JOIN userHasSeries AS uhs
    ON uhs.userID = u.id
INNER JOIN series AS s
    ON s.id = uhs.seriesID 
```

If users.user_devices is also a comma seperated list I would advise heavily that you adopt a similar n:m approach there also.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:17:46.270

补充其他答案中所写内容的部分答案：

不要在“user_devices”字段中保留设备列表 - 将其拆分为单独的表。事实上，您将需要两张表：一张列出各种设备，一张包含两个字段的连接表：user_id 和 device_id。这将使您能够跟踪哪个用户拥有哪个设备，还可以提供每个设备的用户列表。

# android - 如何将 YouTube 视频嵌入到从特定时间开始的 Google Play 应用程序中？

> ID：15656504
> 
> 赞同：0
> 
> 时间：2013-03-27T10:22:40.217
> 
> 标签：android, youtube, google-play

例如： [http ://www.youtube.com/watch?v=7HKoqNJtMTQ#t=1m25s](http://www.youtube.com/watch?v=7HKoqNJtMTQ#t=1m25s)

它可以工作，但是当我将它添加到 Google Play（促销视频选项）时，似乎这`#t=1m25s`部分被忽略了。

有没有其他方法可以归档完全相同的行为但使用不同的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:32:42.473

我立即看到错误的一件事是#。那应该是一个&。

[http://www.youtube.com/watch?v=YGV92nxP_N0&t=1s](http://www.youtube.com/watch?v=YGV92nxP_N0&t=1s)

# c# - 请求特权并在 Ubuntu Linux 中使用 C# 保留此权限

> ID：15656508
> 
> 赞同：1
> 
> 时间：2013-03-27T10:22:49.147
> 
> 标签：c#, ubuntu, mono, elevated-privileges

我正在编写一个工具，可用于管理 Ubuntu 上的虚拟主机和 Web 服务器。至于我需要特权的许多功能，我正在寻找实现这一点的方法。

目前我通过“gksu”或“gksudo”意识到这一点。这也有效。问题是提示用户进行任何需要特权才能输入密码的活动。 **是否可以仅检索一次此密码并在程序的剩余时间内记住？**还有其他方法可以实现吗？

```
 public void OnToogledVirtualHost(object o, ToggledArgs args)
    {
        VirtualHost host = (VirtualHost)store.GetNode(new TreePath(args.Path));
        host.Enabled = !host.Enabled;
        Process process = new Process();
        process.StartInfo.UseShellExecute = false;

        if (host.Enabled)
        {
            process.StartInfo.FileName = "gksu";
            process.StartInfo.Arguments = "a2ensite " + System.IO.Path.GetFileName(host.FilePath);
        }
        else
        {
            process.StartInfo.FileName = "gksu";
            process.StartInfo.Arguments = "a2dissite " + System.IO.Path.GetFileName(host.FilePath);
        }
        process.Start();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:56:57.580

AFAIK，“su”的一项安全功能是不缓存密码（更准确地说是身份验证票）超过几秒钟，因此设计为不被绕过。

您始终可以使用中间进程并尝试使子进程继承其授权，但您需要保护 IPC（工具前端和中间进程之间的通信通道）。

所以我的建议是不要试图降低整体解决方案的安全性，所以让用户根据需要被询问多次......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:31:11.597

这个问题有几个（至少 3 个）“安全”解决方案：

1.  使用“sudo”，允许密码缓存。如果我可以在机器上安装和配置 sudo，这是我的首选解决方案。优点：sudo 将缓存密码。缺点：它取决于正确配置外部依赖项（sudo）。
2.  编写不同的辅助可执行文件（例如“修改配置并重新启动 apache”程序），并在需要时要求用户使用 gksu 进行身份验证，然后启动它们。优点：每组操作只要求用户输入一次密码。缺点：用户仍然会多次被要求输入密码，并且您必须将程序分成多个部分。
3.  编写一个以 root 权限运行的单独服务，并使用 polkit/DBUS 对用户进行身份验证并连接到它以要求服务（例如，“请重新启动 apache”）。优点：凭据缓存和身份验证对话框由 dekstop/polkit 管理。缺点：要编写更多代码，并且您需要运行 DBUS 服务。

引用“安全”是因为以 root 身份运行代码（尤其是依赖于诸如 Mono 等大型应用程序的托管代码）总是具有安全隐患。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T14:00:57.560

你知道，我不会使用 gksu 或 sudo 来做这些，听起来你想看看[userv](http://www.gnu.org/software/userv/)。

您基本上可以允许不同的用户运行不同的程序，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:26:28.053

感谢您提供有用的方法。昨天我找到了一个解决问题的方法，我把它包含在一个静态类中。首先，区分正常流程和特权流程。

每当需要以提升的权限运行进程时，我都会检查我是否已经知道用户的密码。如果没有，我会得到它（gksudo -p）并将其存储在内存中。现在我可以执行具有 privilligierten 权限的命令。然后通过标准输入 (sudo -S) 传输存储的密码。

你怎么看？您有任何安全问题吗？

```
public static class SystemProcess
{
    private static string output;
    private static string error;
    private static string password;

    public static void Start (string filename, string arguments)
    {
        ProcessStartInfo startInfo = SystemProcess.Prepare(filename, arguments);

        using (Process process = Process.Start(startInfo)) {
            SystemProcess.output = process.StandardOutput.ReadToEnd();
            SystemProcess.error = process.StandardError.ReadToEnd();

            process.WaitForExit();
        }
    }

    public static void StartPrivileged (string filename, string arguments)
    {
        ProcessStartInfo startInfo;

        if (SystemProcess.password == default(string))
        {
            startInfo = SystemProcess.Prepare("gksudo", "-p true -D 'MyApplication'");

            using (Process process = Process.Start(startInfo)) {
                SystemProcess.password = process.StandardOutput.ReadToEnd();
                process.WaitForExit();
            }
        }

        startInfo = SystemProcess.Prepare("sudo", "-S " + filename + " " + arguments);

        using (Process process = Process.Start(startInfo)) {
            process.StandardInput.WriteLine(SystemProcess.password);
            SystemProcess.output = process.StandardOutput.ReadToEnd();
            SystemProcess.error = process.StandardError.ReadToEnd();

            process.WaitForExit();
        }
    }

    private static ProcessStartInfo Prepare (string filename, string arguments)
    {
        ProcessStartInfo startInfo = new ProcessStartInfo (filename, arguments);

        startInfo.RedirectStandardError = true;
        startInfo.RedirectStandardOutput = true;
        startInfo.RedirectStandardInput = true;
        startInfo.UseShellExecute = false;

        return startInfo;
    }

    public static string Output {
        get {
            return SystemProcess.output;
        }
    }

    public static string Error {
        get {
            return SystemProcess.error;
        }
    }
} 
```

# django - 如何从 Django 表单中的 ChoiceField 中获取选定的选项？

> ID：15656510
> 
> 赞同：1
> 
> 时间：2013-03-27T10:22:53.417
> 
> 标签：django, forms, choicefield

我正在处理 Django 中的表单，我有一个包含大陆列表的选择字段，我需要处理选定的选项，这是来自我的数据库的 Select 请求：

```
def Select_continent():
    db = MySQLdb.connect("localhost", "root", "aqw", "PFE_Project")
    cursor = db.cursor()
    sql = "SELECT Continent FROM myform_servercomponents"

    try:
        cursor.execute(sql)
        results = cursor.fetchall()
        continents = []
        i=0
        for row in results:
            continents[i]=row[0]
            i+=1
    except:
        print "Error: unable to fetch data"
    db.close()
    return continents 
```

这是我的表格

```
def continents():
    data = Select_continent()
    i=0
    continents=[]
    for key,value in data:
        continents.append(('i',value))
        i +=1  
    return continents 

class FilterForm(forms.Form):
    Continent = forms.ChoiceField(choices=continents()) 
```

所以问题是我如何在我的视图中使用选定的选项

```
def affiche_all(request, currency):
    if request.method == 'POST':                                                                                                                                                 
        form = FilterForm(request.POST)                                                                                                                                            
        if form.is_valid() : 
            Continent = form.cleaned_data['Continent']
    # here i need to send the selected choice to another view 
    # like this :
    # continent == 'Europe'
    #url = reverse('affiche_all', args=(),   kwargs={'continent': continent})
    #return HttpResponseRedirect(url) 
```

任何想法 ？？？

# hover - 如何在悬停时显示 Richfaces commandButton

> ID：15656512
> 
> 赞同：0
> 
> 时间：2013-03-27T10:22:57.097
> 
> 标签：hover, richfaces, visibility, commandbutton

当我悬停外部 div 时，是否有一种简单的方法来显示命令按钮？

```
<h:panelGroup layout="block" styleClass="galleryPreview">
      <a4j:commandButton value="Start from here" styleClass="commandButton"
      action="#{skinningBean.setCurrentSkinAndForwardToEditor(skin, false)}" />
</h:panelGroup> 
```

所以我想我必须首先隐藏我的按钮，比如`visibility: hidden;`

是否可以将我的 div 中的所有元素设置为悬停时可见？

就像是

```
.galleryPreview:hover {
    border: 1.5px solid #6bba29;
    visibility: visible;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:25:29.043

我只需要将 commandButton 的类设置为可见，而不是外部 div

```
.galleryPreview:hover .commandButton{
    visibility: visible;
} 
```

# c - 从 CGI C 模块返回 http 错误代码

> ID：15656514
> 
> 赞同：1
> 
> 时间：2013-03-27T10:22:59.177
> 
> 标签：c, http, module, cgi

我有一个用 C & 编写的 CGI 模块，在某些情况下我想从这个模块返回 HTTP 错误 400。问题是 - 我不知道如何从模块返回 HTTP 错误。

看起来像我模块中的'return(-1)'，返回 500 内部服务器错误。我试过退还 400 等，但有条不紊。我什至试过 "printf("Status:400");" 在返回 -1 之前（如此处所建议：[如何从 C++ CGI 程序返回 500 HTTP 状态](https://stackoverflow.com/questions/1318507/how-to-return-a-500-http-status-from-a-c-cgi-program) ），但这不起作用。

对此的任何建议将不胜感激。

编辑：[已解决] 我能够从 python 模块（稍后由这个 C CGI 模块调用）返回 HTTP 错误代码。所以没有尝试下面评论中提到的建议。不过，感谢您提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T19:36:20.340

要将 HTTP 错误 400 返回给 HTTP 客户端，您必须将 HTTP 状态行写入标准输出，如下所示：

```
printf("Status: 400 Bad Request\n"); 
```

参考：[https ://www.rfc-editor.org/rfc/rfc3875](https://www.rfc-editor.org/rfc/rfc3875)

Status 标头字段包含一个 3 位整数结果代码，指示脚本尝试处理请求的成功级别。

```
 Status         = "Status:" status-code SP reason-phrase NL
  status-code    = "200" | "302" | "400" | "501" | extension-code
  extension-code = 3digit
  reason-phrase  = *TEXT 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-17T02:45:56.183

要从 CGI 脚本返回 HTTP 错误代码，您必须将其写入`stdout`，例如：

```
#include <stdio.h>

int main()
{
    printf("status: 400\n\n");

    return 0;
} 
```

只是`status: status-code\n\n`必要的。

# eclipse-rcp - 如何基于透视隐藏来自第三方插件的工具栏贡献

> ID：15656515
> 
> 赞同：0
> 
> 时间：2013-03-27T10:22:59.927
> 
> 标签：eclipse-rcp

我在我的 rcp 应用程序中使用了第三方插件，它为我的应用程序添加了一些 UI 贡献。基本上，它为我提供了一个 UI 编辑功能，比如我们以单独的视角展示的图形。它还添加了一些工具栏和菜单栏的贡献。

我的问题是我们可以根据活动视角隐藏第三方插件的工具栏贡献吗？这意味着假设我有两个视角，我希望只有一个视角会显示来自这个第三方插件的工具栏贡献，而不是另一个。

感谢您提前为您提供帮助。

# mongodb - MongoDB：是否有任何特定的大小分配给 MongoDB 集合？

> ID：15656518
> 
> 赞同：0
> 
> 时间：2013-03-27T10:23:12.383
> 
> 标签：mongodb

我们正在为我们的应用程序使用 Mongo DB。

我有一个关于 Mongo Database Stores records in a collection 的问题。

目前，我们的 Mongo DB 中有 7 个集合。

请让我知道，是否有分配给每个集合的特定大小？如果有更多记录被插入，是否有任何情况下会超过这个集合大小？

目前我们没有使用任何封顶集合。

请让我知道，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:32:06.797

不，您的限制是您的服务器（或分片）的磁盘空间 每个数据库或集合大小没有限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:40:45.913

您对插入的 BSON 文档的大小有限制。目前每个文档为 16 MB。以下链接为您提供了一些其他限制。

[http://docs.mongodb.org/manual/reference/limits/](http://docs.mongodb.org/manual/reference/limits/)

# java - 文章中externilzable的区别

> ID：15656525
> 
> 赞同：1
> 
> 时间：2013-03-27T10:23:26.717
> 
> 标签：java, serialization

我在一篇文章中经历了序列化和可外部化的概念，我发现了这个......” **Java 中的内部类无法实现可外部化接口，因为 Java 中内部类的所有构造函数都将始终接受封闭的实例class 作为前置参数，因此内部类不能有无参数构造函数。内部类可以通过仅实现 Serializable 接口来实现对象序列化。** "

请告知以上行的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:03:53.577

实现 Externalizable 接口的类的规则之一是：

> ***“该类必须有一个公共的无参数构造函数”***

当您创建包含内部类的类并对其进行编译时，`javac`本质上会为内部类创建一个参数构造函数，其中包含对内部类文件中封闭类的引用`.class`，无论您是否在内部类中创建了非参数构造函数。例如考虑下面给出的代码：

```
import java.io.*;
class ExternalizationDemo
{
    public ExternalizationDemo(){System.out.println("Calling external");}
    class MyClass implements Externalizable
    {
        int i = 90;
        public MyClass()
        { 
            System.out.println("MyClass Constructor");
            i = 299;
        }
        public void writeExternal(ObjectOutput out)throws IOException
        {
            System.out.println("Write external of MyClass");
        }
        public void readExternal(ObjectInput in)throws IOException,ClassNotFoundException
        {
            System.out.println("Read external of MyClass");
        }
    }
    public static void main(String[] args) throws Exception
    {
        ExternalizationDemo demo = new ExternalizationDemo();
        ExternalizationDemo.MyClass mc = demo.new MyClass();
        ObjectOutputStream ous = new ObjectOutputStream(new FileOutputStream("Inner.ser"));
        ous.writeObject(mc);
        ous.close();
        System.out.println("Write successfull");
        ObjectInputStream oins = new ObjectInputStream(new FileInputStream("Inner.ser"));
        mc = (ExternalizationDemo.MyClass)oins.readObject();//throws java.io.InvalidClassException at this line
        System.out.println("Read the object successfully");
    }
} 
```

对于上面的代码，`javac`创建`ExternalizationDemo$MyClass.class`来表示内部类`.class`文件。在使用反汇编代码时，`javap`我们得到以下指令集：

```
Compiled from "ExternalizationDemo.java"
class ExternalizationDemo$MyClass extends java.lang.Object implements java.io.Ex
ternalizable{
int i;

final ExternalizationDemo this$0;

public ExternalizationDemo$MyClass(ExternalizationDemo);
  Code:
   0:   aload_0
   1:   aload_1
   2:   putfield        #1; //Field this$0:LExternalizationDemo;
   5:   aload_0
   6:   invokespecial   #2; //Method java/lang/Object."<init>":()V
   9:   aload_0
   10:  bipush  90
   12:  putfield        #3; //Field i:I
   15:  getstatic       #4; //Field java/lang/System.out:Ljava/io/PrintStream;
   18:  ldc     #5; //String MyClass Constructor
   20:  invokevirtual   #6; //Method java/io/PrintStream.println:(Ljava/lang/Str
ing;)V
   23:  aload_0
   24:  sipush  299
   27:  putfield        #3; //Field i:I
   30:  return

public void writeExternal(java.io.ObjectOutput)   throws java.io.IOException;
  Code:
   0:   getstatic       #4; //Field java/lang/System.out:Ljava/io/PrintStream;
   3:   ldc     #7; //String Write external of MyClass
   5:   invokevirtual   #6; //Method java/io/PrintStream.println:(Ljava/lang/Str
ing;)V
   8:   return

public void readExternal(java.io.ObjectInput)   throws java.io.IOException, java
.lang.ClassNotFoundException;
  Code:
   0:   getstatic       #4; //Field java/lang/System.out:Ljava/io/PrintStream;
   3:   ldc     #8; //String Read external of MyClass
   5:   invokevirtual   #6; //Method java/io/PrintStream.println:(Ljava/lang/Str
ing;)V
   8:   return

} 
```

如上所示，在第 1 行。8 它包含一个作为参数`public ExternalizationDemo$MyClass(ExternalizationDemo);`的构造函数。`ExternalizationDemo`它没有包含内部类的无参数构造函数。因此，在尝试将对象转换为`ExternalizationDemo$MyClass`at 行时读取内部类的对象后`mc = (ExternalizationDemo.MyClass)oins.readObject();`， `JIT`找不到嵌套类的非参数构造函数。因此，在抛出以下异常后，对象的读取被中止：

```
Exception in thread "main" java.io.InvalidClassException: ExternalizationDemo$MyClass; ExternalizationDemo$MyClass; no valid constructor 
```

我希望这能澄清为什么内部类不能实现`Externalizable`接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:55:29.263

内部类构造函数有一个隐式的第一个参数 - 对其封闭类的引用，它是不可见的，它是由 javac 添加的。如果你反编译一个内部类字节码，你可以看到它。因此，Externalizable 所需的内部类中不能有无参数构造函数。不会有编译错误。您甚至可以使用 writeObject 编写 Externalizable 内部类的实例。但是，一旦您尝试使用 readObject 阅读它，您就会得到类似

```
 java.io.InvalidClassException: Test1$Test2; no valid constructor 
```

# java - 是否可以在 Android 运行时执行 Java 代码字符串？

> ID：15656530
> 
> 赞同：10
> 
> 时间：2013-03-27T10:23:39.867
> 
> 标签：java, android, eval, execution

我想从用户那里获取一行 Java 代码并在 Android 中执行它。例如：

```
String strExecutable = " int var; var = 4 + 3"
Object obj = aLibrary.eval(strExecutable); 
```

它不是 java 脚本，我想运行 java 代码。

可能吗？如果是怎么办？

我研究过这样的[链接](https://stackoverflow.com/questions/7143343/is-there-a-java-equivalent-of-the-python-eval-function)。但它们是关于 JVM 而不是 Android Dalvik 的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-08T19:43:38.033

你可以试试[豆壳](http://www.beanshell.org/)！它非常简单，也适用于 android。只需使用 jar 库构建您的应用程序。

```
import bsh.Interpreter;
private void runString(String code){    
    Interpreter interpreter = new Interpreter();
    try {
         interpreter.set("context", this);//set any variable, you can refer to it directly from string
         interpreter.eval(code);//execute code
    }
    catch (Exception e){//handle exception
        e.printStackTrace();
    }
} 
```

> 但小心点！在生产应用程序中使用它可能存在安全风险，尤其是当您的应用程序与用户数据/文件交互时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T20:18:00.353

You can try something like this:

```
// Code Execute, Khaled A Khunaifer, 27 March 2013
class CodeExcute
{
    public static void execute (String[] commands, String[] headers)
    {
        // build commands into new java file
        try
        {
            FileWriter fstream = new FileWriter("Example.java");
            BufferedWriter out = new BufferedWriter(fstream);

            out.write("");

            for (String header : headers) out.append(header);

            out.append("class Example { public static void main(String args[]) { ");

            for (String cmd : commands) out.append(cmd);

            out.append(" } }");

            out.close();
        }
        catch (Exception e)
        {
            System.err.println("Error: " + e.getMessage());
        }

        // set path, compile, & run
        try
        {
            Process tr = Runtime.getRuntime().exec(
               new String[]{ "java -cp .",
                  "javac Example.java",
                  "java Example" } );
        }
        catch (Exception e)
        {
            System.err.println("Error: " + e.getMessage());
        }

    }
} 
```

# google-closure-compiler - 对象的导出属性

> ID：15656532
> 
> 赞同：0
> 
> 时间：2013-03-27T10:23:57.333
> 
> 标签：google-closure-compiler, google-closure

如何导出对象的方法以在 HTML 页面中进行外部调用。

JavaScript 代码：

```
my.namespace.FeedbackController = Class.create();
Object.extend(my.namespace.FeedbackController.prototype, {
 initialize:function(fid, fitem){
  this.fid = fid,
  this.feedback_item = fitem;
 },
 link_click : function(fstate) {
  alert(fstate);
 }
});
goog.exportSymbol('my.namespace.FeedbackController', my.namespace.FeedbackController);
goog.exportProperty(my.namespace.FeedbackController, 'link_click', my.namespace.FeedbackController.link_click); 
```

在页面上，人们提供了多个反馈项目。HTML 代码：

```
<script type="text/javascript">
  feedback_handlers = new Array();
  feedback_handlers[16] = new my.namespace.FeedbackController(16, 'useful');
</script>
<a href="javascript:feedback_handlers['16'].link_click('useful');">Useful</a> 
```

当我单击“有用”链接时，我得到 TypeError: feedback_handlers['16'].link_click is not a function。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:52:48.233

`link_click`是一种原型方法。

尝试：

```
goog.exportProperty(my.namespace.FeedbackController.prototype, 'link_click', my.namespace.FeedbackController.prototype.link_click); 
```

请参阅 [https://code.google.com/p/closure-library/source/browse/closure/goog/base.js#1538](https://code.google.com/p/closure-library/source/browse/closure/goog/base.js#1538)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:38:28.653

`Object.extend`Closure-compiler 无法识别扩展函数原型的方式。您需要使用直接原型分配：

```
my.namespace.FeedbackController.prototype.initialize = function() ... 
```

如果您使用详细警告进行编译，您应该会收到有关未定义属性的警告。

# css - css选择器没有选择

> ID：15656536
> 
> 赞同：0
> 
> 时间：2013-03-27T10:24:01.387
> 
> 标签：css, css-selectors

我正在尝试选择所有段落，然后是一些锚点。我使用的方式不起作用

```
p < a { border: solid 1px red; } 
```

html

```
<p><a href="#">Link1</a></p>
<p><a href="#">Link1</a></p>
<p>empty para without link</p> 
```

[jsfiddle](http://jsfiddle.net/vGR8D/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:25:58.623

> 我正在尝试选择所有段落，然后是一些锚点。

你不能那样做。CSS 中没有父选择器。所以你不能通过它的内容来选择元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:27:36.777

你可以做错：

不是

`p < a`

只要

`p > a`

# knockout.js - Kendo-Knockout：将“选定”视图模型属性与网格绑定

> ID：15656545
> 
> 赞同：2
> 
> 时间：2013-03-27T10:24:21.133
> 
> 标签：knockout.js, kendo-ui, kendo-grid

我使用 RPNiemeyer 的 kendo-knockout 库将我的视图模型与我的 KendoUI 网格绑定。我想做的是订阅网格的更改事件，这样我就可以更新相应的视图模型项。

我将 observableArray 与如下所示的对象绑定：

```
{
  Address: "Street name"
  ClientNumber: 1337
  NamePartner: "Client name"
  Selected: false
} 
```

现在，我希望在选择相应行时将 Selected 属性设置为 true（KendoUI 网格的更改事件）。为此，我认为我应该使用 Knockoutjs 自定义绑定处理程序。

我发现了这个[http://jsfiddle.net/D3rSk/155/](http://jsfiddle.net/D3rSk/155/)，它在做同样的事情。唯一的问题是这个例子在我的控制台中给出了一些错误，它还绑定了一个单独的'selectedItem' observable，而我想将它绑定到我的 observableArray 中的属性。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T12:45:47.167

做你想做的事情并不是完全无缝的，但你可以这样做：

*   `change`为事件添加处理程序
*   `select`使用网格的方法获取选定的行元素
*   从行元素使用网格的`dataItem`方法获取数据项
*   此 dataItem 是一个干净的对象，因此请获取其唯一键（在您的情况下为 ClientNumber）并使用它在您的 observableArray 中查找原始项目。

就像是：

```
<div id="grid" data-bind="kendoGrid: { data: items, sortable: true, selectable: true, change: updateSelected, columns: ['Address', 'ClientNumber', 'NamePartner'], widget: grid }"></div> 
```

使用`updateSelected`视图模型上的方法，例如：

```
updateSelected: function() {
    var grid = viewModel.grid(),
        row = grid.select(),
        clientNumber = grid.dataItem(row).ClientNumber,
        actualItem = ko.utils.arrayFirst(viewModel.items(), function(item) {
           return item.ClientNumber === clientNumber;
        });

    if (actualItem) {
        actualItem.Selected = true;

        if (viewModel.previouslySelected) {
            viewModel.previouslySelected.Selected = false;   
        }

        viewModel.previouslySelected = actualItem;
    }            

    return true;
} 
```

示例：http: [//jsfiddle.net/rniemeyer/7MXfj/](http://jsfiddle.net/rniemeyer/7MXfj/)

您可以考虑尝试将此逻辑移动到将添加到绑定旁边的自定义绑定中`kendoGrid`。

# string - 如何使用本地化字符串格式化字符串？

> ID：15656546
> 
> 赞同：1
> 
> 时间：2013-03-27T10:24:26.350
> 
> 标签：string, xaml, binding, formatting, windows-phone-8

我想绑定一个值并使用本地化字符串对其进行格式化。类似的东西：

```
<TextBlock Text="{Binding Age, StringFormat='\{0\} {Binding Path=LocalizedResources.Global_AgeSuffix, Source={StaticResource LocalizedStrings}}'}" /> 
```

输出 ：

*   30 仿佛法国文化
*   如果其他文化30年

可能吗 ？

问候，

弗洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:52:26.783

不幸的是，您不能在 Windows Phone 上以这种方式格式化绑定文本。

有两种选择。

1.  将另一个属性添加到已应用格式的绑定对象
2.  使用转换器应用格式。

# macos - Mac 10.8 bash_profile 工作很奇怪

> ID：15656553
> 
> 赞同：0
> 
> 时间：2013-03-27T10:24:42.077
> 
> 标签：macos, export

我遵循一些“在 mac 上设置 cocos2dx 和 android”教程。当我开始设置 .bash_profile 时，我被要求创建 .bash_profile 并编辑：

```
export COCOS2DX_ROOT=~/Documents/Cocos2dx/cocos2d-2.1rc0-x-2.1.2
export ANDROID_SDK_ROOT=/Users/Documents/Android/adt-bundle-mac-x86_64-20130219/sdk
export ANDROID_NDK_ROOT=/Users/Documents/Android/android-ndk-r8e
export NDK_ROOT=/Users/Documents/Android/android-ndk-r8e
export PATH=${PATH}:${ANDROID_NDK_ROOT}
export PATH=${PATH}:${ANDROID_SDK_ROOT} 
```

重启终端后：

```
echo $COCOS2DX_ROOT
export/AS/Documents/Cocos2dx/cocos2d-2.1rc0-x-2.1.2
cd $COCOS2DX_ROOT
export: No such file or directorycos2dx/cocos2d-2.1rc0-x-2.1.2 
```

我不知道“出口”是如何进入这条道路的。我试过“~/...”和“/User/...”（完整路径）。但是一切都会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:16:15.230

不知何故，这些行被错误地输入了`.bash_profile`- 看起来换行符可能以某种方式被删除了。再次编辑您的`.bash_profile`并确保它看起来像您在上面发布的内容。保存并重新启动您的终端会话，您应该没问题。

# perl - Perl 中 $map{$string} 和 $map->{$string} 的区别

> ID：15656555
> 
> 赞同：2
> 
> 时间：2013-03-27T10:24:59.610
> 
> 标签：perl, hash, map

我在 Perl 中有一个映射结构，我是从某个实用程序中获得的。其中的转储如下所示：

```
$VAR1 = {
  'A0' => 'me_one',
  'A2' => 'me_two',
  'A6' => 'me_six'
} 
```

我想搜索地图中是否存在特定键。假设我想知道是否`A4`在地图中。

现在，如果我使用`if (exists $map{'A4'})`，我会在构建过程中遇到错误，在`$map{`.

如果我使用`if (exists $map->{'A4'})`，我不会出错，并且会得到想要的结果。然而，我在互联网上搜索的任何地方，为了检查一个键是否存在于地图中，Perl 中的语法是`if (exists $map{key})`

现在我的推断是，我从实用程序中得到的不是地图，尽管在我看来仍然像转储中的地图。有人知道发生了什么吗？谢谢你。

**编辑：**感谢@raina77ow 的回答。添加此内容以进一步解释他的解释。

```
my %map;
print $map{key};
my $map_ref = \%map; # The reference was what the utility was returning
print $map_ref->{key}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:27:39.103

*当您处理hash*`$map{key}`的特定元素时使用该行。例如： *`%map`*

 *```
my %map = (
  a => 'a',
  b => 'b'
);
print $map{a}; # 'a' 
```

*当您处理hashref*`$map->{key}`的特定元素时使用该行。运算符专门用于“尊重”引用。 *`$map``->`*

 *```
my $map_ref = {
  a => 'a',
  b => 'b'
};
print $map_ref->{a}; # 'a' 
```

请注意，在第一种情况下使用常规括号，在第二种情况下使用大括号（定义所谓的`anonymous hash`）。**

# perl - Windows 的 nginx + perl 设置指南

> ID：15656561
> 
> 赞同：2
> 
> 时间：2013-03-27T10:25:19.887
> 
> 标签：perl, windows-7, nginx, cgi, fastcgi

我正在寻找指南、教程或建议，让 nginx 网络服务器在配置有 localhost 站点的 Windows 上运行，该站点可以运行 perl 脚本。

我知道如何用 Apache 来做，所以请不要回答这个问题。已经有了一个运行 IIS 的 Apache 2.4，正确配置你运行 perl-cgi 脚本。我正在寻找 nginx 解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T20:57:54.303

历史上的答案是从 nginx 端设置到 apache 的代理。我个人更喜欢基于 FCGI 的解决方案

# javascript - 启动图像和预加载器

> ID：15656562
> 
> 赞同：0
> 
> 时间：2013-03-27T10:25:24.480
> 
> 标签：javascript, iphone, html, ios

我正在开发一个可从 PC 和 IOS 访问的应用程序/网站。当我从 PC 和 IOS 使用导航器继续应用程序时，我可以看到预加载器，但是当我在 ios 上添加类似应用程序的网站时，会有一个启动图像。但是启动图像隐藏了预加载器，当启动图像加载所有信息时我可以看到它。但我不希望启动图像加载所有信息，我想查看预加载器加载。如何无法删除启动图像。或者我如何确保看到我添加的预加载器。感谢您的关注。

PS对不起我的英语><

# iis - 通过 wix 安装程序在 IIS 管理器上编辑文件

> ID：15656564
> 
> 赞同：1
> 
> 时间：2013-03-27T10:25:26.853
> 
> 标签：iis, installation, wix

我的要求是编辑 IIS 管理器中已经存在的 .xap 文件。在 IIS 管理器上安装另一个 Web 应用程序时。（我想在之前的 Web 应用程序 .xap 文件中添加一个 Web 应用程序的端点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:52:17.900

您可以编写自定义操作：

1.  打开 .xap 文件（它是一个名称不同的 .zip 文件）
2.  提取需要修改的文件
3.  编辑提取的文件
4.  将提取的文件重新压缩回 .xap 文件。

您可以使用某种 AppSearch 找到现有的 .xap 文件。也许是一个`FileSearch`元素。不过，大部分工作都将在您的自定义操作中进行。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:19:53.983

请在以下位置查看 Mike 的回答：

[NSIS 更改 XAP 文件中存在的配置文件，即 silverlight 组件构建](https://stackoverflow.com/questions/14961017/nsis-changing-config-file-present-in-xap-file-i-e-silverlight-component-build/14966964#14966964)

这里有两个部分：

1) 创作 Silverlight 应用程序以使用外部配置文件。

2）创作您的安装程序以更新该配置文件。在 WiX 的这种情况下，它是 Util 扩展中的 XmlConfig 元素。

这样做的原因是有一个高度可靠的安装程序。如果您编写自定义操作来提取、编辑和压缩 XAP，您将使数字签名无效，并为您的部署过程带来复杂性和脆弱性。避免做这一切而只使用 XmlConfig 为您提供了一个健壮的声明式安装，它完全支持 Windows Installer 回滚故事。

# ios - 如何将 3d 模型加载到 IOS 应用程序，并缩放/转换/旋转它以放置在图像上？

> ID：15656566
> 
> 赞同：1
> 
> 时间：2013-03-27T10:25:29.123
> 
> 标签：ios, 3d, glkit

我应该加载一个 3d 模型（比方说冰箱）并缩放或旋转它以定位在厨房照片上（仅作为示例）。

我见过几个 SDK，但都是用于 3d 游戏的。我需要的是在本地 IOS 应用程序中放置和使用我的对象。

我应该从哪里开始？GLKit 就是这个问题的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:47:48.653

iOS 3d 渲染是由 OpenGL ES 制作的，这是一个相当困难的话题。Apple 提供 GLKit 来帮助开发人员集成 OpenGL ES，但都不是模型解析器或场景管理器，无论如何都很难。我可以建议你使用 3d 引擎，我看了两个引擎：
1-Nineveh GL
2-Irrlicht
第一个在 iOS 项目中集成得非常好，并公开了客观的 c API。它仅使用 OpenGL 2.0 着色器。问题是这是一个测试版。
后者是用 C++ 编写的，支持 1.0 和 2.0，但很难集成。

# java - 自定义列表视图 Android 捕获异常

> ID：15656570
> 
> 赞同：0
> 
> 时间：2013-03-27T10:25:40.370
> 
> 标签：java, android, android-intent, nullpointerexception

参考 [本](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/) 教程，

我正在努力从网址获取缩略图。定制的ListView 类：

```
public class CustomizedListView extends Activity

{
// All static variables
static final String URL = "http://173.193.24.66/~kanz/video/XML/9.xml";
// XML node keyse.
static final String KEY_SONG = "item"; // parent node
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "description";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "image";
ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap <String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Context context = getApplicationContext();
             Intent in = new Intent(context, SingleMenuItemActivity.class);
             in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);                
             context.startActivity(in);

        }
    });
} 
```

}

我的适配器

```
public class LazyAdapter extends BaseAdapter {
private Activity activity;
private ArrayList <HashMap<String, String>> data;    
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
    TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    title.setText(song.get(CustomizedListView.KEY_TITLE));
    artist.setText(song.get(CustomizedListView.KEY_ARTIST));
    duration.setText(song.get(CustomizedListView.KEY_DURATION));
    imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
    return vi;
} 
```

}

而 logcat 给出了 Nullpointer 异常。

```
03-27 19:16:29.321: E/AndroidRuntime(1516): FATAL EXCEPTION: main
03-27 19:16:29.321: E/AndroidRuntime(1516): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.razatubevidurl/com.example.razatubevidurl.CustomizedListView}: java.lang.NullPointerException
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.os.Looper.loop(Looper.java:137)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at dalvik.system.NativeStart.main(Native Method)
03-27 19:16:29.321: E/AndroidRuntime(1516): Caused by: java.lang.NullPointerException
03-27 19:16:29.321: E/AndroidRuntime(1516):     at com.example.razatubevidurl.CustomizedListView.onCreate(CustomizedListView.java:49)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.Activity.performCreate(Activity.java:5104)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-27 19:16:29.321: E/AndroidRuntime(1516):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-27 19:16:29.321: E/AndroidRuntime(1516):     ... 11 more 
```

请帮我解决我做错了什么。logcat 给出了这个异常，在模拟器上我收到一条警告说“不幸的是，myApp 已停止”任何帮助将不胜感激。谢谢。PS：我已经提到了 Manifest 中的所有活动，并且也拥有所有权限。

编辑：这是我的 XML：

```
<playlist><title>![CDATA[New Playlist]]</title>
<items>
<item>
<title>HAMD(LA ILAHA ILLALLAH)</title>
<description>Recited By :Alhaaj Muhammad Owais Raza Qadri -- Written By: Mufti-e-Azam Hind Molana Mustafa Raza Khan Noori</description>
<image>http://173.193.24.66/~kanz/video/Images/9.jpg</image>

<startFromThis>true</startFromThis>
<duration>510</duration>
<source>http://173.193.24.66/~kanz/video/flv/9.flv</source>
<sourceAlt>http://173.193.24.66/~kanz/video/mp4/9.mp4</sourceAlt>    

<sourceType>direct</sourceType>
</item>
</items>
</playlist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:09:04.727

你有`<ListView/>`内部布局文件吗？

它可能没有找到 id 的元素`list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:10:45.387

我通过使用编辑的方法 getDomElement （在 XMLParser 类中）解决了这个问题，如下所示：

```
 public Document getDomElement(String xml){
 Document doc = null;
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
 try {

        DocumentBuilder db = dbf.newDocumentBuilder();

    //    InputSource is = new InputSource();
      //      is.setCharacterStream(new StringReader(xml));
            doc = db.parse("http://x.x.x.x/~kanz/video/XML/9.xml"); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
} 
```

我不知道为什么，但在注释掉之后

```
InputSource is = new InputSource();
is.setCharacterStream(new StringReader(xml)); 
```

并直接传递 URL 来`db.parse`解决我的问题。希望它也对其他人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:33:22.177

两个原因

*   您是否将清单中的活动声明为：

`<activity android:name="com.example.razatubevidurl.CustomizedListView"/>`

*   如果不是上述原因，那么您可以检查 Activity 类的名称，一定有一些错字。

# html - Html 布局 - 代码中的第一个元素，但页面上的最后一个元素

> ID：15656571
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:25:43.483
> 
> 标签：html, css, layout

我有下一个 html 代码（[jsFiddle](http://jsfiddle.net/CyRYD/)）：

```
<div class="content">
    <div class="first-block">
        Mauris at tortor vel nulla rutrum porta. Etiam non ...
    </div>
    <div class="second-block">
        Suspendisse suscipit tortor eu nulla interdum ...
    </div>
</div> 
```

CSS是否可以`first-block`在之后出现在页面上`second-block`？仅在视觉上，而 html 布局保持不变。这是某种搜索引擎优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:27:57.567

如果您使用绝对位置，这是可能的。但是您必须具有预定义的高度才能不破坏您的布局

```
.content {
    width: 400px;
    height:200px;
    margin: 0 auto;
    position:relative;
}

.first-block {
    background: coral;
    position:absolute;
    bottom:0;
}

.second-block {
    background: #DEDEDE;
    position:absolute;
    top:0;
} 
```

这是[jsFiddle 演示](http://jsfiddle.net/CyRYD/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:56:43.560

This is possible by using `float` and the `margin` properties.

I simply floated your two `divs` to either side, and of course `clear:both` in the middle to stop them overlapping. Once done, I used `margin-top` with both positive and negative values to position the `divs` as if the first is below the second, when in fact the first is above the second in the code.

**CSS**

```
.content {
    width: 400px;
    margin: 0 auto;
}

.first-block {
    background: coral;
    margin-top:300px;
    float:left;
}

.second-block {
    background: #DEDEDE;
    margin-top:-300px;
    float:right;
} 
```

**HTML**

```
<div class="content">
    <div class="first-block">
        Mauris at tortor vel nulla rutrum porta. Etiam non condimentum velit. Phasellus turpis magna, sagittis at porta et, tincidunt id magna. Maecenas hendrerit suscipit massa, at consectetur magna tempor et. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In hac habitasse platea dictumst. Etiam accumsan.
    </div>
    <div style="clear:both;"></div>
    <div class="second-block">
        Suspendisse suscipit tortor eu nulla interdum sit amet ultricies ante imperdiet. Donec varius adipiscing lectus in suscipit. Nunc risus arcu, luctus nec tempor porttitor, sodales eget lectus. Vestibulum imperdiet massa in ligula pellentesque eget egestas dui facilisis. Nunc commodo lacus at nibh tristique sodales
    </div>
</div> 
```

**[Heres a fiddle demo for you!](http://jsfiddle.net/CyRYD/4/)**

# symfony - 将 Symfony2 与 Salesforce PHP 工具包一起使用

> ID：15656575
> 
> 赞同：0
> 
> 时间：2013-03-27T10:25:45.667
> 
> 标签：symfony, salesforce

我想在 Symfony2中使用 Salesforce php 工具包（ [https://github.com/developerforce/Force.com-Toolkit-for-PHP ）。](https://github.com/developerforce/Force.com-Toolkit-for-PHP)有没有人有这样做的经验？

最好的路线是什么？捆绑、实体或服务？

如果我只是命名我的初始 Salesforce.php，它将提供到 Salesforce 的连接并将工具包 require_once 文件留给它的其他类。然后，我想，我编写的任何包都可以使用这个命名空间并在我的整个应用程序中直接使用这个连接？

对不起，这有点含糊，任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:29:22.917

我还没有测试，但你可以看看[https://github.com/phpforce/salesforce-bundle](https://github.com/phpforce/salesforce-bundle)

# knockout.js - 访问自定义敲除绑定的值

> ID：15656577
> 
> 赞同：0
> 
> 时间：2013-03-27T10:25:52.747
> 
> 标签：knockout.js

我有一个自定义的淘汰赛绑定，例如：

```
ko.bindingHandlers.yourBindingName = {
    init: function(element, valueAccessor, allBindingsAccessor,
                   viewModel, bindingContext)
    {
        // how to access the value-part of the data-bind="name:value" attribute?
    },
}; 
```

和：

```
<div data-bind="yourBindingName: someValue"> </div> 
```

是否可以从 -function 访问 data-bind 属性的值部分（即上例中的“someValue”）`init`？

* * *

**更新：**只是为了澄清我的意思：

*   的数据绑定属性`div`具有名称和值部分，用冒号分隔，例如“yourBindingName: someValue”
*   name-part 指定调用哪个绑定
*   我想访问绑定中的值部分并将其用作参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:36:30.433

我不知道你为什么**要这样做**，但你去：

```
ko.bindingHandlers.reflector = {
    init: function(element, valueAccessor, allBindingsAccessor,
                   viewModel, bindingContext)
    {
        var reflected;
        var binding = valueAccessor();
        for (var prop in viewModel) {
            if (viewModel[prop] == binding) {
                reflected = prop;
                break;
            }
        }
        ko.bindingHandlers.text.update(element, function(){ return reflected});
    },
}; 
```

在[小提琴中](http://jsfiddle.net/tyrsius/J4ZvE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:28:43.237

如果我理解正确，那么发送到自定义绑定处理程序的数据是 valueAccessor，作为可观察的。因此，如果您想要该值，请执行以下操作：

```
var value = valueAccessor(); 
```

# c++ - MPI探针的正确使用

> ID：15656582
> 
> 赞同：1
> 
> 时间：2013-03-27T10:26:06.203
> 
> 标签：c++, mpi

我需要在处理器之间传输一个可变长度的向量。更具体地说，一个处理器监听其他几个处理器的发送。这就是我认为就足够了：

```
// receiving processor (rank 0):
MPI::Status status;
MPI::COMM_WORLD.Probe(MPI::ANY_SOURCE, my_tag, status);
const auto sender = status.Get_source();
const auto n_bytes = status.Get_count(MPI::BYTE);
std::cerr << n_bytes << std::endl;
auto row = std::vector<size_t>(n_bytes / sizeof(size_t));
MPI::COMM_WORLD.Recv(&row.front(), n_bytes, MPI::BYTE, sender, my_tag);

// sending processor:
const size_t n = 10; // example value
auto row = std::vector<size_t>(n, 0);
const auto n_bytes = n * sizeof(size_t);
MPI::COMM_WORLD.Send(&row.front(), n_bytes, MPI::BYTE, 0, my_tag); 
```

但是，接收处理器报告`n_bytes == 0`. 使用是否`Probe / Recv`正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:00:39.473

问题中显示的代码根本没有错。然而，生产代码在一个关键方面有所不同（我愚蠢地认为这与问题无关）。

错误出现在以下代码中（发件人保持不变）：

```
// receiving processor (rank 0):
MPI::Status status;
MPI::COMM_WORLD.Probe(MPI::ANY_SOURCE, my_tag, status);
const auto sender = status.Get_source();
const auto n_bytes = status.Get_count(MPI::BYTE);
if ( n_bytes == 0 )
{
   std::cerr << "nothing transmitted\n";
   return; // BAD
}
auto row = std::vector<size_t>(n_bytes / sizeof(size_t));
MPI::COMM_WORLD.Recv(&row.front(), n_bytes, MPI::BYTE, sender, my_tag); 
```

*错误是在没有*收到的情况下探测后从方法返回。即使是空传输也必须消耗。否则，下一次对探测的调用将获得完全相同传输的状态。

它可以通过`MPI::COMM_WORLD.Recv(NULL, 0, MPI::BYTE, sender, my_tag);`在返回之前调用来修复。

# c# - c# Windows 8：组合框选中项

> ID：15656588
> 
> 赞同：0
> 
> 时间：2013-03-27T10:26:29.877
> 
> 标签：c#, combobox, selecteditem

我有一个包含不同电影名称的组合框。（例如 Skyfall）当我在 ComboBox 中选择“Skyfall”时，我想将我的图像更改为电影的徽标 (Images/Skyfall.png) 该徽标始终与电影的标题同名 + .png 如何我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:33:48.507

使用`ComboBox_SelectedIndexChanged`事件。设置一个带有名称的图像路径数组，`ImagePathArray`并将所有路径作为字符串存储在其中。在`ComboBox_SelectedIndexChanged`改变你的`picturebox.BackgroundImage = System.Drawing.Bitmap.FromFile(ImagePathArray[ComboBox.SelectedIndex]);`

# regex - 如何使用 Perl 提取行的一部分？

> ID：15656594
> 
> 赞同：-2
> 
> 时间：2013-03-27T10:26:44.397
> 
> 标签：regex, perl, extraction

我在下面描述的 Perl 中有一个小问题：我有一个这样的文件：

> **你好朋友**->你好（0.2）
> 
> **你好朋友**->你好我的朋友（0.2）

我想只提取箭头“->”之前的短语，这意味着： **你好朋友**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:40:56.417

```
my ($pre, $post) = split /\s*->\s*/, $line; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:42:11.337

单程：

```
perl -F'->' -alne '/->/ and print $F[0];' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:34:42.540

试试这样的事情：

```
 my $line = "hello friends -> Hello (0.2)";
    if ($line =~ m/([\w\W]+)->([\W\w]+)/) {
        my $property=$1;
        my $value=$2;

        # stuff here
        print STDOUT "property = $property\n";
        print STDOUT "value = $value\n";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:43:57.183

awk 模式下的 Perl

```
$ perl -F'-' -lane 'print $F[0]' input
hello friends 

hello friends 
```

# bash - wget保持会话等价卷曲

> ID：15656595
> 
> 赞同：5
> 
> 时间：2013-03-27T10:26:48.517
> 
> 标签：bash, curl, wget

我正在创建一个脚本，它也应该在 MAC 中工作，我想知道使用 curl 命令的以下命令行的等价性：

```
wget --keep-session-cookies --load-cookies=cookies.txt --referer=website.com http://website.com/folder/$count 
```

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T12:02:28.707

尝试这个：

```
curl -b cookies.txt -c cookies.txt -e website.com http://website.com/folder/$count 
```

# resharper - ReSharper 中有查找和替换功能吗？

> ID：15656597
> 
> 赞同：3
> 
> 时间：2013-03-27T10:26:54.533
> 
> 标签：resharper, replace

我刚刚为我的应用程序实现了一个自定义 MessageBox。我现在想用我的自定义实现替换对 MessageBox.Show() 的任何调用，即 MsgBox.Show()**。我意识到我可以通过简单的全局查找和替换来做到这一点，但我想知道是否有更安全/更好的方法来使用 ReSharper？

**所有传入的参数在这两种情况下都是相同的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T11:15:33.713

`Structural search and replace`ReSharper 中有一个名为的工具。它绝对比简单的查找和替换更安全，但它有点复杂。我试图为你做一个指令，但我没有测试它。试一试，风险自负。搜索 Google`ReSharper structural search and replace`以查找更多信息。

1.  去`ReSharper | Find | Search with pattern`。
2.  `$t$.Show($args$)`在文本字段中输入。
3.  单击`Add Placeholder -> Expression`。键入`t`名称，然后键入`MessageBox`表达式类型并从建议列表中选择正确的类型。
4.  单击`Add Placeholder -> Argument`。输入`args`名称，其他字段保留默认值。
5.  确保此模式通过单击 找到您的目标调用`Find`。
6.  现在回到`ReSharper | Find | Search with pattern`（你的模式应该仍然存在）。
7.  单击`Replace`。
8.  键入`MsgBox.Show($args$)`。
9.  单击`Replace`。
10.  现在在必要时更正使用。不幸的是，这只能半自动完成，方法是通过 ReSharper 的解决方案范围分析发现错误或编译您的项目，然后在出现任何错误时单击 Alt-Enter 以调用 ReSharper 的修复以添加使用。

# mongodb - mongodb 通过 mongoVUE 连接被拒绝

> ID：15656598
> 
> 赞同：0
> 
> 时间：2013-03-27T10:26:55.587
> 
> 标签：mongodb, connection, mongovue

尝试通过 mongoVUE (windows 7) 连接到远程 mongodb

不能这样做 - 总是有响应“无法建立连接，因为目标机器主动拒绝它”

防火墙关了。。

有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T17:37:25.543

如果您尝试连接的 Mongo 实例是副本集的一部分，您应该尝试将整个集逗号分隔到连接的 Server 字段中

我遇到了完全相同的问题，这就是我的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T23:11:56.737

这对我有用，从[Mongodb 无法连接到 localhost 但可以连接到 localhost 的 IP 地址](https://stackoverflow.com/questions/8904991/mongodb-cant-connect-to-localhost-but-can-connect-to-localhosts-ip-address)：

> 您的 mongodb.conf（或启动脚本）中是否设置了 bind_ip？bind_ip 设置限制了它将只侦听该 IP 的 IP。
> 
> 请参阅 IP 地址绑定部分：[http ://www.mongodb.org/display/DOCS/Security+and+Authentication](http://www.mongodb.org/display/DOCS/Security+and+Authentication)

注释掉 mongodb.conf 中的 bind_ip 设置，重启 mongod 应该可以连接了。

# javascript - 如何扩展配置值

> ID：15656604
> 
> 赞同：1
> 
> 时间：2013-03-27T10:27:05.493
> 
> 标签：javascript, extjs, extjs4

例子

```
Ext.define('ClassA', {
    plugins: [ 'PluginA' ]
});

Ext.define('ClassB', {
    extend: 'ClassA',
    plugins: [ 'PluginB' ]
});

Ext.create('ClassB', {
    plugins: [ 'PluginC' ]
}); 
```

所以我想要一个`ClassB`with plugins `PluginA`, `PluginB`,的实例`PluginC`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:19:49.430

您需要将它们合并到构造函数中。这是一个可能的解决方案：

```
Ext.define('ClassA', {
    constructor: function (config) {
        var me = this;
        config.plugins = Ext.Array.merge(config.plugins ? config.plugins : [], ['PluginA'])
        Ext.apply(me, config);
        me.callParent(arguments);
    }
}); 
```

这是一个小提琴：http: [//jsfiddle.net/johanhaest/EGMxA/](http://jsfiddle.net/johanhaest/EGMxA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:03:34.603

这行不通。原因，配置对象上没有属性`plugins`。所以`PluginC`从创建将不会应用于实例。

但这对我有用：

```
constructor: function(config) {
    this.plugins = Ext.Array.merge(this.plugins || [], [
        'PluginA'
    ]);
    this.callParent(arguments);
} 
```

我正在使用 Ext 版本 4.1.1.1

# android - 通过 URL 在 Android 的媒体播放器中播放视频

> ID：15656607
> 
> 赞同：1
> 
> 时间：2013-03-27T10:27:06.553
> 
> 标签：android, url, android-mediaplayer

我有一个应用程序可以从本地服务器 IP 的 URL 播放视频文件。当我在浏览器或 VLC 播放器中运行视频时，视频播放正常。但我不想在播放视频时显示 IP 地址。有什么办法可以做到这一点吗？这是播放视频文件的代码：

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

 public class welcome extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button b = (Button) findViewById(R.id.button1);{
            b.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://192.168.1.4/videotest/Camera1.mp4"));
                startActivity(browserIntent);
            }});

        }

    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:37:02.550

你应该使用 VideoView 但如果你真的想在“浏览器”（webview）中运行它，你可以做这样的事情。

WebView 意图

```
Intent intent = new Intent(context, WebViewActivity.class);
            startActivity(intent); 
```

WebViewActivity

```
public class WebViewActivity extends Activity {

    private WebView webView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://192.168.1.4/videotest/Camera1.mp4");

    }
} 
```

布局

```
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

# php - 我可以在扩展名为 .php 的同一文件中使用 php 和 jQuery

> ID：15656610
> 
> 赞同：0
> 
> 时间：2013-03-27T10:27:34.260
> 
> 标签：php, jquery

我是编程网站的新手，上个月学习了 jQuery 和 PHP。我使用 jQuery 建立了一个网站，但现在意识到我也需要使用 php，但主要用于身份验证。我不想尝试在 php 中重做 jQuery 代码。

我知道大多数人建议将服务器端和浏览器端脚本和 HTML 分开，但是我可以在同一个文件中同时使用 jQuery 和 php 来实现不同的目的，而不会出现任何冲突或问题吗？文件扩展名将是 .php ，我希望结构类似于：

```
<?php
//php code for authentication 
?>

<html>
<head>
//header code

<sctipt>
//jquery code to control layout including hiding divs and changing the information 
//shown based on conditional statements

</script>
</head>

//other html 
```

对不起，如果这是一个愚蠢的问题，但我想知道在我走得太远之前最好的前进方式。我感谢您的帮助。

谢谢大家的快速回复，非常感谢。

php 的目的是让只有登录的人才能看到该页面。我目前的理解是，身份验证只能通过使用 cookie 来完成（仍然需要了解会话），并且这些需要一个 php 脚本。有没有更好的方法，所以我不必在一页上混合两种语言？还是我的方法更容易且同样有效-即使这是不好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:31:03.263

是的..你可以..只需要确保标签内有你所有的jquery（javascript）代码`<script>`......（虽然这是一种不好的做法，但你可以）......

```
<?php
 $test="test";
?>

<script>
   var data= '<?php echo $test ?>';
   alert(data);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:30:44.137

答案是肯定的，你可以。PHP 是一种动态决定向浏览器发送什么标记 (HTML) 的方法，因此 PHP 和 HTML 通常具有内在联系。此外，JavaScript 通常在 HTML 中内在链接。请注意，这一切都独立于它来自哪个文件扩展名 - 您的 Web 服务器发送您编写的脚本的结果，而不是任何给定扩展名的文件。

原则是标记如何生成无关紧要，一旦到达浏览器，它将被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:29:32.343

是的。这个有可能。你会像举个例子一样写它。只需测试一下;-)

# javascript - 诺基亚 Here javascript 地理编码不返回英文地址

> ID：15656611
> 
> 赞同：1
> 
> 时间：2013-03-27T10:27:34.380
> 
> 标签：javascript, here-api

我开始使用诺基亚地图 API，并且在对地址进行地理编码（获取地址的纬度/经度）时注意到了一些奇怪之处。

我在搜索“ **1348 Louvain-la-Neuve,Belgium,Belgium** ”

它在数组中返回了一个带有地址和位置的结果；不幸的是，返回的地址似乎是法语，而不是我的自然语言环境。

返回的地址部分，返回给我一个国家值“**比利时**”而不是预期的“**比利时**”。有没有办法强制通过我的英语语言环境，而不是似乎是搜索国家的语言环境。

（我也意识到这可能不是语言环境问题，而是国家的官方名称，这对我来说仍然是一个问题，因为我用英语处理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:32:37.483

这是一个错误（票号：JSLA-3608）。添加更改地理编码请求的区域设置应该是这种情况`nokia.Settings.set("defaultLanguage", "en-GB");` ，但在我看来，地理编码函数没有将区域设置传递给地理编码服务。有趣的是，reverseGeocoding 服务**确实**正确传递了语言环境，因此可以使用一种变通方法来获取首选语言环境：

```
searchManager.geoCode({
        searchTerm: "1348 Louvain-la-Neuve,Belgium,Belgium",
        onComplete: function (data, requestStatus, requestId) {
            processResults(data, requestStatus, requestId);
            map.zoomTo(addressesContainer.getBoundingBox());
            }
    }); 
```

返回“比利时”

然而：

```
searchManager.geoCode({
        searchTerm: "1348 Louvain-la-Neuve,Belgium,Belgium",
        onComplete: function (data, requestStatus, requestId) {
                    nokia.places.search.manager.reverseGeoCode({
                    latitude: data.location.position.latitude,
                    longitude: data.location.position.longitude,
                    onComplete: function (data, status) {
                         processResults(data, requestStatus, requestId);
                        map.zoomTo(addressesContainer.getBoundingBox());
                    }
                });             
            }
    }); 
```

返回“比利时”。

这是一个完整的示例（使用您自己的[应用程序 ID 和令牌](http://www.developer.nokia.com/Community/Wiki/How_to_Obtain_Your_Own_Nokia_appID_and_Token)）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="X-UA-Compatible" content="IE=7; IE=EmulateIE9; IE=EmulateIE10;"/>
            <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
            <title>Nokia Maps API for JavaScript Example: Addresses</title>
            <meta name="description" content="Geocode multiple addresses and display them using standard markers and infobubbles"/>
            <meta name="keywords" content="addresses, services, geocode, reverse, geocode"/>
            <!-- For scaling content for mobile devices, setting the viewport to the width of the device-->
            <meta name=viewport content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
            <!-- Styling for example container (NoteContainer & Logger)  -->
            <link rel="stylesheet" type="text/css" href="http://developer.here.com/apiexplorer/examples/templates/js/exampleHelpers.css"/>
            <!-- By default we add ?with=all to load every package available, it's better to change this parameter to your use case. Options ?with=maps|positioning|places|placesdata|directions|datarendering|all -->
            <script type="text/javascript" charset="UTF-8" src="http://api.maps.nokia.com/2.2.4/jsl.js?with=all"></script>
            <!-- JavaScript for example container (NoteContainer & Logger)  -->

            <style type="text/css">
                html {
                    overflow:hidden;
                }

                body {
                    margin: 0;
                    padding: 0;
                    overflow: hidden;
                    width: 100%;
                    height: 100%;
                    position: absolute;
                }

                #mapContainer {
                    width: 100%;
                    height: 100%;
                    left: 0;
                    top: 0;
                    position: absolute;
                }
            </style>
        </head>
        <body>
            <div id="mapContainer"></div>
            <div id="uiContainer"></div>
            <script type="text/javascript" id="exampleJsSource">
    /*  Set authentication token and appid 
    *   WARNING: this is a demo-only key
    *   please register on http://api.developer.nokia.com/ 
    *   and obtain your own developer's API key 
    */
    nokia.Settings.set("appId", "APP ID); 
    nokia.Settings.set("authenticationToken", "TOKEN");
    nokia.Settings.set("defaultLanguage", "en-GB");

    // Get the DOM node to which we will append the map
    var mapContainer = document.getElementById("mapContainer");

    // We create a new instance of InfoBubbles bound to a variable so we can call it later on
    var infoBubbles = new nokia.maps.map.component.InfoBubbles();

    // Create a map inside the map container DOM node
    var map = new nokia.maps.map.Display(mapContainer, {
        // initial center and zoom level of the map
        center: [52.51, 13.4],
        zoomLevel: 10,
        components:[
            // We add the behavior component to allow panning / zooming of the map
            new nokia.maps.map.component.Behavior(),
            infoBubbles
        ]
    });

    var location2,

        // We will put our address markers into this container zo we can zoom in to the markers
        addressesContainer = new nokia.maps.map.Container(),
        marker,
        searchCenter = new nokia.maps.geo.Coordinate(52.51, 13.4),
        searchManager = nokia.places.search.manager;

    map.objects.add(addressesContainer);

    var processResults = function (data, requestStatus, requestId) {
        // Data is instance of nokia.places.objects.Place 
        var location = data.location;
        // Ensure that we our request came back with valid result
        if (requestStatus == "OK") {
            // Create a new marker on the found location
            marker = new nokia.maps.map.StandardMarker(location.position);
            // Add marker to its container so it will be render
            addressesContainer.objects.add(marker); 
            marker.$address = location.address;
            marker.$label = data.name;
        }
    };

    /*
        searchManager.geoCode({
            searchTerm: "1348 Louvain-la-Neuve,Belgium,Belgium",
            onComplete: function (data, requestStatus, requestId) {
                processResults(data, requestStatus, requestId);
                map.zoomTo(addressesContainer.getBoundingBox());
                }
        }); */

        searchManager.geoCode({
            searchTerm: "1348 Louvain-la-Neuve,Belgium,Belgium",
            onComplete: function (data, requestStatus, requestId) {
                        nokia.places.search.manager.reverseGeoCode({
                        latitude: data.location.position.latitude,
                        longitude: data.location.position.longitude,
                        onComplete: function (data, status) {
                             processResults(data, requestStatus, requestId);
                            map.zoomTo(addressesContainer.getBoundingBox());
                        }
                    });             
                }
        }); 

    addressesContainer.addListener("click", function (evt) {
        var marker = evt.target,
            address = marker.$address,
            label = marker.$label;  
        if (marker instanceof nokia.maps.map.Marker) {
            infoBubbles.openBubble(label, marker.coordinate);
        }

    });

            </script>
        </body>
    </html> 
```

# r - 在 R 中使用 t.test() 时出错 - 'y' 观察值不足

> ID：15656614
> 
> 赞同：5
> 
> 时间：2013-03-27T10:27:37.947
> 
> 标签：r, cut

我的代码出现此错误

```
Error in t.test.default(dat$Value, x[[i]][[2]]) : 
  not enough 'y' observations 
```

我认为我收到此错误的原因是因为我正在对只有一个值的数据（因此不会有平均值或标准差）与具有 20 个值的数据进行 t.test..有没有办法我可以解决这个问题..有没有办法可以忽略没有足够 y 观察的数据？？？像 if 循环可能会起作用...请帮助

所以我做 t.test 的代码是

```
t<- lapply(1:length(x), function(i) t.test(dat$Value,x[[i]][[2]])) 
```

其中 x 是切割形式的数据，类似于

```
cut: [3:8)
        Number   Value
3       15        8
4       16        7
5       17        6
6       19        2.3
this data goes on 
cut:[9:14)
      Number   Value
7     21        15
cut:[13:18) etc
      Number    Value
8     22        49
9     23        15
10    24        13 
```

我怎样才能忽略其中只有 1 个值的 'cuts'，就像上面的示例一样，在 'cut[9:14)' 中只有一个值....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:43:38.317

t 检验的所有标准变体都在其公式中使用样本方差，并且您无法从一次观察中计算出它，因为您正在除以 n-1，其中 n 是样本大小。

这可能是最简单的修改，尽管我无法测试它，因为您没有提供示例数据（您可以`dput`将数据用于您的问题）：

```
 t<- lapply(1:length(x), function(i){
     if(length(x[[i]][[2]])>1){
       t.test(dat$Value,x[[i]][[2]]) 
     } else "Only one observation in subset" #or NA or something else
     }) 
```

另一种选择是修改以下中使用的索引`lapply`：

```
ind<-which(sapply(x,function(i) length(i[[2]])>1))
t<- lapply(ind, function(i) t.test(dat$Value,x[[i]][[2]])) 
```

这是第一个使用人工数据的案例的示例：

```
x<-list(a=cbind(1:5,rnorm(5)),b=cbind(1,rnorm(1)),c=cbind(1:3,rnorm(3)))
y<-rnorm(20)

t<- lapply(1:length(x), function(i){
     if(length(x[[i]][,2])>1){ #note the indexing x[[i]][,2]
       t.test(y,x[[i]][,2]) 
     } else "Only one observation in subset"
     })

t
[[1]]

        Welch Two Sample t-test

data:  y and x[[i]][, 2] 
t = -0.4695, df = 16.019, p-value = 0.645
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -1.2143180  0.7739393 
sample estimates:
mean of x mean of y 
0.1863028 0.4064921 

[[2]]
[1] "Only one observation in subset"

[[3]]

        Welch Two Sample t-test

data:  y and x[[i]][, 2] 
t = -0.6213, df = 3.081, p-value = 0.5774
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -3.013287  2.016666 
sample estimates:
mean of x mean of y 
0.1863028 0.6846135 

        Welch Two Sample t-test

data:  y and x[[i]][, 2] 
t = 5.2969, df = 10.261, p-value = 0.0003202
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 3.068071 7.496963 
sample estimates:
mean of x mean of y 
5.5000000 0.2174829 
```

# angularjs - 数据绑定数字输入的最小/最大属性时未触发验证

> ID：15656617
> 
> 赞同：11
> 
> 时间：2013-03-27T10:27:42.583
> 
> 标签：angularjs

我有许多数字输入字段，它们的最小值和最大值属性值取决于我的 AngularJS 应用程序中其他地方的逻辑，但是当在这些属性中使用数据绑定时，Angular 不再验证它们，但是，HTML 5 验证似乎仍然选择它们向上。

```
var myApp = angular.module('myApp', []);
function FirstCtrl($scope) {
    $scope.min = 10;
    $scope.max = 20;
} 
```

```
<div ng-app="myApp">
    <div ng-controller="FirstCtrl">
        <form name="myForm">
            <input type="number" name="one" required="required"
                   min="10" max="20" ng-model="one" />
            <input type="number" name="two" required="required"
                   min="{{ min }}" max="{{ max }}" ng-model="two" />
            <button ng-disabled="!myForm.$valid">Submit</button>
        </form>
    </div>
</div> 
```

现场版：http: [//jsfiddle.net/kriswillis/bPUVH/2/](http://jsfiddle.net/kriswillis/bPUVH/2/)

如您所见，验证仍然在 HTML/CSS（引导程序）中处理得很好，因为两个字段在无效时都会变成红色，但是，当第二个字段无效时，提交按钮（由 Angular 处理）不会被禁用。`myForm.two.$error`此外，在中没有 min 和 max 属性`myForm.one.$error`。

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-26T17:53:45.330

我编写了指令来填补空白，ng-min 和 ng-max：

[http://jsfiddle.net/g/s5gKC/](http://jsfiddle.net/g/s5gKC/)

```
var app = angular.module('app', []);

function isEmpty(value) {
  return angular.isUndefined(value) || value === '' || value === null || value !== value;
}

app.directive('ngMin', function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
            scope.$watch(attr.ngMin, function(){
                ctrl.$setViewValue(ctrl.$viewValue);
            });
            var minValidator = function(value) {
              var min = scope.$eval(attr.ngMin) || 0;
              if (!isEmpty(value) && value < min) {
                ctrl.$setValidity('ngMin', false);
                return undefined;
              } else {
                ctrl.$setValidity('ngMin', true);
                return value;
              }
            };

            ctrl.$parsers.push(minValidator);
            ctrl.$formatters.push(minValidator);
        }
    };
});

app.directive('ngMax', function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
            scope.$watch(attr.ngMax, function(){
                ctrl.$setViewValue(ctrl.$viewValue);
            });
            var maxValidator = function(value) {
              var max = scope.$eval(attr.ngMax) || Infinity;
              if (!isEmpty(value) && value > max) {
                ctrl.$setValidity('ngMax', false);
                return undefined;
              } else {
                ctrl.$setValidity('ngMax', true);
                return value;
              }
            };

            ctrl.$parsers.push(maxValidator);
            ctrl.$formatters.push(maxValidator);
        }
    };
});

angular.bootstrap(document.body, ['app']); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T14:51:09.993

显然我们不能对`min`and`max`字段使用 {{}}（即插值）。我查看了[源代码](https://github.com/angular/angular.js/blob/f0c6ebc07653f6267acec898ccef5677884e3081/src/ng/directive/input.js#L528)，发现以下内容：

```
if (attr.min) {
  var min = parseFloat(attr.min); 
```

`$interpolate`不调用，只是`parseFloat`，因此您需要为`min`and指定一个看起来像数字的字符串`max`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-03T22:06:13.477

Angular 现在似乎支持`ng-min`并且`ng-max`开箱即用，而无需编写自己的指令。请参阅使用 Angular 1.4.2 的[这个小提琴。](http://jsfiddle.net/AG2wf/159/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T14:14:21.283

我还为它写了一个自定义指令：

### 工作演示：[http ://plnkr.co/edit/BJ98ZR?p=preview](http://plnkr.co/edit/BJ98ZR?p=preview)

```
.directive('validateRange', ['$parse', function($parse) {

    function link($scope, $element, $attrs, ngModel) {
        var attrRange, range = [];

        function validate(value) {
            var validMin = true, validMax = true;
            if (typeof range[0] === 'number') {
                ngModel.$setValidity('min', value >= range[0]);
                validMin = value >= range[0];
            }
            if (typeof range[1] === 'number') {
                ngModel.$setValidity('max', value <= range[1]);
                validMax = value <= range[1];
            }
            return validMin && validMax ? value : undefined;
        }

        attrRange = $attrs.validateRange.split(/,/);

        range[0] = $parse(attrRange[0] || '')($scope);
        range[1] = $parse(attrRange[1] || '')($scope);

        $scope.$watchCollection('[' + $attrs.validateRange + ']', function(values) {
            range = values;
            validate(ngModel.$viewValue);
        });

        ngModel.$parsers.unshift(validate);
        ngModel.$formatters.unshift(validate);
    }

    return {
        link: link,
        require: 'ngModel'
    };

}]); 
```

示例使用：

```
<form name="myform" ng-init="minvalue=0;value=1;maxvalue=2">
    Min Value:
    <input type="number" name="minvalue" required
           data-validate-range="0,value"
           ng-model="minvalue">

    Value:
    <input type="number" name="value" required
           data-validate-range="minvalue,maxvalue"
           ng-model="value">

    Max Value:
    <input type="number" name="maxvalue" required
           data-validate-range="value,false"
           ng-model="maxvalue">

    <pre>
        myform.minvalue.$error {{ myform.minvalue.$error }}
        myform.value.$error    {{ myform.value.$error }}
        myform.maxvalue.$error {{ myform.maxvalue.$error }}
    </pre>
</form> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-01T10:43:10.500

我也面临同样的问题。通过使用此指令获得成功：

```
angular.module('tech').directive('maximum', ['$parse',
  function($parse) {
    return {
      restrict: 'A',
      require: '?ngModel',

      link: function(scope, element, attrs, ctrl) {

        if (!ctrl) return;
        attrs.maximum = true;

        var checkMax = function(n) {
          if (!n) return;

          var actualValue = ctrl.$viewValue;
          var maxValue = attrs.maximum;
          if (parseInt(actualValue) > parseInt(maxValue)) {
            ctrl.$setValidity('maximum', false);
          } else {
            ctrl.$setValidity('maximum', true);
          }
        };
        scope.$watch(attrs.ngModel, checkMax);
        //attrs.$observe('ngModel', remind);
        attrs.$observe('maximum', checkMax);

      }
    }
  }
]); 
```

我从[这个](http://techhunk.com/directive-for-max-and-min-validation-in-angular-js/)网站得到了这个解决方案。对于整个代码，你可以去[这个](http://techhunk.com/directive-for-max-and-min-validation-in-angular-js/)网站

# python - 根据两列中的特定数据比较两个 CSV 文件

> ID：15656621
> 
> 赞同：0
> 
> 时间：2013-03-27T10:27:47.850
> 
> 标签：python, csv

我被鼓励走出自己的舒适区，在几乎没有经验的情况下使用 python，现在我被困住了。我正在尝试比较两个 CSV 文件（fileA.csv 和 fileB.csv），并将任何丢失的用户行从 fileB.csv 附加到 fileA.csv。我可以比较的唯一字段是用户的名字和姓氏（在这种情况下，它是每个文件中的 row[0] 和 row[2]）。

据我了解，您无法将信息附加到您当前打开的文件中，因此我愿意接受建议，而无需创建第三个文件（如果可能）。下面有我在正确的轨道上，但有很多数据，所以我需要一个循环。请帮忙。

```
import csv
reader1 = csv.reader(open('fileA', 'rb'), delimiter=',', quotechar='|')
row1 = reader1.next()
reader2 = csv.reader(open('fileB', 'rb'), delimiter=',', quotechar='|')
row2 = reader2.next()

##For Loop...

        if (row1[0] == row2[0]) and (row1[2] == row2[2]):
                ## Compare next 
        else:
                ## Append entire row to fileA.csv 
```

* * *

示例文件 A.csv：

```
John,Thomas,Doe,some,other,stuff
Jane, ,Smith,some,other,stuff 
```

示例文件 B.csv：

```
John, ,Doe,other,personal,data
Jane,Elizabeth,Smith,other,personal,data
Robin,T,Williams,other,personal,data 
```

应该从 FileB 附加到 FileA 的唯一行是 Robin 的完整行，因此 FileA 看起来像：

所需结果_文件A：

```
John,Thomas,Doe,some,other,stuff
Jane, ,Smith,some,other,stuff
Robin,T,Williams,other,personal,data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:30:25.437

首先将在文件 A 中找到的信息存储在一个集合中。

然后，以追加模式*重新打开*文件 A，并循环遍历文件 B。在集合中找不到 B 中的任何名称，然后可以将其添加到文件 A：

```
csv_dialect = dict(delimiter=',', quotechar='|')
names = set()
with open('fileA', 'rb') as file_a:
    reader1 = csv.reader(file_a, **csv_dialect)
    next(reader1)
    for row in reader1:
        names.add((row[0], row[2]))

# `names` is now a set of all names (taken from columns 0 and 2) found in file A.

with open('fileA', 'ab') as file_a, open('fileB', 'rb') as file_b:
    writer = csv.writer(file_a, **csv_dialect)
    reader2 = csv.reader(file_b, **csv_dialect)
    next(reader2)
    for row in reader2:
        if (row[0], row[2]) not in names:
            # This row was not present in file A, add it.
            writer.writerow(row) 
```

合并的`with`行需要 Python 2.7 或更高版本。在早期的 Python 版本中，只需嵌套两个语句：

```
with open('fileA', 'ab') as file_a:
    with open('fileB', 'rb') as file_b:
        # etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:09:12.047

您可以尝试[pandas](http://pandas.pydata.org/)，这可能会帮助您更轻松地处理 csv 文件，并且看起来更具可读性：

```
import pandas as pd

df1 = pd.read_csv('FileA.csv', header=None)
df2 = pd.read_csv('FileB.csv', header=None)

for i in df2.index:
    # Don't append if that row is existed in FileA
    if i in df1.index:
        if df1.ix[i][0] == df2.ix[i][0] and df1.ix[i][2] == df2.ix[i][2]: continue

    df1 = df1.append(df2.ix[i])

df1.to_csv('FileA.csv', index=None, header=None) 
```

# jquery - 如何使用 jQuery onsubmit 并检查值是否为 2 - 5 个字符？

> ID：15656622
> 
> 赞同：18
> 
> 时间：2013-03-27T10:27:51.010
> 
> 标签：jquery, forms, submit, character

假设我有一个文本字段：

```
Username: <input type="text" id="username" class="required" />
<input type="submit" /> 
```

我有一些 jQuery：

```
$(document).ready(function() {
    user = $("#username");

    user.submit(function() {

    })
}) 
```

我想在提交`username`后检查输入的值的长度是否在 2 - 5 个字符之间。如果不是，那么就会发生一些事情。

我不太确定我应该在`user.submit(function(){})`.

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-27T10:31:15.203

首先你需要一个实际的表格：

```
<form id="myForm">
    Username: <input type="text" id="username" class="required" />
    <input type="submit" />
</form> 
```

然后：

```
$(document).ready(function(){
    $('#myForm').on('submit', function(e){
        e.preventDefault();
        var len = $('#username').val().length;
        if (len < 6 && len > 1) {
            this.submit();
        }
    });
}); 
```

或者在 HTML5 中，您可以使用该`pattern`属性（在 Safari 和 IE9 及以下版本中不支持）：

```
<!-- Fiddle: http://jsfiddle.net/ymdQq/ -->

<form id="myForm">
  Username: <input type="text" id="username" pattern=".{2,5}" required />
  <input type="submit" />
</form>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:40:09.873

```
$(document).ready(function() {
  $("#form").submit(function(e) {
    length = $("#username").val().length;
    if ((length > 2 && length < 5)) {
      $("#output").html("correct, logging in");
    } else {
      $("#output").html("incorrect, must have 3 or 4 chars");
    }
    return (length > 2 && length < 5);
  });
});
```

```
<!-- Fiddle: http://jsfiddle.net/zoutepopcorns/b5Kqs/ -->

<form id="form" mehtod="POST" action="https://www.example.com">
  username: <input type="text" id="username" class="required" />
  <input type="submit" />
</form>

<div id="output"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T10:33:41.527

您可以使用 来检查输入字段的值`user.val()`和字符串的长度`user.val().length`。

这样你就可以做这样的事情：

```
if(user.val().length < 2 || user.val().length > 5) {
    console.log('test')
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T10:30:46.313

绑定提交`form`而不是*输入类型文本*并在提交事件中检查其值。最好为表单分配一些 id 并使用表单 id 选择器来绑定提交。

```
$('form').submit(function(){
      username = $('#username').val();
     if(username.length > 1 && username.length < 6)
     {
     }
}); 
```

# firefox - 一些 png 图像无法在 IE10 中加载

> ID：15656624
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:27:56.430
> 
> 标签：firefox, png, internet-explorer-10

我正在使用与 IE10 兼容的网页。在 IE10 中，一些 png 图像可以完美加载。但某些图像未加载（看起来像损坏的图像）。但一切都在 FF19 中有效。为什么会这样？有什么解决方案吗？

```
<BODY>
  <img src = "aaa/Test1.png" />
  <img src = "aaa/Test2.png" />
  <img src = "aaa/Test3.png" />
  <img src = "aaa/Test4.png" />
</BODY> 
```

更新 ：

仅当我在本地打开 html 文件时才会出现此问题。如果我打开加载域图像。我很困惑。请有人告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-25T19:54:12.953

所以我也遇到了这个错误，我的修复非常令人讨厌。PNG 和 JPG 文件非常相似，实际上它们非常相似，您只需更改文件扩展名，大多数图像查看器和浏览器都可以正确呈现图像。

我的问题是我有一些原生 .png 和一个原生 .jpg。出于某种原因，我们决定希望所有文件都为 .png，因此我们只是将 .jpg 扩展名更改为 .png 扩展名，而不是在 photoshop 中正确保存图像。这很有效，因为几乎每个浏览器都能够破译正在发生的事情，当然除了 IE。这在我们的团队成员中引起了很大的混乱，直到我们发现发生了什么。

我会尝试打开在 PS 中失败的图像并将其另存为 .png。这就是解决我们的问题的原因。

希望能帮助到你

# authentication - Vaadin 7 - 在 VaadinSession 中设置和获取属性

> ID：15656626
> 
> 赞同：3
> 
> 时间：2013-03-27T10:28:04.937
> 
> 标签：authentication, attributes, vaadin

我目前正在使用 Vaadin 7 创建 RIA，并且正在设计登录功能。

应用程序设计很简单：

**UI 类**在不同的**View 类**之间执行导航。特别是，第一个显示的 View 是 LoginView 类，在用户通过身份验证后，UI 类将用户重定向到 MainView。

身份验证后，我想将用户数据（例如姓名和姓氏）设置到会话中，并始终在 Web 应用程序的右上角显示它（无论是什么特定视图）。

作为一个初学者，我阅读了 Vaadin 书，我首先使用了第 11 章[https://vaadin.com/book/-/page/advanced.global.html](https://vaadin.com/book/-/page/advanced.global.html)中说明的方案，但它似乎没有按预期工作，可能因为我正在使用查看导航方案。

所以我使用以下方法：

正确完成身份验证后，LoginView 尝试使用以下代码将用户数据存储为 VaadinSession 属性：

```
VaadinSession.getCurrent().setAttribute("name", name); 
```

然后 UI 导航到 MainView 并尝试获取用户的名称：

```
VaadinSession.getCurrent().getAttribute("name"); 
```

**但它得到一个空值。**

有谁知道为什么？我很感激任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-28T08:58:01.997

我建议将值存储在 HTTP 会话中。

```
VaadinServletService.getCurrentServletRequest().getSession().setAttribute("name", name); 
```

和

```
VaadinServletService.getCurrentServletRequest().getSession().getAttribute("name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T09:00:31.273

在扩展 UI 的主类上使用 @PreserveOnRefresh 注释。然后您可以将变量数据存储在主类中。您可以使用 ((MyUIClass)UI.getCurrent()).getSomeVariable 方法表达式从任何地方（在任何视图中）提供它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-27T20:41:28.570

我猜你为什么得到你的空值。在现代 Vaadin 的大多数教程中，导航页面首先在 UI 中作为对象创建。如果在此过程中实例化的这些视图之一是 MainView。如果显示名称的标签在类的构造函数中设置了字符串，则该行：

`label.setValue(VaadinSession.getCurrent().setAttribute("name", name));`如果登录功能尚未设置该属性，则将为 null。

您需要更新在 @override`enter()`函数中显示用户字符串的标签，或者以其他方式处理它。

# vba - VBA：多维列表、数组、集合或字典的性能

> ID：15656630
> 
> 赞同：6
> 
> 时间：2013-03-27T10:28:16.857
> 
> 标签：vba, multidimensional-array

我目前正在编写代码来组合两个包含不同版本数据的工作表。因此，我首先想通过键列对两者进行排序，组合它们，然后在输出工作表中标记版本之间的更改。

由于数据已经达到了 10000 行，并且有一天可能会超过 excel 的每工作表行数限制，我希望这些计算在工作表之外运行。它也应该表现更好。

目前我正在考虑对第一个和第二个数据进行快速排序，然后比较每个键/行的数据集。使用比较结果随后相应地格式化单元格。

## 问题

我只是想知道，我是否应该使用：

List OR Array OR Collection OR Dictionary of
**Lists** OR Arrays OR Collections OR Dictionaries

到目前为止，我还无法确定这 16 种可能性之间的可编码性和性能差异。目前我正在实施 Array OF Arrays 方法，不断想知道这是否有意义？

在此先感谢，感谢您的意见和智慧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T18:08:28.957

前段时间，我对客户端的宏有同样的问题。除了真正大量的行（超过 50000 并且还在增长）之外，当采用“标准方法”时，它还存在从某些行数（大约 5000）非常慢的问题，即每个计算的输入行是从同一个工作表中读取的（上面的几行）；这种读写过程使这个过程变得越来越慢（显然，Excel 从第 1 行开始，行越低，到达那里所需的时间越长）。我依靠两种不同的解决方案改善了这种情况：首先，设置每个工作表的最大行数，一旦达到，就会创建一个新的工作表并在那里继续读/写（从第一行开始）。另一个变化是将 Excel 中的读/写移动到从临时 .txt 文件中读取并写入 Excel（所有行在开始时都被读取以填充文件）。这两个修改大大提高了速度（从半小时到几分钟）。关于您的问题，我不会过分依赖带有宏的数组（尽管我不确定这 10000 行中的每一行包含多少信息）；但我想这是个人决定。我不太喜欢集合，因为效率不如数组；和字典一样。t 过分依赖带有宏的数组（尽管我不确定这 10000 行中的每一行包含多少信息）；但我想这是个人决定。我不太喜欢集合，因为效率不如数组；和字典一样。t 过分依赖带有宏的数组（尽管我不确定这 10000 行中的每一行包含多少信息）；但我想这是个人决定。我不太喜欢集合，因为效率不如数组；和字典一样。

我希望这个“简短”的评论会有所帮助。

# objective-c - 从单元测试中访问模拟类变量的静态变量

> ID：15656631
> 
> 赞同：4
> 
> 时间：2013-03-27T10:28:21.390
> 
> 标签：objective-c, c, scope, objective-c-runtime

是否有一个 Objective-C 运行时库函数（*不太可能*）或一组能够检查 Objective-C 中的静态（准类级别）变量的函数？我知道我可以使用类访问器方法，但我希望能够在不为“测试框架”编写代码的情况下进行测试。

*或者*，是否有一种晦涩的纯 C 技术用于外部访问静态变量？请注意，此信息用于单元测试目的——它不一定适合生产使用。我意识到这违背了静态变量的意图……一位同事提出了这个话题，我一直对深入研究 ObjC/C 内部结构很感兴趣。

```
@interface Foo : NSObject
+ (void)doSomething;
@end

@implementation Foo
static BOOL bar;
+ (void)doSomething
{
  //do something with bar
}
@end 
```

鉴于上述情况，我可以使用运行时库或其他 C 接口进行检查`bar`吗？静态变量是一个 C 构造，也许`static`vars 有特定的内存区域？我对可以在 ObjC 中模拟类变量并且也可以进行测试的其他构造感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:38:28.663

不，不是真的，除非您`static`通过某种类方法或其他方法公开该变量。您可以提供一个`+ (BOOL)validateBar`方法来执行您需要的任何检查，然后从您的测试框架中调用它。

这也不是一个 Objective-C 变量，而是一个 C 变量，所以我怀疑 Objective-C 运行时中是否有任何可以提供帮助的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:17:46.260

简短的回答是不可能[从另一个文件访问静态变量。](https://stackoverflow.com/questions/2228906/how-to-access-a-static-variable-from-another-file-in-c?lq=1)这与试图从其他地方引用函数局部变量完全相同。该名称不可用。在 C 中，对象* 的“可见性”分为三个阶段，称为“链接”：外部（全局）、内部（仅限于单个“翻译单元”——松散地，单个文件）和“否”（函数本地）。当您将变量声明为`static`时，它被赋予内部链接；没有其他文件可以通过名称访问它。您必须制作某种访问器功能才能公开它。

扩展的答案是，因为无论如何我们都可以使用一些 ObjC 运行时库技巧来模拟类级变量，所以我们可以制作一些通用的仅测试代码，您可以有条件地编译。不过，这并不是特别简单。

在我们开始之前，我会注意到这仍然需要一种方法的个性化实现；由于链接的限制，没有办法解决这个问题。

第一步，声明方法，一个用于设置，然后一组用于类似`valueForKey:`访问：

```
//  ClassVariablesExposer.h

#if UNIT_TESTING
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

#define ASSOC_OBJ_BY_NAME(v) objc_setAssociatedObject(self, #v, v, OBJC_ASSOCIATION_ASSIGN)
// Store POD types by wrapping their address; then the getter can access the
// up-to-date value.
#define ASSOC_BOOL_BY_NAME(b) NSValue * val = [NSValue valueWithPointer:&b];\
objc_setAssociatedObject(self, #b, val, OBJC_ASSOCIATION_RETAIN)

@interface NSObject (ClassVariablesExposer)

+ (void)associateClassVariablesByName;

+ (id)classValueForName:(char *)name;
+ (BOOL)classBOOLForName:(char *)name;

@end
#endif /* UNIT_TESTING */ 
```

这些方法在语义上更像是一个协议而不是一个类别。第一个方法必须在每个子类中被覆盖，因为您要关联的变量当然会不同，并且由于链接问题。`objc_setAssociatedObject()`对引用变量的位置的实际调用*必须*在声明变量的文件中。

但是，将此方法放入协议中需要为您的类提供额外的标头，因为虽然协议方法的实现必须放在主实现文件中，但 ARC 和您的单元测试需要查看您的类符合的声明协议。麻烦。您当然可以使该`NSObject`类别符合协议，但无论如何您都需要一个存根以避免“不完整的实现”警告。我在开发这个解决方案时做了这些事情，并认为它们是不必要的。

第二组，访问器，作为类别方法工作得很好，因为它们看起来像这样：

```
//  ClassVariablesExposer.m

#import "ClassVariablesExposer.h"

#if UNIT_TESTING
@implementation NSObject (ClassVariablesExposer)

+ (void)associateClassVariablesByName
{
    // Stub to prevent warning about incomplete implementation.
}

+ (id)classValueForName:(char *)name
{
    return objc_getAssociatedObject(self, name);
}

+ (BOOL)classBOOLForName:(char *)name
{
    NSValue * v = [self classValueForName:name];
    BOOL * vp = [v pointerValue];
    return *vp;
}

@end
#endif /* UNIT_TESTING */ 
```

完全通用，尽管它们的成功使用确实取决于您对上面宏的使用。

接下来，定义您的类，覆盖该设置方法以捕获您的类变量：

```
// Milliner.h

#import <Foundation/Foundation.h>

@interface Milliner : NSObject
// Just for demonstration that the BOOL storage works.
+ (void)flipWaterproof;
@end 
```

* * *

```
// Milliner.m

#import "Milliner.h"

#if UNIT_TESTING
#import "ClassVariablesExposer.h"
#endif /* UNIT_TESTING */

@implementation Milliner
static NSString * featherType;
static BOOL waterproof;

+(void)initialize
{
    featherType = @"chicken hawk";
    waterproof = YES;
}

// Just for demonstration that the BOOL storage works.
+ (void)flipWaterproof
{
    waterproof = !waterproof;
}

#if UNIT_TESTING
+ (void)associateClassVariablesByName
{
    ASSOC_OBJ_BY_NAME(featherType);
    ASSOC_BOOL_BY_NAME(waterproof);
}
#endif /* UNIT_TESTING */

@end 
```

确保您的单元测试文件导入了该类别的标头。此功能的简单演示：

```
#import <Foundation/Foundation.h>
#import "Milliner.h"
#import "ClassVariablesExposer.h"

#define BOOLToNSString(b) (b) ? @"YES" : @"NO"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        [Milliner associateClassVariablesByName];
        NSString * actualFeatherType = [Milliner classValueForName:"featherType"];
        NSLog(@"Assert [[Milliner featherType] isEqualToString:@\"chicken hawk\"]: %@", BOOLToNSString([actualFeatherType isEqualToString:@"chicken hawk"]));

        // Since we got a pointer to the BOOL, this does track its value.
        NSLog(@"%@", BOOLToNSString([Milliner classBOOLForName:"waterproof"]));
        [Milliner flipWaterproof];
        NSLog(@"%@", BOOLToNSString([Milliner classBOOLForName:"waterproof"]));

    }
    return 0;
} 
```

我已将项目放在 GitHub 上：[https ://github.com/woolsweater/ExposingClassVariablesForTesting](https://github.com/woolsweater/ExposingClassVariablesForTesting)

另一个需要注意的是，您希望能够访问的每种 POD 类型都需要自己的方法：`classIntForName:`、`classCharForName:`等。

虽然这很有效，而且我总是喜欢玩 ObjC，但我认为它可能太聪明了一半；如果你只有一个或两个这些类变量，最简单的建议就是为它们有条件地编译访问器（制作一个 Xcode 代码片段）。如果您在一个类中有*很多*变量，我的代码可能只会为您节省时间和精力。

不过，也许你可以从中得到一些用处。我希望这是一个有趣的阅读，至少。

* * *

*仅表示“链接器已知的事物”——函数、变量、结构等——不是 ObjC 或 C++ 意义上的。

# sql - SQL Server：函数 SUM 和来自更多表的数据

> ID：15656633
> 
> 赞同：0
> 
> 时间：2013-03-27T10:28:24.510
> 
> 标签：sql, sql-server, sum

我有这些表：

**赫拉奇**：

*   IDHrace（整数）
*   Jmeno (varchar)

**Ucast_Zapas**：

*   ID_Hrace_zapas (int)
*   布兰基 (int)

例如，我想要 SUM 多少“白兰地” `WHERE ID_Hrace_zapas=IDHrace and Jmeno="karel"`...

这是我的代码：

```
SELECT 
    SUM(Ucast_Zapas.Branky), Ucast_Zapas.ID_Hrace_zapas, Hraci.Jmeno,Hraci.IDHrace
FROM 
    Hraci, Ucast_Zapas  
WHERE 
    (Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace) AND (Hraci.Jmeno='smajlik'); 
```

我不知道，问题出在哪里，SQl 写了这个错误：

> 列 'Ucast_Zapas.ID_Hrace_zapas' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:41:12.593

```
SELECT IDHrace, SUM(branky)
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace
WHERE Hraci.Jmeno='smajlik'
GROUP BY IDHrace 
```

# iphone - 如何以编程方式获取失败/掉线信息？

> ID：15656640
> 
> 赞同：0
> 
> 时间：2013-03-27T10:28:40.117
> 
> 标签：iphone, ios, ios6

如何获取失败/掉线信息？我们有任何私有 api 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:31:43.317

在 iOS 10.0+ 上，考虑使用 CallKit：[https](https://developer.apple.com/documentation/callkit) ://developer.apple.com/documentation/callkit 。

* * *

在 iOS 4.0–10.0 上，考虑检查 iOS 呼叫中心 API：[https ://developer.apple.com/documentation/coretelephony/ctcallcenter](https://developer.apple.com/documentation/coretelephony/ctcallcenter)

例子：

```
self.callCenter = [[CTCallCenter alloc] init];

self.callCenter.callEventHandler = ^(CTCall* call) {

    if ([call.callState isEqualToString:CTCallStateIncoming]) {

    } else if ([call.callState isEqualToString:CTCallStateDialing]) {

    } else if ([call.callState isEqualToString:CTCallStateConnected]) {

    } else if ([call.callState isEqualToString:CTCallStateDisconnected]) {

    } 
```

# java - 使用 BouncyCastle 从 PEM 密钥获取密钥对

> ID：15656644
> 
> 赞同：4
> 
> 时间：2013-03-27T10:28:46.677
> 
> 标签：java, bouncycastle, pem

我有一个 PEM 密钥，我想用它和 bouncycastle 获得一个密钥对。我发现这段代码看起来不错，但我有一个演员异常。

```
function loadKey() {
    File privateKeyFile = new File(keyPath);
    PEMParser pemParser = new PEMParser(new FileReader(privateKeyFile));
    PEMDecryptorProvider decProv = new     JcePEMDecryptorProviderBuilder().build(password.toCharArray());
    JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider("BC");

    Object object = pemParser.readObject();
    KeyPair kp;

    if (object instanceof PEMEncryptedKeyPair) {
        Logger.info("Encrypted key - we will use provided password");
        kp = converter.getKeyPair(((PEMEncryptedKeyPair) object).decryptKeyPair(decProv));
    }
    else {
        Logger.info("Unencrypted key - no password needed");    
        kp = converter.getKeyPair((PEMKeyPair) object);
    }

    return kp;
} 
```

它返回给我：未加密的密钥 - 不需要密码 org.bouncycastle.asn1.x509.SubjectPublicKeyInfo 不能转换为 org.bouncycastle.openssl.PEMKeyPair

我尝试了几种方法，但都没有成功。

感谢帮助我:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-25T11:55:09.663

如果您有一个带有密码的私钥，您可能会遇到此异常。尝试删除密码：

```
openssl rsa -in /path/to/originalkeywithpass.key -out /path/to/newkeywithnopass.key 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-15T09:59:14.623

您可以使用以下代码

```
PEMKeyPair pemKeyPair = (PEMKeyPair) pp.readObject();
KeyPair kp = new JcaPEMKeyConverter().getKeyPair(pemKeyPair);
pp.close(); 
```

例如：

```
public PrivateKey getKeyFromClassPath(String filename) {
    ClassLoader loader = Thread.currentThread().getContextClassLoader();
    InputStream stream = loader.getResourceAsStream("certificates/" + filename);
    if (stream == null) {
        throw new CertificateException("Could not read private key from classpath:" + "certificates/" + filename);
    }
    BufferedReader br = new BufferedReader(new InputStreamReader(stream));
    try {
        Security.addProvider(new BouncyCastleProvider());
        PEMParser pp = new PEMParser(br);
        PEMKeyPair pemKeyPair = (PEMKeyPair) pp.readObject();
        KeyPair kp = new JcaPEMKeyConverter().getKeyPair(pemKeyPair);
        pp.close();
        return kp.getPrivate();
    } catch (IOException ex) {
        throw new CertificateException("Could not read private key from classpath", ex);
    }
} 
```

# c# - 为外部对象创建 DataContract

> ID：15656645
> 
> 赞同：0
> 
> 时间：2013-03-27T10:28:47.497
> 
> 标签：c#, wcf, web-services, datacontract

我目前正在用 C#.NET 开发 WCF Web 服务。我对此很陌生。我正在考虑应该如何实现某个方法，因为它需要返回一个“外部”对象作为 DataContract。我不确定这是如何工作的。

我的 Web 服务实现了另一个 3rd 方 Web 服务。这样做的原因是因为我们不允许将所有方法和数据公开给公众。因此，我们正在设计一个 Web 服务，它去除了第三方 Web 服务公开的某些数据和方法。

第 3 方 Web 服务公开了这样一个方法：

```
CourtVerdictResults GetVerdict ( CourtVerdictRequest verdict ); 
```

我的 Web 服务实现了该方法的精简版本，如下所示：

```
CourtVerdictResults GetVerdict ( String verdictCaseNumber ); 
```

然后，在该方法中，我删除了一些敏感数据，然后我应该返回该`CourtVerdictResults`对象。

但是这个对象是在第 3 方 Web 服务中定义的。我的项目引用了该 Web 服务，因此它知道该对象。但是我自己的 Web 服务没有将该对象作为 DataContract。那么当其他人开始使用我的 Web 服务时，我如何才能返回这样的对象呢？

我是否需要做一些特别的事情，以便当其他人实现我的 Web 服务时，他们的代码会自动知道`CourtVerdictResults`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:12:05.797

`CourtVerdictResults`您可以创建与第三方对象相同（或与您希望的相同）的自己的类（在不同的命名空间中，否则名称会发生​​冲突）。

从他们的服务中检索第 3 方对象，将其值映射到您的对象（如果使用[ValueInjector](http://valueinjecter.codeplex.com/)或类似的东西则很简单），然后返回您的对象。

# matlab - 从matlab中的文件夹加载所有图像

> ID：15656646
> 
> 赞同：-2
> 
> 时间：2013-03-27T10:28:50.967
> 
> 标签：matlab

我有一个包含多个图像的文件夹，我想加载所有这些图像并单独处理...我如何使用 matlab 来完成？我尝试使用以下代码，它显示“无法读取 xyz.jpg。找不到这样的文件或目录”...xyz 是该文件夹中的第一个文件。

```
imagefiles = dir('F:\SIFT_Yantao\demo-data\*.jpg');      
nfiles = length(imagefiles);    % Number of files found
 for i=1:nfiles
 currentfilename=imagefiles(i).name;
 I2 = imread(currentfilename);
 [pathstr, name, ext] = fileparts(currentfilename);
 textfilename = [name '.mat'];
fulltxtfilename = [pathstr textfilename];
load(fulltxtfilename);
descr2 = des2;
frames2 = loc2;
do_match(I1, descr1, frames1, I2, descr2, frames2) ;
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:15:57.330

您可以轻松加载多个相同类型的图像，如下所示：

imgPath = '在此插入包含图片的文件夹'; dCell = dir([imgPath ' *.png']); % 注意：根据每个序列更改文件类型（* .png、*.bmp 或 *.jpg）

对于 d = 1:length(dCell) Seq{d} = imread([imgPath dCell(d).name]); 结尾

# mysql - 在 MySQL 中插入时自动更改日期格式

> ID：15656650
> 
> 赞同：1
> 
> 时间：2013-03-27T10:29:02.437
> 
> 标签：mysql, csv

我尝试将 csv 文件插入到 mysql 表中。文件中的一列具有如下日期格式：**3/15/2013 17:41:38**。是否可以插入列，并将日期格式更改为：**2013-03-15 17:41:38**？

之前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:39:47.413

您可以使用[STR_TO_DATE](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)进行插入，因此您可以输入：

```
STR_TO_DATE( '3/15/2013 17:41:38', '%c/%e/%Y %H:%i:%s' ) 
```

作为您的日期列。

格式是指输入字符串的格式，输出格式将是您需要的标准 MySQL 日期格式。

输出应为：

```
mysql> select STR_TO_DATE( '3/15/2013 17:41:38', '%c/%e/%Y %H:%i:%s' );
+----------------------------------------------------------+
| STR_TO_DATE( '3/15/2013 17:41:38', '%c/%e/%Y %H:%i:%s' ) |
+----------------------------------------------------------+
| 2013-03-15 17:41:38                                      |
+----------------------------------------------------------+
1 row in set (0.08 sec) 
```

# php - 部署到开发服务器时出现 Capifony 缓存错误

> ID：15656654
> 
> 赞同：3
> 
> 时间：2013-03-27T10:29:25.757
> 
> 标签：php, caching, symfony, capistrano, capifony

我正在尝试使用 capifony 将 Symfony2 应用程序部署到我在外部托管的开发服务器上，但是我收到以下错误：

```
--> Updating code base with remote_cache strategy
--> Creating cache directory................................✔
--> Creating symlinks for shared directories................✔
--> Creating symlinks for shared files......................✔
--> Copying Composer from previous release..................✔
--> Updating Composer.......................................✔
--> Updating Composer dependencies..........................✔
--> Building bootstrap file.................................✔
--> Dumping an optimized autoloader.........................✔
--> Installing bundle's assets..............................✔
--> Warming up cache........................................✔
--> Dumping all assets to the filesystem....................✘
*** [err :: x.xx.xx.xxx] PHP Fatal error:  Class 'Ivory\GoogleMap\Templating\Helper\Base\CoordinateHelper' not found in /var/www/dev.xyz.co.uk/shared/app/cache/dev/appDevProjectContainer.php on line 462 
```

我的部署脚本中是否缺少某些内容？这是我的 deploy.rb 文件：

```
set :stage_dir, 'app/config/deploy' # needed for Symfony2 only
set :stages, %w(production staging development)
require 'capistrano/ext/multistage'

set :application,           "xyz.co.uk"
set :user,                  "root"  # The server's user for deploys

set :normalize_asset_timestamps, false

set :repository,            "git@github.com:xyz/xyz.co.uk.git"
set :scm,                   :git
set :keep_releases,         3
set :use_sudo,              false
set :shared_files,          ["app/config/parameters.yml"]
set :web_path,              "web"
set :shared_children,       [app_path + "/logs", app_path + "/cache", web_path + "/uploads", "vendor"]
set :use_composer,          true
set :update_vendors,        true
set :dump_assetic_assets,   true
set :deploy_via,            :remote_cache

#logger.level = Logger::MAX_LEVEL 
```

这是我的 development.rb 文件：

```
server 'x.xx.xx.xxx', :app, :web, :db, :primary => true
ssh_options[:port] = xxxx
ssh_options[:forward_agent] = true
set :deploy_to, "/var/www/dev.xyz.co.uk"
set :symfony_env_prod, "dev"
set :branch, "develop"

# Need to clear *_dev controllers
set :clear_controllers,     false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:28:14.927

您不应该`app/cache`在版本之间共享。保持这样：

```
set :shared_files,        ["app/config/parameters.yml"]
set :shared_children,     [app_path + "/logs", web_path + "/uploads"] 
```

# base64 - BASE64DecoderStream 到文档（org.w3c.dom.Document）

> ID：15656668
> 
> 赞同：0
> 
> 时间：2013-03-27T10:30:11.467
> 
> 标签：base64, jakarta-mail, domdocument

我收到服务器电子邮件一个附件（XML），它是一个 InputStream，里面包含一个 BASE64DecoderStream，并想把它变成一个 BASE64DecoderStream 文档（org.w3c.dom.Document）供我研究我得到的 XML。

有人知道怎么转吗？

我已经很感激了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:18:30.737

您需要使用[javax.xml.parsers.DocumentBuilder](http://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilder.html)。创建一个[org.xml.sax.InputSource](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/InputSource.html)包装从 getContent() 方法获得的 InputStream，然后使用 DocumentBuilder.parse() 方法。您将在 javadocs 中找到有关 JAXP (javax.xml) API 的更多详细信息。

# python - 在 Python 中使用 PIL 分析图像

> ID：15656670
> 
> 赞同：0
> 
> 时间：2013-03-27T10:30:18.483
> 
> 标签：python, matplotlib, python-imaging-library

我找到了这段代码：

```
import PIL
from PIL import Image
from matplotlib import pyplot as plt

im = Image.open('./color_gradient.png')  
w, h = im.size  
colors = im.getcolors(w*h)

def hexencode(rgb):
 r=rgb[0]
 g=rgb[1]
 b=rgb[2]
 return '#%02x%02x%02x' % (r,g,b)

for idx, c in enumerate(colors):
    plt.bar(idx, c[0], color=hexencode(c[1]),edgecolor=hexencode(c[1]))
plot.show() 
```

对于确切的链接，可以在这里查看-[使用 matplotlib 绘制图像颜色直方图](https://stackoverflow.com/questions/12182891/plot-image-color-histogram-using-matplotlib)

我的问题是轴的含义是什么，如何生成这些值的表格？我想运行一些统计数据，比如图片中绿色或红色的百分比......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:52:38.800

来自[PIL 文档](http://effbot.org/imagingbook/image.htm)：

> **获取颜色**
> 
> im.getcolors() => （计数，颜色）元组列表或无
> 
> im.getcolors(maxcolors) => （计数，颜色）元组列表或无

参考图中的 Y 轴是该颜色的像素数，X 轴包含图中的（未排序的？）颜色列表。

# hadoop - HBase 中的 WAL 文件

> ID：15656671
> 
> 赞同：1
> 
> 时间：2013-03-27T10:30:19.513
> 
> 标签：hadoop, hbase

在写入 memstore 之前的 HBase 中，数据将首先写入 WAL，但是当我检查我的系统时，WAL 文件在每次**Put**操作后没有立即更新，更新需要很长时间。我需要设置什么参数吗？
（**WAL 已启用**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:22:19.487

你知道更新 WAL 文件需要多长时间吗？你确定时间是在写还是在你检查 WAL 时，它已经移到旧日志中了。如果启用了 WAL，则所有条目必须首先到达 WAL，然后按照集群配置写入特定区域。

我知道 WAL 文件移动到 .oldlogs 的速度相当快，即通过 hbase.master.logcleaner.ttl 设置在 hbase-site.xml 中定义的 60 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:20:29.093

在独立模式下写入 WAL 需要很多时间，而在伪分布式模式下它工作正常

# python - Django无法存储文件

> ID：15656675
> 
> 赞同：0
> 
> 时间：2013-03-27T10:30:30.623
> 
> 标签：python, django, image, python-imaging-library

我在尝试使用 django 上传图像时遇到问题。保存模型后，图像显示为已保存，但未存储在媒体文件夹中。这是我的代码：

```
class Post_Imagens(models.Model):
    """
    Imagens do Post
    """
    class Meta:
        verbose_name = u'Imagens do Post'
        verbose_name_plural = u'Imagens do Post'
        unique_together = ('post','imagem')

    post        = models.ForeignKey(Post, verbose_name = u'Post', related_name = 'imagens',null = False, blank = False,)
    imagem      = models.ImageField(verbose_name = u'Imagem', upload_to = u'dados/blog/imagens',null = False, blank = False, )

    def save(self):
        super(Post_Imagens, self).save()
        if self.imagem.width > 800 or self.imagem.height > 600:
            self.resize()

    def resize(self):
        filename = self.imagem.path
        imagem = Image.open(filename)
        width = 800.0
        height = 600.0
        im_width = imagem.size[0]
        im_height = imagem.size[1]

        base, ext = os.path.splitext(filename)
        imagem_filename = '%s%s' % (base, ext)

        if im_height > height:
            percent = height / im_height
            width2 = im_width * percent
            imagem = imagem.resize((width2,height), Image.ANTIALIAS)
            imagem.save(imagem_filename)

        im_width = imagem.size[0]
        im_height = imagem.size[1]

        if im_width > width:
            percent = width / im_width
            height2 = im_height * percent
            imagem = imagem.resize((width,height2), Image.ANTIALIAS)
            imagem.save(imagem_filename) 
```

当我尝试查看图像时，它会显示：

```
Request Method: GET
Request URL:    http://mysite.webfactional.com/media/myapp/dados/blog/imagens/my-image.jpg 
```

我的文件夹具有 tis 权限：

```
drwxrwxr-x 2 blablabla blablabla 4096 Mar 14 19:36 imagens 
```

# ajax - 使用本地 json 实现 Jquery 移动自动完成

> ID：15656688
> 
> 赞同：0
> 
> 时间：2013-03-27T10:30:46.740
> 
> 标签：ajax, json, jquery-mobile, jquery-autocomplete

我正在尝试实现 jquery 移动自动完成功能，因为我有一个大约 3000 个项目的列表。

我有一个具有这种结构的 json：

```
[{"v1":" abcd","v2":"http://www.url.nl","v3":0487,"v4":"street12","v5":"H"},
{"v1":" qq","v2":"http://www.url.nl","v3":0297,"v4":"street14","v5":"A"},
{"v1":" zz","v2":"http://www.url.nl","v3":0117,"v4":"street55","v5":"A"}] 
```

我正在使用这个例子：http: [//jquerymobile.com/demos/1.3.0-rc.1/docs/demos/widgets/autocomplete/autocomplete-remote.html](http://jquerymobile.com/demos/1.3.0-rc.1/docs/demos/widgets/autocomplete/autocomplete-remote.html)

但我无法让它与我的 json 文件一起使用。

```
 $( document ).on( "pageinit", "#myPage", function() {
        $( "#autocomplete" ).on( "listviewbeforefilter", function ( e, data ) {
            var $ul = $( this ),
                $input = $( data.input ),
                value = $input.val(),
                html = "";
            $ul.html( "" );
            if ( value && value.length > 2 ) {
                $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
                $ul.listview( "refresh" );
                $.ajax({
                    url: "http://gd.geobytes.com/AutoCompleteCity",
                    dataType: "jsonp",
                    crossDomain: true,
                    data: {
                        q: $input.val()
                    }
                })
                .then( function ( response ) {
                    $.each( response, function ( i, val ) {
                        html += "<li>" + val + "</li>";
                    });
                    $ul.html( html );
                    $ul.listview( "refresh" );
                    $ul.trigger( "updatelayout");
                });
            }
        });
    }); 
```

我觉得它必须与 ajax 调用和我的 json 文件有关，但我还没有找到解决方案。

# java - 以这种方式初始化非静态成员变量会有什么问题吗？

> ID：15656690
> 
> 赞同：2
> 
> 时间：2013-03-27T10:30:54.337
> 
> 标签：java, variables, static, initialization

我在下面的代码中初始化了变量，如下所示。可以这样初始化吗？

```
public class StaticInit {

    int x = getInt();
    String z = "Lucky Number " + processInt(x);

    public static int getInt() {
        int ret = 10;
        System.out.println("ret- " + ret);
        return ret;
    }

    public static int processInt(int toProcess) {
        int toRet = toProcess / 2;
        System.out.println("toRet- " + toRet);
        return toRet;
    }

    public static void main(String[] args) {
        StaticInit sit = new StaticInit();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:34:00.220

就个人而言，`getInt()`我只是在构造函数中初始化它，而不是拥有 。

除非您要在`getInt()`外部使用该函数，否则我看不出拥有它的意义，特别是因为它返回一个硬编码的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:33:16.030

您可以使用变量声明或在构造函数中进行初始化。有些人会争辩说，其中一个更好，但任何一个都有效。我相信构造函数中初始化的参数是所有变量初始化都在同一个地方，因为在某些情况下，并非所有东西都可以在构造函数之外初始化。

```
public class StaticInit {

    int x = getInt();
    String z = "Lucky Number " + processInt(x);

} 
```

或者

```
public class StaticInit {

    int x;
    String z;

    public StaticInit() {
        x = 10;
        z = x / 2;
    }
} 
```

**但对于这种情况**，我肯定会推荐使用构造函数，因为`z`依赖于`x`. 另外，构造函数比使用静态方法要好得多。

# html - Twitter / Facebook 分享动态网址

> ID：15656695
> 
> 赞同：2
> 
> 时间：2013-03-27T10:31:13.760
> 
> 标签：html, facebook, twitter, hyperlink, share

我正在尝试创建自定义共享链接，因此单击它将共享当前 URL。我明白这一点

```
<a href="http://twitter.com/share?text=An%20Awesome%20Link&url=http://www.google.com">
Share This on Twitter</a> 
```

但是有没有办法让它动态化，所以它会抓取用户所在页面的 URL 并共享它，而不是硬编码的链接。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:39:33.967

在 Javascript 中，您可以使用：

```
document.URL 
```

它为您提供当前网址

[https://developer.mozilla.org/en-US/docs/DOM/document.URL](https://developer.mozilla.org/en-US/docs/DOM/document.URL)

和

```
document.title 
```

用于获取此页面的标题

[https://developer.mozilla.org/en-US/docs/DOM/document.title](https://developer.mozilla.org/en-US/docs/DOM/document.title)

使用 jQuery 或 javascript，您可以设置 href 属性

[http://docs.jquery.com/Attributes/attr](http://docs.jquery.com/Attributes/attr)

[https://developer.mozilla.org/en-US/docs/DOM/stylesheet/href](https://developer.mozilla.org/en-US/docs/DOM/stylesheet/href)

例子：

```
$('a').on('click', function() {
    $(this).attr('href', 
        'http://twitter.com/share?text='+document.title+'&url=' + document.URL);
}); 
```

另一种方式：

[https://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:39:11.060

使用 jQuery：

```
$('a').on('click', function() {
    document.location = 'http://twitter.com/share?text=' + document.title + '&url=' + window.location.href;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:17:14.690

用这个

```
<a data-count='horizontal' expr:href='data:post.canonicalUrl' href='http://twitter.com/share' rel='nofollow' target='_blank'>Share on twitter</a> 
```

推杆 `expr:href='data:post.canonicalUrl'` 就行了。

尽管如此，twiiter 在[生成按钮时为您提供了一个选项](https://web.archive.org/web/20131104183617/https://twitter.com/about/resources/buttons#tweet) [（来源：][[ctrlv.in](https://img.ctrlv.in/img/51530000c7bdc.png)][）][![](../Images/655b34d9dd3f54e888a8ebc1f0ab977d.png)](https://i.stack.imgur.com/agUaU.png)

# python - Python的替代三元组

> ID：15656697
> 
> 赞同：3
> 
> 时间：2013-03-27T10:31:19.310
> 
> 标签：python, python-2.7

我想循环一个三维数组。有没有比以下更有效（或更快）的替代方法？

```
for i, j, k in itertools.product(*map(xrange, (len(x), len(y), len(z)))) 
```

在此示例中，x、y 和 z 是三个一维数组。

我的源代码是这样的，我不想要列表的值。

```
for i, j, k in itertools.product(*map(xrange, (len(x0), len(y0), len(z0)))):
       print "p[%d][%d][%d] = %d" % (x0[i], y0[j], z0[k], p[i][j][k]) 
```

`p`是 3d 阵列

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:36:42.960

为什么不直接遍历列表*本身*呢？

```
for i, j, k in itertools.product(x, y, z): 
```

您现在没有索引，您有实际值：

```
>>> x, y, z = range(3), range(3, 6), range(6, 9)
>>> for i, j, k in itertools.product(x, y, z):
...     print i, j, k
... 
0 3 6
0 3 7
0 3 8
0 4 6
# .. ~ ..
2 4 8
2 5 6
2 5 7
2 5 8 
```

如果您*也*必须有索引，只需使用`enumerate()`：

```
>>> for (ii, i), (jj, j), (kk, k) in itertools.product(*map(enumerate, (x, y, z))):
...     print (ii, i), (jj, j), (kk, k)
... 
(0, 0) (0, 3) (0, 6)
(0, 0) (0, 3) (1, 7)
(0, 0) (0, 3) (2, 8)
(0, 0) (1, 4) (0, 6)
# .. ~ ..
(2, 2) (1, 4) (2, 8)
(2, 2) (2, 5) (0, 6)
(2, 2) (2, 5) (1, 7)
(2, 2) (2, 5) (2, 8) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:58:20.303

你也可以这样做

```
for i in x:
  for j in y:
    for k in z:
      print i,j,k 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:07:03.747

您不需要 x、y 和 z 列表，因此以下遍历数组的方法（无论有无索引）在不使用它们的意义上都更有效：

```
import itertools
from pprint import pprint

W,H,D = 3,4,5
p = [[[k*W*H + j*W+i for i in xrange(3)] for j in xrange(4)] for k in xrange(5)]
assert (W,H,D) == (len(p[0][0]),len(p[0]),len(p))
pprint(p)

print
for i, j, k in itertools.product(xrange(D), xrange(H), xrange(W)):
    print "p[%d][%d][%d] = %d" % (i, j, k, p[i][j][k])
print
for i in xrange(D):
    for j in xrange(H):
        for k in xrange(W):
            print "p[%d][%d][%d] = %d" % (i, j, k, p[i][j][k])
print
for col in p:
    for row in col:
        for elem in row:
            print elem
print
for i, col in enumerate(p):
    for j, row in enumerate(col):
        for k, elem in enumerate(row):
            print "p[%d][%d][%d] = %d" % (i, j, k, elem) 
```

# objective-c - 我如何知道是否加载了 NIB 文件？

> ID：15656711
> 
> 赞同：0
> 
> 时间：2013-03-27T10:32:11.750
> 
> 标签：objective-c, xcode4.5, subclassing

我做了一系列的`UIView`子类。每个都是从另一个继承的。

在所有子类的祖父母中是这样的代码：

```
NSString * className = NSStringFromClass([self class]);
[[NSBundle mainBundle] loadNibNamed:className owner:self options:nil]; 
```

这段代码的问题在于并非所有子类都有自己的 NIB。有些人求助于使用其父类的NIB。

我想`UIView`在执行代码之前检查是否已从 NIB 加载。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:15:56.383

该代码不会像您预期的那样工作，抱歉：您用于`NSStringFromClass([self class])`获取 nib 名称，因此如果它不存在具有类名的 nib，它将不会加载并且对象将为 nil。NIB 中没有继承。当类名失败时，您可以尝试使用显式 nib 名称。就像是：

```
id myView = [[NSBundle mainBundle] loadNibNamed:className owner:self options:nil];
if (!myView)
    myView = [[NSBundle mainBundle] loadNibNamed:@"defaultNIBname" owner:self options:nil]; 
```

或者您可以获取所有对象层次结构类并全部尝试，直到找到一个NIB ..

# html - Css 浮动元素

> ID：15656713
> 
> 赞同：1
> 
> 时间：2013-03-27T10:32:26.213
> 
> 标签：html, css

不久前，一位朋友告诉我，正确的浮动元素应该放在我的文档中，但我想我误解了他试图告诉我的内容，我想知道是否有人可以解释为什么如果我首先拥有两个正确的浮动 div第一个左浮动 div 被清除并在第一个右浮动 div 之后上线？

这是一个没有按我想要的那样执行的片段（2 个左右浮动堆栈彼此相邻）

```
<div style="margin-left: auto; margin-right: auto; height: 600px; border: 1px solid black">
      <div style="width: 200px; height: 200px; background-color: red; float:right;"></div>
      <div style="width: 200px; height: 200px; background-color: green; float:right; clear: right"></div>

      <div style="width: 200px; height: 200px; background-color: yellow; float:left; clear: none"></div>
      <div style="width: 200px; height: 200px; background-color: purple; float:left; clear: left"></div>                   
  </div> 
```

[JSfiddle](http://jsfiddle.net/Q6rL7/)

在这里它可以按我的意愿工作，但我不得不在文档中移动元素的顺序：

```
<div style="margin-left: auto; margin-right: auto; height: 600px; border: 1px solid black">
      <div style="width: 200px; height: 200px; background-color: red; float:right;"></div>
      <div style="width: 200px; height: 200px; background-color: yellow; float:left; clear: none"></div>

      <div style="width: 200px; height: 200px; background-color: green; float:right; clear: right"></div>          
      <div style="width: 200px; height: 200px; background-color: purple; float:left; clear: left"></div>                   
  </div> 
```

[JSFiddle](http://jsfiddle.net/dED9v/)

抱歉，如果这个问题已经得到解答，我确定这是一个简单的问题，我想知道为什么我需要向右浮动，向左浮动，但是对于下一个浮动，左右浮动似乎并不重要第一的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:17:27.960

**关于浮点数的快速教程**

我设置了一些示例并在[http://jsfiddle.net/audetwebdesign/xJSGZ/提供了一个小提琴](http://jsfiddle.net/audetwebdesign/xJSGZ/)

我将依次对每一个进行评论，以说明元素的布局方式。

在 Ex 1 中，没有浮点数，因为每个都是块元素，所以方块一个接一个地堆叠在一起。

```
<h3>Example 1 - no floats</h3>
<div class="wrapper">
      <div class="square" style="background-color: red;"><b>1</b></div>
      <div class="square" style="background-color: green;"><b>2</b></div>
      <div class="square" style="background-color: yellow;"><b>3</b></div>
      <div class="square" style="background-color: purple;"><b>4</b></div>
</div> 
```

在 Ex 2 中，我将 div #2 浮动到右侧。在这种情况下，将 div #2 从文档流中取出并强制向右移动，而 div #3 在 div #1 之后立即流入。

```
<h3>Example 2 - float right element #2</h3>
<div class="wrapper">
      <div class="square" style="background-color: red;"><b>1</b></div>
      <div class="square" style="background-color: green; float: right;"><b>2</b></div>
      <div class="square" style="background-color: yellow;"><b>3</b></div>
      <div class="square" style="background-color: purple;"><b>4</b></div>
</div> 
```

在 Ex 3 中，我将 div #4 浮动到右侧。由于 div #4 在文档流中位于 div #3 之后，因此 div #4 位于其自己的行中。

```
<h3>Example 3 - float right element #2 and #4</h3>
<div class="wrapper">
      <div class="square" style="background-color: red;"><b>1</b></div>
      <div class="square" style="background-color: green; float: right;"><b>2</b></div>
      <div class="square" style="background-color: yellow;"><b>3</b></div>
      <div class="square" style="background-color: purple; float: right;"><b>4</b></div>
</div> 
```

在 Ex 4 中，我将 div #1 和 #2 浮动到右侧。这两个都从流中取出并定位在右侧。以下两个元素，div #3 和 #4 流入。我`clear: right`在 div #2 中使用强制它开始一个新行。

```
<h3>Example 4 - float right element #1 and #2</h3>
<div class="wrapper">
      <div class="square" style="background-color: red; float: right;"><b>1</b></div>
      <div class="square" style="background-color: green; float: right; clear: right;"><b>2</b></div>
      <div class="square" style="background-color: yellow;"><b>3</b></div>
      <div class="square" style="background-color: purple;"><b>4</b></div>
</div> 
```

但是，要获得左侧的 #1 和 #2 以及右侧的 #3 和 #4，请创建一个内部包装器并将内部包装器 div 分别向左和向右浮动：

```
<h3>Example 5 -  float nested div's</h3>
<div class="wrapper">
    <div class="inner-wrapper" style="float:left;">
       <div class="square" style="background-color: red;"><b>1</b></div>
       <div class="square" style="background-color: green;"><b>2</b></div>
    </div>
    <div class="inner-wrapper" style="float: right;">
      <div class="square" style="background-color: yellow;"><b>3</b></div>
      <div class="square" style="background-color: purple;"><b>4</b></div>
    </div>
</div> 
```

这些示例让您了解使用浮动定位元素的灵活性和局限性。元素的顺序确实会有所不同，因为浮动元素会改变浏览器构建页面布局的顺序。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:04:54.860

事实是：浮动的元素将占用它之前的浮动元素剩余的剩余空间。所以，如果它们不是连续放置的，你就不能得到两个元素（一个右边和另一个左边）的平行。

例子：

`div1`如果也浮动，您将无法获得`div2`水平平行`otherdiv`。

```
<div id="div1"></div>
<div id="otherdiv"></div>
<div id="div2"></div> 
```

# facebook - 从 Windows Phone 发送 Facebook 应用请求

> ID：15656723
> 
> 赞同：1
> 
> 时间：2013-03-27T10:32:49.870
> 
> 标签：facebook, windows-phone-7

我正在尝试从我的 Windows Phone 7.5 应用程序向 Facebook 朋友发送一个 apprequest，以邀请该朋友玩游戏。根据 Facebook 的官方文档，应通过对话框执行请求： [https ://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

不幸的是，我无法让它在 Windows Phone 上工作/显示。

是否有另一种方法可以向已知的 facebook 用户发送 apprequest（我只需要将其发送给一个用户）？

我已经通过调用以下代码进行了测试：

```
FacebookClient fb = new FacebookClient(_appAccessTooken);

var arguments = new Dictionary<string, object>();
arguments["appId"] = Consts.FaceBookAppID;
arguments["title"] = "Play a gameround!";
arguments["message"] = "Would you like to play with me?";
fb.PostAsync("/user-id/apprequests", arguments); 
```

这有效，但是：

1) 用户不会得到适当的通知，它只会在 Applicationcenter 通知中可见。

2）请求将来自应用程序名称，而不是来自我（用户）

有谁知道如何让这个工作？我正在使用 Facebook SDK for .NET ( [http://facebooksdk.net/](http://facebooksdk.net/) )

提前致谢。

# c# - C# - 将属性值附加到一个变量的 LINQ to Entity 查询

> ID：15656724
> 
> 赞同：0
> 
> 时间：2013-03-27T10:32:52.637
> 
> 标签：c#, linq-to-entities

我有这个查询：

```
var sole = SoleService.All().Where(c => c.Status != 250)
               .Select(x => new { 
                    ID = x.ID, Code = new {CodeName = x.Code + x.Country}, 
                    Name = x.Name 
               })
               .Distinct()
               .OrderBy(s => s.Code); 
```

像这样它给了我一个错误。我想要的是组合`Code`并`Country`喜欢 concat 字符串，以便我可以将新变量用于我的数据源。就像是 -`001France`

附言

我正在使用并且现在正在工作的是：

```
var sole = SoleService.All().Where(c => c.Status != 250)
               .Select(x => new { 
                   ID = x.ID, Code = x.Code, Name = x.Name, Country = x.Country })
               .Distinct()
               .OrderBy(s => s.Code); 
```

所以我需要修改这个查询，以便我可以将`Code +Country`其用作一个变量。以上只是我认为可行的尝试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:42:49.290

好像：

```
 var sole = SoleService.All().Where(c => c.Status != 250)
                .AsEnumerable()
                .Select(x => new { 
                                ID = x.ID, 
                                Code = x.Code + x.Country, 
                                Name = x.Name
                                })
                .Distinct()
                .OrderBy(s => s.Code); 
```

您根本不需要内部匿名类型。如果您正在使用 EF，`+`则不支持正弦字符串，请`AsEnumerable`在选择之前调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:43:35.333

您无法排序，`s.Code`因为它是匿名类型的实例。我会去

```
var sole = SoleService.All().Where(c => c.Status != 250)
        .Select(x => new { ID = x.ID, Code = new {CodeName = x.Code + x.Country}, Name = x.Name })
        .Distinct()
        .OrderBy(s => s.Code.CodeName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:44:18.537

尝试添加 .toString() 因为问题应该是 + 运算符相信您尝试添加数字属性...

像那样 ：

```
 var sole = SoleService.All().Where(c => c.Status != 250)
        .Select(x => new { ID = x.ID, Code = new {CodeName = x.Code.ToString() + x.Country.ToString()}, Name = x.Name })
        .Distinct()
        .OrderBy(s => s.Code); 
```

# mysql - 为什么 find_in_set 有效但 IN 子句

> ID：15656740
> 
> 赞同：3
> 
> 时间：2013-03-27T10:33:50.750
> 
> 标签：mysql, sql, select

我有这样的代码。

```
DELIMITER $$
    CREATE PROCEDURE `sp_deleteOrderData`(orderid BIGINT(11))
    BEGIN
        DECLARE shipmentnumbers VARCHAR(1000);
        DECLARE cartonid VARCHAR(1000);

        SELECT GROUP_CONCAT(a_shipmentid) FROM t_shipment WHERE a_orderid = orderid INTO shipmentnumbers;

        SELECT GROUP_CONCAT(a_cartonid) FROM t_carton WHERE a_shipmentid IN (shipmentnumbers) INTO cartonid;

    SELECT shipmentnumbers;
    /*SELECT  cartonid;  */
    END$$

    DELIMITER ; 
```

这里 shippingnumbers 返回`100020,100021,100022` 理想情况下 cartonid 应返回为`11,12,13`

但我只有 11 个作为 cartonid。

但是当我使用下面的代码时，我得到了正确的结果。

```
 SELECT GROUP_CONCAT(a_cartonid) FROM t_carton WHERE FIND_IN_SET( a_shipmentid, shipmentnumbers ) INTO cartonid; 
```

我想知道 IN 和 FIND_IN_SET 之间到底有什么区别，我决定使用什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:36:29.407

`IN`接受要搜索的列表或参数，`FIND_IN_SET`接受包含逗号分隔列表的字符串参数：

```
SELECT  1 IN (1, 2, 3, 4)

SELECT  FIND_IN_SET(1, '1,2,3,4') 
```

如果您尝试应用`IN`到一个逗号分隔的字符串，它会将其视为单个参数，并将其作为一个整体进行匹配：

```
SELECT  1 IN ('1,2,3,4') 
```

当然，字符串`'1'`不等于字符串`'1,2,3,4'`，所以上面的查询返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:36:28.767

`FIND_IN_SET`在由逗号分隔的一组字符串中搜索一个字符串。

*   [MySQL FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

但是您不需要使用`GROUP_CONCAT`来连接要在`IN`子句中使用的行，试试这个，

```
SELECT  GROUP_CONCAT(a_cartonid) 
FROM    t_carton
WHERE   a_shipmentid IN
         (
            SELECT a_shipmentid
            FROM t_shipment 
            WHERE a_orderid = orderid
         ) 
```

或使用`JOIN`

```
SELECT  GROUP_CONCAT(DISTINCT a.a_cartonid) 
FROM    t_carton a
        INNER JOIN
        (
            SELECT a_shipmentid
            FROM t_shipment 
            WHERE a_orderid = orderid
        ) b ON a.a_shipmentid = b.a_shipmentid 
```

# excel - CountIf 条件比较日期

> ID：15656741
> 
> 赞同：1
> 
> 时间：2013-03-27T10:33:51.867
> 
> 标签：excel, excel-2007, countif

我正在尝试从条件`C2:C1700`所在的范围创建一个 CountIf 函数`00/01/1900 or 0`。我范围内的单元格都是检索日期的公式。（如果单元格为空白，则为 0，如果单元格正确，则为 4235）。我正在使用格式来显示日期`yyyy-mm-dd`（如果有区别的话）。

```
Cell: C2 = [path]Sheet1!X2 - Value = 0 
Cell: C3 = [path]Sheet1!X3 - Value = 4235
Cell: C4 = [path]Sheet1!X4 - Value = 0
Cell: C5 = [path]Sheet1!X5 - Value = 0 
```

现在在我的工作表中，我想创建一个`=COUNTIF('[path]Orders'!$C$2:$C$1700;0)`，但我似乎无法获得正确的公式。要么`0`要么`#VALUE`。我也尝试过`TEXT()`格式化`DATE()`我的标准，但没有一个奏效。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:56:04.450

Here is the formula you need, this is an array formula so you have to finish it off by pressing Ctrl + Shift + Enter.

```
=SUM(IF($C$2:$C$1700=0,1,0)) 
```

To check for additional conditions such as blanks just add nested IFs like so:

```
=SUM(IF($C$2:$C$1700=0,1,IF($C$2:$C$1700="",1,0))) 
```

# php - 不要在 preg_replace 中的括号之间替换？

> ID：15656743
> 
> 赞同：1
> 
> 时间：2013-03-27T10:33:53.417
> 
> 标签：php, regex

替换仅在括号外而不在括号内的文本。

**我试过这样**

```
 $pro_name = samsung galaxy s3 (s3);
    $new_pro_name = preg_replace("/\b(s3)\b/i",***s5****,$pro_name);
    echo $new_pro_name; 
```

**预期结果：**

```
samsung galaxy ***s5**** (s3) 
```

**输出：** `samsung galaxy ***s5*** (***s5***)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:54:27.453

使用负回溯和前瞻[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

我们可以使用以下内容：

```
$pro_name = 'samsung galaxy s3 (s3)';
$new_pro_name = preg_replace("/(?<!\()s3(?!\))/i", '***s5****', $pro_name);
echo $new_pro_name; 
```

注意`(?<!x)`回顾不能是'x'的前一个字符。在你的情况下，这需要`(`但是因为这是一个特殊字符，它需要被转义为`\(`

并且`(?!x)`正在寻找不是 x 的字符。

有关 REGEX 中使用的特殊字符的细分，请参阅 php 的`preg_quote();` [http://php.net/manual/en/function.preg-quote.php](http://php.net/manual/en/function.preg-quote.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:36:42.257

`(`并`)`在正则表达式中有含义，尝试使用`\(`and转义它们`\)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:49:28.363

尝试这个：`s3+(?=[^()]*(\(|$))`

它使用前瞻来确认括号。

例子：

```
$pro_name = samsung galaxy s3 (s3);
$new_pro_name = preg_replace("/s3+(?=[^()]*(\(|$))/g", 's5', $pro_name);
echo $new_pro_name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T10:42:12.447

尝试这个 ：

```
 $pro_name     = "samsung galaxy s3 (s3)";
  $new_pro_name = preg_replace("/(.*)s3(.*)\((.*)\)/i","$1s5$2($3)",$pro_name);
  echo $new_pro_name; 
```

输出 ：`samsung galaxy s5 (s3)`

参考： http: [//php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

# javascript - 数据（“自动完成”）在 TypeScript 中未定义

> ID：15656747
> 
> 赞同：1
> 
> 时间：2013-03-27T10:33:58.853
> 
> 标签：javascript, jquery, jquery-autocomplete, jquery-ui-autocomplete, typescript

我在我的应用程序中使用此代码（覆盖`_renderItem`）；

```
var ac: JQuery = $("<input/>");
ac.addClass(this._autocompleteId);
ac.appendTo(container);
ac.autocomplete(options);

var renderItem = (ul: JQuery, item: Label) => {
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append($("<a></a>").html(item.label))
        .appendTo(ul);
};

ac.data("autocomplete")._renderItem = renderItem; 
```

而问题`ac.data("autocomplete")`是`undefined`。我不知道为什么，因为我以前使用过这段代码。在我更新`JQuery 1.8`并`JQueruUI 1.9`库到最新版本后出现该错误......

**[编辑]**

好的，我已经找到了解决方案。在新版本中`JQueryUI`，`autocomplete`改为`ui-autocomplete`. 所以它有效：

```
ac.data("ui-autocomplete")._renderItem = renderItem; 
```

我离开这个帖子，因为将来有人可能需要这个:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T08:13:34.970

好的，我已经找到了解决方案。在新版本中`JQueryUI`，`autocomplete`改为`ui-autocomplete`. 所以它有效：

```
ac.data("ui-autocomplete")._renderItem = renderItem; 
```

# symfony - 如何在 Symfony2 中让 bundle 通信

> ID：15656748
> 
> 赞同：0
> 
> 时间：2013-03-27T10:33:58.943
> 
> 标签：symfony, structure, bundle

我正在制作一个管理菜单包。我希望其他包能够将菜单项添加到包中，但我也希望在删除包时删除菜单项。最好的方法是什么？

我可以创建一个“重新生成管理菜单”操作，扫描所有捆绑包中的某个 YML，然后将其存储在缓存或数据库中。

有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:15:00.237

您可以使用[标签](http://symfony.com/doc/current/components/dependency_injection/tags.html)从其他捆绑包（甚至相同）中查找服务，并使用它们在[compiler pass](http://symfony.com/doc/current/cookbook/service_container/compiler_passes.html)中从它们构建菜单。

在本例中，我假设您将菜单定义为服务（我将使用 service id `acme_menu.menu`）。

```
// src/Acme/MenuBundle/DependencyInjection/Compiler/BuildMenuCompilerPass.php
namespace Acme\MenuBundle\DependencyInjection\Compiler;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\Reference;

class BuildMenuCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        if (!$container->hasDefinition('acme_menu.menu')) {
            return;
        }

        $definition = $container->getDefinition('acme_menu.menu');

        $taggedServices = $container->findTaggedServiceIds('acme_menu.item');
        foreach ($taggedServices as $id => $attributes) {
            $definition->addMethodCall(
                'addMenuItem',
                array(new Reference($id))
            );
        }
    }
} 
```

将其注册到您的菜单包中：

```
// src/Acme/MenuBundle/AcmeMenuBundle.php
namespace Acme\MenuBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;
use Symfony\Component\DependencyInjection\ContainerBuilder;

use Acme\MenuBundle\DependencyInjection\Compiler\BuildMenuCompilerPass;

class AcmeMenuBundle extends Bundle
{
    public function build(ContainerBuilder $container)
    {
        parent::build($container);

        $container->addCompilerPass(new BuildMenuCompilerPass());
    }
} 
```

并且每个标记为的服务`acme_menu.item`都将被添加到菜单中——它们的方法`addMenuItem`将在菜单上被调用，并以标记的服务作为参数。所以简单定义：

```
# services.yml
services:
    acme_demo.menu.item1:
        # ...
        tags:
            - { name: acme_menu.item }
    acme_demo.menu.item2:
        # ...
        tags:
            - { name: acme_menu.item } 
```

# hadoop - 不处理已处理的文件？

> ID：15656758
> 
> 赞同：0
> 
> 时间：2013-03-27T10:34:56.080
> 
> 标签：hadoop, mapreduce, apache-pig

在我们的系统中，我们有多个针对特定 HDFS 目录运行的 pig 脚本。pig 脚本可以在不同的时间运行，并被安排定期运行。

有没有办法将猪脚本指向同一目录以进行多次执行，但要确保它只处理以前未见过的新文件？

我正在考虑为我的加载器使用自定义 PathFilter，但我想我会问是否已经有办法做到这一点，而不是我重新发明轮子（！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:28:37.200

您是否尝试在处理完成后将文件移动到已处理的目录。

# user-interface - 自动滚动垂直字段管理器

> ID：15656763
> 
> 赞同：1
> 
> 时间：2013-03-27T10:35:32.067
> 
> 标签：user-interface, blackberry, scroll, autoscroll

我开发了一个带有简单聊天功能的 BlackBerry 应用程序。`Vertical Field Manager (VFM)`当用户单击时，聊天消息出现在 a中`Send`。用户可以发送多条消息。发送的每条新消息都显示在旧消息下方。这样一来，规模`Vertical Field Manager`不断扩大。我创建了一个可滚动的`VFM`，因此用户可以查看通过向下滚动发送的最新消息。**发送消息时是否可以自动滚动到 VFM 底部，以便将焦点设置在最后一条消息上？**

我也试过打电话`vfm.setVerticalScroll(int y);`，`LabelField chat1 = new LabelField( "Hi", Field.FIELD_LEFT|Field.FOCUSABLE);`但这没有帮助。请指导。

`vr2`= 垂直现场经理

`chat1`= 聊天消息添加到 VFM

* * *

**编辑**：我在 StackOverFlow 上看到了[这个](https://stackoverflow.com/questions/15401993/how-to-create-custom-scrolling-always-start-from-bottom)链接，并在我的代码中应用了如下更改：

```
vr2.setVerticalScroll(vr2.getVirtualHeight());
LabelField chat1 = new LabelField( "Hi", Field.FIELD_LEFT)
{
 protected void applyTheme(Graphics g, boolean arg1) 
     {
        g.setColor(Color.DEEPSKYBLUE);
        super.applyTheme(g, arg1);
     }
};
Font myFont = Font.getDefault().derive(Font.BOLD, 8, Ui.UNITS_pt);
chat1.setFont(myFont);
chat1.setBorder( leftBorder );
chat1.setMargin( 0, 0, -15, 0);
vr2.setBorder(bdr);
vr2.add(chat1);
Field f;
int i = vr2.getFieldCount();
f = vr2.getField(i-1);  //getFieldCount, gets total number of fields
f.setFocus(); 
```

这使我非常接近我正在寻找的解决方案。VFM 滚动低于正常值。但是，它不是定位到 VFM 中的最后一条消息，而是每次滚动到倒数第二条消息。为什么会这样？它应该滚动到 VFM 中的最后一条消息；就在 VFM 的底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:58:02.927

我终于设法解决了这个问题。如果还有其他人遇到这样的问题，我会分享我的答案。虽然我上面问题中的编辑帮助我更接近解决方案，但我发现错误在于没有`vr2.setVerticalScroll(vr2.getVirtualHeight());`在正确的地方打电话。

有关详细信息，请在 stackoverflow 和黑莓支持论坛上[查看](http://supportforums.blackberry.com/t5/Java-Development/Press-t-scroll-to-top-and-b-scroll-to-bottom/td-p/418941)[此问题。](https://stackoverflow.com/questions/15401993/how-to-create-custom-scrolling-always-start-from-bottom)解决方法如下：

```
LabelField chat1 = new LabelField( "Hi", Field.FIELD_LEFT)
{
 protected void applyTheme(Graphics g, boolean arg1) 
     {
        g.setColor(Color.DEEPSKYBLUE);
        super.applyTheme(g, arg1);
     }
};

Font myFont = Font.getDefault().derive(Font.BOLD, 8, Ui.UNITS_pt);
chat1.setFont(myFont);
chat1.setBorder( leftBorder );
chat1.setMargin( 0, 0, -15, 0);
vr2.setBorder(bdr);
vr2.setVerticalScroll(vr2.getVirtualHeight()); //scrolls to the bottom of the vertical field manager
vr2.add(chat1);
Field f;
int i = vr2.getFieldCount();
f = vr2.getField(i-1);  //getFieldCount, gets total number of fields
f.setFocus(); //sets focus on the newly added field 
```

# java - 在 Java 中解析 JSON 字符串

> ID：15656765
> 
> 赞同：1
> 
> 时间：2013-03-27T10:35:38.340
> 
> 标签：java, json

我有一个格式为 JSON 的字符串

> {"id":100,"昵称":"yash","name":"Rahul"}

我得到了下面的代码：

```
import java.io.IOException;
import java.io.StringWriter;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.JSONValue;

    public class Json {
        public static void main(String str[]) throws IOException
        {

          JSONObject obj=new JSONObject();
          obj.put("name","Rahul");
          obj.put("id",100);
          obj.put("nickname","yash");
          StringWriter out = new StringWriter();
          obj.writeJSONString(out);
          String jsonText = out.toString();
          System.out.println(jsonText);
            }
    } 
```

现在，我如何解析这个 JSON 字符串并获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:49:12.913

使用**JSONObject.get()**方法像这样：

```
 String name = (String) obj.get("name");
    int ID = Integer.parseInt((String) obj.get("id"));
    String nickname = (String) obj.get("nickname");

    System.out.println("Name=  " + name);
    System.out.println("ID=  " + ID );
    System.out.println("nickname=" + nickname); 
```

# c# - 是否存在在实体 ref 中可以在 sql 中插入多行的场景

> ID：15656768
> 
> 赞同：0
> 
> 时间：2013-03-27T10:35:48.843
> 
> 标签：c#, sql, entity-framework

在 SQL 中，如果我们声明 entity ref 表示，在 DB 操作期间是否有可能为 entityref 类插入多行？

# c# - 如何从视图中显示像弹出窗口这样的图像

> ID：15656774
> 
> 赞同：1
> 
> 时间：2013-03-27T10:35:59.707
> 
> 标签：c#, jquery, asp.net-mvc-3, fileresult

我在单击按钮时使用**MessagingToolkit.QRCode.dll**创建了一个二维码图像。我已将图像保存在磁盘中。如何将图像与视图分开显示为弹出窗口？
**这是我的控制器代码：**

```
[HttpPost]
 public ActionResult GenerateQR(string Command, FormCollection collection)
    {
    // qr code logic //
       QRCodeEncoder encoder = new QRCodeEncoder();
       Bitmap img = encoder.Encode(qrcode);
       img.Save(@"D:\\Capture.png", ImageFormat.Jpeg);
    // Checking the image present in the filepath and displaying the image.
       string filePath = @"D:\\Capture.png";
       if (!System.IO.File.Exists(filePath))
          return Content("<script language='javascript' type='text/javascript'>alert('The Image is not available.');</script>");
       else
          return new FilePathResult(filePath, "image/png");
    } 
```

此处图像完全显示在视图中。如何将图像显示为与视图分开的弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:52:08.980

Instead of bringing like a popup, I got the image directly from using the below code.

```
QRCodeEncoder encoder = new QRCodeEncoder();
Bitmap img = encoder.Encode(qrcode);
string path = Server.MapPath(@"/Images/QRCode.jpg");        
img.Save(path, ImageFormat.Jpeg);        
return base.File(path,"image/jpeg","QRCode.jpg"); 
```

# php - Zend Framework 2 - 为表单元素设置前缀

> ID：15656776
> 
> 赞同：0
> 
> 时间：2013-03-27T10:36:17.370
> 
> 标签：php, forms, zend-framework2, zend-form, prefix

我正在寻找一种为特定形式的每个元素添加前缀的方法。

如果发现[这篇文章](https://stackoverflow.com/a/9796828/1331671)告诉我有一个`elementsBelongTo`选项可以用来实现我想要的。

不幸的是，我找不到任何解释用法的文档。有谁知道我可以如何使用这个选项？如果它还在 ZF2 中？

此外：我有办法将它与 nice 结合起来`AnnotationForms`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:30:31.820

不知道它是否会有所帮助，但是您可以使用表单/字段集名称将元素包装在表单或字段集中，而不是前缀。

您只需要有一个表单名称或设置它，然后使用 setWrapElements

```
$form->setName('some_name');
$form->setWrapElements(true);
$form->prepare(); 
```

从这一点开始元素的全名，例如'password'将是“some_name ['password']”

如果您正在使用注释，则可以将其与 ComposedObject 组合使用。这里解释得很好：http: [//devblog.x2k.co.uk/using-the-composedobject-zend-framework-2-form-annotation/](http://devblog.x2k.co.uk/using-the-composedobject-zend-framework-2-form-annotation/)

马丁

# jquery - 如何在 jQuery 中更改日期格式？

> ID：15656778
> 
> 赞同：0
> 
> 时间：2013-03-27T10:36:20.357
> 
> 标签：jquery, date, datepicker

我只想更改我网站上的日期格式。实际上，目前我得到的结果是这样的：（2013 年 3 月 14 日星期四），我想这样改变它：（2013-03-14）请帮忙

我的代码是： **在 HTML 上**

```
<input type="text" id="date_from" name="date_from" >

var picker = new Pikaday(
{
    field: document.getElementById('date_from'),
    firstDay: 1,
    yearRange: [2013,2015],

});

var picker = new Pikaday(
{
    field: document.getElementById('date_to'),
    firstDay: 1,
    yearRange: [2013,2015],

}); 
```

**结束 HTML**

**包含文件 (pikaday.js)**

```
(function(window, document, undefined)
{
'use strict';

/**
 * feature detection and helper functions
 */
var hasMoment = typeof window.moment === 'function',

hasEventListeners = !!window.addEventListener,

sto = window.setTimeout,

addEvent = function(el, e, callback, capture)
{
    if (hasEventListeners) {
        el.addEventListener(e, callback, !!capture);
    } else {
        el.attachEvent('on' + e, callback);
    }
},

removeEvent = function(el, e, callback, capture)
{
    if (hasEventListeners) {
        el.removeEventListener(e, callback, !!capture);
    } else {
        el.detachEvent('on' + e, callback);
    }
},

fireEvent = function(el, eventName, data)
{
    var ev;

    if (document.createEvent) {
        ev = document.createEvent('HTMLEvents');
        ev.initEvent(eventName, true, false);
        ev = extend(ev, data);
        el.dispatchEvent(ev);
    } else if (document.createEventObject) {
        ev = document.createEventObject();
        ev = extend(ev, data);
        el.fireEvent('on' + eventName, ev);
    }
},

trim = function(str)
{
    return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g,'');
},

hasClass = function(el, cn)
{
    return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;
},

addClass = function(el, cn)
{
    if (!hasClass(el, cn)) {
        el.className = (el.className === '') ? cn : el.className + ' ' + cn;
    }
},

removeClass = function(el, cn)
{
    el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));
},

isArray = function(obj)
{
    return (/Array/).test(Object.prototype.toString.call(obj));
},

isDate = function(obj)
{
    return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());
},

isLeapYear = function(year)
{
    // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951
    return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
},

getDaysInMonth = function(year, month)
{
    return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
},

setToStartOfDay = function(date)
{
    if (isDate(date)) date.setHours(0,0,0,0);
},

compareDates = function(a,b)
{
    // weak date comparison (use setToStartOfDay(date) to ensure correct result)
    return a.getTime() === b.getTime();
},

extend = function(to, from, overwrite)
{
    var prop, hasProp;
    for (prop in from) {
        hasProp = to[prop] !== undefined;
        if (hasProp && typeof from[prop] === 'object' && from[prop].nodeName === undefined) {
            if (isDate(from[prop])) {
                if (overwrite) {
                    to[prop] = new Date(from[prop].getTime());
                }
            }
            else if (isArray(from[prop])) {
                if (overwrite) {
                    to[prop] = from[prop].slice(0);
                }
            } else {
                to[prop] = extend({}, from[prop], overwrite);
            }
        } else if (overwrite || !hasProp) {
            to[prop] = from[prop];
        }
    }
    return to;
},

/**
 * defaults and localisation
 */
defaults = {

    // bind the picker to a form field
    field: null,

    // automatically show/hide the picker on `field` focus (default `true` if `field` is set)
    bound: undefined,

    // the default output format for `.toString()` and `field` value
    format: 'YYYY-MM-DD',

    // the initial date to view when first opened
    defaultDate: null,

    // make the `defaultDate` the initial selected value
    setDefaultDate: false,

    // first day of week (0: Sunday, 1: Monday etc)
    firstDay: 0,

    // the minimum/earliest date that can be selected
    minDate: null,
    // the maximum/latest date that can be selected
    maxDate: null,

    // number of years either side, or array of upper/lower range
    yearRange: 10,

    // used internally (don't config outside)
    minYear: 0,
    maxYear: 9999,
    minMonth: undefined,
    maxMonth: undefined,

    isRTL: false,

    // how many months are visible (not implemented yet)
    numberOfMonths: 1,

    // internationalization
    i18n: {
        previousMonth : 'Previous Month',
        nextMonth     : 'Next Month',
        months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],
        weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],
        weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']
    },

    // callback function
    onSelect: null,
    onOpen: null,
    onClose: null,
    onDraw: null
},

/**
 * templating functions to abstract HTML rendering
 */
renderDayName = function(opts, day, abbr)
{
    day += opts.firstDay;
    while (day >= 7) {
        day -= 7;
    }
    return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];
},

renderDay = function(i, isSelected, isToday, isDisabled, isEmpty)
{
    if (isEmpty) {
        return '<td class="is-empty"></td>';
    }
    var arr = [];
    if (isDisabled) {
        arr.push('is-disabled');
    }
    if (isToday) {
        arr.push('is-today');
    }
    if (isSelected) {
        arr.push('is-selected');
    }
    return '<td data-day="' + i + '" class="' + arr.join(' ') + '"><button class="pika-button" type="button">' + i + '</button>' + '</td>';
},

renderRow = function(days, isRTL)
{
    return '<tr>' + (isRTL ? days.reverse() : days).join('') + '</tr>';
},

renderBody = function(rows)
{
    return '<tbody>' + rows.join('') + '</tbody>';
},

renderHead = function(opts)
{
    var i, arr = [];
    for (i = 0; i < 7; i++) {
        arr.push('<th scope="col"><abbr title="' + renderDayName(opts, i) + '">' + renderDayName(opts, i, true) + '</abbr></th>');
    }
    return '<thead>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</thead>';
},

renderTitle = function(instance)
{
    var i, j, arr,
        opts = instance._o,
        month = instance._m,
        year  = instance._y,
        isMinYear = year === opts.minYear,
        isMaxYear = year === opts.maxYear,
        html = '<div class="pika-title">',
        prev = true,
        next = true;

    for (arr = [], i = 0; i < 12; i++) {
        arr.push('<option value="' + i + '"' +
            (i === month ? ' selected': '') +
            ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled' : '') + '>' +
            opts.i18n.months[i] + '</option>');
    }
    html += '<div class="pika-label">' + opts.i18n.months[month] + '<select class="pika-select pika-select-month">' + arr.join('') + '</select></div>';

    if (isArray(opts.yearRange)) {
        i = opts.yearRange[0];
        j = opts.yearRange[1] + 1;
    } else {
        i = year - opts.yearRange;
        j = 1 + year + opts.yearRange;
    }

    for (arr = []; i < j && i <= opts.maxYear; i++) {
        if (i >= opts.minYear) {
            arr.push('<option value="' + i + '"' + (i === year ? ' selected': '') + '>' + (i) + '</option>');
        }
    }
    html += '<div class="pika-label">' + year + '<select class="pika-select pika-select-year">' + arr.join('') + '</select></div>';

    if (isMinYear && (month === 0 || opts.minMonth >= month)) {
        prev = false;
    }

    if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {
        next = false;
    }

    html += '<button class="pika-prev' + (prev ? '' : ' is-disabled') + '" type="button">' + opts.i18n.previousMonth + '</button>';
    html += '<button class="pika-next' + (next ? '' : ' is-disabled') + '" type="button">' + opts.i18n.nextMonth + '</button>';

    return html += '</div>';
},

renderTable = function(opts, data)
{
    return '<table cellpadding="0" cellspacing="0" class="pika-table">' + renderHead(opts) + renderBody(data) + '</table>';
};

/**
 * Pikaday constructor
 */
window.Pikaday = function(options)
{
    var self = this,
        opts = self.config(options);

    self._onMouseDown = function(e)
    {
        if (!self._v) {
            return;
        }
        e = e || window.event;
        var target = e.target || e.srcElement;
        if (!target) {
            return;
        }

        if (!hasClass(target, 'is-disabled')) {
            if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty')) {
                self.setDate(new Date(self._y, self._m, parseInt(target.innerHTML, 10)));
                if (opts.bound) {
                    sto(function() {
                        self.hide();
                    }, 100);
                }
                return;
            }
            else if (hasClass(target, 'pika-prev')) {
                self.prevMonth();
            }
            else if (hasClass(target, 'pika-next')) {
                self.nextMonth();
            }
        }
        if (!hasClass(target, 'pika-select')) {
            if (e.preventDefault) {
                e.preventDefault();
            } else {
                e.returnValue = false;
                return false;
            }
        } else {
            self._c = true;
        }
    };

    self._onChange = function(e)
    {
        e = e || window.event;
        var target = e.target || e.srcElement;
        if (!target) {
            return;
        }
        if (hasClass(target, 'pika-select-month')) {
            self.gotoMonth(target.value);
        }
        else if (hasClass(target, 'pika-select-year')) {
            self.gotoYear(target.value);
        }
    };

    self._onInputChange = function(e)
    {
        var date;

        if (e.firedBy === self) {
            return;
        }
        if (hasMoment) {
            date = window.moment(opts.field.value, opts.format);
            date = date ? date.toDate() : null;
        }
        else {
            date = new Date(Date.parse(opts.field.value));
        }
        self.setDate(isDate(date) ? date : null);
        if (!self._v) {
            self.show();
        }
    };

    self._onInputFocus = function()
    {
        self.show();
    };

    self._onInputClick = function()
    {
        self.show();
    };

    self._onInputBlur = function()
    {
        if (!self._c) {
            self._b = sto(function() {
                self.hide();
            }, 50);
        }
        self._c = false;
    };

    self._onClick = function(e)
    {
        e = e || window.event;
        var target = e.target || e.srcElement,
            pEl = target;
        if (!target) {
            return;
        }
        if (!hasEventListeners && hasClass(target, 'pika-select')) {
            if (!target.onchange) {
                target.setAttribute('onchange', 'return;');
                addEvent(target, 'change', self._onChange);
            }
        }
        do {
            if (hasClass(pEl, 'pika-single')) {
                return;
            }
        }
        while ((pEl = pEl.parentNode));
        if (self._v && target !== opts.field) {
            self.hide();
        }
    };

    self.el = document.createElement('div');
    self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '');

    addEvent(self.el, 'mousedown', self._onMouseDown, true);
    addEvent(self.el, 'change', self._onChange);

    if (opts.field) {
        if (opts.bound) {
            document.body.appendChild(self.el);
        } else {
            opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);
        }
        addEvent(opts.field, 'change', self._onInputChange);

        if (!opts.defaultDate) {
            if (hasMoment && opts.field.value) {
                opts.defaultDate = window.moment(opts.field.value, opts.format).toDate();
            } else {
                opts.defaultDate = new Date(Date.parse(opts.field.value));
            }
            opts.setDefaultDate = true;
        }
    }

    var defDate = opts.defaultDate;

    if (isDate(defDate)) {
        if (opts.setDefaultDate) {
            self.setDate(defDate, true);
        } else {
            self.gotoDate(defDate);
        }
    } else {
        self.gotoDate(new Date());
    }

    if (opts.bound) {
        this.hide();
        self.el.className += ' is-bound';
        addEvent(opts.field, 'click', self._onInputClick);
        addEvent(opts.field, 'focus', self._onInputFocus);
        addEvent(opts.field, 'blur', self._onInputBlur);
    } else {
        this.show();
    }

};

/**
 * public Pikaday API
 */
window.Pikaday.prototype = {

    /**
     * configure functionality
     */
    config: function(options)
    {
        if (!this._o) {
            this._o = extend({}, defaults, true);
        }

        var opts = extend(this._o, options, true);

        opts.isRTL = !!opts.isRTL;

        opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;

        opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);

        var nom = parseInt(opts.numberOfMonths, 10) || 1;
        opts.numberOfMonths = nom > 4 ? 4 : nom;

        if (!isDate(opts.minDate)) {
            opts.minDate = false;
        }
        if (!isDate(opts.maxDate)) {
            opts.maxDate = false;
        }
        if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {
            opts.maxDate = opts.minDate = false;
        }
        if (opts.minDate) {
            setToStartOfDay(opts.minDate);
            opts.minYear  = opts.minDate.getFullYear();
            opts.minMonth = opts.minDate.getMonth();
        }
        if (opts.maxDate) {
            setToStartOfDay(opts.maxDate);
            opts.maxYear  = opts.maxDate.getFullYear();
            opts.maxMonth = opts.maxDate.getMonth();
        }

        if (isArray(opts.yearRange)) {
            var fallback = new Date().getFullYear() - 10;
            opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;
            opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;
        } else {
            opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;
            if (opts.yearRange > 100) {
                opts.yearRange = 100;
            }
        }

        return opts;
    },

    /**
     * return a formatted string of the current selection (using Moment.js if available)
     */
    toString: function(format)
    {
        return !isDate(this._d) ? '' : hasMoment ? window.moment(this._d).format(format || this._o.format) : this._d.toDateString();
    },

    /**
     * return a Moment.js object of the current selection (if available)
     */
    getMoment: function()
    {
        return hasMoment ? window.moment(this._d) : null;
    },

    /**
     * set the current selection from a Moment.js object (if available)
     */
    setMoment: function(date)
    {
        if (hasMoment && window.moment.isMoment(date)) {
            this.setDate(date.toDate());
        }
    },

    /**
     * return a Date object of the current selection
     */
    getDate: function()
    {
        return isDate(this._d) ? new Date(this._d.getTime()) : null;
    },

    /**
     * set the current selection
     */
    setDate: function(date, preventOnSelect)
    {
        if (!date) {
            this._d = null;
            return this.draw();
        }
        if (typeof date === 'string') {
            date = new Date(Date.parse(date));
        }
        if (!isDate(date)) {
            return;
        }

        var min = this._o.minDate,
            max = this._o.maxDate;

        if (isDate(min) && date < min) {
            date = min;
        } else if (isDate(max) && date > max) {
            date = max;
        }

        this._d = new Date(date.getTime());
        setToStartOfDay(this._d);
        this.gotoDate(this._d);

        if (this._o.field) {
            this._o.field.value = this.toString();
            fireEvent(this._o.field, 'change', { firedBy: this });
        }
        if (!preventOnSelect && typeof this._o.onSelect === 'function') {
            this._o.onSelect.call(this, this.getDate());
        }
    },

    /**
     * change view to a specific date
     */
    gotoDate: function(date)
    {
        if (!isDate(date)) {
            return;
        }
        this._y = date.getFullYear();
        this._m = date.getMonth();
        this.draw();
    },

    gotoToday: function()
    {
        this.gotoDate(new Date());
    },

    /**
     * change view to a specific month (zero-index, e.g. 0: January)
     */
    gotoMonth: function(month)
    {
        if (!isNaN( (month = parseInt(month, 10)) )) {
            this._m = month < 0 ? 0 : month > 11 ? 11 : month;
            this.draw();
        }
    },

    nextMonth: function()
    {
        if (++this._m > 11) {
            this._m = 0;
            this._y++;
        }
        this.draw();
    },

    prevMonth: function()
    {
        if (--this._m < 0) {
            this._m = 11;
            this._y--;
        }
        this.draw();
    },

    /**
     * change view to a specific full year (e.g. "2012")
     */
    gotoYear: function(year)
    {
        if (!isNaN(year)) {
            this._y = parseInt(year, 10);
            this.draw();
        }
    },

    /**
     * refresh the HTML
     */
    draw: function(force)
    {
        if (!this._v && !force) {
            return;
        }
        var opts = this._o,
            minYear = opts.minYear,
            maxYear = opts.maxYear,
            minMonth = opts.minMonth,
            maxMonth = opts.maxMonth;

        if (this._y <= minYear) {
            this._y = minYear;
            if (!isNaN(minMonth) && this._m < minMonth) {
                this._m = minMonth;
            }
        }
        if (this._y >= maxYear) {
            this._y = maxYear;
            if (!isNaN(maxMonth) && this._m > maxMonth) {
                this._m = maxMonth;
            }
        }

        this.el.innerHTML = renderTitle(this) + this.render(this._y, this._m);

        if (opts.bound) {
            var pEl  = opts.field,
                left = pEl.offsetLeft,
                top  = pEl.offsetTop + pEl.offsetHeight;
            while((pEl = pEl.offsetParent)) {
                left += pEl.offsetLeft;
                top  += pEl.offsetTop;
            }
            this.el.style.cssText = 'position:absolute;left:' + left + 'px;top:' + top + 'px;';
            sto(function() {
                opts.field.focus();
            }, 1);
        }

        if (typeof this._o.onDraw === 'function') {
            var self = this;
            sto(function() {
                self._o.onDraw.call(self);
            }, 0);
        }
    },

    /**
     * render HTML for a particular month
     */
    render: function(year, month)
    {
        var opts   = this._o,
            now    = new Date(),
            days   = getDaysInMonth(year, month),
            before = new Date(year, month, 1).getDay(),
            data   = [],
            row    = [];
        setToStartOfDay(now);
        if (opts.firstDay > 0) {
            before -= opts.firstDay;
            if (before < 0) {
                before += 7;
            }
        }
        var cells = days + before,
            after = cells;
        while(after > 7) {
            after -= 7;
        }
        cells += 7 - after;
        for (var i = 0, r = 0; i < cells; i++)
        {
            var day = new Date(year, month, 1 + (i - before)),
                isDisabled = (opts.minDate && day < opts.minDate) || (opts.maxDate && day > opts.maxDate),
                isSelected = isDate(this._d) ? compareDates(day, this._d) : false,
                isToday = compareDates(day, now),
                isEmpty = i < before || i >= (days + before);

            row.push(renderDay(1 + (i - before), isSelected, isToday, isDisabled, isEmpty));

            if (++r === 7) {
                data.push(renderRow(row, opts.isRTL));
                row = [];
                r = 0;
            }
        }
        return renderTable(opts, data);
    },

    isVisible: function()
    {
        return this._v;
    },

    show: function()
    {
        if (!this._v) {
            if (this._o.bound) {
                addEvent(document, 'click', this._onClick);
            }
            removeClass(this.el, 'is-hidden');
            this._v = true;
            this.draw();
            if (typeof this._o.onOpen === 'function') {
                this._o.onOpen.call(this);
            }
        }
    },

    hide: function()
    {
        var v = this._v;
        if (v !== false) {
            if (this._o.bound) {
                removeEvent(document, 'click', this._onClick);
            }
            this.el.style.cssText = '';
            addClass(this.el, 'is-hidden');
            this._v = false;
            if (v !== undefined && typeof this._o.onClose === 'function') {
                this._o.onClose.call(this);
            }
        }
    },

    /**
     * GAME OVER
     */
    destroy: function()
    {
        this.hide();
        removeEvent(this.el, 'mousedown', this._onMouseDown, true);
        removeEvent(this.el, 'change', this._onChange);
        if (this._o.field) {
            removeEvent(this._o.field, 'change', this._onInputChange);
            if (this._o.bound) {
                removeEvent(this._o.field, 'click', this._onInputClick);
                removeEvent(this._o.field, 'focus', this._onInputFocus);
                removeEvent(this._o.field, 'blur', this._onInputBlur);
            }
        }
        if (this.el.parentNode) {
            this.el.parentNode.removeChild(this.el);
        }
    }

};

})(window, window.document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T12:59:34.963

我以这种方式强制数据格式（日期格式为 dd-MM-YYYY）：

```
 // formatto la data come voglio...
            Pikaday.prototype.toString = function () {
                return ('0' + this._d.getDate()).slice(-2) + "-" + ('0' + (this._d.getMonth() + 1)).slice(-2) + "-" + this._d.getFullYear();
            };

            // il parse con le date all'italiana... 
            Date.parse = function (sDateString) {
                var parts = sDateString.split("-");
                return (new Date(parseInt(parts[2], 10), parseInt(parts[1], 10) - 1, parseInt(parts[0], 10)));
            } 
```

第一个函数重写了 Pikaday toString 函数。第二个函数重写了 javascript 解析函数（解析 mm-dd-yyyy 中的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:40:38.307

看起来Pikaday与[Moment.js结合使用时](http://momentjs.com/)[具有格式选项](https://github.com/dbushell/Pikaday#usage)：

```
<script src="moment.js"></script>
<script src="pikaday.js"></script>

<script>

  var picker = new Pikaday(
  {
      ...
      format: 'YYYY-MM-DD',
      ...
  });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:44:04.850

[皮卡迪演示。](https://github.com/dbushell/Pikaday) 就像你在那里看到的那样，pikaday 有一个格式选项。只添加 `format:'YYYY-MM-DD'`到对象。

并在 pikaday.js 之前加载 moment.js ..

# android - 无法使用 NDK 从外部存储读取

> ID：15656779
> 
> 赞同：0
> 
> 时间：2013-03-27T10:36:21.250
> 
> 标签：android, android-ndk

我正在使用 NDK 从 Music 文件夹中加载用户声音文件。我从 ACTION_PICK 意图获取文件路径，它看起来像这样：

> /storage/emulated/0/Music/My Narration - 0007.wav

我在调试模式下没有任何问题，但在发布时失败：**无法打开文件。**

我还使用 JNI 使用 Java 从外部存储加载图像文件，没有问题。

我的清单文件中有此权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我也试过添加这个，但它没有效果：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

要从**fcntl.h**打开我使用**open()**的文件：

 **```
open(filePath, O_RDONLY, S_IRUSR | S_IWUSR  | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH); 
```

为什么它在调试模式下工作但在发布模式下不工作？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-28T00:33:06.927

看来我找到了问题的根源。应用程序的调试和发布版本使用由#define 标志控制的不同代码，并且发布版本有一个错误。**

# android - android选择器旋转速度

> ID：15656780
> 
> 赞同：1
> 
> 时间：2013-03-27T10:36:22.440
> 
> 标签：android, view, numberpicker

我正在使用 NumberPicker 让用户选择自定义字符串值。工作得很好，除了轮子太灵敏，太快，很容易选择一个值。有没有办法调整Android Pickers的旋转速度，加速度？谢谢！

# html - 标题应该在内部还是外部 ?

> ID：15656785
> 
> 赞同：26
> 
> 时间：2013-03-27T10:36:42.757
> 
> 标签：html, semantic-markup

我有一个 div 元素，在该 div 中，我们在 p 元素之间有文本。

我想添加一个标题。它应该进入p内部还是外部？

哪个更好：

```
<p>This is text
    <h3>This is my h3</h3>
    More text
</p>
<p>another text<p> 
```

或者

```
<p>This is text<p>
<h3>This is my h3</h3>
<p>another text<p> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-27T10:46:45.947

在 HTML 标记中将标题元素放在元素内是不可能的`p`，不仅是形式上的，而且因为浏览器`p`在遇到标题时会隐式终止打开的元素。所以这个问题是没有意义的：一个不能存在于特定上下文中的元素在该上下文中不能有任何意义（语义）。

除了使用`p`将文本和标题组合在一起之外，您还可以使用该`div`元素，或者使用 HTML5 新奇事物（如`section`和`article`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T10:54:00.950

根据标准，段落不应包含其他块元素（包括段落和标题）。如其他答案所示，要将标题与段落分组，您可以使用 div 标签。

您还可以在 w3c 的网站上找到有关此主题的大量信息：http: [//www.w3.org/TR/html401/struct/global.html#block-inline](http://www.w3.org/TR/html401/struct/global.html#block-inline)

# java - 谷歌地图只显示棕色屏幕和缩放

> ID：15656788
> 
> 赞同：0
> 
> 时间：2013-03-27T10:36:54.773
> 
> 标签：java, android

我想在我的 android 应用程序中显示谷歌地图应用程序：

我做了android开发人员中提到的步骤：[https ://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

但是它在我的应用程序中为我显示，一个带有缩放（加号和减号按钮）的棕色屏幕，没有地图本身（它没有向我显示任何错误）

我创建了这个 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/itemImage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:src="@drawable/logo" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="400dp"
        android:layout_marginTop="10dp"
        android:layout_weight="66496.79"
        android:orientation="horizontal" >

        <fragment 
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.MapFragment"/>

    </RelativeLayout>

</LinearLayout> 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sal"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="1"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CAMERA"/>

    <permission
    android:name="com.example.sal.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
     Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <uses-permission android:name="com.example.sal.permission.MAPS_RECEIVE"/>
        <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:name=".FriendPickerApplication">

        <activity
            android:name="com.example.sal.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

              </activity>

         <!--  Entry for RegisterActivity.class -->
        <activity android:name=".RegisterActivity"
                  android:label="Register New Account"></activity>
        <meta-data android:value="@string/app_id" android:name="com.facebook.sdk.ApplicationId"/>
        <activity android:label="@string/app_name" android:name="com.facebook.LoginActivity"></activity>
        <activity android:name=".ProfileActivity" android:label="Profile page"></activity>

        <meta-data
              android:name="com.google.android.maps.v2.API_KEY"
              android:value="zzzz"/>

        <activity android:name="SaleMapActivity"></activity>
        <activity android:name="GroupMapActivity"></activity>
        <activity android:name="DeliverMapActivity"></activity>
        <activity android:name="PickFriendsActivity"></activity>
        <activity android:name="TabMainActivity"></activity>
        <activity android:name="itemSaleActivity"></activity>
        <activity android:name="FreindsActivity"></activity>
        <activity android:name="ExitActivity"></activity>
        <activity android:name="OneTimeDetailesScreen"></activity>
        <activity android:name="UpdateMapActivity"></activity>
        <activity android:name="DashBoardActivity"></activity>

    </application>

</manifest 
```

>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:01:01.643

改变这个：

```
<permission
    android:name="com.vogella.android.locationapi.maps.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" /> 
```

至

```
<permission
    android:name="com.example.sal.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" /> 
```

我不确定这是否有帮助，但这是我上一个项目使用的布局代码（注意不同的片段类）

```
<fragment
    android:id="@+id/map_fragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    class="com.google.android.gms.maps.SupportMapFragment"
    map:mapType="normal"
            map:cameraTargetLat="@string/default_map_lat"
            map:cameraTargetLng="@string/default_map_lng"
            map:cameraZoom="8">
</fragment> 
```

# javascript - 如何使用自定义绑定更新/过滤底层可观察值？

> ID：15656792
> 
> 赞同：0
> 
> 时间：2013-03-27T10:37:02.343
> 
> 标签：javascript, knockout.js, knockout-2.0

**问题**

我创建了一个自定义绑定，它用*\r\n*替换observable 中的*html br*出现，以便在文本区域中显示。这适用于值的初始显示，但对显示文本的进一步更改不会触发自定义绑定的更新功能。

 ***代码**

```
ko.bindingHandlers.Br2Nl = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {     
        var observable = valueAccessor();
        var valueUnwrapped = ko.utils.unwrapObservable(observable);
        var transformed = Br2Nl(valueUnwrapped);
        $(element).val(transformed);
    }
};
function Br2Nl(content)
{
    var response = new String(content);
    return response.replace(/<br \/>/g, "\r\n");
} 
```

我最初的假设是问题在于我实际上并没有触发底层 observable 的更新，所以我修改了更新函数来这样做，但没有成功：

```
update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {     
        var observable = valueAccessor();
        var valueUnwrapped = ko.utils.unwrapObservable(observable);
        var transformed = Br2Nl(valueUnwrapped);
        //update observable with transformed value
        observable(transformed);
        $(element).val(transformed);
    } 
```

是否有使用自定义绑定更新/过滤可观察值的正确方法？

自定义绑定用法：

```
<textarea data-bind="Br2Nl: PropertyName" rows="5">  </textarea> 
```

**这是它的小提琴：http:** [//jsfiddle.net/bWHBU/](http://jsfiddle.net/bWHBU/)

可以观察到，当 textarea 的内容发生变化时，observable（下面的 div）没有任何反应。但是，当 'Br2Nl' 自定义绑定被替换为 'value' 绑定时，可观察对象会更新。

**这里的最终解决方案：http:** [//jsfiddle.net/bWHBU/5/](http://jsfiddle.net/bWHBU/5/)

将 'keyup' 替换为 'change' 事件以避免 Firefox 上的垂直滚动条重新定位问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:36:20.703

当文本区域中的文本发生更改时，您还没有指示敲除何时更新可观察属性。尝试这个：

```
ko.bindingHandlers.Br2Nl = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        ko.utils.registerEventHandler(element, "keyup", function() {
            var observable = valueAccessor();
            var valueUnwrapped = ko.utils.unwrapObservable(observable);    
            var transformed = Br2Nl($(element).val());
            observable(transformed);
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {     
        var observable = valueAccessor();
        var valueUnwrapped = ko.utils.unwrapObservable(observable);
        var transformed = Br2Nl(valueUnwrapped);
        $(element).val(transformed);
    }
}; 
```

使 keyup 方法正确可能需要一些修补，但这应该是一个好的开始。

更新了你的[jsFiddle](http://jsfiddle.net/manzanotti/bWHBU/4/)。您正在为映射插件引用 raw.github，并且浏览器无法从那里正确解析文件。添加了一个可用的外部参考。*

# delphi - 在delphi中格式化字符串

> ID：15656793
> 
> 赞同：1
> 
> 时间：2013-03-27T10:37:06.290
> 
> 标签：delphi

我想更新诸如“更新报告（1 0f 5）”之类的文本。我认为格式功能将帮助我做到这一点。我想要这样的东西

```
string := Format('Updating report ( %d of %d, [1], [2])', loop, count ); 
```

但这是不可能的。我可以选择将循环和计数存储在字符串中并连接所有内容。但是还有其他方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T10:39:57.923

你的语法是错误的。的第二个参数[`Format`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.Format)是一个包含参数的开放数组。因此，您需要将参数列表包装在所谓的[开放数组构造函数](http://docwiki.embarcadero.com/RADStudio/en/Calling_Procedures_and_Functions#Open_Array_Constructors)中。

> 开放数组构造函数是由逗号分隔并括在括号中的表达式序列。

因此，编写如下代码：

```
str := Format('Updating report (%d of %d)', [loop, count]); 
```

# javascript - javascript中Number和Function.prototype有什么关系？

> ID：15656795
> 
> 赞同：6
> 
> 时间：2013-03-27T10:37:09.440
> 
> 标签：javascript, function-prototypes, prototype-chain

我正在阅读这本书*Javascript: the Good Parts*。当我阅读下面的代码时，我有点困惑：

```
Function.prototype.method = function (name, func) {
    this.prototype[name] = func;
    return this;
};

Number.method('integer',function(){
    return Math[this < 0 ? 'ceil' : 'floor'](this);
}); 
```

我认为上面代码的第一部分意味着 JavaScript 中的任何函数现在都有一个名为*method*的方法。但是“数字”也是一个函数吗？为什么`Number.method`有意义？

我假设 Number 继承了 Number.prototype 继承了 Object.prototype(Number->Number.prototype->Object.prototype)，因为 Number 一开始没有“方法”方法，它会沿着原型链寻找它。但是 Function.prototype 不在链上，对吧？

Number、Number.prototype 和 Function.prototype 之间的关系是什么？

* * *

**更新我：**

我已经搜索了一些额外的信息，现在更加困惑。有人说 Number 实际上是一个函数，这似乎是有道理的，因为`Number instanceof Function`is`true`的值。但是 is 的`(-10 / 3) instanceof Number`值`false`。这不是很混乱吗？如果数学中的数字（例如 3、2.5、（-10 / 3））`Number`在 JavaScript 中甚至不是 a，那么如何`(-10 / 3)`调用`integer()`from 中的方法`Number`？（下面一行来自同一本书）

```
 document.writeln((-10 / 3).integer()); 
```

* * *

**更新二：**

***问题基本解决了。***

感谢@Xophmeister 的帮助，现在我的结论是`Number`可以调用`method`，因为`Number`它是一个构造函数，因此它链接到`Function.prototype`. 至于为什么 JavaScript 中类型为原始类型的 number(3, 2.5, (-10 / 3)) 可以调用 object`Number`具有的方法，请参考[此页](http://javascriptweblog.wordpress.com/2010/09/27/the-secret-life-of-javascript-primitives/)。

我基本上从@Xophmeister 的帮助和一些搜索中得到了这个结论，所以它可能不够精确。欢迎任何更正或完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:46:21.923

我相信原型链是：`Object`> `Function`> `Number`：

```
Number instanceof Function; // true
Number instanceof Object;   // true
Function instanceof Object; // true 
```

# hornetq - HornetQ（实时和备份服务器设置）

> ID：15656798
> 
> 赞同：0
> 
> 时间：2013-03-27T10:37:11.383
> 
> 标签：hornetq

在此先感谢，请帮助我解决错误：

HornetQ Ver 2.2.14 最终版

Live Server 正在启动，没有任何问题。我能够以正确的方式从（Live Sever 到 Backup Server）和（Backup Server 到 Live Server）通过 down/Up 实时服务器，即使出现以下错误

备份服务器开始正常启动，5 秒后... * [Thread-0 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:6,218在 org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:716) 在 org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:716) 警告 [ClusterConnectionImpl] 无法宣布备份，重试 HornetQException[errorCode=3 消息=超时等待从集群接收初始广播] .hornetq.core.client.impl.ServerLocatorImpl.connect(ServerLocatorImpl.java:593) 在 org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485) 在 org.hornetq.utils。 OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 在 java.util.concurrent。ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

```
**Live Server Conf Files**
---------------------
1.*hornetq-configuration.xml*
-----------------------------
<configuration xmlns="urn:hornetq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd">

   <clustered>true</clustered>
   <backup>false</backup>
   <shared-store>true</shared-store>
   <allow-failback>false</allow-failback>
   <failover-on-shutdown>true</failover-on-shutdown>

   <bindings-directory>d:/temp/data/bindings</bindings-directory>
   <large-messages-directory>d:/temp/data/largemessages</large-messages-directory>
   <paging-directory>d:/temp/data/paging</paging-directory>
   <journal-directory>d:/temp/data/journal</journal-directory>
   <journal-min-files>10</journal-min-files>

   <connectors>      
      <connector name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
         <param key="host"  value="192.100.101.42"/>
         <param key="port"  value="5445"/>
      </connector>
   </connectors>

   <acceptors>
      <acceptor name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory</factory-class>
         <param key="host"  value="192.100.101.42"/>
         <param key="port"  value="5445"/>
      </acceptor>
   </acceptors>

   <broadcast-groups>
      <broadcast-group name="vsbg-group1">
         <group-address>231.7.7.7</group-address>
         <group-port>9876</group-port>
         <broadcast-period>1000</broadcast-period>
         <connector-ref>netty</connector-ref>
      </broadcast-group>
   </broadcast-groups>

   <discovery-groups>
      <discovery-group name="vsdg-group1">
         <group-address>231.7.7.7</group-address>
         <group-port>9876</group-port>
         <refresh-timeout>10000</refresh-timeout>
      </discovery-group>
   </discovery-groups>

   <cluster-connections>
      <cluster-connection name="vs-cluster">
      <address>jms</address>     
      <connector-ref>netty</connector-ref>
      <discovery-group-ref discovery-group-name="vsdg-group1"/>
      </cluster-connection>
   </cluster-connections>

   <security-settings>
      <security-setting match="#">
         <permission type="createNonDurableQueue" roles="guest"/>
         <permission type="deleteNonDurableQueue" roles="guest"/>
         <permission type="consume" roles="guest"/>
         <permission type="send" roles="guest"/>
      </security-setting>
   </security-settings>

   <address-settings>
      <!--default for catch all-->
      <address-setting match="#">
         <dead-letter-address>jms.queue.DLQ</dead-letter-address>
         <expiry-address>jms.queue.ExpiryQueue</expiry-address>
         <redelivery-delay>0</redelivery-delay>
         <max-size-bytes>10485760</max-size-bytes>       
         <address-full-policy>BLOCK</address-full-policy>
      </address-setting>
   </address-settings>

</configuration>

2.*hornetq-jms.xml*
-----------------
<configuration xmlns="urn:hornetq"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:hornetq /schema/hornetq-jms.xsd">

   <connection-factory name="ConnectionFactory">
      <xa>false</xa>
      <connectors>
         <connector-ref connector-name="netty"/>
      </connectors>
      <entries>
         <entry name="ConnectionFactory"/>
      </entries>
      <ha>true</ha>
      <retry-interval>100</retry-interval>
      <retry-interval-multiplier>1.0</retry-interval-multiplier>

   </connection-factory>

   <queue name="LOAD_TEST">
         <entry name="/queue/LOAD_TEST"/>
   </queue>

   <queue name="DLQ">
      <entry name="/queue/DLQ"/>
   </queue>

   <queue name="ExpiryQueue">
      <entry name="/queue/ExpiryQueue"/>
   </queue>

</configuration>

3.*Hornetq.log*
--------------
* [main] 27-Mar 15:7:52,453 INFO [HornetQBootstrapServer]  Starting HornetQ Server

* [main] 27-Mar 15:7:53,265 WARNING [FileConfigurationParser]  AIO wasn't located on this platform, it will fall back to using pure Java NIO. If your platform is Linux, install LibAIO to enable the AIO journal

* [main] 27-Mar 15:7:53,312 INFO [HornetQServerImpl]  live server is starting with configuration HornetQ Configuration (clustered=true,backup=false,sharedStore=true,journalDirectory=d:/temp/data/journal,bindingsDirectory=d:/temp/data/bindings,largeMessagesDirectory=d:/temp/data/largemessages,pagingDirectory=d:/temp/data/paging)

* [main] 27-Mar 15:7:53,312 INFO [HornetQServerImpl]  Waiting to obtain live lock

* [main] 27-Mar 15:7:53,343 INFO [JournalStorageManager]  Using NIO Journal

* [main] 27-Mar 15:7:53,359 WARNING [HornetQServerImpl]  Security risk! It has been detected that the cluster admin user and password have not been changed from the installation default. Please see the HornetQ user guide, cluster chapter, for instructions on how to do this.

* [main] 27-Mar 15:7:53,484 INFO [FileLockNodeManager]  Waiting to obtain live lock

* [main] 27-Mar 15:7:53,484 INFO [FileLockNodeManager]  Live Server Obtained live lock

* [main] 27-Mar 15:7:55,0 INFO [HornetQServerImpl]  trying to deploy queue jms.queue.LOAD_TEST

* [main] 27-Mar 15:7:55,0 INFO [HornetQServerImpl]  trying to deploy queue jms.queue.DLQ

* [main] 27-Mar 15:7:55,15 INFO [HornetQServerImpl]  trying to deploy queue jms.queue.ExpiryQueue

* [main] 27-Mar 15:7:55,109 INFO [NettyAcceptor]  Started Netty Acceptor version 3.2.5.Final-a96d88c 192.100.101.42:5445 for CORE protocol

* [main] 27-Mar 15:7:55,109 INFO [HornetQServerImpl]  Server is now live

* [main] 27-Mar 15:7:55,109 INFO [HornetQServerImpl]  HornetQ Server version 2.2.14.Final (HQ_2_2_14_FINAL, 122) [80d285b6-96ba-11e2-9528-817a37231a12]) started

**Backup Server Config Files**
-------------------------

1.*hornetq-configuration.xml*
---------------------------
<configuration xmlns="urn:hornetq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd">

   <clustered>true</clustered>
   <backup>true</backup>
   <shared-store>true</shared-store>
   <allow-failback>true</allow-failback>
   <failover-on-shutdown>false</failover-on-shutdown>

   <bindings-directory>d:/temp/data/bindings</bindings-directory>
   <large-messages-directory>d:/temp/data/largemessages</large-messages-directory>
   <paging-directory>d:/temp/data/paging</paging-directory>
   <journal-directory>d:/temp/data/journal</journal-directory>
   <journal-min-files>10</journal-min-files>

   <connectors>      
      <connector name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
         <param key="host"  value="192.100.101.42"/>
         <param key="port"  value="5446"/>
      </connector>
   </connectors>

   <acceptors>
      <acceptor name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory</factory-class>
         <param key="host"  value="192.100.101.42"/>
         <param key="port"  value="5446"/>
      </acceptor>
   </acceptors>

   <broadcast-groups>
      <broadcast-group name="vsbg-group1">
         <group-address>231.7.7.7</group-address>
         <group-port>9876</group-port>
         <broadcast-period>1000</broadcast-period>
         <connector-ref>netty</connector-ref>
      </broadcast-group>
   </broadcast-groups>

   <discovery-groups>
      <discovery-group name="vsdg-group1">
         <group-address>231.7.7.7</group-address>
         <group-port>9876</group-port>
         <refresh-timeout>10000</refresh-timeout>
      </discovery-group>
   </discovery-groups>

   <cluster-connections>
      <cluster-connection name="vs-cluster">
      <address>jms</address>     
      <connector-ref>netty</connector-ref>
      <discovery-group-ref discovery-group-name="vsdg-group1"/>
      </cluster-connection>
   </cluster-connections>

   <security-settings>
      <security-setting match="#">
         <permission type="createNonDurableQueue" roles="guest"/>
         <permission type="deleteNonDurableQueue" roles="guest"/>
         <permission type="consume" roles="guest"/>
         <permission type="send" roles="guest"/>
      </security-setting>
   </security-settings>

   <address-settings>
      <!--default for catch all-->
      <address-setting match="#">
         <dead-letter-address>jms.queue.DLQ</dead-letter-address>
         <expiry-address>jms.queue.ExpiryQueue</expiry-address>
         <redelivery-delay>0</redelivery-delay>
         <max-size-bytes>10485760</max-size-bytes>       
         <address-full-policy>BLOCK</address-full-policy>
      </address-setting>
   </address-settings>

</configuration>

2\. *hornetq-jms.xml (same as live server)*
---------------------------------------

3\. *hornetq.log*
---------------
* [main] 27-Mar 15:7:55,203 INFO [HornetQBootstrapServer]  Starting HornetQ Server

* [main] 27-Mar 15:7:56,15 WARNING [FileConfigurationParser]  AIO wasn't located on this platform, it will fall back to using pure Java NIO. If your platform is Linux, install LibAIO to enable the AIO journal

* [main] 27-Mar 15:7:56,62 INFO [HornetQServerImpl]  backup server is starting with configuration HornetQ Configuration (clustered=true,backup=true,sharedStore=true,journalDirectory=d:/temp/data/journal,bindingsDirectory=d:/temp/data/bindings,largeMessagesDirectory=d:/temp/data/largemessages,pagingDirectory=d:/temp/data/paging)

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:7:56,62 INFO [FileLockNodeManager]  Waiting to become backup node

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:7:56,62 INFO [FileLockNodeManager]  ** got backup lock

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:7:56,93 INFO [JournalStorageManager]  Using NIO Journal

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:7:56,109 WARNING [HornetQServerImpl]  Security risk! It has been detected that the cluster admin user and password have not been changed from the installation default. Please see the HornetQ user guide, cluster chapter, for instructions on how to do this.

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:7:56,218 INFO [HornetQServerImpl]  HornetQ Backup Server version 2.2.14.Final (HQ_2_2_14_FINAL, 122) [80d285b6-96ba-11e2-9528-817a37231a12] started, waiting live to fail before it gets active

* [Thread-0 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:6,218 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
HornetQException[errorCode=3 message=Timed out waiting to receive initial broadcast from cluster]
    at org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:716)
    at org.hornetq.core.client.impl.ServerLocatorImpl.connect(ServerLocatorImpl.java:593)
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Thread-1 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:16,734 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
HornetQException[errorCode=3 message=Timed out waiting to receive initial broadcast from cluster]
    at org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:716)
    at org.hornetq.core.client.impl.ServerLocatorImpl.connect(ServerLocatorImpl.java:593)
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Thread-2 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:27,250 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
HornetQException[errorCode=3 message=Timed out waiting to receive initial broadcast from cluster]
    at org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:716)
    at org.hornetq.core.client.impl.ServerLocatorImpl.connect(ServerLocatorImpl.java:593)
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:8:29,187 INFO [HornetQServerImpl]  trying to deploy queue jms.queue.LOAD_TEST

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:8:29,187 INFO [HornetQServerImpl]  trying to deploy queue jms.queue.DLQ

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:8:29,203 INFO [HornetQServerImpl]  trying to deploy queue jms.queue.ExpiryQueue

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:8:29,265 INFO [NettyAcceptor]  Started Netty Acceptor version 3.2.5.Final-a96d88c 192.100.101.42:5446 for CORE protocol

* [Thread-3 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:29,281 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
HornetQException[errorCode=3 message=Timed out waiting to receive initial broadcast from cluster]
    at org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:716)
    at org.hornetq.core.client.impl.ServerLocatorImpl.connect(ServerLocatorImpl.java:593)
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Activation for server HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12] 27-Mar 15:8:29,296 INFO [HornetQServerImpl]  Backup Server is now live

* [Thread-8 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:29,812 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
java.lang.NullPointerException
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Thread-9 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:30,328 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
java.lang.NullPointerException
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Thread-10 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:30,843 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
java.lang.NullPointerException
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Thread-11 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:31,359 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
java.lang.NullPointerException
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [Thread-12 (HornetQ-server-HornetQServerImpl::serverUUID=80d285b6-96ba-11e2-9528-817a37231a12-19420919)] 27-Mar 15:8:32,31 WARNING [ClusterConnectionImpl]  Unable to announce backup, retrying
java.lang.NullPointerException
    at org.hornetq.core.server.cluster.impl.ClusterConnectionImpl$2.run(ClusterConnectionImpl.java:485)
    at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

* [hornetq-shutdown-thread] 27-Mar 15:8:32,109 INFO [HornetQBootstrapServer]  Stopping HornetQ Server... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:22:54.533

我认为如果它们在同一台机器上，您应该将连接器和接受器的**主机**更改为“localhost”。（但我认为你的配置没问题，这是一个网络（UDP）问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T22:25:16.140

在您的 hornetq-jms.xml 中，您应该将以下属性添加到 ConnectionFactory 元素。

```
 <discovery-group-ref discovery-group-name="my-discovery-group"/> 
```

# wcf - 返回列表时出现 WCF 异常

> ID：15656800
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:37:20.240
> 
> 标签：wcf, list, return

在我的以下应用程序中，我生成了“JobManager”类的列表。

```
 List<JobManager> 
```

对数据库的访问和填写我的列表非常完美。将此类列表返回给我的客户似乎存在问题。

详细来说，我的代码如下所示

```
IService Class

OperationContract(Name = "ReadJobQueue")]
    [FaultContract(typeof(FaultException))]
    List<JobManager> AccessManager(List<string> status,string process, string dtFrom, string dtTo);

Service : IService

public List<JobManager> AccessManager(List<string> status, string process, string dtFrom, string dtTo)
    {
        //return 'new List<JobManager>()' does work, without any data being filled.
        return new JobBuilder(status, process, dtFrom, dtTo);
    }

[DataContract]
public class JobManager
{
    List<JobManager> _jobManagerchildren = new List<JobManager>();

    [DataMember(IsRequired = true, Order = 0)]
    public string Description { get; set; }

    [DataMember]
    public List<JobManager> JobManagerChildren
    {
        get { return _jobManagerchildren; }
        internal set { _jobManagerchildren = value; }
    }
}

internal class JobBuilder : List<JobManager>
{
    public JobBuilder(List<string> status, string process, string dtFrom, string dtTo)
        : base()
    {
        DataTable dt = new Database().AccessJobQueue(status, process, dtFrom, dtTo);

        foreach (DataRow row in dt.Rows)
        {
            Add(new JobManager { Description = row[1].ToString(), JobManagerChildren = JobDetail(row[0].ToString()) });
        }
    }

 ...
 } 
```

我错过了 JobManager 课程的内容吗？

*编辑错误代码/异常*

System.Net.Sockets.SocketException：现有连接已被远程主机关闭，位于 System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size , SocketFlags socketFlags) bei System.ServiceModel.Channels.SocketConnection .ReadCore(Byte[] buffer, Int 32 offset, Int32 size, TimeSpan timeout, Boolean close) --- Ende der internen Ausnahmestapelüberwachung --- bei System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int 32 offset , Int32 大小, TimeSpan 超时, 布尔关闭) bei System.ServiceModel.Channels.SocketConnection.Read(Byte[] 缓冲区, Int32 偏移量, Int32 大小, TimeSpan 超时) bei System.ServiceModel.Channels.DelegatingConnection.Read(Byte[] buffer, Int 32 offset, Int32 size, TimeSpan timeout) bei System.ServiceModel.Channels.ConnectionStream.Read(Byte[] buffer,Int32 offset, Int32 count) bei System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count) bei System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- bei System.Net.Security.NegotiateStream.ProcessRead(Byte [] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[ ] 缓冲区，Int32 偏移量，Int32 大小，TimeSpan 超时）--- Ende der internen Ausnahmestapelüberwachung ---Int32 count) bei System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count) bei System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) bei System .Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 o 偏移量、Int32 大小、TimeSpan 超时）--- Ende der internen Ausnahmestapelüberwachung ---Int32 count) bei System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count) bei System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) bei System .Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 o 偏移量、Int32 大小、TimeSpan 超时）--- Ende der internen Ausnahmestapelüberwachung ---ReadPacket(Byte[] buffer, Int32 offset, Int32 count) bei System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.ProcessRead(Byte [] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout) - -- Ende der internen Ausnahmestapelüberwachung ---ReadPacket(Byte[] buffer, Int32 offset, Int32 count) bei System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.ProcessRead(Byte [] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout) - -- Ende der internen Ausnahmestapelüberwachung ---NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- 在 System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 o ffset, Int32 size, TimeSpan timeout) --- Ende der internen Ausnahmestapelüberwachung ---NegotiateStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- 在 System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 o ffset, Int32 size, TimeSpan timeout) --- Ende der internen Ausnahmestapelüberwachung ---Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net .Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 o ffset, Int32 size, TimeSpan timeout) --- Ende der实习生 Ausnahmestapelüberwachung ---Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) --- Ende der internen Ausnahmestapelüberwachung --- bei System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offs et, Int32 count, AsyncProtocolRequest asyncRequest) bei System.Net .Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 o ffset, Int32 size, TimeSpan timeout) --- Ende der实习生 Ausnahmestapelüberwachung ---Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout) --- Ende der internen Ausnahmestapelüberwachung ---Int 32 count) bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout) --- Ende der internen Ausnahmestapelüberwachung ---

服务器堆栈跟踪：bei System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 o ffset, Int32 size, TimeSpan timeout) bei System.ServiceModel.Channels.SessionConnectionReader.Receive(TimeSpan time eout) bei System.ServiceModel。 Channels.SynchronizedMessageSource.Receive(TimeSpan timeout) bei System.ServiceModel.Channels.FramingDuplexSessionChannel.Receive(TimeSpan timeout) bei System.ServiceModel.Channels.FramingDuplexSessionChannel.TryReceive(TimeS pan timeout, Message& message) bei System.ServiceModel.Dispatcher.DuplexChannelBinder .Request(Message message, TimeSpan timeout) bei System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean o neway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) bei System.ServiceModel。 Channels.ServiceChannelProxy。InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) bei System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

在 [0] 处重新抛出异常：bei System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage re qMsg, IMessage retMsg) bei System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) bei WcfSys。 Shared.IService.AccessManager(List`1 status, String process, String dtFrom, String dtTo) bei WcfSys.Server.Program.Main() in WcfSys.Server\Program.cs:Zeile 66。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:44:01.770

实际上，您发送回客户端的是 a `List<JobManager>`，但实际上它是派生类。所以有两种方法可以解决这个问题：

1.  将所有条目从复制`JobBuilder`到一个新`List<JobManager>`列表并返回该新列表
2.  也做`JobBuilder`一个`DataContract`。

由于 - 根据 OOP 原则 - 知道您返回的对象是 a `JobBuilder`，运行时会尝试序列化`JobBuilder`实例。但是，这不是 WCF 通信的已知类型。

# jaxb - 使用 JAXB 绑定的类重用不支持 SimpleTypes

> ID：15656803
> 
> 赞同：3
> 
> 时间：2013-03-27T10:37:33.110
> 
> 标签：jaxb, maven-jaxb2-plugin

我正在尝试重用已经编译和可用的类。这看起来可以通过声明绑定到预先存在的类来实现，如下面的示例绑定提取：-

```
<jaxb:bindings schemaLocation="MyExample.xsd">
    <jaxb:bindings node="//xs:simpleType[@name='MySimpleType']">
        <jaxb:class ref="com.example.MySimpleType" />
    </jaxb:bindings>
    <jaxb:bindings node="//xs:complexType[@name='MyComplexType']">
        <jaxb:class ref="com.example.MyComplexType" />
    </jaxb:bindings>
</jaxb:bindings> 
```

问题是虽然复杂类型工作得很好，但简单类型被忽略并仍然生成......

我尝试了各种不同的表示法（例如，scd），但在简单类型上没有成功。

非常欢迎任何想法或帮助....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-07T08:58:56.840

如果您尝试引用的生成类是枚举（即它实现`javax.xml.bind.annotation.XmlEnum`），那么您需要使用：

```
jaxb:typesafeEnumClass 
```

代替

```
jaxb:class 
```

在绑定中。

# c - 通过指向 32 位的指针结构对齐和访问两个 16 位字段

> ID：15656811
> 
> 赞同：0
> 
> 时间：2013-03-27T10:37:54.430
> 
> 标签：c

我在结构对齐方面有问题。似乎无论我做什么，编译器都会在结构的两个字段之间插入一个字节。这是输出的示例

```
 4  +j 4    +++       40004    .........    4 
 5  +j 5    +++       50005    .........    5 
 6  +j 6    +++       60006    .........    6 
 7  +j 7    +++       70007    .........    7 
 8  +j 8    +++       80008    .........    8 
 9  +j 9    +++       90009    .........    9 
```

字节 00 插入到 H 结构的 re 和 im 字段之间。如何阻止编译器对 H 执行此操作，以便指针 pW 可以通过指针 pW 将两个字段读取为 32 位？

也许我需要更改 3d 数组的大小。如果有一种不改变数组大小的方法会很棒。

```
#include <stdio.h>
#include <stdlib.h>

#define NA 4
#define NS 3
#define NF 5

typedef struct  {
  short re;
  short im;
} cint16 ;

typedef struct 
{
   cint16   H[NRx][NSTS][NFFT];
} AAA;

AAA        H;
AAA *      pH = &H;

int main(void)
{
    int i, j, k, n, m;
    cint16 *    pC;
    int *       pW;

    n = 0;
    for(i=0; i<NA; i++)
    {
        for(j=0; j<NS; j++)
        {
            for(k=0; k<NF; k++)
            {  
                H.H[i][j][k].re = n ;
                H.H[i][j][k].im = n;

                n++;
            }
        }
    }

    pC = &H.H[0][0][0];
    m = 0;
    for(k=0; k<NA; k++)
    {
        for(i=0; i<NS; i++)
        {
            for(n=0; n<NF; n++)
            {
                printf("%02d  ",    pC[m].re );
                printf("+j%02d,",   pC[m].im );
                printf("     ");
                m++;
            }
            printf("\n"); 
        }    
    }

    printf("\n\n");

    pW = (int *)&H.H[0][0][0];
    pC = &H.H[0][0][0];
    m = 0;
    for(k=0; k<NA*NS*NF; k++)
    {
        printf("%2X  ",   pC[m].re );
        printf("+j%2X",   pC[m].im );
        printf("    +++       ");
        printf("%X  ",   pW[m] );

        printf("  .........    %d \n", m);

        m++;
    }

    exit (0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:46:20.910

您误解了输出。

```
printf("%X  ",   pW[m] ); 
```

`unsigned int`以十六进制表示形式打印结构的四个字节

```
 4|00|04 
```

第一个`4`来自结构成员的一个非零字节，对应于`unsigned int`（无论是`re`还是`im`取决于字节序）的高阶字节，接下来的两个字节，`00`并且`04`来自另一个成员的两个字节。

成员之间没有插入字节，由于前导零的抑制，有一个字节（和一个半字节）没有打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:42:05.037

这取决于您使用的编译器。在 GCC 上有[`__attribute__ ((__packed__))`](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)，在 VC++ 上有[`#pragma pack`](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.100%29.aspx).

SO上可能有很多重复的问题，显示了如何使用这些问题。

* * *

还有一点警告：使用 32 位整数访问两个 16 位值将很大程度上取决于底层平台的字节顺序。例如，如果您通过 Internet 或通过文件发送此结构，则必须确保正确转换它。

# python - Python 3.x：移至下一行

> ID：15656817
> 
> 赞同：5
> 
> 时间：2013-03-27T10:38:23.180
> 
> 标签：python, python-3.x

我有一个从 .html 文件中提取一些文本的小脚本。

```
f = open(local_file,"r")
for line in f:
    searchphrase = '<span class="position'
    if searchphrase in line:
        print("found it\n") 
```

这对我来说很好（稍后将导入错误处理），我的问题是我要提取的文本在搜索短语之后跟随 2 行。如何在 .html 文件中下移 2 行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T10:44:35.093

您可以通过调用两次来推进`f`（这是一个可迭代的）两行[`next()`](http://docs.python.org/3/library/functions.html#next)：

```
with open(local_file,"r") as f
    for line in f:
        searchphrase = '<span class="position'
        if searchphrase in line:
            print("found it\n")
            next(f) # skip 1 line
            return next(f)  # and return the line after that. 
```

*但是*，如果您尝试解析 HTML，请考虑改用 HTML*解析器*。使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)，例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:47:11.713

这对我很有效：

```
f = open(local_file,"r")
found = -1
for line in f:
    if found == 2:
        print("Line: "+line);
        break
    elif found > 0:
        found += 1
    else:
        searchphrase = '<span class="position'
        if searchphrase in line:
            print("found it")
            found = 1 
```

输入文件是：

```
bla
<span class="position">Hello</span>
blub
that's it
whatever 
```

以及程序的输出：

```
found it
Line: that's it 
```

除了打电话`break`，您还可以重置`found`为 -1 以搜索更多出现的模式......

# .htaccess - .htaccess RewriteRule ^.*$ - [S=40] 到 Nginx

> ID：15656821
> 
> 赞同：0
> 
> 时间：2013-03-27T10:38:36.473
> 
> 标签：.htaccess, mod-rewrite, nginx

我在 appache 上设置了[https://github.com/lencioni/SLIR 。](https://github.com/lencioni/SLIR)它有一个 htaccess 文件并且运行良好。现在我已经搬到 Nginx 并希望 SLIR 以同样的方式工作。以下是我需要转换的内容。

```
# Prevent other scripts from interfering with SLIR
php_value auto_prepend_file none
php_value auto_append_file none

# Pretty URLs
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [S=40]
RewriteRule . index.php [L]
</IfModule>

# Prevent viewing of the error log file in its default location
<Files slir-error-log>
Order Deny,Allow
Deny from All
</Files> 
```

除了下面的行，我能够转换所有内容

```
RewriteRule ^.*$ - [S=40] 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:23:13.700

尝试这个：

```
if (!-f $request_filename) { rewrite ^.*$ /index.php last; } # check for file
if (!-d $request_filename) { rewrite ^.*$ /index.php last; } # check for dir 
```

**编辑**在我的服务器上检查 - 这条单行适用于两者，（目录和文件）

```
if (!-e $request_filename) { rewrite ^(.+)$ /index.php last; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:51:27.510

该`S`标志告诉 mod_rewrite 跳过一些以下规则（在您的情况下，它是**40**）。您也可以将您的规则更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L] 
```

可能更容易转换。

# php - 如何在使用理想形式选择 OnChange 后使用 db 值更新输入值？

> ID：15656822
> 
> 赞同：3
> 
> 时间：2013-03-27T10:38:39.120
> 
> 标签：php, jquery, forms, select, input

我正在使用来自 elclanrs 的理想形式，并且我有一个从数据库中填充的选择。OnChange 我想用数据库中的信息更新输入字段的值。在这种情况下，名字，姓氏。我用 AJAX 尝试过，但没有成功，因为当表单值更新时，表单的整个理想形式构成消失了。

我查看了stackoverflow，发现这是一个相当普遍的问题，但我似乎仍然无法解决。我用[了这个](https://stackoverflow.com/questions/5457739/change-value-of-input-onchange)，它不起作用，也许是因为我把它放在了错误的顺序？

这是我的代码：

```
 <form id="my-form" action="EditAccountHandler.php" method="post">

        <?php
        include 'conn/dbConnect.php';

        echo '<div><label>Gebruikers</label><select id="gebruiker" selected="$sUsername" name="selectedUser" onchange="updateInput(this.value)">';

$sqEditUser = mysql_query("SELECT * FROM account a, persoon p WHERE a.idSuper = p.idUser", $con);

        while($row = mysql_fetch_array($sqEditUser))
                {
                     $iIdUser = $row['idUser'];
                     $sFirstname = $row['Voornaam'];
                     $sLastname = $row['Achternaam'];
                     $sUsername = "{$sLastname}, {$sFirstname}";

                     echo "<option value='$iIdUser'>$sUsername</option>";
                }

        echo "</select></div>";
        ?>
        <script>
        function updateInput(<?= json_encode($sFirstname); ?>)
        {
        document.getElementById("naam").value = <?php echo json_encode($sFirstname); ?>;
        }
        </script>
                    <div><label>Voornaam</label><input id="naam" name="naam" type="text"/></div>
                   <div><label>Achternaam</label><input id="anaam" name="anaam" type="text"/></div>
              <div>     
                <button id="reset" type="button">Reset</button>
                <button type="submit">Wijzigen</button>
              </div>
            </form> 
```

这就是我想要实现的目标： [示例图片](http://tinypic.com/r/33z92k7/6)

我不确定我做错了什么。你们能帮帮我吗？

**编辑**
删除了与第一个代码片段相比翻倍的代码。
添加了 echo
删除了 action="EditAccountHandler.php"
添加了 Idealforms 验证代码 替换为最终代码

```
<div id="main">

                <h3>Wijzig Account</h3><br />
                <form id="myselect" action="" method="post">
                <div>
                <label>Gebruikers</label><select id="gebruiker" selected="$sUsername" name="selectedUser" onchange="this.form.submit()">
                <?php
                include 'conn/dbConnect.php';

                $sqUser = mysql_query("SELECT * FROM account a, persoon p WHERE a.idSuper = p.idUser", $con);

                    while($row = mysql_fetch_array($sqUser))
                    {
                         $iIdUser = $row['idUser'];
                         $sFirstname = $row['Voornaam'];
                         $sLastname = $row['Achternaam'];
                         $sUsername = "{$sLastname}, {$sFirstname}";

                         echo "<option value='$iIdUser'>$sUsername</option>";
                    }
                ?>
                </select>
                </div>
                </form>

                <script>
                var options = { onFail: function(){alert('Selecteer een persoon')}};
                var $myform1 = $('#myselect').idealforms(options).data('idealforms');
                $myform1.focusFirst();
                </script>   

                <?php
                    if(!empty($_POST['selectedUser']))
                    {
                        $sqGetUser = mysql_query("SELECT * FROM persoon WHERE idUser = '$_POST[selectedUser]'", $con);      
                        while($row = mysql_fetch_array($sqGetUser))
                        {
                             $sFname = $row['Voornaam'];
                             $sLname = $row['Achternaam'];
                        }
                ?>

                    <form id="my-form" action="EditAccountHandler.php" method="post">
                    <div><label>Voornaam</label><input id="naam" name="naam" value="<?php echo htmlspecialchars($sFname); ?>" type="text"/></div>
                    <div><label>Achternaam</label><input id="anaam" name="anaam" value="<?php echo htmlspecialchars($sLname); ?>" type="text"/></div>
                    <div>
                        <label>Rechten</label>
                        <label><input type="radio" name="rechten" value="Administrator"/>Administrator</label>
                        <label><input type="radio" name="rechten" value="Contentmanager"/>Contentmanager</label>
                        <label><input type="radio" name="rechten" value="Administratie"/>Administratie</label>
                        <label><input type="radio" name="rechten" value="Medewerker"/>Medewerker</label>
                        <label><input type="radio" name="rechten" value="Klant" checked/>Klant</label>
                        <label><input type="radio" name="rechten" value="Gast"/>Gast</label>
                        <label><input type="radio" name="rechten" value="MedeKlant"/>MedeKlant</label>
                    </div>
                    <div>   
                        <button id="reset" type="button">Reset</button>
                        <button type="submit">Wijzigen</button>
                    </div>
                </form>
            </div>
        </div>
<script>

var options = 
{
    onFail: function() 
    {
      alert( 'Vul alle velden correct in.' )
    },
    inputs: 
    {               
        'anaam': 
        {
        filters: 'required name',

        },

        'naam': 
        {
        filters: 'required name',
        },
    }
};

 var $myform = $('#my-form').idealforms(options).data('idealforms');

  $('#reset').click(function(){ $myform.reset().fresh().focusFirst() });
  $myform.focusFirst();
</script>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:59:20.733

我认为您正在将客户端代码与服务器代码混淆。

触发 onChange 事件后，您必须重新加载页面，例如 onChange="this.form.submit()" 并验证 if(!empty($_POST["selectedUser"])) 然后填写使用您可以通过新 SQL 查询获得的数据形成表单，其中 id = $_POST["selectedUser"]。

在这种情况下，您不需要 updateuser 功能。

如果您使用 AJAX，则需要 updateuser 函数，但您必须摆脱在服务器上执行的 json_encode 方法，而使用 ajax，一切都在客户端部分。很简单：“函数 updateuser(id)”。

您可以使用 jquery 进行 ajax 调用以获取信息，然后填写表单字段。

编辑：

检查您提供的新代码。我看到一个错误，您正在使用 htmlspecialchars 函数，但您没有回应它，;-)。你应该使用“回声......”。

对于表单，如果您在表单标签内，则应使用“this.form.submit()”。如果你使用 jquery，它会是这样的：

```
<script type="text/javascript">

$("#selectedUser").change(function()
{
    if(this.form.elements['selectedUser'].value!="")
    {
        this.form.submit();
    }
});
</script> 
```

# jquery - 当我单击手风琴页面滚动到顶部时，我有一个页面，顶部有两个部分地图，底部有手风琴菜单

> ID：15656826
> 
> 赞同：-2
> 
> 时间：2013-03-27T10:38:49.133
> 
> 标签：jquery

我有一个页面，顶部有两个部分地图，底部有 jQuery 手风琴菜单，当我单击手风琴菜单页面滚动到顶部时，我需要页面应该保持在同一个位置，这样我才能正确看到 jQuery 手风琴菜单。

有没有办法防止这种情况发生？这样当我点击菜单时，页面应该留在浏览器中的同一位置？

```
menu.find('ul li > a').bind('click',function(event,ui){
    /*var ahref = $(event.currentTarget).attr('href');
    if(ahref!='#'){
        window.location.href = ahref;
    }else{*/

        var currentlink=$(event.currentTarget);
        if (currentlink.parent().find('ul.active').size()==1)
        {
            currentlink.parent().find('ul.active').slideUp('medium',function(){
               currentlink.parent().find('ul.active').removeClass('active');
            });
        }
        else if (menu.find('ul li ul.active').size()==0)
        {
            show(currentlink);
        }
        else
        {
            menu.find('ul li ul.active').slideUp('medium',function(){
                menu.find('ul li ul').removeClass('active');
                show(currentlink);
            });
        }
   /* }*/
}); 
```

滚动手风琴菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:41:22.813

您需要在单击事件函数的末尾添加一个`return false`或，否则浏览器将通过附加到页面 URI 来跟踪您单击的链接，该 URI 指示浏览器在页面上找到*命名*的锚点。由于您没有提供锚名称（例如，而不是），因此浏览器会跳转到页面顶部。[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)`<a href="#">``#`*`http://www.url.com/page#``http://www.url.com/page#anchorname`*

 *例如

```
menu.find('ul li > a').bind('click',function(event, ui){
    // your code

    // choose one of the following lines
    return false
    event.preventDefault()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:40:42.643

您可以使用[stopPropagation](https://stackoverflow.com/questions/4735006/javascript-how-to-enable-stoppropagation)、[event.preventDefault 或 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false) ...
或者只是将其更改`href`为`javascript:void(0)`.*

# java - 具有多个项目的Android TransitionDrawable

> ID：15656828
> 
> 赞同：14
> 
> 时间：2013-03-27T10:38:59.430
> 
> 标签：java, android

我想在 Android 中创建一个带有文本和背景图像的按钮。背景图像应每 X 次淡入淡出。

我使用带有 2 个图像的 TransitionDrawable 进行这项工作。

但我不能让它处理超过 2 个图像。

我有的 ：

在 Java 代码中，我创建了一个 Button 并设置了一个背景（这是一个在 XML 中定义的 TransitionDrawable）。我开始过渡。

```
final Button b = new Button(getApplicationContext());
b.setTextColor(getResources().getColor(R.color.white));
b.setText("Some text");
b.setBackgroundDrawable(getResources().getDrawable(R.drawable.tile));
StateListDrawable background = (StateListDrawable) b.getBackground();
TransitionDrawable td = (TransitionDrawable) background.getCurrent();
td.startTransition(2000); 
```

在 XML 我在 tile.xml 中定义

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#449def" />
        </shape>
    </item>
    <item android:drawable="@drawable/transition">
        <shape>
            <solid
                android:color="#0000ff" />
        </shape>
    </item>
</selector> 
```

最后是一个transition.xml

```
<?xml version="1.0" encoding="utf-8"?>
<transition xmlns:android="http://schemas.android.com/apk/res/android"     android:oneshot="false">
  <item android:drawable="@drawable/desert"/> 
  <item android:drawable="@drawable/hydrangeas" /> 
  <item android:drawable="@drawable/jellyfish" /> 
</transition> 
```

现在的效果是，当我启动应用程序时，会显示沙漠图像。该图像按应有的方式淡入绣球花图像。但是从未显示过水母图像。

在 TransitionDrawables 的文档中，声明您可以指定超过 2 个可绘制对象，但我无法使其正常工作。

我也试过这个没有任何 XML 但在纯 JAVA 中但这给出了完全相同的问题:-(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-05T11:04:56.890

您可以使用处理程序来完成

```
mAnimateImage is your button

int DrawableImage[] = {R.drawable.back_red, R.drawable.back_green, R.drawable.back_purple};

final Handler handler = new Handler();
    final int[] i = {0};
    final int[] j = {1};
    handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    Resources res = getApplicationContext().getResources();
                    TransitionDrawable out = new TransitionDrawable(new Drawable[]{res.getDrawable(DrawableImage[i[0]]), res.getDrawable(DrawableImage[j[0]])});
                    out.setCrossFadeEnabled(true);
                    mAnimateImage.setBackgroundDrawable(out);
                    out.startTransition(4000);
                    i[0]++;
                    j[0]++;
                    if (j[0] == DrawableImage.length) {
                        j[0] = 0;
                    }
                    if (i[0] == DrawableImage.length) {
                        i[0] = 0;
                    }
                    handler.postDelayed(this, 8000);
                }
            });
        }
    }, 0); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-23T09:44:54.483

根据官方文档，TransitionDrawable 只能在 2 层之间交叉淡入淡出，引用自官方 android 参考。

> LayerDrawables 的扩展，旨在在第一层和第二层之间交叉淡入淡出。要开始转换，请调用 startTransition(int)。要仅显示第一层，请调用 resetTransition()。

如果你不仔细阅读它，因为它扩展了 LayerDrawables，它可以有多个层，你可能会认为你可以从 N 层交叉淡入淡出。但是很清楚，startTransition 显示第二层，resetTransition 显示第一层。

我建议你自己实现多个转换。我要做的是拥有 2 张图像并为它们设置动画。您可能需要手动设置可绘制对象，但它应该是一段非常简单的代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-09T12:43:27.560

在附录操作时间可以动态改变图片

在您的**TransitionDrawable**上使用**td.setDrawableByLayerId(td.getId(1), drawable)**

 **```
TransitionDrawable transitionDrawable = (TransitionDrawable) myImage
                            .getDrawable();
transitionDrawable.setDrawableByLayerId(transitionDrawable.getId(1), getResources()
                            .getDrawable(R.drawable.c)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-24T11:11:19.097

您最多只能使用 转换两个图像`TransitionDrawable`。要处理两个以上的图像，您可以扩展 LayerDrawable 并实现自己的`TransitionDrawable`.

[这](https://github.com/JuneLeGency/TransitionDrawable/blob/master/app/src/main/java/legency/june/transitiondrawable/TransitionDrawable.java)是自定义的现成实现，`TransitionDrawable`可以处理两个以上的图像。

[您可以在 Github 上](https://github.com/JuneLeGency/TransitionDrawable)看到完整的示例以及 gif 演示。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-02-07T23:49:10.920

您只需在每次迭代中创建一个新的 TransitionDrawable。

这将逐步增加您添加的所有图像的索引，您可以拥有任意数量的图像......

```
private Handler handler = new Handler();

private void startImageCrossfading(@IdRes int imageViewResId, @DrawableRes int... drawableIds) {

    Drawable[] bitmapDrawables = new Drawable[drawableIds.length];

    for (int i = 0; i < drawableIds.length; i++) {
        // if you are using Vectors cross fade won't work unless you do this! - See my answer at https://stackoverflow.com/a/54583929/114549
        // bitmapDrawables[i] = getBitmapDrawableFromVectorDrawable(this, drawableIds[i]);
        bitmapDrawables[i] = ContextCompat.getDrawable(this, drawableIds[i]);
    }

    final ImageView imageView = findViewById(imageViewResId);

    handler.postDelayed(new Runnable() {
        int index = 0;
        @Override
        public void run() {

            TransitionDrawable td = new TransitionDrawable(new Drawable[]{
                    bitmapDrawables[index % bitmapDrawables.length],
                    bitmapDrawables[++index % bitmapDrawables.length]
            });
            td.setCrossFadeEnabled(true);
            imageView.setImageDrawable(td);

            td.startTransition(500); // transitionDurationMillis
            handler.postDelayed(this, 3000);
        }
    }, 3000);

} 
```

暂停时，您应该清理处理程序

```
handler.removeCallbacksAndMessages(null); 
```**

# caching - Angularjs：$cacheFactory 的日期到期

> ID：15656829
> 
> 赞同：4
> 
> 时间：2013-03-27T10:39:04.367
> 
> 标签：caching, angularjs, browser-cache

我使用 $cacheFactory 在我的应用程序中添加了缓存，但是当用户关闭浏览器然后重新打开时，有关浏览产品的缓存数据已过期。

有没有办法让它变长？放一个到期日期或类似的东西？

谢谢。

**编辑：**我可能不得不使用[Breeze.js](http://www.breezejs.com/)，但在此之前我想知道你们中是否有人知道是否可以使用 angularjs 来做到这一点（我阅读了 API 并且没有关于它的信息：S）。

**编辑 2：**帮助，我使用 $cacheFactory 的方式就像这个[JSFiddle 代码](http://jsfiddle.net/moderndegree/yYEXN/)。

```
factory('SomeCache', function($cacheFactory) {
    return $cacheFactory('someCache', {
        capacity: 3 // optional - turns the cache into LRU cache
    });
}). 
```

**编辑 3：** Lawnchair 不是一个选项，它存储在一个 javascript 数组中，并且在关闭浏览器后不会保留数据..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:29:43.200

$cacheFactory 使用内存中的浏览器存储，这意味着即使页面刷新它也不会持续存在，更不用说关闭和重新打开浏览器了。

如果您想跨页面加载和浏览器会话缓存数据，您正在寻找 localStorage。请参阅此处以获取一个非常简单的示例：

[http://jsbin.com/acokis/2/edit](http://jsbin.com/acokis/2/edit)

我想你会想看看[amplify.js](http://amplifyjs.com/api/store/)或[lionchair.js](http://brian.io/lawnchair/)，因为它们为管理 localStorage 提供了很好的包装器，还为不支持 localStorage 的浏览器提供了后备适配器（虽然后备选项不会在页面刷新时持续存在） .

# timer - I2C 和定时器中断 (timer1)

> ID：15656830
> 
> 赞同：2
> 
> 时间：2013-03-27T10:39:06.463
> 
> 标签：timer, interrupt, pic, sampling, i2c

我正在尝试使用 dsPIC33 微控制器从多个 I2C 从设备中读取数据。

我希望有人能建议我使用定时器中断（在本例中为 timer1）并收集 I2C 数据的正确方法。

到目前为止，我可以通过在 while 循环中循环从 I2C 从设备很好地收集数据，但是由于尝试添加定时器中断（所以我可以应用自己的采样率而不是“尽可能快地收集”）我的 I2C 软件司机卡住了。

我尝试过使用非常低的计时器速度（目前为 1Hz），并且 I2C 处于标准的 100KHz 速度。PIC 以 80MHz 的频率处理。

使用定时器和 I2C 模块的正确方法是什么？我在网上看了看，似乎这可能是中断优先级的问题，因为在使用 timer1 时，我在中断（timer1）中有一个中断（I2C），尽管到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:05:12.253

看来我设法解决了自己的问题，而且也相当快。

原来这是一个中断优先级问题，我之前将 timer1 设置为优先级 7（最高）：

```
IPC0bits.T1IP = 0b111; // Timer1 Interrupt priority level=7 
```

将其更改为优先级 1 解决了问题：

```
IPC0bits.T1IP = 0b001; // Timer1 Interrupt priority level=1 
```

希望这有助于遇到这个问题的其他人，我的猜测是不同的优先级与 I2C 中断冲突。

# javascript - 跨浏览器的selectNodes替代品

> ID：15656841
> 
> 赞同：3
> 
> 时间：2013-03-27T10:39:40.317
> 
> 标签：javascript, cross-browser

基本上到目前为止，我有这段代码试图让它跨浏览器工作。我试图获得选择节点的替代方案，但由于在第一次迭代下一次后出错，我只返回数组中的一个项目（如在 IE 中工作，当前为 7）。我不确定我是否遗漏了我如何做到这一点？

```
try {
   var oNodeDefinitions = XMLResponse.selectNodes("//Definitions/Definition");
} 

   catch (err) {
   node = XMLResponse;
    var xpe = new XPathEvaluator();
    var nsResolver = xpe.createNSResolver(node.ownerDocument == null ?  node.documentElement : node.ownerDocument.documentElement);
    oNodeDef = xpe.evaluate("//Definitions/Definition", oAJAXRequest.XMLResponse, nsResolver, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null);
    a = 0;
   b = 0;

    var nodes = new Array();
    while (oNodeDef) {
        try {

            nodes[a] = oNodeDef;
            oNodeDef = oNodeDef.iterateNext();
            a = a + 1;

        }
    catch(err) {
            oNodeDef = false;
        }
    }

}

 alert("a"); 
```

# php - 服务器端数据表查找标记为已删除的条目

> ID：15656847
> 
> 赞同：1
> 
> 时间：2013-03-27T10:39:57.257
> 
> 标签：php, jquery, codeigniter, activerecord, datatables

我正在使用服务器端数据表（和 CodeIgniter）来显示数据。

我不能直接从数据库中删除条目（不幸的是，该项目的指导方针），所以我正在使用已删除标志，数据库表中名为“已删除”的列（tinyint(1)，因为 MySQL 自动将其从 BOOLEAN 更改到那个）。

对于服务器端处理，我使用[https://github.com/blake-nouribekian/codeigniter-datatables/blob/master/data.php](https://github.com/blake-nouribekian/codeigniter-datatables/blob/master/data.php)提供的脚本，并进行了一些小改动

```
// Columns use for SELECT part of the query. These names are not being escaped, so subqueries etc are possible.
$aColumns = array('events.id AS id', 'title', "FROM_UNIXTIME(start, '%d.%m.%Y') AS start", "FROM_UNIXTIME(start, '%H:%i') AS start_time", '(SELECT COUNT(*) FROM event_bookings WHERE id_event = events.id AND confirmed IS NOT NULL) AS participants', 'max_participants');
// Column names for WHERE clause (important for stuff like subqueries).
$aColumnNames = array('id', 'title', "start", "start", '(SELECT COUNT(*) FROM event_bookings WHERE id_event = events.id AND confirmed IS NOT NULL)', 'max_participants');
// Column for deleted flag in the DB.
$deleted_column = 'deleted';
// DB table to use
$sTable = 'events';
// no deleted entries
$this->db->where(Event_Model::$dbDeletedFlag, 0); 
```

最初，数据显示正确，没有显示标记为已删除的条目。但是，只要我在搜索字段中输入内容，它就会找到与“... LIKE %input%”匹配的所有条目。我对 $this->db->where(Event_Model::$dbDeletedFlag, 0); 命令，把它放在每一个可能的行，仍然没有改善。它显示标记为已删除的条目。当使用搜索字段时，where 命令不知何故不起作用。

任何建议如何解决这个问题？

**编辑：**

感谢您到目前为止的答案。我在这里发布整个功能：

```
public function server_processing() {
    // EDIT THIS
    // -----
    // Columns use for SELECT part of the query. These names are not being escaped, so subqueries etc are possible.
    $aColumns = array('events.id AS id', 'title', "FROM_UNIXTIME(start, '%d.%m.%Y') AS start", "FROM_UNIXTIME(start, '%H:%i') AS start_time", '(SELECT COUNT(*) FROM event_bookings WHERE id_event = events.id AND confirmed IS NOT NULL) AS participants', 'max_participants');
    // Column names for WHERE clause (important for stuff like subqueries).
    $aColumnNames = array('id', 'title', "start", "start", '(SELECT COUNT(*) FROM event_bookings WHERE id_event = events.id AND confirmed IS NOT NULL)', 'max_participants');
    // Column for deleted flag in the DB.
    $deleted_column = 'deleted';
    // DB table to use
    $sTable = 'events';
    // no deleted entries
    $this->db->where(Event_Model::$dbDeletedFlag, 0);
    // -------

    $iDisplayStart = $this->input->get_post('iDisplayStart', true);
    $iDisplayLength = $this->input->get_post('iDisplayLength', true);
    $iSortCol_0 = $this->input->get_post('iSortCol_0', true);
    $iSortingCols = $this->input->get_post('iSortingCols', true);
    $sSearch = $this->input->get_post('sSearch', true);
    $sEcho = $this->input->get_post('sEcho', true);

    // Paging
    if (isset($iDisplayStart) && $iDisplayLength != '-1') {
      $this->db->limit($this->db->escape_str($iDisplayLength), $this->db->escape_str($iDisplayStart));
    }

    // Ordering
    if (isset($iSortCol_0)) {
      for ($i = 0; $i < intval($iSortingCols); $i++) {
        $iSortCol = $this->input->get_post('iSortCol_' . $i, true);
        $bSortable = $this->input->get_post('bSortable_' . intval($iSortCol), true);
        $sSortDir = $this->input->get_post('sSortDir_' . $i, true);

        if ($bSortable == 'true') {
          $this->db->order_by($aColumnNames[intval($this->db->escape_str($iSortCol))], $this->db->escape_str($sSortDir));
        }
      }
    }

    /*
     * Filtering
     * NOTE this does not match the built-in DataTables filtering which does it
     * word by word on any field. It's possible to do here, but concerned about efficiency
     * on very large tables, and MySQL's regex functionality is very limited
     */
    if (isset($sSearch) && !empty($sSearch)) {
      for ($i = 0; $i < count($aColumns); $i++) {
        $bSearchable = $this->input->get_post('bSearchable_' . $i, true);

        // Individual column filtering
        if (isset($bSearchable) && $bSearchable == 'true') {
          $this->db->or_like($aColumnNames[$i], $this->db->escape_like_str($sSearch));
        }
      }
    }

    // Select Data
    $this->db->select('SQL_CALC_FOUND_ROWS ' . str_replace(' , ', ' ', implode(', ', $aColumns)), false);
    $rResult = $this->db->get($sTable);

    // Data set length after filtering
    $this->db->select('FOUND_ROWS() AS found_rows');
    $iFilteredTotal = $this->db->get()->row()->found_rows;

    // Total data set length
    $iTotal = $this->db->count_all($sTable);

    // Output
    $output = array(
        'sEcho' => intval($sEcho),
        'iTotalRecords' => $iTotal,
        'iTotalDisplayRecords' => $iFilteredTotal,
        'aaData' => array()
    );

    $output['aaData'] = array();
    foreach ($rResult->result_array() as $aRow) {
      // EDIT THIS
      // --------
      $row = array(
          '<a class="detail_link link" href="javascript:void(0);" data-event-id="' . $aRow['id'] . '">' . $aRow['title'] . '</a>',
          $aRow['start'],
          $aRow['start_time'],
          $aRow['participants'] . ' / ' . $aRow['max_participants']
      );
      if ($this->auth->access(Auth::Admin, true, false)) {
        $row[] = '<img class="edit_link" data-event-id="' . $aRow['id'] . '" src="' . base_url() . 'img/icons/glyphicons_150_edit.png"> <img class="delete_link" data-event-id="' . $aRow['id'] . '" src="' . base_url() . 'img/icons/glyphicons_192_circle_remove.png">';
      }
      // --------
      $output['aaData'][] = $row;
    }

    echo json_encode($output);
  } 
```

感谢你付出的努力！

**编辑 2**

我认为，问题在于，当使用 Search 字段时，生成的 SQL 语句看起来像这样：

```
SELECT fields FROM table WHERE deleted = 0 OR field LIKE %input% 
```

而它应该是：

```
SELECT fields FROM table WHERE field LIKE %input% AND deleted = 0 
```

我只是不知道，Active 记录如何构建 SQL 语句，以解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:27:00.637

根据您的评论，问题似乎在于 Active Record 如何构建子句的`LIKE`片段。`WHERE`

```
if (isset($sSearch) && !empty($sSearch)) {
    // Build up the SQL manually. First, initialize SQL string.  
    // This clause will be ANDed to the other WHERE clauses; 
    // Use parentheses to isolate the OR in the inner clauses
    $sql = "("; // 
    for ($i = 0; $i < count($aColumns); $i++) {
      $bSearchable = $this->input->get_post('bSearchable_' . $i, true);

      // Individual column filtering
      if (isset($bSearchable) && $bSearchable == 'true') {
        //$this->db->or_like($aColumnNames[$i], $this->db->escape_like_str($sSearch));
        $sql_tag = ($i==0) ? "" : " OR "; // don't need OR before the first field
        $sql .= $sql_tag . $aColumnNames[$i] . " LIKE " . $this->db->escape_like_str($sSearch);
      }
    }
    $sql .= ")"; // close parentheses
    $this->db->where($sql);  // this will add to the WHERE clause using AND
} 
```

我要做的是`LIKE`手动建立条款。您需要允许多个字段可搜索。如果我的详细信息正确，您的最终查询应该类似于：

```
SELECT fields FROM table WHERE deleted = 0 
  AND (field1 LIKE '%input%' OR field2 LIKE '%input%' OR field3 LIKE '%input%') 
```

假设您要搜索三个字段。

# c++ - CRichEditCtrl::StreamIn 不读取整个文本文件

> ID：15656854
> 
> 赞同：0
> 
> 时间：2013-03-27T10:40:13.447
> 
> 标签：c++, mfc, cricheditctrl

我有一个要阅读的文本文件，然后将其放入富编辑框中。问题是，`pbBuff`缓冲区获取整个文件，但只有第一行添加到 CRichEditCtrl 小部件。

这是回调函数：

```
static DWORD CALLBACK StreamInCallback(DWORD dwCookie, LPBYTE pbBuff, LONG cb, LONG FAR *pcb) 
{   
    CFile* dat = (CFile*) dwCookie;
    *pcb = dat->Read(pbBuff, cb);

    return 0; 
} 
```

以及我如何在`OnInitDialog()`函数中设置它：

```
CFile dat(_T("readme.txt"), CFile::modeRead);
EDITSTREAM es;
es.dwCookie = (DWORD)&dat; 
es.pfnCallback = StreamInCallback;  
m_RichEditBesedilo.StreamIn(SF_TEXT, es); 
```

# jsf-2 - Primefaces动态overlayPanel只显示一次

> ID：15656856
> 
> 赞同：7
> 
> 时间：2013-03-27T10:40:22.500
> 
> 标签：jsf-2, primefaces

我有一个带有打开 Primafaces 按钮的表单`overlayPanel`。在面板中有另一个按钮，它执行 Ajax 操作，然后关闭覆盖。
这是一个完全没有 Ajax 操作的简化版本：

```
<h:form>
    <p:commandButton id="button1" value="Open overlay" type="button"/>
    <p:overlayPanel for="button1" widgetVar="ovl" dynamic="true">
        <p:commandButton value="Close" oncomplete="ovl.hide();"
                         update="@form"/>
    </p:overlayPanel>
</h:form> 
```

请注意，面板必须具有`dynamic="true"`，因为动态内容必须在实际应用程序中获取，并且`update="@form"`是更新其他表单组件所必需的。

问题是：如果我有两个属性，`dynamic="true"`并且`update="@form"`覆盖层只在第一次出现。单击“关闭”按钮后，如果我再次尝试单击“打开覆盖”，面板将不会显示。

我究竟做错了什么？

（使用 PrimeFaces 3.5 和 GlassFish 3.1.2.2）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-02T14:58:47.550

`onclick="widgetVar.loadContents()"`在下拉按钮中使用`overlaypanel`，其中`widgetVar`的 var 是`overlayPanel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:23:42.647

我在下面的代码中注意到的是，一旦您更新了包含 Open-Overlay 按钮的表单，它就会中断。

```
<h:form>
    <p:commandButton id="button1" value="Open overlay" type="button"/>
    <p:commandButton value="break things" update="@form" />
    <p:overlayPanel for="button1" dynamic="true">
        <p:commandButton value="Close" update="@form" />
    </p:overlayPanel>
</h:form> 
```

如果可以将表单一分为二，则嵌入在 OverlayPanel 中的按钮可以尝试调用单击用于切换覆盖的按钮。也许与下面的一致。

```
<h:form>
    <p:commandButton id="button1" value="Open overlay" type="button"/>
    <p:overlayPanel for="button1" dynamic="true" >
        <p:commandButton value="Close" update=":formToBeUpdated" onclick="document.getElementById('button1').click();"/>
    </p:overlayPanel>
</h:form>

<h:form id="formToBeUpdated">
    <h:inputText value="bleh"/>
</h:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T01:52:20.953

你应该给你的 overlayPanel 一个 id 和你的按钮的 oncomplete 显示它。代码如下：

```
<h:form>
   <p:commandButton id="button1" value="Open overlay" type="button" oncomplete="PF('ovlID').show()"/>
   <p:overlayPanel id="ovlID" for="button1" widgetVar="ovl" dynamic="true">
      <p:commandButton value="Close" oncomplete="ovl.hide();"
                     update="@form"/>
   </p:overlayPanel>
</h:form> 
```

# java - 我的 android 应用程序因 nullPointer 异常而崩溃

> ID：15656857
> 
> 赞同：0
> 
> 时间：2013-03-27T10:40:22.853
> 
> 标签：java, android, crash

我的应用程序有问题，当我运行“showContest”活动时，我的应用程序因该错误而崩溃：

```
03-27 11:18:49.038: E/AndroidRuntime(5279): FATAL EXCEPTION: main
03-27 11:18:49.038: E/AndroidRuntime(5279): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{ru.artemzin.android.tutorials.listfragmentexample/time2win.android.ShowContest}: java.lang.NullPointerException
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.os.Looper.loop(Looper.java:137)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at dalvik.system.NativeStart.main(Native Method)
03-27 11:18:49.038: E/AndroidRuntime(5279): Caused by: java.lang.NullPointerException
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:161)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at time2win.android.User.getUserId(User.java:10)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at time2win.android.ShowContest.<init>(ShowContest.java:53)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at java.lang.Class.newInstanceImpl(Native Method)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at java.lang.Class.newInstance(Class.java:1319)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-27 11:18:49.038: E/AndroidRuntime(5279):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-27 11:18:49.038: E/AndroidRuntime(5279):     ... 11 more 
```

表演赛：

```
package myapp.android;

import java.io.IOException;
import java.io.InputStream;
import java.io.Serializable;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import ru.artemzin.android.tutorials.listfragmentexample.R;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class ShowContest extends Activity {
    public static String URL = null;
    public static String title = null;
    public static String subtitle = null;
    public static String description = null;
    public static String won = null;
    public static String color = null;
    public static String toDisplay = null;
    public static String arrayPost = null;
    public static int pos;
    public static int nextPosInt;
    public static int backPosInt;
    public static int dataSize;
    public static ArrayList<String> data = null;
    public String idContest = (String) getIntent().getSerializableExtra("id");
    public String pass = User.getUserPass(this);
    public String id = User.getUserId(this);
    ImageView imageView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.out.println("Create");

        String etat = null;
        String content = null;
        if (getIntent().getSerializableExtra("participate_sending") != null)
        {
            Document docStat = null;
            System.out.println("In da IF");
            String xmlStat = new XMLfunctionsBack().doInBackground("urltoxml);
            System.out.println("XML request done");
            docStat = XMLfunctions.XMLfromString(xmlStat);
            System.out.println("parsing done");
            NodeList nodesParticipate = docStat.getElementsByTagName("respond");    
            for (int i = 0; i < nodesParticipate.getLength(); i++) {                                        
                Element e = (Element)nodesParticipate.item(i);
                etat = XMLfunctions.getValue(e, "name");
                content = XMLfunctions.getValue(e, "content");
            }
            if (etat == "ERREUR")
            {
                 Toast.makeText(this, content, Toast.LENGTH_LONG).show();
            }
            if (etat == "OK")
            {
                Toast.makeText(this, content, Toast.LENGTH_LONG).show();
            }
            else
                Toast.makeText(this, "Strange ERROR", Toast.LENGTH_LONG).show();            
        }
        System.out.println("After da IF");
        /*********************Fetch Contest content*******************/
        //Needed for arrow navigation
        final Serializable posSerialize = getIntent().getSerializableExtra("pos");
        pos = Integer.parseInt((String) getIntent().getSerializableExtra("pos"));
        data = getIntent().getStringArrayListExtra("data");
        nextPosInt = pos +1;
        backPosInt = pos -1;
        dataSize = data.size() -1;
        String xml = new XMLfunctionsBack().doInBackground(urltoyml);
        Document doc = XMLfunctions.XMLfromString(xml);

        NodeList nodes = doc.getElementsByTagName("contest");   
        for (int i = 0; i < nodes.getLength(); i++) {                                       
            Element e = (Element)nodes.item(i);
            URL = "urltoimage);
            title = XMLfunctions.getValue(e, "name");
            subtitle = XMLfunctions.getValue(e, "subtitle");
            description = XMLfunctions.getValue(e, "description");
            won = XMLfunctions.getValue(e, "description");
            color = "#" + XMLfunctions.getValue(e, "color");
            toDisplay  = XMLfunctions.getValue(e, "text_to_display");
        }

        setContentView(R.layout.show_contest);
        imageView = (ImageView) findViewById(R.id.imageView);
        TextView titleText = (TextView) findViewById(R.id.textView1);
        titleText.setText(title);
        titleText.setTextColor(Color.parseColor(color));

        TextView subtitleText = (TextView) findViewById(R.id.textView2);
        subtitleText.setText(subtitle);

        TextView descriptionText = (TextView) findViewById(R.id.textView3);
        descriptionText.setText(description);

        TextView toDisplayText = (TextView) findViewById(R.id.todisplay);
        toDisplayText.setText(toDisplay);
        toDisplayText.setTextColor(Color.parseColor(color));
        // Create an object for subclass of AsyncTask
        GetXMLTask task = new GetXMLTask();
        // Execute the task
        task.execute(new String[] { URL });

        Button button = (Button) findViewById(R.id.participer);

        button.setOnClickListener(new OnClickListener() {

          @Override
          public void onClick(View arg0) {
            Intent intent = new Intent(getBaseContext(), Participate.class);
            intent.putExtra("id",idContest);
            intent.putExtra("pos",posSerialize);
            intent.putStringArrayListExtra( "data", data);
            startActivity(intent);

          }
        });

    }
    /************************Top Menu nav*****************************/
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.activity_main, menu);
      return true;
    } 
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
      case R.id.action_forward:
        if (dataSize > pos)
        {

            String nextPos = String.valueOf(nextPosInt);
            String next = data.get(nextPosInt);
            Intent intent = new Intent(this, ShowContest.class);
            intent.putExtra("id", next);
            intent.putExtra("pos",nextPos);
            intent.putStringArrayListExtra( "data", data);
            startActivity(intent); 
        }
        else
        {
            Toast.makeText(this, "Vous êtes déjà au dernier concour", Toast.LENGTH_LONG)
            .show();
        }
        break;
      case R.id.action_back:
        if (0 < pos)
        {

            String backPos = String.valueOf(backPosInt);
            String back = data.get(backPosInt);
            Intent intent = new Intent(this, ShowContest.class);
            intent.putExtra("id", back);
            intent.putExtra("pos",backPos);
            intent.putStringArrayListExtra( "data", data);
            startActivity(intent); 
        }
        else
        {
            Toast.makeText(this, "Vous êtes déjà au premier concour", Toast.LENGTH_LONG)
              .show();
        }
        break;
      case R.id.boutique:
            Intent intentBoutique = new Intent(this, MainActivity.class);
            intentBoutique.putExtra("type", "1");
            startActivity(intentBoutique); 
      case R.id.restaurant:
            Intent intentRestaurant = new Intent(this, MainActivity.class);
            intentRestaurant.putExtra("type", "2");
            startActivity(intentRestaurant);
      case R.id.nightlife:
            Intent intentNightlife = new Intent(this, MainActivity.class);
            intentNightlife.putExtra("type", "3");
            startActivity(intentNightlife);
      case R.id.loisir:
            Intent intent = new Intent(this, MainActivity.class);
            intent.putExtra("type", "4");
            startActivity(intent);
      case R.id.evenement:
            Intent intentEvenement = new Intent(this, MainActivity.class);
            intentEvenement.putExtra("type", "5");
            startActivity(intentEvenement);

      default:
        break;
      }

      return true;
    } 

    /************************Image part******************************/
    private class GetXMLTask extends AsyncTask<String, Void, Bitmap> {
        @Override
        protected Bitmap doInBackground(String... urls) {
            Bitmap map = null;
            for (String url : urls) {
                map = downloadImage(url);
            }
            return map;
        }

        // Sets the Bitmap returned by doInBackground
        @Override
        protected void onPostExecute(Bitmap result) {
            imageView.setImageBitmap(result);
        }

        // Creates Bitmap from InputStream and returns it
        private Bitmap downloadImage(String url) {
            Bitmap bitmap = null;
            InputStream stream = null;
            BitmapFactory.Options bmOptions = new BitmapFactory.Options();
            bmOptions.inSampleSize = 1;

            try {
                stream = getHttpConnection(url);
                bitmap = BitmapFactory.
                        decodeStream(stream, null, bmOptions);
                stream.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            return bitmap;
        }

        // Makes HttpURLConnection and returns InputStream
        private InputStream getHttpConnection(String urlString)
                throws IOException {
            InputStream stream = null;
            URL url = new URL(urlString);
            URLConnection connection = url.openConnection();

            try {
                HttpURLConnection httpConnection = (HttpURLConnection) connection;
                httpConnection.setRequestMethod("GET");
                httpConnection.connect();

                if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
                    stream = httpConnection.getInputStream();
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            }
            return stream;
        }
    }
} 
```

用户等级：

```
public class User {
    public final static String PREFS_NAME = "UserData";
    public static String getUserId(Context context)
    {
        SharedPreferences settings = context.getSharedPreferences(PREFS_NAME, 0);
        String id = settings.getString("id", "");
        return id;
    }

    public static String getUserPass(Context context)
    {
        SharedPreferences settings = context.getSharedPreferences(PREFS_NAME, 0);
        String pass = settings.getString("pass", "");
        return pass;
    }

} 
```

如果我在没有 UI 部分的情况下评论我的所有代码所有工作，但如果我不评论 idContest 或 / 和 id/pass 应用程序崩溃......

所有这些变量都不为空，我不知道为什么我的应用程序崩溃了......

我已经清理了我的项目。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:36:40.067

您太早地使用共享首选项初始化变量而无法获得有效的上下文。

所以不是`public String id = User.getUserId(this);`在你的类变量中，而是在`onCreate`方法内初始化变量`id = User.getUserId(getApplicationContext());`

也初始化里面的其他变量`onCreate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:03:33.803

你在崩溃堆栈跟踪之前找到一条日志消息`AndroidRuntime D Shutting down VM`，对吧？

当你再次运行你的应用程序时，你会得到这个堆栈跟踪，而它已经安装并在设备上运行，对吧？

问题解决了：忽略它！

原因：当你重新安装它时，你的应用程序可能仍然会做一些事情。因此，android 会尝试从 APK 中加载一些已经/已经被新的 APK 替换的内容。

我可以很容易地重现这一点：当我的应用程序在我的登录屏幕上时（没有完成背景工作），重新安装不会触发崩溃，但它会在我登录并进行一些下载/同步等操作后立即出现。

没有什么可担心的。每个开发人员在再次运行项目时应该已经看到“应用程序已崩溃”对话框。它只会发生在你身边，永远不会发生在用户端。

我的猜测：JIT 是负责任的，你不能对它做任何事情（这没关系）。

# ruby-on-rails-3 - RAILS 3 - 控制器中的事务

> ID：15656858
> 
> 赞同：9
> 
> 时间：2013-03-27T10:40:22.913
> 
> 标签：ruby-on-rails-3, transactions, controller

我在控制器中有一个示例动作。

```
def some_action
 product = Product.new
 product.name = "namepro"
  if product.save
   client.update_attribute(:product_id,product.id)
  end
end 
```

如何为此代码添加交易？我尝试使用此示例代码：

```
def some_action
 **transaction do**
  product = Product.new
  product.name = "namepro"
   if product.save
    client.update_attribute(:product_create,Time.now)
   end
 **end**
end 
```

但它会产生这个错误：

```
undefined method `transaction' 
```

我读到在控制器中使用事务是一种不好的做法，但我不知道为什么是原因（[http://markdaggett.com/blog/2011/12/01/transactions-in-rails/](http://markdaggett.com/blog/2011/12/01/transactions-in-rails/)）

在示例中，如果产品已创建并保存并且客户端更新失败……Rails 不能什么都不做。

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-27T13:13:55.473

如果你真的想要，你可以在控制器中使用事务。正如您所指出的，这是不好的做法，但如果您想这样做，只需调用`Product.transaction do`而不是`transaction do`. `transaction`是 上的类方法`ActiveRecord::Base`，因此您需要在 ActiveRecord 派生类上调用它。您的应用程序中的任何模型类都可以（挑剔的警告：如果您为不同的模型连接到不同的数据库，那可能不是真的......但您可能没有这样做）。

这是一个不好的做法的原因是它没有根据 MVC 范式正确分离关注点。您的控制器不应该如此关心您的数据持久性实现。更好的方法是将方法添加到`Product`. 也许是这样的：

```
def save_and_update_create_time
  transaction do
    if save
      client.update_attribute(:product_create, Time.now)
    end
  end
end 
```

然后，不要调用`product.save`您的控制器，而是调用`product.save_and_update_client_create_time`. 您可能也需要传递`client`给该方法；从您的代码中不清楚来自哪里`client`。如果它是 on 的一个属性`product`，那么上面的方法应该可以工作。

也有更好、更多的 Railsy 方法可以做到这一点，尤其是在不需要任何控制器数据就`product`知道它的情况下。`client`然后你可以像这样使用[`after_save`](http://apidock.com/rails/ActiveRecord/Callbacks/after_save)回调（添加到`Product`类）：

```
after_save :update_client

private

def update_client(product)
  product.client.update_attribute(:product_create, Time.now)
end 
```

然后每次`Product`保存 a 时，关联客户端上的字段都会更新。您可能必须引入一些代码来检查第一个是否存在`client`。

除了更简洁的代码之外，使用回调的好处是整个回调链与保存一起在单个事务中运行；您无需手动创建交易。[您可以在Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)中阅读有关回调的更多信息。

# android - android alarmmanager广播接收器没有被调用

> ID：15656861
> 
> 赞同：0
> 
> 时间：2013-03-27T10:40:27.513
> 
> 标签：android, android-alarms, android-broadcast, android-pendingintent

嘿家伙希望你能帮助我。

我是第一次使用 alarmManager 的新手 anodroid 开发人员，但广播接收器似乎被调用了。

这是创建alarmManager的代码

```
AlarmManager alarm=(AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        Intent i=new Intent(this,AlarmReciever.class);
        PendingIntent p=PendingIntent.getBroadcast(this, 22, i,PendingIntent.FLAG_CANCEL_CURRENT);

        alarm.set(AlarmManager.ELAPSED_REALTIME_WAKEUP,1,p); 
```

和广播接收器类

```
Public class AlarmReciever extends BroadcastReceiver{

    @Override
    public void onReceive(Context c, Intent i) {
        // TODO Auto-generated method stub

        Toast toast1= Toast.makeText(c, "This text will be displayed \n on the toast", Toast.LENGTH_LONG);
        toast1.setGravity(Gravity.CENTER_HORIZONTAL, 0, 0);
        toast1.show();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:45:11.687

您是否在清单中添加了以下代码？

```
<receiver
   android:name="AlarmReceiver"
   android:process=":remote" >
</receiver> 
```

# geolocation - android中的无效纬度和经度

> ID：15656862
> 
> 赞同：0
> 
> 时间：2013-03-27T10:40:28.643
> 
> 标签：geolocation, gps, location, android-location

我测试下面的代码片段。我突然得到一个奇怪的位置（0,0）作为纬度和经度，这干扰了我的距离计算。

```
if (loc != null) {
                double currentLatitude = loc.getLatitude();
                double currentLongitude = loc.getLongitude();

                if (first_time) {
                    loc.reset();
                    first_time = false;
                }

                synchronized (testObject) {
                    … do some work
                    previousLat = currentLatitude;
                    previousLon = currentLongitude;
                }
            } 
```

我想知道纬度和经度在什么情况下变为 0。我也想知道我的代码在哪里出错，因为我得到了 0 纬度和经度。**location.reset()**的结果是0 纬度和经度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:49:40.437

当然，当你重置它时它是0。你为什么这样做？调用reset() 时您期望的值是多少？由 android 位置服务提供的位置具有准确度集 (getAccuracy())。如果您创建自己的位置对象或 reset() 它，它将为 0。

我之前写过的更多信息显示了为什么我总是在计算之前检查有效性：
lat,lon 0,0 理论上是一个有效的位置。但在我多年的 GPS 经验中，我给你提示：忽略坐标 (0,0) 的所有位置。
这对现实世界的行为没有影响，因为设备不能精确定位在 0,0（以厘米精度），即使可以，也不超过一秒。

如果你愿意，你可以用坐标范围之外的特殊值来初始化你的纬度，经度。但即便如此，你也不能从其他人的错误中解脱出来。

通常检查位置是否有效，如果你有一个有效的标志，它应该存在于android上。查看水平精度值。阅读文档如何区分无效位置。

# javascript - 启用依赖于另一个表单字段值的表单字段？

> ID：15656865
> 
> 赞同：1
> 
> 时间：2013-03-27T10:40:39.500
> 
> 标签：javascript, jquery, ruby, ruby-on-rails-3

我有一个表单，我想在其中启用 SKU（删除禁用），前提是产品 ID 具有一定的价值。如果产品 ID 为空，我希望 SKU 保持禁用状态。

我应该将 onChange 事件与产品 ID 相关联吗？

```
<div class="advancedSearchFormField">
      <span class="advancedSearchFormlabel">Product Id</span>
      <%= text_area_tag('filters[product_id]',filter_params['product_id'],:rows=>10) %>
</div>

<div class="advancedSearchFormField">
      <span class="advancedSearchFormlabel">SKU</span>
      <%= text_area_tag('filters[sku]',filter_params['sku'],:rows=>10, :disabled => true) %>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:00:45.610

是的，您应该将 addEventListener 与您的 product_id-Element 一起使用。你可以这样做：

```
(function () {
    var product_id = document.getElementById('product_id');
    product_id.addEventListener('blur', triggerInput, false);
    product_id.addEventListener('keyup', triggerInput, false);
})();

function triggerInput() {
    var sku = document.getElementById('sku');
    sku.disabled = (this.value !== "" ? '' : 'disabled');
} 
```

这是[演示](http://fiddle.jshell.net/Pisi2012/TCJAY/)

# c# - 使用图表（高图）创建类似网格的仪表板的可能性/建议？

> ID：15656866
> 
> 赞同：0
> 
> 时间：2013-03-27T10:40:40.603
> 
> 标签：c#, asp.net, highcharts

我正在尝试创建仪表板。此仪表板应包含在网格状视图中设置的方形容器（请原谅我的英语）。这些容器包含图表（highcharts）。

以下是我制作的一些非常简单的草图，展示了我想要完成的工作： ![在此处输入图像描述](../Images/04db69a28b816594c0e7011f8e1b7522.png)

最终我还想传递一个宽度和高度，以便网格的大小可以不同，如下所示： ![在此处输入图像描述](../Images/4820a417f49fe3ded39c67d0b23fc23c.png)

目前我正在考虑 webparts，我在想类似的东西：

```
<asp:WebPartManager ID="WebPartManager1" runat="server">
        </asp:WebPartManager>

             <asp:WebPartZone ID="WebPartZone1" runat="server" Width="600">
                <ZoneTemplate>
                       <asp:Literal ID="ltrChart" runat="server"></asp:Literal>
                </ZoneTemplate>
             </asp:WebPartZone>

        </asp:WebPartZone> 
```

文字指向代码隐藏中创建的图表。

我有哪些选择？我走在正确的道路上吗？你能给什么建议？

欢迎您的想法：D。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:06:14.860

您可能想看看 ajax 控件库。最新版本提供了一系列图表选项（饼图、条形图、散点图、折线图等）。看看他们的一些演示： [http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AreaChart/AreaChart.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AreaChart/AreaChart.aspx)

# binary-tree - 在二叉树中找到“局部最小值”

> ID：15656871
> 
> 赞同：5
> 
> 时间：2013-03-27T10:40:49.483
> 
> 标签：binary-tree, local, min

你们能帮我解决一些我遇到的家庭作业问题吗？

完整二叉树中的局部最小值定义为小于其所有邻居（邻居=父，左孩子，右孩子）的节点。我需要在给定的完整二叉树中找到一个局部最小值，它的每个节点都有不同的数字，在 O(logn) 复杂度时间内。

好吧，因为要求是 O(logn)，所以我试图想出一种方法，只通过 1 条路径穿过树到达叶子。或者，也许我每次只能在递归中查看树的一半，这样它就会执行 logn。

所以说我在树上有这个：

```
 70
   /  \
 77    60 
```

有3种情况：

1）根比左右孩子都小 //然后我就完成了

2）根只比左边小

3) 根只比右边小

上面的树是案例 2。所以让我们“扔掉”左子树，因为 77 不可能是“局部最小值”，因为它大于其父级。所以我们留下了右子树。以此类推，直到我们找到局部最小值。

这里的问题是，当我们抛出左子树时，我们可能会错过下面的另一个局部最小值。这是一个例子：

```
 70
              /    \
            77      60
          /   \    /   \
         1    8    9    14
        / \  / \  / \   / \
       3   4 5 6  2 7  15 13 
```

所以在这种情况下，唯一的局部最小值是“1”，但我们错过了它，因为一开始我们决定搜索根的右子树。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-05T17:06:15.397

根据定义，局部最小值是一个节点，其值小于与其连接的任何其他节点的值。因此，在您的示例中，“1”、“5”、“6”、“2”、“7”、“13”都是局部最小值。

一旦清楚了，问题就很简单了。

首先我们检查根，看看它是否比两个孩子都小。如果是，那么我们就完成了。如果不是，那么我们拿起它的较小的孩子并递归地应用检查。

我们终止要么 1) 我们找到一个小于其两个子节点的节点，要么 2) 我们到达底层（即叶子）。

在案例 1) 中，我们停止的节点是本地 min，因为 i) 它比它的两个子节点都小，并且 ii) 它比它的父节点小，这是我们决定检查这个节点的前提条件。

在情况 2) 中，我们剩下两个叶子（即兄弟节点），其中至少有一个小于父节点（否则将返回父节点）。然后，它们中的任何一个（或两个）都是本地最小值，只要它小于其父级。

按照这种方法，每个级别最多查看 2 个节点，因此只需要 O(log n) 检查。

希望这是有帮助和足够清晰的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:36:30.950

如果您想在 O(logn) 内找到一个，则“2”如果没有孩子，则被视为局部最小值。在 O(logn) 中找不到“1”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T21:25:27.643

我相信这可以在 O(N) 中完成。

从根开始。检查它是否有一个比它小的孩子。如果有，就去找那个孩子。如果它没有，我们就完成了。

然后，通过不断选择小于当前节点的子节点来重复此过程。检查它是否是本地最小值。如果没有，请重复。

通过这样做，我们保证当前节点的父节点总是大于自身。如果算法停止，可能只有两种情况：

1.  当前节点是叶子。
2.  当前节点的两个子节点都比它大。

在任何一种情况下，当前节点都是本地最小值。

*编辑*：

错过“完整”二叉树。应该是 log(n)。

# java - Java Access 抽象实例变量

> ID：15656872
> 
> 赞同：2
> 
> 时间：2013-03-27T10:40:49.837
> 
> 标签：java, abstract-class, member-variables

我有`abstract class`一个变量，如下所示：

```
public abstract class MyAbstractClass {

    int myVariable = 1;

    protected abstract void FunctionThatUsesMyVariable();
} 
```

然后当我`class`通过下面的代码去实例化我的时候，`myVariable`就看不到了：

```
MyAbstractClass myClass = new MyAbstractClass() {

    @Override
    protected void FunctionThatUsesMyVariable() {
        // TODO Auto-generated method stub
    }
}; 
```

我做错了什么，我怎样才能实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T10:43:41.593

您声明`myVariable`具有包访问权限，并且您的 2 个类位于不同的包中。因此，该变量对继承类不可见。您可以将其声明`protected`为可见或将 2 个类放在同一个包中。

```
public abstract class MyAbstractClass {

    protected int myVariable = 1;

    protected abstract void FunctionThatUsesMyVariable();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:44:54.473

似乎对我有用：

```
public class Test {
  public static abstract class MyAbstractClass {
    int myVariable = 1;
    protected abstract void FunctionThatUsesMyVariable();
  }

  public void test() {
    MyAbstractClass myClass = new MyAbstractClass() {
      @Override
      protected void FunctionThatUsesMyVariable() {
        myVariable = 2;
      }
    };
  }

  public static void main(String args[]) {
    new Test().test();
  }
} 
```

我怀疑你是在不同的包中声明这两个类。如果这是你想要的，那么你应该制作变量`protected`（或者`public`如果你必须）。或者 - 显然 - 将它们放在同一个包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:43:18.087

将您的变量声明为受保护。`package-private`默认情况下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T10:43:33.117

因为您仍在继承/扩展抽象类，除非您对其进行保护，否则该字段不会被继承。

# mysql - “DELIMITER $$”附近出错

> ID：15656876
> 
> 赞同：6
> 
> 时间：2013-03-27T10:41:07.050
> 
> 标签：mysql, ruby-on-rails, ruby, delimiter

当我从 mysql 控制台或 MySQL Workbench 更改 Delimeter 时，我没有收到任何错误，但是当我在 ruby​​ on rails 中嵌入相同的代码时，我收到错误

```
mysql> DELIMITER $$
mysql> 
```

没有错误。

但

```
ActiveRecord::Base.connection.execute(%Q{
    DELIMITER $$
}) 
```

给出：

```
ActiveRecord::StatementInvalid: Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER $$' at line 1: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-19T19:42:40.567

[最佳答案](https://stackoverflow.com/a/15657150/2578505)是正确的（Rails 无法执行`DELIMITER`，因为它是一个 MYSQL 命令），但 @ishandutta2007 的后续问题没有得到回答，所以我会在这里回答。

`DELIMITER`常用于包装mysql函数和过程体；要在 rails 中实现这一点，只需将过程主体包装在它自己的执行语句中。

因此，例如代码可能如下所示：

```
execute <<-SQL
  DROP FUNCTION IF EXISTS MyFunc;
  DELIMITER $$
  CREATE FUNCTION My Func
    . . .
  $$
  DELIMITER ;
SQL 
```

相反，将变为以下内容，多个`execute`调用充当通过重新定义分隔符的“作用域”：

```
execute 'DROP FUNCTION IF EXISTS MyFunc'
execute <<-SQL
  CREATE FUNCTION My Func
    . . .
SQL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:55:44.750

`DELIMITER`实际上是 MySQL 命令行设置，而不是 SQL：[http](http://dev.mysql.com/doc/refman/5.0/en/mysql-commands.html) ://dev.mysql.com/doc/refman/5.0/en/mysql-commands.html 。这意味着您不能以这种方式设置分隔符。

`ActiveRecord::Base.connection.execute`最重要的是，如果您可以开箱即用地一次只执行一个语句，那将无济于事（请参阅[http://www.seanr.ca/tech/?p=75](http://www.seanr.ca/tech/?p=75)）。

# java - 将应用程序的配置文件存储在与操作系统无关的路径中

> ID：15656880
> 
> 赞同：1
> 
> 时间：2013-03-27T10:41:19.560
> 
> 标签：java, eclipse-plugin

我正在编写一个应用程序（基本上是 eclipse 插件），所以很少有组合框、下拉菜单等，我通过 XML 文件动态地获取它们的值。我的疑问是将这些文件存储在特定目录中的最佳方式是哪种方式可以在 Windows 和 Linux 中读取。

最初我试图在`{eclipse.home.location}`如下创建一个配置路径：

```
String finalPath = System.getProperty("eclipse.home.location") +"/myAppConfig"; 
```

并在那里存储我所有的插件配置（不仅是配置，还有一些我在插件中以编程方式读取的辅助 jars）。但是有可能 Eclipse 安装可能在共享位置并且用户可能没有对其的写访问权。

我还尝试使用以下方法将其存储在程序文件目录中：

```
System.getenv("ProgramFiles"); 
```

但这在非 Windows 环境下会失败。所以我的问题是任何人都可以对此有所了解，以便我可以将其存储在一些对 Windows 和 linux 都有效的公共目录中？如果我的措辞令人困惑，请告诉我。或者是否可以将我的配置文件存储在`plugins`目录下并获取这样的路径`/plugins/myConfigDir`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:20:06.173

尝试在 Plugin 中使用[getStateLocation()方法。](http://help.eclipse.org/indigo/nftopic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/Plugin.html#getStateLocation%28%29)

这将为您提供指向用户特定工作区位置的 IPath。

# asp.net - CompositeControl 在回发时创建控件？

> ID：15656883
> 
> 赞同：2
> 
> 时间：2013-03-27T10:41:25.017
> 
> 标签：asp.net, c#-4.0, custom-controls, postback

这里创建自定义控件是第一个控件代码

**1\. StartScreen.cs 和 ActDesc.cs 控件。**

1.  第一次加载页面时，我看到两个编辑按钮。
2.  我单击其中任何一个，查看其中包含内容的文本框。
3.  然后我点击保存保存按钮事件不会被触发。
4.  在我看来，在初始 CreateChildControls 期间创建的控件会触发该事件。在 Postback 上创建的不会触发事件。
5.  我在编辑按钮的 Command 事件处理程序上调用 ControlsCreate() 方法。我也尝试过使用 EnsureChildControls() 调用。还是没用？

谁能指导我实现这一目标的方法？

> . .

```
public class Wrapper
{
    public string Name { get; set; }
    public string Description { get; set; }
}
namespace Cons
{
    public class StartScreen : CompositeControl
    {
        public StartScreen()
        {
            //
            // TODO: Add constructor logic here
            //
        }
        protected override void CreateChildControls()
        {
            List<Wrapper> list = new List<Wrapper>();
            for (int i = 0; i < 2; i++)
            {
                list.Add(new Wrapper { Name = "D", Description = "DDDDDDDDDD" });
            }
            ActDesc desc = new ActDesc(list);
            desc.DataBind();
            this.Controls.Add(desc);
            base.CreateChildControls();
        }
    }
}

public class ActDesc : CompositeControl
{
    IEnumerable<Wrapper> list = new Wrapper[] { };
    public ActDesc(IEnumerable<Wrapper> list)
    {
        this.list = list;
    }
    private void ControlsCreate()
    {
        this.Controls.Clear();
        Table activityDescription = new Table();
        int i = 1;
        foreach (var item in list)
        {
            TableRow tempRow = new TableRow();
            TableCell tempLeftCell = new TableCell();
            tempLeftCell.Text = item.Name;

            TableCell tempRightCell = new TableCell();
            tempRightCell.HorizontalAlign = HorizontalAlign.Right;

            if (EditId == 0)
            {
                ImageButton editButton = new ImageButton();
                editButton.ID = string.Format("editButton_{0}", i);
                editButton.ImageUrl = "add_16.png";
                editButton.CommandArgument = i.ToString();
                editButton.Command += new CommandEventHandler(editButton_Command);
                editButton.CommandName = "Edit";

                tempRightCell.Controls.Add(editButton);
            }
            else
            {
                if (EditId == i)
                {
                    ImageButton saveButton = new ImageButton();
                    saveButton.ID = string.Format("saveButton_{0}", i);
                    saveButton.ImageUrl = "~/save.png";
                    saveButton.CommandArgument = i.ToString();
                    saveButton.Command += new CommandEventHandler(editButton_Command);
                    saveButton.CommandName = "Save";

                    tempRightCell.Controls.Add(saveButton);
                }
            }

            tempRow.Cells.Add(tempLeftCell);
            tempRow.Cells.Add(tempRightCell);

            //Add the first row which contains the header name and the edit button if AllowEdit is true
            activityDescription.Rows.Add(tempRow);

            tempRow = new TableRow();

            tempLeftCell = new TableCell();
            tempLeftCell.ColumnSpan = 2;

            Control tempControl;
            if (EditId > 0 && EditId.Equals(i))
            {
                TextBox txt = new TextBox();
                txt.TextMode = TextBoxMode.MultiLine;
                txt.ID = "txt" + i;
                txt.Text = item.Description;
                tempControl = txt;
            }
            else
            {
                Literal litContent = new Literal();
                litContent.ID = string.Format("literalContent_{0}", i);
                litContent.Mode = LiteralMode.Transform;
                litContent.Text = item.Description;

                tempControl = litContent;
            }

            tempLeftCell.Controls.Add(tempControl);
            tempRow.Cells.Add(tempLeftCell);

            // Add the second row which shows the detailed HTML description..
            activityDescription.Rows.Add(tempRow);
            i = i + 1;
        }
        this.Controls.Add(activityDescription);
    }
    protected override void CreateChildControls()
    {
        ControlsCreate();
        base.CreateChildControls();
    }

    void editButton_Command(object sender, CommandEventArgs e)
    {
        switch (e.CommandName)
        {
            case "Edit":
                string id = e.CommandArgument.ToString();
                EditId = Convert.ToInt32(id);
                ControlsCreate();
                break;
            default:
                break;
        }
    }
    public int EditId
    {
        set
        {
            this.ViewState["__EditId"] = value;
        }
        get
        {
            return Convert.ToInt32(this.ViewState["__EditId"]);
        }
    }
    public bool AllowEdit { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:23:53.480

我确实找到了我的问题的答案，问题是我认为我没有为其分配 ID 的控件可能使用不同的 ID 重新创建，因此与以前回发期间保存的值不匹配。我还更改了回发处理程序中的代码以调用 EnsureChildControls，同时设置 this.ChildControlsCreated=false 并因此重新创建子控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:58:22.093

要使控件具有事件，您必须使用事件声明它。这是在 vb.net 但可以在这里转换：http: [//converter.telerik.com/](http://converter.telerik.com/)。这也继承自 scriptcontrol 而不是复合，但它应该工作相同：

```
<Assembly: WebResource("myProject.FileUpload.css", "text/css", PerformSubstitution:=True)> 
< _
ToolboxData("<{0}:FileUpload ID='FileUpload{0}'  runat=""server""> </{0}:FileUpload>"), _
ClientCssResource("myProject.FileUpload.css")> _
Public Class FileUpload
    Inherits ScriptControl
    Implements INamingContainer, IPostBackEventHandler

    Private WithEvents btnMyButton As New Button

   .... 

    Protected Overrides Sub CreateChildControls()
        'method to create my controls
        createDynamicControls()

        'if you are using update panels and wish to do an async 
        ' post back, you must first register the conrol with 
        ' the pages script manager.  If you are not using update panels, you can
        ' skip this
        ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(Me.btnMyButton)      

        MyBase.CreateChildControls()
    End Sub

   Protected Overrides Function SaveViewState() As Object
        Return New Pair(MyBase.SaveViewState(), Nothing)
    End Function

    Protected Overrides Sub LoadViewState(ByVal savedState As Object)
        MyBase.LoadViewState(CType(savedState, Pair).First)
        EnsureChildControls()
    End Sub

     Protected Overrides Sub OnInit(ByVal e As System.EventArgs)
        attachWebResources()
        MyBase.OnInit(e)

    End Sub

    Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
        MyBase.OnLoad(e)
    End Sub

     Private Sub attachWebResources()
        'use this to attach an embedded CSS file with the DLL
        Dim styleLink As String = "<link rel='stylesheet' text='text/css' href='{0}' />"
        Dim location As String = Page.ClientScript.GetWebResourceUrl(Me.[GetType](), "myProject.FileUpload.css")
        Dim styleInclude As New LiteralControl([String].Format(styleLink, location))
        DirectCast(Page.Header, HtmlControls.HtmlHead).Controls.Add(styleInclude)
    End Sub

     Protected Sub btnMyButton _click(ByVal sender As Object, ByVal e As EventArgs) Handles btnMyButton .Click

      '....do stuff
    end sub
        Public Sub RaisePostBackEvent(ByVal eventArgument As String) Implements System.Web.UI.IPostBackEventHandler.RaisePostBackEvent
          'required for IPostBackEventHandler
    End Sub

  Private Sub createDynamicControls()
     controls.Clear()
     'instantiate your control here and add it to the controls object
  end sub
end Class 
```

让我知道这是否有帮助，或者您是否被困在某个地方。

# drupal-7 - Drupal 7 块钩子在预处理之后和渲染所有块和块类之前

> ID：15656885
> 
> 赞同：0
> 
> 时间：2013-03-27T10:41:43.160
> 
> 标签：drupal-7, hook, block, render

我正在寻找一个在 hook_preprocess_block() 和 Drupal 7 中的渲染函数之间运行的钩子。这个钩子需要包含所有预渲染的块和数组中的块类。

处理这个的钩子的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T19:36:40.510

据我所知，没有这样的钩子。不过，这将非常有用。

看D7页面加载过程的解释：http: [//artfulrobot.com/Drupal-7-page-loading-process-explained](http://artfulrobot.com/Drupal-7-page-loading-process-explained)

根据上面的链接，drupal_render 紧随 hook_page_alter 之后。

# linux - 对 %esp 的修改导致 SIGSEGV

> ID：15656887
> 
> 赞同：2
> 
> 时间：2013-03-27T10:41:49.487
> 
> 标签：linux, assembly, g++, 64-bit, x86-64

有时我在参加编码比赛时使用以下代码来避免堆栈溢出。

```
int main()
{
  static const int _STACK_SIZE = MAXN*10;
  static int _STACK[_STACK_SIZE*2], _ESP;
  __asm__ __volatile__
  (
      "movl %%esp, %0\n" 
      "movl %1, %%esp\n":
      "=g"(_ESP):
      "g"(_STACK + _STACK_SIZE):
  );

  // Do Something..

  __asm__ __volatile__
  (  
      "movl %0, %%esp\n":
      :
      "g"(_ESP):
  );
} 
```

据我所知，这个 asm 代码备份`%esp`并将堆栈移动到`_STACK[]`.

* * *

**我的问题：为什么这个代码会`SIGSEGV`在 x86-64 Linux 服务器上引起（它在我自己的 x86 Linux 上运行良好）？以及如何解决？**

我想，也许是因为`%esp`是 64 位指针？

我试图删除`__asm__ __volatile__("movl %0, %%esp\n": : "g"(_ESP):);`它，它似乎运行良好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:56:30.943

It's because in x86-64 assembly modifying a 32-bit register such as `esp` zeroes the highest 32 bits of the corresponding 64-bit register, `rsp` in this case. In x86-64 the stack pointer `rsp` is a 64-bit register.

x86-64 Linux always puts the stack pointer near the top of the user-space range of virtual address space, like `0x7fffffffe6d0` for example, so it's always outside the low 32 bits of virtual address space. The high half of RSP is non-zero and ESP != RSP.

So by modifying `esp` you make `rsp` point to an address where your program has no access rights, and thus cause a segmentation fault. In x86-64 code you don't normally use `esp` at all, and you should replace all instances of `esp` with `rsp` in your x86-64 code.

# java - 关闭挂钩未打印到通过 Maven 执行的 JUnit 测试中的控制台

> ID：15656888
> 
> 赞同：-2
> 
> 时间：2013-03-27T10:41:49.940
> 
> 标签：java, maven, logging, junit, shutdown-hook

我有一个简单的 JUnit 测试，它由 Maven 通过 @Test 注释标记的方法运行。我想将关闭挂钩放入该测试中，因为如果用户按下 CTRL-C，我想打印一些测试结果。我对以下几行进行了编码：

```
@Test
public void runTest() {
    Thread shutdownHook = new Thread()
    {
        @Override
        public void run()
        {
            System.out.println("hooked");
            ... print something via System.out.println ...
        }
    };
    Runtime.getRuntime().addShutdownHook(shutdownHook);

    ... run test ...

} 
```

要运行它，我使用 Maven：

> mvn clean test -DtestClassName=com.MyTest

问题是没有打印任何内容。看起来 System.out.println 还没有工作。我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:21:58.213

我尝试编写单元测试来模拟您的案例，如下所示

```
@Test
public void whenTest() {
    final Thread shutdownHook = new Thread()
    {
        @Override
        public void run()
        {
            System.out.println("hooked");
        }
    };
    Runtime.getRuntime().addShutdownHook(shutdownHook);
    System.out.println("Start");
    try {
        Thread.sleep(10000);
    } catch (final InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("Stop");
} 
```

我尝试执行，`mvn clean test -Dtest=MyTest`然后点击`Ctrl+C`，它显示为

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.test.MyTest
Start
Terminate batch job (Y/N)? y 
```

如果我等待睡眠期，它会显示为

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.test.MyTest
Start
Stop
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.034 sec
hooked <----- Is this your expected?

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0 
```

我希望这可能会有所帮助。

# iphone - CLLocationManager 不会将位置发送到 didUpdateLocations 方法

> ID：15656889
> 
> 赞同：3
> 
> 时间：2013-03-27T10:41:54.910
> 
> 标签：iphone, ios, objective-c, core-location, cllocationmanager

我正在研究一个`iOS 6.1 iPhone app`with `ARC`enabled ，它将使用 a`CLLocationManager`来跟踪设备的位置。

**更新**

我有一个`DestinationViewController`实现`CLLocationManagerDelegate`. 它创建`CLLocationManager`并进行设置。我已将其导入`CoreLocation framework`到我的项目中。

我尝试了很多调试，可以看到`CLLocationManager`已创建并且不存在错误。但问题是`[CLLocationManager authorizationStatus]`既是`kCLAuthorizationStatusNotDetermined` before`[self.locationManager startUpdatingLocation];`也是*after*。所以没有提示询问是否允许使用此应用的位置服务。因为这个方法永远不会被解雇。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:  
(NSArray *)locations 
```

我还尝试在网上搜索几个小时以寻找类似的示例，但没有运气。DestinationViewController 中的代码发布在下面。

界面

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface DestinationViewController : UIViewController <CLLocationManagerDelegate> 
```

执行

```
#import "DestinationViewController.h"

@interface DestinationViewController ()
@property (strong, nonatomic) CLLocationManager *locationManager;
@end

@implementation DestinationViewController

// Initializer
- (CLLocationManager *)locationManager
{
    if (!_locationManager) {
        _locationManager = [[CLLocationManager alloc] init];
    }
    return _locationManager;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [self startLocation];
}

- (void)startLocation
{
    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    self.locationManager.distanceFilter = 1;

    NSString *error;
    if (![CLLocationManager locationServicesEnabled]) {
        error = @"Error message";
    }

    CLAuthorizationStatus status = [CLLocationManager authorizationStatus];
    if (status == kCLAuthorizationStatusRestricted ||
        status == kCLAuthorizationStatusDenied ||) {
        error = @"Error message";
    }

    if (error) {
        NSLog(error);
    }
    else
    {

        status = [CLLocationManager authorizationStatus];

    self.locationManager.pausesLocationUpdatesAutomatically = NO;

        [self.locationManager startUpdatingLocation];

        status = [CLLocationManager authorizationStatus];

        NSLog(@"CLLocationManager is %@", self.locationManager);
        NSLog(@"Location is %@", self.locationManager.location);

        [self updateUI];
    }
}

- (void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations
{
    CLLocation *recentLocation = [locations lastObject];
    NSLog(@"Found location");
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError");
}

- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status
{
    NSLog(@"Change in authorization status");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T11:03:35.583

您的代码应该可以工作。

确保您的应用程序被授权使用位置服务。

您可以使用以下方法检查代码中的授权状态

```
 + (CLAuthorizationStatus)authorizationStatus 
```

编辑

kCLAuthorizationStatusNotDetermined 很可能是由位置服务被禁用引起的。您应该首先检查位置服务状态。代码应该是这样的

```
if([CLLocationManager locationServicesEnabled]) {
    // Location Services Are Enabled
    switch([CLLocationManager authorizationStatus]) {
        case kCLAuthorizationStatusNotDetermined:
            // User has not yet made a choice with regards to this application
            break;
        case kCLAuthorizationStatusRestricted:
            // This application is not authorized to use location services.  Due
            // to active restrictions on location services, the user cannot change
            // this status, and may not have personally denied authorization
            break;
        case kCLAuthorizationStatusDenied:
            // User has explicitly denied authorization for this application, or
            // location services are disabled in Settings
            break;
        case kCLAuthorizationStatusAuthorized:
            // User has authorized this application to use location services
            break;
    }
} else {
    // Location Services Disabled
} 
```

* * *

## 回答 #2

> 赞同：-14
> 
> 时间：2013-03-28T16:29:23.883

我终于解决了！我的代表设置不正确。而不是这样做：

`self.locationManager.delegate = self;`

我将其更改为：

`[self.locationManager setDelegate:self];`

现在我的委托方法被解雇了。

感谢帮助过的人！

# ruby-on-rails - 在 last 之前 Rails n 个元素

> ID：15656890
> 
> 赞同：1
> 
> 时间：2013-03-27T10:41:56.800
> 
> 标签：ruby-on-rails

在 Rails 中，我经常这样做：

```
Model.last(5).first 
```

这将检索*最后一个*元素-5。

有内置的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:03:39.003

更常见的方式是 offset()

```
Model.offset(5).last 
```

编辑（对于懒惰的人）：

```
1.8.7 :001 > User.first.id
 => 1 
1.8.7 :002 > User.last.id
 => 143455 
1.8.7 :003 > User.offset(5).last.id
 => 143450 
```

# java - 绘制图标网格

> ID：15656894
> 
> 赞同：0
> 
> 时间：2013-03-27T10:42:11.083
> 
> 标签：java, canvas, for-loop, grid

我试图在每 10 个图标之后从一个图标绘制一个网格`ArrayList`到我的位置，下一个图标将显示在一个新行上，但似乎无法让它正常工作。`canvas`第一个图标的开始 X 和 Y 位置在 100、100：

```
int x = 32; // Dimensions of icons
int y = x;

for (int pos = 0; pos < icons.getIcon().size(); pos++)
    {
        if(pos % 10 == 0)
        {

            icons.getIcon().get(pos).paintIcon(canvas, graphics, posX, posY);
        }
        else
        {
            icons.getIcon().get(pos).paintIcon(canvas, graphics, posX, posY);
            posX += x + 10;
        }
    } 
```

这将在水平行中显示每个图标，但无法弄清楚如何让第 11 个和每 10 个之后开始新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:55:57.143

当它检测到它是第 11 个图标时，您只是忘记添加“换行符”。像这样的东西：

```
int x = 32; // Dimensions of icons
int y = x;
int posX = 100;
int posY = 100;

for (int pos = 0; pos < icons.getIcon().size(); pos++) {
    if(pos % 10 == 0) {
        posY += y + 10;
        posX = 100; // Returns posX back to the left-most position
        icons.getIcon().get(pos).paintIcon(canvas, graphics, posX, posY);
    } else {
        icons.getIcon().get(pos).paintIcon(canvas, graphics, posX, posY);
    }
    posX += x + 10; // Do that out of the if, so that posX is incremented either way
} 
```

# android - 无法打开 Android NDK 项目

> ID：15656899
> 
> 赞同：1
> 
> 时间：2013-03-27T10:42:28.120
> 
> 标签：android, android-ndk, java-native-interface

我在主机 ( `Windows 7 x64, Eclipse Juno, ADT 21.1, CDT 21.1, NDK r8e`) 上有一个项目。当我将项目移动到我的笔记本电脑时，结果发现他没有正确打开。 `C`和`Java`源代码和配置都得到了正确处理，但是在`.CPP`文件和`.H`文件（jni/文件夹）中我有错误`"undefined reference jni.h"`。

虽然系统会检查安装VMware虚拟系统的设置，但情况相同。系统配置相同，环境变量已设置。在笔记本电脑或 VMware 上创建的新项目正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:36:36.640

从您在评论中发送的图像来看，您似乎正在使用 Eclipse 进行 Android 开发。尝试下载[java 版本](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr2)并改用该版本（例如，在您的主机中使用相同的版本：Eclipse Juno、ADT 21.1、CDT 21.1、NDK r8e）。

我有一个类似的问题，这是由于 Eclipse 版本。

# java - 添加到 ArrayList 时的 NullPointer

> ID：15656901
> 
> 赞同：0
> 
> 时间：2013-03-27T10:42:34.917
> 
> 标签：java, arraylist

我意识到已经有很多这样的问题，但到目前为止我看到的每个问题都是 ArrayList 没有初始化。我认为我的已初始化，但在尝试添加到列表时我得到一个 NullPointer。这是我的代码：

```
import java.util.ArrayList;
import java.util.Random;
import java.util.Collections;

public class Deck {
    static final int DECKSIZE = 48;
    static final int MAX = 10;
    static final int MIN = 1;
    public ArrayList<Card> cardDeck = new ArrayList<Card>();
    Random rand;

    public Deck() {
        initializeDeck();
    }

    private void initializeDeck() {
        for (int i=0; i<DECKSIZE; i++) {
            cardDeck.add(i, new Card("Name" + (i+1),  "Race" + (i+1), "Orientation" + (i+1)));
        }
    }

    public void shuffleCards() {
        Collections.shuffle(cardDeck);
    }
} 
```

这是堆栈跟踪，告诉我 initializeDeck 是一个 nullPointer

```
Caused by: java.lang.NullPointerException
    at hr.krypto.cardwars.deck.Deck.initializeDeck(Deck.java:24)
    at hr.krypto.cardwars.deck.Deck.<init>(Deck.java:15)
    at hr.krypto.cardwars.deck.Dealer.<init>(Dealer.java:14)
    at hr.krypto.cardwars.model.CardTable.<init>(CardTable.java:15)
    at hr.krypto.cardwars.screen.GameScreen.show(GameScreen.java:31)
    at com.badlogic.gdx.Game.setScreen(Game.java:62)
    at hr.krypto.cardwars.CardWarsGame.create(CardWarsGame.java:19)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:127)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:49:22.117

考虑到该方法`ArrayList.add(index, Element)`只抛出`IndexOutOfBoundsException`错误必须在您的卡片类的构造函数中。

猜猜最快的方法是调试卡类构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:46:08.563

在构造函数内部`Card(String, String, String)`引发了 NullPointerException。如带有行号的堆栈跟踪所示。

如果其他构造`Card()`函数进行了一些初始化，只需首先`this()`在添加的构造函数中调用。

* * *

***添加堆栈跟踪后：***

**更正**。我打赌仍然`rand`使用运行代码，它没有初始化（空）。在构建之前先进行清洁。

或者在不同的包中有两个类 Deck，显示的类在`package hr.krypto.cardwars.deck;`？

# c++ - Qt中对vtable的未定义引用

> ID：15656902
> 
> 赞同：0
> 
> 时间：2013-03-27T10:42:47.663
> 
> 标签：c++, qt

当我无法检测到代码中的任何错误时，我收到了虚拟表错误。有人可以给我一个正确方向的观点吗？对不起荷兰语术语，希望这不是问题。

```
#ifndef LIJST_H
#define LIJST_H

#include "product.h"
#include <list>

typedef list<Product*> lijst;

#endif // LIJST_H

// Methode

#ifndef METHODE_H
#define METHODE_H

#include "lijst.h"

class Methode
{
public:
    Methode() {}
    virtual ~Methode() {}
    virtual double run(lijst *items);
};

#endif // METHODE_H

// Productmethode
#ifndef PRODUCTMETHODE_H
#define PRODUCTMETHODE_H

#include "methode.h"

class ProductMethode : public Methode
{
private:
    map<string,double> kortingsTabel;
public:
    ProductMethode() {}
    void addKorting(string naam, double korting);
    double run(lijst *items);
};

// Main
#include <QCoreApplication>
#include "factuur.h"
#include "product.h"
#include "globalemethode.h"
#include "productmethode.h"
#include "drempelmethode.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    GlobaleMethode G ( 0.1 );
    ProductMethode P;
    P.addKorting ( "Melk", 0.1 );
    P.addKorting ( "Boter", 0.05 );
    Factuur F ( &G );
    F.addProduct ( new Product ( "Melk", 0.75 ) );
    F.addProduct ( new Product ( "Kaas", 5 ) );
    F.addProduct ( new Product ( "Boter", 1.7 ) );
    cout << F.totaal ( ) << endl;
    F.setMethode ( &P );
    cout << F.totaal ( );

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:45:06.767

您刚刚在类中声明了一个方法`Methode`：

```
virtual double run(lijst *items); 
```

方法也需要定义。只有纯虚函数才允许没有定义。

此外，通常会使用`virtual`为派生类覆盖某些基类方法的行为，但在您的示例中，您没有提供覆盖`virtual`方法的定义。你应该。如果您不需要，那您为什么要从该方法`virtual`开始？不必如此`virtual`。

* * *

**好读：**

**[“虚拟表”是未解决的外部是什么意思？](http://www.parashift.com/c++-faq-lite/link-errs-missing-vtable.html)**

# vba - 如何使 VBA 代码针对特定的 Excel 文件运行？

> ID：15656906
> 
> 赞同：1
> 
> 时间：2013-03-27T10:42:55.260
> 
> 标签：vba, excel

我无法找到错误：我想要做的是让此代码仅在 Book1.xls 的 Sheet1 上运行，即使我在其他 excel 文件或该文件的其他工作表中工作。代码的第一部分一切正常，直到****** -line 但之后当我在不同的页面上或将其归档时“阻塞”并给我一个错误。

```
 Sub Upload0()

' Upload Webpage content
Application.OnTime Now + TimeValue("00:00:10"), "Upload0"
With Workbooks("Book1.xls").Sheets("Sheet1").QueryTables.Add(Connection:= _
    "URL;http://cetatenie.just.ro/ordine/articol-11", Destination:=Workbooks("Book1.xls").Sheets("Sheet1").Range("A1"))
    .Name = "CetatenieOrdine"
    .FieldNames = True
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = True
    .BackgroundQuery = True
    .RefreshStyle = xlOverwriteCells
    .SavePassword = True
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .WebSelectionType = xlEntirePage
    .WebFormatting = xlWebFormattingNone
    .WebPreFormattedTextToColumns = True
    .WebConsecutiveDelimitersAsOne = True
    .WebSingleBlockTextImport = False
    .WebDisableDateRecognition = False
    .WebDisableRedirections = False
    .Refresh BackgroundQuery:=False
  End With

' Deletes Empty Cells
Workbooks("Book1.xls").Sheets("Sheet1").Range("A1").Columns("A:A").SpecialCells(xlCellTypeBlanks).Delete Shift:=xlUp

******************************************************************************

' Deletes useless Rows and fits the Width
Rows("1:31").Select
Selection.Delete Shift:=xlUp
Range("B28").Select
Selection.End(xlDown).Select
Rows("17:309").Select
Selection.Delete Shift:=xlUp

' Text to Column function with auto-confirmation to overwrite
Columns("A:A").Select
Application.DisplayAlerts = False
Selection.TextToColumns Destination:=Columns("A:A"), DataType:=xlDelimited, _
    TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, _
    Semicolon:=False, Comma:=False, Space:=False, Other:=True, OtherChar _
    :=":", FieldInfo:=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True
Application.DisplayAlerts = True

Columns("B:B").Select
Application.DisplayAlerts = False
Selection.TextToColumns Destination:=Range("B1"), DataType:=xlDelimited, _
    TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=True, _
    Semicolon:=False, Comma:=False, Space:=True, Other:=False, OtherChar _
    :=":", FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1)), _
    TrailingMinusNumbers:=True
Application.DisplayAlerts = True
Columns("B:B").Select
Selection.Delete Shift:=xlToLeft

' fit the Width of All Columns
Cells.Select
Range("A37").Activate
Cells.EntireColumn.AutoFit
Range("H1").Select
Rows("1:1").Select
Selection.Font.bold = True

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:47:19.703

当您访问`Rows`或`Range`不指定工作表时，VBA 使用 ActiveSheet。在这种情况下，您应该明确指定要使用的工作表：

```
Sub Upload0()

' Upload Webpage content
Application.OnTime Now + TimeValue("00:00:10"), "Upload0"
With Workbooks("Book1.xls").Sheets("Sheet1").QueryTables.Add(Connection:= _
    "URL;http://cetatenie.just.ro/ordine/articol-11", Destination:=Workbooks("Book1.xls").Sheets("Sheet1").Range("A1"))
    .Name = "CetatenieOrdine"
    .FieldNames = True
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = True
    .BackgroundQuery = True
    .RefreshStyle = xlOverwriteCells
    .SavePassword = True
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .WebSelectionType = xlEntirePage
    .WebFormatting = xlWebFormattingNone
    .WebPreFormattedTextToColumns = True
    .WebConsecutiveDelimitersAsOne = True
    .WebSingleBlockTextImport = False
    .WebDisableDateRecognition = False
    .WebDisableRedirections = False
    .Refresh BackgroundQuery:=False
  End With

' Deletes Empty Cells
Workbooks("Book1.xls").Sheets("Sheet1").Range("A1").Columns("A:A").SpecialCells(xlCellTypeBlanks).Delete Shift:=xlUp

******************************************************************************
With Workbooks("Book1.xls").Sheets("Sheet1")
    ' Deletes useless Rows and fits the Width
    .Rows("1:31").Delete Shift:=xlUp
    .Rows("17:309").Delete Shift:=xlUp

    ' Text to Column function with auto-confirmation to overwrite
    Application.DisplayAlerts = False
    .Columns("A:A").TextToColumns Destination:=Columns("A:A"), DataType:=xlDelimited, _
            TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, _
            Semicolon:=False, Comma:=False, Space:=False, Other:=True, OtherChar _
            :=":", FieldInfo:=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True
    .Columns("B:B").TextToColumns Destination:=Range("B1"), DataType:=xlDelimited, _
            TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=True, _
            Semicolon:=False, Comma:=False, Space:=True, Other:=False, OtherChar _
            :=":", FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1)), _
            TrailingMinusNumbers:=True
    Application.DisplayAlerts = True
    .Columns("B:B").Delete Shift:=xlToLeft

    ' fit the Width of All Columns
    .Cells.EntireColumn.AutoFit
    .Rows("1:1").Font.bold = True
End With

End Sub 
```

# java - 如何找到从断点开始线程的位置

> ID：15656907
> 
> 赞同：2
> 
> 时间：2013-03-27T10:42:55.353
> 
> 标签：java, multithreading, debugging, intellij-idea, breakpoints

这是我的情况：

*   我正在研究一个大型代码库，在 Java1.7 上运行，不太容易移动，有很多接口，深度继承树，很多线程等。
*   我在某个地方放了一个断点，但是这个对象在某个地方产生的线程中运行。我需要找到那个地方。
*   有太多的 .run() 和 .start() 命中需要单独查找（并且按类缩小范围也很困难，因为有很多类/继承（而且我还不知道代码库））。

所以我的问题是，有没有办法让线程在断点处停止（intelliJ，但我也可以使用 eclipse）来找出它从哪里开始？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:58:04.460

也许您可以将断点放入`Thread.start()`.

为了避免多次调用断点，也许用条件逻辑放置断点是有意义的，例如检查全局布尔标志。例如，您怀疑您的代码在某个事件之前调用，当事件发生时，将全局标志设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:09:15.203

我认为首先你必须得到`Runnable`运行。这很简单，因为它始终是堆栈跟踪的第一行。（当然，您需要具体的类，而不是定义 run 方法的类。）一旦有了类，就应该很容易找到实例化。然后它应该很容易跟随线程开始的地方。我错过了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:54:39.997

中断对象中的代码会告诉您它是哪个线程，它的调用堆栈可以告诉您`Runnable`应该寻找哪个线程。我假设您已经做到了这一点，并且仅找到对此 Thread/Runnable 的所有引用是不够的。在这种情况下，您可以编写一个包装类，用于`java.lang.Thread`在其中进行 instanceof/type 检查并在`run()`那里设置断点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:54:43.550

不。

如果没有一些蛮力的努力，我认为没有办法摆脱这种情况。

我将追溯到已启动的 Runnable（通过堆栈跟踪），然后获取该类的继承和接口层次结构，然后在所有这些类上查找 run() 和 start() 方法。除非有人刚刚对继承发疯，否则不应该花那么长时间。

# python - 在 configparser Python 3 中仅更改一个值

> ID：15656910
> 
> 赞同：0
> 
> 时间：2013-03-27T10:43:04.150
> 
> 标签：python, config, configparser

我有由多个 Python 脚本同时编辑的 config.ini 文件，我在这里面临很大的问题，因为在更新时，一些值被恢复并且它搞砸了一切......我不能使用

```
config.read("config.ini") 
```

每次我需要更新一个值时，因为高 HDD 活动会导致脚本不同步，并且经过几次循环后，一切都会再次崩溃。

那么，如何只更改一个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:22:51.840

好的，要么您想使用数据库而不是配置文件，要么您需要使用 stat 查看文件是否已被修改，或者您想使用 inotify。Pyinotify 可以检测是否存在文件更改并通过事件发出警报。

有关示例，请参见[Pyinotify 网站](http://pyinotify.sourceforge.net/)

# php - symfony 2 命令问题

> ID：15656911
> 
> 赞同：2
> 
> 时间：2013-03-27T10:43:05.810
> 
> 标签：php, symfony, command

我正在尝试从命令行运行 php 脚本。

```
sudo vim  UpdateLatestIssuesCommand.php 
```

但它给了我以下错误：

```
PHP Fatal error:  Class 'Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand' not found in /Applications/MAMP/htdocs/imagine-publishing/src/Imagine/CorporateBundle/Command/UpdateLatestIssuesCommand.php on line 12 
```

我不知道为什么我会收到这个错误，因为它说它找不到的文件实际上是存在的。

这是我的代码：

```
<?php

namespace Imagine\CorporateBundle\Command;

use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Output\OutputInterface;

class UpdateLatestIssuesCommand extends ContainerAwareCommand
{ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:46:06.807

你必须像这样运行命令

```
php app/console demo:greet Fabien 
```

其中，demo:greet 是命令的名称，Fabien 是参数

**原因**
因为，控制台组件必须在运行命令之前为您引导所需的资源。

仅供参考：[控制台组件](http://symfony.com/doc/master/components/console/introduction.html)

# c - 尝试使用指针从一个数组或其他数组传递数组元素...没有得到？

> ID：15656924
> 
> 赞同：0
> 
> 时间：2013-03-27T10:43:43.687
> 
> 标签：c

嗨朋友们，我是 C 的新手，试图理解它。

我有这两个 char 数组，一个是初始化的，另一个是刚刚声明的，我只是想将元素从数组状态复制到 arr 并打印出来。它编译，但打印一个垃圾值....

请帮我

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
     int i = 0;
     char *arr[3];
     char *state[3] = {"California", "Oregon", "Washington", "Texas"};

     for(i=0; i<3; i++)
     {
         arr[i] = state[i];
         printf("%s\n",arr+i);             
     }

     arr[0] = state[0];

     printf("%s\n",arr[0]);
     system("pause");

     return 0;    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T10:46:57.253

打印`arr+i`可能不是您想要的。相反，您想要`arr[i]`的是更深一层的间接层。

具体来说，`a[b]`和 完全一样`*(a+b)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:00:28.683

首先，我认为您初始化的方式`state`是错误的。它最多应该有 3 个项目，但你已经给出了 4 个项目（“德克萨斯”）。将其更改为：

```
char *state[3] = {"California", "Oregon", "Washington"}; 
```

除此之外，`arr+i`给出 的第 i 个指针的地址`arr`。为了打印第 i 个指针指向的字符串，像这样`arr`使用，它类似于.`*``*(arr+i)``arr[i]`

此外，请不要使用`system("pause");`; `getchar()`做得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T14:08:32.097

首先，您将两个数组的大小都取为 3，这是错误的。数组中有四个字符串值，`state`因此正确的数组大小为 4。

```
char *arr[4];
char *state[4] = {"California", "Oregon", "Washington", "Texas"}; 
```

其次，您正在打印坚持值的数组“arr”的地址。

```
// wrong way
for (i = 0; i < 3; i++)
{
    arr[i] = state[i];
    printf("%s\n", arr + i);
} 
```

第三，您以错误的方式访问数组“arr[0]”的第一个值。在这里，您必须使用指针来访问值。

```
// wrong way
printf("%s\n", arr[0]); 
```

这是使用指针将值从一个数组复制到另一个数组的正确方法。

```
#include<stdio.h>

int main(int argc, char *argv[])
{
    int i = 0;
    char *arr[4];
    char *state[4] = {"California", "Oregon", "Washington", "Texas"};

    for(i = 0; i < 4; i++)
    {
        arr[i] = state[i];
        printf("%s\n", *(arr + i));
    }
    arr[0] = state[0];

    printf("%s\n", *(arr));
    system("pause");
    return 0;
} 
```

# c# - C# 参数要求最小值为一个

> ID：15656925
> 
> 赞同：11
> 
> 时间：2013-03-27T10:43:45.670
> 
> 标签：c#, params

是否有一种更优雅的方式来确保始终使用至少一个值调用构造函数而不是我在这里得到的值？我这样做是因为如果没有提供值，我想要编译器错误。

```
public class MyClass
{
    private readonly List<string> _things = new List<string>();
    public string[] Things { get { return _things.ToArray(); } }

    public MyClass(string thing, params string[] things)
    {
        _things.Add(thing);
        _things.AddRange(things);
    }
} 
```

**编辑**

根据评论，我已将代码更改为...

```
public class Hypermedia : Attribute
{
    private readonly Rel[] _relations;
    public IEnumerable<Rel> Relations { get { return _relations; } }

    public Hypermedia(Rel relation, params Rel[] relations)
    {
        var list = new List<Rel> {relation};
        list.AddRange(relations);
        _relations = list.ToArray();
    }
} 
```

很抱歉之前编辑代码试图隐藏我想要做的事情。直接从我的代码编辑器粘贴更容易！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T10:53:29.443

[代码合同](http://msdn.microsoft.com/en-us/library/dd264808%28v=vs.100%29.aspx)呢？

```
public MyClass(params string[] things)
{
    Contract.Requires(things != null && things.Any());
    _things.AddRange(things);
} 
```

> 代码契约包括用于标记代码的类、**用于编译时分析的静态分析器**和运行时分析器。

至少你会得到静态分析器的警告。您可以在发布模式下关闭运行时分析以避免性能损失。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-27T10:48:09.480

我相信您正在寻找RequiredAttribute（自.NET 3.5 起可用）

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.requiredattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.requiredattribute.aspx)。

# shell - 如果 bat 文件突然终止，则恢复默认工作目录

> ID：15656927
> 
> 赞同：10
> 
> 时间：2013-03-27T10:43:50.093
> 
> 标签：shell, batch-file, cmd, command-prompt, windows-console

我有一个场景，在执行批处理文件期间，它导航到不同的文件夹（比如“../asdf”）；并且在执行结束时，它将当前工作目录设置为用户调用 .bat 文件的同一文件夹。

但是如果用户在批处理完成之前终止了批处理，那么 cmd 会显示当前的工作目录（比如“../asdf”）。

但就我而言，我需要将工作目录恢复为默认/预定义的目录。可能吗？

*   批处理文件是我写的，所以我可以修改它。
*   CMD 是通过我可以控制的 CMD 的桌面快捷方式打开的；因此可以在那里完成工作目录或将参数传递给 CMD 等属性。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-27T12:53:31.510

在您的批处理脚本中使用`setlocal`来封装您的批处理会话的运行环境。如果用户在您之前终止脚本`cd`或`popd`返回，您的脚本仍将退出它启动的目录中。这是一个简短的测试：

```
@echo off
setlocal
pushd c:\Users
cd
exit /b 
```

输出：

```
C:\Users\me\Desktop>test.bat
c:\Users

C:\Users\me\Desktop> 
```

请注意，我没有`popd`或`cd %userprofile%\Desktop`，但脚本退出后我仍然回到我的桌面。

此外，`setlocal`防止您使用孤立的变量来破坏您的环境，这些变量在批处理脚本之外没有任何意义。这只是一个好习惯。在控制台上，键入`help setlocal`以获取更多信息。

# c++ - 私人朋友运算符的代理类<<

> ID：15656928
> 
> 赞同：0
> 
> 时间：2013-03-27T10:43:51.607
> 
> 标签：c++

所以昨天我问了这个问题[私人朋友运营商<<](https://stackoverflow.com/questions/15648705/private-friend-operator/15649548) 关于如何`operator<<`为班级设为私人。我得到了一个很好的答案，它完全按照我的意愿工作，但我还有一些其他问题。

首先，我不明白代理类为什么不必成为朋友`private_printable`？我怎么可能`private_printable`从内部访问内部成员`operator<<`？

其次，在使用答案中的代码时，我写了这个：

```
operator proxy () const { return *this; } 
```

起初它对我来说似乎没问题，它甚至可以编译，但是当我运行它并得到一个段错误时，我意识到我没有为代理类定义任何构造函数，它将`private_printable`作为参数并因此允许转换。那么我的代码怎么可能编译，甚至没有给我任何警告？

然后我做的第三件事是给代理一个构造函数，它有一个引用`private_printable`作为它的参数（我没有让它显式），而不是定义转换运算符。现在一切都很好，只是又可以打电话`operator<<` 了`private_printable`。但我不太确定，为什么会这样。是因为 ADL 吗？我对它有一些模糊的理解，但我不确定它的所有细节。无论如何，这`proxy`门课是私人的，那么为什么 ADL 会有所作为呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:02:32.100

1.  可以访问的`operator<<`成员，`private_printable`因为它是`friend`的`private_printable`。它不是一个`friend`。`proxy`

2.  `return *this`返回一个`private_printable`对象，该对象必须隐式转换为`proxy`. 如何转换`private_printable`为`proxy`？打电话`private_printable::operator proxy ()`。但这就是我们已经使用的功能！段错误是由无限递归的堆栈溢出引起的。对于它的价值，无限循环将是另一种可能的结果。

3.  非`explicit`构造函数也是一个转换函数，与`operator proxy`. ADL 有点涉及，就像`operator proxy`使用了但没有构造函数一样。解决办法当然是制作constructor `explicit`。只有当构造函数的唯一操作数是代理类时，才会出现问题。

`proxy`仅当您明确命名时，作为成员的类`private`才重要。ADL 仍然可以找到带有`proxy`参数的函数，然后间接导致对转换函数的访问，因为类类型的使用不受访问限定的影响。只有名称查找受到影响。`private`同样，如果您只有一个成员类型，您总是可以使用`typedef`它。

# .net - 将一些表字段映射到字典中

> ID：15656929
> 
> 赞同：1
> 
> 时间：2013-03-27T10:43:53.747
> 
> 标签：.net, entity-framework, nhibernate, orm, bltoolkit

我们有一个遗留系统，它能够向其实体添加自定义字段。准确地说，这个特性实现得很糟糕：每个实体表都扩展了字段`Custom1`, ... `Custom 10`，而且还有大表`CustomFields`（`EntityType`, `EntityID`, `Custom11`, ... `Custom99`），其中`EntityType`是实体表的名称。

我们正在现有的坏数据库之上构建新代码，并正在寻找在实现时将所有这些 Customs 放入单个字典中的可能性。我们目前考虑的 ORM 是*BLToolkit*和*EF4*（前者现在正在使用，我们计划转向后者）。

有没有可能用两者中的任何一个来实现这种映射？也许其他一些 ORM（可能，我们想要*重型*ORM）可能会有所帮助？或者，有另一种最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:20:44.230

好吧，经过一番调查和讨论，我们决定在包含所有自定义字段值的实体表中引入 XML 字段。字段值与两个方向的实际自定义字段值同步。

# android - 如何以编程方式添加联系人？

> ID：15656930
> 
> 赞同：1
> 
> 时间：2013-03-27T10:43:55.847
> 
> 标签：android, contacts

我使用以下代码添加联系人：

```
 Intent intent = new Intent(Intent.ACTION_INSERT,  ContactsContract.Contacts.CONTENT_URI);

        activity.startActivityForResult(intent, ATTACH_VCARD_REQUEST_CODE); 
```

但是在我的 Google Nexus 上，默认的 Android 联系人管理器应用程序不会将结果返回给我的活动

我有以下行为： 1\. 我打电话给联系人经理 2\. 添加字段名称并单击“完成”

之后打开默认Android联系人管理器的其他活动，只有当我按下返回或向上按钮时，我才能离开这个活动。之后，我无法使用返回堆栈（返回按钮）返回我的应用程序活动。我可以使用最近的任务管理器打开我的应用程序，但随后我得到 resulCode == 0 和 intent == null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:10:43.263

我查看了标准联系人应用程序的源代码，并找到了负责创建新联系人的 Activity。有标志 INTENT_KEY_FINISH_ACTIVITY_ON_SAVE_COMPLETED = "finishActivityOnSaveCompleted"; 如果此标志为真，则调用 setResult(RESULT_OK);

所以这个问题的解决方案是

```
 Intent intent = new Intent(ContactsContract.Intents.Insert.ACTION);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
    intent.putExtra("finishActivityOnSaveCompleted", true);
    activity.startActivityForResult(intent, ATTACH_VCARD_REQUEST_CODE); 
```

# php - 如何按键刷新 Magento 缓存？

> ID：15656933
> 
> 赞同：3
> 
> 时间：2013-03-27T10:43:58.237
> 
> 标签：php, magento

我想在 Magento Collections Data Collection 数据文件时刷新我的扩展缓存。COLLECTION_DATA 缓存被刷新，其他事件也会刷新，这会清理这个缓存。

我有一个自定义类，主要部分是：

```
$this->_usecache = Mage::app()->useCache('collections');
if ($this->_usecache){
    $cache = Mage::app()->getCache();
    $key = "mycategory".$this->_config['rootid'];
    $this->tmpAllItems = $cache->load($key);
} else {
    $this->tmpAllItems = false;
}
if ($this->tmpAllItems === false){
    $this->tmpAllItems = array();
    $model = Mage::getModel('catalog/category');
    $categories = $model->getCategories($this->_config['rootid'], 0, true, false, true);
    $k = array_keys($categories->getNodes());
    $parent = $categories[$k[0]]->getParent();
    $this -> treeToFlat($parent);
    if ($this->_usecache) 
    {
         $cache->save(serialize($this->tmpAllItems),
                      $key,
                      array(Mage_Catalog_Model_Category::CACHE_TAG,
                            Mage_Core_Model_App::CACHE_TAG)
                     );
    } else {
        $this->tmpAllItems = unserialize($this->tmpAllItems);
    }
    return $this->tmpAllItems; 
```

所以，我的目标是在清理 Mage_Catalog_Model_Category::CACHE_TAG 时也刷新/清理这个缓存。这怎么可能？

## 更新#1

当我用过

```
$cache = Mage::app()->getCacheInstance(); 
```

代替

```
$cache = Mage::app()->getCache(); 
```

清洁开始工作。当我有一个类别时，列表会刷新，但如果什么也没发生，它会保持缓存。也有人可以解释为什么这种变化会发生这种情况？

## 解决方案

```
...
$cache->save(serialize($this->tmpAllItems),$key,array('my_cache_tag'));
.... 
```

然后明确：

> ```
>  $cache = Mage::app()->getCache();
>     foreach($cache->getTags() as $tag){
>         if(strpos($tag, 'my_cache_tag')){
>             $ids = $cache->getIdsMatchingAnyTags(array($tag));
>             foreach($ids as $id){
>                 $cache->remove($id);
>             }
>         }
>     } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-18T04:01:56.353

我找到了解决此问题的方法，我在管理面板中单击刷新缓存时使用观察者，您可以在[我的博客中查看详细信息](http://www.worldofcoder.com/2013/11/create-new-cache-type-in-magento.html)

step1：在管理面板中单击刷新时创建带有事件的观察者：

```
 <events>
   <adminhtml_cache_refresh_type>
    <observers>
     <yournamespace_yourextenstion_model_observer>
      <type>singleton</type>
      <class>YourNameSpace_YourExtenstion_Model_Observer</class>
      <method>adminhtml_cache_refresh_type</method>
     </yournamespace_yourextenstion_model_observer>
    </observers>
   </adminhtml_cache_refresh_type>
  </events 
```

现在，我们可以将文件名创建为：Observer.php 按照以下路径：YourNameSpace/YourExtenstion/Model/Observer.php 并将此代码添加到 Observer.php

这是observer.php 文件的内容

```
class YourNameSpace_YourExtenstion_Model_Observer
{
 public function adminhtml_cache_refresh_type($observer)
 {
  $request = Mage::app()--->getRequest()->getPost('types');
  if(in_array('ee_content', $request))
  {
   $cache = Mage::app()->getCache();
   $tags = $cache->getTags();
   $ee_content = '';
   foreach($tags as $tag)
   {
    if(strpos($tag, 'ee_content'))
    {
     $ee_content = $tag;
    }
   }
   if($ee_content !='')
   {

    $ids = $cache->getIdsMatchingAnyTags(array($ee_content));
    foreach($ids as $id)
    {
     $cache->remove($id);
    }
   }

  }
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T13:04:16.553

检查事件**application_clean_cache**

当清除缓存时 -`Mage::app()->cleanCache();`

或当系统保存产品等...

并查看事件 - 通过管理面板清除缓存时的**adminhtml_cache_refresh_type**

以及您在观察者中的代码

```
Mage::app()->getCache()->clean('all', array('my_tag')); 
```

并且需要为 Observer 添加一些逻辑，以检查是否需要刷新缓存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T04:30:00.637

您好您可以使用 Mage::dispatchEvent 方法创建自己的调度事件。覆盖您的模型文件 Mage_Catalog_Model_Category 并在那里注册一个新的调度程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:11:32.890

`getCacheInstance()`将为您获取核心缓存模型实例，同时`getCache()`为您获取缓存对象。

`getCacheInstance()`要通过and清理所有内容，`getCache()`您需要像下面这样使用它：

```
Mage::app()->getCacheInstance()->flush();
Mage::app()->getCache()->clean(); 
```

要清理您的自定义缓存类型，您将使用：

```
Mage::app()->getCacheInstance()->cleanType('your_custom_cache_type'); 
```

# c# - OleDBException 错误插入

> ID：15656936
> 
> 赞同：2
> 
> 时间：2013-03-27T10:44:05.003
> 
> 标签：c#, .net, ms-access, oledbconnection

我构建了 ac# 应用程序，您可以在其中登录并注册一个新帐户。但是当我点击我的按钮新帐户并填写必填字段时，我会收到以下错误：

vcom.ExecuteNonQuery(); -> OleDBException 未处理。指令 INSERT 包含语法错误。

请参阅下面的代码：

* * *

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace Eindopdracht
{
    public partial class maak_account : Form
    {

        OleDbConnection vcon = new OleDbConnection(@"provider= microsoft.jet.oledb.4.0;data source=sample.mdb");

        public maak_account()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            OleDbConnection vcon = new OleDbConnection(@"provider= microsoft.jet.oledb.4.0;data source=sample.mdb");
            vcon.Open();

            string test = string.Format("insert into inlog (PASSWORD, Username, leeftijd, gewicht) VALUES ('" + textBox2.Text + "','" + textBox1.Text + "','" + textBox3.Text + "','" + textBox4.Text + "')");
            OleDbCommand vcom = new OleDbCommand(test, vcon);
            vcom.ExecuteNonQuery();
            MessageBox.Show("Uw gegevens zijn opgeslagen");
            vcom.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:47:12.463

语法错误的原因是`Password`，恰好是列名，是保留关键字。

```
insert into inlog ([PASSWORD], Username, leeftijd, gewicht) 
```

*   [MS Access 保留关键字](http://office.microsoft.com/en-001/access-help/access-2007-reserved-words-and-symbols-HA010030643.aspx)

来自 MS Access Docs，

> 如果保留字已在使用中，您可以通过用方括号 ([ ]) 将每个出现的字括起来来避免错误消息。但是，最好的解决方案是将名称更改为非保留字。

为了进一步改进代码，

*   使用`using`语句正确处理对象
*   用于`try-catch`正确处理异常
*   参数化值以避免sql注入

例子，

```
string connStr = @"provider= microsoft.jet.oledb.4.0;data source=sample.mdb";
string test = "insert into inlog ([PASSWORD], Username, leeftijd, gewicht) VALUES (?, ?, ?, ?)";

using(OleDbConnection vcon = new OleDbConnection(connStr))
{
    using(OleDbCommand vcom = new OleDbCommand(test, vcon))
    {
        vcom.Parameters.AddWithValue("PASSWORD", textBox2.Text);
        vcom.Parameters.AddWithValue("Username", textBox1.Text);
        vcom.Parameters.AddWithValue("leeftijd", textBox3.Text);
        vcom.Parameters.AddWithValue("gewicht", textBox4.Text);
        try
        {
            vcon.Open();
            com.ExecuteNonQuery();
        }
        catch(OleDbException ex)
        {
            // do something with the exception
        }
    }
} 
```

*   [使用参数化查询](http://www.4guysfromrolla.com/webtech/092601-1.2.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:50:30.537

使用 try/catch 块来捕获异常并查看错误消息。还要在 finally 块中处理您的资源。finally 块将始终被执行，即使抛出异常也是如此。

```
try
{
    OleDbConnection vcon = new OleDbConnection(@"provider= microsoft.jet.oledb.4.0;data source=sample.mdb");
    vcon.Open();

    string test = string.Format("insert into inlog (PASSWORD, Username, leeftijd, gewicht) VALUES ('" + textBox2.Text + "','" + textBox1.Text + "','" + textBox3.Text + "','" + textBox4.Text + "')");
    OleDbCommand vcom = new OleDbCommand(test, vcon);
    vcom.ExecuteNonQuery();
    MessageBox.Show("Uw gegevens zijn opgeslagen");
}
catch(Exception ex)
{
    MessageBox.Show(ex.Message);
}
finally
{
    vcom.Dispose();
    vcon.Close();
    vcon.Dispose();
} 
```

# drivers - VxWorks PCI 驱动程序 - 编译错误

> ID：15656937
> 
> 赞同：0
> 
> 时间：2013-03-27T10:44:05.330
> 
> 标签：drivers, vxworks, pci

我正在尝试在 VXworks 中编写 PCI 设备驱动程序。即使 pciConfigLib 的源文件已就位，但在编译后，它仍会抛出错误，指出“未定义的函数引用”。

任何帮助表示赞赏。

感谢 VxNewbee

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:48:25.680

我只是要把它扔在那里，但如果你实际上是在调用 Pcifinddevice 那就错了，你需要 pciFindDevice （案例很重要）

如果这不起作用，那么您可以从 vxworks shell 向我显示输出

```
lkup "pci" 
```

还请务必阅读设备驱动程序开发人员指南： [http ://www.mecatronica.eesc.usp.br/wiki/upload/0/07/Vxworks_device_driver_developers_guide_6.0.pdf](http://www.mecatronica.eesc.usp.br/wiki/upload/0/07/Vxworks_device_driver_developers_guide_6.0.pdf)

它并没有一个很好的基本示例来说明如何创建基本驱动程序，但是如果您使用的是 eclipse，那么您应该能够在其中创建一个新的设备驱动程序项目，但是它确实提供了一些很好的建议，从现有的模板驱动程序。此外，您还应该能够从风河支持站点访问其他文档。

[http://www.windriver.com/products/vxworks/](http://www.windriver.com/products/vxworks/)

# android - Android如何使淡入淡出的边缘出现在水平列表视图中

> ID：15656944
> 
> 赞同：0
> 
> 时间：2013-03-27T10:44:24.040
> 
> 标签：android

我使用了[Horizo​​ntalListView](https://github.com/dinocore1/DevsmartLib-Android/blob/master/devsmartlib/src/com/devsmart/android/ui/HorizontalListView.java)，它`ListView`以水平方式运行。这个[Horizo](https://github.com/dinocore1/DevsmartLib-Android/blob/master/devsmartlib/src/com/devsmart/android/ui/HorizontalListView.java) ​​ntalListView 在滚动到列表的第一个和最后一个项目时不显示`fadingEdge`。所以我需要在这个视图上添加。我`fadingEdge`可能会找到第一个和最后一个孩子的滚动，但我不知道如何显示`fadingEdge`何时滚动到达第一个和最后一个孩子，如`ListView`.Further 我已经添加

```
 <com.ui.widgets.HorizontalListView
        android:id="@+id/horizontalListView"
        android:layout_width="fill_parent"
        android:layout_height="120dip"
        android:gravity="left" 
        android:fadingEdge="horizontal"/> 
```

而且它没有任何效果。所以你能指出我正确的方向如何以编程方式添加`fadingEdge`到`HorizontalListView`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T08:31:18.627

从[文档中`fadingEdge`](http://developer.android.com/reference/android/R.attr.html#fadingEdge)：

> 此属性已弃用，自 API 级别 14 ( ) 起将被忽略`ICE_CREAM_SANDWICH`。使用淡入淡出的边缘可能会导致明显的性能下降，并且应仅在应用程序的视觉设计需要时使用。要请求 API 级别 14 及更高级别的衰落边缘，请改用该`android:requiresFadingEdge`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T04:04:37.007

尝试使用该`android:overScrollMode`属性。

只需添加

```
android:overScrollMode="always" 
```

到您的视图。

> android:overScrollMode 可以有三个值：“always”、“never”、“ifContentScrolls”。

# javascript - 使用 sinon 和 jasmine 测试提交时的表单操作

> ID：15656945
> 
> 赞同：2
> 
> 时间：2013-03-27T10:44:33.880
> 
> 标签：javascript, coffeescript, jasmine, sinon

我尝试验证单击提交按钮时是否执行了正确的表单操作。我在 Chrome 中使用 Karma（以前的 testacular）运行测试，并使用`sinon`创建一个假服务器来捕获 POST 请求。好像没拍到

形式

```
<form action="/authenticate_open_id" method="POST">
<label>Or sign up with:</label>
<input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"/>
<input type="hidden" name="return_url" value="/"/>
<input id="signup_with_google" type="submit" value="Google Account"/></form>< 
```

测试代码

```
server = sinon.fakeServer.create()
server.autoRespond = true
server.respondWith 'POST', '/authenticate_open_id', [302, {}, '']

view.$el.find('#signup_with_google').click()
waitsFor ->
    server.requests.length > 0
, 'server has not been called', 100                    
runs ->
    console.log 'server', server.requests 
```

假服务器永远不会捕获该请求（但类似的代码适用于 ajax 发起的请求）。但是我在运行测试套件的 chrome 浏览器中遇到错误

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost:9876/authenticate_open_id 
```

，所以看起来有些请求已经完成，但假服务器无法捕获它？

![在此处输入图像描述](../Images/06b657b83cd1d252319f0a127863945d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:07:33.560

这不能工作，因为假服务器仅适用于 ajax 请求。假服务器唯一要做的就是模拟 XmlHttpRequest 对象并调用传递的成功/错误函数。因此，在您的情况下，单击该按钮将以新的帖子网址重新加载页面结束。

# ios - 在objective-c中从sqlite数据库中检索表名

> ID：15656946
> 
> 赞同：3
> 
> 时间：2013-03-27T10:44:34.777
> 
> 标签：ios, objective-c, sqlite

如何在objective-c中检索sqlite3表名。例如，如果我创建了几个表，现在我想`.table`在终端中获取（显示）它们的名称。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:26:54.590

使用以下代码：

```
-(NSMutableArray *)fetchTableNames
{   
    sqlite3_stmt* statement;
    NSString *query = @"SELECT name FROM sqlite_master WHERE type=\'table\'";
    int retVal = sqlite3_prepare_v2(YOUR_DB_OBJ, 
                                    [query UTF8String],
                                    -1,
                                    &statement,
                                    NULL);

    NSMutableArray *selectedRecords = [NSMutableArray array];
    if ( retVal == SQLITE_OK )
    {
        while(sqlite3_step(statement) == SQLITE_ROW )
        {
            NSString *value = [NSString stringWithCString:(const char *)sqlite3_column_text(statement, 0)
                                                 encoding:NSUTF8StringEncoding];
            [selectedRecords addObject:value];
        }       
    }   

    sqlite3_clear_bindings(statement);
    sqlite3_finalize(statement);

    return selectedRecords;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:49:08.120

```
SELECT name FROM sqlite_master WHERE type='table' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T12:39:02.780

```
SELECT * FROM sqlite_master where type='table' 
```

尝试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T08:36:34.263

```
- (NSArray *)listOfColumnNamesForTable:(NSString *)tableName WithDBFilePath:(NSString*)databasePath {

sqlite3 *sqlite3Database;
NSMutableArray *columnNames = [NSMutableArray array];
int openDatabaseResult = sqlite3_open([databasePath UTF8String], &sqlite3Database);
if(openDatabaseResult == SQLITE_OK) {
    sqlite3_stmt *compiledStatement;
    NSString *query = [NSString stringWithFormat:@"pragma table_info ('%@')",tableName];
    int prepareStatementResult = sqlite3_prepare_v2(sqlite3Database, [query UTF8String], -1, &compiledStatement, NULL);
    if(prepareStatementResult == SQLITE_OK) {
        sqlite3_stmt* statement;
        int retVal = sqlite3_prepare_v2(sqlite3Database,
                                        [query UTF8String],
                                        -1,
                                        &statement,
                                        NULL);

        if ( retVal == SQLITE_OK )
        {
            while(sqlite3_step(statement) == SQLITE_ROW )
            {
                NSString *value = [NSString stringWithCString:(const char *)sqlite3_column_text(statement, 1)
                                                     encoding:NSUTF8StringEncoding];
                [columnNames addObject:value];
            }
        }
        sqlite3_clear_bindings(statement);
        sqlite3_finalize(statement);
        sqlite3_close(sqlite3Database);
        return [columnNames mutableCopy];
    }

}
sqlite3_close(sqlite3Database);
return nil; 
```

}

# sql - 带有复选框的 SQL SERVER 示例

> ID：15656948
> 
> 赞同：2
> 
> 时间：2013-03-27T10:44:44.963
> 
> 标签：sql, sql-server, checkbox

在复选框方面需要您的帮助。这是我的代码：

```
CREATE PROCEDURE stad_list

@inp_location_code numeric (3,0) = -1
@inp_item_code_bgn numeric (5,0) = -1
@inp_item_code_end numeric (5,0) = -1
@inp_shipped numeric (2,0) = 0,    --checkbox, if it is checked then returns the items in table which were shipped (value in table is 1)
@inp_check numeric (2,0) = 0, --checkbox, if it is checked then returns data which is still in process of checking for availability in warehouse (value in table is 0)
@inp_not_ship numeric(2,0) = 0   --checkbox, if it is checked then returns data which had not been shipped during some problems (valuein table is 2)

AS

BEGIN
   SET NOCOUNT ON;

   DECLARE @SELECT as varchar (3000) = ''
   DECLARE @WHERE as varchar (1000) = ''

   IF (@inp_location_code != -1)
      SET @WHERE = @WHERE + ' WHERE [dbo].item.location =' + CONVERT(varchar,@inp_location_code)

   IF (@inp_item_code_bgn != -1)
       SET @WHERE = @WHERE + ' AND [dbo].item.code>=' + CONVERT(varchar, @inp_item_code_bgn)

   IF (@inp_item_code_end != -1)
       SET @WHERE = @WHERE + ' AND [dbo].item.code<=' + CONVERT(varchar, @inp_item_code_end)

   IF (@inp_shipped = 1)
      SET @WHERE = @WHERE + ' AND [dbo].item.ship = 1'

   IF (@inp_check = 1)
      SET @WHERE = @WHERE + ' AND [dbo].item.ship = 0'

   IF (@inp_not_ship = 1)
      SET @WHERE = @WHERE + ' AND [dbo].item.ship = 2'

    SET @SELECT = @SELECT + '
        SELECT
             [dbo].item.name as ''NAME'',
             [dbo].item.location as ''LOCATION'',
             [dbo].item.code as ''CODE'',
             [dbo].item.ship as ''STATUS''
        FROM [dbo].item '
        + @WHERE 

    EXEC (@SELECT)

    RETURN @@ROWCOUNT

END 
```

当我只选中一个复选框时它工作正常，但在选中其中 2 个时无法获取任何数据。那么当我想选中两个复选框时该怎么办？有什么建议么？

这是我的桌子

```
Id     Item_code    Item_name   Item_location   Item_ship
1      14789        Juice       Tokyo            0
2      14785        Boots       Tokyo            2
3      98744        Hat         Osaka            0
4      36987        Socks       Kyoto            1 
```

并且有三个复选框

*   已发货

*   检查

*   未发货

如果我检查发货，那么输出将是这样的：

```
Id     Item_code    Item_name   Item_location   Item_ship
    4      36987        Socks       Kyoto            1 
```

但我想这样做。当我检查已发货和检查时，输出将是：

```
Id     Item_code    Item_name   Item_location   Item_ship
    1      14789        Juice       Tokyo            0
    3      98744        Hat         Osaka            0
    4      36987        Socks       Kyoto            1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:37:08.587

使用临时表作为参数表

```
IF (@inp_shipped = 1) OR (@inp_check = 1) OR (@inp_not_ship = 1)
BEGIN
  IF OBJECT_ID('tempdb.dbo.#Parameters') IS NOT NULL DROP TABLE dbo.#Parameters
  SELECT *
  INTO #Parameters
  FROM (
        SELECT CASE WHEN @inp_shipped = 1 THEN 1 END AS Ship
        UNION ALL
        SELECT CASE WHEN @inp_check = 1 THEN 0 END
        UNION ALL
        SELECT CASE WHEN @inp_not_ship = 1 THEN 2 END
        ) p
   WHERE p.Ship IS NOT NULL     
   SET @WHERE = @WHERE + ' AND [dbo].item.ship IN (SELECT ship FROM #Parameters)'
 END 
```

为了更好的性能（使用索引查找操作）如果你在ship列上有索引，需要在临时表上创建索引：

```
CREATE INDEX x ON #Parameters(ship) 
```

![在此处输入图像描述](../Images/428ccaaeba01dc9570a8a22f88fb4a5d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:55:43.840

您可以将您的选项组合到这种结构中：

```
declare @orcheck varchar(255)
set @orcheck = 'AND 1=2 ('

IF (@inp_shipped = 1)
SET @orcheck = @orcheck + ' OR [dbo].item.ship = 1'

IF (@inp_check = 1)
SET @orcheck = @orcheck + ' OR [dbo].item.ship = 0'

IF (@inp_not_ship = 1)
SET @orcheck = @orcheck + ' OR [dbo].item.ship = 2'

set @orcheck = @orcheck + ')' 
```

这样，当您选择了所有 3 个复选框时，WHERE 子句将如下所示：

```
AND (1=2
    OR [dbo].item.ship = 1
    OR [dbo].item.ship = 0
    OR [dbo].item.ship = 2
) 
```

当没有选择任何内容时，它将是：

```
AND (1=2
) 
```

这是你所期望的，我相信。

# java - onPrepareOptionsMenu 没有在 Fragments 中被调用

> ID：15656953
> 
> 赞同：24
> 
> 时间：2013-03-27T10:45:02.817
> 
> 标签：java, android

```
 @Override
    public void onCreateOptionsMenu(Menu menu,MenuInflater inflater){
        Log.d("Does", "get called");
        inflater.inflate(R.menu.menuItem, menu);
        super.onCreateOptionsMenu(menu,inflater);
    }

    @Override
    public void onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);
        getActivity().invalidateOptionsMenu();
        MenuItem filter = menu.findItem(R.id.section);

        filter.setVisible(false);

    } 
```

我正在尝试将我的菜单加载到片段中并加载它，但是`onPrepareOptionsMenu`根本没有被调用，我需要隐藏一些菜单项。

**更新：**

```
 @Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setHasOptionsMenu(true);
} 
```

我`setHasOptionsMenu(true)`在我的`onCreate()`方法中调用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-10T05:31:25.263

在 Android 3.0 及更高版本上，当菜单项出现在操作栏中时，选项菜单被认为始终处于打开状态。当事件发生并且您想要执行菜单更新时，您必须调用 invalidateOptionsMenu() 来请求系统调用 onPrepareOptionsMenu()。

[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

要更改特定项目使用：`menu.findItem(R.id.your_item_id)`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-08-22T07:13:51.077

你需要做两件事。第 1 步：在 Fragment OnCreateView 添加 setHasOptionsMenu(true);

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    setHasOptionsMenu(true);
    return inflater.inflate(R.layout.fragment_user_settings, container, false);
} 
```

第2步：你需要添加getActivity().invalidateOptionsMenu(); 在 OnViewCreated 的片段中。或者在您更改 Fragment 时在 mainActivity 中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-25T08:41:43.387

可能为时已晚，但我遇到了同样的问题，解决方案非常简单。只需从您的片段中调用 getActivity().invalidateOptionsMenu() 即可。这将调用 onPrepareOptionsMenu ，在这里您可以像这样控制项目的可见性：menu.findItem(R.id.youritem).setVisible(true/false); 希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-17T10:31:49.233

> 您必须通知系统您的应用栏片段正在参与选项菜单的填充。为此，**请在片段的 onCreate(Bundle)**方法中调用 setHasOptionsMenu(true)

参考。[https://developer.android.com/guide/fragments/appbar#activity-register](https://developer.android.com/guide/fragments/appbar#activity-register)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T09:20:59.820

这对我有用。

```
public class ContentFragment extends android.support.v4.app.Fragment {
    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.content_frame,container,false);
        setHasOptionsMenu(true);
        return v;
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        inflater.inflate(R.menu.note_menu,menu);
        super.onCreateOptionsMenu(menu, inflater);
    }
} 
```

# r - R命令在一个点后改变x的函数？

> ID：15656958
> 
> 赞同：0
> 
> 时间：2013-03-27T10:45:20.220
> 
> 标签：r, function

我正在模拟 R 中的一些数据，将 x 与 Y （速率）作图，我希望 x 线性增加到一个点，然后趋于平稳。也就是说，Y 是 x 的函数，介于 0.1 和 5 之间，但从 5.01 到 10 是常数。是否有允许改变 x 的简单命令？我确定我的讲师告诉过我一个，但我不记得了...任何帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:49:08.503

你可以使用`ifelse`：

```
> f <- function(x) ifelse(x < 5, x**2, 25)
> x <- seq(1, 10, .1)
> plot(x, f(x), type='l') 
```

![在此处输入图像描述](../Images/6415057b53fe9396760f82bed9f1563c.png)

# c++ - 渲染时不出现 3D 模型

> ID：15656963
> 
> 赞同：9
> 
> 时间：2013-03-27T10:46:03.133
> 
> 标签：c++, ios, opengl-es, objective-c++, vuforia

我正在使用[Vuforia](http://www.qualcomm.com/solutions/augmented-reality)将 3D 模型放置在图像目标上。我创建了一个通用的 C++ 解决方案，可以在 Android 和 iOS 上工作。它适用于 Android，但我无法让 3D 模型出现在 iOS 中。它完美地跟踪图像目标，但没有 3D 模型的迹象。我使用的 3D 模型可以在[这里](http://www.ipaste.eu/view.php?id=2646)找到。

这就是我正在做的事情：

每次需要渲染屏幕时，Vuforia 都会调用此方法：

```
- (void)renderFrameQCAR
{
    [self setFramebuffer];
    [[ObjectController getInstance] getObjectInstance]->renderFrame();
    [self presentFramebuffer];
} 
```

这是`setFramebuffer`方法（Objective-C++）：

```
- (void)setFramebuffer
{
    if (context) {
        [EAGLContext setCurrentContext:context];

        if (!defaultFramebuffer) {
            [self performSelectorOnMainThread:@selector(createFramebuffer) withObject:self waitUntilDone:YES];
        }

#ifdef USE_OPENGL1
        glBindFramebufferOES(GL_FRAMEBUFFER_OES, defaultFramebuffer);
#else
        glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebuffer);
#endif
    }
} 
```

这是`renderFrame`方法（C++）：

```
void IDRObject::renderFrame()
{
    // Clear color and depth buffer
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Get the state from QCAR and mark the beginning of a rendering section
    QCAR::State state = QCAR::Renderer::getInstance().begin();

    // Explicitly render the Video Background
    QCAR::Renderer::getInstance().drawVideoBackground();

#ifdef DEVICE_OPENGL_1
    // Set GL11 flags:
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glEnable(GL_TEXTURE_2D);
    glDisable(GL_LIGHTING);

#endif

    glEnable(GL_DEPTH_TEST);

    // We must detect if background reflection is active and adjust the culling direction.
    // If the reflection is active, this means the post matrix has been reflected as well,
    // therefore standard counter clockwise face culling will result in "inside out" models.
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);
    if(QCAR::Renderer::getInstance().getVideoBackgroundConfig().mReflection == QCAR::VIDEO_BACKGROUND_REFLECTION_ON)
        glFrontFace(GL_CW);  //Front camera
    else
        glFrontFace(GL_CCW);   //Back camera

    SampleUtils::checkGlError("gl start setup stuff");
    // Did we find any trackables this frame?
    for(int tIdx = 0; tIdx < state.getNumTrackableResults(); tIdx++)
    {
        // Get the trackable:
        const QCAR::TrackableResult* result = state.getTrackableResult(tIdx);
        const QCAR::Trackable& trackable = result->getTrackable();
        QCAR::Matrix44F modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(result->getPose());

        // Choose the texture based on the target name:
        int textureIndex;
        if (strcmp(trackable.getName(), "chips") == 0)
        {
            textureIndex = 0;
        }
        else if (strcmp(trackable.getName(), "stones") == 0)
        {
            textureIndex = 1;
        }
        else
        {
            textureIndex = 2;
        }

        const Texture* const thisTexture = textures[textureIndex];

#ifdef DEVICE_OPENGL_1
        // Load projection matrix:
        glMatrixMode(GL_PROJECTION);
        glLoadMatrixf(projectionMatrix.data);

        // Load model view matrix:
        glMatrixMode(GL_MODELVIEW);
        glLoadMatrixf(modelViewMatrix.data);
        glTranslatef(0.f, 0.f, kObjectScale);
        glScalef(kObjectScale, kObjectScale, kObjectScale);

        // Draw object:
        glBindTexture(GL_TEXTURE_2D, thisTexture->mTextureID);
        glTexCoordPointer(2, GL_FLOAT, 0, (const GLvoid*) &teapotTexCoords[0]);
        glVertexPointer(3, GL_FLOAT, 0, (const GLvoid*) &teapotVertices[0]);
        glNormalPointer(GL_FLOAT, 0,  (const GLvoid*) &teapotNormals[0]);
        glDrawElements(GL_TRIANGLES, NUM_TEAPOT_OBJECT_INDEX, GL_UNSIGNED_SHORT,
                   (const GLvoid*) &teapotIndices[0]);

#else

        QCAR::Matrix44F modelViewProjection;

        SampleUtils::translatePoseMatrix(0.0f, 0.0f, kObjectScale, &modelViewMatrix.data[0]);
        SampleUtils::scalePoseMatrix(kObjectScale, kObjectScale, kObjectScale, &modelViewMatrix.data[0]);
        SampleUtils::multiplyMatrix(&projectionMatrix.data[0], &modelViewMatrix.data[0], &modelViewProjection.data[0]);

        glUseProgram(shaderProgramID);

        glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*) &teapotVertices[0]);
        glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*) &teapotNormals[0]);
        glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0, (const GLvoid*) &teapotTexCoords[0]);

        glEnableVertexAttribArray(vertexHandle);
        glEnableVertexAttribArray(normalHandle);
        glEnableVertexAttribArray(textureCoordHandle);

        glActiveTexture(GL_TEXTURE0);
        glBindTexture(GL_TEXTURE_2D, thisTexture->mTextureID);

        glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE, (GLfloat*)&modelViewProjection.data[0] );
        glUniform1i(texSampler2DHandle, 0 /*GL_TEXTURE0*/);
        glDrawElements(GL_TRIANGLES, NUM_TEAPOT_OBJECT_INDEX, GL_UNSIGNED_SHORT, (const GLvoid*) &teapotIndices[0]);

        LOG("Tracking awesome targets.\n");
        SampleUtils::checkGlError("ImageTargets renderFrame\n");
#endif

    }

    glDisable(GL_DEPTH_TEST);
    glDisable(GL_CULL_FACE);

#ifdef DEVICE_OPENGL_1
    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
#else
    glDisableVertexAttribArray(vertexHandle);
    glDisableVertexAttribArray(normalHandle);
    glDisableVertexAttribArray(textureCoordHandle);
#endif

    QCAR::Renderer::getInstance().end();
} 
```

最后一个`presentFrameBuffer`（Objective-C++）：

```
- (BOOL)presentFramebuffer
{
    BOOL success = FALSE;

    if (context) {
        [EAGLContext setCurrentContext:context];

#ifdef USE_OPENGL1
        glBindRenderbufferOES(GL_RENDERBUFFER_OES, colorRenderbuffer);
#else
        glBindRenderbuffer(GL_RENDERBUFFER, colorRenderbuffer);
#endif

        success = [context presentRenderbuffer:GL_RENDERBUFFER];
    }

    return success;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:19:57.230

事实证明，`projectionMatrix`从未设置过。

我错过了以下电话：

```
// Cache the projection matrix:
const QCAR::CameraCalibration& cameraCalibration = QCAR::CameraDevice::getInstance().getCameraCalibration();
projectionMatrix = QCAR::Tool::getProjectionGL(cameraCalibration, 2.0f, 2500.0f); 
```

它们最初放置在`startCamera`Vuforia 的 ImageTarget 示例中的方法中。

# php - PHP 谷歌 API 图表

> ID：15656964
> 
> 赞同：0
> 
> 时间：2013-03-27T10:46:05.800
> 
> 标签：php, html

我想画一个谷歌图表。在示例中，我们将以下 url 嵌入到我们的 HTML 代码中：

```
https://chart.googleapis.com/chart?cht=lc&chs=250x100&chd=t:60,40 
```

如何用`t:60,40`从 db 获得的数据数组替换数据？

假设我有以下数组`$chartdata`：

```
$chartdata = [1, 2, 3, 4, 5] 
```

现在，我想绘制与上面相同的图表，但使用我的`$chartdata`.

以下方法不起作用：

```
<?php
echo "<img src='https://chart.googleapis.com/chart?cht=lc&amp;chs=250x100&amp;chd=t:" . $chartdata ."'>";
?> 
```

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:58:49.150

使用[内爆](http://www.php.net/manual/en/function.implode.php)

```
<?php
echo "<img src='https://chart.googleapis.com/chart?cht=lc&amp;chs=250x100&amp;chd=t:" . implode(",", $chartdata) . "'>";
?> 
```

# login - 调用 LoginAsync 时出现 NullReferenceException

> ID：15656966
> 
> 赞同：0
> 
> 时间：2013-03-27T10:46:07.583
> 
> 标签：login, nullreferenceexception, hotmail, winrt-async, live-connect-sdk

在我的 WinRT 应用程序中，我希望用户连接到他的 Hotmail 帐户以访问他的联系人。我使用Microsoft [Live Connect SDK](http://msdn.microsoft.com/en-us/library/live/hh243641.aspx)中的[Hotmail API 。](http://msdn.microsoft.com/en-us/library/live/hh826535.aspx)

为了建立连接，我使用了相同文档的代码[示例](http://msdn.microsoft.com/en-us/library/live/hh826543.aspx#csharp)。

```
if (!Windows.ApplicationModel.DesignMode.DesignModeEnabled)
{
    authClient = new LiveAuthClient();
    LiveLoginResult authResult =
        await authClient.LoginAsync(new string[] { "wl.signin", "wl.basic", "wl.emails" });
    if (authResult.Status == LiveConnectSessionStatus.Connected)
    {
        this.session = authResult.Session;
    }
} 
```

但是代码在方法[LoginAsync](http://msdn.microsoft.com/en-us/library/live/hh694246.aspx)中引发了 NullReferenceException 。这是堆栈跟踪：

```
 at Microsoft.Live.ResourceHelper.GetString(String name)
   at Microsoft.Live.TailoredAuthClient.<AuthenticateAsync>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.Live.LiveAuthClient.<ExecuteAuthTaskAsync>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Project.View.TestHotmailConnection.<Button_Click_1>d__0.MoveNext() in TestHotmailConnection.xaml.cs:line 63 
```

我认为问题不是来自 authClient，因为在调用 LoginAsync 时它不为空。根据这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e897a135-52c7-45c3-bab9-2ee94803d876/)，问题来自未初始化的资源字典。有谁知道这个问题，最终如何解决？

谢谢

**编辑**

要在 WinRT 应用程序中使用 Live Contect，您需要在[Windows Store Dashboard](http://go.microsoft.com/fwlink/p/?LinkId=233762)中声明它，也许这是解决方案，我没有 Windows Store 帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T00:52:00.560

您需要在商店中注册您的应用程序。从 VS 转到项目 -> 商店 -> 将应用程序与商店关联

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T10:22:44.413

我对 5.6.2.0 有同样的问题。

为了修复它（作为解决方法），我将 Microsoft.Live.pri 和 Microsoft.Live\SDKManifest.xml 放在 Microsoft.Live.dll 旁边（来自[https://github.com/liveservices/LiveSDK-for-Windows](https://github.com/liveservices/LiveSDK-for-Windows)）。否则它无法获得错误描述（对于任何错误情况，等等没有互联网等）并崩溃。

我已经为这个问题添加了一个代码。看起来像配置问题

# firefox-addon - Mozilla Daaon：在 main.js -> MyContent.js -> MyScripts.js 之间交换变量

> ID：15656972
> 
> 赞同：1
> 
> 时间：2013-03-27T10:46:15.170
> 
> 标签：firefox-addon

我正在编写一个向网站添加功能的插件。但我需要解析 .js 之间的变量

**主.js：**

```
pageMod.PageMod({
  include: ["*"],
  contentScriptWhen: 'end',
  contentScriptFile: data.url("MyContent.js"),
  contentScriptOptions: {
    showOptions: true,
    dataUrl: data.url("MyContent.js") // To parse the URL-Path
  }
  }); 
```

**我的内容.js：**

```
//to read the URL like resource://.....:
var dataUrl=self.options.dataUrl.substring(0,self.options.dataUrl.lastIndexOf("/")+1)
var script = document.createElement("script");
script.type = "text/javascript";
script.src = dataUrl+"scripts.js";
window.document.head.appendChild(script); 
```

变量 dataUrl 存在于 MyContent.js 但不存在于 MyScripts.js 我需要 MyScripts.js 中的变量 dataUrl 才能知道保存在数据文件夹中的某些图像的 url。如何定义可以从所有脚本访问的全局变量？使用 worker 我可以在 main.js 和 MyContent.js 之间进行通信，但不能使用 MyScripts.js

# python - 用 scipy 绘制结果拟合曲线

> ID：15656974
> 
> 赞同：0
> 
> 时间：2013-03-27T10:46:19.123
> 
> 标签：python, scipy

根据[这个](https://stackoverflow.com/questions/5884768/skew-normal-distribution-in-scipy)，如果我想在数据点上绘制拟合曲线怎么办？我应该再次定义拟合函数吗？

Leastsq 方法缺乏文档和示例，我在理解它需要的参数时遇到了一些麻烦。

据此，如果我定义：

```
def optm(l, x, y):
    return skew(x, l[0], l[1], l[2]) - y 
```

那么，按以下方式拟合是否正确：

```
out_param = leastsq(optm, v1[:], args = (x_values, y_values), maxfev = 100000, full_output = 1) 
```

（`v1[:]`带有初始猜测参数的向量在哪里）？然后，再次，我如何绘制结果曲线？

我仍在努力理解，所以任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:36:28.657

我已通过以下方式解决：问题中报告的字符串代码是正确的。然后我将最适合的参数保存在另一个向量中：

```
p = out_param[0] 
```

然后，我使用了 skew 函数来获得新的（拟合的）y_values：

```
new_y_val = skew(x_values, p[0], p[1], p[2]) 
```

最后，我可以用这些新向量绘制图：

```
plot(time1, pl) 
```

# c++ - 在 LEMON 图形库中查找边的节点

> ID：15656976
> 
> 赞同：3
> 
> 时间：2013-03-27T10:46:20.867
> 
> 标签：c++, graph, lemon-graph-library

假设我有一个边缘。如何轻松找到它连接的两个节点？LEMON 的文档太少了，我找不到这方面的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T10:22:00.910

您可以使用源和目标来查找边缘连接的节点，它的工作原理是这样的

```
ListDigraph graph;
ListDigraph::Arc edge;
ListDigraph::Node a1,a2;
a1 = graph.source(edge);
a2 = graph.target(edge); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-16T10:46:35.937

如果其他人想知道如何在**无向**设置中实现这一点（“边缘”应该指代，而不是有向设置中的“弧”），对应的方法`source`和`target`是`u`和`v`。列出无向图所有边的端点的片段`G`如下所示：

```
for(ListGraph::EdgeIt edge(G); edge != INVALID; ++edge) 
    std::cout << G.id(G.u(edge)) << " -- " << G.id(G.v(edge)) << endl; 
```

请参阅[LEMON 文档的相关部分](http://lemon.cs.elte.hu/pub/tutorial/a00023.html)。

# c# - 字典集合中的 Linq

> ID：15656979
> 
> 赞同：-9
> 
> 时间：2013-03-27T10:46:23.553
> 
> 标签：c#, linq

我有字典的集合。

```
public class Bills
    {
        public Dictionary<string, string> billList { get; set; }
    } 
```

从此类 'Bill' 的实例列表中`List<Bills> allBills`，我将如何获取 key 等于 'User' 和 name 等于 'Nick' 的所有记录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:53:31.083

其他答案都没有利用字典的查找速度：

```
var matches = allBills
        .Where(dict => dict.billList.ContainsKey("User"))
        .Where(dict => dict.billList["User"] == "Nick"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:58:09.037

```
string key = "User";
string name = "Bill";

if (billList.ContainsKey(key))
{
    string result = billList[key];
    if (result == name)
        return result;
}
return null; // key and names did not match 
```

字典永远不会出现多次***相同***的键，所以我想知道您是否不应该使用 a`Dictionary<string, Bill>`代替，在这种情况下，代码看起来更像这样：

```
return billList.Where(kvPair => kvPair.Value.Key == key &&
                                kvPair.Value.Name == name).Select(kvPair => kvPair.Value); 
```

此代码假定`Bill`该类包含一个`Key`和一个`Name`字段。

# visual-studio - 什么是跨项目继承层次结构的好Visual Studio源代码布局

> ID：15656986
> 
> 赞同：0
> 
> 时间：2013-03-27T10:46:37.170
> 
> 标签：visual-studio, organization, code-organization, project-organization

我为不同的客户（Bob、Rick、Sue、Eve）开发了类似的计算包。计算包由几个计算模块（A、B、C、D、...）组成，它们以“责任链”模式组织。组装是用抽象工厂完成的。由于不同客户端的计算模块之间共享大量代码，因此它们按层次结构进行组织：

```
 ICalcA
                   |
               AbstrCalcA
               |       |
   AbstrCalcAMale      AbstrCalcAFemale
    |         |           |         |
CalcABob   CalcARick   CalcASue   CalcAEve 
```

（B、C、D、...的层次结构相同）。

现在发布管理规定，我按继承级别组织源代码：

```
Project: CalcCommon
  [CalcA]
    ICalcA.cs
    AbstrCalcA.cs
  [CalcB]
    ICalcB.cs
    AbstrCalcB.cs
  [CalcC]
    ...

Project: CalcMale
  [CalcA]
    AbstrCalcAMale.cs
  [CalcB]
    AbstrCalcBMale.cs
  [CalcC]
    ....

Project: CalcBob
  [CalcA]
    CalcABob.cs
  [CalcB]
    CalcBBob.cs
  [CalcC]
    ....

Project: CalcFemale
   .... 
```

对于 Bob，我发布了 CommonCalc.dll、CalcMale.dll 和 CalcBob.dll。

现在这一切都很好，但是对于许多模块、辅助类等，在同一个模块层次结构中工作非常麻烦。密切相关的类（例如 ICalcA 和 CalcABob）在解决方案资源管理器中很远。我的团队中似乎没有人在不搜索班级名称的情况下找到任何东西——如果他能记住的话。功能往往会在错误或多个层次结构级别中实现。

我该如何改善这种情况？

我正在考虑为每个模块*和*层次结构级别创建一个项目（项目：CalcCommonA、CalcMaleA、CalcBobA、CalcRickA、CalcCommonB、CalcMaleB，...），并通过解决方案文件夹对它们进行分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:39:46.260

我刚刚发现解决方案资源管理器顶部的新搜索栏对此非常有用。

第 1 步：确保与 Feature A 相关的所有类的类名中都包含“FeatureA”。

第 2 步：如果在 FeatureA 层次结构中工作，请在搜索/过滤栏中输入“FeatureA”。

这将根据需要仅显示给该特定层次结构的类。

# java - ClassNotFoundException：Tomcat 上的 javax.persistence.EntityListeners

> ID：15656999
> 
> 赞同：0
> 
> 时间：2013-03-27T10:47:15.507
> 
> 标签：java, web-services, hibernate, rest, jersey

我正在尝试基于 Restfull 和 Jersey1.17 构建一个 Web 服务。部署在 Tomcat 服务器上。

在我的项目中，我需要使用 hibernate4 来与我的 Oracle 11g XE 数据库进行通信。

每个都可以单独工作：Hibernate 可以正常工作，Web 服务也可以。但是在 Tomcat 上我得到了 ClassNotFoundException

堆栈跟踪在这里：`

```
exception 

javax.servlet.ServletException: java.lang.ExceptionInInitializerError
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:420)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

cause mère 

java.lang.ExceptionInInitializerError
    Utilities.HibernateSessionFactory.GetSession(HibernateSessionFactory.java:25)
    DAO.data.GetArticle.sayHtmlHello(GetArticle.java:92)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

cause mère 

java.lang.NoClassDefFoundError: javax/persistence/EntityListeners
    org.hibernate.cfg.annotations.reflection.JPAMetadataProvider.getDefaults(JPAMetadataProvider.java:97)
    org.hibernate.annotations.common.reflection.java.JavaReflectionManager.getDefaults(JavaReflectionManager.java:226)
    org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1310)
    org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1724)
    Utilities.HibernateSessionFactory.GetSession(HibernateSessionFactory.java:22)
    DAO.data.GetArticle.sayHtmlHello(GetArticle.java:92)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

cause mère 

java.lang.ClassNotFoundException: javax.persistence.EntityListeners
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    org.hibernate.cfg.annotations.reflection.JPAMetadataProvider.getDefaults(JPAMetadataProvider.java:97)
    org.hibernate.annotations.common.reflection.java.JavaReflectionManager.getDefaults(JavaReflectionManager.java:226)
    org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1310)
    org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1724)
    Utilities.HibernateSessionFactory.GetSession(HibernateSessionFactory.java:22)
    DAO.data.GetArticle.sayHtmlHello(GetArticle.java:92)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T13:24:51.940

添加 Hibernate-JPA，可以在以下位置找到：

[http://sourceforge.net/projects/hibernate/files/hibernate-jpamodelgen/1.2.0.Final/hibernate-jpamodelgen-1.2.0.Final-dist.tar.gz/download](http://sourceforge.net/projects/hibernate/files/hibernate-jpamodelgen/1.2.0.Final/hibernate-jpamodelgen-1.2.0.Final-dist.tar.gz/download)