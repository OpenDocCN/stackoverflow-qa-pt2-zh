# StackOverflow 问答 15570000-15570999

# php - 选择现在前 5 分钟的时间

> ID：15570000
> 
> 赞同：0
> 
> 时间：2013-03-22T12:12:08.400
> 
> 标签：php, mysql, vote

我目前正在编写一个投票脚本，我需要知道用户是否在最后 5 分钟内投票。如果是，则禁止下次投票。

我该如何提出这个要求？

这是我的尝试：

```
WHERE time AFTER INTERVAL(CURRENT_TIMESTAMP - 5 MINUTES) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:14:16.483

```
WHERE time > NOW() - INTERVAL 5 MINUTE 
```

试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:15:43.830

```
SELECT COUNT(id), from_unixtime(`timestamp` / 1000, '%Y-%m-%d %H:%i')
FROM `table`
WHERE `timestamp` >= unix_timestamp(CURRENT_TIMESTAMP - INTERVAL 5 MINUTE) * 1000 
```

参考下面的链接

[已经在stackoverflow中了](https://stackoverflow.com/questions/13064516/selecting-rows-in-the-last-5-minutes-using-unix-time-stamp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:14:24.250

这将起作用。

```
time < DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 5 MINUTE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:14:33.653

试试这个：

```
$time = date('YmdHis', strtotime('-5 minutes', strtotime('now')));
"...WHERE time > '$time'" 
```

# jquery - Highcharts折线图在IE8中不起作用

> ID：15570002
> 
> 赞同：0
> 
> 时间：2013-03-22T12:12:21.837
> 
> 标签：jquery, internet-explorer-8, highcharts

我正在使用[Highcharts Demo](http://www.highcharts.com/demo/)中的折线图，但它在 IE8 和 IE7 中不起作用。拔掉我漏掉的头发。然后我访问了该站点，并在那里得到了错误。任何人都可以说明情况吗？

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.3; .NET4.0C; .NET4.0E)
Timestamp: Fri, 22 Mar 2013 12:11:16 UTC

Message: Invalid character
Line: 1
Char: 1
Code: 0
URI: http://code.highcharts.com/highcharts.js

Message: Invalid character
Line: 1
Char: 1
Code: 0
URI: http://code.highcharts.com/modules/exporting.js

Message: 'Highcharts' is undefined
Line: 361
Char: 2
Code: 0
URI: http://www.highcharts.com/demo/

Message: 'Highcharts' is undefined
Line: 48
Char: 9
Code: 0
URI: http://www.highcharts.com/demo/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:21:11.947

系列数据似乎无效 - 根据需要进行调整。有一个逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:20:09.553

转到互联网选项

在加速图形下选中“使用软件渲染而不是 GPU 渲染”

# maven - maven 项目设计或反模式设计的好方法

> ID：15570004
> 
> 赞同：2
> 
> 时间：2013-03-22T12:12:24.063
> 
> 标签：maven, maven-release-plugin

**语境：**

我有一个多模块 Maven 项目，如下所示：

根----模块A

```
 ModuleB
      ModuleC
      ModuleD
      ....... 
```

它们在 Root 下大约有 25 个模块：

*   其中一些代表应用程序的核心（5 个模块）
*   其余的每个模块都代表与客户类型相关的业务流程实现。这些模块彼此完全独立。

打包或发布“根”项目时，生成的工件是单个 ZIP 文件，其中聚合了与“根”模块相关的所有 JAR。

单个 ZIP 文件是根据程序集描述符生成的，它表示交付工件。

在目标环境上部署时，单个 ZIP 被解压缩到一个目录下，由一个“引擎”使用（加载类），这是一个提供最终服务的 Java Web 应用程序。

**约束**

*   一方面的“业务限制”，
*   并且愿意减少另一边不同版本之间的回归

上述约束导致我们采用以下发布场景：

*   我们要么释放 Root 及其**所有**子模块。这意味着生成的 ZIP 将聚合具有相同版本的所有子模块 JAR。ZIP 将包含类似于以下内容的内容：[ModuleA-1.1.jar、ModuleB-1.1.jar、ModuleC-1.1.jar、ModuleD-1.1.jar、.......、ModuleX-1.1.jar]。

*   或者我们发布 Root 和**它**的几个子模块，我们想要重新更新的那些。生成的 ZIP 将聚合所有子模块 JAR ：已发布的子模块将与最后发布的版本聚合，未发布的子模块将与另一个“适当的”版本聚合。例如，如果我们进行这样的增量发布，ZIP 将包含类似于 [ModuleA-1.2.jar, ModuleB-1.1.jar, ModuleC-1.2.jar, ModuleD-1.1.1.jar, ..... ..，ModuleX-1.1.2.jar]。

这两种情况是通过以下方式实现的：

*   对于第一个场景，将模块声明为**MAVEN MODULES 'module'**
*   或者将模块声明为第二个场景（增量场景）的**MAVEN DEPENDENCIES '依赖' 。**

**问题**

这两种情况都运行良好，**但是**当我们处于第二种情况（增量）时，maven-release-plugin:prepare 正在将所有模块 [ModuleA、ModuleB、ModuleD、....ModuleX] 上传到 SCM（svn），它正在上传已发布和未发布的，而“未发布的模块”在 pom 中被声明为“依赖项”而不是“模块”。

1/ 有没有办法避免上传“未发布”的模块？有没有办法向 SCM svn 提供程序注入“排除目录列表”？

2/ 一个更全球性的问题，使用的方法是否正确？或者它是一种反模式用法？在这种情况下，应该有什么替代方案？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:22:52.993

对我来说，您的方法看起来像是一种反模式。我建议只将项目放在要一起发布的同一层次结构中。具有不同发布生命周期的项目应该独立存在 - 否则您将继续遇到您提到的问题。如果您从根目录（多模块设置）运行发布插件，该根目录的所有内容都将在 SVN 中标记。

在您的情况下，我可能会创建以下层次结构：

*   核
*   每个客户类型一个
*   根据您的结构，每种类型可能有一个捆绑它们（zip）

我会按照您创建版本的方式对其进行分组。这可能意味着您必须运行发布插件几次而不是只运行一次，例如在 Core 中进行更改时，但它会干净得多。

然后，您的打包项目将引入所有依赖项并打包/组装它们。

如果你有通用的配置选项，我建议把它们放到一个通用的`parent`pom.xml 中。这不一定是你的根（多模块）pom。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:08:37.067

您是否尝试使用`-r`参数+要发布的所有模块的列表运行 maven-release-plugin？

基本上，此参数允许您指定应执行 maven 命令的模块列表。（如果你省略它：所有子模块都将包括在内，这是默认行为）

[在此处](http://maven.apache.org/guides/mini/guide-multiple-modules.html)查看有关此命令行的更多详细信息。

我从不尝试将它与 maven-release-plugin 一起使用，我不知道它是否会起作用，尤其是在 SCM 操作方面。

# spring - 弹簧 MVC。我正在尝试捕获 404 页面错误，但代码没有被编码

> ID：15570006
> 
> 赞同：1
> 
> 时间：2013-03-22T12:12:36.690
> 
> 标签：spring, spring-mvc

弹簧 MVC。我正在尝试捕获 404 页面错误，但代码没有被编码。我错过了什么吗？

```
@ControllerAdvice
public class GeneralHandler
{
    private static final Logger LOGGER = getLogger(GeneralHandler.class);

    @ExceptionHandler
    public ModelAndView handleException (NoSuchRequestHandlingMethodException ex) {

        LOGGER.warn(ex.toString());
        return new ModelAndView("404");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:08:34.770

似乎无法使用`@ExceptionHandler`：[https ://stackoverflow.com/a/3230559/322166](https://stackoverflow.com/a/3230559/322166)

取而代之的是，您需要在以下配置中配置该行为`web.xml`：

```
<error-page>
    <error-code>404</error-code>
    <location>/your-error-page.html</location>
</error-page> 
```

# c - 如何在 Linux 上的 C 中包含来自多个目录的文件？

> ID：15570010
> 
> 赞同：0
> 
> 时间：2013-03-22T12:12:46.267
> 
> 标签：c, makefile, gnu-make

```
 gcc main.c -o main -I include 
```

我正在创建一个具有以下目录结构的小型 c 应用程序：

*应用程序*=>

*   => *src*（一个目录，包含所有源文件）
*   =>*包含*（包含所有头文件的目录）
*   => *common*（一个目录，包含所有公共文件）
*   => *main.c*

现在我正在尝试运行包含*#include*指令的*main.c ，以包含来自**include目录的头文件以及对**common*和*src*目录中*.c*文件的函数调用。我正在使用*-I*选项，但它仅对一个目录路径指示有用。编译器将如何查看所有*src*、*common*和*include*目录来解析调用。*请在使用gcc*编译时建议我一个命令或*制作*文件以提供多个目录的路径。

 **** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:15:57.873

允许多个`-I`选项。[目录搜索选项](http://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html#Directory-Options) `-I`中的选项描述说明：

> 将目录 dir 添加到要搜索头文件的目录列表的头部。这可用于覆盖系统头文件，替换您自己的版本，因为这些目录在系统头文件目录之前搜索。但是，您不应使用此选项来添加包含供应商提供的系统头文件的目录（为此使用 -isystem）。**如果您使用多个 -I 选项**，则目录按从左到右的顺序扫描；标准系统目录紧随其后。

例如：

> gcc main.c -o main -Iinclude -Isrc/include -Icommon/include

请注意，如果`main.c`使用在另一个`.c`文件中实现的函数，则其他`.c`文件也需要编译并链接到最终程序二进制文件中。例如：

> gcc main.c src/another.c -o main -Iinclude -Isrc/include -Icommon/include***

# ios - 如何使用 FBTestSession 设置 FBPLISTAppIDKey 和 FBPLISTAppSecretKey

> ID：15570013
> 
> 赞同：2
> 
> 时间：2013-03-22T12:12:47.423
> 
> 标签：ios, unit-testing, facebook-ios-sdk, facebook-test-users

我在使用 FBTestSession 时遇到异常`FBTestSession *fbSession = [FBTestSession sessionWithSharedUserWithPermissions:@[@"email"]];`

如果您查看下面的代码，您可以看到 Facebook 决定从 NSProcessInfo 加载应用程序设置： [https ://github.com/facebook/facebook-ios-sdk/blob/master/src/FBTestSession.m#L506](https://github.com/facebook/facebook-ios-sdk/blob/master/src/FBTestSession.m#L506)

```
NSDictionary *environment = [[NSProcessInfo processInfo] environment];
    NSString *appID = [environment objectForKey:FBPLISTAppIDKey];
    NSString *appSecret = [environment objectForKey:FBPLISTAppSecretKey];
    if (!appID || !appSecret || appID.length == 0 || appSecret.length == 0) {
        [[NSException exceptionWithName:FBInvalidOperationException
                                 reason:
          @"FBTestSession: Missing App ID or Secret; ensure that you have an .xcconfig file at:\n"
          @"\t${REPO_ROOT}/src/tests/TestAppIdAndSecret.xcconfig\n"
          @"containing your unit-testing Facebook Application's ID and Secret in this format:\n"
          @"\tIOS_SDK_TEST_APP_ID = // your app ID, e.g.: 1234567890\n"
          @"\tIOS_SDK_TEST_APP_SECRET = // your app secret, e.g.: 1234567890abcdef\n"
          @"To create a Facebook AppID, visit https://developers.facebook.com/apps"
                               userInfo:nil]
         raise];
    } 
```

问题是，我无法弄清楚如何正确设置 FBPLISTAppIDKey 和 FBPLISTAppSecretKey 并且没有其他设置器可以使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T18:09:42.213

您需要将它们作为环境变量添加到您的方案中。

```
{scheme} >> Run >> Arguments (Tab) >> add the test app id and test app secret. 
```

# python - 无法在子包中导入父包的模块

> ID：15570014
> 
> 赞同：7
> 
> 时间：2013-03-22T12:12:48.030
> 
> 标签：python

我有一个包含 2 个子包的父包。看起来像这样

```
backend
   __init__.py
   conf.py
   db.py
   connections.py
   /api
      __init__.py
      register.py
      api.py
   /scheduled
      __init__.py
      helpers.py 
```

`All the __init__.py files are empty.`

`backend/connections.py`和中的代码`backend/conf.py`被包`api`和`scheduled`.

在 register.py 我有类似的代码

```
from backend.conf import *
from backend.connections import * 
```

现在当我这样做时，`python register.py` 我得到了这个错误

```
ImportError: No module named backend.conf 
```

另外，当我更改`from backend.conf import *`为`from ..conf import *`或`from .. import conf`收到此错误时

```
ValueError: Attempted relative import in non-package 
```

我对上述错误的理解是python没有将上述文件夹视为包。但我`__init__.py`在所有文件夹中都有。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:31:09.170

当你运行时`python register.py`，你的`backend/register.py`文件被用作`__main__`程序的模块，而不是`backend`包中的一个模块。此外，Python 导入路径不会自动包含包含该目录的`backend`目录，这可能是您出现问题的原因。

一个可行的选项是`python -m backend.register`从项目的顶级目录运行程序（或设置`PYTHONPATH`为可以找到此模块）。这将在正常的导入路径上搜索脚本，然后将其作为主程序运行。

# css - 如何将 div 对齐到另一个 div 的底部（在引导程序中）？

> ID：15570022
> 
> 赞同：0
> 
> 时间：2013-03-22T12:12:58.607
> 
> 标签：css, twitter-bootstrap

与我之前的[问题有关](https://stackoverflow.com/questions/15568829/how-do-i-align-images-to-the-bottom-of-a-div-in-bootstrap/15569397#15569397)

我希望能够将右拉 div 与 div 的底部对齐。

我有以下标记：

```
<div class="container">
  <div class="container">
    <div class="footer-images">
      <a href="link1"><img src="img1"></a>
      <div class="pull-right">
        <a href="link2"><img src="img2"></a>
        <a href="link3"><img src="img3"></a>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="copyright">
      <p>© Some Company YYYY</p>
    </div>
  </div>
</div> 
```

我不知道如何让 pull-right（或其他 div 类）与 footer-images div 类的底部对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:26:44.000

如果我理解正确的问题。您只需要确保在其中浮动元素（标签）。但是，如果您有不同的图像尺寸，它只会从顶部对齐。

如果您可以向我们展示您想要做什么以及它现在的样子，那么给您建议会容易得多。（如果你也显示css会更好）

# php - 流程图格式轴值

> ID：15570032
> 
> 赞同：1
> 
> 时间：2013-03-22T12:13:29.370
> 
> 标签：php, jquery-plugins

我将[Flotcharts](http://www.flotcharts.org/)与**PHP**一起使用。我面临两个问题

1.  我想在 Y 轴上以良好的格式表示数字，例如**1500**必须显示为**1,500**等等。我知道 php 函数`number_format()`，但如果我`number_format()`在绘制图表时通过，萤火虫会引发解析错误。请参阅下面标题**ISSUE-1**下的代码并检查`echo number_format(6443.230356)`
2.  如果 Y 轴的值是从 ( **1 到 9** )，那么当前它显示为 ( **1, 2 .. 9** )。我想将这些值表示为 ( **1.0, 2.0, 3.0, ... 9.0** )

**问题一**

```
<script>
plotOptions = {
"colors":["#edaf40","#999","#edaf3e","#ec8","#9cc","#dad","#9ce","#fca"],
"grid":{
"labelMargin":0,
"tickColor":"#e3e3e3",
"backgroundColor":"#f2f2f2",
"borderWidth":0.5,
"hoverable":true,
"autoHighlight":true,
"clickable":false,
"color":"#bbb"
},
"bars": { show: true, barWidth: 0.85, series_spread: true, align: "center","lineWidth": 0.3,fillColor:{colors: [ { opacity: 1 }, { opacity: 1 } ] } },
"lines":{"show":false,"lineWidth":1.25,"fill":0},
"points":{"show":false,"radius":2,"lineWidth":2,"fill":1},
"shadowSize":1,
"yaxis":{"min":0,"max":<?php echo number_format(6443.230356)?>,axisLabel: '',axisLabelUseCanvas: false,axisLabelFontSizePixels: 12,axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',axisLabelPadding: 5},
"xaxis":{"min":"1989","max":"2016","tickSize":5,"tickLength": 0, "ticks": 0.1},
zoom: {
interactive: true
}
};
</script> 
```

![在此处输入图像描述](../Images/7f029c1c1c470f9b53370bb52d37dbab.png)

我也试过`"max":'<?php echo number_format(6443.230356)?>'`，但这次萤火虫说不是数字错误。

```
NaN 
```

并且

![在此处输入图像描述](../Images/10ded08797ba09f6dd24cd0ec4e09590.png)

我搜索了他们的网站，但没有找到解决方案。请指导如何解决。

为了解决**第 2 点**，我尝试了

```
function suffixFormatter(val) {
    if (val >= 1)
        return val.toFixed(yaxis.tickDecimals) + " 0";
    else if (val <= 9)
        return val.toFixed(yaxis.tickDecimals) + " 0";
    else  
        return val;
}

"yaxis":{"function":suffixFormatter(<?php echo $min_val;?>), "min":<?php echo $min_val;?>,"max":<?php echo (1.2*$yaxismax);?>,axisLabel: '<?=$indicatorData[0]->unit?>',axisLabelUseCanvas: false,axisLabelFontSizePixels: 12,axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',axisLabelPadding: 5}, 
```

但发生错误`yaxis is not define` `tickDecimals is not define`。

我对**FlotChart**支持真的很失望，它非常糟糕，没有合适的示例代码，没有合适的指南。请有人指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:36:53.057

您在数字中使用逗号，因此“max”属性的值为“6”，然后逗号关闭“max”属性。因此程序将 443 读取为另一个属性名称，然后它查找“：”，但只给出了另一个逗号...

所以，毕竟，我认为数字只能是整数或点而不是逗号，因为逗号关闭属性值字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:55:03.567

对于您的第二个问题 - 设置`tickDecimals`选项。

# android - Android延迟将图像从JSON加载到gridview

> ID：15570039
> 
> 赞同：0
> 
> 时间：2013-03-22T12:13:47.703
> 
> 标签：android, gridview, lazy-loading

所以我试图将返回的 json 数组中的图像加载到交错的网格视图中。我已经测试过像示例一样将链接直接放入数组中，并且效果很好，但是一旦我尝试使用 json 数据，就会出现错误。（网络和存储错误）我的清单中有所有必需的权限（即，互联网，内部和外部存储）

这是我的代码，有人可以告诉我有什么问题吗？谢谢！！

```
package com.example.staggeredgridviewdemo;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;

import com.origamilabs.library.views.StaggeredGridView;

/**
 * 
 * This will not work so great since the heights of the imageViews are
 * calculated on the iamgeLoader callback ruining the offsets. To fix this try
 * to get the (intrinsic) image width and height and set the views height
 * manually. I will look into a fix once I find extra time.
 * 
 * @author Maurycy Wojtowicz
 * 
 */
public class MainActivity extends Activity {

    /*
     * Images are taken by Romain Guy ! He's a great photographer as well as a
     * great programmer. http://www.flickr.com/photos/romainguy
     */

    private String urls[];
    String location = "http://snapoodle.com/APIS/android/feed.php";
    static final String TAG_ITEMS = "print";

    /*
     * private String urls[] = {
     * "http://farm7.staticflickr.com/6101/6853156632_6374976d38_c.jpg",
     * "http://farm8.staticflickr.com/7084/6885444694_6272874cfc.jpg" };
     */
    /**
     * This will not work so great since the heights of the imageViews are
     * calculated on the iamgeLoader callback ruining the offsets. To fix this
     * try to get the (intrinsic) image width and height and set the views
     * height manually. I will look into a fix once I find extra time.
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StaggeredGridView gridView = (StaggeredGridView) this
                .findViewById(R.id.staggeredGridView1);

        getImages get= (getImages) new getImages();
        get.execute(location);

        //int margin = getResources().getDimensionPixelSize(R.dimen.margin);

        //gridView.setItemMargin(margin); // set the GridView margin

        //gridView.setPadding(margin, 0, margin, 0); // have the margin on the
                                                    // sides as well

        StaggeredAdapter adapter = new StaggeredAdapter(MainActivity.this,
                R.id.imageView1, urls);

        gridView.setAdapter(adapter);
        adapter.notifyDataSetChanged();
    }

    class getImages extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            JSONObject json = JSONfunctions
                    .getJSONfromURL(location);

            try {
                JSONArray jarray;
                jarray = json.getJSONArray(TAG_ITEMS);
                urls = new String[jarray.length()];

                for (int i = 0; i < jarray.length(); i++) {
                    JSONObject gridImages = jarray.getJSONObject(i);
                    urls[i] = gridImages.getString("saved_location");
                }

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }

    }

} 
```

日志猫

```
 03-22 14:57:59.276: D/AndroidRuntime(1183): Shutting down VM
    03-22 14:57:59.276: W/dalvikvm(1183): threadid=1: thread exiting with uncaught exception (group=0x4111f930)
    03-22 14:57:59.286: E/AndroidRuntime(1183): FATAL EXCEPTION: main
    03-22 14:57:59.286: E/AndroidRuntime(1183): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.staggeredgridviewdemo/com.example.staggeredgridviewdemo.MainActivity}: java.lang.NullPointerException: storage == null
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.os.Handler.dispatchMessage(Handler.java:99)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.os.Looper.loop(Looper.java:137)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.ActivityThread.main(ActivityThread.java:5041)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at java.lang.reflect.Method.invokeNative(Native Method)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at java.lang.reflect.Method.invoke(Method.java:511)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at dalvik.system.NativeStart.main(Native Method)
    03-22 14:57:59.286: E/AndroidRuntime(1183): Caused by: java.lang.NullPointerException: storage == null
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at java.util.Arrays$ArrayList.<init>(Arrays.java:38)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at java.util.Arrays.asList(Arrays.java:154)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:128)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at com.example.staggeredgridviewdemo.StaggeredAdapter.<init>(StaggeredAdapter.java:20)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at com.example.staggeredgridviewdemo.MainActivity.onCreate(MainActivity.java:89)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.Activity.performCreate(Activity.java:5104)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    03-22 14:57:59.286: E/AndroidRuntime(1183):     ... 11 more
    03-22 14:57:59.316: D/dalvikvm(1183): GC_CONCURRENT freed 176K, 3% free 8878K/9084K, paused 3ms+1ms, total 19ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:58:32.290

```
 StaggeredAdapter adapter = new StaggeredAdapter(MainActivity.this,
                R.id.imageView1, urls);

        gridView.setAdapter(adapter);
        adapter.notifyDataSetChanged(); 
```

将上面的代码添加`onPostExecute`到`AsyncTask`

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:29:20.283

此行 `03-22 14:57:59.286: E/AndroidRuntime(1183): at com.example.staggeredgridviewdemo.MainActivity.onCreate(MainActivity.java:89)`表示您的`MainActivity`. 这是您创建适配器的地方。如果您仔细观察，您会发现您尝试使用`null`项目列表创建适配器 -`urls`尚未初始化。

您使用的是在不同的线程中执行，因此（如）`AsyncTask`中发生的一切都在另一个线程中。在这种情况下，这意味着数组在用于创建适配器后被初始化。`doInBackground``urls = new String[jarray.length()];``urls`

为避免这种情况，您可以在开始活动之前初始化数组。如果您此时不知道它的大小，您可以使用另一个适配器，例如`ListAdapter`使用非空列表对其进行初始化，然后从活动中填充此列表并`notifyDataSetChanged`在任务完成后调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:46:02.083

检查数据提要[http://snapoodle.com/APIS/android/feed.php](http://snapoodle.com/APIS/android/feed.php)，我没有看到请求返回的任何数据。

{“打印”：[]}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:06:29.913

我有点笨，但我通过将交错网格视图移动到 onPostExecute 并从后台返回 url 来解决它

# android - 滚动缓存？

> ID：15570041
> 
> 赞同：19
> 
> 时间：2013-03-22T12:13:54.063
> 
> 标签：android

任何人都可以解释`scrolling cache`Android中的含义。我偶然发现了这个词，但在android官方网站或网络上都找不到解释。

我能找到的只是如何打开/关闭它。

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-07T21:02:44.497

滚动缓存基本上是一个绘图缓存。

在 android 中，您可以要求 View 将其绘图存储在称为绘图缓存（基本上是位图）的缓存中。默认情况下，绘图缓存被禁用，因为它占用内存，但您可以要求视图通过 setDrawingCacheEnabled 或通过硬件层 (setLayerType) 显式创建一个。

那么它为什么有用呢？因为与在每一帧重绘视图相比，使用绘图缓存可以让您的动画更加流畅。

这种类型的动画也可以进行硬件加速，因为渲染系统可以获取此位图并将其作为纹理上传到 GPU（如果使用硬件层）并对其进行快速矩阵操作（如更改 alpha、平移、旋转）。与做动画相比，你在每一帧上都重绘（onDraw 被调用）。

在列表视图的情况下，当您通过滚动滚动时，您实质上是在为列表的视图设置动画（向上或向下移动它们）。列表视图使用其可见子项（以及边缘附近的一些潜在可见子项）的绘图缓存来非常快速地为它们设置动画。

使用绘图缓存有缺点吗？是的，它会消耗内存，这就是为什么默认情况下它在视图中是关闭的。在 ListView 的情况下，只要您触摸 ListView 并稍微移动（以区分轻击和滚动），就会自动为您创建缓存。换句话说，一旦 ListView 认为您将要滚动/翻动，它就会为您创建滚动缓存来为滚动/翻动运动设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-29T06:52:54.120

scrollingCache 在《listView 的世界》讲座中有详细的讲解。

它基本上缓存了滚动本身，以便移动位图，但根据我的经验，它实际上让事情变得更慢并且占用内存并没有什么特别的。

scrollingCache 默认启用，至少对于 listView 。这就是为什么如果性能对您很重要，您应该考虑禁用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:22:47.333

我认为您在谈论以下内容：

想象一个包含 50 个项目的列表，其中只有 10 个项目是可见的。Android 将缓存列表项中的下一个和上一个（估计）5 个项目。

当您开始滚动列表时，它将重用不可见的项目视图，使用 ArrayAdapter 的函数 getView() 例如，如果您滚动到顶部，它将在底部获取一个视图并将其与新数据一起放置在顶部。

所以滚动缓存是可见项目上方/下方的下一个和上一个项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T07:39:08.770

官方解释： http: [//developer.android.com/reference/android/widget/AbsListView.html#attr_android :scrollingCache](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android:scrollingCache)

[Romain Guy](https://profiles.google.com/romain.guy/about)关于缓存颜色提示优化的博客：[http ://www.curious-creature.org/2008/12/22/why-is-my-list-black-an-android-optimization/](http://www.curious-creature.org/2008/12/22/why-is-my-list-black-an-android-optimization/)

# macos - Mac OS X Carbon：SelectWindow 与 ActivateWindow 有什么区别以及 Cocoa 等价物是什么

> ID：15570046
> 
> 赞同：0
> 
> 时间：2013-03-22T12:14:06.440
> 
> 标签：macos, cocoa, macos-carbon

标题基本上总结了我的问题。我想知道 Mac Carbon SelectWindow 和 ActivateWindow(..., TRUE) 之间的区别是什么。我在旧资源中找到了这些，想知道它们是否可以互换（或者它们的 Cocoa 等价物可能是什么）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:19:59.443

从记忆里...

SelectWindow 是对单击窗口的响应。它把窗口带到前面，激活它，并且（通常）让它成为第一响应者。（我在这里使用 Cocoa 术语。）有点像`OrderFront`

> SelectWindow 函数从先前活动的窗口中移除突出显示，将指定的窗口置于最前面，将其突出显示，并生成激活事件以停用先前活动的窗口并激活指定的窗口。如果指定的窗口已经处于活动状态，则 SelectWindow 无效。当用户在光标位于非活动窗口的内容区域时按下鼠标按钮时调用 SelectWindow。

激活窗口更新了窗口框架以指示该窗口是第一响应者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:43:55.470

您实际上并不需要知道 Cocoa 等价物，您只需要确定您想要做什么。来自 Carbon 的许多需要您实现它们的事情都是由 AppKit 为您完成的。Carbon API 的其他范例只是不会出现在 Cocoa 中。它们看起来很相似，并且与常见的操作系统有许多相似的钩子，但它们却非常不同。

# java - sigar-amd64-winnt.dll ...无法引用它或将其与 .jar 捆绑

> ID：15570047
> 
> 赞同：4
> 
> 时间：2013-03-22T12:14:09.447
> 
> 标签：java, eclipse, jar, sigar

（这可能是我犯的一个明显错误，但现在 6 小时后我无法让它工作。）

我正在尝试在我的 Eclipse 项目中使用 sigar.jar 获取 CPU 信息（现在只是测试 sigar API）。

它在eclipse中运行没有问题：

*   使它在 Eclipse 中工作的原因是将 dll 放在与 sigar.jar 相同的文件夹中
*   我测试了在构建路径配置对话框中将路径添加到 dll 作为“本机代码属性”没有效果。
*   在运行配置中添加 vm 参数也没有效果。
*   我测试了在这两个地方放置了 2 个假路径，只要我将 dll 放在与 sigar.jar 相同的文件夹中......它在 eclipse 中运行良好。

问题是当我尝试为我的项目导出可运行的 .jar 文件时。我尝试了两件事：

*   我用 Bundle-NativeCode: libs/sigar-amd64-winnt.dll 修改了 MANIFEST.MF 文件（我假设这里的路径是相对于项目文件夹的）-> 没有成功：

```
 main starting!! no sigar-amd64-winnt.dll in java.library.path
 org.hyperic.sigar.SigarException: no sigar-amd64-winnt.dll in
 java.library.path
         at org.hyperic.sigar.Sigar.loadLibrary(Sigar.java:172)
         at org.hyperic.sigar.Sigar.<clinit>(Sigar.java:100)
         at CpuData.main(CpuData.java:59) 
 cpudata(sigar s) starting!!! cpuInfo() starting!!! 
 Exception in thread
 "main" java.lang.UnsatisfiedLinkError:
 org.hyperic.sigar.Sigar.getCpuInfoList()[Lorg/hyperic/sigar/C puInfo;
         at org.hyperic.sigar.Sigar.getCpuInfoList(Native Method)
         at CpuData.cpuInfo(CpuData.java:103)
         at CpuData.<init>(CpuData.java:29)
         at CpuData.main(CpuData.java:59) 
```

*   然后我决定把.dll和我的project.jar放在同一个文件夹下，在命令行中使用：java -Djava.library.path=./native/ -jar C:\cpu_usage_log\cpu3.jar (I' m 假设这里的路径是相对于包含 project.jar 的文件夹）...但同样没有成功：

> 错误：无法找到或加载主类 .library.path=..native

（我怀疑我应该在 -Djava.library.path=./path/ 之后给出一个主类名称作为第二个参数，但我找不到那个假定的“主类”名称，或者网络上的任何示例指定这样一个类...它是 .dll 中的主类吗？）

在这一点上，我真的不知道还有什么可以尝试的。我读了这两个对其他人有用的解决方案，这让我更加沮丧，因为我想这可能是我在阅读其他帖子时错过或不理解的一些明显的东西，而我就是找不到（这是我第一次处理在 java 项目中使用本机 dll）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:39:43.230

对我来说，修改 Java 加载库的方式总是最好的。

通常你调用`System.loadLibrary("mylib");`which 在库路径上搜索库。

恕我直言，使用绝对路径加载库要好得多。这允许您在程序中实现自定义搜索逻辑：

```
// Extends the name to mylib.so or mylib.dll
mylibname = System.mapLibraryName("mylib"); 

// Load the library via its absolute path
System.load(new File(path, mylibname).getAbsolutePath()); 
```

请注意，每个库只能加载一次，因此如果您如上所示加载库，则调用`System.loadLibrary("mylib");`之后的调用将被忽略，因为该库已经加载。

# django - django：使用没有 unicode 'u' 类型指示符的安全过滤器渲染变量

> ID：15570048
> 
> 赞同：7
> 
> 时间：2013-03-22T12:14:10.180
> 
> 标签：django, django-templates, django-template-filters

我正在尝试将字典传递给 django 模板。在 django 视图中，变量被初始化并按如下方式传递：

```
foo = {'a':'b'}
...
return render(request, 'template.html', {'foo': str(foo)} 
```

在模板中，我有

```
{{ foo|default:"{}"|safe}} 
```

如果它是相关的，我在 jquery 片段中有上面的行。该片段失败，因为 dict 被呈现为

```
[{'a': u'b'}] 
```

而不是我所期望的：

```
[{'a': 'b'}] 
```

似乎安全过滤器没有删除dict值'b'之前的unicode u。我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T16:13:23.240

您应该使用一个函数将其显式转换为 JSON，因为 JSON 和默认 Python 字符串化之间存在一些细微差别：

*   JSON 中的字符串在技术上必须用`"`而不是分隔`'`，尽管解析器也倾向于接受后者（参见[json.org](http://www.json.org/)上的字符串规则）

*   布尔文字是小写的

*   如果您的数据包含数字、字符串、列表和字典以外的其他内容，`str`则在它们上使用可能会默默地产生无效的 JSON

使用模板过滤器，例如[django-jsonify](https://pypi.python.org/pypi/django-jsonify/0.2.1)：

```
{% load jsonify %}
...
{{ foo|jsonify }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:07:26.523

我遇到这个问题的原因是因为我的字典实际上包含一个 unicode 值。上面的玩具示例是一个简化。当我`str(val)`在将 val 插入字典之前运行时，渲染按预期发生。

# c# - 对象未序列化

> ID：15570049
> 
> 赞同：3
> 
> 时间：2013-03-22T12:14:11.837
> 
> 标签：c#, asp.net, session, serialization

我在 asp.net 中有一个文件上传控件，用于上传图像。我想在 asp.net 的图像控件中显示预览图像。这是aspx代码

后面的 C# 代码

```
 protected void Btn_Preview_Click(object sender, EventArgs e)
        {
            try
            {
                if (FU_Img.HasFile)
                {
                    string path = Server.MapPath("/TempImages");

                FileInfo oFileInfo = new FileInfo(FU_Img.PostedFile.FileName);
                string fileName = oFileInfo.Name;

                string fullFileName = path + "//" + fileName;
                string imagePath = "/TempImages/" + fileName;

                if (!Directory.Exists(path))
                {
                    Directory.CreateDirectory(path);
                }
                Session["FileUpload"] = FU_Img;
                FU_Img.PostedFile.SaveAs(fullFileName);
                Img_Prof.ImageUrl = imagePath;
            }
        }
        catch (Exception ex)
        {
            using (StreamWriter sw = new StreamWriter("/log.txt"))
            {
                sw.NewLine = DateTime.Now.ToString() + "--->>" + ex.ToString() + "\n" + ex.StackTrace.ToString();
            }
        }
    } 
```

如您所见，我将图像控制置于会话中。它在开发服务器上运行良好。当我将网站发布到域时，我遇到了问题

```
Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted. The same restriction applies if similar serialization is done by the custom session state store in 'Custom' mode. 
```

堆栈跟踪

```
[SerializationException: Type 'System.Web.UI.WebControls.FileUpload' in Assembly 'System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' is not marked as serializable.]
   System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers(RuntimeType type) +7738443
   System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context) +258
   System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo() +111
   System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(Object obj, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, ObjectWriter objectWriter) +422
   System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.Serialize(Object obj, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, ObjectWriter objectWriter) +51
   System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(Object graph, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck) +410
   System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] headers, Boolean fCheck) +134
   System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) +1577

[HttpException (0x80004005): Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted. The same restriction applies if similar serialization is done by the custom session state store in 'Custom' mode.]
   System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) +1662
   System.Web.SessionState.SessionStateItemCollection.WriteValueToStreamWithAssert(Object value, BinaryWriter writer) +34
   System.Web.SessionState.SessionStateItemCollection.Serialize(BinaryWriter writer) +606
   System.Web.SessionState.SessionStateUtility.Serialize(SessionStateStoreData item, Stream stream) +239
   System.Web.SessionState.SessionStateUtility.SerializeStoreData(SessionStateStoreData item, Int32 initialStreamSize, Byte[]& buf, Int32& length) +72
   System.Web.SessionState.OutOfProcSessionStateStore.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item, Object lockId, Boolean newItem) +87
   System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs) +560
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +68
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75` 
```

这是我的`web.config`

```
<sessionState mode="InProc"
                    cookieless="true"
                    timeout="20"/> 
```

在我预览我的页面后，我点击更新 bnutton，它什么也没做。甚至没有重定向到其他页面。这是我的提交按钮代码

```
 if (Session["FileUpload"] != null && (!FU_Img.HasFile))
            {
                FU_Img = (FileUpload)Session["FileUpload"];
            }
UserOthers UO = new UserOthers();
            if (FU_Img.HasFile)
            {
                try
                {
                    string Photofilename = Path.GetFileName(FU_Img.FileName);
                    Photofilename = Photofilename.Split('.')[1].ToString();
                    String PathFolder = Server.MapPath(Request.ApplicationPath + @"\upload\u" + Session["UserID"].ToString ());
                    if (!Directory.Exists(PathFolder))
                    {
                        Directory.CreateDirectory(PathFolder);
                    }
                    FU_Img.PostedFile.SaveAs(Server.MapPath(Request.ApplicationPath + @"\upload\u" + Session["UserID"].ToString () + "\\image." + Photofilename));
                    UO.Image = @"/upload/u" + Session["UserID"].ToString () + "/image." + Photofilename;
                }
                catch (Exception ex)
                {
                    //StatusLabel.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
                }
            }
 con.update_Pic_Vid(UO, Session["UserID"].ToString ());
            Response.Redirect("/AccountSettings.aspx"); 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:31:58.607

看看这篇[文章](https://stackoverflow.com/a/3082505/2071460)：

您可以使用上面链接中发布的 ReadFully 函数以这种方式从文件上传转换您的流：

```
 var byteArray = ReadFully( FU_Img.PostedFile.InputStream ) ;
 Session["FileUpload"] = byteArray; 
```

然后在您的上传功能中，您可以将代码更改为：

```
byte[] fileUpload = null;

if (Session["FileUpload"] != null  )
{
   fileUpload = Session["FileUpload"] as byte[];
} 
```

然后将字节流保存到磁盘或数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:23:40.370

在会话中存储控件不是正确的方法。正如您的堆栈跟踪指出的那样，“FileUpload”未标记为可序列化。

您将图像存储在磁盘上并将该图像的路径存储在会话中并进一步重用它。

# javascript - 使用 Jasmine 和 Maven 2.x 进行 JavaScript 单元测试

> ID：15570055
> 
> 赞同：1
> 
> 时间：2013-03-22T12:14:17.090
> 
> 标签：javascript, maven, jasmine, jasmine-maven-plugin

我正在使用 Jasmine 来测试我的 javascript。我使用 maven 构建运行 jasmine 脚本。我正在使用 Maven 2.0.11。当我运行 maven build 时，jasmine 会抛出错误，

```
[FATAL ERROR] com.github.searls.jasmine.TestMojo#execute() caused a linkage error (java.lang.NoClassDefFoundError) and may be out-of-date. Check the realms
[FATAL ERROR] Plugin realm = app0.child-container[com.github.searls:jasmine-maven-plugin]
java.lang.NoClassDefFoundError: org/apache/http/client/CredentialsProvider
        at com.github.searls.jasmine.runner.SpecRunnerExecutor.execute(SpecRunnerExecutor.java:31)
        at com.github.searls.jasmine.TestMojo.executeSpecs(TestMojo.java:56)
        at com.github.searls.jasmine.TestMojo.run(TestMojo.java:33)
        at com.github.searls.jasmine.AbstractJasmineMojo.execute(AbstractJasmineMojo.java:193)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:454)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:559)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:500)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:479)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:331)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:292)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:142)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:345)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:132)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:290)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: java.lang.ClassNotFoundException: org.apache.http.client.CredentialsProvider
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassLoader.java:195)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:255)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:274)
        at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.java:214)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

关于为什么会发生此错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T12:08:28.967

最近在[插件文档](http://searls.github.io/jasmine-maven-plugin/plugin-info.html)中对此进行了澄清：

系统要求：

*   Maven 3.0.0

Maven 升级似乎是唯一的方法。

# java - java.lang.IllegalStateException：无法执行活动的方法

> ID：15570059
> 
> 赞同：0
> 
> 时间：2013-03-22T12:14:24.110
> 
> 标签：java, android, restlet

我是 android RESTlet 的新手。我正在尝试连接到 url 并在单击按钮时获取信息。但我收到错误“java.lang.IllegalStateException：无法执行活动的方法”和“原因：java.lang.reflect.InvocationTargetException”。请让我知道如何解决这个问题。

```
private EditText text1;
private EditText text2;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
text1 = (EditText) findViewById(R.id.editText1);
text2 = (EditText) findViewById(R.id.editText2);
}
public void onClick(View view) throws Exception {
double lat;
double lon;
String url = BASE_URL + "sites/" + SITE_ID + "/stations/" + STATION_MAC + "/";
ClientResource itsClient = new ClientResource(url);
itsClient.setChallengeResponse(ChallengeScheme.HTTP_BASIC, USERNAME, PASSWORD);

// Retrieve and parse the JSON representation
JsonRepresentation jsonRep = new JsonRepresentation(itsClient.get());
JSONObject jsonObj = jsonRep.getJsonObject();

// Output results
lat=jsonObj.getJSONObject("loc").getDouble("lat");
lon=jsonObj.getJSONObject("loc").getDouble("lng");

switch (view.getId()) {
    case R.id.button1:
    String lats = Double.toString(lat);
    text1.setText(lats);
    String lons = Double.toString(lon);
    text2.setText(lons);
    break;
 } 
```

}

下面是logcat：

```
03-22 18:25:38.834: E/Trace(755): error opening trace file: No such file or directory (2)
03-22 18:25:39.064: E/dalvikvm(755): Could not find class 'org.restlet.resource.ClientResource', referenced from method com.android.navigation.MainActivity.onClick
03-22 18:25:39.064: W/dalvikvm(755): VFY: unable to resolve new-instance 546 (Lorg/restlet/resource/ClientResource;) in Lcom/android/navigation/MainActivity;
03-22 18:25:39.076: D/dalvikvm(755): VFY: replacing opcode 0x22 at 0x0018
03-22 18:25:39.096: D/dalvikvm(755): DexOpt: unable to opt direct call 0x0d80 at 0x1a in Lcom/android/navigation/MainActivity;.onClick
03-22 18:25:39.126: D/dalvikvm(755): DexOpt: unable to opt direct call 0x0d7e at 0x2c in Lcom/android/navigation/MainActivity;.onClick
03-22 18:25:40.036: I/Choreographer(755): Skipped 40 frames!  The application may be doing too much work on its main thread.
03-22 18:25:40.114: D/gralloc_goldfish(755): Emulator without GPU emulation detected.
03-22 18:25:58.035: I/Choreographer(755): Skipped 210 frames!  The application may be doing too much work on its main thread.
03-22 18:26:00.554: D/AndroidRuntime(755): Shutting down VM
03-22 18:26:00.564: W/dalvikvm(755): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
03-22 18:26:00.654: E/AndroidRuntime(755): FATAL EXCEPTION: main
03-22 18:26:00.654: E/AndroidRuntime(755): java.lang.IllegalStateException: Could not execute method of the activity
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.view.View$1.onClick(View.java:3591)
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.view.View.performClick(View.java:4084)
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.view.View$PerformClick.run(View.java:16966)
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.os.Handler.handleCallback(Handler.java:615)
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.os.Looper.loop(Looper.java:137)
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-22 18:26:00.654: E/AndroidRuntime(755):  at java.lang.reflect.Method.invokeNative(Native Method)
03-22 18:26:00.654: E/AndroidRuntime(755):  at java.lang.reflect.Method.invoke(Method.java:511)
03-22 18:26:00.654: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-22 18:26:00.654: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-22 18:26:00.654: E/AndroidRuntime(755):  at dalvik.system.NativeStart.main(Native Method)
03-22 18:26:00.654: E/AndroidRuntime(755): Caused by: java.lang.reflect.InvocationTargetException
03-22 18:26:00.654: E/AndroidRuntime(755):  at java.lang.reflect.Method.invokeNative(Native Method)
03-22 18:26:00.654: E/AndroidRuntime(755):  at java.lang.reflect.Method.invoke(Method.java:511)
03-22 18:26:00.654: E/AndroidRuntime(755):  at android.view.View$1.onClick(View.java:3586)
03-22 18:26:00.654: E/AndroidRuntime(755):  ... 11 more
03-22 18:26:00.654: E/AndroidRuntime(755): Caused by: java.lang.NoClassDefFoundError: org.restlet.resource.ClientResource
03-22 18:26:00.654: E/AndroidRuntime(755):  at com.android.navigation.MainActivity.onClick(MainActivity.java:36)
03-22 18:26:00.654: E/AndroidRuntime(755):  ... 14 more
03-22 18:26:05.975: I/Process(755): Sending signal. PID: 755 SIG: 9 
```

最初，我使用“添加外部 jar 文件”添加了 restlet jar 文件。后来，在谷歌搜索之后，我在 Libs 文件夹中添加了这些 jar 文件，并使用 Configure Build Path 中的 Add Jar files 添加了它们。当我尝试该方法时，我收到一条错误消息“运行时没有命令输出：'am start -n ....... 添加 jar 文件的正确方法是什么？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:17:44.837

```
Caused by: Unauthorized (401) - Unauthorized 
```

所以你的错误很明显。您正在尝试对某些请求提出请求，`Server`但很可能您提供了错误的登录名和密码，导致**401 未经授权的访问**。

确保你通过正确的`LOGIN`和`PASSWORD`。

# javascript - javascript中对服务的异步调用

> ID：15570062
> 
> 赞同：0
> 
> 时间：2013-03-22T12:14:29.500
> 
> 标签：javascript, leaflet

在我的项目中，我调用相同的服务超过 2-3 次，以便使用 cloudmode 服务在 javascript 中查找我的路线的距离和时间。

我有一条折线，我得到折线的每个点并将两个连续的点传递给服务以从中获得响应。

我正在做的是

```
function showPointsRoutes(e)
        {
            var a = e.target.getLatLngs();
            for(var i = 1 ; i < a.length ; i++)
            {
             var as ="http://routes.cloudmade.com/BC9A493B41014CAABB98F0471D759707/api/0.3/" + a[i-1].lat+","+a[i-1].lng+","+a[i].lat+","+a[i].lng + "/car/shortest.js?callback=getRouteResponse";
             addScript(as);
            }
        }

    function getRouteResponse(response) 
      {
        mytimeArray.push[response.route_summary.total_time];
        myDistancArray.push[response.route_summary.total_distance];
      }

     function addScript(url) 
      {
            var script = document.createElement('script');
            script.type="text/javascript";
            script.src=url;
            document.getElementsByTagName('head') [0].appendChild(script);
        } 
```

但有时会发生对某些请求的响应迟到的情况。因此，我没有得到适当的时间和点之间的距离。任何人都可以建议某种方式，以便我将数组中的值作为发出请求的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:22:28.520

它们为您提供不同回调名称的原因是您可以通过为每个请求使用不同的回调来区分请求。尝试这样的事情：

注意：@Rodrigo Assis 的建议在这种情况下会更好，因为 API 支持这一点。下面的代码演示了一种在 API 强制使用多个请求时处理此问题的方法。

```
function showPointsRoutes(e)
{
  var a = e.target.getLatLngs();
  for(var i = 1 ; i < a.length ; i++)
    requestRoute(i, a[i-1], a[i]);
}

function requestRoute(i, a, b)
{
  window["getRouteResponse" + i] = function(response)
  {
    mytimeArray[i] = response.route_summary.total_time;
    myDistancArray[i] = response.route_summary.total_distance;
  };

  var as ="http://routes.cloudmade.com/BC9A493B41014CAABB98F0471D759707/api/0.3/" + a.lat+","+a.lng+","+b.lat+","+b.lng + "/car/shortest.js?callback=getRouteResponse" + i;
  addScript(as);
}

function addScript(url) 
{
  var script = document.createElement('script');
  script.type="text/javascript";
  script.src=url;
  document.getElementsByTagName('head') [0].appendChild(script);
} 
```

# drupal - Drupal 链接使用 l 添加描述

> ID：15570064
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:14:32.220
> 
> 标签：drupal

如何使用“l()”在 Drupal7 的链接按钮中添加描述。请举例说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:27:56.143

如果通过描述您的意思是链接的标题，那么请使用以下解决方案。假设你想要一个带有 name 的链接`LINK_NAME`指向`http://<yoursite>/user`，下面的行给你同样的。

```
l('LINK_NAME', '/user', array('attributes' => array('title' => 'Title')); 
```

# mongodb - MongoDB 使用 Grails MongoDB 插件查询多对多等价物

> ID：15570065
> 
> 赞同：0
> 
> 时间：2013-03-22T12:14:32.557
> 
> 标签：mongodb, grails

我有两个用[MongoDB Grails PLUGIN](http://grails.org/plugin/mongodb "GRAILS MONGODB 插件")映射的类：

班级人：

```
class Person {
     static mapWith="mongo"

     String name
     String email

     static hasMany = [profiles: Profile]

     static belongsTo = Profile

     String toString(){
        return name +" - " + (profiles)
}   } 
```

和班级简介：

```
class Profile{

static mapWith="mongo"

String abbreviation
String description
static hasMany = [people: Person]

String toString(){
    return abbreviation + " - " + description
}} 
```

如何使用 mongo 提供的查找器进行查询以根据个人资料返回人员？

mongo 查询也可能有用！

此查找器不返回任何内容

```
def people = Profile.findAllByAbbreviation("example").people 
```

对不起英文...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T11:10:03.327

类人 { 静态 mapWith="mongo"

```
 String name
 String email
List<Profile> profile= new ArrayList<Profile>();

static embedded = ['profile'] 
```

}

# jquery - 向左滑动隐藏 div，向右滑动活动 div

> ID：15570077
> 
> 赞同：1
> 
> 时间：2013-03-22T12:15:00.350
> 
> 标签：jquery, hidden, absolute, parallax, sliding

我有一系列 div，第一个是活动的（显示带有链接的欢迎屏幕）。其他是隐藏的 div 绝对位置左侧：-100%（这些也将包含链接）。

我需要这样做，以便当用户单击链接时，当前 div 向左滑出（平滑），新内容从右侧滑入（平滑）。

视差滑动对我不起作用，因为您可以彼此导航到每张幻灯片，但我不希望网站滚动浏览所有幻灯片以到达目标容器。我只想在到达请求的内容之前有一个滚动序列。

我所看到的大部分内容似乎是与浮动 div 一起使用的滚动脚本，因此，如果您单击链接 3，您将滑过 1、2、3。我需要错过中间的东西！我希望这是有道理的！？

另外，如果可能的话，我希望动态加载幻灯片的内容？？但我完全迷失了那个！

**这是我到目前为止的代码......**

[http://jsfiddle.net/ykbgT/5249/](http://jsfiddle.net/ykbgT/5249/)

这几乎是我所需要的，但是正如您所看到的，所有的幻灯片都被同时调用了！非常感谢所有帮助！！！

```
html, body{
width:100%;
height:100%;
padding:0px;
margin:0px; 
overflow: hidden; 
}
.wrapper {
position: absolute;
margin: 0px;
padding: 0px;
width: 100%;
height: 100%;
overflow: hidden;  
}
.slide{
position: absolute;
width: 200%;
height: 100%;
font-size: 30px;
text-align: center;
border: 2px solid black;
left: 100%;
top:0px;
}
.navigation{
font-size:14px;
}
.navigation a{
display:block;
background-color:#000;
color:#fff;
padding:5px;
float:left;
margin-right:5px;
}
#slide1{
background-color:#000;
background-image:url(images/BG1.jpg);
background-position:center top;
background-repeat:no-repeat;
width:100%;
left: 0%;
}
.inner{
width:960px;
height:800px;
background-color:#fff;
margin-left:auto;
margin-right:auto;
position:relative;
}
#slide2{
background-color:#090;

}
#slide3{
background-color:#F30;
}
.content{
width:30%;
height:80%;
float:right;
background-color:#fff;
margin:10%;
}

</style>

</head>

<body>
<div class="wrapper">

<div class="slide" id="slide1">
<div class="inner">
   WELCOME CONTENT HERE
</div>
</div>

<div class="slide" id="slide2">
<div class="content">
      <div>SLIDE 2 DYNAMIC CONTENT LOADS HERE</div>
      <div class="navigation">
      <a class="button">LINK TO SLIDE 3</a>
      <a class="button">LINK TO SLIDE 4</a>
      <a class="button">LINK TO SLIDE 5</a>
      <a class="button">LINK TO SLIDE 6</a>
      <a class="button">LINK TO SLIDE 7</a>
      <a class="button">LINK TO SLIDE 8</a>
      </div>
</div>
</div>

<div class="slide" id="slide3">
<div class="content">
      <div>SLIDE 3 DYNAMIC CONTENT LOADS HERE</div>
      <div class="navigation">
      <a class="button">BACK TO SLIDE 2</a>
      <a class="button">LINK TO SLIDE 4</a>
      <a class="button">LINK TO SLIDE 5</a>
      <a class="button">LINK TO SLIDE 6</a>
      <a class="button">LINK TO SLIDE 7</a>
      <a class="button">LINK TO SLIDE 8</a>
      </div>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:37:27.113

我已经更新了我的解决方案并将其发布在 jsFiddle 中。我还没有完成解决方案，但按钮 2 和 3 可以工作。

[http://jsfiddle.net/Ns7sH/](http://jsfiddle.net/Ns7sH/)

```
$('.button2').click(function() {
    var thisElement = $('#slide2')[0]
    var previousElement = thisElement.previousElementSibling;

    $(previousElement).animate({
            left: '-100%',
        }, 1000 );

        $(thisElement).animate({
            left: '0%',
        }, 1000 ); 
```

});

它没有 jquery ajax 加载内容，我会在以后有时间时将其放入。

# jquery - Jquery在Mouseleave上停止淡出动画

> ID：15570079
> 
> 赞同：1
> 
> 时间：2013-03-22T12:15:04.190
> 
> 标签：jquery, fadeout

有没有办法在 jQuery中停止`fadeOut()`动画？`mouseleave`我希望脚本像这样工作：

*   1：当用户将鼠标悬停在文本上时，显示一个 div
*   2：当用户将鼠标移出文本时隐藏div，但如果用户将鼠标悬停在容器上，则div必须继续显示！

这就是我的工作：

```
$(document).ready(function(){    
    $('.this').hover(function(){
        $('#container').fadeIn(200);
    }).mouseleave(function(){
        setTimeout(function () {
        $('#container').fadeOut(200);
    }, 1000);
    })

    $('#container').hover(function(){
        $('#container').stop().show();
    })

}); 
```

[小提琴](http://jsfiddle.net/y36ta/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:53:51.687

像这样？[http://jsfiddle.net/y36ta/6/](http://jsfiddle.net/y36ta/6/)

```
var $container = $('#container');

$('.this').on('mouseover', function(){
    $container.stop(true).fadeIn(200);
}).on('mouseleave', function(){
    $container.stop(true).delay(200).fadeOut(200);
})

$container.on('mouseenter', function(){
    $(this).stop(true).clearQueue().show();
}).on('mouseleave', function() {
    $(this).delay(200).fadeOut(200);
}); 
```

更新：用于`.on()`绑定处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:41:20.363

试试这个：

```
$(document).ready(function () {
    $('.this').hover(function () {
        $('#container').fadeIn(200);
    });
    $('.this').mouseleave(function (e) {
        setTimeout(function () {
            if ($('#container:hover').length != 1) $('#container').fadeOut(200);
        }, 1000);
    });
}); 
```

**[演示](http://jsfiddle.net/y36ta/3/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:43:39.703

[这是一个 jsfiddle](http://jsfiddle.net/KEmCG/10/)。看看吧，我认为这是你需要的。

```
$(document).ready(function() {
    $('a').hover(function() {
          $('.this').stop().fadeTo(200, 1, function(){
               $('.this').fadeTo(800, 0.1);
          });
    }, function() {
          $('.this').stop().fadeTo(200, 0.1);
    });
}); 
```

希望能帮助到你

# java - NDK 在方法调用上构建未定义的引用...

> ID：15570081
> 
> 赞同：0
> 
> 时间：2013-03-22T12:15:10.733
> 
> 标签：java, c++, eclipse, android-ndk, java-native-interface

当我从 Eclipse 中构建我的 Android ndk 项目时，我收到以下错误，引用使用 std::string 作为参数的函数调用，如果我更改为 const char * arg，我会收到类似的错误。我怎样才能摆脱这个，我的 android.mk 附在错误下方：

```
/Applications/adt-bundle-mac-x86_64/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/JsonPoco/JsonPoco.o: in function jsonParse:jni/JsonPoco.cpp:23: error: undefined reference to 'StoreRefListComplexType::StoreRefListComplexType(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' 
```

安卓.mk

```
LOCAL_PATH := $(call my-dir)
ROOT_PATH := $(LOCAL_PATH)
include $(call all-subdir-makefiles)
include $(CLEAR_VARS)
LOCAL_PATH = $(ROOT_PATH)

include $(CLEAR_VARS)
LOCAL_MODULE_TAGS := eng
LOCAL_ARM_MODE    := arm
LOCAL_MODULE      := JsonPoco # Your own library.
LOCAL_SRC_FILES   := JsonPoco.cpp # Your own library source.
LOCAL_CFLAGS      := -DPOCO_ANDROID -DPOCO_NO_FPENVIRONMENT -DPOCO_NO_WSTRING -DPOCO_NO_SHAREDMEMORY
LOCAL_CPPFLAGS   := -frtti -fexceptions 
LOCAL_STATIC_LIBRARIES := PocoFoundation \
PocoJSON
include $(BUILD_SHARED_LIBRARY) 
```

还有我的 Application.mk

```
#Application.mk
APP_STL := gnustl_static 
```

方法调用如下所示，其中 test 是一个 std::string：

```
void jsonParse(JNIEnv* aEnv, jobject aObj){
  std::string test= "jsondata...";
  ComplexType* ref = new ComplexType(test);
 } 
```

我已经使用方法表将我的 jsonParse 方法定义为可通过 JNI 访问：

```
static JNINativeMethod methodTable[] = {
  {"json_parse", "()V", (void *) jsonParse}}; 
```

和接收方法/构造函数：

```
ComplexType::ComplexType(std::string jsonstring); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:31:59.123

此错误消息表明某些源文件或库已被排除在 make 文件之外。在我的情况下，文件外壳：ComplexType 包含在 C++ 源代码中，但不包含在 make 脚本中。

Another problem with a similiar error message, but where a library is missing is displayed [here](https://stackoverflow.com/questions/11665521/ndk-ndk-build-error).

# c# - HTMLControl Style.Add

> ID：15570083
> 
> 赞同：1
> 
> 时间：2013-03-22T12:15:15.710
> 
> 标签：c#, asp.net, html, css

我有一个使用 C# 和 Visual Studio 创建的网站。

我的 Site.master 中有以下菜单：

```
<div class="menu">
  <ul>
    <li runat="server" id="liHome">   <a href="Default.aspx">Home</a></li>
    <li runat="server" id="liAbout">  <a href="About.aspx">About</a></li>
    <li runat="server" id="liContact"><a href="ContactUs.aspx">Contact</a></li>
  </ul>
</div> 
```

我有以下CSS：

```
.menu ul {}
.menu ul li a{padding:9px 10px; display:block; color:#fff; font-size:16px; font-weight:bold;}
.menu ul li a:hover{color:#00ff00; text-decoration:none; } 
```

我想要做的是当单击菜单时，我希望所选菜单项的文本改变并保持不同的颜色。在我的 Site.master.cs 中，我正在为“关于”菜单项执行以下操作，例如：

```
 if (Request.Url.ToString().Contains("About") == true)
    {   
        liContact.Style.Add("color", "#00ff00");
    } 
```

但颜色不会保持绿色。任何人都可以帮助我了解我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:21:45.917

[活动 Html 链接教程](http://www.w3schools.com/tags/tag_a.asp)

本教程可帮助您解决问题。

默认情况下，链接将在所有浏览器中显示如下：

未访问的链接带有下划线和蓝色 已访问的链接带有下划线和紫色 活动链接带有下划线和红色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:27:55.663

您可以使用如下

```
 if (Request.Url.ToString().Contains("About") == true)
  {    
      liContact.Style.Add("color", "#00ff00!important");
  } 
```

你只需要添加`!important`你的`css`，它就会起作用。
否则它将被类覆盖。

## 编辑 1

其他明智的选择不同的课程

```
.menu ul {}
.menu ul li a{padding:9px 10px; display:block; color:#fff; font-size:16px; font-weight:bold;}
.menu ul li a:hover{color:#00ff00; text-decoration:none; }

.menu ul li.selected a{padding:9px 10px; display:block; color:#00ff00; font-size:16px; 
       font-weight:bold;} 
```

而不是设置颜色替换类。

```
liContact.Attributes.Remove("class");   
liContact.Attributes.Add("class", "selected"); 
```

## 编辑 2

```
 .menu ul li.selected a:hover{padding:9px 10px; display:block; color:#00ff00; font-size:16px; 
       font-weight:bold;} 
```

# oracle - 在 oracle 中创建一个带参数的视图

> ID：15570084
> 
> 赞同：0
> 
> 时间：2013-03-22T12:15:17.287
> 
> 标签：oracle, views

我想在 Oracle 中创建一个视图，我需要在其中提供`student_ID`参数，它将`student_name`从`student`表中提取。我没有视图方面的经验，也没有使用 Oracle 的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:39:14.757

假设这样的表定义：

```
CREATE TABLE STUDENT (
  student_id int,
  student_name varchar2(100),
  student_address varchar2(255),
  student_email varchar2(100)
); 
```

创建一个只有 id 和 name 字段的视图：

```
CREATE VIEW VSTUDENT AS
SELECT student_id, student_name
FROM STUDENT; 
```

然后您可以：

```
SELECT student_name
FROM VSTUDENT
WHERE student_id=123; 
```

仅使用 student_id（查询字段）和 student_name（必填字段）创建视图可以保护所有其他学生数据免受没有访问权限的人的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:30:54.787

```
CREATE VIEW view_name AS 
  SELECT student_name, student_grades, more columns...
   FROM student_table
  WHERE student_id = 20
 / 
```

# php - mysql 在 php 函数中选择 * 或所需参数

> ID：15570088
> 
> 赞同：0
> 
> 时间：2013-03-22T12:15:40.007
> 
> 标签：php, mysql, class, function

我有一个从特定表中选择 * 值的函数，我需要配置如果我在参数中传递 * 则它会选择所有或选定的参数。

我的功能如下：

```
 public function select($tablename){
          $select = mysql_query("SELECT * FROM $tablename");
          if(!$select){
              echo "cant select table mane";
              }
          while ($row = mysql_fetch_array($select)){

              print_r($row);
              }
          } 
```

如何传递动态列名代替 *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:29:46.737

这更容易：

```
public function select( $tablename , $columnName = array() ){
   $columnName = $columnName ? implode( ',' , $columnName ) : '*';
   $select     = mysql_query( 'SELECT ' . $columnName . ' FROM ' . $tableName );
   if(!$select){
      echo "cant select table mane";
   }
   while ($row = mysql_fetch_array($select)){
      print_r($row);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:19:20.580

```
public function select($tablename,$column=NULL){
      if($column == null) {
          $select = mysql_query("SELECT *  FROM $tablename");
      } else {
          $select = mysql_query("SELECT ".$column."  FROM $tablename");
      } 
```

`select("abcd_table","id,name");` **使用OR**来调用它`select("abcd_table");`

亚历**克斯**

```
Avoid mysql, it is deprecated. Use mysqli or PDO instead 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:20:41.837

在您的函数中再添加一个参数`$columnname`类型数组。

```
 public function select($tablename,$columnname = array()){
      if(count($columnname)){
         $columnname = implode(",",$columnname);
         $select = mysql_query("SELECT {$columnname} FROM $tablename");
      }  
      else{
        $select = mysql_query("SELECT * FROM $tablename");
      }
      #code continue
   } 
```

调用将如下所示

要选择所有字段，

```
select($tablename); 
```

要选择一些字段，

```
select($tablename,array('field','field2')); 
```

注意：[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:26:25.553

试试这个修改后的功能

```
public function select($tablename,$array_fields){
    if(!empty($array_fields)){
      $fieldstr = implode(',',$array_fields);
      $fieldstr = trim($fieldstr,',');
    }else{
        $fieldstr = '*';
    }
      $select = mysql_query("SELECT $fieldstr FROM $tablename");
      if(!$select){
          echo "cant select table mane";
          }
      while ($row = mysql_fetch_array($select)){

          print_r($row);
          } 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:18:16.513

```
 public function select($tablename,$column="*"){

          $select = mysql_query("SELECT $column FROM $tablename");
          if(!$select){
              echo "cant select table mane";
              }
          while ($row = mysql_fetch_array($select)){

              print_r($row);
              }
          } 
```

叫得像`select("table","*") or` 叫得像`select("table","col1,col2")`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:19:44.880

```
public function select($tablename, $selectrow){
          $select = mysql_query("SELECT $selectrow FROM $tablename");
          if(!$select){
              echo "cant select table mane";
          }
          while ($row = mysql_fetch_array($select)){
              print_r($row);
          }
} 
```

# java - GWT MenuItem-List 选定值

> ID：15570089
> 
> 赞同：2
> 
> 时间：2013-03-22T12:15:41.767
> 
> 标签：java, gwt, menuitem

我有一点问题。就像在代码中一样，我正在尝试创建一个动态 MenuItem 列表。这没问题，但我想要选择/单击的项目。但我不确定如何正确实施。所有这一切都发生在我的视图中，我想将值设置为在演示者中继续。谢谢任何帮助。

```
chooseProfileMenuBar = new MenuBar(true);
for (int i = 0; i<names().size(); i++) {

  final MenuItem menuItemChoose = new MenuItem(names.get(i), new Command(){

    @Override           
        public void execute() {

      // TODO set the onClicked value/name at index i               

    }
  });
  chooseProfileMenuBar.addItem(menuItemChoose);
}
return chooseProfileMenuBar; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:19:03.490

如果可能的话，您可以再做一件事，我有创建运行时的下载菜单，所以我添加了 HashMap 并在该 HashMap 中添加了 names.get(i) 和下载链接，所以看起来像

```
map.put(names.get(i),"link"), 
```

现在在执行（）中，我添加了`Window.open(map.get(menuItem.gettext()),"_blank");`

我的项目中还有一个菜单是报告菜单，因此来自数据库的报告列表即将到来

```
for(final Temp report : listReports){
    MenuItem menuItem = new MenuItem(report.getType().toString(), new Command() {
        @Override
                public void execute() {
                    getUiHandlers().showReportPanel(report);
                }
            });
        reportMenuBar.addItem(menuItem);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:20:02.553

使用 `UIHandler`概念的好处在视图和演示者之间进行通信。

**创建接口：**

```
import com.gwtplatform.mvp.client.UiHandlers;

public interface MyUiHandler extends UiHandlers {
    void onMenuSelected(MenuItem menuitem); 
```

}

**那么在你看来**

```
public class MyMVPView extends ViewWithUiHandlers<MyUiHandler> implements
        MyMvPPresenter.MyView {
.
.
.
. 
```

并**使用 Presenter 实现该 uihandler 接口**

```
public class MyMvPPresenter
        extends
        Presenter<MyMVPPresenter.MyView, MyMVPPresenter.MyProxy>
        implements MyUiHandler {

//in the same presenter 
public interface MyView extends View, HasUiHandlers<UserDashboardUiHandler> {
    //  

.
.
. 
```

然后您将在演示者中获得覆盖方法，例如

```
@Override
    public voidonMenuSelected(MenuItem menuitem) {
         //Your implementation here
    } 
```

**用法**

```
@Override           
        public void execute() {

        getUiHandlers().showReportPanel(menuItemChoose );              

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:47:03.277

你是对的 vicR，从 menuItemChoose 中获取值是正确的。你可以这样做

```
public void execute() {
    onclickMenu(menuItemChoose);
}

void onclickMenu(MenuItem menuItemChoose){
    if(menuItemChoose.gettext().equals("abc"){
         //call handler method that implemented you in presenter
    }
} 
```

# java - 向 JAXB xml 添加注释

> ID：15570094
> 
> 赞同：1
> 
> 时间：2013-03-22T12:15:48.197
> 
> 标签：java, json, jaxb

我想向提供给 JAXB 的 XML 文件添加注释。

我们有一个要求，我将创建具有相同属性名称和数据类型但具有不同 JSON 键的对象。

JSON 中的键名将根据提供的注释而有所不同。这些注释是 GSON 注释，例如：@SerializedName("您想要的 JSON 的键名")。

我试图从我在[这里发布的问题中获得一些输入](https://stackoverflow.com/questions/15563351/how-to-dynamically-generate-and-retrieve-json-in-java-code)

但无法真正得到任何解决方案。

有人有什么建议吗？

我将添加一些 XML 模式来解释。

```
<xsd:complexType name="RouteType">
 <xsd:attribute name="Pos" type="xsd:int" use="optional" default="1"/>
 <xsd:attribute name="Dir" type="DirType" use="required"/>
</xsd:complexType> 
```

现在在上面的模式中，我可以为属性 Pos 添加注释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:42:07.033

我假设您问的是如何让 JAXB 编译器自动注释生成的类。有一个用于添加注释的 JAXB 插件：http: [//confluence.highsource.org/display/J2B/Annotate+Plugin](http://confluence.highsource.org/display/J2B/Annotate+Plugin)

您可以像这样将它挂接到`generate-sources`Maven 构建的阶段：

```
<build>
    <!-- snip -->
    <plugins>
        <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <version>0.8.2</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <schemaIncludes>
                            <include>path/to/your/schema.xsd</include>
                        </schemaIncludes>
                        <bindingIncludes>
                            <include>path/to/your/custom-bindings.xjb</include> <!-- if you choose to use a custom bindings file instead of inline annotations in the xsd -->
                        </bindingIncludes>
                        <forceRegenerate>true</forceRegenerate>
                        <extension>true</extension>
                        <episode>false</episode>
                        <args>
                            <arg>-Xannotate</arg>
                        </args>
                        <plugins>
                            <plugin>
                                <groupId>org.jvnet.jaxb2_commons</groupId>
                                <artifactId>jaxb2-basics-annotate</artifactId>
                                <version>0.6.4</version>
                            </plugin>
                        </plugins>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

如果上面的插件不完全符合您的要求（我认为应该这样做，它看起来非常灵活），那么滚动您自己的修改应该不会太难（我之前已经这样做了，以便将复制构造函数添加到生成的类）。

# sqlite - sqlite 获取 ROWID

> ID：15570096
> 
> 赞同：50
> 
> 时间：2013-03-22T12:15:57.327
> 
> 标签：sqlite

考虑这个简单的表（tbl1）：

```
A|first letter
B|second letter
C|third letter 
```

第一列是**字母**，第二列是**描述**

我可以毫无问题地进行此查询：

```
select * from tbl1 where letter='B'      -->>second letter 
```

我的问题是：如何获取（检索）结果行的**ROWID ？**

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-03-22T12:50:31.297

```
SELECT rowid, * FROM tbl1 WHERE letter = 'B' 
```

# python - Pandas 数据透视表行小计

> ID：15570099
> 
> 赞同：44
> 
> 时间：2013-03-22T12:16:10.503
> 
> 标签：python, pandas, pivot-table

我正在使用熊猫 0.10.1

考虑到这个数据框：

```
Date       State   City    SalesToday  SalesMTD  SalesYTD
20130320     stA    ctA            20       400      1000
20130320     stA    ctB            30       500      1100
20130320     stB    ctC            10       500       900
20130320     stB    ctD            40       200      1300
20130320     stC    ctF            30       300       800 
```

如何按州对小计进行分组？

```
State   City  SalesToday  SalesMTD  SalesYTD
  stA    ALL          50       900      2100
  stA    ctA          20       400      1000
  stA    ctB          30       500      1100 
```

我尝试使用数据透视表，但我只能在列中有小计

```
table = pivot_table(df, values=['SalesToday', 'SalesMTD','SalesYTD'],\
                     rows=['State','City'], aggfunc=np.sum, margins=True) 
```

我可以通过数据透视表在 excel 上实现这一点。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-22T16:07:31.223

如果您没有将州和城市都放在行中，您将获得单独的边距。重塑，你会得到你所追求的桌子：

```
In [10]: table = pivot_table(df, values=['SalesToday', 'SalesMTD','SalesYTD'],\
                     rows=['State'], cols=['City'], aggfunc=np.sum, margins=True)

In [11]: table.stack('City')
Out[11]: 
            SalesMTD  SalesToday  SalesYTD
State City                                
stA   All        900          50      2100
      ctA        400          20      1000
      ctB        500          30      1100
stB   All        700          50      2200
      ctC        500          10       900
      ctD        200          40      1300
stC   All        300          30       800
      ctF        300          30       800
All   All       1900         130      5100
      ctA        400          20      1000
      ctB        500          30      1100
      ctC        500          10       900
      ctD        200          40      1300
      ctF        300          30       800 
```

我承认这并不完全明显。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-22T12:38:30.780

您可以通过在 State 列上使用 groupby() 来获取汇总值。

让我们先制作一些示例数据：

```
import pandas as pd
import StringIO

incsv = StringIO.StringIO("""Date,State,City,SalesToday,SalesMTD,SalesYTD
20130320,stA,ctA,20,400,1000
20130320,stA,ctB,30,500,1100
20130320,stB,ctC,10,500,900
20130320,stB,ctD,40,200,1300
20130320,stC,ctF,30,300,800""")

df = pd.read_csv(incsv, index_col=['Date'], parse_dates=True) 
```

然后应用 groupby 函数并添加一个列 City：

```
dfsum = df.groupby('State', as_index=False).sum()
dfsum['City'] = 'All'

print dfsum

  State  SalesToday  SalesMTD  SalesYTD City
0   stA          50       900      2100  All
1   stB          50       700      2200  All
2   stC          30       300       800  All 
```

我们可以使用 append 将原始数据附加到求和的 df 中：

```
dfsum.append(df).set_index(['State','City']).sort_index()

print dfsum

            SalesMTD  SalesToday  SalesYTD
State City                                
stA   All        900          50      2100
      ctA        400          20      1000
      ctB        500          30      1100
stB   All        700          50      2200
      ctC        500          10       900
      ctD        200          40      1300
stC   All        300          30       800
      ctF        300          30       800 
```

我添加了 set_index 和 sort_index 以使其看起来更像您的示例输出，这并不是获得结果所必需的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-20T20:18:23.977

我认为这个小计示例代码是您想要的（类似于 excel 小计）

我假设您希望按列 A、B、C、D 分组，而不是计算 E 的列值

```
main_df.groupby(['A', 'B', 'C']).apply(lambda sub_df: sub_df\
       .pivot_table(index=['D'], values=['E'], aggfunc='count', margins=True) 
```

输出：

```
A B C  D  E
       a  1 
a a a  b  2
       c  2
     all  5
       a  3 
b b a  b  2
       c  2
     all  7
       a  3 
b b b  b  6
       c  2
       d  3
     all 14 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-13T05:43:54.287

这个怎么样 ？

```
table = pd.pivot_table(data, index=['State'],columns = ['City'],values=['SalesToday', 'SalesMTD','SalesYTD'],\
                      aggfunc=np.sum, margins=True) 
```

[![在此处输入图像描述](../Images/31f9456c61d1acf1e43cc7ac7da5d7df.png)](https://i.stack.imgur.com/aK54T.png)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-09-24T11:19:45.867

```
table = pd.pivot_table(df, index=['A'], values=['B', 'C'], columns=['D', 'E'], fill_value='0', aggfunc=np.sum/'count'/etc., margins=True, margins_name='Total')

print(table) 
```

# plugins - 我需要工厂在插件中获取服务吗？

> ID：15570102
> 
> 赞同：1
> 
> 时间：2013-03-22T12:16:14.590
> 
> 标签：plugins, dynamics-crm-2011

我在插件中使用的代码如下所示。

```
IOrganizationServiceFactory serviceFactory =
  (IOrganizationServiceFactory)serviceProvider.GetService(
    typeof(IOrganizationServiceFactory));
IOrganizationService service = serviceFactory
  .CreateOrganizationService(Context.UserId); 
```

我想知道使用这种语法来获得我的服务是否还不够。

```
IOrganizationService service = 
  serviceProvider.GetService(typeof(IOrganizationService)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:38:11.300

您的问题使我查看了我的插件`IOrganizationService`创建。我写了三个扩展方法来让我的生活更轻松，其中一个使用工厂方法，一个没有（尽管它在插件执行上下文中传递）。这些方法都已经在生产中工作了一段时间。我只是不确定为什么我使用工厂服务，一种方法，而不是另一种方法。

```
public static IPluginExecutionContext GetContext(this IServiceProvider provider)
{
    return (IPluginExecutionContext) provider.GetService(typeof(IPluginExecutionContext));
}

public static IOrganizationService GetService(this IServiceProvider provider, IPluginExecutionContext context)
{
    return provider.GetService(context, context.UserId);
}

public static IOrganizationService GetService(this IServiceProvider provider, IPluginExecutionContext context, Guid impersonationUser)
{
    var serviceFactory = (IOrganizationServiceFactory)provider.GetService(typeof(IOrganizationServiceFactory));
    return serviceFactory.CreateOrganizationService(impersonationUser);
} 
```

## 编辑

评论者指出，第二种方法调用了第三种方法，这样，两种方法都使用工厂来创建服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:11:19.387

我大部分（所有）时间都使用这种语法。

```
IOrganizationService service = provider.GetService(typeof(IOrganizationService)); 
```

但是，可能建议使用工厂方法。我不确定 CRM 的 SDK 是如何处理事情的，但一般来说，工厂是为您生​​成对象的静态类。这样，有更多的功能（可能）将使您的编程生活更轻松（或更令人困惑）。

据我了解，这两种语法都适用于 CRM，除非您遇到一些非常奇怪的情况，否则这是您的选择。

# javascript - onmouseover 和 jquery 功能无法正常工作

> ID：15570104
> 
> 赞同：1
> 
> 时间：2013-03-22T12:16:16.597
> 
> 标签：javascript, jquery, html

```
"<a " . $thumbs . " href=\"" . $url . "\" class=\"download\" rel=\"files/" . $dir . "/" . $file . "\" title=\"" . $alt . "\"   ".$hover." > </a>" 
```

当鼠标悬停在该链接上时，将调用一个函数：

```
$hover = " onmouseover=\"showImageThumbnail(this, '".$url_thumb."')\""; 
```

函数本身：

```
function showImageThumbnail(obj, url){          
    xOffset = 30;
    yOffset = 10;

    $.get(url, function(data) {
        $(obj).hover(function(e){

            $("body").append("<p id='screenshot'><img src='data:image/jpg;base64,"+ data +"' alt='Atsisiųsti' /></p>");                              
            $("#screenshot")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");                        
        },
        function(){ 
            $("#screenshot").remove();
        }); 
        $(obj).mousemove(function(e){
            $("#screenshot")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
        });
    });
} 
```

我的问题是我的功能无法正常工作，我需要悬停两次才能使其正常工作。此功能类似于工具提示，它显示图像缩略图。我认为，我需要删除`.hover.`方法，但之后我的功能根本或部分不起作用（例如，当光标离开链接时，缩略图不会被删除）。有人可以帮我修复该功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:40:36.647

尝试进行以下更改

```
"<a " . $thumbs . " href=\"" . $url . "\" class=\"download\" rel=\"files/" . $dir . "/" . $file . "\" title=\"" . $alt . "\"   image=\"".$url_thumb."\" > </a>" 
```

和

```
$(function() {
    var screenshot = $("<p id='screenshot'><img src='data:image/jpg;base64,"
            + data + "' alt='Atsisiusti' /></p>").hide()
            .appendTo('body');
    var img = $('img', screenshot);

    $('.download[image]').hover(function(e) {
            $.get($(this).attr('image'), function(data) {
                img.attr('src', 'data:image/jpg;base64,'
                                + data);
            });

            img.removeAttr('src');

            screenshot.css({
                'top' : (e.pageY - xOffset) + 'px',
                'left' : (e.pageX + yOffset) + 'px'
            }).fadeIn("fast");
        }, function() {
            screenshot.hide();
    }).mousemove(function(e) {
            screenshot.css({
                'top' : (e.pageY - xOffset) + 'px',
                'left' : (e.pageX + yOffset) + 'px'
            })
    });

}) 
```

# bash - /usr/bin/w 重定向到文件或管道时会截断长行

> ID：15570106
> 
> 赞同：1
> 
> 时间：2013-03-22T12:16:24.857
> 
> 标签：bash

当我在终端上运行“/usr/bin/w”时，我看到了很长的行，例如

```
user    pts/0    :0.0             08Jan13  2:48m  6.02s 12:36  gnome-terminal --maximize 
```

但是，当我重定向到文件或管道时，例如“/usr/bin/w | cat”，这些行被截断为 80 的长度

```
user    pts/0    :0.0             08Jan13  2:53m  6.02s 12:36  gnome-termi 
```

即使重定向到管道，是否有可能获得长线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:36:07.867

是时候调用 FOSS 超级英雄的力量了！

检查`w.c`学习的源代码：

```
if (ioctl(STDOUT_FILENO, TIOCGWINSZ, &win) != -1 && win.ws_col > 0)
    maxcmd = win.ws_col;
else if ((p = getenv("COLUMNS")))
    maxcmd = atoi(p);
else
    maxcmd = 80;
if (maxcmd < 71)
    xerrx(EXIT_FAILURE, _("%d column window is too narrow"), maxcmd);

maxcmd -= 21 + userlen + (from ? fromlen : 0) + (longform ? 20 : 0);
if (maxcmd < 3)
    xwarnx(_("warning: screen width %d suboptimal"), win.ws_col); 
```

所以

```
export COLUMNS=300 
```

应该足够了，或者

```
COLUMNS=300 /usr/bin/w | cat 
```

去测试 ：）

# c# - HTTP 请求未经客户端身份验证方案“协商”的授权。从服务器收到的身份验证标头是“NTLM”

> ID：15570108
> 
> 赞同：41
> 
> 时间：2013-03-22T12:16:43.900
> 
> 标签：c#, windows, wcf, authentication

几天前，**在客户端和 wcf Web 服务之间使用 Windows 身份**验证时，我对身份验证问题感到非常头疼。我得到的错误是“HTTP请求未经客户端身份验证方案'Negotiate'授权。从服务器收到的身份验证标头是“NTLM”。堆栈上的解决方案都没有工作，因为它们中的大多数都与旧方法有关。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-31T07:10:52.193

**答案：**问题在于此类问题的所有帖子都与代理凭据或 AllowNTLM 属性有帮助的旧 kerberos 和 IIS 问题有关。我的情况不同。经过数小时从地面上挑选蠕虫后，我发现在某种程度上 IIS 安装不包括IIS Windows 身份验证提供程序列表下的**协商提供程序。**所以我不得不添加它并向上移动。我的 WCF 服务开始按预期进行身份验证。如果您**使用带有 Anonymous auth OFF 的 Windows 身份验证，**以下是屏幕截图。

您需要右键单击 Windows 身份验证并选择提供程序菜单项。

![在此处输入图像描述](../Images/785d256bf15e6b3c239b1c841dc9b7ed.png)

希望这有助于节省一些时间。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-07T16:14:48.767

我已将旧版本的 WCF 升级到 WCF 4，并进行了以下更改，希望您也可以进行类似的更改。

**1.网络配置：**

```
<system.serviceModel>
      <bindings>
        <basicHttpBinding>
          <binding name="Demo_BasicHttp">
            <security mode="TransportCredentialOnly">
              <transport clientCredentialType="InheritedFromHost"/>
            </security>
          </binding>
        </basicHttpBinding>
      </bindings>
      <services>
        <service name="DemoServices.CalculatorService.ServiceImplementation.CalculatorService" behaviorConfiguration="Demo_ServiceBehavior">
          <endpoint address="" binding="basicHttpBinding"
              bindingConfiguration="Demo_BasicHttp" contract="DemoServices.CalculatorService.ServiceContracts.ICalculatorServiceContract">
            <identity>
              <dns value="localhost"/>
            </identity>
          </endpoint>
          <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        </service>
      </services>
      <behaviors>
        <serviceBehaviors>
          <behavior name="Demo_ServiceBehavior">
            <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
            <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
            <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
            <serviceDebug includeExceptionDetailInFaults="false"/>
          </behavior>
        </serviceBehaviors>
      </behaviors>
      <protocolMapping>
        <add scheme="http" binding="basicHttpBinding" bindingConfiguration="Demo_BasicHttp"/>
      </protocolMapping>
      <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    </system.serviceModel> 
```

**2\. 应用程序配置：**

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ICalculatorServiceContract" maxBufferSize="2147483647" maxBufferPoolSize="33554432" maxReceivedMessageSize="2147483647" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="4096" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:24357/CalculatorService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICalculatorServiceContract" contract="ICalculatorServiceContract" name="Demo_BasicHttp" />
    </client>
  </system.serviceModel> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-29T19:53:34.363

对我来说，解决方案是除了使用“Ntlm”作为凭证类型：

```
 XxxSoapClient xxxClient = new XxxSoapClient();
    ApplyCredentials(userName, password, xxxClient.ClientCredentials);

    private static void ApplyCredentials(string userName, string password, ClientCredentials clientCredentials)
    {
        clientCredentials.UserName.UserName = userName;
        clientCredentials.UserName.Password = password;
        clientCredentials.Windows.ClientCredential.UserName = userName;
        clientCredentials.Windows.ClientCredential.Password = password;
        clientCredentials.Windows.AllowNtlm = true;
        clientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-03T22:22:26.600

不是这个确切的问题，但这是谷歌搜索[几乎完全相同的错误](https://stackoverflow.com/q/22460150/1141876)时的最佳结果：

如果您在调用同一台计算机上托管的 WCF 服务时看到此问题，您可能需要填充`BackConnectionHostNames`注册表项

1.  在 regedit 中，找到并单击以下注册表子项：`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0`
2.  右键单击`MSV1_0`，指向新建，然后单击`Multi-String Value`。
3.  在“名称”列中，键入`BackConnectionHostNames`，然后按 Enter。
4.  右键单击`BackConnectionHostNames`，然后单击修改。在数值数据框中，键入用于计算机上本地共享的 CNAME 或 DNS 别名，然后单击确定。
    *   在单独的行中键入每个主机名。

有关详细信息，请参阅[调用与客户端在同一台计算机上托管在 IIS 中的 WCF 服务会引发身份验证错误](https://blogs.msdn.microsoft.com/distributedservices/2009/11/10/wcf-calling-wcf-service-hosted-in-iis-on-the-same-machine-as-client-throws-authentication-error/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-23T15:23:08.133

我的解决方案是将 AppPool 从使用 AppPoolIdentity 设置为 NetworkService 身份。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-20T12:43:58.787

我遇到了同样的问题，要解决它在 iis 中设置域中的特定用户 -> 操作侧边栏 -> 基本设置 -> 连接为... -> 特定用户

[![在此处输入图像描述](../Images/9236e27f1b32c873ef06421fcbe3a1da.png)](https://i.stack.imgur.com/Vkn1z.png)

# php - PHP time() 函数给了我错误的时间

> ID：15570110
> 
> 赞同：-3
> 
> 时间：2013-03-22T12:16:55.390
> 
> 标签：php, datetime

我正在使用以下 PHP 代码来获取当前时间。

```
$time = time();
echo date('h:m:s A',$time); 
```

返回的时间是错误的时间。我电脑上的当前时间是`05:14:33`下午，这个功能显示`12:03:02`下午。

为什么它给出了错误的时间，我怎样才能让 PHP 给出正确的时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:20:23.763

`time()`给出自 1970 年 1 月 1 日 UTC 以来的秒数。这是从您的操作系统/计算机中的内部时钟读取的。**为您提供默认时区**`date()`时间戳上的日期。

 **使用[`date_default_timezone_set`](http://php.net/manual/en/function.date-default-timezone-set.php)和[`date_default_timezone_get`](http://php.net/manual/en/function.date-default-timezone-get.php)检查/设置正确的时区。

或者，您可以在您的`php.ini`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:21:24.547

如果您当前时间有错误，请设置您的时区。在这里您可以找到有关它的更多信息... [http://www.php.net/manual/en/function.date-default-timezone-set.php](http://www.php.net/manual/en/function.date-default-timezone-set.php)

在这里您可以找到所有时区： [http ://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)**

# jsf - 如何在监听器中传递参数？

> ID：15570111
> 
> 赞同：0
> 
> 时间：2013-03-22T12:17:03.923
> 
> 标签：jsf, primefaces, arguments, listener, el

如何将参数传递给侦听器方法？

我试过这样：

```
<p:poll interval="3" listener="#{vehicleController.onPoll('12')}"
    update="vehicleDataList"/> 
```

和

```
<p:poll interval="3" listener="#{vehicleController.onPoll(vehicle.vehicleLicense)}"
    update="vehicleDataList"/> 
```

但它会引发以下异常：

```
javax.servlet.ServletException: /monitorVehicles/vehiclesList.xhtml
Failed to parse the expression [#{vehicleController.onPoll('12')}] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:38:31.277

> *收到此异常“无法解析表达式 [#{vehicleController.onPoll('12')}]”*

您的环境不支持使用参数调用方法的新 EL 2.2 功能。

EL 2.2 是 Servlet 3.0 的一部分，因此为了使用它，您需要使用 Servlet 3.0 兼容`web.xml`文件部署到与 Servlet 3.0 兼容的容器（例如 Tomcat 7、Glassfish 3、JBoss AS 6 等）。如果您没有部署到与 Servlet 3.0 兼容的容器，或者没有与 Servlet 3.0 兼容的容器，`web.xml`那么您根本没有使用 EL 2.2，您将遇到这种异常。

如果您实际上是针对/部署到与 Servlet 2.5 兼容的容器（因此使用 EL 2.1），那么您可以使用 JBoss EL 在 EL 2.1 中拥有类似 EL 2.2 的新功能。

### 也可以看看：

*   [如何在 JSF 中调用带参数的方法](https://stackoverflow.com/questions/5273729/how-to-call-a-method-with-a-parameter-in-jsf/5273864#5273864)
*   [在 EL 中调用直接方法或带参数/变量/参数的方法](https://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:22:20.263

在**JSF 2**中：

如果您的听众期待一个字符串：

```
"#{vehicleController.onPoll('11')}"

public void onPOll(String s){

} 
```

如果您的听众期待一个 int：

```
"#{vehicleController.onPoll(11)}"
public void onPoll(int i){

} 
```

# javascript - 如何在 Android 2.3 中动态翻转图像

> ID：15570112
> 
> 赞同：0
> 
> 时间：2013-03-22T12:17:04.983
> 
> 标签：javascript, android, css

3D 转换在 3.0 版以下的 android 浏览器中不起作用。有什么办法可以在这种环境下翻转图像吗？

翻转效果应该类似于：[http](http://desandro.github.com/3dtransforms/examples/card-02-slide-flip.html) ://desandro.github.com/3dtransforms/examples/card-02-slide-flip.html 。

另外，我不能使用 jQuery，只能使用纯 JS 来实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:32:10.237

为什么不使用它？里面没有jquery，只有纯css3。[http://desandro.github.com/3dtransforms/docs/card-flip.html](http://desandro.github.com/3dtransforms/docs/card-flip.html)

如果您将使用图像，您只需将图像设置为具有固定宽度和高度的背景。

# ios - ALAssetsLibrary 获取相机胶卷

> ID：15570113
> 
> 赞同：7
> 
> 时间：2013-03-22T12:17:11.397
> 
> 标签：ios, objective-c, alassetslibrary

我使用枚举所有资产组`ALAssetsLibrary`

这是代码：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

void (^enumerate)(ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop)
{
    if (group == nil)
    {
        // enumerated all albums..
    }

    // I hot to check if group is Camera Roll ?

};

[library enumerateGroupsWithTypes:ALAssetsGroupAll
                       usingBlock:enumerate
                     failureBlock:nil]; 
```

如何检查某些当前枚举是否为*CameraRoll*？

**编辑：**正如我测试的那样，它总是最后一个，使用这个枚举。但我不确定这是否是规则，是否有任何我遗漏的参考资料？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T12:22:57.763

`ALAssetsGroupSavedPhotos`要在枚举资产库时从相机胶卷使用中获取照片：

```
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
                       usingBlock:enumerate
                     failureBlock:nil]; 
```

要检测您当前获得的组：

```
if ([[group valueForProperty:@"ALAssetsGroupPropertyType"] intValue] == ALAssetsGroupSavedPhotos)
{
    NSLog(@"Camera roll");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-23T09:59:59.560

```
 imageArray = [[NSArray alloc] init];
    NSMutableArray*mutableArray =[[NSMutableArray alloc]init];

    NSMutableArray* assetURLDictionaries = [[NSMutableArray alloc] init];

    ALAssetsLibrary*library = [[ALAssetsLibrary alloc] init];

void (^enumerate)(ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop)
{
    if ([[group valueForProperty:@"ALAssetsGroupPropertyType"] intValue] == ALAssetsGroupSavedPhotos)
    {
        NSLog(@"Camera roll");
        [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
            ALAssetRepresentation *rep = [result defaultRepresentation];
            NSLog(@"Asset Name ----> %@",rep.filename);

        }];
    }
    // I hot to check if group is Camera Roll ?

};

 [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
                       usingBlock:enumerate
                     failureBlock:nil]; 
```

# hpc - Slurm AccountingStorageEnforce=关联无效

> ID：15570120
> 
> 赞同：1
> 
> 时间：2013-03-22T12:17:50.123
> 
> 标签：hpc

我正在使用 slurm 和 slurmdbd 管理集群（使用 MySQL）

我在 /etc/slurm/slurm.conf 中设置了以下选项

```
AccountingStorageEnforce=associations 
```

我已经重新加载了配置：

```
scontrol reconfig 
```

我在 sacctmgr 中配置了一些关联。

问题是我仍然可以使用不存在的 slurm 用户提交工作。我对 AccountingStorageEnforce=associations 选项的理解是非现有用户无权提交作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:49:44.333

看来要考虑这种修改，您需要完全重启 slurm 守护程序，重新加载是不够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T20:28:04.087

手册`slurm.conf`页指出

```
 AccountingStorageEnforce
          This controls what level of association-based enforcement to impose on job submissions.  Valid options are any combination of associations,  limits,  nojobs,  nosteps,
          qos, safe, and wckeys, or all for all things.
          [...]
          When AccountingStorageEnforce is changed, a restart of the slurmctld daemon is required (not just a "scontrol reconfig"). 
```

所以你必须确保重新启动 slurm 控制器守护程序（如果配置了辅助控制器，则必须重新启动。）

# draggable - 有多个句柄时如何获取用于拖动可拖动对象的句柄

> ID：15570122
> 
> 赞同：1
> 
> 时间：2013-03-22T12:17:59.133
> 
> 标签：draggable, jquery-ui-draggable, handle, jquery-draggable

我正在使用[Jquery Draggable](http://jqueryui.com/draggable/)
我的 draggable 在所有四个侧面（顶部、底部、左侧和右侧）上都有四个手柄，使用这些手柄可以在各自的方向上拖动 draggable

```
$('.draggable').draggable({
    handle: '.top, .bottom, .left, .right'
}); 
```

好吧，我可以获取拖动的方向并`axis`在拖动开始后设置 ，但是如果`bottom handle`用于拖动到`left direction`.

那么有没有办法知道哪个手柄被用来拖动一个可拖动的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:02:16.270

好吧，我的问题得到了答案，我将其发布在这里以便将来帮助其他人

```
$('. draggable').draggable({
    handle: '.top, .bottom, .left, .right'
    start : function(event, ui) 
    {
        console.log(event.originalEvent.target);
                 //OR
        console.log(event.originalEvent.originalEvent.explicitOriginalTarget);
    }
}); 
```

# iphone - 在 iphone 应用程序中使用查找表而不将其加载到内存的最佳方法

> ID：15570125
> 
> 赞同：0
> 
> 时间：2013-03-22T12:18:02.153
> 
> 标签：iphone, sqlite, core-data, nsdictionary

我有一个带有大（6-7MB）键值文件的 iphone 应用程序，我想避免加载到内存中。它很少使用，而且似乎没有必要消耗这么多的 RAM。

现在它是一个平面文本文件，格式为

```
KEY VALUE 
```

但我很乐意存储它，但效果最好。

最好的方法是什么？SQLite 是一种选择，但这似乎是一个重量级的解决方案。有人告诉我 coredata 是 SQLite 的一个很好的接口，但在我看来，这仍然需要将整个文件作为 nsdictaionary 加载到内存中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:53:00.757

首先，**SQLite 不是一个“重量级”的解决方案**。它的内存要求很低，而且性能很好。如果您使用 SQLite，您可能需要像 FMDB 或 PLDatabase 这样的包装器，以使其更易于在 Objective-C 中使用。

其次，**Core Data 不是 SQLite 的包装器**。它在内部*使用*SQLite，但这是一个未在 Core Data API 中公开的实现细节。Core Data 可以在这种情况下工作，但如果你用 SQL 风格的术语来考虑它，那么我保证你会搞砸的。

如果您很少使用该表，最简单的方法是将其保存为 JSON 或属性列表，然后按需读取整个内容。只要您在完成后小心卸载它并且您还没有推动内存限制，我就不会担心它。如果您可能会更频繁地到达需要它的地方，请考虑使用 SQLite 或 Core Data——这两种方法都可以让您查找所需的值，而无需将整个内容加载到内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:49:07.603

如果没有将所有密钥加载到内存中，您将如何搜索密钥？

您可以实现自己的索引方案，或者只使用 SQLite（由于其他一些应用程序或服务，其代码可能已经在内存中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:49:41.093

六七 MB 并不大。因此，您可以将其加载到字典中，然后在完成时确保将其删除/取消链接。或者，您可以编写自己的查询并自己读取文件行来扫描密钥。但是 6-7 MB 并不大。

如果您可以控制文件内容，只需使用现有的 Apple 框架将其编写为 a `plist`，然后将其`plist`作为字典读取并进行查询。

# asp.net - 无法从oracle中的游标获取数据

> ID：15570126
> 
> 赞同：0
> 
> 时间：2013-03-22T12:18:03.750
> 
> 标签：asp.net, oracle, plsql, oracle11g

我正在尝试使用 asp.net 从 oracle 数据库中获取数据，但是当数据存在于表中时，我没有在游标中获得任何输出：我正在使用以下存储过程：

```
CREATE OR REPLACE PROCEDURE branch_details
( startIndex in  int
,pageSize    in  int
,isSearch    in  int
,byName      in  int
,dataDetail  in  varchar2
, p_cursor   out sys_refcursor)
AS
BEGIN
    IF isSearch=1 THEN
        IF byName=1 THEN
          OPEN p_cursor FOR
          SELECT *
            FROM (SELECT ROW_NUMBER() OVER(ORDER BY branch_id)
                         AS MyRows
                       , branch_id, branch_name
                       , branch_location, bm_name, bm_contact
                       , bm_email, is_active, max_ua
                       , (SELECT COUNT(branch_id)
                            FROM branch_info
                           WHERE branch_name LIKE
                                 '%'|| dataDetail||'%')
                         AS RowNumber
                    FROM branch_info 
                   WHERE branch_name LIKE '%'|| dataDetail||'%')
           WHERE MyRows BETWEEN startIndex
                                 AND startIndex+pageSize-1;
        ELSE
          OPEN p_cursor FOR
          SELECT *
            FROM (SELECT ROW_NUMBER() OVER(ORDER BY branch_id)
                         AS MyRows
                       , branch_id, branch_name, branch_location
                       , bm_name, bm_contact, bm_email, is_active
                       , max_ua
                       , (SELECT COUNT(branch_id)
                            FROM branch_info
                           WHERE branch_id LIKE
                                 '%'|| dataDetail||'%')
                         As  RowNumber 
                    FROM branch_info 
                   WHERE branch_id LIKE '%'|| dataDetail||'%')
           WHERE MyRows BETWEEN startIndex
                            AND startIndex+pageSize-1;
        END IF;
    ELSE
        OPEN p_cursor FOR
        SELECT *
          FROM (SELECT ROW_NUMBER() OVER(ORDER BY branch_id)
                         AS MyRows
                     , branch_id, branch_name, branch_location
                     , bm_name, bm_contact, bm_email
                     , is_active, max_ua
                     , (SELECT COUNT(branch_id)
                          FROM branch_info) AS RowNumber 
                  FROM branch_info)
         WHERE MyRows BETWEEN startIndex
                          AND startIndex+pageSize-1;
    END IF;
END; 
```

并使用以下 asp.net 代码：

```
List<Paramarray> param = new List<Paramarray>();
    param.Add(new Paramarray("@dataDetail", data));
    param.Add(new Paramarray("@byName", id?"0":"1"));
    param.Add(new Paramarray("@isSearch", isSearch?"1":"0"));
    param.Add(new Paramarray("@startIndex", startIndex==1?startIndex.ToString():Convert.ToString(((startIndex-1)*pageSize)+1)));
    param.Add(new Paramarray("@pageSize", pageSize.ToString()));

    _command.Connection = _connection;
    _command.CommandType = CommandType.StoredProcedure;
    _command.CommandText = "branch_details";
    foreach (Paramarray _param in param)
    {
        _parameter = new OracleParameter(_param.name,_param.value);
        _command.Parameters.Add(_parameter);            
    }

    _command.Parameters.Add("@p_cursor", OracleDbType.RefCursor).Direction = ParameterDirection.Output;
    if (_connection.State != ConnectionState.Open) _connection.Open();
    _dataReader = _command.ExecuteReader();
    dt.Load(_dataReader);
    if (_connection.State == ConnectionState.Open) _connection.Close(); 
```

我的另一个程序的相同代码工作正常并给我输出。

如果我的程序或其他地方有误，请帮助我。我无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:49:07.087

我敢打赌你的程序是错误的。您的 asp.net 代码看起来很好，没有更多信息，在我看来，光标只是没有返回任何数据。

您是否对过程进行了单元测试，甚至只是游标查询？

# php - PHP - 在 $_SESSION[$_REQUEST[]] 变量上检查 isset

> ID：15570129
> 
> 赞同：2
> 
> 时间：2013-03-22T12:18:17.903
> 
> 标签：php

似乎很容易，但无法弄清楚原因：

```
if(!isset($_SESSION[$_REQUEST["form_id"]]))
{
     //do stuff
} 
```

回报

```
Notice: Undefined index: form_id 
```

`empty`返回相同的响应。

这让我发疯了一段时间。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:21:06.603

您正在调用 isset ，`$_SESSION`但由于错误指出问题在于`$_REQUEST['form_id']`未设置。

```
 if (!isset($_REQUEST['form_id']) || !isset($_SESSION[$_REQUEST['form_id']])) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:20:10.373

那是因为它`$_REQUEST['form_id']`首先解决并导致通知。你可以这样做：

```
if (!isset($_REQUEST['form_id']) || !isset($_SESSION[$_REQUEST["form_id"]]))
{
     //do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:21:35.003

请检查密钥是否存在

```
 array_key_exists('form_id', $_REQUEST); 
```

在检查值之前

```
isset($_REQUEST['form_id']); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T12:26:02.070

或检查您的参数是否为空，例如

```
<?php 
if (!empty($_REQUEST['form_id'])) {
  // do anything
}
else
{
  // I can't find the key in array 
}
?> 
```

# zurb-foundation - 如何在 Zurb Foundation 顶部栏中禁用菜单条目

> ID：15570132
> 
> 赞同：0
> 
> 时间：2013-03-22T12:18:32.203
> 
> 标签：zurb-foundation

在 Web 应用程序（= 多用户环境）中，我需要禁用顶部栏中的某些菜单条目，具体取决于当前登录的用户等。为了保持 UI 的一致性，隐藏/省略菜单条目不是一个选项。显然，框架不支持添加 disabled/inactive/whatsoever 类，这是在其他基础元素（例如按钮）上进行的方式。

```
<li><a class="disabled" href="#">Disabled Menu Entry</a></li> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:21:39.860

您的问题与基金会“直接”无关。禁用和/或隐藏元素是 CSS 或 javascript。您不能直接禁用锚标记，但可以模拟它的“禁用行为”。根据您拥有的逻辑，您将如何确定是否应禁用锚标记，您可以执行以下操作：

```
<style>
.disabled-link {
    text-decoration:none; // really not needed for the Top Bar, just for general technique
    cursor: auto;
}
</style>
<script>
$(document).ready(function(){
    $(".disabled-link").click(function(e){
        e.preventDefault();
        return false;
    });
});
</script>
<a class="disabled-link" href="#">Disabled Menu Entry</a> 
```

请注意，`disabled-link`应根据某些逻辑在此处应用该类，这取决于您的服务器端代码-您没有告诉我们您使用了哪些其他工具。如果您使用的是 ASP.Net、PHP 或其他。

此外，您应该记住在服务器上进行验证，因为无法阻止您的用户规避链接的禁用行为。

# android - 以最少的努力加载大图像

> ID：15570135
> 
> 赞同：1
> 
> 时间：2013-03-22T12:18:45.280
> 
> 标签：android, listview, optimization

我的服务器中有高质量、丰富的彩色图像。我`ListView`在小的 ImageViews 中显示它们。用户选择项目后，他将获得所选图像的全屏。以这种方式选择图像后，图像会快速加载，因为它已经加载并且我将它们保存在缓存中。

问题是第一次启动时整个列表加载速度很慢，因为每个项目都需要下载。有什么办法可以减少图像加载`ListView`？在我看来，`ListView`加载速度应该很快，并且在选择后图像可能会加载更长的时间。我知道我可以通过将低质量、调整大小的图像从服务器传递到列表来优化这一点。并在选择通过高质量的图像网址后。但这是一项非常艰巨的工作，因为我有大量图像，并且调整每个图像的大小会很痛苦。

任何想法我怎么能优化这个甚至一点点？

**更新**：我想我的问题还不够清楚。ListView 或图像加载没有问题。我不会将用户挂在某个“加载”屏幕上，我会异步加载图像，并且我确实表示正在为 ListView 中的每个项目加载图像。但是由于互联网连接缓慢，缩略图会在那里停留太久，我认为用户会退出应用程序......我正在寻找一种优化加载过程的方法。加载刚刚调整大小的图像会很棒，例如：50kb 用于 ListView 和 fullsize 用于 SelectedView。我认为这样用户体验会好很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:24:42.583

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。Universal Image Loader 是异步的，使用缓存，是 LazyLoading 的改进版本。

您可以将图像缓存在内存或磁盘中。您还可以提供自定义文件夹来缓存图像。Universal Image Loader 还为您提供其他配置选项。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。你也可以使用延迟加载。

为了提高性能和平滑滚动，请使用 ViewHolder。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。关于 Listview 的 View Holder 的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:23:09.253

您可以使用[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)。它使您能够在后台线程上下载图像。基本上，您`ListView`使用一些默认缩略图显示，当下载每个图像时，UIL 会用真实图像替换缩略图。

这样，用户在下载图像时就不会被困住，但显示所有缩略图肯定需要下载所有大图像，直到您开始为图像提供小变体。

# android - 试图避免 Grow heap (frag case)

> ID：15570136
> 
> 赞同：2
> 
> 时间：2013-03-22T12:18:51.457
> 
> 标签：android, android-viewpager

我有一个 ViewPager，pageOffscreenPageLimit 设置为 1（总共 3 页）。我用它为每页显示 4 个位图。位图是异步加载的、按比例缩小的，所有这些都是为了避免 OutOfMemory 异常。由于 GC，我注意到一些“摊位”滚动页面，这里有一些日志：

```
03-22 13:05:06.320: V/test(11448): onPageSelected(2)
03-22 13:05:06.840: V/test(11448): destroyItem(0)
03-22 13:05:06.850: V/test(11448): instantiateItem(3)
03-22 13:05:06.900: D/dalvikvm(11448): GC_FOR_ALLOC freed 4578K, 29% free 15567K/21703K, paused 24ms
03-22 13:05:06.900: I/dalvikvm-heap(11448): Grow heap (frag case) to 18.265MB for 3128360-byte allocation
03-22 13:05:06.930: D/dalvikvm(11448): GC_FOR_ALLOC freed <1K, 15% free 18622K/21703K, paused 27ms
03-22 13:05:06.990: D/dalvikvm(11448): GC_CONCURRENT freed 49K, 15% free 18636K/21703K, paused 1ms+4ms
03-22 13:05:07.060: D/dalvikvm(11448): GC_FOR_ALLOC freed 3221K, 25% free 16298K/21703K, paused 21ms
03-22 13:05:07.060: I/dalvikvm-heap(11448): Grow heap (frag case) to 18.979MB for 3128360-byte allocation
03-22 13:05:07.100: D/dalvikvm(11448): GC_CONCURRENT freed <1K, 11% free 19353K/21703K, paused 1ms+3ms
03-22 13:05:07.170: D/dalvikvm(11448): GC_FOR_ALLOC freed 3130K, 22% free 17026K/21703K, paused 20ms
03-22 13:05:07.170: I/dalvikvm-heap(11448): Grow heap (frag case) to 19.694MB for 3131424-byte allocation
03-22 13:05:07.210: D/dalvikvm(11448): GC_CONCURRENT freed <1K, 8% free 20084K/21703K, paused 1ms+3ms
03-22 13:05:07.240: V/test(11448): onPageSelected(3)
03-22 13:05:07.270: D/dalvikvm(11448): GC_FOR_ALLOC freed 42K, 8% free 20053K/21703K, paused 22ms
03-22 13:05:07.270: I/dalvikvm-heap(11448): Grow heap (frag case) to 20.359MB for 729656-byte allocation
03-22 13:05:07.290: D/dalvikvm(11448): GC_FOR_ALLOC freed <1K, 8% free 20765K/22471K, paused 20ms
03-22 13:05:07.320: D/dalvikvm(11448): GC_FOR_ALLOC freed 3094K, 22% free 17739K/22471K, paused 19ms
03-22 13:05:07.330: I/dalvikvm-heap(11448): Grow heap (frag case) to 20.386MB for 3128360-byte allocation
03-22 13:05:07.350: D/dalvikvm(11448): GC_FOR_ALLOC freed <1K, 8% free 20793K/22471K, paused 20ms
03-22 13:05:07.390: D/dalvikvm(11448): GC_CONCURRENT freed 2K, 8% free 20799K/22471K, paused 1ms+3ms
03-22 13:05:07.490: D/dalvikvm(11448): GC_FOR_ALLOC freed 38K, 8% free 20772K/22471K, paused 27ms
03-22 13:05:07.490: I/dalvikvm-heap(11448): Grow heap (frag case) to 21.061MB for 729656-byte allocation
03-22 13:05:07.520: D/dalvikvm(11448): GC_FOR_ALLOC freed <1K, 8% free 21484K/23239K, paused 21ms
03-22 13:05:07.760: V/test(11448): destroyItem(1)
03-22 13:05:07.760: V/test(11448): instantiateItem(4)
03-22 13:05:07.820: D/dalvikvm(11448): GC_FOR_ALLOC freed 6063K, 34% free 15558K/23239K, paused 24ms
03-22 13:05:07.820: I/dalvikvm-heap(11448): Grow heap (frag case) to 18.526MB for 3411216-byte allocation
03-22 13:05:07.850: D/dalvikvm(11448): GC_FOR_ALLOC freed 19K, 19% free 18869K/23239K, paused 19ms
03-22 13:05:07.900: D/dalvikvm(11448): GC_CONCURRENT freed 6K, 19% free 18908K/23239K, paused 1ms+4ms
03-22 13:05:07.960: D/dalvikvm(11448): GC_FOR_ALLOC freed 3463K, 30% free 16334K/23239K, paused 20ms
03-22 13:05:07.960: I/dalvikvm-heap(11448): Grow heap (frag case) to 19.284MB for 3411216-byte allocation
03-22 13:05:07.980: D/dalvikvm(11448): GC_FOR_ALLOC freed 0K, 16% free 19665K/23239K, paused 21ms
03-22 13:05:08.030: D/dalvikvm(11448): GC_CONCURRENT freed 5K, 16% free 19674K/23239K, paused 1ms+3ms
03-22 13:05:08.100: D/dalvikvm(11448): GC_FOR_ALLOC freed 3433K, 27% free 17033K/23239K, paused 22ms
03-22 13:05:08.100: I/dalvikvm-heap(11448): Grow heap (frag case) to 19.966MB for 3411216-byte allocation
03-22 13:05:08.140: D/dalvikvm(11448): GC_CONCURRENT freed <1K, 13% free 20363K/23239K, paused 2ms+3ms
03-22 13:05:08.220: D/dalvikvm(11448): GC_FOR_ALLOC freed 3407K, 24% free 17749K/23239K, paused 19ms
03-22 13:05:08.220: I/dalvikvm-heap(11448): Grow heap (frag case) to 20.666MB for 3411216-byte allocation
03-22 13:05:08.260: D/dalvikvm(11448): GC_CONCURRENT freed 1K, 10% free 21079K/23239K, paused 1ms+4ms 
```

堆大小保持在 24Mb 并且不会增长。此外，在destroyItem 中，我尝试释放ImageView，将drawables 和回调设置为null。我可以提高性能还是这是正常行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T05:52:26.677

**考虑到您正在使用Viewpager 和 Imageviews，**我想您有两个选择

 ****关于图像视图**尝试使用强大的Android图像下载和缓存库，如**Picasso**，最新的**Volley** Imageloading（对大尺寸图像非常有帮助）以有效的方式提高图像加载能力。

**关于 Viewpager**你必须使用高效的适配器**FragmentStatePagerAdapter**：这个版本的分页器在有大量页面时更有用，更像是一个列表视图。当页面对用户不可见时，它们的整个片段可能会被销毁，只保留该片段的已保存状态。与 FragmentPagerAdapter 相比，这允许分页器保留与每个访问的页面相关联的内存少得多，但代价是在页面之间切换时可能会产生更多开销。

请在使用 FragmentPagerAdapter 之前考虑一下，因为它将整个片段存储在内存中，如果在 ViewPager 中使用大量片段，可能会增加内存开销。相反，它的兄弟，FragmentStatePagerAdapter 只存储片段的 savedInstanceState，并在失去焦点时销毁所有片段。因此，当我们必须使用动态片段时应该使用 FragmentStatePagerAdapter，例如带有小部件的片段，因为它们的数据可以存储在 savedInstanceState 中。即使有大量碎片也不会影响性能。相反，当我们需要将整个片段存储在内存中时，应该使用它的兄弟 FragmentPagerAdapter。当我说整个片段保存在内存中时，这意味着它的实例不会被破坏并且会产生内存开销。因此，建议仅在 ViewPager 的片段数量较少时使用 FragmentPagerAdapter。如果片段是静态的会更好，因为它们不会有大量对象的实例将被存储。希望这可以消除 Android FragmentPagerAdapter 和 FragmentStatePagerAdapter 之间的区别。

尝试学习[Google](https://android.googlesource.com/platform/packages/apps/Gallery.git) android [Gallary](https://github.com/CyanogenMod/android_packages_apps_Gallery)应用示例，使用图像视图加载动画来打造出色的用户体验。

我希望这能解决你的堆增长问题。

致谢：[FragmentPagerAdapter 与 FragmentStatePagerAdapter](http://www.truiton.com/2013/06/android-fragmentpageradapter-vs-fragmentstatepageradapter/)**

# asp.net - 在下拉列表中显示现有值

> ID：15570137
> 
> 赞同：1
> 
> 时间：2013-03-22T12:18:53.360
> 
> 标签：asp.net, razor, webmatrix

我有一个 webgrid，它已经显示了我的数据库中的值。当用户单击进行编辑时，我希望将字段状态之一显示为下拉列表。下面是我的代码：

```
@{
var db = Database.Open("doctors"); 

var statusResults = db.Query("SELECT Distinct Status FROM cpd_certificates")
                    .Select(category => new SelectListItem {
                     Text = category.Status
                     }); 

    }
  //html code
         <div class="row">
             <span class="label"><label for="status"> Status:</label></span>
             @Html.DropDownList("Status",null, statusResults )
           </div> 
```

我的下拉列表出现，但我希望现有值显示用户现在可以更改的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:00:14.743

久经考验：有关更多教程，请参阅此站点[http://www.mikesdotnetting.com/Article/176/WebMatrix-and-jQuery-Forms-Part-2-Editing-Data](http://www.mikesdotnetting.com/Article/176/WebMatrix-and-jQuery-Forms-Part-2-Editing-Data)

```
@{
var db = Database.Open("doctors"); 

var stat = db.Query("SELECT Distinct Status FROM cpd_certificates");

   }
     <div class="row">

     <select name="status" id="edit-status">
                <option value="">-- Select Status --</option>
            @{
                foreach(var statusResult in stat) {
                     <option value="@statusResult.Status" 
                 selected="selected">@statusResult.Status</option>
                }
            }
            </select>

      </div> 
```

# javascript - 已触发 window.onload 事件

> ID：15570139
> 
> 赞同：7
> 
> 时间：2013-03-22T12:18:57.557
> 
> 标签：javascript, onload, addeventlistener

我有一个小的 javascript 工具，它可能会被预加载、延迟加载或按需加载。当它启动时，它会向 DOM 添加一些东西。它是低优先级的，如果它是预加载的，它可以在运行之前等待 onload 事件触发，但如果它是延迟加载的，它可以继续并立即运行。

目前它正在检查页脚元素的 ID 是否存在，以确定是否应该将事件侦听器添加到窗口 onload 事件或只是运行。例如

```
if ( document.getElementById("footer") ){
   Init()
} else {
   if (window.addEventListener){...}
   else if (window.attachEvent){...}
} 
```

虽然目前正在工作，但这显然是一个非常糟糕的解决方案。任何非 jQuery 相关的改进建议都非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T12:24:07.927

你应该使用`document.readyState`属性：

```
if (document.readyState === 'complete') {
   //do stuff
} 
```

# node.js - 函数内nodejs中的变量范围

> ID：15570142
> 
> 赞同：1
> 
> 时间：2013-03-22T12:19:02.643
> 
> 标签：node.js, variables, scope

如何范围 datat ？这里 datat 是空的。我想把数据放在一个var中，这样我就可以在函数之外使用它。

```
var datat;
twit.search('#louieck', {include_entities:true,page:paget,maxid:maxidt}, function(data) {

// and output to the console:

datat =  data;

});
sys.puts(sys.inspect(datat)); 
```

问候

比西埃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:35:18.920

'datat' 的范围在您的函数之外。twit.search 是异步的，因此在您使用 sys.inspect 检查“datat”之前可能不会返回“data”。

这应该让您看到数据：

```
var datat;
twit.search('#louieck', {include_entities:true,page:paget,maxid:maxidt}, function(data) {

    // and output to the console:
    datat =  data;
    sys.puts(sys.inspect(datat));

}); 
```

但理想情况下，你会使用这样的回调......

```
var datat;
var callback = function(d){
    sys.puts(sys.inspect(d));

    datat = d;
    // do something more with datat

};

twit.search('#louieck', {include_entities:true,page:paget,maxid:maxidt}, function(data) {

    callback(data);

}); 
```

**编辑**- 根据评论简化...

```
var datat;
var callback = function(d){
  sys.puts(sys.inspect(d));
  datat = d;
  // do something more with datat
};
twit.search('#louieck', {include_entities:true,page:paget,maxid:maxidt},callback(data)); 
```

# c# - System.Web.Cache 和 HttpRuntime.Cache 内存位置

> ID：15570144
> 
> 赞同：0
> 
> 时间：2013-03-22T12:19:05.500
> 
> 标签：c#, caching

我有一个 WCF 服务，它使用 HttpRuntime.Cache 存储客户列表 60 分钟

如果您运行以下内容，为什么字符串在第 3 次包含“string3”

```
 string mykey = "mykey-1";
    List<string> strings = null;

    strings = HttpRuntime.Cache[mykey] as List<string>;

    if (strings == null)
    {
        strings = new List<string>();
        strings.Add("string1");
        strings.Add("string2");
        HttpRuntime.Cache[mykey] = strings;
    }
    else
    {
        strings.Add("string3");
    } 
```

我希望：

第一轮：字符串对象为空，因此添加了“string1”和“string2”并将其缓存

第二轮：从缓存中拉出字符串，并添加了“string3”

第三轮：字符串从缓存中拉出，但在你再次添加'string3'之前它已经得到它。

它是共享内存还是应用程序池中的东西。如果您将其从缓存中拉出然后更改它，它会更改缓存版本而无需重新添加它。

如果我再次运行代码，我会得到另一个'string3'等

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:46:13.867

该类`List<string>`是引用类型。这意味着您可以拥有多个引用同一实例的变量。如果您使用其中一个变量更改某些内容，则这些更改也将通过其他变量可见，因为它们实际上都引用了相同的对象/实例。

在您的示例中，在第一个请求中，您创建一个新实例`List<string>`，向其中添加一些字符串，然后将其添加到缓存中。因此，在第一次请求之后，该`HttpRuntime.Cache`对象将持有对`List<string>`所创建实例的引用。

在第二个请求中，您将对此实例的引用分配给`List<string`变量`strings`。`strings`然后引用在第一个请求中创建的实例也是如此。并且`HttpRuntime.Cache`仍然持有对同一实例的引用。然后再向列表中添加一个字符串。的一个实例`List<string>`在内存中更新以包含新字符串。

在第三次运行时，您再次将同一实例的引用复制到`strings`变量中。这仍然引用在第一个请求中创建并随后在第二个请求中修改的完全相同的实例。因此，在第三个请求中，它已经包含该`string3`值。由于 a`List<string>`可以愉快地包含多个具有相同值的项目，因此第三个请求会将另一个具有 value 的项目添加到列表中`string3`。等等之后的进一步请求。

你写了

> 它是共享内存还是应用程序池中的东西。如果您将其从缓存中拉出然后更改它，它会更改缓存版本而无需重新添加它。

当你这样做时，你并`strings = HttpRuntime.Cache[mykey] as List<string>;`没有真正把它从缓存中拉出来。相反，您正在创建对缓存中已引用的内容的引用。

所以答案是肯定的，通过本地引用（=`strings`变量）所做的更改被“存储”在缓存中而无需重新添加。

# sql - SQL - 使用加入/拥有/子查询进行查询 - 如何

> ID：15570146
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:19:15.177
> 
> 标签：sql, join, vbscript

请建议一个 sql 查询来获取

“如果学生在多个科目中得分相同，则学生和相应科目的学生名单相同”

例如。

```
Student Subject Score
John    Science 80
John    Maths   80
John    English 80
John    French  80
Peter   Science 85
Peter   Maths   70
Peter   English 70
Peter   French  70
Mathews French  70

Expected Result :
John    Science
John    Maths
John    English
John    French
Peter   Maths
Peter   English
Peter   French 
```

试过了——

```
select person , subject where person in 
( select person , score , count(score) group by person , score having count(score) > 1 ) 
```

但是在这个“彼得科学”中出现了，这不是必需的。

请协助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:37:00.597

尝试：

```
select person , subject 
from table t
  join 
     ( select person , score , count(score) 
       from table
       group by person , score having count(score) > 1 
     ) foo
       on t.person = foo.person
 where t.person = foo.person 
   and t.score = foo.score 
```

您的查询不起作用的原因（除了不包括表格）：您的内部查询正在选择符合您条件的学生和分数。但是您的外部查询是为所有符合条件的学生选择*所有内容*，这就是包含“彼得科学”的原因。因此，您需要将外部查询中的结果限制为仅与您的所有条件匹配的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:58:37.617

您可以实现此目标自联接表，例如：

```
SELECT
  t.Student,
  t.Subject,
  t.Score
FROM Table1 AS t
  JOIN 
    (
        SELECT Student, Score FROM Table1 GROUP BY Student, Score HAVING COUNT(*) > 1
    ) AS t1 ON t.Student = t1.Student AND t.Score = t1.Score 
```

您可以在此处找到包含测试数据和创建表的完整示例：

[http://sqlfiddle.com/#!2/61f02/8](http://sqlfiddle.com/#!2/61f02/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:33:14.293

您应该告诉我们您使用的是什么 RDBMS。但这应该适用于任何地方：

```
select 
    t.*
from <tableName> t
join (
    select
        student, score
    from <tableName>
    group by 
        student, score
    having count(*)>1 
) x
on  t.student=x.student
and t.score=x.score 
```

顺便说一句`FROM <tableName>`，您的查询中缺少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:38:43.530

试试这个：

```
select student, subject
from Person 
where student + cast(score as varchar(20)) in 
(   
    select student + cast(score as varchar(20)) from Person group by student,score having count(score) > 1 
) 
```

# vagrant - Vagrant、NFS、80 端口和 sudo

> ID：15570148
> 
> 赞同：2
> 
> 时间：2013-03-22T12:19:16.343
> 
> 标签：vagrant

我有一个非常想使用 NFS 在端口 80 上启动的 Vagrant 环境。前者是因为它是 Drupal 并且非标准端口会引起一些胃灼热，而后者纯粹是为了性能。为此，据我所知，我需要使用`sudo`. 没问题，`sudo vagrant up`是的。

我遇到的问题是应用程序生成文件，大概是因为虚拟机是在 下站起来的`sudo`，这些文件归`root`主机系统（OS X）所有，所以当应用程序尝试将文件写入服务器时，权限被拒绝。

我更改了我的 Vagrant 文件以将整个项目目录设置为`777`. 只是为了披露，以下是我的相关（和非标准）片段`Vagrantfile`：

```
config.vm.network :hostonly, "192.168.33.10"
config.vm.forward_port 80, 80
# config.vm.share_folder( "v-root", "/vagrant", ".", :nfs => (RUBY_PLATFORM =~ /mingw32/).nil?, :extra => 'dmode=777,fmode=777' )
config.vm.share_folder( "v-root", "/vagrant", ".", :extra => 'dmode=777,fmode=777' )
config.vm.customize ["setextradata", :id, "VBoxInternal2/SharedFoldersEnableSymlinksCreate/v-root", "1"]
Vagrant::Config.run do |config|
  config.vm.provision :shell, :path => "provision.vm.sh"
end 
```

这是我看到的情况：

*   当我从存储库的干净克隆启动时，没有问题。耶。
    *   但是，我确实注意到`/vagrant`，当从 VM 本身查看时， 的内容并没有被赋予完整的权限 ( `777`)。在这些变化之前就是这种情况。
*   *当我在停止*虚拟机 后启动时......
    *   无法写入生成的文件。
    *   中的文件`/vagrant`（同样，当从 VM 中查看时）归`dialout`用户所有。这似乎是 NFS 的事情，所以只要我能让第一个项目工作就没有问题。

**更新**

看起来问题可能是我对 NFS 工作原理的理解。我需要尝试纠正这一点，但如果我只是删除 NFS 组件（现在在上面的片段中进行了评论和替换），事情似乎更有用。仍然很想知道其他人是否/如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T10:19:07.447

而不是做`sudo vagrant up`- 这并不理想 - 我正在做以下事情：

```
if Vagrant::Util::Platform.windows?
    config.vm.network :forwarded_port, host: 80, guest: 8080
elsif Vagrant::Util::Platform.darwin?
    config.vm.network :forwarded_port, host: 8080, guest: 80
    config.vm.network :forwarded_port, host: 8443, guest: 443
    config.trigger.after [:provision, :up, :reload] do
      puts " ==> Sudo Password (to forward ports) "
      system('echo "
    rdr pass on lo0 inet proto tcp from any to 127.0.0.1 port 80 -> 127.0.0.1 port 8080  
    rdr pass on lo0 inet proto tcp from any to 127.0.0.1 port 443 -> 127.0.0.1 port 8443  
    " | sudo pfctl -f - > /dev/null 2>&1; echo "==> Fowarding Ports: 80 -> 8080, 443 -> 8443"')  
    end
else
    config.vm.network :forwarded_port, host: 8080, guest: 80
    config.vm.network :forwarded_port, host: 8443, guest: 443
    puts " ==> Sudo Password (to forward ports) "
    system("sudo ipfw add 100 fwd 127.0.0.1,8080 tcp from any to me 80;
    sudo ipfw add 101 fwd 127.0.0.1,8443 tcp from any to me 443")
end

if Vagrant::Util::Platform.darwin?
    config.trigger.after [:halt, :destroy] do
        system("sudo pfctl -f /etc/pf.conf > /dev/null 2>&1; echo '==> Removing Port Forwarding'")
    end
end 
```

（其中的 linux 节不如 OS X（“darwin”）节简洁，后者删除了转发的端口`vagrant halt`）

这样做是在主机上设置端口 8080（和 8443）转发到客户机上的 80，然后使用 sudo 将主机上的端口 80 转发到主机上的端口 8080。

这意味着只有 80 端口的转发是以 root 身份完成的，而不是整个 vagrant 进程，这通常让我更开心。

注意：如果 Skype 将自身绑定到端口 80 和 443，这在台式机上仍然会失败，默认情况下会这样做。

# hibernate3 - 休眠测试项目不工作

> ID：15570151
> 
> 赞同：0
> 
> 时间：2013-03-22T12:19:22.787
> 
> 标签：hibernate3

我正在尝试使用hibernate 3进行练习。我有这个错误。

```
Exception in thread "main" org.hibernate.MappingException: Error reading resource: test/Reservation.hbm.xml
at org.hibernate.cfg.Configuration.addResource(Configuration.java:452)
at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1263)
at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1235)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1217)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1184)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1112)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1098)
at HibTestMain.main(HibTestMain.java:16)
Caused by: org.hibernate.MappingException: invalid mapping
at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:399)
at org.hibernate.cfg.Configuration.addResource(Configuration.java:449)
... 7 more
Caused by: org.xml.sax.SAXParseException: The content of element type "version"     must     match "(meta)*".
at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
at org.apache.xerces.impl.dtd.XMLDTDValidator.handleEndElement(Unknown Source)
at org.apache.xerces.impl.dtd.XMLDTDValidator.endElement(Unknown Source)
at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
at org.dom4j.io.SAXReader.read(SAXReader.java:465)
at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:398)
... 8 more 
```

这是我的 hbm 文件。

```
<hibernate-mapping package="org.azureworlds.dao">
 <class name="Reservation" table="reservation">
  <id name="id" type="integer">
   <column name="ID"/>
   <generator class="native"/>
  </id>
  <version  name="version" type="integer">
            <column name="VERSION" />
  </version>
  <property generated="never" lazy="false" name="creationTime" type="timestamp">
   <column length="0" name="CREATION_TIME" not-null="true"/>
  </property>
 </class>
</hibernate-mapping> 
```

我究竟做错了什么。似乎问题出在版本标签上。我尝试了不同的东西，但在静脉中。

bean 和 hbm 文件由 MyEclipse Persistence Tools 生成

如果需要，将提供更多信息。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:27:12.627

改变

```
<version  name="version" type="integer">
        <column name="VERSION" /> 
```

至

```
<version column="VERSION" name="version" type="integer" /> 
```

# c++ - atof 和非空终止字符数组

> ID：15570154
> 
> 赞同：3
> 
> 时间：2013-03-22T12:19:33.180
> 
> 标签：c++, c, atof

```
using namespace std;
int main(int argc, char *argv[]) {
    char c[] = {'0','.','5'};
    //char c[] = "0.5";
    float f = atof(c);
    cout << f*10;
    if(c[3] != '\0')
    {
        cout << "YES";
    }
} 
```

输出：`5YES`

atof 是否也适用于非空终止字符数组？如果是这样，它怎么知道在哪里停下来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:21:12.670

> atof 是否也适用于非空终止字符数组？

**不，它没有**。[`std::atof`](http://en.cppreference.com/w/cpp/string/byte/atof)在输入中需要一个以 null 结尾的字符串。未能满足此先决条件是**Undefined Behavior**。

未定义的行为意味着*任何事情都*可能发生，包括程序似乎运行良好。这里发生的情况是，您偶然在数组的最后一个元素之后在内存中有一个字节，该字节不能被解释为浮点数表示的一部分，这就是您的实现`std::atof`停止的原因。但这是不能依赖的。

你应该这样修复你的程序：

```
char c[] = {'0', '.', '5', '\0'};
//                         ^^^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:21:38.240

不，`atof`不适用于非空终止数组：只要在您传入的数组末尾发现零时，它就会停止。传递没有终止的数组是未定义的行为，因为它会导致函数读取超出数组的末尾大批。在您的示例中，该函数可能已经访问了您分配给的字节`f`（尽管那里不确定，因为`f`不需要`c[]`在内存中跟随）。

```
char c[] = {'0','.','5'};
char d[] = {'6','7','8'};
float f = atof(c); // << Undefined behavior!!!
float g = atof(d); // << Undefined behavior!!!
cout << f*10; 
```

上面的[prints](http://ideone.com/ScqDla) `5.678`指出了已经读取到数组末尾的事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:26:21.067

不... atof() 需要一个以空字符结尾的字符串。

如果您需要转换的字符串不是以 null 结尾的，则可以尝试根据每个 char 的值是有效数字将其复制到目标缓冲区中。有什么影响...

```
char buff[64] = { 0 };

for( int i = 0; i < sizeof( buff )-1; i++ )
{
    char input = input_string[i];

    if( isdigit( input ) || input == '-' || input == '.' )
        buff[i] = input;
    else
        break;
}

double result = atof( buff ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:47:18.627

std::string 已经用 NULL 终止了一个字符串！

那为什么不

```
std::string number = "7.6";
double temp = ::atof(number.c_str()); 
```

您也可以使用 stringstream 或 boost::lexical_cast

[http://www.boost.org/doc/libs/1_53_0/doc/html/boost_lexical_cast.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_lexical_cast.html) [http://www.cplusplus.com/reference/sstream/stringstream/](http://www.cplusplus.com/reference/sstream/stringstream/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:21:35.253

从`atof()`MSDN 上对函数的描述（可能适用于其他编译器）：

> 该函数在它无法识别为数字的一部分的第一个字符处停止读取输入字符串。此字符可能是终止字符串的空字符（'\0' 或 L'\0'）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:22:36.133

它必须以 0 结尾，或者文本必须包含不属于该数字的字符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-01T09:57:42.080

从 C++11 开始，我们有`std::stof`. 通过替换`atof`为`std::stof`，它会更容易处理。

如果您总是传递已知大小的 char 数组，我制作了一个方便的包装器。

[现场演示](https://godbolt.org/z/G9srqbo5d)

```
#include <fmt/core.h>
#include <type_traits>
#include <iostream>

// SFINAE fallback  
template<typename T, typename =
    std::enable_if< std::is_pointer<T>::value >
>
float charArrayToFloat(const T arr){  // Fall back for user friendly compiler errors
    static_assert(false == std::is_pointer<T>::value, "`charArrayToFloat()` dosen't allow conversion from pointer!");
    return -1;
}

// Valid for both null or non-null-terminated char array
template<size_t sz>
float charArrayToFloat(const char(&arr)[sz]){
    // It doesn't matter whether it's null terminated or not
    std::string str(arr, sz);
    return std::stof(str);
}

int main() {
    char number[4] = {'0','.','4','2'};
    float ret = charArrayToFloat(number);
    fmt::print("The answer is {}. ", ret);
    return 0;
} 
```

输出：`The answer is 0.42\.`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-01T10:44:14.457

> atof 是否也适用于非空终止字符数组？

不，此函数[需要](https://en.cppreference.com/w/cpp/string/byte/atof#Parameters)一个指向*空终止*字符串的指针。不这样做，例如通过将指针传递给非空终止字符串（或非空终止字符数组）是**未定义的行为**。

> **未定义的行为**意味着任何事情¹都可能发生*，包括但不限于*给出预期输出的程序。但**永远不要依赖**（或基于）具有未定义行为的程序的输出。

所以你看到的输出（也许看到）是未定义行为的结果。正如我所说**，不要依赖**具有 UB 的程序的输出。该程序可能会崩溃。

因此，使程序正确的第一步是删除 UB。**只有这样，**您才能开始推理程序的输出。

* * *

^(¹有关未定义行为的更技术上准确的定义，请参见[此处](https://en.cppreference.com/w/cpp/language/ub)提到：**对程序的行为没有限制**。)

# mysql - 具有多个全文索引的Mysql全文搜索

> ID：15570155
> 
> 赞同：2
> 
> 时间：2013-03-22T12:19:33.463
> 
> 标签：mysql, search, full-text-search

我有这个带有这两个全文索引的 mysql 表：

```
ALTER TABLE `tbl` ADD FULLTEXT `fulltext_idx` (`name`, `label`);
ALTER TABLE `tbl` ADD FULLTEXT `fulltext_idx2` (`keywords`, `title`); 
```

如何通过匹配两个索引中的单词对表 tbl 执行全文搜索？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:21:37.950

要使`FullText`搜索工作，您的数据库`Table`引擎必须是`MyIsam`.

**句法**

```
SELECT * FROM tbl
    WHERE MATCH (name) AGAINST ('label') AND
     MATCH (keywords) AGAINST ('title'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-08T10:59:35.267

我有一个 innodb 并且想要类似的东西，我通过将它们全部插入同一个全文索引来解决：

```
ALTER TABLE `tbl` ADD FULLTEXT `fulltext_idxAll` (`name`, `label`,`keywords`,`title`); 
```

```
SELECT * FROM tbl WHERE MATCH (`name`, `label`,`keywords`,`title`) AGAINST ('whatever') 
```

我的查询有点复杂，但这应该可以，让我知道它是否适合您。

# qt - Qt焦点改变顺序

> ID：15570156
> 
> 赞同：3
> 
> 时间：2013-03-22T12:19:35.013
> 
> 标签：qt, focus

例如，我们有一个带有一定数量 lineEdits 的 groupbox。
当用户从一行按 Tab 焦点时，编辑更改为其他。
如何按特定顺序改变焦点？
在我的 Dialog 中，焦点以一种非常奇怪的方式发生了变化。
例如光标以这种方式跳转 1 3 2 4 lineEdits。我想让它跳跃 1 2 3 4 lineEdits
我认为顺序是这样的，因为我按这样的顺序添加了这一行编辑......但是重新制作所有 GUI 对我来说不是一个解决方案......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T12:30:02.617

在设计器中，您应该选择 Edit->Edit Tab Order（将出现蓝色数字）。比你按你想要的顺序点击你的小部件（数字会改变）。完成后，您应该选择 Edit->Edit Widgets（或按 F3）。

如果您不使用设计器，请使用：

```
void QWidget::setTabOrder ( QWidget *first, QWidget *second ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-27T01:09:36.220

Qt Designer：编辑->编辑标签顺序

[![在此处输入图像描述](../Images/251f4cfe53bcb839a7dc2c5c2acdb423.png)](https://i.stack.imgur.com/3cdeG.png)

# c# - 在gridview中查询数据

> ID：15570162
> 
> 赞同：0
> 
> 时间：2013-03-22T12:19:45.653
> 
> 标签：c#, .net, gridview

我正在用 C# 开发 Windows 应用程序。

我有一个 gridview，里面有大约 40k 条记录。

在那个gridview我有复选框。

我只想更新那些被检查的记录。

我已经为它编写了以下代码>>

```
for (int i = 0; i < gvTradeFile.Rows.Count; i++)
            {

                try
                {
                    DataGridViewCell cell = gvTradeFile.Rows[i].Cells[0];
                    bool check = (bool)cell.Value;

                    if (check)
                    {
                        try
                        {
                            con.Open();
                            cmd = new SqlCommand("update tradeFile set Party_Code='" + txtTransferPartyCode.Text + "' where Party_Code='" + gvTradeFile.Rows[i].Cells[1].Value.ToString() + "' and TradeNo='" + gvTradeFile.Rows[i].Cells[6].Value.ToString() + "' and Sauda_Date='" + gvTradeFile.Rows[i].Cells[13].Value.ToString() + "' and OrderNo='" + gvTradeFile.Rows[i].Cells[14].Value.ToString() + "'", con);
                            cmd.ExecuteNonQuery();
                            con.Close();
                        }
                        catch (Exception ex)
                        {
                            MessageBox.Show(ex.Message);
                        }
                        finally
                        {
                            con.Close();
                        }
                    }

                }
                catch (Exception ex)
                {
                }
            } 
```

在此，如果我们查看`for loop`i 正在处理网格中的每一行。

是否有任何特定技术可以让我在 for 循环中直接仅使用选中的行[通过网格中的复选框]？

上面的代码工作正常，但由于检查了每一行，exe 被挂起。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:28:34.087

我不太确定，但我认为您无法获得任何返回已检查行的 gridview 函数。

但是，您*可以*通过记录选中 gridview 复选框的哪一行来手动执行此操作。比根据您维护的列表更新您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:35:04.887

我认为在复选框 chek 事件中，如果选中复选框，您应该维护一个数据表或字典，然后批量更新数据库。你可以谷歌批量更新

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:52:31.717

我可以想到2个选项。

1.  您可以将保存粘贴到新线程上，然后让您的同事/客户假设它已保存或显示“保存”图形。

2.  一次将整个事物拆分为 1000 条记录。这样，您只显示前 1k，编辑，保存。然后显示下一个 1k，编辑，保存！这将减少开销。

# iphone - 2 个开发人员可以提供临时分发版本吗？

> ID：15570163
> 
> 赞同：-2
> 
> 时间：2013-03-22T12:19:47.457
> 
> 标签：iphone, build, provisioning-profile, ad-hoc-distribution

我们的 iPhone 团队是 3.每个人都有开发者证书，可以从设备调试。但是只有一个帐户有权为 Adhoc 分发构建。那么，我们可以为所有三个提供 3 个分布配置文件吗？因此，任何人都可以使用那里的配置文件构建 Adhoc 分发。（不是通过将一个帐户导出到所有人）。如果是，请提供步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:26:41.010

你们在 Apple 的开发者门户网站上需要一个通用帐户。（你可能有更多，但你需要分享一个）那是拥有你的应用程序 ID 的那个。你们三个人都应该在那个开发者帐户中拥有团队帐户。第一个，默认管理员，将邀请其他人。

然后，你们每个人都将完成签名认证过程。（从您的 Mac 发出 CSR 开始）除了通常的过程之外，如果我没记错的话，管理员还必须批准个人的证书。但是，Apple 的开发人员配置门户将引导您完成。

然后您需要将所有签名证书包含到分发配置文件中（只需单击复选框），重新发布并下载配置文件。你们每个人都将该配置文件加载到他的 xcode 的管理器中，并且每个人都使用他的 onw 凭据签署他的代码。

听起来很复杂。事实上，它并不比整个讨厌的过程复杂多少。并且不需要导出一个人的私钥并将它们导入到另一个人的 mac。

# android - PopupWindow TouchInterceptor 不工作

> ID：15570172
> 
> 赞同：4
> 
> 时间：2013-03-22T12:20:32.313
> 
> 标签：android, popupwindow, ontouchlistener

我正在尝试测试 PopupWindow 类。我创建了这个方法来显示弹出窗口：

```
 public void showPopup(){
            LayoutInflater layoutInflater   = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
            View popupView = layoutInflater.inflate(R.layout.popup, null);
            final PopupWindow popup = new PopupWindow(popupView, 
                       LayoutParams.WRAP_CONTENT,  
                         LayoutParams.WRAP_CONTENT);  
            popup.setOutsideTouchable(true);
            popup.setTouchable(true);
            popup.setTouchInterceptor(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    Log.d("POPUP", event.toString());
                    if(event.getAction() == MotionEvent.ACTION_OUTSIDE){
                        popup.dismiss();
                        return true;
                    }
                    return true;
                }
            });
            popup.showAtLocation(findViewById(R.id.main), Gravity.BOTTOM|Gravity.CENTER_HORIZONTAL, 0, 200);
} 
```

弹出窗口显示正确，顺便说一下，触摸拦截器似乎根本不起作用：我没有得到任何日志信息，当然，如果按下它，弹出窗口也不会消失。

我必须在弹出窗口或托管它的 Activity 中设置一些其他属性吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:36:40.397

```
 pw.setBackgroundDrawable (new BitmapDrawable());
 pw.setFocusable(false);
 pw.setOutsideTouchable(true); 
```

使用此代码希望这会有所帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-13T19:02:15.977

如果你想做一些动作，当它在窗口外被点击并且两者都`setFocusable()`需要`setOutsideTouchable()`true 时，你可以考虑使用`setOnDismissListener`. `onDismiss`正如预期的那样，当对话框对话框被解除时，它的方法被调用：

```
 PopupWindow mPopupWindow = new PopupWindow(mRootView, WindowManager.LayoutParams.WRAP_CONTENT, WindowManager.LayoutParams.WRAP_CONTENT);
  mPopupWindow.setBackgroundDrawable(new ColorDrawable(android.R.color.transparent));
  mPopupWindow.setFocusable(true);
  mPopupWindow.setOutsideTouchable(true);
  mPopupWindow.setOnDismissListener(new PopupWindow.OnDismissListener() {
      @Override
      public void onDismiss() {
        // some action ....
      }
  }); 
```

# php - Facebook 用户表 fql 到 json_encode

> ID：15570173
> 
> 赞同：0
> 
> 时间：2013-03-22T12:20:34.963
> 
> 标签：php, facebook

我正在使用来自 fql 的用户表。我将数组传递给 json_encode()。Facebook json 格式不正确，不包括 []。如何在我的代码中添加它。

下面的代码是一个示例，但我不理解该代码。

用户表[https://developers.facebook.com/docs/reference/fql/user](https://developers.facebook.com/docs/reference/fql/user)

我要名字，uid。

```
//to get album cover
    $fql2    =   "select  src from photo where pid = '" . $values['cover_pid'] . "'";
    $param2  =   array(
     'method'    => 'fql.query',
     'query'     => $fql2,
     'callback'  => ''
    );

    $fqlResult2   =   $facebook->api($param2);
    $jsarr  =   array();
    foreach( $fqlResult2 as $keys2 => $values2){
    }
    if ($values['name'] != 'Profile Pictures'){
        $jsarr['src'] = $album['src'];

            $count += 1;

    if ($count == 1){
    $outputStr .= "[";}
    else {
    $outputStr .= ",";}
    $outputStr .= json_encode($values2);
    }
}
$outputStr .= "]";
$outputStr = str_replace("{","[",$outputStr);
$outputStr = str_replace("}","]",$outputStr);
echo $outputStr;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:02:27.400

当您使用 Facebook PHP SDK 时，它会自动将返回的 json 对象解码为 PHP 数组。如果您需要其中的 json 对象，则必须`json_encode`在完成处理后使用它。

您的 php 代码存在一些**重大**问题。只是开始：

*   您的循环在下一行`foreach`开始时立即结束。`}`
*   你在哪里定义变量`$values`和`$album`？
*   您在循环`$values2`之外引用。`foreach`
*   您正在附加到行上的未初始化变量`$outputStr .= "[";`。
*   如果你传递`json_encode()`一个正确的 php 数据数组，它将生成一个完整的 json 对象。您不需要附加任何类型的括号。

# wix - 如何从命令提示符中查找已执行 MSI 的状态

> ID：15570176
> 
> 赞同：2
> 
> 时间：2013-03-22T12:20:51.133
> 
> 标签：wix, wix3.6, windows-installer

我使用 WiX 创建了一个安装程序，它将使用命令提示符执行。我正在寻找的是一种在使用命令提示符执行时检查相同状态而不检查事件日志或安装程序日志的方法。

找到下面的代码片段。

```
<Property Id="ISSQLSERVERINSTALLED">
  <RegistrySearch Id="IsSqlExpressServiceInstalled" Root="HKLM"
                  Key="SOFTWARE\Microsoft\Microsoft SQL Server\90\Tools\ClientSetup\CurrentVersion"
                  Name="CurrentVersion" Type="raw"/>
</Property>
<Condition Message="Microsoft SQL Server 2005 must be installed">
  <![CDATA[ Installed OR ISSQLSERVERINSTALLED ]]>
</Condition> 
```

我正在使用 msiexec /i 命令安装软件包，安装后我检查了 %errorlevel% 变量，但即使安装失败，它也会返回 0。有没有办法在条件中设置错误代码，或者有没有其他方法可以检查安装状态？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:30:38.463

在启动失败的情况下，%errorlevel% 设置为 1603。创建安装日志以获取有关真正出错的详细信息。

# sql - SQL按查询中的不同列过滤重复项

> ID：15570182
> 
> 赞同：1
> 
> 时间：2013-03-22T12:21:13.383
> 
> 标签：sql, vba

在这个线程上，我有一个问题已成功回答。

[在访问查询中搜索过滤的重复项](https://stackoverflow.com/questions/15320798/searching-for-filtered-duplicates-in-access-query/15326608?noredirect=1#comment21677413_15326608)

现在我有第二个问题。也许有人可以帮助我。

我有一个如下所示的查询：

1.  查询 A_Gravur：

    ```
    SP1 | SP2     | SP3

     64 | CB75000 | 3
     64 | empty   | D
     70 | CB70010 | 1
     70 | CB70010 | 1
    119 | CB70050 | 5
    119 | empty   | D
    165 | S15002  | Schalter
    165 | S15002  | Schalter
    194 | R70034  | Poti
    194 | R10023  | Potentiometer
    196 | S10063  | Schalter
    196 | S10063  | Schalter
    197 | S10063  | Schalter
    198 | S10070  | 3
    199 | CB75000 | 5 
    ```

**此查询由另一个查询过滤以检查重复项。最终结果如下所示：**

**结果：**

```
SP1 | SP2     | SP3

194 | R70034  | Poti 470k
194 | R10023  | Potentiometer
196 | S10063  | Schalter
197 | S10063  | Schalter
 64 | CB75000 | 3
199 | CB75000 | 5 
```

**并且此 SQL 代码如下所示：**

```
 SELECT SP1, SP2, SP3
  FROM A_Gravur
  WHERE (SP1 IN
    (SELECT SP1
      FROM A_Gravur
      WHERE SP3<>'D'
      GROUP BY SP1
      HAVING COUNT(*)>1)
  OR SP2 IN
    (SELECT SP2
      FROM A_Gravur
      WHERE SP3<>'D'
      GROUP BY SP2
      HAVING COUNT(*)>1))
  AND CONCAT(CAST(SP1 AS CHAR),SP2,SP3) NOT IN
    (SELECT CONCAT(CAST(SP1 AS CHAR),SP2,SP3)
      FROM A_Gravur
      WHERE SP3 <> 'D'
      GROUP BY CONCAT(CAST(SP1 AS CHAR),SP2,SP3)
      HAVING COUNT(*)>1)
  AND SP3<>'D'
  ORDER BY SP1, SP2; 
```

**所以现在我的新问题：**

**我在查询 A_Gravur（SP4 和 SP5）中添加了 2 个新列并进行了重复搜索**

```
SP1 | SP2     | SP3           | SP4     | SP5       |

194 | R70034  | Poti 470k     |123546   |88859     
194 | R10023  | Potentiometer |88859    |
196 | S10063  | Schalter      |7773     |
197 | S10063  | Schalter      |99992    |
 64 | CB75000 | 3             |177777   |
199 | CB75000 | 5             |99999    | 
```

**说明：在 SP4 中总是有值（Materialnumber）。现在，当我搜索重复项时，它应该只找到这个结果：**

```
SP1 | SP2     | SP3           | SP4     | SP5       |

196 | S10063  | Schalter      |7773     |
197 | S10063  | Schalter      |99992    |
 64 | CB75000 | 3             |177777   |
199 | CB75000 | 5             |99999    | 
```

**因为 SP5 (88859) 中的数字也在 SP4 (88859) 中，而 SP1 在两条记录中的数字相同 (194)**

**但如果它看起来像这样，那么结果是正确的**

```
SP1 | SP2     | SP3           | SP4     | SP5       |

194 | R70034  | Poti 470k     |123546   |0000001     
194 | R10023  | Potentiometer |88859    |
196 | S10063  | Schalter      |7773     |
197 | S10063  | Schalter      |99992    |
 64 | CB75000 | 3             |177777   |
199 | CB75000 | 5             |99999    | 
```

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:14:02.990

这可能会做你想要的：

```
SELECT SP1, SP2, SP3, SP4, SP5
FROM A_Gravur
WHERE (SP1 IN
  (SELECT SP1
    FROM A_Gravur
    WHERE SP3<>'D'
    GROUP BY SP1
    HAVING COUNT(*)>1)
OR SP2 IN
  (SELECT SP2
    FROM A_Gravur
    WHERE SP3<>'D'
    GROUP BY SP2
    HAVING COUNT(*)>1))
AND CONCAT(CAST(SP1 AS CHAR), SP2,
    CAST(COALESCE(SP5, SP4) AS CHAR)) NOT IN
  (SELECT CONCAT(CAST(SP1 AS CHAR), SP2,
    CAST(COALESCE(SP5, SP4) AS CHAR))
    FROM A_Gravur
    WHERE SP3 <> 'D'
    GROUP BY CONCAT(CAST(SP1 AS CHAR),SP2,
      CAST(COALESCE(SP5, SP4) AS CHAR))
    HAVING COUNT(*)>1)
AND SP3<>'D'
ORDER BY SP1, SP2, SP3, SP4; 
```

`CONCAT()`选择第一个不为空的字段，因此如果存在则选择 SP5，否则选择 SP4。

这是[SQL 小提琴](http://sqlfiddle.com/#!2/972dc/3)。如果我没有正确理解，请您在那里修改测试数据并添加带有新 SQL Fiddle 地址的注释，以便我有很好的数据可以处理。

# google-chrome-extension - 如何在 chrome 扩展中保存用户信息

> ID：15570196
> 
> 赞同：0
> 
> 时间：2013-03-22T12:21:40.700
> 
> 标签：google-chrome-extension

我正在制作一个 chrome 扩展。我需要为用户分配一个他们从我的网站获得的唯一 ID。如何将此信息保存在我的 chrome 扩展程序中，以便每次启动浏览器时扩展程序都具有相同的唯一 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:22:35.870

使用[本地存储](https://developer.chrome.com/extensions/storage.html)，它在会话中是持久的。

# android - android XML通过HTTP post发送和接收

> ID：15570204
> 
> 赞同：0
> 
> 时间：2013-03-22T12:22:12.187
> 
> 标签：android, xml, api, xmlhttprequest, http-post

首先，我试图能够发送带有以下参数的 HttpResponse：

[http://www.syslang.com/fengly/controller?action=translateREST&src=en&dest=iw&text=good&email=YYY&password=XXX](http://www.syslang.com/frengly/controller?action=translateREST&src=en&dest=iw&text=good&email=YYY&password=XXX)

代码看起来像这样：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("http://www.syslang.com/frengly/controller");   
List<NameValuePair> pairs = new ArrayList<NameValuePair>();  
pairs.add(new BasicNameValuePair("src", "en")); 
pairs.add(new BasicNameValuePair("dest", "iw"));  
pairs.add(new BasicNameValuePair("text", "good"));                  
pairs.add(new BasicNameValuePair("email", "YYY")); 
pairs.add(new BasicNameValuePair("password", "XXX"));
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(pairs,HTTP.UTF_8);  
httpPost.setEntity(entity);  
HttpResponse response = httpClient.execute(httpPost); 
HttpEntity httpEntity = response.getEntity(); 
```

[API 结构可在 http://www.fengly.com/（在 API 选项卡下）](http://www.frengly.com/)获得，共有 5 个参数（src、dest、text、email、password）。

到目前为止，我每次尝试打电话

> HttpResponse 响应 = httpClient.execute(httpPost); 我不断收到 IO 异常 :(

之后我应该得到这样的结构：

```
-<root>
  <text>good</text>
  <translation>טוב</translation>
  <translationFramed>טוב|</translationFramed>
  <missing/>
  <existing>good,</existing>
  <stat>1/1</stat>
</root> 
```

我想我会处理这部分来构建 XML 并根据需要解析它

ps：我查了 [Android，通过HTTP POST方法和许多其他链接发送和接收XML](https://stackoverflow.com/questions/5013373/android-send-and-receive-xml-via-http-post-method) ，这对我没有多大帮助。

让我知道是否需要我的应用程序中的任何代码行...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:32:25.827

你不需要发布。你需要 GET 代替。

```
// Construct your request here.
String requestURL= "http://www.syslang.com/frengly/controller?action=translateREST&src=en&dest=iw&text=good&email=YYY&password=XXX"

DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(requestURL);
HttpResponse response = httpClient.execute(httpGet); 
```

以及您的 AndroidManifest.xml 中的互联网权限

```
<uses-permission android:name="android.permission.INTERNET"/>
<application
....
.... 
```

# html - 在页脚元素上获取附加到我网页右下角的前景图像

> ID：15570207
> 
> 赞同：0
> 
> 时间：2013-03-22T12:22:26.467
> 
> 标签：html, css

我正在编写一个 html 页面，我希望将图像贴在右上角的页脚底部并留在那里。这就是我希望它看起来像的样子：

我似乎无法正确处理。它要么不完全贴在底部或完全贴在右侧，要么位于页脚背景图像下方。尝试了很多我失去的东西。请帮忙。带有美元符号的部分也是图像的一部分

这是我的 CSS 代码：

```
.foreground
{
    float-right;
    position:static;
    bottom:0;
} 
```

|----------------|
|........|
|........|
| 内容......|
|………… |
|............--------|
|...........|$$$$|
|---------|图片..|
| 页脚 |div....|
| bg .... |$$$$|
|---------|$$$$|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:24:57.643

通常你可以通过下面的 CSS 做到这一点：

```
.your_element{
    position:fixed;
    bottom:0;
    right:0;
    z-index:999;
} 
```

但是由于您没有提供任何代码，因此很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:29:21.570

试试下面的代码

```
da1
{

position:absolute;
right:0px;
bottom:0px;
z-index:-1;
} 
```

试试这个它显示了什么？你没有提供任何代码，所以很难说..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:31:54.207

取决于你想要什么，这是我拼凑的一个 jsfiddle：http: [//jsfiddle.net/78TB7/](http://jsfiddle.net/78TB7/) `position: absolute`是你的朋友。

# c# - c#使用块返回错误

> ID：15570210
> 
> 赞同：-5
> 
> 时间：2013-03-22T12:22:33.380
> 
> 标签：c#, database, string, ms-access, return-value

```
 private string Read_MDB_Acc(String acc)
    {   string myReturn;
        ...
        while (odrReader.Read())
                        {                            
                            myReturn = odrReader["acc"].ToString();

                        }

                        odrReader.Close();

                        odcConnection.Close();
    }
 return myReturn; //Show the myReturn doesn't not exist, how to solved? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:28:56.103

在不知道你的问题的情况下，为了编译，试试这个：

```
private string Read_MDB_Acc(String acc)
{
    string myReturn = String.Empty;
    // ...
    while (odrReader.Read())
    {                            
        myReturn = odrReader["acc"].ToString();
    }

    odrReader.Close();
    odcConnection.Close();

    return myReturn;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:30:17.787

使用空字符串初始化`myReturn` 变量，例如：

```
private string Read_MDB_Acc(String acc)
    {   string myReturn = string.Empty;
        ...
        while (odrReader.Read())
                        {                            
                            myReturn = odrReader["acc"].ToString();

                        }

                        odrReader.Close();

                        odcConnection.Close();
                        return myReturn;
    } 
```

# php - 用逗号分隔的字符串和等号在php中转义

> ID：15570213
> 
> 赞同：6
> 
> 时间：2013-03-22T12:22:34.937
> 
> 标签：php, regex, pcre

我想拆分这样的字符串：

```
colors = blue, green, yellow, kinda violet\, not sure,purple\=almost magenta 
```

使用正则表达式，所以结果应该是

```
colors
blue
green
yellow
kinda violet\, not sure
purple\=almost magenta 
```

我已经尝试了几个小时，但没有成功完成这样的丑陋结构（对于 preg_match_all）：

```
/(.*)\s*[=]\s*((.+)\s*,\s*)*/ 
```

还有这个（对于 preg_split）

```
/\s*[=,^(\\,)^(\\=)]\s*/ 
```

请解释一下我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:27:54.990

您将需要否定的后向[断言](http://www.php.net/manual/en/regexp.reference.assertions.php)：

```
$s = 'colors = blue, green, yellow, kinda violet\, not sure,purple\=almost magenta';

$res = preg_split('/(?<!\\\\)[,=]\s*/', $s);

print_r($res); 
```

基本上它匹配一个逗号（或等号），后跟一个可选的空格字符序列，但前提是它前面没有反斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:48:47.630

不是很优雅，但这应该可以使用 preg_split

```
/(\s*=\s*)|(\s*,\s*)|(\s*\\=\s*)|(\s*\\,\s*)/g 
```

最重要的是，不要忘记最后的 g 用于全局匹配。

# c# - 将 C# 中的字符串列表排序为与 SQLite 相同的顺序

> ID：15570215
> 
> 赞同：0
> 
> 时间：2013-03-22T12:22:36.310
> 
> 标签：c#, sqlite, sorting, binary-search

有谁知道我如何将 C# 中的字符串列表排序为与 SQLite 查询返回的顺序完全相同的顺序 - 包括所有特殊字符。我需要对返回的数据执行二进制搜索，但是我的 IComparer 使用的是 C# 的 String 的 CompareOrdinal，因此不起作用，因为两者之间的排序顺序不同。

我已将 SQlite 表的列定义为“collat​​e nocase”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:29:17.833

换个说法，如何对字符串列表进行排序而忽略大小写？

[StringComparer](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx)类提供了支持特定区域性并且可以选择忽略大小写的比较器。要使用线程的当前文化进行排序，您可以使用 CurrentCultureIgnoreCase 比较器：

```
var myList=new List<string>{"aa2","Aa1"};
myList.Sort(StringComparer.CurrentCultureIgnoreCase); 
```

InvariantCultureIgnoreCase 或 OrdinalIgnoreCase 比较器分别使用不变量和有序比较。

SQLite 默认使用 BINARY 排序规则，它等同于 Ordinal（[SQLite v3 中 DataTypes 的](http://www.sqlite.org/datatype3.html)第 6.1 段：

`Every column of every table has an associated collating function. If no collating function is explicitly defined, then the collating function defaults to BINARY`

除非您更改了表格的排序规则，否则您可以使用 OrdinalIgnoreCase 以忽略大小写的相同顺序排序。

[您还可以使用StringComparer.Create](http://msdn.microsoft.com/en-us/library/system.stringcomparer.create.aspx)方法为特定区域性创建比较器。

# java - 从 getInput/OutputStream() 获得的输入/输出流的关闭是否会影响底层 Socket 的重新创建？

> ID：15570220
> 
> 赞同：0
> 
> 时间：2013-03-22T12:22:54.767
> 
> 标签：java, android, http, networking

我已经查看了描述`HttpURLConnection`Java 中工作细节的资源，因此在 Android 中（没有使用连接池的默认实现），我的问题是：如果我关闭从 获取的流`HttpURLConnection`，系统会创建一个`Socket`下次当我建立一个相同`HttpURLConnection`的`URL`或者它会尝试使用一个现有的时？考虑以下代码：

```
private byte[] downloadText(URL url, String data) {
   OutputStream out = null;
   InputStream in = null;
   HttpURLConnection conn = (HttpURLConnection) url.openConnection();

   try {
      conn.setRequestMethod("POST");
      conn.setReadTimeout(20 * 1000);
      conn.setConnectTimeout(15 * 000);
      conn.setDoInput(true);
      conn.setDoOutput(true);
      conn.setRequestProperty("Content-Type", "application/json;charset=utf-8");

      byte[] payload = data.getBytes("utf-8");
      conn.setFixedLengthStreamingMode(payload.length);

      conn.connect();

      out = new BufferedOutputStream(conn.getOutputStream());
      out.write(payload);
      out.flush();

      final int responseCode = conn.getResponseCode();
      final String responseMessage = conn.getResponseMessage();

      is = conn.getInputStream();

      if((responseCode / 100) == 2 || responseMessage.equals("OK")) {
         return readFromStream(is);
      }
   } catch (IOException e) {
      Log.e(TAG, "Error occurred while trying to connect to the server" + e.toString());
   } finally {
      try {
         if(out != null) {
             out.close();
         }

         if(is != null) {
            is.close();
         }
      } catch(IOException e) {
         Log.e(TAG, "Error occurred while trying to close data streams" + e.toString());
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:02:23.233

你的问题没有意义。如果没有连接池，则没有“现有套接字”可重用。

# wpf - 更改 DockPanel 的背景以匹配禁用的 ListView 的背景颜色

> ID：15570222
> 
> 赞同：0
> 
> 时间：2013-03-22T12:23:00.393
> 
> 标签：wpf, xaml, listview, wpf-controls

我在 DockPanel 中有一个 ListView。我需要将 ListView 水平拉伸并在 DockPanel 内垂直居中。当 ListView 被禁用 (IsEnabled=false) 时，我需要更改 DockPanel 的背景以匹配禁用 ListView 的背景颜色。

所以，基本上我想避免下图中可以看到的情况。

![在此处输入图像描述](../Images/39620206259d86cfbfbbe38d800edbda.png)

```
<Window>
    <DockPanel IsEnabled="False">
        <ListView IsEnabled="False" VerticalAlignment="Center" HorizontalContentAlignment="Center">
            <ListViewItem Content="AAA"/>
            <ListViewItem Content="BBB"/>
            <ListViewItem Content="CCC"/>
        </ListView>
    </DockPanel>
</Window> 
```

但是，我不想在代码中的任何地方显式声明颜色，因为我不知道 ListView 在不同的 Windows 环境中将使用哪种背景颜色（我不确定，但我猜不同的 Windows 主题/颜色设置可以更改 ListView 的默认背景颜色 - 这可能与我不想明确声明的颜色不同）。

将 ListView 的背景颜色绑定到 DockPanel 的背景颜色不起作用。

所以，现在我正在使用以下解决方法。

```
<DockPanel.Style>
    <Style TargetType="{x:Type DockPanel}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding ElementName=parametersListView, Path=IsEnabled}" Value="False">
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</DockPanel.Style> 
```

我已经提取了我的 ListView 在其 ControlTemplate 中使用的资源键。在模板上，IsEnabled 属性上声明了一个 Trigger，它将控件的背景颜色设置为 SystemColors.ControlBrushKey 键表示的颜色。

这似乎可行，但我不确定这是否是正确的方法。

有没有办法以更*强大*的方式做到这一点，或者这是我能做的最好的？

（附带说明：使用 SystemColors.ControlBrush 而不是 SystemColors.ControlBrushKey 会产生不同的灰色阴影，我不知道为什么。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:27:24.967

为什么不使用 LstFilledChild =true

编辑：如果你命名你的元素并在绑定中使用 ElementName 它应该可以工作。

```
<DockPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="{Binding Background, ElementName=myList}">
    <ListView Name="myList"  IsEnabled="False" HorizontalAlignment="Center" HorizontalContentAlignment="Center" >
        <ListViewItem>AAA</ListViewItem>
    </ListView>
</DockPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:22:02.127

自从我问了我的问题后，我正在处理的应用程序是*实时*的，它使用的是我最初提出的解决方案，如下所示。目前效果很好。

```
<Window>
    <DockPanel IsEnabled="False">
        <DockPanel.Style>
            <Style TargetType="{x:Type DockPanel}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=myListView, Path=IsEnabled}"
                                 Value="False">
                        <Setter Property="Background"
                                Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DockPanel.Style>
        <ListView IsEnabled="False" 
                  VerticalAlignment="Center" 
                  HorizontalContentAlignment="Center"
                  x:Name="myListView"
                  x:FieldModifier="private">
            <ListViewItem Content="AAA"/>
            <ListViewItem Content="BBB"/>
            <ListViewItem Content="CCC"/>
        </ListView>
    </DockPanel>
</Window> 
```

# c# - 是否可以在 c# 中创建将创建随机对象的构造函数列表？

> ID：15570223
> 
> 赞同：2
> 
> 时间：2013-03-22T12:23:01.943
> 
> 标签：c#

我有几个类都继承自同一个`Shape`类。当我创建一个新形状时，我希望它具有随机形状。我想这样做的方法是创建一个包含所有构造函数的链接的列表，当我需要创建一个新形状时，我将从列表中获取一个随机构造函数并使用它来构造我的形状。我尝试以休闲方式创建列表，但出现错误：

```
List<Action> constList = new List<Action>();
constList.Add(SShape());
constList.Add(OShape());
constList.Add(LShape()); 
```

构造`Shape`函数定义为：

```
class Shape
{
    public Shape(PlayGrid grid, Color color)
    {
        ...
    }
    ...
} 
```

每个子形状的构造函数定义如下：

```
class IShape : Shape
{
    public IShape(PlayGrid grid, Color color) : base(grid, color)
    {
    ...
    }
...
} 
```

构造列表的正确方法是什么，使用列表中的构造函数的方法是什么？

承包商还需要获得在不同形状之间变化的参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:25:54.980

这个概念可以工作，你只是有生成委托的语法错误，你想要一个`Func<PlayGrid, Color, Shape>`不是`Action`：

```
var constList = new List<Func<PlayGrid, Color, Shape>>();
constList.Add((pg, c) => new SShape(pg, c));

PlayGrid playgrid = /* however you get this */;
Color color = /* however you get this */;
var shape = constList[randomIdx](playgrid, color); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:31:55.817

你可以这样做：

```
public class ShapeFactory()
{
   //list of shape constructor functions
   private List<Func<Shape>> constructors;

   //static initalizaton of the constructor list
   static ShapeFactory()
   {
      constructors = new List<Func<Shape>>();
      constructors.Add( () => new OShape());
      constructors.Add( () => new SShape());
      constructors.Add( () => new LShape());
      ....
   }

   public static Shape CreateRandomShape()
   {
       int index = ...get random index somehow...
       return constructors[index]();
   }
} 
```

并在代码中使用它

```
Shape randomShape = ShapeFactory.CreateRandomShape(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:26:02.993

我相信您想为所有形状创建一个[接口](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.110%29.aspx)（可能是“IShape”），然后使用[工厂](http://msdn.microsoft.com/en-us/library/ee817667.aspx)来实例化它们（此时您可以随机实例化任何实现您的 IShape 接口的类型。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:26:44.270

以这种方式创建随机对象的责任不应该是对象本身的行为。我建议你[创建一个工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)来管理这个。您的工厂可以生成构造函数调用列表（或预缓存对象），然后在其 create 方法中提供其中之一。您的工厂应该返回构造的对象（可能作为接口，如 IShape），而不是调用以创建对象的操作。这样，如果您的工厂需要注入依赖项或设置其他值，它可以这样做并管理对象的构造。

另外，如果那是 .NET Action 类，我猜你的 Shape 类不会从它继承，但从你的问题中不清楚“我得到错误”是什么。

这是关于在您的基类中拥有 GetRandomShape() 方法的评论。您不希望这样，因为您的基类知道并依赖于它的子类，这违反了 OO 设计实践。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:27:52.180

您可以将类的类型保存到列表中并用于[`Activator.CreateInstance(Type)`](http://msdn.microsoft.com/de-de/library/wccyzw83%28v=vs.80%29.aspx)选择新实例。

或者您创建一个 Shape 类型的列表，为每个类添加一个实例，然后使用该`.Clone()`方法获取一个新实例。

或者你实现一个[工厂模式](http://www.dofactory.com/Patterns/PatternFactory.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:35:03.760

这是您开始的内容的延续。它使用反射来调用构造函数。初始列表是类型列表，而不是操作列表。

```
class Program
    {
        static void Main(string[] args)
        {

            //register the types
            List<Type> types = new List<Type>() { typeof(OShape), typeof(PShape), typeof(RShape) };

            // randomly select one
            Type type = types[1];

            // invoke the ctor
            ConstructorInfo ctor = type.GetConstructor(/*optional param for ctor, none in this case*/ new Type[] {} );
            object instance = ctor.Invoke(new object[] {});

            // you can safely cast to Shape
            Shape shape = (Shape)instance; //this is a PShape!

        }
    }

    class Shape
    {
    }

    class OShape : Shape
    {
    }

    class PShape : Shape
    {
    }

    class RShape : Shape
    {
    }
} 
```

接下来要考虑的是如何允许 Shape 的子类型接收参数。您需要一个工厂模式，即一个知道如何构造其他对象并将基于 - 例如 - 字符串的对象：

```
Shape s = Factory.GetShape("OShape", new[] object {4}); 
```

检查[这个问题](https://stackoverflow.com/questions/3255697/using-c-sharp-reflection-to-call-a-constructor)。

# android - ListView 标题中的 ViewPager（及其滑动）

> ID：15570226
> 
> 赞同：1
> 
> 时间：2013-03-22T12:23:10.647
> 
> 标签：android, android-listview, android-viewpager, gestures

我在 ListView 的标题中有一个 ViewPager，我注意到，当您滑动 viewpager 时，如果手指在 Y 轴上移动一点，事件就会被取消（我猜它被 listview 拦截了？） . 滑动图片的唯一方法是将手指滑过几个像素，因为沿着 Y 轴移动手指的可能性会更小。

有没有办法让列表视图不拦截 Y 轴事件，以防它们发生在 viewpager 中？我什至不知道这是否是我需要的。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T10:20:51.883

您可以尝试拦截触摸事件

看看这篇文章[Android - ViewPager 滚动重置](https://stackoverflow.com/questions/9179314/android-viewpager-scrolling-resets)

希望能帮助到你

祝你好运

# ruby-on-rails - 在一个循环中保存多个参数，rails 控制器

> ID：15570227
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:23:10.907
> 
> 标签：ruby-on-rails, database, loops, parameters, controller

我创建了一个包含大约 40 个可编辑字段的表单，我正在尝试使用控制器将它们保存到数据库中。我目前有这个代码：

```
c = Form.find(params[:id])
  if c
    params.each do |k,v|
    c.k = params[:v]
  end 
```

哪个不起作用，我收到此错误：`undefined method 'k='`

如果我要手动将它们全部写出来，它看起来像这样：

```
c = Form.find(params[:id])
if c
  c.title = params[:title]
  c.reference = params[:reference]
....
etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:49:55.200

假设您正在尝试`Form`根据传入的内容更新记录上的属性，请`params`尝试将此作为基本大纲：

```
c = Form.find_by_id(params[:id])
if c
    params.each do |k, v|
        c[k] = v
    end

    c.save!
end 
```

您的原始代码的使用`params[:v]`可能没有按照您的意图进行，而您确实打算这样做`params[:k]`。但是实际上没有必要像那样在循环中查找该键的值，因为您已经在`v`.

`ActiveRecord`以下是与属性交互方式的简要说明： [http ://www.davidverhasselt.com/2011/06/28/5-ways-to-set-attributes-in-activerecord/](http://www.davidverhasselt.com/2011/06/28/5-ways-to-set-attributes-in-activerecord/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:34:23.430

我不知道您要做什么，但您的代码似乎很奇怪。解决方法如下

```
c.send "#{k}=", params[:v] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:50:05.773

关于什么

```
c = Form.find(params[:id])
c.update_attributes(params[:form]) 
```

请注意，我猜到了`[:form]`第二行中的部分，这取决于您的表格。检查您的 html 源代码，看看您的字段是否是这样的：

```
<input name="form[field_name]" ... 
```

如您所见，name 包含一个“类似数组”的形式。检查您的 HTML 源代码并进行调整（如果是`name="foo[field_name]"`，则需要使用`c.update_attributes(params[:foo])`）

# mysql - MySQL插入并合并到一个表中的行的新表中

> ID：15570229
> 
> 赞同：0
> 
> 时间：2013-03-22T12:23:18.377
> 
> 标签：mysql, sql

我有一张如下表：

```
id - rowid - value - date 
```

在每一行我都有：

```
1 - 9 - 123 - 03/2013
2 - 10 - 456 - 03/2013 
```

我想将两行加入到一个表中，如下所示：

```
id - rowid - value1 value2 - date
1 - 9 - 123 - 456 - 03/2013 
```

我只需要第一个表中的 rowid 9，如示例中的值和日期。

从第二行开始，我只需要这个值。我尝试了联合全部和多项选择，但没有成功。

帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:40:08.873

--假设表中只有 2 条相同日期的记录。--如果不准确，您最终每个日期的记录将比您当前拥有的记录少 1 条。--假设你只记录了最低的 RowId。

```
create table myNewtable as 
(SELECT A.RowID, A.Value, B.Value, A.Date
 FROM Oldtable A INNER JOIN Oldtable B 
  on A.Date=B.Date 
  and A.RowID < B.RowId) 
```

--现在我们知道日期是日期时间并且可能不同......但是对于您想要加入的人，RowID 始终为 +1

```
create table myNewtable as 
(SELECT A.RowID, A.Value, B.Value, A.Date
 FROM Oldtable A 
 INNER JOIN Oldtable B 
  on A.RowID = B.RowId-1) 
```

# c# - C#连续/不间断读取数据（来自第三方SDK）

> ID：15570237
> 
> 赞同：1
> 
> 时间：2013-03-22T12:23:44.900
> 
> 标签：c#, multithreading

**简介：** 我正在开发使用运动跟踪器来分析人体运动系统的软件。目前我正在实现来自 xsens 的硬件并使用他们的 SDK 从他们的无线传感器接收数据。SDK 提供了一个带有“getData”方法的 COM 接口，您可以调用该方法来接收当前可用的 xyz 轴数据（简化版）。如果你不调用 getData，你会跳过那个“节拍”，所以你会丢失数据，他们的硬件/SDK 中没有缓存。

**问题：** 我的问题是我需要以至少 75Hz 的速率获取数据，最好多一点，但 75 是可以接受的，但我目前正在迅速下降到每秒只有 20 个信号......如果我删除处理位（参见下面的示例）我得到了完美的采样率，所以我认为要么出队导致入队暂停。或者“沉重”的 CPU 负载导致所有线程等待。我不知道如何找出真正导致它的原因，分析器（EQATEC）只是显示我的“GetData”方法在一段时间后需要更长的时间。

**问题：** 完成此任务的最佳技术是什么？为什么我的“阅读”线程会被中断/阻塞？肯定有更多情况下人们需要在不被打断的情况下阅读某些内容，但我已经在谷歌上搜索了 2 周，显然我找不到正确的单词。

请指教。

谢谢

简化的代码示例，版本 4，使用多媒体计时器 ( [http://www.codeproject.com/Articles/5501/The-Multimedia-Timer-for-the-NET-Framework](http://www.codeproject.com/Articles/5501/The-Multimedia-Timer-for-the-NET-Framework) ) 和 BackgroundWorker

```
public class Sample
{
  private MultiMediaTimer _backgroundGetData;
  private bool _backgroundGettingData;
  private BackgroundWorker _backgroundProcessData;
  private ConcurrentQueue<double> _acceleration = new ConcurrentQueue<double>();

  private void StartProcess()
  {
    if (_backgroundGetData == null)
    {
      _backgroundGetData = new MultiMediaTimer {Period = 10, Resolution = 1, Mode = TimerMode.Periodic, SynchronizingObject = this};
      _backgroundGetData.Tick += BackgroundGetDataOnTick;
    }

    _backgroundProcessData = new BackgroundWorker {WorkerReportsProgress = false, WorkerSupportsCancellation = true};
    _backgroundProcessData.DoWork += BackgroundProcessDataOnDoWork;

    _backgroundGetData.Start();
  }

  private void BackgroundProcessDataOnDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
  {
    double value;
    if (!_acceleration.TryDequeue(out value)) value = 0;

    //Do a lot of work with the values collected so far,
    //this will take some time and I suspect it's the cause of the delays?
  }

  private void BackgroundGetDataOnTick(object sender, EventArgs eventArgs)
  {
    if (_backgroundGettingData) return;
    _backgroundGettingData = true;

    //123 represents a value I am reading from the sensors using the SDK
    double value = 123;
    if (value == -1)
    {
      Thread.Sleep(5);
      continue;
    }
    _acceleration.Enqueue(value);
    if (_acceleration.Count < 5) continue;

    if (!_backgroundProcessData.IsBusy)
    {
      _backgroundProcessData.RunWorkerAsync();
    }

    _backgroundGettingData = false;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:32:14.007

我在这里看到了问题

```
 _backgroundProcessDataThread.Start();
 while (!_backgroundProcessDataThread.IsAlive){}

_backgroundGetDataThread.Start();
while (!_backgroundGetDataThread.IsAlive) {} 
```

好吧，你可以在这里看到你有无限循环，第二个线程只有在第一个线程完成工作后才开始。即第一个线程完成。这绝不是一个理想的模型。

抱歉，我后来意识到了这个问题。

问题是，_backgroundGetDataThread 只有在 _backgroundProcessDataThread 完成工作后才会启动。

# iphone - 在 UIScrollView 中缩放 UIImageView 超出范围

> ID：15570240
> 
> 赞同：9
> 
> 时间：2013-03-22T12:23:56.320
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiscrollview

我已经成功实现了放大，`UIImageView`但`UIScrollView`我遇到了一个让我恼火的奇怪问题。

基本上，当我放大图像时

![在此处输入图像描述](../Images/37818273f5d21e671c8327270a780cb9.png)

我可以平移视图以实际滚动出图像边框，并留下一个黑色区域，如下所示： ![在此处输入图像描述](../Images/3a0c37e9f9495d90813123b10376819a.png)

当我放大更多时，我可以让黑色边框填满整个屏幕！同时在 iPhone 照片应用程序中，您无法缩小实际图像。我的实现有什么问题？

它看起来像这样：

```
UIImage *imageToDisplay = [UIImage imageWithData:tmpImageData];
imageViewMain.image = imageToDisplay;
imageViewMain.frame = CGRectMake(0, 0, scrollViewMain.frame.size.width, scrollViewMain.frame.size.height);
imageViewMain.contentMode = UIViewContentModeScaleAspectFit;

scrollViewMain.delegate = self;
scrollViewMain.minimumZoomScale = 1.0;
scrollViewMain.maximumZoomScale = 9.0;
scrollViewMain.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
scrollViewMain.contentSize = imageViewMain.frame.size;

[self.view addSubview:scrollViewMain];
[scrollViewMain addSubview:imageViewMain]; 
```

我也实现了这个方法：

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return imageViewMain;
} 
```

提前致谢！

编辑：当我第一次加载视图时，我缩小 UIImageView 以适应滚动视图，图像看起来像这样：

![在此处输入图像描述](../Images/fc378ff50e476b9c41dd8822102b54d7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:32:15.517

试试这个代码......在需要的地方更改一些代码......`UIPinchGestureRecognizer`用于你的`UIImageView`，然后在你`UIScrollView`喜欢的下面添加这个图像......

```
UIImageView *img = [[UIImageView alloc]init];
img.image = [UIImage imageWithData:tmpImageData];
img.userInteractionEnabled = YES;
img.frame = CGRectMake(210,100, 200, 200);/// define frame which you want...
[img sizeToFit];

UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
[pinchRecognizer setDelegate:self];
[img addGestureRecognizer:pinchRecognizer];
[pinchRecognizer release];
[scrollViewMain addSubview:img];
[scrollViewMain bringSubviewToFront:img];
[img release]; 
```

只需将以下代码粘贴到您的 .m 文件中...

```
#pragma mark GestureRecognizer Methods
-(void)scale:(id)sender 
{
    UIView *imgTempGest = [sender view];
    if([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) 
    {
        lastScale = 1.0;
        return;
    }
    CGFloat scale = 1.0 - (lastScale - [(UIPinchGestureRecognizer*)sender scale]);

    CGAffineTransform currentTransform = [(UIPinchGestureRecognizer*)sender view].transform;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);

    [[(UIPinchGestureRecognizer*)sender view] setTransform:newTransform];

    [imgTempGest setTransform:newTransform];

    lastScale = [(UIPinchGestureRecognizer*)sender scale];
} 
```

这里对于 LastScale 只需在文件中定义该变量，`.h`如下所示...

```
CGFloat lastScale; 
```

我希望这对你有帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:32:54.573

原始图像是否包含顶部和底部的边框？如果实际图像包含黑色顶部和底部黑色区域，您可以在那里使用相同的代码输出没有错误。并添加此代码，

> scrollView.scrollEnabled = YES

也变了，

> scrollView.contentSize = imageView.bounds.size;

您还提供了 9 的缩放比例。您需要这么多吗？将其更改为 3 或 4 并尝试。您的问题将得到解决

# java - 集合未填充 OneToMany 关系 - EclipseLink

> ID：15570246
> 
> 赞同：0
> 
> 时间：2013-03-22T12:24:17.140
> 
> 标签：java, jpa, eclipselink

我正在使用 EclipseLink 将数据库（Oracle 11g）映射到 JPA 实体。我已经将几乎每个表都映射到 JPA 对象，但我刚刚发现了一个问题：

在 \Curve\ 实体中，我有以下字段：

```
@Id
@Column(name = "COD_CURVE")
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "seq.gen")
@SequenceGenerator(name = "seq.gen.curve", sequenceName = "SEQCURVE", allocationSize = 1)
private long codCurve;

@Id
@Column(name = "FEC_HISTORIC")
@Temporal(javax.persistence.TemporalType.DATE)
private Date fecHistoric;

@OneToMany(mappedBy="codCurve", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private Collection<CurveDetail> detailsCollection; 
```

在 \CurveDetail\ 实体中，我有这个：

```
@ManyToOne
@JoinColumns({
    @JoinColumn(name = "COD_CURVE", referencedColumnName = "COD_CURVE"),
    @JoinColumn(name = "FEC_HISTORIC", referencedColumnName = "FEC_HISTORIC")
})
private Curve codCurve; 
```

问题是，当我查询 \Curve\ 实体时，尽管两个表中都有有效数据，但详细信息始终为空。检查数据库我注意到 \CurveDetail\ 表中没有外键约束，所以我想知道 ¿ 这些约束是正确映射数据库所必需的吗？我没有尝试自己添加 FK 约束，因为我不被允许（必须请 DBA 来做，这需要一周时间）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:31:40.160

不需要外键。

检查通过启用日志记录生成的 SQL ("eclipselink.logging.level"="finest")

尝试用相同的数据库执行相同的 SQL 以查看数据是否存在。

还要确保您不会通过插入/更新具有空集合的对象来破坏共享缓存。您必须保持双向关系的双方。您可以尝试禁用缓存以查看这是否是您正在执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:42:33.643

据我所知，FK 约束不是强制性的。一旦我遇到同样的问题（但它是 Oracle 9i）并发现 Entity 类的名称应该与您要映射的表的名称匹配，并且 JPA SQL 和 Hibernate HQL 都区分大小写，所以在编写时要小心@列标签。

# netbeans - netbeans 中的 OSGi 问题

> ID：15570250
> 
> 赞同：0
> 
> 时间：2013-03-22T12:24:27.997
> 
> 标签：netbeans, module, osgi

我是 osgi 和模块化编程的新手。

我正在 Netbeans 中开发一个 OSGi 项目。我已经创建了一个包含不同模块的模块套件，现在我需要使用 import 语句从另一个模块中访问一个类对象，但它不起作用。请问我该如何实现这一点。

# css - Make :first-child 忽略嵌套结构？

> ID：15570252
> 
> 赞同：0
> 
> 时间：2013-03-22T12:24:37.993
> 
> 标签：css, css-selectors

[http://jsfiddle.net/RKwHk/](http://jsfiddle.net/RKwHk/) 我需要如何更改我的选择器以便它只选择第一段？谢谢

```
<div class="cont">
    <span>
        <p>first</p>
    </span>
     <span>
        <p>second</p>
    </span>
     <span>
        <p>thrid</p>
    </span>
</div>

.cont p {
    color: green;
}
.cont p:first-child {
    color: red;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:27:55.723

以这种方式使用它：

```
.cont p {
    color: green;
}
.cont span:first-child p {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:27:45.947

我建议：

```
.cont div:first-of-type p, /* or the following */
.cont div:first-child p {
    color: red;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/RKwHk/1/)。

请注意，我已将元素更改`span`为`div`元素，因为 a`p`不应包含在内联元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:31:53.063

将 100% 工作使用这个

```
.cont p {
    color: green;
}

.cont span:first-child p{
   color:Red;
} 
```

# java - 从列表中获取活动对象

> ID：15570256
> 
> 赞同：1
> 
> 时间：2013-03-22T12:24:50.223
> 
> 标签：java, random

假设我们有：

```
private List<Item> items = new ArrayList<Item>(); 
```

我的自定义类在哪里`Item`，它可以有两种状态（布尔值）活动（真）或非活动（假）它有`isActive()`返回当前状态的布尔值。

现在我要做的是从列表中接收随机项目，`(from 0 to items.size() - 1)`但它必须处于活动状态。

我想做的是在从列表中获取随机项目后，检查它是否处于活动状态，如果没有，重复直到我们收到活动项目，如果它处于活动状态，则返回它以便我们可以使用它。

不确定它是否正确，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:29:05.350

我对您建议的方法的问题是，在某些情况下它可能会变得非常低效，特别是当您的列表中只有很少的 active 时`Item`。另一个想法是创建一个新列表，其中包含列表中所有活动的`Item`索引`items`：

```
List<Integer> indexes = new ArrayList<Integer>(items.size());

for (int i = 0; i < items.size(); i++)
    if (items.get(i).isActive())
        indexes.add(i); 
```

然后，您只需要一个来自 的随机元素，并在该特定位置`indexes`引用`Item`in 。`items`所以你的随机活动元素将是

```
items.get(indexes.get((int)(Math.random() * indexes.size()))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:34:10.283

这取决于活动和非活动项目之间的比率。如果预计大多数项目都处于活动状态，那么请按照您的想法进行，否则您可以采用 ARS 的解决方案。

**笔记：**

重试方法有一个警告。如果所有项目都处于非活动状态，您将最终陷入无限循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:36:44.030

我认为它可以通过遍历列表并将所有活动项目收集到一个新列表中来为您提供更多控制。

```
private List<Item> activeItems = new ArrayList<Item>();

foreach (Item x in items)
{
    if (x.Isactive) activeItems.Add(x);  
} 
```

一旦你得到了只有活动项目的列表，就从该列表中获取一个随机位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:36:36.173

您可以扩展`ArrayList`和创建一个方法，该方法仅返回一个新的`ArrayList`（或其他`Collection`可能的）活动项目。

类 MyItemArrayList 扩展 ArrayList {

公共 ArrayList getActiveItems() {

```
ArrayList<Item> activeArrayList = new ArrayList<>();

for (Item item : this) {

    if (item.isActive()) {
        activeArrayList.add(item);
    }
}

   return activeArrayList;

 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:37:59.490

试试这个：

```
 List<CustomClass> list = new ArrayList<CustomClass>();

    Random random = new Random();

    while (true) {
        int nextInt = random.nextInt();
        if (nextInt > 0 && nextInt <= list.size()) {
            if(list.get(nextInt).isActive()){
                // Current state is active
                System.out.println("Found active");
                break;
            }
        }
    } 
```

# c# - WPF 从其他 winforms 项目添加文件上传服务

> ID：15570257
> 
> 赞同：0
> 
> 时间：2013-03-22T12:24:50.263
> 
> 标签：c#, asp.net, wpf

我是在 C# wpf 中使用 web 服务的新手。我使用 winforms 下载了一个 webservice 示例。我设法从该 winforms 应用程序将文件上传到我的服务器。现在我想将此 winforms 功能与我现有的 WPF 应用程序合并。我无法找到如何将我的 winforms 项目中 Web 引用下的“上传器”获取到我的 WPF 项目。这是网络参考“上传器”包含的代码：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18034
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------

// 
// This source code was auto-generated by Microsoft.VSDesigner, Version 4.0.30319.18034.
// 
#pragma warning disable 1591

namespace TestUploader.Uploader {
using System;
using System.Web.Services;
using System.Diagnostics;
using System.Web.Services.Protocols;
using System.Xml.Serialization;
using System.ComponentModel;

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Web.Services", "4.0.30319.17929")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Web.Services.WebServiceBindingAttribute(Name="FileUploaderSoap", Namespace="http://tempuri.org/")]
public partial class FileUploader : System.Web.Services.Protocols.SoapHttpClientProtocol {

    private System.Threading.SendOrPostCallback UploadFileOperationCompleted;

    private bool useDefaultCredentialsSetExplicitly;

    /// <remarks/>
    public FileUploader() {
        this.Url = global::TestUploader.Properties.Settings.Default.TestUploader_Uploader_FileUploader;
        if ((this.IsLocalFileSystemWebService(this.Url) == true)) {
            this.UseDefaultCredentials = true;
            this.useDefaultCredentialsSetExplicitly = false;
        }
        else {
            this.useDefaultCredentialsSetExplicitly = true;
        }
    }

    public new string Url {
        get {
            return base.Url;
        }
        set {
            if ((((this.IsLocalFileSystemWebService(base.Url) == true) 
                        && (this.useDefaultCredentialsSetExplicitly == false)) 
                        && (this.IsLocalFileSystemWebService(value) == false))) {
                base.UseDefaultCredentials = false;
            }
            base.Url = value;
        }
    }

    public new bool UseDefaultCredentials {
        get {
            return base.UseDefaultCredentials;
        }
        set {
            base.UseDefaultCredentials = value;
            this.useDefaultCredentialsSetExplicitly = true;
        }
    }

    /// <remarks/>
    public event UploadFileCompletedEventHandler UploadFileCompleted;

    /// <remarks/>
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://tempuri.org/UploadFile", RequestNamespace="http://tempuri.org/", ResponseNamespace="http://tempuri.org/", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
    public string UploadFile([System.Xml.Serialization.XmlElementAttribute(DataType="base64Binary")] byte[] f, string fileName) {
        object[] results = this.Invoke("UploadFile", new object[] {
                    f,
                    fileName});
        return ((string)(results[0]));
    }

    /// <remarks/>
    public void UploadFileAsync(byte[] f, string fileName) {
        this.UploadFileAsync(f, fileName, null);
    }

    /// <remarks/>
    public void UploadFileAsync(byte[] f, string fileName, object userState) {
        if ((this.UploadFileOperationCompleted == null)) {
            this.UploadFileOperationCompleted = new System.Threading.SendOrPostCallback(this.OnUploadFileOperationCompleted);
        }
        this.InvokeAsync("UploadFile", new object[] {
                    f,
                    fileName}, this.UploadFileOperationCompleted, userState);
    }

    private void OnUploadFileOperationCompleted(object arg) {
        if ((this.UploadFileCompleted != null)) {
            System.Web.Services.Protocols.InvokeCompletedEventArgs invokeArgs = ((System.Web.Services.Protocols.InvokeCompletedEventArgs)(arg));
            this.UploadFileCompleted(this, new UploadFileCompletedEventArgs(invokeArgs.Results, invokeArgs.Error, invokeArgs.Cancelled, invokeArgs.UserState));
        }
    }

    /// <remarks/>
    public new void CancelAsync(object userState) {
        base.CancelAsync(userState);
    }

    private bool IsLocalFileSystemWebService(string url) {
        if (((url == null) 
                    || (url == string.Empty))) {
            return false;
        }
        System.Uri wsUri = new System.Uri(url);
        if (((wsUri.Port >= 1024) 
                    && (string.Compare(wsUri.Host, "localHost", System.StringComparison.OrdinalIgnoreCase) == 0))) {
            return true;
        }
        return false;
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Web.Services", "4.0.30319.17929")]
public delegate void UploadFileCompletedEventHandler(object sender, UploadFileCompletedEventArgs e);

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Web.Services", "4.0.30319.17929")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
public partial class UploadFileCompletedEventArgs : System.ComponentModel.AsyncCompletedEventArgs {

    private object[] results;

    internal UploadFileCompletedEventArgs(object[] results, System.Exception exception, bool cancelled, object userState) : 
            base(exception, cancelled, userState) {
        this.results = results;
    }

    /// <remarks/>
    public string Result {
        get {
            this.RaiseExceptionIfNecessary();
            return ((string)(this.results[0]));
        }
    }
}
}

#pragma warning restore 1591 
```

除此之外，我不知道如何将设置从 winforms 迁移到 wpf。在我的winforms中：

```
<configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
        <section name="TestUploader.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
</configSections>
<applicationSettings>
    <TestUploader.Properties.Settings>
        <setting name="TestUploader_Uploader_FileUploader" serializeAs="String">
            <value>http://xxx/videolibrary/Upload/FileUploader.asmx</value>
        </setting>
    </TestUploader.Properties.Settings>
</applicationSettings> 
```

我最大的问题是我不完全了解网络参考的结构和功能。这可能是我的问题措辞错误的原因。

- 编辑 -

当我使用添加服务引用时，引用似乎与我的 winform 中的原始引用不同。左边是我的 winforms 树，右边是我的 wpf 树

！[http://dl.dropbox.com/u/8308826/screen.jpg](http://dl.dropbox.com/u/8308826/screen.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:28:20.967

您应该将其添加为服务参考。Web 引用是 WCF 服务的旧版本，存在于 .NET 2 中。在您的 WPF 项目中，您应该添加服务引用。

阅读[http://andrewtokeley.net/archive/2008/07/10/the-difference-between-ldquoadd-web-referencerdquo-and-ldquoadd-service-referencerdquo.aspx](http://andrewtokeley.net/archive/2008/07/10/the-difference-between-ldquoadd-web-referencerdquo-and-ldquoadd-service-referencerdquo.aspx)了解它们的区别以及如何使用它们。

# objective-c - 如何将鼠标悬停在侦听器上添加到 IKImageBrowserCell？

> ID：15570259
> 
> 赞同：0
> 
> 时间：2013-03-22T12:24:54.667
> 
> 标签：objective-c, macos, cocoa

如何将“鼠标悬停”侦听器添加到 IKImageBrowserCell（不是 NSView 或 NSCell），而只是从 NSObject 继承？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:54:07.577

作为`IKImageBrowserCell`NSObject 的子类，我建议您在`IKImageBrowserView`子类中使用鼠标事件方法。您可以使用相应事件的 locationInWindow 检测鼠标下的单元格，如下所示

```
- (void)mouseEntered:(NSEvent *)theEvent {
     NSPoint point = [self convertPoint:[event locationInWindow] fromView:nil];
     NSInteger itemIndex = [self indexOfItemAtPoint:point];
     //Use this itemIndex to do manipulations on your item or cell.
} 
```

它会在`NSResponder`课堂上。 `IKmageBrowserView`是 的子类，`NSView`它是 的子类`NSResponder`。

`IKImageBrowserView : NSView : NSResponder : NSObject`

# svn - Jenkins - 考虑从属、远程工作空间与父工作共享工作空间

> ID：15570263
> 
> 赞同：1
> 
> 时间：2013-03-22T12:25:14.210
> 
> 标签：svn, jenkins, repository

我正在努力解决詹金斯问题。甚至很难在标题中描述它，如果您感到困惑，请见谅。

我的整个项目结构如下：

主要工作：

*   将作业签入主作业目录

*   参数化构建作业 #1（使用远程工作空间 [在本例中为父文件夹]）

*   参数化建筑作业#2（相同）

*   参数化的建筑工作#X（相同）

问题是每个构建作业都会执行一个 .bat 文件，该文件位于签出的 SVN 目录的特定文件夹中。为了重用代码，我坚持使用 bat 文件执行的工作。它们中的每一个都带有参数。其中一个参数始终是从站上的本地目录。

我无法完成我的任务，因为：
1）如果我尝试使用 %workspace% 它不适用于自定义工作区（它只提供 jenkins 文件夹中的**相对** 路径。我无法对路径进行硬编码。詹金斯将在不同的操作系统上运行。

2）使用 %JENKINS_HOME% + 本地重定向失败，因为它提供了 jenkins 在 master 上的位置（它甚至是不同的操作系统）

3）使用 %~dp0 作为 bat （它通常用于接收文件执行的位置）返回 C:\Windows\Temp 。我什至没有力气去问为什么。

我已经没有想法了。我已经挣扎了大约1.5周了。

有几种方法可以重组整个项目，但这会很耗时，而且我目前的工作将毫无结果。

# jquery - jQuery Resizable 触发器调整尺寸

> ID：15570267
> 
> 赞同：0
> 
> 时间：2013-03-22T12:25:52.027
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

我想知道如何`resizable(`从 jQuery ui 手动触发 ) 事件。我实际上有一个`<div>`用户可以使用`resizable()`手柄调整大小。在`resizable()`函数中，我将`aspectRatio`参数设置为`true`.

现在我还有一个`<input type="text />`, 输入用户可以输入自定义高度值。

问题是：如何在用户设置的新尺寸（仅高度）保持纵横比（宽度/高度）的情况下触发`resizable()`事件？`<div>`

# ember.js - 在 Ember.js 中，setupController 和模型挂钩是否仅适用于动态段？

> ID：15570270
> 
> 赞同：7
> 
> 时间：2013-03-22T12:25:59.963
> 
> 标签：ember.js

我试图理解`setupController`and`model`钩子，它们是否只会在动态段的情况下被调用？

这是我的路由器配置，我看到应用程序运行良好，但我没有看到这些钩子被执行：

```
// Router, this need to connect view and controller
App.Router.map(function(){
  this.resource("login", {path : "/"});
  this.resource("home" , {path : "home/:home_id"});
});

App.Router.IndexRoute = Ember.Route.extend({
  setupController:function(controller,model){
    console.log("in setupController hook for index route");
  }
});

App.Router.LoginRoute = Ember.Route.extend({
  setupController:function(controller,model){
    console.log("in setupController hook for login route");
  }
});

App.Router.HomeRoute = Ember.Route.extend({
  setupController:function(controller,model){
    console.log("in setupController hook for login route");
  }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T12:51:29.930

假设您使用的是最新的 ember (1.0.0-RC.1)，您应该像这样定义您的路线：

```
App.HomeRoute = Ember.Route.extend({
  ...
}); 
```

他们是你的一部分`App`，但没有`Router`一部分。

[工作 JSBin 示例](http://jsbin.com/ixupad/249/edit)

作为关于钩子行为`model`的注释：`setupController`

在路由中，`model`只有在直接导航到包含动态段的 URL 时才会调用。传入的参数`model`用于使用动态段检索该路由的模型。

`{{#linkTo route myObject}}`如果使用or调用到达路由，`transitionTo(myObject)`则传递的对象用于`setupController`直接调用`model`而不被调用。

`setupController`每次路由进入

[Ember API 文档`model`](http://emberjs.com/api/classes/Ember.Route.html#method_model)

[Ember API 文档`setupController`](http://emberjs.com/api/classes/Ember.Route.html#method_setupController)

# php - HTTP POST 与 www 一起工作，但不是没有它

> ID：15570273
> 
> 赞同：0
> 
> 时间：2013-03-22T12:26:02.640
> 
> 标签：php, web-services, codeigniter, http, http-post

从 iphone 到 webservice 脚本的 HTTP 请求在调用[http://www.my-domain.com/webservices/function时有效，但是当只是](http://www.my-domain.com/webservices/function)[http://my-domain.com/webservices](http://my-domain.com/webservices/function)时，值不会发布到 webservice 脚本[/函数](http://my-domain.com/webservices/function)被使用。可能是什么原因？GET 方法在这两种情况下都有效。

# xml - Postgresql XML 类型的优势？

> ID：15570278
> 
> 赞同：3
> 
> 时间：2013-03-22T12:26:12.953
> 
> 标签：xml, postgresql, xpath

我是 SQL 初学者，需要回答以下问题。我有数千个 XML 文件（每个都有数百个节点），需要在其中的数据之上构建一个 Postgresql 数据库。

我考虑两种方式：

1.  将 XML 文件转换为一个（或多个）大型数据库表（一个 XML 节点 = SQL 表中的一行）并使用此表。
2.  创建一个具有原生 XML 类型的数据库（将 XML 类型的数据存储在数据库中）并使用 XPath 进行搜索和过滤...

哪种方法可能更好（更快、更舒适）？在 SQL 数据库中使用 XML 类型的优缺点是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:36:48.643

选项（1）很糟糕，不要那样做。每个节点只有一行的单个巨型表将*很难*查询，例如添加了硫磺臭味和额外角的[EAV 。](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)

要么将 XML 表示的数据*建模*为实体（表）和关系，要么将 XML 文档存储在 DB 中。

只有当 XML 是有规律的结构化时，您才能将 XML 建模为实体和关系。如果您有一堆不同的自由格式 XML 文件，那么您就无法在 RDBMS 中对其进行真正有用的建模。如果它们*是*常规的，这通常是最好的选择，例如：

```
<root>
   <parentnode attrib="value">
      <child otherattrib="value2">content</child>
   </parentnode>
   <...>
</root> 
```

您可以将其建模为：

*   `parent`带有一个`id`和一个`attrib`列的表格；和
*   具有and列的`child`表以及具有对 的外键引用的列。`id``otherattrib``parent_id``parent(id)`

如何对 XML 进行建模取决于 XML。什么是强制性的，什么不是？您是否需要重建输入 XML 中实体的确切顺序，还是节点内的顺序无关紧要？是否有自由形式的可嵌套实体？

作为一种决策的示例，如果您有一个父节点可以有零个或一个（但没有更多）给定子节点类型，您可以选择使用两个表和一个 1:1 可选的模型来建模关系，或者您可以将子元素合并到单个表中的父元素中，其中子属性/内容可以为空。在性能（连接成本与表宽度和每页行数）和易用性方面都有优点和缺点。

如果 XML 结构是严格的，那么建模为表通常很方便；如果它是自由格式，通常将其作为 XML 存储在数据库中并使用 xpath 查询它会更有用。

如果您将其保留为 XML 文档，则在数据库中索引和查询会更困难，但将 XML 从数据库中取出并放入应用程序会容易得多。xpath 表达式上的功能索引可以提供很大帮助。还值得添加一个`CHECK`约束来强制该`xml`字段`IS DOCUMENT`，这样您就不能存储 XML 片段，只能存储整个文档。

# php - TinyMCE 实时更新

> ID：15570301
> 
> 赞同：1
> 
> 时间：2013-03-22T12:27:31.513
> 
> 标签：php, jquery, tinymce, wysiwyg

我在表单中使用 tinymce 编辑器。它工作正常。但是当我尝试使用 jquery post 方法发布表单时。tinymce textarea 是空白的。

```
 $.post("/posts/preview/", $("#PostForm").serialize(), function(data){
      $('#myframe').html(data);
   }); 
```

所有字段都可用。除了空白的tinymce textarea。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:31:21.057

message 是您给对象 tinymce 的名称

```
tinyMCE.get('mensage').getContent();  /* get vaue tine MCE */

tinymce.get('mensage').setContent('');  /* populate fields and clear fields */ 
```

# url-rewriting - 规范网址问题无法正常工作

> ID：15570304
> 
> 赞同：0
> 
> 时间：2013-03-22T12:27:36.660
> 
> 标签：url-rewriting, canonical-link

我想访问没有 Default.aspx 的网站。我在 global.asax 文件中的 Application_BeginRequest 中编写了代码，但在访问网站时它总是显示 Default.aspx。

请提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:55:47.913

可以通过使用 web.config 文件中的规则来解决问题。它解决了我的问题，并且在“www.tamisagency.com”中运行良好

规则如下：

```
<system.webServer>
<rewrite>
<rules>
        <rule name="default.aspx Redirect" stopProcessing="true">
        <match url="^(.*\/)*default\.aspx$" />
        <conditions logicalGrouping="MatchAll">
          <add input="{REQUEST_METHOD}" negate="true" pattern="^POST$" />
        </conditions>
        <action type="Redirect" url="{R:1}" redirectType="Permanent"/>
      </rule>
</rules>
</rewrite>
</system.webServer> 
```

# ruby-on-rails - ruby on rails 控制器类中的错误

> ID：15570305
> 
> 赞同：0
> 
> 时间：2013-03-22T12:27:40.640
> 
> 标签：ruby-on-rails

我遇到了这种错误，之前它穿着正确，但有些错误是怎么回事。

```
 undefined method `save' for 2:Fixnum 
```

这是我在 line_item_controller.rb/create 中的代码

```
def create
  @cart = current_cart
  product = Product.find(params[:product_id])
  @line_item = @cart.add_product(product.id)

  respond_to do |format|
    if @line_item.save
      format.html { redirect_to store_url}
      format.js   { @current_item = @line_item }
      format.json { render :json => @line_item, :status => :created, :location => @line_item }
    else
      format.html { render :action => "new" }
      format.json { render :json => @line_item.errors, :status => :unprocessable_entity }
    end
  end
end 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:31:49.367

`@cart.add_product`如您所料，似乎返回一个数字 ( `Fixnum`) 而不是模型对象。如果您不知道如何解决这个问题，请向我们展示`add_product`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:32:06.640

看起来您的`add_product`方法返回的是整数而不是您期望的产品。

这意味着`@line_item.save`正在评估为`<some number>.save`，这就是您收到错误的原因。

检查`add_product`并确保它返回对象而不是 id。

# joomla - Joomla 后端错误

> ID：15570307
> 
> 赞同：0
> 
> 时间：2013-03-22T12:27:48.233
> 
> 标签：joomla

我安装了 Joomla 1.5.23 版，问题是我的后端坏了。我可以登录，但在那里我无能为力。例如，当我单击以编辑我的文章时，我收到如下错误消息：

```
Warning: require_once(/hp/az/ab/zp/www/Joomla/administrator/libraries/joomla/template/template.functions.php) [function.require-once]: failed to open stream: No such file or directory in /hp/az/ab/zp/www/Joomla/libraries/joomla/application/component/model.php on line 354 Fatal error: require_once() [function.require]: Failed opening required '/hp/az/ab/zp/www/Joomla/administrator/libraries/joomla/template/template.functions.php' (include_path='.:/usr/share/php:/usr/share/pear') in /hp/az/ab/zp/www/Joomla/libraries/joomla/application/component/model.php on line 354 
```

在我看来，缺少一个文件（template.function.php），但我没有错误消息告诉我的目录。所以我无法查找文件是否丢失。我在另一个目录中找到了这个文件，并将权限设置为 777。但它不起作用。我有第二个 Joomla 安装（相同版本）在同一台服务器上运行良好。但另一个不起作用。我不知道如何解决这个问题。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:21:01.157

这是一个新网站吗？还是刚刚停止工作的现有网站？如果是后者，我会担心的。

如果是新站点，则安装站点时可能并非所有内容都已移动/上传。另外，你应该知道，1.5系列的最新版本是1.5.26。我建议升级到那个，看看它是否首先解决了你的问题。

您可以在此处获取 1.5.26 的文件：http: [//joomlacode.org/gf/download/frsrelease/16890/73390/Joomla_1.5.26-Stable-Full_Package.zip](http://joomlacode.org/gf/download/frsrelease/16890/73390/Joomla_1.5.26-Stable-Full_Package.zip)

无需多说，但在升级您的站点之前始终进行当前备份。（如果它是一个新站点，这一点就不那么重要了，但你仍然应该这样做，这样你就有一个地方可以回来，以防出现问题。）

如果您使用的是 FTP，那么您可以在本地解压缩文件，然后将它们作为一个整体放入，它应该会覆盖那里的文件，并保留您自定义的文件（如果有的话）。

如果您通过 SSH 连接到服务器，则可以将 zip 文件移动到 Joomla 站点的根目录（组件和管理员文件夹所在的位置），将其解压缩并通过以下命令覆盖：

```
解压 -o Joomla_1.5.26-Stable-Full_Package.zip

```

# .net - Windows 服务中的套接字服务器

> ID：15570309
> 
> 赞同：0
> 
> 时间：2013-03-22T12:27:53.143
> 
> 标签：.net, sockets, windows-services

我有部署多个 Windows 服务的服务应用程序

```
static void Main()
        {
            DebugManager manager = new DebugManager();

            ServiceBase[] ServicesToRun;
            ServicesToRun = new ServiceBase[] 
            { 
                new Service1(),
                new Service2(),
                new Service3(),
                            };
            ServiceBase.Run(ServicesToRun);
        } 
```

这是调试管理器

```
public class DebugManager : BaseDebug
    {
        private AsyncServer s;

        public DebugManager()
        {
            s = new AsyncServer(10000);
            s.Start();
        }

        public override void SendMessage(string message)
        {
            ts.SendMessage(message);
        }

       } 
```

以及 Socket Server 本身

```
class AsyncServer
    {
        private Socket _serverSocket;
        private List<Socket> _clients;

        private int _port;
        byte[] buffer = new byte[255];

        public AsyncServer(int port) { _port = port; }

        public void Start()
        {
            try
            {
                _clients = new List<Socket>();
                SetupServerSocket();
                _serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), _serverSocket);
            }
            catch(Exception ex)
            {
                EventLogManager.LogInformation(ex.ToString());
            }
        }

        private void SetupServerSocket()
        {
            try
            {
                IPHostEntry localMachineInfo = Dns.GetHostEntry(Dns.GetHostName());
                IPEndPoint myEndpoint = new IPEndPoint(localMachineInfo.AddressList[1], _port);
                _serverSocket = new Socket(myEndpoint.Address.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
                _serverSocket.Bind(myEndpoint);
                _serverSocket.Listen((int)SocketOptionName.MaxConnections);
            }
            catch (Exception ex)
            {
                EventLogManager.LogInformation(ex.ToString());
            }
        }

        private void AcceptCallback(IAsyncResult result)
        {
            try
            {
                Socket s = (Socket)result.AsyncState;
                Socket socket = s.EndAccept(result);
                _clients.Add(socket);

                _serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), result.AsyncState);
            }
            catch (SocketException ex)
            {
                EventLogManager.LogInformation(ex.ToString());
            }
            catch (Exception ex)
            {
                EventLogManager.LogInformation(ex.ToString());
            }
        }

       public void SendMessage(string message)
        {
            try
            {
                byte[] bits = Encoding.UTF8.GetBytes(message);
                SocketAsyncEventArgs args = new SocketAsyncEventArgs();
                args.SetBuffer(bits, 0, bits.Length);

                foreach (var client in _clients)
                {
                    if (!client.Connected)
                    {
                        _clients.Remove(client);
                        continue;
                    }

                    try
                    {
                        client.SendAsync(args);
                    }
                    catch (Exception ex)
                    {
                        EventLogManager.LogInformation(ex.ToString());
                    }
                }
            }
            catch (Exception ex)
            {
                EventLogManager.LogInformation(ex.ToString());
            }
        }
    } 
```

当我部署我的服务时，我的套接字服务器似乎没有启动或启动然后立即关闭。我的设计有什么问题，或者可能是我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:59:55.240

已经发现问题了。它是

```
private void SetupServerSocket()
        {
            try
            {
                IPHostEntry localMachineInfo = Dns.GetHostEntry(Dns.GetHostName());
                //Here is problem 
                IPEndPoint myEndpoint = new IPEndPoint(localMachineInfo.AddressList[1], _port);
                _serverSocket = new Socket(myEndpoint.Address.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
                _serverSocket.Bind(myEndpoint);
                _serverSocket.Listen((int)SocketOptionName.MaxConnections);
            }
            catch (Exception ex)
            {
                EventLogManager.LogInformation(ex.ToString());
            }
        } 
```

返回了几个地址，[1] 是 IPV6。将其更改为 InterNetwork 并且可以正常工作。我认为它以前可以工作，但我的客户端无法连接到服务器。

# android - 用多个片段替换单个活动

> ID：15570314
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:27:58.237
> 
> 标签：android, android-fragments, android-activity

`Activity`是否可以使用多个对象替换单个`Fragment`对象？如果是这样，我将如何处理方向变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:48:19.420

你需要大量学习才能知道你在处理什么。[首先我建议你在这里](http://developer.android.com/guide/components/fragments.html)学习 Fragments ，然后按照[Using Fragments in Android - Tutorial](http://www.vogella.com/articles/AndroidFragments/article.html) and [Android User Interface Design: Working With Fragments -tutorial](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)

要处理方向更改，请遵循本网站中的步骤：[在 Android UI 框架中处理方向更改](http://www.techrepublic.com/blog/app-builder/handling-orientation-changes-in-the-android-ui-framework/225) [按照从 android 构建您的第一个应用程序](http://developer.android.com/training/basics/firstapp/index.html)以练习应用程序构建，不要忘记检查具有大量片段示例的[android api 示例等。](http://developer.android.com/tools/samples/index.html)

# jquery - 将对象数组发送到 WCF

> ID：15570317
> 
> 赞同：1
> 
> 时间：2013-03-22T12:28:10.027
> 
> 标签：jquery, asp.net, wcf

在我的应用程序中，我想使用 jQuery 和 Ajax 保存数据。我有一个 WCF 服务。我想使用 ajax 保存对象列表。我尝试使用以下代码，但它不起作用。

**jQuery代码：**

> ```
>  var listOfObjects=new Array(); 
> ```

```
 //creating list of objects
      for(var i=0;i<5;i++)
       {   var MyEntity=new Object();
           MyEntity.TestId =i;
           MyEntity.TestId =i+"testName";
           listOfObjects.push(MyEntity);
       }

        //Saving info
        $.ajax({
            type: "POST",
            async: false,
            data: JSON.stringify(listOfObjects),
            url: "../ServiceLayer/myService.svc/SaveResults",
            contentType: "application/json; charset=utf-8",
            dataType: "json",          
            success: function () {
                alert("success");
            },
            error: function () {
                alert("Error");
            }
        }); 
```

**周转基金：**

```
 [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json,
     ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    public void SaveLabResults(List<MyEntity> myEntity)
    {
          var lstEntities=myEntity;
    } 
```

**实体：**

```
[DataContract]
public class MyEntity
{
    [DataMember]
    public string TestId { get; set; }
    [DataMember]
    public string TestName { get; set; }
} 
```

通过这种方式，我正在尝试发送列表数据。但是内部服务器错误即将到来。我没有得到实际上我错的地方。还有其他方法可以将对象列表发送到 WCF 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:57:38.517

**jQuery代码：**

> ```
>  var listOfObjects=new Array(); 
> ```

```
 //creating list of objects
      for(var i=0;i<5;i++)
       {   var MyEntity=new Object();
           MyEntity.TestId =i;
           MyEntity.TestId =i+"testName";
           listOfObjects.push(MyEntity);
       }

       var jsonList=JSON.stringify(listOfObjects);
       var dataToSend = '{"myEntity":'+jsonList+'';

        //Saving info
        $.ajax({
            type: "POST",
            async: false,
            data: dataToSend,
            url: "../ServiceLayer/myService.svc/SaveResults",
            contentType: "application/json; charset=utf-8",
            dataType: "json",          
            success: function () {
                alert("success");
            },
            error: function () {
                alert("Error");
            }
        }); 
```

**周转基金：**

```
 [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json,
     ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    public void SaveLabResults(List<MyEntity> myEntity)
    {
          var lstEntities=myEntity;
    } 
```

**实体：**

```
[DataContract]
public class MyEntity
{
    [DataMember]
    public string TestId { get; set; }
    [DataMember]
    public string TestName { get; set; }
} 
```

我缺少的是

```
 1.var jsonList=JSON.stringify(listOfObjects);
 2.var dataToSend = '{"myEntity":'+jsonData+''; 
```

第二点 myEntity 键应该在最终的 json 对象中。并且键应该与 wcf 方法对象参数相同。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:35:10.053

在调用客户端代码之前，尝试`BodyStyle = WebMessageBodyStyle.Bare`使用您的服务器方法或在 JSON 数据中引入一个名为“myEntity”的根元素。`JSON.stringify`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:32:03.953

可能是这个错误：

```
//creating list of objects
  for(var i=0;i<5;i++)
   {   var MyEntity=new Object();
       MyEntity.TestId =i;
       MyEntity.TestId =i+"testName";
       listOfObjects.push(MyEntity);
   } //-------------------^--------------shouldn't it be capital M 
```

并在 ajax 函数中：

```
$.ajax({
        type: "POST",
        async: false,
        data: {data : JSON.stringify(listOfObjects)}, //<---not quite sure about it. 
```

# java - 如何从时间选择器中保存和显示 currentMinute？（currentHour 已经实现）

> ID：15570320
> 
> 赞同：0
> 
> 时间：2013-03-22T12:28:19.757
> 
> 标签：java, android, eclipse, sqlite, timepicker

我有一个应用程序将 CurrentHour 存储在 sqlite 数据库中，然后将其显示在另一个活动中。这是我第一次使用 TimePicker - 所以我不确定自己到底做错了什么，但是当我添加到存储和查看 CurrentHour 的成功代码时 - 当我尝试为 CurrentMinute 添加代码（基于 CurrentHour）时应用程序不会保存数据。

# add_country.xml （我试图从中存储分钟值的 TimePicker 所在的位置）

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" android:layout_weight="1">

<LinearLayout android:id="@+id/linearLayout"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" 
  android:padding="5dp">

  <EditText android:id="@+id/nameEdit"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/name_hint"
     android:inputType="textPersonName|textCapWords"/>

  <EditText android:id="@+id/capEdit"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/cap_hint"
     android:inputType="textPersonName|textCapWords"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Data Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10MB" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="right"
        android:textColor="#ffffff"
        android:text="Unlimited Data" />
</LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Bandwidth Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10kbs" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:textColor="#ffffff"
        android:gravity="right"
        android:text="Unlimited Bandwidth" />
</LinearLayout>

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:textAppearanceSmall" />

 <TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="WiFi Time Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<TimePicker
    android:id="@+id/timeEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:layout_weight="1.0" />

 <EditText
    android:id="@+id/codeEdit"
    android:inputType="textUri"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:lines="1"
    android:hint="@string/code_hint"
    android:imeOptions="actionNext" />

  <Button android:id="@+id/saveBtn" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginTop="15dp"
     android:layout_gravity="center_horizontal"
     android:text="@string/save_btn"/>
</LinearLayout>
</ScrollView> 
```

# 添加国家/地区 JAVA

来自 TimePicker 的很可能的分钟值在这里搞砸了

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private TimePicker timeEt;
 private TimePicker minEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);
      timeEt = (TimePicker) findViewById(R.id.timeEdit);
      minEt = (TimePicker) findViewById(R.id.timeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         timeEt.setCurrentHour(extras.getInt("time"));
         minEt.setCurrentMinute(extras.getInt("min"));
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

       private void saveContact() 
       {
          DatabaseConnector dbConnector = new DatabaseConnector(this);

          if (getIntent().getExtras() == null)
          {
              dbConnector.insertContact(nameEt.getText().toString(),
                      capEt.getText().toString(),
                      timeEt.getCurrentHour().toString(),
                      minEt.getCurrentMinute().toString(),
                      codeEt.getText().toString());
          }
          else
          {
             dbConnector.updateContact(rowID,
                nameEt.getText().toString(),
                capEt.getText().toString(),
                timeEt.getCurrentHour().toString(), /* Storing as String*/
                minEt.getCurrentMinute().toString(), 
                codeEt.getText().toString());
          }
       }
} 
```

# 数据库连接器 Java

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String time, String min) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("time", time);
              newCon.put("min", min);
              newCon.put("code", code);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String cap,String code,  String time, String min) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("time", time);
              editCon.put("min", min);
              editCon.put("code", code);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id", "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null, null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
} 
```

# 数据库打开助手.JAVA

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap, code, time, min);";                 
    db.execSQL(createQuery);        
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

} 
```

附言

我希望将 CurrentHour 和 CurrentMinute 同时显示在 view_country.xml 的同一行（如果可能）

```
<TextView 
android:id="@+id/timeEdit"
style="@style/StyleText"/> 
```

如果不是 - 只是获得一些帮助传递数据会很棒！（一旦我弄清楚为什么数据没有通过，我会弄清楚其余的）

# 日志猫：

```
03-22 08:41:10.120: D/Activity(9149): Activity.onPause(), editTextTapSensorList size: 0
03-22 08:41:10.240: I/Adreno200-EGLSUB(9149): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 08:41:10.240: D/memalloc(9149): ion: Mapped buffer base:0x5d981000 size:614400 offset:0 fd:69
03-22 08:41:10.300: D/memalloc(9149): ion: Mapped buffer base:0x5da29000 size:614400 offset:0 fd:75
03-22 08:41:10.350: D/memalloc(9149): ion: Mapped buffer base:0x5debf000 size:614400 offset:0 fd:78 
03-22 08:41:10.360: D/memalloc(9149): ion: Unmapping buffer  base:0x5d05e000 size:614400
03-22 08:41:10.360: D/memalloc(9149): ion: Unmapping buffer  base:0x5d12e000 size:614400
03-22 08:41:10.360: D/memalloc(9149): ion: Unmapping buffer  base:0x5d385000 size:614400
03-22 08:41:16.316: E/SQLiteDatabase(9149): Error inserting min= time=41 code=8 cap= name=Tttttsstttt
03-22 08:41:16.316: E/SQLiteDatabase(9149): android.database.sqlite.SQLiteException: table country has no column named min: , while compiling: INSERT INTO country(min,time,code,cap,name) VALUES (?,?,?,?,?)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:112)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1736)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1609)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at    com.nfc.linkingmanager.DatabaseConnector.insertContact(DatabaseConnector.java:42)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at com.nfc.linkingmanager.AddEditCountry.saveContact(AddEditCountry.java:96)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at  com.nfc.linkingmanager.AddEditCountry.access$1(AddEditCountry.java:90)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at com.nfc.linkingmanager.AddEditCountry$1$1.doInBackground(AddEditCountry.java:63)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-22 08:41:16.316: E/SQLiteDatabase(9149):     at java.lang.Thread.run(Thread.java:856)
03-22 08:41:16.316: D/Activity(9149): Activity.onPause(), editTextTapSensorList size: 0
03-22 08:41:16.336: I/Adreno200-EGLSUB(9149): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 08:41:16.347: D/memalloc(9149): ion: Mapped buffer base:0x5d05e000 size:614400 offset:0 fd:58
03-22 08:41:16.377: D/memalloc(9149): ion: Mapped buffer base:0x5d12e000 size:614400 offset:0 fd:62
03-22 08:41:16.407: D/memalloc(9149): ion: Unmapping buffer  base:0x5d981000 size:614400
03-22 08:41:16.407: D/memalloc(9149): ion: Unmapping buffer  base:0x5da29000 size:614400
03-22 08:41:16.407: D/memalloc(9149): ion: Unmapping buffer  base:0x5debf000 size:614400
03-22 08:41:16.457: D/memalloc(9149): ion: Mapped buffer base:0x5d385000 size:614400 offset:0 fd:66 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:55:35.130

错误很明显。您尝试将值插入到不存在的列中：

```
table country has no column named min: , while compiling: INSERT INTO country(min,time,code,cap,name) VALUES (?,?,?,?,?) 
```

请注意使用正确的列定义。

```
 String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap, code, time, min);";  <==HERE

 public void insertContact(String name, String cap, String code, String time, String min) 
       {
          ContentValues newCon = new ContentValues();
          newCon.put("name", name);
          newCon.put("cap", cap);
          newCon.put("time", time);
          newCon.put("min", min); <== HERE
          newCon.put("code", code);

       public void updateContact(long id, String name, String cap,String code,  String time, String min) 
       {
          ContentValues editCon = new ContentValues();
          editCon.put("name", name);
          editCon.put("cap", cap);
          editCon.put("time", time);
          editCon.put("min", min); <== HERE
          editCon.put("code", code); 
```

`min`是一个数据库聚合函数。我认为您不能将其用作列定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:55:48.943

异常清楚地表明该`country`表没有`min`列。

`SQLiteException: table country has no column named min: , while compiling: INSERT INTO country(min,time,code,cap,name) VALUES (?,?,?,?,?)`

# c - Visual Studio 2005 中 lexapp.c 的问题

> ID：15570328
> 
> 赞同：2
> 
> 时间：2013-03-22T12:28:48.833
> 
> 标签：c, visual-studio-2005, lex

我在 Visual Studio 2005 中运行程序时遇到了一个奇怪的问题。解释我在做什么：

1.  项目在 Visual Studio 6 中
2.  将项目转换为 Visual Studio 2005
3.  在 lexapp.c 中出现错误（这是在我将 app.l 文件提供给它之后从 Unix 机器生成的 C 文件）

    错误 - 初始化器不是常量

    `FILE *yyin = {stdin}, *yyout = {stdout};`

4.  将上面的代码更改为

    `FILE *yyin, *yyout;`

    并将以下代码放入`yylex()`

    `yyin = stdin; yyout = stdout;`

5.  代码现在可以很好地编译和构建。

6.  调试发现它似乎在 lexapp.c 中进入了一个无休止的 while 循环。

相同的代码在 Visual Studio 6 中工作正常。我无法弄清楚为什么我声明`yyin`或`yyout`会导致问题的方式。是否可以获得与 Visual Studio 2005 相冲突的 lexapp.c 文件，因为我相信我在步骤 4 中所做的更改会导致问题。将不胜感激你们在这里的任何意见。但是，我是 lex & yacc 的新手。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:00:04.333

VC++ 中的“编译为 C”相当于 gcc 中的“-std=C89”，其中 gcc 通常编译为 GNU99（带有扩展的 C99）。当前的 C 标准是 C11。VC++ 的“编译为 C”缺少 C99 和 C11 添加的功能。当配置为“编译为 C”时，我会将其视为过时的 C 编译器，或者将其视为配置为“编译为 C++”时的最新 C++ 编译器。这解释了为什么使用 gcc 编译的代码可能无法使用 MSVC++ 编译。我建议原始代码使用 MSVC++ 的 C89 支持中没有的 C99 功能。

解决方案是将 C99 代码转换为等效的 C89 代码，您似乎已经完成（或开始这样做），或者使用 C99/C11 编译器（例如 gcc）对其进行编译。

# c++ - CRTP 和动态多态性编译错误

> ID：15570333
> 
> 赞同：6
> 
> 时间：2013-03-22T12:29:06.167
> 
> 标签：c++, templates, polymorphism, standards, crtp

```
class A {
    virtual A* foo() = 0;
};

template<class T>
class B : public A {
    virtual T* foo() { return nullptr; }
};

class C : public B<C> {

}; 
```

[这是混合复合模式和奇怪重复的模板模式](https://stackoverflow.com/questions/13867901/possibility-to-mix-composite-pattern-and-curiously-recurring-template-pattern)的可能性的简化实现。我收到以下错误：

```
Return type of virtual function 'foo' is not covariant with the return type of the function it overrides ('C *' is not derived from 'A *') 
```

在 clang 3.0、gcc 4.7 和 Visual Studio 2008 上测试。

第一个解决方案：

```
class C : public A, public B<C> {} 
```

在 Visual Studio 下编译，并警告 B 已经是 A 的子级，并且不会**在**clang 下编译并出现初始错误。

另一种解决方法：

```
class D : public A {}
class C : public B<D> {} 
```

解决了不完整性问题，但我无法弄清楚我将拥有多少个 A 实例。直觉告诉我 A 是虚拟的，因此应该只有一个。

此解决方法还会创建不可读的代码。

标准对这种情况有何规定？这段代码应该编译吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:40:24.630

您的虚函数`A::foo()`返回一个`A*`，而`B<C>::foo()`用于覆盖它的函数返回一个`C*`.

这在理论上确实尊重协变原则，因为`C`确实是 (derives from)`A`的一种特化，但在实例化时，这是未知的，因为`C`它是一个不完整的类型。

重新考虑您的设计的一种可能方法是制作`A`一个类模板，并让`B`模板参数传播`T`到`A`：

```
template<typename T>
class A {
    virtual T* foo() = 0;
};

template<class T>
class B : public A<T> {
    virtual T* foo() { return nullptr; }
}; 
```

关于您的解决方法：

> 标准对这种情况有何规定？这段代码应该编译吗？如果不是，为什么？

它不应该编译，因为仅仅make的事实`C`也显式地派生`A`（注意，你最终会得到*两个*`A`不同的inside类型的基本子对象）在实例化. 根据 C++11 标准的第 9.2/2 段：`C``C``B<C>`

> **`}`在*class-specifier*结束时，类被视为完全定义的对象类型 (3.9)（或完整类型）。** 在类*成员规范*中，类在函数体、默认参数和非静态数据成员（包括嵌套类中的此类内容）的*大括号或等式初始化器中被认为是完整的。**否则，它在其自己的类成员规范*中被视为不完整。

# php - 如何将mysql数据库表中的列转换为行

> ID：15570337
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:29:17.967
> 
> 标签：php, jquery, mysql, database

我想将所有列数据转换为行数据。

编号 | 部门名称 | 学生姓名1 | 学生姓名2 | 学生姓名3 | 学生姓名4 |
1 | 呸呸呸| 美国广播公司 | XYZ | 杰尔姆 | tmn |

我创建的这个表和值是使用数组保存的。

我想将所有学生姓名保存在一列中，如下所示：

编号 | 部门名称 | 学生姓名 |
1 | 呸呸呸| 美国广播公司 |
2 | 呸呸呸| XYZ |
3 | 呸呸呸| 杰尔姆 |
4 | 呸呸呸| tmn |

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:55:17.123

第一个表到数组 $students，伪代码：

```
for($i=2; $i<sizeof($students);$i++) {
  mysql_query("insert into 'newTable' ('division name', 'student name') values ($students[1], students[$i]) "); 
} 
```

# javascript - 表格行的高度不会保持固定

> ID：15570340
> 
> 赞同：0
> 
> 时间：2013-03-22T12:29:26.840
> 
> 标签：javascript, html

我正在通过 javascript 动态地将行和单元格创建到 HTML 表中。

这是片段：

```
var rowCount = table.rows.length;
var row1 = table.insertRow(rowCount);

var cell1_1 = row1.insertCell(0);
cell1_1.innerHTML = "From"; 
```

如果我的函数添加了 5 行，那么行之间会有很多空白。它们从页面顶部到底部分布。我尝试将行的 style.height 设置为 20 px zo 保持固定，但它不起作用。我想要每行的固定高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:38:14.447

尝试这个：

## CSS

```
.testTable {
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
    border-spacing: 0;
}
.testTable > tbody > tr {
    height:20px !important;
    vertical-align:middle !important;
}
.testTable > tbody > tr > td {
    height:20px !important;
    overflow: hidden !important;
    vertical-align: middle !important;
} 
```

## JavaScript

```
// Assign a class to the table
var table = document.getElementById(tableID);
table.className = 'testTable' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:44:04.453

**1.**您可以使用 div 标签而不是 table。[您可以在此处](https://stackoverflow.com/questions/3053205/how-create-table-only-using-div-tag-and-css)获得有关 div 的更多信息

**2.**您可以使用以下方法在“cell1_1”上应用样式：

```
 cell1_1.style.height="20px"; 
```

但是每个浏览器都有*根据规则**计算样式*和样式。因此，要“重载”这些规则，只需使用以下内容：

 *```
 cell1_1.style.display="inline-block"; 
```

我希望它有帮助！

**编辑** 结果：

```
 var rowCount = table.rows.length;
    var row1 = table.insertRow(rowCount);

    var cell1_1 = row1.insertCell(0);
    cell1_1.innerHTML = "From";
    cell1_1.style.height="20px";
    cell1_1.style.display="inline-block"; 
```*

# android - 电子邮件意图不起作用

> ID：15570341
> 
> 赞同：5
> 
> 时间：2013-03-22T12:29:27.423
> 
> 标签：android, android-intent

我`onOptionItemSelected`的菜单中有这个。每当我尝试运行此意图时，它都会引发强制关闭错误。

```
case R.id.Mail:
    Intent emailIntent=new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("plain/text");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,message);
    startActivity(emailIntent);
    break; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T12:44:35.757

它可能会帮助你..

```
Intent email = new Intent(Intent.ACTION_SEND);
email.putExtra(Intent.EXTRA_EMAIL, new String[]{"abc@gmail.com"});        
email.putExtra(Intent.EXTRA_SUBJECT, "Sunject Text Here..");
email.putExtra(Intent.EXTRA_TEXT, "");
email.setType("message/rfc822");
startActivity(Intent.createChooser(email, "Send Mail Using :")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:34:46.837

尝试这样使用它

```
 Intent intent = new Intent(); 
    intent.setAction(android.content.Intent.ACTION_SEND); 
    intent.setType("plain/text");
    intent.putExtra(android.content.Intent.EXTRA_EMAIL,  new String[]{address});
    return intent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:35:25.823

试试这个。emailIntent.setType("纯文本");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:09:15.423

您的代码是正确的。可能您必须检查您的电子邮件是否已在您的 android 移动电子邮件应用程序中注册。您必须在您的移动电子邮件应用程序中创建一个 ID。

```
case R.id.Mail:
    Intent emailIntent=new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("plain/text");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,message);
    startActivity(emailIntent);
    break; 
```

# php - Facebook 提要 - 图片未显示

> ID：15570354
> 
> 赞同：0
> 
> 时间：2013-03-22T12:29:59.747
> 
> 标签：php, codeigniter, facebook-graph-api, facebook-wall

当我将提要发布到我的墙上时，一切都正常工作，但图片没有出现。

```
$ret_obj = $this->facebook->api('/me/feed', 'POST',
                                    array(
                                      'access_token' => $access_token,
                                      'name' =>'Andameter',
                                      'caption' =>'Rating of Andameter',
                                      'source' => 'http://mydomainname/Andameter/uploads',
                                      'link' => 'http://apps.facebook.com/myappname',
                                      'message' => $pic_category.' : '.$user_name.' rated '.$pic_title.' with '.$indiv_likes_count.' &bs and '.$indiv_dislikes_count.' andas. What\'s about you ?', 
                                      'picture' => 'http://mydomainname/Andameter/uploads/tech1.jpg',
                                      'description' => $pic_description

                                 ));
            echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>'; 
```

谁能帮助我我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:40:15.007

实际上，您的图片 URL 包含 Facebook 无法解析的 Localhost。您必须传递一个有效的域，以便您的图片可以进入 facebook。将您的代码上传到服务器中（如果有）并传递您的代码的完整 URL，它将起作用。

# sql - 如何从几天没有数据的表中获取两个日期之间的值

> ID：15570356
> 
> 赞同：0
> 
> 时间：2013-03-22T12:30:04.880
> 
> 标签：sql, oracle-sqldeveloper, sql-scripts

我通过分组日期从我的表中得到一个总数。例如，如果您在我尝试获取“08.03.2013”​​和“22.03.2013”​​之间的值时查看下图。2013 年 3 月 18 日和 2013 年 3 月 20 日没有数据。

但我需要那个日期，因为我在前端使用 highchart，不想在前端处理这个。

你有什么建议吗？

谢谢

```
SELECT TO_CHAR(CR_DATE, 'DD') DAY, TO_CHAR(CR_DATE, 'MM') MONTH, TO_CHAR(CR_DATE, 'YY') YEAR, 
count(STAB_ID) AS total FROM paytrans 
WHERE acct_id = 1552 AND status = 'DND_FNSH' and CR_DATE > '08.03.2013' AND CR_DATE < '22.03.2013' 
GROUP BY TO_CHAR(CR_DATE, 'YY'), TO_CHAR(CR_DATE, 'DD'), TO_CHAR(CR_DATE, 'MM') 
ORDER BY year, month, day 
```

![在此处输入图像描述](../Images/dbb310f8ad16765538bae0e5f3df52ea.png)

[编辑@art]

```
SELECT  TO_CHAR(CR_DATE-1, 'DD')  + LEVEL DAY, TO_CHAR(CR_DATE, 'MM')    MONTH, TO_CHAR(CR_DATE, 'YY')  YEAR,(cr_date-1) + LEVEL AS cr_date
  FROM   
(
SELECT
       To_Date('08.05.2013', 'DD.MM.YYYY')  end_date, 
       To_Date('08.04.2013', 'DD.MM.YYYY')  cr_date 
 FROM dual     
)
CONNECT BY LEVEL <= (end_date - cr_date)+1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:53:17.227

这是根据您的日期的日历。您可以在查询中比较日期和日历日期：

```
SELECT cr_date
     , to_char(cr_date, 'DD')   curr_day
     , to_char(cr_date, 'MM')   curr_month
     , to_char(cr_date, 'YYYY') curr_year
 FROM
 (
 SELECT (cr_date-1) + LEVEL AS cr_date
   FROM 
   (
    SELECT To_Date('08.05.2013', 'DD.MM.YYYY')  end_date
         , To_Date('08.04.2013', 'DD.MM.YYYY')  cr_date 
      FROM dual
   )
   CONNECT BY LEVEL <= (end_date - cr_date)+1
 )
/

CR_DATE    CURR_DAY    CURR_MONTH    CURR_YEAR
-------------------------------------------------
4/8/2013     08         04          2013
4/9/2013     09         04          2013
4/10/2013    10         04          2013
....
....
4/30/2013    30         04          2013
5/1/2013     01         05          2013
5/2/2013     02         05          2013
...
...
5/8/2013     08          05         2013 
```

# django - Django 'QuerySet' 对象没有属性 'split'

> ID：15570359
> 
> 赞同：1
> 
> 时间：2013-03-22T12:30:05.737
> 
> 标签：django, django-forms

我希望你能在这里看到我想要做什么，只是我想迭代为 group 发布的值，这些值看起来像 group = 1,3,5 等，并将它们添加到数据库中。组是一个复选框。所以我想使用拆分选项。我收到以下消息......

**'QuerySet' 对象没有属性 'split'**

所以我的理解是它在我用来填充表单的初始化中，这是一个查询，我需要这个，但在发布后它应该只是一个列表。我做错了什么？

**视图.py**

```
form = BatchForm(request.user, request.POST)
        # Check we have valid data before saving trying to save.
        if form.is_valid():
            # Clean all data and add to var data.
            data = form.cleaned_data
            groups = data['group'].split(",")
            for item in form.cleaned_data['group']:
                batch = Batch(content=data['content'],
                              group=Group.objects.get(pk=item),
                              user=request.user
                              )
                batch.save() 
```

**表格.py**

```
class BatchForm(forms.ModelForm):

    class Meta:
        model = Batch
        exclude = ('user', 'group')

    def __init__(self, user=None, *args, **kwargs):
        super(BatchForm, self).__init__(*args,**kwargs)
        if user is not None:
            form_choices = Group.objects.for_user(user)
        else:
            form_choices = Group.objects.all()
        self.fields['group'] = forms.ModelMultipleChoiceField(
            queryset=form_choices
        ) 
```

**模板.py**

```
{% for value, text in form.group.field.choices %}

    <input type="checkbox" name="group" value="{{ value }}" /> {{text}}<br />

{% endfor %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:44:32.813

因为您使用的是清理后的数据并且它是一个`ModelMultipleChoice`字段，所以它实际上是一个`queryset`.

尝试这样的事情：

```
form = BatchForm(request.user, request.POST)
    # Check we have valid data before saving trying to save.
    if form.is_valid():
        # Clean all data and add to var data.
        data = form.cleaned_data
        for group in data['group']:
            batch = Batch(
                content=data['content'],
                group=group,
                user=request.user
            )
            batch.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:54:29.280

```
 if form.is_valid():
        # Clean all data and add to var data.
        data = form.cleaned_data
        groups = [x.group for x in form.cleaned_data['group']]
        for item in groups:
            batch = Batch(content=data['content'],
                          group=Group.objects.get(pk=item),
                          user=request.user
                          )
            batch.save() 
```

# windows-8 - 如何在 Windows 8 METRO 应用程序中实现错误记录？

> ID：15570364
> 
> 赞同：3
> 
> 时间：2013-03-22T12:30:18.843
> 
> 标签：windows-8, microsoft-metro, winrt-xaml, error-logging

您好我正在开发一个 Windows 8 c#/xaml Metro 应用程序。

我想在我的应用程序中实现错误日志记录。我想以更好的方式处理错误日志。

1）如何记录错误信息（以便开发者纠正错误）

2）是否有任何 3rd 方工具/免费库用于在 Metro 应用程序中记录错误。

3）有哪些可用于错误记录的各种替代方法？

4）错误记录的最佳做法是什么？

请帮帮我。

你的回答对我很有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-30T09:11:02.613

对于 Windows 8.1，您可以使用 LoggingSession 和 LogginChannel 的新 Windows.Foundation.Diagnostics 功能。

[http://code.msdn.microsoft.com/windowsapps/LoggingSession-Sample-ccd52336](http://code.msdn.microsoft.com/windowsapps/LoggingSession-Sample-ccd52336) 请参阅构建会话：[http ://channel9.msdn.com/Events/Build/2013/3-136](http://channel9.msdn.com/Events/Build/2013/3-136)

```
var channel = new LoggingChannel ("ChannelName");
var session = new LoggingSession("Session Name");
session.AddLoggingChannel(channel, LoggingLevel.Warning);

channel.LogMessage("Message to log", LoggingLevel.Error);
channel.LogValuePair("Count", 42, LoggingLevel.Error);

//when error detected, save the log session to disk
var logFile = await session.SaveToFileAsync(ApplicationData.Current.LocalFolder, "CrashLog"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:33:41.010

Microsoft 提供了一个[日志记录示例，](http://code.msdn.microsoft.com/windowsapps/Logging-Sample-for-Windows-0b9dffd7)这可能会让您入门。

在[这篇博](http://bernhardelbl.wordpress.com/2013/01/12/how-to-write-log-files-in-windows-store-apps/)文中，作者列举了一些在 Windows8 应用商店应用程序中设置日志记录的起点，以及自制的解决方案。

# events - 在 ember.js 中捕获 mouseMove 事件

> ID：15570365
> 
> 赞同：2
> 
> 时间：2013-03-22T12:30:21.197
> 
> 标签：events, ember.js, capture, mousemove

我正在尝试在 ember.js 中实现滑块视图；`mouseMove`为此，即使它离开第一次收到它的视图，我也需要捕获该事件。在纯js中，我会做这样的事情：

```
element.addEventListener 'mousemove', ..., true   // true means 'capture event' 
```

这还有一个很好的副作用，即即使鼠标离开浏览器窗口，也会在捕获元素上触发事件，模仿 UI 控件在本机应用程序中的行为方式。

我似乎无法在 ember.js 中找到一种方法来做到这一点，但我确信我忽略了一些东西。如果不是，那么推荐这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-31T20:55:47.720

查看旧问题的人的更新。现在组件包含`mouseMove`内置的事件处理程序和其他事件处理程序，以及添加自定义事件处理程序的能力。

[https://guides.emberjs.com/v2.12.0/components/handling-events/](https://guides.emberjs.com/v2.12.0/components/handling-events/)

```
import Ember from 'ember';

export default Ember.Component.extend({
    mouseMove() {
        //do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:19:44.777

不幸的是，`EventDispatcher`处理在根元素（通常是）上设置默认事件处理程序的 ，除了实际发生的视图之外，`body`没有做任何事情来限定视图。`mouseMove`

您可以查看`onDrag`,`onDragStart`和`onDragEnd`( `dragStart`, `drag`,`dragEnd`用余烬的说法) 事件，每个规范应该在源元素上触发，因此无论它们发生在哪里，都会在您的视图上触发。

您可以手动将处理程序分配给`body`自己。在处理程序中添加处理程序，`mouseUp`并在您的（以防止重复）和处理程序中删除它们。`mouseMove``mouseLeave``mouseEnter``mouseUp`

最简单的方法是使用`on`：

```
$('body').on('mouseMove.custom', $.proxy(this.yourHandler, this)); 
```

然后删除：

```
$('body').off('mouseMove.custom') 
```

# javascript - 使用 Ajax 进行“实时”更新

> ID：15570366
> 
> 赞同：0
> 
> 时间：2013-03-22T12:30:24.787
> 
> 标签：javascript, ajax

我有一个为用户显示“问题”和“答案”的网页。问题由管理员创建。我正在使用 PHP。

新的要求是“实时”更新用户的问题/答案（这不像策略游戏那样实时，但我称之为实时）。当管理员创建新问题时，用户应该看到它（出现新问题）。当管理员关闭现有问题时，它会从用户的角度消失。

我正在考虑使用 ajax 和 javascript timer 创建它——每分钟调用 ajax 并更新结果。我想知道这是正确的方法吗？

而且我想知道可用性/性能...我真的不需要为未更改的用户更新那些问题...您有什么建议来确定，管理员更改了哪些问题（也许我应该添加类似“ last_update_date”用于数据库中的问题，并将“last_update_date 放入每个问题的隐藏字段”并进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T15:03:56.367

如果您不想使用 Socket.io 实现自己的逻辑（如评论中所建议的那样），您应该查看一些在线可用的服务。

我使用[Pusher.com](https://pusher.com/)已经有一段时间了，对此我很满意。

# jquery - 正则表达式将 URL 替换为面包屑样式

> ID：15570367
> 
> 赞同：0
> 
> 时间：2013-03-22T12:30:25.333
> 
> 标签：jquery, regex, url-rewriting

我需要一些关于将任何 URL 转换为功能性面包屑的建议吗？

示例：/en-US/press/2013/03/Employers-Plan-Aggressive-Response-to-Shifting-Health-Care-Landscape-TW-NBGH-Survey-Finds.html

以上将是文档|页面的 URL，我想删除 '/[0-9]{2}/' 之后的所有内容以离开：'/en-US/press/2013/' replace '/// g, " "' 离开 'en-US press 2013' 然后将它们分组为功能链接 $1 [en-US](/en-US/) | $2[按](/en-US/press)$3 [2013](/en-US/press/2013/)

我脑子里有逻辑，我只是​​不知道如何在代码中表达出来。

谢谢詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:38:37.793

您可以使用前瞻断言作为 URL 的“/03/”部分的边界，然后只需在此之前添加您正在寻找的其他部分。换句话说：

```
([^/]+)/([^/]+)/(\d{4})(?=/\d\d/) 
```

您需要的每个部分都将在一个捕获组中。

前瞻可能甚至不是必需的，但它可以是一项额外的检查，以确保您获得正确的 URL 部分。此外，由于您使用的是 Javascript，因此您需要转义上面的正斜杠。

如果您更喜欢不使用前瞻，那么您可以简单地删除它的逻辑：

```
([^/]+)/([^/]+)/(\d{4})/\d\d/ 
```

这仍然需要整体匹配“/03/”部分，但由于您将使用捕获组来处理相关部分，因此应该没有任何影响。甚至可以`/\d\d/`完全删除它。

# iphone - 如何截取 Storyboard 项目流程的屏幕截图？

> ID：15570371
> 
> 赞同：2
> 
> 时间：2013-03-22T12:30:39.950
> 
> 标签：iphone, ios, objective-c, ipad, xcode4.5

我想知道是否有任何方法可以在 XCode 中以良好的分辨率捕获 Storyboard 完整视图，以便一次运行即可理解项目流程。我尝试使用 windows+shift+4+space 进行捕捉，但效果不太好，放大时变得模糊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:38:44.460

迄今为止，这项任务还没有真正好的解决方案，但其中一个答案可能会有所帮助：

1.  [XCode：将故事板导出到图像](https://stackoverflow.com/questions/13013810/xcode-export-storyboard-to-image)
2.  [在 Xcode 中制作情节提要的 PDF 的方法？](https://stackoverflow.com/questions/9469840/way-to-make-pdf-of-a-storyboard-in-xcode)

# java - 在Android中制作gridView中心

> ID：15570372
> 
> 赞同：2
> 
> 时间：2013-03-22T12:30:41.257
> 
> 标签：java, android

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="#FFFFFF"
    android:layout_gravity="center_horizontal"
    android:padding="5dip" >
    <GridView
        android:id="@+id/homeGridView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:columnWidth="160dip"
        android:adjustViewBounds="true" 
        android:layout_gravity="center_horizontal"
        android:layout_centerInParent="true"
        android:gravity="center_horizontal"
        android:numColumns="2"
        android:stretchMode="none"/>
</RelativeLayout> 
```

我一直在思考如何使 gridView 中心水平和垂直。我还附上了我的屏幕截图。下面是我的图像代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:layout_gravity="center_horizontal"
    android:padding="5dip" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"  
        android:layout_centerHorizontal="true">
    </ImageView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:44:56.353

好吧，如果您不想使用 TableLayout （[正如您在之前的帖子中所说](https://stackoverflow.com/questions/15567153/android-gridview-spacing-and-center-issue/15570343?noredirect=1#comment22070028_15570343)），那么处理 GridView 非常复杂（我已经失去了很多次）。我唯一的想法是强制您的 GridView 具有精确的宽度，即您的 2 个视图的总和：160dip * 2。

```
 android:layout_width="320dip" 
```

随意添加 10dip 或更多的填充。

**注意：**我不确定这是否是最好的方法，以及这是否适用于所有设备。试试看，让我知道；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:34:22.523

在你的gridview中使用这2个标签看看它是否有效

```
android:layout_centerVertical="true"
android:layout_centerHorizontal="true" 
```

# jquery - 有什么方法可以获取 jquery jqGrid 的“完整”URL 来维护过滤器的状态？

> ID：15570375
> 
> 赞同：3
> 
> 时间：2013-03-22T12:30:48.823
> 
> 标签：jquery, jqgrid, query-string, filtering, query-parameters

我正在使用[jqGrid](http://www.trirand.com/blog/)，并且我使用了[高级列搜索对话框](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadvanced_searching)来过滤多个列。我现在想将此 URL “发送”给另一个人，以便他们可以**准确地**看到我看到的内容。问题是，由于这都是使用 ajax，所以 URL 不包含过滤规则。

有没有办法我可以有一个“永久链接”链接，它将生成当前的 jqGrid URL，包括所有高级过滤器，所以当我在另一个人的浏览器上输入它时，它会包括那些过滤器集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:30:56.627

我觉得这个问题很有趣。一般来说，很明显，显示网格的页面的 URL 与用于 Ajax 请求以填充网格内容的 URL 不同。尽管如此，在某些限制下，人们确实可以提供问题的合理解决方案。

让我们有一个不使用和参数的 HTML 页面，或者至少不使用具有特定名称的参数，例如`filters`. 我们可以使用页面的 URL 选项将其转发到`postData.filters`. 创建过滤器的用户可以将过滤器添加到 URL。如果用户将 URL 发送给某人，则打开 URL 将显示过*滤网*格。

可以建议该方法的许多实现方式。实现取决于过滤是在客户端还是在服务器上进行。从服务器加载数据并在客户端过滤的使用`loadonce: true`是我发现最困难的特殊情况。所以我准备了适用于这种情况的小演示

[该演示](http://www.ok-soft-gmbh.com/jqGrid/UrlFilter.htm)从服务器加载数据并使用`loadonce: true`选项。它显示最初未过滤的网格

![在此处输入图像描述](../Images/0c8340b59d0e6aecb89953c83a9b142f.png)

如果用户设置了一些过滤器，例如下面的一个

![在此处输入图像描述](../Images/f471ac4006aa7da0a62b36aa6011b606.png)

然后网格填充显示一个过滤的行：

![在此处输入图像描述](../Images/be33865a7ffb2ce811d7106894c39bd1.png)

然后用户可以点击导航栏中的自定义按钮

![在此处输入图像描述](../Images/60f1e4cf3749390bfaf914694d9062e4.png)

它将`filters`选项附加到当前 URL。结果[，新的 URL](http://www.ok-soft-gmbh.com/jqGrid/UrlFilter.htm?filters=%7B%22groupOp%22:%22AND%22,%22rules%22:%5B%7B%22field%22:%22Name%22,%22op%22:%22cn%22,%22data%22:%221%22%7D%5D%7D)将包含

```
?filters=%7B"groupOp"%3A"AND"%2C"rules"%3A%5B%7B"field"%3A"Name"%2C"op"%3A"cn"%2C"data"%3A"1"%7D%5D%7D 
```

部分。

演示的代码只是实现的一个例子。您可以根据自己的要求对其进行修改。我在演示中使用的代码您将在下面找到：

```
// parse URL and get filters option if it exists
var urlOptions = window.location.href.split("?"), urlParams, filters, i, params;
if (urlOptions.length === 2) {
    urlParams = urlOptions[1].split("&");
    for (i=0; i<urlParams.length; i++) {
        params = urlParams[i].split("=");
        if (params.length === 2 && params[0] === "filters") {
            filters = decodeURIComponent(params[1]);
        }
    }
}

$.extend($.jgrid.search, {multipleSearch: true, multipleGroup: true});

$("#list").jqGrid({
    ... // some non-important options
    datatype: "json",
    loadonce: true,
    beforeRequest: function () {
        var $self = $(this), postData = $self.jqGrid("getGridParam", "postData");
        if (filters && !postData.filters) {
            // use filters from the URL if no other filter specified
            postData.filters = filters;
            $self.jqGrid("setGridParam", {search: true});
        }
    },
    loadComplete: function () {
        // disable custom button if no filter set
        var $self = $(this), postData = $self.jqGrid("getGridParam", "postData");
        if (postData.filters && filters !== postData.filters) {
            $("#addFilterToUrl").prop("disabled", false).removeClass("ui-state-disabled");
        } else {
            $("#addFilterToUrl").prop("disabled", true).addClass("ui-state-disabled");
        }

        if ($self.jqGrid("getGridParam", "loadonce") && $self.jqGrid("getGridParam", "datatype") !== "local") {
            setTimeout(function() {
                $self.trigger("reloadGrid");
            }, 100);
        }
    }
}).jqGrid("navGrid", "#pager")
  .jqGrid("navButtonAdd", "#pager", {
      caption: "",
      title: "add filter to the current URL",
      id: "addFilterToUrl",
      buttonicon: "ui-icon-comment",
      onClickButton: function () {
          // append filter to the current URL
          var postData = $(this).jqGrid("getGridParam", "postData");
          if (postData.filters) {
              window.location.href = window.location.href.split("?")[0] + "?" +
                  $.param({filters: postData.filters});
          }
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:39:08.270

据我所知，不是内置的，但是如果您愿意，可以自己构建该 url，然后在构建 jqgrid 时查找它并对其进行解码并将这些搜索值添加到 jqGrid。

以下帖子可能会帮助您了解如何访问这些参数以构建 url，然后在其他人将获得的链接中进行重建。

[jqGrid 清除搜索条件](https://stackoverflow.com/questions/3989786/jqgrid-clear-search-criteria)

# cakephp - 自定义验证不采用 AllowEmpty 选项

> ID：15570376
> 
> 赞同：3
> 
> 时间：2013-03-22T12:30:50.400
> 
> 标签：cakephp, cakephp-2.1

我有用于上传图像的输入类型文件。这不是必填字段。所以我将**allowEmpty**选项设置为 true。但是我的模型没有采用这个选项。验证码 ：

```
public $validate = array(
    'image' => array(
        'isImage' => array(
            'rule' => 'isImage',
            'message' => 'Please upload images only',
            'allowEmpty' => true,
            //'required' => true,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
);

public function isImage($field = null) {
    $file_info = $field['image_path'];
    $image_types = array("image/jpeg", "image/gif", "image/jpg", "image/png");

    $result  = false;
    if (in_array($file_info['type'], $image_types)) {
        $result = true;
    }
    return $result;
} 
```

或用于验证图像类型的任何其他规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:26:40.717

在您的示例中，`allowEmpty`甚至都没有关系 - 它使用自定义方法`isImage()`并返回 false。结束验证/失败。

如果您要使用自定义验证规则，请使用它。在函数中尝试这样的事情：

```
if(empty($field)) return true; 
```

# android - 在没有 adb 的情况下启用三星 Galaxy Note II 的日志记录

> ID：15570377
> 
> 赞同：1
> 
> 时间：2013-03-22T12:30:50.650
> 
> 标签：android, logging, galaxy, samsung-mobile

是否有任何选项如何在此设备上启用日志？在其他设备上，我们在开发人员选项中有“提交错误报告”选项，但在 NoteII 上，此选项缺失。（开发人员选项可见）。我们已经尝试了一切（alogcat，按电源+音量按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:36:12.550

[如此处](http://www.technipages.com/android-developer-options-is-missing.html)所述，您将需要执行以下操作：

> 如果您发现 Android 设备的“设置”中缺少“开发人员选项”选项，可能是因为您的 Android 操作系统版本为 4.2 (JellyBean)。该选项现在已隐藏，必须先启用。
> 
> 1.  打开设置应用程序。
>     
>     
> 2.  向下滚动到底部并选择关于手机或关于平板电脑。
>     
>     
> 3.  向下滚动到底部并重复点击内部版本号。屏幕上应该会出现一条消息，上面写着“您现在距离成为开发人员还有 4 步之遥”。继续点击，直到它显示“你现在是开发者了。”</p>
>     
>     
> 
> ![在此处输入图像描述](../Images/7ee43aa3f4f76b4bdf70698a22a4ad06.png) 4\. 现在回到主设置屏幕，开发人员选项应显示为一个选项。

如果您使用的是旧版本的 android for siii，请关注[Samsung Galaxy S3：启用/禁用 USB 调试](http://www.technipages.com/samsung-galaxy-s3-enabledisable-usb-debugging.html)。

# linux - 如何从所有文件中删除特定行？

> ID：15570381
> 
> 赞同：1
> 
> 时间：2013-03-22T12:30:55.093
> 
> 标签：linux, sed

我想从许多文件中删除所有以“sometext”开头的行：

```
find . -name "*.php"|xargs -I {} sed -e '/^sometext/d' {} 
```

但这让我输出到控制台。如何直接修改这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:32:44.990

使用 sed 的 -i 选项：

```
 sed -i -e '/^sometext/d' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:34:04.580

告诉 sed “就地”修改文件：

```
find . -name "*.php" | xargs sed -i '' -e '/^sometext/d' 
```

注意`''`后面的空格`-i`是必须的，否则会创建一个带有默认后缀的新副本。

如果你不需要`-I`的话，还要注意修剪`xaegs`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:43:40.160

您可以通过以下方式完成此操作`exec`：

```
find . -name "*.php" -exec sed -i '/^sometext/d' {} \; 
```

# html - onMouseOver on 不使用背景图像覆盖单元格

> ID：15570389
> 
> 赞同：0
> 
> 时间：2013-03-22T12:31:18.640
> 
> 标签：html, css, hover

我希望将`onMouseOver`效果行应用于整行。

**CSS：**

```
tr:hover{       
    background-color: #FFEEC2;
    border-width: 1px 1px 1px 1px;
    border-style: solid;
    border-color: #4B4B6F;
    cursor: default;
} 
```

**HTML：**

```
<table>
    <tr onClick="javascript: printit();">
        <td class="MenuImage"><img src="/images/print.gif" width="16" height="16"></td>
        <td class="MenuCaption">Print</td>
    </tr>
</table> 
```

但悬停效果仅适用于带有打印标签的单元格。如何使悬停效果也适用于带有`print.gif`图像的单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:23:12.100

有人想出了一个完美的答案。

答案建议放置 background-image: none;

```
 tr:hover{       
       background-color: #FFEEC2;
       border-width: 1px 1px 1px 1px;
       border-style: solid;
       border-color: #4B4B6F;
       cursor: default;
       background-image: none;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:56:56.433

为了建立在死人的小提琴和兰特的观点上，这个演示展示了你可能会看到的东西。悬停状态有效，但图像隐藏了效果。

[http://jsfiddle.net/v4QHQ/12/](http://jsfiddle.net/v4QHQ/12/)

一种解决方案可能是在图像周围应用填充：

[http://jsfiddle.net/v4QHQ/13/](http://jsfiddle.net/v4QHQ/13/)

```
td {
    padding: 10px;
} 
```

# java - 在 Android 中编写许多 HTTP 请求的良好设计模式

> ID：15570395
> 
> 赞同：5
> 
> 时间：2013-03-22T12:31:43.460
> 
> 标签：java, android, http, design-patterns

在我的应用程序中，我有很多 GET、POST、PUT 请求。现在，我有一个单例类来保存我下载的数据，并且有许多扩展 AsyncTask 的内部类。在我的单例类中，我也有一些这样的接口：

```
/**
* Handlers for notifying listeners when data is downloaded
* 
*/
public interface OnQuestionsLoadedListener {

    public void onDataLoadComplete();

    public void onDataLoadingError();       
} 
```

这种模式有问题吗（许多扩展 AsyncTask 的内部类）？对于每个 HTTP 调用（1 个用于 GET，1 个用于 POST，......），它是否可以更有效地完成？如果是这样，如何决定在例如 GET 请求之后做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:47:59.210

总的来说，您应该在执行网络请求时远离 AsyncTasks。

您的 AsyncTasks 链接到您的 Activity。这意味着，如果您的 Activity 停止，您的 AsyncTask 也会停止。在获取要在该活动中显示的数据时，这不是最大的问题，因为您不会关心获取是否已停止。但是当您想将一些保存的数据发送到服务器，并且您的用户在发送所有内容之前按下“返回”或类似的操作，数据可能会丢失并且无法发送。

相反，您想要的是一项服务，无论您的活动发生什么，它都会继续运行。

我建议你看看[RoboSpice](https://github.com/octo-online/robospice)。即使您决定不使用它，阅读它的作用和原因也会让您深入了解不将 AsyncTasks 用于网络请求的一长串原因，以及为什么更好地使用服务。如果您使用它，那么关于有效网络请求的其余问题也已过时，因为他们会以最好的方式为您处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:49:01.293

许多异步类没有错。

ido 是有一个网络层，一个服务类。向服务类发送一个意图，并将结果接收器对象作为意图的一部分。然后在服务中在异步任务中发出 http 请求，并通过结果接收器对象发回结果。

一个好的设计是从网络访问中抽象出 ui（活动或片段）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:39:03.623

在最近开发的应用程序中，我遵循了类似的方案，但另外实现了一个 WebRequest 类来执行实际的 GET、POST、PUT 等操作。

我现在拥有的是一个“连接器”类，其中包含很多 AsyncTask 子类。然而，在我的实现中，我让它们接受一个 Callback 对象，每个子类都将 Http 结果传递给该对象。

我认为这是一种有效的方式，即使可能不是理想的方式。

我想象的可能是一个改进，如果我只有一个 Asynctask 的子类，我会将请求主体（现在构建在这些不同的任务中）、请求 url 和方法以及回调（即，在我看来，这是获得结果的一种相当不错的方法）。

# javascript - 如何在 Ember 中设置根 URL

> ID：15570396
> 
> 赞同：1
> 
> 时间：2013-03-22T12:31:48.067
> 
> 标签：javascript, url, ember.js, router, base

我的 Ember 应用程序位于`example.com/path/to/ember_app`.

我的问题是 Ember 似乎是基于站点根目录而不是应用程序的根目录来生根的，所以当我希望 ember 植根时：

```
example.com/path/to/ember_app/**news_items** 
```

我`500 (Internal Server Error)`在`example.com/news_items`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:41:34.277

```
MyApp.IndexRoute = Ember.Route.extend({
  redirect: function() {        
    this.transitionTo('example.path');
  }
}); 
```

这应该对您有所帮助，这基本上会将您的应用程序的索引路由重定向到 example.path 路由。

# iphone - iOS - FlipCamera 按钮 - AVPreviewLayer

> ID：15570398
> 
> 赞同：0
> 
> 时间：2013-03-22T12:31:50.583
> 
> 标签：iphone, ios, ipad, avfoundation, uistoryboard

我正在为 iOS 设备搜索“翻转相机”按钮的图像。找不到任何有用的 psd 或类似的东西。

我想念什么吗？是否可以向 previewLayer 发送一个方法来显示翻转按钮？

看不到森林里的树...

类似的东西 - 但要使用（没有压缩、噪音等的 psd 或 bmp ）：

![在此处输入图像描述](../Images/658bd755a925515331018f473c55c2fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:08:59.870

您可以使用[iOS Artwork Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)来获取类似的图像。您正在寻找的`PLCameraToggleIcon`那个被称为（背景图像是`PLCameraOverlayButton`和`PLCameraOverlayButtonPressed`）。

# c - 具有更多解的线性方程组的算法

> ID：15570409
> 
> 赞同：1
> 
> 时间：2013-03-22T12:32:07.187
> 
> 标签：c, algorithm, math

有人可以帮助我解决模算术（！）中的线性方程组的算法。我只需要“最小”的解决方案。最小的意思是按字典顺序排列。

让我们有这个系统：
3x1+2x2=3
4x1+3x2+1x3+2x4=4
x 旁边的数字是索引。

我们使用模 5（0<=x<=p，其中 p 是我们的模）的系统的矩阵是
3 2 0 0 0 | 3
4 3 1 2 0 | 4

最小的解决方案是 (0,4,0,1,0)。我必须编写一个算法来给我那个解决方案。我在考虑蛮力，因为 p<1000。但我不知道该怎么做，因为在这种情况下，在第一行我必须 x1=0 ... p-1 ，然后解决 x2，在第二行我必须选择 x3= 0 ... p-1。并解决 x4。我必须这样做，直到该方程组成立。如果我从 0 .. p-1 开始，那么我得到的第一个解决方案将是最小的解决方案。

PS：矩阵可以有很多种形式，比如：
3 2 4 0 0 | 3
4 3 1 2 1 | 4

1 2 0 0 0 | 3
3 0 3 0 0 | 3
4 3 1 2 3 | 4
等

对不起我的英语，我来自亚洲。

编辑：我在考虑如何确定哪些变量是参数。但是想不通....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:40:48.187

啊好吧，到底是什么，为什么不呢，给你

```
#include <stdio.h>

#define L 2
#define N 5
#define MOD 5

static int M[L][N] =
{       { 3, 2, 0, 0, 0 }
,       { 4, 3, 1, 2, 0 }
};

static int S[L] =
{       3, 4
};

static void init(int * s)
{
        int     i;
        for (i = 0; i < N; i++)
        {
                s[i] = 0;
        }
}

static int next(int * s)
{
        int     i, c;
        c = 1;
        for (i = N-1; i >= 0 && c > 0; i--)
        if ( (++s[i]) == MOD)
        {
                s[i] = 0;
        }
        else
        {
                c = 0;
        }
        return c == 0;
}

static int is_solution(int * s)
{
        int     i, j, sum;

        for (i = 0; i < L; i++)
        {
                sum = 0;
                for (j = 0; j < N; j++)
                {
                        sum += M[i][j]*s[j];
                }
                if (sum % MOD != S[i])
                {
                        return 0;
                }
        }
        return 1;
}

int main(void)
{
        int     s[N];

        init(s);
        do
        {
                if (is_solution(s))
                {
                        int     i;
                        for (i = 0; i < N; i++)
                        {
                                printf(" %d", s[i]);
                        }
                        printf("\n");
                        break;
                }
        } while (next(s));
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:18:54.180

您可以将其视为线性代数和高斯消元 mod p 中的问题。

您正在尝试找到 Mx = y mod p 的解决方案。如有必要，通过添加 0'x = 0 的行从正方形 M 开始。现在使用高斯消去 mod p 将 M 尽可能地减少为上三角形式。您最终会得到一个方程组，例如

ax + by + cz = H

```
 dy + ez = G 
```

但是对角线上有一些零，要么是因为你用完了方程，要么是因为所有方程在特定列上都为零。如果您有 0z = 1 或类似的内容，则没有解决方案。如果不是，您可以像往常一样通过自下而上求解来找出可能的多种解决方案之一，如果没有剩下的方程在对角线上的 z 系数为非零，则输入 z=0。

我认为如果最重要的未知数对应于向量的底部，这将产生字典上最小的答案。下面显示了如何采用任意解决方案并使其按字典顺序最小，我认为您会发现它不会修改如上生成的解决方案。

现在看看[http://en.wikipedia.org/wiki/Kernel_%28matrix%29](http://en.wikipedia.org/wiki/Kernel_%28matrix%29)。存在向量 n 的线性空间，使得 Mn = 0，并且方程的所有解的形式为 x + n，其中 n 是该空间中的向量 - 零空间 - 而 x 是特定解，例如作为你已经解决的那个。

您可以通过找到 Mn = 0 的解来计算零空间的基础，就像您找到 x 一样。找到对角线上没有非零条目的列，转到该列的对角线所在的行，将该列的未知数设置为 1，然后从那里向上移动矩阵，选择其他未知数你有一个 Mn = 0 的解。

请注意，您从中获得的所有向量在该向量的某个位置都有 1，在该向量下方有 0，并且在上方可能有非零条目。这意味着，如果您将它们的倍数添加到解决方案中，从最下方 1 的向量开始，后面的向量将永远不会干扰您之前添加的解决方案的分量，因为后面的向量总是为零那里。

因此，如果您想找到字典上最小的解决方案，您可以安排一些事情，以便您首先使用具有字典上最大条目的空空间的基础。从任意解开始，并尽可能按字典顺序添加零空间向量，以减少解向量。您最终应该得到字典上最小的解向量 - 通过从零空间添加基向量的组合，可以从任何其他解中生成任何解，并且您可以从上述过程中看到它产生字典上最小的此类结果 -在每个阶段，最重要的组件都尽可能地小，任何替代品都必须在字典上更大。

# c++ - QCheckBox::toggled() 和 QCheckBox::clicked() 有什么区别？

> ID：15570415
> 
> 赞同：31
> 
> 时间：2013-03-22T12:32:16.953
> 
> 标签：c++, qt

`QCheckBox::toggled(bool)`和`QCheckBox::clicked(bool)`信号之间有什么实际区别吗？两者都有相同的签名，我连接哪一个有关系吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-22T12:36:47.663

每次复选框的`toggled`检查状态发生变化时都会发出信号，即使它通过代码发生变化，而`clicked`仅当用户与复选框交互时才会发出信号，例如：

```
ui->checkbox->setChecked(true);  // toggled() will be emitted, but not clicked() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T12:37:25.943

QCheckBox Inherit 切换和单击。

```
void QAbstractButton::clicked ( bool checked = false ) [signal] 
```

当按钮被激活（即当鼠标光标在按钮内时按下然后释放）、键入快捷键或调用 click() 或 animateClick() 时会发出此信号。值得注意的是，如果您调用 setDown()、setChecked() 或 toggle()，则不会发出此信号。如果按钮是可检查的，如果按钮被选中，checked 为真，如果按钮未被选中，则为假。

```
void QAbstractButton::toggled ( bool checked ) [signal] 
```

每当可检查按钮更改其状态时，都会发出此信号。如果按钮被选中，checked 为真，如果按钮未被选中，则为假。这可能是用户操作、click() 插槽激活或调用 setChecked() 的结果。独占按钮组中的按钮状态在此信号发出之前更新。这意味着插槽可以对状态已更改的组中的按钮发出的“关闭”信号或“打开”信号起作用。例如，对新选中按钮发出的信号做出反应但忽略来自未选中按钮的信号的插槽可以使用以下模式实现：

```
 void MyWidget::reactToToggle(bool checked)
 {
    if (checked) {
       // Examine the new button states.
       ...
    }
 } 
```

[http://qt-project.org/doc/qt-4.8/qcheckbox.html](http://qt-project.org/doc/qt-4.8/qcheckbox.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T12:36:56.567

```
QCheckBox::toggled(bool) 
```

当复选框更改其状态时发出，无论是通过单击它还是使用`setChecked`or`toggle`等​​。

```
QCheckBox::clicked(bool) 
```

单击复选框时发出。也就是说，当用户单击并释放复选框时。在键入或使用快捷键时也会发生`click`。复选框不一定要选中才能发出。

如果您正在监听复选框的状态何时发生变化，请使用`toggled`. 如果您正在监听用户单击复选框的时间，无论该复选框是否更改状态，请使用`clicked`.

# jquery - 向图像滑块添加更多数组

> ID：15570417
> 
> 赞同：2
> 
> 时间：2013-03-22T12:32:21.043
> 
> 标签：jquery

我正在为我的项目做一个自定义的 jQuery 滑块。一个相当基本的，应该只更新图像。但我有几个问题。

1 - 我不确定如何在数组中添加一个以上的图像

2 - 过渡似乎有点奇怪

这是代码+ jsfiddle

```
 #background { 
         width: 960px; 
         height: 480px; 
         background: transparent url(http://i.imgur.com/pSo3Nmg.jpg) no-repeat top center; 
         background-size: cover; 
         display: block; 
         }

var image = $('#background');
                image.fadeOut(3000, function () {
                    image.css("background", "url('http://i.imgur.com/So7hhTG.png')");
                    image.css("background-size", "cover");
                    image.fadeIn(3000);
             }); 
```

[http://jsfiddle.net/SxN8g/](http://jsfiddle.net/SxN8g/)

我想要做的是通过淡入/淡出每 2 分钟左右更改一次图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:43:20.210

您可以尝试以下方法： [JSFiddle](http://jsfiddle.net/SxN8g/17/)

```
 var images = [ 
                     'http://i.imgur.com/So7hhTG.png',
                     'http://i.imgur.com/pSo3Nmg.jpg'
                 ];
   var cnt = images.length;

   $(function () {
         setInterval(Slider, 3000);
   });

   function Slider() {
       $('#imageSlide').fadeOut("slow", function () {
            $(this).attr('src', images[(images.length++) % cnt]).fadeIn("slow");
       });
   } 
```

**HTML**：

```
<img id="imageSlide" alt="" src="" /> 
```

来源：[Suprotim Agarwal 使用 jQuery 创建一个简单的图像幻灯片](http://www.devcurry.com/2009/07/create-simple-image-slide-show-using.html)

# java - 使用 maven 和 IntelliJ 创建 apklib

> ID：15570420
> 
> 赞同：4
> 
> 时间：2013-03-22T12:32:27.580
> 
> 标签：java, android, maven

我正在从滑动菜单创建一个 apklib，因为我找不到任何 maven 存储库。问题是，当我从 intellij 尝试时，它会导入库，但不会将依赖项添加到滑动菜单库，我必须手动添加它。

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.slidingmenu</groupId>
<artifactId>library</artifactId>
<version>1.2</version>
<type>apklib</type>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.1.1.4</version>
    </dependency>
    <dependency>
        <groupId>com.google.android.maps</groupId>
        <artifactId>maps</artifactId>
    </dependency>
    <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>support-v13</artifactId>
            <version>r12</version>
        </dependency>
    <dependency>
            <groupId>com.github.rtyley</groupId>
            <artifactId>roboguice-sherlock</artifactId>
            <version>1.5</version>
        </dependency>
    <dependency>
            <groupId>org.roboguice</groupId>
            <artifactId>roboguice</artifactId>
            <version>2.0</version>
        </dependency>
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <version>4.2.0</version>
        <type>apklib</type>
    </dependency>
</dependencies>

<build>
    <sourceDirectory>src</sourceDirectory>

    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <nativeLibrariesDirectory>ignored</nativeLibrariesDirectory>
            </configuration>
        </plugin>
    </plugins>
</build>
</project> 
```

我根据 maven 插件上的说明创建了 zip，然后使用以下命令将其推送到 ~/.m2：

```
 mvn org.apache.maven.plugins:maven-install-plugin:2.4:install-file -DgroupId=com.slidingmenu -DartifactId=library -Dfile=sliding-menu.apklib -Dversion=1.2 -Dpackaging=apklib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:53:54.850

您需要安装`com.slidingmenu`在本地存储库中，`mvn clean install`而不是`install:install-file`

`mvn clean install`会将 maven 所需的所有元数据和依赖项放在您的本地存储库中（即`~/.m2/repository`）。

在您的 apk 中，将工件指定`com.slidingmenu`为类型的依赖项`apklib`

我希望它能解决你的问题。

# c++ - Visual C++ 2012 和 PCRE

> ID：15570422
> 
> 赞同：3
> 
> 时间：2013-03-22T12:32:31.863
> 
> 标签：c++, regex, visual-studio, visual-c++, pcre

我是 C++ 新手，但我需要在我的项目中使用 PCRE 库。我已经从[这个页面](http://www.airesoft.co.uk/pcre)下载了适用于 windows 的 PCRE 8.20 。现在我怎样才能告诉 Visual Studio 库在哪里`#include <pcre.h>`才能工作？

我知道 C++ 已经有`<regex>`库，但是 ECMAScript 正则表达式对我来说太有限了（例如，没有所有格量词）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:29:02.723

您是否在附加包含文件夹列表中添加了 pcre 包含路径（同上库路径）？如果没有[在这里](http://msdn.microsoft.com/en-us/library/73f9s62w%28v=vs.71%29.aspx)查看其他包含文件夹，请[在此处](http://msdn.microsoft.com/en-us/library/1xhzskbe.aspx)查看其他库文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:27:31.170

我看了一下zip文件。将所有内容复制到您的解决方案资源管理器中，然后在添加时`pcre.h`添加它`inc/pcre.h`应该可以工作。

# html - 让 div 在标记中的显示顺序与在页面上显示的顺序不同是否违反标准？

> ID：15570424
> 
> 赞同：5
> 
> 时间：2013-03-22T12:32:36.093
> 
> 标签：html, css, responsive-design

我正在编写一个响应式网站，在桌面版本上我希望导航出现在左侧，但在移动版本上我希望它出现在主要内容下方。我在[http://abbymilberg.com/layout-sample.html](http://abbymilberg.com/layout-sample.html)上通过改编一个众所周知的网格系统提出了解决方案。

一位同事说它违反了标准，因为 div 的视觉顺序（在桌面版本上）与它们在标记中的顺序不同。不过，他似乎无法提供这违反了哪个标准。我知道这违背了所有网站都是基于桌面的时代的传统期望，但是任何人都可以为我提供一个具体示例，说明这实际上违反了哪个标准（508、WC3 等）的哪个部分？我对讨论您是否认为这是一种好的做法不感兴趣，只是它是否违反了明确的标准。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:38:17.797

据我所知，这并不违反任何记录在案的标准。在源排序方面，通常最好在不应用脚本或样式的情况下记录对用户有意义的文档。毕竟，您最终无法真正控制它如何为他们渲染！

至于在实践中是否真的是一个好主意，您需要进行一些用户测试并找出答案。我有兴趣看看结果！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:37:52.913

从语义和可访问性上讲，您的同事是对的。因为如果你去掉css，div的排列就没有意义了，因为大多数导航代码都在代码的标题/顶部。

能给我们提供代码和截图吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:44:10.697

这不会以任何方式违反任何文件标准。

文档标准是一组要遵循的规则，没有关于如何安排网站布局的“规则”。所以在语义上、句法上和技术上，不，你没有违反任何规则。

然而，这可能不被视为“最佳实践”。最佳实践并不是真正的规则，它们是帮助您使您的网站达到最佳状态的指南。我不确定这是否会被认为是最佳实践，因为可以提出这样的论点......如果您的布局非常奇怪，以至于您有很多内容落在您网站的主要内容之前，那么自从机器人阅读从左到右从上到下，这可能会损害您的搜索排名，因为它使谷歌更难理解您的页面是关于什么的。

# c# - 有没有一种方法可以在不显式传入泛型类型的情况下对结果集合调用 DbContext.Translate？

> ID：15570430
> 
> 赞同：2
> 
> 时间：2013-03-22T12:33:14.080
> 
> 标签：c#, generics

我有一个通过返回多个结果的实体框架调用的存储过程。我一直在使用 DbContext.Translate 方法将这些结果映射回这样的实体：

```
List<T1> result1 = ObjectContext.Translate<T1>(reader).ToList();
reader.NextResult();

List<T2> result2 = ObjectContext.Translate<T2>(reader).ToList();
reader.NextResult();

List<T3> result3 = ObjectContext.Translate<T3>(reader).ToList();
reader.NextResult(); 
```

这很好用，但现在我有一个返回 20 多个结果的程序。我希望能够在不为我的方法创建 20 个重载的情况下通用地映射结果（因为我预计将来会有更多存储过程返回 2-20 个结果集）。

有什么方法可以在没有很多方法重载的情况下循环执行此映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:49:42.897

> 有什么方法可以在没有很多方法重载的情况下循环执行此映射？

我会说，不。

我认为你已经描述的是这样做的最好方法，考虑到你*必须*告诉`ObjectContext`它正在处理什么类型。

您可以创建一组具有多个重载的泛型函数（类似于`Func<T>`and `Action<T>`），其中包含越来越多的泛型参数。

例如，前两个实现可能如下所示：

```
public static Tuple<List<T1>> GetSprocResults<T1>
    (DataTableReader reader, ObjectContext objectContext)
{
    var t1 = objectContext.Translate<T1>(reader).ToList();

    return new Tuple<List<T1>>(t1);
}

public static Tuple<List<T1>, List<T2>> GetSprocResults<T1, T2>
    (DataTableReader reader, ObjectContext objectContext)
{
    var t1 = objectContext.Translate<T1>(reader).ToList();
    reader.NextResult();

    var t2 = objectContext.Translate<T2>(reader).ToList();

    return new Tuple<List<T1>, List<T2>>(t1, t2);
} 
```

示例用法：

```
 var result = GetSprocResults<DateTime, int>(reader, objectContext);

        var datesCount = result.Item1.Count;
        var intCount = result.Item2.Count; 
```

如果在您的代码上下文中将此功能重构为一组方法是有意义的，我认为多个重载不会有问题。

# opencv - OpenCV 鼠标回调函数的返回值

> ID：15570431
> 
> 赞同：4
> 
> 时间：2013-03-22T12:33:14.223
> 
> 标签：opencv

在 OpenCV 中，我想将 Point(x,y) 之类的点位置返回给我在鼠标回调函数中单击图像的 main() 函数。除了设置全局变量之外还有其他方法吗？

我不想在 on_mouse() 函数中编写所有代码。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:08:46.823

要在那里扩展 Safirs 的想法，除了一个类或类似的东西，你可以传入这一点本身：

```
void on_mouse( int e, int x, int y, int d, void *ptr )
{
    Point*p = (Point*)ptr;
    p->x = x;
    p->y = y;
}

Point p;
namedWindow("win");
setMouseCallback("win",on_mouse, (void*)(&p) );

// changed value of p will be accessible here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:25:18.140

您可以通过将指向数据的指针作为参数传递给`setMouseCallback()`. 同意@berek，只是想在下面展示一个完整的示例，以避免混淆全局变量。

```
using namespace cv; 

void on_mouse( int e, int x, int y, int d, void *ptr )
{
    Point*p = (Point*)ptr;
    p->x = x;
    p->y = y;
}

in main() {
    Point p;
    namedWindow("window");
    Mat image = imread("someimage.jpg");
    imshow(image);

    //pass a pointer to `p` as parameter
    setMouseCallback("window",on_mouse, &p ); 

    // p will update with new mouse-click image coordinates 
    // whenever user clicks on the image window 
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-22T12:47:53.897

不，这是不可能的，因为`on_mouse()`是一个回调函数。[这](http://docs.opencv.org/modules/highgui/doc/user_interface.html#setmousecallback)是它的opencv文档。

所以，“全局”变量是解决这个问题的唯一方法。或者，如果您正在寻找更好的解决方案，您可以创建一个包装类，其中包含`namedWindow`和`MouseCallback`以及一个私有成员变量，在调用鼠标回调函数时对其进行操作。

# magento - Magento 自定义扩展显示我的帐户链接

> ID：15570435
> 
> 赞同：1
> 
> 时间：2013-03-22T12:33:22.567
> 
> 标签：magento, navigation, ticket-system

我创建了一个 Magento 扩展，将 OST Ticket 集成到洋红色中。这很好用，但是我遇到的唯一问题是显示“我的帐户”链接。

在我的帐户仪表板上，我有以下链接：

*   帐户仪表板
*   支持票
*   帐户信息
*   地址簿
*   我的订单
*   计费协议
*   重复配置文件
*   我的产品评论
*   我的收藏
*   我的应用程序
*   通讯订阅
*   我的可下载产品

当我使用以下代码将块包含到我的扩展中时：

```
<support_index_index>
       <reference name="content">
            <block type="support/list"  name="support_list" template="support/list.phtml" />
       </reference>
       <reference name="left">
        <block type="customer/account_navigation" name="customer_account_navigation" before="-" template="support/navigation.phtml">
            <action method="addLink" translate="label" module="customer"><name>account</name><path>customer/account/</path><label>Account Dashboard</label></action>
            <action method="addLink" translate="label" module="customer"><name>account_edit</name><path>customer/account/edit/</path><label>Account Information</label></action>
            <action method="addLink" translate="label" module="customer"><name>address_book</name><path>customer/address/</path><label>Address Book</label></action>
        </block>
        <remove name="tags_popular"/>
        <remove name="leftnav" />

    </reference>

  </support_index_index> 
```

我只得到 4 个链接：

*   帐户仪表板
*   支持票
*   帐户信息
*   地址簿

有人可以向我解释为什么会发生这种情况以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:11:44.493

看看@/app/design/frontend/default/default/layout/review.xml

```
<customer_account>
    <!-- Mage_Review -->
    <reference name="customer_account_navigation">
        <action method="addLink" translate="label" module="review"><name>reviews</name><path>review/customer</path><label>My Product Reviews</label></action>
    </reference>

</customer_account> 
```

请参阅[Magento - 如何在我的帐户导航中添加/删除链接？](https://stackoverflow.com/questions/1977824/magento-how-to-add-remove-links-on-my-account-navigation)

# scala - scala抽象类：无法访问构造函数参数

> ID：15570436
> 
> 赞同：1
> 
> 时间：2013-03-22T12:33:38.040
> 
> 标签：scala

我无法访问函数主体中的类构造函数参数。在 Scala 中，构造函数参数成为定义了适当的 get/set 的类成员。但在下面的示例中，我无法引用构造函数参数“p”。我做错了什么吗？我需要放一个前缀吗？

```
abstract class MyFunc(in: Int) extends Function1[Int, Boolean] {
    val x : Int = 10
}

val dunc = new MyFunc(10) {
  def apply(p: Int): Boolean = {
    p % in == 0  << compilation error. 'in' value not found
    // p % x == 0  << compiles fine
  }
} 
```

我能够访问显式定义的成员变量，但不能访问构造函数定义的变量。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:35:41.970

默认情况下，构造函数参数是**私有**的：因此它们仅在类本身中可见。但是你改变了这种行为：

```
abstract class MyFunc(protected val in: Int) extends Function1[Int, Boolean] {
    val x : Int = 10
} 
```

# javascript - 您如何设置此 Javascript 代码的背景图像的宽度？

> ID：15570442
> 
> 赞同：0
> 
> 时间：2013-03-22T12:33:51.740
> 
> 标签：javascript, jquery, html, css

Chris Antonellis的[freezegframe.js](http://freezeframe.chrisantonellis.com/)插件允许您在鼠标悬停时启动动画 gif。它也有一些不错的东西，比如动画中的淡入淡出。这是启动插件所需的语法：您设置

```
<script type="text/javascript" src="freezeframe.js"></script>
<script type="text/javascript">
freezeframe = new FreezeFrame();
</script> 
```

在你的头文件中，然后简单地：

```
<img src="img/mr_div_retro_sphere.gif" freezeframe /> 
```

在您的 HTML 正文中。然后可以对图像进行样式设置

```
figure.freezeframe-container {
    border-radius: 3px;
    border-top: 1px solid __border__;
    border-left: 1px solid __border__;
    width: 100%;
    margin: 0 auto;
    -moz-box-shadow: 5px 5px 3px #888;
    -webkit-box-shadow: 5px 5px 3px #888;
    box-shadow: 5px 5px 3px #888;
} 
```

如文档中所述（请参阅原始链接）。问题是目前没有办法设置背景图像的样式。[请参阅此处](http://www.theshapeofmath.com/playground)的测试示例。

从测试中可以看出，背景图片是使用原始 gif 来调整大小的。但是，因为我希望网站在大小方面具有弹性，所以我需要一种方法来调整初始图像的大小。

我联系了作者，但他解释说，困难在于代码当前采用图像的第一帧——似乎不清楚如何将 CSS 样式命令附加到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:43:00.240

这很奇怪，但是让它看起来不错的一个 hacky 方法是：

```
.freezeframe-container { background-repeat: no-repeat; background-size: 78%; } 
```

但看起来初始背景图像与动画 gif 不太匹配。

希望有帮助。

# bash - 从unix中的文件中删除行号（不是整行）

> ID：15570443
> 
> 赞同：2
> 
> 时间：2013-03-22T12:33:52.893
> 
> 标签：bash, unix, numbers, line

如果行号已由“nl”添加，如何从文件中删除行号？

例子：

文件1：

```
 word1 word2
   word3
   word4 
```

命令之后：`nl file1 > file2` 这是使用的确切命令。

文件2：

```
1 word1 word2
2 word3
3 word4 
```

这是它围绕的部分。从 file2 中删除行号并将这些行存储在 file3 中（或者如果可能，删除文件 2 中的数字，同时将行保留在文件 2 中）。

文件3：

```
 word1 word2
   word3
   word4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:36:25.717

```
sed 's/ *[0-9]*.//' file2 > file3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:40:01.403

是的。正如这里回答的那样：您可以使用 awk：

```
cat file | awk '{print $2}' > newfile 
```

你可以使用剪切：

```
cat file | cut -f2 > newfile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T12:52:04.540

cut 实用程序将起作用。在这种情况下，一行中只有一个单词，因此您可以使用 just `cut -f2`，但如果您有更多列，`cut -f2-`则将保留除第一个之外的所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T16:27:59.477

这将只删除 file2 中每个字符串的第一个单词/数字，并将其余部分放入 file3：

```
awk '{$1 = ""; print $0;}' file2 > file3 
```

文件3：

```
 word1 word2
 word3
 word4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T12:44:46.210

这样的事情应该解决它：

```
cut -d\  -f2- < file1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:37:32.347

假设你不能只是 cp file1 file3....

```
ni file1 > file2
sed 's/[0-9]*[ ]*\(.*\)$/\1/' file1 > file3 
```

# javascript - 如何使用javascript或jquery查找特定单词在一个文本区域中写入的次数

> ID：15570449
> 
> 赞同：0
> 
> 时间：2013-03-22T12:34:07.907
> 
> 标签：javascript, jquery, textarea

首先，我不擅长 javascript 或 jquery，所以我想先在互联网上搜索，就像我总是为我不知道的事情做的那样。但是我找不到有关我的问题的任何信息，所以我想在这里寻求帮助，希望您能帮助我。

当我开始问这个问题时，这个网站告诉我分享我的研究，但我没有什么可以分享的。

我的问题是：“如何使用 javascript 或 jquery 找出一个特定单词在一个文本区域中写入了多少次？”

我不确定这是否可以用 javascript 或 jquery 来完成，这就是我写这两个的原因。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:41:48.370

一个简单的概念验证：

```
$('#test').keyup(function(e){
    var v = $(this).val(), // the current value of the textarea,
        w = v.split(/\s/), // the individual words
        needle = 'img', // what you're looking for
        c = 0; // the count of that particular word
    for (var i=0,len=w.length;i<len;i++){
        // iterating over every word
        if (w[i] === needle){
        // if a given word is equal to the word you're looking for
        // increase the count variable by 1
            c++;
        }
    }
    // set the text of the 'output' element to be the count of occurrences
    $('#output').text(c);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Jdk4f/)。

参考：

*   [`keyup()`](http://api.jquery.com/keyup/).
*   [`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).
*   [`text()`](http://api.jquery.com/text/).
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:48:14.120

尝试

```
var regex = new RegExp('\\b' + word + '\\b', 'gi');
var count = string.match(regex).length 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T12:44:31.357

您可以使用[.match()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)匹配字符串中的正则表达式。

```
var str = "This my wordy string of words";
console.log(str.match(/word/g).length); // Prints 2 as it's matched wordy and words
console.log(str.match(/word\b/g).length); // Prints 0 as it has NOT matched wordy and words due to the word boundary 
```

这些也是区分大小写的。您可能想研究[RegExp 的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)其他选项。

# php - 灵活的侧边栏数据库设计

> ID：15570451
> 
> 赞同：0
> 
> 时间：2013-03-22T12:34:10.910
> 
> 标签：php, mysql, database

在我的系统中，我有一个灵活的布局，您可以将侧边栏放置在左侧或右侧（或两者）。您可以添加多个侧边栏，然后选择要用于页面的侧边栏以及位置。

**将项目存储在侧边栏中的最佳方式是什么，同时保持编辑每个侧边栏的项目配置的能力？**

这些项目由一个 php 类组成，其中配置选项被传递到模板文件。

我最初的想法是实现某种简码功能并将简码添加到数据库中的 sidebar_item 条目，但这种方式实际上是不可配置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:11:04.620

如果我理解正确，你有：

*   一个用户，他可以在他想要的地方放置一个侧边栏，
*   一个侧边栏，可以包含一些元素，
*   可以属于每个用户的每个侧边栏的项目，
*   文件来处理不同类型的项目。

每个用户都有自己的侧边栏和自己的内容。

我可以提出表格：

*   `users`其中用户由某个 id 定义，
*   `sidebars`在其中你说它属于哪个用户，是左还是右，
*   `item_types`你说应该使用哪个模板和/或配置文件，
*   `items`它是什么类型的（from `item_types`），所以您知道要使用哪个模板，然后知道它在哪个侧边栏中（from `sidebars`），也许它是什么位置（第一，第二，...）。

您应该在以下之间创建关系：

*   `sidebars`并`users`在用户 ID 上选择用户，您可以知道他拥有哪个侧边栏，
*   `items`并且`sidebars`在侧边栏 id 上，所以知道侧边栏你就知道里面有哪些项目，
*   `item_types`和`items`项目类型，所以你知道如何处理它，

也许，`items`您还可以存储可以传递给模板的配置变量。

# python - 在 PhpStorm 中使用 Pstorm 时排除目录

> ID：15570452
> 
> 赞同：1
> 
> 时间：2013-03-22T12:34:11.597
> 
> 标签：python, phpstorm

我想知道是否有人知道 pstorm python 脚本的代码修复，当您从命令行打开它时，您可以将目录排除在目录中的索引之外。

我知道这目前不是 IDE 中的一个功能，但也许有人知道有一个解决方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:09:45.437

使用`Settings`| `File Types`| `Ignore Files and Folders`按名称或模式排除目录。

# c# - 在 monoTouch 中用“\n”分隔字符串

> ID：15570455
> 
> 赞同：2
> 
> 时间：2013-03-22T12:34:26.693
> 
> 标签：c#, ios, iphone, xamarin.ios

所以我有一个非常大的字符串，我想在每一行上分开，并将每一行作为对象放在一个数组中。在objective-c中，这将通过使用：

```
NSArray *piecesArray = [tmpString componentsSeparatedByString:@"\n"]; 
```

但是，如果我在 monoTouch 中尝试这个，我会得到 system.string[] 作为返回值。这是我在 c# 中使用的代码：

```
var defaults = NSUserDefaults.StandardUserDefaults;

            //Collecting Trace and Trace data from link + security code and converting Track and Trace data into string
            TracTraceDataString = NSString.FromData (NSData.FromUrl 
                                                    (NSUrl.FromString ("http://plex.janssen1877.com/app/life/" + defaults ["SecurityToken"])), 
                                                     NSStringEncoding.UTF8);

            //Seperating the string and putting each object in the array
            TrackTraceDataArray = TracTraceDataString.Split (new char[] { '\n' }, 2);

            Console.WriteLine (TrackTraceDataArray); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:53:51.860

改变：

```
Console.WriteLine (TrackTraceDataArray); 
```

到：

```
foreach (string s in TrackTraceDataArray)
    Console.WriteLine (s); 
```

# facebook - Facebook api 流表“包括最近的活动故事”设置不可见

> ID：15570473
> 
> 赞同：1
> 
> 时间：2013-03-22T12:35:13.950
> 
> 标签：facebook, facebook-fql, facebook-apps

描述字段说

> 不是由用户有意生成的故事文本，例如当两个用户成为朋友时生成的故事文本。您必须在您的应用中启用“包括最近的活动故事”迁移才能检索此字段

[http://developers.facebook.com/docs/reference/fql/stream](http://developers.facebook.com/docs/reference/fql/stream)

但是当我转到应用程序设置> 高级“迁移列表”时。

我没有看到启用最近活动故事的选项。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:03:23.500

我不认为这仍然适用，而只是早期版本的残余。

我能够检索“X 与 Y 成为朋友”的描述，而无需为我的任何应用程序设置这样的迁移。

# cxf - CXF Web 服务客户端未加密 SOAP 请求 XML 消息

> ID：15570476
> 
> 赞同：1
> 
> 时间：2013-03-22T12:35:25.417
> 
> 标签：cxf, xml-encryption

我正在学习 Webservice 安全性。我正在为此使用 CXF 框架。我开发了一项测试服务，它只会使我们发送的任何东西的价值翻倍。基于本教程

我为 XML 加密和签名添加了 WS-Policy。

然后我使用 CXF 将此服务的 Web 服务客户端开发为 Eclipse 项目。以下是我的客户端配置文件

```
<jaxws:client id="doubleItClient" serviceClass="com.DoubleIt" address="http://localhost:8080/myencws/services/DoubleItPort?wsdl">
<jaxws:features>
            <bean class="org.apache.cxf.feature.LoggingFeature" />
</jaxws:features>

 <jaxws:properties>
            <entry key="ws-security.callback-handler" value="com.ClientKeystorePasswordCallback"/>        
            <entry key="ws-security.encryption.properties" value="com/clientKeystore.properties"/>
            <entry key="ws-security.signature.properties" value="com/clientKeystore.properties"/>
            <entry key="ws-security.encryption.username" value="myservicekey"/>
 </jaxws:properties> 
```

我已经生成了所有的密钥库文件，并且我创建了 clientKeystore.properties 文件并放置在我项目的 src 目录中。

但是每当我运行这个客户端时，SOAP 请求消息都没有加密。所以旅馆服务器端我得到了例外

> 这些策略替代方案无法满足：{ [http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702](http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702) }EncryptedParts { [http://docs.oasis-open.org/ws-sx/ws -securitypolicy/200702](http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702) }SignedParts

以下是我的 SOAP 请求

```
<soap:Envelope
 xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns2:doubleValue
 xmlns:ns2="http://com/"><arg0>5</arg0></ns2:doubleValue></soap:Body></soap:Envelope> 
```

我正在使用 CXF2.7.3。我不知道怎么了。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:46:58.293

我之前的代码也有类似的问题，缺少的是 jar 依赖项，当您的客户端从 WSDL 读取安全策略时，它会执行实际加密。

我的解决方法是在您的 POM 中添加某些 Maven 依赖项以启用加密。检查这个网址：[http ://cxf.apache.org/docs/using-cxf-with-maven.html](http://cxf.apache.org/docs/using-cxf-with-maven.html)

[另请阅读网址http://cxf.apache.org/docs/ws-securitypolicy.html](http://cxf.apache.org/docs/ws-securitypolicy.html)中的“启用 WS-SecurityPolicy”部分

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-16T21:06:15.353

确保您使用的是正确的库。尝试仅包含 cxf 包，删除其他 cxf 依赖项如果您使用的是 maven，则如下所示：

```
<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-bundle</artifactId>
    <version>2.7.18</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T06:53:07.697

我遇到了同样的问题，经过大量实验，以下指南每次都有帮助。

1.  构建您的 cxf 客户端配置 xml 以导入 META-INF cxf.xml。
2.  定义 cxf 总线功能（用于记录）
3.  定义 http 管道（如果需要 TLS 握手等）
4.  jaxws:client bean，名称属性为 {targetNameSpaceWSDL)/PortName 并且 createdFromAPI=true 和 abstract=true
5.  使客户端标签包含 jaxws 功能。记住使用最新的“安全”而不是“ws-security”
6.  在您的 java 客户端类中，使用 SpringBus 加载 cxf 客户端配置 xml。[SpringBus 客户端配置的 SVN 链接](https://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/ws_security/sign_enc_policy/src/main/java/demo/wssec/client/Client.java)
7.  确保 WS 策略处理所需的所有依赖项都存在于类路径中，如 cxf-rt-ws-policy 和 cxf-rt-ws-security.jar 以及 bouncycastle 提供程序（如果需要）

注意：security.signature.properties 和security.encryption.properties 也可以外化，直接用xml 值中的绝对路径引用。

# c++ - 从 QtProcess 运行 Linux 二进制文件时为其提供参数

> ID：15570482
> 
> 赞同：1
> 
> 时间：2013-03-22T12:35:40.153
> 
> 标签：c++, linux, qt, ubuntu

使用 Qpr​​ocess 的标准方法如下：

```
 QObject *parent;
 ...
 QString program = "./path/to/Qt/examples/widgets/analogclock";
 QStringList arguments;
 arguments << "-style" << "motif";

 QProcess *myProcess = new QProcess(parent);
 myProcess->start(program, arguments); 
```

但是，我想做的是在控制台（sh）上运行二进制文件，然后将输出从那里复制到 Qt 中的文本框。

所以现在我需要做的`myProcess->start(program, arguments);`是传入`sh`程序和二进制名称`arguments`。但是，如果我的二进制文件也接受命令行参数怎么办？我在哪里供应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:43:45.320

您可以使用[`arguments()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#arguments)：

```
#include <QApplication>

...

QStringList myArgs = qApp->arguments();

myProcess->start(program, myArgs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:09:14.957

我试过这个：

/home/user/1.sh

```
#!/bin/sh

echo $1 >> /home/user/1.out
echo $2 >> /home/user/1.out
echo $3 >> /home/user/1.out 
```

主文件

```
#include <QtCore>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QString program = "sh";
    QStringList args;
    args << "/home/user/1.sh" << "qwe" << "123" << "c c c";

    QProcess p;
    p.start(program, args);
    p.waitForFinished();

    return 0;
} 
```

运行我的应用程序后，我得到：

1.出

```
qwe
123
c c c 
```

似乎为我工作。

# c# - 有没有办法修复datagridview中的数据位置？

> ID：15570485
> 
> 赞同：0
> 
> 时间：2013-03-22T12:35:54.937
> 
> 标签：c#, visual-studio-2010, sql-server-2008

例如：如果管理员可以查看网格中的所有数据。当以教员身份登录时，他/她只能在网格中查看他/她的数据，其余的必须对他们隐藏。通过更改 sql 查询，我能够根据`facultyID`（主要）进行过滤，但是在显示网格中的位置时，由于 while 循环而发生了变化。建议我一个解决方案

```
private void FillDisGrid()

    {
         int a1 = 0;
         int colNo = 1;
         if (conn.State == ConnectionState.Open) { conn.Close(); }
         conn.Open();
         SqlCommand cmd = new SqlCommand();
         SqlDataReader dr;
         cmd.Connection = conn;
         cmd.CommandText = "select Subjectname,FacultyID from timetabletab where FacultyID='" + comboBox2.Text + "' and semester='" + comboBox3.Text + "' order by rno";
         dr = cmd.ExecuteReader();
         while (dr.Read())
         {
             if (colNo % 6 == 0) { colNo = 1; a1 = a1 + 2; }
             dataGridView1.Rows[a1].Cells[colNo].Value = dr.GetValue(0).ToString();
             dataGridView1.Rows[a1 + 1].Cells[colNo].Value = dr.GetValue(1).ToString();
             colNo++;

         }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:19:54.667

所以你想要一个可以根据查看的人显示不同数据和标题的网格吗？如果是这样，您可以尝试这样做，当您从数据库中获取数据时，将其返回到数据表或自定义对象中，将其绑定到网格。但设置网格 AutoGenerateColumns = false，因此它只会根据绑定的内容生成标题。

# c - 指向C中无效位置错误的指针

> ID：15570487
> 
> 赞同：1
> 
> 时间：2013-03-22T12:36:06.670
> 
> 标签：c, pointers, gdb, initialization, memory-address

我正在运行一个函数，但在第 10 行出现错误。在 gdb 上调试时，我看到 ptr 指向 0x0。我假设这指的是有关无效地址位置的内容。为什么会这样，我该如何再次修复代码。谢谢

```
1  static char *kstrdup(const char *buf)
2  {
3     char *ptr, *ret;
4 
5     ret = ptr = kmalloc(strlen(buf) + 1);
6     if ((ptr = NULL))
7         panic("kmalloc returned NULL");
8 
9     for (; *buf != '\0'; ++ptr, ++buf)
10        *ptr = *buf;
11
12    *ptr = '\0';
13
14    return ret;
15 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:37:15.070

这就是问题：

```
if ((ptr = NULL)) 
```

因为它是一项*任务*而不是*比较*。如果分配`NULL`to`ptr`并且分配的结果为零，这意味着条件是`false`并且`if ()`未输入`panic()`且未调用（这可能会退出程序）。剩下的代码然后取消引用一个`NULL`指针，这是未定义的行为。

改成：

```
if (ptr == NULL) /* or if (!ptr) 
```

一些开发人员更喜欢在`const`相等检查的左侧放置一个可用的值，以便编译器可以帮助检测此错误。例如，如果你写了：

```
if (NULL = ptr) 
```

编译器会发出错误（例如*左操作数必须是 l-value*）并且编译会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:04:13.543

关于分配和比较之间的区别有一个很棒的教程。它太好了，你会下意识地知道什么时候用赋值，什么时候用比较。这是 KN King 在他的巨著 http://www.amazon.com/c/knking"> C 编程：一种现代方法。一定要读一遍。顺便说`==`一句`< <= > >= !=`

# jquery - getJSON 请求总是不成功？

> ID：15570492
> 
> 赞同：0
> 
> 时间：2013-03-22T12:36:25.223
> 
> 标签：jquery, twitter, getjson

为什么 getJSON 不起作用？这是我的 HTML：

```
<body>
<h2>Where are my followers</h2>

        <input type="text" id="account"  placeholder="twitter user name"  />
        <input type="button" value="Find Followers" id="button" name="button"  />

<div id="map-canvas" >

</div>
</body> 
```

这是我的 jQuery

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

    <script>
$(document).ready(function(){
$("#button").click(function(){
alert("Befor JSON");
var url = "http://api.twitter.com/1/statuses/followers/"+document.getElementById('account').value+".json?callback=?";
alert(url);
$.getJSON(url , function (data){
alert(data +"Hi");
});
alert("after json");

});
});</script> 
```

问题是 json 之前的警报被打印，json 之后的警报也是如此，但警报数据+Hi 从未出现。就像 getJSON 永远不会成功一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:48:40.793

尝试 .fail()

```
$.getJSON(url , function (data){
alert(data +"Hi");
}).fail(function(){
alert("fail");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:00:37.887

我已经发布了这个作为对几个帖子的回答，对于重复，我很抱歉，但似乎仍然有很多人不在循环中。

Twitter 正在关闭他们的 API 1.0，这是其中的一部分。如果您想完成这项工作，请查看我在 GitHub 上的[Twitter Feed 插件](http://zkniebel.github.com/jquery-twitter-feed/)，它将指导您完成完成这项工作的步骤。在您的情况下，您需要更改示例代码中的一些 URL，以便查询正确的套接字，但是代码本身以及设置它的步骤是相同的​​。

如果您打算让 AJAX 正常工作，您可以查看我的插件的源代码，它会对已弃用的 AJAX 进行注释和标记。但是，我并不是要大喊大叫或听起来像是破唱片，但现在任何一天你的 AJAX 调用都将不起作用，即使你修复了你现在遇到的任何错误。

# android - Android 模拟器上的 Bing 地图可以工作，但不能在设备上工作

> ID：15570495
> 
> 赞同：4
> 
> 时间：2013-03-22T12:36:29.017
> 
> 标签：android, bing-maps

我已经设置了[http://bingmapsandroidsdk.codeplex.com/](http://bingmapsandroidsdk.codeplex.com/)来尝试使用 bing 地图而不是 Android 上的谷歌地图。因为我无法设置。

我可以在我的模拟器上运行 Bing 地图，但我无法在我的设备（Galaxy S2）上运行它。

我的手机上有 wifi 连接，但我仍然无法通过加载屏幕。

我也检查了这个问题，但它没有解决[在模拟器上工作但在真正的 Android 设备上没有解决的问题](https://stackoverflow.com/questions/12443167/working-on-emulator-but-not-on-the-real-android-device)

所以我的代码：

**显现**

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.ACCESS_GPS"></uses-permission>
<uses-sdk android:minSdkVersion="5" android:targetSdkVersion="15"/>

<application android:icon="@drawable/bingmaps_icon" android:label="@string/app_name" android:allowBackup="false">
    <activity android:name=".MainActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="SplashActivity"></activity>
</application> 
```

**从 Bing-sdk 复制的启动 Activity**

```
package org.bingmaps.app;

    import java.util.HashMap;

    import org.bingmaps.app.R;
import org.bingmaps.sdk.BingMapsView;
import org.bingmaps.sdk.Coordinate;
import org.bingmaps.sdk.EntityClickedListener;
import org.bingmaps.sdk.EntityLayer;
import org.bingmaps.sdk.MapLoadedListener;
import org.bingmaps.sdk.MapMovedListener;
import org.bingmaps.sdk.MapStyles;
import org.bingmaps.sdk.Pushpin;
import org.bingmaps.sdk.PushpinOptions;
import android.app.Activity;
import android.app.ProgressDialog;
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.ViewFlipper;
import android.widget.ZoomButton;

public class MainActivity extends Activity {
private BingMapsView bingMapsView;
private GPSManager _GPSManager;
private EntityLayer _gpsLayer;
private ProgressDialog _loadingScreen;

private Activity _baseActivity;

CharSequence[] _dataLayers;
boolean[] _dataLayerSelections;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    //OPTION Lock map orientation
    setRequestedOrientation(1);

    setContentView(R.layout.main);

    Initialize();
}

private void Initialize()
{
    _baseActivity = this;
    _GPSManager = new GPSManager((Activity)this, new GPSLocationListener());

    //Add more data layers here
    _dataLayers = new String[] { getString(R.string.traffic)};
    _dataLayerSelections =  new boolean[ _dataLayers.length ];

    _loadingScreen = new ProgressDialog(this);
    _loadingScreen.setCancelable(false);
    _loadingScreen.setMessage(this.getString(R.string.loading) + "...");

    bingMapsView = (BingMapsView) findViewById(R.id.mapView);

    //Create handler to switch out of Splash screen mode
    final Handler viewHandler = new Handler() {
        public void handleMessage(Message msg) {
            ((ViewFlipper) findViewById(R.id.flipper)).setDisplayedChild(1);
        }
    };

    //Add a map loaded event handler
    bingMapsView.setMapLoadedListener(new MapLoadedListener() {
        public void onAvailableChecked() {
            // hide splash screen and go to map
            viewHandler.sendEmptyMessage(0);

            //Add GPS layer
            _gpsLayer = new EntityLayer(Constants.DataLayers.GPS);
            bingMapsView.getLayerManager().addLayer(_gpsLayer);
            UpdateGPSPin();
        }
    });

    //Add a entity clicked event handler
    bingMapsView.setEntityClickedListener(new EntityClickedListener() {
        public void onAvailableChecked(String layerName, int entityId) {
            HashMap<String, Object> metadata = bingMapsView.getLayerManager().GetMetadataByID(layerName, entityId);
            DialogLauncher.LaunchEntityDetailsDialog(_baseActivity, metadata);
        }
    });

    //Load the map
    bingMapsView.loadMap(Constants.BingMapsKey, _GPSManager.GetCoordinate(), Constants.DefaultGPSZoomLevel, this.getString(R.string.mapCulture));

    // Create zoom out button functionality
    final ZoomButton zoomOutBtn = (ZoomButton) findViewById(R.id.zoomOutBtn);
    zoomOutBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            bingMapsView.zoomOut();
        }
    });

    // Create zoom button in functionality
    final ZoomButton zoomInBtn = (ZoomButton) findViewById(R.id.zoomInBtn);
    zoomInBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            bingMapsView.zoomIn();
        }
    });

}    

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.layout.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        //Map Mode menu items
        case R.id.autoBtn:
            bingMapsView.setMapStyle(MapStyles.Auto);
            item.setChecked(!item.isChecked());
            return true;
        case R.id.roadBtn:
            bingMapsView.setMapStyle(MapStyles.Road);
            item.setChecked(!item.isChecked());
            return true;
        case R.id.aerialBtn:
            bingMapsView.setMapStyle(MapStyles.Aerial);
            item.setChecked(!item.isChecked());
            return true;
        case R.id.birdseyeBtn:
            bingMapsView.setMapStyle(MapStyles.Birdseye);
            item.setChecked(!item.isChecked());
            return true;
        //More option items
        case R.id.aboutMenuBtn:
            DialogLauncher.LaunchAboutDialog(this);
            return true;
        case R.id.layersMenuBtn:
            DialogLauncher.LaunchLayersDialog(this, bingMapsView, _dataLayers, _dataLayerSelections);
            return true;
        case R.id.clearMapMenuBtn:
            bingMapsView.getLayerManager().clearLayer(null);

            //unselect all layers
            for(int i=0;i<_dataLayerSelections.length;i++){
                _dataLayerSelections[i] = false;
            }

            //re-add GPS layer
            bingMapsView.getLayerManager().clearLayer(Constants.DataLayers.GPS);
            UpdateGPSPin();
            return true;
        //GPS Menu Item
        case R.id.gpsMenuBtn:
            Coordinate coord = _GPSManager.GetCoordinate();

            if(coord != null){
                //Center on users GPS location
                bingMapsView.setCenterAndZoom(coord, Constants.DefaultGPSZoomLevel);
            }
            return true;
        //Search Menu Item
        case R.id.searchMenuBtn:
            DialogLauncher.LaunchSearchDialog(this, bingMapsView, loadingScreenHandler);
            return true;    
        //Directions Menu Item
        case R.id.directionsMenuBtn:
            DialogLauncher.LaunchDirectionsDialog(this, bingMapsView, loadingScreenHandler);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

private void UpdateGPSPin(){        
    PushpinOptions opt = new PushpinOptions();
    opt.Icon = Constants.PushpinIcons.GPS;
    Pushpin p = new Pushpin(_GPSManager.GetCoordinate(), opt);
    if (p.Location != null) {       
        _gpsLayer.clear();
        _gpsLayer.add(p);
        _gpsLayer.updateLayer();
    }
}

@SuppressWarnings("unused")
private final MapMovedListener mapMovedListener = new MapMovedListener() {
    public void onAvailableChecked() {
        //OPTION Add logic to Update Layers here. 
        //This will update data layers when the map is moved.
    }
};

/**
 * Handler for loading Screen
 */
protected Handler loadingScreenHandler = new Handler() {
    public void handleMessage(Message msg) {
        if (msg.arg1 == 0) {
            _loadingScreen.hide();
        } else {
            _loadingScreen.show();
        }
    }
};

public class GPSLocationListener implements LocationListener {
    public void onLocationChanged(Location arg0) {
        UpdateGPSPin();
    }

    public void onProviderDisabled(String arg0) {
    }

    public void onProviderEnabled(String arg0) {
    }

    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    }   
}
} 
```

来自 LOGCAT 的错误：非

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:30:32.360

android 的 bing 地图不适用于 android 版本 3.0 及更高版本

# spring - Spring 操作的可用路径列表

> ID：15570496
> 
> 赞同：3
> 
> 时间：2013-03-22T12:36:30.753
> 
> 标签：spring, rest, spring-webflow, spring-annotations

我有一个使用 spring 注释和 Spring MVC 公开 RESTful 操作的应用程序。

看起来像

```
@RequestMapping(value = "/example/{someId}", 
    method = RequestMethod.GET, consumes=MediaType.APPLICATION_JSON_VALUE, 
    produces=MediaType.APPLICATION_JSON_VALUE)
@ResponseBody 
public void isRegisteredToThread(@PathVariable long someId, HttpServletResponse response) {

    [something]
} 
```

我想要的是一个自动生成的所有 URL、方法和可用参数的列表——可能在一个 WSDL 中。有插件还是可用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T09:31:20.170

您可以查看`RequestMappingEndpoint`Spring Boot 提供的源代码，了解 Spring Boot 如何报告映射。

通过该代码可以看到映射（处理程序和方法映射）可以很容易地从 applicationContext 获得

（使用

```
applicationContext.getBeansOfType(AbstractUrlHandlerMapping.class) 
```

和

```
applicationContext.getBeansOfType(AbstractHandlerMethodMapping.class) 
```

分别）。获得映射后，您可以随意处理它们。您可能想要创建一个库，该库可以包含在您的所有项目中，这些项目处理您的组织所需形式的映射

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T09:16:43.343

WSDL 不是为休息而完成的，它是为 SOAP 使用的。

您可能会使用 WADL，但我真的不建议这样做。

在我的项目中，我总是使用 swagger（有一个 spring 版本）。您可以在这里找到更多信息[https://github.com/martypitt/swagger-springmvc](https://github.com/martypitt/swagger-springmvc)和这里[http://blog.zenika.com/index.php?post/2013/07/11/Documenting-a-REST-API -with-Swagger-and-Spring-MVC](http://blog.zenika.com/index.php?post/2013/07/11/Documenting-a-REST-API-with-Swagger-and-Spring-MVC)

试试看。

作为替代方案，如果您不需要基于 Web 的东西，您可以尝试使用 rest-shell ( [https://github.com/spring-projects/rest-shell](https://github.com/spring-projects/rest-shell) )

# caching - OLAP Saiku 缓存过期

> ID：15570498
> 
> 赞同：1
> 
> 时间：2013-03-22T12:36:32.203
> 
> 标签：caching, olap, mondrian, saiku

我正在使用 Saiku 和 PHPAnalytics 在我的多维数据集上运行 MDX 查询。似乎如果我运行查询一切都很好，缓存很好。但是，如果我花 2 个小时再次运行这些查询 - 它不使用缓存！为什么？我需要缓存保存很长时间！该怎么办？我试图添加这个ti mondrian.properties mondrian.rolap.CachePool.costLimit = 2147483647

但没有帮助。做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T19:07:56.573

Mondrian 的默认内存缓存将事物存储在 WeakHashMap 中。这意味着它可以由 JVM 的垃圾收集器自行决定清除。大多数应用程序服务器都设置为定期清理垃圾收集（通常每小时左右）。您必须调整 JVM 的配置以不执行此操作。

> -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000

您还可以实现自己的 SegmentCache SPI 缓存实现。如果您的实现使用硬引用，它们将永远不会被收集。这比较棘手，需要你做大量的学习才能把它做好。您可以从查看[默认实现](https://github.com/pentaho/mondrian/blob/master/src/main/mondrian/rolap/cache/MemorySegmentCache.java)开始，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T20:17:53.407

mondrian 缓存应该缓存起来，直到缓存被故意刷新。也就是说，它使用一个老化的系统来确定应该缓存什么，如果它用完内存来存储数据，最旧的查询会被推出缓存并被替换。

我没有尝试过 PHPAnalytics 的东西，但也许他们已经在 Saiku 服务器中调用了一些定期刷新缓存，否则这不应该发生。

# mysql - 不同对象类型的数据库模式

> ID：15570502
> 
> 赞同：0
> 
> 时间：2013-03-22T12:36:38.830
> 
> 标签：mysql, sql, database

我正在创建一个具有不同类型对象的新应用程序。例如显示器、鼠标和键盘。不同的对象有自己的属性。

显示器：品牌、分辨率、颜色等鼠标：品牌、类型、有线/无线等

问题：不同类型对象的最佳模式是什么？

1.  单表
2.  多表

给定单个表（查询性能原因），属性将是 db 列类型，但由于不同类型的对象具有不同的属性，这怎么可能？并且在设计时可能会有未知的对象，将来可能会添加。这会导致很多列吗？

另一方面，在列出所有对象时，多个表是否会遇到性能问题（查询多个表）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:39:58.827

这听起来有点像`Many-to-Many`关系，在这种情况下，您应该创建 3 表设计，

对象列表

*   对象 ID ( **PK** )
*   对象名
*   其他栏目...

财产清单

*   属性 ID ( **PK** )
*   属性名称
*   其他列

对象_属性

*   ObjectID ( **FK** ) -*这应该是带有 PropertyID 的复合主键*
*   属性 ID ( **FK** )
*   其他列...

# .net - .Net 中的 CRM 指南

> ID：15570507
> 
> 赞同：-2
> 
> 时间：2013-03-22T12:36:49.593
> 
> 标签：.net, crm

我的公司正计划在 .Net 中构建一个适合中小型公司的新 CRM 系统。我想知道是否有任何有用的书籍/博客/教程/资源可供开发人员使用，了解 CRM 基础/开发。

任何形式的输入将不胜感激

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:44:45.713

其中一些可能对您有所帮助

[http://crm.codeplex.com/](http://crm.codeplex.com/)

或者

[http://www.jitbit.com/net-crm/](http://www.jitbit.com/net-crm/)

这是可用 CRM 之间的比较。

[http://en.wikipedia.org/wiki/Comparison_of_CRM_systems](http://en.wikipedia.org/wiki/Comparison_of_CRM_systems)

指导：

发展需要规划。- 规划您的项目 - 对现有 CRM 进行一些分析并注意它们提供的服务。（为此，一些开源 CRM 可用）

*   写下您的 CRM 应提供的计划和服务。
*   将整个项目划分为不同的模块。
*   准备模块的工作流程。
*   开发模块
*   测试是使用一些真实世界的输入。
*   整合所有模块
*   计划并进行集成测试以测试集成是否运行良好。
*   最终，用户体验测试，错误发现，解决错误，进化等等。

您将拥有一个更好的 CRM，并实施您自己的想法和服务，这可能是对市场上现有 CRM 的一个加分点。

希望能帮助到你。

# serialization - Newtonsoft 中的 TypeNameHandling 需要 $type 作为第一个属性？

> ID：15570510
> 
> 赞同：8
> 
> 时间：2013-03-22T12:36:55.267
> 
> 标签：serialization, backbone.js, asp.net-mvc-4, asp.net-web-api, json.net

我的 web api 中有以下方法

```
public void Put(string id, [FromBody]IContent value) {
    //Do stuff
} 
```

我正在使用主干 js 使用 fiddler 将以下 JSON 发送到服务器，值为 null：

```
{
    "id": "articles/1",
    "heading": "Bar",
    "$type": "BrickPile.Samples.Models.Article, BrickPile.Samples"
} 
```

但是如果我首先在 JSON 对象中添加 $type 属性，则反序列化可以正常工作，请参阅：

```
{
 "$type": "BrickPile.Samples.Models.Article, BrickPile.Samples",
  "id": "articles/1",
  "heading": "Bar" 
} 
```

是否可以将 newtonsoft 配置为检查对象中任何位置的 $type 属性而不是第一个属性，或者我可以配置主干以便它始终`$type`在 JSON 对象中首先添加属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:17:42.603

我强烈建议不要配置任何序列化程序（包括 JSON.NET）来从传入的有效负载中读取对象类型。这在历史上一直是 Web 应用程序中大量漏洞的原因。相反，将公共入口点更改为您的操作以将实际类型作为绑定参数，然后根据需要委托给内部可测试方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T12:16:10.647

首先，AFAIK，Json.NET 的代码经过优化以避免将整个对象保存在内存中只是为了读取它的类型。所以最好放置`$type`为第一个属性。

其次，您可以编写自己的`JsonConverter`，首先读取`JObject`（使用`Load`方法），手动读取`$type`属性，从序列化程序获取类型`SerializationBinder`，创建值并从中填充它`JObject`。

第三，关于安全性。虽然 Json.NET`$type`听起来是个好主意，但通常并非如此。它允许 Json.NET只需将其类型写入 JSON 文件即可从**任何程序集创建****任何**对象类型。最好将 custom与只允许您指定的类型的字典一起使用。您可以在我的私有框架中找到一个示例（它还支持从 from获取值）：**`SerializationBinder``$type``JsonObjectAttribute`**

 **[https://github.com/Athari/Alba.Framework/blob/742ff1aeeb114179a16ca42667781944b26f3815/Alba.Framework/Serialization/DictionarySerializationBinder.cs](https://github.com/Athari/Alba.Framework/blob/742ff1aeeb114179a16ca42667781944b26f3815/Alba.Framework/Serialization/DictionarySerializationBinder.cs)

(This version uses some methods from other classes, but they're trivial. Later commits made the class more complex.)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-09T22:51:05.350

I had kind of the same question apparently, and someone found an answer. Not sure whats the appropriate way to share an answer and give him ALL the credit, but this is the link: [Newtonsoft JSON.net deserialization error where fields in JSON change order](https://stackoverflow.com/questions/29493292/newtonsoft-json-net-deserialization-error-where-fields-in-json-change-order/29526269#29526269)

and this is the guy: [https://stackoverflow.com/users/3744182/dbc](https://stackoverflow.com/users/3744182/dbc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T13:13:32.590

这将在主干中起作用，但我不知道每个浏览器的行为是否相同。基本上，不能保证每个浏览器都会按照添加的顺序保留项目。

```
 MyModel = Backbone.Model.extend({

  // ...

  toJSON: function(){
    // build the "$type" as the first parameter
    var json = {"$type": "BrickPile.Samples.Models.Article, BrickPile.Samples"};
    // get the rest of the data
    _.extend(json, Backbone.Model.prototype.toJSON.call(this));
    // send it back, and hope it's in the right order
    return json;
  }

}); 
```

不过，最好让 NewtonSoft 的 JSON 反序列化器在不需要它在特定位置的情况下工作。希望这将是可能的。**

# python - 当标签介于 BeautifulSoup 之间时获取文本

> ID：15570511
> 
> 赞同：0
> 
> 时间：2013-03-22T12:36:55.727
> 
> 标签：python, beautifulsoup

```
<div> <img class="photo" /> text1 </div>
<div> <img class="photo" /> text2 </div> 
```

试图获取 text1，text2。我尝试这样的事情，但它失败了，

```
for i in test.find_all(class_="photo"):
     print i.parent[1] 
```

错误：

```
RuntimeError: maximum recursion depth exceeded 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:39:48.850

在这些情况下，您正在寻找下一个元素：

```
for elem in test.find_all(class_="photo"):
    print elem.next_sibling 
```

去父母会工作，但然后寻找`.stripped_strings`属性代替：

```
for elem in test.find_all(class_="photo"):
    print ' '.join(elem.parent.stripped_strings) 
```

示范：

```
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup('''\
... <div> <img class="photo" /> text1 </div>
... <div> <img class="photo" /> text2 </div>
... ''')
>>> for elem in soup.find_all(class_="photo"):
...     print elem.next_sibling
... 
 text1 
 text2 
>>> for elem in soup.find_all(class_="photo"):
...     print ' '.join(elem.parent.stripped_strings)
... 
text1
text2 
```

# ios - 如何从iphone中的数组中删除一个对象

> ID：15570520
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:37:17.447
> 
> 标签：ios, objective-c, cocoa-touch, uitableview, nsmutablearray

我正在尝试从数组中删除一个对象，当我的表视图获取时`reload`，从表视图中显示的数组中删除了对象，我正在使用`– removeObjectAtIndex:`从数组中删除对象。请帮我从数组中永久删除对象。在此先感谢。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{

    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {

      [myArray removeObjectAtIndex:indexPath.row];

      [tableView reloadData];

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:40:43.323

用于移除对象的 NSMutableArray 方法：

```
– removeAllObjects
– removeLastObject
– removeObject:
– removeObject:inRange:
– removeObjectAtIndex:
– removeObjectsAtIndexes:
– removeObjectIdenticalTo:
– removeObjectIdenticalTo:inRange:
– removeObjectsFromIndices:numIndices:
– removeObjectsInArray:
– removeObjectsInRange: 
```

请参阅：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablearray_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablearray_Class/Reference/Reference.html)

并确保在从数组中删除对象后重新加载表。并将适当的计数发送给 tableview 委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:48:37.583

取一个 NSMutableArray，然后在选中的 tableview 行数处删除对象。然后重新加载 tableview 以应用更改。

例如....

```
[yourArray removeObjectAtIndex:indexPath.row];
[tableView reloadData]; 
```

确保重新加载 tableview，并使用 NSMutableArray 而不是 NSArray

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:04:23.110

我认为您从临时数组中删除了对象，因此它不会从主数组中删除。所以当您重新加载或查看将出现时，它正在复制..

# c# - Windows XP上的多播套接字？

> ID：15570522
> 
> 赞同：0
> 
> 时间：2013-03-22T12:37:23.707
> 
> 标签：c#, sockets, udp, windows-xp, multicast

我有一个在 Windows 7 上运行良好的小软件。它使用 udp 上的多播进行了一些发现。

我开始在 Windows XP 上进行一些测试，但遇到了一些错误。

```
Socket sendSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
//ERROR HAPPEN ON THIS NEXT LINE
sendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership, new MulticastOption(m_multicastAddress, localAddress));
sendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastTimeToLive, 255);
sendSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
sendSocket.MulticastLoopback = true;
sendSocket.Bind(new IPEndPoint(localAddress, m_port));
m_sendSockets.Add(localAddress, sendSocket); 
```

例外是：

```
System.Net.Sockets.SocketException was unhandled
  Message=An invalid argument was supplied
  Source=System
  ErrorCode=10022
  NativeErrorCode=10022
  StackTrace:
       at System.Net.Sockets.Socket.setMulticastOption(SocketOptionName optionName, MulticastOption MR)
       at System.Net.Sockets.Socket.SetSocketOption(SocketOptionLevel optionLevel, SocketOptionName optionName, Object optionValue)
       at [****] 
```

我在一个 100 行的控制台程序中只测试了这部分代码。它在 Windows 7 上运行良好，但在 XP 上总是崩溃。

您对如何调试/解决此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:52:40.447

抱歉，我刚刚找到了另一个答案，其中有完全相同的问题：

[在 XP 上使用多播的 C# SocketException](https://stackoverflow.com/questions/436659/c-sharp-socketexception-with-multicast-on-xp)

我们必须`Bind`在加入多播之前调用socketOption

# java - JUnit4: is() vs is(notNullValue())

> ID：15570525
> 
> 赞同：4
> 
> 时间：2013-03-22T12:37:27.367
> 
> 标签：java, junit4, assertions

关于 JUnit4 `assertThat`，我已经看到了这两种方式。一个比另一个正确还是都一样？

```
byte[] val;
...
assertThat(val, notNullValue());
        --vs--
assertThat(val, is(notNullValue())); 
```

第二个选项读取“断言 val 不为空”，这听起来更好。（另一方面，它可能是多余的。）

我已经使用了这两种方法，它们似乎产生了正确的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T12:46:20.330

[Hamcrest 文档](https://code.google.com/p/hamcrest/wiki/Tutorial)说：

> Hamcrest 努力使您的测试尽可能具有可读性。例如，**匹配`is`器是一个包装器，它不会向底层匹配器添加任何额外的行为。以下断言都是等价的**：
> 
> ```
> assertThat(theBiscuit, equalTo(myBiscuit));
> assertThat(theBiscuit, is(equalTo(myBiscuit)));
> assertThat(theBiscuit, is(myBiscuit)); 
> ```
> 
> 最后一种形式是允许的，因为`is(T value)`它被重载到 return `is(equalTo(value))`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:46:12.297

这两种方式没有区别。该`is()`方法主要是为了提高可读性而引入的。

# python - 使用python通过串行发送十六进制

> ID：15570526
> 
> 赞同：4
> 
> 时间：2013-03-22T12:37:29.180
> 
> 标签：python, usb, hex, rs485

这个周末我要做一个小项目。有一个太阳能电池逆变器（丹佛斯 ULX 3600i），我将尝试连接到我的 linux 机器，看看我是否可以从中获取数据，例如为统计数据创造了多少能量。上面有一个用于 RJ45 连接的输入，但带有 RS485。

我得到了电缆，通过电脑中的 USB 端口连接它，在电脑和逆变器之间有一个 RS485 转换器。

然后我正在编写一个小的 python 代码来发出请求。但是我不知道如何正确发送数据。

```
import serial
import struct

ser = serial.Serial(
    port='/dev/ttyUSB0',
    baudrate=19200,
    parity=serial.PARITY_NONE,
    stopbits=serial.STOPBITS_ONE,
    bytesize=serial.EIGHTBITS
)

print(ser.isOpen())
thestring = "7E FF 03 00 01 00 02 0A 01 C8 04 D0 01 02 80 00 00 00 00 8E E7 7E"
data = struct.pack(hex(thestring))
#data = struct.pack(hex, 0x7E, 0xFF, 0x03, 0x00, 0x01, 0x00, 0x02, 0x0A, 0x01, 0xC8,      0x04, 0xD0, 0x01, 0x02, 0x80, 0x00, 0x00, 0x00, 0x00, 0x8E, 0xE7, 0x7E)

ser.write(data)
s = ser.read(1)
print(s)
ser.close() 
```

逆变器使用丹佛斯 ComLynx 协议（[第 26 页](http://www.danfoss.com/NR/rdonlyres/18FA1022-2FF1-484A-8460-B6A51BE202BF/0/ComLynx_User_Guide_16_20120817_A7.pdf)是我要发送的数据）：

编辑：我现在可以发送请求，因为 Adam 4520 RS485 转换器上的 LED 灯闪烁一次，但是没有返回数据，但是当我在终端中执行 CTRL+C 时出现此错误：

```
dontommy@dtbeast:~/workspace/python_scripting/src$ ./sollar.py 
True
^CTraceback (most recent call last):
  File "./sollar.py", line 30, in <module>
    s = ser.readline().decode('utf-8')
  File "/usr/local/lib/python3.2/dist-packages/serial/serialposix.py", line 446, in read
    ready,_,_ = select.select([self.fd],[],[], self._timeout)
KeyboardInterrupt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:12:27.543

将“字符串”重写为

```
thestring = "\x7E\xFF\x03\x00\x01\x00\x02\x0A\x01\xC8\x04\xD0\x01\x02\x80\x00\x00\x00\x00\x8E\xE7\z7E" 
```

你不需要打包它，你可以说**data=thestring**并发送它。仅当文档中的各种 id 与您的设备上的完全匹配时，这才有效

您需要弄清楚 python **“结构”**是如何工作的，如何编码二进制以及如何将两个 4 位值放入一个 8 位字节：线索，请参阅**>> 和 <<**运算符以及结构包“B”格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-22T18:10:29.540

在确定以下方案之前，我尝试了多种方案将十六进制字符的命令字符串转换为字节，这些字节在 UART 的远端被识别为十六进制。我选择一次发送一个字节的字符串，因为远端一次不能处理超过四个字节，所以我不能发送整个字符串。单个 hex_byte 的格式类似于 C 中的 sprintf。

```
import time
import serial
import sys
import binascii
import inspect

# This function takes a command string and sends individual bytes.
# It also reports the response.
def send_command(cmd_name, cmd_string):
    print ("\ncmd_name:", cmd_name)
    print ("cmd_string:", cmd_string)
    cmd_bytes = bytearray.fromhex(cmd_string)
    for cmd_byte in cmd_bytes:
        hex_byte = ("{0:02x}".format(cmd_byte))
        #print (hex_byte)
        ser.write(bytearray.fromhex(hex_byte))
        time.sleep(.100)

    # wait an extra 3 seconds for DISP_ON_CMD
    if cmd_name == "DISP_ON_CMD":
        time.sleep(5.0)
    response = ser.read(32)
    print ("response:", binascii.hexlify(bytearray(response)))
    return

# Code to put processor into factory mode.
comm_init='c4c4'
# Here's the list of command strings, captured as tuples.
# The 16-bit Data and Msg CRCs are calculated via gen_crc.exe.
heart_beat_cmd=      ("HEART_BEAT_CMD",      'a5a50a00010000003e1b') 
```

这是我在 Python 3.4.5 窗口中看到的内容。

cmd_name: HEART_BEAT_CMD

cmd_string：a5a50a00010000003e1b

回复：b'a5a51a002a0054373031763200000c08201e0a040000e389f86b'

我从来没有把输出解析成字节，但这将是一个很好的补充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-12T06:48:17.743

免责声明：我对 python 和串口编程都很陌生。我知道这是一个非常古老的问题，可能已经解决了，但我想做我的一部分（我猜），也许在这个过程中学习！我知道关于 KeyboardInterrupt 问题第二部分的答案（或者至少我认为我知道。）所以这里是

KeyboardInterrupt 基本上是当用户在程序仍在运行时点击“Control+C”时。这使得程序停在它当时正在执行的那一行。因此

```
File "./sollar.py", line 30, in <module>
    s = ser.readline().decode('utf-8')
File "/usr/local/lib/python3.2/dist-packages/serial/serialposix.py", line 446, in read
    ready,_,_ = select.select([self.fd],[],[], self._timeout) 
```

因为那是它停止的地方（希望我是对的。）为了避免这种情况，你可以使用“try.. except”

```
while True:
    try:
        # your main code here
        break
    except KeyboardInterrupt:
        print("User interrupt encountered. Exiting...")
        time.sleep(3)
        exit()
    except:
        # for all other kinds of error, but not specifying which one
        print("Unknown error...")
        time.sleep(3)
        exit() 
```

这基本上可以帮助您以一种相当“干净的方式”退出程序。希望有帮助。

# pdf - 如何使用 xpdf 库从 PDF 中识别和提取矢量图形？

> ID：15570529
> 
> 赞同：1
> 
> 时间：2013-03-22T12:37:34.190
> 
> 标签：pdf, xpdf

有没有人有示例代码演示如何使用 XPDF 库从 PDF 中提取矢量图形对象（例如表示图表和流程图的对象）？Web 上似乎没有任何可用于 xpdf 库的文档，我也找不到任何使用该库从 PDF 中提取信息的示例代码。我正在浏览 xpdf 的代码库，但任何指向其文档或示例代码的指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:22:00.003

OutputDev 类具有描边、填充、剪辑……虚拟成员定义。只需实现这些并从 GfxState 中提取路径和颜色信息。您将在 xpdf 代码库中的基于 OutputDev 的类中找到路径迭代，例如 TextOutputDev 或 ImageOutputDev

编辑：这个[outputdev](https://github.com/immateriel/pdf2svg/blob/master/SVGOutputDev.cc)可能会给你你需要的例子

# jquery - 从一个列表拖动到另一个列表时，jQueryUI 更改背景颜色

> ID：15570536
> 
> 赞同：6
> 
> 时间：2013-03-22T12:38:02.247
> 
> 标签：jquery, html, css, jquery-ui

我正在使用可排序的 jQueryUI，我有两个列表：

*   添加了 DVD
*   删除了 DVD

当从添加拖动到删除时，我希望 div .container 背景颜色变为红色。

然后，当从删除拖动到添加时，我希望 div .containerTwo 背景颜色变为红色。

[http://jsfiddle.net/w3vvL/](http://jsfiddle.net/w3vvL/)

```
$("#gallery").sortable({
    connectWith: "#trash"
});
$("#trash").sortable({
   connectWith: "#gallery"
}); 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:44:03.540

您可以使用[接收](http://api.jqueryui.com/sortable/#event-receive)事件来响应列表何时收到项目：

查看更新的小提琴：http: [//jsfiddle.net/w3vvL/39/](http://jsfiddle.net/w3vvL/39/)

```
$("#gallery").sortable({
    connectWith: "#trash",
    receive: function(event, ui) {
                    $(".container").css("background-color", "red");
            }
}); 
```

并带有动画：

```
$("#gallery").sortable({
    connectWith: "#trash",
    receive: function(event, ui) {
                    $(".container").css("background-color", "green");
                    $(".container").stop().animate({ backgroundColor: "white" }, "slow");
            }
}); 
```

查看更新的小提琴：http: [//jsfiddle.net/w3vvL/43/](http://jsfiddle.net/w3vvL/43/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:42:04.123

尝试属性“占位符”

```
$("#gallery").sortable({
    connectWith: "#trash",
    placeholder: "ui-state-highlight"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:00:44.943

如果你想做更多像悬停一样的事情，你可以使用[over](http://api.jqueryui.com/sortable/#event-over) and [out](http://api.jqueryui.com/sortable/#event-out)事件。

查看更新的小提琴：http: [//jsfiddle.net/w3vvL/61/](http://jsfiddle.net/w3vvL/61/)

```
$("#gallery").sortable({
    connectWith: "#trash",
    over: function(event, ui) {
        if(ui.sender.context.id != "gallery")
            $(".container").css("background-color", "green");
    },
    out: function(event, ui) {
        $(".container").css("background-color", "white");
    }
}); 
```

您会注意到我使用了 ui.sender 属性，如果从一个可排序对象移动到另一个可排序对象，该属性是该项目来自的可排序对象。它允许我检测我们是否在不同的可排序对象上，以便在我们仍然在同一个可排序对象中时不更改背景颜色。

# java - java.lang.IllegalArgumentException：托管类型 [T] 中的属性 [A] 不存在

> ID：15570541
> 
> 赞同：1
> 
> 时间：2013-03-22T12:38:23.827
> 
> 标签：java, jpa, criteria

我正在尝试创建一个使用 JPA 2.0 Criteria API 从我的数据库中检索一些数据的搜索页面。每次我尝试进行搜索时都会遇到相同的异常错误。

这是我的搜索方法：

```
public List<Matches> search(SearchCommercialsDTO searchCommercialsDTO) {

    CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Matches> criteria = builder.createQuery( Matches.class );
    Root<Matches> matchesRoot = criteria.from( Matches.class );
    criteria.select( matchesRoot );

    List<Predicate> predicateList = new ArrayList<Predicate>();

    Predicate date, equipmentName, channelCode, advertiserName, agencyName, productName, duration;

    if(!ObjectUtil.isEmpty(searchCommercialsDTO.getEquipmentName())) {
        equipmentName = builder.like(matchesRoot.get("ID_RECORDER_FILES.EQUIPMENT_NAME").as(String.class), searchCommercialsDTO.getEquipmentName());
        predicateList.add(equipmentName);
    }
    if(!ObjectUtil.isEmpty(searchCommercialsDTO.getChannelCode())) {
        channelCode = builder.equal(matchesRoot.get("ID_RECORDER_FILES.CHANNEL_CODE"), searchCommercialsDTO.getChannelCode());
        predicateList.add(channelCode);
    }
    if(!ObjectUtil.isEmpty(searchCommercialsDTO.getAdvertiserName())) {
        advertiserName = builder.equal(matchesRoot.get("ID_SOURCE_MATERIAL.ADVERTISER_NAME"), searchCommercialsDTO.getAdvertiserName());
        predicateList.add(advertiserName);
    }
    if(!ObjectUtil.isEmpty(searchCommercialsDTO.getAgencyName())) {
        agencyName = builder.equal(matchesRoot.get("ID_SOURCE_MATERIAL.AGENCY_NAME"), searchCommercialsDTO.getAgencyName());
        predicateList.add(agencyName);
    }
    if(!ObjectUtil.isEmpty(searchCommercialsDTO.getProductName())) {
        productName = builder.equal(matchesRoot.get("ID_SOURCE_MATERIAL.PRODUCT_NAME"), searchCommercialsDTO.getProductName());
        predicateList.add(productName);
    }

    Predicate[] predicates = new Predicate[predicateList.size()];
    predicateList.toArray(predicates);
    criteria.where(predicates);

    return em.createQuery(criteria).getResultList();
} 
```

当它尝试执行这部分时：

```
equipmentName = builder.like(matchesRoot.get("ID_RECORDER_FILES.EQUIPMENT_NAME").as(String.class), searchCommercialsDTO.getEquipmentName()); 
```

它抛出以下异常：

```
java.lang.IllegalArgumentException: The attribute [ID_RECORDER_FILES.EQUIPMENT_NAME] from the managed type [EntityTypeImpl@112477145:Matches [ javaType: class net.checkmidia.auditoria.entity.Matches descriptor: RelationalDescriptor(net.checkmidia.auditoria.entity.Matches --> [DatabaseTable(MATCHES)]), mappings: 12]] is not present.
    at org.eclipse.persistence.internal.jpa.metamodel.ManagedTypeImpl.getAttribute(ManagedTypeImpl.java:147)
    at org.eclipse.persistence.internal.jpa.querydef.FromImpl.get(FromImpl.java:312)
    at net.checkmidia.auditoria.business.MatchesBO.search(MatchesBO.java:50)
    at net.checkmidia.auditoria.session.MatchesSession.searchMatches(MatchesSession.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:42)
    at sun.reflect.GeneratedMethodAccessor126.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.GeneratedMethodAccessor72.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 51 more 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T02:24:40.863

改变

```
matchesRoot.get("ID_RECORDER_FILES.EQUIPMENT_NAME") 
```

到

```
matchesRoot.get("ID_RECORDER_FILES").get("EQUIPMENT_NAME") 
```

并验证“ID_RECORDER_FILES”是您的 Java 类的字段名称`Matches`，“EQUIPMENT_NAME”是“ID_RECORDER_FILES”字段的类中的字段名称。

该方法[`get()`](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Path.html#get%28java.lang.String%29)采用属性的名称，因此您必须只传递 id，然后使用结果[`Path`](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Path.html)来获取该对象中包含的字段。

# android - 在android中使用GPS确定车辆的速度

> ID：15570542
> 
> 赞同：30
> 
> 时间：2013-03-22T12:38:26.093
> 
> 标签：android, gps, location, android-location

我想知道如何在使用 gps 坐在车内时使用手机获取车辆的速度。我读过加速度计不是很准确。另一件事是；坐在车辆中时是否可以访问 GPS。它不会与您在建筑物中时产生相同的效果吗？

这是我尝试过的一些代码，但我使用了 NETWORK PROVIDER。我将不胜感激。谢谢...

```
package com.example.speedtest;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.Toast;

public class MainActivity extends Activity {
    LocationManager locManager;
    LocationListener li;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        locManager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
        li=new speed();
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, li);
    }
    class speed implements LocationListener{
        @Override
        public void onLocationChanged(Location loc) {
            Float thespeed=loc.getSpeed();
            Toast.makeText(MainActivity.this,String.valueOf(thespeed), Toast.LENGTH_LONG).show();
        }
        @Override
        public void onProviderDisabled(String arg0) {}
        @Override
        public void onProviderEnabled(String arg0) {}
        @Override
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}

    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T12:44:46.493

GPS在车辆中工作正常。`NETWORK_PROVIDER`设置可能不够准确，无法获得可靠的速度，并且来自 的位置甚至`NETWORK_PROVIDER`可能不包含速度。您可以使用`location.hasSpeed()`(`location.getSpeed()`将始终返回 0) 进行检查。

如果您发现它`location.getSpeed()`不够准确，或者它不稳定（即波动剧烈），那么您可以通过取几个 GPS 位置之间的平均距离并除以经过的时间来自己计算速度。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-12-29T06:11:53.077

[有关从 Android 移动设备中的 GPS 位置变化计算速度的更多信息，请查看此链接](http://mycodingworld1.blogspot.com/2015/12/calculate-speed-from-gps-location.html)

主要有两种方法可以从手机计算速度。

1.  从加速度计计算速度
2.  利用 GPS 技术计算速度

与 GPS Technology 的加速度计不同，如果您要计算速度，则必须启用数据连接和 GPS 连接。

在这里，我们将使用 GPS 连接计算速度。在这种方法中，我们使用 GPS 位置点在单个时间段内变化的频率。然后，如果我们有地理位置点之间的真实距离，我们就可以得到速度。因为我们有距离和时间。 **速度 = 距离/时间** 但是获得两个位置点之间的距离并不是很容易。因为世界在形状上是一个目标，所以两个地理点之间的距离因地而异，因角度而异。所以我们必须使用 [“Haversine Algorithm”</a>](https://en.wikipedia.org/wiki/Haversine_formula)

[](https://en.wikipedia.org/wiki/Haversine_formula)

[![在此处输入图像描述](../Images/3a3bcef9c07e7b1a75dad55fcd94a5ab.png)](https://i.stack.imgur.com/v4J1S.png)

首先，我们必须授予在 Manifest 文件中获取位置数据的权限

***制作图形用户界面*** [![在此处输入图像描述](../Images/dcb85909033bcaec163adf1f425db545.png)](https://i.stack.imgur.com/ZL4Fu.png)

[![在此处输入图像描述](../Images/b6967284a4a23d97e4425da0d5538b95.png)](https://i.stack.imgur.com/Xe2jG.png)

[![在此处输入图像描述](../Images/153e10951a8ff9356e89acab256fa9ef.png)](https://i.stack.imgur.com/NydJy.png)

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtCurrentSpeed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="000.0 miles/hour"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <CheckBox android:id="@+id/chkMetricUnits"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Use metric units?"/> 
```

***然后做一个接口来获取速度***

```
package com.isuru.speedometer;
import android.location.GpsStatus;
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;

public interface IBaseGpsListener extends LocationListener, GpsStatus.Listener {

      public void onLocationChanged(Location location);

      public void onProviderDisabled(String provider);

      public void onProviderEnabled(String provider);

      public void onStatusChanged(String provider, int status, Bundle extras);

      public void onGpsStatusChanged(int event);

} 
```

***使用 GPS 位置实现获取速度的逻辑***

```
import android.location.Location;

public class CLocation extends Location {

      private boolean bUseMetricUnits = false;

      public CLocation(Location location)
      {
            this(location, true);
      }

      public CLocation(Location location, boolean bUseMetricUnits) {
            // TODO Auto-generated constructor stub
            super(location);
            this.bUseMetricUnits = bUseMetricUnits;
      }

      public boolean getUseMetricUnits()
      {
            return this.bUseMetricUnits;
      }

      public void setUseMetricunits(boolean bUseMetricUntis)
      {
            this.bUseMetricUnits = bUseMetricUntis;
      }

      @Override
      public float distanceTo(Location dest) {
            // TODO Auto-generated method stub
            float nDistance = super.distanceTo(dest);
            if(!this.getUseMetricUnits())
            {
                  //Convert meters to feet
                  nDistance = nDistance * 3.28083989501312f;
            }
            return nDistance;
      }

      @Override
      public float getAccuracy() {
            // TODO Auto-generated method stub
            float nAccuracy = super.getAccuracy();
            if(!this.getUseMetricUnits())
            {
                  //Convert meters to feet
                  nAccuracy = nAccuracy * 3.28083989501312f;
            }
            return nAccuracy;
      }

      @Override
      public double getAltitude() {
            // TODO Auto-generated method stub
            double nAltitude = super.getAltitude();
            if(!this.getUseMetricUnits())
            {
                  //Convert meters to feet
                  nAltitude = nAltitude * 3.28083989501312d;
            }
            return nAltitude;
      }

      @Override
      public float getSpeed() {
            // TODO Auto-generated method stub
            float nSpeed = super.getSpeed() * 3.6f;
            if(!this.getUseMetricUnits())
            {
                  //Convert meters/second to miles/hour
                  nSpeed = nSpeed * 2.2369362920544f/3.6f;
            }
            return nSpeed;
      }

} 
```

***将逻辑结合到 GUI***

```
import java.util.Formatter;
import java.util.Locale;

import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.TextView;

public class MainActivity extends Activity implements IBaseGpsListener {

      @Override
      protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
            this.updateSpeed(null);

            CheckBox chkUseMetricUntis = (CheckBox) this.findViewById(R.id.chkMetricUnits);
            chkUseMetricUntis.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                  @Override
                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        // TODO Auto-generated method stub
                        MainActivity.this.updateSpeed(null);
                  }
            });
      }

      public void finish()
      {
            super.finish();
            System.exit(0);
      }

      private void updateSpeed(CLocation location) {
            // TODO Auto-generated method stub
            float nCurrentSpeed = 0;

            if(location != null)
            {
                  location.setUseMetricunits(this.useMetricUnits());
                  nCurrentSpeed = location.getSpeed();
            }

            Formatter fmt = new Formatter(new StringBuilder());
            fmt.format(Locale.US, "%5.1f", nCurrentSpeed);
            String strCurrentSpeed = fmt.toString();
            strCurrentSpeed = strCurrentSpeed.replace(' ', '0');

            String strUnits = "miles/hour";
            if(this.useMetricUnits())
            {
                  strUnits = "meters/second";
            }

            TextView txtCurrentSpeed = (TextView) this.findViewById(R.id.txtCurrentSpeed);
            txtCurrentSpeed.setText(strCurrentSpeed + " " + strUnits);
      }

      private boolean useMetricUnits() {
            // TODO Auto-generated method stub
            CheckBox chkUseMetricUnits = (CheckBox) this.findViewById(R.id.chkMetricUnits);
            return chkUseMetricUnits.isChecked();
      }

      @Override
      public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            if(location != null)
            {
                  CLocation myLocation = new CLocation(location, this.useMetricUnits());
                  this.updateSpeed(myLocation);
            }
      }

      @Override
      public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

      }

      @Override
      public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

      }

      @Override
      public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

      }

      @Override
      public void onGpsStatusChanged(int event) {
            // TODO Auto-generated method stub

      }

} 
```

**如果要将米/秒转换为 kmph-1，则需要将 3.6 中的米/秒答案相乘**

**kmph-1 的速度 = 3.6 *（ms-1 的速度）**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-09T15:43:41.370

```
public class MainActivity extends Activity implements LocationListener { 
```

`LocationListener`在 Activity 旁边添加工具

```
LocationManager lm =(LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        this.onLocationChanged(null); 
```

`LocationManager.GPS_PROVIDER, 0, 0,`第一个零代表您更新值`minTime`的第二个零。`minDistance`零意味着基本上是即时更新，这可能对电池寿命不利，因此您可能需要对其进行调整。

```
 @Override
    public void onLocationChanged(Location location) {

    if (location==null){
         // if you can't get speed because reasons :)
        yourTextView.setText("00 km/h");
    }
    else{
        //int speed=(int) ((location.getSpeed()) is the standard which returns meters per second. In this example i converted it to kilometers per hour

        int speed=(int) ((location.getSpeed()*3600)/1000);

        yourTextView.setText(speed+" km/h");
    }
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderDisabled(String provider) {

} 
```

不要忘记权限

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-30T07:24:37.863

我们可以使用 location.getSpeed();

```
 try {
                // Get the location manager
                double lat;
                double lon;
                double speed = 0;
                LocationManager locationManager = (LocationManager)
                        getActivity().getSystemService(LOCATION_SERVICE);
                Criteria criteria = new Criteria();
                String bestProvider = locationManager.getBestProvider(criteria, false);
                if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
                    // TODO: Consider calling
                    //    ActivityCompat#requestPermissions
                    // here to request the missing permissions, and then overriding
                    //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
                    //                                          int[] grantResults)
                    // to handle the case where the user grants the permission. See the documentation
                    // for ActivityCompat#requestPermissions for more details.
                    return;
                }
                Location location = locationManager.getLastKnownLocation(bestProvider);
                try {
                    lat = location.getLatitude();
                    lon = location.getLongitude();
                    speed =location.getSpeed();
                } catch (NullPointerException e) {
                    lat = -1.0;
                    lon = -1.0;
                }

                mTxt_lat.setText("" + lat);
                mTxt_speed.setText("" + speed);

            }catch (Exception ex){
                ex.printStackTrace();
            } 
```

# c# - 从 HTML Helper 调用 Javascript

> ID：15570543
> 
> 赞同：2
> 
> 时间：2013-03-22T12:38:26.187
> 
> 标签：c#, javascript, asp.net-mvc, html-helper

我编写了一个自定义 HTMLHelper 来输出一些 javascript。javascript 正在添加到页面中，但在页面加载时并未运行。如果我将生成的 JS 复制/粘贴到 Chrome 的控制台窗口中，则该脚本可以完美运行。我想做的事可能吗？

```
public static HtmlString CreatePieChart(this HtmlHelper helper, string divId, int width, Collection<PieChartSeriesItem> series)
    {            
        if (width < 1)
        {
            throw new System.ArgumentException("Width of pie chart must be greater than zero");
        }

        StringBuilder htmlString = new StringBuilder();
        htmlString.Append("<script type=\"type/javascript\">");
        htmlString.Append("$(window).load(\"#");
        htmlString.Append(divId);
        htmlString.Append("\").kendoChart({");
        htmlString.Append("title: { visible: false },");
        htmlString.Append("chartArea: { background: \"transparent\", width: ");
        htmlString.Append(width.ToString(CultureInfo.InvariantCulture));
        htmlString.Append(" },");
        htmlString.Append("legend: { visible: false },");
        htmlString.Append("seriesDefaults: { labels: { visible: false } },");
        htmlString.Append("series: [{");
        htmlString.Append("type: \"pie\",");
        htmlString.Append("padding: 0,");
        htmlString.Append("overlay: { gradient: \"none\"},");
        htmlString.Append("data: [");

        htmlString.Append(CreatePieChartDataSeriesString(series));

        htmlString.Append("]");
        htmlString.Append("}],");
        htmlString.Append("tooltip: { visible: true, template: \"#= category # (#= value #%)\"}");
        htmlString.Append("});");
        htmlString.Append("</script>");

        return new HtmlString(htmlString.ToString());
    } 
```

这是页面中的调用

```
<div id="piechart">
    @Html.Partial("_PieChart", Model.BalancePieChartData)
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T03:20:28.967

我已经尝试过了，它工作正常。

```
public static MvcHtmlString Test(this HtmlHelper htmlHelper)
    {
        StringBuilder htmlString = new StringBuilder();
        htmlString.Append("<script type=\"text/javascript\">");
        htmlString.Append("alert(1)");
        htmlString.Append("</script>");
        return new MvcHtmlString(htmlString.ToString());
    } 
```

我把它放在我的身体上，就像这样：

```
@Html.Test() 
```

我的浏览器工作正常警报 1。

所以我想也许你只是把这行写错了

```
htmlString.Append("<script type=\"type/javascript\">"); 
```

它应该是“文本/javascript”

# java - 代理控制器看不到代理

> ID：15570545
> 
> 赞同：0
> 
> 时间：2013-03-22T12:38:29.203
> 
> 标签：java, eclipse, eclipse-tptp

我已经设置了 linux 代理控制器，它似乎工作。我可以从 Eclipse 连接到它。但是，即使我启动要分析的 jvm，代理列表也是空的。

```
JAVA_OPTS="-agentpath:/<path_to_agent>/agntctrl.linux_em64t-TPTP-4.7.2/plugins/org.eclipse.tptp.javaprofiler/libJPIBootLoader.so=JPIAgent:server=standalone,filters=/<path_to_filters>/classFilter.txt;CGProf $JAVA_OPTS" 
```

这是代理设置。Jvm 启动成功，但是当我在 Eclipse 的代理屏幕中单击刷新时，它是空的。

![在此处输入图像描述](../Images/e1e6fd8043fe16acdf048d2e3a53f8b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:32:51.740

我将服务器类型从`standalone`to更改为`enabled`有效！

# cakephp - $useTable = false 的 CakePHP 模型仍然尝试连接到数据库

> ID：15570549
> 
> 赞同：2
> 
> 时间：2013-03-22T12:38:32.460
> 
> 标签：cakephp, cakephp-2.1

我正在尝试开发一个不使用数据库的应用程序，但它仍然有一些模型。

第一个问题：Cake 查找数据库的配置（APP/Lib/Cake/Model/ConnectionManager.php，第 69 行），它试图包含文件 Config/database.php。

如果该文件不存在，我会收到 2 个警告。如果它存在（即使它完全是空的）一切正常。我想澄清一下，即使在没有模型的情况下也会发生这种情况。

第二个问题：如果我尝试使用模型，我会收到错误：

```
Missing Datasource Configuration
Error: The datasource configuration default was not found in database.php. 
```

无论 Config/database.php 文件是否存在，无论该文件是否存在，都会发生这种情况。

最后，我指定模型（包括 AppModel）将属性 $useTable 设置为 false，但似乎没有区别。

但我注意到，在使用数据库的应用程序中，只有少数模型不使用它（但整个应用程序使用它），一切正常。

我发现[这个](http://bakery.cakephp.org/articles/Primordial/2012/01/19/cakephp_v2_without_a_database_fixed)提出了一个解决方案，然后是在网络上找到的解决方案。

但在下面，在评论中，我读到洛伦佐说：

> 这根本没有任何意义，CakePHP 2.0 不会尝试执行任何数据库连接，除非您请求它这样做

在我看来，它没有，也许 CakePHP 不执行任何查询但仍希望配置数据库。是这样吗？还是我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:21:49.457

### 可能的原因

然而，CakePHP 在实际需要之前不会尝试连接到数据库。

*   app/Config/database.php 文件应该**始终**存在，即使您没有使用数据库。但是，如果您不使用它们，则不必“配置”各种连接
*   如果您的模型使用行为，则数据库调用可能是由行为进行的，导致 CakePHP 尝试连接到数据库
*   Model 类中的各种方法将连接到数据库（例如请求“schema”或“columnType”。
*   不存在的模型方法将被映射到一个魔术`__call()`方法；此方法将首先检查 Behavior 是否能够处理调用，否则将调用数据库。例如 using`$this->Mymodel->doSomething()`将导致 CakePHP 尝试打开数据库连接并`doSomething`在数据库中执行。
*   如果模型不存在，**CakePHP 将创建一个，基本上，它*****使用数据库中的模式信息***创建一个实例`Model`，从而打开一个连接。

 **例子*

```
class PostsController extends AppController {
    // This controller does not use a Model
    public $uses = false;

    public function index() {
        // CakePHP will construct a 'Post' model here
        $this->Post->find('something');
    }

} 
```

### 数据源，即使没有使用*数据库*

话说回来。在大多数情况下，最好让您的模型使用数据源；数据源不必*是*数据库，但也可以是例如 a[`Twitter Feed`](https://github.com/alairock/SimpleTwitter)或 static [`Array()`](https://github.com/cakephp/datasources/blob/master/models/datasources/array_source.php)。

拥有数据源可以简化大多数任务（例如，您可以只执行`find(....)`从源获取数据，无论它是否是数据库。*

# c - C 中的词法和语义错误

> ID：15570553
> 
> 赞同：0
> 
> 时间：2013-03-22T12:38:37.973
> 
> 标签：c, compiler-construction

最近我不得不给出 C 中的词法和语义错误的例子。我提供了以下例子。

我认为以下是词汇错误，

```
int a#; 
```

对于语义错误，我给出了以下示例，

```
int a[10];
a=100; 
```

但是现在我有点困惑是否两者实际上都是语法错误。请给我一些关于这些错误的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:43:01.560

首先，错误的分类（如词汇、句法、语义、语用）在细节上是任意的。

如果您将词法错误定义为词法分析器检测到的错误[，](http://en.wikipedia.org/wiki/Lexical_analysis)那么格式错误的数字可能是 1，例如`12q4z5`。或带有禁止字符的名称，例如`$`

您可以将语法错误定义为在[解析](http://en.wikipedia.org/wiki/Syntax_%28programming_languages%29)时检测到的错误。然而，C 并不是*严格意义*上的[上下文无关语言](http://en.wikipedia.org/wiki/Context-free_language)，它的解析器保留上下文信息（例如在符号表中）。

由于所有`a` `#`和`;`都是有效的词位，因此您`a#;`不是词法错误。

^(实际上`#`主要是在预处理时有用，解析的实际上是预处理的形式，而不是用户给定的源代码！)

许多语义错误与[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)的概念有关，例如`printf("%d")`缺少整数参数。或超出范围的访问，在您的情况下`printf("%d\n", a[1234]);`

一些（但不是全部）语义或语用错误可以通过[静态分析工具](http://en.wikipedia.org/wiki/Static_analysis_tool)找到。您甚至可以说现代编译器（启用所有警告时）会做一些事情。您的示例`a=100;`是[键入](http://en.wikipedia.org/wiki/Type_system)错误（可以任意称为语法，因为*C*编译器在解析时发现它，并且作为语义，因为与不是上下文无关属性的类型相关）。而且您拥有更专业的静态分析工具，例如[Frama-C](http://frama-c.com/)，您可以*扩展*或*自定义*GCC 编译器（例如，使用[MELT](http://gcc-melt.org/)，一种特定于域的语言）来添加您的编译器（例如，在[TALPO](http://gitorious.org/talpo/talpo)中）。

一个务实的错误可能是声明一个巨大的局部变量，就像[这里](https://stackoverflow.com/q/15165635/841108)。可能，当 1Tbyte RAM 内存很普遍时，堆栈会有很多 GB，所以这个例子可以运行，但不是今天。

# asp.net-mvc - ASP.NET MVC 子操作 - 堆栈不足，无法继续安全地执行程序

> ID：15570557
> 
> 赞同：1
> 
> 时间：2013-03-22T12:38:47.930
> 
> 标签：asp.net-mvc

几天前，我们开始在 ASP.NET MVC 应用程序的 Elmah 错误日志中收到以下错误：

> 堆栈不足，无法继续安全地执行程序。这可能是由于调用堆栈上有太多函数或堆栈上的函数使用了太多堆栈空间。

有问题的应用程序是在网络场中的 2 个 Windows Server 2012 服务器上运行的多租户 Web 应用程序。该错误在任一服务器上定期发生（每小时 1 或 2 次），但始终在相同的租户 URL 上。我们已经使用相同的设置（主题等）设置了另一个租户，但无法复制错误。它从未在开发中发生过。

异常和堆栈跟踪表明正在执行某种递归函数。在堆栈跟踪的开头：

> System.Web.HttpException (0x80004005)：执行处理程序“System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper”的子请求时出错。---> System.Web.HttpException (0x80004005)：执行处理程序“System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper”的子请求时出错。--->

**在我们到达调用堆栈中的下一项之前，这会重复 85 次。**

然后我们有以下内容：

```
 at System.Runtime.CompilerServices.RuntimeHelpers.EnsureSufficientExecutionStack()
   at System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag)
   at System.Web.Mvc.Controller.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag)
   at System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.Wrap[TResult](Func`1 func)
   at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride)
   at System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage)
   at System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm)
   at System.Web.Mvc.Html.ChildActionExtensions.ActionHelper(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues, TextWriter textWriter)
   at System.Web.Mvc.Html.ChildActionExtensions.Action(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues)
   at ASP._Page_Themes_Clik_Views_Shared__Layout_cshtml.Execute() in c:\MySite\wwwroot\Themes\Clik\Views\Shared\_Layout.cshtml:line 15
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body)
   at System.Web.WebPages.WebPageBase.PopContext()
   at StackExchange.Profiling.MVCHelpers.ProfilingViewEngine.WrappedView.Render(ViewContext viewContext, TextWriter writer)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
   at System.Web.Mvc.Controller.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.<>c__DisplayClass4.<Wrap>b__3()
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.Wrap[TResult](Func`1 func)
   at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride)
   at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride)
   at System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage)
   at System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm)
   at System.Web.Mvc.Html.ChildActionExtensions.ActionHelper(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues, TextWriter textWriter)
   at System.Web.Mvc.Html.ChildActionExtensions.Action(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues)
   at ASP._Page_Themes_Clik_Views_Shared__Layout_cshtml.Execute() in c:\MySite\wwwroot\Themes\Clik\Views\Shared\_Layout.cshtml:line 15 
```

堆栈跟踪来自：

> 在 c:\MySite\wwwroot\Themes\Clik\Views\Shared_Layout.cshtml 中的 ASP._Page_Themes_Clik_Views_Shared__Layout_cshtml.Execute()：
> System.Web.WebPages.WebPageBase.ExecutePageHierarchy() 中 System.Web.Mvc.WebViewPage.ExecutePageHierarchy 的第 15 行()

类似地重复 85 次，就好像视图正在递归执行自身一样。

它指向的代码行是调用`Html.Action`：

```
public MvcHtmlString Menu(string name, string overrideView = null)
{
    Ensure.Argument.NotNullOrEmpty(name, "name");
    return html.Action("_details", "menus", new { name = name, viewName = overrideView });
} 
```

这是所有其他租户和主题用于显示站点导航菜单的相同代码。`MenusController`：

```
[HttpGet]
public async Task<ActionResult> Details(string name)
{
    var menu = await menusClient.GetMenuByName(
        siteId: siteContext.SiteId,
        name: name
    )
    .ConfigureAwait(false);

    if (menu == null)
    {
        return HttpNotFound();
    }

    var model = Mapper.Map<MenuDetailsModel>(menu);
    model.SetCurrentMenuItem(Request.Url);           
    return View("Details", model);
}

#region Widget 

[HttpGet, ChildActionOnly]
public ActionResult _Details(string name)
{
    return Details(name).Result; // this is converted to a partial view result by an action filter
} 
```

由于 ASP.NET MVC 不支持异步子操作，我们必须在`_Details`. 请注意，我们有一个操作过滤器负责将 ViewResult 从`Details`转换为`PartialViewResult`.

正如我所说，这段代码在开发和生产中都能正常工作（几乎一直）。我试过在里面抛出异常，`MenusController`但我仍然无法复制异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T05:12:48.817

尝试这个：

```
public static MvcHtmlString Menu(this HtmlHelper helper, string name, string overrideView = null)
{
    var url = new UrlHelper(htmlHelper.ViewContext.RequestContext);
    Ensure.Argument.NotNullOrEmpty(name, "name");
    return url.Action("_details", "menus", new { name = name, viewName = overrideView });
} 
```

# html - 敲除计算函数

> ID：15570558
> 
> 赞同：1
> 
> 时间：2013-03-22T12:38:48.647
> 
> 标签：html, knockout.js

我正在使用 knockout.js。

**这是我的场景：**

我有一个输入字段和三个复选框。每个复选框都有一个关联的值。例如，checkbox1(500)、checkbox2(200)、checkbox3(100)。当用户单击复选框时，我希望该复选框的值出现在输入字段中。如果用户单击两个复选框，我希望两个复选框的值的总和出现在输入字段上。当所有三个复选框都被选中时，同样适用。

**我对这个问题的看法**

我认为我需要一个计算函数，该函数将根据选中的复选框计算值。然后，我可以将计算函数绑定到我的输入字段。

在我的视图模型中，我有这个计算函数：

```
var classes = ko.computed(function() { 
    var total = 0; 
    if(primaryClass.checked)
    total+= parseInt(primSalary()); 

    if(secondaryClass.checked)
    total+= parseInt(secSalary());    

    if(otherClass.checked)    
    total+= parseInt(otherSalary());

    return total;    
 }); 
```

在我看来，我像这样绑定我的价值观：

```
<input type="text" class="input-medium" placeholder="0" data-bind="text: classes"/> 
```

**但是，当我这样做时，控制台会抛出此消息：**

“无法解析绑定。↵消息：ReferenceError：未定义类；↵绑定值：值：类”

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:54:26.670

如果不查看所有代码，很难说出哪里出了问题，但在我看来，您没有添加`classes computed`到视图模型或没有调用`applyBindings`. 此外，最好以另一种方式实现这种行为。您可以将已检查的绑定绑定到`observableArray`，在这种情况下，您的计算结果会更好：

```
<input data-bind="checked: selectedValues" type="checkbox" value="500">500</input>
<input data-bind="checked: selectedValues" type="checkbox" value="200">200</input>
<input data-bind="checked: selectedValues" type="checkbox" value="100">100</input>

<br/>
Result:
<input data-bind="value: sum" type="text"></input>

function ViewModel() {
    var self = this;

    self.selectedValues = ko.observableArray([]);

    self.sum = ko.computed(function () {
            var total = 0;
            ko.utils.arrayForEach(self.selectedValues(), function (item) {
                total += parseInt(item);
            });
            return total;
        });

    }

ko.applyBindings(new ViewModel()); 
```

这是工作小提琴：http: [//jsfiddle.net/uFQdq/](http://jsfiddle.net/uFQdq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:57:24.820

您需要将`classes`功能分配给 ViewModel：

```
function ViewModel() {
    var self = this;

    self.classes = ko.computed(function () {
        // your function
    });
} 
```

# python - 删除字符串中的某些连续重复项？

> ID：15570560
> 
> 赞同：3
> 
> 时间：2013-03-22T12:39:08.000
> 
> 标签：python

我想定义一个函数，该函数接受一个字符串和该字符串中的一个字母，并输出一个新字符串，该字母出现一次。例如

```
my_function("happy kitten","p")
'hapy kitten' 
```

或者

```
my_function("happykitten","t") 
'happykiten' 
```

我试过了

```
def my_function(string, lett):
newString = ""
for char in string: #all characters
    for s in string: #character I'm testing
        if s == len(s) > 1: 
            newString+=lett # if there are multiple occurrences of s, replace with lett since its a single char anyway
        else:
            newString+=char #if not a duplicate, add next char to newString
    return newString #("happy kitten","p") returns 'ppppppppppp' 
```

和

```
def my_function(string, lett):
newString = ""
for char in string: #all characters
    for s in string: #character I'm testing
        if s == s+1: 
            newString+=lett # if there are multiple occurrences of s, replace with lett since its a single char anyway
        else:
            newString+=char #if not a duplicate, add next char to newString
    return newString #TypeError: cannot concatenate 'str' and 'int' objects 
```

我的功能出了什么问题？请不要导入或内置函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:08:11.027

好吧，如果您对导入/内置函数改变主意，您可以随时这样做：

```
from itertools import groupby

def my_function(s, c):
    return ''.join(c if a==c else ''.join(b) for a,b in groupby(s)) 
```

* * *

```
>>> from itertools import groupby
>>> def my_function(s, c):
...     return ''.join(c if a==c else ''.join(b) for a,b in groupby(s))
... 
>>> my_function("happy kitten","p")
'hapy kitten'
>>> my_function("happykitten","t")
'happykiten' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:56:49.347

对字符进行迭代是低效的，而且很可能是错误的做法。听起来真的很像新生课程的家庭作业。在现实生活中，您应该研究正则表达式，[这个问题](https://stackoverflow.com/questions/4574509/python-remove-duplicate-chars-using-regex)似乎提供了一个优雅的答案。

您的问题是您假设 s+1 指向迭代器中的下一个值，这不是一个有效的假设。您需要做的是记录目击并在下一次迭代中采取相应的行动。

我们仍然可以在实践中解决这个问题：

```
def strip_duplicate_letters(input, letter):
  output = ''
  last = False

  for c in input:
    if c == letter:
      if last:
        continue
      else:
        last = True
    else:
      last = False
    output += c

  return output 
```

这是一件非常基本的事情，您必须彻底考虑以确保您理解。然后忘记示例并复制自己。

另一种方法是枚举字母以使索引号可用：

```
for i, c in enumerate(input):
  if i > 0 and c == letter and input[i-1] == letter:
    continue
  output += c 
```

如果`enumerate`问题太大，您可以使用整数作为计数器并增加它。

```
i = 0
for c in input:
  ....
  i += 1
  ... 
```

# perl - 定期在 CSV 文件中添加行

> ID：15570562
> 
> 赞同：1
> 
> 时间：2013-03-22T12:39:20.597
> 
> 标签：perl, dbi

![在此处输入图像描述](../Images/0cc6f3f317b47c5b2c6901525cf12bde.png)

**概述：** 1\. 在 Perl 中，我使用 Spreadsheet::WriteExcel 写入 Excel 创建的 CSV 文件。
2\. 要输入 CSV 文件的数据是由 Mysql 查询生成的。

**发生了什么：** 1\. 正在生成 CSV。2\. 只处理一行数据。

**需要什么：** 1\. 以行的形式定期添加数据，比如每 30 秒。因此，它将每天创建一个巨大的 CSV 文件。这意味着将在 24 小时内添加 2880 行。

代码如下：

```
use strict;
use warnings;
use DBI;
use Spreadsheet::WriteExcel;

# DEFINING THE DATE 
 ($sec,$min,$hour,$mday,$mon,$year) =localtime(time);
undef $sec;
undef $hour;
undef $min;
$year += 1900;
$mday;
$mon+=1;
if ($mon < 10) {
        $mon = "0".$mon;
    }
if ($mday < 10) {
        $mday = "0".$mday;
    }

# CREATION OF A NEW WORKBOOK AND ADDITION OF A WORKSHEET
$tdate = sprintf("%04d%02d%02d", $year, $mon, $mday);
$SubsLogFile = "Subscription-".$tdate;
$SubsLogFile .= ".csv";

my $workbook  = Spreadsheet::WriteExcel->new($SubsLogFile);
my $worksheet = $workbook->add_worksheet();

#=============================================

# FORMAT FOR THE HEADER
my $format = $workbook->add_format();
$format->set_bold();
$format->set_color('red');
$format->set_align('center');

# CREATION OF THE HEADER   
$worksheet->write(0, 0, "Sub Day", $format);
$worksheet->write(0, 1, "Sub Hour", $format);

#=============================================

###################
## SUBSCRIPTIONS ##
###################

# INPUTTING THE SERVER DETAILS
$db ="abcd";
$user = " abcd ";
$pass = " abcd ";
$host="100.100.100.100";
my $col = 2;

# GENERATING THE SQL QUERIES
$query1 = "SELECT COUNT(*) FROM subscription_detail WHERE creation_date >=CURRENT_DATE();";
 $query2 = "SELECT COUNT(*) FROM subscription_detail WHERE     DATE_FORMAT(creation_date,'%Y-%m-%d %H')  >= DATE_FORMAT(NOW(),'%Y-    %m-%d %H');"; 

# CONNECTING TO THE SERVER
    $dbh = DBI->connect("DBI:mysql:$db:$host", $user, $pass,{
      PrintError => 0,
      RaiseError => 0
  } ) or die "Can't connect to the database: $DBI::errstr\n";

$sqlQuery1  = $dbh->prepare($query1) or die "Can't prepare $query1: $DBI::errstr\n";
$sqlQuery2  = $dbh->prepare($query2) or die "Can't prepare $query2: $DBI::errstr\n"; 

# EXECUTING THE QUERIES
my $rv = $sqlQuery1->execute or die "can't execute the query: $DBI::errstr\n";
my $rv = $sqlQuery2->execute or die "can't execute the query: $DBI::errstr\n";

#=============================================

# OUTPUTING THE VALUES

while (@row= $sqlQuery1->fetchrow_array()) {
my $data1 = $row[0];
$worksheet->write($col, 0, "$data1");
};

while (@row= $sqlQuery2->fetchrow_array()) {
my $data2 = $row[0];
$worksheet->write($col, 1, "$data2");
};

# Close Workbook
$workbook->close(); 
```

#

检查了整个互联网，但没有解决方案或提示。我已经尝试了很多东西，比如 sleep 30, counters tec，但它没有帮助。

感谢任何形式的帮助.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:00:41.050

我对你的问题有点困惑。有几个原因。

您是在尝试创建 CSV 文件还是 XLS 文件？如果它是 CSV 文件，那么为什么要使用 Spreadsheet::WriteExcel （它会创建 XLS 文件）。如果它是一个 XLS 文件，那你为什么称它为“.csv”？

您似乎有两个 SQL 查询，`$sqlQuery1`它们`$sqlQuery2`的作用几乎相同。

您的调用`Spreadsheet::WriteExcel::write`似乎交换了行和列参数。

看起来您的代码在`use strict`打开时无法编译，但是您有许多未声明的变量（`$sec`, `$min`, `$hour`, `$mday`,`$mon`等等`$year`）。这让我觉得我们实际上并没有看到您正在运行的代码 - 这是一个问题，因为问题很可能出在您没有向我们展示的代码中。

您是否尝试过诸如将调试输出放入从数据库中获取数据的行之类的基本操作？因此，您可以确定正在返回数据吗？您是否尝试过手动在数据库上运行 SQL 查询以确保它们按预期工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:37:21.403

我必须同意 Dave，使用与 Excel 交互的 Perl 模块来编辑 CSV 的简单文本格式的文件就像在炎热的一天，而不是使用风扇来创造微风，建造过山车并连续骑行.

如果 Text::CSV 的界面让人望而生畏，我可以推荐我的[Tie::Array::CSV](http://metacpan.org/module/Tie%3a%3aArray%3a%3aCSV)还是有许多其他模块可以为您构建 CSV 而不那么麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:01:13.157

这不是简单地将新行添加到现有 Excel 文件中的方法，而是：

1.  您可以使用**Win32::OLE**直接将数据添加到现有 Excel 文件中（但您需要安装 Excel）。

2.  或者您需要使用**Spreadsheet::ParseExcel***解析现有文件*，重命名它，然后使用**Spreadsheet::WriteExcel**创建新文件（带有新行）。

# ios - 在目标 c 中使用 POST

> ID：15570565
> 
> 赞同：0
> 
> 时间：2013-03-22T12:39:28.373
> 
> 标签：ios, objective-c, json, post, webserver

我在实际使用 POST 来保存/更改数据库上的信息时遇到了麻烦。有人可以帮我吗？

```
NSDictionary *newDatasetInfo = [NSDictionary dictionaryWithObjectsAndKeys:un, @"username", n, @"name", pn, @"phonenumber",em, @"email", nil];

NSError *error;

NSData* jsonData = [NSJSONSerialization dataWithJSONObject:newDatasetInfo options:kNilOptions error:&error];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setHTTPBody:jsonData];

// print json:
NSLog(@"JSON summary: %@", [[NSString alloc] initWithData:jsonData
                                                 encoding:NSUTF8StringEncoding]);
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection start]; 
```

上面的代码来自应用程序，我的服务器端代码如下所示：另外请不要认为此代码位于 php 文件中

```
if(!isset($_GET["username"]))
{
    // adding new record
    $q = sprintf("insert into users (username, name, phoneNumber, email) values ('%s','%s', '%s', '%s')",
        mysql_real_escape_string($_GET["username"]),
        mysql_real_escape_string($_GET["name"]),
        mysql_real_escape_string($_GET["phone"]),
        mysql_real_escape_string($_GET["email"]));
}
else
{
    // update the  record
    $q = sprintf("update users set name = '%s', phoneNumber = '%s', email = '%s' where username = '%s'",
        mysql_real_escape_string($_GET["name"]),
        mysql_real_escape_string($_GET["phoneNumber"]),
        mysql_real_escape_string($_GET["email"]),
        mysql_real_escape_string($_GET["username"]));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:00:25.460

您是否在 PHP 代码中解码了 JSON 对象？

或者

尝试如下设置

```
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 
```

而且我不确定您是否需要关注

```
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:09:16.577

也许不是最理想的方式，但我可以提出一个可行的方式；

在 iOS 端；

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:user 
                                                       options:kNilOptions
                                                         error:&error];
    if (!jsonData) {
        NSLog(@"Error:%@",error);
    }
    else {
        jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
    }

    NSString * params = [[NSString alloc] initWithFormat:@"user=%@",jsonString];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:kLinkUpdateFacebook]];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]]; // and send the request 
```

在php方面；

```
<?
    $json_user = json_decode($_POST["user"],true);

    echo $json_user["name"];
?> 
```

# mysql - 查询连接以返回两个值，即使查询语句只存在一个值

> ID：15570566
> 
> 赞同：0
> 
> 时间：2013-03-22T12:39:28.500
> 
> 标签：mysql, join, exists

我正在查询数据库，我需要它来返回所有值。我正在加入两个表**storage_path**和**users**第一个用户存在于第一个表中，第二个表中存在 user_id 字段。表 storage_path 中不存在第二个用户，但我需要该用户也通过查询返回！

我怎样才能做到这一点？

这是为了更清楚的查询...

此查询在 while 循环切换 user_id 变量中

```
$item_id = $row['user_id']; 

$sql = "SELECT MAX(sf.file_id) as file_id, sf.storage_path as image, u.photo_id 
FROM engine4_users u 
LEFT JOIN engine4_storage_files sf
    ON sf.user_id = u.user_id 
WHERE sf.type = 'thumb.icon' AND u.user_id = $item_id"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:50:24.873

查询中的问题似乎与您使用了 MAX 选择字段但未提供 GROUP BY 字段这一事实有关。

试试这个：

```
$sql = "SELECT MAX(sf.file_id) as file_id, sf.storage_path as image, u.photo_id 
FROM engine4_users u 
LEFT JOIN engine4_storage_files sf
    ON sf.user_id = u.user_id 
WHERE sf.type = 'thumb.icon' AND u.user_id = $item_id
GROUP BY u.user_id"; 
```

# python - 搜索文件并计数

> ID：15570568
> 
> 赞同：0
> 
> 时间：2013-03-22T12:39:31.293
> 
> 标签：python, file, list, counting

我有一个我打开的 txt 文档中的行列表。

```
list = ['hello there','how are you','im good thanks'] 
```

我想搜索这个列表，看看里面是否出现了“你好”这个词，然后计算它出现在那里的次数。除此之外，我已将文本文件打开到列表中，然后用空格将其拆分，例如

```
list = ['hello','there','how','are','you','im','good','thanks'] 
```

在尝试查看“你好”的列表并计算它之前，这会是一种更好的方法吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:42:00.267

编辑：添加`line.split()`以防奥赛罗在文档中。还`line.lower()`处理大写的“你好”

```
>>> lines = ['hello there','how are you','im good thanks']
>>> sum(line.lower().split().count('hello') for line in lines)
1 
```

您可以直接从文件中执行此操作，例如：

```
with open('file.txt') as f:
    sum(line.lower().split().count('hello') for line in f) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:43:44.220

用你的第二种方法，你可以去

```
list.count("hello") 
```

# javascript - 更新数组时AngularJS不刷新ngRepeat

> ID：15570570
> 
> 赞同：31
> 
> 时间：2013-03-22T12:39:37.113
> 
> 标签：javascript, angularjs, angularjs-ng-repeat

有时我在理解 AngularJS 时遇到了严重的问题。所以我的控制器中有一个基本数组，比如

```
$scope.items = ["a","b","c"] 
```

我在我的模板中对项目数组 ng-repeat="item in items" 进行 ngRepeating。到目前为止超级简单。在进行了几次 UX 操作之后，我想将一些新内容推送到我的阵列中。

```
 $scope.items.push("something"); 
```

因此，50% 的时间，新元素被添加到视图中。但剩下的 50%，什么都没有发生。这就像超级令人沮丧；bc 如果我将其包装在 $scope.$apply() 中，我会收到“$digest already in progress”错误。将其包装到 $timeout 也无济于事。

当我使用 Chrome 扩展检查我的元素范围时；我可以看到新数据在那里并且 $scope.items 值是正确的。但是视图只是没有考虑将其添加到 DOM 中。

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T13:15:30.247

`$digest`您正在50% 的时间在 angular 周期之外修改范围。

如果有一个不是来自 angularjs 的回调；（可能是jQuery）。您需要调用`$apply`强制`$digest`循环。但是您不能`$apply`在`$digest`循环中调用，因为您所做的每一个更改都将自动反映。

您需要知道回调何时不是来自角度的，并且应该`$apply`只在那时调用。

如果您不知道并且无法学习，这里有一个巧妙的技巧：

```
var applyFn = function () {
    $scope.someProp = "123";
};
if ($scope.$$phase) { // most of the time it is "$digest"
    applyFn();
} else {
    $scope.$apply(applyFn);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-22T06:32:37.340

正如 Umur Kontacı 所指出的，您有时会在摘要周期之外进行模型更改。但是，与其解决这个问题并尝试检测您是否处于应用/摘要上下文中，我建议您确保这永远不会发生。

此问题的主要原因是您的函数被调用为对 DOM 事件的反应。例如

```
jQuery('.some-element').click(function() { seeminglyProblematicCode() }) 
```

这是您的 $apply() 需要去的地方，而不是在函数内。否则，你的整个代码迟早会被这样的区别所占据。假设在此事件处理程序的上下文中有一个范围，您可以编写：

```
jQuery('.some-element').click(function() { 
    $scope.$apply(function() { seeminglyProblematicCode() })
}) 
```

但是，您必须注意一个警告：当您从代码中触发点击事件时，您将遇到摘要循环已经在进行中的问题。这是你需要 $timeout 的地方。[这个问题](https://stackoverflow.com/questions/23070822/angular-scope-apply-vs-timeout-as-a-safe-apply)的答案很好地涵盖了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T20:21:26.593

我遇到了同样的问题，我的解决方法是观察嵌套指令中调用了哪些控制器。

```
# Parent Controller
app.controller 'storeController', ($scope, products) ->

  $scope.cart = ["chicken", "pizza"]
  $scope.addToCart = (item) ->
    $scope.cart.push item

  # from service
  products.get().then (items) ->
    $scope.products = items

# Parent Directives
app.directive 'storeContainer', ($scope, config) ->
  restrict: 'E'
  templatUrl: 'store-container.html'
  controller: 'storeController'

# Nested Directive
app.directive 'storeFront', ($scope, config) ->
  restrict: 'E'
  templatUrl: 'store-front.html'
  controller: 'storeController'

# Parent Template templates/directives/store-container.html
<div ng-repeat="item in cart">{{ item }}</div>
<strore-front></store-front>

# Nested Template templates/directives/store-front.html
<ul ng-repeat="item in products">
  <li ng-click"addToCart(item)">{{ item }}</li>
</ul> 
```

这里的错误是嵌套指令在原型链中创建了第二个控制器（storeController 的副本），父模板无权访问该控制器。要解决这样编写嵌套控制器的问题：

```
# Nested Directive
app.directive 'storeFront', ($scope, config) ->
  restrict: 'E'
  templatUrl: 'store-front.html' 
```

有更好的方法来创建继承链，但这将解决许多学习 AngularJS 的人的问题。

# winapi - 在自己的上下文菜单中显示“打开方式”上下文菜单

> ID：15570571
> 
> 赞同：2
> 
> 时间：2013-03-22T12:39:41.027
> 
> 标签：winapi, explorer, windows-shell, wofstream

我写了一个命名空间扩展（c++）。我现在要做的是复制 Windows 资源管理器的“打开方式”菜单。我已经使用 IContextMenu、IContextMenu2 和 IContextMenu3 实现了我的上下文菜单。我为一个虚拟文件构建了一个标准上下文菜单，并将打开方式子菜单放入我自己的菜单中。到目前为止，我所做的如下：

```
int AddStdOpenWithMenu(HMENU hmenu, UINT& indexMenu, UINT& idCmdFirst, UINT& idCmdLast, UINT uFlags, CItem* i){

int items = 0;

if(i != 0){

    CString filePath = i->GetTempFileDir();
    CString fileName = i->getFileName();

    if(PathFileExists(filePath)){

        if(filePath.Right(1).CompareNoCase(TEXT("\\")) != 0) filePath += TEXT("\\");
        filePath += fileName;

        // Dumm yerzeugen
        wofstream fStream;
        fStream.open(filePath, ios::out | ios::app);
        fStream.close();

        if(PathFileExists(filePath)){

            void* ppv = 0;
            HRESULT hr;
            LPITEMIDLIST pidl;
            SFGAOF sfgao;
            LPCITEMIDLIST pidlChild;

            hr = ::SHParseDisplayName(filePath, NULL, &pidl, 0, &sfgao);
            this->stdContextTmpDir = filePath;

            if(hr == S_OK){
                hr = SHBindToParent(pidl, IID_IShellFolder, (void**)&m_stdPSF, &pidlChild);
                if(hr == S_OK){    
                    hr = m_stdPSF->GetUIObjectOf(GetForegroundWindow(), 1, &pidlChild, IID_IContextMenu, NULL, &ppv);
                    if(hr == S_OK){

                        this->m_stdCTM = (IContextMenu*)ppv;

                        IContextMenu2* ctm2 = 0;
                        hr = this->m_stdCTM->QueryInterface(IID_IContextMenu2,(LPVOID*)&ctm2);   

                        if(hr == S_OK){

                            HMODULE g = GetModuleHandle(TEXT("shell32.dll"));

                            if(g != 0){
                                // "Öffnen mit" Schriftzug ermitteln
                                int maxBuffer = 1000;
                                LPTSTR pStr = new TCHAR[maxBuffer];
                                CString owStr1, owStr2;

                                int res = LoadString(g, 5376, pStr, maxBuffer);
                                if(res > 0) owStr1 = pStr;

                                res = LoadString(g, 5377, pStr, maxBuffer);
                                if(res > 0) owStr2 = pStr;

                                if(!owStr1.IsEmpty() || !owStr2.IsEmpty()){

                                    HMENU stdMenu = CreatePopupMenu();  

                                    int subIdCmdFirst = idCmdFirst + LASTMI + 1; // hier wird der maximale offset der Items addiert
                                    int ret = ctm2->QueryContextMenu(stdMenu, indexMenu, subIdCmdFirst, idCmdLast, uFlags);

                                    if(HRESULT_SEVERITY(ret) == SEVERITY_SUCCESS){

                                        int count = GetMenuItemCount(stdMenu);

                                        for(int i = 0; i < count; i++){

                                            res = GetMenuString(stdMenu, i, pStr, maxBuffer, MF_BYPOSITION);

                                            if(res > 0){

                                                if(_tcscmp(pStr, owStr1) == 0 || _tcscmp(pStr, owStr2) == 0){
                                                    //Öffnen mit Element gefunden

                                                    HMENU subMenu = GetSubMenu(stdMenu, i);                                                 

                                                    if(subMenu != 0){

                                                        hr = ctm2->HandleMenuMsg(WM_INITMENUPOPUP, (WPARAM)GetSubMenu(stdMenu,i) , i);

                                                        subMenu = GetSubMenu(stdMenu, i);

                                                        if(subMenu != 0){

                                                            MENUITEMINFO   mii;
                                                            TCHAR          szText[MAX_PATH];

                                                            ZeroMemory(&mii, sizeof(mii));
                                                            mii.cbSize = sizeof(mii);

                                                            _tcscpy(szText, pStr);
                                                            mii.fMask = MIIM_ID | MIIM_TYPE | MIIM_STATE | MIIM_SUBMENU ;
                                                            mii.wID = idCmdFirst + MI_OPENWITH;
                                                            mii.fType = MFT_STRING;
                                                            mii.dwTypeData = szText;
                                                            mii.fState = MFS_ENABLED;
                                                            mii.hSubMenu = subMenu;

                                                            InsertMenuItem( hmenu, indexMenu++, TRUE, &mii);

                                                            items = HRESULT_CODE(ret);

                                                        }
                                                    }else{

                                                        MENUITEMINFO stdMi;
                                                        stdMi.cbSize = sizeof(stdMi);
                                                        stdMi.fMask =  MIIM_ID | MIIM_STATE;
                                                        stdMi.dwTypeData = 0;
                                                        GetMenuItemInfo(stdMenu, i, true, &stdMi);

                                                        MENUITEMINFO   mii;
                                                        TCHAR          szText[MAX_PATH];

                                                        ZeroMemory(&mii, sizeof(mii));
                                                        mii.cbSize = sizeof(mii);

                                                        _tcscpy(szText, pStr); 
                                                        mii.fMask = MIIM_ID | MIIM_TYPE | MIIM_STATE;
                                                        mii.wID = stdMi.wID;
                                                        mii.fType = MFT_STRING;
                                                        mii.dwTypeData = szText;
                                                        mii.fState = MFS_ENABLED;

                                                        InsertMenuItem( hmenu, indexMenu++, TRUE, &mii);

                                                        items = HRESULT_CODE(ret);

                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                delete[] pStr;
                            }
                            ctm2->Release();
                        }
                    }
                }
                ILFree(pidl);

            }
            DeleteFile(filePath);
        }
    }
}

return items;
} 
```

在handleMenuMsg 函数中，我将所有内容传递给标准界面，并且XP 正在毫无问题地绘制图标和文本。然后，在“InvokeCommand”中，我知道是否执行了我自己的命令，或者它是否来自标准上下文菜单。因此，假设您使用资源管理器打开一个 txt 文件，一切正常。问题是尽快

```
this->m_stdCMT->InvokeCommand(pici); 
```

执行并关闭资源管理器（Win7，x64），它不会再关闭进程。有人知道为什么吗？

亲切的问候，迈克尔

# tabs - 如何使用单个应用程序创建具有不同内容的多个选项卡？

> ID：15570573
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:39:42.637
> 
> 标签：tabs, facebook-page

如何使用单个应用程序创建具有不同内容的多个选项卡，例如 pagemode.com、wix.com。这是可能的，因为他们使用单个应用程序在具有不同内容的多个页面上创建多个选项卡。有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:06:47.487

我们可以为单个应用程序 ID 创建具有不同内容的多个选项卡，这可以通过解析签名的请求并获取页面 ID，然后重定向到我们希望在 Iframe 中显示的 URL 来实现。

# javascript - 显示两位小数的欧元结果

> ID：15570586
> 
> 赞同：0
> 
> 时间：2013-03-22T12:40:20.130
> 
> 标签：javascript

我是 JavaScript 新手，所以希望能在这个问题上提供帮助。

我有一个预订表格，我有 3 个欧元结果，这些结果会在做出选择后自动出现（@Martina 帮助我应对了这个挑战）。

我想做的是让结果只显示 2 位小数 - 这是我正在谈论的页面的链接： [https ://www.alpinemalta.net/oilandgaslibya/bookNow.html](https://www.alpinemalta.net/oilandgaslibya/bookNow.html)

我试过浏览这个论坛中的一些帖子并尝试了一些事情，但我对 JS 的新认识并没有帮助:(

再次提前感谢您对此的任何帮助。

干杯 - 克里斯布朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:49:39.150

Javascript 中的`Number`类有一个[`.toFixed`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)方法可以完全满足您的要求，例如：

```
var n = 234.1
var s = n.toFixed(2);  // s = "234.10" 
```

# android - 如何在 RoboSpice Android 中实现 socket.io 连接

> ID：15570595
> 
> 赞同：2
> 
> 时间：2013-03-22T12:40:55.243
> 
> 标签：android, socket.io, robospice

我正在使用 RoboSpice + Spring Android 在 Android 中开发聊天应用程序。如何在 RoboSpice 中集成 socket.io 连接？这样我就可以维护活动之间的套接字连接。

套接字io代码

```
 try {
        socket = new SocketIO("http://server.com");
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
         }
            socket.connect(new IOCallback() {
            @Override
            public void onMessage(JSONObject json, IOAcknowledge ack) {
                try {
                    System.out.println("Server said:" + json.toString(2));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onMessage(String data, IOAcknowledge ack) {
                System.out.println("Server said: " + data);
            }

            @Override
            public void onError(SocketIOException socketIOException) {
                System.out.println("an Error occured");
                socketIOException.printStackTrace();
            }

            @Override
            public void onDisconnect() {
                System.out.println("Connection terminated.");
            }

            @Override
            public void onConnect() {
                System.out.println("Connection established");
            }

            @Override
            public void on(String event, IOAcknowledge ack, Object... args) {
                System.out.println("Server triggered event '" + event + "'");
                System.out.println("Message : '" + args[0] + "'");
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:47:06.310

在 RoboSpice 中，网络在请求级别进行管理。因此，您的请求应该使用 socket io lib。

Socket IO 不作为 RoboSpice 的模块提供。在看到你的问题之前我什至不知道。使用 Socket IO 时，您对 RoboSpice 有什么期望？

# sql - 将 24 小时时间段插入数据库

> ID：15570596
> 
> 赞同：0
> 
> 时间：2013-03-22T12:40:57.500
> 
> 标签：sql

这更像是一个最佳实践问题，尽管我在 sql 上苦苦挣扎，但 2 是相关联的。我想将从早上 6 点开始的即将到来的 24 小时期间的日期和时间插入到 sql 数据库中。

我认为最好在下一天凌晨 1 点运行预定的 SQL 作业。这将创建一列和 24 行，例如 20/03/2013 06:00 到 21/03/2013 05:00。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:44:07.427

问题是日期时间函数。这是一个如何完成的示例（在 SQL Server 中）：

```
insert into t(thedatetime)
    select dateadd(hour, hrs.hr, cast(CAST(getdate() as DATE) as datetime))
    from (select 0 as hr union all select 1 union all select 2 union all select 3 union all
          select 4 union all select 5 union all select 6 union all select 7 union all
          select 8 union all select 9 union all select 10 union all select 11 union all
          select 12 union all select 13 union all select 14 union all select 15 union all
          select 16 union all select 17 union all select 18 union all select 19 union all
          select 20 union all select 21 union all select 22 union all select 23
         ) as hrs; 
```

在 Oracle 中，`select`可能是：

```
 select trunc(sysdate) + hrs.hr/24.0 
```

其他数据库也有类似的结构。

这是假设它在相关日期的午夜之后运行。对于第二天，您必须在当前日期上增加一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:46:39.590

这适用于 Postgres：

```
select timestamp '2013-03-30 06:00' + interval '1' hour * i
from generate_series(0,23) i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:09:13.907

这将适用于`ORACLE`

```
SELECT To_date('22-03-2013 '||(CASE WHEN (6+(LEVEL-1))>12 THEN (CASE WHEN LEVEL>19 THEN (LEVEL-12-7) ELSE (6+(LEVEL-1))-12 END) ELSE (6+(LEVEL-1)) END)||':00:00','DD-MM-YYYY HH:MI:SS') 
FROM dual CONNECT BY LEVEL<=24; 
```

# java - 使用 selenium 保存页面内容

> ID：15570598
> 
> 赞同：0
> 
> 时间：2013-03-22T12:41:08.330
> 
> 标签：java, selenium

我正在使用 selenium 在门户网站上收集数据。这里的问题是数据是 XML 格式，但 URL 扩展名不是 .xml，它显示为 .aspx，因为它是一个点网网站。现在使用 selenium 我可以通过使用获取页面源`driver.getPageSource()`

但它给了我 HTML 格式。在这里使用 HTML 分离 XML 真的很痛苦，我尝试了很多选项，例如 JSoup，但似乎有太多的解析要做。

有没有其他方法可以让 selenium 操作浏览器。我可以看到 File-Save as 让我可以选择以 xml 格式保存网页。如何在 selenium 中执行此操作？是否有任何其他 API 可以帮助我这里。

编辑：我的浏览器是 Internet Explorer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:54:14.717

你试过这样吗？

```
String pageSource=driver.findElement(By.tagName("body")).getText(); 
```

查看此**页面源**内容如果它仅提供 XML 内容，您可以使用文件操作将其写入文件。

# html - 如何在页面完全加载之前将对象/视频标签保留在 HTML 之外？

> ID：15570600
> 
> 赞同：0
> 
> 时间：2013-03-22T12:41:16.547
> 
> 标签：html

我制作了一个充满来自 youtube 和 vimeo 的嵌入视频的页面。而且加载时间太可怕了！它使我的笔记本电脑完全冻结，直到它们都被正确加载。

我在另一篇文章中看到，这样做的方法是将对象或视频标签保留在 HTML 之外，然后在页面加载后添加它。从那以后，我一直在尝试弄清楚如何做到这一点，但没有运气！

我还在其他网站上看到，他们在标签后面有一个加载 gif，直到视频完全播放。

关于如何做这些或其他方法的任何建议都会很棒！

**一些嵌入视频代码：**

```
<iframe src="http://player.vimeo.com/video/57564747" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:46:48.720

另一种方法是让您的页面充满各种视频的缩略图截图。当有人点击特定的屏幕截图图像时，激活一个显示该特定视频的弹出窗口。这减轻了加载时间的压力，您可以对给定页面中的许多视频执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:48:21.827

我建议仅按需加载它们。

将虚拟图片放在视频所在的位置。如果点击图片，通过jQuery或JS加载内容。

```
<div id='video-anchor'>
    <img id='dummy' src='http://b.vimeocdn.com/ts/403/127/403127670_960.jpg' alt='' />
</div>

$('#dummy').click(function() {
    $('#video-anchor').html(
         '<iframe src="http://player.vimeo.com/video/57564747" 
          width="500" 
          height="281" 
          frameborder="0" 
          webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
    ');
}); 
```

您可以获得 vimeo 使用的图像。它们被设置为`div.vimeo_holder`.

# fine-uploader - 给每个附件一个标题

> ID：15570603
> 
> 赞同：3
> 
> 时间：2013-03-22T12:41:29.120
> 
> 标签：fine-uploader

我正在寻找使用 Fineuploader 为每个上传的项目添加标题/名称。每个附件都会在其旁边显示一个文本框，以便用户可以在按“上传”之前输入标题/名称，[如下所示](http://i.stack.imgur.com/DOw9O.png)

我看过了，每个上传请求都会发送类似

```
fine.uploader.php?qquuid=f5ff0211-c004-4b1d-8ea7-228d49c4a694&qqtotalfilesize=54&qqfile=DrayTek.txt 
```

如果我可以让它添加'&title' - 我有PHP来处理fine.uploader.php上的任何'GETs'

```
$(document).ready(function() {
var manualuploader = new qq.FineUploader({
  element: $('#manual-fine-uploader')[0],
  request: {
    endpoint: 'fine.uploader.php?parent_type=<?php echo $parent_type; ?>&parent_id=<?php echo $parent_id; ?>&initial=<?php echo $initial; ?>&view=<?php echo $view; ?>&crm_user=<?php echo $crm_user; ?>'
  },
  autoUpload: false,
  text: {
    uploadButton: '<i class="icon-plus icon-white"></i> Add Attachments'
  }
});

$('#triggerUpload').click(function() {
  manualuploader.uploadStoredFiles();
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:46:32.563

看看`setParams`方法。这会将设置的参数添加到您的请求中。

试试这个：

```
$(document).ready(function() {
    var manualuploader = new qq.FineUploader({
        element: $('#manual-fine-uploader')[0],
        request: {
            endpoint: 'fine.uploader.php'
        },
        autoUpload: false,
        text: {
            uploadButton: '<i class="icon-plus icon-white"></i> Add Attachments'
        }
    });

    $('#triggerUpload').click(function() {

        manualuploader.setParams({
            parent_type: <?php echo $parent_type; ?>, // I am assuming that these are integer values that do not need quotes around them
            parent_id: <?php echo $parent_id; ?>,
            initial: <?php echo $initial; ?>,
            view: <?php echo $view; ?>,
            crm_user: <?php echo $crm_user; ?>
        });

        manualuploader.uploadStoredFiles();
}); 
```

# topshelf - 尝试安装 TopShelf 应用程序时，章鱼部署挂起

> ID：15570607
> 
> 赞同：4
> 
> 时间：2013-03-22T12:41:48.060
> 
> 标签：topshelf, octopus-deploy

我有一项使用 TopShelf 的服务。现在我想用 Octopusdeploy 安装该服务，但我无法让它工作。当我尝试启动服务时，触手似乎挂起。Deploy.ps1 看起来像：

```
$cmd = "$OctopusPackageDirectoryPath" + "\NameOfExe.exe"

& $cmd "stop"
& $cmd "uninstall"
& $cmd "install"
& $cmd "start" 
```

在 powershell 中执行该 powershell 脚本效果很好，但触手卡在最后一步。我可以在日志中看到该服务已停止、卸载和安装，但它在启动时挂起。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:42:09.500

我找到了我的问题的答案。我正在尝试设置一个运行quartz.net 的服务，似乎设置quartz 会导致基于一些奇怪的安全设置的问题。

# python - 为 c_ulong 重新实现 rshift 的 ctypes

> ID：15570610
> 
> 赞同：5
> 
> 时间：2013-03-22T12:41:49.687
> 
> 标签：python, operator-overloading, ctypes, bit-shift

我正在通过 ctypes 访问 C 库，但遇到以下问题：

我正在使用 ctypeslib 生成一个“包装器”（使用 ctypes 访问库的​​ ctypes 命令）。C 库包含在此步骤中转换为 python 函数的宏。（为了尽可能独立于库内部，我想在 python 中使用其中的一些宏。）

这些宏之一如下所示：

```
# using the ctypes types
myuint16_t = c_ushort
myuint32_t = c_ulong

def mymacro(x): return (myuint16_t)((myuint32_t)(x) >> 16) # macro 
```

我想通过以下方式（在函数内部）在单独的模块中使用生成的函数：

```
return wrapper.mymacro(valueToBeConverted) # valueToBeConverted is an int 
```

但是使用这条线我得到了以下错误：

```
....   
def mymacro(x): return (myuint16_t)((myuint32_t)(x) >> 16) # macro
TypeError: unsupported operand type(s) for >>: 'c_ulong' and 'int' 
```

（我知道转移 c_ulong 的常用方法是，`c_ulongvar.value >> x`但每次 C 库中发生更改时，我都必须修补生成的包装器。所以我尽量避免这种情况）。

好像`__rshift__`这里不能使用 c_ulong 的实现。

```
print c_ulong.__rshift__
# throws AttributeError: type object 'c_ulong' has no attribute '__rshift__' 
```

嗯，看起来很奇怪......所以我决定重新实现`__rshift__`c_ulong 的方法来让它工作：

```
from ctypes import *
from types import MethodType

def rshift(self, val):
    print self.value >> val

# create an unbound method which applies to all (even existing) instances
c_ulong.__rshift__ = MethodType(rshift, None, c_ulong)

a = c_ulong(1)
a >> 16 
```

但这并不能解决问题。我仍然收到错误消息：

```
a >> 16
TypeError: unsupported operand type(s) for >>: 'c_ulong' and 'int' 
```

该`__rshift__`方法是否可能仅用于同一类的两个实例？我尝试了以下方法：

```
def rshift(self, val):
    print self.value >> int(val.value)

a = c_ulong(1)
a >> c_ulong(16) 
```

它有效。但这也意味着我仍然需要修补生成的包装器。

所以：有人知道这里有什么诀窍吗？

**更新**：

@eryksun 的解决方案奏效了。我在用：

```
from ctypes import *
# from types import MethodType

def _rshift(self, other):
    if hasattr(other, 'value'):
        other = other.value
    return c_ulong(self.value >> other)

def _lshift(self, other):
    if hasattr(other, 'value'):
        other = other.value
    return c_ulong(self.value << other)

def _coerce(self, other):
    try:
        return self, self.__class__(other)
    except TypeError:
        return NotImplemented

# Add the functions to the type. A method is created when
# accessed as an attribute of an instance.
c_ulong.__lshift__ = _lshift
c_ulong.__rshift__ = _rshift
c_ulong.__coerce__ = _coerce 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:29:32.217

由于该`_ctypes._SimpleCData`类型没有标志，因此 2.x 子类被视为用于二进制操作`Py_TPFLAGS_CHECKTYPES`的旧式数字。有关调用方案和函数中的实现，`__coerce__`请参见[Objects/abstract.c](https://hg.python.org/cpython/file/v2.7.3/Objects/abstract.c#l900)`binary_op1`。

出于演示目的，可以在类型对象上切换此标志，您只需要定义（模糊地用很多`void *`）直到`tp_flags`字段。

## 破解`PyTypeObject`

```
from ctypes import *
import _ctypes

Py_TPFLAGS_CHECKTYPES = 1 << 4

class PyTypeObject(Structure):
    _fields_ = (('ob_refcnt', c_ssize_t),
                ('ob_type', c_void_p),
                ('ob_size', c_ssize_t),
                ('tp_name', c_char_p),
                ('tp_basicsize', c_ssize_t),
                ('tp_itemsize', c_ssize_t),
                ('tp_dealloc', c_void_p),
                ('tp_print', c_void_p),
                ('tp_getattr', c_void_p),
                ('tp_setattr', c_void_p),
                ('tp_compare', c_void_p),
                ('tp_repr', c_void_p),
                ('tp_as_number', c_void_p),
                ('tp_as_sequence', c_void_p),
                ('tp_as_mapping', c_void_p),
                ('tp_hash', c_void_p),
                ('tp_call', c_void_p),
                ('tp_str', c_void_p),
                ('tp_getattro', c_void_p),
                ('tp_setattro', c_void_p),
                ('tp_as_buffer', c_void_p),
                ('tp_flags', c_long)) 
```

接下来，创建一个`unsigned long`子类，并使用`from_address`工厂为其创建一个`PyTypeObject`。使用 built-in 获取地址`id`，这是特定于 CPython 的实现细节：

```
class c_ulong(_ctypes._SimpleCData):
    _type_ = "L"

    def __rshift__(self, other):
        print '__rshift__', self, other
        if hasattr(other, 'value'):
            other = other.value
        return c_ulong(self.value >> other)

c_ulong_type = PyTypeObject.from_address(id(c_ulong)) 
```

## 演示

```
>>> a = c_ulong(16)
>>> b = c_ulong(2)

>>> a >> b
__rshift__ c_ulong(16L) c_ulong(2L)
c_ulong(4L)

>>> a >> 2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for >>: 'c_ulong' and 'int' 
```

最后一步按预期失败。现在设置标志：

```
>>> c_ulong_type.tp_flags |= Py_TPFLAGS_CHECKTYPES

>>> a >> 2
__rshift__ c_ulong(16L) 2
c_ulong(4L) 
```

问题解决了？但这是一个黑客。再试一次`__coerce__`。

* * *

## 实施`__coerce__`

```
class c_ulong(_ctypes._SimpleCData):
    _type_ = "L"

    def __rshift__(self, other):
        print '__rshift__', self, other
        if hasattr(other, 'value'):
            other = other.value
        return c_ulong(self.value >> other)

    def __coerce__(self, other):
        print '__coerce__', self, other
        try:
            return self, self.__class__(other)
        except TypeError:
            return NotImplemented 
```

## 演示

```
>>> a = c_ulong(16)
>>> b = c_ulong(2)

>>> a >> 2
__coerce__ c_ulong(16L) 2
__rshift__ c_ulong(16L) c_ulong(2L)
c_ulong(4L)

>>> 16 >> b
__coerce__ c_ulong(2L) 16
__rshift__ c_ulong(16L) c_ulong(2L)
c_ulong(4L) 
```

当然，如果 a`c_ulong`无法创建它会失败，例如 a `float`：

```
>>> a >> 2.0
__coerce__ c_ulong(16L) 2.0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for >>: 'c_ulong' and 'float' 
```

# asp.net - 字符串比较中使用了哪些文化信息？

> ID：15570619
> 
> 赞同：2
> 
> 时间：2013-03-22T12:42:34.400
> 
> 标签：asp.net, string, c#-4.0

我从我的 TL 那里得到了一个提示，我不应该只使用 string.compare，因为我正在使用编程字符串。他到底想说什么？我们有关于弦乐的文化信息吗？使用 stringComparision.Ordinal 有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:56:01.200

如果您不指定任何比较选项，该`String.Compare`方法将默认使用当前文化设置进行文化相关比较。这意味着使用该特定文化的排序顺序比较字符。

如果您指定`Ordinal`比较，则仅根据字符的 Unicode 字符代码比较字符。

使用序数比较的一个好处是它更快。如果您要进行大量比较，这将很重要。

比较结果不同的示例：

```
Console.WriteLine(String.Compare("å", "ä"));
Console.WriteLine(String.Compare("å", "ä", StringComparison.Ordinal)); 
```

输出：

```
-1
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:46:05.017

字符串比较将使用当前的文化，即操作系统具有的文化（如果您转到 Windows 中的区域设置，您可以更改它）

这是来自 msdn：

> 比较使用当前文化来获取特定于文化的信息，例如大小写规则和单个字符的字母顺序

如果您不希望文化成为问题，您始终可以像这样指定比较：

```
String.Compare("a", "a", StringComparison.InvariantCulture); 
```

# java - 如果字符串为空，Android 无法找到字符串

> ID：15570620
> 
> 赞同：3
> 
> 时间：2013-03-22T12:42:36.153
> 
> 标签：java, android, string, email, null

我想使用 android 意图发送电子邮件。除了选择电子邮件应用程序来发送电子邮件时，每件事都运行良好，在发送到字段中获取空值，虽然我检查空值但似乎我无法检测到字符串何时为空。谁能帮我解决这个问题。

```
if (emailAddress[0]!=null && !emailAddress[0].isEmpty()) {
                Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setType("text/plain");
                intent.putExtra(Intent.EXTRA_EMAIL, emailAddress);
                intent.putExtra(Intent.EXTRA_SUBJECT,
                        getResources().getString(R.string.email_sub));
                // intent.putExtra(Intent.EXTRA_TEXT, "I'm email body.");

                startActivity(Intent.createChooser(intent, "Send Email")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:47:29.870

尝试使用此语法检测 null 和空字符串

```
if(!TextUtils.isEmpty(emailAddress[0])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:45:09.783

**使用equals()**或**equalsingorecase()**检查字符串；

 **```
String[]  emailAddress = new String[10]; 

          emailAddress[0]="asdfasdfasdfasdf";

          if (emailAddress[0]!=null && !emailAddress[0].isEmpty())
          {
              System.err.println("asddddddd  " +emailAddress[0] );
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:06:08.503

字符串不能为空。AFAIK Intent.EXTRA_EMAIL 将字符串数组作为第二个参数。

尝试这个。

```
String[] addressArray = {"add1@mail.com", "a2@mail.com"};

//some lines...

intent.putExtra(Intent.EXTRA_EMAIL, addressArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:48:13.167

您可以使用[TextUtils.isEmpty(CharSequence str)](http://developer.android.com/reference/android/text/TextUtils.html#isEmpty%28java.lang.CharSequence%29)方法来检测是否`String`为空或 null

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:55:54.400

TextUtils.isEmpty(charSequence char) 用于 null 字符串，如果它不起作用然后检查 if(emailAddress != null) 因为 emailAddress[0] 位置值为 null 那么你的数组也为 null。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:57:00.707

它可能会帮助你..

您可以使用以下 2 中的任何

```
if (emailAddress[0].toString().equals("")) 
```

或者

```
if (emailAddress[0].toString().length() > 0) 
```**

# eclipse - 如何在逆时针/Eclipse 中的 Leiningen 项目中顺利运行测试？

> ID：15570621
> 
> 赞同：2
> 
> 时间：2013-03-22T12:42:37.110
> 
> 标签：eclipse, clojure, counterclockwise

我是 Clojure 和逆时针的新手，我成功地添加了一个带有[“穷人集成”](http://johnmichaelnewman.com/2011/04/13/poor-mans-integrating-leiningen-into-counterclockwise/)的 Leiningen 2 项目（外部工具，从问题[Using Clojure and Leiningen with IDEs](https://stackoverflow.com/a/7389836/28482)链接）。

到目前为止，我运行测试的替代方案：

*   从命令行： lein test
*   使用“Poor man's integration”（外部工具）运行“lein test”

这些工作很好，但我想知道是否有一些更流畅的选择，例如显示测试运行像 JUnit 等？

或者使用更通用的公式，如何使逆时针流畅的 TDD 流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:55:23.697

我发现的另一种选择（使用[clojure.test API](http://richhickey.github.com/clojure/clojure.test-api.html)）是在 REPL（Alt+Cmd+S）中加载测试文件并调用运行测试：

```
(run-tests) 
```

通过一些尝试，我可以通过将修改后的文件加载到 REPL 并再次调用 run-tests 来重新运行测试。（有效，但可能不是最终解决方案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:07:46.123

[在 REPL 中使用自动测试的Midje](https://github.com/marick/Midje)似乎值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T11:30:33.830

一种方法是使用[cljunit](https://github.com/mikera/cljunit)作为 Eclipse 中的 JUNit 运行程序和 Clojure 测试之间的接口。

# c - 流浪在C中寻找错误

> ID：15570622
> 
> 赞同：0
> 
> 时间：2013-03-22T12:42:41.287
> 
> 标签：c

我不知道为什么这个程序中会出现这个语法错误。

```
#include <stdio.h>
#include <stdbool.h>

#define N 30

int main(void) {
    char sieve[N], *sp;
    int number;
    for(sp = sieve; sp < sieve + N;)
        *sp++ = true;          

    for(number = 3;; number += 2) {
        sp = sieve + (number – 3)/2;
        if(sp >= sieve + N)
            break;
        while(sp += number, sp < sieve + N)
            *sp = false;
    }

    printf("2\n");
    for(number = 3, sp = sieve; sp < sieve + N; number += 2, sp++) {
        if(*sp)
            printf("%d\n", number);
    }

    return 0;
} 
```

它出现在第 13 行：`sp = sieve + (number - 3)/2;`

```
error: stray '\342' in program
error: stray '\200' in program
error: stray '\223' in program
error: expected '>' before numeric constant. 
```

我也尝试过另一个编译器，我也尝试过这种方式 `sp = sieve + ((number - 3)/2);`，但没有任何反应。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T12:49:47.207

第 13 行的减号字符根本不是减号，而是连字符（我想这就是它的名称）。

```
 sp = sieve + (number – 3)/2; 
```

应该

```
 sp = sieve + (number - 3)/2; 
```

当我更改该字符时，代码会编译。

# visual-studio-2012 - 使用适用于 Windows Phone 7 和 8 的便携式库进行单元测试

> ID：15570625
> 
> 赞同：1
> 
> 时间：2013-03-22T12:42:52.510
> 
> 标签：visual-studio-2012, windows-phone, mvvm-light, portable-class-library

我目前有一个带有 WP71 项目和一个 WP8 项目的 VS2012 解决方案。这些项目中的每一个都引用了一个可移植类库项目，我在其中保存了视图模型。我还有一个引用 PCL 并包含视图模型测试的单元测试项目。

我遇到的问题是在编译单元测试项目时出现以下错误：

```
error CS0012: The type 'System.Windows.Input.ICommand' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Windows, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, Retargetable=Yes' 
```

所有项目（包括单元测试项目）都引用 Portable.MvvmLightLibs NuGet 包。

在四处寻找这个程序集后，我注意到有不同的版本，一个用于 WP8，一个用于 Silverlight 4，等等。在所有这些版本中，我不确定该使用哪个。

单元测试项目的目标是 .NET Framework 4.5，因此我为该版本添加了 System.Windows 程序集，但随后出现以下错误：

```
 error : CA0001 : Could not resolve reference to System.Windows, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, Retargetable=Yes 
```

看到这是一个代码分析错误，我很想简单地忽略它并继续，但我想知道是否有人对如何解决这个问题有任何想法，或者忽略它是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:31:56.230

所以，我想了一个办法来解决这个问题。

要编译测试项目，我必须从以下位置添加**System.Windows.dll**程序集：

**C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71**

但是，即使我直接浏览到该文件夹​​，使用“添加引用”对话框添加它也会自动添加 .NET 4.5 版本。为了解决这个问题，我为测试项目打开了 *.csproj 并替换了以下行：

```
<Reference Include="System.Windows"/> 
```

和

```
<Reference Include="System.Windows">
      <HintPath>C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71\System.Windows.dll</HintPath>
</Reference> 
```

这确保了引用 2.0.5.0 版本而不是 .NET 4.5 版本。这种方法的问题是某些类型与其他程序集（即 System.dll）发生冲突，但由于我只是在测试可移植类库中的视图模型，所以我并没有那么烦恼。

理想情况下，测试项目也将是一个可移植类库，但我还没有进行测试。

另一个问题是，在发布模式下构建时，我倾向于将警告显示为错误，因此这总是失败，因为总会有警告抱怨与 System.dll 的命名冲突。

# sql - 查询返回一个月的所有天数

> ID：15570627
> 
> 赞同：3
> 
> 时间：2013-03-22T12:42:58.987
> 
> 标签：sql, sql-server

这个问题与此有关，目前还没有解决方案：[here](https://stackoverflow.com/questions/15548703/report-schedule/15554016?noredirect=1#comment22044254_15554016)

我有一张表格，显示了一个区域的所有会话。

本次会议有一个开始日期。

我需要按特定区域（在这种情况下）获取会话开始日期的所有月份

我有这个查询：

```
SELECT idArea, idSession, startDate FROM SessionsPerArea WHERE idArea = 1

idArea | idSession |  startDate  |
   1   |    1      |  01-01-2013 |
   1   |    2      |  04-01-2013 |
   1   |    3      |  07-02-2013 | 
```

我想要这样的东西：

```
 date     |  Session    |
01-01-2013   |    1        |
02-01-2013   |    NULL     |
03-01-2013   |    NULL     |
04-01-2013   |    1        |
........     |             |
29-01-2013   |   NULL      |
30-01-2013   |   NULL      | 
```

在这种情况下，表格会返回一月份的所有日期。

第二列是当天发生的会话数，因为同一天可能有多个会话。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:46:22.860

请试试：

```
DECLARE @SessionsPerArea TABLE (idArea INT, idSession INT, startDate DATEtime)
INSERT  @SessionsPerArea VALUES (1,1,'2013-01-01')
INSERT  @SessionsPerArea VALUES (1,2,'2013-01-04')
INSERT  @SessionsPerArea VALUES (1,3,'2013-07-02')

DECLARE @RepMonth as datetime
SET @RepMonth = '01/01/2013';
WITH DayList (DayDate) AS
(
    SELECT @RepMonth
    UNION ALL
    SELECT DATEADD(d, 1, DayDate)
    FROM DayList
    WHERE (DayDate < DATEADD(d, -1, DATEADD(m, 1, @RepMonth)))
)
SELECT *
FROM DayList t1 left join @SessionsPerArea t2 on t1.DayDate=startDate and t2.idArea = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:51:36.537

这将起作用：

```
DECLARE @SessionsPerArea TABLE (idArea INT, idSession INT, startDate DATE)
INSERT  @SessionsPerArea VALUES
(1,1,'2013-01-01'),
(1,2,'2013-01-04'),
(1,3,'2013-07-02')

;WITH t1 AS 
(
    SELECT  startDate
            , DATEADD(MONTH, DATEDIFF(MONTH, '1900-01-01', startDate), '1900-01-01') firstInMonth
            , DATEADD(DAY, -1, DATEADD(MONTH, DATEDIFF(MONTH, '1900-01-01', startDate) + 1, '1900-01-01')) lastInMonth
            , COUNT(*) cnt
    FROM    @SessionsPerArea
    WHERE   idArea = 1
    GROUP BY
            startDate
)
, calendar AS
(
    SELECT  DISTINCT DATEADD(DAY, c.number, t1.firstInMonth) d
    FROM    t1 
    JOIN    master..spt_values c ON
            type = 'P'
    AND     DATEADD(DAY, c.number, t1.firstInMonth) BETWEEN t1.firstInMonth AND t1.lastInMonth
)

SELECT  d date
        , cnt Session
FROM    calendar c
LEFT    JOIN t1 ON t1.startDate = c.d 
```

它使用`master..spt_values`表上的简单连接来生成行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:30:46.627

只是日历表的一个例子。要返回一个月的数据，请将 < 32 之间的天数调整为 365+1。您可以通过查询计算一个月中的天数或开始/结束日期之间的天数。我不确定如何在 SQL Server 中执行此操作。我正在使用硬编码值来显示 2013 年 1 月的所有日期。您可以调整差异的开始和结束日期。月或通过查询获取开始/结束日期...：

```
WITH data(r, start_date) AS 
(
 SELECT 1 r, date '2012-12-31' start_date FROM any_table --dual in Oracle
  UNION ALL
 SELECT r+1, date '2013-01-01'+r-1 FROM data WHERE r < 32 -- number of days between start and end date+1
)
 SELECT start_date FROM data WHERE r > 1
/

START_DATE
----------
1/1/2013
1/2/2013
1/3/2013
...
...
1/31/2013 
```

# c# - 我可以将静态方法“添加”到 .NET API 中的现有类吗？

> ID：15570629
> 
> 赞同：3
> 
> 时间：2013-03-22T12:43:15.773
> 
> 标签：c#, .net, windows-runtime, windows-store-apps

我想使用来自常规*.NET Framework 类库的源代码构建一个**Windows Store*类库。理想情况下，我不想修改原始源代码文件。

 *在*.NET Framework 库*中的一些源代码文件中，静态成员用于在常规*.NET Framework* API 和*.NET for Windows Store 应用程序*API 中定义的类中，但其中只有 .NET 的子集*。 NET Framework*成员可用于*Windows 应用商店*。

一个具体示例是[System.IO.Path](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.path.aspx)，其中[GetFullPath 方法](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.path.getfullpath.aspx)不适用于*Windows 应用商店应用程序*。

在我的*Windows 应用商店类库*中合并此方法的替代项并让原始源代码调用此方法是相当简单的。我的问题是，有**什么**方法可以在不修改原始源代码文件的情况下做到这一点？

到目前为止，我还没有找到一个令人满意的解决方案来解决这个问题，但是我已经通过在另一个命名空间中实现例如方法来为我的*Windows Store 类库解决了这个问题：*`Path.GetFullPath(string)`

```
namespace WindowsStoreLib.System.IO {
    public static class Path {
        public static string GetFullPath(string path) { ... }
    }
} 
```

然后在原始文件中添加预处理器指令：

```
#if NETFX_CORE
using Path = WindowsStoreLib.System.IO.Path;
#endif 
```

**是否有不需要**修改原始源代码文件的替代解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:46:54.807

不，你不能，很简单。

当我在做跨平台的事情时，我倾向于编写一个`#if`针对不同平台具有不同实现（通过）的实用程序类——然后我的核心代码只调用实用程序类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:52:05.713

我最近一直在使用 Entity Framework 类做类似的事情，因为我需要将 2 个字段的特定输出添加为 1，并且每次更新时都会将其从 Designer.cs 中清除。但是它们不是静态类或静态方法，但应该使用相同的。

使用要扩展的类的名称创建一个新的类文件并使用部分限定符。

```
namespace WindowsStoreLib.System.IO {
    public partial static class Path {

       public static string GetFullPath(string path) { ... }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:11:29.960

正如 Marc 所说，预处理器指令似乎是唯一的解决方案。

但是当我阅读“静态类”和“现有类”时，首先想到的是“扩展方法”。如果您在代码所在的同一命名空间中为 Path 创建了扩展方法，会发生什么？

```
namespace MyNamespace.WhereMyCodeIs
{
    using System.IO;

    public static class ExtensionMethods
    {
        public static string GetFullPath(this Path pathObject, string path) 
        {
            // Implementation
        }
    }
} 
```

我真的不确定这是否会奏效，但也许我们可以找到解决方法。*

# windows-phone-7 - Windows Phone 应用程序和外部库许可证 - 如何保护许可证文件？

> ID：15570648
> 
> 赞同：0
> 
> 时间：2013-03-22T12:44:38.443
> 
> 标签：windows-phone-7, windows-store, aspose

我即将为 Windows Phone 开发一个应用程序，我将使用一个外部付费库（一些 Aspose 产品）。正如你们许多人所知，他们的库的许可文件适用于每个应用程序执行。但是，如果我将该项目放在 Windows Store 中，如何保护许可证文件不被盗？因为它将包含在该项目中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:19:44.403

要将许可证文件作为嵌入式资源应用，请将许可证文件添加到您的项目中并将其“构建操作”属性设置为“嵌入式资源”，之后您可以使用以下代码来申请许可证：

```
// Create a PDF license object
Aspose.Pdf.License license = new Aspose.Pdf.License();

// Instantiate license file
license.SetLicense("Aspose.Total.lic");

// Set the value to indicate that license will be embedded in the application
license.Embedded = true; 
```

有关详细信息，请查看 Aspose.Pdf 文档中的“[将许可证作为资源嵌入](http://www.aspose.com/docs/display/pdfnet/Using+as+Embedded+Resource)”一文。

至于在 Windows Phone 应用程序中使用 Aspose 库，目前尚未公布 Aspose 库是否与 Windows Phone 平台完全兼容。好消息是经过验证/测试的 Windows Phone 平台 Aspose 产品库应该很快就可以使用，然后您可以毫无问题地使用它们。

我叫 Iqbal，是 Aspose 的开发人员布道师。

# java - java - 如何在Java中将请求有效负载发送到REST API？

> ID：15570656
> 
> 赞同：29
> 
> 时间：2013-03-22T12:45:06.157
> 
> 标签：java, rest, httpurlconnection, http-status-code-400

我想从以下位置检索 JSON 数据： [https ://git.eclipse.org/r/#/c/11376/](https://git.eclipse.org/r/#/c/11376/)

请求网址：`https://git.eclipse.org/r/gerrit/rpc/ChangeDetailService`

请求方法：`POST`

请求标头：

```
Accept:application/json

Content-Type:application/json; charset=UTF-8 
```

请求有效载荷：

```
{"jsonrpc":"2.0","method":"changeDetail","params":[{"id":11376}],"id":1} 
```

我已经尝试过[这个答案](https://stackoverflow.com/questions/13396171/send-http-post-payload-with-java)，但我得到了`400 BAD REQUEST`。

谁能帮我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-23T18:05:11.293

以下代码适用于我。

```
//escape the double quotes in json string
String payload="{\"jsonrpc\":\"2.0\",\"method\":\"changeDetail\",\"params\":[{\"id\":11376}],\"id\":2}";
String requestUrl="https://git.eclipse.org/r/gerrit/rpc/ChangeDetailService";
sendPostRequest(requestUrl, payload); 
```

方法实现：

```
public static String sendPostRequest(String requestUrl, String payload) {
    try {
        URL url = new URL(requestUrl);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();

        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Accept", "application/json");
        connection.setRequestProperty("Content-Type", "application/json; charset=UTF-8");
        OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream(), "UTF-8");
        writer.write(payload);
        writer.close();
        BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        StringBuffer jsonString = new StringBuffer();
        String line;
        while ((line = br.readLine()) != null) {
                jsonString.append(line);
        }
        br.close();
        connection.disconnect();
        return jsonString.toString();
    } catch (Exception e) {
            throw new RuntimeException(e.getMessage());
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:48:41.963

我尝试了一个休息客户。

标题：

*   POST /r/gerrit/rpc/ChangeDetailService HTTP/1.1
*   主机：git.eclipse.org
*   用户代理：Mozilla/5.0 (Windows NT 5.1; rv:18.0) Gecko/20100101 Firefox/18.0
*   接受：应用程序/json
*   接受语言：空
*   接受编码：gzip、deflate、sdch
*   接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.3
*   内容类型：应用程序/json；字符集=UTF-8
*   内容长度：73
*   连接：保持活动

它工作正常。我以良好的身体检索200 OK。

为什么要在请求中设置状态码？和多个声明“**接受**”与接受：应用程序/json，应用程序/json，应用程序/jsonrequest。一个声明就足够了。

# mysql - SQL First() 函数

> ID：15570665
> 
> 赞同：4
> 
> 时间：2013-03-22T12:45:24.933
> 
> 标签：mysql, sql

我正在使用 phpMyAdmin 编写一些我认为很简单但被证明令人头疼的 SQL 代码。我正在使用[本](http://www.w3schools.com/sql/sql_func_first.asp)教程来帮助我。我的目标是从结果集中获取第一列和最后一列 id。当我执行此查询时，我得到 5 行，从 15 开始，一直到 11。

```
SELECT id
FROM boardPost
WHERE recipientId = 1
ORDER BY id DESC
LIMIT 0,5 
```

但是，当我尝试此查询时，我收到错误 #1064：“您的 SQL 语法有错误。”

```
SELECT FIRST(id)
FROM boardPost
WHERE recipientId = 1
ORDER BY id DESC
LIMIT 0,5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:58:15.187

可能是这样的？

```
SELECT min(id), max(id)
from (
  select id
  from boardPost
  where recipientId = 1
  order by id desc
  limit 0,5
) t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:52:58.223

如果你只想要`id`结果集的第一个和最后一个，你可以考虑这个：

```
SELECT MIN(id) firstId, MAX(id) lastId FROM someTable WHERE aField = 1; 
```

请注意，它仅在您使用**和`ORDER BY`**字段时才有效`AUTO_INCREMENT`，否则您可能会得到意想不到的结果。

它只适用于全套。如果您需要`id`有限的第一个和最后一个，您可能最好使用 2 个查询`ASC`和`DESC`order 和`LIMIT 1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:47:08.083

MySQL 不支持该`FIRST()`功能。您将需要使用他们在该教程中指定的解决方法（使用`ORDER BY`and `LIMIT`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T12:50:12.320

我想这就是你想要的？

```
Select id from boardPost order by id asc limit 1 
```

和

```
Select id from boardPost order by id desc limit 1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-04T18:00:51.237

在某些情况下（比如我的，第一次把我带到这里），有一些很少使用的 MySQL *[“窗口函数”](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html)*，例如**[`FIRST_VALUE`](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_first-value)**，**[`LAST_VALUE`](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_last-value)**它可能提供您正在寻找的功能。

（这里有更多关于[Window Function Concepts and Syntax](https://dev.mysql.com/doc/refman/8.0/en/window-functions-usage.html)的信息，以及该术语的[Wikipedia 描述](https://wikipedia.org/wiki/Window_function)。）

# file - Netbeans中不同项目文件之间的区别

> ID：15570666
> 
> 赞同：0
> 
> 时间：2013-03-22T12:45:26.607
> 
> 标签：file, netbeans, project, markup

我在我的工作环境中总是打开一个以上的项目，其中一些具有相同的文件但来自不同的项目，并且找出其中哪些来自哪个项目可能是一个真正的痛苦（但是 2 秒超过 div并查看它们来自哪个文件夹）

有没有办法标记它们，这样我就可以知道哪个文件来自哪个项目？

我正在为 Windows 使用 NB 7.3 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:00:10.193

有一个插件显示标题中的路径：http: [//plugins.netbeans.org/plugin/42000/show-path-in-title](http://plugins.netbeans.org/plugin/42000/show-path-in-title)

如果您通过 CTRL+Tab 切换文件，则所选文件的路径将显示在窗口底部。也许这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:00:42.613

我的窗口标题是：“{project name} - NetBeans IDE 7.2.1”。直接在选项卡上我不知道如何放置这些信息，但我使用“查看 - > 显示版本控制标签”。我没有打开各种项目，而是在我的 VCS 的不同分支上拥有同一项目的各种“实例”。

我正在使用 Ubuntu。

**更新**

刚刚在 Windows VM 上重新安装了 NetBeans 7.3，行为是相同的：项目名称在窗口标题中添加“NetBeans IDE {version}”。

# mongodb - 是否可以通过子字段对象值查询 MongoDB？

> ID：15570667
> 
> 赞同：0
> 
> 时间：2013-03-22T12:45:30.530
> 
> 标签：mongodb

我有这样的文件：

```
db.planet.insert({ 
    name: 'Earth',
    stuff: {
        'grass': 'green',
        'sky': 'blue',
        'sea': 'blue'
    }
})
db.planet.insert({ 
    name: 'Mars',
    stuff: {
        'dust': 'red',
        'sky': 'yellow'
    }
}) 
```

我想找到所有至少有一些`blue` *东西*的行星（在这种情况下只有地球）。我怎样才能做到这一点？

**Catch**：我尝试通过使用数组（而不是对象）来解决这个问题（），但我还需要能够更新（确切地说是*upsert ）**一些东西**的*值。例如，我必须能够做到这一点：`stuff: [ { k: 'grass', v: 'green'},... ]`

 **```
db.planet.update({ name: 'Mars' }, {
    '$set': { 
        'stuff.canals': 'brown', 
        'stuff.dust': 'reddish' 
    } 
}) 
```

那么，我怎样才能找到上面有东西的行星`blue`呢？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:05:02.073

使用 $or 运算符。$or 运算符的值应该是一个数组，该数组包含至少一个必须为真的条件。

就您而言，鉴于您提到的字段名称：

```
 db.planet.find($or:[
   {"stuff.sky":"blue"},
   {"stuff.grass":"blue"},
   {"stuff.sea":"blue"},
   {"stuff.dust":"blue"},
   {"stuff.canals":"blue")
 ]) 
```

请参阅[http://docs.mongodb.org/manual/reference/operator/or/](http://docs.mongodb.org/manual/reference/operator/or/)
由于您要查询的不同字段相当多，您可能希望将所有这些字段名称的数组保存在某处，以便您可以以编程方式生成 $or 数组。

我认为没有办法在不事先知道字段名称的情况下进行查询。请参阅 [不带字段名称的 mongodb 查询](https://stackoverflow.com/questions/10901151/mongodb-query-without-field-name)。**

# jquery - jQuery 对话框初始化

> ID：15570674
> 
> 赞同：1
> 
> 时间：2013-03-22T12:45:45.900
> 
> 标签：jquery, jquery-ui, initialization, modal-dialog, jquery-ui-dialog

当我单击 JQuery 对话框上的关闭按钮（未关闭）时，我继续收到此错误：

*未捕获的错误：无法在初始化之前调用对话框上的方法；试图调用方法“关闭”*

在其他问题中尝试了一些关于 StackOverflow 的建议修复后，在 Chrome 工具中。

谁能指出我没有正确构建对话框以导致此错误？

[**在这里**](http://jsfiddle.net/PTXZV/)生活小提琴[](http://jsfiddle.net/PTXZV/)

 **```
$(document).ready(function fooDialog() {

    $('#fooChartDialog').dialog({
        autoOpen: false,
        height: 600,
        width: 1000,
        resizable: false,
        buttons: {
            "Drill Down Report": function () {
                window.open('example.com');
            },
            "Close": function () {
                $(this).dialog("close");
            }
        },
        open: function () {
            $('#fooChartDialog').load($('#fooChartDialog').data('url'), function () {
                fooChartLoad()
            });
        },
        title: 'Customer Satisfaction Chart',
        modal: true
    });

    $('#fooChartButton').click(function () {
        $('#fooChartDialog').dialog("open")
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:59:27.173

尝试`$(this).dialog("close");`代替`$('this').dialog("close");`

当前对象应该被引用而**`$(this)`**不是被`$('this')`**

# wpf - ClickOnce 更新后 WPF 应用程序崩溃。全新安装时不会崩溃

> ID：15570675
> 
> 赞同：1
> 
> 时间：2013-03-22T12:45:47.753
> 
> 标签：wpf, clickonce, xamlparseexception

在我们通过 ClickOnce 发布更新后，我的 WPF 应用程序崩溃了：

'调用与指定绑定约束匹配的'MainWindow'类型的构造函数引发了异常。行号“12”和行位置“9”。

从 Void RewrapException（System.Exception，System.Xaml.IXamlLineInfo，System.Uri）

这只发生在应用更新后的机器上。获得全新安装的机器运行良好。如果您卸载该应用程序并重新安装它，它运行良好。

我发现[了这个问题，这似乎是同一件事](https://stackoverflow.com/questions/2928474/xamlparser-error-after-clickonce-deployment-application-crashing-after-installat)

在我的情况下，如果您双击部署文件夹（C:\Users\username\AppData\Local\Apps\2.0 等）中的应用程序，它运行没有问题。只有当您通过单击安装在用户桌面上的图标来运行它时，它才会崩溃。再说一次，只有当它完成更新时。

任何有关故障排除/补救的建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:09:15.480

这让我想知道在您第一次安装时是否在某个地方设置了路径，并且在更新时该路径不再有效。您没有在任何地方存储路径吗？在设置文件或配置文件中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:15:39.443

您是否尝试过从部署文件夹创建快捷方式，并将其复制到桌面上？

# hadoop - Hadoop Yarn 0.23.6 - 转到 localhost:8088 会在版本上出现 IPC 错误

> ID：15570676
> 
> 赞同：1
> 
> 时间：2013-03-22T12:45:49.203
> 
> 标签：hadoop, mapreduce

我已经按照我之前的帖子配置了 Hadoop Yarn

[https://stackoverflow.com/questions/15499814/hadoop-yarn-0-23-6-starting-scripts-vs-binaries-and-localhost-errors](https://stackoverflow.com/questions/15499814/hadoop-yarn-0-23-6-starting-scripts-vs-binaries-and-localhost-errors)

当去 localhost:8088 我得到以下信息：

ÿÿÿÿÿÿÿÿ���)org.apache.hadoop.ipc.RPC$VersionMismatch���>服务器 IPC 版本 5 无法与客户端版本 47 通信

我一直在环顾四周，找不到任何解释原因的东西。有任何想法吗？

谢谢

# iphone - QRCode在ios中编码一个简单的字符串

> ID：15570678
> 
> 赞同：3
> 
> 时间：2013-03-22T12:45:50.657
> 
> 标签：iphone, ios, objective-c, qr-code, encode

我已经从[github](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)下载了一个用于 QRCode 编码的示例代码。

它工作正常，并为我指定的字符串生成带有 QRCode 的图像。

但是，当我扫描该图像时，它会显示类似`http://mystring`.

我只需要`mystring`. 怎么做？问题出在 QRscanner 应用程序上吗？

我认为[QRecoderapp](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)是关于对 url 进行编码。

是否有任何其他示例可以仅编码一个简单的字符串（不是 url）？

或者

在上面的代码中是否有任何更改要获取字符串而不是 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:10:33.570

我已经解决了我的问题。

我从这个[Github 链接](https://github.com/kuapay/iOS-QR-Code-Generator)下载了一个项目。

该 prjct 中的代码为简单文本创建 QRCode 图像。

```
NSString *code = @"Our String to be encoded";

Barcode *barcode = [[Barcode alloc] init];

self.view.backgroundColor = [UIColor whiteColor];

[barcode setupQRCode:code];

ourImageView.image = barcode.qRBarcode; 
```

希望，这会帮助其他人。

# ios - CoreAudio/OpenAL：如何获取传出的音频信号

> ID：15570679
> 
> 赞同：2
> 
> 时间：2013-03-22T12:45:55.927
> 
> 标签：ios, objective-c, core-audio, openal

我目前正在尝试获取我的 iOS 应用程序的传出音频信号，以便能够将其发送到 Audiobus。我需要传出的 AudioBufferLists 才能路由它们。我正在使用 OpenAL 进行音频播放。

最好的情况是我什至可以修改输出信号以对其施加影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T18:27:33.037

`kAudioUnitSubType_AU3DMixerEmbedded`您可以将 CoreAudio 与 3D 混合器音频单元 ( )一起使用，而不是使用 OpenAL 。然后，您可以控制输出的去向。显然这样做会牺牲一些可移植性（Mac OS X 可以，但 Windows、Linux 或 Android 不行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:13:30.053

你可能想看看这个人是如何为 OpenAL 制作自己的音频混合对象的，这样他就可以实现这一点：

[http://www.cuppadev.co.uk/openal-sucks-write-your-own-audio-mixer/](http://www.cuppadev.co.uk/openal-sucks-write-your-own-audio-mixer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:12:00.183

目前似乎没有公共 API 可以访问 iOS 应用程序中 OpenAL 的输出。

如果您想要输出，则需要使用另一个音频 API 来播放声音，例如带有未压缩原始 PCM 音频的音频队列或 RemoteIO 音频单元，以便能够获取音频输出缓冲区。

# java - 如何为具有 3 字节 [] 的类定义哈希码？

> ID：15570685
> 
> 赞同：0
> 
> 时间：2013-03-22T12:46:15.910
> 
> 标签：java, hashcode

`hashCode`我应该如何为具有 的类定义一个`3 byte[]`？

```
public class Key implements Comparable<Key> {
    private static final long serialVersionUID = 1L;
    private byte[] subKey1;
    private byte[] subKey2;
    private byte[] subKey3;

    public int hashCode() {  
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:54:00.233

我建议你在谷歌上搜索或阅读 Joshua Bloch 的书“有效的 java”，其中包含一个很好的算法如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:52:20.913

简单的哈希码可以是组合所有 3 字节数组的长度并将其用作哈希码。

要生成更复杂的，您可以读取每个字节数组的第一个和最后一个元素，转换为整数值并将它们组合以生成哈希码。

我建议您使用该值，因为如果第一个值和最后一个值相同，那么这两个类很可能不相似。

# asp.net - 在 asp.net 上访问 Datalist Bound Template 标签控件

> ID：15570692
> 
> 赞同：0
> 
> 时间：2013-03-22T12:46:31.767
> 
> 标签：asp.net, vb.net

感谢您花时间阅读我的查询。我已经到处搜索了 2 天，但仍然找不到与我有类似问题的人。我有一个具有母版页的 asp.net 项目。在母版页上有一个内容占位符控件。我有一个从母版页派生的子页。在子页面上，我添加了一个 datalist 控件，该控件绑定到由存储过程填充的 Sqldatasource。datalist 控件有一个标签项模板。

我正在尝试使用以下代码访问标签：

```
 Protected Sub DataList1_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.DataListItemEventArgs) Handles DataList1.ItemDataBound
    If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem Then
        Dim myLabel As Label = CType(DataList1.FindControl("UnitPriceLabel"), Label)
        myLabel.Text = "new text"

    End If
End Sub 
```

我得到一个对象引用未设置为对象错误的实例，因为“myLabel”一无所获。

我已经尝试过这里的代码：

[从代码隐藏访问 datalist headertemplate 中的控件](https://stackoverflow.com/questions/14933540/accessing-controls-in-datalist-headertemplate-from-codebehind)

[在代码隐藏中访问 datalist 的 asp.net 控件](https://stackoverflow.com/questions/11266138/accessing-asp-net-controls-of-datalist-in-codebehind)

[从后面的代码在 C# 中定义 Datalist HeaderTemplate](https://stackoverflow.com/questions/8660054/define-datalist-headertemplate-in-c-sharp-from-code-behind)

[如何访问数据列表中的项目](https://stackoverflow.com/questions/2749890/how-to-access-items-from-datalist)

我认为它与母版页控件上的 contentplaceholder 有关，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:59:29.263

更改此行：

```
Dim myLabel As Label = CType(DataList1.FindControl("UnitPriceLabel"), Label) 
```

对此：

```
Dim myLabel As Label = CType(e.Item.FindControl("UnitPriceLabel"), Label) 
```

如果您愿意，您甚至可以在一行中执行此操作：

```
DirectCast(e.Item.FindControl("UnitPriceLabel"), Label).Text = "new text" 
```

但是，如果我需要访问标签一次而不是多次，我只会这样做。

查看Microsoft 的[这篇文章](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalistitemeventargs.aspx)以获取更多信息。

# asp.net - 如何让 DateTime.TryParse 以“ddMMyyyy”格式解析日期？

> ID：15570699
> 
> 赞同：1
> 
> 时间：2013-03-22T12:46:42.750
> 
> 标签：asp.net, vb.net

我需要解析可能采用“ddMMyyyy”格式以及标准 GB 英语格式（例如“dd/mm/yyyy”）的日期，我正在尝试使用该`DateTime.TryParse()`方法来执行此操作，但它没有t 识别“ddMMyyyy”格式。

我知道我每次都可以使用`Date.TryParseExact()`和指定自定义格式，但这意味着对每个日期进行两次检查（一次用于自定义格式，一次用于文化的标准格式），似乎必须有更好的方法。

有没有办法获得`DateTime.TryParse()`识别自定义日期格式以及标准格式的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:40:56.987

我认为不可能设置`DateTime.TryParse()`为同时识别两种日期格式**中的**任何一种。查看`DateTime.TryParse()`您拥有的覆盖`.TryParse(String, DateTime)`和`TryParse(String, IFormatProvider, DateTimeStyles, DateTime)`，因此这里最大的灵活性允许您提供一个`IFormatProvider`可能是一个`DateTimeFormatInfo`类的，但`DateTimeFormatInfo`一次只能处理一组格式。

一个镜头（我没有尝试过）将创建一个`DateTimeFormatInfo`具有不同 LongDatePattern 和 ShortDatePattern 模式的新类（与您要使用的模式匹配），并将实例作为参数传递给`TryParse`，但检查两次`Date.TryParseExact()`似乎更合理.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:08:25.863

如何使用 DateTime.TryParseExact [MSDN 链接](http://msdn.microsoft.com/en-us/library/ms131044.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:45:56.503

恐怕日期解析器往往不太聪明，主要是设计使然。虽然您可能想要解析`"ddMMyyyy"`日期，但其他人可能想要解析`"yyyyMMdd"`日期。在某些情况下，这些可能是相同的（什么是`"20121220"`？）。解析器很笨，你必须告诉它使用哪种格式。如果您指定多种格式，则需要一次尝试一种，这正是您要避免的。

如果您真的只想通过一次，您可以使用正则表达式来提取相关部分 ( `"(?<Day>\d{2})/?(?<Month>\d{2})/?(?<Year>\d{4})"`)，然后将其重组为解析器识别的格式 ( `string.Format("{0}/{1}/{2}", match.Groups["Day"].Value, match.Groups["Month"].Value, match.Groups["Year"].Value)`)。

`if`不过，老实说，在语句中只使用 String.Contains("/") 可能会更有效。

# performance - 快速字典搜索的最佳数据结构是什么？

> ID：15570700
> 
> 赞同：0
> 
> 时间：2013-03-22T12:46:45.707
> 
> 标签：performance, search, dictionary

据我所知，哈希表和双数组尝试是搜索字典最快的两种数据结构。是否有任何其他数据结构或算法可以击败它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:51:17.373

哈希表不必总是一种快速搜索的数据结构。这真的取决于你的散列函数有多好。如果您的哈希函数不是很好，它可以解析多个键以映射到相似的索引，从而导致冲突并使哈希表退化为 O(n) 运行时间。

自平衡树被认为是快速的数据结构，并且它们保证 O(log n)

# json.net - 为 DateTime 序列化/反序列化指定 Json.Net 的全局设置

> ID：15570707
> 
> 赞同：3
> 
> 时间：2013-03-22T12:46:59.250
> 
> 标签：json.net

是否可以设置 JSON.Net，以便如果要序列化 ​​DateTime，则将其序列化为 UTC 格式。从字符串反序列化时，将其反序列化为“LocalTime”。例如：

*   序列化
*   *   2012 年 1 月 1 日 16:00:00（种类 = UTC） 存储为`2012-01-01T16:00:00Z`
*   *   2012 年 1 月 1 日 16:00:00（种类 = 本地，GMT +1）-> 存储为`2012-01-01T15:00:00Z`
*   反序列化（假设机器的本地时间 = GMT+1）
*   *   `2012-01-01T16:00:00Z`-> 反序列化为 01/01/2012 17:00 +1GMT（种类 = 本地）
*   *   `2012-01-01T15:00:00Z`-> 反序列化为 01/01/2012 16:00 +1GMT（种类 = 本地）

但是，我希望这“自动”发生，而不必每次都用设置来指定它 - 就像全局设置一样。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-24T10:20:59.470

在 ASP.NET WebAPI 中，这是可能的。尝试这个：

```
// Converters will be userd during serialization (override DateTimeZoneHandling)
config.Formatters.JsonFormatter.SerializerSettings.Converters.Add(new IsoDateTimeConverter { DateTimeStyles = DateTimeStyles.AdjustToUniversal });
// DateTimeZoneHandling will be effective during deserialization
config.Formatters.JsonFormatter.SerializerSettings.DateTimeZoneHandling = DateTimeZoneHandling.Local; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T08:12:37.197

就像将来参考的注释一样，对此的“修复”不是使用`DateTime`but `DateTimeOffset`，因为`DateTime`可能会对其实际所在的时区带来各种混淆。

存储 a 没有歧义，`DateTimeOffset`因为它始终包括时区，并且无论何时何地都始终指代同一时间点。

# cuda - 线程间的CUDA共享对象

> ID：15570710
> 
> 赞同：0
> 
> 时间：2013-03-22T12:47:01.770
> 
> 标签：cuda

我对 CUDA 完全陌生。我想在设备上创建一个对象，并从不同的线程访问它的成员。我使用 nvcc -arch=sm_20（在 Tesla M2090 上），如果我运行我的代码，我会收到“未指定的启动失败”。这是我的代码：

```
#include <stdio.h>
#include <string>

using namespace std;

#ifdef __CUDACC__
#define CUDA_CALLABLE __host__ __device__
#else
#define CUDA_CALLABLE
#endif

class SimpleClass {
public:
    int i;
    CUDA_CALLABLE SimpleClass(){i=1;};
    CUDA_CALLABLE ~SimpleClass(){};
};

__global__ void initkernel(SimpleClass *a){
    a = new SimpleClass();
}
__global__ void delkernel(SimpleClass *a){
    delete a;
}
__global__ void kernel(SimpleClass *a){
printf("%d\n", a->i);
}

int main() {
    SimpleClass *a;
    initkernel<<<1,1>>>(a);
    cudaThreadSynchronize();
    kernel<<<1,10>>>(a);
    cudaThreadSynchronize();
    delkernel<<<1,1>>>(a);
    cudaThreadSynchronize();

    cudaError_t error = cudaGetLastError();
    string lastError = cudaGetErrorString(error);
    printf("%s\n",lastError.c_str());
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:30:25.233

在您的第一个内核代码期间，您会收到“未指定的启动失败”，因为“a”是存储在主机中的指针，但您想从设备函数中为其指定一个值。如果要在设备上分配对象，则首先必须在设备上分配一个指针，然后才能从设备（内核）代码中读取和写入它，但要小心，因为它需要双重间接。

你的代码应该看起来像这样（其余的函数应该类似地修改）：

```
__global__ void initkernel(SimpleClass** a){
    *a = new SimpleClass();
}

int main() {
    SimpleClass** a;
    cudaMalloc((void**)&a, sizeof(SimpleClass**));
    initkernel<<<1,1>>>(a);
    cudaThreadSynchronize();
} 
```

PS.：pQB 是绝对正确的，您应该在每个内核代码之后进行错误检查以尽快检测到错误（目前是为了在代码中找到错误的确切位置）

# c# - 作弊应用程序连接到不同的 SQL Server 数据库

> ID：15570718
> 
> 赞同：0
> 
> 时间：2013-03-22T12:47:29.097
> 
> 标签：c#, sql-server, database-connection

在工作中，我编写了一个应用程序来处理来自 SQL Server 数据库的数据并以文件格式输出。

现在我需要在家里使用它，因为应用程序有硬编码的连接字符串，所以我遇到了问题。我在公司获得了一份数据库副本，原始数据库无法从公司外部访问。

连接字符串格式如下所示

```
Data Source=serverName-01;Initial Catalog=dbName_01;Integrated Security=True;Pooling=False 
```

我试图通过编辑 Windows 主机文件来欺骗应用程序：

```
serverName-01 127.0.0.1 
```

但它没有用。有没有办法让它工作而不去工作和编辑源代码？

学到的教训是艰难的——永远不要硬编码连接srings :<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:55:59.527

为此，您可以使用 SQL Server 配置管理器中定义的别名。为您的本地实例创建一个别名，该别名与连接字符串中的名称完全相同。

请查看以下文章以了解如何执行此操作（非常简单）：

[创建或删除供客户端使用的服务器别名（SQL Server 配置管理器）](http://msdn.microsoft.com/en-gb/library/ms190445.aspx)

# jquery - jquery colorbox表单提交事件未触发

> ID：15570721
> 
> 赞同：2
> 
> 时间：2013-03-22T12:47:33.730
> 
> 标签：jquery, ajax, forms, colorbox

我有一个 id="yearbookorder" 的 div，它是隐藏的。在单击事件之后，会出现一个带有该 yearbookorder ID DIV 的颜色框。

在那个 div 中，代码如下：

```
<form id="yearbook_order" name="yearbook_order" action="yearbook/order" enctype="multipart/form-data" method="post">
    <input class="ordering" name="yb_email" value="" >
    <input type="submit" id="order" name="order" value="Send it!">
</form> 
```

我有一个 jquery ajax 代码要提交，但是没有触发表单提交事件：

```
$(function()
    {
        $("#yearbook_order").submit(function(e){
        e.preventDefault();
        dataString = $("#yearbook_order").serialize();   
        $.ajax({
            type: "POST",
            url: "yearbook/order",
            data: dataString,
            dataType: "json",
            success: function(data) 
            {
                if (data.status == 'error')
                {
                    alert(data.message);
                    //$("#msg").html(data.message);
                }
                else
                {
                    //$("#msg").html(data.message);
                    alert(data.message);
                }
            }  
            });               
        });
    }); 
```

当我单击提交按钮时，表单未提交。但为什么？当我不在颜色框中而是在空白页上调用此表单时，它正在工作。隐藏的 yearbookorder DIV 有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:23:14.497

```
You are binding submit to the form before it exists. Bind the event to the document, and pass the form selector to .on:

$(document).on("submit", "#yearbook_order", function(e){
    // make ajax request here
}); 
```

# android - EditText 中的 Android 三星内存泄漏

> ID：15570725
> 
> 赞同：2
> 
> 时间：2013-03-22T12:47:42.260
> 
> 标签：android, memory, memory-leaks

我遇到了三星设备的内存泄漏。如果某些活动有`EditText`这个活动将被泄露。为了展示这一点，我创建了一个小型测试应用程序。

第一个`Activity`（称为`MyActivity`）包含`EditText`和`Button`。通过按下一个按钮，您在第一个调用finish()`Activity`并打开第二个。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    findViewById(R.id.goTo)).setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
            Intent intent = new Intent(MyActivity.this, AnotherActivity.class);
            startActivity(intent);
        }
    });
} 
```

当我参加第二次活动时，我参加了 hprof。从 Memory Analyzer 我看到 MyActivity 由于来自 InputMethodManager 的引用而被泄露

![内存分析器的屏幕截图](../Images/d122c11ea344492cde5b61157f18bc30.png)

此问题仅发生在三星 S III 和 Tab 设备中。所以 Xperia P 设备和其他设备没有泄漏。请帮助如何绕过此错误。

# c# - 两种声明变量的方式一样吗？

> ID：15570728
> 
> 赞同：1
> 
> 时间：2013-03-22T12:47:46.363
> 
> 标签：c#, .net, variable-declaration

下面显示的两种声明变量的方式是否相同？

```
int aa= 0, bb= 0, cc= 0, dd= 0; 
```

* * *

```
int aa= 0;
int bb= 0;
int cc= 0;
int dd= 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:10:21.960

**是**的，这个：

```
int aa = 0, bb = 0, cc, dd; 
```

与以下更常见和可读的版本完全相同：

```
int aa = 0;
int bb = 0;
int cc;
int dd; 
```

正如[Soner Gönül 所示](https://stackoverflow.com/a/15570830/146622)，它们产生相同的 IL 代码。

但是你问了一个很好的问题，因为事情可能比这更微妙。

### 指针

在不安全的 C# 中，您可以使用指针。指向整数的指针写为`int*`。所以当你想声明三个类型的变量时`int*`，你可以这样写：

```
int* aa, bb, cc; 
```

这正确地代表了您的意图：

```
int* aa;
int* bb;
int* cc; 
```

但是，指针的语法来自更古老的 C 语言，如果您在 C 中声明三个指针变量，如下所示：

```
int* aa, bb, cc; 
```

那么这意味着*一些微妙的不同*，你实际上已经写过：

```
int* aa;
int bb;
int cc; 
```

这就是为什么 C 开发人员会`int *aa`改为编写，以表明它只是`aa`一个指针类型，其余的都是普通整数。

```
int *aa, bb, cc; 
```

但是，我不鼓励您完全用 C 编写这样的东西：它令人困惑。

### Visual Basic 和 VB.Net

在 Visual Basic.NET 中，您还可以在一行上声明变量：

```
Dim aa, bb As Integer 
```

这与以下内容相同：

```
Dim aa As Integer
Dim bb As Integer 
```

但是，如果您使用 Visual Basic（VB.Net 的前身）进行编程，那么：

```
Dim aa, bb As Integer 
```

方法：

```
Dim aa As Any     'aa Is Variant
Dim bb As Integer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:49:38.310

他们是一样的。我认为，一旦您的名字更具描述性，第二个选项可能更容易阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:52:57.180

## 是的

C#支持*单个语句可以分配多个局部变量*

> 一条语句可以分配多个局部变量。源自 C 风格语法的语言通常允许您使用逗号在一个语句中声明多个变量。C# 语言允许这样做。

从[`8.5.1 Local variable declarations`](http://msdn.microsoft.com/en-us/library/aa664742%28v=vs.71%29.aspx)

> 声明多个变量的局部变量声明等价于同一类型的单个变量的多个声明。此外，局部变量声明中的变量初始值设定项完全对应于在声明之后立即插入的赋值语句。

第一个`IL`代码；

```
 .locals init ([0] int32 aa,
           [1] int32 bb,
           [2] int32 cc,
           [3] int32 dd)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.0
  IL_0003:  ldc.i4.0
  IL_0004:  stloc.1
  IL_0005:  ldc.i4.0
  IL_0006:  stloc.2
  IL_0007:  ldc.i4.0
  IL_0008:  stloc.3
  IL_0009:  ret 
```

二一`IL`码；

```
 .maxstack  1
  .locals init ([0] int32 aa,
           [1] int32 bb,
           [2] int32 cc,
           [3] int32 dd)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.0
  IL_0003:  ldc.i4.0
  IL_0004:  stloc.1
  IL_0005:  ldc.i4.0
  IL_0006:  stloc.2
  IL_0007:  ldc.i4.0
  IL_0008:  stloc.3
  IL_0009:  ret 
```

# java - 有没有办法重新加载特定的 ResourceBundle？

> ID：15570729
> 
> 赞同：1
> 
> 时间：2013-03-22T12:47:52.583
> 
> 标签：java, jsf-2, resourcebundle

我有一个自定义的数据库支持`ResourceBundle`，有时需要重新加载。我不想使用`ResourceBundle.clearCache()`，因为它会重新加载所有捆绑包。

是否可以仅重新加载一个捆绑包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:29:27.747

您想要做的是自 1.6 以来的 Java API 的一部分。首先获取要重新加载的包的句柄：

```
ResourceBundle bundle = ResourceBundle.getBundle("MyResources", new Locale("fr", "CH"),
                        ResourceBundle.Control.getControl(FORMAT_PROPERTIES)); 
```

您可以设置捆绑包的生存时间并允许加载器为您重新加载它。您可以在 Java API[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.Control.html)中阅读所有相关信息。

# asp.net-mvc - .Net MVC4 Action Method 参数在 jqGrid 帖子中为空

> ID：15570731
> 
> 赞同：0
> 
> 时间：2013-03-22T12:47:57.907
> 
> 标签：asp.net-mvc, jqgrid

我浏览了很多关于这个主题的帖子，但到目前为止我还没有解决我的问题。我是 MVC / Jquery 的新手，所以我可能错过了答案。

我希望从 jqGrid 返回所有行。我使用 Oleg 的示例代码进行 jqGrid 处理：

```
 sendData = function (data) {
        var dataToSend = JSON.stringify(data);
        alert("The following data are sending to the server:\n" + dataToSend);
        $.ajax({
            type: "POST",
            url: '@Url.Action("Update", "WatchList")',
            dataType: "json",
            data: dataToSend,
            loadonce: true,
            contentType: "application/json; charset=utf-8",
            success: function (response, textStatus, jqXHR) {
                // remove error div if exist
                $('#' + grid[0].id + '_err').remove();
                alert("Updates Complete");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                // remove error div if exist
                $('#' + grid[0].id + '_err').remove();
                // insert div with the error description before the grid
                grid.closest('div.ui-jqgrid').before(
                    '<div id="' + grid[0].id + '_err" style="max-width:' + grid[0].style.width +
                    ';"><div class="ui-state-error ui-corner-all" style="padding:0.7em;float:left;"><span class="ui-icon ui-icon-alert" ' +
                    'style="float:left; margin-right: .3em;"></span><span style="clear:left">' +
                    decodeErrorMessage(jqXHR, textStatus, errorThrown) + '</span></div><div style="clear:left"/></div>');
            }

        $("#sendAll").click(function () {
            var localGridData = grid.jqGrid('getGridParam', 'data');
            sendData(localGridData);
        });

    }; 
```

帖子的提琴手输出是：

```
POST http://localhost:49323/WatchList/Update HTTP/1.1
Host: localhost:49323
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: application/json, text/javascript, */*; q=0.01
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Content-Type: application/json; charset=utf-8
X-Requested-With: XMLHttpRequest
Referer: http://localhost:49323/WatchList/Edit
Content-Length: 3645
Cookie: __RequestVerificationToken=flUoW7U12gHRfOVMNiLu_tW4G_oVI4TwxvAYKOU9arGI014KWFKUKjUbgjbZStLb7n1TGmU22NtoQjAb26bmjcccjg8x6skcL1zbP_o2y5I1; .ASPXAUTH=D968251D718DEF7CA0C9D4A6BD2750F9923CBF554FC0B058772C753C4305682578C207F7367B6D61F80F84CBDCA5C130126AE2CC5E1715FA897122DEB68B3B40C86816C32A6F047891794A732F4A7A3499064220077793B5F1313813FFC21D01
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache

[{"Date":"Fri 22 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"0"},{"Date":"Sat 23 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"1"},{"Date":"Sun 24 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"2"},{"Date":"Mon 25 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"3"},{"Date":"Tue 26 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"4"},{"Date":"Wed 27 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"5"},{"Date":"Thu 28 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"6"},{"Date":"Fri 29 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"7"},{"Date":"Sat 30 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"8"},{"Date":"Sun 31 March 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"9"},{"Date":"Mon 1 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"10"},{"Date":"Tue 2 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"11"},{"Date":"Wed 3 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"12"},{"Date":"Thu 4 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"13"},{"Date":"Fri 5 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"14"},{"Date":"Sat 6 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"15"},{"Date":"Sun 7 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"16"},{"Date":"Mon 8 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"17"},{"Date":"Tue 9 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"18"},{"Date":"Wed 10 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"19"},{"Date":"Thu 11 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"20"},{"Date":"Fri 12 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"21"},{"Date":"Sat 13 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"22"},{"Date":"Sun 14 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"23"},{"Date":"Mon 15 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"24"},{"Date":"Tue 16 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"25"},{"Date":"Wed 17 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"26"},{"Date":"Thu 18 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"27"},{"Date":"Fri 19 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"28"},{"Date":"Sat 20 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"29"},{"Date":"Sun 21 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"30"},{"Date":"Mon 22 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"31"},{"Date":"Tue 23 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"32"}] 
```

控制器接收到的参数为空？我没有将数据直接导入的模型，因为网格列是动态创建的，因此我需要解析原始数据。在我的控制器操作中我需要什么来获取发布数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:34:31.813

您的更改必须关闭，因为现在正在识别数据但出现错误

```
 Invalid JSON primitive: griddata.]
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
Exception Details: System.ArgumentException: Invalid JSON primitive: griddata.

[ArgumentException: Invalid JSON primitive: griddata.]
   System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject() +915
   System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth) +597
   System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer) +108
   System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit) +211
   System.Web.Script.Serialization.JavaScriptSerializer.DeserializeObject(String input) +86
   System.Web.Mvc.JsonValueProviderFactory.GetDeserializedObject(ControllerContext controllerContext) +298
   System.Web.Mvc.JsonValueProviderFactory.GetValueProvider(ControllerContext controllerContext) +123
   System.Web.Mvc.<>c__DisplayClassc.<GetValueProvider>b__7(ValueProviderFactory factory) +59
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +145
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +171
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +460
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +58
   System.Web.Mvc.ValueProviderFactoryCollection.GetValueProvider(ControllerContext controllerContext) +360
   System.Web.Mvc.ControllerBase.get_ValueProvider() +85
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +154
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +199
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +978
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag) +53
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +523
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +83
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag, Int32 timeout) +97
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +53
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +501
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag, Int32 timeout) +97
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +53
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +417
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +49
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +127
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag, Int32 timeout) +97
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +53
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +373
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +88
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +50
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

我注意到，如果我使用原始代码：

```
 data: dataToSend, 
```

帖子数据在 Fiddler 中显示为：

```
[{"Date":"Fri 29 March 2013","id":"0"},{"Date":"Sat 30 March 2013","id":"1"},{"Date":"Sun 31 March 2013","id":"2"},{"Date":"Mon 1 April 2013","id":"3"},{"Date":"Tue 2 April 2013","id":"4"},{"Date":"Wed 3 April 2013","id":"5"},{"Date":"Thu 4 April 2013","id":"6"},{"Date":"Fri 5 April 2013","id":"7"},{"Date":"Sat 6 April 2013","id":"8"},{"Date":"Sun 7 April 2013","id":"9"},{"Date":"Mon 8 April 2013","id":"10"},{"Date":"Tue 9 April 2013","id":"11"},{"Date":"Wed 10 April 2013","id":"12"},{"Date":"Thu 11 April 2013","id":"13"},{"Date":"Fri 12 April 2013","id":"14"},{"Date":"Sat 13 April 2013","id":"15"},{"Date":"Sun 14 April 2013","id":"16"},{"Date":"Mon 15 April 2013","id":"17"},{"Date":"Tue 16 April 2013","id":"18"},{"Date":"Wed 17 April 2013","id":"19"},{"Date":"Thu 18 April 2013","id":"20"},{"Date":"Fri 19 April 2013","id":"21"},{"Date":"Sat 20 April 2013","id":"22"},{"Date":"Sun 21 April 2013","id":"23"},{"Date":"Mon 22 April 2013","id":"24"},{"Date":"Tue 23 April 2013","id":"25"},{"Date":"Wed 24 April 2013","id":"26"},{"Date":"Thu 25 April 2013","id":"27"},{"Date":"Fri 26 April 2013","id":"28"},{"Date":"Sat 27 April 2013","id":"29"},{"Date":"Sun 28 April 2013","id":"30"},{"Date":"Mon 29 April 2013","id":"31"},{"Date":"Tue 30 April 2013","Night":"False","Morning":"False","Afternoon":"False","Evening":"False","id":"32"}] 
```

如果使用

数据：{griddata:dataToSend}，

数据在 Fiddler 中显示为：

```
griddata=%5B%7B%22Date%22%3A%22Fri+29+March+2013%22%2C%22id%22%3A%220%22%7D%2C%7B%22Date%22%3A%22Sat+30+March+2013%22%2C%22id%22%3A%221%22%7D%2C%7B%22Date%22%3A%22Sun+31+March+2013%22%2C%22id%22%3A%222%22%7D%2C%7B%22Date%22%3A%22Mon+1+April+2013%22%2C%22id%22%3A%223%22%7D%2C%7B%22Date%22%3A%22Tue+2+April+2013%22%2C%22id%22%3A%224%22%7D%2C%7B%22Date%22%3A%22Wed+3+April+2013%22%2C%22id%22%3A%225%22%7D%2C%7B%22Date%22%3A%22Thu+4+April+2013%22%2C%22id%22%3A%226%22%7D%2C%7B%22Date%22%3A%22Fri+5+April+2013%22%2C%22id%22%3A%227%22%7D%2C%7B%22Date%22%3A%22Sat+6+April+2013%22%2C%22id%22%3A%228%22%7D%2C%7B%22Date%22%3A%22Sun+7+April+2013%22%2C%22id%22%3A%229%22%7D%2C%7B%22Date%22%3A%22Mon+8+April+2013%22%2C%22id%22%3A%2210%22%7D%2C%7B%22Date%22%3A%22Tue+9+April+2013%22%2C%22id%22%3A%2211%22%7D%2C%7B%22Date%22%3A%22Wed+10+April+2013%22%2C%22id%22%3A%2212%22%7D%2C%7B%22Date%22%3A%22Thu+11+April+2013%22%2C%22id%22%3A%2213%22%7D%2C%7B%22Date%22%3A%22Fri+12+April+2013%22%2C%22id%22%3A%2214%22%7D%2C%7B%22Date%22%3A%22Sat+13+April+2013%22%2C%22id%22%3A%2215%22%7D%2C%7B%22Date%22%3A%22Sun+14+April+2013%22%2C%22id%22%3A%2216%22%7D%2C%7B%22Date%22%3A%22Mon+15+April+2013%22%2C%22id%22%3A%2217%22%7D%2C%7B%22Date%22%3A%22Tue+16+April+2013%22%2C%22id%22%3A%2218%22%7D%2C%7B%22Date%22%3A%22Wed+17+April+2013%22%2C%22id%22%3A%2219%22%7D%2C%7B%22Date%22%3A%22Thu+18+April+2013%22%2C%22id%22%3A%2220%22%7D%2C%7B%22Date%22%3A%22Fri+19+April+2013%22%2C%22id%22%3A%2221%22%7D%2C%7B%22Date%22%3A%22Sat+20+April+2013%22%2C%22id%22%3A%2222%22%7D%2C%7B%22Date%22%3A%22Sun+21+April+2013%22%2C%22id%22%3A%2223%22%7D%2C%7B%22Date%22%3A%22Mon+22+April+2013%22%2C%22id%22%3A%2224%22%7D%2C%7B%22Date%22%3A%22Tue+23+April+2013%22%2C%22id%22%3A%2225%22%7D%2C%7B%22Date%22%3A%22Wed+24+April+2013%22%2C%22id%22%3A%2226%22%7D%2C%7B%22Date%22%3A%22Thu+25+April+2013%22%2C%22id%22%3A%2227%22%7D%2C%7B%22Date%22%3A%22Fri+26+April+2013%22%2C%22id%22%3A%2228%22%7D%2C%7B%22Date%22%3A%22Sat+27+April+2013%22%2C%22id%22%3A%2229%22%7D%2C%7B%22Date%22%3A%22Sun+28+April+2013%22%2C%22id%22%3A%2230%22%7D%2C%7B%22Date%22%3A%22Mon+29+April+2013%22%2C%22id%22%3A%2231%22%7D%2C%7B%22Date%22%3A%22Tue+30+April+2013%22%2C%22Night%22%3A%22False%22%2C%22Morning%22%3A%22False%22%2C%22Afternoon%22%3A%22False%22%2C%22Evening%22%3A%22False%22%2C%22id%22%3A%2232%22%7D%5D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:27:41.060

尝试像这样修改：

```
 function sendData(data) {
        var dataToSend = JSON.stringify(data);
        alert("The following data are sending to the server:\n" + dataToSend);
        $.ajax({
            type: "POST",
            url: '@Url.Action("WatchList", "Update")',
            dataType: "json",
            data: {griddata:dataToSend},
            loadonce: true,
            contentType: "application/json; charset=utf-8",
            success: function (response, textStatus, jqXHR) {
                // remove error div if exist
                $('#' + grid[0].id + '_err').remove();
                alert("Updates Complete");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                // remove error div if exist
                $('#' + grid[0].id + '_err').remove();
                // insert div with the error description before the grid
                grid.closest('div.ui-jqgrid').before(
                    '<div id="' + grid[0].id + '_err" style="max-width:' + grid[0].style.width +
                    ';"><div class="ui-state-error ui-corner-all" style="padding:0.7em;float:left;"><span class="ui-icon ui-icon-alert" ' +
                    'style="float:left; margin-right: .3em;"></span><span style="clear:left">' +
                    decodeErrorMessage(jqXHR, textStatus, errorThrown) + '</span></div><div style="clear:left"/></div>');
            }

        $("#sendAll").click(function () {
            var localGridData = grid.jqGrid('getGridParam', 'data');
            sendData(localGridData);
        });

    }; 
```

**在控制器中**：

```
public ActionResult WatchList(string griddata) { 
........
} 
```

# jsp - 如何在 JSP 中获取 HTTP post 参数

> ID：15570734
> 
> 赞同：8
> 
> 时间：2013-03-22T12:48:07.333
> 
> 标签：jsp, http-post

我是 JSP 的新手。我有一个jsp页面，其中一个参数通过http post传递给这个jsp页面。如图所示，我可以在 firebug 中看到参数。 ![在此处输入图像描述](../Images/06d5a0228ede5fff85e4f943a06e959f.png)

但是在我的页面中，当我尝试打印令牌变量时，该变量始终为空。我按如下方式打印变量：

```
 <%
        String token = request.getParameter("token");
     %> 
```

我究竟做错了什么？如何获取令牌参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T09:51:55.027

该`token`属性对我来说看起来像一个`nonce`，并且某些安全过滤器可能正在从请求对象中删除该值。

您为打印该值所做的操作是绝对正确的。我不会寻求最佳实践，但它应该有效。

检查您的代码以获取安全过滤器，看看您是否可以找出值被删除/覆盖的位置。

**看到你的 web.xml 之后**。

该值使用 POST 传递给域。请求在内部被重定向到欢迎页面并且值丢失。如果您使用 GET 传递值，则该值将被保留。

你有两个选择：

1.  创建一个直接 url 并使用帖子将值传递给它。例如：url - yourdomain.com/welcome.jsp。
2.  要求其他项目在 url 中传递参数（GET 请求）。

我已经测试了两者，它工作得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T05:31:09.657

这里有一些检查。

1) JSP 页面中带有method="post" 的表单。

```
<form name="form1" action="nextpage" method="post"> 
```

2) JSP 上的控件名称为token。像。

```
 <input type="text" name="token" value="chintan"/> 
```

3) 你得到的是提交按钮而不是按钮的意思。

```
<input type="submit" name="submit" value="submit"/> 
```

在检查了所有这些点之后。它会给你确切的错误。而且您将能够轻松修复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T13:19:09.230

根据屏幕截图，POST 请求导致[HTTP 302 响应](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)，这意味着它已被重定向。重定向基本上指示客户端在给定的 URL 上触发全新的 HTTP 请求。这不会以某种方式神奇地接管先前请求的所有请求参数。

您需要自己传递希望在重定向请求中保留的请求参数以及重定向 URL：

```
String token = request.getParameter("token");
response.sendRedirect("/CR?token=" + URLEncoder.encode(token, "UTF-8")); 
```

另一种方法是根本不执行重定向，而只是转发。这是否是正确的方法取决于问题中没有详细说明的具体功能要求。要了解差异，请仔细阅读[RequestDispatcher.forward() 与 HttpServletResponse.sendRedirect()](https://stackoverflow.com/questions/2047122/requestdispatcher-interface-vs-sendredirect/2048640#2048640)以及[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)，以了解如何正确使用 servlet 来满足此类需求。JSP 页面根本不适合这项工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T08:39:02.877

如您在图片中看到的，http 响应代码是 **[302](http://en.wikipedia.org/wiki/HTTP_302)**

这就是为什么您无法获取令牌参数的原因，因为当浏览器访问您的 jsp 页面时，它是来自重定向，而不是请求转发。

也就是说，您的浏览请求您的jsp页面没有任何参数......

您可以检查您发布的操作是否是 servlet，然后重定向到 jsp 页面????

检查您的操作代码并更改代码

```
response.sendRedirect.... 
```

到

```
request.getRequestDispacher("your jsp page path").forword(request, response) 
```

或者只是改变你的表单直接提交到jsp页面

```
<form action="your jsp page link">
...
</form> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T13:11:44.117

首选的习惯用法是使用表单中的 servlet，而不是 JSP。然后，servlet 可以稍后将 JSP 用作视图。原因之一是避免做你似乎正在做的事情：将 java 代码放在页面上，并可能将表示与逻辑混合在一起。

但是，如果您别无选择，我建议您使用 JSTL：

```
<c:forEach var="par" items="${paramValues}">
    <c:if test="${fn:startsWith(par.key, 'token')}"> 
        ${par.key} = ${par.value[0]};
    </c:if>
</c:forEach> 
```

或者在 Java 中：

```
<%@ page import = "java.util.Map" %>
<%
Map<String, String[]> parameters = request.getParameterMap();
for(String parameter : parameters.keySet()) {
    if(parameter.toLowerCase().startsWith("token")) {
        String[] values = parameters.get(parameter);
    }
}
%> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T15:37:24.090

jsp页面可以使用${param.token}打印请求参数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T13:08:46.187

你可以像这样打印

```
${param.token} 
```

这将打印值

# javascript - 这个 javascript 代码是如何工作的？

> ID：15570736
> 
> 赞同：1
> 
> 时间：2013-03-22T12:48:13.500
> 
> 标签：javascript

```
//1  
var object1 = function(o){

   // some code

};  

//2  
var object2 = new object1({

   method1: //some code  
   method2: //some code  
   method3: //some code

});

//3

document.onkeydown=function(e){     
  var eventKey = e.keyCode || e.charCode;   
  var sel = Coverflow.selected;  
  if(eventKey == 39 || eventKey == 37) {  
        if(eventKey == 39) sel++;  
      else if(eventKey == 37) sel--;  
      sel = sel.limit(0, Coverflow.getListLength() - 1);  
      Coverflow.select(sel);
    }  
} 
```

好吧，我的问题是：

1.  创建 object1 时会发生什么， = function() 部分是什么意思？
2.  是 object2 指向 object1。该分配是否创建了继承？
3.  如果可能的话，有人可以解释 document.onkeydown() 中发生了什么。该代码用于覆盖流效果。这个函数也没有在程序的其他任何地方调用，那么它是如何执行的呢？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:55:38.273

> 创建 object1 时会发生什么， = function() 部分是什么意思？

JavaScript 中的函数是第一类对象。它们可以像任何其他函数一样被传递和分配。

> object2 是否指向 object1？该分配是否创建了继承？

No. object2 是 object1 的一个*实例*。这就像将 object1 视为类定义一样。

> 如何`document.onkeydown`被执行？

当按下某个键时，将触发一个事件。文档对象（由浏览器提供）中的代码侦听该事件并调用该函数（如果存在）。

如果您需要更多详细信息[，MDN 有一些关于事件如何工作的文档。](https://developer.mozilla.org/en-US/docs/DOM/event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:56:19.677

1 - 它是一个名为 的函数`object1`，在运行时定义，更多[在这里](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

2 - 传递给它的参数的函数的新实例（在函数声明中引用为“o”）

3 - 函数绑定到`onkeydown`事件，所以每次在文档上按下键时都会执行，更多信息[在这里](http://javascript.info/tutorial/introduction-browser-events)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:58:09.583

JavaScript 没有类的概念，但可以有类似的行为。所以我将调用可能是实例化类的对象/函数。

1.  `object1`是由构造函数定义的某种类，`function(){...}`part 是该类的构造函数。
2.  `object2`是对`object1`类实例的引用，它是通过调用`object1`具有 1 个参数的类的构造函数来实例化的，它本身就是一个对象。
3.  `onkeydown`是 DOM 对象为`keydown`事件处理程序保留的属性。一旦浏览器触发此事件，它就会由相关函数处理（如果存在）

# c# - 如何为 FluentNHibernate 映射添加 int 数组默认值

> ID：15570740
> 
> 赞同：1
> 
> 时间：2013-03-22T12:48:20.240
> 
> 标签：c#, mysql, arrays, fluent-nhibernate, hibernate-mapping

最近，我在我的 UserMap 类中添加了一个新列，以添加一个 int 数组

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Table("user");
        LazyLoad();
        Id(x => x.Id).GeneratedBy.Identity().Column("Id");
        Map(x => x.DateCreated).Column("DateCreated").Not.Nullable();
        Map(x => x.Birthday).Column("Birthday").Nullable();
        Map(x => x.HideBirthday).Column("HideBirthday").Nullable();
        Map(x => x.Name).Column("Name").Not.Nullable();
        Map(x => x.Email).Column("Email").Not.Nullable();
        Map(x => x.PassWord).Column("Password").Not.Nullable();
        Map(x => x.NotificationCounter).Column("NotificationCounter").Nullable().Default("0");
        //EMAILPRIVACY = int[]
        Map(x => x.EmailPrivacy).Column("EmailPrivacy").Nullable();
    }
} 
```

因此，我需要使用 int 数组向**EmailPrivacy列添加默认值。**

```
new int[] { 1, 2, 3, 4, 5, 6, 7 } 
```

当我添加默认值时，出现错误：

```
Map(x => x.EmailPrivacy).Column("EmailPrivacy").Nullable().Default(new int[] { 1, 2, 3, 4, 5, 6, 7 }.ToString()); 
```

错误信息：

```
Unknown column 'user0_.EmailPrivacy' in 'field list'

[MySqlException (0x80004005): Unknown column 'user0_.EmailPrivacy' in 'field list']
MySql.Data.MySqlClient.MySqlStream.ReadPacket() +383
MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int32& insertedId) +116
MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int32& insertedId) +54
MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force) +142
MySql.Data.MySqlClient.MySqlDataReader.NextResult() +1249
MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) +2214
MySql.Data.MySqlClient.MySqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +41
System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader() +12
NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd) +347
NHibernate.Loader.Loader.GetResultSet(IDbCommand st, Boolean autoDiscoverTypes, Boolean callable, RowSelection selection, ISessionImplementor session) +364
NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +425
NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +213
NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, String optionalEntityName, Object optionalIdentifier, IEntityPersister persister) +386 
```

如何添加此 int[] 默认值？

提前谢谢大家

# xml - 怎么做 仅适用于当前范围？

> ID：15570743
> 
> 赞同：0
> 
> 时间：2013-03-22T12:48:23.103
> 
> 标签：xml, xpath, xsd

好的，基本上我目前拥有的是：

XSD：

```
<?xml version="1.0"?>
<xsd:schema xmlns="test"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="test"
            elementFormDefault="qualified">

    <xsd:complexType name="fields">
        <xsd:choice minOccurs="1" maxOccurs="unbounded">
            <xsd:element name="text">
                <xsd:complexType>
                    <xsd:attribute name="id" type="xsd:string" use="required"/>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="group">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="fields" type="fields"/>
                    </xsd:sequence>
                    <xsd:attribute name="id" type="xsd:string" use="required"/>
                </xsd:complexType>
            </xsd:element>
        </xsd:choice>
    </xsd:complexType>

    <xsd:element name="root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="fields" type="fields" minOccurs="0" maxOccurs="unbounded">
                    <xsd:key name="fieldId">
                        <xsd:selector xpath=".//*"/>
                        <xsd:field xpath="@id"/>
                    </xsd:key>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

</xsd:schema> 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns="test">

    <fields>
        <text id="asd"/>
        <text id="sdf"/>
        <group id="dfg">
            <fields>
                <text id="asd"/>
                <text id="sdf"/>
            </fields>
        </group>
    </fields>

</root> 
```

显然，根据 XSD，XML 无效，因为存在重复的 ID，但问题是，我希望仅在其自己的范围内验证 id，换句话说，这应该失败：

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns="test">

    <fields>
        <text id="asd"/>
        <text id="asd"/>
    </fields>

</root> 
```

虽然这应该通过：

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns="test">

    <fields>
        <text id="asd"/>
        <group id="sdf">
            <fields>
                <text id="asd"/>
            </fields>
        </group>
    </fields>

</root> 
```

为了清楚起见，我计划在解析 XML 时将父 ID 添加到子 ID，因此我不关心嵌套 ID 是否重复，而它们不在同一范围内，因为我希望能够实现类似的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns="test">

    <fields>
        <group id="eventA_time">
            <fields>
                <text id="hour"/>
                <text id="minute"/>
                <text id="second"/>
            </fields>
        </group>
        <group id="eventB_time">
            <fields>
                <text id="hour"/>
                <text id="minute"/>
                <text id="second"/>
            </fields>
        </group>
    </fields>

</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:03:20.310

为了能够搜索相对：

**改变：**

```
<xsd:key name="fieldId">
    <xsd:selector xpath=".//*"/>
    <xsd:field xpath="@id"/>
</xsd:key> 
```

**到：**

```
<xsd:key name="fieldId">
    <xsd:selector xpath="*"/>
    <xsd:field xpath="@id"/>
</xsd:key> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:36:59.687

只需将选择器从更改`.//*`为`*`（或`text`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T14:59:02.467

由于我没有得到完全符合我需要的答案，所以我将发布一个 XSD 版本，它可以按我的需要工作，但由于某些部分被复制，仍然看起来有点难看：

```
<?xml version="1.0"?>
<xsd:schema xmlns="test"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="test"
            elementFormDefault="qualified">

    <xsd:complexType name="fields">
        <xsd:choice minOccurs="1" maxOccurs="unbounded">
            <xsd:element name="text">
                <xsd:complexType>
                    <xsd:attribute name="id" type="xsd:string" use="required"/>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="group">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="fields" type="fields" minOccurs="0" maxOccurs="unbounded">
                            <xsd:key name="innerFieldId">
                                <xsd:selector xpath="*"/>
                                <xsd:field xpath="@id"/>
                            </xsd:key>
                        </xsd:element>
                    </xsd:sequence>
                    <xsd:attribute name="id" type="xsd:string" use="required"/>
                </xsd:complexType>
            </xsd:element>
        </xsd:choice>
    </xsd:complexType>

    <xsd:element name="root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="fields" type="fields" minOccurs="0" maxOccurs="unbounded">
                    <xsd:key name="fieldId">
                        <xsd:selector xpath="*"/>
                        <xsd:field xpath="@id"/>
                    </xsd:key>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

</xsd:schema> 
```

# magento-1.7 - magento 社区 - 谷歌购物提要

> ID：15570746
> 
> 赞同：0
> 
> 时间：2013-03-22T12:48:32.540
> 
> 标签：magento-1.7, webshop, google-shopping-api

我对 Magento 社区 1.7.0.2 中的 Google 购物提要有疑问

有没有一个很好的插件可以用来构建它？通过谷歌做了一些研究，但我没有得到很好的回应。预算很低，所以免费会很棒:)

我看过 Google Shopping API，但那只是 Magento Connect 的。

感谢所有的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T13:46:00.727

我用过 Helloostore 插件，它很便宜而且很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T15:17:31.550

Magento 带有一个内置的 google feed builder。您是否正在尝试使用内置功能无法执行的特定操作？

[http://www.magentocommerce.com/knowledge-base/entry/publishing-products-to-google-content](http://www.magentocommerce.com/knowledge-base/entry/publishing-products-to-google-content)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-12T10:42:01.090

试试这个脚本它不是一个插件，而只是一个文件 [https://github.com/themestechnology/magento-google-merchant-center-shopping-feed-atom](https://github.com/themestechnology/magento-google-merchant-center-shopping-feed-atom)

# java - 代码适用于 AS7(JBoss) 但不适用于 Tomcat 7

> ID：15570749
> 
> 赞同：0
> 
> 时间：2013-03-22T12:48:34.290
> 
> 标签：java, spring, tomcat, spring-mvc

代码在 AS7(JBoss) 中有效，但在 Tomcat 7 中无效。我正在处理 Spring MVC 项目，我需要从 diff 项目中访问页眉和页脚，因此我在我的 JSP 中插入了以下代码，它在 JBoss 上运行良好但不是在tomcat7上

```
<c:import url="/webapphead.jsp" context="/common" /> 
```

这是我在tomcat中遇到的错误：

```
2013-03-22 08:46:54,942 [http-bio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Could not complete request
org.apache.jasper.JasperException: javax.servlet.ServletException: javax.servlet.jsp.JspTagException: Unable to get RequestDispatcher for Context: "/common" and URL: "/webapphead.jsp". Verify values and/or enable cross context access. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:52:26.460

你设置`crossContext`为`true`？检查[文档](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html#Common_Attributes)。

# c# - 使用 PlayStateChange 事件在 MediaPlayer 中循环播放歌曲

> ID：15570757
> 
> 赞同：0
> 
> 时间：2013-03-22T12:48:46.137
> 
> 标签：c#, winforms, media-player

我正在尝试实现将无数次循环当前歌曲的代码。

那是我的代码：

```
private void axWindowsMediaPlayer1_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
{
    if (e.newState == 8) // media ended
    {
        if (repeat)
        {
            axWindowsMediaPlayer1.Ctlcontrols.currentPosition = 0;

            //axWindowsMediaPlayer1.Ctlcontrols.previous();
            //axWindowsMediaPlayer1.Ctlcontrols.playItem(axWindowsMediaPlayer1.Ctlcontrols.currentItem);
        }
    }
} 
```

`currentPosition = 0`如果我在下一行调试代码，设置工作正常。

但是在调试之后 - 触发了新事件（事件 9（过渡），然后是事件 3（播放）），下一首歌曲开始播放！

我该如何防止这种情况发生？

基本上这就是现在发生的事情：

*   事件 8 触发（媒体结束）
*   设置位置 0
*   事件 9 触发（过渡）
*   事件 3 触发（播放中）

**编辑：**在弄乱了我的代码之后，我终于设法打破了事件更改链。

```
public bool ended = false;
public WMPLib.IWMPMedia latest_song;

private void axWindowsMediaPlayer1_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
{
    if (ended)
    {
        axWindowsMediaPlayer1.Ctlcontrols.playItem(latest_song);
        ended = false;
        return;
    }

    if (e.newState == 8) // media ended
    {
        if (repeat)
        {
            ended = true;
            latest_song = axWindowsMediaPlayer1.Ctlcontrols.currentItem;
        }
    }
} 
```

我不知道代码是否可以比这更好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:02:27.020

```
bool ended = false;
bool skipnext = false;
bool skipnextnext = false;
bool skipextra = false;

private void axWindowsMediaPlayer1_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
{
    if (ended)
    {
        skipnext = true;
        ended = false;
        axWindowsMediaPlayer1.Ctlcontrols.playItem(latest_song);
        return;
    }

    if (e.newState == 6) // buffering
    {
        skipextra = true;
    }

    if (e.newState == 8) // media ended
    {
        if (repeat)
        {
            if (currect_album.Songs.Count < 2) { return; }
            ended = true;
            latest_song = current_song;
            return;
        }
    }
    else if (e.newState == 3) // playing
    {
        // these "skips" are necessary for scenario: "repeat: on", "click: next"
        if (skipnext) { skipnext = false; skipnextnext = true; return; }
        if (skipnextnext) { skipnextnext = false; return; }
        // Buffering adds 1 more skip! Ask Microfost why ;)
        if (skipextra) { skipextra = false; return; }

        current_song = axWindowsMediaPlayer1.Ctlcontrols.currentItem;
        // your stuff
    }
} 
```

*   第一个解决方案工作了半天；）
*   第二个解决方案适用于“重复”，但如果用户单击“下一步”则不起作用
*   第三个也是最后一个（我希望）解决方案最终在需要“重复”的情况下起作用，而且如果触发了“下一个/上一个”命令，它会跳过歌曲！
*   第四版！如果缓冲启动，则添加额外的“跳过”。缓冲有点搞砸了我的代码，但现在一切正常。此外，我还添加了“播放列表中的 1 首歌曲”检查器。

PS Microsoft 编码员 - 如果你看到这篇文章 - 请添加“on_next”和“on_previous”状态！谢谢

# java - 使用 BIRT 生成报告的 Java 代码

> ID：15570758
> 
> 赞同：6
> 
> 时间：2013-03-22T12:48:46.883
> 
> 标签：java, report, birt

我有一些 XML 形式的数据，其中包含很少的记录，并且还创建了一个 RPT 文件。

那么现在，我如何调用 birt 通过传递 XML 和 RPT 作为输入参数来生成报告。

我对 BIRT 完全陌生。任何代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T13:12:05.007

从这里查看集成示例[https://wiki.eclipse.org/Integration_Examples_%28BIRT%29](https://wiki.eclipse.org/Integration_Examples_%28BIRT%29)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T13:06:38.107

试试这个：BirtEngine.java：

```
public class BirtEngine {
    private static IReportEngine birtEngine = null;
    private static Properties configProps = new Properties();
    private final static String configFile = "BirtConfig.properties";
    public static synchronized void initBirtConfig() {
        loadEngineProps();
    }
    public static synchronized IReportEngine getBirtEngine(ServletContext sc) {
        if (birtEngine == null) 
        {
            EngineConfig config = new EngineConfig();
            if( configProps != null){
                String logLevel = configProps.getProperty("logLevel");
                Level level = Level.OFF;
                if ("SEVERE".equalsIgnoreCase(logLevel)) 
                {
                    level = Level.SEVERE;
                } else if ("WARNING".equalsIgnoreCase(logLevel))
                {
                    level = Level.WARNING;
                } else if ("INFO".equalsIgnoreCase(logLevel)) 
                {
                    level = Level.INFO;
                } else if ("CONFIG".equalsIgnoreCase(logLevel))
                {
                    level = Level.CONFIG;
                } else if ("FINE".equalsIgnoreCase(logLevel)) 
                {
                    level = Level.FINE;
                } else if ("FINER".equalsIgnoreCase(logLevel)) 
                {
                    level = Level.FINER;
                } else if ("FINEST".equalsIgnoreCase(logLevel)) 
                {
                    level = Level.FINEST;
                } else if ("OFF".equalsIgnoreCase(logLevel)) 
                {
                    level = Level.OFF;
                }

                config.setLogConfig(configProps.getProperty("logDirectory"), level);
            }

            config.setEngineHome("");
            IPlatformContext context = new PlatformServletContext( sc );
            //IPlatformContext context = new PlatformFileContext();
            config.setPlatformContext( context );
            //Create the report engine
            //birtEngine = new ReportEngine( config );
            //ReportEngine engine = new ReportEngine( null );
            try
            {
                Platform.startup( config );
            }
            catch ( BirtException e )
            {
                e.printStackTrace( );
            }
            IReportEngineFactory factory = (IReportEngineFactory) Platform
            .createFactoryObject( IReportEngineFactory.EXTENSION_REPORT_ENGINE_FACTORY );
            birtEngine = factory.createReportEngine( config );
        }
        return birtEngine;
    }
    public static synchronized void destroyBirtEngine() {
        if (birtEngine == null) {
            return;
        }       
        birtEngine.destroy();
        Platform.shutdown();
        birtEngine = null;
    }
    public Object clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException();
    }
    private static void loadEngineProps() {
        try {
            //Config File must be in classpath
            ClassLoader cl = Thread.currentThread ().getContextClassLoader();
            InputStream in = null;
            in = cl.getResourceAsStream (configFile);
            configProps.load(in);
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

webreport.java：

```
public class WebReport extends HttpServlet {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    /**
     * Constructor of the object.
     */
    private IReportEngine birtReportEngine = null;
    protected static Logger logger = Logger.getLogger( "org.eclipse.birt" );
    public WebReport() {
        super();
    }
    /**
     * Destruction of the servlet. <br>
     */
    public void destroy() {
        super.destroy(); 
        BirtEngine.destroyBirtEngine();
    }
    /**
     * The doGet method of the servlet. <br>
     *
     */
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        //get report name and launch the engine
        //resp.setContentType("text/html");
        //resp.setContentType( "application/pdf" ); 
        resp.setContentType( "application/msword" ); 
        //resp.setHeader ("Content-Disposition","inline; filename=test.pdf");   
        resp.setHeader("Content-disposition","attachment; filename=\"" +"test.doc" +"\"");
        String reportName = req.getParameter("ReportName");
        ServletContext sc = req.getSession().getServletContext();
        this.birtReportEngine = BirtEngine.getBirtEngine(sc);
        IReportRunnable design;
        try
        {
            //Open report design
            design = birtReportEngine.openReportDesign( sc.getRealPath("/Reports")+"/"+reportName );
            //create task to run and render report
            IRunAndRenderTask task = birtReportEngine.createRunAndRenderTask( design );     
            task.getAppContext().put(EngineConstants.APPCONTEXT_CLASSLOADER_KEY, WebReport.class.getClassLoader()); 
            task.getAppContext().put("BIRT_VIEWER_HTTPSERVLET_REQUEST", req );          
            //set output options
            //HTMLRenderOption options = new HTMLRenderOption();
            //options.setOutputFormat(HTMLRenderOption.OUTPUT_FORMAT_HTML);
            //options.setOutputStream(resp.getOutputStream());
            //options.setImageHandler(new HTMLServerImageHandler());
            //options.setBaseImageURL(req.getContextPath()+"/images");
            //options.setImageDirectory(sc.getRealPath("/images"));
            /*PDFRenderOption options = new PDFRenderOption();
            options.setOutputFormat(HTMLRenderOption.OUTPUT_FORMAT_PDF);    
            options.setOutputStream(resp.getOutputStream());
            */
            RenderOption options = new RenderOption();  
            options.setOutputFormat("doc");
            options.setOutputStream(resp.getOutputStream());
            //options.setEnableAgentStyleEngine(true);
            //options.setEnableInlineStyle(true);
            task.setRenderOption(options);
            //run report
            task.run();
            task.close();
        }catch (Exception e){
        e.printStackTrace();
            throw new ServletException( e );
        }
    }
    /**
     * The doPost method of the servlet. <br>
     *
     */
    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">");
        out.println("<HTML>");
        out.println("  <HEAD><TITLE>A Servlet</TITLE></HEAD>");
        out.println("  <BODY>");
        out.println(" Post Not Supported");
        out.println("  </BODY>");
        out.println("</HTML>");
        out.flush();
        out.close();
    }
    /**
     * Initialization of the servlet. <br>
     *
     * @throws ServletException if an error occure
     */
    public void init(ServletConfig sc) throws ServletException {
        BirtEngine.initBirtConfig();
        this.birtReportEngine = BirtEngine.getBirtEngine(sc.getServletContext());
    }
} 
```

birtconfig 属性：

```
ogDirectory=c:/temp
logLevel=FINEST 
```

# mysql - 如何在mysql中有效地创建索引

> ID：15570760
> 
> 赞同：0
> 
> 时间：2013-03-22T12:48:50.747
> 
> 标签：mysql, database, indexing

我想在`Id`我的表上创建一个索引。这是一个`bigint`。

我想知道拥有此索引的最佳方法是什么，以便我可以尽快检索数据。

例如 ：
`CREATE INDEX id_index ON lookup (id) USING BTREE;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:55:55.957

恕我直言，你想多了。碰巧 InnoDB 和 MyISAM 表只支持 BTREE 索引。如果你有`MEMORY` 表，你可以创建索引`USING HASH`，但这可能是一个普通的表。

```
 CREATE INDEX id_index ON lookup (id); 
```

得到你想要的。

# visual-studio-2012 - ReSharper 试用期到期后恢复智能感知

> ID：15570766
> 
> 赞同：13
> 
> 时间：2013-03-22T12:49:13.587
> 
> 标签：visual-studio-2012, intellisense

我有一个 ReSharper 的 C# 许可证，不久前 Jetbarins 给了我一个许可证密钥，用于 ReSharper 完整的 30 天试用。这已经过期了，我又回到了 ReSharper C#，结果完全失去了 VB 智能感知。

如何从 Visual Studio 中恢复正常的 VB.Net 智能感知？有没有办法在不重置所有 Visual Studio 设置的情况下做到这一点（我已经更改了许多设置，不想再重新更改它们）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-08T11:14:45.363

在我的 ReSharper 试用期到期后，我遇到了同样的问题。

解决方法是转到**Tools > Options > Text Editor > All Languages**。

然后在语句完成下，确保选中“自动列出成员”和“参数信息”（对我来说，它们被部分选中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T23:10:14.340

只是 VS2013 的更新，您可以进入工具>选项并在那里找到 Resharper 作为它自己的菜单项，然后单击暂停。

它似乎撤消了此时所做的所有更改并恢复了我的原始设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T19:28:43.317

还要考虑在大约相同的位置重新启用错误：选项 > 文本编辑器 > C# > 高级

在“编辑器帮助”部分下，重新检查：

编辑器中的错误下划线显示实时语义错误

资料来源：[http ://resharper-support.jetbrains.com/hc/en-us/articles/206104078-Visual-Studio-IntelliSense-is-broken-after-uninstalling-suspending-ReSharper](http://resharper-support.jetbrains.com/hc/en-us/articles/206104078-Visual-Studio-IntelliSense-is-broken-after-uninstalling-suspending-ReSharper)

# image - PDF 图像未在 Firefox 中显示

> ID：15570767
> 
> 赞同：1
> 
> 时间：2013-03-22T12:49:14.140
> 
> 标签：image, firefox, pdf

我已将 PDF 上传到我的网站（链接如下）。PDF 在 Chrome 和资源管理器中显示良好，但图像在 Firefox 中显示模糊。不仅是这份文件，还有网站上的每个 PDF 文件。

[http://www.pci-instruments.com/files/datasheet/50.pdf](http://www.pci-instruments.com/files/datasheet/50.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T15:41:29.847

这是 Firefox 内置查看器的问题。您需要转到**选项**->**应用程序**并将**PDF 文件**或**可移植文档格式**设置更改为**使用 Adob​​e Acrobat（在 Firefox 中）**

# dll - SDL_gfx 2.0.24 DLL 未构建，使用 MinGW

> ID：15570768
> 
> 赞同：2
> 
> 时间：2013-03-22T12:49:16.237
> 
> 标签：dll, windows-7, 64-bit, mingw, sdl

我正在为我的 64 位 Windows 7 系统设置简单直接媒体层库。基本库适用于 MinGW 和 Free Pascal，但目前我想包含 SDL_gfx 库。我发现的在线教程说，我必须为 Windows 系统构建自己的 DLL。[链接到教程。第 4a 章是关于 GFX](http://www.freepascal-meets-sdl.net/)

我按照步骤并相应地更改了makefile。但是当我在 gfx 文件夹中运行“mingw32-make”时，它会中止并显示错误消息“未定义对 'GFX_ALPHA_ADJUST_ARRAY' 的引用”。之后，此消息再次重复，但指向源代码的不同部分。然后“ld.exe”中止并显示消息“'.data' 部分中的错误重定位地址 0x0”。“collect2.exe”也失败了，因为“ld”返回 1 作为结束状态。然后makefile抱怨说“目标'SDL_gfx.dll'的配方失败”。

我拥有一台 Linux 笔记本电脑，所以我认为尝试在那里编译所有内容可能会有所帮助，但我不知道这可能有多复杂。所以基本上我征求意见该怎么做。在调试方面，我多次重新安装了整个 SDL 库并进行了测试，如果它工作正常。我安装的另一个 DLL (SDL_image.dll) 也可以正常工作。

我已经在 Internet 上查找了预编译的 DLL，但它们要么已经过时，要么适用于 32 位系统。但如果没有其他方法，这也可能是一个解决方案。我将发布 makefile 和部分源代码，其中也缺少变量。

**生成文件**

```
 CC = gcc
    AR=ar rc
    RANLIB=ranlib

    prefix=C:/
    bin_dir=$(prefix)/bin
    include_dir=$(prefix)/include
    lib_dir=$(prefix)/lib

    CFLAGS = -O3 -march=athlon-xp -mmmx -msse -m3dnow -DBUILD_DLL -IC:/MinGW/include/SDL
    LIBS = -LC:/MinGW/lib -lSDL

    OBJS = SDL_framerate.o SDL_gfxPrimitives.o SDL_imageFilter.o SDL_rotozoom.o

    STATIC_LIB=libSDL_gfx.a
    IMPORT_LIB=libSDL_gfx.dll.a
    SHARED_LIB=SDL_gfx.dll

    all: $(STATIC_LIB) $(SHARED_LIB)

    $(STATIC_LIB): $(OBJS)
    $(AR) $@ $^
    $(RANLIB) $@

    $(SHARED_LIB): $(OBJS)
gcc -s -shared -o $@ $^ -Wl,--enable-auto-import,--export-all -Wl,--out-implib=$(IMPORT_LIB) $(LIBS)

    test: $(SHARED_LIB) $(STATIC_LIB) Test/TestFramerate.exe Test/TestFonts.exe
    Test/TestGfxPrimitives.exe Test/TestImageFilter.exe Test/TestRotozoom.exe

    Test/TestFramerate.exe: Test/TestFramerate.c
gcc -c $^ -o Test/TestFramerate.o -O3 -march=athlon-xp -mmmx -msse -m3dnow -DWIN32 -Ic:/dev/local/include/SDL
gcc -o $@ Test/TestFramerate.o $(CFLAGS) -L../ -Lc:/dev/local/lib -lmingw32 -lSDLmain $(SHARED_LIB) -lSDL

    Test/TestFonts.exe: Test/TestFonts.c
gcc -c $^ -o Test/TestFonts.o -O3 -march=athlon-xp -mmmx -msse -m3dnow -DWIN32 -Ic:/dev/local/include/SDL
gcc -o $@ Test/TestFonts.o $(CFLAGS) -L../ -Lc:/dev/local/lib -lmingw32 -lSDLmain $(SHARED_LIB) -lSDL

    Test/TestGfxPrimitives.exe: Test/TestGfxPrimitives.c
gcc -c $^ -o Test/TestGfxPrimitives.o -O3 -march=athlon-xp -mmmx -msse -m3dnow -DWIN32 -Ic:/dev/local/include/SDL
gcc -o $@ Test/TestGfxPrimitives.o $(CFLAGS) -L../ -Lc:/dev/local/lib -lmingw32 -lSDLmain $(SHARED_LIB) -lSDL

    Test/TestImageFilter.exe: Test/TestImageFilter.c
gcc -c $^ -o Test/TestImageFilter.o -O3 -march=athlon-xp -mmmx -msse -m3dnow -DWIN32 -Ic:/dev/local/include/SDL
gcc -o $@ Test/TestImageFilter.o $(CFLAGS) -L../ -Lc:/dev/local/lib -lmingw32 -lSDLmain $(SHARED_LIB) -lSDL

    Test/TestRotozoom.exe: Test/TestRotozoom.c
gcc -c $^ -o Test/TestRotozoom.o -O3 -march=athlon-xp -mmmx -msse -m3dnow -DWIN32 -Ic:/dev/local/include/SDL
gcc -o $@ Test/TestRotozoom.o $(CFLAGS) -L../ -Lc:/dev/local/lib -lmingw32 -lSDLmain $(SHARED_LIB) -lSDL

    install: $(STATIC_LIB) $(SHARED_LIB)
cp $(STATIC_LIB) $(SHARED_LIB) $(IMPORT_LIB) $(lib_dir)
cp SDL_framerate.h SDL_gfxPrimitives.h SDL_imageFilter.h SDL_rotozoom.h $(include_dir)/SDL

    uninstall:
rm -f $(lib_dir)/$(STATIC_LIB)
rm -f $(lib_dir)/$(SHARED_LIB)
rm -f $(lib_dir)/$(IMPORT_LIB)
rm -f $(include_dir)/SDL/SDL_framerate.h
rm -f $(include_dir)/SDL/SDL_gfxPrimitives.h
rm -f $(include_dir)/SDL/SDL_imageFilter.h
rm -f $(include_dir)/SDL/SDL_rotozoom.h

    clean:
rm -f *.o *.a *.dll
rm -f Test/*.o Test/*.exe 
```

**来自“SDL_gfxPrimitives.c”的部分；线 435-445 和 773-785**

```
 /*435-445*/
    #ifdef ALPHA_PIXEL_ADDITIVE_BLEND
                    A = (dA | GFX_ALPHA_ADJUST_ARRAY[alpha & 255]) << Ashift; // make destination less transparent...
    #else
                    A = ((dA + ((((color & Amask) >> Ashift) - dA) * alpha >> 8)) << Ashift) & Amask;
    #endif
                    *pixel |= A;
                }
            }
        }
        break;
    #endif

    /*773-785*/
    #ifdef ALPHA_PIXEL_ADDITIVE_BLEND
                        A = (dA | GFX_ALPHA_ADJUST_ARRAY[sA & 255]) << Ashift; // make destination less transparent...
    #else
                        A = ((dA + ((sA - dA) * alpha >> 8)) << Ashift) & Amask;
    #endif
                        *pixel |= A;
                    }
                }
            }
        }
    }
    break;
    #endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:55:40.720

You should modify Makefile according to the following steps:

1. Change:

```
OBJS = SDL_framerate.o SDL_gfxPrimitives.o SDL_imageFilter.o SDL_rotozoom.o

To:

OBJS = SDL_framerate.o SDL_gfxBlitFunc.o SDL_gfxPrimitives.o SDL_imageFilter.o SDL_rotozoom.o 
```

2. Change:

```
cp SDL_framerate.h SDL_gfxPrimitives.h SDL_imageFilter.h SDL_rotozoom.h $(include_dir)/SDL 
```

To:

```
cp SDL_framerate.h SDL_gfxBlitFunc.h SDL_gfxPrimitives.h SDL_imageFilter.h SDL_rotozoom.h $(include_dir)/SDL 
```

3. Add: `rm -f $(include_dir)/SDL/SDL_gfxBlitFunc.h`

Between

```
rm -f $(include_dir)/SDL/SDL_framerate.h 
```

And

```
rm -f $(include_dir)/SDL/SDL_gfxPrimitives.h 
```

# twitter - 使用 TweetSharp 在 Twitter 中获取所有关注者

> ID：15570770
> 
> 赞同：1
> 
> 时间：2013-03-22T12:49:23.717
> 
> 标签：twitter, tweetsharp

我正在尝试通过使用 TweetSharp 库来吸引所有关注者。在 twitter 的 api 中，它说我们有机会使用游标变量来进行分页，这样我们就可以获得所有关注者。

[https://dev.twitter.com/docs/api/1.1/get/followers/list](https://dev.twitter.com/docs/api/1.1/get/followers/list)

[https://dev.twitter.com/docs/misc/cursoring](https://dev.twitter.com/docs/misc/cursoring)

但是，有没有机会用 TweetSharp 做这个操作？我正在编写以下代码：

```
var options = new ListFollowersOptions { ScreenName = input };
IEnumerable<TwitterUser> friends = service.ListFollowers(options); 
```

但是，这只返回前 20 个，然后我将无法跟踪任何朋友。

如果你能帮助我，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T04:12:44.483

我在 .NET 4.0 WinForms 应用程序中使用 TweetSharp v2.3.0。这对我有用：

```
// this code assumes that your TwitterService is already properly authenticated

TwitterUser tuSelf = service.GetUserProfile(
    new GetUserProfileOptions() { IncludeEntities = false, SkipStatus = false });

ListFollowersOptions options = new ListFollowersOptions();
options.UserId = tuSelf.Id;
options.ScreenName = tuSelf.ScreenName;
options.IncludeUserEntities = true;
options.SkipStatus = false;
options.Cursor = -1;
List<TwitterUser> lstFollowers = new List<TwitterUser>();

TwitterCursorList<TwitterUser> followers = service.ListFollowers(options);

// if the API call did not succeed
if (followers == null)
{
    // handle the error
    // see service.Response and/or service.Response.Error for details
}
else
{
    while (followers.NextCursor != null)
    {
        //options.Cursor = followers.NextCursor;
        //followers = m_twService.ListFollowers(options);

        // if the API call did not succeed
        if (followers == null)
        {
            // handle the error
            // see service.Response and/or service.Response.Error for details
        }
        else
        {
            foreach (TwitterUser user in followers)
            {
                // do something with the user (I'm adding them to a List)
                lstFollowers.Add(user);
            }
        }

        // if there are more followers
        if (followers.NextCursor != null &&
            followers.NextCursor != 0)
        {
            // then advance the cursor and load the next page of results
            options.Cursor = followers.NextCursor;
            followers = service.ListFollowers(options);
        }
        // otherwise, we're done!
        else
            break;
    }
} 
```

注意：这可能被视为重复问题。（请参阅[此处](https://stackoverflow.com/questions/8743551/how-to-get-the-complete-list-of-followers "如何获取完整的关注者列表")和[此处](https://stackoverflow.com/questions/10694566/why-does-tweetsharp-always-return-only-100-followers "为什么 TweetSharp 总是只返回 100 个关注者")。）但是，这些现有问题似乎与 TweetSharp 的不同（旧？）版本有关，因为`TwitterService.ListFollowersOf()`版本 2.3.0 中没有方法。

# php - 来自 PHP 跨域的 Ajax GET 响应

> ID：15570776
> 
> 赞同：2
> 
> 时间：2013-03-22T12:49:46.927
> 
> 标签：php, jquery, ajax

试图从另一个域上的 php 获得响应，我添加了 datatype:"jsonp" 但我认为服务器需要更改。接收响应的格式如下：

响应=1

```
 $.ajax({
                type: "GET",
                dataType : "jsonp",
                data: "email="+emailaddress+"&country="+'DE'+"&lang="+lang+"&source="+'Aufrufzeitpunkt',
                url: "promo_getstate.php",
            }).done(function(data){
                var obj = $.parseJSON(data);
                console.log(obj);

            }); 
```

在 chrome 中，我收到以下消息：资源解释为脚本，但使用 MIME 类型文本/html 传输：

我在 Firefox 中没有收到任何消息

无论如何我可以解决这个问题而无需更改服务器上的任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:56:29.003

尝试

```
$.get("promo_getstate.php",{
    email:emailaddress,
    country:'DE',
    lang:lang,
    source:'Aufrufzeitpunkt'
},function(data){
   console.log(data);
},"JSON"); 
```

# php - 与 php xml 解析器一起使用的两个字符串之间

> ID：15570778
> 
> 赞同：0
> 
> 时间：2013-03-22T12:49:49.433
> 
> 标签：php, xml, string

```
<title><![CDATA[ hello
    ]]></title>
          <link>http://www.google.com</link>
          <description><img class="img" src="http://google.com/a.jpg" alt="" /></a>]]></description>
    <title><![CDATA[ good
    ]]></title>
          <link>http://www.google.com</link>
          <description><img class="img" src="http://google.com/b.jpg" /></a>]]></description>
    <title><![CDATA[ world
    ]]></title>
          <link>http://www.google.com</link>
          <description><img class="img" src="http://google.com/c.jpg" alt="" /></a>]]></description> 
```

我想复制之间的文本**`<![CDATA[`**，**`]]>`**然后将它们粘贴到**alt**属性中。

上面的例子应该是；

```
<title><![CDATA[ hello
    ]]></title>
          <link>http://www.google.com</link>
          <description><img class="img" src="http://google.com/a.jpg" alt="hello" /></a>]]></description>
    <title><![CDATA[ good
    ]]></title>
          <link>http://www.google.com</link>
          <description><img class="img" src="http://google.com/b.jpg" /></a>]]></description>
    <title><![CDATA[ world
    ]]></title>
          <link>http://www.google.com</link>
          <description><img class="img" src="http://google.com/c.jpg" alt="world" /></a>]]></description> 
```

可能吗？如果可能的话，怎么做才合理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T16:58:19.880

您可以删除`htmlspecialchars`它只是为了测试目的。正如@michi 所说，您需要有效的xml。每个组应该在一个块容器中例如`<example>stuff </example>`如下

**测试数据**

```
<?php
$testdata = <<<XML
<?xml version='1.0'?> 
<test>

<example>
<title><![CDATA[ example 1]]></title>
          <link>http://www.example1.com</link>
          <description><![CDATA[ <img class="img" src="http://google.com/a.jpg" alt="" /></a>]]></description>
</example>

<example>
    <title><![CDATA[ example 2]]></title>
          <link>http://www.example2.com</link>
          <description><![CDATA[ <img class="img" src="http://google.com/b.jpg" /></a>]]></description>

       </example>

       <example>   
    <title><![CDATA[ example 3 ]]></title>
          <link>http://www.example3.com</link>
          <description><![CDATA[ <img class="img" src="http://google.com/c.jpg" alt="" /></a>]]></description>

          </example>

</test>
XML; 
```

**输出代码**

```
$xml = simplexml_load_string($testdata, 'SimpleXMLElement', LIBXML_NOCDATA);

foreach ($xml->example as $v){ 

 // find and replace alt
 $img = str_replace( 'alt=""','', $v->description);
 $img = str_replace( '<img','<img alt="'.$v->title.'"', $img);

echo htmlspecialchars(
'
<example>  
    <title><![CDATA[ '.$v->title.']]></title>
    <link>'.$v->link.'</link>
    <description><![CDATA[ '.$img.'</a>]]></description>
</example>
');
 }
?> 
```

# ruby-on-rails - 这个助手是如何工作的？

> ID：15570781
> 
> 赞同：0
> 
> 时间：2013-03-22T12:49:55.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3

楷模：

```
 Group:
 has_many :booth_marketing_messages, :dependent => :destroy

 Booth Marketing Message:
 belongs_to :group 
```

路线：

```
 resources :groups do
      member do
       get :get_group_links
        get :booth_marketing_messages
       end
      resources :booth_marketing_messages do
         member do
           match :toggle_activation
         end
      end
    end 
```

为了创建新的展位营销信息，我有以下看法：

```
 <% form_for :asset, :url => (defined?(msg) ? group_booth_marketing_message_path(msg) :        
       group_booth_marketing_messages_path), :html => { :multipart => true, :method => 
      (defined?(msg) && msg ? :put : :post) } do |f| -%>
             ....... 
```

当我运行 rake 路线时：

```
 booth_marketing_messages_group GET  /groups/:id/booth_marketing_messages(.:format)                                        
     {:action=>"booth_marketing_messages", :controller=>"groups"}

      group_booth_marketing_messages GET 
     /groups/:group_id/booth_marketing_messages(.:format)                                  
     {:action=>"index", :controller=>"booth_marketing_messages"} 
```

但是我的展位营销消息控制器没有索引操作。是的，这条路线不会失败，那是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:18:35.300

您已将路线编写为

```
resources :booth_marketing_messages do
     member do
       match :toggle_activation
     end
  end 
```

因此，无论控制器中提到的任何操作或即使没有控制器，它都会创建索引、新建、创建、更新、销毁、编辑和显示等基本路由。

但是，当您转到该网址时，您将收到未找到操作错误或控制器不存在的错误。

因此，如果您想避免或不想使用默认路由，则只能在路由中使用，例如在路由中除外。

```
resources :products, only: [:new] 
```

这将为仅新操作和

```
resources :products, except: [:new] 
```

这将创建除新操作之外的所有路由

希望这能让你清楚

# jquery - Wijmo Dialog的高级定位

> ID：15570782
> 
> 赞同：0
> 
> 时间：2013-03-22T12:49:57.203
> 
> 标签：jquery, wijmo

我正在尝试将 Wijmo 对话框定位在中心位置，但我的页面中间有一个水平拆分器，这涵盖了我的对话框的一部分。

因此，我希望将小部件放置在顶部中心，比如页面的中上部。

例如，我想做以下事情：

*   宽度：40%
*   左边距：30%
*   右边距：30%
*   高度：300 像素
*   保证金最高：20%

Wijmo 如何做到这一点？是否有任何图书馆可以使这项任务更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:59:12.837

正确定位 Wijmo 对象的正确解决方案是使用 JQuery 定位功能放置它们，如下所示：

```
 $('#configurationFormSubmissionDialog').wijdialog(
    captionButtons: {
    pin: {visible: false }
    refresh: {visible: false}
    toggle: {visible: false }
    minimize: {visible: false }
    maximize: {visible: false }
    close: {visible: false }
    }
    resizable: false,
    title: "An error has occurred"
    modal: true
    zIndex: 0
    position:
      my: 'center'
      at: 'center'
      of: $('#configuration-tab')
  ) 
```

# android - 当应用程序强制从设置中停止时，Android 通知不显示

> ID：15570788
> 
> 赞同：6
> 
> 时间：2013-03-22T12:50:13.760
> 
> 标签：android, notifications, broadcastreceiver, alarmmanager

请在下面找到我的项目中发布的问题之一的描述。

“一个用户刚刚向我的客户报告说，当应用程序硬关闭（强制停止）时，她没有收到 Android 通知。我刚刚对此进行了测试，可以确认应用程序硬关闭时没有收到通知（但是“如果应用程序在后台，则会收到通知）。您能确认预期的行为吗？我已经与我们的一位 Android 开发人员讨论过这个问题，他说无论应用程序是硬关闭还是软关闭，都应该始终收到通知。”

请让我知道这是 android 中的预期行为吗？

如果是，请向我提供有关此的一些详细信息。

或者

如果有可能解决这个问题，请给我一些样品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:08:18.420

[读这个](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)。强制停止后，您的应用将不会收到任何通知。在用户手动启动它（通过启动器/意图/等）之前，它完全死了。

# windows-phone-7 - 如何在 Windows 手机应用程序中实现错误记录？

> ID：15570795
> 
> 赞同：8
> 
> 时间：2013-03-22T12:50:31.167
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone-7.1.1

您好我正在开发一个 Windows Phone 应用程序。

我想在我的应用程序中实现错误日志记录。我想以更好的方式处理错误日志。

*   如何记录错误信息（以便开发人员纠正错误）

*   是否有任何 3rd 方工具/免费库用于在 Metro 应用程序中记录错误。

*   可用于错误记录的各种替代方法是什么？

*   错误记录的最佳实践是什么？

请帮帮我。

你的回答对我很有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:22:50.817

首先，一些可能导致应用程序问题的错误会通过开发中心记录下来，因此当您发布应用程序时，您会收到报告，显示发生了哪些异常导致崩溃。

在正常情况下，您可以在您的终端上运行一个 Web 服务，该服务将在发生这些异常时接收有关非关键异常的信息（解决电话可能并不总是连接到网络的事实 - 序列化异常堆栈跟踪和连接时发送，如另一个答案所示）。

对于错误记录，有一个名为[WPClogger](http://wpclogger.codeplex.com/)的项目。对于更严肃的报告和分析，有[BugSense](http://www.bugsense.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:30:44.087

1）有时我只是将 Exception.ToString() 保存在本地数据库中，当 WP 有互联网连接时，我发送了该数据。

2, 3 & 4) [mtiks](http://go.microsoft.com/?linkid=9810133)为包括 Windows Phone 在内的主要移动平台提供了易于实施的实时移动应用程序分析。应用程序发布者可以在几分钟内集成该框架，以使用不同的报告和图表了解他们的应用程序使用情况。功能包括错误跟踪、事件、带有属性的事件等。此外，mtiks 为 Windows Phone 提供了一个配套应用程序来监控活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T16:52:31.140

> 是否有任何 3rd 方工具/免费库用于在 Metro 应用程序中记录错误。

首先 - 查看免费的[MetroLog](https://github.com/mbrit/metrolog)库。

> 可用于错误记录的各种替代方法是什么？

如果你觉得你已经准备好更多关于日志的东西，我可以推荐[Sentry](https://getsentry.com)服务。他们有免费的“试用”订阅计划，包含 7 天的历史记录和每天 250 个事件的限制——这对于个人“宠物”项目和任何成熟应用程序的良好启动选择可能已经足够了。虽然他们确实有[.NET 客户端库](https://github.com/getsentry/raven-csharp)，但上次我检查它时，我最终对这个库源代码进行了一些小的修改，以使其可用于 Windows 商店/电话应用程序（如命名空间重命名或类似的微不足道的东西），但现在情况可能会好一些。

# jquery - 在 jQuery Mobile 中使用 Zepto

> ID：15570796
> 
> 赞同：3
> 
> 时间：2013-03-22T12:50:53.847
> 
> 标签：jquery, jquery-mobile, zepto

到目前为止，我一直将标准 jQuery 库与 jQuery mobile 结合使用来进行移动 Web 开发。我最近偶然发现了 Zepto 库，它承诺几乎相同的功能，而代码却少得多。我试图用 Zepto.js 库简单地替换我的一个页面中的 jQuery 库，但这似乎不起作用。有什么方法可以组合这两个库而不必对现有代码进行重大重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T06:44:13.403

一些评论试图指出，如果您想使用 Zepto 而不是 jQuery，因为您担心应用程序的大小，那么也许您还应该考虑 jQuery mobile 的替代品，就像 jQuery 是一个更大的库一样。当然，它有更多的选项和布局，但要付出一定的代价。

如果你想节省大小，你应该瞄准所有的库，尤其是最大的库（你可以节省最多的地方）。jQuery mobile 缩小了大约 140kb。

考虑到大小，jQuery 移动构建有一些替代方案：

*   [zepto-page-transitions](https://github.com/dgileadi/zepto-page-transitions) 7kb，仅实现转换（我认为它没有布局或界面元素）
*   [jQTouch](http://jqtjs.com/) 9kb，似乎实现了很多像 jQuery mobile 这样的 ui 选项。

注意：我没有包括 css 或图像大小。

# javascript - 嵌套动态对象

> ID：15570797
> 
> 赞同：0
> 
> 时间：2013-03-22T12:51:01.610
> 
> 标签：javascript, object

我一直有这个问题，我只是没有实施正确的技术。它有点具体，所以到目前为止我在网上很难找到解释。好的，这里是：

我正在循环一个大的 json 对象并创建第二个对象，其中包含我以后要使用的信息的对象。

```
items = {};
$(data).each(function () {
    i = 0;
    $(list).each(function () {
        if (list[i]["name"] === category) {
            add = false;
        }
        i++;
    });
    if (add === true) {
        list.push({name: category,info: 0, items: items});
    } 
```

我的问题是，当我尝试将项目添加到特定类别中的项目时，它会将其添加到所有类别，所以：

```
list[0]["items"]["msg"] = "Test"; 
```

将测试添加到我的所有类别对象，而不仅仅是第一个。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:07:47.270

> 将测试添加到我的所有类别对象，而不仅仅是第一个。谁能告诉我为什么？

它将`msg`属性添加到*单个* `items`对象，该对象是列表中所有对象的引用。如果您想要独特的对象，请使用

```
 list.push({name: category,info: 0, items: {}}); 
```

反而。

# dart - 是否有显示表单功能的飞镖教程？

> ID：15570798
> 
> 赞同：2
> 
> 时间：2013-03-22T12:51:03.550
> 
> 标签：dart, dart-webui

我正在寻找与[angular.js](http://docs.angularjs.org/guide/forms)类似的飞镖教程。有没有人有这样一个教程的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:01:00.650

这一个为您提供了如何从表单元素中获取输入并绑定到输入的数据的示例： [http ://www.dartlang.org/articles/web-ui/](http://www.dartlang.org/articles/web-ui/)

# spring - 使用带有 Spring 缓存的构造函数参数：注解驱动

> ID：15570799
> 
> 赞同：2
> 
> 时间：2013-03-22T12:51:07.927
> 
> 标签：spring, spring-annotations

当我将**cache:annotation-driven**添加到我的应用程序上下文时，我收到以下异常：

```
Superclass has no null constructors but no arguments were given 
```

我有一个名为**PersistController**的类，它**有用 @Cachable(..)**注释的方法，我在应用程序上下文中声明一个实例，如下所示：

```
<!-- The culprit, for whatever reason -->
<cache:annotation-driven />

<bean id="cacheManager" class="org.springframework.cache.support.SimpleCacheManager">
    <property name="caches">
        <set>
            <bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" p:name="primaryTest"/>
            <bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" p:name="secondaryTest"/>
        </set>
    </property>
</bean>

<!-- The problem began when I started requiring a String in the constructor. -->
<bean id="persistController" class="com.sei.poc.controller.PersistController" >
    <constructor-arg> <value>${cache.nextVersionPostfix}</value></constructor-arg>  
</bean> 
```

当我删除**cache:annotation-driven**行时，错误消失了，而是收到一个错误，表明带注释的缓存组件不工作（显然）。这意味着上面声明的**PersistController**已正确声明，并且 Spring 完全能够调用正确的构造函数、解析属性并将字符串作为参数注入。

那么为什么我添加**cache:annotation-driven**时出现错误？

我相信这与 Spring 使用**@Cacheable(..)**或任何 Spring 缓存注释自动实例化类的实例有关。如果是这种情况，我想知道是否有一种方法可以将我的属性指定为其构造中的参数。

如果我不能为这些类声明构造函数，（如果你知道答案，我会假设你比我更了解 spring-context-flow）将**@Autowired**或**@Value(..)**注释允许生成的类检测财产？

谢谢大家的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:04:59.797

我已经找到了问题第二部分的答案，即当 spring 使用**cache:annotation-driven**加载类时是否解决了**@Value()**注释。

 **答案是肯定的，我在**PersistController**中添加了以下行，问题已解决：

```
@Value("${cache.currentVersionPostfix}")
private String keyPostfix; 
```

我仍然不确定是否可以在加载了**cache:annotation-driven**的构造函数中提供参数。话虽如此，我将推迟接受这个作为答案，并接受一个回答这个问题的答案。**

# sql - 在表1中查找表2中不存在的记录并返回所有字段

> ID：15570800
> 
> 赞同：3
> 
> 时间：2013-03-22T12:51:12.537
> 
> 标签：sql, sql-server, sql-server-2008, join

我有两张这样的桌子

```
+------+-------+------+------+---------+
| NAME |SURNAME|DEPART| POST |EMPLOYEE#|
+------+-------+------+------+---------+
| JACK | LONDON| 111  |WRITER| 12345678|
|......|.......|......|......|.........|
+------+-------+------+------+---------+ 
```

和

```
+------+-------+------+------+---------+
| NAME |SURNAME|DEPART| POST |  LOGIN  |
+------+-------+------+------+---------+
| MARK | TWAIN | 222  |WRITER| MTWAIN  |
|......|.......|......|......|.........|
+------+-------+------+------+---------+ 
```

我需要在表 1 中找到表 2 中不存在的记录，并返回此类记录的所有字段。

我使用这样的代码...

```
SELECT name,depart FROM tb1 EXCEPT SELECT name,depart FROM table2 
```

正如预期的那样，结果只有 2 个字段 NAME，DEPART。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T12:52:51.387

基本上，您可以使用`LEFT JOIN`它。当 on 的记录在`Table1`上找不到任何匹配项时`Table2`，on 列的值的结果`Table2`将为*NULL*，因此要过滤掉不匹配的值，请添加一个检查table2 上的*NULL值的条件。*

```
SELECT  a.*
FROM    Table1 a
        LEFT JOIN Table2 b
            ON a.name = b.name AND
                a.depart = b.depart
WHERE   b.Name IS NULL 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:59:39.497

假设姓名、姓氏和出发地足以唯一识别人员，请尝试：

```
select t1.*
from tb1 t1
where not exists
(select 1
 from table2 t2
 where t1.name = t2.name and 
       t1.surname = t2.surname and 
       t1.depart = t2.depart) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T09:45:23.900

```
select *
from tb1
minus
select *
from tb2 
```

# c - 在 rollDice 函数中调用 srand(time(NULL)) 时出现问题

> ID：15570803
> 
> 赞同：3
> 
> 时间：2013-03-22T12:51:19.550
> 
> 标签：c, random, srand

当我第一次 `srand(time(NULL))`在`rollDice()`功能中使用它时它不起作用。但是当我把它放在 main 中时，它可以工作。这是为什么？你能告诉我其中的逻辑吗？

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

int rollDice(void) {
    return (1+rand()%6) + (1+rand()%6);
}
int main(void) {
    int roll;
    srand(time(NULL));          
    roll = rollDice();
    printf("You rolled %d.\n", roll);

    enum Gamestatus {WON,LOST,CONTINUE};
    enum Gamestatus status;

    while(status==CONTINUE){
        printf("You are rolling again: \n");
        printf("You rolled %d\n", roll = rollDice());

        if (targetPoint==roll){
            printf("You win!");
            status=WON;
        }
        else if(7==roll){
            printf("You lost!");
            status=LOST;
        }
        else
            status=CONTINUE;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T13:10:28.163

假设您有数百万本书，其中包含一排排随机数。在获得随机数之前，您需要选择一本书。

拿到书后，要获得随机数，请从书中顺序读取数字。换书会得到另一个随机数序列。
***更改为同一本书会从书中*的第一个数字重新开始序列。**

`srand()`选择一本书并从头开始随机数从
`rand()`所选书中读取下一个数字

如果你放入`srand()`循环中，你实际上是从同一本书的开头重新开始随机数序列。

**解决方案：选择一本书一次，并一直阅读其中的数字。**

*在 C 程序中，如果您不“选择一本书”，则随机数来自第一本书*，或者换句话说，*在没有`srand()`调用的情况下，该函数的`rand()`行为就像`srand(1)`被调用了一样。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T12:54:06.057

当您在`rollDice`函数内进行播种然后在循环中调用此函数时，不仅您播种的频率比您应该做的要多，而且循环速度如此之快，以至于您使用相同的值（相同时间）播种这会[`rand()`](http://linux.die.net/man/3/rand)返回相同的值：

> *该[`srand()`](http://linux.die.net/man/3/srand)函数将其参数设置为由 . 返回的新伪随机整数序列的种子。这些序列可以通过使用相同的种子值[`rand()`](http://linux.die.net/man/3/rand)调用来重复。[`srand()`](http://linux.die.net/man/3/srand)*

经验法则：***只播种一次。***

值得看看以前解决这个问题的问题：
[srand(time(NULL)) 没有足够快地改变种子值](https://stackoverflow.com/q/5574914/1168156)
[rand() srand 函数给出的重复数字总是](https://stackoverflow.com/q/4859089/1168156)
[返回相同的值](https://stackoverflow.com/q/14494375/1168156)等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:55:39.497

问题是 srand() 函数正在为随机数生成器播种，而您正在使用当前时间播种它，其分辨率为 1 秒。因此，当您从 rollDICE() 函数内部调用 srand() 时，在同一秒内发生的每次调用都会从 rand() 获得完全相同的结果。当第二个滴答作响时，您将得到与 rand() 不同的结果。

在 main 中调用 srand() 意味着在开始滚动之前只调用一次，然后 rand() 将返回一个随机数序列。

# jquery - 当用户单击或将文本框悬停在网格视图内时，我需要将复选框列表显示为文本框下方的框

> ID：15570806
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:51:23.633
> 
> 标签：jquery, asp.net, gridview, checkboxlist

当用户单击或将文本框悬停在网格视图内时，我需要将复选框列表显示为文本框下方的框。如果您遇到类似问题，请提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:02:25.090

在脚本中添加这个

```
 <script type="text/javascript">
           $(document).ready(function () {
              $("#txtbox").click(function () {

                  $("#checkboxDiv").css("display", "block");
              });
          })
 </script> 
```

在html中添加这个

```
<div>
    <input type="text" id="txtbox" name="txtbox"/>
</div>

<div style="display:none" id="checkboxDiv">
  <input type="checkbox" name="vehicle" value="Bike">I have a bike<br>
  <input type="checkbox" name="vehicle" value="Car">I have a car 
</div> 
```

不要忘记在您的页面上添加 jquary.min.js

# jquery - jQuery DataTables - 如何让它工作？

> ID：15570811
> 
> 赞同：1
> 
> 时间：2013-03-22T12:51:46.830
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, datatables

我正在尝试在我的 MVC 4 应用程序中实现 jQuery DataTables。通过阅读几篇文章，我被引导相信它很简单：

![在此处输入图像描述](../Images/2fa2fc67d2693946952c0adb0a14a13a.png)

但是，我发现这并不那么容易。例如，我读过 HTML 表格必须是正确格式的表格（不是 MVC 脚手架创建的）。我不完全确定格式正确的表格是什么，以及使 DataTables 正常工作还需要什么。

有人可以总结所有必须正常工作才能使 DataTables 正常工作的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:01:37.713

DataTable 需要`<th></th>`为每个表列添加标签。并且`<table>`标签需要设置**class="dataTable"**。`dataTable.css`应该链接。这些应该使 dataTable 工作。

```
 $(document).ready(function(){
   $('#example').dataTable();
 }); 
```

应在从服务器获取数据后进行初始化。

# c# - 在 C# 中将日期和时间字符串转换为 DateTime

> ID：15570812
> 
> 赞同：4
> 
> 时间：2013-03-22T12:51:50.530
> 
> 标签：c#, datetime, converter

我有以以下格式显示日期和时间的字符串：

2013 年 1 月 3 日星期四 15:04:29

我如何将其转换为 DateTime？我试过了：

```
string strDateStarted = "Thu Jan 03 15:04:29 2013"
DateTime datDateStarted = Convert.ToDateTime(strDateStarted); 
```

但这不起作用。在我的程序中，此值是从日志文件中读取的，因此我无法更改文本字符串的格式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T12:54:07.150

使用上`*Parse*`定义的方法之一`DateTime`。

要么 要么`TryParseExact`将`ParseExact`采用与日期字符串相对应的格式字符串。

我建议阅读[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)。

在这种情况下，相应的格式字符串将是：

```
"ddd MMM dd HH:mm:ss yyyy" 
```

要使用的：

```
DateTime.ParseExact("Thu Jan 03 15:04:29 2013", 
                    "ddd MMM dd HH:mm:ss yyyy", 
                    CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:53:11.873

尝试使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx).

在您的情况下，[指定的格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)应为：

```
Thu Jan 03 15:04:29 2013 
```

并且调用应该如下所示：

```
DateTime logDate = DateTime.ParseExact(logValue, "ddd MMM dd HH:mm:ss yyyy",
                                     CultureInfo.CreateSpecificCulture("en-US")); 
```

第三个参数设置为美国文化，使`ddd`和`MMM`部分分别对应`Thu`和`Jan`。

* * *

在这种情况下，由于数据的来源，我建议使用`ParseExact`而不是。`TryParseExact`如果您正在解析用户输入，请始终使用`TryParseExact`，因为您不能相信用户遵循了请求的格式。但是，在这种情况下，源是具有明确定义格式的文件，因此任何无效数据都应视为异常，因为它们是异常的。

另请注意，`*ParseExact`方法非常无情。如果数据不完全符合指定的格式，则将其视为错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T13:01:52.700

使用以下代码：

```
string strDateStarted = "Thu Jan 03 15:04:29 2013";           
DateTime datDateStarted;
DateTime.TryParseExact(strDateStarted, new string[] { "ddd MMM dd HH:mm:ss yyyy" }, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out datDateStarted);
Console.WriteLine(datDateStarted); 
```

并确定时间是否为 24 HRS 格式，然后使用 HH。[更多细节](http://projects.gnome.org/gnumeric/doc/number-formatting-overview.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:53:57.703

看看[DateTime.TryParse()](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:57:00.690

```
string yourDateTimeRepresentation = "R"; //for example
DateTime dt = DateTime.ParseExact(strDateStarted , yourDateTimeRepresentation , System.Globalization.CultureInfo.CurrentCulture); 
```

# python - Couchdbkit 中的元组

> ID：15570814
> 
> 赞同：0
> 
> 时间：2013-03-22T12:52:01.303
> 
> 标签：python, couchdb, tuples, couchdbkit

我需要将 EXIF 数据保存到 couchdb。这是一个不同变量类型（str、list、int ...）的字典。列表也可以有不同的类型。我在将元组存储到 couchdbkit 时遇到问题。ALLOWED_PROPERTY_TYPES 中不存在此类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:59:27.293

我准备了将所有元组替换为列表的递归函数：

```
def _tuple_to_list(self, el):

    if type(el) is tuple:
        el = self._tuple_to_list(list(el))
    elif type(el) is dict:
        for (key, value) in el.items():
            el[key] = self._tuple_to_list(value)
    elif type(el) is list:
        for i in range(len(el)):
            el[i] = self._tuple_to_list(el[i])

    return el 
```

# javascript - 使用 JQuery 创建按钮

> ID：15570818
> 
> 赞同：1
> 
> 时间：2013-03-22T12:52:06.930
> 
> 标签：javascript, jquery

谁错了。我将创建两个按钮，一个是 html，另一个是 jQuery。当我单击“HTML creat”时，会显示消息并创建一个按钮。当我单击“jQuery creat 显示消息。但是当我单击消息中新创建的“我的按钮”按钮时，

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>
<script>
    function appendText() {
      var button = $("<button>My Button</button>");
      $('p').append(button);
    }
    $(document).ready(function () {
        $("button").click(function () {
            alert($(this).attr("id"));

        });
    });
</script>
</head>
<body>

<p>This is a paragraph.<br></p>
<div>
   <button onclick="appendText()">HTML creat</button>
</div>
<script>
    var button = $("<button>JQuery creat</button>");
    $('div').append(button);
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:53:44.487

您必须使用[on()](http://api.jquery.com/on/)将事件附加到动态创建的元素中。您可以将事件委托给按钮或文档的最近父级。

```
$(document).ready(function () {
     $(document).on("click", "button", function () {
        alert($(this).attr("id"));    
     });
}); 
```

将事件委托给父 div，最好将 id 或 class 分配给父 div，并使用 id 或 class 选择器来委托事件。

```
$('div').ready(function () {
     $(document).on("click", "button", function () {
        alert($(this).attr("id"));    
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:59:52.477

“JQuery Create”按钮不会添加按钮，因为您从未调用过 appendText() 函数......我已经从“My Button”按钮中删除了直接调用，并将 appendText 调用添加到点击绑定函数中.

试试这个代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>
<script>
    function appendText() {
      var button = $("<button>My Button</button>");
      $('p').append(button);
    }
    $(document).ready(function () {
        $("button").click(function () {
            alert($(this).attr("id"));
            appendText();

        });
    });
</script>
</head>
<body>

<p>This is a paragraph.<br></p>
<div>
   <button>HTML create</button>
</div>
<script>
    var button = $("<button>JQuery create</button>");
    $('div').append(button);
</script>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:55:02.003

```
$(document).ready(function () {
    $(document)on('click', 'button', function () {
        alert($(this).attr("id"));

    });
}); 
```

原始js（不考虑ie8）：

```
window.addEventListener('load', function(){
    document.addEventListener('click', function(e){
        if(e.target.tagName === 'button'){
              alert(e.target.id);
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:08:27.370

这是我的回答：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>
<script>
    function appendText() {
      var button = $("<button>My Button</button>");
      $('p').append(button);
    }
    $(document).ready(function () {
        $(document).on("click", "button", function () {
        alert($(this).attr("id"));    
 });
    });
</script>
</head>
<body>

<p>This is a paragraph.<br></p>
<div id="myDiv">
   <button onclick="appendText()">HTML creat</button>
</div>
<script>
    var button = $("<button onclick='appendText()'>JQuery creat</button>");
    $('#myDiv').append(button);

</script>

</body>
</html> 
```

不要这么粗鲁，我还在学习……在本地主机上测试过；单击时新生成的按钮会发出警报。

萨卢多斯 ;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T13:12:09.250

document.ready 函数在文档准备好后被调用。

1 - 当您的文档完成时，没有“我的按钮”按钮，因此它们都不会与事件侦听器绑定。

为了做你想做的事，你必须在创建按钮时绑定监听器，如下所示：

```
var button = $("<button>My Button</button>");
button.click(function () {
     alert($(this).attr("id"));
});
$('p').append(button); 
```

2 - 除了你的 jQuery 监听器点击覆盖元素的 onclick 属性。为了以灵活的方式避免这种情况并同时调用它们，请将其添加到您的单击侦听器中

```
eval($(this).attr("onclick")); 
```

你可以检查这个[jsFiddle](http://jsfiddle.net/hFqBU/)来看看这些东西是否正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T13:15:46.987

好吧，我认为问题在于您如何绑定`.click`事件。在 jQuery 1.7 之前，他们对`.bind`,`.delegate`和`.live`. 但是随着 jQuery 1.7 的到来，这些方法被合并了，通过将它们全部包含在 1 方法中来简化事情`.on`。但由于文档不那么清晰，人们不理解该`.on`方法。`.on`确实提供了上述 3 种不推荐使用的方法的功能，但这取决于您如何使用`.on`方法。这是一个例子：

```
// Bind
$( "button" ).on( "click", function( e ) {} ); 

// Live
$( document ).on( "click", "button", function( e ) {} );

// Delegate
$( "body" ).on( "click", "button", function( e ) {} ); 
```

我的猜测是，在绑定`button`后声明了无效的标记。`.click`在这种情况下，您将不得不`.on`为现场活动实施 as done。因此，您需要更改的只是绑定调用的方式。

```
$( document ).on( "click", "button", function () {
        //Do Something
}); 
```

希望这可以帮助。

# php - 在 smarty 中使用 foreach 循环

> ID：15570819
> 
> 赞同：0
> 
> 时间：2013-03-22T12:52:13.783
> 
> 标签：php, smarty

所以这是我的 foreach 循环

```
foreach($statusMessageResult as $row){
    $row['username']=$db->getUsername($db->getUserNameById($row['posterID']));
    $results[] = $row;
    echo "Status from: " . $row['username'] . " ID: " . $row['statusID'] . "<br>" . $row['dateTime'];
} 
```

哪个工作没有问题。但现在我想在 smarty 上也一样。所以我想我要在 .php 文件中执行此操作

```
$smarty->assign('results', $results); 
```

这在 .html 文件中

```
{foreach from=$results item=statusID}
    id: {$statusID}<br>
{/foreach} 
```

但它告诉我

```
Notice: Array to string conversion in F:\xampp\htdocs\FinalYear\smarty\templates_c\ab89063f543bf0a8fe20c45b89aad63b616cd7c5.file.home.html.php on line 86
Array 
```

那么问题似乎很清楚：我有一个数组并想将其用作字符串，这是不允许的。但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:55:21.160

试试这个 ：

```
{foreach from=$results item=result}
    id: {$result.statusID}<br>
{/foreach} 
```

如果你想要用户名：`{$result.username}`

参考：[http ://www.smarty.net/docsv2/en/language.function.foreach](http://www.smarty.net/docsv2/en/language.function.foreach)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:54:40.987

`statusID`是一个数组，通过键名获取值，如下所示：

```
{foreach from=$results item=statusID}
    id: {$statusID.username}<br>
{/foreach} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T12:54:36.607

`$statusID`似乎是一个数组:)

改变

```
{foreach from=$results item=statusID}
    id: {$statusID}<br>
{/foreach} 
```

到

```
{foreach from=$results item=statusID}
    id: {$statusID['statusID']}<br>
{/foreach} 
```

应该解决它

# google-chrome - 带有 xdebug 的 Netbeans

> ID：15570823
> 
> 赞同：3
> 
> 时间：2013-03-22T12:52:33.807
> 
> 标签：google-chrome, firefox, netbeans, xdebug

我有一个奇怪的问题。我安装了 Netbeans 7.2 和 xdebug。我尝试运行调试会话，但 Netbeans 说我必须更新“Netbeans 连接器 Chrome 扩展”。奇怪的是我有这个扩展的最新版本，而且我刚刚运行了这个会话。

另一方面，我想使用 Firefox 运行会话，但 Netbeans 总是要求 Chrome 扩展 - 别管什么浏览器设置为默认值，甚至什么浏览器配置为在 Netbeans 设置中运行。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-22T10:39:37.763

不知道 7.2，但我只花了一个小时来了解如何在 7.4 上使用 xdebug 进行调试。因此，实时编辑、js 调试等需要 netbeans 连接器（不确定它是否也可以用于 xdebug，扩展对我来说只工作一次）。如果您只想使用 xdebug，则不需要连接器扩展。Netbeans 使调试变得非常奇怪，如果您想控制使用哪种调试模式，您需要为项目选择浏览器。所以如果你想用 xdebug 调试 PHP：

1.  转到项目属性
2.  浏览器（左侧）
3.  选择 Firefox 或 Chrome（但不是带有 Nebeans 连接器的 Chrome）
4.  当然，您需要在 php 端设置 xdebug。这里有很多帖子。

我希望它有所帮助。

# ruby-on-rails - Rails：翻译提交操作，例如创建或更新

> ID：15570825
> 
> 赞同：0
> 
> 时间：2013-03-22T12:52:36.017
> 
> 标签：ruby-on-rails, internationalization, models

可以添加模型名称的翻译，例如：

```
en:
  activerecord:
    models:
      user: "Account" 
```

这会将表单提交按钮的默认文本更改为`Create Account`而不是`Create User`. 有没有办法自己翻译`Create`，最好是按模型。例如，在用户模型中它可能被翻译成，`Activate Account`而在邀请模型中它可能是`Send Invite`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:55:22.390

绝对地。

这些字符串来自`i18n`gem，它们的定义在这里：

[https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml#L136](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml#L136)

如果您覆盖那些确切的翻译键（`helpers.submit.create`等），您将全部设置好。

# facebook - 在 Facebook 应用程序中嵌入自定义 Spotify 播放列表

> ID：15570834
> 
> 赞同：0
> 
> 时间：2013-03-22T12:53:03.117
> 
> 标签：facebook, spotify

我正在寻找有关如何将自定义 Spotify 播放列表嵌入 Facebook 应用程序的更多信息。如果必须每隔几首歌曲投放一次广告，我想看看是否有办法（付费）投放我自己的广告。我也很好奇播放器将如何在移动设备上工作。

如果那里的任何人知道任何好的资源或可以向我指出可以提供帮助的人的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:12:07.353

您可以添加一个[Spotify 播放按钮](https://developer.spotify.com/technologies/spotify-play-button/)，将其 Spotify URI 设置为播放列表的 URI。

您无法控制广告，因为播放按钮会启动 Spotify 播放器，它会根据用户帐户显示或不显示广告。

# dojo - 如何在构建期间重命名全局 dojo、dijit 和 dojox 全局变量 (dojo 1.8.x)

> ID：15570836
> 
> 赞同：0
> 
> 时间：2013-03-22T12:53:09.623
> 
> 标签：dojo

我们计划将 dojo 1.8 与旧版本 (1.2) 一起使用。我们希望全局变量 dojo 指向 1.2 版本的 dojo 和 dojo18 指向 1.8 版本。我尝试使用 dojoConfig 的 packages 属性来使其正常工作。

```
<script type="text/javascript" src="<some_path>/dojo-release-1.2.0/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
<script>
  djConfig = {};
  var dojoConfig = {
      parseOnLoad: true,
      async: true,
      baseUrl: '<some_path>/dojo-release-1.8.3/dojo',
      packages: [
                 {name: 'dojo18', location: '<some_path>/dojo-release-1.8.3/dojo', 
                     packageMap: {
                         dojo: 'dojo18', 
                         dijit: 'dijit18', 
                         dojox: 'dojox18'
                     }
                 },
                 {name: 'dijit18', location: '<some_path>/dojo-release-1.8.3/dijit'},
                 {name: 'dojox18', location: '<some_path>/dojo-release-1.8.3/dojox'},
                ],
      deps: ["dojo18", "dijit18", "dojox18"]
  };
</script>
<script src="/cuic/scripts/dojo-release-1.8.3/dojo/dojo.js"></script> 
```

然而，这似乎不起作用 - 现在有 2 个全局变量 - dojo 和 dojo18 - 两者都指向 1.8 版本的 Dojo。

由于重新定位 Dojo 的已编译版本的包的重定位不起作用，我想知道是否有任何构建属性暴露，通过自定义构建 dojo 将 dojo 更改为 dojo18、dijit 到 dijit18、dojox 到 dojox18。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:25:46.043

这是在黑暗中的总镜头......

.8 调用会创建一个 dojo 实例 .. 这很正常……它会杀死您的旧 dojo。

尝试将在第 1 行中创建的 dojo 对象克隆到另一个变量，紧跟在实例化之后。然后按照流程的其余部分，将 1.8 dojo 实例也克隆到另一个变量。

最后将新变量分别克隆回dojo和dojo18 ...

没有承诺，但这是一个快速的事情，你可以在深入研究之前尝试一下，我也有兴趣看看它是否有效。如果它确实有效，您还应该能够将 djConfig 用于第一个实例，将 dojoConfig 用于第二个实例......

对不起......我在我的手机上，所以我无法测试它:)......

后来..一个非常邋遢的测试，但这有效......

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.4.3/dojo/dojo.xd.js"></script>
<script type="text/javascript" >var dojette = dojo;</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js"></script>    
<script type="text/javascript" >var dojo18 = dojo;</script>
<script type="text/javascript" >var dojo = dojette;
  console.log(dojo.version);
  console.log(dojo18.version);
</script> 
```

如果您将 dojo 和 dojo18 作为完整对象转储，您会发现它们具有完整的功能等。我没有进一步分离模块名称空间等，所以我的其余代码仍然爆炸，但这是一个开始...我希望它有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:19:22.223

我通过修改 dojo/_base/kernel 代码的 scopeMap 变量获得了自定义构建以创建全局变量“dojo18”、“dijit18”、“dojox18”。

```
 var scopeMap =
                // a map from a name used in a legacy module to the (global variable name, object addressed by that name)
                // always map dojo, dijit, and dojox
                {
                    dojo:["dojo18", dojo],
                    dijit:["dijit18", dijit],
                    dojox:["dojox18", dojox]
                }, 
```

此配置确保全局变量将被命名为“dojo18”而不是“dojo”。当通过 dojoConfig 变量提供时，scopeMap 变量似乎在早期版本的 dojo 中受到尊重。但它似乎不适用于 1.8.x 版本。我想知道这是否不再受支持。

# sql-server-2008 - 如何在加入时为列编写查询

> ID：15570842
> 
> 赞同：0
> 
> 时间：2013-03-22T12:53:41.907
> 
> 标签：sql-server-2008

```
select top 2  
    CONVERT(varchar(6),a.lastdate,6) as lastdate
    ,(select name from table_states where ID=a.joblocation ) as locat
    ,* 
from table_jobpost as a 
inner join (select * 
            from table_SuperAdmin as b 
            inner join table_Renewal as c on b.S_id=c.supid 
            where **c.proid** in (select [plan] 
                                    from table_features 
                                    where Fjobs=1) 
            and c.Payed=1) as aa on a.oid=aa.businessid 
where a.status=1 
and a.lastdate>GETDATE() 
order by startdate desc 
```

在上面的查询中，`c.proid`我想要：

```
select top 1 proid from table_Renewal  order by renewalid desc 
```

如何重新排列查询？

现在`c.proid`我有不止一个 id.so 它将检查所有 id。我只想检查

```
select top 1 proid from table_Renewal  order by renewalid desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:00:49.220

不确定我是否正确理解了您的问题。但请参阅下面的我的答案

**从 table_Renewal 中选择 max(proid)**

你能试试这个吗

select top 2
CONVERT(varchar(6),a.lastdate,6) as lastdate ,(select name from table_states where ID=a.joblocation ) as locat ,* from table_jobpost as an inner join (select * from table_SuperAdmin as b inner join table_Renewal as c on b.S_id=c.supid **left outer join (select max(proid) as proid1,supid from table_Renewal group by supid) as c1 on b.S_id=c1.supid where c1.proid1** in (select [plan]从 table_features where Fjobs=1) and c.Payed=1) as a on a.oid=aa.businessid where a.status=1 and a.lastdate>GETDATE() order by startdate desc

# javascript - 输入按钮不想将表单提交到 iframe

> ID：15570848
> 
> 赞同：0
> 
> 时间：2013-03-22T12:53:53.393
> 
> 标签：javascript, html, forms, iframe, form-submit

我有这个表格，我需要在按下 ENTER 时提交。一切看起来都很好，但只是没有用。单击搜索按钮时工作正常，但我也需要使用 ENTER 按钮。

HTML 代码：

```
<form id="SearchForm" action="mysite.com/search" target="my-iframe" method="post">

<input type="text" id="x" class="dimmed" name="keywords[all_words]" />

<div class="fieldbg"><input type="text" id="y" class="dimmed" name="City[all_words]" /></div>

<type class="btn_search row_right" onclick="document.getElementById('SearchForm').submit()"> 
```

我试过这个脚本，不工作：

```
<script>
window.onload = function() {
   var textbox = document.getElementById('x');
    textbox.onkeypress = function (e) {
        if (e.keyCode === 13) {
            document.getElementById('SearchForm').submit();
        }
    };
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:59:42.133

您可以监视键盘输入并在输入时提交表单：

```
<script>
    window.onload = function() {
       var textbox = document.getElementById('ID_OF_INPUT_FIELD_HERE');
        textbox.onkeypress = function (e) {
            if (e.keyCode === 13) {
                document.getElementById('SearchForm').submit();
            }
        };
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:57:17.167

首先，您的链接不正确：403 Forbidden；

其次，请检查页面上是否定义了 SearchForm id :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T14:48:25.770

确保您的代码在 IE 上不起作用，请尝试以下操作：

```
<script>
window.onload = function() {
   var textbox = document.getElementById('x');
    textbox.onkeypress = function (e) {
        e = e || window.event;
        if (e.keyCode === 13) {
            document.getElementById('SearchForm').submit();
        }
    };
}
</script> 
```

# visual-studio - 将调试器附加到托管代码和本机代码的启动进程

> ID：15570856
> 
> 赞同：1
> 
> 时间：2013-03-22T12:54:13.643
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-debugging

虽然我的进程正在启动（尚未完全启动并运行），但我想将调试器附加到它。我`Debugger.Launch()`在初始化代码的开头使用了构造来在调试模式下启动 Visual Studio。不幸的是，只选择了托管类型的代码进行调试。如何强制调试器也调试原生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:29:18.697

我找到了替代方法。在 c# 项目上选择项目属性。选择调试选项卡。在启动外部程序中选择您的应用程序并选择启用本机代码调试。按 F5。

# spring-mvc - Spring + ActiveMQ：并发工作者之间的不匹配

> ID：15570858
> 
> 赞同：0
> 
> 时间：2013-03-22T12:54:17.403
> 
> 标签：spring-mvc, activemq, message-queue

我的环境是 Spring 3.0.5，ActiveMQ 5.8。在`servlet.xml`我指定 10 个并发消费者。但是，ActiveMQ Web 管理控制台显示“消费者数量”= 20。

```
<bean id="singleConnectionFactory"
    class="org.springframework.jms.connection.SingleConnectionFactory">
    <property name="targetConnectionFactory" ref="connectionFactory" />
    <property name="reconnectOnException" value="true" />
</bean>

<bean id="msgListenerContainer"
    class="org.springframework.jms.listener.SimpleMessageListenerContainer">
    <property name="connectionFactory" ref="singleConnectionFactory" />
    <property name="destination" ref="emailRequestQ" />
    <property name="messageListener" ref="emailRequestMessageListener" />
    <property name="concurrentConsumers" value="10" />
</bean> 
```

试图弄清楚我的配置是否缺少某些东西？![在此处输入图像描述](../Images/f36068fcc80a55b16afb0719f3b35511.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:58:44.547

可能有几件事导致这种情况发生。例如，如果您实际上是在代码中使用构造函数而不是 @Autowiring 来实例化 bean，它将创建两个实例。

此外，如果您有更多的消费者，然后减少它们，那么当前消费者的数量可能不准确，因为它们可能只是闲置。

我建议切换到`DefaultMessageListenerContainer`. 这将允许您使用该`maxConcurrentConsumers`属性并从容器中访问一些额外的数据：

```
@Autowired
DefaultMessageListenerContainer container;
...
container.getActiveConsumerCount();
container.getConcurrentConsumers(); 
```

# json - AS3 中的 JSON (Flickr)

> ID：15570859
> 
> 赞同：0
> 
> 时间：2013-03-22T12:54:18.973
> 
> 标签：json, actionscript-3, flickr

在 AS3 (Flash) 中，我需要插入 Flickr 提要。我希望 Flickr 图像显示在一种画廊中。这是我的 Flickr 图像的 JSON：[http](http://api.flickr.com/services/feeds/photos_public.gne?tags=snow&format=json) ://api.flickr.com/services/feeds/photos_public.gne?tags=snow&format=json 我有这个代码，显示 jpg 图像。但是如何让它显示 JSON？

`var imageLoader:Loader = new Loader(); var image:URLRequest = new URLRequest("http://natur.suntuubi.se/datafiles/gallery/1/lejon%20som%20ryter.jpg‌​"); imageLoader.load(image); addChild (imageLoader); imageLoader.x = 200; imageLoader.y = 300;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:49:55.757

您将使用`URLLoader`和`JSON`类来加载和解析 JSON 字符串：

```
function loadFeed():void 
{
    var loader:URLLoader = new URLLoader(new URLRequest("http://api.flickr.com/services/feeds/photos_public.gne?tags=snow&format=json"));
    loader.addEventListener(Event.COMPLETE, onComplete);
}

function onComplete(e:Event):void 
{
    var jsonStr:String = String(e.target.data);

    var jsonObj:Object = JSON.parse(jsonStr);
} 
```

但是请注意，根据[这个链接](http://www.flickr.com/groups/api/discuss/72157622950514923/ "Flickr 讨论")，API 生成的 JSON 是无效的。我建议改用 XML 结果（可通过 访问`http://api.flickr.com/services/feeds/photos_public.gne?tags=snow&format=xml`）

# magento - 如何在 magento 中将自定义字体用于我的主题？

> ID：15570860
> 
> 赞同：2
> 
> 时间：2013-03-22T12:54:26.250
> 
> 标签：magento, css, fonts, font-face

我正在尝试开发一个magento主题，我对所有其他事情都进行得很好，除了一个，我想根据我的客户要求在我的magento主题中使用自定义字体，字体是“eurostilebold”，我尝试过这样做核心php，就像我将字体文件放在字体文件夹中并将字体文件夹放入

> D:\xampp\htdocs\clothing_site\skin\frontend\default\gwcc\

这个目录。现在我在我的css中使用那个字体系列并像这样调用：

```
@font-face {
font-family: 'eurostile_extended_2regular';
src: url('fonts/eurostile_extended_2-webfont.eot'); 
```

我想知道如何在magento中使用任何自定义下载的字体系列，任何帮助将不胜感激，在此先感谢，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-06T15:24:28.847

```
@font-face {
    font-family: 'Adobe Garamond Regular';

    src: url('../fonts/Adobe Garamond Regular.eot');
    src: url('../fonts/Adobe Garamond Regular.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Adobe Garamond Regular.woff') format('woff'),
         url('../fonts/AGaramondPro-Regular.otf') format('otf'),
         url('../fonts/Adobe Garamond Regular.ttf') format('truetype'),
         url('../fonts/Adobe Garamond Regular.svg#Adobe Garamond Regular') format('svg');
    font-weight: normal;
    font-style: normal;

}

body{  font-family:'Adobe Garamond Regular';  } //added to code 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:23:03.740

要在您的网站上使用自定义字体，您有 3 个选项。

1.  使用开源和免费的在线字体，如谷歌字体和松鼠字体，请在谷歌上搜索免费网络字体。我个人在我的设计中经常使用 open sans 和其他谷歌字体。

2.  使用一些付费字体服务。（我没用过所以没有经验）

3.  在您的网站上嵌入您的本地字体。方法如下：

您需要将字体转换为不同的格式，例如 .eot、.svg、.ttf、.woff，因为不同的浏览器支持不同的格式。[http://screencast.com/t/0KV17zkSri](http://screencast.com/t/0KV17zkSri)然后，像这样在 CSS 中添加这些字体：http: [//screencast.com/t/ypgKHV7lSm](http://screencast.com/t/ypgKHV7lSm)现在，使用这样的字体： http: [//screencast.com/t /NheSnxPCE1SN](http://screencast.com/t/NheSnxPCE1SN)

有几种在线服务可以将给定的格式转换为所有其他所需的格式，例如[http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)。如果这些服务将您的字体列入黑名单，请尝试搜索特定格式，例如“ttf to eot”，您会在那里找到其他一些服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T08:04:47.563

或者，只需安装此 Magento 扩展程序：http: [//www.magentocommerce.com/magento-connect/googlefonts.html](http://www.magentocommerce.com/magento-connect/googlefonts.html)

它将让您从后端选择所需的字体并自行正确安装字体。然后，您只需通过 CSS 访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:05:05.837

您需要在其他 css 文件中引用您的 webfont：

```
body{
    font-family:"eurostile_extended_2regular",Arial, ... , ;
} 
```

[http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-16T23:03:19.423

您需要下载字体，然后将其上传到 skin/frontend/default/your_theme/fonts，然后在您的 css 脚本的 @font-face 部分调用它，该脚本位于：skin/frontend/default/your_theme/ css/styles_your_layout.css

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-06T10:53:49.463

如果您制作自己的主题，在您的主题`local.xml`（应该放在`app/design/frontend/{YOUR_PACKAGE}/{YOUR_THEME}/layout/`）中，它可能看起来像（您的可能与下面不同）：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
    <default>
        <reference name="head">
            <action method="addCss"><stylesheet>css/base.css</stylesheet></action>
        </reference>
    </default>
</layout> 
```

`<reference name="head">`在该行之前添加以下链接`addCss`以确保它在之前加载`base.css`：

```
<action method="addLinkRel"><rel>stylesheet</rel><href>https://fonts.googleapis.com/css?family=Cardo:400,700</href></action> 
```

变成：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
    <default>
        <reference name="head">
            <action method="addLinkRel"><rel>stylesheet</rel><href>https://fonts.googleapis.com/css?family=Cardo:400,700</href></action>
            <action method="addCss"><stylesheet>css/base.css</stylesheet></action>
        </reference>
    </default>
</layout> 
```

上传回您的主题文件夹。清除缓存并重新加载页面，您会看到 Google 字体 CSS 已添加到 HTML 的头部。

要使用 Google Web 字体（与这个问题有点题外话），您可以将字体应用于您想要的任何 CSS 选择器。例如：

```
p {
  font-family: Cardo, Arial, sans-serif;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T13:15:00.110

我会首先通过[fontsquirrel](http://www.fontsquirrel.com/tools/webfont-generator)或其他服务转换我的字体。

这将使您成为一个 zip 文件夹，其中包含您需要的所有内容，包括字体文件和 css。

然后只需包含 css，现在您可以像这样在您的 css 中使用它，在您想要的任何元素上。

```
html {
    font-family: "eurostile", OtherFallbackFont;
} 
```

或者只是标题：

```
h1 {
    font-family: "eurostile", OtherFallbackFont;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-23T19:29:09.413

我发现最简单的方法是转到系统->配置

从 General 组转到 Design 并在 HTML Head 部分使用 Misc Scripts 粘贴如下内容：

```
<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<style> body {font-family: 'Raleway', sans-serif !Important;}</style> 
```

所需的 google 字体的链接在哪里（为什么还需要其他字体？）

# ios - 在 2 个声音阵列上设置时间间隔

> ID：15570864
> 
> 赞同：0
> 
> 时间：2013-03-22T12:54:38.407
> 
> 标签：ios, ipad, audio, cocos2d-iphone

我有一个按钮，可以播放在我的初始化场景中设置的 2 个声音数组：

```
NSString * soundName = [NSString stringWithFormat:@"%d-%d%@.mp3", levelNumber, i+1, language];

NSString * soundName2 = [NSString stringWithFormat:@"%d-%db%@.mp3", levelNumber, i+1, language];

CDBufferLoadRequest * request = [[CDBufferLoadRequest alloc] init:(1001+i) filePath:soundName];
[loadRequests addObject:request];
[request release];

CDBufferLoadRequest * request2 = [[CDBufferLoadRequest alloc] init:(1009+i) filePath:soundName2];
[loadRequests addObject:request2];
[request2 release]; 
```

当我点击我的按钮时，它们会被调用。单击按钮时的方法是这样的：

```
-(void) soundTruck
{
    [soundEngine stopAllSounds];
    [soundEngine playSound:(1000+tag) sourceGroupId:1 pitch:1 pan:1 gain:1.0f loop:NO];
    NSLog(@"sound activated");

    [soundEngine playSound:(1008+tag) sourceGroupId:1 pitch:1 pan:1 gain:1.0f loop:NO];
    NSLog(@"sound activated");
} 
```

问题是我想在这两个声音之间设置一个间隔来设置第一个，然后是第二个。现在，使用此代码，它只播放第二个。有人可以教我如何设置声音间隔吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:57:48.243

你可以使用 NSTimer 类，它会帮助你。

# ios - iOS捆绑标识符错误

> ID：15570867
> 
> 赞同：0
> 
> 时间：2013-03-22T12:54:49.267
> 
> 标签：ios, deployment

在我的构建设置中，在代码签名身份部分下，我不断收到此错误：

COMPANY_NAME APP_NAME Enterprise（对于捆绑标识符“com.COMPANY_NAME.APP_NAME”）配置文件与捆绑标识符“com.COMPANY_NAME.APP_NAME.APP_NAME”不匹配

我正在尝试解决 ipa 未安装问题，我想知道这是否是原因？

编辑：我应该为此添加正确的案例：它应该是 com.company_name.app_name doesn't match com.company_name.app_name.APP_NAME

其中 APP_NAME 是“身份”面板的“项目名称”部分中我的应用程序 (EBUS) 的名称。在摘要中，com.company_name.app_name.APP_NAME 和结尾的 APP_NAME 显示为灰色且无法编辑。

如果是这样，我该如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:55:51.420

两次'com.COMPANY_NAME.APP_NAME。**APP_NAME** '，也许吧？

只需像这样输入您的捆绑 ID：“com.COMPANY_NAME.APP_NAME”，这样它就可以匹配您的配置文件“com.COMPANY_NAME.APP_NAME”...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:36:38.643

捆绑 ID 通常应以简单的格式保存。例如：com.anyName.AppName。

如果您无法编辑，您也可以签入您应用的“.plist”文件并从那里进行编辑。

编辑：您还应该访问 Apple 开发者门户并检查您提供给应用程序的应用程序 ID。最好的措施是让这个 App id 与 bundle id 相匹配。

# oracle - 删除的过程显示在 USER_OBJECTS

> ID：15570869
> 
> 赞同：3
> 
> 时间：2013-03-22T12:54:53.797
> 
> 标签：oracle, plsql

根据其他人的建议，我编写了这个 SQL*Plus 脚本，以从当前用户中删除所有对象：

```
SET ECHO OFF
SET HEADING OFF
SET PAGESIZE 0
SET FEEDBACK OFF
SET TIMING OFF
SET TIME OFF
SET TRIMSPOOL ON
SET TRIMOUT ON
SET LINESIZE 100

SET TERMOUT OFF
SPOOL eliminar-todo
/*
 * Descartamos objetos en la papelera ya que intentar eliminarlos directamente genera
 * «ORA-38301: no se puede realizar DDL/DML en objetos de la papelera de reciclaje»
 */
SELECT 'DROP ' || UO.OBJECT_TYPE || ' "' || UO.OBJECT_NAME || '"' ||
    DECODE(UO.OBJECT_TYPE,
        'CLUSTER', ' INCLUDING TABLES CASCADE CONSTRAINTS',
        'OPERATOR', ' FORCE',
        'TABLE', ' CASCADE CONSTRAINTS',
        'TYPE',  ' FORCE',
        'VIEW', ' CASCADE CONSTRAINTS',
    '') || ';'
FROM USER_OBJECTS UO
LEFT JOIN USER_RECYCLEBIN UR ON UO.OBJECT_NAME=UR.OBJECT_NAME
WHERE UO.OBJECT_TYPE IN (
    'CLUSTER', 'CONTEXT', 'DATABASE LINK', 'DIMENSION', 'DIRECTORY', 'FUNCTION', 'INDEX TYPE',
    'JAVA', 'LIBRARY', 'MATERIALIZED VIEW', 'OPERATOR', 'OUTLINE', 'PACKAGE', 'PROCEDURE',
    'SEQUENCE', 'SYNONYM', 'TABLE', 'TYPE', 'VIEW'
)
AND UR.OBJECT_NAME IS NULL
ORDER BY UO.OBJECT_TYPE, UO.OBJECT_NAME;
/
SPOOL OFF
SET TERMOUT ON

@eliminar-todo.lst

PURGE RECYCLEBIN; 
```

我有一个旧的更简单的版本，它一直运行良好：

```
select 'drop '||object_type||' '||object_name||
       decode(object_type,'CLUSTER',' including tables cascade constraints',
                          'OPERATOR', ' force',
                          'TABLE',' cascade constraints',
                          'TYPE', ' force',
                          'VIEW',' cascade constraints',
                          '')||';'
from user_objects
where object_type in ('CLUSTER', 'CONTEXT', 'DATABASE LINK', 'DIMENSION',
                      'DIRECTORY', 'FUNCTION', 'INDEX TYPE', 'JAVA',
                      'LIBRARY', 'MATERIALIZED VIEW', 'OPERATOR',
                      'OUTLINE', 'PACKAGE', 'PROCEDURE', 'SEQUENCE',
                      'SYNONYM', 'TABLE', 'TYPE', 'VIEW')
order by object_type, object_name 
```

`BIN$...`...但是当用户有表格时触发了语法错误。

我尝试了双引号标识符，但得到了`ORA-38301`：

> 无法对回收站中的对象执行 DDL/DML

当前版本试图避免为表发出`DELETE TABLE`语句。`BIN$...`为此，我将用户对象与用户回收站连接起来并省略匹配项。我不再有`BIN$...`桌子的问题了。但是，现在我收到此错误消息，例如 3 次中的 1 次：

```
DROP PROCEDURE "RESET_SEQUENCE"
*
ERROR en línea 1:
ORA-04043: el objeto RESET_SEQUENCE no existe 
```

显然，程序在运行时`RESET_SEQUENCE`出现`USER_OBJECTS`但不再存在`DROP PROCEDURE "RESET_SEQUENCE"`。

1.  这怎么可能？
2.  我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:19:33.767

首先，在您的脚本中，您运行光标两次，因为您有`;`and `/`。

```
ORDER BY UO.OBJECT_TYPE, UO.OBJECT_NAME;
/ 
```

来自[SQL：分号还是斜线？](https://stackoverflow.com/questions/1079949/sql-the-semicolon-or-the-slash/10207695#10207695)：

> 在 SQL*Plus 中，a / 和 a 的含义存在巨大差异；因为它们的工作方式不同。
> 
> 这 ; 结束一条 SQL 语句，而 / 执行当前“缓冲区”中的任何内容。所以当你使用 ; 而a / 语句实际上执行了两次。

# javascript - Javascript 全局变量可在 IE 中访问，但不能在 MOZILLA Firefox 中访问

> ID：15570870
> 
> 赞同：0
> 
> 时间：2013-03-22T12:54:54.660
> 
> 标签：javascript

我在我的应用程序中使用磁贴，它具有以下布局（在主 JSP 中）
1\. 标题部分（整个应用程序相同）
2\. 正文部分（为不同页面获取更改的正文内容）
3\. 页脚部分（整个应用程序相同）

正文部分 - 将随 x.jsp 或 y.jsp 更改

这个想法是 Header 中的脚本应该在 y.jsp 而不是 x.jsp 中执行

在标题视图（jsp）中，我有脚本将访问脚本中定义的全局变量，`x.jsp`以便标题中的脚本识别正文部分有`x.jsp`和没有`y.jsp`。

例如标题脚本

```
 if(type of (flag)=="undefined"){

        \\\then execute the script
    }  
   else{

        \\\dont execute the script
    } 
```

注意 - 这个标志`var`将在`x.jsp`并且不会被定义`y.jsp`

**这在 IE 中运行良好，**但在 Firefox 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:57:09.910

在 javascript 中，它是`typeof`，不是`type of`，但话又说回来，你真的在​​使用 javascript 吗？

JSP 文件在服务器上运行。Javascript 在客户端（即在浏览器中）运行。

看起来，您至少在客户端做了*一些事情*，因为某些东西在 IE 中而不是在 Firefox 中有效，但我怀疑它与您上面描述的问题有关。

# android - 在 android 上使用 OpenGL 显示图像

> ID：15570871
> 
> 赞同：0
> 
> 时间：2013-03-22T12:54:59.297
> 
> 标签：android, opengl-es, camera

我正在开发一个需要使用 OpenGL 显示相机预览的 Android 项目。但是，我总是在一台设备（Galaxy Nexus）上获得稳定的白色图片，而在另一台设备（HTC One X）上获得黑色图片。下面列出了我认为存在错误的代码。
第一个方法`loadGLTexture`在内部调用`onSurfaceCreated`，然后是其他 gl 初始化。

```
public void loadGLTexture(GL10 gl, Context context)
{

    // harcoded size
    // int width = 640;
    // int height = 480;

    // I'm dealing with RGB565 image, so 2 byte per pixels.
    image = new byte[640*480*2];

    // native method that take the new frame from the camera buffer
    Native.takeCurrentFrame(image); 

    // generate one texture pointer
    gl.glGenTextures(1, textures, 0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // set filter parameters
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    // allocate the buffer for glTexImage2D
    byte_buffer = ByteBuffer.allocateDirect(image.length * 2);
    byte_buffer.order(ByteOrder.nativeOrder());
    byte_buffer.put(image);
    byte_buffer.position(0);

    gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGB, 640, 480, 0, GL10.GL_RGB, GL10.GL_UNSIGNED_SHORT_5_6_5, byte_buffer);
} 
```

这第二种方法`draw`在内部调用`onDrawFrame`

```
public void draw(GL10 gl)
{
    // update the texture with new image from camera
    Native.takeCurrentFrame(image);
    byte_buffer.put(image);
    byte_buffer.position(0);

    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // Point to buffers
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGB, 640, 480, 0, GL10.GL_RGB, GL10.GL_UNSIGNED_SHORT_5_6_5, byte_buffer);
    // Set the face rotation
    gl.glFrontFace(GL10.GL_CW);

    // Point to vertex and coord buffer
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    // Draw the vertices as triangle strip
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
} 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:20:16.827

好吧，我犯了一个小错误，纹理不是二的幂。奇怪的是，在这种情况下，您不会收到有关错误分辨率的任何错误。

# mysql - 按“位置”排序，但最后放置 0

> ID：15570873
> 
> 赞同：0
> 
> 时间：2013-03-22T12:55:02.413
> 
> 标签：mysql, sql, sqlite, sorting, activerecord

我有一张带滑块的桌子：

```
 | id | position | 
 | 1  | 2        | 
 | 2  | 0        | 
 | 3  | 0        | 
 | 4  | 1        | 
```

我想对它们进行排序`position`，其中 0 的位置被视为*未排序*。未排序的记录应该在其他列（`created_at`）上排序。就示例而言，按 ID 排序作为二级排序很好。

一个简单的

```
SELECT "sliders".* FROM "sliders" ORDER BY position ASC, id ASC 
```

选择它们，但显然，将 0 排序在 1 之上，给我：

```
 | id | position | 
 | 2  | 0        | 
 | 3  | 0        | 
 | 4  | 1        | 
 | 1  | 2        | 
```

但是，我想要一个返回的查询：

```
 | id | position | 
 | 4  | 1        | 
 | 1  | 2        | 
 | 2  | 0        | 
 | 3  | 0        | 
```

对已排序项目下的“未排序”项目进行排序。

这对 SQL 来说是可能的吗？如果可以，怎么做？这是一个好方法，还是我会更好一些，例如另一个包含“is_sorted”标志的列？

我正在使用 ActiveRecord (Ruby on Rails) 作为 ORM，所以也许它提供了一个帮助器，使这更容易？

编辑：SQL 现在适用于 sqlite，但应该可以移植到 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:57:30.997

```
order by
   case when position = 0 then 2 else 1 end,
   position 
```

首先强制所有零排在最后，然后按位置排序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:58:41.687

你能做这样的事情吗？我相信它会起作用。

```
SELECT "sliders".* FROM "sliders" where position != 0 ORDER BY position ASC, id ASC
UNION
SELECT "sliders".* FROM "sliders" where position = 0 ORDER BY id ASC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T12:57:57.903

```
SELECT "sliders".* 
FROM   "sliders" 
ORDER  BY CASE WHEN position = 0 THEN 0 ELSE 1 END DESC, 
          position ASC, 
          id ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:57:40.903

使用[TSQL CASE 表达式](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

```
SELECT "sliders".* FROM "sliders" 
ORDER BY CASE WHEN position = 0 THEN 999 ELSE position END, id ASC 
```

# java - 正则表达式仅保留特定类型的字母空格和小数

> ID：15570875
> 
> 赞同：2
> 
> 时间：2013-03-22T12:55:04.830
> 
> 标签：java, regex, decimal

我试图将字符串中的所有内容都扔掉，除了点之前 [0-9]{1,3} 和点之后 [0-9]{1,2} 类型的字母、空格和小数。

我在java中想出了这个

```
replaceAll("[^\\p{L}\\s(\\s[0-9]{1,3}(\\\\.[0-9]{1,2})?)]", "+")); 
```

我真的无法让它工作。在正则表达式方面，我是一个真正的新手。

**例子**

*这*: mpla 12.5 mpla 121.22 mpla 1.52 mpla 1 mpla 1000 mpla 1000.12 mpla12.5

*返回*： mpla 12.5 mpla 121.22 mpla 1.52 mpla 1 mpla + mpla + +

//特别注意 mpla12.5 这也是不想要的，因为我想要 \sNUMBER\s 的格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:09:33.377

请注意，正则表达式并不适合在字符类之外执行“非”语义。因此，我建议专注于您想要保留的内容并从中构建您的结果*：*

```
String s = "mpla 12.5 mpla 121.22 mpla 1.52 mpla 1 mpla 1000 mpla 1000.12 mpla12.5";
Pattern p = Pattern.compile("[A-Za-z]+|\\s(\\d{1,3}(\\.\\d{1,2})?\\s)?");
Matcher m = p.matcher(s);
StringBuffer sb = new StringBuffer();
while (m.find()) {
    sb.append(m.group());
}
System.out.println(sb.toString()); 
```

输出：

```
mpla 12.5 mpla 121.22 mpla 1.52 mpla  mpla  mpla  mpla 
```

我认为这是您最严格意义上的要求——请注意，结果中有多个空格，如果需要，您必须对其进行清理。

**编辑：**让我澄清一下我的意思`regexes are not really good for doing "not" semantics outside of character classes`。如果您只是想“匹配任何不是字母或空格的字符”，那么使用否定字符类很容易：`[^A-Za-z\\s]`. 但是，一旦您开始需要否定多字符分组（`\\d{1,3}\\.\\d{1,2}`例如），它就会变得丑陋。从技术上讲，您可以使用负前瞻来做到这一点，但它很笨拙而且不是很直观。这篇文章很好地解释了它：[https ://stackoverflow.com/a/406408/1311394](https://stackoverflow.com/a/406408/1311394)

**编辑2：**根据您的评论，我相信`String.split()`与正则表达式匹配一起使用的解决方案将更轻松地完成您想要的事情：

```
String s = "12.5 mpla 12.5 mpla 121.22 mpla 1.52 mpla 1 mpla 1000 mpla 1000.12 mpla12.5";
StringBuilder sb = new StringBuilder();
for (String token : s.split("\\s+")) {
    if (token.matches("[A-Za-z]+|\\d{1,3}(\\.\\d{1,2})?")) {
        sb.append(token).append(" ");
    }
}
System.out.println(sb.toString()); 
```

输出：

```
12.5 mpla 12.5 mpla 121.22 mpla 1.52 mpla 1 mpla mpla 
```

这应该照顾评论中提到的情况。大多数时候，非常复杂的正则表达式是一种代码异味，通常有一种更简单的方法来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:05:30.230

试试这个：

```
 String data = "ds#@234f&^%%sd232.ertre3df6g#@$566";
    String replaceString = data.replaceAll("[^\\w\\s\\.]", "");

    System.out.println(data);

    String firstPart = replaceString.split("\\.")[0];

    String secondString = "."+ replaceString.split("\\.")[1];

    String finalString = firstPart + secondString.replaceAll("[^\\d\\.]", "");
    System.out.println(finalString); 
```

# java - 优化文件制作程序

> ID：15570881
> 
> 赞同：-4
> 
> 时间：2013-03-22T12:55:26.363
> 
> 标签：java, optimization, writer

我目前有一个工作程序，它通过用零填充它来创建任何所需大小的文件。这很好，但我需要执行此操作的文件大小为千兆字节，并且此方法将花费很长时间才能执行此操作。如果有人可以阅读此代码并提供提示以使其更快，将不胜感激。

```
public class fileMaker
{
 public static void main(String[] args) throws IOException
 {
     fileMaker fp = new fileMaker();

     Writer output = null;
     File f = new File(args [1]);
     output = new BufferedWriter(new FileWriter(f, true));
     output.write("0");

     long size = fp.getFileSize(args[1]);

     long mem = Long.parseLong(args[0]) * 1073741824; //1 Gigabyte = 1073741824 bytes        

     while(size < mem)
     {
            output.write("0");

            output.flush();

            size = fp.getFileSize(args[1]);
            //System.out.println(size + " bytes completed out of " + mem);

            double avg = (double)size / mem * 100;

            System.out.println(avg + "% complete");

     }
     output.close();
     System.out.println("Finished at - " + size / 1073741824  + " Gigabytes");

 }

private long getFileSize(String fileName) 
{
    File file = new File(fileName);        
    if (!file.exists() || !file.isFile()) 
    {
        System.out.println("File does not exist");
        return -1;
    }
    return file.length();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:00:51.500

1.  一次写入多个字节。一次写入一些 4096 字节的倍数。
2.  不要在每次写入后刷新流。
3.  无需查询文件大小，只需在`size`每次写入时递增。

# web-config - Web.config - 使用应用程序 requestLimits

> ID：15570882
> 
> 赞同：1
> 
> 时间：2013-03-22T12:55:28.067
> 
> 标签：web-config, request, limit

我有一个页面，用户可以将文件上传到服务器。我指定了

```
 <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="512000"></requestLimits>
        </requestFiltering>
    </security> 
```

在我的 Web.config 中，但我仍然收到请求太大的错误。我找到了一种解决方案 - 更改系统文件 applicationHost.config。我设置

```
<requestLimits maxAllowedContentLength="512000000"> 
```

它解决了我的问题。但是我们不能在开发服务器上修改这个文件。我找到了一些解决方案，例如使用

```
<clear/> 
```

或者

```
<remove name="..."> 
```

在我的 Web.config

```
 <security>
        <requestFiltering>
            <clear/>
            <requestLimits maxAllowedContentLength="512000"></requestLimits>
        </requestFiltering>
    </security> 
```

但现在我明白了

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:43:22.600

我认为你需要设置

```
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="2097151" />
  </system.web>
</configuration> 
```

反而。那是 2GB - 我认为这是最大值。

# php - 如何使用 php 将当前类添加到特定类别

> ID：15570884
> 
> 赞同：1
> 
> 时间：2013-03-22T12:55:31.177
> 
> 标签：php, pligg

我想在使用 php 时为每个 li 添加*当前*类（我对它完全陌生）。我有以下代码：

```
<ul id="frumos">
    <li {if $pagename eq "upcoming"} class="current" {/if}><a href="/upcoming.php?category=economic">Economic</a></li>  
   <li {if $pagename eq "/upcoming.php?category=other"} *(this doesn't work)* class="current" {/if}><a href="/upcoming.php?category=other">Freestyle</a></li>

   <li><a href="/upcoming.php?category=social">Social</a></li>
</ul> 
```

如果我使用`{if $pagename eq "upcoming"}`它工作正常，但如果我把`{if $pagename eq "/upcoming.php?category=other"}`它不起作用，在这种情况下我应该使用什么结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:44:34.557

试试这个：

```
<?PHP
$category = $_REQUEST[category];

echo "<ul id='frumos'>";
    echo "<li ";
    if($category == 'economic'){
        echo " class='current'";
    }
    echo "><a href='/upcoming.php?category=economic'>Economic</a></li> ";
    echo "<li";
    if($category == 'other'){
        echo " class='current'";
    }
    echo "><a href='/upcoming.php?category=other'>Freestyle</a></li>";
    echo "<li";
    if($category == 'social'){
        echo " class='current'";
    }
    echo "><a href='/upcoming.php?category=social'>Social</a></li>";
echo "</ul>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:38:48.287

屠宰你的 html 的最简单和最干净的方法是使用小便器。本质上，它是一个紧凑的 if else 语句。

```
<li <?php echo ($pagename === "/upcoming.php?category=other") ? echo 'class="current"' : ''; ?> > 
```

# android - 如果设备未植根，如何拍摄设备快照？

> ID：15570897
> 
> 赞同：0
> 
> 时间：2013-03-22T12:56:07.503
> 
> 标签：android

嗨，如果设备已植根，我看到了用于拍摄 android 设备快照的代码。如果设备没有以编程方式植根，我如何拍摄快照

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:02:49.447

看看[这个示例项目](http://code.google.com/p/android-screenshot-library/source/browse/)，它可以满足您的需求（浏览到*src*并找到*ScreenshotDemo.java*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:33:44.727

我对此进行了很多搜索。没有root，你可以尝试ASL，它取决于手机，即；如果你幸运的话。所有其他应用程序都需要 root 权限才能截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:59:07.820

以下应用程序允许您在没有 root 访问权限的情况下截取屏幕截图。

[https://play.google.com/store/apps/details?id=com.edwardkim.android.screenshotitfullnoroot&hl=en](https://play.google.com/store/apps/details?id=com.edwardkim.android.screenshotitfullnoroot&hl=en)

# java - 获取片段内的活动会产生空指针异常

> ID：15570906
> 
> 赞同：0
> 
> 时间：2013-03-22T12:56:32.583
> 
> 标签：java, android, nullpointerexception

问题类似于[this](https://stackoverflow.com/questions/11743272/android-fragment-cannot-get-activity) SO post。

@Jason 回复说 -

> 您的 Fragment 尚未附加到 Activity，这也意味着您的布局尚未膨胀。

在这种情况下，问题是简单地将字符串从一个片段传递到另一个片段。

但是，在这里我需要做一些不同的事情：

**通用.java**

```
public class Common extends Fragment
{
   OnSelectedListener mCallback = new OnSelectedListener(){
     public void getFailureDialog(){

                RecordFailure fd = new RecordFailure(); 
                fd.show(getActivity().getSupportFragmentManager(), "dialog"); //Null pointer exception here.

        }
}; 
```

我打电话`mCallback.getFailureDialog()`给那个方法。

**错误日志：**

```
03-22 18:21:30.022: E/AndroidRuntime(9385): java.lang.NullPointerException
03-22 18:21:30.022: E/AndroidRuntime(9385):     at com.cornmain.util.Common$1.getFailureDialog(Common.java:112) 
```

怎么做？

更新：

如果我使用`fd.show(getFragmentManager(), "dialog");`，则会收到以下错误：

错误日志：

```
03-22 18:35:18.432: E/AndroidRuntime(11872): java.lang.NullPointerException
03-22 18:35:18.432: E/AndroidRuntime(11872):    at android.support.v4.app.DialogFragment.show(DialogFragment.java:125)
03-22 18:35:18.432: E/AndroidRuntime(11872):    at com.cornmain.util.Common$1.getFailureDialog(Common.java:112) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:35:02.697

如果您通过代码创建片段，那么您可以在片段构造函数中传递您的活动并使用它而不是 getActivity()。在另一种情况下，在 onActivityCreated() 之前调用此方法根本没有意义。

# sql - 如何在 linq2sql 连接语句上转换参数的可空类型

> ID：15570915
> 
> 赞同：0
> 
> 时间：2013-03-22T12:57:06.463
> 
> 标签：sql, linq, linq-to-sql, casting, nullable

不知何故，我无法弄清楚如何在语句的 ON 部分中转换 linq 参数的类型。该语句将导致以下错误：

> 错误 1 ​​连接子句中的表达式之一的类型不正确。调用“GroupJoin”时类型推断失败。

ProjectID = pID 的类型是 int，还有 r.ProjectID。那么有没有人知道是什么导致了这个错误？

```
ViewData.Model = (from c in _db.Category
    join r in _db.CategoryAndProject2
    on new { c.CategoryID, ProjectID = pID } equals new { r.CategoryID,  r.ProjectID }
    into join1
    from j in join1.DefaultIfEmpty()
    select new CategoryDTO
    {
    CatID = (int) j.CategoryID    
    }).Distinct().ToList(); 
```

**在线编辑**，因为缺少代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:58:53.093

尝试这个：

```
on (int?)c.CategoryID equals r.CategoryID 
```

连接中不需要匿名类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:05:00.950

你可以这样做：

```
from c in _db.Category
join r in _db.CategoryAndProject2
on new { c.CategoryID, ProjectID = pID } equals
   new { CategoryID = r.CategoryID ?? 0,  r.ProjectID }
... 
```

虽然这样做可能更有效

```
from c in _db.Category
join r in _db.CategoryAndProject2
on new { CategoryID = (int?)c.CategoryID, ProjectID = pID } equals
   new { r.CategoryID, r.ProjectID }
... 
```

因为这会转化为字段上的直接连接，无需转换。第一个查询包含 a `COALESCE`，它排除了索引的使用。

# vb.net - 通过批处理文件杀死进程（远程）

> ID：15570920
> 
> 赞同：0
> 
> 时间：2013-03-22T12:57:19.147
> 
> 标签：vb.net, deployment, batch-file, remote-debugging, remote-access

我开发了一个在计算机 A 上运行的应用程序。我有一台计算机 B，它运行着 Visual Studio 版本（我在其中设计了应用程序）。

我得到的是，当我在计算机 B 上构建应用程序时，它会将其部署到计算机 A（通过共享网络文件夹。

现在，我现在想要的是使用 Visual Studio 中的`pre-built`and`post-built`命令来调用批处理文件。预构建的命令批处理文件需要杀死远程计算机（计算机 A）上的应用程序（如果它正在运行），我认为这不能通过 processid 或 processname。构建后的命令批处理文件需要在远程计算机上启动“新”构建的应用程序。但我真的不知道从哪里开始

我该如何完成这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:02:24.507

您可以使用[PsTools](http://technet.microsoft.com/en-us/bb896649)实现此目的。

[PsKill](http://technet.microsoft.com/en-us/bb896683)和[PsExec](http://technet.microsoft.com/en-us/bb897553)分别是您正在寻找的工具。

这是[关于启动远程进程的类似问题](https://stackoverflow.com/questions/711604/starting-remote-processes-in-a-windows-network)

# php - 使用 PHP 下载大文件时服务器失败

> ID：15570922
> 
> 赞同：0
> 
> 时间：2013-03-22T12:57:21.340
> 
> 标签：php, download, sftp, large-files, phpseclib

我正在使用[PHPSecLib](http://phpseclib.sourceforge.net/)的 SFTP 功能从 FTP 服务器下载文件。

线

```
$sftp->get($fname); 
```

如果文件最大为 200MB，则工作正常，但如果为 300MB，浏览器会响应“Firefox 无法在 [download.php] 找到文件”。也就是说，它说它找不到我用于下载远程文件的 php 文件。

一开始我以为是`memory_limit`php.ini中的设置造成的，但是设置为128M还是350M都没有关系；200MB 文件仍然有效，300MB 文件失败。它在十秒钟后失败，所以`max_execution_time`或者`max_input_time`似乎不是罪魁祸首。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:20:34.623

首先，我强烈建议您将代码`set_time_limit(0);`放在 php 文件的最顶部（甚至在任何包含之前），因为您正在处理您不知道它们将花费多少时间的操作。

我想说这是网络服务器/浏览器在“长时间”内不发送/接收任何数据而超时的情况。为了解决这个问题，我们必须稍微修改一下 SFTP.php 文件，即 Net_SFTP 类，然后转到 get 方法（如果您有 phpseclib 0.3.1，则为第 1482 行）并在您唯一的“while”控制结构中添加一些内容有（我将在下面粘贴整个函数），添加以下代码：

```
if (strtolower(PHP_SAPI) != 'cli') { // run this if request is handled by a webserver (like your case)
    $my_iter++;

    if($my_iter > 1024){
        $my_iter = 0; // reset the counter
        echo "transferring ... " . date("G:i:s") . "<br />"; // send something to the buffer
    }

    // flush the buffers and prevent the timeout by actually outputting something to the browser
    ob_end_flush();
    ob_flush();
    flush();
    ob_start();
    usleep(100); // just in case, try removing this delay
} 
```

它基本上不时输出一些东西（这段时间的 1024 次迭代）并刷新缓冲区以实际向浏览器输出一些东西。随意调整值。由于这些问题，这是不打算从网络服务器运行的代码（SFTP 类）。我的意思是，你可以，但你会遇到一些问题，比如这个。

此外，如果您尝试发送（），您将不得不对相应的方法进行类似的修改，但希望这将解决您的问题（至少这解决了我在本地开发盒上的超时问题）。

现在，按照承诺，完整的方法修改如下；-)

```
function get($remote_file, $local_file = false)
{
    if (!($this->bitmap & NET_SSH2_MASK_LOGIN)) {
        return false;
    }

    $remote_file = $this->_realpath($remote_file);
    if ($remote_file === false) {
        return false;
    }

    $packet = pack('Na*N2', strlen($remote_file), $remote_file, NET_SFTP_OPEN_READ, 0);
    if (!$this->_send_sftp_packet(NET_SFTP_OPEN, $packet)) {
        return false;
    }

    $response = $this->_get_sftp_packet();
    switch ($this->packet_type) {
        case NET_SFTP_HANDLE:
            $handle = substr($response, 4);
            break;
        case NET_SFTP_STATUS: // presumably SSH_FX_NO_SUCH_FILE or SSH_FX_PERMISSION_DENIED
            $this->_logError($response);
            return false;
        default:
            user_error('Expected SSH_FXP_HANDLE or SSH_FXP_STATUS', E_USER_NOTICE);
            return false;
    }

    if ($local_file !== false) {
        $fp = fopen($local_file, 'wb');
        if (!$fp) {
            return false;
        }
    } else {
        $content = '';
    }

    $read = 0;
    while (true) {
        if (strtolower(PHP_SAPI) != 'cli') { // run this if request is handled by a webserver (like your case)
            $my_iter++;

            if($my_iter > 1024){
                $my_iter = 0; // reset the counter
                echo "transferring ... " . date("G:i:s") . "<br />"; // send something to the buffer
            }

            // flush the buffers and prevent the timeout by actually outputting something to the browser
            ob_end_flush();
            ob_flush();
            flush();
            ob_start();
            usleep(100); // just in case, try removing this delay
        }

        $packet = pack('Na*N3', strlen($handle), $handle, 0, $read, 1 << 20);
        if (!$this->_send_sftp_packet(NET_SFTP_READ, $packet)) {
            if ($local_file !== false) {
                fclose($fp);
            }
            return false;
        }

        $response = $this->_get_sftp_packet();
        switch ($this->packet_type) {
            case NET_SFTP_DATA:
                $temp = substr($response, 4);
                $read+= strlen($temp);
                if ($local_file === false) {
                    $content.= $temp;
                } else {
                    fputs($fp, $temp);
                }
                break;
            case NET_SFTP_STATUS:
                $this->_logError($response);
                break 2;
            default:
                user_error('Expected SSH_FXP_DATA or SSH_FXP_STATUS', E_USER_NOTICE);
                if ($local_file !== false) {
                    fclose($fp);
                }
                return false;
        }
    }

    if ($local_file !== false) {
        fclose($fp);
    }

    if (!$this->_send_sftp_packet(NET_SFTP_CLOSE, pack('Na*', strlen($handle), $handle))) {
        return false;
    }

    $response = $this->_get_sftp_packet();
    if ($this->packet_type != NET_SFTP_STATUS) {
        user_error('Expected SSH_FXP_STATUS', E_USER_NOTICE);
        return false;
    }

    $this->_logError($response);

    // check the status from the NET_SFTP_STATUS case in the above switch after the file has been closed
    if ($status != NET_SFTP_STATUS_OK) {
        return false;
    }

    if (isset($content)) {
        return $content;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:15:00.603

你还可以做点别的...

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
$sftp->login('username', 'password');

$start = 0;
while (true) {
    $response = $sftp->get('1mb', false, $start, 1024);
    $start+= 1024;
    if (empty($response)) {
        break;
    }
    echo $response;
} 
```

IE。以多个块下载文件。

# mysql - 无法换卡

> ID：15570928
> 
> 赞同：1
> 
> 时间：2013-03-22T12:57:34.717
> 
> 标签：mysql, sql

我被困在这个问题上很长时间了。我不知道为什么我的卡表替换一直是0。

问了我朋友的帮助，他们告诉我这与加入牌桌有关。

QQn：对于给定时间段（包括两个给定日期），例如 2002 年 12 月 1 日至 2003 年 7 月 31 日，找出在指定时间段内至少拥有一张 EZ 链接卡的人的集合。

对于集合中的每个人，列出

(i) 所有者身份证，

(ii) 他/她在此期间发行的卡片总数，

(iii) 所有者仅对在给定期间发行的卡进行的换卡总数（截至当前日期）。

按所有者身份证的升序列出您的结果。

例如，人 S1111111 有 5 张卡 C1（2001 年 1 月 2 日发行）、C2（2002 年 12 月 11 日发行）、C3（2003 年 7 月 20 日发行，作为 C1 的替代品）、C4（2003 年 7 月 21 日作为替代品发行）用于 C2）和 C5（于 2012 年 8 月 2 日发布，作为 C4 的替代品）。

我已经解决了第一部分和第二部分，但无法解决第三部分。

这是我的查询：

```
create table card
(
CardID  int not null primary key,
OwnerNRIC   char(9),
IssuedDcardate  date,
StoredValue decimal (5,2),
OldCardID   int,
constraint card_fk foreign key (OldCardID) references card(CardID)
);

SELECT ownerNRIC AS NRIC,
  COUNT(ownerNRIC) AS Total_Cards_Issued_during_Period,
  COUNT(OldCardID) AS Total_Replacement_till_date_for_cards_issued_during_Period
FROM card

WHERE IssuedDcardate BETWEEN '2002-12-01' AND '2003-07-31' 
GROUP BY ownerNRIC; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:09:40.837

获取此信息的一种方法是使用子查询。子查询通过旧卡 ID 汇总信息，然后将其重新加入：

```
select ownerNRIC AS NRIC,
       COUNT(ownerNRIC) AS Total_Cards_Issued_during_Period,
       NumNewCards
from card c left outer join
     (select oldcardid, count(*) as numNewCards
      from card
      group by oldcardid
     ) oc
     on oc.oldcardId = c.cardid
WHERE IssuedDcardate BETWEEN '2002-12-01' AND '2003-07-31' 
group by ownerNRIC 
```

# android - 如何在 Android 中的 AchartEngine 饼图中显示百分比符号

> ID：15570930
> 
> 赞同：1
> 
> 时间：2013-03-22T12:57:40.660
> 
> 标签：android, achartengine, pie-chart

如何在 AchartEngine 饼图中显示百分比符号？

我已经用谷歌搜索并尝试通过使用显示百分比来实现它`renderer.setChartTitle("All");`

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:07:13.887

您还可以通过在每个系列的标题中包含它来在图例中使用它。

```
CategorySeries series = new CategorySeries("title"); 
```

# javascript - Javascript 鼠标移出问题

> ID：15570936
> 
> 赞同：0
> 
> 时间：2013-03-22T12:57:50.503
> 
> 标签：javascript

嗨，我不太了解 javascript，目前正在尝试调试。[http://llondon.online-folio.com/index.php](http://llondon.online-folio.com/index.php)上的鼠标悬停在滑块上的滑块区域停止旋转，但是当我将鼠标移出该区域时，它仍然保持空闲状态并且不会再次开始旋转。这是滑块的插件：[http ://www.dynamicdrive.com/dynamicindex17/tabcontent.htm](http://www.dynamicdrive.com/dynamicindex17/tabcontent.htm)

这是在鼠标悬停时停止旋转的代码：

```
this.tabs[i].onmouseover = function() {
    tabinstance.expandtab(this)
    tabinstance.cancelautorun() //stop auto cycling of tabs (if running)
    return false
} 
```

开始旋转有一个功能

```
.autorun() 
```

所以有人可以给我写几行代码，这样鼠标移开它就会再次开始旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:33:45.857

请尝试使用 Jquerytools [http://jquerytools.org/](http://jquerytools.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:24:01.340

你为什么不为此写一个鼠标移出事件？
例如
this.tabs[i].onmouseout = function() {
tabinstance.autorun(); //重启标签的自动循环
返回false
}

# c# - .NET 自定义配置文件提供程序方法

> ID：15570937
> 
> 赞同：1
> 
> 时间：2013-03-22T12:57:57.337
> 
> 标签：c#, .net, profile

我构建返回 ProfileBase.Create 的方法：

```
public class ProfilesProvider : ProfileBase, IProfilesProvider
{
    public ProfilesProvider GetUserProfile()
    {
        return (HttpContext.Current.Profile) as ProfilesProvider;
    }

    public ProfilesProvider GetUserProfile(string userName)
    {
        if (String.IsNullOrEmpty(userName))
            return (HttpContext.Current.Profile) as ProfilesProvider;

        return Create(userName) as ProfilesProvider;
    }
} 
```

此代码运行良好，但是当我尝试为此方法创建单元测试时出现错误：

> System.InvalidOperationException：在应用程序的预启动初始化阶段无法调用此方法。

PS这里是测试的代码：

```
_mockProfiles.Setup(m => m.GetUserProfile()).Returns(new ProfilesProvider());
        var result = _controller.Settings(model);

        _mockProfiles.Verify(m => m.GetUserProfile(), Times.Once());
        Assert.IsInstanceOfType(result, typeof(RedirectToRouteResult)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:59:37.573

已修复，我只是打破了 ProfileBase 和我的类之间的依赖关系。

# c# - C#二分查找，不同的对象类型

> ID：15570938
> 
> 赞同：2
> 
> 时间：2013-03-22T12:57:57.900
> 
> 标签：c#

我正在用 C# 制作一个小游戏。在其中，我有 Keyframe 对象，每个对象都有一个特定的时间，它们出现在一个排序列表中。我希望找到在特定时间之后发生的那个。如果不创建一个新的关键帧对象，然后在列表中搜索该对象，~ing 结果然后使用该对象，是否有一种语法*简洁*的方法来执行搜索？

例如：

```
double time = 10.0;
Keyframe blah = new Keyframe(time);
int index = _keyframes.BinarySearch(null, blah);
if (index < 0) index = ~index;
if (index >= _keyframes.Length) return null;
return _keyframes[index]; 
```

有效，但涉及创建新的关键帧对象。

任何人有一个简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:07:51.120

无法进入 .net 实现，BinarySearch 要求您将对象传递给搜索，或者编写您自己的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:32:14.930

您需要实现自己的方法来做到这一点。类似于以下内容：

```
public static class Extensions
{
    public static TList BinaryFind<TList>(this IList<TList> list, Func<TList, int> comparer)
    {
        if (!list.Any())
            return default(TList);

        int pivot = list.Count()/2;
        TList pivotVal = list[pivot];
        int conditionResult = condition(pivotVal);
        if (conditionResult == 0) 
            return pivotVal;
        else
        {
            if (conditionResult < 0) 
                return BinaryFind<TList, TSearchArg>(list.Take(pivot).ToList(), condition);
            else
                return BinaryFind<TList, TSearchArg>(list.Skip(pivot).ToList(), condition);
        }
    }
} 
```

然后你会使用它像

```
Keyframe result = _keyframes.BinaryFind(k => Double.Compare(k.Time, time)); 
```

# symfony - 如何在奏鸣曲管理员中基于另一个表单字段创建动态表单字段？

> ID：15570940
> 
> 赞同：3
> 
> 时间：2013-03-22T12:57:59.940
> 
> 标签：symfony, sonata-admin

如何根据另一个表单字段从 Sonata Admin 更新管理界面内特定表单字段的内容？

一个例子：我有一个实体合同多对一客户端，用户多对一客户端，用户多对一产品。当我在表单中选择合同时（选择输入），我希望我的产品选择仅更新相关产品。我知道如何创建自定义查询，但不知道如何通过 ajax 绑定它。

我可以在奏鸣曲管理员之外毫无问题地做到这一点，但不知道里面如何。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:37:23.347

你不能真正做到（或者至少我还没有找到办法做到这一点）。

他们最好的方法（或我如何做）是覆盖视图，创建自己的自定义表单并从那里使用 ajax。

# ruby - 为什么 rspec 在 rake 下这么慢？ruby_noexec_wrapper？

> ID：15570941
> 
> 赞同：1
> 
> 时间：2013-03-22T12:58:03.627
> 
> 标签：ruby, rspec, rake

我的规范代码的运行时间比预期的要长很多，但当我尝试在 下运行它们时`rspec-prof`，问题似乎消失了。最终，我追踪到`rake`本地运行与在解释器下运行的差异。

跑步只`rake`需要 75 秒，而跑步`ruby $(which rake)`只需要 12 秒。这速度快了*五倍*多。看一看：

```
$ rake
~/.rvm/rubies/ruby-1.9.2-p320/bin/ruby -w -S rspec spec/args_spec.rb spec/levels_spec.rb spec/opts_spec.rb spec/run_spec.rb spec/split_spec.rb spec/unit_spec.rb
~/.rvm/gems/ruby-1.9.2-p320/gems/bundler-1.2.3/lib/bundler/source.rb:516: warning: method redefined; discarding old revision
..................................................

Finished in 1 minute 14.39 seconds
50 examples, 0 failures

$ ruby `which rake`
~/.rvm/rubies/ruby-1.9.2-p320/bin/ruby -w -S rspec spec/args_spec.rb spec/levels_spec.rb spec/opts_spec.rb spec/run_spec.rb spec/split_spec.rb spec/unit_spec.rb
..................................................

Finished in 12.88 seconds
50 examples, 0 failures 
```

查看`rake`“#!”中显示的“包装二进制文件”的内容 它在解释器下运行的行 - `ruby_noexec_wrapper`- 并且确实将命令运行为：

```
ruby_noexec_wrapper $(which rake) 
```

给出同样缓慢的 75 秒运行。

任何想法为什么会这样？

除了避免直接运行 rake 之外，还有什么可以改进的吗？既然这是将 gem 包装成二进制文件的标准方法，那难道不会减慢所有 gem 打包工具的速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:45:01.657

我们看一下`ruby_noexec_wrapper`文件（rvm 1.16.17）：

```
#!/usr/bin/env ruby

original_file=ARGV[0]
ARGV.shift
$PROGRAM_NAME=original_file

require 'rubygems'
begin
  require 'rubygems-bundler/noexec'
rescue LoadError
  warn "unable to load rubygems-bundler/noexec" if ENV.key?('NOEXEC_DEBUG')
end

eval File.read(original_file), binding, original_file 
```

据我所知，两个警告区域是两个`require`语句。第一个，`require 'rubygems'`，不太可能是一个问题，因为 ruby​​ 1.9+[会自动执行此操作](https://stackoverflow.com/a/2711857/1087866)。

我认为问题出在`require 'rubygems-bundler/noexec'`. 如果你[看看它在做什么，](https://github.com/mpapis/rubygems-bundler/blob/master/lib/rubygems-bundler/noexec.rb)你会发现它正在设置捆绑器。这涉及到需要 gem，这可能是您启动缓慢的根源。

宝石在加载时不应该做很多事情，但不幸的是，他们中的许多人在这方面犯了一些错误。解决此问题的唯一方法是尝试找出导致大部分缓慢的宝石，并在可能的情况下找到替代方案。

# javascript - 如何在 Durandal 中使用 .cshtml 和 .html 文件

> ID：15570942
> 
> 赞同：0
> 
> 时间：2013-03-22T12:58:05.177
> 
> 标签：javascript, asp.net-mvc, durandal

我开始使用带有 asp.net MVC 的 DurandalJs 框架。它工作完美。

但现在我需要使用 .cshtml 文件作为 durandal 的视图。所以我添加到root web.config

```
<add key="webpages:Enabled" value="true" /> 
```

但是 DurandalJs 仍然尝试获取 .html 文件作为视图。

所以我更正了 viewEngine.js 文件：

```
 return {
    viewExtension: '.cshtml',
    viewPlugin: 'text', 
```

但现在 DurandalJs 要求所有视图文件都应具有“.cshtml”扩展名。

那么我可以同时使用“.html”和“.cshtml”文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:19:59.380

在 main.js 我添加了行：

```
viewLocator.useConvention('viewmodels', 'ViewsProxy/GetView?name=', 'ViewsProxy/GetView?name='); 
```

并实现 ViewsProxyController 如下：

```
public class ViewsProxyController : Controller
{
    public ActionResult GetView(string name)
    {
        string viewRelativePath = GetRelativePath(name);
        string viewAbsolutePath = HttpContext.Server.MapPath(viewRelativePath);

        if (!System.IO.File.Exists(viewAbsolutePath))
        {
            viewAbsolutePath = ReplaceHtmlWithCshtml(viewAbsolutePath);
            if (System.IO.File.Exists(viewAbsolutePath))
            {
                System.Web.HttpContext.Current.Cache.SetIsHtmlView(name, false);
                viewRelativePath = ReplaceHtmlWithCshtml(viewRelativePath);
                return PartialView(viewRelativePath);
            }
            throw new FileNotFoundException();
        }

        FilePathResult filePathResult = new FilePathResult(viewAbsolutePath, "text/html");
        return filePathResult;
    }

    private string ReplaceHtmlWithCshtml(string path)
    {
        string result = Regex.Replace(path, @"\.html$", ".cshtml");
        return result;
    }

    private string GetRelativePath(string name)
    {
        string result = string.Format("{0}{1}", AppConfigManager.DurandalViewsFolder, name);
        return result;
    }
} 
```

所以现在 durandal 应用程序可以使用 .html 和 .cshtml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:38:55.580

您需要更改路由以接受 cshtml 作为 MVC 路由的扩展。

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}.cshtml",
    defaults: new { controller = "Home", action = "Index", namespaces: new string[] { "PAWS.Web.Controllers" }
); 
```

此外，您需要确保您的应用程序池在集成而非经典模式下运行。

但我不建议这样做。您应该尝试不要让服务器呈现您的任何 HTML。原因在[这里解释](https://stackoverflow.com/questions/15554919/how-to-use-partial-views-with-durandal-js-mvc3/15559466#15559466)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:25:46.120

看看 Durandal`viewEngine`和`viewLocator`允许同时使用本地“.html”和远程“.cshtml”视图的自定义。

[是否可以有多个 viewEngine.viewExtension](https://stackoverflow.com/a/15488743/347309)

# svn - Visual Studio + IIS + SVN 源码切换

> ID：15570946
> 
> 赞同：1
> 
> 时间：2013-03-22T12:58:31.767
> 
> 标签：svn, visual-studio-2012, project-lifecycle

我有一个包含几个模块的解决方案（模块是指 MVC 应用程序、公共代码库、一些 Web 服务等）。发布过程是trunk > test > live。当一切正常时，它工作得很好。我收集我处理它们的新需求，然后我发布测试并从测试转移到生活。有时需求迫使我对最初会产生不稳定基础的东西进行更深入的重构。因此，当我在工作中时，我得到了新的超级待定要求，迫不及待地客户强迫我尽快发布。有时很难协商，因为他们无法理解标签的简单更改可能需要一两天的时间......所以我需要一些聪明的解决方案，如何在 SVN、Visual Studio 和 IIS 方面简单地在源之间切换。

关于超级挂起请求：我现在“切换”到我的 VS，我的 IIS 和 SVN 指向实时代码，所以我更改标签，提交到实时，发布到测试，而不是实时。

实现这一目标的好方法是什么？

# php - 从数据库中获取分层格式的类别

> ID：15570949
> 
> 赞同：1
> 
> 时间：2013-03-22T12:58:39.203
> 
> 标签：php, mysql

我有如下的 MySQL 类别表。哪个`parent`字段告诉`ID`父类别，`hassub`字段告诉类别是否有子类别。（我使用 PHP 作为基础。）

```
************************************
| ID  | parent  | name   | hassub  |
************************************
| 1   | 0       | Nature | 1       |
| 2   | 1       | foo    | 0       |
| 3   | 1       | bar    | 1       |
| 4   | 3       | bar1   | 0       |
| 5   | 0       | Anime  | 0       |
************************************ 
```

现在要以分层格式获取所有类别，有没有办法在尽可能少的 MySQL 查询中做到这一点？

> *   主要类别 1
>     *   子类别 1
>     *   子类别 2
>     *   子类别 3
> *   主要类别 2
> *   主要类别 3
>     *   子类别 1
>     *   子类别 2

我现在正在做的是获取所有行，`parent = 0`然后查询每一行以获取它的子类别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:59:13.237

这是在文本编辑器中手写的......我没有方便的开发环境，所以如果这只是完全错误或包含拼写错误，请原谅。

但无论如何，我认为这个想法是清晰/合理的。

将`$sql`是：

```
SELECT 
    parent.id as parentid,
    parent.[name] as parentname,
    child.[name] as childname

FROM
    category child

    left join category parent -- Can't exclude parents with no children, else they won't appear in the list!
    on child.parent = parent.id

ORDER BY
    parentid 
```

然后 PHP 将是：

```
function categoryLevels(){
    $bullet = "*"; // You can specify your HTML/CSS :-)
    $indent = "   "; // You can specify your HTML/CSS :-)

    $sql = "_as above_";
    $query = mysql_query($sql);
    $lastParentId = 0;
    while($row = mysql_fetch_array($query)){
        $parentId = $row['parentid']
        if ($parentId != 0) {
            if ($parentId != $lastParentId) {
                echo $bullet . $row['parentname']
                $lastParentId = $parentId;
            }
            if (!is_null($row['childname']) { // this line is psuedo-code! - don't know the php equiv for is_null, sorry.
                echo $indent . $bullet . $row['childname'];
            }
        }
    }
} 
```

其要点基本上是：

1.  获取所有类别的结果集（不包括没有父类的），按其所属的父类排序
2.  迭代该结果集，并为父项中的每个更改输出一个带有父项名称的“标题”。
3.  输出孩子。

将其编辑为不那么复杂（并且更快）。现在 SQL 完全排除了父行，而不是用`IF`PHP 中的语句排除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:26:57.780

您可以使用递归方法

```
function getSubCategories($parent_id = 0){

    $sql = "select col1, col2,... from table_name where parentt_id = ".$parent_id;
    $query = mysql_query($sql);
    while($row = mysql_fetch_array($query)){
        echo $row['category_name'];
        getSubCategories($row['category_id']);
    }
}

getSubCategories(); 
```

这将以分层格式打印所有类别。您可以使用相同的方式生成分层类别格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:51:23.670

您可以加入数据（前提是您知道要去的深度）。

例如：

```
CREATE TABLE`test` (
  `id` INT(11) unsigned NOT NULL AUTO_INCREMENT,
  `parent` INT(10) unsigned NOT NULL DEFAULT '0',
  `name` VARCHAR(50),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB;

INSERT INTO test (id, parent, name) values
(1, 0, 'Nature'),
(2, 1, 'Foo'),
(3, 1, 'Bar'),
(4, 3, 'Bar1'),
(5, 0, 'Anime'); 
```

我们知道有两个级别，因此只需要一个连接 - 每个级别都需要一个连接，这是邻接列表模型的众多缺点之一。

```
SELECT a.name AS 'Level 1', b.name AS 'Level 2' FROM test AS a
LEFT JOIN test AS b
  ON b.parent = a.id
WHERE a.parent = 0 
```

这将给出输出：

```
+---------+---------+
| LEVEL 1 | LEVEL 2 |
---------------------
|  Nature |     Foo |
|  Nature |     Bar |
|   Anime |  (null) |
+---------+---------+ 
```

从此输出中，您可以遍历数组并填充您的项目符号列表。

# cognos - “QE-DEF-0469 QE 消息”是什么意思？

> ID：15570950
> 
> 赞同：0
> 
> 时间：2013-03-22T12:58:40.123
> 
> 标签：cognos, cognos-8, cognos-bi, cognos-tm1

我正在开发 Cognos 10.1。

对于报告，我已经更新了包。当我在报告工作室中打开报告时，它显示类似**QE-DEF-0469 QE Message**的错误。这是什么意思？早期的回应将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:01:32.213

尝试在 Report Studio 中运行报告时出现以下错误。

QE-DEF-0469 QE 消息RQP-DEF-0542 元数据将从数据库中检索，因为元数据调控器已关闭（更改 FM 调控器：增强模型可移植性）。

解决问题

在 Framework Manager 中取消选中“允许在运行时增强模型可移植性”选项

步骤： 在 Framework Manager 中打开模型

单击任务部分中的编辑总督选项，或者转到项目菜单\编辑总督

取消选中“允许在运行时增强模型可移植性”复选框

资料来源：ibm.com

# java - 为空时，Orika 不会在目标上设置值

> ID：15570955
> 
> 赞同：0
> 
> 时间：2013-03-22T12:59:01.580
> 
> 标签：java, jakarta-ee, mapping, ejb, orika

尝试在目标上设置 null 时，我遇到了 Orika 的问题。

现在，当源具有值而目标为空时，我的实现工作得很好。它也适用于源和目标都有一个价值。问题是当我从源读取的值为 null 而在目的地不是。

我发现在 1.4.0 版本中，可以使用函数 ClassMapBuilder.mapNulls(true|false) 或 ClassMapBuilder.mapNullsInReverse(true|false) 来解决这个问题。

不幸的是，上面的代码似乎没有解决我的问题，因此目标字段始终保持不变，尽管它应该设置为 null（根据源）。

这是我尝试过的不同实现。

```
 MapperFactory myfact = new DefaultMapperFactory.Builder().build();
 ClassMapBuilder<E, D> mapBuilder = factory.classMap(dest, source).mapNulls(true);

 MapperFactory myfact = new DefaultMapperFactory.Builder().mapNulls(true).build();
 ClassMapBuilder<E, D> mapBuilder = factory.classMap(dest, source); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T08:18:20.763

这最终成为 Orika 软件中的一个问题。该错误已在 1.4.2 版中修复

# git - 当 repo 同步时，git 分支在 origin/master 之前

> ID：15570957
> 
> 赞同：7
> 
> 时间：2013-03-22T12:59:12.580
> 
> 标签：git, github

伙计们，

这是 git 中的一些东西，对我来说没有意义，这就是发生的事情

*   我做了一个`git status`，我看到我在分支 master 上，没有什么要提交的，工作目录是干净的。
*   然后`git pull origin master`我会拉一堆代码，没有问题。
*   现在当我这样做时，`git status`我看到一个新行**Your branch are ahead of origin/master by 1 commit**

我的本地 repo 和远程 repo 完全同步，**你的分支在 origin/master 之前 1 提交**意味着什么，这非常令人困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T14:40:15.510

我亲身经历了你所看到的。我在 git-scm.com 上找不到正确的解释，但我相信它是这样的：

1.  我从 origin 克隆了一个 repo，假设 origin 有 master 并且我现在在我的本地 repo 中有 master
2.  现在 origin 和您的 repo 引用了最后一次提交。此参考是主分支，并且该参考在您的本地仓库和原点上是相同的
3.  假设某人（除您之外）将新提交推送到原始主机
4.  你做`git pull origin master`
5.  现在你这样做`git status`了，你会看到你的分支提前到了 origin/master，即使你在本地 repo 中没有新的提交，也没有什么可推送的！（在此示例中，自第 1 步（克隆）以来，您没有在本地提交任何新内容）

`git pull origin`==>当我在主人时，我通过做一个来解决这个问题。

A`git pull origin master`会将所有新提交从原始分支拉到您的本地分支。

A`git pull origin`还将重新设置您对 master 的引用，等于 master 在 origin 上引用的提交！（如果没有发生这种情况，git-bash 只会认为您前面有很多提交！因为在提交树中，在您的主引用所在的提交之后有很多提交！）

这对你有意义吗？它对我有用:)

也请随时用确凿的证据/文件来支持我的观点:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T13:26:53.503

您已在本地计算机上添加了一个提交，该提交尚未发送到远程服务器。

如果您确信您的修改应该与远程存储库共享，则使用以下`git push`命令将提交发送到远程：

```
git push orgin master:master 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:49:57.540

正如您所想的那样，您并没有与远程存储库 100% 同步。您拥有远程存储库中的所有内容，是的。但是您的本地 master 领先于 origin/master 一个提交。

运行它，并向我们展示结果：

```
git log --all --graph --pretty=format:'%h %d %s' 
```

我希望看到类似的东西：

```
* (master) Commit D
* (origin/master) Commit C
* Commit B
* Commit A 
```

如果我正确阅读了您的帖子，那么您将提前提交一次，因为您有 D 而远程分支位于 C。您必须将`git push`提交 D 推送到远程存储库。然后你将 100% 同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:20:29.957

实际上，您假设您的本地分支和远程分支是同步的。如果说您的本地分支比 origin/master 早 1 次提交，那么肯定是。我们都信任 GIT。

用这个来测试。

```
git checkout master // You move to master branch
cat .git/HEAD //shows the commit on which HEAD is pointing to

git checkout origin/master //you switch to origin master branch
cat .git/HEAD 
```

如果您在本地 master 和远程 master 分支中看到 HEAD 指向相同的提交，那么两者都是同步的。

如果您的本地分支在 1 次提交之前，只需将其推送（如果需要）到您的远程分支

```
git push origin master 
```

# javascript - 在另一个表单上自动更改单选选项

> ID：15570963
> 
> 赞同：0
> 
> 时间：2013-03-22T12:59:40.020
> 
> 标签：javascript, jquery, ajax

我在一个网页中有两种表格，例如

```
<tr>
  <td>
    <h4>Team A[Form1]</h4>
    <form name="form1" enctype="multipart/form-data">
     <input type="radio" value="batting" name="teamA" /> Batting<br />
      <input type="radio" value="bowling" name="teamA" /> Bowling<br />
    </form>
  </td>
  <td>
    <h4>Team B[Form2]</h4>
    <form name="form2" enctype="multipart/form-data">
     <input type="radio" value="batting" name="teamB" /> Batting<br />
      <input type="radio" value="bowling" name="teamB" /> Bowling<br />
    </form>
  </td>
 </tr> 
```

以及如何在 form1 选择上自动选择第二个表单单选按钮。如果我在表单 1 中选择击球，则将表单 2 按钮更改为选择保龄球。

我正在尝试这样做

```
<script type="text/javascript">
     if(document.form1.teamA.checked = 'batting') {
         document.form2.teamB.checked = 'bowling';
     }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:09:29.523

您可以使用`data`属性来定义哪个字段应该“连接”到哪个按钮：

```
<form name="form1" id="form1" enctype="multipart/form-data">
    <input type="radio" value="batting" data-toggle="bowling" name="teamA" />Batting
    <br />
    <input type="radio" value="bowling" data-toggle="batting" name="teamA" />Bowling
    <br />
</form> 
```

JS

```
$('#form1 :radio').change(function () {
    $('#form2 :radio').filter('.' + $(this).data('toggle')).prop('checked', true);
}); 
```

[http://jsfiddle.net/hVkmM/](http://jsfiddle.net/hVkmM/)

因此，如果有一天值更改或添加了新选项，javascript 代码将继续工作。

或者像这样：

```
$('#form1 :radio').change(function () {
    $('#form2 :radio[value="' + $(this).data('toggle') + '"]').prop('checked', true);
}); 
```

[http://jsfiddle.net/hVkmM/1/](http://jsfiddle.net/hVkmM/1/)

您甚至可以进行双向绑定，以便检查第二种形式的单选按钮会更改第一种形式的状态：

[http://jsfiddle.net/hVkmM/2/](http://jsfiddle.net/hVkmM/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:07:53.260

```
$('form[name="form1"] input[type=radio][name=teamA]').change(function(){
     var radiosFrom2ndForm = $('form[name="form2"] input[type=radio][name=teamB]');
     for(var i = 0; i < radiosFrom2ndForm.length; i++)
          if(radiosFrom2ndForm[i].value !== this.value)
               radiosFrom2ndForm[i].checked = true;
}); 
```

[小提琴](http://jsfiddle.net/UXZ3c/1/)

选择：

```
$('form[name="form1"] input[type=radio][name=teamA]').change(function(){
     $('form[name="form2"] input[type=radio][name=teamB][value!=' + this.value + ']').prop('checked', true);
}); 
```

[小提琴](http://jsfiddle.net/UXZ3c/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:07:56.230

使用以下代码

```
 <script>
    $(document).ready(function(){

$("input[name='teamA']").change(function(){

    if($("input[name='teamA']:checked").val() == "batting")
    {
       $("input:radio[name='teamB'][value='bowling']").attr('checked', 'checked');
    }
    if($("input[name='teamA']:checked").val() == "bowling")
    {
       $("input:radio[name='teamB'][value='batting']").attr('checked', 'checked');
    }

});

});
    </script> 
```

看看这个小提琴[http://jsfiddle.net/z8Lnd/5/](http://jsfiddle.net/z8Lnd/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:08:39.457

这应该比以前的版本更好：

```
$(document).ready(function(){
 $("#form1 input:radio[id='bowling']").prop("click",true);
    $("#form1 input:radio").on("change",function(){
   $("#form2 input:radio[id='bowling']").prop("checked", $("#batting").prop("checked"));
    });
}); 
```

[http://jsfiddle.net/rMYrj/2/](http://jsfiddle.net/rMYrj/2/)

还对您的 HTML 进行了一些更改，以便您可以在选择器中使用 id

# javascript - php 在提交时显示警报而不是加载操作链接

> ID：15570972
> 
> 赞同：0
> 
> 时间：2013-03-22T13:00:21.883
> 
> 标签：javascript, forms

请帮忙，我还是不明白，你能改变需要的东西吗，这是我的完整代码：

```
<form action='https://api.website.co.za/blabla?' method="get" target="POPUPW" onSubmit="alert('Done'); " >

<div align="center"><br />

<input name="user" type="hidden" value="user" />
<input name="pass" type="hidden" value="password" />
<input name="account" type="hidden" value="<?php echo "$username" ?>" />

Topup Amount : 
<select name="amount" size="1">
  <option value="">  select...  </option>
  <option value="1">1GB</option>
  <option value="2">2GB</option>
  <option value="3">3GB</option>
  <option value="4">4GB</option>
  <option value="5">5GB</option>
  <option value="6">6GB</option>
  <option value="7">7GB</option>
  <option value="8">8GB</option>
  <option value="9">9GB</option>
  <option value="10">10GB</option>
  <option value="11">11GB</option>
  <option value="12">12GB</option>
  <option value="13">13GB</option>
  <option value="14">14GB</option>
  <option value="15">15GB</option>
  <option value="16">16GB</option>
  <option value="17">17GB</option>
  <option value="18">18GB</option>
  <option value="19">19GB</option>
  <option value="20">20GB</option>

</select>

<input type="submit" name="sub" value="Submit in Popup">
</form> 
```

我有一个带有 api 链接的表单，因为表单操作和方法是 get....基本上它从表单获取信息并获取输入的值，然后在表单操作中将其添加到我的 api 链接的末尾。

现在我试图让它只在你点击提交后才显示一个警报，而不是加载 api 链接页面，有什么想法吗？

目前它显示警报但也会在我不想要的新页面中加载 api 链接，它仍应提交该 api 链接但仅显示警报。

多谢你们 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:06:42.210

这应该这样做......（未经测试）

在 jQuery 的帮助下：

```
<form id="myform" action='https://api.website.co.za/blabla/?' method="get">
[...]
</form>
<script type="text/javascript">
$('#myform').on('submit', function(e){
    e.preventDefault();
    $.get($(this).attr('action') + $(this).serialize(), function(result){
         alert('DONE');
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:01:31.103

在 onsubmit 中添加 ajax 调用，然后添加`return false;`以防止回发。

```
<form action='https://api.website.co.za/blabla/?' method="get" target="POPUPW" onSubmit="yourAjaxMethod(); alert('Done'); return false;" > 
```

通过使用 ajax，您可以提交表单数据而无需回发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:05:17.027

编辑：

通过 ajax 提交并添加`e.preventDefault();`after `alert()`，如下所示：

```
<form action='https://api.website.co.za/blabla/?' method="get" target="POPUPW">

<script>
    $('form').submit(function() {
        //Send from using an Ajax call
        e.preventDefault();    
    }); 
```

# solr - 如何更改此 solr 查询

> ID：15570974
> 
> 赞同：0
> 
> 时间：2013-03-22T13:00:29.643
> 
> 标签：solr

这是我在用户输入某些字符时对 solr 的查询，例如我

```
http://localhost:8983/solr/db/select?q=(name:I*) OR (lastname: I*) OR (midname:I*)&fl=name, midname,lastname&rows=5&wt=json&indent=true&group=true&group.field=lastname&group.ngroups=true"; 
```

我应该如何将查询更改为 solr 所以 Icanget

1.  first - 以这个字符开头的名字和姓氏的人

2.  如果没有 - 第二个 - 那些只有名字以这个字符开头的人

3.  如果没有 -third - 那些只有姓氏以这个字符开头的人

4.  如果没有 - 中间名以 I 开头的那些

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:28:36.987

除非您正在编写自定义搜索组件或根据先前的查询结果再次触发查询，否则无法检查 0 结果。

对于订购，您可以提升查询部分，以便条件匹配

像这样的东西`(name:I*)^10 OR (lastname: I*)^5 OR (midname:I*)^1`

# jquery - 使用 AJAX 进行验证

> ID：15570975
> 
> 赞同：0
> 
> 时间：2013-03-22T13:00:30.407
> 
> 标签：jquery, ajax, validation

以下 jQuery 验证运行良好，但是 AJAX 调用中存在错误，因为它返回不成功。完整代码在这里[http://jsfiddle.net/YJwsZ/6/](http://jsfiddle.net/YJwsZ/6/)

我对 AJAX 也很陌生。

我希望以下内容成功返回：

```
// AJAX call
$.ajax({
    url:url_site,
    data : data,
    // dataType: 'json',
    type: 'post',
    success: function(r){
        if (r.success) {
            alert('success');
        }
        else {
            alert('unsuccessful');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:13:26.390

尝试重建您的 ajax 调用并将成功回调添加为链式函数。您可能还想创建一个实际回答您的测试用例的小 php 脚本。请参阅[文档](http://api.jquery.com/jQuery.ajax/#jqXHR)！

[http://jsfiddle.net/VyFng/1/](http://jsfiddle.net/VyFng/1/)

```
$.ajax({
    url: url_site,
    data: data,
    // dataType: 'json',
    type: 'post',
}).done(function(data, textStatus, jqXHR) {
    alert(textStatus);
})
.fail(function(jqXHR, textStatus, errorThrown) {
    alert(textStatus);
})
.always(function(dataOrJqXHR, textStatus, jqXHRorErrorThrown) {
    alert('callback after ' + textStatus + ' callback has been completed');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:02:57.040

它可能不成功，因为**url_site**设置不正确。重新检查您尝试连接的文件的路径。如果您无法获得适合您的相对位置，请使用绝对路径。

# ruby-on-rails-3 - 无法使用 LinkedIn API 获取志愿者体验

> ID：15570980
> 
> 赞同：0
> 
> 时间：2013-03-22T13:00:43.240
> 
> 标签：ruby-on-rails-3, gem, linkedin

我正在使用 LinkedIn API，`linkedin gem`但似乎无法使用正确的密钥来获得某个用户的志愿者体验。我试过了`volunteer-experience`，`volunteer-experiences`和`volunteer-experience-fields`。我还没有找到正确的答案。

我得到的错误是

```
(400): Unknown field {volunteer-experiences} in resource {Person} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:58:12.183

还带了我一些谷歌搜索。

这可能是你想要的::(志愿者:(志愿者经验、原因、支持的组织))

[http://electric-meadow-1119.herokuapp.com/linkedin](http://electric-meadow-1119.herokuapp.com/linkedin)

[https://apigee.com/console/linkedin](https://apigee.com/console/linkedin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T11:27:16.593

```
volunteer:(volunteer-experiences:(id,role,organization:(name),cause:(name))) 
```

似乎工作。

# html - 将两个相互堆叠

> ID：15570994
> 
> 赞同：13
> 
> 时间：2013-03-22T13:01:21.317
> 
> 标签：html, css, html-table

我目前正在努力使网站具有响应性，但问题是，我需要在不触及页面内容的情况下使其具有响应性。所以页面上的一切都保持不变，但我希望使用新的样式表和一点 Javascript（但主要是 CSS）来完成这项任务。

该网站主要由表格组成。因此，当调整浏览器的大小（或使用移动设备访问）时，我希望我的“tr”中的第二个“td”堆叠在第一个下方，而不是两者相邻.

我给 'td' 元素一个左浮动和 100% 的宽度，它在 Firefox 中运行良好，但在 Chrome 和 Safari 中，'td' 都是 50% 并且在同一行。

如果您有任何想法，请告诉我，不胜感激！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-22T13:08:04.703

使用`display:block`在您`tr td`的适应布局。

```
tr td {
  padding: 20px 40px;
  border: 1px solid black;
  display: block;
}
```

```
<table>
  <tr>
    <td>Damn</td>
    <td>This</td>
    <td>Table</td>
    <td>Layout</td>
  </tr>
</table>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T13:07:21.653

尝试使用 CSS 更改显示，使其转到另一行：

```
td {
  display: block;
  clear:both;
} 
```

[查看刚刚制作](http://jsfiddle.net/LBTCk/)的示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:07:44.273

您尝试做的事情要么不起作用，要么让您头疼。表格不是为响应式设计而设计的。如果你说你不能触摸代码，那么你就非常卡住了。解决这个问题的最佳方法是重写代码并在相关的地方用 DIV、Ps 等替换任何表，并使用 CSS、jquery 和媒体查询来使您的网站响应。

当前，您可以尝试使站点响应的唯一方法是在页面加载时使用 jquery 将所有表替换为 DIV、Ps 等，然后继续使用 CSS、jquery 和媒体查询来尝试使站点响应。这不是推荐的方法，我什至不能保证这会 100% 工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:05:16.507

您是否尝试过`div`在表格单元格中放置两个 s 并在其`float left`上放置 a 。当桌子倒塌时，它们应该堆叠起来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T13:07:26.217

听起来您正在使用表格进行布局而*不是*表格数据。表格*只能*用于表格数据。

您需要改为使用[分组内容](http://www.w3.org/TR/html5/grouping-content.html)；更具体地说，[`div`元素](http://www.w3.org/TR/html5/grouping-content.html#the-div-element)：

```
<div>
    <div>Top</div>
    <div>Bottom</div>
</div> 
```

值得注意的是，根据顶部和底部容器中存在的内容类型，您可能希望[完全使用不同的元素](http://www.w3.org/TR/html5/text-level-semantics.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T13:14:10.337

另一种可能性是将政府网站嵌套在一个`iframe`.

# watir - 如何在 Watir 中找到 data-id？

> ID：15570995
> 
> 赞同：5
> 
> 时间：2013-03-22T13:01:22.423
> 
> 标签：watir, watir-webdriver

我是新来的水测试。有人能帮我找到以下元素吗？

```
<div class="location_picker_type_level" data-loc-type="1">
  <table></table>
</div> 
```

我喜欢找到这个`div`，`data-loc-type`存在`table`。

## 前任：

```
browser.elements(:xpath,"//div[@class='location_picker_type_section[data-loc-type='1']' table ]").exists? 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T14:24:47.300

Watir 支持使用`data-`类型属性作为定位器（即无需使用 xpath）。只需用下划线替换破折号并在开头添加一个冒号。

您可以使用以下方法获取 div（注意属性定位器的格式： data-loc-type -> :data_loc_type ）：

```
browser.div(:class => 'location_picker_type_level', :data_loc_type => '1') 
```

如果只希望有一个这种类型的 div，您可以通过执行以下操作检查它是否有一个表：

```
div = browser.div(:class => 'location_picker_type_level', :data_loc_type => '1')
puts div.table.exists?
#=> true 
```

如果有多个匹配的 div 并且您想检查其中至少一个有表，请使用集合的`any?`方法：`divs`

```
#Get a collection of all div tags matching the criteria
divs = browser.divs(:class => 'location_picker_type_level', :data_loc_type => '1')

#Check if the table exists in any of the divs
puts divs.any?{ |d| d.table.exists? }
#=> true

#Or if you want to get the div that contains the table, use 'find'
div = divs.find{ |d| d.table.exists? } 
```