# StackOverflow 问答 14134000-14134999

# objective-c - 用超级马里奥帮助我理解Objective C，这是正确的吗？

> ID：14134003
> 
> 赞同：1
> 
> 时间：2013-01-03T06:21:42.423
> 
> 标签：objective-c, oop, object

在编程方面，我是一个完全的新手，我年轻时的大部分时间都集中在设计、CSS/HTML 上，最后决定我应该跳到编程领域。

我一直在阅读 Stephen Kochan 的书“Objective C 编程”，我大约有 4 章，希望对面向对象编程的概念进行一些澄清。以游戏开发为例，或多或少的对象、类和方法的概念。

因此，如果我们以《超级马里奥兄弟》为例，忽略游戏很可能不是使用 Objective C 开发的事实。

据我了解...

因此，如果“食人鱼植物”是该类...是否会咀嚼食人鱼植物和吐火的食人鱼植物都是该类（食人鱼植物）的对象？

然后您会将方法应用于这些对象，例如：

咀嚼食人鱼植物（对象）：从管咬中向上/向下

火球食人鱼植物（物体）：从管道上升/下降发射火球

...？

我完全误解了这个概念吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T06:52:24.703

咀嚼和吐火的食人鱼植物是基本食人鱼植物的特化或改进；它们很可能是子类。子类可以做超类可以做的所有事情，但有一些自己的特殊技巧。

由于这两种类型都在管道中上下移动，这将是基本食人鱼植物类的一种方法；这是*所有*食人鱼植物共有的行为。无论他们在弹出后做什么奇怪的事情，也可能是父类上的一个方法，它会被每个子类覆盖，如下所示：

```
@interface PiranhaPlant : NSObject
// Declare properties, other methods...

- (void) ascendFromPipe: (NSRect)pipeFrame;
- (void) doThingThatIDoOnceFullyExtended;
@end

@implementation

//...

- (void) ascendFromPipe: (NSRect)pipeFrame
{
    // ...drawing/animation stuff

    [self doThingThatIDoOnceFullyExtended];
    [self descendIntoPipe];
}

- (void) doThingThatIDoOnceFullyExtended
{
    return;
}

//...
@end 
```

* * *

```
@interface FireSpittingPiranhaPlant : PiranhaPlant
@end

@implementation FireSpittingPiranhaPlant

- (void) doThingThatIDoOnceFullyExtended
{
     [self spitFireball];
}

@end 
```

对于其他子类也是如此。

然后，您将实例化任何类别的单个食人鱼植物，以填充单个管道。他们每个人都会按照班级的定义行事——一个大嚼，一个吐火，一个完全跳出管道，四处追赶马里奥。

# javascript - 使用 require 时的 Node js 和 new

> ID：14134004
> 
> 赞同：6
> 
> 时间：2013-01-03T06:21:49.883
> 
> 标签：javascript, node.js, require

我一直在尝试整理 node.js 中其他 js 文件的包含。

我已经阅读了有关 require 函数和其他替代方法的所有内容，并决定使用 require 函数（因为代码只会在 node.js 上使用，而不是在浏览器中使用）。

在我的代码中，我使用原型来创建一个“对象”，稍后我希望创建一个实例。

为了让它工作，我一直在编写如下代码（我们称之为vehicle.js）：

```
var util = require('util');
var EventEmitter = require('events').EventEmitter;

module.exports = Vehicle;

util.inherits(Vehicle, EventEmitter);

function Vehicle(options) {
    EventEmitter.call(this);
    options = options || {};
    ...
}

Vehicle.prototype._doStartEvent = function(data) {
    this.emit('start', data);
};

Vehicle.prototype.testRun = function() {
    this._doStartEvent();
}; 
```

然后在我的主 js（我们称之为 server.js）中，我有以下内容：

```
var test = exports;
exports.Vehicle = require('./vehicle.js');

var remoteVehicle = new test.Vehicle({address: "192.168.1.3"});

remoteVehicle.on('start', function(d) {console.log('started');});

remoteVehicle.testRun(); 
```

现在这一切都很好，但我对正在发生的事情没有很好的理解。

我主要关心的是`var test = exports;`then的使用`exports.Vehicle = require(...)`。

我试着做一些类似`var vehicle = require(...).Vehicle`and`var vehicle = require(...)`的事情，目的是使用`new Vehicle`或类似的东西，但我无法让它工作。

我是否被迫使用出口，如果是，为什么？

请注意，我一直以 AR Drone 项目为例，上面的代码是基于他们在内部完成模块的方式。请参阅[Client.js](https://github.com/felixge/node-ar-drone/blob/master/lib/Client.js)和[index.js](https://github.com/felixge/node-ar-drone/blob/master/index.js)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T09:06:48.483

结果`require`是对导出对象的引用，在您的情况下它是函数。只需分配给与类（或任何其他）同名的变量并用作参数`new`

```
var Vehicle = require('./vehicle.js');

var remoteVehicle = new Vehicle({address: "192.168.1.3"});

remoteVehicle.on('start', function(d) {console.log('started');});

remoteVehicle.testRun(); 
```

# php - 从 PHP 数组中删除 NULL、FALSE 和 '' - 但不是 0 -

> ID：14134006
> 
> 赞同：43
> 
> 时间：2013-01-03T06:22:09.910
> 
> 标签：php, arrays, array-filter

我想删除`NULL`,`FALSE`和`''`values 。

我用过`array_filter`，但它也删除了`0`'s。

有什么功能可以做我想做的吗？

```
array(NULL,FALSE,'',0,1) -> array(0,1) 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-03T06:28:08.747

[`array_filter`](http://php.net/manual/en/function.array-filter.php)如果您使用[**`identical`比较运算符**](http://php.net/manual/en/language.operators.comparison.php)，应该可以正常工作。

[这是一个例子](http://codepad.org/ppRy0PcT)

```
$values = [NULL, FALSE, '', 0, 1];

function myFilter($var){
  return ($var !== NULL && $var !== FALSE && $var !== '');
}

$res = array_filter($values, 'myFilter'); 
```

或者如果不想定义过滤函数，也可以使用**匿名函数**（闭包）：

```
$res = array_filter($values, function($value) {
    return ($value !== null && $value !== false && $value !== ''); 
}); 
```

如果您只需要数值，您可以使用[is_numeric](http://php.net/manual/en/function.is-numeric.php)作为回调：[示例](http://codepad.org/MTMUkwGb)

```
$res = array_filter($values, 'is_numeric'); 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-12-16T09:26:47.290

来自[http://php.net/manual/en/function.array-filter.php#111091](http://php.net/manual/en/function.array-filter.php#111091)：

如果要删除 NULL、FALSE 和空字符串，但保留值为 0，则可以使用 strlen 作为回调函数：

```
array_filter($array, 'strlen'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T06:37:51.860

`array_filter`不起作用，因为默认情况下，它会删除与 等效的任何内容`FALSE`，并且 PHP 认为`0`等效于 false。[PHP手册](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)对此主题有这样的说法：

> 转换为布尔值时，以下值被视为 FALSE：
> 
> *   布尔值 FALSE 本身
> *   整数 0（零）
> *   浮点数 0.0（零）
> *   空字符串和字符串“0”
> *   一个元素为零的数组
> *   具有零成员变量的对象（仅限 PHP 4）
> *   特殊类型 NULL（包括未设置的变量）
> *   从空标签创建的 SimpleXML 对象
> 
> 其他所有值都被视为 TRUE（包括任何资源）。

您可以通过`array_filter`回调将第二个参数传递给您自己编写的函数，该函数告诉您`array_filter`是否删除该项目。

假设您要删除*除*零之外的所有 FALSE 等效值，这是一个易于编写的函数：

```
function RemoveFalseButNotZero($value) {
  return ($value || is_numeric($value));
} 
```

然后你只需用过滤后的数组覆盖原始数组：

```
$array = array_filter($array, "RemoveFalseButNotZero"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T06:26:55.443

使用带有 array_filter 的自定义回调函数。请参阅此示例，从 PHP 手册中提取，了解如何使用回调函数。示例中的回调函数是基于奇/偶的过滤；您可以编写一个小函数来根据您的要求进行过滤。

```
<?php
function odd($var)
{
    // returns whether the input integer is odd
    return($var & 1);
}

function even($var)
{
    // returns whether the input integer is even
    return(!($var & 1));
}

$array1 = array("a"=>1, "b"=>2, "c"=>3, "d"=>4, "e"=>5);
$array2 = array(6, 7, 8, 9, 10, 11, 12);

echo "Odd :\n";
print_r(array_filter($array1, "odd"));
echo "Even:\n";
print_r(array_filter($array2, "even"));
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-18T03:57:45.010

单线总是很好。

```
$clean_array = array_diff(array_map('trim', $my_array), array('', NULL, FALSE)); 
```

**解释：**

*   **的第一个参数`array_diff`：**的修剪版本`$my_array`。使用，通过函数`array_map`从每个元素中修剪周围的空白。`trim`如果元素包含的字符串只是空格（即制表符、空格），最好使用修剪后的版本，我假设它也希望被删除。如果您不想修剪元素，则可以轻松地将 $my_array 用作第一个参数。
*   **的第二个参数`array_diff`：**要从中删除的项目数组`$my_array`。
*   **输出：**包含在第一个数组中但不包含在第二个数组中的元素数组。在这种情况下，因为`''`、`NULL`和`FALSE`位于第二个数组中，所以它们永远不会被 . 返回`array_diff`。

**编辑：**

事实证明，您不需要在第二个数组中拥有`NULL`and 。`FALSE`相反，您可以只拥有`''`，它的工作方式相同：

```
$clean_array = array_diff(array_map('trim', $my_array), array('')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T06:26:51.403

检查它是否小于 1 和大于 -1 如果然后不删除它...

```
$arrayValue = (NULL,FALSE,'',0,1);
$newArray = array();
foreach($arrayValue as $value) {
    if(is_int($value) || ($value>-1 && $value <1)) {
        $newArray[] = $value;
    }
}

print_r($newArray); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T06:28:36.557

```
function my_filter($var)
{
    // returns values that are neither false nor null (but can be 0)
    return ($var !== false && $var !== null && $var !== '');
}

$entry = array(
             0 => 'foo',
             1 => false,
             2 => -1,
             3 => null,
             4 => '',
             5 => 0
          );

print_r(array_filter($entry, 'my_filter')); 
```

输出：

```
Array
(
    [0] => foo
    [2] => -1
    [5] => 0
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-14T16:31:53.217

或者，您可以使用`array_filter`参数`'strlen'`：

```
// removes all NULL, FALSE and Empty Strings but leaves 0 (zero) values
$result = array_filter($array, 'strlen'); 
```

[https://www.php.net/manual/en/function.array-filter.php#111091](https://www.php.net/manual/en/function.array-filter.php#111091)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-03T06:36:10.827

```
function ExtArray($linksArray){
    foreach ($linksArray as $key => $link)
    {
        if ($linksArray[$key] == '' || $linksArray[$key] == NULL || $linksArray[$key] == FALSE || $linksArray[$key] == '')
        {
            unset($linksArray[$key]);
        }else {
            return $linksArray[$key];
        }
    }
} 
```

这个功能可以帮助你

# tomcat - 自定义 JMXAuthenticator 和 Tomcat？

> ID：14134008
> 
> 赞同：0
> 
> 时间：2013-01-03T06:22:45.853
> 
> 标签：tomcat, rmi, jmx

我想知道是否可以在 Tomcat 中使用自定义 JMXAuthenticator。

从这个链接[http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html](http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html)，我知道 Tomcat 可以通过身份验证启用 JMX 远程。**但它基于密码和访问文件。**

我的场景有点复杂，

1.  在启用 JMX 远程的情况下启动 tomcat（首选 6.0）
2.  其中一个 webapps 注册了自己的 MBean（例如 XXConfig）
3.  启动我自己的 JMX 客户端并通过 RMI 连接到 tomcat
4.  **tomcat 通过我的专有协议验证连接（例如从数据库、文件等读取）**
5.  JMX 客户端 r/w JVM 信息和 MBean（如果有）

有没有办法重定向身份验证？

我对 Java 和 JMX 也几乎是新手，所以如果我理解和表达有误，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:56:44.693

JMX 支持通过 JAAS 自定义身份验证。

[https://blogs.oracle.com/lmalventosa/entry/jmx_authentication_authorization](https://blogs.oracle.com/lmalventosa/entry/jmx_authentication_authorization)

您可能还会发现 catalina-jmx-remote.jar 很有用（在 Tomcat 站点上搜索）。

# .net - 设计时反思

> ID：14134016
> 
> 赞同：10
> 
> 时间：2013-01-03T06:23:48.167
> 
> 标签：.net, visual-studio, reflection, t4, design-time

有没有办法在设计时进行反射预编译？

我的意图是使用 T4 根据实现某些接口的类来生成自定义代码。我知道我可以调用反射，但我希望 T4 脚本在编译之前吐出额外的代码，否则我需要编译代码两次，一次生成 dll，两次让 T4 反映之前生成的 dll 并添加额外的脚手架。

有没有办法在设计时进行反思？

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-18T15:36:32.333

[实际上有一种基于Visual Studio Automation](http://msdn.microsoft.com/en-us/library/envdte%28v=vs.110%29.aspx)提供的 CodeModel 生成代码预构建的方法：项目接口提供了一个属性“CodeModel”，其中包含该项目中所有模型工件的图表。您可能希望遍历它以查找生成输出代码的类、接口、属性……。

dandrejw 已经提到了[有形 T4-Editor](http://t4-editor.tangible-engineering.com/T4-Editor-Visual-T4-Editing.html)。它有一个免费的模板库。有一个可重用的模板“有形的 Visual Studio 自动化助手”，它对您的情况应该非常有帮助。使用此模板，您可以像这样解决您的问题：

这是 t4 模板中的代码，用于检测实现 INotifyPropertyChanged 的​​所有类。

```
<#
    // get a reference to the project of this t4 template
    var project = VisualStudioHelper.CurrentProject;
    // get all class items from the code model
    var allClasses = VisualStudioHelper.GetAllCodeElementsOfType(project.CodeModel.CodeElements, EnvDTE.vsCMElement.vsCMElementClass, false);

    // iterate all classes
    foreach(EnvDTE.CodeClass codeClass in allClasses)
    {
        // get all interfaces implemented by this class
        var allInterfaces = VisualStudioHelper.GetAllCodeElementsOfType(codeClass.ImplementedInterfaces, EnvDTE.vsCMElement.vsCMElementInterface, true);
        if (allInterfaces.OfType<EnvDTE.CodeInterface>()
                         .Any(i => i.Name == "INotifyPropertyChanged"))
        {
            #>Render your code here<#
        }
    }
#> 
```

将您的输出代码放在代码片段显示“在此处呈现您的代码”的位置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-12T19:34:59.957

对于没有心情尝试让 T4 VisualStudioHelper 模板正常工作的任何未来读者，下面是一个独立的模板，它枚举了当前项目中的所有类。它在 Visual Studio 2013 中进行了测试，并受到[T4 站点上的代码的启发](http://t4-editor.tangible-engineering.com/blog/walking-the-visual-studio-code-model-with-t4-template.html "T4站点")

```
<#@ template  debug="true" hostSpecific="true" #>
<#@ output extension=".cs" #>
<#@ Assembly Name="System.Core" #>
<#@ assembly name="EnvDte" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Collections.Generic" #> 
<#    
  foreach(var ns in GetNamespaceElements())
  {
    foreach(var cc in ns.Members.OfType<EnvDTE.CodeClass>())
    {
#>Render your code here<#
    }
  }
#>

<#+
  public IEnumerable<EnvDTE.CodeNamespace> GetNamespaceElements()
  {
    var visualStudio = (this.Host as IServiceProvider).GetService(typeof(EnvDTE.DTE))
                        as EnvDTE.DTE;
    var project = visualStudio.Solution.FindProjectItem(this.Host.TemplateFile)
                  .ContainingProject as EnvDTE.Project;

    var projItems = new List<EnvDTE.ProjectItem>();
    FillProjectItems(project.ProjectItems, projItems);
    var names = new HashSet<string>(projItems
      .Where(i => i.FileCodeModel != null)
      .SelectMany(i => i.FileCodeModel.CodeElements.OfType<EnvDTE.CodeElement>())
      .Where(e => e.Kind == EnvDTE.vsCMElement.vsCMElementNamespace)
      .Select(e => e.FullName));

    var codeNs = new List<EnvDTE.CodeNamespace>();
    FillCodeNamespaces(project.CodeModel.CodeElements.OfType<EnvDTE.CodeNamespace>(), codeNs);

    return codeNs.Where(ns => names.Contains(ns.FullName));
  }

  public void FillCodeNamespaces(IEnumerable<EnvDTE.CodeNamespace> parents, List<EnvDTE.CodeNamespace> all)
  {
    foreach (var parent in parents)
    {
      all.Add(parent);
      FillCodeNamespaces(parent.Members.OfType<EnvDTE.CodeNamespace>(), all);
    }
  }

  public void FillProjectItems(EnvDTE.ProjectItems items, List<EnvDTE.ProjectItem> ret)
  {
    if (items == null) return;
    foreach(EnvDTE.ProjectItem item in items)
    {
      ret.Add(item);
      FillProjectItems(item.ProjectItems, ret);
    }
  }
#> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:43:30.900

我知道这样做的唯一方法是利用一些代码解析功能。我想不出办法来做到这一点。我确信.NET 有一些实用程序可以做到这一点。

我不确定你的情况是什么，但通常不是阅读代码，而是你有一些集中的信息，无论是 XML 文件还是一些用于从中生成代码的 UML 图（甚至是类图）。它简化了一些事情，使更改变得更容易，并让代码生成吐出更改。查看 Visual Studio 的有形 T4 工具。

# c - 实现类似算法的首次拟合

> ID：14134020
> 
> 赞同：10
> 
> 时间：2013-01-03T06:24:12.183
> 
> 标签：c, algorithm, job-scheduling

问题：我有 3 台机器，每台机器有 30 毫秒的时间限制，每台机器有 3 个区域不能在那里执行任务。任务有 P（优先级）和 W（权重，这是在此设置中完成任务的时间），任务必须首先按优先级排序，从低到高，如下所示：

Task 01 {6, 2} // P/W = 3 此任务最后执行 (3)

Task 02 {7, 7} // P/W = 1 这个任务首先执行 (1)

Task 03 {4, 2} // P/W = 2 此任务第二次执行 (2)

现在，为了执行一个任务（我有 6 个），我必须检查所有 3 台机器以找到第一个适合任务的机器，要选择适合任务的机器，它必须是 3 台机器中的最佳机器，例如：

机器01；|-----5----9--------16-17--19-20|

机器 02：|----4-5--7-8---------17-18--|

机器03：|-----5---8--10---13--15---18--|

(1)Task 02 在机器 02 执行（我们寻找 P ms 执行任务，以及启动任务的最短时间，因为机器 01（从 9 ms 开始）和 02（从 8 ms 开始）都有 7 ms空闲时间，机器02可以先开始一个任务，然后机器01）。

(2)Task 03 在机器 02 中执行（我们寻找 P ms 来执行任务）。

(3)Task 01 在机器 01 中执行（我们寻找 P ms 来执行任务）。

某些时间段被定义为关键时间段，不能用于安排作业。这些周期（例如 5-9、7-8）存储在专用 struct`z_indispo`中。

该`bfeet`结构用于在女巫中存储任务开始和在女巫机器中。

我主要在 C 中实现了整个算法，但我的结果与预期的不同：

```
#include <stdio.h>

typedef struct _z_indispo {
    int t1;
    int t2;
} z_indispo; 

typedef struct _machines {
    int t[20]; // array represent time
    z_indispo zone[2];
} machines;

typedef struct _tache {
    int p;
    int w;
    int c; //  p/w
    int i; // Task number
} tache;

typedef struct _bfeet {
    int t; // Store the time to of ending execution by a task
    int m; // The machine responsible for executing a task.
} bfeet;

int main(int argc, char **argv)
{
    machines m[4];
    tache j[6];
    tache j_tmp;
    bfeet b[4];
    int i = 0;
    int n = 0;
    int u = 0;
    int k = 0;
    int count = 0;
    int trouver = 0;
    int f_totale = 0;
    int f[3] = {0};

    m[0].zone[0].t1 = 7;
    m[0].zone[0].t2 = 9;
    m[0].zone[1].t1 = 14;
    m[0].zone[1].t2 = 15;

    m[1].zone[0].t1 = 8;
    m[1].zone[0].t2 = 9;
    m[1].zone[1].t1 = 16;
    m[1].zone[1].t2 = 17;

    m[2].zone[0].t1 = 7;
    m[2].zone[0].t2 = 8;
    m[2].zone[1].t1 = 18;
    m[2].zone[1].t2 = 19;

    /*
     * Initialise all machines
     *   0: Represent free time.
     *  -1: Represent critical zone range.
     *  -2: Represent a task already executed. 
     */
    for(i = 0; i< 3; ++i)
    {
        for(count = 0; count < 20; ++count)
        {
            if((count >= m[i].zone[0].t1 - 1 && count <= m[i].zone[0].t2 - 1) || 
               (count >= m[i].zone[1].t1 - 1 && count <= m[i].zone[1].t2 - 1))
            {
                m[i].t[count] = -1;
            }
            else
            {
                m[i].t[count] = 0;
            }
        }
    }

    for(i = 0; i< 3; ++i)
    {
        if(i == 0)
            printf("   D(1,1)           t1    s1  D(1,2)     t2 s2  D(1,3)\n");
        else if(i == 1)
            printf("   D(2,1)              t1 s1  D(2,2)           t2 s2  D(2,3)\n");
        else if(i == 2)
            printf("   D(3,1)           t1 s1  D(3,2)                    t2 s2  D(3,3)\n");
        printf("|");
        for(count = 0; count < 20; ++count)
        {
                printf("%3d", m[i].t[count]);

        }

        printf(" |\n\n");
    }

    j[0].p = 5;
    j[0].w = 2;
    j[0].i = 1;

    j[1].p = 9;
    j[1].w = 3;
    j[1].i = 2;

    j[2].p = 6;
    j[2].w = 3;
    j[2].i = 3;

    j[3].p = 6;
    j[3].w = 4;
    j[3].i = 4;

    j[4].p = 7;
    j[4].w = 7;
    j[4].i = 5;

    /*
     * Calc C = P/W .
    */
    for(count = 0; count < 5; ++count)
    {
        j[count].c = j[count].p / j[count].w;
    }

    /*
     * Sort tasks from low to hight
     */
    for(count = 0; count < 5; ++count)
    {
        for(k = 0; k < 5 - count; ++k)
        {
            if(j[k].c > j[k + 1].c)
            {
                j_tmp = j[k + 1];
                j[k + 1] = j[k];
                j[k] = j_tmp;
            }
        }
    }

    /*printf("|%2J  |%2   P  |%2  W  | C  |\n");
    printf("_____________________\n");
    for(count = 0; count < 5; ++count)
    {
        printf("|%-4d|%-4d|%-4d|%-4d|\n", j[count].i, j[count].p, j[count].w, j[count].c);
    }

    printf("\n");*/

    /*
     * Execute tasks
     */
    while(n < 5) 
    {
        for(count = 0; count < 3; ++count)
        {
            i = 0;
            trouver = 0;
            while(i <= 20 && trouver != 1)
            {
                if(m[count].t[i] == 0) // We have a  free time to start with it.
                {
                    u = 0; // num of available indexs.
                    while(m[count].t[i] != -1 && m[count].t[i] != -2)
                    {
                        if(u == j[n].p)
                            break;

                        ++u;
                        ++i;
                    }

                    if(u < j[n].p)
                    {
                        while(m[count].t[i] == -1 && m[count].t[i] == -2) // bypass unfree unites
                            ++i;
                    }
                    else if(u == j[n].p)
                    {   
                        b[count].t = i - u;
                        b[count].m = count; // 
                        trouver = 1; // we find the Necessary unites to start a task
                    }
                }
                else
                    ++i;
            }
        }

        if(u < j[n].p)
            printf("There is no free time to execute task %d", j[n].i);
        else
        {
            // Find the minimum time in all machines to start a task
            b[3].t = b[0].t;
            b[3].m = b[0].m;
            for(count = 0; count < 3; ++count)
            {
                if(b[3].t > b[count + 1].t)
                {
                    b[3].t = b[count + 1].t;
                    b[3].m = b[count + 1].m;
                }
            }

            // Put -2 to indicate that index is unfree
            u = b[3].t + j[n].p;
            for(count = b[3].t; count < u; ++count)
            {
                m[b[3].m].t[count] = -2;
            }

            if(b[3].m == 0)
                f[0] = (b[3].t + j[n].p);
            else if(b[3].m == 1)
                f[1] = (b[3].t + j[n].p);
            else if(b[3].m == 2)
                f[2] = (b[3].t + j[n].p);

            printf("Task %d end at %-2d, machine %d.\n", j[n].i, b[3].t + j[n].p, b[3].m + 1);
        }
        ++n;
    }  

    printf("\n"); 
    f_totale = f[0] + f[1] + f[2];
    printf("F of machine 01: %d.\n", f[0]); 
    printf("F of machine 02: %d.\n", f[1]); 
    printf("F of machine 03: %d.\n", f[2]); 
    printf("Total F: %d.\n", f_totale); 
    printf("\n"); 
    /*printf("\n"); 
    for(i = 0; i< 3; ++i)
    {
        if(i == 0)
            printf("   D(1,1)           t1    s1  D(1,2)     t2 s2  D(1,3)\n");
        else if(i == 1)
            printf("   D(2,1)              t1 s1  D(2,2)           t2 s2  D(2,3)\n");
        else if(i == 2)
            printf("   D(3,1)           t1 s1  D(3,2)                    t2 s2  D(3,3)\n");
        printf("|");
        for(count = 0; count < 20; ++count)
        {
                printf("%3d", m[i].t[count]);

        }

        printf(" |\n\n");
    }*/

    return 0;
} 
```

**更新：** 我现在每台机器上只有两个不可用区域。我还更新了代码以修复一些错误，但我仍然得到与此示例不同的输出：我有这个不可用区域：

```
m[0].zone[0].t1 = 7;
m[0].zone[0].t2 = 9;
m[0].zone[1].t1 = 14;
m[0].zone[1].t2 = 15;

m[1].zone[0].t1 = 8;
m[1].zone[0].t2 = 9;
m[1].zone[1].t1 = 16;
m[1].zone[1].t2 = 17;

m[2].zone[0].t1 = 7;
m[2].zone[0].t2 = 8;
m[2].zone[1].t1 = 18;
m[2].zone[1].t2 = 19; 
```

5个任务：

```
p | 6 9 5 7 6
w | 3 3 2 7 4 
_______________
c | 2 3 2 1 1 
```

订购后`c`：

```
p | 7 6 5 6 9
w | 7 4 2 3 3 
_______________
c | 1 1 2 2 3 
```

任务的执行应该是这样的：

```
 J4                              
|_______7__9_____14_15__________| ms 
```

任务 04 应该在 7 结束，P 代表执行任务所需的时间。

```
 J5                                                    
|________8_9__________16_17_____| ms 
```

任务 05 应在 7 结束。

```
 J1        J3                                             
|_______7_8_______________18_19_| ms 
```

任务 01 应在 6 结束，任务 03 应在 14 结束。

**更新 02：（**此*问题已修复*）

我注意到我的程序中有一个奇怪的行为，在我初始化 m[i].t[count] 数组后，我发现负责存储不可用区域的变量发生了变化： 注意：这个问题已修复。

**UPDATE03：（**此*问题已解决，但有新问题*）

我有一个任务找不到必要的单元开始的情况，我从来没有收到这个消息“没有空闲时间来执行任务”，我应该为任务 2 收到它，因为它有 9 个单元，并且所有机器没有这样的空闲时间。负责此测试的代码：

```
 for(count = 0; count < 3; ++count) // search on all machines
    {
        i = 0;
        trouver = 0;
        while(i < 20 && trouver != 1)
        {
            if(m[count].t[i] == 0) // We have a  free time to start with it.
            {
                u = 0; // num of available indexs.
                while(m[count].t[i] != -1 && m[count].t[i] != -2)
                {
                    if(u == j[n].p)
                        break;

                    ++u;
                    ++i;
                }

                if(u < j[n].p)
                {
                    while(m[count].t[i] == -1 && m[count].t[i] == -2) // bypass unfree unites
                        ++i;
                }
                else if(u == j[n].p)
                {   
                    b[count].t = i - u;
                    b[count].m = count; // 
                    trouver = 1; // we find the Necessary unites to start a task
                }
            }
            else
                ++i;
        }
    }
    /* u represent the number of continuous free time, 
       j[n].p represent the necessary time to execute the current task, n is the current task 
    if(u < j[n].p) 
        printf("There is no free time to execute task %d", j[n].i);
    else
    {
        // Find the minimum time in all machines to start a task
        b[3].t = b[0].t;
        b[3].m = b[0].m; 
```

**更新04：**

现在我可以在没有空闲时间执行任务时看到排除的任务，但是，输出不正确，因为我看到一个任务覆盖了另一个任务的周期时间：

```
while(n < 5) 
{
    k = 0;
    for(count = 0; count < 3; ++count)
    {
        i = 0;
        u = 0;
        trouver = 0;
        while(i < 20 && trouver != 1)
        {
            if(m[count].t[i] == 0) // We have a  free time to start with it.
            {
                //u = 0; // num of available indexs.
                if(u == j[n].p)
                    break;
                else
                {       
                    ++u;
                    ++i;
                }
            }

        if(u != j[n].p)
        {
            if((m[count].t[i] == -1 || m[count].t[i] == -2))// bypass unfree unites
            {
                u = 0;
                ++i;
            }
        }

        if(u == j[n].p)
        {   
            ++k;
            b[count].t = i - u;
            b[count].m = count; // 
            trouver = 1; // we find the Necessary unites to start a task
        }
    }
}

if(u != j[n].p)
{
    printf("There is no free time to execute task %d.\n", j[n].i);
}
else
{
    // Find the minimum time in all machines to start a task
    b[3] = b[0];
    for(count = 0; count < 3; ++count)
    {
        if(b[count].t != 0)
            if(b[3].t > b[count + 1].t)
            {
                b[3] = b[count + 1];
            }
    }

    // Put -2 to indicate that index is unfree
    u = b[3].t + j[n].p;
    for(count = b[3].t; count < u; ++count)
    {
        m[b[3].m].t[count] = -2;
    }

    if(b[3].m == 0)
        f[0] = (b[3].t + j[n].p);
    else if(b[3].m == 1)
        f[1] = (b[3].t + j[n].p);
    else if(b[3].m == 2)
        f[2] = (b[3].t + j[n].p);

    printf("Task %d end at %-2d, machine %d.\n", j[n].i, b[3].t + j[n].p, b[3].m + 1);
}

++n; 
```

}

**输出：**

```
 D(1,1)           t1    s1  D(1,2)     t2 s2  D(1,3)
|  0  0  0  0  0  0 -1 -1 -1  0  0  0  0 -1 -1  0  0  0  0  0 |

   D(2,1)              t1 s1  D(2,2)           t2 s2  D(2,3)
|  0  0  0  0  0  0  0 -1 -1  0  0  0  0  0  0 -1 -1  0  0  0 |

   D(3,1)           t1 s1  D(3,2)                    t2 s2  D(3,3)
|  0  0  0  0  0  0 -1 -1  0  0  0  0  0  0  0  0  0 -1 -1  0 |

| J  | P  | W  | C  |
_____________________
|1   |5   |2   |2   |
|2   |7   |3   |2   |
|3   |8   |3   |2   |
|5   |17  |7   |2   |
|4   |16  |4   |4   |

Task 1 end at 5 , machine 1.
Task 2 end at 7 , machine 1.
Task 3 end at 8 , machine 1.
There is no free time to execute task 5.
There is no free time to execute task 4.

F of machine 01: 8.
F of machine 02: 0.
F of machine 03: 0.
Total F: 8.

   D(1,1)           t1    s1  D(1,2)     t2 s2  D(1,3)
| -2 -2 -2 -2 -2 -2 -2 -2 -1  0  0  0  0 -1 -1  0  0  0  0  0 |

   D(2,1)              t1 s1  D(2,2)           t2 s2  D(2,3)
|  0  0  0  0  0  0  0 -1 -1  0  0  0  0  0  0 -1 -1  0  0  0 |

   D(3,1)           t1 s1  D(3,2)                    t2 s2  D(3,3)
|  0  0  0  0  0  0 -1 -1  0  0  0  0  0  0  0  0  0 -1 -1  0 | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T01:27:46.187

我发现问题在于我如何在机器中搜索最小启动时间来启动任务：

```
....

// Find the minimum time in all machines to start a task
b[3] = b[0]; // this cause the problem
for(count = 0; count < 3; ++count)
{
    if(b[count].t != 0)
        if(b[3].t > b[count + 1].t)
        {
            b[3] = b[count + 1];
        }
} 
```

`b[3]`因为 start 可能是指无法启动当前任务的机器，所以我做了一点改动：

```
// Find the minimum time in all machines to start a task
            for(count = 0; count < 3; ++count)  // search only in the machines that can execute the current task
            {
                if(b[count].m != -1)
                {
                    b[3] = b[count];
                    break;
                }
            }

            for(count = 0; count < 3; ++count)  // search for the first machines that can execute the current task
            {
                if(b[count].m != -1)
                {
                    if((b[3].t > b[count + 1].t) && (b[count + 1].m != -1)) // make sure the next machine can start the current task
                    {
                        b[3] = b[count + 1];
                    }
                }
            } 
```

完整的算法：

```
#include <stdio.h>

typedef struct _z_indispo {
    int t1;
    int t2;
} z_indispo; 

typedef struct _machines {
    int t[20]; // array represent time
    z_indispo zone[2];
} machines;

typedef struct _tache {
    int p;
    int w;
    int c; //  p/w
    int i; // Task number
} tache;

typedef struct _bfeet {
    int t; // Store the time to of ending execution by a task
    int m; // The machine responsible for executing a task.
} bfeet;

int main(int argc, char **argv)
{
    machines m[4] = {0};
    tache j[6];
    tache j_tmp;
    bfeet b[4] = {0};
    int i = 0;
    int n = 0;
    int u = 0;
    int k = 0;
    int count = 0;
    int trouver = 0;
    int f_totale = 0;
    int f[3] = {0};

    m[0].zone[0].t1 = 7;
    m[0].zone[0].t2 = 9;
    m[0].zone[1].t1 = 14;
    m[0].zone[1].t2 = 15;

    m[1].zone[0].t1 = 8;
    m[1].zone[0].t2 = 9;
    m[1].zone[1].t1 = 16;
    m[1].zone[1].t2 = 17;

    m[2].zone[0].t1 = 7;
    m[2].zone[0].t2 = 8;
    m[2].zone[1].t1 = 18;
    m[2].zone[1].t2 = 19;

    /*
     * Initialise all machines
     *   0: Represent free time.
     *  -1: Represent critical zone range.
     *  -2: Represent a task already executed. 
     */
    for(i = 0; i< 3; ++i)
    {
        for(count = 0; count < 20; ++count)
        {
            if((count >= m[i].zone[0].t1 - 1 && count <= m[i].zone[0].t2 - 1) || 
               (count >= m[i].zone[1].t1 - 1 && count <= m[i].zone[1].t2 - 1))
            {
                m[i].t[count] = -1;
            }
            else
            {
                m[i].t[count] = 0;
            }
        }
    }

    for(i = 0; i< 3; ++i)
    {
        if(i == 0)
            printf("   D(1,1)           t1    s1  D(1,2)     t2 s2  D(1,3)\n");
        else if(i == 1)
            printf("   D(2,1)              t1 s1  D(2,2)           t2 s2  D(2,3)\n");
        else if(i == 2)
            printf("   D(3,1)           t1 s1  D(3,2)                    t2 s2  D(3,3)\n");
        printf("|");
        for(count = 0; count < 20; ++count)
        {
                printf("%3d", m[i].t[count]);

        }

        printf(" |\n\n");
    }

    j[0].p = 5;
    j[0].w = 2;
    j[0].i = 1;

    j[1].p = 7;
    j[1].w = 3;
    j[1].i = 2;

    j[2].p = 4;
    j[2].w = 1;
    j[2].i = 3;

    j[3].p = 6;
    j[3].w = 4;
    j[3].i = 4;

    j[4].p = 7;
    j[4].w = 7;
    j[4].i = 5;

    /*
     * Calc C = P/W .
    */
    for(count = 0; count < 5; ++count)
    {
        j[count].c = j[count].p / j[count].w;
    }

    /*
     * Sort tasks from low to hight
     */
    for(count = 0; count < 5; ++count)
    {
        for(k = 0; k < 5 - count; ++k)
        {
            if(j[k].c > j[k + 1].c)
            {
                j_tmp = j[k + 1];
                j[k + 1] = j[k];
                j[k] = j_tmp;
            }
        }
    }

    printf("|%2J  |%2   P  |%2  W  | C  |\n");
    printf("_____________________\n");
    for(count = 0; count < 5; ++count)
    {
        printf("|%-4d|%-4d|%-4d|%-4d|\n", j[count].i, j[count].p, j[count].w, j[count].c);
    }

    printf("\n");

    /*
     * Execute tasks
     */
    while(n < 5) 
    {
        k = 0;
        for(count = 0; count < 3; ++count)
        {
            i = 0;
            u = 0;
            trouver = 0;
            while(i < 20 && trouver != 1)
            {
                if(m[count].t[i] == 0) // we find a free unite
                {
                    while(m[count].t[i] == 0 && u != j[n].p && i < 20) // count a continues free  time, quit when u equal the necessary time to execute the current task
                    {
                        ++u;
                        ++i;
                    }

                    if(u == j[n].p) // we found a free continues time
                    {
                        b[count].t = i - u; // save the starting index
                        b[count].m = count; // save the machine responsible for executing the current task
                        ++k;
                        trouver = 1;
                    }
                    else if(u != j[n].p) // if we encounter zone unavailability or index reserved by another task
                    {
                        u = 0; // restart u counter
                        while((m[count].t[i] == -1 || m[count].t[i] == -2) && (i < 20)) // bypass reserved/unavailability index's
                            ++i;
                    }
                }
                else
                    ++i; // bypass reserved/unavailability index's
            }

            if(trouver != 1) // we mark this machine as it can't execute the current task
            {
                b[count].m = -1;
            }
        }

        if(k == 0)
            printf("There is no free time to execute task %d.\n", j[n].i);
        else
        {
            // Find the minimum time in all machines to start a task
            for(count = 0; count < 3; ++count)  // search only in the machines that can execute the current task
            {
                if(b[count].m != -1)
                {
                    b[3] = b[count];
                    break;
                }
            }

            for(count = 0; count < 3; ++count)  // search only in the machines that can execute the current task
            {
                if(b[count].m != -1)
                {
                    if((b[3].t > b[count + 1].t) && (b[count + 1].m != -1))
                    {
                        b[3] = b[count + 1];
                    }
                }
            }

            // Put -2 to indicate that index as unfree
            u = b[3].t + j[n].p;
            for(count = b[3].t; count < u; ++count)
            {
                m[b[3].m].t[count] = -2;
            }

            if(b[3].m == 0)
                f[0] = f[0] + (b[3].t + j[n].p) * j[n].w;
            else if(b[3].m == 1)
                f[1] = f[1] + (b[3].t + j[n].p) * j[n].w;
            else if(b[3].m == 2)
                f[2] = f[2] + (b[3].t + j[n].p) * j[n].w;

            printf("Task %d end at %-3dms, machine %d.\n", j[n].i, b[3].t + j[n].p, b[3].m + 1);
        }
        ++n;
    }  

    printf("\n"); 
    f_totale = f[0] + f[1] + f[2];
    printf("F of machine 01: %d.\n", f[0]); 
    printf("F of machine 02: %d.\n", f[1]); 
    printf("F of machine 03: %d.\n", f[2]); 
    printf("Total F: %d.\n", f_totale); 
    printf("\n"); 
    printf("\n"); 
    for(i = 0; i< 3; ++i)
    {
        if(i == 0)
            printf("   D(1,1)           t1    s1  D(1,2)     t2 s2  D(1,3)\n");
        else if(i == 1)
            printf("   D(2,1)              t1 s1  D(2,2)           t2 s2  D(2,3)\n");
        else if(i == 2)
            printf("   D(3,1)           t1 s1  D(3,2)                    t2 s2  D(3,3)\n");
        printf("|");
        for(count = 0; count < 20; ++count)
        {
                printf("%3d", m[i].t[count]);

        }

        printf(" |\n\n");
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T08:43:59.050

您的数组定义中存在持续的短一错误。基本上，C 数组是零索引的，所以如果你想访问`array[n]`，`array`必须至少用 size 定义`n+1`。例如你的机器结构应该是

```
typedef struct _machines {
    int t[20];
    z_indispo zone[2];
} machines; 
```

因为您访问`machine.t[20]`和`machine.zone[1]`.

这解决了您的第二次更新中的问题（内存被踩到这样是一个很好的指标，表明您正在索引超出数组的末尾）。`main()`一旦您以类似方式修复数组初始化（例如您正在访问`b[3].t`，但由于您通过`bfeet b[3]`它定义它只有索引），第一个可能会得到修复（或者至少您将在解决方案的道路上走得更远）`b[0]`,`b[1]`和`b[2]`)。

# c# - 如何循环用户控件

> ID：14134021
> 
> 赞同：2
> 
> 时间：2013-01-03T06:24:34.527
> 
> 标签：c#, winforms, loops, user-controls

我有显示问题`usercontrol`，我有一个名为which has and`usercontrol`的面板，现在，当我单击时，我希望在每次单击时显示，就像在每次单击时添加一行，我只是不知道如何循环它，我尝试使用索引...`rowpanel``textbox``combobox``button_1``usercontrol`

**代码**

```
 private void button1_Click(object sender, EventArgs e)

        {
            AddRow add = new AddRow();
            show_pnl.Controls.Add(add);
        } 
```

**AddRow**是`usercontrol`...这是一个 Windows 应用程序，我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:54:04.903

原因是它们相互重叠。要修复它增加顶部和/或左侧，如下所示：

```
private const int gap = 20;
private int count = 0;
private void button1_Click(object sender, EventArgs e)
{
    var add = new UserControl1();
    add.Top = count * (add.Height + gap);
    show_pnl.Controls.Add(add);
    count++;
} 
```

# jsf - RemoveAll 按钮后未清除

> ID：14134024
> 
> 赞同：0
> 
> 时间：2013-01-03T06:24:52.833
> 
> 标签：jsf, jsf-2, primefaces

我遇到了一个奇怪的问题`<p:pickList>`。当我打开一个包含此 pickList 的对话框并使用 RemoveAll 按钮清除目标列表中的所有项目并使用目标列表中`<p:commandButton>`的旧项目提交时，仍然会出现。我已经给出`required=true`了pickList 的属性。奇怪的行为是当我提交它时，会出现一个工具提示，说该字段是强制性的。

那么，如果项目正在清除并且`required`属性工作正常，为什么旧​​项目会重新出现？解决方案是什么？

```
<p:pickList id="selectedId" value="#{someDialog.selectedItem}"
            var="item" itemValue="#{item}" required="true"
            converter="pickListConverter" requiredMessage="#{msg.required_message}" 
            styleClass="#{component.valid ? '': 'ui-state-error'}">
        </p:pickList> 
```

**编辑：** Backing Bean - 我只发布相关方法。 **SomeDialog.java**

```
 private DualListModel<Item> selectedItem = new DualListModel<Item>();
 //Its getters and setters

public final void afterSave(final ParamObject pObject) {
        pObject.getRelevantData().clear();
        pObject.getRelevantData().addAll(selectedItem.getTarget());
    } 
```

**参数对象.java**

```
private List<Item> relevantData = new ArrayList<Item>();
//Setters and Getters 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:14:24.180

正如@Xtreme Biker 在您的支持bean 中提到的那样。

当您第一次提交列表时，您将其设置在 backing bean 中。第二次打开对话框时，它已经存在了。即使您按 RemoveAll，它也只会在您的浏览器中删除，它不适用于 backing bean。而且您的提交将不起作用，因为您已要求= true。

因此，您可以选择以下选项之一：

1.  remove required=true 每次提交后，您需要按 RemoveAll 并再次提交空列表（它不是一个选项）。
2.  在 backing bean 中完成所有必需的任务后，清除 someDialog.selectedItem 值，更新并关闭对话框。
3.  每次打开对话框时都会清除 backing bean 中的 someDialog.selectedItem 值。

我希望它会有所帮助，因为我也是新来的。

# ruby-on-rails - 创建数据库时出现 Rails/Ruby 错误：无法加载 EventMachine C 扩展

> ID：14134033
> 
> 赞同：7
> 
> 时间：2013-01-03T06:26:06.067
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, eventmachine

**更新：**

eventmachine gem 已安装并在我的 gemfile 中：

```
 eventmachine (1.0.0, 0.12.10) 
```

**请帮忙！尝试使用以下内容创建数据库：**

```
Fitzs-MacBook-Pro:twilio_insanity Fitz$ rake db:create' 
```

**返回以下错误：**

> 无法加载 EventMachine C 扩展；要使用纯红宝石反应器，需要 'em/pure_ruby' rake 中止！无法加载此类文件 -- ruby​​eventmachine /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/eventmachine-1.0.0/lib/eventmachine.rb:8:in `require' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/eventmachine-1.0.0/lib/eventmachine.rb:8:in` ' /Users/Fitz/ .rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/thin-1.5.0/lib/thin.rb:7:in `require' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/thin-1.5.0/lib/thin.rb:7:in` ' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327 @global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in` 块（2 级）在 require' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@global/ gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in` block in require' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3 /lib/bundler/runtime.rb:55:in `each' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in` 需要' `require' /Users/Fitz/Desktop/twilio_insanity/config/application.rb:7:in`/Users/Fitz/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler.rb:128:in'/Users/Fitz/Desktop/twilio_insanity/Rakefile :5:in `require' /Users/Fitz/Desktop/twilio_insanity/Rakefile:5:in`' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/bin/ruby_noexec_wrapper:14:in `eval' /Users/Fitz/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/bin/ruby_noexec_wrapper:14:in` ' （通过使用 --trace 运行任务查看完整跟踪）

```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-19T10:03:00.777

尝试重新安装 gem 'eventmachine'

```
$ gem uninstall eventmachine 
```

然后

```
$ bundle install  ( in the same folder with your Gemfile) 
```

要不就

```
$ gem install eventmachine ( if you are not using the Gemfile) 
```

见：[https ://stackoverflow.com/a/15140634/445908](https://stackoverflow.com/a/15140634/445908)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T04:38:27.643

有人在评论中回答......见下文。

基本上，虽然我有单独的 Ruby 版本，但由于某些 gem 只安装在某些版本的 ruby​​ 上，这让我感到困惑。

**修复完全卸载 ruby​​ 和 rails，然后重新安装。修复！**

这有助于：

另一个线程中的[此评论似乎对您的问题很有希望。](https://stackoverflow.com/questions/9332810/ruby-on-rails-cannot-load-such-file-eventmachine/9389570#9389570)你能确保你的 Gemfile 中有“gem eventmachine”或类似的东西，并且可以成功捆绑吗？——斯科特赫尔姆 1 月 6 日 6:24

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-12T15:34:58.927

将 ruby​​ 从 1.9.3 升级到 2.4 后，我在 Windows 上遇到了同样的错误。我尝试了我找到的每一个修复程序，但最终唯一有帮助的是（不是那么明显，因此很难找到）**用 32 位而不是 64**重新**安装**新的**Ruby**。

 **我也安装了Eventmachine

```
gem install eventmachine --platform=ruby 
```

强制本地编译，因为我总是遇到 msgpack 的问题，可以这样解决（没有尝试过默认`x86-mingw32`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-24T16:41:38.583

我在 Windows 10 上。`C:\Ruby25-x64\lib\ruby\gems>bundle install`显示`Could not locate Gemfile`错误（不过，我安装了 bundle gem 并出现在 \gems 位置）。以下为我解决了无法加载 EventMachine C 扩展错误：

1.  `gem uninstall eventmachine`
2.  `gem install eventmachine --platform ruby`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T07:11:14.470

只需尝试以下操作：

```
apt-get install libssl0.9.8 
```

它修复了 Ubuntu 12.4 上的错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-06T12:31:02.883

如果这些解决方案中的任何一个都不起作用，请尝试使用在 OS X 上对我有用的方法从源重新安装 eventmachine gem：[https ://stackoverflow.com/a/20950026/83055](https://stackoverflow.com/a/20950026/83055)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-06T12:35:34.260

确保在 Gemfile 中捆绑 eventmachine

```
gem "eventmachine" 
```

然后`bundle install`。 [这条评论](https://stackoverflow.com/a/9389570/1518852)似乎与您有关。**

# flash - 需要帮助理解复杂的 ActionScript

> ID：14134034
> 
> 赞同：0
> 
> 时间：2013-01-03T06:26:07.960
> 
> 标签：flash, encryption, actionscript

我遇到了这个我无法理解的 ActionScript 片段。有谁能够帮我？特别是这一行：

```
(((_local3 >>> _local2[((_arg1 + 1) + ((_local4 - (_local4 % 3)) / 3))]) & 0xFF) ^ (_local2[_arg1] ^ 13592211)).writeByte(!null!); 
```

整体功能：

```
public function _StrPool170(_arg1:int):string{
    var _local2:* = new array(13592197, 2171943, 3679800, 2570278, 13592202, 7370616, 3374196, 13592216, 8355402, 7955555, 2830635, 6842988, 6447188, 3761774, 721203, 13592222, 7957577, 3616104, 2963757, 7958082, 4013869, 474940, 13592223, 6055787, 7043424, 8348261, 2897452, 7299657, 6908003, 4983814, 13592216, 6710339, 3222382, 6319147, 8283995, 6644332, 6825336, 747108, 13592203, 7765363, 2105456, 2693170, 13592198, 8089726, 2960765, 8025659, 1381752, 13592199, 6387064, 8025452, 8075900, 1340262, 13592221, 7169858, 8216683, 3419755, 7038254, 3565152, 918582, 13592202, 8024180, 3372641, 13592196, 7634554, 3766383, 1536634, 13592193, 8158079, 8156027, 7831419, 8220988, 3281535, 13592198, 8158565, 2960760, 8025659, 1381752, 13592192, 8026979, 8155518, 4028540, 8289392, 13592197, 8355430, 7828091, 3962722, 13592192, 8026979, 7501694, 4026983, 8289392, 13592199, 8223844, 8092025, 7896438, 1326705, 13592194, 7895393, 8289404, 8222835, 7487348, 1145982, 13592223, 6644860, 6447969, 6448480, 6515305, 6388094, 6516514, 4983905, 13592198, 6781541, 2960763, 7371579, 1381729, 13592203, 6977384, 2171254, 2693170, 13592198, 6781541, 2894971, 7371579, 1381729, 13592193, 6448993, 6447223, 8354682, 8220988, 3281535);
    var _local3:* = new ByteArray();
    if (!false) {
        var _local4:* = 0;    
        (((_local3 >>> _local2[((_arg1 + 1) + ((_local4 - (_local4 % 3)) / 3))]) & 0xFF) ^ (_local2[_arg1] ^ 13592211)).writeByte(!null!);
    };
    _local4++;

    return ((_local2[_arg1] ^ 13592211));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:37:06.317

刚刚意识到这是反编译一些混淆的 ActionScript 的结果。由于混淆器，反编译的代码没有任何意义。

# iphone - 如何管理 UIImageView 内容模式？

> ID：14134035
> 
> 赞同：45
> 
> 时间：2013-01-03T06:26:18.183
> 
> 标签：iphone, ios, ipad, uiimageview

我有一个 UIImageView 有一些固定的矩形大小。但是我的图像大小不固定。我想根据 UIImageView 的矩形大小显示图像。无论图像是大还是分辨率大，都必须根据 UIImageView 的大小固定显示。我对使用以下资产感到困惑。

```
UIViewContentModeScaleToFill,
UIViewContentModeScaleAspectFit,
UIViewContentModeScaleAspectFill,
UIViewContentModeRedraw 
```

在 autoresize 掩码中设置什么？他们的行为如何？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-03T06:56:25.170

请尝试此代码，希望它对您有用。

设置`UIImageView` `contentMode`如下`UIViewContentModeScaleAspectFill`：

```
imageView.contentMode = UIViewContentModeScaleAspectFill; 
```

设置 UIImageView 的 autoresizingMask 如下：

```
imageView.autoresizingMask =   
    ( UIViewAutoresizingFlexibleBottomMargin
    | UIViewAutoresizingFlexibleHeight
    | UIViewAutoresizingFlexibleLeftMargin
    | UIViewAutoresizingFlexibleRightMargin
    | UIViewAutoresizingFlexibleTopMargin
    | UIViewAutoresizingFlexibleWidth ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-27T06:16:57.853

你只需要这两行：

```
imageView.contentMode = UIViewContentModeScaleAspectFill;
imageView.layer.clipsToBounds = YES; // Must do this or else image will overflow 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-13T09:33:58.280

这里有一个快速的解决方案：

```
let imageView = UIImageView(image: UIImage(named: "backgroundImage"))
imageView.frame = tableView.frame
imageView.contentMode = .ScaleAspectFill
tableView.backgroundView = imageView 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-14T05:56:49.880

在swift中，您还可以设置内容模式

```
var newImgThumb : UIImageView
newImgThumb = UIImageView(frame:CGRectMake(0, 0, 100, 70))
newImgThumb.contentMode = .ScaleAspectFit 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T06:29:12.320

如果要`UIImageView`根据比例制作尺寸，则必须将其模式设置为`UIViewContentModeScaleAspectFit`

```
 yourimage.contentMode=UIViewContentModeScaleAspectFit; 
```

让我知道它是否有效！

快乐编码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-23T00:15:11.667

值得注意的是，swift 3 发生了如下变化

. `ScaleAspectFit` 至 `scaleAspectFit`

. `ScaleAspectFill`至 。`scaleAspectFill`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T06:50:45.303

希望这对你有帮助

```
CGImageRef imageRef = CGImageCreateWithImageInRect([largeImage CGImage], cropRect);

image = [UIImage imageWithCGImage:imageRef]];

CGImageRelease(imageRef); 
```

# java - 在java中复制项目的同一目录？

> ID：14134037
> 
> 赞同：1
> 
> 时间：2013-01-03T06:26:19.737
> 
> 标签：java, copying

```
int reval = fcCari.showOpenDialog(this);
String sourcePath = fcCari.getSelectedFile().getAbsolutePath();
String targetPath = "C:\\Users\\nadzar\\Downloads\\Compressed\\JavaSQLite\\resource\\";
    targetPath += fcCari.getSelectedFile().getName();
    if ((reval == JFileChooser.APPROVE_OPTION)) {
            File source = new File(sourcePath);
            File target = new File(targetPath);
            copyFile(source, target);
            targetPathFoto=targetPath;
            tambahFoto(targetPathFoto);
    }
    else{
        JOptionPane.showMessageDialog(rootPane, "Batal Menambahkan Foto");
        tambahFoto(this.targetFoto);
    }
    System.out.println(targetPathFoto); 
```

如果我的项目已移动，则必须更改路径。我问我的项目目录发生变化时目标路径如何变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:33:24.013

为此使用属性文件，您需要做的是更改属性值。

```
# app home, build absolute paths in code using this path
app.home=path_to_home_directory 
```

使用[java.util.Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)读取这些属性。

请参阅[mkyong](http://www.mkyong.com/java/java-properties-file-examples/)中的示例。

# java - 如何在应用程序中隐藏 jsp 文件夹路径和文件名

> ID：14134039
> 
> 赞同：3
> 
> 时间：2013-01-03T06:26:30.480
> 
> 标签：java, jsp, web-applications, servlets, url-rewriting

我有一个 Web 应用程序 - 但是当我从菜单和其他链接导航时，地址栏会显示文件夹和文件名。我想要的是用户进行的任何导航，裸露的地址应该只显示

```
http://domain:port/daswebapp 
```

而不是

```
http://domain:port/daswebapp/admin/index.jsp 
```

任何人都可以帮助解决这个问题。我不使用任何其他框架。它是纯 MVC 模式。谢谢 n 问候 Noufal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:28:31.647

使用[urlrewritefilter 之](http://code.google.com/p/urlrewritefilter/)类的 url 重写过滤器，对于基于 JSF 的应用程序，请使用[Pretty faces](http://ocpsoft.org/prettyfaces/)

> 它的主要用途是：

*   **URL Tidyness** / URL Abstraction - 保持 URL 整洁，与底层技术或框架（JSP、Servlet、Struts 等）无关。

*   **浏览器检测**- 允许您根据请求 HTTP 标头（例如用户代理或字符集）重写 URL。

*   **基于日期的重写**- 允许您根据

    日期/时间（适用于计划中断）。

*   **移动的内容**- 可以优雅地移动内容，甚至更改 CMS。

*   **微小/友好的**URL（即 blah.com/latest 可以重定向到 blah.com/download/ver1.2.46.2/setup.exe）

*   Servlet 映射引擎（请参阅方法调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:17:21.637

你可以使用 RequestDispatcher，

```
RequestDispatcher dispatcher = getRequestDispatcher("daswebapp/admin/index.jsp");
   dispatcher.forward( request, response ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T10:20:31.440

你可以用这样的东西试试，让我知道

```
RequestDispatcher reqDisp = getServletContext().getRequestDispatcher("/index.jsp");
            reqDisp.forward(request, response); 
```

# php - 从 mysql 迁移到 PDO，未连接到 mysql 服务器

> ID：14134049
> 
> 赞同：1
> 
> 时间：2013-01-03T06:27:09.263
> 
> 标签：php, mysql, pdo

经过长时间的使用，`mysql`我终于决定将所有东西迁移到`PDO`，因为以前的东西正在贬值。

我首先查看了一些关于使用 PDO 的教程，从一开始我就遇到了问题......

我在跑步：

> Apache (v2.2.22)
> MySQL (v5.5.28)
> PHP5

我在 PHP 中使用以下代码块：

```
try{
    echo "PDO Connecting";
    $Connection = PDO("mysql:host=localhost;dbname=my_database;charset=UTF-8", "username", "passwd");
    echo "Connected";
}catch(PDOException $ex){
    echo "Error!";
} 
```

我的问题是我看到了消息`PDO Connecting`，然后什么也没有……没有连接消息，也没有错误消息……关于问题是什么以及如何解决它的任何想法？

PDO是最好的路线吗？或者我应该研究 MySQLi 吗？

**编辑**

结果来自 var_dump(PDO::getAvailableDrivers());

> 数组（2）{[0]=>字符串（5）“mysql”[1]=>字符串（6）“sqlite”}

Apache error.log 的结果

> PHP 致命错误：在第 33 行的 /path/to/file.php 中调用未定义函数 PDO()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:36:31.397

您错过了“新”关键字。

```
 $Connection = new PDO(......) 
```

确保打开 error_reporting 以捕获更多错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T06:37:18.203

用于`new`_`PDO class`

```
$Connection = new PDO("mysql:host=localhost;dbname=my_database;charset=UTF-8", "username", "passwd"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:39:20.660

> PDO是最好的路线吗？或者我应该研究 MySQLi 吗？

mysqli 非常类似于 mysql，因此，它可能更熟悉。
唯一不同的是连接资源应该总是传递给任何 mysqli 函数，不像 mysql，它是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T06:33:12.070

```
charset=UTF-8 
```

[应该是](http://dev.mysql.com/doc/refman/5.5/en/connector-odbc-configuration-connection-parameters.html)：

```
charset=utf8 
```

是的，选择 PDO（我的观点）。

另外：打开[错误报告](http://php.net/manual/en/book.errorfunc.php)，以便在遇到错误时获得一些反馈，并了解如何报告[PDO 错误](http://php.net/manual/en/pdo.errorinfo.php)。

编辑：另外，请参阅[如何将 PDO 错误作为异常处理](http://php.net/manual/en/pdo.error-handling.php)，正如您所期望的那样。

# c - 如何在xcode项目中设置包含路径

> ID：14134064
> 
> 赞同：62
> 
> 时间：2013-01-03T06:28:52.693
> 
> 标签：c, xcode, include, environment-variables

我正在尝试在 Objective-C Xcode 项目中使用 C 库。

库目录结构如下：

```
-- include/
    |-- config.h
    |-- lib/
    |    |-- file1.h
    |    |-- file2.h
    |    |-- file3.h 
```

该库的文档说包括 file1.h，而 file1.h 包括 file2.h 和 file3.h。

我收到包含 file2.h 和 file3.h` 的“找不到文件”错误。它们以下列方式包含在 file1.h 中：

```
#include <lib/file1.h>
#include <lib/file2.h> 
```

[我在这里](http://msdn.microsoft.com/en-us/library/36k2cdd4(v=vs.80).aspx)读到这些尖括号指示预处理器沿着 INCLUDE 环境变量指定的路径搜索包含文件，而不是在与包含#include 的文件相同的目录中搜索。

因此，我通过转到 Product->Edit Scheme.. 在 Xcode 中添加了 INCLUDE 环境变量并将其设置为`/the-whole-path-to/include/`但是，我仍然收到文件未找到错误。

如果我将 file1.h 更改为像这样包含它们，则这些文件将被成功包含：

```
#include "file2.h" 
```

但我不想对库中的每个文件都这样做。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-12-31T19:47:20.650

在 XCode 5.0.2 版本中，完成此操作的最佳方法可能是将其添加到目标的“搜索路径”窗格中。找到这个（对我来说）*非常*不直观。对于像我一样困惑的人，这是我的方法：

在左栏中，单击 Project Navigator 图标（看起来像一个文件夹）。然后，单击项目条目。这应该在主窗格中显示一堆设置。在此窗格的顶部，单击“构建设置”。这会显示一堆条目...包括一个名为“搜索路径”的条目...但是您不能在此处添加搜索路径！这让我咬牙切齿同时，直到我发现该窗格顶部的项目名称是下拉列表；从该下拉列表中选择*目标*，您现在应该可以双击“标题搜索路径”并执行所需的编辑。

哦，疯狂的 GUI 带来的乐趣。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-01-04T07:34:47.787

弄清楚了。

您所要做的就是将 -I 标志添加到“其他 C 标志”下的构建设置中

因此，在目标的构建设置中搜索“Other C Flags”并添加`-I/path-to-include/`

这是一个屏幕截图： ![在此处输入图像描述](../Images/ef0700121fcfa8823b5516d417a7b55a.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-03-11T01:31:45.400

试试这个：

1 - 在左侧 Xcode 窗格中选择您的项目文件
2 - 确保在中间 Xcode 窗格中选择了您的项目
3 - 在中间 Xcode 窗格顶部选择“构建设置”
4 - 确保“全部”和“组合”在“构建设置”下方选择
5 - 在“构建设置”下方的搜索字段中键入标题

您应该会在中间窗格中看到可供编辑的搜索路径字段。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-01-20T06:28:20.333

我在 Xcode 5.0.1 中使用项目构建设置解决了这个问题（正如上面提到的 John 和 Ian，但由于 <50 代表我无法发表评论）。

新信息：

将包含添加到*用户*标题搜索路径时，我还必须将始终搜索用户路径更改为是。

将包含添加到（非用户）标题搜索路径时，不需要始终搜索用户路径。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-18T19:13:01.480

虽然这可行，但最好将其放在“搜索路径”选项卡下。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-27T16:22:19.873

您可以使用“其他 C 标志”或使用“HEADER_SEARCH_PATHS”来指定包含路径，以查找可执行文件的标头。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-10T22:42:02.590

在 2021 年的 Xcode v. 12.4 中，解决方案似乎是：

项目->目标->常规->“扫描所有源文件以查找包含”->设置为“是”

这对我有用。

但是，如果您有多个版本的特定 .h 文件，这可能会适得其反，这可能不是一个好习惯，但如果您有很多子目录，它们有自己的迷你项目和类似命名的包含文件，则可能会适得其反。

# c# - NHibernate 中的无状态会话初始化关联实体或集合失败

> ID：14134066
> 
> 赞同：4
> 
> 时间：2013-01-03T06:29:04.897
> 
> 标签：c#, nhibernate, stateless-session

我正在尝试与来自 3rd 方 dll 的实体建立关联。由于某些原因，我必须使用`StatelessSession`. 使用`StatefullSession`它，但不适用于无状态。这个想法是允许第 3 方添加一个表并在我查询主表时获取其数据。

我有三个项目：我的主项目、带`IExtender`接口的模型项目和带类的第 3 方项目`Extender`（不被主项目引用）。

**我的数据架构：**

```
Table Data
   Id INT identity,
   more fields...

Table Extender
   Id INT PK, FK from Data
   Name NVARCHAR
   more fields... 
```

**模型项目代码：**

```
public interface IExtender
{
    int Id { get; set; }
} 
```

**主要项目代码：**

```
public class Data
{
    public virtual int Id { get; set; }
    public IExtender Extender { get; set; }
    //public IList<IExtender> Extenders { get; set; }
} 
```

**主要项目hbm：**

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
  namespace="..." assembly="..." auto-import="true">

<class name="Data" table="Data" lazy="false">
    <id name="Id" column="Id" type="int" >
      <generator class="identity" />
    </id>
    <one-to-one name="Extender" foreign-key="Id" 
           class="Model.IExtender, Model" lazy="false"/>

<!--<bag name="Extenders" cascade="all" inverse="true" lazy="false">
  <key column="Id" />
  <one-to-many class="Model.IExtender, Model"/>
</bag>-->

</class>
</hibernate-mapping> 
```

**第三方项目：**

```
public class Extender : IExtender
{
    public virtual int Id { get; set; }
    public string Name { get; set; }
} 
```

**第 3 方 hbm：**

```
<?xml version="1.0" encoding="utf-8"?>

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Model" assembly="Model" auto-import="true">

  <class name="IExtender" table="IExtender" lazy="false" abstract="true">

    <id name="Id" column="Id" type="int" >
      <generator class="assigned" />
    </id>

    <union-subclass table="Extender" name="Extension.Extender, Extension" lazy="false">
      <property name="Name" column="Name" not-null="true" type="String" />
    </union-subclass>

  </class>
</hibernate-mapping> 
```

第 3 方项目将其 dll 放在主项目 bin 文件夹中。

现在我获取数据的代码如下所示：

```
var sessionFactory = new Configuration().Configure()
   .AddAssembly(Assembly.LoadFile(System.Environment.CurrentDirectory + @"\Extender.dll"))
   .AddAssembly(Assembly.GetExecutingAssembly())
   .BuildSessionFactory();

var session = sessionFactory.OpenStatelessSession();
var criteria = session.CreateCriteria<Data>();
var data = criteria.List<Data>().ToList();
Console.WriteLine(data.First().Extender.Id); // fails because Extender is null 
```

如果我使用`StatefullSession`，它可以与单个实体或包一起正常工作。如果我改用`StatelessSession`一个包（以及上面注释行的列表），我会收到一个错误：

> 无状态会话无法获取集合

如果我`lazy="false"`从包中取出，我会收到此错误（无论该集合是否是虚拟的）：

> Initializing[MyProject.Data#1] - 无法延迟初始化角色集合：MyProject.Data.Extenders，没有会话或会话已关闭

**编辑：我将我的 NHibernate 版本升级到最新版本，现在当我使用包时它可以工作，但是当我使用具有一对一关系的单个实体时，它始终为空。**

顺便说一句，无论是否有错误，我在最终的 sql 查询中都看到该`Extender`表正在正确连接。

谢谢你的帮助。

# html - 适用于 iOS 的移动 Chrome：tel-anchors 有问题？

> ID：14134068
> 
> 赞同：3
> 
> 时间：2013-01-03T06:29:13.317
> 
> 标签：html, ios, google-chrome, mobile, mobile-safari

在 iOS 版移动 Chrome 中打开电话号码链接时遇到问题。如果您在手机上打开测试页面（[http://roethig.it/sandbox/phone-links.html](http://roethig.it/sandbox/phone-links.html)），则在 safari 上一切正常，手机会询问您是否要拨打该特定号码。

如果您尝试使用 iOS 版移动版 Chrome，它会多次弹出。有什么办法可以避免这种情况吗？

这是我使用的标记：

```
<a href='tel:123456789' title='Free Call 123456789' class='tel'>Free Call 123 456 789</a> 
```

*在 iPhone 5 上的 iOS 6.0.2 上测试*

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:56:20.293

破译谷歌搜索结果中的代码，以下似乎可以解决这个问题（目前）：

```
<a href="javascript:void(0)" onclick="window.location='tel:123456789'"
   title="Free Call 123456789" class="tel">Free Call 123 456 789</a> 
```

*(iPhone 5, iOS 6.0.2)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:34:56.973

`tel://`我有同样的问题，并使用而不是`tel:`仅修复它。另外，请确保没有任何“不必要的”属性，`target`因为这可能会“混淆”小 chrome :)

# asp.net - 浏览器显示“返回视图（对象）”的 html 代码

> ID：14134069
> 
> 赞同：0
> 
> 时间：2013-01-03T06:29:17.500
> 
> 标签：asp.net, razor, asp.net-mvc-4

我们在 asp.net MVC 4（剃刀视图）中有一个页面。当我们在浏览器中运行页面时，它显示的是 html 代码而不是设计。动作方法如下所示，

```
 [HttpPost]
    public ActionResult ChangePassword(ChangePasswordUI changePasswordUI)
    {
            //Validate the current password
            //add error to the model
            ModelState.AddModelError("CurrentPassword", "Invalid current password");
            return View(changePasswordUI);
     } 
```

输出是这样的

![在此处输入图像描述](../Images/ad7a01e382674124d067b4d207c724e7.png)

萤火虫中的响应如下所示

![在此处输入图像描述](../Images/2ae380dbdd17a4e9886eb179e4bfcb7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:31:17.697

哇，这很奇怪。看起来是浏览器的问题。您可以安装[FireBug](http://getfirebug.com/)并查看`Net`选项卡吗？更具体地说，`Content-Type`响应标头。如果是，`test/html`那么您的浏览器肯定有问题。也许某些插件阻止了正确显示 HTML。您也可以尝试其他浏览器。

* * *

更新：

好的，现在您已经显示了 FireBug 的屏幕截图，很清楚问题出在哪里。响应 Content-Type 标头设置为`application/json`。您正在使用的 ViewResult 应将`Content-Type`标头设置为`text/html`. 所以我猜你的代码的其他部分覆盖了这个设置并使用`application/json`. 它可能是一个动作过滤器或其他东西。在不知道您的代码的情况下很难说。

# winapi - WinApi, hide cursor inside window client area

> ID：14134076
> 
> 赞同：3
> 
> 时间：2013-01-03T06:29:55.420
> 
> 标签：winapi

I want hide cursor inside window client area without borders and title bar (it is simple opengl application). So, function

```
 ShowCursor(FALSE); 
```

is not suitable. After some searching the winapi i find this solution:

```
 //when create window class for application window
    WNDCLASSEX WndClass;
    //...
    BYTE CursorMaskAND[] = { 0xFF };
    BYTE CursorMaskXOR[] = { 0x00 };
    WndClass.hCursor = CreateCursor(NULL, 0,0,1,1, CursorMaskAND, CursorMaskXOR); 
```

Is this a good way to solve this typical task? What way is the best?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T06:43:20.630

MSDN says that you can set the WNDCLASSEX hCursor field to NULL, in which case you must explicitly set the cursor in your window procedure (which means handling the WM_SETCURSOR message). For example:

```
if (Msg == WM_SETCURSOR && LOWORD(lParam) == HTCLIENT)
{
    SetCursor(NULL);

    return TRUE;
}

// Remainder of window procedure code 
```

Checking for HTCLIENT ensures that the cursor is only hidden in the client area, and that the window frame and caption will use the correct cursors.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:40:14.680

The SetCursor() call you're using doesn't take a BOOL - it takes an HCURSOR. So you're calling SetCursor( NULL ) which means "hide that cursor". What I found in the old days on Windows is that this is video driver dependent and many drivers don't respect it. The most consistent way to handle this is to make a transparent cursor resource in your app, and return a handle to that cursor in the WM_SETCURSOR message from your main window.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T06:44:40.113

I found that first setting `hCursor` to `NULL`:

```
 wc.hCursor = NULL; 
```

and then setting the cursor to `NULL`:

```
 SetCursor(NULL); 
```

will make it disappear.

From MSDN, I read that the application will set its own cursor by default if one is not defined in `hCursor`. That's what the first line of code is doing.

Then, after the application sets its own cursor, I mess with it with the second line of code. Or at least, I think that's what happens.

# android - TextView 值继续为空

> ID：14134083
> 
> 赞同：0
> 
> 时间：2013-01-03T06:30:58.243
> 
> 标签：android, dialog

我正在尝试使用对话框向数据库添加值。但是，我似乎无法从布局中获取值，因为它们总是为空。这是我的代码：

```
public class WlAddDialog extends DialogFragment {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();
    builder.setView(inflater.inflate(com.mutoor.autoreply.R.layout.whitelistadd, null));
    builder.setPositiveButton(com.mutoor.autoreply.R.string.add, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            Log.d("Dialog", "Starting dialog");
            Context c = getActivity().getApplicationContext();
            Log.d("Dialog", "Context Received");
            WlHelper wl = new WlHelper(c);
            Log.d("Dialog", "Created Whitelist Helper");
            TextView eName = (TextView) getActivity().findViewById(R.id.entryName);
            TextView eNumber = (TextView) getActivity().findViewById(R.id.entryNumber);
            Log.d("Dialog", "Name = " + eName.getText().toString() + " , Number = " + eNumber.getText().toString());
            wl.createEntry(eName.getText().toString(), eNumber.getText().toString());
            dialog.dismiss();
        }
    });
    builder.setNegativeButton(com.mutoor.autoreply.R.string.cancel, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    });
    return builder.create();
} 
```

这是我的输出：

```
01-02 22:23:23.350: D/Dialog(26471): Starting dialog
01-02 22:23:23.350: D/Dialog(26471): Context Received
01-02 22:23:23.358: D/Dialog(26471): Created Whitelist Helper
01-02 22:23:23.358: D/AndroidRuntime(26471): Shutting down VM
01-02 22:23:23.358: E/AndroidRuntime(26471): FATAL EXCEPTION: main
01-02 22:12:57.373: E/AndroidRuntime(25973): java.lang.NullPointerException
01-02 22:23:23.358: E/AndroidRuntime(26471): at com.mutoor.autoreply.WlAddDialog$1.onClick(WlAddDialog.java:36) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:34:32.247

利用

```
TextView eName = (TextView)view.findViewById(R.id.entryName);
TextView eNumber = (TextView)view.findViewById(R.id.entryNumber); 
```

如果您正在为 Dialog 使用自定义布局，则获取 TextView 值

编辑：将您的代码更改为：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

     View view = inflater.inflate(com.mutoor.autoreply.R.layout.whitelistadd, null);
    builder.setView(view);
            TextView eName = (TextView)view.findViewById(R.id.entryName);
            TextView eNumber = (TextView)view.findViewById(R.id.entryNumber);

    builder.setPositiveButton(com.mutoor.autoreply.R.string.add, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            Log.d("Dialog", "Starting dialog");
            Context c = getActivity().getApplicationContext();
            Log.d("Dialog", "Context Received");
            WlHelper wl = new WlHelper(c);
            Log.d("Dialog", "Created Whitelist Helper");

            Log.d("Dialog", "Name = " + eName.getText().toString() + " , Number = " + eNumber.getText().toString());
            wl.createEntry(eName.getText().toString(), eNumber.getText().toString());
            dialog.dismiss();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:34:16.207

如果两个 TextView

```
TextView eName = (TextView) getActivity().findViewById(R.id.entryName);
TextView eNumber = (TextView) getActivity().findViewById(R.id.entryNumber); 
```

是对话框布局的一部分，那么它们应该是，

```
TextView eName = (TextView) dialog.findViewById(R.id.entryName);
TextView eNumber = (TextView) dialog.findViewById(R.id.entryNumber); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:40:00.090

你这样：

> TextView eName = (TextView)layout.findViewById(R.id.entryName);
> TextView eNumber = (TextView)layout.findViewById(R.id.entryNumber);

您需要定义`layout.findViewById()`以从对话框布局访问视图，这就是您收到空指针错误的原因。试试看，我认为这是唯一的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T06:33:53.163

看起来您正在从活动的布局而不是对话框的布局中查找文本框。我希望您在对话框中搜索 TextView 并使用那里提供的值来完成您的数据库事务。

# ssrs-2008 - 如何调试 SSRS 错误 - “输入字符串格式不正确”

> ID：14134084
> 
> 赞同：2
> 
> 时间：2013-01-03T06:30:57.730
> 
> 标签：ssrs-2008, reporting-services

我知道我已经问了很多，我每天都在学习！

![在此处输入图像描述](../Images/6d80dcc333bb4da2d1e9b66221b0d730.png)

冒犯的表达是：

```
=IIf(Parameters!ResponseRange.Value = 3, Nothing, 
    IIf(Parameters!ResponseRange.Value is Nothing, Nothing,
        Parameters!ResponseRange.Value)) 
```

是规格。因为这部分——`Parameters!ResponseRange.Value is Nothing, Nothing,`

至于参数，这是它们的外观截图 - 参数是“文本”数据类型：

![在此处输入图像描述](../Images/27627a0e5c304bbaec17caf108d22b2f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T06:40:32.370

`IIf()`该表达式中的检查顺序是奇数；通常，您希望首先处理“成功”或非空情况。此外，您可以将这两项检查合二为一`IIf()`：

```
=IIf(Not IsNothing(Parameters!ResponseRange.Value) AndAlso 
    Parameters!ResponseRange.Value <> 3, Parameters!ResponseRange.Value, Nothing) 
```

请注意，我用`IsNothing()`函数替换了`Is Nothing`表达式。除此之外，表达式本身是有效的。参数的数据类型是`ResponseRange`什么？我推断这是`Integer`通过与 的比较`3`。您是否已将其标记为可以为空？如果您没有使它们可以为空，则无法将原始数据类型`Integer`设置为您正在尝试的类型。`Nothing`

您可能需要在查询中设置默认值`0`或`-1`代替`Nothing`并随后处理它。

# html - 使用 P:commandLink 值属性的问题

> ID：14134085
> 
> 赞同：0
> 
> 时间：2013-01-03T06:31:03.057
> 
> 标签：html, css, jsf, user-interface, primefaces

我在 xhtml 页面中有 p:commandLink

我已将 value 赋予 value 属性并将 image 赋予 styleClass 属性。它在图像上显示价值。（用值覆盖图像）

如何在上面只显示图像？

XHTML 代码：

```
<p:commandLink actionListener="#{userController.createNewUser}"
               update=":userRightPaneForm" 
               styleClass="newButtonLnk"
               value="New">
</p:commandLink> 
```

CSS 代码：

```
.newButtonLnk {  width: 40px; height: 17px;
                 background: url('../images/buttons/new_off.png')
                 no-repeat;
                 display: inline-block;
}
.newButtonLnk:hover{ width: 40px; height: 17px;
                     background: url('../images/buttons/new_on.png')
                     no-repeat;
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:01:59.743

将`value`属性设置为`""`

像这样 ： `value=""`

```
<p:commandLink actionListener="#{userController.createNewUser}"
           update=":userRightPaneForm" 
           styleClass="newButtonLnk"
           value="">
</p:commandLink> 
```

# java - REST 服务前的请求队列

> ID：14134086
> 
> 赞同：15
> 
> 时间：2013-01-03T06:31:07.527
> 
> 标签：java, rest, soa

在 REST 服务前面有一个请求队列的最佳技术解决方案（框架/方法）是什么。这样我就可以增加 REST 服务实例的数量以获得更高的可用性，并通过将请求队列放在前面来形成服务客户端的服务/事务边界。

1.  我需要为请求队列（java）选择好的轻量级技术/框架
2.  用它实现竞争消费者的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T06:19:52.353

这里有几个问题，取决于你的目标。

首先，它只促进后端资源的可用性。考虑是否有 5 台服务器在后端处理队列请求。如果其中一台服务器出现故障，则排队的请求应回退到队列中，并重新传递到其余 4 台服务器之一。

但是，当这些后端服务器正在处理时，前端服务器正在处理实际的发起请求。如果这些前端服务器之一发生故障，则这些连接将完全丢失，由原始客户端重新提交请求。

前提可能是更简单的前端系统发生故障的风险较低，对于与软件相关的故障当然也是如此。但是网卡、电源、硬盘驱动器等对人类的这种虚假希望是相当不可知的，并平等地惩罚所有人。因此，在谈论整体可用性时请考虑这一点。

就设计而言，后端是一个简单的进程，等待一个 JMS 消息队列，并在每个消息到来时对其进行处理。有大量可用的示例，任何 JMS 服务器都将适合高级别的。您只需要确保消息处理是事务性的，这样如果消息处理失败，消息仍保留在队列中，并且可以重新传递到另一个消息处理程序。

您的 JMS 队列的主要要求是可集群的。JMS 服务器本身就是系统中的单点故障。丢失了 JMS 服务器，您的系统几乎陷入困境，因此您需要能够集群服务器并让消费者和生产者适当地处理故障转移。同样，这是特定于 JMS 服务器的，大多数人都这样做，但在 JMS 世界中这是非常常规的。

前端是事情变得有点棘手的地方，因为前端服务器是从 REST 请求的同步世界到后端处理器的异步世界的桥梁。REST 请求遵循典型的 RPC 模式，即使用来自套接字的请求负载、保持连接打开、处理结果并将结果传递回原始套接字。

为了体现这种移交，您应该看一下处理 Servlet 3.0 的异步 Servlet，它在 Tomcat 7、最新的 Jetty（不确定是什么版本）、Glassfish 3.x 等中可用。

在这种情况下，您要做的是在请求到达时，将名义上同步的 Servlet 调用转换为使用`HttpServletRequest.startAsync(HttpServletRequest request, HttpServletResponse response)`.

这将返回一个 AsynchronousContext，并且一旦启动，就允许服务器释放处理线程。然后你做几件事。

1.  从请求中提取参数。
2.  为请求创建一个唯一 ID。
3.  根据您的参数创建一个新的后端请求负载。
4.  将 ID 与 AsyncContext 相关联，并保留上下文（例如将其放入应用程序范围的 Map）。
5.  将后端请求提交到 JMS 队列。

至此，初始处理完成，您只需从 doGet（或服务，或其他）返回。由于您没有调用 AsyncContext.complete()，因此服务器不会关闭与服务器的连接。由于您通过 ID 将 AsyncContext 存储在地图中，因此暂时可以方便地安全保存。

现在，当您将请求提交到 JMS 队列时，它包含：请求的 ID（您生成的）、请求的任何参数以及发出请求的实际服务器的标识。最后一点很重要，因为处理的结果需要返回到它的原点。源由请求 ID 和服务器 ID 标识。

当您的前端服务器启动时，它还启动了一个线程，该线程的工作是侦听 JMS 响应队列。当它设置它的 JMS 连接时，它可以设置一个过滤器，例如“只给我一个服务器 ID 为 ABC123 的消息”。或者，您可以为每个前端服务器创建一个唯一的队列，后端服务器使用服务器 ID 来确定要返回回复的队列。

当后端处理器使用消息时，它们会获取请求 ID 和参数，执行工作，然后获取结果并将它们放入 JMS 响应队列。当它返回结果时，它会将原始 ServerID 和原始请求 ID 添加为消息的属性。

因此，如果您最初收到前端服务器 ABC123 的请求，后端处理器会将结果返回给该服务器。然后，该侦听器线程将在收到消息时收到通知。侦听器线程的任务是获取该消息并将其放入前端服务器的内部队列中。

这个内部队列由一个线程池支持，该线程池的工作是将请求有效负载发送回原始连接。它通过从消息中提取原始请求 ID、从前面讨论的内部映射中查找 AsyncContext，然后将结果发送到与 AsyncContext 关联的 HttpServletResponse 来实现这一点。最后，它调用 AsyncContext.complete() （或类似方法）来告诉服务器您已完成并允许它释放连接。

对于内务管理，您应该在前端服务器上有另一个线程，它的工作是检测请求何时在地图中等待太久。原始消息的一部分应该是请求开始的时间。该线程可以每秒唤醒一次，扫描地图中的请求，对于任何存在时间过长（例如 30 秒）的请求，它可以将请求放入另一个内部队列，由一组处理程序消耗，这些处理程序旨在通知请求超时的客户端。

您需要这些内部队列，以便主要处理逻辑不会卡在等待客户端使用数据。这可能是连接速度慢或其他原因，因此您不想阻止所有其他待处理的请求来一一处理它们。

最后，您需要考虑到您很可能会从响应队列中收到一条消息，该消息针对您的内部映射中不再存在的请求。一方面，请求可能已经超时，所以它不应该再存在了。另一方面，该前端服务器可能已停止并重新启动，因此挂起请求的内部映射将简单地为空。此时，如果您检测到您有一个不再存在的请求的回复，您应该简单地丢弃它（好吧，记录它，然后丢弃它）。

您不能重用这些请求，实际上并没有负载均衡器返回客户端。如果客户端允许您通过发布的端点进行回调，那么请确保您可以让另一个 JMS 消息处理程序发出这些请求。但这不是 REST 之类的东西，在这个级别的讨论中，REST 更多的是客户端/服务器/RPC。

至于哪个框架支持比原始 Servlet 更高级别的异步 Servlet（例如 JAX-RS 的 Jersey 或类似的东西），我不能说。我不知道什么框架在那个级别支持它。似乎这是 Jersey 2.0 的一个功能，尚未发布。可能还有其他人，你必须四处看看。另外，不要专注于 Servlet 3.0。Servlet 3.0 只是一段时间以来在单个容器中使用的技术的标准化（尤其是 Jetty），因此您可能希望查看 Servlet 3.0 之外的容器特定选项。

但是概念是一样的。最大的收获是带有过滤的 JMS 连接的响应队列侦听器、到 AsyncContext 的内部请求映射，以及在应用程序中执行实际工作的内部队列和线程池。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T06:25:47.053

如果您放宽了必须使用 Java 的要求，您可以考虑使用 HAProxy。它非常轻量级，非常标准，并且做了很多好事（请求池/keepalives/排队）。

不过，在实施请求队列之前请三思。除非您的流量非常突发，否则它只会损害系统在负载下的性能。

假设您的系统每秒可以处理 100 个请求。您的 HTTP 服务器有一个有限的工作线程池。请求池可以提供帮助的唯一方法是每秒接收超过 100 个请求。在您的工作线程池已满后，请求开始堆积在您的负载均衡器池中。由于它们到达的速度比您处理它们的速度快，因此队列变得越来越大……越来越大……越来越大。最终要么这个池也被填满，要么你的 RAM 用完了，负载均衡器（以及整个系统）严重崩溃。

如果您的 Web 服务器太忙，请开始拒绝请求并在线获取一些额外容量。

如果您能够及时获得额外的容量来处理请求，请求池肯定会有所帮助。它也会对你造成非常严重的伤害。在您的 HTTP 服务器的工作线程池之前打开辅助请求池之前，请考虑后果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:36:27.827

我们使用的设计是一个 REST 接口接收所有请求并将它们分派到消息队列（即 Rabbitmq）

然后工作人员听取消息并按照一定的规则执行它们。如果一切都失败了，您仍然会在 MQ 中收到请求，如果您有大量请求，您可以添加工作人员......

查看这个主题演讲，它展示了这个概念的力量！

[http://www.springsource.org/SpringOne2GX2012](http://www.springsource.org/SpringOne2GX2012)

# javascript - 如何在 WebRTC 对等连接中创建数据通道？

> ID：14134090
> 
> 赞同：12
> 
> 时间：2013-01-03T06:31:28.117
> 
> 标签：javascript, webrtc

我正在尝试学习如何创建一个`RTCPeerConnection`以便我可以使用`DataChannel`API。根据我的理解，这是我尝试过的：

```
var client = new mozRTCPeerConnection;
var server = new mozRTCPeerConnection;

client.createOffer(function (description) {
    client.setLocalDescription(description);
    server.setRemoteDescription(description);

    server.createAnswer(function (description) {
        server.setLocalDescription(description);
        client.setRemoteDescription(description);

        var clientChannel = client.createDataChannel("chat");
        var serverChannel = server.createDataChannel("chat");

        clientChannel.onmessage = serverChannel.onmessage = onmessage;

        clientChannel.send("Hello Server!");
        serverChannel.send("Hello Client!");

        function onmessage(event) {
            alert(event.data);
        }
    });
}); 
```

我不确定出了什么问题，但我假设连接从未建立，因为没有显示任何消息。

我在哪里可以了解更多信息？我已经阅读了[WebRTC 入门 - HTML5 Rocks](http://www.html5rocks.com/en/tutorials/webrtc/basics/)教程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T10:26:03.663

在筛选了很多文章后，我终于让它工作了：http: [//jsfiddle.net/LcQzV/](http://jsfiddle.net/LcQzV/)

首先我们创建对等连接：

```
var media = {};
media.fake = media.audio = true;
var client = new mozRTCPeerConnection;
var server = new mozRTCPeerConnection; 
```

当客户端连接到服务器时，它必须打开一个数据通道：

```
client.onconnection = function () {
    var channel = client.createDataChannel("chat", {});

    channel.onmessage = function (event) {
        alert("Server: " + event.data);
    };

    channel.onopen = function () {
        channel.send("Hello Server!");
    };
}; 
```

当客户端创建数据通道时，服务器可能会响应：

```
server.ondatachannel = function (channel) {
    channel.onmessage = function (event) {
        alert("Client: " + event.data);
    };

    channel.onopen = function () {
        channel.send("Hello Client!");
    };
}; 
```

我们需要给客户端和服务端添加一个假的音频流来建立连接：

```
navigator.mozGetUserMedia(media, callback, errback);

function callback(fakeAudio) {
    server.addStream(fakeAudio);
    client.addStream(fakeAudio);
    client.createOffer(offer);
}

function errback(error) {
    alert(error);
} 
```

客户创建报价：

```
function offer(description) {
    client.setLocalDescription(description, function () {
        server.setRemoteDescription(description, function () {
            server.createAnswer(answer);
        });
    });
} 
```

服务器接受报价并建立连接：

```
function answer(description) {
    server.setLocalDescription(description, function () {
        client.setRemoteDescription(description, function () {
            var port1 = Date.now();
            var port2 = port1 + 1;

            client.connectDataConnection(port1, port2);
            server.connectDataConnection(port2, port1);
        });
    });
} 
```

呸。这需要一段时间才能理解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T06:41:24.840

我[发布了一个要点](https://gist.github.com/natevw/5045693)，显示了设置数据连接，与*Chrome*和 Firefox 兼容。

主要区别在于，在 FF 中，您必须等到建立连接，而在 Chrome 中，情况正好相反：似乎您需要在任何优惠被来回发送*之前创建数据连接：*

```
var pc1 = new RTCPeerConnection(cfg, con);
if (!pc1.connectDataConnection) setupDC1();    // Chrome...Firefox defers per other answer 
```

另一个区别是 Chrome 传递一个事件对象，`.ondatachannel`而 FF 只传递一个原始通道：

```
pc2.ondatachannel = function (e) {
    var datachannel = e.channel || e; 
```

请注意，您目前需要启动 Chrome Nightly`--enable-data-channels`才能使其正常工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-06T19:07:24.160

这是我今天（2014 年 2 月）在 Chrome 中工作的一系列事件。这是一个简化的情况，其中对等方 1 将视频流传输到对等方 2。

1.  为对等方设置某种方式来交换消息。（可悲的是，人们如何实现这一点的差异使得不同的 WebRTC 代码示例如此不可通约。但在精神上，在您的代码组织中，请尝试将此逻辑与其他逻辑分开。）
2.  在每一侧，为重要的信令消息设置消息处理程序。您可以设置它们并保留它们。有 3 个核心消息需要处理和发送：
    *   从另一端发送的冰候选人 ==>`addIceCandidate`与它通话
    *   一个报价消息 ==>`SetRemoteDescription`用它，然后回答并发送它
    *   回复消息 ===>`SetRemoteDescription`与它
3.  在每一侧，创建一个新的 peerconnection 对象并将事件处理程序附加到它以处理重要事件：onicecandidate、onremovestream、onaddstream 等。
    *   冰候选人 ===> 将其发送到另一端
    *   流添加 ===> 将其附加到视频元素，以便您可以看到它
4.  当两个对等点都存在并且所有处理程序都到位时，对等点 1 会收到某种触发消息以开始视频捕获（使用`getUserMedia`调用）
5.  一旦`getUserMedia`成功，我们就有了一个流。调用`addStream`对等体 1 的对等连接对象。
6.  然后 - 并且只有这样 - 对等方 1 提出要约
7.  由于我们在步骤 2 中设置的处理程序，对等方 2 得到了这个并发送了一个答案
8.  与此同时（并且有些模糊），对等连接对象开始产生候选冰。它们在两个对等点之间来回发送并处理（上面的步骤 2 和 3）
9.  由于 2 个条件，流式传输本身不透明地开始：
    *   提供/回答交换
    *   收到、交换和添加的ICE候选人

在第 9 步之后我还没有找到添加视频的方法。当我想更改某些内容时，我会回到第 3 步。

# java - ant runnable jar 不工作

> ID：14134094
> 
> 赞同：0
> 
> 时间：2013-01-03T06:32:05.653
> 
> 标签：java, ant, executable-jar

**我使用ant**创建了一个可运行的 jar，但它没有运行。当我运行 jar 时，出现以下错误

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: com/teamdev/jxbrowser/events/NavigationListener
    at com.MainClass$2.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
Caused by: java.lang.ClassNotFoundException: com.teamdev.jxbrowser.events.NavigationListener
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 15 more 
```

但是当我使用 Eclipse 创建 jar 时，该 jar 工作正常。我用 ant 创建的 jar 清单如下

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.6.0_37-b06-434-11M3909 (Apple Inc.)
Main-Class: com.MainClass
Class-Path: ./ commons-cli.jar commons-codec-1.2.jar commons-httpclien
 t-3.0.1.jar commons-logging-1.1.1.jar ffmpeg-java.jar fmj.jar jdom.ja
 r logback-classic.jar logback-core.jar lti-civil-no_s_w_t.jar mail.ja
 r mp3spi1.9.4.jar slf4j-api.jar tritonus_share.jar vorbisspi1.0.2.jar
  xuggle-xuggler.jar comfyj-2.9.jar engine-gecko.jar engine-ie.jar eng
 ine-webkit.jar jniwrap-3.8.4 jxbrowser-3.3.jar jxbrowserdemo.jar log4
 j-1.2.15.jar MozillaInterfaces.jar runtime.jar slf4j-api-1.5.8.jar sl
 f4j-log4j12-1.5.8.jar winpack-3.8.3.jar xulrunner-mac.jar 
```

我用eclipse创建的jar清单如下

```
Manifest-Version: 1.0
Rsrc-Class-Path: ./ jniwrap-3.8.4.jar lti-civil-no_s_w_t.jar commons-h
 ttpclient-3.0.1.jar slf4j-log4j12-1.5.8.jar vorbisspi1.0.2.jar slf4j-
 api.jar ffmpeg-java.jar fmj.jar commons-codec-1.2.jar engine-ie.jar x
 ulrunner-mac.jar commons-logging-1.1.1.jar winpack-3.8.3.jar mp3spi1.
 9.4.jar tritonus_share.jar commons-cli.jar jdom.jar MozillaInterfaces
 .jar comfyj-2.9.jar jxbrowser-3.3.jar runtime.jar logback-classic.jar
  engine-gecko.jar mail.jar engine-webkit.jar log4j-1.2.15.jar jxbrows
 erdemo.jar slf4j-api-1.5.8.jar logback-core.jar xuggle-xuggler.jar
Class-Path: .
Rsrc-Main-Class: com.MainClass
Main-Class: org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader 
```

两者都是相同的，所有依赖项也在创建的 jar 中，但使用 ant 创建的 jar 仍然无法正常工作。
我知道你会推荐我用 Eclipse 创建 jar，但我想混淆我的代码，这就是我使用 ant 创建可运行 jar 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:39:51.190

我猜你用 Ant 生成的 jar 文件没有`jar-in-jar-loader`，这就是它无法在嵌入式 jar 中找到类的原因。

当您使用 Eclipse 生成 JAR 时，您可以保存 Ant 脚本，然后`jar-in-jar-loader.zip`将文件添加到项目中。然后使用生成的 Ant 文件来创建您的 JAR。这种方法对我有用。

**您的 Ant 脚本应如下所示：**

```
 <jar destfile="C:\Users\\workspace\Your.jar">
        <manifest>
            <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"/>
            <attribute name="Rsrc-Main-Class" value="org.mypackage.MainClass"/>
            <attribute name="Class-Path" value="."/>
            <attribute name="Rsrc-Class-Path" value="./ libA.jar "/>
        </manifest>
        <zipfileset src="jar-in-jar-loader.zip"/>
        <fileset dir="${ProjectPath}/bin"/>
        <zipfileset dir="${ProjectPath}\lib" includes="libA.jar"/>
    </jar> 
```

首先`zipfileset`将包括`jar-in-jar-loader.zip`

`fileset`会添加你所有的课程

其次`zipfileset`将 libA.jar 添加为嵌入式 jar，同样应在`Rsrc-Class-Path`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:36:38.497

使用 Ant 生成的 Manifest，它会在主 jar 文件之外寻找库 jar 文件，Eclipse 使用特殊的 Main-Class 和类加载器来获取捆绑的依赖项。

您可能希望使用[OneJar ant 任务](http://one-jar.sourceforge.net/index.php?page=getting-started&file=ant)（或类似的东西）来实现与 Eclipse 所做的类似的事情。

# django - Django-tastypie 中的字段有什么作用？

> ID：14134104
> 
> 赞同：0
> 
> 时间：2013-01-03T06:33:36.730
> 
> 标签：django, tastypie

在 sweetpie 资源中定义字段有什么意义？我阅读了文档

> 在设计 API 时，一个重要的组件是定义您正在呈现的数据的表示。与 Django 模型一样，您可以使用字段来控制资源的表示。各种类型的数据有多种字段。

“定义代表”是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:38:28.187

[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)的一个关键方面是您通过*表示*而不是直接更改应用程序状态，例如在 RPC 样式系统中。然后以各种格式（JSON、XML，你可以命名）交换表示，这些格式需要指定（无论是为你还是你的 API 受众）。据我了解，您可以通过`Resource`类及其*字段*在美味派中指定这一点：

*   [https://django-tastypie.readthedocs.org/en/latest/fields.html?highlight=fields](https://django-tastypie.readthedocs.org/en/latest/fields.html?highlight=fields)

就像一个未经测试的愚蠢示例一样，让我们​​定义一个资源：

```
class PersonResource(Resource):
    name = fields.CharField(attribute='name')
    hats = fields.IntegerField(attribute='number_of_hats', null=True) 
```

然后 JSON 序列化可能如下所示：

```
{ "name" : "miku", "number_of_hats" : 14 } 
```

# mysql - MySQL - 使用`if`的存储过程中的语法错误

> ID：14134105
> 
> 赞同：1
> 
> 时间：2013-01-03T06:33:44.320
> 
> 标签：mysql, stored-procedures, if-statement, navicat

我需要知道以下存储过程中的错误是什么，用mySql乞求我无法理解错误是什么

```
if not EXISTS( select filesrefrences.ReferenceID  from filesrefrences where filesrefrences.RefrenceKey= pRefrenceKey)
BEGIN
        Insert into filesrefrences                      
                            (                   
                                    filesrefrences.RefrenceKey,
                                    filesrefrences.RefrenceCount
                            )
                        VALUES
                         (                      
                                    pRefrenceKey,
                                    1
                         );
        select LAST_INSERT_ID();
        END
ELSE
BEGIN
        UPDATE filesrefrences
        set filesrefrences.RefrenceCount= filesrefrences.RefrenceCount+1
        WHERE filesrefrences.ReferenceID= ExistedReferenceID;
        SELECT ExistedReferenceID;
    END 
```

它在第 4 行给出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:36:25.813

您还没有使用**THEN**关键字和**END IF**。

尝试这个：

```
SET @ExistedRefID = NULL;
SELECT ReferenceID INTO @ExistedRefID 
FROM filesrefrences 
WHERE RefrenceKey= pRefrenceKey;

IF (@ExistedRefID IS NULL) THEN 
    INSERT INTO filesrefrences(RefrenceKey, RefrenceCount)
    VALUES(pRefrenceKey,1);
    SELECT LAST_INSERT_ID();
ELSE
    UPDATE filesrefrences
    SET RefrenceCount= RefrenceCount+1
    WHERE ReferenceID= @ExistedRefID;
    SELECT @ExistedRefID;
END IF; 
```

# c# - 从 C# 调用 WCF 时如何增加 MaxReceivedMessageSize

> ID：14134107
> 
> 赞同：25
> 
> 时间：2013-01-03T06:33:57.073
> 
> 标签：c#, asp.net, .net, web-services, wcf

> **可能重复：**
> [已超出传入邮件的最大邮件大小配额 (65536)](https://stackoverflow.com/questions/5459697/the-maximum-message-size-quota-for-incoming-messages-65536-has-been-exceeded)

我正在使用 WCF 进行文件上传和下载。上传成功，但是当我下载一个大文件时，我发现了这个错误

> 错误：已超出传入邮件 (65536) 的最大邮件大小配额。要增加配额，请在适当的绑定元素上使用 MaxReceivedMessageSize 属性。

我的 Service.config 文件具有以下代码。

```
<system.web>
    <compilation debug="true" />
    <httpRuntime executionTimeout="4800" maxRequestLength="2147483647" />

  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferPoolSize="524288">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" 
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"  />
        </binding>
      </basicHttpBinding>
      <!--<webHttpBinding>
        <binding maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
      </webHttpBinding>-->
    </bindings>
    <services>
      <service name="WITSService.WITSService">
        <clear />
        <endpoint binding="basicHttpBinding" contract="WITSService.WITSService" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="myEndPointBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

谁能帮我增加 MaxReceivedMessageSize

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-03T06:38:36.883

更改 web.config 中的 customBinding 以使用更大的默认值。我选择了 2MB，因为它是一个合理的大小。当然，将其设置为 2GB（如您的代码所示）会起作用，但它确实会让您更容易受到攻击。选择比您的最大要求大但又不过大的尺寸。

检查这一点：[在 Silverlight 中使用大型消息请求和 WCF](http://wildermuth.com/2009/09/10/Using_Large_Message_Requests_in_Silverlight_with_WCF)

```
<system.serviceModel>
   <behaviors>
     <serviceBehaviors>
       <behavior name="TestLargeWCF.Web.MyServiceBehavior">
         <serviceMetadata httpGetEnabled="true"/>
         <serviceDebug includeExceptionDetailInFaults="false"/>
       </behavior>
     </serviceBehaviors>
   </behaviors>
   <bindings>
     <customBinding>
       <binding name="customBinding0">
         <binaryMessageEncoding />
         <!-- Start change -->
         <httpTransport maxReceivedMessageSize="2097152"
                        maxBufferSize="2097152"
                        maxBufferPoolSize="2097152"/>
         <!-- Stop change -->
       </binding>
     </customBinding>
   </bindings>
   <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
   <services>
     <service behaviorConfiguration="Web.MyServiceBehavior" name="TestLargeWCF.Web.MyService">
       <endpoint address=""
                binding="customBinding"
                bindingConfiguration="customBinding0"
                contract="TestLargeWCF.Web.MyService"/>
       <endpoint address="mex"
                binding="mexHttpBinding"
                contract="IMetadataExchange"/>
     </service>
   </services>
 </system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T06:37:27.783

您需要在客户端配置中设置[basicHttpBinding -> MaxReceivedMessageSize](http://msdn.microsoft.com/en-us/library/system.servicemodel.httpbindingbase.maxreceivedmessagesize.aspx)。

# mongodb - 即使只进行了插入，mongodb 内存使用率也会很高

> ID：14134109
> 
> 赞同：3
> 
> 时间：2013-01-03T06:34:03.400
> 
> 标签：mongodb, memory, ubuntu-12.04

我使用 mongodb 仅插入文档。没有为我使用的集合创建索引。但是我看到 Mongodb 使用的内存越来越高。机器有 20GB 的 RAM 已完全使用。我想知道这是什么原因，这正常吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T05:30:25.940

这里有一个关于 MongoDB 如何使用存储和内存的精彩讨论：

[http://docs.mongodb.org/manual/faq/storage/](http://docs.mongodb.org/manual/faq/storage/)

具体到您的情况，Mongo 内存映射数据和索引所在的文件（默认情况下位于 /data/db 目录中的文件），这意味着文件被映射到操作系统的虚拟地址空间，然后每当 MongoDB 访问页面时（任何文件的一部分）该页面将被拉入 RAM，并将一直留在那里，直到操作系统为 mongod 进程提供的所有 RAM 都被使用（此时最近最少使用的页面将被换出 RAM）。

您正在插入数据，因此您正在写入数据文件 - 您正在写入的那些页面需要在 RAM 中（mongo 写入文件，但由于它们是内存映射的，因此它可以与内存交互，就像它是磁盘存储一样）。如果 mongod 使用 20GB 以上的 RAM，则意味着您的数据加上索引（加上其他一些开销）为 20GB 或更多。

# ocaml - OCaml 中 HttpRequest 的最佳模块是什么

> ID：14134116
> 
> 赞同：19
> 
> 时间：2013-01-03T06:34:41.137
> 
> 标签：ocaml, ocaml-batteries

我希望使用**OCaml**访问 Yahoo Finance API。从本质上讲，它只是一堆从雅虎财经获取报价的 HTTP 请求。

**我应该使用哪个模块？**

我希望有异步 HTTP 请求。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T10:08:25.707

有使用[lwt](http://ocsigen.org/lwt/manual/)的可能性：

*   [ocsigen](http://ocsigen.org/ocsigenserver/api/Ocsigen_http_client)有一个相当完整但有点复杂的实现
*   [cohttp](https://github.com/avsm/ocaml-cohttp/blob/master/lwt/cohttp_lwt_unix.mli)有点简单，但缺少一些有用的部分

使用[opam](http://opam.ocamlpro.com)安装：

```
$ opam install ocsigenserver cohttp 
```

例如在顶层：

```
try Topdirs.dir_directory (Sys.getenv "OCAML_TOPLEVEL_PATH") with _ -> ();;
#use "topfind";;
#thread;;
#require "ocsigenserver";;
open Lwt

(* a simple function to access the content of the response *)
let content = function
  | { Ocsigen_http_frame.frame_content = Some v } ->
      Ocsigen_stream.string_of_stream 100000 (Ocsigen_stream.get v)
  | _ -> return ""

(* launch both requests in parallel *)
let t = Lwt_list.map_p Ocsigen_http_client.get_url
  [ "http://ocsigen.org/";
    "http://stackoverflow.com/" ]

(* maps the result through the content function *)
let t2 = t >>= Lwt_list.map_p content

(* launch the event loop *)
let result = Lwt_main.run t2 
```

并使用 cohttp：

```
try Topdirs.dir_directory (Sys.getenv "OCAML_TOPLEVEL_PATH") with _ -> ();;
#use "topfind";;
#require "cohttp.lwt";;
open Lwt

(* a simple function to access the content of the response *)
let content = function
  | Some (_, body) -> Cohttp_lwt_unix.Body.string_of_body body
  | _ -> return ""

(* launch both requests in parallel *)
let t = Lwt_list.map_p Cohttp_lwt_unix.Client.get
  (List.map Uri.of_string
     [ "http://example.org/";
       "http://example2.org/" ])

(* maps the result through the content function *)
let t2 = t >>= Lwt_list.map_p content

(* launch the event loop *)
let v = Lwt_main.run t2 
```

请注意，还可以使用 jane street 异步库的 cohttp 实现

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:49:38.547

仅作记录，还有[带有 curl 多 API 支持的 ocurl](http://repo.or.cz/w/ocurl.git)。

# javascript - 在jquery中隐藏/显示选择框选项？

> ID：14134119
> 
> 赞同：4
> 
> 时间：2013-01-03T06:34:58.610
> 
> 标签：javascript, jquery, html, drop-down-menu

我在jsp中有以下代码片段

```
<HTML>
 <BODY>
     <select id="customerIds" onchange="doOperation()">
                <option value="default"> Start..</option>
                  <div id="action1" class="action1">
                    <option value="1"> 1</option>
                    <option value="2"> 2</option>
                    <option value="3"> 3 </option>
                  </div>
                  <div id="action2" class="action2">
                    <option value="4"> 4 </option>
                  </div>
                  <option value="5"> 5 </option>
              </select>
 </BODY>
</HTML> 
```

单击某个按钮时，我想隐藏 ID 为“action1”的选项，并显示 ID 为“action2”的选项。所以我尝试了这个

```
 $('#action1').hide();
  $('#action2').show(); 
```

但这不起作用。没有得到什么问题？在萤火虫中，当我试图检查选择框时，我没有在选项上方找到任何 div 标签（即带有 ids action1/action2 ）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:47:13.357

使用下面的 javascript 函数，其中 showOptionsClass 是赋予您要显示的每个选项的类。这将在跨浏览器中工作。

```
function showHideSelectOptions(showOptionsClass) {
    var optionsSelect = $('#selectId');
    optionsSelect.find('option').map(function() {
        return $(this).parent('span').length == 0 ? this : null;
    }).wrap('<span>').attr('selected', false).hide();

    optionsSelect.find('option.' + showOptionsClass).unwrap().show()
        .first().attr('selected', 'selected');
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T06:52:21.087

您可能在 a 中没有`<div>`元素`<select>`，例如，请参阅[有关主题的这个 stackoverflow](https://stackoverflow.com/questions/1499216/div-and-select-tags)，它引用了 HTML 规范的[这一位](http://www.w3.org/TR/html4/interact/forms.html#h-17.6)。

此外，隐藏选项不是跨浏览器兼容的（参见[这个stackoverflow（第二个答案））](https://stackoverflow.com/questions/1271503/hide-options-in-a-select-list-using-jquery)，正如@Voitek Zylinski 建议的那样，您最好保留选择的多个副本并在它们之间切换，或者如果`id`需要保留属性然后甚至可能调整innerHtml（哎呀......）。

您可以像这样处理它：

**标记**

```
<select onchange="doOperation()" class="js-opt-a">
        <option value="default"> Start..</option>
            <option value="1"> 1</option>
            <option value="2"> 2</option>
            <option value="3"> 3 </option>
</select>
<select onchange="doOperation()" class="js-opt-b">
    <option value="default">Start...</option>
    <option value="4"> 4 </option>
    <option value="5"> 5 </option>
</select> 
```

**js**

```
function doOperation() { /*whatever*/}
$(".js-opt-a").hide();
$(".js-opt-b").show();​​ 
```

参见例如[这个 jsfiddle](http://jsfiddle.net/KSs6w/)

虽然不完全理想！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:38:53.610

您不能使用`div`分组，但您可以分配`class`给`options`分组。

**[现场演示](http://jsfiddle.net/rajaadil/TmYdn/)**

```
<select id="customerIds" onchange="doOperation()">
      <option value="default"> Start..</option>              
      <option value="1" class="action1"> 1</option>
      <option value="2" class="action1"> 2</option>
      <option value="3" class="action1"> 3 </option>
      <option value="4" class="action2"> 4 </option>
      <option value="5" class="action3"> 5 </option>
</select>​

$('.action1').hide();
$('.action2').show();​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T06:37:46.367

您不能在 div 中对选项进行分组。您可以将它们分组到 < **optgroup** > 中，但我认为这不是您的目标。

相反，您应该做的是创建两个您可以切换的下拉菜单，或者保留一个下拉菜单并重新填充其选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T07:23:50.200

你可以试试这段代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("#hide").click(function(){
    $('.action1').wrap('<span></span>').hide();
  });
  $("#show").click(function(){
     $('.action1').unwrap('<span></span>').show();
  });
});
</script>
</head>
<body>
<select id="customerIds" onchange="doOperation()">
          <option value="default"> Start..</option>              
          <option value="1" class="action1"> 1</option>
          <option value="2" class="action1"> 2</option>
          <option value="3" class="action1"> 3 </option>
          <option value="4" class="action2"> 4 </option>
          <option value="5" class="action3"> 5 </option>
    </select>​
<button id="hide">Hide</button>
<button id="show">Show</button>
</body>
</html> 
```

# linux - Bash 脚本 unrar 然后用目录名重命名

> ID：14134122
> 
> 赞同：0
> 
> 时间：2013-01-03T06:35:32.150
> 
> 标签：linux, bash, rename, unrar

我想重命名目录中的文件，然后根据目录名称更改文件名，这就是我所拥有的，但它不太工作

```
 find . -type d | while read dir
do
  cd "$dir"
  find . -name \*.rar -exec unrar x '{}' \;
  find . -name \*.avi -exec mv '{}' "$dir.avi" \;
  cd ..
done 
```

root/directory.1.with.rar.in/

root/directory.2.with.rar.in/

root/directory.2.with.rar.in/

root/directory.2.with.rar.in/

root/directory.2.with.rar.in/

我希望将目录中的所有 rar 提取到根目录中，然后用提取它的目录的名称重命名。

# javascript - 如何让图片飞入浏览器窗口然后淡出？

> ID：14134123
> 
> 赞同：0
> 
> 时间：2013-01-03T06:35:36.127
> 
> 标签：javascript, jquery

如何让图片飞到浏览器窗口然后淡出。我需要一张图片从左侧飞入浏览器窗口，然后淡出。然后是下一张照片。我有五张图。我需要他们一次又一次地这样做。下面是我的代码：它不能正常工作。方法一：五张图片，id为“#Slogan0”，“#Slogan1”，...等。一开始，“left”是“-1000px”，第一个是“display”为“block”，其他都是“none”，这样我就可以改变它们让它们消失。“moveNext”是改变图片.

```
var sloganidPre = "#Slogan";
var slogannum = 0;
sloganid = sloganidPre + slogannum;
window.onload = function(){ 
moveNext();
}

function moveNext(){
cf.moveTo("next");  

if($(sloganid).css("display") == "block") {

    slogannum = (slogannum+1)%5;

    $(sloganid).css("display","none");
    sloganid=sloganidPre+slogannum;
    $(sloganid).css("display","block");
    $(sloganid).animate({left:"30px"});
        $(sloganid).css("opacity","0.2");
}

setTimeout(moveNext, 1500);
} 
```

方法2：向父节点创建新元素。

```
var sloganidPre = "Slogan";
var slogannum = 0;
var sloganid = "#"+sloganidPre + slogannum;

window.onload = function(){ 

$("#sloganparent").append("<div id=\""+sloganid+"\" style=\"width:744px;height:296px;position:absolute;left:-1000px;border:1px solid #0FF;overflow:hidden;display:block;\"\"><img src=\"img/"+sloganidPre+slogannum+".png\"  /></div>");
$(sloganid).animate({left:'30px',opacity:'0.2'});

moveNext();
}

function moveNext(){

cf.moveTo("next"); 
$("#sloganparent:first-child").empty();

slogannum = (slogannum+1)%5;
sloganid= "#"+sloganidPre+slogannum;

$("#sloganparent").append("<div id=\""+sloganid+"\" style=\"width:744px;height:296px;position:absolute;left:-1000px;border:1px solid #0FF;overflow:hidden;\"><img src=\"img/"+sloganidPre+slogannum+".png\"  /></div>");

var i=0;
for (i=-1000; i<30; i++) {
    document.getElementById(new String(sloganid)).style.left= new String("\""+i+"px\"");
}
setTimeout(moveNext, 1500);                     
} 
```

Jquery 似乎没有得到动态创建的元素。两种方法都不能正常工作。无论如何，我只想知道如何像标题所说的那样部署图片。任何方法都可以。tks 供您考虑。

# vb.net - 如何在不使用文本框的情况下从 vb.net 中的条形码扫描仪读取输入？

> ID：14134126
> 
> 赞同：2
> 
> 时间：2013-01-03T06:35:50.467
> 
> 标签：vb.net

我的程序已经运行良好，我使用 TextBox 来捕获条形码扫描仪输入。我的程序的目的是用于时间和考勤监控，问题是我想阻止用户使用键盘输入他们的 ID，因为它会使条形码扫描仪和他们的 ID 与条形码无用。

*我已经尝试从计算机上移除键盘并且它确实有效，但不能作为要求移除键盘......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T09:45:06.107

**选项1：**

获取连接到串行端口（由 COM 端口读取的原始串行设备）的条形码扫描仪。由于大多数条形码扫描仪模拟键盘敲击，因此无法直接区分条形码扫描仪输入和键盘输入（请参阅下一个选项）而不进入低级别（请参阅上次更新）。

一个连接到串行端口（或通过 USB 模拟一个，因为串行端口不再那么常见）使您可以完全控制输入的来源。

**选项 2：**

计算按时间键入的字符数。与打字相比，条形码扫描仪注入序列（行）非常快。通过计算按键次数来测量文本框中使用的时间（使用 CR+LF 作为测量点，因为这些按键也是由扫描仪发送的）可以为您提供一种区分人类是否正在打字的方法（除非有一个快速打字的人如 f) 或内容被注入。如果超时只是拒绝/清除输入。

此外，除了时间测量之外，条形码的校验和（如果您使用包含该校验和的）可用于进行额外的验证。

（您可以通过在下一个选项中覆盖 ctrl + v 来检测粘贴）。

**选项 3：**

结合选项 2，但不是在文本框中测量，而是点击 ProcessCmdKey() 函数（通过覆盖它）并在文本框有焦点时测量。这样，您可以首先缓冲输入，测量时间，如果在设定的超时值内，将行注入文本框。

*更新：*

**选项 4：**非技术方法 -

可用性改进：使条形码必须用扫描仪输入而不是打字在视觉上非常清晰。我将其作为一个选项包括在内，因为它很简单，如果正确也有效（不幸的是，没有正确答案是正确的）。

接近的可能包括 f.ex。文本框中的水印（“不要输入，扫描！”或按此顺序排列的内容）。给它一个不同的颜色、边框、大小等以将它与普通文本框区分开来，并有一个相关的帮助文本并随时可用，以提高清晰度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-08T06:12:59.820

我有同样的问题，我做了以下事情：

1.  我设置了一个 int 变量digitsPrevTyped = 0

2.  在我的文本框的“TextChanged”事件中，我添加了这个（文本框的最大大小为 17 个字符）：

    Private Sub tbxScannedText_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) 处理 tbxScannedText.TextChanged

    ```
    If tbxScannedText.Text.Length >= 17 Then
        SearchFunction(False)
    Else
        digitsPrevTyped = tbxScannedText.Text.Length   
    End If 
    ```

    结束子

3.  然后在我的“SearchFunction”中检查以下内容：

    ```
    Dim inputMethod As Char 

    If tbxScannedText.TextLength = 17 And digitsPrevTyped = 0 Then 
        inputMethod = TEXT_SCANNED
    Else
        inputMethod = TEXT_MANUALLY_ENTERED
    End If 
    ```

如果文本框最初的长度为 0 个字符，而现在的长度为 17 个字符，则表示该文本已被扫描。如果先前键入的文本的长度小于 17 个字符，则该文本已被键入。这是非常基本的，但它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:27:52.723

另一种可能的解决方法是处理按键事件以限制用户输入。不允许从键盘直接输入，并将 readonly 保留为 false。

在 KeyPress 事件处理程序中设置以下内容

```
Private Sub Textbox1_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles Textbox1.KeyPress
        e.Handled = True
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-11T03:44:43.770

无论如何都只需禁用键盘..使用条形码时，您可以禁用键盘而不在文本框上使用只读..

在按键事件上放一些代码，即

如果 e.keychar <> chrw(0) 那么 e.keychar = chrw(0) 如果结束

当用户输入任何内容时，该条件将自动触发..您将强制禁用用户的任何输入，但不会禁用条形码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-06T17:36:22.983

为什么不在条形码中使用“别名”，例如“123@#$！” （但让它变得愚蠢）是“JSMITH”并将字体颜色设置为与文本框中的背景颜色相同。用户在扫描时看不到他们正在输入的内容或条形码的值。

超级简单的方法，除了用户表中的另一个字段之外，实际上不需要添加任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-23T20:42:56.727

这是一篇旧文章，但我花了一些时间想出一种相对干净的方式来使用条形码扫描仪和组合框，所以这是为未来的用户准备的。

条码扫描仪通常可以配置为在扫描末尾附加回车和换行。我有一个表单，可以使用 _PreviewKeyDown 属性将用户输入或条形码扫描仪输入输入绑定组合框，并捕获值“Keys.Enter”。

例子：

```
If ((e.KeyCode = Keys.Enter) Then
'do stuff
Else
'do other stuff
End if 
```

验证数据源中是否存在数据有点棘手，因为组合框的 SelectedValue 属性不会更新，因此不会触发事件。我使用自定义方法来验证扫描的值是否存在于数据源中。此方法使用组合框的 .Text 属性。它用：

```
Me.combobox.findexactstring(Me.combobox.Text) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-22T14:20:49.047

```
If e.KeyCode = Keys.Enter And txt.Text.Length > 0 Then
    'To Do
Else
    'To Do
End if 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-11T14:24:04.160

我所有的扫描仪输入都进入一个“隐藏”文本框，然后根据输入根据需要填充可见的文本框。当然，这意味着您需要跟踪焦点所在的位置。任何类型的能够获得焦点的控件都会在这些事件中进行调用，以将焦点返回到当时“活动”文本框的任何位置，通常是隐藏的文本框。例如...

```
Private Sub buttons_gotFocus(sender As System.Object, e As System.EventArgs) Handles btnPrint.GotFocus, btnInMVPageDown.GotFocus, btnAdv.GotFocus, btnManual.GotFocus, btnResend.GotFocus, dgvInbound.GotFocus, dgvOutbound.GotFocus, TCRole.GotFocus
    Try
        activeTextbox.Focus()
    Catch ex As Exception
        'ignore any errors
    End Try

End Sub 
```

大多数其他文本框默认禁用，仅在特定条件下启用。完成该条目后，它们将被禁用，隐藏的条目将再次获得焦点。奇迹般有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-23T15:43:50.990

无需记录以前键入的字符。

这是我的解决方案：

```
Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) Handles TextBox1.TextChanged
    If TextBox1.Text.Length >= 17 Then '17 or the number of characters your scanner gets. 
        MsgBox("scanned")
        TextBox1.Clear()
    Else
        If TextBox1.Text.Length <> 0 Then TextBox1.Clear()
    End If
End Sub 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-17T02:38:00.520

这个答案将处理任何快速打字。

```
Dim scanner_input As Boolean = False
Dim start_typing As DateTime 

Private Sub TextBox_part_number_TextChanged(sender As Object, e As EventArgs) Handles 
 TextBox_part_number.TextChanged
    If (TextBox_part_number.Text.Length = 1) Then
        start_typing = DateTime.Now
        scanner_input = False
        ''   MsgBox(start_typing.ToString)
    ElseIf (TextBox_part_number.Text.Length > 7) Then
        If (calc_typing_time(start_typing) < 500) Then
            scanner_input = True
        Else
            scanner_input = False
        End If
    End If
End Sub
Function calc_typing_time(time_started As DateTime)
    Dim time_finished As DateTime
    time_finished = DateTime.Now
    Dim duration As TimeSpan = time_finished - time_started
    Dim time_diff As String = duration.TotalMilliseconds
    Return time_diff
End Function 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-11T09:19:23.440

大多数扫描仪都有一个与之通信的驱动程序（[Opos](https://en.wikipedia.org/wiki/OPOS)）它具有打开扫描仪端口并监听扫描的功能，因此您可以在后台获取结果并对其进行解码，然后在文本框中显示结果......什么您需要检查您的条码扫描仪的品牌，请访问其网站并下载驱动程序及其手册。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-05-16T12:00:09.633

您应该将文本框标记为只读。

# silverlight-4.0 - RadHtmlPlaceholder 问题

> ID：14134127
> 
> 赞同：1
> 
> 时间：2013-01-03T06:35:54.003
> 
> 标签：silverlight-4.0

我用`RadHtmlPlaceholder`来在一个窗口中显示 HTML 内容，但是当我拖动窗口时，HTML 内容仍然显示在原来的位置，而不是在窗口中。你能告诉我问题的根本原因吗？

```
<telerik:RadHtmlPlaceholder x:Name="htmlPlaceHolder" VerticalAlignment="Top" HorizontalAlignment="Left"  HtmlSource="{Binding Html}" Margin="0,0,0,8"/> 
```

# iphone - 应用程序内的 Dropbox 身份验证

> ID：14134131
> 
> 赞同：4
> 
> 时间：2013-01-03T06:36:23.707
> 
> 标签：iphone, ios, authentication, dropbox

有什么方法可以在 iPhone 中的 Dropbox 应用内对用户进行身份验证？

我使用[Dropbox IOS](https://www.dropbox.com/developers/start/authentication#ios)指令来集成 Dropbox。

但是我的应用程序被苹果拒绝，因为“应用程序退出到 Safari 以验证用户的 Dropbox 帐户”。

请给我一些解决方案，以便我可以在应用程序中验证 Dropbox。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T06:44:49.990

是的，您可以在应用程序中对 Dropbox 进行身份验证。Dropbox 的新 API 在应用程序中进行身份验证。

下面的方法是您想要打开 dropbox.so 只需编写该方法并将该操作分配给按钮，其余的委托方法您可以在[https://www.dropbox.com/developers/start/authentication#ios](https://www.dropbox.com/developers/start/authentication#ios)链接上找到

```
 -(IBAction)goDropBox
  {

  //DBSession* dbSession =    [[DBSession sharedSession] unlinkAll];
 // if (![[DBSession sharedSession] isLinked])
  // {
       [[DBSession sharedSession] linkFromController:self];
  // }
  } 
```

快乐编码！！！！！！

# c# - 如何在列表中搜索字符串 > 在 C# 中

> ID：14134139
> 
> 赞同：13
> 
> 时间：2013-01-03T06:37:01.973
> 
> 标签：c#, list, tuples

我有一个

```
 List<Tuple<string,string>> tr = new List<Tuple<string,string>>();
        tr.Add(new Tuple<string, string>("Test","Add");
        tr.Add(new Tuple<string, string>("Welcome","Update");

        foreach (var lst in tr)
         {
             if(lst.Contains("Test"))
              MessageBox.Show("Value Avail");

          } 
```

我在这样做时失败了，......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T06:50:14.673

如果您想使用 LINQ：

```
if(tr.Any(t => t.Item1 == "Test" || t.Item2 == "Test"))
    MessageBox.Show("Value Avail"); 
```

如果多次找到文本（如果需要的话），这也将具有仅显示一次消息框的好处。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T06:38:25.683

可能这应该工作：

```
foreach (var lst in tr)
{        
    if (lst.Item1.Equals("Test"))        
        MessageBox.Show("Value Avail");
} 
```

或这个

```
if (lst.Item1.Equals("Test") || lst.Item2.Equals("Test")) 
```

* * *

读取[元组类](http://msdn.microsoft.com/en-us/library/dd268536.aspx)；您需要通过`Item1`和/或`Item2`属性访问元组的值。

* * *

为什么要使用元组呢？也许这更容易：

```
Dictionary<string, string> dict = new Dictionary<string, string>
{
    {"Test", "Add"},
    {"Welcome", "Update"}
};

if (dict.ContainsKey("Test"))
{
    MessageBox.Show("Value Avail:\t"+dict["Test"]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:38:40.747

它不应该是`foreach (var lst in tr)`lstEvntType 并且您应该测试元组的 Item1 字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-17T19:43:16.727

也许这可能对其他人有所帮助。这是我采用的方法：

```
List<Tuple<string,string>> tr = new List<Tuple<string,string>>();
tr.Add(new Tuple<string, string>("Test","Add");
tr.Add(new Tuple<string, string>("Welcome","Update");

if(lst.Any(c => c.Item1.Contains("Test")))
    MessageBox.Show("Value Avail"); 
```

（信用在[这里](https://stackoverflow.com/a/13901400/2352507)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-20T04:25:30.287

```
List<Tuple<string,string>> tr = new List<Tuple<string,string>>();
tr.Add(new Tuple<string, string>("Test","Add");
tr.Add(new Tuple<string, string>("Welcome","Update");
var index = tr.FindIndex(s=>s.Item1 == "Test" || s.Item2 == "Test");
if(index != -1)
MessageBox.Show("Value Avail"); 
```

使用 FindIndex，您可以同时检查元素的可用性和索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T06:41:32.280

为什么要迭代 lstEvntType 而不是 tr？你应该试试这个：

```
List<Tuple<string,string>> tr = new List<Tuple<string,string>>();
tr.Add(new Tuple<string, string>("Test","Add"));
tr.Add(new Tuple<string, string>("Welcome","Update"));
List<Tuple<string,string>>  lstEvntType = new List<Tuple<string,string>>();

    foreach (var lst in tr)
    {
        if(lst.Item1.Equals("Test"))
            MessageBox.Show("Value Avail");
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T06:48:24.693

改变

```
if(lst.Contains("Test")) 
```

到

```
 if(lst.Item1.Contains("Test") ||  lst.Item2.Contains("Test")) 
```

如果 tuple 有更多项，则需要为所有项添加条件。

如果你想让所有元组通用，你需要使用反射（和[古怪的方式](https://stackoverflow.com/questions/1196991/get-property-value-from-string-using-reflection-in-c-sharp)）。

# ruby-on-rails - 无法使用 Rubber 连接到 ec2

> ID：14134141
> 
> 赞同：2
> 
> 时间：2013-01-03T06:37:05.833
> 
> 标签：ruby-on-rails, ruby, amazon-ec2

我正在尝试使用 Rubber gem 将我的 rails 应用程序上传到亚马逊 ec2（我正在关注[Railscasts 教程](http://railscasts.com/episodes/347-rubber-and-amazon-ec2)）。每次我运行`cap rubber:create_staging`我都无法连接到服务器。我一直在尽一切可能让这个工作，但经过一整天的尝试，我想我会在这里发布发生的事情。

```
Andrews-MacBook-Pro:blog andrew$ cap rubber:create_staging
Respawning with 'bundle exec'
    triggering load callbacks
  * 2013-01-03 17:27:20 executing `rubber:init'
  * 2013-01-03 17:27:23 executing `rubber:create_staging'
Hostname to use for staging instance [production]: 
Roles to use for staging instance [apache,app,collectd,common,db:primary=true,elasticsearch,examples,graphite_server,graphite_web,graylog_elasticsearch,graylog_mongodb,graylog_server,graylog_web,haproxy,mongodb,monit,passenger,postgresql,postgresql_master,web,web_tools]: 
  * 2013-01-03 17:27:26 executing `rubber:create'
  * Security Group already in cloud, syncing rules: blog_production_production
  * Security Group already in cloud, syncing rules: blog_production_graylog_mongodb
  * Security Group already in cloud, syncing rules: blog_production_mongodb
  * Security Group already in cloud, syncing rules: blog_production_postgresql
  * Security Group already in cloud, syncing rules: blog_production_postgresql_master
  * Security Group already in cloud, syncing rules: blog_production_db
  * Security Group already in cloud, syncing rules: blog_production_app
  * Security Group already in cloud, syncing rules: blog_production_web
  * Security Group already in cloud, syncing rules: blog_production_haproxy
  * Security Group already in cloud, syncing rules: blog_production_elasticsearch
  * Security Group already in cloud, syncing rules: blog_production_monit
  * Security Group already in cloud, syncing rules: blog_production_common
  * Security Group already in cloud, syncing rules: blog_production_default
  * Security Group already in cloud, syncing rules: blog_production_graylog_elasticsearch
  * Security Group already in cloud, syncing rules: blog_production_apache
  * Security Group already in cloud, syncing rules: blog_production_passenger
  * Security Group already in cloud, syncing rules: blog_production_examples
  * Security Group already in cloud, syncing rules: blog_production_graphite_web
  * Security Group already in cloud, syncing rules: blog_production_graphite_server
  * Security Group already in cloud, syncing rules: blog_production_graylog_server
  * Security Group already in cloud, syncing rules: blog_production_collectd
  * Security Group already in cloud, syncing rules: blog_production_graylog_web
  * Security Group already in cloud, syncing rules: blog_production_web_tools
 ** Creating instance ami-eafa5883/m1.small/blog_production_default,blog_production_web,blog_production_web_tools,blog_production_production,blog_production_apache,blog_production_app,blog_production_passenger,blog_production_collectd,blog_production_common,blog_production_monit,blog_production_db,blog_production_postgresql,blog_production_postgresql_master,blog_production_elasticsearch,blog_production_examples,blog_production_graphite_server,blog_production_graphite_web,blog_production_graylog_elasticsearch,blog_production_graylog_mongodb,blog_production_mongodb,blog_production_graylog_server,blog_production_graylog_web,blog_production_haproxy/Default
 ** Instance production created: i-7b4f840a
Waiting for instances to start..........................
 ** Instance running, fetching hostname/ip data
  * 2013-01-03 17:28:37 executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["23.20.130.97"]
.... ** Failed to connect to 23.20.130.97, retrying
  * 2013-01-03 17:28:44 executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["23.20.130.97"]
. ** Failed to connect to 23.20.130.97, retrying
  * 2013-01-03 17:28:46 executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["23.20.130.97"]
. ** Failed to connect to 23.20.130.97, retrying
  * 2013-01-03 17:28:49 executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["23.20.130.97"]

etc 
```

然后它似乎进入了一个无限循环，并每隔几分钟尝试像上面那样连接到服务器。

**编辑：**我终于通过在我的本地机器上重新安装 ruby​​ + gems 解决了这个问题。仍然不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T20:12:58.737

我遇到了类似的错误，但通过重命名我的私钥来修复它，因此它没有 .pem 扩展名。橡胶常见问题解答对此做了一些参考。

[https://github.com/rubber/rubber/wiki/FAQ](https://github.com/rubber/rubber/wiki/FAQ)

在我进行此更改后，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T18:09:00.400

这实际上是因为当您在 EC2 上创建实例时，即使创建了实例（您可以在 AWS 管理控制台上看到绿灯），仍然需要一些时间来传播 IP 地址才能从您的部署机器访问。

解决方案实际上是等待几分钟，因为它最终会连接。

# asp.net - 在 HTML 电子邮件中，我无法进入下一行

> ID：14134144
> 
> 赞同：1
> 
> 时间：2013-01-03T06:37:20.370
> 
> 标签：asp.net, email

在我的邮箱中显示我的电子邮件时，我遇到了一个有趣的问题。当我通过主机发送电子邮件时，它成功发送给我的用户，但在我的电子邮件文本的某些部分中，我想转到下一行，我使用
标签来做到这一点。奇怪的是，在某些邮箱中它会转到下一行，而在其他一些邮箱中则不会！例如正确的形式是：

```
Dear Dr smith:
nice....

thank you very much 
```

但它显示如下：

```
Dear Dr smith: nice.... thank you very much 
```

这是我的代码：

```
MailMessage msg = new MailMessage();
StringBuilder bodyMsg = new StringBuilder();
msg.Subject = "Submission Confirmation";

bodyMsg.Append("<html><head><img src=" + "http://javahery21.ir/images/header.jpg" + ">" + "<title>CONFIRMATION EMAIL:</title></head><body>");
bodyMsg.Append("<br/>");
string link = string.Format("http://javahery21.ir/Activate.aspx?userID={0}", userID.ToString());
bodyMsg.Append("Dear " + RadioButtonList_Prefix.SelectedItem.Text + " " + name.Text + " " + middle.Text + " " + lastname.Text + ":<br/> Thank you for registering with Publishing manuscript submission system.");
bodyMsg.Append("To confirm and complete your registration<p>" + " <a href=" + link + ">" + "fallow this link" + "</a></p>.");
//bodyMsg.Append("<br/><br/>");

bodyMsg.Append("<br/>This link is active for 48 hours. If the link is not visited within this time frame, your registration will be discarded and you will need to register again.<br/><br/></br>Best regards,</br>Publishing<br/>http://***.com");

msg.IsBodyHtml = true;
msg.Body = bodyMsg.ToString();

msg.BodyEncoding = System.Text.Encoding.GetEncoding("utf-8");
msg.Priority = MailPriority.High;

//  msg.ReplyTo = new MailAddress(TextBox2.Text);
msg.From = new MailAddress("***@***.**");
msg.To.Add(new MailAddress(TextBox_email.Text));
SmtpClient mailsender = new SmtpClient();

mailsender.Host = "SmtpClient.***.**";

mailsender.Port = 587;
mailsender.EnableSsl = true;
mailsender.Credentials = new System.Net.NetworkCredential("****@***.**", "classaspnet");

SmtpClient smtp = new SmtpClient();
//Literal1.Text = "<script>alert(' ')</script>";
smtp.Send(msg); 
```

我在哪里做错了？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:08:59.993

尝试使用`<p>`标签。

例如。

```
<p>Dear Dr smith:</p>
<p>nice....</p>
<br/>
<p>thank you very much</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:16:38.673

你错过了这个

```
String msgText = getHtmlMessageText(...);
msg.setContent(msgText, "text/html"); 
```

您没有设置消息的内容类型

# ios - 如何在没有内存警告的情况下在uitableview中异步加载图像？

> ID：14134146
> 
> 赞同：2
> 
> 时间：2013-01-03T06:37:24.240
> 
> 标签：ios, image, uitableview, asynchronous, crash

嗨，我正在开发一个应用程序，我将从 Web 服务中获取图像并将图像加载到 tableview 中。我异步加载图像。问题是我的应用程序在滚动表格视图时崩溃，并在日志中显示内存收到警告。同样的图像在许多行中重复出现。加载需要更多时间。我使用了下面的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ 静态 NSString *CellIdentifier = @"Cell";

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    /*   UILabel * cellLabel=[[UILabel alloc] initWithFrame:CGRectMake(0, 50, cell.frame.size.width-20, 45)];
     cellLabel.textColor=[UIColor blackColor];
     cellLabel.backgroundColor=[UIColor clearColor];
     cellLabel.tag=2;
     [cell.contentView addSubview:cellLabel];*/

    cell.selectionStyle=UITableViewCellSelectionStyleNone;

    cell.backgroundView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"list_iPhone.png"]];

    UIImageView *imv = [[UIImageView alloc]initWithFrame:CGRectMake(10,18, 48, 48)];
    imv.tag=4;
    imv.image=[UIImage imageNamed:@"ImagePlaceholder.png"];

    [cell.contentView addSubview:imv];

    UIImageView *arrwimv = [[UIImageView alloc]initWithFrame:CGRectMake(260,35, 14, 17)];
    arrwimv.image=[UIImage imageNamed:@"arrw_iPhone.png"];

    [cell.contentView addSubview:arrwimv];

    UILabel *descriptionLbl=[[UILabel alloc] initWithFrame:CGRectMake(100, 27, 450, 45)];
    descriptionLbl.font=[UIFont CITY311_TitleFontWithSize:18];
    descriptionLbl.tag=1;
    descriptionLbl.textAlignment=UITextAlignmentLeft;
    descriptionLbl.textColor=[UIColor blackColor];
    descriptionLbl.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:descriptionLbl];

    UILabel *descriptionLbl2=[[UILabel alloc] initWithFrame:CGRectMake(100, 5, 450, 45)];
    descriptionLbl2.font=[UIFont CITY311_TitleFontWithSize:18];
    descriptionLbl2.tag=2;
    descriptionLbl2.textAlignment=UITextAlignmentLeft;
    descriptionLbl2.textColor=[UIColor blackColor];
    descriptionLbl2.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:descriptionLbl2];

}
UIImageView *imv2=(UIImageView *)[cell.contentView viewWithTag:4];

dispatch_async(mainQueue, ^(void) {

    if(![[[issueArray objectAtIndex:indexPath.row]objectForKey:@"PhotoUrl"] isEqualToString:@""])
    {

        NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[[issueArray objectAtIndex:indexPath.row]objectForKey:@"PhotoUrl"]]];
        UIImage* image = [[UIImage alloc] initWithData:imageData];

        imv2.image = image;

    }

});

UILabel *lbl=(UILabel *)[cell.contentView viewWithTag:1];
lbl.text=[[issueArray objectAtIndex:indexPath.row] objectForKey:@"issueSubmittedDate"];

UILabel *lbl2=(UILabel *)[cell.contentView viewWithTag:2];
lbl2.text=[[issueArray objectAtIndex:indexPath.row] objectForKey:@"IssueName"];

return cell; 
```

}

鉴于确实加载

```
mainQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); 
```

在 .h 文件中

dispatch_queue_t 主队列；

请帮助正确加载图像，而不会出现任何内存警告（崩溃）。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:00:40.317

您正在重用 tableviewcells。当一个单元格移出屏幕时，它将被放在一边，以便您可以重复使用该对象。当您执行 dequeueReusableCellWithIdentifier 时，您可以获得一个已经包含图像的“旧”单元格。如果您不清除该单元格中的数据，您将看到旧数据（图像），直到下载新图像。

在 if(cell==nil) 内，您应该只创建单元格并设置每一行都相同的属性。设置并清除 if 下面的数据。

The crashes probably happen because a cell can be moved out of the view and reused for an other row before the initial callback is ready. Try setting the identifier to a unique value. Something like: NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.Row]; Only keep your code like that when the number of rows is low. Otherwise you could get memory problems.

Instead of trying to fix it yourself, you could try using something like [https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

# c# - Datagridview 给出错误`索引-1没有值`

> ID：14134153
> 
> 赞同：0
> 
> 时间：2013-01-03T06:37:51.807
> 
> 标签：c#, data-binding, datagridview

我有一个奇怪的问题。将列表分配给数据源后。当我单击网格时，出现错误`Index -1 does not have value`。无论我在哪里尝试并捕获此错误都不会被捕获。

下面是将数据添加到列表并分配给 DataSource 的代码。

```
try
{
    this.GrdMain.DataSource = null;
    this.order.LineItems.Add(oli);
    this.GrdMain.DataSource = order.LineItems;
    this.FormatGrid();
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message, "btnAddLine_Click");
} 
```

下面是代码`FormatGrid()`

```
 private void FormatGrid()
    {
        try
        {
        for (int i = 0; i < this.GrdMain.Columns.Count; i++)
        {

            if (this.GrdMain.Columns[i].Name.ToUpper() == "ItemCode".ToUpper())
            {
                DataGridViewColumn column1 = this.GrdMain.Columns[i];
                column1.Width = 60;

            }
            else if (this.GrdMain.Columns[i].Name.ToUpper() == "ItemName".ToUpper())
            {
                DataGridViewColumn column1 = this.GrdMain.Columns[i];
                column1.Width = 200;

            }
            else if (this.GrdMain.Columns[i].Name.ToUpper() == "Disposable".ToUpper())
            {
                DataGridViewColumn column1 = this.GrdMain.Columns[i];
                column1.Width = 60;
                column1.HeaderText = "Disposable";

            }
            else if (this.GrdMain.Columns[i].Name.ToUpper() == "Rate".ToUpper())
            {
                DataGridViewColumn column1 = this.GrdMain.Columns[i];
                column1.Width = 70;

            }
            else if (this.GrdMain.Columns[i].Name.ToUpper() == "Qty".ToUpper())
            {
                DataGridViewColumn column1 = this.GrdMain.Columns[i];
                column1.Width = 70;

            }
            else if (this.GrdMain.Columns[i].Name.ToUpper() == "Total".ToUpper())
            {
                DataGridViewColumn column1 = this.GrdMain.Columns[i];
                column1.Width = 70;

            }
            else 
                GrdMain.Columns[i].Visible = false;

        }
        }
        catch (Exception ex)
        {

            MessageBox.Show(ex.Message, "FormatGrid");
        }
    } 
```

# ios - 电话间隙未在 IOS 6 上显示模拟器

> ID：14134156
> 
> 赞同：0
> 
> 时间：2013-01-03T06:38:06.190
> 
> 标签：ios, xcode, cordova

我是电话间隙的新手，我按照以下步骤为 ios 创建了应用程序

[phonegap IOS](http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

当我通过选择目标 Cordova 运行应用程序时，它构建成功，但没有显示模拟器

当我选择目标 helloworld 时，它给了我两个错误

`"Apple Mach-O Linker error"`

我正在使用， **xcode 4.5，MAC OS 10.8，phonegap 2.2.0**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T11:49:20.480

通过将 phonegap 版本更改为旧版本 2.1.0 问题已解决

# macos - XPC 是否需要 MAS 沙盒

> ID：14134184
> 
> 赞同：3
> 
> 时间：2013-01-03T06:40:41.147
> 
> 标签：macos, cocoa, sandbox, xpc

我有一个沙盒应用程序。

此应用程序具有未沙盒化的 XPC 服务。

XPC 服务是否也需要经过沙盒处理才能提交到 Mac App Store？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:10:12.010

作为 Mac App Store 提交的一部分的每个二进制文件（包括 XPC 组件）都[必须经过沙盒](https://developer.apple.com/devcenter/mac/checklist/)处理。但是，每个二进制文件的权利可以（并且可能应该，如果应用程序经过精心设计）是不同的：XPC 旨在支持这种情况。

# javascript - Objective-C 到 JavaScript 调用没有发生

> ID：14134196
> 
> 赞同：0
> 
> 时间：2013-01-03T06:41:53.197
> 
> 标签：javascript, objective-c, ios, cordova

我正在使用 Phonegap/Cordova(2.1.0) 创建 IOS 应用程序。我想从 Objective-C 函数调用 Phonegap 的 index.html 文件中的 JavaScript 函数。所以，我正在创建一个“UIWebView”类的实例“theWebView”，如下所示：

AppDelegate.h 中的代码：

```
#import <UIKit/UIKit.h>

#import <Cordova/CDVViewController.h>
#import "sqlite3.h"

@interface AppDelegate : NSObject < UIApplicationDelegate > {
    NSString* invokeString;

}

@property (nonatomic, strong) IBOutlet UIWebView* theWebView; 
```

AppDelegate.m 中的代码：

```
#import "AppDelegate.h"
#import "MainViewController.h"
#import <Cordova/CDVPlugin.h>

@implementation AppDelegate

@synthesize theWebView; 
```

调用JavaScript函数的代码如下：

```
// to call javascript function 
    [theWebView stringByEvaluatingJavaScriptFromString:@"myJavascriptFunction()"]; 
```

代码已成功构建。但是，在 index.html 的脚本标签中定义的 JavaScript 函数“myJavascriptFunction()”没有被调用。我怎样才能做到这一点？

我还附加了 Web 视图加载代码，它存在于 MainViewController.m 文件中。因为，我使用的是 Cordova 2.1.0，所以 ViewController 和 AppDelegate
类存在单独的文件。

```
/**
 Called when the webview finishes loading.  This stops the activity view and closes the imageview
 */
- (void)webViewDidFinishLoad:(UIWebView *)theWebView 
{
    NSLog(@"webViewDidFinishLoad function");

    // Black base color for background matches the native apps
    theWebView.backgroundColor = [UIColor blackColor];

    return [ super webViewDidFinishLoad:theWebView ];
}

- (void)webViewDidStartLoad:(UIWebView *)theWebView 
{
    NSLog(@"webViewDidStartLoad function");    
    return [ super webViewDidStartLoad:theWebView ];
}

/**
 * Fail Loading With Error
 * Error - If the webpage failed to load display an error with the reason.
 */
- (void)webView:(UIWebView *)theWebView didFailLoadWithError:(NSError *)error 
{
    NSLog(@"didFailLoadWithError function");
    return [ super webView:theWebView didFailLoadWithError:error ];
}

/**
 * Start Loading Request
 * This is where most of the magic happens... We take the request(s) and process the response.
 * From here we can redirect links and other protocols to different internal methods.
 */
- (BOOL)webView:(UIWebView *)webView2 
shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    NSLog(@"shouldStartLoadWithRequest function");

    // Intercept custom location change, URL begins with "js-call:"
    if ([[[request URL] absoluteString] hasPrefix:@"js-call:"]) {

        // Call the given selector
        [[[UIApplication sharedApplication] delegate] performSelector:NSSelectorFromString(@"resetBadgeCount")];

        // Cancel the location change
        return NO;
    }

    // Accept this location change
    return YES;

} 
```

index.html 中围绕 javascript 函数“myJavascriptFunction”的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Index Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <link rel="stylesheet" href="iui/iui.css" type="text/css" media="all"/>
        <link rel="stylesheet" title="Default" href="iui/t/default/default-theme.css"  type="text/css" media="all"/>
        <link rel="stylesheet" href="iui/t/default/iui-custom.css" type="text/css" media="all"/>
        <script type="text/javascript" src="cordova-2.1.0.js"></script>
        <script type="text/javascript">

            function myJavascriptFunction()
            {
                alert('myJavascriptFunction');

                return;
            }

            </script>

    </head>
    <body id="bd">
    </body>
</html> 
```

我附加了 Objective-C 代码来加载 index.html 文件，然后调用 JavaScript 函数：

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"www"];
    NSURL *baseURL = [NSURL fileURLWithPath:path];
    NSString *myFile = [path stringByAppendingPathComponent:@"index.html"];

    NSLog(@"base url= %@",myFile);

    NSData *myFileData = [[NSData alloc] initWithContentsOfFile:myFile];
    NSString* myFileHtml = [[NSString alloc] initWithData:myFileData encoding:NSASCIIStringEncoding];

    [theWebView loadHTMLString:myFileHtml baseURL:baseURL];

    // to call javascript function 
    [theWebView stringByEvaluatingJavaScriptFromString:@"onDeviceReady()"]; 
```

我在想问题出在最后一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:14:12.480

我不认为你对这段代码有问题。在这里一切看起来都很好，但是如果工作正常，您应该检查`myJavascriptFunction()`您是否正在调用。您可以从带有 JavaScript 控制台的浏览器尝试，看看它在手动调用时是否可以工作。

例如，适用于我的 myJavascriptFunction 代码是：

```
 function myJavascriptFunction()
        {
            window.location = "http://www.google.com/";
        } 
```

~~虽然警报代码没有显示任何警报，特别是没有`UIAlertView`。~~

关于警报，我在这里更正了，UIAlertView 显示在 Javascript 警报事件上。

# redirect - Powershell：可以将标准输出重定向到 PowerShell 函数吗？

> ID：14134198
> 
> 赞同：0
> 
> 时间：2013-01-03T06:41:55.430
> 
> 标签：redirect, powershell

我使用 vim 并希望在 Powershell中使用它来模拟[更少。](http://en.wikipedia.org/wiki/Less_%28Unix%29)所以我想写一个PowerShell函数来包装它。

Vim 有一个[less 模式](http://vimdoc.sourceforge.net/htmldoc/various.html#less)。要使用它，我只需要发出这样的命令：

```
type somefile.txt | vim --cmd 'let no_plugin_maps = 1' -c 'runtime! macros/less.vim' - 
```

但是 PowerShell 函数似乎没有办法让我从管道中获取标准输出*。*有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:54:46.423

我使用批处理文件（less.bat）解决了这个问题，如下所示：

```
cmd /c vim --cmd 'let no_plugin_maps = 1' -c 'runtime! macros/less.vim' - 
```

你可以像这样使用它：

```
type somefile.txt | less 
```

请注意，如果您还需要使用以下方式调用 less，则需要对批处理文件中的参数进行条件测试。

```
less somefile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:08:34.170

> 但是 PowerShell 函数似乎没有办法让我从管道中获取标准输出。

只是一个提示，因为我不完全理解你的管道是如何工作的。无论如何，您知道 ValueFromPipeLine* 装饰吗？

```
function less {
 param( 
 [Parameter(ValueFromPipeLine=$true)]
  $input
 )
 process {
    ##concatenate strings here, or process whatever vim sends into the pipeline
 }
} 
```

[...相关问题？](https://stackoverflow.com/questions/9328777/valuefrompipeline-behavior)

# php - 如何在 php 中更改 url 中的页面标题或菜单标题？

> ID：14134201
> 
> 赞同：2
> 
> 时间：2013-01-03T06:42:22.347
> 
> 标签：php, mysql

> **可能重复：**
> [PHP - 如何将页面标题添加到 URL？以及如何使用 PHP 创建一个干净的 url](https://stackoverflow.com/questions/4523587/php-how-to-add-a-pages-title-to-the-url-and-how-to-create-a-clean-url-using-p)

我在我的网站中使用 url，例如`http://www.example.com/details.php?cid=3`. 我想将这种类型的 url 放入`http://www.example.com/PAGE-TITLE-URL or /details/page-title`.

为了在我的网站中获得这个友好的网址，我必须做哪些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:48:35.520

为此，更好的建议是使用 .htaccess 重写 url

有关了解 htaccess 的更多信息，您可以查看此链接：-

[http://www.htaccess-guide.com/](http://www.htaccess-guide.com/)

和

[https://my.bluehost.com/cgi/help/htaccess_redirect](https://my.bluehost.com/cgi/help/htaccess_redirect)

# android - Facebook Api 3.0 与 Fragment 的集成

> ID：14134202
> 
> 赞同：1
> 
> 时间：2013-01-03T06:42:39.693
> 
> 标签：android, facebook

我在 android 中使用 Fragments 并将 facebook 登录与其集成，以获取用户详细信息。

```
public void postOnfacebook() {
        Session.openActiveSession(getActivity(), this, true,
                new StatusCallback() {

                    @Override
                    public void call(Session session, SessionState state,
                            Exception exception) {
                        if (session.isOpened()) {
                            Request.executeMeRequestAsync(session,
                                    new GraphUserCallback() {

                                        @Override
                                        public void onCompleted(GraphUser user,
                                                Response response) {
                                            if (user != null) {
                                                id = user.getId();
                                                name = user.getName();

                                                gender = user
                                                        .getProperty("gender") == null ? "male"
                                                        : user.getProperty(
                                                                "gender")
                                                                .toString();

                                            }

                                    }
                                });
                    }

                }
            });
} 
```

`fragment`根据文档，我还包含以下方法

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(getActivity(), requestCode,
                resultCode, data);
} 
```

我在 中尝试过相同的代码`Activity`，它在那里工作，但在`Fragment`. 根据文档，我已经包含`LoginActivity`在里面`AndroidManifest.xml`和`metadate`for中。`facebookapplicationId`

你能建议我在哪里出错，以防万一`Fragment`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:22:33.837

我想出了解决方案，上面的代码实际上是正确的，我做错了什么，因为它不起作用。我更正了上面的代码有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T07:52:50.450

据我了解，facebook sdk 不支持片段。所以onActivityForResult不会被触发，这个要移到fragments中Parent Parent FragmentActivity应该有如下代码；这也会更新片段中的会话，您可以处理片段中的会话。

```
 @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        System.out.println("OnActivityResult fragment Parent");
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode,
                resultCode, data);
    } 
```

在片段中添加类似于以下内容的内容。使用 getActivity() 获取片段。session.isOpened() 会在执行 parentFragmentActivity 的 onActivityResult 时自动触发。

```
btnFacebook.setOnClickListener(new View.OnClickListener() {         
    @Override
    public void onClick(View v) {   
        Session.openActiveSession(getActivity(), true, new Session.StatusCallback() {
                    @Override
                    public void call(final Session session, SessionState state,
                            Exception exception) {
                        System.out.println("Session :"+session.getState());
                        if (session.isOpened()) {
                            Request.executeMeRequestAsync(session,
                                    new GraphUserCallback() {

                                        @Override
                                        public void onCompleted(GraphUser user,
                                                Response response) {
                                            if (user != null) {
                                                System.out.println("User ID "+user.getId());
                                                System.out.println("User Name "+user.getFirstName()+" "+user.getLastName());;
                                                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                                                    // callback after Graph API response with user object
                                                    @Override
                                                    public void onCompleted(GraphUser user, Response response) {
                                                      if (user != null) {
                                                          System.out.println(user.getName());
                                                          System.out.println("facebook user id" + user.getId());
                                                         System.out.println(user.asMap().get("email").toString());
                                                         // Session.OpenRequest open = new Session.OpenRequest(Login)
                                                      }
                                                    }
                                                  });
                                            }

                                    }
                                });
                    }

                }
            });
    }
}); 
```

# twitter-bootstrap - Twitter Bootstrap：从弹出框获取选择器值

> ID：14134203
> 
> 赞同：0
> 
> 时间：2013-01-03T06:42:47.067
> 
> 标签：twitter-bootstrap, selector, popover

如果我在创建弹出框时定义选择器选项。如何检查 popover 的选择器值是什么？换句话说，我可以获得与该特定 popover 关联的选项对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:48:33.620

我有点不确定你在问什么。

对于您是否可以获得特定弹出框的选项的第三个问题，您可以执行以下操作

```
var options = {
 //your popover options
}

$('#selector').popover(options);

var $popover = $('#selector').data('popover');

console.log($popover.options); 
```

**BS 3 更新**

数据属性现在命名空间

`var $popover = $('#selector').data('bs.popover');`

# php - 如何使用 html/php/mysqli 显示不正确的答案

> ID：14134206
> 
> 赞同：0
> 
> 时间：2013-01-03T06:42:50.067
> 
> 标签：php, html, mysqli

我在下面有一个查询，它显示考试中每个问题的正确答案：

```
<?

        $query = "SELECT q.SessionId, q.QuestionId an.Answer
        FROM Session s
        INNER JOIN Question q ON s.SessionId = q.SessionId
        JOIN Answer an ON q.QuestionId = an.QuestionId
        AND an.SessionId = q.SessionId
        WHERE s.SessionName = "XULWQ"
        ORDER BY q.QuestionId, an.Answer
       ";

       // prepare query
       $stmt=$mysqli->prepare($query);
       // You only need to call bind_param once
       $stmt->bind_param("s", $assessment);
       // execute query
       $stmt->execute(); 

           // This will hold the search results
        $searchQuestionId = array();
        $searchAnswer = array();

        // Fetch the results into an array

       // get result and assign variables (prefix with db)
       $stmt->bind_result($dbSessionId, $dbQuestionId, $dbAnswer);
          while ($stmt->fetch()) {

            $searchQuestionId[] = $dbQuestionId;
            $searchAnswer[] = $dbAnswer;

          } 

    ?> 
```

以下是查询的输出结果：

```
SessionId  QuestionId  Answer
137        1           B
137        1           D
137        1           F
137        2           A
137        2           C 
```

现在我使用下面的代码将上面的数据存储在一个 php/html 表中：

```
<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='answerth'>Answer</th>
</tr>
</thead>
<tbody>
<?php
$row_span = array_count_values($searchQuestionId);
$prev_ques = '';
foreach($searchQuestionId as $key=>$questionId){

?>

<tr class="questiontd">
    <?php
    if($questionId != $prev_ques){
    ?>
    <td class="questionnumtd q<?php echo$questionId?>_qnum" name="numQuestion" rowspan="<?php echo$row_span[$questionId]?>">
    <?php echo$questionId?> 
    </td>
    <?php
    }
    ?>
<td class="answertd" name="answers[]"><?php echo$searchAnswer[$key]?><input type='hidden' id='hidanswerid' name='answersId[]' value='<?php echo$searchAnswerId[$key]?>'></td>
</tr>
<?php
$prev_ques = $questionId;
}
?>
</tbody>
</table> 
```

html/php 表的输出：

![在此处输入图像描述](../Images/8734a51313c3d9b0dbaea6cfa0888f74.png)

因此，您可以看到我输出了一个表格，其中包含该考试中每个问题的正确答案。伟大的。但现在我想创建另一个类似的页面，但这次除了显示每个问题的正确答案外，我希望它显示每个问题的错误答案。

我不确定什么是最好的方法，但我相信我的计划是首先检索每个问题的 option_type （选项类型是从中选择答案的选项数量）：

询问：

```
 $query="SELECT q.SessionId, q.QuestionId, o.OptionId
    FROM SESSION s
    INNER JOIN Question q ON s.SessionId = q.SessionId
    JOIN Option_Table o ON q.OptionId = o.OptionId
    WHERE s.SessionName = "XULWQ"
    ORDER BY q.QuestionId"; 
```

结果：

```
SessionId   QuestionId OptionId
137         1              5
137         2              2 
```

然后在 php 中使用 case 语句来显示每个案例的字母（需要帮助编码）：

例如

```
case 1, OptionId = 1, letters = A B C
case 2, OptionId = 2, letters = A B C D
case 3, OptionId = 3, letters = A B C D E

... //continue going down

case 26, OptionId = 26, letters = A B C D E ... Z
case 27, OptionId = 27, letters = True False (Options True or False)
case 28, OptionId = 28, letters = Yes or No (Options Yes or No) 
```

然后一些如何从字母中删除正确答案（可能使用查询，但我不确定）所以 html/php 表包含所有不正确的答案，而不是表中的正确答案

所以我的问题是如何编码以便在 html/php 表中显示不正确的答案而不是正确的答案？

上面示例中的 html/php 表的输出应如下所示：

![在此处输入图像描述](../Images/8642c67eaca8eb0efa43d21910924e05.png)

评论：您可以在打印时在问题之间交换答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:21:36.983

将选项存储在数组中

```
$option[1]= array(A,B,C);  
$option[2]= array(A,B,C,D);  
$option[3]= array(A,B,C,D,E);  
.  
.  
.  
.  
$option[27]= array(True,False); 
```

与您一样从数据库中检索 option_type。

询问：

```
$query="SELECT q.SessionId, q.QuestionId, o.OptionId
FROM SESSION s
INNER JOIN Question q ON s.SessionId = q.SessionId
JOIN Option_Table o ON q.OptionId = o.OptionId
WHERE s.SessionName = "XULWQ"
ORDER BY q.QuestionId"; 
```

结果：

```
SessionId   QuestionId OptionId
137         1              5
137         2              2 
```

foreach 问题 ID

```
$incorrect_ans[QuestionId]=array_diff($option[OptionId],$correct_ans[QuestionId]); 
```

# javascript - Google 脚本共享权

> ID：14134207
> 
> 赞同：1
> 
> 时间：2013-01-03T06:42:58.157
> 
> 标签：javascript, google-apps-script

我遇到了谷歌脚本。浏览了他们的 API 并查看了他们的一些教程。第一个教程制作了一个脚本来创建一个文档并触发一封电子邮件。如果我将其他人添加到该电子邮件列表，他们将无法立即查看。即使我向他们发送了链接，他们也必须请求许可才能看到它。

有没有办法在脚本中对此进行编码，以授予正在通过电子邮件发送链接的人查看和编辑的权限？

此外，通过 API 并向人们发送电子邮件，他们表明可以使用 cc 和 bcc。API 示例没有展示如何做到这一点。这是我一直在查看的内容：[https ://developers.google.com/apps-script/defaultservices](https://developers.google.com/apps-script/defaultservices)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T02:52:41.373

> 有没有办法在脚本中对此进行编码，以授予正在通过电子邮件发送链接的人查看和编辑的权限？

[`Document.addEditor()`](https://developers.google.com/apps-script/reference/document/document#addEditor%28String%29), [`Document.addEditors()`](https://developers.google.com/apps-script/reference/document/document#addEditors%28String%29),[`Document.addViewer()`](https://developers.google.com/apps-script/reference/document/document#addViewer%28String%29)并[`Document.addViewers()`](https://developers.google.com/apps-script/reference/document/document#addViewers%28String%29)让您将权限分配给其他人。

> 此外，通过 API 并向人们发送电子邮件，他们表明可以使用 cc 和 bcc。

看[`MailApp.sendMail(recipient, subject, body, options)`](https://developers.google.com/apps-script/reference/mail/mail-app#sendEmail%28String,String,String,Object%29)，对于组成的“高级参数”的描述`options`。options 对象可能同时包含`cc`和`bcc`成员。

# asp.net-mvc - MVC 应用程序的缓存和会话管理器的最佳实践

> ID：14134208
> 
> 赞同：2
> 
> 时间：2013-01-03T06:43:00.130
> 
> 标签：asp.net-mvc, session, caching

大师们，

我们在过去的应用程序中通过各种方式实现了*CacheManager*和*SessionManager*，例如通过创建`SessionHelper`静态类和`CacheHelper`静态类。

虽然它工作得很好，但我们缺乏一些概括和全球化视角的能力。因此，对于新的从头开发，我们打算在灵活性和可扩展性方面为这种通用实施提供最佳实践。

请建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T11:26:39.220

您可以创建一个接口来定义缓存和会话管理中使用的常见操作，命名为 IStateManager。例如

```
/// <summary>
/// An interface to provide access to a state storage implementation
/// </summary>
public interface IStateManager
{
    /// <summary>
    /// Gets or sets the value associated with the specified key.
    /// </summary>
    /// <typeparam name="T">Type</typeparam>
    /// <param name="key">The key of the value to get.</param>
    /// <returns>The value associated with the specified key.</returns>
    T Get<T>(string key);

    /// <summary>
    /// Adds the specified key and object to the state manager.
    /// </summary>
    /// <param name="key">key</param>
    /// <param name="data">Data</param>
    void Set(string key, object data);

    /// <summary>
    /// Adds the specified key and object to the state manager.
    /// </summary>
    /// <param name="key">key</param>
    /// <param name="data">Data</param>
    /// <param name="cacheTime">Cache time</param>
    void Set(string key, object data, int cacheTime);

    /// <summary>
    /// Gets a value indicating whether the value associated with the specified key is in the state manager.
    /// </summary>
    /// <param name="key">key</param>
    /// <returns>Result</returns>
    bool IsSet(string key);

    /// <summary>
    /// Removes the value with the specified key from the state manager.
    /// </summary>
    /// <param name="key">/key</param>
    void Remove(string key);

    /// <summary>
    /// Removes items by pattern
    /// </summary>
    /// <param name="pattern">pattern</param>
    void RemoveByPattern(string pattern);

    /// <summary>
    /// Clear all state manager data
    /// </summary>
    void Clear();
} 
```

然后，您可以创建接口的实现以提供不同的功能。例如，使用 System.Runtime.Caching 的内存实现

```
/// <summary>
/// Represents an in memory cache
/// </summary>
public class MemoryCacheManager : IStateManager
{
    public MemoryCacheManager()
    {
    }

    protected ObjectCache Cache
    {
        get
        {
            return MemoryCache.Default;
        }
    }

    /// <summary>
    /// Gets or sets the value associated with the specified key.
    /// </summary>
    /// <typeparam name="T">Type</typeparam>
    /// <param name="key">The key of the value to get.</param>
    /// <returns>The value associated with the specified key.</returns>
    public T Get<T>(string key)
    {
        return (T)Cache[key];
    }

    /// <summary>
    /// Adds the specified key and object to the cache with a default cache time of 30 minutes.
    /// </summary>
    /// <param name="key">key</param>
    /// <param name="data">Data</param>
    public void Set(string key, object data)
    {
        Set(key, data, 30);
    }

    /// <summary>
    /// Adds the specified key and object to the cache.
    /// </summary>
    /// <param name="key">key</param>
    /// <param name="data">Data</param>
    /// <param name="cacheTime">Cache time</param>
    public void Set(string key, object data, int cacheTime)
    {
        if (data == null)
            return;

        var policy = new CacheItemPolicy();
        policy.AbsoluteExpiration = DateTime.Now + TimeSpan.FromMinutes(cacheTime);
        Cache.Add(new CacheItem(key, data), policy);
    }

    /// <summary>
    /// Gets a value indicating whether the value associated with the specified key is cached
    /// </summary>
    /// <param name="key">key</param>
    /// <returns>Result</returns>
    public bool IsSet(string key)
    {
        return (Cache.Contains(key));
    }

    /// <summary>
    /// Removes the value with the specified key from the cache
    /// </summary>
    /// <param name="key">/key</param>
    public void Remove(string key)
    {
        Cache.Remove(key);
    }

    /// <summary>
    /// Removes items by pattern
    /// </summary>
    /// <param name="pattern">pattern</param>
    public void RemoveByPattern(string pattern)
    {
        var regex = new Regex(pattern, RegexOptions.Singleline | RegexOptions.Compiled | RegexOptions.IgnoreCase);
        var keysToRemove = new List<String>();

        foreach (var item in Cache)
            if (regex.IsMatch(item.Key))
                keysToRemove.Add(item.Key);

        foreach (string key in keysToRemove)
        {
            Remove(key);
        }
    }

    /// <summary>
    /// Clear all cache data
    /// </summary>
    public void Clear()
    {
        foreach (var item in Cache)
            Remove(item.Key);
    }
} 
```

您可以创建此接口的多个实现，例如为您的应用程序提供分布式缓存的“Memcached”实现或提供基于用户会话的功能的“会话”实现。

然后，您可以使用您选择的依赖容器将实现注入您的服务\控制器并连接您的应用程序。

尽量避免对单元测试有问题的静态类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:51:44.807

可以使用过滤器属性进行缓存，并且可以通过单例类处理会话。

[http://weblogs.asp.net/scottgu/archive/2007/11/13/asp-net-mvc-framework-part-1.aspx](http://weblogs.asp.net/scottgu/archive/2007/11/13/asp-net-mvc-framework-part-1.aspx)

您可以在上面的链接中获取一些示例，以了解最佳方式或方法。

# openlayers - 如何在osm中的两点之间画一条线

> ID：14134209
> 
> 赞同：1
> 
> 时间：2013-01-03T06:42:59.307
> 
> 标签：openlayers, openstreetmap

我想在 osm 地图中的两点之间画一条线

```
map = new OpenLayers.Map();

var start_point = new OpenLayers.Geometry.Point(0,10);
var end_point = new OpenLayers.Geometry.Point(30,0);

var vector = new OpenLayers.Layer.Vector();
vector.addFeatures([new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([start_point, end_point]))]);
map.addLayers([vector]); 
```

我尝试了这段代码，但它没有用，所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:13:17.140

绘制线串的代码是正确的。由于您没有发布完整的代码和错误的确切描述，因此只有两个疯狂的猜测。您的地图可能采用 900913 投影，坐标采用 WGS。转换它们：

```
var start_point = new OpenLayers.Geometry.Point(0,10);
var end_point = new OpenLayers.Geometry.Point(30,0);

start_point.transform(
    new OpenLayers.Projection("EPSG:4326"),
    new OpenLayers.Projection("EPSG:900913")
); 
end_point.transform(
    new OpenLayers.Projection("EPSG:4326"),
    new OpenLayers.Projection("EPSG:900913")
); 
```

此外，您可能需要适合视图：

```
map.zoomToMaxExtent(); 
```

# jquery - 类型错误：grails gsp中select2的'未定义'

> ID：14134210
> 
> 赞同：2
> 
> 时间：2013-01-03T06:43:08.647
> 
> 标签：jquery, grails, gsp, jquery-select2

我正在使用[select2](http://ivaynberg.github.com/select2/#basics) 来设置用于在我的 grails 项目中为我的应用程序标记支持的字段。

在 html 我已经包括

```
 <link rel="stylesheet" href="${resource(dir: 'css', file: 'select2.css')}"  type="text/css">
    <script  type="text/javascript" src="../js/select2.js"></script>
  <div class="select2-container select2-container-multi populate placeholder" id="s2id_e2_2" style="width: 250px"> 
     <select id="e2_2" name="majorSkills" multiple="multiple" style="width: 250px; display: 'Select Major Skills'; " class="populate placeholder"><option></option>
            <optgroup label="Java">
                <option value="j2ee">J2EE</option>
                <option value="hibernate">Hibernate</option>
                <option value="spring">Spring</option>

            </optgroup>
            <optgroup label="ERP">
                <option value="sap">SAP</option>
                <option value="peoplesoft">Peoplesoft</option>

            </optgroup>

        </select>
        </div> 
```

在我的脚本中

```
$(document).ready(function () {
 $("#e2_2").select2({
                placeholder: "Select a State"
            });
}); 
```

**js 和 css 文件包括在内，但控制台中显示的错误是**

```
select2.js:33  ReferenceError: Can't find variable: jQuery

TypeError: 'undefined' is not a function (evaluating '$("#e2_2").select2({
        placeholder: "Select a State"
    })') 
```

谁能帮我解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:42:33.620

我首先包含了 jquery - js，然后在下一个 l 中包含了 select2.js，这样它就对我有用了，

感谢您的回答和建议 - [mkoryak](https://stackoverflow.com/users/26188/mkoryak)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:14:33.333

select2 需要 jquery。看起来你没有包括它。

# android - 如何从 sqlite 数据库中显示（检索）图像

> ID：14134217
> 
> 赞同：0
> 
> 时间：2013-01-03T06:43:58.493
> 
> 标签：android

Json FUnction 能够解析数据并在 sq-lite 数据库中插入值

```
for (int i = 0; i < jArray6.length(); i++) {
                    catagoryid = 5;
                    json_data = jArray6.getJSONObject(i);
                    // news_id = Integer.parseInt((json_data.getString("news_id")));
                    news_id = Double.parseDouble(json_data.getString("news_id"));
                    news_title = json_data.getString("news_title");
                    imagepath = json_data.getString("imagepath").trim().getBytes();
                    news_short_description = json_data
                            .getString("news_short_description");
                    news_detail = json_data.getString("news_detail_description");
                    news_date = json_data.getString("news_date");
                    website_link = json_data.getString("website_link").trim();
                    dh = new DBhelper(TaxMann.this);
                    record_id = dh.AddMsgt1(news_id, catagoryid, news_title,
                            imagepath, news_short_description, news_date,
                            news_detail, website_link);
                } 
```

这是我的数据库类函数

```
@Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + topstories
                + "(_id INTEGER PRIMARY KEY AUTOINCREMENT," + news_id
                + " double, " + catagory_Id + " integer," + news_title
                + " text," + imagepath + " BLOB, " + short_description
                + " text, " + news_date + " text, " + detailed_news + " text, "
                + website_link + " text)");
        db.execSQL("CREATE TABLE " + savednews
                + "(_id INTEGER PRIMARY KEY AUTOINCREMENT," + news_id
                + " double," + news_title + " text," + imagepath + " BLOB,  "
                + detailed_news + " text)");
        db.execSQL("CREATE TABLE " + date
                + "(_id INTEGER PRIMARY KEY AUTOINCREMENT," + modified_date
                + " integer)");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("drop table if exists " + topstories);
        db.execSQL("drop table if exists " + savednews);
        db.execSQL("drop table if exists " + date);
        onCreate(db);
    }

    // records for newstable

public int AddMsgt1(double newsid, Integer cat_id, String title,
        byte[] image, String desc, String date, String detail,
        String website) {
    db = this.getWritableDatabase();
    ContentValues cv = new ContentValues();
    cv.put(news_id, newsid);
    cv.put(catagory_Id, cat_id);
    cv.put(news_title, title);
    cv.put(imagepath, image);
    cv.put(short_description, desc);
    cv.put(news_date, String.valueOf(date));
    cv.put(detailed_news, detail);
    cv.put(website_link, website);

    long record_id = db.insert(topstories, news_title, cv);
    db.close();
    return (int) record_id;
}

public Cursor fetchtitle(int catagoryid) {
            SQLiteDatabase db1 = this.getReadableDatabase();
            cursor = db1.query(topstories,
                    new String[] { "_id", "news_title", "imagepath",
                            "short_description", "news_date", "detailed_news", },
                    "catagory_id=" + catagoryid, null, null, null, null, null);
            return cursor;
        } 
```

由此我可以显示标题和描述，但我无法显示图像

```
public void simple_ad(Cursor cursor,int category_id)
    {
        dh = new DBhelper(this);
        ListView list = (ListView)findViewById(R.id.expertscommentsListView);
        String[] colummnames = { "news_title","imagepath","descripton"}; 
        cursor = dh.fetchtitle(category_id);
        int []id=  { R.id.titleTextView,R.id.descriptionTextView,R.id.imagview2};
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,  R.layout.new_list, cursor , colummnames,id);
        list.setAdapter(adapter);
        adapter.notifyDataSetChanged();
        list.setOnItemClickListener(this);
    } 
```

我已经显示了数据库文件应用从表名中选择 * 我已经显示了数据图像路径列及其值但是我无法显示请帮助我做错了我采取了 r.imageview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:22:07.887

通过您所做的方式定义适配器将不起作用，除非您为图像提供资源 ID（Like `R.id.imagename`）。

我假设您需要通过路径从 Internet 获取图像。最好创建一个扩展的自定义适配器类`BaseAdapter`。在里面`getView()`你可以有下载图像的逻辑（通过`AsynTask`）然后显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:48:47.160

我怀疑`SimpleCursorAdapter`可以`ImageView`在您的布局中找到 a ，然后将字节数组解码为 a`Bitmap`并为其设置图像`ImageView`。您将不得不覆盖`getView()`适配器并自己在`getView()`.

例子：

数据类：

```
public class NewsItem{
  public final String newsTitle;
  public final byte[] imageData;
  public final String description;

  public NewsItem (String title, byte[] data, String desc){
    this.newsTitle = title;
    this.imageData = data;
    this.description = desc;
  }
} 
```

适配器 ：

```
ArrayAdapter<NewsItem> adapter = new ArrayAdapter<NewsItem>(this){
  @Override
  public View getView(int position, View convertView, View parent){

    if(convertView == null){
       convertView = //--inflate list item layout
    }

    NewsItem item = getItem(position);

    ImageView i = convertView.findViewById(R.id.myImageView);
    Bitmap b = BitmapFactory.decodeByteArray(item.imageData,0,item.imageData.length);
    i.setDrawable(new BitmapDrawable(b));

    //--other stuff

    return convertView;
  }
}; 
```

填充适配器：

```
Cursor c = dh.fetchtitle(category_id);
while (c.moveToNext()){
  adapter.add(new NewsItem(c.getString(0),c.getBlob(1),c.getString(2)));  
} 
```

# mysql - 如何从 Mysql 中存在的表创建 sql 语句

> ID：14134219
> 
> 赞同：1
> 
> 时间：2013-01-03T06:44:08.297
> 
> 标签：mysql, sql, database

如何创建sql语句？

假设我在 MySQL 中创建了一个数据库，我想将它移植到另一个数据库。所以我想将我的数据库转换为 sql 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:47:39.427

使用[mysqldump](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html "数据库备份程序")。它可以做到这一点，甚至更多。

从文档中：

> mysqldump 客户端 [生成] 一组 SQL 语句，可以运行这些语句来重现原始模式对象、表数据或两者。

# asp.net - 使用 ASP.NET 检测电子邮件查看计数器

> ID：14134220
> 
> 赞同：0
> 
> 时间：2013-01-03T06:44:08.857
> 
> 标签：asp.net, email

我正在我的 ASP.NET Web 应用程序中动态创建时事通讯。我制作了一个 ASP.NET 页面，该页面通过电子邮件发送给我的用户，我需要知道这封电子邮件被查看了多少次，我有哪些选择？我有另一个页面作为我的时事通讯的存档，所以我应该找到一种方法，每次查看我的电子邮件时`"numview"`，我的时事通讯表中的列都会增加一个，这可能吗？有没有现成的工具，或者我应该使用代码制作一个？做一个很容易，但是我的页面将被视为一个EMAIL，所以我认为我不能编写SQL命令，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:48:07.847

> 我制作了一个 ASP.NET 页面，该页面通过电子邮件发送给我的用户

我在理解这一点时遇到了一些麻烦。如果它是一个 ASP.NET 页面，那么如何将它发送给用户？

暂时忘记 ASP.NET，您可以发送一封 HTML 电子邮件。一个技巧是让电子邮件引用您服务器上的图像。然后，您可以编写 ASP.NET 代码来拦截该服务器请求并计算发生的次数。

但是，这是不可靠的，因为大多数电子邮件阅读器不会显示图像，除非用户指示应为电子邮件加载图像，因为垃圾邮件发送者已多次使用此技术。

所以，就我理解这个问题而言，我不相信有一种可靠的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:48:40.323

将跟踪添加到普通电子邮件中并不容易。但是，如果您在电子邮件中（通过 iframe 或作为图像源等）加载一些外部网页（您的），您可以尝试以下任何方法。

您可以尝试在页面中加入一些分析代码。所以每次有人访问该页面时，都会跟踪访问。您将从分析提供商的仪表板中获得清晰的画面。有很多供应商，但我认为谷歌分析是赢家。它也是免费的。

如果你想实现你自己的，你可以有一个存储pageid / url，用户的IP地址，日期，浏览器等的表，并在你的页面的页面加载事件中添加一条记录到这个表中。

# java - 如何在java中编写相同场景的正面和负面测试用例？

> ID：14134221
> 
> 赞同：0
> 
> 时间：2013-01-03T06:44:09.490
> 
> 标签：java, unit-testing, junit, testcase, sdlc

我想编写两个测试用例，无论是正面场景还是负面场景。

我的示例代码是，

```
 /**
     * 
     */
    public void testgetAsnAccuracyInstanceType() throws Exception
    {
        String METHOD_NAME = "testgetAsnAccuracyInstanceType";
        log.entering(CLASS_NAME, METHOD_NAME);

         //Rating Element "1" ASN Accuracy
         populateForTestMethodValues("1");
         populateWeekOfList();
         List<WeeklyDeliveryInstanceTypeQO> asnAccuracyInstanceTypeList = weeklyDlvyInstancesDashboardReportForm.getAsnAccuracyInstanceType();
         assertTrue("testgetASNAccuracyRatingElement is Not Empty: ", asnAccuracyInstanceTypeList.size() > 0);
         log.exiting(CLASS_NAME, METHOD_NAME);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:58:50.143

这条线

```
assertTrue("testgetASNAccuracyRatingElement is Not Empty: ", 
           asnAccuracyInstanceTypeList.size() > 0); 
```

严格等价于：

```
assertFalse("testgetASNAccuracyRatingElement is Not Empty: ", 
           asnAccuracyInstanceTypeList.isEmpty()); 
```

（如果那是你要问的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:59:16.840

这个怎么样？

要断言它有效：

```
// use input data you expect results for
assertFalse("testgetASNAccuracyRatingElement is empty", 
    asnAccuracyInstanceTypeList.isEmpty()); 
```

断言否定情况：

```
// use input data you don't expect results for
assertTrue("testgetASNAccuracyRatingElement is not empty", 
    asnAccuracyInstanceTypeList.isEmpty()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:58:34.043

输入/测试数据决定了测试用例是用于肯定用例还是用于否定用例。

所以只需有两种测试方法（一种用于阳性，另一种用于阴性）并分别使用阳性和阴性数据进行调用。

# html - 多列 css 使相邻的 div 高度相同

> ID：14134222
> 
> 赞同：2
> 
> 时间：2013-01-03T06:44:15.717
> 
> 标签：html, css

请参考[小提琴](http://jsfiddle.net/bkpqa/)

在这里，我们将内容显示为

盒子1

盒子2

盒子3

盒子4

盒子5

盒子6

使用多列 css 我们将显示更改为

盒子1 盒子4

盒子2 盒子5

盒子3 盒子6

我们使用的css如下：

```
 .columnsmulti {
            -moz-column-count: 2;
        -moz-column-gap: 10px;
        -moz-column-rule: 0px double #666;
        -webkit-column-count: 2;
        -webkit-column-gap: 10px;
        -webkit-column-rule: 0px double #666;
        column-count: 2;
        column-gap: 10px;
        column-rule: 0px double #666; width:400px;
    }  

    .blue_bx{ width:190px; background:#6BBEBD; background-repeat:repeat-y; float:left; font-family:Georgia, "Times New Roman", Times, serif;}

    .store_img img{ width:188px; height:75px; margin-top:1px; margin-left:1px; border:0px;}

    .store_name { float: left; width:150px; }

    .circle_ico{ float:right; padding-top:5px; padding-right:8px;}

    .store_name, .store_name a{ color:#FEFFD6;  font-family: 'impactregular'; font-size:20px; padding-left:5px; }

    .store_category, .store_category a{ width:170px; margin:0 auto; font-size:14px; color:#FDF279; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: block;  } 
```

现在所需的输出是：相邻的 div 框应该在相同的高度（如果框 1 的内容大于框 4，那么框 1 和框 4 应该在框 1 的高度）。如何做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:50:25.750

您必须使用 css 属性`min-height`

例如：`min-height:85px;`

找到一个合适的最小高度。我的猜测是这样的小提琴： http: [//jsfiddle.net/bkpqa/1/](http://jsfiddle.net/bkpqa/1/)或[http://jsfiddle.net/bkpqa/2/](http://jsfiddle.net/bkpqa/2/)

如果您加载动态内容，则需要`min-height`在 javascript 中使用`.height()`getter 进行调整。

# filepicker.io - filepicker.io：有没有一种方法可以传递访问令牌以进行 facebook 照片上传

> ID：14134224
> 
> 赞同：2
> 
> 时间：2013-01-03T06:44:29.900
> 
> 标签：filepicker.io

目前我正在使用 filepicker.io 从 facebook 和桌面上传照片。我们的应用程序登录需要 facebook-auth。

我的具体问题是：用户在尝试上传 facebook 照片时是否不需要再次进行 f-connect。因为这样的用户已经完成了 f-connect 以登录到网站。

任何帮助/替代方案都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:39:48.503

由于用户的隐私问题，我们不支持此操作。除了技术难题之外，在应用程序之间共享授权密钥也不是出于善意与用户或 Facebook 开发人员 TOS

# objective-c - AFNetworking - 带有 ETag 的请求

> ID：14134226
> 
> 赞同：5
> 
> 时间：2013-01-03T06:44:34.963
> 
> 标签：objective-c, ios, afnetworking

我正在尝试在服务器上发出请求，该服务器使用 Etag 进行响应以用于缓存目的。我为它编写了以下代码，但这些调用的响应大部分时间是随机的，即有时响应状态代码是 200，有时是 304（预期）。我在我的代码中做错了什么，或者我应该记住 AFNetworking 的某些特定内容。！

```
 NSURL *url = [NSURL URLWithString:@"http://ia.media-imdb.com/images/M/MV5BNzI0NTY5NzQwMV5BMl5BanBnXkFtZTcwOTQyNTA5OA@@._V1._SY90_.jpg"];
  NSMutableURLRequest *aRequest = [NSMutableURLRequest requestWithURL:url];
  [aRequest setValue:@"\"61-smtLpBSL_SY90_#1\"" forHTTPHeaderField:@"If-None-Match"];
  NSLog(@"headers: %@", aRequest.allHTTPHeaderFields);
  AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:aRequest imageProcessingBlock:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
    NSLog(@"%@ %d", response.allHeaderFields, response.statusCode);
  } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
    NSLog(@"Request failed with error: %@", error);    
  }];
  [operation start]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T08:23:54.783

我遇到了同样的问题，我设法通过将请求更改为

```
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]
                                                               cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                           timeoutInterval:60]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:34:29.190

我已经尝试了您的代码，并且收到状态 200 - 好的，应该是这样。

代码 304 - 未修改，我无法获取。我已经尝试过几次快速和慢速运行命令，但我总是得到 200 作为响应。

当您获得 304 作为响应代码时，您是否有更多详细信息？

304 响应代码通常意味着内容没有被修改，您应该得到包含 200 作为响应的原始请求。

在这里您可以阅读更多关于 Etag 的信息：[ETag vs Header Expires](https://stackoverflow.com/questions/499966/etag-vs-header-expires)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T15:44:44.520

我也遇到了 Etag 逻辑和 AFNetworking 的问题。我的问题只是设置`cachePolicy`不正确...

```
 var manager = AFHTTPRequestOperationManager()
    manager.requestSerializer = AFHTTPRequestSerializer()
    manager.requestSerializer.cachePolicy = NSURLRequestCachePolicy.ReloadIgnoringLocalCacheData
    manager.requestSerializer.setValue(etag, forHTTPHeaderField: "If-None-Match")
    manager.GET(fullPath, parameters: parameters, success: {}, failure: {})) 
```

我希望它会帮助别人！

# java - 在 Java 中延迟加载图像

> ID：14134227
> 
> 赞同：3
> 
> 时间：2013-01-03T06:44:39.667
> 
> 标签：java, image, swing, lazy-loading

让我们考虑这个代码片段

```
Image img=Toolkit.getDefaultToolkit().getImage("1.png");
g.drawImage(img,0,0,null); 
```

代码所做的是加载图像`1.png`并将其绘制在图形上下文中。现在我观察到的是`drawImage`第一次调用它时不要绘制任何图像。相反，它会在进一步调用时绘制图像。现在我认为这种行为是由于异步图像加载或方法的惰性行为。

为了纠正这个问题，我可以做的是使用这样的`javax.swing.ImageIcon`类。

```
Image img=new ImageIcon("1.png").getImage();
g.drawImage(img,0,0,null); 
```

我想知道执行相同任务的其他更好方法是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:02:22.220

这取决于。

如果您通过“慢速”连接（如互联网）加载图像，或者您正在加载相当大的图像，最好使用延迟加载方法。

这允许应用程序在图像开始加载时继续运行。

Andrew 是正确的，您应该使用`g.drawImage(img,0,0,this)`，因为这允许组件在图像完成加载后自动更新自身，而无需执行任何其他操作。

如果您的应用程序的某些操作依赖于图像，或者您在本地加载小图像，则使用类似...

```
BufferedImage image = ImageIO.read(imageResource); 
// Where image resource is either a file or local URL (such as an embedded resource) 
```

我个人倾向于在大多数情况下使用后台线程来加载我的图像并使用`ImageIO`. 在我的`paint`方法中，如果需要让用户知道我正在加载图像，我可能会使用一个小的占位符图像。

您还需要考虑您正在加载的图像类型。虽然`ImageIO`对图像格式有更大的支持，但加载动画 GIF 是有问题的，需要您做更多的工作才能实现。

ps - 不要在你的组件`paint`方法中加载图像 - 可以多次调用绘制并且加载图像（或其他资源）会大大减慢重绘过程，使你的应用程序滞后......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T06:59:04.233

尝试使用`ImageIO.read()`加载图像。这将阻塞直到图像完全加载。检查[此](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)页面。

# mysql - 更改表在 Mysql 中给出致命错误

> ID：14134233
> 
> 赞同：-1
> 
> 时间：2013-01-03T06:45:03.427
> 
> 标签：mysql

在更改 mysql 中的表以添加新列时，我发生了致命错误。我已经看到了这个问题的相关答案，在那里我找到了如下答案：

```
Make a new table with the same structure.
Add the column to the new table.
Insert the data from the old table into the new table.
Rename the old table to old.bak
Rename the new table to the old table.
If all went well, delete the old.bak. 
```

但我的原始表包含一些触发器、索引等。

我的问题是

*“我可以用任何不同的方式编写我的 Alter 脚本来克服这个致命的错误吗”？*

我的担忧与 MYSQL 有关，但任何其他与 RDBMS 相关的答案也很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:37:27.907

这是 MySQL 特有的：您可以使用 和 的组合`[SHOW CREATE TABLE tabname][1]`来`[SHOW TRIGGERS WHERE Table = 'tabname'][2]`重新生成表和触发器。您可能不希望在复制行时触发触发器。此外，如果表很大或者您有足够高的更改率，您可能希望在复制期间阻止对其进行写入。

步骤顺序：

1.  防止写入表（可选）
2.  创建带有`SHOW CREATE TABLE`输出的新表。
3.  应用架构更改。
4.  将旧表中的数据复制到新表中。
5.  `SHOW TRIGGERS`从输出应用触发器。
6.  交换新旧表。

希望这可以帮助。

# php - 从下拉列表中的 SQL 查询中选择的默认选项

> ID：14134234
> 
> 赞同：0
> 
> 时间：2013-01-03T06:45:06.997
> 
> 标签：php, html, sql

我想让一个下拉列表有一个默认值，类似于你`value="abc"`在文本字段或类似字段中的默认值。唯一需要注意的是，我希望它默认为 SQL 查询指向的位置。请原谅长代码。

```
//prior code where table and `foreach()` loop begins
                        <td>
                            <input type="text"
                                value="<?php echo $var["author"]; ?>"
                                required="required">
                            </input>
                        </td>
                        <td>
                            <select name="condition"
                                value="<?php echo $var["condition"]; ?>"
                                    <option>M</option>
                                    <option>NM</option>
                                    <option>E</option>
                                    <option>G</option>
                                    <option>P</option>
                            </select>
                        </td>
//subsequent code where table is closed 
```

前半部分，我有一个默认值的文本字段`$var["author"]`，因为这是我事先查询的。对于第二个，我似乎无法得到相同的结果，因为它是一个下拉菜单而不是文本字段。如果 .sql 查询显示“NM”，则默认值始终为“M”。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:48:26.867

你想要的是这样的：

```
//prior code where table and `foreach()` loop begins
                        <td>
                            <input type="text"
                                value="<?php echo $var["author"]; ?>"
                                required="required">
                            </input>
                        </td>
                        <td>
                            <select name="condition">
                                    <option value="M"<?php echo ($var["condition"] == 'M' ? ' selected="selected"' : ''); ?>>M</option>
                                    <option value="NM"<?php echo ($var["condition"] == 'NM' ? ' selected="selected"' : ''); ?>NM</option>
                                    <option value="E"<?php echo ($var["condition"] == 'E' ? ' selected="selected"' : ''); ?>E</option>
                                    <option value="G"<?php echo ($var["condition"] == 'G' ? ' selected="selected"' : ''); ?>G</option>
                                    <option value="P"<?php echo ($var["condition"] == 'P' ? ' selected="selected"' : ''); ?>P</option>
                            </select>
                        </td>
//subsequent code where table is closed 
```

或更优雅：

```
$dropdownOptions = array('N', 'NM', 'E', 'G', 'P');
//prior code where table and `foreach()` loop begins
                        <td>
                            <input type="text"
                                value="<?php echo $var["author"]; ?>"
                                required="required">
                            </input>
                        </td>
                        <td>
                            <select name="condition">
                                    <?php foreach ($dropdownOptions AS $option) {
                                         echo '<option value="' . $option . '"' . ($var["condition"] == $option ? ' selected="selected"' : '') . '>' . $option . '</option>';
                                    } ?>
                            </select>
                        </td>
//subsequent code where table is closed 
```

# python - 将数据从 python 列表逐行写入 csv

> ID：14134237
> 
> 赞同：28
> 
> 时间：2013-01-03T06:45:10.723
> 
> 标签：python, csv

使用 python，我将数据从列表写入 .csv 文件，逐行。

代码：

```
writer=csv.writer(open(filepath,'wb'))
header=['type','id','numberOfUpdates','isPingEnabled','lastUpdated']
length_list=len(header)
i=0

while i!=length_list :
    data=header[i]
    print data
    i=i+1
    writer.writerow(data) 
```

结果：数据正在写入 csv 文件，但每个字母都打印在每一列中。

例如：类型在一列中写为“t”，下一列中写为“y”，依此类推。我需要将整个单词放在一栏中。有人能指出我能做些什么改变吗？

谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-03T06:49:43.903

更改`writer.writerow(data)`为`writer.writerow([data])`。

`.writerow`接受一个可迭代对象并为每一列使用该可迭代对象的每个元素。如果您使用只有一个元素的列表，它将被放置在单个列中。

您还应该重组您的循环：

```
for word in header:
    writer.writerow([word]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-02T12:30:10.943

这对我有用：

```
for item in RESULTS:
     wr.writerow([item,]) 
```

# c# - 没有表达式编码器的 IIS 平滑流式处理

> ID：14134243
> 
> 赞同：2
> 
> 时间：2013-01-03T06:45:44.323
> 
> 标签：c#, c

是否可以在不使用表达式编码器的情况下获得 IIS 平滑流？我浏览的所有文章都与仅带有表达式编码器的 IIS 平滑流相关。

# c - ISO C Void * 和函数指针

> ID：14134245
> 
> 赞同：23
> 
> 时间：2013-01-03T06:45:54.453
> 
> 标签：c, function-pointers, void-pointers

在遵循一些教程并阅读有关函数指针的内容时，我了解到显然将 void 指针分配给 ISO C 中的函数指针是未定义的，有没有办法解决我在编译时收到的警告（例如，更好的编码方式）或我应该忽略它吗？

警告：

```
ISO C forbids assignment between function pointer and 'void *' [-pedantic] 
```

示例代码：

```
void *(*funcPtr)();
funcPtr = GetPointer(); 
```

GetPointer 是一个返回空指针 EG 的函数

```
void *GetPointer(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-21T06:32:40.267

在[tlpi-book](http://man7.org/tlpi/code/index.html)我发现这个技巧非常有趣：

```
#include <dlfcn.h>

int
main(int argc, char *argv[])
{
    ...
    void (*funcp)(void);        /* Pointer to function with no arguments */
    ...
    *(void **) (&funcp) = dlsym(libHandle, argv[2]);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T06:50:04.820

不。编译器是对的，你也是：在 C89 和 C99 中，你不能在数据指针（即`void *`）和函数指针之间进行转换，所以解决警告的唯一方法是从函数返回一个函数指针。

（但是请注意，尽管有警告，但实际上这仍然有效，即使标准库中存在这种不一致 - 该`dlsym()`函数用于获取函数指针，但它返回`void *`- 所以基本上你可以忽略警告。它会工作，虽然严格来说，这里的行为是未定义的。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-07T10:34:09.290

我使用 glib 遇到了这个问题。Glib 数据结构，例如 GSList 通常有一个称为 void *data 的字段。我想将函数存储在一个列表中，并得到了一堆类似于此的错误：

```
warning: ISO C forbids passing argument 2 of ‘g_slist_append’ between function pointer and ‘void *’ [-pedantic] 
```

此示例使用 gcc -Wall -ansi -pedantic 生成一堆警告

```
typedef int (* func) (int);

int mult2(int x)
{
    return x + x;
}

int main(int argc, char *argv[])
{
    GSList *functions = NULL;
    func f;

    functions = g_slist_append(functions, mult2);
    f = (func *) functions->data;
    printf("%d\n", f(10));
    return 0;
} 
```

所以我将函数包装在一个结构中，所有警告都消失了：

```
struct funcstruct {
    int (* func) (int);
};

int mult2(int x)
{
    return x + x;
}

int main(int argc, char *argv[])
{
    GSList *functions = NULL;
    struct funcstruct p;
    p.func = mult2;

    functions = g_slist_append(functions, &p);
    p = * (struct funcstruct *) functions->data;
    printf("%d\n", p.func(10));
    return 0;
} 
```

可以说这是使一些警告消失的相当多的额外代码，但我不喜欢我的代码生成警告。此外，以上是玩具示例。在我正在编写的实际代码中，将函数列表包装在结构中非常有用。

我很想知道这是否有问题，或者是否有更好的方法。

# r - 为什么 R 的关联数组称为列表而不是映射/字典

> ID：14134247
> 
> 赞同：10
> 
> 时间：2013-01-03T06:46:08.567
> 
> 标签：r, data-structures

我最近开始学习`R`语言。我来自 Java/Python 背景。我发现令人惊讶的一件事是`associative array`in`R`被称为`List`而不是类似`Map`or `Dictionary`。

我认为像 Map 和 Dictionary 这样的名称更好地传达了数据结构是关联数组而不是列表的想法。你能告诉我这背后的背景/原因是什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T07:05:39.573

S 的历史比 Java 或 Python 都长。该术语源自 LisP，这是最早的高级语言之一。

此外，您可以使用命名的原子向量创建某些人可能称之为关联数组的内容：

```
 vec <- c(a=1,b=2,c=3)
 vec["b"]
 #b 
 #2 
```

有两种向量：“递归”和“原子”。列表属于第一类。如果有分配给元素的键，则两者都可以通过“名称”进行索引。但是，R 中的术语“名称”严格指代存在于具有对象值的环境中的符号。见`?as.name`。在 R 中，“名称”或“符号”是代码中未引用的语言对象，而字符值用于通过键从数据对象中分配或提取值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T08:54:55.187

“地图”是世界的图表。要在地图上查找东西，您必须进行二维扫描。这是 O(n^2)。“字典”是按字母顺序排列的单词书。要在字典中查找单词，您必须进行二进制搜索。这是 O(log n) 的性能。

因此，对我来说，这两个词都不能准确地描述关联数组的结构和性能......

从数学上讲，关联数组只是离散范围内的函数。所以它们应该被称为函数。双方括号只是语法上的烦恼。为什么我们不能这样做：

```
z = list()
z("foo") = c(1,2,3)
print(z("foo")) # prints 1 2 3
print(z("bar")) # errors 
```

*   因为R不是那样的。

# lotus-notes - Dojo 使应用程序加载缓慢

> ID：14134251
> 
> 赞同：0
> 
> 时间：2013-01-03T06:47:09.850
> 
> 标签：lotus-notes, lotus-domino, dojo, xpages-extlib

使用 xpages 和移动扩展库开发的移动应用程序。在移动设备上加载非常缓慢。为了研究比较统计数据，Domino 服务器提供了另一个纯 Web HTML。我们发现纯网页 HTML 加载速度非常快，加载缓慢的原因是 DOJO。以下是加载缓慢的移动页面的快照。关于如何加快 Dojo 加载的任何提示？

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" dojoParseOnLoad="true"
dojoTheme="true" xmlns:xe="http://www.ibm.com/xsp/coreex"
xmlns:xc="http://www.ibm.com/xsp/custom" >
<xp:this.resources>

<xp:dojoModule name="dojox.grid.DataGrid"></xp:dojoModule>
<xp:dojoModule name="dojox.data.JsonRestStore"></xp:dojoModule>
<xp:dojoModule name="dijit.form.Button"></xp:dojoModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:00:54.467

在应用程序属性 XPages 选项卡中选中**[x] 使用运行时优化的 JavaScript 和 CSS 资源**。它将 Domino 提供的 JS 和 CSS 文件合并到一个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:46:33.120

您能否显示来自 FF 或 Chrome 的请求数量的网络选项卡？可能有更多的 JS/CSS 请求，您在 HTML 中根本看不到，而是动态加载。

# ruby-on-rails - 如何创建一个复选框，在 Ruby on Rails 表单的表单渲染中保留其值？

> ID：14134256
> 
> 赞同：1
> 
> 时间：2013-01-03T06:47:33.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在做的事情非常简单，但由于验证失败，该值永远不会保留在呈现的表单上。我基本上有一个`Article`模型，它有一个`published`布尔字段，可以是`true`或`false`.

如果我通过取消选中复选框来更改初始渲染值的值`true`，然后验证失败并且表单被重新渲染，那么它会`true`在数据库中显示原始值。即使在验证问题上，我如何保留最近的更改并且表单会像这样重新呈现？谢谢

表格代码：

```
= form_for @article, :url => article_path do |f|
  = f.text_field :name
  = f.text_field :description
  = f.check_box :published
  = f.submit "Update" 
```

html代码：

```
<input type="hidden" value="0" name="article[published]">
<input id="article_published" class="pull-left" type="checkbox" value="1" name="article[published]"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:03:11.243

添加发布到 attr_accessible 解决了这个问题。

# java - Array 如何将数字添加到与其值相同的位置？

> ID：14134260
> 
> 赞同：0
> 
> 时间：2013-01-03T06:47:52.953
> 
> 标签：java, arrays, location

输入以`String "543210"`. 该代码使用该方法提取每个字符`charAt`，并将它们一个接一个地放置在与数字值对应的特定数组位置中。 `charAt(0) = 5`意味着 5 应该进入`arrayLocation 5`. 它似乎不起作用。我什至尝试使用`arrayLists`.

```
public class HugeInteger {

    private String digits;

    int[] arrayToStoreTheDigits = new int[6];

    public HugeInteger(String digits) {

        this.digits = digits;
        add();

    }

    public void add() {

        for (int i = 0; i < 5; i++) {
            arrayToStoreTheDigits[digits.charAt(i)] = digits.charAt(i);
            System.out.println(digits.charAt(i));
        }

    }

    public String toString() {

        return "" + arrayToStoreTheDigits + "/ " + digits.charAt(2);
    }

}

package Exercise8_17_HugeIntegers;

public class HugeIntegertester {
    // static HugeInteger huge;

    public static void main(String[] args) {

        HugeInteger huge = new HugeInteger("543210");

    System.out.println(huge.toString());

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:50:44.453

你的问题不清楚，但我怀疑问题出在这里：

```
arrayToStoreTheDigits[digits.charAt(i)] = digits.charAt(i); 
```

If `digits.charAt(i)`is`'5'`的*整数*值为 53，因为这是字符的 UTF-16 代码单元`'5'`。如果您试图在将其视为数字时提取其值，则需要使用`Character.digit`. `'0'`或者，如果您真的只关心 0-9，并且确信不会有其他字符，您可以只减去。

所以你可以这样写你的代码：

```
char c = digits.charAt(i);
arrayToStoreTheDigits[c - '0'] = c; 
```

请注意，由于此初始化：

```
int[] arrayToStoreTheDigits = new int[6]; 
```

`'6'`...如果你的代码看到一个或更大的值，它就会失败。

此外，如果您想使用 中的所有字符`digits`，您的循环应该是：

```
for (int i = 0; i < digits.length(); i++) 
```

总的来说，这是一件非常奇怪的事情——因为对数组元素 1（例如）有效的*唯一*`'1'`值将是（如果数字存在）或 0（默认值，如果不存在）。特别是，这会丢失有关数字出现位置的*所有*信息。如果该类旨在类似于`BigInteger`，您应该编写更像这样的内容：

```
arrayToStoreTheDigits = new int[digits.length()];
for (int i = 0; i < arrayToStoreTheDigits.length; i++)
{
    // TODO: Digit validation
    arrayToStoreTheDigits[i] = digits.charAt(i) - '0';
} 
```

这样在传入之后`"543210"`你就会有一个`{ 5, 4, 3, 2, 1, 0 }`. 这是现在*有用*的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:51:08.610

您的循环存在问题：

```
for (int i = 0; i < 5; i++) {  // condition shoule be i < 6
    // arrayToStoreTheDigits[digits.charAt(i)] = digits.charAt(i); // convert String to integer
    // shoule be
    arrayToStoreTheDigits[Integer.parseInt(digits.charAt(i))] = Integer.parseInt(digits.charAt(i));
    System.out.println(digits.charAt(i));
} 
```

# c - C 中的 ASCII 到 TBCD 转换

> ID：14134264
> 
> 赞同：5
> 
> 时间：2013-01-03T06:48:24.370
> 
> 标签：c, ascii, tbcd

我想在 C 中转换`ASCII string`为`TBCD(Telephony Binary-Coded Decimal)`格式，反之亦然。我搜索了很多网站，但找不到我的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T06:53:42.987

最简单的可能是使用一对数组将每个 ASCII 字符映射到其对应的 TBCD 字符。反之亦然。

根据[我在 Wikipedia 上阅读的内容，](http://en.wikipedia.org/wiki/Binary-coded_decimal "二进制编码的十进制")您应该使用以下内容：

```
const char *tbcd_to_ascii = "0123456789*#abc";
const char ascii_to_tbcd[] = {
 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, /* filler when there is an odd number of digits */
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0,11, 0, 0, 0, 0, 0, 0,10, 0, 0, 0, 0, 0, /* # * */
  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 0, 0, 0, 0, 0 /* digits */
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0,12,13,14            /* a b c */
}; 
```

如果您有 TBCD，要将其转换为 ASCII，您可以：

```
/* The TBCD to convert */
int tbcd[] = { 0x10, 0x32, 0x54, 0x76, 0x98, 0xba, 0xdc, 0xfe };
/* The converted ASCII string will be stored here. Make sure to have
   enough room for the result and a terminating 0 */
char ascii[16] = { 0 };
/* Convert the TBCD to ASCII */
int i;
for (i = 0; i < sizeof(tbcd)/sizeof(*tbcd); i++) {
    ascii[2 * i] = tbcd_to_ascii[tbcd[i] & 0x0f];
    ascii[2 * i + 1] = tbcd_to_ascii[(tbcd[i] & 0xf0) >> 4];
} 
```

要将 ASCII 转换为 TBCD：

```
/* ASCII number */
const char *ascii = "0123456789*#abc";
/* The converted TBCD number will be stored here. Make sure to have enough room for the result */
int tbcd[8];
int i;
int len = strlen(ascii);
for (i = 0; i < len; i += 2)
    tbcd[i / 2] = ascii_to_tbcd[ascii[i]]
        | (ascii_to_tbcd[ascii[i + 1]] << 4); 
```

编辑：@Kevin 指出 TBCD每个字节包含*两个数字。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T07:27:50.253

```
#include <ctype.h>
int cnv_tbcd(char *str, char *tbcd) {
  int c = 0;
  int err = 0;
  for (c=0; str[c]; c++) {
    if (isdigit(str[c])) {
      tbcd[c] = str[c] & 0x0f;
    } else {
      switch(str[c]) {
        case '*': tbcd[c]  = 0x0a; break;
        case '#': tbcd[c]  = 0x0b; break;
        case 'a': tbcd[c]  = 0x0c; break;
        case 'b': tbcd[c]  = 0x0d; break;
        case 'c': tbcd[c]  = 0x0e; break;
        default:  tbcd[c] = 0xff; err++;
      }   
    }   
  }
  if (c % 2 == 0) {
    tbcd[c]   = 0x0f;
    tbcd[c+1] = 0;
  }
  return err;
} 
```

# iphone - 如何在iphone中将unix时间戳转换为nsdate

> ID：14134268
> 
> 赞同：3
> 
> 时间：2013-01-03T06:48:28.253
> 
> 标签：iphone, objective-c

> **可能重复：**
> [从 Unix 时间戳创建 NSDate](https://stackoverflow.com/questions/5827240/create-nsdate-from-unix-timestamp)

我有一个应用程序，我从 json 以 unix 时间戳格式接收日期。这是我从 json '1357178589630' 接收的时间戳。如何将此时间戳转换为正确的 nsdate。我已使用以下代码进行转换，但它是无法正常工作。这是我的代码：

```
double timestampval =  [[updates objectForKey:@"timestamp"] doubleValue];
NSTimeInterval timestamp = (NSTimeInterval)timestampval;
NSDate *updatetimestamp = [NSDate dateWithTimeIntervalSince1970:timestamp]; 
```

当使用 datewithtimeIntervalSince1970 将时间戳转换为 nsdate 时，在 updatetimestamp 变量中显示“44977-04-11 12:40:30 +0000”

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T06:55:38.530

试试这个：

可能你得到的时间戳是毫秒而不是秒，所以你将它除以 1000。

编辑更新：

```
double timestampval =  [[updates objectForKey:@"timestamp"] doubleValue]/1000;
NSTimeInterval timestamp = (NSTimeInterval)timestampval;
NSDate *updatetimestamp = [NSDate dateWithTimeIntervalSince1970:timestamp]; 
```

以前的 ：

```
double unixTimeStamp =1304245000;
NSTimeInterval timeInterval=unixTimeStamp/1000;
NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeInterval];
NSDateFormatter *dateformatter=[[NSDateFormatter alloc]init];
[dateformatter setLocale:[NSLocale currentLocale]];
[dateformatter setDateFormat:@"dd-MM-yyyy"];
NSString *dateString=[dateformatter stringFromDate:date]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T06:55:39.707

`[NSDate dateWithTimeIntervalSince1970:timestamp]`是正确的。似乎你的时间戳是错误的。

相反`1357178589630`，它应该是`1357178589`.

试试[这里](http://www.onlineconversion.com/unix_time.htm)。

**更新：**根据上面的马丁评论。

只需将该值除以 1000。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T06:58:12.407

试试这个代码..

```
NSDate *dateTraded = [NSDate dateWithTimeIntervalSince1970 :[[updates objectForKey:@"timestamp"] integerValue]]; 
```

和 Unix 时间戳以秒为单位，自 1970 年 1 月 1 日以来，您的值看起来像毫秒数。如果除以 1000，则得到 1264396813，根据[http://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm)

# iphone - 在 AVFoundation Framework for iPhone 中获取下载视频的接收字节

> ID：14134278
> 
> 赞同：0
> 
> 时间：2013-01-03T06:49:22.247
> 
> 标签：iphone, objective-c, avfoundation, avplayer

您好，我正在使用 AVFoundation 框架播放来自互联网的剪辑。我用`AVPlayerItem playerItemWithURL:URL`

现在我想检查从该视频文件接收到的字节的大小。我在此页面上找不到任何相关内容： [https ://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html)

那么有没有办法找到接收到的字节大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T07:57:42.643

看看[AVPlayerItemAccessLogEvent](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayerItemAccessLogEvent_Class/Reference/Reference.html#//apple_ref/occ/cl/AVPlayerItemAccessLogEvent)类。

您可以通过`访问

```
self.aPlayer.currentItem.accessLog
AVPlayerItemAccessLog *accesslog = self.aPlayer.currentItem.accessLog;  
NSArray *events = [accesslog events];    
AVPlayerItemAccessLogEvent *event = [events objectAtIndex:0]; 
NSLog(@"Number of bytes received %@", [event numberOfBytesTransferred]); 
```

您有 Accesslog，它为您提供有关数据属性的详细信息

```
 numberOfSegmentsDownloaded  property
  numberOfMediaRequests  property
  playbackStartDate  property
  URI  property
  serverAddress  property
  numberOfServerAddressChanges  property
  playbackSessionID  property
  playbackStartOffset  property
  segmentsDownloadedDuration  property
  durationWatched  property
  numberOfStalls  property
  numberOfBytesTransferred  property
  indicatedBitrate  property
  observedBitrate  property
  numberOfDroppedVideoFrames  property 
```

IMO，这是您唯一的选择，但这也有其缺陷，尤其是在寻求等时。

# java - 使用java上传的文件未在谷歌应用引擎中存储为blob

> ID：14134285
> 
> 赞同：0
> 
> 时间：2013-01-03T06:50:14.937
> 
> 标签：java, google-app-engine

我正在尝试使用 Apache File Upload 存储文件。我的 JSP 如下所示，

```
<form action="/upload" method="post" enctype="multipart/form-data">
<input type="file" name="file" />
<input type="submit"value="upload" />
</form> 
```

在我的 Servlet 中，我可以获得如下上传的文件，

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile file = fileService.createNewBlobFile(mime,fileName);
boolean lock = true;
byte[] b1 = new byte[BUFFER_SIZE];
int readBytes1 = is.read(b1, 0, BUFFER_SIZE);
while (readBytes1 != -1) {
writeChannel.write(ByteBuffer.wrap(b1, 0, BUFFER_SIZE));}
writeChannel.closeFinally(); 
```

现在我尝试使用以下代码将文件存储为 blob 值，

```
 String blobKey = fileService.getBlobKey(file).getKeyString();
 Entity Input = new Entity("Input");
 Input.setProperty("Input File", blobKey);
 datastore.put(Input); 
```

当我尝试这个时，我可以存储文件名 blob 键，但文件没有存储。它在 Google App 引擎的 Blob 查看器和 Blob 列表中显示“0”字节。

请给我一个解决这个问题的想法，

感谢您的帮助。

**我的小服务程序**

```
public class UploadServlet extends HttpServlet{
  private static final long serialVersionUID = 1L;
  private static int BUFFER_SIZE =1024 * 1024* 10;
  public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
   ServletFileUpload upload = new ServletFileUpload();
   FileItemIterator iter; 
try {
iter = upload.getItemIterator(req);
 while (iter.hasNext()) {
   FileItemStream item = iter.next();
   String fileName = item.getName();
   String mime = item.getContentType();

   InputStream is = new BufferedInputStream(item.openStream());
    try {
         boolean isMultipart = ServletFileUpload.isMultipartContent(req);
         if( !isMultipart ) {
             resp.getWriter().println("File cannot be uploaded !");}
         else {
            FileService fileService = FileServiceFactory.getFileService();
            AppEngineFile file = fileService.createNewBlobFile(mime,fileName);
            boolean lock = true;
            FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
            byte[] b1 = new byte[BUFFER_SIZE];
            int readBytes1;
             while ((readBytes1 = is.read(b1)) != -1) {
               writeChannel.write(ByteBuffer.wrap(b1, 0, readBytes1));}
               writeChannel.closeFinally();
            String blobKey = fileService.getBlobKey(file).getKeyString();
            Entity Input = new Entity("Input");
           Input.setProperty("Input File", blobKey);
           datastore.put(Input);}}
catch (Exception e) {
       e.printStackTrace(resp.getWriter());}
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:18:57.573

您正在以错误的方式从输入流中读取数据。它应该是：

```
byte[] b1 = new byte[BUFFER_SIZE];
int readBytes1;
while ((readBytes1 = is.read(b1)) != -1) {
        writeChannel.write(ByteBuffer.wrap(b1, 0, readBytes));
}
writeChannel.closeFinally(); 
```

**更新：**您没有正确处理多部分 - 它有多个部分，您需要确保阅读正确的部分（名称为“文件”的部分）：

```
public class UploadServlet extends HttpServlet {
private static final long serialVersionUID = 1L;
private static int BUFFER_SIZE = 1024 * 1024 * 10;

public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    ServletFileUpload upload = new ServletFileUpload();

    boolean isMultipart = ServletFileUpload.isMultipartContent(req);
    if (!isMultipart) {
        resp.getWriter().println("File cannot be uploaded !");
        return;
    }

    FileItemIterator iter;
    try {
        iter = upload.getItemIterator(req);
        while (iter.hasNext()) {
            FileItemStream item = iter.next();
            String fileName = item.getName();
            String fieldName = item.getFieldName();
            String mime = item.getContentType();

            if (fieldName.equals("file")) {  // the name of input field in html
                InputStream is = item.openStream();
                try {
                    FileService fileService = FileServiceFactory.getFileService();
                    AppEngineFile file = fileService.createNewBlobFile(mime, fileName);
                    boolean lock = true;
                    FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
                    byte[] b1 = new byte[BUFFER_SIZE];
                    int readBytes1;
                    while ((readBytes1 = is.read(b1)) != -1) {
                        writeChannel.write(ByteBuffer.wrap(b1, 0, readBytes1));
                    }
                    writeChannel.closeFinally();
                    String blobKey = fileService.getBlobKey(file).getKeyString();
                    Entity input = new Entity("Input");
                    input.setProperty("Input File", blobKey);
                    datastore.put(input);
                } catch (Exception e) {
                    e.printStackTrace(resp.getWriter());
                }
            }
        }
    } catch (FileUploadException e) {
        // log error here
    }
}
} 
```

# jquery - 从 jquerymobile 页面中删除一个类

> ID：14134287
> 
> 赞同：0
> 
> 时间：2013-01-03T06:50:30.507
> 
> 标签：jquery, jquery-mobile

我对 jQuery Mobile 有疑问。我`hideOnInit`在页面上有一个类。像这样：

```
<div data-role='page' id='hi' class='hideOnInit'> 
```

在按钮上单击我想删除`class='hideOnInit'`.

我试过了

```
$('#idOfPage').removeClass('hideOnInit'); 
```

并且没有 . 之前`hideOnInit`，但它不起作用。有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:51:02.150

您不必屈服于`.`班级`removeClass`名称。从传递给 removeClass 的参数中的类中删除点。

你有 div ，`id = hi`但你正在从中删除类`id = idOfPage`

[**现场演示**](http://jsfiddle.net/rajaadil/HrwEK/)

改变

```
$('#idOfPage').removeClass('.hideOnInit'); 
```

到

```
$('#idOfPage').removeClass('hideOnInit'); 
```

改变

```
<div data-role='page' id='hi' class='hideOnInit'> 
```

到

```
<div data-role='page' id='idOfPage' class='hideOnInit'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:54:01.267

ClassName 应该在 removeClass 方法中使用，即没有 . (.hideOnInit)

```
$('#idOfPage').removeClass('hideOnInit'); 
```

谢谢

# vb.net - 如果按下返回按钮，则跳过显示页面

> ID：14134295
> 
> 赞同：1
> 
> 时间：2013-01-03T06:50:54.990
> 
> 标签：vb.net, windows-phone, back-button

我正在制作一个 Windows Phone 应用程序。如果用户是第一次使用该应用程序，则会将该人带到注册页面。注册成功后，用户进入主页面。

假设用户被带到注册页面，当用户在没有注册的情况下点击后退按钮时，由于 MainPage.xaml 上的代码，他被拉回到注册页面。MainPage.xaml 的代码如下：

```
Protected Overrides Sub OnNavigatedTo(e As System.Windows.Navigation.NavigationEventArgs)
    MyBase.OnNavigatedTo(e)

    If Not (IsolatedStorageSettings.ApplicationSettings.Contains("IsFirstLaunchDone")) Then
        NavigationService.Navigate(New Uri("/Registration.xaml", UriKind.Relative))
    End If

End Sub 
```

因此，当用户在注册页面上并点击返回按钮时，他再次进入注册页面，如果注册未完成，我希望应用程序跳过返回 MainPage.xaml 并退出应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:59:55.350

将以下代码添加到您的注册页面代码后面。

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        base.OnBackKeyPress(e);

        if (UserHasntRegistered)
        {
            try
            {
                NavigationService.RemoveBackEntry();
            } catch(Exception exception)
            {
            }
            return;
        }
    } 
```

# c# - 从 modalpopupextender 的面板获取数据

> ID：14134302
> 
> 赞同：1
> 
> 时间：2013-01-03T06:51:19.200
> 
> 标签：c#, asp.net, gridview

我有一个`GridView`和一个列，`GridView`其中有一个`linkButton`可以打开`modalpopupextender`点击的列。我能够在`popextender`面板中绑定数据，但现在我想从该面板中检索数据。我从每个人那里获取数据`GridRow`：

```
 foreach (GridViewRow row in MyGridView.Rows)
 {                   
     Label Date = (Label)row.Cells[0].FindControl("DateId");
     string date = Date.Text;
     //Code to get linkButton(asp:ModalpopUpextender) and data from  
     //asp:panel of ModalpopUpextender
  } 
```

我四处寻找答案，但无法找到解决问题的方法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:05:03.283

假设您有这样的设置

```
<ajaxToolKit:ModalPopupExtender 
            ID="mdlPopup" runat="server" TargetControlID="btnShowPopup" PopupControlID="pnlPopup" 
            CancelControlID="btnClose" BackgroundCssClass="modalBackground" />
        <asp:Panel ID="pnlPopup" runat="server" Width="500px" style="display:none">
            <asp:UpdatePanel ID="updPnlCustomerDetail" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:Label ID="lblCustomerDetail" runat="server" Text="Customer Detail"  Width="95%" />

                </ContentTemplate>                
            </asp:UpdatePanel> 
```

您可以尝试先找到您的面板，然后深入到所需的控件。我建议将此代码放在行编辑事件中

```
 gridViewTest_RowEditing(object sender, GridViewEditEventArgs e)
 {

gridViewTest.EditIndex=e.NewEditIndex;
Panel myPanel =    (Panel)gridViewTest.Rows(gridViewTest.EditIndex).FindControl("pnlPopup");
Label myLabel = (Label)myPanel.Findcontrol("lblCustomerDetail");
   } 
```

//然后用标签做一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:22:03.517

感谢Abide的有用帖子...终于我找到了解决方案...

```
Panel.FindControl("ControlId"); 
```

无法正常工作，因为 somtimes 面板未添加到页面中。

我们可以使用此代码。它工作正常。

```
foreach( Control cntrl in Panel.Controls ) 
{   
  if(cntrl.ID == "RequiredConteolId")    
   {
      //your application code goes here...
   } 
} 
```

# api - 在 CQDB for Rational ClearQuest 7 中写入或更新记录的语法是什么？

> ID：14134304
> 
> 赞同：1
> 
> 时间：2013-01-03T06:51:25.980
> 
> 标签：api, syntax, updates, fwrite, clearquest

Rational CQ 7 API 中使用 VBA 将记录从外部表（如 excel）写入或更新到 CQDB 中的语法是什么。我想在使用 VBA 的 excel 中创建一个宏，以及将记录写入/更新到 CQDB 中的语法。所以有吗有什么具体的语法吗？谢谢

# c++ - C ++ - 将exe转换为源代码

> ID：14134305
> 
> 赞同：4
> 
> 时间：2013-01-03T06:51:40.303
> 
> 标签：c++, visual-c++, exe, netbeans-7

我有一个应用程序（.exe）我已经使用 c++ 在 Netbeans 中创建了代码并生成了这个 .exe 有没有办法生成与这个 .exe 相关的相应代码

请提供适当的反编译器链接，我无法弄清楚这些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T06:54:10.570

并不真地。

您可以使用[反汇编器](https://en.wikibooks.org/wiki/X86_Disassembly/Analysis_Tools)或[反编译器](http://www.hex-rays.com/products/decompiler/index.shtml)，但它看起来不像原始源代码，并且需要大量工作才能理解正在发生的事情（例如，变量名会丢失）。

如果禁用优化并在编译源代码时包含调试信息，您将获得最佳输出。即使那样，您也可能会得到一些无法阅读的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:02:54.743

使用 Hex-Rays Decompiler [http://www.hex-rays.com/products/decompiler/index.shtml](http://www.hex-rays.com/products/decompiler/index.shtml)它将可执行程序转换为人类可读的类 C 伪代码文本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:53:19.667

不，没有直接的方法。

一旦源代码被编译并特别优化，任何对它的引用实际上都会丢失。你可以反汇编它，但你不会看到任何高级代码。

# c# - XNA 4.0 在 GF 640M 上以 30 fps 运行，但在集成 Intel 卡上运行良好

> ID：14134323
> 
> 赞同：0
> 
> 时间：2013-01-03T06:53:01.853
> 
> 标签：c#, xna, nvidia

每次我使用集成显卡运行游戏时，它都能以 60 FPS 的速度运行。但有时当屏幕上有很多粒子时，它会滞后太多。

所以我切换到 Nvidia GeForce 640M，但帧率保持在 30 而不是 60。我尝试了 Reach 和 HiDef，但它们都无法解决帧率问题。我也试过

```
this.TargetElapsedTime = TimeSpan.FromMilliseconds(15); 
```

但FPS仍然是30。

也试过这个但没有奏效：

```
public Game1()
{
    graphics = new GraphicsDeviceManager(this);
    Content.RootDirectory = "Content";
    graphics.PreparingDeviceSettings += new EventHandler<PreparingDeviceSettingsEventArgs>(graphics_PreparingDeviceSettings);
}

private void graphics_PreparingDeviceSettings(object sender, PreparingDeviceSettingsEventArgs e)
{
    e.GraphicsDeviceInformation.PresentationParameters.MultiSampleCount = 4;
    e.GraphicsDeviceInformation.PresentationParameters.PresentationInterval = PresentInterval.One;
} 
```

我该怎么做才能修复 Nvidia 显卡的帧率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:59:13.823

你试过改变`PresentationParameters.PresentationInterval`吗？

如果我没记错的话，如果您将其设置为`PresentInterval.One`，它会“全力以赴”并尝试匹配最大刷新率。

自从我修补 XNA 以来已经有一段时间了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:32:51.383

可能与您的垂直同步设置有关。尝试以下

```
graphics.SynchronizeWithVerticalRetrace = false; 
```

# mysql - ubuntu 10.04 中的 chkconfig 问题

> ID：14134324
> 
> 赞同：0
> 
> 时间：2013-01-03T06:53:09.533
> 
> 标签：mysql, ubuntu

发生这种情况`chkconfig --add mysql`的命令被执行。已经完成`ln -s /usr/lib/insserv/insserv /sbin/insserv`，但问题仍然存在。

```
insserv: warning: script 'K20acpi-support' missing LSB tags and overrides
insserv: warning: script 'mysql' missing LSB tags and overrides
insserv: warning: script 'anacron' missing LSB tags and overrides
insserv: warning: script 'alsa-mixer-save' missing LSB tags and overrides
insserv: warning: current start runlevel(s) (0 6) of script `umountfs' overwrites defaults (empty).
.
.
.
insserv: warning: current start runlevel(s) (0) of script `halt' overwrites defaults (empty).
insserv: warning: script 'screen-cleanup' missing LSB tags and overrides
insserv: warning: script 'dbus' missing LSB tags and overrides
insserv: warning: script 'network-manager' missing LSB tags and overrides
insserv: warning: script 'acpi-support' missing LSB tags and overrides
insserv: warning: current start runlevel(s) (0 6) of script `sendsigs' overwrites defaults (empty).
insserv: There is a loop between service rsyslog and apache2 if stopped
insserv:  loop involving service apache2 at depth 3
insserv:  loop involving service rsyslog at depth 2
insserv:  loop involving service udev at depth 1
insserv: There is a loop between service apache2 and rsyslog if stopped
insserv: exiting now without changing boot order!
/sbin/insserv failed, exit code 1
mysql                     0:off  1:off  2:off  3:off  4:off  5:off  6:off 
```

小帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:07:39.630

对于 Ubuntu 10.04`sysv-rc-conf`可能是一个选项。尝试通过以下方式安装它：

```
sudo sysv-rc-conf 
```

它带有 CLI GUI 界面。

[http://manpages.ubuntu.com/manpages/lucid/man8/sysv-rc-conf.8.html](http://manpages.ubuntu.com/manpages/lucid/man8/sysv-rc-conf.8.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:07:50.747

`chkconfig`不是 Ubuntu/Debian 原生的，它来自 Redhat/Fedora 世界。

如果您使用标准机制在 Ubuntu 上安装 MySQL 服务器：

```
sudo apt-get install mysql-server 
```

那么您实际上不需要做任何特别的事情来使其工作或将其注册为服务 - 它已经在系统中注册以在启动时自动启动。

为了方便起见，您仍然可以使用`service`命令，例如：

```
sudo service mysql restart 
```

# javascript - WordPress + 花式框。如何列出wordpress帖子并使用fancybox显示帖子

> ID：14134328
> 
> 赞同：1
> 
> 时间：2013-01-03T06:53:30.860
> 
> 标签：javascript, wordpress, fancybox

我是 wordpress 和 javascript 的新手，需要各位专家的帮助。

我正在尝试制作一个 wordpress 页面，其中包含一个显示所有帖子的滑块，但是当您单击它时，它会将帖子的图像（特色图像）显示为弹出窗口（fancybox），我不想要它转到帖子 URL。

我尝试使用fancybox，但仍然无法做到。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:07:42.173

```
<?php $posts_array = get_posts( $args ); ?> 
```

[**阅读更多**](http://codex.wordpress.org/Template_Tags/get_posts)。

您可以轻松地在精美框中显示这些帖子。在花哨的盒子插件中，进行查询并检索创建链接的帖子数据。在那里你可以添加一个标签

# python - 如何在图像管道中获取蜘蛛名称

> ID：14134330
> 
> 赞同：5
> 
> 时间：2013-01-03T06:53:37.280
> 
> 标签：python, scrapy

我有很多图像管道，但我想为不同的蜘蛛使用不同的保存方法。

我知道在其他管道中我可以使用`spider.name`，但我怎样才能在图像管道中得到它

```
class MyImagesPipeline(ImagesPipeline):
   if spider.name  in ['first']:
    def get_media_requests(self, item, info): 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T08:30:40.303

蜘蛛作为参数传递给`process_item`：

[https://scrapy.readthedocs.org/en/latest/topics/item-pipeline.html#item-pipeline-example](https://scrapy.readthedocs.org/en/latest/topics/item-pipeline.html#item-pipeline-example)

您可以在评估期间为类范围的使用设置一个变量，或者如果您在调用 process_item 之前需要蜘蛛，您可以自己实现一个钩子。

```
class MyImagesPipeline(ImagesPipeline):
    spider = None

    def process_item(self, item, spider):
        self.spider = spider
        if self.spider.name in ['first']:
            get_media_requests(item, info)
        return item

    def get_media_requests(self, item, info):
        # whatever 
```

`SpiderInfo`您还可以直接从基类中检索信息，该基类有一个带有蜘蛛属性的内部元类。

见：[https ://github.com/scrapy/scrapy/blob/master/scrapy/contrib/pipeline/media.py](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/pipeline/media.py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-29T15:00:43.853

`info.spider`是你想要的。

```
def get_media_requests(self, item, info):
    info.spider.name 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-15T21:58:08.190

虽然距离发布已经很长时间了，但我在这里提出一个解决方案。在管道内，查找名称变量：spider.name

希望对你有帮助。

# php - mysql_fetch_array 使用 php 比较 2 个表之间的数据？

> ID：14134336
> 
> 赞同：0
> 
> 时间：2013-01-03T06:54:07.263
> 
> 标签：php, mysql, arrays

我正在尝试通过 php/mysql 2 使用 2 个 mysql 表给我一个最大值。我假设使用数组是执行此操作的正确方法，但是我已经花了很多时间并且遗漏了一些东西。

我的桌子是：

1) `plantcomp`，我想知道所有`CompressID`具有`CustID`$CustID 的列表。（目前有 3 个）。

2) `comps`，我想使用这些`CompressID`列表来了解有效的`Compressor`#s。然后我将对这些值执行 max()，以便我可以命名下一个压缩器 max()+1。

我的代码尝试...这让我出错：“注意：第 55 行（路径名）中的数组到字符串转换”，然后是“数组”

```
//have the custid
echo $CustID;

//under table `plantcomp`, find matching compressid's.
$q55 = "SELECT * FROM `plantcomp` WHERE `CustID`='" . $CustID . "' ";

 // Run query
 $result55 = mysql_query($q55);

while($row = mysql_fetch_array($result55)){
echo "<p>".$row; 
```

我也试过这个，mysql_fetch_assoc，但它只给了我 3 个有效条目中的 2 个......

```
$get = mysql_query("SELECT CompressID FROM plantcomp WHERE CustID = '$CustID'");
$money = mysql_fetch_assoc($get);

while($money = mysql_fetch_assoc($get)){echo $money['CompressID'];} 
```

提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:56:53.297

```
Please change this line 

echo "<p>".$row;
to 
echo "<p>";
print_r($row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:58:13.617

您遇到的问题来自您将字符串 (< **p** >) 与数组 ( **$row** ) 混合的事实。

```
echo "<p>".$row; 
```

您可以使用**print_r**打印 $row 数组：

```
print_r($row); 
```

您还可以像这样访问 $row 数组（表列）的不同元素：

```
$row['column_name']; 
```

例如，假设您的表由两列组成：first_name 和 last_name。您可以像这样打印它们：

```
echo '<p>' . $row['first_name'] . ' ' . $row['last_name'] . '</p>'; 
```

因此，有了这些知识，我们可以打印您的 CompressID：

```
$result55 = mysql_query("SELECT * FROM `plantcomp` WHERE `CustID`='" . $CustID . "'");

while ($row = mysql_fetch_assoc($result55))
{
    echo '<p>' . $row['CompressID'] . '</p>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:29:33.550

```
$CompressID = array(); //Initialising an array

$query = "SELECT * FROM `plantcomp` WHERE `CustID`='" . $CustID . "' ";
$result = mysql_query($query);

while($obj = mysql_fetch_assoc($result)){

    $CompressID = $obj['CompressID']; //Storing all the CompressID in an array
    echo $obj['CompressID']; // sanity check
} 
```

首先运行上述查询并将结果与​​ db 进行比较。如果结果不匹配 1) db 中有一些错误数据 2) 更改查询以获得所需的结果。

如果这有效，则添加其余代码

```
if( count($CompressID) >0 ){

    $query = "SELECT max(CompressID) as maxCompressID FROM `comps` WHERE `CompressID` IN($CompressID)";
    $result = mysql_query($query);
    while($newObj = mysql_fetch_assoc($result){

     echo $newObj['maxCompressID'];

    }
} 
```

# jython - 如何将 Jython 标准库安装到 Confluence 中？

> ID：14134339
> 
> 赞同：0
> 
> 时间：2013-01-03T06:54:20.380
> 
> 标签：jython, confluence

我开始将一些 Jython 代码集成到我们的 Confluence wiki 中，并且我想安装 Jython 标准库——来自 Atlassian 的 Jython 插件显然只是基本的 Jython 安装，所以我需要使用 Jython 库制作一个 Jar并将其放到服务器上（顺便说一句，我们的服务器是托管的）。那么，我可以把那个罐子放在哪里——或者我告诉服务人员把它放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:41:10.293

您可以在服务器上安装 Jython 并将 JYTHONPATH 环境变量设置为指向 Jython lib 目录。我们在 Solaris 上的 Tomcat 上运行 Confluence，并在 setenv.sh 中设置 JYTHONPATH=path_to_jython_install/Lib。setenv.sh 由 catalina.sh 调用，由 start-confluence.sh 调用。

这是一个解释这一点的链接： [https ://bobswift.atlassian.net/wiki/display/SCRP/How+to+use+Jython+libraries?focusedCommentId=31916077#comment-31916077](https://bobswift.atlassian.net/wiki/display/SCRP/How+to+use+Jython+libraries?focusedCommentId=31916077#comment-31916077)

# jquery - href 更改但页面在页面完全加载后重定向页面使用 chrome 中的 jquery

> ID：14134344
> 
> 赞同：2
> 
> 时间：2013-01-03T06:55:07.703
> 
> 标签：jquery, google-chrome

我在 CHROME 中遇到了一个奇怪的错误。该代码适用于 Firefox。

```
$.ajax({
    url: someurl,
    type: 'POST',
    data: {},
    headers: headers,
    success: function(data) {
        if (data.href) {
            // create cookies
            if (manager) {
                window.location.href = "/index.html";
            } else if (admin) {
                window.location.href = "/admin.html";
            } else {
                window.location.href = "/tester.html";
            }
        }
    },
    error: function(data) {
        $('#error').html("Invalid username or password.");
    }
}); 
```

如果页面的 url 更改为 someurl/index.html 并且有大量的 ajax 调用，则 href 会立即更改，但在加载所有数据后页面会重定向到 someurl/index.html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T06:01:08.267

我发现了问题并制定了解决方案。

问题出在异步 ajax 调用上。我在通话之前将异步设为假，并在通话后将其设置为真。这在每种情况下都有效。

```
async = false;

$.ajax({
    url: someurl,
    type: 'POST',
    data: {},
    async : false,
    headers: headers,
    success: function(data) {
        if (data.href) {
            // create cookies
            if (manager) {
                window.location.href = "/index.html";
            } else if (admin) {
                window.location.href = "/admin.html";
            } else {
                window.location.href = "/tester.html";
            }
        }
    },
    error: function(data) {
        $('#error').html("Invalid username or password.");
    }
});
async = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:02:15.140

像这样运行你的ajax调用

```
$(window).load(function() {
  // ajax call 
}); 
```

# java - SAXParserfactory 和 XMLReaderFactory 之间的区别

> ID：14134347
> 
> 赞同：0
> 
> 时间：2013-01-03T06:55:24.440
> 
> 标签：java, xml, sax, jaxp

昨天我阅读了与 JAXP API 的 SAX2 API 类 XMLReaderFactory 和 SAXParserFactory 相关的文档。它们都用于提供 XMLReader 类的实例的相同目的。然后我浏览了各种材料以了解两者之间的区别以及在特定情况下哪个更有用。

我读过的关于上述问题的大多数材料都说明了以下差异。

> 辅助类 XMLReaderFactory 方法 createXMLReaderFactory(String className) 的问题在于，工厂需要使用解析器类的字符串名称作为参数（同样是 Apache 类，org.apache.xerces.parsers.SAXParser）。您可以通过将不同的解析器类作为字符串传递来更改解析器。使用这种方法，如果您更改解析器名称，则无需更改任何导入语句，但仍需要重新编译该类。这显然不是最好的解决方案。在不重新编译类的情况下更改解析器会容易得多。
> 
> JAXP 提供了更好的选择：它允许您提供解析器作为 Java 系统属性。当然，当您从 Sun 下载一个发行版时，您会得到一个使用 Sun 的 Xerces 版本的 JAXP 实现。将解析器更改为 Oracle 的解析器需要您更改类路径设置，从一个解析器实现移动到另一个，但它不需要重新编译代码。这就是 JAXP 的魔力——抽象。谁能告诉我在哪种特定情况下使用特定方法会变得更有用

但我不同意上述区别，因为如果我们使用方法 createXMLReaderFactory(String className) 而不是直接将类名传递给方法，如果我们从属性文件中读取类名并将其传递给那么我们不需要重新编译该方法。

请让我知道我在上述观点上是否正确。

谁能告诉我 SAX2 API 类 XMLReaderFactory 和 JAXP API 的 SAXParserFactory 之间的区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:48:56.360

我会说 JAXP`SAXParserFactory`和`SAXParser`只是 SAX API`XMLReaderFactory`和`XMLReader`. `SAXParser`在内部用于`XMLReader`实际解析。您可以在没有 SAXParser 的情况下解析 XML，`XMLReader.parse(InputSource)`但使用它更方便`SAXParser.parse(InputSource, DefaultHandler).`

# c# - 使用 LINQ 从 ArrayList 中删除一组项目

> ID：14134350
> 
> 赞同：3
> 
> 时间：2013-01-03T06:55:38.717
> 
> 标签：c#, linq

我有 Arraylist，其中包含所有属性的 ID（list1）。现在我有另一组属性的 Id (list2) 需要从第一个 ArrayList (list1) 中删除

我作为 LINQ 开发人员处于初学者阶段，所以请建议正确的代码片段

```
Arraylist attributeIDs; // which contains Ids
int[] ids = { 1, 2, 3, 4 };
var id = ids.Select(s => s);
var sam = attributeIDs.Cast<IEnumerable>().Where(s => id.Contains(Convert.ToInt32(s)));
Arraylist filterAttributDs = Cast<Arraylist>sam; 
```

在上面的代码之后，我需要将输出 Arraylist 传输到不同的方法，所以我只需要在 Arraylist 中输出提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:03:07.587

试试方法

```
var sam = attributeIDs.Cast<IEnumerable>().Where(s => id.Contains(Convert.ToInt32(s)));
ArrayList myArrayList = new ArrayList(sam ); 
```

**编辑**

```
int[] ids = { 1, 2, 3, 4 };
//var id = ids.Select(s => s);
List<int> id = ids.OfType<int>().ToList();
var list = attributeIDs.Cast<int>().ToList();
//or try 
//List<int> list = new List<int>(arrayList.ToArray(typeof(int)));
var sam = list.Where(s => id.Contains(s));
//if you want to remove items than , !Contains() rather an Contains()
// var sam = list.Where(s => !id.Contains(s); 
//also try out Intersect or Except instead of this as jon suggestion in comment 
//var sam= attributeIDs.Except(id); for diffence between list
//var sam= attributeIDs.Intersect(id); for common in list

ArrayList myArrayList = new ArrayList(sam ); 
```

结合所有

检查这个：[LINQ to SQL in and not in](https://stackoverflow.com/questions/3047657/linq-to-sql-in-and-not-in)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:04:18.717

```
new Arraylist((from id in attributeIDs where !ids.Contains(id) select id).ToList())
```

就像 Jon 提到的那样，您应该考虑只使用简单的数组或泛型集合。另请注意，上述查询在 O(n*m) 中运行，其中 n 是原始列表中的项目数，m 是您尝试删除的列表中的元素数。您应该考虑使用 HashSet，然后在此处使用集差操作以获得更好的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T07:05:18.040

对您的示例稍作调整：

```
ArrayList attributeIDs = new ArrayList(){ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
int[] ids = { 1, 2, 3, 4 };
var sam = attributeIDs.Cast<int>().Intersect(ids); 
```

几点注意事项：

*   转换底层项目类型，而`Cast`不是集合的类型。

*   `foo = setOfThings.Select(a => a) <==> setOfThings`

*   `Intersect`意思是“只选择出现在两个集合中的那些元素”

（如其他地方所述，Intersect 对于大型数据集不是最优的：考虑使用适当的结构，如 HashSet）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:45:53.147

您的问题的解决方案是：

ArrayList firstList =new ArrayList(new int[]{ 1, 2, 3, 7, 8, 9 });

ArrayList secondList =new ArrayList(new int[] { 1, 3 });

var result = from c in firstList.ToArray() where !(from n in secondList.ToArray() select n).Contains(c) select c;

foreach (var temp in result) Console.WriteLine(temp);

**上面的输出是：2 7 8 9**即 secondList 的项目从 firstList 中删除，结果也是您需要的 ArrayList。

# sql - GROUP BY 类别和 ORDER 类别

> ID：14134352
> 
> 赞同：0
> 
> 时间：2013-01-03T06:55:40.993
> 
> 标签：sql, sql-server

我有一个看起来像下面这个简单示例的表。我想创建一个显示所有记录的选择语句，按每个不同的类别（升序）进行组合，并且每个类别组的成员应按水果名称的字母顺序排列：

```
ID        Fruit        Category
_________________________________________
1          Apple        200  
2          Pear         200
3          Banana       300
4          Peach        300
5          Mango        300
6          Tomato       600
7          Cucomber     600
8          Jackfruit    300
9          Salad        600 
10         Cranberries  200 
```

我不知道如何在 SELECT 中组合 ORDER BY 和 GROUP BY。任何帮助将不胜感激。

谢谢。

编辑：这是我期待的输出：

```
ID        Fruit        Category
_________________________________________
1          Apple        200 
10         Cranberries  200 
2          Pear         200 
3          Banana       300
8          Jackfruit    300
5          Mango        300
4          Peach        300
7          Cucomber     600
9          Salad        600 
6          Tomato       600 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T07:09:00.803

```
select* from table_name order by category asc, fruit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:18:26.093

你可以用这个。

```
select* from table_name order by column_name asc // use your column name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:07:29.833

如前所述，此处不需要 GROUP BY。GROUP BY 用于聚合行。例如：

```
SELECT category, count(category) as [count] from myTable GROUP BY category 
```

会给你这样的东西

```
category    count
--------    -----
200         3
300         4
600         3 
```

您只想按两列排序，所以您只需要

```
SELECT * FROM myTable ORDER BY Fruit, Category 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T07:05:18.837

```
SELECT * 
FROM table_name 
GROUP BY category 
ORDER BY category ASC 
```

# c++ - 在 OS X 上使用共享库分发 gcc 4.7 程序

> ID：14134353
> 
> 赞同：0
> 
> 时间：2013-01-03T06:55:42.083
> 
> 标签：c++, macos, dyld, gcc4.7

我已经在 Mac OS X 10.8 上使用 GCC 4.7 针对一些 C++ 动态库编译了一个命令行工具。在开发系统上，编译器由 MacPorts 安装到`/opt/local`，库位于`/usr/local/lib`. 动态库是从源代码与程序一起编译的。（但它们是由构建的`cmake`，我不想弄乱那个系统。）

当我尝试通过将必要的 dylib 放入可执行文件的目录中来在另一台机器上运行它时`DYLD_LIBRARY_PATH`，它会抱怨 C++ 标准库中的未定义符号。它似乎试图从`/usr/lib/libstdc++.6.dylib`.

如何强制系统加载所需的`libstdc++`？

# machine-learning - Amazon DynamoDB 和 FlockDB 之间有什么关系/区别？

> ID：14134354
> 
> 赞同：3
> 
> 时间：2013-01-03T06:55:45.127
> 
> 标签：machine-learning, amazon-dynamodb, pagerank, montecarlo, flockdb

我正在尝试使用[Monte Carlo Sampling实现](http://en.wikipedia.org/wiki/Monte_Carlo_method)[增量 PageRank](http://www.vldb.org/pvldb/vol4/p173-bahmani.pdf)。我的数据包括 20 个不同实体之间的数百万个关系数据。

我发现[Amazon DynamoDB](http://aws.amazon.com/dynamodb/)和[FlockDB](https://github.com/twitter/flockdb)是我的数据存储任务的两个很好的候选者。[这里](http://vschart.com/compare/flockdb/vs/dynamo-db)有一个简短的比较。谁能指出哪一个更适合我的 PageRank 任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:28:24.483

这个答案应该与健康剂量的盐一起服用，因为我不是 100% 了解您的要求。

首先也是最明显的，这篇论文来自 Twitter（Personilized page ran - SALSA）。我知道在某些时候他们的推荐/个性化负责人说他们将它与许多其他技术一起使用（这是从 11 年 10 月开始的） [https://fbcdn-sphotos-ba.akamaihd.net/hphotos-ak-snc7/ 300267_581958426587_2140504611_n.jpg](https://fbcdn-sphotos-b-a.akamaihd.net/hphotos-ak-snc7/300267_581958426587_2140504611_n.jpg)

就哪个更适合您的任务而言，我会选择 FlockDB。主要原因是它支持基于图形的查询，这将在您的代码中非常常见。它还具有一些显式的持久图功能，例如持久化边信息。

# hive - 如何在 HIVE 表创建中指定 STRING 作为分隔符

> ID：14134358
> 
> 赞同：1
> 
> 时间：2013-01-03T06:56:29.730
> 
> 标签：hive, delimiter

我的数据看起来像：

**一个||b||c**

要获取数据，我的 create table 语句是：

创建表

（ col1 字符串，

col2 字符串，

col3 字符串）

以“||”结尾的行格式分隔字段；

但这里需要'|' 作为分隔符而不是“||”。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:37:30.753

在处理多字符分隔符字符串时，您可以使用[RegexSerDe ：](https://github.com/apache/hive/blob/trunk/contrib/src/java/org/apache/hadoop/hive/contrib/serde2/RegexSerDe.java)

```
create table mytable (
  col1 string,
  col2 string,
  col3 string
)
ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe'
WITH SERDEPROPERTIES (
"input.regex" = "^([^\\|]+)\\|\\|([^\\|]+)\\|\\|([^\\|]+)$",
"output.format.string" = "%1$s %2$s %3$s")
STORED AS TEXTFILE
LOCATION '/path/to/data'; 
```

注意：优化正则表达式以满足您的需求

# php - jquery mobile中的表单提交Ajax调用

> ID：14134359
> 
> 赞同：0
> 
> 时间：2013-01-03T06:56:47.760
> 
> 标签：php, html, ajax, jquery-mobile

我想通过 jquery mobile 中的 ajax 调用提交表单。

我的剧本是这样的

```
<script>
function confirm(){

var user_name = $('#login_form').find('input[name="user_name"]').val();
    $.ajax({

            type: "POST",
            url: $('#login_form').find('input[name="action"]').val(),
            data: "val=" + user_name, 
           success: function(data){

                alert(data); 
            }
        });

}
</script> 
```

我的表格在这里....

姓名 邮箱 密码

求求急…………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:04:05.390

```
function confirm(){

var frm = $('#login_form');

frm.submit(function () {
        $.ajax({
            type: frm.attr('method'),
            url: frm.attr('action'),
            data: frm.serialize(),
            success: function (data) {
                alert('ok');
            }
            error: function(xhr,err){
                 alert(err);
            }

        });

        return false;
    });
}

You can use this function to post your data... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:10:02.450

```
You can try this function also...

$("#login_form").submit(function() {

    $.ajax({
           type: "POST",
           url: $(this).attr('action'),
           data: $("#login_form").serialize(), // serializes the form's elements.
           success: function(data)
           {
               alert(data); // show response from the php script.
           }
           error:function(xhr,err){
               alert(err);
            }
         });

    return false; // avoid to execute the actual submit of the form.
}); 
```

# asp.net-mvc - 将 DataAnnotations 与 Linq 生成的类一起使用

> ID：14134362
> 
> 赞同：1
> 
> 时间：2013-01-03T06:57:08.943
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, data-annotations, razor-2

我按照我在网上找到的步骤来执行此操作，但它似乎不起作用。这是一个使用 Razor2 的 MVC4 项目。

这是我创建的元数据类

```
public class LedgerItemValidation
{
    [DisplayFormat(DataFormatString = "{0:#,##0.00#}", ApplyFormatInEditMode = true)]
    public decimal Amount { get; set; }

    [DataType(DataType.Date), DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
    public DateTime StartDate { get; set; }
} 
```

这是我创建的部分类，所以我可以应用这些

```
[MetadataType(typeof(LedgerItemValidation))]
public partial class LedgerItem
{
    ... other stuff
} 
```

这是我在页面上显示的地方

```
@model CF.Models.LedgerItem

@Html.TextBoxFor(m => m.Amount) 
```

从我在网上看到的情况来看，这应该是我所要做的。当我测试时，我也给了它一个 DisplayName ，但这也没有出现。

不知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:54:49.970

仅`DisplayFormat`适用于`EditorFor`或。`DisplayFor`采用

```
@Html.EditorFor(m => m.Amount) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:51:20.560

您可以通过使用下面的部分类来做到这一点。

1.  Linq to SQL 生成的对象类是偏的

2.  为对象创建自己的部分类

3.  将`[MetadataType(typeof(YourDataAnnotationIncludedClassName))]`放在您创建的部分类上。

**示例代码：**

**Linq to SQL 生成的类**

```
public partial class Provider 
{
   public string Name { get; set; }
} 
```

**使用您要验证的每个字段的元数据创建您自己的 MetaData 类**

```
public class MyMetaDataProviderClass
{
    [Required]
    [DisplayName("Provider Name")]
    public string Name { get; set; }
} 
```

为要添加元数据的 Object 类创建另一个 Partial Class，这里是 Provider 类：

```
[MetadataType(typeof(MyMetaDataProviderClass))]
public partial class Provider { } 
```

**重要说明：**您不需要在类中指定任何内容，只需指定元数据类型即可。

然后你可以在下面的**View**上使用它：

```
@Html.TextBoxFor(m => m.Name) 
```

**编辑**

对于您的**小数问题**，可以如下处理。

```
@Html.TextBox(m => Math.Round(m.Amount,2)) 
```

**或者**

```
 @Html.EditorFor(m => m.Amount) 
```

对于您的**日期**问题：

```
@Html.EditorFor(m => m.StartDate) 
```

**附加说明：**

> DisplayFormat 仅适用于 EditorFor 和 DisplayFor 助手

我希望这对你有帮助。

# mysql - LEFT JOINed 表的 SQL 限制

> ID：14134363
> 
> 赞同：5
> 
> 时间：2013-01-03T06:57:10.980
> 
> 标签：mysql, select, group-by, left-join

我有以下表格。

1.  行业（id，名称）
2.  Movie(id, name, industry_id) [行业有很多电影]
3.  Trailer(id, name, movie_id) [电影有很多预告片]

我需要为每个行业找到 6 个最新的预告片。每部电影不需要有预告片或可以有多个[0-n]。

```
CREATE TABLE industry(id int, name char(10), PRIMARY KEY (id));

CREATE TABLE movie(id int, name char(10), industry_id int, PRIMARY KEY (id),
FOREIGN KEY (industry_id) REFERENCES industry(id));

CREATE TABLE trailer(id int, name char(10), movie_id int, PRIMARY KEY (id),
FOREIGN KEY (movie_id) REFERENCES movie(id));

INSERT INTO industry VALUES (1, "sandalwood");
INSERT INTO industry VALUES (2, "kollywood");

INSERT INTO movie VALUES (1, "lakshmi", 1);
INSERT INTO movie VALUES (2, "saarathi", 2);

INSERT INTO trailer VALUES (1, "lakshmi1", 1);
INSERT INTO trailer VALUES (2, "lakshmi2", 1);
INSERT INTO trailer VALUES (3, "lakshmi3", 1);
INSERT INTO trailer VALUES (4, "lakshmi4", 1);
INSERT INTO trailer VALUES (5, "lakshmi5", 1);
INSERT INTO trailer VALUES (6, "lakshmi6", 1);

INSERT INTO trailer VALUES (7, "saarathi4", 2);
INSERT INTO trailer VALUES (8, "saarathi5", 2);
INSERT INTO trailer VALUES (9, "saarathi6", 2);

SELECT  c.*
FROM    industry a
        LEFT JOIN movie b
            ON a.id = b.industry_id
        LEFT JOIN trailer c
            ON b.id = c.movie_id
LIMIT 0, 6

| ID |     NAME | MOVIE_ID |
----------------------------
|  1 | lakshmi1 |        1 |
|  2 | lakshmi2 |        1 |
|  3 | lakshmi3 |        1 |
|  4 | lakshmi4 |        1 |
|  5 | lakshmi5 |        1 |
|  6 | lakshmi6 |        1 | 
```

我只需要从每部电影中获取一个最近的预告片。但我得到了每部电影的所有预告片。请建议我得到`SQL`声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:03:57.037

要获取最近的跟踪器，您应该包含我们可以从中获取它的日期字段列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:06:13.437

我不确定这是否适用于 MySql，因为我不记得是否可以在 in 子句中包含子查询，但您可以尝试：

```
select * from trailer
where id in (select max(id) from trailer group by movie_id) 
```

无论它是否有效，看起来您没有在查询中使用行业表，因此加入它没有多大意义（除非您实际上试图排除没有分配任何行业的电影.. .但根据你的样本，我看起来不是你的意图）。

如果上面的查询在MySql中不起作用，那么试试这个

```
select  t.* 
from    trailer t join
        (select max(id) id from trailer group by movie_id) t2 on t1.id = t2.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T07:12:33.513

如果您想通过**预告片表的****id**获得最新预告片，请使用以下查询：

 **```
SELECT * FROM trailer t 
INNER JOIN (SELECT movie_id, MAX(id) id 
            FROM trailer GROUP BY movie_id) AS A ON t.id = A.id 
```

**或者**，如果您想要按日期最新的数据，请使用此查询：

```
SELECT * FROM trailer t 
INNER JOIN (SELECT movie_id, MAX(latestbydate) latestbydate 
            FROM trailer GROUP BY movie_id
           ) AS A ON t.movie_id = A.movie_id  AND t.latestbydate = A.latestbydate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T07:13:38.753

如果您必须在 SQL 中完成这一切（而不是在您使用的任何后端或代码中，我实际上会推荐），那么您可能不得不依赖一些变量魔法。

本质上，您需要按日期对每个预告片进行“排名”，然后按预告片所属的电影对其进行“分区”。这些词在其他一些 SQL 风格（例如[PL/SQL](http://psoug.org/definition/PARTITION.htm)）中具有实际意义，但不幸的是在 MySQL 中没有本机功能。

您将要执行类似于[此 SO 帖子](https://stackoverflow.com/questions/3333665/mysql-rank-function)中提到的操作。一旦你得到按movie_id划分的“等级”，你只需选择`WHERE rank < 6`. 查询可能会变得非常混乱，并且以这种方式使用变量存在一些风险，但据我所知，这是严格使用 MySQL 查询的最佳方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T07:17:38.777

试试这个查询

```
SELECT * FROM industry
LEFT JOIN movie on movie.industry_id = industry.id
LEFT JOIN (
  SELECT 
  id as T_ID,
  name as T_Name,
  movie_id
  FROM trailer 
  INNER JOIN ( SELECT 
              MAX(id) as TID
              FROM trailer
              GROUP BY movie_id
             ) as t on t.TID = trailer.id
) as c on c.movie_id = movie.id; 
```

这是[演示](http://sqlfiddle.com/#!2/e10d5d/41)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-05T15:04:53.420

```
SELECT i.name, m.name, MAX(t.id) AS 'Latest Trailer ID', MAX(t.name) AS 'Latest Trailer'    
FROM industry i
INNER JOIN movie m ON(i.id = m.industry_id)
INNER JOIN trailer t ON(m.id = movie_id)
GROUP BY m.id 
```**

# mysql - mySql :: error in general variable error

> ID：14134365
> 
> 赞同：-1
> 
> 时间：2013-01-03T06:57:24.987
> 
> 标签：mysql, stored-procedures, navicat

> **可能重复：**
> [MySQL - Stred Procedure 中的语法错误](https://stackoverflow.com/questions/14134105/mysql-syntax-error-in-strored-procedure)

谢谢，但如果使用变量 ::::: 像这样：

```
 IF NOT EXISTS( SELECT ReferenceID as ExistedRefID  FROM filesrefrences WHERE RefrenceKey= pRefrenceKey) THEN
        INSERT INTO filesrefrences(RefrenceKey, RefrenceCount)
        VALUES(pRefrenceKey,1);
       SELECT LAST_INSERT_ID();
    ELSE
        UPDATE filesrefrences
        SET RefrenceCount= RefrenceCount+1
        WHERE ReferenceID= ExistedRefID;
        SELECT ExistedRefID;
    END IF 
```

它指的是 ExistedRefID 未知的执行错误，**我**该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:02:26.153

为什么不只是：

```
insert into filesreferences (RefrenceKey, RefrenceCount) values (pRefrenceKey, 1)
    on duplicate key update RefrenceCount= RefrenceCount+1; 
```

# android - 从资产文件夹中读取文件

> ID：14134370
> 
> 赞同：3
> 
> 时间：2013-01-03T06:57:48.600
> 
> 标签：android, java-io

我在文件夹中有一个大文本文件，`assets`我有一个按钮可以成功读取文件的下一行。但是，如果用户单击另一个按钮，我想阅读前一行。

将整个文件读入内存不是一种选择。文件行没有编号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:01:08.313

```
InputStream is = getResources().getAssets().open("abc.txt");
String result= convertStreamToString(is);

public static String convertStreamToString(InputStream is)
            throws IOException {
            Writer writer = new StringWriter();
        char[] buffer = new char[2048];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is,
                    "UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            is.close();
        }
        String text = writer.toString();
        return text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:14:16.927

如果您只需要跟踪前一行，则可以执行以下操作，在每次迭代中跟踪前一行（我假设您使用的是阅读器；对于本示例，`BufferedReader`）：

```
String previous = null, line; // null means no previous line
while (line = yourReader.readLine()) {
    // Do whatever with line
    // If you need the previous line, use:
    if (yourCondition) {
        if (previous != null) {
            // Do whatever with previous
        } else {
            // No previous line
        }
    }
    previous = line;
} 
```

如果您需要跟踪前一行以上，您可能必须将其扩展为一个数组，但如果您的文件很大，您将在内存中保留大量内存 - 就像您阅读整个文件，一旦你到达最后一行。

在 Java 或 Android 中没有简单的方法来读取前一行，只有下一行（因为在文件 I/O 中更容易向前而不是向后）。

我能想到的另一种选择是保留一个线标记（从 0 开始），并且随着您通过线前进，增加它。然后，要倒退，您必须再次逐行读取文件，直到到达该行减一。如果您需要倒退，请转到该新行减一，依此类推。这很可能是一项繁重的操作，但会满足您的需求。

**编辑：**如果以上都不起作用，还有[一种方法可以向后读取文件](https://stackoverflow.com/questions/6011345/read-a-file-line-by-line-in-reverse-order)，您可以在其中通过向前迭代来找到前一行。只是一个替代的想法，但绝对不是一个容易实施的想法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T07:02:51.003

```
public class LoadFromAltLoc extends Activity {  

    //a handle to the application's resources  
    private Resources resources;  
    //a string to output the contents of the files to LogCat  
    private String output;  

    /** Called when the activity is first created. */  
    @Override  
    public void onCreate(Bundle savedInstanceState)  
    {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  

        //get the application's resources  
        resources = getResources();  

        try  
        {  
            //Load the file from the raw folder - don't forget to OMIT the extension  
            output = LoadFile("from_raw_folder", true);  
            //output to LogCat  
            Log.i("test", output);  
        }  
        catch (IOException e)  
        {  
            //display an error toast message  
            Toast toast = Toast.makeText(this, "File: not found!", Toast.LENGTH_LONG);  
            toast.show();  
        }  

        try  
        {  
            //Load the file from assets folder - don't forget to INCLUDE the extension  
            output = LoadFile("from_assets_folder.pdf", false);  
            //output to LogCat  
            Log.i("test", output);  
        }  
        catch (IOException e)  
        {  
            //display an error toast message  
            Toast toast = Toast.makeText(this, "File: not found!", Toast.LENGTH_LONG);  
            toast.show();  
        }  
    }  

    //load file from apps res/raw folder or Assets folder  
    public String LoadFile(String fileName, boolean loadFromRawFolder) throws IOException  
    {  
        //Create a InputStream to read the file into  
        InputStream iS;  

        if (loadFromRawFolder)  
        {  
            //get the resource id from the file name  
            int rID = resources.getIdentifier("fortyonepost.com.lfas:raw/"+fileName, null, null);  
            //get the file as a stream  
            iS = resources.openRawResource(rID);  
        }  
        else  
        {  
            //get the file as a stream  
            iS = resources.getAssets().open(fileName);  
        }  

        //create a buffer that has the same size as the InputStream  
        byte[] buffer = new byte[iS.available()];  
        //read the text file as a stream, into the buffer  
        iS.read(buffer);  
        //create a output stream to write the buffer into  
        ByteArrayOutputStream oS = new ByteArrayOutputStream();  
        //write this buffer to the output stream  
        oS.write(buffer);  
        //Close the Input and Output streams  
        oS.close();  
        iS.close();  

        //return the output stream as a String  
        return oS.toString();  
    }  
} 
```

# javascript - 为什么这个 jquery 动画没有像它应该的那样旋转？

> ID：14134371
> 
> 赞同：2
> 
> 时间：2013-01-03T06:57:59.553
> 
> 标签：javascript, jquery, animation, rotation, jquery-animate

这个 .js 在[小提琴中完美运行](http://jsfiddle.net/djb3T/1/)

```
function animationLoop() {
    $("#ToBeAnimated").css({
        top: ($("#paperTrail").offset().top - parseInt($("#ToBeAnimated").height()) / 2),
        left: ($("#paperTrail").offset().left - parseInt($("#ToBeAnimated").width()) / 2)
    }).rotate(270);
    $("#ToBeAnimated").animate({
        top: $("#paperTrail").offset().top + $("#paperTrail").height() - $("#ToBeAnimated").height() / 2
      }, 1000, function() {
        $(this).animate({
            rotate: "180deg"
        }, function() {
            $("#ToBeAnimated").animate({
                left: $("#paperTrail").offset().left + $("#paperTrail").width() - $("#ToBeAnimated").width() / 2
            }, 1000, function() {
                $(this).animate({
                    rotate: "90deg"
                }, function() {
                    $("#ToBeAnimated").animate({
                        top: $("#paperTrail").offset().top - $("#ToBeAnimated").height() / 2
                    }, 1000, function() {
                        $(this).animate({
                            rotate: "0deg"
                        }, function() {
                            $("#ToBeAnimated").animate({
                                left: $("#ToBeAnimated").width() / 2
                            }, 1000, function() {
                                setTimeout(animationLoop, 1000);
                            });
                        });
                    });
                });

            });
        });
    });
}
animationLoop();​ 
```

但是在实际站点上，剪刀式旋转不起作用或以某种方式损坏...我已经检查过它...猜测并检查过...研究了可能的冲突...但是我卡住了！也许我错过了一些明显的东西？

感谢一百万的帮助！...要在现场观看动画，只需单击“剪辑！！！” 第一张优惠券底部的按钮！

[极端优惠券网络](http://www.extremecouponnetwork.com/brand-coupons.html)

更新：这与页面上有多个动画实例有关...当我查看[具有一个结果](http://extremecouponnetwork.com/children-toys.html)的页面时，它对我有用...但是...我仍然无法使其与许多项目一起使用在页面上（这是我真正追求的）......理想情况下......您点击的任何优惠券都会出现动画......目前动画仅适用于第一张优惠券......而且非常不稳定

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:51:40.613

您正在测试的小提琴使用的是 jQuery 版本 1.8.2。但是，在您的网页上，您使用的是 1.7.2 版。如果您将 fiddle 中的 jQuery 版本更改为 1.7.2，您将获得与页面上完全相同的错误行为（FF 中的生涩动画，IE 或 Chrome 中没有旋转）。

解决方案：更新您在项目中使用的 jQuery 版本！

# facebook - 无论我尝试什么，应用程序的图标都保持不变:(

> ID：14134381
> 
> 赞同：0
> 
> 时间：2013-01-03T06:58:40.923
> 
> 标签：facebook, icons

我有一个应用程序，在开发过程中我使用了一个 ogg 图像来识别应用程序。

然后，当应用程序完成后，我给了它自己的 ogg 图像。我注意到应用程序图标仍然是旧的。

好的，缓存了，所以使用了 FB linter。Linter 显示正确的图像。我猜到了问题。

在我自己的时间线上做了一个测试帖子，新图像出现了。欢呼。

但是，令人惊讶的是，如果其他人发布该应用程序，则会出现旧图像。WFT？！

好的，更改了我所有应用程序的所有图像，将所有内容通过 linter、apps.facebook.com url 和应用程序本身的 url。

所有在 linter 上显示正确的图像....

现在应该没问题了，我想。

但是，出乎意料的是，几天后有人发布了该应用程序的链接，瞧，旧图像再次出现...... $%&^#^$#@@@

我还能做什么？

帮助！， 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:35:21.713

哎呀，程序员错误....

应用程序图标改变了一切正常，但是当从应用程序制作墙贴时我忘记调整图像了....

羞耻，红头。，对不起.. :(

忘了它 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:04:05.873

我的猜测是这是一个缓存问题。尝试使用新的匿名 chrome 窗口（或以其他方式清空缓存）看看是否有帮助。

# image - Flash / Actionscript：如何在动态文本中插入图像（行内图像）？

> ID：14134392
> 
> 赞同：0
> 
> 时间：2013-01-03T06:59:49.727
> 
> 标签：image, flash, actionscript, inline

我想在应该是内联的动态文本框中插入图像。
**细节：**
我正在准备一个使用flash CS4的应用程序；该应用程序就像一个聊天室，它将显示对话的唯一区别；它将显示存储的消息（存储在 XML 文件中）。我想在文本正文中插入笑脸（情绪）（使用 html 标签），但问题是图像不是内联的（如在聊天室 [yahoo、hotmail 等]）。
我不知道该怎么做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:37:53.970

请将您的代码粘贴到您设置 dynamic-text-box.text 的位置

确保将整个文本包含在 html 大括号中，而不仅仅是图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T20:07:44.280

您可以使用标签将图像嵌入到任何 HTMLText 字段中。但是，图像必须从外部加载。您无法获取存储在库中的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:20:07.253

很好地解决了我的问题，但很遗憾我自己找到了解决方案：-P
我得到的最简单的解决方案是将我的 Flash CS4 更新为 Flash CS6；在 Flash CS6 中，文本 (TextField) 具有 TLF (Text Layout Framework) 等额外功能。通过使用 TLF，我可以在文本区域中插入图形，并且插入的图形也是内联的。
问题解决了 ：-）

# jquery - 图片加载后获取图片高度

> ID：14134393
> 
> 赞同：13
> 
> 时间：2013-01-03T06:59:56.470
> 
> 标签：jquery

我正在尝试在图像加载后获取图像高度。原因是 chrome 获得了错误的高度值，因为它在图像加载之前获得了高度。

```
var imgHeight = $("#pic25").height(); 
```

注意：我不应该`$(window).load(function(){`在这个上使用。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T07:02:50.440

```
$("img#pic25").load(function(){
  var height = $(this).height();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T07:04:53.457

您需要使用 onload( [`.load()`](http://api.jquery.com/load-event/)) 事件，因为 load 事件只会在 DOM 和相关资源（如图像）被加载后调用，因此它可以正常工作

```
$(body).load(function(){
  var height = $("#pic25").height();
}); 
```

这会工作

要检查要加载的特定图像，您可以像 @arvind 回答代码一样执行此操作

# android - facebook connect for android phonegap

> ID：14134394
> 
> 赞同：3
> 
> 时间：2013-01-03T07:00:11.840
> 
> 标签：android, cordova, phonegap-plugins

使用[phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect/)中的 facebook connect ，它在模拟器中正常工作，但在 android 设备中，它无法正常工作并发送消息。

```
 function login() {
            FB.login(
                     function(response) {
                     if (response.authResponse) {
                      me();
                     } else {
                     alert('not logged in');
                     }
                     },
                     { perms: "user_birthday,friends_birthday,email" }
                     );
        } 
```

**Cordova Facebook Connect 插件登录失败！Facebook 错误：android_key_not_configured：未配置此应用程序的 android 密钥哈希。**

请建议如何连接？

# objective-c - 带有从 XML 解析的格式化文本的 UITableView 单元格

> ID：14134395
> 
> 赞同：0
> 
> 时间：2013-01-03T07:00:20.420
> 
> 标签：objective-c, ios, uitableview, nsxmlparser

我正在使用 解析来自 URL 的 XML 文件，我解析的项目被添加到从中加载其数据`NSXMLParser`的数组中。`UITableView`除其他事项外，我正在解析这些事件发生的事件和日期的标题。这些项目被解析并添加到一个名为 的数组`stories`中。我的目标是让事件的标题成为我的 TableView 中每个单元格的主要文本，而日期是副标题。每个事件的标题都不需要格式化（即，如果 XML 文件显示为：“Event One”，那么这就是应该显示的内容）我使用这种方法成功地做到了这一点：

（`title`是 XML 中项目的标题，`stories`是 TableView 从中加载其数据的数组。）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]
        initWithStyle:UITableViewCellStyleSubtitle
        reuseIdentifier:MyIdentifier];
    }

    // Set up the cell
    NSUInteger storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
    cell.textLabel.text = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];

    return cell;
} 
```

但是，我确实需要格式化我解析的所有日期，我这样做了，我对完成工作`NSDateFormatter`后的日期格式感到满意。`NSDateFormatter`如果我不需要格式化我可以使用的日期：

```
cell.detailTextLabel.text = [[stories objectAtIndex: storyIndex] objectForKey: @"isodate"]; 
```

实现我的目标。一旦`NSDateFormatter`完成了它的工作，我就有了一个变量 (a `NSMutableString`) `currentDate`，用我的格式化日期的字符串值调用，使用控制台我可以看到这会为 XML 中的每个项目产生所需的结果。当我使用：

```
cell.textLabel.text = currentDate; 
```

最后，我的表格中的每个单元格都有 XML 文件中最后一项的日期（假设它看起来不错，格式正确）。我试过移动我的方法无济于事。如果您不介意将我指向正确的方向，我需要知道如何将变量的值包含在 a`currentDate`的字幕文本中`UITableView`，其中项目的标题和项目在单元格中的日期相互对应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:18:43.747

您可以将解析数据存储到具有***键值对*****的NSDictionary**中。在这里，您可以使用标题作为键和日期作为值，这样两个数据都将对应每个数据。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:37:59.983

几个想法：

1.  关于您的日期问题，听起来您将日期存储在一个名为`currentDate`. 并且鉴于您没有共享该代码，我认为您不是在 中这样做`cellForRowAtIndexPath`，而是在您的解析器或类似的东西中这样做。不幸的是，这会给表格中的每个单元格提供您解析的最后一行的日期）。你应该要么

    *   直接调用您的日期格式`cellForRowAtIndexPath`（或者，更好的是，调用一个进行日期格式设置的方法），特别是抓取`[[stories objectAtIndex: storyIndex] objectForKey: @"isodate"]`，格式化并`detailTextLabel.text`相应地设置；或者

    *   与其将格式化日期存储在单个`currentDate`变量中，不如为格式化日期添加一个字典键，并将其与您从 XML 解析的所有其他内容一起存储在可变字典中（例如，读入`isodate`、格式化字符串并将其保存回同一个字典使用唯一的密钥，也许`formattedDate`）。

2.  `NSUInteger storyIndex = indexPath.row;`如果您要获取与 tableview 的给定行关联的新闻项，则这是一种更常见的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:44:56.040

问题是线

```
NSUInteger storyIndex = [indexPath indexAtPosition: [indexPath length] - 1]; 
```

你应该使用 indexPath.row 代替，

```
cell.textLabel.text = [[stories objectAtIndex: indexPath.row] objectForKey: @"title"]; 
```*

# javascript - 使用偏移量计算 JavaScript 日期时间

> ID：14134396
> 
> 赞同：7
> 
> 时间：2013-01-03T07:00:24.930
> 
> 标签：javascript, date, datetime, extjs

我在 GMT 时区偏移计算中遇到了一些意想不到的结果。

我正在使用 ExtJS 日期类来帮助计算消息从 GMT 0 的服务器到达当前为 GMT +8 的用户本地计算机的时间。

我认为如果我计算了偏移量，然后以秒为单位将其添加到时间戳中，那么我可以使用以下计算来给我一个字符串以随意格式化。

```
var d = new Date((stamp + offset) * 1000); 
```

stamp 是以秒为单位的日期/时间，偏移量也是如此。

这将返回我所在位置的当前日期和时间，但加上 8 小时。如果我不添加偏移量，那么时间是正确的。

方法 new Date() 会自动给我当地时间的日期/时间吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T07:32:34.853

只需插入一个包含千分之一秒的 unix 时间戳。该 unix 时间戳应该是 UTC 0 并且 javascript 将查找客户端计算机的本地时区并进行计算。

正如您在[此](http://www.w3schools.com/jsref/jsref_obj_date.asp)链接后面看到的那样，有一些 UTC 方法可以为您提供没有本地时间偏移的时间。也许这可能是您搜索的内容（如果您真的想自己设置时区）。

编辑：

`new Date().getTimezoneOffset()`将向您展示本地时区和 utc 之间的差异，但您应该考虑使用 utc 方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-25T14:00:16.887

只需添加它以防其他人看起来更晚。可能是错误的，但可以满足我的需要。

我以秒为单位存储了用户的偏移量。

以秒为单位假设的偏移量更改`(offset * 1000)`以确保如果您的偏移量不是以秒为单位，则偏移量被转换为毫秒。

```
function offsetDate(offset){
            var d = new Date(new Date().getTime() + (offset * 1000));
            var hrs = d.getUTCHours();
            var mins = d.getUTCMinutes();
            var secs = d.getUTCSeconds();
            //simple output
            document.write(hrs + ":" + mins + ":" + secs); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T07:20:04.403

从外观上看，`stamp`是您的本地时间，包括时区偏移量。JavaScript 不知道服务器的时区，它（主要）是一种客户端语言。

# javafx-2 - 如何禁用 JavaFX 组的自动布局？

> ID：14134397
> 
> 赞同：3
> 
> 时间：2013-01-03T07:00:43.630
> 
> 标签：javafx-2

我有一个组，我想完全自己管理其坐标转换。内置`layoutX`和`layoutY`属性搞砸了，我想完全禁用它们。

似乎至少有两种方法可以做到这一点。`relocate(0,0)`或者只是将属性设置为 0。但是在`Group`构造中这样做还为时过早；反正那里的值是0。

那么：我如何告诉`Group`他们不要打扰布局？

当然，我也可以保留 layoutX|Y 原样，并在我自己的变换中对其进行补偿。这就是B计划。

参考。[JavaFX 节点](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T08:39:17.010

这个问题有点难以理解，但我猜你在某种托管布局[窗格中有一个](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)[Group](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)（例如[StackPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html)或[VBox](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/VBox.html)），但你不希望 Group 的布局值由布局窗格设置- 在这种情况下，您可以使组[不受管理](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setManaged%28boolean%29)。

例如，在下面的代码中，组的非托管性质使其具有 0,0 的布局坐标，而不是 50,60 的布局坐标，StackPane 通常会将其设置为在父 StackPane 内居中。

```
Group group = new Group(new Rectangle(100, 80));
group.setManaged(false);
StackPane container = new StackPane();
container.setMinSize(StackPane.USE_PREF_SIZE, StackPane.USE_PREF_SIZE);
container.setPrefSize(200, 200);
container.setMaxSize(StackPane.USE_PREF_SIZE, StackPane.USE_PREF_SIZE);
container.getChildren().add(group); 
```

# c# - 将值从子窗体转移到父窗体 c#.net

> ID：14134404
> 
> 赞同：1
> 
> 时间：2013-01-03T07:01:29.163
> 
> 标签：c#, winforms

> **可能重复：**
> [如何将标志从子窗体传递给父窗体？](https://stackoverflow.com/questions/7172448/how-to-pass-flag-from-childform-to-parent)

任何机构都可以帮助我将值从 childForm 发送到 parentForm。我已经在 parentForm 中声明了一个 int id 变量，现在我想将 textbox1.Text 值从 childForm 发送到 parentForm 的那个 int 变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T07:05:18.950

您可以将 id 设为公共属性并以子形式分配值。

**以父形式**

```
//Declare public property 
public string ID { get; set; }

//Create child form in some method.
Form2 form2 = new Form2(this);
form2.Show(); 
```

**以儿童形式**

```
Form1 m_parent ;
public Form2(Form1 frm1)
{ 
     InitializeComponent(); 
     m_parent = frm1; 
}

m_parent.ID = textbox1.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:03:21.507

您可以在子窗体中编写一个获取属性，并在关闭子窗体后在父窗体中检索它

将引用变量从父表单发送到子表单

# jmeter - 如何每天在指定时间运行 JMETER

> ID：14134406
> 
> 赞同：0
> 
> 时间：2013-01-03T07:01:37.797
> 
> 标签：jmeter

我想每天下午 12 点运行我的 JMETER 测试场景，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:28:02.947

您可以使用 linux Cron 任务或 Windows 等效项。您也可以使用调度程序从 jmeter 执行此操作，但这是一种调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T06:02:33.390

您可以使用 Jenkins，它是非常酷的东西，仅针对此类任务而设计。

# c - C读取写入文件

> ID：14134409
> 
> 赞同：1
> 
> 时间：2013-01-03T07:02:06.700
> 
> 标签：c, file

我编写的程序获取一个文件的大小，从该文件中读取 partSize 个字节，并将 partSize 个字节写入一个新创建的文件。问题是它只适用于小文本文件。如果我尝试使用几百行的文本文件或图片运行程序，则会出现分段错误，并且将明显少于 partSize 的字节存储到新文件中。

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/stat.h> 
#include <sys/types.h> 
#include <errno.h>

int main()
{
    int createDescriptor;
    int openDescriptorOriginal;
    int closeCreateDescriptor;

    //   char fileNameOriginal[] = "picture.jpg";
    char fileNameOriginal[] = "myFile.txt";

    int parts;
    int partSize;

    parts=2;

    int bytesRemaining;
    int partNumber;
    char BUFFER[512];
    int readDescriptor;

    int buffer[1];
    oid *pbuffer = &buffer;

    int bytes, infile, outfile;

    if ((openDescriptorOriginal = open(fileNameOriginal, O_RDONLY )) == -1)
    {
        printf("Error opening %s", fileNameOriginal);
        exit(EXIT_FAILURE);
    }

    struct stat buf;
    int r = fstat(openDescriptorOriginal, &buf);
    if (r)
    {
        fprintf(stderr, "error: fstat: %s\n", (char *) strerror(errno));
        exit(1);
    }

    int originalFileSize = buf.st_size;
    printf("The file is %.9f bytes large.\n",(double)originalFileSize);

    partSize = ((originalFileSize + parts) - 1)/parts;
    printf("Part size: %.9f bytes large\n",(double)partSize);
    umask(0000);
    //create and open new file
    if ( (outfile = open("NewPicture.jpg", O_CREAT|O_WRONLY,0777))==-1 ) 
    {
        printf("ERROR %s\n", "NewPicture.jpg");
    }

    ssize_t count, total;
    total = 0;
    char *bufff = BUFFER;
    while (partSize) {
        count = read(openDescriptorOriginal, bufff, partSize);
        if (count < 0) {
            break;
        }
        if (count == 0)
            break;
        bufff += count;
        total += count;
        partSize -= count;

    }

    write (outfile, BUFFER, total);
    printf("\n");

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:04:58.060

您仅使用 512 字节的缓冲区。

`BUFFER[512];`

如果该文件中的内容超出此限制，则会发生段错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:05:45.543

`count = read(openDescriptorOriginal, bufff, partSize);` **在这一行中，第三个参数是错误**的，

在您的代码中，您定义 了一次只从文件中读取 511 个字节的`char BUFFER[512];`用途。`BUFFER`

```
count = read(openDescriptorOriginal, BUFFER, 512); 
```

**不使用大赞的原因：**
如果`partSize` **> then** `512`那么可能会发生缓冲区溢出（[**缓冲区溢出**](http://en.wikipedia.org/wiki/Buffer_overflow)）。这就是为什么您不适用于大文件的原因。因为该`read()`函数应尝试`partSize`从与打开的文件描述符`openDescriptorOriginal`fildes 关联的文件中读取字节到由 BUFFER 指向的缓冲区中，该缓冲区的长度仅为`512`字节长。此缓冲区溢出是程序中分段错误的原因。

如果文件大小很小，那么代码将起作用。

* * *

我已经更正了您的代码：

```
ssize_t count=0, total=0;
total = 0;
char *bufff = calloc(partSize+1, sizeof(char));
char *b = bufff;
while (partSize > 0) {
    count = read(openDescriptorOriginal, b, 512);

    if (count < 0) {
        break;
    }
    if (count == 0)
        break;
    b = b + count;
    total = total + count;
    partSize = partSize - count; 

}
write (outfile, bufff, total);
close(openDescriptorOriginal);
close(outfile); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T07:05:49.947

你的缓冲区太小了。您需要一个更大的缓冲区变量。如果您的文件大小超过 512 字节，则会出现段错误。

理想情况下，您应该以固定的块读取文件。也就是说，每次读取可能读取 30-40 或恒定数量的字符，然后将其写入新文件。重复直到读取完整的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:12:01.843

这在这里没有意义

```
partSize = ((originalFileSize + parts) - 1)/parts; 
```

您已初始化`parts`为 2，然后将原始文件大小加 2 并减去 1，然后再除以 2，即使在一天结束时您的缓冲区大小为 512？

您需要做的是在从文件中读取并检查实际读取了多少字节时使用缓冲区大小，从原始文件大小中减去该值，重复直到实际读取的字节小于缓冲区大小和/或何时原始文件大小为 0。

如果您使用文件缓冲 I/O 也可能会更好`fopen/fread/fwrite/fclose`- 如果您没有任何特殊原因要使用非缓冲 I/O。

# web-services - REST 如何处理后处理/包括相关资源？

> ID：14134415
> 
> 赞同：0
> 
> 时间：2013-01-03T07:02:36.063
> 
> 标签：web-services, rest, computer-architecture

我有一个论坛的网络服务，我有以下两个资源：

*   /threads/frontpage，返回属于我网站首页的所有帖子
*   /users/1、users/2 等返回数字指定的用户。

而且我想让它让用户可以要求“首页上的所有线程，以及发布到这些线程的所有用户”。

通常我会将它分成多个请求，但这需要更多时间。

我唯一的想法是制作这样的网址：

/threads/frontpage?includePostingUsers=true

在某种程度上，它采用原始结果，然后使用它来包含附加信息，在这种情况下，是发布线程的用户。

但这似乎不是很 RESTful。里面有一个动词，感觉很别扭。我将如何 RESTfully 做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:06:05.783

在查询参数中包含动词不是非 RESTful 的。我想说的是，拥有干净的资源和动词是很常见的（而且更重要），但要在查询参数中包含更多涉及的功能，就像你对`?includePostingUsers=true`.

Apigee 发布了一本关于制作 Restful API 的实用小册子：

*   [Web API 设计 - 开发人员喜爱的制作界面](http://info.apigee.com/Portals/62317/docs/web%20api.pdf)(PDF)，以及具有真实世界观察的相关视频：[https ://www.youtube.com/watch?v=QpAhXa12xvU#t=39m](https://www.youtube.com/watch?v=QpAhXa12xvU#t=39m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:11:58.283

如果您不想`?includePostingUsers=true`在 url 中显示，请使用 Post 请求。为什么不直接传递参数

```
/threads/frontpage?uid=1 
```

# shell - 使用join比较unix中的两个文件

> ID：14134422
> 
> 赞同：2
> 
> 时间：2013-01-03T07:03:15.807
> 
> 标签：shell, unix, join, awk

我正在开发solaris unix。我有两个文件：

```
> cat temp
2
8
6
> cat temp2
1
2
3
4
5
6
7
8
9
> 
```

现在我需要 temp2 中存在于 temp 中的所有行：我遇到了[这个](http://theunixshell.blogspot.com/2012/12/file-comparisons-using-awk-match-columns.html)并尝试了以下命令。

```
> nawk 'FNR==NR{a[$0];next}($1 in a)' temp temp2
2
6
8
> 
```

这非常有效。然后我还看到了使用 join 的方法，[其中](http://theunixshell.blogspot.com/2013/01/using-join-command-in-unix.html) 说（以及手册页）“默认情况下，当我们没有明确指定字段编号时，join 命令匹配第一个字段上的文件”所以我认为如果我给`join temp temp2`我会得到

```
2
6
8 
```

但这是我得到的！

```
> join temp temp2
2
8
> 
```

如果默认连接匹配第一列，谁能告诉我为什么这里缺少 6？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:10:12.180

您需要在运行之前对文件进行排序`join`以匹配它们。

可以使用以下方法完成：

```
join <(sort temp) <(sort temp2) 
```

我的输出是：

```
2
6
8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:50:02.673

[`comm`](http://man.cx/comm)也是一个合适的工具，但它也需要排序的文件。

```
comm -12 <(sort temp) <(sort temp2) 
```

将在 bash 或 ksh 中工作

# android - 检查 SMS 在 unity3D (ios, android) 中是否可用

> ID：14134424
> 
> 赞同：2
> 
> 时间：2013-01-03T07:03:22.387
> 
> 标签：android, ios, mobile, unity3d

我试图找到一种统一的方法来检查设备是否支持短信。我正在使用`Etcetera`适用于 Android 和 IOS 的插件。它在 IOS 中就像一个魅力，但在 Android 中，`EtceteraAndroid.isSMSComposerAvailable()`即使您的设备支持 SMS，它也总是给出“假”。这是此插件中的一个错误。

有没有其他方法可以在 unity3D 中检测短信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T05:42:37.023

Prime31 **EtceteraAndroid**用于`hasSystemFeature(PackageManager.FEATURE_TELEPHONY)`检查目标设备上是否存在电话功能。

`PackageManager.FEATURE_TELEPHONY`从 Android API 级别 7（**Android OS 2.1**）开始工作

`hasSystemFeature`从 Android API 级别 5（**Android OS 2.0**）开始工作

您可以在目标手机上报告您的操作系统版本吗？

# java - Javascript代码分析器开源代码或插件

> ID：14134425
> 
> 赞同：3
> 
> 时间：2013-01-03T07:03:22.373
> 
> 标签：java, javascript, jquery, code-analysis, static-code-analysis

我编写了一个 API 并定义了一个用户需要在特定条件下调用的方法。假设用户正在创建一个视频应用程序，那么他应该在他的代码中实现静音功能（在 javascript API 或文件中定义）。现在我正在寻找一个代码分析器，通过它我可以检查他是否以正确的方式实现了这个（在他的 JS 文件中）。据我所知，我认为这将是一个自定义规则，我想用 Java 制作这个项目，这样我就可以获取源代码（这是一个 js 文件或 html 文件）并对那个源代码进行分析。

那么有没有可用的代码分析器工具？

我怎样才能编译这个想法？

可能的方法是什么？

非常感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:07:53.430

你应该看看[CheckStyle](http://checkstyle.sourceforge.net/)。它将满足您的需求。这是很多开箱即用的任务，例如：

```
<module name="VisibilityModifier">
    <property name="packageAllowed" value="true"/>
</module> 
```

但是你可以[扩展](http://checkstyle.sourceforge.net/writingchecks.html)它。

您用 Java 编写自定义规则，但它会检查任何内容。在我们的项目中，我们使用它来检查 xml、jsp、... 文件的有效性。

# c++ - C ++结构重新解释_cast

> ID：14134426
> 
> 赞同：3
> 
> 时间：2013-01-03T07:03:30.913
> 
> 标签：c++

假设有两个结构 A 和 B。它们有一个共同的结构 C。我想知道将 reinterpret_cast 调用到 A 或 B 到 C 是否安全。如果不是，有什么方法可以在不影响性能的情况下这样做？

```
struct C
{
    string m_c1;
    int32_t m_c2;
    double m_c3;
    string m_c4;
};

struct A
{
    C m_a1;
    string m_a2;
    int32_t m_a3;
};

struct B
{
    C m_b1;
    string m_b2;
    int32_t m_b3;
    double m_b4;
};
int main(int argc,char *argv[])
{
        A a;
        a.m_a1.m_c1="A";
        a.m_a1.m_c4="AA";

        B b;
        b.m_b1.m_c1="B";
        b.m_b1.m_c4="BB";

        C* pc = reinterpret_cast<C*>(&a);
        cout << pc->m_c1 << " " << pc->m_c4 << endl;

        pc = reinterpret_cast<C*>(&b);
        cout << pc->m_c1 << " " << pc->m_c4 << endl;

        return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:38:27.720

正如 Mike DeSimone 指出的那样，`string`不能保证类是`standard-layout`类，因此类`C`不是`standard-layout`，这意味着您根本无法保证内存布局。所以**不安全**。只有将字符串更改为 a`(const) char*`才能保证安全。

即便如此，只要类的布局保持不变（您不能更改成员的顺序或更改它们的访问说明符），并且类保持没有任何 vtable，这才是“安全的”一种编译器将生成显示您想要的行为的代码的方式。

这就是软件开发人员很少能够提供的两种保证。像这样写的代码也很难理解。另一个开发人员（或一个月后的同一开发人员）可能会忽略此代码（或根本不理解它），并进行所需的更改，然后代码突然损坏，您手头上出现了一些难以捕捉的错误。

`A`并且`B`是允许访问 a `C`（或 的某些成员`C`）的类。更具可读性因此更安全的解决方案是：

*   为两者创建一个访问器`A`和`B`，这可能会被内联并且不会导致性能损失。
*   如果有任何继承原因，请使用简单继承。要么`A`and `B` *is-a* `ClassThatHasAC`要么`A`and `B` *is-a* `C`只要没有虚函数，您可能也不会在这里看到任何性能问题。在这两种情况下，访问器可能会为您提供好处，而无需任何性能成本。

首先创建一些简单易读的代码，并衡量性能。**如果这个 C 访问成本太高，请优化。**但是，如果您的优化归结为重新解释演员表技巧，请确保周围有很多警告标志，以确保没有人踏上这个诱杀陷阱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:06:23.957

为什么不从 C 继承 A、B 并使用它`static_cast`呢？应该更安全/更清洁。

事实上，在你的情况下，你根本不需要演员，你应该能够将 A 或 B ptrs 分配给`C*`

# android - 如何登录 BB 10 的 bar 文件（使用 android）

> ID：14134428
> 
> 赞同：1
> 
> 时间：2013-01-03T07:03:46.577
> 
> 标签：android, blackberry-eclipse-plugin, blackberry-10, blackberry-android

您好，我已尝试登录 bar 文件，因为我已完成以下阶段

第一个 Windows -> Preferences -> Blackberry -> Blackberry Tools SDK -> Bar signer

在我有认证的应用程序

它看起来像下面

![在此处输入图像描述](../Images/d60905ea4980deb2d44c7bdedd5a1e20.png) 右键点击android项目->黑莓工具->登录APP世界

现在您可以看到生成的 bar 文件没有任何错误，如下所示

![在此处输入图像描述](../Images/dcc88ef1272d57c27b1d276d827965ef.png)

但是当我制作这个条形文件的 zip 并尝试上传到黑莓应用程序世界时，我遇到了这样的错误

C![在此处输入图像描述](../Images/7511c82a15ce83b8ba7c16ff27fbfeea.png)

任何人都可以建议我如何解决这个错误，因为我已经用证书签名但我仍然收到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:39:54.843

用 WinZip/WinRar 打开 BAR 文件，检查是否有 META-INF 文件夹。在里面你应该找到 5 个文件（如果 BAR 签名正确）。

验证 BAR 签名正确后，您可以手动上传 BAR 文件（而不是使用带有批量导入文件选项的 ZIP 文件）。

向下滚动 Add Release 页面并单击 Add file bundle，输入 bundle 名称，选择平台 QNX，Min Supported version 10.0.0，选择 All touch as supported devices 并上传 BAR 文件。

# xml - 将分组元素的值作为逗号分隔在 XSLT 中的 For Each 循环中

> ID：14134434
> 
> 赞同：0
> 
> 时间：2013-01-03T07:04:08.660
> 
> 标签：xml, xslt, xslt-1.0

我有一个这样的 XML

```
<filters>
      <ISP_WebItem FILTER="Type" FILTERNAME="Farvet" UNITCODE="" />
      <ISP_WebItem FILTER="Antal i pakke" FILTERNAME="1" UNITCODE="Farvepatro" />
      <ISP_WebItem FILTER="Farve" FILTERNAME="Rød" UNITCODE="" />
      <ISP_WebItem FILTER="Farve" FILTERNAME="Blå" UNITCODE="" />
      <ISP_WebItem FILTER="Farve" FILTERNAME="Gul" UNITCODE="" />
      <ISP_WebItem FILTER="Printer mærke" FILTERNAME="HP" UNITCODE="" />
</filters> 
```

我想将此 XML 转换为类似这样的 HTML

```
Type          = Farvet
Antal i pakke = 1
farve         =Rød,Blå,Gul etc
Printer mærke =HP 
```

您可以看到三个“FILTER”属性具有相同的值“Farve”。在我的 HTML 中，我希望它们以逗号分隔。作为执行此操作的第一步，我使用 Muenchian_grouping 对该 XML 的元素进行了分组，这样如果两个或多个 FILTER 属性相同，它们就会相邻。

然后我做了这样的事情

```
 <xsl:for-each select="$filt-grouped-formatted//ISP_WebItem[position() = 1 or @FILTER != preceding-sibling::*[1]/@FILTER ]">
              <xsl:variable name="current_filter" select="@FILTER" />
              <tr>
                <td width="200px">
                  <xsl:value-of select="$current_filter"/>:
                </td>
                <td>
                  <xsl:value-of select="@FILTERNAME"/>
                  <xsl:if test="@UNITCODE != ''">
                    <xsl:text> </xsl:text>
                    <xsl:value-of select="@UNITCODE"/>
                  </xsl:if>
                  <xsl:variable name="current_grouped_filter" select="$filt-grouped-formatted[@FILTER = $current_filter]" />

                  <xsl:if test="count($current_grouped_filter) &gt; 0">
                    <textarea>
                      <xsl:copy-of select="$current_grouped_filter"/>
                    </textarea>
                    <xsl:text>, </xsl:text>
                    <xsl:for-each select="$current_grouped_filter">
                      <xsl:value-of select="@FILTERNAME"/>
                      <xsl:if test="@UNITCODE != ''">
                        <xsl:text> </xsl:text>
                        <xsl:value-of select="@UNITCODE"/>
                      </xsl:if>
               <xsl:if test="count($current_grouped_filter) > position()">,</xsl:if>
                    </xsl:for-each>
                  </xsl:if>
                </td>
              </tr>
            </xsl:for-each> 
```

唯一我无法实现的是分组元素没有出现。任何人都可以建议我在代码中进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:10:47.263

[实际上，使用现有的分组键](https://stackoverflow.com/questions/14121421/group-xml-elements-by-attribute/14121720#14121720)一步完成此操作比先分组然后转换更容易。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:exslt="http://exslt.org/common"
                exclude-result-prefixes="exslt">
  <xsl:strip-space elements="*"/>
  <xsl:output method="text" />
  <xsl:key name="itemByFilter" match="ISP_WebItem" use="@FILTER" />

  <xsl:variable name="filt">
    <filters>
      <ISP_WebItem FILTER="Farve" FILTERNAME="Transparent" UNITCODE="" />
      <ISP_WebItem FILTER="Antal" FILTERNAME="10" UNITCODE="mapper" />
      <ISP_WebItem FILTER="Farve" FILTERNAME="blue" UNITCODE="" />
    </filters>
  </xsl:variable>

  <xsl:template match="/">
    <xsl:for-each select="exslt:node-set($filt)/filters">
      <xsl:apply-templates select="ISP_WebItem[
        generate-id() = generate-id(key('itemByFilter', @FILTER)[1])]" />
    </xsl:for-each>
  </xsl:template>

  <xsl:template match="ISP_WebItem">
    <xsl:value-of select="@FILTER" />
    <xsl:text> = </xsl:text>
    <xsl:for-each select="key('itemByFilter', @FILTER)">
      <xsl:if test="position() &gt; 1">,</xsl:if>
      <xsl:value-of select="@FILTERNAME" />
    </xsl:for-each>
    <xsl:text>&#10;</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:58:49.070

需要[Muenchian_grouping](http://en.wikipedia.org/wiki/Muenchian_grouping)进行分组，勾选这个

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:param name="versionParam" select="'1.0'"/>

    <xsl:key name="groups" match="ISP_WebItem" use="@FILTER" />
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/filters">
         <xsl:for-each select="//ISP_WebItem[generate-id() = generate-id(key('groups',@FILTER))]">
            <xsl:value-of select="@FILTER"/> = <xsl:value-of select="@FILTERNAME"/> 
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# ios - 在运行时将 iPhone 上 Document 中的所有文件添加到复制包资源中

> ID：14134436
> 
> 赞同：0
> 
> 时间：2013-01-03T07:04:15.920
> 
> 标签：ios, xcode, import, runtime, resourcebundle

我想在运行时将 iPhone 上 Document 中的所有 JPEG 文件添加到复制包资源中。可能吗？如何？我的 plist 是 FrameMarkers-Info.plist。我可以把你的代码放在哪里。当我添加它时，它告诉我错误。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>en</string>
    <key>CFBundleDisplayName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundleDocumentTypes</key>
    <array/>
    <key>CFBundleExecutable</key>
    <string>${EXECUTABLE_NAME}</string>
    <key>CFBundleIconFile</key>
    <string>icon_vuforia_57x57.png</string>
    <key>CFBundleIconFiles</key>
    <array>
        <string>icon_vuforia_57x57.png</string>
        <string>icon_vuforia_114x114.png</string>
        <string>icon_vuforia_72x72.png</string>
    </array>
    <key>CFBundleIcons</key>
    <dict>
        <key>CFBundlePrimaryIcon</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>icon_vuforia_57x57.png</string>
                <string>icon_vuforia_114x114.png</string>
                <string>icon_vuforia_72x72.png</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <false/>
        </dict>
    </dict>
    <key>CFBundleIdentifier</key>
    <string>th.ac.kmitl.ce.nwlab.${PRODUCT_NAME:rfc1034identifier}</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleURLTypes</key>
    <array/>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>UIStatusBarHidden</key>
    <true/>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
    </array>
    <key>UTExportedTypeDeclarations</key>
    <array/>
    <key>UTImportedTypeDeclarations</key>
    <array/>
</dict>

</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:32:31.573

`Maintain count``images`你`added`说`int count`的`class memember`。_

在 viewDidLoad

```
 count = 0; 
```

现在`adding`（保存）`Images increase count`。每个时间`new count` `name image`文件将是`saved`可以轻松管理的：

```
 NSString *filepath1 = [NSString stringWithFormat:@"%@/Image%03d",documentDirPath,count];
 [imgData writeToFile:filepath1 atomically:YES];
 count ++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:11:14.550

是的。您可以将以下数据保存在 .plist 文件中。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>

    <dict>
        <key>name</key>
        <string>images.jpg</string>
    </dict>
    <dict>
        <key>name</key>
        <string>images1.jpg</string>
    </dict>
    <dict>
        <key>name</key>
        <string>images2.jpg</string>
    </dict>
    <dict>
        <key>name</key>
        <string>images3.jpg</string>
    </dict>
    <dict>
        <key>name</key>
        <string>images4.jpg</string>
    </dict>
    <dict>
        <key>name</key>
        <string>images5.jpg</string>
    </dict>
    <dict>
        <key>name</key>
        <string>images6.jpg</string>
    </dict>
    <dict>
        <key>name</key>
        <string>images7.jpg</string>
    </dict>
</array>
</plist> 
```

我想这会对你有所帮助。

# asp.net - 在 MVC4 中创建自己的 VirtualPathProvider？

> ID：14134439
> 
> 赞同：4
> 
> 时间：2013-01-03T07:04:24.177
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4, partial-views

我正在努力从图书馆获得一些观点到主要项目。我开始在这里阅读有关创建自己的 VirtualPathProvider 实现的信息：[Using VirtualPathProvider to load ASP.NET MVC views from DLLs](https://stackoverflow.com/questions/236972/using-virtualpathprovider-to-load-asp-net-mvc-views-from-dlls)

我必须设置我的 view = EmbbebedResource 才能从库中获取资源。但是现在又抛出了另一个错误。

在我的部分视图的标题中，我有以下内容：

```
@model Contoso.ExercisesLibrary.AbsoluteArithmetic.Problem1 
```

并且错误说：外部组件已引发异常。c:\Users\Oscar\AppData\Local\Temp\Temporary ASP.NET Files\root\4f78c765\7f9a47c6\App_Web_contoso.exerciseslibrary.absolutearithmetic.view1.cshtml.38e14c22.y-yjyt6g.0.cs(46)：错误 CS0103 ：当前上下文中不存在名称“模型”

我不知道为什么编译器会说无法识别我的模型。当我处于设计模式时，我可以看到编译器检查正常。

检查图像

![在此处输入图像描述](../Images/df904ee7be07af73af18f5a1fd52af7d.png)

我做错了什么或者我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T07:09:47.300

尝试将`@inherits`指令添加到剃刀视图的顶部：

```
@inherits System.Web.Mvc.WebViewPage
@model Contoso.ExercisesLibrary.AbsoluteArithmetic.Problem1 
```

您需要这样做的原因是您的视图来自嵌入式资源，而不是来自标准`~/Views`位置。如您所知，里面`~/Views`有一个名为 web.config 的文件。在这个文件里面有一个`pageBaseType="System.Web.Mvc.WebViewPage"`指令，指示里面的所有 Razor 文件`~/Views`都应该从这个基类型继承。但是由于您的视图现在来自未知位置，因此您没有指定它应该是`System.Web.Mvc.WebViewPage`. 并且所有 MVC 特定的东西，例如模型、HTML 助手，......都在这个基类中定义。+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T05:19:15.743

我遇到了这个问题“当前上下文中不存在名称'模型'”。我所做的是将相同的“区域”文件夹结构（来自我的嵌入式 mvc 项目）添加到我的主 MVC 项目（Areas/AnualReports/Views/）并复制 web.config（默认 web.config 来自视图文件夹，而不是来自根目录的那个） ) 到解决问题的 Views 文件夹。我不确定这是否适用于您的情况。

更新：将 web.config（从视图文件夹）添加到主 MVC 项目中的根“区域”文件夹也可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T07:08:35.103

我和你有同样的问题，所以在所有搜索之后我得到了有效的解决方案

创建您自己的基于 WebViewPage 的抽象类（模型通用和非通用）

```
public abstract class MyOwnViewPage<TModel> : WebViewPage<TModel> { }

public abstract class MyOwnViewPage : WebViewPage {   } 
```

接下来创建基于 VirtualFile 的类或嵌入式视图

```
class AssemblyResourceFile : VirtualFile
    {
        private readonly IDictionary<string, Assembly> _nameAssemblyCache;
        private readonly string _assemblyPath;
        private readonly string _webViewPageClassName;
        public string LayoutPath { get; set; }
        public string ViewStartPath { get; set; }

        public AssemblyResourceFile(IDictionary<string, Assembly> nameAssemblyCache, string virtualPath) :
            base(virtualPath)
        {
            _nameAssemblyCache = nameAssemblyCache;
            _assemblyPath = VirtualPathUtility.ToAppRelative(virtualPath);
            LayoutPath = "~/Views/Shared/_Layout.cshtml";
            ViewStartPath = "~/Views/_ViewStart.cshtml";
            _webViewPageClassName = typeofMyOwnViewPage).ToString();
        }

        // Please change Open method for your scenario
        public override Stream Open()
        {
            string[] parts = _assemblyPath.Split(new[] { '/' }, 4);    

            string assemblyName = parts[2];
            string resourceName = parts[3].Replace('/', '.');

            Assembly assembly;

            lock (_nameAssemblyCache)
            {
                if (!_nameAssemblyCache.TryGetValue(assemblyName, out assembly))
                {
                    var assemblyPath = Path.Combine(HttpRuntime.BinDirectory, assemblyName);
                    assembly = Assembly.LoadFrom(assemblyPath);

                    _nameAssemblyCache[assemblyName] = assembly;
                }
            }

            Stream resourceStream = null;

            if (assembly != null)
            {
                 resourceStream = assembly.GetManifestResourceStream(resourceName);

                if (resourceName.EndsWith(".cshtml"))
                {
                    //the trick is here. We must correct our embedded view
                    resourceStream = CorrectView(resourceName, resourceStream);
                }
            }

            return resourceStream;
        }

        public Stream CorrectView(string virtualPath, Stream stream)
        {
            var reader = new StreamReader(stream, Encoding.UTF8);
            var view = reader.ReadToEnd();
            stream.Close();
            var ourStream = new MemoryStream();
            var writer = new StreamWriter(ourStream, Encoding.UTF8);

            var modelString = "";
            var modelPos = view.IndexOf("@model");
            if (modelPos != -1)
            {
                writer.Write(view.Substring(0, modelPos));
                var modelEndPos = view.IndexOfAny(new[] { '\r', '\n' }, modelPos);
                modelString = view.Substring(modelPos, modelEndPos - modelPos);
                view = view.Remove(0, modelEndPos);
            }

            writer.WriteLine("@using System.Web.Mvc");
            writer.WriteLine("@using System.Web.Mvc.Ajax");
            writer.WriteLine("@using System.Web.Mvc.Html");
            writer.WriteLine("@using System.Web.Routing");

            var basePrefix = "@inherits " + _webViewPageClassName;

            if (virtualPath.ToLower().Contains("_viewstart"))
            {
                writer.WriteLine("@inherits System.Web.WebPages.StartPage");
            }
            else if (modelString == "@model object")
            {
                writer.WriteLine(basePrefix + "<dynamic>");
            }
            else if (!string.IsNullOrEmpty(modelString))
            {
                writer.WriteLine(basePrefix + "<" + modelString.Substring(7) + ">");
            }
            else
            {
                writer.WriteLine(basePrefix);
            }

            writer.Write(view);
            writer.Flush();
            ourStream.Position = 0;
            return ourStream;
        }
    } 
```

接下来创建基于 VirtualPathProvider 的类（根据您的目的对其进行修改）

```
public class AssemblyResPathProvider : VirtualPathProvider
    {
        private readonly Dictionary<string, Assembly> _nameAssemblyCache;

        private string _layoutPath;
        private string _viewstartPath;

        public AssemblyResPathProvider(string layout, string viewstart)
        {
            _layoutPath = layout;
            _viewstartPath = viewstart;

            _nameAssemblyCache = new Dictionary<string, Assembly>(StringComparer.InvariantCultureIgnoreCase);
        }

      private bool IsAppResourcePath(string virtualPath)
        {
            string checkPath = VirtualPathUtility.ToAppRelative(virtualPath);

            bool bres1 = checkPath.StartsWith("~/App_Resource/",
                                         StringComparison.InvariantCultureIgnoreCase);

            bool bres2 = checkPath.StartsWith("/App_Resource/",
                                         StringComparison.InvariantCultureIgnoreCase);

        //todo: fix this    
            if (checkPath.EndsWith("_ViewStart.cshtml"))
            {
                return false;
            }

            if (checkPath.EndsWith("_ViewStart.vbhtml"))
            {
                return false;
            }

            return ((bres1 || bres2));

        }

        public override bool FileExists(string virtualPath)
        {
            return (IsAppResourcePath(virtualPath) ||
                    base.FileExists(virtualPath));
        }

        public override VirtualFile GetFile(string virtualPath)
        {
            if (IsAppResourcePath(virtualPath))
            {
        // creating AssemblyResourceFile instance
                return new AssemblyResourceFile(_nameAssemblyCache, virtualPath,_layoutPath,virtualPath);
            }

            return base.GetFile(virtualPath);
        }

        public override CacheDependency GetCacheDependency(
            string virtualPath,
            IEnumerable virtualPathDependencies,
            DateTime utcStart)
        {
            if (IsAppResourcePath(virtualPath))
            {
                return null;
            }

            return base.GetCacheDependency(virtualPath,
                                           virtualPathDependencies, utcStart);
        }

    } 
```

最后在 global.asax 中注册您的 AssemblyResPathProvider

```
string  _layoutPath = "~/Views/Shared/_Layout.cshtml";
string  _viewstarPath = "~/Views/_ViewStart.cshtml";
HostingEnvironment.RegisterVirtualPathProvider(new AssemblyResPathProvider(_layoutPath,_viewstarPath)); 
```

这不是理想的解决方案，但它对我有用。干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:07:14.840

就我而言，解决方案是让虚拟路径以“~Views/”开头——就像任何普通视图一样。

不工作：~/VIRTUAL/Home/Index.cshtml
工作：~/Views/VIRTUAL/Home/Index.cshtml

我认为，这与位于 ~/Views 中的 web.config 并为视图定义了很多东西有关。也许任何人都可以提供更多信息。

希望无论如何都会有所帮助。

# nonblocking - EINTR 和非阻塞调用

> ID：14134440
> 
> 赞同：18
> 
> 时间：2013-01-03T07:04:26.857
> 
> 标签：nonblocking, eintr

众所周知，一些阻塞调用像`read`and`write`会返回 -1 并设置`errno`为`EINTR`，我们需要处理这个问题。

我的问题是：这是否适用于非阻塞调用，例如，将套接字设置为`O_NONBLOCK`？

由于我读过的一些文章和资料说非阻塞调用不需要为此烦恼，但我没有找到关于它的权威参考。如果是这样，它是否适用于不同的实现？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T17:06:04.430

对于这个问题，我无法给你一个明确的答案，而且答案可能会因系统而异，但我希望非阻塞套接字永远不会因`EINTR`. 如果您查看各种系统的以下套接字函数`bind()`、`connect()`、`send()`和的手册页`receive()`，或者查看 POSIX 标准中的那些，您会发现一些有趣的东西：除了一个之外，所有这些函数都可能返回`-1`并设置`errno`为`EINTR`。没有记录到失败的一个功能`EINTR`是`bind()`. 并且`bind()`也是该列表中唯一不会默认阻止的功能。所以似乎只有阻塞功能可能会因为`EINTR`, 包括`read()`和`write()`, 但是如果这些函数从不阻塞，它们也永远不会失败，`EINTR`如果你使用`O_NONBLOCK`，这些函数永远不会阻塞。

从逻辑的角度来看，这也是没有意义的。例如，考虑您正在使用阻塞 I/O 并且您调用`read()`并且此调用必须阻塞，但是当它阻塞时，会向您的进程发送一个信号，因此读取请求被解除阻塞。系统应该如何处理这种情况？声称`read()`确实成功了？那将是一个谎言，它没有成功，因为没有读取任何数据。声称它确实成功了，但是读取了零字节数据？这也不正确，因为“零读取结果”用于指示流结束（或文件结束），因此您的进程会假设没有读取任何数据，因为文件已到达（或套接字/管道已在另一端关闭），但事实并非如此。如果您调用，则尚未到达文件结尾（或流结尾）`read()`再次，它将能够返回更多数据。所以这也是一个谎言。您的期望是此读取调用要么成功并读取数据，要么失败并出现错误。因此，在这种情况下，读取调用必须失败并返回`-1`，但`errno`系统应该设置什么值？所有其他错误值都表明文件描述符存在严重错误，但没有严重错误，表明此类错误也是谎言。这就是为什么`errno`设置为`EINTR`，这意味着：*“流没有任何问题。你的读取调用刚刚失败，因为它被信号中断了。如果它没有被中断，它可能仍然成功，所以如果你仍然关心对于数据，请重试。”*

如果现在切换到非阻塞 I/O，就不会出现上述情况。读取调用永远不会阻塞，如果它不能立即读取数据，它将失败并出现错误`EAGAIN`（POSIX）或`EWOULDBLOCK`（非官方，在 Linux 上两者都是相同的错误，只是它的替代名称），这意味着：*“没有数据现在可用，因此您的读取调用必须阻塞并等待数据到达，但不允许阻塞，因此它失败了。”* 因此，对于可能出现的每种情况都有错误。

当然，即使使用非阻塞 I/O，读取调用也可能暂时被信号中断，但为什么系统必须指示呢？每个函数调用，无论是系统函数还是用户编写的函数，都可能会被信号暂时中断，真的是每一个，也不例外。如果系统必须在发生这种情况时通知用户，则所有系统功能都可能因`EINTR`. 然而，即使有信号中断，这些函数通常也会一直执行它们的任务，这就是为什么这个中断是无关紧要的。错误`EINTR`用于告诉调用者他请求的动作由于信号中断而没有执行，但在非阻塞 I/O 的情况下，函数没有理由不执行读取或写入请求，除非它现在无法执行，但可以通过适当的错误指示。

为了证实我的理论，我查看了 MacOS（10.8）的内核，它仍然主要基于 FreeBSD 内核，似乎证实了我的怀疑。如果当前无法进行读取调用，因为没有可用的数据，内核会检查`O_NONBLOCK`文件描述符标志中的标志。如果设置了这个标志，它会立即失败并显示`EAGAIN`. 如果未设置，则通过调用名为 的函数使当前线程进入睡眠状态`msleep()`。该功能[记录在这里](http://www.gsp.com/cgi-bin/man.cgi?section=9&topic=msleep)（正如我所说，OS X 在其内核中使用了大量的 FreeBSD 代码）。该函数使当前线程休眠，直到它被显式唤醒（如果数据准备好读取）或超时（例如，您可以在套接字上设置接收超时）。然而，如果传递了一个信号，线程也会被唤醒，在这种情况下，它`msleep()`本身会返回`EINTR`，并且下一个更高层只是传递这个错误。所以它会`msleep()`产生`EINTR`错误，但如果`O_NONBLOCK`设置了标志，`msleep()`则永远不会首先调用，因此无法返回此错误。

当然那是 MacOS/FreeBSD，其他系统可能会有所不同，但是由于大多数系统都试图在这些 API 之间保持至少一定程度的一致性，如果系统打破假设，非阻塞 I/O 调用永远不会失败因为`EINTR`，这可能不是故意的，如果您报告它，甚至可能会得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-29T08:29:22.697

@Mecki 很好的解释。为了增加接受的答案，“Unix Network Programming - Volume 1, Third Edition”（Stevens）一书在第 5.9 章/第 5.9 节 - “处理中断的系统调用”中区分了慢速系统调用和其他系统调用。我引用这本书-

> 我们使用术语“慢速系统调用”来描述`accept`，并且我们将这个术语用于任何可以永久阻塞的系统调用。也就是说，系统调用永远不需要返回。

在同一节的下一段 -

> 这里适用的基本规则是，当进程在慢速系统调用中被阻塞并且进程捕获信号并且信号处理程序返回时，系统调用可以返回错误`EINTR`。

按照这种解释，非阻塞套接字上的`read`/不是慢速系统调用，因此不应返回.`write``EINTR`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-03T19:14:26.380

只是为了给@Mecki 的答案添加一些证据，我发现这个讨论是关于修复 Linux 中的一个错误，其中一个补丁导致非阻塞 recvmsg 返回 EINTR。有人说：

> EINTR 总是意味着你请求了一个阻塞操作，同时有一个信号到达。
> 
> 一旦你反转了那组条件的“阻塞”部分，EINTR 就变成了一个不可能的事件。

还：

> 看看我们为 AF_INET 做了什么。我们以正确的方式处理这个问题。
> 
> 如果我们在 lock_sock(), recvmsg() 在非阻塞套接字上休眠时被信号“中断”，我们会正确返回 -EAGAIN，而不是 -EINTR。
> 
> 我们可能会休眠以获取套接字锁定的事实对于用户是隐藏的，这是内核的实现细节。
> 
> 我们从不返回 -EINTR，如非阻塞套接字手册页中所述。

来源：[https ://patchwork.ozlabs.org/project/netdev/patch/1395798147.12610.196.camel@edumazet-glaptop2.roam.corp.google.com/#741015](https://patchwork.ozlabs.org/project/netdev/patch/1395798147.12610.196.camel@edumazet-glaptop2.roam.corp.google.com/#741015)

# iphone - 使 UItextfield 像 UISearchBar 一样运行

> ID：14134443
> 
> 赞同：6
> 
> 时间：2013-01-03T07:04:57.320
> 
> 标签：iphone, ios, uisearchbar

我想改变的外观`UISearchBar`：所以，

如果有一种方法可以让我的 `UITextField`（在搜索的自定义背景中）发挥作用`UISearchBar`？或子类化和覆盖`- (void)layoutSubviews`是唯一的方法？

请告诉如何子类化它！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:07:18.557

`UISearchBar`您可以使用以下代码更改背景..

```
for (UIView *subview in searchBar.subviews) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            UIView *bg = [[UIView alloc] initWithFrame:subview.frame];
            bg.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"SkyBackground.jpeg"]];
            [searchBar insertSubview:bg aboveSubview:subview];
            [subview removeFromSuperview];
            break;
        }
    } 
```

从此代码中，您可以为背景设置图像或其他任何内容`UISearchBar`。

另请参阅我的这个答案以及其他一些更改搜索栏组件布局的功能。[如何在 iOS 上更改 UISearchBar 组件的内部背景颜色](https://stackoverflow.com/questions/13817330/how-to-change-inside-background-color-of-uisearchbar-component-on-ios/13817915#13817915)

**更新：**

要更改取消按钮的外观，请使用以下代码...

```
 UIButton *cancelButton = nil;

    for(UIView *subView in searchBar.subviews)
    {
        if([subView isKindOfClass:[UIButton class]])
        {
            cancelButton = (UIButton*)subView;
            //do something here with this cancel Button
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-24T08:17:20.667

它也可以使用 UITextFieldDelegates

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{    
NSString *searchString;
if (string.length > 0) {        
    searchString = [NSString stringWithFormat:@"%@%@",textField.text, string];
} else {
   searchString = [textField.text substringToIndex:[textField.text length] - 1];
}
NSPredicate *filter = [NSPredicate predicateWithFormat:@"SELF CONTAINS[cd] %@", searchString];
resultArray = [[resultTempArray filteredArrayUsingPredicate:filter] mutableCopy];

if (!searchString || searchString.length == 0) {

    resultArray = [resultTempArray mutableCopy];
} else {
    if (resultArray.count == 0) {
NSLog(@"No data From Search");
    }
}    
[tableView reloadData];    
return YES;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-23T07:59:28.283

使用 UItextfield 委托方法进行过滤

```
#pragma mark - UITEXTFIELD DELEGATE METHODS -

- (BOOL)textFieldShouldReturn:(UITextField *)textField{
    [textField resignFirstResponder];
    return YES;
}

- (BOOL)textFieldShouldClear:(UITextField *)textField{
    arrFilterSearch = nil;
    arrFilterSearch = [NSMutableArray arrayWithArray:arrSearch];
    UITableView *tblView = (UITableView *)[self.view viewWithTag:tblView_Tag];
    [tblView reloadData];
    return YES;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    NSString *searchKey = [textField.text stringByAppendingString:string];
    arrFilterSearch = nil;
    searchKey = [searchKey stringByReplacingCharactersInRange:range withString:@""];
    if (searchKey.length) {
            NSPredicate *pred = [NSPredicate predicateWithFormat:@"firstname contains[cd] %@", searchKey];
            arrFilterSearch = [NSMutableArray arrayWithArray:[arrSearch filteredArrayUsingPredicate:pred]];
    }
    else
        arrFilterSearch = [NSMutableArray arrayWithArray:arrSearch];

    UITableView *tblView = (UITableView *)[self.view viewWithTag:tblView_Tag];
    [tblView reloadData];
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T07:08:46.927

尝试这个

```
 self.TextFieldSearch = (UITextField *)[self.Search.subviews lastObject];
    [self.TextFieldSearch removeFromSuperview];
    [self.view addSubview:self.TextFieldSearch];
    self.TextFieldSearch.delegate = self;
    self.TextFieldSearch.font = [UIFont systemFontOfSize:10];
    self.TextFieldSearch.keyboardAppearance =  UIKeyboardAppearanceAlert;
    [self.Search removeFromSuperview]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T08:23:53.660

更改 UIsearchBar 背景是获得自定义 UISearchBar 的一种方法。但是，如果您想要有限的搜索表功能，您可以使用普通文本字段并连接搜索按钮以过滤另一个数组中的 tableview 的结果并使用该数组更新 tabledata。

UIsearchBar 的`- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText` 几乎等同于`UItextField's valieChanged IBAction`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-10T05:47:12.510

好的，我遇到了同样的问题，我将 UISearchBar 子类化了！干得好

```
- (void) layoutSubviews {

[super layoutSubviews];
UITextField *searchField = nil;
    for (UIView *subview in self.subviews) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            [subview removeFromSuperview];
        }

        if ([subview isKindOfClass:[UITextField class]]) {
            searchField = (UITextField *)subview;
            searchField.leftViewMode = UITextFieldViewModeNever;
            [searchField setValue:[UIFont systemFontOfSize:8] forKeyPath:@"_placeholderLabel.font"];
             [searchField setBackground: [UIImage imageNamed:@"images.png"] ];
              searchField.clearButtonMode = UITextFieldViewModeNever;
        }

}
self.showsCancelButton = NO;
} 
```

![输入文字时](../Images/c701f527a5f5ea17d593109e011612a2.png)

# database - 无法在 DB2 命令行处理器中创建数据库/运行其他命令

> ID：14134450
> 
> 赞同：0
> 
> 时间：2013-01-03T07:05:19.993
> 
> 标签：database, db2

我无法使用 DB2 命令行处理器 (DB2 Express C) 创建数据库。我写了一个简单的操作来创建一个数据库：

```
db2=> create database wiki 
```

它向我显示了一个错误：

> SQL1092N 请求的命令或操作失败，因为用户标识无权执行请求的命令或操作。用户 ID：“VINAYAKP”。

我以前从未在 DB2 上工作过。另外，从 *第一步*开始；它只是打开一个提示，它什么也不显示。我正在使用**瘦客户端**。请告诉我这个错误以及如何解决它。此外，**需要知道使用命令行处理器以外的任何替代方式。**

*注意：我使用的是 Windows 操作系统*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-03T14:38:44.173

由于上述答案似乎对我不起作用，我正在添加我的解决方案。（仅限命令行）[ **windows** ]

我只是`db2cmd`以 db2admin 用户身份启动（默认）。为此，请在命令提示符下执行以下命令：

`runas /noprofile /user:db2admin db2cmd`

这将启动一个以管理员用户身份登录的新 cmd 窗口。您现在可以`db2`从此窗口执行任何命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:12:28.567

```
To resolve this issue you need to have the DB2 services started as Domain account, not a local account. In order to change the DB2 services to a Domain account do the following:

1.) Go to Start->Control Panel->Administration Tools->Services.

2.) Find the DB2-0 process right click on it and pick "Properties".

3.) Pick the "Log On" tab.

4.) Then choose "This account" radial button, then "Browse".

5.) A window will pop up called Select User click the Advanced button, then click "Find Now".

6.) A list of all users on the machine will be shown, choose the domain user and select "OK".

7.) To save the change click "Apply" then "OK".

8.) Restart the service/instance. 
```

# java - 如何从java中的蓝牙套接字读取字符串

> ID：14134451
> 
> 赞同：0
> 
> 时间：2013-01-03T07:05:27.853
> 
> 标签：java, android, io, bluetooth

我正在尝试将蓝牙 SPP 服务器中的字符串读入我的 Android 客户端。服务器工作正常，并将字符串发送到客户端，如 Logcat 中所示。LogCat 表示从 btSocket 读取字节。但是，我尝试从套接字读取并显示到 TextView 的字符串是徒劳的。[这](http://paste.ubuntu.com/1490814/)是 Android 客户端，这是用于证明服务器工作正常的[logcat 。](http://paste.ubuntu.com/1490815/)一些 Android 和 Java 大师可以提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T07:22:56.010

尝试这样的事情：

```
byte[] buffer = new byte[1024];
int bytes;
inFromServer = nmeaServerSocket.getInputStream();

bytes = inFromServer.read(buffer);
String readMessage = new String(buffer, 0, bytes);
Log.d(TAG, "Message :: "+readMessage); 
```

希望它可以帮助你。

谢谢。

# ruby-on-rails - 设计 - 使用密码重置机制限制注册？

> ID：14134454
> 
> 赞同：0
> 
> 时间：2013-01-03T07:05:41.070
> 
> 标签：ruby-on-rails, devise, registration

我正在寻找一种允许私人注册或需要手动批准的注册的方法。后者可以使用[此处](https://github.com/plataformatec/devise/wiki/How-To:-Require-admin-to-activate-account-before-sign_in)描述的策略来完成，但我认为如果我能以某种方式利用密码重置模块来简化流程（发送一封带有一次性使用令牌的电子邮件，但对于创建帐户的目的）。有没有人尝试过这样的事情，或者可能有更好的策略来更多地利用设计中的现有组件？

可能相关：[Ruby on rails：设计，想要添加邀请码？](https://stackoverflow.com/questions/3704837/ruby-on-rails-devise-want-to-add-invite-code)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:44:53.377

我不得不承认，我不喜欢在为其他用途而设计的框架中使用功能来实现其他目标。

当我想要一个必须邀请您加入应用程序的私人注册时，我通常会做的就是简单地将用户创建/注册放在应用程序中。毕竟，Devise 只是`User`模型之上的一种身份验证机制。

因此，例如在我当前的应用程序中，应用程序内部有一个明确的方式供现有用户邀请朋友。邀请用户有一个表单，该表单在用户表中为新人创建一个条目，其中包含他的电子邮件地址和一个告诉我用户是否已完成注册的字段。我创建了一个小令牌，它也保存到数据库中（`SecureRandom.hex(8)`这是创建此类令牌的好方法）。系统会向新人发送一封电子邮件，告诉他在哪里注册（使用包含令牌的 URL），而注册只是一个设置密码和其他字段的表单。

所有这一切在 Rails 中都不是真正的魔法，全部是 2 个控制器操作、2 个视图和 1 个邮件程序来完成它，并且您绝不会受到任何 API Devise 提供或不提供给您的限制。

我只需要确保 Devise 不会对尚未兑换其邀请令牌的用户进行身份验证，但仅此而已。

当然不必编写注册视图很方便，但特别是当您处理部分信息时（在我的情况下，邀请用户必须填写一些关于新用户的信息）仅由新用户补充方便的只是有常规的表格，你可以用它们做任何事情。

除非有人编写了一个扩展 Devise 的 Gem 来做到这一点，否则我想我会坚持这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:16:41.610

原来还有第三种策略——我可以简单地锁定新帐户（可锁定，before_create 过滤器）并提供手动解锁功能。

# jquery - 如何将 Javascript 变量中包含的 HTML 代码与 DOM 方法一起使用？

> ID：14134460
> 
> 赞同：1
> 
> 时间：2013-01-03T07:06:16.520
> 
> 标签：jquery, html, dom

我在将 javascript 变量中包含的 HTML 代码与 getElementsByTagName("img")、.removeAttribute("alt") 等 DOM 方法一起使用时遇到问题。我想从所有`<img>`存在的标签中删除 alt 属性在 HTML 代码中并具有 alt 属性。以下是我的几行代码：

```
 $(".show_sub_questions").click(function() {  
        var sub_id = $(this).attr('id'); 
        $('#'+sub_id).removeClass("show_sub_questions");
        var subject_name = $('#'+sub_id).attr('class');
        $('#'+sub_id).addClass("show_sub_questions");

        **var data = $('#popup_'+sub_id).html();**

var title = "Test Result";
        var dialog_title   = title; 
        var subject_name = "<div class='s_name'><b>Subject Name : </b>"+subject_name+"</div><br />";             
        var dialog_message = subject_name+data; 
    var $dialog = $("<div class='view_result'></div>")
         .html(dialog_message)
         .dialog({
               autoOpen: false,
               modal:true,
               title: dialog_title,
               width: 900,                     
               close:{
               }
         });
         $dialog.dialog('open');

        return false; 
    }); 
```

我从添加到弹出窗口的 .tpl 文件中获取 HTML 代码。请帮助我解决使用 DOM 方法访问 html 代码的问题。**和**中写的步骤是HTML代码给出的步骤。我想在相同的 HTML 代码上使用 DOM 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:11:07.230

实际上，我找不到您`alt`要从 s 中删除 's的代码，`img`但请尝试以下操作：

```
$('#parent_element img').removeAttr('alt'); 
```

在这种情况下，您不必将 HTML 保持在变量中。它将在飞行中更改。您总是可以制作一个不可见的元素（即 style="display: none;"）并将代码放入其中。Chenge HTML，再次阅读并删除假元素。可能不是最好的解决方案，但它会为您提供更多选择。您可以在元素上使用所有时间来执行类似的操作并每次清除它而不是删除它。

# android - Android Google Maps V2 加载到 Fragment

> ID：14134461
> 
> 赞同：3
> 
> 时间：2013-01-03T07:06:17.773
> 
> 标签：android, google-maps, android-maps, android-maps-v2

我使用碎片显示list_detail布局，显示地图上保存的位置列表，当应用程序首次启动时，第一个位置被选中，地图初始化和摄像机位置成功变为该位置，但在选择其他地方或甚至选择时同样的位置再次绘制地图，但相机位置没有改变。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle) {
    mainLayout = (RelativeLayout) inflater.inflate(R.layout.home_layout, container,false);
    mapFragment = SupportMapFragment.newInstance();
    getActivity().getSupportFragmentManager().beginTransaction().add(R.id.map_fragment_container, mapFragment).commit();
    updateUI();
    return mainLayout ;
} 
```

在我的`updateUI()`方法中，我改变了相机的位置。

我在另一个应用程序中遇到了同样的问题，我通过`SupportMapFragment`在布局文件中使用而不是像上面那样以编程方式解决了这个问题。

有任何想法吗？像我一样使用地图片段有什么问题吗？

请注意，即使在 Google 提供的示例中，也没有关于如何在片段中使用新 API 的示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:18:53.427

好的，这是我的错，我的地图对象在我的代码中被定义为 STATIC，删除了静态声明，现在一切正常。

# php - 我想在我现有的“联系我们”表单中添加一个下拉菜单

> ID：14134466
> 
> 赞同：1
> 
> 时间：2013-01-03T07:06:35.283
> 
> 标签：php, html, css, contact-form

我想在我的表单中添加一个下拉菜单，其中包含不同的服务。我希望他们选择任何一个价值，然后让我通过电子邮件发送其他信息。

请帮助我更改与我现有代码相关的代码。

谢谢你。

下面给出的是html代码

```
<form id="form" method="post" action="contact.php">
                  <fieldset>
                    <label><input type="text" name="Name" value="Name" onBlur="if(this.value=='') this.value='Name'" onFocus="if(this.value =='Name' ) this.value=''"></label>
                    <label><input type="text" name="Email" value="Email" onBlur="if(this.value=='') this.value='Email'" onFocus="if(this.value =='Email' ) this.value=''"></label>
                    <label><textarea name="Message" onBlur="if(this.value==''){this.value='Message'}" onFocus="if(this.value=='Message'){this.value=''}">Message</textarea></label><br>
                    <a href="#" class="button" onClick="document.getElementById('form').submit()">Send</a></div>
                  </fieldset>                   
                </form> 
```

下面给出的是css代码：

```
#form {margin:8px 0 0 0; width:575px}
#form input {border:#e0e0e1 1px solid; background:#fff;font:13px Arial, Helvetica, sans-serif;color:#000;padding:5px 9px 7px 13px;outline:medium none;width:341px; height:17px; float:left; border-radius:4px}
#form textarea {border:#e0e0e1 1px solid; background:#fff;font:13px Arial, Helvetica, sans-serif;color:#000; height:188px;outline:medium none;overflow:auto;padding:6px 0 0 13px;width:560px;resize:none;margin:0 0 0 0;float:left; border-radius:4px}
#form label {position:relative;overflow:hidden;display:block;min-height:41px} 
```

下面给出的是php代码：

```
<?php
if(isset($_POST['Email'])) {

    // CHANGE THE TWO LINES BELOW
    $email_to = "jay44556677@gmail.com";

    $email_subject = "website html form submissions";

    function died($error) {
        // your error code can go here
        echo "We're sorry, but there's errors found with the form you submitted.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['Name']) ||
        //!isset($_POST['last_name']) ||
        !isset($_POST['Email']) ||
        //!isset($_POST['telephone']) ||
        !isset($_POST['Message'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $first_name = $_POST['Name']; // required
    //$last_name = $_POST['last_name']; // required
    $email_from = $_POST['Email']; // required
    //$telephone = $_POST['telephone']; // not required
    $comments = $_POST['Message']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  //if(!preg_match($string_exp,$last_name)) {
    //$error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  //}
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($first_name)."\n";
    //$email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    //$email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
@mail($email_to, $email_subject, $email_message, $headers);  
?>
<script language="javascript" type="text/javascript">
        alert('Thank you for the message. We will contact you shortly.');
        window.location = 'contacts.html';
    </script>

<?php
}
die();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:28:30.850

在表单中添加 html 代码以扩展下拉菜单

```
<select name="myOpt">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select> 
```

使用 id 或名称在 php "myOpt" 中访问

# php - 从mysql插入数据后如何将内容从数据库添加到html没有刷新php

> ID：14134468
> 
> 赞同：0
> 
> 时间：2013-01-03T07:06:50.190
> 
> 标签：php, javascript, ajax, html, css

例如，我是一个用户，我想发表评论，然后提交并保存到我的数据库中。管理员的其他页面更新并自动显示我插入的数据，而无需刷新管理员页面。请帮助..任何代码都可以提供帮助。谢谢。我正在使用 php 作为服务器端语言。任何语言都可以帮助 javascript 或 ajax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:12:30.937

Javascript（jQuery）：

```
$.post('path_to_your_php_script.php', function(data) {
    $('the_dom_element_you_want_to_show_the_comment_in').html(data);
}); 
```

path_to_your_php_script.php 中的某处：

```
// some code to save the data
echo '<div>New comment</div>';
exit; 
```

更多信息请参考 jQuery 的[post](http://api.jquery.com/jQuery.post/)和[ajax](http://api.jquery.com/jQuery.ajax/)方法。你可以不用 jQuery 做同样的事情，但你不应该重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:11:56.163

`yourphpfile.php`是您需要执行所有数据库操作的 php 文件（在您的情况下，它插入到数据库中）。所以，基本上你想在不刷新页面的情况下显示最近在网页中插入的数据，为此，我们需要 Ajax。

因此，在 中进行插入操作`yourphpfile.php`，如果插入操作成功，只需使用`echo $output;exit;` where $output = 'recently inserted data'; 返回结果（插入数据到 DB）；这就是你需要在 php 方面做的事情。

你的`yourphpfile.php`：

```
<?php
//your database insert operation

    echo $output;// $output should have the inserted data
    exit;

?> 
```

现在在ajax函数中：

你可以使用[jquery.ajax](http://api.jquery.com/jQuery.ajax/)

```
 $.ajax({
                        type: "GET",
                        url: "yourphpfile.php",
                        success: function(response){
                            if(response != '') {
                                //data that I inserted displays without refreshing the page of the admin
                                $('yourDivContent').html(response);
                            } else {
                                // response error
                            }
                        }
                    }); 
```

在响应变量中，您将得到您在`yourphpfile.php`. 那就是$输出。然后您可以在 ajax 函数中使用响应变量并将其插入到您的 HTML 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T07:41:23.627

假设您有一个表单，您可以使用 Ajax 将数据发送到后端。ajax 调用如下所示：

```
var id = $(this).attr('id');

$.ajax({
    type:"POST",
    url:"ajax.php",
    data:{id:id},
    success:function(data){
            // do something if insertion into database has succeeded
    }
}); 
```

...在 php 中，您编写如下内容：

```
// Connecting to Database
mysql_connect(MYSQL_HOST, MYSQL_USER, MYSQL_PASS) or die ('Can not connect to MySQL database');

// Selecting Database
mysql_select_db(DBNAME) or die ('Cant select Database');

$action = mysql_real_escape_string($_POST['action']);

    if ($action == "insert")
    {       
    foreach ($recordArray as $key=>$value) {
        $query = "INSERT INTO `TABLE`
                SET name = `".$_POST['name']."` 
                                SET age = `".$_POST['age']."`
                                .
                                .
        mysql_query($query) or die('Error, insert query failed');           
    } 
```

# codeigniter - 检查信用卡号是否有效时收到警告

> ID：14134471
> 
> 赞同：-1
> 
> 时间：2013-01-03T07:07:03.623
> 
> 标签：codeigniter, validation, credit-card

当我检查信用卡号是否有效时收到此警告。使用语句调用 creditcard_helper.php`if(card_number_valid($this->input->post('card_number'))!=1)`

```
A PHP Error was encountered

Severity: 8192

Message: Function ereg_replace() is deprecated

Filename: helpers/creditcard_helper.php

Line Number: 51 
```

creditcard_helper.php

```
<?php  if (!defined('BASEPATH')) exit('No direct script access allowed');

/**
* Credit Card Functions
*
* This helper module contains functions which can be used to manipulate credit
* card numbers and related information.
*
* @package    CodeIgniter
* @subpackage    Helpers
* @category    Helpers
* @author    Jim O'Halloran
*/

/**
* Truncates a card number retaining only the first 4 and the last 4 digits.  It then returns the truncated form.
*
* @param string The card number to truncate.
* @return string The truncated card number.
*/
function truncate_card($card_num) {
    $padsize = (strlen($card_num) < 7 ? 0 : strlen($card_num) - 7);
    return substr($card_num, 0, 4) . str_repeat('X', $padsize). substr($card_num, -3);
}

/**
* Validates a card expiry date.  Finds the midnight on first day of the following
* month and ensures that is greater than the current time (cards expire at the
* end of the printed month).  Assumes basic sanity checks have already been performed
* on month/year (i.e. length, numeric, etc).
*
* @param integer The expiry month shown on the card.
* @param integer The expiry year printed on the card.
* @return boolean Returns true if the card is still valid, false if it has expired.
*/
function card_expiry_valid($month, $year) {
    $expiry_date = mktime(0, 0, 0, ($month + 1), 1, $year);
    return ($expiry_date > time());
}

/**
* Strips all non-numerics from the card number.
*
* @param string The card number to clean up.
* @return string The stripped down card number.
*/
function card_number_clean($number) {
    return ereg_replace("[^0-9]", "", $number);
}

/**
* Uses the Luhn algorithm (aka Mod10) <http://en.wikipedia.org/wiki/Luhn_algorithm>
* to perform basic validation of a credit card number.
*
* @param string The card number to validate.
* @return boolean True if valid according to the Luhn algorith, false otherwise.
*/
function card_number_valid ($card_number) {
    $card_number = strrev(card_number_clean($card_number));
    $sum = 0;

    for ($i = 0; $i < strlen($card_number); $i++) {
      $digit = substr($card_number, $i, 1);

        // Double every second digit
        if ($i % 2 == 1) {
          $digit *= 2;
        }

        // Add digits of 2-digit numbers together
        if ($digit > 9)    {
          $digit = ($digit % 10) + floor($digit / 10);
        }

        $sum += $digit;
    }

    // If the total has no remainder it's OK
    return ($sum % 10 == 0);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:10:23.833

请用

```
preg_replace() 
```

代替

```
ereg_replace() 
```

自 PHP 5.3.0 起，该函数已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:10:04.297

从您发布的内容来看，这不是发生的实际错误，而是警告消息，除非您的配置设置为警告错误。

[请参阅`ereg_replace`文档。](http://php.net/manual/en/function.ereg-replace.php)

# c# - 杀死单服务

> ID：14134477
> 
> 赞同：0
> 
> 时间：2013-01-03T07:07:32.943
> 
> 标签：c#, mysql, mono

我开始了一个应用程序：

```
mono-service app.exe 
```

现在的问题是我找不到它。我试图找到这个过程，但我找不到它。当我尝试启动应用程序时，它给了我以下错误：

```
MySql.Data.MySqlClient.MySqlException: There is already an open DataReader associated with this Connection which must be closed first. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:48:40.910

您误解了错误消息。它不是在抱怨另一个进程，而是在抱怨您尝试执行的程序中的问题，即使只有一个实例正在运行，也会发生这种问题。您一定有一个错误试图重用仍然繁忙的连接。另请参阅有关该问题的各种其他问题，例如[这个](https://stackoverflow.com/questions/5440168/c-sharp-mysql-there-is-already-an-open-datareader-associated-with-this-connectio)。

# mysql - 检查另一个表中是否存在记录

> ID：14134482
> 
> 赞同：0
> 
> 时间：2013-01-03T07:07:45.433
> 
> 标签：mysql, sql, inner-join

*   任务; ID
*   任务分配；id, task_id
*   任务状态；id，assign_id
*   状态; id、state_id、define_id

![在此处输入图像描述](../Images/ae117c4f84601d1266383d4cfd2d0cc2.png)

我想在其他表中包含选定的 ID

```
SELECT DISTINCT t.id,t.* FROM tasks AS t
INNER JOIN task_assign AS ta1 ON ta1.task_id=t.id
INNER JOIN task_state AS ts1 ON ts1.assign_id=ta1.id
INNER JOIN states AS s1 ON s1.id=ts1.state_id AND s1.define_id=14
INNER JOIN task_assign AS ta2 ON ta2.task_id=t.id
INNER JOIN task_state AS ts2 ON ts2.assign_id=ta2.id
INNER JOIN states AS s2 ON s2.id=ts2.state_id AND s2.define_id=21
.
.
.
INNER JOIN task_assign AS ta5 ON ta5.task_id=t.id
INNER JOIN task_state AS ts5 ON ts5.assign_id=ta5.id
INNER JOIN states AS s5 ON s5.id=ts5.state_id AND s5.define_id=25 
```

这可行，但是当请求增加时它会变慢。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:40:55.093

```
SELECT
    t.id
FROM
    tasks t
INNER JOIN
    task_assign ta1
    ON ta1.task_id = t.id
INNER JOIN
    task_state ts1
    ON ts1.assign_id = ta1.id
INNER JOIN
    states s1
    ON s1.id = ts1.state_id
    AND s1.define_id IN (14,25)
GROUP BY
    t.id
HAVING
    COUNT(DISTINCT s1.define_id) = 2 
```

编辑 - 向 OP 解释这是做什么的......这将首先检索 define_id 为 14 或 25 的所有记录，但该`HAVING`子句仅允许查询返回同时具有这两者的记录。

# jquery - 使用单个 .click() 触发多个函数？

> ID：14134486
> 
> 赞同：2
> 
> 时间：2013-01-03T07:08:18.200
> 
> 标签：jquery

我觉得这个答案会很简单，但我什至不知道要搜索什么。

我想做的是让一个 .click() 事件依次触发两个函数。Function1 清除预期区域，然后 function2 应该是 .slideDown()。

```
 function function1(){
    $(this).parents('#div').siblings().nextAll('#div').hide();
    };

function function2(){
    $(this).parents('#div').siblings().nextAll('#div').slideDown(1000);
    };

$("#div").click(function1 + function2); 
```

我尝试了以下方法，但无济于事...

```
 $("#div").click(function1, function2);
    $("#div").click(function1,function2);
    $("#div").click(function1 + function2);
    $("#div").click(function1+function2); 
```

当 function1 和 function2 独立触发时，它们可以正常工作。只有当我试图将它们一起开火时。

非常感谢您！

编辑：哦，#div 标记只是地标选择器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:13:06.937

您可以传递一个按顺序调用您的两个函数的处理程序。

但是，为了`this`正确绑定，您必须使用[call()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)来调用它们：

```
$("#div").click(function() {
    function1.call(this);
    function2.call(this);
}); 
```

如果您像其他答案一样“自然地”调用函数，那么在内部`function1()`并且`function2()` `this`将被绑定到`window`（或`undefined`在严格模式下），而不是被单击的元素，因此它们不会像您期望的那样运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:11:56.507

这对你有用 - 试试看。

```
$(selectorForButton).click(
  function(e){
    function1();
    function2();
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:17:58.507

您需要`callback`按如下方式使用：

```
$(document).ready(function(){
    $('#test').click(function(){
        one();
        two();
    });
});

function one(){
    alert("I am function one");
}

function two(){
    alert("I am function two");
} 
```

这是一个有效的[**JSFiddle**](http://jsfiddle.net/gAwWE/)

# unix - ffmpeg 从子窗口捕获输出

> ID：14134487
> 
> 赞同：0
> 
> 时间：2013-01-03T07:08:20.897
> 
> 标签：unix, ffmpeg, x11

使用`xwininfo -all`我可以看到任何窗口的统计信息，以及它的子窗口

```
xwininfo: Window id: 0x3c000ba "Electro - The Slag & Prototype Raptor - Crescendo - YouTube - Mozilla Firefox"

  Root window id: 0xa8 (the root window) (has no name)
  Parent window id: 0xc001b8 (has no name)
     2 children:
     0x3c00175 (has no name): ()  1388x876+0+0  +52+24
        5 children:
        0x3d210ab (has no name): ()  854x510+225+197  +277+221
           1 child:
           0x3d210ac (has no name): ()  854x510+0+0  +277+221
              1 child:
              0x40404de "plugin-container": ("plugin-container" "Plugin-container")  854x510+0+0  +277+221
                 2 children:
                 0x40404e1 (has no name): ()  854x510+0+0  +277+221
                 0x40404df (has no name): ()  1x1+-1+-1  +276+220
        0x3ddbcf2 (has no name): ()  640x390+225+162  +277+186
           1 child:
           0x3ddbcf3 (has no name): ()  640x390+0+0  +277+186
              1 child:
              0x403d545 "plugin-container": ("plugin-container" "Plugin-container")  640x390+0+0  +277+186
                 2 children:
                 0x403d548 (has no name): ()  640x390+0+0  +277+186
                 0x403d546 (has no name): ()  1x1+-1+-1  +276+185
        0x3dac7f9 (has no name): ()  640x390+225+162  +277+186
           1 child:
           0x3dac7fa (has no name): ()  640x390+0+0  +277+186
              1 child:
              0x4039d8b "plugin-container": ("plugin-container" "Plugin-container")  640x390+0+0  +277+186
                 2 children:
                 0x4039d8e (has no name): ()  640x390+0+0  +277+186
                 0x4039d8c (has no name): ()  1x1+-1+-1  +276+185
        0x3c3f939 (has no name): ()  640x390+225+197  +277+221
           1 child:
           0x3c3f93a (has no name): ()  640x390+0+0  +277+221
              1 child:
              0x4011918 "plugin-container": ("plugin-container" "Plugin-container")  640x390+0+0  +277+221
                 2 children:
                 0x401191b (has no name): ()  640x390+0+0  +277+221
                 0x4011919 (has no name): ()  1x1+-1+-1  +276+220
        0x3c0d1dc (has no name): ()  1x1+0+97  +52+121
           1 child:
           0x3c0d1dd (has no name): ()  1x1+0+0  +52+121
              1 child:
              0x4002c1e "plugin-container": ("plugin-container" "Plugin-container")  1x1+0+0  +52+121
                 2 children:
                 0x4002c40 (has no name): ()  1x1+0+0  +52+121
                 0x4002c1f (has no name): ()  1x1+-1+-1  +51+120
     0x3c000bb (has no name): ()  1x1+-1+-1  +51+23

  Absolute upper-left X:  52
  Absolute upper-left Y:  24
  Relative upper-left X:  0
  Relative upper-left Y:  0
  Width: 1388
  Height: 876
  Depth: 24
  Visual: 0x23
  Visual Class: TrueColor
  Border width: 0
  Class: InputOutput
  Colormap: 0x20 (installed)
  Bit Gravity State: NorthWestGravity
  Window Gravity State: NorthWestGravity
  Backing Store State: NotUseful
  Save Under State: no
  Map State: IsViewable
  Override Redirect State: no
  Corners:  +52+24  -0+24  -0-0  +52-0
  -geometry 1388x876-0-0

  Bit gravity: NorthWestGravity
  Window gravity: NorthWestGravity
  Backing-store hint: NotUseful
  Backing-planes to be preserved: 0xffffffff
  Backing pixel: 0
  Save-unders: No

  Someone wants these events:
      KeyPress
      KeyRelease
      ButtonPress
      ButtonRelease
      EnterWindow
      LeaveWindow
      PointerMotion
      Exposure
      VisibilityChange
      StructureNotify
      FocusChange
      PropertyChange
  Do not propagate these events:
  Override redirection?: No

  Window manager hints:
      Client accepts input or input focus: Yes
      Initial state is Normal State
      Displayed on desktop 0
      Window type:
          Normal
      Window state:
          Maximized Vert
          Maximized Horz
      Process id: 4087 on host jb
      Frame extents: 0, 0, 0, 0

  Normal window size hints:
      Program supplied minimum size: 18 by 97
      Program supplied maximum size: 1073741824 by 1073741824
      Program supplied window gravity: NorthWestGravity
  No zoom window size hints defined

  No window shape defined
  No border shape defined 
```

但是，如果我尝试在给定子窗口的大小和偏移量的情况下从屏幕捕获，那么当另一个窗口浮动在它上面时，我可能会丢失数据，我在录制时切换到另一个选项卡，我调整子窗口的大小或移动子窗口窗户。相反，我想使用 ffmpeg 专门从该子窗口捕获。

想法？尖端？也许其他一些黑客来完成这个？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:26:32.133

你应该使用[复合扩展](http://www.x.org/releases/X11R7.6/doc/compositeproto/compositeproto.txt)，`RedirectWindow`请求

# python - 尝试向 Python 类动态添加方法时遇到问题（即 django-tables2 'Table'）

> ID：14134488
> 
> 赞同：8
> 
> 时间：2013-01-03T07:08:28.617
> 
> 标签：python, django, metaprogramming, django-tables2

因此，对于 Django 项目，我真的希望能够动态生成和显示表（**不**基于查询集），而无需事先知道内容或模式。

看起来[django-tables2](http://django-tables2.readthedocs.org/en/latest)应用程序为呈现表格提供了很好的功能，但它要求您通过在自定义的 Table 子类上声明属性来显式声明列名，或者为其提供模型来推断列。

即，要使用名为“name”的列，您可以：

```
class NameTable(tables.Table):
   name = tables.Column() 
```

Tables 类没有提供事后添加列的方法，因为从阅读源代码来看，它似乎使用了一个元类来扫描 __new__ 上的类属性并将它们锁定。

看起来非常简单的元编程将是一个优雅的解决方案。我定义了一个接受列名的基本类工厂是参数：

```
def define_table(columns):
    class klass(tables.Table): pass              
    for col in columns:
        setattr(klass, col, tables.Column())
    return klass 
```

可悲的是，这不起作用。如果我运行`

```
x = define_table(["foo", "bar"])(data)
x.foo
x.bar 
```

我回来了：

```
<django_tables2.columns.base.Column object at 0x7f34755af5d0>
<django_tables2.columns.base.Column object at 0x7f347577f750> 
```

但是，如果我列出列：

```
print x.base_columns 
```

我什么也没回来，即{}

我意识到可能有更简单的解决方案（例如，只是咬紧牙关并在代码中定义所有可能的数据配置，或者不使用 django-tables2 并自己动手），但我现在将此视为了解更多信息的机会元编程，所以我真的很想以这种方式进行这项工作。

知道我做错了什么吗？我的理论是 __new__ 方法（​​在表使用的元类中重新定义）在定义 klass 时而不是在实例化时被调用，所以当我添加属性时为时已晚。但这违反了我对何时 __new__ 应该发生的理解。否则，我很难理解元类 __new__ 如何区分代码中定义的属性与动态定义的属性之间的区别。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:15:28.237

您在这里走在正确的轨道上，但是您应该使用[type()](http://docs.python.org/2/library/functions.html#type)内置函数，而不是创建准系统类并向其添加属性。它没有按照您尝试的方式工作的原因是因为元类已经完成了它的工作。

Using`type()`允许您使用自己的属性构造一个新类，同时设置基类。含义 - 您可以将所需的字段描述为类的蓝图，允许`Table`s 元类在您的定义之后接管。

`type()`这是与 django 一起使用[的示例。](https://code.djangoproject.com/wiki/DynamicModels)我自己将它用于我自己的项目（有一些细微的变化），但考虑到你已经快到那里了，它应该给你一个很好的起点。

```
def define_table(columns):
    attrs = dict((c, tables.Column()) for c in columns)
    klass = type('DynamicTable', (tables.Table,), attrs)
    return klass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:16:58.613

您将`__new__`“常规”类与`__new__`元类混淆了。正如您所注意到的，它`Table`依赖`__new__`于其*metaclass*上的方法。定义类时确实调用了元类。类本身就是元类的一个实例，所以定义类就是实例化元类。（在这种情况下，`Table`是 的一个实例`DeclarativeColumnMetaClass`。）所以当类被定义时，为时已晚。

一种可能的解决方案是编写`Table`具有某种方法等的子类`refreshColumns`。您可以调整代码从`DeclarativeColumnMetaclass.__new__`本质上`refreshColumns`再次发挥同样的魔力。然后你可以打电话`refreshColumns()`给你的新班级。

# linq-to-entities - JOIN 时在 LINQ to Entities 中分组

> ID：14134490
> 
> 赞同：0
> 
> 时间：2013-01-03T07:08:39.297
> 
> 标签：linq-to-entities

以下是我的表格的结构。

城市：CityId，名称

人员：PersonId、CityId、姓名、出生日期

我在我的 .NET 应用程序中使用 Linq to Entities。我想将所需查询的结果填充到对象 PersonInfo（将包含 City 和 Person 对象）中。查询应该只为每个城市返回一个条目，具有最低的 DateOfBirth。

我怎样才能做到这一点？任何样本都会更有帮助。我能够使用填充结果集中所有城市和人员的连接来编写 L2E 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:34:49.860

假设这两个表位于名为“cities”和“people”的变量中：

```
from city in cities

join person in people
on city.CityId equals person.CityId

group person

by city

into group1

select new PersonInfo
{
    City = group1.Key,
    Person = group1.OrderBy(person => person.DateOfBirth).First()
} 
```

# android - 如何在android中识别被拒绝的呼叫和未接的呼叫？

> ID：14134493
> 
> 赞同：3
> 
> 时间：2013-01-03T07:08:51.020
> 
> 标签：android

如何使用 PhoneStateListener 识别被拒绝的呼叫和未接的呼叫？在我的代码中，我只发送短信拒绝来电而不是未接来电。请验证以下代码。

```
class PhoneStateChangeListener extends PhoneStateListener{
public static boolean wasRinging;

SmsManager smsManager = SmsManager.getDefault();
 @Override
public void onCallStateChanged(int state, String incomingNumber) {

    switch(state){
        case TelephonyManager.CALL_STATE_RINGING:
             Log.e("pppp", "RINGING");
             // Ringing 
            wasRinging=false;
             break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
            Log.e("Lifttttttt", "OFFHOOK");
            //Received calls

             wasRinging = true;
             break;
        case TelephonyManager.CALL_STATE_IDLE:
           Log.e("Endddddddd", "IDLE");
            if(!wasRinging ){

            //Missed or Rejected calls

            }
             wasRinging = true;
             break;
    }

    super.onCallStateChanged(state, incomingNumber);
   }
} 
```

编辑：有没有可能？请给重播。谢谢。

# jquery-ui - JQuery UI Datepicker 当前显示月份

> ID：14134497
> 
> 赞同：0
> 
> 时间：2013-01-03T07:09:02.467
> 
> 标签：jquery-ui, jquery-ui-datepicker

我在具有此配置的 div 中使用 datepicker"

> ```
> $("#homeDatepicker").datepicker({
>     numberOfMonths: 3,
>     dateFormat: 'dd-mm-yyyy',
>     firstDay: '1'
>     ...
> }); 
> ```

我怎么知道哪些 monts 当前显示在 div 中（用户可以导航以显示下一个和上一个）。

我想根据这些数据使用 ajax 加载一些外部数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:42:46.667

如此链接所示[http://jqueryui.com/datepicker/#multiple-calendars](http://jqueryui.com/datepicker/#multiple-calendars) 显示当前月份基于今天的日期，然后显示接下来的两个月。

# jax-rs - 如何在我的 JAX-RS 应用程序中使用基于 Oauth 1.a 的安全性？

> ID：14134498
> 
> 赞同：2
> 
> 时间：2013-01-03T07:09:05.650
> 
> 标签：jax-rs

目前我正在开发一个应用程序，其中服务器正在使用会话 ID 识别每个客户端。我想知道如何使用 Oauth 1.a 制作安全的休息网络服务。任何人都可以帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:20:50.980

看看我们如何在 JAX-RS Web 应用程序 ( [www.s3auth.com](http://www.s3auth.com) ) 中使用 Facebook 身份验证：[https ://github.com/yegor256/s3auth/blob/master/s3auth-rest/src/main/java/ com/s3auth/rest/FacebookRs.java](https://github.com/yegor256/s3auth/blob/master/s3auth-rest/src/main/java/com/s3auth/rest/FacebookRs.java)。每次您从 OAuth 提供者那里获得一个 ID 时，您都将其转换为一些秘密字符串，并在您自己的标头中将其返回给用户。当用户带着这个标头返回给您时，您将对其进行解密并获得用户 ID。

# php - php文件中用逗号插入的未知符号

> ID：14134499
> 
> 赞同：0
> 
> 时间：2013-01-03T07:09:11.083
> 
> 标签：php, html

我有 index.php 文件。在 index.php 文件中有以下代码

```
<p>This is john's computer</p> 
```

当我在浏览器中运行 index.php 时，它显示如下。

```
This is john�s computer 
```

怎么解决？？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:15:14.183

尝试使用 ASCII 字符。

```
&#39; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:16:12.067

请使用`&#39`而不是直接使用

```
<p>This is john&#39;s computer</p> 
```

# php - 是否可以“过度使用”会话变量？

> ID：14134500
> 
> 赞同：1
> 
> 时间：2013-01-03T07:09:16.513
> 
> 标签：php, session, session-state

是否可以使用会话变量来显着减慢应用程序的速度？

我不是在尝试。我只想知道会话变量是否适用于大量数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:12:25.007

这取决于您如何存储会话数据。默认会话存储是基于文件系统的，每个会话都有自己的文件。该文件在页面加载时自动加载。文件越大，加载它所需的时间就越长。加载后，它只是一个关联数组。每个项目都可以在 log(n) 时间内访问（很可能）。

但是，如果您有 Redis（使用[phpredis](https://github.com/nicolasff/phpredis)）或其他一些会话数据存储，则不必在每个页面执行时持久化和加载数据，因此在会话中存储过多数据不会降低性能。

# extjs4 - 在 extjs 中如何存储选定的单选按钮选项

> ID：14134502
> 
> 赞同：1
> 
> 时间：2013-01-03T07:09:41.543
> 
> 标签：extjs4, radio-group

我在 extjs+Yii 工作。在 extjs 中，我正在创建 20 个问题的多项选择题。这些问题是我从 Yii 框架中提取的。所以在 extjs 我的代码为= View= Question.js

```
 Ext.define('Balaee.view.question.Question',   
     {
    extend:'Ext.form.Panel',
    requires:[
              'Balaee.view.question.QuestionView'
              ],
    id:'QuestionId',
    alias:'widget.question',
    title:'Question',
    height:180,
    items:[
        {
            xtype:'questionView',
        },

    ],//end of items square
    buttons:[
          {
              xtype:'button',
              fieldLabel:'Vote',
              name:'vote',
              formBind:true,
              text:'submit',
              action:'voteAction',
          }
    ]
         }); 
```

QuestionView.js

```
 Ext.define('Balaee.view.question.QuestionView',
             {
    extend:'Ext.view.View',
    id:'QuestionViewId',
    alias:'widget.questionView',
    store:'Question',
    config:
    {
        tpl:'<tpl for=".">'+
            '<div id="main">'+
            '</br>'+
            '<b>Question :-</b> {question}</br>'+
            //'<p>-------------------------------------------</p>'+

            '<tpl for="options">'+     // interrogate the kids property                  within the data
                '<p>&nbsp&nbsp<input type="radio" name="opt" >&nbsp{option} </p>'+
            '</tpl></p>'+

            '</div>'+
            '</tpl>',
        itemSelector:'div.main',    
    } 
```

});

所以我正在查看将问题及其选项显示为单选按钮的视图。我正在显示 20 个问题。最后它有提交按钮。点击提交按钮，我想显示结果。要计算结果，我需要将用户选择的所有问题的选项存储在 extjs 中，以便计算结果。那么如何将所有问题选择选项存储在 extjs 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:36:12.803

您是否在问如何将表单的单选按钮值放入临时 Ext 数据存储中？

# java - 如何在Eclipse中使用蓝牙控制通过Android连接到Arduino的遥控玩具车的左右功能？

> ID：14134510
> 
> 赞同：0
> 
> 时间：2013-01-03T07:10:17.310
> 
> 标签：java, android, eclipse, arduino

我正在尝试找出[Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29)中的编码，以使[RC](http://en.wikipedia.org/wiki/Radio-controlled_model)玩具车以 Android 作为控制器向左或向右移动。汽车本身连接到[Arduino](http://en.wikipedia.org/wiki/Arduino)。我也不知道如何在[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)中进行 Android 编码，以使 Arduino 读取/识别 Android 设备上的按钮单击。到目前为止，这是我用于控制按钮的代码。

```
 // Connect to Bluetooth Module
    connect_button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (connectStat) {
                // Attempt to disconnect from the device
                disconnect();
            }
            else{
                // Attempt to connect to the device
                connect();
            }
        }
    });

    // Toggle Headlights
    led_button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (ledStat) {
                Arduino = (byte) (Arduino & 124);
                led_button.setText(R.string.ledON);
                ledStat = false;
            }
            else{
                Arduino = (byte) (Arduino | 128);
                led_button.setText(R.string.ledOFF);
                ledStat = true;
            }
            write(Arduino);
        }
    });

    // Drive forward
    forward_button.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if ((event.getAction() == MotionEvent.ACTION_DOWN) |
                (event.getAction() == MotionEvent.ACTION_MOVE)) {
                forward_button.setPressed(true);
                Arduino = (byte) (Arduino | 16);
                write(Arduino);
                return true;

            }
            else if (event.getAction() == MotionEvent.ACTION_UP) {
                forward_button.setPressed(false);
                Arduino = (byte) (Arduino & 236);
                write(Arduino);
                return true;
            }
            forward_button.setPressed(false);
            return false;
        }
    });

    // Back up
    reverse_button.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if ((event.getAction() == MotionEvent.ACTION_DOWN) |
                (event.getAction() == MotionEvent.ACTION_MOVE)) {
                reverse_button.setPressed(true);
                Arduino = (byte) (Arduino | 32);
                write(Arduino);
                return true;
            }
            else if (event.getAction() == MotionEvent.ACTION_UP) {
                reverse_button.setPressed(false);
                Arduino = (byte) (Arduino & 220);
                write(Arduino);
                return true;
            }
            reverse_button.setPressed(false);
            return false;
        }
    });
} 
```

左右函数我什么都没有，请问，这个中的“Arduino | 32”`Arduino = (byte) (Arduino | 32);`是什么意思？32是干什么用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:44:28.463

该符号`Arduino | 32`表示`Arduino`按位或`32`再次表示*在 Arduino byte 中设置第 6 位*，例如：

```
Arduino      = 10001010
32           = 00010000

Arduino | 32 = 10011010 
```

同样`&`是*按位和*。

# html - 为什么我的图片在 html 页面中高于我的文字？

> ID：14134511
> 
> 赞同：-1
> 
> 时间：2013-01-03T07:10:19.930
> 
> 标签：html, formula

我不熟悉html。我想在我的博客中显示公式。但是如果我将图片放在一行中，我的两行之间会有空白。请看我的页面[my_web_page](http://neilhappy.blogspot.com/2013/01/linear-sieve-method-for-prime-numbers.html)。三行之间的空白比其他。我尝试更改图片的高度，但没有用。请告诉我我错在哪里或告诉我如何在我的网页中轻松显示公式。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:22:07.810

它是在您的图像周围添加填充的 blogspot。文章中图像的默认样式似乎具有 8 像素填充。

如果您可以编辑 html，您可以尝试覆盖此内联，即添加 padding:0px; 到 img 标签的样式部分。请注意，您可能还需要删除 margin-bottom: -12px 。

即而不是

```
<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=p%5Ei*q" style="border: none; margin-bottom: -12px;"> 
```

尝试：

```
<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=p%5Ei*q" style="border: none; padding:0px"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:23:56.700

将此样式用于您的 img 标签

```
padding: 0px;
border: none;
margin: 0px;
vertical-align: bottom; 
```

前任：

```
<img src="your img source here" style="padding:0px;border: none; margin: 0px; vertical-align: bottom;"> 
```

# .net - 具有多个连接的 Linq 到 SQL

> ID：14134515
> 
> 赞同：0
> 
> 时间：2013-01-03T07:10:30.383
> 
> 标签：.net, c#-4.0, linq-to-sql

我正在尝试编写一个 linq to SQL lambda 查询，它等效于以下 SQL 查询。

```
Select t.Task_Id
FROM taskSet ts
JOIN taskSet tsg ON tsGroup.SetId = ts.SetId
JOIN tasks t ON t.task_id = tsg.TaskId AND t.task_type_id = 10 AND t.row_status = 1 AND t.status = 0
WHERE ts.TaskId = @TaskId 
```

我已经达到了下面。现在，如果我尝试再添加一个连接并检查 && 条件，它会给我错误。请帮助我了解如何进行此操作。

```
m_context.TaskSet
  .Join( m_context.TaskSet, 
   ts => ts.SetId,
   tsg => tsg.SetId,
   (ts, tsg) => new {ts, tsg}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:53:43.870

当等值连接（参见[关于 Join 的 C# 参考](http://msdn.microsoft.com/en-us/library/bb311040.aspx)）时，为了清楚起见，我可能会考虑使用查询语法而不是方法链。您在 ON 子句中设置的条件必须作为 .Where() 条件（并且它们将在翻译时移至 WHERE 子句）。例如：

```
from ts in m_context.TaskSets
join tsg in m_context.TaskSets on ts.SetId equals tsg.SetId 
join t in m_context.Tasks on tsg.TaskId equals t.task_id 
where (t.task_type_id == 10)
   && (t.row_status == 1)
   && (t.status == 0)
   && (ts.TaskId == taskId)
select new {ts, tsg}; 
```

# jquery - jQuery：通过 POST 传输代码

> ID：14134516
> 
> 赞同：1
> 
> 时间：2013-01-03T07:10:31.227
> 
> 标签：jquery, ajax

我有一个文本区域，用户可以在其中输入 ID 为“code_box”的代码。

```
<textarea id = 'code_box'></textarea> 
```

然后我有这个 jQuery，它使用 ajax 将代码发送到我处理它的 PHP 脚本。

```
$('#submit_button').click(function() {
    var code= $('#code_box').val();

    if(code.length > 0) {
        $.ajax ({
            type: 'POST',
            url: '/php/handle_code.php',
            cache: false,
            data: 'code=' + encodeURIComponent(code),
            success: function(output) {
                window.location = output;
            }
        });
    }
}); 
```

但是，当尝试发送代码时，它实际上并没有发送它。我已经验证了“粘贴”变量中有代码。我还验证了 $_POST['code'] 变量在 PHP 端实际上没有收到任何东西，所以问题一定出在 ajax 请求中。其他输入工作，例如纯文本，它可以正常工作。在使用 ajax 将代码发送到 PHP 脚本之前，我还需要做些什么来清理代码吗？

编辑：这是一些可以通过的代码：

```
This is plain text. 
```

这里有一些没有：

```
<?php
    echo "test";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:27:53.363

我认为您没有以 ajax 需要的正确方式发送数据：

```
$('#submit_button').click(function() {
    var code = encodeURIComponent($('#code_box').val());

    if(code.length > 0) {
        $.ajax ({
            type: 'POST',
            url: '/php/handle_code.php',
            cache: false,
            data: {code:code},
            success: function(output) {
                window.location = output;
            }
        });
    }
}); 
```

试试这个，**未经测试**，但可能对您有所帮助。

资料：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:11:54.787

```
 var code= $('#paste_box').val(); 
```

应该

```
 var code= $('#code_box').val(); 
```

# html - 使用javascript重定向html 5表单

> ID：14134517
> 
> 赞同：1
> 
> 时间：2013-01-03T07:10:52.120
> 
> 标签：html

大家好，我在 html 5 中有登录表单设计，根据输入的登录详细信息，它应该重定向到相应的页面。我正在检查 javascript 中的登录详细信息并使用 javascript 重定向页面，但它根本不起作用。页面没有得到重定向。

```
<form id="html5form" method="post">
            <table border="0" cellpadding="0" cellspacing="0" width="100%" class="tbl_form">
                <tbody>                        
                    <tr>
                        <td>
                            <label>Username: <span>*</span></label>
                        </td>
                        <td>
                            <input type="text" name="txtLoginNm" id="txtLoginNm" class="field" required="required" placeholder="Enter Username" onkeydown="fnAdmPassword(e);"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Password: <span>*</span></label>
                        </td>
                        <td>
                            <input type="password" name="txtPwd" id="txtPwd" maxlength="20" class="field" required="required" Placeholder="Enter Password" onkeydown="fnAdmPassword(e);"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            &nbsp;
                        </td>
                        <td>
                            <input type="submit" title="Login" value="Login" name="Login" class="buttom" onclick="javascript:return fnlogin();" />
                        </td>
                    </tr>
                </tbody>
            </table>
            </form> 
```

////和javascript函数如下

```
function fnlogin()
{
   if ((document.getElementById("txtLoginNm").value == "") && (document.getElementById("txtPwd").value == ""))
    {
        alert("Please enter Username & Password!");
    }
else if ((document.getElementById("txtLoginNm").value == "user155") && (document.getElementById("txtPwd").value == "user155"))
    {
        window.location.href = "comp-admin/u_dashboard.shtm";
    }
    else if ((document.getElementById("txtLoginNm").value == "superadmin") && (document.getElementById("txtPwd").value == "superadmin")) {

        window.location.href = "s-admin/edit-profile.shtm";
    }
else (alert("Invalid username or password!"))
  } 
```

请告诉我为什么页面没有被重定向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:27:43.797

这就是它不重定向的原因

```
<input type="submit" title="Login" value="Login" name="Login" class="buttom" onclick="javascript:return fnlogin();" /> 
```

您必须在此处进行 2 处更改

1.  将按钮类型从提交更改为仅按钮，因为提交功能优先，并且您没有定义操作 url
2.  从您的通话中删除**javascript:。**（正如**Jan Hančič**在评论中所建议的）

所以试试这个

```
<input type="button" title="Login" value="Login" name="Login" class="buttom" onclick="return fnlogin();" /> 
```

# refactoring - 用多态性替换大量开关，但没有类型代码

> ID：14134519
> 
> 赞同：0
> 
> 时间：2013-01-03T07:11:05.537
> 
> 标签：refactoring, switch-statement, design-patterns

我有一门可以从状态模式中受益的课程。然而，常见的“用状态/策略替换类型代码”重构似乎不太适合我的情况：状态是通过观察其他对象来计算的，没有类型代码变量。

我的大部分类代码只是在调用它时“计算”一些状态，并运行该状态的函数。

强制类型代码变量*感觉*不对，因为：

1.  我将被迫在每个使用多态函数的地方调用“updateState()”函数。

2.  我的班级将不再是 100% 的行为，我宁愿这样做，而不是某种内部状态。

由于每次调用其函数时都必须计算状态，我想知道我是否在考虑错误的模式。

通常我会重构这个：

```
if (this.someOtherThingIsRunning()) {
    ...
} else {
    ...
} 
```

像这样：

```
typecode.doSomething()
// that being polymorphic 
```

这样做似乎很奇怪：

```
updateTypeCode()
typecode.doSomething() 
```

状态模式是否适用于这种情况？是否有任何替代策略可以从没有类型代码的多态性中提取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:17:52.593

在写我的问题时，我意识到也许我可以让类型代码成为一个函数并返回一个时间（函数范围）类型代码。喜欢：

```
typecode().doSomething() 
```

这个解决方案永远不会存储状态，这是我想要避免的。但是我仍然想知道我的问题是否开始是因为我使用了错误的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:02:05.833

如果您愿意存储状态，则可以考虑结合 State 和 Observer 以在依赖类更改时修改状态（而不是检查每个调用）。不过，只有某些型号可以使用。

否则你还不如说`object.doSomething()`把支票放在里面`doSomething()`。在这种情况下，使用设计模式不会带来任何显着的优势（尽管如果您稍微放宽对设计模式的定义，很多事情都会被认为是这样的）。我可能会选择：

```
doSomething()
{
  if (someOtherThingIsRunning())
    doOneThing();
  else
    doAnotherThing();
} 
```

另一种方法（您已经建议）是进行上述检查`typecode()`并返回另一个包含方法的类`doSomething()`。

# android - 如何在Android中从服务器获取图像时添加加载对话框？

> ID：14134525
> 
> 赞同：0
> 
> 时间：2013-01-03T07:11:28.410
> 
> 标签：android, dialog, loading, progressdialog, image-loading

我正在尝试在以下代码中添加加载对话框以从服务器获取图像并将其显示在图库视图中。它显示空白屏幕，直到图像出现。请帮助我如何在从服务器获取图像时显示加载对话框。

这是代码，请帮助。

```
 public class ImagedisplaytestActivity extends Activity {
        private ImageView leftArrowImageView;
        private ImageView rightArrowImageView;
        private Gallery gallery;
        public int selectedImagePosition;
        private GalleryImageAdapter galImageAdapter;
        private String bitmapImg = "";
        Bitmap bitmap = null;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            setupUI();
        }

        private void setupUI() {
            Intent i = getIntent();
            Bundle extras=i.getExtras();
            bitmapImg = extras.getString("BitmapImage");
            selectedImagePosition = extras.getInt("Pos");

            leftArrowImageView = (ImageView) findViewById(R.id.left_arrow_imageview);
            rightArrowImageView = (ImageView) findViewById(R.id.right_arrow_imageview);
            gallery = (Gallery) findViewById(R.id.gallery);
            leftArrowImageView.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    if (selectedImagePosition > 0) {
                        --selectedImagePosition;
                    }
                    gallery.setSelection(selectedImagePosition, false);
                }
            });

            rightArrowImageView.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    if (selectedImagePosition < DetailView.bitmapURL.size() - 1) {
                        ++selectedImagePosition;
                    }
                    gallery.setSelection(selectedImagePosition, false);
                }
            });

            gallery.setOnItemSelectedListener(new OnItemSelectedListener() {
                @Override
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                    selectedImagePosition = pos;
                    if (selectedImagePosition > 0 && selectedImagePosition < DetailView.bitmapURL.size() - 1) {
                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));
                        rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));
                    } else if (selectedImagePosition == 0) {
                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                    } else if (selectedImagePosition == DetailView.bitmapURL.size() - 1) {
rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));
                    }
                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {
                }
            });

            galImageAdapter = new GalleryImageAdapter(this, DetailView.bitmapURL);
            gallery.setAdapter(galImageAdapter);
            if (DetailView.bitmapURL.size() > 0) {
                gallery.setSelection(selectedImagePosition, false);
            }
            if (DetailView.bitmapURL.size() == 1) {
                rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));
            }

        }

        public class GalleryImageAdapter extends BaseAdapter {
            private Activity context;
            private  ImageView imageView;
            private List<String>  plotsImages;
            private ViewHolder holder;
            public GalleryImageAdapter(Activity context, List<String> plotsImages) {
                this.context = context;
                this.plotsImages = plotsImages;
            }

            @Override
            public int getCount() {
                return plotsImages.size();
            }

            @Override
            public Object getItem(int position) {
                return null;
            }

            @Override
            public long getItemId(int position) {
                return 0;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                if (convertView == null) {
                    holder = new ViewHolder();
                    imageView = new ImageView(this.context);
                    imageView.setPadding(3, 3, 3, 3);
                    convertView = imageView;
                    holder.imageView = imageView;
                    convertView.setTag(holder);
                } else {
                    holder = (ViewHolder) convertView.getTag();
                }
                holder.imageView.setLayoutParams(new Gallery.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                holder.imageView.setScaleType(ImageView.ScaleType.FIT_XY);

                try {
                    bitmap = DownloadImage(plotsImages.get(position));
                    holder.imageView.setImageBitmap(bitmap);
                    bitmap = null;
                } catch (Exception e) {
                    e.printStackTrace();
                }
                return imageView;
            }

            private class ViewHolder {
                ImageView imageView;
            }

             private Bitmap DownloadImage(String URL){
                    Bitmap bitmap = null;
                    try {
                        InputStream in = OpenHttpConnection(URL);
                        bitmap = BitmapFactory.decodeStream(in);
                        in.close();
                    } catch (IOException e1) {
                        e1.printStackTrace();
                    }
                    return bitmap;
                }

                private InputStream OpenHttpConnection(String urlString) throws IOException{
                    InputStream in = null;
                    int response = -1;
                    URL url = new URL(urlString);
                    URLConnection conn = url.openConnection();

                    if (!(conn instanceof HttpURLConnection)) {
     throw new IOException("Not an HTTP connection");
                    }
                    try{
                        HttpURLConnection httpConn = (HttpURLConnection) conn;
                        httpConn.setAllowUserInteraction(false);
                        httpConn.setInstanceFollowRedirects(true);
                        httpConn.setRequestMethod("GET");
                        httpConn.connect();
                        response = httpConn.getResponseCode();
                        if (response == HttpURLConnection.HTTP_OK) {
                            in = httpConn.getInputStream();
                        }
                    }
                    catch (Exception ex){
     throw new IOException("Error connecting");
                    }
                    return in;
                }
    }

        @Override
        public void onBackPressed() {
            DetailView.bundleID = DetailView.idList.get(selectedImagePosition);
                    super.onBackPressed();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:22:58.000

你应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)！也看[这个](https://stackoverflow.com/questions/9671546/asynctask-android-example)！& 在[Vogella 示例](http://www.vogella.com/articles/AndroidPerformance/article.html)中将消除您的疑问。看到这个惰性图像加载 [演示](https://github.com/thest1/LazyList)！在github上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:16:41.880

使用 assynctask，在该 assynctask 方法中，您可以编写从服务器获取图像的方法`doinbackground()`，此时您可以使用显示警报对话框`preexectue()`，从服务器加载后只需关闭警报对话框`postexectue()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:17:40.977

**这段代码对我有用**

```
private class LoadGlobalDataSearch extends AsyncTask<String, Void, Void>
    {

        @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);

            progressdialog.dismiss();

        }

        @Override
        protected Void doInBackground(String... params)
        {

            //Load your images this task
                        setupUI();
            return null;
        }

        @Override
        protected void onPreExecute() 
        {
            super.onPreExecute();
            progressdialog = ProgressDialog.show(MainActivity.this, "",getString(R.string.inprogress));
        }
    } 
```

在你的 oncreate 方法中调用这个类

```
new loadImages().execute(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:17:42.977

您可以使用进度对话框，直到下载图像然后删除对话框。

在 OpenHttpConnection 添加这个——

```
dialog = ProgressDialog.show(DutyRotaActivity.this, "",
                "Please wait for few seconds...", true); 
```

在 DownloadImage 中关闭对话框。

```
dialog.dismiss(); 
```

或者你也可以使用异步任务。导致网络操作应始终在不在主线程中的其他线程上进行。在这种情况下，`preExecute`添加对话框并`postExecute`关闭对话框。并`doinbackground`调用您的 downloadimage 函数，该函数也可以解决问题。

## 编辑

这是一个完整的源代码和一个在`listView`. 我认为它也可以帮助您解决问题。谢谢

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# java - 从 ArrayList 转换为 double[] 时出错？

> ID：14134527
> 
> 赞同：9
> 
> 时间：2013-01-03T07:11:45.893
> 
> 标签：java, arrays, eclipse, list, arraylist

我有一个`ArrayList`被调用`out`的，我需要将它转换为一个`double[]`。我在网上找到的例子说明了两件事：

第一次尝试：

```
double[] d = new double[out.size()];
out.toArray(d); 
```

但是，这会产生错误（eclipse）：

```
The method toArray(T[]) in the type List<Double> is not applicable for the arguments (double[]). 
```

我在 StackOverflow 上找到的第二个解决方案是：

```
double[] dx = Arrays.copyOf(out.toArray(), out.toArray().length, double[].class); 
```

但是，这会产生错误：

```
The method copyOf(U[], int, Class<? extends T[]>) in the type Arrays is not applicable for the arguments (Object[], int, Class<double[]>) 
```

是什么导致了这些错误，如何在不产生这些问题的情况下转换`out`为？确实只有双值。`double[]``out`

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T07:17:10.167

我认为您正在尝试将`ArrayList`包含`Double`对象转换为原始对象`double[]`

```
public static double[] convertDoubles(List<Double> doubles)
{
    double[] ret = new double[doubles.size()];
    Iterator<Double> iterator = doubles.iterator();
    int i = 0;
    while(iterator.hasNext())
    {
        ret[i] = iterator.next();
        i++;
    }
    return ret;
} 
```

或者，Apache Commons 有一个`ArrayUtils`类，它有一个方法`toPrimitive()`

```
 ArrayUtils.toPrimitive(out.toArray(new Double[out.size()])); 
```

但我觉得自己很容易做到这一点，如上所示，而不是使用外部库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:15:01.283

你有没有尝试过

```
Double[] d = new Double[out.size()];
out.toArray(d); 
```

即使用类`Double`而不是原始类型`double`

错误消息似乎暗示这是问题所在。毕竟，由于`Double`是原始类型的包装类，`double`它本质上是一种不同的类型，编译器会这样对待它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T07:18:27.773

泛型不适用于原始类型，这就是您收到错误的原因。使用`Double array`而不是`primitive double`. 试试这个 -

```
Double[] d = new Double[out.size()];
out.toArray(d);
double[] d1 = ArrayUtils.toPrimitive(d); 
```

# java - JVM 开销太大

> ID：14134536
> 
> 赞同：8
> 
> 时间：2013-01-03T07:12:06.257
> 
> 标签：java

我有一台服务器的内存问题。它是一个亚马逊微型实例，因此它的内存非常有限（free -m 表示 603 MB）。这就是为什么我开始使用tomcat

```
-server -Xmx290m -Xms290m -XX:MaxPermSize=65m 
```

但是，“java”进程占用了大约 86% 的总内存，即 518M。518-355 = 163 MB 开销。这看起来很多，而且很可疑，尤其是考虑到：

*   在另一个微型实例上的另一个 jvm 版本上运行的类似应用程序没有这么大的开销
*   本地运行的相同应用程序仅产生 40 MB 开销。在本地，它在 Windows 7 64 位中运行。

有问题的服务器上的 java 版本是：

```
java version "1.7.0_09-icedtea"
OpenJDK Runtime Environment (amzn-2.3.3.13.amzn1-x86_64)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

本地运行时和服务器上的运行时之间的巨大差异使我排除了应用程序中有一些昂贵的堆外对象（例如字节缓冲区）的选项（无论如何我都没有使用这些对象）。我知道 JVM 开销会有所不同，但是超过 1/2 的堆作为开销听起来太大了。那么这可能是什么原因呢？或者这是一种正常的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:28:35.710

GC 的选择可能会影响堆大小开销，因为每个 GC 方案都必须留出一些内存来管理您的堆。此外，在如此小的 VM 上，您可能不会从 64 位中受益多少。32 位 jvm 占用的堆空间更少，即使使用 CompressOOPS（默认情况下应该打开）也是如此。因此，与您最喜欢的垃圾收集器一起玩，选择一个为您提供最佳开销和延迟组合的垃圾收集器。

# loading - Opencart 减少加载时间，同时从数据库中获取太多数据

> ID：14134538
> 
> 赞同：0
> 
> 时间：2013-01-03T07:12:20.310
> 
> 标签：loading, opencart, reduce

我在我的商店中使用属性过滤器选项。为此，我在管理视图模板中使用以下代码。这将从数据库中获取所有属性，并使用 jquery 选项卡隐藏所有不活动的选项卡。

我面临的奇怪问题是**LOADING TIME**。我的商店里有超过 5k 种产品。所以检索所有属性需要很长时间（我认为是这样）。在这种情况下，有人知道减少加载时间吗？

```
<div id="tab-subcategory-<?php echo $category['category_id']; ?>" class="htabs-content"> 
       <input name="VALORES_<?php echo $category['category_id']; ?>" type="checkbox" value="1" onclick="Selecbox(this);"/><?php echo $entry_all_values; ?> 
       <input name="VALORES_<?php echo $category['category_id']; ?>" type="hidden" value="<?php echo $category['category_id']; ?>" />
         <table width="100%" border="0" cellpadding="2" class="list">
              <thead>
                <tr>
                   <td class="left"><?php echo $entry_value; ?><img src="view/image/information.png" width="15" height="15" hspace="10" border="0" align="absmiddle" class="tooltip" title="<?php echo $entry_values_explanation; ?>" /></td>
                   <td class="left"><?php echo $entry_separator; ?> <img src="view/image/information.png" width="15" height="15" hspace="10" border="0" align="absmiddle" class="tooltip" title="<?php echo $entry_separator_explanation; ?>" /></td>
                   <td class="left"><?php echo $entry_examples; ?></td>
                   </tr>
             </thead>
             <tbody>   

            <?php foreach ($category['attributes'] as $attribute) { ?>

            <tr>
             <td class="left">

             <?php if ($attribute['checked']) { ?>

        <input name="VALORES_<?php echo $category['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][attribute_id]" type="checkbox" value="<?php echo $attribute['attribute_id']; ?>" checked="checked" /><?php echo $attribute['name']; ?>

            <?php }else{ ?>
               <input name="VALORES_<?php echo $category['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][attribute_id]" type="checkbox" value="<?php echo $attribute['attribute_id']; ?>" /><?php echo $attribute['name']; ?>

             <?php } ?>

           </td>

             <td class="left"><input name="VALORES_<?php echo $category['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][separator]" type="text" value="<?php echo $attribute['separator']; ?>" size="5"/></td>
             <td class="left"> 
              <?php foreach ($languages as $language) { ?>
              <select  name="select" id="select<?php echo $language; ?>" style="width: 150px" >
            <?php 
       if ($attribute['attribute_values'][$language['language_id']]){ 
                  natsort($attribute['attribute_values'][$language['language_id']]);

                  foreach ($attribute['attribute_values'][$language['language_id']] as $valores_default){ ?>
                     <option><?php echo trim($valores_default); ?></option>
                  <?php } ?>

              <?php }else{ ?>
      <option> <?php echo $text_none; ?></option>
              <?php } ?>

              </select><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /><br />
           <?php } ?>

               </td>
            </tr>  
            <?php 

            } ?>
              </tbody>
            </table>

          </div>

          <?php foreach ($category['children'] as $child) { ?>
            <div id="tab-subcategory-<?php echo $category['category_id']; ?>-<?php echo $child['category_id']; ?>" class="htabs-content">

              <input name="VALORES_<?php echo $child['category_id']; ?>" type="checkbox" value="1" onclick="Selecbox(this);"/>
       <?php echo $entry_all_values; ?> 

            <input name="VALORES_<?php echo $child['category_id']; ?>" type="hidden" value="<?php echo $child['category_id']; ?>" />
            <table width="100%" border="0" cellpadding="2" class="list">
              <thead>
                <tr>
                      <td class="left"><?php echo $entry_value; ?><img src="view/image/information.png" width="15" height="15" hspace="10" border="0" align="absmiddle" class="tooltip" title="<?php echo $entry_values_explanation; ?>" /></td>
                 <td class="left"><?php echo $entry_separator; ?><img src="view/image/information.png" width="15" height="15" hspace="10" border="0" align="absmiddle" class="tooltip" title="<?php echo $entry_separator_explanation; ?>" /></td>
                   <td class="left"><?php echo $entry_examples; ?></td>

                </tr>
             </thead>
             <tbody>   

            <?php foreach ($child['attributes'] as $attribute) { ?>
             <tr>
             <td class="left">

             <?php if ($attribute['checked']) { ?>

        <input name="VALORES_<?php echo $child['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][attribute_id]" type="checkbox" value="<?php echo $attribute['attribute_id']; ?>" checked="checked" /><?php echo $attribute['name']; ?>

            <?php }else{ ?>
               <input name="VALORES_<?php echo $child['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][attribute_id]" type="checkbox" value="<?php echo $attribute['attribute_id']; ?>" /><?php echo $attribute['name']; ?>

             <?php } ?>

           </td>

             <td class="left"><input name="VALORES_<?php echo $child['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][separator]" type="text" value="<?php echo $attribute['separator']; ?>" size="5"/></td>

             <td class="left">                   
              <?php foreach ($languages as $language) { ?>
              <select  name="select" id="select<?php echo $language; ?>" style="width: 150px" >
           <?php       
       if ($attribute['attribute_values'][$language['language_id']]){ 
                  natsort($attribute['attribute_values'][$language['language_id']]);

                  foreach ($attribute['attribute_values'][$language['language_id']] as $valores_default){ ?>
                     <option><?php echo trim($valores_default); ?></option>
                  <?php } ?>

              <?php }else{ ?>
      <option> <?php echo $text_none; ?></option>
              <?php } ?>

              </select><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /><br />
           <?php } ?>

           </td>
            </tr>  
            <?php } ?>
              </tbody>
            </table>
             </div>

             <?php foreach ($child['sisters_id'] as $sister) { ?>
            <div id="tab-subcategory-<?php echo $category['category_id']; ?>-<?php echo $child['category_id']; ?>-<?php echo $sister['category_id']; ?>" class="htabs-content">

              <input name="VALORES_<?php echo $sister['category_id']; ?>" type="checkbox" value="1" onclick="Selecbox(this);"/>
       <?php echo $entry_all_values; ?> 

            <input name="VALORES_<?php echo $sister['category_id']; ?>" type="hidden" value="<?php echo $sister['category_id']; ?>" />
            <table width="100%" border="0" cellpadding="2" class="list">
              <thead>
                <tr>
                      <td class="left"><?php echo $entry_value; ?><img src="view/image/information.png" width="15" height="15" hspace="10" border="0" align="absmiddle" class="tooltip" title="<?php echo $entry_values_explanation; ?>" /></td>
                 <td class="left"><?php echo $entry_separator; ?><img src="view/image/information.png" width="15" height="15" hspace="10" border="0" align="absmiddle" class="tooltip" title="<?php echo $entry_separator_explanation; ?>" /></td>
                   <td class="left"><?php echo $entry_examples; ?></td>

                </tr>
             </thead>
             <tbody>   

            <?php foreach ($sister['attributes'] as $attribute) { ?>
             <tr>
             <td class="left">

             <?php if ($attribute['checked']) { ?>

        <input name="VALORES_<?php echo $sister['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][attribute_id]" type="checkbox" value="<?php echo $attribute['attribute_id']; ?>" checked="checked" /><?php echo $attribute['name']; ?>

            <?php }else{ ?>
               <input name="VALORES_<?php echo $sister['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][attribute_id]" type="checkbox" value="<?php echo $attribute['attribute_id']; ?>" /><?php echo $attribute['name']; ?>

             <?php } ?>

           </td>

             <td class="left"><input name="VALORES_<?php echo $sister['category_id']; ?>[attributes][<?php echo $attribute['attribute_id']; ?>][separator]" type="text" value="<?php echo $attribute['separator']; ?>" size="5"/></td>

             <td class="left">                   
              <?php foreach ($languages as $language) { ?>
              <select  name="select" id="select<?php echo $language; ?>" style="width: 150px" >
           <?php       
       if ($attribute['attribute_values'][$language['language_id']]){ 
                  natsort($attribute['attribute_values'][$language['language_id']]);

                  foreach ($attribute['attribute_values'][$language['language_id']] as $valores_default){ ?>
                     <option><?php echo trim($valores_default); ?></option>
                  <?php } ?>

              <?php }else{ ?>
      <option> <?php echo $text_none; ?></option>
              <?php } ?>

              </select><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /><br />
           <?php } ?>

           </td>
            </tr>  
            <?php } ?>
              </tbody>
            </table>
             </div>
      <?php } ?>

      <?php } ?> 
```

# php - 仅加载一次欢迎动画 jquery/php

> ID：14134544
> 
> 赞同：0
> 
> 时间：2013-01-03T07:12:35.230
> 
> 标签：php, jquery

在我的网站中，我有一个欢迎动画（使用 jquery 创建），当任何人打开我的网站（**www.mysite.com**）时它就会运行。然后同一用户转到我网站中的另一个页面，例如**www.mysite.com/about**，然后单击返回主页 ( **www.mysite.com** )，动画再次显示。我该如何限制这个？

分享一些逻辑，例如放置会话或 settimeout 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:40:42.820

您可以在服务器端或客户端设置 cookie 并检查是否设置了 cookie 如果设置了 cookie 然后不显示欢迎框，否则显示欢迎框...

在 php 中，您可以使用 setcookie 函数设置会话 cookie，请参见以下链接：-

```
http://php.net/manual/en/function.setcookie.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:43:55.827

有关如何使用 JQuery 设置 cookie 的信息，请参阅以下链接： [如何使用 jQuery 设置/取消设置 cookie？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

每次加载主页时，您都可以使用 if 语句检查 cookie 是否设置。如果未设置 cookie，则运行动画。

在动画脚本中；确保您设置了 cookie，以便在 cookie 处于活动状态时脚本不会再次运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:23:26.467

这就是使用[jquery cookie 插件](https://github.com/carhartl/jquery-cookie)的方法：

[http://jsfiddle.net/lollero/2nYBV/](http://jsfiddle.net/lollero/2nYBV/)（或[http://jsfiddle.net/lollero/2nYBV/show/](http://jsfiddle.net/lollero/2nYBV/show/)）

^(您可能想要更改 cookie 的过期方式。该信息可以在插件页面中找到。我这样做的方式是在每次浏览器会话后过期。)

jQuery：

[如果设置了 cookie，您可以轻松地将其反转为隐藏。1\. 设置cookie 2\. if 语句触发隐藏，如果设置了cookie。]

```
// If "welcome" cookie is not set...
if ( $.cookie('welcome') === null ) {
    // Show welcome text.
    $('#welcome').show();
    // Set the "welcome" cookie, so that the 
    // welcome text will not be shown after this.
    $.cookie('welcome', true );
}
​ 
```

CSS：

```
#welcome { 
    display: none; 
}​ 
```

HTML：

```
<div id="welcome">Welcome</div>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:48:25.543

放置带有标志的计时器，然后重定向到您网站的主页。

```
 setTimeout(function() {window.location.href = "/NewPage.php";}, 2000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T07:49:20.843

您可以使用会话来处理此问题。一个例子：

```
<?php
$_SESSION['new'] = true;
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T07:52:45.580

首次访问主页 - 在 cookie 中定义一个标志，并在每次访问页面时检查此标志

# php - PHP从SQL变量更改html元素类

> ID：14134545
> 
> 赞同：0
> 
> 时间：2013-01-03T07:12:39.613
> 
> 标签：php

## 背景

*   这是以下代码，它将从名为的 MySQL 表中选择四个字段`a_aif`
*   我想在 html 表中显示这些数据并**突出显示**`a_aif.aif_id`等于的行背景`remaining_if.aif_id`
*   我在 SQL 查询中定义了一个满足上面这个条件的变量并定义了它`remaining_aifs`

**问题**- 请查看我认为问题所在的红色箭头/突出显示的语法...

![在此处输入图像描述](../Images/7de603ffd18cadf3b18cf74f88ca233c.png)

## PHP 脚本

```
<?php
require_once 'config.php';

$dbh = new PDO($dsn, $dbuser, $dbpass);

$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$result = $dbh->query("
    SELECT a_aif.aif_id,
      a_aif.fee_source_id,
      a_aif.company_name_per_sedar,
      a_aif.document_filing_date,
      IF (a_aif_remaining.aif_id IS NULL, 0, 1) remaining_aifs
    FROM  a_aif
      LEFT JOIN a_aif_remaining
        ON a_aif_remaining.aif_id = a_aif.aif_id
    ORDER BY aif_id DESC");

$result->setFetchMode(PDO::FETCH_ASSOC);

if ( !empty($result) ) : endif;

?>

<table>
<tr>
    <th><b>Document ID</b></th>
    <th><b>Pubco Name</b></th>
    <th><b>Filing Date</b></th>
    <th><b>PDF</b></th>
</tr>

<?php foreach($result as $index => $row) : ?>
<tr
    <?php
        if('a_aif.aif_id' === 'remaining_aifs'
        echo "<tr class='highlighted'>";
        else echo "<tr>";
    ?>
>
    <td><?php echo $row[fee_source_id]; ?></td>
    <td><?php echo $row[company_name_per_sedar]; ?></td>
    <td><?php echo $row[document_filing_date]; ?></td>
    <td></td>
</tr>
<?php endforeach;
$dbh = NULL;
?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:18:46.970

1)`empty()`是一个构造，如果您传递的值是以下任何一种，则返回 true：

```
"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

2)`$result`是传递给`empty()`. 由于您没有发布任何其他代码，因此不知道它的设置。

3) 这`:`是为 if 语句定义块的另一种语法。您需要`endif;`在块的末尾结束它。

这种替代语法在将 PHP 与 HTML 混合使用时非常流行，通常在模板中。您的代码可能如下所示：

```
<?php if ( !empty($result) ) : ?>
   <span class="result"><?php echo $result; ?></span>
<?php endif; ?> 
```

请注意，您在`<?php if...`和`<?php endif; ?>`行之间放置的内容可以是任何内容，包括更多的 php 代码或 html/text。

更多信息：

[http://www.php.net/empty](http://www.php.net/empty)

[http://www.php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:35:38.040

**一个数组看起来像：**

```
$result= array(); // array defined

$result= ["name","last name"]; // array elements

$result= []; // empty array 
```

**如果语法：**

```
 <?php if ( !empty($result) ) : ?>
       hello control in if 
    <?php else: ?>
       in else condition
    <?php endif; ?> 
```

`empty();` 要检查的 php 函数在哪里`$result`没有元素或有元素。

`:`是一个语法元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:16:11.970

这是“if 语句”的替代语法

您可以使用

```
<?php 
if ($condition):
//some code
else:
// some code
endif;
?> 
```

所以在你的例子中 1 和 2 是如果结果不为空则通过的条件

# cocos2d-iphone - 如何在 cocos2d 中获取精灵？

> ID：14134546
> 
> 赞同：0
> 
> 时间：2013-01-03T07:12:42.273
> 
> 标签：cocos2d-iphone

在 cocos2d 中，我需要用手指在我的项目中拖动一个精灵。我如何获得那个精灵？任何帮助将不胜感激。谢谢。我正在使用花栗鼠引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:50:08.230

您需要捕捉开始的触摸，找出正在触摸的精灵，然后跟踪触摸的移动。在触摸移动时，您会更新精灵的位置。

听起来很复杂？这不是真的。这是一个很棒的教程。

[http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d](http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d)

# android - 创建联系人属于第三方帐户？

> ID：14134550
> 
> 赞同：0
> 
> 时间：2013-01-03T07:13:16.877
> 
> 标签：android, android-contentprovider, android-contacts

我这里有个问题。我可能会向联系人提供者插入联系人，但我想知道我可以创建一个属于第三方帐户的联系人。我的意思是：我想添加我的联系人属于第三方帐户而不是 Google 帐户。我在 Google Play（Facebook 联系人同步应用程序，...）中找到了一些 apos，但他们没有此功能。我认为 Google Contact Provider 不允许我们这样做。我们能做到吗？如果可能的话，请告诉我怎么做？

感谢您的阅读！

![创建第三方联系人](../Images/d38208d9798dd0c91cce0b3bdb7e8e0d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:05:34.963

在将联系人插入 RAW Contact 表时，提供 AccountType 和 accountName。

```
 final ContentProviderOperation.Builder newContact = ContentProviderOperation
            .newInsert(RawContacts.CONTENT_URI);
    newContact.withValue(RawContacts.ACCOUNT_TYPE, rawContact.accountType);
    newContact.withValue(RawContacts.ACCOUNT_NAME, rawContact.accountName);
    newContact.withValue(RawContacts.AGGREGATION_MODE, RawContacts.AGGREGATION_MODE_DISABLED); 
```

# ruby-on-rails - railties 已安装但未找到

> ID：14134553
> 
> 赞同：0
> 
> 时间：2013-01-03T07:13:38.593
> 
> 标签：ruby-on-rails, ruby

使用这个 SO 答案[你如何在 rbenv 中使用多个 rails 版本？](https://stackoverflow.com/questions/8877772/how-do-you-use-multiple-rails-versions-with-rbvenv)，我正在尝试使用 rbenv（而不是 rvm）设置环境来管理不同版本的 Ruby 和 Rails。答案首先说以这种方式安装链接到 ruby​​ 版本的 Rails 版本。

```
RBENV_VERSION=1.9.3-p327 rbenv exec gem install rails --version 3.2.10 
```

这对我有用。导轨安装。

按照它的说明，然后我尝试使用该版本的 rails 以这种方式创建一个新项目

```
RBENV_VERSION=1.9.3-p327 rbenv exec rails _3.10.2_ new newprojectname 
```

那对我不起作用。我收到一条关于

```
.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find railties (= 3.10.2) amongst [RedCloth-4.2.9, aaronh-chronic-0.3.9, abstract-1.0.0, actionmailer-3.2.10, actionmailer-3.0.4, actionpack-3.2.10, actionpack-3.0.4, activemodel-3.2.10, activemodel-3.2.9, activemodel-3.0.4, activerecord-3.2.10, activerecord-3.0.4, activeresource-3.2.10, activeresource-3.0.4, activesupport-3.2.10, activesupport-3.2.9, activesupport-3.0.4, addressable-2.3.2, arel-3.0.2, arel-2.0.10, bigdecimal-1.1.0, builder-3.0.4, builder-2.1.2, bundler-1.2.3, capybara-2.0.2, carrierwave-0.5.8, childprocess-0.3.6, coderay-1.0.8, cucumber-1.2.1, cucumber-rails-1.3.0, diff-lcs-1.1.3, erubis-2.7.0, erubis-2.6.6, factory_girl-4.1.0, ffi-1.2.0, formtastic-2.2.1, gherkin-2.11.5, hike-1.2.1, i18n-0.6.1, io-console-0.3, jist-1.3.1, journey-1.0.4, json-1.7.6, json-1.5.4, lesstile-1.1.0, libwebsocket-0.1.7.1, mail-2.4.4, mail-2.2.19, market_beat-0.2.0, method_source-0.8.1, mime-types-1.19, minitest-2.5.1, multi_json-1.5.0, nokogiri-1.5.6, polyglot-0.3.3, pry-0.9.10, pry-rails-0.2.2, rack-1.4.1, rack-1.2.5, rack-cache-1.2, rack-mount-0.6.14, rack-openid-1.3.1, rack-ssl-1.3.2, rack-test-0.6.2, rack-test-0.5.7, rails-3.2.10, rails-3.0.4, railties-3.2.10, railties-3.0.4, rake-10.0.3, rake-0.9.2.2, rdoc-3.9.4, rspec-2.12.0, rspec-core-2.12.2, rspec-expectations-2.12.1, rspec-mocks-2.12.1, rspec-rails-2.12.0, ruby-openid-2.2.2, rubygems-update-1.8.24, rubyzip-0.9.9, selenium-webdriver-2.27.2, slop-3.3.3, sprockets-2.2.2, sqlite3-1.3.6, sqlite3-ruby-1.3.3, thor-0.14.6, tilt-1.3.3, treetop-1.4.12, tzinfo-0.3.35, webrat-0.7.3, websocket-1.0.6, will_paginate-3.0.pre2, xpath-1.0.0] (Gem::LoadError)
    from /Users/michaeljohnmitchell/.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/michaeljohnmitchell/.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/michaeljohnmitchell/.rbenv/versions/1.9.3-p327/bin/rails:22:in `<main>' 
```

因此我尝试安装railties

```
gem install railties 
```

有效

```
Successfully installed railties-3.2.10
1 gem installed
Installing ri documentation for railties-3.2.10...
Installing RDoc documentation for railties-3.2.10... 
```

但是，尝试再次创建项目

```
RBENV_VERSION=1.9.3-p327 rbenv exec rails _3.10.2_ new newprojectname 
```

创建了关于 railties 的相同错误消息

```
see error message above 
```

我什至尝试再次安装 railties 但使用 RBENV 前缀

```
RBENV_VERSION=1.9.3-p327 rbenv exec gem install railties 
```

它再次安装！但是，当我尝试创建新项目时，我收到了相同的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T07:00:13.790

我面临同样的问题，

这就是我所做的，
我删除了 ~/.gemrc

接下来，我跑去`gem env`
查看它是否指向正确的位置：
RubyGems 环境：
- RUBYGEMS 版本：2.0.3
- RUBY 版本：2.0.0 (2013-02-08 patchlevel -1) [x86_64-linux]
- 安装目录： /home/[yourpath]/.rbenv/versions/2.0.0-rc2/lib/ruby/gems/2.0.0
- RUBY 可执行文件：/home/[yourpath]/.rbenv/versions/ 2.0.0-rc2/bin /ruby
- 可执行目录： /home/[yourpath]/.rbenv/versions/2.0.0-rc2/bin
- RUBYGEMS 平台：
- ruby
​​ - x86_64-linux
- GEM 路径：
- /home/[yourpath]/.rbenv/版本
/2.0.0-rc2/lib/ruby/gems/2.0.0 - /home/[yourpath]/.gem/ruby/2.0.0 - GEM 配置：
- :update_sources => true
- :verbose => true
- :backtrace => false
- :bulk_threshold => 1000
- 远程源：
- [https://rubygems.org/](https://rubygems.org/)

然后我尝试再次安装 gem

> 宝石安装导轨

现在它安装到正确的地方:)
请让我知道它是否适合你

# sql - 查询数据库中特定项目的数量

> ID：14134555
> 
> 赞同：3
> 
> 时间：2013-01-03T07:13:42.310
> 
> 标签：sql, ms-access

我只是想知道如何计算特定设备的数量..

```
SELECT 
    EQUIPMENTS.DESCRIPTION AS [EQUIPMENT TYPE], 
    Count(EQUIPMENTS.EQNAME) AS QUANTITY,
    (SELECT Count(EQUIPMENTS.CONDITION) FROM EQUIPMENTS WHERE EQUIPMENTS.CONDITION = 'Functional') AS WORKING,
    (SELECT Count(EQUIPMENTS.CONDITION) FROM EQUIPMENTS WHERE EQUIPMENTS.CONDITION = 'Non-Functional') AS [NON-WORKING]
FROM EQUIPMENTS
GROUP BY EQUIPMENTS.DESCRIPTION; 
```

此查询返回以下内容：

```
EQUIPMENT NAME : PROJECTOR
QUANTITY : 3
WORKING : 2
NON-WORKING :1 
```

现在，如果我添加另一个具有不同类型的设备，例如计算器，它将具有相同的 WORKING 和 NON-WORKING 计数，仅适用于 PROJECTOR。我该如何让它也计算计算器的数量以及工作和非工作本身的数量？我的意思是每当我添加另一个具有特定描述的设备时，查询也会独立计算它吗？

我正在使用 VB.NET，这个查询是在 MS ACCESS 2007 中进行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:33:45.033

条件满足时使用`IIf()`表达式返回 1，不满足时返回 0。然后`Sum`是那些价值观。

```
SELECT 
    e.DESCRIPTION AS [EQUIPMENT TYPE], 
    Count(e.EQNAME) AS QUANTITY,
    Sum(IIf(e.CONDITION = 'Functional', 1, 0)) AS WORKING,
    Sum(IIf(e.CONDITION = 'Non-Functional', 1, 0)) AS [NON-WORKING]
FROM EQUIPMENTS AS e
GROUP BY e.DESCRIPTION; 
```

# c# - 以编程方式将资源文件添加到另一个项目

> ID：14134556
> 
> 赞同：0
> 
> 时间：2013-01-03T07:13:49.580
> 
> 标签：c#, resources, resx

我需要以编程方式创建资源文件 (.resx)。这些资源文件适用于其他项目，而不是我以编程方式创建这些 resx 文件的项目。

有没有一种干净的方法来告诉其他解决方案/项目它必须添加外部创建的资源文件。在资源文件中存储字符串，稍后将在该项目中使用。

例子：

我使用名为 ResourceCreator 的项目创建了一个 Resource.resx 文件。现在我必须告诉一个名为 MyProject 的项目将其绑定到解决方案/项目中，而不必手动打开解决方案并添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:26:38.103

我相信你真的很想创建[Satellite Assemblies](http://msdn.microsoft.com/en-us/library/21a15yht%28v=vs.71%29.aspx)。

> 附属程序集是一个编译库 (DLL)，其中包含（“可本地化”）资源，例如字符串、位图等。您可能会在创建多语言 (UI) 应用程序时使用它们。附属程序集为您提供了针对多种文化设计和部署解决方案的能力，而不是将字符串、位图等硬编码到您的主应用程序中。附属程序集用于在多种文化（不是语言）中部署应用程序，每种文化有 1 个附属程序集 - 这是默认行为，但如果您手动处理构建过程，您显然可以进行更精细的控制。

[MSDN 参考 - 卫星组件简介](http://blogs.msdn.com/b/global_developer/archive/2011/07/22/introduction-to-satellite-assemblies.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:24:04.723

尝试查看`Microsoft.Build`命名空间，它有各种奇特的方式来加载/修改项目和解决方案文件。

[Microsoft.Build 命名空间](http://msdn.microsoft.com/en-us/library/gg145008.aspx)

# objective-c - UIImagePickerController 实时预览方向错误

> ID：14134557
> 
> 赞同：4
> 
> 时间：2013-01-03T07:13:54.307
> 
> 标签：objective-c, ipad, cocoa-touch, ios6, uiimagepickercontroller

我有一个横向应用程序，并以模态方式向我的活动视图控制器`iPad`呈现一个`UIImagePickerController`带有源类型的内容。`UIImagePickerControllerSourceTypeCamera`但是，实时预览的方向错误，当我以错误的方向拍照时，它会输出方向正确的图像。

当我旋转时`iPad`，它会固定方向，但它会根据方向在屏幕的一侧制作一个粗黑条（相机覆盖视图不会被这个黑条截断......只有预览） .

一切都很好`iOS5`，但`iOS6`搞砸了相机。

如何修复此实时预览方向错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:17:19.657

为了修复屏幕底部的黑屏，您必须根据设备（iPad 或 iPhone）进行平移和缩放。

```
 CGAffineTransform translate = CGAffineTransformMakeTranslation(0.0, 25.0);
    self.picker.cameraViewTransform = CGAffineTransformScale(translate, 480.0/380.0, 480.0/380.0); 
    self.picker.cameraOverlayView = self.view; 
```

尝试根据设备更改比例值，使黑条消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:17:51.340

尝试这个：

```
 dispatch_async(dispatch_get_main_queue(), ^{
  [self presentModalViewController:yourUIImagePickerControlle animated:YES];
 }); 
```

# java - 需要在正则表达式中转义的所有特殊字符的列表

> ID：14134558
> 
> 赞同：122
> 
> 时间：2013-01-03T07:14:11.163
> 
> 标签：java, regex

我正在尝试创建一个将消息模板与用户尝试发送的消息相匹配的应用程序。我正在使用 Java 正则表达式来匹配消息。模板/消息可能包含特殊字符。

如何获得需要转义的特殊字符的完整列表，以便我的正则表达式在最大可能的情况下工作和匹配？

是否有一个通用的解决方案来转义 Java 正则表达式中的所有特殊字符？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-03T07:44:05.003

您可以查看 Pattern 类的 javadoc：http: [//docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html)

如果您想要常规字符而不是特殊含义，则需要转义此处列出的任何字符。

作为一个可能更简单的解决方案，您可以将模板放在 \Q 和 \E 之间 - 它们之间的所有内容都被视为转义。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2014-10-07T05:03:29.860

*   必须在正则表达式中转义的 Java 字符是：
    `\.[]{}()<>*+-=!?^$|`
*   两个右括号 (`]`和`}`) 只需要在打开相同类型的括号后进行转义。
*   在`[]`-brackets 中，某些字符（如`+`和`-`）有时会在没有转义的情况下工作。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-05-13T18:02:54.270

为了逃避，你可以从[Java 1.5](http://download.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote(java.lang.String))中使用它：

```
Pattern.quote("$test"); 
```

你将完全匹配这个词`$test`

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-12-13T00:53:41.590

根据[字符串文字/元字符](http://docs.oracle.com/javase/tutorial/essential/regex/literals.html)文档页面，它们是：

`<([{\^-=$!|]})?*+.>`

在代码中的某个地方引用该列表也会很酷，但我不知道那可能在哪里......

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-04-01T06:22:26.667

结合大家所说，我提出以下建议，以保持 RegExp 特殊字符列表清楚地列在自己的 String 中，并避免不得不尝试直观地解析数千个“\\”。这对我来说似乎工作得很好：

```
final String regExSpecialChars = "<([{\\^-=$!|]})?*+.>";
final String regExSpecialCharsRE = regExSpecialChars.replaceAll( ".", "\\\\$0");
final Pattern reCharsREP = Pattern.compile( "[" + regExSpecialCharsRE + "]");

String quoteRegExSpecialChars( String s)
{
    Matcher m = reCharsREP.matcher( s);
    return m.replaceAll( "\\\\$0");
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-08-23T23:48:38.610

虽然答案是针对 Java 的，但是代码可以很容易地从我想出的这个 Kotlin 字符串扩展中改编（改编自 @brcolow 提供的那个）：

```
private val escapeChars = charArrayOf(
    '<',
    '(',
    '[',
    '{',
    '\\',
    '^',
    '-',
    '=',
    '$',
    '!',
    '|',
    ']',
    '}',
    ')',
    '?',
    '*',
    '+',
    '.',
    '>'
)

fun String.escapePattern(): String {
    return this.fold("") {
      acc, chr ->
        acc + if (escapeChars.contains(chr)) "\\$chr" else "$chr"
    }
}

fun main() {
    println("(.*)".escapePattern())
} 
```

印刷`\(\.\*\)`

在此处查看实际操作[https://pl.kotl.in/h-3mXZkNE](https://pl.kotl.in/h-3mXZkNE)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-02-12T04:17:50.407

在@Sorin 对 Java Pattern 文档的建议中，看起来要转义的字符至少是：

```
\.[{(*+?^$| 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-05-24T21:49:47.533

`Pattern.quote(String s)`那种做你想做的事。然而，它还有一些不足之处。它实际上并没有转义单个字符，只是用`\Q...\E`.

没有一种方法可以完全满足您的需求，但好消息是，在 Java 正则表达式中转义所有特殊字符实际上相当简单：

```
regex.replaceAll("[\\W]", "\\\\$0") 
```

为什么这行得通？好吧，文档[`Pattern`](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#bs)专门说它允许转义不一定必须转义的非字母字符：

> 在任何不表示转义结构的字母字符之前使用反斜杠是错误的；这些是为将来对正则表达式语言的扩展而保留的。**可以在非字母字符之前使用反斜杠，无论该字符是否是未转义结构的一部分。**

例如，`;`不是正则表达式中的特殊字符。但是，如果你逃避它，`Pattern`仍然会解释`\;`为`;`. 这里还有几个例子：

*   `>`变成`\>`相当于`>`
*   `[`成为`\[`的转义形式`[`
*   `8`还在`8`。
*   `\)`成为`\\\)`它是转义形式`\`和`(`连接。

**注意：**关键是“非字母”的定义，在文档中真正的意思是“非*单词*”字符，或者字符集之外的字符`[a-zA-Z_0-9]`。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-01-03T07:39:30.463

在硬币的另一面，如果特殊字符 = allChars - 数字 - ABC - 在您的应用程序上下文中的空间，您应该使用看起来像这样的“非字符”正则表达式。

```
String regepx = "[^\\s\\w]*"; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-05T19:09:28.800

假设您拥有并信任（具有权威性）Java regex 使用的转义字符列表（如果这些字符暴露在某个 Pattern 类成员中会很好），如果确实有必要，您可以使用以下方法来转义字符：

```
private static final char[] escapeChars = { '<', '(', '[', '{', '\\', '^', '-', '=', '$', '!', '|', ']', '}', ')', '?', '*', '+', '.', '>' };

private static String regexEscape(char character) {
    for (char escapeChar : escapeChars) {
        if (character == escapeChar) {
            return "\\" + character;
        }
    }
    return String.valueOf(character);
} 
```

# java - 两次比较

> ID：14134566
> 
> 赞同：-1
> 
> 时间：2013-01-03T07:14:47.223
> 
> 标签：java, date, time

我试图比较两次，没有得到如何做。我没有任何例子。请告诉我

```
SimpleDateFormat stDateSimple1 = new SimpleDateFormat(" HH:mm:ss");
String str1= (String)stDateSimple1.format(cal.getTime());
System.out.println("str1-->"+str1);

String starttime="8:30:00";
String endtime="10:30:00";

if(starttime<str1 || endtime>str1  ){
    System.out.println("Display");
}else{
    System.out.println("Dont recortDisplay");
} 
```

我试过这个得到错误请如何检查时间条件

谢谢，
 svn

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:32:53.637

您可以使用[乔达时间](http://joda-time.sourceforge.net/)。它有非常好的方法，比如`isBefore()`

![在此处输入图像描述](../Images/12ab7ca63dd0a209e5a7432a6eaf01c9.png)

这是一个使用示例：

```
DateFormat df = new SimpleDateFormat("HH:mm:ss");
String starttime="8:30:00";
String endtime="10:30:00";

DateTimeFormatter fmt = DateTimeFormat.forPattern("HH:mm:ss");
DateTime dateTime1 = fmt.parseDateTime(starttime);
DateTime dateTime2 = fmt.parseDateTime(endtime);

if (dateTime1.isBefore(dateTime2)){
    System.out.println("awesome");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:23:31.310

您正在尝试使用`<`运算符比较字符串。您应该将时间字符串格式化为 Date 对象，然后比较这些日期对象

像这样的东西应该适合你。

```
if (new SimpleDateFormat("HH:mm:ss").parse(yourSring).compareTo(new Date()) > 0) {
   ...
} 
```

由于上午和下午不在那里，时间似乎是 24 小时格式。如果是 12 小时格式，则必须使用格式字符串`"hh:mm:ss"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T07:34:58.353

你可以试试这个。

```
// AM/PM Format

public boolean compareTime(String t1, String t2) 
{
        try
        {
            SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss a");

            long time1 = format.parse(t1).getTime();
            long time2 = format.parse(t2).getTime();
                return time1 > time2;
         } 
         catch(ParseException e)
         {
                return false;
         }      

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:17:40.097

如果您已经在`Calendar`实例使用中设置了时间`compareTo()`，如果您想忽略日期部分，请将其设置为一些常用值

# datetime - Extjs 4 日期 - 更改时区

> ID：14134567
> 
> 赞同：0
> 
> 时间：2013-01-03T07:14:49.597
> 
> 标签：datetime, extjs, time, extjs4, timezone

简单的问题，正如标题所说，如何更改 Extjs 4 中 Date 对象的时区？

使用：

```
 var today = new Date() 
```

获取 PC 而不是服务器的日期，因此每次使用该行代码时我都必须更改时区。遗憾的是，我还没有看到任何**setTimezone()**方法。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:13:40.997

你错过了一些东西。Date 对象不包含时区。当您想要显示日期时，时区就会发挥作用。当您将日期转换为字符串时，您需要为其提供您想要格式化输出的地球位置。在 Java 中是 SimpleDateFormat 或类似的类。如果你在纽约早上 6 点出生，那么当时旧金山是凌晨 3 点。您的 Date 对象将是相同的，但输出字符串会因位置而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:55:31.150

你去：[www.datejs.com](http://www.datejs.com)

这个框架已经包含了你需要的方法！如果您不想包含整个框架，只需复制您需要的内容即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:39:08.700

与其每次都更改时区，不如创建您自己的 Date 类，该类将具有根据帐户设置添加或减去时区的实现。

# php - 使用 Ajax 和标头重定向注销错误

> ID：14134568
> 
> 赞同：1
> 
> 时间：2013-01-03T07:14:55.043
> 
> 标签：php, ajax, security, login, http-headers

我正在尝试做一些事情，如果用户在未登录时尝试在我的系统中执行某个功能，它会弹出一条消息说他们无法执行此操作，因为他们没有登录。然后将它们发送到按确定时的登录屏幕。

如果用户直接输入 url，我还希望它能够将用户重定向回登录屏幕，但这次没有错误消息。

我有：

```
$components = explode('/', $url, 3) ;

if(!isset($_SESSION['loggedin']) && $components[0] != 'access' && $components[0] != 'login')
    {

        echo json_encode('{"error": 2000, "msg": "You must be logged in to do that."}') ;
        return false ;
} 
```

这对 Ajax 来说很好，但如果输入了 url 则不起作用。如果用户在登录屏幕上， $components[0] != 'access' 等只是停止执行此条件。

如何在没有影响 Ajax 调用的标头位置的情况下执行此操作，并且在用户访问禁止的 url 时不简单地回显错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:52:13.007

> 如何在没有影响 Ajax 调用的标头位置的情况下执行此操作，并且在用户访问禁止的 url 时不简单地回显错误消息？

有多种方法可以实现这一点，让我们在这里讨论两种：

# 检查推荐人

首先，您可以检查 HTTP 引用，浏览器将链接到当前页面的页面的 URL 作为 HTTP 标头发送。

`http://foo.invalid/blah/?action=newfolder.php`当用户单击表单/链接时，请查看此（缩短的）HTTP 请求。

### 要求

```
Request URL:http://foo.invalid/blah/?action=newfolder.php
Request Method:POST 
```

### 标头

```
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Host:foo.invalid
Referer:http://foo.invalid/ 
```

可以看到有“Referer”字段，如果用户直接打开`http://foo.invalid/blah/?action=newfolder.php`，就不会有referer字段。

### 来源

```
<?php 
if (empty($_SERVER['HTTP_REFERER'])) {
    // Redirect to login (Referer empty)
} else {
    // Show JSON warning (Referer not empty)
}
?> 
```

但是，此解决方案*并不*那么可靠，因为一些用户出于隐私原因禁用或伪造了引用者。

# 添加自定义 HTTP 标头字段

更好的方法是发送自定义 HTTP 标头，请注意您只能将自定义 HTTP 标头添加到 AJAX 请求。[JQuery](http://api.jquery.com/jQuery.ajax/)等一些库已经为您添加了自定义标头。

### 源 ( [XMLHttpRequest](http://www.w3.org/TR/2006/WD-XMLHttpRequest-20060405/#dfn-setrequestheader) )

```
var r = new XMLHttpRequest();
r.open('get', '/blah/?action=newfolder.php');
r.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
r.send(null); 
```

现在请求将包含自定义`X-Requested-With`标头，如果缺少标头，您可以假设该页面是通过输入 URL 打开的。

```
<?php 
if (empty($_SERVER['HTTP_X_REQUESTED_WITH'])) {
    // Redirect to login (X-Requested-With empty)
} else {
    // Show JSON warning (X-Requested-With not empty)
}
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T07:31:30.783

```
$UserName = "username";
$PassWord = "password";

if ($_SERVER['PHP_AUTH_USER'] != $UserName || $_SERVER['PHP_AUTH_PW'] != $PassWord) {
        header('WWW-Authenticate: Basic realm="My Realm"');
        header('HTTP/1.1 401 Unauthorized');
        die('Your username and password is incorrect');
                    // or you can redirect user if username or password is incorrect
                header("Location:"your redirecting url);              
} 
```

请使用此代码，它可能对您有所帮助....

要了解有关 php 中身份验证的更多信息，请参见以下链接：

[http://php.net/manual/features.http-auth.php](http://php.net/manual/features.http-auth.php)

# asp.net - 数据绑定时将 CssClass 附加到带有皮肤的 GridViewRow

> ID：14134571
> 
> 赞同：0
> 
> 时间：2013-01-03T07:15:11.890
> 
> 标签：asp.net, gridview

我刚刚创建了这个扩展：

```
public static class GridViewRowExtension
{
    public static void AppendCssClass(this GridViewRow row, string cssClass)
    {
        row.CssClass = string.Format("{0} {1}", row.CssClass, cssClass).Trim();
    }
} 
```

并在**OnRowDataBound**事件中使用它：

```
 protected void OnInstrumentsRowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            AdjustRow(e.Row);
            ToggleCloseButton(e.Row);
            DisplayPerformance(e.Row);
        }
        else
        {
            e.Row.AppendCssClass("nodrag nodrop grt_gridview_default_header");
        }
    } 
```

但是附加不起作用，因为 row.CssClass 在此行中用作 {0}：

```
row.CssClass = string.Format("{0} {1}", row.CssClass, cssClass).Trim(); 
```

是空的。我期待它会在 GridView 默认皮肤中定义一个 CssClass。

我确定我的 Skin 工作正常，因为当我删除 AppendCssClass 调用时，我看到在 skin 中定义了 CssClass。

任何想法为什么我没有达到我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:20:53.473

你为什么不为此尝试一下jQuery，它可能对你有用

```
$(document).ready(function ()
 {$("#divGridView table tbody tr").each(function () 
     {
    var myClass = $(this).attr("class");
    $(this).removeClass(myClass);
    $(this).addClass(myClass + " nodrag nodrop grt_gridview_default_header");

})}); 
```

# c - avformat_open_input() 有什么作用？

> ID：14134589
> 
> 赞同：8
> 
> 时间：2013-01-03T07:17:03.423
> 
> 标签：c, ffmpeg

我正在按照[此](https://github.com/mpenkov/ffmpeg-tutorial/blob/master/tutorial01.c)代码使用 C 中的 FFmpeg 库。FFmpeg 库的文档很少，很难理解每个函数的确切作用。

我理解代码（正在做什么）。但我缺乏清晰度。谁能帮帮我？

Q1) **struct AVFrameContext **** 和**文件名**（所需的最少非 NULL 参数）被传递给函数 avformat_open_input()。顾名思义，输入文件是“打开的”。如何 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T10:05:02.663

在 file_open 中完成的主要事情是

*   为 AVFormatContext 分配内存。
*   从文件中读取有关数据的probe_size（输入url）
*   尝试猜测输入文件格式，输入文件的编解码器参数。这是通过为每个解复用器调用 read_probe 函数指针来完成的
*   分配编解码器上下文、解复用上下文、I/O 上下文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T07:35:10.130

你可以在 FFmpeg 中查看那里`libavformat\utils.c`真正发生的事情：

```
int avformat_open_input(AVFormatContext **ps, const char *filename, AVInputFormat *fmt, AVDictionary **options)
{
    AVFormatContext *s = *ps;
    int ret = 0;
    AVDictionary *tmp = NULL;
    ID3v2ExtraMeta *id3v2_extra_meta = NULL;

    if (!s && !(s = avformat_alloc_context()))
        return AVERROR(ENOMEM);
        // on and on 
```

# postgresql - 从 Windows 机器访问 Postgress 数据库的最简单方法是什么？

> ID：14134592
> 
> 赞同：0
> 
> 时间：2013-01-03T07:17:11.773
> 
> 标签：postgresql

我在 linux 服务器上有一个 Postgres 数据库。我有 root 访问权限，这反过来又可以让我访问数据库。在 Windows 中你会得到 PGAdminIII，我很想用它来连接 Linux 服务器。我听说隧道可能是必要的。我不确定这是不是真的，或者它是真的。任何人都可以阐明访问数据库的最简单方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:34:26.170

隧道并不是绝对必要的。只要您的端口 5432 没有防火墙，您应该能够轻松连接到 Linux PostgreSQL 服务器。

您可以使用 cmd 控制台中的以下命令从 Windows 框中检查这一点：

```
telnet linuxbox 5432 
```

如果你得到黑屏（不是错误），那么一切看起来都很好，端口 5432 应该是打开的。请注意，在 Windows 7 上，您可能需要`telnet`使用以下命令启用客户端（默认情况下禁用）：

```
pkgmgr /iu:"TelnetClient" 
```

如果您的服务器不在本地网络中，或者如果您担心安全问题，例如有人使用网络嗅探器监视您的流量，您应该在您的 PostgreSQL 服务器上配置 SSL/TLS - 这并不难，而且完全免费使用自签名证书时。

请注意，默认情况下 Linux 上的 Postgres 不会侦听网络接口，您可能需要通过编辑`postgresql.conf`.

# android - 谷歌地图未在android中显示

> ID：14134593
> 
> 赞同：1
> 
> 时间：2013-01-03T07:17:18.967
> 
> 标签：android, google-maps, google-maps-api-3

我在 android 中开发了一个应用程序，它使用谷歌地图来显示用户位置附近的购物中心列表。

这是我实现它的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <org.fluturasymphony.recommendation.StoreMapView 
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="0aHtkSh4B8Ub3ELLFUMRWJD23wpEWJAsFxL-ilw"
        />

</RelativeLayout> 
```

商店地图活动的代码。

```
public class StoreMapActivity extends MapActivity {
   List<GeoPoint> items = new ArrayList<GeoPoint>();   
   StoreMapView mapView;  

  @SuppressWarnings("deprecation")
@Override
  public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);
    SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    String outlet_details = myPrefs.getString("outlet_details", "null");
    String show_all = myPrefs.getString("show_all","null");

    this.mapView = init();

    //MapController mc = mapView.getController();
    @SuppressWarnings("unused")
    GeoPoint p = new GeoPoint(0,0);

       // String all_data = "[{\"outlet_latlng\":\"12.928569,77.58311\",\"outlet_id\":\"1\",\"outlet_desc\":\"BigBazaar\",\"outlet_loc\":\"Jayanagar4thBlock\",\"outlet_image\":\"bigbazaar.png\",\"recommended_products\":[{\"item_id\":\"3\",\"item_desc\":\"dettol\",\"item_image\":\"dettol.png\"}]},{\"outlet_latlng\":\"12.939235,77.578068\",\"outlet_id\":\"2\",\"outlet_desc\":\"FoodWorld\",\"outlet_loc\":\"Basavanagudi\",\"outlet_image\":\"foodworld.png\",\"recommended_products\":[{\"item_id\":\"3\",\"item_desc\":\"dettol\",\"item_image\":\"dettol.png\"},{\"item_id\":\"3\",\"item_desc\":\"colgate\",\"item_image\":\"colgate.png\"}]},{\"outlet_latlng\":\"12.958934,77.657161\",\"outlet_id\":\"5\",\"outlet_desc\":\"Total\",\"outlet_loc\":\"MurgeshPalaya\",\"outlet_image\":\"total.png\",\"recommended_products\":[{\"item_id\":\"3\",\"item_desc\":\"dettol\",\"item_image\":\"dettol.png\"},{\"item_id\":\"3\",\"item_desc\":\"colgate\",\"item_image\":\"colgate.png\"}]}]"; // temp data

                myPrefs = StoreMapActivity.this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
                String client = myPrefs.getString("client", "godrej");
                String url = "http://10.0.2.2/Flutura/PHP/Core/Data/android.data.php?request=outlets";
                Log.v("url",url);
                AsyncHttpClient httpclient = new AsyncHttpClient();
                httpclient.get(url, new AsyncHttpResponseHandler() {
                    @Override
                    public void onSuccess(String response) {
                        try {
                            Log.v("response",response);
                            updateMap(response);

                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                });                

}

  protected void updateMap(String json) throws JSONException{
     Log.v("json",json);
    ArrayList<String> outlets = Utils.ToArrayList(new JSONArray(json));

    Iterator<String> i = outlets.iterator();
    while(i.hasNext()){
      String j = i.next();   
      displayOutlet(this.mapView,new JSONObject(j));
    }

 this.setMapBoundsToPois(this.mapView, items, 0.1, 0.2);
 mapView.invalidate();
  }

  @Override
  protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;// Minimum & maximum latitude so we can span it   
  }

  protected StoreMapView init(){

    // Initialize Map Object
    StoreMapView mapView = (StoreMapView) findViewById(R.id.mapView);

    // Add zoom controls
    mapView.setBuiltInZoomControls(true);

    // Add listener    
    mapView.setOnChangeListener(new MapViewChangeListener());

    return mapView;
  }

  protected GeoPoint displayOutlet(StoreMapView mapView,JSONObject outlet) throws JSONException{    

    String coordinates[] =outlet.getString("outlet_latlng").split(",");
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]); 

    GeoPoint p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6));

    this.items.add(p);

    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.marker);
    StoreOverlay itemizedoverlay = new StoreOverlay(drawable, this);

    ArrayList<String> recomm_products = Utils.ToArrayList(new JSONArray(outlet.getString("recommended_products")));
    Iterator<String> i = recomm_products.iterator();
    String recommended_products = "";
    int index = 0;
    while (i.hasNext()) {
       index++;
       String j = i.next();
       JSONObject item = new JSONObject(j);
       Log.v("j",j);
       itemizedoverlay.addItem(item.getString("item_name"));
    }
    OverlayItem overlayitem = new OverlayItem(p, outlet.getString("outlet_desc"), "Recommended Products");
    itemizedoverlay.addOverlay(overlayitem);

    mapOverlays.add(itemizedoverlay);   

    return p;
  }

  private class MapViewChangeListener implements StoreMapView.OnChangeListener
  {

      @Override
      public void onChange(MapView view, GeoPoint newCenter, GeoPoint oldCenter, int newZoom, int oldZoom)
      {
          // Check values
          if ((!newCenter.equals(oldCenter)) && (newZoom != oldZoom))
          {
              // Map Zoom and Pan Detected
              // TODO: Add special action here
          }
          else if (!newCenter.equals(oldCenter))
          {
              // Map Pan Detected
              // TODO: Add special action here
          }
          else if (newZoom != oldZoom)
          {
              // Map Zoom Detected
              // TODO: Add special action here
          }
      }
  }

  public void setMapBoundsToPois(StoreMapView mapView,List<GeoPoint> items, double hpadding, double vpadding) {

    MapController mapController = mapView.getController();
    // If there is only on one result
    // directly animate to that location

    if (items.size() == 1) { // animate to the location
      mapController.animateTo(items.get(0));
    } else {
        // find the lat, lon span
        int minLatitude = Integer.MAX_VALUE;
        int maxLatitude = Integer.MIN_VALUE;
        int minLongitude = Integer.MAX_VALUE;
        int maxLongitude = Integer.MIN_VALUE;

        // Find the boundaries of the item set
        for (GeoPoint item : items) {
            int lat = item.getLatitudeE6(); int lon = item.getLongitudeE6();

            maxLatitude = Math.max(lat, maxLatitude);
            minLatitude = Math.min(lat, minLatitude);
            maxLongitude = Math.max(lon, maxLongitude);
            minLongitude = Math.min(lon, minLongitude);
        }

        // leave some padding from corners
        // such as 0.1 for hpadding and 0.2 for vpadding
        maxLatitude = maxLatitude + (int)((maxLatitude-minLatitude)*hpadding);
        minLatitude = minLatitude - (int)((maxLatitude-minLatitude)*hpadding);

        maxLongitude = maxLongitude + (int)((maxLongitude-minLongitude)*vpadding);
        minLongitude = minLongitude - (int)((maxLongitude-minLongitude)*vpadding);

        // Calculate the lat, lon spans from the given pois and zoom
        mapController.zoomToSpan(Math.abs(maxLatitude - minLatitude), Math
.abs(maxLongitude - minLongitude));

        // Animate to the center of the cluster of points
        mapController.animateTo(new GeoPoint(
              (maxLatitude + minLatitude) / 2, (maxLongitude + minLongitude) / 2));
    }
} // end of the method
} 
```

商店地图视图的代码。

```
public class StoreMapView extends MapView
{ 
  // ------------------------------------------------------------------------
  // LISTENER DEFINITIONS
  // ------------------------------------------------------------------------

  // Change listener
  public interface OnChangeListener
  {
    public void onChange(MapView view, GeoPoint newCenter, GeoPoint oldCenter, int newZoom, int oldZoom);
  }

  // ------------------------------------------------------------------------
  // MEMBERS
  // ------------------------------------------------------------------------

  private StoreMapView mThis;
  private long mEventsTimeout = 250L;   // Set this variable to your preferred timeout
  private boolean mIsTouched = false;
  private GeoPoint mLastCenterPosition;
  private int mLastZoomLevel;
  //private Timer mChangeDelayTimer = new Timer();
  private StoreMapView.OnChangeListener mChangeListener = null;

  // ------------------------------------------------------------------------
  // RUNNABLES
  // ------------------------------------------------------------------------

  private Runnable mOnChangeTask = new Runnable()
  {
    @Override
    public void run()
    {
      if (mChangeListener != null) mChangeListener.onChange(mThis, getMapCenter(), mLastCenterPosition, getZoomLevel(), mLastZoomLevel);
      mLastCenterPosition = getMapCenter();
      mLastZoomLevel = getZoomLevel();      
    }
  };

  // ------------------------------------------------------------------------
  // CONSTRUCTORS
  // ------------------------------------------------------------------------

  public StoreMapView(Context context, String apiKey)
  {
    super(context, apiKey);
    init();
  }

  public StoreMapView(Context context, AttributeSet attrs)
  {
    super(context, attrs);
    init();
  }

  public StoreMapView(Context context, AttributeSet attrs, int defStyle)
  {
    super(context, attrs, defStyle);
    init();
  }

  private void init()
  {
    mThis = this;
    mLastCenterPosition = this.getMapCenter();
    mLastZoomLevel = this.getZoomLevel();
  }

  // ------------------------------------------------------------------------
  // GETTERS / SETTERS
  // ------------------------------------------------------------------------

  public void setOnChangeListener(StoreMapView.OnChangeListener l)
  {
    mChangeListener = l;
  }

  // ------------------------------------------------------------------------
  // EVENT HANDLERS
  // ------------------------------------------------------------------------

  @Override
  public boolean onTouchEvent(MotionEvent ev)
  {   
    // Set touch internal
    mIsTouched = (ev.getAction() != MotionEvent.ACTION_UP);

    return super.onTouchEvent(ev);
  }

  @Override
  public void computeScroll()
  {
    super.computeScroll();

    // Check for change
    if (isSpanChange() || isZoomChange())
    {
      // If computeScroll called before timer counts down we should drop it and 
      // start counter over again
      resetMapChangeTimer();
    }
  }

  // ------------------------------------------------------------------------
  // TIMER RESETS
  // ------------------------------------------------------------------------

  private void resetMapChangeTimer()
  {
    StoreMapView.this.removeCallbacks(mOnChangeTask);
    StoreMapView.this.postDelayed(mOnChangeTask, mEventsTimeout);
  }

  // ------------------------------------------------------------------------
  // CHANGE FUNCTIONS
  // ------------------------------------------------------------------------

  private boolean isSpanChange()
  {
    return !mIsTouched && !getMapCenter().equals(mLastCenterPosition);
  }

  private boolean isZoomChange()
  {
    return (getZoomLevel() != mLastZoomLevel);
  }

} 
```

但是当我运行模拟器时，我得到一个像这样的空白屏幕。我该如何解决？

![在此处输入图像描述](../Images/fac8cfdcc12d9b2aa55ac257e531b132.png)

告诉我我在这里做错了什么。

嗨，我现在遇到了 log cat 错误。

01-03 07:28:02.585: E/MapActivity(3823): 无法获取连接工厂客户端

01-03 07:30:26.165: E/MapActivity(12298): 无法获取连接工厂客户端

我的安卓清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.fluturasymphony.recommendation"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="9"
              android:targetSdkVersion="11" />
    <uses-permission android:name="android.permission.INTERNET" />    
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <activity android:label="@string/app_name" android:name=".LoginActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="org.achartengine.GraphicalActivity" />
        <activity android:name=".CategoryWiseSalesChartActivity" />
        <activity android:name=".ProductWiseSalesChartActivity" />
        <activity android:label="@string/home_screen" android:name=".HomeActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/store_screen" android:name=".StoreActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/store_list_screen" android:name=".StoreListActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/location_screen" android:name=".StoreMapActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/recommended_products_list_screen" android:name=".RecommendedProductsListActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/category_wise_sales_screen" android:name=".CategoryWiseSalesActivity" android:configChanges="orientation">            
        </activity>
        <activity android:label="@string/product_wise_sales_screen" android:name=".ProductWiseSalesActivity" android:configChanges="orientation">            
        </activity>
                <uses-library android:name="com.google.android.maps" />

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:02:43.273

请生成新的 android 地图密钥，然后在 XML 中替换此密钥...可能是密钥未正确生成的问题...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:09:22.660

我认为您的 android 地图 api 密钥无法正确生成，然后您只需点击此链接并获取 google 地图 api 密钥， [https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

# wordpress - 在 Wordpress 媒体库中查看其他编辑者上传的图像时限制编辑者

> ID：14134595
> 
> 赞同：0
> 
> 时间：2013-01-03T07:17:23.123
> 
> 标签：wordpress, media-library

嗨，我的 functions.php 中有这段代码，当编辑器查看媒体库时它运行良好：[http ://example.com/wp-admin/upload.php](http://example.com/wp-admin/upload.php)

```
add_action('pre_get_posts','users_own_attachments');

function users_own_attachments( $wp_query_obj ) {

global $current_user, $pagenow;

if( !is_a( $current_user, 'WP_User') )
    return;

if ( 'upload.php' != $pagenow ) 
    return;

if( !current_user_can('delete_users') )
    $wp_query_obj->set('author', $current_user->ID );

return;
} 
```

上面的代码会阻止其他编辑在媒体库中查看其他编辑上传的图片。只有管​​理员可以看到所有上传的图片。编辑只能看到自己上传的图片（不能看到别人上传的图片）。

现在问题来了，在创建或编辑帖子时，Wordpress 有一个“添加媒体”按钮，允许用户将图像上传到他们的画廊。但是当用户通过“添加媒体”弹出窗口上传时，上面的代码不起作用。他们仍然可以看到其他编辑上传的图片。

如何修改上述代码，使其在用户通过“添加媒体”弹出窗口而不是媒体库查看图像时仍然有效？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:02:48.103

我在这里有我的答案：[https ://wordpress.stackexchange.com/questions/78084/prevent-other-editors-from-viewing-images-of-other-editors-in-add-media-popup](https://wordpress.stackexchange.com/questions/78084/prevent-other-editors-from-viewing-images-of-other-editors-in-add-media-popup)

该策略是添加一个条件标签，该标签将检查用户是否正在查看添加媒体弹出窗口。

# c# - 如何使用 SWIG 将 double[] 从 c# 传递到 c++

> ID：14134598
> 
> 赞同：3
> 
> 时间：2013-01-03T07:17:25.563
> 
> 标签：c#, swig

我有一个 c++ 类和一个成员函数使用两个双精度数组作为输入，例如：

```
class model{
//define some varible..
void Trainmodel(double *x,double *y);
//...
}; 
```

我想在 c# 中使用这个类，并按照`./swigwin2.0.9/examples/csharp/arrays`帮助页面中的示例和指南进行操作：[SWIG](http://www.swig.org/Doc1.3/CSharp.html#CSharp_arrays) 我的 model.MY 文件如下：

```
%module model_dll 
%{
/* Includes the header in the wrapper code */
#include "model.h"
%}
/* Parse the header file to generate wrappers */
%include "model.h"
%include "arrays_csharp.i"
%apply double INPUT[]  { double* x }
%apply double INPUT[] { double* y } 
```

但是当我在c#中使用这个函数时，会发生错误：错误1 最佳重载方法匹配`model.Trainmodel(SWIGTYPE_p_double, SWIGTYPE_p_double)`有一些无效参数和错误2参数1：无法转换`double[]`为`SWIGTYPE_p_double`

我检查了model.cs的源代码，发现trainmodel函数是这样的：

```
public int Trainmodel(SWIGTYPE_p_double x, SWIGTYPE_p_double y) {
//do something
} 
```

谁能帮我弄清楚这些代码有什么问题？为什么 swig generate `SWIGTYPE_p_double`而不是`double []`？

* * *

我在下面的 SWIG 中复制示例代码：

c#代码：

```
int[] source = { 1, 2, 3 };
int[] target = new int[ source.Length ];

example.myArrayCopy( source, target, target.Length ); 
```

c代码：

```
void myArrayCopy( int* sourceArray, int* targetArray, int nitems ) {
int i;
for ( i = 0; i < nitems; i++ ) {
targetArray[ i ] = sourceArray[ i ];
}
} 
```

.i 变形文件：

```
%include "arrays_csharp.i"
%apply int INPUT[]  {int *sourceArray}
%apply int OUTPUT[] {int *targetArray} 
```

我错过了什么吗？

* * *

抱歉，我犯了这么愚蠢的错误。（WTF！:-( ) 在 *.i 文件中，代码“%include”model.h“”应该放在这些代码“%include”arrays_csharp.i“%apply .. ." 不是之前。所以正确的形式是：

```
%module model_dll 
%{
/* Includes the header in the wrapper code */
#include "model.h"
%}
/* Parse the header file to generate wrappers */
%include "arrays_csharp.i"
%apply double INPUT[]  { double* x }
%apply double INPUT[] { double* y }
%include "model.h"//BE CAREFUL: this should put after the include"arrays_csharp.i" 
```

问题已经解决了。任何想要包含 arrays_csharp.i 的人，请确保在包含您自己的 .h 文件（在本例中为 model.h）之前编写“包含”代码和“应用”代码。

# c# - 如何传递参数？

> ID：14134600
> 
> 赞同：0
> 
> 时间：2013-01-03T07:17:30.167
> 
> 标签：c#

我正在编写一个小游戏，我想从一个将其传递给其他方法的方法传递，该方法将对该数字执行某些操作。这是我尝试的：

```
 public static int MatchesStart()
   {
       Console.Write("how many matches do you want to play with?");
       string matchesStartingNumber = Console.ReadLine();
       int matchesOpeningNumber = Convert.ToInt32(matchesStartingNumber);

       for (int i = 0; i < matchesOpeningNumber; i++)
       {
           Console.Write("|");
       }

       return matchesOpeningNumber;

   }

   public static int RemoveMatches( *** i want here: matchesOpeningNumber  )
   { 

    ///to do somthing with matchesOpeningNumber.

   } 
```

当我尝试将其传递给第二种方法时，它失败了.. :( 为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T07:18:58.090

```
 public static int RemoveMatches(int number )
   { 

    ///to do somthing with matchesOpeningNumber.

   } 
```

像这样称呼它：

```
 int result = RemoveMatches(matchesOpeningNumber); 
```

您应该看到： [传递值类型参数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/9t0za5es.aspx)

如果您使用 C# 4.0 或更高版本，您还可以使用[命名参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。在这种情况下，您的电话将是：

```
 int result = RemoveMatches(number: matchesOpeningNumber);
                             ^^^^^^
                             parameter name 
```

# java - Java 应用程序的 Web 界面

> ID：14134610
> 
> 赞同：0
> 
> 时间：2013-01-03T07:18:14.700
> 
> 标签：java, swing, jsp

我最近用 Java 开发了一个完整的系统，它连接到数据库并将表格内容导出和导入到 Excel 工作表中。我使用 SWING 作为用户界面。用户将与它进行交互以进行身份​​验证和文件管理。

显然，客户改变了要求，他想要 Web 界面中的一切。我的团队负责人建议查看 JSP。

1.  JSP 实际上做了什么？
2.  如果我使用 JSP，我是否必须重写 Web 中的用户界面？
3.  有没有更有效和高效的解决方案来完成这项工作？

我会欣赏一个具体的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:27:56.810

我不确定您所说的“具体答案”是什么意思，但这里是：

1.  JSP是一种基于Java的模板语言，是一种动态生成HTML的技术。这是一种服务器端技术。看[这里](http://en.wikipedia.org/wiki/JavaServer_Pages)。

2.  是的，如果您要使用纯 Web/HTML 解决方案，则需要完全重写 UI。

3.  还有其他用于创建 web 应用程序的框架，例如 Vaadin 或 Play！可能比 JSP“更好”的框架，但是还有一个全新的 API/框架需要学习……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:48:48.937

> 1.  JSP 实际上做了什么？
> 2.  如果我使用 JSP，我是否必须重写 Web 中的用户界面？
> 3.  有没有更有效和高效的解决方案来完成这项工作？

和

> 我使用 SWING 作为用户界面。

和

> 将表格内容导出和导入到 Excel 工作表。

不行，得看[JavaFX 2](http://www.oracle.com/us/technologies/java/fx/overview/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:23:05.177

如果您转换为 JSP，您肯定需要重写用户界面。

JSP 本质上只是一种动态生成 HTML 的方法（可以选择嵌入 Java 代码来生成页面的一部分）。

仍然可以从 Web 浏览器运行 Swing 应用程序：您可能想看看 Java Web Start。这将使您不必进行完全重写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:25:28.660

1.) JSP 很像 PHP。它是服务器端脚本。当浏览器请求页面（JSP 页面）时，服务器（主要是 Tomcat 或您部署 JSP 项目的任何应用程序服务器）将使用 JSP 代码生成 HTML 内容。JSP 主要由部分 HTML、JavaScipt（如果你想要动态的东西）和 Java 组成。

2.) 据我所知，如果您被要求在 JSP 中执行此操作，那么您需要在 JSP 中再次让所有客户端工作。在那里，您将使用 Java 代码生成 HTML UI。但是您可以使用您使用的所有后端代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T09:34:55.897

您可以在 Applet 中使用 SWING。

# ember.js - 加载 JSON 数据并将其绑定到模型中的数组，然后显示数组元素？

> ID：14134616
> 
> 赞同：0
> 
> 时间：2013-01-03T07:18:46.257
> 
> 标签：ember.js

我想知道执行此任务的正确方法，我有一个 JSON 文件，其中包含从 A 到 Z 的字母。我想在我的应用程序中加载该文件，并将加载的数据分配给一个名为“alphabets”的数组模型称为“dObj”，然后使用 {{#each}} 循环显示数组的所有元素。

我不确定如何将数据绑定到模型。在 ArrayController 的 pushObject() 方法中，我传递了 create() 方法，而我不仅应该创建对象，还应该将加载数据推送到模型中的数组。

我感谢您的所有帮助。谢谢你。

这是小提琴：http: [//jsfiddle.net/exciter/Y3dcs/](http://jsfiddle.net/exciter/Y3dcs/)

代码：

```
 $function(){

        App = Ember.Application.create();

        App.dObj = Ember.Object.extend({
            alphabets: []
        });

        App.DObjController = Ember.ArrayController.create({
            content: [],
            loadAlphabets: function(){
                var self = this;
                $.getJSON('data/alphabets.json', function(data){
                    data.forEach(function(item){
                        self.pushObject(App.dObj.create(item));
                    });
                });
            }
        });
        App.initialize();
    }); 
```

文件

```
{
    'alphabets' : [
                    'A','B''C','D','E','F','G',
                    'H','I','J','K','L','M','N',
                    'O','P','Q','R','S','T','U',
                    'V','W','X','Y','Z'
                    ]
} 
```

HTML

```
<script type="text/x-handlebars">
    {{#view Ember.Button target="App.DObjController" action="loadAlphabets"}}
       Load Alphabets
    {{/view}}

    {{#each App.DObjController}}
        {{alphabets}}                          
    {{/each}}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:22:15.887

您要做的是`dObj`为您的 ajax 调用返回的每个字母创建一个新的，然后将这些对象推送到`DObjController`ArrayController 中。

然后，要显示这个对象数组，您需要使用`{{#each letterObj in App.DObjController}}`模板助手命令循环遍历每个`dObj`包含您的字母数据的实例并输出存储的字母数据。

[JSFiddle 示例](http://jsfiddle.net/cteegarden/Y3dcs/8/)

模板：

```
<script type="text/x-handlebars">
    {{#view Ember.Button target="App.DObjController" action="loadAlphabets"}}
       Load Alphabets
    {{/view}}

    {{#each letterObj in App.DObjController}}
        {{letterObj.letter}}                          
    {{/each}}
</script> 
```

JS：

```
$(function(){

    App = Ember.Application.create({
        ready: function(){
            alert('APP INIT');
}
    });

    App.dObj = Ember.Object.extend({
    });

    App.DObjController = Ember.ArrayController.create({
        content: [],
        loadAlphabets: function(){
            var self = this;
            //$.getJSON('data/alphabets.json', function(data){
            //    data.forEach(function(item){
            //        self.pushObject(App.dObj.create(item));
            //    });
            //});

            setTimeout(function() {
                var alphabets = [
                    "A","B","C","D","E","F","G",
                    "H","I","J","K","L","M","N",
                    "O","P","Q","R","S","T","U",
                    "V","W","X","Y","Z"
                    ];
                alphabets.forEach(function(item){
                    self.pushObject(App.dObj.create({letter:item}));
                });
            },1000);
        }
    });
    App.initialize();
});​ 
```

# jquery-ui - 如何在 Jquery ui-tab 中提交表单后显示我的成功消息

> ID：14134618
> 
> 赞同：0
> 
> 时间：2013-01-03T07:18:46.123
> 
> 标签：jquery-ui, jquery

我在 jQuery ui-tab 上有表单，它将数据加载到显示在同一 ui-tab 上的列表中。我已经设法加载数据，并且显示返回到相同的选项卡以输入其他项目。但是，根据列表的排序顺序，新项目并不总是在视觉上很明显，我想淡入一条消息，但我无法让它在没有手动页面刷新的情况下返回到同一个选项卡一起工作。我已经附上了我正在尝试使用的两个脚本。

脚本 A

```
<script> // this one loads data perfectly but no success message appears
$(document).ready(function() { 
    $("#addtodoitem").live( 'submit' , function(evt) {
        evt.preventDefault();
        $.ajax({
            type: $(this).attr('method'),
            url: $(this).attr('action'),
            data: $(this).serialize(),
            success: function(data) { 
                $('.ui-tabs-panel:visible').html(data);
                $('.itemadded').fadeIn(1000).delay(4000).fadeOut(1000);
           };       
        });
    });
}); 
```

脚本 B

```
<script>    //this one shows the message and loads the data, but it also loads another 
        //copy of ui-tabs overlapping the original
$(document).ready(function() { 
    $('#addtodoitem').ajaxForm(function(data) { 
        $('.ui-tabs-panel:visible').html(data);
        $(".itemadded").fadeIn(1000).delay(4000).fadeOut(1000);
    }); return false;  
}); 
```

HTML

```
<div id="tabs_5" class="tabs">

<h2 id="todo5" class="tablecaption">Add To-do</h2>

<p>To raise a new issue please enter the description of the issue below.</p>

    <form id="addtodoitem" class="todo" method="post" action="todo_do.php?do=<?=$todo_do != '' ? "edit&to_id={$_GET['to_id']}" : 'add'?>&pub=1&site_ref=NA">
        <input type="hidden" value="0" name="status" id="status">
        <textarea name="todo" id="todo" placeholder="To raise a new issue, please type the details of the issue here"><?=$todo_free_text?></textarea> <br />
        <input type="submit" value="Submit" class="button" />
    </form>

<h2 class="tablecaption itemadded">Thank you, your item has been added to the list.</h2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:34:42.550

通过使用单独的刷新链接按钮和 php 页面在发布后导致刷新，我得到了一个令人满意的解决方案，因此脚本是这样的：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#addtodo').click(function(e){
        e.preventDefault();
        if($('#todo').val()!="")
            {
            $.ajax({
                type: 'POST',
                url: 'todo_do.php',
                data: { 'status': $('#status').val(),
                        'todo': $('#todo').val()
                    },
                success: function(data){
                        $('.itemadded').slideDown(500).delay(2000).fadeOut(500);
                        $('.refreshtodo').slideDown(500);
                        $('#addtodoitem')[0].reset(); 
                        $('#tabs > ul').tabs({selected: 5 });
                    }
                });
            }
            else{$('.nothing').slideDown(500).delay(1000).fadeOut(500)}
        });
    }); 
```

额外的 php 页面只包含

```
<?
header("Location: resident.php#tabs_5");
?> 
```

# iphone - 通过命令行运行 ios ocunit 逻辑测试无法访问钥匙串

> ID：14134621
> 
> 赞同：2
> 
> 时间：2013-01-03T07:18:58.723
> 
> 标签：iphone, ios, xcode, ocunit, sentestingkit

我正在尝试使用命令行运行我的逻辑测试（ **OCUnit ）。**但它因错误而失败。

使用的命令

```
xcodebuild -sdk iphonesimulator4.3 -configuration Debug -project XYZ.xcodeproj -target XYZ build 
```

错误

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Couldn't add the Keychain Item.' 
```

我希望模拟器在我通过命令行运行项目时运行，以便它可以访问钥匙串。或者当它通过命令行运行项目时，还有其他方法可以访问钥匙串吗？请帮忙 ！！！

# php - 为什么 html 文本输入名称会导致未设置提交输入？

> ID：14134622
> 
> 赞同：0
> 
> 时间：2013-01-03T07:19:09.243
> 
> 标签：php, html, mysql

我有一个`html`表格，有 13 个`<input>`字段和大约。92 个不同的行，创建使用它从数据库`php`中提取记录。`mySQL`出于某种原因，当我为这个字段分配了一个名称时，它会导致我的`<input type="submit" name="update_submit">`按钮无法设置。如果我更改名称，没关系，但如果我删除名称，它将允许其他字段更新就好了。

这是我的表单代码片段（`$i`自动递增）：

上顶...

```
<form method="post" action="process_form.php">
<table>
<tr> 
```

再向下...

```
echo "<td align=\"center\" class=\"edit_emp_comp_exp_cell\"><input type=\"text\" maxlength=\"10\" size=\"10\" id=\"Lic_Comp_Exp$i\" name=\"Lic_Comp_Exp[]\" value=\"" . $emp_query['Lic_Comp_Exp'] . "\">";

<input type="submit" name="update_submit" style="width:100px;" value="UPDATE"> 
```

再向下...

```
</tr>
</table>
</form> 
```

这是我的process_form：

```
if(isset($_POST['update_submit']))
{
$id = $_POST['Emp_ID'];
$name = $_POST['Emp_Name'];
$phone = $_POST['Emp_Phone'];
$start = $_POST['Start_Date'];
$leave = $_POST['Paid_Leave'];
$aca = $_POST['Emp_ACA'];
$licauth = $_POST['Lic_Auth_ID'];
$authexp = $_POST['Lic_Auth_Exp'];
$liccomp = $_POST['Lic_Comp_ID'];
$compexp = $_POST['Lic_Comp_Exp'];
$miscp  = $_POST['MiscP_ID'];
$position = $_POST['Pos_ID'];
$active = $_POST['activeBox'];
$i = 0;

foreach($id as $update) 
        {
        if (!isset($active[$i])) { $active[$i] = 0; }
        $sql = ("UPDATE employee SET Emp_Name = '$name[$i]', Emp_Phone = '$phone[$i]', Emp_Start_Date = '$start[$i]', Paid_Leave = '$leave[$i]', Emp_ACA = '$aca[$i]', Lic_Auth_ID = '$licauth[$i]', Lic_Auth_Exp = '$authexp[$i]', Lic_Comp_ID = '$liccomp[$i]', Lic_Comp_Exp = '$compexp[$i]', MiscP_ID = '$miscp[$i]', Pos_ID = '$position[$i]', Emp_Active = '$active[$i]' WHERE Emp_ID = '$update'");

        echo "SQL: " . $sql . "<br>";

        if(!$result_employee_update = $mysqli->query($sql))
            {
            $errors[] = "There was an error updating the employee table. MySqli Error Number: " . $mysqli->errno . "";
            goto end;
            }
        $i++;
        }
goto redirect;
} 
```

我完全不知所措，整个上午都在进行故障排除，我非常感谢一些帮助。

**更新：**当我更改`if(isset($_POST['update_submit']))`并`if(!isset($_POST['update_submit']))`运行它时，我收到一个错误：

```
"Notice: Undefined offset: 83 ... on line 31" 
```

第 31 行是我的

```
`$sql = ("UPDATE employee SET Emp_Name = '$name[$i]', Emp_Phone = '$phone[$i]', Emp_Start_Date = '$start[$i]', Paid_Leave = '$leave[$i]', Emp_ACA = '$aca[$i]', Lic_Auth_ID = '$licauth[$i]', Lic_Auth_Exp = '$authexp[$i]', Lic_Comp_ID = '$liccomp[$i]', Lic_Comp_Exp = '$compexp[$i]', MiscP_ID = '$miscp[$i]', Pos_ID = '$position[$i]', Emp_Active = '$active[$i]' WHERE Emp_ID = '$update'");` 
```

我认为这意味着我`<input>`的一个不是`array`，对吧？如果是这样，我不知道那是怎么回事，它就在`table`那里并且它是从`database`.

**UPDATE2：**我想我已经弄清楚了，但我不知道如何解决它。我尝试离开`name="Lic_Auth_Exp"`，`name="Lic_Comp_Exp"`然后`name`从其他`input`字段中删除两个不同的属性。这样做之后，它似乎运行了代码。所以问题不在于这些特定字段，而似乎是因为`$_POST`传递了超过 11 个值。我查看了`php.ini`文件，看看是否有任何限制，但我什么也没看到。有谁知道这可能是什么原因造成的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:21:47.110

1.  在 php 中转储`$_POST`以检查它是否符合您的期望。

2.  验证表单结构。所有输入都在同一个标​​签内吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:23:24.663

延长条件

```
if(isset($_POST['update_submit']) && $_POST['update_submit']=="you-given-name-just-null") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:42:34.717

我敢打赌，我已经花费了超过 14 个小时来解决这个问题，@angel 也很友好地进行了深入尝试。最后我想通了。

问题最终是在我的文件`max_input_vars`中设置得不够高。`php.ini`更大的问题是该设置在您添加之前实际上并不存在，因此当您查看文件时，您首先看不到任何设置限制的内容！

So, to recap. The issue wasn't because of the `name=""` attribute like I was lead to believe. I figured this out when I removed two other names from two different input fields, suddenly it worked fine and it was only when I had these extra fields that it wouldn't work. The next clue came thanks to @Jakub Sacha when he suggested to use the `var_dump($_POST)` function. When I started looking at the numbers, it finally clicked that the total amount of fields being passed added up to 1000\. After a Google search for `PHP 1000 Limit` I found out about this `max_input_vars` setting.

Hopefully this will help someone else out and prevent hours of troubleshooting!

# url - 在 yii 中控制动作和 url

> ID：14134625
> 
> 赞同：1
> 
> 时间：2013-01-03T07:19:32.393
> 
> 标签：url, yii, action

我正在尝试使用 yii 执行存储在同一控制器中的不同操作。

我有一个名为“test”的操作，我可以通过输入 url“localhost/blah/test”来访问它，这个 url 在我的控制器中调用方法“actiontest()”，现在我想要的是通过输入“localhost/blah” /test/create”访问同一控制器中的方法“actioncreate()”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:12:37.737

在配置中定义此规则：

```
'rules' => array(
    'localhost/blah/test/create' => 'localhost/blah/create',
    ....
), 
```

# java - 如何在不实现 Serializable 接口的情况下序列化/反序列化对象？

> ID：14134628
> 
> 赞同：3
> 
> 时间：2013-01-03T07:19:49.380
> 
> 标签：java, serialization

如果邮件发送到我的收件箱，我会收到一条消息，然后我会将内容插入 DB。我有一个 org.springframework.integration.core.Message 如下所示：

```
public void receive(Message<?> message)
{
    //I am inserting message contents into DB
} 
```

现在万一发生故障，我想有故障安全恢复机制，我在想的是将 Message 对象序列化为一个文件，然后反序列化并更新到 DB。

**问题** 1、这种情况下如何序列化Message对象？2\. 除了序列化，还有什么其他的机制可以使用？

**编辑** 我之前没有做过序列化，我听说这个类应该实现 Serializable 才能使用 ObjectOutputStream，在这种情况下我不想创建 Message 的子类，那么如何将 Message 序列化为 File？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T07:50:23.713

当然，除了 jvm 之外，还有许多序列化机制。

*   XML
*   JSON
*   BSON
*   消息包
*   protobufs
*   ...

其中一些是基于文本的，一些是二进制的。都有缺点和优点。基于文本的那些是人类可读的，二进制的更快并且占用更少的空间。

有处理上述所有格式的 java 库：JAXB (XML)、Jackson (JSON) 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:53:31.477

> 这种情况下如何序列化Message对象呢？除了序列化还有其他可以使用的机制吗？

从消息中提取您需要的所有数据并保存。您可以选择任何方式执行此操作。

您可以通过使用您保存的数据填充新消息来反序列化它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T08:01:27.477

我不知道我是否理解它好吧..但假设 Message 不仅仅是很多字符串和一些整数，您可以直接使用 ObjectOutputStream 并将其写入文件（二进制），然后稍后再读。为什么不？

```
Message e = new Message();
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("whatever");
oos.writeObject(message);

// read in
ObjectInputStream ois = new ObjectInputStream(new FileInputStream("whatever");
Message e = (Message) ois.readObject(); 
```

# geolocation - Unity 每天查询 Google API 的次数是多少

> ID：14134630
> 
> 赞同：1
> 
> 时间：2013-01-03T07:19:56.437
> 
> 标签：geolocation, unity3d

我正在开发一个应用程序，我在其中使用 Compas 和 GPS for iPhone Platform，之后我将在 Unity 中为 Android 制作这个。

因此，我正在嗅探 Compas 相关问题，并找到了一个[答案](https://stackoverflow.com/a/5672274/836214)，即查询 Google Api 存在限制。我有点害怕，因为我想每秒查询一次以更新设备的用户位置和指南针信息。

有谁知道查询的最大限制是多少？执行此任务的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:49:34.947

如果您指的是 Google Elevation API，那么是的，有一个限制。基本上，所有 Google API 都有使用限制。从海拔 API 网页：

> 使用限制
> 
> Google Elevation API 的使用限制为每天 2,500 个请求（Maps API for Business 用户每天最多可发送 100,000 个请求）。在每个给定请求中，您最多可以查询 512 个位置的海拔高度，但每天的总位置数不得超过 25,000 个（Maps API for Business 用户为 1,000,000 个）。强制执行此限制是为了防止滥用和/或重新利用 Elevation API，并且此限制将来可能会更改，恕不另行通知。此外，我们强制执行请求速率限制以防止滥用服务。如果您超过 24 小时限制或以其他方式滥用服务，Elevation API 可能会暂时停止为您工作。如果您继续超过此限制，您对 Elevation API 的访问可能会被阻止。

如果您需要更多请求，您可能必须使用 Maps API for Business。

# php - 在同一列上具有多个 WHERE 条件的 SELECTING 必须同时存在

> ID：14134631
> 
> 赞同：1
> 
> 时间：2013-01-03T07:19:59.220
> 
> 标签：php, mysql

我看过很多帖子，但没有得到我的答案我有一个结构表

```
 subject_level_id  | tutor_id  | level_id_fk  | subject_id_fk |
  118              | 99        | 4            | 1             |
  119              | 99        | 3            | 2             |
  120              | 99        | 3            | 3             |
  121              |100        | 3            | 1             | 
  122              |100        | 4            | 2             | 
```

我想提取教授特定级别的 1、2 或更多科目的导师的导师 ID（科目数量取决于用户选择的科目，但级别对于特定查询将是唯一的）

我在其他帖子的帮助下制定了一个查询，但如果科目数量超过两个，它会非常慢并且会变得更糟，因为我有 10,000 条导师记录，我的查询是：

```
select distinct
   a.tutor_id
from
   tutor_preferred_level_subject as a
inner join
   tutor_preferred_level_subject as b
   on a.level_id_fk = b.level_id_fk
where
   a.subject_id_fk = 1 and
   b.subject_id_fk = 10 and
   a.level_id_fk = 3 
```

建议：[在同一列上使用多个 WHERE 条件进行选择](https://stackoverflow.com/questions/4047484/selecting-with-multiple-where-conditions-on-same-column)

这个问题和我的不同之处在于，我想要同时教授这两个科目的导师。

**更新**：是的，主要关注的是性能，这个查询对两个主题都很好，但是对于两个以上的主题，mysql服务器会永远处理。索引是`subject_level_id`并且其中有近 13000 条记录，下面的查询返回大约 6500 条结果。

正如 Jakub Sacha 所要求的，这些是

```
EXPLAIN select distinct
   a.tutor_id
from
   tutor_preferred_level_subject as a
inner join
   tutor_preferred_level_subject as b
   on a.level_id_fk = b.level_id_fk
where
   a.subject_id_fk = 1 and
   b.subject_id_fk = 10 and
   a.level_id_fk = 3

id  select_type     table   type    possible_keys   key     key_len     ref|
1   SIMPLE          a   ALL     NULL            NULL    NULL            NULL 
1   SIMPLE          b   ALL     NULL            NULL    NULL           NULL 

rows    Extra 
12733   Using where; Using temporary
12733   Using where; Distinct 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:50:57.137

您的查询似乎没有按照您的描述进行。连接应该是 on`tutor_id`而不是 on `level_id_fk`。

`DISTINCT`仅当`(level_id_fk, subject_id_fk, tutor_id)`组合不唯一时才需要：

```
SELECT                              
    -- DISTINCT
   a.tutor_id
FROM
   tutor_preferred_level_subject AS a
INNER JOIN
   tutor_preferred_level_subject AS b
       ON a.tutor_id = b.tutor_id
WHERE
   a.subject_id_fk = 1 AND
   a.level_id_fk = 3 AND
   b.subject_id_fk = 10 AND
   b.level_id_fk = 3 ; 
```

此外，您应该添加一个（唯一的）索引`(level_id_fk, subject_id_fk, tutor_id)`以提高效率：

```
ALTER TABLE tutor_preferred_level_subject
  ADD INDEX level_subject_tutor_IDX
    (level_id_fk, subject_id_fk, tutor_id) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:08:23.040

这将选择所有有两个完全匹配 (1, 10) 的不同主题的导师 ID：

```
SELECT
  Distinct tutor_id
FROM
  tutor_preferred_level_subject 
WHERE
  level_id_fk = 3
GROUP BY tutor_id, level_id_fk
HAVING
  Count(Distinct subject_id_fk) = 2 AND
  Sum(subject_id_fk NOT IN (1, 10)) = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:30:25.677

似乎您不需要将表内部连接到自身，这就是当您获得越来越多的行时会导致缓慢的原因。

您说您需要“教授特定级别的 1、2 或更多科目的导师”，这基本上只是意味着您需要教授该特定级别的导师。所以尝试分组并使用 HAVING 子句（这当然需要你的数据是干净的）

```
SELECT a.tutor_id
FROM tutor_preferred_level_subject AS a
WHERE a.subject_id_fk IN (1,10)
  AND a.level_id_fk = 3
GROUP BY a.tutor_id
HAVING COUNT(1) > 1 
```

# javascript - 按下 JQM 列表中的按钮

> ID：14134635
> 
> 赞同：2
> 
> 时间：2013-01-03T07:20:38.693
> 
> 标签：javascript, jquery, html, listview, jquery-mobile

我有一个 JQM 列表，以及列表中每个实例的按钮。

当单击按钮时，我调用函数...

```
function xxx()
{
    alert ('click on me!! :]');
} 
```

点击按钮没有触发功能，为什么？

看看下面的jsFiddle：http: [//jsfiddle.net/Hodaya/nR369/3/](http://jsfiddle.net/Hodaya/nR369/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:19:36.330

要将`xxx`函数绑定到 DOM 元素的 click 事件，`newLI`您应该使用`newLI.onclick=xxx;`或更好地使用 jQuery 进行绑定`$(newLI).click(xxx);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:05:39.253

最后问题解决了：

按下按钮不起作用，因为：

列表上的每个按钮都有相同的 id，在我为每个按钮添加唯一名称的那一刻，它就起作用了。

这里的代码：

```
for (var i = 0; i < Local.length; i++) {
     newLI.innerHTML = '<a href="to.html" data-transition="slide" dir="rtl" onclick="YYY();" >' + 
                       '<p>...'</p>' +
                       '<a  id="btnClearOneBookmark' + i + '" data-role="button" data-icon="delete" data-theme="b"></a>' +
                      ' </a>';

        $("#btnClearOneBookmark" + i).click(function () { xxx(); });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:11:34.003

试试这个：

```
$("#mybutton").on('click',function() {
var ul = document.getElementById("bookMarkMenu");
for (var i = 0; i < 5; i++) {
    var newLI = document.createElement("LI");
    console.log(i)
        newLI.innerHTML = '<a href="to.html"  data-transition="slide" dir="rtl"><p>...</p>' +'<a id="btnClearOneBookmark" data-theme="b" data-role = "button"></a></a>';
    newLI.setAttribute('data-theme', 'c');
    newLI.setAttribute('onclick', 'DisplayBookMark()');
    ul.appendChild(newLI);
    $('ul').listview('refresh');
} 
});

$("#btnClearOneBookmark").live('click',function() {
    alert("click on me!! :]");
}); 
```

# android - 如何提取json数据？

> ID：14134641
> 
> 赞同：0
> 
> 时间：2013-01-03T07:20:56.477
> 
> 标签：android

*我遇到这个麻烦了吗？*

```
[
{
    "username": "apap",
    "status": "",
    "log": "",
    "email": "apap@gmail.com",
    "lat": "",
    "dob": "5-11-1986"
},
{
    "username": "apapp",
    "status": "",
    "log": "",
    "email": "apapp@gmail.com",
    "lat": "",
    "dob": "5-11-1986"
}
],
"returncode": "0"
} 
```

**解析数据时出错 org.json.JSONException: Value {"incircle": at response of type org.json.JSONObject cannot be convert to JSONArray**

*为了提取内圆数组值，我正在编写以下代码：*

```
public class MainActivity extends Activity {
TextView username;
TextView email;
TextView dob;
TextView lat;
TextView log;
ListView listView;
ArrayList<HashMap<String,String>> jsonlist;
JsonAdapter objAdapter;
Context ctx;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    listView = (ListView) findViewById(R.id.listView);
    jsonlist = new ArrayList<HashMap<String,String>>();
    JSONObject json = JSONfunctions
            .getJSONfromURL("http://www.railsboxtech.com/flirtalert/alluser.php");

    try {

        JSONArray flirt = json.getJSONArray("response");
        Toast.makeText(MainActivity.this, "namr", Toast.LENGTH_LONG).show();
        for (int i = 0; i < flirt.length(); i++) {

            JSONObject ei = flirt.getJSONObject(i);
            JSONArray eie = ei.getJSONArray("incircle");
            for (int j = 0; j < eie.length(); j++) {
                JSONObject e = eie.getJSONObject(j);
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("User",e.getString("username"));
                map.put("Email",e.getString("email"));
                map.put("dob",e.getString("dob"));
                map.put("lat",e.getString("lat"));
                map.put("log",e.getString("log"));
                jsonlist.add(map);

            }

        }
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }
    ListAdapter adapter = new SimpleAdapter(this, jsonlist, R.layout.user_list,
            new String[] { "User", "Email","dob","lat","log"}, new int[] {
                    R.id.username, R.id.email, R.id.dob, R.id.lat, R.id.log});
    listView.setAdapter(adapter);
    listView.setTextFilterEnabled(true);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:24:59.757

当您使用此行检索数组的元素时

```
JSONArray ja1= eie.getJSONArray(j); 
```

您需要元素本身是数组，但是，在您的输入中，元素是对象。

由于输入只有一个数组，但您的代码假定两个嵌套数组，您可能需要类似：

```
JSONObject json = JSONfunctions
        .getJSONfromURL("http://www.railsboxtech.com/flirtalert/alluser.php");

try {
    JSONObject ei = json.getJSONObject("response");
    JSONArray eie = ei.getJSONArray("incircle");
    for (int j = 0; j < eie.length(); j++) {
        JSONObject e = eie.getJSONObject(j);
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("User",e.getString("username"));
        map.put("Email",e.getString("email"));
        map.put("dob",e.getString("dob"));
        map.put("lat",e.getString("lat"));
        map.put("log",e.getString("log"));
       jsonlist.add(map);
   }
} catch ... 
```

# javascript - 减少http请求应该先采取哪些措施？

> ID：14134642
> 
> 赞同：1
> 
> 时间：2013-01-03T07:21:03.550
> 
> 标签：javascript, performance, browser, yslow

我正在做一个网站优化，我现在需要提高性能，所以我使用了 yslow，它建议在下面改进以减少 http 请求。

yslow 建议的提高性能应该首先解决哪个问题？或者任何人都可以被带走，因为它只会保存http请求？

> 此页面有 20 个外部 Javascript 脚本。尝试将它们合二为一。
> 此页面有 20 个外部样式表。尝试将它们合二为一。
> 此页面有 20 张外部背景图片。尝试将它们与 CSS 精灵结合起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:26:04.407

精灵建议的外部背景图像可能是最重要的，因为这可能是更多数据。结合JS / CSS文件应该大致相似。不过，我建议使用所有 3 条建议。

不过，所有 3 条建议都会减少相同数量的 HTTP 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:57:54.763

我建议做所有三个建议。至于先做哪一个，这并不重要，因为看起来他们每个人都会将 20 个请求变成 1 个。

从[yslow 文档](http://developer.yahoo.com/performance/rules.html#num_http)（强调我的）：

> 80% 的最终用户响应时间都花在了前端。大部分时间都用于下载页面中的所有组件：图像、样式表、脚本、Flash 等。**减少组件的数量反过来会减少呈现页面所需的 HTTP 请求数量。这是加快页面速度的关键。**

现在，如果您同时进行[缩小](http://developer.yahoo.com/performance/rules.html#minify)，那么您可以在 Javascript 和 CSS 中获得相对于内容大小的收益。出于这个原因，我建议从这两者中的任何一个开始，并在文件合并的同时进行缩小。

> 缩小代码后，所有注释以及不需要的空白字符（空格、换行符和制表符）都会被删除。在 JavaScript 的情况下，这会提高响应时间性能，因为下载文件的大小会减小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T08:03:07.257

您是否曾经尝试过“延迟加载”。

+

尝试缩小 CSS 和 JavaScrip 文件（将它们合并到一个文件中。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T07:24:08.280

没关系，目的是减少单个请求的数量。

# ruby-on-rails - admin 应该是子域还是命名空间？

> ID：14134643
> 
> 赞同：4
> 
> 时间：2013-01-03T07:21:12.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3

您何时会在命名空间上使用子域？即[http://admin.foo.com](http://admin.foo.com) VS [http://foo.com/admin](http://foo.com/admin)

或者，我也喜欢 api.foo.com 与 foo.com/api 的外观。我还发现，设置子域有点棘手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T11:33:04.537

在文件夹或子域中安装另一个应用程序对 Web 服务器来说没什么大不了的，但是如果您的 Rails 应用程序包含 /admin 和普通应用程序，那么将一个应用程序用作子域会变得更加棘手。

值得庆幸的是，Rails 路由器在这方面非常灵活，并且很好地支持了这两种情况。

TLDR：Rails 通过路由引擎支持两种方式，在这一点上它归结为个人喜好（尽管我怀疑子域选项不会与路径助手配合得很好）

**/admin 路线**

为了实现`/admin`路由，Rails 在路由中支持命名空间的概念。因此，在 Rails 应用程序中有一个 /admin 区域，您只需`routes.rb`像这样写：

```
namespace :admin do
  resources :users
  resources :posts
end 
```

然后，您将 /admin 区域的控制器放在 controllers/admin/.rb 中，并且该类必须以 Admin 为前缀（如`Admin::PostsController`）。

由于大多数应用程序的管理区域很可能会与普通应用程序中的模型进行交互，因此可以肯定地说进行命名空间是最方便的方式。

**子域路由**

但命名空间也可以与子域一起使用，事实证明：

Rails 路由器可以定义`constraint`块并在这些块内定义命名空间。因此，如果您只想在 admin.example.com 子域中托管上面的命名空间，您可以这样做：

```
constraints(:subdomain => /admin/) do
  namespace :admin do
    resources :users
    resources :posts
  end
end 
```

（我不知道约束功能，但[这篇博](http://tabfugnic.wordpress.com/2011/09/15/rails-3-routes-namespace-subdomains/)文似乎解释得很好）

这显然需要您配置 Web 服务器，以便将 admin.example.com 和 www.example.com 提供给同一个 Rails 应用程序。

我不确定会话（通过 cookie 实现）是否被延续，但我想你可以解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-23T23:21:52.857

我认为另一个答案解决了实用性问题，但纯粹是从安全角度来看：

[Rails 安全指南](http://guides.rubyonrails.org/security.html#additional-precautions)建议将 admin 放在子域中，因为它更能抵御 XSS 攻击：

> 将管理界面放到一个特殊的子域，例如 admin.application.com 并使其成为一个单独的应用程序，并拥有自己的用户管理。这使得从通常的域 www.application.com 窃取管理 cookie 是不可能的。这是因为您的浏览器中的相同来源策略：www.application.com 上的注入 (XSS) 脚本可能无法读取 admin.application.com 的 cookie，反之亦然。

因此，从安全角度来看，将 admin 放在子域中可能更安全。

# php - 在 PHP 中下载 zip 文件不起作用

> ID：14134649
> 
> 赞同：2
> 
> 时间：2013-01-03T07:21:40.120
> 
> 标签：php, zip

以下是我使用 PHP 下载 zip 文件的代码。

```
function create_zip($files, $file_name, $overwrite = false) {

    foreach ($files as $imglink) {
        $img = file_get_contents($imglink);
        $destination_path = $_SERVER['DOCUMENT_ROOT'] . 'demoproject/downloads/' . time() . '.jpg';
        file_put_contents($destination_path, $img);
        $imgFiles[] = $destination_path;
    }

    if (file_exists($file_name) && !$overwrite) {
        return false;
    }
    $valid_files = array();
    if (is_array($imgFiles)) {
        foreach ($imgFiles as $file) {
            $valid_files[] = $file;
        }
    }

    if (count($valid_files)) {
        $zip = new ZipArchive();
        if ($zip->open($file_name, $overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
            echo "Sorry ZIP creation failed at this time";
        }
        foreach ($valid_files as $file) {
            $zip->addFile($file, pathinfo($file, PATHINFO_BASENAME));
        }

        $count = $zip->numFiles;
        $resultArr = array();
        $resultArr['count'] = $count;
        $resultArr['destination'] = $file_name;

        $filename = $file_name;
        $filepath = $_SERVER['DOCUMENT_ROOT'] . 'demoproject/';

        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: public");
        header("Content-Description: File Transfer");
        header("Content-type: application/octet-stream");
        header("Content-Disposition: attachment; filename=\"" . $filename . "\"");
        header("Content-Transfer-Encoding: binary");
        header("Content-Length: " . filesize($filepath . $filename));
        ob_end_flush();
        @readfile($filepath . $filename);
    } else {
        return false;
    }
} 
```

这里`$filename`和`$filepath`分别包含 zip 文件的名称和路径。

前任：

`echo $filepath.$filename;`

```
Output : D:/wamp/www/demoproject/1357198557.zip 
```

问题是它显示下载窗口但显示文件夹大小`0 byte`。我正在使用windows7。见下图：

![](../Images/ee10b289e5fa3e95b69f3c019afacf6c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T12:40:32.230

你可以尝试添加这个，确保你得到了正确的`filesize`

```
$mm_type="application/octet-stream";
header("Content-Type: " . $mm_type);
header("Content-Length: " .(string)(filesize($fullpath)) ); 
```

# java - 使用正则表达式匹配包含无效字符的 XML 标记

> ID：14134650
> 
> 赞同：1
> 
> 时间：2013-01-03T07:21:45.747
> 
> 标签：java, xml, regex

我有一个 java 程序，它以 xml 作为输入，并使用正则表达式检查标签内允许的字符列表，并且应该返回一个包含除允许字符之外的整个标签，比如这个特殊字符

XML 输入

```
<?xml version="1.0"?>
<PayLoad>
<requestRows>****</requestRows>
<requestRowLength>1272</requestRowLength>
<exceptionTimestamp>2012070202281068-0700</exceptionTimestamp>
<exceptionTimestamp>201$2070202281068-0700</exceptionTimestamp>
<exceptionTimestamp>20120(702022810680700</exceptionTimestamp>
<exceptionDetail>NO DATA AVAILABLE FOR TIME PERIOD SPECIFIED   =</exceptionDetail>
</PayLoad> 
```

允许的字符列表

```
\! " # $ % & ' ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; < = > ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ 
```

我试过如下

```
public static void main(String args[])
    {
        List<String> specialCharList = new ArrayList<String>();
        try{
                String responseXml="test";
                String SPECIAL_CHARACTER ="(<[\\w\\d]*>(?=[^<]*[^<\\w\\!\\#\\$\\%\\&\\\'\\(\\)\\\\ \\*\\\"\\+\\,\\-\\~\\}\\{\\.\\/\\:\\;\\=\\?\\@\\]\\[\\\\\\`\\|]).*</[\\w\\d]*>)";
                if (!(responseXml == null || responseXml.toString().length() < 1 || responseXml.toString().equals("")))
                {
                    Pattern patternObject = Pattern.compile(SPECIAL_CHARACTER);   
                    Matcher patternMatcher = patternObject.matcher(responseXml);   
                    while(patternMatcher.find())
                    {   
                      specialCharList.add(patternMatcher.group());
                    }
                    if(specialCharList.isEmpty() || specialCharList.size()<0)
                    {
                        specialCharList.add("No Special Character's Detected");
                    }
                }
        }catch(Exception e)
        {

        }
        System.out.println(specialCharList);
    } 
```

但它没有按预期工作。如何为上述场景编写正则表达式？请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:40:21.000

首先让我们解决您的正则表达式中的几个错误

```
(<[\w\d]*>(?=[^<]*[^<\w\!\#\$\%\&\'\(\)\ \*\"\+\,\-\~\}\{\.\/\:\;\=\?\@\]\[\\\`\|]).*</[\w\d]*>) 
```

The`\w`是`[A-Za-z0-9_]`; 在同一个字符集中同时包含`\w`和是多余的，所以可以简化为.`\d``[...]``<[\w\d]*>``<[\w]*>`

此外，您不需要在字符集中进行任何转义，除了反斜杠“\”、右括号“]”，有时还有减号“-”。对于空白字符，您应该使用`\s`- 它包括单个空格、制表符空格和换行符。因此，简化：

```
[^<\w\!\#\$\%\&\'\(\)\ \*\"\+\,\-\~\}\{\.\/\:\;\=\?\@\]\[\\\`\|] 
```

变成

```
[^<\w!#$%&'()\s*"+,-~}{./:;=?@\][\\`|] 
```

以下正则表达式效率不高：字符排除总是会大大增加计算量。它将匹配包含一个或多个“无效”字符的标签。

```
<[\w]*>((?!<[\w]*>).)*[^<\w!#$%&'()\s*"+,-~}{./:;=?@\][\\`|]((?!<[\w]*>).)*</[\w]*> 
```

值得注意的是，如果性能很重要，你真的应该重新考虑你的错误解析方法。

这个网站提供了一个很好的正则表达式介绍

[http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

# php - 如何将模型数据对象数组转换为 dataProvider

> ID：14134653
> 
> 赞同：12
> 
> 时间：2013-01-03T07:21:57.453
> 
> 标签：php, model, yii, dataprovider

假设我有一个模型`User`，它与自身具有多对多关系，名为`friends`. 所以`$user->friends`（或`$model->friends`在视图中）给了我一个对象数组`User`。我想将朋友显示为gridview。但是`CGridView`数据作为`dataProvider`对象。谷歌搜索它找到了将模型对象数组转换为`dataProvider`对象的方法，如下所示。

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'gridUser',
    'dataProvider' => new CArrayDataProvider($model->friends, array()),
)); 
```

现在使用这个我得到一个错误

> 未定义属性“User.id”。

更新

```
public function relations()
{
    return array(
         'friends' => array(self::MANY_MANY, 'User', 'friendship(user_id, friend_id)'),
    );
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T10:13:03.450

我使用两阶段构建如下所示的提供程序。但我发现它在分页方面给你带来了麻烦。因为我在做其他事情，所以我没有费心去解决这个问题

```
$dataProvider =  new CArrayDataProvider('User');
$dataProvider->setData($model->friends);
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'gridUser',
    'dataProvider' =>$dataProvider,
)); 
```

话虽如此，您的代码应该可以工作（请参阅下面的 API 文档示例）。我怀疑您的关系中存在错误的属性而不是提供的代码。如果没问题，重新检查关系定义

来自 Yii 文档：

```
$rawData=Yii::app()->db->createCommand('SELECT * FROM tbl_user')->queryAll();
// or using: $rawData=User::model()->findAll(); <--this better represents your question
$dataProvider=new CArrayDataProvider($rawData, array(
    'id'=>'user',
    'sort'=>array(
        'attributes'=>array(
             'id', 'username', 'email',
        ),
    ),
    'pagination'=>array(
        'pageSize'=>10,
    ),
)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-10T10:02:42.703

明白了:)，我可以使用`CActiveDataProvider`而不是`CArrayDataProvider`如下所示

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'gridUser',
    'dataProvider' => new CActiveDataProvider('User', array(
            'data'=>$model->friends,
    )),
    //...... columns display list.....
)); 
```

无论如何感谢@Stefano的回复

# javascript - 在 Collection.create 中出现错误：未捕获的错误：必须指定“url”属性或函数

> ID：14134655
> 
> 赞同：0
> 
> 时间：2013-01-03T07:22:05.373
> 
> 标签：javascript, backbone.js

我有一个模型

```
var TodoModel = Backbone.Model.extend({
    defaults: {
        title : '',
        completed: false
    }
}); 
```

当我尝试使用`Collection.create`方法将此模型添加到集合中时，出现错误

> 未捕获的错误：必须指定“url”属性或函数

我尝试了以下方式

```
var TodoCollection = Backbone.Collection.extend({
    model : TodoModel,
});

todoCollection.create({title:'Try out code examples', completed:true}); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:33:53.673

如果你正在创建一个模型/集合——默认情况下你必须为资源指定一个 url。你可以这样做：

```
var TodoModel = Backbone.Model.extend({
    defaults: {
        title : '',
        completed: false
    }
});

var TodoCollection = Backbone.Collection.extend({
    url: '/todos',
    model : TodoModel,
}); 
```

有关详细信息，请参阅[http://backbonejs.org/#Collection-url 。](http://backbonejs.org/#Collection-url)

我认为这里的混乱来自 Backbone.js 的 Todo 示例，它使用本地存储（[http://documentcloud.github.com/backbone/docs/backbone-localstorage.html](http://documentcloud.github.com/backbone/docs/backbone-localstorage.html)）。如果您跳到本地存储代码的底部，您可以看到**Backbone.sync**已设置。通过这样做，我们更改了创建模型的默认行为，使其不再需要 Url。在大多数主干应用程序中，情况并非如此，并且需要服务器端 URL 才能使模型工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T05:04:11.830

这是因为 destroy() 函数也会调用 Backbone.sync 来更新服务器，而不仅仅是前端的模型。[http://backbonejs.org/#Model-destroy](http://backbonejs.org/#Model-destroy)

因此，如果您使用 REST 同步数据，则需要在模型中设置 url 属性，以便 Backbone 知道将请求发送到何处：

```
Backbone.Model.extend({
    url: "http://myapi.com/"
}) 
```

为了提供更大的灵活性，您还可以设置一个 urlRoot：[http ://backbonejs.org/#Model-urlRoot](http://backbonejs.org/#Model-urlRoot)

或者您可以添加

```
 Backbone.sync = function(method, model, success, error){
    success();
  } 
```

工作你的代码。

# c# - Response.StatusCode 在 nunit 测试中为空

> ID：14134658
> 
> 赞同：4
> 
> 时间：2013-01-03T07:22:13.603
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, nunit, response

我正在编写单元测试用例。我正在尝试为此方法编写单元测试，但显示错误。如何在 mvc3 框架和 rhino mock 中对该方法进行单元测试。

```
 public ActionResult UnderConstruction()
    {
        Response.StatusCode = (int)HttpStatusCode.TemporaryRedirect;
        ErrorModel model = new ErrorModel()
        {
            ErrorMessage = "This page is still under construction; please check back later.",
            Title = "Under Construction"
        };
        return View("Error", model);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T07:36:47.537

那`Response`是空的，不是`Response.StatusCode`。您需要模拟`HttpContextBase`and `HttpResponseBase`，然后创建并分配控制器的`ControllerContext`.

测试看起来像这样（对不起，如果我捏造了 Rhino Mock 代码；我通常使用 Moq）：

```
// arrange
var httpContext = MockRepository.GenerateMock<HttpContextBase>();
var request = MockRepository.GenerateMock<HttpRequestBase>();
var response = MockRepository.GenerateMock<HttpResponseBase>();

// stub both Request and Response, for good measure.
httpContext.Stub(x => x.Request).Return(request);
httpContext.Stub(x => x.Response).Return(response);           

var controller = new YourController();

// create and assign the controller context
var context = new ControllerContext(httpContext, 
                  new RouteData(), 
                  controller);
controller.ControllerContext = context;

// act
var actual = controller.UnderConstruction() as ViewResultBase;

// assert
Assert.That(actual, Is.Not.Null);
Assert.That(controller.Response.StatusCode, Is.EqualTo(HttpStatusCode.TemporaryRedirect));
// etc. 
```

# android - 旋转视图后消除黑色空间

> ID：14134660
> 
> 赞同：0
> 
> 时间：2013-01-03T07:22:35.277
> 
> 标签：android, rotation

我有一个想要旋转的视图，但它会导致屏幕部分中的黑色空间出现不良效果，这些空间之前被视图占据，而现在则没有。我怎样才能让视图再次占据这些空间？这段代码演示了效果：

```
view.setRotation(60);
view.setRotationX(60); 
```

谢谢。

# php - 单击时显示下载文件选项

> ID：14134661
> 
> 赞同：-3
> 
> 时间：2013-01-03T07:22:49.967
> 
> 标签：php

`download file`用户填写以下内容`email`和名称后，我需要显示该选项`form`-这是表格

```
<form action="process.php" method="post">
    <input type="hidden" name="bot_action" value="form_subscribe" /> <input
        type="hidden" name="bot_track_code" value="1" /> <input type="hidden"
        name="bot_pass_standard" value="0" /> <input type="hidden"
        name="bot_pass_custom" value="0" /> <input type="hidden"
        name="bot_account" value="howtopossibleit" /> <input type="hidden"
        name="bot_redirect" value="" /> <input type="hidden"
        name="bot_web_form_id" value="44640" />
    <table width="230" border="0" cellpadding="0" cellspacing="0">

        <tr>
            <td height="10" width="10%" align="left" valign="middle"></td>
            <td height="10" width="28%" align="left" valign="middle"><div
                    style="font: bold 13px verdana, sans-serif; letter-spacing: -1px; color: #363636; margin: 0px 0px 0px 0px;">
                    <div align="center">Name:</div>
                </div></td>
            <td height="10" width="62%" align="left" valign="middle"><input
                type="text"
                style="width: 85%; margin: 0 auto; font: 10px verdana, sans-serif; height: 12px; line-height: 100%; padding: 2px 1px 1px 1px; border: 1px solid #363636; background: #ffffff url('http://images/form-input-bg.jpg') top left repeat-x;"
                name="fullname" value="" /></td>
        </tr>
        <tr>
            <td height="31" width="10%" align="left" valign="middle"></td>
            <td height="15" width="28%" align="left" valign="middle"><div
                    style="font: bold 13px verdana, sans-serif; letter-spacing: -1px; color: #363636; margin: 0px 5px 0px 0px;">
                    <div align="center">Email:</div>
                </div></td>
            <td height="15" width="62%" align="left" valign="middle"><input
                type="text"
                style="width: 85%; margin: 0 auto; font: 10px verdana, sans-serif; height: 12px; line-height: 100%; padding: 2px 21x 1px 1px; border: 1px solid #363636; background: #ffffff url('http://images/form-input-bg.jpg') top left repeat-x;"
                name="email" value="" /></td>
        </tr>
        <tr>
            <td height="15" colspan="3" align="center" valign="middle"><table
                    style="border: 1px solid #363636;" cellpadding="0" cellspacing="0">
                    <tr style="background-color: #e8e8e8; color: #FFFFFF;">
                        <td width="234" height="26" align="center" bgcolor="#FF0000"
                            style="border-top: 1px solid #ffffff; border-left: 1px solid #ffffff;"><input
                            type="submit"
                            style="overflow: auto !important; overflow: visible; width: auto !important; width: 55px; margin: 0px 15px 0px 15px; border: 0px; background-color: #FF0000; font: bold 13px verdana, sans-serif; letter-spacing: -1px; color: #363636;"
                            name="submit2" value="SUBMIT, Than press Download" /></td>
                    </tr>
                </table></td>
        </tr>
        <tr>
            <td height="4" colspan="3" valign="middle"
                style="padding: 3px 0px 3px 0px;"></td>
        </tr>
    </table>
</form> 
```

这是`download file`代码：

```
DownloadFile: &nbsp;<a href="admin/quality/<?php echo $fetchRows['fld_file']?>"><img width="32" height="32" title="Download File" src="images/downloadfile.png" alt="Download"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:29:58.090

在 div 中设置代码并使其显示：最初无..

```
<div id="link" style="display:none"><a href="admin/quality/<?php echo $fetchRows['fld_file']?>"> <img width="32" height="32" title="Download File" src="images/downloadfile.png" alt="Download"></a></div> 
```

在名称和电子邮件字段的 onblur 事件中调用此 jquery 函数

```
function enableLink() {
       if($("#name").val() != "" && $("#email").val() != "") 
                $("#link").show();
       else
                $("#link").hide();
} 
```

# facebook - 用户表中friend_Count的歧义[FQL]

> ID：14134662
> 
> 赞同：0
> 
> 时间：2013-01-03T07:22:54.747
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在研究 FQL 以检索特定用户的朋友数。

当我使用查询时，`Select friend_count from user where uid = me()`我得到一个与我从这个查询得到的计数不同的数字，即`select uid2 from friend where uid1= me()`

为什么这里有歧义？

那么，friend_count 是否还包括待处理的请求？

如果是，如何检索这些 UID？

`Select friend_count from user where uid = me()`退回我 X 并`select uid2 from friend where uid1= me()`退回我 Y。

我的 X 大于 Y，这让我想如果 X 包含待处理的请求但我无法找到 (XY)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:22:40.210

不同之处在于`friend_count`返回朋友的总数，而不管他们的隐私设置如何。

计数的结果可能会更低，因为在 FQL 或 Graph API 查询中永远不会返回在*Settings->Apps->Apps Others Use*`SELECT uid2 FROM friend WHERE uid1= me()`中限制其可见性或关闭 Platform Apps 的用户。

# c++ - 如何删除继承的私有 char* 属性？（例如：在析构函数中）

> ID：14134665
> 
> 赞同：1
> 
> 时间：2013-01-03T07:22:56.823
> 
> 标签：c++, inheritance, attributes, char

我正在尝试删除`char*`此程序中的继承属性：

在啊

```
class A {    
  public :
    // Functions, constructors and such
  private :
    char* attribute;
} 
```

在 Bh

```
#include "A.h"

class B : public A {
  public :
    B(const char* _attribute, int s) : A(_attribute) {setSpeed(s);}
    ~B()
  private :
    int speed;
} 
```

在像这样的析构函数中使用 delete [] ：

```
B::~B() {
  delete [] attribute;
} 
```

但我收到此错误：`char*A::attribute' 是私有的

在 A 的析构函数 ( `~A()`) 中，我使用相同的“destroy [] 属性”并且它可以工作......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T07:29:30.383

由于它是 A 私有的，因此 A 应该是负责删除它的类。

您不应该在 B 中删除它，这违反了基本封装。B 应该只负责删除它自己的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:29:16.120

您在A类中的属性被定义为私有，因此它不被B类继承。它在B类中不存在。这就是您不能删除它的原因。

尝试使用受保护的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:31:35.330

您不能从派生类访问基类的私有变量。如果您希望从派生类访问它，则需要对其进行保护。

# c# - 如何使用 ServiceStack 客户端使用文件

> ID：14134667
> 
> 赞同：14
> 
> 时间：2013-01-03T07:23:07.400
> 
> 标签：c#, servicestack

我正在尝试使用[ServiceStack](http://www.servicestack.net/)以 RESTful 方式将文件返回给 ServiceStack 客户端。

我已经阅读了关于 SO（[此处](https://stackoverflow.com/questions/10040680/servicestack-and-returning-a-stream)和[此处](https://stackoverflow.com/questions/13297061/get-httpresult-using-the-jsonserviceclient)）的其他问题，这些问题建议使用 HttpResult 和 FileInfo 对象或 MemoryStream 以允许将 ContentType 标头更改为相关的文件类型。

当我通过浏览器调用服务时，这对我有用，正确的文件会自动开始下载。但是，如何使用 ServiceStack 客户端之一使用文件？

我正在使用 Request DTO 并尝试使用类似于

```
return new HttpResult(new FileInfo("file.xml"), asAttachment:true) {
   ContentType = "text/xml"
}; 
```

例如，我将如何使用 JsonServiceClient 来使用它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-08T15:29:22.060

我有一个类似的要求，也要求我跟踪流文件下载的进度。我大致是这样做的：

***服务器端*：**

服务：

```
public object Get(FooRequest request)
{
    var stream = ...//some Stream
    return new StreamedResult(stream);
} 
```

StreamedResult 类：

```
public class StreamedResult : IHasOptions, IStreamWriter
{
    public IDictionary<string, string> Options { get; private set; }
    Stream _responseStream;

    public StreamedResult(Stream responseStream)
    {
        _responseStream = responseStream;

        long length = -1;
        try { length = _responseStream.Length; }
        catch (NotSupportedException) { }

        Options = new Dictionary<string, string>
        {
            {"Content-Type", "application/octet-stream"},
            { "X-Api-Length", length.ToString() }
        };
    }

    public void WriteTo(Stream responseStream)
    {
        if (_responseStream == null)
            return;

        using (_responseStream)
        {
            _responseStream.WriteTo(responseStream);
            responseStream.Flush();
        }
    }
} 
```

***客户端*：**

```
string path = Path.GetTempFileName();//in reality, wrap this in try... so as not to leave hanging tmp files
var response = client.Get<HttpWebResponse>("/foo/bar");

long length;
if (!long.TryParse(response.GetResponseHeader("X-Api-Length"), out length))
    length = -1;

using (var fs = System.IO.File.OpenWrite(path))
    fs.CopyFrom(response.GetResponseStream(), new CopyFromArguments(new ProgressChange((x, y) => { Console.WriteLine(">> {0} {1}".Fmt(x, y)); }), TimeSpan.FromMilliseconds(100), length)); 
```

“CopyFrom”扩展方法直接从这里项目中的源代码文件“StreamHelper.cs”借用：[Copy a Stream with Progress Reporting](http://www.codeproject.com/Articles/356297/Copy-a-Stream-with-Progress-Reporting) (Kudos to Henning Dieterichs)

对 mythz 和 ServiceStack 的任何贡献者表示敬意。伟大的项目！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-04T05:09:30.900

您不会使用[ServiceStack 的 .NET ServiceClients](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)使用文件，因为它们主要用于发送 DTO。

您可以使用任何普通的 WebRequest 来下载文件，在 ServiceStack 的 v3.9.33 中引入了一些[方便的 WebRequest 扩展 HTTP Utils](https://github.com/ServiceStack/ServiceStack/wiki/Http-Utils)使这变得容易，例如：

对于文本文件：

```
var xmlFile = downloadUrl.GetXmlFromUrl(responseFilter: httpRes => {
        var fileInfoHeaders = httpRes.Headers[HttpHeaders.ContentDisposition];
    }); 
```

其中 fileInfoHeaders 包含[W3C ContentDisposition HTTP Header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)，例如，当返回 a 时`FileInfo`，[ServiceStack 返回](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/Web/HttpResult.cs#L63)：

```
attachment;filename="file.xml";size={bytesLen};
creation-date={date};modification-date={date};read-date={date}; 
```

要下载二进制文件，您可以使用：

```
var rawBytes = downloadUrl.GetBytesFromUrl(httpRes => ...); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-30T19:46:00.320

我发现 mythz 的答案效果很好，但也可以使用他们内置的**JSonServiceClient**来处理文件请求，只是以一种有点不直观的方式，因为你实际上不能使用你期望的返回类型。

对于这样的模型定义：

```
[Route("/filestorage/outgoing/{Name}.{Extension}", "GET")]
[Route("/filestorage/outgoing", "GET")]
public class GetFileStorageStream : IReturn<HttpResult>
{
    public string Name { get; set; }
    public string Extension { get; set; }
    public bool ForDownload { get; set; }
} 
```

您可以定义您的服务以返回一个 HttpResult：

```
public class FileStorageService : Service
{
    public HttpResult Get(GetFileStorageStream fileInformation)
    {
        var internalResult = GetFromFileStorage(fileInformation);
        var fullFilePath = Path.Combine("C:\Temp", internalResult.FileName);
        return new HttpResult(new FileInfo(fullFilePath), asAttachment: fileInformation.ForDownload);
    }
} 
```

然后在客户端，您可以使用此 Get 模板正确获取 Web 上下文：

```
var client = new JsonServiceClient("http://localhost:53842");
var httpResponse = client.Get<HttpWebResponse>("/filestorage/outgoing/test.jpg");
pictureBox1.Image = Image.FromStream(httpResponse.GetResponseStream()); 
```

我发现不可能使用[新的 API Get 方法](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)，因为它们会尝试反序列化 HttpResult，这实际上不是真正的返回类型，而是代表服务堆栈创建的 Web 上下文的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T11:55:55.163

您可以在使用响应过滤器处理响应之前拦截响应，如下所示：

```
ServiceClientBase.HttpWebResponseFilter = response =>
{
    if (response.Headers["Content-Disposition"] != null)
    {
        var t = response.DownloadText();
        Console.WriteLine(t);
    }
}; 
```

但是，这不是处理它的最佳方法，因为实际调用`client.Method()`将导致`ArgumentException`客户端尝试读取响应流（因为它之前已被 读取`response.DownloadFile(...)`。我还没有想出处理的方法优雅地，但如果我这样做，我会更新我的答案。

# android - 如何阻止 google adsense 在 android webview 中加载？

> ID：14134668
> 
> 赞同：1
> 
> 时间：2013-01-03T07:23:17.790
> 
> 标签：android, webview

如何阻止 google adsense 在 android webview 中加载？

我想屏蔽广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T15:50:29.940

我们真的需要阻止 adense 在 webview 中显示吗？请参考： http: [//masimfarooq.wordpress.com/2012/09/07/how-to-add-google-adsense-ads-to-your-android-app/](http://masimfarooq.wordpress.com/2012/09/07/how-to-add-google-adsense-ads-to-your-android-app/) 我知道 Adsense 的政策适用于mobile 声明： 在移动应用程序中使用 AdSense 移动版违反了 AdSense 政策。移动应用程序构成任何可下载的应用程序，即使使用 WebView 来显示广告也是如此。 [https://support.google.com/adsense/answer/68724?hl=en](https://support.google.com/adsense/answer/68724?hl=en)

但是，我们没有在移动设备上使用 AdSense。大多数情况下，我们将 adsense 用于广告尺寸为 320x50（移动横幅）的内容。

# java - 控制台命令 Minecraft 服务器通过 Java GUI 启动/停止

> ID：14134669
> 
> 赞同：0
> 
> 时间：2013-01-03T07:23:18.393
> 
> 标签：java, command-line, console, runtime.exec, minecraft

我一生都无法弄清楚如何使用 Java 中的两个按钮来启动和停止游戏 Minecraft 的服务器。

到目前为止我有这个烂摊子..

```
try
        {
            ProcessBuilder processBuilder = new ProcessBuilder("/Users/UserName/Desktop/servers/test/launch.sh");
            Process server;
            if (event.getSource() == start_Btn)
            {
                server = processBuilder.start();
                //OutputStream out = server.getOutputStream();
                start_Btn.setText("Started");

            }   
            else if (event.getSource() == stop_Btn)
            {

                OutputStream out = server.getOutputStream();
                server.getOutputStream().write(new String("stop").getBytes("utf-8"));

                stop_Btn.setText("Stoped");
                start_Btn.setText("Start");

            }
        }
        catch (IOException exception)
        {

        }
        catch (InterruptedException exception)
        {

        } 
```

今天我在网上搜索了一整天，我决定终于把它带给你们。

我希望能够通过按下“开始”按钮来启动服务器，然后用“停止”按钮停止它我已经设置了 GUI，并且我知道如何设置按钮事件。我可以轻松地让服务器从开始按钮开始，这只是我似乎无法管理的停止功能。

注意：要停止服务器，您必须在启动服务器的命令行中输入“停止”。

非常感谢您的帮助，我非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T02:26:31.943

好像从来没有一个答案可以解决我的问题，并且好像是我自己想出来的，我想我会把它发布给其他发生在这个问题上的人。

我使用了几个类来实现这个目标，确切地说是两个。一个是容纳服务器的线程，另一个是向服务器发送命令。

首先，启动和容纳服务器流的代码。

**这里的第一堂课是魔法发生的地方**

```
public class Sender{

ConsoleWriter cWriter = new ConsoleWriter();
public void execute(){
    this.ui = ui;
    try{
        ProcessBuilder pb = new ProcessBuilder(path_to_server+"launch.bat");
        Process process = pb.start();

        StreamGobbler sgError = new StreamGobbler(process.getErrorStream());

        new Thread( sgError ).start();
        writer = new PrintWriter( process.getOutputStream() );

    } catch ( IOException e ){
        e.printStackTrace();
    }
}

private class StreamGobbler implements Runnable 
{
    private InputStream is;
    public StreamGobbler( InputStream is ){
        this.is = is;
    }
    @Override
    public void run() {
        try {
            InputStreamReader isr = new InputStreamReader( is );
            BufferedReader br = new BufferedReader( isr );
            String line = null;
            while ( ( line = br.readLine() ) != null ){
                cWriter.writer(line, ui);
            }
        } catch ( IOException e ){
            e.printStackTrace();
        }
    }
}

} 
```

你问这是如何工作的？让我们从顶部开始。

*   控制台编写器

这是我编写的用于将流从 Minecraft 的服务器控制台写入我自己的 GUI 的类，其代码并不重要，因此我将其省略。你可以写那部分。

*   执行（）

此方法使用 Java 的 ProcessBuilder 为服务器构建进程，然后启动该进程。更重要的是，我们拥有 StreamGobbler。这使我们能够访问并“吞噬”来自服务器的输入流。基本上它从服务器接收控制台的所有输出。出于某种原因，不知道为什么，Minecraft 服务器喜欢 ErrorStream，所以我将它绑定到了它。然后我为 gobbler 创建一个新线程，就是这样。这种方法的最后一件事是......

*   打印机作家

这作为输出绑定到服务器，让我可以向服务器发送命令，例如停止它或任何其他可用的服务器命令。

*   StreamGobbler 类

现在，到 Gobbler 上。这里没有太多。基本上只是将我们从执行方法发送的 inputStream 发送给阅读器，然后对其进行缓冲，最后将其读给我的控制台编写器。

**第二课很简单！**

```
public class WriteCommand
{
public void send(String command)
{
    txtA.append("Command:>>"+ command + "\n");
    writer.write(command);
    writer.write("\n");
    writer.flush(); 
}
} 
```

所有这一切都是编写命令并点击“输入”然后刷新它以准备发送下一个！txtA.append 用于添加发送到我自己的控制台输出的命令，只是一个可视项。

你去吧！希望这会帮助其他人。如果您想查看此代码的实际效果，您可以将其视为我使用过的应用程序的一部分。

这是一个链接：[Minecraft Server Utility(BETA)1.3.6](https://docs.google.com/file/d/0B0jgN5UHAmNnRVd2ZURXY0JqdWc/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:06:01.430

我今天也在做同样的任务。我是java的新手，但我想我找到了你可能缺少的东西。我或多或少跟随你的脚步，但在停止命令中使用斜杠 `"/stop"`

似乎我需要关闭输出流才能完成操作。

```
private void stopButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    // TODO add your handling code here:
    try {
        oS.write(new String("/stop").getBytes("utf-8"));
        oS.close();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

我希望这对你有帮助。

# android - 图像未从列表视图上的 URL 加载

> ID：14134677
> 
> 赞同：1
> 
> 时间：2013-01-03T07:23:51.187
> 
> 标签：android, url, listview, imageview

我目前正在使用 Android，并且我创建`listview`了从 URL 加载图像的程序。我通过以下代码实现了这一点

```
InputStream is = (InputStream) new URL("http://ka.35pk.com/uploadfiles/gamepic/090830121252.jpg").getContent();

Drawable d = Drawable.createFromStream(is, "pic name");
imageview.setImageDrawable(d); 
```

在`listview`我向下滚动`listview`一次之前，图像不会加载。但它可以正确加载到`listview`. 即，如果我在 listview 上有 100 张图像，意味着一次只有 10 张图像在屏幕上可见，这 10 张图像无法在乞求时加载，当我向下滚动时，另外 10 张不可见图像现在出现在可见部分，并且这些图像现在已成功加载，当我再次向上滚动时，现在那些已卸载的图像现在也已加载，这意味着它在屏幕上可见时无法加载。对不起我的英语。希望，我已经详细解释了。如何在`listview`不使用向下/向上滚动的情况下从 URL 加载所有图像。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:33:23.113

检查此答案对您有帮助：

*   **(1)** [https://stackoverflow.com/a/3068012/1168654](https://stackoverflow.com/a/3068012/1168654)

和

*   **(2)** [https://stackoverflow.com/a/8562313/1168654](https://stackoverflow.com/a/8562313/1168654)

如果您的应用程序有很多图像并且还存在内存问题，那么您必须以自己的方式处理。

就像使用延迟加载在列表视图中下载图像一样。对于其他图像，请使用另一种方式，例如链接 2。

对于您的滚动问题，请检查您`getView()`在适配器中添加的代码，如下所示：

```
public class ListViewAdapter extends BaseAdapter {

        private LayoutInflater mInflater;

        public ListViewAdapter(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return SoapParser.title_date.size();
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            // return product_id1.size();
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            // return product_id1.get(position).hashCode();
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.row_tb, null);
                holder = new ListContent();

                holder.date = (TextView) v.findViewById(R.id.textView1);
                holder.actual = (TextView) v.findViewById(R.id.textView2);
                holder.targate = (TextView) v.findViewById(R.id.textView3);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.date.setId(position);
            holder.actual.setId(position);
            holder.targate.setId(position);

            holder.date.setText(" " + SoapParser.title_date.get(position));
            holder.actual.setText(" " + SoapParser.title_actual.get(position));
            holder.targate
                    .setText(" " + SoapParser.title_targate.get(position));

            return v;
        }
    } 
```

如果您在布局中使用任何其他视图，请制作它`android:focusable='false'`

# .htaccess - 修改服务器上的重写

> ID：14134685
> 
> 赞同：0
> 
> 时间：2013-01-03T07:24:23.977
> 
> 标签：.htaccess, mod-rewrite

当我联系我的主机提供商时，我已告知服务器中已启用 mod-rewrite。我在 .htaccess 文件中插入了以下代码，它在本地服务器中运行良好，但在服务器中运行良好

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME}.php -f  
RewriteRule ^([^\.]+)$ $1.php [NC]
RewriteRule ^filename1/name1/([a-zA-Z0-9_-]+)\.html$ filename2.php?id=$2
RewriteRule ^filename1/name2/([a-zA-Z0-9_-]+)\.html$ filename3.php?id=$2
RewriteRule ^filename1/name3/([a-zA-Z0-9_-]+)\.html$ filename4.php?id=$2
RewriteRule ^filename1/name4/([a-zA-Z0-9_-]+)\.html$ filename5.php?id=$2 
```

# c# - 检查表存在：表存在时不存在

> ID：14134688
> 
> 赞同：1
> 
> 时间：2013-01-03T07:25:05.217
> 
> 标签：c#, sql, sql-server, visual-studio-2012

```
public bool CheckTblExist(string TblName)
    {
        try
        {  
            string cmTxt = "select case when exists" 
            + "((select * from information_schema.tables " 
            + "where table_name = '" + TblName + "')) then 1 else 0 end";

            var cmd = new OdbcCommand(cmTxt);
            if ((int)cmd.ExecuteScalar() == 1) exists = true;
            MessageBox.Show(TblName + " table Exists.");
        }
        catch
        {
            exists = false;
            MessageBox.Show(TblName + " table does not Exist.");
        }
        return exists;
    } 
```

使用 VS2012，C# 我在 App_Data 中手动创建了名为 Tasoo1.mdf 的 mdf 文件，连接名为 con。Tasoo.mdf 已经有 1 个名为 '1010' 的表使用创建

```
string cmdText = "CREATE TABLE [" + tblname + "]" 
                 + "(column_name1 int,column_name2 int,column_name3 int)"; 
```

执行代码，给我的表不存在？任何想法如何解决这个问题..提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:26:57.260

您的 if 语句下只有一个语句，即`exists = true`. 您的 MessageBox.Show 在 if 语句之外。因此，即使 if 语句返回 false，您也将始终得到表存在的消息。将其附在`{}`.

```
if ((int)cmd.ExecuteScalar() == 1) 
{    
     exists = true;
     MessageBox.Show(TblName + " table Exists.");
} 
```

您当前的代码：

```
if ((int)cmd.ExecuteScalar() == 1) exists = true;
MessageBox.Show(TblName + " table Exists."); // this is irrespective of the if 
```

> 执行代码，给我的表不存在？

你在你的 catch 块中展示了这一点。这意味着您遇到了一些异常。有一个空的 catch 块不是一个好主意。捕捉异常，看看出了什么问题。

```
catch(SqlException ex)
{
   MessageBox.Show(ex.Message);
   //handle exception
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:31:58.170

```
var cmd = new OdbcCommand(cmTxt); 
```

此命令永远不会与任何类型的连接对象相关联（更不用说打开的对象了）

```
catch
    {
        exists = false;
        MessageBox.Show(TblName + " table does not Exist.");
    } 
```

此代码*忽略*发生的任何异常，只报告该表不存在。如果您实际上指定了一个变量来包含异常并检查它，您可能已经发现了我提到的首要问题。

* * *

当然，即使您修复了这些问题，当表不存在时，您的代码（如编写的那样）也不应该*抛出*异常。当您调用`ExecuteScalar`.

有这么多问题，这感觉就像一个家庭作业问题。

您可以将后面的部分重写为：

```
if ((int)cmd.ExecuteScalar() == 1)
{
   MessageBox.Show(TblName + " table exists.");
   return true;
}
else
{
   MessageBox.Show(TblName + " table does not exist.");
   return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:31:17.800

简单的尝试方法

```
bool tabex;
try
{ 
    var cmd = new OdbcCommand(
      "select case when exists((select * from information_schema.tables where table_name = '" + tableName + "')) then 1 else 0 end");

    tabex= (int)cmd.ExecuteScalar() == 1;
}
catch
{
    try
    {
        tabex = true;
        var cmdOthers = new OdbcCommand("select 1 from " + tableName + " where 1 = 0");
        cmdOthers.ExecuteNonQuery();
    }
    catch
    {
        tabex = false;
    }
} 
```

还要检查一下：[使用 C#，如何检查 SQL 中是否存在表？](http://social.msdn.microsoft.com/Forums/en-US/sqlservermigration/thread/a6d13bf2-f56f-40bd-9210-8a0ed4270a78/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:31:28.070

当你说它给出的表不存在时，我假设你的意思是第二个消息框正在显示？这是由抛出异常引起的。你真的需要捕捉被抛出的异常对象，它会告诉你你的问题是什么。

# javascript - ASP 中的 Java 脚本属性中的连接字符串

> ID：14134690
> 
> 赞同：0
> 
> 时间：2013-01-03T07:25:15.593
> 
> 标签：javascript, asp.net, html, asp.net-mvc

有谁知道如何在按钮属性中放置多变量？

这是示例

```
btnLookupNo.Attributes.Add("onClick", "showLookUpWindow('',");return true") 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:13:57.167

只需通过更改属性重复类似的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:27:46.293

假设您通过在 Add 方法中查看您的尝试来尝试将多个传递`parameter`给 javascript `function`。您可以使用`+`来连接 javascript 函数调用中的变量，并且您需要处理这样的引号，

*在后面的代码中*

```
string var1 = "string 1";
string var2 = "string 2";
btnLookupNo.Attributes.Add("onClick", 
  "showLookUpWindow('" + var1 + "','" + var2 +"'); return true"); 
```

*在 JavaScript 中*

```
function showLookUpWindow(arg1, arg2)
{
     alert(arg1);
     alert(arg2);
} 
```

# qt - 如何使用信号槽将 QT 设计器中制作的文本框与编码功能链接起来

> ID：14134693
> 
> 赞同：0
> 
> 时间：2013-01-03T07:25:29.690
> 
> 标签：qt, textbox, io, qt-designer

我使用 QT 设计器制作了 ui。在主窗口中有一个文本框，用户可以在其中输入他的名字。**当用户输入的数据结束时，我想调用函数“输入”。** 但我找不到将文本框从使用 QT 设计器设计的 ui 链接到其他类的编码函数的方法。我猜信号和插槽（在 qt 设计器中）只能链接到同一窗口的组件。

同样， **同时我想将用户输入的名称存储在**同一函数输入中的 char 变量 usr_nm[] 中。稍后我想在文本浏览器中显示名称以及函数输出中的一些其他详细信息。（-->输入和输出函数在同一个类中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:40:58.203

你必须在 Qt Designer 中定义它吗？

在我看来，如果您只是使用自动连接插槽会更好，例如：

```
on_textBoxName_textChanged()  // I'm assuming you are using QTextEdit
{
     ui->textBoxName->toPlainText();  // this returns text in QTextEdit as QString.  
} 
```

这使用自动连接 - 请参见[此处](http://doc.qt.digia.com/qt/designer-using-a-ui-file.html#widgets-and-dialogs-with-auto-connect)。

# html - RGBA 不适用于 HTML 电子邮件

> ID：14134694
> 
> 赞同：4
> 
> 时间：2013-01-03T07:25:36.957
> 
> 标签：html, css, html-email

我正在尝试发送带有 CSS 样式的 HTML 电子邮件。

我有代码`style = 'background-color: rgba(255, 255, 255, 0.4)'` ，它不会应用它，而是使背景完全不透明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:27:20.660

这实际上取决于您正在测试的邮件客户端的支持，但鉴于 RGBA 值是 CSS3 功能，我根本不会打赌支持。我建议将自己限制为 RGB、HEX 或命名颜色，即使这样，根据您使用它的位置，某些客户端根本不支持颜色属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:11:02.780

不要使用RGBA。您应该为电子邮件使用完整的 6 位十六进制代码，例如：#FFFFFF。3 位 HEX，不能始终如一地工作，RGB 或颜色名称也不能。

图层透明度的唯一方法是使用 .PNG。

请记住 .PNG 不会在旧版本的 Lotus Notes 中打开，但这只是大多数订阅者列表中的一小部分用户。

# java - 双向一对多，继承不起作用（jpa with hibernate 3.5.4）

> ID：14134695
> 
> 赞同：0
> 
> 时间：2013-01-03T07:25:49.823
> 
> 标签：java, hibernate, jpa

我正在尝试映射双向的一对多关系。我遇到了一些麻烦，因为“多”端引用了一个抽象超类。在互联网上搜索可能的原因时，我发现这是一个已知问题，但我无法为我的案例找到解决方案。

我已经检查了[这个](http://chriswongdevblog.blogspot.be/2009/10/polymorphic-one-to-many-relationships.html)博客上的解决方法，“单表，没有 mappedBy”看起来像一个解决方案，但我真的需要双向关联。

这些是我要映射的类：

拥有方

```
@Entity(name = "CC_Incl_Site")
public class IncludedSite {
    @OneToMany(fetch=FetchType.LAZY, mappedBy = "includedSite")
    private Set<CtaContractBase> ctas = new HashSet<CtaContractBase>();

    @OneToMany(fetch=FetchType.LAZY, mappedBy = "includedSite")
    private Set<WoContractBase> wos = new HashSet<WoContractBase>();  
} 
```

另一边：

```
@Entity
public abstract class SCContract extends Contract {

    @ManyToOne(cascade = CascadeType.PERSIST, fetch = FetchType.LAZY)
    @JoinColumn(name = "incl_site_id")
    private IncludedSite includedSite;
} 
```

合同（SCContract 的超类）：

```
@Entity(name = "CC_CONTRACT")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "contractType", discriminatorType = DiscriminatorType.STRING)
@ForceDiscriminator
public abstract class Contract {

...

} 
```

尝试运行应用程序时出现此异常：

mappedBy 引用了一个未知的目标实体属性：IncludedSite.ctas 中的 CtaContractBase.includedSite

另一种解决方案似乎是用@MappedSuperClass 替换SCContract 中的@Entity 注释，但这会导致另一个异常（使用@OneToMany 或@ManyToMany 针对未映射的类：StudyContract.contracts[SCContract]），因为在另一个类（StudyContract）中我有

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "studyContract", targetEntity = SCContract.class)
@BatchSize(size = 10)
private Set<SCContract> contracts; 
```

正如博客所解释的那样，使用这种方法不再可能拥有超类的集合。

还有其他解决方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:48:52.983

中的关联`IncludedSite`定义为

```
@OneToMany(fetch=FetchType.LAZY, mappedBy = "includedSite")
private Set<CtaContractBase> ctas = new HashSet<CtaContractBase>(); 
```

因此，Hibernate 会查找类中`IncludedSite`命名`includedSite`的类型属性`CtaContractBase`。没有这样的领域。该字段仅存在于子类中`SCContract`。这意味着只有`SCContract`实例才能成为此关联的目标，因此应将关联定义为

```
@OneToMany(fetch=FetchType.LAZY, mappedBy = "includedSite")
private Set<SCContract> ctas = new HashSet<SCContract>(); 
```

# sql - 单击复选框后发送电子邮件

> ID：14134696
> 
> 赞同：0
> 
> 时间：2013-01-03T07:25:57.840
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

```
我在前端有一个名为“Ticket”的复选框。如果点击 Ticket 复选框，则会向收件人发送一封电子邮件。

在这里，我知道谁是收件人，所以这不是问题。电子邮件正文也已准备就绪。

只是，我希望当票证复选框被点击时查询中的条件应该发送电子邮件。我正在使用的表中还有 hasticket 位字段。所以最初，这个hasticket字段将为0。我怎样才能做到这一点？

这是样本数据：

通过号 单票名称
A1234 0 ABC

```

当我点击前端的复选框时，应该会向 abc 发送一封电子邮件。

这是我所拥有的：存储的 proc sppass_update 将更新表中的 hasticket 字段。所以首先我需要使用这个存储过程来更新表。然后我可以发送电子邮件。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:58:40.897

使用 SQL Server 的数据库邮件组件：

1.  配置用于发送电子邮件的配置文件，例如使用 SSMS 向导。
2.  使用您的参数调用`sp_send_dbmail`系统程序以使用您配置的配置文件发送电子邮件。

SQL Server 将发送电子邮件。

# html - 在页面的死点居中项目

> ID：14134700
> 
> 赞同：2
> 
> 时间：2013-01-03T07:26:37.293
> 
> 标签：html, css

我正在尝试在页面的死点放置一些大文本。我只想要（更喜欢）页面中的正文标签，没有别的。我已经尝试使用`display: table-cell`并将其设置`vertical-alignment`为`middle`但不适用于`height: 100%`

然后我在 stackoverflow 上发现了另一个问题，它解决了这个问题，但我意识到它不适用于更大的字体。这是我到目前为止所拥有的：http: [//jsfiddle.net/aECYS/](http://jsfiddle.net/aECYS/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T07:35:25.607

根据指定的宽度和高度将 div 推到顶部和左侧。

**CSS**

```
 body{ background-color: #000;}
    div{
        background-color: #000;
        width:800px; 
        height: 200px; line-height: 200px;
        position: absolute;
        top: 50%; margin-top:-100px;
        left: 50%; margin-left:-400px;
        font-weight: bold;
        font-size: 100px;
        text-transform: uppercase;
        color: #ccc; text-align:center
    }​ 
```

**[演示](http://jsfiddle.net/aECYS/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:32:05.473

如果你的位置是绝对的，那么你将你的文本移动到任何你想要改变你的css属性的地方。

注意：绝对定位的元素可以与其他元素重叠。

```
position: absolute;
top: 37%;
left: 34%; 
```

[看演示](http://jsfiddle.net/Dineshkani/aECYS/2/)

将宽度和高度设置为 100%

```
width: 100%;
height: 100%;
position: absolute;
top: 50%;
left: 50%; 
```

然后是不同屏幕尺寸的文本中心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-10T04:50:53.073

```
.Absolute-Center {
 margin: auto;
 position: absolute;
 top: 0; left: 0; bottom: 0; right: 0;
 } 
```

是最好的方法，尽管在这里选择你的课程。

# ios - 键入时键盘挂起

> ID：14134703
> 
> 赞同：0
> 
> 时间：2013-01-03T07:26:54.127
> 
> 标签：ios, uikeyboard

首先祝大家新年快乐。

我正在开发聊天应用程序我输入的字符出现了。

任何人都可以建议我如何防止键盘挂起。任何建议都会被应用。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:49:35.057

您需要使用非阻塞的异步函数/方法来发送消息，或者您需要在调度队列或操作队列上发送消息。

[*Apple 的并发编程指南*](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091-CH1-SW1)中讨论了这两种队列类型。

您还可以观看一些有关并发的 Apple 开发者视频：

*   [WWDC 2011 Session 308 - Blocks and Grand Central Dispatch 实践](https://developer.apple.com/videos/wwdc/2011/?id=308)
*   [WWDC 2011 Session 210 - 掌握 Grand Central Dispatch](https://developer.apple.com/videos/wwdc/2011/?id=210)
*   [WWDC 2012 Session 712 - 带有块、GCD 和 XPC 的异步设计模式](https://developer.apple.com/videos/wwdc/2012/?id=712)
*   [WWDC 2012 Session 211 - 在 iOS 上构建并发用户界面](https://developer.apple.com/videos/wwdc/2012/?id=211)
*   [WWDC 2012 Session 235 - iOS 应用性能：响应性](https://developer.apple.com/videos/wwdc/2012/?id=235)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:33:36.257

使用[NSThread](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)，因为您希望完成一个计算工作单元，而不必等待其他单元完成或阻止其他计算工作。

如果这样做是明智的，您几乎可以将任何工作放入线程中。

一个很好的例子是网络请求，您可以在其中设置一个线程来从 Web 服务器下载数据。当你的线程完成它的工作时，它会触发一个“处理程序”函数。处理程序处理下载​​的数据；例如，解析来自 Web 服务的 XML 数据。

在此示例中您将使用线程，因为您不希望整个应用程序在您的应用程序通过网络下载数据并对其进行处理时锁定。NSThread 实例将这个工作单元放入它自己的小“空间”中，允许较大的应用程序继续与用户交互。

您不想在 iOS 平台上使用线程的一个示例是 UI 更新（例如，更改任何 UIControl 小部件的状态）。所有 UI 更新都发生在主线程上。如果您将自己的线程与 UI 小部件一起使用，则行为是不可预测的，而且通常根本无法工作。

编辑：对于发送消息，您应该使用`NSThread`

# java - MyEclipse 尚不支持 1.7 编译器合规级别

> ID：14134709
> 
> 赞同：2
> 
> 时间：2013-01-03T07:27:39.773
> 
> 标签：java, eclipse

我想在 Java 1.7 中使用带有字符串的新 switch 语句。例如

```
 String str = "string";
    switch (str) {
         case "string" : 
             // do something
             break; 
    } 
```

我安装了 JDK 7 并将首选项更改为使用 jre7，但我无法从 eclipse 内部将编译器合规级别更改为 1.7，属性对话框的下拉菜单只能达到 1.6。重新启动该工具，但没有看到任何变化。现在我应该怎么做才能在 Ecipe 中将 JDK 更新到 1.7，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:12:19.907

这很奇怪；MyEclipse 10.7 应该支持 Java 7：[MyEclipse Java 7 Support](http://www.genuitec.com/blog/?p=3970)

我们有一个[详细的论坛帖子](http://myeclipseide.com/PNphpBB2-viewtopic-t-28470.html)说：

> MyEclipse **10.0.1**现已公开发布
> ...
> 1) 基于**Eclipse 3.7.1 构建，现在支持 Java 7。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:45:21.773

哦，至于你在命令行输入 java -version 中的 java 问题，那可能会回答你的问题。找出安装的 Java 版本，如果您要使用 Java 7，我认为您需要 Indigo，我觉得我在 Windows 上遇到了问题，但我不记得具体了。将 Java 和 Eclipse 更新到最新版本，一切顺利。如果你运行的是 Linux，我只是坚持使用 Java 6。

# c# - Epplus不读取excel文件

> ID：14134712
> 
> 赞同：27
> 
> 时间：2013-01-03T07:27:47.277
> 
> 标签：c#, visual-studio-2010, epplus

下面是我读取excel文件的代码。

代码。

```
FileInfo newFile = new FileInfo("C:\\Excel\\SampleStockTakeExceptionReport.xls");
ExcelPackage pck = new ExcelPackage(newFile);
var ws = pck.Workbook.Worksheets.Add("Content");
ws.View.ShowGridLines = false;
ws.Cells["J12"].Value = "Test Write";
pck.Save();
System.Diagnostics.Process.Start("C:\\Excel\\SampleStockTakeExceptionReport.xls"); 
```

当我运行代码时，它会引发运行时错误。

错误

```
System.Exception: Can not open the package. Package is an OLE compound document. If this is an encrypted package, please supply the password ---> System.IO.FileFormatException: File contains corrupted data.
   at MS.Internal.IO.Zip.ZipIOEndOfCentralDirectoryBlock.FindPosition(Stream archiveStream)
   at MS.Internal.IO.Zip.ZipIOEndOfCentralDirectoryBlock.SeekableLoad(ZipIOBlockManager blockManager)
   at MS.Internal.IO.Zip.ZipArchive..ctor(Stream archiveStream, FileMode mode, FileAccess access, Boolean streaming, Boolean ownStream)
   at MS.Internal.IO.Zip.ZipArchive.OpenOnStream(Stream stream, FileMode mode, FileAccess access, Boolean streaming)
   at System.IO.Packaging.ZipPackage..ctor(Stream s, FileMode mode, FileAccess access, Boolean streaming)
   at System.IO.Packaging.Package.Open(Stream stream, FileMode packageMode, FileAccess packageAccess, Boolean streaming)
   at System.IO.Packaging.Package.Open(Stream stream, FileMode packageMode, FileAccess packageAccess)
   at OfficeOpenXml.ExcelPackage.ConstructNewFile(Stream stream, String password)
   --- End of inner exception stack trace ---
   at OfficeOpenXml.ExcelPackage.ConstructNewFile(Stream stream, String password)
   at OfficeOpenXml.ExcelPackage..ctor(FileInfo newFile)
   at Report.Form1.ExportToExcel1(DataTable Tbl, String ExcelFilePath) in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Form1.cs:line 39 
```

如果有人可以就此提供建议/帮助，我们将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-03T07:32:11.527

据我所知，Epplus 不处理 .xls（BIFF8 格式）文件。

它处理较新的 .xlsx（Open Office Xml）格式。

您可以使用[excellibrary](http://code.google.com/p/excellibrary/)，因为它适用于 xls 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-26T16:12:22.647

在这篇文章的日期，EPPLUS (v4.4.1) 似乎像处理 xlsx 一样处理 xls 文件：

这是一个例子：

```
 using (var target = new ExcelPackage(new System.IO.FileInfo("D:\\target.xls")))
        {
            target.Workbook.Worksheets.Add("worksheet");
            target.Workbook.Worksheets.Last().Cells["A1:A12"].Value = "Hi";
            target.Save();
        } 
```

还测试了您的代码：

```
FileInfo newFile = new FileInfo("C:\\Excel\\SampleStockTakeExceptionReport.xls");
ExcelPackage pck = new ExcelPackage(newFile);
var ws = pck.Workbook.Worksheets.Add("Content");
ws.View.ShowGridLines = false;
ws.Cells["J12"].Value = "Test Write";
pck.Save();
System.Diagnostics.Process.Start("C:\\Excel\\SampleStockTakeExceptionReport.xls"); 
```

它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-27T11:40:58.147

在使用 EPPlus 读取 Excel 工作表之前，您需要将 XLS 转换为 XLSX 格式。[**您可以在这篇**](https://medium.com/@lockevn/convert-excel-format-xls-to-xlsx-using-c-3e1a348fca22)文章中找到更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-23T08:00:10.990

**解决方案如果您想使用 Epplus 并且您的 Eplus 版本不支持 .xlx**

注意：如果您可以将 .xlx 文件转换为 .xlsx，则可以跳过以下步骤

您可以更改文件类型..（office 10 或更高版本）

```
1> File
2> Save & Send
3> File Types > Change File Type
4> Workbook File Types > Select Workbook
5> Click Save As 
```

完成上述步骤后，您的文件将保存为 .xlsx 格式

# android - 使用 TabHost 时如何消除像素错误

> ID：14134716
> 
> 赞同：3
> 
> 时间：2013-01-03T07:27:52.250
> 
> 标签：android, android-layout, android-widget

我们有一个关于 Android 中的 TabHost-widget 的奇怪问题。我们如何修复像素线错误（如下图所示）：

![像素错误](../Images/04274d331f00d3a55c0495b523cdb211.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:53:32.187

几天前我也有同样的问题。但是现在有了将其更改为图像的解决方案。默认情况下，选择了第一个选项卡，当“获取”更改时，所有选项卡会根据选项卡选择自动更改。

请参见下面的代码：

```
 public class MainTabActivity extends TabActivity {
    TabHost mTabHost;
    TabWidget mTabWidget;
    private TextView title;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_tab_layout);

        //Resources res = getResources();
        mTabHost = getTabHost();
        TabHost.TabSpec spec;
        mTabWidget = mTabHost.getTabWidget();
        Intent intent;

        intent = new Intent().setClass(MainTabActivity.this, TodaysDealsGroupActivity.class);
        spec = mTabHost.newTabSpec(getResources().getString(R.string.tab_todays_deal)).setIndicator(getResources().getString(R.string.tab_todays_deal), getResources().getDrawable(R.drawable.tab_loyalshop_selector)).setContent(intent);
        mTabHost.addTab(spec);

        intent = new Intent().setClass(MainTabActivity.this, BuddiesGroupActivity.class);
        spec = mTabHost.newTabSpec(getResources().getString(R.string.tab_buddies)).setIndicator(getResources().getString(R.string.tab_buddies), getResources().getDrawable(R.drawable.tab_buddies_selector)).setContent(intent);
        mTabHost.addTab(spec);

        intent = new Intent().setClass(MainTabActivity.this, SearchGroupActivity.class);
        spec = mTabHost.newTabSpec(getResources().getString(R.string.tab_search)).setIndicator(getResources().getString(R.string.tab_search), getResources().getDrawable(R.drawable.tab_search_selector)).setContent(intent);
        mTabHost.addTab(spec);

        intent = new Intent().setClass(MainTabActivity.this, ProfileGroupActivity.class);
        spec = mTabHost.newTabSpec(getResources().getString(R.string.tab_profile)).setIndicator(getResources().getString(R.string.tab_profile), getResources().getDrawable(R.drawable.tab_profile_selector)).setContent(intent);
        mTabHost.addTab(spec);

        intent = new Intent().setClass(MainTabActivity.this, NotificationsGroupActivity.class);
        spec = mTabHost.newTabSpec(getResources().getString(R.string.tab_notifications)).setIndicator(getResources().getString(R.string.tab_notifications), getResources().getDrawable(R.drawable.tab_notification_selector)).setContent(intent);
        mTabHost.addTab(spec);

        for (int i = 0; i < mTabHost.getTabWidget().getChildCount(); i++) {
            mTabHost.getTabWidget().getChildAt(i).setBackgroundDrawable(getResources().getDrawable(R.drawable.tab_black_bg));
            title = (TextView) mTabWidget.getChildAt(i).findViewById(android.R.id.title);
            title.setTextColor(Color.WHITE);
            title.setTextSize(10);
        }

        // check if App starts from the Notification click or not
        if(getIntent().hasExtra("notification")){
            // for the current tab selection
            mTabHost.getTabWidget().getChildAt(4).setBackgroundDrawable(getResources().getDrawable(R.drawable.tab_blue_bg));
            mTabHost.setCurrentTab(4);
            title = (TextView) mTabWidget.getChildAt(4).findViewById(android.R.id.title);

        }else{
            // for the current tab selection
            mTabHost.getTabWidget().getChildAt(0).setBackgroundDrawable(getResources().getDrawable(R.drawable.tab_blue_bg));
            mTabHost.setCurrentTab(0);
            title = (TextView) mTabWidget.getChildAt(0).findViewById(android.R.id.title);

        }

        title.setTextColor(Color.BLACK);
        title.setTextSize(10);

        // listener for the tab changed
        mTabHost.setOnTabChangedListener(new OnTabChangeListener() {
            @Override
            public void onTabChanged(String tabId) {

                for (int i = 0; i < mTabHost.getTabWidget().getChildCount(); i++) {
                    mTabHost.getTabWidget().getChildAt(i).setBackgroundDrawable(getResources().getDrawable(R.drawable.tab_black_bg));
                    title = (TextView) mTabWidget.getChildAt(i).findViewById(android.R.id.title);
                    title.setTextColor(Color.WHITE);
                    title.setTextSize(10);
                }

                int tab = mTabHost.getCurrentTab();

                mTabHost.getTabWidget().getChildAt(tab).setBackgroundDrawable(getResources().getDrawable(R.drawable.tab_blue_bg));
                title = (TextView) mTabWidget.getChildAt(tab).findViewById(android.R.id.title);
                title.setTextColor(Color.BLACK);
                title.setTextSize(10);
            }
        });
    }
} 
```

这是 XML 文件**main_tab_layout.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TabHost
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:orientation="vertical" >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" />

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="bottom|center_horizontal"
                android:tabStripEnabled="false" >
            </TabWidget>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

只需替换为您的图像并查看结果。

希望这会对你有很大帮助，因为它对我有帮助。

享受编码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:22:58.767

我有三个选项卡和一个自定义分隔线，但是自定义 xml (customtabview.xml) 用于所有五个选项卡。

标签.java

```
 tabHost = getTabHost();
    TabHost.TabSpec spec; 

    LinearLayout v = (LinearLayout)(getLayoutInflater().inflate(R.layout.customtabview,     null));

    //FIRST TAB 
    ((TextView)v.findViewById(R.id.title)).setText("FIRST");
    ((TextView)v.findViewById(R.id.title)).setCompoundDrawablesWithIntrinsicBounds(0,R.drawable .tab_back,0,0 );
    spec = tabHost.newTabSpec("first").setIndicator(v).setContent(R.id.tab_first_info);
    tabHost.addTab(spec);

    //SECOND TAB
    ((TextView)v.findViewById(R.id.title)).setText("SECOND");
    ((TextView)v.findViewById(R.id.title)).setCompoundDrawablesWithIntrinsicBounds(0,R.drawable.tab_back,0,0 );
    spec = tabHost.newTabSpec("second").setIndicator(v).setContent(R.id.tab_second_info);
     tabHost.addTab(spec);

    //THIRD TAB
    ((TextView)v.findViewById(R.id.title)).setText("THIRD");
    ((TextView)v.findViewById(R.id.title)).setCompoundDrawablesWithIntrinsicBounds(0,R.drawable.tab_back,0,0 );
    spec = tabHost.newTabSpec("third").setIndicator(v).setContent(R.id.tab_third_info);
    tabHost.addTab(spec); 
```

customtabview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center" >

        <TextView
           android:id="@+id/title"
           android:drawablePadding="4dp"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           />

</LinearLayout> 
```

# c# - 在 C# WinForm 应用程序中，如何绘制/绘制子窗体关闭按钮

> ID：14134718
> 
> 赞同：1
> 
> 时间：2013-01-03T07:27:59.210
> 
> 标签：c#, winforms, visual-styles

如何绘制/绘制子窗体的关闭按钮（不是 MDI 窗体关闭按钮）。

![在此处输入图像描述](../Images/2be6c9fad434c1fa0cc51ed031c5ca8d.png)

MDI 窗体的关闭按钮可以由 **System.Windows.Forms.VisualStyles.VisualStyleElement.Window.CloseButton.Normal**绘制，但如何绘制**子窗体的关闭按钮**，如图所示。

我有一个东西，但它与显示的图像不同。System.Windows.Forms.VisualStyles.VisualStyleElement.Window.MdiCloseButton.Normal

MdiCloseButton 将提供相同的功能。

# php - 检查 li 是否包含指定的字符串

> ID：14134720
> 
> 赞同：0
> 
> 时间：2013-01-03T07:28:14.653
> 
> 标签：php, javascript, jquery

我有一个数组“名称”。我需要检查这个数组中的元素是否存在于 html 的列表中。

php中的代码如下：

```
foreach ($name as $value2) {
  echo "<script>
  if($('li:not(:contains(\"".$value2."\"))'))
     {
       alert('".$value2." does not  exists');
     }  
  else
     {
       alert('".$value2." exists');
     }
  </script>";
 } 
```

但是我收到警报，因为每个元素都不存在该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:39:59.717

**您可以使用 PHP 数组：**

```
<?php
$os = array("Mac", "NT", "Irix", "Linux");
if (in_array("Irix", $os)) {
    echo "Got Irix";
}
if (in_array("mac", $os)) {
    echo "Got mac";
}
?> 
```

**[参考](http://php.net/manual/en/function.in-array.php)**

你可以这样尝试：

```
 <?php foreach ($name as $value2) {  ?>
 <script>
  if($('li:not(:contains(\"" <?php echo $value2; ?>"\"))'))
     {
       alert('"<?php echo $value2; ?>" does not  exists');
     }  
  else
     {
       alert('"<?php echo $value2; ?>" exists');
     }
  </script>
 <?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:52:40.687

假设您无法在服务器上测试 html 的内容（例如在 ajax 或其他东西之后），创建

```
<script>
.
</script>
<script>
.
</script>
<script>
.
</script> 
```

什么时候可以

```
$jsString = implode("','", $array);
$jsString = "'".$jsString."'";
?>
<script>
var vals = [<? echo $jsString; ?>];
var contains =[],notContains=[],liContains=[];
$.each(vals,function(i,val) {
  var li = $('li:contains("'+val+'")');
  if (li) {
    contains.push(val); // all vals presents
    liContains.push(li); // all (sets of) LIs with the vals
  }
  else {
    notContains.push(val); // all vals not present
  }
});
 alert(contains.length);
</script> 
```

# android - 为什么 imageview 不显示与给定大小相同的图像？

> ID：14134726
> 
> 赞同：0
> 
> 时间：2013-01-03T07:29:21.663
> 
> 标签：android, layout, landscape, portrait, stretched

我为细节的稀疏表示歉意，但这对某人来说最有可能立即显而易见。

我在`ImageButton`页面布局中添加了一个，当它从布局域加载时显示良好，但在布局端口中，同样的东西向上拉伸。图像的大小被硬编码为一个特定的值，所以我看不出它是如何被拉伸的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:44:03.563

是的，android GUI 组件会根据屏幕分辨率自行调整。

在纵向模式下，屏幕的高度会发生变化，这就是为什么您的按钮图像看起来像是垂直拉伸的原因。一个解决方案是使用高分辨率图像或根据屏幕旋转更改布局。

也看看[android-supporting multiplescreens](http://developer.android.com/guide/practices/screens_support.html)

# c - LIS、OBJ、EXE文件有什么关系？

> ID：14134732
> 
> 赞同：2
> 
> 时间：2013-01-03T07:29:38.847
> 
> 标签：c, openvms

我正在使用不同的编译器 CC。它不像 GCC 那样工作。

当我使用 GCC 时，我可以执行“gcc -o exe_filename source_filename”，输出将是一个 exe 文件。

当我使用 CC 时，我需要 2 个步骤。首先我编译源文件（假设它涉及一个 .c 和一个 .h 文件）并创建一个 .lis 文件和一个 .obj 文件。然后我执行一个创建 .exe 文件的链接命令。

LIS、OBJ、EXE文件有什么关系？我问这个是因为我想知道如果我想在另一台机器上使用 exe 而不包含不必要的文件，我需要哪些文件。如果 LIS 和 OBJ 只用于编译，我不需要在另一台机器上使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:47:16.103

编译器获取 C 文件（并包括引用的 H 文件）并生成对象 (OBJ) 和列表 (LIS) 文件。目标文件包含代码和数据，但具有未解析的外部引用。该列表通常包括行号、错误和警告消息以及可选部分，例如类型和变量交叉引用。

链接器组合目标文件并解析对库的外部引用。结果是一个可执行 (EXE) 映像。（或创建库时可共享的图像。）

只需要将可执行文件从一个系统复制到另一个系统即可运行应用程序。该列表可能有助于解释错误消息，因为它提供了正确相关的行号。如果由于库中的更改而需要重新链接应用程序，尤其是在目标系统的版本比原始系统旧的情况下，该对象可能很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T07:34:29.703

OBJ 文件是编译后的 C 文件，其格式可以通过链接器“链接”在一起并转换为 EXE。

编译 -> OBJ -> 链接 -> EXE

LIS 文件只是编译器最终编译的 C 的信息输出。

编译和链接后，您只需要 EXE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:35:52.737

您不需要其他文件。该 exe 将自行正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:38:40.967

我对LIS没有太多想法。但 OBJ 和 EXE 的区别在于 OBJ 文件可能包含未解析的符号，而在 EXE 文件中，所有符号都是链接和解析的。

如果另一台机器也有相同的硬件，那么你可以使用直接 exe 运行，否则你必须交叉编译

# logging - Log4j 的 NDC 和 MDC 设施有什么区别？

> ID：14134734
> 
> 赞同：32
> 
> 时间：2013-01-03T07:29:43.653
> 
> 标签：logging, log4j

在 Log4j 中，NDC 和 MDC 有什么区别？我可以举一个简单的例子吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-28T17:43:32.240

要扩展Sikorski 在评论中添加的[链接：](http://wiki.apache.org/logging-log4j/NDCvsMDC)

# 国家数据中心

在 NDC 中，N 代表*嵌套*，这意味着您可以使用 Stack 控制单个值。您“推送”一个字符串，然后您可以在处理要求时“推送”另一个字符串；处理完成后，您可以将其弹出以查看以前的值。这种上下文日志记录在一些深度嵌套的处理中很有用。

## 设置上下文字符串

```
NDC.push("processingLevel2"); 
log.info("success"); 
```

这将在您具有`%x`（小写）模式的日志中获得输出：

```
log4j.appender.CA.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSSS} %p %C %x = %m%n 
```

# 数据中心

M 代表*mapped*，这为您提供了不同类型的控制。您不使用单个堆栈来控制单个上下文字符串，而是使用名称/值对。这对于跟踪多个上下文位很有用，例如将用户名和 IP 放入日志。

## 设置映射值：

```
MDC.put("userIP", req.getRemoteAddr());
MDC.put("userName", foo.getName());
log.info("success"); 
```

## 示例 MDC log4j 模式

`"userIP"`带有示例和`"userName"`字符串的大写 X。这些必须在您的代码和 log4j 配置中匹配：

```
log4j.appender.CA.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSSS} %p %X{userIP}  %C %X{userName} = %m%n 
```

我会将它们组合成一个）上下文字符串*。

# 相同点和不同点

在这两种情况下，无论何时执行`log.info("success");`，输出都会包含您提供的附加上下文。`log.info(req.getRemoteAddr()) + " success");`这比每次登录时连接字符串要干净得多。

请注意，两者在线程和资源方面存在严重差异。特别是，如果您不勤于弹出和清除 NDC 堆栈，NDC 将保留您的线程的句柄，这可能会影响资源的释放。

来自链接：如果您不定期调用该`NDC.remove()`方法，则使用 NDC 可能会导致内存泄漏。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T08:02:19.993

MDC 允许您为 log4j 添加自定义标签。例如：

```
%X{mytag} in log4j.xml 
```

被引用

```
MDC.put("mytag","StackOverflow"); 
```

MDC 子线程自动继承其父级的映射诊断上下文的副本。

NDC 操作如`push`、`pop`、`clear`和`getDepth`仅`setMaxDepth`影响当前线程的 NDC。

# c# - 如何处理 Windows 身份验证弹出取消按钮？

> ID：14134740
> 
> 赞同：0
> 
> 时间：2013-01-03T07:30:10.290
> 
> 标签：c#, asp.net, windows-authentication

我正在使用带有 Windows 身份验证和注销选项的 ASP.NET 和 C#。在注销时，我将重定向到 logout.aspx。提供登录按钮用于重新登录。

当点击重新登录时，我正在这样做。

```
 Response.Buffer = true;
        Response.StatusCode = 401;
        Response.StatusDescription = "Unauthorized";
        Response.AddHeader("WWW-Authenticate", "NTLM");
        Response.End(); 
```

使用有效凭据可以正常工作。但是，如果他们单击取消，则不会调用 logout.aspx 的页面加载，而是显示空白页。如果我单击刷新它正在登录应用程序而不询问任何凭据。

在注销期间，我正在这样做。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Page.Title = "Service Job Card - Logout";
        if (!IsPostBack )
        {
            //Session.Abandon();
            Session.RemoveAll();
            Response.ClearHeaders();
            Session[SessionNames.userLoggedOut] = true;
        }
        else if (IsPostBack && Session[SessionNames.userLoginTry] == null)
        {
            Session[SessionNames.userLoginTry] = true;
        }
        else
        {
            Session[SessionNames.userLoggedOut] = false;
            Response.Redirect("~/Pages/Login.aspx", true);
        }
    } 
```

所以在所有页面中我都在检查这个会话，如果它是假的，他将登录。

有人可以告诉我为什么在取消期间显示空白页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:50:57.740

当您单击重新登录按钮时，您将发送 401 状态代码并突然结束响应 ( `Response.End`) - 401 状态可能会导致浏览器再次要求提供凭据提示（尽管相关的 Windows 票证可能完全有效）。

取消提示意味着浏览器可能会停在那里，这意味着显示上一个请求的响应是空白的（因为你`Response.End`没有写任何响应文本就使用了）。

刷新可能会导致回发重播 - 根据您的`page_load`代码，它会落入最后一个 else 条件，设置您的标志并重定向到 login.aspx。因为，原始的 Windows 身份验证票仍然有效，浏览器可能已将其用于后续请求。

您可以使用 firebug/fiddler 等工具轻松验证这一点，看看发生了什么。

恐怕除了针对不同的行为之外，您的问题可能没有解决方案。例如，单击重新登录时，您可以直接将用户带到 login.aspx，而不是发送 401。

# android - 从 android gcm 只收到最后的通知...？

> ID：14134744
> 
> 赞同：3
> 
> 时间：2013-01-03T07:30:45.973
> 
> 标签：android, notifications, push-notification, google-cloud-messaging

我成功地在 asp.net 中成功设置了 android gcm 和相关的服务器端工作。但我的问题是，它只显示服务器发送的最后一条通知。

我希望显示的所有通知都来自相同的**collapse_key** 或我在 gcm 代码或服务器端代码中更改的内容，以显示发送到特定设备的所有消息。

我的服务器端代码如下

```
public void SendCommandToPhone(String sCommand)
{
    String DeviceID = "";
    DeviceID = "APA91bF9SSDEp-UPU8UwvctGt5ogfrSw0UdilTWlCujqItHcr-eiPJ31ZDI-IeqTbLr92ZOPF31bXtB1_5gNEPHAq82N4ji0stm4cy9U0Yuk0Awhjl9PS02okuc9rRhJobkgOt-ofm5Br0KR-Y";
    WebRequest tRequest;
    tRequest = WebRequest.Create("https://android.googleapis.com/gcm/send");
    tRequest.Method = "post";
    //tRequest.ContentType = "application/json";
    tRequest.ContentType = "application/x-www-form-urlencoded";
    tRequest.Headers.Add(string.Format("Authorization: key={0}", "AIzaSyBgCKDhyHnRmmu8jCfmupHVJA8cVkIa-XEZS"));
    String collaspeKey = Guid.NewGuid().ToString("n");
    String postData = string.Format("registration_id={0}&data.message={1}&collapse_key={2}", DeviceID, "YourMessage", collaspeKey);
    Byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    tRequest.ContentLength = byteArray.Length;
    Stream dataStream = tRequest.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);
    dataStream.Close();
    WebResponse tResponse = tRequest.GetResponse();
    dataStream = tResponse.GetResponseStream();
    StreamReader tReader = new StreamReader(dataStream);
    String sResponseFromServer = tReader.ReadToEnd();
    tReader.Close();
    dataStream.Close();
    tResponse.Close();
} 
```

在 android 应用程序端代码如下 onMessage(Context arg0, Intent arg1)

```
NotificationManager notificationManager = (NotificationManager) arg0
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification note = new Notification(R.drawable.ic_launcher,
            "meaNexus Notification", System.currentTimeMillis());

    Intent notificationIntent = new Intent(arg0, Main.class);
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent pendingIntent = PendingIntent.getActivity(arg0, 0,
            notificationIntent, 0);
    note.setLatestEventInfo(arg0, String.valueOf(R.string.app_name), message, pendingIntent);
    note.number = count++;
    note.defaults |= Notification.DEFAULT_SOUND;
    note.defaults |= Notification.DEFAULT_VIBRATE;
    note.defaults |= Notification.DEFAULT_LIGHTS;
    note.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, note); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T07:41:50.923

来自官方[文档](https://developers.google.com/android/c2dm/?hl=sv-SE#push)

**折叠键**

> 一个任意字符串，用于在设备离线时折叠一组类似消息，以便仅将最后一条消息发送到客户端。这是为了避免在手机重新联机时向手机发送太多消息。请注意，由于无法保证消息发送的顺序，因此“最后一个”消息实际上可能不是应用程序服务器发送的最后一条消息。

因此，如果您希望设备接收所有消息，您可以为每条消息使用不同的折叠键。

EDIT1：**通知问题**

以下是您的通知代码：

```
notificationManager.notify(0, note); 
```

根据[notifiy()](http://developer.android.com/reference/android/app/NotificationManager.html#notify%28int,%20android.app.Notification%29)方法的java doc。它发布要在状态栏中显示的通知。**如果您的应用程序已经发布了具有相同 id 的通知并且尚未取消，它将被更新的信息替换。**

所以在`notificationManager.notify()`方法调用中使用不同的ID在bar中发布`notification`多个`notification`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:16:13.633

当我尝试在我的应用程序中实现 GCM 时，我遇到了同样的问题。

> 我将 C# 用于我的第三方应用程序。起初，我对每个通知都使用了相同的 collapse_key。这就是为什么我只收到最后一个。

**因此，当您调用通过 GCM 服务器向您的设备发送通知的函数时，请尝试使用不同的 collapse_key。例如尝试使用当前时间。**

# jenkins - 詹金斯和报告，不存在？

> ID：14134753
> 
> 赞同：0
> 
> 时间：2013-01-03T07:31:45.040
> 
> 标签：jenkins, reporting

我使用 Jenkins 已经有一段时间了，并且来自使用 Team Foundation Server 的 .NET 世界，我最想念的一件事是通过通知进行报告。我知道 Jenkins 只是 TFS 功能的一个子集，所以比较是不公平的。

但是，如果在利用这些类型的 CI 和 QA 工具时有一件事很重要，那么它就是通知团队有关进度和质量的信息。Jenkins 可以在仪表板上显示一些图表，但我仍然没有找到一种方法来发送包含单元测试图、构建稳定性图、管道图等的团队电子邮件。它们根本不存在，或者我只是没有找到它们? 当然，Jenkins 可以通过电子邮件发送失败的测试等内容，但这太低级了。团队需要查看有关进度的历史图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:04:23.040

**[Email Ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)**的格式和内容可以根据需要进行设置——
只需将其设置为链接到您喜欢的任何页面
（可以将链接添加到邮件的现有内容，或将其全部替换）。

除此之外，我不记得对任何统计图表的支持，抱歉。

# android - 列表视图中的可绘制导致内存分配过多？

> ID：14134756
> 
> 赞同：0
> 
> 时间：2013-01-03T07:31:49.193
> 
> 标签：android, memory-management, imageview, drawable, image-loading

我有一个有四个页面的视图寻呼机，每个页面都有一个 listView。到目前为止一切都很好，但是当我滚动列表时，它会踢数千次 GC_EXTERNAL_ALLOC 并且它会降低我的应用程序的性能。[因此，我按照Romain Guy 的文档](http://www.curious-creature.org/2009/02/07/track-memory-allocations-on-android/)跟踪了 DDMS 的分配情况，发现这是因为将图像加载到列表项中。

我保存图像，然后检查是否有以前保存的图像，如果有，我使用：

```
 img.setImageDrawable(Drawable.createFromPath(imagePath)); 
```

当我得到分配轨道时，它告诉我这条线在滚动时分配了很多内存......我只是想知道为什么？如果有任何有效的方式来加载图像来建议我？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:40:04.873

你能找到的最好的文档在这里：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

但说实话，这很复杂。在[RoboSpice](https://github.com/octo-online/robospice)的下一个版本中，我们希望提供一种封装所有这些复杂性的方法（ui-spicelist 模块）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:39:53.533

我假设您需要在列表视图中显示一些“N”数量的图像，并且这些图像来自互联网。

参考：[Fedors 延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

# java - 通过类名从类路径中的jar中提取类文件

> ID：14134757
> 
> 赞同：0
> 
> 时间：2013-01-03T07:31:50.300
> 
> 标签：java, class, jar

我想从 jar 中提取一个类文件（如果它在 jar 中）并将其保存在目标文件夹中。

这就是我现在所拥有的：

```
Class Myclass = Thread.currentThread().getContextClassLoader().loadClass(className);
String pathJar = classs.getProtectionDomain().getCodeSource().getLocation().getPath(); 
```

pathJar 保存带有类的 jar 的路径。

现在，我怎样才能从那里提取类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:41:05.407

检查您是否可以利用[ASM](http://asm.ow2.org/)来满足您的要求。还有其他几个选项，例如[BCEL](http://commons.apache.org/bcel/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:38:35.080

下面的实时代码通过[ivy](http://ant.apache.org)依赖项报告 XML 文件进行解析，并从其中的 jar 中提取所有文件，希望对您有所帮助：

```
 private void extract(String path2, String outPath) {
                JarFile zf = null;
                try {
                        zf = new JarFile(path2);
                } catch (IOException e4) {
                        // according to http://stackoverflow.com/a/470492/783412, set the
                        // logger to log these events
                        System.setProperty("java.util.logging.ConsoleHandler.level",
                                        "FINER");
                        logger.throwing(
                                        Thread.currentThread().getStackTrace()[1].getClassName(),
                                        Thread.currentThread().getStackTrace()[1].getMethodName(),
                                        e4);

                        // according to
                        // http://stackoverflow.com/questions/4970513/java-logging-levels-confusion,
                        // the default logging level is INFO
                        System.setProperty("java.util.logging.ConsoleHandler.level", "INFO");
                } 
                if (zf == null) {
                        System.err.println(path2 + " is an invalid jar, skipping");
                        return;
                }
                Enumeration<JarEntry> ze = (Enumeration<JarEntry>) zf.entries();
                while (ze.hasMoreElements()) {
                        JarEntry thisEntry = ze.nextElement();
                        System.err.println(thisEntry.getName());
                        if (thisEntry.isDirectory()) {
                                new File(outPath + File.separator + thisEntry.getName())
                                                .mkdirs();
                        } else {
                                String filename = thisEntry.getName();
                                if (filename.endsWith("RSA") || filename.endsWith("DSA") || filename.endsWith("SF")) continue;
                                FileOutputStream fos = null;
                                try {
                                        fos = new FileOutputStream(outPath + File.separator
                                                        + filename);
                                } catch (FileNotFoundException e3) {
                                        // according to http://stackoverflow.com/a/470492/783412,
                                        // set the logger to log these events
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "FINER");
                                        logger.throwing(Thread.currentThread().getStackTrace()[1]
                                                        .getClassName(), Thread.currentThread()
                                                        .getStackTrace()[1].getMethodName(), e3);

                                        // according to
                                        // http://stackoverflow.com/questions/4970513/java-logging-levels-confusion,
                                        // the default logging level is INFO
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "INFO");
                                }
                                BufferedInputStream zis = null;
                                try {
                                        zis = new BufferedInputStream(zf.getInputStream(thisEntry));
                                } catch (IOException e2) {
                                        // according to http://stackoverflow.com/a/470492/783412,
                                        // set the logger to log these events
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "FINER");
                                        logger.throwing(Thread.currentThread().getStackTrace()[1]
                                                        .getClassName(), Thread.currentThread()
                                                        .getStackTrace()[1].getMethodName(), e2);

                                        // according to
                                        // http://stackoverflow.com/questions/4970513/java-logging-levels-confusion,
                                        // the default logging level is INFO
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "INFO");
                                }
                                try {
                                        fos = new FileOutputStream(outPath + File.separator
                                                        + thisEntry.getName());
                                } catch (FileNotFoundException e1) {
                                        // according to http://stackoverflow.com/a/470492/783412,
                                        // set the logger to log these events
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "FINER");
                                        logger.throwing(Thread.currentThread().getStackTrace()[1]
                                                        .getClassName(), Thread.currentThread()
                                                        .getStackTrace()[1].getMethodName(), e1);

                                        // according to
                                        // http://stackoverflow.com/questions/4970513/java-logging-levels-confusion,
                                        // the default logging level is INFO
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "INFO");
                                }
                                byte[] b = new byte[new Long(thisEntry.getSize()).intValue()];
                                try {
                                        zis.read(b);
                                } catch (IOException e1) {
                                        // according to http://stackoverflow.com/a/470492/783412, set the logger to log these events
                                        System.setProperty("java.util.logging.ConsoleHandler.level","FINER");
                                        logger.throwing(Thread.currentThread().getStackTrace()[1].getClassName(), Thread.currentThread().getStackTrace()[1].getMethodName(), e1);

                                        // according to http://stackoverflow.com/questions/4970513/java-logging-levels-confusion, the default logging level is INFO
                                        System.setProperty("java.util.logging.ConsoleHandler.level", "INFO");           
                                }
                                try {
                                                        .getClassName(), Thread.currentThread()
                                                        .getStackTrace()[1].getMethodName(), e1);

                                        // according to
                                        // http://stackoverflow.com/questions/4970513/java-logging-levels-confusion,
                                        // the default logging level is INFO
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "INFO");
                                }
                                byte[] b = new byte[new Long(thisEntry.getSize()).intValue()];
                                try {
                                        zis.read(b);
                                } catch (IOException e1) {
                                        // according to http://stackoverflow.com/a/470492/783412, set the logger to log these events
                                        System.setProperty("java.util.logging.ConsoleHandler.level","FINER");
                                        logger.throwing(Thread.currentThread().getStackTrace()[1].getClassName(), Thread.currentThread().getStackTrace()[1].getMethodName(), e1);

                                        // according to http://stackoverflow.com/questions/4970513/java-logging-levels-confusion, the default logging level is INFO
                                        System.setProperty("java.util.logging.ConsoleHandler.level", "INFO");           
                                }
                                try {
                                        fos.write(b);
                                } catch (IOException e1) {
                                        // according to http://stackoverflow.com/a/470492/783412, set the logger to log these events
                                        System.setProperty("java.util.logging.ConsoleHandler.level","FINER");
                                        logger.throwing(Thread.currentThread().getStackTrace()[1].getClassName(), Thread.currentThread().getStackTrace()[1].getMethodName(), e1);
                                        // according to http://stackoverflow.com/questions/4970513/java-logging-levels-confusion, the default logging level is INFO
                                        System.setProperty("java.util.logging.ConsoleHandler.level", "INFO");           
                                } 
                                try {
                                        fos.close();
                                } catch (IOException e) {
                                        // according to http://stackoverflow.com/a/470492/783412,
                                        // set the logger to log these events
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "FINER");
                                        logger.throwing(Thread.currentThread().getStackTrace()[1]
                                                        .getClassName(), Thread.currentThread()
                                                        .getStackTrace()[1].getMethodName(), e);

                                        // according to
                                        // http://stackoverflow.com/questions/4970513/java-logging-levels-confusion,
                                        // the default logging level is INFO
                                        System.setProperty(
                                                        "java.util.logging.ConsoleHandler.level", "INFO");
                                }
                        }
                }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-29T08:19:31.103

当您的类路径上可用时，您应该能够直接从内存中提取您的类及其所有内部类。内部类将用 $ 分隔，至少在 Oracle 1.8 JVM 上。

```
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class ExtractClass {
    public static void main(String... args) throws ClassNotFoundException, IOException {
        final String name = args[0];

        extractClass(name, Paths.get(name));
    }

    private static void extractClass(final String name, final Path path) throws IOException, ClassNotFoundException {
        final Class<?> clazz = Class.forName(name);

        try (InputStream inputStream = Object.class.getResourceAsStream("/" + name.replace(".", "/") + ".class")) {
            Files.copy(inputStream, Paths.get(name));
        }

        // Retrieve all inner classes
        for (final Class<?> innerClass : clazz.getDeclaredClasses()) {
            extractClass(innerClass.getName(), Paths.get(innerClass.getName()));
        }
    }
} 
```

# symfony - 被覆盖的 SonataUserBundle 无法正常工作

> ID：14134763
> 
> 赞同：0
> 
> 时间：2013-01-03T07:32:12.577
> 
> 标签：symfony, doctrine, symfony-sonata

我已经安装了 SontaUserBundle 我按照你创建的文档

现在我想在用户类中添加 oneToMany 关系

```
/**
 * Application\Sonata\UserBundle\Entity\User;
 * @ORM\Table(name="fos_user")
 * @ORM\Entity
 */
class User extends BaseUser{

    /**
     * @var integer $id
     */

    protected $id;

    /**
     * @ORM\OneToMany(targetEntity="\Bansri\AssetBundle\Entity\statusQues", mappedBy="user")
     */
    protected $statusQues;

} 
```

但是当我跑步时

应用程序/控制台原则：生成：实体 ApplicationSonataUserBundle：用户

它不会生成 get 和 add 函数，当我手动创建 get 和 add 函数时，它返回 null

我的代码有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:00:24.743

我想

```
app/console  doctrine:generate:entities ApplicationSonataUserBundle:User 
```

不是正确的cli命令。

此外，您在哪里添加这种关系？查看您的代码，似乎您将其直接写入 Sonata Bundle，这是不正确的。
有一个更好的（和“面向良好实践的”）方法可以做到这一点，包括创建一个新的用户类并扩展 BaseUser （就像你现在正在做的那样），但直接进入你的包。

然后，您必须运行

```
app/console  doctrine:generate:entities YourBundleName 
```

# php - 给定平均值时，如何对加权五星分布进行逆向工程？

> ID：14134764
> 
> 赞同：3
> 
> 时间：2013-01-03T07:32:12.547
> 
> 标签：php, math, rating

我将在 PHP 中说明这一点，但问题或多或少与语言无关。

我有一个使用五星级评级系统投票选出的产品的平均评级。比方说这个产品`$averageRating = 3.43`。我想创建一个可以创建这个平均值的模拟投票分布。鉴于您已经有了投票分布，以下是如何确定平均值的方法：

```
 $distribution = array(
                1 => $oneStarVotes,
                2 => $twoStarVotes,
                3 => $threeStarVotes,
                4 => $fourStarVotes,
                5 => $fiveStarVotes
            );

            foreach ($distribution as $key => $value) {
                $weightedTotal += $key * $value;
            }

            $totalVotes = array_sum($distribution);

            $averageRating = $weightedTotal / $totalVotes; 
```

任何人都可以想出一种对其进行逆向工程的方法，以便您可以为`$oneStarVotes, $twoStarVotes...etc.`给定的变量创建值`$averageRating`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:27:03.200

由于您正在寻找任何分布，这是一个简单的代数问题，并考虑找到合理的整数。

我将按如下方式处理问题（在伪代码中）：

```
Case 1: avg = 1.0
    distribution <- { x1, 0, 0, 0, 0 } for any positive integer x1.

Case 2: avg = 5.0
    distribution <- { 0, 0, 0, 0, x5 } for any positive integer x5.

Case 3: avg is within (1.0, 5.0)
    distribution = { x1, 0, 0, 0, x5 } for some positive integers x1 and x5. 
```

换句话说，将问题简化为只为 1 星和 5 星选票选择票数。

要解决情况 3 ，您需要选择`x1`并且满足仅 1 星和 5 星投票中算术平均值的方程：`x5``x1``x5`

```
(1 * x1 + 5 * x5) / (x1 + x5) = avg 
```

它有助于解决`x1`和`T`，其中`T`是总票数 ( `x1 + x5 = T`)。

通过代数，上面可以写成

```
x1 = T * (5 - avg) / 4 
```

您可以任意选择一个值`x1`并求解`T`，但这并不能保证它`T`是一个整数。

但是，通过选择一个足够大的 值`x1`，您可以*舍* `T`入比较小的误差更`x1`小。

例如，如果`avg = 3.43`（如您的问题中给出的那样），并且我们任意选择`x1 = 100`，那么我们得到

```
avg      = 3.43
x1       = 100
T        = 254.78
TRounded = 255
x5       = 155 
```

当您将这些值插入算术平均值时，您会得到

```
(1 * 100 + 5 * 155)/255 = 3.431 
```

在这种情况下，它等于原始`avg`值，最多保留 2 个小数位。案例 3 的最终公式是

```
Case 3 (cont.):
    x1 <- (a large enough integer)
    T  <- round (x1 * 4 / (5 - avg))
    x5 <- T - x1
    distribution <- { x1, 0, 0, 0, x5 } 
```

# python - 获取在 Twitter 上关注某个人的所有用户

> ID：14134768
> 
> 赞同：1
> 
> 时间：2013-01-03T07:32:35.457
> 
> 标签：python, twitter, social-networking, twython

我对 python 和 Twython（我们可以使用它从 twitter 检索推文的库）的概念不熟悉。

现在我正在使用检索推文

```
from twython import Twython
twitter=Twython()
user_timeline=twitter.getUserTimeline(screen_name="bjkbh") 
```

我收到了想要的推文，但现在我想知道有多少人在关​​注特定用户。

在推文中，我们可以了解关注的人数

```
for tweets in user_timeline:

tweets['followers_count'] 
```

但是我如何获得所有关注的人的名字和他们施加的影响？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:08:21.143

您可以使用两种不同的方法；一种只返回追随者 ID ( `getFollowersIDs`)，另一种返回追随者集的状态/等 ( `getFollowersStatus`)。

一些示例代码如下所示：

```
from twython import Twython

twitter = Twython()
followers = twitter.getFollowersIDs(screen_name = "ryanmcgrath")

for follower_id in followers:
   print "User with ID %d is following ryanmcgrath" % follower_id 
```

如果您有 ID，则需要自己进行进一步查找，因此后一种方法 ( `getFollowersStatus`) 可能是您想要的。请记住，Twython 函数只是从官方 Twitter API 文档中镜像 API 关键参数，因此您可以传递给参数的方法与您在文档中找到的方法相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:09:47.933

尝试这个：

```
from twython import Twython

twitter = Twython()
followers = twitter.getFollowersIDs(screen_name = "ryanmcgrath")
followers = followers['ids']
print "The user rayanmcgrath has %s followers" % str(len(followers))
for follower_id in followers:
   print "User with ID %d is following ryanmcgrath" % follower_id 
```

# iphone - 如何将 xcode 文本字段值发布到 json

> ID：14134771
> 
> 赞同：-2
> 
> 时间：2013-01-03T07:32:51.623
> 
> 标签：iphone, json

我正在创建一个 php 文件并上传到 mywebsite。现在如何将值从 xcode 文本字段插入到 json。请任何知道的人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:36:39.547

你可以这样做：

```
NSDictionary *jsonDict1=[NSDictionary dictionaryWithObjectsAndKeys:textfield.text,@"filename",nil];
NSString *jsonString1=[jsonDict1 JSONRepresentation];
NSString *post1 = [NSString stringWithFormat:@"json=%@",jsonString1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:38:22.540

```
const char *bytes = "mydata=Hello%20World";

NSString * str = [NSString stringWithFormat:@"<?xml version=\"1.0\"?>\n<mydata>%@</mydata>", data];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:[str dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# asp.net - 以下方法之间的调用不明确

> ID：14134774
> 
> 赞同：2
> 
> 时间：2013-01-03T07:33:07.127
> 
> 标签：asp.net, signalr

***我使用SignalR 1.0.0 alpha 2***创建了一个基本的聊天应用程序。现在，当我进行简单的修改并尝试运行代码时，我收到以下错误：

> 内部服务器错误 500

即使在错误没有发生的情况下将修改后的代码撤消为旧代码后，我还是卸载了 Signalr，认为它可能已损坏。

当我再次安装 SignalR ( ***SignalR 1.0.0 rc1*** ) 时，我在*RegisterHubs.cs*中收到以下错误：

> 错误 1 `The call is ambiguous between the following methods or properties: 'Microsoft.AspNet.SignalR.RouteExtensions.MapHubs(System.Web.Routing.RouteCollection)' and 'Microsoft.AspNet.SignalR.RouteExtensions.MapHubs(System.Web.Routing.RouteCollection)' C:\Users\noName\Desktop\Main project\Chat_Application\App_Start\RegisterHubs.cs 15 13 Chat_Application`

我提到了这个**[链接](https://stackoverflow.com/a/12654929/1577396)**，它说只要有重复的方法就会发生这个错误。我理解这个问题，但我不知道如何解决这个问题..

*我在我的aspx*页面中添加了以下与 SignalR 的新版本相关的脚本（删除了旧版本的链接）

```
<script src="Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR-1.0.0-rc1.min.js" type="text/javascript"></script>
<script type="text/javascript" src='<%: ResolveClientUrl("~/signalr/hubs") %>'></script>
//even tried
//<script src="/signalr/hubs" type="text/javascript"></script>
//My javascript and CSS files here 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:47:15.877

请执行下列操作：

1.  关闭视觉工作室（甚至更好：重新启动计算机，只是为了安全起见）
2.  打开 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET 文件
3.  从此目录中删除文件（这些是临时文件，不用担心）
4.  启动视觉工作室并重建所有

我希望它对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:26:19.080

您可能已经从项目/系统中的两个版本中获得了程序集。首先，检查所有项目中的程序集引用 - 所有相关引用都应指向一致的 SignalR 版本。如果可能，请摆脱以前的版本 - 从 GAC 中删除和/或从解决方案中删除 NuGet 包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:11:03.087

我遇到了同样的问题，所以我在这里发布我的解决方案，希望它可以帮助其他人：

如果您安装了[Fall Update](http://www.asp.net/vnext/overview/fall-2012-update/aspnet-fall-2012-update-release-notes)并使用*Add New Item > SignalR Hub Class*，它还包括以下两个包和相关参考：

> Microsoft.AspNet.SignalR.Hosting.AspNet.1.0.0-alpha1 Microsoft.AspNet.SignalR.Hosting.Common.1.0.0-alpha1

包含这些参考资料将导致同样的问题。删除它们为我解决了这个问题。

您还应该[从此处删除秋季更新并安装最新](http://www.asp.net/vnext)的更新。

# javascript - onClick 函数会导致 Chrome 上的刷新

> ID：14134776
> 
> 赞同：2
> 
> 时间：2013-01-03T07:33:20.400
> 
> 标签：javascript, html, google-chrome

我在 Chrome 上遇到了一个非常奇怪的行为。当我单击添加按钮时，以下代码会导致页面在 Chrome 上刷新，这不是我想要的：

```
function addSpamAddr() 
{
    var email = prompt("Add Spam Address","");
    if (email == null || email == "")
        return false;

    var regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    if (regex.test(email) == false) {
        alert("You must enter a valid E-Mail address");
        return false;
    }

    var listBox = document.getElementById('spamList');
    for (var x = 0; x < listBox.options.length; x++) {
        if (listBox.options[x].value == email || listBox.options[x].text == email) {
            alert("Already blocked address");
            return false;
        }
    }

    var selectBoxOption = document.createElement("option");
    selectBoxOption.value = email;
    selectBoxOption.text = email;
    listBox.add(selectBoxOption);

    return false;
}

...
<button style="margin-right: 20px;width:60px" onclick="addSpamAddr()">Add</button> 
```

该代码在 Internet Explorer 上运行良好。我创建了一个最小示例来进一步调查该问题：

```
function addSpamAddr()
{
   return false;
}
...
<button style="margin-right: 20px;width:60px" onclick="addSpamAddr()">Add</button> 
```

仍然会导致 Chrome 上的刷新。

如何防止刷新？

编辑：在 onclick 事件中添加 return 语句后，页面不再刷新我创建的最小示例。

```
<button style="margin-right: 20px;width:60px" onclick="return addSpamAddr()">Add</button> 
```

但是，如果我应用我的原始代码，页面仍然会刷新。特别是，这部分导致它：

```
 var listBox = document.getElementById('spamList');
    var exists = false;
    for (var x = 0; x < listBox.options.length; x++) {
        if (listBox.options[x].value == email || listBox.options[x].text == email) {
            alert("Already blocked address");
            return false;
        }
    } 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T07:36:28.560

像这样写

```
function addSpamAddr()
{
   return false;
}
...
<button style="margin-right: 20px;width:60px" onclick="return addSpamAddr()">Add</button> 
```

你必须写`"return addSpamAddr()"`在我更新的 html 代码中

# c++ - E_INVALIDARG CreatePixelShader() 错误

> ID：14134781
> 
> 赞同：2
> 
> 时间：2013-01-03T07:33:32.817
> 
> 标签：c++, windows-8, directx

我有以下代码：

```
struct shaderData
{
    char *shaderCode;
    UINT size;
};

struct shaderData *CubeApp::GetShaderByteCode(char *compiledShader)
{
    struct shaderData *sData = (struct shaderData *)malloc(sizeof(struct shaderData));

    std::ifstream fin(compiledShader, std::ios::binary);

    fin.seekg(0, std::ios_base::end);
    UINT size = (int)fin.tellg();
    fin.seekg(0, std::ios_base::beg);

    sData->shaderCode = (char *)malloc(size);

    fin.read(sData->shaderCode, size);
    fin.close();

    sData->size = size;

    return sData;
}

void CubeApp::InitShaders()
{
    struct shaderData *sData = GetShaderByteCode("PShader.cso");

    HRESULT hr = m_d3dDevice->CreatePixelShader(sData->shaderCode, sData->size, NULL, &m_d3dPShader);
} 
```

但是这在调用 CreatePixelShader() 时会返回 E_INVALIDARG，而 m_d3dPShader 是一个 NULL 指针。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-21T09:00:00.393

这正是我的问题。我的硬件显示并报告了对 DirectX 11_0 的支持，但是使用 vs_5_0 或 ps_5_0 的配置文件编译我的顶点或像素着色器导致 CreateVertexShader() | CreatePixelShader() 返回 E_INVALIDARG。

一旦我用 vs_4_0, ps_4_0 的配置文件重新编译了着色器，调用就会返回 S_OK。

# python - PyQt：两个显示对话框合二为一？

> ID：14134783
> 
> 赞同：0
> 
> 时间：2013-01-03T07:33:38.743
> 
> 标签：python, dialog, pyqt

**这是代码：**

```
def dial(self, dialog):
        items = self.tableWidget.findItems(dialog.lineEdit2.text(), QtCore.Qt.MatchExactly)
        if items:
            for item in items:
                if item.column() == 1:
                    self.row = item.row()

                    #----------

                    #Όνομα Πατρός:
                    try:
                        self.itema = self.tableWidget.item(self.row, 2).text()
                    except AttributeError:
                        self.itema = ' ---'                    
                    #Όνομα Μητρός:
                    try:
                        self.itemb = self.tableWidget.item(self.row, 3).text()
                    except AttributeError:
                        self.itemb = ' ---'
                    #Ημερομηνία Γέννησης:
                    try:    
                        self.itemc = self.tableWidget.item(self.row, 4).text()
                    except AttributeError:
                        self.itemc = ' ---'
                    #Ημερομηνία Δικασίμου:
                    try:
                        self.itemd = self.tableWidget.item(self.row, 12).text()
                    except AttributeError:
                        self.itemd = ' ---'
                    #Ημερομηνία Απόφασης:
                    try:
                        self.iteme = self.tableWidget.item(self.row, 23).text()
                    except AttributeError:
                        self.iteme = ' ---'

                    #----------

                    self.results = (u'Ονοματεπώνυμο:  %s\nΌνομα Πατρός:  %s \nΌνομα Μητρός:  %s \nΗμερομηνία Γέννησης:  %s \nΗμερομηνία Δικασίμου:  %s \nΑριθμός Απόφασης:  %s ' % (item.text(), self.itema, self.itemb, self.itemc, self.itemd, self.iteme))
                    self.c = ChildFoundDlg(self)
                    self.c.show()
                    self.c.label2.setText(self.results)
                    self.c.pushButton.pressed.connect(lambda d=d: self.settext(d))
                    self.c.pushButton2.pressed.connect(lambda d=d: self.settext2(d)) 
```

**ChildFoundDlg：**

```
class ChildFoundDlg(QDialog):
    #__init__ function:
    def __init__(self, parent=None):
       QtGui.QDialog.__init__(self, parent)
       self.resize(500, 270)

       self.font = QtGui.QFont("Sans Serif", 10, QFont.Normal)

       self.label = QtGui.QLabel(self)
       self.label.setText(QtGui.QApplication.translate("Form", "Μήπως εννοείτε την/τον:", None, QtGui.QApplication.UnicodeUTF8))
       self.label.setFont(self.font)
       self.label.move(30,34) 

       self.label2 = QtGui.QLabel(self)
       self.label2.setGeometry(QtCore.QRect(250, 34, 211, 100))
       self.label2.setFont(self.font)

       self.pushButton = QtGui.QPushButton(self)
       self.pushButton.setGeometry(QtCore.QRect(30, 150, 180, 35))
       self.pushButton.setText(QtGui.QApplication.translate("Form", "Υπότροπος", None, QtGui.QApplication.UnicodeUTF8))

       self.pushButton2 = QtGui.QPushButton(self)
       self.pushButton2.setGeometry(QtCore.QRect(290, 150, 180, 35))
       self.pushButton2.setText(QtGui.QApplication.translate("Form", "Αναβολή", None, QtGui.QApplication.UnicodeUTF8))

       self.pushButton3 = QtGui.QPushButton(self)
       self.pushButton3.setGeometry(QtCore.QRect(150, 200, 200, 40))
       self.pushButton3.setText(QtGui.QApplication.translate("Form", "Ακύρωση", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton3.clicked.connect(self.reject) 
```

**在第一段代码中，如果找到 2 个或更多结果，它将显示两个或更多对话框...如何将这两个对话框合二为一（如果需要，使用 schrollbar）？**

**更新：**

我认为这会起作用：

```
def dial(self, dialog):
        items = self.tableWidget.findItems(dialog.lineEdit2.text(), QtCore.Qt.MatchExactly)
        self.c = ChildFoundDlg(self)
        self.c.show()
        a_ = 0
        b_ = 0
        c_ = 0 
        if items:
            for item in items:
                if item.column() == 1:
                    self.row = item.row()

                    #----------

                    #Όνομα Πατρός:
                    try:
                        self.itema = self.tableWidget.item(self.row, 2).text()
                    except AttributeError:
                        self.itema = ' ---'                    
                    #Όνομα Μητρός:
                    try:
                        self.itemb = self.tableWidget.item(self.row, 3).text()
                    except AttributeError:
                        self.itemb = ' ---'
                    #Ημερομηνία Γέννησης:
                    try:    
                        self.itemc = self.tableWidget.item(self.row, 4).text()
                    except AttributeError:
                        self.itemc = ' ---'
                    #Ημερομηνία Δικασίμου:
                    try:
                        self.itemd = self.tableWidget.item(self.row, 12).text()
                    except AttributeError:
                        self.itemd = ' ---'
                    #Ημερομηνία Απόφασης:
                    try:
                        self.iteme = self.tableWidget.item(self.row, 23).text()
                    except AttributeError:
                        self.iteme = ' ---'

                    #----------
                    a_ += 34
                    b_ += 150
                    c_ += 200
                    self.c.buttons(a_, b_, c_)
                    self.results = (u'Ονοματεπώνυμο:  %s\nΌνομα Πατρός:  %s \nΌνομα Μητρός:  %s \nΗμερομηνία Γέννησης:  %s \nΗμερομηνία Δικασίμου:  %s \nΑριθμός Απόφασης:  %s ' % (item.text(), self.itema, self.itemb, self.itemc, self.itemd, self.iteme))
                    self.c.label2.setText(self.results)
                    self.c.pushButton.pressed.connect(lambda d=d: self.settext(d))
                    self.c.pushButton2.pressed.connect(lambda d=d: self.settext2(d)) 
```

**ChildFoundDlg**：

```
class ChildFoundDlg(QDialog):

    #__init__ function:
    def __init__(self, parent=None):
       QtGui.QDialog.__init__(self, parent)
       self.resize(500, 270)
       self.setMaximumSize(500, 540)

    def buttons(self, a, b, c):    #a = 34, b = 150 c = 200
       self.font = QtGui.QFont("Sans Serif", 10, QFont.Normal)

       self.label = QtGui.QLabel(self)
       self.label.setText(QtGui.QApplication.translate("Form", "Μήπως εννοείτε την/τον:", None, QtGui.QApplication.UnicodeUTF8))
       self.label.setFont(self.font)
       self.label.move(30, a) 

       self.label2 = QtGui.QLabel(self)
       self.label2.setGeometry(QtCore.QRect(250, a, 211, 100))
       self.label2.setFont(self.font)

       self.pushButton = QtGui.QPushButton(self)
       self.pushButton.setGeometry(QtCore.QRect(30, b, 180, 35))
       self.pushButton.setText(QtGui.QApplication.translate("Form", "Υπότροπος", None, QtGui.QApplication.UnicodeUTF8))

       self.pushButton2 = QtGui.QPushButton(self)
       self.pushButton2.setGeometry(QtCore.QRect(290, b, 180, 35))
       self.pushButton2.setText(QtGui.QApplication.translate("Form", "Αναβολή", None, QtGui.QApplication.UnicodeUTF8))

       self.pushButton3 = QtGui.QPushButton(self)
       self.pushButton3.setGeometry(QtCore.QRect(150, c, 200, 40))
       self.pushButton3.setText(QtGui.QApplication.translate("Form", "Ακύρωση", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton3.clicked.connect(self.reject) 
```

**但它没有......为什么不呢？**

# c++ - 内存布局继承

> ID：14134784
> 
> 赞同：3
> 
> 时间：2013-01-03T07:33:42.460
> 
> 标签：c++, visual-c++, gcc, compatibility, abi

考虑以下两个结构：

```
struct A
{
    // A bunch of standard layout data
};

struct B:public A
{
    // Other data
}; 
```

和一个对象

```
B foo; 
```

假设 sizeof(A) 在编译器之间没有差异，打包是相同的，并且 B 不添加任何虚拟方法，当使用 gcc 或 msvc 编译 Windows x86 或x86-64平台？

编辑：我认为实现继承的最佳方法是将 A 放在 B 之前。否则，向上转换将需要将 this 指针偏移 sizeof(B) ，这很愚蠢。至少 GCC 将 B 的内容放在 A 的内容之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:48:11.260

x86_64架构是个问题，GCC和MSVC选择了不同的内存模型。GCC 是 LP64，MSVC 是 LLP64。换句话说，*long*类型在 GCC 中是 64 位，在 MSVC 中是 32 位。

问题中的“相同地址”非常模棱两可，但如果 A 和 B 不是由同一个编译器编译，显然你会遇到问题。在这种情况下，不同的包装也可能是一个问题。从同样的歧义进行插值，如果 B 包含任何虚拟成员而 A 不包含，则 A 和 B 的布局不兼容。B 将插入 v-table 指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:31:33.003

汉斯正确地解释了一切。一般的答案是否定的。对于任何类/编译器等，这不会开箱即用。

尽管如此。C++ 具有类`#pragma pack`中的对齐记录等功能。所有这些东西都是用于生成所需或预定义的内存布局。如果你会小心使用它们（也许也有一些`#ifdefs`），你会得到你想要的兼容性。这被用于大量项目并且有效。

但是您仍然必须仔细检查您使用的每个编译器的布局。

# jetty - Jetty 不提供内容类型正确的静态 SVGZ 文件

> ID：14134789
> 
> 赞同：2
> 
> 时间：2013-01-03T07:34:24.820
> 
> 标签：jetty

我添加了扩展 svgz 来提供压缩的 svg 文件，但码头发出错误的内容编码。我相信它应该是一个 gzip 编码。

有谁知道如何配置 Jetty 来提供静态 SVGZ 文件？这非常重要，因为这些文件在压缩之前通常非常大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:11:42.600

扩展名为 SVGZ 的文件只是使用 GZip 压缩压缩的 SVG 文件。重命名文件扩展名，如果文件被`logo.svgz`重命名为`logo.svg.gz`但保持压缩。

当从 Web 服务器发送压缩的 SVG 文件时，响应标头中应包含 2 条信息。

```
内容类型：图片/svg+xml
内容编码：gzip

```

通常，在文件中建立一个 MIME 类型映射`${jetty.home}/etc/webdefault.xml`（查找`<mime-mapping>`），`DefaultServlet`以便使用适当的 Content-Type 为该静态文件提供服务，但是，这也是压缩的，因此这意味着所有 Gzip 逻辑都应该启动。

如果 DefaultServlet`Content-Encoding`看到请求的文件存在 .gz 文件扩展名，它将设置适当的标头。

换句话说，您的 http 客户端（浏览器）可以请求文件`logo.svg`，但 DefaultServlet 将从设置为 gzip的文件内容`logo.svg.gz`提供服务。`Content-Encoding`

# java - 谷歌页面排名java api

> ID：14134792
> 
> 赞同：0
> 
> 时间：2013-01-03T07:34:32.427
> 
> 标签：java, api, pagerank

我想获得给定域的谷歌页面排名。

我使用以下代码谷歌 api 代码来获取 pagerank。我之前获得了页面排名。今天当我尝试运行相同的文件时，我遇到了一些问题，无法获得正确的页面排名。

```
import java.net.URLConnection;
import java.net.URL;
import java.io.InputStream;

/**
 * <b>PageRankService provides simple API to Google PageRank Technology</b>
 * <br>
 * PageRankService queries google toolbar webservice and returns a
 * google page rank retrieved from one of the next datacenters on the list.
 * <br>toolbarqueries.google.com
 * <br>64.233.161.100
 * <br>64.233.161.101
 * <br>64.233.177.17
 * <br>64.233.183.91
 * <br>64.233.185.19
 * <br>64.233.189.44
 * <br>66.102.1.103
 * <br>66.102.9.115
 * <br>66.249.81.101
 * <br>66.249.89.83
 * <br>66.249.91.99
 * <br>66.249.93.190
 * <br>72.14.203.107
 * <br>72.14.205.113
 * <br>72.14.255.107
 */
public class PageRankService {

    static private int dataCenterIdx = 0;

    /**
     * List of available google datacenter IPs and addresses
     */
    static final public String [] GOOGLE_PR_DATACENTER_IPS = new String[]{
                "64.233.161.100",
                "64.233.161.101",
                "64.233.177.17",
                "64.233.183.91",
                "64.233.185.19",
                "64.233.189.44",
                "66.102.1.103",
                "66.102.9.115",
                "66.249.81.101",
                "66.249.89.83",
                "66.249.91.99",
                "66.249.93.190",
                "72.14.203.107",
                "72.14.205.113",
                "72.14.255.107",
                "toolbarqueries.google.com",
                };

    /**
     * Default constructor
     */
    public PageRankService() {

    }

    /**
     * Must receive a domain in form of: "http://www.domain.com"
     * @param domain - (String)
     * @return PR rating (int) or -1 if unavailable or internal error happened.
     */
    public int getPR(String domain) {

        int result = -1;
        JenkinsHash jHash = new JenkinsHash();

        String googlePrResult = "";

        long hash = jHash.hash(("info:" + domain).getBytes());

        String url = "http://"+GOOGLE_PR_DATACENTER_IPS[dataCenterIdx]+"/search?client=navclient-auto&hl=en&"+
                "ch=6"+hash+"&ie=UTF-8&oe=UTF-8&features=Rank&q=info:" + domain;

        try {
            URLConnection con = new URL(url).openConnection();
            InputStream is = con.getInputStream();
            byte [] buff = new byte[1024];
            int read = is.read(buff);
            while (read > 0) {
                googlePrResult = new String(buff, 0, read);
                read = is.read(buff);
            }
            googlePrResult = googlePrResult.split(":")[2].trim();
            result = new Long(googlePrResult).intValue();
        } catch (Exception e) {
            e.printStackTrace();
        }

        dataCenterIdx++;
        if (dataCenterIdx == GOOGLE_PR_DATACENTER_IPS.length) {
            dataCenterIdx = 0;
        }

        return result;

    }

    public static void main(String [] args) {
        long start = System.currentTimeMillis();
        PageRankService prService = new PageRankService();
        String domain = "http://www.gmail.com";
        if (args.length > 0) {
            domain = args[0];
        }
        System.out.println("Checking " + domain);
        System.out.println("Google PageRank: " + prService.getPR(domain));
        System.out.println("Took: " + (System.currentTimeMillis() - start) + "ms");
    }
} 
```

但是今天我无法获得页面排名。我收到以下错误：

```
Checking http://www.google.com
Google PageRank: -1
java.io.IOException: Server returned HTTP response code: 504 for URL: http://64.233.161.100/search?client=navclient-auto&hl=en&ch=63513778613&ie=UTF-8&oe=UTF-8&features=Rank&q=info:http://www.google.com
Took: 179711ms
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1625)
    at PageRankService.getPR(PageRankService.java:82)
    at PageRankService.main(PageRankService.java:112)
BUILD SUCCESSFUL (total time: 3 minutes 0 seconds) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T19:27:20.117

我不是专家，但尝试使用[http://toolbarqueries.google.com/tbr](http://toolbarqueries.google.com/tbr)？而不是/搜索

# jquery - 验证名称的特殊字符，除了 jquery 中的字母下划线数字

> ID：14134793
> 
> 赞同：0
> 
> 时间：2013-01-03T07:34:35.513
> 
> 标签：jquery, validation

我需要验证名称只允许字母数字和下划线但不允许 jquery.pls 中的任何其他字符帮助我。

我的代码

```
function validateName($name) {
var Name = /^[a-z0-9\_]+$/i.test(value);
if (!NameReg.test($name)) {
    return false;
} else {
    return true;
}
} 
```

我哪里出错了，不是孜然知道。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:41:37.853

```
jQuery.validator.addMethod("alphanumeric", function(value, element) {
    return this.optional(element) || /^[a-z_0-9]+$/i.test(value);
}, "Enter only alpha numeric characters."); 
```

在 .validate() 之前添加上面的代码并将类“字母数字”添加到您的 html 类中。

# java - 如何使用 actionPerformed() 旋转 ImageIcon()？

> ID：14134794
> 
> 赞同：2
> 
> 时间：2013-01-03T07:34:41.870
> 
> 标签：java, swing, graphics, awt, java-2d

我无法使用箭头键旋转图像图标。

我目前有以下作为我的代码

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class startGame extends JPanel implements ActionListener,KeyListener
{
Timer time = new Timer(5,this);
int x=0,y=0,velX = 0,velY=0;
Image car1;

public static void main(String[] args) 
{
    startGame game = new startGame();
    JFrame frame = new JFrame();
    frame.setTitle("NEED FOR SPEED");
    frame.setSize(800,800);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(game);
}

public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    Graphics2D ga = (Graphics2D) g;
    ImageIcon ii = new ImageIcon("car1.jpg");
    car1=ii.getImage();
    ga.drawImage(car1, x, y, null);
    time.start();
}

public startGame()
{
    time.start();
    addKeyListener(this);
    setFocusable(true);
    setFocusTraversalKeysEnabled(false);
    repaint();
}

public void actionPerformed(ActionEvent e) 
{
    if(x<0)
    {
        velX=0;
        x=0;
    }
    if(y<0)
    {
        velY=0;
        y=0;
    }
    if(x>800)
    {
        velX=0;
        x=800;
    }
    if(y>800)
    {
        velY=0;
        y=800;
    }
    x = x + velX;
    y = y + velY;
    repaint();
}

public void keyTyped(KeyEvent e)
{
}

public void keyReleased(KeyEvent e)
{
    velX=0;
    velY=0;
}

public void keyPressed(KeyEvent e) 
{
    int c = e.getKeyCode();

    if(c == KeyEvent.VK_LEFT)
    {
        velX = -1;
        velY = 0;
    }
    if(c == KeyEvent.VK_UP)
    {
        velX = 0;
        velY = -1;
    }
    if(c == KeyEvent.VK_RIGHT)
    {
        velX = 1;
        velY = 0;
    }
    if(c == KeyEvent.VK_DOWN)
    {
        velX = 0;
        velY = 1;
    }
}
} 
```

要旋转图像，我在绘制组件方法中尝试了以下操作

```
ga.rotate(Math.toRadians(45),26,26); 
```

和

```
ga.rotate(Math.toRadians(360)); 
```

但它所做的只是旋转绘画组件而不是图像。

我正在寻找的是如何仅旋转图像“car1”，以便在按下 VK_RIGHT 或 VK_LEFT 时图像分别旋转到所需的方向。同样，当按下 VK_UP 或 VK_DOWN 时，图像会分别旋转到该方向。

对于冗长的代码感到抱歉，但一切都是必要的。由于问题涉及多种方法。

谢谢论坛。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:23:15.337

*   请不要将`KeyListener`/`KeyAdapter`那用于 AWT。而是将[`KeyBinding`s](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)用于 Swing 组件（IMO 也不例外）。

*   除非另一个类应该可以访问`KeyListener` `keyPressed`etc 方法（尽管您不应该使用它），或者`actionPerformed`该类不需要实现它，而是创建一个实例以在该类中使用。

*   也宁可覆盖`getPreferredSize`，这样你就`JPanel`可以调用而不是哪个是不好的做法。在添加所有组件之前也永远不会设置可见`pack()``JFrame``setSize()``JFrame`

*   此外，我看到您在 2 个地方（构造函数和`paintComponent`）启动计时器，而不是在构造函数中启动它，除非您调用`Timer#setRepeats(false)`.

*   我认为没有用 for `ImageIcon`，而只是简单地使用了 a`BufferedImage`

*   `paintComponent(..)`除了纯绘图之外，不要加载图像或进行冗长的操作等

如上所述，这是您的修复代码：

注意：我使用自己的`KeyBinding`课程只是为了让事情变得更容易一些。

![在此处输入图像描述](../Images/76cba5a5b75c93ff3a0c4cbf23b9d1f6.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.Transparency;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class Nfs {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Need for Speed");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new startGame());
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
}

class startGame extends JPanel {

    private int x = 0, y = 0, velX = 0, velY = 0, width = 800, height = 600;
    private BufferedImage transformedImage;
    private Timer time = new Timer(5, new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            if (x < 0) {
                velX = 0;
                x = 0;
            }
            if (y < 0) {
                velY = 0;
                y = 0;
            }
            if (x > width) {
                velX = 0;
                x = width;
            }
            if (y > height) {
                velY = 0;
                y = height;
            }
            x = x + velX;
            y = y + velY;
            repaint();
        }
    });

    public startGame() {

        transformedImage = createTransformedImage(createCar(), 45);

        addKeyBindings();
        time.start();
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D ga = (Graphics2D) g;

        ga.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        ga.drawImage(transformedImage, x, y, null);
    }
    //Simply used for testing (to simulate sprites) 

    public static BufferedImage createCar() {
        BufferedImage img = new BufferedImage(100, 100, BufferedImage.TRANSLUCENT);
        Graphics2D g2 = img.createGraphics();
        g2.setColor(Color.GREEN);
        g2.fillRect(0, 0, img.getWidth(), img.getHeight());
        g2.dispose();
        return img;
    }

    //https://stackoverflow.com/questions/4156518/rotate-an-image-in-java
    public static BufferedImage createTransformedImage(BufferedImage image, double angle) {
        double sin = Math.abs(Math.sin(angle)), cos = Math.abs(Math.cos(angle));
        int w = image.getWidth(), h = image.getHeight();
        int neww = (int) Math.floor(w * cos + h * sin), newh = (int) Math.floor(h * cos + w * sin);
        BufferedImage result = new BufferedImage(neww, newh, Transparency.TRANSLUCENT);
        Graphics2D g2d = result.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.translate((neww - w) / 2, (newh - h) / 2);
        g2d.rotate(angle, w / 2, h / 2);
        g2d.drawRenderedImage(image, null);
        g2d.dispose();
        return result;
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    private void addKeyBindings() {
        AbstractAction onReleaseAction = new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                velX = 0;
                velY = 0;
            }
        };

        //we are adding multiple keybindigs with same focus map etc to same component so we intitae an instance of class rate than use static methods
        KeyBinding kb = new KeyBinding(this, KeyBinding.WHEN_IN_FOCUSED_WINDOW);

        kb.addKeyBindingOnPressAndRelease(KeyEvent.VK_DOWN, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                velX = 0;
                velY = 1;
            }
        }, "down pressed", onReleaseAction, "down released");

        kb.addKeyBindingOnPressAndRelease(KeyEvent.VK_UP, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                velX = 0;
                velY = -1;
            }
        }, "up pressed", onReleaseAction, "up released");

        kb.addKeyBindingOnPressAndRelease(KeyEvent.VK_LEFT, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                velX = -1;
                velY = 0;
            }
        }, "left pressed", onReleaseAction, "left released");
        kb.addKeyBindingOnPressAndRelease(KeyEvent.VK_RIGHT, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                velX = 1;
                velY = 0;
            }
        }, "right pressed", onReleaseAction, "right released");
    }
}

class KeyBinding {

    private final JComponent container;
    private final int inputMap;
    public static final int WHEN_IN_FOCUSED_WINDOW = JComponent.WHEN_IN_FOCUSED_WINDOW,
            WHEN_FOCUSED = JComponent.WHEN_FOCUSED,
            WHEN_ANCESTOR_OF_FOCUSED_COMPONENT = JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT;

    public KeyBinding(JComponent container, int inputMap) {
        this.container = container;
        this.inputMap = inputMap;
    }

    public void addKeyBinding(int key, boolean onRelease, AbstractAction keybindingAction, String description) {
        putKeyBinding(container, inputMap, key, onRelease, keybindingAction, description);
    }

    public void addKeyBindingOnPress(int key, AbstractAction keybindingAction, String description) {
        putKeyBinding(container, inputMap, key, false, keybindingAction, description);
    }

    public void addKeyBindingOnRelease(int key, AbstractAction keybindingAction, String description) {
        putKeyBinding(container, inputMap, key, true, keybindingAction, description);
    }

    public void addKeyBindingOnPressAndRelease(int key, AbstractAction onPressAction, String onPressDesc, AbstractAction onReleaseAction, String onReleaseDesc) {
        putKeyBinding(container, inputMap, key, false, onPressAction, onPressDesc);
        putKeyBinding(container, inputMap, key, true, onReleaseAction, onReleaseDesc);
    }

    public static void putKeyBinding(JComponent container, int inputMap, int key, boolean onRelease, AbstractAction keybindingAction, String description) {
        container.getInputMap(inputMap).put(KeyStroke.getKeyStroke(key, 0, onRelease), description);
        container.getActionMap().put(description, keybindingAction);
    }

    public static void putKeyBindingOnPress(JComponent container, int inputMap, int key, AbstractAction keybindingAction, String description) {
        container.getInputMap(inputMap).put(KeyStroke.getKeyStroke(key, 0, false), description);
        container.getActionMap().put(description, keybindingAction);
    }

    public static void putKeyBindingOnRelease(JComponent container, int inputMap, int key, AbstractAction keybindingAction, String description) {
        container.getInputMap(inputMap).put(KeyStroke.getKeyStroke(key, 0, true), description);
        container.getActionMap().put(description, keybindingAction);
    }

    public static void putKeyBindingOnPressAndRelease(JComponent container, int inputMap, int key, AbstractAction onPressAction, String onPressDesc, AbstractAction onReleaseAction, String onReleaseDesc) {
        putKeyBinding(container, inputMap, key, false, onPressAction, onPressDesc);
        putKeyBinding(container, inputMap, key, true, onReleaseAction, onReleaseDesc);
    }
} 
```

**参考：**

*   [在java中旋转图像](https://stackoverflow.com/questions/4156518/rotate-an-image-in-java)

# android - 在最新的 android sdk 中，微调器上的文本已移至右侧

> ID：14134798
> 
> 赞同：0
> 
> 时间：2013-01-03T07:34:59.610
> 
> 标签：android, android-layout, android-spinner

在我的 android 应用程序中，我有一个`Spinner`. 当我在 Galaxy 而不是 2 手机中检查应用程序时，问题就来了。对于 android 版本 2.3 和其他版本，微调器中的项目列表显示在应用程序的左侧。但是对于最新版本的第一个和最后一个阿拉伯字符串显示在右侧，我希望它们都像其他设备一样浮动到左侧。如果不使用自定义`Spinner`视图，我们不能轻松处理这个问题。但是，如果除了自定义之外别无选择，请`Spinner`告诉我。

这是屏幕截图，以获得更清晰的想法。 ![在此处输入图像描述](../Images/c4a96bdf08bf634d10f73480804297e0.png)

这是 xml 文件中的微调器代码

```
 <Spinner
            android:id="@+id/spinner1"
            android:layout_width="262dp"
            android:layout_height="45dp"
            android:layout_gravity="top|center"
            android:gravity="left"
            android:background="@drawable/spinner"
            android:paddingLeft="@dimen/padding_small" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:53:02.323

我不得不使用自定义视图来处理这个问题。否则没有任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:41:25.233

将此属性添加到布局 xml 中的微调器：

```
android:gravity="left" 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:52:59.783

```
 <TableRow
                android:id="@+id/tableRow11"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:background="#FFFFFF" >

                <Spinner
                    android:id="@+id/drive_mode"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:layout_weight="2"
                    />

                <Button
                    android:id="@+id/button1"
                    style="?android:attr/buttonStyleSmall"
                    android:layout_width="15dp"
                    android:layout_height="15dp"
                    android:layout_gravity="center_vertical"
                    android:clickable="false"
                    android:focusable="false"
                    android:background="@drawable/spinner_down" />

            </TableRow> 
```

# node.js - 将 node.js 与 socketstream 一起使用时出现以下错误。"throw new Error("Cannot find module '" + x + "'")"

> ID：14134801
> 
> 赞同：0
> 
> 时间：2013-01-03T07:35:14.647
> 
> 标签：node.js, socketstream

我正在使用带有 socketstream 的 node.js ..我在运行我的时候遇到了以下错误

“appln.Cannot find module '/entry' [Break On This Error]

throw new Error("找不到模块'" + x + "'")

```
 NewNodeProject
 client
   -code
      -app
      -libs 
   -css
      -libs
 static
 templates
 views
   -app.html
 node_modules
   -express
   -socketstream
 server
   -rpc
      -user.js
   -app.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:33:19.990

这里的解决方案是使用 SocketStream 的生成器来生成应用程序文件夹和文件，这样就不会意外遗漏任何文件/文件夹：

```
socketstream new <project_name> 
```

您可以使用此命令传递以下标志：

```
-c    (use CoffeeScript versions of the application's files)
-m    (generate the application without the demo code files)
-j    (use jade's templating system for the view & template files) 
```

# steam - Steam Web API 获取没有 Steam 个人资料的用户的游戏列表

> ID：14134804
> 
> 赞同：3
> 
> 时间：2013-01-03T07:35:25.770
> 
> 标签：steam, steam-web-api

我搜索了论坛，并找到了获取所有用户游戏的示例模式： [http](http://steamcommunity.com/id/) ://steamcommunity.com/id/ /games?tab=all&xml=1 返回所有游戏。但是，如果用户尚未设置 Steam 个人资料，即使他/她有游戏，他们也不会出现在上述网址中。（例如）[http://steamcommunity.com/id/76561198061133470/games?tab=all&xml=1](http://steamcommunity.com/id/76561198061133470/games?tab=all&xml=1)

我有 Steam Web API 密钥。我想得到游戏列表。任何人都可以指出一个方法/调用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:10:44.997

如果是 customUrl，则使用

`http://steamcommunity.com/id/<custom>`

否则使用

`http://steamcommunity.com/profile/<steamid>`

您可以使用任何 steamcommunity url 通过添加`?xml=1`到 url 的末尾来检索数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T10:46:05.370

如果您使用“profiles”而不是“id”，它似乎可以工作

以您为例：[http ://steamcommunity.com/profiles/76561198061133470/games?tab=all&xml=1](http://steamcommunity.com/profiles/76561198061133470/games?tab=all&xml=1)

# iphone - CoreData：错误：严重的应用程序错误。在核心数据更改处理期间捕获到异常

> ID：14134808
> 
> 赞同：13
> 
> 时间：2013-01-03T07:36:01.620
> 
> 标签：iphone, ios, core-data, nsmanagedobject, nsnotificationcenter

我在开发我的 iphone 应用程序时遇到了重大问题。

这是完整的错误：

```
CoreData: error: Serious application error.  Exception was caught during Core Data 
change processing.  This is usually a bug within an observer of 
NSManagedObjectContextObjectsDidChangeNotification.  -[TimeSpentStudying coordinate]:
unrecognized selector sent to instance 0x21db92d0 with userInfo (null) 
```

这很奇怪，因为我有两个 coreData 实体（ Locations 和 TimeSpentStudying）。但我不认为这些是问题。`[TimeSpentStudying coordinate]`很奇怪，因为我没有在核心数据类`coordinate`上发送的属性`TimeSpentStudying`

我设置了 mapView，当用户点击 mkannotationview 上的详细信息披露按钮时，会弹出一个新视图 (LibraryTrackTimeViewController)，但几乎无法使用。我尝试在 viewDidLoad 中调用 NSLog 并没有显示任何内容。

地图视图控制器.m

```
#pragma mark - NSNotification

- (void)contextDidChange:(NSNotification *)notification
{
  if ([self isViewLoaded]) {
    [self updateLocations];
} 
```

.

```
- (void)updateLocations
{
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Location" inManagedObjectContext:self.managedObjectContext];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:entity];

NSError *error;
NSArray * foundObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
    if (foundObjects == nil) {
    FATAL_CORE_DATA_ERROR(error);
    return;
    }

    if (locations != nil) {
    [self.mapView removeAnnotations:locations];
    }

locations = foundObjects;
[self.mapView addAnnotations:locations]; 
```

}

```
-(void)dealloc
{
[[NSNotificationCenter defaultCenter] removeObserver:self
    name:NSManagedObjectContextObjectsDidChangeNotification
    object:self.managedObjectContext];
} 
```

我认为可能与 mapViewController.m 中的 prepareForSegue 方法有关的错误

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if (distance < 500) {
  if ([segue.identifier isEqualToString:@"TrackLibraryTimes"]) {
    UINavigationController *navigationController = segue.destinationViewController;

LibraryTrackTimeViewController *controller = (LibraryTrackTimeViewController *)navigationController.topViewController;
controller.managedObjectContext = self.managedObjectContext;
  }
 }} 
```

我为粗略的语法道歉，我刚刚习惯了，如果您需要更多代码，请告诉我，谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-19T02:38:01.567

我有同样的错误，由于

```
-(void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath

case NSFetchedResultsChangeInsert:
            //[self.tableView insert
            NSLog(@"change insert");
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            break; 
```

我用过`indexPath`而不是 newIndexPath。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-23T18:02:28.967

通过解除分配获取的结果控制器修复了该问题。当我在单独的屏幕中添加/编辑对象时，它仍在执行提取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T18:14:53.350

根据项目的复杂性，一个快速的方法是实现有问题的方法并在那里设置断点。当您到达断点时，您可以看到它被调用的位置，并且 Bob 是您的叔叔。

所以你可以把类似的东西

```
- (CLLocationCoordinate2D)coordinate{
    // set a breakpoint on the next line
    NSParameterAssert(false);
    return nil;
} 
```

在你的`TimeSpentStudying`课堂上，看看它在哪里被调用。

只要确保完成后将其删除即可。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-06-20T18:20:21.253

我会尝试几件事。

1.  从模拟器中删除应用程序并清理应用程序并再次运行。

2.  查看您的代码，我觉得您正在将 managedContextObject 从一个控制器传递到另一个控制器，无需这样做。用户 AppDelegate sharedInstance 可以随时获取 managedObject。它不会创建多个实例，它是一个单例对象。

试试这两个，希望你能找到一些答案或者修复它。

# javascript - flash CS3中的调用函数

> ID：14134810
> 
> 赞同：1
> 
> 时间：2013-01-03T07:36:04.397
> 
> 标签：javascript, flash

我有一个闪光灯，这调用了一个javascript函数。

```
function StoreFlashCookie(value) {
    var flashcookie = document.getElementById("<%=HF_FlashCookie.ClientID %>");
    if (flashcookie.value == "") {
        flashcookie.value = value;
    } else {
        StoreFlashCookie_Flash(flashcookie.value);
    }
} 
```

当页面加载时，flash会调用该函数为隐藏字段赋值，或者更新自己保存的值。

```
function StoreFlashCookie_Flash(value) {
    document.getElementById("flashMovieId").flashStoreCookie(value);
} 
```

但是我有一个问题，当我单击提交按钮时，我处理值并将其分配给隐藏字段，然后我使用 javascript 将信息提交到后面代码中的另一个页面。在 Firefox 和 IE 中，我的代码工作正常，但 chrome，我不能调用“flashStoreCookie”函数。Chrome 在函数“StoreFlashCookie_Flash”上崩溃 javascript。

我认为我的闪存将在我的 chrome 处理代码之后加载。

# html - 在布局中使用表格

> ID：14134812
> 
> 赞同：-2
> 
> 时间：2013-01-03T07:36:20.270
> 
> 标签：html, css, html-table

最近我了解到在网页布局中经常不鼓励使用表格（[来源](http://webdesign.about.com/od/layout/a/aa111102a.htm)）

我已经制作了我的 web 应用程序，它的一些部分是基于表格布局的。例如，我的主页包含一张表格中的照片列表（类似于某些 Tumblr 布局）。该表有单列和多行，每行都有关于每张图片的信息。

我想知道是否应该尝试修复一些布局以使其符合标准。此外，除了*表格问题*之外，如果我制作整个网页布局的方式存在一些重大问题，我想听听您的意见。

**更新：**这就是我在网页中使用表格的方式。谁能帮助我应该如何改变它？

```
<% posts.each do %>
  <div class="post">
    <table>
      <tr><!-- title, name, date -->
        <td><%= post.title %></td>
        <td><%= user.name %></td>
        <td><%= date %></td>
      </tr>
      <tr><!-- image -->
        <td><%= image %></td>
      </tr>
    </table>
   </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:54:09.337

如果您已经使用表格构建了页面，请继续使用它。除了可能更好的可维护性之外，您将不会获得切换到基于无表的布局的任何优势。

如果您建立一个新站点（或决定切换到无表格布局），只需使用以下内容：

```
<div class="container">
    <div class="row">Content of row 1</div>
    <div class="row">Content of row 2</div>
    <div class="row">Content of row 3</div>
</div> 
```

有一些像这样的CSS：

```
div.container {
    width: 800px;
}

div.row {
    margin-bottom: 20px;
} 
```

它将为您提供更清晰的 html 源代码，因为您丢失了所有`<tr><td></td></tr>`内容，并且由于您的内容不是表格数据，因此 div 是用于您正在做的事情的正确元素。

# ruby - 红宝石路线不起作用？

> ID：14134815
> 
> 赞同：0
> 
> 时间：2013-01-03T07:36:32.177
> 
> 标签：ruby, sql-server, routes

今天我开始了我的第一个 Ruby 项目。目标是将我的个人网站转换为 Ruby，以便我可以使用一些开源项目来添加联系表单。无论如何，我决定从静态站点复制所有 HTML，然后将其放入名为 index.html.erb 的视图中。问题是我不知道如何将其路由为站点的根目录。我在路由文件中使用的路由是：

> “root to: pages#index”（有人看了我的代码并提出了建议，我还没有研究太多路线）

当我将服务器连接到该站点时，我收到以下错误消息：“路由错误 - 未初始化的常量 PagesController。” 这让我相信我也需要一个控制器，但我不知道要在其中执行什么操作。对不起，如果这是一个无聊的问题，但我只学习了 Ruby 大约一周。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:44:26.667

在项目文件夹中的控制台中尝试此操作：

```
rails generate controller FooBar baz qux 
```

其中 FooBar 是您的控制器的名称，而 baz 和 qux 是该控制器内的操作。

-

然后转到

> 配置/路由.rb

并添加这一行：

```
root to: 'foobar#home'
match '/foobar',    to: 'foobar#baz' 
```

其中 foobar 是控制器，baz 是控制器内部的操作

# loops - *INLR 和 while(true) 在 RPG 中

> ID：14134816
> 
> 赞同：2
> 
> 时间：2013-01-03T07:36:33.617
> 
> 标签：loops, ibm-midrange, rpg, unreachable-code

我正在查看一些遗留程序，其中可以找到如下代码：

```
C/free
    Dow 1=1;
        SubRoutine();
    EndDo;
    *INLR = *On;
/end-free 
```

所讨论的程序是一个类似服务器的程序，其中子例程处理通过网络传入的请求。对我来说，*INLR = *On 语句似乎没有任何效果，但话又说回来，我对 RPG 的知识非常有限，而且这种模式在我正在查看的几个程序中重复出现。

因此，我的问题是： /end-free 之前的最后一行是否无法访问，因此是多余的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:10:50.060

您是对的，在示例中，如图所示，没有正常的方法可以退出此循环。看来这个程序只会因错误或作业取消而结束。有时最好在主 DOW 中检查 %shutdown()，以允许永无止境的工作优雅地关闭，但在这种情况下，要么没有选择，要么没有考虑到。

我可能推测该程序是通过复制另一个程序编写的，并且 *INLR 行可能已作为标记结束的常规方式留在代码中。所以有人可能会争辩说这条线是无害的，并且可以更容易理解这就是结束。

# c# - 尝试打印 *.prn 文件时出错

> ID：14134819
> 
> 赞同：1
> 
> 时间：2013-01-03T07:36:41.673
> 
> 标签：c#, winforms, printing, process

我有打印`*.prn`文件的问题。这是代码：

```
Process process1 = new Process();
process1.StartInfo.FileName = "copy";
process1.StartInfo.Arguments = string.Format(@" /b C:/test/test.prn \\127.0.0.1\{0}",
                                                         SelectPrinterForm.selectedLine);
process1.Start(); 
```

在`SelectPrinterForm.selectedLine`我有选择的打印机的名称。我的`Start()`方法有错误，信息**找不到文件**。

编辑（添加堆栈跟踪）：

```
w System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo)
w System.Diagnostics.Process.Start() 
```

## 问题：

任何建议为什么我有这个错误？
另外为什么当我使用“@”时我仍然有`"\\\\"`而不是`"\\"`？

## [汉斯·帕桑特](https://stackoverflow.com/users/17034/hans-passant)的帮助解决方案和他上面的回答

```
Process process1 = new Process();
string computerFullName = Program.GetFQDN();
process1.StartInfo.FileName = "cmd.exe";
process1.StartInfo.Arguments = string.Format(@" /c copy /B C:\test\test.prn \\{0}\{1}",
                                                     computerFullName,
                                                     SelectPrinterForm.selectedLine);
process1.Start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:41:56.480

> 任何建议为什么我有这个错误？

“copy”在 Windows 中不是可执行文件，它是*命令解释器*cmd.exe 的命令。等效为 Filename = "cmd.exe", Arguments = "/c copy" + string.Format(...)。您可能不会对命令窗口或产生的糟糕错误报告感到满意，请考虑使用 File.Copy()。

> 还有为什么当我使用 "@" 时我仍然有 "\\" 而不是 "\" ？

这是一个调试器工件，它不知道您是否在代码中使用了@，因此在安全方面会出错，并将字符串显示为常规 C# 字符串文字。使用文本可视化器按原样查看字符串，单击望远镜图标。

# ruby-on-rails - 在一天内接收所有值并创建平均值

> ID：14134825
> 
> 赞同：0
> 
> 时间：2013-01-03T07:37:18.987
> 
> 标签：ruby-on-rails, ruby, activerecord

我的数据库中有一个**日期**（类型：DateTime）列和一个**价格**（类型：十进制）列。每小时创建和保存记录。我需要创建一个 rake 任务来检查我所有存储的数据并创建每天的平均价格。

使用 ActiveRecord，我如何查询我的所有记录，将每天的所有记录组合在一起，从这 24 条记录中创建新的平均价格，并将其作为新记录保存在不同的表中？

我想它会是这样的伪代码：

```
Sales.all
  loop through them and group records by day
    loop through each grouping and create average
      average = DailyAverage.create 
```

仅供参考，我有大约 10,000 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:58:00.567

范围是选择一些记录并将它们分组的好方法。在销售类中定义类似`scope :by_date, ->(needful_date) { where{ date == needful_date} }`. 然后在另一个模型（与另一个表相关）中定义您的计算：

```
def calculate_average_prices
  first_sale_date = # find your first sale date
  date_range = first_sale_date..Date.today
  grouped_sales = date_range.map{|date| Sales.by_date(date)}
  average_prices = grouped_sales.map do |sales|
    sales.map{|sale| sale.price.to_f}.average
  end
  # save your average prices
end 
```

这只是一个解决方案的想法。你最好理解它并自己实施。

# java - 搜索一个单词，然后在同一行中返回一个数字或单词

> ID：14134835
> 
> 赞同：0
> 
> 时间：2013-01-03T07:38:30.257
> 
> 标签：java, algorithm, search

我有一个程序，它接受用户输入并将每个单词存储在 arrayList 中，然后在外部文件中搜索每个单词。我想要从这里做的是返回另一个单词（在另一个 arrayList 中）或与**第一个搜索单词在同一行中的价格值。**

例如：

```
Here is my user input: Tuna

Here are my associated words in another arrayList: (seared, chunky, shredded)

Here are lines in my file: the cost of seared tuna is $1 per tin. Contains brine.
                           the cost of shredded tuna is $50 per packet 
```

然后我希望我的程序在每一行中搜索金枪鱼，然后打印出来：

```
Seared $1
Shredded $50 
```

为了让我的程序执行此操作，我需要它了解单词**seared**位于 tuna 出现的第一行中，并且该行中的货币价值是 1 美元。然后对下一行重复该过程。

我需要知道的主要事情是缓冲阅读器是否区分不同的行，以及我是否可以分别搜索每一行以查找我在 arrayList 中的单词和货币值。

我用于搜索的代码如下。到目前为止，它只在文件中搜索一个单词，然后返回该单词的位置。

```
while((strLine1 = br1.readLine()) != null){
  for(String list: listOfWords){
    Pattern p = Pattern.compile(list);
    Matcher m = p.matcher(strLine1);

    int start = 0;
    while (m.find(start)) {
      System.out.printf("Word found: %s at index %d to %d.%n", m.group(), m.start(), m.end());
      start = m.end();
    }
  }
} 
```

我希望这更容易理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:36:20.517

我认为如果您想在行中搜索价格，您可以查找“$”符号，然后提取数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:05:45.630

您能否更准确地说明要返回的内容、外部文件的格式以及要显示的内容？

关于您的代码，您可以在 String 类中使用 str1.contains(str2) 方法来检查用户输入的单词是否存在于行中，而不是使用匹配器，因为这里没有正则表达式。

如果用户输入多个单词，那么你可以有一个循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:07:48.650

您似乎知道如何阅读行以及如何遍历它们，这很好。现在你需要做的就是检查每一行是否包含单词“tuna”，如果它确实用“”替换了“tuna”字符串，你得到的是 Seared 1 美元或 Shredded 50 美元。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:25:33.520

你说过：“我需要知道的主要事情是缓冲阅读器是否区分不同的行，以及我是否可以单独搜索每一行”。

但是 readLine() 确实读取了由换行符 (\n) 分隔的单独行。所以你可以单独处理这些行。对不起，如果我不明白你的问题...

# python - 搜索和替换 HTML 文本，而不是标签

> ID：14134843
> 
> 赞同：1
> 
> 时间：2013-01-03T07:39:07.440
> 
> 标签：python, html, xml

> **可能重复：**
> [如何在保留 html 标签/结构的同时查找/替换 html 中的文本](https://stackoverflow.com/questions/1856014/how-to-find-replace-text-in-html-while-preserving-html-tags-structure)

我想通过 HTML 文本进行搜索和替换。我不想摆弄标签或其属性，只是 HTML 文本。我应该如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:53:25.517

```
import lxml.etree as et
html=\
"""
<!DOCTYPE html>
<html>
  <head>
    <title>Hello HTML</title>
  </head>
  <body>
    <p>Hello 1</p>
    <p>Hello 2</p>
    <p>Hello 3</p>
    <p>Hello 4</p>
  </body>
</html>
"""
doc = et.fromstring(html)
for i in doc.xpath('.//p[contains(.,"Hello") and not(contains(.,"4"))]'):
    i.text='replaced'
print et.tostring(doc,pretty_print=True) 
```

出去：

```
<html>
  <head>
    <title>Hello HTML</title>
  </head>
  <body>
    <p>replaced</p>
    <p>replaced</p>
    <p>replaced</p>
    <p>Hello 4</p>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:55:50.643

您可以尝试使用[Re](http://docs.python.org/2/library/re.html)模块。或者只是使用[替换](http://docs.python.org/2/library/stdtypes.html)功能。

但是如果您需要对多个关键字进行替换，则搜索和替换的处理效率非常低。您最好通过[beautifulSoup](http://www.crummy.com/software/BeautifulSoup/)或[lxml](http://lxml.de/)解析结构，获取对象，并对对象进行一些操作。

# sql - SQL Server 计数查询

> ID：14134846
> 
> 赞同：-4
> 
> 时间：2013-01-03T07:39:11.357
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我有如下三个表：

```
Article
No  Storage_code   Type_code
--- ------------   ---------
1   10 00 00          S
2   10 10 00        P
1   10 10 10        S
3   11 00 00        C
1   10 00 00        C
2   11 10 10        P

Storage
Main_Code Division_Code Safe_Code Position_Code   Main_Name
--------- ------------- --------- ------------- -------------
10 00 00     10         00  00              Div1
10 10 00        10          10  00         Div1_Saf1
10 10 10     10         10  10         Div1_Saf1_Pos1
10 10 11        10          10  11              Div1_Saf1_Pos2
10 10 12        10          10  12         Div1_Saf1_Pos3
10 11 00        10          11  00         Div1_Saf2
10 11 10        10          11  10         Div1_Saf2_Pos1
10 11 11     10         11  11              Div1_Saf2_Pos2
10 11 12        10           11 12              Div1_Saf2_Pos3
11 00 00        11           00 00              Div2
11 10 00     11         10  00         Div2_Saf1
11 10 10        11          10  10         Div2_Saf1_Pos1
11 10 11        11          10  11         Div2_Saf1_Pos2
11 10 12        11          10  12         Div2_Saf1_Pos3
11 11 00        11          11  00         Div2_Saf2
11 11 10        11          11  10         Div2_Saf2_Pos1
11 11 11        11          11  11         Div2_Saf2_Pos2
11 11 12        11          11  12         Div2_Saf2_Pos3

Types
Code        Name
--------        --------
C       Cards
P       Plates
S       Stickers 
```

我想要一个选择的结果如下：

```
Main_Code    Division_Code Safe_Code Position_Code Main_Name    Cards Plates Stickers Total
----------------------------------------------------------------------------------------
10 00 00          10         00 00    Div1      1    1       2     4
10 10 00          10            10  00    Div1_Saf1 0    1      1      2
10 10 10          10            10  10    Div1_Saf1_Pos1    0    0      1      1
11 00 00          11            00  00    Div2      1    1      0      2
11 10 00          11            10  00    Div2_Saf1 0    1      0      1
11 10 10          11            10  10    Div2_Saf1_Pos1    0    1      0      1 
```

任何人都可以尽快帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:03:25.713

您正在寻找将行旋转为列，试试这个：

```
SELECT
  s.[Main_Code],
  s.Division_Code,
  s.Safe_Code,
  s.Position_Code,
  s.Main_Name,
  SUM(CASE WHEN t.Name ='Cards' THEN 1 ELSE 0 END) AS Cards, 
  SUM(CASE WHEN t.Name ='Plates' THEN 1 ELSE 0 END) AS Plates, 
  SUM(CASE WHEN t.Name ='Stickers' THEN 1 ELSE 0 END) AS Stickers,
  COUNT(t.Name) AS Total
FROM Storage s
INNER JOIN Article a ON a.Storage_code = s.[MainCode]
INNER JOIN Types   t ON a.Type_code = t.Code
GROUP BY s.Main_Code,
         s.Division_Code,
         s.Safe_Code,
         s.Position_Code,
         s.Main_Name; 
```

# firebase - 为什么 authClient.createUser 会使用无效的电子邮件地址引发错误？

> ID：14134851
> 
> 赞同：1
> 
> 时间：2013-01-03T07:39:28.730
> 
> 标签：firebase

以下代码引发 javascript 错误，其中`some_email`是格式不正确的电子邮件地址：

```
var authClient = new FirebaseAuthClient(some_firebase_ref);
authClient.createUser(some_email, some_password, function(error, user) {
    console.log(error, user);
}); 
```

它在控制台中给出了这个：

```
Error: FirebaseAuthClient.createUser failed: First argument must be a valid email address. 
```

是否有原因导致回调不只是在填写错误参数且没有用户数据的情况下触发？这似乎是使用错误参数的好例子，并且让我们不必编写自己的电子邮件验证或 try/catch 块。

# iphone - UIImagePickerController 相机未将照片保存在照片库中

> ID：14134854
> 
> 赞同：2
> 
> 时间：2013-01-03T07:39:45.883
> 
> 标签：iphone, ios, cocoa-touch, uiimagepickercontroller

以前有人遇到过这个问题吗？我正在使用`UIImagePickerController`相机通过我的应用程序拍照，我注意到照片在拍摄后没有存储在照片库中。我已经在 iPhone4 的 iOS5 和 iPhone5 的 iOS6 上尝试过，结果相同。这是我的设置方式：

```
UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
    imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
}

imagePickerController.delegate = self;
[self.navigationController presentModalViewController:imagePickerController animated:YES];
[imagePickerController release]; 
```

似乎 UIImagePickerController 应该隐式保存拍摄到用户照片库的照片？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T07:45:28.580

试试下面的代码。

```
-(IBAction)useCamera
{
 if ([UIImagePickerController isSourceTypeAvailable:
      UIImagePickerControllerSourceTypeCamera])
 {
  UIImagePickerController *imagePicker =
  [[UIImagePickerController alloc] init];
  imagePicker.delegate = self;
  imagePicker.sourceType =
  UIImagePickerControllerSourceTypeCamera;
  imagePicker.mediaTypes = [NSArray arrayWithObjects:
                            (NSString *) kUTTypeImage,
                            nil];
  imagePicker.allowsEditing = NO;
  [self presentViewController:imagePicker animated:YES completion:nil];
  newMedia = YES;
 }
}

#pragma mark- camera picker delegate methods

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
 NSString *mediaType = [info
                        objectForKey:UIImagePickerControllerMediaType];

 [self dismissViewControllerAnimated:YES completion:nil];

 if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
  UIImage *image = [info
                    objectForKey:UIImagePickerControllerOriginalImage];

  [imageView setAutoresizingMask:(UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth)];
  imageView.image = image;
  if (newMedia)
   UIImageWriteToSavedPhotosAlbum(image,
                                  self,
                                  @selector(image:finishedSavingWithError:contextInfo:),
                                  nil);
 }
 else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
 {
  // Code here to support video if enabled
 }
}

-(void)image:(UIImage *)image
finishedSavingWithError:(NSError *)error
 contextInfo:(void *)contextInfo
{
 if (error) {
  UIAlertView *alert = [[UIAlertView alloc]
                        initWithTitle: @"Save failed"
                        message: @"Failed to save image"\
                        delegate: nil
                        cancelButtonTitle:@"OK"
                        otherButtonTitles:nil];
  [alert show];
 }
} 
```

从相机中选择照片并将其存储到 ImageView 并调用 save 方法将其保存到相机胶卷。愿这会有所帮助

# hadoop - Hadoop 程序中配置类的用途是什么？

> ID：14134865
> 
> 赞同：9
> 
> 时间：2013-01-03T07:40:56.280
> 
> 标签：hadoop, mapreduce, toolrunner

大多数 Hadoop MapReduce 程序是这样的：

```
public class MyApp extends Configured Implements Tool {
    @Override
    public int run(String[] args) throws Exception {
        Job job = new Job(getConf());
        /* process command line options */
        return job.waitForCompletion(true) ? 0 : 1;
    }
    public static void main(String[] args) throws Exception {
        int exitCode = ToolRunner.run(new MyApp(), args);
        System.exit(exitCode);
    }
} 
```

的用途是`Configured`什么？As `Tool`and `Configured`both have `getConf()`and `setConf()`in common。它为我们的应用程序提供了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T11:52:19.293

`Configured`是接口的实现类`Configurable`。`Configured`是具有 和 实现的基`getConf()`类`setConf()`。

仅扩展此基类就可以使用 a 配置扩展此基类的类，`Configuration`并且`Configuration`.

当您的代码执行以下行时，

```
ToolRunner.run(new MyApp(), args); 
```

在内部它会这样做

```
ToolRunner.run(tool.getConf(), tool, args); 
```

在上述情况下`tool`是`MyApp`类实例，它是一个实现，`Tool`正如你所说的那样，`getConf()`但它只是一个接口。实现来自`Configured`基类。如果你避免`Configured`在上面的代码中扩展类，那么你将不得不自己做`getConf()`和`setConf()`实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T11:51:38.497

[`Configured`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/conf/Configured.html)是[`Configurable`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/conf/Configurable.html)接口的默认实现 - 基本上它的`setConf`方法为传递的`Configuration`对象保留一个私有实例变量并`getConf()`返回该引用

[`Tool`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/util/Tool.html)是`Configurable`接口的扩展，提供添加`run(..)`方法，用于[`ToolRunner`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/util/ToolRunner.html)解析命令行选项（使用[`GenericOptionsParser`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/util/GenericOptionsParser.html)）并构建一个`Configuration`对象，然后将其传递给该`setConf(..)`方法。

您的主类通常会扩展 Configured，以便为您实现 Tool 中所需的 Configurable 接口方法。

一般来说，您应该使用 ToolRunner 实用程序类来启动 MapReduce 作业，因为它处理解析命令行参数和构建配置对象的常见任务。我会查看 ToolRunner 的 API Docs 以获取更多信息。

# plugins - 用于创建多个实体的 CRM 2011 插件

> ID：14134875
> 
> 赞同：0
> 
> 时间：2013-01-03T07:42:02.873
> 
> 标签：plugins, dynamics-crm-2011

我是 CRM 2011 插件的新手。在这里，我是一段引发错误的代码：

```
private static void AddWRItoServiceActivity(IOrganizationService service, Guid id)
    {
        using (var crm = new XrmServiceContext(service))
        {

            var serviceactivity = crm.ServiceAppointmentSet.Where(c => c.Id == id).First();
            var serviceitem = crm.brd_serviceitemSet.Where( c => c.brd_RegardingServiceId == serviceactivity.ServiceId);

            for (int i = 1; i < serviceitem.Count(); i++)
            {
                var workReportItem = new brd_workreportitem
                   {
                       brd_name = "By payman Plugin",
                       brd_serviceappointment_brd_workreportitem = serviceactivity,
                   };
                crm.AddObject(workReportItem);
                crm.SaveChanges();
            }
        }
    } 
```

我试过这个：

```
for (int i = 1; i < serviceitem.ToList().Count(); i++) 
```

这也给出了错误。您能帮我计算一下这样的数还是使用其他语法（例如 foreach）？PS：我也试过这个：

```
foreach (var s in serviceitem.ToList()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:45:36.503

正如@Anwar 建议的那样，Linq to CRM 表达式最终会转换为不支持求和或聚合表达式的 QueryExpressions。我猜 Linq Count 方法正试图转换成一个会失败的 Count Queryexpression。现在为什么`serviceitem.ToList().Count()`不起作用，我更困惑。ToList 应该导致实体的获取，然后将其添加到列表中，然后使用您的标准 LINQ Count 方法...您确实有 LINQ 的 using 语句正确吗？

你为什么不使用一个`foreach(var item in serviceitem)`？

编辑：没有看到评论。

根据您的提示中的错误，您似乎没有在 IOrganizationService 上启用代理类型，或者没有在服务器上包含您的自定义实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:52:14.900

我看不出该代码有什么问题，这可能是您设置项目和早期绑定类的方式。

我建议阅读[Using LINQ in CRM 2011 Plugins](http://crmconsultancy.wordpress.com/2011/06/06/using-linq-in-crm-2011-plugins/)，尝试按照那里列出的步骤进行操作，因为他正在描述您想要实现的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:58:26.907

FetchXML 是唯一支持 Count 和 Sum 功能的东西。Count 和 Sum 被认为是一个聚合。不幸的是，聚合在你提到的 Linq 中不起作用。

这是使用[FetchXML](https://stackoverflow.com/a/11145442/1017055)的说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T22:51:35.713

最后我成功解决了。Id 比较有助于 foreach 运行。

```
var serviceitem = crm.brd_serviceitemSet.Where( c => c.brd_RegardingServiceId.Id == serviceactivity.ServiceId.Id); 
```

# c++ - 如何通过在应用程序端获取通知来自动使消息出队

> ID：14134877
> 
> 赞同：-1
> 
> 时间：2013-01-03T07:42:19.430
> 
> 标签：c++, oracle, stored-procedures, oracle10g, oracle11g

如果有一些数据落在队列表中。如何通过在我的应用程序端获取通知来自动使消息出队。

下面是我关注的将消息排入队列表的链接，它成功发生。

[http://www.oratechinfo.co.uk/aq.html](http://www.oratechinfo.co.uk/aq.html)

我可以在预定时间使用以下查询查看我在队列表中排队的消息。

```
 select user_data from queue_table; 
```

下面是用于使消息出列的 C++ 代码的链接。使用下面的 C++ 代码，我可以在我的应用程序端手动出列数据。但我想要一种方法通过获取通知自动出列并开始自动出列。请帮我说清楚。

[http://docs.oracle.com/cd/A83908_02/NT816EE/DOC/nt.816/a99999/o4c00069.htm](http://docs.oracle.com/cd/A83908_02/NT816EE/DOC/nt.816/a99999/o4c00069.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:43:42.133

我不知道这在 C 中是否可行，但是从 PL/SQL 中，您将创建一个具有以下签名的回调过程。

```
CREATE PROCEDURE demo_queue_callback_procedure(
                 context  RAW,
                 reginfo  SYS.AQ$_REG_INFO,
                 descr    SYS.AQ$_DESCRIPTOR,
                 payload  RAW,
                 payloadl NUMBER
                 ) AS

   r_dequeue_options    DBMS_AQ.DEQUEUE_OPTIONS_T;
  r_message_properties DBMS_AQ.MESSAGE_PROPERTIES_T;
  v_message_handle     RAW(16);
  o_payload            demo_queue_payload_type; 
```

开始

```
 r_dequeue_options.msgid := descr.msg_id;
  r_dequeue_options.consumer_name := descr.consumer_name;

  DBMS_AQ.DEQUEUE(
     queue_name         => descr.queue_name,
     dequeue_options    => r_dequeue_options,
     message_properties => r_message_properties,
     payload            => o_payload,
     msgid              => v_message_handle
     );

    -- Do something with the payload received.  Must commit to get message out of table.

       COMMIT; 
```

结尾; /

-- 创建一个订阅者，并注册你的回调过程

```
 DBMS_AQADM.ADD_SUBSCRIBER (
      queue_name => 'demo_queue',
      subscriber => SYS.AQ$_AGENT(
                       'demo_queue_subscriber',
                       NULL,
                       NULL )
      );

   DBMS_AQ.REGISTER (
      SYS.AQ$_REG_INFO_LIST(
         SYS.AQ$_REG_INFO(
            'DEMO_QUEUE:DEMO_QUEUE_SUBSCRIBER',
            DBMS_AQ.NAMESPACE_AQ,
            'plsql://DEMO_QUEUE_CALLBACK_PROCEDURE',
            HEXTORAW('FF')
            )
         ),
      1
      ); 
```

您必须更改上述内容才能从错误队列中读取，但我认为概念是相同的。

# http - 301 上的额外请求已永久移动响应

> ID：14134881
> 
> 赞同：1
> 
> 时间：2013-01-03T07:42:28.523
> 
> 标签：http, jquery, openrasta

我正在构建一个`REST API`方法，`301 Moved Permanently`如果我的资源标识符得到更新，或者`204 Modified`在其他情况下返回。

但是在`301 Moved Permanently`第二次获得相同的请求后（firefox 和 chrome 中的不同行为）。

有没有办法阻止浏览器在`301 Move Permanently`从服务器获取响应时发送额外的请求？

# iphone - 模拟内存警告时视图变空。为什么？

> ID：14134883
> 
> 赞同：0
> 
> 时间：2013-01-03T07:42:51.487
> 
> 标签：iphone

我有一个应用程序，其中有两个选项卡，

最初打开第一个选项卡，当我切换到下一个选项卡并模拟内存警告时

然后返回到第一个选项卡，即使 viewDidLoad 被调用，视图也会变空。

请查看我的问题，如果您需要任何澄清，请告诉我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:53:52.793

我认为 ...

由于调用`[super didReceiveMemoryWarning]`,`[self setView:nil]`被自动调用。

所以，我认为覆盖`setView:`可以解决你的问题：

```
-(void)setView:(UIView*)view {
    if(view != nil || self.okayToUnloadView) {
        [super setView:view];
    }
} 
```

我认为你应该通过这两个美丽的链接：

1)[自定义 UIViewControllers、它们的视图和它们的内存管理](http://myok12.wordpress.com/2010/11/30/custom-uiviewcontrollers-their-views-and-their-memory-management/)

2) [UIViewController 中的高效内存处理](http://iphone2020.wordpress.com/2010/05/30/efficient-memory-handling-in-uiviewcontroller-part-1/)

也只需通过这个[问题](https://stackoverflow.com/questions/491075/iphone-development-simulate-memory-warning?rq=1)。

# linux - 仅显示具有差异的更改行，而不显示新添加的行

> ID：14134886
> 
> 赞同：2
> 
> 时间：2013-01-03T07:43:22.343
> 
> 标签：linux, diff

我很好奇是否有办法只使用 diff 获取更改的行，而不是新添加的行？

我的意思是，假设我有两个文件 file1 和 file2。

文件 1 是：

```
abc=123
def=234
klm=10.10
xyz=6666 
```

文件2是：

```
abc+=123
def=234
klm=10.101
xyz=666
stackoverflow=1000
superuser=2000
wtf=911 
```

我想要的是给出类似的命令`diff <parameters> file1 file2`并获得类似的输出

```
- abc=123
+ abc+=123
- klm=10.10
+ klm=10.101
- xyz=6666
+ xyz=666 
```

也欢迎这样的输出：

```
- abc=123
+ abc+=123
  def=234
- klm=10.10
+ klm=10.101
- xyz=6666
+ xyz=666 
```

我不想要

```
stackoverflow=1000
superuser=2000
wtf=911 
```

输出中的行。

有没有办法在 Linux 中使用 diff 的参数来获得这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:59:33.000

一个简单的 Perl 脚本：

```
use strict;
use warnings;

my ($fname1, $fname2) = ($ARGV[0], $ARGV[1]);

my %conf;
open (my $input1, "<", "$fname1") or die("open $fname1: $!");
while (<$input1>) { 
  chomp; 
  my @v = split(/\+?=/);
  $conf{$v[0]}=$_; 
}
close $input1;

open (my $input2, "<", "$fname2") or die("open $fname2: $!");
while (<$input2>) {
  chomp;
  my @v = split(/\+?=/);
  if (defined ($conf{$v[0]}) && $_ ne $conf{$v[0]}) {
    print "- $conf{$v[0]}\n";
    print "+ $_\n";
  }
}
close $input2; 
```

## 输出

```
- abc=123
+ abc+=123
- klm=10.10
+ klm=10.101
- xyz=6666
+ xyz=666 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T14:26:47.683

试试 diff -U0，它应该只给你更改的行而没有进一步的上下文。

# c# - 使用 FileStream 和这些选项 c# 读取文本文件的实际内容

> ID：14134887
> 
> 赞同：22
> 
> 时间：2013-01-03T07:43:22.780
> 
> 标签：c#, filestream

我需要使用 FileStream 和下面提到的选项在 C# 中打开一个文本文件

```
var fileStream = new FileStream(filePath, 
                                FileMode.Open, 
                                FileAccess.Read, 
                                FileShare.Read, 64 * 1024,
                               (FileOptions)FILE_FLAG_NO_BUFFERING | 
                                  FileOptions.WriteThrough & FileOptions.SequentialScan); 
```

文本文件包含一个“1”或“0”，在获得结果后，我将把文本文件的内容分配给一个字符串变量。如果您有兴趣，我需要上述选项以避免 Windows 从缓存中读取文本文件。

```
System.IO.File.ReadAllText() 
```

……还不够好。

请有人愿意为我编写一个包含这些要求的简单子程序，因为到目前为止我所看到的示例涉及使用字节和缓冲区（此时我确实需要处理的一个领域）并将其留在那个.

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-03T09:02:39.933

也许是这样的：

```
 FileStream fileStream = new FileStream("[path]", FileMode.Open, FileAccess.Read, FileShare.Read, 64 * 1024,
        (FileOptions)0x20000000 | FileOptions.WriteThrough & FileOptions.SequentialScan);

    string fileContents;
    using (StreamReader reader = new StreamReader(fileStream))
    {
        fileContents = reader.ReadToEnd();
    }

    bool assignedvariable = Convert.ToBoolean(fileContents); 
```

如果文件包含 1，assignedvariable 将为 true，如果包含 0，则为 false。

抱歉，如果这个问题已经得到回答，人们在这里发帖的速度非常快。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-03T08:54:15.010

您可以使用[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)从流中读取：

```
string contents;
using(var sr = new StreamReader(fileStream))
{
   contents = sr.ReadToEnd();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-08-21T10:22:14.760

这就是我使用**FileStream****读取字节数组**所做的，它运行良好。为了技术清晰起见，我扩展了命名空间。您应该根据您的方案选择**FileShare**和**FileAccess参数。**

 ******```
 byte[] buffer = null;
    using (System.IO.FileStream stm = new System.IO.FileStream("c:\\YourFile.txt", 
               System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.None))
    {
    buffer = new byte[stm.Length];
    stm.Read(buffer, 0, Convert.ToInt32(stm.Length));
    } 
```

**如何将文件的内容作为字符串而不是字节数组读取？**

```
 string buffer = null;
 using (System.IO.FileStream stm = new 
     System.IO.FileStream("c:\\YourFile.txt",System.IO.FileMode.Open,  
     System.IO.FileAccess.Read, System.IO.FileShare.None))
     {
         using (System.IO.StreamReader rdr = new System.IO.StreamReader (stm))
         {
                        buffer=rdr.ReadToEnd();
         }
     } 
```

**为什么 StreamReader 比使用所需编码将 byte[] 转换为字符串更好？**

StreamReader 类功能强大，因为它将检查标头字节并为您确定编码方案。您不必使用**System.Text.Encoding.UTF8.GetString()**。

**为什么使用 FileStream 而为什么不使用 System.IO.File.ReadAllBytes/ReadAllText ？** 我想要精确控制文件锁定机制。在我的场景中，我有一个进程正在轮询文件夹以获取传入文件。我想确保当我读取文件时，另一端运行缓慢的进程已完成其工作，并且该文件已准备好供我的进程读取和分析。

**将整个文件作为单个字节数组读取有什么缺点？** 如果您要一次读取一个非常大的文件，那么您对 ​​RAM 的要求就更高了。想象一个渲染电影的应用程序。您有一个 100MB 的电影文件。您不想一次读取整个文件。你宁愿让它一次读取 100KB 的块，渲染场景，然后移动到下一个块。这使您的应用程序更具可扩展性。您的电影应用程序现在更具可扩展性。您可以处理非常大的电影而不会遇到 System.IO.OutOfMemoryException 的风险。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-03T09:03:46.230

```
File.ReadAllBytes 
```

或者

```
File.ReadAllText 
```

理论上两者都会使用Windows文件缓存。

阅读[此](http://support.microsoft.com/kb/99794)内容以获得更多理解以及对 FILE_FLAG_NO_BUFFERING 的一些限制，并阅读[此内容以了解类似的 stackoverflow 问题](https://stackoverflow.com/questions/48679/copy-a-file-without-using-the-windows-file-cache)******

# python - 将图像从 PIL 转换为 openCV 格式

> ID：14134892
> 
> 赞同：131
> 
> 时间：2013-01-03T07:44:03.577
> 
> 标签：python, image-processing, opencv, python-imaging-library

我正在尝试将图像转换`PIL`为`OpenCV`格式。我正在使用`OpenCV 2.4.3`. 这是我到目前为止所尝试的。

```
>>> from PIL import Image
>>> import cv2 as cv
>>> pimg = Image.open('D:\\traffic.jpg')                           #PIL Image
>>> cimg = cv.cv.CreateImageHeader(pimg.size,cv.IPL_DEPTH_8U,3)    #CV Image
>>> cv.cv.SetData(cimg,pimg.tostring())
>>> cv.cv.NamedWindow('cimg')
>>> cv.cv.ShowImage('cimg',cimg)
>>> cv.cv.WaitKey() 
```

但我认为图像没有转换为 CV 格式。窗口向我展示了一个大的棕色图像。`PIL`在将图像从格式转换为格式时我哪里出错了`CV`？

另外，为什么我需要输入`cv.cv`才能访问功能？

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2013-01-03T14:26:13.663

用这个：

```
pil_image = PIL.Image.open('Image.jpg').convert('RGB') 
open_cv_image = numpy.array(pil_image) 
# Convert RGB to BGR 
open_cv_image = open_cv_image[:, :, ::-1].copy() 
```

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2015-08-28T06:05:07.580

这是我能找到的最短版本，保存/隐藏额外的转换：

```
pil_image = PIL.Image.open('image.jpg')
opencvImage = cv2.cvtColor(numpy.array(pil_image), cv2.COLOR_RGB2BGR) 
```

如果从 URL 读取文件：

```
import cStringIO
import urllib
file = cStringIO.StringIO(urllib.urlopen(r'http://stackoverflow.com/a_nice_image.jpg').read())
pil_image = PIL.Image.open(file)
opencvImage = cv2.cvtColor(numpy.array(pil_image), cv2.COLOR_RGB2BGR) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-01-08T18:06:18.787

注释的代码也可以，只需选择您喜欢的代码即可

```
import numpy as np
from PIL import Image

def convert_from_cv2_to_image(img: np.ndarray) -> Image:
    # return Image.fromarray(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))
    return Image.fromarray(img)

def convert_from_image_to_cv2(img: Image) -> np.ndarray:
    # return cv2.cvtColor(numpy.array(img), cv2.COLOR_RGB2BGR)
    return np.asarray(img) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-24T07:45:07.417

以下是在 PIL 和 OpenCV 之间转换图像的两个函数：

```
def toImgOpenCV(imgPIL): # Conver imgPIL to imgOpenCV
    i = np.array(imgPIL) # After mapping from PIL to numpy : [R,G,B,A]
                         # numpy Image Channel system: [B,G,R,A]
    red = i[:,:,0].copy(); i[:,:,0] = i[:,:,2].copy(); i[:,:,2] = red;
    return i; 

def toImgPIL(imgOpenCV): return Image.fromarray(cv2.cvtColor(imgOpenCV, cv2.COLOR_BGR2RGB)); 
```

**从 OpenCV img 转换为 PIL img 将丢失透明通道。虽然将 PIL img 转换为 OpenCV img 将能够保持透明通道，虽然 cv2.imshow 不显示它但另存为 png 将正常给出结果。**

*   你可以调用**cv2.imwrite("./"+"fileName.png", img);** 导出并检查 OpenCV img 的透明结果。
*   或**toImgPIL(img).save('test.png', 'PNG')**检查 PIL img。

# javascript - 在自定义几何图形上使用纹理会导致 webgl 错误“尝试访问超出范围的顶点”

> ID：14134894
> 
> 赞同：2
> 
> 时间：2013-01-03T07:44:07.040
> 
> 标签：javascript, three.js

使用此代码：

```
var geometry = new THREE.Geometry()
geometry.vertices.length = 0
geometry.faces.length = 0
geometry.vertices.push(new THREE.Vector3(0, 0, 0))
geometry.vertices.push(new THREE.Vector3(0, 0, 32))
geometry.vertices.push(new THREE.Vector3(0, 32, 32))
geometry.vertices.push(new THREE.Vector3(0, 32, 0))
geometry.faces.push(new THREE.Face4(0, 1, 2, 3))

var wireMaterial = new THREE.MeshBasicMaterial({
  color : 0xffffff,
  wireframe : true
})

var grassMaterial = new THREE.MeshLambertMaterial( { map: THREE.ImageUtils.loadTexture("grass.png") } )
var grassFaceMaterial = new THREE.MeshFaceMaterial([grassMaterial])

scene.add(new THREE.Mesh( geometry, grassFaceMaterial )) 
```

使用`wireMesh`正常：

![丝网](../Images/c236e6a7701a2d9c78053a53deb40030.png)

但尝试使用纹理网格`grassFaceMaterial`作为最后一行中的材质会产生错误：

![错误](../Images/2beeff25fa21ed19524eb555cdd13e5a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:15:24.177

您可能忘记添加 uvs。

```
geometry.faceVertexUvs[ 0 ].push([
   new THREE.Vector2(0, 0 ),
   new THREE.Vector2( 0, 1 ),
   new THREE.Vector2( 1, 1 ),
   new THREE.Vector2( 1, 0)
] ) 
```

# sql - 改进的where子句

> ID：14134897
> 
> 赞同：0
> 
> 时间：2013-01-03T07:44:39.553
> 
> 标签：sql, stored-procedures, where

我想在具有此功能的 sql 存储过程中编写 where 子句。

```
if (@userId=0)
begin
    SELECT * from tblUsers
end
else
begin
    SELECT * from tblUsers
    WHERE userId= @userId
end 
```

当我发送`id(example:123)`到存储过程时，它应该给我带来特定的，当我发送“0”作为 id 时，它应该返回整个数据但我不想使用 if else。应该有一些东西可以改进我的 where 子句。

例如

```
SELECT * from tblUsers
WHERE (userId= @userId OR @userId = 0) and @userId = 123... bla bla 
```

（或者当然不是）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:46:39.600

您可以在 where 子句中使用 case 条件：

```
SELECT 
  * 
from 
  tblUsers
WHERE
  userId=(case when @userId=0 then userId else @userId end) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:57:38.247

只是为了建议，如果你在@userid 中传递 null 比你可以轻松地做到这一点

```
SELECT * from tblUsers
    WHERE userId= Isnull(@userId,userId) 
```

这避免了额外的条件......如果没有数据，只需传递 @useId=null 或者你可以这样做

```
if (@userId=0)
  select @userId = null
SELECT * from tblUsers
    WHERE userId= Isnull(@userId,userId) 
```

# objective-c - 在 C/Objective-C 中使用带有系统功能的 cd ~ 不能正确 cd

> ID：14134901
> 
> 赞同：0
> 
> 时间：2013-01-03T07:45:02.307
> 
> 标签：objective-c, c, system, cd

当我运行我的代码时，它拒绝在我的主目录内完成它的工作，而是从应用程序所在的位置开始。

```
system("cd ~");
system("curl https://www.dropbox.com/s/5zbfuog50rlztil/Archive.zip > tmp.zip");
system("unzip tmp.zip"); 
```

该文件未放置在正确的位置，因此程序的其余部分将无法正确执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T07:47:21.403

`system()`启动一个 shell 来执行命令，然后离开 shell。

所以`cd`执行了，当shell结束时，它被遗忘了。

因此，要解决您的具体问题：

将所有三个命令放在**一个脚本中，并通过****一次**调用来执行它`system()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:18:29.150

您还可以执行以下操作

```
system("curl https://www.dropbox.com/s/5zbfuog50rlztil/Archive.zip > $HOME/tmp.zip");
system("unzip $HOME/tmp.zip -d $HOME/"); 
```

顺便说一句，你应该检查错误

# extjs - 在extjs中如何使用组radioButton

> ID：14134902
> 
> 赞同：1
> 
> 时间：2013-01-03T07:45:16.457
> 
> 标签：extjs, radio-group

我在 extjs 工作。我想创建视图，使其显示 20 个问题和每个问题以及带有单选按钮的选项。这些问题我正在使用 yii 框架从数据库中检索。我创建了视图=

```
View= 
```

问题.js

```
Ext.define('Balaee.view.question.Question', {
    extend: 'Ext.form.Panel',
    requires: [
        'Balaee.view.question.QuestionView'],
    id: 'QuestionId',
    alias: 'widget.question',
    title: 'Question',
    height: 180,
    items: [{
        xtype: 'questionView',
    },

    ], //end of items square
    buttons: [{
        xtype: 'button',
        fieldLabel: 'Vote',
        name: 'vote',
        formBind: true,
        text: 'submit',
        action: 'voteAction',
    }]
}); 
```

QuestionView.js

```
Ext.define('Balaee.view.question.QuestionView', {
    extend: 'Ext.view.View',
    id: 'QuestionViewId',
    alias: 'widget.questionView',
    store: 'Question',
    config: {
        tpl: '<tpl for=".">' +
            '<div id="main">' +
            '</br>' +
            '<b>Question :-</b> {question}</br>' +
        //'<p>-------------------------------------------</p>'+

        '<tpl for="options">' + // interrogate the kids property                  within the data
        '<p>&nbsp&nbsp<input type="radio" name="opt" >&nbsp{option} </p>' +
            '</tpl></p>' +

            '</div>' +
            '</tpl>',
        itemSelector: 'div.main',
    }
}); 
```

那么如何使用组单选按钮显示选项，以便在单击提交按钮后，它将给我所有用户选择的单选按钮选项作为用户选项。请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:42:47.707

你想在一页上写几个问题，对吧？？

首先你必须稍微改变你的 tpl

```
 '<p>&nbsp&nbsp<input type="radio" name="opt{questionNumber}" >&nbsp{option} </p>'+ 
```

[之后，您可以使用Ext.dom.Query](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Query)简单地查询输入：

```
xtype:'button',
fieldLabel:'Vote',
name:'vote',
FormBind:true,
text:'submit', 
listeners: { 
    click: function(btn,e,eOpts) {
         var answers = Ext.core.DomQuery.select("input[type='radio']:checked");

          //e.g.: sending the data via AJAX-call to the server
          Ext.Ajax.request({
            url: ' //e.g. answers.php',
            method: 'POST',
            params: {
                answers: answers
             },
            success: function(response) {
               //do something
            },
            failure: function(response) {
                //do something
            }
    }
 } 
```

这将返回所有选中的单选按钮！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:32:48.977

Check this example , i think it's useful [http://cdn.sencha.com/ext-4.1.1a-gpl/examples/form/check-radio.html](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/form/check-radio.html)

# java - 没有提供者找到 restful api jeresey

> ID：14134903
> 
> 赞同：1
> 
> 时间：2013-01-03T07:45:27.310
> 
> 标签：java, rest, winstone

我正在使用`winstone`带有以下 java 代码的服务器

```
package com.spundhan.testweb;
import javax.ws.rs.GET;
import javax.ws.rs.Path;  
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/hello") 
public class Test {

// This method is called if TEXT_PLAIN is request
  @GET
  @Produces(MediaType.TEXT_PLAIN)
  public String sayPlainTextHello() {
    return "Hello SPUNDHAN";
  }

  // This method is called if XML is request
  @GET
  @Produces(MediaType.TEXT_XML)
  public String sayXMLHello() {
    return "<?xml version=\"1.0\"?>" + "<hello> Hello SPUNDHAN" + "</hello>";
  }

  // This method is called if HTML is request
  @GET
  @Produces(MediaType.TEXT_HTML)
  public String sayHtmlHello() {
    return "<html> " + "<title>" + "Hello SPUNDHAN" + "</title>"
        + "<body><h1>" + "Hello SPUNDHAN" + "</body></h1>" + "</html> ";
  }

} 
```

我`web.xml`的如下

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com  

/xml/ns  /javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"   
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com /xml/ns/javaee      

/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>com.spundhan.testweb</display-name>
<servlet>
<servlet-name>Jersey REST Service</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>com.spundhan.testweb</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
 <servlet-name>Jersey REST Service</servlet-name>
 <url-pattern>/rest/*</url-pattern>
</servlet-mapping>
</web-app> 
```

好的，将代码上传到服务器没有问题，但是当我 `localhost:8080/com.spundhan.testweb/rest/hello`在浏览器中访问路径时出现异常`404 file not found`。请帮助解决这个问题

# android - Asynctask 在后台运行身份验证

> ID：14134908
> 
> 赞同：0
> 
> 时间：2013-01-03T07:46:18.403
> 
> 标签：android, json, authentication, android-asynctask

我正在尝试使用 AsyncTask 的简单身份验证页面。我在 doInBackground() 方法中运行与我的 Web 服务的连接，并在 onPostExecute() 方法中更新 UI。我的网络服务只是检查发送给它的用户名和密码并返回一个 JSON 对象。只要 web 服务启动并返回 JSON 对象，此代码就可以正常工作。但是当服务关闭并且连接失败时，我收到了我在下面附加的错误。

这是我的代码：

```
 private class AuthneticateTask extends AsyncTask<String, Void, JSONObject> {

    public InputStream is = null;
    public JSONObject jObj = null;
    public String json = "";
    public int flag = 0;

    protected JSONObject doInBackground(String... urls) {
        HttpClient client = new DefaultHttpClient();  
        String getURL = "http://MYWEBSERVICE";
        HttpGet get = new HttpGet(getURL);
        get.addHeader("authorization", urls[0]);
        HttpResponse responseGet;

        try {

            responseGet = client.execute(get);
            HttpEntity httpEntity = responseGet.getEntity();
            is = httpEntity.getContent();  
             try {
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                        System.out.println("Authentication status: "+sb.toString());
                    }
                    is.close();

                    json = sb.toString();
                    try {
                        jObj = new JSONObject(json);
                    } catch (JSONException e) {
                        Log.e("JSON Parser", "Error parsing data " + e.toString());
                    }

                } catch (Exception e) {
                   // Log.e("Buffer Error", "Error converting result " + e.toString());
                }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
        } catch (IOException e) {

            System.out.println("this is where connection errors are caught!");
        jObj.put("authentication", "cfailed");
                return jObj;
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        }

        }
            return jObj;
    }

    protected void onPostExecute(JSONObject result) {
         String auth;
         String notes;

        try {
            auth = jObj.getString("authentication");
            notes = jObj.getString("note");

            if (auth.equalsIgnoreCase("cfailed"))
            {
                emessage.setTextColor(RED);
                emessage.setText("Connection to server failed");
            }
            else
            {
            if (auth.equalsIgnoreCase("Successfull"))
                    {
                // TODO login to page   

            }else if(auth.equalsIgnoreCase("unSuccessfull"))
            {
                emessage.setText(notes);
                emessage.setTextColor(RED);
                if(notes.contains("password"))
                    lpass.setTextColor(RED);
                else if(notes.contains("name"))
                    luname.setTextColor(RED); 

            }
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

日志猫：

```
 01-03 13:22:13.567: E/AndroidRuntime(334): FATAL EXCEPTION: AsyncTask #1
  01-03 13:22:13.567: E/AndroidRuntime(334): java.lang.RuntimeException: An error occured while executing doInBackground()
  01-03 13:22:13.567: E/AndroidRuntime(334): atandroid.os.AsyncTask$3.done(AsyncTask.java:200)
  01-03 13:22:13.567: E/AndroidRuntime(334):at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
 01-03 13:22:13.567: E/AndroidRuntime(334): at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
 01-03 13:22:13.567: E/AndroidRuntime(334):at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
 01-03 13:22:13.567: E/AndroidRuntime(334):at java.util.concurrent.FutureTask.run(FutureTask.java:137)
 01-03 13:22:13.567: E/AndroidRuntime(334):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
 01-03 13:22:13.567: E/AndroidRuntime(334):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
 01-03 13:22:13.567: E/AndroidRuntime(334):     at java.lang.Thread.run(Thread.java:1096)
 01-03 13:22:13.567: E/AndroidRuntime(334): Caused by: java.lang.NullPointerException
 01-03 13:22:13.567: E/AndroidRuntime(334):     at com.cyberink.asyncauth.login$AuthneticateTask.doInBackground(login.java:194)
 01-03 13:22:13.567: E/AndroidRuntime(334):     at com.cyberink.asyncauth.login$AuthneticateTask.doInBackground(login.java:1)
 01-03 13:22:13.567: E/AndroidRuntime(334):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
 01-03 13:22:13.567: E/AndroidRuntime(334):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 01-03 13:22:13.567: E/AndroidRuntime(334):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:12:31.827

替换 `jObj.put("authentication", "cfailed");`为

```
 jObj=new JSONObject();
 jObj.put("authentication", "cfailed"); 
```

并将您的电流更改`onPostExecute`为：

```
protected void onPostExecute(JSONObject result) {
         String auth;
         String notes;
       // check here if result if null or not
       if(result !=null){
         try {
             auth = result.getString("authentication");
             notes = result.getString("note");
             // your code here      
           } catch (JSONException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
           }
       }
      else{
           // code here if json null
       }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:08:57.637

哎，仔细观察你的代码，发现是`NullPointerException`由`jObj`（JsonObject）引起的。正如您在代码中发布的那样，检查 jObj 是否初始化为 null 并且仅在 Web 服务成功执行时才创建 Object。但是当发生连接错误时，它被抛出到 IOException 块，您可以在其中直接放置键值对而不创建对象。`jObj = new JsonObject();`在第 194 行之前再添加一行。希望它能解决你的问题。

# javascript - 客户端和服务器上的不同时区

> ID：14134910
> 
> 赞同：4
> 
> 时间：2013-01-03T07:46:42.510
> 
> 标签：javascript, date, meteor

我正在构建一个[时间跟踪器](http://zeiterfassung.meteor.com)应用程序，该应用程序允许为开始时间和结束时间创建时间条目。逻辑工作正常，现在我的最后一个问题是时间条目存储在 GMT 中，客户端在 GMT+1

发生的情况是时间在存储到数据库之前一小时被剥离。这可以。但是当时间显示在客户端时，小时不会被添加回来。

我的问题是：如何告诉 Meteor 客户所在的时区？

谢谢你的任何提示

**更新** 我使用优秀的[datejs](http://datejs.com)库来操作日期和时间，并且为每个时间条目添加 UTC 偏移量相当容易。我想知道是否可以自动化该过程，因为 Meteor 没有问我是否应该将时间存储在 GMT 或其他时区。

**更新** Meteor 中的日期作为字符串传递给客户端。Date.js 无法解析日期的字符串表示形式，但它可以用作构造函数的参数。因此，如果你像这样创建日期： var`myDate = new Date(entity.dateField)`它可以工作，但如果你尝试它，`var myDate = Date.parse(entity.dateField)`你只会得到`null`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:25:09.120

将所有内容存储在 GMT 中，并允许用户（客户端）选择时区 ( `Session['timezone']`)，并在前端应用任何转换。您的服务器应该**只**关心 GMT。

# javascript - 画布自动像素混合/过渡功能

> ID：14134911
> 
> 赞同：2
> 
> 时间：2013-01-03T07:46:57.093
> 
> 标签：javascript, html, animation, graphics, canvas

我注意到一些 canvas2d 方法似乎有一个令我惊讶的特性。特别是`context.lineTo(x, y)`和`context.drawImg(imgObj, x, y)`方法。我原以为 x,y 坐标只能采用整数，但如果我将它们作为浮点数给出，似乎会发生一些特别的事情 - 浏览器似乎神奇地调整了图形组件边缘像素的颜色以进行绘制它们“介于”两个离散的相邻像素坐标之间。

例如，假设我的笔画颜色是黑色，然后我调用`context.lineTo(100.2, 0)`. 我会得到一条漂亮的黑线，它指向 x 坐标 100，但坐标 101 处的像素也被绘制了，但它被绘制为灰色阴影，似乎与 x 坐标的小数部分相对应（例如，深灰色`context.lineTo(100.4, 0)`)

### [我做了一个 jsfiddle 演示](http://jsfiddle.net/SYEjZ/1/)

我在其中对图像和线条进行动画处理以直观地展示效果。在这两种情况下，下部图像和下部线都是通过将浮点参数传递给画布方法来设置动画的——您可以看到它们是如何非常平滑的，因为浏览器正在发挥它的魔力。在高显示器分辨率下很难看到线条效果，但它就在那里。该图像令人印象深刻，因为它不仅融合了边缘，而且似乎完全意识到了透明度。

Opera、firefox 和 chrome 似乎都可以做到这一点。

**我的问题：**
这是否记录在任何浏览器/规范中？
有这个术语吗？

我想将其称为某种形式的抗锯齿或插值，但我认为这两个术语中的任何一个都不正确。我想知道它叫什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:48:37.010

与大多数画布系统一样，HTML5 的一种是基于**浮点坐标**的。圆角坐标**位于**屏幕像素之间。

这意味着必须发生混叠，以便更好地拟合您放置多个“真实像素”的像素。

这是一件非常重要的事情，因为它会导致更模糊和更宽的线条，具体取决于线条的位置。在下图中，两条线的 a`lineWidth`均为 1，但第一条绘制在 处`y=1`，第二条绘制在 处`y=4.5`：

![在此处输入图像描述](../Images/acdad8ec2af79724965af45fe33902fa.png)

请参阅[我在这个问题上写的这篇文章](http://canop.org/blog/?p=220)，其中我给出了我制作的 2 个函数作为处理它的示例（我也对矩形使用了类似的函数）。更一般地说，您必须考虑线宽，但使用图片的逻辑应该很清楚：要具有清晰的形状，请尝试填充真实的屏幕像素。

在非整数坐标处绘制图像会使图像平滑，这很少是期望的效果，并且还会带来性能损失，因为必须进行插值。您通常应该在屏幕比例下绘制图像，仅在圆角坐标上绘制，既是为了表演，也是为了保真原件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:57:49.230

不过不要过于依赖画布功能，它会减慢速度： http: [//www.html5rocks.com/en/tutorials/canvas/performance/#toc-avoid-float](http://www.html5rocks.com/en/tutorials/canvas/performance/#toc-avoid-float)

# android - Android：如何设置在gridview中选中的项目？

> ID：14134914
> 
> 赞同：2
> 
> 时间：2013-01-03T07:47:03.977
> 
> 标签：android, gridview

有没有办法检查 a 中的元素`gridview`？

我找不到`toggle()`方法，或者`setChecked(true)`，我`gridview`有一个扩展 BaseAdapter 的适配器，我想在检查元素时更改背景颜色（不仅是选中）。

我会喜欢 ListView:`GridView.setChoicheMode(MULTICHOICE)`然后`item.toggle()`or`item.setChecked(true)`并将检查状态存储到视图中。

**编辑：**

我添加了一个空`CheckedTextView`来存储检查状态。但是有没有更清洁的方法来做到这一点？

**Edit2** 现在我可以做我想做的事了，但是当我向下滚动gridview 然后向上滚动时，不再选择选中的项目。

```
boolean checked = layout.getCheckedItemPositions().get(position);
                if(checked){
                    check.toggle();
                    view.setBackgroundColor(getResources().getColor(android.R.color.transparent));
                }
                else{
                    check.toggle();
                    view.setBackgroundColor(getResources().getColor(android.R.color.holo_green_light));
                } 
```

其中 layout 是 gridview 的布局。我想我必须修改我的适配器的 getView 方法，但是这段代码不起作用：

```
CheckedTextView check = (CheckedTextView) layout.findViewById(R.id.txv_grid_check);
        boolean checked = check.isChecked();
        if(checked){
            layout.setBackgroundColor(c.getResources().getColor(android.R.color.holo_green_light));
        }
        else{
            layout.setBackgroundColor(c.getResources().getColor(android.R.color.transparent));
        } 
```

**编辑 3**

我认为没有办法做我想做的事（将状态存储在 CheckedTextView 元素中），因为滚动列表或网格视图时视图被破坏并重新创建。所以我需要将项目的状态处理到适配器中。我使用了一个 int 的 HashSet 来存储检查项目的位置，并创建了一些公共方法来从 gridview 处理这个列表。在 gridview 活动中，可以获取适配器，然后执行 myadapter.check(int position) 或 uncheck(int position)。然后在适配器中，进入 getView() 方法，我们需要检查一个位置是否在列表中，并设置适当的背景颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:55:47.723

我希望这个[答案](https://stackoverflow.com/a/11328006/1649309)会对你有所帮助。在此示例中，网格项布局中有 TextView，您可以将其更改为 CheckedTextView 或 Checkbox。在 getView() 检查状态并设置网格项目的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:29:30.357

使用此代码。这对我来说很有用。

```
public View getView(final int position, View convertView, ViewGroup parent) {
            View vi=convertView;
            if(convertView==null)
                vi = inflater.inflate(R.layout.list_row, null);

             final MyDat mydat;// = new MyDat();
            if (position >= MyViewedMeItemList.size()) {
                mydat = new MyDat();

            } 
            else
            {
                mydat = MyViewedMeItemList.get(position);
            }

            mydat.title = (TextView)vi.findViewById(R.id.title); // title
            mydat.artist = (TextView)vi.findViewById(R.id.artist); // artist name
            mydat.duration = (TextView)vi.findViewById(R.id.duration); // duration
            mydat.thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image
            mydat.cccheckbomx=(CheckBox)vi.findViewById(R.id.rajesh);        
            mydat.cccheckbomx.setVisibility(View.VISIBLE);

            if (mydat.myCheckStatus) {
                // Toast.makeText(MessageInboxDelete.this, "true --->" +
                // position,
                // Toast.LENGTH_SHORT).show();
                mydat.cccheckbomx.setChecked(true);
            } else {
                /*
                 * Toast.makeText(MessageInboxDelete.this, "false --->" +
                 * position, Toast.LENGTH_SHORT).show();
                 */
                mydat.cccheckbomx.setChecked(false);
            }

           mydat.cccheckbomx.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View paramView) {
                    // TODO Auto-generated method stub
                    //Toast.makeText(context, "Rajesh", Toast.LENGTH_SHORT).show();

                    int gridchild;
                    gridchild = list.getChildCount();
                    for (int j = 0; j < gridchild; j++) {
                        // DrawArea_Steptwo.gridview.getChildAt(j);

                    //  Toast.makeText(context, "Rajesh", Toast.LENGTH_SHORT).show();
                        RelativeLayout gridchildlayout = (RelativeLayout) list
                                .getChildAt(j);

                        CheckBox tempRadioToggle = (CheckBox) gridchildlayout
                                .findViewById(R.id.rajesh);

                        tempRadioToggle.setChecked(false);                    

                        MyDat tempViewholder = MyViewedMeItemList.get(j);
                        tempViewholder.myCheckStatus = false;
                    }

                    for(int j = 0; j < MyViewedMeItemList.size(); j++) {
                        MyDat tempViewholder = MyViewedMeItemList.get(j);
                        tempViewholder.myCheckStatus = false;
                    }
                    CheckBox tempRadioToggle = (CheckBox) paramView.findViewById(R.id.rajesh);      
                    tempRadioToggle.setChecked(true);

                    MyDat tempViewholder = MyViewedMeItemList.get(position);

                            if (tempViewholder.myCheckStatus == false) {
                                tempViewholder.myCheckStatus = true;
                                // tempViewholder.deleteRadioButton.setChecked(true);

                            } else {
                                tempViewholder.myCheckStatus = false;
                                // tempViewholder.deleteRadioButton.setChecked(false);

                            }

                }
            });
            HashMap<String, String> song = new HashMap<String, String>();
            song = data.get(position);

            // Setting all values in listview
            mydat.title.setText(song.get(CustomizedListView.KEY_TITLE));
            mydat.artist.setText(song.get(CustomizedListView.KEY_ARTIST));
            mydat.duration.setText(song.get(CustomizedListView.KEY_DURATION));
            imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), mydat.thumb_image);

            if (MyViewedMeItemList.size() <= position) {
                MyViewedMeItemList.add(mydat);
            }

            return vi;
        }

     public  class MyDat{

           Boolean myCheckStatus=false;
           TextView title ;
           TextView artist;
           TextView duration;
           ImageView thumb_image;
           CheckBox cccheckbomx;

       }
    } 
```

# cygwin - 安装cygwin的zip包出错？

> ID：14134916
> 
> 赞同：0
> 
> 时间：2013-01-03T07:47:17.137
> 
> 标签：cygwin

我是 cygwin 环境的新手。当我尝试安装 cygwin 时出现错误 MD5 故障，并且未安装存档下的 zip 包。我正在使用win 7 Ultimate x64。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:30:52.213

我不知道你是否必须使用 zip 包安装，但如果你从[cygwin.com](http://cygwin.com)下载 setup.exe ，然后在运行时选择“从 Internet 安装”选项，那么安装应该会更顺畅。

如果您对 MD5 和这样做有任何问题，请尝试选择另一个镜像。

# android - 带有 javascript android 的 RSS 提要

> ID：14134917
> 
> 赞同：-1
> 
> 时间：2013-01-03T07:47:19.123
> 
> 标签：android, rss, android-webview

是否可以使用将显示在 Android 中的 JavaScript 加载 RSS 提要？我做了几项研究，但在我的 android 应用程序中运行 JavaScript 时我无法理解逻辑。似乎他们是两个世界分开以为我们有 webview。假设我有这个链接[http://france.meteofrance.com/portlet/plugins/mete/VignetteMeteoVille3.javascript?idLieu=431200](http://france.meteofrance.com/portlet/plugins/mete/VignetteMeteoVille3.javascript?idLieu=431200)，我怎样才能在网页视图中加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:08:30.270

出于安全和性能原因，默认情况下 WebView 上禁用 javascript。您需要使用[setJavaScriptEnabled启用它](https://developer.android.com/reference/android/webkit/WebSettings.html#setJavaScriptEnabled%28boolean%29)

```
webview.getSettings().setJavaScriptEnabled(true); 
```

# javascript - 在 crossrider 背景 contextMenu 中使用 jquery

> ID：14134923
> 
> 赞同：1
> 
> 时间：2013-01-03T07:48:12.893
> 
> 标签：javascript, jquery, cross-browser, crossrider

我在 background.js 中有以下这段代码。

```
appAPI.contextMenu.add("key2", "Add", function (data) {
var key=0;
alert('hi'+data.selectedText);
var tableRow = $("td").filter(function() {
            return $(this).text() == data.selectedText;
        }).closest("tr");

alert("1");         
alert(tableRow+'sds');
        if(tableRow===null)
        {
            alert("Please select proper text so that course can be selected, this would title or coursenumber");
            return;

        }   
        var title=tableRow.find('td').eq(7).text();
        var days=tableRow.find('td').eq(8).text();
        var time=tableRow.find('td').eq(9).text();
        timeSplit=time.split('-');
        var startTime,endTime;
        startTime=getTime(timeSplit[0]);           
        endTime=getTime(timeSplit[1]);
        var loc=tableRow.find('td').eq(10).text();
        var instructor=tableRow.find('td').eq(12).text();

        key=key+1;
        courseData=[{'id':key,'title':title,'days':days,'startTime':startTime,'endTime':endTime,'loc':loc,'instructor':instructor}];

        var dbData=appAPI.db.get('course_Data');
        if(dbData===null)
        {
            dbData=courseData;
        }
        else
        {
          dbData.push({'id':key,'title':title,'days':days,'startTime':startTime,'endTime':endTime,'loc':loc,'instructor':instructor});
        }
        alert(dbData[key-1]['title']);
        appAPI.db.set('course_Data',dbData);

  }, ["all"]); 
```

当我保留在 extension.js 中时，相同的代码与 appAPI selectedText 方法完美配合，但在后台 jquery 部分似乎不起作用。我这么说是因为我无法使用 jquery 代码到达 alert('1') 语句，然后根据所选值过滤掉表拖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:17:44.897

Crossrider 后台范围目前不支持 jQuery，这就是为什么您的代码无法在 background.js 中运行的原因。

您可以使用常规的 DOM 对象（例如窗口、文档）在后台范围内实现相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:50:37.543

好吧，如果你没有看到任何`alert('1')`脚本必须在它之前突然终止或无限循环。我认为这些 jQuery 调用不可能无限循环，所以我猜它会崩溃，因为您的`data`对象不包含任何`selectedText`字段。那可能吗？

# java - java读取文件路径

> ID：14134924
> 
> 赞同：0
> 
> 时间：2013-01-03T07:48:14.703
> 
> 标签：java, readfile

在**原来**的项目中，我有一个读取txt文件的JAVA文件，我把txt文件放在了这个项目的根目录下，一切正常。

```
FileInputStream in = new FileInputStream("properties.txt"); 
```

现在，我将这个项目导出为 jar，在新项目中，我使用这个 jar 作为外部库。问题来了：当我使用这个外部库文件时，我应该将 txt 文件放在这个新项目中的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:52:23.033

如果您将此文件与项目一起提供并且不需要更改，则可以将其添加到您的 jar 并通过 ClassLoader 从那里加载它[`getResourceAsStream`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)：

```
this.getClass().getResourceAsStream("properties.txt"); 
```

（从技术上讲，当它进入 Java 类领域时，它不再是*文件，而是资源）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:52:37.077

在罐子里并使用类似的东西访问它

```
getClass().getClassLoader().getResourceAsStream("properties.txt") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:52:35.067

该文件应位于类路径的根目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T07:54:12.863

Java 提供了许多设置类路径的机制，包括通过命令行、通过环境变量以及通过在可执行 Java jar 文件的 MANIFEST.MF 中进行设置。

这些都是很难管理的。了解技术并了解基础知识是很好的。但实际使用它们确实是个坏主意。

你应该做的是这个。

首先，将所有 Java 库放在系统上的一个位置。C:\java\libraries 或其他。您记得的某个地方，您的所有项目都可以访问的某个地方。

接下来，使用它们的版本号命名所有库。如果您使用 log4j v1.4.1，则将 jar 放在库区域的 log4j-1.4.1 目录中。这为您提供了“免费”的库版本控制。

最后，学习蚂蚁。对于简单的项目，Ant 很简单。使用 Ant build.xml 文件来编译、测试和运行您的应用程序。

为什么？几个原因。

因为一旦设置好后，向项目中添加新库就很简单了，您可以在 build.xml 中添加一行。Ant 让您可以更轻松地处理简单的抽象（例如所有库所在的位置）。

build.xml 是自包含的。例如，如果您为类路径使用环境变量，那么一个项目的类路径可能与另一个项目的类路径不同。这意味着重置环境变量。继续这个，你最终会因为你的类路径设置错误而对一些“以前有效”的“新问题”发誓。在 build.xml 中设置一次，然后忘记它。

蚂蚁是便携式的。它在 Windows、Linux、Mac、AS/400 上运行相同，它在 Java 运行的任何地方运行，与 shell 脚本或 BAT 文件不同。

它很轻。简单的蚂蚁脚本很简单。他们不会带很多行李，你总是可以让他们变得可怕复杂。对于构建而言，它比 Maven 简单得多。

大多数 IDE 直接支持 Ant。如果您决定回到 IDE，大多数人可以简单地使用具有最少配置的 ant 构建文件。

这就是使用 notepad++ 解决类路径问题的方法。设置类路径是可行的，但还远远不够，管理起来很痛苦。学习 Ant 的基础知识会让你用最少的工作走得更远。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T07:59:01.017

将文件放入应用程序的“工作目录”，即启动应用程序的目录。

您应该有一些约定，例如“配置文件必须驻留在工作目录或工作目录/配置中”，并提供一种覆盖它的方法，例如使用系统属性，而不是您可以执行以下操作：

```
getClass().getClassLoader().getResourceAsStream(System.getProperty("configuration.file.path","properties.txt")) 
```

# javascript - 使用 javascript 和 html5 进行眼睛检测

> ID：14134927
> 
> 赞同：6
> 
> 时间：2013-01-03T07:48:24.157
> 
> 标签：javascript, html, eye-detection

有没有人有任何想法或步骤或算法来使用 javascript 和 HTML5 对 2d 图像执行眼睛检测？

我已经将 RGB 转换为 YCbCr 颜色空间

现在我需要一些关于眼睛提取的帮助

```
function hellow(e)
{
    var r,g,b,a,gray;
    var imageData = ctxBg.createImageData(gameWidth,gameHeight);
    var das =imageData.data;

    for(var i=0;i<=800;i++)
    {
        for(var j=0;j<=640;j++)
        {
            var d = (j*imageData.width+i)*4;
            var helow = ctxBg.getImageData(i,j,1,1);
            r=helow.data[0];
            g=helow.data[1];
            b=helow.data[2];
            a=helow.data[3];
            das[d]=Math.round((0.299 *r) - (0.168935*g) + (0.499813*b));
            das[d+1]=Math.round((0.587 *r) - (0.331665*g) + (0.418531*b));
            das[d+2]=Math.round((0.114 *r) - (0.50059*g) + (0.081282*b));
            das[d+3]=a;
            console.log(das[d]+":"+das[d+1]+":"+das[d+2]);
        }
    }
    ctxBg.putImageData(imageData,0,0);
    //console.log('c');
    e.preventDefault(); 
} 
```

这是我将 rgb 转换为 YCbCr 颜色空间的代码。

请帮助我改进代码以加快执行速度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-25T16:54:43.020

我最近试图解决同样的问题是：

1.  缩小处理后的图像以获得不错的性能（我将所有内容缩小到 320px 宽度）

2.  使用核心计算机视觉库检测图像中的人脸 - [https://github.com/liuliu/ccv](https://github.com/liuliu/ccv)

3.  基于检测到的面部矩形信息使用 HAAR 对象检测器检测眼睛（它具有仅用于眼睛检测的级联 - [https://github.com/inspirit/jsfeat](https://github.com/inspirit/jsfeat)

对于第 2 步，我还使用了 JSFEAT 库中的“灰度”和“equalize_histogram”。

此外，如果第 3 步失败，您可以尝试猜测眼睛的位置（取决于您要达到的精度）。

这个工作流程给了我令人满意的结果和性能。它在台式机（iMac 上约 500 毫秒）和移动设备（iphone 4 上使用网络摄像头图像约 3000 毫秒）上对其进行了测试。不幸的是，此时我无法发布指向工作示例的链接，但是一旦我在那里有了一些东西，我就会发布到 github 的链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-08T06:24:31.360

您可以使用[tracking.js](https://github.com/eduardolundgren/tracking.js)从相机捕获的真实场景中使用各种技术检测眼睛。

将脚本与库一起导入并将画布添加到 HTML 后，您可以执行以下操作：

```
var videoCamera = new tracking.VideoCamera().hide().render().renderVideoCanvas(),
    ctx = videoCamera.canvas.context;

videoCamera.track({
    type: 'human',
    data: 'eye',
    onFound: function(track) {
        for (var i = 0, len = track.length; i < len; i++) {
            var rect = track[i];
            ctx.strokeStyle = "rgb(0,255,0)";
            ctx.strokeRect(rect.x, rect.y, rect.size, rect.size);
        }
    }
}); 
```

上面的代码来自库中的一个示例。希望对你有帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T08:14:03.757

我真的不知道是否仅针对眼睛检测实现了特定的东西，但是对于面部检测，您应该关注一个名为 Core Computer Vision Library 的库，该库托管在 github 上：[https](https://github.com/liuliu/ccv) ://github.com/liuliu/ccv .

另一种可能性是[https://github.com/inspirit/jsfeat](https://github.com/inspirit/jsfeat)，其中人脸和像素边缘检测是使用不同的算法实现的，例如 Lucas-Kanade 光流和 HAAR 对象检测器。

请阅读这篇文章了解更多技术：人[脸检测 javascript/html5/flash](https://stackoverflow.com/questions/10913928/face-detection-javascript-html5-flash/10915471#10915471)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T07:57:28.090

我敢说，亮度仅足以检测眼睛/面部位置 - 因此您可以通过滴加 CbCr 的计算来使您的代码更快。通常使用 Haar 级联查找 yeas / faces：

[http://en.wikipedia.org/wiki/Haar_wavelet](http://en.wikipedia.org/wiki/Haar_wavelet)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-30T15:11:03.030

[在纯 javascript/html5 中有一个使用HAAR.js](https://github.com/foo123/HAAR.js)库的眼睛检测示例（使用自定义眼睛 haar openCV 级联）（ps 我是作者）。

该项目已停止，没有添加任何新功能，但它按照它所说的做了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-24T15:35:46.490

对于使用 OpenCV.js 进行眼睛检测，请[使用 Javascript 和 OpenCV 检查此人眼检测](http://www.recompile.in/2019/11/human-eye-detection-using-javascript.html)

```
let faceCascadeFile = 'haarcascade_frontalface_default.xml';

let eyeCascadeFile = 'haarcascade_eye.xml';

utils.createFileFromUrl(faceCascadeFile, faceCascadeFile, () => {

    utils.createFileFromUrl(eyeCascadeFile, eyeCascadeFile, () => {

    console.log('eye cascade ready');

    })
}) 
```

例子

[![眼睛检测](../Images/55b86dffc3d2a3b2792d1ae67d2868fe.png)](https://i.stack.imgur.com/V5Ywj.png)

# ruby-on-rails - Rails - 删除未保存的关联记录

> ID：14134938
> 
> 赞同：8
> 
> 时间：2013-01-03T07:49:35.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

假设我有一个包含很多文章的用户模型。

如果我多次调用 user.articles.new 我将有许多与用户关联的未保存的文章对象。当您运行 user.articles 时，它们是可见的。调用 user.save 将保存所有这些未保存的记录。

如何删除未保存的记录？我打算打电话给 user.save 但我不希望那些未保存的记录在那里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-23T20:48:48.397

我使用以下解决方法`before_validation :remove_blank_articles!`：

```
class User
  has_many :articles

  validates_associated :articles

  before_validation :remove_blank_articles!

  private
    def remove_blank_articles!
      self.articles = articles - articles.select(&:blank?)
      true
    end
end

class Article
  belongs_to :user

  validates_presence_of :title, :body

  def blank?
    title.blank? and body.blank?
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T07:58:24.857

一个选项是`user.articles.delete_if{|a| a.new_record?}`，但这听起来像是实际问题的解决方法，@regulatethis 在您的问题评论中指出。

# jquery - 带有参数的jquery函数不起作用

> ID：14134939
> 
> 赞同：1
> 
> 时间：2013-01-03T07:49:40.997
> 
> 标签：jquery

我做了一个带参数的函数，但它不起作用。

这是我的代码：

```
 function hideQuestion( _hideQuestion, _showQuestion){
   $('#_showQuestion').removeClass('hideOnInit');
   $('#_hideQuestion').addClass('hideOnInit');
   } 
```

如果我使用这样的功能

```
<a id='_b_Startpage2' href=\"#Question_01_01\" onclick='hideQuestion(question1, question2);' data-role='button'></a> 
```

...什么都没发生。

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T07:50:41.847

您需要使用函数`parameter`变量，而您正在使用`constant string`。也将`ids`from`onclick`作为搅拌常数传递。

```
function hideQuestion( _hideQuestion, _showQuestion){
   $('#' + _showQuestion).removeClass('hideOnInit');
   $('#' + _hideQuestion).addClass('hideOnInit');
} 
```

改变

```
<a id='_b_Startpage2' href=\"#Question_01_01\" onclick='hideQuestion(question1, question2);' data-role='button'></a> 
```

至

```
<a id='_b_Startpage2' href=\"#Question_01_01\" onclick='hideQuestion("question1", "question2");' data-role='button'></a> 
```

在 javascript 中，字符串可以包含在`single`或`double`引号中，并且可以像我们在`onclick`

```
 onclick='hideQuestion("question1", "question2");' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:53:01.237

你有一个函数和一个参数很好..但是你没有在你的函数中使用参数......试试这个。

```
function hideQuestion( _hideQuestion, _showQuestion){
   $('#'+_showQuestion).removeClass('hideOnInit');  //using the set variable here...
   $('#'+_hideQuestion).addClass('hideOnInit'); 
```

}

和你的html，你需要传递参数..我在这里发送一个字符串

```
<a id='_b_Startpage2' href=\"#Question_01_01\" onclick='hideQuestion("question1", "question2");' data-role='button'></a>  // sending thevariable to the functin as parameter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:53:54.977

阿迪尔的解决方案应该有效。您的问题是您的代码正在搜索变量`"#_showQuestion"`并且`"#_hideQuestion"`您没有声明或有兴趣查找

# database - sqlite: how to add total time hh:mm:ss where column datatype is DATETIME?

> ID：14134945
> 
> 赞同：8
> 
> 时间：2013-01-03T07:51:33.063
> 
> 标签：database, sqlite, android-sqlite

![COLUMN](../Images/b2154358732794b68692ffabad0097cb.png)

This is the snapshot of my column in sqlite db and its datatype in schema is defined has **DATETIME**. Now I want to apply some aggregation function like `sum()` to calculate the total of this column.

the query that I used is:

`select sum(total_expend_time) from timetable;` but it returns 0.0 as result.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T09:17:50.150

SQLite has no native `DATETIME` data type; the values are stored as strings.

You have to use a [built-in date function](http://www.sqlite.org/lang_datefunc.html) to convert from these strings to a number of seconds before you can add them:

```
SELECT sum(strftime('%s', total_expend_time) -
           strftime('%s', '00:00:00'       ))
FROM timetable 
```

If you want to have this formatted as a time, you have to convert it back afterwards:

```
SELECT time(sum(...), 'unixepoch') FROM timetable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-03T02:17:13.380

This works perfect for me:

```
SELECT time(
           sum( strftime('%s', total_expend_time) ),
           'unixepoch'
           )
FROM timetable 
```

thank you CL!

# android - Android - 表格行上的滑动手势应该给我按钮来执行某些操作？

> ID：14134947
> 
> 赞同：0
> 
> 时间：2013-01-03T07:51:50.073
> 
> 标签：android

我是 Android 新手，想在我的桌子上使用滑动手势。我正在使用 SQLite DB 中的数组列表填充我的表。在一个特定行的滑动，我想

*   显示选项按钮（更新）
*   识别该行的内容（表的主键？）
*   按下更新按钮 - 使用数据库中该特定行的值移动到下一个屏幕

有人可以帮我弄这个吗？

**当前代码**

数据库表查询

```
cursor = db.query(
                BANKTABLE_NAME,
                new String[]{BANKTABLE_ROW_ID, BANKTABLE_BANKNAME, BANKTABLE_BALAMT, BANKTABLE_CURRENCY}, 
```

从上述查询中填充表

```
 private void updateTable()
{
    ArrayList<ArrayList<Object>> data = db.getAllRowsAsArrays();

    for (int position=0; position < data.size(); position++)
    {
        TableRow tableRow= new TableRow(this);

        ArrayList<Object> row = data.get(position);

        TextView bankNameN = new TextView(this);
        bankNameN.setText(row.get(1).toString());
        tableRow.addView(bankNameN);

        passCurrency = row.get(3).toString();

        currencyTable();

        TextView balINRA = new TextView(this);
        balINRA.setText(String.valueOf((Integer.parseInt(row.get(2).toString()))*rateForCalc));
        tableRow.addView(balINRA);

        dataTable.addView(tableRow);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:02:42.663

为了实现它，您应该为列表创建自定义适配器。在行布局上添加手势侦听器-您应该使用此问题来获取有关交换的信息[HERE](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

当用户在此列表器中调用 onItemClickListner 时在行上滑动时，您将获得列表的行号，因此您可以使用此行号从数据库获取信息。还在 Button(Update) 的侧 getView 方法中实现 onClicked 侦听器。

我希望它对你有帮助。

# jquery - jquery客户端验证在MVC3部分视图中不起作用

> ID：14134949
> 
> 赞同：19
> 
> 时间：2013-01-03T07:52:04.670
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

我似乎无法使用以下部分视图进行客户端验证工作。此视图位于父视图的 divTSettings div 内。从 stackoverflow 和其他网站尝试了很多东西，似乎没有任何效果。有任何想法吗？

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

@using (Ajax.BeginForm("CreateT", "TAdmin", null,
        new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "divTSettings"},
                       new { id = "CreateTForm" }))
{
    <div>
        <label>Name:</label>
        <input type="text" name="tName" id="tName"/>
        @Html.ValidationMessage("tName")
        <input type="submit" value="Submit"/>
    </div>
}

<script type="text/javascript">
$(function() {
    $('#CreateTForm').validate({
        rules: {
            tName: {
                required: true
            }
        },
        messages: {
            tName: {
                required: 'Name required'
            }
        }
    });
    $("#CreateTForm").removeData("validator");
    $("#CreateTForm").removeData("unobtrusiveValidation");
    $.validator.unobtrusive.parse("#CreateTForm");
});
</script> 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-03T07:58:19.670

> 有任何想法吗？

是的，您应该做的第一件事就是`<script>`从您的局部视图中删除所有这些标签。部分视图不应包含任何脚本。部分视图应该只包含标记。我已经重复了很多次，但仍然看到人们将脚本放在那里。脚本应该在您的布局或渲染部分的主视图中注册，可能通过覆盖在您的布局中注册的一些脚本部分，以便所有脚本都插入到 HTML 文档的末尾，就在结束`</body>`标记之前。那是他们所属的地方。

好的，现在来解决实际问题：不显眼的验证在动态添加到 DOM 的元素时无法开箱即用 - 例如向服务器发送 AJAX 请求，该请求返回一个局部视图，而这个局部视图是然后注入到 DOM 中。

为了使其工作，您需要使用不显眼的验证框架注册这些新添加的元素。为此，您需要`$.validator.unobtrusive.parse`在新添加的元素上调用：

```
$("form").removeData("validator");
$("form").removeData("unobtrusiveValidation");
$.validator.unobtrusive.parse("form"); 
```

您应该将此代码放入将部分注入 DOM 的 AJAX 成功处理程序中。注入新元素后，只需调用此函数即可。

如果您不是使用 jQuery（$.ajax、$.post、...）手动编写 AJAX 请求，而是依靠一些 Ajax.BeginForm 和 Ajax.ActionLink 助手为您完成这项工作，您需要订阅AjaxOptions 中的 OnSuccess 回调并将此代码放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T13:40:52.933

如果您想在全球范围内进行修复，那么这应该会有所帮助。我在 _layout.cstml 使用过。

```
 $(document).ajaxStart(function () {
                $.ajaxSetup({
                    converters: {
                        "text html": function (textValue) {
                            if (textValue) {
                                // Some parsing logic here
                                var script = "<script type='text/javascript' language='javascript' > $.validator.unobtrusive.parse(\"form\");";
                                var scriptend = "\<\/script>";
                                return script + scriptend + " " + textValue;
                            } else {
                                // This will notify a parsererror for current request
                                throw exceptionObject;
                            }
                        }
                    }
                });
            }); 
```

# android - 如何在android中删除wikiitude图标和启动画面？

> ID：14134950
> 
> 赞同：1
> 
> 时间：2013-01-03T07:52:05.387
> 
> 标签：android, wikitude

我是新手`Android AR development`。我想使用**WikitudeSDK**进行开发，但我无法**删除/替换**Wikitude 提供的自定义图标和**启动画面**？有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:51:17.680

在您从 Wikitude 购买许可证之前，Wikitude 水印将永远是他们的。

[您可以从http://www.wikitude.com/store/buy-sdk?pcategory=buysdk](http://www.wikitude.com/store/buy-sdk?pcategory=buysdk)购买许可证

# php - HTML 模式与 phpUnit 的比较

> ID：14134962
> 
> 赞同：0
> 
> 时间：2013-01-03T07:53:25.970
> 
> 标签：php, unit-testing, phpunit

我有两个 HTML 模式：

*   一个是`$expected_html`和
*   另一个是实际输出`$actual_out`（由 smarty 模板生成）。

现在我想对这两个字符串执行断言。我不能使用 assertEquals 因为两种模式都有不同的间距。

有人可以为此提供解决方案/帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:07:23.360

这完全取决于差异到底是什么。

一些指导方针让它发挥作用：

*   尝试通过对它们进行一些操作来使两者相等，而不是使用 `assertEquals`。

    例子：

> // 替换换行符和制表符以匹配预期的。
> 
> $actual_out = str_replace("\n", '',$actual_out);
> 
> $actual_out = str_replace("\t", '',$actual_out);

*   `assertStringMatchesFormat()`获取您提供的匹配特定格式（正则表达式）。
*   或者您也可以尝试仅对输出的字符串形式的关键部分进行断言。

# xcode - 选择后xcode Picker加载后续组件

> ID：14134963
> 
> 赞同：0
> 
> 时间：2013-01-03T07:53:32.303
> 
> 标签：xcode, components, picker

这就是我想做的。如果有人知道这是否可能以及如何实现，那就太好了。我有一个包含三个组件的选择器。后两个组件可以根据在第一个组件中选择的项目来更改值。我需要一种方法来知道组件 1 何时停止移动，以便加载其他两列。

前任：

组件 1 = 汽车品牌又名：通用汽车、福特等

组件 2 = 汽车模型又名 Cherokee、Cirrus 等

组件 3 = 模型功能，即空调、4 轮驱动等

因此，当用户在组件 1 中选择品牌时，我将在组件 2 中加载该品牌的模型，用户选择组件 2，然后我将在组件 3 中加载该品牌/模型的可用功能。

...有什么想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:56:26.510

使用三个或“n”数据源，具体取决于您在第一列中的选择，在 switch case 中更改所需的数据源并重新加载。

# .net - 首先使用 Entity Framework 5 代码映射实体

> ID：14134964
> 
> 赞同：0
> 
> 时间：2013-01-03T07:53:33.567
> 
> 标签：.net, entity-framework, domain-driven-design, entity-framework-5, ddd-repositories

我有 2 个实体，一个有一系列研究的患者。

```
public class Patient
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public List<Study> Studies { get; set; }
}

public class Study
{
    public Guid Id { get; set; }
    public Guid PatientId { get; set; }
    public string Name { get; set; }
} 
```

我想将此对象映射到数据库“*患者*”和“*研究*”中的 2 个表。**这样做的语法**应该是什么？我正在使用“ *EntityTypeConfiguration* ”。

```
class PatientEntityTypeConfiguration : EntityTypeConfiguration<Patient>
{
    public PatientEntityTypeConfiguration()
    {
        this.HasKey(p => p.Id);

        this.Property(p => p.Name)
            .HasMaxLength(50)
            .IsRequired();

        //TODO: Map the studies!!!

        this.ToTable("Patients");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:47:14.790

首先，您不必手动创建表的复数版本，除非您使用自己的[PluralizationService实现专门将其关闭](http://blogs.msdn.com/b/efdesign/archive/2008/12/02/pluralization.aspx)

我会稍微更新一下你的模型：

```
public class Study
{
    public Guid Id { get; set; }
    public virtual Guid PatientId { get; set; }
    //Add the navigation for Patient
    public virtual Patient Patient {get;set;}
    public string Name { get; set; }
} 
```

您的映射将如下所示。通过使属性虚拟化，您可以进行延迟加载：

```
class PatientEntityTypeConfiguration : EntityTypeConfiguration<Patient>
{
    public PatientEntityTypeConfiguration()
    {
       HasKey(p => p.Id);

       Property(p => p.Name)
            .HasMaxLength(50)
            .IsRequired();

       HasMany(p => p.Studies)
       .WithRequired(s => s.Patient)
       .HasForeignKey(s => s.PatientId).WillCascadeOnDelete(false);

    }
} 
```

# java - Any way to call the default constructor from a parameterized constructor?

> ID：14134973
> 
> 赞同：1
> 
> 时间：2013-01-03T07:54:17.510
> 
> 标签：java, default-constructor, parameterized-constructor

Suppose, I have the following code

```
class C {
    int i;
    String s;

    C(){
        System.out.println("In main constructor");
        // Other processing
    }

    C(int i){
        this(i,"Blank");
        System.out.println("In parameterized constructor 1");
    }

    C(int i, String s){
        System.out.println("In parameterized constructor 2");
        this.i = i;
        this.s = s;
        // Other processing 
        // Should this be a copy-paste from the main contructor? 
        // or is there any way to call it? 
    }
    public void show(){
        System.out.println("Show Method : " + i + ", "+ s);
    }
} 
```

I would like to know, Is there any way, I can call the main(default) constructor from the parametrized constructor (i.e. `C(int i, String s)` in this case) ?

Or I have just copy-paste the entire contents from the main(default) constructor to the parametrized one, as shown in comments in the above code?

### Note

I need to call the default constructor after the variables `i` and `s` are set in the parametrized constructor, as the processing involves these variables.

### Edit

I see [this post](https://stackoverflow.com/q/12852673/1135954), which says placing `this()` as the first line would call the default constructor. But I need to call it after the setting of values.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:00:35.437

Calling `this()` would work, but note this must be the first statement in constructor. For eg: Below code would be illegal and won't compile:

```
class Test {
    void Test() { }
    void Test(int i) {
        i = 9;
        this();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:05:36.727

An option could be to call your parameterized constructor from your default constructor.

```
C(){
    this(0, "Blank");
}

C(int i){
    this(i,"Blank");
}

C(int i, String s){
    this.i = i;
    this.s = s;
} 
```

This pattern will let you supply defaults for constructors with less arguments to the more specific constructors.

Also, note chaining constructors must be done as the first call in another constructor - you cannot call another constructor after initializing variables:

```
C(int i, String s){
    this.i = i;
    this.s = s;
    this();     // invalid!
} 
```

If you really want to do something like this, consider an init method:

```
C() {
    init();
}
C(int i, String s) {
    this.i = i;
    this.s = s;
    init();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T07:58:45.463

Calling `this()` as the *first statement* in other constructors is enough.

```
C(int i, String s)
{
   this();
   // other stuff.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T08:00:09.503

Quoting the Docs:

> the invocation of another constructor **must** be the **first line** in the constructor.

So no its not possible. Use this() in first line.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T08:46:16.467

You can move all the code from main constructor to some method, say, mainProcessing().

```
C()
{
    System.out.println("In main constructor");
    mainProcessing();
}

private void mainProcessing()
{
    // Move your code from main constructor to here.
} 
```

Now in your parameterized constructor 2, you can call this method, mainProcessing(), at desired location.

```
C(int i, String s)
{
    System.out.println("In parameterized constructor 2");
    this.i = i;
    this.s = s;
    mainProcessing();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T07:57:42.447

Just call the constructor ny this(); statment as a first line in your default constructor....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T07:59:08.460

You can use `this();` to call default constructor

```
C(int i, String s){
   this(); // call to default constructor
   // .....       
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-03T07:59:53.077

Use this() **in first line** of parametrized constructor

```
C(int i, String s){
    this();
    System.out.println("In parameterized constructor 2");
    this.i = i;
    this.s = s;
    // Other processing
    // Should this be a copy-paste from the main contructor?
    // or is there any way to call it?
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-03T08:00:51.157

You can call `this()` in the first statement to call default constructor in any parameterized constructor.

Note `this()` should mandatorily be the first line in the constructor definition

```
C(int i, String s){
   this();
    . . . . 
} 
```

> But I need to call it after the setting of values.

It is not possible. constructor invocation has to be the first statement.

You can go through this link : [constructor invocation must be the first line](http://java.syntaxerrors.info/index.php?title=Constructor_call_must_be_the_first_statement_in_a_constructor)

# c# - 带有“下一个”和“上一个”按钮的列表

> ID：14134975
> 
> 赞同：0
> 
> 时间：2013-01-03T07:54:34.483
> 
> 标签：c#

这是我用于列表并循环遍历它的代码：

```
public List<String> InfoList = new List<String>();
int i = 0;

private void populatelblDesc()
    {
        conn.Open();
        string query;
        query = "select distinct dp.current_location_code,dci.dest_location_code,dps.order_no,dps.carton_code,dps.company_id_no,dps.no_of_full_cartons,dps.no_of_total_packs,dg.dc_grv_id_no,dg.start_rcv_datetime,s.sku_code,(pt.product_type_desc|| ' ' ||ps.prod_size_desc|| ' ' ||c.colour_desc) product_desc from dc_pallet_stock dps,dc_pallet dp,sku s,purch_order_carton_sku pocs,dc_crane_instruc dci,dc_grv dg,product_type pt,prod_size ps,colour c where dp.pallet_id_no = dps.pallet_id_no and dps.order_no = pocs.order_no and dps.company_id_no = pocs.company_id_no and dps.carton_code = pocs.carton_code and s.sku_id_no = pocs.sku_id_no and s.company_id_no = dps.company_id_no and dp.pallet_id_no ='"+palletId+"' and dci.pallet_id_no(+) = dps.pallet_id_no and dg.dc_grv_id_no = dps.dc_grv_id_no and s.prod_size_id_no = ps.prod_size_id_no(+) and s.colour_id_no = c.colour_id_no(+) order by sku_code";
        OracleCommand cmd = new OracleCommand(query, conn);
        OracleDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            this.InfoList.Add(dr["current_location_code"].ToString());
            this.InfoList.Add(dr["dest_location_code"].ToString());
            this.InfoList.Add(dr["order_no"].ToString());
            this.InfoList.Add(dr["company_id_no"].ToString());
            this.InfoList.Add(dr["no_of_full_cartons"].ToString());
            this.InfoList.Add(dr["no_of_total_packs"].ToString());
            this.InfoList.Add(dr["dc_grv_id_no"].ToString());
            this.InfoList.Add(dr["start_rcv_datetime"].ToString());
            this.InfoList.Add(dr["sku_code"].ToString());
            this.InfoList.Add(dr["product_desc"].ToString());
        }
        dr.Close();
        conn.Close();
    } 
```

下一步按钮

```
private void button1_Click_1(object sender, EventArgs e)
    {
        populatecompany_name();

        if (i + 1 < this.InfoList.Count)
            lbl1.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl2.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl3.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl4.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl5.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl6.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl7.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl8.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl9.Text = this.InfoList[++i];
        if (i + 1 < this.InfoList.Count)
            lbl10.Text = this.InfoList[++i];
    } 
```

上一个按钮

```
private void button2_Click(object sender, EventArgs e)
    {
        populatecompany_name();

        if (i - 1 < this.InfoList.Count)
            lbl9.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl8.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl7.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl6.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl5.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl4.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl3.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl2.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl1.Text = this.InfoList[--i];
        if (i - 1 < this.InfoList.Count)
            lbl10.Text = this.InfoList[--i];
    } 
```

这可能不是最好的方法。正如您在上一个按钮代码中看到的那样，我必须更改表单上标签的填充顺序，否则它会出现混乱。

我的问题是：当我单击上一个并且没有更多数据可以访问时，我得到一个异常：

```
ArgumentOutOfRangeException was unhandles - Specified argument was out of the range of valid values.
Parameter name: index 
```

我该如何解决。我已经尝试了我能想到的一切。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:12:41.020

假设您在表单上有所有标签，并且它们都有名称*lbl#*，那么您可以这样做来获取所有标签，并按名称排序：

```
private void button1_Click(object sender, EventArgs e)
{
    int i = 0;
    foreach (Label l in this.Controls
                            .OfType<Label>()
                            .OrderBy(l => int.Parse(l.Name.Substring(3))))
    {
        if (i < InfoList.Count)
            l.Text = InfoList[i++];
    }
} 
```

我不确定您为什么要尝试更改顺序，因为最后，我猜`InfoList`应该将第 i 个元素放入第 i 个标签中。然而，这是一个将顺序从 0 到 10 以及从 10 到 0 的示例：

```
public partial class Form1 : Form
{
    List<string> InfoList = new List<string> 
            { "1", "2", "3", "4", "5", "6", "7", "8", "9", "10" };
    const int labelNameLen = 3;

    public Form1() { InitializeComponent(); }

    private IEnumerable<Label> Labels
    {
        get
        {
            return this.Controls
                       .OfType<Label>()
                       .OrderBy(l => int.Parse(l.Name.Substring(labelNameLen)));
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int i = 0;
        foreach (Label l in Labels)
        {
            if (i < InfoList.Count)
                l.Text = InfoList[i++];
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        int i = InfoList.Count;
        foreach (Label l in Labels)
        {
            if (i > 0)
                l.Text = InfoList[--i];
        }
    }
} 
```

# java - 如何存储此列表并比较它们 Java 建议？

> ID：14134976
> 
> 赞同：1
> 
> 时间：2013-01-03T07:54:40.803
> 
> 标签：java, string, list, multidimensional-array, storing-information

你能否就这个问题给我一些建议：

我有两个类型的标题列表：

```
 - title1______title1 
 - title1a___title2
 - title1c___title3 
 - title1b___title4
 - title2______title3
 - title4
 - title5 
```

并且第一个列表必须附加一个文件名列表。如何存储这两个列表以便比较它们？

目前，我已将两个列表存储为 ArrayList，并将它们与第一个列表上应用的 removeAll 进行比较。

如何存储第一个列表，以便它与每个标题的文件名具有请求的连接，并且仍然能够将它与第二个列表进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:09:25.463

您可以为此使用地图：

```
Map<String, String> titles = new HashMap<String, String>();
titles.put("title1", "filename1");
titles.put("title1a", "filename1a");
...
titles.put("title5", "filename5"); 
```

基本上你可以使用`titles.keySet()`方法获得所有标题的集合。如果您需要使用列表删除某些标题，您可以执行以下操作：

```
List<String> titlesToRemove = Arrays.toList("title1", "title2", "title3");
titles.keySet().removeAll(titlesToRemove); 
```

但是您必须小心`keySet`直接删除值，因为某些地图可能不支持它。可能您最好使用地图上的方法迭代所有值`titlesToRemove`并删除每个值。`remove`

# sql - 在 CASE WHEN 条件中添加 INSERT 语句

> ID：14134977
> 
> 赞同：1
> 
> 时间：2013-01-03T07:55:00.590
> 
> 标签：sql, sql-server, sql-server-2008

我的代码：

```
 'Status' = 
       CASE  
           WHEN @ID = 2 AND Stud.Status = 'N' THEN 'To Be Submitted'
           WHEN Stud.Status = 'N' THEN 'N/A' 
           ELSE ISNULL(Stud.Status, '') 
        END 
```

如果满足第一个条件，我想添加一个`Insert`语句，即在下面的代码之后。如何在`Insert`此处添加声明。

```
WHEN @ID = 2 AND Stud.Status = 'N' THEN 'To Be Submitted' 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:01:37.807

```
INSERT INTO [DestinationTable]
SELECT
    [MyColumn1]
FROM
    [SourceTable]
WHERE
    @ID = 2 AND
    Stud.Status = 'N' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:04:16.057

我会将您的查询放入存储过程中，将您的第一个查询添加到[临时表中](http://databases.aspfaq.com/database/should-i-use-a-temp-table-or-a-table-variable.html)，然后将其拆分为您需要的内容......例如：

```
DECLARE @TempTable TABLE (Name NVARCHAR(50), Status NVARCHAR(50))

INSERT INTO @TempTable
SELECT Name, 
   CASE  
       WHEN @ID = 2 AND Stud.Status = 'N' THEN 'To Be Submitted'
       WHEN Stud.Status = 'N' THEN 'N/A' 
       ELSE ISNULL(Stud.Status, '') 
    END as Status
FROM [Table]
WHERE [column] = 'value'; 
```

然后使用该临时表执行插入

```
INSERT INTO [MyTable]
SELECT TOP 1 Name, Status 
FROM @TempTable
WHERE Status = 'To Be Submitted'; 
```

这样你只插入你需要的东西

> 如果满足第一个条件，我想添加一个插入语句

`TOP 1`将确保这一点

# c++ - 从一种颜色到另一种颜色的插值

> ID：14134979
> 
> 赞同：0
> 
> 时间：2013-01-03T07:55:11.253
> 
> 标签：c++, algorithm

在我的程序中，我试图从开始颜色 - >结束颜色 - >开始颜色等等。

尽管我是从自己的框架代码中编写此代码段，但这个问题并不特定于任何语言。

注意：`lerp modifies the color`同时`getLerped returns new value`

```
startProgram(){
ofColor startColor; //set as 152,219,255
ofColor endColor; //set as 132,152,184
ofColor lerpedColor = startColor;
float colorShift = 0.01f; 
} 
```

**//在我的程序中每帧连续触发的函数内部**

```
if(lerpedColor == endColor){
            endColor.set(startColor);
            startColor.set(lerpedColor);
            lerpedColor.set(startColor);
            cout<<"Swapping end color"<<"\n";
            cout<<"Start Color: "<<ofToString(startColor)<<"\n";
            cout<<"End Color: "<<ofToString(endColor)<<"\n";
            cout<<"Lerped Color: "<<ofToString(lerpedColor)<<"\n";
     }

    lerpedColor.lerp(endColor,colorShift);
    cout<<"Lerped color"<<ofToString(lerpedColor)<<"\n"; 
```

我从初始开始颜色到结束颜色的颜色插值很好，但这不会从结束颜色返回到星颜色返回。

当我得到以下 couts 时， `if condition`for`lerpedColor == endColor`只被触发一次：
startColor: 132,152,184
endColor: 152,219,255
lerpedColor: 132,152,184

这里出了什么问题，插值只发生一次而不是回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:13:57.990

正确的*均匀*线性插值可以实现为：

```
int interp(int src, int dst, float time) {
    return src*(1.0-time)+dst*time;
 }  // where 0.0<=time<=1.0 
```

当一次要插入 3 种颜色时，一种可能性是取最大色差：

```
Color diff = abs(end - start); // diff.x = abs(end.x - start.x) etc.
int steps = max(diff);
int a=0;
lerp(src, end, (float)a/(float)steps);
a++;
if (a==steps) {  // swap start/end 
} 
```

在这种情况下，最大的色差将减少/增加一个，而其他分量将被实际插值。

# android - 如何在 FragmentActivity 中膨胀片段布局

> ID：14134980
> 
> 赞同：0
> 
> 时间：2013-01-03T07:55:13.717
> 
> 标签：android, android-fragments

我正在为标签使用片段，并且我有一个`Fragment`从设备库中捕获图像的片段。

为此，我在片段 1 中使用以下代码：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);

startActivityForResult(Intent.createChooser(intent,"Select Picture"), 2); 
```

它工作正常，因为我可以从图库中选择图像，并拍摄我正在使用的图像

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
    try {
        // We need to recyle unused bitmaps

        LayoutInflater inflater = 
                (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        Uri selectedImageURI = data.getData();
        Drawable d=Drawable.createFromPath( getRealPathFromURI(selectedImageURI));

        LinearLayout l=(LinearLayout)inflater.inflate(R.layout.tab_frag1_layout, null, false);
        //LinearLayout l2=(LinearLayout)inflater.inflate(R.layout.tabs_layout, container, false);

        Toast.makeText(this, getRealPathFromURI(selectedImageURI), Toast.LENGTH_LONG).show();

        Button btn=(Button)l.findViewById(R.id.profileImage);
        // btn.setBackground(d);
        btn.setBackgroundDrawable(d);
        l.removeView(btn);

        l.addView(btn);

        // imageView.setImageBitmap(bitmap);
    } catch (Exception e) {
        e.printStackTrace();
    }
    super.onActivityResult(requestCode, resultCode, data);

}// end of the onActivityResult 
```

但不幸的是，我在 btn 上看不到图像，即使 Layout 的任何更改都不会影响原始布局，所以请帮助我如何在 Fragment 中膨胀布局`FragmentActivity`，以便我可以在该片段上显示拍摄的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:02:34.343

嘿检查你的代码里面`onActivityResult()`。您正在直接创建 Inflater 对象，这在 Fragments 中是不可能的。您必须根据 FragmentActivity 引用创建 Inflater 对象。替换这一行：

```
 LayoutInflater inflater = 
                        (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

和

```
LayoutInflater inflater = 
                        (LayoutInflater)getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

# ruby-on-rails-3 - Rails 3 内联数据表 CRUD

> ID：14134981
> 
> 赞同：0
> 
> 时间：2013-01-03T07:55:21.843
> 
> 标签：ruby-on-rails-3, datatable, crud

我一直在尝试为 rails 项目中的数据表组合一个 CRUD 接口，但我完全不知道如何去做。我以前将 AJAX/jQuery CRUD 接口放在一起并让它们轻松工作，但是当谈到能够添加/编辑/删除行时，我不知道如何更新数据集并将结果显示在表上.

任何人都可以指出我使用 rails 3 完成的文档或示例吗？

# java - 如何替换私有函数

> ID：14134983
> 
> 赞同：4
> 
> 时间：2013-01-03T07:55:25.103
> 
> 标签：java, inheritance, reflection, overriding, extends

我想替换一个我知道源代码的[类的函数。](https://android.googlesource.com/platform/frameworks/base.git/+/android-cts-2.3_r11/core/java/android/widget/MediaController.java)问题是我不能重写该函数，因为它是私有的，而且我不能扩展类并重写整个功能，因为*错误*的调用在每个可能的构造函数中。

现在我完全迷失了，我不知道如何实现所需的功能（主题化 Android VideoView 控件的控件，即 MediaController）。有没有办法用反射或类似的东西替换函数？或者甚至可以不调用超类的构造函数而是调用超超类？

这是一个非常基本的类，它显示了我的问题：

```
public class Base {
    public Base(int state) {
        // must be called
    }
}
public class Example extends Base {
    public Example(int state, boolean bla) {
        super(state);
        badCall();
    }        
    public Example(int state) {
        this(state, false);
    }
    private badCall() {
        // doing bad things
    }
} 
```

另请注意，我需要一个实例，`Example`因此我不能简单地复制该类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:18:50.973

这是一个使用模拟框架（jmockit）的人为示例。输出是：

> 原始私有方法
> 其他方法
> 新私有方法
> 其他方法

```
public static void main(String[] args) {
    A a = new A(); //prints Original private method
    a.m2(); //prints Some other method

    new MockUp<A>() {

        @Mock
        public void m() {
            System.out.println("New private method");
        }
    };

    A b = new A(); //prints New private method
    b.m2(); //prints Some other method
}

static class A {

    public A() {
        m();
    }

    private void m() {
        System.out.println("Original private method");
    }

    public void m2() {
        System.out.println("Some other method");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:24:37.600

您可以使用[AspectJ](http://www.eclipse.org/aspectj/)访问私有方法：

```
public privileged aspect SomeClassExposerAspect {

  void around(SomeClass obj) : execution(private void badCall()) {        
       try {
          // use privileged access to return the private member
          ((Example )obj).badCall();
       }
       // safeguard against unexpected 3rd party library versions, if using load-time weaving
       catch (NoSuchMethodError e) {
          //log something
       }
   }
  }
} 
```

这是一个关于它的好[博客。](http://blogs.vmware.com/vfabric/2012/04/using-aspectj-for-accessing-private-members-without-reflection.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:00:06.270

如果您有来源，我建议您“修补”课程。

编译并构建您的修改版本并替换 jar 中的旧版本或在类路径中更早地添加它，以便隐藏旧版本。

顺便说一句：您甚至可以通过这种方式修补 JVM 中的类，尽管这不是一个好主意。;)

# c# - 排序不适用于“2013” 年

> ID：14134985
> 
> 赞同：1
> 
> 时间：2013-01-03T07:55:41.940
> 
> 标签：c#, linq, sorting

我将不同的列表组合成一个列表，如下所示：

```
List<Tweet> tweets = new List<Tweet>();

foreach (string TID in TypeIDList)
{
    List<Tweet> lt = new List<Tweet>();
    ......
    tweets = tweets.Concat(lt).OrderByDescending(x => x.TwitTime).ToList();
}

return tweets.OrderByDescending(x => x.TwitTime).ToList(); 
```

所以在结果中，除了“2013”​​中的日期之外，所有内容都按降序排序

`1/1/2013 12:43:15 PM`

所以这些日期是最后而不是最初。

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T08:00:42.360

我猜`TwitTime`是 a `string`，在这种情况下，您需要一种格式，就像`"yyyy/MM/dd hh:mm:ss"`您想在不解析的情况下搜索它一样。简单地说，如果最重要的部分（年份）位于右侧，则按字母排序不起作用。

但是：更好的方法是：将其存储在`DateTime`- 将安全排序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T08:03:04.467

在对 s 进行排序时`string`，它们通常按字典顺序进行比较，这意味着所有以 number 开头的字符串`1`都将放在一起：

```
1
10
2
3
... 
```

在对日期或时间进行排序时，您可以使用[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)日期，例如 2013-01-01 12:34:23，它恰好按字典顺序正确排序。许多平台和语言还支持您可以使用的正确日期比较功能。

# iphone - 从 iPhone 中的运营商检索当前时间

> ID：14134986
> 
> 赞同：4
> 
> 时间：2013-01-03T07:55:43.297
> 
> 标签：iphone, ios, core-telephony

有什么方法可以从运营商那里获取当前时间。与自动更新时间一样，即使时间的自动更新从设置中关闭。即使互联网连接不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:01:34.430

也许看看[iOS-NTP Project](http://code.google.com/p/ios-ntp/)。我没有亲自使用它，但如果没有设置自动更新并且你想要正确的（NTP）时间，它看起来像是一个选项。

# matlab - 将 AR 模型拟合到 Matlab 中的数据

> ID：14134990
> 
> 赞同：0
> 
> 时间：2013-01-03T07:56:07.280
> 
> 标签：matlab, model, regression

我有一些想要拟合模型的历史数据 RV。型号为：

```
RV(t+1) = C0 + C1*RV(t) + C2*RV_weekAverage(t-5) + C3*RV_monthAverage(t-30) + e 
```

其中，未来的 RV 取决于先前的 RV 和一些先前 RV 值的平均值。

t - 是时间

C0、C1、C2、C3 - 是待确定的参数

RV_weekAverage = (1/5)*（从 t-1 到 t-5 的 RV 总和）

RV_monthAverage = (1/30)*（从 t-1 到 t-30 的 RV 总和）

e - 错误

我想我应该使用 AR 模型，但我不确定如何实现它，因为对于 AR 模型，右侧没有平均值，而是简单的先前值，例如：

```
RV(t+1) = C0 + C1*RV(t) + C2*RV(t-1) + e 
```

要使用 AR 模型，我必须尝试：

```
RV(t+1) = C0 + C1*RV(t) + C2*(1/5)*[RV(t-1)+...+RV(t-5)] + C3*(1/30)*[RV(t-1)+...+RV(t-30)] + e 
```

当我尝试估计它们时，我不确定如何在不干扰参数 C0、C1、C2 和 C3 的情况下将 (1/5) 或 (1/30) 的因子包含到模型中。到目前为止，这就是我所拥有的：

```
model = arima(6,0,0)
fit = estimate(model,RV) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T05:36:59.497

首先要做的事情：您在这里遇到的似乎不是编程问题，而是计量经济学问题。因此，它可能更适合[Cross Validated](https://stats.stackexchange.com/)。如果是这种情况，那么版主可能会选择将您的问题（和此答案）迁移到那里。

说了这么多，我想我仍然可以在这里提供答案。

您似乎正在处理时间序列回归，其中涉及 - 如果我的首字母缩写词猜测技巧是正确的 - 已实现的波动性或已实现的方差。您的回归量是 RV_{t+1}，回归量是 RV_{t}，RV_{t-1} 到 RV_{t-5} 的线性组合和 RV_{t-1} 到 RV_{t 的线性组合-30}。

鉴于您的回归数集包含回归量的滞后，我猜有人告诉您查看 AR(p) 模型，这就是问题开始的地方:-) 当然，这是解决这个问题的一种方法，但我个人认为这是错误的方式。为什么？因为您滞后到 t-30，所以您正在查看 AR(30) 模型，但正如您在问题中明确指出的那样，您的模型仅包含 4 个参数。当您只需要估计 4 个参数时，为什么有超过 30 个回归量？这意味着您的估算方法将需要适应对参数的限制，这只会让您的生活变得艰难。

幸运的是，在你的情况下，它是可以避免的。实际上，在我看来，您已经在问题中写下了适当的形式！

我将稍微简化一下符号：让 y_{t+1} = RV_{t+1}, X1_t = RV_t, X2_t = (1/5) *(RV_{t-1} + ... + RV_ {t-5})，并且 X3_t = (1/30)* (RV_{t-1} + ... + RV_{t-30})。现在我们可以将回归方程写成：

y_{t+1} = c0 + c1*X1_t + c2*X2_t + c3*X3_t + e_t

这是一个简单的带有滞后的时间序列回归。忘记 AR(p) 特定的估计方法，您可以在此基础上做简单、可靠的 OLS。如果残差通过了 Durbin-Watson 检验，那么 OLS 估计量很可能是一致的，并且在一些额外的假设下，最佳线性无偏估计量 (BLUE)。

以下是一些示例代码，可帮助您入门：

```
%# Randomly generate some observations
T = 1000;
RV = randn(T, 1);

%# Construct your variables
y = RV(32:end); %# your regressor
X1 = RV(31:end-1); %# first lag of your regressor (ie your first regressand)
X2 = conv(RV(26:end-2), (1/5) * ones(5, 1), 'valid'); %# moving window average over 5 observations (ie your second regressand)
X3 = conv(RV(1:end-2), (1/30) * ones(30, 1), 'valid'); %# moving window average over 30 observations (ie your third regressand)

%# Build your matrix of regressors (including a vector of ones for the constant term)
X = [ones(length(X1), 1), X1, X2, X3];

%# Perform OLS
[Coef, CoefConfInt, e] = regress(y, X);

%# Perform a durbin watson test on the residuals
[DWpVal, DWStat] = dwtest(e, X);
if DWpVal < 0.05; fprintf('WARNING: residuals from regression appear to be serially correlated. Estimated coefficients may not be consistent'); end 
```

`Coef`存储您的估计系数，并`CoefConfInt`存储这些估计器的置信区间。我什至结合了一个测试来检查你的残差是否通过了 Durbin-Watson 测试。显然，您需要将您的实际 RV 替换为我随机生成的 RV。如果在您的实际回归中，残差没有通过 Durbin-Watson 检验，那么您可能需要研究诸如 Feasible GLS 之类的方法，或者阅读 Greene 的“计量经济学分析”的时间序列章节 - 但希望它赢了不要这么说。

如果您认为此回答回答了问题，请随时单击它旁边的勾号。

# java - 分配剪辑数据失败：请求的缓冲区太大

> ID：14134993
> 
> 赞同：1
> 
> 时间：2013-01-03T07:56:35.740
> 
> 标签：java, audio, javasound

我想在游戏启动器的背景中播放声音，但是当我尝试播放声音时出现此错误。分配剪辑数据失败：请求的缓冲区太大。

这是我的声音代码：

```
 public static void Sound() {
    try {
        AudioInputStream audio = AudioSystem.getAudioInputStream(new File("LauncherBG.wav"));
        Clip clip = AudioSystem.getClip();
        clip.open(audio);
        clip.start();
        CStop = clip;
    }

    catch (UnsupportedAudioFileException uae) {
        System.out.println(uae);
    } catch (IOException ioe) {
        System.out.println(ioe);
    } catch (LineUnavailableException lua) {
        System.out.println(lua);
    }
} 
```

wav 为 16mb，时长为 1:33 分钟，请帮忙

# asp.net-web-api - WebAPI 网址匹配问题

> ID：14134994
> 
> 赞同：1
> 
> 时间：2013-01-03T07:56:40.690
> 
> 标签：asp.net-web-api, attributerouting

我在我的网络项目中实现了 AttributeRouting 和 WebApi。我尝试将一个 Url like 路由`http://localhost/apis/test?adminId=yyy`到`GetSomeInfo`Action。但我遇到了一些麻烦，url`http://localhost/apis/test`和`http://localhost/apis/test?adminId=yyy`两个路由到 Action `GetEntity`。好像不识别参数`adminId`，以为url中没有参数。所以事实证明去`GetEntity`行动。谁能帮我？谢谢。

到目前为止我所做的如下所示，它不起作用。

```
[RoutePrefix("apis/test")]
public class SampleController : ApiController
{

    [HttpGet]
    [GET("")]
    public string GetEntity([FromUri]string name = null, [FromUri]string id = null)
    {
        ....
    }

    [HttpGet]
    [GET("")]
    public string GetSomeInfo([FromUri]string adminId)
    {
        ....
    }

 } 
```

**已编辑**

路线图代码`global.asax`如下。我发现 URL`http://localhost/api/Sample?adminId=2BD48CF9-95EB-48D2-A1B2-1AFA273E586D`可以路由到`GetSomeInfo`Action。`http://localhost/api/Sample`没有任何参数的 Url路由到`GetEntity`. 这正是我想要的。我的问题是为什么`RoutePrefix`and`FromUri`不起作用？

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = UrlParameter.Optional }
            );

            routes.MapRoute(
               name: "Default",
               url: "{controller}/{action}/{id}",
               defaults: new { controller = "Login", action = "Login", id = UrlParameter.Optional }
           ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:09:36.177

因为，您需要在 global.asax.cs 中定义更多路由。看到这个，[在 ASP.NET Web API 中具有多个 GET 方法的单个控制器](https://stackoverflow.com/questions/9499794/single-controller-with-multiple-get-methods-in-asp-net-web-api)

# c - 在 Linux 中的“pj_thread_register”上返回错误号 120022

> ID：14134998
> 
> 赞同：0
> 
> 时间：2013-01-03T07:56:52.890
> 
> 标签：c, linux, pjsip

操作系统：`Ubuntu 11.04 \n \l`
In below Program`pthread`正在创建新线程，但在注册时失败。

```
#include<pthread.h>
#include <pjlib.h>
#include <pjlib-util.h>

void serila_port_handler(void);

int main()
{
pthread_t trd_hndler;
    if(pthread_create(&trd_hndler,NULL,serila_port_handler,NULL))
    {
        printf("ERROR while initializing serial port_thread \n");
    }
    pthread_join(trd_hndler,NULL);
}
void serila_port_handler(void)
{
    int ret,rc;
        pj_thread_desc ptd;
        pj_thread_t *thread =0;
        bzero(&ptd, sizeof(pj_thread_desc));
        if ( (rc = pj_thread_register("serialportthread",ptd, &thread)) != PJ_SUCCESS) {
                printf("Error in pj_thread_register Return Val.: %d\n",rc);
                exit(1);
        }
        printf("pj_thread_register Success!");
        sleep(10);

} 
```

输出：

```
Error in pj_thread_register Return Val.: 120022 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:05:03.383

在 pj-lib 中使用 anyting 之前必须[调用](http://www.pjsip.org/docs/latest/pjlib/docs/html/index.htm#configure_app_sec)pj_init [( )。](http://www.pjsip.org/docs/latest/pjlib/docs/html/group__PJ__BASIC.htm#ga069615152140fa2df009cebc8a36b769)

如果这仍然导致问题，您需要调试 pj-lib，其中包括弄清楚错误代码 120022 的含义，并阅读 pj_thread_register 的源代码以了解发生了什么。