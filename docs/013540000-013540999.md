# StackOverflow 问答 13540000-13540999

# android - Android 选择活动文本颜色

> ID：13540000
> 
> 赞同：6
> 
> 时间：2012-11-24T09:34:53.413
> 
> 标签：android, android-intent, android-activity, shortcuts

我有挑选活动的问题，我有这个弹出窗口：

![在此处输入图像描述](../Images/562c14eaa557fb1a900d215706a92ef3.png)

文字颜色也是白色和背景。这是我使用的代码：

```
 Bundle bundle = new Bundle();
    ArrayList<String> shortcutNames = new ArrayList<String>();
    shortcutNames.add(getString(R.string.group_applications));
    bundle.putStringArrayList(Intent.EXTRA_SHORTCUT_NAME, shortcutNames);

    ArrayList<ShortcutIconResource> shortcutIcons = new ArrayList<ShortcutIconResource>();
    shortcutIcons.add(ShortcutIconResource.fromContext(this,
            R.drawable.ic_launcher));
    bundle.putParcelableArrayList(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, shortcutIcons);

    Intent pickIntent = new Intent(Intent.ACTION_PICK_ACTIVITY);
    pickIntent.putExtra(Intent.EXTRA_INTENT, new Intent(Intent.ACTION_CREATE_SHORTCUT));
    pickIntent.putExtra(Intent.EXTRA_TITLE, getText(R.string.app_name));
    pickIntent.putExtras(bundle);

    startActivityForResult(pickIntent, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:55:09.310

我终于得到了解决方案：

你需要使用

```
Intent pickIntent = new Intent(Intent.ACTION_CHOOSER); 
```

其余的还是一样的。此代码将为您提供 Holo 对话框。

# scala - scala编译错误：类型不匹配；找到：IndexedSeq[Int] 需要：scala.collection.immutable.Seq[Int]

> ID：13540002
> 
> 赞同：5
> 
> 时间：2012-11-24T09:35:07.887
> 
> 标签：scala, compiler-errors

我不知道为什么无法编译以下scala代码：

```
import collection.immutable.Seq
def foo(nodes: Seq[Int]) = null
val nodes:IndexedSeq[Int] = null
foo(nodes) 
```

=>

```
error: type mismatch;
 found   : IndexedSeq[Int]
 required: scala.collection.immutable.Seq[Int]
             foo(nodes)
                 ^ 
```

在 scala-library 中，IndexedSeq 被声明为：

```
trait IndexedSeq[+A] extends Seq[A]... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:55:18.770

有几个 IndexedSeq 特征。默认为`scala.collection.IndexedSeq`。如果你`import collection.immutable.IndexedSeq`那么 scala 将成功编译。（从OP复制）

# php - 单击时移动到 iFrame 目标

> ID：13540013
> 
> 赞同：0
> 
> 时间：2012-11-24T09:37:11.630
> 
> 标签：php, iframe, hyperlink, href

我目前正在尝试为我的 GCSE IT 项目制作一个信息点信息亭，其中一个页面包含一个基于 RSS 输入的新闻页面。

这是我到目前为止所拥有的：

```
<script language="JavaScript" src="http://feed2js.org//feed2js.php?src=http%3A%2F%2Ffeeds.bbci.co.uk%2Fnews%2Frss.xml&desc=1&targ=story&utf=y"  charset="UTF-8" type="text/javascript"></script> 
```

并在页面下方：

```
<td><a id="story"><iframe name="story" width="960px" height="450px"></iframe></a></td> 
```

问题是，由于 iframe 在页面下方，我希望新闻项目的链接加载到 iframe 中（它确实如此），但同时也自动将页面移动到 iframe 位置，因此超链接 id在 iframe 表格单元格中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:42:08.990

```
<a href='test.html' target='story'>TEST</a>

<iframe name="story" width="960px" height="450px"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:42:10.443

使用这个 jQuery 代码：

```
jQuery(document).ready(function () {
    Position = getElementTopLeft('cCalculationResult');
    window.scrollTo(Position.left, Position.top)
}); 
```

使用位置，您可以获得顶部和左侧位置。并且使用“window.scrollTo”可以让浏览器滚动到某个位置。

# graph - 我想在 PHP 中用 mysql 做一个图表

> ID：13540015
> 
> 赞同：-3
> 
> 时间：2012-11-24T09:37:17.797
> 
> 标签：graph, charts

我想在我的网站上制作漂亮的图表，我怎样才能做到这一点，而不是困难，在 PHP 中？

图表的数据必须来自我在 mysql 中的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:40:30.067

你有几个 3rd 方库可以使工作更容易，更不容易出错，这里有一些好的：[JpGraph](http://jpgraph.net/)，[GraPHpPite](http://graphpite.sourceforge.net/)，还有谷歌图表可能会有所帮助。[Highcharts](http://www.highcharts.com/)也很好看。

还有很多其他可以满足您的需求，我认为这些是最好的。所有人都有很多关于网络的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:41:30.533

你可以试试[highcharts](http://www.highcharts.com)。只需访问链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:39:23.837

看看谷歌图表：[https ://developers.google.com/chart/?hl=nl-NL](https://developers.google.com/chart/?hl=nl-NL)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T09:42:48.020

您将需要使用 php 库来创建图表

像[谷歌图表](http://code.google.com/apis/chart/)或 [Gphpchart](http://www.malaiac.com/tools/13-new-gphpchart-class-php-with-google-chart-api.html)

图表是关于节点和顶点的，你不能通过简单地创建一个简单的脚本来制作它们

# redirect - 本地网站重定向

> ID：13540016
> 
> 赞同：0
> 
> 时间：2012-11-24T09:37:47.717
> 
> 标签：redirect, wamp, hosts

我有一个网站正在运行，比如说：www.example.com

在我的本地 WAMP 安装中，我使用 GIT 克隆了相同的网站。地址是 localhost/www.example.com

Drupal 已安装，并且总是转到 localhost/ 而不是 localhost/www.example.com/

有没有办法从“example”本地“重定向”到“localhost/www.example.com/”？有点像 localhost 在主机文件中处理......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:45:29.290

apache 上的 mod_rewrite 可以帮助您。您可以编写规则将 localhost/example 重定向到 localhost/www.example.com/

这些链接可以帮助您入门。

*   [http://httpd.apache.org/docs/2.4/rewrite/remapping.html](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)
*   [http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:03:40.400

经过数小时寻找解决方案，我找到了答案！

用户虚拟主机 [http://cesaric.com/?p=255](http://cesaric.com/?p=255)

```
Now 'http://example' is virtualhost for 'http://localhost/www.example.com/' 
```

非常好 ：）

# javascript - 如何处理由滚动和点击列表项触发的“touchend”事件？

> ID：13540018
> 
> 赞同：3
> 
> 时间：2012-11-24T09:38:00.617
> 
> 标签：javascript, jquery, ios

我有一个带`div`s 的简单列表（在 iOS 上）。我使用`touchend`列表元素上的事件来执行操作。我这样做是因为`click`事件有大约 500 毫秒的延迟，这让 UI 感觉迟缓。

但是，`touchend`当我滚动列表时，该事件也会触发。有什么方法可以防止`touchend`滚动列表时触发，或者检测它是否是由滚动列表引起的？欢迎使用 jQuery 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T11:52:01.547

我有同样的问题，我用tappy插件解决了它：[tappy plugin](https://github.com/filamentgroup/tappy)

只需使用“点击”事件。

# networking - 无法 ping 到 virtualbox 实例

> ID：13540022
> 
> 赞同：9
> 
> 时间：2012-11-24T09:38:21.213
> 
> 标签：networking, virtualbox, vagrant

我正在尝试设置 vagrant lucid32 框

实例网络设置为 NAT

虚拟盒子实例可以 ping 到 Mac，但反之则不行

这是我的 Mac 配置

```
lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> mtu 16384
    options=3<RXCSUM,TXCSUM>
    inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1 
    inet 127.0.0.1 netmask 0xff000000 
    inet6 ::1 prefixlen 128 
gif0: flags=8010<POINTOPOINT,MULTICAST> mtu 1280
stf0: flags=0<> mtu 1280
en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
    ether 10:9a:dd:a9:43:44 
    inet6 fe80::129a:ddff:fea9:4344%en0 prefixlen 64 scopeid 0x4 
    inet 10.32.24.78 netmask 0xffff0000 broadcast 10.32.255.255
    media: autoselect
    status: active
p2p0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 2304
    ether 02:9a:dd:a9:43:44 
    media: autoselect
    status: inactive
utun0: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1380
    inet6 fe80::69ca:da35:534a:9504%utun0 prefixlen 64 scopeid 0x6 
    inet6 fd78:f3ab:2fb2:b8b8:69ca:da35:534a:9504 prefixlen 64 
```

这是虚拟盒子网络配置：

![在此处输入图像描述](../Images/3da255ffc876784862853c4fe6b0153b.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T09:42:00.520

您需要将网络模式从 NAT 更改为桥接，并且 ping 应该开始双向工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T09:44:20.443

很明显，当您使用 NAT 时，在 NAT 之后将无法 ping 主机。这就是 NAT 的工作方式……即使您将拥有真正的非虚拟主机，行为也会相同。

# c# - setIfNull 扩展方法不会为对象设置值

> ID：13540024
> 
> 赞同：2
> 
> 时间：2012-11-24T09:38:51.277
> 
> 标签：c#, entity-framework, generics, reflection, extension-methods

我想创建一个通用扩展方法，如果它们的值等于它们的默认值，它将为 Object 或 Struct 设置一个值。

所以我有以下代码：

```
public static void setIfNull<T>(this T i_ObjectToUpdate, T i_DefaultValue)
{
    if (EqualityComparer<T>.Default.Equals(i_ObjectToUpdate, default(T)))
    {
        i_ObjectToUpdate = i_DefaultValue;
    }
} 
```

这是一个调用示例：

```
public OrganizationalUnit CreateOrganizationalUnit(OrganizationalUnit i_UnitToCreate)
{
    i_UnitToCreate.EntityCreationDate.setIfNull(DateTime.Now); //Here is a call
    i_UnitToCreate.EntityLastUpdateDate.setIfNull(DateTime.Now); //And another one
    m_Context.DomainEntities.Add(i_UnitToCreate);
    return i_UnitToCreate;
} 
```

我不知道它是否与它有关，但我使用实体框架和 MVC。

在调试器中实际发生的事情我看到扩展方法中的行`i_ObjectToUpdate = i_DefaultValue;`正在工作并且值发生了变化，但是当调试器退出扩展方法时，我看到 的值`i_UnitToCreate.EntityCreationDate`保持不变。

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:43:57.807

您的代码中有两个引用。一种是`i_UnitToCreate.EntityCreationDate`指向内存中的某个地址。其他`i_ObjectToUpdate`在您的扩展方法中，它最初也指向该地址（在传递对您的方法的引用时，您正在创建*地址的副本*`i_UnitToCreate.EntityCreationDate`）。稍后您将第二个引用更改为指向内存中其他对象的点，但这不会更改第一个引用，因为它们是独立的。

*解决方法*

```
public static void SetIfDefault<T, TProperty>(this T arg,
    Expression<Func<T, TProperty>> propertySelector, TProperty value)
{
    TProperty currentValue = propertySelector.Compile()(arg);
    EqualityComparer<TProperty> comparer = EqualityComparer<TProperty>.Default;
    if (!comparer.Equals(currentValue, default(TProperty)))
        return;
    PropertyInfo property = (PropertyInfo)((MemberExpression)propertySelector.Body).Member;
    property.SetValue(arg, value);
} 
```

您可以使用表达式将属性选择器（而不是属性值）传递给扩展方法。从编译的表达式中检索值。如果它是默认值，则通过反射（您可以`PropertyInfo`通过转换成员表达式轻松获取）设置新值。用法：

```
i_UnitToCreate.SetIfDefault(x => x.EntityCreationDate, DateTime.Now);
i_UnitToCreate.SetIfDefault(x => x.EntityLastUpdateDate, DateTime.Now); 
```

* * *

*PS*关于我的第一个答案有一个评论 -`T`当谈到复制引用值时，我认为泛型类型是一种引用类型。使用值类型（如 DateTime）复制整个对象。它不会改变结果（您不能分配新值），但需要提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:51:03.447

问题是，在您的扩展方法中，`i_ObjectToUpdate`是对位于堆中的某个对象的本地引用（指针）。当你设置：

```
i_ObjectToUpdate = i_DefaultValue 
```

您**实际上并没有更改堆中**的对象，而是将**本地引用指向指向`i_ObjectToUpdate`的对象`i_DefaultValue`**，但仅在扩展方法的范围内。调用上下文中的原始引用：

```
i_UnitToCreate.EntityCreationDate
i_UnitToCreate.EntityLastUpdateDate 
```

维持不变。

要解决此问题，您必须实际将指针传递给指向扩展方法的指针。这是通过添加`ref`关键字来完成的：

```
 public static void setIfNull<T>(this ref T i_ObjectToUpdate, T i_DefaultValue)
    {
        if (EqualityComparer<T>.Default.Equals(i_ObjectToUpdate, default(T)))
        {
            i_ObjectToUpdate = i_DefaultValue;
        }
    } 
```

不幸的是，扩展方法不支持 ref 关键字。您的替代方法是将该方法用作标准静态方法：

```
 public static void setIfNull<T>(ref T i_ObjectToUpdate, T i_DefaultValue)
    {
        if (EqualityComparer<T>.Default.Equals(i_ObjectToUpdate, default(T)))
        {
            i_ObjectToUpdate = i_DefaultValue;
        }
    } 
```

并这样称呼它：

```
Program.setIfNull(i_UnitToCreate.EntityCreationDate, DateTime.Now); 
```

理想情况下，您可以创建一个仅进行空值检查的不同扩展方法，然后自己设置变量：

```
 public static T IfNull<T>(this T i_ObjectToUpdate, T i_DefaultValue)
    {
        if (EqualityComparer<T>.Default.Equals(i_ObjectToUpdate, default(T)))
        {
            return i_DefaultValue;
        }
        return i_ObjectToUpdate;
    } 
```

并通过以下方式调用它：

```
i_UnitToCreate.EntityLastUpdateDate = _UnitToCreate.EntityLastUpdateDate.IfNull(DateTime.Now); 
```

这相当于（使用引用类型时）：

```
i_UnitToCreate.EntityLastUpdateDate = i_UnitToCreate.EntityLastUpdateDate ?? DateTime.Now; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:29:18.063

我相信更好的方法是使用 C# 4.0`??`运算符：

```
 var nullable;

   . . . 

   nullable = nullable ?? "defaultValue"; 
```

你想达到什么目的？在我自己的个人工作习惯中，当我编写了一个扩展方法`IDictionary`的引用键不存在时，C# 对象抛出异常（`dict['not here']`抛出异常）让我感到非常沮丧：

```
public static TValue Safeget<TValue, TKey>(this IDictionary<TKey, TValue> arg, TKey key, TValue defaultValue = default(TValue))
        {
            if (arg.ContainsKey(key))
            {
                return arg[key];
            }

            return defaultValue;
        } 
```

这是你所追求的吗？

# button - chrome 扩展弹出窗口中的按钮

> ID：13540025
> 
> 赞同：0
> 
> 时间：2012-11-24T09:38:59.467
> 
> 标签：button, jquery-selectors, google-chrome-extension, popup

我正在编写一个 chrome 扩展，我希望按钮由于某些用户的操作而出现在弹出页面中（比如说，在他通过弹出页面登录到我的网站之后）。 [文档](http://developer.chrome.com/trunk/extensions/contentSecurityPolicy.html#JSExecution)指出内联 JavaScript 将不会被执行，建议的实现方式是使用

```
document.addEventListener('DOMContentLoaded', function () {
 document.querySelector('#button1').addEventListener('click', clickHandler);
}); 
```

当 'button' 是 popup.html 中的标签时。

但事情是这样的：我不希望按钮在页面加载时出现，如上所述。当我尝试使用`$("#some_div").append(<button id="button1">...<button>)`然后调用 document.addEventListener 添加按钮时，似乎 document.querySelector 没有找到附加的按钮（实际上它返回 null），因为它不是原始 popup.html 的一部分。

到目前为止，我想到的唯一解决方案是将 popup.html 中的按钮添加为隐藏，并在需要时将其设置为可见。

任何其他想法（或者，希望我都错了）将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:47:57.033

您可以尝试使用创建按钮`var newButton = document.createElement('button')`并使用`appendChild`而不是`append`. 然后你就可以写了`newButton.addEventListener('click', clickHandler)`。

# c# - c#获取facebook的自定义名称

> ID：13540028
> 
> 赞同：0
> 
> 时间：2012-11-24T09:39:18.227
> 
> 标签：c#, facebook

例如，我想从 facebook url 获取名称，url 是[http://www.facebook.com/GetThisName](http://www.facebook.com/GetThisName)或[https://www.facebook.com/GetThisName](https://www.facebook.com/GetThisName)

我只想保存这个词“GetThisName”，我该如何用c#编码呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:00:10.290

**如果您只想要 URL 中的“GetThisName”部分：**

从您的字符串中创建一个 System.Uri 对象，它将为路径的不同部分提供几个属性：

```
string path = "http://www.facebook.com/GetThisName";
Uri uri = new Uri(path);
Console.WriteLine(uri.AbsolutePath); 
```

**如果您想将 facebook 集成到您的网站并检索用户名**

从这里使用 JS SDK [http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

并像这样检索用户名

```
FB.api('/me', function(me) {
document.getElementById('auth-displayname').innerHTML = me.name;
document.getElementById('Email').innerHTML = me.email;
document.getElementById('profileImg').src = uid;
} 
```

# java - 过滤 SimpleAdapter 时出现 NullPointerException

> ID：13540033
> 
> 赞同：2
> 
> 时间：2012-11-24T09:40:12.650
> 
> 标签：java, android, filter, arraylist, simpleadapter

问题：我想要的只是过滤或说搜索项目，`ListView`但我总是以这个错误结束`"java.lang.NullPointerException"`。请帮我解决这个问题。

**播放列表活动.java**：

```
package com.name.musicplayer;

import java.util.ArrayList;
import java.util.HashMap;
import com.androidhive.musicplayer.PlayListActivity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class PlayListActivity extends ListActivity {
// Songs list
public ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

//list view adapter
ArrayAdapter<String> adapter_l;
// Search EditText
EditText inputSearch;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playlist);

    inputSearch = (EditText) findViewById(R.id.inputSearch);

    ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();

    SongsManager plm = new SongsManager();
    // get all songs from sdcard
    this.songsList = plm.getPlayList();

    // looping through playlist
    for (int i = 0; i < songsList.size(); i++) {
        // creating new HashMap
        HashMap<String, String> song = songsList.get(i);

        // adding HashList to ArrayList
        songsListData.add(song);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, songsListData,
            R.layout.playlist_item, new String[] { "songTitle" }, new int[] {
                    R.id.songTitle });

    setListAdapter(adapter);

    met_play_song_on_list();
    met_search();
}

private void met_play_song_on_list() {
    // TODO Auto-generated method stub
    // selecting single ListView item
            ListView lv = getListView();
            // listening to single listitem click
            lv.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // getting listitem index
                    int songIndex = position;

                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(),
                            AndroidBuildingMusicPlayerActivity.class);
                    // Sending songIndex to PlayerActivity
                    in.putExtra("songIndex", songIndex);
                    setResult(100, in);
                    // Closing PlayListView
                    finish();
                }
            });
}

private void met_search() {
    // TODO Auto-generated method stub
    /**
     * Enabling Search Filter
     * */

    inputSearch.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            //PlayListActivity.this.adapter_l.getFilter().filter(cs);
        }

        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
            PlayListActivity.this.adapter_l.getFilter().filter(arg0);
        }
    });
}
} 
```

这是**SongManager.java**类：

```
package com.name.musicplayer;

import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.name.musicplayer.JSONParser;

public class SongsManager {
// SDCard Path
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

// url to make request
private static String url = "http://domain.com/android/songlist.php";

// JSON Node names
private static final String TAG_str_song = "str_song";
private static final String TAG_str_song_name = "str_song_name";
private static final String TAG_str_song_path = "str_song_path";

// contacts JSONArray
JSONArray songslist = null;

// Constructor
public SongsManager() {

}

/**
 * Function to read all mp3 files from sdcard and store the details in
 * ArrayList
 * */
public ArrayList<HashMap<String, String>> getPlayList() {

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        songslist = json.getJSONArray(TAG_str_song);

        // looping through All Contacts
        for (int i = 0; i < songslist.length(); i++) {
            JSONObject c = songslist.getJSONObject(i);

            // Storing each json item in variable
            String str_song_name = c.getString(TAG_str_song_name);
            String str_song_path = c.getString(TAG_str_song_path);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put("songTitle", (i+1) +". " + str_song_name);
            map.put("songPath", "http://domain.com/" + str_song_path);

            // adding HashList to ArrayList
            songsList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return songsList;
}

/**
 * Class to filter files which are having .mp3 extension
 * */
class FileExtensionFilter implements FilenameFilter {
    public boolean accept(File dir, String name) {
        return (name.endsWith(".mp3") || name.endsWith(".MP3"));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:48:35.930

没有看到堆栈跟踪异常，我假设`NullPointerException`来自使用`EditText`过滤适配器：

```
PlayListActivity.this.adapter_l.getFilter().filter(arg0); 
```

上面的行将抛出 a`NullPointerException`因为您没有在代码中的任何位置为其分配有效引用`adapter_l`。`null`您应该`onCreate`像这样修改方法：

```
adapter_l = new SimpleAdapter(this, songsListData,
            R.layout.playlist_item, new String[] { "songTitle" }, new int[] {
                    R.id.songTitle });
setListAdapter(adapter_l); 
```

# java - 强制对 null 变量调用方法以引发 NullPointerException

> ID：13540037
> 
> 赞同：8
> 
> 时间：2012-11-24T09:40:50.800
> 
> 标签：java, multithreading, null, nullpointerexception, operation

> **可能重复：**
> [为什么在空引用上调用（静态）方法不会抛出 NullPointerException？](https://stackoverflow.com/questions/3293353/how-come-invoking-a-static-method-on-a-null-reference-doesnt-throw-nullpointe)
> [Java中空引用上的静态字段](https://stackoverflow.com/questions/11579953/static-fields-on-a-null-reference-in-java)

我尝试了[这个旧视频](http://www.metacafe.com/watch/370425/impossible_java_program/)中的代码：

```
class Impossible {
    public static void main(String[] args) {
        Thread t = null;
        System.out.println(t.currentThread().getName());
    }
} 
```

输出：`main`

好吧，那到底是什么？！是否`java.lang.Thread`违反任何`NullPointerException`规则？

但我最感兴趣的是：**如何使该变量表现得抛出 NullPointerException？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T09:42:10.343

> java.lang.Thread 是否违反任何 NullPointerException 规则？

**不**`NPE`，a被抛出的原因与 a无关`class`。它与该类的一个相关，`instance`在该类上完成调用。此外，这取决于您访问的方法或字段的类型。

这里发生的是，`currentThread()`是 Thread 类的静态方法。这是绑定到一个类，而不是一个实例。因此，即使您在 Thread 类的引用上调用它，它实际上也是在类名上调用的。

所以，

```
Thread t = null
t.currentThread(); 
```

实际上被调用为： -

```
Thread.currentThread(); 
```

因此，当通过对象引用表达式访问静态成员时，只有引用的声明类型很重要。这意味着：

*   引用是否实际指向 null 并不重要，因为不需要实例。

*   如果引用不为空，则无论引用指向的对象的类型是什么，都没有动态调度。

* * *

> 如何使该变量表现得抛出 NullPointerException？

好吧，当前的 print 语句永远不会抛出`NPE`. 第一部分已经在上面解释过了。现在，让我们继续前进。

```
Thread.currentThread(); 
```

上面的调用永远不会返回`null`。它总是返回当前线程实例。在 Java 中，你总是在一个或另一个线程中。即使在内部`public static void main`方法中，您也在执行`Main Thread`. 所以，`currentThread`不能`null`。

因此，进一步调用： -

```
Thread.currentThread().getName(); 
```

可以正常工作，并返回当前线程的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T09:43:36.663

`currentThread()`是`static`类的方法`Thread`。这意味着它不与类的任何特定实例相关联，而是与类本身相关联。

考虑到这一点，`t.currentThread()`简直就是另一种说法`Thread.currentThread()`。的值根本没有使用，所以是否是`t`无关紧要。`t``null`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:33:31.173

如果您在开发环境（Eclipse / Netbeans）中看到该代码，您会在第一时间看到`currentThread()`草书，这清楚地表明它是一个静态方法（类方法）。

此外，如果您启用了 checkstyle，它会警告您不要在对象实例上调用静态方法。

这个问题有点犯规，因为这里的代码格式不能显示不同格式的静态方法。

最后回答这个问题：类线程永远不会为空，类的实例可以为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:02:08.217

[您不能通过调用静态方法抛出 NullPointerException](https://stackoverflow.com/questions/11579953/static-fields-on-a-null-reference-in-java)。所以你需要调用一个实例方法——任何实例方法都可以，例如：

```
t.checkAccess();
t.getId();
t.getName(); 
```

等等

# c# - 表中名称相同但ID不同的值的总和

> ID：13540042
> 
> 赞同：3
> 
> 时间：2012-11-24T09:41:29.407
> 
> 标签：c#, mysql, sql

我正在使用 mySql 和 C# 创建费用管理器。它使用 Expenses_ID 和 YearMonth 记录费用。现在，我如何对具有不同 YearMonthID 的相同 Expenses_ID 的费用进行求和 - 例如。总“电费”（Expense_ID=1）2012 年成本（2012 年 1 月、2012 年 2 月、2012 年 3 月）
总“租金”（Expense_ID=2）2012 年成本（2012 年 1 月、2012 年 2 月、2012 年 3 月）等等.. 在同一个查询中。

```
+--------+------------+-------+
| ym_ID  | Expense_ID | Costs |
+--------+------------+-------+
| 2012 1 |          1 |   123 |
| 2012 1 |          2 |   103 |
| 2012 1 |          3 |   100 |
| 2012 2 |          1 |   144 |
| 2012 2 |          2 |   122 |
| 2012 2 |          3 |   155 |
| 2012 3 |          1 |   177 |
| 2012 3 |          2 |   112 |
| 2012 3 |          3 |   111 |
+--------+------------+-------+ 
```

这是我的桌子。我想要每项费用的总成本。
输出表：像这样：

```
+------------+----------------------------+
| Expense_ID | Total_Costs                |
+------------+----------------------------+
|          1 |                        444 |
|          2 |                        337 |
|          3 |                        366 |
+------------+----------------------------+ 
```

在这里，我有 3 个 Expense_ID- 但在主表中最多为 30。所以我需要一个查询来完成这个总和。

我试过这些：

```
SELECT b.Costs=a.Costs+b.Costs 
FROM `Table1` a JOIN `Table1` b 
WHERE a.Expense_ID=b.Expense_ID
      AND a.ym_ID<>b.ym_ID` 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:44:38.480

您需要使用*聚合函数*( *SUM* ) 来计算每个的总成本`Expense_ID`

```
SELECT Expense_ID, SUM(Costs) totalCosts
FROM tableName
//  WHERE ym_ID LIKE '2012%'                   //  if you want for 2012 only
GROUP BY Expense_ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1f9bd/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:17:23.607

上述查询将为您提供每个费用 ID 的总和，但对于仅获取 2012 年每个费用 ID 的总成本（假设您也有其他年份的记录），以下查询会更好

```
SELECT Expense_ID, SUM(Costs) totalCosts
FROM tableName WHERE ym_ID LIKE '2012%'
GROUP BY Expense_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:52:50.563

```
select expense_id, sum(cost) from COST_T group by expense_id; 
```

看到这个：

[http://sqlfiddle.com/#!2/941e7/1](http://sqlfiddle.com/#!2/941e7/1)

# javascript - Odata 请求在 Outlook 中给出错误 - crm 2011

> ID：13540044
> 
> 赞同：0
> 
> 时间：2012-11-24T09:41:40.173
> 
> 标签：javascript, dynamics-crm-2011, odata, crm

下面是我用来获取帐户记录值的代码。这在 ie 中运行良好，但是当我在 Outlook 2010 中调用相同时，它给出错误。

```
var guid = Xrm.Page.getAttribute('new_guid').getValue(); 
```

我已经在字段中存储了帐户记录的 guid `new_guid`。

```
http://server:port/organisation/XRMServices/2011/OrganizationData.svc/AccountSet(guid'" + guid + "') 
```

我无法上传错误快照，因为我是新用户。错误说，

`OData Select Failed: http://server:port/organisation/XRMServices/2011/OrganizationData.svc/AccountSet(guid'{34970124-8C34-E211-9279-005056C00008}')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:23:04.613

我得到了我的问题的解决方案。我需要使用

`Xrm.Page.context.getServerUrl()+"/XRMServices/2011/OrganizationData.svc/AccountSet(guid'" + guid.replace("{","").replace("}","") + "')";`

我对服务器 url 进行了硬编码，这在 Outlook 中不起作用，但在 ie 中运行良好。

# c# - 简单的 Injector 异步生命周期范围和安全异常

> ID：13540045
> 
> 赞同：1
> 
> 时间：2012-11-24T09:41:47.963
> 
> 标签：c#, decorator, simple-injector, lifetime-scoping, security-critical

我有一个`AsyncCommandHandlerDecorator<TCommand>`和`LifetimeScopedCommandHandlerDecorator<TCommand>`如下所示：

```
public class AsyncCommandHandlerDecorator<TCommand> 
    : ICommandHandler<TCommand> where TCommand : ICommand {

    private readonly Func<ICommandHandler<TCommand>> _factory;

    public AsyncCommandHandlerDecorator(Func<ICommandHandler<TCommand>> factory) {
        _factory = factory;
    }

    [SecurityCritical]
    // with or whitout SecurityCritical attribute, problem exists. 
    public void Handle(TCommand command) {
        ThreadPool.QueueUserWorkItem(_ => {
            var handler = _factory();
            handler.Handle(command);
        });
    }
}

// AND

public class LifetimeScopedCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand> where TCommand : ICommand {

    private readonly Container _container;
    private readonly Func<ICommandHandler<TCommand>> _factory;

    public LifetimeScopedCommandHandlerDecorator(Container container,
        Func<ICommandHandler<TCommand>> factory) {
        _container = container;
        _factory = factory;
    }

    [SecurityCritical]
    // with or whitout SecurityCritical attribute, problem exists. 
    public void Handle(TCommand command) {
        using (_container.BeginLifetimeScope()) {
            var handler = _factory();
            handler.Handle(command);
        }
    }
} 
```

我像这样注册装饰器：

```
container.RegisterSingleDecorator(
    typeof(ICommandHandler<>),
    typeof(LifetimeScopedCommandHandlerDecorator<>),
    c => c.ImplementationType.Name.StartsWith("Async"));

container.RegisterSingleDecorator(
    typeof(ICommandHandler<>),
    typeof(AsyncCommandHandlerDecorator<>),
    c => c.ImplementationType.Name.StartsWith("Async")); 
```

但是，当异步进程尝试调用时，我收到此错误：

> 尝试通过安全透明方法“LifetimeScopedCommandHandlerDecorator`1.Handle(!0)”访问安全关键方法“SimpleInjector.SimpleInjectorLifetimeScopeExtensions.BeginLifetimeScope(SimpleInjector.Container)”失败。

我尝试在and上使用`SecurityCritical`属性，但没有帮助。请问你有什么想法吗？`LifetimeScopedCommandHandlerDecorator.Handle``AsyncCommandHandlerDecorator.Handle`

**更新：**

异常是类型`MethodAccessException`，这里是完整的堆栈跟踪：

> 在 MYNAMESPACE.LifetimeScopedCommandHandlerDecorator`1.Handle(TCommand 命令)
> 
> 在 MYNAMESPACE.AsyncCommandHandlerDecorator`1.<>c_ *DisplayClass1.b* _0(Object _)
> 
> ```
>  in C:\MYPROJECTPATH\AsyncCommandHandlerDecorator.cs:line 23 
> ```
> 
> 在 System.Threading.QueueUserWorkItemCallback.WaitCallback_Context（对象状态）
> 
> 在 System.Threading.ExecutionContext.RunInternal（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
> 
> 在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
> 
> 在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
> 
> 在 System.Threading.ThreadPoolWorkQueue.Dispatch()
> 
> 在 System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()

**更新 2：**

有或没有`SecurityCritical`属性，问题都存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:15:11.470

最后，我找到了答案（感谢@Steven 的帮助）。在我的程序集中，我添加**`[SecurityTransparent]`**了一些原因。另一方面，**Simple Injector**在**`ThreadLocal<T>`**内部使用。并且**`ThreadLocal<T>`**归因于**`HostProtection(SecurityAction.LinkDemand)`**and in**`LinkDemand`**的评论，我们可以阅读：

> 直接调用者必须被授予***指定的权限***。**不要在 .NET 框架中使用 4** . 改为完全信任使用**`System.Security.SecurityCriticalAttribute`**；对于部分信任，请使用**`System.Security.Permissions.SecurityAction.Demand`**.

这意味着实际上**`ThreadLocal<T>`**类是一个**`SecurityCritical`**对象，我们不能一个一个地调用一个**`SecurityCritical`**方法**`SecurityTransparent`**。

# git - 强制 Git 提示输入用户名和密码

> ID：13540063
> 
> 赞同：5
> 
> 时间：2012-11-24T09:43:56.290
> 
> 标签：git, authentication, push, google-code

我关闭了一个在谷歌代码上发布的 PHP 项目。

问题是当我尝试使用以下命令时：

```
git push origin master 
```

我收到以下身份验证错误消息：

```
fatal: remote error: Invalid username/password.
You may need to use your generated googlecode.com password; see https://code.google.com/hosting/settings 
```

如何强制 Git 提示输入用户名和密码以解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T15:46:05.960

看到[这个答案](https://stackoverflow.com/a/9186888/550309)。

转到您获取密码的错误消息中的 URL，然后按照说明进行操作。

> 对于 Git 存储库，您可以将以下行添加到您的 .netrc 文件中，记录您拥有提交访问权限的每个存储库域的密码。确保您已在 .netrc 上设置权限，以便只有您的用户帐户可以读取它。

```
machine code.google.com login user@gmail.com password qwertyasdfg 
```

我还将在该答案下引用可能有帮助的评论：

> 从 .git/config 中删除用户名强制 git 重新询问用户名和密码

# android - GridView，为item设置drawable

> ID：13540067
> 
> 赞同：0
> 
> 时间：2012-11-24T09:44:36.730
> 
> 标签：android, gridview

我尝试使用以下代码在我的 GridView 中进行多项选择：

```
ArrayList<String> selectedItems=new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) {

...

    GridAdapter gridAdapter = new GridAdapter(this, tmp);

    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            String code=((TextView)view.findViewById(R.id.code)).getText().toString();
            int index=selectedItems.indexOf(code);
            if(index==-1) {
                view.setBackgroundResource(R.drawable.selected);
                selectedItems.add(code);
            } else {
                view.setBackgroundDrawable(null);
                selectedItems.remove(index);
            }
        }});

...

} 
```

但这有一个问题。我单击其中一项，它的颜色变为灰色，没关系。然后我向下滚动我的 GridView 并看到另一个灰色项目。但它并没有检查实际情况，我从不点击它。为什么？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:48:58.000

我在将 GridAdapter.getView() 放入此代码时对其进行了修复：

```
if(selectedItems.contains(code))) {
    convertView.setBackgroundResource(R.drawable.selected);
} else {
    convertView.setBackgroundDrawable(null);
} 
```

# c++ - 从参数和范围返回

> ID：13540076
> 
> 赞同：1
> 
> 时间：2012-11-24T09:45:55.900
> 
> 标签：c++, parameters, scope, error-code

我有一个函数，我想从函数中检索字符串并返回错误代码：

```
int Connection::RecvMsg(std::string* buffer)
{
  buffer = &RecvBuffer.front();
  RecvBuffer.pop();
  return error_state; 
} 
```

我想从中弹出一个字符串`RecvBuffer`，并且我想通过参数传递字符串。

我意识到弹出后缓冲区无效。是在该函数中声明静态字符串的唯一方法吗？我应该采取什么更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:49:07.957

我想你可能想要更像这样的东西：

```
*buffer = RecvBuffer.front(); 
```

这会将字符串分配给任何`buffer`指向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:54:37.770

在 C++ 中传播错误的推荐方法是使用异常机制。

如果您出于某种原因不想使用异常，则可以使用引用将信息传递回调用者。

```
int Connection::RecvMsg(std::string &buffer)
{
    buffer = RecvBuffer.front();
    RecvBuffer.pop();
    return error_state; 
} 
```

当然，您也可以使用指针，但在这种情况下，最好确保调用者没有传递 nullptr。所以你需要写这样的东西

```
int Connection::RecvMsg(std::string *buffer)
{
    error_state = false;

    if(buffer != nullptr)
    {
        *buffer = RecvBuffer.front();
        RecvBuffer.pop();
        error_state = true;
    }

    return error_state; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:21:28.390

Outparameters 不是建模多个参数的唯一选择（IMO 也不是最好的选择）。相反，我建议在 a 中返回两个值`pair`：

```
#include <utility>
#include <string>

std::pair<std::string,int> Connection::RecvMsg() {
  if (recvBuffer.empty()) {
    return std::make_pair<std::string,int>(std::string(),error_code);
  }
  std::string const front = recvBuffer.front();
  recvBuffer.pop();
  return std::make_pair<std::string,int>(front,no_error);
} 
```

# r - 在 R 数据框中添加一个新列，其值取决于另一列的值

> ID：13540080
> 
> 赞同：3
> 
> 时间：2012-11-24T09:46:22.677
> 
> 标签：r, dataframe

> **可能重复：**
> [根据同一 df 中的另一列将值分配给 df$column](https://stackoverflow.com/questions/12737146/assigning-values-to-a-dfcolumn-based-on-another-column-in-the-same-df)

假设我有数据框：

```
table<- data.frame(population=c(100, 300, 5000, 2000, 900, 2500), habitat=c(1,2,3,4,5,6)) 
```

现在我想添加一个新的列 table$size，其值为 1 如果人口 < 500、2 如果 500<=人口<1000、3 如果 1000<=人口<2000、4 如果 2000<=人口<3000、5 如果 3000 <=人口<=5000

我只知道如何根据另一列中的值创建具有二进制 TRUE/FALSE 结果的列，例如

```
table$size <- (table$population<1000) 
```

但我不确定这样做是为了在不同的条件下获得不同的数字。任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T10:33:31.817

首先不要调用 a `data.frame` `table`，因为`table`它是一个基本函数。

您可以使用`findInterval`：

```
df <- data.frame(population=c(100, 300, 5000, 2000, 900, 2500), 
                 habitat=c(1,2,3,4,5,6))
v <- c(-Inf,500,1000,2000,3000,5000)
df$size <- findInterval(df$population,v,all.inside = TRUE)
  population habitat size
1        100       1    1
2        300       2    1
3       5000       3    5
4       2000       4    4
5        900       5    2
6       2500       6    4 
```

我之所以使用`all.inside = TRUE`，是因为您想将 5000 定义为大小 5，并且我假设值不能大于该值。如果可以的话，你可以使用类似的东西

`v <- c(-Inf,500,1000,2000,3000,5001,Inf)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T10:13:54.630

您可以为您的映射定义一个函数。因此包括您的不同垃圾箱：

```
mysize <- function(x){
  if(x<500)
   return(1)
  if(500 <= x & x < 1000)
    return(2)
  if(1000<=x & x<2000)
    return(3)
  if(2000<=x & x<3000)
    return(4)
  if(3000<=x & x <=5000)
    return(5)
  else
    return(NA)
} 
```

然后您可以将此功能应用于您的人口列并添加所需的新列：

```
table$population.bin <- sapply(table$population, mysize)
table 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T10:32:08.830

只要您可以处理 5 是 <5001 而不是 <=5000 的任何数字，您可能只需要带有标签的 cut 函数。

```
# look at the help window
?cut

# initiate your table
table <- 
    data.frame(
        population = c( 100 , 300, 5000, 2000, 900, 2500) , 
        habitat = 1:6
    )

# create a new column with the desired cutpoints
table$size <- 
    cut( 
        # input data
        table$population , 
        # cut points
        c( -Inf , 500 , 1000 , 2000 , 3000 , 5001 ) , 
        # label values (character strings work too)
        labels = 1:5 ,
        # interval closed on the right?
        right = FALSE
    ) 
```

# php - 为什么 Opencart 没有将变量从模块传递到查看文件？

> ID：13540081
> 
> 赞同：0
> 
> 时间：2012-11-24T09:46:23.973
> 
> 标签：php, variables, opencart

我是 opencart 的新手。默认情况下，Opencart 特色产品显示产品描述和价格，但现在我希望特色产品部分中的产品折扣价，所以我更改了特色产品代码并添加代码以显示折扣价。这是特色产品的完整代码

```
<?php
class ControllerModuleFeatured extends Controller {
  protected function index($setting) {
    $this->language->load('module/featured'); 
    $this->data['heading_title'] = $this->language->get('heading_title');
    $this->data['button_cart'] = $this->language->get('button_cart');
    $this->data['text_discount'] = $this->language->get('text_discount');
    $this->load->model('catalog/product'); 

    $this->load->model('tool/image');

    $this->data['products'] = array();

    $products = explode(',', $this->config->get('featured_product'));    

    if (empty($setting['limit'])) {
      $setting['limit'] = 5;
    }

    $products = array_slice($products, 0, (int)$setting['limit']);

    foreach ($products as $product_id) {
      $product_info = $this->model_catalog_product->getProduct($product_id);
      $discounts = $this->model_catalog_product->getProductDiscounts($product_id);
      $product_discounts[] = array(); 
      foreach ($discounts as $discount) {
      $product_discounts[] = array(
        'quantity' => $discount['quantity'],
        'price'    => $this->currency->format($this->tax->calculate($discount['price'], $product_info['tax_class_id'], $this->config->get('config_tax')))
    );
      }

      if ($product_info) {
        if ($product_info['image']) {
          $image = $this->model_tool_image->resize($product_info['image'], $setting['image_width'], $setting['image_height']);
        } else {
          $image = false;
        }

        if (($this->config->get('config_customer_price') && $this->customer->isLogged()) || !$this->config->get('config_customer_price')) {
          $price = $this->currency->format($this->tax->calculate($product_info['price'], $product_info['tax_class_id'], $this->config->get('config_tax')));
        } else {
          $price = false;
        }

        if ((float)$product_info['special']) {
          $special = $this->currency->format($this->tax->calculate($product_info['special'], $product_info['tax_class_id'], $this->config->get('config_tax')));
        } else {
          $special = false;
        }

        if ($this->config->get('config_review_status')) {
          $rating = $product_info['rating'];
        } else {
          $rating = false;
        }

        $this->data['products'][] = array(
          'product_id' => $product_info['product_id'],
          'thumb'      => $image,
          'name'       => $product_info['name'],
          'description'=> $product_info['description'],
          'price'      => $price,
          'special'    => $special,
          'rating'     => $rating,
          'reviews'    => sprintf($this->language->get('text_reviews'), (int)$product_info['reviews']),
          'href'       => $this->url->link('product/product', 'product_id=' . $product_info['product_id']),
          'discounts'  => $product_discounts,
        );
      }

    }
    if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/module/featured.tpl')) {
      $this->template = $this->config->get('config_template') . '/template/module/featured.tpl';
    } else {
      $this->template = 'default/template/module/featured.tpl';
    }

    $this->render();
  }
}
?> 
```

现在，当我使用 features.tpl 时

```
 <?php foreach ($discounts as $discount) { ?>
  <span class="discount-price">
     <?php echo sprintf($text_discount, $discount['quantity'], $discount['price']); ?>
  </span>
  <?php } ?> 
```

它显示未定义的变量`$discounts`。但是如果我`print_r($discounts)`在模块文件中使用它会显示那里的折扣价。我真的坚持这一点。为什么模块没有将值传递给视图文件？有人可以帮我弄这个吗？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:34:00.233

您应该`$product['discounts']`不在`$discounts`foreach中使用

# scala - 是否有 `Nothing => A` 类型的 Scala 函数？或者如何构建一个？

> ID：13540082
> 
> 赞同：2
> 
> 时间：2012-11-24T09:46:25.283
> 
> 标签：scala, unit-type, curry-howard

通过[Curry-Howard 同构](https://en.wikipedia.org/wiki/Curry-Howard_Isomorphism)， Scala`Unit`对应于逻辑真和`Nothing`逻辑假。任何事物都暗示了逻辑真这一事实由一个简单的函数证明，该函数只是丢弃了参数：

```
def toUnit[A](x: A): Unit = { } 
```

是否有一个函数可以证明逻辑 false 意味着什么，即 type 的函数`Nothing => A`？还是有一种惯用的方法来构建一个？

一个人总是可以做类似的事情

```
def fromNothing[A](n: Nothing): A = throw new RuntimeException(); 
```

但这很丑 - 它没有使用`Nothing`没有价值的事实。应该有一种方法可以毫无例外地做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T10:07:09.923

你可以这样做

```
def emptyFunction[A]: Nothing => A = {n => n} 
```

或者

```
def emptyFunction[A](n: Nothing): A = n 
```

# html - 外部 div 应调整为图像大小

> ID：13540088
> 
> 赞同：0
> 
> 时间：2012-11-24T09:47:37.157
> 
> 标签：html, css

我有这样的代码：

```
<div class="container">
    <img src="img_url" alt="" />
</div>​ 
```

容器的宽度已设置为 600 像素，但如果图像较大，容器的宽度应调整为图像大小。我应该如何修复我的CSS？

```
.container {
    margin: auto;
    margin-bottom: 30px;
    padding: 10px;
    width: 400px;
    background-color: #2a2929;
    border: 1px solid #212020;    
}

.container img {
    display: block;
    margin-left: auto;
    margin-right: auto;    
}​ 
```

演示：http: [//jsfiddle.net/Gzjp7/3/](http://jsfiddle.net/Gzjp7/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:50:41.713

Sen`min-width`在容器上，而不是`width`.

这将确保`div`至少有`400px`宽度，并在必要时扩展。

```
.container {
    margin: auto;
    margin-bottom: 30px;
    padding: 10px;
    min-width: 400px;
    background-color: #2a2929;
    border: 1px solid #212020;    
} 
```

如果您不想要容器的最小宽度，则只需省略该`width`属性，或将其设置为`auto`（这是默认值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:51:59.310

添加到容器 img

```
width:100%;
height:auto; 
```

应该将图像保留在容器中

# java - Java 日期差异、Joda 库和 DST

> ID：13540089
> 
> 赞同：0
> 
> 时间：2012-11-24T09:47:39.377
> 
> 标签：java, date, jodatime

我必须计算代表车辆出发和到达的两个日期之间的差异（它已经行驶了多少小时）。我目前正在使用 Joda 库。如果我使用 Hours 课程，

```
DateTime begin = new DateTime("2012-03-25T00:00+00:00");
DateTime end = new DateTime("2012-03-26T00:00+00:00");
Hours h = Hours.hoursBetween(begin, end); 
```

结果我得到24小时。(h.getHours())。

我可以获得两个日期之间经过的小时数，但是在考虑到 DST 发生的时间间隔内我该怎么办？事实上，由于选择的日子（2012 年 3 月 25 日）是 DST 发生的日子（在欧洲/伦敦地区），我应该得到 23 小时的结果。有没有可以处理这个特定事件的类/方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T09:53:00.523

当您`+00:00`在末尾给出日期时，您指定的是 UTC 偏移量，因此这些是准确的时间，不受 DST 的影响。

如果您使用了时区等，您会看到 DST 的影响，但您得到的是正确答案

# php - 使用 PHP GD `imagecreatefromstring` 函数创建图像的问题

> ID：13540091
> 
> 赞同：2
> 
> 时间：2012-11-24T09:47:52.793
> 
> 标签：php, curl, php-gd

我有一个简单的服务，它使用通过 URL 传递的参数生成任何文本的 PNG 图像。参数之一是文本本身，其余是“字体”、“颜色”、“字体粗细”等。

此类 URL 的一个示例是： [http://picselbocs.com/projects/cakemyface/text.php?params=Verdana%7C18%7Cbold%7Cnormal%7Ccenter%7C%23cc0000%7Cunderline&text=Hello%20world！](http://picselbocs.com/projects/cakemyface/text.php?params=Verdana%7C18%7Cbold%7Cnormal%7Ccenter%7C%23cc0000%7Cunderline&text=Hello%20world!)

生成以下PNG：

![原来的](../Images/94936bd84cd8fc1c952fb4559cfdd062.png)

在另一个脚本中，我使用 cURL 来检索此服务生成的此类资源，然后使用 将其转换为图像`imagecreatefromstring()`，因为我需要对其进行操作（例如旋转和缩放），然后将其与其他一些图片。为此，我使用以下代码：

```
function getImage($url){
            $ch = curl_init ($url);
            curl_setopt($ch, CURLOPT_HEADER, 0);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
            $resource = curl_exec($ch);
            curl_close ($ch);

            return $resource;
    }

    $url = "http://picselbocs.com/projects/cakemyface/text.php?params=Verdana%7C18%7Cbold%7Cnormal%7Ccenter%7C%23cc0000%7Cunderline&text=Hello%20world!";

    $string = getImage($url);
    $image = imagecreatefromstring($string);

    // Send the image to the client
    header("Content-type: image/png");
    header("Content-disposition: inline; filename=mytext.png");
    imagepng($image);
    imagedestroy($image); 
```

**[此处](http://picselbocs.com/projects/cakemyface/test.php)**提供了相同的代码，您可以在其中查看输出。问题是上面的代码输出了一些奇怪的 PNG，其中所有的字母都是填充的矩形，如下例所示：

![样本结果](../Images/c539f293de84497aa45acc9386f5a65b.png)

为什么会发生这种情况，我该如何解决？

另一个奇怪的事情是，如果我将文本图像的 URL 替换为例如使用 Google Charts 工具生成的 QR 码的链接（例如[QR 码](https://chart.googleapis.com/chart?cht=qr&chs=70&chl=http://cakemyface.co.uk&choe=UTF-8&chld=L)），结果就是它应该是的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:09:14.797

玩了一会儿后，我发现了问题和解决方案！

```
$image = imagecreatefromstring(file_get_contents('http://picselbocs.com/projects/cakemyface/text.php?params=Verdana|18|bold|normal|center|%23cc0000|underline&text=Hello%20world!'));
imagesavealpha($image, TRUE); // this is the fix
header("Content-Type: image/png");
imagepng($image); 
```

我创建图像的方式只是一种不使用 curl 的快速方法，似乎图像需要保存 alpha 通道。

# php - url，php中的非拉丁符号

> ID：13540092
> 
> 赞同：1
> 
> 时间：2012-11-24T09:47:54.750
> 
> 标签：php, url, character, latin

如果在 url 中使用，则不允许使用字符，例如空格：

```
<a href="pa ge.php">link</a> 
```

并单击此链接，在浏览器地址栏中我看到`mysite.com/pa%20ge`

好的，如果现在我使用格鲁吉亚语（或例如俄语）字母符号：

```
<a href="აბცდ.php">link</a> 
```

在浏览器地址栏中，我看到`mysite/აბცდ.php`

也就是说，这些非拉丁字母符号没有改变，它们在 url 中“呈现”为原始视图。

问题：为什么？url 中也允许使用非拉丁字母符号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:53:00.227

不可以，一个 URL 只能包含 ASCII 的（一个子集）。

浏览器正在将“აბცდ”转换为发送到服务器的*实际URL 的百分比编码实体。*事实上，*你*应该将它作为百分比编码字符串嵌入到你的文档中，浏览器只是为你覆盖了这个错误。

浏览器在地址栏中显示的内容有所不同。现代浏览器试图尽可能地对用户友好，并解码一些百分比编码的字符，以在地址栏中显示为人类可读的文本。出于反欺骗的原因，只有*一些*被解码，而不是全部。格鲁吉亚语恰好是相当安全的，因为很难将它误认为是任何其他相似的角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:52:19.117

这些字符也在内部进行了百分比编码，但出于对用户的礼貌，浏览器会以原始格式显示它们。当您复制并粘贴 URL 时，您将看到百分比编码已到位：

```
http://domain.com/mysite.აბცდ.php 
```

变成

```
http://domain.com/mysite.%E1%83%90%E1%83%91%E1%83%AA%E1%83%93.php 
```

有关背景信息，请参阅[此答案](https://stackoverflow.com/a/2744184/187606)。

# haskell - 无法安装 happstack-hsp

> ID：13540096
> 
> 赞同：1
> 
> 时间：2012-11-24T09:48:17.667
> 
> 标签：haskell, haskell-platform, happstack

我也在使用带有 cygwin 的 Windows 7。

从二月份开始，我已经在 Haskell 平台上安装了 happstack-hsp。

我刚从四月安装了 Haskell 平台。我尝试通过 cabal 安装 happstack-hsp 包并得到以下错误：

```
$cabal install happstack-hsp
Resolving dependencies...
Configuring hsp-0.7.1...
Building hsp-0.7.1...
Preprocessing library hsp-0.7.1...
ghc.exe: could not execute: trhsx
cabal.exe: Error: some packages failed to install:
happstack-hsp-7.1.1 depends on hsp-0.7.1 which failed to install.
hsp-0.7.1 failed during the building phase. The exception was:
ExitFailure 1 
```

我试图然后安装 trhsx，并得到了这个错误：

```
$cabal install trhsx
Resolving dependencies...
Configuring trhsx-0.2.2...
Building trhsx-0.2.2...
Preprocessing library trhsx-0.2.2...

Trhsx.hs:1:1:
    Could not find module `Prelude'
    It is a member of the hidden package `base'.
    Perhaps you need to add `base' to the build-depends in your .cabal file.
    It is a member of the hidden package `haskell2010-1.1.0.1'.
    Perhaps you need to add `haskell2010' to the build-depends in your .cabal file.
    It is a member of the hidden package `haskell98-2.0.0.1'.
    Perhaps you need to add `haskell98' to the build-depends in your .cabal file.
    Use -v to see a list of the files searched for.
cabal.exe: Error: some packages failed to install:
trhsx-0.2.2 failed during the building phase. The exception was:
ExitFailure 1 
```

我也在cmd中试过这个，得到了同样的结果。我使用haskell已经很多年了，它发生了很大的变化，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:10:15.390

`trhsx`现在来自`hsx`包装。错误的原因是cabal`$HOME/.cabal/bin`默认安装了可执行文件。但是，默认情况下`$HOME/.cabal/bin`不在您的范围内。`$PATH`

如果你把它添加到你的`$PATH`，那么一切都应该没问题。

# java - Log4j 没有记录一些堆栈跟踪

> ID：13540099
> 
> 赞同：3
> 
> 时间：2012-11-24T09:49:02.830
> 
> 标签：java, exception, logging, log4j, stack-trace

为了我的目的，我正在使用带有 EnhancedPatternLayout 的 log4j 1.2.16 和根记录器。

代码是这样的（在 ScheduledFuture 中捕获异常）：

```
try
{
    _task.run();
}
catch(RejectedExecutionException ree) {}
catch (Exception e)
{
    log.error("Exception in a scheduled task:", e);
} 
```

这就是接下来发生的事情，某些类型的异常不会在日志文件中留下任何堆栈跟踪。

这是 NPE 的正常日志：

```
[24.11.12 11:08:31] Exception in a scheduled task:
java.lang.NullPointerException
    at com.test.server.taskmanager.TestTask$1.run(TestTask.java:116)
    at com.test.server.threading.RunnableWrapper.execute(RunnableWrapper.java:65)
    at com.test.server.threading.RunnableWrapper.run(RunnableWrapper.java:57)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
        ..... 
```

接下来是 ClassCastException：

```
[24.11.12 11:16:37] ...
[24.11.12 11:18:30] Exception in a scheduled task:
java.lang.ClassCastException
[24.11.12 11:18:37] ...
[24.11.12 11:20:37] ...
[24.11.12 11:21:51] Exception in a scheduled task:
java.lang.ClassCastException
[24.11.12 11:22:37] ... 
```

我不明白.. ClassCastException 的堆栈跟踪在哪里？
为什么会发生这种情况，有没有办法解决这个问题？

# objective-c - AsyncImageView 不缓存图像

> ID：13540103
> 
> 赞同：1
> 
> 时间：2012-11-24T09:50:07.083
> 
> 标签：objective-c, ios, caching, uiimageview, image-caching

嗯[在这里](https://github.com/nicklockwood/AsyncImageView)`AsyncImageView`使用类。在文档中，他们说“默认情况下，所有加载的图像都被缓存”。您可以在文档的最后一段看到它。

但**问题**是当我尝试再次加载图像时，它带有占位符并等待几秒钟以再次从 URL 加载图像，即使它上次已成功加载。

这意味着它没有被缓存，对吧？
所以问我的代码是否有问题？
为什么图像没有像使用一样被缓存`SDWebImage`？

这是我的代码：

```
AsyncImageView *imageView = [[AsyncImageView alloc] initWithFrame:CGRectMake(0, 0, productCellWidth, productCellHeight)];
imageView.contentMode = UIViewContentModeScaleAspectFill;
imageView.clipsToBounds = YES;
NSURL *URL =  [NSURL URLWithString:[NSString stringWithFormat:ProductPicture]];
[AsyncImageLoader defaultCache];
[[AsyncImageLoader sharedLoader]loadImageWithURL:URL target:self success:@selector(successSelector) failure:@selector(failureSelector)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:09:45.127

在 SDImageCache.m 中你会发现这行代码：

```
static NSInteger cacheMaxCacheAge = 60*60*24*7; // 1 week 
```

这是缓存图像的生命周期，您可以将其更改为 4 天而不是 7 天

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:00:01.897

我之前使用过另一个库，它运行良好，这个名为“ [SDWebImage](https://github.com/rs/SDWebImage) ”的库你可以通过一种方法简单地使用它：

```
[imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

它会自动缓存图像，并且仅支持从缓存中加载（如果需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:51:02.423

对我来说，你的代码看起来不对。您只需设置 AsyncImageView 的 imageURL。

你不处理装载机

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-01-10T12:49:57.620

我已经解决了这个问题：你需要添加

```
#import "AsyncImageView.h" 
```

在你的文件 .m

和使用

```
NSURL *url = [NSURL URLWithString:yourUrlString];
photo.imageURL = url; 
```

或例如

```
cell.imageView.imageURL = url; 
```

并不是

```
UIImage *theImage = [UIImage imageWithData:imageData];
photo.image = theImage; 
```

# vb.net - vb中的自动填充文本框

> ID：13540105
> 
> 赞同：1
> 
> 时间：2012-11-24T09:50:23.483
> 
> 标签：vb.net, autofill

输入任何字符时，我需要自动填充文本框。Me.QuickSearchTableAdapter1.GetDataByFirstName(FirstNamePri.Text) 的查询是

```
SELECT        firstNamePri FROM      Customer WHERE        (firstNamePri LIKE @firstName) 
```

> Private Sub FirstNamePri_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) 处理 FirstNamePri.KeyPress
> 
> ```
>  Dim txtItems As New AutoCompleteStringCollection
>     Dim search As ArfDynamicsDataSet.QuickSearchDataTable = _
>     Me.QuickSearchTableAdapter1.GetDataByFirstName(FirstNamePri.Text+"%")
> 
>     Dim dbValues As String
> 
>     For Each row As DataRow In search.Rows
> 
>          dbValues = row("firstNamePri").ToString()
>         dbValues = dbValues.ToLower()
>         txtItems.Add(dbValues)
> 
>     Next
> 
>     FirstNamePri.AutoCompleteCustomSource = txtItems
> 
> End Sub 
> ```

当我输入一个字符并且该字符在 db 中不存在时，文本框保持为空，并且我输入的字符也被删除

我选择了 AutoCompleteMode 来建议和 AutoCompleteMode 到 CustomSource

谁能解释我做错了什么。

编辑：如果我使用另一个文本框的按键事件说 TextBox1 并从 TextBox1 事件中自动填充 FirstNamePri 它可以工作。它应该在 FirstNamepri 的 keyPress 上工作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:53:53.317

```
Public Function FetchProductSpareList(prefixText As String) As String()
    Dim dbinventory As New DCInventoryNewDataContext()
    Dim CompanyId As Integer = Convert.ToInt32(System.Web.HttpContext.Current.Session("CompanyID").ToString())

    Dim ProductNames = ( _
    Join P In dbinventory.Products On S.ProductId = P.id _
    Join C In dbinventory.SpareReceiptCodes On S.Id = C.StoreId _
    Where P.CompanyID = CompanyId AndAlso C.Active = True AndAlso _
                      P.ProductName.StartsWith(prefixText)).Distinct()
    Dim items As String() = New String(ProductNames.Count() - 1) {}
    Dim i As Integer = 0
    For Each Product As var In ProductNames
        items.SetValue(Product.ProductName, i)
        i += 1
    Next
    Return items
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:06:10.653

你可以试试这样的

```
Dim textParam = FirstNamePri.Text + "%"
Dim search As ArfDynamicsDataSet.QuickSearchDataTable = _
          Me.QuickSearchTableAdapter1.GetDataByFirstName(textParam) 
```

# node.js - Node.io、JSDOM 还是 PhantomJs ？或者，YQL-data.html.cssselect？

> ID：13540108
> 
> 赞同：2
> 
> 时间：2012-11-24T09:50:32.093
> 
> 标签：node.js, phantomjs, web-crawler, jsdom, node.io

我需要爬取特定的网站以挖掘出一些相关信息。看起来首先我必须搜索该站点以获取相应的 URL，当被抓取时会给我详细的信息。

假设，搜索 url 是

```
example.com/city1/search.html?cat=category1&locality=location1&page=1 
```

这意味着，位置和页面可以有city2、city3等。category可以是category2、category3等。

我收集了所有可以递增的城市、类别、位置和页面，直到结果不为空。

得到所有 URL 后，我将不得不从每个 URL 中挖掘出详细信息。我已经看到某些必要的信息作为 javascript 的一部分提供。

现在，我已经看到了 node.io、jsdom 和 phantomjs。我也看过yql。由于我是新手，请根据您的经验建议我，在这种情况下哪个是理想的。

如果你能举出一些例子，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:36:32.450

PhantomJS 可以在您提供的 URL 中运行 javascript，如果 URL 包含 javascript/ajax 内容，则非常有用。虽然 YQL 并没有在网站上运行 javascript/ajax，但它很快就能搞定

# delphi - Indy10 自由帕斯卡

> ID：13540113
> 
> 赞同：3
> 
> 时间：2012-11-24T09:51:30.950
> 
> 标签：delphi, indy, freepascal, lazarus, indy10

我尝试按照 Indy10 和 Lazarus 的安装说明进行操作。下载[Indy 10 下载](https://svn.atozed.com:444/svn/Indy10 "INDY 10 下载位置")后，使用正确的密码我只看到 Delphi 代码，没有名为 lazarus 或 freepascal 的文件夹。Indy10 中的 Lazarus 版本是否已被删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T10:19:09.377

我不是 Lazarus 的常客，但我只是[在此处](http://www.indyproject.org/Sockets/fpc/index.en.html)和[此处（来自 wiki.lazarus.freepascal.org）](http://wiki.lazarus.freepascal.org/index.php/Indy_with_Lazarus)阅读了这些说明。他们根本没有提到任何单独的 Lazarus 文件夹。

当我下载最新的版本时，这一点得到了证实。在该文件夹`Lib`中，您可以找到所有包文件，包括 dpk (Delphi) 和 lpk (Lazarus) 包文件。

在源代码（Lib/System）中，您会发现`IdCompilerDefines.inc`有很多针对各种编译器的定义，其中包括 FreePascal。这些定义用于代码中，以便在需要时在其他共享的代码库中产生特定的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:42:45.963

我在 Windows 和 Linux 上都使用 Indy 10 和 Lazarus。它工作得很好。

我没有通过软件包将它安装到 Lazarus 中。我只是直接使用相关单元并在运行时创建对象。这给了我一个在不同 Lazarus 安装之间非常便携的项目。

# email - 有没有一种简单的方法可以使用本地邮件客户端在服务器之间传输 IMAP 邮件？

> ID：13540124
> 
> 赞同：0
> 
> 时间：2012-11-24T09:53:10.687
> 
> 标签：email, imap, nameservers

我正在将我的域从一台服务器移动到另一台服务器。我正在寻找一种简单的方式来传输我的电子邮件。两个帐户都是 IMAP 并且都具有相同的电子邮件地址和邮件服务器，即 mail.domain.com，但使用不同的用户名和密码。

我想知道一旦新的名称服务器传播，我是否可以简单地更改我的电子邮件客户端（Mac OSX 上的邮件）中的用户名和密码，并且我在本地拥有的邮件文件夹将与新服务器同步？

如果这不是正确的程序，那么最好/最简单的程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:48:50.657

您应该将两个帐户同时添加到客户端，然后将消息从一个移动到另一个。邮件不会通过更改邮件服务器自行复制，因为它是服务器上的客户端视图，而不是同步算法。

但是，这个问题不适合用于 /programming/ 问题的 stackoverflow。

# pascal - 如何获得权力

> ID：13540125
> 
> 赞同：1
> 
> 时间：2012-11-24T09:53:21.747
> 
> 标签：pascal, freepascal, exponent

```
K = (S * (P/100/12)) / (1 - (1 + (P/100/12))^(-Y*12)) 
```

其中`S`, `P`, 和`Y`是输入。

如何获得`K`Free Pascal 中的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:57:44.243

使用[`power`](http://www.freepascal.org/docs-html/rtl/math/power.html)or[`intpower`](http://www.freepascal.org/docs-html/rtl/math/intpower.html)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T16:17:00.500

或者使用 ** 运算符

这个默认情况下没有实现/重载，但单位数学对整数和浮点数执行

# c++ - 读取 64 位整数文件

> ID：13540136
> 
> 赞同：4
> 
> 时间：2012-11-24T09:56:21.753
> 
> 标签：c++, file-io, uint64

我正在尝试通过自己编写一些代码来学习 C++，并且在这个领域非常新。

目前，我正在尝试读写一个 64 位整数文件。我以下列方式编写 64 位整数文件：

```
ofstream odt;
odt.open("example.dat");
for (uint64_t i = 0 ; i < 10000000 ; i++)
odt << i ; 
```

任何人都可以帮助我如何读取该 64 位整数文件（一个接一个）？所以，到目前为止，我发现的例子是逐行读取，而不是一个一个整数。

编辑：

```
ofstream odt;
odt.open("example.dat");
for (uint64_t i = 0 ; i < 100 ; i++)
odt << i ;

odt.flush() ;

ifstream idt;
idt.open("example.dat");
uint64_t cur;
while( idt >> cur ) {
  cout << cur ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:08:48.293

如果*必须*使用文本文件，则需要*一些东西*来描述格式化值的分隔。空格例如：

```
ofstream odt;
odt.open("example.dat");
for (uint64_t i = 0 ; i < 100 ; i++)
    odt << i << ' ';

odt.flush() ;

ifstream idt;
idt.open("example.dat");
uint64_t cur;
while( idt >> cur )
    cout << cur << ' '; 
```

话虽如此，我*强烈建议*您使用较低级别的 iostream 方法（`write()`, `read()`）并以二进制形式编写这些方法。

使用读/写和二进制数据的示例（是否有 64 位 htonl/ntohl equiv btw？？）

```
ofstream odt;
odt.open("example.dat", ios::out|ios::binary);
for (uint64_t i = 0 ; i < 100 ; i++)
{
    uint32_t hval = htonl((i >> 32) & 0xFFFFFFFF);
    uint32_t lval = htonl(i & 0xFFFFFFFF);
    odt.write((const char*)&hval, sizeof(hval));
    odt.write((const char*)&lval, sizeof(lval));
}

odt.flush();
odt.close();

ifstream idt;
idt.open("example.dat", ios::in|ios::binary);
uint64_t cur;
while( idt )
{
    uint32_t val[2] = {0};
    if (idt.read((char*)val, sizeof(val)))
    {
        cur = (uint64_t)ntohl(val[0]) << 32 | (uint64_t)ntohl(val[1]);
        cout << cur << ' ';
    }
}
idt.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:51:16.677

你的意思是这样的？

```
ifstream idt;
idt.open("example.dat");
uint64_t cur;
while( idt>>cur ) {
  // process cur
} 
```

# sql - SQL获取单个表中两个字段之间的差异

> ID：13540142
> 
> 赞同：-2
> 
> 时间：2012-11-24T09:57:07.517
> 
> 标签：sql, sql-server-2005

我有一个视图显示：

```
d_date d_shop d_qty r_date r_shop r_qty
12 年 12 月 12 日 ABC 20 12 年 12 月 XYZ 20
12-oct-12 ABC 15 12-oct-12 XYZ 0
12 年 12 月 12 日 XYZ 10 12 年 12 月 12 日 ABC 10
12 年 12 月 12 日 ABC 25 12 月 12 日 XYZ 10
12-oct-12 XYZ 10 12-oct-12 ABC 0

```

我想检查receive_qty 和dispatch_qty 的区别`receive_shop`

即正确的答案是：

```
r_date r_shop r_qty
12 年 10 月 12 日 XYZ 10

```

我正在使用 SQL Server 2005

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:18:02.120

我不太清楚这个问题，但也许你正在寻找这样的东西：

```
select r_date, d_shop, sum(d_qty)-sum(r_qty)
from asdf
group by r_date, d_shop 
```

[SQL小提琴](http://sqlfiddle.com/#!3/22d55/10/0)

# c# - 检查两个列表在单个评估中是否具有相同的元素

> ID：13540143
> 
> 赞同：3
> 
> 时间：2012-11-24T09:57:09.840
> 
> 标签：c#, list

> **可能重复：**
> [比较两个集合是否相等](https://stackoverflow.com/questions/50098/comparing-two-collections-for-equality)

我有两个清单

```
List<int> Foo = new List<int>(){ 1, 2, 3 }; 
```

和

```
List<int> Bar = new List<int>(){ 2, 1 }; 
```

为了找出它们是否有相同的元素，我做了

```
if(Foo.Except(Bar).Any() || Bar.Except(Foo).Any())
{
    //Do Something
} 
```

但这需要两次布尔评估。首先它会`Foo.Except(Bar).Any()`，然后`Bar.Except(Foo).Any()`。有没有办法在单一评估中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:07:52.347

```
 var sharedCount = Foo.Intersect(Bar).Count();
        if (Foo.Distinct().Count() > sharedCount || Bar.Distinct().Count() > sharedCount)
        {
            // there are different elements
        }
        {
            // they contain the same elements
        } 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-24T10:05:30.680

您不必检查两次。就做这样的事情（注意Foo，它可以为null并抛出相关异常）

```
if(Foo.Intersect(Bar).Any())
{
    //Do Something
} 
```

您可能还想先检查一下，您必须检查其中一个列表或两者是否为空或为空。但前提是这种情况对您有任何特殊价值。

# python - 使用python从csv文件中提取字典

> ID：13540144
> 
> 赞同：0
> 
> 时间：2012-11-24T09:57:12.413
> 
> 标签：python, csv

拥有一个包含 3 列的 csv 文件，我试图制作一本字典。首先我阅读了文件：

```
fin = open('example.csv', 'r') 
```

有了这些专栏，我如何制作字典？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:05:27.130

**编辑**以回应 OP 评论

我想你要的是转

```
a,123,456
b,333,444
c,888,3434 
```

进入

```
{'a': ('123', '456'), 'b': ('333', '444'), 'c': ('888', '3434')} 
```

如果是这样，一种解决方案是使用 csv.reader 解析文件，迭代行并填充最终的字典。

```
with open('example.txt', 'rb') as src_file:
    csv_file = csv.reader(src_file)
    data = {}
    for row in csv_file:
        data[row[0]] = (row[1], row[2])

    print(data) 
```

请参阅[http://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)`csv`上的模块文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:01:38.523

您可以在 csv 模块中使用 dict_writer。

```
import csv

fieldnames = ['Column1', 'Column2', 'Column3']
dict_writer = csv.DictWriter(file('your.csv', 'wb'), fieldnames=fieldnames)
dict_writer.writerow(fieldnames)
dict_writer.writerows(rows) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T10:21:13.003

你没有说值应该是什么样子，所以：

```
d={}
with open('example.csv', 'r') as file:
    for line in file:
        lst = line.strip().split(',')
        d[lst[0]] = lst[1:] 
```

这会输出如下内容：

```
{'key1': ['v1', 'v2'], 'key2': ['v1', 'v2']} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T12:07:38.870

您还可以使用 numpy loadtxt 并创建字典。

```
 from numpy import loadtxt

  a,b,c = loadtxt('filename.csv', sep=',', unpack=true)
  dictionary = dict(zip(a,(b,c))) 
```

# c++ - 使用 Eigen 的子矩阵和索引

> ID：13540147
> 
> 赞同：15
> 
> 时间：2012-11-24T09:57:32.353
> 
> 标签：c++, vectorization, eigen, submatrix

我目前正在开发一个 MATLAB 项目，我想使用 C++ 和 Eigen 重新实现计算量最大的部分。我想知道是否有办法执行以下操作（MATLAB 语法）：

```
B = A(A < 3); 
```

对于不熟悉 MATLAB 的人，上述命令初始化了一个矩阵 B，该矩阵由 A 中值小于 3 的单元格组成。

我从[Eigen 论坛](http://forum.kde.org/viewtopic.php?f=74&t=47094)上的帖子中看到，可以使用以下方法获取感兴趣的索引：

```
MatrixXi indices = (A.array() < 3).cast<int>(); 
```

我想要的是这样的：

```
MatrixXd B = A(A.array() < 3); 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-14T21:21:19.617

[libigl](http://igl.ethz.ch/projects/libigl/)为 Eigen 提供了许多包装器，使其更像 MATLAB。特别是，有一个`slice`函数可以调用：

```
igl::slice(A,indices,B); 
```

相当于 MATLAB 的

```
B = A(indices) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-12T19:44:49.940

您只能使用 对选定元素执行操作`select()`，这相当于三元 ?: 运算符。这不完全是您想要的，但在许多情况下应该可以工作。

```
MatrixXd B = (A.array() < 3).select(operation_on(A), MatrixXd::Zero(A.rows(), A.cols())); 
```

如果 A<3，这将用零填充 B，否则对 A 进行任何所需操作的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-24T10:46:30.643

当前有一个[功能请求](http://eigen.tuxfamily.org/bz/show_bug.cgi?id=329)，通过在 Eigen BugTracker 系统中提交的索引来选择子矩阵。因此，我怀疑这种方式是否可行。

我能想到的唯一解决方法是手动复制数据。虽然不是很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-16T21:35:03.993

Eigen 的 master 分支上的最新开发允许使用数字索引。

[这](https://stackoverflow.com/questions/52289332/eigen-array-indexing/52342718#52342718)是一个类似的请求，显示了数字索引的示例

# ssis - SSIS 脚本编辑器加载速度很慢

> ID：13540151
> 
> 赞同：3
> 
> 时间：2012-11-24T09:58:21.697
> 
> 标签：ssis

在我的角色中，我偶尔会使用 SSIS。在我最新的包中，我使用了脚本任务。我的机器足够快，运行 64 位并且有大量内存，但是每当我尝试编辑脚本时，我必须等待近一分钟才能加载代码。我正在使用 VS 2012 和 SQL 2012。任何想法，不断走出 Scriptmain.cs，尤其是解决这些挑剔的小问题，都需要永远。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:47:04.607

在 Windows 控制面板的“Internet 选项”/“高级”中，在“安全”组下，取消选中“检查发布者的证书吊销”。注销并重新登录。

# c++ - 在 Qt Creator 中创建新的 Symbian 应用程序时，“Target UID3”是什么意思？

> ID：13540154
> 
> 赞同：1
> 
> 时间：2012-11-24T09:59:01.287
> 
> 标签：c++, qt, qt-creator, symbian

当创建一个新的 Symbian 应用程序时，这会出现在 Qt Creator 中的新建项目向导的步骤之一中。

它说**目标 UID3：0xE3491AB7**

![在此处输入图像描述](../Images/43d8c74f6e9f6dc412ad912398355c2a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:50:28.430

简而言之：

> UID 是由 32 位数字组成的全球唯一标识符。整个 Symbian 平台都使用 UID 来实现各种文件识别和关联。
> 
> 因为 UID 是 Symbian 平台的基础，所以在开发程序时正确使用它们很重要。为确保唯一性，正确分配 UID 至关重要。通过从由 Symbian 在[https://www.symbiansigned.com](https://www.symbiansigned.com)管理的数据库集中分配 UID 来保证唯一性。

和：

> 在开发过程中，或者对于测试代码，可以从不受保护的测试范围 0xExxxxxxx 中选择临时 UID。这些 UID 可在未签名应用程序的开发过程中使用，但不得在已发布的软件中使用。请注意，此类应用程序可能无法通过 SIS 文件安装。有关详细信息，请参阅 Symbian Signed 网站。
> 
> 仍然必须注意避免开发团队内部和多个项目之间的冲突，包括可能仍安装在模拟器或本机平台上的旧项目。UID 冲突可能会阻止程序正确加载，通常会导致 Not Found 错误。

有关 UID 的全面描述，请参见[Symbian Developer's Library](http://library.developer.nokia.com/index.jsp?topic=/S60_5th_Edition_Cpp_Developers_Library/GUID-35228542-8C95-4849-A73F-2B4F082F0C44/sdk/doc_source/ToolsAndUtilities94/Build-ref/Mmp-ref/uid.html)中的相关页面。

# php - 而不是从数据库下载 csv 导出，而是通过 ftp 写入服务器

> ID：13540157
> 
> 赞同：0
> 
> 时间：2012-11-24T09:59:36.013
> 
> 标签：php

好的，所以我有一个脚本可以运行并从我的数据库生成一个 csv 文件，当它从它下载的浏览器运行时，很好。

但我想将文件从我的服务器发布到另一台服务器。

我一直在尝试用这段代码来做，但它似乎不起作用，没有写入文件。即使 FTP 帐户详细信息也错误，登录 OK 也会返回..

```
// header("Content-type: application/octet-stream");
// header("Content-Disposition: attachment; filename=sailings.txt");
// header("Pragma: no-cache");
// header("Expires: 0");
// print "$header\n$data";

//Connect to the FTP server
$ftpstream = ftp_connect('ftp server address');

//Login to the FTP server
$login = ftp_login($ftpstream, 'user', 'password');
if($login) {
echo "logged in ok";
//We are now connected to FTP server.
//Create a temporary file
$temp = tmpfile();
fwrite($temp, $header."\n");
fwrite($temp, $data);
fseek($temp, 0);
echo fread($temp, 0);

//Upload the temporary file to server
ftp_fput($ftpstream, '/sailings.txt', $temp, FTP_ASCII);

//Make the file writable only to owner
ftp_site($ftpstream,"CHMOD 0644 /sailings.txt");
}

//Ftp session end
fclose($temp);
ftp_close($ftpstream); 
```

请问谁能给我建议？

谢谢

富有的 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:11:52.080

你的问题是 tmpfile 函数返回文件的句柄，而 ftp_put 函数需要接收要上传的文件的路径+名称。从这个意义上说，你对这两条指令的操作是不匹配的。

要解决这个问题：

```
$f = tempnam("/tmp", "FOO");
$temp = = fopen($f, "w");
fwrite($temp, $header."\n");
fwrite($temp, $data);
fseek($temp, 0);
echo fread($temp, 0);

//Upload the temporary file to server
ftp_put($ftpstream, '/sailings.txt', $f, FTP_ASCII);

// The rest is the same as you have 
```

试试这个解决方案，祝你好运

**编辑**：感谢费利佩的评论。您正在正确使用**ftp_fput**。尽管如此，如果您的问题仍然存在并且您仍然被卡住，您可以使用给出的策略来看看会发生什么。

# javascript - Slickgrid - 缺少行

> ID：13540164
> 
> 赞同：0
> 
> 时间：2012-11-24T10:01:55.467
> 
> 标签：javascript, jquery, slickgrid

我正在测试 slickgrid。

**代码**

```
<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <title>Slick Test</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <link rel="stylesheet" href="jquery-ui.css" type="text/css" />
        <link rel="stylesheet" href="slick/css/slick.grid.css" type="text/css" />

        <script src="jquery.js"></script>
        <script src="jquery.event.drag-2.0.min.js"></script>
        <script src="slick/js/slick.core.js"></script>
        <script src="slick/js/slick.grid.js"></script>
        <script src="slick/js/slick.dataview.js"></script>

        <script src="main/js/main.js"></script>

    </head>

    <body>
        <div style="float:left">
            <input placeholder="EAN Code" type="text" id="ean">
            <input placeholder="Quantity"  type="text"id="qty">
            <input placeholder="Amount" type="text" id="amt">
            <input placeholder="Discount" type="text" id="disc">
            <button id="add-product">
                Add Product
            </button>
        </div>

        <br />

        <div id="invoice-grid" style="clear:both">
        </div>

    </body>
</html> 
```

**JS 代码 - main.js**

```
var grid, dataView;

var gridOptions, gridColumns;

var products = []

$(function() {

    gridColumns = [
        {id:'ean', name:'EAN', field:'ean', cssClass: 'grid-cell'},
        {id:'qty', name:'Qty', field:'qty', cssClass: 'grid-cell'},
        {id:'mrp', name:'MRP', field:'mrp', cssClass: 'grid-cell'},
        {id:'disc', name:'Discount', field:'disc', cssClass: 'grid-cell'},
        {id:'net_amt', name:'Net Amt', field:'net_amt', cssClass: 'grid-cell'}
    ];

    gridOptions = {
        editable: true,
        autoEdit: true,
        enableAddRow: false,
        enableCellNavigation: true,
        asyncEditorLoading: false,
        enableColumnReorder: false,
        rowHeight: 35
    };

    dataView = new Slick.Data.DataView();

    grid = new Slick.Grid($('#invoice-grid'), dataView, gridColumns, gridOptions);

    updateRows =  function(updateData) {
        console.log(products);
        dataView.beginUpdate();
        dataView.setItems(products);
        dataView.endUpdate();

        grid.updateRowCount();

        if (updateData) {
            grid.setData(dataView, true);
        }

        grid.render();

    }

    updateRows(false);

    $("#add-product").click(function() {

        ean = $("#ean").val();
        qty = $("#qty").val();
        amt = $("#amt").val();
        disc = $("#disc").val();

        if (ean === '' || qty === '' || amt === '' || disc === '') 
        return;

        newProduct = {
            id: ean,
            ean: ean,
            qty: qty,
            amt: amt,
            disc: disc,
            net_amt: (amt - disc)
        }

        products.push(newProduct)

        updateRows(true);

        $("#ean").val('');
        $("#qty").val('');
        $("#amt").val('');
        $("#disc").val('');

    });

}); 
```

该页面的目的是从输入文本框中获取值并将它们作为新条目放入网格中。我编写的脚本似乎有问题，因为没有创建新行并且`grid-canvas`元素画布如下（无论我添加了多少元素）。

```
<div class="grid-canvas" style="height: 35px; width: 400px;">
    <div class="ui-widget-content slick-row even" style="top:0px">
        <div class="slick-cell l0 r0 grid-cell">1</div>
        <div class="slick-cell l1 r1 grid-cell">1</div>
        <div class="slick-cell l2 r2 grid-cell"></div>
        <div class="slick-cell l3 r3 grid-cell">1</div>
        <div class="slick-cell l4 r4 grid-cell">0</div>
    </div>
</div> 
```

我似乎理解错了 slickgrid 的实现。谁能指导我正确的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:18:38.650

我已经通过将以下样式添加到我的`invoice-grid`

```
width:800px; height: 500px; 
```

我不确定为什么样式会影响行的添加。

# jquery - jQueryMobile：打开对话框并滚动到锚点

> ID：13540166
> 
> 赞同：0
> 
> 时间：2012-11-24T10:02:14.267
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 jQuery Mobile 打开一个对话框：

```
<a href="terms.html" data-rel="dialog" data-anchor="cancellationterms">
    Cancellation terms
</a> 
```

我也尝试附加`#cancellationterms`到`href`属性。但随后什么也没有发生。

如何让它滚动到对话框上的指定锚点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:45:57.753

最后这成功了：

```
var anchor = '';
$('a[data-anchor]').live('click', function() {
    anchor = $(this).data('anchor');
});

$('div[data-role="dialog"]').live('pageshow', function(e, ui) {
    $('.ui-dialog-contain > .ui-content', this).scrollTo(jumpto);
});

$.fn.scrollTo = function(id) {
    var obj = $('#' + id);
    if (obj.length > 0) {
        $(this).scrollTop(obj.position().top);
    }
}; 
```

# embedded - PIC中的计算方程

> ID：13540172
> 
> 赞同：2
> 
> 时间：2012-11-24T10:03:22.703
> 
> 标签：embedded, pic, numerical-analysis

在我问这个问题之前，我先介绍一下问题的背景。

我的 PIC 18F 汇编程序解决了 Rntc 到 T°C 的关系。但最好的精度是 3 位数。

我在组装示例中使用的 NTC 参考电阻是 10000 欧姆，对应于 25°C 的温度。

只有 3 位可用，方程解为 =xF6 ,d246 在 T 的显示屏上显示，小数点在 24 和 6 之间。

计算 T（包括牛顿近似）的时间约为 800us。这个计算时间看起来比 MPlab C 好很多

计算方程 y = 9.228*x*x-840.852*x+25236.82 的 sqrt 的汇编程序遇到了缩放 b2-4ac 的问题……当我尝试包含小数时，这些数字溢出了我的 24 位数学套件，例如我必须使用 a=9 。b=840 c=25236

Q1 使用整数，是否有一些技巧可以使用 24 位数学计算上述数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T10:42:59.103

我认为一个人真的不需要超过大约 10 位的精度。

方程`sqrt(a* x^2 + b*x + c)`, x=178..1196 给出了相当多的线性响应。甚至不必使用查找表进行分段线性逼近。

线性方程为 y=`3.03x-129`

**编辑**：通过注意到 0.03*x ~= 8/256 * x; 可以进一步简化方程。
因此`y=a+(a<<1)+(a>>5) - 131; // 8/256 = 0.03125 to be precise.`

将常数修改为 131 以将误差微调至零均值。这些图显示了相对误差（左）和绝对误差（右）`180<x<1200`

![相对与绝对误差](../Images/291d6853d9f3b2c0d2cf85f98a6c20b2.png)

# interrupt - request_irq 成功。处理程序未调用

> ID：13540173
> 
> 赞同：0
> 
> 时间：2012-11-24T10:03:29.650
> 
> 标签：interrupt, beagleboard, interrupt-handling, irq, gpio

我正在为 BeagleBoard-xM Rev C 上的用户按钮编写一个模块。现在，我只是想在调用中断处理程序时（即按下用户按钮时）打印一条消息。

用户按钮对应于 GPIO 引脚 4。我正在执行 gpio_to_irq(4) 以获取我通过处理程序传递给 request_irq() 的 IRQ 编号，这是成功的。事实上，这是我的 request_irq 调用。

```
irq_res = request_irq(4, interrupt_handler, IRQF_TRIGGER_FALLING, "Interrupt Test", NULL); 
```

我的中断处理程序看起来像这样。

```
static irqreturn_t interrupt_handler(int, void*, struct pt_regs*); 
```

但是当按钮被按下时，中断处理程序永远不会被调用。关于如何调试的任何指示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:19:39.723

我没有将 4 传递给 gpio_to_irq。我的错，我传递了先前 gpiolib 函数调用的返回值。我无法弄清楚，因为变量名称太相似而无法被捕获。我纠正了它。它奏效了！谢谢！

# jquery - jQuery modal and overlay - 在模态 div 中浮动，弄乱了显示

> ID：13540177
> 
> 赞同：0
> 
> 时间：2012-11-24T10:04:00.970
> 
> 标签：jquery, css, modal-dialog

请访问我的临时站点[http://idataonline.idataresearch.com/index.php](http://idataonline.idataresearch.com/index.php)并单击右上角的会员登录。我需要知道我的 css 发生了什么，关于模式登录框和覆盖如何显示不正常。覆盖显示在页面下方并且没有背景颜色。覆盖应该显示使页面变暗并且可以单击以关闭模式。它目前是可点击的，但您必须向下滚动到实际点击它的位置...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:41:06.770

将此 CSS 添加到您的 div 类“ui-widget-overlay”

```
 <style type="text/css">
    width: 1343px;
    height: 1264px;
    z-index: 1001;
    top: 0px;
    position: absolute;
    background-color: black;
    opacity: 0.8;
    cursor: pointer;
 </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:07:49.273

它只是我猜想的那样吗？请详细说明你的问题，如果可能的话显示一些代码。我注意到你的模态的尺寸比屏幕显示的尺寸大，因此你在右边得到更多的滚动

# php - 使用 PHP 发布到博客

> ID：13540178
> 
> 赞同：0
> 
> 时间：2012-11-24T10:04:04.130
> 
> 标签：php, zend-framework, gmail, blogger

我遇到了问题，无法使用客户端 http 身份验证将我的 php 脚本发布到博主。

我已按照[https://developers.google.com/blogger/docs/1.0/developers_guide_php的教程进行操作](https://developers.google.com/blogger/docs/1.0/developers_guide_php)

这是我的代码：

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_Query');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

$user = 'myuserid';
$pass = 'mypassword';
$blogUrl = 'myblog.blogspot.com';
$service = 'blogger';

$gdClient = new Zend_Gdata($client);
$blogID = getBlogId($gdClient, 'http://'.$blogUrl.'/feeds/posts/default');

$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service, null,
        Zend_Gdata_ClientLogin::DEFAULT_SOURCE, null, null, 
        Zend_Gdata_ClientLogin::CLIENTLOGIN_URI, 'GOOGLE');

function createPublishedPost($gdClient, $myBlogId, $title='Hello, world!', $content='I am blogging on the internet.')
{
    $uri = 'https://www.blogger.com/feeds/' . $myBlogId . '/posts/default';
    echo $uri; // nothing wrongs here.
    $entry = $gdClient->newEntry();
    $entry->title = $gdClient->newTitle($title);
    $entry->content = $gdClient->newContent($content);
    $entry->content->setType('text');

    $createdPost = $gdClient->insertEntry($entry, $uri); // I think the error is here.
    $idText = split('-', $createdPost->id->text);
    $newPostID = $idText[2];

    return $newPostID;
}

function getBlogId($gdClient, $feed)
{
    $gdClient = new Zend_Gdata($client);
    $query = new Zend_Gdata_Query($feed);
    $feed = $gdClient->getFeed($query);
    preg_match('/blog-([0-9]+)/', $feed->id->text, $match);
    if (isset($match[1]))
    {
        return $match[1];
    }
    return false;
}

createPublishedPost($gdClient, $blogID); 
```

错误信息是：

```
Fatal error: Uncaught exception 'Zend_Gdata_App_HttpException' with message 'Expected response code 200, got 401 User does not have permission to create new post' in /home/content/36/9549036/html/[MYUSER]/Zend/Gdata/App.php:714 Stack trace: #0 /home/content/36/9549036/html/[MYUSER]/Zend/Gdata.php(221): Zend_Gdata_App->performHttpRequest('POST', 'https://www.blo...', Array, '<atom:entry xml...', 'application/ato...', NULL) #1 /home/content/36/9549036/html/[MYUSER]/Zend/Gdata/App.php(905): Zend_Gdata->performHttpRequest('POST', 'https://www.blo...', Array, '<atom:entry xml...', 'application/ato...') #2 /home/content/36/9549036/html/[MYUSER]/Zend/Gdata/App.php(980): Zend_Gdata_App->post(Object(Zend_Gdata_Entry), 'https://www.blo...', NULL, NULL, Array) #3 /home/content/36/9549036/html/[MYUSER]/test.php(29): Zend_Gdata_App->insertEntry(Object(Zend_Gdata_Entry), 'https://www.blo...') #4 /home/content/36/9549036/html/[MYUSER]/test.php(49): createPublishedPost(Object(Zend_Gdata), '[MYBLOGID]...') #5 {main} thrown in /home/content/36/9549036/html/[MYUSER]/Zend/Gdata/App.php on line 714 
```

有谁之前经历过这个吗？是否有任何工作代码可以用 php 发布博主？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:34:20.883

我发现了这个问题，它是这样工作的。

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_Query');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

$user = $_SESSION['BloggerUsername'];
$pass = $_SESSION['BloggerPassword'];
$blogUrl = $_SESSION['BloggerUrl'];
$service = 'blogger';

global $gData, $gBlogId;

$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service, null,
        Zend_Gdata_ClientLogin::DEFAULT_SOURCE, null, null, 
        Zend_Gdata_ClientLogin::CLIENTLOGIN_URI, 'GOOGLE');

function createPublishedPost($gData, $gBlogId, $myBlogTitle, $myBlogText)
{
    $uri = 'https://www.blogger.com/feeds/' . $gBlogId . '/posts/default';
    $entry = $gData->newEntry();
    $entry->title = $gData->newTitle($myBlogTitle);
    $content = $gData->newContent($myBlogText);
    $content->setType('text');
    $entry->content = $content;
    $entryResult = $gData->insertEntry($entry, $uri);
    //$idText = split('-', $entryResult->id->text);
    //$newPostID = $idText[2];
    if (!empty($_SERVER['HTTP_REFERER'])) {
        header("Location: ".$_SERVER['HTTP_REFERER']);
    } else {
        header("location:*my_website_link*");
    }
    //return $newPostID;
}

function getBlogId($gData, $feed)
{
    $query = new Zend_Gdata_Query($feed);
    $feed = $gData->getFeed($query);
    preg_match('/blog-([0-9]+)/', $feed->id->text, $match);
    if (isset($match[1]))
    {
        return $match[1];
    }
    return false;
}
$gData = new Zend_Gdata($client);
$gBlogId = getBlogId($gData, 'http://'.$blogUrl.'/feeds/posts/default');
createPublishedPost($gData, $gBlogId, $blogTitle, $blogText); 
```

# jquery - 带有 Flippy 插件的 Jquery 鼠标悬停对象无限循环

> ID：13540186
> 
> 赞同：0
> 
> 时间：2012-11-24T10:05:42.590
> 
> 标签：jquery, loops, flippy

我想用Jquery插件Flippy在“鼠标悬停”上翻转一个简单的图像，现在的问题是当我“悬停”它时它会循环。我是 JS 初学者，因此我很抱歉这个可能相当简单的问题..

我的代码如下所示：

```
$(".chameleonclass").mouseover(function() {
$(".chameleonclass").flippy({
content: '<img class="top" src="a1records.jpg" alt="a1records"/>',
direction:"TOP",
duration:"750",
onFinish:function(){
}
});
}); 
```

现在，我想我必须在 onFinish 部分添加一些内容。我已经尝试了我想出的所有方法（结束、停止等），但没有任何效果，当我将鼠标悬停在对象上时，对象只是循环和翻转多次而没有结束。

你能帮我吗？提前感谢您的阅读，祝您周末愉快，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T14:00:10.613

我有同样的问题，但最终设法想通了。这个想法是在第一次发生时关闭事件触发器。然后在鼠标离开时再次触发它。

我希望你能理解代码，但我得到了它的使用。

```
<script>

    $(document).ready(function(){
        $(".flipbox").on("mouseenter",function(){
                $(this).flippy({
                    color_target: "red",
                    verso:"jippii",
                    duration:"500",
                    direction: "TOP",
                });
                $(".flipbox").off("mouseenter");
        });
        $(".flipbox").on("mouseleave",function(){
                $(this).flippyReverse();
                $(".flipbox").on("mouseenter",function(){
                $(this).flippy({
                    color_target: "red",
                    verso:"jippii",
                    duration:"500",
                    direction: "TOP",
                });
                $(".flipbox").off("mouseenter");
        });

        });
    });
</script> 
```

# c# - windows phone 的功能检测？

> ID：13540191
> 
> 赞同：0
> 
> 时间：2012-11-24T10:06:39.767
> 
> 标签：c#, xna, camera, windows-phone-7.1, face-detection

我想知道如何使用以下库创建任意图像检测：http: [//facedetectwp7.codeplex.com/](http://facedetectwp7.codeplex.com/)。在描述中，它指出如果将模型添加到项目中，则可以检测到任何对象。有谁知道如何创建这些模型？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:14:30.650

该模型是一个 XML 文件，它是作为训练 Haar 分类器的结果而创建的。库中包含的 XML 文件是 OpenCV 使用的默认文件。

要为一组自定义对象创建模型文件，您需要大量正图像（具有对象的图像）和负图像（没有对象）。

然后，您将在这两个图像集上“训练”分类器，这将生成一个 xml 文件。

查看[此链接](http://achuwilson.wordpress.com/2011/07/01/create-your-own-haar-classifier-for-detecting-objects-in-opencv/)了解更多信息。

# c - 从 C 中的随机访问文件中编辑/修改和删除记录

> ID：13540193
> 
> 赞同：3
> 
> 时间：2012-11-24T10:07:07.267
> 
> 标签：c, file, updating, random-access

程序应该根据员工ID修改或删除特定记录，在修改部分它将修改后的记录作为新记录写入文件末尾，删除部分只工作一次，然后给我一个分段错误。

修改：

如何修改代码以在同一位置重写已编辑的记录？

```
 #include <stdio.h>
 #include <string.h>
 #include <stdlib.h>
 #include <stdlib.h>

struct record_em{
    int id;
    char name[20];
    int salary;
    int age;
};

int main( void )
{
    struct record_em employee;
    FILE *fp;
    int n;
    int ch;
    fp = fopen("empRecord.dat","rb+");

    printf("Enter Id Number:\n");
    scanf("%d",&n);
    rewind(fp);
    while (!feof(fp)){

        fscanf(fp,"%d %s %d %d", &employee.id, employee.name, &employee.salary, &employee.age);

        if (employee.id==n){
            printf("%d %s %d %d \n",employee.id, employee.name, employee.salary,employee.age);
            printf("\n Do you want to change the name ?\n");
            scanf("%d",&ch);

            if (ch==1){
                printf("Enter new name:\n");
                scanf("%s",employee.name);
            }
            printf("\n Do you want to change the salary ?(y/n)\n");
            scanf("%d",&ch);

            if ( ch==2 ){
                printf("Enter new salary:\n");
                scanf("%d",&employee.salary);
            }
            printf("\n Do you want to change the age ?(y/n)\n");
            scanf("%d",&ch);

            if ( ch==3 ){
                printf("Enter new age:\n");
                scanf("%d",&employee.age);
            }
            fseek(fp,-sizeof(employee),SEEK_CUR);
            fprintf(fp, "%d %s %d %d\n", employee.id, employee.name, employee.salary, employee.age);
            exit(0);
        }
    }
    printf("Record Not Found \n");
    return 0;
} 
```

删除：

如何修改代码以使其根据需要多次删除记录？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <stdlib.h>

struct record_em{
    int id;
    char name[20];
    int salary;
    int age;
};

int main()
{
    struct record_em employee;
    FILE *fp, *ft;
    int n;
    fp = fopen("empRecord.dat","r");
    ft = fopen("Temp.dat","wb+");

    printf("\nEnter ID of employee to delete ");

    scanf("%d",&n);
    rewind(fp);
    while (!feof(fp)){
        fscanf(fp,"%d %s %d %d", &employee.id, employee.name, &employee.salary,  &employee.age);

        if(employee.id!=n){
            fprintf(ft, "%d %s %d %d\n", employee.id, employee.name, employee.salary, employee.age);
        }
    }

    fclose(fp);
    fclose(ft);
    remove("empRecord.dat");
    rename("Temp.dat","EempRecord.dat");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-30T19:01:45.160

这是代码的关键点：

```
void update(char filename[],char name[])
{
    int records=0;
    FILE *fp = fopen(filename,"rb+");
    while(fread(&st,sizeof(st),1,fp)==1)
    {
         if(strcmp(name,st.name)==0)
         {
              printf("\nEnter new name: ");
              scanf("%s",st.name);
              printf("\nEnter new roll no.: ");
              scanf("%d",&st.roll);
              fseek(fp,sizeof(struct student)*records,SEEK_SET);//This is key line..
              fwrite(&st,sizeof(st),1,fp);
         }
         records++; // in the while loop...
    }
    fclose(fp);
} 
```

下面是学生的结构：

```
struct student{
     int roll;
     char name[20];
}st; 
```

这是修改/更新记录的一般方法。您可以对员工结构使用相同的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:04:37.090

我认为这是你的问题，首先你有一个减号，然后看到`sizeof`它有点奇怪，其次`SEEK_CUR`让你比当前文件移动得更远所以看看这里[fseek(), rewind()](http://beej.us/guide/bgc/output/html/multipage/fseek.html)

```
fseek(fp,-sizeof(employee),SEEK_CUR); //This is not the definitive read below.
         ^------minus symbol.  ^------- the type of seek. 
```

我建议你做一些修改：

1.  使用共同点`Formatted File`让您的生活更轻松，记住“完美就是简单”。

2.  用于`SEEK_SET`使用从文件开头开始的相对位置，其次使用.`struct's size`作为参数`sizeof`。

    ```
    fseek( fp, sizeof( struct record_em), SEEK_SET ); 
    ```

3.  使用`member`id 作为接收器的键并使用一系列连续的数字，但显然您应该创建了一个包含 100、1000 个雇主的文件。

    ```
    1 Andrew 20000 27
    ^   ^      ^    ^_____ age 
    |   |      |__________ salary ( I would have used double here)
    |   |_________________ name
    |_____________________ id ( Key for the relative position from the beginning) 
    ```

4.  您将不得不改变主意，当您想象“删除”一条记录时，您将写一个空格（键除外） 示例 想象可怜的 Andrew 被解雇了，您将删除他的记录。

    ```
    1 "Empty space"   0   0
    ^       ^         ^   ^______ age (0 = nothing)
    |       |         |__________ salary (0 = nothing)
    |       |____________________ name ("" = nothing)
    |____________________________ id ( Key for the relative position from the beginning) 
    ```

PD：目前正在添加更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T14:05:02.230

```
SEEK_CUR 
```

偏移量是相对于当前文件指针位置的。因此，实际上，您可以说“移动到我的当前位置加上 30 个字节”或“移动到我的当前位置减去 20 个字节”。例如。`fseek(fp, -30, SEEK_CUR)` 参考。[http://beej.us/guide/bgc/output/html/multipage/fseek.html](http://beej.us/guide/bgc/output/html/multipage/fseek.html)

我不认为他使用该`sizeof()`功能的否定是错误的。但是你最好还是`sizeof(struct record_em)`改用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T10:21:11.140

使用旨在用于操作文本文件 fprintf 的 C 函数来操作二进制文件并不好。

例如，在您的代码中，我看到：

```
fseek(fp,-sizeof(employee),SEEK_CUR);
fprintf(fp, "%d %s %d %d\n", employee.id, employee.name, employee.salary, employee.age); 
```

这会给您带来问题，因为您在文件中作为二进制文件旅行，然后在其上写入字符。您应该改用 fwrite 函数。

我的建议：检查您的整个程序，定义您的持久性策略并与之保持一致。

# c# - C# 中可以使用类初始化器吗？

> ID：13540196
> 
> 赞同：3
> 
> 时间：2012-11-24T10:07:14.660
> 
> 标签：c#, abstract-class, subclassing, boilerplate, object-initializers

在 C# 中，您可以使用对象初始化器[在创建时初始化对象的字段，而无需使用构造函数](http://msdn.microsoft.com/en-us/library/bb384062.aspx)。

现在我想知道是否有类的等价物，这意味着您可以在定义子类时“初始化”类的属性，而无需实际使用覆盖语法，而只需声明已知属性的值是什么。

例子：

```
public abstract class Car {
    public abstract string Name { get; }
}
// usual approach
public class Mustang : Car {
    public overwrite string Name { get { return "Ford Mustang"; } }
}
// my idea of avoiding boilerplate code
public class Mustang : Car { Name = "Ford Mustang" } 
```

有没有办法做到这一点？如果没有，T4 模板有帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T10:14:46.083

为了使 rekire 的示例更清晰，您可以编写如下内容：

```
public abstract class Car
{
    public string Name { get; private set; }

    protected Car(string name)
    {
        this.Name = name;
    }
}

public class Mustang : Car
{
    public Mustang() : base("Mustang")
    {
    }
} 
```

编辑：另一种选择是使用属性，你会写：

```
[CarName("Mustang")]
public class Mustang : Car 
```

...在 . 中编写了适当的反射代码`Car`。我*强烈*建议您不要这样做。当然，属性在您的*真实*环境中可能很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:11:54.297

您可以通过构造函数执行此操作，您需要在其中调用基类构造函数。

```
class car {
    Public string Name {public get; protected set}
} 
```

这基本上也应该有效。

# java - servlet 中的意外异常行为

> ID：13540200
> 
> 赞同：0
> 
> 时间：2012-11-24T10:07:53.897
> 
> 标签：java, exception, servlets

我有以下类，它从属性文件加载数据库详细信息。当文件“dao.properties”丢失时，该类应该抛出 DAOConfigurationException 但我得到了

```
 javax.servlet.ServletException: Servlet execution threw an exception
root cause

java.lang.ExceptionInInitializerError
    com.clone.dao.DAOFactory.getInstance(DAOFactory.java:19)
    com.clone.controller.register.doPost(register.java:35)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

com.clone.dao.DAOConfigurationException: Properties file dao.properties not found in classpath.
    com.clone.dao.DAOProperties.<clinit>(DAOProperties.java:15)
    com.clone.dao.DAOFactory.getInstance(DAOFactory.java:19)
    com.clone.controller.register.doPost(register.java:35)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

在随后的请求中，我得到了这个异常

```
javax.servlet.ServletException: Servlet execution threw an exception
root cause

java.lang.NoClassDefFoundError: Could not initialize class com.clone.dao.DAOProperties
    com.clone.dao.DAOFactory.getInstance(DAOFactory.java:19)
    com.clone.controller.register.doPost(register.java:35)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这是我的代码

```
package com.clone.dao;

import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

public class DAOProperties {
    private static final String PROPERTIES_FILE = "dao.properties";
    private static final Properties PROPERTIES = new Properties();
<b> static{
        ClassLoader classloader = Thread.currentThread().getContextClassLoader();
        InputStream propertiesFile = classloader.getResourceAsStream(PROPERTIES_FILE);

        if(propertiesFile==null){
            throw new DAOConfigurationException("Properties file "+PROPERTIES_FILE+" not found in classpath.");
        } 
        try {
            PROPERTIES.load(propertiesFile);
        } catch (IOException e) {
            throw new DAOConfigurationException("Cannot load properties file '"+PROPERTIES_FILE+"'.", e);
        }
    }
</b>
private String specificKey;

    public DAOProperties(String specificKey)
    {
        this.specificKey=specificKey;
    }

    public String getProperty(String key) throws DAOConfigurationException {
        String fullKey = specificKey+"."+key;
        String property = PROPERTIES.getProperty(fullKey);
        if(property==null||property.trim().length()==0){
            throw new DAOConfigurationException("Property '"+fullKey+"' is missing in properties file '"+
                                                        PROPERTIES_FILE+"'.");
        }
        return property;
    }

} 
```

伙计们，请解释发生了什么这很令人困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:28:58.903

它*正在*抛出`DAOConfigurationException`：

```
com.clone.dao.DAOConfigurationException: Properties file dao.properties
     not found in classpath. 
```

但是，`java.lang.ExceptionInInitializerError`由于您`DAOFactory`正在尝试使用`DAOProperties`. 该类`DAOProperties`无法正确初始化，因为静态初始化程序失败，并且`ExceptionInInitializerError`正是静态初始化程序失败时抛出的内容。

也许您不应该在静态初始化程序中这样做？

# silverlight - Lighthouse（Silverlight Unit Test Runner）挂起然后不执行任何测试——为什么？

> ID：13540201
> 
> 赞同：3
> 
> 时间：2012-11-24T10:07:56.230
> 
> 标签：灯塔, silverlight, unit-testing, silverlight-4.0, xap

我们正在使用[Lighthouse](https://lighthouse.codeplex.com/)对 Silverlight 4 .xap 文件运行单元测试。

在我们的构建服务器上，它会定期但看似随机地执行以下操作：

```
10:18:08 C:\Program Files (x86)\Jenkins\jobs\******\workspace>Lighthouse.exe "******\Bin\Release\******.xap " "测试结果\******.xml"
10:18:10 测试结果文件名：TestResults\******.xml
10:18:10 向 Lighthouse Test Executor 发送信号以开始执行测试。
10:21:54 Lighthouse v1.01 (c) 2011 - 远程单元测试运行开始。
10:21:54 总测试组件：1 总测试方法：61。
10:21:55 测试结果保存到文件：TestResults\******.xml
10:21:55 总测试：61 | 通过的测试：0。测试失败：0
10:21:55 退出 (-1) 因为没有执行单元测试——这不可能，对吧？

```

所以它挂了大约 4 分钟，说运行已经开始，然后没有运行测试并立即停止。

我找不到任何关于出了什么问题的线索——当没有其他构建并行运行时也会发生这种情况，并且在开发人员的机器上测试执行得很好。（**更新：**重新启动我们的构建服务器后，第一次 Lighthouse 测试失败，从那时起所有其他测试似乎都成功了。这让我怀疑某些进程挂在 Lighthouse 需要的某些资源上。）（**更新：**为了完整性: 没有对代码或测试做任何更改，对我来说 Lighthouse 有时会成功，有时会失败。从控制台输出可以看出，很可能 Lighthouse 甚至没有启动任何测试：“测试通过”和“测试”失败”都是0。）

有谁知道从哪里开始寻找可能的原因？

谢谢！！

（我没有用[灯塔](/questions/tagged/lighthouse "显示标记为“灯塔”的问题")标记这个问题，以防止与更知名的同名工具混淆。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:45:14.000

要确定是环境问题还是代码问题，请检查*您*上个月的源代码，并多次运行 lighthouse 并查看失败的次数。

也许已经签入了一些错误的单元测试逻辑？

# jquery - 使用 JQuery 更新筛选的 SharePoint 2010 列表中的列

> ID：13540209
> 
> 赞同：0
> 
> 时间：2012-11-24T10:09:49.197
> 
> 标签：jquery, sharepoint-2010

有人可以帮助我使用 JQuery 或其他方法执行以下操作：

我想用具有 Colomn1="value1" 和 Column2="value2" 的所有记录的值更新列表中的 Column3。

实际上，我将使用 Colomn1="value1" 和 Column2="value2" 过滤 SharePoint 2010 中的列表，然后单击一个按钮，该按钮将使用值更新所有过滤行的 Column3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:34:42.813

此代码将更改 SharePoint 2010 用于显示列表视图的 HTML 表中的 a 列的值。其名称为 ms-listviewtable。第一行是标题，其余行包含列表的数据。

在这个例子中，each() 在 DOM Table Row Elements 之上，而 Cells 代表 DOM TD 元素。我更改了第三列的值。

```
$(".ms-listviewtable tr:not(:first-child)").each(function (index, value ){
value.cells[3].innerText='new value';
 }) 
```

希望这是你的想法。

# matlab - 在matlab中重塑单元格数组

> ID：13540213
> 
> 赞同：0
> 
> 时间：2012-11-24T10:10:58.307
> 
> 标签：matlab

嗨，我有一个名为`vector`69083x2 的单元格数组，现在我想将此单元格数组重塑为 3212762x2，但 reshape(vector,3212762,2) 不起作用。我收到此错误：

> 要 RESHAPE，元素的数量不得更改。

谁能告诉我我该怎么做？

![在此处输入图像描述](../Images/398ea7961128191caa25093c92117e2d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:35:27.433

你的意思是你想让单元阵列更大吗？`reshape`是将相同的元素存储在不同的“形状”中，例如，将 3x2 元胞数组存储为 6x1 元胞数组 - 请注意，在这两种情况下，元素的总数仍为 6。

如果您想扩大元胞数组，只需将某些内容分配给扩大的元胞数组的最后一个元素，如下所示：

```
vector(3212762, 2) = {[]} 
```

现在`vector`大小为 3212762x2。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-24T10:54:59.877

就像桑达尔提到的

```
vector(3212762, 2) = 0 
```

将为您提供 3212762x2 矩阵，其中新行分配为 0。

# apache-flex - 将 customkin 设置为 flex 移动应用程序会使所有组件消失

> ID：13540218
> 
> 赞同：0
> 
> 时间：2012-11-24T10:11:47.080
> 
> 标签：apache-flex

我正在尝试将带有背景图像的自定义皮肤添加到我的应用程序中，该皮肤完全适合任何设备的整个屏幕。这是皮肤：

```
 <?xml version="1.0" encoding="utf-8"?>

    <s:Skin name="CustomMainSkin"
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    alpha.disabled="0.5" >
<s:states>
    <s:State name="normal" />
    <s:State name="disabled" />
</s:states>

<fx:Metadata>
    <![CDATA[ 
    [HostComponent("spark.components.Application")]
    ]]>
</fx:Metadata> 

<!-- fill -->
<s:BitmapImage id="img"
               source="assets/background.jpg"
               scaleMode="stretch"
               fillMode="scale"
               smooth="true"
               left="0" right="0"
               top="0" bottom="0" />

<s:Group id="contentGroup" left="0" right="0" top="0" bottom="0" minWidth="0" minHeight="0" /> 
```

如果我在应用程序上设置皮肤，一切看起来都很好，图像会根据屏幕需要调整大小，但所有组件都会消失，我无法编辑任何视图。

```
 <s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                              xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="240"
                              xmlns:components="views.*"
                              creationComplete="removeTab1DefaultView(event)"
skinClass="skins.CustomMainSkin"     >

<s:ViewNavigator label="Main view" firstView="views.MainView"/>
<s:ViewNavigator label="Online Rankings" firstView="views.RankingsOnline"/>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
      </s:TabbedViewNavigatorApplication> 
```

我尝试使用 SkinnableContainer 直接在视图中设置皮肤。组件以这种方式可见，但图像不会调整大小并且比屏幕大很多。

```
 <?xml version="1.0" encoding="utf-8"?>
        <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="MainView"
    actionBarVisible="false"
    tabBarVisible="false"
    >

        <s:SkinnableContainer skinClass="skins.CustomMainSkin" >
<s:NavigatorContent id="gameBoard" >
</s:NavigatorContent>
<s:Group x="27" y="133" width="297" height="388">
    <s:Button left="33" right="36" top="39" bottom="281" label="Start Game"
              horizontalCenter="-2" verticalCenter="-121" click="button1_clickHandler(event)"/>
    <s:Button x="34" y="146" width="228" label="Rankings" click="rankingsAction(event)"/>
    <s:Button x="32" y="252" width="228" label="Quit"/>
</s:Group>
</s:SkinnableContainer>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>  

     </s:View> 
```

我怎样才能做到这一点？这似乎真的很难和不自然。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T08:32:40.580

这是一个带有 BG 图像的简单皮肤示例。下面是使用它的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin name="CustomPanelSkin"
             xmlns:fx="http://ns.adobe.com/mxml/2009"
             xmlns:s="library://ns.adobe.com/flex/spark"
             xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
             blendMode="normal"
             mouseEnabled="false"
             minWidth="131" minHeight="127"
             alpha.disabled="0.5" alpha.disabledWithControlBar="0.5">
    <!-- states -->
    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
        <s:State name="normalWithControlBar" stateGroups="withControls" />
        <s:State name="disabledWithControlBar" stateGroups="withControls" />
    </s:states>

    <fx:Metadata>
        [HostComponent("spark.components.Panel")]
    </fx:Metadata>

    <fx:Script fb:purpose="styling">
        <![CDATA[

            static private const exclusions:Array = ["background", "titleDisplay", "contentGroup", "controlBarGroup"];

            override public function get colorizeExclusions():Array {
                return exclusions;
            }

            override protected function initializationComplete():void {
                useChromeColor = true;
                super.initializationComplete();
            }

            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void {
                if (getStyle("borderVisible") == true) {

                    background.left = background.top = background.right = background.bottom = 1;
                    contents.left = contents.top = contents.right = contents.bottom = 1;
                } else {

                    background.left = background.top = background.right = background.bottom = 0;
                    contents.left = contents.top = contents.right = contents.bottom = 0;
                }

                var cr:Number = getStyle("cornerRadius");
                var withControls:Boolean = (currentState == "disabledWithControlBar" || currentState == "normalWithControlBar");

                if (cornerRadius != cr) {
                    cornerRadius = cr;
                }

                super.updateDisplayList(unscaledWidth, unscaledHeight);
            }

            private function setPartCornerRadii(target:Rect, includeBottom:Boolean):void {
                target.topLeftRadiusX = cornerRadius;
                target.topRightRadiusX = cornerRadius;
                target.bottomLeftRadiusX = includeBottom ? cornerRadius : 0;
                target.bottomRightRadiusX = includeBottom ? cornerRadius : 0;
            }

            private var cornerRadius:Number;
        ]]>
    </fx:Script>

    <!-- drop shadow can't be hittable so all other graphics go in this group -->
    <s:Group left="0" right="0" top="0" bottom="0">

        <!-- layer 2: background fill -->
        <!--- Defines the appearance of the PanelSkin class's background. -->
        <s:Rect id="background"
                left="1" top="1" right="1" bottom="1">
            <s:fill>
                <s:BitmapFill id="backgroundFill" source="@Embed('Images/BG.jpg')" alpha="0.3" fillMode="repeat" />
            </s:fill>
        </s:Rect>

        <!-- layer 3: contents -->
        <!--- Contains the vertical stack of titlebar content and controlbar. -->
        <s:Group id="contents"
                 left="1" right="1" top="1" bottom="1">
            <s:layout>
                <s:VerticalLayout gap="0" horizontalAlign="justify" />
            </s:layout>

            <s:Group id="contentGroup"
                     width="100%" height="100%" minWidth="0" minHeight="0">
            </s:Group>

        </s:Group>
    </s:Group>
</s:SparkSkin> 
```

用法：

```
<s:Panel id="target"             
             width="100%" height="100%" 
             skinClass="WorkspaceSkin">
    </s:Panel> 
```

# ios - 带有动态内容的滚动视图的 iOS UITableViewCell

> ID：13540222
> 
> 赞同：0
> 
> 时间：2012-11-24T10:12:03.287
> 
> 标签：ios, uitableview, uiscrollview

我正在尝试创建一个表格视图，其中表格视图单元格包含一个滚动视图。滚动视图可以包含一个或两个页面，每个页面包含一个图像视图。请注意，滚动视图只会水平滚动，因此不会干扰将垂直滚动的表格视图的滚动视图。根据内容，我希望使用这些图像视图更新滚动视图，并根据我从服务器收到的响应设置滚动视图内容大小，指示应用程序显示哪些图像。

为了做到这一点，我最初想创建一个自定义 UITableViewCell 子类，并在其中完成所有视图的初始化。

但是，我只是在考虑性能和内存。我知道 iOS 在需要时会自动取消分配已经看到的视图和单元格，并且在尝试显示新内容时会重用旧单元格（通过使用重用标识符）。但是，每个单元格将包含一个滚动视图，其内容大小和子视图将在每个单元格中发生变化。我想使用重用标识符来确保最大性能。

谁能指出我可以设置这样的单元格重用并成功更改每个滚动视图的内容的方式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:55:59.280

您可以使reuseIdentifier 动态化，例如“cell_with_1”、“cell_with_2”、“cell_with_x”，其中 x 是图像的数量

这样，可以在合理的情况下重用相等的单元格（例如，当视图中的图像数量相同时）：“最坏情况”是不重用，尝试时会产生一点开销，但总的来说我认为它是有益的:)

*分配解除分配和子视图的基本添加很昂贵..更改帧或图像对我来说似乎是合理的

# javascript - 使用 jquery 从无序列表中删除标记

> ID：13540226
> 
> 赞同：0
> 
> 时间：2012-11-24T10:13:03.827
> 
> 标签：javascript, jquery

在以下内容中，我需要删除标记标签`<div class="sub">`和`</div`> 但不是 jquery 的内容。这是为了使菜单适应响应式布局。

```
<nav id="top">  
<ul>
    <li class="ti" id="snw"> <a class="mm" href="/snowdepth/">Weather</a>
       <div class="sub">    

          <ul>
               <li><h2>Snowline</h2></li>
                <li><a href="/alpen/nordliche%20ostalpen/">Nordliche Ostalpen</a></li>    
         </ul>

      </div>
    </li>

    <li class="ti" id="blg"> <a class="mm" href="/live/">Weblog</a></li>
</ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:08:29.477

尝试[unwrap()](http://api.jquery.com/unwrap/)：

```
​$('.sub').find('ul').unwrap()​; 
```

本质上，您正在寻找 的所有子元素`.sub`，并将它们展开或删除它们的父元素。

这是演示：http: [//jsfiddle.net/yEseX/](http://jsfiddle.net/yEseX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:14:53.230

你可以这样做。

**[现场演示](http://jsfiddle.net/PryDD/)**

```
$('.sub').parent().html($('.sub').html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:15:23.090

假设您可能有多个 div 与 class `sub`，我建议这样做：

```
var container = $('#top');
container.html(
    container.html().split('<div class="sub">').join('').split('</div>').join('')
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:51:47.317

试试这个，

```
 var content = $(".sub").html(); // stored ".sub" div content
 $(".sub").remove(); // remove ".sub" div
 $("#top #snw").after(content); // insert content where you want 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T10:54:52.977

试试这个：

```
var list = $('#snw');
var html = list.html();
list.html(html.replace('<div class="sub">','').replace('</div>','')); 
```

[演示在这里](http://jsfiddle.net/4k59G/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T11:56:53.450

我认为@Abhilash 的答案是迄今为止最简洁的，但我会稍微修改选择器：

```
$('.sub').contents().unwrap(); 
```

这将删除所有`.sub`元素，将其内容保留在原处。

JsFiddle：http: [//jsfiddle.net/yEseX/2/](http://jsfiddle.net/yEseX/2/)

# c# - 尝试调用 http://twitter.com/account/verify_credentials.xml 时出现错误：（远程服务器返回错误：（401）未授权）

> ID：13540227
> 
> 赞同：0
> 
> 时间：2012-11-24T10:13:09.630
> 
> 标签：c#, twitter

我正在关注[此 URL](http://www.voiceoftech.com/swhitley/index.php/2009/03/twitter-oauth-with-net/)以使用 twitter 登录对我的网站的用户进行身份验证。我能够获得访问令牌，但是当我调用下面的代码时

```
 url = "http://twitter.com/account/verify_credentials.json";
            xml = oAuth.oAuthWebRequest(oAuthTwitter.Method.GET, url, String.Empty); 
```

我收到 401 未经授权的错误。谁能指导我可能是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:01:02.197

我不是 Twitter API 方面的专家，但这里是 dev.twitter 论坛中的一篇文章，似乎与您所经历的非常相似。

[https://dev.twitter.com/discussions/1750](https://dev.twitter.com/discussions/1750)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T23:06:26.480

你的网址是错误的。它是[https://api.twitter.com/1.1/account/verify_credentials.json](https://api.twitter.com/1.1/account/verify_credentials.json)（或[https://api.twitter.com/1/account/verify_credentials.json](https://api.twitter.com/1/account/verify_credentials.json)取决于 Twitter API 的版本（1 或 1.1 ） 你用）。Twitter 最近删除了域名不是 api.twitter.com 的端点和没有 API 版本的端点：[https ://dev.twitter.com/discussions/10803](https://dev.twitter.com/discussions/10803)

如果仍然错误，请确保您正确授权您的请求：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

注意：Twitter 会发回 JSON 数据，而不是 XML。你应该在你的代码中写“ `json = oAuth.oAuthWebRequest(oAuthTwitter.Method.GET, url, String.Empty);`”而不是“ ”。`xml = oAuth.oAuthWebRequest(oAuthTwitter.Method.GET, url, String.Empty);`如果您需要 XML 数据，请使用此 URL：[https](https://api.twitter.com/1/account/verify_credentials.xml) ://api.twitter.com/1/account/verify_credentials.xml 。但这最后一个在 2013 年 3 月之后将不起作用。

# php - 旋转 PNG，然后使用图像透明度重新保存

> ID：13540231
> 
> 赞同：4
> 
> 时间：2012-11-24T10:14:06.520
> 
> 标签：php, rotation, png, transparent, alpha

我在旋转的 PNG 上获取 PNG 透明度时遇到了一些重大问题。

```
$filename = 'bird_up.png';
$source = imagecreatefrompng($filename) or die('Error opening file '.$filename);
imagealphablending($source, false);
imagesavealpha($source, true);
$rotation = imagerotate($source, $degrees, imageColorAllocateAlpha($source, 0, 0, 0, 127));
imagealphablending($source, false);
imagesavealpha($source, true);
header('Content-type: image/png');
imagepng($rotation);
imagedestroy($source);
imagedestroy($rotation); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T11:15:33.563

我在下面添加了一个有效的评论版本

```
<?php
// this file writes the image into the http response,
// so we cant have any output other than headers and the file data
ob_start();

$filename       = 'tibia.png';
$degrees        = 45;

// open the image file
$im = imagecreatefrompng( $filename );

// create a transparent "color" for the areas which will be new after rotation
// r=0,b=0,g=0 ( black ), 127 = 100% transparency - we choose "invisible black"
$transparency = imagecolorallocatealpha( $im,0,0,0,127 );

// rotate, last parameter preserves alpha when true
$rotated = imagerotate( $im, $degrees, $transparency, 1);

// disable blendmode, we want real transparency
imagealphablending( $rotated, false );
// set the flag to save full alpha channel information
imagesavealpha( $rotated, true );

// now we want to start our output
ob_end_clean();
// we send image/png
header( 'Content-Type: image/png' );
imagepng( $rotated );
// clean up the garbage
imagedestroy( $im );
imagedestroy( $rotated ); 
```

演示 来自[维基百科的原始图像](http://de.wikipedia.org/wiki/Datei:Tibia_insulaechorab_transparent.png)

![这是维基百科的原文](../Images/a40a856d62998c99d164d1f03edcff6b.png)

旋转 -45 度，新区域的不透明度约为 50%，用于演示

```
$transparency = imagecolorallocatealpha( $im,0,0,0,55 ); 
```

![旋转 45 度，新区域的不透明度约为 50%，用于演示](../Images/8effdf12967c755e52bec1254890856b.png)

旋转 -45 度，100% 不透明度的新区域

```
$transparency = imagecolorallocatealpha( $im,0,0,0,127 ); 
```

![旋转 45 度，100% 不透明度的新区域](../Images/ce69089eea3f872535d2b777021ffa21.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:10:47.237

![](../Images/13de5c3486823999ca002c1350761184.png)

```
<?php
            $text ="New"; $font = "fonts/AARDV.ttf"; $size = 100;
            function html2rgb()
            {
                $color='FF0000';
                if(strlen($color)==6) 
                list($r, $g, $b)=array($color[0].$color[1],$color[2].$color[3],$color[4].$color[5]);
                elseif (strlen($color) == 3)  
                list($r, $g, $b) = array($color[0].$color[0], $color[1].$color[1], $color[2].$color[2]);
                else 
                return false; 
                $r = hexdec($r); 
                $g = hexdec($g); 
                $b = hexdec($b); 
                return array($r, $g, $b);
            }
            $c=html2rgb(); 
            $bbox = imagettfbbox($size, 0, $font, $text); 
            $width = abs($bbox[2] - $bbox[0]); 
            $height = abs($bbox[7] - $bbox[1]);
            $image = imagecreatetruecolor($width, $height);
            $bgcolor = imagecolorallocate($image, 1, 1,0);
            imagecolortransparent($image, $bgcolor);
            $color = imagecolorallocate($image, $c[0],$c[1],$c[2]);
            $x = $bbox[0] + ($width / 2) - ($bbox[4] / 2); 
            $y = $bbox[1] + ($height / 2) - ($bbox[5] / 2);
            imagefilledrectangle($image, 0, 0, $width - 1, $height - 1, $bgcolor);
            imagettftext($image, $size, 0, $x, $y, $color, $font, $text); 
            $last_pixel= imagecolorat($image, 0, 0);
            for ($j = 0; $j < $height; $j++) 
            { 
                for ($i = 0; $i < $width; $i++)
                {
                    if (isset($blank_left) && $i >= $blank_left) 
                    {
                        break;      
                    } 
                    if (imagecolorat($image, $i, $j) !== $last_pixel)
                    {
                        if (!isset($blank_top))
                        {
                            $blank_top=$j;
                        }
                        $blank_left=$i;break;
                    }
                    $last_pixel=imagecolorat($image, $i, $j);
                }
            }

            $x -= $blank_left;
            $y -= $blank_top;
            imagefilledrectangle($image, 0, 0, $width - 1, $height - 1, $bgcolor);
            imagettftext($image, $size, 0, $x, $y, $color, $font, $text);
            header('Content-type: image/png'); 
            $transparency = imagecolorallocatealpha( $image,0,0,0,127 );
            $image=imagerotate($image, 10,  $transparency, 1);
            imagealphablending( $image, false );
            imagesavealpha( $image, true );
            ob_end_clean();
            imagepng($image);
            imagedestroy($image);
            ?>

            This one not work..Black color
            any one please answer this..

            enter code here 
```

# delphi - ZEOS 数据库库安装后重建 Lazarus 失败

> ID：13540234
> 
> 赞同：1
> 
> 时间：2012-11-24T10:14:33.553
> 
> 标签：delphi, lazarus, zeos

尝试安装 ZEOS 数据库组件，但我在安装步骤失败：错误消息：

```
PPU Loading C:\ProgramData\lazarus\ideintf\units\x86_64-win64\win32\componenttreeview.ppu
PPU Source: componenttreeview.pas not found
PPU Source: C:\ProgramData\lazarus\images\componenttreeview.lrs time 2009/12/05 19:56:40 * componenttreeview.pas(156,31) Fatal: Can not find ComponentTreeView used by ObjectInspector, ppu=..\ideintf\units\x86_64-win64\win32\componenttreeview.ppu, package IDEIntf 
```

我错过了什么来安装组件树视图和其他缺失的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:43:14.260

听起来您有旧文件（早期安装尝试的？）。使用干净的 Lazarus 结帐可能会有所帮助。

# java - 无法在 Android 中为 java 方法创建返回语句

> ID：13540238
> 
> 赞同：0
> 
> 时间：2012-11-24T10:14:49.050
> 
> 标签：java, android, syntax, field, return-value

在下面的方法中，编译器不允许我在 return 语句中返回 String 变量。如果我将局部变量更改为活动的类字段，错误就会消失。但是我只想返回从图像光标获得的字符串。这里有什么问题？如果不可能做到这一点，为什么不可能呢？

我宁愿不使用类的全局字段变量作为返回变量。当我在另一个方法（如 oncreate 内部）中调用该方法时，对从光标获取字符串信息并返回该字符串更感兴趣。

```
 public String checkCursor(){
        if(!filename.equals("234")){

        String[] proj = {MediaStore.Images.Media.TITLE};
        String selection = MediaStore.Images.Media.DATA + "='" + filename +"'";

        imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,    proj, selection, null, MediaStore.Images.Media._ID );
        if( imageCursor != null ){
            if( imageCursor.moveToFirst() ){

       String testString = (String) imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media.IS_PRIVATE));

            }
        }

        }
        return testString;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:16:40.877

您的变量`testString`未在返回的范围内定义。它应该定义在“外部范围”（方法的范围）而不是`if`条件的范围内。

```
 public String checkCursor(){
        String testString = null; 
       // ^^      ^^   
       //note the declaration of testString here!
        if(!filename.equals("234")){

        String[] proj = {MediaStore.Images.Media.TITLE};
        String selection = MediaStore.Images.Media.DATA + "='" + filename +"'";

        imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,    proj, selection, null, MediaStore.Images.Media._ID );
        if( imageCursor != null ){
            if( imageCursor.moveToFirst() ){

       testString = (String) imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media.IS_PRIVATE));

            }
        }

        }
        return testString;

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:18:15.243

这是因为您在`testString`内部声明和初始化，`if`因此如果条件`imageCursor != null`或`imageCursor.moveToFirst()`计算结果为 false，则`testString`根本不可用。

所以像这样使用它：

```
imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,    proj, selection, null, MediaStore.Images.Media._ID );
String testString = null;
if( imageCursor != null ){
   if( imageCursor.moveToFirst() ){
       testString = (String) imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media.IS_PRIVATE));
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T10:18:21.037

问题是你在if语句中声明了testString，想返回的时候可能没有声明。

# python - python os.rename ""当该文件已存在时无法创建该文件

> ID：13540241
> 
> 赞同：3
> 
> 时间：2012-11-24T10:15:01.753
> 
> 标签：python, error-handling, operating-system, rename

K.. 我只是使用我在这里找到的一个简单脚本：

```
import os
from os import rename, listdir

print os.listdir(".")
for filename in os.listdir("."):
    if filename.startswith("colon-"):
        print filename
        os.rename(filename, filename[7:]) 
```

我基本上需要将所有文件（如colon-21.mp3）转换为21.mp3。

但我得到错误`CANNOT CREATE A FILE WHEN THAT FILE ALREADY EXISTS.` 如何解决这个问题？我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T10:20:41.383

问题就在这里：

```
os.rename(filename, filename[7:]) 
```

Python 索引从 0 开始，字符串`"colon-"`只有 6 个字符长，因此使用您的代码，colon-21.mp3 将变为 1.mp3。改为使用该行`filename[6:]`，您的问题应该消失了。

也就是说，像您这样使用硬编码的字符串长度并不是一个好主意。正是由于我们在这里发现的原因，它很容易出错（像这样的硬编码数字通常被称为“幻数”，因为很难说出为什么将它们设置为给定长度）。一个更好的选择如下：

```
os.rename(filename, filename.split('-')[1]) 
```

# wordpress - add_image_size 不工作 Wordpress

> ID：13540242
> 
> 赞同：0
> 
> 时间：2012-11-24T10:15:02.570
> 
> 标签：wordpress, wordpress-theming

我正在尝试在 Wordpress 中设置自定义帖子缩略图大小。我遵循了文档，这非常简单。但不知何故，图像总是设置为一些默认大小。

**在functions.php中** 

```
add_theme_support('post-thumbnails');
add_image_size('a',453,103); 
```

当我使用帖子缩略图打印时`the_post_thumbnail('a');` ，高度为 103（正确）和宽度 100（错误）。为什么被`width`忽视？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:59:14.787

`add_image_size`有第四个参数，`$crop`. 如果设置为 true（硬裁剪），它将强制您的图像为您指定的确切尺寸。参见[法典](http://codex.wordpress.org/Function_Reference/add_image_size#Crop_Mode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:29:01.633

只需在 103 之后添加 ,'' 即可将最后一个参数保留为空

# android - 如何通过在 ViewPager 中显示 TextView 的 SeekBar 控制 TextView 文本大小？

> ID：13540243
> 
> 赞同：0
> 
> 时间：2012-11-24T10:15:08.130
> 
> 标签：android

我想`TextView`借助 a来控制`SeekBar`的`TextView`大小必须显示在里面。请帮帮我。`SeekBar``TextView``TextView``ViewPager`

以下是我的代码，

```
public class MainActivity extends FragmentActivity {
    TextView tv;
    SeekBar seek;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        seek = (SeekBar) findViewById(R.id.seekBar1);
        /** Getting a reference to the ViewPager defined the layout file */
        ViewPager pager = (ViewPager) findViewById(R.id.pager);

        /** Getting fragment manager */
        FragmentManager fm = getSupportFragmentManager();

        /** Instantiating FragmentPagerAdapter */
        MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

        /** Setting the pagerAdapter to the pager object */
        pager.setAdapter(pagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class MyFragmentPagerAdapter extends FragmentPagerAdapter {

        final int PAGE_COUNT = 5;

        /** Constructor of the class */
        public MyFragmentPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        /** This method will be invoked when a page is requested to create */
        @Override
        public Fragment getItem(int arg0) {

            MyFragment myFragment = new MyFragment();
            Bundle data = new Bundle();
            data.putInt("current_page", arg0 + 1);
            myFragment.setArguments(data);
            return myFragment;
        }

        /** Returns the number of pages */
        @Override
        public int getCount() {
            return PAGE_COUNT;
        }

        public CharSequence getPageTitle(int position) {
            return "Page #" + (position + 1);
        }

    }

    public class MyFragment extends Fragment {
        MainActivity m;
        int mCurrentPage;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            /** Getting the arguments to the Bundle object */
            Bundle data = getArguments();

            /** Getting integer data of the key current_page from the bundle */
            mCurrentPage = data.getInt("current_page", 0);

        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View v = inflater.inflate(R.layout.myfragment_layout, container,
                    false);
            tv = (TextView) v.findViewById(R.id.tv);

            tv.setText("You are viewing the page #" + mCurrentPage + "\n\n"
                    + "Swipe Horizontally left / right");
            return tv;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:25:31.113

我猜你`SeekBar`在外面`ViewPager`。首先`OnSeekBarChangeListener`在`SeekBar`:

```
private OnSeekBarChangeListener mListener = new OnSeekBarChangeListener() {

    // ...

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {         
        if (fromUser) {
            MyFragment mf = (MyFragment) getSupportFragmentManager()
                    .findFragmentByTag("android:switcher:" + R.id.pager + ":" + mCurrentItem);
            if (mf != null && mf.getView() != null) {
                mf.updateText(progress);
            }
            mf = (MyFragment) getSupportFragmentManager()
                    .findFragmentByTag("android:switcher:" + R.id.pager + ":" + mCurrentItem - 1);
            if (mf != null && mf.getView != null) {
                mf.updateText(progress);
            }        
            mf = (MyFragment) getSupportFragmentManager()
                    .findFragmentByTag("android:switcher:" + R.id.pager + ":" + mCurrentItem + 1);
            if (mf != null && mf.getView != null) {
                mf.updateText(progress);
            }        
        }
    }
}; 
```

where`mCurrentItem`是`int`将存储当前页面的字段`ViewPager`：

```
private int mCurrentItem = 0;
// ... in the onCreate method
seek.setMax(100); // the maximum for the TextView size
seek.setProgress(50); // the starting textSize for the TextView
seek.setOnSeekBarChangeListener(mListener); 
```

您还需要一个`ViewPager.OnPageChangeListener`更新`ViewPager`字段`mCurrentItem`：

```
pager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int position) {
            mCurrentItem = position;
            MyFragment mf = (MyFragment) getSupportFragmentManager()
                    .findFragmentByTag("android:switcher:" + R.id.pager + ":" + position);
            if (mf != null && mf.getView() != null) {
                mSeekBar.setOnSeekBarChangeListener(null);
                mSeekBar.setProgress((int) (mf.getTextSize()));
                mSeekBar.setOnSeekBarChangeListener(mListener);
            }
        }
                    // ...
} 
```

不要忘记将此方法添加到您的片段类中：

```
public void updateText(int progress) {
    textSize = progress;       
        ((TextView)getView().findViewById(R.id.the_textview_id)).setTextSize(textSize);         
} 
```

和

```
public float getTextSize() {
   return textSize;
} 
```

`mTextsize`片段类中将保存文本大小的字段在哪里：

```
private float textSize = 50; 
```

刚刚意识到我可能误解了这个问题。如果您想更新`TextView`大小、宽度/高度，那么不要像我的答案那样设置文本，只需`LayoutParams`从 中检索`TextView`并根据需要进行更新。

# android - 项目上的 Android 列表视图在下一个屏幕中单击进入页面查看器并滑动

> ID：13540246
> 
> 赞同：1
> 
> 时间：2012-11-24T10:16:18.863
> 
> 标签：android, android-listview, android-activity, swipe

我有一个`listview`包含项目 Apple，Banana，Orange ...在第二个屏幕中`activity` ，当我单击 Apple 上的特定项目时，它会导航到详细信息屏幕

这里的输出必须通过点击 --> Apple ..如果我滑动页面然后香蕉和下一次滑动橙色

苹果-->香蕉-->橙子

如果我点击香蕉——>那么它必须看起来像香蕉，然后向左滑动苹果..然后向右滑动......橙色。

因此，我在第二个屏幕中单击了哪个项目（香蕉）`listview`，它必须出现在详细信息屏幕上，左滑上一个列表项目，右滑列表中的下一个项目。

香蕉-->左滑苹果->右滑橙色

如果我点击橙色 - >那么它必须看起来像橙色然后向左滑动香蕉..然后下一次向左滑动......橙色。香蕉

橙色-->左滑香蕉--->下一次左滑-->苹果

但是对于单击`listview`...的每个项目的所有案例，我都会得到像 Apple--> Banana--> Orange 这样的输出。

```
public class SecondScreen extends Activity {
ListView listView;
LayoutInflater lay;
    MyApplication app; 
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState); 

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.second);

app = ((MyApplication) getApplicationContext());

    listView = (ListView) findViewById(R.id.yearlistss);
        listView.setAdapter(new MyAdapter(SecondScreen.this,app.totalvalue));
    listView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, final int arg2,
                long arg3) {        

            Intent detailIntent =new Intent(SecondScreen.this, Details.class);          

            startActivity(detailIntent);            
        }
    });

    }

public class MyAdapter extends BaseAdapter {

            Context context = null;

            private ArrayList<String> temperList1;

            public MyAdapter(SecondScreen secondScreen, ArrayList<String> totalvalue) {

                this.temperList1 = totalvalue;

            }

            public int getCount() {
                // TODO Auto-generated method stub
                return temperList.size();

            }

            public Object getItem(int position) {
                // TODO Auto-generated method stub
                return temperList;
            }

            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return position;
            }

            public View getView(int position, View convertView, ViewGroup parent) {
                // TODO Auto-generated method stub

                View layout = null;

                TextView totalval = null;

                if (convertView == null) {

                    lay = LayoutInflater.from(getApplicationContext());
                    layout = lay.inflate(R.layout.secondlist, null);

                    totalval = (TextView) layout.findViewById(R.id.total);                  

                } else {
                    layout = convertView;
                }                       

                 totalval.setText("" + temperList1.get(position));

                return layout;
    }

        }

}

public class MyApplication extends Application {

    ArrayList<String> totalvalue  = new ArrayList<String>();

}

public class Details extends FragmentActivity{

    MyApplication app;
    ViewPager pager;
  MyFragmentPagerAdapter pagerAdapter;     
 public static int position ;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.detail);    
    app = ((MyApplication) getApplicationContext());
    pager = (ViewPager) findViewById(R.id.pager);

    FragmentManager fm = getSupportFragmentManager();      
    pagerAdapter = new MyFragmentPagerAdapter(fm,app.totalvalue);   
      pager.setAdapter(pagerAdapter);

  }

public static class MyFragmentPagerAdapter extends FragmentPagerAdapter {

    private final  ArrayList<String> temperList;

    public MyFragmentPagerAdapter(FragmentManager fm, ArrayList<String> totalvalue ) {
         super(fm);
         this.temperList = totalvalue;
    }

    public Fragment getItem(int position) {

        return ThingFragment.newInstance((temperList.get(position)));
    }

    @Override
    public int getCount(){

    return temperList.size();

    }

     private static class ThingFragment extends Fragment {       
            private String name1;
         static ThingFragment newInstance(String string ) {

                ThingFragment f = new ThingFragment();
                Bundle args = new Bundle();

        args.putString("name",string );
                f.setArguments(args);

                return f;
            }

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                name1 = getArguments().getString("name");
            }

            @Override
            public View onCreateView(LayoutInflater inflater, ViewGroup container,                       Bundle savedInstanceState) {

                View v = inflater.inflate(R.layout.myfragment_layout, container, false);
                TextView t = (TextView)v.findViewById(R.id.prodcutt);
                t.setText(""+ name1);
                return v;
        }

    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:29:56.800

在`OnItemClickListener`您的水果列表中，您应该传递所选水果的位置，`Intent`以便您可以在详细信息活动中知道单击了哪个水果，如下所示：

```
Intent detailIntent =new Intent(SecondScreen.this, Details.class);          
detailIntent.putExtra("fruitPosition", arg2);
startActivity(detailIntent); 
```

然后在您的详细信息活动中，您将检索该数字并`ViewPager`相应地定位：

```
setContentView(R.layout.detail);    
app = ((MyApplication) getApplicationContext());
pager = (ViewPager) findViewById(R.id.pager);
FragmentManager fm = getSupportFragmentManager();      
pagerAdapter = new MyFragmentPagerAdapter(fm,app.totalvalue);   
pager.setAdapter(pagerAdapter);
Intent startIntent = getIntent();
int fruitPosition = startIntent.getIntExtra("fruitPosition", 0);
pager.setCurrentItem(fruitPosition); 
```

# perl - 是否可以在 if 的语句修饰符形式中包含多个语句？

> ID：13540247
> 
> 赞同：3
> 
> 时间：2012-11-24T10:16:20.580
> 
> 标签：perl

用 Project Euler 自学 Perl。任何人，

```
print "Hei" if 1==1; 
```

奇迹般有效。

是否可以在 if 之前包含多个语句，就像这样

```
{print "4";print="2";} if 4!=2; 
```

我知道特定的语法不起作用，但我认为我想要做的很明显。可能与否？

附言。我也知道我可以定期这样做

```
if(){} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T10:32:26.467

1）如前所述，您可以使用`do`块：

```
do {print "4";print "2";} if 4!=2; 
```

2）您可以像在 C 中一样使用逗号：

```
print("4"), print("2") if 4!=2; 
```

请注意，在这种情况下，您必须用括号书写。

3) 我们知道 print() 返回“1”，所以：

```
print("4") && print("2") if 4!=2; 
```

这将在第一个命令返回 true 时起作用。

4) 使用二元运算符：

```
print("4") | print("2") if 4!=2;
print("4") & print("2") if 4!=2;
print("4") ^ print("2") if 4!=2;
# etc 
```

我认为这应该总是有效，但不是通常的方式。

5）使用“阵列”

```
(print("4"), print("2")) if 4!=2; 
```

6) 连接

```
print("4") . print("2") if 4!=2; 
```

7)`man perlop`并找到更多;)

*) 写一个好人：

```
if( 4!=2 ) {
   print("4");
   print("2");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-24T10:20:05.627

只需`do`在它前面添加一个：

```
do {print "4";print="2";} if 4!=2; 
```

请注意，我不会在任何现实生活场景中推荐这种代码。正常的

```
if (condition)
{
    code;
} 
```

form 更加熟悉，更易于阅读和调试，并且有缩进来指导读者了解控制流程。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-24T10:18:48.403

您可以将其包装在一个`do`块中：

```
do {print 1; print 2; } if 1; 
```

# mysql - 15分钟分组记录

> ID：13540248
> 
> 赞同：0
> 
> 时间：2012-11-24T10:16:26.337
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想使用下面的查询根据时间戳列每 15 分钟对记录进行一次分组，但前两条记录的差异只有 10 分钟。

导轨代码：

```
select("DATE_FORMAT(reading_on,'%H:%i') as date,
  ROUND(UNIX_TIMESTAMP(reading_on)/(900)) as fif ,
  max(power) as total").group("fif").where("imei= #{site}" ).order("fif asc") 
```

MYSQL查询：

```
SELECT DATE_FORMAT(reading_on,'%H:%i') as date,
  ROUND(UNIX_TIMESTAMP(reading_on)/(900)) as fif ,
  max(power) as total FROM `clarodetails` 
WHERE (imei= 353469040778516) 
  AND (date(reading_on) between '2012-11-18 00:00:00' 
  AND '2012-11-18 23:59:59') 
GROUP BY fif 
ORDER BY fif asc LIMIT 15 
```

输出： ![输出](../Images/8872b34306f1a99253c66ac07cdc77eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:11:37.183

你可以使用这个：

```
SELECT
  DATE_FORMAT(
    FROM_UNIXTIME(UNIX_TIMESTAMP(reading_on) -
      MOD(UNIX_TIMESTAMP(reading_on), 900)), '%H:%i') as fif,
  max(power) as total
FROM `clarodetails` 
WHERE
  (imei= 353469040778516) 
  AND (date(reading_on) >= '2012-11-18')
  AND (date(reading_on) <  '2012-11-19') 
GROUP BY fif 
ORDER BY fif asc LIMIT 15 
```

我也不想使用`between '2012-11-18 00:00:00' and '2012-11-18 23:59:59'`（你总是会错过一些`reading_on`在 23:59:59 之后但在午夜之前的记录......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:45:17.683

这可能是由于混合了聚合函数和非聚合函数。第一个结果列未聚合，因此结果集显示查询遇到的该列的第一个值。在聚合中包含日期列：

```
...GROUP BY fif, date... 
```

# google-app-engine - 如何编写 JDO 查询以根据长属性对结果进行排序？

> ID：13540253
> 
> 赞同：1
> 
> 时间：2012-11-24T10:17:07.740
> 
> 标签：google-app-engine, jdo, jdoql

我想编写一个 JDO 查询，它获取广告类的所有对象，然后根据 long 类型的时间属性对其进行排序。为了获取所有广告对象，我使用以下查询。

```
 List<Advertisement> annonces = null;
 Query query = pm.newQuery(Advertisement.class);
 advertisements = (List<Advertisement>) query.execute(); 
```

我想添加一个过滤器，它应该根据广告类的长属性对结果进行排序。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:35:33.067

这个查询解决了我的问题：

```
 Query query = pm.newQuery(Annonce.class);
 query.setOrdering("timeOfAdvertisement desc");
 annonces = (List<Annonce>) query.execute(); 
```

# uml - 与类图中的类的多个关系

> ID：13540270
> 
> 赞同：0
> 
> 时间：2012-11-24T10:18:20.763
> 
> 标签：uml, class-diagram

在类图中，是否可以有两个具有多个关系的类？比如泛化关系和组合关系？

例如， ![](../Images/f1233906bd15746578a509681b3c7f7b.png)

您可以具有组合关系或泛化关系。冷冻巧克力`is a`巧克力。但是如果你破坏巧克力类，冷冻巧克力类也会被破坏。这也使它成为一种组合关系。

但是您可以将两者都放在同一张图表上，还是必须坚持一个？在这种情况下是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:59:04.437

这是一种泛化关系，`FrozenChocolate`是一种`Chocolate`但增加了额外的属性。它不是一个组合，你不能说它`Chocolate`有一个`FrozenChocolate`。

`Chocolate`你关于破坏导致也被破坏的论点`FrozenChocolate`是无效的。这些不是对象实例。你不能说破坏`Animal`就意味着`Dog`被破坏。

# g++ - 失踪 ： 没有这样的文件或目录

> ID：13540274
> 
> 赞同：1
> 
> 时间：2012-11-24T10:19:04.377
> 
> 标签：g++, ofstream

运行 Ubuntu 12.04，使用 g++ 编译器并安装了 essential-build。目前试图让一个小程序来工作，代码如下：

```
#include "Muon.h"
#include "Electron.h"
#include "Photon.h"

#include <string>
using std::string;

#include <iostream>
using std::cout;
using std::cin;
using std::endl;

#include <ofstream>
using std::ofstream;
#include <vector>
using std::vector;

using namespace std;
int main(){
  cout << "Let's create a Particle vector!" << endl;
  Electron* a = new Electron(10.0,20.0,30.0);
  cout << "Electron created" << endl;

  Muon* b = new Muon(30.0,20.0,10.0);
  cout << "Muon created" << endl;

  Photon* c = new Photon(20.0,10.0,30.0);
  cout << "Photon created" << endl;

  vector<Particle*> particlesContainer;
  particlesContainer.push_back(a);
  particlesContainer.push_back(b);
  particlesContainer.push_back(c);
  int size = particlesContainer.size();
  cout << "size is: " << size << endl;

  ofstream file("Muon_Vector.data");
  if (file.is_open()){
    for (int i = 0; i < size; i++){
      file << particlesContainer[0]->getType << endl;
    }
  }
  else {cout << "Unable to open file" << endl;}
  file.close();
  return 0;
} 
```

在尝试编译时，我收到错误：

> “intParticles.cpp:15:20：致命错误：ofstream：没有此类文件或目录编译终止。”

这是在输入：“g++ -Wall Particle.cpp intParticles.cpp -o run”之后

任何有关出了什么问题的帮助将不胜感激。我以为`ofstream`是标准库的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T10:48:37.823

ofsteam 是类但不是头文件。它在“fstream”文件中定义

# google-chrome-extension - Chrome 扩展 - 立即卸载事件页面

> ID：13540276
> 
> 赞同：0
> 
> 时间：2012-11-24T10:19:23.567
> 
> 标签：google-chrome-extension

我是 Chrome 扩展程序开发的新手。我编写了一个扩展程序，每次创建新选项卡时都会显示通知。它可以工作，但是如果我打开一个选项卡并立即打开另一个选项卡，则通知将仅显示第一个选项卡。

在[Chrome 扩展文档](http://developer.chrome.com/extensions/event_pages.html#lifetime)中，我读到了这个：

> 一旦事件页面空闲了一小段时间（几秒钟），就会调度 chrome.runtime.onSuspend 事件。

显然它解释了为什么第二个标签没有通知。是否可以立即卸载事件页面（即一旦显示通知），而无需等待几秒钟？

这是我的代码：

**清单.json**

```
{
    "name": "test",
    "version": "1.0",
    "description": "notification test",
    "manifest_version": 2,
    "permissions": [ "tabs", "notifications" ],
    "background": { "scripts": ["background.js"], "persistent": false }
} 
```

**背景.js**

```
var notification = webkitNotifications.createNotification(
    '48.png',
    'hello',
    'this is a test'
);

chrome.tabs.onCreated.addListener(function(tab) {
    notification.show();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:19:58.433

**代码 a)**

***清单.json***

```
{
    "name": "test",
    "version": "1.0",
    "description": "notification test",
    "manifest_version": 2,
    "permissions": [ "tabs", "notifications" ],
    "background": { "scripts": ["background.js"], "persistent": false },
    "web_accessible_resources": [
    "48.png"
  ]
} 
```

***背景.js***

```
function notify(tab){
    console.log(tab);
    var notification = webkitNotifications.createNotification(
        '48.png',
        'hello',
        'this is a test'
    );
    notification.show();
}

chrome.tabs.onCreated.addListener(notify); 
```

[在此解决方案中，如果由于https://code.google.com/p/chromium/issues/detail?id=162543](https://code.google.com/p/chromium/issues/detail?id=162543)而第一次/在另一个选项卡之后创建新选项卡，您将看到两个通知。但是在这里，您会被事件页面而不是背景页面所吸引。

**代码 b)**

通过将事件页面制作为背景页面，您可以获得所需的功能运行；但是，如果您特别关注它，请不要使用事件页面。

***清单.json***

```
{
    "name": "test",
    "version": "1.0",
    "description": "notification test",
    "manifest_version": 2,
    "permissions": [ "tabs", "notifications" ],
    "background": { "scripts": ["background.js"], "persistent": true },
    "web_accessible_resources": [
    "48.png"
  ]
} 
```

***背景.js***

```
function notify(tab){
    console.log(tab);
    var notification = webkitNotifications.createNotification(
        '48.png',
        'hello',
        'this is a test'
    );
    notification.show();
}

chrome.tabs.onCreated.addListener(notify); 
```

# c# - 使用 c# 控制扬声器音量

> ID：13540283
> 
> 赞同：0
> 
> 时间：2012-11-24T10:20:20.697
> 
> 标签：c#, audio, windows-7

是否有任何简单的方法可以使用 c# 控制 Windows 7 中的单个扬声器音量？

我只想将音量设置为“预设”，因为 Windows 喜欢随机重置它们......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:02:19.387

从这里开始，

在 Vista 和 Win 7 的 CoreAudio API 中使用[IAudioMeterInformation](http://msdn.microsoft.com/en-us/library/dd368227%28VS.85%29.aspx)。

[NAudio](http://naudio.codeplex.com)中提供了托管包装器（从 MMDevice 获取 AudioMeterInformation）。

也检查一下[Get Master Sound Volume in c#](https://stackoverflow.com/questions/2534595/get-master-sound-volume-in-c-sharp)

# asp.net - 运行示例应用程序时出错，未捕获错误：SignalR：未找到 jQuery

> ID：13540284
> 
> 赞同：3
> 
> 时间：2012-11-24T10:20:22.390
> 
> 标签：asp.net, visual-studio-2010, signalr

我是 asp.net 的新手。我正在学习 SignalR，正在经历这个[`tutorial`](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)。如教程中所述，我已经正确创建了所有内容。现在，当我运行**Console Application**时，错误 --> “发生了一个或多个错误。” 在`hubConnection.Start().Wait();`.（控制台应用程序仍在运行）。无论如何，我什至尝试运行没有给出任何错误但按钮没有执行任何操作的**Web 应用程序**`broadcast`（我认为它应该）。当我检查**Web 应用程序**中的代码时，我看到其中一个脚本源带有绿色涂鸦。这是图像。

![在此处输入图像描述](../Images/679b40a77f099e9f0bf211cdb4b2138f.png)

请解释我做错了什么..

**编辑**：我正在使用 ASP.NET 开发服务器。

**Edit2**：我在 Google Chrome 控制台中遇到的错误是：

```
Uncaught Error: SignalR: jQuery not found. Please ensure jQuery is referenced before the SignalR.js file. jquery.signalR-1.0.0-alpha2.min.js:10
Uncaught TypeError: Cannot read property 'signalR' of undefined hubs:17
Uncaught ReferenceError: $ is not defined 
```

**答**：我刚刚在所有脚本的代码中添加了对 jQuery 的引用，并且“找不到文件”错误是粗心的，因为它是在服务器端运行的。

***链接也已参考 jQuery 进行了更新***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-08T09:13:00.963

只是对于遇到此问题的其他人，我犯了一个错误，即从[教程](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)中复制代码并更新到最新版本的 SignalR。版本明显改变了，这需要在脚本参考中更新，即

jQuery src 应该是（取决于您安装的 signalR 版本）：

```
<script src="Scripts/jquery.signalR-1.1.3.js"></script> 
```

同样的事情显然适用于标准的 jQuery 库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T11:33:59.653

错误消息完全描述了问题所在：

> 未捕获的错误：SignalR：找不到 jQuery。请确保在 SignalR.js 文件之前引用 jQuery。

您需要包含 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T11:31:33.467

尝试`"signalr/hubs"`代替`"/signalr/hubs"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T07:26:57.950

今天我将jQuery和SignalR升级到2.2.0，虽然我在SignalR之前添加了jQuery，但无法加载jQuery。

而且，我将 jQuery 降级为 2.1.4 系统运行良好。

```
<script type="text/javascript" src="Scripts/jquery-2.1.4.js"></script>
<script type="text/javascript" src="Scripts/jquery.signalR-2.2.0.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-14T10:02:05.023

如果 jQuery 版本是使用带有 的 npm 定义的`*`，例如：`"jquery": "*",`在 package.json 中并且该版本已升级，您可能还会看到与此非常相似的问题。

所以降级jQuery的版本：`"jquery": "2.2.4",`

# php - 从字符串中删除括号

> ID：13540288
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:21:07.917
> 
> 标签：php, preg-replace

我想从通过循环运行的一组字符串中删除所有括号。我见过的最好的方法是使用 preg_replace()。但是，我很难理解模式参数。

以下是循环

```
 $coords= explode (')(', $this->input->post('hide'));
        foreach ($coords as $row)
        {
            $row = trim(preg_replace('/\*\([^)]*\)/', '', $row));
            $row = explode(',',$row);
            $lat = $row[0];
            $lng = $row[1];
        } 
```

这就是“隐藏”的价值。

```
 (1.4956873362063747, 103.875732421875)(1.4862491569669245, 103.85856628417969)(1.4773257504016037, 103.87968063354492) 
```

据我所知，这种模式是错误的。我从另一个线程得到它，我试图阅读模式但无法得到它。我的时间很短，所以我在这里发布了这个，同时也在网络的其他部分寻找其他方式。有人可以为我提供正确的模式吗？或者有更简单的方法吗？

编辑：啊，刚刚了解了 preg_replace() 的工作原理。显然我误解了它是如何工作的，谢谢你的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:30:30.933

我完全不明白你为什么需要`preg_replace`. `explode()`删除分隔符，因此您所要做的就是分别删除第一个和最后一个字符串上的左括号和右括号。你可以使用`substr()`它。

获取数组的第一个和最后一个元素：

```
$first = reset($array);
$last = end($array); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:27:33.187

我看到你实际上想提取所有坐标

如果是这样，最好使用 preg_match_all：

```
$ php -r '
preg_match_all("~\(([\d\.]+), ?([\d\.]+)\)~", "(654,654)(654.321, 654.12)", $matches, PREG_SET_ORDER);
print_r($matches);
'
Array
(
    [0] => Array
        (
            [0] => (654,654)
            [1] => 654
            [2] => 654
        )

    [1] => Array
        (
            [0] => (654.321, 654.12)
            [1] => 654.321
            [2] => 654.12
        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:25:14.953

> “这就是 $coords 的价值。”

如果 $coords 是一个字符串，那么你的 foreach 没有意义。如果该字符串是您的输入，则：

```
$coords= explode (')(', $this->input->post('hide')); 
```

此行从您的字符串中删除了内括号，因此您的 $coords 数组将是：

*   (1.4956873362063747, 103.875732421875
*   1.4862491569669245, 103.85856628417969
*   1.4773257504016037, 103.87968063354492)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:25:59.067

该`pattern`参数接受正则表达式。该函数返回一个新字符串，其中与正则表达式匹配的原始字符串的所有部分都被第二个参数替换，即`replacement`

仅`preg_replace`在原始字符串上使用怎么样？

```
preg_replace('#[()]#',"",$this->input->post('hide')) 
```

要剖析您当前的正则表达式，您正在匹配：

```
an asterisk character, 
followed by an opening parenthesis,
followed by zero or more instances of 
    any character but a closing parenthesis
followed by a closing parenthesis 
```

当然，这永远不会匹配，因为分解字符串会从块中删除右括号和左括号。

# objective-c - 在 ubuntu 的 GNUStep 中编译 Objective c 时出错

> ID：13540294
> 
> 赞同：0
> 
> 时间：2012-11-24T10:22:15.383
> 
> 标签：objective-c, compiler-errors, gnustep

尝试编译我的程序时显示此错误。

```
error: #error The current setting for native-objc-exceptions does not match that of gnustep-base ... please correct this. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:23:21.827

最好从主干安装 GNUstep，而不是使用分销商的软件包，同时也可以将 gcc 换成 clang。

一些有用的构建脚本。它甚至可以为你从 svn 获取东西。 [http://svn.gna.org/svn/etoile/trunk/Etoile/BuildScripts/](http://svn.gna.org/svn/etoile/trunk/Etoile/BuildScripts/)

# ajax - ajax调用后处理onclick函数

> ID：13540298
> 
> 赞同：6
> 
> 时间：2012-11-24T10:23:05.323
> 
> 标签：ajax, jsf, jsf-2

提交表单（ajax 调用）后，我正在尝试选择并关注所选组件 ID。

```
<script>
var myFunc = function() {
  document.getElementById('form:#{bean.componentId}').focus();
  document.getElementById('form:#{bean.componentId}').select();
};

$(document).ready(function() {
  myFunc();
});
</script>

<h:form id="form">
  <h:commandButton action="#{bean.save}" onclick="return myFunc();" ...>
    <f:ajax execute="@form" render="@form"/>
  </h:commandButton>
  ...
</h:form> 
```

此解决方案有效，但问题是，`<f:ajax>`称为 AFTER `onclick`，因此在选择组件后呈现表单，并清除焦点。

表单呈现后如何调用我的函数？

**更新：（**例如我试过）

*   添加`onevent="myFunc();"`到`f:ajax`=> 导致刷新页面
*   添加`onevent="myFunc()"`到=> 与属性`f:ajax`相同的行为`onclick`
*   接下来`f:ajax`是`onevent`attr。=> 还是一样

**update2**（它应该如何工作）：

*   提交按钮是ajax调用
*   根据需要清洁表格
*   专注于适当的领域（取决于一些用户选择的因素）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-24T11:48:12.527

处理程序实际上会被调用 3次`onevent`，它应该指向一个函数名，而不是函数本身。一次是在发送ajax 请求之前，一次是在ajax 响应到达之后，一次是在成功更新HTML DOM 时。您应该为此检查`status`给定数据参数的属性。

```
function listener(data) {
    var status = data.status; // Can be "begin", "complete" or "success".

    switch (status) {
        case "begin": // Before the ajax request is sent.
            // ...
            break;

        case "complete": // After the ajax response is arrived.
            // ...
            break;

        case "success": // After update of HTML DOM based on ajax response..
            // ...
            break;
    }
} 
```

因此，在您的特定情况下，您只需添加检查状态是否为`success`.

```
function myFunc(data) {
    if (data.status == "success") {
        var element = document.getElementById('form:#{bean.componentId}');
        element.focus();
        element.select();
    }
} 
```

您需要按名称引用该函数：

```
<f:ajax ... onevent="myFunc" /> 
```

# iphone - iphone中的淡出图像动画

> ID：13540300
> 
> 赞同：0
> 
> 时间：2012-11-24T10:23:18.727
> 
> 标签：iphone, ios, uiviewanimation

> **可能的重复：**
> [iphone 褪色的图像](https://stackoverflow.com/questions/5618964/iphone-fading-of-images)

如何在一组图像（图像数组）中实现淡出动画。图像将一张一张出现。当我使用下面给出的代码时，它只会显示一个简单的幻灯片放映。

```
NSArray *imagearray = [NSArray arrayWithObjects:
                             [UIImage imageNamed:@"image1.png"],
                             [UIImage imageNamed:@"imag2.png"],[UIImage imageNamed:@"imag3.png"],[UIImage imageNamed:@"imag4.png"],[UIImage imageNamed:@"imag5.png"],[UIImage imageNamed:@"imag6.png"],[UIImage imageNamed:@"imag7.png"],nil];
imageview.animationImages=imagearray;

imageview.animationDuration = 10.00;  

imageview.animationRepeatCount = 0;

[imageview startAnimating]; 
```

如何实现褪色效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:29:10.980

动画视图的 alpha 属性：

```
[UIView animateWithDuration:5 animations:^{
    imageview.alpha = 0;
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T10:30:58.933

请访问此堆栈溢出问题其[iphone 褪色图像](https://stackoverflow.com/questions/5618964/iphone-fading-of-images)

```
- (void)viewDidLoad {
        imgView.animationImages=[NSArray arrayWithObjects:  
                                 [UIImage imageNamed:@"lori.png"],
                                 [UIImage imageNamed:@"miranda.png"],
                                 [UIImage imageNamed:@"taylor.png"],
                                 [UIImage imageNamed:@"ingrid.png"],
                                 [UIImage imageNamed:@"kasey.png"], 
                                 [UIImage imageNamed:@"wreckers.png"], nil];

        imgView.animationDuration=20.0;
        imgView.animationRepeatCount=0;
        [imgView startAnimating];
        [self.view addSubview:imgView];
        [imgView release];
        //The timers time interval is the imageViews animation duration devided by the number of images in the animationImages array. 20/5 = 4 
        NSTimer *timer = [NSTimer timerWithTimeInterval:4.0 
                                                  target:self 
                                                selector:@selector(onTimer) 
                                                userInfo:nil 
                                                 repeats:YES];

        [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];
        [timer fire];

        [super viewDidLoad];
    }

    //It is important that the animation durations within these animation blocks add up to 4 
    //(the time interval of the timer). If you change the time interval then the time intervals 
    //in these blocks must also be changed to refelect the amount of time an image is displayed. 
    //Failing to do this will mean your fading animation will go out of phase with the switching of images.   

    -(void)onTimer{
            [UIView animateWithDuration:3.0 animations:^{
                imgView.alpha = 0.0; 
            }];
            [UIView animateWithDuration:1.0 animations:^{
                imgView.alpha = 1.0; 
            }];
        } 
```

# ruby-on-rails-3 - 在新的子表单中获取父属性？

> ID：13540301
> 
> 赞同：1
> 
> 时间：2012-11-24T10:23:49.067
> 
> 标签：ruby-on-rails-3, model, associations, relationship

我有一个简单的 Rails 3 应用程序，我正在尝试创建一个属于它所有者的新记录。它通过将 id 传递给子记录的新形式中的隐藏字段来工作。

这很好用，一旦提交了新的子表单，它就会在子/父关系中正确关联。

我想要做的是在新的子表单中查找父表单的值。问题是尚未创建子关系。无论如何我可以在视图中使用 .where 查找吗？或者，有没有更好的方法来做到这一点？

目前，我将 animal_id 传递给新的 Claim 表单，并将其插入到标记为 animal_id 的隐藏字段中。

我正在尝试做的事情：

```
<%= @animal.where(:animal_id => params[:animal_id]).id %> 
```

理想情况下，上述方法将从即将关联的动物中获取动物 ID。是否有任何类型的 before_filter 或任何可以从 URL 中获取传递的参数并临时为新表单视图创建关系，然后在提交表单后永久创建关系的东西？

我尝试将以下内容添加到我的 Claims 控制器，然后`@animal.AnimalName`在视图中调用，但我得到 NoMethodError：

```
before_filter :find_animal

protected
def find_animal
 if params[:animal_id]
   Animal.find(params[:animal_id])
 end
end 
```

新声明的 URL 正确显示了动物 ID，所以我不确定为什么找不到它：

```
http://localhost:3000/claims/new?animal_id=1 
```

模型关系如下：

```
animal has_many claims
animal has_one exclusion

claim has_one animal

exclusion has_one animal 
```

**更新**

我已将我的关系更正如下：

```
animal has_one exclusion
exclusions belong_to animal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T02:04:02.010

首先，您还应该更新

```
claim has_one animal 
```

成为

```
claim belongs_to: animal 
```

, 因为你已经有了

```
animal has_many claims 
```

* * *

由此看来，父母是动物，索赔是孩子，因此孩子索赔表单试图以某种方式访问​​父母动物的id。

* * *

如果到目前为止我正确理解了您的情况，为什么不直接访问您传递给表单的 animal_id 值？您已经将该值传递给 claim_controller 中的新方法，对吧？

因此，当您按下提交按钮时，它会将表单的所有值（包括animal_id 值）传递给claims_controller 的create 方法，

索赔控制器.rb

```
 def create
      @claim = claim.new(claim_params)
      if @claim.save
        redirect_to claim_path(@claim)
  else
        render 'new'
  end
    end

private

def claim_params
  params.require(:claim).permit(:foo, :bar. :animal_id)

end 
```

说明：一旦您在表单中单击提交，它将在`params`名为 .h 的哈希中发布所有数据`:claim`。`:foo :bar :animal_id`将是您的三个表单字段的三个假设名称，包括您的 hidden `animal_id`。

我们创建了一个私有方法来从表单中获取接受的输入字符串，并执行 .require 和 .permit 以防止 sql 注入。

claim_params 方法返回传递给该`Claim.new`方法所需的参数的哈希值，以便您可以创建一个新的 Claim 对象（又名行，又名记录）。

因此`claim.new(claim_params)`，通过claims_params 方法的返回值从表单创建一个新的声明，包括animal_id，该返回值是从表单输入中过滤出来的。

.new 方法创建一条记录，但实际上并不保存到表中。.save 可以。

或者，您可以使用 .create，而不是使用 .new 和 .save，它会在一个镜头中连续完成这两项操作。

希望我能很好地理解您的应用程序、问题和需求，从而满足您的需求。

* * *

我很好奇，

另外，你能澄清一下什么被排除在外吗？也就是说，排除表是什么样子的。目的是为了简单地防止某些动物被列出并“可索赔”吗？

您的应用程序有什么理由不能让 Animals 模型有一个`:excluded`名为动物不排除，导致重复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:58:25.127

> 是否有任何类型的 before_filter 或任何可以从 URL 中获取传递的参数并临时为新表单视图创建关系，然后在提交表单后永久创建关系的东西？

我认为您正在寻找的“东西”是构建。过滤之前不能很好地解决这个问题。

[Ruby on Rails。如何在 :belongs to 关系中使用 Active Record .build 方法？](https://stackoverflow.com/questions/783584/ruby-on-rails-how-do-i-use-the-active-record-build-method-in-a-belongs-to-rel)

[在 Rails 3 中构建与新建](https://stackoverflow.com/questions/4954313/build-vs-new-in-rails-3)

如果它没有帮助你可以在这里发布你是如何实现模型关联的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:22:50.167

随着关系更新：

```
animal has_one exclusion
exclusion has_one animal 
```

由于 has_one 的文档（http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one）

> 指定与另一个类的一对一关联。仅当其他类包含外键时才应使用此方法。

并且以某种方式暗示至少一方应该通过某些东西在或 has_many 上具有 belongs_to 定义

# java - Android CountDownTimer 作用域

> ID：13540302
> 
> 赞同：0
> 
> 时间：2012-11-24T10:23:58.487
> 
> 标签：java, android, countdown

谁能告诉我这样做是否安全？我运行一个倒数计时器（CountDownTimer），当计时器达到零时，它必须重新开始，例如倒计时更长的时间。为此，我打电话

```
timer = new TableCount(nextTime * 1000, 100); 
```

在 onFinish() 方法中。

它运行没有问题，但我担心它可能会导致内存泄漏。我是否应该让计时器触发某种通知它已完成？以下是活动代码中的重要部分：

```
public class TableActivity extends Activity {
    TableCount timer; // the count down timer
    protected int nextTime;
    ...
    // somewhere I call this - user clicked the "start" button
    timer = new TableCount(nextTime * 1000, 100);
    nextTime += 100; // for example
    ...
    public class TableCount extends CountDownTimer
    {
        public void onFinish() {
            ... // check if number of iterations has been reached, else:
            // start counting down from the next value
            timer = new TableCount(nextTime * 1000, 100);
            nextTime += 100; // for example
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:41:31.210

您不会泄漏内存，因为您只是将 TableCount 的单个声明的引用更改为隐式取消引用前一个对象的新计时器。

即使您做了一些奇怪的事情，例如每次运行都创建一个新计时器并将其添加到数组中（例如），您仍然不会泄漏。您最终可能会耗尽内存，但这与泄漏不同，因为活动结束（），并假设您没有在其他地方持有静态引用，然后内存被释放并有资格进行垃圾收集。

但是，为什么不直接重用现有的计时器并使用 schedule() 再次运行它呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:43:04.750

不需要再次初始化计时器......试试这个......

```
 int temp=nexttime;
   public class TableCount extends CountDownTimer
   {
       public void onFinish() {
       nexttime=temp;
       timer.start();
       }
   } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-24T10:45:40.813

```
public class ServiceCount extends CountDownTimer
{
    public ServiceCount(long millisInFuture, long countDownInterval)
    {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish()
    {
             count = new ServiceCount((long) (1 * 60 * 1000), 1000); // 1 minute
             count.start();
    }

    @Override
    public void onTick(long millisUntilFinished)
    {
        Log.d("timer", "" + millisUntilFinished / 1000);
    }
}

ServiceCount count = new ServiceCount((long) (1 * 60 * 1000), 1000); // 1 minute
count.start(); 
```

# php - 如何在选项列表循环中回显选择？

> ID：13540304
> 
> 赞同：0
> 
> 时间：2012-11-24T10:24:04.577
> 
> 标签：php, html, echo

我想从下拉菜单中保留（=保留值，如果表单上有错误）我的值，这就是我开始的：

```
 ...
    $priorities = array('low','normal','high'); 
    ...
    <select name="priority" id="priority">
       <?php 
          foreach ($priorities as $pro){
            echo '<option value="'.$pro.'">'.$pro.'</option>'; 
          }
        ?>
    </select> 
```

它完成了工作，但不坚持。

现在我想得到这样的东西：

```
 <select name="priority" id="priority">
       <?php 
          $tel = 0;
          foreach ($priorities as $pro){
             echo '<option value="'.$tel.'"'.htmlentities('<?php if (isset($_POST[\'priority\']) && (int) $_POST[\'priority\'] === tel) { echo \'selected="selected"\'; } ?>').' >'.$pro.'</option>'; 
             $tel++;
          }
       ?>
    </select> 
```

但这当然会出错。

任何人有任何建议thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:28:01.787

这是我经常实现的方式：

```
<select name="priority" id="priority">
    <?php
    foreach ($priorities as $pro)
    {
        $selected = (isset($_POST['priorities']) && $pro == $_POST['priority']) ? 'selected' : '';
        echo '<option value="' . $pro . '" '.$selected.'>' . $pro . '</option>';
    }
    ?>
</select> 
```

只是想我会指出你实际上可以像这样缩短[三元组](http://php.net/ternary)

```
<select name="priority" id="priority">
    <?php
    foreach ($priorities as $pro)
    {
        $selected = ($pro == @$_POST['priority']) ? 'selected' : '';
        echo '<option value="' . $pro . '" '.$selected.'>' . $pro . '</option>';
    }
    ?>
</select> 
```

抱歉，我有一些东西可以创建尽可能短的代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:30:33.830

将代码的第二部分更改为：

```
<select name="priority" id="priority">
   <?php 
      foreach ($priorities as $pro) {
         if (isset($_POST['priority']) && $_POST['priority'] == $pro) {
            $selected = 'selected="selected"';
         }
         else {
            $selected = null;
         }
         echo '<option value="'.$pro.'" '.$selected.'>'.$pro.'</option>'; 
      }
   ?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:32:55.107

试试这个

```
<select name="priority" id="priority">
   <?php 
      $tel = 0;
      foreach ($priorities as $pro){
         echo '<option value="' 
            .$tel
            .'"'
            .(isset($_POST['priority']) && (int)$_POST['priority'] === $tel)?'selected="selected"':''
            .' >'
            .$pro
            .'</option>'; 
         $tel++;
      }
   ?>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:58:39.080

```
$priority= array (1=>"low","normal","high");
    $select = "<select name=\"priority\"> ;
      foreach ($priority as $key => $val) {
        $select .= "\t<option val=\"".$key."\"";
        if ($val == $yourcheckedvariable) {
           $select .= " selected=\"selected\">".$val."</option>\n";
        } else {
        $select .= ">".$val."</option>\n";
    }
}
 $select .= "</select>";
echo $select; 
```

使用此代码

# c# - 如何旋转相机 - 相机旋转

> ID：13540306
> 
> 赞同：1
> 
> 时间：2012-11-24T10:24:21.873
> 
> 标签：c#, 3d, camera, rotation

我想知道是否有一个变量或方法可以用来在我的游戏中旋转相机。我可以沿 xyz 轴移动它，但我不知道如何旋转它！:O

***以下是变量：***

```
 Model spaceShip;
    float aspectRatio;
    Vector3 modelPosition = Vector3.Zero;
    float modelRotation = 0f;

    Vector3 cameraPosition = new Vector3(0f, 50f, 5000f); 
```

***这是它的绘制方式（模型（宇宙飞船））：***

```
 Matrix[] transforms = new Matrix[spaceShip.Bones.Count];
        spaceShip.CopyAbsoluteBoneTransformsTo(transforms);

        foreach (ModelMesh mesh in spaceShip.Meshes)
        {
            foreach (BasicEffect effect in mesh.Effects)
            {
                effect.EnableDefaultLighting();
                effect.World = transforms[mesh.ParentBone.Index] * Matrix.CreateRotationY(this.modelRotation) * Matrix.CreateTranslation(this.modelPosition);
                effect.View = Matrix.CreateLookAt(this.cameraPosition, Vector3.Zero, Vector3.Up);
                effect.Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45f), aspectRatio, 1f,200000f);
            }
            mesh.Draw();
        } 
```

***并且这个纵横比被加载到：***

aspectRatio = graphics.GraphicsDevice.Viewport.AspectRatio;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:58:51.793

您可以尝试围绕相机外观方向矢量旋转场景的根容器（不应该包含相机，对于相机，您应该在根之外有另一个容器）

# mysql - 如何为“您可能认识的人”（朋友的朋友）创建 MySQL 查询？

> ID：13540307
> 
> 赞同：-2
> 
> 时间：2012-11-24T10:24:24.870
> 
> 标签：mysql

我有以下表格：

```
members(id, name, surname, username, password)
friends(uid, friend_uid, confirmed_uid, confirmed_friend_uid) 
```

在friends表中`uid`和`friend_uid`相关的`members.id`，哪里`uid`总是更低`friend_uid`。同意成为朋友`friends.confirmed`时为真，确认友谊时为真。`friends.uid``friends.friend_confirmed``friends.friend_uid`

用户 A 只是 B 和 C 的朋友，他们都确认了友谊。我想要一个查询，它将向 A 显示 B 和 C 的列表（所有 A 的已确认朋友）已确认的尚未与 A 成为朋友的朋友。确保如果 B 和 C 有共同的朋友，他们是列表的顶部。

由于我的 MySQL 非常生锈，我目前正在使用多个查询来执行此操作，但这一定是非常低效的，我需要在它开始影响我的网站性能之前为我创建一个查询。

我已经开始阅读 MySQL 文档，如果我有任何地方我会更新它，但是如果有人可以帮助我加快这个过程，我将不胜感激。

这是我用一些伪代码来做的：

```
member_id_for_A = 1;
friends_of_A = mysql_query("
            SELECT m.*, f.* FROM friends f 
            inner join members m on m.id = f.uid 
              WHERE f.friend_uid = " + member_id_for_A + " AND confirmed_uid=1 AND confirmed_friend_uid=1 
            UNION
              SELECT m.*, f.* FROM friends f 
              inner join members m on m.id = f.friend_uid 
                WHERE f.uid = " + member_id_for_A + " AND confirmed_uid=1 AND confirmed_friend_uid=1");

foreach(row : friends_of_A)
{
  friend_id = get_friened_id(row, member_id_for_A);
  friends_of_friend = get_friends(friend_id); // Performs a query like above friends_of_friend
  result = remove_matches(friends_of_A, friends_of_friend); // Remove common friends

  // Do something with results and move onto the next friend
} 
```

我知道这是非常糟糕的代码并且效率不高，但这是一种快速的 hacky 方式，我可以获得所需的功能，直到我有时间学习更多 MySQL。希望它可以通过一个查询清楚地说明我的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:34:06.753

干得好...

```
select m.id,m.surname,m.name from friends f1
inner join friends f2
on f1.friend_uid=f2.uid      /* Identify friend of friend*/
inner join members m
on m.id=f2.friend_uid       /* Match & get Friend of Friend's User detail */
where f1.confirmed_uid=1         /* Friend1 is confirmed */
and f2.confirmed_friend_uid=1
and m.id <> f2.uid          /* Friend2 is not already a friend */ 
```

在选择列表中，选择您的必填字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:23:32.133

在查看了[子查询文档](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)后，我设法提出了一个可行的解决方案。

在这个例子中，A 有一个`members.id=8`.

```
SELECT * FROM members
WHERE id IN ( 
 SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.uid 
 WHERE f.friend_uid IN ( 
  SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.uid 
  WHERE f.friend_uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1  
   UNION SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.friend_uid 
   WHERE f.uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1
 ) AND m.id<>8 AND f.confirmed_uid=1 AND f.confirmed_friend_uid=1 
  UNION SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.uid 
  WHERE f.uid IN ( 
   SELECT m.id FROM friends f INNER JOIN members m on m.id=f.uid 
   WHERE f.friend_uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1 
    UNION SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.friend_uid
    WHERE f.uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1
   ) AND m.id<>8 AND f.confirmed_uid=1 AND f.confirmed_friend_uid=1
) AND id NOT IN (
 SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.uid 
 WHERE f.friend_uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1  
  UNION SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.friend_uid 
  WHERE f.uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1
); 
```

此查询运行良好且快速，并返回 A 的所有朋友的朋友，这些朋友还不是 A 的朋友。它还确保关系中的两个成员都确认了友谊。

很可能有一种方法可以减小此查询的大小，因为在整个查询中的三个不同场合都使用了相同的[子查询。](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)

```
 SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.uid 
 WHERE f.friend_uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1  
  UNION SELECT m.id FROM friends f  INNER JOIN members m on m.id=f.friend_uid 
  WHERE f.uid=8 AND confirmed_uid=1 AND confirmed_friend_uid=1 
```

如果有办法只运行这个子查询一次，请告诉我。否则，如果/当我自己弄清楚时，我会编辑答案。

# android - 在android的listview中删除所选项目

> ID：13540308
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:24:38.103
> 
> 标签：android, android-layout, android-intent, android-widget

有人可以给我一个删除列表视图中选定项目的示例代码吗？我正在使用简单的适配器来存储数据。我的代码是..

```
static final String KEY_ITEM = "finance"; // parent node
static final String KEY_ID = "finance";
static final String KEY_NAME = "company";
static final String KEY_COST = "high";
static final String KEY_DESC = "volume";
static final String KEY_SYMBOL="symbol";
static final String KEY = "low";
private String selectedItem; 
private ListAdapter adapter;  
Context context;
ListView lv;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView titleBar = (TextView)getWindow().findViewById(android.R.id.title);
   titleBar.setTextColor(Color.GREEN);
   final ArrayList<HashMap<String, String>> menuItems = new    ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    for (int i = 0; i < nl.getLength(); i++) {

      // HashMap<String, String> map = new HashMap<String, String>();

       Node theAttribute;
        Element e = (Element) nl.item(i);

         NodeList nl1=e.getElementsByTagName(KEY_ID);
         System.out.println("keyId"+nl1.getLength());
         for(int j=0;j<nl1.getLength();j++)
         {
             Element e1 = (Element) nl1.item(j);
             HashMap<String, String> map = new HashMap<String, String>();
             NodeList n = e1.getElementsByTagName(KEY_NAME);

              for (int k = 0; k < n.getLength(); k++) {

                  Element e2 = (Element) n.item(k);
            //  System.out.println("node Title value"+e2.getNodeName());
                 NamedNodeMap attributes2 = e2.getAttributes();
                // System.out.println("attrlength"+attributes2.getLength());
                 for (int a = 0; a < attributes2.getLength(); a++) 
                 {
                         theAttribute = attributes2.item(a);

                     String s=theAttribute.getNodeValue();
                   //  lblName.setTypeface(hindiFont);
                        //s = s.replaceAll("[-;#39&amp:,]","");
                         map.put(KEY_NAME,s);

                 }

              }
              NodeList n4 = e1.getElementsByTagName(KEY_SYMBOL);
              // System.out.println("title "+n.getLength());
                for (int k = 0; k < n4.getLength(); k++) {

                    Element e2 = (Element) n4.item(k);
              //    System.out.println("node snippet value"+e2.getNodeName());
                   NamedNodeMap attributes2 = e2.getAttributes();

                   for (int a = 0; a < attributes2.getLength(); a++) 
                   { 
                    // HashMap<String, String> map = new HashMap<String, String>();
                         theAttribute = attributes2.item(a);
                         String s=theAttribute.getNodeValue();

                           map.put(KEY_SYMBOL,s);
                          // menuItems.add(map);
                   }

                } 

              NodeList n1 = e1.getElementsByTagName(KEY_COST);
            // System.out.println("title "+n.getLength());
              for (int k = 0; k < n1.getLength(); k++) {

                  Element e2 = (Element) n1.item(k);
            //    System.out.println("node Url value");
                 NamedNodeMap attributes2 = e2.getAttributes();
              //   System.out.println("attrlength"+attributes2.getLength());
                 for (int a = 0; a < attributes2.getLength(); a++) 
                 {  
                     //HashMap<String, String> map = new HashMap<String, String>();
                         theAttribute = attributes2.item(a);

                         map.put(KEY_COST,theAttribute.getNodeValue());
                 }}

                 NodeList n2 = e1.getElementsByTagName(KEY_DESC);
                // System.out.println("title "+n.getLength());
                  for (int k = 0; k < n2.getLength(); k++) {

                      Element e2 = (Element) n2.item(k);
                //    System.out.println("node snippet value"+e2.getNodeName());
                     NamedNodeMap attributes2 = e2.getAttributes();

                     for (int a = 0; a < attributes2.getLength(); a++) 
                     { 
                        // HashMap<String, String> map = new HashMap<String, String>();
                           theAttribute = attributes2.item(a);
                           String s=theAttribute.getNodeValue();

                             map.put(KEY_DESC,s);
                            // menuItems.add(map);
                     }

                  }   NodeList n3 = e1.getElementsByTagName(KEY);
                // System.out.println("title "+n.getLength());
                  for (int k = 0; k < n3.getLength(); k++) {

                      Element e2 = (Element) n3.item(k);
                //    System.out.println("node snippet value"+e2.getNodeName());
                     NamedNodeMap attributes2 = e2.getAttributes();

                     for (int a = 0; a < attributes2.getLength(); a++) 
                     { 
                        // HashMap<String, String> map = new HashMap<String, String>();
                           theAttribute = attributes2.item(a);
                           String s=theAttribute.getNodeValue();

                             map.put(KEY,s);
                            // menuItems.add(map);
                     }

                  }  

                  menuItems.add(map);
         }

    }

 // Adding menuItems to ListView

         adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST,KEY,KEY_SYMBOL }, new int[] {
                        R.id.name, R.id.desciption, R.id.cost,R.id.low,R.id.symbol }){

            };

        setListAdapter(adapter);

        // selecting single ListView item
         lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
            /*  String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();
                */
                // Starting new intent
                /*Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_NAME, name);
                in.putExtra(KEY_COST, cost);
                in.putExtra(KEY_DESC, description);
                startActivity(in);*/
                 Toast.makeText(getApplicationContext(), "on clicked",Toast.LENGTH_LONG).show();
            }
        });
         // Create the listener for long item clicks
        OnItemLongClickListener itemLongListener = new OnItemLongClickListener() {

            public boolean onItemLongClick(AdapterView<?> parent, View v, final int position, long rowid) {
                final View view=v;
                // Store selected item in global variable 
                selectedItem = parent.getItemAtPosition(position).toString();
       //  Toast.makeText(getApplicationContext(), "select item"+selectedItem,Toast.LENGTH_LONG).show();

               AlertDialog.Builder builder = new AlertDialog.Builder(AndroidXMLParsingActivity.this);
                builder.setMessage("Do you want to remove " + "?");
                final int positionToRemove = position;
                builder.setCancelable(false);
                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                          adapter.remove(selectedItem);
                          adapter.notifyDataSetChanged();

                        Toast.makeText(
                                getApplicationContext(),
                                selectedItem + " has been removed.",
                                Toast.LENGTH_SHORT).show();
                        dialog.cancel();
                    }

                });
                builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });

                // Create and show the dialog
                builder.show();

                // Signal OK to avoid further processing of the long click
                return true;
            }
        };

        getListView().setOnItemLongClickListener(itemLongListener);
} 
```

}

它显示了这些行中的错误

```
 adapter.remove(selectedItem);
 adapter.notifyDataSetChanged(); 
```

它显示 ListAdapter 添加到强制转换适配器的类型未定义方法 remove(String)

请帮我提供示例代码！！！！提前致谢！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:41:08.003

从 ListAdapter SimpleAdapter 更改。

```
private SimpleAdapter adapter; 
```

使 menuItems 全局化。

然后你可以做

```
menuItems.remove(selectedItem);
adapter.notifyDataSetChanged(); 
```

# c++ - 在opencv中使用卡尔曼滤波器进行斑点跟踪

> ID：13540310
> 
> 赞同：4
> 
> 时间：2012-11-24T10:25:14.747
> 
> 标签：c++, opencv, filter, tracking, kalman-filter

好吧，我正在尝试使用卡尔曼滤波器创建一个小斑点跟踪示例。我正在使用 openCV 来完成这项任务，但是它似乎没有按预期工作，因为当我隐藏跟踪输出的对象时，卡尔曼滤波器不会尝试估计对象应该在哪里。我附上下面的代码，我希望有人能提示我做错了什么。

提前致谢.... ：-）

```
#include <iostream>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/video/tracking.hpp>

using namespace std;
using namespace cv;

#define drawCross( img, center, color, d )\
line(img, Point(center.x - d, center.y - d), Point(center.x + d, center.y + d), color, 2, CV_AA, 0);\
line(img, Point(center.x + d, center.y - d), Point(center.x - d, center.y + d), color, 2, CV_AA, 0 )\

int main()
{
  Mat frame, thresh_frame;
  vector<Mat> channels;
  VideoCapture capture;
  vector<Vec4i> hierarchy;
  vector<vector<Point> > contours;

  capture.open("capture.avi");

  if(!capture.isOpened())
    cerr << "Problem opening video source" << endl;

  KalmanFilter KF(4, 2, 0);
  Mat_<float> state(4, 1);
  Mat_<float> processNoise(4, 1, CV_32F);
  Mat_<float> measurement(2,1); measurement.setTo(Scalar(0));

  KF.statePre.at<float>(0) = 0;
  KF.statePre.at<float>(1) = 0;
  KF.statePre.at<float>(2) = 0;
  KF.statePre.at<float>(3) = 0;

  KF.transitionMatrix = *(Mat_<float>(4, 4) << 1,0,1,0,   0,1,0,1,  0,0,1,0,  0,0,0,1); // Including velocity
  KF.processNoiseCov = *(cv::Mat_<float>(4,4) << 0.2,0,0.2,0,  0,0.2,0,0.2,  0,0,0.3,0,  0,0,0,0.3);

  setIdentity(KF.measurementMatrix);
  setIdentity(KF.processNoiseCov, Scalar::all(1e-4));
  setIdentity(KF.measurementNoiseCov, Scalar::all(1e-1));
  setIdentity(KF.errorCovPost, Scalar::all(.1));

  while((char)waitKey(1) != 'q' && capture.grab())
    {
      capture.retrieve(frame);

      split(frame, channels);
      add(channels[0], channels[1], channels[1]);
      subtract(channels[2], channels[1], channels[2]);
      threshold(channels[2], thresh_frame, 50, 255, CV_THRESH_BINARY);
      medianBlur(thresh_frame, thresh_frame, 5);

      findContours(thresh_frame, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));

      Mat drawing = Mat::zeros(thresh_frame.size(), CV_8UC1);
      for(size_t i = 0; i < contours.size(); i++)
        {
//          cout << contourArea(contours[i]) << endl;
          if(contourArea(contours[i]) > 500)
            drawContours(drawing, contours, i, Scalar::all(255), CV_FILLED, 8, vector<Vec4i>(), 0, Point());
        }
      thresh_frame = drawing;

      findContours(thresh_frame, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));

      drawing = Mat::zeros(thresh_frame.size(), CV_8UC1);
      for(size_t i = 0; i < contours.size(); i++)
        {
//          cout << contourArea(contours[i]) << endl;
          if(contourArea(contours[i]) > 500)
            drawContours(drawing, contours, i, Scalar::all(255), CV_FILLED, 8, vector<Vec4i>(), 0, Point());
        }
      thresh_frame = drawing;

// Get the moments
      vector<Moments> mu(contours.size() );
      for( size_t i = 0; i < contours.size(); i++ )
        { mu[i] = moments( contours[i], false ); }

//  Get the mass centers:
      vector<Point2f> mc( contours.size() );
      for( size_t i = 0; i < contours.size(); i++ )
        { mc[i] = Point2f( mu[i].m10/mu[i].m00 , mu[i].m01/mu[i].m00 ); }

      Mat prediction = KF.predict();
      Point predictPt(prediction.at<float>(0),prediction.at<float>(1));

      for(size_t i = 0; i < mc.size(); i++)
        {
          drawCross(frame, mc[i], Scalar(255, 0, 0), 5);
          measurement(0) = mc[i].x;
          measurement(1) = mc[i].y;
        }

      Point measPt(measurement(0),measurement(1));

      Mat estimated = KF.correct(measurement);
      Point statePt(estimated.at<float>(0),estimated.at<float>(1));

      drawCross(frame, statePt, Scalar(255, 255, 255), 5);

      vector<vector<Point> > contours_poly( contours.size() );
      vector<Rect> boundRect( contours.size() );
      for( size_t i = 0; i < contours.size(); i++ )
       { approxPolyDP( Mat(contours[i]), contours_poly[i], 3, true );
         boundRect[i] = boundingRect( Mat(contours_poly[i]) );
       }

      for( size_t i = 0; i < contours.size(); i++ )
       {
         rectangle( frame, boundRect[i].tl(), boundRect[i].br(), Scalar(0, 255, 0), 2, 8, 0 );
       }

      imshow("Video", frame);
      imshow("Red", channels[2]);
      imshow("Binary", thresh_frame);
    }
  return 0;
} 
```

# c# - 如何从数据库中获取最接近的日期时间？

> ID：13540312
> 
> 赞同：2
> 
> 时间：2012-11-24T10:25:48.563
> 
> 标签：c#, sql-server, linq, entity-framework

我的数据库中有以下日期时间。如果我当前的系统日期时间是“2012-11-24 03:50:00.000”，那么应该输出为第三条记录。如何通过 linq 查询获得它？

```
1   2012-11-24 01:00:00.000 35466   True    False
2   2012-11-24 01:00:00.000 35466   True    False
3   2012-11-24 01:15:00.000 35466   True    False
4   2012-11-23 01:10:00.000 65456   True    False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:37:01.413

如果您不是绝对必须在服务器端进行查询，那么以下伪代码方法将起作用：

```
 foreach value in the data set
        let distance = absolute value of ( data point - target data value )

  sort by distance, ascending

  choose first 
```

在 C# 中，您可以使用该方法轻松计算时间间隔，例如，获取返回对象属性`DateTime.Substract`的绝对值。`TimeSpan``Days`

我对 SQL 日期操作不太熟悉，但我相信你可以在服务器端做同样的事情，类似于：

```
 select * from table, abs(Datediff(datecolumn.table, sysdatetime)) as distance
  order by distance 
```

然后使用第一个值。

抱歉，我刚刚注意到您希望它采用 LINQ 格式，这样您就可以将服务器端和客户端工作结合起来——类似于以下内容：

```
(from q in datacontext.Table
let distance = Math.Abs(q.Date.Subtract(DateTime.Today).Ticks)
orderby distance
select q).First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:45:56.250

如果您想要所有绑定的结果，SQL 查询将是这样的。不确定如何将其转换为 LinQ：

```
SELECT *
FROM tableX
WHERE DateTimeColumn IN
      ( SELECT TOP 1 d
            WITH TIES 
        FROM
          ( SELECT MIN(DateTimeColumn) AS d
            FROM tableX
            WHERE DateTimeColumn >= GETDATE()
          UNION ALL
            SELECT MAX(DateTimeColumn) 
            FROM tableX
            WHERE DateTimeColumn <= GETDATE()
          ) AS tmp
        ORDER BY ABS(DATEDIFF(millisecond, d, GETDATE()))
      ) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:47:10.270

以下方法应该可以帮助您（这不是最佳方法，但应该可以完成工作）：

首先，通过从值中减去每个日期来从可用日期中选择最接近的日期`DateTime.Now`并对结果进行排序，然后选择第一项：

```
var itemWithClosestDate = dbContext.Table
    .OrderBy(x => Math.Abs((DateTime.Now - x.Date).TotalMilliseconds))
    .First(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:27:30.030

```
select * from tbl where d=(select max(d) from tbl where d<sysdate()) 
```

SQL 小提琴 - [http://sqlfiddle.com/#!2/d577c/3](http://sqlfiddle.com/#!2/d577c/3)

# php - 活动记录最后插入 ID

> ID：13540317
> 
> 赞同：0
> 
> 时间：2012-11-24T10:26:17.750
> 
> 标签：php, activerecord

我有一个带有 auto_incrementing 列的表，该列设置为主键。是否可以在插入活动记录后从该列中获取数字，而无需运行另一个查询？

```
$payment = new Model\Payment;
$payment->userId = $userId;
$payment->item = $item;
$payment->state = 'I'; 
```

> $insert_id =

```
$payment->save(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T10:30:46.317

```
$payment->save();
$insert_id = $payment->id; 
```

# visual-c++ - 使用 libavcodec 编码视频帧

> ID：13540318
> 
> 赞同：2
> 
> 时间：2012-11-24T10:26:22.860
> 
> 标签：visual-c++, encode, libavcodec

我是视频编码的新手，我有一个简单的任务要为我自己的项目做。

基本上，我在内存中有一定数量的原始 RGB 帧，它们可以通过指针轻松访问。我想使用 libavcoded 对它们进行编码。初始化很好，但我真的不明白我应该如何将这些帧信息提供给编解码器。我应该使用 avpicture_fill 函数吗？您能否对我有所了解，最好举一些例子。我正在使用 MSVC++ 环境。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:46:29.010

目录下有几个例子`doc`：

*   [examples/avcodec.c](https://git.libav.org/?p=libav.git;a=blob;f=doc/examples/avcodec.c) - 使用 libavcodec 编码或解码音频或视频
*   [examples/output.c](https://git.libav.org/?p=libav.git;a=blob;f=doc/examples/output.c) - 获取编码的音频/视频并使用 libavformat 将其混合（将其放入 AVI 等容器格式）

# twitter-bootstrap - Kendo UI 和响应式设计

> ID：13540325
> 
> 赞同：3
> 
> 时间：2012-11-24T10:27:56.910
> 
> 标签：twitter-bootstrap, kendo-ui, responsive-design

Kendo UI 是否适合移动设备的响应式设计？或者我应该使用引导程序等...进行响应式移动设计？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T10:45:07.820

嗯，这些是不同的野兽。

[**Twitter Bootstrap**](http://twitter.github.com/bootstrap/)（这只是问题中的一个错字，对吧？）首先是一个 CSS 框架。其中，除其他外，您可以轻松地为不同类型的设备创建不同的布局/样式集并在它们之间切换（利用媒体查询）。

[**然而， Kendo UI**](http://www.kendoui.com/)首先是一个 JavaScript 框架，其主要目的是简化 Web 应用程序的开发。换句话说，它主要集中在*Web 开发的行为*方面。

当然可以使用 Kendo UI Mobile（Kendo UI 系列的一部分）来“通用化”您的 Web 应用程序 - 查看这个[有用的教程](http://blogs.telerik.com/kendoui/posts/12-09-11/universal_mobile_apps_with_html5_and_kendo_ui)以了解一些技术的介绍。但是，在同一个教程中说：

> 你问响应式设计呢？
> 
> 响应式设计非常适合创建移动网站，但对于创建移动应用程序没有那么有用。响应式设计可以帮助您为不同尺寸的屏幕隐藏、显示、调整大小和重新格式化 UI，但它不太适合在不同的外形尺寸（例如手机和平板电脑）上呈现完全不同的可用性模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T18:30:21.237

Kendo UI 和 Twitter Bootstrap 并不相互排斥！将它们分组是一个类别错误；它们都是两个不同问题的解决方案。请参阅 Telerik 在[Kendo + Bootstrap上的演示](http://demos.telerik.com/kendo-ui/bootstrap/)

**Kendo UI**是一个*UI 开发*框架。

**Twitter Bootstrap**是一个响应式页面布局框架。

Kendo*和*Bootstrap 都将颜色和样式设置为默认值，但可以为两者自定义源 LESS 文件。

*此外*，Kendo UI 包括专为移动体验而设计的小部件，并且许多小部件具有使它们适合移动体验的配置。

# python - 在列表、运算符或索引（）中搜索项目更快？

> ID：13540330
> 
> 赞同：4
> 
> 时间：2012-11-24T10:28:42.727
> 
> 标签：python, performance, list, search

从这个[站点](http://effbot.org/zone/python-list.htm)，它说 list.index() 是对列表的线性搜索。

而且它似乎`in`也是线性的。

使用其中一个有什么优势吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-24T10:37:46.063

如果要比较不同的 python 方法，例如`in`operator 与`.index()`，请使用该[`timeit`模块](http://docs.python.org/2/library/timeit.html)来测试速度差异。Python 数据类型的复杂性记录在[http://wiki.python.org/moin/TimeComplexity](http://wiki.python.org/moin/TimeComplexity)上。

`in`请注意，和之间有很大的不同`.index()`；第一个返回布尔值，后者返回找到的项目的索引（整数），否则会引发异常。因此，对于一般情况，它（稍微）慢一些：

```
$ python -mtimeit -s 'a = list(range(10000))' '5000 in a'
10000 loops, best of 3: 107 usec per loop
$ python -mtimeit -s 'a = list(range(10000))' 'a.index(5000)'
10000 loops, best of 3: 111 usec per loop 
```

如果您需要针对成员资格测试进行优化，请`set()`改用：

```
$ python -mtimeit -s 'a = set(range(10000))' '5000 in a'
10000000 loops, best of 3: 0.108 usec per loop 
```

# javascript - JQuery：替换和关闭打开的标签

> ID：13540332
> 
> 赞同：1
> 
> 时间：2012-11-24T10:28:59.693
> 
> 标签：javascript, jquery

我想在div中划分元素的内容。分隔符是`<hr/>`，所有打开的标签都应该在关闭 div 之前关闭，并且（如果需要）在重新打开的 div 标记之后重新打开。我幼稚的想法是用 jQuery 遍历子元素，在此之前替换所有出现的`<hr/>`with`</div><div>`并关闭所有打开的标签（直到一定级别）。我不知道如何重新打开它们。

例子：

```
<div id="content">
    <p>Bla some text
    <hr/>
    Some more text
    </p>
</div> 
```

会变成：

```
<div id="content">
    <div>
        <p>Bla some text
        </p>
    </div><div>
        <p>Some more text
        </p>
    </div>
</div> 
```

我的想法是简单地按出现顺序访问每个标签，当它们打开时将它们添加到堆栈中，当它们再次关闭时将它们删除，如果我找到分隔符，关闭堆栈中的所有标签（但不要'不要删除它们），插入`<div/>`标签，以相反的顺序重新打开堆栈上的所有标签。继续直到结束并关闭所有仍然打开的标签。

这样做的目的是将文本分块成预定义的部分。它用于文本分页，div 是页面。我希望用户能够手动指定中断，即使在 ul、p 等内部也是如此。

任何帮助表示赞赏。

# css - 使用 css3 动画颜色

> ID：13540334
> 
> 赞同：2
> 
> 时间：2012-11-24T10:29:06.697
> 
> 标签：css, css-transitions

仅使用 css3 就可以获得动画颜色吗？

这是关于我想获得演示效果的[演示](http://jsfiddle.net/3WHAS/4/)。
该演示使用`jquery.color.js`.

```
$(document).ready(function() {
    $('.replace-bg-on-hover').hover(

    function() {
        $(this).animate({
            backgroundColor: "#333"
        }, 500);
        return false;
    }, function() {
        $(this).animate({
            backgroundColor: "#6CA2FF"
        }, 500);
        return false;
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:39:09.310

当然，你可以做到。您为背景设置了 :hover 颜色，并且不要忘记将过渡 css 属性添加到元素：

CSS 代码：

```
.myElementToHover{
    background: #c00;
    transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -webkit-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease
}

.myElementToHover:hover{
    background: #00c;
} 
```

一般来说，当你想使用 CSS3 规则时，Paul Irish (jquery) 做了一个非常有用的页面：[http](http://css3please.com/) ://css3please.com/使用它，所有的答案都在这里！（除了您现在应该添加 -ms- 前缀）。

使用此代码，您可以为每个 css 属性添加一个过渡，但如果您只想为 backgroundColor 添加一个过渡，则将“all”替换为“backgroundColor”。

0.5s是动画的持续时间。也可以以毫秒为单位进行设置。

轻松是动画的行为方式。基本设置是：

```
linear
ease (default)
ease-in
ease-out
ease-in-out 
```

但是您可以设置自己的过渡：

```
cubic-bezier(0.215, 0.610, 0.355, 1.000) 
```

Matthew Lein 制作了一个非常好的页面来帮助您进行自定义缓动设置： http: [//matthewlein.com/ceaser/](http://matthewlein.com/ceaser/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:36:23.927

您可以为此使用 css3 转换。这是一个简单的例子 -[演示](http://jsfiddle.net/sS7Ud/3/)

我的示例中的代码：

HTML

```
<div class="box"></div>​ 
```

CSS

```
.box {
    width: 100px;
    height: 100px;
    background: #005ca1;
    -webkit-transition: all 0.7s ease-out;
       -moz-transition: all 0.7s ease-out;
        -ms-transition: all 0.7s ease-out;
         -o-transition: all 0.7s ease-out;
            transition: all 0.7s ease-out;
}

.box:hover {
    background: #000;
} 
```

编辑：添加了其余的前缀。

# c++ - QProcess.execute() 一个 DOS 命令

> ID：13540338
> 
> 赞同：1
> 
> 时间：2012-11-24T10:29:29.600
> 
> 标签：c++, qt, command, qprocess

我正在尝试调用 DOS 命令：`subst`使用`QProcess`：

```
 QProcess process;
    int returnCode=process.execute(QString("subst " + DLetter+"  "+mountPath));
    qDebug()<<"returnCode"<<returnCode;
    if (returnCode==0){
        qDebug()<<"Mount "<<QString("subst " + DLetter+"  "+mountPath)
                <<"error"<<process.errorString()<<"id"<<process.pid();
        process.waitForFinished();
        ...
    }else
        qDebug()<<" mounting folder failed  "<<process.errorString(); 
```

我的问题是：调用`execute()`and就足够了`waitForFinished()`吗？调用 execute() 而不是 start 是否安全？因为我遇到了问题`start()`：它并非在所有情况下都有效（它适用于安装，但不适用于卸载文件夹）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:39:44.203

[来自http://doc.qt.digia.com/qt/qprocess.html#execute](http://doc.qt.digia.com/qt/qprocess.html#execute)的 QProcess::execute() 文档

你应该做这个：

```
int returnCode=process::execute(QString("subst " + DLetter+"  "+mountPath));
qDebug()<<"returnCode"<<returnCode;
if (returnCode==0){
    qDebug()<<"Mount "<<QString("subst " + DLetter+"  "+mountPath)
            <<"error"<<process.errorString()<<"id"<<process.pid();
}else
    qDebug()<<" mounting folder failed  "; 
```

关键是 QProcess::execute 是一个静态成员函数，它启动程序，等待它完成然后返回进程的退出代码。

注意：我必须删除对 process.waitForFinished() 和 process.errorString() 的非静态调用，因为它们都不能从静态 QProcess::execute 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:08:52.107

如果您尝试调用 DOS 函数，请尝试使用

```
#include <process.h>
...
system( "dir c:\\temp > c:\\temp\\output.txt" ); 
```

但这现在已经过时了。尝试使用

```
int nRet= (int)ShellExecute( 0,"open","calc.exe",0,0,SW_SHOWNORMAL);
if ( nRet <= 32 )
{
        DWORD dw= GetLastError(); 
        char szMsg[250];
        FormatMessage(
            FORMAT_MESSAGE_FROM_SYSTEM, 
            0, dw, 0,
            szMsg, sizeof(szMsg),
            NULL 
        );
        MessageBox( szMsg, "Error launching Calculator" );
} 
```

请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)了解如何使用此功能。

# javascript - 如何更改箭头叠加的箭头长度

> ID：13540341
> 
> 赞同：3
> 
> 时间：2012-11-24T10:30:04.630
> 
> 标签：javascript, google-maps, google-maps-api-3, svg

## 问题

我正在使用以下[示例](http://www.bdcc.co.uk/Gmaps/arrows_v3_demo.htm)代码在谷歌地图上绘制箭头。 ![在此处输入图像描述](../Images/148b175a29b8c0bdd60fc0e9648684b1.png)

这是为箭头创建 svg 文件的主要覆盖函数。

```
// A small directable Arrow overlay for GMaps V3
// Bill Chadwick Feb 2012 after my previous V2 API version
// Free for any use as far as I am concerned 
// Some public domain code VML/SVG utility code of Ben Appleton's is reused at the end of this file

var arrowOverlayMarkerCounter; //unique id counter for SVG arrow head markers

function ArrowOverlay(map, location, rotation, color, opacity, tooltip) {

    this.map_ = map;
    this.location_ = location;
    this.rotation_ = rotation || 0.0;

    var r = this.rotation_ + 90; //compass to math
    this.dx_ = 20 * Math.cos(r * Math.PI / 180); //other end of arrow line to point
    this.dy_ = 20 * Math.sin(r * Math.PI / 180);

    this.color_ = color || "#0000FF";
    this.opacity_ = opacity || 0.7;
    this.tooltip_ = tooltip || "";

    this.div_ = null;
    this.setMap(map);

    this.handle_ = null;//click event handler handle

    if (arrowOverlayMarkerCounter == null)
        arrowOverlayMarkerCounter = 0;
    else
        arrowOverlayMarkerCounter += 1;
    this.svgId_ = "ArrowOverlay" + arrowOverlayMarkerCounter.toString();

}

ArrowOverlay.prototype = new google.maps.OverlayView();

ArrowOverlay.prototype.onAdd = function() {

    // Create the DIV and set some basic attributes.
    var div = document.createElement('DIV');
    div.title = this.tooltip_;
    div.style.cursor = "help";

    var obj = this;
    this.handle_ = google.maps.event.addDomListener(div, 'click', function() { google.maps.event.trigger(obj, "click") });

    //set up arrow invariants
    if (supportsVML()) {

        var l = createVmlElement('v:line', div);
        l.strokeweight = "3px";
        l.strokecolor = this.color_;
        l.style.position = 'absolute';
        var s = createVmlElement("v:stroke", l);
        s.opacity = this.opacity_;
        s.startarrow = "classic"; // or "block", "open" etc see VML spec
        this.vmlLine_ = l;
    }
    else {

        // make a 40x40 pixel space centered on the arrow 
        var svgNS = "http://www.w3.org/2000/svg";
        var svgRoot = document.createElementNS(svgNS, "svg");
        svgRoot.setAttribute("width", 40);
        svgRoot.setAttribute("height", 40);
        svgRoot.setAttribute("stroke", this.color_);
        svgRoot.setAttribute("fill", this.color_);
        svgRoot.setAttribute("stroke-opacity", this.opacity_);
        svgRoot.setAttribute("fill-opacity", this.opacity_);
        div.appendChild(svgRoot);

        var svgNode = document.createElementNS(svgNS, "line");
        svgNode.setAttribute("stroke-width", 3);
        svgNode.setAttribute("x1", 20);
        svgNode.setAttribute("y1", 20);
        svgNode.setAttribute("x2", 20 + this.dx_);
        svgNode.setAttribute("y2", 20 + this.dy_);

        //make a solid arrow head, can't share these, as in SVG1.1 they can't get color from the referencing object, only their parent
        //a bit more involved than the VML
        if (this.rotation_ >= 0) {
            var svgM = document.createElementNS(svgNS, "marker");
            svgM.id = this.svgId_;
            svgM.setAttribute("viewBox", "0 0 10 10");
            svgM.setAttribute("refX", 0);
            svgM.setAttribute("refY", 5);
            svgM.setAttribute("markerWidth", 4);
            svgM.setAttribute("markerHeight", 3);
            svgM.setAttribute("orient", "auto");
            var svgPath = document.createElementNS(svgNS, "path"); //could share this with 'def' and 'use' but hardly worth it 
            svgPath.setAttribute("d", "M 10 0 L 0 5 L 10 10 z");
            svgM.appendChild(svgPath);
            svgRoot.appendChild(svgM);
            svgNode.setAttribute("marker-start", "url(#" + this.svgId_ + ")");
        }

        svgRoot.appendChild(svgNode);
        this.svgRoot_ = svgRoot;
        this.svgNode_ = svgNode;

    }

    // Set the overlay's div_ property to this DIV
    this.div_ = div;

    var panes = this.getPanes();
    panes.overlayImage.appendChild(this.div_);
}

ArrowOverlay.prototype.draw = function() {

    var overlayProjection = this.getProjection();
    var p = overlayProjection.fromLatLngToDivPixel(this.location_);
    var div = this.div_;
    if (!div)
        return;
    if (!div.style)
        return;

    // Calculate the DIV coordinates of the ref point of our arrow

    var x2 = p.x + this.dx_;
    var y2 = p.y + this.dy_;

    if (supportsVML()) {
        this.vmlLine_.from = p.x + "px, " + p.y + "px";
        this.vmlLine_.to = x2 + "px, " + y2 + "px";
    }
    else {
        this.svgRoot_.setAttribute("style", "position:absolute; top:" + (p.y - 20) + "px; left:" + (p.x - 20) + "px");
    }
}

ArrowOverlay.prototype.onRemove = function() {
    if (this.handle_ != null) {
        google.maps.eventclear.removeListener(this.handle_);
    }
    this.div_.parentNode.removeChild(this.div_);
}

ArrowOverlay.prototype.setVisible = function(v) {
    if (v)
        this.show();
    else
        this.hide();
}

ArrowOverlay.prototype.getVisible = function(v) {
    if (this.div_) {
        return (this.div_.style.display == "");
    }
    return false;
}

ArrowOverlay.prototype.hide = function() {
    if (this.div_) {
        this.div_.style.display = "none";
    }
}

ArrowOverlay.prototype.show = function() {
    if (this.div_) {
        this.div_.style.display = "";
    }
}

ArrowOverlay.prototype.setPosition = function(l) {
    this.location_ = l;
    this.draw();
}

ArrowOverlay.prototype.getPosition = function() {
    return this.location_;
}

ArrowOverlay.prototype.setHeading = function(h) {
    this.rotation_ = h || 0.0;
    var r = this.rotation_ + 90; //compass to math
    this.dx_ = 20 * Math.cos(r * Math.PI / 180); //other end of arrow line to point
    this.dy_ = 20 * Math.sin(r * Math.PI / 180);

    if (!supportsVML()) {
        this.svgNode_.setAttribute("x2", 20 + this.dx_);
        this.svgNode_.setAttribute("y2", 20 + this.dy_);
    }
    this.draw();
}

ArrowOverlay.prototype.getHeading = function() {
    return this.rotation_;
}

ArrowOverlay.prototype.setTooltip = function(t) {
    this.tooltip_ = t;
}

ArrowOverlay.prototype.getTooltip = function() {
    return this.tooltip_;
}

ArrowOverlay.prototype.toggle = function() {
    if (this.div_) {
        if (this.div_.style.visibility == "hidden") {
            this.show();
        } else {
            this.hide();
        }
    }
}

ArrowOverlay.prototype.fromDivPixelToLatLng = function(x, y) {
    var overlayProjection = this.getProjection();
    return overlayProjection.fromDivPixelToLatLng(new google.maps.Point(x, y));
}

ArrowOverlay.prototype.fromLatLngToContainerPixel = function(p) {
    var overlayProjection = this.getProjection();
    return overlayProjection.fromLatLngToContainerPixel(p);
}

// SVG utils from here http://appleton-static.appspot.com/static/simple_poly.js
// by Ben Appleton of Google

var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';

function supportsSVG() {
    return document.implementation.hasFeature(
        'http://www.w3.org/TR/SVG11/feature#Shape',
        '1.1');
}

// VML utils from here http://appleton-static.appspot.com/static/simple_poly.js
// by Ben Appleton of Google

var VML_NAMESPACE = 'urn:schemas-microsoft-com:vml';

function createVmlElement(tagName, parent) {
    var element = document.createElement(tagName);
    parent.appendChild(element);
    element.style['behavior'] = 'url(#default#VML)';
    return element;
}

function supportsVML() {
    if (supportsVML.result_ == null) {
        if (!maybeCreateVmlNamespace()) {
            return supportsVML.result_ = false;
        }

        // Create some VML.  Its 'adj' property will be an object only when VML
        // is enabled.
        var div = document.createElement('DIV');
        document.body.appendChild(div);
        div.innerHtml = '<v:shape id="vml_flag1" adj="1" />';
        var child = div.firstChild;
        if (child) child.style['behavior'] = 'url(#default#VML)';
        supportsVML.result_ = !child || (typeof child['adj'] == 'object');
        div.parentNode.removeChild(div);
    }

    return supportsVML.result_;
}

function maybeCreateVmlNamespace() {
    var hasVmlNamespace = false;

    if (document.namespaces) {
        for (var x = 0; x < document.namespaces.length; x++) {
            var ns = document.namespaces(x);
            if (ns.name == 'v') {
                if (ns.urn == VML_NAMESPACE) {
                    hasVmlNamespace = true;
                } else {
                    throw new Error('document namespace v: is required for VML ' +
                            'but has been reserved for ' + ns.urn);
                }
            }
        }
        if (!hasVmlNamespace) {
            // Import namespace
            hasVmlNamespace = true;
            document.namespaces.add('v', VML_NAMESPACE);
        }
    }

    return hasVmlNamespace;
} 
```

## 问题

我不知道如何改变那些箭头的长度？我可以以某种方式向函数添加长度参数`ArrowOverlay`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:30:17.393

我会做这样的事情（比例也适用于x，y）：

```
<svg>
  <g id="idG" transform="scale(1, 1)">
    ..your arrow
  </g>
</svg>

document.getElementById("idG").setAttribute("transform", "scale(" + horizontalScale + "," + verticalScale + ")"); 
```

示例： http: [//k8.no-ip.org/stackoverflow/13540341.htm](http://k8.no-ip.org/stackoverflow/13540341.htm)

# python - 用 django 输出 csv

> ID：13540348
> 
> 赞同：0
> 
> 时间：2012-11-24T10:30:57.020
> 
> 标签：python, django, csv

```
def export_csv(request):
    response = HttpResponse(mimetype = 'text/csv')
    response['Content-Disposition'] = 'attachment; filename=exported.csv'
    writer = csv.writer(response)
    data = [['First-Name','Last-name'],['Foo','baar']]
    for entry in data:
            writer.writerow(entry)
    return response 
```

上面的代码是为从 django 输出 csv 文件而编写的。我面临的问题是导出/输出文件的内容没有显示在 csv 文件编辑器的不同框中。对于数据（列表）中的每个条目，它都打印在同一个框中，而不是它应该在不同的框中解释每个条目的值（名字，姓氏）。

**csv文件中的实际结果：**

```
|First-Name,Last-Name |
|Foor,bar             | 
```

**预期的：**

```
|First-Name |Last-Name |
|Foo        |Baar      | 
```

如何获得独立于列表大小及其内容导出文件的机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:44:12.643

您可以使用自己的自定义分隔符等为 csv.writer 设置自己的方言：

```
class dia2(csv.Dialect):
    delimiter = '\t' # delimiter should be only 1-char
    quotechar = '"'
    escapechar = None
    doublequote = True
    skipinitialspace = False
    lineterminator = '\r\n'
    quoting = 1
writer = csv.writer(response, dialect=dia2)
... 
```

不同编辑器出现不同行为的主要原因 - 您应该在每个编辑器本身中正确地将 CSV 分隔符设置为您真正使用的分隔符。另一个可能的原因 - 您没有对每个 CSV 值使用引号（即 quoting=1 在方言类中）。根据您的预期输出，您还可以期待另一件事 - 每个字段的长度相同，其余部分填充空格 - 这是无法通过 csv 模块完成的，但是您可以使用将每个单元格的数据格式化为相同的长度标准的 Python 格式，例如：

```
data[i] = "%10s" % data[i] 
```

# php - 使用 .htaccess 从 URL 中删除 PHP 文件扩展名

> ID：13540353
> 
> 赞同：5
> 
> 时间：2012-11-24T10:31:15.063
> 
> 标签：php, apache, .htaccess, ubuntu

我刚刚在 Ubuntu 12 上完成了 LAMP 堆栈的安装，并且遇到了 Apache 的 .htaccess 文件的问题。我启用了重写和重定向模块，并且 .htaccess 文件正在工作（如果不存在“www”，URI 将重定向到“www”），但无论我尝试什么，我都无法删除文件扩展名. 我已经尝试了该`<Files>`指令，但没有成功。我当前的文件包含以下内容：

```
RewriteEngine On

# Remove file extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*)$ $1.php [L]

# Force www
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

关于如何解决这个非常烦人的问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:35:21.003

您不使用 htaccess 来执行此操作，而是使用您的应用程序删除扩展名，并使用 htaccess 将无扩展名的 url 映射到真实文件。这条规则

```
# Remove file extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) $1.php [L] 
```

说，“如果请求的资源不作为文件存在，请查找具有`.php`扩展名的资源”。因此，您从应用程序中的所有链接中删除扩展名，此规则将使 php 文件在没有扩展名的情况下运行。您的 htaccess 没问题，您需要更新您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T10:36:42.030

```
# Apache Rewrite Rules
 <IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On
  RewriteBase /

# Add trailing slash to url
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/|#(.*))$
  RewriteRule ^(.*)$ $1/ [R=301,L]

# Remove .php-extension from url
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^([^\.]+)/$ $1.php 

# End of Apache Rewrite Rules
 </IfModule> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T14:20:50.473

我非常成功地使用了另一种*htaccess替代方法：*

```
Options +FollowSymLinks

Options -Indexes

RewriteEngine On

RewriteRule ^purchase-jelly-babies$ /modules/products/jelly_babies.php [L]

RewriteRule ^/lets/use/an/asp/extension.asp$ /modules/test/asp_example.php [L] 
```

这种方法不仅可以解决您的 PHP 扩展问题，还可以让您保持文件井井有条，无论那些 SEO 白痴告诉您 URL 应该是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:48:36.127

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^\.]+)/$ $1.php 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T07:58:54.187

请尝试此代码并告诉我它的性能。

```
 RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)/$ $1.php

RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)/$ $1.html

RewriteCond %{REQUEST_FILENAME}.py -f
RewriteRule ^(.*)/$ $1.py 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-09T12:26:12.240

我这样做的方式。

```
RewriteEngine on
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://domainname.com/$1 [R=301,L] 
```

# performance - Socket.io 性能问题

> ID：13540356
> 
> 赞同：2
> 
> 时间：2012-11-24T10:32:06.087
> 
> 标签：performance, node.js, socket.io

我们昨晚为我们的一个活动设置了一个实时代码，我们遇到了严重的性能问题。Socket.io 无法为连接到超过 400 到 500 个客户端的 socket.io.js 提供服务。代码很简单，每隔几分钟只有一条消息会广播给所有客户端，所以我认为代码没有太大的改进空间。服务器的硬件不是最好的，但我们在股票代码正常运行期间监控进程，但没有一个是导致问题的原因。

您是否知道如何解决问题，或者至少还有什么可能是导致问题的原因。看起来 socket.io 只是在挣扎，但不是因为缺乏硬件能力。

服务器结构

```
var io = require('socket.io').listen(443);
io.set('log level', 9);

//SQL CONNECTION

io.sockets.on('connection', function (socket) {

var sql_items = 'SELECT * FROM entries ORDER BY tstamp DESC';

db_query(sql_items , function(res_items) {
    socket.emit('init', res_items);
});    
socket.on('new_entry', function (data) {
        //SECURE
    if(!checkedSocketUsers[socket.id]) return false;

    var currentTime = new Date();

    if(currentTime.getMinutes() < 10);

    var minutes = currentTime.getMinutes();
    if(minutes < 10) minutes = "0" + minutes;

    var hours = currentTime.getHours();
    if(hours < 10) hours = "0" + hours;

    var tstamp = currentTime.getTime() / 1000;

    var time = hours + ":" + minutes;

    sqli = "INSERT INTO entries (uid, tstamp, text, type) VALUES (null, "+tstamp+", '"+data.text+"', '"+data.type+"')"; 
    client.query(sqli, function(err, info) {

        var br_data = {};

        br_data.time = time;
        br_data.text = data.text;
        br_data.uid = info.insertId;
        br_data.type = data.type;

        socket.broadcast.emit('broadcast_entry', br_data);
        socket.emit('broadcast_entry', br_data);
    });
});

socket.on('update_entry', function(data) {
    //SECURE
    if(!checkedSocketUsers[socket.id]) return false;

    sqlu = "UPDATE entries SET text = '"+data.text+"' WHERE uid = "+data.uid;   

    client.query(sqlu, function(err, info) {

        br_data = data;

        socket.broadcast.emit('broadcast_update_entry', br_data);
    });
});

socket.on('remove_entry', function(data) {
    //SECURE
    if(!checkedSocketUsers[socket.id]) return false;

    var uid = data.uid;

    sqld = "DELETE FROM entries WHERE uid = "+uid;  
    client.query(sqld, function(err, info) {
        var br_data = {};

        br_data.uid = uid;

        socket.broadcast.emit('broadcast_remove_entry', br_data);
        socket.emit('broadcast_remove_entry', br_data);
    });
});
}); 
```

客户结构

```
socket = io.connect("http://localhost:443");    

socket.on('init', function(data) {
//DOM Manipulation
});

socket.on('broadcast_entry', function(data) {
//DOM Manipulation
});

socket.on('broadcast_remove_entry', function(data) {
//DOM Manipulation
});

socket.on('broadcast_update_entry', function(data) {
//DOM Manipulation
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T13:25:30.137

很难说你遇到了什么瓶颈。几种可能性供您探索：

您可能已达到进程中打开文件句柄数量的限制。您的 linux 内核编译时配置了每个进程的最大文件句柄数（套接字连接使用文件句柄）。您可以通过运行“ulimit -a”查看（最大）打开文件限制。你可以在运行你的进程之前增加这个数字，只需谷歌“ulimit open files”。

另一个想法......在任何给定时间你最多有多少条消息？您正在执行数据库查询以检索每个新连接的所有这些。因此，如果连接数量急剧增加，您可能会执行相当多的查询来加载初始列表。作为一项实验，您无法执行初始“连接”查询以查看您的缩放比例如何提高。如果这有很大帮助，那么您可以轻松地将查询结果缓存在 javascript 变量中，而不是为每个连接都访问数据库。

一些有趣的阅读...

[http://drewww.github.com/socket.io-benchmarking/](http://drewww.github.com/socket.io-benchmarking/)

# internet-explorer - Recaptcha 默认主题显示不正确

> ID：13540360
> 
> 赞同：2
> 
> 时间：2012-11-24T10:32:42.400
> 
> 标签：internet-explorer, internet-explorer-8, formatting, recaptcha

我已经在我的网站上使用默认的红色样式实现了 recaptcha，它在除 IE 8 之外的所有浏览器上都显示得很好。

[![截屏](../Images/190f07719f3324fd3d66bf01afe6fb6b.png)](https://i.stack.imgur.com/nGCBp.jpg)
[（来源：[dovinoutlaw.com](http://www.dovinoutlaw.com/images/recaptcha.jpg)）]

是什么赋予了？任何想法？

我没有对格式做任何事情。刚刚使用带有标准插件 PHP 验证的 JavaScript (jQuery) 将 recaptcha 添加到页面中（所有这些都被证明是有效的）。

我什至不知道从哪里开始寻找问题。

我的 jQuery 代码在 ajax 加载后加载验证码：

```
$("div#menu ul li a").click(function() {
    var ifContact = $(this).attr('href');   <!-- variable for contact page -->
    $('div#menu ul li a').removeClass("active").addClass("inactive");
    $(this).removeClass("inactive").addClass("active");   <!--changes nav buttons-->
    $('div#page_content').load(($(this).attr('href') + ' #content'), function(){ 
    if (ifContact == 'contact.html') {     <!--if we are on the contact page-->
       Recaptcha.create("key", "captcha", {
            theme: "red",
            callback: Recaptcha.focus_response_field
        }); 
    }
    });
    return false;
    }); 
```

* * *

### 解决方案

recaptcha 所在的 div`top:60px position:relative`通过 CSS 定位在容器 div 中。改为`position:absolute;`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:38:34.210

代替

```
ReCaptcha captcha = 
ReCaptchaFactory.newSecureReCaptcha(recapConfig.getPublickey(), 
recapConfig.getPrivatekey(), false); 
```

和

```
ReCaptchaImpl recaptcha = new ReCaptchaImpl(); 
recaptcha.setIncludeNoscript(false); 
recaptcha.setPrivateKey(recapConfig.getPrivatekey()); 
recaptcha.setPublicKey(recapConfig.getPublickey()); 
recaptcha.setRecaptchaServer("https://www.google.com/recaptcha/api"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:56:19.520

解决方案：recaptcha 所在的 div 位于容器 div 中，顶部：60px 位置：通过 css 相对。改为位置：绝对；

感谢那些阅读并投票的人！

# android - 为什么相同的颜色在不同的安卓设备上看起来不一样

> ID：13540361
> 
> 赞同：15
> 
> 时间：2012-11-24T10:32:43.830
> 
> 标签：android, colors, rgb

我发现很多颜色在不同的安卓设备上看起来不同。例如，如果我将 #fff8f5ea 设置为 View 的背景颜色并在不同的设备上运行应用程序，我可以很容易地分辨出它们之间的区别。任何身体有同样的问题？有谁知道为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T10:38:05.627

每件硬件都会以不同的强度渲染单个像素中使用的原色。

显示驱动程序还实现了颜色配置文件，有时是用户可定义的，它改变了这些强度。

我可以在我的 Galaxy S3 上加载图像并在设置->显示->屏幕模式下选择不同的配置文件以在不同的色彩空间中渲染图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T10:37:47.793

最有可能的是，这些设备使用不同的屏幕类型。

由于屏幕的构建方式，LCD、LED 和其他屏幕类型之间的颜色会有所不同。

例如，有些屏幕会将像素完全变为黑色，而有些屏幕会显示灰色阴影。

# ruby-on-rails - 如何避免在设计中注册以在创建新用户时返回令牌？

> ID：13540363
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:33:08.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我已经设计了身份验证，并且当我将用户创建为

> curl -H 'Content-Type: application/json' -H 'Accept: application/json' -X POST htt://localhost:3000/users.json -d "{'user' : { 'username' : 'sample @example.com', 'password' : 'password', 'password_confirmation' : 'password' }}"

上述请求的响应是

> {"user":{"authentication_token":"uwAqF4SG8kPirxWN35yp", "username":"sample@example.com"}}

但我希望得到回应

```
{"New user created successfully"} 
```

我怎样才能改变以获得所需的响应？提前致谢。

**更新**

注册控制器创建方法如下，但我怎么能像你说的那样做

```
build_resource

            if resource.save
                if resource.active_for_authentication?
                    set_flash_message :notice, :signed_up if is_navigational_format?
                    sign_in(resource_name, resource)
                    respond_with resource, :location => after_sign_up_path_for(resource)
                    else
                    set_flash_message :notice, :inactive_signed_up, :reason => inactive_reason(resource) if is_navigational_format?
                    expire_session_data_after_sign_in!
                    respond_with resource, :location => after_inactive_sign_up_path_for(resource)
                end
                else
                clean_up_passwords(resource)
                respond_with_navigational(resource) { render_with_scope :new }
            end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:49:15.683

我认为默认行为是正确的响应——它为 JSON 请求返回新（成功）创建的用户的 JSON 对象。

无论如何，看看这篇文章：[覆盖设计注册控制器](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller)

您将希望为创建操作覆盖注册控制器，例如：

```
def create 
    #custom logic here
    respond_to do |format|
      format.html #some logic here
      format.json {"New user created successfully"}
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:17:45.517

基于您的更新和 tw airball 的答案，代码将是

```
respond_to do |format|
  if resource.save
    if resource.active_for_authentication?
      set_flash_message :notice, :signed_up if is_navigational_format?
      sign_in(resource_name, resource)
      format.html { respond_with resource, :location => after_sign_up_path_for(resource) }
    else
      set_flash_message :notice, :inactive_signed_up, :reason => inactive_reason(resource) if is_navigational_format?
      expire_session_data_after_sign_in!
      format.html { respond_with resource, :location => after_inactive_sign_up_path_for(resource) }
    end
    format.json { render json: flash } # respond with the standard devise flash message
  else
    clean_up_passwords(resource)
    format.html { respond_with_navigational(resource) { render_with_scope :new } }
    format.json { render json: "User not created" }
  end
end 
```

# http - 将 HTTP 凭据作为资源标识符的一部分是一种好习惯吗？

> ID：13540364
> 
> 赞同：0
> 
> 时间：2012-11-24T10:33:16.250
> 
> 标签：http, rest, http-authentication

我正在设计一项需要 HTTP 基本或摘要式身份验证的服务。我正在尝试权衡使用 HTTP 凭据作为资源标识符的一部分的利弊。假设每个经过身份验证的用户都有一个联系人列表。联系人是否应为：

```
https://myservice.com/contacts 
```

更确切地说：

```
https://myservice.com/users/112358/contacts 
```

?

在这种服务的情况下，用户需要被隔离。一个用户永远不需要访问与另一个用户相关的联系人或任何其他信息。出于这个原因，第一种方法看起来更简洁，因为它只在 URL 中公开必要的信息。另一方面，对于不同的 HTTP 凭证，`https://myserevice.com/contacts`将是不同的资源，我不确定这是一个好的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:32:48.540

我会去的`https://myservice.com/users/112358/contacts`。

如果只是因为可能存在“在”用户“下”的资源，在某些时候其他用户可能会看到这些资源。例如，用户 X 能够查看用户 112358 的文档。

URI 的一致性是一个优势。即使使用[HATEOAS](http://timelessrepo.com/haters-gonna-hateoas)，URI 的一致性对外部来说并不是一个问题，但这将有助于发展和维护 API 的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:14:38.910

出于您在问题末尾引用的相同原因，这`/contacts`将代表不同的资源，具体取决于提供的凭据，我建议您使用第二个更长的选项。用户是否希望记住这些 URL 并将其输入到他们的浏览器中？如果不是，长度和“漂亮”不应该是一个重要因素。

不要忘记，您始终可以将临时重定向从`/contacts`该用户自己的联系人返回。

# c# - 如何创建最佳查询？

> ID：13540365
> 
> 赞同：1
> 
> 时间：2012-11-24T10:33:17.743
> 
> 标签：c#, linq, self-join

我在数据库中有一个菜单项列表，例如：

```
ID      ParentID      ItemOrder      Name
-------------------------------------------------------    
 1       null               1        Main_1
 2       null               2        Main_2
 3       null               3        Main_3
 4       null               4        Main_4
 5       null               5        Main_5
 6       1                  4        SubMenu_1.4
 7       1                  5        SubMenu_1.5
 8       1                  8        SubMenu_1.8
 9       2                  1        SubMenu_2.1
10       3                  1        SubMenu_3.1
11       3                  2        SubMenu_3.2
12       3                  4        SubMenu_3.4 
```

`Submenu ItemOrder`不一定是从1开始，也可能是从3开始，下面的菜单项顺序可以是7，以此类推。

如何创建将返回所有父（零级）菜单项及其第一个子项（如果存在）的 linq 查询或 lambda 表达式？

预期结果：

```
ID      ParentID      ItemOrder      Name
-------------------------------------------------    
 1       null             1          Main_1
 2       null             2          Main_2
 3       null             3          Main_3
 4       null             4          Main_4
 5       null             5          Main_5
 6       1                4          SubMenu_1.4
 9       2                1          SubMenu_2.1
10       3                1          SubMenu_3.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:21:01.970

```
var items = dbContext.Table
    .Where(item => item.ParentID == null)
    .Union(dbContext.Table
        .Where(x => x.ParentID != null)
        .GroupBy(x => x.ParentID)
        .Select(g => g.FirstOrDefault())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:34:00.873

```
public IQueryable<MenuItem> MakeQuery()
{

    var parentsQuery =
        from parent in ctx.MenuItem
        where parent.ParentID == null
        orderby parent.ItemOrder
        select parent;

    var childrenQuery =
        from parent in parentsQuery
        join child in ctx.MenuItem
            on parent.ID equals child.ParentID
        where !ctx.MenuItem.Any(child2 => child2.ParentID == parent.ID
            && child2.ItemOrder < child.ItemOrder)
        orderby child.ItemOrder
        select child;

    return parentsQuery.Concat(childrenQuery);
} 
```

这避免了错误“Union 或 Concat 中的类型构造不兼容”。从 LINQ 到 SQL，并且只会返回第一级子级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:51:38.320

我会使用这个查询

```
 var parents = table.Where(i => i.ParentID == null);
    var immediateChildren = table
        .GroupBy(i => i.ParentID)
        .Select(g => g.OrderBy(i => i.ItemOrder).FirstOrDefault());
    var result = parents.Union(immediateChildren); 
```

结果仅包括所要求的直系子级，并且变量有助于了解正在发生的事情。

# php - 简单的php/mysql登录表单安全

> ID：13540367
> 
> 赞同：0
> 
> 时间：2012-11-24T10:33:21.050
> 
> 标签：php, html, mysql, security

我想为网站制作一个简单的登录表单

```
 <form action="ContactFormHandler.php" method="post">
        <table>
            <tr>
                <td>
                    Username:
                </td>
                <td>
                    <input type="text" id="username" name="username" />
                </td>
            </tr>
            <tr>
                <td>
                    Password:
                </td>
                <td>
                    <input type="text" id="password" name="password" />
                </td>
            </tr>
            <tr>
                <td>
                    Your Email:
                </td>
                <td>
                    <input type="text" id="Email" name="Email" />
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center;">
                    <input type="submit" id="submit" value="Submit" />
                    <input type="reset" id="reset" value="Reset" />
                </td>
            </tr>
        </table>
    </form>
</body> 
```

你看到它说联系表单处理程序的地方了吗？我希望表单和处理表单的文件是同一个文件。2 合 1。

如何将此联系人处理程序包含在联系表单的同一文件中？

```
<?php
$contactName = $_POST["ContactName"];
$contactEmail = $_POST["ContactEmail"];
$contactPassword = $_POST["ContactLeastFavoriteColor"];
$sql_connection = mysql_connect("localhost", "root", "root");
mysql_select_db("MyRadContactForm", $sql_connection);
$sql = "INSERT INTO MyRadContacts (
            ContactName,
            ContactEmail,
            ContactPassword,
            ContactDateCreated
        )
        VALUES (
            '$contactName',
            '$contactEmail',
            '$contactPassword',
            NOW()
        )";

mysql_query($sql, $sql_connection);
mysql_close($sql_connection);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:38:05.517

您需要对`.php`文件使用扩展名以将所有代码包含在 1 个文件中，原因是：

`login.php`可以同时包含`html`和`php`

`login.html`可以包含`html`但不能包含`php`代码

因此您可以通过创建`login.php`文件一次完成所有操作：

```
<?php
$contactName = $_POST["ContactName"];
$contactEmail = $_POST["ContactEmail"];
$contactPassword = $_POST["ContactLeastFavoriteColor"];
$sql_connection = mysql_connect("localhost", "root", "root");
mysql_select_db("MyRadContactForm", $sql_connection);
$sql = "INSERT INTO MyRadContacts (
            ContactName,
            ContactEmail,
            ContactPassword,
            ContactDateCreated
        )
        VALUES (
            '$contactName',
            '$contactEmail',
            '$contactPassword',
            NOW()
        )";

mysql_query($sql, $sql_connection);
mysql_close($sql_connection);
?>

<!--your html code here --> 
```

还请检查您的代码以确保安全`SQLinjection`，如果您想获得一些提示，请在谷歌上查看，对不起我的英语不好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:27:34.180

命名您的提交按钮，以便您可以检查它是否存在于请求中。如果没有，请显示表单，如果它在请求中，那么您是从表单中调用的 - 将您的数据存储在数据库中。

更多/更少您的代码应如下所示：

```
<?php

if( isset( $_POST['submit'] ) ) {

   $contactName = $_POST["ContactName"];
   $contactEmail = $_POST["ContactEmail"];
   $contactPassword = $_POST["ContactLeastFavoriteColor"];
   $sql_connection = mysql_connect("localhost", "root", "root");
   mysql_select_db("MyRadContactForm", $sql_connection);
   $sql = "INSERT INTO MyRadContacts (
               ContactName,
               ContactEmail,
               ContactPassword,
               ContactDateCreated
           )
           VALUES (
               '$contactName',
               '$contactEmail',
               '$contactPassword',
               NOW()
           )";

   mysql_query($sql, $sql_connection);
   mysql_close($sql_connection);

} else {

?>

   <form action="ContactFormHandler.php" method="post">
     <table>
         <tr>
             <td>Username:</td>
             <td><input type="text" id="username" name="username" /></td>
         </tr>
         <tr>
             <td>Password:</td>
             <td><input type="text" id="password" name="password" /></td>
         </tr>
         <tr>
             <td>Your Email:</td>
             <td><input type="text" id="Email" name="Email" /></td>
         </tr>
         <tr>
             <td colspan="2" style="text-align: center;">
                 <input name="submit" type="submit" id="submit" value="Submit" />
                 <input type="reset" id="reset" value="Reset" />
             </td>
         </tr>
     </table>
   </form>

<?php

} // end of else

?> 
```

您仍然对 SQL 注入持开放态度，并且您的代码似乎没有处理任何错误（既没有来自空字段等表单的数据也没有代码故障），但这超出了您的问题范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:37:28.717

使用这种方法

检查表单提交

```
<?php
if($_POST['login_submit'] ==1){
    //process your logic here
}
?> 
```

修改您的表格

```
<form action="" method="post">
<input type="hidden" name="login_submit" value="1">
....
.....
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:37:46.093

**使表单提交到自己的页面**

将表单更改`action`为`action="<?php echo $_SERVER['PHP_SELF'] ?>"`以使表单提交到同一页面

**处理页面内的表单**

检查您的 PHP 代码以查看表单是否已提交：

```
if (isset($_POST['submit'])) {
    [your processing code here]
} else {
    [display form]
} 
```

（请务必添加`name="submit"`到您的提交按钮）

# javascript - 将包含日期的 JSON 解析数组转换为数组类型日期 Javascript

> ID：13540375
> 
> 赞同：1
> 
> 时间：2012-11-24T10:35:01.783
> 
> 标签：javascript, json, d3.js

我有这个数组：

```
var BigWordsDates = JSON.parse('<?php echo addslashes($Array_OfDates_to_json) ?>'); 
```

它显示如下（FireBug DOM）：

```
BigWordsDates   Object { #Tahrir=[36], #Egypt=[24], #Morsy=[16], more...}   
#AdminCourt ["2012-10-02","2012-10-02","2012-10-09", 2 more...] 
```

我想将其更改为格式如下的日期数组：2012-FEB-06。如果有人能告诉我如何将该数组转换为 CSV 文件，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:45:39.697

1、你要声明一个JSON几个月。

```
var month = {
  '1': 'JAN',
  '2': 'FEB',

  etc.
} 
```

2、解析你的JSON。

```
var output = [];

for(var k in BigWordsDates['#AdminCourt']) {
    var obj = BigWordsDates['#AdminCourt'][k]; // es. '"2012-10-02"'
    var array = obj.split('-'); // == array['2012', '10', '02']

    var new_value = array[0] + '-' + month[array[1]] + '-' + array[2];

    // add the element to new array
    output.push(new_value);
} 
```

尝试！使用 try-catch 指令调试代码。

此方法仅在您的 JSON 未更改时才有效。

# c# - C# 文本框加载

> ID：13540382
> 
> 赞同：0
> 
> 时间：2012-11-24T10:36:12.210
> 
> 标签：c#, textbox, load

如何自动将 txt 文件的内容加载到我的文本框。为了进一步解释当我启动我的程序时，我希望文本框显示 txt 文件中最后保存的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:41:52.627

看一下[LoadFile](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.loadfile%28v=vs.90%29.aspx)方法，听起来它正是您需要的。

例如 `MyTextBox.LoadFile("MyFile.txt");`

# android - 将 khz 值从 CPU 转换为 mhz 或 ghz

> ID：13540383
> 
> 赞同：0
> 
> 时间：2012-11-24T10:36:17.047
> 
> 标签：android, parsing, integer, cpu

我想将以下函数的字符串（结果）转换为整数值并除以 1000（khz -> mhz）

```
private String ReadCPUMhz()
{
 ProcessBuilder cmd;
 String result="";

 try{
  String[] args = {"/system/bin/cat", "/sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq"};
cmd = new ProcessBuilder(args);

Process process = cmd.start();
InputStream in = process.getInputStream();
byte[] re = new byte[1024];
while(in.read(re) != -1)
{
result = result + new String(re);
}
in.close();
} catch(IOException ex){
ex.printStackTrace();
}

result = result.replace("\n", "");
result = result.replace(" ", "");

return result;

} 
```

这个返回给了我一个字符串，fe 192000 (khz)。但我想要一个 mhz 值..

和：

```
int mhz = Integer.parseInt(result) 
```

该应用程序自行关闭..

如何将khz值转换为mhz？

如果没有 .replace 行，我会收到错误消息。Logcat 说：“invalid int:”192000”，在这个数字之后有很多特殊字符，比如菱形..

所以我不知道如何获得正确的价值..

请问你能帮帮我吗？

我认为结果值有问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:41:45.167

在将该数字转换为 int 之前，请使用以下内容删除所有非数字字符：

```
int khz = result.replace("[^0-9]+", ""); 
```

然后将khz转换为数字并除以1000。

# php - 为 AJAX 请求组织 PHP 处理程序的最常用方法是什么？

> ID：13540388
> 
> 赞同：1
> 
> 时间：2012-11-24T10:36:52.540
> 
> 标签：php, ajax

我一直做的是为 AJAX 请求调用的 PHP 脚本创建一个文件夹，但我想知道，这样做的常见做法是什么？

放置所有请求脚本的通常位置是什么，它们通常写在一个 .php 文件中，还是将它们分成几个文件更好？当然，必须有建议如何安全和更好地做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:10:08.897

我这样做对我来说效果很好...... javscript请求： -

```
$.post("actions.php",{
           post_status:"This is test",
           user_id:858585,
           session_id:fjkdfd8f9d8f
           },function(data){

               }
                ); 
```

“actions.php” php 文件代码：-

```
 <?php

    $action = key($_REQUEST);

    switch ($action)
    {

        case "post_status":
         //get values here, do some stuff
$v1=$_POST['post_status'];
$v2=$_POST['user_id'];
//do some more stuff
            break;

        case "check_mail":

            break;

        case "get_friends":

            break;

    }

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:02:46.080

根据我的经验，服务 AJAX 请求由大型序言组成，包括打开数据库、访问文件和其他重要内容，以及非常重要的尾声，其中数据库和文件被关闭，AJAX 的结果被格式化为 JSON/XML 和其他事情。

如果您的 AJAX 请求和我的一样，将所有 AJAX 请求处理放在一个文件中可能会更容易，从而将序言和尾声结合在一起，从而省去很多麻烦。

但是，如果在您的情况下，您在处理不同的请求时不需要在序言/尾声中做任何常见的繁重工作，那么您可能很容易摆脱几个不同的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T11:12:45.937

我不认为有任何特定的方式会比其他方式更常见。如果您使用的是框架，它可能有自己的最佳实践和您应该使用的编码约定。此外，如果您与团队合作，他们可能有自己的一些规则。

只要您的处理程序在其他方面是安全的，它们在文件系统上的组织方式就无关紧要。如果您有很多处理程序，您可能希望将它们拆分为逻辑部分——一个用于处理购物车的 PHP 文件，一个用于搜索自动完成，等等。

将所有 AJAX 处理程序存储在同一目录中几乎是一个偏好问题。将它们保存在与它们相关的功能相同的目录中也可能是合乎逻辑的，例如`/users/ajax.php`.

# java - 如何阅读 API 文档？

> ID：13540392
> 
> 赞同：0
> 
> 时间：2012-11-24T10:37:22.023
> 
> 标签：java, soap, paypal

我一直在努力理解这些贝宝的东西，但我被难住了。

研究了这个 paypal API 文档，但由于我的 Java 知识有限，我不知道如何使用它。希望有人能告诉我为什么我的代码出错了。

基本上，我正在尝试设置ExpressCheckOut SOAP 版本，这在Java Paypal SOAP 中是强制性的。

这是错误代码：

```
 SetExpressCheckoutRequestType requestType = new SetExpressCheckoutRequestType();
    requestType.set("94.0"); 
```

和错误信息：

```
package requestType does not exist <identifier> expected 
```

这是部分 API 文档：

```
Constructor Summary

SetExpressCheckoutRequestType(DetailLevelCodeType[] detailLevel,
    java.lang.String errorLanguage,
    java.lang.String version,
    org.apache.axis.message.MessageElement[] _any,
    SetExpressCheckoutRequestDetailsType setExpressCheckoutRequestDetails) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:35:16.433

我建议从这里下载和使用新的 PayPal SDK：[https ://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

下载 Java SDK 后，您将在示例文件夹中看到向您展示如何创建和发送 PayPal API 请求的代码。

# asp.net - Url .... 在 asp.net 中重写..！

> ID：13540405
> 
> 赞同：0
> 
> 时间：2012-11-24T10:38:43.523
> 
> 标签：asp.net

我必须这样做：就像在谷歌和许多其他网站一样..

我当前的 ULR 1 是： [https ://play.google.com/store/apps/details?id=com.ruanshaomin.game&feature=search_result&rdid=com.ruanshaomin.game&rdot=1](https://play.google.com/store/apps/details?id=com.ruanshaomin.game&feature=search_result&rdid=com.ruanshaomin.game&rdot=1)

当我点击登录然后 URL 改变像这样... URL 2 **https://accounts.google.com/ServiceLogin?service=googleplay&passive=1209600&continue=**`https://play.google.com/store/apps/details?id%3Dcom.ruanshaomin.game%26feature%3Dsearch_result%26rdid%3Dcom.ruanshaomin.game%26rdot%3D1&followup=https://play.google.com/store/apps/details?id%3Dcom.ruanshaomin.game%26feature%3Dsearch_result%26rdid%3Dcom.ruanshaomin.game%26rdot%3D1`

当我成功登录时，它直接重定向到上面的链接（ULR 1）......我该怎么做......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:09:02.630

javascript:

```
if(document.location.href.indexOf('continue')!=-1)
document.location = document.location.href.split('continue=')[1]; 
```

C＃

```
if(!IsCallback && Request.QueryString["continue"] != null)
Response.Redirect(Request.QueryString["continue"].ToString()); 
```

# sql-server - 选择具有特定模式的查询，在第 1 位显示特定记录

> ID：13540406
> 
> 赞同：2
> 
> 时间：2012-11-24T10:38:47.720
> 
> 标签：sql-server, sql-server-2008, tsql

询问：

```
SELECT * FROM station 
```

输出：

```
id | stationname | total
-------------------------
 1 | Khar        | 5
 2 | SantaCruz   | 3
 3 | Sion        | 2
 4 | VT          | 1
 5 | newFort     | 3
 6 | Bandra      | 2
 7 | Worli       | 1
 8 | Sanpada     | 3
 9 | Joe         | 2
10 | Sally       | 1
11 | Elphiston   | 2
12 | Currey Road | 1 
```

是否可以显示所有记录，但条件是在第一个位置及以下显示特定记录，然后显示其余所有记录

例如我的`where`情况是

```
where id=10 
```

期望的输出：

```
id | stationname | total
-------------------------
10 | Sally       | 1
 1 | Khar        | 5
 2 | SantaCruz   | 3
 3 | Sion        | 2
 4 | VT          | 1
 5 | newFort     | 3
 6 | Bandra      | 2
 7 | Worli       | 1
 8 | Sanpada     | 3
 9 | Joe         | 2
11 | Elphiston   | 2
12 | Currey Road | 1 
```

任何想法，提示将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:48:18.517

您可以使用以下方式合并两个不同的查询`UNION ALL`：

```
SELECT * FROM Station WHERE ID=10
UNION ALL
SELECT * FROM Station WHERE ID<>10 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!3/b0f65/13)

* * *

**更新**（与[退货相关的订单未定义](https://stackoverflow.com/questions/13540406/select-query-with-specific-pattern-show-specific-record-at-1st-place/13540470#comment18543042_13540470)）

如果您看到两个查询的执行计划（using`UNION`和`UNION ALL`），查询 using`UNION`将对结果进行排序，而 query using`UNION ALL`不会对结果**进行**排序。[请参阅此 SQLFiddle](http://sqlfiddle.com/#!3/b0f65/15)中两个查询的执行计划。

`UNION`使用查询的执行计划：

![在此处输入图像描述](../Images/bdec469795a7cf3859e999ab431dbbcc.png)

`UNION ALL`使用查询的执行计划：

![在此处输入图像描述](../Images/9e2f29270a6c9058363ac8064ab2e060.png)

我从[SQL SERVER 中找到了这个——UNION 和 UNION ALL 的介绍和示例](http://blog.sqlauthority.com/2008/10/15/sql-server-introduction-and-example-of-union-and-union-all/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T10:59:07.410

在 OP 提出的情况下使用 a`UNION ALL`可能有效，但会带来一些陷阱，如果不加选择地使用可能会导致意外结果。

搜索排序顺序可以缓解这些问题，前提是`id`可以选择 an 来保证列表中的第一个*（本例中为 0）*

```
SELECT * 
FROM   Station 
ORDER BY
       CASE WHEN id = 10 THEN 0 ELSE id END 
```

[请参阅此 SQLFiddle](http://sqlfiddle.com/#!3/b0f65/14) *（对 hiss056 进行设置以进行设置）*

# linux - 如何将列/（conky 命令）向上移动 1 行 - 最好使用 sed

> ID：13540407
> 
> 赞同：1
> 
> 时间：2012-11-24T10:38:50.413
> 
> 标签：linux, sed, conky

我的部分文件如下所示：

```
${goto 97}${exec sed -n '1p' $HOME/.config/conky/itl/raw2}#
${goto 194}${exec sed -n '2p' $HOME/.config/conky/itl/raw2}#
${goto 291}${exec sed -n '3p' $HOME/.config/conky/itl/raw2}#
${goto 388}${exec sed -n '4p' $HOME/.config/conky/itl/raw2}#
${goto 485}${exec sed -n '5p' $HOME/.config/conky/itl/raw2}#
${goto 582}${exec sed -n '6p' $HOME/.config/conky/itl/raw2}#
${goto 679}${exec sed -n '7p' $HOME/.config/conky/itl/raw2}#
${goto 776}${exec sed -n '8p' $HOME/.config/conky/itl/raw2}#
${goto 873}${exec sed -n '9p' $HOME/.config/conky/itl/raw2}# 
```

我想将“$ {goto nn}”向上移动1行，丢弃第一个（或者，可选地将第一个移动到最后一个位置）

编辑： goto 后的数值在整个文件中以这种方式重复多次。我想以所描述的方式全部更改它们。此外，配置文件包含之前和之后的其他内容。

因为我刚刚熟悉 sed，所以我想用 sed 解决它，但只要它可以进入 linux shell 脚本，它就不是必须的。

edit2：我希望配置文件也包含 sed 命令不会让人感到困惑。这与我正在寻找的解决方案无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:26:33.793

这可能对您有用（GNU sed）：

```
sed '$!N;s/^\(${goto [0-9]\+}\)\(.*\n\)\(${goto [0-9]\+}\)/\3\2\1/;P;D' file 
```

*   `$!N`对于除最后一行之外的所有内容，将换行符和下一行添加到模式空间
*   `s/^\(${goto [0-9]\+}\)\(.*\n\)\(${goto [0-9]\+}\)/\3\2\1/``${goto [0-9]\+}`对于以where表示一个或多个数字的表达式开头的两个连续行`[0-9]\+`，记下这些字符串和中间字符串并将它们交换。
*   `P;D`打印到第一个换行符`\n`，然后删除到并包括换行符。如果模式空间不为空，则不会自动读取下一行，而是从第一个命令开始一个新的循环（然后附加一个换行符......）。

# html - 为什么 li 的样式在 div 中不起作用

> ID：13540410
> 
> 赞同：1
> 
> 时间：2012-11-24T10:39:15.567
> 
> 标签：html, css

我有一个如下所示的 div，我正在尝试为它们设置无法正常工作的属性，如*斜体、字体样式、字体大小。*

* * *

```
<div id="cstopics" class="mytabclass">
    <p class="tabpanelfont">Data mining and data warehousing</p>
    <ul>
       <li>Data mining techniques</li>
       <li>Knowledge discovery</li>
       <li>Association rule mining</li>
       <li>Data warehousing architectures</li>
       <li>Multidimensional modelling and queries</li>
    </ul>
    <!--Few more ul elements -->
</div> 
```

* * *

```
.mytabclass p{
    font-size: 16px;!important 

}

.mytabclass li {
    font-size: 12px;
    font-style: italic;
} 
```

* * *

但似乎没有任何效果，有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:44:02.190

这应该工作 -

```
.mytabclass p{
    font-size: 16px; /*You used !important after semicolon which is not the correct use of it and in this situation its not necessary*/
}

.mytabclass ul li {
    font-size: 12px;
    font-style: italic;
} 
```

要将项目符号替换为破折号，请执行以下操作：

```
.mytabclass ul{
        list-style-type: none;
    }
.mytabclass ul li{
        font-size: 12px;
        font-style: italic;        
        background: url(pathToDashImage.jpg) no-repeat left top;
        padding: 0 0 0 20px;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:54:50.437

```
4 mytabclass p 解析器错误 ;!important }
```

`!imporant`必须是规则价值的一部分。在后面声明`;`是语法错误，这通常会导致以下规则被忽略。除此之外，您的逻辑很好。

```
.mytabclass p{
    font-size: !important 16px;
}

.mytabclass li {
    font-size: 12px;
    font-style: italic;
} 
```

您可以使用[w3c css 验证器](http://jigsaw.w3.org/css-validator/validator)来防止将来出现错误。请记住，验证器本身[有一些错误](https://stackoverflow.com/questions/11757446/isnt-text-overflow-ellipsis-valid-css/11757563#11757563)，但它的语法解析器应该足以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:45:34.483

嗯。这很奇怪。[使用此实时 HTML 编辑器](http://htmledit.squarefree.com/)进行测试时，它对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T10:46:56.080

我在您的 CSS 中没有看到任何错误。问题往往出在其他地方。也许另一条规则覆盖了这一点。试试这个，如果没有任何改变问题不在你的 css 中：

```
body div.mytabclass ul li {
    font-size: 12px;
    font-style: italic;
} 
```

# android - WebView 不播放视频

> ID：13540411
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:39:23.540
> 
> 标签：android, video, webview

我有一个网址，实际上这个网址显示广告，所以它可能是一个 img，视频。如果我们得到视频，那么 onclick 视频应该播放。但它没有播放。我正在使用戴尔 strek(2.2)。所以请建议我如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:00:07.277

在 onCreate 中设置视频播放器和 URL，并通过实现 onClickListener 进行实际播放。

```
public class Test extends Activity {
    TabHost th;
    VideoView video;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // Create tabs using XML

        video = (VideoView) findViewById(R.id.VideoView);
        String path1 = "YOUR_URL";
        MediaController mc = new MediaController(this);
        mc.setAnchorView(video);
        mc.setMediaPlayer(video);
        Uri uri = Uri.parse(path1);
        video.setMediaController(mc);
        video.setVideoURI(uri);
        Button buttonStart = (Button) findViewById(R.id.buttonStart);
        buttonStart.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                video.start();
            }

        });

    }
} 
```

希望这会帮助你。

# javascript - 为什么每次按下按钮后页面不更新

> ID：13540416
> 
> 赞同：0
> 
> 时间：2012-11-24T10:40:04.803
> 
> 标签：javascript, html

我有这段代码，它应该在每次按下按钮时生成一个随机日期并更新文本。但是每次我按下按钮时都没有任何反应（当然是在第一次按下之后）。

```
<!DOCTYPE html>
<html>
<body>

<p>Click the button to display what day it is today.</p>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>
function myFunction()
{
var x;
var d=new Date().getDay();
switch (d)
  {
  case 0:
    x="Today it's Sunday";
    break;
  case 1:
    x="Today it's Monday";
    break;
  case 2:
    x="Today it's Tuesday";
    break;
  case 3:
    x="Today it's Wednesday";
    break;
  case 4:
    x="Today it's Thursday";
    break;
  case 5:
    x="Today it's Friday";
    break;
  case 6:
    x="Today it's Saturday";
    break;
  }
document.getElementById("demo").innerHTML=x;
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:42:26.967

您没有生成随机日期。`Date`构造函数所做的是返回当前**日期**。这就是为什么每次按下时，日期都保持不变。
如果你想要一个随机日期，你可以使用这个函数，它返回一个间隔之间的随机日期：

```
function randomDate(start, end) {
    return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()))
} 
```

并使用更改行：

```
var d=new Date().getDay(); 
```

到

```
var d = randomDate(new Date(2012, 0, 1), new Date()); 
```

***注意****：`random date`函数取自：[Elegant method to generate a array of random dates within two dates](https://stackoverflow.com/questions/9035627/elegant-method-to-generate-array-of-random-dates-within-two-dates#answer-9035732)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T10:44:23.640

我为您制作了一个[jsFiddle](http://jsfiddle.net/YvZSx/1/)。*就当前日期*而言，这对我来说绝对有效。如果您想要一个随机数，则必须使用此代码生成这样的数字

```
function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

where`min`和`max`是您想要的范围，即 0 到 6。我已将此添加到 jsFiddle 示例中。

# matlab - 将元胞数组的元胞数组转换为矩阵矩阵

> ID：13540418
> 
> 赞同：8
> 
> 时间：2012-11-24T10:40:49.400
> 
> 标签：matlab

我可以将矩阵的单元格数组转换为矩阵：

```
>> C={[1,1]; [2,2]; [3,3]};
>> cell2mat(C)
ans =
     1     1
     2     2
     3     3 
```

还行吧。但是，我想将包含其他单元格数组的单元格数组转换为矩阵：

```
>> C={{1,1}; {2,2}; {3,3}};    
>> cell2mat(C)
Error using cell2mat (line 53)
Cannot support cell arrays containing cell arrays or objects. 
```

因此，所需的输出是：

```
>> mycell2mat({{1,1}; {2,2}; {3,3}})
ans =
     1     1
     2     2
     3     3 
```

这个怎么做？

## 编辑：

我也想为多维做同样的事情：

```
>> mycell2mat({{1,1;1,1}; {2,2;2,2}; {3,3;3,3}})
ans(:,:,1) =

     1     1
     1     1

ans(:,:,2) =

     2     2
     2     2

ans(:,:,3) =

     3     3
     3     3 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T15:18:07.980

老实说，我从不喜欢`cell2mat`慢，所以我想出了一个使用[逗号分隔列表](http://www.mathworks.com/help/matlab/matlab_prog/comma-separated-lists.html?s_tid=doc_12b)的替代解决方案！

### 转换向量元胞数组

这相当简单，只需使用[冒号](http://www.mathworks.com/help/matlab/ref/colon.html)运算符并[垂直连接所有向量](http://www.mathworks.com/help/matlab/ref/vertcat.html)：

```
C = {[1,1]; [2,2]; [3,3]};
A = vertcat(C{:}) 
```

所以我们得到：

```
A =
    1   1
    2   2
    3   3 
```

### 转换元胞数组的元胞数组

这有点棘手。由于它是元胞数组的元胞数组，因此我们必须通过两次使用冒号和 来获得所有元素的向量[`horzcat`](http://www.mathworks.com/help/matlab/ref/horzcat.html)，然后[`reshape`](http://www.mathworks.com/help/matlab/ref/reshape.html)将其放入所需的矩阵中。

```
C = {{1,1}; {2,2}; {3,3}};
V = [size(C{1}), 1]; V(find(V == 1, 1)) = numel(C);
A = reshape([horzcat(C{:}){:}], V) 
```

所以我们得到：

```
A =
    1   1
    2   2
    3   3 
```

的操作`V`可确保`A`正确地重新调整形状，而无需明确指定输出尺寸（不幸的是，我没有为此找到一个衬里）。这也适用于多维元胞数组：

```
C = {{1, 1; 1, 1}; {2, 2; 2, 2}; {3, 3; 3, 3}};
V = [size(C{1}), 1]; V(find(V == 1, 1)) = numel(C);
A = reshape([horzcat(C{:}){:}], V)

A(:,:,1) = 
    1   1
    1   1

A(:,:,2) =   
    2   2
    2   2

A(:,:,3) =    
    3   3
    3   3 
```

### 附言

我认为最后一个示例的正确结果应该是 6×2 矩阵，而不是 2×2×3。但是，这不是您要求的，所以它是题外话。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T10:50:56.113

这应该可以解决问题：

```
cellOfCells = {{1,1}; {2,2}; {3,3}};
cell2mat(cellfun(@cell2mat, cellOfCells, 'UniformOutput', false)) 
```

编辑：

我同意保持简单很重要，但玩得开心也很重要 :) 所以 - 这是一个可以解决问题的单行代码（并且可以很容易地推广到任何大小）：

```
a = {{1,1;1,1}; {2,2;2,2}; {3,3;3,3}}
reshape(cell2mat(cellfun(@cell2mat,a, 'UniformOutput', false))', 2, 2, 3) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T12:27:26.467

把事情简单化

```
c = {{1,1;1,1}; {2,2;2,2}; {3,3;3,3}};
z = zeros([size(c{1}) size(c,1)]);

for i=1:size(c,1)
    z(:,:,i)=cell2mat(c{i});
end 
```

给

```
EDU>> z    
z(:,:,1) =

     1     1
     1     1

z(:,:,2) =

     2     2
     2     2    

z(:,:,3) =

     3     3
     3     3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-08T06:16:36.363

好的，这个问题是很久以前的问题了 - 但也许我的回答可能会帮助其他读者或搜索者。
我认为*最好*的解决方案几乎是**Eitan T**提出的想法，但可以在不重塑的情况下做到这一点。为了我

```
C={{1,1;1,1};{2,2;2,2};{3,3;3,3}};
A=cell2mat(cat(3,C{:})) 
```

做所要求的 - 因此回答

```
A(:,:,1) =
     1     1
     1     1
A(:,:,2) =
     2     2
     2     2
A(:,:,3) =
     3     3
     3     3 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-17T12:13:24.707

我有同样的错误，我只是注释掉了 cell2mat 中返回错误的行，一切对我来说都很好。

在 cell2mat (51:53) 中注释掉的行：（如果出现错误，您可以使用 dbstop 找到它们）

如果 cisobj || ciscell错误（消息（'MATLAB：cell2mat：UnsupportedCellContent'））；结尾

我认为更改 matlab 函数不是一个好主意，而且我自己对我的解决方案感到非常可耻，但它确实有效。

# php - ZF2 - 自动加载器类映射致命错误“提供的映射文件不存在”

> ID：13540420
> 
> 赞同：7
> 
> 时间：2012-11-24T10:40:59.150
> 
> 标签：php, zend-framework2, zend-autoloader

我刚开始学习 Zend Framework，但我的模块有问题。请看下面的错误。我不知道还有什么可以向您展示以获取更多信息。请让我知道我需要向您展示什么来解决问题。

**致命错误：未捕获的异常 'Zend\Loader\Exception\InvalidArgumentException**

> ```
> 致命错误：未捕获的异常
> 带有消息“地图”的“Zend\Loader\Exception\InvalidArgumentException”
> 提供的文件不存在。映射文件：“C:\Program
> 文件\xampp\htdocs\zend_intro\module\Album/autoload_classmap.php"' 在
> C:\程序
> 文件\xampp\htdocs\zend_intro\vendor\zendframework\zendframework\library\Zend\Loader\ClassMapAutoloader.php:175
> 堆栈跟踪：#0 C:\Program
> 文件\xampp\htdocs\zend_intro\vendor\zendframework\zendframework\library\Zend\Loader\ClassMapAutoloader.php(85)：
> Zend\Loader\ClassMapAutoloader->loadMapFromFile('C:\Program File...')
>  #1 C:\Program Files\xampp\htdocs\zend_intro\vendor\zendframework\zendframework\library\Zend\Loader\ClassMapAutoloader.php(121)：
> Zend\Loader\ClassMapAutoloader->registerAutoloadMap('C:\Program
> 文件...') #2 C:\Program
> 文件\xampp\htdocs\zend_intro\vendor\zendframework\zendframework\library\Zend\Loader\ClassMapAutoloader.php(64)：
> Zend\Loader\ClassMapAutoloader->registerAutoloadMaps(Array) #3
> C:\程序
> 文件\xampp\htdocs\zend_intro\vendor\zendframework\zendframework\library\Zend\Lo
> 在 C:\程序
> 文件\xampp\htdocs\zend_intro\vendor\zendframework\zendframework\library\Zend\Loader\ClassMapAutoloader.php
> 在第 175 行
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T11:10:33.767

如果您从实际使用该`autoload_classmap.php`文件的模块中复制了示例代码，那么您的**module.config.php**文件或 Module.php 文件中的某处**可能**有类似的内容：

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(  // THIS IS
            __DIR__ . '/autoload_classmap.php'      // THE PROBABLE
        ),                                          // CULPRIT
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__
            )
        )
    );
} 
```

解决方案？要么删除那些代码行——*你不需要为每个模块都有一个自动加载器类映射*——或者实际[*创建一个类映射*](http://akrabat.com/zend-framework-2/using-zendloaderautoloader/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T22:27:35.110

**在zend_intro/module/Album**下创建一个名为**autoload_classmap.php**的文件并包含这行代码：

 **```
return array(); 
```

检查文档以获取更多详细 [信息](http://framework.zend.com/manual/2.2/en/user-guide/modules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-24T04:42:53.807

在**module.config.php**中删除**ClassMapAutoLoader**映射，它应该只有 StandardAutoloader ，如下所示；

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
} 
```

这将解决问题。**

# c - 条件跳转或移动取决于未初始化的值 - 释放链表

> ID：13540421
> 
> 赞同：1
> 
> 时间：2012-11-24T10:41:02.660
> 
> 标签：c, linked-list, free, valgrind

我想在 C 中释放一个链表。一切正常，但 Valgrind 告诉我

```
Conditional jump or move depends on uninitialised value(s)
    at 0x401400: mtf_destroy 
```

这是代码：

```
list_elt *head;

void mtf_init() {
    list_elt *current;
    head = malloc(sizeof(list_elt));
    current = head;
    for (int i = 0; i < LIST_SIZE-1; i++) {
        current->value = (BYTE) i;
        current->next = malloc(sizeof(list_elt));
        current = current->next;
    }
    current->value = LIST_SIZE-1;
}

void mtf_destroy(list_elt *elt) {
    if (elt->next != NULL)
        mtf_destroy(elt->next);
    free(elt);
} 
```

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T10:46:04.393

Valgrind 想告诉你`elt->next`used as expression的实例`if()`没有被初始化，所以做出的决定`if()`是随机的。

您可能想更改：

```
head = malloc(sizeof(list_elt));
...
  current->next = malloc(sizeof(list_elt)); 
```

成为：

```
head = calloc(1, sizeof(list_elt));

..."
  current->next = calloc(1, sizeof(list_elt)); 
```

一种可移植的方法是使用以下命令显式初始化所有指针`NULL`：

```
head = calloc(1\. sizeof(list_elt));
head->next = NULL;
...
  current->next = calloc(1, sizeof(list_elt));
  current->next->next = NULL; 
```

（其背景是，并非在所有系统上，`NULL`指针都必须由一系列`NUL`字符（字节）表示）。

无论如何，我不确定您是否分配了正确的东西，`next`因为您没有发布`list_elt`.

* * *

**更新：**

关于递归调用`mtf_destroy()`：

尽管递归看起来很酷，并且确实是许多问题的优雅解决方案，但使用它们往往容易出错，例如在非常深入的情况下，因为它们会消耗系统资源（内存）。

因此，如果您的列表真的很长，那么销毁它可能会破坏您的代码。

我的建议：尝试不使用递归，至少如果您无法提前预测要执行的递归级别。

# iis-7 - .net 4.5 Asp Mvc -> 错误 403.14- IIS 7 - Windows Server 2008 R2

> ID：13540428
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:41:47.550
> 
> 标签：iis-7, asp.net-mvc-4, windows-server-2008-r2, .net-4.5, asp.net-4.5

当我想将 MVC 4 (.net 4.5) 应用程序部署到我的 iis 时，我得到 403.14 呼叫我内容不可浏览。

当我部署未更改的 mvc 4 模板时也会发生这种情况。

当使用带有 .net 4.0 的 mvc 4 模板时，一切正常。我检查了其他帖子，但无法找出解决方案。

集

我运行了 aspnet_regiss -i，它没有任何错误地完成。

唯一奇怪的是 .net 4.5 安装在 .net 4.0 目录 %windows%/microsoft.net/Framework64/ **4.0.30319** 从这个文件夹中，我还运行了 aspnet_regiis。

为了确保安装了 4.5，我重新启动了 .net 4.5 安装程序，它告诉我它正在安装

apppools 还向我显示**4.0.30319**作为版本。

还有一个以 4.5 为目标的 mvc 应用程序正在运行。但我不知道它是否使用 4.0 模板创建并重新定位到 4.5 任何提示？

app.config 是 mvc 4 模板中未更改的默认值。

我刚刚测试创建一个子文件夹，我将其转换为应用程序。将网站放置在那里使其适用于主页。但是所有子页面（例如登录）都以 404 Not Found 结尾

但是为什么不在根文件夹上呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T22:24:00.623

.net 4.5 替换 .net 4。[http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx](http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx)。您可能希望在 web.config 文件中使用它来使您的应用程序正常工作：

```
<system.webServer>
<modules runAllManagedModulesForAllRequests="true" />
...
</system.webServer> 
```

如果代码符合您的要求，那么您将希望按照此处所述的正确方式进行操作： [http ://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)

# javascript - Javascript：如何根据条件从具有多个节点和数组的 JSON 数组中检索值？

> ID：13540432
> 
> 赞同：0
> 
> 时间：2012-11-24T10:42:04.143
> 
> 标签：javascript

我有以下格式的 JSON 数据。我需要获取与“Non Veg”中具有 specialDeal 为 true 的商店名称对应的商店名称。（注意：只有一个商店将 specialDeal 设为 true，还请注意 nonVeg 中的内容不是数组）。我将如何找回它？请帮忙。提前致谢。

```
{
  "Veg": {
    "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
    "discntType":"", "Store":"", "StoreType":"", "Fund":"",
    "FundDetails":[
      {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
      {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
    ]
  },
  "Non Veg": {
    "chicken":[
      {
        "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
        "discntType":"", "Store":"", "StoreType":"", "Fund":"",
        "specialDeal":"", "promoStatus":"",
        "FundDetails":[
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
        ]
      },
      {
        "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
        "discntType":"", "Store":"", "StoreType":"", "Fund":"",
        "specialDeal":"", "promoStatus":"",
        "FundDetails":[
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
        ]
      }
    ],
    "fish":[
      {
        "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
        "discntType":"", "Store":"", "StoreType":"", "Fund":"",
        "specialDeal":"", "promoStatus":"",
        "FundDetails":[
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
        ]
      },
      {
        "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
        "discntType":"", "Store":"", "StoreType":"", "Fund":"",
        "specialDeal":"", "promoStatus":"",
        "FundDetails":[
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
          {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
        ]
      }
    ],
    "egg":[
      {
        "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
        "discntType":"", "Store":"", "StoreType":"", "Fund":"",
        "specialDeal":"", "promoStatus":"",
        "discntVal":"", "FundVal":"", "FundBal":""
      },
      {
        "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
        "discntType":"", "Store":"", "StoreType":"", "Fund":"",
        "specialDeal":"", "promoStatus":"",
        "discntVal":"", "FundVal":"", "FundBal":""
      }
    ]
  },
  "isMember":"Y",
  "orderId":""
} 
```

这是我尝试过的代码：

```
var nonveg = DealsJSON.Non Veg; //where JSON is our json data
for (var key in nonveg) {
    for (var i = 0; i < nonveg[key].length; i++) {
        var amountObj = nonveg[key][i];
        if (amountObj['specialDeal'] == true) {
            console.log(amountObj['Store']);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:18:01.923

代码看起来不错，除了：

```
var nonveg = DealsJSON.Non Veg; 
```

...这是一个语法错误。属性文字中不能有空格，即使属性*名称*可以。要使用名称不是有效文字的属性，可以使用方括号表示法：

```
var nonveg = DealsJSON["Non Veg"]; 
```

详细信息：在 JavaScript 中，您可以通过两种方式访问​​对象属性：

1.  点表示法和名称的文字，例如`obj.foo`.

2.  括号表示法和名称的*字符串*，例如`obj["foo"]`. 并且字符串不必只是字符串文字，它可以是任何表达式的结果。

另外，这是可疑的：

```
if (amountObj['specialDeal'] == true) { 
```

将事物`true`与`==`JavaScript 中的 with 进行比较通常不是一个好主意。如果您只想知道是否`specialDeal`有一个不是`0`, `false`, `""`, `undefined`, or的值`null`（而且它不能是`undefined`，JSON 不支持），只需删除比较：

```
if (amountObj['specialDeal']) { 
```

或者当然

```
if (amountObj.specialDeal) { 
```

另请注意，在您的 JSON 中，`specialDeal`以*string*形式给出。如果对于非特价商品，字符串始终为空白，那很好，因为空白字符串是错误的。但是如果字符串可能包含，例如，`"false"`你必须小心，因为**字符串** `"false"`不是`false`。我们必须查看其他可能值的示例，以便建议您如何处理它，但如果它始终`""`为 false 而其他字符串为 true，则上述内容很好。

如果我[将您的 JSON 更改](http://jsbin.com/axusin/1/edit#javascript)为`specialDeal`that's `true`，则带有上面列出的 mod 的这段代码可以正常工作：[Live Example](http://jsbin.com/eyecak/1) | [来源](http://jsbin.com/eyecak/1/edit)

```
var nonveg = DealsJSON["Non Veg"];
for (var key in nonveg) {
  for (var i = 0; i < nonveg[key].length; i++) {
    var amountObj = nonveg[key][i];
    if (amountObj.specialDeal) {
      display("Found store: " + amountObj.Store);
    }
  }
} 
```

# ios - 为某些方案添加宏 BETA=1 到 Xcode？

> ID：13540438
> 
> 赞同：6
> 
> 时间：2012-11-24T10:43:36.857
> 
> 标签：ios, xcode, macros, c-preprocessor, beta-testing

我想向`#define`我的应用程序添加一个新宏，但仅适用于某些方案，例如 beta 方案。做这个的最好方式是什么？我知道当您在测试中（即在模拟器中）运行应用程序时，它会添加一个 DEBUG=1 宏，但我不知道如何添加更多宏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T12:40:57.627

最好的方法是使用[Xcode 配置文件](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/BasingBuildConfigurationsonConfigurationFiles.html)。

添加几个名为`Beta.xcconfig`and `Distribution.xccconfig`（或类似名称）的文件，并为每种构建添加宏。

Beta.xcconfig：

```
GCC_PREPROCESSOR_DEFINITIONS = $(inherited) BETA=1 
```

分发.xcconfig。

```
GCC_PREPROCESSOR_DEFINITIONS = $(inherited) BETA=0 
```

您可以使用新文件对话框轻松添加文件：

![创建一个 xcconfig 文件](../Images/6fb34912faee9550f0bd73ff540e8d69.png)

然后，您需要将每个文件映射到构建样式。进入顶级项目，项目设置（目标上方），然后单击“信息”部分：

![映射 xcconfigs 以构建样式](../Images/da1fb083e20fa7bdee40e387b0949dd0.png)

在您的代码中，您可以像往常一样使用宏：

```
#if BETA
// do something only in beta
#endif 
```

如果您不分配值，而是定义您应该使用的宏`#ifdef`。

如果您使用多个宏，您可能需要在构建日志中检查一切是否按预期工作：

![使用突出显示的宏构建日志](../Images/503293042e49ec8ac5f4b94e72765f19.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T11:46:43.820

方案仅执行构建配置

只能为构建配置设置宏

进行新的构建配置和使用它的新方案

有点不方便：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T13:41:36.940

替代方案（我使用的）将在您的项目或目标的构建设置中。

1) 转到项目 -> 目标 -> 构建设置
2) 搜索“预处理器宏”

现在您应该能够看到为该项目定义的所有方案并添加您喜欢的任何预处理器宏。只要记住留下$（继承）。此外，您可能希望保留所有其他已定义的宏，如在我的情况下，我有 COCOAPODS=1 定义。

# java - Android LaunchActivity 错误

> ID：13540440
> 
> 赞同：2
> 
> 时间：2012-11-24T10:44:00.727
> 
> 标签：java, android, mobile

我正在为一个学校项目开发一个基本的 android 应用程序。一切正常，直到我放入一个充当我的文件对象的新类 - 我写入它的变量，然后将对象保存到 SD 卡。但是我现在得到一个调试错误。它不包含对我自己的代码的任何引用——它似乎是指在它启动活动时发生的事情，而不是在它执行我的代码时发生的事情。有什么建议么？调试控制台中的错误消息如下：

```
Homework Planner [Android Application]  
DalvikVM[localhost:8600]    
    Thread [<1> main] (Suspended (exception RuntimeException))  
        <VM does not provide monitor information>   
        ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2194    
        ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2229 
        ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 139    
        ActivityThread$H.handleMessage(Message) line: 1261  
        ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
        Looper.loop() line: 154 
        ActivityThread.main(String[]) line: 4945    
        Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
        Method.invoke(Object, Object...) line: 511  
        ZygoteInit$MethodAndArgsCaller.run() line: 784  
        ZygoteInit.main(String[]) line: 551 
        NativeStart.main(String[]) line: not available [native method]  
    Thread [<10> Binder Thread #2] (Running)    
    Thread [<9> Binder Thread #1] (Running) 
    Daemon Thread [<8> FinalizerWatchdogDaemon] (Running)   
    Daemon Thread [<7> FinalizerDaemon] (Running)   
    Daemon Thread [<6> ReferenceQueueDaemon] (Running) 
```

这是活动开始的代码：

```
public class InputActivity extends Activity {
String chosenSubject = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_input);

    // Set up the spinner and it's listener
    Spinner subjectSpinner = (Spinner) findViewById(R.id.deadlinePicker);
    subjectSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onNothingSelected(AdapterView<?> arg0) {}

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            chosenSubject = (String) arg0.getItemAtPosition(arg2);

        }

    });

    // Set up save button
   Button saveButton = (Button) findViewById(R.id.btnSave);
   saveButton.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            //saveFile();
        }           
    });        
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_input, menu);
   return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:59:34.550

确保在清单文件中包含适当的权限，以便在 SD 卡中写入数据：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

还要确保将活动包含在清单文件中：

```
<activity android:name=".InputActivity"/> 
```

# azure - 根据 Azure 中的负载安排离线任务

> ID：13540443
> 
> 赞同：0
> 
> 时间：2012-11-24T10:44:09.320
> 
> 标签：azure, scheduler, job-scheduling

我们有一个系统部署到 Azure，我们有一个实时服务（始终运行）和几个需要定期运行的离线任务。

我们希望实时和离线任务使用相同的worker，通过使离线任务仅占用实时服务当前未使用的资源（实时服务上的负载随时间变化） -of-day，但我不希望按固定时间安排）。

我确信这不是一种罕见的情况，但我找不到现有的解决方案来为我处理负载测量和调度。

任何想法或链接将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:33:01.790

查看 Windows Azure 自动缩放应用程序块： http: [//msdn.microsoft.com/en-us/library/hh680892](http://msdn.microsoft.com/en-us/library/hh680892%28v=pandp.50%29.aspx) (v=pandp.50).aspx 。使用它，您可以确定您的应用程序何时在低负载下运行，并在此基础上启动您的任务。通常，此应用程序块用于自动缩放，即增加或减少您的实例，但我不认为为什么它不能用于生成新任务而不是自动缩放。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:41:10.080

从维护的角度来看，要让事情保持整洁，而不是将太多东西捆绑在一起，有很多话要说。

也就是说，我想您可以让您的工作角色生成一个线程，该线程将监视该角色的活动并决定何时执行其操作以及该角色已经执行的任何其他活动。

我要确保的主要事情是定期检查该线程是否存在...

# entity-framework-4.1 - 实体项目构建时间

> ID：13540445
> 
> 赞同：0
> 
> 时间：2012-11-24T10:44:30.847
> 
> 标签：entity-framework-4.1, build-process

我们有一个包含多个项目的解决方案。

一个项目拥有我们的实体模型，其中包含 200 多个表。

每次我构建该项目时，VS 2012 在“构建开始”状态下花费的时间太长，直到它继续构建过程。

问题是即使我们不更改该项目中的任何内容，这个问题也会发生。

所以：每次我们尝试构建任何依赖于实体项目的项目时，即使实体项目没有任何变化，也会花费很长时间。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:01:46.537

我通过在编译时关闭验证解决了这个问题。

要获得该选项：打开 EDMX 文件，然后右键单击空白区域，然后打开属性窗口，然后将选项：“Validate On Build”设置为 False。

![在此处输入图像描述](../Images/82003753cf88c432956821d2f9e36824.png)

# windows - Play 2 框架停止服务器

> ID：13540448
> 
> 赞同：4
> 
> 时间：2012-11-24T10:44:57.437
> 
> 标签：windows, windows-7, playframework, playframework-2.0

我正在使用播放控制台开始我的 Play 2.0.4 项目，并且

```
~run 
```

然后显示

```
(Server started, use Ctrl+D to stop and go back to the console...) 
```

但是，当按下 Ctrl+D 时没有任何反应，服务器不会停止。我在 Windows 7 上。除了停止完整的播放控制台/cmd.exe 之外，还有什么解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T11:08:52.543

它正在等待文件结束字符。在 Unix 终端上，这是通过键入 Ctrl-D 插入的。在 Windows 上，Ctrl-Z 应该可以工作。虽然我经历过没有的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T12:09:45.670

在 Ctrl-D 之后按 Enter

# c# - 在哪里可以找到在 MonoDevelop 中使用 Qt 的教程？

> ID：13540451
> 
> 赞同：1
> 
> 时间：2012-11-24T10:45:29.817
> 
> 标签：c#, qt, monodevelop, qyoto

我记得我在几年前做的一个 C++ 项目中使用了 Qt，我特别喜欢 Qt，因为它的应用程序看起来很漂亮，不需要为跨平台工作做太多额外的工作，而不是为 Mac、Linux 和 Windows 重新编译。（当然，每个平台上也存在二进制打包问题。）。

我看过 Qyoto（嗯，没有二进制文件，看起来它适用于 Leapord，它需要使用 SMOKE）和 qt4dotnet（最后一次发布于 2010 年 7 月，看起来它需要 Qt jambi）和 Qt#（似乎已经灭绝）。

有哪些好的教程或链接可以让我开始使用 Qt 和 MonoDevelop / C#？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:04:09.757

不是实际答案，但我不建议将 Mono 与任何 UI 库一起使用。IHMO，对于某些服务器/控制台的东西，Mono 可以，但不适用于 UI。

我参与了一个项目，它首先使用 Mono 和 WinForms（在 Linux 上实现非常糟糕），然后使用 GTK。便携性的想法没有得到回报。您很快就会遇到平台特定的缺陷。

我建议将 Qt 与 C++ 一起使用。通过 Qt 如何让您最大限度地减少指针的使用，您可以非常快速地学习所需的 C++ 子集。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T15:59:46.393

我在 Mono 上的 UI 体验与 Valentin 非常相似。我也发现 WinForms 是不可取的。我还发现 GTK# 或 Qyoto 都没有真正适合 .NET 框架（请参阅我对[Qyoto 是否可行的平台的回答？](https://stackoverflow.com/questions/5385753/is-qyoto-a-viable-platform/7853353#78533)）

但是，为了回答您的问题，当我将我的应用程序移植到 Qt 时，我使用了以下教程： [C# Qyoto 教程](http://zetcode.com/gui/csharpqyoto/)。

同样，我强烈建议使用 C++ 进行 Qt 开发或使用 WPF 进行 C# 开发。

# eclipse-emf - EMF：如何将一组具有唯一名称的 XML 元素映射到 Map

> ID：13540452
> 
> 赞同：0
> 
> 时间：2012-11-24T10:45:30.463
> 
> 标签：eclipse-emf, eclipse-emf-ecore, emf

我有一个现有的 XML 格式，我想为其创建一个基于 Ecore 的模型，我可以使用它来加载和保存该 XML 格式的文件（无需编写我自己的序列化器/反序列化器）。XML 包含具有以下结构的元素：

```
<parent>
  <some-other-element>...</some-other-element>
  ...
  <child name="name1">...</child>
  <child name="name2">...</child>
  ...
</parent> 
```

元素的名称`child`在它们的兄弟姐妹中应该是唯一的。显然，最自然的建模方法是使用`Map`或`EMap`其他类似地图的结构。是否可以使用这样的数据结构并对模型进行注释，以使该模型的实例以上述格式保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:04:51.493

我认为您最好采用您需要的独特约束创建 xsd 的路线，因为使用注释我不确定它是否可能。也许如果您将列表映射为具有@unique=true 并且类型为必须是唯一的属性，例如 type="child.name"，那么在子接口/名称属性上使用注解作为 unique=true。那可能有用

# playframework - 在 Eclipse 中调试 Play 2 框架项目？

> ID：13540461
> 
> 赞同：1
> 
> 时间：2012-11-24T10:46:52.257
> 
> 标签：playframework, playframework-2.0

我需要帮助如何在 Eclipse 中为 Play 2.0.4 项目设置调试。我必须为此配置什么？我已经使我的项目黯然失色，并将其导入 Eclipse 工作区。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:51:25.073

`play eclipse`首先用or创建一个 eclipse 项目`play eclipse with-source=true`。在 Eclipse 中打开该项目

开始玩`play debug`。并使用命令启动应用程序`run`。（或直接`play debug run`

然后通过远程调试连接 eclipse：使用`Connect JPDA`with`Debug As`启动调试会话。调试端口为 9999。

另见：[https ://github.com/playframework/Play20/wiki/IDE](https://github.com/playframework/Play20/wiki/IDE)

# php - 连接保持活动问题

> ID：13540464
> 
> 赞同：6
> 
> 时间：2012-11-24T10:47:14.780
> 
> 标签：php, linux, curl

我有一个 PHP 脚本“A”，它启动另一个 PHP 脚本“B”，运行时间长达 5 小时。我为此使用 curl 功能。但我的问题是脚本“A”不确定与脚本“B”的连接。我已经更改了 max_execution_time、超时、套接字超时等……但没有任何帮助。

我是否需要使用 curl 或其他东西向脚本“B”发送标题？

```
$curl_header[] = "Accept: text/xml,application/xml,application/xhtml+xml,text
/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
$curl_header[] = "Cache-Control: max-age=0";
$curl_header[] = "Connection: keep-alive";
$curl_header[] = "Keep-Alive: 84600"; 

$url = 'http://test.de/test_B.php';

$ch = curl_init();
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)');
curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $curl_header); 
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 300);
curl_setopt($ch, CURLOPT_TIMEOUT, 84600);
curl_setopt($ch, CURLOPT_NOSIGNAL, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, $url);
$result = curl_exec($ch);
$curl_errno = curl_errno($ch);
curl_close($ch); 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:23:55.090

如果脚本“B”需要很长时间才能完成，那么在执行期间放置一些`echo "something"; flush();`保持连接活动的内容可能会很有用。

最近发生在我身上的类似处决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:13:58.983

您可以使用以下架构：

脚本 A 调用脚本 B，该脚本 B 通过后台 shell 请求运行脚本 C 并返回一些标识符。基本上，脚本 B 只是启动将在后台运行的 5 小时工作，您不必保持连接。您可以将进度存储在数据库或某个文件中。

然后，脚本 A 可以通过调用某个回显接口来调用该 5 小时脚本 C 的进度，我们称之为脚本 D，它将读取数据库或文件并跟踪脚本 C 完成任务的程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:27:20.917

让脚本 B 将其输出存储在某处，然后在 5 小时后连接并检查。HTTP 服务器不是为这些时间设计的，您可能会遇到任何类型的超时。

# android - 如何获得 facebook 和 twitter 之类的 gmail webview for android？

> ID：13540466
> 
> 赞同：2
> 
> 时间：2012-11-24T10:47:27.053
> 
> 标签：android, gmail, single-sign-on, android-2.2-froyo

我的应用程序中有一个要求，我想通过 google/gmail 帐户提供登录信息。

我已经为 facebook 和 twitter 使用了相应的 sdk **（fb-dev app 和 twitter4j）** 现在我想为 gmail 实现相同的功能，即在单击按钮时加载的 webview 并询问用户的 gmail 凭据和成功登录后为我提供

`access-token / uname / gender etc.`基本细节或谷歌提供的任何细节。

> 在您告诉我每个 android 设备都配置了 gmail 应用程序之前，因此不需要像 fb/twitter 这样的 gmail 登录。在那种情况下，我想知道如何实现这一目标。

**API 和代码片段真的很有帮助。如果我也可以为 gmail 提供类似 webview 的界面，那将是最好的。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:46:50.723

您可以使用 Google+ 开发者[API](https://developers.google.com/+/mobile/android/getting-started)。查看github上的这个[项目和这篇](https://github.com/imellon/Google-Plus-Android-Sample)[文章](http://www.imellon.com/blog/2011/11/24/integrating-google-api-to-android/)。

# perl - 如何将许多文件 url 转义 (%XX) 重命名为人类可读的形式

> ID：13540474
> 
> 赞同：2
> 
> 时间：2012-11-24T10:48:50.543
> 
> 标签：perl, bash, sed

**已编辑：**将 intl 字符添加为“Séléction”*并*在文件名中添加引号

我已经在一个目录中下载了很多文件，但其中许多文件都使用*URL 转义文件名*存储，其中包含符号百分比，后跟两个十六进制字符，例如：

```
ls -ltr $HOME/Downloads/
-rw-r--r-- 2 user user 13171425 24 nov 10:07 Swisscom%20Mobile%20Unlimited%20Kurzanleitung-%282011-05-12%29.pdf
-rw-r--r-- 2 user user  1525794 24 nov 10:08 31010ENY-HUAWEI%20E173u-1%20HSPA%20USB%20Stick%20Quick%20Start-%28V100R001_01%2CEnglish%2CIndia-Reliance%2CC%2Ccolor%29.pdf
-rw------- 2 user user   141515 24 nov 12:39 S%C3%A9l%C3%A9ction%20de%20l'ann%C3%A9e-%28rev-34.01%29.pdf
... 
```

**所有**这些名称都与以下形式匹配，**恰好**包含3 个部分：

*   对象名称`-(`修订版和/或日期，无用 ...`).`扩展

在同一命令中，我想获得unde

我的目标是有一个命令来重命名所有这些文件以获得：

```
-rw-r--r-- 2 user user 13171425 24 nov 10:07 Swisscom_Mobile_Unlimited_Kurzanleitung.pdf
-rw-r--r-- 2 user user  1525794 24 nov 10:08 31010ENY-HUAWEI_E173u-1_HSPA_USB_Stick_Quick_Start.pdf
-rw------- 2 user user   141515 24 nov 12:39 Séléction_de_l'année.pdf 
```

我已经通过以下方式成功地完成了这项工作：

```
urlunescape() {
    local srce="$1" done=false part1 newname ext
    while ! $done ;do
        part1="${srce%%%*}"
        newname="$part1\\x${srce:${#part1}+1:2}${srce:${#part1}+3}"
        [ "$part1" == "$srce"  ] &&
            done=true ||
            srce="$newname"
      done
    newname="$(echo -e $srce)"
    ext=${newname##*.}
    newname="${newname%-(*}"
    echo ${newname// /_}.$ext
}
for file in *;do
    mv -i "$file" "$(urlunescape "$file")"
  done
ls -ltr
-rw-r--r-- 2 user user 13171425 24 nov 10:07 Swisscom_Mobile_Unlimited_Kurzanleitung.pdf
-rw-r--r-- 2 user user  1525794 24 nov 10:08 31010ENY-HUAWEI_E173u-1_HSPA_USB_Stick_Quick_Start.pdf
-rw------- 2 user user   141515 24 nov 12:39 Séléction_de_l'année.pdf 
```

或使用 sed、tr、bash ... 和 sed：

```
for file in *;do
    echo -e $(
        echo $file |
            sed 's/%\(..\)/\\x\1/g'
      ) |
        sed 's/-(.*\.\([^\.]*\)$/.\1/' |
        tr \ \\n _\\0 |
        xargs -0 mv -i "$file"
  done
ls -ltr
-rw-r--r-- 2 user user 13171425 24 nov 10:07 Swisscom_Mobile_Unlimited_Kurzanleitung.pdf
-rw-r--r-- 2 user user  1525794 24 nov 10:08 31010ENY-HUAWEI_E173u-1_HSPA_USB_Stick_Quick_Start.pdf
-rw------- 2 user user   141515 24 nov 12:39 Séléction_de_l'année.pdf 
```

但是，**我敢肯定**，必须存在更简单和/或更短的方法来做到这一点。

此 shell 脚本将重新创建一个目录，其中包含示例中的 3 个文件：

```
#!/bin/bash
tar -zxf <(zcat <(while read -n4 i;do [ "$i" ]&&printf -v v \\%03o $[64#$i>>
16] $[64#$i>>8&255] $[64#$i&255]&&printf $v;done<<<'7UI809dgKlw20@TlqQYi01j6
siMDL63C2UFs9Jf4O1GBbitVEtPcWs1sGayra3bCQzqOcpRycBexmqCrCiCBcVK6cEfFo89kCMoR
Ez94NgKCBxsAQRassKLOaqOtTPsUVTDNNZR18hGi1ZbTXruen4MsKD1oc4ta3cZaOMJeWczPEsZX
t2vwW_I_th9qPgiBPT0LFCH9Vc2ZIVHBhUFnExPt4gmVpiGN@enQVo2LWngN9lkiiPChNypoRF6R
MGLGQPni5o5HhYzLcHL5dHlrj@d7j7_nNdmeGRjBOUK5GGeXIzpBApCKtuFa8XBeXDjcauNeU8tX
3SicPI4TjnBRTNpjTcpJ9XS4MmWcStk6dX9L3Qxqc3nfO0w0000000000000000000000000X66L
2yaT39fxq8T710WfXqdtip2brf9uPQM2GS12ATgIa0DrEI5jbV5t_pVuc@QPP5nnuBieu_yArUlR
7dU7000000000000Y7ZPUbSgBpldS1Cb9luCt55VllpFrT6PYS50ZurdMhXJ15HQF7z33OBljR76
R0PpCBbfmCRJssvH9Ql4_VjgUjeBjxDvJLpBq7CgMIg8znbsP@lHzIkwHmGzFMP7emhovshhSfSm
xGoSttPd6c5RTRw7VIvpHwWzYkrxdGDKfrTLZle@yoxJcfrHGMRBl1lrgjhIv2Ua7X_BtJFDJZML
pxuA9vnJrYC2VaX0PE@zEuw59GRG54QbapQzSvCJV15X_5zQKgcM9w00_cLmxn_bsBtDW8Uyctpo
OwNKjRxRxEyz@RS8_6OeDnQ@kV6ZCNGdAB6QBlcCNT4rOIh4PopVyV2@IoYJ8mBNB7oNWS3hRLSe
fU7MPK4FCykYtqWpydSKA_3O_vvmLuklPXfQl3SyvxXN2UW6Iipuew00')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:34:52.583

为什么不这样：

```
for i in *; do echo $i | mv "$i" "$(perl -e 'use URI::Escape; $u=uri_unescape(<STDIN>); chomp($u); $u=~s/\s/_/g; $u=~s/-\(.*\)//; print $u;')"; done; 
```

使用不同的语法，它变成了：

```
for i in *; do mv "$i" "$(perl -MURI::Escape -e '$u=uri_unescape($ARGV[0]); chomp($u); $u=~s/\s/_/g; $u=~s/-\(.*\)//; print $u;' "$i")"; done; 
```

（我也修复了双引号）

**编辑：**但这要好得多：

```
rename 's/%([0-9A-Fa-f]{2})/chr(hex($1))/eg|s/\s/_/g|s/-\(.*\)//' * 
```

rename 支持使用正则表达式重命名文件。第一个正则表达式取自这里：[http](http://search.cpan.org/dist/URI/URI/Escape.pm) ://search.cpan.org/dist/URI/URI/Escape.pm ，这正是`uri_unescape`它的作用。然后我们可以在同一个字符串中使用`|`. 它看起来很干净，我学到了一些新东西:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T16:47:03.003

如果你有 Perl 5.14，

```
perl -MURI::Escape -e'
   rename $_, uri_unescape($_) =~ s/-\(.+\)\././r =~ tr/ /_/r
      for @ARGV;
' * 
```

添加换行符以提高可读性。它们可以被移除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T11:46:08.623

这是使用的快速方法`sed`：

```
for i in *; do mv "$i" "$(echo -e $(echo $i | sed -e 's/-%28.*\(\..*\)/\1/' -e 's/%20/_/g' -e 's/%\(..\)/\\x\1/g'))"; done 
```

结果：

```
31010ENY-HUAWEI_E173u-1_HSPA_USB_Stick_Quick_Start.pdf
Séléction_de_l'année.pdf
Swisscom_Mobile_Unlimited_Kurzanleitung.pdf 
```

解释：

```
1\. Chops off the revision, and/or Date, etc, and keeps the extension
2\. Changes spaces to underscores
3\. Converts everything else 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T17:49:25.993

是的！@fthiella 是第一个提供基于包`rename`实用程序的解决方案`perl`！

注意：*重命名这个***词** 是第三个，在这个线程的标题中。;-)

 *```
apropos rename
...
mv (1)               - move (rename) files
prename (1)          - renames multiple files
rename (1)           - renames multiple files
rename (2)           - change the name or location of a file
rename.ul (1)        - Rename files
... 
```

在哪里`man rename`给：

```
SYNOPSIS
   rename [ -v ] [ -n ] [ -f ] perlexpr [ files ]

DESCRIPTION
   "rename" renames the filenames supplied according to the rule specified as
   the first argument.  The perlexpr argument is a Perl expression which is
   expected to modify the $_ string in Perl for at least some of the filenames
   specified.... 
```

所以我打的第一行是：

```
rename 's/%(..)/chr hex $1/eg;y| |_|;s/-\(.*\././' * 
```

我真的很接近@fthiella 的*答案*！

为了更精确的正则表达式，`..`（`[0-9A-Fa-f]{2}`从 fthiella 开始）最好写成`\X{2}`：

```
rename 's/%(\X{2})/chr hex $1/eg;y| |_|;s/-\(.*\)\././' * 
```

但是@Borodin 的帖子首先要求我参观专门的模块，所以这个答案也很好：

```
rename 'use URI::Escape;$_=uri_unescape($_);y| |_|;s/-\(.*\)\././' * 
```

或（我相信这会更好，但我不确定！）

```
rename 'BEGIN{use URI::Escape};$_=uri_unescape($_);y| |_|;s/-\(.*\)\././' * 
```

谢谢大家！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T14:37:12.260

使用 Perl 的[`URI:Escape`](https://metacpan.org/module/URI%3aEscape)模块，这是相对简单的。不幸的是，它不是核心模块，因此您可能需要安装它。

```
use strict;
use warnings;

use URI::Escape;

while (glob '*') {
  my $newname = uri_unescape($_);
  $newname =~ s/-\(.+\)\././;
  $newname =~ tr/ /_/;
  rename $_, $newname;
} 
```

**输出**

```
-rw-r--r-- 2 user user 13171425 24 nov 10:07 Swisscom_Mobile_Unlimited_Kurzanleitung.pdf
-rw-r--r-- 2 user user  1525794 24 nov 10:08 31010ENY-HUAWEI_E173u-1_HSPA_USB_Stick_Quick_Start.pdf
-rw------- 2 user user   141515 24 nov 12:39 Séléction_de_l'année.pdf 
```

作为一个单行：（添加换行符以提高可读性。它们可以被删除。）

```
perl -MURI::Escape -e'
   for (@ARGV) {
      $o = $_;
      $_ = uri_unescape($_);
      s/-\(.+\)\././;
      tr/ /_/;
      rename $o, $_;
   }
' * 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-03T10:53:21.493

### 快速（无分叉），纯[bash](/questions/tagged/bash "显示标记为“bash”的问题")解决方案

最新版本的 bash 提供了很多不错的工具。此版本不使用任何叉子，除了`mv`工具。

```
for file in *;do
    printf -v newname "%b" ${file//%/\\x}
    mv "$file" "$newname"
done 
```

好的，这并不完美，因为没有正确测试百分号后面的两个字符，但是对于正确的 url 转义字符串，这将很好地工作。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-24T10:55:39.500

```
cd Downloads
for i in *; do res=$( echo $i | sed 's/%[0-9][0-9]/_/g' ); mv $i $res; done 
```*

# vb6 - 使用多个电子邮件地址从 VB 运行 Outlook

> ID：13540476
> 
> 赞同：1
> 
> 时间：2012-11-24T09:30:11.970
> 
> 标签：vb6, outlook, windows-xp

我正在从我的 VB6 系统发送电子邮件，但在向不同的电子邮件地址发送一封电子邮件时遇到问题。代码如下：

```
On Error Resume Next
Err.Clear
Set oOutLookObject = CreateObject("Outlook.Application")
If Err <> 0 Then
    MsgBox "Email error. Err = " & Err & " Description = " & Err.Description
    EmailValid = "N"
    Exit Function
End If
Set oEmailItem = oOutLookObject.CreateItem(0)
If Err <> 0 Then
    MsgBox "Email error. Err = " & Err & " Description = " & Err.Description
    EmailValid = "N"
    Exit Function
End If
With oEmailItem
    .Recipients.Add (SMRecipients)
    .Subject = SMSubject
    .Importance = IMPORTANCENORMAL
    .Body = SMBody
    For i = 1 To 10
        If RTrim(SMAttach(i)) <> "" Then
            .attachments.Add SMAttach(1)    'i)
        Else
            Exit For
        End If
    Next i
    .send
End With
If Err <> 0 Then
    MsgBox "Email error. Err = " & Err & " Description = " & Err.Description
    EmailValid = "N"
    Exit Function
End If
'''   .Attachments.Add ("c:\temp\test2.txt")
Set oOutLookObject = Nothing 
```

我已将 SMRecipients 设置为单个电子邮件地址，这很好，但是当我添加更多用分号或空格分隔的地址时，它只会发送到原始地址。

我的系统在 XP 下运行。

另一点是，它用于在 Outlook 通讯簿中查找地址，并且在它们不够具体的地方，它会显示匹配的地址以选择正确的地址。它不再这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:04:53.967

使用时`.Recipients.Add()`，需要自己拆分接收者，将每一个传递给`.Add()`.

```
Dim RecipientList() As String
Dim RecipientString As String
Recipients = Split(SMRecipients, ";")
For Each RecipientString in Recipients
  .Recipients.Add RecipientString
Next 
```

# c# - 错误：在 Mono 上运行应用程序时出现 SIGSEGV

> ID：13540478
> 
> 赞同：3
> 
> 时间：2012-11-24T10:49:34.033
> 
> 标签：c#, mono, debian, segmentation-fault, raspberry-pi

经过几个小时的努力，我决定是时候发布了。

我有一个非常基本的 C# Windows Forms 应用程序，我可以在 Windows 上编译和运行它。整个项目设计为在 Pi 上工作，所以我将项目移到它上面并编译。经过几个小时终于让它编译（发现我不得不引用 MySql.Data.dll 文件）它编译没有错误！

但后来我跑了

```
Mono Administration.exe 
```

我得到了这个巨大的错误，我在网上几乎找不到：

```
pi@raspberrypi /media/WAYNEIO/pi/ProjectNibiru/ProjectNibiru $ mono Administration.exe
Stacktrace:

  at System.Drawing.Font.CreateFont (string,single,System.Drawing.FontStyle,System.Drawing.GraphicsUnit,byte,bool) <0x00143>
  at System.Drawing.Font..ctor (string,single,System.Drawing.FontStyle,System.Drawing.GraphicsUnit,byte,bool) <0x0007f>
  at System.Drawing.Font..ctor (string,single,string) <0x00057>
  at (wrapper remoting-invoke-with-check) System.Drawing.Font..ctor (string,single,string) <0xffffffff>
  at System.Drawing.SystemFonts.get_DefaultFont () <0x00073>
  at System.Windows.Forms.Theme..ctor () <0x0002f>
  at System.Windows.Forms.ThemeWin32Classic..ctor () <0x00013>
  at System.Windows.Forms.ThemeVisualStyles..ctor () <0x00013>
  at System.Windows.Forms.ThemeEngine..cctor () <0x0007f>
  at (wrapper runtime-invoke) object.runtime_invoke_void (object,intptr,intptr,intptr) <0xffffffff>
  at System.Windows.Forms.X11DesktopColors..cctor () <0x000bb>
  at (wrapper runtime-invoke) object.runtime_invoke_void (object,intptr,intptr,intptr) <0xffffffff>
  at System.Windows.Forms.XplatUIX11..ctor () <0x001af>
  at System.Windows.Forms.XplatUIX11.GetInstance () <0x00073>
  at System.Windows.Forms.XplatUI..cctor () <0x00157>
  at (wrapper runtime-invoke) object.runtime_invoke_void (object,intptr,intptr,intptr) <0xffffffff>
  at System.Windows.Forms.Application.EnableVisualStyles () <0x00023>
  at ProjectNibiru.Program.Main () <0x0000b>
  at (wrapper runtime-invoke) object.runtime_invoke_void (object,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

Debug info from gdb:

Cannot access memory at address 0x0
Cannot access memory at address 0x0
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/arm-linux-gnueabihf/libthread_db.so.1".
[New Thread 0x4093b460 (LWP 2224)]
0x40085f30 in read () from /lib/arm-linux-gnueabihf/libpthread.so.0
  Id   Target Id         Frame
  2    Thread 0x4093b460 (LWP 2224) "mono" 0x40084d84 in sem_wait@@GLIBC_2.4 () from /lib/arm-linux-gnueabihf/libpthread.so.0
* 1    Thread 0x400cd000 (LWP 2223) "mono" 0x40085f30 in read () from /lib/arm-linux-gnueabihf/libpthread.so.0

Thread 2 (Thread 0x4093b460 (LWP 2224)):
#0  0x40084d84 in sem_wait@@GLIBC_2.4 () from /lib/arm-linux-gnueabihf/libpthread.so.0
#1  0x00195a40 in mono_sem_wait ()
#2  0x000ea384 in ?? ()
#3  0x000ea384 in ?? ()
Backtrace stopped: previous frame identical to this frame (corrupt stack?)

Thread 1 (Thread 0x400cd000 (LWP 2223)):
#0  0x40085f30 in read () from /lib/arm-linux-gnueabihf/libpthread.so.0
#1  0x40085770 in __pthread_enable_asynccancel () from /lib/arm-linux-gnueabihf/libpthread.so.0
#2  0x00000000 in ?? ()

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

Aborted 
```

任何人都可以就为什么会出现这种情况以及如何解决问题提供建议吗？

注意事项；无论我是使用“Xbuild”还是使用“dmcs”编译，还是在 Windows 中编译并复制，都会发生这种情况。编译一个基本的 hello world 脚本也可以正常工作，所以它可能与 Windows.Forms 或 MySql.Data 有关。PI 也正在运行 Debian。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:16:31.517

更仔细地阅读您的问题后，我可以看到它是特定`Cannot access memory at address 0x0`的段错误，因此它可能是由于错误而返回的指针。例如，程序要求*给我处理字体 X*和函数由于某种原因返回空指针。您可以尝试一些可能的解决方案：

*   从源代码编译单声道，在失败的函数附近设置断点并在观察变量值的同时进行步进，也许他们会告诉你一些事情；
*   `mono-complete`如果您还没有安装软件包；
*   尝试安装此应用程序使用的字体（尽管可以从堆栈跟踪中得知该应用程序正在寻找默认字体；））

您也可以查看来源。有趣的部分可能是：

*   [https://github.com/mono/mono/blob/master/mcs/class/System.Drawing/System.Drawing/Font.cs#L58](https://github.com/mono/mono/blob/master/mcs/class/System.Drawing/System.Drawing/Font.cs#L58)
*   [https://github.com/mono/libgdiplus/blob/master/src/font.c#L800](https://github.com/mono/libgdiplus/blob/master/src/font.c#L800)

**老答案：**

这里没有太多细节，但每当我遇到 Windows 窗体应用程序的段错误时，我的第一个猜测是某些 UI 控件是从不同的 UI 线程访问的。很多时候，相同的应用程序不会在 Windows 窗体的 MS 实现上崩溃，但这种方法是不正确的。也许那是你的问题？

其他可能的错误原因列表包括 Mono 错误（给我们版本号）或第三方本机库中的某种错误（如果使用）。对于后一种情况，确实值得使用 GDB（以前使用一些调试选项编译这些库，如 g3）。为了不受垃圾收集器发送的信号的干扰，请记住发出

```
handle SIGXCPU SIG33 SIG35 SIGPWR nostop noprint 
```

在 GDB 会话期间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:16:10.033

The answer to this is to update to the lastest version of mono, and make sure it's being run on soft-float debian.

Answer found by following this thread [http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&t=11634](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&t=11634)

# c# - C# 在多重赋值中丢失中间值

> ID：13540480
> 
> 赞同：3
> 
> 时间：2012-11-24T10:49:43.210
> 
> 标签：c#

**鉴于...**

```
int a = 1, b = 4; 
```

**然后...**

```
a += b += a += b; 
```

**在 C++ 中评估...**

```
(a += (b += (a += b))); // a = 14[5 + 9] (b = 9[4 + 5] (a = 5[1 + 4])) 
```

**...在 C# 中...**

```
(a += (b += (a += b))); // a = 10[1 + 9] (b = 9[4 + 5] (a = 5[1 + 4]))  
                        //        ^ re-use of original value of a (1)  
                        //          instead of expected intermediate right-to-left  
                        //          evaluation result (5) 
```

以上内容已经在 Visual Studio 2008 和 2012 中测试过，因此不怀疑最近引入的语言错误。

但是，我确实希望 C# 的行为能够模仿 C++，并假设我需要接受教育。我了解表达式评估逻辑的 HOW，不需要 MSIL 解释。在进行了相当广泛的搜索后，未能在语言规范中找到相关的细则，我希望语言专家能解释为什么会这样。

对于那些想知道我到底为什么要这样做的好奇者......有一个方便的小 C++ 技巧，可以对两种整数类型进行非常高效和整洁的内联交换，就像这样......

```
a ^= b ^= a ^= b; 
```

我很失望地发现它在 C# 中不起作用并且很好奇为什么。这是关于理解 C# 的低级机制及其背后的基本原理。没有更多，没有更少，特别是没有可读性宗教。

**请注意** ，伙计们，这不是把所有东西都挤在一条线上的认真努力！！！
对于 C（和后来的 C++），运算符优先级和关联性总是被精确定义。赋值运算符的标准从右到左关联性使 C/C++ 版本的行为 100% 清晰且可预测。它在几个编译器和平台上都对我有用，我认为没有像这样表现的编译器是有问题的。
我承认代码行被混淆了，这是一种好奇心，并被用作我可能给初级 C/C++ 程序员的“脑筋急转弯”。显然 C# 是不同的——而且显然是故意的。
***我寻求对导致 C# 与其一种祖先语言的行为分歧的设计考虑进行解释。***即使有根据的猜测也会受到欢迎。

**感谢 Alexander Stepaniuk 的**回答。**
从操作数的从左到右求值开始**

 **```
a        = 1 + theRest1     // (1)  
theRest1 = b = 4 + theRest2 // (2)  
theRest2 = a = 1 + 4        // (3)  
(3) into (2): theRest1 = b = 4 + 5  
(2) into (1): a = 1 + 9 
```

“为什么”的解释仍然值得赞赏。
但 C# 规范清楚，以上是正确的评估。
下面是尽可能接近（我认为）使用 2 个变量的 C++ 技巧......

```
b ^= a ^= b;
a ^ = b; 
```

我不喜欢它——为了记录——因为它打破了我的直觉；-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:06:31.180

它甚至可以追溯到c。

K&R 有这个例子：

```
a[i++] = i; 
```

这是未定义的行为，在一行中修改和使用变量。一种编译器可以一种方式工作，另一种方式工作。该标准故意将其保留为未定义，以便您不依赖它。

K&R 建议使用单独的行或中间变量。不是为了人类可读性，而是为了使编译器的解释明确。

```
a ^= b ^= a ^= b; 
```

所以这变得明确：

```
a ^= b; b ^= a; a ^= b; // can still on one line if that is important to you! 
```

有关更多未定义行为，请参见此处：[为什么这些构造（使用 ++）未定义行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T10:53:15.327

也不能保证在 C/C++ 中工作。在单个语句中多次分配的变量的值是未定义的。

它的工作原理取决于实现——你不妨找到一个根本不起作用的编译器或架构。

C# 只是对它严格，这不是坏事。

无论如何，异或技巧在现代架构上毫无意义。底层实现的效率将低于仅使用临时变量。现代 CPU 上有超过 2 个寄存器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T16:03:41.250

你实际上已经自己解释了一切:)

《再利用一(1)的原值》

为什么会这样？[你可以在这里](https://stackoverflow.com/questions/13516689/if-i-0-why-is-i-i-0-in-c/13516850#13516850)找到很好的解释

总之
`a += anything`相当于`a = a + anything`。
因此编译器需要计算表达式的两个操作数，`a + anything`然后将结果分配给`a`：
1\. 计算第一个操作数（即`a`）。评估结果为 1
2。评估第二个操作数（即`expression`）。评估的结果是 9。评估的副作用是`a`包含 5
3。评估第一个和第二个操作数的总和。结果是 10
4\. 结果分配给`a`。现在`a`包含 10 个。

希望有帮助。

**更新**
根据[c# 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)：*计算表达式中的操作数的顺序是**从左到右**。*请参阅第 150 页的 §14.2。
因此，此行为在 C# 中已指定并正确。**

# php - php53_errors.log 有 19 GB 大！？！IIS

> ID：13540489
> 
> 赞同：2
> 
> 时间：2012-11-24T10:51:15.123
> 
> 标签：php, iis

我从一个月以来一直在运行 IIS，刚刚发现文件 php52_errors.log 已经有 19 GB 大。如何禁用这些日志？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T10:55:35.833

您需要编辑 php.ini 文件

运行这个 php 脚本

```
<?php
    phpinfo();
?> 
```

并寻找：（`Loaded Configuration File`它靠近顶部）。

打开该文件（您可能需要停止服务器软件）并更改

`log_errors`

和或

`log_errors_max_len`

应该有关于文件中设置的注释，但如果没有，您只想禁用可以设置的错误日志`log_errors`（`Off`我不建议这样做）

或者，如果您只想限制可以更改的日志行数

`log_errors_max_len`类似于`500`（我建议这样做:)

另外：我还应该指出，您需要重新启动服务器才能使更改生效。

# c - Shell 解释器中的错误

> ID：13540491
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:51:41.370
> 
> 标签：c

有人可以帮助这个简单的程序提示用户输入命令吗？

```
#include "unistd.h"
#include "stdio.h"

 int main(){
      char command[80];
      while (putchar('#'), gets(command)) {
        if (fork()){
          wait(0); /* Parent */
    }
        else { /* Child */
          execlp(command, command, 0);
          printf("command not found\n");
          exit(1);
        }
      }

} 
```

给出的命令：**gcc system.c -o system.exe**

错误如下：

```
system.c: In function ‘main’:

system.c:12:7: warning: missing sentinel in function call [-Wformat]

system.c:14:7: warning: incompatible implicit declaration of built-in function ‘exit’ [enabled by default] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:58:59.883

您是否尝试过包含 unistd.h 和 stdio.h ？

哦，顺便说一下，从 gets() 的手册中：

```
Never  use gets().  Because it is impossible to tell without knowing the data in advance how many characters gets() will read, and because
gets() will continue to store characters past the end of the buffer, it is extremely dangerous to use.  It has been used to break computer
security.  Use fgets() instead. 
```

# ember.js - 编译 emberjs 抱怨 windows 7 上的 phantomjs

> ID：13540494
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:52:05.567
> 
> 标签：ember.js, phantomjs

我正在尝试编译 emberjs 但每次我运行`rake`它都会告诉我

```
Building Ember...
Done
The system cannot find the path specified.
PhantomJS is not installed. Download from http://phantomjs.org 
```

我下载了 PhantomJS 并将其提取到`C:\Program Files\phantomjs-1.7.0-windows`，然后将此路径添加到我的环境和系统 PATH 中。

当我打开命令提示符并运行 phantomjs --version 时，我得到 1.7.0 但如果我运行 rake 编译 ember，它会一直抱怨 phantomjs 未安装。

phantomjs 还需要做什么才能被“检测到”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:31:35.663

它抱怨是因为 Windows 中没有“which”命令。[注释掉 Rakefile](https://github.com/emberjs/ember.js/blob/master/Rakefile#L69)中的第 69-71 行，这应该可以解决问题。

# yii - 在yii中如何发送确认邮件

> ID：13540495
> 
> 赞同：-2
> 
> 时间：2012-11-24T10:52:10.580
> 
> 标签：yii

在 yii 我正在创建注册模块。提交表单后，条目将被插入到用户表中的相应字段中。从服务器端，确认邮件将发送到该用户的电子邮件。那么如何实现这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:53:14.207

首先查看 yii 的默认内置邮件程序，它会让您了解邮件的工作原理，然后查看本[教程的邮件](http://www.yiiframework.com/wiki/195/implementing-a-registration-process-using-the-yii-user-management-module/)，您可以使用 yii 的邮件扩展发送邮件查看[邮件列表](http://www.yiiframework.com/extensions/?category=9)。

希望这会让你学会如何邮寄。

谢谢。

# iphone - 如何在objective-c中按关键字搜索Youtube视频

> ID：13540496
> 
> 赞同：0
> 
> 时间：2012-11-24T10:52:22.073
> 
> 标签：iphone, objective-c, youtube-api, keyword, gdata-api

如何使用包含在视频标题中的关键字搜索 youtube 视频？我使用objective-c youtube API。在我的示例中，我使用此代码按作者用户搜索 youtube 视频

```
NSString *uploadsID = kGDataYouTubeUserFeedIDUploads;
NSURL *feedURL = [GDataServiceGoogleYouTube youTubeURLForUserID:@"myAuthor"userFeedID:uploadsID];

[service fetchFeedWithURL:feedURL
                 delegate:self
        didFinishSelector:@selector(request:finishedWithFeed:error:)]; 
```

我在哪里可以找到一些实用的例子和所有关于它的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:19:50.197

您可以使用以下代码获取 TableView 中所有搜索到的视频

**在 .h 文件中**

```
#import <UIKit/UIKit.h>
#import "GData.h"
#import "GDataFeedYouTubeVideo.h"

@interface RootViewController : UIViewController {

    GDataFeedYouTubeVideo* feed;
    NSMutableDictionary *imageDownloadsInProgress; 
}

 @property(retain,nonatomic) NSMutableDictionary *imageDownloadsInProgress;
 @property(retain,nonatomic)GDataFeedYouTubeVideo* feed;

 -(void)requestFinishForYouTube:(GDataServiceTicket *)ticket FinishedWithFeed:(GDataFeedBase *)aFeed error:(NSError *)error;

- (void)setFlickrPhotoONU:(NSString*)flickrPhoto:(UIImageView *)imgV;
-(void)downloadImagesInBackGroundONU:(NSDictionary*)data; 
```

@结尾

**在 .m 文件中**

```
 @interface RootViewController (PrivateMethods)

     -(GDataServiceGoogleYouTube *)youTubeService;

 @end

 @implementation RootViewController

  @synthesize feed,imageDownloadsInProgress;

-(GDataServiceGoogleYouTube *)youTubeService
{
    static GDataServiceGoogleYouTube *_service = nil;
     if (!_service)
    {
         _service = [[GDataServiceGoogleYouTube alloc]init];
         [_service setUserAgent:@"AppWhirl-Userapp-1.0"];
         [_service setShouldCacheDatedData:YES];
         [_service setServiceShouldFollowNextLinks:YES];
    }
     [_service setUserCredentialsWithUsername:nil password:nil];

    return _service;
}

   - (void)viewDidLoad
   {

       GDataServiceGoogleYouTube *service = [self youTubeService];

      NSString *searchString = @"Leo Messi Goal!"; // You can write here whatever you want to looking for !!

       NSURL *feedURL = [GDataServiceGoogleYouTube youTubeURLForFeedID:nil];

        GDataQueryYouTube* query = [GDataQueryYouTube  youTubeQueryWithFeedURL:feedURL];

       [query setVideoQuery:searchString];

       [query setMaxResults:50];

        [service fetchFeedWithQuery:query delegate:self didFinishSelector:@selector(requestFinishForYouTube:FinishedWithFeed:error:)];

       [super viewDidLoad];
  }

      -(void)requestFinishForYouTube:(GDataServiceTicket *)ticket FinishedWithFeed:(GDataFeedBase *)aFeed error:(NSError *)error 
    {
          finish = 1;
          NSLog(@"%@",aFeed);
          self.feed = (GDataFeedYouTubeVideo *)aFeed;
    } 
```

我正在使用它，它对我很好！

希望对您有所帮助！

# regex - 正则表达式获取 2 个字符串之间的字符串，忽略开始和结束

> ID：13540498
> 
> 赞同：0
> 
> 时间：2012-11-24T10:52:30.850
> 
> 标签：regex, vb.net

用于`regex`获取 2 个字符串之间的字符串，但无法弄清楚如何忽略开始和结束字符串。

```
"imgurl=(.*?)&amp" 
```

这个表达式工作正常，除了我需要忽略`imgurl=`和 `&amp`？

通过匹配以下字符串：

```
imgurl=mytext&amp 
```

我得到的结果就像

```
imgurl=mytext&amp 
```

它一定要是

```
mytext 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:55:49.173

您尚未指定语言，但请确保您正在检查适当的匹配组...

```
>>> msg = "imgurl=mytext&amp"
>>> import re
>>> foo = re.search("imgurl=(.*?)&amp", msg)
>>> foo.group(1)
'mytext'
>>> foo.group(0)
'imgurl=mytext&amp' 
```

显然，第 1 组是您正在寻找的...

编辑

对于 vb.net 代码..

```
Dim regex As Regex = New Regex("imgurl=(.*?)&amp")
Dim match As Match = regex.Match("imgurl=mytext&amp") 
```

假设你得到了比赛，你需要从`match.Groups(1).Value`

# javascript - 在 HTML 游戏的一个函数中运行多个 if 语句

> ID：13540499
> 
> 赞同：0
> 
> 时间：2012-11-24T10:52:57.723
> 
> 标签：javascript, css, web, 2d-games

到目前为止，在这个游戏中，我已经可以检查墙壁和桨的碰撞，然后通过运行动画来重定向球来做出响应。但是，在检查是否没有碰撞时，我总是摔倒。nor语句都不起作用，次要的 if 语句`else`也`else if`不起作用 - 无论是在主函数中还是作为单独的事件。我在这里介绍了几乎所有的可能性，但我希望你们中的一个人（像你一样超级可靠）可以帮助解决这个问题。

碰撞代码示例（单独的函数）：

```
var BallStop7 = function(){
    setTimeout(BallStop8, 850);
    setTimeout(Check1, 1000);
    //setTimeout(Check1, 1000);    
    if(document.getElementById('Paddle2').style.top=="251px");
    {
        document.getElementById('BallRebound6').id='BallRebound7';
        document.getElementById('BallRebound7').style.webkitAnimationPlayState="running";
    };  

};

var BallStop8 = function(){
    /**/ 
    document.getElementById('BallRebound7').style.webkitAnimationPlayState="paused";
    if(document.getElementById('Paddle1').style.top=="251px"){
        if(confirm("Draw. Would you like to try again?")){
            window.location="pingpongwars.tumblr.com";
        };
        document.getElementById('BallRebound7').style.webkitAnimationPlayState="paused";    
    };
};

var Check1 = function(){
    if(document.getElementById('BallRebound7').style.left=="13.739665985107422px");{    
        alert("Player Two Wins");
        document.getElementById('BallRebound7').style.visibility="hidden";
    };
}; 
```

主功能

```
var BallStop4 = function(){
    //setTimeout(BallStop5, 370);
    if(document.getElementById('Paddle1Return').style.top=="9px");
    {
        document.getElementById('BallRebound3').id='BallRebound4';
        document.getElementById('BallRebound4').style.webkitAnimationPlayState="running";
    };

    if(document.getElementById('BallRebound3').style.left=="30px"){
        alert("Player Two Wins");
        document.getElementById('BallRebound3').style.visibility="hidden";
    }
    BallStop5();
}; 
```

jsfiddle：http: [//jsfiddle.net/zbMCC/](http://jsfiddle.net/zbMCC/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:29:00.297

您的代码中有额外的分号：

```
if(document.getElementById('Paddle2').style.top=="251px");
                                                         ^ = empty statement
{ /* A block of code */ } 
```

在上面的例子中，如果是真的，它会执行一个空语句，并且不管comaprison的结果如何，代码块都会被执行。只需删除`if`s 之后的所有分号。

`if`在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Statements#if...else_Statement)

此外，代码块不应以分号结尾，除非它们是声明或定义的一部分。

# php - php数组的部分随机化

> ID：13540502
> 
> 赞同：1
> 
> 时间：2012-11-24T10:53:35.203
> 
> 标签：php, arrays, sorting, random

我希望有人可以帮助我解决这个问题。我想采用一个有序的 php 数组并随机“摇动”它来改变顺序，但保留一些原始的整体结构。

想象一下，你有一盘彩色亮片，组成了一幅房子的照片。如果你稍微晃动托盘，亮片就会移动，但是，根据你晃动的程度，你仍然会保留一些房子的原始结构——它会更模糊。这就是我想用 php 数组做的事情。

让我举个例子。假设我有以下数组：

```
$Array=Array(
  1=>15,
  2=>14,
  3=>13,
  4=>12,
  5=>11,
  6=>10,
  7=>9,
  8=>8,
  9=>7,
  10=>6,
  11=>5,
  12=>4,
  13=>3,
  14=>2,
  15=>1); 
```

我希望能够稍微调整一下以提供以下内容：

```
$Array=Array(
  1=>13,
  2=>15,
  3=>12,
  4=>14,
  5=>11,
  6=>8,
  7=>7,
  8=>10,
  9=>5,
  10=>6,
  11=>9,
  12=>4,
  13=>2,
  14=>1,
  15=>3); 
```

该顺序已部分随机化，但从 15 到 1 的总体下降趋势仍然存在。我希望这是有道理的。

除非我弄错了，否则我认为 php 中没有本机函数可以做到这一点。但有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T11:00:25.623

您应该编写自己的算法，而不是使用类似`shuffle()`or`array_shuffle()`优化以获得尽可能多的结果的函数：

尝试“冒泡”策略：

*   通过交换对交换数组的元素，一对又一对。
*   始终从数组中选择相邻元素成对。
*   随机化您为每个迭代步骤选择的现有配对。
*   您可以限制迭代次数，从而限制结果的总“混洗”。

这应该比严格随机化更好地保留元素的粗略位置，因为元素在每次迭代期间只能移动一步。所以应该保留大势。多少取决于您执行的迭代次数。

这是一个（非常简单的）示例实现：

```
#!/usr/bin/php
<?php

// the input array, just as you specified it
$input=array(
  1=>15,
  2=>14,
  3=>13,
  4=>12,
  5=>11,
  6=>10,
  7=>9,
  8=>8,
  9=>7,
  10=>6,
  11=>5,
  12=>4,
  13=>3,
  14=>2,
  15=>1
);

// the algorithm itself, a 'bubbling' function
function array_bubble (&$collection, $limit) {
    for ($i=1; $i<=$limit; $i++) {
        $pos=rand(min(1,sizeof($collection)-1);
        $help=$collection[$pos];
        $collection[$pos]  =$collection[$pos+1];
        $collection[$pos+1]=$help;
    }
    return $collection;
} // function array_bubble

// here the algorithm is called and the result printed
// note that the '20' in there is the number of iterations. Try changing it!
print_r(array_bubble($input,20));

?> 
```

该脚本产生如下输出：

```
Array
(
    [1] => 11
    [2] => 15
    [3] => 13
    [4] => 8
    [5] => 14
    [6] => 12
    [7] => 9
    [8] => 10
    [9] => 5
    [10] => 6
    [11] => 7
    [12] => 4
    [13] => 1
    [14] => 3
    [15] => 2
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:06:13.687

arkascha 提到的冒泡策略的替代方法是，您可以遍历数组，并生成具有高斯/正态分布的随机数来交换当前元素。也许在代码中更好地描述（未经测试）：

```
function swap (&$arr, $a, $b) {
    $tmp=$arr[$a];
    $arr[$a]=$arr[$b];
    $arr[$b]=$tmp; 
}
for ($i = 0; $i < count($arr); $i++) {
    $diff = round(stats_rand_gen_normal(0, 3));
    $j = max(0, min(count($arr), $i + $diff));
    swap($arr, $i, $j);
} 
```

这应该只需要一次通过；抖动的平均值和标准差应该大致是stats_rand_gen_normal的参数。

# performance - 在休眠中优化获取或创建模式

> ID：13540507
> 
> 赞同：0
> 
> 时间：2012-11-24T10:54:55.643
> 
> 标签：performance, hibernate

仅当条目已经存在时，我才将条目保存在表中：

```
public static Email getOrCreate(Session sess, String address) {
    if (address==null) return null;
    List l = sess.createQuery("SELECT email FROM Email email WHERE email.address=:address").setString("address", address).list();
    if (l.size() > 0)
        return (Email) l.get(0);
    Email email = new Email(address);
    sess.save(email);
    return email;
} 
```

我对这个过程的速度不满意。保存 5000 条复杂记录大约需要 5 分钟，并且该功能占用了 50% 的时间。我的休眠缓存设置是：cfg.setProperty("hibernate.cache.provider_class", "org.hibernate.cache.EhCacheProvider");

当然我有时可以创建静态地图并将其与数据库同步，但它看起来有点难看。休眠可以做这样的事情吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:39:20.900

批量执行：

```
Set<String> addresses = ...;
List<String> existingAddresses = 
    session.createQuery("select email.address from Email email where email.address in :addresses")
           .setParameterList("addresses", addresses)
           .list();
addresses.removeAll(existingAddresses);
for (String address : addresses) {
    session.save(new Email(address));
} 
```

但是，请确保您的数据库允许在一个`IN`子句中包含 5000 个元素。例如，Oracle 将它们限制为 1000。但您仍然只能执行 5 个请求而不是 5000 个。

也就是说，5分钟的时间对我来说似乎很长。您是否在 email.address 上定义了数据库索引？

# 3d - javaFX 2.x 中的 Torus 3d

> ID：13540509
> 
> 赞同：0
> 
> 时间：2012-11-24T10:55:07.157
> 
> 标签：3d, javafx, javafx-2, javafx-3d

我有按拆分面板划分的舞台，我想在右窗格中创建一个 3D 圆环。第一：我不知道我可以创建什么圆环。第二：我不知道我可以在什么样的对象上创建这个 Torus。窗格够吗？

请寻求帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-23T13:28:30.833

如果没有大量自定义编码，您将无法使用 JavaFX 2.x 创建带有 Torus 的嵌入式 3D 场景。但是，如果您使用 JavaFX 8 和第三方 3D 库 F(X)yz，这将变得容易：http: [//birdasaur.github.io/FXyz/](http://birdasaur.github.io/FXyz/)

F(X)yz 有一个 Torus 对象：

`/src/org/fxyz/shapes/Torus.java`

您可以通过提供的测试代码查看如何使用它：

`/src/org/fxyz/tests/TorusTest.java`

您的部分问题是如何使用拆分窗格将 3D 对象放入现有的 JavaFX 场景中。拆分窗格不关心其内容是否为 3D，但您应该使用 SubScene 将 3D 内容嵌入到 3D 场景中。

例子：

```
SubScene subScene = subScene = new SubScene(sceneRoot, sceneWidth, sceneHeight, true, SceneAntialiasing.BALANCED);
subScene.setFill(Color.STEELBLUE);
Camera 3DCamera = new PerspectiveCamera(true); 
3Dcamera.setNearClip(0.1);
3Dcamera.setFarClip(100000.0);
3Dcamera.setFieldOfView(35);
3Dcamera.setTranslateZ(cameraDistance);
subScene.setCamera(3Dcamera);
//Add the subscene to the SplitPane
mySplitPane.getChildren().add(subScene); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:39:26.503

在这里您可以阅读如何创建圆环[http://blogoben.wordpress.com/2011/10/26/webgl-basics-7-colored-torus/](http://blogoben.wordpress.com/2011/10/26/webgl-basics-7-colored-torus/)

# excel - 如何将代码从 Excel 的 Sheet1 移动到 Excel 的模块部分

> ID：13540510
> 
> 赞同：1
> 
> 时间：2012-11-24T10:55:15.210
> 
> 标签：excel, vba

我已经编写了以下仅适用于我的 excel 的 Sheet1 的代码现在我想将这段代码移动到我的 VBA 的模块部分。请指教。

代码是这样的：

```
Private Sub ReviewCheck()

Dim i, val1, val2

For i = 1 To UsedRange.Rows.Count
    val1 = UCase(Cells(i, "A").Value)
    If ((InStr(val1, "ABC")) Or (InStr(val1, "XYZ")) Or (InStr(val1, "123"))) > 0 Then
        If UCase(Cells(i, "B").Value) = "N" Then
            'Cells(i, "C").Value = False
            Cells(i, "A").Interior.ColorIndex = 3

        ElseIf UCase(Cells(i, "B").Value) = "Y" Then
            'Cells(i, "C").Value = True
            Cells(i, "B").Interior.ColorIndex = xlNone

        Else
            'Cells(i, "C").Value = False
            Cells(i, "B").Interior.ColorIndex = 6
        End If
    Else
        Cells(i, "B").Interior.ColorIndex = xlNone
    End If
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:26:20.920

只需右键单击左侧窗口并在 VBE 中选择“添加模块”，然后复制粘贴代码？确保删除 Sheet1 代码。

# bash - Bash：以注释符号开始命令输出的每一行

> ID：13540515
> 
> 赞同：2
> 
> 时间：2012-11-24T10:55:34.383
> 
> 标签：bash, comments, substitution

我有一个输出三行这样的命令：

```
L1
L2
L3 
```

我需要将这些行中的每一行附加到 Gnuplot 的数据文件中，其中没有“注释块”，因此您只能在每行前面加上“#”符号。我正在用 bash 编写整个过程的脚本，如何在 bash 中替换`\n`a `\n#`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:04:40.367

尝试像这样通过 sed 传递您的命令：

```
command | sed -e "s/^/#/" 
```

它将用#替换第一行的第一个字符，然后是所述字符。

如果您还想获得 stderr，请先将 stderr 放入 stdout，如下所示：

```
command 2>&1 | sed -e "s/^/#/" 
```

编辑：谢谢@ДМИТРИЙ МАЛИКОВ ！我只是引导一些新的东西。我用你更短的表达更新了我的块

# objective-c - iOS - 将代码设置为 4 UIImageViews

> ID：13540520
> 
> 赞同：0
> 
> 时间：2012-11-24T10:55:53.200
> 
> 标签：objective-c, cocoa-touch

在我的应用程序中有 4 个 UIButtons，它们都连接到 4 个 UIAlerView，因此当按下按钮时，应该会弹出 UIAlertView。这适用于所有 UIButton。UIAlertView 中的选项之一应该打开照片库，以便用户可以更改连接到每个 UIButton 的 4 个 UIImageView 的图片。问题是，当我从任何 UIButtons 中选择图片时，该照片仅适用于一个 ImageView，即第四个。这是我的 UIAlertView 代码：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

//UIAlertView´s in the UIButtons setup
if (alertView.tag == 1) { //button1
    if (buttonIndex == alertView.cancelButtonIndex) {
        NSLog(@"Done");
    }
    if (buttonIndex == alertView.firstOtherButtonIndex) {
        NSLog(@"Number");
    }
    if (buttonIndex == alertView.firstOtherButtonIndex+1) {

        imagePickerController = [[UIImagePickerController alloc]init];   //I think its this part which are wrong
        [imagePickerController setDelegate:self];
        [imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [self presentViewController:imagePickerController animated:YES completion:nil];

    }
}
if (alertView.tag == 2) { //button2
    if (buttonIndex == alertView.cancelButtonIndex) {
        NSLog(@"Done");
    }
    if (buttonIndex == alertView.firstOtherButtonIndex) {
        NSLog(@"Number");
    }
    if (buttonIndex == alertView.firstOtherButtonIndex+1) {

        imagePickerController = [[UIImagePickerController alloc]init];   //I think its this part which are wrong
        [imagePickerController setDelegate:self];
        [imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [self presentViewController:imagePickerController animated:YES completion:nil];

    }
}
 if (alertView.tag == 3)
 {
     if (buttonIndex == alertView.cancelButtonIndex) {
         NSLog(@"Done");
     }
     if (buttonIndex == alertView.firstOtherButtonIndex){
         NSLog(@"Number");
     }
     if (buttonIndex == alertView.firstOtherButtonIndex+1){
         imagePickerController = [[UIImagePickerController alloc]init];   //I think its this part which are wrong
         [imagePickerController setDelegate:self];
         [imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
         [self presentViewController:imagePickerController animated:YES completion:nil];
     }

 }
if (alertView.tag == 4);
{
    if (buttonIndex == alertView.cancelButtonIndex){
        NSLog(@"Done");
    }
    if (buttonIndex == alertView.firstOtherButtonIndex){
        NSLog(@"phone number");
    }
    if (buttonIndex == alertView.firstOtherButtonIndex+1){
        imagePickerController = [[UIImagePickerController alloc]init];
        [imagePickerController setDelegate:self];
        [imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [self presentViewController:imagePickerController animated:YES completion:nil];
    }
}

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:06:24.437

首先，您的代码非常多余。除了标签的值之外，它是完全相同的 4 倍。使用一个**变量**并且只写一次代码！

其次，您引用的代码与问题无关。假设您还为图像视图提供了与按钮/警报相同的标签，您需要在**图像选择器控制器回调**中将图像分配给正确的图像视图。这是合乎逻辑的，因为您必须在分配图像之前知道选择了哪个图像。利用

```
imagePickerController:didFinishPickingMediaWithInfo: 
```

您可以保留一个变量`int lastButtonTag`，以便知道最后按下哪个按钮。

# android - android地图覆盖手工绘制

> ID：13540523
> 
> 赞同：0
> 
> 时间：2012-11-24T10:56:23.140
> 
> 标签：android, overlay, android-overlay

我已经完成了在我的叠加层上画线，但我怎么能画自由式！？不是固定的几何形状，比如线条和圆圈，而是在我想画的地方画！？

我已经拥有的是：

```
public class OverlayMap extends Overlay {
    private List<MapGeoLine> geoLines = new ArrayList<MapGeoLine>();
    private GeoPoint geoFrom = null;
    private GeoPoint geoTo = null;

    @Override
    public boolean onTouchEvent(MotionEvent motionEvent, MapView mapView) {

        if(motionEvent.getAction() == MotionEvent.ACTION_DOWN){
            geoFrom = mapView.getProjection().fromPixels((int)motionEvent.getX(),(int)motionEvent.getY()); 
        }

        if(motionEvent.getAction() == MotionEvent.ACTION_UP){
            geoTo = mapView.getProjection().fromPixels((int)motionEvent.getX(),(int)motionEvent.getY()); 
        }

        if(geoFrom != null && geoTo != null){
            geoLines.add(new MapGeoLine(geoFrom, geoTo));
        }       

        return super.onTouchEvent(motionEvent, mapView);
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {  

        if(geoLines.size() > 0){
            Paint mPaint = new Paint();
            mPaint.setStrokeWidth(2); 
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setAntiAlias(true); 

            Projection projection = mapView.getProjection();
            Path path = new Path();

            for(MapGeoLine line: geoLines){
                Log.d("test", "p1: "+line.getFrom().getLatitudeE6()+ " ");
                Log.d("test", "p2: "+line.getTo().getLatitudeE6()+ " ");                

                Point from = new Point();
                Point to = new Point();

                projection.toPixels(line.getFrom(), from);
                projection.toPixels(line.getTo(), to);

                path.moveTo(from.x, from.y);
                path.lineTo(to.x, to.y);
            }  

            canvas.drawPath(path, mPaint);
            mapView.invalidate();
        }

        super.draw(canvas, mapView, shadow);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:04:55.723

您可以使用以下代码来执行此操作：

```
public class HandDrawOverlay extends Overlay { 

    private boolean editMode = false;
    private boolean isTouched = false;
    private Paint paint = new Paint(); 
    private Point screenPt1 = new Point(); 
    private Point screenPt2 = new Point(); 
    private ArrayList<GeoPoint> points = null;

    public HandDrawOverlay(){ 
        paint.setStrokeWidth(2.0f); 
        paint.setStyle(Style.STROKE); 
        paint.setColor(Color.BLUE); 
    } 

    @Override 
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        if(points != null && points.size() > 1){
            mapView.getProjection().toPixels(points.get(0), screenPt1); 
            for(int i=1; i<points.size();i++){
                mapView.getProjection().toPixels(points.get(i), screenPt2);
                canvas.drawLine(screenPt1.x, screenPt1.y, screenPt2.x, screenPt2.y, paint);
                screenPt1.set(screenPt2.x, screenPt2.y);
            }
        }
    }     

    @Override 
    public boolean onTouchEvent(MotionEvent e, MapView mapView) { 
        if(editMode){ 
            int x = (int)e.getX();
            int y = (int)e.getY();
            GeoPoint geoP = mapView.getProjection().fromPixels(x,y);

            switch (e.getAction()) {
            case MotionEvent.ACTION_DOWN:
                isTouched = true;
                points = new ArrayList<GeoPoint>();
                points.add(geoP);
                break;
            case MotionEvent.ACTION_MOVE:
                if(isTouched)
                    points.add(geoP);
                break;
            case MotionEvent.ACTION_UP:
                if(isTouched)
                    points.add(geoP);
                isTouched = false;
                break;
            }
            mapView.invalidate();
            return true; 
        } 
        return false; 
    }

    /**
     * @return the editMode
     */
     public boolean isEditMode() {
        return editMode;
    }

    /**
     * @param editMode the editMode to set
     */
     public void setEditMode(boolean editMode) {
        this.editMode = editMode;
     } 
} 
```

问候。

# python - Python 练习：100m 跑步与名单

> ID：13540525
> 
> 赞同：0
> 
> 时间：2012-11-24T10:56:48.773
> 
> 标签：python, list

我有两个索引：

```
names=['Peter', 'Tom',  'Carl', 'Edward', 'Jake', 'Joe',  'Ken']

times=[10.01,    9.89,   9.91,    9.88,    9.91,   9.91,   9.90] 
```

例如，彼得的时间**10.01**，汤姆的时间**9.89**等。

1.  输出最快的跑步者姓名和时间。

2.  输入：按姓名搜索并输出他的地点和时间

例如：

> 彼得：第 7 名（10.01）
> 
> 卡尔、杰克、乔：第 4-6 位（9.91）

对于第 1 部分，我尝试过：

```
fastest = times.index(min(times))   
print(names[fastest]) 
```

我不知道如何进行第 2 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:57:28.927

为了能够获得存储按排名（位置）排序的跑步者的字典，您可以使用[`collections.OrderedDict`](http://docs.python.org/3/library/collections.html#collections.OrderedDict)：

```
#!/usr/bin/env python3
from collections import OrderedDict, namedtuple

Runner = namedtuple('Runner', "name time rank")

names = ['Peter', 'Tom',  'Carl', 'Edward', 'Jake', 'Joe',  'Ken']
times = [10.01,    9.89,   9.91,    9.88,    9.91,   9.91,   9.90]

runners = OrderedDict((name, Runner(name, time, rank))
    for rank, (time, name) in enumerate(sorted(zip(times, names)), start=1))
# 1 fastest
fastest_runner = next(iter(runners.values()))
print("fastest runner: {r.name} ({r.time})".format(r=fastest_runner))
# 2 by name
print("{r.name}: {r.rank}th place ({r.time})".format(r=runners['Peter'])) 
```

### 输出

```
fastest runner: Edward (9.88)
Peter: 7th place (10.01) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:27:19.867

```
>> names=['Peter', 'Tom',  'Carl', 'Edward', 'Jake', 'Joe',  'Ken']
>> times=[10.01,    9.89,   9.91,    9.88,    9.91,   9.91,   9.90]
>>> name_time_dict = dict(zip(names,times))
>> name_time_dict
'Ken': 9.9000000000000004, 'Jake': 9.9100000000000001, 'Edward': 9.8800000000000008,     Joe': 9.9100000000000001, 'Carl': 9.9100000000000001, 'Tom': 9.8900000000000006, 'Peter': 10.01}
>>> times.sort()
>>> times.index(name_time_dict['Joe'])+1
>>> 4
>>> times.index(name_time_dict['Peter'])+1
>>> 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:18:54.357

```
names=['Peter', 'Tom',  'Carl', 'Edward', 'Jake', 'Joe',  'Ken']
times=[10.01, 9.89, 9.91,  9.88,  9.91, 9.91, 9.90] 
```

获得最快的跑步者姓名和时间。

```
fastest_time = min(times)
fastest_runner = names[times.index(fastest_time)] 
```

您还可以创建字典并使用它。创建字典

```
dictionary = dict(zip(names,times)) 
```

使用字典

```
In: dictionary['Carl']
Out: 9.91 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T11:04:52.830

```
names=['Peter', 'Tom', 'Carl', 'Edward', 'Jake', 'Joe', 'Ken']
times=[10.01, 9.89, 9.91, 9.88, 9.91, 9.91, 9.90]
nk=zip(times,names)
nk.sort()
kk=lambda y: [a for a in list({z[0] for z in nk})].index(y)
my_contest={x[1]:{'time':x[0],'rank': kk(x[0])+1} for x in nk}
print nk
print my_contest 
```

输出：

```
[(9.88, 'Edward'), (9.89, 'Tom'), (9.9, 'Ken'), (9.91, 'Carl'), (9.91, 'Jake'), (9.91, 'Joe'), (10.01, 'Peter')]

 {
    'Ken': {'rank': 3, 'time': 9.9},
    'Jake': {'rank': 4, 'time': 9.91},
    'Edward': {'rank': 1, 'time': 9.88},
    'Joe': {'rank': 4, 'time': 9.91},
    'Carl': {'rank': 4, 'time': 9.91},
    'Tom': {'rank': 2, 'time': 9.89},
    'Peter': {'rank': 5, 'time': 10.01}
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T11:25:00.013

```
name = input() 
i = name.index(name)
t = times[i]
times.sort()
print(name + ':' + str(times.index(t))) 
```

# c# - 扩展 POCO 类以使用其他上下文进行计算

> ID：13540526
> 
> 赞同：2
> 
> 时间：2012-11-24T10:56:51.113
> 
> 标签：c#, entity-framework, code-first, poco, data-access-layer

考虑将这两个 POCO 类与 EF Code First 一起使用。

```
public class Sale 
{
    public int SaleId { get; set; }
    public DateTime Date { get; set; }
    public double Amount { get; set; }
}

public class History
{
    public int HistoryId { get; set; }
    public DateTime Date { get; set; }
    public double Total { get; set; }
} 
```

这一切都很好，但我实际上希望我的类在我的应用程序中使用它时能代表更多：

```
 public class SaleWithAllIWant
    {
        public int SaleId { get; set; }
        public DateTime Date { get; set; }
        public double Amount { get; set; }
        public double Calculation   // Read only and NOT stored in DB
        {
            get
            {
                // Obtain Total from _Context.History on Date
                // Perform Calculation
            }
        }
    } 
```

我希望能够使用 EF 的美丽并能够做类似的事情：

```
gridSales.DataSource = _Context.Sales.ToList(); 
```

然而，Sale 并没有我的所有信息。SaleWithAllIWant 不是上下文，因此我必须进行某种后期处理才能将所有内容从 Sale 转换为 SaleWithAllIWant。我可以使用未绑定的列或类似的列，但它会变得混乱并开始影响性能。

我不能只将 SaleWithAllIWant 放在我的 POCO 课程中，因为计算需要了解历史上下文。我的 DAL 项目（创建 DbSet）引用了我的模型项目（包含 POCO 类）——因此模型项目不能引用 DAL 来访问上下文，因为它是循环引用。

解决方案是将它们全部组合在一起而没有单独的 DAL 和模型项目吗？

我怀疑我错过了更好的方法。非常感谢所有评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:48:47.947

如果您不单独部署它们，我绝对会考虑将 DAL 和模型合并在一起。

也就是说，`Calculation`看起来像是扩展方法的绝佳候选者：

```
public static class SaleExtensions
{
    public static double Calculation(this Sale sale)        
    {
            // Obtain Total from _Context.History on Date
            // Perform Calculation
    }
} 
```

它可以存在于您的 DAL 项目中。如果您需要在 Sale 中保留任何其他属性以进行计算，只需将它们标记为`[NotMapped]`EF 将忽略它们。

# sencha-touch-2 - 如何将参数传递给存储以加载特定数据

> ID：13540528
> 
> 赞同：1
> 
> 时间：2012-11-24T10:57:03.900
> 
> 标签：sencha-touch-2

我正在 Sencha Touch 2 中创建一个搜索表单。表单已创建，字段都在那里。但是如何调用 /users/{param} url？我有一家商店，它可以加载“所有”用户，但我想加载特定数据.. 谢谢。

编辑：

```
Ext.define('TCM.store.Users', {
    extend: 'Ext.data.Store',

    config: {
        model: 'TCM.model.User',
        sorters: 'name',
        proxy: {
            type: 'rest',
            url: 'http://local.test.eu/app_dev.php/api/users'
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:08:47.497

您只需要获取商店的代理并设置`extraParams`：

```
Ext.getStore('Users').getProxy().setExtraParams({
  param: myParam
}); 
```

如果您存储的所有数据都已加载，您也可以过滤它而不是重新加载它。

希望这有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:10:29.963

您可以像这样将参数传递给 store.load 方法

```
Ext.getStore('Users').load({
   params : { param : 'param1'}
}); 
```

如果您需要根据参数构建特定的 url，您应该覆盖代理中的 buildUrl 方法

```
 buildUrl : function (request) {
            var url = this.getUrl(request),//  /users/
                params = request.getParams() || {};

            url = url + params.param; // /users/param1
            request.setUrl(url);
            return this.callParent([request]);
    } 
```

# iphone - iphone 模拟器和设备包

> ID：13540529
> 
> 赞同：-1
> 
> 时间：2012-11-24T10:57:08.440
> 
> 标签：iphone, ios, bundle, nsbundle

我正在准备一个 ios 应用程序。我正在使用以下代码

```
NSString * yol=[[NSBundle mainBundle]pathForResource:@"TavsiyeKitapAile" ofType:@"plist"];

NSDictionary * tka = [XMLReader dictionaryForXMLData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.bahcevan.org/kat.php?kat=64"]] error:nil];

[tka writeToFile:yol atomically:YES];

NSMutableDictionary * dic = [[NSMutableDictionary alloc]initWithContentsOfFile:yol]; 
```

它在模拟器上运行良好，但是当我打开它时，我看不到数据。什么都没有。我认为它与捆绑有关，但我无法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:42:19.237

您无法写入设备包，您的设备包是只读的，如果您想保存/写入某些内容，则必须将其写入文档目录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T22:16:09.960

i found the solution, it is using the directory "Documents", i used following code insted of first one :)

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(
                                                     NSDocumentDirectory,
                                                     NSUserDomainMask, YES
                                                     );

NSString *documentsDirectory = [paths objectAtIndex:0];

NSURL *yol = [NSURL fileURLWithPath:[documentsDirectory
                                     stringByAppendingString:@"/TavsiyeKitapAile.plist"]];

NSDictionary * tka = [XMLReader dictionaryForXMLData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.bahcevan.org/kat.php?kat=64"]] error:nil];

[tka writeToURL:yol atomically:YES];

NSMutableDictionary * dic = [[NSMutableDictionary alloc]initWithContentsOfURL:yol]; 
```

# visual-studio - 向 Visual Studio 添加构建时警告

> ID：13540532
> 
> 赞同：0
> 
> 时间：2012-11-24T10:57:45.217
> 
> 标签：visual-studio, warnings, switch-statement

不确定这是否是正确的论坛，但我们来了。对于 tl;dr 人群，这是一个没有背景的问题：

> 当我在没有默认情况的情况下进行切换块时，有没有办法让 Visual Studio 发出构建时警告？

这样做的原因是我大量使用枚举，并且通常不应该出现默认值。当它发生时，这是因为我在枚举中添加了另一个案例，并且我更愿意抛出 NotImplementedException （当我正在测试时！）以防我忘记更新某些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:38:46.407

我不认为你真的想要编译器警告。缺少默认情况是完全有效的，因此编译器是此类功能所属的最少地方。

也就是说，有像 FxCop 这样的工具进行代码分析。FxCop 可以集成到构建过程中。违规将在构建结果窗口中显示为警告。

请参阅[http://blogs.msdn.com/b/codeanalysis/archive/2007/02/24/faq-how-do-i-run-fxcop-during-a-post-build-event.aspx](http://blogs.msdn.com/b/codeanalysis/archive/2007/02/24/faq-how-do-i-run-fxcop-during-a-post-build-event.aspx)如何集成 FxCop

# php - 在 PHP 中，如何在不转义引号的情况下创建多行变量？

> ID：13540533
> 
> 赞同：1
> 
> 时间：2012-11-24T10:57:50.877
> 
> 标签：php, coldfusion

在 CFML 中有这样的结构：

```
<cfsavecontent name="HTML_content">
    <div class="test_div" style="color:#FFF;">Test</div>
</cfsavecontent> 
```

在 PHP 中，如果没有一些非常 hacky 的函数或转义双引号，似乎没有办法做到这一点。我试图通过保存电子邮件内容并简单地邮寄它来在同一页面内创建电子邮件（大型 html 文档），但似乎没有办法在 PHP 中执行此操作而不使用`$var = "\"bad code\""`;

有人可以指出我正确的方向吗？

* * *

我已经通过下面的 deceze尝试了[答案](https://stackoverflow.com/a/13540564/9360)

```
$var = <<<HTML
    <div class="test_div" style="color:#FFF;">Test</div>
HTML; 
```

但我收到以下错误：

```
Parse error: syntax error, unexpected $end, expecting T_VARIABLE or T_END_HEREDOC or T_DOLLAR_OPEN_CURLY_BRACES or T_CURLY_OPEN in C:\vhosts\jpl\pages\about\testimonials.php on line 29 
```

* * *

对于其他被困于此的人，HTML；HEREDOCS 示例末尾的部分必须位于末尾的开头（没有制表符、空格或任何内容）。

所以`newline` `HTML;`不是`newline` `[tab or space]` `HTML;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:01:47.747

```
$var = '<div class="test_div" style="color:#FFF;">Test</div>';

$var = <<<HTML
    <div class="test_div" style="color:#FFF;">Test</div>
HTML; 
```

引用字符串的方法有很多... [http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

还可以考虑将电子邮件内容放入单独的文件中，并`include`在需要的地方添加。

# java - 如何让线条动画更流畅？

> ID：13540534
> 
> 赞同：2
> 
> 时间：2012-11-24T10:57:51.157
> 
> 标签：java, animation, timer, graphics2d, smooth

我正在用 Java 制作一个简单的动画，并试图让它尽可能流畅。

我只使用每个 Shape 对象的 *.Double 内部类，并在 Graphics2D 对象中设置抗锯齿。只要我只使用 fill() 方法，这一切都可以工作，但如果我还使用 draw() 方法在同一个 Shape 周围绘制线条，这些线条的动画是不连贯的 - 逐个像素。

我在画布上的每个矩形都有这种方法来绘制自己。它每 20 毫秒移动一次，并且使用 Timer 和 TimerListener 重新绘制整个画布。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class AnimationTest {
    public static void main(String[] args) {
        JFrame frm = new JFrame("Test");
        frm.setBounds(200, 200, 400, 400);
        frm.setResizable(false);
        frm.setLocationRelativeTo(null);

        AnimationCanvas a = new AnimationCanvas();
        frm.add(a);

        frm.setVisible(true);

        a.startAnimation();
    }
}

class AnimationCanvas extends JPanel {

    SimpleSquare[] squares = new SimpleSquare[2];

    AnimationCanvas() {

        squares[0] = new SimpleSquare(50, 80, true);
        squares[1] = new SimpleSquare(160, 80, false);

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        for (SimpleSquare c : squares) {
            c.paintSquare(g);
        }
    }

    Timer t;
    public void startAnimation() {
        t = new Timer(30, new Animator());
        t.start();
    }

    private class Animator implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            squares[0].y += 0.10;
            squares[1].y += 0.10;
            repaint();
        }
    }
}

class SimpleSquare {
    double x;
    double y;
    Color color = Color.black;
    boolean fill;

    SimpleSquare(double x, double y, boolean fill) {
        this.x = x;
        this.y = y;
        this.fill = fill;
    }

    void paintSquare(Graphics g) {
        ((Graphics2D) g).setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        Shape s = new Rectangle.Double(x, y, 100, 100);

        g.setColor(color);
        ((Graphics2D) g).setStroke(new BasicStroke(2));

        if (fill) {
            ((Graphics2D) g).fill(s);
        } else {
            ((Graphics2D) g).draw(s);
        }
    }
} 
```

有没有办法解决这个问题？我环顾了好一会儿。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T03:03:29.703

我把这个小测试放在一起并没有发现任何重大问题，即使 1000 个矩形都以随机速度在随机方向上移动，我基本上也能够保持 50fps。

![在此处输入图像描述](../Images/38efff6b2857d956ed33b8b37a911e2d.png)

```
public class SimpleAnimationEngine {

    public static void main(String[] args) {
        new SimpleAnimationEngine();
    }

    public SimpleAnimationEngine() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                AnimationPane pane = new AnimationPane();

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(pane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                pane.init();
                pane.start();
            }

        });
    }

    public static class AnimationPane extends JPanel implements AnimationCanvas {

        private AnimationModel model;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        public AnimationModel getModel() {
            return model;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            for (Animatable animatable : getModel().getAnimatables()) {
                animatable.paint(g2d);
            }
            g2d.dispose();
        }

        @Override
        public synchronized void updateState() {

            Runnable update = new Runnable() {
                @Override
                public void run() {
                    AnimationModel model = getModel();
                    for (Animatable animatable : model.getAnimatables()) {
                        animatable.copy();
                    }
                    repaint();
                }

            };

            if (EventQueue.isDispatchThread()) {
                update.run();
            } else {
                try {
                    EventQueue.invokeAndWait(update);
                } catch (InterruptedException | InvocationTargetException ex) {
                    ex.printStackTrace();
                }
            }
        }

        public void init() {
            model = new DefaultAnimationModel();
            for (int index = 0; index < 1000; index++) {
                model.add(new AnimatableRectangle(this));
            }
            updateState();
        }

        public void start() {
            AnimationEngine engine = new AnimationEngine(this, getModel());
            engine.start();
        }

    }

    public static interface Animatable {

        public void copy();

        public void update(AnimationCanvas canvas, float progress);

        public void paint(Graphics2D g2d);

    }

    public static class AnimationEngine extends Thread {

        private AnimationModel model;
        private AnimationCanvas canvas;

        public AnimationEngine(AnimationCanvas canvas, AnimationModel model) {
            setDaemon(true);
            setName("AnimationThread");
            this.model = model;
            this.canvas = canvas;
        }

        public AnimationCanvas getCanvas() {
            return canvas;
        }

        public AnimationModel getModel() {
            return model;
        }

        @Override
        public void run() {
            float progress = 0;
            long cylceStartTime = System.currentTimeMillis();
            long cylceEndTime = cylceStartTime + 1000;
            int updateCount = 0;
            while (true) {
                long frameStartTime = System.currentTimeMillis();
                getModel().update(getCanvas(), progress);
                getCanvas().updateState();
                long frameEndTime = System.currentTimeMillis();
                long delay = 20 - (frameEndTime - frameStartTime);
                if (delay > 0) {
                    try {
                        sleep(delay);
                    } catch (InterruptedException ex) {
                    }
                }
                long now = System.currentTimeMillis();
                long runtime = now - cylceStartTime;
                progress = (float)runtime / (float)(1000);
                updateCount++;
                if (progress > 1.0) {
                    progress = 0f;
                    cylceStartTime = System.currentTimeMillis();
                    cylceEndTime = cylceStartTime + 1000;
                    System.out.println(updateCount + " updates in this cycle");
                    updateCount = 0;
                }
            }
        }

    }

    public interface AnimationCanvas {

        public void updateState();

        public Rectangle getBounds();

    }

    public static interface AnimationModel {

        public void update(AnimationCanvas canvas, float progress);

        public void add(Animatable animatable);

        public void remove(Animatable animatable);

        public Animatable[] getAnimatables();

    }

    public static class AnimatableRectangle implements Animatable {

        private Rectangle bounds;
        private int dx, dy;
        private Rectangle copyBounds;
        private Color foreground;
        private Color backColor;

        public AnimatableRectangle(AnimationCanvas canvas) {
            bounds = new Rectangle(10, 10);
            Rectangle canvasBounds = canvas.getBounds();
            bounds.x = canvasBounds.x + ((canvasBounds.width - bounds.width) / 2);
            bounds.y = canvasBounds.y + ((canvasBounds.height - bounds.height) / 2);

            dx = (getRandomNumber(10) + 1) - 5;
            dy = (getRandomNumber(10) + 1) - 5;

            dx = dx == 0 ? 1 : dx;
            dy = dy == 0 ? 1 : dy;

            foreground = getRandomColor();
            backColor = getRandomColor();

        }

        protected int getRandomNumber(int range) {
            return (int) Math.round(Math.random() * range);
        }

        protected Color getRandomColor() {
            return new Color(getRandomNumber(255), getRandomNumber(255), getRandomNumber(255));
        }

        @Override
        public void copy() {
            copyBounds = new Rectangle(bounds);
        }

        @Override
        public void update(AnimationCanvas canvas, float progress) {
            bounds.x += dx;
            bounds.y += dy;
            Rectangle canvasBounds = canvas.getBounds();
            if (bounds.x + bounds.width > canvasBounds.x + canvasBounds.width) {
                bounds.x = canvasBounds.x + canvasBounds.width - bounds.width;
                dx *= -1;
            }
            if (bounds.y + bounds.height > canvasBounds.y + canvasBounds.height) {
                bounds.y = canvasBounds.y + canvasBounds.height - bounds.height;
                dy *= -1;
            }
            if (bounds.x < canvasBounds.x) {
                bounds.x = canvasBounds.x;
                dx *= -1;
            }
            if (bounds.y < canvasBounds.y) {
                bounds.y = canvasBounds.y;
                dy *= -1;
            }
        }

        @Override
        public void paint(Graphics2D g2d) {
            g2d.setColor(backColor);
            g2d.fill(copyBounds);
            g2d.setColor(foreground);
            g2d.draw(copyBounds);
        }

    }

    public static class DefaultAnimationModel implements AnimationModel {

        private List<Animatable> animatables;

        public DefaultAnimationModel() {
            animatables = new ArrayList<>(25);
        }

        @Override
        public synchronized void update(AnimationCanvas canvas, float progress) {
            for (Animatable animatable : animatables) {
                animatable.update(canvas, progress);
            }
        }

        @Override
        public synchronized void add(Animatable animatable) {
            animatables.add(animatable);
        }

        @Override
        public synchronized void remove(Animatable animatable) {
            animatables.remove(animatable);
        }

        @Override
        public synchronized Animatable[] getAnimatables() {
            return animatables.toArray(new Animatable[animatables.size()]);
        }

    }

} 
```

**更新**

您将面临的最大问题是屏幕只能以整数工作......

```
private class Animator implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        squares[0].y += 1;
        squares[1].y += 1;
        repaint();
    }
} 
```

我相信这两个方块其实都是“抖动”的，但是因为画出来的方块有这么明显的身体不足，所以更加突出。我以大约 24fps 的速度运行此测试，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:53:24.543

你有：

```
private class Animator implements ActionListener {
       @Override
       public void actionPerformed(ActionEvent e) {
           squares[0].y += 0.10;
           squares[1].y += 0.10;
           repaint();
       }
   } 
```

和

```
public void startAnimation() {
    t = new Timer(30, new Animator());
    t.start();
} 
```

但是您可以通过更改为

```
private class Animator implements ActionListener {
       @Override
       public void actionPerformed(ActionEvent e) {
           squares[0].y += 1;
           squares[1].y += 1;
           repaint();
       }
   } 
```

和

```
public void startAnimation() {
    t = new Timer(300, new Animator());
    t.start();
} 
```

其作用相同，但循环次数减少了 10 倍。

我没有测试代码，但值得一试。

MadProgrammer 提供了适当的解决方案，他在其中测量延迟和偏移量。

# java - 子图上的 MouseMotionListener 事件 - GEF

> ID：13540535
> 
> 赞同：1
> 
> 时间：2012-11-24T10:58:07.490
> 
> 标签：java, mouseevent, eclipse-gef, draw2d

我正在使用一个包含几个子图形（按钮。使用工具栏布局）的父 draw2d 图，这些子图（按钮。使用工具栏布局）注册到 MouseMotionListener 并在鼠标输入时执行一些操作（让我们说'enterAction'）在鼠标退出时执行其他操作（'exitAction'）。

由于某种原因，在指向其中一个子按钮时会调用“exitAction”。
我试图将父图形的所有子对象递归注册到 MouseMotionListener 事件，尽管它“解决了我的问题”（'exitAction' 被触发，但我设法在按钮的'enterAction' 中捕获它并处理它） - 另一个问题发生：按钮的“actionPerformed”事件（我已将按钮添加为 ActionListener）未触发（或者它已触发，但在我找不到的地方处理...）。

有什么帮助吗？:\
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:07:52.160

这通常很难解决，因为在 draw2d 中鼠标事件不会像在 html 中那样通过元素传播。

例如，您可以将侦听器移动到画布上：

```
import org.eclipse.draw2d.ActionEvent;
import org.eclipse.draw2d.ActionListener;
import org.eclipse.draw2d.Border;
import org.eclipse.draw2d.Button;
import org.eclipse.draw2d.ColorConstants;
import org.eclipse.draw2d.Figure;
import org.eclipse.draw2d.FigureCanvas;
import org.eclipse.draw2d.Layer;
import org.eclipse.draw2d.LineBorder;
import org.eclipse.draw2d.ScalableLayeredPane;
import org.eclipse.draw2d.XYLayout;
import org.eclipse.draw2d.geometry.Rectangle;
import org.eclipse.swt.events.MouseMoveListener;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.MessageBox;
import org.eclipse.swt.widgets.Shell;

public class HHH {

public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell();
    shell.setLayout(new FillLayout());

    final FigureCanvas canvas = new FigureCanvas(shell);
    final ScalableLayeredPane pane = new ScalableLayeredPane();
    pane.setScale(1.5f);

    canvas.setContents(pane);

    final Layer layer = new Layer();
    layer.setLayoutManager(new XYLayout());
    pane.add(layer);

    final Figure container = new Figure();
    container.setOpaque(true);
    container.setBackgroundColor(ColorConstants.lightBlue);
    container.setLayoutManager(new XYLayout());
    layer.add(container, new Rectangle(100, 100, 100, 100));

    final Button b = new Button("Push");
    b.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent event) {
            MessageBox box = new MessageBox(shell);
            box.setText("button pressed");
            box.open();
        }
    });
    container.add(b, new Rectangle(10, 10, -1, -1));

    canvas.addMouseMoveListener(new MouseMoveListener() {

        Border oldBorder = null;
        boolean over = false;

        @Override
        public void mouseMove(org.eclipse.swt.events.MouseEvent e) {
            final Rectangle containerBounds = container.getBounds().getCopy();
            container.translateToAbsolute(containerBounds);

            if (containerBounds.contains(e.x, e.y)) {
                // simulate enter container figure
                if (!over) {
                    oldBorder = container.getBorder();
                    container.setBorder(new LineBorder());
                    over = true;
                }
            } else {
                // simulate exit container figure
                if (over) {
                    container.setBorder(oldBorder);
                    oldBorder = null;
                    over = false;
                }
            }
        }

    });

    shell.setSize(500, 500);
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }

}

} 
```

# javascript - AddEvenLister 在附加后立即触发

> ID：13540536
> 
> 赞同：0
> 
> 时间：2012-11-24T10:58:10.797
> 
> 标签：javascript, onclick, addeventlistener

我想知道如何正确地将 onClick 之类的事件侦听器添加到动态 div。这是我的片段：

```
var $menu = new Array(2);
createDiv('yes');    

function createDiv(title) {

var $class = 'menuLink';
var $title = 'title';

for(var i=0; i<$menu.length;i++)
{
   $title = 'title';
   var newdiv = document.createElement('div');
   newdiv.setAttribute('class', $class);
   newdiv.setAttribute('id', 'item'+i);

   newdiv.addEventListener('onclick', clickHandle(newdiv.id),false);

   if (title) 
   {
     newdiv.innerHTML = $title;
   } else {
 newdiv.innerHTML = "No Title";
   }

   document.getElementById('menu').appendChild(newdiv);
   showMenu();   
 }
} 

function clickHandle(e)
{
if(e == 'item0')
{
    alert('Link is' + ' ' + e);
}else{
    alert('Another Link');
}
} 
```

这是我的问题，该片段工作正常，它创建了我的 div，添加了 id 的值和所有内容，但是一旦附加事件，事件就会触发，所以当 for 循环创建 div 时，警报窗口会显示：链接是 item0 ，紧接着它说：另一个链接。

我误解了这个吗？（我在 AS3 中使用了这种方法无数次，得到了预期的结果，只是附加了一个等待点击的功能）。我想要的是我的 Div 等待用户点击它们，而不是在附加后立即触发。感谢您对此的任何提示。问候。

附言。IE 不支持 addEventListener，但我想在进入 IE 的疯狂之海之前解决这个问题，但我也会欣赏 IE 的方法。- 我尝试了“onclick”，然后在 addEventListener 行中“单击”，两者的结果都与上述相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:58:56.710

代替

```
newdiv.addEventListener('onclick', clickHandle(newdiv.id),false); 
```

和

```
(function(newdiv){
    newdiv.addEventListener('onclick', clickHandle(newdiv.id), false);
 })(newdiv); 
```

该事件未触发，但您正在调用`clickHandle(newdiv.id)`并将此调用的结果传递给`addEventListener`. 另请注意，事件的名称是`'click'`，不是`'onclick'`。此外，变量 newdiv 由以下循环更改。这就是为什么我建议将它封闭在一个闭包中以防止它的变化。

你也可以使用这个：

```
(function(newdiv){
   newdiv.onclick = function(){clickHandle(newdiv.id)};
})(newdiv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:02:10.730

既然您已经使用了 jquery，为什么不在您的事件绑定中使用它呢？

它的跨浏览器兼容，因此您不必再担心 IE

试试 .click();

[http://api.jquery.com/click/](http://api.jquery.com/click/)

# linux - /proc/PID 文件的格式

> ID：13540537
> 
> 赞同：5
> 
> 时间：2012-11-24T10:58:16.100
> 
> 标签：linux, process

我想从`/proc`目录中检索一些进程信息，我的问题如下： 中的文件是否有标准格式`/proc/PID`？
例如，有这个`proc/PID/status`文件`Name:'\t'ProcName`在它的第一行。我可以在其他地方用空格代替这个文件`\t`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T11:13:40.660

首先，Linux 中的文档在`/proc`Linux 源文件中提供，在[`Documentation/filesystems/proc.txt`](http://www.kernel.org/doc/Documentation/filesystems/proc.txt). 如果要使用 procfs，那应该是您首先考虑的地方。可悲的是，AFAICS 它没有提到确切的记录格式。

第二个要看的地方是`procps`源（即提供`ps`工具的包）。在那里你可以找到：

```
colon = strchr(S, ':');
if(unlikely(!colon)) break;
if(unlikely(colon[1]!='\t')) break; 
```

这意味着`ps`依赖于`:\t`存在。因此，您可以假设所有当前的 Linux 内核都使用这种格式。此外，我怀疑微小的变化（比如用`\t`其他东西替换）是否会被认为足以破坏与旧版本`ps`工具的兼容性。

也就是说，您通常可以在接受的内容上更加自由。考虑到该文件的具体内容，您可以假设冒号是字段分隔符，并删除它后面的任何空格。如果您使用的是 shell 脚本，那么常规的字段分隔就足够了。

最后，我想说几点：

1.  该`status`文件应该是*人类可读的*。因此，程序通常更好地读取`stat`文件，而不是设计为面向机器的文件。
2.  我在这里只考虑 Linux（基于标签）。不同的系统可能有一点不同的`/proc`格式。
3.  如果您正在编写 C 程序（*shell*标签是由编辑器添加的），您应该考虑使用`libprocps`随附的库而`procps`不是手动读取文件。这样，您就可以避免重新发明轮子并直接依赖特定格式。

# java - 无法在现有面板上画线

> ID：13540547
> 
> 赞同：4
> 
> 时间：2012-11-24T10:59:13.297
> 
> 标签：java, swing, jpanel, layout-manager, paintcomponent

我正在用 Swing 编写我的第一个 Java GUI。我正在尝试创建一个带有 10X10 点的面板并在这些点上画线。

问题是我只能创建上述之一。这意味着我可以创建一个 10X10 点的矩阵或创建线条。

这是我的代码：

```
public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setTitle("DrawMatrix");
        frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(new DrawRectPanel());
        frame.setSize(240, 260);
        frame.setVisible(false);
        frame.getContentPane().add(new DrawLine());
        frame.setVisible(true);
   }
}

public class DrawRectPanel extends JPanel{
   final static int DIST = 20;
   final static int MAX_ROW = 11;
   final static int MAX_COL = 11;
   int i = 1;

@Override

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    {
        // Points matrix
        int x = 0;
        for(int row = 1; row < MAX_ROW; row++)
        {
             x = row * DIST;
            for(int col = 1; col < MAX_COL; col++)
            {
                int y = col * DIST;
                g.setColor(Color.blue);
                g.drawLine(x,y,x,y+1);
            }
        }
    }
  }
}

public class DrawLine extends JPanel {

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawLine(20,20,40,40);
    }
 } 
```

知道为什么吗？我应该以不同的方式使用 setVisible 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:18:17.563

在连续*调用*`add(..)`.

> 我希望它们都在中心，因为我想从点到点画线

您应该使用一种需要单个 的方法`DrawingPanel`，可以将对象绘制到该方法上。您可能还需要一个数组来保存要绘制的形状，以便可以轻松获取和操作`paintComponent(..)`。

*   [请记住通过 Event Dispatch Thread 进行](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)所有 Swing 组件的创建和操作[`SwingUtilities.inovkeLater(..)`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

*   在设置visible 而不是 override或of之前不要调用`setSize()`，`JFrame`而是返回一个适合所有绘图的尺寸。`pack()``JFrame``getPrefferedSize``setPrefferedSize``JPanel`

*   无需`getContentPand.add(..)`简单地调用`add(..)`，`JFrame`因为调用将被定向到*contentPane*

这是一个示例（基本上您使用上述修复进行编码）

![在此处输入图像描述](../Images/e0a7de5170d5880e2ec0b8be2bcc509e.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Main {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setTitle("DrawMatrix");
                frame.setResizable(false);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.getContentPane().add(new DrawPanel());
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
}

class DrawPanel extends JPanel {

    final static int DIST = 20;
    final static int MAX_ROW = 11;
    final static int MAX_COL = 11;
    int i = 1;

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        // Points matrix
        int x = 0;
        for (int row = 1; row < MAX_ROW; row++) {
            x = row * DIST;
            for (int col = 1; col < MAX_COL; col++) {
                int y = col * DIST;
                g.setColor(Color.blue);
                g.drawLine(x, y, x, y + 1);
            }
        }
        g.drawLine(20, 20, 40, 40);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }
} 
```

# logging - 停止 openfire 日志轮换

> ID：13540548
> 
> 赞同：1
> 
> 时间：2012-11-24T10:59:30.297
> 
> 标签：logging, rotation, openfire

您好，我正在使用 openfire 3.6.4，它具有基于大小和基于时间的日志文件轮换机制（info.log、debug.log 等），但我有日志文件轮换机制，所以我想禁用 openfire 的日志轮换机制，那么任何人都可以建议我如何停止openfire的日志轮换吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:57:57.517

在 Openfire 中，您可以增加日志的最大大小（info.log、warn.log 等）。尝试将其增加到 1Gb 或更多（config maxsize log in wildfire.xml）。

见[http://community.igniterealtime.org/docs/DOC-1061](http://community.igniterealtime.org/docs/DOC-1061)

# matlab - MATLAB：X 和 Y 的观察次数不同。（错误）classregtree()

> ID：13540549
> 
> 赞同：1
> 
> 时间：2012-11-24T10:59:42.163
> 
> 标签：matlab, classification

我试图使用函数`classregtree`来构建一棵树。classTrain 是具有 2 个字符串值的元胞数组。我使用`grp2idx`() 函数来索引字符串，不使用此函数会导致错误`"X must be a matrix of floating-point numbers."`。现在我在 training_data = 200x1 和 test_data = 1800x1 中，我得到了这个错误`"X and Y do not have the same number of observations."`我随机生成的训练和测试数据。

也许有人知道如何解决这个问题？

```
classTrain = {};
        classTest = {};
        for ind = trainInd  
            classTrain{end+1} = class{ind};
        end
        for ind = testInd
            classTest{end+1} = class{ind};
        end

        %1) building tree
        training_data = grp2idx(classTrain);
        test_data = grp2idx(classTest);
    >>>> t = classregtree(training_data', test_data',  'method','classification' , 'prune', 'off', 'splitmin', 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:57:48.177

正如帮助条目所说：

classregtree 创建分类和回归树对象。T = classregtree(X,Y) 创建决策树 T，用于根据预测变量 X 预测响应 Y。X 是预测变量值的 N×M 矩阵。如果 Y 是 N 个响应值的向量，

例如，X 应该是训练数据，Y 应该是训练数据的标签。因此，如果 X 是 N × M，则 Y 应该是 N x 1。

然后，您可以使用“eval”在新数据上运行树

# java - 关于测试依赖项的 Google Eclipse 插件警告

> ID：13540553
> 
> 赞同：1
> 
> 时间：2012-11-24T11:00:26.997
> 
> 标签：java, eclipse, gwt, google-eclipse-plugin

我在 Eclipse 中创建了一个新的 Web App 项目（通过 Google 插件）并开始将 JAR 添加到`war/WEB-INF/lib`文件夹中。但是，我不想在产品 WAR 中打包几个仅用于测试的依赖项（ `junit`、`mockito`、`arquillian`、等）。`hamcrest`因此，我只是`lib/test`在我的项目根目录下创建了一个目录，在那里添加了测试 JAR，然后将它们添加到项目构建路径中。

当我这样做时，我会收到以下 Eclipse 警告（在本例中为 for `mockito`）：

> 以下类路径条目“/home/myuser/workbench/eclipse/workspace/myapp/lib/test/mockito-1.9.5.jar”在服务器的类路径中不可用。

如果我把这些 JAR 放在里面`war/WEB-INF/lib`，它们就会消失；但我不希望他们在那里。有没有办法告诉 Google Eclipse 插件忽略这些依赖项，因为它们是*测试*依赖项？否则，GWT 开发人员通常如何消除这些警告？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:14:40.047

右键单击警告，快速修复，“不要警告我...”。

# windows-7 - 使用 signtool 签名 CAB 文件不再起作用（签名者的证书对签名无效）

> ID：13540555
> 
> 赞同：1
> 
> 时间：2012-11-24T11:00:27.363
> 
> 标签：windows-7, certificate, command-prompt, signing, signtool

几个月前，a 能够使用我在服务器上创建的测试证书成功签署 CAB 文件。以下是我采取的步骤：

makecert.exe -sv "Demo.pvk" -n "CN=Demo Company,E=demo@gmail.com" "Demo.cer"

cert2spc.exe "Demo.cer" "Demo.spc"

pvk2pfx.exe -pvk "Demo.pvk" -pi "pvk_password" -spc "Demo.spc" -pfx "Demo.pfx" -po "pfx_password"

signtool.exe 签名 /f "Demo.pfx" /p "pfx_password" /v "D:\Setup.cab"

除了最后一个使用signtool返回的步骤之外，所有步骤都成功：“签名者的证书对签名无效”。我已经在网上对这个错误进行了研究，但实际上并没有解决我的问题。由于 pfx 已过期，通常会创建此错误，但此处并非如此。我已成功将证书导入本地证书存储并检查了它的有效性。

为什么即使我重新创建它，我也无法再用我的 pfx 签署 CAB？是否有一些 Windows 更新负责此更改？

我愿意接受有关使用命令提示符使用 pfx 签署 CAB 的任何其他方式的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:07:02.257

我设法破解了这个难题并用测试证书签署了 CAB。

首先，我通过添加代表自签名的 -r 参数更改了 makecert 调用：

```
makecert.exe -sv "Demo.pvk" -n "CN=Gregor Primar SP,E=gprimar@gmail.com" "Demo.cer" -r 
```

下一步是使用 makecert 而不是 pvk2pfx 创建 pfx：

```
makecert -sk GpSolutionsKey -iv "Demo.pvk" -n "CN=Gregor Primar SP" -ic "Demo.cer" -sr currentuser -ss my -sky signature -pe 
```

这也将 pfx 导入到用户证书存储 (-sr currentuser)。

然后我打开 mmc 并添加 Certificates snap-inn（我的用户帐户）。选择个人证书并导出到光盘。

最后一步是使用以下命令进行签名：

```
signtool.exe sign /f "Demo.pfx" /p "pfx_password" /v "d:\Setup.cab" 
```

并且 Setup.cab 与 Demo.pfx 成功签署！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T15:51:22.643

几乎可能您的密钥公共大小小于 2048 位（默认情况下使用长度 = 1024 无法签名），2048 位是操作系统能够签名过程所需的最小大小，您可以在运行时检查此值**certmgr**命令行，转到包含您最近创建的证书的文件夹，双击您的证书，转到详细信息选项卡并验证密钥公共大小是否大于或等于 2048

如果大小小于 2048，您应该再次生成将标志 -len=2048 （或更大）添加到 makevert 命令，我还包括 -r 标志

```
makecert -sv "mycertif.pvk" -n "CN=Totem Company" -len 2048 mycertif.cer -r 
```

迟到了，用signtool申请签

为我工作，祝你好运

# javascript - 如何使用jquery而不是split方法拆分字符串

> ID：13540557
> 
> 赞同：0
> 
> 时间：2012-11-24T11:00:47.703
> 
> 标签：javascript, jquery

我想拆分来自数据库的字符串。在控制器中，我将那个分组并通过 ajax 成功传递该值。在其他视图页面中工作的相同代码。但我无法在我的视图页面中进行拆分。有什么问题。

代码：

```
 var x = json[i].answer;
    var arr = x.split(","); 
```

在此之后，我的代码将被执行。x 值看起来像

```
 x = First,Last; 
```

然后在拆分后，我将在一个数组中获得第一个和最后一个。但此后代码不会执行。然后我在字符串中附加了引号，例如

```
 x = "\""+json[i].answer+"\""; 
```

然后拆分函数开始执行并且数组包含

```
 arr[0] = "First
     arr[1] = Last" 
```

我该如何解决我的问题。希望你能理解我的问题

问候，

斯里兰卡

# sql - SQL HAVING COUNT 和 JOIN

> ID：13540563
> 
> 赞同：2
> 
> 时间：2012-11-24T11:01:42.853
> 
> 标签：sql, dml

我试过这个查询：在少于 2 家医院工作的医生是什么。但结果不是我所期望的。

我有这些表：

```
CREATE TABLE Hospital (
    hid INT PRIMARY KEY,
    name VARCHAR(127) UNIQUE,
    country VARCHAR(127),
    area INT
);
CREATE TABLE Doctor (
    ic INT PRIMARY KEY,
    name VARCHAR(127),
    date_of_birth INT,
);
CREATE TABLE Work (
    hid INT,
    ic INT,
    since INT,
    FOREIGN KEY (hid) REFERENCES Hospital (hid),
    FOREIGN KEY (ic) REFERENCES Doctor (ic),
    PRIMARY KEY (hid,ic)
); 
```

我试过这个：

```
SELECT DISTINCT D.ic 
    FROM Doctor D, Work W 
    JOIN Hospital H ON (H.hid = W.hid)
    WHERE D.bi = W.bi
    GROUP BY (D.ic)
    HAVING COUNT(H.hid) < 2
; 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T11:08:21.857

您需要使用`LEFT JOIN`和加入表格`Hospital`不是必需的

```
SELECT  a.name
FROM    Doctor a
        LEFT JOIN `Work` b
            ON a.ic = b.ic
GROUP BY a.name
HAVING COUNT(b.ic) < 2 
```

# android - 以小时为单位显示日期

> ID：13540565
> 
> 赞同：1
> 
> 时间：2012-11-24T11:01:50.013
> 
> 标签：android, date, simpledateformat

我正在开发一个跟踪旅行时间的应用程序

**考虑以下示例：**

行程一：距离：550km；旅行时间：14:55（14小时55分钟）

行程2：距离：230km；行程时间：12:25

行程3：距离：140km；行程时间：10:44

我将旅行时间存储为很长的时间（从 1970-01-01 开始的毫秒）。这一切都很好，直到我得到超过 24 小时的旅行时间，或者显然，当我想显示总旅行小时数时。

有没有办法将日期格式化为字符串，将日期显示为小时和分钟的数量，而不是日期的小时和分钟？

只要我的值为 26:10（26 小时 10 分钟），SimpleDateFormat 将显示“02:10”，而不是所需的“26:10”。有没有办法解决这个问题，还是我自己创建一个解析器会更好？不介意这是否是答案，只是不想重新发明轮子；）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:12:40.103

您可以手动计算它：

```
long differenceInMilliseconds = ...;
long totalSeconds = differenceInMilliseconds / 1000;

int hours = totalSeconds / 3600;    
totalSeconds = totalSeconds % 3600;

int minutes = totalSeconds / 60;
int seconds = totalSeconds % 60; 
```

# c# - Datagrid wpf c#应用程序中的复选框

> ID：13540566
> 
> 赞同：2
> 
> 时间：2012-11-24T11:01:55.257
> 
> 标签：c#, wpf, datagrid

我正在使用数据网格为学生记录创建一个 C# wpf 应用程序。如何在标题中创建复选框以选择/取消选择一行中的所有复选框？如何一键选中行中的复选框，以便我们可以编辑/删除记录？以及我们如何选择多个复选框来删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:36:47.850

我创建了一种行为，以允许控件中的属性绑定到项目集合的属性，其方式如下：

*   如果更改控件中的属性，则会更新所有项。
*   如果您更改项目中的属性，如果所有项目都具有相同的属性，则控件将反映它。如果没有，控件的属性将被赋予一个后备值（如 null）。

使用此行为，您可以将复选框添加到 DataGrid 标头，并将其 IsChecked 属性绑定到 DataGrid 的 ItemSource，绑定到集合类型的属性。

我们可以使用 MVVM 模式处理选择逻辑。例如，我们有以下集合实体的 ViewModel：

```
public class ItemViewModel : INotifyPropertyChanged
{
    #region INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    private bool isSelected;
    public bool IsSelected {
        get { return this.isSelected; }

        set
        {
            if (this.isSelected == value)
                return;

            this.isSelected = value;
            this.OnPropertyChanged("IsSelected");
        }
    }

    private string myProperty;
    public string MyProperty
    {
        get { return this.myProperty; }
        set
        {
            if (this.myProperty != value)
            {
                this.myProperty = value;
                this.OnPropertyChanged("MyProperty");
            }
        }
    }
} 
```

然后我们有 MainViewModel，它控制着 MainWindow 的逻辑：

```
public class MainViewModel: INotifyPropertyChanged
{
    #region INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    #region Items (INotifyPropertyChanged Property)
    private ObservableCollection<ItemViewModel> items;

    public ObservableCollection<ItemViewModel> Items
    {
        get { return this.items; }
        set
        {
            if (this.items != value)
            {
                this.items = value;
                this.OnPropertyChanged("Items");
            }
        }
    }
    #endregion

    public MainViewModel()
    {
        this.Items = new ObservableCollection<ItemViewModel>();
        for (int i = 0; i < 10; i++)
            this.Items.Add(new ItemViewModel() { MyProperty = "Item" + i });
    }
} 
```

然后在我们的窗口中，我们可以声明 DataGrid。为了达到你想要的，我们必须做到以下几点：

*   将 MainViewModel 分配给 Window.DataContext
*   将 DataGrid.ItemsSource 绑定到 MainViewModel 中的 Items 属性
*   定义 DataGrid 的列。在示例中，我选择使用“IsSelected”列并将“SelectAll”复选框添加到其标题中，如您指定的那样，但您可以在任何地方使用 CheckBox 来控制选择。
*   我们需要使行的选择更新我们项目的“IsSelected”属性，反之亦然。为此，我们修改 RowStyle，以便我们可以将行的“IsSelected”属性绑定到其项目的“IsSelected”。这样，选择逻辑现在可以完全由 ViewModel 驱动。
*   最后要做的是让“SelectAll”复选框完成它的工作。我们应用 CollectionPropertyBehavior 并对其进行配置，使其“SourcePropertyPath”指向我们要绑定的 CheckBox 中的属性（“IsChecked”），而 CollectionPropertyPath 指向项目中的属性（“IsSelected”）。然后我们只需要将其 ItemsSource 绑定到 DataGridItemsSource。请注意，默认值为“null”，这意味着当项目在其属性中具有不同的值时，CheckBox 将接收“null”并处于未定义状态。

最终的 xaml 将是这样的：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:WpfApplication2" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" x:Class="WpfApplication2.MainWindow"
    Title="MainWindow" mc:Ignorable="d" Height="350" Width="525">
<Window.Resources>
    <Style x:Key="DataGridRowStyle" TargetType="{x:Type DataGridRow}">
        <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
    </Style>
</Window.Resources>
<Window.DataContext>
    <local:MainViewModel/>
</Window.DataContext>
<Grid>
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Items}" CanUserAddRows="False" RowStyle="{DynamicResource DataGridRowStyle}">
        <DataGrid.Columns>
            <DataGridCheckBoxColumn Binding="{Binding IsSelected}">
                <DataGridCheckBoxColumn.Header>
                    <CheckBox>
                        <i:Interaction.Behaviors>
                            <local:CollectionPropertyBehavior CollectionPropertyPath="IsSelected" SourcePropertyPath="IsChecked" ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                        </i:Interaction.Behaviors>
                    </CheckBox>                                 
                </DataGridCheckBoxColumn.Header>            
            </DataGridCheckBoxColumn>
            <DataGridTextColumn Width="*" Binding="{Binding MyProperty}"/>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

最后，行为：

```
public class CollectionPropertyBehavior : Behavior<DependencyObject>
{
    private IEnumerable<ValueProxy> proxies;
    private bool syncking;

    public string SourcePropertyPath
    {
        get { return (string)GetValue(SourcePropertyPathProperty); }
        set { SetValue(SourcePropertyPathProperty, value); }
    }
    public static readonly DependencyProperty SourcePropertyPathProperty =
        DependencyProperty.Register("SourcePropertyPath", typeof(string), typeof(CollectionPropertyBehavior), new PropertyMetadata(null));

    public string CollectionPropertyPath
    {
        get { return (string)GetValue(CollectionPropertyPathProperty); }
        set { SetValue(CollectionPropertyPathProperty, value); }
    }
    public static readonly DependencyProperty CollectionPropertyPathProperty =
        DependencyProperty.Register("CollectionPropertyPath", typeof(string), typeof(CollectionPropertyBehavior), new PropertyMetadata(null));

    private IEnumerable<object> Items { get { return  this.ItemsSource == null ? null : this.ItemsSource.OfType<object>(); } }
    public IEnumerable ItemsSource
    {
        get { return (IEnumerable)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }
    public static readonly DependencyProperty ItemsSourceProperty =
        DependencyProperty.Register("ItemsSource", typeof(IEnumerable), typeof(CollectionPropertyBehavior), new PropertyMetadata(null, ItemsSourceChanged));

    private object Value
    {
        get { return (object)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }
    private static readonly DependencyProperty ValueProperty =
        DependencyProperty.Register("Value", typeof(object), typeof(CollectionPropertyBehavior), new PropertyMetadata(null, ValueChanged));

    public object DefaultValue
    {
        get { return (object)GetValue(DefaultValueProperty); }
        set { SetValue(DefaultValueProperty, value); }
    }
    public static readonly DependencyProperty DefaultValueProperty =
        DependencyProperty.Register("DefaultValue", typeof(object), typeof(CollectionPropertyBehavior), new PropertyMetadata(null));

    private static void ValueChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        var element = sender as CollectionPropertyBehavior;
        if (element == null || element.ItemsSource == null) return;

        element.UpdateCollection();
    }

    private static void ItemsSourceChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        var element = sender as CollectionPropertyBehavior;
        if (element == null || element.ItemsSource == null) return;
        element.ItemsSourceChanged();
    }

    private void ItemsSourceChanged()
    {
        this.proxies = null;

        if (this.Items == null || !this.Items.Any() || this.CollectionPropertyPath == null) return;

        // Cria os proxies
        this.proxies = this.Items.Select(o =>
        {
            var proxy = new ValueProxy();
            proxy.Bind(o, this.CollectionPropertyPath);
            proxy.ValueChanged += (s, e) => this.UpdateSource();
            return proxy;
        }).ToArray();

        this.UpdateSource();
    }

    private void UpdateSource()
    {
        if (this.syncking) return;

        // Atualiza o valor 
        using (new SynckingScope(this))
        {
            object value = this.proxies.First().Value;
            foreach (var proxy in this.proxies.Skip(1))
            {
                value = object.Equals(proxy.Value, value) ? value : this.DefaultValue;
            }

            this.Value = value;
        }
    }

    private void UpdateCollection()
    {
        // Se o valor estiver mudando em função da atualização de algum 
        // elemento da coleção, não faz nada
        if (this.syncking) return;

        using (new SynckingScope(this))
        {
            // Atualiza todos os elementos da coleção,
            // atrávés dos proxies
            if (this.proxies != null)
                foreach (var proxy in this.proxies)
                    proxy.Value = this.Value;
        }
    }

    protected override void OnAttached()
    {
        base.OnAttached();

        // Bind da propriedade do objeto fonte para o behavior
        var binding = new Binding(this.SourcePropertyPath);
        binding.Source = this.AssociatedObject;
        binding.Mode = BindingMode.TwoWay;
        BindingOperations.SetBinding(this, ValueProperty, binding);
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        // Limpa o binding de value para a propriedade do objeto associado
        this.ClearValue(ValueProperty);
    }

    internal class SynckingScope : IDisposable
    {
        private readonly CollectionPropertyBehavior parent;

        public SynckingScope(CollectionPropertyBehavior parent)
        {
            this.parent = parent;
            this.parent.syncking = true;
        }

        public void Dispose()
        {
            this.parent.syncking = false;
        }
    }

    internal class ValueProxy : DependencyObject
    {
        public event EventHandler ValueChanged;

        public object Value
        {
            get { return (object)GetValue(ValueProperty); }
            set { SetValue(ValueProperty, value); }
        }
        public static readonly DependencyProperty ValueProperty =
            DependencyProperty.Register("Value", typeof(object), typeof(ValueProxy), new PropertyMetadata(null, OnValueChanged));

        private static void OnValueChanged(object sender, DependencyPropertyChangedEventArgs args)
        {
            var element = sender as ValueProxy;
            if (element == null || element.ValueChanged == null) return;

            element.ValueChanged(element, EventArgs.Empty);
        }

        public void Bind(object source, string path)
        {
            // Realiza o binding de value com o objeto desejado
            var binding = new Binding(path);
            binding.Source = source;
            binding.Mode = BindingMode.TwoWay;

            BindingOperations.SetBinding(this, ValueProperty, binding);
        }
    }
} 
```

这种方法的优点是它是完全可重用的。在此示例中，我们使用它来处理选择，但您可以在 ItemViewModel 中将枚举属性绑定到标题中的 ComboBox 等等。

该行为是从我的 Silverlight 4 项目中移植的，但我进行了测试，它在 WPF 应用程序中运行良好。但是，我认为在 WPF 中，我们也许可以找到一种更好的方法，使行为适应 MarkupExtension。如果我有时间，我可能会看看那个。此外，人们还可以对其进行调整，使其可以绑定到 SelectedItems，这样，当有选定的项目时，它会更新它们，而当没有选定的项目时，它会全部更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:59:00.720

像这样使用某事：

```
DataGridCheckBoxColumn cbc = new DataGridCheckBoxColumn();
dataGrid.Columns.Add(cbc);
CheckBox cb = new CheckBox();
cbc.Header = cb; 
```

并处理`Checked`和`UnChecked`事件：

```
cb.Checked+=new RoutedEventHandler(cb_Checked); 
cb.Unchecked+=new RoutedEventHandler(cb_Unchecked); 
```

# perl - Perl 抓取脚本无法识别某些字符

> ID：13540568
> 
> 赞同：2
> 
> 时间：2012-11-24T11:02:11.230
> 
> 标签：perl, mojolicious

我有一个在本地运行良好但在服务器上失败的脚本。

它显示不间断的空格符号

```
&nbsp; 
```

作为

```
? 
```

打印到标准输出时。

在页面的解析中，如果我尝试用

```
s/\&nbsp\;//g 
```

什么都没有发生，也没有摆脱问号

```
s/\?//g 
```

似乎无论如何都会坚持下去。

奇怪的是，在本地运行脚本时这不是问题。

但是，本地计算机和服务器上的一个问题是撇号（在我正在抓取的 HTML 中表示为尖锐符号

```
&acute; 
```

始终表示为问号

```
? 
```

即使明确尝试

```
s/&acute;/'/g 
```

困惑，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:39:26.427

将尝试像这样删除它：

**无间断空间**

```
my $non_break_space = "\x{A0}";
$non_break_space =~ s/\xA0/ /g; 
```

**尖锐的口音**

```
my $acute = "\x{B4}";
$acute =~ s/\xB4/ /g; 
```

您可以使用此站点[fileformat.info](http://www.fileformat.info/info/unicode/char/a0/index.htm)获取有关 unicode 字符及其不同值的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:38:43.557

由于您使用[mojolicious](/questions/tagged/mojolicious "显示标记为“mojolicious”的问题")标记了您的问题，我假设您正在使用[Mojolicious](http://mojolicio.us)。尝试在您的服务器上运行此测试脚本并向我们展示结果：

```
#!/usr/bin/env perl

use utf8;
use Mojolicious::Lite;
use Test::More tests => 3;
use Test::Mojo;

get '/test_html' => {text => "<p>Hello&nbsp;&nbsp;World&acute;!</p>"};
my $t = Test::Mojo->new;

$t->get_ok('/test_html')->status_is(200)->text_is('p', 'Hello World´!'); 
```

在这里工作正常：

```
1..3
ok 1 - get /test_html
ok 2 - 200 OK
ok 3 - exact match for selector "p" 
```

# yii - Yii 在表格输入模型中为 textarea 设置值

> ID：13540573
> 
> 赞同：0
> 
> 时间：2012-11-24T11:02:37.783
> 
> 标签：yii, textarea

我的表单字段为

```
$form->textArea($model,'remarks[1]'); 
```

在这里，我必须为此文本区域设置值。

这个怎么做？我是这个框架的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:13:18.540

如果`$model`是您的模型并且`remarks[1]`是您的属性，则可以使用以下方法指定值：

> $model->remarks[1] = '你的价值';

编辑：

尝试：

```
$model->remarks = 'Your Value';
$form->textArea($model,'[1]remarks'); 
```

# android - 带有搜索视图的操作栏。反向兼容性问题

> ID：13540574
> 
> 赞同：4
> 
> 时间：2012-11-24T11:02:39.417
> 
> 标签：android, android-actionbar, actionbarsherlock, searchview

我正在构建一个示例应用程序来演示带有过滤器和其他操作栏项目的 SearchView。我能够在 4.2（Nexus 7）上成功运行这个应用程序。但它没有在 2.3 上运行。我用谷歌搜索了这个问题。才知道我应该使用 SherLock 操作栏。我刚刚去了[http://actionbarsherlock.com/download.html](http://actionbarsherlock.com/download.html)，下载了 zip 文件并按照视频中的说明添加了库：[http](http://www.youtube.com/watch?v=4GJ6yY1lNNY&feature=player_embedde) ://www.youtube.com/watch?v=4GJ6yY1lNNY&feature= player_embedde 由 WiseManDesigns 提供。但我仍然无法弄清楚这个问题。

这是我的代码：

SearchViewActionBar.java

```
public class SearchViewActionBar extends Activity implements SearchView.OnQueryTextListener 
{
    private SearchView mSearchView;
    private TextView mStatusView;
    int mSortMode = -1;
    private ListView mListView;
    private ArrayAdapter<String> mAdapter;

    protected CharSequence[] _options = { "Wild Life", "River", "Hill Station", "Temple", "Bird Sanctuary", "Hill", "Amusement Park"};
    protected boolean[] _selections =  new boolean[ _options.length ];

    private final String[] mStrings = Cheeses.sCheeseStrings;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

        setContentView(R.layout.activity_main);

       // mStatusView = (TextView) findViewById(R.id.status_text);
       // mSearchView = (SearchView) findViewById(R.id.search_view);
        mListView = (ListView) findViewById(R.id.list_view);
        mListView.setAdapter(mAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1,
                mStrings));
        mListView.setTextFilterEnabled(true);
        //setupSearchView();
    }

    private void setupSearchView() {
        mSearchView.setIconifiedByDefault(true);
        mSearchView.setOnQueryTextListener(this);
        mSearchView.setSubmitButtonEnabled(false);
        //mSearchView.setQueryHint(getString(R.string.cheese_hunt_hint));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.searchview_in_menu, menu);
        MenuItem searchItem = menu.findItem(R.id.action_search);
        mSearchView = (SearchView) searchItem.getActionView();
       //setupSearchView(searchItem);
       setupSearchView();

        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) 
    {
        if (mSortMode != -1) 
        {
            Drawable icon = menu.findItem(mSortMode).getIcon();
            menu.findItem(R.id.action_sort).setIcon(icon);
        }
        return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        String c="Category";
        String s=(String) item.getTitle();
        if(s.equals(c))
        {
            System.out.println("same");
            showDialog( 0 );
        }
        //System.out.println(s);
        Toast.makeText(this, "Selected Item: " + item.getTitle(), Toast.LENGTH_SHORT).show();
        return true;
    }

    protected Dialog onCreateDialog( int id ) 
    {
        return 
        new AlertDialog.Builder( this )
            .setTitle( "Category" )
            .setMultiChoiceItems( _options, _selections, new DialogSelectionClickHandler() )
            .setPositiveButton( "SAVE", new DialogButtonClickHandler() )
            .create();
    }

    public class DialogSelectionClickHandler implements DialogInterface.OnMultiChoiceClickListener
    {
        public void onClick( DialogInterface dialog, int clicked, boolean selected )
        {
            Log.i( "ME", _options[ clicked ] + " selected: " + selected );
        }
    }

    public class DialogButtonClickHandler implements DialogInterface.OnClickListener
    {
        public void onClick( DialogInterface dialog, int clicked )
        {
            switch( clicked )
            {
                case DialogInterface.BUTTON_POSITIVE:
                    printSelectedPlanets();
                    break;
            }
        }
    }

    protected void printSelectedPlanets()
    {
        for( int i = 0; i < _options.length; i++ ){
            Log.i( "ME", _options[ i ] + " selected: " + _selections[i] );
        }
    }

    public void onSort(MenuItem item) 
    {
        mSortMode = item.getItemId();
        invalidateOptionsMenu();
    }

    public boolean onQueryTextChange(String newText) {
        if (TextUtils.isEmpty(newText)) {
            mListView.clearTextFilter();
        } else {
            mListView.setFilterText(newText.toString());
        }
        return true;
    }

    public boolean onQueryTextSubmit(String query) 
    {
        mStatusView.setText("Query = " + query + " : submitted");
        return false;
    }

    public boolean onClose() 
    {
        mStatusView.setText("Closed!");
        return false;
    }

    protected boolean isAlwaysExpanded() 
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T00:49:11.010

您需要使用 ActionBarSherlock。为此，您的活动需要扩展 ActionBarSherlock 组件。更像这样的东西：

`MySearchActivity extends SherlockActivity {}`

或者，如果您想使用内置列表 API，您可以这样做：

`MySearchActivity extends SherlockListActivity {}`

然后在 res/menu 文件夹中创建 activity_mysearch.xml 文件，其中包含以下内容：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >    
    <item 
        android:id="@+id/menu_search"
        android:icon="@drawable/ic_menu_search"
        android:title="@string/menu_search"
        android:showAsAction="ifRoom|collapseActionView"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
</menu> 
```

现在让您的活动实现 OnQueryTextListener。在 onCreateOptionsMenu 做：

```
inflater.inflate(R.menu.activity_mysearch, menu);
MenuItem searchViewMenuItem = menu.findItem(R.id.menu_search);
SearchView searchView = (SearchView) searchViewMenuItem.getActionView();
searchView.setOnQueryTextListener(this); 
```

您现在可以使用

```
onQueryTextSubmit(String query)
onQueryTextChange(String newText) 
```

查询列表和更新列表视图项的方法。您还可以向适配器添加过滤器并创建一个接口，通知活动在适配器的数据集发生更改后使列表视图无效。

# asp.net - 判断客户是否有订单

> ID：13540575
> 
> 赞同：1
> 
> 时间：2012-11-24T11:02:43.300
> 
> 标签：asp.net, .net, xml, xpath, xmldatasource

[这里](http://code.ohloh.net/file?fid=OIkB-WpG_U2SMrg5mv9WULzs0lQ&cid=QOKFVgcrBJQ&s=northwind&mp=0&ml=1&me=1&md=1&filterChecked=false&browser=Default#L2)有一个 Northwind 数据库的 xml 转储。

文档结构类似于：

```
<NorthWind>
    <Customers></Customers>
    <Customers></Customers>
    .
    .
    .
    <Orders></Orders>
    <Orders></Orders>
    .
    .
    .
</NorthWind> 
```

每个客户标签将包含一个客户信息。现在，当我选择所有客户时，我如何提供一个字段以指示客户是否有订单；类似于布尔字段的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:04:24.397

要查找所有没有订单的客户，请使用此 XPath：

```
/*/Customers[not(../Orders/CustomerID = CustomerID)] 
```

这些是具有`CustomerID`=`FISSA`和的客户`PARIS`。

# c++ - 如何在 C++ 中使用带变量的科学计数法？

> ID：13540578
> 
> 赞同：6
> 
> 时间：2012-11-24T11:02:47.030
> 
> 标签：c++, notation

我想知道是否可以将科学记数法与变量一起使用？

例如：

```
int n;
cin >> n;
int x = 1en; 
```

代替

```
int x = 1e8 
```

可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T11:07:23.573

不可以。科学记数法仅适用于常数值。这些值是在编译时确定的，而您想要获取的值是在运行时确定的。

你必须使用类似的东西`int result = pow(10,n)`。请记住，[`std::pow`](http://en.cppreference.com/w/cpp/numeric/math/pow)返回双精度值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:15:58.500

您可以做的最接近的方法是通过以下方式定义宏：

您无法避免使用 pow，因为 n 是在运行时评估的。这就像 C 一样工作。

`#define e(n) *pow(10,n)`

你使用它：

`int n; cin >> n; int x = 1 e(n);`

# c++ - 数组分段错误

> ID：13540580
> 
> 赞同：3
> 
> 时间：2012-11-24T11:03:04.783
> 
> 标签：c++, arrays, segmentation-fault, fstream

我有分段错误的问题。看：

```
#include<fstream>
using namespace std;
int main(){
    int n,i,vector[10001],vectorcopy[10001];
    ifstream in("program.in");
    ofstream out("program.out");
    in>>n;
    for(i=1;i<=n;i++){
        in>>vector[i];
        vectorcopy[i]=vector[i];
    }
    return 0;} 
```

调试器说：程序收到信号 SIGSEGV，分段错误

请告诉我该怎么办！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:12:15.870

如果输入文件正确，您的程序（大部分）工作正常`program.in`。我想您的分段错误错误是由以下原因引起的：

*   输入错误
*   程序中缺少输入检查

`program.in`这个输入文件没有错误：

```
10
1
2
3
4
5
6
7
8
9
10 
```

**其他错误**

我说“主要”是因为您的程序中还有一些其他错误。它们现在不会造成麻烦（C++ 称之为“未定义的行为”），但它们迟早会：

*   对于大小为 的数组`n`，索引从 0 开始，在`n - 1`;结束 使用数组时，不要这样写你的`for`语句：

    ```
    for (i = 1; i <= n; i++) 
    ```

只需将其重写为：

```
 for (i = 0; i < n; i++) 
```

*   你没有使用`vectorcopy`数组
*   您没有向`program.out`输出文件写入任何内容

# android - 如何防止在android中重新加载活动？

> ID：13540582
> 
> 赞同：0
> 
> 时间：2012-11-24T11:03:16.233
> 
> 标签：android

有两个活动 A，B：活动 A 包含列表，单击列表中的列表正在进入 B 活动。在 B 活动中，我有 3 个按钮让它[B，q，r] 单击每个按钮，然后从新活动加载数据服务器。所以我不想每次都重新加载该数据。并且从这些 p、q、r 中的任何一个上按我想带他回到活动 A

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:10:28.380

为避免重新加载数据，您需要将不同类中的数据与 UI 活动分开。这样，无论你调用多少次`Activity`，数据都只会加载一次。

如果要返回活动 A，则必须在从 A 调用任何其他活动之前修改意图标志：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

# android - 如何将 Android 与 SQL Server 数据库连接起来？

> ID：13540583
> 
> 赞同：0
> 
> 时间：2012-11-24T11:03:17.717
> 
> 标签：android, sql

我的应用程序出现问题

**这是我的一段代码，我的活动抛出异常“错误连接 net.sourceforge.jtds.jdbc.Driver”**

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        sync = (Button) findViewById(R.id.button1);
        sync.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                query2(); }
        });
        }
    public void query2()
    {
    Log.i("Android"," SQL Connect Example.");
    Connection conn = null;
    try {
    String driver = "net.sourceforge.jtds.jdbc.Driver";
    Class.forName(driver).newInstance();
    //test = com.microsoft.sqlserver.jdbc.SQLServerDriver.class;
    String connString = "jdbc:jtds:sqlserver://server_ip_address         :198.168.0.10/tracebaledb;encrypt=fasle;user=sa;password=SqlServer2005;instance=SQLEXPRESS;";
    String username = "sa";
    String password = "SqlServer2005";
    conn = DriverManager.getConnection(connString,username,password);
    Log.w("Connection","open");
    Statement stmt = conn.createStatement();
    ResultSet reset = stmt.executeQuery("select * from AD_Login");

    //Print the data to the console
    while(reset.next()){
    Log.w("Data:",reset.getString(3));
                  Log.w("Data",reset.getString(2)); }
    conn.close();

    } catch (Exception e)
    {
    Log.w("Error connection","" + e.getMessage());
    }
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:27:29.603

您可以通过 Web 服务连接到 SQL Server 数据库。

这是调用 web 服务的示例代码。

```
String url              = "your_webservice_URL";

 try 
 {
    HttpPost loginHttpPost   = new HttpPost(url); 
    HttpContext localContext = new BasicHttpContext();          

    MultipartEntity multipartContent = new MultipartEntity();
    multipartContent.addPart("parameter1", new StringBody(value1));
    multipartContent.addPart("parameter2", new StringBody(value2));
    loginHttpPost.setEntity(multipartContent);

    HttpClient objHttpClient = new DefaultHttpClient();
    HttpResponse response = objHttpClient.execute(loginHttpPost,localContext);
 } 
 catch (IOException e) {
     e.printStackTrace(); 
```

确保在 Manifest.xml 文件中设置权限，

您可以在 php 或 java 中编写 webservice 来获取此值并连接到 SQL Server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:31:39.500

另一种方法是使用使用三层架构的虚拟 JDBC 驱动程序：您的 JDBC 代码通过 HTTP 发送到远程 Servlet，后者在将 JDBC 代码（配置和安全性）传递给 SQL Server JDBC 驱动程序之前对其进行过滤。结果通过 HTTP 发回给您。有一些免费软件使用这种技术。这是安全的，因为数据库永远不会直接公开，您可以使用 SSL。只需谷歌“基于 HTTP 的 Android JDBC 驱动程序”。

# jquery - 花式框宽度不适用

> ID：13540584
> 
> 赞同：1
> 
> 时间：2012-11-24T11:03:28.157
> 
> 标签：jquery, fancybox, height, width

我正在尝试为 fancybox 设置一个宽度

```
$("a.loader").fancybox({
    width: 1000,
    height: 1050,
    autoDimensions: false,
    maxWidth : '100%'
}); 
```

阅读一些主题，但设置`autoDimensions: false,`，尝试使用 px 设置宽度和不使用它，使用逗号和不使用它。没什么帮助，fancybox 以相同的宽度和高度出现。

问题是什么？

PS`jquery-1.8.2.min.js`和`jquery.fancybox.pack.js`（2 到 3 周前下载）如果是这样的话。

**刚刚添加：**此外，没有额外的宽度可以应用于其他 css 或 jquery 代码的花哨的盒子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T17:42:48.877

如果您使用的是[fancybox v2.x ，那么 API 选项是新的，并且与之前的](http://fancyapps.com/fancybox/)[1.3.x](http://fancybox.net/)版本不兼容

所以对于fancybox v2.x，该`autoDimensions`选项不存在，但`autoSize`应该被使用。另一方面，如果您的视口（屏幕尺寸）小于您在 fancybox 中想要的尺寸，则内容将被缩放以适应视口。如果要强制大小，则必须设置`fitToView: false`.

**注意**：这仅对`ajax`、`html`和内容`inline`有效。`iframe`图像将始终按比例打开以适合视口或原始大小……您无法通过`width`或`height`API 选项操作图像的大小。

**所以你的v2.x**脚本应该是

```
$("a.loader").fancybox({
    width: 1000,
    height: 1050,
    autoSize : false,
    fitToView : false,
    maxWidth : '100%' // I don't think you need this
}); 
```

... 仅适用于 ajax、html、内联和 iframe 内容，不适用于图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:49:59.107

```
$("a.loader").fancybox({
    'width': 1000,
    'height': 1050,
    'autoDimensions': false,
    'maxWidth' : '100%'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:14:47.043

FancyBox 的文档使用这样的引号：

```
$("a.loader").fancybox({
    'width': 1000,
    'height': 1050,
    'autoDimensions': false,
    'maxWidth' : '100%'
}); 
```

我也以这种方式使用它并且它有效。但我不确定，这是否是问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T11:27:04.470

我以这种方式使用代码，它对我有用

```
$("a.loader").fancybox({   
    maxWidth: 1000,
    minHeight: 1050,
    autoDimensions: false,
    width: '70%',
    height: '70%'
}); 
```

# css - 在 ExtJs 的 ComboBox 中为 selectedItem 自定义 CSS

> ID：13540585
> 
> 赞同：0
> 
> 时间：2012-11-24T11:03:46.003
> 
> 标签：css, extjs, combobox, selecteditem

如何为 ComboBox 中的选定项目自定义 CSS？通过“listConfig”方法传递“selectedItemCls”不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:32:39.707

您必须重载 .x-boundlist-selected 类。例如，如果您希望选定的值以粗体显示，您可以执行以下操作：

```
.x-boundlist-selected {
    font-weight: bold;
    background-color: red;
}​ 
```

看看这个工作示例：http: [//jsfiddle.net/lontivero/P9awz/1/](http://jsfiddle.net/lontivero/P9awz/1/)

更新：

selectedItemCls 不起作用，因为鉴于它是在 InitComponent 方法中分配的，因此无法更改其值：

```
me.selectedItemCls = baseCls + '-selected'; 
```

然后，改变它的唯一方法是为 baseCls 提供一个值。但是如果你这样做，你将需要创建组合框使用的所有 css 类家族。

看看这个工作（甚至未完成）的例子：http: [//jsfiddle.net/P9awz/3/](http://jsfiddle.net/P9awz/3/)

这可以按您的意愿工作，但样式尚未完成。

祝你好运。

# visual-studio-2012 - 如何使用“Ctrl+Click”在 vs2012 和 c++ 项目中添加“goto 定义”

> ID：13540586
> 
> 赞同：1
> 
> 时间：2012-11-24T11:04:25.453
> 
> 标签：visual-studio-2012, visual-assist-x

我的 .c 文件中确实有这样的代码：

```
#define CHECK_FAIL(f) \
{ \
    uint32_t res = f; \
    if (res != CG_ERR_OK) \
    { \
        log_info("Client gate error: %x", res); \
        exit(1); \
    } \
} 
....

CHECK_FAIL(env_open(ini_string)); 
```

我安装了 VS2012 + VisualAssistX。但是，当我“Ctrl+Click”时，“CHECK_FAIL”没有任何反应。但我希望 VS 去定义，怎么做？

VisualAssistX 中有“Alt + G”快捷方式，但我真的很想通过鼠标（使用 Ctrl+Click）来实现，而在 VS 中我无法将鼠标指定为快捷方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T05:57:20.120

在`Advanced | General`页面上的 Visual Assist X 选项对话框中，您可以选中“在文本编辑器中按 Ctrl+左键单击执行 Goto”以调用与 Alt+G 键绑定相同的命令。

# iphone - 在xcode中将字节数组转换为图像？

> ID：13540594
> 
> 赞同：0
> 
> 时间：2012-11-24T11:05:27.580
> 
> 标签：iphone, xcode, uiimage

我在对象中得到一个字节数组（我认为）`NSMutableArray's`。`NSMutableArray`我得到的是从`Xml`服务 URL 解析..现在我需要将该字节数组转换为`UIImage`..通过 google 并找到转换为`NSData`然后`UIImage`但不能怎么理解..？我该怎么做 ？

我的数组看起来像这样：

```
(
{
        Name = "John";
        Image = "/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJS
kcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gODAK/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXF
BYWGh0lHxobIxwWFiAsICMmJykqKRkfLTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo/8AAEQgEKwZAAwEiAAIRAQMRAf/........
 //big byte array 
}
) 
```

首先我需要清楚它是否是一个字节数组？如何从中提取图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T11:16:09.243

您的数据是这样组织的：

*   最外面的数据结构是`NSArray`或`NSMutableArray`（如您所写）。
*   在索引 0（数组中的第一个元素）处，有一个`NSDictionary`实例。
*   在字典中，有两个键值对。一个具有键*Image*和一个字符串作为值。
*   字符串值是二进制数据，编码为 Base64。
*   二进制数据是图像数据。

所以获取图像，你需要走这条路：

```
NSMutableArray* array = ... // from XML
NSDictionary* dict = [array objectAtIndex: 0];
NSString* dataString = [dict objectForKey: @"Image"];
NSData* imageData = [dataString base64DecodedData];
UIImage* image = [UIImage imageWithData: imageData]; 
```

请注意，Base64 解码不是 iOS 的一部分。但是网上有很多实现将字符串解码为数据。只是谷歌它。

可以在[GitHub 上](https://github.com/nicklockwood/Base64)找到一个看起来不错且简单的 Base64 实现。

# php - fget 向不同语言的浏览器显示不正确的输出

> ID：13540595
> 
> 赞同：1
> 
> 时间：2012-11-24T11:05:42.003
> 
> 标签：php, character-encoding, fgets

我正在使用 my_file.php 中`fgets`的内容从 my_file.php 文件中获取内容，该内容使用 cz 语言作为

```
"Overte svuj úcet"; 
```

但是在获取和`print_r`浏览器显示之后

```
"OvÄ›Å™te svÅ¯j ÃºÄet" 
```

但如果我回应“Overte svuj úcet”；浏览器显示正确的输出

```
"Overte svuj úcet"; 
```

实际上我想为不同的语言生成一个**csv**文件，虽然我设置`charset='utf-8'`但没有成功我也用谷歌搜索但没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:14:52.793

你所拥有的是一个简单的编码不匹配。数据在编码 A 中，但浏览器尝试将其读取为编码 B。`fgets`不对编码做任何事情，它只是从文件中读取原始字节，仅此而已。如果您也没有对数据进行转码，那么文本本身就没有问题。

这只会使浏览器无法正确解释数据。您应该始终做的是输出一个指定编码的 HTTP 标头：

```
header('Content-Type: text/html; charset=utf-8'); 
```

您还可以将 Web 服务器配置为默认输出此标头。您可能将 HTML`<meta>`标记设置为表示 UTF-8，但可能会在该标记之前输出数据。

无论哪种方式，请确保 HTTP 标头表示实际数据所在的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:34:30.583

好的，经过长时间的搜索，我找到了它，这解决了我的问题

[https://github.com/PHPOffice/PHPExcel/downloads](https://github.com/PHPOffice/PHPExcel/downloads)

# c# - 从一个基类和多个接口继承的类

> ID：13540599
> 
> 赞同：0
> 
> 时间：2012-11-24T11:06:38.130
> 
> 标签：c#

快速提问：在 C# 中，一个类可以实现一个基类和多个接口吗？

例如

```
public MyCar : CarBase, ICar, ISomething
{
   ...
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:08:45.623

是的，这很好，只要类和/或基类实现所有接口声明的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:09:16.567

是的，你可以这样做。

这是一篇好文章：

[http://msdn.microsoft.com/en-us/library/ms173149.aspx](http://msdn.microsoft.com/en-us/library/ms173149.aspx)

# matlab - guidata(hObject, 句柄); 为什么我们真的需要它？

> ID：13540600
> 
> 赞同：2
> 
> 时间：2012-11-24T11:06:46.387
> 
> 标签：matlab, matlab-guide

最近我一直在使用`Matlab GUI GUIDE`.

当我构建一个 GUI 时，每次我写一个`callback function`，我必须在函数的末尾添加这一行：`guidata(hObject, handles);`例如：

```
function someFunction_Callback(hObject, eventdata, handles)
.... %implementation
........
guidata(hObject, handles);  <------------ 
```

现在我想了解为什么每次我有一个与 GUI 相关的函数时都要添加这一行。

幕后究竟发生了什么？这个结构包含什么信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:07:04.173

使用 guidata 是在回调之间读取/存储用户数据的一种方法。我通常这样做

```
function reset_btn_tag_Callback(hObject, eventdata, handles)

data = get(handles.figure1, 'UserData');
data.state = -1; %change my data
% etc... 
set(handles.figure1, 'UserData',data);  %save it back before return 
```

除非您之前使用读取数据，否则`myData=guidata(object_handle)`没有任何意义`guidata(object_handle,myData)`

同样，`guidata`它只是一个 API，供您用于将数据读/写回图形内部，以便在回调之间存储在那里。如果在回调中不修改自己的数据，则无需使用它。我会把我的所有数据都放在一个变量中，`struct`因为`guidata`它只适用于一个变量。

因此，如果您不修改数据或句柄中的任何内容，如示例中所示，则无需使用它。

# algorithm - 具有 FP16 限制的 GLSL-ES 随机粒状噪声

> ID：13540603
> 
> 赞同：11
> 
> 时间：2012-11-24T11:07:05.977
> 
> 标签：algorithm, random, shader, 16-bit, glsles

我正在尝试编写一个具有严格**FP16**限制的紧凑而简单的噪声函数。**到目前为止，这是我得出的结论，但我认为在操作的某个地方，对于fract**或**sin**来说，数字太小了，因为在 GPU 中我必须写这个，因为这些都在**FP16**限制之内。关于我做错了什么的任何想法？顺便说一句，我不能使用时间变量，也不能采样噪声纹理。我需要正确的功能必须紧凑、小巧且自给自足，并产生简单的颗粒状噪声效果。注意：下一个算法在任何桌面 GPU 卡上都可以正常工作，但在“ **MALI 400 MP** ”GPU 上完全失败，因为这个算法对浮点值有 FP16 限制。

```
vec3 noise(vec3 color)
{
    float variation = length(color);
    float dot_product = dot(variation, -0.577350269);
    float sin_result = sin(dot_product) * 1.19245;
    float random = fract(sin_result);
    return color + vec3(random);
} 
```

如果有人可以为**GLSL-ES**推荐任何其他随机函数，但严格限制**FP16**，那也很好。我知道其他随机实现，例如单纯形噪声，但这些对于我需要做的事情来说太大而且太慢了。所以**Perlin**和**Simplex**噪声算法不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T21:37:48.590

这些是我使用的，但我不知道是否适用于 FP16 限制：

```
// source: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co)
{
      highp float a = 12.9898;
      highp float b = 78.233;
      highp float c = 43758.5453;
      highp float dt= dot(co.xy ,vec2(a,b));
      highp float sn= mod(dt,3.14);
      return fract(sin(sn) * c);
}

 float rand2(vec2 co)
{
      return fract(sin(dot(co.xy,vec2(12.9898,78.233))) * 43758.5453);
} 
```

我没有创造这些。原作者的链接在上面。我实际上使用了 rand2 并且没有在那个博客上提到这个问题。要制作灰度噪音，请执行以下操作：

```
float randColor = rand(v_position);
gl_FragColor = vec4(randColor); 
```

要制作全彩色噪点，需要 3 倍的时间，你会这样做：

```
gl_FragColor = vec4(rand(v_position), rand(v_position), rand(v_position), 1.0); 
```

要为您正在绘制的任何内容添加噪音，您可以：

```
float randColor = rand(v_position) * .1;  // to add 10% noise
gl_FragColor = vec4(gl_FragColor.r + randColor, gl_FragColor.g + randColor, gl_FragColor.b + randColor, 1.0); 
```

顺便说一句，这很慢。在 iPhone5 上，这可以正常工作，没有明显的减速。但在 4S 上，它的 fps 下降到 30。如果我去掉添加的噪音，它会提高到 60。所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T14:35:41.820

散列函数就足够了吗？[Pearson 散列](http://en.wikipedia.org/wiki/Pearson_hashing)在过去是为 8 位寄存器设计的，并且非常简单：您硬编码一个 256 字节的查找表（或者，如果这是不可能的，则可以使用某种简单但非线性的排列），我们'将调用 T。对于输入的每个字节，您将它与到目前为止的散列进行异或，然后查找该值以获得新的散列。

在您的情况下，让 R、G 和 B 成为您的输入字节。那么哈希可能是

*   R噪声 = T[R^T[G^T[B]]]
*   噪声 = T[G^T[B^T[R]]]
*   B噪声 = T[B^T[R^T[G]]]

E：需要明确的是，这不会产生随机输出，因为您的输入没有随机性。但我认为它模仿了你的代码试图做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T08:30:26.917

虽然这是一个老问题，但我最终很久以前就找到了解决方案。接下来是脚本，以便任何人都可以使用它。作为种子，您应该传递一个动态或随机值，您可以将其作为属性传递给着色器。

```
float getNoise(vec2 seed)
{
    vec2 theta_factor_a = vec2(0.9898, 0.233);
    vec2 theta_factor_b = vec2(12.0, 78.0);

    float theta_a = dot(seed.xy, theta_factor_a);
    float theta_b = dot(seed.xy, theta_factor_b);
    float theta_c = dot(seed.yx, theta_factor_a);
    float theta_d = dot(seed.yx, theta_factor_b);

    float value = cos(theta_a) * sin(theta_b) + sin(theta_c) * cos(theta_d);
    float temp = mod(197.0 * value, 1.0) + value;
    float part_a = mod(220.0 * temp, 1.0) + temp;
    float part_b = value * 0.5453;
    float part_c = cos(theta_a + theta_b) * 0.43758;

    return fract(part_a + part_b + part_c);
} 
```

# jquery-ui - jQueryUI 模态导致高度增加

> ID：13540605
> 
> 赞同：0
> 
> 时间：2012-11-24T11:07:22.467
> 
> 标签：jquery-ui, modal-dialog

为什么当模式处于活动状态时页面的高度会增加，导致它在页面上显示较低（至少在 Firefox 中）？谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:38:54.500

默认的相对定位会增加高度。将对话框的位置设置为绝对位置将正确定位它。

# ios - Base64Transcoder.m 重复符号

> ID：13540610
> 
> 赞同：1
> 
> 时间：2012-11-24T11:08:26.867
> 
> 标签：ios, xcode

我想使用 SKPSMTPMessage 库。唯一的问题是这个库包含文件 Base64Transcoder.m，因为我有 Dropbox SDK，所以它给出了重复的错误。我该如何解决这个错误？我不能只删除 Base64Transcoder.m 文件，因为它正在导入到 SKPSMTPMessage 库中。

谢谢你的帮助

# java - 这段代码有什么问题？

> ID：13540613
> 
> 赞同：-3
> 
> 时间：2012-11-24T11:08:37.823
> 
> 标签：java, swing, exception, jtable

我正在`JTable`使用以下代码保存内容：

```
@override
public void editingStopped(ChangeEvent ce) {

    PreparedStatement pstmt = null;
    try {
        int row = getEditingRow();
        int column = getEditingColumn();
        DefaultStyledDocument doc = (DefaultStyledDocument) getCellEditor().getCellEditorValue();

        doc.setDocumentFilter(null);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(bos);
        oos.writeObject((DefaultStyledDocument) doc);
        oos.flush();

        byte[] data = bos.toByteArray();

        oos.close();
        bos.close();

        String query = "update BOX_ROWS "
                    + "set COLUMN1= ? "
                    + "where BOX_ID=" + ID
                    + " and INDEX=" + row;
        pstmt = ReseachAssistantUI.conn.prepareStatement(query);
        pstmt.setObject(1, data);

        pstmt.executeUpdate();
        doc.setDocumentFilter(new MyDocumentFilter());

    } catch (SQLException ex) {
        Logger.getLogger(MyTable.class.getName()).log(Level.SEVERE, ex.getMessage(), ex);
        JOptionPane.showMessageDialog(null, "MyTable - " + ex.getMessage());
    } catch (IOException ex) {
        Logger.getLogger(MyTable.class.getName()).log(Level.SEVERE, ex.getMessage(), ex);
        JOptionPane.showMessageDialog(null, "MyTable - " + ex.getMessage());
    } finally {
        DBUtil.closePreparedStatement(pstmt, MyTable.class.getName());
    }

    super.editingStopped(ce);
} 
```

*它在Windows*上运行良好。*但是，当我在Mac OS X*上运行我的应用程序时，会出现以下消息：

`MyTable - com.apple.laf.AquaComboBoxUI`

表格弹出编辑器在工具栏上确实有 2 个组合框，但我看不出它们与这个异常有什么关系。有谁知道它为什么会抛出这个异常？我序列化对象的方式有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:09:59.387

看起来您正试图在编辑结束*后但**在*模型更新之前保留已更改单元格的内容；这个[答案](https://stackoverflow.com/a/10067560/230513)概述了事件的正常顺序。如您所见，实际的编辑器组件可能因平台而异。而不是覆盖`JTable#editingStopped()`，覆盖`TableModel#setValueAt()`，您*知道*更新单元格的行、列和类型。可以在[此处](https://stackoverflow.com/a/7920159/230513)和[此处](https://stackoverflow.com/a/10263356/230513)找到示例。此相关[示例](https://stackoverflow.com/a/7356518/230513)说明了将 a`JComboBox`用作`CellEditor`.

# vb.net - 如何遍历 TabControl (vb.net) 中的 Grid 行？

> ID：13540614
> 
> 赞同：0
> 
> 时间：2012-11-24T11:08:41.447
> 
> 标签：vb.net, datagridview, tabcontrol

我有一个标签控件，它有许多标签，每个标签页都添加了一个网格。当我单击另存为按钮时，我希望程序遍历每个选项卡上的网格并将数据保存为类似 XML 的格式。

该文件应如下所示：

```
<GridTabPage1>
<Row1> A, B, C ... </Row1>
</GridTabPage1> 
```

我目前正在尝试但它不起作用的是：

```
For Each row As DataGridView In TabControl.SelectedTab.Controls(Grid.Rows)
...
Next 
```

谁能指出我正确的方向？

我希望我对问题的解释不会令人困惑。如果您需要澄清，请告诉我。

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:13:50.780

```
Using xw As New XmlTextWriter("C:\test.xml", System.Text.Encoding.Default)
        xw.Formatting = Formatting.Indented
        xw.WriteStartDocument()
        xw.WriteStartElement("grids")
        For Each tp As TabPage In Me.TabControl1.Controls.OfType(Of TabPage)()
            For Each dgv As DataGridView In tp.Controls.OfType(Of DataGridView)()
                xw.WriteStartElement("DataGrid")
                For Each row As DataGridViewRow In dgv.Rows
                    xw.WriteStartElement("row")
                    For Each cell As DataGridViewCell In row.Cells
                        xw.WriteElementString("cell", cell.Value)
                    Next
                    xw.WriteEndElement()
                Next
                xw.WriteEndElement()
            Next
        Next
        xw.WriteEndElement()
        xw.WriteEndDocument()

    End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:33:05.563

尝试这样的事情：

```
For Each tp As TabPage In TabControl1.TabPages
  For Each dgv As DataGridView In tp.Controls.OfType(Of DataGridView)()

  Next
Next 
```

它循环遍历所有 TabPage，对于每个 TabPage，它将找到该页面上的任何 DataGridView 控件。

# c# - 通过 C# Socket 发送 WebSocket 消息

> ID：13540621
> 
> 赞同：3
> 
> 时间：2012-11-24T11:09:03.853
> 
> 标签：c#, sockets, websocket

我正在查看[创建“Hello World”WebSocket 示例](https://stackoverflow.com/questions/10200910/create-hello-wold-websocket-example?lq=1)并开始尝试对其进行调整以通过在控制台输入的 WebSocket 发送自定义消息，但我在理解代码时遇到了一些问题。

我的问题是对我自己的消息进行编码以便可以根据我上面链接的答案正确发送的正确方法是什么

```
client.Send(my-own-message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:05:51.847

所以首先`Console.Read()`只读取一个字符并返回代表这个字符的 int。

如果您想发送一条消息，您可能希望使用`Console.ReadLine()`它返回一个字符串。

```
string msg = Console.ReadLine();
client.Send(GetBytes(msg));

static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

如果包含仪表：

```
byte[] ascii = System.Text.Encoding.ASCII.GetBytes (msg);
byte[] utf8 = System.Text.Encoding.UTF8.GetBytes (msg); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:53:58.327

你真的应该[去源头](https://www.rfc-editor.org/rfc/rfc6455)。Websocket 规范实际上非常易于阅读，它准确地告诉您应该如何格式化您的消息。

但简而言之，假设您已经完成了建立连接的初始握手，以下是 Websocket 框架应包含的数据：

*   `0x81`一个操作码，如果消息被格式化为 UTF-8 文本，并且`0x82`消息是二进制数据（请注意，一些浏览器不支持后者） ，则为带有值的单个字节
*   一个或多个字节的长度字段，描述消息的长度。必须在客户端发送的消息上设置第一个字节的最高有效位（它表示有效负载被屏蔽，必须在客户端到服务器的消息上进行，并且*不能*在服务器到客户端的消息上进行）。长度字段可以具有可变长度：如果长度低于 126 字节，则将其简单地编码为单个字节（保留最高有效位以指示屏蔽，如前所述）。如果长度小于 65KB，则第一个字节的 7 个可用位取值 126，随后两个字节包含长度为 16 位整数。否则，第一个字节的 7 位取值 127，随后的 8 个字节包含长度为 64 位整数。
*   一个 4 字节的掩码密钥，必须为每条消息随机选择
*   最后，您要发送的实际消息。这必须使用掩码键进行掩码，只需将每个字节与掩码键的一个字节进行异或运算即可。（`i`消息的字节应该与`i%4`掩码键的第 th 字节一起异或）。

这样做，您就创建了一个有效的 websocket 框架，其中包含 UTF8 文本或原始二进制数据。如您所见，其中涉及几个步骤，但每个步骤都相对简单。（再一次，请检查我链接到的 RFC，因为我只是从内存中写了所有这些，所以可能会有一些不准确的地方）

# matlab - 并行for循环matlab

> ID：13540624
> 
> 赞同：1
> 
> 时间：2012-11-24T11:09:27.643
> 
> 标签：matlab, parallel-processing

嗨，这是我第一次想使用 matlab 的并行工具箱。我有这个循环

```
for y=1:size(pxyvector,1)
    if (strcmp(pxyvector{y,1}, emotionword))&&(strcmp(pxyvector{y,2},tweet{x}))
          pxyvector{y,3} = pxyvector{y,3} +1;
          invector = true;
    end
end 
```

我将如何去并行地进行这项工作`for`。我阅读了 matlab 的切片变量部分，但我不知道如何在这里做到这一点。

`pxyvector`是一个 100000x3 单元阵列

`tweet{x}`是一个字符串

`emotionword`也是一个字符串。

`invector`是稍后在循环外使用的值。

所以基本上我将 pxyvector 的一行中的第一个值与情感词进行比较，并将 to 的一行中的第二个值`pxyvector`进行比较`tweet{x}`。如果他们是一样的。行中的第三个值递增。

在循环期间，相同的值不能增加两次。

这个 for 循环中的问题是我也需要更改在循环外使用的变量并增加一个值。

一些数据可以玩：[http](http://ojtwist.be/pxyvector.mat) ://ojtwist.be/pxyvector.mat（这个.mat文件中的变量是pxyvector2，所以如果你想测试它，请在代码中更改它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:15:50.890

我想这里的问题是 matlab 没有将单元矩阵作为普通矩阵处理（实际上 a{1,:} 的行为不像你预期的那样）。

AFAIK，要使用`parfor`您需要不同的数据组织，特别是作为`Nx1` `cell`元素`3x1` `cell`。

例如，以下作品

```
tot = size(pxyvector,1)
%%%%// just to reshape data correctly
pxvector_a = pxyvector;
pxyvector = cell(1,tot);
for i = 1:tot
   pxyvector{i} = {pxvector_a{i,1} pxvector_a{i,2} pxvector_a{i,3}};    
end
%%%%

 parfor y=1:tot
    if (strcmp(pxyvector{y}{1}, 'almost'))&&(strcmp(pxyvector{y}{2},'that'))
          pxyvector{y}{3} = pxyvector{y}{3} +1;
          invector = true;
    end
end 
```

您仍然可以使用`smpd`，但是您当前的数据组织将使创建适当的分布式数组变得困难。

# java - Java 默认使用 HttpsURLConnection 信任哪些证书？

> ID：13540625
> 
> 赞同：0
> 
> 时间：2012-11-24T11:09:28.063
> 
> 标签：java, https

如果我`HttpsURLConnection`通过打开与[https://www.google.com/](https://www.google.com/)`java.net.URL`的连接来打开 a，Java 如何决定是否信任证书链？

是否有某种默认值硬编码到 API 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:41:32.380

出于开发目的，您可以将自签名证书添加到 Java 受信任的 X509 证书存储库，例如：

```
cd PathToJRE/lib/security 

sudo keytool -import -keystore cacerts -alias anAlias -file aCertificat
```

默认密码是changeIt

但不推荐用于生产，您会遇到错误定义证书等错误。您可以创建一些实用程序类来处理 TrustManager 和 HostnameVerifier

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:17:11.190

有一个带有 Java 安装的*Truststore 。*您可以使用 Oracle 的*keytool*查询已安装的证书（我认为密码为空，或“changeit”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:17:12.747

JRE 的安全文件夹中有一个文件 cacert，其中包含默认证书

# javascript - 在客户端通过 javascript 或 Jquery 解析 Json 数据

> ID：13540629
> 
> 赞同：0
> 
> 时间：2012-11-24T11:10:23.757
> 
> 标签：javascript, jquery, json

我想在客户端解析数据，序列化后我将数据保存在输入字段中。

```
JavaScriptSerializer objJavaScriptSerializer = new JavaScriptSerializer();
string jsonString = objJavaScriptSerializer.Serialize(_statusVal);
jsonFmtStatusValue.Value = jsonString; 
```

**在客户端当我看到存储在输入字段中的数据字符串时，它就像这样**

```
[
    {
        "nodeContentId": "1234_5678",
        "statusTypeId": "5678",
        "statusName": "Submitted by Customer",
        "dateTime": "/Date(1352745000000)/",
        "forceEmail": "on",
        "user": {
            "userId": "0",
            "userName": "admin"
        },
        "note": {
            "typeName": null,
            "dataValue": null
        }
    },
    {
        "nodeContentId": "1234_5678",
        "statusTypeId": "5678",
        "statusName": "Checked, Printed, Folded & Re-checked",
        "dateTime": "/Date(1353402060000)/",
        "forceEmail": "on",
        "user": {
            "userId": "0",
            "userName": "admin"
        },
        "note": {
            "typeName": null,
            "dataValue": null
        }
    }
] 
```

我试图解析 Json 数据的代码是：

```
 var JsonData = $("#<%=jsonFmtStatusValue.ClientID %>").val();
    obj = jQuery.parseJSON(JsonData)
    alert(obj.nodeContentId); 
```

我在警报框中得到的东西： **取消定义**

无法弄清楚我应该使用什么来解析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:12:02.957

*（注意：我假设`jsonFmtStatusValue`最终是一个`input`或`textarea`在页面上。）*

在您的`alert(obj.nodeContentId);`,`obj`是*数组，而不是数组**中*的对象。您最外层的 JSON 实体是一个数组，其中包含对象。

你可以看到第*一个* `nodeContentId`是这样的：

```
alert(obj[0].nodeContentId); 
```

...当然，其他人在随后的索引中，例如：

```
var obj = jQuery.parseJSON(JsonData);
var n;
for (n = 0; n < obj.length; ++n) {
    alert("obj[" + n + "].nodeContentId = " + obj[n].nodeContentId);
} 
```

# android - 针对 Android 手机默认 SMS 应用程序中以编程方式发送的 SMS 保存送达报告

> ID：13540633
> 
> 赞同：2
> 
> 时间：2012-11-24T11:10:35.503
> 
> 标签：android, sms, android-pendingintent

我编写了一个使用 SmsManager 以编程方式发送 SMS 的应用程序。我正在为已发送的短信和已发送的短信通知传递 PendingIntent。

当收到发送的 PendingIntent 时，我将该 SMS 保存在默认 SMS 应用程序的 Sent 文件夹中。

稍后，当接收到发送的 PendingIntent 时，我想用发送报告标记那个 Sent SMS 条目，这样当用户按住发送的 SMS 时，他可以看到菜单选项“查看报告”。

我的问题是如何以编程方式修改默认 SMS 应用程序中的 Sent SMS 条目，并将 Delivery Report 与其关联？如果这不可能，我如何以编程方式修改已发送 SMS 条目并将传递状态写入 SMS 消息本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:15:23.933

我在将 SMS 保存在已发送文件夹中时使用了 UUID。后来，我用那个 UUID 来查找发送的短信，并修改它以插入单词“DELIVERED”。虽然这不会将发送报告本身附加到发送的短信中，但它的目的是通知用户短信是否已发送。欢迎任何附加交付报告本身的解决方案。

# objective-c - Three20 在 iOS6 中自动旋转

> ID：13540634
> 
> 赞同：0
> 
> 时间：2012-11-24T11:10:52.587
> 
> 标签：objective-c, ios6, three20, autorotate, ttnavigator

我尝试在 iOS6 中进行自动旋转工作。我已经阅读过它，问题是我无法为窗口设置 rootviewcontroller。我已经尝试过：
`self.window.rootViewController = [[TTNavigator navigator] rootViewController];`
但是应用程序因无法识别的选择器而崩溃...
在 iOS5 中，自动旋转与该`shouldAutorotateToInterfaceOrientation`方法配合得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:44:21.453

尝试以下操作：

[[[UIApplication sharedApplication] keyWindow] setRootViewController:[[TTNavigator navigator] rootViewController]];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:05:18.593

iOS6 更改了自动旋转。是的，在您使用的 iOS5 中`shouldAutorotateToInterfaceOrientation`。您仍然需要它来支持 iOS5，但要支持 iOS6，请使用下面的新方法。

我想这就是你所追求的。

```
#pragma mark - View Orientation
-(NSUInteger)supportedInterfaceOrientations {
// For iOS6

NSUInteger orientation = 0;

orientation |= UIInterfaceOrientationMaskPortrait;
orientation |= UIInterfaceOrientationMaskPortraitUpsideDown;
orientation |= UIInterfaceOrientationMaskLandscapeLeft;
orientation |= UIInterfaceOrientationMaskLandscapeRight;

return orientation;
} 
```

然后注释掉，或删除您不想支持的行。您可以在一行上按位“或”返回所需的方向。还有另外两个可用：

`UIInterfaceOrientationMaskAll`和`UIInterfaceOrientationMaskAllButUpsideDown`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T14:47:12.653

本教程对我有用：[http](http://www.goodnewtiger.com/llf/cegeek/?p=61)
://www.goodnewtiger.com/llf/cegeek/? p=61 我必须更改 TTNavigationController 并在应用程序委托中设置视图控制器。

# google-chrome-extension - 是否可以在网页的任何脚本运行之前使用 chrome 扩展程序在网页的上下文中运行脚本？

> ID：13540636
> 
> 赞同：3
> 
> 时间：2012-11-24T11:11:19.650
> 
> 标签：google-chrome-extension, content-script

我试过`"run_at": "document_start"`了，但是当扩展获得控制权时没有 DOM，所以我无法`script`插入`head`. 此外，尝试使用`DOMNodeInserted`，但它没有被解雇`head`。如果我尝试插入第`script`一个`DOMNodeInserted`事件，它会在网页脚本之后执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:58:42.563

根元素始终存在。您可以将 附加`<script>`到`<html>`元素：

```
var s = document.createElement('script');
s.textContent = 'console.log("Test");';
document.documentElement.appendChild(s);
s.parentNode.removeChild(s); // Just to clean-up. 
```

# apache - 如何在 Zend Server CE 中重新启动 Apache？

> ID：13540641
> 
> 赞同：0
> 
> 时间：2012-11-24T11:12:05.220
> 
> 标签：apache, zend-server

> **可能重复：**
> [如何在 zend 服务器中重新启动 apache](https://stackoverflow.com/questions/13374424/how-to-restart-apache-in-zend-server)

我在 Windows 7 中安装了 Zend Server。我对 http-vhost 文件进行了一些更改。如何在 Zend Server CE 中重新启动 Apache？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:40:33.703

我可以通过 Apache Monitor 重新启动 Apache。

# html - HTML5 音频 addEventListener

> ID：13540646
> 
> 赞同：2
> 
> 时间：2012-11-24T11:12:53.983
> 
> 标签：html, audio, addeventlistener

有人可以知道在哪里可以找到 HTML5 音频的事件侦听器列表吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T11:16:43.250

[您可以在此处的](http://www.w3schools.com/tags/ref_eventattributes.asp)**媒体活动** 下列出的 w3school 网站上找到它们！下次尝试用谷歌搜索这些东西。它比用简单的搜索就能完成的问题使社区变得混乱要容易得多。

要将事件侦听器添加到音频元素只需简单地执行此操作

```
var audio = document.createElement("audio");
audio.src = "audio/sample.mp3";
audio.addEventListener("canplaythrough", function () {
 alert('The file is loaded and ready to play!');
}, false); 
```

而不是`canplaythrough`你可以使用我在上面从 W3 发布的所有媒体事件。

# android - 如何在 Android 4.0 的 HTML5VFullScreen$SurfaceVideoView 中获取 HTML5 视频 URI？

> ID：13540654
> 
> 赞同：8
> 
> 时间：2012-11-24T11:14:22.957
> 
> 标签：android, html, video, uri, surfaceview

当用户单击视频控制栏中的全屏按钮时，我正在尝试获取 HTML5 视频 URI。据此，Android 4.0[中](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/webkit/HTML5VideoFullScreen.java)的 HTML5 视频视图是 SurfaceView，而不是 VideoView。

有人可以告诉我如何在 SurfaceVideoView 中获取 URI 吗？这是我的代码。非常感谢。

```
webView.setWebChromeClient(new WebChromeClient(){
  @Override
  public void onShowCustomView(View view, CustomViewCallback callback) {
    super.onShowCustomView(view, callback);
    if (view instanceof FrameLayout){
      final FrameLayout frame = (FrameLayout) view;
      if (frame.getFocusedChild() instanceof SurfaceView){
        SurfaceView video= (SurfaceView) frame.getFocusedChild();
      }
    }
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:39:34.550

很简单，使用**反射**。把它放在`onShowCustomView()`方法里面：

```
android.net.Uri mUri = null;

try
{
    @SuppressWarnings("rawtypes")
    Class _VideoSurfaceView_Class_ = Class.forName("android.webkit.HTML5VideoFullScreen$VideoSurfaceView");

    java.lang.reflect.Field _HTML5VideoFullScreen_Field_ = _VideoSurfaceView_Class_.getDeclaredField("this$0");

    _HTML5VideoFullScreen_Field_.setAccessible(true);

    Object _HTML5VideoFullScreen_Instance_ = _HTML5VideoFullScreen_Field_.get(((FrameLayout) view).getFocusedChild());

    @SuppressWarnings("rawtypes")
    Class _HTML5VideoView_Class_ = _HTML5VideoFullScreen_Field_.getType().getSuperclass();

    java.lang.reflect.Field _mUri_Field_ = _HTML5VideoView_Class_.getDeclaredField("mUri");

    _mUri_Field_.setAccessible(true);

    mUri =  (Uri) _mUri_Field_.get(_HTML5VideoFullScreen_Instance_);
}
catch (Exception ex)
{   
}

if (mUri != null)
{
    // There you have, mUri is the URI of the video
} 
```

# android - 当我们尝试在 Android 中的提交按钮上捕获选定的复选框 id 时，应用程序抛出空指针异常

> ID：13540655
> 
> 赞同：0
> 
> 时间：2012-11-24T11:14:35.647
> 
> 标签：android

我有一个网格布局，屏幕顶部有一个 EditText 字段。我正在实现基本适配器来填充网格布局的值。

我正在使用的代码如下。我的主要活动

```
public class MainActivityDynamic extends Activity{

GridView gridView;
GridObject[] planets;
ArrayList<GridObject> myObjects;
Button Go;
ImageAdapter adapter;
int position;
boolean[] itemChecked;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridlayout);
    Go = (Button)findViewById(R.id.bGO);
    gridView = (GridView) findViewById(R.id.gV); 
    String[] primarycontext =  {"first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","leventh","twelth","thirteenth","fouteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twenteth","twentyfirst","twentysecond", "twentythird","twentythird","twentyfouth"};

    gridView.setAdapter(new ImageAdapter(this, primarycontext));
    gridView.setOnItemClickListener(new GridView.OnItemClickListener(){

        public void onItemClick(AdapterView<?> arg0, View v, int position,
                long id) {
            // TODO Auto-generated method stub
            //myObjects.get(position).setState(1);
            //myAdapter.notifyDataSetChanged();

            Toast.makeText(getBaseContext(), "clicked on "+position, Toast.LENGTH_SHORT).show();
        }

    });

    Go.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            //adapter.notifyDataSetChanged();
            int len = 10;
            int cnt = 0;
            String selectImages = "";
            for (int i = 0;i<len; i++){
                if (adapter.itemChecked[i]){
                    cnt++;
                }
            }
            if(cnt == 0){
                Toast.makeText(getBaseContext(), "please select atleast one", Toast.LENGTH_SHORT).show();
            }else
            {
                Toast.makeText(getBaseContext(), "you have selected" + cnt + "boxes", Toast.LENGTH_SHORT).show();
            }
            String item = (String) adapter.getItem(position);
            Toast.makeText(getBaseContext(), "selected fields"+item, Toast.LENGTH_SHORT).show();
        }
    });
    }

}

public class ImageAdapter extends BaseAdapter
{
    Context mContext;
    public ImageAdapter(Context c,String[] primarycontext)
    {
        mContext = c;
    this.primarycontext = primarycontext;
    }
    @Override
    public int getCount() 
    {
        // TODO Auto-generated method stub
        return providers.length;
    }
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return primarycontext[position];
}
    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        // TODO Auto-generated method stub
        View v;
    if(convertView==null){
    LayoutInflater li = (LayoutInflater) mContext
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = new View(mContext);
    v = li.inflate(R.layout.icon, null);
    }
    else
    {
     v = convertView;  
         }
        ImageView iv = (ImageView)v.findViewById(R.id.grid_item_image);
    iv.setImageResource(R.drawable.folder_0);
    CheckBox CBx = (CheckBox)v.findViewById(R.id.cBIon);
    CBx.setText(primarycontext[position]);
        CBx.setChecked(isItemChecked(position));   
        return v;
    }
private boolean isItemChecked(int position) {
    // TODO Auto-generated method stub
    System.out.println("the returning items="+itemChecked);
    return itemChecked;
}
}
} 
```

在主布局中，我有一个网格视图，上面有一个带有文本和图像的复选框。我有一个 Submit(Go) 按钮，单击该按钮应捕获在主要活动中选中的复选框的所有名称。我怎样才能做到这一点？当我运行此代码并单击 Go 时，应用程序崩溃并返回空指针异常。

错误

```
11-25 05:43:50.390: E/AndroidRuntime(519): FATAL EXCEPTION: main
11-25 05:43:50.390: E/AndroidRuntime(519): java.lang.NullPointerException
11-25 05:43:50.390: E/AndroidRuntime(519):  at com.example.kam1.MainActivityDynamic$2.onClick(MainActivityDynamic.java:73)
11-25 05:43:50.390: E/AndroidRuntime(519):  at android.view.View.performClick(View.java:2408)
11-25 05:43:50.390: E/AndroidRuntime(519):  at android.view.View$PerformClick.run(View.java:8816)
11-25 05:43:50.390: E/AndroidRuntime(519):  at android.os.Handler.handleCallback(Handler.java:587) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:28:41.703

我没有看到您`adapter`在任何地方初始化变量。替换这个：

```
gridView.setAdapter(new ImageAdapter(this, primarycontext)); 
```

和

```
adapter = new ImageAdapter(this, primarycontext);
gridView.setAdapter( adapter ); 
```

也不要使用`getBaseContext()`。你应该`MainActivityDynamic.this`改用。

And it looks you use Toast for debug purposes - I'd suggest to switch to `Log` ([see docs](http://developer.android.com/reference/android/util/Log.html))

# c# - 如何通过编程调整流文档中段落之间的间距

> ID：13540656
> 
> 赞同：8
> 
> 时间：2012-11-24T11:14:36.517
> 
> 标签：c#, wpf, flowdocument

我是 C# Wpf 的初学者，我想通过编程制作一个带有少量段落的流文档。问题是段落之间有很大的空间，我想将其调整到最小。

我通过使用 Xml 语句找到了解决方案，但我想通过编程来实现：

```
<FlowDocument>
  <FlowDocument.Resources>
    <!-- This style is used to set the margins for all paragraphs in the FlowDocument to 0\. -->
    <Style TargetType="{x:Type Paragraph}">
      <Setter Property="Margin" Value="0"/>
    </Style>
  </FlowDocument.Resources>

  <Paragraph>
    Spacing between paragraphs is caused by margins set on the paragraphs.  Two adjacent margins
    will "collapse" to the larger of the two margin widths, rather than doubling up.
  </Paragraph>

  <Paragraph>
    To eliminate extra spacing between two paragraphs, just set the paragraph margins to 0.
  </Paragraph>
</FlowDocument> 
```

我该怎么做 ？。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:22:23.070

尝试这个：

```
Style style = new Style(typeof(Paragraph));
style.Setters.Add(new Setter(Block.MarginProperty, new Thickness(0)));
myFlowDocument.Resources.Add(typeof(Paragraph), style); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-25T11:17:09.607

不需要“编程”。对我有用的`PagePadding`属性`FlowDocument`：

```
<FlowDocument PagePadding="0"> 
```

[PagePadding 的 MSDN 定义](https://msdn.microsoft.com/query/dev12.query?appId=Dev12IDEF1&l=EN-US&k=k(System.Windows.Documents.FlowDocument.PagePadding);k(vs.objectbrowser);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5)&rd=true)：

> 获取或设置一个值，该值指示页面边界和页面内容之间的填充空间的厚度。

# oracle - 表空间是否与用户帐户相关联？

> ID：13540660
> 
> 赞同：0
> 
> 时间：2012-11-24T11:14:59.630
> 
> 标签：oracle, tablespace

我有与表空间相关的非常基本的问题。

当我创建一个用户时，我被要求为这个帐户分配一个默认表空间。所以，我分配了一个以前创建的表空间（TABLESPACE1）。

如果我创建另一个用户并为该用户分配不同的表空间 (TABLESPACE2)，那么我将无法看到在 TABLESPACE1 中创建的表吗？

如果我创建一个可以访问两个表空间（TABLESPACE1 和 TABLESPACE2）的用户，那么对于该用户，还有另一个新数据库，但它实际上并不是新的。

有人可以帮我理解这里的表空间概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:19:39.883

表空间只是一个存储概念。它们对哪些用户可以看到哪些表没有任何作用。

您可以为用户设置默认表空间，并且可以允许（或不允许）他们在特定表空间中创建对象，但这与他们有权访问的表无关。

表（和一般的对象）访问由授权管理。表空间用于物理存储。两者本质上是无关的。

# sql - 为什么表上的 CONNECT BY LEVEL 会返回额外的行？

> ID：13540661
> 
> 赞同：14
> 
> 时间：2012-11-24T11:15:00.933
> 
> 标签：sql, oracle, connect-by

在表上执行时，使用 CONNECT BY LEVEL 似乎返回太多行。发生的事情背后的逻辑是什么？

假设下表：

```
create table a ( id number );

insert into a values (1);
insert into a values (2);
insert into a values (3); 
```

此查询返回 12 行 ( [SQL Fiddle](http://www.sqlfiddle.com/#!4/ddafb/1) )。

```
 select id, level as lvl
   from a
connect by level <= 2
  order by id, level 
```

表 A 中的每一行，LVL 列的值为 1，表 A 中 LVL 列为 2 的每一行，即：

```
身份证 | 层积层
--+-----
 1 | 1
 1 | 2
 1 | 2
 1 | 2
 2 | 1
 2 | 2
 2 | 2
 2 | 2
 3 | 1
 3 | 2
 3 | 2
 3 | 2

```

它相当于这个查询，它返回相同的结果。

```
 select id, level as lvl
   from dual
  cross join a
connect by level <= 2
  order by id, level 
```

我不明白为什么这些查询返回 12 行，或者为什么对于 ID 列的每个值，LVL 为 2 的行有 3 行，而 LVL 为 1 的行只有 1 行。

将“连接”的级别数增加到 3 会为每个 ID 值[返回 13 行。](http://www.sqlfiddle.com/#!4/ddafb/2)1，其中 LVL 为 1，3，其中 LVL 为 2，9，其中 LVL 为 3。这似乎表明返回的行数是表 A 中的行数的 LVL 值减去 1 的幂。

尽管这些查询与以下查询相同，但我会返回 6 行

```
select id, lvl
  from ( select level  as lvl
           from dual
        connect by level  <= 2
                )
 cross join a
 order by id, lvl 
```

对我来说，[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries003.htm)在解释应该发生的事情时并不是特别清楚。这些权力发生了什么？为什么前两个查询与第三个查询不同？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T12:35:59.170

在第一个查询中，您仅按级别进行连接。因此，如果 level <= 1，您将获得每条记录 1 次。如果级别 <= 2，那么您将获得每个级别 1 次（对于级别 1）+ N 次（其中 N 是表中的记录数）。这就像您在交叉连接，因为您只是从表中挑选所有记录直到达到级别，而没有其他条件来限制结果。对于级别 <= 3，对每个结果再次执行此操作。

所以对于3条记录：

*   Lvl 1：3 条记录（均具有 1 级）
*   Lvl 2：3 条 1 级记录 + 3*3 3 条 2 级记录 = 12
*   Lvl 3：3 + 3*3 + 3*3*3 = 39（实际上，每个 13 条记录）。
*   Lvl 4：开始看到模式？:)

这不是真正的交叉连接。交叉连接只会返回此查询结果中具有级别 2 的那些记录，而通过此连接方式，您将获得具有级别 1 的记录以及具有级别 2 的记录，从而导致 3 + 3*3 而不仅仅是3*3 记录。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-24T12:36:43.573

当`connect by`在没有`start with`子句和`prior`运算符的情况下使用时，将子行连接到父行没有限制。Oracle 在这种情况下所做的，它通过将一行连接到更高级别的每一行来返回所有可能的层次结构排列。

```
SQL> select b
  2       , level as lvl
  3       , sys_connect_by_path(b, '->') as ph
  4     from a
  5  connect by level <= 2
  6  ;

         B        LVL PH
       ---------- ---------- 
         1          1 ->1
         1          2 ->1->1
         2          2 ->1->2
         3          2 ->1->3
         2          1 ->2
         1          2 ->2->1
         2          2 ->2->2
         3          2 ->2->3
         3          1 ->3
         1          2 ->3->1
         2          2 ->3->2
         3          2 ->3->3

12 rows selected 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T12:32:56.630

在将最终查询与其他查询进行比较时，您将苹果与橙子进行比较，因为 LEVEL 与 1 行双表隔离。

让我们考虑这个查询：

```
 select id, level as lvl
   from a
connect by level <= 2
  order by id, level 
```

这就是说，从表集开始（select * From a）。然后，对于返回的每一行，将此行连接到前一行。由于您尚未在连接方式中定义连接，因此这实际上是笛卡尔连接，因此当您有 3 行 (1,2,3) 1 连接到 2, 1->3, 2->1, 2 ->3, 3->1 和 3->2 并且它们也连接到自己 1->1,2->2 和 3->3。这些连接是 level=2。所以我们在那里有 9 个连接，这就是为什么你得到 12 行（3 个原始“1 级”行加上笛卡尔集）。

所以输出的行数 = rowcount + (rowcount^2)

在最后一个查询中，您将级别隔离到此

```
select level  as lvl
           from dual
        connect by level  <= 2 
```

这当然会返回 2 行。然后将其笛卡尔化到原始的 3 行，给出 6 行作为输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T08:43:46.463

您可以使用以下技术来克服此问题：

```
select id, level as lvl
   from a
      left outer join (select level l from dual connect by level <= 2) lev on 1 = 1
order by id 
```

# .htaccess - 屏蔽原始网址

> ID：13540662
> 
> 赞同：1
> 
> 时间：2012-11-24T11:15:05.950
> 
> 标签：.htaccess, masking, url-masking, domain-masking

我想在地址栏中屏蔽 url 名称。我不知道该怎么做。我有两个域。`www.domainA.com`和`www.domainB.com`。当用户去时`www.domainB.com/subdirectory`，他应该重定向到`www.domainA.com/subdirectory`，但在地址栏中应该是`www.domainB.com/subdirectory`。

现在我已将 url 从重定向`www.domainB.com/subdirectory`到`www.domainA.com/subdirectory`，但它显示`www.domainA.com/subdirectory`，而不是`www.domainB.com/subdirectory`

怎么屏蔽，求推荐

# jquery-plugins - 如何通过触摸事件在画布上移动图像？

> ID：13540664
> 
> 赞同：0
> 
> 时间：2012-11-24T11:15:21.677
> 
> 标签：jquery-plugins, html5-canvas, touch, kineticjs, dom-events

我已经尝试过[this](https://stackoverflow.com/questions/4566764/drag-objects-in-canvas)和[this](http://quirksmode.org/m/tests/drag.html)，但我发现它们仅适用于鼠标事件。我想在画布上放一些图片，让用户“触摸”它进行拖放。但似乎图片没有接收到用户的触摸事件，只有画布接收到事件。

有什么建议或插件吗？
ps：我在Phonegap和Android系统上开发应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:03:48.430

您还需要处理 MSPointer 事件，这是来自 Microsoft 的用于管理触摸的事件（它是在 Win8 和 WinPhone 8 中引入的）。

每帧所需的步骤：

1.  检测鼠标、触摸和 MSPointer 事件
2.  检查碰撞图像的光标位置
3.  移动图像

对于第一点：

```
function getCursorPositions (event, canvas) {
var element = canvas, offsetX = 0, offsetY = 0, positions = [];

if (element.offsetParent) {
    do {
        offsetX += element.offsetLeft;
        offsetY += element.offsetTop;
    } while ((element = element.offsetParent));
}

// Add padding and border style widths to offset
/*offsetX += stylePaddingLeft;
offsetY += stylePaddingTop;

offsetX += styleBorderLeft;
offsetY += styleBorderTop;*/

var touch = event;
//if multi-touch, get all the positions
if (event.targetTouches) { // or changedTouches
    var touchPoints = (typeof event.targetTouches !== 'undefined') ? event.targetTouches : [event];
    for (var i = 0; i < touchPoints.length; i++) {
        touch = touchPoints[i];

        positions.push({touch.pageX - offsetX, touch.pageY - offsetY});
    }
}
else {
    positions.push({touch.pageX - offsetX}, {touch.pageY - offsetY});
}

    //return positions for mouse or fingers
return positions;
} 
```

对于第二点，您至少有两种检测碰撞的方法：

您可以检查鼠标位置是否在项目的边界框内：

```
function pointIsInRegion (point, targetRegion, threshold) {
    return point.x >= (targetRegion.position.x - threshold) &&
        point.y >= (targetRegion.position.y - threshold) &&
        point.x <= (targetRegion.position.x + targetRegion.dimension.width + threshold) &&
        point.y <= (targetRegion.position.y + targetRegion.dimension.height + threshold);
} 
```

或者您可以通过检查像素碰撞来更准确。要实现第二种方法，您必须在临时画布中渲染您的项目，并检查您的 2 个项目中是否至少有像素发生碰撞（可以通过使用遮罩来加速）。

对于第三点（移动图像），您所要做的就是将图像从“currentCursorPosition - previousCursorPosition”移动。这是最简单的部分。

无论如何，我建议您使用框架。代码已经完成，它将帮助您更快地进行。 [cgSceneGraph](http://gwennaelbuchet.github.com/cgSceneGraph/)，（我是这个框架的设计者）只需几行就可以为您完成工作。看看“planner 2D”和“collision”示例（[http://gwennaelbuchet.github.com/cgSceneGraph/examples.html](http://gwennaelbuchet.github.com/cgSceneGraph/examples.html)）

希望这可以帮到你。

# jquery - jquery 获取元素文本

> ID：13540665
> 
> 赞同：0
> 
> 时间：2012-11-24T11:15:29.413
> 
> 标签：jquery, html

我有一个小清单

喜欢

```
<div class="d1">
<ul>
<li class="active">hello</li>
<li>foo</li>
</ul>
</div>

<div class="d2">
<ul>
<li class="active">foo</li>
<li>foo</li>
</ul>
</div>

<div class="d3">
<ul>
<li class="active">bar</li>
<li>foo</li>
</ul>
</div> 
```

现在我想得到一个数组，在这个例子中，大小为 2 [0] -> hello [1] -> foo

但我只想从 div d1, d2 获取所有“活动”标记的值。但找不到如何访问该值。

我想它一定是这样的

```
$('#d1,#d2 li').value 
```

但它没有用：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:21:31.637

```
$(".d1, .d2").find("li.active").map(function(i, e) { return $(e).text(); }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:17:07.880

用这个

```
var array = new Array();
$('.d1 li.active, .d2 li.active').each(function(){
    array.push($(this).text())
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T11:19:51.757

尝试这个

```
var arr = new Array();

$(".d1, .d2").find("li.active").map(function() {
    arr.push( $(this).text() ); 
}); 
```

[**演示**](http://jsfiddle.net/HHSCy/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T11:26:21.847

`d1`and`d2`是类，所以你应该使用`$('.d1,.d2')`，然后你找到活动的 li，使用`map`返回找到的 li 的所有文本值。

```
var ret = $('.d1,.d2').find('li.active').map(function() {
  return $(this).text();
}); 
```

# regex - 在 HTML 中查找特定的 url

> ID：13540671
> 
> 赞同：1
> 
> 时间：2012-11-24T11:16:28.277
> 
> 标签：regex, parsing, beautifulsoup, urllib2, python-2.x

我是新成员，对我的英语感到抱歉，但这不是我的母语。我会制作一个 python 程序，从 html 页面 (http://www.kernel.org/pub/linux/kernel/v3.0/) 中提取特定的 url。我能够在我的 shell 上打印关于该页面的所有链接，但我不知道如何提取特定的 url，例如 linux-3.6.7.ta​​r.bz2。我怎样才能做到这一点？

我会问你另一个问题：我希望用户选择要在你的电脑上下载的内核，而不是指定内核，例如 3.2、3.3、3.6 等。我该怎么做？也许用正则表达式？

Ps：我导入了 urllib2、HTMLParser、BeautifulSoup 和 Re。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:35:13.620

```
from urllib2 import Request, urlopen
from BeautifulSoup import BeautifulSoup
req = Request('http://www.kernel.org/pub/linux/kernel/v3.0/')
response = urlopen(req)
content = response.readlines()
soup = BeautifulSoup(''.join(content))
for link in soup.findAll('a', href=True):
    if ('3.6.7.tar.gz' in link.string):
        print link 
```

用那个...

```
>>> from urllib2 import Request, urlopen
>>> from BeautifulSoup import BeautifulSoup
>>> req = Request('http://www.kernel.org/pub/linux/kernel/v3.0/')
>>> response = urlopen(req)
>>> content = response.readlines()
>>> soup = BeautifulSoup(''.join(content))
>>> for link in soup.findAll('a', href=True):
...     if ('3.6.7.tar.gz' in link.string):
...         print link
...
<a href="linux-3.6.7.tar.gz">linux-3.6.7.tar.gz</a>
>>> 
```

如果要自定义搜索用户输入，请使用 python 的[`raw_input()`](http://docs.python.org/2/library/functions.html#raw_input)函数...

# ruby-on-rails-3.2 - 如何在 Clobdees 中使用 Ruby 1.9.3？

> ID：13540673
> 
> 赞同：0
> 
> 时间：2012-11-24T11:16:46.340
> 
> 标签：ruby-on-rails-3.2, ruby-1.9.3, cloudbees

我在 Cloudbees 上的构建失败了。出于某种原因，它使用名为“use-ruby”的文件来安装 Ruby 1.8.7。

由于我使用并需要 1.9.3，它总是失败。有没有办法覆盖该文件并获得 1.9.3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:24:13.393

只需查看[http://wiki.cloudbees.com/bin/view/DEV/Ruby+Builds](http://wiki.cloudbees.com/bin/view/DEV/Ruby+Builds)即可使用 ruby​​ 附加组件来选择要用于构建的 ruby​​ 解释器版本

# java - android中的阴影生成器

> ID：13540674
> 
> 赞同：4
> 
> 时间：2012-11-24T11:16:47.943
> 
> 标签：java, android

我正在开发一个拖放游戏，但我有一个小问题，当我在视图中单击时，阴影生成器首先出现在右上角，然后随着触摸位置移动。

阴影生成器也比初始视图小。我怎样才能使它成为初始视图？

```
private final class MyTouchListener implements OnTouchListener {
    public boolean onTouch(View view, MotionEvent motionEvent) {

        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
            view.startDrag(data, shadowBuilder, view, 0);
            view.setVisibility(View.INVISIBLE);
            return true;
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:50:04.430

我可能迟到了，但是……您必须计算触摸点和可拖动左上角之间的偏移量，并将其与自定义 DragShadowBuilder 一起使用。

这是偏移量的代码：

```
@Override
public boolean onTouch(View view, MotionEvent event) {

    switch(event.getAction()) {

        case MotionEvent.ACTION_DOWN : {

            Point offset = new Point((int) event.getX(), (int) event.getY());

            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder shadowBuilder = new CustomDragShadowBuilder(container, offset);
            view.startDrag(data, shadowBuilder, container, 0);
            view.setVisibility(View.INVISIBLE);
        }
    }

    return true;
} 
```

这是自定义构建器的代码：

```
import android.graphics.Point;
import android.view.View;

public class CustomDragShadowBuilder extends View.DragShadowBuilder {

// ------------------------------------------------------------------------------------------
// Private attributes :
private Point _offset;
// ------------------------------------------------------------------------------------------

// ------------------------------------------------------------------------------------------
// Constructor :
public CustomDragShadowBuilder(View view, Point offset) {

    // Stores the View parameter passed to myDragShadowBuilder.
    super(view);

    // Save the offset :
    _offset = offset;
}
// ------------------------------------------------------------------------------------------

// ------------------------------------------------------------------------------------------
// Defines a callback that sends the drag shadow dimensions and touch point back to the system.
@Override
public void onProvideShadowMetrics (Point size, Point touch) {

    // Set the shadow size :
    size.set(getView().getWidth(), getView().getHeight());

    // Sets the touch point's position to be in the middle of the drag shadow
    touch.set(_offset.x, _offset.y);
}
// ------------------------------------------------------------------------------------------
} 
```

# visual-c++ - 如何将主要方法添加到 Visual C++/CLR/类库？

> ID：13540680
> 
> 赞同：-2
> 
> 时间：2012-11-24T11:17:51.687
> 
> 标签：visual-c++, c++-cli

过去 10 年，我只使用 C#/Java，对于我关于 C++ 的简单问题，我感到很抱歉。

现在我必须在我的解决方案中添加一个 c++ 项目。我不需要它是独立的应用程序，我需要它来做一些工作并将结果传输到我的另一个 c# 项目。所以我创建了“Visual C++ / CLR / 类库”。

默认情况下，此类项目不包含太多代码。只是这个：

```
// CliProject.h file
#pragma once
using namespace System;
namespace CliProject {

public ref class Class1
{
    // TODO: Add your methods for this class here.
};
}

// CliProject.cpp file
#include "stdafx.h"
#include "CliProject.h" 
```

现在为了调试，我想添加“main”方法，以便我可以将我的库作为独立应用程序启动。怎么做？我应该创建另一个类还是应该使用现有的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:36:00.287

使用对您的库的引用创建一个“CLR 控制台应用程序”项目。或者更好的是，为了调试，使用单元测试框架。

# java - 读取图像时出错

> ID：13540690
> 
> 赞同：1
> 
> 时间：2012-11-24T11:19:36.667
> 
> 标签：java, image, javax.imageio

当我尝试使用打开一个简单的 smile.png 图像时

```
package com.java3d.java3d.graphics;

 import java.awt.Color;
 import java.awt.image.BufferedImage;
 import java.io.File;

 import javax.imageio.ImageIO;

 public class Texture {
public static Render floor = loadBitMap("smile.png");
 public Texture(){}
public static Render loadBitMap(String fileName) {
    try {
        BufferedImage image =          ImageIO.read(Thread.currentThread().getContextClassLoader().getResource(fileName));
        System.out.print(image==null);
        int width = image.getWidth();
        System.out.println(width);
        int height = image.getHeight();
        System.out.println(height);

        System.out.println(image.getRGB(4, 4)); 
        Render result = new Render(width, height);

        image.getRGB(0, 0, width, height, result.pixels, 0, width);

        return result;
    } catch (Exception e) {
 System.out.println("CRASH!");
 throw new RuntimeException(e);
    }
}
 } 
```

它将每个像素返回为 -1；什么可能导致这个问题？这是图像： ![我使用的图像](../Images/a1cfb850aa3b1a2412286957437cd942.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T05:02:39.183

我无法抗拒@Andrew 示例的这种变化。给定字节顺序`ARGB`，几乎可以看到绿色边框和红色特征。注意*x*和*y*参数分别`getRGB()`代表*column*和*row*。

```
错误的
8x8
FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00
FF00FF00 FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FF00FF00
FF00FF00 FFFFFFFF FFFF0000 FFFFFFFF FFFFFFFF FFFF0000 FFFFFFFF FF00FF00
FF00FF00 FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FF00FF00
FF00FF00 FFFFFFFF FFFF0000 FFFFFFFF FFFFFFFF FFFF0000 FFFFFFFF FF00FF00
FF00FF00 FFFFFFFF FFFFFFFF FFFF0000 FFFF0000 FFFFFFFF FFFFFFFF FF00FF00
FF00FF00 FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF FF00FF00
FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00 FF00FF00

```

代码：

```
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;

public class QuickTest {

    public static void main(String[] args) throws Exception {
        BufferedImage image = ImageIO.read(new URL(
            "http://i.stack.imgur.com/BLRBU.png"));
        System.out.println(image == null);
        int width = image.getWidth();
        int height = image.getHeight();
        System.out.println(width + "x" + height);
        for (int row = 0; row < height; row++) {
            for (int col = 0; col < width; col++) {
                System.out.printf("%04X ", image.getRGB(col, row));
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T11:34:20.550

```
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;

public class QuickTest {

    public static void main( String[] args ) throws Exception {
        BufferedImage image = ImageIO.read(new URL(
            "http://i.stack.imgur.com/BLRBU.png"));
        System.out.println(image==null);
        int width = image.getWidth();
        int height = image.getHeight();
        System.out.println(width + "x" + height);
        for (int i=0; i<width; i++) {
            for (int j=0; j<height; j++) {
                System.out.print(image.getRGB(i, j) + "," ); 
            }
            System.out.println(); 
        }
    }
} 
```

## OP

```
false
8x8
-16711936,-16711936,-16711936,-16711936,-16711936,-16711936,-16711936,-16711936,
-16711936,-1,-1,-1,-1,-1,-1,-16711936,
-16711936,-1,-65536,-1,-65536,-1,-1,-16711936,
-16711936,-1,-1,-1,-1,-65536,-1,-16711936,
-16711936,-1,-1,-1,-1,-65536,-1,-16711936,
-16711936,-1,-65536,-1,-65536,-1,-1,-16711936,
-16711936,-1,-1,-1,-1,-1,-1,-16711936,
-16711936,-16711936,-16711936,-16711936,-16711936,-16711936,-16711936,-16711936, 
```

# javascript - AJAX 加载动画 - 机器人呢？

> ID：13540691
> 
> 赞同：0
> 
> 时间：2012-11-24T11:19:37.987
> 
> 标签：javascript, ajax

我有一个 php 文件，其中包含大量数据库数据（称为 test.php）。我网站的启动脚本 (index.php) 显示加载动画，使用 ajax 加载 test.php，然后显示。问题在于 Facebook、Google、Twitter 等机器人无法看到该网站，因为它们不使用 javascript。

如何在没有 javascript 的情况下向 Bots 提供内容，正如我上面所说的向普通用户提供的内容？

# c - 外部存储类和全局变量

> ID：13540698
> 
> 赞同：-2
> 
> 时间：2012-11-24T11:20:11.487
> 
> 标签：c

> **可能重复：**
> [C 中的外部变量是什么？](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c)

C编程语言中的外部存储类和全局变量有什么区别？对我来说，它们似乎都是同一件事。请澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:29:03.923

`extern`变量是在*另一个单元中***定义**的变量的**声明**。

 ***您在文件中**声明**它：`.h`

```
extern int global_var; 
```

如果你想在`.c`文件中使用它，你可以在*全局范围内***定义**它。你应该使用它的源文件中的文件。*`include``.h`*

 ***全局变量**是在块外**声明**的变量。它们可以在程序中的*任何地方*访问。

**请注意，了解声明**变量和**定义**变量之间的区别非常重要：

*   **声明一个变量**- 有这个名字的东西，它有这个类型。编译器可以使用这个变量而不需要它的所有定义。
*   **定义变量** - 提供创建此变量的所有信息。****

# magento - Magento 主题页面

> ID：13540699
> 
> 赞同：0
> 
> 时间：2012-11-24T11:20:14.903
> 
> 标签：magento, themes, skin

这是我第一次使用 Magento，所以这可能是一个 n00b 问题。

我已经设置了 2 个商店视图 NL 和 UK。两者都有相同的主题。在我的英国商店里一切正常。但是当我去联系或荷兰版的结帐页面之一时，主题消失了。

NL 版本 /skin/frontend/default/default/css/styles.css

英国版 /skin/frontend/default/theme375/css/styles.css

如何让荷兰语版本与英国版本一样工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:54:39.097

系统 > 配置 > 设计 > 主题 - 请注意，您可能需要更改配置范围才能查看荷兰/英国网站/商店的设置。最好将设置设置为尽可能“高”。

# iphone - 格式化 NSDecimalNumber 问题

> ID：13540705
> 
> 赞同：1
> 
> 时间：2012-11-24T11:21:27.617
> 
> 标签：iphone, formatting, fractions, nsdecimalnumber

我正在尝试使用简单的格式创建 NSDecimalNumber，例如：123.00，点后有两个小数位，总是。我尝试使用 NSFormatter 和许多其他方法，例如从字符串转换浮点数，然后从该字符串创建 NSDecimalNumber，但它不起作用。问题是我只需要这种格式的 NSDecimalNumber，而不需要 NSString 或任何其他格式。谢谢你的建议，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T00:35:54.343

也许您希望在分数后仅**存储**两位数的 NSNumberDecimal？如果`NSDecimalNumberBehaviors`是你的朋友。我有类似的需求并使用了以下内容：

```
self.decimalHandlingBehaviorForApp = [NSDecimalNumberHandler
                                         decimalNumberHandlerWithRoundingMode:NSRoundUp
                                         scale:2 raiseOnExactness:NO 
                                         raiseOnOverflow:NO raiseOnUnderflow:NO
                                         raiseOnDivideByZero:YES]; 
```

编辑：添加了使用它的示例

```
// update the taxable total first
self.cartTaxableTotal = [self.cartTaxableTotal decimalNumberByAdding:itemAdded.priceOfItem
                                                        withBehavior:self.decimalHandlingBehaviorForApp]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T21:01:27.123

NSDecimalNumber 和 NSNumber 一样，不能包含格式信息。对象结构根本不支持它。它代表一个数字，而不是数字的显示方式。

您可以将其转换为格式化的 NSString （您说您不想要）。但你不能做你所要求的。

您可以使用 NSNumberFormatter 将其转换为格式化的 NSString。它是允许您指定小数和千位分隔符、要显示的小数位数、货币符号等的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:27:54.400

你可能会从中得到想法。

```
float num = 123.1254546;
NSString *str = [NSString stringWithFormat:@"%.2f",num];
NSLog(@"%.2f %@",num,str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T11:37:21.603

我认为您只需要进行两次类型转换操作，如下所示

```
 float value = 123.562;
   int myDigit = value; 
```

它在 myDigit 变量中给出值 123

```
 NSLog(@"MyDigit in Decimal = %d",myDigit); 
```

**输出是十进制的 MyDigit = 123**

现在，如果您想要像 123.000 这样的输出，那么只需编写如下

```
 float valueWithZiro = myDigit;

 NSLog(@"MyDigit with 000  == %3f",valueWithZiro); 
```

**输出是十进制的 MyDigit = 123.000**

# android - 应用程序在 super.onSaveInstanceState 上崩溃

> ID：13540712
> 
> 赞同：1
> 
> 时间：2012-11-24T11:22:29.173
> 
> 标签：android, crash

> **可能重复：**
> [onSaveInstanceState 上的 NullPointerException 与 AndroidFragments](https://stackoverflow.com/questions/12217681/nullpointerexception-on-onsaveinstancestate-with-androidfragments)

当我在某些设备上调用 super.onSaveInstanceState 时，我在 android.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1542) 处得到 NullPointerException，而另一些则可以。

```
 public void onSaveInstanceState(Bundle savedInstanceState) {
            //...
            super.onSaveInstanceState(savedInstanceState);
    } 
```

Nexus 平板电脑上的 Android 4.1 可以正常工作，而三星的 Android 4.0 则不行。这里有什么问题，我该如何解决？取消注释 onSaveInstanceState 有效，但我认为这是不正确的，它使我的应用程序在其他地方表现不正确。

谢谢马文

编辑添加的堆栈跟踪

```
FATAL EXCEPTION: main
java.lang.NullPointerException
    at android.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1542)
    at android.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1572)
    at android.app.Activity.onSaveInstanceState(Activity.java:1164)
    at com.MApp.MActivity.onSaveInstanceState(MActivity.java:1111)
    at android.app.Activity.performSaveInstanceState(Activity.java:1113)
    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1188)
    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3337)
    at android.app.ActivityThread.access$700(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1163)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4507)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T21:48:44.783

好的，我现在想通了。这是因为我的片段没有 `onSaveInstanceState`

我不得不用虚拟值填充捆绑包。这是android 4.0版本中的一个错误。但是，我不知道其他版本。

# android - 我需要在 7 英寸平板电脑上测试我的 android 应用程序

> ID：13540716
> 
> 赞同：0
> 
> 时间：2012-11-24T11:22:54.497
> 
> 标签：android

有人可以给我创建我正在使用以下内容的 avd 的详细信息：

```
Abstracted  LCD Density :240
max VM Application heap size :24
Device Ram :512
Skin :BuiltinWVGA800
SDcard size 512
Target :2.3.3
API level 10 
```

同样在我的清单文件中：

```
<uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="11" />
<activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" 
            android:screenOrientation="landscape"
            android:windowSoftInputMode="stateAlwaysHidden"> 
```

请不要将我重定向到另一个 URL，因为我没有找到太多帮助。如果可能的话，请给我创建 avd 的配置详细信息或我需要在清单文件中进行的更改。我需要在 7' 平板电脑上运行应用程序。谢谢.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:33:41.143

没有一套规范`7" tablet`。您可以通过克隆其参数来模仿某些设备，但这`7" tablet`并不意味着任何特定的参数集来回答您的问题（即您假设密度为 240DPI，这是错误的 - 例如，我得到了一些 10" 160 DPI 的表格）。对于屏幕分辨率 - 可以是 800x480 或 1280x800 - 仍然是 7"。所以拿起任何确切的 7 英寸平板电脑并检查其规格并创建类似的 AVD

# ruby-on-rails-3 - Rails中每个相关记录的属性总和？

> ID：13540721
> 
> 赞同：0
> 
> 时间：2012-11-24T11:23:56.227
> 
> 标签：ruby-on-rails-3, model, sum, relationship

在我的 Rails 3 中，我有以下模型：

```
Animal
Claim
Exclusion 
```

模型关系如下：

```
Animal has_one exclusion
Animal has_many claims
Claim has_one Animal
Exclusion belongs_to Animal 
```

在排除表中，我有以下列：

```
animal_id, con1, con2, con3, con4, con5 
```

在索赔表中，我有以下列：

```
animal_id, con1, con2, con3, con4, con5, description, date 
```

排除 has_one animal 和声明 has_one animal。动物 has_many 声明和 has_one 排除。

因此，用户创建一个声明，在每个 con* 列旁边添加一个值。我如何（在“动物”视图中）汇总每种情况的索赔总额？

例如; 在我的动物视图中：

```
Condition 1 = 10.00
Condition 2 = 20.00
Condition 3 = 0.00
Condition 4 = 200.00
Condition 5 = 232.22 
```

上述条件旁边的值取自以下权利要求：

```
ID, con1, con2, con3, con4, con5, animal_id
-------------------------------------------
1,  5.00, 10.00, 0.00, 100.00, 200.00, 123
2,  5.00, 10.00, 0.00, 100.00, 32.22, 123 
```

因此，每个条件的值都会在属于当前动物的所有声明中汇总。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:18:16.930

如果您当前的动物被称为`@animal`，那么您可以使用以下方法对所有声明中的特定条件的值求和[`sum`](http://api.rubyonrails.org/classes/Enumerable.html#method-i-sum)：

```
con1_sum = @animal.claims.sum(:con1) 
```

在您看来，您可以执行以下操作：

```
Condition 1 = <%= @animal.claims.sum(:con1) %>
Condition 2 = <%= @animal.claims.sum(:con2) %>
Condition 3 = <%= @animal.claims.sum(:con3) %>
Condition 4 = <%= @animal.claims.sum(:con4) %>
Condition 5 = <%= @animal.claims.sum(:con5) %> 
```

在控制器操作中而不是直接在视图中计算这些可能更有意义，但无论如何你明白了。

# jquery - 使用 jQuery 导航到主题标签 - 显示/隐藏内容

> ID：13540722
> 
> 赞同：0
> 
> 时间：2012-11-24T11:24:04.857
> 
> 标签：jquery, asp.net, html, hyperlink

我有一个页面，其中有 3 个带文本的占位符。这些都隐藏在 page_load 上，jQuery 根据是否有标签将它们设置为可见。

我想使用带有标签的内联链接，例如`<a href="#references"></a>`. 根据主题标签，我想显示/隐藏其他内容。

使用查询字符串很容易开始工作，但不幸的是，在我的情况下，这将给搜索引擎优化带来非常糟糕的效果。

我找到了一个可行的解决方案，但有一个主要问题。当用户单击顶部的附加主题标签的菜单时，它会转到链接，但我的 jQuery 在第二次单击时首先运行。会发生以下情况：

1.  我们在 URL [http://www.domain.com](http://www.domain.com)
2.  用户点击我的菜单，网址是[http://www.domain.com#info](http://www.domain.com#info)，但标记没有任何变化
3.  用户第二次点击菜单，url是一样的，但是现在标记改变了

**我的 jQuery 脚本：**

```
 <script>
        $(document).ready(function () {
            updateview();
        });

        function updateview() {
            if (document.location.hash.search('calculator') !== -1) {
                $("#ContentContainer").hide();
                $("#VideoPnl").hide();
                $("#CalculatorPnl").show();
            }
            else if (document.location.hash.search('video') !== -1) {
                $("#CalculatorPnl").hide();
                $("#VideoPnl").show();
                $("#ContentContainer").hide();
            } else {
                $("#ContentContainer").show();
                $("#CalculatorPnl").hide();
                $("#VideoPnl").hide();
            }
        } 
```

**我的菜单**

我菜单上的每个菜单点都添加了以下 JavaScript，我希望在单击时会改变屏幕，但这个第一次工作第二次：

```
menu.Attributes.Add("onclick", "javascript:updateview()"); 
```

**我在 ASP.NET 中的标记：**

```
 <asp:Panel runat="server" ID="ContentContainer" ClientIDMode="Static">
        <asp:Literal runat="server" ID="ContentPlaceholder"></asp:Literal>

    </asp:Panel>

    <asp:Panel ID="CalculatorPnl" runat="server" ClientIDMode="Static">
        <asp:Literal runat="server" ID="CalculatorHeadlineLtl"></asp:Literal>
        <asp:Literal runat="server" ID="CalculatorPlaceholder"></asp:Literal>
    </asp:Panel>

    <asp:Panel ID="VideoPnl" runat="server" ClientIDMode="Static">
        <asp:Literal runat="server" ID="VideoHeadlineLtl"></asp:Literal>
        <asp:Literal runat="server" ID="VideoPlaceholder"></asp:Literal>
    </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:22:12.403

`updateview`是从点击处理程序中调用的。当`updateview`函数第一次执行时，url 没有哈希值。执行所有点击处理程序后，哈希将附加到 url。要演示这一点，请将您的重写`updateview`如下：

```
function updateview(evt) {
    if (evt && evt.preventDefault) {
        evt.preventDefault();
    } else if (event) {
        event.returnValue = false;
    }

    if (document.location.hash.search('calculator') !== -1) {
        $("#ContentContainer").hide();
        $("#VideoPnl").hide();
        $("#CalculatorPnl").show();
    }
    else if (document.location.hash.search('video') !== -1) {
        $("#CalculatorPnl").hide();
        $("#VideoPnl").show();
        $("#ContentContainer").hide();
    } else {
        $("#ContentContainer").show();
        $("#CalculatorPnl").hide();
        $("#VideoPnl").hide();
    }
} 
```

前 5 行阻止事件执行其默认操作，即跟随链接并将哈希附加到 url。现在，如果您单击菜单，无论您单击多少次，都不会发生任何事情。此外，使用您之前的代码，如果您第二次单击其他菜单项，您仍然会看到前一个菜单项的 div。

现在问题发生的原因很清楚了，我能想到的解决方案是： - 使用事件对象获取哈希 - 显示正确的 div - 让事件冒泡

您还没有为您的菜单显示代码，所以我假设它是`ul`每个`li`包含一个`a`标签的地方，该标签具有所需的 href 集。我还假设单击处理程序已添加到每个锚标记。

相同的代码：

```
$(document).ready(function () {
        var hash = document.location.hash;
        updateview(hash);
    });

function updateview(hash) {

    if (!hash) {
        hash = document.location.hash;
    }

    if (hash.search('calculator') !== -1) {
        $("#ContentContainer").hide();
        $("#VideoPnl").hide();
        $("#CalculatorPnl").show();
    }
    else if (hash.search('video') !== -1) {
        $("#CalculatorPnl").hide();
        $("#VideoPnl").show();
        $("#ContentContainer").hide();
    } else {
        $("#ContentContainer").show();
        $("#CalculatorPnl").hide();
        $("#VideoPnl").hide();
    }
}

function menuClick(evt) {
    if (!evt) {
        evt = window.event;
    }

    var target = (evt.currentTarget) ? evt.currentTarget : evt.srcElement,
        hash = target.getAttribute('href');

    updateview(hash);
} 
```

更改是，`updateview`接受哈希作为参数。在 dom 就绪时，此参数的值来自`document.location.hash`. 在单击处理程序中，它从被单击`href`的`anchor`标记中获取其值。`menuClick`是您需要绑定到`anchor`菜单中每个标签的点击处理程序。

我不在 WebForms 中编码，所以我无法帮助您了解确切的语义。我希望您对问题的原因和我的预期解决方案有足够的了解。

# image - CakePHP 2.1 上传图片的插件

> ID：13540723
> 
> 赞同：0
> 
> 时间：2012-11-24T11:24:13.263
> 
> 标签：image, plugins, cakephp-2.1

我正在使用 cakephp 2.1 并开发一个可以上传图像的应用程序。所以我需要一个喜欢的插件

1.验证图像。2.按自定义大小裁剪图像。3.删除数据库中的条目后删除图像文件。

请向我推荐一些包含所有这些功能的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:43:46.907

Meio 上传：[https](https://github.com/jrbasso/MeioUpload) ://github.com/jrbasso/MeioUpload - 即使它最近已被弃用，它仍然可以正常工作。这是我目前使用的 - 我可能很快就会切换到上传插件。

上传插件：[https](https://github.com/josegonzalez/upload) ://github.com/josegonzalez/upload这是一个新插件，旨在取代 Meio Upload

CakePHP 媒体插件：[https](https://github.com/bmcclure/CakePHP-Media-Plugin) ://github.com/bmcclure/CakePHP-Media-Plugin这个我没用过。设置起来显然很复杂，但非常好。

# php - 我应该如何在 MySQL 数据库中存储数组值？

> ID：13540727
> 
> 赞同：0
> 
> 时间：2012-11-24T11:25:03.863
> 
> 标签：php, javascript, jquery, mysql, arrays

为了提供一些背景知识，我正在创建一个主要使用 jQuery 的 Web 应用程序。我从另一个域的页面中抓取了一些值；3 个整数数组和一个字符串格式的日期。然后这些值会显示在我的页面上。这些数组中的每一个都有 7 个数字。

将每个数组作为单个条目存储在我的 MySQL 数据库中对我来说是有意义的。我最初的想法是将每个数组的值存储为 JSON 对象，然后通过阅读将其插入到我在数据库中的条目中，因此这似乎不是采用的方法。我不认为在未来的任何阶段都需要对值进行排序。我只需要每个整数的值，不需要知道每个数组中的每个整数如何相互关联。

有人可以为我指出有关这些值的存储和检索的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:33:06.270

通常数组有点难以处理。在大多数情况下，数组是我需要稍后在前端使用 javascript 为用户处理的值（无论如何也想不出其他用途）。因此，我通常做的是通过使用将它们存储为文本

```
$array = array('one', 'two', 'three');
$textToSaveinDB = implode(',', $array); 
```

当我检索到这个时，你会使用相反的方式

```
$textFromDB = "one,two,three";
$array = explode(textFromDB, ',') 
```

之后，您可以对阵列做任何您需要做的事情。例如使用 JSON_encode() 并通过 ajax 将其发送给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:32:58.910

也许[serialize()](http://php.net/manual/en/function.serialize.php)和[unserialize()](http://www.php.net/manual/en/function.unserialize.php)会帮助你。但我不会建议这是最好的方法。

# wamp - 有没有办法使用 POP3 通过 localhost wamp 接收邮件？

> ID：13540731
> 
> 赞同：1
> 
> 时间：2012-11-24T11:25:45.670
> 
> 标签：wamp, phpmailer, pop3

我正在尝试检查本地服务器上的接收邮件脚本，但无法连接到 wamp 上的 localhost。wamp 是否有任何 POP3 扩展？

# ios - 在框架 xcode 中导入文件

> ID：13540733
> 
> 赞同：0
> 
> 时间：2012-11-24T11:25:51.293
> 
> 标签：ios, xcode

> **可能重复：**
> [Base64Transcoder.m 重复符号](https://stackoverflow.com/questions/13540610/base64transcoder-m-duplicate-symbols)

我想使用 SKPSMTPMessage 库。唯一的问题是这个库包含文件 Base64Transcoder.m，它甚至包含在 Dropbox SDK 中。因此我有一个重复的错误。我不能只删除 Base64Transcoder.m 文件，因为它正在导入到 SKPSMTPMessage 库中。我尝试导入Dropbox SDK而不是文件，但它不起作用。有没有办法只在 SDK 中导入一个文件？

谢谢你的帮助

# iphone - UIToolbar 内的 UISegmentedControl 对于 Lanfscape 的高度确实错误

> ID：13540735
> 
> 赞同：0
> 
> 时间：2012-11-24T11:26:18.700
> 
> 标签：iphone, ios, uinavigationcontroller, uitoolbar, uisegmentedcontrol

当 iPhone 处于横向时，分段控件以某种方式无法获得正确的高度。

旋转模拟器时，底部的工具栏没有变薄的高度已经够糟糕了，但是当导航回前一个屏幕然后再次进入时，工具栏确实获得了适当的高度，但是分段控件在它上方延伸，甚至看起来更大。

是模拟器中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:17:22.473

又挖了一天，我发现哪里出了问题！

处理 UINavigationControllers 时，根本**不要拖入 UIToolbar**！UINavigationController 带有两个栏，一个用于导航控制器的顶栏和一个用于工具栏的底栏——后者默认隐藏。

在任何新添加的 ViewController 中，都会有一个可以从 IB 填充的工具栏。但是，如果它不是 UIBarButton，则存在一些问题。要使用步进器、开/关开关或分段控件，**请先**将其拖到导航栏，然后在 IB 的左栏导航器中，将其拖到工具栏。

这解决了前面提到的所有问题

# c - 如何在函数中传递指向数组的指针、修改它并正确返回？

> ID：13540737
> 
> 赞同：1
> 
> 时间：2012-11-24T11:26:26.500
> 
> 标签：c, pointers, pass-by-reference

我正在尝试在函数中传递指向数组的指针并将其返回。问题是在正确初始化函数后返回一个 NULL 指针。谁能告诉我，我的逻辑有什么问题？

这是我的函数，其中声明了数组：

```
void main()
{
     int errCode;
     float *pol1, *pol2;
     pol1 = pol2 = NULL;
     errCode = inputPol("A", pol1);
     if (errCode != 0)
     { 
         return;
     }

     // using pol1 array

     c = getchar();
} 
```

这是带有初始化的函数：

```
int inputPol(char* c, float *pol)
{
    pol= (float *) calloc(13, sizeof( float ) );
    while( TRUE )
    {
         // While smth happens
         pol[i] = 42;
         i++;
    };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T11:29:59.303

您需要传递 pol1 的地址，以便 main 知道分配的内存在哪里：

```
void main()
{
    int errCode;
    float *pol1, *pol2;
    pol1 = pol2 = NULL;
    errCode = inputPol("A", &pol1);
    if (errCode != 0)
    { 
         return;
    }

    // using pol1 array

    c = getchar();
}

int inputPol(char* c, float **pol)
{
    *pol= (float *) calloc(13, sizeof( float ) );
    while( TRUE )
    {
         // While smth happens
         (*pol)[i] = 42;
         i++;
    };
} 
```

# ruby-on-rails - 在 check_box_tag 中生成自定义属性

> ID：13540739
> 
> 赞同：7
> 
> 时间：2012-11-24T11:26:43.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想生成带有自定义 html 属性的复选框（稍后使用 UJS）。这是我的查看代码

```
<%= check_box_tag "data-toggle-completed" => "" %> 
```

它给了我

```
<input id="__data-toggle-completed______" name="{&quot;data-toggle-completed&quot;=&gt;&quot;&quot;}" type="checkbox" value="1"> 
```

但我想要

```
 <input type="checkbox" data-toggle-completed=""> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-24T11:47:46.177

您必须将自定义属性作为第四个参数，选项。前三个参数是 name，value = "1"，checked = false。请参阅[check_box_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)。

代码可能是这样的：

```
<%= check_box_tag :name, 1, false, data: { "toggle-completed" => "" } %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-27T19:09:30.013

我正在使用刺激 js，因此对于自定义数据操作属性，我执行了以下操作

```
<%= check_box_tag :select_shipping_address, true , true, data:{action:"change->form#show_form"}%> 
```

# c# - 变量变化……另一个变量？

> ID：13540740
> 
> 赞同：1
> 
> 时间：2012-11-24T11:26:44.733
> 
> 标签：c#, variables, int, swap

在此处输入代码`我有一个名为 curPos 的变量，它存储两个整数。我有第二个变量 prevPos 存储两个整数。

所以我有以下代码

```
Console.WriteLine("{0}, {1}", curPos[0], curPos[1]); // 1, 25
Console.WriteLine("{0}, {1}", prevPos[0], prevPos[1]); // 1, 25
                    curPos[0]++;

Console.WriteLine("{0}, {1}", curPos[0], curPos[1]); // 2, 25
Console.WriteLine("{0}, {1}", prevPos[0], prevPos[1]); // 2, 25 
```

这怎么可能，这是我逐行到显示的最后一行时的确切代码 [http://www.youtube.com/watch?v=qkPKm7xEhac&feature=youtu.be](http://www.youtube.com/watch?v=qkPKm7xEhac&feature=youtu.be)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:31:02.430

两个变量都指向同一个数组。我的猜测是在你的代码中的某个时刻你有类似的东西：

```
prevPos = curPos 
```

当你真正想要的是

```
prevPos[0] = curPos[0]
prevPos[1] = curPos[1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:33:27.590

它们可能是两个不同的变量，但它们指向同一个对象。

变量是一种编译时构造，它为存储位置提供名称。在运行时，该存储位置就是我们通常所说的对象。

如果你说

```
var foo = int[]{0,1};
var bar = foo; 
```

您有一个可以通过两个变量访问的数组。随后，你是否这样做并不重要

```
foo[0]++; 
```

或者你输入

```
bar[00]++; 
```

结果是一样的。数组中的第一个整数加一。

只要变量的类型是引用类型（例如数组），这一点就成立。如果变量的类型是值类型，例如 int 或 Point，那么任何赋值都会创建一个副本

```
Point foo = new Point();
var bar = foo; 
```

在这种情况下 bar 和 foo 不指向同一个对象

# php - .htaccess rewriterule 和假目录

> ID：13540748
> 
> 赞同：1
> 
> 时间：2012-11-24T11:27:39.307
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在尝试使用 Apache 和 PHP 进行一些 URL 重写。这是出于 SEO 原因，因此 foo.com/product-category/product-title 变为 foo.com/product.php?id=999。我当然希望 URL 不改变并且是 SEO 友好的版本。

我有一个当前的站点，它有一个工作设置，但它非常是一个 hack，而不是一个可维护的解决方案，所以我正在努力做正确的事情！

目前我有： -

```
RewriteRule ^([a-zA-Z0-9_\ \-\%]+)/?($) /url_redirect.php?page=$1 [QSA,L] 
```

完美的工作， http: [//foo.com/random-url](http://foo.com/random-url?foo=1&bar=2) ?foo=1&bar=2 以 $_GET['page'] = 'random-url' 和 $_GET['foo'] 结束于 /url_redirect.php = 1 等等等等。

如果您更深一层，我希望发生完全相同的事情（例如[http://foo.com/non-existing-directory/random-url?foo=1&bar=2](http://foo.com/non-existing-directory/random-url?foo=1&bar=2)）

我*可以*将不存在的目录设为真正的目录，然后从那里 .htaccess 但必须有一种更简单的方法。我希望我不必对任何目录名称进行硬编码（这就是我当前解决方案的工作方式）。

我认为问题可能是正则表达式不正确，他们总是打败我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:55:46.903

我刚刚尝试过，但可能不是实现它的最佳方法（我不是重写大师）

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_\ \-\%]+)/([a-zA-Z0-9_\ \-\%]+)?($) url_redirect.php?page=$2 [QSA,L]
RewriteRule ^([a-zA-Z0-9_\ \-\%]+)/?($) url_redirect.php?page=$1 [QSA,L] 
```

抱歉，这是我的本地设置，这就是我认为您想要的方式！

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_\ \-\%]+)/([a-zA-Z0-9_\ \-\%]+)?($) /url_redirect.php?page=$2 [QSA,L]
RewriteRule ^([a-zA-Z0-9_\ \-\%]+)/?($) /url_redirect.php?page=$1 [QSA,L] 
```

注意 url_redirect.php 之前的 /

# javascript - 网页关闭 - 警告 - 页面未保存

> ID：13540750
> 
> 赞同：0
> 
> 时间：2012-11-24T11:28:00.023
> 
> 标签：javascript, warnings, shutdown

我有一个 html5 应用程序。它将内容发送到数据库。最初我是立即进行数据库更新，但是，现在我允许离线使用，而是让用户选择何时发送到数据库。（例如，如果他们在飞机上，他们可能想稍后再做。）

所以，现在的问题是，如果他们关闭，我想在他们关闭*之前*警告他们，如果他们未能发送任何未发送的数据，并允许他们在必要时返回发送它。在发送之前，我最终将使用本地存储，因此它不会丢失，但重要的是让用户知道它尚未发送。

我将有一个全局 g_bUnsentData = true; 如果有未发送的数据。

这可以在javascript中完成，你怎么做？

另外，顺便说一句，我如何测试在线状态，以便在用户离线并尝试发送数据时警告用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:08:30.320

请参阅@SmartK8 的评论。

尽管如此，如果您将函数绑定到`beforeunload`返回字符串的事件，大多数浏览器将显示该字符串并确认离开页面。例如：

![Chrome/Mac 上的离开页面确认](../Images/97f536688269b466da6dc810f0c4de28.png)

某些浏览器可能根本不会在确认中显示您返回的字符串。其他浏览器，尤其是移动浏览器，甚至不会阻止页面被导航。

用于测试在线状态，`navigator.onLine`是一个布尔值，表示网络可用性。它并非随处可用（Opera、Firefox），但它是一个开始。有关更多详细信息，请参阅[html5 Rocks 上的此页面](http://www.html5rocks.com/en/mobile/workingoffthegrid/)。

# javascript - 如何使用 Javascript 从输入框值中获取总和？

> ID：13540751
> 
> 赞同：22
> 
> 时间：2012-11-24T11:28:18.317
> 
> 标签：javascript, sum, calculator

我在 Javascript 中并不完美。我想在不刷新页面的下一个名为 total 的输入框中显示在 qty 输入框中输入的值的总和。谁能帮我弄清楚..？

这是javascript

```
 <script type="text/javascript"> 
 var howmanytoadd = 2;
 var rows;

 function calc() {
     var tot = 0;
     for (var i = 0; i < rows.length; i++) {
         var linetot = 0;
         rows[i].getElementsByTagName('input')[howmanytoadd].value = linetot;
         tot += linetot;
     }
     document.getElementById('total').value = tot
 }
 onload = function () {
     rows = document.getElementById('tab').getElementById('qty1');
     for (var i = 0; i < rows.length; i++) {
         rows.getElementsByTagName('input')[i].onkeyup = calc;
     }
 }
</script> 
```

这是我的html代码：

```
Qty1 : <input type="text" name="qty1" id="qty"/><br>
Qty2 : <input type="text" name="qty2" id="qty"/><br>
Qty3 : <input type="text" name="qty3" id="qty"/><br>
Qty4 : <input type="text" name="qty4" id="qty"/><br>
Qty5 : <input type="text" name="qty5" id="qty"/><br>
Qty6 : <input type="text" name="qty6" id="qty"/><br>
Qty7 : <input type="text" name="qty7" id="qty"/><br>
Qty8 : <input type="text" name="qty8" id="qty"/><br>
<br><br>
Total : <input type="text" name="total" id="total"/> 
```

这是屏幕截图 ![这是屏幕截图](../Images/7ea262f46b8e86eccb9ee5e0e1a3290b.png)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-24T11:52:19.337

尝试：

```
Qty1 : <input onblur="findTotal()" type="text" name="qty" id="qty1"/><br>
Qty2 : <input onblur="findTotal()" type="text" name="qty" id="qty2"/><br>
Qty3 : <input onblur="findTotal()" type="text" name="qty" id="qty3"/><br>
Qty4 : <input onblur="findTotal()" type="text" name="qty" id="qty4"/><br>
Qty5 : <input onblur="findTotal()" type="text" name="qty" id="qty5"/><br>
Qty6 : <input onblur="findTotal()" type="text" name="qty" id="qty6"/><br>
Qty7 : <input onblur="findTotal()" type="text" name="qty" id="qty7"/><br>
Qty8 : <input onblur="findTotal()" type="text" name="qty" id="qty8"/><br>
<br><br>
Total : <input type="text" name="total" id="total"/>

    <script type="text/javascript">
function findTotal(){
    var arr = document.getElementsByName('qty');
    var tot=0;
    for(var i=0;i<arr.length;i++){
        if(parseInt(arr[i].value))
            tot += parseInt(arr[i].value);
    }
    document.getElementById('total').value = tot;
}

    </script> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-06-17T11:15:23.063

```
$(document).ready(function(){

		//iterate through each textboxes and add keyup
		//handler to trigger sum event
		$(".txt").each(function() {

			$(this).keyup(function(){
				calculateSum();
			});
		});

	});

	function calculateSum() {

		var sum = 0;
		//iterate through each textboxes and add the values
		$(".txt").each(function() {

			//add only if the value is number
			if(!isNaN(this.value) && this.value.length!=0) {
				sum += parseFloat(this.value);
			}

		});
		//.toFixed() method will roundoff the final sum to 2 decimal places
		$("#sum").html(sum.toFixed(2));
	}
```

```
body {
				font-family: sans-serif;
			}
			#summation {
				font-size: 18px;
				font-weight: bold;
				color:#174C68;
			}
			.txt {
				background-color: #FEFFB0;
				font-weight: bold;
				text-align: right;
			}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<table width="300px" border="1" style="border-collapse:collapse;background-color:#E8DCFF">
	<tr>
		<td width="40px">1</td>
		<td>Butter</td>
		<td><input class="txt" type="text" name="txt"/></td>
	</tr>
	<tr>
		<td>2</td>
		<td>Cheese</td>
		<td><input class="txt" type="text" name="txt"/></td>
	</tr>
	<tr>
		<td>3</td>
		<td>Eggs</td>
		<td><input class="txt" type="text" name="txt"/></td>
	</tr>
	<tr>
		<td>4</td>
		<td>Milk</td>
		<td><input class="txt" type="text" name="txt"/></td>
	</tr>
	<tr>
		<td>5</td>
		<td>Bread</td>
		<td><input class="txt" type="text" name="txt"/></td>
	</tr>
	<tr>
		<td>6</td>
		<td>Soap</td>
		<td><input class="txt" type="text" name="txt"/></td>
	</tr>
	<tr id="summation">
		<td>&nbsp;</td>
		<td align="right">Sum :</td>
		<td align="center"><span id="sum">0</span></td>
	</tr>
</table>
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-24T12:00:56.240

Javascript：

```
window.sumInputs = function() {
    var inputs = document.getElementsByTagName('input'),
        result = document.getElementById('total'),
        sum = 0;            

    for(var i=0; i<inputs.length; i++) {
        var ip = inputs[i];

        if (ip.name && ip.name.indexOf("total") < 0) {
            sum += parseInt(ip.value) || 0;
        }

    }

    result.value = sum;
}​ 
```

html:

```
Qty1 : <input type="text" name="qty1" id="qty"/><br>
Qty2 : <input type="text" name="qty2" id="qty"/><br>
Qty3 : <input type="text" name="qty3" id="qty"/><br>
Qty4 : <input type="text" name="qty4" id="qty"/><br>
Qty5 : <input type="text" name="qty5" id="qty"/><br>
Qty6 : <input type="text" name="qty6" id="qty"/><br
Qty7 : <input type="text" name="qty7" id="qty"/><br>
Qty8 : <input type="text" name="qty8" id="qty"/><br>
<br><br>
Total : <input type="text" name="total" id="total"/>

<a href="javascript:sumInputs()">Sum</a> 
```

示例：http: [//jsfiddle.net/fRd9N/1/](http://jsfiddle.net/fRd9N/1/)

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-16T16:39:47.520

使用小数求和：

在 javascript 中用 parseFloat 更改 parseInt 并添加这一行 tot.toFixed(2); 对于这个结果：

```
 function findTotal(){
    var arr = document.getElementsByName('qty');
    var tot=0;
    for(var i=0;i<arr.length;i++){
        if(parseFloat(arr[i].value))
            tot += parseFloat(arr[i].value);
    }
    document.getElementById('total').value = tot;
    tot.toFixed(2);
} 
```

在输入字段中使用 step=".01" min="0" type="number"

```
Qty1 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty1"/><br>
Qty2 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty2"/><br>
Qty3 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty3"/><br>
Qty4 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty4"/><br>
Qty5 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty5"/><br>
Qty6 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty6"/><br>
Qty7 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty7"/><br>
Qty8 : <input onblur="findTotal()" step=".01" min="0" type="number" name="qty" id="qty8"/><br>
<br><br>
Total : <input type="number" step=".01" min="0" name="total" id="total"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-12T04:10:24.227

这是完整的解决方案 [测试 100% 工作]

```
<div id="FormData">
    Qty1 : <input class="qty" type="text" name="qty" id="qty1" value="" /><br>
    Qty2 : <input class="qty" type="text" name="qty" id="qty2" value="" /><br>
    Qty3 : <input class="qty" type="text" name="qty" id="qty3" value="" /><br>
    Qty4 : <input class="qty" type="text" name="qty" id="qty4" value="" /><br>
    Qty5 : <input class="qty" type="text" name="qty" id="qty5" value="" /><br>
    Qty6 : <input class="qty" type="text" name="qty" id="qty6" value="" /><br>
    Qty7 : <input class="qty" type="text" name="qty" id="qty7" value="" /><br>
    Qty8 : <input class="qty" type="text" name="qty" id="qty8" value="" /><br>
    <br><br>
    Total : <input type="text" name="total" id="total" />
</div>
<script>
    $(function () {
        $("#FormData").on('change, blur', '.qty', function () {
            findTotal();
        })
    });

    function findTotal() {
        var maxD = 0;
        var array = [];
        var total = 0;
        $("#FormData .qty").each(function (key, val) {
            var value = $(this).val();

            if (!isNaN(value) && value.length != 0) {
                total += parseFloat(value);
                array[key] = GetMax(parseFloat(value));
            }
        })

        maxD = Math.max.apply(Math, array);
        if (maxD == -Infinity) {
            maxD = 0;
        }

        if (maxD != -Infinity) {
            $("#total").val(total.toFixed(maxD));
        }
    }
    function GetMax(val) {
        var s = [];
        s = val.toString().split(".");
        if (s.length > 1)
            return s[1].length;
        else
            return 0;
    }
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T11:56:50.837

试试这个：

```
function add() 
{
  var sum = 0;
  var inputs = document.getElementsByTagName("input");
  for(i = 0; i <= inputs.length; i++) 
  {
   if( inputs[i].name == 'qty'+i) 
   {
     sum += parseInt(input[i].value);
   }
  }
  console.log(sum)

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-13T08:49:35.827

我需要对跨度元素求和，所以我在下面编辑了 Akhil Sekharan 的答案。

```
var arr = document.querySelectorAll('span[id^="score"]');
var total=0;
    for(var i=0;i<arr.length;i++){
        if(parseInt(arr[i].innerHTML))
            total+= parseInt(arr[i].innerHTML);
    }
console.log(total) 
```

您可以使用其他元素更改元素链接将指导您进行编辑。

[https://www.w3.org/TR/css3-selectors/#attribute-substrings](https://www.w3.org/TR/css3-selectors/#attribute-substrings)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-20T11:41:44.050

这是一个使用 Akhil Sekharan 提供的更简单的解决方案，但稍作改动。

```
var inputs = document.getElementsByTagName('input');

for (var i = 0; i < inputs.length; i += 1) {
if(parseInt(inputs[i].value)){
        inputs[i].value = '';
       }
    }​​​​
document.getElementById('total').value = total; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-02T05:07:18.130

我尝试了上面 Waruna Manujula 的代码，并且作为示例工作得很好。但是，如果我想从 mysql 获取数据并运行总和呢？我尝试像下面那样做，但总和不起作用？我知道我必须编辑一些脚本，但我不知道该怎么做..

```
 <script type="text/javascript"> 
            $(document).ready(function()
            {
            //iterate through each textboxes and add keyup
            //handler to trigger sum event
            $(".txt").each(function() 
            {
            $(this).keyup(function()
            {
                calculateSum();
            });
            });
            });
            function calculateSum() 
            {
            var sum = 0;
            //iterate through each textboxes and add the values
            $(".txt").each(function() 
            {
            //add only if the value is number
            if(!isNaN(this.value) && this.value.length!=0) 
            {
                sum += parseFloat(this.value);
            }
            });
            //.toFixed() method will roundoff the final sum to 2 decimal places
            $("#sum").html(sum.toFixed(2));
            }
            </script>

            <table>
            <tr>
            <td>1</td>
            <td>Cost_1</td>
            <td><input class="txt" type="text" name="txt" value="<?php echo isset($row[0]['cost_1'])?$row[0]['cost_1']:''; ?>"/></td>
            </tr>
            <tr>
            <td>2</td>
            <td>Cost_2</td>
            <td><input class="txt" type="text" name="txt" value="<?php echo isset($row[0]['cost_2'])?$row[0]['cost_2']:''; ?>"/></td>
            </tr>

            <tr id="summation">
            <td>&nbsp;</td>
            <td align="left">Total_cost :</td>
            <td align="center"><span id="sum">0</span></td>
            </tr>
            </table> 
```

# perl - 短路并给出不正确的结果？

> ID：13540752
> 
> 赞同：2
> 
> 时间：2012-11-24T11:28:28.840
> 
> 标签：perl, short-circuiting, operation

我遇到了 Perl 短路的奇怪结果，即`&&`.

我正在尝试解决 Project Euler 问题，我希望某个数字可以被数字列表整除。

```
$b=42;

if($b%21==0 && b%2==0 && b%5==2){print "Why not?"}; 
```

应该尽我所能打印`"Why not"`，但保持沉默。

```
$b=42;

if($b%21==0 && b%2==0 && b%5==0){print "WTF?"}; 
```

应该保持沉默，但打印`"WTF?"`.

是什么赋予了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T11:44:14.517

正如 Rohit 回答的那样，解决方案是`$`在`b`. 它不打印`"Why not?"`但打印`"WTF`" 的确切原因是这样的：当您给出`b`不带`$`符号的 ( 并且没有`use strict;`生效的) 时，Perl 将 the`b`视为字符串`"b"`。然后当您在其上应用运算符`%`时，因为`%`是数字运算符， Perl 在字符串中查找`"b"`并检查它是否以数字开头。既然不是，Perl 将数值`"b"`作为 0，然后应用 mod (%) 操作。0%5 是 0 而不是 2，所以`WTF`是打印而不是`"Why not?"`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-24T11:31:19.090

始终使用`use strict`和`use warnings`。

您将最后两个`b's`用作裸词，这将显示为警告 -`"Unquoted string "b" may clash with future reserved word"`

您需要将您的更改`if`为： -

```
if($b%21==0 && $b%2==0 && $b%5==2){print "Why not?"}; 
```

和： -

```
if($b%21==0 && $b%2==0 && $b%5==0){print "WTF?"}; 
```

给出预期的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T11:33:44.823

if($b%21==0 && $b%2==0 && $b%5==2){print "为什么不呢？"};

在这里工作，你忘记了 $，但显然你已经找到了它:)

# javascript - 创建 javascript 数组（多维）或 javascript 对象是一种更好的方法

> ID：13540755
> 
> 赞同：-1
> 
> 时间：2012-11-24T11:29:20.200
> 
> 标签：javascript, json, jquery, multidimensional-array

下面是json结构：

```
jsonResponse
    Folder 01
        Product 01 - Folder 01
        Product 02 - Folder 01
        Product 03 - Folder 01
    Folder 02
        Product 01 - Folder 02
        Product 02 - Folder 02
        Product 03 - Folder 02
    Folder 03
        Product 01 - Folder 03
        Product 02 - Folder 03
        Product 03 - Folder 03
    Folder 04
        Product 01 - Folder 04
        Product 02 - Folder 04
        Product 03 - Folder 04 
```

我的要求是将文件夹名称和产品存储在相应的文件夹中。我能够将文件夹名称存储在一个数组中，但需要将产品存储在相应的文件夹中，这是我无法完成的。我正在使用 jquery1.8 来读取 json 响应，然后通过使用每个函数来创建文件夹数组。

对此高度赞赏的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:42:29.073

我会创建一个文件夹对象数组，其中每个对象都包含一个产品对象数组。这样可以灵活地保存您合理需要发送的有关文件夹和产品的任何其他数据，例如产品的价格。

结构示例：

```
var folders = [
  {
    name: 'Folder 01',
    products [
      { name : 'Product 01' },
      { name : 'Product 02' },
      { name : 'Product 03' }
    ]
  },
  {
    name: 'Folder 02',
    products [
      { name : 'Product 01' },
      { name : 'Product 02' }
    ]
  }
]; 
```

从数据构建数组的示例：

```
var folders = [];

// data that you would get from looping the JSON data:
var folderName = 'Folder 01'
var products = ['Product 01', 'Product 02'];

var prod = [];
for (var i = 0; i < products.length; i++) {
  prod.push({ name: products[i] });
}
var folder = { name: folderName, products: prod };
folders.push(folder); 
```

# php - 突出显示 PHP 中的代码行数组

> ID：13540756
> 
> 赞同：0
> 
> 时间：2012-11-24T11:29:30.750
> 
> 标签：php

我有一个关联数组，其中每个值都包含一行代码。我在`foreach()`循环中显示它们。我怎样才能突出显示所有这些？

我找到了这个`highlight_string()`功能。它确实有效，是的，但仅限于代码周围的 PHP 标记。问题是我不想显示这些标签。它是一个数组，因此应该将标签添加到每个值中，这会使结果看起来很难看。

将标签添加到数组的开头和结尾也不起作用 - 我不会`highlight_string()`在整个数组上使用（环绕`foreach()`循环）。

如果我去掉 PHP 标记，突出显示将停止工作。

有没有办法在不包括 3rd 方应用程序的情况下做到这一点？

例子：

这是数组：

```
$var = array(0 => 'for($i=0;$i<5;$i++)', 1 => '// do something', 2 => '$i++', 3 => '}'); 
```

这就是我一个接一个地显示代码行的方式：

```
foreach($var as $line) 
{
   echo $line . '<br>';
} 
```

我想将它们显示为突出显示的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:35:57.053

希望这将在这里有所帮助：

```
$code_array = array(
    '<?php',
    'echo "Hello";',
    '?>'
);

echo highlight_string(implode("\r\n", $code_array), TRUE); 
```

加法：由于您添加了代码示例，这也将起作用:)

```
$var = array(0 => 'for($i=0;$i<5;$i++)', 1 => '// do something', 2 => '$i++', 3 => '}');
$var = array_merge(array('<?php'), $var, array('?>'));
echo highlight_string(implode("\r\n", $var), TRUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:35:50.410

尝试使用[GeSHi](http://qbnz.com/highlighter/)。它被许多网站和开源项目使用。

# c - C MVS-Input 10位以上

> ID：13540760
> 
> 赞同：1
> 
> 时间：2012-11-24T11:30:06.613
> 
> 标签：c

最近我尝试编写一个在给定 n 中搜索某个数字的代码。该代码运行良好，但是当我尝试插入超过 10 位的 n 时，它变得非常糟糕。

显然它与代码无关，我只是不能插入超过 10 位数字。我肯定错过了什么...

例如这个简单的代码

```
#include <stdio.h>

int main()
{
  long int n;

  scanf("%ld", &n);

  printf("%ld", n);

  return 0;
} 
```

如果我给它 1111111111 它会打印同样的东西，因为它少于 11 个数字 如果我尝试给它 11111111111 它会给我类似 -1773790777 的东西为什么会发生在我身上？我究竟做错了什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:34:14.943

我猜你在一台 32 位机器上，这意味着它`long int`只有 32 位，这意味着它可以保存负 20 亿到正 20 亿之间的值。当您尝试输入更多内容时，该值将结束。

`long long int`如果您的编译器支持，您应该开始使用 64 位值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:36:05.630

有符号整数溢出是*未定义的行为。*我认为你`long int`是 4 个字节，当你输入一个比它可以容纳的更大的数字时会导致溢出。

# c# - 为什么我的班级拒绝绑定到 ListBox？

> ID：13540761
> 
> 赞同：1
> 
> 时间：2012-11-24T11:30:09.387
> 
> 标签：c#, windows-phone-7

我不知道我的代码有什么问题，它没有显示错误，但是当我运行代码时，模拟器中没有出现列表框。代码的目的是在超链接元素旁边显示缩略图。我已经检查过了所有图像位置都是有效的，并且所有图像都已设置为类型内容。

```
 public class element
    {
       public string imageLocation { get; set; }
       public string name {get; set; }
    }

    var source = List<element>();
    //I then populate source with 4 elements (code omitted)
    //The source list was created successfully

    listBoxName.itemsSource = source; 
```

在 Xaml 中

```
<ListBox Name ="listBoxName"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                                            >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Canvas Name="List" 
                                 Tap="tapped_Click" 
                                 Background="Blue"   
                                 Height="100" Margin="0,0,0,0">

                            <Image  Name="Thumbnail"    
                                    Source="{Binding imageLocation}"     
                                     Height="102" Width="126" />

                            <HyperlinkButton Name="link" 
                                             Content="{Binding name}" 
                                             Margin="0,0,0,84" Canvas.Left="128" 
                                             Canvas.Top="2" Height="96" Width="348" 
                                             FontSize="30" HorizontalAlignment="Left"/>
                        </Canvas>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:27:37.747

您的列表框已正确绑定，但未显示，因为它的宽度等于 0。

设置画布的宽度，或使用另一种容器（如网格）：

```
<ListBox Name ="listBoxName"
                HorizontalAlignment="Left"
                VerticalAlignment="Top">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Canvas Name="List" 
                    Tap="tapped_Click" 
                    Background="Blue"   
                    Height="100" Width="476" Margin="0,0,0,0">

                <Image  Name="Thumbnail"    
                        Source="{Binding imageLocation}"     
                        Height="102" Width="126" />

                <HyperlinkButton Name="link" 
                                Content="{Binding name}" 
                                Margin="0,0,0,84" Canvas.Left="128" 
                                Canvas.Top="2" Height="96" Width="348" 
                                FontSize="30" HorizontalAlignment="Left"/>
            </Canvas>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# php - 联系表单提交按钮 - 禁用重定向

> ID：13540762
> 
> 赞同：0
> 
> 时间：2012-11-24T11:30:11.300
> 
> 标签：php, forms, redirect, submit, contact

我正在使用我在这里找到的一个简单的 php 表单[http://www.1stwebdesigner.com/tutorials/custom-php-contact-forms/comment-page-2/#comments](http://www.1stwebdesigner.com/tutorials/custom-php-contact-forms/comment-page-2/#comments)

但我有一些问题。单击提交按钮时，我希望能够留在我的网站上，而不是在 mail.php 上被重定向，而只是在我的网站上打印/回显发送的消息。

另外我想让字段有要求，比如不是空的，我知道如何在 php 中做，但我必须首先解决重定向问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:36:03.303

你需要的是[来自 jQuery 的 $.ajax](http://api.jquery.com/jQuery.ajax/)。这将发送 POST 请求而不重新加载页面。

假设您的按钮被调用`myButton`，然后`onClick()`您将调用该函数的事件

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).success(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

然后，您`some.php`只需使用`$_POST['name']`和`$_POST['location']`检索信息。

**编辑**

假设您有一个输入字段。您也可以通过 jQuery 从此类字段中检索信息。然后，您可以通过 ajax 将输入字段中的信息发送到您的 php 脚本

```
$('#yourInputField').val(); 
```

其中`yourInputField`是输入字段的 ID。有了这个，您可以将此信息传递给脚本。如果表单中有多个元素，您可能需要查看函数[serialize()](http://api.jquery.com/serialize/)。原则上做同样的事情，只是将所有信息压缩成一个 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:39:34.593

停留在同一页面上，您只需将表单操作设置为当前页面，然后您可以使用：

```
if (isset ($_POST['submit'])){
(php code to run goes in here)
echo 'blah blah';
} 
```

当按下提交按钮时，它将运行 php 代码:)

然而，这仍然会重新加载页面，但不会将您定向到不同的 php 页面。如果您根本不希望页面重新加载，那么您可以使用 ajax :)

# c# - 什么是 AsyncOperationManager 的 .NET 4.5 Windows 应用商店应用程序？

> ID：13540763
> 
> 赞同：0
> 
> 时间：2012-11-24T11:30:14.040
> 
> 标签：c#, .net, asynchronous, .net-4.5, windows-store-apps

目前正在为我的新 Surface 设备开发 Windows Store 应用程序，我正在尝试从 .NET 2.0 WinForms 移植一个小型应用程序。

我正在使用[`AsyncOperationManager`该类](http://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperationmanager.aspx)来[实现支持基于事件的异步模式的组件](http://msdn2.microsoft.com/en-us/library/bz33kx67.aspx)。似乎不支持在 Windows 应用商店应用程序中使用此类。

[可能我必须使用.NET 4.5 中](http://msdn.microsoft.com/en-us/library/hh156548.aspx)的那些新异步函数从头开始重写应用程序/类，但可能还有更简单的方法可以继续。

**因此我的问题是：**

.NET 4.5 Windows Store Apps 中是否有该类的直接替代品`AsyncOperationManager`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:57:44.830

这似乎是您最终将使用新框架重写此代码的领域之一。MS警告说会有这些情况，他们没有撒谎。我有一个类似的项目，我正在尝试移植，并且在很多情况下我不得不重写代码。我将更深入地研究这一点，但我前 30 分钟的研究并没有发现任何有希望的东西。

# android - Android LiveWallpaper xOffset 令人困惑？

> ID：13540764
> 
> 赞同：1
> 
> 时间：2012-11-24T11:30:54.167
> 
> 标签：android

在 android 中，xOffset 值让我感到困惑，如果你有 5 个屏幕，它会变成 0.0 - 0.25 - 0.5 - 0.75 - 1，例如，如果 xOffset 为 1，那么你在第 5 个屏幕上。

我有一个宽度为 1000 的图像。我想对图像进行滚动效果，我用 xOffset 更新图像 X 位置；

```
 public void update() {   
        float newImageX =  - (X_OFFSET * image.getWidth());
        image.setX(newWorldX);
   } 
```

但它移动太多了。例如，用户有 5 个屏幕，int 5th screen xOffset 为 1，由于我的算法，所有 imgae 都移出屏幕。

我很困惑，显然我需要更多有用的数据/值来计算运动效果。有任何想法吗 ？

# java - 在java中调整图像大小

> ID：13540767
> 
> 赞同：1
> 
> 时间：2012-11-24T11:31:09.940
> 
> 标签：java, image, resize

我有一个 java 应用程序允许用户从他的相机拍摄照片并使用网络服务将其发送给我，但我的问题是在发送图像时。发送进度需要很长时间，因为图像很大，所以我想压缩图像。我试图：

1-使用此代码：

```
Bitmap img = BitmapFactory.decodeFile("C:\\test.jpg");

ByteArrayOutputStream streem = new ByteArrayOutputStream();  
img.compress(Bitmap.CompressFormat.JPEG, 75, streem);
byte[] b = streem.toByteArray(); 
```

但是这段代码在我的情况下是无用的，因为它使图像非常糟糕并且对图像大小的影响很大。

2- 搜索很多关于调整大小的方法，但所有结果都使用 BufferedImage。我不能使用这种类型（类），因为它需要大量内存：

```
private static BufferedImage resizeImage(BufferedImage originalImage, int type)
{
    BufferedImage resizedImage = new BufferedImage(new_w, new_h, type);
    Graphics2D g = resizedImage.createGraphics();
    g.drawImage(originalImage, 0, 0, new_w, new_h, null);
    g.dispose();

    return resizedImage;
} 
```

我想改用位图，任何人都可以在我的应用程序中帮助我？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:54:39.447

用于[`ImageIO`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html)写入`BufferedImage`您需要的格式

您可以提供一个输出流，`ImageIO`因此您应该能够写入几乎任何地方。

查看[写入/保存图像](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)了解更多详情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:23:30.490

我找到了这些方法：

```
private static int CalculateInSampleSize(BitmapFactory.Options options,
        int reqWidth, int reqHeight) {
    float height = (float) options.outHeight;
    float width = (float) options.outWidth;
    float inSampleSize = 0;

    if (height > reqHeight || width > reqWidth) {
        inSampleSize = width > height ? height / reqHeight : width
                / reqWidth;
    }

    return (int) Math.round(inSampleSize);
}

public static byte[] ResizeImage(int reqWidth, int reqHeight, byte[] buffer) {
    BitmapFactory.Options op = new Options();
    op.inJustDecodeBounds = true;

    BitmapFactory.decodeByteArray(buffer, 0, buffer.length, op);

    op.inSampleSize = CalculateInSampleSize(op, reqWidth, reqHeight);

    op.inJustDecodeBounds = false;
    try {
        return ToByte(BitmapFactory.decodeByteArray(buffer, 0,
                buffer.length, op));
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }

} 
```

# winapi - PushSource 过滤器也推送样本以进行渲染

> ID：13540768
> 
> 赞同：1
> 
> 时间：2012-11-24T11:31:10.797
> 
> 标签：winapi, visual-c++, directshow

我对directshow有点陌生。我正在使用 DirectShow 提供的 PushSource 过滤器示例将 bmp 图像序列推送到 avi 文件。但在此之前，我试图查看过滤器是否能够呈现样本。尽管过滤器正在正常运行并填充缓冲区，但渲染器只能显示第一帧。我把`printf`在不同的阶段，看看流程。
我觉得 PushSource 运行太快，渲染被挂了。
请提供一些建议如何使两者同步。
如果我遗漏了什么，也请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:15:25.290

您可能会错过时间戳，忽略它们或可能将垃圾留在应该正确的地方。您将希望推送过滤器正确标记样本，以便多路复用器和渲染器对样本呈现时间毫无疑问。

# django - Django 构建嵌套表单集

> ID：13540769
> 
> 赞同：3
> 
> 时间：2012-11-24T11:31:12.500
> 
> 标签：django, django-forms, formset

我试图弄清楚如何在 Django 中创建嵌套的表单集。我注意到嵌套表单集还有其他几个问题，但我似乎无法弄清楚如何将它全部应用到我的案例中（我对 Django 很陌生）。

我一直在看这里的例子：http: [//yergler.net/blog/2009/09/27/nested-formsets-with-django/](http://yergler.net/blog/2009/09/27/nested-formsets-with-django/) - 虽然我使用的是 Django 1.3，显然这个例子需要一些调整与 1.3 一起工作。我的另一个细微差别是，在我的模型中，不是在积木构建（或在我的情况下是测验问题）之间存在一对多的关系，而是我有一个多对多的关系（因为我可能在未来，但不是现在，想让同一个问题出现在多个测验中） - 但我不认为这是我当前错误的原因。

到目前为止，我有：

表格.py：

```
ResponseFormset = inlineformset_factory(Question, Response, extra=4) 

class BaseQuestionFormSet(BaseFormSet):
    def add_fields(self, form, index):
        super(BaseQuestionFormSet, self).add_fields(form, index)
        # created the nested formset
        try:
            instance = self.get_queryset()[index]
            pk_value = instance.pk
        except IndexError:
            instance=None
            pk_value = hash(form.prefix)

        # store the formset in the .nested property
        form.nested = [
            ResponseFormset(data=self.data,
                            instance = instance,
                            prefix = 'RESPONSES_%s' % pk_value)]

class QuizForm(ModelForm):
    class Meta:
        model = Quiz
        fields = ('title', 'description')
        widgets = {
            'title': forms.TextInput(),     
            'description': forms.Textarea(attrs={'cols': 80, 'rows': 3}),
        }

class QuestionForm(ModelForm):
    class Meta:
        model = Question
        fields = ('title', 'type')
        widgets = {     
            'title': forms.Textarea(attrs={'cols': 80, 'rows': 3}),
        }

class ResponseForm(ModelForm):
    class Meta:
        model = Response
        fields = ('title', 'score')
        widgets = {     
            'title': forms.TextInput(),
            'score': forms.DecimalField,
        } 
```

然后在views.py中：

```
def create_quiz(request):
    QuestionFormSet = formset_factory(QuestionForm,extra=5,formset=BaseQuestionFormSet)

    if request.method == 'POST':

        quiz_form = QuizForm(request.POST)
        question_formset = forms.QuestionFormSet(request.POST,)

        if quiz_form.is_valid():
            quiz = quiz_form.save(commit=False)
            quiz.owner = request.user
            quiz.save()

            #if question_formset.is_valid():
                # do something here 

            #return HttpResponseRedirect('saved/')
    else:
        quiz_form = QuizForm() # An unbound form
        question_formset = QuestionFormSet()

    return render(request, 'mquiz/quiz.html', {'quiz_form': quiz_form,'question_formset':question_formset}) 
```

我得到的错误是：

```
'QuestionFormFormSet' object has no attribute 'get_queryset' 
```

该示例显然是用于编辑现有的块对象，但现在我只是想创建新的测验/问题（因此使用空表单 - 一旦创建工作将返回编辑它） - 所以猜测那是部分问题？另外我认为我搞混了，因为我的问题没有实例=测验（在 Yergler 示例中，每个建筑物都有一个实例=块）。

非常感谢任何帮助或指示！亚历克斯

# xslt - 使用 XSLT 在 15-16 个标题的集合中检索第 5 到第 10 个标题的值

> ID：13540777
> 
> 赞同：2
> 
> 时间：2012-11-24T11:31:56.070
> 
> 标签：xslt

下面是我的 XML 文件，我想使用某种形式的计数函数和 XSLT 来检索 XML 文件的标题 3 到 4。请帮助...感谢您的帮助

```
<?xml version="1.0">
<catalog>
<cd>
    <title>Empire Burlesque</title>
</cd>
<cd>
    <title>Hide your heart</title>
</cd>
<cd>
    <title>Greatest Hits</title>
</cd>
<cd>
    <title>Still got the blues</title>
</cd>
</catalog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:00:12.613

**这种简短而完全“推式”的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="cd/node()"/>
 <xsl:template match="cd[position() >= 3 and 4 >= position()]/title">
     <xsl:copy><xsl:apply-templates/></xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<catalog>
    <cd>
        <title>Empire Burlesque</title>
    </cd>
    <cd>
        <title>Hide your heart</title>
    </cd>
    <cd>
        <title>Greatest Hits</title>
    </cd>
    <cd>
        <title>Still got the blues</title>
    </cd>
</catalog> 
```

**产生想要的正确结果：**

```
<title>Greatest Hits</title>
<title>Still got the blues</title> 
```

**说明**：

1.  空体模板`<xsl:template match="cd/node()"/>`可防止处理（“删除”） a 的任何子级`cd`。

2.  第二个模板仅针对不小于 3 且不大于 4 的 a 的子元素覆盖第一个模板。它有效地复制匹配的`title`元素。`cd``position()``title`

3.  该`<xsl:strip-space elements="*"/>`指令通过从 XML 文档中删除所有仅包含空格的文本节点来使这一切成为可能。这样，`cd`由指令形成的节点列表中的元素位置（在元素`<xsl:apply-templates>`的内置 XSLT 模板中）将是 1、2、3、4 而不是 2、4、6、8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:12:26.593

您正在寻找[`position()`](http://www.w3.org/TR/xpath/#function-position "在第 4.1 节，“节点集函数”中，XML 路径语言 (XPath) 版本 1.0")XPath 函数。

例如：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <result>
      <xsl:copy-of 
        select="catalog/cd[position() &gt;= 3 and position() &lt;= 4]/title"/>
    </result>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:44:34.907

尝试这个：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<result>
 <cd><xsl:value-of select="catalog/cd[3]/title"/></cd>
 <cd><xsl:value-of select="catalog/cd[4]/title"/></cd>
</result>
</xsl:template>
</xsl:stylesheet> 
```

# c++ - 当值指向指针时尝试读取或写入受保护的内存

> ID：13540778
> 
> 赞同：5
> 
> 时间：2012-11-24T11:32:15.460
> 
> 标签：c++, compiler-errors

我有这个代码：

```
typedef struct {
    string fName;
    string str; 

}t;

//-------Other functions------//
void BeginTh()
{
    string arg = "yes";
    t *arglist;
    arglist = (t*)malloc(sizeof(t));
    arglist->fName = "comBomber";
    arglist->str = arg;
    _beginthread(startOver, 0, (void*)arglist);
    free(arglist);
} 
```

在 'arglist->fName = "comBomber";' 我收到此错误：

```
An unhandled exception of type 'System.AccessViolationException' occurred in <appname>

Additional information: Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

任何人都可以帮助我吗？如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T12:12:15.333

我建议现代 C++ 风格：

```
#include <future>
#include <string>

struct arg_t {
    std::string fName;
    std::string str; 
};

int startOver(int i, arg_t args)
{
    return args.fName.size() + args.str.size() + 42;
}

int main()
{
    const std::string arg = "yes";
    arg_t args = { "comBomber", arg };
    auto worker = std::async(startOver, 0, args);
    return worker.get();
} 
```

[在http://ideone.com/zrXcwH](http://ideone.com/zrXcwH)上查看它（它无法运行，因为 ideone 不支持该`pthread`库）。我用 MS Visual C++ 对此进行了测试。

如果`arg_t`复制成本很高，您可以简单地将其移动到另一个线程：

```
auto worker = std::async(startOver, 0, std::move(args)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T11:34:37.630

一个问题是您的`t`实例未正确初始化。您可以通过使用`new`而不是`malloc`您的结构包含 a来解决此问题，`string`需要调用其构造函数。调用`new`可确保`t`正确构造对象。

```
 t* arglist = new t; 
```

然后通过调用“释放”内存`delete`：

```
delete arglist; 
```

这就指向了第二个问题，即`t`在线程的整个执行过程中必须保证你的实例是存活的。在线程完成之前，您不应取消分配其内存。这是一个 C++ 示例，其中`t`保证对象的寿命比线程长：

```
#include <thread>

int main()
{
  t arglist = whatever;
  std::thread t(startover, &whatever); // launches thread which runs startover(&arglist)

  // do other stuff

  t.join(); // wait for thread execution to finish

} 
```

通常，您应该使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)，而不是使用原始指针来动态分配对象。

`typedef`顺便说一句，在 C++中声明 a的语法`struct`看起来很奇怪。通常，您会这样做：

```
struct t {
    string fName;
    string str; 
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T11:34:18.783

`malloc`只会为对象分配内存但不会调用它的构造函数

你需要换新的

```
t *arglist = new t; 
```

此外，不要在 startOver 线程获取其内容之前释放 arglist 内存块。您可以在线程内或其他地方释放它。

```
void startOver(void* param)
{
  Param* param_ = (Param*)param;  // get hold of param pointer
  while(true){
    // do something
   }
  delete param_;  // release param when thread finishes
}

void BeginTh()
{
    Param *param = new Param();
    param->fName = "abcd";
    param->str = "yes";
    _beginthread(startOver, 0, (void*)param);
 } 
```

# java - 尝试运行 Android 应用程序时出现 NoClassDefFoundError

> ID：13540785
> 
> 赞同：0
> 
> 时间：2012-11-24T11:33:14.727
> 
> 标签：java, android, noclassdeffounderror

我正在为 Eclipse 使用 ADT 版本 21 插件，并且正在为 Android 4.2 平台编程。我最初编写了一个 Java 客户端-服务器应用程序，我想将我在其中编写的一些类用于我现在正在编写的 Android 应用程序。我尝试将 Java 类文件导出到 JAR 文件并将 JAR 文件放在`libs`我的 Android 应用程序的目录中，但是当我尝试在我的 Nexus 4 上运行该应用程序时，`NoClassDefFoundError`抛出了 a。我搜索了一些答案并尝试了一些建议，例如在“属性”窗口的“订单和导出”选项卡中包含 JAR 文件（并将其放在列表的顶部），但我被卡住了。Eclipse 可以很好地编译我的 Android 应用程序，但我无法在我的设备上运行我的应用程序。

我知道以前有人问过这个问题，并且有几个用户遇到过同样的问题。我欢迎所有建议。（我刚开始学习 Android 应用程序开发。）谢谢！

**编辑：**我刚刚注意到控制台输出中的这些行。有任何想法吗？

```
[2012-11-24 01:26:26 - HomePage] Dx bad class file magic (cafebabe) or version (0033.0000)
...while parsing org/nihongo/common/db/Commands.class
...while processing org/nihongo/common/db/Commands.class 
```

**编辑：**我认为这可能是因为我使用的是 Java 7 而不是 Java 6。请参见[此处](https://stackoverflow.com/questions/7866723/dx-bad-class-file-magic-cafebabe-or-version-0033-0000-with-adk14)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T12:07:23.113

当 Java 虚拟机无法在运行时找到在编译期间可用的特定类时，Java 中的 NoClassDefFoundError 就会出现。

当您制作使用 Google API（例如地图）但在以 Android API 为目标的设备上运行的应用程序时，也会生成此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:56:31.013

我在客户端-服务器应用程序中将编译器从 Java 7 切换到 Java 6。我将我想要的类导出到一个 JAR 文件中，并将它包含在我的 Android 应用程序中，现在看起来它可以工作了！

所以我猜即使在 Android 4.2 上也只支持 Java 6。

# macos - 无法打开与手机的 SCOAudio 连接

> ID：13540787
> 
> 赞同：36
> 
> 时间：2012-11-24T11:33:18.850
> 
> 标签：macos, audio, bluetooth, iobluetooth

我正在尝试`IOBluetooth framework`在**OS X 10.8.2**上使用蓝牙功能的手机将计算机模拟为免提设备。我可以成功与手机建立连接，并且手机可以将连接识别为免提连接到手机。但是，当我尝试用手机拨打电话并想将音频发送到 mac（通过选择免提源）时，音频永远不会到达计算机。

此时蓝牙框架尝试打开`SCO Audio connection`设备，但连接建立从未成功，并且我`0x0D`在 scoConnectionOpened 状态中收到错误代码状态代码。

我正在使用`IOBluetoothAddSCOAudioDevice`功能将 SCO 音频设备与蓝牙设备连接，它总是成功的。

```
//btDevice is paired 
res=IOBluetoothAddSCOAudioDevice((IOBluetoothDeviceRef) btDevice,NULL); 
if(res != kIOReturnSuccess)
{
   self.error.title = [NSString stringWithFormat:
        @"Could not attach the Audio device. Try  paring device again"];
} 
```

控制台日志说

> 24/11/2012 4:02:13.000 PM kernel[0]: [SendHCIRequestFormatted] ### ERROR: [0x0428] (Setup Synchronous Connection) -- 发送请求失败 (err = 0x000D (kBluetoothHCIErrorHostRejectedLimitedResources))
> 
> 24/11/2012 4:02:13.000 PM 内核 [0]：REQUIRE_NO_ERR 失败：0xd - 文件：/SourceCache/IOBluetoothFamily_kexts/IOBluetoothFamily-4090.4.33/Core/Family/Drivers/IOBluetoothSCOAudioDriver/IOBluetoothSCOAudioDevice.cpp:872

尽管控制台日志显示资源有限，但我已经尝试过使用多部电池充满电的手机。

我对此感到困惑，只是想我是否需要做任何特别或不同的事情？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T23:54:57.300

当 T2 请求发送到仅 T1 的 SCO 侦听器时，通常会发生此错误（“由于资源有限而拒绝连接”）。如果您阅读版本 5 的补丁说明，您可以得到关于这个问题的讨论[linux-bluetooth v5 补丁说明](http://comments.gmane.org/gmane.linux.bluez.kernel/35567)

# haml - Haml ruby 表达式缩进

> ID：13540788
> 
> 赞同：0
> 
> 时间：2012-11-24T11:33:21.247
> 
> 标签：haml

当它赋予 ruby​​ 表达式时，比如 if 语句，我不知道如何正确缩进。

```
%ul
  %li foo
  - if true
    %li bar 
```

上面的代码工作，但两者`%li`没有对齐，这对我来说并不优雅，因为它们处于同一级别（我的意思是两者都是 %ul 的孩子）

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:40:12.877

如果您关心格式以提高可读性，最好的选择是使用`erb:`过滤器转义 haml。

```
%ul
  erb:
    <li>foo</li>
    <% if true %><li>bar</li><% end %> 
```

不幸的是，在这种情况下，缩进会降低代码的可读性，但请记住，这种视图对于大量逻辑来说并不意味着什么。您应该尽可能地使用控制器和助手从视图中提取逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:57:18.483

好的 - 当案例比这个“有点”复杂时，这就是我的代码中发生的情况：

`list.haml`：

```
%ul
  = render :partial => 'list_item', :locals => { value => 'foo', cond => true }
  = render :partial => 'list_item', :locals => { value => 'bar', cond => false } 
```

`_list_item.haml`：

```
- if cond
  %li= value 
```

但在这种微不足道的情况下，我可能不会这样做。大多数情况最终会变得不那么琐碎......这种方法的**缺点**是您需要访问另一个文件以查看实际发生的情况。**专业人士**是干燥的。

# android - Android searchView 触发 onOptionsItemSelected

> ID：13540789
> 
> 赞同：1
> 
> 时间：2012-11-24T11:33:35.137
> 
> 标签：android

我正在按照本指南向我的活动添加操作栏 SearchView 小部件：http: [//developer.android.com/training/search/setup.html](http://developer.android.com/training/search/setup.html)

除了在这个页面上，我已经让它工作了：http: [//developer.android.com/training/search/backward-compat.html](http://developer.android.com/training/search/backward-compat.html) 它说“当用户选择搜索菜单时，只有 3.0 以上的版本才会调用 onOptionsItemSelected() item”，以便在为旧设备按下此搜索按钮时，我可以在 onOptionsItemSelected 中调用 onSearchRequested()。但是当我在 Jellybean 上测试它时，我按下搜索按钮，它会展开搜索视图，但也会打开一个搜索对话框，所以我有两个相互重叠的搜索小部件。

在 3.0+ 设备上按下搜索按钮时，似乎仍在调用 onOptionsItemSelected()，但指南另有说明。我执行错了吗？我尝试制作一个新项目并完全按照指南进行操作，并且它具有相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:53:28.057

这是我的一个误解。我以为文档是说硬件搜索按钮不会触发 onOptionsItemSelected，而是会展开 searchView。但它实际上只是说搜索菜单选项不会触发 onOptionsItemSelected

为了解决这个问题，我覆盖了 onSearchRequested 并在那里扩展了 searchView

# android - 在android listview中显示字母索引

> ID：13540793
> 
> 赞同：1
> 
> 时间：2012-11-24T11:33:49.530
> 
> 标签：android, android-listview, listadapter, baseadapter, simpleadapter

我已经创建了列表视图，我想在我的列表视图中实现 sectionindexer 和 alphabetIndexer。我正在引用[http://www.anddev.org/tutalphabetic_fastscroll_listview_-_similar_to_contacts-t10123.html](http://www.anddev.org/tutalphabetic_fastscroll_listview_-_similar_to_contacts-t10123.html)。效果很好。但是对于我的代码，我不知道如何实现该功能。

这是我的 list_item.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center"
    android:background="@drawable/list_selector"
    android:padding="5dp"
    android:id="@+id/tab">

    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip">

        <ImageView
            android:id="@+id/list_image"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:src="@drawable/musicsymbol"/>

    </LinearLayout>

    <TextView 
        android:id="@+id/songTitle"
        android:layout_width="200dip"
        android:layout_height="wrap_content"
        android:textSize="16dp"
        android:textColor="#ffffff"
        android:textStyle="bold"
        android:layout_alignTop="@+id/thumbnail"
        android:color="#10bcc9"
        android:maxLines="1"
        android:layout_toRightOf="@+id/thumbnail"
        />

        <TextView
        android:id="@+id/duration"
        android:layout_width="56dip"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@id/songTitle"
        android:gravity="right"
        android:layout_marginRight="5dip"
        android:textSize="15dip"
        android:textColor="#10bcc9"
        android:textStyle="bold"
        android:maxLines="1"
       />

       <TextView 
        android:id="@+id/songArtist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/songTitle"
        android:textSize="14dp"
        android:color="#10bcc9"
        android:textStyle="bold"
        android:lines="1"
        android:layout_toRightOf="@+id/thumbnail"
        /> 
```

我的 JAVA 代码：

```
Cursor cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,null , null, null,MediaStore.Audio.Media.TITLE );          
          if (cursor == null) 
          {
              //Query Failed , Handle error.
          }
          else if (!cursor.moveToFirst()) 
          {
             //No media on the device.
          }
          else
          {

              int titleColumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.TITLE);
              int idColumn = cursor.getColumnIndexOrThrow(android.provider.MediaStore.Audio.Media.DATA);
              int artistcolumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.ARTIST);
              int durationcolumn =cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.DURATION);

              for(int i=0;i<cursor.getCount();i++)
              {
                    String thisTitle = cursor.getString(titleColumn);
                    String path = cursor.getString(idColumn);
                    String artist = cursor.getString(artistcolumn);
                    Long duration = cursor.getLong(durationcolumn);
                    Utilities objUtilities = new Utilities();
                    String timeDuration = objUtilities.milliSecondsToTimer(duration);

                   HashMap<String, String> song = new HashMap<String, String>();
                   song.put("songTitle",thisTitle);
                   song.put("songPath", path);
                   song.put("artist", artist);
                   song.put("duration",timeDuration);

                   // Adding each song to SongList
                   songsList.add(song);
                   cursor.moveToNext();
              }
          }

        // looping through playlist
        for (int i = 0; i < songsList.size(); i++) {
            // creating new HashMap
            HashMap<String, String> song = songsList.get(i);

            // adding HashList to ArrayList
            songsListData.add(song);
        }

        // Adding menuItems to ListView
        String[] from = {"songTitle", "artist" , "duration"};
        int[] to={R.id.songTitle,R.id.songArtist, R.id.duration};
         adapter = new SimpleAdapter(this, songsListData,
                R.layout.playlist_item, from, to);

        setListAdapter(adapter); 
```

那么如何用我的这个listadapter实现sectionindexer。请建议我一些解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:46:20.607

你可以使用这个[库](https://github.com/ragunathjawahar/simple-section-adapter)。这是可用于 Android 的 ListView 的最简单的 Section Adapter。

# html - 去除 URL 链接下的边框

> ID：13540803
> 
> 赞同：3
> 
> 时间：2012-11-24T11:34:26.113
> 
> 标签：html, css

我试图弄清楚如何删除我网站链接下的边框。这既烦人，又弄乱了我的设计。所以我在这里问。我一直在谷歌搜索，但我只能找到“如何删除图像链接周围的边框”。我可以使用 css 删除边框吗？我试过“边框：实心 0px #000;” 但它没有用。

因此，如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:35:31.570

如果您尝试删除下划线，请将其添加到您的 css ：

```
a {
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:57:14.760

如果要去掉所有链接的下划线，可以加：a{ text-decoration:none; }

或者，如果您想删除指定链接的下划线，那么您应该创建一个 CSS 类，例如，

```
.style1{
   text-decoration:none;
} 
```

然后使用链接调用此类名称，例如，

```
<a href="#" class="style1">Link</a> 
```

它只会删除该链接的下划线。

# c# - 生成的表与行跨度导致额外的单元格

> ID：13540806
> 
> 赞同：2
> 
> 时间：2012-11-24T11:34:41.047
> 
> 标签：c#, jquery, asp.net, .net, html

**HTML**

```
<table id="tableAppointment" bgcolor="#fcfcfc" border="1" cellspacing="1" width="100%">
 <thead>
  <tr>
   <td class="csstextheader" width="70px"></td>
   <td class="csstextheader" width="70px"><b>Time Slot&nbsp;</b></td>
   <td><b>Room 7</b></td>
   <td><b>Room 8</b></td>
   <td><b>Room 9</b></td>
   <td><b>Room 10</b></td>
  </tr>
 </thead>
 <tbody>
  <tr class="csstablelisttd">
   <td width="70px">08:00AM</td>
   <td>00</td>
   <td class="csstdred">John</td>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
  </tr>
 </table> 
```

**C＃**

```
private void GenerateTable() {
    for(int i = 0; i < tableAppointment.Rows.Count; i++) {
        foreach(DataRow dr in dataTableAcqModality.Rows) {
            cell = new HtmlTableCell() {
                InnerHtml = "&nbsp;"
            };
            cell.Style.Add("word-wrap", "break-word");
            cell.Attributes.Remove("class");
            cell.Attributes.Remove("rowspan");
            cell.Style.Remove("display");

            tableAppointment.Rows[i].Cells.Add(cell);
            tableAppointment.Style.Add("table-layout", "fixed");

            if(i == 0) {
                cell.Attributes.Add("ID", RoomID.ToString());
                cell.InnerHtml = String.Format(
                    "<span id='{0}'>{1}</span>",
                    RoomID, Roomname
                );
                tableAppointment.Rows[0].Attributes.Add("class", "csstextheader");
            }
        }
    }
}

protected void Page_Load(object sender, EventArgs e) {
    for(int i = 0; i < tableAppointment.Rows.Count; i++) {
        for(int j = 0; j < tableAppointment.Rows[i].Cells.Count; j++) {
            // This is where I need to remove the extra cells added 
            // after providing rowspan :(
        }
    }
} 
```

在[这个 JSBin](http://jsbin.com/eguguk/1/edit)`rowspan`中，您可以看到由于添加到上面行中的单元格而卡在我的行右侧的额外单元格。我试图弄清楚如何删除这些。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:12:30.590

尽管我不知道你想要什么，或者不知道为什么，[我还是写了一些 jQuery](http://jsbin.com/eguguk/2/)来删除多余的列，因为这就是我们在 StackOverflow 上所做的。

*我不保证此代码的效率或实际有用性。*

```
$(document).ready(function() {
  $('table tr').each(function(i, v) {
    var cols = $(this).find('td');
    $(this).find('td[rowspan]').each(function() {
      var idx = $(this).index();
      console.log(idx);
      for(var j = 1; j < $(this).prop('rowspan'); j++) {
        $('table tr').eq(i+j).find('td').eq(idx).hide();
      }
    });
  });
}); 
```

编辑：显然你只需要给行一个高度，以避免崩溃到彼此的行为：

```
tr { height: 30px; } 
```

编辑 2：我确实更新了我的 jQuery 以隐藏具有行跨度的单元格下方的单元格。在您的示例中，您似乎有冲突的约会。开个玩笑，您可能想要确保没有调度冲突并且首先不编写那些额外的单元格。

提前处理此问题的一般策略是将与`cellsUsed`表相同大小的布尔值的多维数组（例如）初始化为 false，然后在打印具有行跨度的单元格时，将行跨度 - 1 数组位置标记为 true . 然后，当需要编写一个对应于设置为 true 的数组索引的单元格时，您就*不会*输出任何内容。如果碰巧在您标记为不输出的单元格中定义了实际约会，那么您将遇到一个完全不同的问题，并且必须处理它。

编辑：这里演示了为什么您必须隐藏多余的单元格或两次遍历表格以删除它们以避免错误：

这是一个示例表，其中“a”是行跨度 > 1 的单元格。“x”指定需要删除的额外单元格，“-”表示空白，该空白应为空白。

这是表中的起始数据：

```
a-a-
x-xa
xaxx
-x-x 
```

如果您从左下角到右上角开始删除，就会发生这种情况。删除倒数第二行中连接到约会的额外单元格后，最后一行中只有三个单元格。因此，当您从下一个约会向下遍历以删除该行中的第四个单元格时，您会收到错误消息。

```
a-a-
x-xa
xaxx
--x! 
```

如果您尝试从右上角到左下角删除，当您删除第二个约会时，您最终会错误地删除另一个约会（两个“a”相邻堆叠）。

```
a-a-
-xa
axx
-x-x 
```

避免在生成表格后删除单元格出现问题的唯一方法是标记要删除的所有单元格，然后从右到左删除每行中的单元格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T23:39:43.603

为您简化它..

如果您`[rowspan="2"]`在单元格中使用 --> 那么您必须从下一行中删除一个单元格

例子 ：

```
<table id="Table1" >
    <tr>
        <td rowspan="2" style="border-style:solid"></td>
        <td style="border-style:solid"></td>
    </tr>
    <tr>
        <td style="border-style:solid"></td>          
    </tr>
</table> 
```

如果您在单元格中使用 [ rowspan="3" ] --> 那么您必须从接下来的**两**行中删除一个单元格

例子 ：

```
<table id="Table1" >
    <tr>
        <td rowspan="3" style="border-style:solid"></td>
        <td style="border-style:solid"></td>
    </tr>
    <tr>
        <td style="border-style:solid"></td>          
    </tr>
    <tr>
        <td style="border-style:solid"></td>          
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T16:54:10.460

尝试这样的事情

```
protected void Page_Load(object sender, EventArgs e)
{
    for(int i = 0; i < tableAppointment.Rows.Count; i++)
    {
        for(int j = 0; j < tableAppointment.Rows[i].Cells.Count; j++)
        {
             // Assuming you have set the rowSpan by now.
             // TODO: Handle the possibility of missing rowspan attribute.
             int rowSpan = int.Parse(tableAppointment.Rows[i].Cells[j].Attributes["rowspan"]);
             if (rowSpan > 0) {
                // Now try to look ahead for rows and remove their j'th cell.
                for (int k = j+1; k < j + rowSpan; k++)
                {
                   tableAppointment.Rows[k].Cells.RemoveAt(j);
                   // TODO: Validate if k is not beyond available rows. It shoudn't be if rowspans are correct.
                }
             }
        }        //Here i have to remove those extra cell added after giving rowspan       
    }
} 
```

**注意：此代码未经测试，甚至未经编译。提供更多作为指导。**

话虽如此，我相信您可以在生成表格时更好地处理这个问题。如果我理解正确（可能是我没有理解）你已经静态创建了表，然后你注入了约会。这就是为什么你会患上这种细胞外综合症。如果您动态生成整个表，这不应该发生在您身上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T13:56:11.793

如果您的单元格是空白的，那么您可以从 CSS 中隐藏。像;

```
table{empty-cells:hide;} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T04:01:50.253

由于缺少代码，我不得不做出假设：获取数据、数据是什么样的、约会如何添加到表中。

我做了两件事来解决这个问题。1 - 我切换了循环的顺序，而不是循环遍历每个房间一段时间，而是循环遍历一个房间的所有时间跨度，然后再移动到下一个房间。2 - 由于更改 #1，我能够将时间跨度计数器增加需要删除的单元格数量（不推荐）

默认.aspx.cs

```
public partial class _Default : Page
{
  //Used to store generated data.
  List<Room> Rooms = new List<Room>();

  protected void Page_Load(object sender, EventArgs e)
  {
    if (!IsPostBack)
    {
      //To simulate the datasource
      GenerateData();

      //Generate the output
      GenerateTable();
    }
  }

  private void GenerateData()
  {
    //Generate Rooms
    foreach (var roomNumber in Enumerable.Range(7, 4))
    {
      var newRoom = new Room();

      newRoom.RoomID = roomNumber;
      newRoom.Roomname = "Room " + roomNumber.ToString();
      //Generate 40 15-minute time slot appointments for each room
      for (var count = 0; count < 40; ++count)
      {
        var newAppointment = new Appointment();

        newAppointment.Id = (roomNumber * 40) + count;
        newAppointment.Name = " ";
        newAppointment.NumberOfTimeSlots = 1;

        newRoom.Appointments.Add(newAppointment);
      }

      Rooms.Add(newRoom);
    }

    Rooms[0].Appointments[0].Name = "John";
    Rooms[0].Appointments[0].NumberOfTimeSlots = 1;

    Rooms[0].Appointments[2].Name = "John";
    Rooms[0].Appointments[2].NumberOfTimeSlots = 3;

    Rooms[1].Appointments[14].Name = "calc";
    Rooms[1].Appointments[14].NumberOfTimeSlots = 3;

    //More can be added
  }

  private void GenerateTable()
  {
    //Moved outside of the loop since it is globally setting the table and does not need to run for each row.
    tableAppointment.Style.Add("table-layout", "fixed");

    /**********************************************************************************************
     * Major change 1:
     * I flipped the order of the loops, I changed it from row->column to column->row.
     * What this allows you to do is skip the step of adding additional rows for the current room
     * by increment the row counter (not a good practice, need to refactor code).
     **********************************************************************************************/

    //You had: foreach(DataRow dr in dataTableAcqModality.Rows) {
    //I am assuming that this is a list of rooms to display
    foreach (var dr in Rooms)      
    {

      for (int i = 0; i < tableAppointment.Rows.Count; ++i)
      {
        var cell = new HtmlTableCell();

        cell.Style.Add("word-wrap", "break-word");
        cell.Attributes.Remove("class");
        cell.Attributes.Remove("rowspan");
        cell.Style.Remove("display");

        tableAppointment.Rows[i].Cells.Add(cell);

        if (i == 0) //Indicating the header row
        {
          cell.Attributes.Add("ID", dr.RoomID.ToString());
          cell.InnerHtml = String.Format(
              "<span id='{0}'>{1}</span>",
              dr.RoomID, dr.Roomname
          );
          tableAppointment.Rows[0].Attributes.Add("class", "csstextheader");
        }
        else
        {

          /***********************************************************************
           * Assumption that this is how you are adding the appointments to the 
           * table, did not see it in your quesiton
           ***********************************************************************/ 
          //i-1 to offset the header row
          cell.InnerHtml = dr.Appointments[i-1].Name;

          //NumberOfTimeSlots does not have to be part of the object, you are already doing it one way (not shown)
          cell.RowSpan = dr.Appointments[i - 1].NumberOfTimeSlots;

          //This is the inportant part, incrementing the row counter for this table by the number of cells you need to be removed becasue of the rowspan.
          //NOTE: I do not like the idea of messing with a loop counter, I would try to refactor your code, but since it was not provided this is a temporary fix.
          i += dr.Appointments[i - 1].NumberOfTimeSlots - 1;
        }
      }
    }
  }
}

public class Room
{
  public int RoomID { get; set; }
  public string Roomname { get; set; }
  public List<Appointment> Appointments { get; set; }

  public Room()
  {
    Appointments = new List<Appointment>();
  }
}

public class Appointment
{
  public int Id { get; set; }
  public string Name { get; set; }
  public int NumberOfTimeSlots { get; set; }
} 
```

默认.aspx：

  时隙 08:00AM00 15 30 40

```
 <tr><td>09:00AM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>10:00AM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>11:00AM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>12:00PM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>01:00PM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>02:00PM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>03:00PM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>04:00PM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>

    <tr><td>05:00PM</td><td>00</td></tr>
    <tr><td>&nbsp;</td><td>15</td></tr>
    <tr><td>&nbsp;</td><td>30</td></tr>
    <tr><td>&nbsp;</td><td>40</td></tr>
  </tbody>
</table> 
```

# gcc - 编译时间障碍 - 编译器代码重新排序 - gcc 和 pthreads

> ID：13540810
> 
> 赞同：2
> 
> 时间：2012-11-24T11:35:18.307
> 
> 标签：gcc, pthreads, memory-barriers

AFAIK 有充当内存屏障的 pthread 函数（例如，此处[clarifications-on-full-memory-barriers-involved-by-pthread-mutexes](https://stackoverflow.com/questions/10997636/clarifications-on-full-memory-barriers-involved-by-pthread-mutexes)）。但是编译时障碍呢，即编译器（尤其是 gcc）是否意识到这一点？
换句话说 - 例如 - pthread_create() 是 gcc 不执行重新排序的原因吗？

例如在代码中：

```
a = 1;
pthread_create(...); 
```

是否确定不会进行重新排序？
来自不同函数的调用怎么样：

```
void fun(void) {
    pthread_create(...);
    ...
}

a = 1;
fun(); 
```

fun() 是否也编译时间障碍（假设 pthread_create() 是）？
不同翻译单元的功能如何？

请注意，我对一般 gcc 和 pthreads 行为规范感兴趣，不一定是特定于 x86 的（关注各种不同的嵌入式平台）。
我也对其他编译器/线程库的行为不感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:35:16.013

因为诸如`pthread_create()`外部函数之类的函数，编译器必须确保在调用函数之前必须完成对外部函数可见的任何副作用（例如对全局变量的写入）。`a`在第一种情况下，直到函数调用之后，编译才能对写入重新排序）假设`a`是全局的或可能在外部可访问）。

这是任何 C 编译器所必需的行为，并且与线程几乎没有关系。

但是，如果变量`a`是局部变量，编译器可能能够重新排序它，直到函数调用之后（`a`甚至可能根本不会在内存中结束），除非类似的地址`a`被获取并在外部可用以某种方式（例如将其作为线程参数传递）。

例如：

```
int a;

void foo(void)
{
    a = 1;
    pthread_create(...);    // the compiler can't reorder the write to `a` past 
                            //  the call to `pthread_create()`

    // ...
}

void bar(void)
{
    int b;
    b = 1;
    pthread_create(...);    // `b` can be initialized after calling `pthread_create()`
                            // `b` might not ever even exist except as a something
                            //  passed on the stack or in a register to `printf()`

    printf( "%d\n", b);
} 
```

我不确定是否有文档更详细地概述了这一点——这在很大程度上被 C 的“好像”规则所涵盖。在 5.1.2.3/3“程序执行”中的 C99 中。C 由具有序列点的抽象机器指定，其中副作用必须完整，并且程序必须遵循该抽象机器模型，除非编译器可以推断出不需要副作用。

在我`foo()`上面的示例中，编译器通常无法推断出`a = 1;`不需要设置，因此必须在调用之前完成设置值`pthread_create()`的副作用。请注意，如果有执行全局优化的编译器可以推断出未在其他地方使用的，它们可能会延迟或忽略分配。但是，在这种情况下，没有其他任何东西使用副作用，所以不会有问题。`a``1``pthread_create()``a`

# tomcat - 如何使用 Netbeans 连接到远程 tomcat？

> ID：13540817
> 
> 赞同：1
> 
> 时间：2012-11-24T11:36:51.133
> 
> 标签：tomcat, netbeans

在 Windows Server 2008 R2 上，我安装了 tomcat，并从防火墙打开了端口。如何从我的 PC 连接到带有 Netbans 的 Tomcat 服务器？

我想从我的 PC 上运行一个 web 项目，并在远程 tomcat 上运行一个 servlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:21:59.287

Netbeans 需要他自己的 tomcat。存在连接不属于它的 tomcat 的硬技巧，但它们甚至需要 tomcat 在同一台机器上运行。

我也为此感到非常抱歉。它让我想起了 1992 年 windows3.0 的糟糕之处。

# android - AppWidgetProvider，如何确定特定小部件的 AppWidgetProvider

> ID：13540819
> 
> 赞同：0
> 
> 时间：2012-11-24T11:37:10.720
> 
> 标签：android, appwidgetprovider

我需要一种方法来确定配置活动中当前小部件的哪个 AppWidgetProvider 处于活动状态。我当前的解决方案在某些设备上导致 NullException，appWidgetInfo.provider 不知何故为空。

是否有更好的方法来确定哪个 AppWidgetProvider 对应于特定的 appWidgetId。

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
AppWidgetProviderInfo appWidgetInfo = appWidgetManager.getAppWidgetInfo(widgetId);

Intent intent = new Intent();
intent.putExtra(
    AppWidgetManager.EXTRA_APPWIDGET_ID, 
             widgetId);
intent.setAction(RemoteWidgetViewsFactory.KEY_WIDGET_SETTING_REFRESH);

String appWidgetProviderName = appWidgetInfo.provider.getClassName();
if(appWidgetProviderName.equals(WidgetProvider.class.getName())) {
    intent.setClass(context, WidgetProvider.class);
}
else if(appWidgetProviderName.equals(WidgetProviderLarge.class.getName())) {
    intent.setClass(context, WidgetProviderLarge.class);
}

sendBroadcast(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:13:59.997

我实际上遇到了同样的问题，因为我还需要确定实际的 AppWidgetProvider 类。你的问题确实帮助了我，我可能可以帮助你。只需实现这样的方法，您就不必为每个 AppProvider 类编写代码：

```
 private static Class<?> getAppWidgetProviderClass(Context context, int appWidgetId){
    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
    AppWidgetProviderInfo appWidgetInfo = appWidgetManager.getAppWidgetInfo(appWidgetId);
    String appWidgetProviderName = appWidgetInfo.provider.getClassName();
    Class<?> myProvider = null;
    try {
        myProvider = Class.forName(appWidgetProviderName);
    } catch (ClassNotFoundException cnf){
        Log.e("myProviderClass","Class:" + appWidgetProviderName + " not found!");
    }
    return myProvider;
} 
```

将其用于类定义意图之后：

```
Intent myIntent = new Intent(context, getAppWidgetProviderClass(context, appWidgetId)); 
```

希望对你有帮助！

# c# - 为什么看起来好像没有按照代码的顺序执行操作？

> ID：13540820
> 
> 赞同：14
> 
> 时间：2012-11-24T11:37:15.330
> 
> 标签：c#, xna

这里有一些背景。我正在开发类似于“崩溃”的游戏。积木在底部填满，当所有十二个积木都填满时，它们会向上推到操场上。我有一个称为 (intNextSpawn) 的计数器，它不仅可以告诉何时“向上推”下一行，还可以计算图形的向量。当块被向上推时它重置为 0。

我在屏幕上添加了一些调试文本来尝试查看发生了什么，但我似乎无法找到问题所在。几乎看起来它仍在增加计数器，同时尝试随机化应该出现的块（事情乱序）。我最终得到了“空白”块，它在测试时会导致一些非常糟糕的效果。提高速度时情况会变得更糟。

我愿意发布任何可能有帮助的额外代码。以下是可能发生这种情况的两个主要块。是否有什么我可能做错了，或者有什么方法可以防止这种情况发生（如果这就是它正在做的事情）？

任何帮助将不胜感激。

*编辑...第一个代码块在“更新”方法中*

```
// Calculate time between spawning bricks
float spawnTick = fltSpawnSpeed * fltSpawnSpeedModifier;

fltSpawn += elapsed;

if (fltSpawn > spawnTick)
{
    // Fetch a new random block.
    poNextLayer[intNextSpawn] = RandomSpawn();
    // Increment counter
    intNextSpawn++;

    // Max index reached
    if (intNextSpawn == 12)
    {
        // Push the line up. Returns true if lines go over the top.
        if (PushLine())
        {
            gmStateNew = GameState.GameOver;
            gmStateOld = GameState.Playing;
        }

        // Game still in play.
        else
        {
            // Reset spawn row to empty bricks.
            for (int i = 0; i < 12; i++)
                poNextLayer[i] = new PlayObject(ObjectType.Brick, PlayColor.Neutral, Vector2.Zero);

            intNextSpawn = 0;   // Reset spawn counter.
            intLines--;         // One less line to go...
         }
     }

     fltSpawn -= spawnTick;
} 
```

* * *

```
private bool PushLine()
{
    // Go through the playfield top down.
    for (int y = 14; y >= 0; y--)
    {
        // and left to right
        for (int x = 0; x < 12; x++)
        {
            // Top row contains an active block (GameOver)
            if ((y == 14) && (poPlayField[x, y].Active))
                // Stop here
                return true;
            else
            {
                // Not bottom row
                if (y > 0)
                {
                    // Copy from block below
                    poPlayField[x, y] = poPlayField[x, y - 1];
                    // Move drawing position up 32px
                    poPlayField[x, y].MoveUp();
                }
                // Bottom row
                else
                {
                    // Copy from spawning row
                    poPlayField[x, y] = poNextLayer[x];
                    // Move drawing position up 32px (plus 4 more)
                    poPlayField[x, y].MoveUp(4);
                    // Make the block active (clickable)
                    poPlayField[x, y].Active = true;
                }
            }

        }
    }

    // Game still in play.
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:37:50.843

因此，问题的最大部分是您正在根据刻度的大小递减一些计时器，然后运行一些比较。与其为计时器做所有事情（尤其是浮点数的舍入和精度损失等），不如只进行时间基本比较。

例如，您这样做`fltSpawn += elapsed`会`fltSpawn -= spawnTick`导致浮点舍入/精度错误。

尝试更多类似的东西：

```
int64 spawnDelay = 1000000; // 10,000 ticks per ms, so this is 100ms
...

if (DateTime.Now() > nextSpawn)
{
    // Fetch a new random block.
    poNextLayer[intNextSpawn] = RandomSpawn();
    ...

    // At some point set the next spawn time
    nextSpawn += new TimeSpan(spawnDelay * spawnSpeedModifier);

} 
```

# ruby-on-rails - 清除rails控制台中的所有变量

> ID：13540838
> 
> 赞同：5
> 
> 时间：2012-11-24T11:40:28.853
> 
> 标签：ruby-on-rails, rails-console

任何人都可以告诉我使用什么命令来清除rails控制台中的所有变量吗？

例如

```
1.9.1 :001 > permissions = {:show => true}
 => {:show=>true} 
1.9.1 :001 > foo = "bar"
 => "bar" 
```

我需要一个命令，可以在不重新启动 rails 控制台本身的情况下将所有变量重置为 nil。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T11:44:17.357

```
local_variables.each { |e| eval("#{e} = nil") } 
```

`local_variables`返回当前范围内所有局部变量的符号列表

```
a, b = 5, 10
local_variables # => [:b, :a] 
```

使用`each`您可以遍历此列表`eval`以将其值分配给`nil`.

`instance_variables`你也可以用和 做同样的事情`global_variables`。例如

```
(local_variables + instance_variables).each { |e| eval("#{e} = nil") } 
```

* * *

顺便说一句，如果您要多次使用它，在`~/.irbrc`文件中定义这样的方法以使其对所有 irb 会话都可访问可能会有所帮助（未在 rails 控制台中对其进行测试）。

```
class Binding
  def clear
    eval %q{ local_variables.each { |e| eval("#{e} = nil") } }
  end
end 
```

然后，在`irb`会话内部

```
a = 5
binding.clear
a # => nil 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-24T11:53:01.893

做一件事，输入

```
irb 'another' 
```

然后按 ctrl+l

现在检查变量的值。有用。

# grails - grails中的用户访问控制

> ID：13540841
> 
> 赞同：2
> 
> 时间：2012-11-24T11:40:48.897
> 
> 标签：grails, user-permissions

我对 Grails 完全陌生，并且已经阅读了 Shiro 插件，但我不确定这是我所追求的，所以希望有人能指出我正确的方向。

对于我计算机科学的最后一年项目，我正在创建用 Grails 编写的在线团队协作工具。该应用程序的结构如下：

应用程序 - 有很多公司在使用它 公司有很多项目 项目有很多用户等。

我确保用户登录时的最佳方式是什么，如果他们是管理员，他们只能看到他们公司和项目的内容，或者如果他们是普通用户，他们只能看到他们的项目。显然，我不希望一家公司的用户能够访问其他公司的项目信息等。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-24T13:12:25.507

通常，有很多方法可以确保您期望的行为。

我建议将 shiro 与标准 grails 过滤器结合使用：

```
class SecurityFilters {
    def filters = {
        all(uri: "/**") {
            before = {
                // Ignore direct views (e.g. the default main index page).
                if (!controllerName) return true

                accessControl {
                    // add your logic here to determine if user has access or not
                    // return true if user has access, false otherwise

                    // get current user
                    def user = yourService.getCurrentUser()
                    // get projects the user is allowed to access
                    def projects = yourService.getProjectsOfUser(user)
                    // get the project the user tries to access
                    def currentProject = Project.get(params.projectId)

                    // is current project in list of permitted projects?
                    return project.contains(currentProject)
                }
            } 
        }
    } 
} 
```

或者，您可以实现自己的`Permission`并使用`SecurityUtils.subject.isPermitted()`.

最佳实现取决于您的应用程序的架构。如果您需要更多帮助，您必须提供有关您的应用程序的更多详细信息。

希望有帮助！

# java - 分离嵌入在 XAdES 中的文件

> ID：13540842
> 
> 赞同：2
> 
> 时间：2012-11-24T11:41:00.300
> 
> 标签：java, x509certificate, digital-signature, xades4j

拥有一个嵌入了签名内容的 XAdES-BES 签名，是否可以分离签名的内容，这样就可以使用带有 ObjectReference 的 XAdES。

所以简单地说 - 我需要一个方法，它采用带有嵌入文件的 XAdES，并返回文件和引用文件的 XAdES（这样文件就不再嵌入到 XAdES 中）。

我试图找出一种使用 XAdES4j 的方法，但没有结果。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:38:56.803

您可以轻松地从 XAdES 签名中提取签名文件，但不能将封装签名转换为分离签名。

签名内容在 SignedInfo 中通过引用 uri 进行引用，并且由于 SignedInfo 元素是“签名的”，因此您无法在不破坏签名值的情况下更改该引用。

# java - 为什么我的项目中出现“java.lang.ClassNotFoundException”错误

> ID：13540844
> 
> 赞同：0
> 
> 时间：2012-11-24T11:41:11.737
> 
> 标签：java, mysql, hibernate, struts2

我不知道为什么我的项目会出现这个错误。所以你们是我最后的机会：

在我的项目中，我收到“java.lang.ClassNotFoundException”异常。你能告诉我它背后的原因是什么。

```
when I am trying to run this program I am getting this message"
  HTTP status 404
INSIDE the console I am getting this error 
```

如果您能给我一些提示，我将不胜感激...

非常感谢，

```
 SEVERE: Error configuring application listener of class org.apache.struts2.tiles.StrutsTilesListener
java.lang.ClassNotFoundException: org.apache.struts2.tiles.StrutsTilesListener
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4537)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5097)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5092)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Nov 24, 2012 4:47:54 PM org.apache.catalina.core.StandardContext listenerStart
 SEVERE: Error configuring application listener of class    com.olec.listener.HibernateListener
java.lang.ClassNotFoundException: com.olec.listener.HibernateListener
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
at   org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4537)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5097)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5092)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
  Nov 24, 2012 4:47:54 PM org.apache.catalina.core.StandardContext listenerStart
 SEVERE: Skipped installing application listeners due to previous error(s)
  Nov 24, 2012 4:47:54 PM org.apache.catalina.core.StandardContext startInternal
   SEVERE: Error listenerStart
Nov 24, 2012 4:47:54 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/OLEC] startup failed due to previous errors
Nov 24, 2012 4:47:54 PM org.apache.catalina.loader.WebappClassLoader    clearReferencesJdbc
    SEVERE: The web application [/OLEC] registered the JDBC driver                                                                                                                                                 [com.mysql.jdbc.Driver]    but failed to unregister it when the web application   was             stopped. To prevent a                                                          memory leak, the JDBC Driver has been  unregistered.
Nov 24, 2012 4:47:54 PM org.apache.coyote.AbstractProtocolHandler start
: Starting ProtocolHandler ["http-bio-8080"]
Nov 24, 2012 4:47:54 PM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Nov 24, 2012 4:47:54 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2014 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:39:49.123

你用的是什么IDE？如果 Eclipse 或 Netbeans 进入项目属性并将缺少的 jar 添加到类路径中。

根据您的例外情况，您应该添加 struts2-tiles-plugin-2.0.12.jar 或该 jar 的任何其他版本。

还有 hibernate-annotations.jar ，更好地检查你的类路径是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:21:21.807

com.olec.listener.HibernateListener 丢失。我没有找到包含该类的 jar，但您应该将其添加到您的应用程序或其类路径中。

# c# - LINQ Union 不同类型 - 动态转换为接口？

> ID：13540846
> 
> 赞同：3
> 
> 时间：2012-11-24T11:41:29.477
> 
> 标签：c#, linq, casting, union

我有 10 个表作为不同类型呈现给 LINQ，但具有完全相同的属性。当我尝试对它们运行联合时，编译器告诉我：

```
"Argument 2: cannot convert from 'System.Collections.IEnumerable' to 'System.Collections.Generic.IEnumerable<LINQPad.User.TelJun2011>'" 
```

代码看起来像这样

```
var jul = (from n in TelJul2011s select n);

var jun = (from p in TelJun2011s select p);

jun.Union(jul).Dump(); 
```

我已经完成了我的研究并了解联合不能跨不同类型执行，我也了解联合可以在匿名类型上执行，如果它们共享相同的属性。这个选项对我不起作用，因为我需要所有表中的所有属性，并且不想输入相同的匿名类型 10 次 - 每个变量一次。我希望编译器根据所有属性都相同的事实来推断它们都是相同的类型。

我已经尝试使用 AsQueryable() 类型函数和“as”关键字转换为 IEnumberable、Iqueryable、Datatable 等。这些对我来说似乎都不起作用。

我想知道是否有某种方法可以通过动态转换为父类型来做到这一点。我不能编辑类的初始声明，所以不能在它们上实现一个通用接口来转换。但是有什么方法可以在使用时将类型转换为通用接口，而无需编写从每种类型到父接口的转换？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T13:13:21.943

的结果`Union`将是一个，`IEnumerable<Xxx>`但在这种情况下，您必须指定是什么`Xxx`。如果类型`TelJun2011`和`TelJul2011`不是结构（值类型），您可以利用这样的*协***方差**`IEnumerable<out T>`：

```
jun.Union<object>(jul) 
```

This works because `TelJun2011` and `TelJul2011` are both `object`, and then by covariance `IEnumerable<TelJun2011>` and `IEnumerable<TelJul2011>` are both `IEnumerable<object>`.

Of course `object` does not possess all the properties common to `TelJun2011` and `TelJul2011`. It would be better if these two types had a more useful common base class or implemened a common interface, because then you could say e.g.:

```
jun.Union<ITelMonth>(jul) 
```

where `ITelMonth` were some type containing the common properties you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:57:01.820

“问题”是 C# 的静态类型系统不允许您尝试实现的目标。在联合对象之前，您必须将对象转换为基本类型。这意味着如果两者只有`System.Object`共同点，您必须将其转换为`object`或（对于 .net 4.0）转换为`dynamic`.

后者将强制进行动态类型检查：

```
class A
{
    public int Integer { get; set; }
}

class B
{
    public int Integer { get; set; }
}

class Program
{
    public static void main(string[] args)
    {
        var a = new[] { new A { Integer = 5 }, new A { Integer = 6 }, new A { Integer = 7 } };
        var b = new[] { new B { Integer = 1 }, new B { Integer = 2 }, new B { Integer = 3 } };

        var u = a.Cast<dynamic>().Union(b).ToArray();

        var i1 = u[0].Integer;
        var i2 = u[1].Integer;
        var i3 = u[2].Integer;
        var i4 = u[3].Integer;
        var i5 = u[4].Integer;
        var i6 = u[5].Integer;
    }
} 
```

在我看来，这不是一个理想的解决方案，但这可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T22:54:37.223

If you're using EntityFramework (or any other framework, I guess), the classes auto-generated are marked as `partial`, such as the following:

**/Project/Data/TelJun2011.cs**

```
namespace Project.Data
{
    using System;
    using System.Collections.Generic;

    public partial class TelJun2011
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }
} 
```

**/Project/Data/TelJul2011.cs**

```
namespace Project.Data
{
    using System;
    using System.Collections.Generic;

    public partial class TelJul2011
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }
} 
```

What `partial` means is that you can create another file for the same class. The generated classes don't implement an interface, but you can easily make then implement your custom interface like this:

**/Project/Data/ITelMonth.cs**

```
namespace Project.Data
{
    public interface ITelMonth
    {
        int Id { get; set; }
        string Name { get; set; }
        string Description { get; set; }
    }
} 
```

**/Project/Data/Partial/TelJun2011.cs**

```
namespace Project.Data
{
    public partial class TelJun2011 : ITelMonth { }
} 
```

**/Project/Data/Partial/TelJul2011.cs**

```
namespace Project.Data
{
    public partial class TelJul2011 : ITelMonth { }
} 
```

And having correctly defined the interfaces, then we can simply do this:

```
var jul = (from n in TelJul2011s select (ITelMonth)n);

var jun = (from p in TelJun2011s select (ITelMonth)p);

var bimester = jun.Union(jul); 
```

And you can even access the common properties like such:

```
foreach (var e in bimester)
{
    e.Id.Dump();
} 
```

# android - 显示在列表视图上的 Json 对象

> ID：13540851
> 
> 赞同：-1
> 
> 时间：2012-11-24T11:41:49.917
> 
> 标签：android

```
 public ArrayList<String> getData()
    {

        ArrayList<String> listItems = new ArrayList<String>();

        String result = "";
        InputStream   isr=null;

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://10.0.2.2/get_data.php");
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
               isr = entity.getContent();
    }
    catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
            //resultView.setText("Couldnt connect to database");
    }

         try{
             BufferedReader reader = new BufferedReader(new InputStreamReader(isr,"iso- 8859-1"),8);
             StringBuilder sb = new StringBuilder();
             String line = null;
             while ((line = reader.readLine()) != null) {
                     sb.append(line + "\n");
             }
             isr.close();

             result=sb.toString();
     }
         catch(Exception e){
             Log.e("log_tag", "Error  converting result "+e.toString());
        }
          //parse json data
           try {
               String s = "";
               JSONArray jArray = new JSONArray(result);

               for(int i=0; i<jArray.length();i++)
               {
                   JSONObject json=jArray.getJSONObject(i);

                listItems.add(json.getString("name"));
                listItems.add(json.getString("ph.no"));
                listItems.add(json.getString("id"));
                     // adding HashList to ArrayList

              }   

              // resultView.setText(s);

           } catch (Exception e) 
           {
            // TODO: handle exception
               Log.e("log_tag", "Error Parsing Data "+e.toString());
           }

           return listItems;

           // selecting single ListView item

 } 
```

我正在开发一个名为电话簿的 android 应用程序。我正在从服务器中提取人员的详细信息作为 json 对象。在android上显示详细信息

我能够在不同的行中显示特定人的联系方式。如何在同一行显示单个人的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:15:28.473

您可以使用自定义 ArrayAdapter 自定义 Android ListView 项。

你可以这样做，

```
/* In main activity */
ListView myListView = (ListView)findViewById(R.id.myListView);
final ArrayList<Phonebook> todoItems = new ArrayList<Phonebook>();
final YourAdapter x= new YourAdapter(this,R.layout.your_listviewlayout,todoItems);
myListView.setAdapter(x);

Phonebook phnbk= new Phonebook();
// enter code for set values to Phonebook class variables
/* Inserting the values to array */
todoItems.add(phnbk);

/* Customized array adaptor class */
private class YourAdapter extends ArrayAdapter<Phonebook> 
{
    private ArrayList<Phonebook> items;
    public YourAdapter (Context context, int textViewResourceId, ArrayList<Phonebook> items) 
    {
        super(context, textViewResourceId, items);
        this.items = items;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View v = convertView;
        if (v == null) 
        {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.your_listviewlayout, null);
        } 
        Phonebook o = items.get(position);
        if (o != null) 
        {
            //insert values to each text view in your list view layout
            tv1.setText(o.name);
            tv2.setText(o.phnnum);
                        tv3.setText(o.email);                   
        }
        return v;
    }
}

/* Phonebook class */
public class Phonebook{    
    public String name;
    public String phnnum;
    public String email;
    public Phonebook(){
        super();
    }

    public Phonebook(String name, String phnnum, String email) {
        super();
        this.name = name;
        this.phnnum = phnnum;
        this.email = email;
    }
} 
```

# ios - 无法成功删除GestureRecognizer iOS

> ID：13540852
> 
> 赞同：0
> 
> 时间：2012-11-24T11:41:55.860
> 
> 标签：ios, uigesturerecognizer

我的 iPad 应用程序中有一个按钮，当按下它时，它会添加 GestureRecognizer。再次按下时，它应该删除它们。

我的代码在 if 块中，并且我知道运行了正确的代码块，因为 NSLog 打印了正确的日志消息。

我正在添加这样的识别器：

```
[self.view addGestureRecognizer:panRecognizer];
[self.view addGestureRecognizer:pinchRecognizer];
[self.view addGestureRecognizer:rotationRecognizer];
[self.view addGestureRecognizer:tapRecognizer]; 
```

并尝试像这样删除它们：

```
[self.view removeGestureRecognizer:panRecognizer];
[self.view removeGestureRecognizer:pinchRecognizer];
[self.view removeGestureRecognizer:rotationRecognizer];
[self.view removeGestureRecognizer:tapRecognizer]; 
```

这是我的全部功能： http: [//www.pastelib.com/show/ZlICyb9Q](http://www.pastelib.com/show/ZlICyb9Q)

它不起作用，我无法弄清楚为什么，你们有什么建议吗？

提前感谢所有帮助和建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:42:31.987

您的 GestureReconizers 在本地声明到 -showMenu: 方法。因此，每次按下按钮时，您都会创建新的 GestureReconizer，因此您不会尝试删除以前的 reconizer，而是尝试删除新创建的。

改变你的 reconizers 对象的范围，你的问题就会得到解决。

干杯。

使用代码示例编辑：

```
-(IBAction) showMenu:(id) sender {    
    if([self.view.subviews containsObject:menuView]) {

        NSLog(@"remove gestures!");

        // Dismiss menu
        [menuView removeFromSuperview];

        // Remove gestures
        [self.view removeGestureRecognizer:panRecognizer];
        [self.view removeGestureRecognizer:pinchRecognizer];
        [self.view removeGestureRecognizer:rotationRecognizer];
        [self.view removeGestureRecognizer:tapRecognizer];        
    }else{
        // Create menu        
        NSLog(@"add gestures!");

    panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panDetected:)];

    pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchDetected:)];

    rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotationDetected:)];

    tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];

     tapRecognizer.numberOfTapsRequired = 2;    

     // Make gestures work simultaneously
     panRecognizer.delegate = self;
     pinchRecognizer.delegate = self;
     rotationRecognizer.delegate = self;

        // Set width and height if empty        
       self.menuController = [[menuController alloc] initWithNibName:@"menuController" bundle:nil];

        if(screenWidth == 0) {

            UIInterfaceOrientation currentOrientation = [[UIApplication sharedApplication] statusBarOrientation];

            if(currentOrientation == 1 || currentOrientation == 2) {
                // portrait
                screenHeight    = self.menuController.view.frame.size.height;
                screenWidth     = self.menuController.view.frame.size.width;
            }else{
                // Landscape
                screenHeight     = self.menuController.view.frame.size.width;
                screenWidth    = self.menuController.view.frame.size.height+20; //height+20px for the status bar
            }
        }

        int menuHeight = 80;
        self.menuController.view.frame = CGRectMake(0,screenHeight-(menuHeight-20), screenWidth, menuHeight);

        self.menuView = self.menuController.view;

        [self.menuController setDelegate:self];

        [self addChildViewController:self.menuController];
        [self.menuController didMoveToParentViewController:self];
        [self.view addSubview:menuView];

        // Add image gestures
        [self.view addGestureRecognizer:panRecognizer];
        [self.view addGestureRecognizer:pinchRecognizer];
        [self.view addGestureRecognizer:rotationRecognizer];
        [self.view addGestureRecognizer:tapRecognizer];

        [self.view bringSubviewToFront:menuButton];        

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T16:21:00.310

我在我的项目中这样做了，它奏效了：

```
while (cellMainView.descripcionArticulo.gestureRecognizers.count) {
    [cellMainView.descripcionArticulo removeGestureRecognizer:[cellMainView.descripcionArticulo.gestureRecognizers objectAtIndex:0]];
} 
```

# c++ - c++ - 在函数中创建类实例并稍后使用

> ID：13540854
> 
> 赞同：3
> 
> 时间：2012-11-24T11:42:00.960
> 
> 标签：c++, oop, class, static

我可以这样做：

```
static Toggle GetAutoUpdatedToggle(DWORD key, bool initialState = false)
{
    Toggle tempToggle(key, initialState);
    autoUpdateToggles.push_back(tempToggle); //This is static member - std::vector<Toggle>
    return tempToggle;
} 
```

而且我以后也会这样使用它：

```
void Toggle::UpdateAllFromFactory() //This is static function
{
    for each (Toggle toggle in autoUpdateToggles)
    {
        toggle.Update();
    }
} 
```

这是这样做的好方法吗？

* * *

**更新 1 - 在你的建议之后：**

```
static Toggle* GetAutoUpdatedToggle(DWORD key, bool initialState = false)
{
    Toggle *pToggle = new Toggle(key, initialState);
    m_autoUpdateToggles.push_back(pToggle);
    return pToggle;
}

void Toggle::UpdateAllFromFactory()
{
    for (std::vector<Toggle*>::iterator it = m_autoUpdateToggles.begin(); it < m_autoUpdateToggles.end(); it++)
    {
        (*it)->Update();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:48:37.723

不，这不是一个好方法，因为您传递以下*副本*：`Toggle`

*   `GetAutoUpdatedToggle`返回它刚刚*推*入. 这本身并不是一件错误的事情，但是调用者可能对返回的切换进行的任何操作都不会反映在您推送到`Toggle``vector``vector`
*   `for`循环遍历 的元素，`vector`创建一个副本以在循环体内使用。除非`Toggle`本身具有类似指针的语义，否则该`Update()`操作不会反映`Toggle`在`vector`.

要解决此问题，请`GetAutoUpdatedToggle`返回对它刚刚推送到的对象的*引用*，并使用对象遍历存储的切换。这将使您可以对实际对象进行操作，而不是对其副本进行操作。`Toggle``vector``vector<Toggle>::iterator`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T11:46:20.980

您的静态函数返回`Toggle`. `.push_back`还将创建切换的副本。因此，`Toggle`您返回的内容不在`autoUpdateToggles`并且以后无法更新。

```
Toggle myToggle = GetAutoUpdatedToggle(key);
/* ... */

Toggle alternativToggle = myToggle;
// alternativToggle == myToggle is true
Toggle::UpdateAllFromFactory();

// alternativToggle == myToggle is still true 
```

另请注意，`Toggle::UpdateAllFromFactory();`如果您不使用迭代器，则您当前的实现使用 Toggles 的副本。

您必须提供 对象的*句柄*`Toggle`。`Toggle`这可以是一个简单的指针或任何其他在复制时不会丢失特定标识的对象。

# css - -Internet Explorer 中的 webkit 支持

> ID：13540855
> 
> 赞同：2
> 
> 时间：2012-11-24T11:42:06.500
> 
> 标签：css, webkit

我对 CSS 和 CSS 动画有点陌生。我厌倦了专门为 IE（所有版本）优化我的网页。是否有一些类似的 javascript 库可以在 IE 中启用 CSS -webkit 语法？

我发现像 chrome 这样的 webkit 浏览器的设计既简单又好，但 IE 需要特别关注。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:44:56.677

Internet Explorer 10 支持更多的 CSS3 功能。你省略了前缀吗？如果这不起作用，您将无能为力。您可能需要等待 Internet Explorer 11。

但是，我不建议您将工作集中在 IE 上。最好尝试在 Firefox、Safari、Opera 和 co 上运行您的应用程序。

另请参阅Microsoft[为 Internet Explorer 10 调整 WebKit 优化站点](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/15/adapting-your-webkit-optimized-site-for-internet-explorer-10.aspx)的博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:09:01.540

看看 css3pie.com 它可以从 IE6 呈现。希望这对您有所帮助。

# drupal - Drupal 6.26 中的自定义模块

> ID：13540856
> 
> 赞同：1
> 
> 时间：2012-11-24T11:42:07.620
> 
> 标签：drupal

我在 Drupal 6.26 中工作。我正在开发一个自定义模块，我想在节点创建页面中上传文件。我想要一个上传图片的选项，比如应该有文件上传组件和上传按钮。因此，当管理员选择一个文件并单击提交按钮时，文件必须保存在一个文件夹中，并且需要将路径保存在数据库中。上传后，图像缩略图应出现删除按钮。当管理员单击删除按钮时，图像缩略图应该消失并且文件上传组件必须显示上传按钮。保存节点时，图像路径必须与节点映射。这类似于 cck 文件上传选项。请帮助我做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:54:31.027

这将是一个复杂的表单，它使用 AHAH (AJAX) 行为来显示缩略图和删除按钮功能。我建议从学习文件上传和 CCK 代码开始，这样您就可以使用表单 API 定义简单的表单，然后添加一些 AHAH 魔法。

[您可以在此处](https://injustfiveminutes.wordpress.com/2012/10/04/appending-form-elements-using-ahah-asynchronous-html-and-http/)获得 Drupal 6 中 AHAH 模块的一个很好的示例

# jquery - 使用 jQuery 删除 HTML 标签

> ID：13540857
> 
> 赞同：2
> 
> 时间：2012-11-24T11:42:18.027
> 
> 标签：jquery, html, css

我是 jQuery 的新手。我只想删除 HTML 标签，而不是它的内容。以下是我的代码

**HTML**

```
<ul>
  <li>
    <a href="#">Personal Loans</a>
    <ul>
      <li><a href="#">Secured Loans</a></li>
      <li><a href="#">Unsecured Loans</a></li>
      <li><a href="#">Bad Credit Loans</a></li>
    </ul>
  </li>
  <li>
    <a href="#">Debt Management</a>
    <ul>
      <li><a href="#">Debt Consolidation Loans</a></li>
      <li><a href="#">Credit Card Debt Management</a></li>
      <li><a href="#">IVAs</a></li>
    </ul>
  </li>
  <li>
    <a href="#">Payday Loans</a>
    <ul>
      <li><a href="#">Text Loans</a></li>
      <li><a href="#">Short Term Loans</a></li>
      <li><a href="#">Cash Loan</a></li>
      <li><a href="#">Same Day Loan</a></li>
      <li><a href="#">Instant Loans</a></li>
      <li><a href="#">Quick Loan</a></li>
      <li><a href="#">Cash Advances</a></li>
      <li><a href="#">Fast Loan</a></li>
    </ul>
  </li>
  <li><a href="#">Car Loan</a></li>
  <li><a href="#">Mortgage</a></li>
</ul> 
```

我只想删除嵌套的`<ul>`，而不是它的 children `<li>`。这在 jQuery 中可能吗？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:49:43.047

你不能把一个`li`放在另一个里面`li`。但是，您可以做的是`li`从 . 中移动元素`ul`并将它们放在`li`用于包含`ul`. 这些方面的东西：

```
$("ul > li ul").each(function() {
    var $ul = $(this);
    $ul.children().insertAfter($ul.parent());
    $ul.remove();
}); 
```

[实例](http://jsbin.com/ipaduj/1)| [资源](http://jsbin.com/ipaduj/1/edit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T11:48:55.820

您可以在列表项上调用[unwrap()方法。](http://api.jquery.com/unwrap/)

这将删除该`ul`元素并重新设置该`li`元素下的元素（及其兄弟姐妹，如果有的话）`ul`。

# linux - 哪个对浮点操作更有效，awk 还是 bc？

> ID：13540858
> 
> 赞同：1
> 
> 时间：2012-11-24T11:42:18.323
> 
> 标签：linux, performance, bash, awk, bc

我正在用 bash 编写系统性能脚本。我想以百分比计算 CPU 使用率。我有两种实现，一种使用 awk，另一种使用 bc。我想知道这两个版本中哪个更有效。使用 awk 或 bc 进行浮点计算更好吗？谢谢！

版本 #1（使用 bc）

```
CPU=$(mpstat 1 1 | grep "Average" | awk '{print $11}')
CPU=$(echo "scale=2;(100-$CPU)" | bc -l)
echo $CPU 
```

版本 #2（使用 awk）

```
CPU=$(mpstat 1 1 | grep "Average" | awk '{idle = $11} {print 100 - idle}')
echo $CPU 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:50:44.153

由于两者的处理时间都很短，产生最少进程和子shell的版本将“更有效”。

这是你的第二个例子。

但是您可以通过消除`grep`：

```
CPU=$(mpstat 1 1 | awk '/Average/{print 100 - $11}') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T12:09:31.880

在版本 1 中，为什么需要第二行？为什么你不能从第一行本身做呢？我问是因为，第一个版本是 grep+awk+bc；第二个例子是 grep+awk。所以我认为这种比较是无效的。

对于只使用 bc 而没有 awk，试试这个：

```
CPU=$(mpstat 1 1 | grep Average | { read -a P; echo 100 - ${P[10]}; } | bc ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T08:12:04.680

感谢大家对我进行 awk/bc 的教育！
做了基准测试（希望以更正确的方式）：
tl；博士：awk 获胜

半长的故事：
3 次 1000 次运行 awk 在我的系统上平均为 2.081333s，而 bc 平均为 3.460333s

完整的故事：

```
[me@thebox tmp]$ time for i in `seq 1 1000` ; do echo "Average:     all    5.05    0.00    6.57    0.51    0.00    0.00    0.00    0.00   87.88" | awk '/Average/ {print 100 - $11}' >/dev/null ; done

real    0m1.922s
user    0m0.320s
sys     0m1.308s
[me@thebox tmp]$ time for i in `seq 1 1000` ; do echo "Average:     all    5.05    0.00    6.57    0.51    0.00    0.00    0.00    0.00   87.88" | awk '/Average/{print 100 - $11}' >/dev/null ; done

real    0m2.124s
user    0m0.370s
sys     0m1.368s
[me@thebox tmp]$ time for i in `seq 1 1000` ; do echo "Average:     all    5.05    0.00    6.57    0.51    0.00    0.00    0.00    0.00   87.88" | awk '/Average/{print 100 - $11}' >/dev/null ; done

real    0m2.198s
user    0m0.412s
sys     0m1.383s

[me@thebox tmp]$ time for i in `seq 1 1000` ; do echo "Average:     all    5.05    0.00    6.57    0.51    0.00    0.00    0.00    0.00   87.88" | grep Average | { read -a P; echo 100 - ${P[10]}; } | bc >/dev/null ; done

real    0m3.799s
user    0m0.691s
sys     0m3.059s
[me@thebox tmp]$ time for i in `seq 1 1000` ; do echo "Average:     all    5.05    0.00    6.57    0.51    0.00    0.00    0.00    0.00   87.88" | grep Average | { read -a P; echo 100 - ${P[10]}; } | bc >/dev/null ; done

real    0m3.545s
user    0m0.604s
sys     0m2.801s
[me@thebox tmp]$ time for i in `seq 1 1000` ; do echo "Average:     all    5.05    0.00    6.57    0.51    0.00    0.00    0.00    0.00   87.88" | grep Average | { read -a P; echo 100 - ${P[10]}; } | bc >/dev/null ; done

real    0m3.037s
user    0m0.602s
sys     0m2.626s
[me@thebox tmp]$ 
```

在没有进一步追踪的情况下，我相信这与使用 bc 时分叉更多进程的开销有关。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-24T12:39:17.283

我做了以下基准测试：

```
#!/bin/bash

count=0
tic="$(date +%s)"
while [ $count -lt 50 ]
do
mpstat 1 1 | awk '/Average/{print 100 - $11}'
count=$(($count+1))
done
toc="$(date +%s)"
sec="$(expr $toc - $tic)"

count=0
tic="$(date +%s)"
while [ $count -lt 50 ]
do
CPU=$(mpstat 1 1 | grep "Average" | awk '{print $11}')
echo "scale=2;(100-$CPU)" | bc -l
count=$(($count+1))
done
toc="$(date +%s)"
sec1="$(expr $toc - $tic)"

echo "Execution Time awk: "$sec
echo "Execution Time bc: "$sec1 
```

两个执行时间是相同的...... 50 秒。显然它没有任何区别。

# ios - 使用 iPhone 前置摄像头时 GPUImage 出现垂直黑条

> ID：13540862
> 
> 赞同：3
> 
> 时间：2012-11-24T11:42:40.697
> 
> 标签：ios, camera, gpuimage

我正在尝试将 GPUImage 集成到我的 iPhone 应用程序中，以使用实时滤镜拍照。但是我发现了一个烦人的问题：当我使用前置摄像头拍照时，结果图像中总是出现一些垂直的黑条。

*   后置摄像头从来没有这个问题；
*   它与过滤器无关，我尝试过不使用任何过滤器。

首先我认为这与我的 iPhone 硬件有关，然后我在互联网上搜索，其他开发人员也遇到了同样的问题（没有解决方案）。

在此处查看图片：http: [//i.stack.imgur.com/rPAJ9.jpg](http://i.stack.imgur.com/rPAJ9.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:04:45.180

也许这可以帮助你：

> 我有同样的问题。在 GPUImageStillCamera.m 中，我注释掉了“[self captureOutput:photoOutput didOutputSampleBuffer:imageSampleBuffer fromConnection:[[photoOutput connections] objectAtIndex:0]];” 现在故障消失了。这是我能够在不强制 GPUImageOpenGLESContext 的 +supportsFastTextureUpload 返回 NO 的情况下解决问题的唯一方法。

更多见：[这里](https://github.com/BradLarson/GPUImage/issues/108)

# actionscript-3 - 动作脚本 3.0 。我尝试了一个应该移动拖动器以及内容影片剪辑的程序，

> ID：13540863
> 
> 赞同：1
> 
> 时间：2012-11-24T11:42:44.813
> 
> 标签：actionscript-3, flash-cs5.5

在这段代码中，我需要一个进度条来播放导入的 .swf 文件，同时我应该能够在进度条中拖动拖动器（即拖动器的移动速度应该与 .swf 文件播放的速度同步）。我得到参数错误：#2109 在场景 1 中找不到帧标签 459.99。

```
var loader:Loader = new Loader();
playBtn.visible = true;

pauseBtn.visible = false;
btn_00.addEventListener(MouseEvent.CLICK, fileLoaded);
btn_01.addEventListener(MouseEvent.CLICK, fileLoaded);
btn_02.addEventListener(MouseEvent.CLICK, fileLoaded);
function fileLoaded(evt:MouseEvent):void
{
    var fileName:String = evt.currentTarget.name;
    var fileNumber:String = fileName.split("_")[1];
    var urlPath:String = "assets/file_" + fileNumber + ".swf";
    loader.load(new URLRequest(urlPath));
    addChild(loader);
}
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, swfLoaded);
function swfLoaded(event:Event):void
{
    addEventListener(Event.ENTER_FRAME, trackPlayback);
}
function trackPlayback(event:Event):void
{
    var perPlayed:Number = MovieClip(loader.content).currentFrame / MovieClip(loader.content).totalFrames;
    progressbar.drag.x = (progressbar.bar.width - progressbar.drag.width) * perPlayed;
}
progressbar.drag.buttonMode = true;
var dragClicked:Boolean = false;
var xpos:Number = progressbar.bar.x * progressbar.drag.width;
progressbar.drag.addEventListener(MouseEvent.MOUSE_DOWN,dragMouseDown);
function dragMouseDown(evt:MouseEvent):void
{
    trace(" inside mouse down ");
    dragClicked = true;
    progressbar.drag.startDrag(false,new Rectangle(xpos,0,progressbar.width-progressbar.drag.width,0));
}

progressbar.drag.addEventListener(MouseEvent.MOUSE_UP,dragMouseUp);
function dragMouseUp(evt:MouseEvent):void
{
    dragClicked = false;
    progressbar.drag.stopDrag();
    var cnt:Number = (progressbar.drag.x/(progressbar.width-progressbar.drag.width))*MovieClip(loader.content).totalFrames;
    MovieClip(loader.content).gotoAndPlay(cnt);
  } 
```

请解决我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:35:39.690

要访问特定帧，您需要提供一个整数值，此时您正在使用浮点值。

一个简单的解决方法是将其`Number`转换为`int`：

```
MovieClip(loader.content).gotoAndPlay(int(cnt)); 
```

# php - 使用 Markdown 进行 Google 代码美化不起作用

> ID：13540864
> 
> 赞同：4
> 
> 时间：2012-11-24T11:42:46.297
> 
> 标签：php, javascript, markdown, google-code-prettify

[Google Code Prettify](https://github.com/google/code-prettify)工作正常，但是当我使用 Markdown 内容并显示数据库中的内容时，Prettify 无法正常工作（[实时结果链接](http://www.brightmeup.info/article.php?a_id=7)）。

这就是我正在做的事情：

*   获取内容

    `<textarea name="article_content" id="wmd-input" class="wmd-panel"></textarea>`

*   然后在之后存储输出（我正在使用[PDO](https://en.wikipedia.org/wiki/PHP#Development_and_community)）

    `Markdown($_POST['article_content'])`

但是结果，我在代码部分写的部分如果我不使用 Markdown 可以正常工作，但是当我从 textarea 中获取内容并使用 Markdown 时，它就无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:25:24.267

查看 HTML 代码。您错过了*pre*标签上的 class="prettyprint" 。

```
<pre><code>try {
    $db-&gt;beginTransaction();

    $db-&gt;exec("SOME QUERY");

    $stmt = $db-&gt;prepare("SOME OTHER QUERY?");
    $stmt-&gt;execute(array($value));

    $stmt = $db-&gt;prepare("YET ANOTHER QUERY??");
    $stmt-&gt;execute(array($value2, $value3));

    $db-&gt;commit();
} catch(PDOException $ex) {
    //Something went wrong rollback!
    $db-&gt;rollBack();
    echo $ex-&gt;getMessage();
}
</code></pre> 
```

应该

```
<pre class="prettyprint"><code>try {
    $db-&gt;beginTransaction();

    $db-&gt;exec("SOME QUERY");

    $stmt = $db-&gt;prepare("SOME OTHER QUERY?");
    $stmt-&gt;execute(array($value));

    $stmt = $db-&gt;prepare("YET ANOTHER QUERY??");
    $stmt-&gt;execute(array($value2, $value3));

    $db-&gt;commit();
} catch(PDOException $ex) {
    //Something went wrong rollback!
    $db-&gt;rollBack();
    echo $ex-&gt;getMessage();
}
</code></pre> 
```

要解决`<pre>`自动生成的问题，您可以尝试以下操作：

```
$newcontent = str_replace('<pre>', '<pre class="prettyprint">', $_POST['article_content']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T12:57:11.057

对于自动生成`<pre>`，您还可以使用：

```
$('pre').addClass('prettyprint'); 
```

# jquery - 如果选中目标复选框的兄弟之一，如何不取消选中父复选框

> ID：13540867
> 
> 赞同：0
> 
> 时间：2012-11-24T11:44:02.163
> 
> 标签：jquery, onchange, siblings, parents

如果选中目标复选框的兄弟姐妹之一，我如何不取消选中父复选框？

下面是我从这个[答案](https://stackoverflow.com/questions/2119220/check-the-parent-checkbox-with-jquery)修改的代码。

```
$(document).ready(function() {
    $('input.liChild').change(function() {
        if ($(this).is(':checked')) {
            $(this).parents('ul').siblings('input:checkbox').attr('checked', true);
        }
        else
        {
            if($(this).parents('ul').siblings('input:checkbox').not(':checked')) 
                $(this).parents('ul').siblings('input:checkbox').attr('checked', false);
        }
    });
}); 
```

这个想法是检查所有父母的复选框，无论目标复选框有多深。如果未选中目标复选框，则再次取消选中所有父母的复选框。

**我的麻烦是，如果选中了目标复选框的兄弟姐妹**，我不想取消选中父母的复选框。

这是我的[jsfiddle](http://jsfiddle.net/D6wky/)。

**编辑：**

我制定了自己的解决方案，谢谢大家的帮助。

```
 $('input.liChild').change(function() {
        if ($(this).is(':checked')) {
            $(this).parents('ul').siblings('input:checkbox').attr('checked', true);
            //alert($(this).parents().siblings().find('input:checkbox:checked').length);
            //$(this).parents().siblings().css({background:'red'});
            //$(this).parent().children().css({background:'red'});
        }
        else
        {
            $(this).parent().children().find('input:checkbox:checked').attr('checked', false);

            if($(this).parents().siblings().find('input:checkbox:checked').length == 0) 
                $(this).parents('ul').siblings('input:checkbox').attr('checked', false);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:13:49.780

看看这个：http: [//jsfiddle.net/D6wky/5/](http://jsfiddle.net/D6wky/5/)

```
$('input.liChild').on("change", function() {
  //set the same value for all chilren
  $(this).parent().find('input.liChild').attr("checked", $(this).is(":checked"));

  //we need to run the next block several times
  //until nothing is changed on an iteration
  var something_changed = true;
  while(something_changed) {
    something_changed = false;
    $('input.liChild').each(function() {
      var childs = $(this).parent().find('input.liChild').not(this);
      if (childs.length > 0) {
        //this input has children, so its value must be adjusted 
        //to match children's values
        var anything_checked = childs.filter(":checked").length > 0;
        if ($(this).is(":checked") != anything_checked) {
          $(this).attr("checked", anything_checked);
          //value changed, we need to re-run this procedure 
          //to adjust value of parent checkbox of this item
          something_changed = true;
        }
      }
    });
  };
}); 
```

我已经`liChild`在第一个复选框中添加了类。此外，您的二级列表与`</ul><ul>`. 我已经删除了这些标签以使事情正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:15:35.603

有点像这样：

```
$('input.liChild').change(function() {
    $(this).closest('ul')
           .siblings('input:checkbox')
           .prop('checked', $(this).closest('ul')
                                   .children()
                                   .children('input:checkbox')
                                   .is(':checked'))
           .first().change();
}); 
```

演示：http: [//jsfiddle.net/D6wky/4/](http://jsfiddle.net/D6wky/4/)

更改后的复选框的父级可通过以下方式找到：

```
$(this).closest('ul').siblings('input:checkbox') 
```

...然后将父`checked`属性设置为以下结果：

```
$(this).closest('ul').children().children('input:checkbox').is(':checked') 
```

...如果检查了调用它的 jQuery 对象中的*任何*元素，则where`.is(':checked')`将返回。`true`

 *然后`.change()`在父级上调用，以便效果向上级联。（编辑：我认为您可以从上面省略`.first()`- 当时我认为我需要它，而且它不会受到伤害，所以我会留下它，因为我不会费心将演示更改为匹配。）*

# php - 通过从 3 个下拉列表中获取数据重定向到 php 中的特定页面

> ID：13540875
> 
> 赞同：-1
> 
> 时间：2012-11-24T11:44:24.300
> 
> 标签：php, redirect

我想通过从 3（多个）下拉列表中获取数据来重定向到 php 中的特定页面。

下拉列表选项包含来自数据库的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:06:03.933

您可以使用 javascript 创建重定向

```
<select name="abc" onchange="redirect(this.value)">
     <!-- your options here -->
</select>

<script type="text/javascript">

function redirect(value){
    window.location.href = "http://www.yourdomain.com/"+value;
}
</script> 
```

或者你可以试试jquery。

```
<select name="abc" id="abc">
     <!-- your options here -->
</select>

<script type="text/javascript">
   $(document).ready(function(){
        $("#abc").change(function(){
             window.location.href = $(this).val();
        });
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:06:59.873

您可以使用 j [Query 更改事件](http://api.jquery.com/change/)，例如：

```
<select class="target" id="drop1">
    <option value="URL_A">Option 1</option>
    <option value="URL_B">Option 2</option>
</select>

<select class="target" id="drop2">
    <option value="URL_C">Option 1</option>
    <option value="URL_D">Option 2</option>
</select>

<select class="target" id="drop3">
    <option value="URL_E">Option 1</option>
    <option value="URL_F">Option 2</option>
</select>

<script>
    $('.target').change(function() {
        var id = $(this).attr('id');
        window.location = $("#" + id).val();
    });
</script> 
```

我也在这里做了例子[http://jsfiddle.net/s2hLH/](http://jsfiddle.net/s2hLH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:05:51.263

只需使用您提交的表单的值`$_POST`并编写决策条件并使用 header() 函数重定向您的页面

# c# - 在 C# 中将方法作为参数传递的动态委托

> ID：13540876
> 
> 赞同：5
> 
> 时间：2012-11-24T11:44:26.733
> 
> 标签：c#, dynamic

有没有办法使用 DLR 来引用 C# 中的方法？

在 JavaScript 或 Python 等动态语言中，我可以轻松地将一个方法作为参数传递给另一个方法。在作为静态类型语言的 C# 中，我要么使用`Delegate`需要大量转换的类型：

```
public static void AddMethod(Delegate del)
{
    // implementation
} 
```

然后在我调用此方法时使用强制转换

```
static void Main(string[] args)
{
    AddMethod(new Func<object, bool>(Test));
}

public static bool Test(object obj)
{
    return true;
} 
```

或者，我需要定义几十个重载来满足任何方法调用：

```
public static void AddMethod<TResult>(Func<TResult> method)
{
}

public static void AddMethod<T, TResult>(Func<T, TResult> method)
{
}

public static void AddMethod<T1, T2, TResult>(Func<T1, T2, TResult> method)
{
}

public static void AddMethod<T1, T2, T3, TResult>(Func<T1, T2, T3, TResult> method)
{
} 
```

有没有更简洁的方法将参数定义为所有其他方法的占位符？（我在这里试图避免`MethodInfo`或其他`Reflection`东西）

我正在尝试这样的事情：

```
public delegate dynamic DynamicDelegate(params dynamic[] args);

public static void AddMethod(DynamicDelegate method)
{
} 
```

但是编译器似乎不接受动态声明的委托的静态类型方法！

还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:57:21.633

你可以使用一个简单的`Action`

```
void AddMethod(Action action) //or void AddMethod(Func<TResult> fxn)
{
} 
```

并称为

```
AddMethod(()=>Test(obj)); 
```

或者

```
AddMethod(()=>Test(obj1,obj2)); 
```

- 编辑 -

```
AddMethod(() => Math.Max(1,3));  
AddMethod(() => (int)Math.Sqrt(4));
AddMethod(() => new int[]{8,5,6}.Min())

void AddMethod(Func<int> fxn)
{
     int i = fxn() * fxn();  // <---
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T12:53:07.557

由于 .NET 不允许使用未知参数语法的委托（这将近似于 C void 指针，这在类型安全语言中不是您想要的），允许变量参数列表的最接近的方法是传递一个数组对象参数（即`object MyMethod(params object[] args))`。
但是，由于此数组也是一个对象引用，因此您可以使用单个对象引用：

```
object MyMethod(object arg)) 
```

.NET 框架也这样做，例如参见[ParameterizedThreadStart 委托）](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)

所以基本的想法是，你要求用户将他的代码编写为与上述签名匹配的方法，然后它可以接收任何类型或大小的参数的任何变量列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-01T23:32:43.987

见下文

```
 Logger coreLogger;
    Logger coreErrorLogger;

    public Core()
    {
        PassByReference timestamp = new PassByReference(Timestamp);

        coreLogger = Logger.GetLogger("LiTHiuM Core");
        coreLogger.SetFormat("[{0}][LiTHiuM Core]: ", timestamp);
        coreLogger.AddLogger(Log);

        coreErrorLogger = Logger.GetLogger("LiTHiuM Core Error");
        coreErrorLogger.SetFormat("[{0}][LiTHiuM Core (ERROR)]: ", timestamp);
        coreErrorLogger.AddLogger(Error);

    }

    public string Timestamp(params dynamic[] args)
    {
        return DateTime.Now.ToString();
    } 
```

```
 public delegate dynamic Reference(params dynamic[] args);

    public class PassByReference
    {
        Reference reference;

        public PassByReference(Reference reference)
        {
            this.reference = reference;
        }
        public override string ToString()
        {
            return this.reference().ToString();
        }
    } 
```

```
 public class Logger
    {

        static Dictionary<string, Logger> logFormatDict = new Dictionary<string, Logger>();
        private List<LoggerDelegate> loggerDelegates = new List<LoggerDelegate>();
        public static Logger GetLogger(string name)
        {
            if (logFormatDict.ContainsKey(name))
            {
                return logFormatDict[name];
            }
            else
            {
                var newLogFormat = new Logger(name, "");
                logFormatDict.Add(name, newLogFormat);
                return newLogFormat;
            }
        }

        private event LoggerDelegate loggingEvent;
        private Logger(string name, string format, params dynamic[] args)
        {
            this.Name = name;
            this.format = format;
            this.args = args;
        }
        public void AddLogger(LoggerDelegate logger)
        {
            if (!loggerDelegates.Contains(logger))
            {
                loggingEvent += logger;
                loggerDelegates.Add(logger);
            }
        }

        public void RemoveLogger(LoggerDelegate logger)
        {
            if (loggerDelegates.Contains(logger))
            {
                loggingEvent -= logger;
                loggerDelegates.Remove(logger);
            }
        }

        public void Log(string text, params dynamic[] args)
        {
            this.Invoke(String.Format(text, args));
        }

        public void Invoke(string text, params dynamic[] args)
        {
            loggingEvent.Invoke(this.ToString() + text, args);
        }

        public void SetFormat(string format, params dynamic[] args)
        {
            this.args = args;
            this.format = format;
        }
        public string Name
        {
            get;
            set;
        }
        string format;
        dynamic[] args;

        public override string ToString()
        {
            return String.Format(format, args);
        }
    } 
```

# frameworks - SCM：维基+论坛+票务系统

> ID：13540882
> 
> 赞同：-1
> 
> 时间：2012-11-24T11:44:58.887
> 
> 标签：frameworks, wiki, forum, ticket-system

是否有任何封装的开源框架： a`Wiki`和`Forum`a `ticket system`. 类似于软件配置管理器（SCM）的东西。

寻找与*sourceforge*提供给项目所有者的非常相似的东西。

我希望为一个小型*私人*网络软件项目提供支持。我一直在寻找这些功能的单独实现。

如果有商业产品，也很高兴收到他们的来信。

`Wordpress`可能是一种选择。

![源泉](../Images/4a23d07941217bef37beeb5b8335c146.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:04:58.940

You could use [Redmine](http://www.redmine.org/). It offers a Wiki, Boards (=Forum), Issue tracking.

Another popular alternative would be [Trac](http://trac.edgewall.org/) which offers Wiki and Issue tracking. For forums there exists a [plugin](http://trac-hacks.org/wiki/DiscussionPlugin) (The plugin is not actively developed anymore?).

# iphone - Google oauth 2.0 刷新访问令牌

> ID：13540886
> 
> 赞同：1
> 
> 时间：2012-11-24T11:45:42.117
> 
> 标签：iphone, objective-c, ios, oauth

如何在 Google Oauth 2.0 中获取新的访问令牌？

我试过这个：

```
 NSString * urlString1 = [NSString stringWithFormat:@"https://accounts.google.com/o/oauth2/token?client_id=my_client_id&client_secret=my_client_secret&refresh_token=%@&grant_type=refresh_token",auth.refreshToken];
    NSURL * url = [NSURL URLWithString:urlString1];   
    NSMutableURLRequest * request = [[NSMutableURLRequest alloc] initWithURL:url];
    [request addValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPMethod:@"POST"];
    NSURLConnection * connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
    [connection start]; 
```

但结果是：不允许的方法（错误 405）

也许还有另一种获取新访问令牌的方法？

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:32:04.637

请使用以下代码在 Google Plus 中获取访问令牌

首先替换你- **GTMOAuth2Authentication.h文件中的****(NSString *)description**方法，你肯定会得到 G+ 访问令牌

 **```
 - (NSString *)description 
 {
        NSArray *props = [NSArray arrayWithObjects:@"accessToken",nil];//[NSArray arrayWithObjects:@"accessToken", @"refreshToken",@"code", @"assertion", @"expirationDate", @"errorString",nil];
       NSMutableString *valuesStr = [NSMutableString string];
       NSString *separator = @"";
       for (NSString *prop in props) {
       id result = [self valueForKey:prop];
       if (result)
       {
          [valuesStr appendFormat:@"%@",result];
          separator = @", ";
      }
    }

 return [NSString stringWithFormat:@"%@",valuesStr];
} 
```

**在 .h 文件中**

```
@class GPPSignInButton;
@interface GPlusView : UIViewController <GPPSignInDelegate>
{
      IBOutlet GPPSignInButton *signInButton;
}

@property (retain, nonatomic) IBOutlet GPPSignInButton *signInButton; 
```

**在 .m 文件中**

```
 signInButton_.shouldFetchGoogleUserEmail = TRUE;
 signInButton_.delegate = self;

 signInButton_.clientID = [SamacharAppDelegate clientID];
 signInButton_.scope = [NSArray arrayWithObjects:
                       @"https://www.googleapis.com/auth/plus.me",
                       nil];

 -(void)finishedWithAuth:(GTMOAuth2Authentication *)auth error:(NSError *)error
 {
     if (error) {
           NSLog(@"Error = %@",error.localizedDescription);
           return;
     }
     NSLog("Auth Data = %@",auth);

   /* Auth Data =  {accessToken="ya29.AHES6ZQYLmSBc9n4pLj9U8OQrFoTDZnGLH8okPkxbda7B0Q", refreshToken="1/puItTB-sqHupfp9qPCKcb6_gWUjgcxwzc9TKJvUwMEI", expirationDate="2012-11-24 13:30:55 +0000"}  */ 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:33:45.407

HTTP 405 表示您正在尝试使用资源不允许的动词。例如`POST`，在只读`GET`资源或`PUT`仅接受`POST`s 的写入资源上使用 a。

请参阅[亚伯拉罕的回答](https://stackoverflow.com/questions/9800336/google-with-oauth-2/9810563#9810563)：[Google with oauth 2](https://stackoverflow.com/questions/9800336/google-with-oauth-2/9810563#9810563)**

# pydev - pydev 目录 django shell

> ID：13540887
> 
> 赞同：0
> 
> 时间：2012-11-24T11:45:42.493
> 
> 标签：pydev

我在我的 django 项目中使用 PyDev。当我启动 django sheel 时， os.getcwd() 命令返回我的主文件夹。这很糟糕，因为我的代码通过相对路径指向一些资源，假设当前目录是包含 manage.py 的目录。

在这篇文章（http://stackoverflow.com/questions/2746342/pydev-and-django-pydev-break-django-shell）中，有人建议使用绝对路径来避免这个问题。但我认为这是一种非常糟糕的做法，因为当其他人将代码签入他们的计算机时，事情将无法正常工作。

我在这里找到的最接近的提示：http: [//old.nabble.com/-pydev---Users--how-to-set-working-directory-for-console--td25328455.html](http://old.nabble.com/-pydev---Users--how-to-set-working-directory-for-console--td25328455.html) 看来我们可以使用“运行/Debug Settings”设置与“可运行模块”关联的当前目录。但是，通过这种方式，我们无法将设置关联到 django 控制台。我试图将它与 manage.py 相关联，但它不起作用。

那么，问题来了：如何定义django shell的工作目录？

谢谢你，莱昂纳多

# vlc - 错误构建 mobilevlc -> autoconf 问题

> ID：13540889
> 
> 赞同：1
> 
> 时间：2012-11-24T11:46:17.453
> 
> 标签：vlc, autoconf

在我的 MacMini 上为 IOS-Simulator 编译 MobileVlc 时，出现以下错误：

我开始使用以下命令构建 MobileVlc：`./buildMobileVLC.sh -s`

最后的输出是：

```
mkdir -p -- /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/contrib/i686-apple-darwin11/share/aclocal && cd a52dec && autoreconf -fiv -I/Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/contrib/i686-apple-darwin11/share/aclocal
autoreconf: Entering directory `.'
autoreconf: configure.in: not using Gettext
autoreconf: running: aclocal -I /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/contrib/i686-apple-darwin11/share/aclocal --force 
aclocal: warning: autoconf input should be named 'configure.ac', not 'configure.in'
autoreconf: configure.in: tracing
autoreconf: configure.in: not using Libtool
autoreconf: running: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/bin/autoconf --include=/Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/contrib/i686-apple-darwin11/share/aclocal --force
**configure.in:74: error: possibly undefined macro: AC_DISABLE_SHARED
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
configure.in:75: error: possibly undefined macro: AC_LIBTOOL_WIN32_DLL
configure.in:76: error: possibly undefined macro: AC_PROG_LIBTOOL
autoreconf: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/bin/autoconf failed with exit status: 1**
make: *** [.a52] Error 1 
```

有人可以帮助我吗？

仔细研究问题后，我必须说，以上始终是第二次尝试的输出。在第一次尝试时，我总是得到这个：

```
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/cmake-commands.txt
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/cmake-compatcommands.txt
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/ctest.txt
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/ctest.docbook
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/cpack.txt
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/cpack.docbook
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/ccmake.txt
-- Installing: /Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/doc/cmake-2.8/ccmake.docbook
-- Installing: **/Users/theo/Projects/compile/vlc/MobileVLC/ImportedSources/vlc/extras/tools/build/share/aclocal/cmake.m4**
  0     0    0     0    0     0      0      0 --:--:--  0:05:21 --:--:--     0touch .cmake
  0     0    0     0    0     0      0      0 --:--:--  0:11:00 --:--:--     0
  0     0    0     0    0     0      0      0 --:--:--  0:11:10 --:--:--     0^Cmake: *** Deleting file `yasm-1.2.0.tar.gz'
make: *** [yasm-1.2.0.tar.gz] Interrupt: 2 
```

输出在安装 cmake.m4 时停止。我必须用 打断它`^C`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T07:40:21.443

AC_LIBTOOL_WIN32_DLL configure.in:76：错误：可能未定义宏：AC_PROG_LIBTOOL autoreconf：

sudo apt-get install libtool

# c++ - 我如何合法地更改 ofstream 对象的文件名值？

> ID：13540893
> 
> 赞同：2
> 
> 时间：2012-11-24T11:46:36.550
> 
> 标签：c++, ofstream

我遇到了麻烦`ofstream`，那就是-当我`ofstream`像这样更改对象的值时

```
ofstream o_save; 

/*code*/

o_save = ofstream(filename);  //Problem is here 
```

...上面的行完全擦除文件的内容。

问题是我如何合法地改变object`filename`的值？`ofstream`

PS我在声明它时无法定义它，因为我希望它是全局的并且我不确定我选择了哪个保存文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:07:42.957

这个问题相当模糊和矛盾，问完这个问题，OP似乎已经睡着了。因此，我将尝试窥探他的内心，并尝试详细说明他想要什么。

对于打开文件，有多种[模式](http://en.cppreference.com/w/cpp/io/ios_base/openmode)。像这样打开它。

```
ofstream o_value ;
o_value.open("file.txt") ; 
```

如果要保留该文件的原始内容，请使用..

```
o_value.open("file.txt", ios::app) ; 
```

如果您想稍后关闭它并打开另一个，请使用...关闭

```
o_value.close() ; 
```

在`ofstream`. 您可以使用`rename`来自`<cstdlib>`. 您可以使用`remove("file.txt")`in删除文件`<cstdio>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:14:11.220

“更改对象的名称”是什么意思`ofstream`？对象唯一的“名称”`ofstream`是变量的名称。`ofstream`对象是数据流。您可以（在某些系统上）使用 更改与之关联的文件的名称`rename`，但不知何故，我认为这也不是您想要的。您还可以关闭流，然后在另一个文件上重新打开它。

您不能在 iostream 对象之间进行分配。如果情况变得更糟，您可以将全局对象声明为指针，并分配给它（使用`*o_save`写入它）。

最后，该标准规定，当您打开一个. 文件时`ofstream`，您会截断该文件（如果存在的话）。如果这不是您想要做的，那么您必须在打开模式中添加一些标志。例如，如果您添加`std::ios_base::app`，您将不再截断文件，并且所有写入都将在文件末尾（原子地，如果系统支持它）。或者（虽然很令人惊讶），您可以添加`std::ios::in`到标志；如果文件不存在，这将失败，但允许在文件中的任何位置写入。如果您希望能够在文件的任何位置写入，即使您不想读取它，这是打开文件进行写入的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:06:51.120

`ofstream`没有某种抽象`name`属性，名称只是其某些成员函数的参数，从这个意义上说，询问如何

> 改变对象`filename`的值`ofstream`

是没有意义的。

一般来说，您可以使用`std::rename`from`<cstdlib>`或使用 Boost.Filesystem 重命名文件。

# django - 在 django url 配置中使用或不使用 url 的区别

> ID：13540899
> 
> 赞同：0
> 
> 时间：2012-11-24T11:47:34.320
> 
> 标签：django

在 django urls 配置中使用 'nothing' 的 url 有什么区别？

```
urlpatterns = patterns('',

    url(r'^admin/', include(admin.site.urls)),
) 
```

或者

```
urlpatterns = patterns('',

    (r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:50:02.903

如[文档](https://docs.djangoproject.com/en/dev/ref/urls/#url)中所述：

> 您可以使用 url() 函数而不是元组作为 patterns() 的参数。如果您想指定一个没有可选额外参数字典的名称，这很方便。

在您的情况下，行为是相同的。

# asp.net - 在 DAL 中找不到数据时如何在 BLL 中引发异常

> ID：13540900
> 
> 赞同：2
> 
> 时间：2012-11-24T11:47:40.263
> 
> 标签：asp.net, exception-handling, data-access-layer, bll

当我在文本框中输入的车牌号没有对应的汽车 ID 时，我试图在我的 BLL 中引发异常。

我的 DAL 看起来像这样：

```
Public Class DALCar
    Private dc As New cars_modelDataContext

    Public Function getCarIdByLicenePlate(ByVal licensePlate_input As String) As String
        Dim result = (From car In dc.Cars
                    Where car.License_Plate = licensePlate_input
                    Select car.License_Plate).Single
        Return result
    End Function

End Class 
```

这是我的 BLL：

```
Public Class BLLCar
    Private DALcar As New DALCar

    Public Function getCarIdByLicenePlate(ByVal licensePlate_input As String) As String
        Dim carID As String = DALcar.getCarIdByLicensePlate(chassisNo_input)
    End Function

End Class 
```

因此，当没有带有此特定车牌的 carID 时，会在我的 DAL 中引发异常，但是如何在我的 BLL 中而不是在我的 DAL 中引发此异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:49:56.807

因为您`Enumerable.Single`在 LINQ 表达式中使用。如果序列中有多个元素或序列为空，则会引发异常。

如果您可以假设该序列将始终包含 0 或 1 个元素，那么您可以替换`Single`为`FirstOrDefault`（有关此内容的更多信息，请参见下文）。它将返回序列中的第一个元素，或者`Nothing`如果序列为空。

在这种情况下，您可以在 BLL 中检查并`Nothing`在那里抛出适当的异常。

在你的 DAL 中像这样：

```
Public Class DALCar
    Private dc As New cars_modelDataContext

    Public Function getCarIdByLicenePlate(ByVal licensePlate_input As String) As String
        Dim result = (From car In dc.Cars
                    Where car.License_Plate = licensePlate_input
                    Select car.License_Plate).FirstOrDefault
        Return result
    End Function
End Class 
```

这在你的 BLL 中：

```
Public Class BLLCar
    Private DALcar As New DALCar

    Public Function getCarIdByLicenePlate(ByVal licensePlate_input As String) As String
        Dim carID As String = DALcar.getCarIdByLicensePlate(chassisNo_input)
        If carId = Nothing Then
            Throw New ArgumentException("There is no match.")
        End If
    End Function
End Class 
```

如果您的查询*可能*返回多个元素，则您必须考虑这是否是错误。如果允许并且您想处理（返回）第一个，那么继续`FirstOrDefault`. 如果这是一个错误，那么你应该从你的 DAL 返回一个枚举并检查你的 BLL 中的项目数（否则，使用`Single`，你仍然会在 DAL 中抛出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:51:53.920

使用[FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb340482.aspx) 而不是 Single

```
Public Function getCarIdByLicenePlate(ByVal licensePlate_input As String) As String
    Dim result = (From car In dc.Cars
                Where car.License_Plate = licensePlate_input
                Select car.License_Plate).FirstOrDefault 
    Return result

 Public Function getCarIdByLicenePlate(ByVal licensePlate_input As String) As String
    Dim carID As String = DALcar.getCarIdByLicensePlate(chassisNo_input)
    If carID = Nothing Then
       Throw New Exception(String.Format("Can't find car id for chassisNo : {0}", chassisNo_input))
    End If
End Function 
```

# c# - Ajax 工具包控件 Reorderlist 未正确重新排序

> ID：13540902
> 
> 赞同：0
> 
> 时间：2012-11-24T11:47:45.437
> 
> 标签：c#, asp.net

在 asp.net ajax 工具包控件中，我使用的是 reorderlist。

当我第一次重新订购时，它工作正常，但进一步它没有。

下面是我的代码..

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
    <asp:ReorderList ID="rlItemList" DragHandleAlignment="Left" PostBackOnReorder="false"
        DataKeyField="VentureCategoryID" runat="server" SortOrderField="DisplayOrder"
        OnItemReorder="rlItemList_ItemReorder" AllowReorder="true" ClientIDMode="AutoID">
        <DragHandleTemplate>
            <div class="dragHandle">
            </div>
        </DragHandleTemplate>
        <ItemTemplate>
            <asp:Label ID="lblVentureCategoryID" runat="server" Visible="false" Text='<%#Eval("VentureCategoryID") %>' />
            <asp:Label ID="lblCategoryName" runat="server" Text='<%#Eval("CategoryName") %>' />
            <asp:Label ID="lblIsActive" runat="server" Text='<%#Eval("IsActive") %>' />
            <asp:Label ID="lblDisplayOrder" runat="server" Visible="false" Text='<%#Eval("DisplayOrder") %>' />
        </ItemTemplate>
        <ReorderTemplate>
            <asp:Panel ID="Panel2" runat="server" CssClass="reorderCue" />
        </ReorderTemplate>
    </asp:ReorderList> 
```

后面的代码是..

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            List<VentureCategory> VenList = VentureCategory.GetAll();
            rlItemList.DataSource = VenList;
            rlItemList.DataBind();

        }
    }

    protected void rlItemList_ItemReorder(object sender, ReorderListItemReorderEventArgs e)
    {
        var nId = e.NewIndex + 1;
        var oId = e.OldIndex + 1;
        List<VentureCategory> VenCatList = VentureCategory.GetAll();
        //foreach (var item in VenCatList)
        //{
        //    item.DisplayOrder = 9;
        //    VentureCategory.Update(item);
        //}
        int OldCategoryid = Convert.ToInt32(rlItemList.DataKeys[e.OldIndex].ToString());
        int NewCategoryid = Convert.ToInt32(rlItemList.DataKeys[e.NewIndex].ToString());

        var sortedList = VenCatList.OrderBy(sl => sl.DisplayOrder);
        var Count = 1;
        Label CatId = e.Item.FindControl("lblVentureCategoryID") as Label;
        var newcatId = Convert.ToInt32(CatId.Text);
        foreach (var item in sortedList)
        {
            if (oId > nId && Count >= nId && oId >= Count)
                item.DisplayOrder = Count + 1;
            else if (nId > oId && nId >= Count && Count >= oId)
                item.DisplayOrder = Count - 1;

            if (item.VentureCategoryID == newcatId)
                item.DisplayOrder = nId;
            VentureCategory.Update(item);
            Count++;
        }
    } 
```

任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:24:43.043

检查表是否具有相同的定义和相同的数据类型

# android - API 中的 TextView.setAllCaps() 等价于 14 岁以上？

> ID：13540903
> 
> 赞同：1
> 
> 时间：2012-11-24T11:47:56.480
> 
> 标签：android, textview, uppercase

TextView.setAllCaps() 从 API 14 开始。旧 API（例如 13 和更低版本）的等效项是什么？

我在较低的 API 上找不到这种方法。可能 setTransformationMethod() 对旧 API 负责吗？如果是，我应该如何使用它？`TextView.setTransformationMethod(new TransformationMethod() {...`有点混乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T11:51:36.043

尝试这个：

```
textView.setText(textToBeSet.toUpperCase()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T11:51:32.733

oldskool`strtoupper()`呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T22:06:39.440

底线是`toUpperCase()`解决方案。我不能反对。如果您更喜欢这样做`setAllCaps()`，`TransformationMethod`请查看我的[回答](https://stackoverflow.com/a/24025691/557179)。

# java - 使用子树大小扩展 Java TreeSet

> ID：13540906
> 
> 赞同：2
> 
> 时间：2012-11-24T11:48:22.637
> 
> 标签：java, treeset

我想将 Java TreeSet 扩展到 Order-Statistics 树。因此，我的想法是我将子树大小存储在每个节点中，并操作`add()`和`remove()`方法 st 子树大小也将被更新。

我知道有一些数据结构（也在 Java 中）已经实现了这一点，但我的问题是是否有可能以某种方式扩展 TreeSet 类，每当我修改数据结构时，这个属性就会被存储和更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T10:33:16.490

如果您查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeSet.java)，a`TreeSet`有一个

```
private transient NavigableMap<E,Object> m; 
```

您当然可以实现`add`,`addAll`等`remove`，但`TreeSet`大多数方法只是调用底层 Map，即`private`，因此您的实现无法访问。似乎[Order-Statistic-Tree 可以具有与普通 TreeMap 不同的顺序](https://en.wikipedia.org/wiki/Order_statistic_tree)，这似乎无法通过扩展 TreeSet 来实现。

### 使用另一种数据结构

您应该能够将数据结构基于[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)，据称 TreeSet 就是基于该结构。它

[为 containsKey、get、put 和 remove 操作提供有保证的 log(n) 时间成本](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)。

# jsf - Maven和JSF webapp结构，JSF资源到底放哪里

> ID：13540907
> 
> 赞同：21
> 
> 时间：2012-11-24T11:48:27.643
> 
> 标签：jsf, maven

我不太了解 Maven 和 JSF webapp 的目录结构。

当我生成项目时，我有这个结构：

```
src
|_ main
   |_ java
   |_ resources
   |_ webapp
      |_ WEB-INF 
         |_ web.xml
      |_ index.xhtml 
```

我想包括一些资源：

*   文件
*   css 文件
*   图片
*   i18n 文件

我可以在里面包含 i18n 文件，`src/main/resources`但不能在任何地方，我可以在里面包含 JS 文件、CSS 文件和图像，`src/main/webapp/resources`但不能在任何地方...

我没有在网上找到关于 JSF 和 Maven 目录结构的非常明确的规则。

请问有什么规则吗？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-24T12:27:27.357

和（因此`<h:outputStylesheet>`， CSS/JS/images）要引用的 JSF 资源应该最终位于公共 web 内容的文件夹中，其中和文件夹也在那里。`<h:outputScript>``<h:graphicImage>``/resources``/WEB-INF``/META-INF`

因此，您必须将它们放入`/src/main/webapp/resources`.

```
src
 `-- main
      |-- java
      |-- resources
      `-- webapp
           |-- resources
           |    |-- css
           |    |    `-- style.css
           |    |-- images
           |    |    `-- logo.png
           |    `-- js
           |         `-- script.js
           |-- WEB-INF 
           |    `-- web.xml
           `-- index.xhtml 
```

那些 i18n 文件（我假设您在技术上是指资源包文件）最终必须以`/WEB-INF/classes`. 旨在用于应该以 结尾的`/src/main/resources`非类文件`/WEB-INF/classes`，您应该将它们放在那里。假设捆绑包基本名称为`com.example.i18n.text`，请按以下方式提供它们：

```
src
 `-- main
      |-- java
      |-- resources
      |    `-- com
      |         `-- example
      |              `-- i18n
      |                   |-- text.properties
      |                   |-- text_en.properties
      |                   |-- text_es.properties
      |                   `-- text_nl.properties
      : 
```

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-css-js-image-resource-in-facelets-template)
*   [JSF 资源库有什么用途，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:17:25.927

css/images 等的最佳位置在 src/main/webapp/images 或 src/main/webapp/css/ 等。目前没有位置 src/main/webapp/resources。src/main/resources 文件夹用于存放应过滤或应位于 WEB-INF/classes 文件夹中的资源（属性文件等）。所以通常你不喜欢过滤图像和 css 文件。查看[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)文档，该文档提供了一些提示和配置示例。最好的方法似乎是将所有内容放入 src/main/webapp/FOLDER 中，无论如何都不应该对其进行过滤，否则您应该将其放入[src/main/resources](http://maven.apache.org/plugins/maven-resources-plugin/)中，您可以控制过滤和替换

# javascript - paypal dg flow 灯箱不再有效

> ID：13540913
> 
> 赞同：1
> 
> 时间：2012-11-24T11:48:50.577
> 
> 标签：javascript, paypal

我今天注意到我的链接通常会弹出一个用于数字商品快递支付的贝宝灯箱的链接已经停止工作。该链接最近在 2012/11/21 工作，我检查了包含旧代码（曾经工作）的服务器上是否存在问题，所以我不认为这是我已经改变的东西，而是paypal在他们的js文件中改变了一些东西。

我使用的代码正是 paypal 向导生成的代码：

```
<!-- INFO: The post URL "checkout.java" is invoked when clicked on "Pay with PayPal" button.-->

<form action='checkout.java' METHOD='POST'>
    <input type='image' name='paypal_submit' id='paypal_submit'  src='https://www.paypal.com/en_US/i/btn/btn_dg_pay_w_paypal.gif' border='0' align='top' alt='Pay with PayPal'/>
</form>
....

<!-- Add Digital goods in-context experience. Ensure that this script is added before the closing of html body tag -->

<script src='https://www.paypalobjects.com/js/external/dg.js' type='text/javascript'></script>

<script>

    var dg = new PAYPAL.apps.DGFlow(
    {
        trigger: 'paypal_submit',
        expType: 'instant'
         //PayPal will decide the experience type for the buyer based on his/her 'Remember me on your computer' option.
    });

</script> 
```

首先，当页面现在加载时，看起来名为“nameOnButton”的图像上有一些噪音（“图像”包含文本“su yi”和一些空框），PP javascript 必须插入，因为它不是在我生成的 HTML 中。网络上的各种示例也有这种虚假图像。HTML 看起来像：

```
<form action="/pay/dpSetCheckout/" method="GET" target="PPDGFrame">
        <input type="hidden" name="express">
        <input type="hidden" name="trackingNumber" value="UNg0000306">
        <span class="nameOnButton"><a href="javascript:"><img src="https://www.paypal.com/webapps/checkout/nameOnButton.gif"></a><br><input type="image" name="paypal_submit" id="paypal_submit" src="https://www.paypal.com/en_US/i/btn/btn_dg_pay_w_paypal.gif" border="0" align="top" alt="Pay with PayPal"></span>
      </form>

...

<script>

  $(document).ready(function(){

    var dg = new PAYPAL.apps.DGFlow({
        trigger: 'paypal_submit',
        expType: 'instant' 
        //PayPal will decide the experience type for the buyer based on his/her 'Remember me on your computer' option.
    });
    });
</script> 
```

当我单击“使用贝宝付款”按钮时，屏幕“变为灰色”，但从未出现贝宝弹出窗口。大约 5 秒后，错误消息“拒绝显示文档，因为 X-Frame-Options 禁止显示。” 出现在 javascript 控制台中，很可能是因为未创建灯箱。我不认为这是后端/配置问题，因为如果我在新选项卡中打开“使用贝宝付款”链接，它会正常打开。

我不太确定从哪里开始调试它（看到没有任何 javascript 错误消息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:38:13.680

我认为最近的 PayPal 版本中存在日文和中文字体的错误，应该尽快修复

# django - Django 测试：加载夹具时的 TemplateDoesNotExist。为什么？

> ID：13540914
> 
> 赞同：0
> 
> 时间：2012-11-24T11:48:51.913
> 
> 标签：django, unit-testing, testing, django-templates

我有一条从模板生成的自动欢迎消息，每当创建新用户时都会发送该消息（通过 User 模型的 post_save 信号）。一切正常，除非我运行 manage.py 测试。

Django 一直在抱怨：

***`Problem installing fixture '.../lib/python2.7/site-packages/django/contrib/auth/fixtures/context-processors-users.xml ... TemplateDoesNotExist users/email_welcome.html`***

尝试加载 django.contrib.auth 固定装置进行测试时。

为什么会这样？加载夹具时模板加载器不存在吗？有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:43:25.410

我不知道为什么这个模板有问题（它对我有用），但可能在装置加载期间你不想生成这封电子邮件。在这种情况下，您可以使用`raw`随信号发送的参数。来自 Django 文档`raw`：

> 一个布尔值；如果模型完全按照呈现方式保存（即加载夹具时），则为真。不应查询/修改数据库中的其他记录，因为数据库可能尚未处于一致状态。

所以你的代码应该是这样的：

```
@receiver(post_save, sender=User)
def generate_email(sender, instance, created, raw, **kwargs):
    if not raw:
        # generate email from template 
```

# security - 用密码锁定文本文件

> ID：13540917
> 
> 赞同：-2
> 
> 时间：2012-11-24T11:49:39.347
> 
> 标签：security, cryptography, locking, text-files, file-locking

有什么方法可以保护文本文件。我想保护我的文本文件以使用密码保护。那么，当客户想要打开文本文件时，它怎么可能要求输入密码，并且只有在输入正确的密码后才能在记事本中打开文件。通过使用它可以使我们的文件安全

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:11:48.687

压缩它和密码保护条目 :) 与任何 PC 完全兼容和良好的安全性:) （Zip 使用 AES 来保护它的条目）。

# android - SQLite - 我可以发送带有应用程序的数据库文件吗？

> ID：13540919
> 
> 赞同：0
> 
> 时间：2012-11-24T11:49:51.063
> 
> 标签：android, database, sqlite

很简单的问题，我可以用我的应用程序发送一个已经创建的数据库（例如一个文件）吗？还是我必须在我的应用程序中创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:52:33.407

是的，你可以两者都做。在第一次启动时创建或从资产中复制预配置的数据库。

对于后一种选项（如果您需要预先填充数据库，这基本上会更快），您可以使用[Android SQLiteAssetHelper](https://github.com/jgilfelt/android-sqlite-asset-helper)来完成所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:52:47.837

您可以将其放入`assets/`文件夹并在第一次运行时复制到 SQLite 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:53:18.043

一些应用程序在 assets 文件夹中包含一个 SQLite 数据库，并在应用程序启动时复制它。

# cuda - CUDA5.0 示例 AdvancedQuickSort

> ID：13540922
> 
> 赞同：2
> 
> 时间：2012-11-24T11:50:10.110
> 
> 标签：cuda

我现在正在阅读 CUDA 5.0 示例（AdvancedQuickSort）。但是，由于以下代码，我无法完全理解此示例：

```
// Now compute my own personal offset within this. I need to know how many
// threads with a lane ID less than mine are going to write to the same buffer
// as me. We can use popc to implement a single-operation warp scan in this case.
unsigned lane_mask_lt;
asm( "mov.u32 %0, %%lanemask_lt;" : "=r"(lane_mask_lt) );
unsigned int my_mask = greater ? gt_mask : lt_mask;
unsigned int my_offset = __popc(my_mask & lane_mask_lt); 
```

它在`__global__ void qsort_warp`函数中，特别是对于代码中的这种汇编语言。谁能帮我解释一下这种汇编语言的含义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T12:10:02.257

`%lanemask_lt`是 PTX 程序集中的一个特殊的只读寄存器，它使用 32 位掩码进行初始化，位设置的位置小于线程中线程的通道号。您发布的内联 PTX 只是读取该寄存器的值并将其存储在一个变量中，该变量可以在您发布的后续 C++ 代码中使用。

每个版本的 CUDA 工具包都附带 PTX 汇编语言参考指南，您可以使用它来查找此类内容。

# java - 如何从代理类中检索代理类？

> ID：13540923
> 
> 赞同：7
> 
> 时间：2012-11-24T11:50:16.060
> 
> 标签：java, hibernate

我将 Hibernate 与代理一起使用，并且我得到属于类的对象，例如`test.DBUser$$EnhancerByCGLIB$$40e99a2d`.

是否有 Hibernate 方法`test.DBUser`从代理*类*中检索基类（在这种情况下） ？我知道`Hibernate.getClass()`，但它需要一个`Object`, 而我正在寻找一种将 . 作为输入的方法`Class`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-21T17:44:04.467

虽然我真的很喜欢 Flavio 发布的方法的简单性，但我不能在生产代码中使用它，除非它被记录为受支持。此外，如果您在 LazyInitializer 上调用 .getImplementation()，它将强制代理初始化（如果尚未初始化），这会对性能产生负面影响。我想出了解决这两个问题的方法：

```
public static Class<?> getClassForHibernateObject(Object object) {
  if (object instanceof HibernateProxy) {
    LazyInitializer lazyInitializer =
        ((HibernateProxy) object).getHibernateLazyInitializer();
    return lazyInitializer.getPersistentClass();
  } else {
    return object.getClass();
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T14:30:12.523

我发现，这比我想象的要容易：只需调用`getSuperclass()`代理类来获取未代理的原始类。我不确定这是多么普遍，但它似乎有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T10:05:50.770

没有这样的方法。您需要自己编写一个帮助类，以便从代理内部检索包装的对象以及类信息。如果您只需要给定场景中的对象，请尝试删除所有延迟加载。然后 Hibernate 应该给你普通的对象。

考虑尝试不需要该对象。也许您可以重新设计应用程序以使其不再需要它，例如通过在运行时添加包含所需信息的字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T13:23:02.637

像这样的类`test.DBUser$$EnhancerByCGLIB$$40e99a2d`是[动态代理](http://docs.oracle.com/javase/1.4.2/docs/guide/reflection/proxy.html)。在大多数情况下，“真正的阶级背后”的概念没有多大意义。每次创建代理时，它都可以是 Hibernate 定义的任何类的实例。

你**真正**要求的是静态`Map`的`{ Class<Proxy>, Class<RealObject>}`。我不相信有这样的事情，也不相信有必要这样做。只看来源`Hibernate.getClass()`：

```
339     public static Class getClass(Object proxy) {
340     if ( proxy instanceof HibernateProxy ) {
341         return ( ( HibernateProxy ) proxy ).getHibernateLazyInitializer()
342                 .getImplementation()
343                 .getClass();
344     }
345     else {
346         return proxy.getClass();
347     }
348 } 
```

进行静态映射查找以获取真实类会便宜得多，但是 Hibernate 一直使用惰性初始化器来获取实现类。

# c# - 通过 DataGridViewRowCollection 或 DataGridViewSelectedRowCollection 循环

> ID：13540926
> 
> 赞同：8
> 
> 时间：2012-11-24T11:50:26.760
> 
> 标签：c#, winforms, datagridview

我想循环通过 DataGridViewRowCollection 或 DataGridViewSelectedRowCollection（用户选择）。我不知道如何以简单的方式做到这一点。这是我的代码：

```
List<DataGridViewRow> rows = new List<DataGridViewRow>();

if (dr == DialogResult.No)
    foreach (DataGridViewRow row in dgvResult.Rows)
        rows.Add(row);
else if (dr == DialogResult.Yes)
    foreach (DataGridViewRow row in dgvResult.SelectedRows)
        rows.Add(row);

int counter = 1;

foreach (DataGridViewRow row in rows)
{
    //...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T11:53:35.150

您可能需要[**Enumerable.Cast**](http://msdn.microsoft.com/en-us/library/bb341406.aspx)方法。

```
 List<DataGridViewRow> lst = dataGridView1.Rows.Cast<DataGridViewRow>().ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T12:21:30.850

```
DataGridViewSelectedRowCollection rows = MyDataGridView.SelectedRows;               
foreach (DataGridViewRow row in rows)
{
  DataRow myRow = (row.DataBoundItem as DataRowView).Row;
  // do something with your DataRow
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-30T13:06:58.410

您可以创建一个简单的数组并使用两个集合的 CopyTo 方法...

```
DataGridViewRow[] data;
if (<your condition here>) {
  data=new DataGridViewRow[dvgResult.Rows.Count];
  dvgResult.Rows.CopyTo(data,0);
} else {
  data=new DataGridViewRow[dvgResult.SelectedRows.Count];
  dvgResult.SelectedRows.CopyTo(data,0);
}
//Do whatever you want with 'data', it's a simple array now. 
```

当然它们都是 System.Windows.Forms.BaseCollection，你也可以使用 BaseCollection 的方法......

```
BaseCollection data=<your condition>?dvgResults.Rows:dvgResults.SelectedRows;
//Just enumerate through BaseCollection.. 
```

# iframe - Sakai 连接器浏览器问题，同时从 liferay 添加工具

> ID：13540929
> 
> 赞同：0
> 
> 时间：2012-11-24T11:50:54.217
> 
> 标签：iframe, liferay-6, sakai

我正在使用 sakai-connector-portlet 1.1（用于 sakai 2.7.1）和 Liferay 6.0.6。我正在尝试为 Sakai 站点添加工具。我可以在 Firefox 浏览器中添加工具。但是当我尝试使用 Chrome 添加时，它正在从 Liferay 导航到 sakai。

单击编辑工具后，我选择了新工具，然后单击继续按钮，我有三个按钮完成，返回取消。当我单击完成时，它正在从 liferay 导航到 Sakai。但是 Back,Cancel 工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:03:38.837

我编写了 Sakai 连接器 portlet。您配置了哪些允许的工具？

Portlet 旨在公开 Sakai 的各个工具并在门户中显示它们（最初是为 uPortal 编写的，但也适用于 Liferay）——因此 Wiki、论坛、资源、Profile 之类的东西都可以很好地工作，因为它们是独立的工具。

您可能不想将 sakai.sitesetup 工具添加到允许的工具列表中，因为这是一个 Sakai 工具，并且允许您将其他工具添加到 Sakai 站点。一旦您单击 Finish，它就会执行刷新，这听起来像是将您带到 portlet 内的主要 Sakai 页面。

# javascript - 我如何通过在所有浏览器甚至 ie6 中运行的 javascript 制作占位符

> ID：13540931
> 
> 赞同：1
> 
> 时间：2012-11-24T11:50:56.900
> 
> 标签：javascript, placeholder

我已经为输入“值属性”制作了占位符，但值属性用于其他目的，所以我怎样才能为其他属性制作占位符或任何其他自制..

我的值属性代码适用于所有浏览器..所以有人建议我如何为占位符或任何其他输入属性制作这样的东西。

```
/*For placeholder*/ 
function ClearPlaceHolder(input) {      
    //var plc = document.getElementById(input.id).value;
    if (input.value == input.defaultValue){
        input.value = "";
        document.getElementById(input.id).style.color = '#444444';
    }
}

function SetPlaceHolder (input) {
   if (input.value == "") {
        input.value = input.defaultValue;
        document.getElementById(input.id).style.color = '#c9c9c9';              
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:35:24.067

您可以使用函数来绑定事件，而不是使用事件属性来调用现有函数。然后您可以简单地将默认值发送到函数中：

```
function initPlaceHolder(input, defaultValue) {
  input.onfocus = function() {
    if (input.value == defaultValue){
      input.value = "";
      input.style.color = '#444444';
    }
  };
  function remove() {
    if (input.value == "") {
      input.value = defaultValue;
      input.style.color = '#c9c9c9';              
    }
  }
  input.onblur = remove;
  remove();
} 
```

用法：

```
<input type="text" id="me" />

<script type="text/javascript">
initPlaceHolder(document.getElementById("me"), "Enter name");
</script> 
```

演示：http: [//jsfiddle.net/Guffa/RFm5e/](http://jsfiddle.net/Guffa/RFm5e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:37:00.963

我想这可以让你开始。

```
Qty1 : <input type="text" placeholder="numbera" name="qty" id="qty"/><br>
Qty2 : <input type="text" placeholder="numberb" name="qty" id="qty2"/><br>

<script type="text/javascript">
    $(document).ready(function(){
        if($.browser.msie){
            var inpElements = $('[placeholder]');
            $(inpElements).each(function(){
                $(this).css('color','#aaaaaa').val($(this).attr('placeholder'));
            });
            $('[placeholder]').one('focus', function(){
                $(this).val('');
            });
        }
    }); 
</script> 
```

# matlab - 执行逐步积分

> ID：13540932
> 
> 赞同：2
> 
> 时间：2012-11-24T11:51:00.130
> 
> 标签：matlab, loops, integral

我有这段代码：

```
time = 614.4;
Uhub = 11;
HubHt = 90;
TI = 'A';
N1 = 4096;
N2 = 32;
N3 = 32;

L1 = Uhub*time;
L2 = 150;
L3 = 220;

V = L1*L2*L3;

gamma = 3.9;
c = 1.476;
b = 5.6;

if HubHt < 60
    lambda1 = 0.7*HubHt;
else
    lambda1 = 42;
end
L = 0.8*lambda1;

if isequal(TI,'A')
    Iref = 0.16;
    sigma1 = Iref*(0.75*Uhub + b);
elseif isequal(TI,'B')
    Iref = 0.14;
    sigma1 = Iref*(0.75*Uhub + b);
elseif isequal(TI,'C')
    Iref = 0.12;
    sigma1 = Iref*(0.75*Uhub + b);
else
    sigma1 = str2num(TI)*Uhub/100;
end

sigma_iso = 0.55*sigma1;

%% Wave number vectors
ik1 = cat(2,(-N1/2:-1/2),(1/2:N1/2));
ik2 = -N2/2:N2/2-1;
ik3 = -N3/2:N3/2-1;

[x y z] = ndgrid(ik1,ik2,ik3);

k1 = reshape((2*pi*L/L1)*x,N1*N2*N3,1);
k2 = reshape((2*pi*L/L2)*y,N1*N2*N3,1);
k3 = reshape((2*pi*L/L3)*z,N1*N2*N3,1);

k = sqrt(k1.^2 + k2.^2 + k3.^2); 
```

现在我应该计算

![在此处输入图像描述](../Images/7a5c9ccb3854f46f543e87220b3d5cbb.png)

在哪里

![在此处输入图像描述](../Images/9584ffd2f351ce24926dbdb30ea7ebe1.png)

计算积分的过程是

![在此处输入图像描述](../Images/2473888c297f55f3a401444808bf1273.png)

目前我正在使用这个循环

```
E = @(k) (1.453*k.^4)./((1 + k.^2).^(17/6));

E_int = zeros(1,N1*N2*N3);
E_int(1) = 1.5;
for i = 2:(N1*N2*N3) 
    E_int(i) = E_int(i) + quad(E,i-1,i);
end 
```

忽略 k>400 的近似值。我相信我的循环不对。

您建议如何计算积分？

我提前谢谢你。

WKR，弗朗切斯科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:09:21.850

这是一个从更明显到可能更微妙的更正列表。（事实上​​，我从你在最后一部分写的向上开始）。

从你写的：

```
 E = @(k) (1.453*k.^4)./((1 + k.^2).^(17/6));

 E_int = zeros(1,N1*N2*N3);
 E_int(1) = 1.5;
 for i = 2:(N1*N2*N3) 
    %//No point in doing this:
    %//E_int(i) = E_int(i) + quad(E,i-1,i); 
    %//According to what you write, it should be:
    E_int(i) = E_int(i-1) + quad(E,i-1,i);     
 end 
```

你可以通过做加速整个事情

```
%//Independent integration on segments 
Local_int = arrayfun(@(i)quad(E,i-1,i), 2:(N1*N2*N3)); 
Local_int = [1.5  Local_int];
%//integral additivity
E_int = cumsum(Local_int); 
```

* * *

**此外**，如果已知条件（*第 2 点*）确实是“ `... ( = 1.5 if k' = 0)`”，**那么整个实现应该更像是**

```
%//Independent integration on segments 
Local_int = arrayfun(@(i)quad(E,i-1,i), 2:(N1*N2*N3));      
%//integral additivity + cumulative removal of queues
E_int = 1.5 - [0 fliplr(cumsum(fliplr(Local_int)))]; %//To remove queues 
```

# orchardcms - Orchard 中分层 URL 的推荐方法是什么？

> ID：13540933
> 
> 赞同：3
> 
> 时间：2012-11-24T11:51:06.277
> 
> 标签：orchardcms

我想在我的网站中有一个分层的 URL 结构。这些线上的东西：

*   教程
    *   javascript
        *   jQuery

每个级别（ 和 ）都应该有`tutorials`一个`tutorials/javascript`页面`tutorials/javascript/jquery`。显然，使用分类法可以帮助我以这种方式组织我的内容，但是我如何获得为这种情况生成的自动路由 URL？

Bertrand Le Roy[对这个关于使用分类术语作为页面的答案](https://stackoverflow.com/questions/9727931/generate-orchard-cms-autoroutes-based-on-hierarchical-menu)发表了评论，但它似乎仍然没有为我创建正确的 URL 结构。我错过了什么吗？我需要配置或启用某些特定的东西来实现这一点吗？

还有其他方法我可以看看吗？

我正在考虑将默认路由指定为 {Content.Fields.Page.TaxonomyName}。[根据这个错误报告](http://orchardtaxonomies.codeplex.com/workitem/69)，现在看来这实际上是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:47:20.367

这是一种似乎无需使用分类法即可工作的方法：

我添加了一个`Content Picker`名为内容类型的字段并将`ParentPage`自动路由默认值更新为`Page``Page`

```
{Content.Fields.Page.ParentPage.Content.Path}/{Content.Slug} 
```

现在在每个页面中，我可以选择父页面是什么，并且 URL 是按照我的预期构建的。根据我对使用 WordPress 的记忆，我认为这与它允许您执行此父页面的方式非常接近。

# java - JNDI 查找 - 它在我的应用程序中是正确的方式吗？

> ID：13540934
> 
> 赞同：0
> 
> 时间：2012-11-24T11:51:09.193
> 
> 标签：java, rest, jakarta-ee, jndi, stateless-session-bean

我正在用 Java 编写一个应用程序，并且那里有一些 REST Web 服务。我的应用程序具有以下结构：[http ://cl.ly/L7Pv/o](http://cl.ly/L7Pv/o)

REST Web 服务类是无状态会话 bean。它就像魅力一样。但是图片上红色的类也想使用该 REST 资源。

据我所知，我不能在那里使用依赖注入和注释@EJB。我相信我必须使用 JNDI 查找。文档：[http ://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html](http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html)

但是现在我不知道如何编写这个 JNDI 查找。我试过这两个：

```
context.lookup("java:global/diplomka/ListResource");
context.lookup("java:global/Diplomka_maven/ListResource"); 
```

我究竟做错了什么？首先，这是一个正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:26:28.237

如果这些类（ListResource 等）是无状态会话 bean，则可以将属性`name`或注释放入，例如`mappedName`：`@Stateless`

```
@Stateless(mappedName="ejb/myRestService")
public class ListResource { .. 
```

一旦指定了无状态 bean 的 JNDI 名称，就很容易通过 JNDI 查找来获取 bean：

```
InitialContext ic = new InitialContext();
ListResource lr = (ListResource) ic.lookup("ejb/myRestService");
lr.doWhateverNeeded(..); 
```

# android-layout - getText 从一个布局和（设置它） setText 在另一个布局

> ID：13540935
> 
> 赞同：0
> 
> 时间：2012-11-24T11:51:17.883
> 
> 标签：android-layout, gettext, settext

我用主布局从 mainAcitivity 调用此方法 SolveUpdation（来自 button-onclickAction 侦听器）。我使用其他布局从用户那里获取价值并将其设置为主布局中的按钮标题，这只是对我不起作用的指令

```
 private void  SolveUpdation() {     //this function call is generated from the main Activity with main layout       
        setContentView(R.layout.updateappliance); //this is 2nd layout to get values from user and use them as buttonText in the main layout   

        btnSaveApp = (Button) findViewById(R.id.Bupdatenow);
        btnSaveApp.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {       
                // TODO Auto-generated method stub
                  mOutEditText = (EditText) findViewById(R.id.edit_text_1);               
                  TextView view1 = (TextView) findViewById(R.id.edit_text_1);
                  final String TitleApp1 = view1.getText().toString();  //the value is read properly here

//                if (App1.length() > 0) {
//                    byte[] send = App1.getBytes();
//                }

                btnSaveApp.setText(TitleApp1); //this works fine
                startActivity(new Intent(HomeScreen.this, HomeScreen.class));//this the main activity for main layout
                setContentView(R.layout.main); //this is the main layout and this instruction works
                buttonLED1.setText(TitleApp1); //buttonLED1 (a Togglebutton or can be simple) is  defined in main layout and this does not works and this is what i am stuck with
                SaveAppNamesToast(TitleApp1);   //this is just to toast the value and it works fine.
            }}); 
```

所以请谁能指导我为什么这个指令 buttonLED1.setText(TitleApp1); 不工作？？？任何帮助将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:32:57.133

无意冒犯，但你编写代码的方式并不是一个好习惯。`setContentView`我的建议：停止在您的主要活动中调用另一个。您应该在一个布局中实现所有需要的按钮和 EditText，并将它们的可见性设置为`gone`或`visible`取决于单击的按钮。

如果你不想这样做，你应该创建第二个类来处理用户的输入。按下保存按钮后，您初始化主活动的意图并通过`intent.putExtra("KEY", value)`用户的输入给出它。您的 Main Activity 可以通过 接收此值`getIntent().getExtras().getInt("KEY")`。

顺便说一句：我认为您当前的代码无法正常工作，因为您启动了新的 Activity。通过这个，一切都被再次初始化，所以`buttonLED1`你看到的`buttonLED1`和得到文本的不一样。

# php - 基于可旋转的可拖动表面生成图像位置

> ID：13540941
> 
> 赞同：2
> 
> 时间：2012-11-24T11:51:50.177
> 
> 标签：php, image, image-processing, gd, image-resizing

使用`div`具有静态尺寸的框时，我加载了尺寸大于或小于 的图像，`div`因此我可以在其中旋转、更改大小和移动图像`div`。

我通过 css 3 来实现旋转功能，jquery ui 来实现移动功能。

在与图像交互时，我想生成具有新位置、角度和大小的图像。因此，我将图像的位置、旋转角度和新尺寸发送到服务器。在服务器上，我生成了一个宽度和高度为`div`. 问题是当我有一个更大的图像并且我改变他的位置时，我无法在服务器上生成相同的图像。

这是我生成具有`div`盒子大小和宽度（670/465）的新图像的算法：

```
$imgFace = WideImage::load($src);
$newImage = $imgFace->resize($width, $height)->rotate($angle); // resize the image and rotate to $angle
$rotW = $newImage->getWidth();
$rotH = $newImage->getHeight();
$dx = $rotW - $width;
$dy = $rotH - $height;   
if($width < 670 && $height < 465) // if the image is smaller than the div box
{
   $newImage->copyTo($img, $left, $top); // left and top are values from css after I move the image
} else { // if is larger
   $crop_x = $dx/2 + $left;
   $crop_y = $dy/2 + $top;
   $newImageCroped = $newImage->crop($crop_x, $crop_y,670,465);
   $newImageCroped->copyTo($img, $leftB, $topB);
} 
```

简而言之，我在以下场景中遇到了问题：

*   当图像高于`div`框并且我移动它时（只有一部分在 中`div`）
*   当图像被旋转并且他只有其中的一部分时`div`。

# cmake - 在 QTCreator CMake 项目的项目窗格中包含 GLSL 文件

> ID：13540944
> 
> 赞同：2
> 
> 时间：2012-11-24T11:52:02.033
> 
> 标签：cmake, glsl, qt-creator

我正在阅读此处的 OpenGL 教程：[OpenGL-Tutorial.org](http://www.opengl-tutorial.org/)，并希望使用 QTCreator 和 CMake 来构建示例。

打开根`CMakeLists.txt`文件会打开项目，然后项目会正确构建/运行（按照网站上的说明进行操作），但片段和顶点文件不会显示在项目窗格中。我尝试将它们重命名为`.frag`，`.vert`但`.glsl`没有任何效果。如果我从文件夹中拖动这些文件，它们会在编辑窗格中以正确的语法突出显示打开。

如何让这些文件显示在项目窗格中？

* * *

我在 Ubuntu 20.04 上并尝试了来自软件包的 QTCreator 和 sourceforge 上的最新源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T07:40:26.123

```
file(GLOB RES_FILES *.frag *.vert *.glsl)

add_executable(exe_name ${RES_FILES} ${C/CPP FILES}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T18:00:11.000

使用 Cmake 在 Qt 项目中包含着色器文件的另一种方法是通过 CMake 命令`qt5_add_resources`。[Qt 的其中一个示例](http://doc.qt.io/qt-5/qtopengl-cube-example.html)在使用 qmake 时也是如此。对于我的应用程序，我发现将着色器文件作为资源包含在内更为实用。

因此，为此，您必须准备一个资源文件，例如 ，`Shaders.qrc`并在其中添加您要使用的所有着色器文件，例如：

```
<RCC>
    <qresource prefix="/">
        <file>Stroke.frag</file>
        <file>Stroke.geom</file>
        <file>Stroke.vert</file>
    </qresource>
</RCC> 
```

然后在 中`CMakeLists.txt`，添加资源文件：

```
qt5_add_resources(SHADER_RSC_ADDED 
    Shaders/Shaders.qrc
) 
```

并将其添加到可执行文件（或库）中：

```
add_executable(${PROJECT_NAME}
    ${PROJECT_SRCS}
    ${SHADER_RSC_ADDED}
) 
```

重新构建后，项目树将如下所示：

[![将着色器添加为 qrc 文件](../Images/a060d038a087268afdc7f65d34d4a481.png)](https://i.stack.imgur.com/PC5jG.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T10:37:14.967

您可以将着色器文件添加为文件中的其他`.pro` 文件。

```
OTHER_FILES += \
    simple.frag \
    simple.vert 
```

此外，您应该考虑对着色器文件使用 QT 资源管理。我最近在 Qt 中创建了一个简单的 OpenGL 3.2 示例项目，其中还展示了如何使用 Qt 对着色器文件进行资源管理。该项目可在此处获得：[https ://github.com/mortennobel/QtOpenGL3.2Core](https://github.com/mortennobel/QtOpenGL3.2Core)

警告：该项目仅在 Windows 和 OS/X 上进行测试。

# windows-phone-8 - Windows Phone 8 应用程序开发路线图

> ID：13540945
> 
> 赞同：0
> 
> 时间：2012-11-24T11:52:02.673
> 
> 标签：windows-phone-8

不确定它是否是主题，但我们是否有类似的东西[来](http://msdn.microsoft.com/en-us/library/windows/apps/br229583)开发 Windows Phone 8 应用程序？或者至少，这些技能能转化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:49:55.573

Here is a centralized link where you can get "Roadmap" kind of details for [Windows Phone Development](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402535%28v=vs.105%29.aspx).

And then this here is another important link [What's new in Windows Phone SDK 8.0](http://msdn.microsoft.com/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx)

Followed by:

[How to create your first app for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402526%28v=vs.105%29.aspx)

[Next steps for Windows Phone 8 development](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206937%28v=vs.105%29.aspx)

Finally you asked whether these(i guess Windows 8) skills translate .. Yes, ofcourse!!

[Cross Platform Development : Windows 8 and Windows Phone 8 : C# + XAML](http://blogs.msdn.com/b/amitdey/archive/2012/11/06/cross-platform-development-windows-8-and-windows-phone-8-c-xaml.aspx)

Good luck :)

# javascript - es5-shim 和 underscore.js？

> ID：13540951
> 
> 赞同：4
> 
> 时间：2012-11-24T11:53:01.740
> 
> 标签：javascript, underscore.js, ecmascript-5, es5-shim

我的 JavaScript 项目中有[es5-shim.js](https://github.com/kriskowal/es5-shim/blob/master/es5-shim.js)和[underscore.js](http://underscorejs.org/)。

es5-shim.js 只是在 Internet Explorer 和一些旧浏览器的数组上添加了一些 JavaScript 原生函数，例如`reduce`和。`some`underscore.js 添加了相同的东西（但语法不同）和更多的东西（对象和数组上的实用程序函数）。

但是，如果 es5-shim 添加的函数存在，underscore.js 会使用它们。

因此，在 Firefox 或 Chrome 等“最新”浏览器上，underscore.js 使用浏览器的本机功能。我认为它比纯 javascript 函数更好。但是在 Internet Explorer 上，underscore.js 使用 es5-shim 函数。如果我删除 es5-shim.js，underscore.js 会使用它自己的函数。

对此有何建议？我应该从我的项目中删除 es5-shim 并且只使用 underscore.js 吗？还是应该让 underscore.js 使用 es5-shim 的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T17:18:50.007

我不同意[@ganeshi 的回答](https://stackoverflow.com/a/13550364/30433)。

**如果你对 Underscore 的主要用途是 ES5 已经自带的东西，比如 reduce() 和 some()，那么我建议你删除 underscore.js。**

如果您现在编写 ES5 方法，当您不再支持 IE8 或 Firefox 3 时，您可以简单地删除 ES5-shim。

如果您现在使用下划线，那么当您不再支持 IE8 或 Firefox 3 时，您仍然会携带大多数浏览器已经提供的大量内容的额外副本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T10:56:00.423

es5-shim，正如您正确提到的，如果浏览器的 JavaScript 引擎不兼容 ES5，则在 Array 上添加一些 JavaScript 函数，如 map、reduce、some 和 forEach。Underscore.js 在“_”命名空间中添加了类似于上述（以及更多）的实用方法。因此，在这种情况下，在同一个应用程序中同时使用两者是多余的。

也就是说，es5-shim 添加了更多函数，如 Date.now、Date.toJSON、Function.bind、String.trim （以及更多），其中一些在 Underscore.js 中没有直接等效项。例如 Underscore 确实提供了等效于 Function.bind 的 _.bind 和 _.bindAll，但 Underscore.js 不提供 Date.now 和 Date.toJSON。

因此，如果您使用 es5-shim 提供的这些附加方法，您可以在应用程序中同时使用 es5-shim 和 Underscore.js。但是，如果您不使用这些额外的方法，那么使用 es5-shim 只会不必要地增加应用程序大小并浪费带宽。

# r - 带有 RMarkdown 的 ggplot2 图形大小

> ID：13540955
> 
> 赞同：8
> 
> 时间：2012-11-24T11:53:20.710
> 
> 标签：r, ggplot2, markdown, r-markdown

我在 RStudio 中将 R 脚本 (.R) 转换为`RMarkdown`文件 (.rmd)，然后按“knit html”会生成两个输出文件（即 .html 和 .md 文件）。我面临2个问题：

该`html`文件显示`ggplot`图表的标题被切掉了。我已将原来的宽度 11 更改为新的宽度 15：

```
ggsave(file=outFile, width=15, height=7) 
```

*我将如何解决这个问题？以及如何将 .md 文件转换为 PDF 文件？*

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-24T12:44:42.927

Your question is not exactly clear. I'm not sure, for example, why you are using `ggsave()` to begin with. You can directly create a "ggplot" image in your file to `knit` and set your figure width and height in your input file.

In a ".Rmd" file, your code might look something like:

```
```{r fig.width=7, fig.height=4, echo=FALSE}
library(ggplot2)
qplot(mpg, wt, data=mtcars)
``` 
```

The `echo=FALSE` will make it so that the code doesn't display, but the resulting plot will. The figure width and height have been set with the relevant arguments.

If you wanted to convert your resulting markdown file to PDF, I would recommend looking at [Pandoc](http://johnmacfarlane.net/pandoc/index.html) which will allow you to do something like the following to convert your file to a PDF:

```
pandoc infile.md -o outfile.pdf 
```

Alternatively, you can use R Sweave instead of R Markdown in R/RStudio. For instance, if you create a new "Rnw" file in RStudio and paste the following in, you'll have the option to directly compile a PDF instead of compile an HTML.

```
\documentclass{article}

\begin{document}

<<fig.width=5, fig.height=3, echo=FALSE>>=
library(ggplot2)
qplot(mpg, wt, data=mtcars)
@

\end{document} 
```

# audio - 将多个立体声 MP3 文件转换为其单声道 WAV 等效文件？

> ID：13540956
> 
> 赞同：-1
> 
> 时间：2012-11-24T11:53:20.550
> 
> 标签：audio, mp3, converter, wav

我的问题与上面提到的完全一样。我有一组文件名 1.mp3、2.mp3 等，我必须将其转换为单声道 .wav 文件。我知道如何大胆地做到这一点。但是有没有更快的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:19:06.390

这取决于您使用的平台（即 Windows、OSX、Linux）。

假设 Windows，你可以使用这个： http: [//www.softpedia.com/get/Multimedia/Audio/Audio-Convertors/Free-WAV-MP3-Converter.shtml](http://www.softpedia.com/get/Multimedia/Audio/Audio-Convertors/Free-WAV-MP3-Converter.shtml)

不要安装任何额外的东西。预先警告 - 从 MP3 转换为 WAV 正在从有损压缩转换为无损压缩，并且听起来不会那么好。

在线您可以通过以下方式一一进行： [http ://www.zamzar.com/](http://www.zamzar.com/)

或一百万个其他在线文件转换站点中的任何一个。这必然和使用大胆一样慢。

# linux - 如何为受控实验分析算法设置计算机？

> ID：13540963
> 
> 赞同：2
> 
> 时间：2012-11-24T11:54:04.653
> 
> 标签：linux, performance, profiling

我们致力于根据经验测量某些算法的运行时间（以检查它们的渐近行为）。我试图想出一套规则来在实验之前“清理”我们的目标计算机。这不是[Agner Fog](http://www.agner.org/)级别的真正性能，但我仍然想从尽可能干净的机器开始（并尽可能保持其恒定开销）。我到目前为止：

*   禁用所有电源管理
*   禁用屏幕服务器（也许完全禁用 X？）
*   禁用网络
*   以单用户模式启动 [Kenneth Hoste]
*   多次运行实验（以消除偶然事件）
*   频率缩放配置为以最大频率运行 [binarym]
*   ?

显然，重复实验几次会给我一些统计能力，但我仍然想在尽可能干净的机器上做这个。

人们还知道哪些其他技巧可以在程序分析期间保持机器不变？这是一台 Linux 机器，如果“规则”是特定于 Linux 的，则可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:45:00.307

拉出网线，这样您的系统就不会在经过的网络流量上花费时间。

在单用户模式下运行也有帮助，因为运行的服务更少，这可能会中断您的测量。

在实验运行时远离系统，您所做的任何事情（登录、ssh 进入机器、“cat”文件、运行“ls”等）都会影响测量结果。

但是，要意识到没有稳定的测量，唯一可以确定的方法是多次运行实验，并使用适当的统计方法来报告性能。当您要比较实验之间的性能时，这一点变得尤为重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:29:12.760

我不知道这是否是您提到的“电源管理”主题的一部分，但有些 CPU 实现了频率缩放。确保将其配置为以其最大频率运行。

```
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu0/cpufreq# ls
affected_cpus  cpuinfo_cur_freq  cpuinfo_transition_latency     scaling_available_governors  scaling_governor  scaling_setspeed
bios_limit     cpuinfo_max_freq  related_cpus                   scaling_cur_freq             scaling_max_freq  stats
cpb            cpuinfo_min_freq  scaling_available_frequencies  scaling_driver               scaling_min_freq
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu0/cpufreq# cat scaling_cur_freq 
800000
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu0/cpufreq# cat scaling_governor 
ondemand
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu0/cpufreq# cat scaling_available_governors 
conservative ondemand userspace powersave performance 
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu0/cpufreq# echo performance > scaling_governor 
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu0/cpufreq# cat scaling_governor scaling_cur_freq 
performance
1600000
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu0/cpufreq# cd ../../cpu1/cpufreq
root@chupa-ThinkPad-Edge:/sys/devices/system/cpu/cpu1/cpufreq# cat scaling_governor scaling_cur_freq 
performance
1600000 
```

# jakarta-ee - CriteriaAPI 获取集合大小

> ID：13540964
> 
> 赞同：0
> 
> 时间：2012-11-24T11:54:29.997
> 
> 标签：jakarta-ee, jpa, criteria-api

我有两个实体：第一人（表人）；

```
@Entity
public class Person implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id", nullable = false)
    private Integer id;
    @Column(name = "name", nullable = false, length = 2147483647)
    private String name;
    @Column(name = "first_name", nullable = false, length = 2147483647)
    private String firstName;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "peopleId")
    private List<PeopleEmail> peopleEmailList;

    //... constuctors
    //... getters setters
} 
```

和类 PeopleEmail

```
@Entity
public class PeopleEmail implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id", nullable = false)
    private Integer id;
    @NotNull
    @Column(name = "email", nullable = false, length = 2147483647)
    private String email;
    @JoinColumn(name = "people_id", referencedColumnName = "id", nullable = false)
    @ManyToOne(optional = false)
    private Person peopleId;

    //... constuctors
    //... getters setters
} 
```

如您所见，两个实体都处于一对多关系中。我想创建另一个类：

```
public class PersonAndCompany{
   private String personName;
   private String companyName;
   private int emailCount;

    //... constuctors
    //... getters setters
} 
```

我想编写 typequery 来填充 PersonAndCompany.class 字段，其中包含人名和 companyName（另一个类）和电子邮件计数，其中人员电子邮件计数超过 2。我想使用标准 api。我写了一些代码，但我不知道如何在 PersonAndCompany.class 中添加条件并填写 emailcount。

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<PersonAndCompany> cq = cb.createQuery(PersonAndCompany.class);
Root<Person> person = cq.from(Person.class);
Join<Person, Company> company = person.join(Person_.companyId);
cq.where(cb.greaterThan(cb.size(person.get(Person_.peopleEmailList)), 2));

Selection<PersonAndCompany> select = cb.construct(PersonAndCompany.class,
                        person.get(Person_.firstName),
                        company.get(Company_.name));
cq.select(select);
TypedQuery<PersonAndCompany> query = em.createQuery(cq);
return query.getResultList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:23:04.543

我认为可以在某些 JPA 提供和某些数据库的 select 子句中包含一个子查询。

```
Select p.firstName, c.name, (select count(e) from Email e where e.person = p) from Peron p join p.company c where size(p.emails) > 2 
```

否则，您将需要使用计数和某种分组依据。然后可以将您在 where 子句中的大小检查移到 have 子句中。

在 JPQL 中，它类似于，Criteria 将是等价的，

```
Select p.id, p.firstName, c.name, count(e) from Peron p join p.company c join p.peopleEmaiList e group by p.id, p.firstName, c.name having count(e) > 2 
```

您也可以随时读取对象，然后在 Java 中获取集合的 size() 。您可以对电子邮件和公司使用连接或批量提取来避免 n+1 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T13:15:28.163

当我想将派生值或计算值 ion 转换为不同的结构时，我对 TupleQueries 有更多的运气，如下所示：

```
CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
CriteriaQuery<Tuple> cq = cb.createTupleQuery(); 
// add cq.from and joins 
// add cq.where predicates 
cq.select( cb.tuple(   
  person.get(Person_.firstName).alias("person"),  
  company.get(Company_.name).alias("company"),  
  // and maybe ...
  cb.size(person.get(Person_.peopleEmailList)).alias("emailcount") );
// ...
...
TypedQuery<Tuple> typedQuery = getEntityManager().createQuery(cq);
for(Tuple t : typedQuery.getResultList()) {
  PersonAndCompany ret = new PersonAndCompany();
  ret.setPersonName( t.get("person", String.class) );
  ret.setCompanyName( t.get("company", String.class) );
  ret.setEmailCount( t.get("emailcount", Integer.class) );
}
return ret; 
```

希望有帮助。祝你好运 ;）

# android - 安卓游戏的精灵和动画制作工具

> ID：13540968
> 
> 赞同：16
> 
> 时间：2012-11-24T11:54:49.697
> 
> 标签：android, graphics, 2d

我是 Android 游戏开发的新手。我想知道如何创建我心目中的游戏角色并为其制作动画。有没有工具可以帮助我开始绘图，或者我必须逐帧绘制。

我的目标是简单的 2D 游戏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T15:21:52.950

你需要的是一个精灵表。同一位图上的一系列图像以网格形式排列。例如，您将有 8 个相同角色的不同精灵，1 个静止不动，1 个左脚向前，1 个右脚向前并跳跃并再次面向相反方向。

当您绘制精灵时，设置要绘制的坐标，按下按钮会更改控制坐标的变量。

一个很好的教程在这里[http://warriormill.com/2009/10/adroid-game-development-part-1-gameloop-sprites/](http://warriormill.com/2009/10/adroid-game-development-part-1-gameloop-sprites/)

可以在这里找到一个精灵表制造商[http://www.codeandweb.com/sprite-sheet-maker](http://www.codeandweb.com/sprite-sheet-maker)

希望这可以帮助！

# css - bootstrap-affix : 将“跳转”到顶部的 Div 下面的词缀。如何让它平滑地向后滚动？

> ID：13540969
> 
> 赞同：6
> 
> 时间：2012-11-24T11:54:48.943
> 
> 标签：css, twitter-bootstrap

玩了几天 boostrap 并对它所提供的功能感到惊讶。

一直在尝试使用某种“标题”，当用户向下滚动时，它会固定在顶部。

你可以在这里找到我目前的工作：http: [//mp3dj.free.fr/affix/site/](http://mp3dj.free.fr/affix/site/)

但是您会注意到，当向下滚动时，“POST 1”会突然跳到页面顶部。即没有像这里这样的平滑滚动：http: [//jsfiddle.net/namuol/Uaa3U/](http://jsfiddle.net/namuol/Uaa3U/)

当前代码：

```
<div class="container">
  <div class="row affix-top" data-spy="affix" data-offset-top="60">
    <div class="span12">
      <div class="row">
        <div class="span3">
          <img src="http://www.socialfork.net/public/images/default-profile-photo-female.jpg" class="img-polaroid">
        </div>
      <div class="span9"><h1>Samantha Sam</h1></div>
    </div>
  </div>
</div>
  <div class="row">
    <div class="span12">
      <div id="post1" class="box">
        <h1>Post 1</h1>
        <p> Scroll Down↓&lt;/p>
      </div>
      <div id="post2" class="box"><h1>Post 2</h1></div>
      <div id="post3" class="box"><h1>Post 3</h1></div>
     </div>
   </div>   
</div> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T23:38:45.550

您的代码中发生的情况是顶部的行将其位置更改为`fixed`当其到顶部的偏移小于 60px 时。结果是它停止消耗下一行上方的任何空间。

在您介绍的 jsfiddle 中有一个 JS 代码您应该理解并且应该对您有所帮助。这个是给你的：

```
$('#nav-wrapper').height($("#nav").height()); 
```

它需要将您的标题放置在另一个（小提琴中`div`称为类）中。`nav-wrapper`上面的 jQuery 代码在页面初始化期间根据行高设置其高度。即使顶行消失（固定），高度也保持不变。

JS代码的另一部分：

```
$('#nav').affix({
    offset: $('#nav').position()
}); 
```

​ 使您不受顶行上方空间大小的影响，但在您的情况下，我认为您不需要它（您可以预测它总是需要 60px）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T15:40:39.583

当您使用 Marcin Skórzewski 的解决方案时，请注意，如果您在导航栏中使用折叠，则会影响下拉菜单。

*   完整导航栏的高度是使用一小段 JS 代码设置的。
*   当您的窗口变小时，导航栏将被替换为 ||| （使用默认引导）
*   当您使用下拉菜单并按 ||| 要显示下拉菜单，它将被放置在下面的内容后面。它不会向下滑动内容。这是因为设置了导航栏的高度。

可能的解决方案1：点击|||时去掉导航栏的高度 并在下拉菜单滑回时再次将其放回。可能的解决方案2：一旦导航栏粘住，就为下一个元素添加一个margin-top

更新： [https](https://stackoverflow.com/a/15177077/1059884) ://stackoverflow.com/a/15177077/1059884 使用 CSS 的出色解决方案

# css - 小部件区域上不需要的填充

> ID：13540972
> 
> 赞同：0
> 
> 时间：2012-11-24T11:55:08.220
> 
> 标签：css, wordpress, sidebar

我在 Wordpress 上制作了一个 3 列小部件区域，但似乎有填充。我已经修改了边距，但是它仍然没有调整小部件区域的大小以适合我的“侧边栏”。

这是我的网站：

www.mammacoil.com

这是我的 CSS

```
#footer-widgets {
display: block;
width:950px;
margin-left:-50px;
background: #000000;
}
#footer-widget1 {
width: 260px;
float: left;
margin: 15px 10px 10px 15px;
padding: 10px;
background-color: #000000;
border: 1px solid #fff;
}
#footer-widget2 {
width: 260px;
float: left;
margin: 15px 10px 10px 15px;
padding: 10px;
background-color: #000000;
border: 1px solid #fff;
}
#footer-widget3 {
width: 260px;
float: left;
margin: 15px 10px 10px 15px;
padding: 10px;
background-color: #000000;
border: 1px solid #fff;
} 
```

***现在已解决***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:57:18.910

您已使用 id`footer-widget1`两次，这[不是有效的 HTML](https://stackoverflow.com/questions/9635558/multiple-identical-ids-in-the-same-html-document)。

我建议将 id 从内部取下`#footer-widget1`并应用不同的样式。

这将解决您的填充问题。

# xcode - clang：错误：没有这样的文件或目录

> ID：13540973
> 
> 赞同：11
> 
> 时间：2012-11-24T11:55:33.903
> 
> 标签：xcode

将 JSONKit 添加到 Xcode 项目并收到此错误：

```
clang: error: no such file or directory: '/Users/snowcrash/Downloads/ILGeoNames-develop/SampleApp/../JSONKit/JSONKit.m' 
clang: error: no input files 
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

但是，JSONKit 文件似乎确实存在。例如

![在此处输入图像描述](../Images/72d2b19fe48904a900de639e52a68de7.png)

我如何找出问题（并解决它！）？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-08-13T10:43:40.080

您需要检查目标项目中的编译资源

你会发现

> JSONKit

是红色的

删除它然后走

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:11:22.173

添加组时必须检查“复制文件”，否则它们会留在原处，移动项目时路径会中断

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T07:38:35.343

我尝试重新添加文件，但没有工作。于是，我在.xcodeproj中找到.pbxproj文件，删除行包含文件名，然后重建，成功！

# entity-framework - 实体框架 TPC 的多重继承

> ID：13540976
> 
> 赞同：4
> 
> 时间：2012-11-24T11:55:51.480
> 
> 标签：entity-framework, inheritance, multiple-inheritance

我尝试使用实体框架以 TPC 样式映射一些类，但出现以下错误：

> 错误：无法按照定义映射类型“A”，因为它映射了使用实体拆分或其他继承形式的类型的继承属性。要么选择不同的继承映射策略以便不映射继承的属性，要么更改层次结构中的所有类型以映射继承的属性并且不使用拆分。

当我使用以下类时会发生此错误：

```
public abstract class BaseEntityTest
public abstract class BaseEntityTest2 : BaseEntityTest
public abstract class BaseEntityTest3 : BaseEntityTest2
public class A: BaseEntityTest3 // this class is the only one with a table in the db 
```

在 OnModelCreating 方法中，我添加了以下代码来获取 TPC 映射

```
modelBuilder.Entity<A>().Map(m =>
{
  m.MapInheritedProperties();
  m.ToTable("A");
}); 
```

当我从结构中排除 BaseEntityTest2（以便 A 仅从 BaseEntityTest 而不是 BaseEntityTest2 继承）时，错误消失了。这是否意味着无法创建此映射，或者我只是错过了什么？

编辑：

类的属性：

```
public abstract class BaseEntityTest
{

    [Key]
    public Guid Id { get; set; }

    public String Info { get; set; }

    [Required]
    public DateTime CreationDate { get; set; }

    [Required]
    public String CreationUser { get; set; }

    [Required]
    public DateTime ModificationDate { get; set; }

    [Required]
    public String ModificationUser { get; set; }

    [ConcurrencyCheck]
    [Required]
    public int LockVersion { get; internal set; }
}

public abstract class BaseEntityTest2 : BaseEntityTest
{
    [Required]
    public string Name { get; set; }

    public string Description { get; set; }

}

public abstract class BaseEntityTest3: BaseEntityTest2 
{

    [Required]
    public DateTime FromDate { get; set; }

    public DateTime ThruDate { get; set; }
}

public class A: BaseEntityTest3{
    public String Test { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T17:14:40.953

EF 4.3.1 和更早版本会出现此错误，但 EF 4.4 和 EF 5.0 不会出现此错误。（EF 4.4 实际上是 EF 5.0，但使用 .NET 4.0 作为目标平台。）

但是：仅当您将抽象类用作模型中的实体时才会发生错误，这意味着

*   你要么`DbSet`在你的上下文类中有他们的 s ，比如

    ```
    public DbSet<BaseEntityTestX> BaseEntityTestXs { get; set; } 
    ```

*   或者你有一些流利的映射`BaseEntityTestX`，一些`modelBuilder.Entity<BaseEntityTestX>()...`东西

*   或者您`BaseEntityTestX`在另一个（具体）实体类型中使用其中一个作为导航属性

你需要这些吗？

`DbSet<BaseEntityTestX>`只有当您真的想查询其中一个抽象实体时，在您的上下文中使用 a 才有意义，例如：

```
List<BaseEntityTest> list = context.BaseEntityTests
    .Where(b => b.Info == "abc").ToList(); 
```

结果当然是从 继承的具体实体的列表`BaseEntityTest`，但它可以是不同类型的混合，例如 some `A`s 和 some `B`s。你需要这样的查询吗？还是您只想查询一些具体对象：

```
List<A> list = context.As
    .Where(b => b.Info == "abc").ToList(); 
```

在后一种情况下，抽象基类不需要 a `DbSet`，也不需要任何继承映射。您只需`DbSet<BaseEntityTestX>`从上下文类中删除 并删除 TPC 映射，您的错误就会消失。

最后一点 - 对另一个实体中的一个抽象实体具有导航属性 - 对 TPC 映射没有意义。它只是不能映射到关系数据库，因为使用 TPC 映射没有抽象实体的表，因此没有目标可以从具有导航属性的具体类的表中引用外键关系。

如果您将 TPC 映射扩展到基类，该错误也会消失：

```
modelBuilder.Entity<BaseEntityTestX>().Map(m =>
{
    m.MapInheritedProperties();
    m.ToTable("BaseEntityTestX");
}); 
```

但它会为那些对我来说似乎没有意义的抽象实体创建表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-25T12:04:50.000

在 EF6.0 中，它发生的时候

> EntityTypeConfiguration'<'YourBaseClass'>'

没有详细说明您的**所有**派生类

```
 this.Map<DerivedClass1>(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("..");
        }); 
```

如果汇编中只有一个派生类没有像这样配置，那么你会得到这个异常

# json - 从 @ResponseBody 创建 JsonObject

> ID：13540977
> 
> 赞同：0
> 
> 时间：2012-11-24T11:56:01.147
> 
> 标签：json, spring, spring-mvc

```
@RequestMapping(value = "/dropDown", method = RequestMethod.GET)
public @ResponseBody
DropDown getList(Map<String, Object> map, HttpServletRequest request,
        HttpServletResponse response) {
    DropDown dropDown = new DropDown();
    List<Map<String, Object>> rows = new ArrayList<Map<String, Object>>();
    List<MapTable2> list = contactService.mapProcess();
    for (MapTable2 table : list) {
        Map<String, Object> dataRow = new HashMap<String, Object>(1);
        dataRow.put("text", table.getProcess());
        dataRow.put("value", table.getId());
        dataRow.put("selected", false);
        dataRow.put("description", table.getProcess());
        dataRow.put("imageSrc", "image.jpg");
        rows.add(dataRow);
    }
    dropDown.setRows(rows);
    return dropDown;
} 
```

我需要创建以下一个

```
var ddData = [
{
    text: "Facebook",
    value: 1,
    selected: false,
    description: "Description with Facebook",
    imageSrc: "http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
},
{
    text: "Twitter",
    value: 2,
    selected: false,
    description: "Description with Twitter",
    imageSrc: "http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png"
}] 
```

我知道我上面的 java 编码的问题，我不知道要像上面那样创建 json 数组。请检查并帮助我纠正它。

MapTable2 有 ProcessId & ProcessName

```
public class MapTable2 {
private int id;
private String process;
public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}
public String getProcess() {
    return process;
}
public void setProcess(String process) {
    this.process = process;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:39:12.140

@theon 是对的。

由于您正在使用`@Responsebody`，您可以让 Spring 为您进行 JSON 转换。创建一个与 JSON 数组中的对象匹配的类：

```
public class SomeObject {
    public String getText() { //... }
    public int getValue() { //... }
    public boolean getSelected { // ... }
    public String getDescription { // ... }
    public String getImageSrc { // ... }
} 
```

填充对象并将其作为列表从控制器返回：

```
@RequestMapping(value = "/dropDown", method = RequestMethod.GET)
@ResponseBody
public List<SomeObject> getList(Map<String, Object> map, HttpServletRequest request, HttpServletResponse response) {
     // Get the objects, return them in a list
} 
```

除非您还没有这样做，否则将`<mvc:annotation-driven />`或[添加到您的应用程序配置中。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-enable)`@EnableWebMvc`确保 Jackson 在您的类路径中可用，然后 Spring 会自动将您的对象序列化为 JSON（如果请求具有`Content-Type: application/json`. 或者，可以将[producer](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-produces)属性添加到`@RequestMapping`注释中以始终返回 JSON）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:14:32.607

那么使用这个[库](http://code.google.com/p/google-gson/)。它的重量非常轻（16KB），完全可以满足您的需求。因此，在您的情况下，您将使用`JSONObject`which 在内部扩展`HashMap` 并执行

```
JSONObject o = new JSONObject();
o.put("text","whatever text");
o.put("value",1);
o.put("selected",false);
//and so on
JSONArray arr = new JSONArray();
arr.add(o); 
```

以上将为您提供：

```
[
{
text: "Facebook",
value: 1,
selected: false,
description: "Description with Facebook",
imageSrc: "http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
}
] 
```

要添加更多对象，`JSONObjects`请在循环中添加更多对象`JSONArray`

因此，根据您给定的代码，只需替换为`dataRow`“JSONObject”即可。最后，要检索字符串，请执行.`rows``JSONArray``rows.toString()`

# java - Java 代码出现错误

> ID：13540981
> 
> 赞同：1
> 
> 时间：2012-11-24T11:56:37.710
> 
> 标签：java, list, constructor, arraylist, nullpointerexception

当我尝试添加和订购（之前已使用 Order 类创建）时，`waitingList`我收到此错误：

```
java.lang.NullPointerException
    at DeliveryLog.addOrder(DeliveryLog.java:41) 
```

我正在使用 BlueJ 编写我的 Java 代码。

这是代码：

```
import java.util.*;
/**
* Write a description of class DeliveryLog here.
* 
* @author Stefan Lazic
* @version 1
*/
public class DeliveryLog
{  
  private Date logDate;
  private int numberOfOrders;
  private ArrayList<Order> waitingList;
  private ArrayList<Order> deliveredList;

 /** constructor 
 * @param dd day
 * @param mm month
 * @param yy year
 */
 public DeliveryLog(int dd, int mm, int yy)
 {
    //Initialses the log date and sets the default order value to 0
    logDate = new Date (dd,mm,yy);
    numberOfOrders = 0;
    ArrayList<Order> waitingList = new ArrayList<Order>();
    ArrayList<Order> deliveredList = new ArrayList<Order>();
 }

 public int getCallIns(int dd, int mm , int yy)
 {
   return numberOfOrders; 
 }

 public int getOrdersWaiting()
 {
   return waitingList.size();
 }

 public void addOrder (Order order)
 {
   waitingList.add(order);

 }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:57:56.237

您已在构造函数中重新声明了列表引用：-

```
ArrayList<Order> waitingList = new ArrayList<Order>();
ArrayList<Order> deliveredList = new ArrayList<Order>(); 
```

上述语句在构造函数中创建了两个本地列表引用，其作用域仅限于此，并对其进行初始化。因此，它实际上并没有初始化声明为`instance variable`.

现在，`list`中使用的引用`DeliveryLog.addOrder()`是声明为`instance variables`仍未初始化的引用。

**将构造函数中的上述两个初始化更改为：-**

```
waitingList = new ArrayList<Order>();
deliveredList = new ArrayList<Order>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T12:05:12.060

在您的构造函数中，您重新声明了waitingList 和deliveredList。

您应该将构造函数更改为如下所示：

```
public DeliveryLog(int dd, int mm, int yy)
 {
    //Initialses the log date and sets the default order value to 0
    logDate = new Date (dd,mm,yy);
    numberOfOrders = 0;
    this.waitingList = new ArrayList<Order>();
    this.deliveredList = new ArrayList<Order>();
 } 
```

否则你的实例变量waitingList 和deliveredList 将保持未初始化状态，当你调用addOrder 方法时，它会抛出NullPointerException。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T11:58:22.483

改变这个：

```
ArrayList<Order> waitingList = new ArrayList<Order>();
ArrayList<Order> deliveredList = new ArrayList<Order>(); 
```

对此：

```
waitingList = new ArrayList<Order>();
deliveredList = new ArrayList<Order>(); 
```

`waitingList`您正在创建两个名为and的局部变量`deliveredList`，它们隐藏了同名的属性 - 因此您正在初始化本地数组列表，而不是预期的属性，并且属性本身保持不变`null`，这会导致 NPE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T11:59:39.490

您在 DeliveryLog 方法中使用的变量不是您在类中声明的变量。因此，在类中声明的变量“waitingList”保持未初始化。改变：

```
ArrayList<Order> waitingList = new ArrayList<Order>();
ArrayList<Order> deliveredList = new ArrayList<Order>(); 
```

至

```
waitingList = new ArrayList<Order>();
deliveredList = new ArrayList<Order>(); 
```

在方法上，你应该很好。

# jquery - 动画（淡入淡出）一个jquery函数

> ID：13540982
> 
> 赞同：-1
> 
> 时间：2012-11-24T11:56:40.710
> 
> 标签：jquery, html

`.text`当使用该属性单击任何四个链接时，我有一些标题文本会发生变化

现在我需要在mouseout（鼠标悬停）时对其进行动画处理，有人可以把它放在一起吗？

```
$('#clickdiv').mouseout(function(){
       $('#header').text('new text');

  }); 
```

和

```
$('#header').fadeIn(2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:57:54.910

```
$('#clickdiv').mouseout(function(){
       $('#header').text('new text');
       $('#header').fadeIn(2000);
}); 
```

或者

```
$('#clickdiv').mouseout(function(){
       $('#header').text('new text').fadeIn(2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:05:30.780

你能发布你的一些 HTML，因为它很难得到想法，

[http://jsfiddle.net/UDgTK/2/](http://jsfiddle.net/UDgTK/2/)

```
$('#clickdiv').mouseout(function(){
       $('#header').fadeIn(2000);
}); ​ 
```

# ios - Xcode 上的 iPhone SDK 部署目标

> ID：13540987
> 
> 赞同：1
> 
> 时间：2012-11-24T11:57:02.910
> 
> 标签：ios, xcode

我对 xCode 中的部署目标犹豫不决。我的问题：如果我选择部署目标 4.3，我的应用程序可以在 iOS 3、4、5、6 上运行吗？

我无法在 iPhone 上测试我的应用程序，因为我没有它，但我认为该应用程序只能在 IOS 4.3 或更高版本上运行

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:06:33.033

如果您使用 iOS 4.3 作为部署目标，那将是您的应用程序支持的最低版本。所以，**不，例如它不会在 iOS 3.0 中运行**。

此外，您需要检测实际运行应用[程序的 iOS 中不存在的功能并有条件](http://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Using/using.html)地对其进行编程。

我建议支持 iOS 5 或更高版本。并且绝对忘记了 iOS 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:02:52.310

那是对的。部署目标是您的应用程序将支持的最早的 iOS 版本。

但是请注意，如果您从当前 SDK (4.3) 中使用 3.0 SDK 中不存在的 API 调用，您的应用程序将在运行 iOS 3.0 的设备上崩溃。

因此，即使您可以将部署目标设置为 3.0，也不能保证您的应用程序可以在 iOS 3 设备上运行。

有关更多详细信息，请参阅[Apple 开发人员文档](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/15-Configuring_Applications/configuring_applications.html)。

# c - 随时退出循环

> ID：13540995
> 
> 赞同：-1
> 
> 时间：2012-11-24T11:58:58.170
> 
> 标签：c

我试图通过按任意键随时退出循环。我已经尝试了下面的代码，但它无法完成。得需要你的帮助。先感谢您。我正在使用 C-Free 5.0。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(void)
{
    int b=0, i;
    int seconds;
    printf("\nEnter number of seconds : ");
    scanf("%d", &seconds);
    while (b==0)
    {
        for(i=1;i<=seconds;i++)
        {
            time_t end = time(0) + 1;
            while(time(0) < end)
            ;
            seconds -= 1;
            printf("Number of seconds left : %d\n", seconds);
            b=kbhit();
        }

        if(seconds == 0)
        {
            exit(0);
        }
    }
    printf("Number of remaining seconds left : %d\n", seconds);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:01:10.427

您在最里面的 while 循环中“忙于等待”。这可能不是最好的解决方案，但如果这是您想要做的，您需要在该循环中添加一个测试以检查是否已按下键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:56:29.563

要退出循环，请使用 C++ 中名为 khbit 的函数。当按下任何键时它变为 1 并再次清空它分配按下的键以使用 getch() 清除缓冲区

```
#include <conio.h>
#include <iostream>

using namespace std;

int main()
{
    while(1)
    {
        if(kbhit())  // khbit will become 1 on key entry.
        {
            break;    // will break the loop
        }

                     // Try to use some delay like sleep(100);  // sleeps for 10th of second to avoid stress on CPU
    }

                     // If you want to use khbit again then you must clear it by char dump = getch();

                     // This way you can also take a decision that which key was pressed like 

                     // if(dump == 'A')

                     //{ cout<<"A was pressed e.t.c";}
} 
```

# mysql - 从未规范化的表中按 ID 从列中获取 SUM？

> ID：13540996
> 
> 赞同：1
> 
> 时间：2012-11-24T11:58:59.090
> 
> 标签：mysql, sum, database-normalization

我有一个来自医院的数据库。在一个表中有 1 个或多个交易号，几乎所有交易号都只包含 1 个医生 ID。该表尚未标准化。

数据如下所示：

```
Trans_No    |Doctor_ID  |Trans_Type                     |PM |Cost
10.853329   |           |ADMINISTRASI                   |   |0.00
10.853329   |10004      |JASA MEDIS                     |   |25000.00
10.853329   |           |OBAT RESEP FARMASI NO : 1077   |F  |2000.00
10.836033   |           |ADMINISTRASI                   |   |0.00
10.836033   |10001      |JASA MEDIS                     |   |25000.00
10.836033   |           |OBAT RESEP FARMASI NO : 3137   |F  |0.00
10.836032   |           |ADMINISTRASI                   |   |0.00
10.836032   |10001      |JASA MEDIS                     |   |25000.00
10.836032   |           |OBAT RESEP FARMASI NO : 3138   |F  |10000.00 
```

如何从 PM 列值为 F 的医生那里获得医生 ID 和费用总和？

我无法更改数据库，因为它已经有超过十万笔交易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:09:05.500

使用子查询创建将 Trans_No 映射到 Doctor_ID 的“表”。然后用这个子查询加入你的真实表，为每个事务行创建一个 Doctor_ID。然后你可以做你的`WHERE`and `GROUP BY`。

```
SELECT tdoc.Doctor_ID, SUM(Cost) FROM your_table
JOIN (
  SELECT Trans_No, Doctor_ID FROM your_table WHERE Doctor_ID <> ''
  GROUP BY Trans_No, Doctor_ID
) tdoc ON tdoc.Trans_No = your_table.Trans_No
WHERE PM = 'F'
GROUP BY tdoc.Doctor_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:28:42.303

这为您提供了 Trans_No、Doctor_ID 和 Cost 的标准化版本：

```
select
  Trans_No,
  max(Doctor_ID) as Doctor_ID,
  max(case when PM="F" then Cost end) as Cost
from
  your_table
group by
  Trans_No 
```

那么你必须按 Doctor_ID 分组：

```
Select Doctor_ID, sum(Cost)
From (
  select
    Trans_No,
    max(Doctor_ID) as Doctor_ID,
    max(case when PM="F" then Cost end) as Cost
  from
    your_table
  group by
    Trans_No) your_table
Group by Doctor_ID 
```

# asp.net-mvc - 多个模型和 Breeze 上下文的元数据问题

> ID：13540999
> 
> 赞同：4
> 
> 时间：2012-11-24T11:59:38.343
> 
> 标签：asp.net-mvc, asp.net-web-api, metadata, breeze

有没有其他人尝试在具有多个 EF 模型的多个 Api 控制器的解决方案中使用 Breeze.js 的服务器端组件？

我发现在一个上下文中调用 MetaData 端点后，在其他上下文中对 MetaData 端点的所有后续调用都会从第一个调用的上下文返回 MetaData，例如说我有两个 Api 控制器，每个都有自己的 MetaData 端点：

```
public class CoreController : ApiController
{
    readonly EFContextProvider<CoreEntities> contextProvider = new EFContextProvider<CoreEntities>();
}

public class FormsController : ApiController
{
    readonly EFContextProvider<FormsEntities> contextProvider = new EFContextProvider<FormsEntities>();
} 
```

调用 ~/Core/MetaData 将返回 Core 模型的 JSON，但是随后调用 ~/Forms/MetaData 不会返回 Forms JSON，而是返回 Core 元数据。如果我反过来调用它们，我两次都会得到表单元数据，这个问题似乎一直存在，直到主机进程被回收。

我可以确认我能够按预期从两个模型访问对象数据，所以我怀疑这是一个路由问题。

也许有人可以告诉我是否需要禁用某些缓存？

问候，

汤姆·特雷根纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:08:00.433

好的，这应该在 Breeze 0.73.4 中修复，可以通过 nuget 或 zips 在微风网站上获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:53:51.267

你说的对。我已经测试了这个问题，并且您报告的这种行为发生了。`Metadata()`为两个控制器的每种方法设置断点，并使用 Fiddler，我得出结论，**这不是路由问题**。两个控制器使用不同的上下文（`contextProvider`的属性），但总是返回第一个被调用的元数据。我想这是微风的图书馆问题。我已经阅读了 Breeze 的文档，但我没有找到任何可以帮助的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T07:37:29.627

还有另一个具有相同症状的问题。它与连接字符串中对实体框架元数据的模糊引用有关。我有两个单独的 EDMX 文件，它们都被命名为 Model.edmx（单独的项目）。当我引用包含第二个 EDMX 文件的程序集时，下面的连接字符串变得模棱两可——两个 EDMX 文件中的元数据文件都符合描述。

```
metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl; 
```

我能够通过重命名 EDMX 文件之一来解决该问题。

另一种解决方案是将星号替换为包含嵌入式元数据的程序集的全名——这样做实际上有性能优势。有关更多详细信息，请参阅涵盖[实体框架连接字符串](https://msdn.microsoft.com/en-us/library/vstudio/cc716756%28v=vs.100%29.aspx)的 MSDN 文档。

> 程序集全名
> 
> 具有嵌入资源的程序集的全名。名称包括简单名称、版本名称、支持的文化和公钥，如下所示：
> 
> ResourceLib，版本=1.0.0.0，文化=中性，PublicKeyToken=null
> 
> 资源可以嵌入到应用程序可访问的任何程序集中。
> 
> 如果为 assemblyFullName 指定通配符 (*)，实体框架运行时将按以下顺序在以下位置搜索资源：
> 
> 调用程序集。
> 
> 引用的程序集。
> 
> 应用程序的 bin 目录中的程序集。
> 
> 如果文件不在这些位置之一，则会引发异常。
> 
> Cc716756.note(zh-cn,VS.100).gif注意：当您使用通配符 (*) 时，实体框架必须在所有程序集中查找具有正确名称的资源。要提高性能，请指定程序集名称而不是通配符。