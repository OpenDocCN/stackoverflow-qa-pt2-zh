# StackOverflow 问答 13442000-13442999

# php - 在 ErrorDocument 中发布原始数据为空

> ID：13442000
> 
> 赞同：0
> 
> 时间：2012-11-18T16:24:23.883
> 
> 标签：php, apache, post

`ErrorDocument`我正在尝试使用以下指令为 Apache 2.4.2 和 PHP 5.4.5（作为模块加载）中的虚拟路径开发一个处理程序：

```
<Directory "...">
    ...
    ErrorDocument 404 /handler.php
    ...
</Directory> 
```

至于使用的方法是 GET 或 HEAD，这一切都像一个魅力。当方法是 POST 时，麻烦就来了。

使用 POST 时，在我的测试 PC 中，我设法通过 获取输入流`file_get_contents('php://input')`，即使`Content-Type`标头设置为`multipart/form-data`. 在服务器 PC 中，内容*始终*为空，即使类型为`application/x-www-form-urlencoded`.

我正在尝试获取原始 POST 数据，因为当脚本是这种重定向的结果时，`$_POST`并且是空的。`$_FILES`

有什么我想念的吗？也许 httpd.conf 文件中有一些不同的设置？php.ini 文件是一样的。我只是不知道从哪里开始。

**更新**：似乎差异是由于我用于测试目的`action`的元素的属性。当设置为文件*并且*位于根目录中`<form>`时，脚本似乎能够获取原始 POST 数据。`action``.php`

 *我猜这与`AddHandler`httpd.conf 文件中使用的指令有关。*

# php - MOD_REWRITE 条件重定向

> ID：13442005
> 
> 赞同：0
> 
> 时间：2012-11-18T16:24:55.917
> 
> 标签：php, apache, redirect, rewrite

我在使用 Apache Mod_Rewrite 模块时遇到问题，

我正在从获取请求中检索三个变量说

```
$country
$state
$location 
```

我成功地在本地重写了 url，例如 url

```
localhost/directory/country/state/location /*is redirected to*/
localhost/directory/result.php?c=country&s=state&l=location 
```

我想做的是我想重定向

```
localhost/directory/country to localhost/directory/country.php?c=country 
```

如果是

```
localhost/directory/country/state to localhost/directory/state.php?c=country&s=state 
```

我正在使用以下 RewriteRule

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ result.php?s=$1&d=$2&l=$3 [L] 
```

我如何重写国家和州的情况，如果我只想显示国家页面..

多谢！！请通过提供在线教程和其他参考资料来帮助我。

我将非常有义务为您提供同样的.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:44:04.410

您可以使用向下流来识别 URL 是国家、州还是位置，例如：

```
<IfModule mod_rewrite.c>
    Rewrite Engine On
    RewriteRule ^localhost/directory/([^/\.]+)/([^/\.]+)/([^/\.]+)/ localhost/directory/result.php?c=$1&s=$2&l=$3 [L]
    RewriteRule ^localhost/directory/([^/\.]+)/([^/\.]+)/ localhost/directory/state.php?c=$1&s=$2 [L]
    RewriteRule ^localhost/directory/([^/\.]+)/ localhost/directory/country.php?c=$1 [L]
</IfModule> 
```

请注意我是如何首先从最长、最动态的 URL 开始的。如果您从最短的第一个开始，在您的情况下`country`，那么 URL_Rewrite 将`answer`首先接受它，并且您永远不会遇到其他两个重写。

尽管我发现在 PHP 解析方面更容易处理一个 php 页面上的所有动态 URL 流量，但在您的情况下`result.php`，您可以通过这种方式确定输出，而不必担心在文件上跳转。

`.htaccess`

```
<IfModule mod_rewrite.c>
    Rewrite Engine On
    RewriteRule ^localhost/directory/([^/\.]+)/([^/\.]+)/([^/\.]+)/ localhost/directory/result.php?c=$1&s=$2&l=$3 [L]
    RewriteRule ^localhost/directory/([^/\.]+)/([^/\.]+)/ localhost/directory/result.php?c=$1&s=$2 [L]
    RewriteRule ^localhost/directory/([^/\.]+)/ localhost/directory/result.php?c=$1 [L]
</IfModule> 
```

`result.php`

```
<?php
$location = isset($_GET['l']) ? $_GET['l'] : false;
$state    = isset($_GET['s']) ? $_GET['s'] : false;
$country  = isset($_GET['c']) ? $_GET['c'] : false;

// ...PARSE THE REST OF PHP based off of these variables
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:51:58.337

我认为，您可以使用两个规则：

```
# localhost/directory/country
RewriteRule ^[^/]+/([^/]+)$  localhost/directory/country.php?c=$1 [L]

# localhost/directory/country/state
RewriteRule ^[^/]+/([^/]+)/([^/]+)$  localhost/directory/state.php?c=$1&s=$2 [L] 
```

# functional-programming - 普通lisp中的重复元素

> ID：13442008
> 
> 赞同：4
> 
> 时间：2012-11-18T16:25:05.947
> 
> 标签：functional-programming, lisp, common-lisp

我正在尝试创建一个函数`two arguments x and y`来创建一个`list of y times repeated elements X`但我对如何执行它或使用哪种方法感到困惑我认为列表压缩可以执行但我想要一个更短更简单的方法例如我希望我的简单代码像这个

```
if y = 4
 and x = 7
 result is list of elements (7, 7, 7, 7) 
```

我该如何去做任何想法？书籍链接或任何能给我线索的东西我试过搜索但我不走运

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-18T16:29:24.227

您可以将[make-list](http://www.lispworks.com/documentation/HyperSpec/Body/f_mk_lis.htm)与*初始元素*键一起使用：

```
CL-USER> (make-list 10 :initial-element 8)
   (8 8 8 8 8 8 8 8 8 8) 
```

虽然 Óscar answer 提供了一个很好的例子来说明如何自己编写这样的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:28:59.393

试试这个，它在 Scheme 中，但总体思路应该很容易转换为 Common Lisp：

```
(define (repeat x y)
  (if (zero? y)
      null
      (cons x
            (repeat x (sub1 y))))) 
```

**编辑：**

现在，在 Common Lisp 中：

```
(defun repeat (x y)
  (if (zerop y)
      nil
      (cons x
            (repeat x (1- y))))) 
```

# javascript - Cookie 未被读取

> ID：13442022
> 
> 赞同：0
> 
> 时间：2012-11-18T16:27:02.933
> 
> 标签：javascript, cookies

我有以下功能来设置和获取 cookie，我在本地主机上测试了代码，它似乎可以工作，但是当我把它们放在服务器上时它没有。我可以检查浏览器上的 cookie，但是当我尝试使用 读取它们时`function getCookies()`，它不起作用。

问题：

*   我是否错误地设置了 cookie？
*   为什么我可以在浏览器上看到 cookie 而不是务实？
*   我是否错误地阅读了 cookie？

代码：

```
<script type="text/javascript"><!--

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
alert(ARRcookies);
for (i=0;i<ARRcookies.length;i++)
  {
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
}

function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function readCookie(){
  alert("here");
  var domain = checkCookie("domain");
  var tld= checkCookie("tld");
  alert(domain+" "+tld);
}

window.onload(readCookie());
// --></script> 
```

**更新：** readCookie 函数中的警报显示“未定义”，这应该是值。当我尝试打印 ARRcookies 时，它会显示除我设置的“域”和“tld”之外的所有 cookie。我可以在浏览器的 cookie 列表中看到 cookie 的“域”和“tld”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:13:04.947

您连接该`readCookie`功能的代码如下：

```
window.onload(readCookie()); 
```

如果将代码分成两行，可能会更容易看到：

```
var cookie = readCookie();
window.onload(cookie); 
```

所以这首先调用`readCookie`（一旦从服务器加载了 JavaScript，**在**完整`document`初始化之前）。

返回后`readCookie`，它的结果被传递给一个方法`window.onload`。

这会导致几个问题：

1.  该`window`对象没有`onload`方法。它有一个`onload`您可以注册的活动

2.  您可能不想立即调用`readCookie`when ，而是希望它被`onload`.

您可以通过像这样注册它来完成此操作（正如 Pointy 评论的那样）：

```
window.onload = readCookie; 
```

因此，您正在设置`window.onload`事件以执行您的`readCookie`功能。在那个阶段，cookies 将可用。

# iphone - IOS/IPHONE Safari 或 Chrome 查看本地文件

> ID：13442025
> 
> 赞同：3
> 
> 时间：2012-11-18T16:27:22.493
> 
> 标签：iphone, ios, google-chrome, safari

我使用 Leaflet 创建了一个独立的 HTML、CSS、JavaScript 离线地图视图（请参阅 leafletjs.com）。我可以使用 FileApp/DiskAid 将应用程序下载到 iphone。我可以点击 HTML 文件并查看应用程序，但正如您从随附的屏幕截图中看到的那样，图层和缩放控件位于屏幕顶部。如果我尝试按下它们，那么您的 HTML 查看器会阻止按下并向下滑动横幅（返回、操作等）（查看器显示的黑色顶部横幅）。

1.  更好的是，我想用 SAFARI 打开它，因为它有 NITRO JS 引擎，但我得到的唯一 OPEN IN 选项是 Evernote、RiddleDocs、Mover 和 DropBox。
2.  有没有办法告诉 IOS 的 safari 或 chrome 打开一个本地文件系统，其中 html 是：http://127.0.0.1/fileApp/Toby.html 例如 Toby 是我的 HTML 文件在哪里？我意识到某处是 t 的数据

![在 iPhone 上运行的 Leaflet 应用程序的屏幕截图](../Images/058a764ba60841c079d26121200c3c93.png)

![被酒吧隐藏](../Images/66f365b6f6ec267df024c449cec05217.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-07T07:51:32.987

第一步 ：-

这些选项是使用**Info.plist**文件中的键配置的。第一个键是**UIFileSharingEnabled**，它允许 iTunes 共享 Documents 文件夹中的文件。第二个键是**LSSupportsOpeningDocumentsInPlace**，它授予本地文件提供者访问 Documents 文件夹中文件的权限。将这些键添加到您的**Info.plist**并将它们的值设置为**YES**。

[在此处输入图像描述](https://i.stack.imgur.com/mhaaL.png)

[在此处输入图像描述](https://i.stack.imgur.com/QnZRJ.png)

让 documentPicker = UIDocumentPickerViewController(documentTypes: [String(kUTTypePDF)], in: .import)

```
documentPicker.delegate = self
documentPicker.modalPresentationStyle = .overCurrentContext
present(documentPicker, animated: true, completion: nil) 
```

您可以使用选项从应用程序导入或导出文件。您还可以定义要导出或导入的文件类型...

# html - HTML：为什么在网页上出现 type=hidden 的输入？

> ID：13442027
> 
> 赞同：2
> 
> 时间：2012-11-18T16:27:37.710
> 
> 标签：html

作为学习 HTML 的一部分，我刚刚查看了我的 twitter 页面的 html。在页面的末尾，我可以看到很多状态作为隐藏输入标签的值（该值似乎是 json 形式）。

我没有看到与此相关的明显形式，它也没有出现在 html 请求中。

我想知道是否有人能够猜出这些输入及其值的使用方式/原因。

```
 </body>
</html>
<input type="hidden" id="init-data" class="json-data" value=" 
{&quot;scribeMetrics&quot;:0,&quot;environment&quot;:&quot;production&quot;,&quot;wtfOptions&quot;:
{&quot;dismissable&quot;:true,&quot;connections&quot;:true,&quot;pc&quot;:true,&quot;limit&quot;:3,&quot;
disabled&quot;:false,&quot;display_location&quot;:&quot;wtf-component&quot;} 
```

........ 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:37:58.860

如果您查看这个[javascript 文件](https://si0.twimg.com/c/swift/init.103c61dd76c3ed5ba2dcffcd63e25fbf4b1442ac.js)，您会看到使用了该`init-data`元素

```
var a=$("#init-data").val(),
    b=JSON.parse(a),
    c=$.makeArray(arguments);
b.moreCSSBundle?using("css!"+b.moreCSSBundle,d):d()}if($("html").hasClass("debug"))
//and so on 
```

如果你想知道为什么他们使用隐藏字段而不是标准的 javascript 变量，你必须在 twitter 上询问负责这件事的人 ;)。我看不出有什么明显的原因，而且缩小的代码并不能更容易理解发生了什么。

# c - C 预处理器进行了多少次传递？

> ID：13442028
> 
> 赞同：8
> 
> 时间：2012-11-18T16:27:39.893
> 
> 标签：c, c-preprocessor

C 预处理器对代码进行了多少次传递？

我在 gcc 4.7.2 上测试了以下代码

```
#define a 5
#define b a
#define c b
#define d c
#define e d
#define f e
#define g f
#define h g
#define j h
#define k j
#define l k
#define m l

int main(void) {return d;} 
```

没有错误：

```
$ gcc -E 1.c
# 1 "1.c"
# 1 "<command-line>"
# 1 "1.c"
# 14 "1.c"
int main(void) {return 5;} 
```

这是标准行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-18T16:30:29.037

C 预处理器继续运行，直到没有更多可扩展的内容。这不是通行证的问题。这是一个完整性问题。

它确实避免了宏的递归扩展。宏一旦展开一次，就不会在替换文本中重新展开。

* * *

标准关于宏扩展限制的唯一说明是在 §5.2.4.1 翻译限制中，它说：

> 实现应能够翻译和执行至少一个程序，该程序包含以下每个限制的至少一个实例：^(18）)
> 
> ...
> 
> *   在一个预处理翻译单元中同时定义 4095 个宏标识符
> 
> ^(18))实施应尽可能避免施加固定的翻译限制。

因此，预处理器必须能够处理至少 4095 个宏，并且如果除了其中一个宏之外的所有宏都按顺序扩展为另一个宏，就像在您的示例中一样，则结果必须是正确的。

# ruby-on-rails - 如何显示与对象关联的对象的输入是在新表单上创建的？

> ID：13442031
> 
> 赞同：0
> 
> 时间：2012-11-18T16:27:47.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不确定该主题是否具有我想要的正确含义，但我不知道如何解释。我正在构建在线考试应用程序。为了便于解释问题，我将重点放在 6 个表上：

1.  课程：**`has_many`**主题
2.  主题：**`belongs_to`**课程
3.  问题：**`belongs_to`**主题，**`has_many`**general_exams，**通过**：：general_questions
4.  GeneralExams：**`has_many`**问题、**`through:`**general_questions、**`belongs_to`**用户、**`belongs_to`**课程、**`has_many`**考试
5.  一般问题：**`belongs_to`**问题，**`belongs_to`**general_exam

6.  考试：**`belongs_to`**普通考试，**`belongs_to`**用户

这是表 GeneralExam 中的列：

```
name,description,semester,number_question,duration,used, user_id, course_id 
```

我现在要做的是创建一个通用考试，并且可以为每个课程的每个主题指定一些问题。例如，我有一**门名为**“数据库”的课程有 3 个主题：A、B、C。现在我想为**“数据库”课程**创建普通考试。我想在创建普通考试时具体说明：

*   主题 A 的 5 个问题
*   主题 B 的 6 个问题
*   主题 C 的 7 个问题

这些问题是我从这些主题中随机得出的。我已经为创建普通考试建立了一个表格，但我不知道如何在表格上获取课程主题，并为每个主题创建一个输入数字问题的字段。那么有没有办法在新形式的普通考试中列出主题，每个主题都有一个输入数字的字段，该主题的问题将是随机的？或者我需要创建一个新表来存储该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:08:18.463

这就是我要做的……

数据库应考虑其“灵活性”。为此，所有信息都存储在不同的表中..然后为了检索数据的速度..建立一些关系表来显示信息..（取决于有多少人将使用您的系统）

所以......自上而下......

老师表（一个老师可以教很多课程）..每件事都从这里开始）->课程表（这是所有其他人的基础）-----------------以下可能会开始交叉引用.. --> 主题表 ---> g-exam 表 Big Question 表可能在同一级别
--> g-question 表应该在底层（可以参考 g-exam 和 Big-Q）

（不需要保存教师信息或主题信息，因为它是 twwo-level up..但您仍然可以存储这些信息以快速检索数据..但请记住..如果您需要在信息存储后更改信息。 ..简单更好...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:19:34.080

我只是复习了我的答案......我发现我说的一个错误..我应该说：你不需要在 g-question 表中保存教师或主题信息.. g-question 表只保存问题键和 g-exam-key 和问题表和 g-exam 表保存主题键......并参考回到顶层..

并创建一个快速检索表以进行快速访问，该表可能会每天更新（例如：显示教师姓名、顶级姓名……等，因为这些表由“键”链接而不是名称

抱歉没有说对

# ember.js - 带变量的车把绑定

> ID：13442034
> 
> 赞同：1
> 
> 时间：2012-11-18T16:28:00.333
> 
> 标签：ember.js, handlebars.js

我正在尝试在 Handlebars/Ember 中创建与具有动态键的对象的绑定，如下所示：

```
{{view Ember.TextArea valueBinding="foo.[view.content.someid]"}} 
```

当我使用静态键尝试此操作时，一切正常

```
{{view Ember.TextArea valueBinding="foo.[bar]"}} 
```

我猜我的示例中的“view.content.someid”被视为字符串。有没有人提示我如何解决这个问题，或者可以告诉我为什么这不起作用？

# hadoop - EMR 上的 Hadoop 流式传输任务总是失败并显示“PipeMapRed.waitOutputThreads(): subprocess failed with code 143”

> ID：13442037
> 
> 赞同：1
> 
> 时间：2012-11-18T16:28:18.807
> 
> 标签：hadoop, hadoop-streaming, elastic-map-reduce

我在 Amazon EMR 上的 hadoop 流式 map-reduce 作业不断失败，并出现以下错误：

```
java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 143
    at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:372)
    at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:586)
    at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:135)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
    at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:36)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:441)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:377)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

从我在线阅读的内容来看，这似乎与发送给任务的 SIGTERM 有关（[请参阅此处的此线程](https://forums.aws.amazon.com/thread.jspa?threadID=102078)）。我已经尝试过， `--jobconf "mapred.task.timeout=X"`但即使长达一个小时，X 的值仍然会收到相同的错误。我还尝试 按照[流文档](http://hadoop.apache.org/docs/r0.20.0/streaming.html)`reporter:status:<message>`中的描述定期向 STDERR报告。然而，这也无助于防止此错误发生。据我所见，当我在日志文件中生成预期的输出时，我的流程开始并开始工作。然而，每次任务尝试总是以这个错误结束。

这是我用来使用 make 启动流式传输作业的代码：

```
instances  = 50
type       = m1.small
bid        = 0.010
maptasks   = 20000
timeout    = 3600000

hadoop: upload_scripts upload_data
    emr -c ~/.ec2/credentials.json \
        --create \
        --name "Run $(maptasks) jobs with $(timeout) minute timeout and no reducer" \
        --instance-group master \
        --instance-type $(type) \
        --instance-count 1      \
        --instance-group core   \
        --instance-type $(type) \
        --instance-count 1      \
        --instance-group task         \
        --instance-type $(type)       \
        --instance-count $(instances) \
        --bid-price $(bid)            \
        --bootstrap-action $(S3-srpt)$(bootstrap-database) \
        --args "$(database)","$(http)/data","$(hadoop)"    \
        --bootstrap-action $(S3-srpt)$(bootstrap-phmmer)   \
        --args "$(hadoop)"                                 \
        --stream \
        --jobconf "mapred.map.tasks=$(maptasks)"   \
        --jobconf "mapred.task.timeout=$(timeout)" \
        --input $(S3-data)$(database)                                      \
        --output $(S3-otpt)$(shell date +%Y-%m-%d-%H-%M-%S)                \
        --mapper '$(S3-srpt)$(mapper-phmmer) $(hadoop)/$(database) $(hadoop)/phmmer' \
        --reducer NONE 
```

# ruby-on-rails - 带有源和条件的 Rails has_many 不会创建条件属性

> ID：13442042
> 
> 赞同：1
> 
> 时间：2012-11-18T16:28:58.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试设置一个`has_many`适用`conditions`于阅读部分但不适用于新条目的方法。几周前我在沙盒中测试过它，它可以工作，但我无法让它再次工作，所以也许我只是瞎了，或者它只是一个错误的设计:-)

```
class Task
  has_many :task_users
  has_many :assignees, :through => :task_users, :source => :user, :conditions => {"task_users.is_assignee" => true}
  has_many :participants, :through => :task_users, :source => :user
end

class TaskUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :task
end

class User
  has_many :tasks
end 
```

将新的受让人添加到这样的任务后

```
Task.first.assignees << User.first 
```

执行以下 SQL

```
SQL (0.3ms)  INSERT INTO `task_users` (`created_at`, `is_assignee`, `task_id`, `updated_at`, `user_id`) VALUES ('2012-11-18 15:52:24', NULL, 2, '2012-11-18 15:52:24', 3) 
```

我认为当我添加新值时，rails 会使用我的条件来设置这些值。阅读效果很好，但我不知道为什么添加新值不适用于条件。

我希望这个 INSERT

```
SQL (0.3ms)  INSERT INTO `task_users` (`created_at`, `is_assignee`, `task_id`, `updated_at`, `user_id`) VALUES ('2012-11-18 15:52:24', 1, 2, '2012-11-18 15:52:24', 3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:20:15.860

我不完全确定您是否可以在关联`:conditions`中的连接表上指定散列。`has_many :through`如果我错了，其他人会纠正我，但`:user`在你的情况下，条件必须直接在源关联上。

如果是这种情况，要解决此问题，您可以指定一个辅助关联：

```
has_many :task_users
has_many :assignee_task_users, :class_name => 'TaskUser', :conditions => {"is_assignee" => true}
has_many :assignees, :through => :assignee_task_users, :source => :user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:09:46.337

只是要突出显示文档：

```
Specify the conditions that the associated objects must meet in order to be 
included as a WHERE SQL fragment, such as price > 5 AND name LIKE 'B%'. 
Record creations from the association are scoped if a hash is used. 
has_many :posts, :conditions => {:published => true} will create published 
posts with @blog.posts.create or @blog.posts.build. 
```

即使您已经使用了哈希，第一个参数也是一个字符串，它是不需要的（关联已经知道表名）。将其重写为 :conditions => {:is_assignee => true} 它应该可以工作。

此外，您创建用户的方式应该被重写，以便它能够正常工作。代替：

```
Task.first.assignees << User.first 
```

采用：

```
Task.first.assignees.create 
```

这应该可以解决问题。

# matlab - 根据现有值随机替换矩阵中元素的百分比

> ID：13442048
> 
> 赞同：0
> 
> 时间：2012-11-18T16:29:20.993
> 
> 标签：matlab, random, replace, element

是否有一种明智的方法可以用新值替换矩阵/向量中每个值的*x* %，并随机选择要更改的元素？也就是说，在*A*中，如果我想将 20% 的值（每个现有值 1 个元素）更改为值 5，我如何确保 A 中每个现有值的 5 个元素中的每*一个*都具有相同的更改概率到新值（例如 5）？对于完成上述任务的方法，我将不胜感激。

非常感谢你。

```
% Example Matrix
% M = 5;
% N = 5;
% A = zeros(M, N);
A = [0 0 0 0 0;
     1 1 1 1 1;
     2 2 2 2 2;
     3 3 3 3 3;
     4 4 4 4 4];   

% Example Matrix with 20% of elements per value replaced with the value '5'
A = [0 0 5 0 0;
     1 5 1 1 1;
     2 5 2 2 2;
     3 3 3 3 5;
     4 4 5 4 4]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:34:33.253

尝试使用逻辑数组和生成的随机数，如下所示：

```
vals_to_change=rand(size(A,1),size(A,2))<p;
A(vals_to_change)=rand(sum(vals_to_change),1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:42:48.803

使用来自[这里](http://www.mathworks.com/matlabcentral/answers/54193-replace-percentage-of-existing-values-with-new-value)和[这里](https://stackoverflow.com/questions/13477287/permute-elements-within-rows-of-matrix/13477565#13477565)的信息，我能够实现我的目标。下面的代码将用新值替换矩阵中每个值的 x%，然后随机化其在矩阵中该值中的位置。

```
M = 5;
N = 5;
A = zeros(M, N);
PC = 20; % percent to change
nCells = round(100/PC); % # of cells to replace with new value
A = [0 0 0 0 0;
     1 1 1 1 1;
     2 2 2 2 2;
     3 3 3 3 3;
     4 4 4 4 4]; 
A2 = A+1; % Pad the cell values for calculations (bc of zero)
newvalue = 6;
a=hist(A2(:),5);% determine qty of each value
for i=1:5
    % find 1st instance of each value and convert to newvalue
    A2(find(A2==i,round(a(i)/nCells)))=newvalue;
end;
out = A2-1; % remove padding
[~,idx] = sort(rand(M,N),2); % convert column indices into linear indices
idx = (idx-1)*M + ndgrid(1:M,1:N); %rearrange each newvalue to be random
A = out;
A(:) = A(idx); 
```

# python - 以下算法的更pythonic方法

> ID：13442050
> 
> 赞同：-2
> 
> 时间：2012-11-18T16:29:26.940
> 
> 标签：python, algorithm, list

我通过更合乎逻辑的方式更改最终结构：

```
{'state1': {'city1': ['dict1', 'dict2']}, 'state2': {'City2': ['dict3']}} 
```

和代码：

```
dir_dict = {}
for one in objects:
    state = one.dir.city.state.name
    city ​​= one.dir.city.name
    address = one.dir.address
    if state not in dir_dict:
        dir_dict[state] = {}
    if city not in dir_dict[state]:
        dir_dict[state][city] = []
    dir_dict[state][city].append(address) 
```

我还是实现代码@Eric

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:47:57.430

```
from collections import defaultdict
dir_dict = defaultdict(lambda: defaultdict(set))
for x in objects:
     dir_dict[x.state][x.city].add(x.address)

dir_list = dir_dict.keys() 
```

# joomla2.5 - Joomla 2.5 ― 在组件的前端使用管理员组件控制器

> ID：13442052
> 
> 赞同：4
> 
> 时间：2012-11-18T16:30:02.400
> 
> 标签：joomla2.5

如何使用创建的控制器

```
/administrator/components/com_mycom/controllers/* 
```

在

```
/components/com_mycom/mycom.php 
```

详细地：

我有一个带有 »add« 方法的 »log« 控制器，我想从前端使用它。我没有在后端登录，任务没有执行，出现 500 错误。所以只想在前端包含后端控制器路径，这样`JController::getInstance( 'Mycom' )`仍然有效。

问候……</p>

**编辑：**

经过长时间的搜索，我可以找到一个或多或少未记录的参数： `JController::getInstance()`方法，即第二个：`$config = array()`。通过查看源代码，我发现 »config-array« 有一个有趣的键，即：»base_path«。

的呼唤：

```
JController:getInstance( 'Mycom, array('base_path' =>JPATH_ADMINISTRATOR.DS.'components'.DS.'com_mycom')' ); 
```

始终提供后端控制器，并且可以在前端安全地使用它们，**但是**必须注意视图也是从组件的后端获取的。就我而言，我只是用它来进行 ajax 调用，所以没关系，但是在计划使用“后端控制器”创建“前端视图”时需要小心使用这种方法。

问候……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:34:42.917

我最近遇到了一个类似的问题，我想在前端也使用整个 CRUD 系统形式的后端。

这是对我有用的方法（我并不是说这是推荐或最佳实践）：

我刚刚从后端对文件夹/文件结构进行了建模。PHP 文件包含以下内容：

`require_once JPATH_ADMINISTRATOR . '/components/com_mycom/controllers/log.php';`

# ssl - 设置 2-way SSL 并信任来自根颁发者的所有证书

> ID：13442053
> 
> 赞同：1
> 
> 时间：2012-11-18T16:30:13.990
> 
> 标签：ssl, iis-7, ssl-certificate, certificate

我必须在一些笔记本电脑上安装 2-way ssl，每台笔记本电脑都有自己不同的证书。在服务器上，我必须将 IIS7 配置为信任来自颁发者的所有客户端证书，以便所有不同的证书都被接受。我已将 IIS7 站点设置为“需要 ssl”-“需要客户端证书”。我已经在域上配置了单向 SSL，以使用我从 GoDaddy 获得的证书，并且运行良好。当我尝试使它与 2-way ssl 一起工作时，我无法让它工作。

有问题的发行人​​是公司自己，所以他们发行自己的证书。

到目前为止，我的客户给了我以下信息：

*   发行公司的 Root .cer
*   包含 ROOT、SUBONE 和 Test.cer 客户端的链式 .p7b 文件
*   来自我在我的开发机器上生成的 CSR 的 Test.cer，由 SUBONE 发布

我的问题是 - 我把所有东西放在哪里，我需要什么设置来配置它才能工作？

（客户端：Win7，服务器：2008Server，IIS7 - 都是最新的）

# .net - 控制器中带有操作的 GET 和 POST - VB.NET 2012 MVC 4

> ID：13442055
> 
> 赞同：0
> 
> 时间：2012-11-18T16:30:25.263
> 
> 标签：.net, vb.net, asp.net-mvc-4

# 编辑：

函数*“TheColorNameFunction”*运行成功。问题是，如何让`return View()`函数返回到*"TheRequest"* `View`。

# 解决了：

只需将`View`名称写入`return View()`如下：`return View("TheRequest")`

* * *

## 控制器：

```
Function TheRequest() As ActionResult

        Return View()
    End Function

    <HttpPost()>
    Function TheColorNameFunction() As ActionResult

        Response.Write("The color you have submitted: " & Request.Form("ColorName"))

        Return View()
    End Function 
```

## 的HTML：

```
@Html.BeginForm("TheColorNameFunction", "Home", method:= FormMethod.Post)

<fieldset>
    <input type="text" name="ColorName" />
    <input type="submit" name="ColorName_SubmitButton" />
</fieldset> 
```

## HTML 第二：

```
 <ul id="menu">
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                <li>@Html.ActionLink("About", "About", "Home")</li>
                <li>@Html.ActionLink("The Request View", "TheRequest", "Home")</li>

            </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T22:04:52.857

如果我正确理解您的问题，这可以通过使用 ViewData 或视图模型来完成。ViewData 在您的情况下使用起来更简单。

**使用视图数据：**

您的操作方法：

```
<HttpPost()>
Function TheColorNameFunction(ColorName as String) As ActionResult
    ViewData("message") = "The color you have submitted: " & ColorName
    Return View()
End Function 
```

在您的视图中，您可以显示如下消息：

```
@ViewData("message") 
```

**更新：**好的，所以如果我理解正确，您只想返回标题为“TheRequest”的原始视图，对吗？有两种方法可以做到这一点......而不是`return View()`你可以这样做`return TheRequest()`，或者如果 .vbhtml 文件的名称是“TheRequest”，你可以使用`return View("TheRequest")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:37:11.607

不知道你是不是在问如何生成你的action的url，这里有解释：[Url.Action parameters?](https://stackoverflow.com/questions/6278694/url-action-parameters)

或者如果你只是想提交它，在这种情况下你只需要：

```
<input type=submit value="submit" /> 
```

您已经有了要发布到您的操作的表单，因此提交按钮就足够了。

我是否正确理解了您的问题？

更新：对于要传递的值，只需在您的操作中传递一个参数，如下所示：

```
 <HttpPost()>
    Function TheColorNameFunction(colorName as String) As ActionResult 
```

MVC 的机制足够智能，可以从表单中的任何字段或值构建复杂的对象

你的动作应该这样写：

```
 @Url.Action("TheColorNameFunction", "Home", "green") 
```

# entity-framework - 您的 SQL 语句的某些部分嵌套得太深

> ID：13442065
> 
> 赞同：0
> 
> 时间：2012-11-18T16:31:45.730
> 
> 标签：entity-framework, linq-to-entities

我有以下代码

```
[WebGet]
        public Bid GetHighestBidInOpenAuctions(int auctionEventId)
        {
            var auctionEvent = CurrentDataSource.AuctionEvents.Where(x => x.Id == auctionEventId).FirstOrDefault();
            var auctionIds = CurrentDataSource.Auctions.Where(x => x.AuctionEventId == auctionEventId && x.Ends > DateTime.UtcNow).Select(x => x.Id).ToList();

            var bids = CurrentDataSource.Bids.Where(x => auctionIds.Any(t => t == x.AuctionId));

            // If the auction Event has not yet started or there are no bids then show auction with high pre-sale estimate.
            if (bids.Count() == 0 || auctionEvent.Starts > DateTime.UtcNow)
            {
                return null;
            }

            var highestBid = bids.Where(b => b.IsAutobid == false).OrderByDescending(b => b.Amount).FirstOrDefault();

            return highestBid;
        } 
```

此行引发以下异常

```
if (bids.Count() == 0 || auctionEvent.Starts > DateTime.UtcNow)

Some part of your SQL statement is nested too deeply. Rewrite the query or break it up into smaller queries. 
```

怎么了？

**编辑**

我试过这样做

```
IQueryable<Bid> bids = CurrentDataSource.Bids.Where(b => 0 == 1);
            foreach(var auctionId in auctionIds)
            {
                int id = auctionId;
                bids = bids.Union(CurrentDataSource.Bids.Where(b => b.AuctionId == id));
            } 
```

但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:29:04.800

不要使用子查询，而是尝试将出价查询替换为：

```
var bids = CurrentDataSource.Bids.Where(b => b.AuctionEventId == auctionEventId
                && b.Auction.AuctionEvent.Starts > DateTime.UtcNow
                && b.Auction.Ends > DateTime.UtcNow);

if (bids.Count() == 0
{
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:25:24.010

似乎当您的数据库中有太多东西时，您会收到此错误（在我的情况下为 auctionIds），因为生成的 sql 嵌套太深。为了解决这个问题，我想出了这个解决方案。如果有人可以做得更好，那就去做。我发布这个是因为将来有人可能会遇到这个错误，如果他们这样做，在没有更好的解决方案的情况下，这可能会对他们有所帮助。

```
 [WebGet]
        public Bid GetHighestBidInOpenAuctions(int auctionEventId)
        {
            /* 
             * This method contains a hack that was put in under tight time constraints.  The query to
             * get bids for all open auctions used to fail when we had a large number of open auctions.
             * In this implementation we have fixed this by splitting the open auctions into groups of 20
             * and running the query on those 20 auctions and then combining the results.
            */

            const int auctionIdSegmentSize = 20;
            var auctionEvent = CurrentDataSource.AuctionEvents.Where(x => x.Id == auctionEventId).FirstOrDefault();
            var auctionIds = CurrentDataSource.Auctions.Where(x => x.AuctionEventId == auctionEventId && x.Ends > DateTime.UtcNow).Select(x => x.Id).ToList();

            int numberOfSegments = auctionIds.Count/auctionIdSegmentSize;
            if (auctionIds.Count % auctionIdSegmentSize != 0)
                numberOfSegments++;

            var bidsList = new List<IQueryable<Bid>>();
            for (int i = 0; i < numberOfSegments; i++)
            {
                int start = i*auctionIdSegmentSize;
                int end;
                if (i == numberOfSegments - 1)
                {
                    end = auctionIds.Count - 1;
                }
                else
                {
                    end = ((i + 1)*auctionIdSegmentSize) - 1;
                }

                var subList = auctionIds.GetRange(start, (end - start) + 1);
                bidsList.Add(CurrentDataSource.Bids.Where(b => subList.Any(id => id == b.AuctionId)));
            }

            // If the auction Event has not yet started or there are no bids then show auction with high pre-sale estimate.
            if (IsBidsCountZero(bidsList) || auctionEvent.Starts > DateTime.UtcNow)
            {
                return null;
            }

            var highestBid = FindHighestBid(bidsList);

            return highestBid;
        }

        private Bid FindHighestBid(List<IQueryable<Bid>> bidsList)
        {
            var bids = new List<Bid>();
            foreach (var list in bidsList)
            {
                bids.Add(list.Where(b => b.IsAutobid == false).OrderByDescending(b => b.Amount).FirstOrDefault());
            }

            bids.RemoveAll(b => b == null);

            if (bids.Count == 0)
                return null;

            bids.Sort(BidComparison);

            return bids[0];
        }

        private int BidComparison(Bid bid1, Bid bid2)
        {
            if (bid1.Amount < bid2.Amount)
                return 1;
            if (bid1.Amount > bid2.Amount)
                return -1;
            return 0;
        }

        private bool IsBidsCountZero(List<IQueryable<Bid>> bidsList)
        {
            int count = 0;
            foreach (var list in bidsList)
            {
                count += list.Count();
            }

            return count == 0;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T06:32:49.650

问题在于`auctionIds.Any(t => t == x.AuctionId)`EF 无法创建正确的查询。您可以将其更改为：

```
var bids = CurrentDataSource.Bids.Where(x => auctionIds.Contains(x.AuctionId)); 
```

EF可以将auctionIds转换为集合并传递给DB。

# r - 文献中引用的 plot.predict() 或 predict.plot() 函数，但不再存在

> ID：13442067
> 
> 赞同：1
> 
> 时间：2012-11-18T16:32:12.247
> 
> 标签：r, statistics

我正在尝试使用`predict.plot`or `plot.predict`（我在各种网站上都看到过它们都被引用，但我不知道哪个是正确的）。然而，在 R 中，这些都不是有效的函数。我不知道我是否遗漏了一个包，或者我使用的源在引用的函数方面是否已经过时。

[本站](http://alumni.media.mit.edu/~tpminka/courses/36-350.2001/lectures/day30/)正在使用该功能

它很老了。熟悉统计数据的人可以帮我弄清楚如何使用最新版本的 R 来做到这一点，或者帮我弄清楚如何开始`predict.plot`/`plot.predict`工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T16:37:29.820

这是一个用户定义的函数。您链接到的课程的作者在线提供了它： [链接到 R 脚本](http://alumni.media.mit.edu/~tpminka/courses/36-350.2001/code/regress.r)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:02:26.440

R 中函数的 S3 调度系统检查第一个参数的类，然后调用名为 的函数`func.class`。在这种情况下，作者定义了几个`plot.predict`函数：`predict.plot.data.frame`，`predict.plot.lm`，`predict.plot.formula`然后根据参数列表中（第一个）的类为它们提供参数。plot.predict 函数就是这样的：

```
predict.plot <- function(object, ...) UseMethod("predict.plot") 
```

“好东西”在 Roland 提供的链接中的其他三个功能中。我确实认为作者在泛型函数的名称中使用点有点令人困惑。有人可能期望会有一个类“绘图”，其中有一个通用函数`predict`，但这里的情况并非如此，尽管您可能会发现只需键入以下内容很有趣：`methods(predict)`。在该网站上加载了 R 脚本之后您可以使用以下方法找到这些不同的功能：

```
 methods(predict.plot)
#[1] predict.plot.data.frame predict.plot.formula    predict.plot.lm 
```

# ruby-on-rails - 遍历数据库中的每条记录 - Ruby on Rails / ActiveRecord

> ID：13442073
> 
> 赞同：33
> 
> 时间：2012-11-18T16:33:07.880
> 
> 标签：ruby-on-rails, database, loops, rails-activerecord

n00b 问题。我正在尝试遍历数据库中的每个用户记录。伪代码可能看起来像这样：

```
def send_notifications

        render :nothing => true

        # Randomly select Message record from DB
        @message = Message.offset(rand(Message.count)).first

        random_message = @message.content

        @user = User.all.entries.each do
            @user = User.find(:id)

            number_to_text = ""

            @user.number = number_to_text #number is a User's phone number
            puts @user.number

        end

    end 
```

有人可以告诉我这样做的最佳方法吗？对语法的一点帮助也会很棒:)

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-18T17:53:51.287

这是遍历所有 User 的正确语法：

```
User.all.each do |user|
  #the code here is called once for each user
  # user is accessible by 'user' variable

  # WARNING: User.all performs poorly with large datasets
end 
```

要提高性能并减少负载，请使用`User.find_each`（[请参阅 doc](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each)）而不是`User.all`. 请注意，使用`find_each`会失去排序的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-30T10:13:23.070

也是出于相同目的可能的单线：

```
User.all.map { |u| u.number = ""; puts u.number } 
```

# c# - 我在哪里可以找到类似于 java doc 中的 Microsoft Kinect API 列表？

> ID：13442074
> 
> 赞同：-3
> 
> 时间：2012-11-18T16:33:19.673
> 
> 标签：c#, api, sdk, kinect

我在哪里可以找到适用于 C# 的 Microsoft Kinect SDK API 列表，类似于 Java Docs 中提供的列表，其中包含 SDK 中的所有类、包...等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:46:04.250

试试这里，谷歌搜索 kinect microsoft sdk msdn 应该已经足够找到它了。

[http://msdn.microsoft.com/en-us/library/microsoft.kinect.aspx](http://msdn.microsoft.com/en-us/library/microsoft.kinect.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:45:20.813

C++ 和 C#/VB.NET 参考文档：http: [//msdn.microsoft.com/en-us/library/jj572480.aspx](http://msdn.microsoft.com/en-us/library/jj572480.aspx)

# windows-7 - 使用 Excel 2013 VBA，我可以将我的用户窗体与 Windows 7 或更高版本中的其他应用程序类似吗？

> ID：13442080
> 
> 赞同：1
> 
> 时间：2012-11-18T16:34:00.330
> 
> 标签：windows-7, excel, windows-8, userform, vba

使用 Windows 7 或更高版本时，您可以将应用程序移动到屏幕的左边框，它将停靠在屏幕左侧，占据屏幕宽度的一半；移动到屏幕右侧的行为与左侧相同。移动到屏幕顶部，将应用程序重新调整为整个窗口。

我有一个用户表单，当它处于活动状态时（Application.Visible = False）将应用程序可见性设置为 false，以便能够使用浏览器填写表单数据。

能够像浏览器窗口一样动态地重新调整用户窗体的大小，这样我就可以将浏览器放在屏幕的一侧，将用户窗体放在另一侧。

# python - python中的纯文本格式

> ID：13442082
> 
> 赞同：-2
> 
> 时间：2012-11-18T16:34:14.880
> 
> 标签：python

我正在开发一个使用 python 制作新文本文件的程序，我想知道在使用 python 写入 .txt 文件时是否可以进行一些简单的文本格式化。例如，我想在一些单词下划线，在某些情况下，使用粗体文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:36:10.150

`.txt`文件没有格式。您必须使用 HTML 或其他格式的富文本/标记。

HTML 示例：

```
This is <b>bold</b> text. This is <u>underlined</u>. 
```

# jquery - 不同屏幕尺寸上的滑块全宽问题

> ID：13442087
> 
> 赞同：0
> 
> 时间：2012-11-18T16:35:04.863
> 
> 标签：jquery, css, wordpress

我的网站上有一个全宽的 jquery 滑块，不幸的是，我在该滑块中的图像显示在不同的位置，具体取决于屏幕的大小。

有谁知道我可以在哪里解决这个问题？

我使用 WordPress 作为 CMS，插件名为“LayerSlider WP”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:58:53.023

指向网站和代码的链接将非常有帮助。听起来像一个全宽滑块，你需要做的是弄清楚图像的尺寸，即960 x 1080，然后使用百分比相应地设置滑块的宽高比，然后设置滑块的位置要绝对。添加代码，我将能够为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:02:36.467

您的位置的问题是您在图像上放置的内联样式：

```
style="position: absolute; top: 24px; left: 326px... 
```

这与您的响应式布局相冲突。

# bluetooth-lowenergy - 由于 android.os.DeadObjectException 而未调用 onDiscoverCharacteristicResults

> ID：13442091
> 
> 赞同：2
> 
> 时间：2012-11-18T16:35:39.047
> 
> 标签：bluetooth-lowenergy, motorola-droid

使用 motorola ICS R2 附加组件中提供的 sample_apk_icsActivity 应用程序，我能够成功连接到运行 HRM 配置文件的 BLE 外围设备......然后我创建新的 BluetoothGattService 对象，此时似乎开始发现特征...... ..

使用数据包嗅探器，一切看起来“正常”......在特征发现过程结束时——当我希望通过我的 IBluetoothGattProfile.Stub 进行回调时，我看到来自底层 BluetoothService 的日志消息报告了 DeadObjectException。 ...从之前的日志消息来看，服务似乎确实找到了一些特征，并准备给我回电....

再次，我一直在“按原样”使用摩托罗拉示例应用程序......

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T12:50:07.380

您可能有并发问题。你从哪里得到盖特？如果你把他送到另一个线程，他可能已经在原来的线程中被破坏了。

# php - PHP 邮件程序无法正常运行

> ID：13442092
> 
> 赞同：-2
> 
> 时间：2012-11-18T16:35:49.277
> 
> 标签：php, html

我试图邮寄的代码给我带来了问题。我希望有人能够选择一个单选按钮来确定要邮寄给谁（2 个选项）。目前，如果没有选择单选按钮，邮件将发送到两个地址 - 这有效。如果您选择其中一个按钮，邮件不会发送到目标。以下是相关代码。

```
<form action="code/submitemailCopy.php" method="post" name="submitform" id="submitform">
<p>
<label>
<input type="radio" name="toaddress" value="tim" id="tim">Tim/label>
<label>
<input type="radio" name="toaddress" value="terry" id="terry">Terry</label>

$mailto = $_POST['toaddress'];
if ($mailto == 'terry')
    $mailto = 'example1@example.com';
elseif ($mailto == 'tim')
    $mailto = 'example2@example.com';
else
    $mailto = 'example1@example.com' . ',';                 
    $mailto .= 'example2@example.com; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:41:41.680

您需要使用代码块。你的最后一行总是被执行，所以你最终得到`$mailto`像`example1@example.comexample2@example.com`or`example2@example.comexample2@example.com`

```
if ($mailto == 'terry') {
    $mailto = 'example1@example.com';
} elseif ($mailto == 'tim')  {
    $mailto = 'example2@example.com';
} else {
    $mailto = 'example1@example.com' . ',';                 
    $mailto .= 'example2@example.com;
} 
```

# php - 如何找到高质量的图像 PHP

> ID：13442093
> 
> 赞同：-3
> 
> 时间：2012-11-18T16:35:56.000
> 
> 标签：php, algorithm

我试图找到如何从用户提供的图像集中找到质量最好的图像（具有良好的颜色 + 亮度）。

我正在使用 JPGE

现在我只是在寻找高分辨率的照片，但有时它会显示具有高分辨率的不良照片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:41:12.207

[这个问题](https://stackoverflow.com/questions/13436038/gd-imagick-code-to-find-if-an-image-is-well-focussed-or-not/13436065#13436065)和答案可能与您的要求有关。实际上，如果您打算自己实施过滤器，则需要确切地问自己您认为什么是“好”图像。

昨天的海报对他的想法有一个非常不错的想法。他想消除模糊的图像，这很容易使用边缘检测器完成。在您的情况下，亮度也很容易做到 - 计算图像中亮度的变化，并将其与预定义的值进行比较。

# macos - 用于 mac os x 的 CMake 2.8.10 安装无法创建符号链接

> ID：13442096
> 
> 赞同：3
> 
> 时间：2012-11-18T16:36:36.280
> 
> 标签：macos, cmake

我正在使用 OS X Lion 10.7.5 在我的 Mac Book pro 中更新 Cmake。Cmake的旧版本是2.8.8，新版本是2.8.10。当我运行到安装过程快要结束时，安装程​​序提示创建一个符号链接到 /usr/bin 的几个工具。单击继续后，安装程序会抛出一个异常，提示无法创建符号链接。在此过程之前，我已经将旧版本的 Cmake 丢弃，然后使用 finder 我在机器上没有更多的 Cmake 文件。知道如何成功完成安装吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-06T20:08:02.310

就我而言，尝试在 OSX 10.8.5 上安装 cmake 2.8.12 失败。直接从 cmake.org 下载的 cmake-2.8.12.2-Darwin-universal.dmg 安装程序在运行安装后脚本时会挂起。我找到并删除了 willyMon 描述的所有符号链接，但它仍然会挂起，需要我诉诸 ps + kill 来解除安装程序的挂起。

对我来说，通过 brew 安装就可以了：

```
brew install cmake 
```

它在 /usr/local/bin 中顺利安装了 2.8.12.2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-11T05:41:24.917

在终端中打开 Applications 文件夹

```
cd /
cd Applications/ 
```

然后做：

```
sudo bash
CMake.app/Contents/bin/cmake-gui 
```

然后从 CMake GUI 运行：“Tools->Install For Command Line Use”

对我来说没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T16:45:42.457

好的，在深入寻找这个错误之后，我发现我错过了一些简单的细节，这是解决问题的关键。Cmake 2.8.10.1 的 Cpack 安装程序尝试创建指向此文件的符号链接：

-cmake-gui -cmakexbuild -cmake -cpack -ctest

因此，我从终端删除了旧版本创建的所有以前的符号链接，然后我再次运行安装程序，安装成功完成，没有任何错误或警告。

# java - Java信号量同步打印到屏幕

> ID：13442100
> 
> 赞同：1
> 
> 时间：2012-11-18T16:37:14.460
> 
> 标签：java, multithreading

我目前正忙于做一些功课，想知道是否有人可以提供帮助-

我必须在java中使用信号量来同步来自2个线程的打印字母——一个打印“A”，一个打印“B”。我不能连续打印超过 2 个相同的字符，所以输出应该看起来像

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

目前我有 3 个信号量，一个二进制互斥体设置为 1，和一个计数信号量，我的线程类看起来像这样 -

```
public void run() {
    while (true) {
        Time.delay(RandomGenerator.integer(0,20));
        Semaphores.mutex.down ();
        System.out.println (produce());

          if (printCount > 1)
          { printCount = 0;
                Semaphores.mutex.up ();
                Semaphores.printB.up();
          }
    } 
}
public String produce() {
    printCount++;
    return "A";
}

public void run() {
    while (true) {
        Time.delay(RandomGenerator.integer(0,20));
        Semaphores.mutex.down ();
        System.out.println (produce());

          if (printCount > 1)
          { printCount = 0;
                Semaphores.mutex.up ();
                Semaphores.printA.up();
          }
    } 
}
public String produce() {
    printCount++;
    return "B";
} 
```

然而，无论我尝试什么，要么死锁，要么它似乎最多只能连续打印 2 个，但似乎总是不时地连续打印 3 个！

非常感谢任何帮助，如果可能的话，不要看代码或任何东西，只要几个指针:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:47:42.773

You appear to be setting the printA and printB semaphores up without ever setting them down. If they are attempted to be set up multiple times, they would be waiting on themselves.

* * *

To answer the comment of "Where would I set them down?"

I am not quite sure, to be honest. The only thing I could imagine is if the professor is trying to exploit the fact that (in java) you can release a semaphore more times than originally acquired.

如果是这样，那么该模式将是两个信号量，一个用于生产者“B”，一个用于生产者“B”。他们的每个生产方法都将在自己的信号量上获取并在对方生产者的信号量上释放。因此，信号量计数将是生产者在没有从其他生产者相应发布的情况下获取的次数，但这种方法与信号量的概念意图不一致，取决于 Java 特定的实现，并且完全让我感到恶心。

我会尽快使用执行节流的第三个管理器或消费者线程或通过对共享整数使用互锁操作来实现这一点。无论哪种方式，不使用信号量。如果我们想确保只有三个短暂的生产者自主执行，信号量将很有用

# android - OnCreate 错误 - 图库测试 (4.0.1)

> ID：13442102
> 
> 赞同：2
> 
> 时间：2012-11-18T16:37:39.350
> 
> 标签：android, android-activity, gallery, oncreate

这是我的第一个问题，但这个论坛在过去的两个月里帮助了我很多！！！

我试图在我的 Android 应用程序上创建一个“画廊”，我为 1 个画廊解决了这个问题，但是在我尝试制作更多“画廊”之后，我的“OnCreate”中出现错误。这是我的 onCreate：

```
 public void onCreate(Bundle savedInstanceState) {
    //try { 
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create_combination);

            Gallery h = (Gallery) findViewById(R.id.gallery_head);
            h.setAdapter(new ImageAdapter_head(this));

            h.setOnItemClickListener(new OnItemClickListener() {    

            public void onItemClick(AdapterView parent, View v, int position, long id) {
            Toast.makeText(Create_combination.this, "" + position,
                            Toast.LENGTH_SHORT).show();
                }
            }); 
```

我做了3次（3个画廊）

我的班级“ImageAdapter：head”：

```
 public class ImageAdapter_head extends BaseAdapter {
int mGalleryItemBackground;
private Context hContext;

private Integer[] mImageIds_head = { R.drawable.layout, R.drawable.ic_launcher,
R.drawable.test2, R.drawable.layout, R.drawable.layout,
R.drawable.layout, R.drawable.layout };

public ImageAdapter_head(Create_combination create_combination) {
    // TODO Auto-generated constructor stub
}
public void ImageAdapter(Context h) {
hContext = h;

TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
mGalleryItemBackground = a.getResourceId(
R.styleable.Gallery1_android_galleryItemBackground , 0);

a.recycle();
}

public int getCount() {
return mImageIds_head.length;
//return mImageIds_upper.length;
//return mImageIds_lower.length;
}

public Object getItem(int position) {
return position;
}

public long getItemId(int position) {
return position;
}

ImageView h = new ImageView(hContext);

@SuppressWarnings("deprecation")
public View getView(int position, View convertView, ViewGroup parent) {
h.setImageResource(mImageIds_head[position]);
h.setLayoutParams(new Gallery.LayoutParams(150, 100));
h.setScaleType(ImageView.ScaleType.FIT_XY);
h.setBackgroundResource(mGalleryItemBackground);

return (h);

}

} 
```

这是我的错误：

```
 Thread [<1> main] (Suspended (exception RuntimeException))  
<VM does not provide monitor information>   
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1956    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1981 
ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 123    
ActivityThread$H.handleMessage(Message) line: 1147  
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 4424    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 784  
ZygoteInit.main(String[]) line: 551 
NativeStart.main(String[]) line: not available [native method]  
    Thread [<10> Binder Thread #2] (Running)    
    Thread [<9> Binder Thread #1] (Running) 
    Daemon Thread [<8> FinalizerWatchdogDaemon] (Running)   
    Daemon Thread [<7> FinalizerDaemon] (Running)   
    Daemon Thread [<6> ReferenceQueueDaemon] (Running)  
    Thread [<11> AsyncTask #1] (Running) 
```

日志猫：

```
11-18 18:24:07.371: I/ActivityManager(159): START {cmp=in.dressin/com.example.hellogallery.Create_combination} from pid 1890
11-18 18:24:07.511: D/dalvikvm(159): GC_CONCURRENT freed 552K, 20% free 9123K/11335K, paused 3ms+7ms
11-18 18:24:07.901: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:07.901: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:07.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:07.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:08.401: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:08.401: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:08.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:08.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:08.901: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:08.901: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:08.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:08.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:09.401: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:09.401: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:09.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:09.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:09.911: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:09.911: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:09.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:09.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:10.411: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:10.411: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:10.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:10.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:10.901: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:10.901: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:10.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:10.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:11.401: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:11.401: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:11.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:11.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:11.901: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:11.901: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:11.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:11.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:12.431: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:12.431: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:12.441: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:12.441: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:12.911: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:12.911: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:12.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:12.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:13.401: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:13.401: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:13.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:13.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:13.901: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:13.901: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:13.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:13.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:14.401: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:14.401: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:14.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:14.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:14.901: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:14.901: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:14.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:14.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:15.401: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:15.401: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:15.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:15.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:15.911: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:15.911: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:15.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:15.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:16.411: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:16.411: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:16.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:16.411: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:16.901: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:16.901: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:16.911: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:16.911: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:17.401: I/Process(159): Sending signal. PID: 1890 SIG: 3
11-18 18:24:17.401: I/dalvikvm(1890): threadid=3: reacting to signal 3
11-18 18:24:17.401: W/ActivityManager(159): Launch timeout has expired, giving up wake lock!
11-18 18:24:17.411: D/dalvikvm(1890): threadid=1: still suspended after undo (sc=1 dc=1)
11-18 18:24:17.421: I/dalvikvm(1890): Wrote stack traces to '/data/anr/traces.txt'
11-18 18:24:17.421: W/ActivityManager(159): Activity idle timeout for ActivityRecord{411fec30 in.dressin/com.example.hellogallery.Create_combination}
11-18 18:24:20.261: I/WindowManager(159): MediaPlayer.is not PlayingVideo
11-18 18:24:22.971: I/WindowManager(159): MediaPlayer.is not PlayingVideo
11-18 18:24:28.741: I/InputDispatcher(159): Application is not responding: AppWindowToken{412958e0 token=Token{413a5178 ActivityRecord{411fec30 in.dressin/com.example.hellogallery.Create_combination}}}.  5001.1ms since event, 5000.8ms since wait started
11-18 18:24:28.741: I/WindowManager(159): Input event dispatching timed out sending to application AppWindowToken{412958e0 token=Token{413a5178 ActivityRecord{411fec30 in.dressin/com.example.hellogallery.Create_combination}}}
11-18 18:24:33.741: I/InputDispatcher(159): Dropped event because it is stale. 
```

请帮我 ：）

问候，菲利克斯！

# c - 交流程序中的总线错误 10

> ID：13442104
> 
> 赞同：3
> 
> 时间：2012-11-18T16:37:50.193
> 
> 标签：c, string

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)
> [为什么这个程序会给出分段错误？](https://stackoverflow.com/questions/3735092/why-does-this-program-give-segmentation-fault)

这是代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void reverse(char *c){
    int len = strlen(c);
    char tmp;
    int i;
    for(i = 0; i < len; i++){
        tmp = c[len-1-i];
        c[len-1-i] = c[i];
        c[i] = tmp;
    }
}

int main(){
    char *s = "antonio";
    //printf("%zd\n", strlen(s));
    reverse(s);
    printf("%s\n", s);
    return 0;
} 
```

问题在于反向（char *c），它需要一个字符串广告来反转它，但我不明白哪里出错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T16:39:40.527

这里有两个错误：

1)

您正在尝试更改字符串文字，这会导致未定义的行为，在您的情况下表现为总线错误。

改变

```
char *s = "antonio"; 
```

到

```
char s[] = "antonio"; 
```

2)

此外，您正在为整个字符串长度运行循环计数器：

```
for(i = 0; i < len; i++) 
```

这样你会得到原来的字符串。您想要的只是将一半的字符与另一半交换：

```
for(i = 0; i < len/2; i++) 
```

# java - javafx编程中的时钟动画

> ID：13442106
> 
> 赞同：2
> 
> 时间：2012-11-18T16:38:03.577
> 
> 标签：java, javafx-2, javafx, netbeans-7

我是 john，我是 javafx 编程的新手。我从这段代码中有几个我不明白的问题（这段代码用于创建动画时间）：

查看此链接了解详细信息： [查看此链接](http://blog.crisp.se/2012/09/24/oscarlantz/analog-clock-revisited#comment-4136)

第一：有两个源代码，我应该怎么做？我真的是 javafx 编程的初学者，我应该创建新包或新类还是什么？我目前使用的是 NET BEANS 7.2？

第二：我选择新类而不是将您的代码复制到我的“JAVAFX 应用程序项目”中（对吗？），而不是我有 2 个文件，第一个是**analogclock.java**，第二个是**analogclockwork.java**，而不是我得到3 个错误，

在analogclock.java中我发现这段代码有错误

```
- clockwork.hourHandAngle()
- clockwork.minuteHandAngle()
- clockwork.minuteHandAngle()

error -> "Cannot find symbol, symbol : method minuteHandAngle()
location: variable clockwork of type AnalogClock
----" 
```

你能帮助我吗？我真的需要你的帮助来完成我的拼贴画。
**谢谢你的帮助，我真的很感激。**

注意：我想我在同一个包中创建类（在我的例子中是 javafxapplication 5 包）对不起，我在 javafx 编程方面真的很新，实际上我从不使用 netbeans 7.2，我从我的讲座中得到了这个任务。我不理解您的第 3、4、5 点，尤其是第 4 点，这是我的项目属性：

```
- AnalogClock
  - Source Packages
    - AnalogClock
      - AnalogClock.java
    - se.crisp.clock
      - AnalogClockwork.java
  -libraries
    - Default JavaFx Platform 
```

那正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:08:08.603

*我想我在同一个包中创建类（在我的例子中是 javafxapplication 5 包）* - 你不应该那样做。

似乎您错过了包裹中的课程。

做这个 ：-

1.  新建`Project`让我们为它命名`AnalogClock`
2.  在源包下创建新包并命名`se.crisp.clock`（来自上面的示例）
3.  将所有类一一复制，添加到上述包下。使用相同的类名。
4.  在项目->属性->库中添加`javafx`相关的jar
5.  清理并构建和运行

# android - Eclipse 无法识别文件 ID

> ID：13442111
> 
> 赞同：0
> 
> 时间：2012-11-18T16:39:36.740
> 
> 标签：android, eclipse

我正在尝试在应用程序中创建一个从一个活动到另一个活动的按钮。`resource/values/strings.xml`为此 ID 创建的文档：

```
<string name="button1name"> CID </ string> 
```

但是当我插入一行时，文档 GurovPictures.java（这是我的主要活动）：

```
Button but1 = (Button) findViewById (R.id.button1); 
```

这个“button1”不会像“editText1”那样变成蓝色。你碰巧知道如何解决它吗？只是互联网没有找到条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:01:51.347

如果您创建了一个字符串资源，即

```
 <string name= ... 
```

然后你通过字符串字段引用它

```
 String button1 = getString(R.string.button1name); 
```

# php - 告诉搜索引擎该页面不存在

> ID：13442112
> 
> 赞同：1
> 
> 时间：2012-11-18T16:39:37.387
> 
> 标签：php, http-status-code-404, search-engine-bots

我检查了日志，发现搜索引擎在我的网站上访问了很多虚假 URL。它们很可能是在很多链接被更改之前发生的，即使我进行了 301 重定向，一些链接也以非常奇怪的方式被更改，并且无法被我的 .htaccess 文件识别。

所有请求都由 index.php 处理。如果由于 URL 错误而无法创建响应，则会显示自定义错误页面。简化代码 index.php 看起来像这样

```
try {
  $Request = new Request();
  $Request->respond();
} catch(NoresponseException $e) {
  $Request->presentErrorPage();
} 
```

我刚刚意识到这个页面返回一个状态 200 告诉机器人该页面是有效的，即使它不是。

在 catch 语句中添加带有 404 的标头是否足以告诉机器人停止访问该页面？

像这样：

```
header("HTTP/1.0 404 Not Found"); 
```

当我测试它时它看起来不错，但我担心 SE 机器人（可能还有用户代理）会感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:43:11.987

你快到了。这个想法是正确的——你想给他们一个 404。但是，只有一点点更正：如果客户端使用 HTTP/1.1 查询而你使用 1.0 回答，一些客户端会感到困惑。

解决方法如下：

```
header($_SERVER['SERVER_PROTOCOL']." 404 Not Found"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:14:51.080

[行为良好的抓取工具](http://www.robotstxt.org/)会尊重您网站顶层的 robots.txt。如果您想排除爬虫，那么@SalmanA 的响应将起作用。示例 robots.txt 文件如下：

```
User-agent: *
Disallow: /foo/*
Disallow: /bar/*
Disallow: /hd1/* 
```

它需要所有人都可以阅读。请注意，这不会让用户离开页面，只是一个尊重 robots.txt 的机器人，大多数人都会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:44:48.510

当 SE 机器人看到这个时，他们确实会感到困惑**：**

```
HTTP/1.1 200 OK

<h1>The page your requested does not exist</h1> 
```

或这个：

```
HTTP/1.1 302 Object moved
Location: /fancy-404-error-page.html 
```

[这里](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=181708)解释：

> 为不存在的页面返回 404 或 410 以外的代码（或将用户重定向到另一个页面，例如主页，而不是返回 404）可能会有问题。首先，它告诉搜索引擎该 URL 处有一个真实页面。因此，该 URL 可能会被抓取，并且其内容可能会被编入索引。由于 Googlebot 在不存在的网页上花费的时间，您的唯一网址可能不会很快被发现或访问频率不高，并且您网站的抓取覆盖率可能会受到影响（此外，您可能不希望您的网站在搜索中排名很好查询*文件未找到*）。

您关于以编程方式发送 404 标头的想法是正确的，它指示搜索引擎他们请求的 URL 不存在，他们不应该尝试对其进行爬网和索引。设置响应状态的方法：

```
header($_SERVER["SERVER_PROTOCOL"] . " 404 Not Found");

header(":", true, 404);  // this is used to set a header AND modify the http response code
                         // ":" is used as a hack to avoid specifying a real header

http_response_code(404); // PHP >= 5.4 
```

# selenium - Selenium webdriver - click() 成功但实际上并没有发生

> ID：13442114
> 
> 赞同：4
> 
> 时间：2012-11-18T16:39:57.170
> 
> 标签：selenium, webdriver, selenium-webdriver, selenium-grid

我使用 selenium 网格（在 4 个浏览器上运行测试：FF13、FF16、IE9 和 chrome。每个浏览器都在不同的机器上。在测试的相关部分，我找到一个可点击的元素并点击它。在 FF13、IE9 和chrome 它工作得很好：找到并点击了元素。在 FF16 上，找到了该元素，并且 webdriver “声称”它点击了它，但是按钮的操作（更改页面上表格的布局）没有不会发生。

注意：我使用 2.25 版谢谢，Tizki

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:38:03.653

嗯...我会使用像 js 注入这样的作弊方法（如果包括对 jQuery 的支持）。例如

```
String cssSelector="...blablabla....";
    JavascriptExecutor js = (JavascriptExecutor) driver;
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("var x=$(\'"+cssSelector+"\');");
    stringBuilder.append("x.click()");
    js.executeScript(stringBuilder.toString()); 
```

**第二种方法（解决方案）：** 尝试使用DOM模型找到要单击的元素`document.getElementsByTagName` -这将返回一个找到的元素数组，您可以使用Firefox中的命令行轻松找到所需的元素。所以你的元素就像：

```
document.getElementsByTagName[n] 
```

n 在哪里 - 你的元素在找到的数组中的顺序`document.getElementsByTagName`

下面的方法代码我使用参数 tagName - 您查找元素的标签名称，而 argNum 是一个数字，您应该从数组的整个长度中减去它`document.getElementsByTagName`以获得 n - 您的元素的顺序：

```
public void jsDirectClickUsingDOM_GEBTagName(String tagName,int argNum) throws IOException {
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
 stringBuilder.append("document.getElementsByTagName(\'"+tagName+"\')[document.getElementsByTagName(\'"+tagName+"\').length-"+argNum+"].click()");
        js.executeScript(stringBuilder.toString());
    } 
```

无论如何这应该有效。希望它对你来说很清楚:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:50:25.813

`webdriver`我认为with的兼容性存在问题`FF16`。`FF 13.0.1`由于同样的原因，我被困住了。顺便说一句，我找不到任何 Firefox 和 webdriver 之间的兼容性矩阵，但是在多次尝试在不同版本的 Firefox 上运行测试之后，我决定坚持使用真正有效的那个。

# java - 公共静态 MyClass myMethod() 的 GetStaticMethodId 方法签名

> ID：13442116
> 
> 赞同：10
> 
> 时间：2012-11-18T16:40:35.693
> 
> 标签：java, android, android-ndk

此方法的方法签名（与 GetStaticMethodId 一起使用）是什么：-

```
public static MyView newMyView() {
    return new MyView(RhodesService.getInstance().getContext(), null);
} 
```

是`"()Lcom/nativestuff/MyView;"`吗？（如果包是 com.nativestuff？）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-18T16:54:05.173

是`()Lcom/nativestuff/MyView;`的是正确的。一般来说：

*   `B`= 字节
*   `C`= 字符
*   `D`= 双倍
*   `F`= 浮动
*   `I`= 整数
*   `J`= 长
*   `S`= 短
*   `V`= 无效
*   `Z`= 布尔值
*   `L*fully-qualified-class*`= 完全合格的班级
*   `[*type*`= 类型数组
*   *（参数类型）返回类型*= 方法类型。如果没有参数，请使用空参数类型：`()`. 如果返回类型是`void`（或构造函数）使用*（参数类型）V*。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-09T10:33:44.840

()Lcom/nativestuff/MyView 是正确的。

您还可以通过以下方式找到签名

```
javap -s -classpath bin/classes com.nativestuff.MyView 
```

# c# - 在没有 ILSpy 的情况下反编译 .NET 程序集

> ID：13442117
> 
> 赞同：1
> 
> 时间：2012-11-18T16:40:43.710
> 
> 标签：c#, .net, decompiling

**是否可以在没有**外部可执行文件（如 ILSpy）的情况下在 C# 中反编译 .NET程序集？可以在我的程序中使用的库会很棒。你能给我任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T15:51:48.430

我猜你想要它的源代码，并集成到你的应用程序中。您可以在下面查看 2 个项目：

*   Mono.cecil：[https ://github.com/jbevain/cecil](https://github.com/jbevain/cecil)
*   ILSpy：[https ://github.com/icharpcode/ILSpy](https://github.com/icsharpcode/ILSpy)

# c# - 从html源文件中提取文本值

> ID：13442119
> 
> 赞同：-1
> 
> 时间：2012-11-18T16:40:47.970
> 
> 标签：c#, asp.net, lambda

在此代码中，var`TempTxt`将 Html 正文内容保存为字符串，我如何 使用 lambda 语法提取元素`<table>`或内部文本/ html？`<td>`

```
 public  string  ExtractPageValue(IWebDriver DDriver, string url="") 
    {
        if(string.IsNullOrEmpty(url))
        url = @"http://www.boi.org.il/he/Markets/ExchangeRates/Pages/Default.aspx";
        var service = InternetExplorerDriverService.CreateDefaultService(directory);
        service.LogFile = directory + @"\seleniumlog.txt";
        service.LoggingLevel = InternetExplorerDriverLogLevel.Trace;

        var options = new InternetExplorerOptions();
        options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;

        DDriver = new InternetExplorerDriver(service, options, TimeSpan.FromSeconds(60));
        DDriver.Navigate().GoToUrl(url);
        var TempTxt = DDriver.PageSource;
        return "";//Math.Round(Convert.ToDouble( TempTxt.Split(' ')[10]),2).ToString();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:00:22.707

如果您愿意尝试[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var table = doc.DocumentNode.SelectNodes("//table/tr")
               .Select(tr => tr.Elements("td").Select(td => td.InnerText).ToList())
               .ToList(); 
```

# android - 如何在android的闹钟应用程序上了解闹钟设置的时间？

> ID：13442120
> 
> 赞同：0
> 
> 时间：2012-11-18T16:41:01.697
> 
> 标签：android, alarm

我正在制作一个应用程序，它需要在 Android 手机的闹钟应用程序上设置闹钟的时间，以及设置闹钟的时间。

也就是说，如果我将 8.00 AM 的闹钟设置为 2.00 AM，那么我需要 2.00 AM 和 8.00 AM。

我如何获得这些数据？我想使用 Android 手机上的标准闹钟应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:11:40.847

基本上你不能，因为警报应用程序不是 Android 的一部分。它只是**随**Android 一起提供的，这有很大的不同。而且由于许多供应商定制了 Android 的发布版本，所以发布的应用程序各不相同，如果您有两个“Android 设备”，那么这些可用的内置应用程序列表可能会有很大差异（例如，参见 Nexus 库存与 HTC 的某些东西）。

但是，如果您仍然坚持需要挖掘特定应用程序（如警报应用程序）的**私有**数据，那么除非设备已root，否则您仍然无法这样做，因为每个应用程序都是沙盒化的，默认情况下不允许访问其他应用程序的数据.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:05:01.797

> 我如何获得这些数据？

抱歉，Android SDK 中没有这方面的内容。

> 我想使用 Android 手机上的标准闹钟应用程序。

有不止一个这样的应用程序。设备制造商可以并且确实用他们自己的替换 AOSP 闹钟应用程序。

# powershell - Powershell - 将字符串拆分为单独的组件

> ID：13442122
> 
> 赞同：2
> 
> 时间：2012-11-18T16:41:12.853
> 
> 标签：powershell

我正在编写一个脚本，它基本上会执行以下操作：

从文本文件中读取一些参数：

```
DriveLetter ThreeLetterCode ServerName VolumeLetter Integer 
```

例如。`W MSS SERVER01 C 1`

这些值恰好形成了一个文件夹目标`W:\MSS\`，以及一个遵循以下命名约定的文件名：

```
SERVERNAME_VOLUMELETTER_VOL-b00X-iYYY.spi - Where The X is the Integer above 
```

YI 需要稍后计算出来，因为这恰好是增量映像（备份）的值，我需要计算出最新的增量。

所以目前-> 计算文件中的行数，然后循环执行这么多行。

```
$lines = Get-Content -Path PostBackupCheck-Textfile.txt  | Measure-Object -Line
for ($i=0; $i -le $lines.Lines; $i++) 
```

在这个循环中，我需要做一个 Get-Content 来读取我当前正在查看的行，即第 0 行、第 1 行、第 2 行，因为我在开头编写的格式中会有多行并将行拆分为一个数组，其中文件的每个部分，如上面的命名约定所示，位于 a[0]、a[1]、a[2] 中。ETC

这样做的原因是，我需要对包含这些文件的文件夹进行排序，按日期查找最新文件，然后`_iXXX.spi`将其放入数组值中`a[X]`，这样我就有了一个完整的文件名来挂载。此值将替换`iYYY.spi`

这有点复杂，因为在按日期对所有内容进行排序之前，我还必须确保在使用 -Include 执行 Get-ChildItem 时，我只包括与从文本文件中输入的参数匹配的文件名：

所以，

```
SERVER01_C_VOL-b001-iYYY.spi and not anything else. 
i.e. not  SERVER01_D_VOL-b001-iYYY.spi 
```

然后从 Get-ChildItem -Include 上的排序中获取 iYYY 值，并将其放入适当的数组项中。

我真的不知道从哪里开始，所以任何想法都值得赞赏！

希望我已经解释得足够详细了。我还将代码放在 Pastebin 上：http: [//pastebin.com/vtFifTW6](http://pastebin.com/vtFifTW6)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:50:26.750

这不需要那么复杂。您可以从使用简单管道对文件中的行进行操作开始：

```
Get-Content PostBackupCheck-Textfile.txt |
  Foreach-Object {
    $drive, $folder, $server, $volume, [int]$i = -split $_
    ...
  } 
```

循环内的行在空格处分割当前输入行并分配适当的变量。这样就省去了在那里处理数组的麻烦。接下来的所有内容也需要在所述循环中。

然后，您可以构造文件名模式：

```
$filename = "$server_$drive_VOL-b$($i.ToString('000'))-i*.spi" 
```

您可以使用它来查找所有合适的文件并按日期对其进行排序：

```
$lastFile = Get-ChildItem $filename | sort LastWriteTime | select -last 1 
```

# c - timeval 结构返回的时间在 Ubuntu 中是错误的

> ID：13442123
> 
> 赞同：0
> 
> 时间：2012-11-18T16:41:31.603
> 
> 标签：c, select, timeval

我试图查看 select 函数监控文件所花费的时间，但是当我尝试打印它时，我得到一个很长的数字。这是代码：

```
struct timeval to;
to.tv_usec=25;
nfds=select(maxfds+1,&readset,NULL,NULL,&to);
printf("Time left for monitering the file descriptors %d\n",to); 
```

这种奇怪行为的原因是什么？这是代码与`to.tv_sec`.

![在此处输入图像描述](../Images/dbf7c207e62cf964f48a215362eff7c5.png)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:47:25.497

您不能以这种方式将结构传递给 printf() 。传递其成员之一或从它们创建的值。

如果您将 timeval 结构的定义追溯到特定于实现的细节，您可能会发现如下内容：

```
struct timeval
  {
    __time_t tv_sec;    /* Seconds.  */
    __suseconds_t tv_usec;  /* Microseconds.  */
  }; 
```

这说明内存中有一个构造，它（至少在这个特定平台上）由一个以秒为单位的值组成，然后是内存中的一个微秒值。这两个值构成了结构的成员。

需要为诸如 select() 之类的函数提供指向结构本身的指针。指向第一个成员的指针通常可能具有与其值相同的原始内存地址，但不能正式或可移植地互换，如果误用作结构指针，则应导致警告。

像 printf() 这样的通用纯值函数不了解 timeval 结构，因此必须给定可以解释为它确实理解的数字类型的结构成员，或者通过组合结构成员创建的值。例如，使用这两个字段来计算以毫秒为单位的 64 位时间并使用 64 位 printf 格式说明符显示它是很常见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:26:16.640

我相信您的另一个问题是您没有初始化结构的值。您声明它，它会在堆栈上创建它，并在其中留下任何垃圾数据。然后你只设置 tv_usec 成员。

最好像这样声明和初始化它：`struct timeval to = {0, 25};`这将保证所有结构字段都已设置。

# c# - 在 Windows Phone 上使用动画

> ID：13442124
> 
> 赞同：0
> 
> 时间：2012-11-18T16:41:35.207
> 
> 标签：c#, windows-phone-7

当我使用页面动画从一个页面导航到另一个页面时，我可以很好地导航到第二页，但我无法导航回主页（使用硬件后退按钮）。当我尝试返回时，我找到了所有控件在页面上消失了。

进入第二页的代码

```
private void Button1_Click(object sender, RoutedEventArgs e)
    {
        //Run animation then navigate to second page
        myAnimation.Begin();
        myAnimation.Completed += (s,ev)=>
          {
           NavigationService.Navigate(new Uri("/nextPage.xaml?id=Button1",UriKind.Relative));
          };

    } 
```

第二页的代码

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e )
        {
            base.OnNavigatedTo(e);
            myAnimation.Begin();   //Another Animation     
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:05:12.820

我的猜测是您的故事板将控件移到视图之外。当用户按下后退按钮时，前一页将恢复到您离开它的确切状态。所以控件仍然从视图中隐藏。

要解决此问题，只需在用户导航到页面时重置情节提要：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    myAnimation.Stop();
} 
```

# xcode - Twitter - 如何获取用户的时间线

> ID：13442128
> 
> 赞同：0
> 
> 时间：2012-11-18T16:41:42.587
> 
> 标签：xcode, post, twitter, timeline

我的应用程序的其中一个部分应该重现与网页相同的行为，您可以在其中找到带有 Twitter 帖子表的部分，我猜它们是用户的时间线。我查看了 Twitter api，发现了一个可以返回它的调用，但是，如果我做对了，你应该使用该用户凭据进行身份验证。有没有办法在不成为该用户的情况下实现它（因此不使用该用户的凭据）？如果不是，我们必须假设 Web 插件比返回 xml 或 json 的查询具有更大的灵活性？考虑到应用程序需要支持从 4.3 到 6.x 的 iOS，哪种方法最适合？Twitter+Oauth 是否提供比直接 Twitter api 调用更大的灵活性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:54:58.773

嗯，如果您只想显示用户的提要，您可以简单地执行以下操作：

[https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=reMakeIn&count=200](https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=reMakeIn&count=200)

您将 screen_name 更改为要为其显示提要的所需用户的位置。无需为此使用身份验证。

不确定这是否是您想要实现的，但我使用这种方法来显示随机用户的推文提要。

# git - Git - 暂时忽略对文件的琐碎更改

> ID：13442130
> 
> 赞同：67
> 
> 时间：2012-11-18T16:41:56.803
> 
> 标签：git, ignore

我正在寻找一种方法来“隐藏”对 Git 中的几个文件所做的微小更改，这样它们就不会在 git status 中显示，直到对这些文件进行不同的更改。

示例：我有一个 java 文件，其中所做的唯一更改是删除未使用的导入（贡献者在提交之前忘记运行组织导入）。现在我已经删除了该导入并且更改（显然）显示在 git 中。由于我没有对该文件进行其他更改，因此我真的不喜欢将文件作为另一个（不相关）更改的一部分提交或单独提交此更改。当然，我可以恢复更改，并且只在我必须对该文件进行更改时应用它，但我可能会“冒险”忘记它。

这样的任务是否存在命令？它的工作方式有点像假设不变的命令，但不是永久的。

如果没有这样的命令可用，解决此问题的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-10-24T14:07:42.590

在我的用例中（在我的个人机器上使用编辑过的配置文件进行开发，在另一台具有未更改配置的机器上运行），这是我的解决方案：

开始忽略对文件的更改：

```
git update-index --assume-unchanged path/to/file 
```

再次跟踪：

```
git update-index --no-assume-unchanged path/to/file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T16:35:05.440

只是不要添加微不足道的更改。

在提交之前仔细检查您添加的内容是一种很好的做法。

您甚至可以在添加其他更改时忽略文件中的某些更改，使用

```
git add -p. 
```

如果您使用[gitx (R)](http://rowanj.github.com/gitx/) ，这会更容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T15:04:55.457

将未准备好的更改保存在单独的分支中。`git rebase`必要时，此分支位于主要历史记录中的新更改之上。

无论是正在进行的开发、临时的事情，甚至是永远不会包含在主要项目历史中的事情——同样的过程同样有效。

如果/何时分支的更改准备好包含在主历史记录中；将其合并。如果没有，请将它们保留在单独的分支中并继续变基。

（旁注：`git merge --no-ff`即使可以进行快进合并，也可能用于创建合并提交——根据您的项目规则，这可能更可取）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-02T14:03:04.273

使用的缺点`git update-index --assume-unchanged`是（如[git 手册所述](https://git-scm.com/docs/git-update-index#Documentation/git-update-index.txt---no-assume-unchanged)），您向 git 保证您不会更改文件。

> 当“假设不变”位打开时，用户承诺不更改文件并允许 Git 假设工作树文件与索引中记录的内容匹配。

如果您违反此承诺并更改文件，则可能会产生不良后果。例如，在某些实现中，执行 a`git stash`将丢弃您对文件所做的更改（如果您承诺不会更改它，为什么不应该这样做？）。

使用[--skip-worktree](https://git-scm.com/docs/git-update-index#_skip_worktree_bit)选项告诉 git 假装工作版本与索引版本是最新的。

> 在读取条目时，如果它被标记为 skip-worktree，那么 Git 会假装其工作目录版本是最新的，并改为读取索引版本。

这似乎是忽略更改的更可靠的方法，而不会有某些 git 命令可能会丢弃您的更改的风险：

```
git update-index --skip-worktree path/to/file 
```

再次跟踪文件：

```
git update-index --no-skip-worktree path/to/file 
```

要列出您设置的文件`skip-worktree`：

```
git ls-files -v | grep ^S 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-23T03:39:25.213

我在这里添加了所有答案，以添加一些让我的生活更舒适的代码。期望 BSD coreutils（如在 MacOS 上）。

`git-overlook`

```
#!/usr/bin/env bash

path="$1"
root="$(git rev-parse --show-toplevel)"

if [ -z "$path" ]; then
  echo "Specify a path" 1>&2
  exit 1;
fi;

if [ ! -d .git/overlook ]; then
    mkdir $root/.git/overlook
fi;
record="$root/.git/overlook/$(echo $path | sed 's/\./___/g' | sed 's/\//____/g')"
touch "$record"
git update-index --skip-worktree "$path" 
```

`git-relook`

```
#!/usr/bin/env bash

path="$1"
root="$(git rev-parse --show-toplevel)"

record="$root/.git/overlook/$(echo $path | sed 's/\./___/g' | sed 's/\//____/g')"
if [ -f "$record" ]; then
  git update-index --no-skip-worktree "$path"
  rm "$record"
fi; 
```

最后一个`.git/hooks/pre-commit`

```
#!/bin/bash

set -eu

root="$(git rev-parse --show-toplevel)"

get_record_name() {
  record="$root/.git/overlook/$(echo $1 | sed 's/\./___/g' | sed 's/\//____/g')"
  echo "$record"
}

for file in $(git ls-files -v | grep ^S | sed 's/S //'); do
  record="$(get_record_name $file)"
  record_mtime="$(stat -f %m $record)"
  file_mtime="$(stat -f %m $file)"

  if [ "$record_mtime" -lt "$file_mtime" ]; then
    echo "File $file is overlooked but has been modified since. Please run either git overlook $file or git relook $file" 1>&2
    exit 1
  else
    echo "File $file is overlooked but hasn't been modified"
  fi;

done; 
```

这使得我可以运行`git overlook path/to/file`，然后我可以继续以我快乐的方式提交，直到我更改了被忽略的文件，此时我必须再次忽略它或将它带回来`git relook path/to/file`。显然，如果忽略的文件是我所做的唯一更改，然后我在`git status`.

它会制作一些文件`.git/overlook`来跟踪内容，但据我所知，`git`它将与它们和平共存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T16:55:39.837

有多种方法[虽然可能不干净整洁，需要您注意]

1.  将相关文件添加到`.gitignore`您的存储库中，以便它不会出现提交。`.gitignore`当您准备好提交文件时，请小心删除它
2.  确保在提交其余更改时不要“暂存”文件。您可能想要编写一个包装器`git`，以确保命令喜欢`git commit -a`或`git add .`在所有文件上运行，但有问题的文件除外。另一种选择是使用`git gui`或者`git citool`您可以在视觉上确保您的文件不在“暂存”区域中，因此永远不会被提交
3.  另一种方法是提交所有“可提交”更改，然后提交`git stash save`唯一的工作文件。稍后当您准备好更改文件时，您可以`git stash pop`继续工作和提交。

希望有帮助:)

# tcl - 如何在 TCL 中使用多线程？

> ID：13442131
> 
> 赞同：1
> 
> 时间：2012-11-18T16:41:56.780
> 
> 标签：tcl

我正在尝试并行运行两个程序。由于 TCL 是解释器，它会一一处理程序。有人可以用一个例子解释我如何在 TCL 中使用多线程吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T17:33:53.333

如今，在 Tcl 中进行多线程处理的常用方法是使用它的[`Thread`扩展](https://wiki.tcl-lang.org/page/thread)——它与 Tcl 的核心一起开发，但在某些平台（例如各种基于 Linux 的操作系统）上，您可能需要安装一个单独的包以得到这个扩展可用。

[扩展实现的线程模型](http://www.tcl.tk/doc/howto/thread_model.html)是`Thread`“每个解释器一个线程”。这意味着，每个线程只能“托管”一个 Tcl 解释器（及其无限数量的子解释器），但任何线程执行的代码都不能访问托管在其他线程中的解释器。反过来，这意味着当您在 Tcl 中使用线程时，您必须掌握多解释器的概念。

在不同线程中运行的解释器之间交换数据的经典方法是*消息传递：*您将*脚本*发布到在不同线程中运行的目标解释器的*输入队列*中，然后等待回复。另一方面，线程共享变量（通过锁定实现共享内存）也可用。另一个可用功能是支持线程池。

阅读[“Tcl 和线程”](https://wiki.tcl-lang.org/page/Tcl+and+threads) wiki 页面、[`Thread`扩展手册页](http://www.tcl.tk/man/tcl8.6/ThreadCmd/thread.htm)。

代码示例在 wiki 上。这里只是[其中之一](https://wiki.tcl-lang.org/page/Sharing+a+common+logger+thread+example)。

请注意，如果您认为必须并行运行的程序*主要受 I/O 限制*（即，它们从网络读取某些内容和/或在那里发送某些内容）而不是*CPU 限制*（进行大量计算） )，使用基于事件的处理方法可能会获得更好的结果：Tcl 具有对事件循环的内置支持，并且当可以从通道读取下一个数据块时，您可以让 Tcl 执行您的代码（例如网络套接字）或写入通道。

# c - 在 C 中创建 Makefile 时遇到问题

> ID：13442132
> 
> 赞同：0
> 
> 时间：2012-11-18T16:42:05.917
> 
> 标签：c, ubuntu, terminal

这是我在 Ubuntu 中从终端创建生成文件时收到的错误：

```
~/Desktop/a4 $ make
cc     Makefile.c   -o Makefile
Makefile.c:1:5: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘:’ token
make: *** No targets specified and no makefile found.  Stop. 
```

```
OBJ = Source.o
OPTIONS = -g

a4: Source.c
        gcc $(OPTIONS) -o a4 $(OBJ)

Source.o: myHeader.h Source.c
    gcc $(OPTIONS) -c Source.c

clean:
    rm -f $(OBJ) a4

package:
    tar -cvf myAssmt.tar *.c *.h Makefile 
```

源是一个名为 a4 的文件夹中的 .c 文件，而我的 makefile 是同一文件夹中的 Makefile.c。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:03:14.647

没有 .c 的 Makefile 解决了我的问题。多谢你们！

# image - 如何在 R5RS 中使用图像

> ID：13442137
> 
> 赞同：2
> 
> 时间：2012-11-18T16:43:01.270
> 
> 标签：image, scheme, jpeg, r5rs, racket

我正在寻找一种将 .jpg 文件导入 R5RS 的方法。我想用它作为我正在制作的游戏的背景。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T18:14:57.833

许多 Scheme 实现都支持图像文件。所写的 R5RS 标准没有。我建议使用 Racket，您可以在其中使用，例如，

```
(require 2htdp/image)
(bitmap/file "/path/to/foo.jpg") 
```

事实上，构建游戏的*许多*部分并不适合 R5RS 保护伞。恐怕您几乎可以肯定必须选择一个实现，并使用标准之外的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:51:18.447

我使用图形/图形库。使用这个（在球拍中）将其放入您的文件中：

```
(require graphics/graphics) 
```

这是用法：

```
((draw-pixmap viewport) file p [color]) → void?
  viewport : viewport?
  file : path-string?
  p : posn?
  color : (or/c (integer-in 0 299)
                string?
                rgb?) 
```

[您可以在Racket 文档](http://download.racket-lang.org/docs/5.0.1/html/graphics/Draw__Clear__and_Flip_Operations.html#%28part._.Pixmaps%29)中找到更多帮助

# delphi - 检查具有 ID 的元素是否有值

> ID：13442138
> 
> 赞同：0
> 
> 时间：2012-11-18T16:43:04.017
> 
> 标签：delphi, delphi-xe2, twebbrowser

如何检查**Id = “SomeID”**的元素**p**中的**“某些文本值”**是否存在？

 ****```
<p id="SomeID" class="error" style="display: none"></p>

<p id="SomeID" class="error" style="display: none">Some text value</p> 
```

这里是函数形式..

```
function ElementIdText(Web:TembeddedWB; Id:string):string;
var
  node: string;
begin
  if Assigned(Web.Document) and web.DocumentLoaded then begin
  node:=Web.OleObject.Document.GetElementByID(Id).innerText;
  if not VarIsNull(Node) and not VarIsClear(Node) and not AnsiSameStr(node,'') then
  result:=node;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:31:15.497

给定

```
<p id="SomeID" class="error" style="display: none"></p>
<p id="SomeOtherID" class="error" style="display: none">Some text value</p> 
```

要检索属性，请使用： 

```
ShowMessage(WebBrowser1.OleObject.Document.
    GetElementByID('SomeOtherID').getAttribute('style').Display); 
```

将输出“无”。

要获取段落的文本，您可以使用以下命令：

```
ShowMessage(WebBrowser1.OleObject.Document.
    GetElementByID('SomeOtherID').innerText); 
```****

# java - 执行 JUnit 方法后会发生什么？

> ID：13442143
> 
> 赞同：0
> 
> 时间：2012-11-18T16:43:27.880
> 
> 标签：java, junit, singleton

我有一个 JUnit 类，用于测试我系统中的时钟。时钟有一个方法`jump(long milliSeconds`，它基本上使时钟跳转到指定的时间，因此将时钟的实例字段设置为`currentTime`传递给跳转方法的参数。

所以我有三个 JUnit 方法。首先，我只是测试时钟的当前时间是否为 0，因为我没有在时钟上调用任何内容。然后我只是在测试让时钟跳到指定时间一次是否正确反映在当前时间上。最后，我调用了几次跳转方法，每次跳转后我都在测试当前时间是否正确。

我遇到的问题是有时我的 JUnit 测试通过有时会失败。假设我运行上述三个 JUnit 方法一次，它通过了。没关系。然后，如果我再次运行这三个，那么第一个会失败，因为时钟的当前时间不再是 0，而是当前时间是上次测试中调用的最后一次跳转。

我对此感到困惑，因为我认为在依次执行所有三个 JUnit 方法之后，如果我再次运行测试，它就不会“记住”它做了什么。

那么这是否需要我将当前时间初始化为 0 `@Before setUp()`？问题是只是有时会发生上述情况。如果我等待 5 分钟并再次运行它。它运行良好。然后，如果我立即再次运行它，我会得到同样的错误。

这可能与我将 Clock 类声明为 final 的事实有关吗？或者我已经在它上面执行了单例设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:15:02.643

您将 Clock 设计为单例：每个类加载器只有一个 Clock 实例：`Clock.INSTANCE`。所以很明显，如果一个测试方法影响了时钟的状态，下一个方法会找到这个新状态的时钟。

您刚刚重新发现了单例是反模式的原因之一：难以进行单元测试。每个测试都不应该对时钟做任何假设，并在测试之前将其置于众所周知的初始状态。

或者您可以简单地将 Clock 设计为一个普通的旧 Java 对象，您可以在测试设置中对其进行实例化，并使用 IOC 容器在运行时在您的 bean 中注入一个唯一的 Clock 实例。

另外，请注意，单元测试应该彼此独立。您可能想要执行所有测试，或者只执行其中一个，并且它们应该能够以任何顺序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:41:37.793

在 JUnit 中，不保证测试方法调用的顺序，这在 Junit [FAQ](http://junit.sourceforge.net/doc/faq/faq.htm)部分中进行了解释。

您的实现使用的是单例，因此在 JUnit 运行测试的顺序之前暴露会影响测试结果。

测试相互依赖不是一个好习惯，但是如果您需要确保可以使用 TestNG。

To fix that use a simple POJO class and let some DI framework handle that. If it's a constraint and you should preserve your class as it, test it with TestNG or rewrite your tests to ensure the order that you need. I.e: I think that a good test could be check that a lower specified time could throws an Exception.

# java - 如何将点击监听器添加到 Android/Java Textview 中的字符串中？

> ID：13442144
> 
> 赞同：2
> 
> 时间：2012-11-18T16:43:35.680
> 
> 标签：java, android, string, textview, clicklistener

我试图完成的是大多数 twitter 应用程序中的标准操作，在文本视图中，文本字符串中的单词之前可能有一个“@”提及或一个“#”标签，他们实际上能够添加一个点击监听器到启动另一个活动的那个词，有谁知道这是如何实现的？下面我附上了一张示例照片，展示了我正在努力实现的目标，任何帮助都会大有帮助，谢谢

![在此处输入图像描述](../Images/f79cc69ade50da85be6916969c6af41d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T16:47:36.090

看看[Linkify](http://developer.android.com/reference/android/text/util/Linkify.html)类。它允许您为给定的正则表达式在 TextViews 中添加链接。

以下内容已从[本文](http://burakdede.com/2012/07/06/how-linkify-your-text-in-android/)中提取：

```
TextView mText = (TextView) findViewById(R.id.mytext);
Pattern userMatcher = Pattern.compile("\B@[^:\s]+");
String userViewURL = "user://";
Linkify.addLinks(mText, userMatcher, userViewURL); 
```

> 模式用于从给定的正则表达式创建新模式，例如上面的示例，它在给定的文本中捕获任何文本，如@username，然后你必须定义你的 user:// 方案，这也必须在活动中定义，它将捕获点击最后一个 Linkify.addLinks 让它们一起工作。让我们看一下意图过滤器的 Android.manifest 文件。

```
<activity android:name=”.DirectMessageActivity” > 
    <intent-filter>
        <category android:name=”android.intent.category.DEFAULT”/> 
        <action android:name=”android.intent.action.VIEW” /> 
        <data android:scheme=”user” /> 
    </intent-filter> 
</activity> 
```

> 当您单击@username 时，该活动将捕获单击并处理单击的字符串。是的，我们没有提到当用户单击 @username 时发送到 DirectMessageActivity 的内容，因为您可能猜到“用户名”字符串将被传递给 DirectMessageActivity。你可以像这样得到这个字符串。

```
Uri data = getIntent.getData();
if(data != null){
    String uri = data.toString();
    username = uri.substring(uri.indexOf("@")+1);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T16:52:24.430

试试这个方法......

```
TextView tv[] = new TextView[subCategory.length];
    for (int i = 0; i < subCategory.length; i++) {
            tv[i] = new TextView(this);
            tv[i].setText(subCategory[i]);
            tv[i].setId(i);
            sCategoryLayout.addView(tv[i]);
            tv[i].setOnClickListener(onclicklistener);
        } 
```

**onclicklistener 方法：**

```
OnClickListener onclicklistener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v == tv[0]){
            //do whatever you want....
        }
    }
}; 
```

# c++ - 抽象树与解析器树

> ID：13442147
> 
> 赞同：3
> 
> 时间：2012-11-18T16:44:01.783
> 
> 标签：c++, parsing, boost, abstract-syntax-tree, boost-spirit

我需要您的意见，以便在生成解析器树 (ST) 或生成抽象语法树 (AST) 之间选择最佳选择。这是上下文：

我想解析像 C 这样的语言（只是 C 的一个子集，进行了一些更改以使其更加面向伪代码），但不是为了将它翻译成其他输出语言/文件，而是为了执行它的句子以动画其执行过程（我用Qt来画）。这个 C 子集的一个特性是它支持嵌套范围。我对我在 ST 和 AST 之间的选择的怀疑来自符号表。总体思路是（使用 Boost.spirit）：

1.  通过自定义 Boost.spirit 解析器解析源代码文件。
2.  语义操作产生一个语法树，只是源代码语法树的副本（或者也是 Boost.spirit 内部语法树的副本，但具有我自己的类和结构）。因此，没有 AST。
3.  有了这个 ST，程序按照自上而下的方向读取这个语法树，如下所示：
    1.  执行第一句话。
    2.  使用新的（句子的结果）值上传符号表。
    3.  将符号表的实际状态保存在程序状态堆栈中。
    4.  到 3.1 直到 ST 完全处理完毕。
    5.  动画算法读取和绘制程序状态堆栈。

两个理由：

1.  如果我使用 AST，我会在解析后丢失有关变量声明、其类型等的信息。因此，我必须通过解析器的语义动作来处理符号表，使解析器的编写和理解变得复杂。此外，无论实际范围如何，我都必须一直使用包含所有变量的符号表（如果我在范围 i 中，只需要范围 i、i-1、....、1；不是整个算法的所有范围）。这会消耗内存。
2.  在我的程序状态堆栈中，我只需要实际和先前范围的变量，以免通过动画使算法的可理解性复杂化。如果我使用 ST，我必须先删除所有不需要的符号，然后再将其保存到堆栈中。这会花费时间。
3.  具有控制范围的静态符号表比动态符号表更难设计和使用。静态符号表必须为每个作用域提供一个标识符（例如），并将树的每个节点与每个标识符相关联。动态符号表更容易工作，因为如果我在 i 范围内，只需要两个“向量”（可能是双队列和堆栈）：

    *   带有符号及其相关信息的容器（双队列？）：容器中的最后一个变量是最近的声明变量。
    *   整数的容器（堆栈），显示每个范围的开始（双队列的索引）。

    例如，对于范围 i：

    *   容器 1：[xyzxabzfaz]
    *   容器 2：[0 3 6 8]

    如果我离开范围 i，我只需要擦除最后一个整数和从位置 8 到末尾的符号。树保持不变。

4.  由于我必须在执行时间内执行每个句子，因此 ST 有助于我的执行。

两个问题：

1.  那哪个更好呢？
2.  是否存在任何形式来提取Spirit的内部树或定制它以便不复制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:58:17.543

我认为您正在寻找的是一个抽象语义图 (ASG)，它表示程序的*语义*（与语法相反）。你可以做的是：

1.  将源解析为 AST，然后
2.  将 AST 转换为 ASG，最后
3.  走 ASG 以执行实际代码。

另外，我想说你确实**可以**构建一个*不太*抽象的 AST；例如，我目前正在构建自己的脚本语言解释器，AST 将包含变量名称（这对于调试解析器/解释器以及解析的程序本身也很有用）。

# php - MySQLi - 返回二维数组

> ID：13442148
> 
> 赞同：0
> 
> 时间：2012-11-18T16:44:02.753
> 
> 标签：php, mysqli

有没有办法让 MySQLi 返回一个多维数组？

假设我从数据库中选择博客文章，每篇文章都有多个标签。据我所知，我会这样做：

```
$r = $mysqli->query("SELECT * FROM posts");
while ($post = $r->fetch_assoc()) {
   //echo blog posts
    $t = $mysqli->query("SELECT * FROM blog_tags INNER JOIN tags ON tags.id = blog_tags.tag_id WHERE post_tags.post_id = ".$post['id']);
    while($tag = $t->fetch_assoc()){
        //echo tags
    }
} 
```

但我更喜欢这样做：

```
$r = $mysqli->query("SELECT * FROM posts INNER JOIN post_tags ON posts.id = post_tags.post_id INNER JOIN tags ON tags.id = post_tags.tag_id");
while($post = $r->fetch_assoc()){
    //echo post
    foreach($post['tags'] as $tag){
        //echo tags
    }
} 
```

所以回报是：

```
$posts = array(
    "id" => 1,
    "title" => "Blog post 1",
    "content" => "Lorem ipsum...",
    "tags" => 
        array(
            "tag1", 
            "tag2", 
            "tag3"
        ),
    "posted" => "1-1-2010 11:11:11"
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:51:00.690

您需要使用`GROUP BY`和`GROUP_CONCAT`。我猜标签名称字段被称为`name`

```
SELECT posts.*, GROUP_CONCAT(tags.name) as tagnames FROM posts
INNER JOIN post_tags ON posts.id = post_tags.post_id
INNER JOIN tags ON tags.id = post_tags.tag_id
GROUP BY posts.id 
```

然后当你得到结果时，你可以`explode(",", $t->tagnames)`得到一个标签数组。

# javascript - WebSQL/SQLite 按 javascript date obj 排序

> ID：13442150
> 
> 赞同：1
> 
> 时间：2012-11-18T16:44:23.610
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在开发一个 html5/jqm/phonegap 应用程序。我正在从客户端数据库表中选择记录列表。我想按日期对它们进行分组和排序，但表中存在的日期是一个 JS 日期对象，例如：

```
Mon Nov 19 2012 16:20:55 GMT+0000 (GMT) 
```

我想按数字天（在本例中为 18、19、20）对它们进行分组和排序。所以以下细节：

```
Sun Nov 18 2012 16:20:55 GMT+0000 (GMT)
Mon Nov 19 2012 16:20:55 GMT+0000 (GMT)
Sun Nov 18 2012 16:20:55 GMT+0000 (GMT)
Tue Nov 12 2012 16:20:55 GMT+0000 (GMT) 
```

将按此顺序返回：

```
Tue Nov 20 2012 16:20:55 GMT+0000 (GMT)
Mon Nov 19 2012 16:20:55 GMT+0000 (GMT)
Sun Nov 18 2012 16:20:55 GMT+0000 (GMT)
Sun Nov 18 2012 16:20:55 GMT+0000 (GMT) 
```

作为选择的一部分，是否可以在 sql 中执行此操作？或者，如果没有，有人可以向我指出如何在 Js/jQuery 中做到这一点的正确方向吗？

提前致谢

**根据皮特的问题进行编辑**

我使用的是 Jaascript/html5 客户端版本的 SQL，我相信它是基于 SQLite 的。要创建数据库，我只需调用以下 js -

```
var db = openDatabase(shortName, version, displayName, maxSize); 
```

我的数据库架构是：

```
transaction.executeSql('CREATE TABLE RECORDINGS (id INTEGER PRIMARY KEY AUTOINCREMENT, caseRef, startDate, endDate, caseTypeId, actionTypeId, notes, userId, syncStatus);');
transaction.executeSql('INSERT INTO RECORDINGS (caseRef, startDate, endDate, caseTypeId, actionTypeId, notes, userId, syncStatus) VALUES ("CR1234", "'+startDate+'", "'+endDate+'", 1, 2, "Meeting about something", 1, 0);'); 
```

我的选择目前看起来像：

```
function getRecordingsQuery(transaction) {
        transaction.executeSql('SELECT RECORDINGS.id, RECORDINGS.caseRef, RECORDINGS.startDate, RECORDINGS.endDate, RECORDINGS.notes, RECORDINGS.syncStatus, CASETYPES.description FROM RECORDINGS, CASETYPES WHERE RECORDINGS.caseTypeId = CASETYPES.id AND RECORDINGS.userId =? ORDER BY startDate DESC', [window.currentSignedInUserId], getRecordingsDataHandler, errorHandler);
    } 
```

这有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:00:12.340

**更新**

SQLLite 不支持`DATEPART`，但确实支持`strftime`。尝试将以下内容添加为您的`ORDER BY`：

```
ORDER BY CAST(strftime("%d", date) AS INTEGER) DESC 
```

您可以改为在 JavaScript 中处理排序。我确信有更好或更有效的方法来做到这一点，但你可以使用内置的排序数组，如下所示：

```
var getRecordingsDataHandler = function getRecordingsDataHandler(tx, results) {
    var rows = [],
        row = null,
        i = 0;
      if (results.rows && results.rows.length) {
        for (i = 0; i < results.rows.length; i += 1) {
            rows.push({
                "startDate": new Date(results.rows.item(i).startDate),
                "data": results.rows.item(i)
            });
        }
        rows.sort(function (a, b) {
            var ascending = a.startDate.getDate() - b.startDate.getDate(),
                descending = b.startDate.getDate() - a.startDate.getDate();
            return descending;
        });
        for (i = 0; i < rows.length; i += 1) {
            row = rows[i].data;
            //process the rest
            //since row === results.rows.item(i), reference from row
        }
    }
}; 
```

**原来的：**

在不知道您使用的 SQL 版本的情况下，很难回答您问题的这一部分。我认为他们中的大多数都支持一个`DATEPART`功能，所以你可以尝试：

```
ORDER BY DATEPART(dd, YourDateField) DESC 
```

就 JavaScript/jQuery 而言：

```
var d = new Date('Tue Nov 20 2012 16:20:55 GMT+0000 (GMT)'); 
```

将在 JavaScript 中返回一个日期对象，然后您可以对其进行排序。仅针对日期：

```
d.getDate(); //returns day of month 
```

如果您的问题可以更具体一点（您正在使用哪个引擎/SQL 版本，或者您的客户端表的结构以及您用来对其进行排序的函数），那么我们可能会为您提供帮助好一点。

# javascript - 使用three.js 挤出形状时出错

> ID：13442153
> 
> 赞同：4
> 
> 时间：2012-11-18T16:44:45.817
> 
> 标签：javascript, d3.js, three.js

我刚刚开始使用three.js，并且在挤出一些二维形状时遇到了一些问题。

我有一个包含美国所有县的 GeoJSON 文件。我正在使用 d3.js 和`d3.geo.albersUSa()`投影将每个纬度/经度转换为 X/Y 坐标列表，`THREE.Shape`然后制作一个我正在挤压和绘图的列表。这似乎对大多数县都有效。

我看到的问题是，某些县的子集要么无法挤出，要么挤出不正确，并出现以下警告序列：

```
Warning, unable to triangulate polygon!
Duplicate point 653.4789181355854:204.0166729191409
Either infinite or no solutions!
Its finite solutions.
Either infinite or no solutions!
Too bad, no solutions. 
```

我不确定我是否完全理解问题所在——据我所知，这些特殊形状并没有什么特别之处。我做错了什么，还是这与three.js中的挤压代码有关？

* * *

例如，这里有一些缺失的县：

还要注意德克萨斯州丢失的三角形“沙漏”部分：这些看起来像一些只渲染了一半的县（它们最终变成三角形而不是矩形或正方形？）

![示例输出](../Images/24282e543201b339462e2ab5948c63aa.png) [较大](https://i.stack.imgur.com/DLkcB.png)

为巨大的代码转储道歉，我试图尽可能地减少它。

### 设置：

```
/* initialize the scene, camera, light, and background plane */
var Map = function(params) {
  this.width     = params.width;
  this.height    = params.height;
  this.container = params.target || document.body;

  this.renderer = new THREE.WebGLRenderer({antialias: true});
  this.renderer.setSize(this.width, this.height);
  this.renderer.setClearColorHex(0x303030, 1.0);

  this.container.appendChild(this.renderer.domElement);

  this.camera = new THREE.PerspectiveCamera(45, this.width / this.height,
                                            1, 10000);
  this.scene = new THREE.Scene();
  this.scene.add(this.camera);

  this.camera.position.z = 550;
  this.camera.position.x = 0;
  this.camera.position.y = 550;

  this.camera.lookAt(this.scene.position);

  this.projection = d3.geo.albersUsa()
    .scale(1000)
    .translate([250, 0]);

 var pointLight = new THREE.PointLight(0xFFFFFF);
 pointLight.position.x = 800;
 pointLight.position.y = 800;
 pointLight.position.z = 800;

  var plane = new THREE.Mesh(
    new THREE.PlaneGeometry(10000, 10000, 10, 10),
    new THREE.MeshLambertMaterial({color: 0xffffff})
  );

  plane.rotation.x = -Math.PI/2;

  this.scene.add(pointLight);
  this.scene.add(plane); 
```

};

### 渲染：

```
/* given a GeoJSON Feature, return a list of Vector2s
 * describing where to draw the feature, using the provided projection. */
function path(proj, feature) {
  if (feature.geometry.type == 'Polygon') {
    return polygonPath(proj, feature.geometry.coordinates);
  } else if (feature.geometry.type == 'MultiPolygon') {
    return multiPolygonPath(proj, feature.geometry.coordinates);
  }
}

/* a GeoJSON Polygon is a set of 'rings'.  The first ring is the shape of the polygon.
 * each subsequent ring is a hole inside that polygon. */
function polygonPath(proj, rings) {
  var list = [];
  var cur  = [];

  $.each(rings, function(i, ring) {
    cur = [];

    $.each(ring, function(i, coord) {
      var pts = proj(coord);
      cur.push(new THREE.Vector2(pts[0], pts[1]));
    });

    list.push(cur);
  });

  return list;
}

/* a GeoJSON MultiPolgyon is just a series of Polygons. */
function multiPolygonPath(proj, polys) {
  var list = [];
  $.each(polys, function(i, poly) {
    list.push(polygonPath(proj, poly));
  });
  return list;
}

/* for each feature, find it's X/Y Path, create shape(s) with the required holes,
 * and extrude the shape */
function renderFeatures(proj, features, scene, isState) {
  var color = 0x33ccff;

  $.each(features, function(i, feature) {
    var polygons = path(proj, feature);
    if (feature.geometry.type != 'MultiPolygon') {
      polygons = [polygons];
    }

    $.each(polygons, function(i, poly) {
      var shape = new THREE.Shape(poly[0]);

      if (poly.length > 1) {
        shape.holes = poly.slice(1).map(function(item) { return new THREE.Shape(item); });
      }

      var geom = new THREE.ExtrudeGeometry(shape, { amount: 20, bevelEnabled: false });
      var c = new THREE.Mesh(geom, new THREE.MeshLambertMaterial({color: color}) );

      c.rotation.x = Math.PI/2;
      c.translateX(-290);
      c.translateZ(50);
      c.translateY(5);

      scene.add(c);
    });
  });
}

Map.prototype.renderCounties = function() {
  $.getJSON('/data/us-counties.json', function(json) {
    renderFeatures(this.projection, json.features, this.scene, false);
    this.renderer.render(this.scene, this.camera);
  }.bind(this));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T17:57:15.420

看起来多边形的点顺序错误。

# php - 删除换行符和空格

> ID：13442156
> 
> 赞同：2
> 
> 时间：2012-11-18T16:44:59.527
> 
> 标签：php, regex, preg-replace, preg-match

如何删除之间的换行符`<table> .... </table>`并在每个之后添加 \n

前任：

```
<table border="0" cellspacing="0" cellpadding="0" width="450" class="descriptiontable"><tr>
<td width="50%" valign="top">
<span class="displayb">Model Procesor:</span> Intel Celeron<br><span class="displayb">Frecventa procesor (MHz):</span> 2660<br><span class="displayb">Placa Video:</span> Intel Extreme Graphics 2<br><span class="displayb">Retea integrata:</span> 10/100Mbps, RJ-45<br><span class="displayb">Chipset:</span> Intel 845G<br>
</td>
<td width="50%" valign="top">
<span class="displayb">Capacitate RAM (MB):</span> 512<br><span class="displayb">Tip RAM:</span> DDR<br>
</td>
</tr></table> 
```

并成为：

```
<table border="0" cellspacing="0" cellpadding="0" width="450" class="descriptiontable"><tr><td width="50%" valign="top"><span class="displayb">Model Procesor:</span> Intel Celeron<br><span class="displayb">Frecventa procesor (MHz):</span> 2660<br><span class="displayb">Placa Video:</span> Intel Extreme Graphics 2<br><span class="displayb">Retea integrata:</span> 10/100Mbps, RJ-45<br><span class="displayb">Chipset:</span> Intel 845G<br></td><td width="50%" valign="top"><span class="displayb">Capacitate RAM (MB):</span> 512<br><span class="displayb">Tip RAM:</span> DDR<br></td></tr></table>\n 
```

s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:57:53.077

我认为您的意思是您有一个完整的 HTML 文件/字符串，并且只想删除表格内的换行符。

您可能应该使用 DOM 解析器来查找 HTML 的相应部分，但是这个临时的正则表达式解决方案可能对您来说很好：

```
$str = preg_replace('~[\r\n]+(?=(?:(?!<table).)*</table>)~is', '', $str);
$str = preg_replace('~</table>~i', "$0\n", $str); 
```

如果您想`\n`仅在它不存在的情况下添加它，您可以将其作为第二个替换：

```
$str = preg_replace('~</table>(?!\n)~i', "$0\n", $str); 
```

这匹配（系统独立）所有换行符，**如果**它们后面`</table>`没有`<table`介于两者之间的话。当然，这会导致嵌套表和类似事物出现问题。这就是为什么你应该使用 DOM 解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T16:47:06.360

```
$string = preg_replace('/\s\s+/', '', $string); 
```

这将删除多个空格和换行符。

最后，您只需在结果中添加“\n”：

```
$string = preg_replace('/\s\s+/', '', $string) . "\n"; 
```

这应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:57:56.667

找到方法了，忘记发了

```
$content = str_replace('</table',"</table>\n",str_replace("\n","",$str)); 
```

# google-maps - 加载新标记时，谷歌地图不会“自然”缩放

> ID：13442158
> 
> 赞同：-1
> 
> 时间：2012-11-18T16:45:12.310
> 
> 标签：google-maps, google-maps-api-3

我有这段代码可以加载 XML 图形标记，并且在加载新标记时也将其设置为缩放。然而，我不喜欢的是缩放“立即”发生并且不会缓慢缩放到水平，而且由于某种原因，地图缩小得比它需要的远得多。我希望地图只缩小到它需要的程度，以便标记在视野中。

有什么建议么？谢谢！

```
clearOverlays();
downloadUrl("AllActivityxml.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("id");
          var address = markers[i].getAttribute("id");
          var type = markers[i].getAttribute("venue_type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
markerBounds.extend(point);
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow

          });

          markersArray.push(marker);
          bindInfoWindow(marker, map, infoWindow, html);
          map.fitBounds(markerBounds);

        }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:35:42.490

*缩放“立即”发生，并且不会缓慢缩放至水平*- 这就是当您这样做时实际发生的方式`fitBounds()`。看起来您想要类似 的东西，`map.panTo()`它使地图上的过渡缓慢不同于`map.setCenter()`，但在 fitBounds() 中并非如此。

*地图缩小得比它需要的远得多——*移动到`map.fitBounds(markerBounds);`外面`for loop`

# c++ - 如何正确传递 Windows 句柄？

> ID：13442166
> 
> 赞同：3
> 
> 时间：2012-11-18T16:46:06.537
> 
> 标签：c++, windows, winapi, handle

我不知道把手后面是什么，以及它是否是一个大物体。通常我会在我的申请中通过它们很多，因此如果你能告诉我应该如何通过它们会很好。按值、常量引用甚至指针？

编辑：我应该提到我谈论位图句柄。也许这会有所作为。

好吧， [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)有自己的页面，仅适用于大写的 windows 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:57:15.433

您可以将位图句柄（HBITMAP）作为 ID 查看。因此，按价值传递它们。它们是指针大小的，因此 HBITMAP 的值传递没有性能问题。

# php - yii : CDbCriteria 打印出错误的结果

> ID：13442167
> 
> 赞同：0
> 
> 时间：2012-11-18T16:46:14.877
> 
> 标签：php, yii

问题：CDbCriteria 打印出错误的结果。

这是模型搜索功能。

```
public function summary()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;
        $criteria->select = 't.*';

        if (Yii::app()->user->checkAccess('Reviewer')):
            $criteria->addSearchCondition('t.reviewers',Yii::app()->user->id,false, 'AND');
        endif;

        if (Yii::app()->user->checkAccess('Implementer')):
            $criteria->addSearchCondition('t.implementers',Yii::app()->user->id,false, 'OR');
        endif;

        if (Yii::app()->user->checkAccess('Creator')):
            $criteria->compare('t.creator',Yii::app()->user->id, false, 'OR');
        endif;

        $criteria->compare('request_type_id',$this->request_type_id);
        $criteria->compare('request_category_id',$this->request_category_id);
        $criteria->compare('financial_type_id',$this->financial_type_id);
        $criteria->compare('urgency_id',$this->urgency_id);
        $criteria->compare('eta_date',$this->eta_date,true);

        if (Yii::app()->user->checkAccess('Reviewer') || Yii::app()->user->checkAccess('Implementer')):
            $criteria->join   = "JOIN profiles p ON (p.user_id = t.creator)";
            if($this->creator):
                $criteria->addSearchCondition('p.firstname',$this->creator, true, 'AND');
            endif;
        endif;

        if(isset($this->status)):
            $criteria->compare('t.status',$this->status);
        endif;

        $data = new CActiveDataProvider(get_class($this), array(
                'criteria'=>$criteria,
                'pagination'=>false,
        ));
        $_SESSION['all'] = $data;

        $data = new CActiveDataProvider(get_class($this), array(
                'pagination'=>array('pageSize'=> Yii::app()->user->getState('pageSize',
                        Yii::app()->params['defaultPageSize']),),
                'criteria'=>$criteria,
        ));
        $_SESSION['limited'] = $data; 

        return $data;
    } 
```

当我使用 CWebLogRoute 进行跟踪但没有记录时，上面的代码打印出查询。

> 查询 SQL：SELECT t.* FROM `request` `t`JOIN profiles p ON (p.user_id = t.creator) WHERE t.reviewers LIKE :ycp1 LIMIT 10

当我将这些查询更改为以下查询时，它会打印出记录。

> SELECT t.* FROM `request` `t` JOIN profiles p ON (p.user_id = t.creator) WHERE t.reviewers LIKE '%3%' LIMIT 0 , 30

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:11:42.920

尝试改变

```
$criteria->addSearchCondition('t.reviewers',Yii::app()->user->id,false, 'AND'); 
```

至

```
$criteria->addSearchCondition('t.reviewers',Yii::app()->user->id, true, 'AND'); 
```

还要检查记录的格式`reviewers`和记录方式：它可能记录为“3”、“3”或“3”。

它必须通过以下方式更新记录`update request set reviewers = trim(reviewers)`

# visual-studio-2010 - Visual Studio 默认界面？

> ID：13442169
> 
> 赞同：1
> 
> 时间：2012-11-18T16:47:05.593
> 
> 标签：visual-studio-2010

我想将 Visual Studio 2012 界面从 .NET 切换到 C++ - 我在第一次运行时选择了 .NET，现在我不知道如何将其更改为 C++。

目前，当我制作“新项目”时，它只显示 .NET 项目，而且似乎没有办法创建除此之外的任何东西，但是我已经安装了带有其他小工具的完整版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:50:31.563

尝试以下步骤： -

1) 工具 -> 导入和导出设置...

2）选择“重置所有设置”，然后单击下一步

3) 如果要保留现有设置，请选择“是”

4) 点击下一步

5) 选择您选择的配置文件，然后单击完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:53:06.680

我不认为环境设置实际上*隐藏了*任何特定的项目类型，而是重新访问“您要使用哪些设置？”的方式。对话框位于工具 -> 导入和导出设置下。

其中一个选项是重置所有设置，然后您可以选择要使用的默认设置。

# c# - javascript ASP.NET hiddenfield 从后面的代码中获取价值

> ID：13442174
> 
> 赞同：3
> 
> 时间：2012-11-18T16:47:23.347
> 
> 标签：c#, javascript, asp.net, hiddenfield

我正在尝试将我的代码集成到 Google Chart API。我想从后面的代码中手动设置谷歌图表标题和轴列名称。我尝试了下面的代码，但不起作用。有什么建议么？

ASPX 文件

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", { "packages": ["corechart"] });
        function drawProgrammingChart() {
            var data = new google.visualization.DataTable(operationdetails, 0.5);
            var chart = new google.visualization.LineChart(document.getElementById("divprog"));
            **var xAxis = document.getElementById("txtXAxisName");**
            **console.log(xAxis);**
            var yAxis = document.getElementById("txtYAxisName");
            chart.draw(data, {
                title: "Visualization Satisfaction", hAxis: { title: "Programming method" }, vAxis: { title: "Units" }
            });
        }
        google.setOnLoadCallback(drawProgrammingChart);
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div id="divprog" style="width: 750px; height: 350px;">
        </div>
    <asp:HiddenField ID="txtXAxisName" runat="server" />
    <asp:HiddenField ID="txtYAxisName" runat="server" />
</asp:Content> 
```

在后面的代码中，我想手动设置隐藏字段值。

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                DataTable dt = generateDataTable();
                **txtXAxisName.Value = "Days";**
                txtYAxisName.Value = "Duration";
                LoadChart(dt, "operationdetails");    
            }

        }
private void LoadChart(DataTable table, string jsName)
        {
            Page.ClientScript.RegisterStartupScript(
                this.GetType(),
                jsName, string.Format("var {0} = {1};", jsName, new Bortosky.Google.Visualization.GoogleDataTable(table).GetJson()), true);
        } 
```

获取元素 txtAxisName 时，它​​为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:20:37.910

您可以尝试以下方法：

```
var yAxis = document.getElementById('<%# txtYAxisName.ClientID %>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:53:23.303

首先要获得您需要使用的控件的渲染 id，`<%=txtYAxisName.ClientID%>`您的代码上的这将是：

```
var xAxis = document.getElementById("<%=txtXAxisName.ClientID%>"); 
```

但要真正获得它的价值，您需要使用 .value 属性。

```
var xAxis = document.getElementById("<%=txtXAxisName.ClientID%>").value; 
```

但是，如果您实际上不需要更改，也可以在回发此隐藏字段时使用，您可以直接将代码编写为：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", { "packages": ["corechart"] });
        function drawProgrammingChart() {
            var data = new google.visualization.DataTable(operationdetails, 0.5);
            var chart = new google.visualization.LineChart(document.getElementById("divprog"));
            var xAxis = <asp:Literal runat="server" id="txtXAxisName" EnableViewState="False" />
            var yAxis = <asp:Literal runat="server" id="txtYAxisName" EnableViewState="False" />
            chart.draw(data, {
                title: "Visualization Satisfaction", hAxis: { title: "Programming method" }, vAxis: { title: "Units" }
            });
        }
        google.setOnLoadCallback(drawProgrammingChart);
    </script>
</asp:Content> 
```

和后面的代码

```
txtXAxisName.Text = "\"Days\";";
txtYAxisName.Text = "\"Duration\";"; 
```

并且实际上直接在脚本内部渲染页面上的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T20:48:49.800

```
var yAxis = document.getElementById('<%# txtYAxisName.ClientID %>'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T18:37:11.670

正如 Cal279 所示，我查看了呈现的页面的源代码，如下所示：

```
<input type="hidden" name="ctl00$MainContent$txtXAxisName" id="MainContent_txtXAxisName" value="Days" /> 
```

然后我在下面尝试并成功了。感谢 Cal279 :)

```
var xAxis = document.getElementById("MainContent_txtXAxisName"); 
```

# haskell - 如何在haskell中使用以下方法获得无限的权力列表

> ID：13442176
> 
> 赞同：6
> 
> 时间：2012-11-18T16:47:27.493
> 
> 标签：haskell

我一直在尝试做一个无限的幂列表，就像我在下面做的一样，以获得斐波那契数和阶乘的列表。

```
fibs = 0 : 1 : zipWith (+) fibs (tail fibs)

facs = 1 : zipWith (*) [1 ..] facs 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T17:26:46.627

生成数字的幂就像使用“迭代”一样简单：

```
iterate (*2) 1 
```

要找到特定的力量（而不是列出它们），使用`(^)`. 要查看大乘法的各个步骤，您可以使用`scanl`：

```
scanl (*) 1 [2, 3, 5, 7] 
```

最后生成所有正方形的列表，这是我推荐的方法：

```
fix (\more r s -> s : more (r + 1) (s + 2*r + 1)) 0 0 
```

或者，如果您对此感到不舒服，`fix`这里有两个替代版本：

```
unfoldr (\(r, s) -> Just (s, (r + 1, s + 2*r + 1))) (0, 0)

map snd . iterate (\(r, s) -> (r + 1, s + 2*r + 1)) $ (0, 0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-20T07:37:56.317

为了提高可读性，您还可以使用`map`：

2的连续幂列表：

```
λ> map (2^) [0..10]
[1,2,4,8,16,32,64,128,256,512,1024] 
```

连续方块：

```
λ> map (^2) [0..10]
[0,1,4,9,16,25,36,49,64,81,100] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T16:56:18.913

我认为您可以仅通过列表理解来定义无限的正方形序列：

```
powers = [ ii*ii | ii <- [1 ..]]

take 10 powers
=> [1,4,9,16,25,36,49,64,81,100] 
```

编辑：有人解释说你是2的幂，这也可以通过列表理解来完成：

```
powersOf2 = [ 2^ii | ii <- [0 ..]]
take 10 powersOf2
=> [1,2,4,8,16,32,64,128,256,512] 
```

您可以将此推断为任何给定基础的生成器函数：

```
powersOfN nn = [ nn^ii | ii <- [0 ..]]

take 10 (powersOfN 3)
=> [1,3,9,27,81,243,729,2187,6561,19683]

take 10 (powersOfN 17)
=> [1,17,289,4913,83521,1419857,24137569,410338673,6975757441,118587876497] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T17:16:10.477

```
powers n = 1 : map (n*) (powers n) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-26T08:26:57.733

**如果您想要zipWith**的无限幂 N 列表，这可能是一种简单的方法：

```
powersOfN :: [Integer]
powersOfN
  = zipWith (^) [N,N..] [0,1..] 
```

以下是 2 的幂的示例：

```
Prelude> zipWith (^) [2,2..] [0,1..]
=>[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728..] 
```

# ruby-on-rails - 如何在rails中的特定页面上显示登录用户的特定链接？

> ID：13442177
> 
> 赞同：0
> 
> 时间：2012-11-18T16:47:28.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的部分导航有以下代码：

```
 <% if user_signed_in? %>
    <li><%= link_to 'Edit Profile', edit_profile_path(current_user.profile) %></li>
    <li><%= link_to 'Edit Account', edit_user_registration_path %></li>
  <% elsif user_signed_in? and params[:controller] == 'profiles#edit' %>
    <li><%= link_to 'View Profile', profile_path(current_user.profile) %></li>
    <li><%= link_to 'Edit Account', edit_user_registration_path %></li>
  <% else %>
    <li><%= link_to 'Sign up', new_user_registration_path %></li>
  <% end %> 
```

我希望根据“user_signed_in”的位置显示不同的链接。但是，我的`<% elsif user_signed_in? and params[:controller] == 'profiles#edit' %>`似乎没有工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:21:02.223

Besides what others already mentioned, as this code is written, when `user_signed_in?` is `true` you will **always** fall into the first block and **never** hit `elsif` block. You would have to fix condition that deals with controller and action **AND** make this a first condition so that your code will execute as intended.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:52:26.563

`profiles`是您的控制器，`edit`是您的操作，因此您需要将它们指定为单独的事物：

```
elsif user_signed_in? && params[:controller] == 'profiles' && params[:action] == 'edit' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T00:11:11.510

您可以使用`params[:controller]`，但它只包含控制器的名称。`params[:action]`将包含动作名称。

更清洁的是使用`controller_name`，`action_name`也可以使用。

像这样：

```
<% elsif user_signed_in? and controller_name == 'profiles' and action_name == 'edit' %> 
```

### Tip for the future

You pose this question, but in fact it is extremely easy to show what `params[:controller]` contains, just do something like

```
 <%= "Controller name = #{params[:controller]}" %> 
```

somewhere in your view. Temporary of course :) But then you would immediately know why your condition does not work.

HTH.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T16:56:58.103

如果您想确定显示或隐藏链接的“url”，您可以使用：

```
 if request.path == "/profiles/edit" 
```

或您想要的网址。你可以猜到，路径的格式也接受通配符：/profiles/*

# html - 将 html 内联图像从浏览器复制/粘贴到文字处理器

> ID：13442178
> 
> 赞同：4
> 
> 时间：2012-11-18T16:47:34.543
> 
> 标签：html, image

我正在尝试使用 html 内联图像（背景：尝试创建自己的 CMS，它不会将图像保存为单独的文件）。

我可以将这样的图像从浏览器 (Firefox/IE) 复制/粘贴到 Photoshop 或 MS Paint 等图像处理程序，但不能复制/粘贴到 MS Word 或 OpenOffice Writer 等文字处理器。

您对我可以做些什么来使这些内联图像也为文字处理器“复制/粘贴”有任何想法吗？

例子：

```
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAIAAAC6ZnJRAAAAqElEQVQImSXISQ6CMBQA0N7AjYkD4G+hEMLGRGVsK9PCQ7kx0USgDAV6YBe+5UPLnSpu9wzLDJrYnAVpwwNS3B5S6NLTKGxd+2vu9ImJFLd14bWJ9b7sZAa6oIpj1EXmf5/B5nXezoJMDFBzO44ZbhPrc91/I0MXdGKAJkaGFHqGVU517cvYkLGBxgRWQXuGx9JdHkHDYKo8JENz4Y7MoBNkqNxOkLn0fm81MqWZRgG5AAAAAElFTkSuQmCC" /></p> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T09:22:57.523

您不能直接在文字处理器中粘贴图像。为此首先使用图像处理器以适当的格式 (png/jpg) 保存图像，然后复制此保存的图像并将其粘贴到 word preocessor 中。如果您觉得有帮助，请选择此作为最佳答案。

# symfony - Symfony2 ACL - 不能在单个提供者上设置多个用户源

> ID：13442183
> 
> 赞同：8
> 
> 时间：2012-11-18T16:47:43.637
> 
> 标签：symfony, acl, provider

我试图弄清楚为什么我不能将多个用户提供者设置为一个提供者。目前我正在配置 ACL。对于用户提供者，我希望有几个“硬编码”用户和将从数据库加载的用户。

阅读[文档](http://symfony.com/doc/current/book/security.html#using-multiple-user-providers)说明您不需要拥有两个用户提供程序 - 一个用于`in_memory`用户，一个用于`database`用户。您应该能够将它们组合成一个用户提供程序（这是我正在尝试做的）。

建议的配置是：

```
security:
    providers:
        main_provider:
            memory:
                users:
                    foo: { password: test }
            entity:
                class: Acme\UserBundle\Entity\User,
                property: username 
```

我的配置是：

```
security:
    providers:
        main_provider:
            memory:
                users:
                    foo: { password: test }
            entity:
                class: Company\EntitiesBundle\Entity\User,
                property: username 
```

不幸的是，我得到了这个例外：

```
InvalidConfigurationException: Invalid configuration for path "security.providers.main_provider": You cannot set multiple provider types for the same provider 
```

但是，如果我设置两个不同的提供者并将它们链接起来，它就可以正常工作。我不明白为什么会发生这种情况？它在文档中明确说明 - `you can accomplish this even more easily by combining the two sources into a single provider`。
我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-09T21:10:49.897

你为什么不链接供应商？您所指的文档指出您可以使用多个用户提供程序“ *...通过创建一个将两者链接在一起的新提供程序*”。

[http://symfony.com/doc/current/book/security.html#using-multiple-user-providers](http://symfony.com/doc/current/book/security.html#using-multiple-user-providers)

*每个身份验证机制（例如 HTTP 身份验证、表单登录等）只使用一个用户提供程序，并且默认使用第一个声明的用户提供程序。但是，如果您想* **通过配置指定几个用户，而其余用户则在数据库中呢？这可以通过创建一个将两者链接在一起的新提供者来实现**。

*现在，所有身份验证机制都将使用*chain_provider，*因为它是第一个指定的。反过来*， chain_provider*将尝试从*in_memory*和*user_db*提供程序加载用户。*

您所要做的就是设置一个链提供者。

```
# app/config/security.yml
安全：
    提供者：
        main_provider：
            链：
                提供者：[memory_provider，entity_provider]
        memory_provider：
            记忆：
                用户：
                    富：{密码：测试}
        entity_provider：
            实体：
                类：公司\实体捆绑\实体\用户
                属性：用户名

```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-08T23:26:59.600

您使用的是哪个 Symfony 版本？如果是 2.0，则在 2.0 文档中配置略有不同：

```
# app/config/security.yml
security:
    providers:
        main_provider:
            users:
                foo: { password: test }
            entity: { class: Acme\UserBundle\Entity\User, property: username } 
```

请注意`memory`缺少密钥。

# c# - 依靠条件 SQL Server

> ID：13442188
> 
> 赞同：-3
> 
> 时间：2012-11-18T16:48:07.000
> 
> 标签：c#, .net, sql, sql-server, oracle

我有一个表格，其中包含一些商业短文本，例如“PVT，LTD”等，如图所示。

其次，我们每次都会收到来自另一方的新头衔，例如“Taha Zubair”和“Taha PVT Ltd”。

现在我需要找到如果标题包含关键字，从数据库扫描后我只需要返回计数。如果计数为零 (0) 表示标题很简单，如“Taha Zubair”，否则返回 > 1，如果标题类似于“Taha PVT Ltd”或“Taha Trust”

图片：http://social.msdn.microsoft.com/Forums/getfile/195838

此外，我需要做一些事情，比如在存储过程中进行调整，在编程应用程序中使用整个查询（内联查询）会影响性能。

如果您有任何问题，请毫不犹豫地问它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:05:31.043

作为函数

```
Create Function F_GetNonIndividual(@SearchStr nVarchar(100)) Returns int
as  -- use Select dbo.F_GetNonIndividual('Abc Solutions PVT LTD')
begin
    Declare @Result int
    Select @Result = Count(*) 
    from NonIndividualTitle
    where @SearchStr Like ('%'+NonIndivTitle+'%')
    Return @Result
end 
```

作为程序

```
Create Procedure P_GetNonIndividual(@SearchStr nVarchar(100))
as  -- use EXEC P_GetNonIndividual 'Abc Solutions PVT LTD'
begin
    Select Count(*) 
    from NonIndividualTitle
    where @SearchStr Like ('%'+NonIndivTitle+'%')
end 
```

作为没有参数的程序

```
Create Procedure P_GetNonIndividualOut(@SearchStr nVarchar(100),  @OutValue int out)
as  
begin
    Select @OutValue=Count(*) 
    from NonIndividualTitle
    where @SearchStr Like ('%'+NonIndivTitle+'%')
end 
```

带查询示例

```
Declare @OutValue int
exec P_GetNonIndividualOut 'Abc Solutions PVT LTD',@OutValue out
print @OutValue 
```

# javascript - 如何使用 jQuery 在鼠标悬停时显示一个按钮？

> ID：13442191
> 
> 赞同：0
> 
> 时间：2012-11-18T16:48:39.027
> 
> 标签：javascript, jquery, html, css

当图像上出现鼠标悬停事件时，我试图让一个按钮出现在图像上。我在屏幕上有多个图像，我希望它们具有相同的功能。由于该按钮始终存在，因此我无法使其正常工作。关于如何让它工作的任何建议？下面是渲染的 html 和 javascript。

# javascript

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type = "text/javascript">

$(document).ready(function() {

$('.image').mouseover(function(){
            $('.munchbutton').show();
});
});

</script> 
```

# css

```
div.munchbutton{
    position: absolute; 
    bottom: 5px; 
    right: 0px;
    left: 60px;
}

div.wrapper{
    float:left; /* important */
    position:relative; /* important(so we can absolutely position the description div */ 
    padding: 5px;
} 
```

# html

```
<!-- wrapper div -->
    <div class='wrapper'>

    <!-- image -->
    <div class="image" style="position: relative; left: 0; top: 0;">

        <a href="/partners/Business/CNNMoney" >
            <img src="/static/CNNMoney.png" style="position: relative; top: 0; left: 0;"/>
        </a>

        <!-- partner munchbutton div --> 
        <div class='munchbutton'>
            <form method='post'><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='7wq8pRYNCDkXUGRv7eU6qI1BU7RKyoT8' /></div>
                <input type="hidden" name="channel" id="channel" value="CNNMoney" />
                <input type='submit' class = 'add' value='Add to plate'/>
            </form>
        </div>
        <!-- end munchbutton div -->

    </div>
    <!-- end image div -->

    </div>
<!-- end wrapper div -->

<!-- wrapper div -->
    <div class='wrapper'>

    <!-- image -->
    <div class="image" style="position: relative; left: 0; top: 0;">

        <a href="/partners/Business/EconomistMagazine" >
            <img src="/static/EconomistMagazine.png" style="position: relative; top: 0; left: 0;"/>
        </a>

        <!-- partner munchbutton div --> 
        <div class='munchbutton'>
            <form method='post'><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='7wq8pRYNCDkXUGRv7eU6qI1BU7RKyoT8' /></div>
                <input type="hidden" name="channel" id="channel" value="EconomistMagazine" />
                <input type='submit' class = 'add' value='Add to plate'/>
            </form>
        </div>
        <!-- end munchbutton div -->

    </div>
    <!-- end image div -->

    </div>
<!-- end wrapper div --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:51:44.763

为了`.show()`工作，你当然必须先隐藏按钮！

[工作小提琴](http://jsfiddle.net/u5dEp/8/)（唯一的变化是 .munchbutton 现在`display: none;`是默认的）

如果这不是你想要的，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:57:03.193

munchbutton 的原始状态应该是`display: none;`，然后您可以从那里显示它。

另外，当您设置显示时，我假设您只想在该 div 中显示按钮，因此您可能应该使用`$(this).find('.munchbutton').show();`

这里有一个鼠标悬停的小提琴 - [http://jsfiddle.net/GTw8d/](http://jsfiddle.net/GTw8d/)

# ios - 各种FB登录方式有什么区别？

> ID：13442192
> 
> 赞同：4
> 
> 时间：2012-11-18T16:48:40.910
> 
> 标签：ios, facebook, ios6, fbconnect

iOS 中有三种不同的登录方式：

1.  通过网页弹窗登录
2.  通过 Safari 登录
3.  通过本机应用程序登录

iOS 6 中还有一个 - 使用 iOS 6 Facebook 凭据通过本机弹出式控制器登录。

就我而言，我在 UIWebView 中使用 FB 评论插件，我想允许用户在那里留下评论。为此，我通过网络弹出窗口使用 FB 登录。使用其他方法会导致两种不同的结果：

1.  FB评论插件根本没有加载
2.  已加载 FB 评论插件，但用户仍未经授权（通过 Safari 登录）

虽然我不知道如何处理第一个，但我认为第二个发生是因为 cookie（或 FB 凭据）存储在 safari 中，而不是存储在我的应用程序中，这是评论插件理解用户所必需的登录。

在这种情况下，我想知道 - 我们应该何时何地使用每种 FB 登录方法？在我的情况下我应该使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:36:54.373

我建议使用 Parse 来处理社交帐户管理。与您的代码集成非常容易，并且可以免费用于您的目的。 [看一看](https://parse.com/products/social)。只需注册 Parse、创建应用程序并按照简单的快速入门指南进行操作。他们也有很好的文档和论坛来帮助你。

# soundcloud - Soundcloud API 返回一个短 URL - Javascript

> ID：13442201
> 
> 赞同：5
> 
> 时间：2012-11-18T16:49:28.280
> 
> 标签：soundcloud

我想告诉 API 返回一个短 url 并回显歌曲的短 url，而不是长 url。例如 snd.sc

我只是找不到任何有关此的文档，有人能指出我正确的方向吗？

提前致谢！

# javascript - if (window.location.hash !== "#search")

> ID：13442202
> 
> 赞同：1
> 
> 时间：2012-11-18T16:49:28.850
> 
> 标签：javascript

这种语法有什么问题吗？这似乎对我不起作用，即使我提醒了井号标签并且它与我的 if 语句匹配。

我的代码：

```
if(window.location.hash) { 
   var thehash = window.location.hash;
   if (thehash !== "#search"){

      alert(thehash); // returns "#search"

      thehash = thehash.replace(/#/g, '/');
      window.location.replace("http://url.com/" + thehash + "/");
   }
} 
```

为什么这仍然重定向包含 #search 的 url

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:52:07.037

您需要`return false`after `alert`，因此它不会运行您的其余功能

# html - 如何设置文本框向左对齐？

> ID：13442203
> 
> 赞同：0
> 
> 时间：2012-11-18T16:49:31.723
> 
> 标签：html, css, alignment

我的[网站](http://xiexianhui.com/syndicate/)有一个联系表格，我希望输入字段排在左边，目前它们在右边。我不擅长 css，我什至不知道我应该更改哪个元素的属性，尽管我知道使用 FireBug 很容易。有人能告诉我怎么做吗？太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:53:00.720

在**neon.css**`float: right;`中，从相应的样式定义中删除条目。当然，您必须将它们放置在彼此下方。

```
.foxform input, .foxform textarea {
    ...
    float: right; <-- remove this
}

.fox-dropdown-container {
    ...
    float: right; <-- and remove this
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T16:52:45.753

`text-align: left;`或者`float: left;`

# mercurial - .hgignore mercurial 中的每个分支？

> ID：13442205
> 
> 赞同：0
> 
> 时间：2012-11-18T16:49:38.963
> 
> 标签：mercurial, hgignore

是否可以在 mercurial 中有一个特定于分支的忽略文件？

将依赖项包含在`production`分支中而不是开发分支中会很方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:02:31.170

Mercurial 始终使用签出的 .hgignore 文件。所以从技术上讲，你可以在不同的分支上拥有不同的 .hgignore 文件，但是当你使用这个方案时，你需要注意当你在这个分支之间合并时它们保持不同。

当您只有一个系统应该应用其他忽略模式时，您还可以通过 ui.ignore 设置在 .hg/hgrc 中指定一个额外的 igore 文件。

```
$ cat >> .hg/hgrc << EOF
[ui]
ignore=.hg/production_ignore
EOF
$ cat > .hg/production_ignore << EOF
# example ignore file, uses the same syntax as .hgignore
syntax: glob
*.swp
*.~
EOF 
```

# entity-framework - .net 中的持久性 - ADO.NET 实体框架

> ID：13442206
> 
> 赞同：2
> 
> 时间：2012-11-18T16:49:40.533
> 
> 标签：entity-framework, ado.net, persistence

我找不到明确的答案：ADO.NET 实体框架是像 Hibernate for Java 这样的全功能持久性框架吗？

.net 中是否有任何（其他）持久性框架？我只找到了像 nHibernate 这样的开源框架，但如果 .net 中有内置的东西，我没有明确的答案。在.net中获得持久性的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:59:36.737

当您谈论持久层时，通常是数据库或文件系统，当您谈论实体框架时，它被称为 ORM，是的，我认为在 .Net 环境中 NHibernate 和实体框架应该是最流行的两个 ORM。

ORM 帮助您将数据视为域中的对象，而不是考虑表、字段和行，因此它抽象了持久性的技术方面，并在您编写软件时为您提供了一种更加模型驱动的方法。

我曾经读过很多关于域驱动设计作为架构指南的文章，但是现在在堆栈溢出中，我收到了很多关于使用六边形架构的建议，所有这些模式和实践都可以帮助您构建更好的软件，我想我们会的从未停止学习。所以是的，考虑像工件这样的 ORM 来帮助您专注于代码的更重要方面，而不仅仅是制作表格和查询。希望能帮助到你，

# c++ - 使用 GCC 编译 FreeRTOS，使用 G++ 编译应用程序代码

> ID：13442211
> 
> 赞同：3
> 
> 时间：2012-11-18T16:50:31.280
> 
> 标签：c++, c, gcc, arm, freertos

我有一块带有 Cortex M4F 的 Stellaris Launchpad 板。我想通过我自己的一些 C++ 代码在板上使用 FreeRTOS。然而，FreeRTOS 是用 C 语言编写的，因此不能用 G++ 编译；我试过了。

我在某处读到我应该用 编译 FreeRTOS `gcc`，然后用 编译我的应用程序代码`g++`，然后使用链接器将它们拉到一起。这是有道理的，但我真的很想知道如何将这种行为放在 Makefile 中。我发现[这个 Makefile](http://tmake.sourceforge.net/m-linux-gcc.html)让我更加困惑。

目前，我只是使用随 Stellaris 演示中的 FreeRTOS 示例一起分发的 Makefile，但这只是为 C 代码设置的。[这个问题](https://stackoverflow.com/questions/4927682/help-compiling-with-gcc-g)问的问题类似于我所追求的，但我无法理解如何使用 GCC 编译 FreeRTOS 以及使用 G++ 编译我的其余代码。

FreeRTOS 显然将其代码包装在`extern "C" { }`指令中，但在编译 FreeRTOS 代码库时尝试使用 G++ 仍然失败。

我不喜欢在 SO 上发布大量代码，但我认为信息越多越好。Stellaris 演示有一个通用`makedefs`文件：

```
# Get the operating system name.  If this is Cygwin, the .d files will be
# munged to convert c: into /cygdrive/c so that "make" will be happy with the
# auto-generated dependencies.
os:=${shell uname -s}

# The compiler to be used.
ifndef COMPILER
COMPILER=gcc
endif

# Definitions for using GCC.
ifeq (${COMPILER}, g++)

# Get the prefix for the tools to use.  Use arm-stellaris-eabi if it exists,
# otherwise fall back to arm-none-eabi.
PREFIX=${shell type arm-stellaris-eabi-gcc > /dev/null 2>&1 && \
         echo arm-stellaris-eabi || echo arm-none-eabi}

# The command for calling the compiler.
CC=${PREFIX}-${COMPILER}

# The location of the C compiler
# ARMGCC_ROOT is used by some makefiles that need to know where the compiler
# is installed.  It is not used further for normal stellarisware apps
ARMGCC_ROOT:=${shell dirname '${shell sh -c "which ${CC}"}'}/..

# Determine the compiler CPU/FPU options based on the processor variant.
ifndef VARIANT
CPU=-mcpu=cortex-m3
FPU=
else
ifeq (${VARIANT}, cm3)
CPU=-mcpu=cortex-m3
FPU=
else
ifeq (${VARIANT}, cm4f)
CPU=-mcpu=cortex-m4
FPU=-mfpu=fpv4-sp-d16 -mfloat-abi=softfp
else
$(error Unknown processor variant ${VARIANT}!)
endif
endif
endif

# The flags passed to the assembler.
AFLAGS=-mthumb \
       ${CPU}  \
       ${FPU}  \
       -MD

# The flags passed to the compiler.
CFLAGS=-mthumb             \
       ${CPU}              \
       ${FPU}              \
       -Os                 \
       -ffunction-sections \
       -fdata-sections     \
       -MD                 \
       -Wall               \
       -pedantic           \
       -DPART_${PART}      \
       -c

# The command for calling the library archiver.
AR=${PREFIX}-ar

# The command for calling the linker.
LD=${PREFIX}-ld

# The flags passed to the linker.
LDFLAGS=--gc-sections

# Get the location of libgcc.a from the GCC front-end.
LIBGCC=${shell ${CC} ${CFLAGS} -print-libgcc-file-name}

# Get the location of libc.a from the GCC front-end.
LIBC=${shell ${CC} ${CFLAGS} -print-file-name=libc.a}

# Get the location of libm.a from the GCC front-end.
LIBM=${shell ${CC} ${CFLAGS} -print-file-name=libm.a}

# The command for extracting images from the linked executables.
OBJCOPY=${PREFIX}-objcopy

# Tell the compiler to include debugging information if the DEBUG environment
# variable is set.
ifdef DEBUG
CFLAGS+=-g -D DEBUG
endif

# Add the tool specific CFLAGS.
CFLAGS+=${CFLAGSgcc}

# Add the include file paths to AFLAGS and CFLAGS.
AFLAGS+=${patsubst %,-I%,${subst :, ,${IPATH}}}
CFLAGS+=${patsubst %,-I%,${subst :, ,${IPATH}}}

# The rule for building the object file from each C source file.
${COMPILER}${SUFFIX}/%.o: %.c
    @if [ 'x${VERBOSE}' = x ];                            \
     then                                                 \
         echo "  CC    ${<}";                             \
     else                                                 \
         echo ${CC} ${CFLAGS} -D${COMPILER} -o ${@} ${<}; \
     fi
    @${CC} ${CFLAGS} -D${COMPILER} -o ${@} ${<}
ifneq ($(findstring CYGWIN, ${os}), )
    @sed -i -r 's/ ([A-Za-z]):/ \/cygdrive\/\1/g' ${@:.o=.d}
endif

# The rule for building the object file from each assembly source file.
${COMPILER}${SUFFIX}/%.o: %.S
    @if [ 'x${VERBOSE}' = x ];                               \
     then                                                    \
         echo "  AS    ${<}";                                \
     else                                                    \
         echo ${CC} ${AFLAGS} -D${COMPILER} -o ${@} -c ${<}; \
     fi
    @${CC} ${AFLAGS} -D${COMPILER} -o ${@} -c ${<}
ifneq ($(findstring CYGWIN, ${os}), )
    @sed -i -r 's/ ([A-Za-z]):/ \/cygdrive\/\1/g' ${@:.o=.d}
endif

# The rule for creating an object library.
${COMPILER}${SUFFIX}/%.a:
    @if [ 'x${VERBOSE}' = x ];     \
     then                          \
         echo "  AR    ${@}";      \
     else                          \
         echo ${AR} -cr ${@} ${^}; \
     fi
    @${AR} -cr ${@} ${^}

# The rule for linking the application.
${COMPILER}${SUFFIX}/%.axf:
    @if [ 'x${SCATTERgcc_${notdir ${@:.axf=}}}' = x ];                    \
     then                                                                 \
         ldname="${ROOT}/${COMPILER}/standalone.ld";                      \
     else                                                                 \
         ldname="${SCATTERgcc_${notdir ${@:.axf=}}}";                     \
     fi;                                                                  \
     if [ 'x${VERBOSE}' = x ];                                            \
     then                                                                 \
         echo "  LD    ${@} ${LNK_SCP}";                                  \
     else                                                                 \
         echo ${LD} -T $${ldname}                                         \
              --entry ${ENTRY_${notdir ${@:.axf=}}}                       \
              ${LDFLAGSgcc_${notdir ${@:.axf=}}}                          \
              ${LDFLAGS} -o ${@} $(filter %.o %.a, ${^})                  \
              '${LIBM}' '${LIBC}' '${LIBGCC}';                            \
     fi;                                                                  \
    ${LD} -T $${ldname}                                                   \
          --entry ${ENTRY_${notdir ${@:.axf=}}}                           \
          ${LDFLAGSgcc_${notdir ${@:.axf=}}}                              \
          ${LDFLAGS} -o ${@} $(filter %.o %.a, ${^})                      \
          '${LIBM}' '${LIBC}' '${LIBGCC}'
    @${OBJCOPY} -O binary ${@} ${@:.axf=.bin}
endif 
```

上面的文件是由它`Makefile`自己包含的（如下）：

```
# Defines the part type that this project uses.
PART=LM4F120H5QR

# Set the processor variant.
VARIANT=cm4f

# The base directory for StellarisWare.
ROOT=../lib

COMPILER=gcc

# Include the common make definitions.
include ${ROOT}/makedefs

# Where to find source files that do not live in this directory.
VPATH=${ROOT}/FreeRTOS/Source/portable/GCC/ARM_CM4F
VPATH+=${ROOT}/FreeRTOS/Source/portable/MemMang/
VPATH+=${ROOT}/FreeRTOS/Source
VPATH+=${ROOT}/drivers
VPATH+=${ROOT}/utils

# Where to find header files that do not live in the source directory.
IPATH=.
IPATH+=..
IPATH+=${ROOT}
IPATH+=${ROOT}/FreeRTOS/Source/portable/GCC/ARM_CM4F
IPATH+=${ROOT}/FreeRTOS
IPATH+=${ROOT}/FreeRTOS/Source/include
IPATH+=${ROOT}

# The default rule, which causes the FreeRTOS example to be built.
all: ${COMPILER}
all: ${COMPILER}/freertos_demo.axf

# The rule to clean out all the build products.
clean:
    @rm -rf ${COMPILER} ${wildcard *~}

# The rule to create the target directory.
${COMPILER}:
    @mkdir -p ${COMPILER}

# Rules for building the FreeRTOS example.
${COMPILER}/freertos_demo.axf: ${COMPILER}/buttons.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/freertos_demo.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/heap_2.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/led_task.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/list.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/port.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/queue.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/rgb.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/startup_${COMPILER}.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/switch_task.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/tasks.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/uartstdio.o
${COMPILER}/freertos_demo.axf: ${COMPILER}/ustdlib.o
${COMPILER}/freertos_demo.axf: ${ROOT}/driverlib/${COMPILER}-cm4f/libdriver-cm4f.a
${COMPILER}/freertos_demo.axf: freertos_demo.ld
SCATTERgcc_freertos_demo=freertos_demo.ld
ENTRY_freertos_demo=ResetISR
CFLAGSgcc=-DTARGET_IS_BLIZZARD_RA1

# Include the automatically generated dependency files.
ifneq (${MAKECMDGOALS},clean)
-include ${wildcard ${COMPILER}/*.d} __dummy__
endif 
```

我的一些目录结构如下：

```
Projects/
    lib/
        FreeRTOS/
        driverlib/
        drivers/
        inc/
        utils/
        makedefs
    TestProject/
        loads.cpp
        of.cpp
        files.h
        here.h
        Makefile 
```

如果我正确地说 FreeRTOS 必须使用 GCC 编译，然后与我的 C++ 项目代码链接，我该如何修改我当前的 Makefile 来做到这一点？我想要一个合理通用的解决方案，以便我可以在其他项目中重新使用它，但我对 C/C++ 构建过程或 Makefile 了解不多，因此我提出了这个（冗长的）问题。我不想/意思听起来像是在问“为我做这个”的问题，但尽管在 Google 和 SO 上搜索，我真的无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:58:20.863

我自己没有将 FreeRTOS 与 C++ 一起使用，但它已在[FreeRTOS 论坛](http://www.freertos.org/FreeRTOS_Support_Forum_Archive/freertos_support_forum_archive_index.html)上讨论过很多次，并且在 FreeRTOS Interactive 站点中有一些 C++ 框架。

# javascript - getMap 无法运行 - Google Maps API v3

> ID：13442212
> 
> 赞同：0
> 
> 时间：2012-11-18T16:50:38.113
> 
> 标签：javascript, google-maps-api-3

尝试在两个坐标之间绘制折线时，我在使用 Google Maps API v3 的 setMap 函数时遇到问题。

我检查了代码在哪里失败，`alert()`并且似乎在 setMap 函数中。有谁知道为什么会发生这种情况？

```
function showPosition(position)
  {
  lat=position.coords.latitude;
  lon=position.coords.longitude;
  speed= position.coords.speed;
  altitude = position.coords.altitude;

  latlon=new google.maps.LatLng(lat, lon, speed, altitude)
  mapholder=document.getElementById('mapholder')
  mapholder.style.height='250px';
  mapholder.style.width='500px';

  var myOptions={
  center:latlon,zoom:14,
  mapTypeId:google.maps.MapTypeId.ROADMAP,
  mapTypeControl:false,
  navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
  };
  var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);
  var marker=new google.maps.Marker({position:latlon,map:map,title:"You are here!"});

    x.innerHTML="Latitude: " + lat + " Long: " + lon;
  mapRoute();

  }

function mapRoute(showPosition, position){

var routeCoordinates = [
    new google.maps.LatLng(53.379763, -1.4658453999999999),
    new google.maps.LatLng(21.291982, -157.821856)   
  ];

  var flightPath = new google.maps.Polyline({
    path: routeCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

 flightPath.setMap(map);

} 
```

在此先感谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:57:34.590

这是一个范围问题

the`var map`在内部定义`function showPosition(position)`而不是全局变量

在任何函数调用上方添加 a`var map;`并删除`var`from`var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);`

那么你应该可以访问`map`里面`flightPath.setMap(map);`

# autocomplete - Notepad ++自动完成不适用于特定文件类型的自定义xml

> ID：13442218
> 
> 赞同：3
> 
> 时间：2012-11-18T16:51:09.570
> 
> 标签：autocomplete, notepad++

的自动完成功能适用于默认包含的`Notepad++`文件类型，例如`PHP`和。但是对于来自 Stata`CSS`的文件，我根本无法让它工作。`DO`一个简单`do.xml`的包括以下内容：

```
<?xml version="1.0" encoding="Windows-1252" ?>
<NotepadPlus>
    <AutoComplete>
        <KeyWord name="xtreg" func="yes">
            <Overload retVal="void">
                <Param name="void"/>
            </Overload>
        </KeyWord>
    </AutoComplete>
</NotepadPlus> 
```

我将它正确存储在`plugins/APIs`. 但它根本不适用于`DO`文件。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:45:53.200

好的，我发现了问题：语言的名称必须与 auto-complete 的名称相同`xml`。所以如果语言`Stata`的名称是 ，自动完成文件的名称必须是`Stata.xml`.

编辑：文档链接： http: [//docs.notepad-plus-plus.org/index.php/Editing_Configuration_Files#Autocompletion.2C_aka_API.2C_files](http://docs.notepad-plus-plus.org/index.php/Editing_Configuration_Files#Autocompletion.2C_aka_API.2C_files)

> API 文件位于 Notepad++ 安装文件夹的 plugins\APIs\ 子文件夹中。这些文件是可选的：对于您将使用自动完成或调用提示的每种语言，您只需要一个。用户定义的语言也支持它们，名称为 <Language name>.xml。

# java - MVC、Swing、观察者模式 - 更新 Jtable

> ID：13442220
> 
> 赞同：1
> 
> 时间：2012-11-18T16:51:24.743
> 
> 标签：java, swing, jtable, jframe, observer-pattern

我是 Swing 的新手。我正在使用 MVC 架构。我不确定如何设置观察者模式，以便在输入新数据时刷新 JTable。我的模型包括一个免疫课程、一个访问课程以及一个模拟患者。患者有一份就诊清单，一次就诊具有该就诊期间给予的免疫接种清单。因此，我有 3 个类 - 一个名为 MainFrame 的 JFrame Main 类，以及 2 个组件 - 一个 ImmunizationPanel JPanel，以及另一个创建 JSelectBox 的面板。

想法是启动主框架并加载两个组件，这将在下拉框中显示一个空的 Jtable 和一个可供选择的免疫列表。此时用户界面非常简单。用户将单击 SelectBox，然后按 Enter，它应该使用 SelectBox 中选择的值更新 Jtable。

我有一些提供业务逻辑的控制器。我的问题是，我要让哪些类成为观察者和可观察者？我遇到的一个问题是 MainFrame 已经扩展了 JFrame，所以它也不能扩展 Observable。那么我应该只在我的控制器中使用 Observable 和 Observer 吗？此时，我的表只有在程序重新启动并在运行时加载数据后才会更新。

如果有人需要，我可以提供代码，但我的问题不是关于代码本身，而是关于在哪里扩展 Observable 和 Observer。你是在视图、模型还是控制器中使用它？

谢谢。

# nginx - Nginx中的htaccess重写规则：设置重写路径

> ID：13442221
> 
> 赞同：0
> 
> 时间：2012-11-18T16:51:33.943
> 
> 标签：nginx, rewrite

我有一个 htaccess 文件，我正在尝试将其转换为 nignx 配置文件。

这是我的 htaccess 文件。

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule    !\.(jpg|css|js|gif|png)$    public/    [L]
RewriteRule !\.(jpg|css|js|gif|png)$ public/index.php?url=$1 
```

以及我在 nginx 配置文件中的规则：

```
location / {
if ($request_uri !~ "-f"){
        rewrite !\.(jpg|css|js|gif|png)$ public/ break;
}
rewrite !\.(jpg|css|js|gif|png)$ public/index.php?url=$1;
}

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
location ~ \.php$ {
        # Move to the @missing part when the file doesn't exist
        try_files $uri @missing;

        # Fix for server variables that behave differently under nginx/$
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        # Include the standard fastcgi_params file included with ngingx
        include fastcgi_params;
        fastcgi_param PATH_INFO $fastcgi_path_info;
        fastcgi_index index.php;

        # Pass to upstream PHP-FPM; This must match whater you name you$
        #fastcgi_pass phpfpm;
        fastcgi_pass 127.0.0.1:9000;
}

location @missing {
        rewrite ^(.*)$ public/index.php?url=$1 break;
} 
```

但是，当我点击 / 时，我得到了 403 Forbidden，但我可以访问 /public/index.php，因此重写不起作用。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:13:56.153

您的`if ($request_uri !~ "-f")`-statement 不会按照您在 nginx 中想要的方式解析它们。您不是在检查文件是否存在，而是针对否定的 regex 进行处理`-f`。在 nginx 中使用 if 检查文件是否存在`if ( -f $request_filename )`

有关 nginx语句的完整详细信息，请参阅[http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if)`if`

通常，您要替换常见的 .htaccess 节：

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule    <regex>    <target> 
```

使用 nginx 等效项：

```
location ~* <regex> { try_files $uri $uri/ <target>;} 
```

for your stated bit you'd get a nested location as follows:

```
location / {
  location ~* \.(jpg|css|js|gif|png)$ { try_files $uri $uri/ /public/; }
  location !~* (.*)\.(jpg|css|js|gif|png)$ { 
    try_files $uri $uri/ /public/index.php?url=$1; 
  }
} 
```

# mysql - 从 Delphi XE3 连接到嵌入式 MySQL

> ID：13442222
> 
> 赞同：1
> 
> 时间：2012-11-18T16:51:34.647
> 
> 标签：mysql, delphi, embed, delphi-xe3

如何从 Delphi XE3 连接到嵌入式 MySQL 服务器（libmysqld.dll 库）？目前我只知道一种方法——使用 DevArt MyDAC 组件（特定的 TMyEmbConnection），但现在我的任务无法接受它的报酬。尝试使用dbExpress，但不成功。

所以，我有两个问题： 1\. 我可以使用 dbExpress 或 Delphi XE3 的任何其他组件吗？2\. 任何第三方组件（最好免费）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:38:57.887

我过去曾为此使用过[ZeosLib](http://sourceforge.net/projects/zeoslib/)。实际上工作得很好，尽管很快就证明拥有一个中央数据库更容易。

有几个人想使用该应用程序，然后他们想分享他们的更改，并保持同步等。幸运的是，切换到 mysql 服务器并没有比复制数据和更改连接组件参数更多的工作。

# java - 在休眠中为表创建唯一索引，其中一列是外键

> ID：13442224
> 
> 赞同：0
> 
> 时间：2012-11-18T16:51:36.427
> 
> 标签：java, hibernate

好吧，我在休眠方面并不是那么先进，我尝试进行了很多搜索，发现了很多类似的问题，但没有一个真正适用于我的案例。我有一个表 TABLE1，它有一个索引“id”，另一个表作为索引（TABLE1_ID 和 NUMBER）。只有 TABLE1_ID 是外键，而 number 不引用任何特定内容

表 1 具有以下休眠映射

```
 <class name="com.test.basic.BASICTABLE1"
    entity-name="com.test.TABLE1" table="TABLE1"
    dynamic-update="true" optimistic-lock="version">
    <id name="id" type="long">
        <column name="id" />
        <generator class="native">
            <param name="sequence">${table1_id.generator.sequence}</param>
        </generator>
    </id>
    <version name="versionNumber" column="verno" generated="always"
        access="field" />
    <property name="column1" column="column1" type="string" length="19"
        not-null="true" access="field" />
 </class> 
```

我不确定另一个表的映射应该是什么。我是通过以下方式做到的

```
 <class name="com.test.basic.BASICTABLE2"
    entity-name="com.test.TABLE2" table="table2"
    dynamic-update="true" optimistic-lock="version">

    <composite-id name="id" class="com.test.basic.TABLE1TABLE2Id" >
      <key-property name="TABLE1_ID" column="TABLE1_ID" type="long" />
      <key-property name="NUMBER" column="NUMBER" type="short"/>
    </composite-id>
 </class> 
```

请注意，我在某处读到应该有一些中间映射后创建了类 TABLE1TABLE2Id。

我确定 TABLE2 映射有问题（我对休眠没有那么先进）但是在尝试安装应用程序时，我收到以下错误

```
 Foreign key (TABLE1 [id]) must have same number of columns as the referenced primary key (TABLE2 [TABLE1_ID, NUMBER]) 
```

我感谢任何人的帮助谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:33:01.980

[身份副本（国外生成器）](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch05.html#mapping-declaration-id)

> 最后，您可以要求 Hibernate 从另一个关联实体复制标识符。在 Hibernate 行话中，它被称为外部生成器，但 JPA 映射读起来更好，受到鼓励。

一个实体的主键可能是另一个表的主键的外键。

```
@Entity
class MedicalHistory implements Serializable {
  @Id Integer id;

  @MapsId @OneToOne
  @JoinColumn(name = "patient_id")
  Person patient;
}

@Entity
class Person {
  @Id @GeneratedValue Integer id;
} 
```

# c - 3D 金字塔显得分散，两边混杂

> ID：13442230
> 
> 赞同：0
> 
> 时间：2012-11-18T16:52:02.297
> 
> 标签：c, opengl, glut

首先我定义了一个结构来表达金字塔的坐标：

```
typedef struct
{
    GLfloat xUp;
    GLfloat yUp;
    GLfloat zUp;
    GLfloat base;
    GLfloat height;
}pyramid; 
```

这里非常不言自明：我存储了最高点的坐标、底数和高度。
我写了一个绘制金字塔的函数：

```
void drawPyramid(pyramid pyr)
{
    GLfloat p1[]= {pyr.xUp+pyr.base/2.0, pyr.yUp-pyr.height, pyr.zUp-pyr.base/2.0};
    GLfloat p2[]= {pyr.xUp+pyr.base/2.0, pyr.yUp-pyr.height, pyr.zUp+pyr.base/2.0};
    GLfloat p3[]= {pyr.xUp-pyr.base/2.0, pyr.yUp-pyr.height, pyr.zUp+pyr.base/2.0};
    GLfloat p4[]= {pyr.xUp-pyr.base/2.0, pyr.yUp-pyr.height, pyr.zUp-pyr.base/2.0};
    GLfloat up[]= {pyr.xUp, pyr.yUp, pyr.zUp};

    glBegin(GL_TRIANGLES);

    glColor4f(1.0, 0.0, 0.0, 0.0);
    glVertex3fv(up);
    glVertex3fv(p1);
    glVertex3fv(p2);

    glColor4f(0.0, 1.0, 0.0, 0.0);
    glVertex3fv(up);
    glVertex3fv(p2);
    glVertex3fv(p3);

    glColor4f(0.0, 0.0, 1.0, 0.0);
    glVertex3fv(up);
    glVertex3fv(p3);
    glVertex3fv(p4);

    glColor4f(1.0, 1.0, 0.0, 0.0);
    glVertex3fv(up);
    glVertex3fv(p4);
    glVertex3fv(p1);
    glEnd();

    glColor4f(0.0, 1.0, 1.0, 0.0);
    glBegin(GL_QUADS);
    glVertex3fv(p1);
    glVertex3fv(p2);
    glVertex3fv(p3);
    glVertex3fv(p4);
    glEnd();

} 
```

我努力按逆时针顺序绘制所有顶点，但可能我搞砸了。
这就是我在渲染函数中显示金字塔的方式：

```
void display()
{
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glTranslatef(0.0, -25.0, 50.0);
    glRotatef(-angle, 0.0, 1.0, 0.0);
    glTranslatef(0.0, 25.0, -50.0);

    pyramid pyr;
    pyr.xUp=0.0;
    pyr.yUp=10.0;
    pyr.zUp=50.0;
    pyr.base=10.0;
    pyr.height=18.0;
    glColor4f(1.0, 0.0, 0.0, 0.0);
    drawPyramid(pyr);

    glutSwapBuffers();
} 
```

我还使用了在 glut 主循环之前调用的 init 方法：

```
void init()
{
    glEnable(GL_DEPTH);
    glViewport(-1.0, 1.0, -1.0, 1.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(35.0, 1.0, 1.0, 100.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0.0,1.0,0.0, 0.0,1.0,30.0, 0.0,1.0,0.0);
} 
```

角度只是我用来旋转金字塔的两倍，可以通过按'r'来改变，但这不相关。看来真正的问题是我如何绘制顶点。
问题是金字塔的面看起来很分散，乱七八糟。我最好用一张图片来描述这种情况：

![金字塔](../Images/0b168474872190d3a9e3fea929dfac00.png)

有一张脸太小了，显示出来了，我不知道为什么。
如果我旋转金字塔，它看起来很乱，我什至录制了一段视频来描述这一点。
如果问题不完全清楚，稍后我可以上传它。

PS：很多人注意到我使用过时的技术。但不幸的是，这是我的大学提供的。

**编辑**

我忘了说主要功能：

```
int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(500, 500);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
    glutCreateWindow("Sierpinsky Pyramid");
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    init();
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:07:10.963

看起来深度缓冲区没有初始化。

打电话`glEnable(GL_DEPTH_TEST)`是不够的。您必须正确初始化 glut 并指定您想要深度缓冲区支持，否则您将无法获得深度缓冲区。如果我没记错的话，这是使用`glutInitDisplayMode(GLUT_DEPTH|...)`. [请参阅此处](http://csclab.murraystate.edu/bob.pilgrim/515/lectures_02.html)的文档和[此处](http://www.opengl.org/resources/libraries/glut/spec3/node12.html#SECTION00033000000000000000)的介绍。可以使用 google 找到更多信息。

- 编辑 -

您将无效参数传递给 glEnable。调用`glEnable(GL_DEPTH_TEST)`而不是`glEnable(GL_DEPTH)`.

还：

1.  显示功能中的矩阵代码不受 glPushMatrix/glPopMatrix 保护。这意味着每次旋转金字塔时，都会将旋转应用于先前的变换。即调用显示函数将旋转金字塔。
2.  使用无效参数调用 glViewport。glViewport 需要 4 个整数参数，但您正在尝试传递浮点数。另外，“-1.0的宽度”应该是什么意思？
3.  您尚未检查任何错误代码 (glGetError)。如果您在 glEnable 调用后尝试调用 glGetError，那么您会看到它返回 GL_INVALID_ENUM。

OpenGL 有文档。文档可在 opengl.org 上找到。使用它并阅读它。另外，我建议阅读“OpenGL 红皮书”。

# javascript - Jquery表单Ajax提交

> ID：13442231
> 
> 赞同：0
> 
> 时间：2012-11-18T16:52:02.057
> 
> 标签：javascript, jquery, ajax

我想在后台使用 ajax 提交表单。我试过了：

```
<div class="form-horizontal" id="form">
    <label for="name" class="control-label">Username</label>
    <div class="controls">
        <span id="name_input"><input type="text" name="name" id="medium" class='input-medium input-square'></span>
        <span class="help-inline" id = "ajax_load"></span>
    </div>
    <div class="form-actions">
        <button class="btn btn-red5" onclick="resolve()">Login</button>
        <input type="reset" class='btn btn-danger' value="Reset">
    </div>                                                  
</div> 
```

和 Javascript：

```
<script type="text/javascript">
    var resolve = function () {
            jAlert('test', 'test');
                $('#ajax_load').html('<a href="#" class="btn btn-mini btn-square tip" title="Reloading"><img src="templates/img/ajax-loader.gif" alt=""></a>');
                $.ajax( {
                    url : 'plugin.php?plugin=test',
                    type : 'post',          
                    data: $("#form").serialize(),
                    success : function( resp ) {
                        if(resp.ajax_success == false) {

                        } else {
                            jAlert('test', 'test');
                        }
                    }
                });     
    };
</script> 
```

我收到警报，但没有提交表单。我用 Live http 标头检查了这一点。

为什么不提交表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:54:01.060

### 如果它不提交表单，因为`#form`它不是表单。

改变：

```
<div class="form-horizontal" id="form"> 
```

至：

```
<form class="form-horizontal" id="form"> 
```

您需要将 替换`resp.ajax_success`为`resp`。让我们也知道`plugin.php?plugin=test`URL 的响应。

* * *

如果您不想`<form>`在单击提交按钮时提交，请以这种方式在函数`return false;`末尾添加一个：`resolve`

```
var resolve = function () {
    jAlert('test', 'test');
    $('#ajax_load').html('<a href="#" class="btn btn-mini btn-square tip" title="Reloading"><img src="templates/img/ajax-loader.gif" alt=""></a>');
    $.ajax( {
        url: 'plugin.php?plugin=test',
        type: 'post',          
        data: $("#form").serialize(),
        success: function( resp ) {
            if(resp.ajax_success == false) {

            } else {
                jAlert('test', 'test');
            }
        }
    });
    return false;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:55:46.953

这是因为**您还没有使用**从 div 序列化数据的表单

```
<div class="form-horizontal" id="form"> 
```

不形成表格

应该

```
<form class="form-horizontal" id="form"> 
```

# c++ - 如何解决 mingw32-make.exe exited with code 2 error？

> ID：13442233
> 
> 赞同：3
> 
> 时间：2012-11-18T16:52:06.480
> 
> 标签：c++, qt, mingw

我已经手动安装了Windows`Qt Open source 4.8.3`库。从 Qt Creator 我设置了工具包和编译器。我打开了 Qt Creator 附带的模拟时钟示例并重建了项目。编译器发出以下错误。`Windows 8 Pro x64``Qt Creator 2.6.0``MingW 4.4.0`

```
Running steps for project analogclock...

Starting: "C:\Qt\4.8.3\bin\qmake.exe" C:\Qt\4.8.3\examples\widgets\analogclock\analogclock.pro -r -spec win32-g++

The process "C:\Qt\4.8.3\bin\qmake.exe" exited normally.

Starting: "C:\MingW\bin\mingw32-make.exe" 

C:/MingW/bin/mingw32-make -f Makefile.Release

mingw32-make[1]: Entering directory `C:/Qt/4.8.3/examples/widgets/analogclock-build-Desktop-Release'

g++ -c -O2 -Wall -Wextra -fno-exceptions -fno-rtti -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -DQT_NO_DYNAMIC_CAST -I"..\..\..\include\QtCore" -I"..\..\..\include\QtGui" -I"..\..\..\include" -I"..\..\..\include\ActiveQt" -I"release" -I"..\analogclock" -I"." -I"..\..\..\mkspecs\win32-g++" -o release\analogclock.o **..\analogclock\analogclock.cpp**

mingw32-make[1]: Leaving directory `C:/Qt/4.8.3/examples/widgets/analogclock-build-Desktop-Release'

mingw32-make[1]: *** [release/analogclock.o] Error 1

mingw32-make: *** [release] Error 2

The process "C:\MingW\bin\mingw32-make.exe" exited with code 2.

Error while building/deploying project analogclock (target: Desktop)

When executing step 'Make' 
```

我已经验证**C:/Qt/4.8.3/examples/widgets/analogclock/analogclock.cpp**存在。此外，这个项目附带 Qt 安装，我没有改变任何东西。

为什么会发生此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:18:07.587

看来您的 g++ 安装不干净，因此无法启动编译器（这也是您在评论中所说的）。尝试重新安装，然后可以尝试构建一个hello world程序来验证是否可以运行g++。另外，请验证您的 PATH 变量是否已为 mingw 正确配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T03:02:56.537

听起来像是一个糟糕的mingw安装。您的 %PATH% 中是否还有其他 unix 式的东西，即 cygwin，或 msys，perl，ruby，...或其他版本的 mingw？

# iphone - 尝试实施应用内购买时遇到问题

> ID：13442234
> 
> 赞同：0
> 
> 时间：2012-11-18T16:52:09.470
> 
> 标签：iphone, xcode, ipad, cocoa, in-app-purchase

这是我第一次实施应用内购买，我正在使用位于此处的教程：[Ray Wenderlich](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

现在我确信这很简单，但我在解决问题时遇到了问题，所以我想我会在这里问所有的大师。

编译器说 _products 是使用未声明的标识符

```
 - (void)productPurchased:(NSNotification *)notification {

 NSString * productIdentifier = notification.object;
 [_products enumerateObjectsUsingBlock:^(SKProduct * product, NSUInteger idx, BOOL *stop) {
 if ([product.productIdentifier isEqualToString:productIdentifier]) {

 *stop = YES;
 }
 }];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:57:08.677

这实际上是一个简单的错误。大多数问题都是，我们都会时不时地成为它们的受害者。

```
NSArray *_products; 
```

那一小行代码修复了我遇到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:57:31.857

试试这篇文章[http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)他们教如何在应用程序购买中实施，甚至教其他用户测试该应用程序。 ..

# c - 杀戮和信号的准确性如何？

> ID：13442235
> 
> 赞同：4
> 
> 时间：2012-11-18T16:52:09.730
> 
> 标签：c, linux, signals

测试一些 POSIX 代码，我注意到信号的利用不是很准确。这是客户端的示例代码：

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

#define MESSAGE "hello\n"
#define PAUSE   15000

int main(int argc, char **argv)
{
    int pid = atoi(argv[1]);
    size_t i;
    int j;

    for (i = 0; i < sizeof MESSAGE; ++i) {
        for (j = 0; j < MESSAGE[i]; ++j) {
            kill(pid, SIGUSR1);
            usleep(PAUSE);
        }
        kill(pid, SIGUSR2);
        usleep(PAUSE);
    }
    return 0;
} 
```

这是服务器的代码：

```
#include <signal.h>
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>

static unsigned char index;

static void inc(int sig)
{
    ++index;
    (void) sig;
}

static void prt(int sig)
{
    printf("%c", index);
    fflush(stdout);
    index = 0;

    (void) sig;
}

int main(void)
{
    printf("%ld\n", (long int)getpid());

    signal(SIGUSR1, inc);
    signal(SIGUSR2, prt);

    for (;;)
        ;

    return 0;
} 
```

服务器接收的字符取决于`PAUSE`客户端的值。它是来自信号的限制，还是我犯了错误？如果是这样，我在哪里可以找到这些环境注意事项（我使用 Linux 2.6.35）？

注意：要执行客户端的代码，您必须在命令行参数中写入服务器的 PID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T17:21:17.950

这种进程间通信不仅效率极低；这也是无效的。信号不排队；它们是待处理的或非待处理的 (*)。因此，除非接收者进程在发送者发送另一个信号之前读取该信号，否则信号将丢失。

如果你真的想做这样可怕的事情，接收者需要通过向发送者发回信号来确认它收到的每个信号，而发送者需要等待发送下一个信号，直到前一个信号被确认。

(*) 实际上，*实时*信号是排队的，但是队列的深度是有限制的，确保它不会溢出需要痛苦和脆弱的实时优先级管理逻辑。

# ruby-on-rails - 将设计与 CanCan 一起使用

> ID：13442242
> 
> 赞同：0
> 
> 时间：2012-11-18T16:52:27.437
> 
> 标签：ruby-on-rails, ruby, devise, authorization, cancan

这可能是一个菜鸟问题，但无论如何我都在问。

所以我正在构建一个人们发布帖子的应用程序。所以它是一个社交网络。

但我不希望人们能够编辑和删除其他人的帖子。

我认为基于角色的系统在这里行不通，因为人们只管理自己的**帖子**。

我在考虑某种 AR 关联，但我不知道这是否可行。

我想要的是这样的`app/models/ability.rb`：

```
class Ability
  def initialize(user)
    if current_user.username == @post.username
      can :edit, Post
      can :destroy, Post
    end
  end 
end 
```

我将如何去做（假设模型是`User`and `Post`）？

所以基本上我应该做一个[用户有帖子](http://i.imgur.com/EH9md.png)，还是用户有并且属于[帖子](http://i.imgur.com/47fus.png)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:27:01.777

用这个

```
class Ability
  def initialize(user)
    can [:edit, :destroy], Post do |post|
      post.try(:user) == user
    end
  end 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:25:18.627

问题是该类`Ability`将无权访问`@post`实例变量。所以我认为`Ability.rb`你不得不说用户`can :manage, Post`可以创建、编辑和销毁 Post 对象。然后由您的控制器和模型层来确保它们只能编辑和销毁自己的帖子。

使用 CanCan，您可以`load_and_authorize_resource`在控制器顶部调用以保护整个事物，但在您的情况下，您`PostsController`可能需要在操作级别进行保护。例如，调用`authorize! :manage, @post`、和操作，同时检查以确保、 可以确保人们只能修改自己的帖子。`create``destroy``edit``update``current_user.username == @post.username`

最后，您可能希望用户通过简单地将帖子标记为已删除来“软删除”，而不是实际删除帖子。在这种情况下，您将明确授权创建和编辑帖子，但您不会授权它们实际`destroy`发布帖子。在您的`index`和`show`操作中，您将确保不显示标记为已删除的帖子。

对于基于角色的系统，您可能需要一组版主或添加另一个管理员。那时您将需要一个基于角色的系统。我几乎总是让我的角色开始，即使它只是拥有`admin`和`user`角色。

# php - 从 MySQL 数据库中列出类别，然后在 PHP 中列出子类别

> ID：13442243
> 
> 赞同：2
> 
> 时间：2012-11-18T16:52:39.637
> 
> 标签：php, mysql, categories

我一直在做一个项目来构建一个简单的电子商务系统，在我开始显示类别导航之前一直运行良好。

当我在 MySQL 中构建类别时，我有类似的东西：

```
id             name             parent_id
1              books            null
2              art              1
3              biography        1
4              games            null
5              electronics      null
6              FPS              4 
```

我编写了以下 SQL 来检索父类别，然后是子类别：

```
SELECT parent.name AS parent_name, child1.name AS child1_name
FROM categories AS parent
LEFT OUTER JOIN categories AS child1 ON child1.parent_id = parent.id
WHERE parent.parent_id IS NULL
ORDER BY parent_name, child1_name 
```

结果是一个包含多个数组的数组：

```
Array
(
    [0] => Array
    (
        [parent_name] => Books
        [child1_name] => Art
    )

    [1] => Array
    (
        [parent_name] => Books
        [child1_name] => Biography
    )

    [2] => Array
    (
        [parent_name] => Clothes, Shoes &amp; Watches
        [child1_name] => 
    )

    [3] => Array
    (
        [parent_name] => Computers &amp; Office
        [child1_name] => 
    )

    [4] => Array
    (
        [parent_name] => Electronics
        [child1_name] => 
    )
) 
```

我无法将此信息显示为无序列表。期望的效果是这样的：

```
<ul>
    <li>Books
        <ul>
            <li>Art</li>
            <li>Biography</li>
        </ul>
    </li>
    <li>Computers</li>
    <li>Electronics</li>
</ul> 
```

有人有解决这个问题的方法吗？我是否需要更改我的 MySQL 代码甚至数据库结构？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:56:26.137

解决方案并不简单，但可以为你工作:)。

```
$newArray = array();
foreach($arrayFromDatabase as $key => $category){
   //replace key
   $newArray[$category['parent_name']][] = $category['child1_name'];   
}

//Open list
$toEcho = "<ul>";
foreach($newArray as $name => $subCat){
   if(!empty($subCat)){
     $toEcho_ = "<ul>";
     foreach($subCat as $cat){
        $toEcho_ .= "<li>$cat</li>";   
     }
     $toEcho_ .= "</ul>";
     $toEcho .= "<li>$name $toEcho_</li>"; 
   } else{
      $toEcho .= "<li>$name</li>";   
   } 
}

//Close list
echo $toEcho . "</ul>"; 
```

# php - 是否有像 *.oft 这样的电子邮件模板文件，可以在所有电子邮件程序中打开？

> ID：13442250
> 
> 赞同：6
> 
> 时间：2012-11-18T16:53:12.840
> 
> 标签：php, email, templates

目前我正在编写一个充满数据的网络界面。我想将此数据导出为电子邮件模板，以便您之后可以编辑电子邮件。是否有像 *.oft 这样的格式，可以被所有电子邮件程序读取？

我知道HTML（`<a href="mailto:[...]">`）中有这样的功能。由于电子邮件文本很长，我想附加文件，这似乎不是一个好的解决方案。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:37:48.710

没有您正在寻找的格式。设计电子邮件协议和格式的互联网工程师关心的是通过网络发送的内容，而不是机器内部的内容。因此，电子邮件在发送和接收消息时具有高度的互操作性，但内部 API 没有类似的标准主体。有时，模仿流行软件的行为会产生*事实上的*标准，但对于您正在寻找的电子邮件功能来说，这并没有发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:42:04.080

也许您的意思是 .EML 文件？我记得这个文件几乎可以用 Outlook、Thunderbird 等所有电子邮件客户端打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:55:22.803

据我所知，您可以采用以下两种方式之一：

1 - 使用预构建的解决方案，例如这些人在[postageapp.com](http://postageapp.com/benefits-features)提供的解决方案，他们的 API 看起来非常简单，并且可以完成您想要实现的一切。

2 - 更耗时，但您可以使用 PHP 创建自己的模板。我会沿着这些思路去做。这是一种非常简单的方法。您可以在头脑中编写自己的 CSS 并发疯。请记住，当涉及到 HTML 电子邮件时，表格是王道:) 编写模板后，您可以通过 $content 来填充它...。

发件人.php

```
<?php

        $email = "Hello, \n";
        $email.= "Very <strong>impressed</strong> with your email! \n\n";
        $email.= "Faithfully\n";
        $email.= "Mr Example\n";

        $to = "me@me.me"; // <-- Set this as yours for testing...

        $from = "someone@nice.me";
        $subject = "An email";
        $headers = "From: Someone nice <" . $from . ">\r\n";
        $headers .= "Reply-To: ". $from . "\r\n";
        $headers .= "MIME-Version: 1.0\r\n";
        $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
        $message = '<html><body>';
        $message .= nl2br($email); // <---- if your email contains newline characters - it will convert them to <br />
        $message .= '<br /><a href="http://www.example.com" target="_blank">www.example.com</a>';   
        $message .= "</body></html>";
        mail($to, $subject, $message, $headers);    
            // ADD LOTS OF PROTECTION IF NOT HARD CODING :)
?> 
```

为了扩展这一点——例如，如果你使用 Gmail，那么你可以使用 Google 的 SMTP 来发送它——这样电子邮件就不会说“代表发送”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T01:55:41.387

只需使用没有 CSS 的 HTML 创建电子邮件。任何数据或二进制文件都可以通过 PHP 传递，然后通过电子邮件发送给收件人。

To get you started, Create a file using [fopen();](http://php.net/manual/en/function.fopen.php%22Fopen%28%29;%22). PHP has other functions that would allow you to [edit](http://us1.php.net/manual/en/function.fwrite.php%22fwrite%22), [open](http://php.net/manual/en/function.fopen.php%22open%22), [search&replace](http://php.net/manual/en/function.str-replace.php%22) and even convert a file to a format of your choice. This is equivalent to a .oft file if not better, because all emails are be sent in text or a html equivalent regardless of the email client.

If you'd would like some more info on how to create this, let me know.

# android - 在android上创建确认对话框类

> ID：13442252
> 
> 赞同：2
> 
> 时间：2012-11-18T16:53:16.387
> 
> 标签：android, dialog, confirm

我尝试使用布尔值作为结果创建自己的确认对话框类。我已经阅读了任何教程或建议，但结果不是我想要的。

问题是我讨厌写长代码，我想写一个简单的代码。这个比较delphi到android在写确认对话框

德尔福：

`if MessageDlg ('Message Text', mtConfirmation, [mbYes, mbNo], 0)`

安卓：

```
boolean answer = false;

public boolean Confirm (Activity act, String Title, String ConfirmText,
CancelBtn String, String OkBtn) {
  AlertDialog dialog = new AlertDialog.Builder (act). Create ();
  dialog.setTitle (Title);
  dialog.setMessage (ConfirmText);
  dialog.setCancelable (false);
  dialog.setButton (DialogInterface.BUTTON_POSITIVE, OkBtn,
  new DialogInterface.OnClickListener () {
    public void onClick (DialogInterface dialog, int buttonId) {
  answer = true;
  }
});
dialog.setButton (DialogInterface.BUTTON_NEGATIVE, CancelBtn,
new DialogInterface.OnClickListener () {
  public void onClick (DialogInterface dialog, int buttonId) {
    answer = false;
  }
});
dialog.setIcon (android.R.drawable.ic_dialog_alert);
return answer;
} 
```

问题是我是否可以创建一个生成确认对话的类，该类将产生一个布尔值真或假，就像在 Delphi 中一样。

确认对话框，以便该类可以在课堂或其他活动中使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:52:48.203

Android 并不总是传统的。您不能显示对话框并等待它显示，然后执行某些操作。

您需要显示一个对话框，并在回调中响应是/否按钮。

这样的事情是一种解决方案：

```
/**
 * Display a confirm dialog. 
 * @param activity
 * @param title
 * @param message
 * @param positiveLabel
 * @param negativeLabel
 * @param onPositiveClick runnable to call (in UI thread) if positive button pressed. Can be null
 * @param onNegativeClick runnable to call (in UI thread) if negative button pressed. Can be null
 */
public static final void confirm(
        final Activity activity, 
        final int title, 
        final int message,
        final int positiveLabel, 
        final int negativeLabel,
        final Runnable onPositiveClick,
        final Runnable onNegativeClick) {

            AlertDialog.Builder dialog = new AlertDialog.Builder(activity);
            dialog.setTitle(title);
            dialog.setMessage(message);
            dialog.setCancelable (false);
            dialog.setPositiveButton(positiveLabel,
                    new DialogInterface.OnClickListener () {
                public void onClick (DialogInterface dialog, int buttonId) {
                    if (onPositiveClick != null) onPositiveClick.run();
                }
            });
            dialog.setNegativeButton(negativeLabel,
                    new DialogInterface.OnClickListener () {
                public void onClick (DialogInterface dialog, int buttonId) {
                    if (onNegativeClick != null) onNegativeClick.run();
                }
            });
            dialog.setIcon (android.R.drawable.ic_dialog_alert);
            dialog.show();

        }

} 
```

要使用上述方法，可以使用以下方法：

```
 Alert.confirm(activity, R.string.titFileExport, R.string.lblFileConfirmOverwrite, 
                R.string.yes, R.string.no, 
                new Runnable() { public void run() {performExport(activity, app, currentSong, saveFile);}}, 
                null);
        return; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:22:20.800

您可以为对话框使用自定义布局，或者对于一些更复杂的需求，创建以对话框为主题的 Activity 并使用`startActivityForResults()`. 只需将其添加到活动清单条目中，即可设计您的“对话” UI 和主题活动：

```
android:theme="@android:style/Theme.Dialog" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:51:06.357

尝试使用cordova，最新的稳定版本是2.1.0 它有一个navigator.notification（在这种情况下是alert或confirm）API

[http://docs.phonegap.com/en/2.1.0/guide_getting-started_index.md.html#Getting%20Started%20Guides](http://docs.phonegap.com/en/2.1.0/guide_getting-started_index.md.html#Getting%20Started%20Guides)

[http://docs.phonegap.com/en/2.1.0/cordova_notification_notification.md.html#Notification](http://docs.phonegap.com/en/2.1.0/cordova_notification_notification.md.html#Notification) 唯一的缺点是，对于黑莓，本机应用程序更容易出错

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T18:53:38.617

好的。所以你想要一个方法或类，你只需要传递值，每次你需要一个对话框时都会调用它。我制作了一个接收短信并将其显示在对话框中的程序。您只需要将值作为意图传递并做任何您喜欢的事情。它是一个简单的程序，您可以根据需要进行修改。 [http://zohaibbrohi.blogspot.com/2012/11/recieve-sms-and-show-it-in-activity-as.html](http://zohaibbrohi.blogspot.com/2012/11/recieve-sms-and-show-it-in-activity-as.html)

# facebook - 让 Like 按钮理解分隔页面

> ID：13442255
> 
> 赞同：0
> 
> 时间：2012-11-18T16:53:55.083
> 
> 标签：facebook, wordpress, facebook-like, facebook-social-plugins

我运行一个多作者 Wordpress 平台，作者在该平台上发布文章，其中许多文章被分成几页。访问者可以通过单击`Next`按钮浏览文章中的页面。这是各种类型的文章，如画廊、长篇文章、列表等

我相信你们现在都熟悉“下一步”按钮了。这里的问题是 Facebook 喜欢按钮无法检测到它是**一篇**文章并将其视为完全独立的页面。

这是我用于 Like 按钮的**有效XHTML 1.0 代码：**

```
<!--[if IE]>
<iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo urlencode("http://domain.com" . $_SERVER["REQUEST_URI"]); ?>%2F&amp;layout=button_count&amp;show_faces=true&amp;width=300&amp;action=like&amp;font&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border-style:none; overflow:hidden; width:200px; height:21px;" allowTransparency="true">
</iframe>
<![endif]-->
<!--[if !IE]>-->
<iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo urlencode("http://domain.com" . $_SERVER["REQUEST_URI"]); ?>%2F&amp;layout=button_count&amp;show_faces=true&amp;width=300&amp;action=like&amp;font&amp;colorscheme=light&amp;height=21" style="border-style:none; overflow:hidden; width:200px; height:21px;">
</iframe>
<!--<![endif]--> 
```

IE 条件在那里，以便它在 IE8 中正常工作。

文章的网址是这样的。原来的第一页是：

```
http://domain.com/title-of-the-article/ 
```

第二页是：

```
http://domain.com/title-of-the-article/2/ 
```

依此类推...**如何使“赞”按钮将第二页检测为第一页（原始）并避免将它们分开**？我已经用谷歌搜索了一整天，并且必须找到至少 50 位不同的程序员在没有解决方案的情况下提出这个问题，所以很明显还有其他人希望得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:03:43.247

为什么不将您的此代码替换`<?php echo urlencode("http://domain.com" . $_SERVER["REQUEST_URI"]); ?>`为`<?php echo urlencode(get_permalink()); ?>`或指定帖子/页面 ID 作为参数`<?php echo urlencode(get_permalink($post->ID)); ?>`。所以代码必须是这样的

```
 //make sure to declare the global $post variable
  global $post;
  <iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo urlencode(get_permalink()); ?>%2F&amp;layout=button_count&amp;show_faces=true&amp;width=300&amp;action=like&amp;font&amp;colorscheme=light&amp;height=21" style="border-style:none; overflow:hidden; width:200px; height:21px;"> 
```

```
 //or with id specified
 global $post;
 <iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo urlencode(get_permalink($post->ID)); ?>%2F&amp;layout=button_count&amp;show_faces=true&amp;width=300&amp;action=like&amp;font&amp;colorscheme=light&amp;height=21" style="border-style:none; overflow:hidden; width:200px; height:21px;"> 
```

即使页面在任何页码中，它仍然会呈现原始页面永久链接。fb like 按钮会将页面处理为另一个不同的页面，因为永久链接不同。

# mysql - 如何创建一个新的 MySQL 表作为主表中字段的子集？

> ID：13442256
> 
> 赞同：0
> 
> 时间：2012-11-18T16:53:59.530
> 
> 标签：mysql

我有一个包含大约 30 个字段的 MySQL 表。我需要使用这些字段的子集创建第二个表，加上 CURDATE() 来跟踪他们的支出历史。我收到语法错误，但也许我的方法一开始就不正确。请复习一下，谢谢！

```
INSERT INTO history (customer_id, name, amount, date_recorded)
set date_recorded = CURDATE()
SELECT customer_id, name, amount
FROM master; 
```

在上面的例子中，我试图在 MySQL 中做的是从主客户列表中复制 customer_id、name、amount 字段，并包括今天的日期。历史表的记录布局在这里：

```
+---------------+------------------+------+-----+---------+----------------+
| Field         | Type             | Null | Key | Default | Extra          |
+---------------+------------------+------+-----+---------+----------------+
| id            | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| customer_id   | int(11)          | NO   | PRI | NULL    |                |
| name          | varchar(255)     | NO   |     | NULL    |                |
| amount        | int(11)          | NO   |     | NULL    |                |
| date_recorded | date             | NO   |     | NULL    |                |
+---------------+------------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:00:14.707

尝试这个：：

```
INSERT INTO history (customer_id, name, amount, date_recorded)

SELECT customer_id, name, amount, CURDATE()
FROM master 
```

另一种方法是::

```
INSERT INTO history (customer_id, name, amount, date_recorded)

SELECT customer_id, name, amount, DATE(now())
FROM master 
```

# macos - Excel VBA Application.Visible = false 在 Mac OSX 上不起作用

> ID：13442258
> 
> 赞同：0
> 
> 时间：2012-11-18T16:54:02.413
> 
> 标签：macos, excel, userform, vba

当我的用户窗体处于活动状态时，我希望我的工作簿不可见。

通过在 userForm 初始化方法上设置 Application.Visible = False 和在 UserForm Exit 上设置 True，我可以在 Windows 机器上完成这项工作。

相同的工作簿在 Mac 上的行为方式不同。工作簿仍然可见。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:56:50.457

虽然我不知道为什么 Application.Visible = False 在 Mac OSX 上不起作用，但以下内容能够满足我的需求：

在用户窗体初始化 - ActiveWindow.WindowState = xlMinimized

在用户窗体终止 - ActiveWindow.WindowState = xlMaximized

# c - 将所有文件内容读入字符串 - 将 off_t 的值传递给 malloc() （期望 size_t 的位置）有问题吗？

> ID：13442265
> 
> 赞同：2
> 
> 时间：2012-11-18T16:54:48.617
> 
> 标签：c, memory-management, file-io, integer-overflow

我在传递 to 的值时会遇到问题`off_t`（`malloc()`期望在哪里`size_t`）？

我正在读取一个文件并将其内容存储到内存中。文件大小由`st_size`成员从`struct stat`传递给`stat()`函数后获取，然后传递到`malloc()`我将调用的地方，以`fread()`传递返回的内存`malloc()`as`buf`和文件大小 as `nmemb`。

但问题是：如果文件大小真的是一个大数字，32 位/64 位机器上`size_t`的函数行为是什么：整数溢出和损坏的 buf（不是请求的字节数是`malloc()`真的回来了）还是`NULL`？

我知道它可能真的永远不会发生，所以可能有人使用这个应用程序进入例如超级计算机并向我的解析器请求一个最大的文件......但我真的很想了解事情的最大可能，甚至永远不会发生的行为.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:05:52.260

**是**的，你会有问题。首先，通过尝试首先读取文件大小，您实际上是在禁止您的用户使用例如管道。您绝对需要随机访问文件中的数据吗？如果没有，请尝试以面向流的方式解析您的文件。如果您绝对需要它在内存中，那么您可以使用[`stat`](http://linux.die.net/man/2/stat64)首先验证文件大小是否大于可以容纳的大小`off_t`（请注意，如果文件大小不适合结构，`stat`则会失败）或大于可以容纳的大小（比较to or )，如果是这样的话，请尽早保释（即使您以某种方式将其读入 RAM，您的进程也没有足够的指针中的位来寻址它），否则尝试`errno==EOVERFLOW``stat``size_t``st_size``SIZE_MAX``((size_t)-1)``malloc`（并检查`NULL`返回值）或者更好的是[`mmap`](http://linux.die.net/man/2/mmap)（如果可用）您的文件。

* * *

**后脚本**

@R 不喜欢我提到`stat64`，因为它是非标准的（即非 POSIX。）从技术上讲这是非常正确的，但实际上`stat64`在 Linux、Solaris、OSX、HP-UX、AIX、QNX 上很容易获得（并记录在案） ，甚至在 Windows 的 MSVCRT 中。它在 OpenBSD 上*不可*用，因为在 OpenBSD 上常规`stat`已经[支持大文件](http://en.wikipedia.org/wiki/Large_file_support)。

检索 >2GB 文件大小的传统（并且更[标准](http://opengroup.org/platform/lfs.html)`_LARGEFILE_SOURCE`）方法是使用,`_LARGEFILE64_SOURCE`和进行构建`_FILE_OFFSET_BITS=64`，这*可能*会使`stat`行为类似于`stat64`（您仍然必须确定是否`sizeof(off_t) >= 64/8`确定是否支持 8TB。）

事情的真相是，就您而言，以上所有内容都是学术性的。您不需要知道初始检查的确切文件大小，只有当它超过 和 的较小者可以容纳的大小`off_t`时`size_t`。我已经相应地更新了原始答案，顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:03:04.663

您希望文件大小有多大？对于中等到大的文件（比如几个 MiB，但小于 2 GiB），你不会有问题。如果您的文件大于 2 GiB，并且您使用的是 32 位系统，那么您将遇到各种问题。如果您的文件大于 2 GiB，但您使用的是 64 位 (Unix) 机器，则问题主要出在可用的物理内存上（以避免抖动）。考虑使用`mmap()`不管。

> 但问题是：如果文件大小真的是一个 size_t 无法容纳的大数字，那么 malloc() 函数在 32 位/64 位机器上的行为是什么？

如果 in 的值`off_t`大于可以容纳的范围`size_t`（在 32 位系统上完全合理；在 Windows 64 以外的 64 位系统上不合理），那么`malloc()`将“工作”但会分配所需的空间值的低位`off_t`。这不是你想要的。作为一个具体但似是而非的例子：如果`off_t`是 64 位数量但是`size_t`32 位数量，则 的低位`off_t`将用作 的大小`malloc()`，而忽略高位。如果高位全为零，那不是问题。如果设置了任何高位，您将滥用未分配的内存。

请注意，`malloc()`无法检测问题。它是`size_t`由编译器给出的，因为其中的声明`<stdlib.h>`说这是正确的类型。这完全取决于编译器是否警告您截断。它没有义务警告您可能出现的问题。

在大文件大小时，您必须了解所使用类型的限制，并且您必须非常小心以确保获得您期望的结果（而不仅仅是您要求的结果，这不是必然是同一件事）。

# file-upload - ini_set("upload_max_filesize","200M") 在 php 中不起作用

> ID：13442270
> 
> 赞同：26
> 
> 时间：2012-11-18T16:55:17.410
> 
> 标签：file-upload, php

> **可能重复：**
> [覆盖upload_max_filesize](https://stackoverflow.com/questions/949415/overriding-upload-max-filesize)

我使用这些代码来更改上传文件的大小：-

```
echo ini_get('upload_max_filesize').'<br/>';
ini_set("upload_max_filesize","300M");
echo ini_get("upload_max_filesize"); 
```

但我得到了

```
2M
2M 
```

这是在 php.ini 中设置的。

我想更改文件上传大小限制。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-18T17:02:32.893

1.  [http://php.net/manual/en/ini.list.php](http://php.net/manual/en/ini.list.php)

> upload_max_filesize "2M" **PHP_INI_PERDIR**

1.  [http://php.net/manual/en/configuration.changes.modes.php](http://php.net/manual/en/configuration.changes.modes.php)

> **PHP_INI_PERDIR** 条目可以在 php.ini、.htaccess、httpd.conf 或 .user.ini 中设置（自 PHP 5.3 起）

所以你不能用`ini_set`这个。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T16:59:55.990

你也需要增加[`post_max_size`](http://php.net/post_max_size)。

> 上传大文件，这个值必须大于upload_max_filesize

您可能还需要增加[`memory_limit`](http://php.net/memory_limit)

> 如果您的配置脚本启用了内存限制，那么 memory_limit 也会影响文件上传。一般来说，memory_limit 应该大于 post_max_size。

正如其他人指出的那样，`upload_max_filesize`不能在运行时更改（使用`ini_set`）。然而，一旦你正确地改变了它，*你仍然需要增加这些值*。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T17:00:01.100

[PHP 文档](http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes)说：

> 可用选项有 K（千字节）、M（兆字节）和 G（千兆字节；自 PHP 5.1.0 起可用），这些选项不区分大小写。其他任何东西都假定字节。1M 等于 1 兆字节或 1048576 字节。1K 等于 1 千字节或 1024 字节。***您不能在 php.ini 之外使用这些速记符号，而是使用整数值 bytes***。

# xml - youtube api中多个字段/条目规范的语法？

> ID：13442273
> 
> 赞同：0
> 
> 时间：2012-11-18T16:55:27.420
> 
> 标签：xml, youtube-api, atom-feed

我正在尝试在 youtube/google 数据 api 中搜索持续时间超过 x 秒且至少有 x 次观看的视频。

我希望像

```
"http://gdata.youtube.com/feeds/api/videos?q=surfing&max-results=25&fields=entry[yt:statistics/@viewCount > 100]&fields=entry[yt:statistics/@seconds > 300]" 
```

会起作用，但这给了我一个错误（“不一致的重复查询参数字段”）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:27:10.637

找到正确的语法

```
http://gdata.youtube.com/feeds/api/videos?q=surfing&max-results=25&fields=entry[yt:statistics/@viewCount and media:group/yt:duration/@seconds > 300] 
```

# redis - 过滤 Redis 哈希条目 - 从哈希或集合中删除条目

> ID：13442279
> 
> 赞同：1
> 
> 时间：2012-11-18T16:55:51.850
> 
> 标签：redis

我想创建一个系统，根据其源站点和国家/地区重定向 http 客户端。为了决定将它们重定向到哪里，我有一个规则列表。一条规则可能如下所示：

```
"id":               1,
"sourceSites":      [ 1, 2, 3, 4 ],
"countries":        [ "US", "UK", "DE" ],
"amount":           1000,
"url":              "http://www.buyer2-url1.com" 
```

可以有数百个这样的规则。

为了存储我打算使用 Redis Hashes 的每条规则： rule: amount url

当访问者进入系统时，我想按 sourceSite 和访问者所在的国家/地区过滤规则。为了实现过滤器，我计划使用 Redis 集创建 sourceSites 和国家/地区的索引：

```
sourceSite:<sourceSiteID> rule:<id1> rule:<id2> ...
country:<countryCode> rule:<id1> rule:<id2> ... 
```

当我有来自 country=UK 和 sourceSiteID=5 的访问者时，我只是将两组相交：

```
SINTER sourceSite:5 country:UK 
```

我不明白的是，当我需要删除规则时（例如，当流量超过规则的必要量时）我该怎么办？

我应该重新创建我的所有集合以创建源站点和国家/地区的新索引吗？但是，如果访问者在索引尚未准备好时来了怎么办？

或者我需要为每个规则存储另外两组源站点列表和国家列表，这样我就可以找到索引的所有集合并从中删除规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:52:17.650

我可能会实现第二个选项并通过使用 Redis 事务来保证一致性。

添加规则将是：

```
MULTI
HMSET rule:1 id 1 amount 1000 url http://www.buyer2-url1.com
SADD rule:1:sourceSites 1 2 3 4
SADD rule:1:countries US UK DE
SADD sourceSite:1 1
SADD sourceSite:2 1
SADD sourceSite:3 1
SADD sourceSite:4 1
SADD country:US 1
SADD country:UK 1
SADD country:DE 1
EXEC 
```

删除规则将是：

```
WATCH rule:1
HGETALL rule:1
SMEMBERS rule:1:sourceSites
SMEMBERS rule:1:countries
MULTI
... sanity check depending on the content of the rule ...
For all source sites S (in rule:1:sourceSites):
   SREM sourceSite:S 1
For all country codes C (in rule:1:countries):
   SREM country:C 1
DEL rule:1:countries
DEL rule:1:sourceSites
DEL rule:1
EXEC 
```

最好只在集合中使用整数（不要在它们前面加上规则：），这样 Redis 就可以应用内存优化。此外，考虑使用流水线来减少所需的往返次数。

# iphone - 不能在其他文件中使用类中的方法

> ID：13442282
> 
> 赞同：2
> 
> 时间：2012-11-18T16:56:03.350
> 
> 标签：iphone, objective-c, xcode, cocoa

我无法在我的 tableview 控制器实现中使用我在 tableviewcell 文件中实现的方法之一。我尝试搜索网络和 xcode 帮助，但没有成功。我的代码如下所示：

表视图控制器.h：

```
 #import TableViewCell.h

    @interface TableViewController : UITableViewController

    @property (nonatomic, strong) IBOutlet UIBarButtonItem *A1Buy;
    @property (nonatomic, getter = isUserInteractionEnabled) BOOL userInteractionEnabled;

    - (IBAction)A1Buy:(UIBarButtonItem *)sender; 
```

表视图控制器.m：

```
 @implementation A1ViewController

    @synthesize A1Buy = _A1Buy;
    @synthesize userInteractionEnabled;

    - (IBAction)A1Buy:(UIBarButtonItem *)sender {
   [TableViewCell Enable]; //this is where it gives an error

    } 
```

TableViewCell.h：

```
 @interface TableViewCell : UITableViewCell {
    BOOL Enable;
    BOOL Disable;
    }
    @property (nonatomic, getter = isUserInteractionEnabled) BOOL userInteractionEnabled; 
```

TableViewCell.m：

```
 @implementation TableViewCell;

    @synthesize userInteractionEnabled;

    - (BOOL) Enable {
    return userInteractionEnabled = YES;
    }
    - (BOOL) Disable {
    return userInteractionEnabled = NO;
    } 
```

如您所见，我正在尝试启用用户与按钮的交互，但 Xcode 只会给我诸如“类没有此方法”之类的错误。所有文件都正确导入，所以这不是原因。将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:41:22.403

首先，根据 Cocoa 标准命名你的方法和变量——类的首字母大写，变量和方法的首字母小写。

这样做应该很明显，您正在调用*class*`Enable`上的方法，它实际上是一个*实例*方法。您需要获取指向特定表格视图单元格的指针并调用该方法。`TableViewCell`

 **此外，您实施的方法非常令人困惑。为什么他们将分配的结果作为布尔值返回？这将始终返回 YES。您可能需要学习一些基本的 Objective-C 培训资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:30:10.243

您被声明`- (BOOL) Enable`为实例方法。您不能使用类名调用实例方法。解决方案：

1.  将方法声明为 Class 方法

    ```
     + (BOOL) Enable 
    ```

2.  创建类的对象，然后使用该对象调用方法

    ```
     TableViewCell *cellObj = [[TableViewCell alloc] init];
     [cellObj Enable]; 
    ```

[请在此处](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassMethod.html)阅读有关类方法的更多信息。

请参阅[此处](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)的 ios 编码约定。**

# html - 粘性页脚html css的问题

> ID：13442283
> 
> 赞同：0
> 
> 时间：2012-11-18T16:56:09.617
> 
> 标签：html, css, footer, sticky

我在制作粘性页脚时遇到了麻烦，无论我做什么，代码都会完全弄乱并重新安排其他元素的位置。我正在使用多个 div 元素。我已经尝试了大多数关于在线粘贴页脚的教程，例如[http://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)非常感谢帮助。非常感谢！

html:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
<title>Southend-on-Sea Independant Tourist Guide</title>
<!--Attached CSS to keep constant throughout site-->
<link rel="stylesheet" type="text/css" href="style.css">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="description" content="An independant tourist guide on Southend-on-Sea">
<meta name="keywords" content="southend, southend-on-sea, tourist guide, tourist, independant">
<meta name="author" content="Callum Stevens">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><!--[if !IE 7]>
        <style type="text/css">
                #wrap {display:table;height:100%}
        </style>
<![endif]-->
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="navigation.css">
</head>
<body>
<div id="container">
<div id="content">
<div id="header">
<table width="200" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td><img src="southendpiersept2006edit.jpg" width="700" height="389" alt="southend pier site logo"></td>
</tr>
</table>
</div>
<div id="navigation">
<ul>
<li class="home"><a href="index.htm">Home</a></li>
<li class="places"><a href="places.htm">Places to go</a></li>
<li class="things"><a href="things.htm">Things to do</a></li>
<li class="where"><a href="where.htm">Where to stay</a></li>
<li class="getting"><a href="getting.htm">Getting&lt; here/a&gt;</a></li>
<li class="about"><a href="getting.htm"></a><a href="getting.htm"></a><a href="about.htm">About the town</a></li>
<li class="contact"><a href="contact.htm">Contact us</a></li>
</ul>
<table width="700" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td></td>
</tr>
</table>
</div>
<br>
<br>
<h1>Southend-On-Sea</h1>
<br>
<h2>Welcome to Southend-On-Sea Tourist Information Site. You're #1 stop for finding out about Southend!</h2>
<br>
<h3>This site aims to help you in getting here, finding accomodation, and letting you know whats going on.</h3>
<p>paragraph</p>
<p id="p2">paragraph2</p>
</div>
</div>
<div id="footer"></div>
</body>
</html> 
```

样式.css：

```
html, body { margin: 0px;
             padding: 0px; 
text-align:center
}

body{
background: url(bg.jpg) repeat-x;}

#content {
    text-align:center
    width:67%;
}

h2 {
text-transform: capitalize;} 
```

导航.css

```
#navigation ul {
    width: 700px; 
    height: 50px; 
    position: absolute; /** Places image at the top of the page **/
    top: 389px; /** Determines the height from the top of the page **/
    left: 15.3%; /** Determines the width from the left of the page **/
    background: url(menu.jpg) no-repeat 0 0;
    list-style: none;
    margin: 0; padding: 0;
}
#navigation li {
    display: inline;
}
#navigation li a:link, #navigation li a:visited {
    border: none;
    width: 100px; 
    height: 50px; 
    display: block; 
    position: absolute; 
    top: 0; 
    text-indent: -7000px; 
    outline: none;
}
#navigation li.home a:link, #navigation li.home a:visited { 
    left: 0;
}
#navigation li.places a:link, #navigation li.places a:visited { 
    left: 100px  
}
#navigation li.things a:link, #navigation li.things a:visited { 
    left: 200px  
}
#navigation li.where a:link, #navigation li.where a:visited { 
    left: 300px  
}
#navigation li.getting a:link, #navigation li.getting a:visited { 
    left: 400px  
}
#navigation li.about a:link, #navigation li.about a:visited { 
    left: 500px  
}
#navigation li.contact a:link, #navigation li.contact a:visited { 
    left: 600px  
}

#navigation li.home a:hover {
    background: url(menu.jpg) no-repeat 0 -50px;  
}
#navigation li.places a:hover {
    background: url(menu.jpg) no-repeat -100px -50px; 
}
#navigation li.things a:hover {
    background: url(menu.jpg) no-repeat -200px -50px;
}
#navigation li.where a:hover {
    background: url(menu.jpg) no-repeat -300px -50px;
}
#navigation li.getting a:hover {
    background: url(menu.jpg) no-repeat -400px -50px;
}
#navigation li.about a:hover {
    background: url(menu.jpg) no-repeat -500px -50px;
}
#navigation li.contact a:hover {
    background: url(menu.jpg) no-repeat -600px -50px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:00:34.997

我可能看不正确，但您没有为#footer (style.css) 放置任何 CSS 选择 要将页脚粘贴到页面底部，非常简单如何

```
#footer {
    position:fixed;
    bottom: 0;
    left:0;
    right:0;
    background-color:#ddd;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:14:55.037

工作 js 小提琴：http: [//jsfiddle.net/eQMmk/](http://jsfiddle.net/eQMmk/)

相关部分在css的末尾：

```
/* sticky footer */
html, body { width: 100%; height: 100%; }
#container {
min-height: 100%;
height: auto !important;
height: 100%;
margin: 0 auto -150px;
}
#footer {
margin-top: -150px;
height: 150px;
width: 100%;
background-color: red;
} 
```

# vbscript - 如何使用 VBscript（如多线程）在多个浏览器中打开多个 url

> ID：13442286
> 
> 赞同：1
> 
> 时间：2012-11-18T16:56:22.750
> 
> 标签：vbscript

是否可以使用 vbscript 进行多线程。我必须在多个浏览器/标签中填写一个网页，这样，我希望可以减少完成时间。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:02:41.890

Vbscript 本身没有任何启动单独线程的方法，尽管如果你尝试，那么它更像是多线程的“仿真”而不是其他任何东西

您可以查看此[文档](http://www.windowsitpro.com/article/vbscript/how-to-multi-thread-vbscript-scripts)

要在 vbscript 中打开一个 url，你可以尝试这样的事情：-

```
 set wShell = CreateObject("Shell.Application")
  wShell.Open "C:\temp\abc.txt" 
```

# ios - 带有应用内设置包的 NSUserDefaults

> ID：13442293
> 
> 赞同：1
> 
> 时间：2012-11-18T16:57:07.087
> 
> 标签：ios, xcode

我正在构建一个应用程序，并且希望有一个应用程序内特定的设置包，而不是让它在设置应用程序中可用。我正在使用 NSUserDefaults 类来保存和检索它们，但希望拥有相同的设置应用程序外观。我想使用 InAppSettingsKit 或 llamasettings 但不知道如何将它们与 NSUserDefaults 类一起使用。我认为这些工具包告诉我如何创建一个 .plist 文件并使用他们的工具包，并且没有关于 NSUserDefaults 的示例。我需要的是获得设置应用程序的外观和感觉，同时使用 NSUserDefaults 类来保存和检索值。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:01:28.753

设置应用程序基本上是一个分组样式的 UITableView。通过添加按钮自定义 UITableView 的单元格并使用 NSUserDefaults 来跟踪您的设置，很容易重新创建外观和下降。

# c# - Windows Phone Mango：使用各种画笔选项制作绘图应用程序

> ID：13442297
> 
> 赞同：0
> 
> 时间：2012-11-18T16:57:23.030
> 
> 标签：c#, windows-phone-7, drawing, paint

我正在尝试制作一个绘图应用程序。目的很简单。让用户使用各种画笔选项在画布上绘制一些东西，例如**方形画笔、远画笔、铅笔画笔**等等，就像 android 市场上可用的任何其他绘图应用程序一样。目前我可以让用户使用以下代码绘制平滑曲线：

```
 currentPoint = e.GetPosition(this.canvas);
                Line line = new Line() { X1 = currentPoint.X, Y1 = currentPoint.Y, X2 = oldPoint.X, Y2 = oldPoint.Y };
                line.Stroke = new SolidColorBrush(Colors.Purple);
                line.StrokeThickness = 2;
                this.drawnImage.Add(line);
                this.canvas.Children.Add(line);
                oldPoint = currentPoint; 
```

现在我想要一些自定义画笔选项并让用户使用它进行绘制。我怎样才能实现呢？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:44:23.757

Square、Pencil 等只是用作画笔的自定义图像图案。使用[ImageBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.imagebrush%28v=vs.95%29.aspx "图像刷")

# php - 使用单选值删除 xml 文件

> ID：13442300
> 
> 赞同：-1
> 
> 时间：2012-11-18T16:57:38.487
> 
> 标签：php, html, xml

我使用php删除文件，但我得到了这样的表循环：

```
 <table border="0" width="100%" cellpadding="0" cellspacing="0" id="product-table">
                <tr class="bg_tableheader">
                    <th class="table-header-check"><a id="toggle-all" ></a> </th>
                    <th class="table-header-check"><a href="#"><font color="white">Username</font></a>  </th>
                    <th class="table-header-check"><a href="#"><font color="white">First Name</font></a></th>
                    <th class="table-header-check"><a href="#"><font color="white">Last Name</font></a></th>
                    <th class="table-header-check"><a href="#"><font color="white">Email</font></a></th>
                    <th class="table-header-check"><a href="#"><font color="white">Group</font></a></th>
                    <th class="table-header-check"><a href="#"><font color="white">Birthday</font></a></th>
                    <th class="table-header-check"><a href="#"><font color="white">Gender</font></a></th>
                    <th class="table-header-check"><a href="#"><font color="white">Age</font></a></th>
                    <th class="table-header-check"><a href="#"><font color="white">Country</font></a></th>
                </tr>
                <?php
        $files = glob('users/*.xml');
        foreach($files as $file){
            $xml = new SimpleXMLElement($file, 0, true);
            echo '
                <tr>
                    <td></td>
                    <form action="" method="post">
                    <td class="alternate-row1"><input type="radio" name="file_name" value="'. basename($file, '.xml') .'" />'. basename($file, '.xml') .'</td>
                    <td>'. $xml->name .'&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</td>
                    <td class="alternate-row1">'. $xml->lastname .'</td>
                    <td>'. $xml->email .'</td>
                    <td class="alternate-row1">'. $xml->level .'</td>
                    <td>'. $xml->birthday .'</td>
                    <td class="alternate-row1">'. $xml->gender .'</td>
                    <td>'. $xml->age .'</td>
                    <td class="alternate-row1">'. $xml->country .'</td>
                </tr>';
                    }
        ?>
                </table>
            </div>
<?php
if(isset($_POST['file_name'])){
    unlink('users/'.$_POST['file_name']);
}
?>
    <input type="submit" value="Delete" />
    </form> 
```

所以你可以看到我的无线电值集有basename（xml文件名）但由于某种原因它不起作用，知道为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:16:20.833

看来你正在以错误的方式处理它。

PHP 是服务器端，不能直接访问无线电输入，因为它是客户端。

你想要的需要一个两步过程：一个用于获取页面，一个用于发送无线电输入。

通常你会在客户端使用 jQuery/AJAX，并将与 XML 相关的代码隔离在一个专用的脚本服务器端。

我希望这能让你朝着正确的方向前进。

# c# - 如何在 NFA/DFA 中表示重复字符

> ID：13442304
> 
> 赞同：0
> 
> 时间：2012-11-18T16:58:31.903
> 
> 标签：c#, state-machine

我正在编写一个解析器来解析一个包含 UN EDIFACT 代码列表的结构化文本文件。为此，我用 C# 编写了一个通用状态机，我想用它来创建解析器。

我遇到的一个问题是如何正确匹配 70 个破折号的序列？每次遇到破折号时，我是否需要增加某种计数器，然后处理任何必要的操作？我无法找到任何解释如何做到这一点的地方。

这是我要解析的文本文件的快照：

```
PART 5    UNITED NATIONS DIRECTORIES FOR ELECTRONIC DATA INTERCHANGE
          FOR ADMINISTRATION, COMMERCE AND TRANSPORT

CHAPTER 6 Code list

1\.   Code list UNCL

     Change indicators

     a plus sign (+)    for an addition
     an asterisk (*)    for an addition/subtraction/change to an entry
                        for a particular data element
     a hash sign (#)    for changes to names
     a vertical bar (|) for changes to text for descriptions,
                        notes and functions
     a letter X (X)     for marked for deletion

     Usage indicators

     [B] = used in batch messages only
     [I] = used in interactive messages only
     [C] = common usage in both batch and interactive messages

----------------------------------------------------------------------

*    1001  Document name code                                      [C]

     Desc: Code specifying the document name.

     Repr: an..3

     1     Certificate of analysis
              Certificate providing the values of an analysis.

     2     Certificate of conformity
              Certificate certifying the conformity to predefined
              definitions. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:51:08.240

解析通常在两个不同的抽象级别上完成。在较低级别上，词法解析器检测基本标记，如单词、数字、括号等。在更高层次上，句法解析器分析句法。句法分析适用于那些抽象标记，而不是查看单个字符。

词法解析器以简单、原始的方式工作，例如使用循环和计数器。这就是我如何检测由破折号组成的分隔符。

状态机应该基于令牌并实现句法分析。

请参阅[Oberon 书目](http://www.ethoberon.ethz.ch/books.html)中的[编译器构造 - N. Wirth](http://www.ethoberon.ethz.ch/WirthPubl/CBEAll.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:50:14.920

NFA 无法计算。为了表示重复字符，您必须为每个字符引入一种状态：

```
╭───╮    -    ╭───╮    -    ╭───╮          ╭────╮
│ 0 │ ──────> │ 1 │ ──────> │ 2 │ ── ⋯ ──> │ 70 │
╰───╯         ╰───╯         ╰───╯          ╰────╯ 
```

…当然，您可以通过某种计数器变量来增强引擎。但是，它不再是 DFA（或 NFA）的直接表示。

# internet-explorer-8 - IE 8/7 缺陷 DOM 和 CSS

> ID：13442309
> 
> 赞同：0
> 
> 时间：2012-11-18T16:59:04.227
> 
> 标签：internet-explorer-8, internet-explorer-7, pagination, jquery-masonry, infinite-scroll

我刚刚完成了[我的个人网站](http://www.walkap.com)。所有现代浏览器都很好，但我对 Internet Explorer 8/7 有一点问题。我的网站基于我所有社交网络的提要，所有帖子都是用砖石和无限滚动执行的，所以分页是隐藏的。在 IE 中，css 样式仅在我的内容的第一页中消失，而砌体在第二页到达之前无法正常工作。有没有人可以帮助我找到错误？IE 没有提供有用的工具来检查它，所以我需要有人帮助我！！！谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:29:11.347

您的格式在 Internet Explorer 7 和 8 中被破坏的原因是因为您正在使用[`article`元素](http://msdn.microsoft.com/en-us/library/ie/gg593005%28v=vs.85%29.aspx)；在 9 之前的 Internet Explorer 版本中，本机无法理解这一点。

我加入了[HTML5Shim](http://code.google.com/p/html5shim/)（它为 HTML5 元素创建了一些支持）并刷新了您的页面 - 它解决了问题。

# c# - 关于依赖注入，我什么时候使用抽象类和接口？

> ID：13442312
> 
> 赞同：10
> 
> 时间：2012-11-18T16:59:39.030
> 
> 标签：c#, .net, oop, design-patterns

我一直在阅读一些关于 SOLID 原理和依赖倒置的文章。从我的角度来看，我必须使用接口与任何类进行对话。我的班级正在使用界面聊天。

### 第一个问题：

我正在使用一个抽象类，但对于我的代码的第二部分，我使用了一个接口。

### 用法1

```
 namespace DependencyInjection
{

    public interface IMessage
    {

    }
    public abstract class Message
    {
        public abstract void Get();
        public abstract void Send();
    }

    public class Sms : Message, IMessage
    {
        public override void Get()
        {
            Console.WriteLine("Message Get!");
        }
        public override void Send()
        {
            Console.WriteLine("Message Send!");
        }
    }

    public class MessageManager
    {
        private IMessage _message;

        public Sms Sms
        {
            get { return _message as Sms; }
            set { _message = value; }
        }

        public MessageManager(IMessage message)
        {
            _message = message;
        }

    }
} 
```

**用法：**

```
 class Program
    {
        static void Main(string[] args)
        {
            MessageManager msg = new MessageManager(new Sms());
            msg.Sms.Get();
            msg.Sms.Send();
            Console.Read();
        }
    } 
```

### 用法2

```
 namespace DependencyInjection
{

    public interface IMessage
    {
        public  void Get();
        public  void Send();
    }

    public class Sms :  IMessage
    {
        public  void IMessage.Get()
        {
            Console.WriteLine("Message Get!");
        }
        public  void IMessage.Send()
        {
            Console.WriteLine("Message Send!");
        }
    }

    public class MessageManager
    {
        private IMessage _message;

        public Sms Sms
        {
            get { return _message as Sms; }
            set { _message = value; }
        }

        public MessageManager(IMessage message)
        {
            _message = message;
        }

    }
} 
```

用法1和用法2有什么区别？我什么时候选择usage1或usage2？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-18T18:30:33.153

*抽象类在这里与重复的代码作斗争。接口 - 定义合约 (API)。*

依赖于接口——它们只是描述依赖的契约（API），并且可以很容易地被模拟。所以，从界面开始：

```
public interface IMessage
{
    void Get(); // modifiers like public are not allowed here
    void Send();
} 
```

这是你的依赖类，它应该只依赖于抽象（即接口）：

```
public class MessageManager
{
    private IMessage _message;

    // depend only on abstraction 
    // no references to interface implementations should be here
    public IMessage Message
    {
        get { return _message; }
        set { _message = value; }
    }

    public MessageManager(IMessage message)
    {
        _message = message;
    }
} 
```

然后创建类，它将实现您的接口：

```
public class Sms : IMessage
{
    // do not use explicit implementation 
    // unless you need to have methods with same signature
    // or you want to hide interface implementation
    public void Get()
    {
        Console.WriteLine("Message Get!");
    }

    public void Send()
    {
        Console.WriteLine("Message Send!");
    }
} 
```

现在您已经反转了依赖关系 -`MessageManager`并且`Sms`仅依赖于`IMessage`. `IMessage`您可以将任何实现注入`MessageManager`（MessageManager 现在适合 OCP - 打开以进行扩展，但关闭以进行修改）。

**仅**`IMessage`当您在多个实现者中有重复代码时才创建基本抽象消息类。当您创建抽象类（移动重复代码的地方）时，您不应该更改接口，因为合同保持不变。`IMessage`只需从原始接口继承您的基类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:01:09.607

接口的原始定义是具有所有纯虚方法（即抽象方法）的抽象类，这就是您在 C++ 中描述接口的方式。如果您不使用默认定义创建虚函数，那么您实际上根本不需要抽象类。如果您确实有一些您希望 Message 类的子代继承（并允许覆盖或不允许覆盖）的默认功能，那么您将使用抽象类。抽象类还可以定义受保护的方法和/或属性和字段，这些可以由从抽象类继承的类使用，但不能由使用抽象类的类使用。接口中的所有方法都是公开的。如果您布置了一个界面，那就没问题了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:24:08.773

根据我所看到的，您根本没有真正使用界面。当然你实现了方法，但是消费类不应该真正知道甚至关心实现。因此，您不应真正看到对 Sms 的任何引用或强制转换。您应该使用 IoC 框架，例如 Unity、Ninject、structuremap。如果您确实需要一个返回 IMessage 的公共属性，它应该返回 IMessage 而不是 Sms，您是否应该这样做是不同的对话。

也就是说，第一个 Usage 在 IMessage 中没有任何内容，因此它毫无价值。此外，我经常使用抽象/基类来处理接口的多个实现之间的通用功能。在您的场景中，不需要抽象类。我创建没有任何代码的抽象方法的唯一一次是抽象类实际上以某种能力触发了该方法，但期望派生类实现该功能。

无论如何，要回答您的问题，用法 #2 似乎更接近正确的解决方案，但只需删除对 Sms 的引用并让 IoC 容器处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T17:27:27.827

接口不包含任何实现代码，也不强制实现者从给定类派生其实现。一个基类（抽象与否）已经可以包含一些逻辑。这可能是一个优点，也可能是一个不受欢迎的约束。

当然，您可以将这两种方法结合起来。针对接口定义和编程，同时提供实现该接口的基类（或多个基类）并证明一些简化实现者任务的基本逻辑。实现接口的人可以决定采用简单的方法并扩展基类或创建全新的东西并直接实现接口。

.NET Framework 类库为集合提供基类，`Collection<T>`或`KeyedCollection<TKey,TItem>`两者都实现`IList<T>`，您可以将其用作创建自己的专用集合的基础。当然，您可以从头开始并`IList<T>`直接实施。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-18T17:29:53.503

选择抽象类而不是接口的原因与可重用代码有关。您使用依赖注入这一事实并没有改变这个答案。

所有的子类都有共同的功能吗？如果是这样，它可以在基类中定义。

是否应该使用模板方法设计模式？如果是，则该算法存在于基类中。

与往常一样，答案是：“视情况而定。” 您不能使用接口执行这些方法，因为接口仅指定合同并且没有实现。如果合同就是您所需要的，那么请使用界面。如果您需要子类共享代码，请使用抽象类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-09T19:45:58.023

除了一些听他们的理由之外，我没有太多要补充的其他答案：

只有抽象方法的抽象类本质上是一个接口。不同之处在于它*可能*具有某种形式的虚拟实现，其中存在陷阱：当尝试使用基类*隐藏*依赖项来减少重复时，它太容易了。

假设您有一组对象需要在运行之间持续存在。向基类添加保存功能是很诱人的，这样其他人就不必担心保存的工作方式。问题是，如果你完全隐藏它，你会制造一个测试噩梦，必须测试实现，否则很多功能只能被降级为集成测试。将 Strategy 用于保存功能将完全解决问题，并且两者可以简单地结合起来。

问题是比一个简单的坏更*诱惑。*继承不会*阻止*DI，但也不会鼓励它。如果你想进入 SOLID 和 DI，你最好暂时避免继承。

# java - 程序将一个字符添加到字符串，然后通过 toString() 方法显示结果并通过 length() 计算字符串的数量

> ID：13442314
> 
> 赞同：2
> 
> 时间：2012-11-18T16:59:57.807
> 
> 标签：java, class, methods

我必须使用`String`和`int`字段创建类。没有参数的构造函数必须初始化：空字符串和 int 的 0 值。`addChar(char)`方法应该让程序向字符串（名称）添加新字符。`toString()`方法应该返回这个字符串并且`length()`方法必须显示这个字符的数量。我试过这样的事情：

```
public class Word {

String name;
int number;

public Word() {

    name = "";
    number = 0;

}

public char addChar() {
  return ;
}

public String toString() {
  System.out.println(name); 
}

public int length() {
  return name.length();
  System.out.println (name.length());
}

public static void main(String[] args) {

}
} 
```

但真的不知道如何编写可以将一个字符添加到 String 的方法（有错误）以及如何编写可以使用这些方法来显示它所有工作的程序。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:07:22.303

**-** A`String`是**不可变**的，所以**你不能改变它**，当你试图改变一个字符串时，实际上**在堆上创建了一个新的字符串对象。**

**-**它更好地使用`StringBuilder`或`StringBuffer`哪些是**Mutable**。

**-** `StringBuilder`从**Java 5**开始存在，它**不是 Thread-Safe**的，在Thread-Safe到来**之前**`StringBuffer`就存在，但它的**Thread-Safe**。**`StringBuilder`**

 ******///////////////////编辑部分///////////////////**

试试这个方法………​​…………………

```
public class Word {

StringBuilder name = new StringBuilder();
int number;        // Class variable are already intialized to its initial value,
                   // in the case of int its 0.

                  // String already has an overridden toString method, so its not needed

public void addChar(String s) {

    name.append(s);
}

public String getString(){

    return name.toString();
}

public static void main(String[] args) {

    Word w = new Word();

    System.out.println(w.getString().length());
    w.addChar("hello");
    System.out.println(w.getString().length());
    w.addChar("Hi");
    System.out.println(w.getString().length());
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:03:57.270

您的代码至少有 2 个问题无法编译：-

1.  你的`toString`方法并没有真正返回任何东西。相反，它正在打印您的字符串。更改您的方法主体以返回您的姓名。

2.  在您的长度方法中，您有`unreachable code`. 您有一个永远不会执行的`sysout`语句后的语句。`return`

* * *

现在，首先您需要解决上述问题。

然后在`addChar`方法中，您实际上需要传递一个`char`as`parameter`以添加到您的`string`. 你错过了它。此外，您实际上并不需要刚刚添加`return`的。`char`所以`char` `return type`不需要。只是`void`会`OK`。因为您已经有一种`toString`方法可以`string`恢复您的修改。

所以，你`addChar`应该看起来像： -

```
public void addChar(char ch) {
    name += ch;
} 
```

你的修改`toString`和`length`方法应该是这样的： -

```
public String toString() {
    return name; 
}

public int length() {
    return name.length();
} 
```

其余均不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:07:55.830

它进行了一些重构，但是在这里：

```
public class Word {

private String name;
private int number;

public Word() {
    name = "";
}

public void addChar(char ch) {
  name += ch;
  number++;
}

public String toString() {
  return name; 
}

public int length() {
  return number;
}

public static void main(String[] args) {
    Word myWord = new Word();
    myWord.addChar('H');
    System.out.println(myWord);
    myWord.addChar('e');
    myWord.addChar('l');
    myWord.addChar('l');
    myWord.addChar('o');
    System.out.println(myWord);
    System.out.println(myWord.length());

}
} 
```

结果：

```
H
Hello
5 
```

变化：

*   方法 toString 确实返回`name`。
*   方法长度确实返回`number`。
*   我在 main 方法中添加了一个小的概念证明。
*   我实现了 addChar 并将返回类型更改为 void。
*   我将 Datatype 更改`name`为[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:04:00.343

我为你修复了一些代码。

笔记：

> `this("", 0)`调用接受 a`String`和的构造函数`int`。
> 
> `addChar`应该什么都不返回，只添加字符。
> 
> `toString`只返回一个字符串。

代码：

```
public class Word {
    String name;
    int number;

    public Word() {
        this("", 0);
    }

    public Word(String s) {
        this(s, 0);
    }

    public Word(String s, int i) {
        name = s;
        number = i;
    }

    public void addChar(char c) {
        name += Character.toString(c);
    }

    public String toString() {
        return name;
    }

    public int length() {
        return name.length();
    }

    public static void main(String[] args) {
        //do stuff
    }
} 
```****

# vim - 在 Vim 中读取修改后缓冲区的内容

> ID：13442319
> 
> 赞同：0
> 
> 时间：2012-11-18T17:00:13.073
> 
> 标签：vim, buffer

如何在 Vim 中访问修改后的缓冲区的内容？

例如，如果我想将内容连接到一个临时文件，例如：

```
:! cat % > /tmp/modified.txt 
```

但这给了我最后保存的文件内容（对吗？）。我确实想避免之前保存文件，因为这种交互是*为了*在不先保存缓冲区的情况下进行一些分析。

似乎 Vim 的 Python 扩展允许您执行以下操作：

```
def buffer_contents(buffer=vim.current.buffer):
    contents = buffer[:] 
```

但我找不到`VimL`相同功能的任何参考资料。

编辑：看来我可以做类似的事情：

```
:let buffer_contents = join(getline(1, '$'), '$') 
```

在这一点上，我只是想知道是否有内置方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:43:17.743

如果要将当前内容附加到临时文件，可以使用

```
:w! >> /tmp/modified.txt 
```

,

```
:w! > /tmp/modified.txt 
```

用于覆盖该文件（例如在您的 cat 示例中）。将其传递给某些脚本的标准输入

```
:w !some-script 
```

. 想知道你有什么问题`getline(1, '$')`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:36:27.017

虽然您可以使用`getline(1, $)`检索缓冲区中的所有（修改的）行，但当您的目标是将它们写入文件时，`:w! > filename`按照 ZyX 的答案仍然是要走的路。尽管`writefile()`Vimscript 中有一个函数，但您必须自己处理编码、行尾等，而当内置程序`:write`可以为您完成时，这太麻烦了。

# delphi - 编辑框上的文本更改

> ID：13442328
> 
> 赞同：2
> 
> 时间：2012-11-18T17:01:07.107
> 
> 标签：delphi, delphi-xe2

我正在使用编辑框作为圆形计数器。我想在 text = 5 或 10 时显示此消息，然后它会执行一些功能。但即使轮数为 5 或 10，我也从未收到此消息 ERoundChange 是 ERound（编辑框）的 OnChange 事件；知道为什么它不起作用吗？我假设我使用 Self 错误？

```
{Check if round is 5 or 10}
//-----------------------------------------------------
procedure TBaseGameForm.ERoundChange(Sender: TObject);
//-----------------------------------------------------
begin
 if (self.Text = '5') or (self.Text = '10') then
   begin
      showmessage('checking stats for gryph locations on round: '+self.Text);

    end;
end; 
```

我也像这样在每个玩家回合开始时改变回合

```
ERound.Text := inttostr(Strtoint(ERound.Text)Mod 10+1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:02:53.100

因为`ERoundChange`是 的方法`TBaseGameForm`，`Self`所以指的是 的当前实例`TBaseGameForm`，也就是*表单*，而不是里面的编辑框。

因此，`Self.Text`是表单的标题，而不是编辑框中的文本。如果编辑框被命名`Edit1`，你应该这样做

```
procedure TBaseGameForm.ERoundChange(Sender: TObject);
begin
  if (Edit1.Text = '5') or (Edit1.Text = '10') then
    ShowMessage('checking stats for gryph locations on round: '+ Edit1.Text);
end; 
```

你也可以做

```
procedure TBaseGameForm.ERoundChange(Sender: TObject);
begin
  if ((Sender as TEdit).Text = '5') or ((Sender as TEdit).Text = '10') then
    ShowMessage('checking stats for gryph locations on round: '+ (Sender as TEdit).Text);
end; 
```

因为导致事件的控件存储在`Sender`参数中。但是由于`Sender`被声明为`TObject`，您需要将其转换为实际`TEdit`情况。

[你本可以自己解决这个问题的。实际上，该过程 `TBaseGameForm.ERoundChange`本身与编辑控件无关——当然，它被分配给该控件的一个事件，但当然您也可以将它分配给其他控件，并以您喜欢的任何其他方式使用它。因此，就其本身而言，它仅与 相关联`TBaseGameForm`，因此实际上，`Self`在逻辑上无法引用其他任何内容。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T17:06:32.677

该方法是表单的实例方法，因此`Self.Text`引用表单的文本或标题。你需要使用

```
(Sender as TEdit).Text 
```

反而。

虽然，为避免重复，您应该使用局部变量来保存编辑控件引用：

```
procedure TBaseGameForm.ERoundChange(Sender: TObject);
var
  Edit: TEdit;
begin
  Edit := (Sender as TEdit);
  if (Edit.Text = '5') or (Edit.Text = '10') then
    ShowMessage('checking stats for gryph locations on round: ' + Edit.Text);
end; 
```

# javascript - 动态 div 元素和与这些 div 关联的事件

> ID：13442329
> 
> 赞同：2
> 
> 时间：2012-11-18T17:01:13.677
> 
> 标签：javascript

我正在`div`使用 JavaScript 动态创建多个元素。以下是我使用的代码：

```
for(i=0;i<3;i++)
{
  var d1 = document.createElement('div');
  d1.id = "div" + i;
  var l1 = document.createElement('label');
  l1.innerHtml = "Hello";
  d1.appendChild(l1);
  var line1 = document.createElement('hr');
  d1.appendChild(line1);
  document.body.appendChild(d1);    
} 
```

输出：

你好

* * *

你好

* * *

你好

* * *

现在我想动态附加事件 say `onmouseover`，`onmouseout`这样每当我将光标移动到特定`div`元素 say或时`div1`，相应的部分应该改变颜色（比如蓝色），当光标移出时它应该返回到原来的颜色。`div2``div3``div`

我已经尝试过锻炼，但我无法检索`div`我动态创建的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:07:04.177

您无需按 ID 进行选择。您已经拥有该元素，因此请继续向其添加处理程序。

```
for(i=0;i<3;i++) {
  var d1 = document.createElement('div');
  d1.id = "div" + i;

  var l1 = document.createElement('label');
  l1.innerHtml = "Hello";
  d1.appendChild(l1);

  var line1 = document.createElement('hr');
  d1.appendChild(line1);
  document.body.appendChild(d1);

  d1.onmouseover = function() {
     this.style.color = "#00F";
  };
  d1.onmouseout = function() {
     this.style.color = "";
  };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:08:12.943

只需构建您的处理程序，然后在循环中分配它们：

```
var mouseover = function() {
        this.style.backgroundColor = '#AAF';
    },
    mouseout = function() {
        this.style.backgroundColor = '';
    };
for (i = 0; i < 3; i++) {
    var d1 = document.createElement('div'),
        l1 = document.createElement('label'),
        line1 = document.createElement('hr');
    d1.id = "div" + i;
    l1.innerHtml = "Hello";
    d1.appendChild(l1);
    d1.appendChild(line1);
    d1.onmouseover = mouseover;
    d1.onmouseout = mouseout;
    document.body.appendChild(d1);
}​ 
```

演示地址：http: [//jsfiddle.net/vfVCm/](http://jsfiddle.net/vfVCm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:19:15.130

如果您的元素是动态创建的，那么使用事件委托并将事件侦听器附加到父元素而不是您动态创建的每个元素可能会更好。这样，您的侦听器即使对附加后创建的元素也有效。DOM 事件冒泡，事件的实际目标以`event.target`. 这是一个例子：

```
<div id="parent">
  <p id="event1">A</p>
  <p id="event2">B</p>
  <p id="event3">C</p>
</div>

// call on DOMContentLoaded
document.getElementById("parent").addEventListener("click", function(e) {
  if(e.target && e.target.nodeName.toLowerCase() == "p") {
    alert("Clicked element " + e.target.id);
  }
}); 
```

见[jsfiddle](http://jsfiddle.net/rVTGV/)。

# php - PHP中的更新状态功能无法正常工作

> ID：13442331
> 
> 赞同：-1
> 
> 时间：2012-11-18T17:01:43.427
> 
> 标签：php, sql-update

我在用户登录和注销时写了一个更新函数，代码是

```
function update_status_offline($id) {
$id = $_SESSION['id'];
mysql_query("UPDATE users SET status = 0 WHERE id = $id"); } 
```

在线状态也是如此，一切正常，但是当我删除时

`header('Location: ../');`

它向我显示以下错误：

> 警告：update_status_offline() 缺少参数 1 (...)

代码中可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:03:29.033

您没有将参数传递给函数

如果你有：

```
update_status_offline(); 
```

它需要更改为：

```
update_status_offline($id); 
```

或者`$id`从功能中删除，因为它似乎已经被设置。

```
function update_status_offline(){
    $id = $_SESSION['id'];
    mysql_query("UPDATE users SET status = 0 WHERE id = $id"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:04:06.053

试试这个（无参数）

```
function update_status_offline()
{
    $id = $_SESSION['id'];
    mysql_query("UPDATE users SET status = 0 WHERE id = $id"); 
} 
```

# php - 子目录中的锂视图

> ID：13442332
> 
> 赞同：2
> 
> 时间：2012-11-18T17:01:44.700
> 
> 标签：php, lithium

我正在使用适用于 PHP 的 Lithium 框架开发一个网站，并且我的控制器和视图需要有两个子目录（即管理员和博客）：

```
-controllers
  -admin
    HomeController.php
    ...
  -blog
    HomeController.php
    ...
  HomeController.php
  ...

-views
  -admin
    -home
      index.html.php
      ...
    ...
  -blog
    -home
      index.html.php
      ...
    ...
  -layouts
    default.html.php
    admin.html.php
    blog.html.php 
```

到目前为止，我已经发现了允许在控制器中使用子域的`Dispach::config()`方法，方法是：

```
Dispatcher::config(array('rules' => array(
  'admin' => array('controller' => 'app\controllers\admin\{:controller}Controller'),
  'blog' => array('controller' => 'app\controllers\blog\{:controller}Controller'),
))); 
```

这在您使用以下路由时有效：

```
$options = array('continue' => true);

Router::connect('/admin', array(
  'admin' => true,
  'controller' => 'Home'
), $options);

Router::connect('/admin/{:args}', array(
  'admin' => true
), $options);

Router::connect('/blog', array(
  'blog' => true,
  'controller' => 'Home'
), $options);

Router::connect('/blog/{:args}', array(
  'blog' => true
), $options); 
```

现在我遇到的问题是我无法弄清楚如何将其设置为自动使用`admin/blog`模板和`admin/blog`查看文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:19:35.657

借助 Media，您可以覆盖默认模板路径。上面的过滤器为管理请求设置了不同的路径（在 config/bootstrap/media.php 中）。

```
Dispatcher::applyFilter('_callable', function($self, $params, $chain) {
  $next = $chain->next($self, $params, $chain);

  if ($params['request']->admin) {

    Media::type('default', null, array(
        'view' => 'lithium\template\View',
        'paths' => array(
            'layout' => '{:library}/views/layouts/{:layout}.{:type}.php',
            'template' => '{:library}/views/admin/{:controller}/{:template}.{:type}.php'
        )
    ));
  }

return $next;

}); 
```

# mysql - EasyPHP MySQL 脚本速度

> ID：13442334
> 
> 赞同：0
> 
> 时间：2012-11-18T17:01:56.247
> 
> 标签：mysql, easyphp

我在旧的 Windows XP 系统上使用 EasyPHP 12.1 和 MySQL。我有一个 SQL 脚本 (script.sql)，其中包含 < 10 个表创建和 > 200,000 个 INSERT INTO 语句。该脚本的结构如下：

```
SET autocommit = 0;
START TRANSACTION;
USE myDatabase;
...
COMMIT; 
```

其中 ... 是脚本的主体，其中大部分是插入。

我正在使用 mysql -uuser -ppassword < script.sql 运行它。

当我这样做时，插入大约 1/3 的记录需要一个多小时。这不可能是对的，所以我一定做错了什么——但是什么？你能看出这个脚本有什么问题吗？此堆栈是否存在任何已知的错误或性能问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:29:30.087

评论中没有发生一件事。**存储引擎会影响数据的存储位置**。这也会影响它的存储方式，这导致 MyISAM 在 INSERT 上比 innoDB 慢（由于 myISAM 需要在每次插入时重写完整索引）。

如果您使用的是 MEMORY 引擎，请考虑更改。MEMORY 对临时表很有用——当你关闭服务器时，你会丢失表的内容。MEMORY**永远不**应该用于永久表。

如果您的数据未编入索引，请考虑使用 InnoDB、MyISAM 或 ARCHIVE。这将显着增加首次创建时间（因为与 MEMORY 不同，MyISAM、INNODB 和 ARCHIVE 都必须写入磁盘并重新生成索引），但这至少意味着您的表不会奇迹般地消失关闭服务器的那一刻。

我强烈建议阅读各种存储引擎，因为它在大多数情况下非常重要。其中也有一些非常非常酷的功能。

# jquery - 数组中的 jQuery 越界错误

> ID：13442335
> 
> 赞同：2
> 
> 时间：2012-11-18T17:02:05.053
> 
> 标签：jquery, arrays

为什么这段代码会抛出和越界错误，看起来它应该可以正常工作。

```
var a = [[[3,4],[0,0],[0,6],[7,8],[0,9],[8,3]]];
    var b = [3,4];
    console.log(jQuery.inArray(b,a[0][0])); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:03:51.613

你找不到它，因为它不在那里。在 JavaScript 中，仅仅因为两个数组具有相似的内容并不意味着数组本身是相等的。在您的控制台中尝试以下操作：

```
[3,4] === [3,4]; 
```

输出将是 的`false`，因为两个相似的数组不是*同一个*数组。如果您希望此代码正常工作，您实际上必须将一个数组放入另一个数组中，如下所示：

```
var a = [3,4];
var b = [5,a]; // [5,[3,4]]

jQuery.inArray(a, b); // a is found at index 1 
```

如果您只想检查 haystack 中是否存在*类似*的数组，您可以将整个 needle 和 haystack 字符串化，并查找子字符串：

```
var needle = JSON.stringify([3,4]);
var haystack = JSON.stringify([[3,4],[5,6]]);

haystack.indexOf(needle); // needle string found at index 1 
```

但是您应该注意，返回的索引是找到*字符串化*表示的索引，而不是在大海捞针中找到数组的实际索引。如果你想找到数组的真正索引，我们必须稍微修改一下这个逻辑：

```
var needle = JSON.stringify([3,4]),
    haystack = [[3,4],[5,6]],
    position = -1,
    i;

for (i = 0; i < haystack.length; i++) {
    if (needle === JSON.stringify(haystack[i])) {
        position = i;
    }
}

console.log(position); // needle found at index 0​​​ 
```

运行此代码：http: [//jsfiddle.net/DTf5Y/](http://jsfiddle.net/DTf5Y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:08:35.547

问题是你有太多的方括号。

```
var a = [[[3,4],[0,0],[0,6],[7,8],[0,9],[8,3]]];
    var b = [3,4];
    console.log(jQuery.inArray('b',a[0][0])); 
```

应该

```
var a = [[3,4],[0,0],[0,6],[7,8],[0,9],[8,3]];
    var b = [3,4];
    console.log(jQuery.inArray('b',a[0][0])); 
```

# iphone - 自定义 getter 为空

> ID：13442340
> 
> 赞同：0
> 
> 时间：2012-11-18T17:02:27.053
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

如果我使用这个自定义吸气剂：

```
-(NSMutableArray *)queue
{
    if (_queue == nil)
    {
        if ([[NSFileManager defaultManager] fileExistsAtPath:kOfflineQueueFilePath]) {
            return [NSKeyedUnarchiver unarchiveObjectWithFile:kOfflineQueueFilePath];

            //[NSKeyedUnarchiver unarchiveObjectWithFile:kOfflineQueueFilePath];
        }else{
            return [[NSMutableArray alloc] init];
        }
    }
} 
```

_queue 始终为 (null)。我不知道为什么会这样。

但是如果我在 init 中使用相同的代码：

```
 if ([[NSFileManager defaultManager] fileExistsAtPath:kOfflineQueueFilePath]) {            
        sharedQueue.queue =  [NSKeyedUnarchiver unarchiveObjectWithFile:kOfflineQueueFilePath];
    }else{
        sharedQueue.queue = [[NSMutableArray alloc] init];
    } 
```

它像魔术一样工作。为什么我做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:05:42.010

创建自定义 getter 时，需要在返回值之前设置底层 ivar。

改变：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:kOfflineQueueFilePath]) {
    return [NSKeyedUnarchiver unarchiveObjectWithFile:kOfflineQueueFilePath];

    //[NSKeyedUnarchiver unarchiveObjectWithFile:kOfflineQueueFilePath];
}else{
    return [[NSMutableArray alloc] init];
} 
```

到：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:kOfflineQueueFilePath]) {
    _queue = [NSKeyedUnarchiver unarchiveObjectWithFile:kOfflineQueueFilePath];

    //[NSKeyedUnarchiver unarchiveObjectWithFile:kOfflineQueueFilePath];
}else{
    _queue =  [[NSMutableArray alloc] init];
}
return _queue; 
```

# matlab - 将多个绘图绘制到一个图形框架并通过鼠标单击进行缩放

> ID：13442342
> 
> 赞同：1
> 
> 时间：2012-11-18T17:02:31.100
> 
> 标签：matlab, plot, matlab-figure

我想将多个绘图放到一个图形窗口中，当我单击其中一个时，它将在单独的窗口中打开。是否有任何预定义的功能可以做到这一点，或者有什么技巧可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T17:56:20.470

是的，您可以这样做，您需要定义一个回调函数来执行您想要的操作，然后将`axes`属性设置为`ButtonDownFcn`等于此回调。

```
a(1) = subplot(311); // plot stuff
a(2) = subplot(312); // plot stuff
a(3) = subplot(313); // plot stuff
set(a,'ButtonDownFcn', @copyAxesToNewFigure); 
```

关于创建一个`Figure`包含`axes`您单击的副本的新功能，这样的功能应该可以工作：

```
function copyAxesToNewFigure(hObject,eventdata)

  childHandle = get(hObject, 'Children');
  newFig = Figure;
  newAx = Axes;
  copyojb(childHandle, newAx); 
```

# jsf - 更新渲染属性后jsf组件会发生什么

> ID：13442344
> 
> 赞同：0
> 
> 时间：2012-11-18T17:02:32.340
> 
> 标签：jsf, jsf-2

给定以下场景： jsf 组件（例如，CommandButton）的渲染属性依赖于应用程序范围的托管属性。由于该属性在所有会话中共享，因此很容易发生以下情况：用户 A 加载了一个 jsf 页面，并且按钮的 render 属性为 true，因此它被渲染。现在用户 B 也加载了页面，并且 render 属性仍然为 true。现在用户 A 单击导致属性更改其值的按钮，并且不再呈现该按钮。用户 B 仍然拥有旧视图，尽管现在渲染属性为 false，但他可以单击按钮，因为他同时没有更新他的视图。如果用户 B 点击按钮，现在会发生什么？

我认为无论如何都会触发按钮的操作，因为一旦渲染页面，render 属性仅用于渲染按钮并且不再有影响。但是在做了一些测试之后，在我看来，在单击按钮后还会再次检查渲染属性，如果该属性为 false，则不会执行该操作。有人可以证实这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:30:28.430

免责声明：我暂时忽略这个奇怪的设计。

> *但是在做了一些测试之后，在我看来，在单击按钮后还会再次检查渲染属性，如果该属性为 false，则不会执行该操作。有人可以证实这一点吗？*

对，那是正确的。这是防止可能被篡改的请求的一部分，其中黑客试图模拟实际上不是由服务器端呈现的操作组件的调用（例如，仅当当前用户具有管理员角色）。在处理表单提交期间，总是会重新检查`rendered`(and `disabled`and ) 属性。`readonly`

在您的特定情况下，您希望在视图范围内拥有负责该属性的条件的**副本**`rendered`，以便只要您与同一视图交互，就只会使用此副本。这可以通过将应用程序范围属性作为视图范围托管 bean 的托管属性注入，然后在`rendered`属性中引用它来实现。

```
@ManagedBean
@ViewScoped
public class ViewBean {

    @ManagedProperty("#{appBean.rendered}")
    private boolean rendered;

    // ...
} 
```

和

```
<h:commandButton ... rendered="#{viewBean.rendered}" /> 
```

# wordpress - Wordpress 简码不适用于一个主题

> ID：13442346
> 
> 赞同：0
> 
> 时间：2012-11-18T17:02:36.927
> 
> 标签：wordpress, shortcode

我开发了一个使用简码的 wordpress 插件。问题是它在这个主题中不起作用：

[http://judopassion.com/wordpress/?p=274](http://judopassion.com/wordpress/?p=274)

我试图在functions.php中添加这一行但无论如何都不起作用：

```
add_filter('the_excerpt', 'do_shortcode'); 
```

怎么了？我必须在主题上启用简码 api 吗？如何？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:15:36.710

我正在使用`get_the_content()`方法而不是`the_content();`

所以我必须修改；

```
do_shortcode(get_the_content()); 
```

# c# - 将事件添加到动态创建的 UIElement 子项，例如 Canvas

> ID：13442347
> 
> 赞同：1
> 
> 时间：2012-11-18T17:02:40.473
> 
> 标签：c#, wpf, events, canvas, uielement

我有一个`Canvas`不同的元素，它们在运行时在画布内动态创建和删除，它本身位于自定义用户控件中。

现在我想添加一些 Touchevents，比如 ManipulationStarted。但是，如果我将它绑定到 上`Canvas`，我会在我的事件中将画布作为发件人返回。但是，我需要`UIElement`被触及的具体内容，所以我想我需要将事件直接绑定到孩子。我怎样才能做到这一点？

PS：我已经尝试在用户控件中创建一个自定义事件，该事件在创建时添加到特定的子项，但是这种方法似乎极大地影响了性能。

# php - 按日期显示 MySQL 结果

> ID：13442351
> 
> 赞同：0
> 
> 时间：2012-11-18T17:03:00.070
> 
> 标签：php, mysql, date, row, sql-order-by

我有这个mysql表：

```
+--------------------+---------+-------+
|      date          | query   | count |
|--------------------+---------+-------|
|2012-11-18 09:52:00 | Michael |   1   |
|2012-11-18 10:47:10 |  Tom    |   2   |
|2012-11-17 15:02:12 |  John   |   1   |
|2012-11-17 22:52:10 |  Erik   |   3   |
|2012-11-16 09:42:01 |  Larry  |   1   |
|2012-11-16 07:41:33 |  Kate   |   1   |
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

等等。我可以通过以下代码简单地获取结果并按日期对它们进行排序：

```
$queries = mysql_query("SELECT * FROM my_tables ORDER BY date DESC LIMIT 20"); 
while($row = mysql_fetch_array($queries)){
    echo "Name ".$row['query']."";
} 
```

但是如何显示按特定日期排序的表中的元素，如下所示：

```
In 2012-11-18:
Michael
Tom

In 2012-11-17:
John
Erik

In 2012-11-16:
Larry
Kate 
```

等等。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:22:07.643

这是 PHP 代码：

```
$query = mysql_query("SELECT date, query FROM table6 ORDER BY date DESC LIMIT 20");
$group_date = null;
while ($row = mysql_fetch_assoc($query)) {
    if ($group_date !== substr($row["date"], 0, 10)) {
        $group_date = substr($row["date"], 0, 10);
        echo "<h1>$group_date</h1>\n";
    }
    echo "${row['query']}<br>\n";
} 
```

输出：

> # 2012-11-18
> 
> 汤姆
> 
> 迈克尔
> 
> # 2012-11-17
> 
> 埃里克
> 
> 约翰
> 
> # 2012-11-16
> 
> 拉里
> 
> 凯特

请注意，虽然此代码按一列“分组”行，但它可以轻松扩展为按多列分组行。留作练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:13:06.597

+1 好问题，这个问题不仅仅是如何订购查询！

我认为这可以使用[`GROUP_CONCAT`function](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)来完成。当您将它们分组并用逗号分隔它们时，这将组合匹配结果。一旦你有了结果，你就可以爆炸或做任何你想做的事

[http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php)

您必须按日期转换和分组，然后 group_concat 名称。然后（在 php 或 whathaveyou 中）用逗号分解名称，并回显日期后跟每个结果的名称。

**编辑**看起来你想要一种 PHP 方法来解决这个问题？哎呀

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T17:08:04.283

用这个：

```
SELECT * FROM my_tables WHERE date > "2012-11-16" ORDER BY date LIMIT 4 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T17:11:48.563

试试 WHERE 语句：

```
 select * from my_table where date_column > "2012-11-18 00:00:00" and date_column < "2012-11-18 23:59:59" order by date_column 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-18T17:16:47.213

关于什么

```
 SELECT * FROM my_tables GROUP BY YEAR(date), MONTH(date), DAY(date) ORDER BY date DESC LIMIT 20 
```

# multithreading - 我可以唤醒特定的 Haskell 线程吗？

> ID：13442356
> 
> 赞同：4
> 
> 时间：2012-11-18T17:03:28.600
> 
> 标签：multithreading, haskell

有没有办法唤醒 Haskell 中的特定线程？有一个[函数可以暂停当前线程](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Control-Concurrent.html#v%3ayield)。但醒着的对手似乎并不存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T18:33:37.650

`yield`不会挂起当前线程 - 它会将其移动到运行队列的后面。它仍在运行队列中，它只是确保其他可运行线程（可能不是所有可运行线程，如果定义了多个执行上下文，这使得这是一个非常弱的保证）有机会在它继续之前运行。在大多数情况下，您应该忽略`yield`. 例外情况是，当您确切了解它的作用以及它的重要性时。

要实际挂起和恢复线程，`MVar`s 是要走的路。当一个线程等待空`MVar`时，它会从可运行队列中删除。当一个值被放入 a 时`MVar`，一个等待它的线程（我相信在 GHC 中它总是等待`MVar`最长时间的线程，但不能保证）被放回可运行队列。

# c++ - Kinect 3D 到 2D 偏差

> ID：13442365
> 
> 赞同：0
> 
> 时间：2012-11-18T17:04:12.907
> 
> 标签：c++, kinect, openkinect

我正在努力解释 kinect 深度数据。

为了获得与 kinect 的真实世界距离，我使用了以下公式：

```
 if(i<2047){
        depthToMeterTable[i] = i * -0.0030711016  + 3.3309495161; 
    }
    else{
        depthToMeterTable[i] = 0;
    } 
```

这个公式作为距离估计器提供了一些很好的东西。

但是，我确实从 90° 墙角可视化中获得了奇怪的输出。

下图是两个不同的信息。首先，紫色线代表我应该看到的墙。一个 90° 角。红点代表从 kinect 看到的墙。如您所见，这两个平面的角度现在更大了。

[http://img843.imageshack.us/img843/4061/kinectbias.jpg](http://img843.imageshack.us/img843/4061/kinectbias.jpg)

你知道我可以在哪里纠正这种偏见，以及如何去做吗？

感谢您的阅读，

Al_th

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:41:44.037

我不熟悉那个转换公式（也不确定你的 depthToMeterTable 是如何填充的——那里使用了什么公式）。

不过，libfreenect 中有一个内置函数：[freenect_camera_to_world](https://github.com/OpenKinect/libfreenect/blob/master/src/registration.c#L318)

在添加该实用函数之前，我使用了[Matt Fischer 的转换函数](http://graphics.stanford.edu/~mdfisher/Kinect.html)（RawDepthToMeters 和 DepthToWorld）。

高温高压

# algorithm - 逐层读取二叉树。最快的方法是什么？

> ID：13442367
> 
> 赞同：1
> 
> 时间：2012-11-18T17:04:38.707
> 
> 标签：algorithm, tree, binary-tree, tree-traversal

假设有这样的二叉树。 ![二叉树](../Images/e63c7ec8763c37d8094d8bec1a04a47a.png)

我想逐层阅读（从左到右），所以输出看起来像：

```
2 4 5 3 1 3 9 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:14:04.113

它的打印`BFS`，你应该使用辅助数据结构队列：[在这里学习](http://www.cs.bu.edu/teaching/c/tree/breadth-first/)

`listed below is pseudocode for a simple queue based level order traversal`,

```
levelorder(root) 
  q = empty queue
  q.enqueue(root)
  while not q.empty do
    node := q.dequeue()
    visit(node)
    if node.left ≠ null
      q.enqueue(node.left)
    if node.right ≠ null
      q.enqueue(node.right) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:18:44.280

```
 This is one way of doing it.
void tree::BFS()
{
queue<node *>p;
node *leaf=root;

node *newline=new node; //this node helps to print a tree level by level
newline->val=0;
newline->left=NULL;
newline->right=NULL;
newline->parent=NULL;

p.push(leaf);
p.push(newline);

while(!p.empty())
{
    leaf=p.front();
    if(leaf==newline)
    {
        printf("\n");
        p.pop();
        if(!p.empty())
        p.push(newline);
    }
    else
    {
        cout<<leaf->val<<" ";
        if(leaf->left!=NULL)
        {
            p.push(leaf->left);
        }
        if(leaf->right!=NULL)
        {
            p.push(leaf->right);
        }
        p.pop();
    }
}
delete newline;

}

This implementation is using queue.There are other implementations also in which you 
do not need queue.

The below mwntioned code do not need any queue.

1) Using the parent pointer, get the level of the given node. Also, get the root of the  
tree.

int level = 1;
struct node *temp = node;

/* Find the level of the given node and root of the tree */
while(temp->parent != NULL)
{
 temp = temp->parent;
 level++;
}
/* temp is now root of the tree and level is level of the node */
2) Once we have level of the given node and root of the tree, traverse the tree from   
   root to the calculated level + 1\. We are traversing one extra level for the case   
   when given node is the rightmost node of its level. While traversing if you visit 
   the given node, mark visited flag as 1\. Print the node just after the visited flag.

#include <stdio.h>
#include <stdlib.h>

/* Note the structure of root. It has data and pointers to left childe, right child and
parent node */
struct node
{
int data;
struct node *left;
struct node *right;
struct node *parent;
};

/* Prints the level order successor of node
root  --> root of the tree
level --> level of node */
void _print(struct node* root, struct node *node, int level)
{
static int visited = 0;
if(root == NULL)
 return;
if(level == 1)
{
 /* If the given node is visited then print the current root */
 if(visited == 1)
 {
    printf("Level Order Successor is %d ", root->data);
    visited = 0;
    return;
 }
 /* If the current root is same as given node then change the visited flag
    so that current node is printed */
 if(root == node)
    visited = 1;
}
else if (level > 1)
{
  _print(root->left, node, level-1);
  _print(root->right, node, level-1);
}
}

void printLevelOrderSuccessor(struct node *node)
{
int level = 1;
struct node *temp = node;

/* Find the level of the given node and root of the tree */
while(temp->parent != NULL)
{
 temp = temp->parent;
 level++;
}
_print(temp, node, level);
}

/* Helper function that allocates a new node with the
given data and NULL left and right pointers. */ 
struct node* newNode(int data)
{
struct node* node = (struct node*)malloc(sizeof(struct node));
node->data = data;
node->left = NULL;
node->right = NULL;
node->parent = NULL;
return(node);
}  

/* Driver program to test above functions*/
int main()
{
  struct node *root  = newNode(1);
  root->parent      = NULL;
  root->left         = newNode(2);
  root->right        = newNode(3);
  root->left->parent = root;
  root->right->parent = root;  

root->left->left  = newNode(4);
root->right->right = newNode(5); 

root->left->left->parent   = root->left;
root->right->right->parent  = root->right;

// printf("\n Level order successor of %d is: ", root->right->data);
 printLevelOrderSuccessor(root->left->left);

return 0;
}

Time Complexity: O(n) for both the algos.
Space Complexity: O(n) if we consider the size of recursion stack, otherwise O(1). 
```

# jquery - jQuery animate({top: x}) 在除 chrome 之外的所有内容中都非常滞后

> ID：13442368
> 
> 赞同：2
> 
> 时间：2012-11-18T17:04:38.800
> 
> 标签：jquery

我一直在尝试使用 jQuery 及其 animate() 函数编写一个非常简单的动画粘性侧栏来更改顶部：div 的 CSS 属性。不幸的是，除了 chrome，它会变得非常滞后。我假设每次窗口滚动时它都会填充内存并计算一个newTop。有一个更好的方法吗？

```
$(function() { // document ready 
    var $sticky = $('.sticky');
    var stickyTop = $sticky.offset().top;
    var padding = 0;
    var stickyMargin = parseInt($sticky.css('margin-top')) + padding;
    var intersection = stickyTop - stickyMargin;

    $(window).scroll(function(){
        var windowTop = $(window).scrollTop();

        if (intersection < windowTop) {
            var newTop = (windowTop - intersection);
            $sticky.stop().animate({top: newTop}, 'slow');
        }
        else if ($sticky.offset().top != 0) {
            $sticky.stop().animate({top: 0}, 'slow');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:11:56.083

我看到的问题是每个滚动动作都会创建一个动画，该动画在浏览器的渲染管道中排队。您将需要对动画进行去抖动，这样您就不会得到一个使整个事情变得非常错误的动画堆栈。例如，您可以等待几毫秒才能有效注册滚动。看看[jQuery Timeout](http://benalman.com/projects/jquery-dotimeout-plugin/)。之后，您可以通过在脚本中编辑 scroll() 函数来使用它

```
$(window).scroll(function(){
   $.doTimeout( 'scroll', 300, function(){
      // do your animation
   });
}); 
```

# sdk - WP8 SDK 在虚拟机上？

> ID：13442370
> 
> 赞同：1
> 
> 时间：2012-11-18T17:04:54.807
> 
> 标签：sdk, windows-8, ram, windows-phone-8, virtual-pc

我有一台 HP EliteBook 8560p，配备 4GB 内存和一个运行 Windows 7 的 2.5Ghz i5-2450M 处理器。

我的问题是：我是否能够在运行 W8 的虚拟机上运行 WP8 SDK，我将 3GB 内存提供给它还是会变慢？SDK 的系统要求至少为 4GB。不幸的是，这是我的学校电脑，所以我不能安装 W8 作为操作系统，这就是我想使用虚拟机的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:09:07.293

您将能够在虚拟机上运行 W8 和 WP8 SDK，但您的体验可能会非常缓慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T05:24:24.370

添加到 MDumitru 答案中，您应该安装虚拟盒而不是 VMware。Windows Phone 8 SDK 需要[硬件 Hyper-V 支持](https://stackoverflow.com/questions/13148828/unable-to-create-the-virtual-machine)[1](https://stackoverflow.com/questions/13148828/unable-to-create-the-virtual-machine)。您可以在其中安装 VMware 和 WP8 sdk 时按照本文进行[操作。](http://www.developer.nokia.com/Community/Wiki/Windows_Phone_8_SDK_on_a_Virtual_Machine_with_Working_Emulator)

# css - ie7下拉菜单悬停在问题上

> ID：13442374
> 
> 赞同：4
> 
> 时间：2012-11-18T17:05:07.163
> 
> 标签：css, drop-down-menu, internet-explorer-7

在 ie7! 中遇到问题，请参阅下图了解下拉菜单的外观。这在其他所有浏览器中都可以正常工作，但在 ie7 中，一旦您冒险离开主要的“即：顶部链接”，菜单就会消失。我已经检查了在所有内容周围设置红色框，并且 li 元素正确扩展以包含子菜单，但我无法修复它。有任何想法吗？

标记示例：

```
<nav>    
  <ul class="clearfix">    
    <li class="dropdown-link"><a href="#" class="main-link">Top Link</a>
      <ul class="clearfix dropdown-holder">
        <li>    
          <div class="arrow"></div>
          <div class="dropdown-holder-inner">
             <ul class="dropdown">
               <li><a href="#">Link</a></li>
               <li><a href="#">Link</a></li>
               <li><a href="#">Linky</a></li>
               <li><a href="#">Link</a></li>
               <li><a href="#">Link</a></li>
               <li class="last-child"><a href="#">Link</a></li>
             </ul>
           </div>
         </li>                            
      </ul>
     </li>
    </ul>
</nav>​ 
```

CSS 很重，所以我把完整代码放在 jsfiddle 上：http: [//jsfiddle.net/n2kgX/3/](http://jsfiddle.net/n2kgX/3/)

图片：http: [//i.stack.imgur.com/k24Du.png](http://i.stack.imgur.com/k24Du.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T04:58:58.207

我在这里创建了一个示例：http: [//jsfiddle.net/jho1086/bbULV/5/](http://jsfiddle.net/jho1086/bbULV/5/)，我稍微更改了 html 代码和 css，因为在我看来容器太多了。而且我更改了 HTML5 标记 ( `<nav>`)，因为 HTML5 不支持 IE8 及以下版本，除非您有一个固定的。

```
<div id="nav">      
    <ul class="clearfix sf-menu">      
        <li class="dropdown-link"><a href="#" class="main-link">Top Link</a>  
            <div class="clearfix dropdown-holder">  
                <div class="arrow"></div>  
                <ul class="dropdown clearfix">  
                    <li><a href="#">Link</a></li>  
                    <li><a href="#">Link</a></li>  
                    <li><a href="#">Linky</a></li>  
                    <li><a href="#">Link</a></li>  
                    <li><a href="#">Link</a></li>  
                    <li class="last-child"><a href="#">Link</a></li>  
                </ul>    
            </div>    
        </li>  
    </ul>  
</div> 
```

**css**

```
#nav { background:#6B6C6E; width:300px; margin:30px auto 0;}
.sf-menu li{float:left; font:12px/1em 'arial'; position:relative; padding:0 0 5px;}
.sf-menu li a{float:left;padding:12px 10px 5px;color:#fff; text-transform:uppercase;}
.sf-menu .dropdown-holder{
    position:absolute;
    left:-999em;
    width:218px; 
    top:93%;
}
.sf-menu li:hover .dropdown-holder {left:-999em;}

.sf-menu li:hover .dropdown-holder {left:0;}
.arrow { background:url(arrow.png) no-repeat left top; width:32px; height:8px; position:relative; z-index:2; left:10px;}
.dropdown {
    box-shadow:0 0 5px #bec2c8;
    background:#fff;
    height:100%;
    position:relative;
    z-index:1;
    padding:10px 10px 5px;
}
.sf-menu .dropdown li{text-transform:capitalize; border-bottom:1px solid #ccc;}
.sf-menu .dropdown li.last-child { border:0;}
.sf-menu .dropdown a{
    float:left;
    padding:5px 0;
    width:198px;
    color:#333;
}​​ 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T10:58:23.953

我有一种感觉，你的例子过于复杂。

这是我所知道的嵌套菜单（带悬停）的最简单实现：

```
<ul class="outer">
    <li>
        <p>TOP MENU</p>
        <ul class="inner">
            <li><a href="#">link1</a></li>
            <li><a href="#">link2</a>
                <ul class="inner">
                    <li><a href="">link2.1</a></li>
                </ul>
            </li>            
            <li><a href="#">link3</a></li>
        </ul>
    </li>
</ul> 
```

用一点css：

```
.outer {
    border: 1px solid red;
    width: 100px;
}

.inner {
    display: none;
}

.inner li {
    padding: 0 0 0 10px;
}

.outer li:hover > .inner {
    display: block;
} 
```

在 IE8 上测试（在具有 IE7 标准的 IE7 模式下）。在这里查看：http: [//jsfiddle.net/BUuyV/11/](http://jsfiddle.net/BUuyV/11/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:42:26.497

这是您可以执行的操作：

```
<!--[if lte IE 7]>
<style type="text/css">
nav ul li:first-child ul.dropdown-holder{
    left: 0px;
    top:-4px;
}
</style>
<![endif]--> 
```

> **注意：**要让 :first-child 在 IE8 及更早版本中工作，`<!DOCTYPE>`必须声明 a。

# c - 分配内存供函数使用的最佳实践——malloc 内部还是外部？

> ID：13442375
> 
> 赞同：7
> 
> 时间：2012-11-18T17:05:07.020
> 
> 标签：c, malloc

在我使用 C 编码的经验中，我看到了两种为函数传递参数的方法：

1.  `malloc`在调用函数之前

2.  `malloc`内部函数（变量在调用函数之前未初始化）

我特别喜欢第二种形式。但是，虽然我是唯一一个编写程序的人，但我知道这一点，但其他人不知道，并且可能导致 2`malloc`和内存泄漏。

所以，我的问题是：最好的做法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T17:16:40.957

在调用者中分配内存更加灵活，因为它允许调用者使用静态或自动存储而不是动态分配，并且无需处理被调用者分配失败的情况。另一方面，让调用者提供存储需要调用者提前知道大小。如果将大小作为常量编译到调用者中，并且被调用者位于稍后更新为使用更大结构的库中，那么事情将严重中断。当然，您可以通过提供第二个函数（或库中的外部变量）来检索必要的大小来避免这种情况。

如有疑问，您始终可以使用两个功能：

1.  使用调用者提供的存储的主要功能。
2.  一个包装函数，它分配正确的存储量，使用它调用#1 中的函数，并将指针返回给调用者。

然后调用者可以自由选择更适合特定用例的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-18T17:20:02.547

我个人强烈赞成您的第一个正交性命题（只要可能）。举个例子：

```
extern void bar(int *p, int n);

void foo(int n)
{

   int *p = malloc(n * sizeof *p);

   // fill array object
   bar(p, n);

   // work with array elements

   /* ... */

   // array no longer needed, free object
   free(p);
} 
```

这是正交的。`malloc`并且`free`在干净且可读的相同词法范围内调用。另一个优点是您可以将`bar`具有不同存储持续时间的数组传递给函数，例如具有自动或静态存储持续时间的数组。你让`bar`函数只关注它已经完成的工作，让另一个函数管理数组分配。

请注意，这也是所有标准 C 函数的工作方式：它们*似乎*从不调用`malloc`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T17:22:34.800

我用来决定的标准是：

*   如果被调用函数之外的代码可以知道要分配多少内存，那么最好让调用代码分配内存。

*   如果被调用函数外部的代码不知道要分配多少内存，则被调用函数必须进行内存分配。然后很可能会有第二个函数可用于释放第一个函数（“调用”函数）返回的内存，除非它只是一个`free()`需要的。功能文档应该清楚地说明这一点。

例如，如果被调用函数正在从文件中读取完整的树结构，则该函数必须分配内存。但是，还会有一个用于释放内存的伴随函数（因为被调用的代码知道如何去做，而调用的代码不需要知道）。

另一方面，如果被调用函数正在将一个简单的整数和浮点值列表读取到一个固定大小的结构中，那么让调用函数分配内存要好得多。请注意，我跳过了“字符串”！如果字符串在结构中是固定大小的，那么调用函数可以进行分配，但是如果字符串是可变大小的，那么被调用函数可能会进行分配。

标准 C 库具有[`fgets()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html)期望调用代码分配要使用的内存的函数。调用序列说明`fgets()`有多少可用空间。如果您没有提供足够的内存，您就会遇到问题。（问题`fgets()`是你可能只得到一行文本的开头，而不是整行文本。）

POSIX 2008 库提供[`getline()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html)了为行分配足够空间的方法。

和[`asprintf()`](http://linux.die.net/man/3/asprintf)相关函数（参见[TR24731-2](http://www.open-std.org/jtc1/sc22/wg14/www/projects#24731-2)）根据需要分配内存。该[`snprintf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/snprintf.html)功能没有 - 它被告知有多少可用空间，它使用的不多，并说明它真正需要多少，如果您没有提供足够的空间并做一些事情，则由您决定它（分配更多空间并重试，或者轻率地忽略截断的值并继续，就好像没有出错一样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T17:33:20.383

信息隐藏原理表明分配内存最好在函数内完成。

如果您查看***stdio.h***的工作原理：

```
FILE *myFile;

myFile = fopen("input.txt", "r");

if (!myFile) {
  fprintf(stderr, "Error opening input.txt for reading.\n");
  // other exit handling close
}
else {
  // code to read from file
  fclose(myFile);
} 
```

库调用分配内存以保存有关您正在使用的文件的信息，并返回指向该结构的指针。调用者负责稍后释放该内存（通过调用*fclose*）。

这种模式在标准 C 库中重复出现。

要求调用者分配和释放内存至少有两个缺点：

1.  调用方需要额外的代码。
2.  如果分配的结构的大小发生变化，则需要重新编译（至少）或更改调用代码。

# node.js - 在 express 中全局重定向所有尾部斜杠

> ID：13442377
> 
> 赞同：45
> 
> 时间：2012-11-18T17:05:15.193
> 
> 标签：node.js, express, disqus

我正在使用 Node.js 和 Express，并且有以下路由：

```
app.get('/', function(req,res){
    locals.date = new Date().toLocaleDateString();

    res.render('home.ejs', locals);
});

function lessonsRouter (req, res, next)
{
    var lesson = req.params.lesson;
    res.render('lessons/' + lesson + '.ejs', locals_lessons);
}

app.get('/lessons/:lesson*', lessonsRouter);

function viewsRouter (req, res, next)
{
    var controllerName = req.params.controllerName;
    res.render(controllerName + '.ejs', locals_lessons);
}
app.get('/:controllerName', viewsRouter); 
```

我的课程页面上有一个[Disqus](http://disqus.com/)小部件，我注意到一个奇怪的行为，当`myapp.com/lessons`我`myapp.com/lessons/`进入两个不同的页面时（其中一个有我之前在 Disqus 中添加的评论，另一个没有评论）。

有没有办法将我的所有网址“规范化”为没有斜杠？我试图添加`strict routing`标志来表达但结果是一样的

谢谢

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-02T20:33:37.370

[Tolga Akyüz](https://stackoverflow.com/users/1271840/tolga-akyuz)的[回答](https://stackoverflow.com/a/13443359/638546)令人鼓舞，但如果斜线后有任何字符则不起作用。例如`http://example.com/api/?q=a`被重定向到`http://example.com/api`而不是`http://example.com/api?q=a`.

这是提议的中间件的改进版本，它通过将原始查询添加到重定向目标 url 的末尾来解决问题。该版本还具有更新说明中描述的一些安全功能。

```
app.use((req, res, next) => {
  if (req.path.substr(-1) === '/' && req.path.length > 1) {
    const query = req.url.slice(req.path.length)
    const safepath = req.path.slice(0, -1).replace(/\/+/g, '/')
    res.redirect(301, safepath + query)
  } else {
    next()
  }
}) 
```

**2016 年更新：**正如[jamesk](https://stackoverflow.com/questions/13442377/redirect-all-trailing-slashes-gloablly-in-express/15773824?noredirect=1#comment65975609_15773824)所述并在[RFC 1738](https://stackoverflow.com/a/1617074/638546)中所述，只有在域之后没有任何内容时才能省略尾部斜杠。因此，`http://example.com?q=a`是一个无效的网址，哪里`http://example.com/?q=a`是一个有效的网址。在这种情况下，不应进行重定向。幸运的是，表达式可以解决`req.path.length > 1`这个问题。例如，给定 url `http://example.com/?q=a`，路径`req.path`等于`/`，因此避免了重定向。

**2021 年更新：**正如[Matt](https://stackoverflow.com/questions/13442377/redirect-all-trailing-slashes-globally-in-express/15773824#comment122560025_15773824)发现的那样，路径开头的双斜杠`//`会导致危险的重定向。例如，该 url`http://example.com//evil.com/`创建一个重定向，`//evil.com`该重定向被受害者的浏览器解释为`http://evil.com`或`https://evil.com`由受害者的浏览器解释。此外，[Van Quyet](https://stackoverflow.com/questions/13442377/redirect-all-trailing-slashes-globally-in-express/15773824#comment97837154_15773824)指出，可以优雅地处理多个尾部斜杠。由于这些发现，我添加了一条通过将所有后续斜杠替换为单个`/`. 我相信安全措施造成的性能开销可以忽略不计，因为[正则表达式文字只编译一次](https://stackoverflow.com/questions/8814009/how-often-does-javascript-recompile-regex-literals-in-functions)。此外，代码语法已更新为 ES6。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-11-18T18:47:50.290

尝试为此添加中间件；

```
app.use((req, res, next) => {
  const test = /\?[^]*\//.test(req.url);
  if (req.url.substr(-1) === '/' && req.url.length > 1 && !test)
    res.redirect(301, req.url.slice(0, -1));
  else
    next();
}); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-02-10T21:24:36.727

connect-slashes 中间件是专门为这种需要而设计的： [https ://npmjs.org/package/connect-slashes](https://npmjs.org/package/connect-slashes)

安装它：

`$ npm install connect-slashes`

阅读完整文档： [https ://github.com/avinoamr/connect-slashes](https://github.com/avinoamr/connect-slashes)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-03-10T20:51:49.307

我添加这个答案是因为我对其他解决方案有太多问题。

```
/**
 * @param {express.Request} req
 * @param {express.Response} res
 * @param {express.NextFunction} next
 * @return {void}
 */
function checkTrailingSlash(req, res, next) {
  const trailingSlashUrl = req.baseUrl + req.url;
  if (req.originalUrl !== trailingSlashUrl) {
    res.redirect(301, trailingSlashUrl);
  } else {
    next();
  }
}

router.use(checkTrailingSlash); 
```

这将翻译：

```
/page ==> /page/
/page?query=value ==> /page/?query=value 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-05-13T00:49:48.450

一个班轮：

```
router.get('\\S+\/$', function (req, res) {
  return res.redirect(301, req.path.slice(0, -1) + req.url.slice(req.path.length));
}); 
```

这只会捕获需要重定向的 url，而忽略其他的。

示例结果：

```
/         ==> /
/a        ==> /a
/a/       ==> /a
/a/b      ==> /a/b
/a/b/     ==> /a/b
/a/b/?c=d ==> /a/b?c=d 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-11T19:06:24.393

上面的答案在很多情况下都有效，但是 GET vars 可能会遇到问题，如果你将它放在另一个快速中间件中，它的依赖`req.path`会导致问题，并且它的依赖`req.url`也会产生不必要的副作用。如果您正在寻找更严格的解决方案，这将解决问题：

```
// Redirect non trailing slash to trailing slash
app.use(function(req, res, next){
    // Find the query string
    var qsi = req.originalUrl.indexOf('?');
    // Get the path
    var path = req.originalUrl;
    if(qsi > -1) path = path.substr(0, qsi);
    // Continue if the path is good or it's a static resource
    if(path.substr(-1) === '/' || ~path.indexOf('.')) return next();
    // Save just the query string
    var qs = '';
    if(qsi > -1) qs = req.originalUrl.substr(qsi);
    // Save redirect path
    var redirect = path + '/' + qs;
    // Redirect client
    res.redirect(301, redirect);

    console.log('301 redirected ' + req.originalUrl + ' to ' + redirect);
}); 
```

它总是对 GET 变量感到满意，并且如果您将它放在中间件中也不会中断。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-08T09:14:43.553

```
/**
 * @param {express.Request} req
 * @param {express.Response} res
 * @param {express.NextFunction} next
 * @return {void}
 */
function checkTrailingSlash(req, res, next) {
    if (req.path.slice(req.path.length-1) !== '/') {
        res.redirect(301, req.path + '/' + req.url.slice(req.path.length));
    } else {
        next();
    }
}

app.use(checkTrailingSlash); 
```

示例结果：

```
/         ==> /
/a        ==> /a/
/a/       ==> /a/
/a/b      ==> /a/b/
/a/b/     ==> /a/b/
/a/b?c=d  ==> /a/b/?c=d
/a/b/?c=d ==> /a/b/?c=d 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-24T09:58:10.857

如果你使用[fastify](https://github.com/fastify/fastify)来处理你的路由，你可以尝试将 Fastify 的 ignoreTrailingSlash 选项设置为 true。

```
const fastify = require('fastify')({
  ignoreTrailingSlash: true
}) 
```

# ios - 无法归档 iOS 项目

> ID：13442379
> 
> 赞同：3
> 
> 时间：2012-11-18T17:05:36.087
> 
> 标签：ios, app-store, archive

似乎 png 图像（图标和默认屏幕截图）存在某种问题。试图将它们重新保存在 PhotoShop 中，复制粘贴它们。它有时会改变图像的数量，但它们仍然存在。

以下是我得到的错误：

# 1

> CopyPNGFile "/Users/admin/Library/Developer/Xcode/DerivedData/dotLang-hfjdkwzpxfuyaibhmihjxdyzyzqx/Build/Intermediates/ArchiveIntermediates/dotLang/InstallationBuildProductsLocation/Applications/dotlang.app/Default@2x.png" "dotLang/Default@2x.png" cd "/Users/admin/Desktop/newCode 2 3 2 2 2 2/dotLang" setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode. app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng -compress "" "/Users/admin/Desktop/newCode 2 3 2 2 2 2/dotLang/dotLang/Default@2x.png" "/Users/admin/Library/Developer/Xcode/DerivedData/dotLang-hfjdkwzpxfuyaibhmihjxdyzyzqx/Build/Intermediates/ArchiveIntermediates/dotLang/InstallationBuildProductsLocation/Applications/dotlang.app/Default@2x.png"
> 
> 䏰\216\346\217ﮚ@A\346\217\320Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng 发出错误但没有返回非零退出代码表示失败

# 2

> CopyPNGFile "/Users/admin/Library/Developer/Xcode/DerivedData/dotLang-hfjdkwzpxfuyaibhmihjxdyzyzqx/Build/Intermediates/ArchiveIntermediates/dotLang/InstallationBuildProductsLocation/Applications/dotlang.app/Default-568h@2x.png" "dotLang/Default-568h@ 2x.png" cd "/Users/admin/Desktop/newCode 2 3 2 2 2 2/dotLang" setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/ Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr /bin/copypng -compress "" "/Users/admin/Desktop/newCode 2 3 2 2 2 2/dotLang/dotLang/Default-568h@2x.png" "/Users/admin/Library/Developer/Xcode/DerivedData/dotLang-hfjdkwzpxfuyaibhmihjxdyzyzqx/Build/Intermediates/ArchiveIntermediates/dotLang/InstallationBuildProductsLocation/Applications/dotlang.app/Default-568h@2x.png"
> 
> 台~\347\217ﮚ@1\347\217\320Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng 发出错误但未返回非零退出代码以指示失败

# 3

> CopyPNGFile "/Users/admin/Library/Developer/Xcode/DerivedData/dotLang-hfjdkwzpxfuyaibhmihjxdyzyzqx/Build/Intermediates/ArchiveIntermediates/dotLang/InstallationBuildProductsLocation/Applications/dotlang.app/Default-568h@2x.png" "Default-568h@2x. png" cd "/Users/admin/Desktop/newCode 2 3 2 2 2 2/dotLang" setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/ Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin /copypng -compress "" "/Users/admin/Desktop/newCode 2 3 2 2 2 2/dotLang/Default-568h@2x.png" "/Users/admin/Library/Developer/Xcode/DerivedData/dotLang-hfjdkwzpxfuyaibhmihjxdyzyzqx/Build/Intermediates/ArchiveIntermediates/dotLang/InstallationBuildProductsLocation/Applications/dotlang.app/Default-568h@2x.png"
> 
> Ᏸ\376\343\217ﮚ@\261\343\217\320Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng 发出错误但未返回非零退出代码表示失败

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:06:17.377

尝试在摘要屏幕中右键单击 Xcode 中的图标，然后删除任何以前的图标，清理重建。

# ruby - Ruby 中的运算符 <=>

> ID：13442382
> 
> 赞同：4
> 
> 时间：2012-11-18T17:06:23.100
> 
> 标签：ruby

> **可能重复：**
> [什么是 Ruby <=>（宇宙飞船）运算符？](https://stackoverflow.com/questions/827649/what-is-the-ruby-spaceship-operator)

我看到了一个代码和一个我不熟悉的操作员

```
 @array << {:suffix=> substring, :index => i}
 @array.sort! { |x,y| x[:suffix] <=> y[:suffix]} 
```

我不能在上面做谷歌。做什么`<=>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T17:08:48.057

这是[宇宙飞船运算符](http://en.wikipedia.org/wiki/Spaceship_operator)，它是从 Perl 中借来的。它通常用于排序，因为如果左操作数小于右操作数则返​​回 -1，如果右操作数大于左操作数则返​​回 1，否则返回 0。

```
1 <=> 2 # => -1
2 <=> 1 # => 1
1 <=> 1 # => 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T17:08:14.640

它为特定类定义了比较。如果情况`... < ...`为真，则返回`-1`，如果`... == ...`为真，则返回`0`，如果为真，`... > ...`则返回`1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:25:55.330

它被称为[宇宙飞船操作员。](http://en.wikipedia.org/wiki/Spaceship_operator)

对于核心数字和字符串类，它是一个返回 -1、0 或 1 的比较运算符。

理论上，一个类可以定义任何运算符来做它想做的任何事情，但这将是排序时使用的方法。`<=>`如果需要对任意应用程序类进行排序，那么定义该类可能是有意义的。

# css - 同位素网格和内联 ajax 注释

> ID：13442385
> 
> 赞同：0
> 
> 时间：2012-11-18T17:06:41.883
> 
> 标签：css, ajax, comments, inline

我在本地开发的网站上使用同位素插件。我遇到了一个css问题，我希望有人能够帮助我。这是情况。

```
<div class="wrapper"> //* Position is relative
   <div class="portfolio1">  //* Position is absolute
      <div class="inner-wrapper">
         <div class="portfolio-container">
            <div class="portfolio-header"></div>
            <div class="portfolio-content"></div>
            <div class="portfolio-footer">
                <div class="comments"></div>
            </div>
         </div>
      </div>
   </div>
   <div class="portfolio2">  //* Position is absolute
      <div class="inner-wrapper">
         <div class="portfolio-container">
            <div class="portfolio-header"></div>
            <div class="portfolio-content"></div>
            <div class="portfolio-footer">
                <div class="comments"></div>
            </div>
         </div>
      </div>
   </div>
   <div class="portfolio3">  //* Position is absolute
      <div class="inner-wrapper">
         <div class="portfolio-container">
            <div class="portfolio-header"></div>
            <div class="portfolio-content"></div>
            <div class="portfolio-footer">
                <div class="comments"></div>
            </div>
         </div>
      </div>
   </div>
   <div class="portfolio4">  //* Position is absolute
      <div class="inner-wrapper">
         <div class="portfolio-container">
            <div class="portfolio-header"></div>
            <div class="portfolio-content"></div>
            <div class="portfolio-footer">
                <div class="comments"></div>
            </div>
         </div>
      </div>
   </div>
</div> 
```

这几乎将投资组合项目放在一个网格中。我的问题是我有一个评论系统，里面添加了内联评论。发生这种情况时，“.portfolio”类会滑到页面上剩余项目的下方。有没有办法通过 css 或 jquery 来解决这个问题？我知道您可以使用相对定位元素并将它们浮动以防止它们在下方运行，但是一旦您这样做，同位素插件就会崩溃。这里也是问题的屏幕截图。 [屏幕截图](http://www.5fifteen.org/Downloads/ScreenS.jpg) 干杯，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:13:08.250

我猜评论是用 Ajax 插入的？也许有一些附加到它们的 CSS 可以被覆盖以不同地定位它们并将它们保持在它们的 div 中。

不过，同样可能的是，您不应该为此使用同位素。如果您仅使用同位素来创建网格，则可以使用更简单的方法（您可能只需要使用`float`）。Isotope 做了一些*非常*花哨的步法，在不同的浏览器中做的不同，并且非常喜欢处理具有漂亮、特定大小的元素。如果评论是用 javascript 添加的，改变 div*就像*Isotope 试图计算它将如何移动布局一样，你会遇到麻烦。

# javascript - AngulareJS e2e 检查列表中的每个链接

> ID：13442386
> 
> 赞同：2
> 
> 时间：2012-11-18T17:06:59.760
> 
> 标签：javascript, element, angularjs

我是 AngularJS 的新手，我将主要使用 e2e 部分（使用 jasmine）。经过几天的无处可去（我发现文档至少可以说是厌食症！）我想知道是否有人可以在这里帮助我：

网站生成 a=href 链接的 html 列表。我可以像这样使用 angularjs e2e 来“点击”链接：

```
element('li a').click(); 
```

美好的。但这里有两个问题：

1.  如果列表中有 6 个链接，这个链接是点击哪个链接？？（在正在测试的 html 代码中，这些链接没有唯一的 id，有些可能是完全相同的引用/url 等。）？

2.  如何遍历列表中的每个链接？即 element(links[1]).click() -> ... 做任何事然后导航回来 -> element(links[2]).click() -> ... 做任何事然后导航回来 ... 等等。 ..

（注意：angularjs e2e 的 'element' 版本与 'angular.element' 不同。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:50:03.400

**解决了！！！**

```
element('li:eq(0) a').click(); //<-- clicks the first link.

element('li:eq(1) a').click(); //<-- clicks the 2nd link. 
```

ETC...

这里的一位开发人员向我展示了这一点，但我不知道他是怎么知道的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:47:46.060

好的 - 以防其他人好奇（我不可能是地球上唯一一个试图弄清楚这些东西的人！）我已经为自己解决了问题 1：通过将值硬编码到列表中，我发现

```
element('li a') 
```

... 将选择*最后*列出的项目。

* * *

因此，关于使“元素（）”选择列表中的特定项目的看似无法解决的问题。

```
console.log("ROYDEBUG: " + element('li a')); 
```

...将“ROYDEBUG：[object Object]”返回到控制台日志。

**但**我可以让它识别出有“x”列表项。如果我这样做：

```
 element('li a').query(function (selectedElements, done) {
        selectedElements.each(function(idx,elm)
            {
                var thisOne = selectedElements[idx]; //<-- (same as "= this;").
                console.log("ROYDEBUG:  " + idx + " - " + thisOne);
                //element(thisOne).click();                //<-- doesn't work :(
                //element(this).click();                   //<-- doesn't work :(
                //element(selectedElements[idx]).click();  //<-- doesn't work :(
            });
        done();
   }); 
```

然后我在控制台中得到这个：

```
ROYDEBUG: [object Object]
ROYDEBUG:  0 - http://localhost:9876/app/index.html#/coupon/100
ROYDEBUG:  1 - http://localhost:9876/app/index.html#/coupon/100
ROYDEBUG:  2 - http://localhost:9876/app/index.html#/coupon/100
ROYDEBUG:  3 - http://localhost:9876/app/index.html#/coupon/100
ROYDEBUG:  4 - http://localhost:9876/app/index.html#/coupon/100
ROYDEBUG:  5 - http://localhost:9876/app/index.html#/coupon/100 
```

...所以它*知道*列表中有 6 个项目。但是我不能对这些返回的“元素”使用“element().click()”，因为它们只是每个链接的“href=”部分的文本字符串（如您在上面的控制台输出中所见） .

# c# - 如何在foreach中重构sql查询

> ID：13442387
> 
> 赞同：-1
> 
> 时间：2012-11-18T17:07:00.663
> 
> 标签：c#, linq, refactoring

这是我的有效代码：

```
foreach (var r in rlist)
    {
        if (r.IndexOf("_") != -1)
        {
            int id = int.Parse(r.Split('_')[1]);
            var x_tmp = (from x in db.tblX where x.x_id == my_id && x.x_id == id select x).First();
            x_tmp.order = someNumber;
        }
     }
     db.SaveChanges(); 
```

有没有办法重构这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:22:53.683

```
foreach(var x_tmp in db.tblX.Where(x => rlist.Where(r => r.indexOf("_") != -1).Select(r => Convert.ToInt32(r.Split('_')[1])).Contains(x.x_id)))
     x_tmp = someNumber;
db.SaveChanges(); 
```

什么是“my_id”？

# c# - 引用和对象占用的内存空间是多少

> ID：13442388
> 
> 赞同：0
> 
> 时间：2012-11-18T17:07:01.447
> 
> 标签：c#

当我声明变量然后为该变量创建对象时，后台会发生什么（在内存的情况下）。引用变量是否存储在任何地方，以何种格式存储，以及该变量如何指向堆上的内存。请在评论中澄清以下疑问。

例如

```
ClassA instance;       // Where this variable store and how much memory occupies
instance=new ClassA(); //How instance variable points to memory 
```

**编辑**

如果我的程序包含这么多未使用的变量，会对我的程序内存产生什么影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:13:22.887

引用本身的局部变量的存储位置取决于平台（抖动可以选择他们想要存储它的位置。）通常它将在定义本地方法的调用堆栈的内存中或在 CPU 寄存器中。大小也取决于平台，但对于 32 位架构，通常为 4 字节，对于 64 位架构，通常为 8 字节。

引用可能会或可能不会“指向”堆。最好将其视为可用于访问对象的不透明引用标识符。底层指针可以在运行时更改。

对于未使用的变量，优化编译器通常会完全消除任何未使用的局部变量，因此它对运行时性能完全没有影响。此外，您所说的用于存储引用的开销类型对于现代平台来说是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:16:36.563

引用变量是内联存储的。如果是局部变量，则分配在堆栈上，如果是类的成员，则分配为堆上对象的一部分。

一个类的实例总是在堆上分配。

引用只是一个指针，但特别是垃圾收集器知道引用。因此，引用使用指针使用的空间量。在 32 位进程中它使用 4 个字节，在 64 位进程中它使用 8 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:16:48.043

*实例*变量在运行时只是一个指针，它指向在 GC 堆中分配的对象。该变量可以存在于任何位置，堆栈、CPU 寄存器、堆上的另一个对象或加载器堆中的另一个对象（如果它是静态的）。

垃圾收集器最重要的是它能够在垃圾收集期间找到这个指针。因此可以看到该对象仍然被引用，并且可以在压缩堆时调整指针值。当引用在另一个对象内部是静态的时，这相当简单。当它在堆栈或寄存器上时更难，抖动提供了足够的信息让 GC 找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:17:34.317

如果您需要有关此问题的答案，那么我建议您了解“通过 C# 进行 CLR”，这是一本关于 CLR 如何工作的书，其中包含大量有关此的信息。

要回答您的问题，您需要考虑很多事情来回答这个问题。

例如，您需要将每个方法的指令存储在类中。当类第一次加载时，这实际上是一个指向 .Net IL 指令的指针。当应用程序第一次需要该方法时，它将被 JIT 编译为处理器的实际指令，并将其存储在内存中。

然后你有类字段的静态存储，每个类只存储一次。

.Net 中实例化的每个类都需要存储，原因有很多，但不限于继承、垃圾收集、布局等。然后，您可以存储各种引用，这些引用可能会保留给本身将存储的对象。

如果内存对您正在做的事情真的很重要，那么 C# 可能不是您的应用程序的最佳选择。否则，只需享受使用 .NET 所带来的生产力优势，并接受这种易用性伴随着内存使用的代价和 C/C++ 应用程序的较低性能（在某些情况下）。

# java - 压缩java堆 -

> ID：13442392
> 
> 赞同：0
> 
> 时间：2012-11-18T17:07:24.737
> 
> 标签：java, heap-memory

我有一个问题 - 我有 32 位 Windows 机器和达到堆上限的应用程序。我收到 OutOfMemoryError。

我不能减少内存。

我正在研究一些能力/模块以某种方式压缩堆以节省内存。

我发现这篇关于手机的文章：http: [//ieeexplore.ieee.org/xpl/articleDetails.jsp ?reload=true&arnumber=1425112&contentType=Conference+Publications](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&arnumber=1425112&contentType=Conference+Publications)

我正在寻找与上述产品类似但适用于 PC 的产品。

谢谢你。

# asp.net - ASP.NET - 获取网站的源代码 - 连接尝试失败

> ID：13442397
> 
> 赞同：0
> 
> 时间：2012-11-18T17:08:06.010
> 
> 标签：asp.net

我试图在我的 asp.net 网站上获取另一个网站的源代码。每当我运行项目（在我的本地机器上调试它）时，这段代码都可以正常工作。默认 aspx 源代码：

```
 <asp:TextBox ID="url_show" runat="server">
    </asp:TextBox>
    <asp:Button ID="Button" runat="server" OnClick="calc"/>
    <asp:TextBox ID="source_show" runat="server">
    </asp:TextBox> 
```

和 default.aspx.cs 源代码：

```
 protected void calc(object sender, EventArgs e)
    {
        string address = url_show.Text;
        using (WebClient wc = new WebClient())
        {
            string content = wc.DownloadString(address);
            source_show.Text = content;
        }
    } 
```

但是，当我在服务器（[http://www.1und1.de](http://www.1und1.de)）上运行它时，我收到以下错误消息：

*   连接尝试失败，因为连接方一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应 173.194.35.152:80

*   源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

    任何想法为什么这不起作用？

# python-2.7 - 在 python 中，gdata 中的 DocumentQuery() 方法如何与 .jpg .png 等图像文件一起使用？

> ID：13442404
> 
> 赞同：1
> 
> 时间：2012-11-18T17:08:22.953
> 
> 标签：python-2.7, google-docs-api, google-data-api

在使用 Python 的 Google Doc API 中 >> gdata.docs.service.DocumentQuery(categories)

1.)它如何与图像文件一起使用？或者我是否设置类别参数？

2.）参数（类别），类别有多少种？我只知道文件夹和文档。

谢谢你 ：）

# java - 在一个窗口中运行多个已安装应用程序的 Android 应用程序

> ID：13442407
> 
> 赞同：0
> 
> 时间：2012-11-18T17:08:37.370
> 
> 标签：java, android, user-interface, multitasking, multiscreen

我想问一个疯狂但该死的有趣的问题。

> **我们可以创建一个可以在 windows 中运行其他已安装应用程序的 Android 应用程序吗（不是 Mircosoft ;）它是 window 的复数）？那个窗口可以重新调整大小、最小化、最大化或关闭？**

这将是一个多屏应用程序，但与基本的多屏应用程序不同！如果可能的话，是否有任何可用的开源项目/库？

```
Don't down my question before understanding it properly. thanks. 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:31:19.323

> 我们是否可以创建一个可以在 windows 中运行其他已安装应用程序的 android 应用程序（不是 Mircosoft ；）它是 window 的复数）？窗口可以调整大小、最小化、最大化或关闭？

只能通过修改操作系统本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:25:35.033

您可以创建类似窗口的应用程序，但实现起来太复杂了。但是您可以在其中进行操作`Sencha Touch ExtJS Framework`，您可以在其中创建类似应用程序的窗口。该框架适用于所有移动平台。

# ruby-on-rails - rails 从 url 获取 json 并 md5 对其进行哈希处理

> ID：13442412
> 
> 赞同：0
> 
> 时间：2012-11-18T17:09:26.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, md5, json

为什么我每 4 次或 5 次请求都会返回一个不同的 MD5 哈希？

```
url = "http://data.wien.gv.at/daten/wfs?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien:BEZIRKSGRENZEOGD&srsName=EPSG:4326&outputFormat=json"
        response = Net::HTTP.get_response(URI.parse(url))
        data = response.body
        result = ActiveSupport::JSON.decode(data)

        jsonHash = Digest::MD5.hexdigest(data)
        puts jsonHash 
```

jsonHash 有时是 a843a3e2dcffb9b1940ea4a48bf260f0 有时是 9b0d15b9f97c542b07bde361be64edcd

来自 url 的数据永远不会改变..这是一些静态 JSON..为什么这不起作用！？

# java - Jama - 矩阵在找到行列式时必须是平方异常

> ID：13442413
> 
> 赞同：2
> 
> 时间：2012-11-18T17:09:31.660
> 
> 标签：java, matrix, linear-algebra, jama, determinants

我不熟悉将 Jama 用于矩阵。我的问题是当我使用它给出`det()`的方法（与`LUDecomposition`类有关）时`"Matrix must be square"`。好的，我的矩阵是三角形的，但`LUDecomposition`它应该给我方矩阵。我的代码是这样的

```
public double findDeterminant(Matrix mtrx) {
    LUDecomposition dec = new LUDecomposition(mtrx);        
    det = dec.det();
    return det;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:15:56.137

从以下[文档](http://math.nist.gov/javanumerics/jama/doc/)：`LUDecomposition`

> 对于*m >= n的 m×* *n*矩阵`A`，LU 分解是一个*m×n*单位下三角矩阵、一个*n×n*上三角矩阵和一个长度为*m*的置换向量，因此。如果*m < n*，则为*m-by-m*并且是*m-by-n*。**`L`*`U``pig`*`A(piv,:) = L*U`*`L`*`U`******

 ***您是否可能是要找到`getU()`或的行列式`getL()`（根据上面的描述，其中*一个将是正方形）？*

返回*用于构造对象的矩阵*的行列式的`det`方法（在您的情况下，我假设它不是正方形）。`LUDecomposition`*`mtrx`****

# java - Scribe - 同时进行多个回调

> ID：13442417
> 
> 赞同：1
> 
> 时间：2012-11-18T17:09:46.700
> 
> 标签：java, facebook, oauth, callback, scribe

我正在为允许支持 facebook 的服务器软件制作一个模块。问题在于回调 URL。如果一个客户端启动授权过程，那么另一个客户端会同时启动该过程，或者在第一个用户完成之前启动。我如何检查哪个用户首先完成了？

我需要一种方法来检查我收到的客户回调。一种解决方案是在第一个完成之前锁定其他注册，但我不想这样做。还有其他方法吗？我曾考虑`?client=clientid`在回调结束时包含，但我听说 facebook 只允许在 facebook 上的应用程序中指定的确切 url。

**更新** 将 client="clientid" 添加到回调中不起作用。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:12:06.297

经过一番搜索后，我认为 facebook 将允许一个参数：状态。（感谢@jacob [https://stackoverflow.com/a/6470835/1104307](https://stackoverflow.com/a/6470835/1104307)）

所以我只是做了？state=clientId。

对于使用 scribe 的任何人，代码是这样的：

```
service.getAuthorizationUrl(null) + "&state=" + clientId; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:38:05.037

我认为添加和 GET 参数（如 client=clientID）没有问题。Facebook 会将您重定向到您指定的 URL，并使用 REQUEST 参数检查谁完成了请求。如果您将 URL 指定为[http://yoursite.com](http://yoursite.com)并将重定向传递到[http://some-sub-domain.yoursite.com](http://some-sub-domain.yoursite.com)或完全不同的位置，则存在问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T06:28:37.520

如果您使用的是服务器端流程，那么 oauth 2 流程将是：

1.  将用户重定向到 Facebook
2.  然后 facebook 将用户重定向到您指定的回调
3.  您的服务器使用 curl 之类的东西来获取访问令牌
4.  你的服务器做更多的卷曲来获取更多的用户数据或更新用户的数据

我的建议是在步骤 1 中设置会话 cookie，并同时将此会话 ID 存储在您的服务器上。然后会话 cookie 将自动发送到步骤 2 中的回调 url，您可以通过这种方式识别数据库中的会话。

这适用于所有服务提供商（google、twitter、linkedin 等），并且是保持会话连续性的首选方式。

# ruby-on-rails - 如何将动态生成的图像（条形码，如发生）注入 PDF 文档（如果这很重要，我在 rails 中）？

> ID：13442419
> 
> 赞同：2
> 
> 时间：2012-11-18T17:10:01.453
> 
> 标签：ruby-on-rails, image, pdf, barcode, pdftk

我知道[pdf-stamper](https://github.com/paulschreiber/pdf-stamper)，但我现在正试图避免将所有内容都切换到 jruby 。

我只需要将在 rails 应用程序（PDF417 条形码）中生成的图像“标记”到 PDF 文档中的表单字段中（有一个 FDF；它是一个文档模板）。

我只是通过使用 pdftk 来填充基于文本的字段，所以如果有一种方法可以使用 pdftk 来完成，我会很好，但我看起来高低不一，没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:13:16.617

使用[条形码字体](http://www.barcodesinc.com/free-barcode-font/)怎么样？[一些替代品](http://www.dafont.com/theme.php?cat=711)。我没有用过那个，但可能还有其他可用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:50:33.853

我知道我迟到了，但 PDF417 Rubygem 应该可以满足您的需求。 [https://rubygems.org/gems/pdf417](https://rubygems.org/gems/pdf417)将生成它，如果您安装了 chunky_png，您可以轻松地将 PNG 写入文件。

# android - 可以与 Eclipse 一起使用的手机列表？

> ID：13442420
> 
> 赞同：-1
> 
> 时间：2012-11-18T17:10:04.610
> 
> 标签：android, device

我需要一部 android 手机来测试我的应用程序，它可以与 Eclipse 一起使用。它必须是低成本的，以适度的内存和 CPU 运行 Gingerbread。

认为任何 android 手机都可以工作，我最近购买了 Virgin Mobil Chaser，但事实证明，Eclipse 或 adb 都看不到它（但设备管理器确实看到了手机）。另一位开发人员也遇到了与 Chaser 相同的问题。

我可以继续购买手机，看看它们是否有效，但这可能会很长而且令人沮丧。我希望找到一个“无合同”的电话。

是否有任何与 Eclipse 一起使用的手机列表。有谁知道其他可以使用的维珍美孚手机吗？谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:18:25.330

**任何安卓手机都应该可以工作**。您需要兼容的不是 Eclipse。您需要设备的 ADB 驱动程序，以便 ADT 工具可以与设备通信。因此，您需要为您的手机安装 ADB 驱动程序，然后安装后，在设备上启用 USB 调试后，您应该能够看到您的设备。然后 ADB 应该能够看到它（在 Eclipse 插件中或通过命令行`adb devices`）。

**如果您在 Windows 上进行编辑**，则在设备上启用 USB 调试并将其连接到计算机应该会导致 Windows 要求 ADB 驱动程序。您可以尝试“库存”（这些在 SDK 中可用`<SDK>\extras\google\usb_driver`）是否合适。如果没有，请检查制造商网站（对于 HTC，您可能需要安装 HTC Sync），如果失败，只需在谷歌上搜索您的设备名称以及“ADB 驱动程序”，您应该很快就会得到可用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:02:33.100

我的问题的一个正确答案是：LG Optimus Elite 可以很好地用作测试手机。驱动程序立即安装。此外，没有合同的情况下，它不到 100 美元。

我还没有找到让 PCD Chaser 工作的人。加里

# url - URL 中的撇号。好主意还是坏主意？为什么？

> ID：13442421
> 
> 赞同：12
> 
> 时间：2012-11-18T17:10:19.760
> 
> 标签：url, seo

我已经搜索过，但我无法找到一个确凿的结论。如果这对搜索引擎优化有任何影响，我也会感兴趣。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T10:56:48.410

我建议不要使用。

原因：

1.  Google 请求使用非编码 URL 的服务器，即使页面中的链接包含编码 (%27) 版本。对于不同的浏览器和其他搜索引擎，此行为可能不同。此外，谷歌在搜索结果中显示非编码版本。

2.  您可以阅读 Rahul Tripathi (http://productforums.google.com/forum/#!topic/webmasters/aKVMfwL6WgE) 发布的链接，了解带/不带撇号对搜索排名的影响。

如果您仍想使用撇号：

1.  确保您的网络服务器能够很好地处理编码和未编码的 URL。

2.  跟踪您的网络服务器日志以查找由于机器人不当使用撇号而导致的 404 错误。

顺便说一句，目前我们正在进行一项实验，以记录各种搜索引擎的行为，同时抓取包含不安全字符的页面。[你可以在http://app.searchenabler.com/experiments/](http://app.searchenabler.com/experiments/)找到它。

我们执行的一个示例测试。 [http://app.searchenabler.com/experiments/unsafe/%20](http://app.searchenabler.com/experiments/unsafe/%20) !$&'()*+,-.:;%3C=%3E@[/]%5E_%60%7B%7C%7D~

（您可以尝试在不同的浏览器中打开上面的 URL 并检查行为）

[您还可以在http://webcache.googleusercontent.com/search?q=cache:jkWRWOTPZXwJ:app.searchenabler.com/experiments/unsafe/%2520!%24%26](http://webcache.googleusercontent.com/search?q=cache:jkWRWOTPZXwJ:app.searchenabler.com/experiments/unsafe/%2520!%24%26) '()*看到 google 如何缓存一个这样的 URL %2B,-.:%3B%253C%3D%253E%40%5B%255C%5D%255E_%2560%257B%257C%257D~+&cd=1&hl=en&ct=clnk

# android - surfaceview + 按钮 findviewbyid 返回 null

> ID：13442422
> 
> 赞同：-2
> 
> 时间：2012-11-18T17:10:29.563
> 
> 标签：android, surfaceview, findviewbyid

我的代码没问题，但不幸的是我的代码给了我空指针异常。我知道通过在 findviewbyid 之前编写 setcontentview 它不会发生，但是这样做我的表面不会更新。我尝试了很多关于这个的搜索，但我无法得到正确的答案，请帮助我。我的 mainctivity 代码：-

```
package com.example.snakes;

public class MainActivity extends Activity implements View.OnClickListener{

MySurfaceClass sc;
Button up,down,left,right;
//View v1,v2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    sc = new MySurfaceClass(this);
    //setContentView(R.layout.activity_main);

    up = (Button) findViewById(R.id.button1);
    down = (Button) findViewById(R.id.button2);
    left = (Button) findViewById(R.id.button3);
    right = (Button) findViewById(R.id.button4);

    up.setOnClickListener(this);
    down.setOnClickListener(this);
    left.setOnClickListener(this);
    right.setOnClickListener(this);
    setContentView(R.layout.activity_main);

    // Toast.makeText(this, "done", Toast.LENGTH_SHORT).show();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClick(View v) {
    switch(v.getId()){
    case R.id.button1:
        sc.posY = sc.posY - 50 ;
        Toast.makeText(this, "up", Toast.LENGTH_SHORT).show();
    //   sc = new MySurfaceClass(this);
      //   setContentView(R.layout.activity_main);
        break;

    case R.id.button2:
        sc.posY = sc.posY + 50 ;
        Toast.makeText(this, "down", Toast.LENGTH_SHORT).show();
        // sc = new MySurfaceClass(this);
         //setContentView(R.layout.activity_main);
        break;

    case R.id.button3:
        sc.posX = sc.posX - 50 ;
        Toast.makeText(this, "left", Toast.LENGTH_SHORT).show();
        //sc = new MySurfaceClass(this);
        //setContentView(R.layout.activity_main);
        break;

    case R.id.button4:
        sc.posX = sc.posX + 10 ;
        Toast.makeText(this, "right", Toast.LENGTH_SHORT).show();
        //setContentView(R.layout.activity_main);
        break;
    }
}
} 
```

而表面活动的代码：-

```
package com.example.snakes;

public class MySurfaceClass extends SurfaceView implements Runnable {

private SurfaceHolder sh;
private Thread t = null;
private boolean isRunning;
private Bitmap b;
protected int posX, posY;

public MySurfaceClass(Context context) {
    super(context);
    init();
}

public MySurfaceClass(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public MySurfaceClass(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

void init() {
    isRunning = true;
    b = BitmapFactory.decodeResource(getResources(), R.drawable.face);
    posX = 0;
    posY = 0;
    sh = this.getHolder();
    t = new Thread(this);
    t.start();
};

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawRect(100, 100, 100, 100, null);
}

public void run() {
    while (isRunning) {
        if (!sh.getSurface().isValid())
            continue;

        Canvas c = sh.lockCanvas();
        c.drawRGB(5, 150, 10);
        c.drawBitmap(b, posX, posY, null);
        sh.unlockCanvasAndPost(c);
    }
}
  } 
```

和xml：-

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/view1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/grey"
    android:weightSum="100" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="up" 
        android:layout_weight="25"/>

    <Button
        android:id="@+id/button2"
        android:layout_weight="25"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="down" />

    <Button
        android:id="@+id/button3"
        android:layout_weight="25"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="left" />

    <Button
        android:id="@+id/button4"
        android:layout_weight="25"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="right" />
</LinearLayout>

<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.example.snakes.MySurfaceClass
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/surfaceView"
        />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:13:18.287

****在使用findViewById**获取对小部件的任何引用之前，必须调用**setContentView**方法，否则在将单击侦听器设置为按钮时，您将获得 NullPointerExceptions。**

 **我会先让按钮工作，然后再担心表面视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:14:18.673

你的代码坏了。您必须这样做`setContentView()`，否则没有附加视图。**

# android - GB和ICS之间的ContentResolver区别？

> ID：13442424
> 
> 赞同：1
> 
> 时间：2012-11-18T17:11:03.777
> 
> 标签：android, android-contentprovider, android-sqlite, android-contentresolver

我的应用程序实现了一个自定义内容提供程序，我对其进行了 Android JUnit 测试，包括基本操作和更​​复杂的操作（使用 ContentProviderOperations）。

我的测试在 GB 模拟器上通过，但在 JB 设备和 ICS 模拟器上失败（由于意外行为）。

可能导致不同行为的 Android 版本之间的差异是什么？

# ios - iOS 6：游戏中心认证

> ID：13442425
> 
> 赞同：0
> 
> 时间：2012-11-18T17:11:06.060
> 
> 标签：ios

我在使用 iOS 6 SDK 的应用程序中集成游戏中心时遇到问题。事实上，我使用了 Apple 的示例代码，但它看起来不完整：

我试过这段代码：

```
-(void) authenticateLocalPlayer {

GKLocalPlayer* localPlayer =
[GKLocalPlayer localPlayer];

localPlayer.authenticateHandler =
^(UIViewController *loginVC,
  NSError *error) {

    [self setLastError:error];

    if ([GKLocalPlayer localPlayer].authenticated)
    {
        // authentication successful
        [self enableGameCenterForPlayer:[GKLocalPlayer localPlayer]];
    }
    else if (loginVC)
    {
        // player not logged in yet, present the vc
        [self pauseGame];
        [self presentLoginVC:loginVC];
    }
    else
    {
        // authentication failed, provide graceful fallback
        [self disableGameCenter];
    }
    }; 
```

}

但问题是 , `enableGameCenterForPlayer`, `pauseGame`, `presentLoginVC`disableGameCenter 不是实现的方法，它返回：

`Instance method '-enableGameCenterForPlayer:' not found (return type defaults to 'id')`

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:29:50.250

我使用方法 [self presentLoginVC:VC] 将我的 UITabViewController 或 UINavigationController 传递给 viewController，因为下面的块不在主线程上。

```
localPlayer.authenticateHandler = ^(UIViewController *loginVC, NSError *error) { 
```

当你在一个块中时，你应该确保不要更改 UI 元素，因为你真的不知道它何时会完成或你将在你的应用程序中的什么位置。可能有很多方法可以做到这一点，但这是我的解决方案。

下面是我的 UITabBarController 'category' .m 文件（为没有子类化的类添加方法）我创建了方法 presentLoginVC 并让它通过我的 UITabBarController 调用'showGameCenterViewController'：

```
 #import "UITabBarController+GameKitAdditions.h"

    @implementation UITabBarController (GameKitAdditions)

    -(void) showGameCenterViewController: (UIViewController *)VC {
        [self presentViewController:VC animated:NO completion:nil];
    }

    -(void)dismissGameCenterViewController:(UIViewController *)VC {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
    @end 
```

至于其他功能：

```
 -(void) enableGameCenterForPlayer:(GKLocalPlayer *) localPlayer;
    -(void) disableGameCenter;
    -(void) pauseGame; 
```

它们可以像将一个名为 enableGameCenter 的 BOOL 设置为 YES 或 NO 一样简单。为了避免错误，您可以将这些原型添加到您的 .h 文件中，然后编写函数只是为了将某些内容输出到 NSLog() 或其他内容。

# java - Apache CXF 和 WS-Security - 密码回调

> ID：13442426
> 
> 赞同：5
> 
> 时间：2012-11-18T17:11:11.237
> 
> 标签：java, spring-security, cxf, ws-security

我遵循了几个教程的混搭，但都不太成功！

我正在尝试让 Apache CXF 和 WS-Security 回调我的 Spring Security 身份验证器。一切都快要开始工作了，但是在获取密码以使 Spring 安全性脱离 WS 回调的时候，我遇到了问题。

下面的处理程序会出错，但 pc.getPassword() 为空。我希望这是在 Soap 中发送的密码，所以我可以将它传递给 spring

```
public class ServerPasswordCallback implements CallbackHandler {

public void handle(Callback[] callbacks) throws IOException, 
    UnsupportedCallbackException {

    WSPasswordCallback pc = (WSPasswordCallback) callbacks[0];

    pc.setPassword( pc.getPassword() );
} 
```

我的拦截器是这样设置的

```
 <bean id="wsAuthenticationInterceptor" class="com.olympus.viewtheworld.server.security.auth.WSAuthenticationInInterceptor">
    <constructor-arg index="0">
        <map key-type="java.lang.String" value-type="java.lang.Object">
            <entry key="action" value="UsernameToken" />
            <entry key="passwordType" value="PasswordText" />
            <entry key="passwordCallbackClass" value="com.olympus.viewtheworld.server.security.auth.ServerPasswordCallback" />
        </map>
    </constructor-arg>
    <property name="authenticationManager" ref="authenticationManager"/>
</bean>

 <jaxws:endpoint id="secureHelloService"
                 implementor="#secureHelloServiceImpl"
                 implementorClass="com.olympus.viewtheworld.server.service.Impl.SecureHelloServiceImpl"
                 address="/SoapService/secure/hello">
    <jaxws:serviceFactory>
        <ref bean="jaxws-and-aegis-service-factory" />
    </jaxws:serviceFactory>
    <jaxws:inInterceptors>
        <bean class="org.apache.cxf.binding.soap.saaj.SAAJInInterceptor"/>
        <ref bean="wsAuthenticationInterceptor" />
    </jaxws:inInterceptors>
</jaxws:endpoint> 
```

我从 SoapUI 发出的肥皂请求是

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:test="http://test/">
   <soapenv:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:UsernameToken>
<wsse:Username>rob2</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">passwordxx</wsse:Password>
</wsse:UsernameToken>
</wsse:Security>
</soapenv:Header>
   <soapenv:Body>
      <test:hello>
         <!--Optional:-->
         <hello>asdf</hello>
      </test:hello>
   </soapenv:Body>
</soapenv:Envelope> 
```

版本明智的是 Spring 3.1 和 CXF 2.7.0

我需要做什么才能在 ServerPasswordCallback 类中看到“passwordxx”？是肥皂请求，配置还是错误？！

干杯，罗伯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T13:00:33.787

从文档中可以`org.apache.ws.security.handler.WSHandlerConstants.PW_CALLBACK_CLASS`看出，该方法应改为`pc.setPassword`使用存储的密码调用以将用户提供的密码与作为参数进行比较，而不是用户提供的密码本身：

> 该标签是指用于获取密码的 CallbackHandler 实现类。此标记的值必须是 javax.security.auth.callback.CallbackHandler 实例的类名。回调函数

`javax.security.auth.callback.CallbackHandler.handle(javax.security.auth.callback.Callback[])`

> 获取 org.apache.ws.security.WSPasswordCallback 对象的数组。仅使用数组的第一个条目。该对象包含用户名/键名作为标识符。回调处理程序必须在返回之前设置与此标识符关联的密码或密钥。应用程序可以使用以下方法设置此参数：

`call.setProperty(WSHandlerConstants.PW_CALLBACK_CLASS, "PWCallbackClass");`

* * *

我正在使用 a`org.apache.ws.security.validate.Validator`检查提供的密码的有效性，并在那里设置 Spring 安全上下文：

```
@Bean(name = "wssforjInInterceptor")
public WSS4JInInterceptor wssforjInInterceptor() {
    // Configure how we ask for username and password
    Map<String, Object> props = new HashMap<>();
    props.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
    props.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);

    // Password callback
    props.put(WSHandlerConstants.PW_CALLBACK_REF, passwordCallbackHandler());

    // Validator registration
    Map<QName, Object> validators = new HashMap<>();
    String WSS_WSSECURITY_SECEXT_1_0_XSD = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd";
    QName qName = new QName(WSS_WSSECURITY_SECEXT_1_0_XSD, WSHandlerConstants.USERNAME_TOKEN, "");
    validators.put(qName, usernameTokenValidator());
    props.put(WSS4JInInterceptor.VALIDATOR_MAP, validators);

    WSS4JInInterceptor wss4jInInterceptor = new WSS4JInInterceptor(props);
    return wss4jInInterceptor;
} 
```

我不确定这种方法是更好还是更差（我很感激对此的一些反馈），但也许它对下一个人遇到这个问题很有用。似乎缺乏关于如何集成 Spring 安全性和 CXF 的最新文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:06:50.283

好的，所以这不是理想的解决方案，希望稍后会出现更好的答案，很可能是当我有更多时间看这个时。

我使用正则表达式检查完整的数据包并提取密码字段。代码如下。稍后当我找到正确的方法时会更新，因为这绝对不是它！

```
 WSPasswordCallback pc = (WSPasswordCallback) callbacks[0];
        String mydata= pc.getRequestData().getMsgContext().toString();        
        Pattern pattern = Pattern.compile("<wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\">(.*?)<");
        Matcher matcher = pattern.matcher(mydata);
        if (matcher.find())
        {
             pc.setPassword( matcher.group(1) );
        } 
```

# ubuntu - 使用 LUCID 编译时 Emacs 没有对话框

> ID：13442429
> 
> 赞同：1
> 
> 时间：2012-11-18T17:11:39.447
> 
> 标签：ubuntu, emacs, ubuntu-12.04, emacs24

下载 Emacs 24.2 并在 (K)ubuntu 12.04 下编译

./configure --with-x-toolkit=lucid
make
sudo make install

没有对话框（例如文件选择或字体选择）。单击打开的文件时，会出现 minibuffer 中的“查找文件”。

我是否需要额外的库，还是只有 GTK 才有可能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:00:20.937

文件和字体对话框仅适用于 GTK、Mac/Gnustep 和 Windows。

# python - 提取部分 Twitter 查询的正则表达式

> ID：13442431
> 
> 赞同：4
> 
> 时间：2012-11-18T17:11:40.643
> 
> 标签：python, regex, python-2.7

我有以下字符串，我想从中提取`q`和`geocode`值。

```
 ?since_id=261042755432763393&q=salvia&geocode=39.862712%2C-75.33958%2C10mi 
```

我尝试了以下正则表达式。

```
expr = re.compile('\[\=\](.*?)\[\&\]')
vals = expr.match(str) 
```

但是，vals 是`None`. 我也不确定如何找到之前的东西，比如`q=`vs `=`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T17:17:16.267

不需要正则表达式（使用 Python 3）：

```
>>> from urllib.parse import parse_qs
>>> query = parse_qs(str[1:])
>>> query
{'q': ['salvia'], 'geocode': ['39.862712,-75.33958,10mi'], 'since_id': ['261042755432763393']}
>>> query['q']
['salvia']
>>> query['geocode']
['39.862712,-75.33958,10mi'] 
```

显然，`str`包含您的输入。

由于（根据您的标签）您使用的是 Python 2.7，我认为您需要将 import 语句更改为此：

```
from urlparse import parse_qs 
```

如果您在 2.6 版之前使用 Python，则 import 语句为

```
from cgi import parse_qs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:21:00.217

我认为这可以在没有正则表达式的情况下轻松完成：

```
string = '?since_id=261042755432763393&q=salvia&geocode=39.862712%2C-75.33958%2C10mi'
parts = string[1:].split('&') # the [1:] is to leave out the '?'
pairs = {}
for part in parts:
    try:
        key, value = part.split('=')
        pairs[key] = value
    except:
        pass 
```

并且`pairs`应该包含字符串的所有键值对。

# regex - 从分隔字符串中获取子字符串，最后一个除外

> ID：13442437
> 
> 赞同：1
> 
> 时间：2012-11-18T17:11:54.083
> 
> 标签：regex

有类似的字符串

```
booboo-en
booboo-duck-en
booboo-the-duck-en
booboo-the-duck-so-nice-en 
```

我试图提取除最后一个 ( ) 之外的所有字符串（无论分隔组的数量`-en`）以获得：

```
booboo
booboo-duck
booboo-the-duck 
```

等等...

使用

```
^((?:[^-]+-){2}[^-]+).*$ 
```

我可以提取 2 个组，但我不知道如何为任意数量的组修改它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:23:20.647

你为什么要为此使用正则表达式？

至少任何脚本语言都有拆分原语

他们通常返回数组

合并拆分和删除数组的最后一个元素是微不足道的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:15:16.670

试试这个：

```
^.*(?=-[^-]*$) 
```

这将匹配字符串直到最后一个破折号之前：

```
^       # Start of string
.*      # Match any number of characters
(?=     # until it's possible to match:
 -      #  a dash
 [^-]*  #  followed only by characters other than dashes
 $      #  until the end of the string.
)       # (End of lookahead assertion) 
```

# python - 在 Python 3 中转到

> ID：13442440
> 
> 赞同：0
> 
> 时间：2012-11-18T17:12:12.447
> 
> 标签：python, python-3.x, goto

Python 3 没有 GOTO 或类似的东西。但我有一些算法，需要 GOTO 类型的功能。可能有人可以建议出路吗？

主菜单

1-新游戏 2-选项 3-退出

用户操作 - 进入主菜单 - 进入选项菜单 - 再次进入主菜单等等。所以在代码中我不知道如何通过主菜单返回并传送到上层代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:39:29.120

您可以使用字典：“用户选择”->“相应操作”，例如：

```
import sys

def foo():
    print('foo')

actions = {'1': foo, '2': sys.exit}

def read_choice(choices, prompt):
    c = None
    while c not in choices:
        c = input(prompt)
    return c

while True:
    # get user input
    x = read_choice(actions, 'Input 1 to do foo or 2 to exit')
    actions[x]() # act on it 
```

请参阅[完整的示例](http://ideone.com/I3T3wq)，该示例还显示了如何从配置文件动态创建菜单。

# django - Django中没有名为简单错误的模块

> ID：13442442
> 
> 赞同：1
> 
> 时间：2012-11-18T17:12:49.630
> 
> 标签：django, virtualenv, django-urls, importerror

我正在开发一个 Django Bookmarks 项目，它需要您调用`simple.py`from `django.views.generic`。但是当我运行我的服务器时，我收到了一个导入错误，他们没有名为`simple`. 我查看了文件夹，它不在那里。我查了一些关于这个问题的信息。我通过 git hub 在较新的版本中读到它没有该文件。我无法弄清楚如何解决它。任何帮助将非常感激！

```
import os
from django.conf.urls import patterns, include, url
from django_bookmarks.bookmarks.views import *
from django.views.generic.simple import direct_to_template

site_media = os.path.join(
    os.path.dirname(__file__), 'site_media'
    )

urlpatterns = patterns('',
    (r'^$', main_page),
    (r'^user/(\w+)/$', user_page),
    (r'^login/$', 'django.contrib.auth.views.login'),
    (r'^logout/$', logout_page),
    (r'^site_media/(?P<path>.*)$', 'django.views.static.serve',
     {'document_root': site_media}),
    (r'^register/$', register_page),
    (r'^register/success/$', direct_to_template,
     {'template': 'registration/register_success.html'}),

    # Examples:
    # url(r'^$', 'django_bookmarks.views.home', name='home'),
    # url(r'^django_bookmarks/', include('django_bookmarks.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:25:20.343

似乎基于函数的视图在 Django 1.3 中已被弃用（并且可能在最新的开发中已被删除）然后您应该将它们替换为 Django 1.4 中提供的基于类的视图

[已弃用的基于函数的通用视图](https://docs.djangoproject.com/en/1.4/ref/generic-views/) [基于类的视图](https://docs.djangoproject.com/en/1.4/topics/class-based-views/)

您可能对 TemplateView 感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:26:23.003

`django.views.generic.simple`已弃用并且在 django 1.4 之后不存在。您使用 django 的开发分支而不是最新的稳定版本（1.4.2）是否有特定原因？

我建议使用 django 1.4.2 （具有`django.views.generic.simple`或使用`render`( `from django.shortcuts import render`) 而不是`direct_to_template`.

# jquery - 使用方法 position() 检索相对于其他元素的位置

> ID：13442447
> 
> 赞同：0
> 
> 时间：2012-11-18T17:13:06.843
> 
> 标签：jquery, popup, position

如何直接检索相对于其他元素的位置数组（[left，top]）？我想我可以做如下的事情：

```
var newPos = $.position({
    my: "left top",
    at: "right top",
    of: $(ElementPositionedAgainstTo)
}); 
```

但这给了我错误。
所以我只做解决方法，比如创建隐藏的 div，使用隐藏的 div 对 'ElementPositionedAgainstTo' 执行位置方法，然后获取隐藏的 div 的位置。

```
 function getPopupPosition (parent_el) {
        var jDiv = $("<div id='hidden_div'></div>");
        jDiv
            .appendTo("body")
            .css("position", "absolute")
            .position({
                my: "left top",
                at: "right top",
                of: $(parent_el)
        });
     var thePosition = jDiv.position();
     jDiv.remove();
     return thePosition;
}; 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:17:22.257

jQueryUI 的 .position() 实用程序指出：

> jQuery UI .position() 方法允许您相对于窗口、文档、另一个元素或光标/鼠标定位元素，而不必担心父元素的偏移。
> 
> 注意：**jQuery UI 不支持定位隐藏元素**。

解决方法是改为使用可见性：隐藏，获取位置，然后快速隐藏 div。

# cqrs - 如何在 CQRS 系统中引入新的事件反规范化器？

> ID：13442452
> 
> 赞同：3
> 
> 时间：2012-11-18T17:13:20.457
> 
> 标签：cqrs

根据[CQRS à la Greg Young](http://cre8ivethought.com/blog/2009/11/12/cqrs--la-greg-young)的说法，事件处理程序（和下游事件反规范化器）会对事件发布者之前发布的传入事件做出反应。

现在让我们假设在运行时我们想要添加一个新的事件反规范化器：基本上，这很容易，但它需要将其数据获取到当前状态。

做这个的最好方式是什么？

我应该向事件存储发送一个乱序请求并询问所有以前发出的事件吗？

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T17:18:00.273

您可以针对新处理程序获取和重播所有（必需的）事件。这可以在一个单独的过程中完成，因为您本质上想要的是将持久化的视图模型置于正确的状态。

查看 Rinat Abdullin 的[Lokad.CQRS](http://lokad.github.com/lokad-cqrs/)示例项目以获取生产示例。特别是它[**`SaaS.Engine.StartupProjectionRebuilder`**](https://github.com/Lokad/lokad-cqrs/blob/master/SaaS.Engine/StartupProjectionRebuilder.cs)可能是一个有趣的来源，即使它相当复杂。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T14:38:17.507

人们还可以构建预测，以便他们记住上次看到的事件。然后在任何启动时，他们都会要求此事件并全部转发。重新开始一个旧的投影并建立一个新的投影就变成了大致相同的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-12T18:41:00.973

如果您采用有界上下文复杂集成，您可能需要删除整个读取模型并重新构建它。

# erlang - spawn_link 链接其他进程？

> ID：13442455
> 
> 赞同：1
> 
> 时间：2012-11-18T17:13:24.680
> 
> 标签：erlang

如果进程 A spawn_link() 的进程 B，然后是进程 B spawn() 的进程 C，如果我们将“spawn()”替换为“spawn_link()”，那么进程 A 在进程 C 中捕获错误的唯一方法是在进程 B 中？

我相信如果不替换它，进程 A 只会知道进程 B 是否死亡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:54:56.857

当进程 B 产生进程 C 时，它基本上忘记了它；在这种情况下，如果 C 正在死去，进程 B 将对此一无所知。如果进程 B 使用 spawn_link 生成进程 C，进程 C 将作为子 (C) - 父 (B) 链接到 B：如果 C 死亡，将通知 B，并且根据实现，它可能会死亡（将通知 A）或进一步生存。

# javascript - 触发多个按键以刺激键盘快捷键jquery

> ID：13442457
> 
> 赞同：1
> 
> 时间：2012-11-18T17:13:50.620
> 
> 标签：javascript, jquery, keypress

我想创建页面缩放 - 根据 jQuery 的键盘快捷键。主要是，当用户单击页面上的某个元素时，我想`Ctrl`使用`+`和`Ctrl`使用键对触发。[我已经尝试过Way to trigger multiple keypress and hold events in jQuery](https://stackoverflow.com/questions/10080644/way-to-trigger-multiple-keypress-and-hold-events-in-jquery)`-` question中的这个代码片段，但它不起作用 - 它不会缩放页面

```
$("#zoom").click(function() {

    var e = $.Event("keydown");
    e.which = 61; // # key code for +
    e.ctrlKey = true;
    $(document).trigger(e);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:29:20.443

根据我的[小提琴](http://jsfiddle.net/aJdeQ/)，您的事件触发器似乎工作得很好。

```
$(document).bind('keydown', function(e) {
    e.preventDefault();

    var d = new Date();
    $('#log').html(
        'time: ' + d.getTime() + '<br/>' +
        'key: ' + e.which + '<br/>' +
        'ctrl: ' + (e.ctrlKey ? 'Yes' : 'No')
    );
}); 
```

但是，您似乎在问如何控制浏览器的缩放级别，这在大多数（如果有的话）没有插件的浏览器中是不可能的。

您*可以*使用 CSS 和 Javascript 实现自己的缩放，甚至可以使用上面的代码片段来捕获`Ctrl +`，`Ctrl -`但您无法阻止用户以其他方式缩放页面。

CSS：

```
 .text-zoom-0{
        font-size: .75em;
    }
    .text-zoom-1{
        font-size: 1em;
    }
    .text-zoom-2{
        font-size: 1.25em;
    } 
```

Javascript：

```
jQuery(function($) {
    var currentZoom = 1,
        minZoom = 0,
        maxZoom = 2,
        changeZoom = function(increase) {
            var newZoom = currentZoom;

            if (increase && currentZoom < maxZoom) {
                newZoom++;
                $('.text-zoom-' + currentZoom)
                    .addClass('.text-zoom-' + newZoom)
                    .removeClass('.text-zoom-' + currentZoom);
            } else if (currentZoom > minZoom) {
                newZoom--;
                $('.text-zoom-' + currentZoom)
                    .addClass('.text-zoom-' + newZoom)
                    .removeClass('.text-zoom-' + currentZoom);
            }

            currentZoom = newZoom;
        };

    $('.zoomIn').click(function(e) {
        changeZoom(true);
    });

    $('.zoomOut').click(function(e) {
        changeZoom(false);
    });
}); 
```

当然，您必须对页面上的图像、导航和所有其他元素执行相同的操作。如果你想真正做到这一点，你可以比这个小片段更聪明地使用 CSS，但请记住，*可以*与任何想象中的*应该*不一样......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:18:47.550

你可以使用这个库。有很多例子

[http://www.openjs.com/scripts/events/keyboard_shortcuts/](http://www.openjs.com/scripts/events/keyboard_shortcuts/)

# r - 在循环中填充 R 中的数据框

> ID：13442461
> 
> 赞同：41
> 
> 时间：2012-11-18T17:13:57.143
> 
> 标签：r, dataframe

我正在尝试从 R 中的 for 循环中填充数据框。列的名称是在循环中动态生成的，并且在填充数据框时将一些循环变量的值用作值。例如，当前列的名称可以是某个变量名称作为循环中的字符串，并且该列可以将当前迭代器的值作为其在数据框中的值。

我试图在循环外创建一个空数据框，就像这样

```
d = data.frame() 
```

但我真的不能用它做任何事情，当我尝试填充它时，我遇到了一个错误

```
 d[1] = c(1,2)
Error in `[<-.data.frame`(`*tmp*`, 1, value = c(1, 2)) : 
  replacement has 2 rows, data has 0 
```

什么可能是实现我想要做的事情的好方法。如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-18T17:30:57.040

你可以这样做：

```
 iterations = 10
 variables = 2

 output <- matrix(ncol=variables, nrow=iterations)

 for(i in 1:iterations){
  output[i,] <- runif(2)

 }

 output 
```

然后把它变成一个`data.frame`

```
 output <- data.frame(output)
 class(output) 
```

这是做什么的：

1.  根据预期增长创建具有行和列的矩阵
2.  在矩阵中插入 2 个随机数
3.  循环完成*后将*其转换为数据帧。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-11-18T17:32:40.310

通常最好避免循环并使用矢量化函数。如果这不可能，有两种方法：

1.  预先分配您的`data.frame`. 不建议这样做，因为`data.frames`.
2.  在循环中使用另一个数据结构，然后转换为一个`data.frame`。A`list`在这里非常有用。

举例说明一般方法：

```
mylist <- list() #create an empty list

for (i in 1:5) {
  vec <- numeric(5) #preallocate a numeric vector
  for (j in 1:5) { #fill the vector
    vec[j] <- i^j 
  }
  mylist[[i]] <- vec #put all vectors in the list
}
df <- do.call("rbind",mylist) #combine all vectors into a matrix 
```

在此示例中，不必使用 a `list`，您可以预先分配 a `matrix`。但是，如果您不知道循环需要多少次迭代，您应该使用`list`.

最后，这里是示例循环的矢量化替代方案：

```
outer(1:5,1:5,function(i,j) i^j) 
```

如您所见，它更简单，也更高效。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-10-10T19:58:33.930

这也有效。

```
df = NULL
for (k in 1:10)
    {
       x = 1
       y = 2
       z = 3
       df = rbind(df, data.frame(x,y,z))
     } 
```

输出看起来像这样

```
df #enter

x y z #col names
1 2 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-31T20:18:47.703

谢谢 Notable1，对我有用 tidytextr 创建一个数据框，其中一列中的文件名和另一列中的内容。

```
 diretorio <- "D:/base"
    arquivos <- list.files(diretorio, pattern = "*.PDF")
    quantidade <- length(arquivos)

#
df = NULL
for (k in 1:quantidade) {

      nome = arquivos[k]
      print(nome)
      Sys.sleep(1) 
      dados = read_pdf(arquivos[k],ocr = T)
      print(dados)
      Sys.sleep(1)
      df = rbind(df, data.frame(nome,dados))
      Sys.sleep(1)
}
Encoding(df$text) <- "UTF-8" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-24T17:08:27.677

我有一个案例，我需要在 for 循环函数中使用数据框。*在这种情况下，它是“高效的”，但是请记住，数据库很小，循环中的迭代非常简单*。但也许该代码可能对具有类似条件的人有用。

*for 循环*的目的是沿五个位置（即 5 东京、纽约、圣保罗、苏尔和墨西哥城）使用*栅格提取功能，每个位置都有各自的栅格网格。*我有一个空间点数据库，在 5 个不同位置分配了 1000 多个观测值，我需要从 10 个不同的栅格网格（每个位置两个网格）中提取信息。此外，对于后续分析，我不仅需要栅格值，还需要每个观测值的唯一 ID。

准备好空间数据后，包括以下任务：

1.  *使用readOGR*函数导入点 shapefile （rgdap 包）
2.  *使用光栅*功能导入光栅文件（光栅包）
3.  *使用函数堆栈*（光栅包）将同一位置的网格堆叠到一个文件中

这里使用*数据框的**for 循环*代码：

 **1\. 将每个位置的堆叠栅格添加到列表中*

```
raslist <- list(LOC1,LOC2,LOC3,LOC4,LOC5) 
```

*2\. 创建一个空数据框，这将是输出文件*

```
TB <- data.frame(VAR1=double(),VAR2=double(),ID=character()) 
```

*3.设置for循环功能*

```
L1 <- seq(1,5,1) # the location ID is a numeric variable with values from 1 to 5 

for (i in 1:length(L1)) {
  dat=subset(points,LOCATION==i) # select corresponding points for location [i] 
  t=data.frame(extract(raslist[[i]],dat),dat$ID) # run extract function with points & raster stack for location [i]
  names(t)=c("VAR1","VAR2","ID") 
  TB=rbind(TB,t)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-14T09:58:13.777

正在寻找相同的内容，以下内容也可能有用。

```
a <- vector("list", 1)
for(i in 1:3){a[[i]] <- data.frame(x= rnorm(2), y= runif(2))}
a
rbind(a[[1]], a[[2]], a[[3]]) 
```*

# markov - 随机写入的马尔可夫算法

> ID：13442465
> 
> 赞同：1
> 
> 时间：2012-11-18T17:14:17.000
> 
> 标签：markov

我在概念上理解随机写入程序的结构（以文本文件的形式接受输入）并使用马尔可夫算法创建一个有点合理的输出时遇到了一个小问题。

所以我使用的数据结构是0-10的用例。在`case 0:`我计算一个字母/符号或数字的数字时，我的新文本以此为基础来模拟输入。我已经通过使用 Map 类型来实现这一点，该类型保存输入文本中的每个唯一字母以及文本中有多少个数组。所以我可以简单地询问特定字母的数组大小，然后像这样简单地创建输出文本。

但是现在我需要创建 case1/2/3 等等...... case 1 还包含最有可能出现在任何字母之后的字母。我需要为这些情况创建 10 个单独的数组，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:27:57.467

有很多方法可以对此进行建模。正如您所描述的，一种方法是使用多维数组，其中每个索引是链中的下一个字符，最终结果是计数。

```
# Two character sample:
int counts[][] = new int[26][26]
# ... initialize all entries to zero

# 'a' => 0, 'b' => 1, ... 'z' => 25
# For example for the string 'apple'
# Note: I'm only writing this like this to show what the result is, it should be in a
#       loop or function ...
counts['a'-'a']['p'-'a']++
counts['p'-'a']['p'-'a']++
counts['p'-'a']['l'-'a']++
counts['l'-'a']['l'-'e']++ 
```

然后，要随机生成名称，您将计算给定字符的总结果数（例如：在前面的示例中，'p' 的 2 个结果）并为其中一个可能的结果选择一个加权随机数。

对于较小的尺寸（最多 4 个字符）应该可以正常工作。对于任何更大的东西，您可能会开始遇到内存问题，因为（假设您使用的是 AZ）N 长度链的 26^N 个条目。

几年前我写过类似的东西。我想我使用来自维基百科的随机页面来获取种子数据来生成权重。

# sharepoint - 如何使用 curl 自动上传和签入文件到共享点？

> ID：13442467
> 
> 赞同：13
> 
> 时间：2012-11-18T17:14:16.857
> 
> 标签：sharepoint, curl

我正在尝试使用我的共享点登录凭据将文件从 linux 上传到共享点。我使用 cURL 实用程序来实现这一点。上传成功。

使用的命令是：`curl --ntlm --user username:password --upload-file myfile.txt -k https://sharepointserver.com/sites/mysite/myfile.txt` -k 选项用于克服非安全共享点站点的证书错误。

但是，这个上传的文件显示在我登录后共享点的“签出”视图（绿色箭头）中。因此，其他登录的用户不存在此文件。

我的登录名具有对 sharepoint 的写访问权限。

关于如何“签入”此文件以与 cURL 共享点的任何想法，以便可以从任何人的登录中查看该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T10:37:58.267

My question about [Performing multiple requests using cURL](https://stackoverflow.com/questions/28341625/performing-multiple-requests-using-curl-with-different-options) has a pretty comprehensive example using bash and cURL, although it suffers from having to reenter the password for each request.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:40:01.710

我现在没有可用于测试的 curl，但您可能可以根据以下信息做出一些调整。

签入和签出由 /_layouts/CheckIn.aspx 处理

该页面具有以下查询字符串变量：

**列表**- 标识当前列表的 GUID。

**FileName** - 带有扩展名的文件的名称。

**来源**- 库中 allitems.aspx 页面的完整 url。

只需使用 FileName 和 Source 参数并省略 List 参数，我就能正确加载 CheckIn.aspx 页面。这很好，因为您不必想办法查找列表 GUID。

CheckIn.aspx 页面使用以下控制签入的表单参数回发到自身：

**PostBack** - 布尔值设置为 true。

**CheckInAction** - 字符串设置为 ActionCheckin

**KeepCheckout** - 设置为 1 以保持结帐和 0 以保持签入

**CheckinDescription** - 文本字符串

像这样在 curl 中调用它

curl --data "PostBack=true&CheckinAction=ActionCheckin&KeepCheckout=0&CheckinDescription=SomeTextForCheckIn" http:// *{您的服务器和站点}* /_layouts/checkin.aspx?Source= *{图书馆的完整网址}* /Forms/AllItems.aspx&FileName={Doc And分机}

正如我所说，我没有 curl 来测试，但我使用 Fiddler 2 中的 Composer 选项卡让它工作

我现在正在用 curl 尝试这个，但让它工作存在问题。Fiddler 将请求作为 POST 执行。如果您尝试将其作为 GET 请求执行，您将收到 500 错误，说明 SPWeb 的 AllowUnsafeUpdates 属性将不允许通过 GET 进行此请求。将请求作为 POST 发送应该可以纠正这个问题。

**编辑**我目前正在查看 DotPeek 反编译器中的 checkin.aspx 源，并看到一些可能相关的 ActionCheckin 参数的附加选项，例如 ActionCheckinPublish 和 ActionCheckinFromClientPublish。我会用任何额外的发现来更新它。对于其他感兴趣的人，该页面位于 Microsoft.SharePoint.ApplicationPages.Checkin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:56:58.987

[Junx](https://stackoverflow.com/users/66720/junx)的上述答案是正确的。但是，Filename 变量不仅是文档文件名和扩展名，还应该包括库名。我能够使用以下方法使其正常工作。

例子：`http://domain/_layouts/Checkin.aspx?Filename=Shared Documents/filename.txt`

# wordpress - 网站和博客 - wordpress

> ID：13442469
> 
> 赞同：0
> 
> 时间：2012-11-18T17:14:22.947
> 
> 标签：wordpress, web, feedback

我有需要的网站：

1.  登陆页面
2.  博客

我正在考虑 2 替代方案，我很想得到反馈：

1.  登陆页面 + 博客 -> 在 wordpress 中
2.  亚马逊 s3 中的登陆页面（仅静态文件）和 wordpress 中的博客

你会推荐吗？

谢谢，里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:16:50.783

第二个选项听起来真的很奇怪。在 wordpress 中制作首页非常容易，所以这绝对是我的首选。

如果您很难想象如何在 wordpress 中制作首页，请告诉我。

我也很好奇你为什么要考虑另一种选择？

# linq - Linq 拆分字符串的最后一部分

> ID：13442476
> 
> 赞同：1
> 
> 时间：2012-11-18T17:15:38.013
> 
> 标签：linq

我有一个路径“$/Folder1/Folder2/Folder3/File.xml”我想得到减去“File.xml”的路径，即“$/Folder1/Folder2/Folder3”。

我写了以下方法，

```
public string GetFilePathFromFolderPath(string serverPath)
    {
        var folders = serverPath.Split('/').ToList();

        folders.RemoveAt(folders.Count - 1);

        return folders.Aggregate(string.Empty,
                                 (current, folder) =>
                                 !string.IsNullOrEmpty(current)
                                     ? string.Format("{0}/{1}", current, folder)
                                     : string.Format("{0}", folder));
    } 
```

有一个更好的方法吗？

我的单元测试工作正常，但我想知道是否有一种简单的方法......

```
[TestMethod()]
    public void GetRootPathFromConfigFilePath_Validate()
    {
        var t = new Twrar();
        var a = t.GetFilePathFromFolderPath("$/Quan/Maa/CSr/mai.py");
        Assert.IsTrue(a == "$/Quan/Maa/CSr");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:22:28.020

我假设您的意思是使用“/”作为路径分隔符，即使它是 Windows 的“\”。

```
Dim s = "$/Quan/Maa/CSr///mai.py"
Console.WriteLine(System.IO.Path.GetDirectoryName(s).Replace("\"c, "/"c)) 
```

输出`$/Quan/Maa/CSr`

*以下是 Tarun Arora 的编辑：*

对于 C#，这应该是...

```
public string GetFilePathFromFolderPath(string serverPath)
    {            
        return Path.GetDirectoryName(serverPath).Replace("\\", "/");
    } 
```

我所有的单元测试都通过了这个......

```
[TestMethod()]
    public void GetRootPathFromConfigFilePath_Validate()
    {
        var t = new TfsWrapper();
        var a = t.GetFilePathFromFolderPath("$/Quan/Maa/CSr/mai.py");

        Assert.IsTrue(a == "$/Quan/Maa/CSr");
    }

    [TestMethod()]
    public void GetRootPathFromConfigFilePath_SmallPath()
    {
        var t = new TfsWrapper();
        var a = t.GetFilePathFromFolderPath("$/Quan/mai.py");

        Assert.IsTrue(a == "$/Quan");
    }

    [TestMethod()]
    public void GetRootPathFromConfigFilePath_RootPath()
    {
        var t = new TfsWrapper();
        var a = t.GetFilePathFromFolderPath("$/mai.py");

        Assert.IsTrue(a == "$");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:47:09.063

我有这个方法：

```
private static string GetPath(string fullPath)
{
    string file = System.IO.Path.GetFileName(fullPath);
    return fullPath.Replace(file, "");
} 
```

# pdf-generation - Markdown to pdf：页面标记

> ID：13442482
> 
> 赞同：2
> 
> 时间：2012-11-18T17:16:10.847
> 
> 标签：pdf-generation, markdown

我想通过markdown制作pdf：编写makrdown并将其转换为pdf。我可以通过降价来进行页面标记吗？

我理解为“页面标记”过渡到新页面、行到页面中心的位置、页面中心的文本位置等。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T12:51:10.440

我怀疑最好的方法是进行 Markdown-HTML-PDF 转换。您的 markdown 实现应该能够生成 HTML，然后使用[wicked_pdf](https://github.com/mileszs/wicked_pdf) (ruby) 或底层[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)之类的东西从 HTML 转换为 PDF。wicked_pdf 文档概述了如何在一些 javascript 的帮助下进行页码编号。对于分页，您应该能够使用 CSS 将内容保持在一起并强制分页。为此请查看 page-break-inside 和 page-break-after 。[wkhtmltopdf 手册](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf-0.9.9-doc.html)中有关于它的讨论。

# ios - iPhone 图库应用程序将照片从 4:3 纵横比裁剪为 3:2，如何？

> ID：13442490
> 
> 赞同：0
> 
> 时间：2012-11-18T17:16:51.093
> 
> 标签：ios, objective-c, gallery, aspect-ratio

`UIImagePickerController`使用4:3 的宽高比拍摄的照片。但是，全屏纵横比为 3:2。所以画廊应用程序正在做一些魔术来将照片显示为 3:2 的纵横比。在全屏视图中缩小时，照片会以 4:3 的纵横比显示。谁能阐明如何做到这一点？在过去的两周里，我一直在为此头疼。

真的很感谢帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:34:49.850

要将 4:3 的图像放入 3:2 的空间，您可以匹配高度或匹配宽度。

如果您要匹配高度，那么您会将 3 in 4:3 变成 2 in 3:2。因此，您将整个图像缩放 2/3。由于您将以相同的量缩放宽度和高度，因此缩放后的有效高度将是 4：3 的 4 缩放 2/3，得到 8/3 - 略小于 3。因此，您不会完全填满屏幕。

相反，如果您要匹配宽度，那么您会将 4 in 4:3 变成 3 in 3:2。因此，您会将整个图像缩放 3/4。由于您将以相同的量缩放宽度和高度，因此最后的有效高度将是 3 从 4:3 缩放 3/4，得到 9/4 - 比两个多一点。因此，您将比填满屏幕略多。

因此，照片应用程序所做的就是以初始缩放显示图片，以使存储图像的宽度适合显示器的宽度。如果存储的图像是 3264x2448（我认为它在 iPhone 4S 和 5 上），那么在 iPhone 4s 上——使用点而不是像素——它的比例为 480/3264。如果你解决了这个问题，它会让图像的最终高度非常接近 360pt，比屏幕宽 40pt。

就 UIKit 而言，这可能意味着将 a`UIImage`放入 a`UIScrollView`并将初始值设置`zoomScale`为 480/3264（即大约 0.15）。尽管仍有一些手动工作要做，但滚动视图可以帮助您放大和缩小 - 请参阅[本教程](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)。通过将 a 设置`minimumZoomScale`为 320/2448（即大约 0.13），您将自动获得尽可能缩小的行为，最终在屏幕上显示整个 4:3 图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:41:21.110

不确定您是如何获得图像的，但您可能已经获得了图像的一种表示形式。其中一种表示专门用于获取快速的全屏 CGImage，另一种表示将返回 FullResolution。全屏将是设备所需的任何内容（iPhone4 上为 640x960），全分辨率将是 8MP 图片。

# java - 使用端口号 3700 glashfish 服务器上的 JNDI 从客户端访问 EJB 3.1

> ID：13442493
> 
> 赞同：0
> 
> 时间：2012-11-18T17:16:57.700
> 
> 标签：java, jakarta-ee, ejb-3.1, openejb

我正在使用 netbeans IDE 7.1.2，我创建了一个 EJB 3.1 Stateless Bean 并实现了远程和本地接口，并将其成功部署到 glassfish 服务器 3.2.1 ......这是代码

****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___** *CaseInfo.java* ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __****

 **```
enter code here

package maxx;

import javax.ejb.Stateless;

@Stateless(name="CaseInfo",mappedName="CaseInfoBean")
public class CaseInfo implements CaseInfoRemote, CaseInfoLocal {

@Override
public String MyCaseMessageLocal() {
    return "Hello this is my Local message.";
}

@Override
public String MyCaseMessageRemote() {
    return "Hello this is my Remote message.Please Note that this message is comming from the remote";
}

} 
```

****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_*** *CaseInfoLocal.java* ***_* __ *_* __ *_* __ *_* __ *_* __ *_* ___****

 **```
package maxx;

import javax.ejb.Local;

@Local
public interface CaseInfoLocal {

String MyCaseMessageLocal();

} 
```

****__ *_* __ *_* __ *_* __ *_* __ *_* __** *CaseInfoRemote.java* ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __****

 **```
package maxx;

import javax.ejb.Remote;

@Remote
public interface CaseInfoRemote {

String MyCaseMessageRemote();

} 
```

现在我已经成功地从本地访问了它，在它创建新项目>Java EE>Application Client 项目后，我已经通过将 bean 模块的 jar 文件作为客户端存根添加到其库中成功访问了该 bean这是一些代码

****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___** *Main.java* ***_* __ *_* __ *_* __ *_* __ *_* _ *_* __ *_* __****

 **```
package applicationclient;

import java.util.Properties;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.rmi.PortableRemoteObject;
import maxx.CaseInfoRemote;

public class Main {

public static void main(String arg[]) {

    try {
Properties prop = new Properties();
prop.setProperty(Context.INITIAL_CONTEXT_FACTORY,
                          "com.sun.enterprise.naming.SerialInitContextFactory");
prop.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
prop.setProperty("org.omg.CORBA.ORBInitialPort", "3700"); 

        InitialContext ic = new InitialContext(prop);
        Object ref = ic.lookup("CaseInfoBean");
        CaseInfoRemote home = (CaseInfoRemote)PortableRemoteObject.narrow(ref,
                CaseInfoRemote.class);
        System.out.println(home.MyCaseMessageRemote());

    } catch(Exception e) {
        e.printStackTrace();
    }
}
} 
```

但是当我使用此客户端访问代码时，请转到 New Project>java>java Application 并在此处编写相同的代码，因此问题表明

****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ____***错误****_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _****

 **```
run:
javax.naming.NoInitialContextException: Cannot instantiate class: com.sun.enterprise.naming.SerialInitContextFactory [Root exception is  java.lang.ClassNotFoundException: com.sun.enterprise.naming.SerialInitContextFactory]
at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:674)
at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307)
at javax.naming.InitialContext.init(InitialContext.java:242)
at javax.naming.InitialContext.<init>(InitialContext.java:216)
at testcasebean.TestCaseBean.main(TestCaseBean.java:30)
Caused by: java.lang.ClassNotFoundException: com.sun.enterprise.naming.SerialInitContextFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at com.sun.naming.internal.VersionHelper12.loadClass(VersionHelper12.java:63)
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:671)
    ... 4 more
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

如果我要删除代码的属性行，那么会给出这种类型的错误

运行：javax.naming.NoInitialContextException：需要在环境或系统属性中指定类名，或作为小程序参数，或在应用程序资源文件中：

```
java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:662)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:344)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at testcasebean.TestCaseBean.main(TestCaseBean.java:27)
BUILD SUCCESSFUL (total time: 0 seconds) 
```

请告诉我如何通过使用简单的 java 桌面应用程序访问这个 bean，因为使用 Java EE 应用程序客户端没有问题，但是相同的代码给出了这些错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:40:35.293

您可能没有遵循如何从*独立*Java 客户端访问远程 EJB（部署在 GlassFish 服务器上）的说明。这并不完全是微不足道的。

这应该回答你的问题。一般来说，我怀疑您缺少的是`gf-client.jar`类路径中的文件。请按照说明告诉我们：

[http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#StandaloneRemoteEJB](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#StandaloneRemoteEJB)**********

# c++ - 标准容器元素的常量正确性

> ID：13442497
> 
> 赞同：5
> 
> 时间：2012-11-18T17:17:25.727
> 
> 标签：c++, std

以下是不好的：

```
vector<const int> vec; 
```

问题是模板类型需要是可分配的。以下代码编译 [EDIT: in Visual Studio 2010]，证明了上述问题：

```
vector<const int> vec;
vec.push_back(6);
vec[0] += 4; 
```

对于更复杂的类型，这可能是一个严重的问题。

我的第一个问题是这种行为是否有原因。在我看来，似乎可以制作不允许上述内容的 const 容器和允许它的非 const 容器。

其次，有没有办法让容器以这种方式发挥作用？

第三，这里实际发生了什么（使用用户类型）？我意识到这是未定义的行为，但是 STL 是如何编译的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:08:26.520

不允许的原因`std::vector<T const>`是向量中的对象在插入到与开头不同的位置时可能需要重新洗牌。现在，该成员`std::vector<T>::push_back(T const& v)`在概念上等同于（将分配器模板参数排除在外，因为它与本次讨论无关）

```
template <typename T>
void std::vector<T>::push_back(T const& v) {
    this->insert(this->end(), v);
} 
```

这似乎是它在某些实现上的实现方式。现在，这个操作通常需要一些对象可能需要移动，因此`T`参数需要是可分配的。似乎 MSVC++ 附带的标准库没有委托操作，而是执行所有必要的处理，即在空间不足时调整数组大小并适当移动对象`push_back()`。尚不清楚对`T`能够使用的类型有什么要求`push_back()`。

原则上，支持两者的容器`T const`和`insert()`中间的操作是可能的，但是：没有什么需要内部存储`T`而不是在接口中`typename std::remove_const<T>::type`暴露 a `T&`。`const`有必要对操作的-version有点小心，`operator[]()`因为仅在某些类型`T const&`时用作返回类型会导致类型。在 C++ 2003 中，这将是一个错误，在 C++ 2011 中，我认为它们只是崩溃了。为了安全起见，您可以使用.`T``S const``S const const``const``typename std::add_const<T>::type&`

# c# - 如何扩展控件模板（例如使用第三种颜色）

> ID：13442500
> 
> 赞同：2
> 
> 时间：2012-11-18T17:17:34.417
> 
> 标签：c#, wpf, controltemplate

我确实有一个 WPF 按钮的控件模板。在模板中，我可以使用按钮的 Fillcolor 和 Backcolor。但是是否可以定义第三种颜色，可以在模板中使用，然后在真正的按钮中使用？

这是一个圆形按钮的示例。我想为 ToggleButton.IsChecked 状态添加一种颜色。

```
<ControlTemplate x:Key="MyButtonTemplate" TargetType="{x:Type ToggleButton}">
    <Grid>
        <Ellipse x:Name="outerCircle" Width="Auto" Height="Auto" StrokeThickness="4" Fill="White" Stroke="Gray"/>
        <Label x:Name="content" Content="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Gray"/>
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="IsChecked" Value="True">
            <Setter TargetName="outerCircle" Property="Fill" Value="{Binding Path=Foreground, RelativeSource='{RelativeSource TemplatedParent}'}"/>
        </Trigger>
        <Trigger Property="IsEnabled" Value="False">
            <Setter TargetName="outerCircle" Property="Fill" Value="LightGray"/>
        </Trigger>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter TargetName="outerCircle" Property="Fill" Value="{Binding Path=Foreground, RelativeSource='{RelativeSource TemplatedParent}'}"/>
            <Setter TargetName="content" Property="Foreground" Value="Gray"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:30:44.527

我不确定您是否要将其绑定到属性或仅使用画笔资源，这是使用资源的示例：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <SolidColorBrush x:Key="ControlPressedColor">#FF211AA9</SolidColorBrush >
        <ControlTemplate x:Key="MyButtonTemplate" TargetType="{x:Type ToggleButton}">
            <Grid>
                <Ellipse x:Name="outerCircle" Width="Auto" Height="Auto" StrokeThickness="4" Fill="White" Stroke="Gray"/>
                <Label x:Name="content" Content="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Gray"/>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter TargetName="outerCircle" Property="Fill" Value="{StaticResource ControlPressedColor}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="outerCircle" Property="Fill" Value="LightGray"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="outerCircle" Property="Fill" Value="{Binding Path=Foreground, RelativeSource='{RelativeSource TemplatedParent}'}"/>
                    <Setter TargetName="content" Property="Foreground" Value="Gray"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Window.Resources>
    <Grid>
        <ToggleButton Template="{StaticResource MyButtonTemplate}"  Height="50" Width="50"></ToggleButton>
    </Grid>
</Window> 
```

* * *

根据您希望能够在 ToggleButton 上设置属性的说明，您将需要使用[Dependecy 属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)，这是一个简单的示例：

**自定义控件**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{

    public class CustomControl2 : System.Windows.Controls.Primitives.ToggleButton 
    {
        public static readonly DependencyProperty myFillColorProperty = DependencyProperty.Register("myFillColor",typeof(SolidColorBrush),typeof(System.Windows.Controls.Primitives.ToggleButton));    
        static CustomControl2()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(CustomControl2), new FrameworkPropertyMetadata(typeof(CustomControl2)));
        }

        public SolidColorBrush myFillColor
        {
            get { return (SolidColorBrush)GetValue(myFillColorProperty); }
            set { SetValue(myFillColorProperty, value); }

        }
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:my ="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ControlTemplate x:Key="MyButtonTemplate" TargetType="{x:Type ToggleButton}">
            <Grid>
                <Ellipse x:Name="outerCircle" Width="Auto" Height="Auto" StrokeThickness="4" Fill="White" Stroke="Gray"/>
                <Label x:Name="content" Content="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Gray"/>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter TargetName="outerCircle" Property="Fill" Value="{Binding Path=myFillColor, RelativeSource='{RelativeSource TemplatedParent}'}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="outerCircle" Property="Fill" Value="LightGray"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="outerCircle" Property="Fill" Value="{Binding Path=Foreground, RelativeSource='{RelativeSource TemplatedParent}'}"/>
                    <Setter TargetName="content" Property="Foreground" Value="Gray"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Window.Resources>
    <Grid>
        <my:CustomControl2 myFillColor="Red" Template="{StaticResource MyButtonTemplate}"  Height="50" Width="50"></my:CustomControl2>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:18:35.960

您可以将您的 ColorBrush 添加到 ResourceDictionary，通过 x:Key 属性给它一个键，并通过模板和“真实”按钮的 StaticResource 或 DynamicResource 标记扩展来引用该资源（我假设您的意思是按钮，可能在 xaml 中定义）。这要求您通过 ResourceDictionary.MergedDictionaries 属性在包含该键的字典中进行合并。

```
<Window x:Class="WpfApplication3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <SolidColorBrush x:Key="MySharedColor"  Color="Red"/>       
    <ControlTemplate x:Key="MyTemplate"  TargetType="{x:Type Button}">
        <Border Background="{StaticResource MySharedColor}"/>
    </ControlTemplate>        
</Window.Resources>
<Grid>       
    <Button Style="{StaticResource MyTemplate}" BorderBrush="{StaticResource MySharedColor}"/>    
</Grid> 
```

# functional-programming - 在 common lisp 中操作列表

> ID：13442501
> 
> 赞同：-2
> 
> 时间：2012-11-18T17:17:39.953
> 
> 标签：functional-programming, common-lisp, clisp

如何从列表中创建列表，我真正可以使用什么函数我想`mapcar or maplist with cons`一起使用但我没有得到任何富有成果的结果，可以说我有一个 `list (a b)` 然后我想要一个函数来创建一个包含相同元素的列表但是他们应该被告知这样的列表 `((a) (b))`，关于我如何解决这个问题的任何想法？它有什么用处吗？

```
if i have a list(a b)
the result should be ((a)(b)) 
```

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:33:34.847

你想要做的是：

```
(defun listify(ls) 
    (mapcar (lambda (elem) (list elem))  ls)) 
```

**编辑**

这与（感谢@RainerJoswig）相同：

```
(defun listify(ls) 
    (mapcar #'list ls)) 
```

如果你这样做：

```
(listify (list 1 2 3)) 
```

或者

```
(listify '(1 2 3)) 
```

输出将是：

```
((1) (2) (3)) 
```

# ruby-on-rails - 为什么迁移时出现错误？未初始化的常量 AddDates

> ID：13442505
> 
> 赞同：0
> 
> 时间：2012-11-18T17:18:02.107
> 
> 标签：ruby-on-rails

我想为我网站上的一堆不同项目添加一个新列。

```
class AddCreatedatToStreamItems < ActiveRecord::Migration
  def change
    add_column :stream_artworks, :createdat, :date
    add_column :stream_experiments, :createdat, :date
    add_column :stream_photographies, :createdat, :date
    add_column :stream_webs, :createdat, :date
    add_column :stream_socials, :createdat, :date
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:28:52.097

迁移的文件名是否有可能是“123123_add_dates.rb”而不是“123123_add_createdat_to_stream_items.rb”（其中“123123”是一串数字，不一定是“123123”）？

迁移的类名和文件名需要以 CamelCase => camel_case 方式匹配。

# java - 在 Java 中打印二进制值

> ID：13442506
> 
> 赞同：2
> 
> 时间：2012-11-18T17:18:06.843
> 
> 标签：java

为什么这个java程序的输出是`8`和`9`当我们分别尝试打印`010`和时`011`：

```
public class Test{
   public static void main(String str[]){ 
      System.out.println(011); 
   }
} 
```

是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T17:19:22.233

`010`是`10`八进制基数的解释，即`8`. 同样`011`是`11`in `octal base`which is的解释`9`。

在前面`integer`加上 with`0`使其在`octal base`.

同样，您可以尝试打印`0x10`，它是一种`hexadecimal`表示形式，并将给您`16`作为输出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T17:19:30.097

在 Java 中，从整数到字符串的默认转换是以 10 为基数的。如果您想要不同的基数，则必须明确指定它。例如，您可以使用以下方法将整数值转换为二进制字符串：

```
Integer.toString(value, 2); 
```

同样，您可以使用以下方法将其转换为八进制值：

```
Integer.toString(value, 8); 
```

除非该值为 0，否则字符串不会有前导零。如果你想要一个前导 0，你必须在前面加上它。或者，您可以将其格式化[`String.format()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)并指定零填充和转换后的字符串的最小宽度：

```
String.format("%1$03o", value); // the "1$ in the format string is optional here 
```

PS从您的问题中不清楚确切的问题是什么。听起来您正在从整数值转换为字符串。但是，如果问题是您尝试读取字符串“011”并且它被读取为整数值 9，这是因为前导 0 强制解释为八进制值。您必须将其作为字符串值读取，然后显式指定从字符串到整数的转换以 10 为底：

```
int val = Integer.valueOf(stringValue, 10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:23:03.353

**-**如果要将整数转换为二进制数据，请使用`toBinaryString()`方法。

**例如：**

```
int i = 8;
Integer.toBinaryString(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-11T05:40:13.767

贝克。当您以 0 开头的数字时，JVM 将数字从十进制转换为八进制，仅此而已；）
“十进制的 11 = 八进制的 9”十进制 0 1 2 3 4 5 6 7 8 9 八进制 0 1 2 3 4 5 6 7 10 11

# ruby - Net::IMAP::NoResponseError: STORE 尝试只读文件夹（失败）

> ID：13442507
> 
> 赞同：2
> 
> 时间：2012-11-18T17:18:13.707
> 
> 标签：ruby, ruby-on-rails-3, email

我正在尝试[Mikel 的宏伟邮件宝石](https://github.com/mikel/mail)。我想在处理完邮件后删除它们。

当我通过`Mail.find_and_delete()`IMAP 对 Gmail 帐户使用时，我收到以下错误，但`Mail.all`可以正确获取邮件。

`Net::IMAP::NoResponseError: STORE attempt on READ-ONLY folder (Failure)`

这有什么问题？我还应该为我的 Gmail 帐户配置什么吗？

# c# - C# OleDB SQL 插入命令

> ID：13442518
> 
> 赞同：2
> 
> 时间：2012-11-18T17:20:01.517
> 
> 标签：c#, sql, ms-access, oledb

我正在尝试`INSERT`使用 C# 和 Visual Studio 2012 在我的 MS Access 数据库中实现 SQL 命令。

但是在那之后，当我打开我的Access数据库时，没有更新，甚至`insert`可以通过显示成功弹出窗口成功创建命令`executeNonQuery()`

你能告诉我如何使这个插入到 SQL 命令中工作吗？

这是我的代码

```
OleDbCommand cmd = new OleDbCommand();
cmd.CommandText = @"INSERT INTO STUDENT(CHI_NAME, ENG_NAME, NICK_NAME, 
                                        BD_YYYY, BD_MM, BD_DD,
                                        HOME_TEL, NO_OF_CHILD, PARENT_EMAIL,
                                        SEC_EMAIL, STUDENT_ADDR, DISTRICT, 
                                        MOTHER_NAME, MOTHER_TEL, MOTHER_OCCU, 
                                        FATHER_NAME, FATHER_TEL, FATHER_OCCU,
                                        E_NAME, E_TEL, E_RELATIONSHIP, REMARKS) 
                    VALUES(@NEW_CHI_NAME, @NEW_EN  G_NAME, @NEW_NICK_NAME, 
                           @NEW_BD_YYYY, @NEW_BD_MM .....);"

cmd.CommandType = CommandType.Text;

cmd.Parameters.AddWithValue("@NEW_CHI_NAME", chi_name);
cmd.Parameters.AddWithValue("@NEW_ENG_NAME", eng_name);
cmd.Parameters.AddWithValue("@NEW_NICK_NAME", nick_name);            
cmd.Parameters.AddWithValue("@NEW_BD_YYYY", bd_year);
cmd.Parameters.AddWithValue("@NEW_BD_MM", bd_month);
....

cmd.Connection = connection;
connection.Open();
cmd.Transaction = connection.BeginTransaction();
int rows= cmd.ExecuteNonQuery();

if(rows > 0)
{
     MessageBox.Show("Insert New Client Success!");
}
else
{
    MessageBox.Show("Insert New Client Failed!"); 
}

cmd.Transaction.Commit();
connection.Dispose();
connection.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:38:15.113

In `Solution Explorer`, right click your Access file, choose `Properties`, and set `Copy To Output Directory` to `Copy if Newer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:09:23.433

转到调试目录，你会发现你的 accdb 文件复制在那里。打开它并验证。

# events - 如何将事件传播给孩子

> ID：13442522
> 
> 赞同：1
> 
> 时间：2012-11-18T17:20:34.740
> 
> 标签：events, javafx-2, draw

我有这样的代码：

```
public void handle(MouseEvent event) {
        //if (event.getEventType() == MouseEvent.MOUSE_CLICKED) {
        if ( ( event.getEventType() == MouseEvent.MOUSE_PRESSED )&&
             (event.isPrimaryButtonDown()) ) {
                x1 = x2 = event.getX();
                y1 = y2 = event.getY();
                line = new BoundLine(pane, event, x1, y1,  x2, y2);
                pane.getChildren().add(line);                    
                //line.getEventDispatcher().dispatchEvent(event, null);
        }
   } 
```

是否可以立即将“MouseEvent 事件”传播到`javafx.scene.shape.Line`（代码中的行）对象？我试过`line.getEventDispatcher().dispatchEvent(event, null);`了，但我收到了这个消息错误：

> testjavafxapplication.LinesEditCtx02$MouseHandler.handle(LinesEditCtx02.java:243) 的 com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35) 的线程“JavaFX 应用程序线程”java.lang.NullPointerException 异常。 LinesEditCtx02$MouseHandler.handle(LinesEditCtx02.java:105) 在 com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69) 在 com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)在 com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170) 在 com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38) 在 com.sun.javafx.event.BasicEventDispatcher。dispatchEvent(BasicEventDispatcher.java:37) at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92) at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35) at com.sun .javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92) 在 com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53) 在 com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java :33) 在 javafx.scene.Scene$MouseHandler.process(Scene.java:3324) 在 javafx.scene.Scene$MouseHandler.process(Scene.java: 3164) 在 javafx.scene.Scene.Scene$MouseHandler.access$1900(Scene.java:3119) 在 javafx.scene.Scene.impl_processMouseEvent(Scene.java:1559) 在 javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2261) 在 com.sun.glass.ui.View.handleMouseEvent(View.java:528) 在 com.sun.glass.ui .View.notifyMouse(View.java:922) at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) at com.sun.glass.ui.gtk.GtkApplication$3$1.run(GtkApplication.java: 82) 在 java.lang.Thread.run(Thread.java:722)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-18T19:09:22.020

发送到 #dispatchEvent 的 EventDispatchChain（第二个参数）不能为空。不幸的是，没有公共实现，或者它们位于 com.sun 包中，因此您需要实现自己的 EventDispatchChain。

# sql-server-2008 - 使用全文搜索而不是“Like '%____%' 查询

> ID：13442526
> 
> 赞同：1
> 
> 时间：2012-11-18T17:20:42.303
> 
> 标签：sql-server-2008, full-text-search, sql-server-2008-r2, sql-like

我正在查询一个表（大约 150,000 行并且还在增长），其中包含一个无法索引的大 varchar 字段（大小为 2000）（即使可以索引也没有意义）。我正在使用 Sql Server 2008。到目前为止我使用的查询是：

select * from tbl_name where field_name like '%bla bla%'

（“bla bla”是根据用户搜索的内容）

为了提高性能，我想开始使用全文搜索功能（已经在该字段上定义了目录和文本索引）。我对使用此选项进行查询的内容感到有些困惑。为了获得与以前使用的查询完全相同的结果，我应该使用什么查询？

*   注释：
    1.  我想得到不区分大小写的结果，因为它以前有效（这意味着如果用户搜索“LG”，他也会得到包含“Lg”的结果）。
    2.  如果用户输入“Sams”，他也会得到“Samsung”。

谢谢！伊兰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:51:32.380

[`CONTAINS()`](http://msdn.microsoft.com/en-us/library/ms187787%28v=sql.105%29.aspx)将为您提供您正在寻找的 LIKE() 功能，但有一个例外 - 我在评论中注意到您还想匹配第二个条目 - “hhhEranttt”。不幸的是，由于缺少后缀搜索，这目前是不可能的。

对于其他条目，您可以运行前缀搜索 -`CONTAINS(field_name, '"eran*"')`匹配所有其他条目，因为全文搜索不区分大小写。

HTH。

# python - 如何在 Python 中查找线程的运行时间

> ID：13442527
> 
> 赞同：7
> 
> 时间：2012-11-18T17:20:41.993
> 
> 标签：python, timer, python-2.7, python-multithreading

我有一个多线程 SMTP 服务器。每个线程负责一个客户端。我需要在每个服务器线程上设置 10 秒的超时值来终止休眠或行为不端的客户端。
我使用`time.time()`, 来查找开始时间和我的检查点时间，差异给出了运行时间。但我相信它给了系统时间，而不是这个线程运行的时间。
Python 中是否有 Thread 本地计时器 API？

```
 import threading
   stop = 0

   def hello():
     stop = 1

   t=threading.Timer(10,hello)
   t.start()
   while stop != 1:
      print stop
   print "stop changed" 
```

这会在循环中打印 0（初始停止）并且不会退出 while 循环。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-10-03T10:28:14.967

自从提出这个问题以来，Python 在 6 年里取得了进步，在 3.3 版中，它引入了一个工具，可以准确地解决这里所要求的内容：

`time.clock_gettime(time.CLOCK_THREAD_CPUTIME_ID)`

Python 3.7 还引入了一个类似的`time.clock_gettime_ns`.

详细的文档[正是您所期望](https://docs.python.org/3/library/time.html)的，但该功能开箱即用非常简单。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T19:53:22.157

在 python 文档中没有提到“线程计时”。时钟要么是进程范围的，要么是系统范围的。特别是在返回系统时间的`time.clock`同时测量处理时间。`time.time`

在 python3.3 中，计时 API 得到了修改和改进，但我仍然看不到任何计时器可以返回单个线程所用的进程时间。

另请注意，即使可能，编写这样的计时器也并非易事。计时器是特定于操作系统的，因此您必须为每个操作系统编写不同版本的模块。如果您想分析特定操作，只需在没有线程的情况下启动它。当线程化时序时，它要么按预期运行，要么由于操作系统而慢得多，在这种情况下，您无能为力（至少，如果您不想编写“修复”的补丁） GIL 或安全地移除它）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-07-25T14:04:24.393

Python 3.7 添加了`time.thread_time()`似乎可以满足此问题所需的方法。根据[文档](https://docs.python.org/3.7/library/time.html#time.thread_time)，它是特定于线程的，不包括睡眠时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T18:44:26.890

hello 函数的停止值是本地的，而不是全局的。

添加以下内容：

```
def hello():
   global stop
   stop = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-02T14:32:58.883

我正在发布一个可以测量线程运行时间的示例代码，您可以修改代码，以便与您的功能一起使用。

```
 import time
    import threading
    def hello():
        x = 0 
        while x < 100000000:
            pass
            x += 1
    start = time.clock()
    t = threading.Thread(target = hello, args = ())
    t.start() 
    t.join()
    end = time.clock()
    print "The time was {}".format(end - start) 
```

在我的系统上，它给出了 8.34 秒的时间。

# python - 提高浮点数的准确性

> ID：13442531
> 
> 赞同：8
> 
> 时间：2012-11-18T17:21:16.957
> 
> 标签：python, numpy

如何将默认浮点数精度切换为另一个，也许是自定义的？我需要这个，因为我做了一些计算，我发现我应该提高默认浮点精度。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T17:42:00.607

我最近不得不处理这个问题，而[**mpmath**](http://code.google.com/p/mpmath/)非常完美。它是纯 python，在 BSD 许可下。

> Mpmath 是一个用于多精度浮点运算的纯 Python 库。它提供了广泛的超越函数、无限指数大小、复数、区间算术、数值积分和微分、求根、线性代数等等。几乎任何计算都可以以 10 位或 1000 位精度执行，并且在许多情况下 mpmath 实现了渐近快速算法，可以很好地扩展以适应极高精度的工作

它不会太慢，如果安装了它可以利用[**gmpy**](http://code.google.com/p/gmpy/)库（a `C-coded Python extension modules that support fast multiple-precision arithmetic`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:26:27.463

如果您想要更高的准确性，我会建议您使用该[`bigfloat`](http://packages.python.org/bigfloat/)软件包（因为这就是它的用途）。或者，您也可以查看[`Decimal`](http://docs.python.org/2/library/decimal.html)课程。

# c# - ITemplate 在自定义控件中的使用

> ID：13442535
> 
> 赞同：0
> 
> 时间：2012-11-18T17:21:38.473
> 
> 标签：c#, asp.net

我试图弄清楚是否可以`ITemplate`在自定义控件中使用该界面。这是我到目前为止所做的。

```
public class Tooltip : Control
{
    public ITemplate ContentTemplate { get; set; }

    protected override void CreateChildControls()
    {
        base.CreateChildControls();

        var ctrl = new HtmlGenericControl("a");

        if (ContentTemplate != null)
        {
            ContentTemplate.InstantiateIn(ctrl);
        }

        this.Controls.Add(ctrl);
    }
} 
```

asp.net控件用法

```
<gc:Tooltip runat="server">
    <ContentTemplate>
        hello
    </ContentTemplate>
</gc:Tooltip> 
```

这个想法是它应该返回这样的东西

```
<a>hello</a> 
```

但结果看起来像这样

```
<ContentTemplate>
  hello
</ContentTemplate>
<a></a> 
```

它确实包含模板标签，并且似乎忽略了我所做的任何事情。

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:42:04.503

我认为你应该看看[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.itemplate%28v=vs.100%29.aspx)并按照他们已经说过的那样做。

你错过了这个：

```
 [
      PersistenceMode(PersistenceMode.InnerProperty),
      TemplateContainer(typeof(TemplateItem))
  ] 
```

而且你应该在你的班级设置这部分：

```
[ParseChildren(true)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:49:17.510

我从错误的类继承，当切换到 WebControl 时它开始工作

```
public class Tooltip : WebControl 
```

# objective-c - Objective C - UIAlertViewDelegate 无法访问其他类中的 UILabel

> ID：13442536
> 
> 赞同：2
> 
> 时间：2012-11-18T17:21:40.273
> 
> 标签：objective-c, class, delegates, uialertview

我是 Objective C 的新手，遇到一个我知道一定很简单的问题——我想我可能以错误的方式处理它。

我创建了一个 UIAlertViewDelegate 类，我想成为我的 View Controller 类中的一些 UIAlertViews 的代表。

当用户按下按钮并输入一些文本时，我希望 ViewController 类中的标签用该文本进行更新。但是，除非我以某种方式传递它，否则我显然无法从我的 UIAlertViewDelegate 类中引用标签“outputLabel”。

我得到的错误是“使用未声明的标识符'outputLabel'。”

视图控制器.h

```
@interface ViewController : UIViewController <UIAlertViewDelegate>;
...
@property (strong) UIAlertViewDelegate *AVDelegate; 
```

视图控制器.m

```
- (void)viewDidLoad
{
    UIAlertViewDelegate *AVDelegate;
    AVDelegate = [[UIAlertViewDelegate alloc] init];
    [super viewDidLoad];
}

- (IBAction)doAlertInput:(id)sender {
    UIAlertViewDelegate *AVDelegate;
    AVDelegate = [[UIAlertViewDelegate alloc] init];

    UIAlertView *alertDialogue;
    alertDialogue = [[UIAlertView alloc]
                 initWithTitle:@"Email Address"
                 message:@"Please Enter Your Email Address:"
                 delegate:self.AVDelegate
                 cancelButtonTitle:@"OK"
                 otherButtonTitles:nil, nil];
    alertDialogue.alertViewStyle=UIAlertViewStylePlainTextInput;
    [alertDialogue show];
} 
```

UIAlertViewDelegate.m

```
#import "UIAlertViewDelegate.h"

@implementation UIAlertViewDelegate

- (void)alertView:(UIAlertView *)alertView
clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *buttonTitle = [alertView buttonTitleAtIndex:buttonIndex];
    NSString *alertTitle = [alertView title];

    if ([alertTitle isEqualToString:@"Alert Button Selected"] || [alertTitle         isEqualToString:@"Alert Button Selected"]) {

    if ([buttonTitle isEqualToString:@"Maybe Later"])
    {
        outputLabel.text=@"User Clicked: 'Maybe Later'"; 
```

UIAlertViewDelegate.h

```
@interface UIAlertViewDelegate : UIViewController <UIAlertViewDelegate,UIActionSheetDelegate>; 
```

多年前我用 Java 做过一些工作。我想我必须以某种方式将我的 UIAlertViewDelegate 类传递给视图，但我不确定语法，非常感谢指向正确方向的指针......

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:35:11.473

这里有很多事情是你不应该做的，但是从影响你问题的主要事情开始......

你不应该发明自己的`UIAlertViewDelegate`班级，这意味着不要这样做......

```
@interface UIAlertViewDelegate : UIViewController <UIAlertViewDelegate,UIActionSheetDelegate>; 
```

因为`UIAlertViewDelegate`是一个协议，你也不能`alloc`和它一起使用。

**正确**的主要是...

```
@interface ViewController : UIViewController <UIAlertViewDelegate> 
```

这表示您`ViewController`能够充当 a `UIAlertViewDelegate`，因此您可以使用用于创建警报的代码，`delegate:self`而不是尝试创建单独的委托属性或对象。

您可能仍有疑问，但这些更改应该会清理一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:54:58.290

您的视图控制器是警报视图的委托，因此，您不需要创建委托对象。

使用 self（视图控制器）作为委托参数初始化警报视图。

然后在视图控制器中实现委托方法（用于警报视图）。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)

委托的目的是使对象可以在任何类上进行回调。

我建议阅读协议和授权。

[http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html#//apple_ref/doc/uid/TP40008195-CH14-SW1](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html#//apple_ref/doc/uid/TP40008195-CH14-SW1)

我猜您正在尝试使用警报视图输入文本，因此您将警报视图样式设置为 UIAlertViewPlainTextStyle，并通过访问 alertView 对象中的文本字段在其中一个回调中设置标签。

# java - 使用 servlet 或任何 Web 应用程序访问 HP QC 的 OTA 以获取缺陷列表

> ID：13442537
> 
> 赞同：1
> 
> 时间：2012-11-18T17:21:47.413
> 
> 标签：java, linux, jsp, servlets, portal

我正在创建一个支持门户，它将显示 HP QC 中某些过滤器的所有缺陷。

我可以看到很多使用 JAVA-COM 桥接访问 OTA 的示例。我只是想知道是否有任何方法可以开发 Web 应用程序门户来显示 Qc 缺陷并部署在 Linux 服务器或 Windows 本地计算机中以访问它。

# javascript - 如何添加图像链接以使它们在新选项卡中可点击？

> ID：13442539
> 
> 赞同：3
> 
> 时间：2012-11-18T17:21:53.280
> 
> 标签：javascript, html

我不确定如何将链接添加到我的图像以使它们在新选项卡中可点击。以下代码自动旋转我的图像并具有允许您选择显示哪个图像的按钮，但我不知道如何为每个图像添加链接以将用户带到新选项卡中的链接。任何帮助将不胜感激。谢谢！

```
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Image-Text</title>

<SCRIPT type="text/javascript" LANGUAGE="JavaScript">
var num=0;

imgArray = [  
 ['pic1.png','Text for Picture 1'],
 ['pic2.png','Text for Picture 2'],
 ['pic3.png','Text for Picture 3'],
 ['pic4.png','Text for Picture 4']
];
/*
*/

function LimitNumber(value) {
  if (value < 0) { value = imgArray.length - 1; }
  var value = value % imgArray.length;
  return value; 
}
function slide(slide_num,Mypic,Mylbl) {
  document.getElementById(Mypic).src=imgArray[slide_num][0];
  document.getElementById(Mylbl).innerHTML=imgArray[slide_num][1];
}

var timedNum = 0;

function TimedImage() {
  timedNum++;
  timedNum = LimitNumber(timedNum);
  slide(timedNum,'mypic','mylbl');
}

var timedFunc = '';
function InitTimeInterval() {
  timedFunc = setInterval("TimedImage()",3000);
}

function DisplaySlides(SNo) {
  clearInterval(timedFunc);
  slide(SNo,'mypic','mylbl');
}

</SCRIPT>

</head>
<body onLoad="InitTimeInterval()">

<center>
<TR>
<TH>
<button onClick="DisplaySlides(0)">T3K's Game Pick</button>
<button onClick="DisplaySlides(1)">T3K's Hardware Pick</button>
<button onClick="DisplaySlides(2)">MEA's Game Pick</button>
<button onClick="DisplaySlides(3)">MEA's Hardware Pick</button>
</TH>
</TR>

<TABLE border="0"><TR><TD>
<TR>
<TH>
  <div class="slide">
  <IMG id="mypic" SRC="pic1.png" alt="" BORDER="0" HEIGHT="218" WIDTH="500">
  <div id="mylbl" style="font-size:larger;">Text for Picture 1</div>
  </div>
</TH>
</TR>

</TABLE>

</body>
</html>
</center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:29:27.993

你可以很容易地用谷歌搜索这个问题。

```
<p onclick="window.open('[link]', '_new')"><a href="javascript:void(0)" >[likable object(text/image)]</a></p> 
```

有关更多详细信息，请参见此处[http://html.cita.illinois.edu/script/onclick/onclick-example.php](http://html.cita.illinois.edu/script/onclick/onclick-example.php)

另请参阅[http://www.w3schools.com/jsref/prop_html_innerhtml.asp](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)。这将为显示的每个图像添加链接更具体地说，您需要编辑这部分，

```
function slide(slide_num,Mypic,Mylbl) {
  document.getElementById(Mypic).src=imgArray[slide_num][0];
  document.getElementById(Mylbl).innerHTML=imgArray[slide_num][1];
  document.getElementById(Mylbl).href='<your link';
  document.getElementById(Mylbl).target='_blank';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:33:39.410

试试这个，虽然没有测试，但它应该工作。

```
 <!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
    <html>
    <head>
    <title>Image-Text</title>

    <SCRIPT type="text/javascript" LANGUAGE="JavaScript">
    var num=0;

    imgArray = [  
     ['pic1.png','Text for Picture 1'],
     ['pic2.png','Text for Picture 2'],
     ['pic3.png','Text for Picture 3'],
     ['pic4.png','Text for Picture 4']
    ];
    /*
    */

    function LimitNumber(value) {
      if (value < 0) { value = imgArray.length - 1; }
      var value = value % imgArray.length;
      return value; 
    }
    function slide(slide_num,Mypic,Mylbl,Mylink) {
      document.getElementById(Mypic).src=imgArray[slide_num][0];
document.getElementById(Mylink).href=imgArray[slide_num][0];
      document.getElementById(Mylbl).innerHTML=imgArray[slide_num][1];
    }

    var timedNum = 0;

    function TimedImage() {
      timedNum++;
      timedNum = LimitNumber(timedNum);
      slide(timedNum,'mypic','mylbl');
    }

    var timedFunc = '';
    function InitTimeInterval() {
      timedFunc = setInterval("TimedImage()",3000);
    }

    function DisplaySlides(SNo) {
      clearInterval(timedFunc);
      slide(SNo,'mypic','mylbl','mylink');
    }

    </SCRIPT>

    </head>
    <body onLoad="InitTimeInterval()">

    <center>
    <TR>
    <TH>
    <button onClick="DisplaySlides(0)">T3K's Game Pick</button>
    <button onClick="DisplaySlides(1)">T3K's Hardware Pick</button>
    <button onClick="DisplaySlides(2)">MEA's Game Pick</button>
    <button onClick="DisplaySlides(3)">MEA's Hardware Pick</button>
    </TH>
    </TR>

    <TABLE border="0"><TR><TD>
    <TR>
    <TH>
      <div class="slide">
      <a id="mylink" href="pic1.png" target="_blank"> <IMG id="mypic" SRC="pic1.png" alt="" BORDER="0" HEIGHT="218" WIDTH="500"></a>
      <div id="mylbl" style="font-size:larger;">Text for Picture 1</div>
      </div>
    </TH>
    </TR>

    </TABLE>

    </body>
    </html>
    </center> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:40:24.363

更新到 Anshul 的代码，然后在可点击的图像之后稍微扩展......你需要以下 js：[jquery-color.js](https://github.com/jquery/jquery-color/blob/master/jquery.color.js)

```
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Image-Text</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="jquery-color.js"></script>

<SCRIPT type="text/javascript" LANGUAGE="JavaScript">
    var num = 0;

    imgArray = [
     ['pic1.png', 'Text for Picture 1', 'http://www.google.co.uk', '_blank'],
     ['pic2.png', 'Text for Picture 2', 'http://www.google.co.uk', '_blank'],
     ['pic3.png', 'Text for Picture 3', 'http://www.google.co.uk', '_blank'],
     ['pic4.png', 'Text for Picture 4', 'http://www.google.co.uk', '_blank']
    ];
    /*
    */

    function LimitNumber(value) {
        if (value < 0) { value = imgArray.length - 1; }
        var value = value % imgArray.length;
        return value;
    }

    function slide(slide_num, Mypic, Mylbl) {
        document.getElementById(Mypic).src = imgArray[slide_num][0];
        document.getElementById(Mylbl).innerHTML = imgArray[slide_num][1];
        document.getElementById("aLink").href = imgArray[slide_num][2];
        document.getElementById("aLink").target = imgArray[slide_num][3];

        //set all button background colors to default color
        $('#btn1').animate({ backgroundColor: '#CCCCCC'}, 200);
        $('#btn2').animate({ backgroundColor: '#CCCCCC'}, 200);
        $('#btn3').animate({ backgroundColor: '#CCCCCC'}, 200);
        $('#btn4').animate({ backgroundColor: '#CCCCCC'}, 200);

        switch (slide_num) {
            case 0: $('#btn1').animate({ backgroundColor: '#FF6600' }, 50); break;
            case 1: $('#btn2').animate({ backgroundColor: '#FF6600' }, 50); break;
            case 2: $('#btn3').animate({ backgroundColor: '#FF6600' }, 50); break;
            case 3: $('#btn4').animate({ backgroundColor: '#FF6600' }, 50); break;
        }
    }

    var timedNum = 0;

    function TimedImage() {
        timedNum++;
        timedNum = LimitNumber(timedNum);
        slide(timedNum, 'mypic', 'mylbl');
    }

    var timedFunc = '';
    function InitTimeInterval() {
        timedFunc = setInterval("TimedImage()", 3000);
    }

    function DisplaySlides(SNo, Btn) {
        clearInterval(timedFunc);
        slide(SNo, 'mypic', 'mylbl');
    }

</SCRIPT>

</head>
<body onLoad="InitTimeInterval()">

<center>
<TR>
<TH>
<button id="btn1" onClick="DisplaySlides(0, this)" style="background: #FF6600;">T3K's Game Pick</button>
<button id="btn2" onClick="DisplaySlides(1, this)" style="background: #CCCCCC;">T3K's Hardware Pick</button>
<button id="btn3" onClick="DisplaySlides(2, this)" style="background: #CCCCCC;">MEA's Game Pick</button>
<button id="btn4" onClick="DisplaySlides(3, this)" style="background: #CCCCCC;">MEA's Hardware Pick</button>
</TH>
</TR>

<TABLE border="0"><TR><TD>
<TR>
<TH>
  <div class="slide">
      <a id="aLink"><IMG id="mypic" SRC="pic1.png" alt="" BORDER="0" HEIGHT="218" WIDTH="500"></a>
      <div id="mylbl" style="font-size:larger;">Text for Picture 1</div>
  </div>
</TH>
</TR>

</TABLE>

</body>
</html>
</center> 
```

# php - YiiBooster Tabs 小部件内容更新与 ajax 调用

> ID：13442540
> 
> 赞同：1
> 
> 时间：2012-11-18T17:21:57.657
> 
> 标签：php, yii, yii-extensions

我正在为 UI 使用 Yii Booster Yii 扩展。我需要使用 ajax 更新选项卡的内容。使用下面的代码，我可以使用 renderPartial 获取内容，但我想进行 ajax 调用并更新内容。

```
$this->widget('bootstrap.widgets.TbTabs', array(
        'type' => 'tabs',
        'tabs' => array(
                array('label' => 'Home', 'content' => $this->renderPartial('home', NULL, true), 'active' => true),
                array('label' => 'Test', 'items' => array(
                        array('label' => 'Sub Tab 1', 'content' => $this->renderPartial('testpage', NULL, true)),
                        array('label' => 'Sub Tab 2', 'content' => 'some content ')
                )),
        )
    )
); 
```

我需要使用 jquery 或其他东西来处理 Yii Booster 小部件吗？这是我第一次使用 php/yii/extensions。

我有点困惑，所以 Yii Booster 集成了 Bootstrap 小部件，以便它们可以与 php 一起使用。但是对于客户端，我需要使用 jquery 来操作引导小部件吗？

有没有使用 Yii Booster 的教程，我知道 yii booster 站点的链接，但是我们只有简单的例子，与事件无关，ajax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T11:15:12.593

我用@Abdullahs 示例扩展了 TbTabs 类。它已经过[YiiBooster](http://www.yiiframework.com/extension/yiibooster/)测试，但也可以与其他 Bootstrap 插件一起使用。

用法：

```
$this->widget(
    'ext.ajaxTabs.widgets.ajaxTabs',
    array(
         'reload' => true, // Reload the tab content each time a tab is clicked. Delete this line to load it only once.
         'tabs' => array(
             array(
                 'label' => 'Static',
                 'content' => 'Static content'
             ),
             array(
                 'label' => 'Static rendered',
                 'content' => $this->renderPartial('index', null, true),
             ),
             // And finally AJAX:
             array(
                 'label' => 'AJAX',
                 'content' => 'loading ....',
                 'linkOptions' => array('data-tab-url' => Yii::app()->createAbsoluteUrl('site/'))
             )
         ),
    )
); 
```

/protected/extensions/ajaxTabs/widget/ajaxTabs.php：

```
<?php

Yii::import('bootstrap.widgets.TbTabs');

class ajaxTabs extends TbTabs
{
    /**
     * @var bool Reload the tab content each time the tab is clicked. Default: load only once
     */
    public $reload = false;

    public function run()
    {
        $id = $this->id;

        /** @var CClientScript $cs */
        $cs = Yii::app()->getClientScript();
        $cs->registerScript(
            __CLASS__ . '#' . $id . '_ajax', '
                function TbTabsAjax(e) {

                    e.preventDefault();

                    var $eTarget = $(e.target);
                    var $tab = $($eTarget.attr("href"));
                    var ctUrl = $eTarget.data("tab-url");

                    if (ctUrl != "" && ctUrl !== undefined) {
                        $.ajax({
                            url: ctUrl,
                            type: "POST",
                            dataType: "html",
                            cache: false,
                            success: function (html) {
                                $tab.html(html);
                            },
                            error: function () {
                                alert("Request failed");
                            }
                        });
                    }
                    if(' . ($this->reload ? 0 : 1) . '){
                        $eTarget.data("tab-url", "");
                    }
                    return false;
                }'
        );
        $this->events['shown'] = 'js:TbTabsAjax';

        parent::run();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:08:58.813

得到这个工作。正如@Sergey 所说，我需要使用“显示”事件。我为每个选项卡提供了 ID，以识别特定选项卡并加载内容。这是代码

```
<?php $this->widget('bootstrap.widgets.TbTabs', array(
        'id' => 'mytabs',
        'type' => 'tabs',
        'tabs' => array(
                array('id' => 'tab1', 'label' => 'Tab 1', 'content' => $this->renderPartial('tab1', null, true), 'active' => true),
                array('id' => 'tab2', 'label' => 'Tab 2', 'content' => 'loading ....'),
                array('id' => 'tab3', 'label' => 'Tab 3', 'content' => 'loading ....'),
        ),
        'events'=>array('shown'=>'js:loadContent')
    )
);?> 
```

我们有 3 个选项卡，内容将使用 loadContent javascript 函数加载。

```
<script type="text/javascript">

function loadContent(e){

    var tabId = e.target.getAttribute("href");

    var ctUrl = ''; 

    if(tabId == '#tab1') {
        ctUrl = 'url to get tab 1 content';
    } else if(tabId == '#tab2') {
        ctUrl = 'url to get tab 2 content';
    } else if(tabId == '#tab3') {
        ctUrl = 'url to get tab 3 content';
    }

    if(ctUrl != '') {
        $.ajax({
            url      : ctUrl,
            type     : 'POST',
            dataType : 'html',
            cache    : false,
            success  : function(html)
            {
                jQuery(tabId).html(html);
            },
            error:function(){
                    alert('Request failed');
            }
        });
    }

    preventDefault();
    return false;
} 
```

这里我们得到目标，应该是我们点击的标签的锚元素，得到href值，应该是我们配置的id。根据这个 id 决定 url，加载内容并更新 div。div 的 id 与 href 相同。

**我还没有找到加载初始活动选项卡内容的方法，应该有方法触发 loadContent 函数，现在我使用 renderPartial 来获取内容**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T11:14:38.843

它是加载内容的新版本

```
function loadContent(e){
var targetUrl = e.target.getAttribute('data-tab-url');
var contentID = e.target.getAttribute('href');
$(contentID).load(targetUrl, function(){
    $('.tabs').tabs(); //reinitialize tabs
});
e.preventDefault();
return false;} 
```

# mysql - 删除第二个表中的行

> ID：13442543
> 
> 赞同：2
> 
> 时间：2012-11-18T17:22:20.940
> 
> 标签：mysql, sql

我想知道是否有人可以帮助我 我有两个表 1）个人资料 2）邮箱对话 每个表都有一个名为 profile_id 的公共列

我想在个人资料表中找到所有成员 ID = 107 的成员（即获取成员类型为 107 的成员子集，他们将按 profile_id 列在数组中）然后使用该成员子集，找到所有表mailbox_conversation 中的对话在子集中具有profile_id - 因此许多电子邮件可能具有相同的profile_id，我希望将它们全部删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:36:16.313

查找与 members_id = 107 的个人资料对应的电子邮件

```
select m.id
from mailbox_conversation m
join profile p on p.profile_id = m.profile_id
                  and p.membership_id = 107 
```

删除那些记录

```
delete from mailbox_conversation
using mailbox_conversation, profile
where profile.profile_id = mailbox_conversation.profile_id
      and profile.membership_id = 107; 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!2/82a55/1/0)用于玩耍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:32:21.357

尝试这个

```
select t1.profile_id from mailbox_conversation t1 where t1.profile_id in 
(select t2.profile_id from profile t2 where t2.membership_id = 107 ) 
```

# haskell - 为什么 2 元组 Functor 实例只将函数应用于第二个元素？

> ID：13442544
> 
> 赞同：41
> 
> 时间：2012-11-18T17:22:20.860
> 
> 标签：haskell, tuples, functor

```
import Control.Applicative

main = print $ fmap (*2) (1,2) 
```

产生`(1,4)`. 我希望它能够产生`(2,4)`，但该函数仅应用于元组的第二个元素。

**更新**我基本上马上就明白了这一点。我会在一分钟内发布我自己的答案..

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-18T17:59:20.623

让我用一个问题来回答这个问题：您期望哪个输出：

```
main = print $ fmap (*2) ("funny",2) 
```

你*可以*拥有任何你想要的东西（使用`data Pair a = Pair a a`或左右），但由于`(,)`它们的第一个和第二个参数中可能有不同的类型，你不走运。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-01-05T04:38:31.030

对基本上是这样定义的：

```
data (,) a b = (,) a b 
```

该类`Functor`如下所示：

```
class Functor f where
  fmap :: (a -> b) -> f a -> f b 
```

由于函数参数和结果的类型必须有类型`*`（即它们表示值而不是类型函数，可以应用更远或更奇异的东西），我们必须有`a :: *`, `b :: *`，并且，对于我们的目的而言，最重要的是，`f :: * -> *`。既然`(,)`has kind `* -> * -> *`，就必须将它应用到 kind 的一个类型上，`*`才能得到一个适合作为 a 的类型`Functor`。因此

```
instance Functor ((,) x) where
  -- fmap :: (a -> b) -> (x,a) -> (x,b) 
```

所以实际上没有办法编写一个`Functor`实例来做任何其他事情。

* * *

一个有用的类提供了更多使用对的方法`Bifunctor`，来自`Data.Bifunctor`.

```
class Bifunctor f where
  bimap :: (a -> b) -> (c -> d) -> f a c -> f b d
  bimap f g = first f . second g

  first :: (a -> b) -> f a y -> f b y
  first f = bimap f id

  second :: (c -> d) -> f x c -> f x d
  second g = bimap id g 
```

这使您可以编写如下内容（来自`Data.Bifunctor.Join`）：

```
 newtype Join p a =
    Join { runJoin :: p a a }

  instance Bifunctor p => Functor (Join p) where
    fmap f = Join . bimap f f . runJoin 
```

`Join (,)`则本质上与 相同`Pair`，其中

```
data Pair a = Pair a a 
```

当然，您也可以直接使用`Bifunctor`实例来处理对。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-18T17:35:50.600

该`Functor`实例实际上来自[GHC.Base](https://hackage.haskell.org/package/base-4.8.1.0/docs/src/GHC.Base.html#line-625)模块，该模块由`Control.Applicative`.

尝试编写我想要的实例，我可以看到它不会工作，给定元组的定义；该实例只需要一个类型参数，而 2 元组有两个。

一个有效的`Functor`实例至少必须在元组上，`(a,a)`每个元素都具有相同的类型，但你不能做任何偷偷摸摸的事情，比如在以下位置定义实例：

```
 type T2 a = (a,a) 
```

因为不允许实例类型是同义词。

上述受限的 2 元组同义词在逻辑上与类型相同：

```
data T2 a = T2 a a 
```

它*可以*有一个 Functor 实例：

```
instance Functor T2 where
    fmap f (T2 x y) = T2 (f x) (f y) 
```

正如 Gabriel 在评论中所说，这对于分支结构或并发很有用。

# javascript - 将外部 JavaScript 库添加到 Eclipse 项目？

> ID：13442547
> 
> 赞同：4
> 
> 时间：2012-11-18T17:22:28.367
> 
> 标签：javascript, eclipse, tomcat6, d3.js

在将外部 JavaScript 库添加到 Eclipse 项目时，我应该添加 .js 文件 (d3.v2.js)，还是从 Github 提取的 tarballed master？

谷歌告诉我谷歌它。随后的谷歌提醒我需要谷歌它。

* * *

目录树：

```
.
 |-build
 |---classes
 |-src
 |-WebContent
 |---foo.html
 |---META-INF
 |---WEB-INF
 |-----lib
 |---d3
 |-----d3.v2.js 
```

从 foo.html 到 d3.v2.js 的相对路径应该是：**“../d3/d3.v2.js”**

*   但是，也许不是。我不知道。
*   每当我从 foo.html 引用 d3.v2.js 时，什么都没有发生。什么都没有发生，我的意思是浏览器中没有任何视觉上出现，这表明 d3.js 甚至存在。

* * *

要将 d3.v2.js “添加”到 Eclipse，我采取了以下步骤：

1.  Foo -> 新建 -> JavaScript 源文件 -> 高级 -> 链接到文件系统中的文件 -> /home/tyler/workspace/foo/d3/d3.v2.js

2.  尝试了5种不同的路径。他们都没有工作（你必须使用相对的，绝对的？）

    *   src="/home/tyler/workspace/Foo/d3/d3.v2.js"
    *   src="../d3/d3.v2.js"
    *   src="/Foo/d3/d3.v2.js"
    *   src="d3.v2.js"
3.  因此，我删除了 Eclipse 中对 d3.v2.js 的引用，并尝试将其添加为库。

4.  Foo -> JavaScript 资源 -> 添加 JavaScript 库 -> 用户库 - 配置用户库 -> 新建 -> “D3” -> 添加 .js 文件 -> d3.v2.js（位置：/home/tyler/workspace/Snotra /d3

5.  尝试了一堆路径。

    *   src="d3.v2.js"
    *   src="../d3/d3.v2.js"
    *   src="/Foo/d3/d3.v2.js"

        1.  冲洗，重复。

有任何想法吗？我知道这很容易，但我只是不了解将 JavaScript 库添加到 Eclipse 的基础知识。

foo.html

```
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html" charset="utf-8" />
            <title>Tyler J. Fisher</title>
            <link rel="stylesheet" href="master.css" />
        <script type="text/javascript" src="../d3/d3.v2.js"></script>
    </head>

    <body>
         <section id="foo_view">
            <script type="text/javascript">
                            document.write("test"); <!--Works-->
                var dataset[1,2,3,4,5];
                d3.select("body").selectAll("p") <!--Doesn't work-->
                    .data(dataset)
                    .enter()
                    .append("p")
                    .text("RABBLE");
        </script>
     </section>
    </body>
</html> 
```

document.write("test"); 作品。

d3.js 代码没有。

所以（也许）：

*   相对路径必须关闭（或者我可能必须使用绝对路径）
*   Tomcat6 未正确提供 JavaScript（由于人为错误）
*   Eclipse 未正确提供 JavaScript（由于人为错误）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T17:30:27.190

Eclipse 部署到 Tomcat 的是里面的内容`WebContent`。如果您的 JS 文件不在 WebContent 中，它们将不会成为已部署 Web 应用程序的一部分。

您需要了解 Eclipse 向您展示的是您的开发、源文件夹。部署的不是这个文件夹，而是一个符合 Java EE 规范的目录结构：

*   WebContent 中的所有内容都是已部署存档的一部分
*   Java 源文件被编译并存储在已部署存档的 WEB-INF/classes 中
*   将源目录下的非 Java 文件复制到已部署存档的 WEB-INF/classes
*   所有其他文件都不是已部署存档的一部分。

# c++ - 使用监视器和信号量练习的工具

> ID：13442551
> 
> 赞同：2
> 
> 时间：2012-11-18T17:22:44.673
> 
> 标签：c++, c, concurrency, semaphore, monitor

我是操作系统课程的学生，我想用信号量和监视器做练习。记住我最喜欢的编程语言是 C/C++，是否有一个很好的库来完成我的工作，其中包括监视器和信号量结构？

# php - 多维数组中未定义的索引

> ID：13442552
> 
> 赞同：3
> 
> 时间：2012-11-18T17:22:45.243
> 
> 标签：php, arrays, multidimensional-array

我正在使用亚马逊产品 API。

```
$ItemAttr = $Item['ItemAttributes']; 
```

现在`$ItemAttr`包含一个多维数组。

```
if(is_array($ItemAttr["Author"])){$Author = implode(", ", $ItemAttr["Author"]);
}else{
$Author = $ItemAttr["Author"];} 
```

现在，当我使用上面的代码时，我得到了`Undefined index: Author in line 1 and line 3`

我试过这样

```
if(isset($ItemAttr["Author"])) {
if(is_array($ItemAttr["Author"])){$Author = implode(", ", $ItemAttr["Author"]);
}else{
$Author = $ItemAttr["Author"];}
} 
```

它消除了该错误。

但后来，当我使用这样的代码时，`$RetVal = array( 'Author' => $Author);`我得到了`Undefined variable : Author`错误

谁能告诉我正确的方法？

请注意：`$Item['ItemAttributes'];`可能包含也可能不包含`Author`密钥。我的意思是如果返回的产品是一本书，该数组将返回作者密钥。否则不会..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:26:24.937

`$Author`初始化顶部的空变量？

```
$Author = ""; //initialize here

if(isset($ItemAttr["Author"])) 
{
    if(is_array($ItemAttr["Author"]))
    {
        $Author = implode(", ", $ItemAttr["Author"]);
    }
    else
    {
        $Author = $ItemAttr["Author"];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:33:30.973

我上个月才实现了亚马逊图书 api，我记得这个完全相同的问题。你真幸运，因为我从来没有让我帮忙:(

亚马逊很烦人，因为他们返回的结构没有一致性（好吧，除了下面的内容，但这让人很烦人）：

*   如果一件物品被退回，它就是一个 OBJECT
*   如果返回多个项目，则为 ARRAY
*   如果什么都不返回，则根本不存在

我个人认为他们至少应该使用空数组，并坚持使用数组。您始终可以将对象添加到数组 >< 但至少结构是一致的。

我解决它的方法是创建一个返回结构的新表示，它保证一切都是一个数组并且整个结构是预定义的。这样我以后可以访问数据，知道 100% 它不会给我错误，比如它不存在或者当它是一个数组时作为一个对象被访问。

首先，创建您想要的结构，例如：

$structure = array('isbn' => '', 'authors' => array(), 'pictures' => array(), 'title' => '' );

然后创建一个函数或对象方法（取决于您的样式）来使用返回的亚马逊数据并找到它可以将其插入到您的自定义结构中。

请记住首先检查它是否存在，然后检查它是数组还是对象，以便您知道如何访问它。它有助于打印出一些亚马逊返回的结果以及一些不同的书籍。

然后，要访问有关这本书的详细信息，您可以依赖 $structure 中的数据；）一切都是数组，并且一切都保证存在，这样做：

foreach ($structure['authors']...

不会产生它不是数组、不存在或实际上是对象的错误！！！

这种伪代码将是：

```
$returned_amazon_data = get_amazon_data('http://amazon.com/api/book=1234567');
$book = consume_amazon_result($returned_amazon_data);
if ($book) {
//print out the authors, if no authors were found, will just stay blank as it's GUARANTEED to always be an array of strings
print implode($book['authors']);
} 
```

玩得开心！我知道我做了（nt）...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:25:46.783

您可以组合您的两个条件语句，以及预定义`$Author`：

```
$Author = '';
if(isset($ItemAttr["Author"]) && is_array($ItemAttr["Author"])){
    $Author = implode(", ", $ItemAttr["Author"]);
}elseif(isset($ItemAttr["Author"])){
    $Author = $ItemAttr["Author"];
} 
```

这应该消除这两个错误。

# arrays - AS3 - 数组对象仍在更新？

> ID：13442554
> 
> 赞同：0
> 
> 时间：2012-11-18T17:22:53.373
> 
> 标签：arrays, actionscript-3, class, actionscript, symbols

所以在我的游戏中，我使用了一系列敌人来跟踪它们并更新它们等等 - 当玩家撞到敌人时，它的游戏然而，但是如果玩家射击击中敌人的子弹，则敌人被删除. 那么这应该是发生了什么但是当子弹它的敌人它删除它但由于某种原因该对象仍在更新并且仍然可以撞到玩家？

我该如何阻止这个？

这是我在激光类中用于检查碰撞的代码

```
private function loop(e:Event) : void
{
    //move bullet up
    y -= bulletSpeed;

    if (y < 0)
    {
        removeSelf();
    }

    for (var i:int = 0; i < AvoiderGame.enemyArray.length; i++)
    {
        if (hitTestObject(AvoiderGame.enemyArray[i]))
        {
            AvoiderGame.enemyArray[i].takeHit();
            removeSelf();
        }
    }
} 
```

这是我在敌人类中的所有代码。

```
package 
{

import flash.display.MovieClip;
import flash.display.Stage;

public class Enemy extends MovieClip
{
    private var stageRef:Stage;

    public function Enemy(startX:Number, startY:Number, stageRef:Stage)
    {
        this.stageRef = stageRef;
        x = startX;
        y = startY;
    }       
    public function moveDown():void
    {
        y = y + (1 + (10 - 1) * Math.random());
        switch(Math.round(1 + (2 - 1) * Math.random()))
        {
            case 1: x = x + (1 + (10 - 1) * Math.random());
                    break;
            case 2: x = x - (1 + (10 - 1) * Math.random());
                    break;
        };
    }

    public function StayOnScreen():void
    {
        if  (x <= 0)
        {
            x = 0;
        }
        else if (x >= stageRef.stageWidth)
        {
            x = stageRef.stageWidth;
        }
        else
        {
            x = x;
        }
    }

    private function removeSelf() : void
    {
        if (stageRef.contains(this))
        {
            this.parent.removeChild(this);
            delete AvoiderGame.enemyArray[this];
        }

    }

    public function takeHit() : void
    {
        removeSelf();
    }
    }
} 
```

这是我在主游戏中的所有代码。

```
package
{
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.events.TimerEvent;
import com.freeactionscript.CollisionTest;
import flash.display.Stage;
import flashx.textLayout.formats.BackgroundColor;

public class AvoiderGame extends MovieClip
{
    public static var enemyArray:Array;
    public var enemy:Enemy
    public var Background:gameBackground;

    public var avatar:Avatar;
    public var gameTimer:Timer;

    private var _collisionTest:CollisionTest;
    private var numStars:int = 80;

    private var fireTimer:Timer; //causes delay between fires
    private var canFire:Boolean = true; //can you fire a laser

    public function AvoiderGame()
    {
        Background = new gameBackground();
        addChild(Background);

        enemyArray = new Array();
        var enemy = new Enemy(Math.round(1 + (500 - 1) * Math.random()), - 2, stage);
        enemyArray.push(enemy);
        addChild(enemy);

        avatar = new Avatar(stage);
        addChild(avatar);

        avatar.x = stage.stageWidth / 2;
        avatar.y = stage.stageHeight / 2;

        for (var i:int = 0; i < numStars; i++)
        {
            stage.addChildAt(new Star(stage), 1);
        }

        _collisionTest = new CollisionTest();

        gameTimer = new Timer(25);
        gameTimer.addEventListener(TimerEvent.TIMER, onTick);
        gameTimer.start();

        fireTimer = new Timer(300, 1);
        fireTimer.addEventListener(TimerEvent.TIMER, fireTimerHandler, false, 0, true);
        fireTimer.start();

    }

    public function onTick(timerEvent:TimerEvent):void 
    {
        if (Math.random() < 0.1)
        {
            var enemy = new Enemy(Math.round(1 + (500 - 1) * Math.random()), - 28, stage);
            enemyArray.push(enemy);
            addChild(enemy);
        }

        avatar.UpdateAvatar(canFire);
        if (canFire == true)
        {
            canFire = false;
            fireTimer.start();
        }
        avatar.StayOnScreen();

        for each (var enemy:Enemy in enemyArray)
        {
            enemy.moveDown();
            enemy.StayOnScreen();
            if (_collisionTest.complex(enemy, avatar)) 
            {
                gameTimer.stop();
            }
        }
    }
    private function fireTimerHandler(e:TimerEvent) : void
    {
        //timer ran, we can fire again.
        canFire = true;
    }
} 
```

我知道我可能在使用 removeSelf() 函数的敌人类中出错了，但我将如何解决这个问题？

如果你不想要我的意思是 - 在我的网站上有一个这个游戏的可玩示例，使用空间射击会摧毁敌人，但它仍然会在游戏中？

[http://dynamite-andy.co.uk/projects/free-time/as3-avoider-game/](http://dynamite-andy.co.uk/projects/free-time/as3-avoider-game/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:36:19.147

问题似乎与`removeSelf()`方法中的这一行有关：

```
delete AvoiderGame.enemyArray[this]; 
```

要从中删除某些内容，`Array`您必须使用修改数组而不是关键字的[Array 类方法。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#methodSummary)`delete`

**[编辑]** 在这种情况下，您可以使用[splice()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)从数组中删除敌人：

```
var enemyIndex:int = this.parent.getChildIndex(this);
this.parent.removeChild(this);
AvoiderGame.enemyArray.splice(enemyIndex, 1); 
```

# javascript - page.xml 中的 Magento skin_js 路径

> ID：13442555
> 
> 赞同：9
> 
> 时间：2012-11-18T17:22:54.383
> 
> 标签：javascript, xml, magento, path

我试图通过它的 page.xml 添加一个带有自定义模板的 javascript，如下所示：

```
<action method="addItem"><type>skin_js</type><name>myjs.js#notify</name></action> 
```

通知将抛出一个警告窗口，以便我可以在重新加载后检查它是否正确。此外，我检查源代码以查看它试图去哪里。模板已正确设置，缓存已刷新。

使用上面的脚本，它转到：

```
<script type="text/javascript" src="http://127.0.0.1/magento/skin/frontend/base/default/myjs.js#notify"></script> 
```

这里不存在。

脚本位于 skin/frontend/default/blank2/js/live.js

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-18T17:26:46.223

尝试更改（假设 myjs.js 在 skin/frontend/default/blank2/js/myjs.js 中）

```
<action method="addItem"><type>skin_js</type><name>myjs.js#notify</name></action> 
```

至

```
<action method="addItem"><type>skin_js</type><name>js/myjs.js#notify</name></action> 
```

因为在您的主题中找不到 myjs.js，所以它会尝试在基本主题文件夹中查找它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T18:18:29.677

It means that it cannot find the js in your theme nor the default folder.

Change to:

```
 <action method="addItem"><type>skin_js</type><name>js/myjs.js#notify</name></action> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T18:31:34.243

如果该文件不存在于您的自定义主题路径中，则**skin_js**将返回基本主题文件夹路径。因此，请确保您的文件存在于您的自定义路径中并提供正确的路径。

# html - 在没有服务器的情况下重用导航

> ID：13442558
> 
> 赞同：0
> 
> 时间：2012-11-18T17:23:12.067
> 
> 标签：html

我正在开发我的第一个网站，它在我的电脑上，我不打算把它放到互联网上。但是，我想在其他页面上重用导航和页脚。

没有 php。没有框架。Javascript？反正有使用HTML吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T03:28:15.873

[谦虚](https://github.com/goalzen/modest)会这样做。

如果你不把它放到网上特别容易，只要把jquery和[moderate-preview.js](https://raw.github.com/goalzen/modest/master/lib/modest-preview.js)放在这个部分，你就可以马上开始使用它了：

**main.xhtml**

```
<?xml version='1.0' encoding='UTF-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="modest-preview.js"></script>
    <include>myNav</include>
  </head>
  <body>
    <myNav/>
  </body>
</html> 
```

**myNav.xml** [HTML](/html/) | [CSS](/css/) | [JavaScript](/js/) | [jQuery](/jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T06:47:01.803

我知道有点老了，但我找到了实现这一目标的方法。

您可以使用 ajax 将部分代码加载到您的 html 中，并保留页面的其余部分而不进行更改，以便使用相同的导航。

代码：

假设我在这个文件中有这个代码：

> 主页.html

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="thirdParty/bootstrap-3.3.6-dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/site.css" rel="stylesheet" />
</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-header">
            <a class="navbar-brand" href="#/">NAVBAR</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class=" active">
                    <a href="#/">Home</a>
                </li>
                <li>
                    <a href="#/about">About</a>
                </li>
                <li>
                    <a href="#about">Rebout</a>
                </li>
            </ul>
        </div>
    </nav>
    <main id="main">
    </main>
    <script src="thirdParty/jquery-1.12.0.min.js"></script>
    <script src="thirdParty/jquery.ba-hashchange.min.js"></script>
    <script src="js/partialViewLoad.js"></script>
    <script src="thirdParty/bootstrap-3.3.6-dist/js/bootstrap.min.js"></script>
</body>
</html>
```

我将有另外两个文件用作 html 部分视图：“partialViews/main.html”和“partialViews/about.html”。（将一些 html 放入这些文件中）

我使用插件 jquery.ba-hashchange.min 来刷新 html。

至少我有用于加载部分视图的脚本：

> loadPartialView.js

```
$(function () {
    $(window).hashchange(function () {
        if (location.hash.indexOf('#/') > -1) {
            loadPartial(location.hash.substr(location.hash.lastIndexOf('/') + 1));
        }
    });
    $(window).hashchange();
});

function loadPartial(partialName) {
    partialName = partialName || 'main';
    $.get('/partialViews/' + partialName + '.html').done(function (html) {
        $('#main').html(html);
    });
}

$(document).ready(function() { loadPartial(); });
```

当您单击 ul 中的链接时，哈希位置将发生变化，这将触发我们创建的 jquery 回调。在那一刻，我们加载了部分视图。

我建议您使用服务器和更强大的语言来完成此操作。但是这个解决方案可以工作，很容易实现，甚至可以在服务器上工作。

# c - 如何将变量传递给另一个函数？

> ID：13442561
> 
> 赞同：-6
> 
> 时间：2012-11-18T17:23:36.290
> 
> 标签：c, function, variables

我不确定如何将变量从 main() 传递给另一个函数。我有这样的事情：

```
main()
{
  float a, b, c;

  printf("Enter the values of 'a','b' and 'c':");
  scanf("%f %f %f",&a,&b,&c);
}

double my_function(float a,float b,float c)
{
  double d;

      d=a+b+c
      bla bla bla bla 
```

如何将 a、b 和 c 从 main 传递到 my_function？现在程序在 scanf() 上停止，并在我输入值后立即完成。

我在这里看到了不同的例子，但它们对我没有多大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T17:26:15.110

只需通过传递参数`a`、`b`和来调用函数`c`。句法：

```
retval = function_name(parameter1,parameter2,parameter3); //pass parameters as required 
```

像这样：

```
int main(void)
{
    float a, b, c;
    double d;

    printf("Enter the values of 'a','b' and 'c': ");
    if (scanf("%f %f %f",&a,&b,&c) == 3)
    {
        d = my_function(a, b, c);
        printf("Result: %f\n", d);
    }
    else
        printf("Oops: I didn't understand what you typed\n");      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:24:38.650

函数调用。

```
my_function(a, b, c); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T17:30:00.107

您必须从 main 调用该函数！

```
float my_function(float a,float b,float c)
{
  float d;

  d=a+b+c;
  return d ;
}

int main()
{
  float a, b, c;
  float result ;

  printf("Enter the values of 'a','b' and 'c':");
  scanf("%f %f %f",&a,&b,&c);

  result = my_function(a,b,c);
  printf("\nResult is %f", result );    

  return 0;
} 
```

# php - 图像更新脚本额外功能

> ID：13442566
> 
> 赞同：0
> 
> 时间：2012-11-18T17:24:16.400
> 
> 标签：php, submit, avatar

所以我编写了一个脚本来将用户头像上传到服务器并在数据库中更改 url（感谢 YT 教程:)）现在我希望进行文件检查，以确保用户不会上传除 JPG、JPEG、PNG 以外的其他文件, GIF 和大于 10MB 的。我想做的第二件事是，当用户上传他的头像时，它会删除旧头像并将文件名更改为随机数字..

所以现在我有点卡住了，不知道从哪里开始，有人可以帮忙吗？:) 我在谷歌上找不到一个有用的教程，它尽可能简单地适合这个代码..

到目前为止我写的代码；

```
if (isset($_POST['submit'])) {
$name = $_FILES['myfile']['name'];
$tmp_name = $_FILES['myfile']['tmp_name'];
$allowedExts = array("jpg", "jpeg", "gif", "png");

if ($name) {
    $location = "uploads/avatars/$name";
    move_uploaded_file($tmp_name, $location);

    $query = mysql_query("UPDATE users SET avatar = '$name' WHERE id = '$session_user_id'");
    echo 'Your avatar has been changed sucessfully!';
}else {
echo 'Please select a file! Following are supported; JPG, JPEG, PNG, GIF!';} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:29:29.860

您应该检查 $_FILE 关联数组的“类型”和“大小”字段，以验证您收到的文件类型（在您的情况下为图像）和文件的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:29:49.483

# 文件大小

## 全局限制

您可以在以下位置全局限制文件大小`php.ini`：

```
upload_max_filesize = 10M 
```

## 本地限制

或者，您可以执行以下操作：

```
const('IMG_MAX_SIZE', 10485760); // 10 MB

if ($_FILES['file']['size'] > IMG_MAX_SIZE) {
    // display error message then exit
}
// save image 
```

# 文件类型

## 检查扩展名不是一个好主意

您可以检查扩展名，但这并不意味着该文件确实是它所指示的类型。它可以是重命名为 的视频`.png`。

## 检查客户端报告的 mime 类型

要确定真实类型，请检查客户端返回的 mime 类型：

```
$allowed_types = array('image/png', 'image/jpeg', 'image/gif');
if (!in_array($_FILES['file']['type'], $allowed_types)) {
    // display error message (invalid file type) then exit
} 
```

## 保存后确定真实的mime类型

如果您想确保文件的类型正确（客户端可以报告它想要的任何类型，以便恶意用户可以欺骗您的脚本），请在使用 Fileinfo 保存文件后检查它：

[http://php.net/manual/en/function.finfo-file.php](http://php.net/manual/en/function.finfo-file.php)

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime_type = finfo_file($finfo, $filename) . "\n";
finfo_close($finfo);

if (!in_array($_FILES['file']['type'], $allowed_types)) {
    // display error message (invalid file type) then exit
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:32:31.963

看起来你已经成功了一半。只需根据`$allowedExtensions`数组检查文件扩展名。

```
<?php
    if (isset($_POST['submit'])) {
    $name = $_FILES['myfile']['name'];
    $tmp_name = $_FILES['myfile']['tmp_name'];
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $isValidFormat = in_array(end(explode(".", strtolower($file['name']))), $allowedExtensions);
    $fileSize = $_FILES['myfile']['size'];
    $maxFileSize = 10485760; // == 10M
        if ($isValidFormat && $fileSize < 10485760) { // Changed the if statement
            if($_FILES['myfile']['file_size'])

            $location = "uploads/avatars/$name";
            move_uploaded_file($tmp_name, $location);

            $query = mysql_query("UPDATE users SET avatar = '$name' WHERE id = '$session_user_id'");
            echo 'Your avatar has been changed sucessfully!';
        }else {
            echo 'Please select a file! Following are supported; JPG, JPEG, PNG, GIF!';
        }
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:40:28.437

```
if($_FILES){
    $allowedExtensions = array("jpg", "jpeg", "gif", "png");
    $f = $_FILES;

    foreach($f as $key=>$val){
        if(!empty($val['tmp_name'])){
            $ext = end(explode(".",strtolower(basename($val['name']))));

            if($val['size'] > 10485760){ // handle size
                echo 'Image is too large';
            }elseif(!in_array($ext,$allowedExtensions)){ // handle extension
                echo 'Please select a file! Following are supported; JPG, JPEG, PNG, GIF!';
            }else{
                $val['name'] = 'YOUR_RANDOM_FILE_NAME'.$ext;
                $location = "uploads/avatars/".basename($val['name']);

                if(move_uploaded_file($val['tmp_name'],$location)){ //handle upload

                    $query = mysql_query("UPDATE users SET avatar = '".$val['name']."' WHERE id = '$session_user_id'");
                    echo 'Your avatar has been changed sucessfully!';

                }else{
                    echo 'An error occured on upload.';
                }
            }
        }
    }
} 
```

# java - 基于两列的Java排序 - 没有比较器

> ID：13442567
> 
> 赞同：0
> 
> 时间：2012-11-18T17:24:36.680
> 
> 标签：java, algorithm, sorting, compare, comparator

这是问题：

[基于两列的Java排序](https://stackoverflow.com/questions/6878050/java-sort-based-on-two-columns)

但是，任何人都可以解释如何在不使用 Comparator 的情况下进行操作吗？换句话说，比较器如何在内部工作以对多列进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:46:52.700

sort 方法必须有某种方法来找出行对的相对顺序。使用普通排序有两种支持的方法。要么使用实现 Comparable 的类的实例来表示行，要么使用 Comparator。

如果您不想这样做，则必须编写自己的专用排序方法。当它需要比较两行时，它会首先查看优先级较高的列。如果该列中的行不同，则会给出顺序。如果它们在该列中相等，则根据第二列对它们进行排序。

也就是说，使用具有 Comparable 行或 Comparator 的标准排序比混合排序逻辑和比较逻辑要好得多。比较器是更灵活的方式。

# actionscript-3 - Actionscript 3 - 如何将当前影片剪辑/根位置包含到 this.currentFrame？

> ID：13442568
> 
> 赞同：0
> 
> 时间：2012-11-18T17:24:36.493
> 
> 标签：actionscript-3, actionscript, shared-objects

我正在尝试使用共享对象来保存进度，我已经弄清楚了它们是如何工作的，但是现在我应该尝试弄清楚如何使我的“保存进度”按钮不仅记住“this.currentFrame”，而且还如果这是在主时间轴上，或者不是，那么这是在哪个影片剪辑中，以便当我上传共享对象时，它会转到正确的位置，在主时间轴或影片剪辑中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:45:55.933

我有一种感觉 SharedObjects 可能无法保存实际的影片剪辑引用并能够可靠地恢复它们（如果我错了，请纠正我），但是您可以只将具有键数据对的对象存储在 SharedObject 中，而不仅仅是单独的帧号。或者，如果您要记住未知数量的帧号（和影片剪辑），请存储一组键数据对对象，并在加载时循环它们。

存储每个剪辑数据的方法示例：

```
var someClip:Object = new Object();

// some id that refers to the clip (maybe an array/dictionary index)
// (or try replacing with the actual reference to the movie clip to see if it works)
someClip.id ="clipName";
someClip.frameNumber = 1; // the frame number of the clip to remember 
```

然后只需将“someClip”对象存储到 SharedObject 数据中的数组中。

也许更“紧凑的方式”是取消临时对象并将键数据对存储为带有分隔符的字符串。例如，您可以只存储字符串“clipName,1”，然后在需要加载时，沿逗号拆分以获取剪辑 id 并将帧号解析回一个 int。

或者我猜你也可以将帧号存储在剪辑 id 索引的字典中，并将其存储在 SharedObject 数据中（因为它可以节省加载时的 int 解析步骤）。

# wordpress - 如何在 microsoft azure cloud 中备份 wordpress 的 sql 文件？

> ID：13442571
> 
> 赞同：2
> 
> 时间：2012-11-18T17:25:11.720
> 
> 标签：wordpress, azure, azure-sql-database, cloud-hosting, database-backups

我使用来自 new -> website >gallery 的图像在 Microsoft azure 中安装了一个 wordpress 博客

这很容易，但现在我想备份我的 .sql 文件的 word press 我看不到任何 phpadmin 访问权限，当我使用它从画廊安装时自动创建数据库，当我导航到门户中的 sql 数据库时，我不能找到任何数据库，我的网站运行良好，这是怎么回事？

如何访问数据库并下载备份？

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:39:40.820

我对 WordPress 不太熟悉，但我的经验告诉我，[这将是备份 WordPress 数据库的最佳可靠选择](http://wordpress.org/extend/plugins/wordpress-sql-backup/)。

至于 phpMyAdmin 和其他东西 - 您始终可以[使用 FTP](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/windows-azure-website-uploading-downloading-files-over-ftp-and-collecting-diagnostics-logs.aspx)连接到您的 Azure 网站。一旦连接到您选择的 FTP 客户端，您就可以对内容做任何您想做的事情（请理解 - 您可以上传您的 phpmyadmin 版本并让它在那里为您运行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:39:20.417

您始终可以使用 Azure 管理中网站仪表板上提供的连接字符串（“查看连接字符串”）访问 MySQL 数据库。然后，您可以使用 MySQL Workbench 之类的程序（甚至可能是本地计算机上的 phpMyAdmin）来访问数据库。

从 MySQL Workbench 备份既快速又简单，请参阅[使用 MySQL Workbench 进行 MySQL 数据库备份](http://community.discountasp.net/showthread.php?t=11972)。记住还要备份文件。

# python - 如何确定 sys.stdin 是从文件重定向还是从另一个进程通过管道传输？

> ID：13442574
> 
> 赞同：24
> 
> 时间：2012-11-18T17:25:18.120
> 
> 标签：python, stdin, io-redirection

在一个旨在从 shell 运行的简单 Python 脚本中，我能否可靠地确定 sys.stdin 是否已从实际文件重定向，还是从另一个进程通过管道传输？

我想根据标准输入是来自数据文件还是来自另一个进程通过管道流式传输来更改运行时行为。

正如预期的那样，**`isatty()`**在这两种情况下都返回 False。这是一个快速`isatty()`测试：

```
# test.py
import os
import sys
print sys.stdin.isatty()
print os.isatty(sys.stdin.fileno()) 
```

测试：

```
python test.py < file.txt 
```

产生：

```
False
False 
```

和：

```
ls -al | python test.py 
```

产生：

```
False
False 
```

有没有这样做的pythonic方法？

Unix/Linux 特定的很好，但很高兴知道是否可以以可移植的方式执行此操作。

**编辑：**回应评论者的注意事项：我为什么要关心？好吧，就我而言，我想处理从另一个进程通过管道传输时以不规则间隔传入的带时间戳的数据；当我从文件回放预先录制的数据时，我想使用固定或可变延迟来回放它。

我同意使用更简洁的方法可能是有利的（我可以想到几种方法，包括在播放流中插入延迟的中间脚本），但我非常*好奇*。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-18T18:55:08.987

您正在寻找[`stat`](http://docs.python.org/library/stat.html#module-stat)宏：

```
import os, stat

mode = os.fstat(0).st_mode
if stat.S_ISFIFO(mode):
     print "stdin is piped"
elif stat.S_ISREG(mode):
     print "stdin is redirected"
else:
     print "stdin is terminal" 
```

# objective-c - 在视图控制器之间传递矩阵

> ID：13442576
> 
> 赞同：0
> 
> 时间：2012-11-18T17:25:24.717
> 
> 标签：objective-c

我试图在视图控制器之间传递一个矩阵。我终于弄清楚了如何传递 Objective-C 对象，但矩阵不是 Objective-C 而是 C。我尝试使用外部变量来传递它，但随后它要求矩阵边界。有什么方法可以传递矩阵，甚至更好，有没有 Objective-C 版本的矩阵？

ViewController1.m

```
extern NSInteger matrix[yMapLength][xMapLength] =
{{0,0,1,1,2,2,1,1,0,2,4,4,4},
{0,1,1,2,3,2,1,1,4,4,3,4,4},
{1,1,2,3,3,2,1,4,1,3,3,4,4},
{1,1,3,3,3,2,4,1,1,1,4,4,4},
{0,1,1,2,2,2,4,4,4,4,4,4,4},
{0,0,1,1,2,2,1,0,0,2,3,4,4},
{4,4,1,1,2,2,1,1,0,1,1,4,4},
{0,4,1,2,2,2,1,1,0,4,4,4,4},
{0,1,2,2,2,2,1,1,0,1,2,4,4},
{0,0,1,2,2,2,1,0,0,0,4,4,4}}; 
```

视图控制器2.m

```
extern NSInteger matrix[][]; 
```

错误：“数组具有不完整的元素类型 NSInteger[]”

或者我做

视图控制器2.m

```
extern NSInteger matrix; 
```

那么它不会将矩阵识别为矩阵，而是将其识别为 NSInteger。

# android - android 4.2 中的 OnDraw 错误

> ID：13442579
> 
> 赞同：0
> 
> 时间：2012-11-18T17:25:30.953
> 
> 标签：android, view, ondraw

我已经下载了 4.2 图像进行测试，我对一件事感到惊讶。我的应用程序中有一个由 ImageView 的祖先填充的 Horizo​​ntalScrollView。我依赖于这样一个事实，即仅当视图对用户显式可见时才会调用这些 ImageViews 中的 onDraw。但是我在 4.2 中观察到的是 onDraw 只是在将视图添加到 Horizo​​ntalScrollView 的那一刻被调用。这是一种假定的行为吗？还是我错过了什么？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:02:10.333

通常`onDraw`在视图已膨胀并在其测量后调用。

我永远不会认为这`onDraw`意味着该视图对用户可见。甚至`onDisplayHint`不能保证视图是可见的。

还值得注意的是`onDraw`可以多次调用，因为其他视图移动或`View`层次结构是`invalidated()`.

希望有帮助吗？

如果没有很好的通读 -[自定义视图](http://developer.android.com/training/custom-views/create-view.html)

# vb.net - 新的 WebProxy 从列表框 VB.net 中读取

> ID：13442580
> 
> 赞同：2
> 
> 时间：2012-11-18T17:25:32.330
> 
> 标签：vb.net, proxy, httpwebrequest, webproxy

我正在使用 http web 请求并希望它使用不同的代理。

这是我的出发点：

```
Dim myproxy As New WebProxy("http://1.1.1.1:80") 
```

我想使用来自的项目填充地址部分`ListBox`。

VB 不允许我这样做，因为我试图将字符串转换为地址数据类型。

有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:20:53.547

如果您设法用您发布的 C# 代码解决了问题，VB 可能如下所示：

```
Dim prx As String = "http://" & lstProxy.Items(x)
Dim myProxy As New WebProxy(prx) 
```

如果您用 C# 编写相同的代码，则几乎没有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:08:46.280

好的 - 想不通！但后来切换到 C#.net，一切都很好。

我是这样处理的：

```
 string front = "http://";
       string prx = front + lstProxy.Items[x].ToString();

       WebProxy myProxy = new WebProxy(prx); 
```

所以，我的首要建议是获得 C#.Net。如果需要任何帮助，请随时对此发表评论。

# php - 使用 PHP 在 Excel 上读取按钮

> ID：13442585
> 
> 赞同：0
> 
> 时间：2012-11-18T17:26:00.000
> 
> 标签：php, phpexcel

我正在使用需要使用 PHP 读取 excel 文件单元格数据的站点。我使用 PHP EXCEL 成功完成了它。随着进度的移动，我的客户要求我阅读 excel 文件上的按钮，这是一个 excel 宏按钮。因此，他可以使用该站点触发它，而无需登录服务器。

这可能吗？有没有人可以给我关于这个任务的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:43:25.750

PHPExcel 不支持表单数据（例如按钮）和宏。要访问按钮和执行宏，您需要一个基于 MS Excel 本身的解决方案（我不相信 Open/Libre Office 支持 MS Excel 宏或 VBA 脚本），这将您限制为 COM 和 Windows 平台

# haskell - 在 Windows 7 上安装 Cabal-dev

> ID：13442588
> 
> 赞同：1
> 
> 时间：2012-11-18T17:26:19.050
> 
> 标签：haskell, cabal-install

我正在尝试在 Windows 7 上安装 Cabal-dev。

我已经设法解决了无法使用以下方法构建网络的问题：

```
cabal install --constraint="network installed" cabal-dev 
```

但是，我得到了这个：

```
>cabal install --constraint="network installed" cabal-dev 
Resolving dependencies...
cabal: Could not resolve dependencies:
trying: cabal-dev-0.9.1
trying: cabal-dev-0.9.1:-no-cabal-dev
trying: network-2.3.1.0/installed-489...
rejecting: parsec-3.1.3/installed-62e... (conflict: network =>
parsec==3.1.3/installed-c65...)
rejecting: parsec-3.1.3/installed-c65... (conflict: parsec =>
mtl==2.1.2/installed-533..., cabal-dev-0.9.1:no-cabal-dev => mtl>=1.1 && <2.1)
rejecting: parsec-3.1.3, 3.1.2, 3.1.1, 3.1.0, 3.0.1, 3.0.0, 2.1.0.1, 2.1.0.0,
2.0 (conflict: network => parsec==3.1.3/installed-c65...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:55:48.323

Mikhail Glushenkov 的建议奏效了

[我为 cabal-dev](https://github.com/creswick/cabal-dev)克隆了git repo ，然后像这样构建它：

```
runhaskell -isrc admin/bootstrap.hs 
```

然后我添加了

```
{windowspath ..}\cabal-dev\cabal-dev\bin 
```

到我的路上，一切正常。

我现在可以在我的 yesod 文件夹中运行 cabal-dev install 让 yesod 最终工作。

# c++ - 尝试为 Windows API 包装器实现事件处理程序时遇到问题

> ID：13442593
> 
> 赞同：4
> 
> 时间：2012-11-18T17:26:41.117
> 
> 标签：c++, winapi, function, pointers, casting

朋友们，我正在尝试实现 Windows API 的包装，并且我想从父窗口捕获子窗口事件，所以我做了一个简单的事件处理程序。我使用函数指针来存储回调函数。我用静态函数做到了。请参阅下面的代码。

```
class Widget;
typedef void (*EventProc)(MSG* EventArgs);
class Widget
{
public:
    /// Constructors destructor and methods for Registering and Creating Windows
    static LRESULT CALLBACK MainProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam)
    {
        MSG struct_msg;
        struct_msg.hWnd=hWnd;
        struct_msg.message=msg;
        struct_msg.wParam=wParam;
        struct_msg.lParam=lParam;

        Widget* wid=(Widget*)GetWidgetPointerFromHWND(hWnd);

        switch(msg)
        {
            case WM_CREATE:
                if(Created!=NULL)
                    (*(wid->Created))(&struct_msg);break;
            case WM_DESTROY:
                if(Destroyed!=NULL)
                    (*(wid->Destroyed))(&struct_msg);break;
            default:
                return DefWindowProc(hWnd,msg,wParam,lParam);
        }
        return 0;
    }
    EventProc Created;
    EventProc Destroyed;

};

class CustomControl: public Widget
{
    /// Constructor destructor and other methods

};

class Window: public Widget
{
public:

    static void ChildCreated(Widget* Sender,Widget* Self,MSG* EventArgs)
    {
        MessageBox(0,0,0,0);
    }

    Window()
    {
        control1=new CustomControl(100,100,200,200); //left,top,width,height
        this->AddChild(control1);
        control1->Created = ChildCreated; 
    }
private:
    CustomControl control1;
}; 
```

这可行，但由于静态函数没有 this 指针，我无法访问**Window 类**中的变量和成员函数。我想制作一个成员函数作为回调函数（事件处理程序）。我希望你明白我要解决的问题。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:17:23.933

您在此示例中展示的主要思想是正确的。

你做了一些`static` `WndProc`函数和映射，映射`HWND`到你的类。

创建小部件的新实例时，将其添加到映射中。在销毁时，您将其从映射中删除。

在您的 WndProc 函数中，您从映射中获取类的实例并调用该实例的虚拟事件处理程序函数：

```
class WidgetBase
{
public:
    WidgetBase()
    {
        _handle = CreateWindow(/*...*/, &WidgetBase::MainProc, /*...*/);
        _widgets.insert(std::make_pair(handle, this);
    }
    virtual ~WidgetsBase() 
    {
       _widgets.remove(handle);
    }
protected:
    HWND _handle;
    virtual LRESULT handleEvents(UINT msg,WPARAM wParam,LPARAM lParam)
    {
         return DefWindowProc(_handle, hWnd,msg,wParam,lParam);
    }
private:
    static std::map<HWND, WidgetBase*> _widgets;

    static WidgetBase* GetWidgetPointerFromHWND(HWND handle)
    {
        // some error handling should be put there
        return _widgets[handle];
    }

    static LRESULT CALLBACK MainProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam)
    {
        WidgetBase* wid=GetWidgetPointerFromHWND(hWnd);
        if (wid) {
            return wid->handleEvents(msg, wParam, lParam);
        }
        else {
            return DefWindowProc(hWnd,msg,wParam,lParam);
        }
    }
};
std::map<HWND, WidgetBase*> WidgetBase::_widgets; 
```

然后在您的派生类中，您只需覆盖`handleEvents`函数：

```
class Derived: public WidgetBase
{
protected:
virtual LRESULT handleEvents(UINT msg,WPARAM wParam,LPARAM lParam)
    {
         // This is your event handler, that is memeber function
         //...
         return WidgetBase::handleEvents(msg, wParam, lParam);
    }
}; 
```

# django - 去钓鱼，因为我喜欢

> ID：13442599
> 
> 赞同：2
> 
> 时间：2012-11-18T17:27:03.447
> 
> 标签：django

我一直在尝试使用 JavaScript 和 HTML 创建任务管理器。我对编程很陌生，所以希望有人能帮助我解决以下问题：

由于某种原因，数组的项目不会进入表中。有什么有用的想法可以解决这个谜吗？感谢所有帮助！

* * *

```
 <!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>
window.onload = init;
var descriptionS = new Array();

function init(){

                var delBtn = document.getElementById("buttonDel");
                delBtn.addEventListener('click', deleteRow, false);    
                var addTaskBtn = document.getElementById("addTask");
                addTaskBtn.addEventListener('click', getTaskData, false);
                var displayListBtn = document.getElementById("displayList");
                displayListBtn.addEventListener('click', generateList, false); 
                var sortByNumBtn = document.getElementById("sortByNumber");
                sortByNumBtn.addEventListener('click', sortListByNum, false);

}

function getTaskData(){
                var myDescription = document.getElementById("descriptionField").value;
                var myDate = document.getElementById("dateField").value;
                var myPriority = document.getElementById("selRow0").value;
                var description = new Object();
                description.descriptionData = myDescription;
                description.descriptionDate = myDate;
                description.descriptionPriority = myPriority;
                descriptionS.push(description);

}

function generateList(){
                var myTaskList = document.getElementsByTagName("td");
                myTaskList.innerHTML ="";

                for(var p = 0; p < descriptionS.length; p++){

                var tbl = document.getElementById('tblSample');
                  var lastRow = tbl.rows.length;
                  // if there's no header row in the table, then iteration = lastRow + 1
                  var iteration = lastRow;
                 var row = tbl.insertRow(lastRow);

                //Select cell
                var cell0 = row.insertCell(0);
                  var selT = document.createElement("input");
                  selT.type = 'checkbox';
                  selT.name = 'chkBox';
                  selT.id = 'chkBox';
                  cell0.appendChild(selT);

                // ID cell
                var cell1 = document.createElement("td");
                  cell1 = row.insertCell(1);
                var idFill = document.createTextNode(iteration);
                cell1.appendChild(idFill);
                  cellSelect.appendChild(cell1);

                //Description cell
                var cell2 = document.createElement("td");
                cell2 = row.insertCell(2);
                  var elF = document.createTextNode(descriptionS[p].descriptionData);
                  //elF.innerHTML = document.getElementById("descriptionField").value;
                cell2.appendChild(elF);

                // Priority cell
                  var cellPri = document.createElement("td");
                cellPri = row.insertCell(3);
                  var pri = document.getElementbyId('selRow0').value;
                  pri.name = 'selRow' + iteration;
                  cellPri.appendChild(pri);

                //Date
                  var cell4 = document.createElement("td");
                cell4 = row.insertCell(4);
                  var elF1 = document.createTextNode(descriptionS[p].descriptionDate);
                  //elF.innerHTML = document.getElementById("descriptionField").value;
                cell4.appendChild(elF1);

                  // Delete cell
                var cell5 = document.createElement("td");
                  cell5 = row.insertCell(5);
                 var del1 = document.createElement('input');
                  del1.type = 'button';
                  del1.name = 'buttonDel';
                 del1.id = 'buttonDel';
                  del1.value = "Delete";
                  del1.onclick = function () {

                        var table = document.getElementById("tblSample");
                        var rowCount = table.rows.length;

                            for(var i=0; i<rowCount; i++) {
                                    var row = table.rows[i];
                                    var chkbox = row.cells[0].childNodes[0];
                                    if(null != chkbox && true == chkbox.checked) {
                                                table.deleteRow(i);
                                                 rowCount--;
                                             i--;
                                }
            }
};
                  cell5.appendChild(del1);

    }

}

function sortListByNum(){

                descriptionS.sort(sortFunctionByNumber);
                generateList();
}

function sortFunctionByNumber(a, b){

                return a.descriptionData-b.descriptionData;

}

function deleteRow(tableID) {

            var table = document.getElementById("tblSample");
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
        }
    }
}
</script>

</head>

<body>

<form action="">
<p>
    Description: <input type="text" id="descriptionField" />
    Date: <input type="text" id="dateField" />
    Priority: <select name="selRow0" id="selRow0" />
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    </select>
    <input type="button" id="addTask" value="Add Task" />
    <input type="button" id="displayList" value="Display Task" />
    <input type="button" id="sortByNumber" value="Sort" />
</p>
<p>
<span id="spanOutput" style="border: 1px solid #000; padding: 3px;"> </span>
</p>
<table border="1" id="tblSample">
  <tr>
      <th>Select</th>
      <th>ID</th>
    <th>Description</th>
    <th>Priority</th>
    <th>Date</th>
    <th>Delete</th>
  </tr>
  <tr>
  <td><INPUT type="checkbox" name="chk"/></td>
    <td>1</td>
    <td>Example</td>
    <td>
    <select name="selRow1">
    <option value="value1">1</option>
    <option value="value2">2</option>
    <option value="value3">3</option>
    </select>
    </td>
    <td>06/06/2013</td>
    <td>
    <input type="button" value="Delete" id="buttonDel" />
    </td>
  </tr>
</table>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:31:07.943

使用 ExtJS GridPanel [http://docs.sencha.com/ext-js/4-1/#!/example/grid/cell-editing.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/cell-editing.html) （点击编辑单元格）

# android - Android 处理程序、计时器和多线程

> ID：13442601
> 
> 赞同：2
> 
> 时间：2012-11-18T17:27:27.487
> 
> 标签：android, multithreading, timer, handler, state-machine

我基本上是在这条消息的底部做代码发布。foob​​ar() 将事件发布到公共状态机中。我还将触摸屏事件发布到公共状态机中。是真的，通过使用处理程序我没有同步问题吗？（即，我的状态机不会同时通过触摸和 foobar 事件发送消息）？

```
private Handler handler = new Handler();
handler.postDelayed(runnable, 100);

private Runnable runnable = new Runnable() {
   @Override
   public void run() {
      /* do what you need to do */
      foobar();
      /* and here comes the "trick" */
      handler.postDelayed(this, 100);
   }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:28:53.787

相同的`Handler`对象实例将通过选择传递给它的消息/可运行对象队列进行处理`Looper`（默认情况下为主线程）。

所以不，如果您向 Handler 发送消息列表，它们将一次运行 1 条，永远不会并行。

但是如果您担心同步问题，您应该`synchronize(object) {}`在您的方法中围绕公共对象的代码，这样他们将等待锁定该公共对象，这意味着您可以从任何地方调用该方法并且它永远不会与任何其他并行运行代码使用`synchronize(object) {}`.

# jquery - jQuery 动画 stop() 触发缓出

> ID：13442604
> 
> 赞同：1
> 
> 时间：2012-11-18T17:27:59.443
> 
> 标签：jquery, jquery-animate

这是一个有点笼统的问题。

如果我在元素#elm 上有一个 jQuery 动画，我可以使用它来停止它`$('#elm').stop()`

通常动画会有一个很好的easeIn，easeOut（就像默认的'swing'）。调用 'stop()' 会立即停止它，当场，看起来有点笨拙。调用`$('#elm').stop(true,true)`使它立即完成动画，一直到结束点。

是否有一种通用的方法来告诉元素“更改正在运行的动画，以便它会在'很快'和'附近'停止，但首先使用定义的 easeOut”？

好奇，*-派克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T03:08:13.797

派克，

我不知道有一种完全通用的方法来执行“gentle_stop”——不管它是如何初始化的，它都可以对任何动画进行操作。

下面的代码定义了函数`gentleStoppable()`，它实际上是 jQuery 自己的[.animate(properties, options)](http://api.jquery.com/animate/)方法的 4 参数版本。额外的两个参数指定“温和停止”阶段。

这是功能：

```
function gentleStoppable($jQ, animProps, animOptions, stopProps, stopOptions) {
    var namespace = 'gentleStop';
    var dfltStopOptions = {
        duration: 'slow',//override with stopOptions.duration .
        easing: 'easeOutCubic',//override with stopOptions.easing . (See also the safety check applied after extending dfltStopOptions below).
        queue: namespace
    };
    animProps = animProps || {};
    animOptions = animOptions || {};
    stopProps = stopProps || {};
    stopOptions = stopOptions || {};
    $jQ.each(function(i, elem) {
        var $elem = $(elem);
        function killCustomEvent() { $elem.off(namespace); }
        var C = $.Callbacks('once').add(killCustomEvent);
        if(animOptions.complete) {
            C.add(animOptions.complete);
        }
        animOptions.complete = C.fire;
        stopProps = $.extend({}, animProps, stopProps);
        stopOptions = $.extend({}, animOptions, dfltStopOptions, stopOptions);
        stopOptions.easing = ($.easing && $.easing[stopOptions.easing] ) ? stopOptions.easing : 'swing';//just in case what's specifified is unavailable.
        $elem.on(namespace, function() {//custom event
            killCustomEvent();
            C.remove(killCustomEvent);//prevent killCustomEvent being called twice.
            $elem.stop(true,false).animate(stopProps, stopOptions).dequeue(namespace);
        }).animate(animProps, animOptions);
    });
} 
```

如下启动一个gentleStoppable 动画：

```
var animProps = {
    left: '300px'
};
var animOptions = {
    duration: 2000,
    complete: function() {
        console.log('complete');
    }
};
var stopProps = {
    left: '+=15px'
};
var stopOptions = {
    duration: 500,
};
gentleStoppable($e1, animProps, animOptions, stopProps, stopOptions); 
```

然后进行温和的停止：

```
$("#elem").trigger('gentleStop'); 
```

[演示](http://jsfiddle.net/6htB8/)

就目前而言，该功能并不完美，我只对其进行了有限的测试。以下是已知问题/改进：

*   方向：表单的一个 stopProps 属性`xxx:+=15px`会在柔和停止阶段无条件地增加 15px，即使它的方向是错误的。例如，如果相应的 animProps 属性是，`xxx:30px`则`+=15px`假定目标值`30px`是从下方接近的。同样， 的值`-=15px`将假定从上方接近相应的目标值。对gentleStoppable() 的改进将自动调整每个stopProps 属性，以允许从下方或上方接近其对应的animProps 属性。

*   Overshoot：表单的 stopProps 属性`xxx:+=15px`将在柔和停止阶段无条件添加 15px，即使 +15px 使柔和动画超出相应 animProps 属性中指定的值。如果动画在其自然结束附近停止，则往往会发生这种情况。对gentleStoppable() 的改进将自动防止每个stopProps 的属性导致其相应的animProps 属性被超出。

*   自动计算：一个毫无疑问的改进是，gentleStoppable() 可以根据 animProps 为自己计算 stopProps 值。这将使函数更通用，更易于使用，并且正确编写，将有效地解决方向和过冲问题。

*   稍加考虑，代码可以重构为一个 jQuery 插件，这将更方便，因为它允许方法链接并避免相当笨拙`.trigger(...)`的执行温和的停止。

如果这有任何用处，那么请使用它。

# android - java.net.SocketException 在 DefaultHttpClient android

> ID：13442605
> 
> 赞同：0
> 
> 时间：2012-11-18T17:28:06.690
> 
> 标签：android, httpclient, socketexception

从我的 android 应用程序中，我需要调用 Web 服务来检索一些数据。为了调用该 Web 服务，我使用了一个`HttpPost`实体。

问题是我收到此错误：

```
11-18 15:57:42.807: I/ActivityThread(151): finish dispatching broadcast to com.android.server.PowerManagerService$BatteryReceiver@2ffcad08
11-18 15:57:42.807: I/ActivityThread(151): Dispatching broadcast android.intent.action.BATTERY_CHANGED to com.android.internal.policy.impl.KeyguardUpdateMonitor$3@2ff76710
11-18 15:57:42.807: I/ActivityThread(151):   mRegistered=true mCurOrdered=false
11-18 15:57:42.807: I/ActivityThread(151): finish dispatching broadcast to com.android.internal.policy.impl.KeyguardUpdateMonitor$3@2ff76710
11-18 15:57:42.807: I/ActivityThread(151): Dispatching broadcast android.intent.action.BATTERY_CHANGED to com.android.server.connectivity.Tethering$StateReceiver@3002cf58
11-18 15:57:55.207: W/System.err(2327): java.net.SocketException: Connection reset by peer
11-18 15:57:55.217: W/System.err(2327):     at org.apache.harmony.luni.platform.OSNetworkSystem.readSocketImpl(Native Method)
11-18 15:57:55.257: W/System.err(2327):     at org.apache.harmony.luni.platform.OSNetworkSystem.read(OSNetworkSystem.java:358)
11-18 15:57:55.257: W/System.err(2327):     at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:561)
11-18 15:57:55.257: W/System.err(2327):     at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:88)
11-18 15:57:55.257: W/System.err(2327):     at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
11-18 15:57:55.257: W/System.err(2327):     at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)
11-18 15:57:55.257: W/System.err(2327):     at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:82)
11-18 15:57:55.267: W/System.err(2327):     at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
11-18 15:57:55.267: W/System.err(2327):     at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:179)
11-18 15:57:55.277: W/System.err(2327):     at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
11-18 15:57:55.277: W/System.err(2327):     at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
11-18 15:57:55.277: W/System.err(2327):     at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
11-18 15:57:55.287: W/System.err(2327):     at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
11-18 15:57:55.287: W/System.err(2327):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:410)
11-18 15:57:55.297: W/System.err(2327):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
11-18 15:57:55.297: W/System.err(2327):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-18 15:57:55.307: W/System.err(2327):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
11-18 15:57:55.307: W/System.err(2327):     at SplashScreen.sendJsonauthRegisterSession(SplashScreen.java:241)
11-18 15:57:55.317: W/System.err(2327):     at $SplashScreenTask.doInBackground(SplashScreen.java:587)
11-18 15:57:55.317: W/System.err(2327):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
11-18 15:57:55.337: I/ActivityThread(240): Dispatching broadcast android.intent.action.SERVICE_STATE to com.android.phone.PhoneApp$PhoneAppBroadcastReceiver@2fe4b590
11-18 15:57:55.337: I/ActivityThread(240):   mRegistered=true mCurOrdered=false
11-18 15:57:55.337: I/ActivityThread(240): finish dispatching broadcast to com.android.phone.PhoneApp$PhoneAppBroadcastReceiver@2fe4b590
11-18 15:57:55.347: I/ActivityThread(151): Dispatching broadcast android.intent.action.SERVICE_STATE to android.net.MobileDataStateTracker$MobileDataStateReceiver@3002b098
11-18 15:57:55.347: I/ActivityThread(247): enter process activity msg = 113
11-18 15:57:55.357: I/ActivityThread(151):   mRegistered=true mCurOrdered=false
11-18 15:57:55.357: W/System.err(2327):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-18 15:57:55.357: I/ActivityThread(151): finish dispatching broadcast to android.net.MobileDataStateTracker$MobileDataStateReceiver@3002b098
11-18 15:57:55.357: I/ActivityThread(151): Dispatching broadcast android.intent.action.ANY_DATA_STATE to android.net.MobileDataStateTracker$MobileDataStateReceiver@30023718
11-18 15:57:55.367: I/ActivityThread(151):   mRegistered=true mCurOrdered=false
11-18 15:57:55.367: I/ActivityThread(151): finish dispatching broadcast to android.net.MobileDataStateTracker$MobileDataStateReceiver@30023718
11-18 15:57:55.367: I/ActivityThread(151): Dispatching broadcast android.intent.action.ANY_DATA_STATE to android.net.MobileDataStateTracker$MobileDataStateReceiver@30023f48
11-18 15:57:55.367: I/ActivityThread(151):   mRegistered=true mCurOrdered=false
11-18 15:57:55.367: I/ActivityThread(151): finish dispatching broadcast to android.net.MobileDataStateTracker$MobileDataStateReceiver@30023f48
11-18 15:57:55.367: I/ActivityThread(151): Dispatching broadcast android.intent.action.ANY_DATA_STATE to android.net.MobileDataStateTracker$MobileDataStateReceiver@30024420
11-18 15:57:55.367: I/ActivityThread(151):   mRegistered=true mCurOrdered=false
11-18 15:57:55.367: I/ActivityThread(240): Dispatching broadcast android.intent.action.ANY_DATA_STATE to com.android.phone.PhoneApp$PhoneAppBroadcastReceiver@2fe4b590
11-18 15:57:55.367: I/ActivityThread(240):   mRegistered=true mCurOrdered=false
11-18 15:57:55.367: I/ActivityThread(240): finish dispatching broadcast to com.android.phone.PhoneApp$PhoneAppBroadcastReceiver@2fe4b590
11-18 15:57:55.377: I/ActivityThread(151): finish dispatching broadcast to android.net.MobileDataStateTracker$MobileDataStateReceiver@30024420
11-18 15:57:55.377: I/ActivityThread(151): Dispatching broadcast android.intent.action.ANY_DATA_STATE to android.net.MobileDataStateTracker$MobileDataStateReceiver@300248f8
11-18 15:57:55.377: I/ActivityThread(151):   mRegistered=true mCurOrdered=false
11-18 15:57:55.377: I/ActivityThread(151): finish dispatching broadcast to android.net.MobileDataStateTracker$MobileDataStateReceiver@300248f8
11-18 15:57:55.377: I/ActivityThread(151): Dispatching broadcast android.intent.action.ANY_DATA_STATE to android.net.MobileDataStateTracker$MobileDataStateReceiver@3002b098
11-18 15:57:55.377: I/ActivityThread(151):   mRegistered=true mCurOrdered=false
11-18 15:57:55.387: W/System.err(2327):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-18 15:57:55.387: I/ActivityThread(247): exit process activity msg = 113
11-18 15:57:55.397: W/System.err(2327):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
11-18 15:57:55.397: I/ActivityThread(151): finish dispatching broadcast to android.net.MobileDataStateTracker$MobileDataStateReceiver@3002b098
11-18 15:57:55.427: W/System.err(2327):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
11-18 15:57:55.427: W/System.err(2327):     at java.lang.Thread.run(Thread.java:1096) 
```

错误在此行的以下方法中：

```
response = client.execute(post);

public boolean sendJsonauthRegisterSession(JSONObject json, String url) {

    HttpParams httpParameters = new BasicHttpParams();
    int timeoutConnection = 150000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection); 
    int timeoutSocket = 150000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
    DefaultHttpClient client = new DefaultHttpClient(httpParameters);

    HttpResponse response;
    try {
        HttpPost post = new HttpPost(url);
        JSONObject js = new JSONObject();
        js.put("request_object", json);

        StringEntity se = new StringEntity(js.toString());
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json"));
        post.setEntity(se);
        response = client.execute(post);

        /* Checking response */
        if (response != null) {
                    ...
        }
     } 
      catch(UnknownHostException e5){
          e5.printStackTrace();           
          this.callRegister="register_failed";
     } 
      catch(SocketException ex) {
          ex.printStackTrace();
          this.callRegister="register_failed";
     } 
      catch (Exception e) {
          e.printStackTrace();
          this.callRegister="register_failed";
     }

    client.getConnectionManager().shutdown();
    return registersession;
} 
```

从 调用该方法`AsyncTask`。

有人知道我做错了什么吗？谢谢！！！

**重要**与服务器的连接是在 3G、EDGE 上完成的......所以它非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:31:21.823

只是切断连接的服务器。

[从这个问题](https://stackoverflow.com/a/1434506/961759)中提取

> 这是相当致命的。远程服务器向您发送了一个 RST 数据包，这表明连接立即断开，而不是通常的握手。这绕过了正常的半关闭状态转换。我喜欢这样的描述：
> 
> > “由对等方重置连接”是 TCP/IP 等价物，相当于将电话重新挂上。这比仅仅不回复，留下一个悬而未决更有礼貌。但这并不是真正礼貌的 TCP/IP 话务员所期望的 FIN-ACK。

# javascript - Javascript FileReader 在读取本地图像时会占用所有内存

> ID：13442607
> 
> 赞同：3
> 
> 时间：2012-11-18T17:28:23.567
> 
> 标签：javascript, html, filereader

我正在努力显示来自本地驱动器的大量图像的缩略图。

使用 HTML5 File API 似乎很有可能，但是当我尝试加载大量图像时，浏览器的内存使用量超过了屋顶并崩溃了。

我认为问题在于 FileReader 在文件读取后不会释放内存。

最初我有一个新的 FileReader 实例和一个简单的循环来遍历图像。

为了解决这个内存问题，我将它替换为只有一个 FileReader，但它并没有真正帮助。

这是相关的代码块：

```
<script>

var areader = new FileReader();
var counter=0;

function loadImage(file) {
    var canvas = document.createElement("canvas");
    areader.onload = function (event) {
        var img = new Image;

        img.onload = function () {
            canvas.width = img.width / 100;
            canvas.height = img.height / 100;
            var ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0, img.width / 100, img.height / 100);
            var browse = document.getElementById("uploadInput");
            if (browse.files.length > counter) {
                counter++;
                areader.result = null;//I don't think this makes any difference
                loadImage(browse.files[counter]);
            }
        };

        img.src = event.target.result;
    };
    areader.readAsDataURL(file);
    preview.appendChild(canvas);
}

function showImages() {
    loadImage(document.getElementById("uploadInput").files[0]);

} 
```

如果有人遇到这个问题，我做了一些非常愚蠢的事情，你能回答吗？

谢谢，

塔马斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T17:33:47.083

它不是文件阅读器，而是您使用 base64 中的整个图像数据作为图像的`src`属性，这实际上将占用图像在内存中大小的 133%。

您应该改用[Blob URL](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL)：

```
var URL = window.URL || window.webkitURL;

function loadImage( file ) {
    var canvas = document.createElement("canvas"),
        img = new Image();

    img.onload = function() {
        canvas.width = img.width / 100;
        canvas.height = img.height / 100;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, img.width / 100, img.height / 100);
        URL.revokeObjectURL( img.src );
        img = null;

        var browse = document.getElementById("uploadInput");
            if (browse.files.length > counter) {
            counter++;
            loadImage(browse.files[counter]);
        }
    };
    img.src = URL.createObjectURL( file );

    preview.appendChild(canvas);
} 
```

# css - 如何相对于某个父标签禁用 CSS 样式？

> ID：13442609
> 
> 赞同：4
> 
> 时间：2012-11-18T17:28:30.777
> 
> 标签：css, html

这是我的 HTML：

```
<!DOCTYPE html>
<html>
<style>span {text-decoration: none}</style>
<body>
<a href="#">underscored text <span>without underscore</span></a>
</body></html> 
```

`<span>`遗骸强调了这一点。什么是可能的解决方法（不使用 JavaScript 且不更改 HTML）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T17:38:07.700

试试这个

```
<!DOCTYPE html>
<html>
<style>span {text-decoration: none;display: inline-block;}</style>
<body>
<a href="#">underscored text <span>without underscore</span></a>
</body></html>​ 
```

链接到原始答案：[https ://stackoverflow.com/a/10478962/662250](https://stackoverflow.com/a/10478962/662250)

[**工作小提琴**](http://jsfiddle.net/MTMEj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:31:29.673

设置它，使锚标记没有下划线，但跨度确实有下划线

```
<a href="#"><span>underscored text</span> without underscore</a>

a{
  text-decoration:none;
}

a span{
  text-decoration:underline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:41:23.350

我认为没有办法，所以这是一个肮脏的黑客：

```
<html>
<style>
    span {border-bottom:1px solid white;}
    a {text-decoration: none;border-bottom:1px solid blue;}
    </style>
<body>
<a href="#">underscored text <span>without underscore</span></a>
</body></html>​ 
```

...仅因为您提到您无法更改 HTML。

# actionscript-3 - 影片剪辑吸引/排斥鼠标

> ID：13442610
> 
> 赞同：0
> 
> 时间：2012-11-18T17:28:31.743
> 
> 标签：actionscript-3

我真的是 flash 和 as3 的新手...我正在尝试在 flash 中创建 2 个场景 - 一个是我的影片剪辑在靠近鼠标时从鼠标移开，另一个是影片剪辑被鼠标吸引. 我在 actionscript 2 上找到了答案，但我不能在我的 as3 文件中使用它……有什么帮助或想法吗？干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:55:47.760

这是我制作的一个示例，显示对象相对于鼠标的位置被“推”和“拉”。

**Main.as（文档类）：**

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.geom.Point;

    public class Main extends Sprite  
    {

        public static var PULL:String = "pull";
        public static var PUSH:String = "push";

        private var _circle:Circle;
        private var _force:String;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);

        }// end function

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            _circle = new Circle();
            addChild(_circle);

            _force = PULL;

            stage.addEventListener(MouseEvent.MOUSE_DOWN, onStageMouseDown);

        }// end function

        private function onStageMouseDown(e:MouseEvent):void 
        {
            stage.addEventListener(MouseEvent.MOUSE_UP, onStageMouseUp);
            stage.addEventListener(Event.ENTER_FRAME, onStageEnterFrame);

        }// end function

        private function onStageMouseUp(e:MouseEvent):void 
        {
            stage.removeEventListener(MouseEvent.MOUSE_UP, onStageMouseUp);
            stage.removeEventListener(Event.ENTER_FRAME, onStageEnterFrame);

            _force = (_force == PULL) ? PUSH : PULL;

        }// end function

        private function onStageEnterFrame(e:Event):void 
        {
            var point1:Point = new Point(_circle.x, _circle.y);
            var point2:Point = new Point(stage.mouseX, stage.mouseY);
            var point3:Point = point2.subtract(point1);
            point3.normalize(10);

            if (_force == PULL) {

                _circle.x += point3.x;
                _circle.y += point3.y;

            } else if (_force == PUSH) {

                _circle.x -= point3.x;
                _circle.y -= point3.y;

            }// end else if

        }// end function

    }// end class

}// end package

import flash.display.Sprite;
import flash.events.Event;

class Circle extends Sprite {

    public function Circle() {

        draw();

    }// end function

    private function draw():void {

        this.graphics.lineStyle(1);
        this.graphics.beginFill(0xFFFFFF);
        this.graphics.drawCircle( 0, 0, 20);
        this.graphics.endFill();

    }// end function

}// end class 
```

在该`init()`方法中，我们向舞台添加了一个新的显示对象，这是我们将相对于鼠标位置“拉”和“推”的显示对象。

```
_circle = new Circle();
addChild(_circle); 
```

然后我们将`_force`属性设置为`PULL`常量。该`_force`属性将确定显示对象是“拉”还是“推”。

```
_force = PULL; 
```

接下来，我们将鼠标事件侦听器添加到舞台。`MouseEvent.MOUSE_DOWN`我们调用`onStageMouseDown()`事件处理程序。当调用处理程序时，我们向舞台添加一个`Event.ENTER_FRAME`和`MouseEvent.MOUSE_UP`事件侦听器。

```
private function onStageMouseDown(e:MouseEvent):void 
{
    stage.addEventListener(MouseEvent.MOUSE_UP, onStageMouseUp);
    stage.addEventListener(Event.ENTER_FRAME, onStageEnterFrame);

}// end function 
```

当`MouseEvent.MOUSE_UP`事件处理程序被调用时，前一个`Event.ENTER_FRAME`和`MouseEvent.MOUSE_UP`事件侦听器将从阶段中删除。然后根据属性的值，它的值在和`_force`之间交替。`PUSH``PULL`

```
private function onStageMouseUp(e:MouseEvent):void 
{
    stage.removeEventListener(MouseEvent.MOUSE_UP, onStageMouseUp);
    stage.removeEventListener(Event.ENTER_FRAME, onStageEnterFrame);

    _force = (_force == PULL) ? PUSH : PULL;

}// end function 
```

最后，`onStageEnterFrame`事件处理程序。这是我们计算显示对象相对于鼠标的新位置的地方。

有不同的方法可以解决这个问题，但我决定使用这个`Point`类来简化事情。首先，我们必须`Point`为显示对象的位置获取一个对象，并`Point`为鼠标的位置获取另一个对象。

```
var point1:Point = new Point(_circle.x, _circle.y);
var point2:Point = new Point(stage.mouseX, stage.mouseY); 
```

`Point`接下来我们必须使用对象的`subtract()`方法来获取点之间的差异。

```
var point3:Point = point2.subtract(point1); 
```

有了这个新点，我们可以使用`Point`对象的`normalize()`方法将显示对象位置和鼠标位置之间的线段缩放到设定的长度。

```
point3.normalize(10); 
```

最后，根据 _force 属性的值，我们可以从显示对象的和属性中减去或添加点的和`x`属性。`y``x``y`

# java - 如何在不使用 Math.Random 的情况下生成随机数？

> ID：13442611
> 
> 赞同：10
> 
> 时间：2012-11-18T17:28:34.993
> 
> 标签：java, random

我的项目需要我创建一个使用 JOptionPane 并且不使用 Math.Random 来创建随机值的基本数字猜谜游戏。你会怎么做呢？除了随机数生成器之外，我已经完成了所有工作。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-18T20:20:45.867

这里是简单随机生成器的代码：

```
public class SimpleRandom {
/**
 * Test code
 */
public static void main(String[] args) {
    SimpleRandom rand = new SimpleRandom(10);
    for (int i = 0; i < 25; i++) {
        System.out.println(rand.nextInt());
    }

}

private int max;
private int last;

// constructor that takes the max int
public SimpleRandom(int max){
    this.max = max;
    last = (int) (System.currentTimeMillis() % max);
}

// Note that the result can not be bigger then 32749
public int nextInt(){
    last = (last * 32719 + 3) % 32749;
    return last % max;
}
} 
```

上面的代码是一个“线性同余生成器（LCG）”，你可以在[这里找到它如何工作的很好的描述。](https://en.wikipedia.org/wiki/Linear_congruential_generator)

免责声明：

> 上面的代码仅用于研究，不能替代股票 Random 或 SecureRandom。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-30T19:31:56.337

在 JavaScript 中使用 Middle-square 方法。

```
var _seed = 1234;
function middleSquare(seed){
    _seed = (seed)?seed:_seed;
    var sq = (_seed * _seed) + '';
    _seed = parseInt(sq.substring(0,4));
    return parseFloat('0.' + _seed);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:31:06.337

如果您不喜欢 Math.Random，您可以制作自己的[Random](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)对象。

进口：

```
import java.util.Random; 
```

代码：

```
Random rand = new Random();
int value = rand.nextInt(); 
```

如果您需要其他类型而不是 int，Random 将提供 boolean、double、float、long、byte 的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T18:16:47.490

您可以使用[java.security.SecureRandom](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)。它有更好的熵。

此外，[这里](http://users.cis.fiu.edu/~weiss/dsaajava/code/DataStructures/Random.java)是来自[*Java 中的数据结构和算法分析*](http://www.pearsonhighered.com/educator/product/Data-Structures-and-Algorithm-Analysis-in-Java/9780132576277.page)一书的代码。它使用与 java.util.Random 相同的算法。

# jquery - zurb Foundation 3.2 自定义表单中的选项值选择

> ID：13442613
> 
> 赞同：1
> 
> 时间：2012-11-18T17:28:47.890
> 
> 标签：jquery, html, zurb-foundation

我正在使用表单选择来更改 location.href。我的问题是关于 zurb 基金会自定义表单的工作原理。

1.  是否从基础自定义表单选择元素（使用 div 实现）中选择选项，是否还在隐藏（标准）表单选择的相应选项值上设置 selected 属性？

2.  其意图是开发人员应该硬编码重复的表单元素（如下面的标记），还是 jquery.foundation.forms.js 应该在后台处理替换？

谢谢！

```
<form action="#" class="custom">
<select id="subcatselect" style="display:none;">
    <option value="one">One</option>
    <option value="two">Two</option>
    <option value="three">Three</option>
</select>
<div class="custom dropdown">
    <a href="#" class="current">This is a dropdown</a>
    <a href="#" class="selector"></a>
    <ul>
        <li>One</li>
        <li>Two</li>
        <li>Three</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:18:53.147

1.  是的
2.  不，框架会自动插入自定义 HMTL。您只需对原始选择元素进行编码。

# matlab - MATLAB 帮助。将变量矩阵插入现有函数

> ID：13442629
> 
> 赞同：0
> 
> 时间：2012-11-18T17:30:22.367
> 
> 标签：matlab, variables, calculus

我有两个变量（x，y）的现有函数，称为判别式，定义如下：

```
discriminant = xSecondPart * ySecondPart - xySecondPart.^2; 
```

其中 xSecondPart 和 ySecondPart 是函数 f 的二阶偏导数。xySecondPart 是同一个函数 f 对 y 的偏导数对 x 的偏导数。

我需要打印出矩阵 xAns 中每个 x 值的判别值。

下面的代码不起作用...

```
for idx = 1:numel(xAns)
    disp(discriminant(xAns(idx)));
end 
```

希望有人可以提供解决方案。谢谢

最好的...SL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:02:08.030

如果您`discriminant`匿名定义函数，如下所示：

```
 descriminant = @(x) 24*x.^2 - 32; 
```

然后您所要做的就是在您正在运行的命令行或函数中键入以下语句：

```
 D = discriminant(xAns) 
```

如果您的函数已使用元素运算符“。”定义 如有必要，上面的语句将打印出`discriminant`在矩阵的每个元素处评估的函数`xAns`，无论其大小或形状如何。返回的值将与矩阵具有相同的形状`xAns`。我认为这将是解决您的问题的最简单方法。

# google-search - 通过地址栏调用谷歌搜索

> ID：13442631
> 
> 赞同：1
> 
> 时间：2012-11-18T17:30:38.507
> 
> 标签：google-search

是否可以以编程方式调用 Google 搜索？

当我搜索“测试”时，这是生成的 URL： [https://www.google.com/search?hl=en&newwindow=1&site=&source=hp&q=test&oq=test&gs_l=hp.3..0l2j0i20l2j0l6.1364.1718.0.1871。 4.4.0.0.0.0.55.90.3.3.0.les%3B..0.0...1c.1.tNyGgn-NsNQ](https://www.google.com/search?hl=en&newwindow=1&site=&source=hp&q=test&oq=test&gs_l=hp.3..0l2j0i20l2j0l6.1364.1718.0.1871.4.4.0.0.0.0.55.90.3.3.0.les%3B..0.0...1c.1.tNyGgn-NsNQ)

但似乎我可以在不影响搜索结果的情况下减少 URL，所以变成

[https://www.google.com/search?hl=en&newwindow=1&site=&source=hp&q=test](https://www.google.com/search?hl=en&newwindow=1&site=&source=hp&q=test)

这似乎产生了相同的结果。我只是想要一种在谷歌网站本身上调用搜索而不在搜索文本框中输入的方法。'q'参数似乎决定了搜索结果，所以我每次想在google上搜索时只要修改地址上的这个参数值，搜索结果就会和在google主页搜索框中输入参数一样?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:25:26.057

您实际上可以进一步缩短它，只需使用：

```
https://www.google.com/search?q=test 
```

查询中的其余参数表示有关查询来源的其他信息，可帮助 Google 了解其流量来源。如果这只是一个可以为您节省一些时间的简单工具，那应该没问题，但请注意，为了抓取/其他目的多次执行此类操作可能会阻止您（https://developers.google.com/错误/）。

# jquery - 如何在 jquery listview 中获取所选项目（对象）？

> ID：13442638
> 
> 赞同：1
> 
> 时间：2012-11-18T17:31:08.707
> 
> 标签：jquery, delphi, rest, listview, datasnap

我想要一个客户列表，当我点击这个客户时，我想在另一个页面上获取详细信息。我用 GetWorkerList 函数填充我的 jquery listview 并且它运行良好但是当我单击我的 listview 时，我不知道如何获取我的 json 数组的 goog json 对象？我是 javascript 和 jquerymobile 的初学者，我做了这个来填充我的列表视图。

Javascript代码

```
function GetWorkerList()
{
    res = serverMethods().GetWorkerList($('#pWorkerList #SearchWorkerValue').val());
    var array = res.result;
    var strarray = '';
    for (var n=0; n<array.length; n++) {
            strarray += '<li><a href="#">'
                + array[n].Name
                + ((array[n].FirstNam == null) ? '' : ' ' + array[n].FirstNam)
                + '</a>' + '</li>';
    };

    $("#lvWorker").empty();
    $("#lvWorker").append (strarray);
    $('#pWorkerList #lvWorker').listview('refresh');
}

function SelectCustomer()
{
    toto = $("#lvCustomer");
    alert('Display Customer detail');
}

$(document).ready(function() {
  $('#bCustomerList').click (function (){
    GetCustomerList();
   });
  $('#lvCustomer').click (function (){
    SelectCustomer();
   });

}); 
```

HTML 代码

```
<!-- CustomerList -->
<div data-role="page" id="pCustomerList">
    <div data-role="header">
        <h1>LacourApps customer</h1>
        <a data-role="button" href="#pmain" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">Back</a>
    </div><!-- /header -->
    <input onclick="GetCustomerList" value="CustomerList" type="button" id="bCustomerList">
    <input id="SearchCustomerValue" value="VAS">
    <div data-role="content">
        <ul data-role="listview" id="lvCustomer" data-inset="true" data-filter="true">
        </ul>
    </div><!-- /content -->
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page --> 
```

# css - CSS列表进入滚动div - 如何自动聚焦于选定/活动 ?

> ID：13442639
> 
> 赞同：0
> 
> 时间：2012-11-18T17:31:14.043
> 
> 标签：css, focus, html-lists, selecteditem

我有一个包含在固定高度的滚动 div 中的列表。当我点击一个类别转到所选页面时，我希望用户看到当前所选类别自动聚焦在其位置。也就是说，用户不必从头看到列表，而是关注当前位置。怎么做？

# css - CSS：display:table-cell IE7+ 或强制浮动 div 在一行中

> ID：13442645
> 
> 赞同：0
> 
> 时间：2012-11-18T17:31:32.970
> 
> 标签：css, internet-explorer-7

问题是，我需要强制所有 div 排成一行。具有表格单元格行为。 **并且支持IE7。**

链接到小提琴[http://jsfiddle.net/Beck/BH5WG/](http://jsfiddle.net/Beck/BH5WG/) 和下面的代码副本：

html:

```
<div class="wr">
    <div class="con">
        <div class="item">some text1</div>
        <div class="item">some text1 some text1</div>
        <div class="item">some text1</div>
        <div class="item">some text1 some text1</div>
    </div>
</div>

<div class="wr" id="wr2">
    <div class="con">
        <table cellspacing="0" cellpadding="0">
            <tr>
                <td>
                    <div class="item">some text1</div>
                </td>
                <td>
                    <div class="item">some text1 some text1</div>
                </td>
                <td>
                    <div class="item">some text1</div>
                </td>
                <td>
                   <div class="item">some text1 some text1</div>
                </td>
            </tr>
        </table>
    </div>
</div> 
```

CSS：

```
.wr {
    width:300px;
    border:1px solid red;
}
.con {
    height:24px;
}
.item {
    float:left;
    white-space:nowrap;
}

#wr2 {
    margin:50px 0px 0px 0px;
}

​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T00:44:31.920

您可以使用IE6/7 的[`display: table`仿真来在 IE6/7](http://tanalin.com/en/projects/display-table-htc/)中准确地呈现表格。CSS 将如下所示：

```
/* Bind htc behavior to element that should behave like table. */
.con {behavior: url(/js/display-table.min.htc); } 
```

或这个：

```
/* Bind htc to BODY and then trigger tably behavior via -dt-display property. */
BODY {behavior: url(/js/display-table.min.htc); }
.con {-dt-display: table; }
.item {-dt-display: table-cell; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T00:35:32.163

我手头没有我的 IE7 测试环境，但你有没有尝试`display:inline-block;`过`float:left`？

IE7默认不理解，但它确实理解`display:inline; zoom:1;`

这可能使其更愿意遵守`white-space:nowrap;`

例如，从你的小提琴：

```
.wr {
    border:1px solid red;
    white-space:nowrap;
}

.con {
    height:24px;
}

.item {
    display:inline-block;
    *display:inline;
    *zoom:1;
}

#wr2 {
    margin:50px 0px 0px 0px;
} 
```

# java - 在 Java 中选择，例如“如果上个月的值为负数，则将键入的月份的值与上一个月份的值相加”

> ID：13442647
> 
> 赞同：0
> 
> 时间：2012-11-18T17:32:00.717
> 
> 标签：java, mysql, date, select, if-statement

这张桌子被称为 imposto。

```
+------------------+------------+------+-----+---------+-------+
| Field            | Type       | Null | Key | Default | Extra |
+------------------+------------+------+-----+---------+-------+
| cod_bolsa        | varchar(7) | NO   | PRI | NULL    |       |
| mes              | date       | NO   | PRI | NULL    |       |
| ano              | date       | NO   | PRI | NULL    |       |
| lucro_mes_vista  | double     | NO   |     | NULL    |       |
| preju_mes_vista  | double     | NO   |     | NULL    |       |
| lucro_mes_ouro   | double     | NO   |     | NULL    |       |
| preju_mes_ouro   | double     | NO   |     | NULL    |       |
| resul_mes_demais | double     | NO   |     | NULL    |       |
| venda_vista      | double     | NO   |     | NULL    |       |
| venda_ouro       | double     | NO   |     | NULL    |       |
| resul_mes        | double     | NO   |     | NULL    |       |
| resul_acu        | double     | NO   |     | NULL    |       |
| base_calc        | double     | NO   |     | NULL    |       |
| imp_renda        | double     | NO   |     | NULL    |       |
| imp_recol_mes    | double     | NO   |     | NULL    |       |
| base_calc_irrf   | double     | NO   |     | NULL    |       |
| imp_retido_acu   | double     | NO   |     | NULL    |       |
| imp_devido       | double     | NO   |     | NULL    |       |
+------------------+------------+------+-----+---------+-------+ 
```

3 个 JTextField，一个用于获取 cod_bolsa，另一个用于获取 mes（月），最后一个用于获取 ano（年）。

resul_acu 是 lucro_mes_vista（选定月份的利润）和 preju_mes_vista（选定月份的亏损）之间的总和。

如果 result_acu 为正：imp_retido_acu 为 0。

如果上个月的 preju_mes_vista 值（无符号）大于该月的 lucro_mes_vista（即，如果亏损多于利润）：imp_retido_acu 是所选月份的 imp_recol_mes（其值为 lucro_mes_vista + preju_mes_vista 的 0.005%）之间的总和和上个月的 imp_recol_mes。

我试过了：

```
String sql = "SELECT a.cod_bolsa AS Codigo, "
            + "a.nome AS Nome, "
            + "b.data AS Data, "
            + "b.lucro_mes_vista AS Lucro_do_Mes_Acoes_Vista, "
            + "b.preju_mes_vista AS Prejuizo_do_Mes_Acoes_Vista, "
            + "b.venda_vista AS Venda_Acoes_Vista, "
            + "b.lucro_mes_vista+b.preju_mes_vista AS Resultado_do_Mes, "
            + "b.lucro_mes_vista+b.preju_mes_vista AS Resultado_Acumulado, "
            + "b.base_calc AS Base_de_Calculo, "
            + "b.imp_renda AS Imposto_de_Renda, "
            + "(b.lucro_mes_vista+b.preju_mes_vista)*0.00005 AS Imposto_Recolhido_no_Mes, "
            + "b.base_calc_irrf AS Base_de_Calculo_IRRF, "

            + "b.imp_retido_acu "
            + "IF((b.lucro_mes_vista+b.preju_mes_vista)>0, "
            + "imp_retido_acu=0 " // if true
            + "AS Imposto_Retido_Acumulado, "

            + "b.imp_retido_acu=((b.lucro_mes_vista+b.preju_mes_vista)*0.00005)+"
            + "(b.lucro_mes_vista+b.preju_mes_vista)*0.00005) " // if false
            + "AS Imposto_Retido_Acumulado "

            + "WHERE DATE_FORMAT(STR_TO_DATE(b.data,'%Y-%m') = DATE_FORMAT("
            + "DATE_ADD(STR_TO_DATE(b.data,'%Y-%m'), INTERVAL -1 MONTH), '%Y-%m') "

            + "b.imp_devido AS Imposto Devido "

            + "FROM cadastro a LEFT OUTER JOIN imposto b USING (cod_bolsa) "
            + "WHERE a.cod_bolsa=?, MONTH(b.mes)=? AND YEAR(b.ano)=? ";

    String consCod = FrmImposto.txtCodImp.getText();
    String consMes = FrmImposto.txtMes.getText();
    String consAno = FrmImposto.txtAno.getText(); 
```

尽管我在 Sashi Kant 更正之前输入 txtCodImp 字段时指定了参数 1，但我收到以下错误：

```
java.sql.SQLException: No value specified for parameter 1
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:974)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919)
    at com.mysql.jdbc.PreparedStatement.checkAllParametersSet(PreparedStatement.java:2603)
    at com.mysql.jdbc.PreparedStatement.fillSendPacket(PreparedStatement.java:2578)
    at com.mysql.jdbc.PreparedStatement.fillSendPacket(PreparedStatement.java:2502)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2259)
    at view.ListarImposto.Pstmt_executeQuery_PopulaTabela(ListarImposto.java:145)
    at view.ListarImposto.<init>(ListarImposto.java:91)
    at view.FrmImposto.jButton2ActionPerformed(FrmImposto.java:109)
    at view.FrmImposto.access$000(FrmImposto.java:11)
    at view.FrmImposto$1.actionPerformed(FrmImposto.java:51) 
```

EDIT1：现在我得到了这个，它更严重：

```
MySQLSyntaxErrorException:
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near
'WHERE DATE_FORMAT(STR_TO_DATE(b.data,'%Y-%m') = DATE_FORMAT(DATE_ADD(STR_TO_DATE'
at line 1 
```

EDIT2：询问数据库老师，我得到了一些进步。

```
SELECT cod_bolsa AS cod_venda,
DATE_FORMAT(data, '%Y-%m') AS mes_venda, SUM(qtd_venda*preco_venda) AS valor_venda
FROM movimentacao
WHERE cod_bolsa='0000002';

SELECT cod_bolsa AS cod_compra, DATE_FORMAT(data, '%Y-%m') AS mes_compra, SUM(qtd_compra*preco_compra) AS valor_compra
FROM movimentacao
WHERE cod_bolsa='0000002'; 
```

valor_compra 与 lucro_mes_vista 相同，valor_venda 与 prejuizo_mes_vista 相同

上面 SELECT 的结果：

```
+-----------+-----------+-------------+
| cod_venda | mes_venda | valor_venda |
+-----------+-----------+-------------+
| 0000002   | 2012-08   |      337.25 |
+-----------+-----------+-------------+

+------------+------------+--------------+
| cod_compra | mes_compra | valor_compra |
+------------+------------+--------------+
| 0000002    | 2012-08    |        181.8 |
+------------+------------+--------------+ 
```

要获得 Resultado_do_Mes：

```
SELECT venda.data_venda, compra.data_compra,
(venda.valor_venda)-(compra.valor_compra) AS resultado_do_mes

FROM
(SELECT cod_bolsa cod_venda, DATE_FORMAT(data, '%Y-%m-%d') AS data_venda, 
SUM(qtd_venda*preco_venda) AS valor_venda

FROM movimentacao
GROUP BY cod_bolsa) venda

LEFT JOIN
(SELECT cod_bolsa AS cod_compra, data AS data_compra, 
SUM(qtd_compra*preco_compra) AS valor_compra

FROM movimentacao
GROUP BY cod_bolsa) compra

ON compra.cod_compra = venda.cod_venda AND compra.data_compra = venda.data_venda

WHERE venda.cod_venda = '0000002'
OR compra.cod_compra = '0000002'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:40:27.100

查询没有问题，唯一的问题是你忘记在 PreparedStatement 中设置参数。

您需要设置 ::

```
a.cod_bolsa=?, MONTH(b.mes)=? AND YEAR(b.ano)=? "; 
```

喜欢

```
 ptmt.setString(1,value) 
```

# c# - 在 C# 中序列化一个类

> ID：13442648
> 
> 赞同：0
> 
> 时间：2012-11-18T17:32:08.900
> 
> 标签：c#, json, class, serialization

我希望有人可以帮助我解决将数据序列化到课程中的问题吗？

我需要将以下 json 字符串发送到 Web 服务：

{ "arrivalAt": "2012-12-24T20:00:00.0000000Z", "pickup":{"streetName":"Amaliegade","houseNumber":"36","zipCode":"1256","city" :"Copenhagen K","country":"DK","lat":55.68,"lng":12.59}, "dropoff":{"streetName":"Amaliegade","houseNumber":"36","zipCode ":"1256","city":"Copenhagen K","country":"DK","lat":55.68,"lng":12.59}, "vehicleType": "fourSeaterAny", "comments": "你好" }'

我将此 json 字符串放入[http://json2csharp.com/](http://json2csharp.com/)并生成以下类：

```
public class Pickup
{
public string streetName { get; set; }
public string houseNumber { get; set; }
public string zipCode { get; set; }
public string city { get; set; }
public string country { get; set; }
public double lat { get; set; }
public double lng { get; set; }
}

public class Dropoff
{
public string streetName { get; set; }
public string houseNumber { get; set; }
public string zipCode { get; set; }
public string city { get; set; }
public string country { get; set; }
public double lat { get; set; }
public double lng { get; set; }
}

public class RootObject
{
public string arrivalAt { get; set; }
public Pickup pickup { get; set; }
public Dropoff dropoff { get; set; }
public string vehicleType { get; set; }
public string comments { get; set; }
} 
```

我以前曾设法做到这一点，但从来没有遇到过班级中有班级的情况，可以这么说。意思是“Pickup”和“DropOff”设置......

当我试图弄清楚在这条线上该怎么做时，我被卡住了......

```
Booking bookingdetails = new ClickATaxi_Classes.Booking(THIS IS WHERE I WILL PUT THE 17 BITS OF INFORMATION BUT HOW?); 
```

我觉得我需要对班级做一些事情以使其接受争论，但我不知道从哪里开始以及如何发送接送信息

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:45:55.363

首先，您应该稍微重构一下生成的代码

```
public class Location
{
     public string streetName { get; set; }
     public string houseNumber { get; set; }
     public string zipCode { get; set; }
     public string city { get; set; }
     public string country { get; set; }
     public double lat { get; set; }
     public double lng { get; set; }
}

public class Booking
{
     public string arrivalAt { get; set; }
     public Location pickup { get; set; }
     public Location dropoff { get; set; }
     public string vehicleType { get; set; }
     public string comments { get; set; }
} 
```

不需要两个具有相同含义的类。之后，您只需实例化预订对象。

```
Booking obj = new Booking { arrivalAt = "ARRIVAL", pickup = new Location { streetName = "", houseNumber = "" ... }, dropoff = new Location { streetName = "", houseNumber = "" ...}, vehicleType = "", comments = "" } 
```

接下来您将序列化为一个字符串，我喜欢[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)，但您可以使用任何序列化程序。
如果你想使用 JSON.NET，你可以[按照这些说明](https://stackoverflow.com/questions/4444903/how-to-install-json-net-using-nuget)通过[Nuget](http://nuget.org/)安装它，接下来将 using 语句添加到将序列化对象的类的顶部： using Newtonsoft.Json;

最后只需调用 JsonConvert

```
string json = JsonConvert.SerializeObject(product); 
```

以下是其他序列化程序的一些链接：

*   [http://msdn.microsoft.com/en-us/library/bb410770.aspx](http://msdn.microsoft.com/en-us/library/bb410770.aspx)
*   [http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers](http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers)
*   [http://code.google.com/p/protobuf-net/](http://code.google.com/p/protobuf-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:41:28.683

[.NET](http://json.codeplex.com/) . 你需要一个 JSON 序列化器。随便挑一个你喜欢的。已列出的 3 个效果很好。并确保您阅读[本文](http://secretgeek.net/csv_trouble.asp)以更好地理解为什么需要 JSON 序列化程序。

# jquery - 颜色框中的 jQuery UI 滑块

> ID：13442649
> 
> 赞同：1
> 
> 时间：2012-11-18T17:32:09.370
> 
> 标签：jquery, jquery-ui, jquery-plugins, colorbox

我想在 colorbox 插件中使用 jQuery UI 滑块。事实上，任何其他滑块都可以，但似乎它们都不起作用。它出现在屏幕上，但当我试图移动它时没有反应。这可能是一个彩盒问题。

```
$('.cb').colorbox({
    html:'<div id="slider"></div><script>$('#slider').slider();</script>'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:14:39.823

您需要为滑块转义单引号或将它们更改为双引号。我个人更喜欢双引号。

```
$('.cb').colorbox({
    html:'<div id="slider"></div><script>$("#slider").slider();</script>'
}); 
```

# xml - 如果我在 XML 文件中有架构位置，XSL FO 转换将不起作用

> ID：13442650
> 
> 赞同：0
> 
> 时间：2012-11-18T17:32:09.713
> 
> 标签：xml, xslt, xsl-fo

我的 XSL-FO 转换不适用于下面指定的 XML。似乎那些 xmlns 和 schemaLocation 正在困扰转换。

```
<book
xmlns="http://www.example.org/book"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.example.org/book book.xsd">

    <title>Something</title>
</book> 
```

但是，如果我像下面这样重写我的 XML，则转换运行顺利，并且我在 XSL 中的所有 XPath 都运行良好。

```
<book>
    <title>Something</title>
</book> 
```

我的问题是：是否有某种方法可以忽略确定架构位置等的那几行代码？？？？

先感谢您！

Java类：

```
public static void generirajPDF() {
    try {

        // Setup directories
        File baseDir = new File(".");
        File outDir = new File(baseDir, "pdf");
        outDir.mkdirs();

        // Setup input and output files
        File xmlfile = new File(baseDir, "WebContent/AvtoSolaZ2.xml");
        File xsltfile = new File(baseDir, "WebContent/AvtoSolaZaposleniXSL.xsl");
        File pdffile = new File(outDir, "Test.pdf");

        // configure fopFactory as desired
        FopFactory fopFactory = FopFactory.newInstance();

        FOUserAgent foUserAgent = fopFactory.newFOUserAgent();
        // configure foUserAgent as desired

        // Setup output
        OutputStream out = new java.io.FileOutputStream(pdffile);
        out = new java.io.BufferedOutputStream(out);

        try {
            // Construct fop with desired output format
            Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out);

            // Setup XSLT
            TransformerFactory factory = TransformerFactory.newInstance();
            Transformer transformer = factory
                    .newTransformer(new StreamSource(xsltfile));

            // Set the value of a <param> in the stylesheet
            transformer.setParameter("versionParam", "2.0");

            // Setup input for XSLT transformation
            Source src = new StreamSource(xmlfile);

            // Resulting SAX events (the generated FO) must be piped through
            // to FOP
            Result res = new SAXResult(fop.getDefaultHandler());

            // Start XSLT transformation and FOP processing
            transformer.transform(src, res);

        } finally {
            out.close();
        }

        if (pdffile.toString().endsWith(".pdf"))
            Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + pdffile);
        else {
            Desktop desktop = Desktop.getDesktop();
            desktop.open(pdffile);
        }

        System.out.println("Konec");

    } catch (Exception e) {
        e.printStackTrace(System.err);
        System.exit(-1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:32:08.060

如果您使用 XSLT 2.0 处理器运行您的 XSLT，则设置

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transformation"
  xpath-default-namespace="http://www.example.org/book"
  version="2.0"> 
```

在样式表的根元素上，您无需更改代码中的匹配模式和 XPath 表达式。

如果您使用 XSLT 1.0 处理器，则需要重写代码以适应命名空间，例如

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transformation"
  xmlns:df="http://www.example.org/book"
  exclude-result-prefixes="df"
  version="1.0">

<xsl:template match="df:book">
  <xsl:value-of select="df:title"/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:12:47.590

如果您的 XML 输入是

```
<book  xmlns="http://www.example.org/book" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.example.org/book book.xsd">
<title>Something</title>
</book> 
```

样式表是

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/*[local-name()='book']">
    <root>Matched the root with name space why not others</root>
</xsl:template>
</xsl:stylesheet> 
```

你的输出会像

```
<?xml version="1.0" encoding="UTF-8"?>
<root>Matched the root with name space why not others
</root> 
```

local-name() 函数是 XSLT 1.0 (http://www.xsltfunctions.com/xsl/fn_local-name.html) 的一部分，它只匹配没有命名空间的元素名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:59:17.660

这个问题大约每天被问一次。只需搜索“XSLT 默认命名空间”。将元素放入命名空间会更改它们的名称，并且只有在正确的命名空间中才能找到它们。

# mysql-workbench - 如何在 MySQL 模型上重命名 SQL 脚本？

> ID：13442652
> 
> 赞同：3
> 
> 时间：2012-11-18T17:32:26.333
> 
> 标签：mysql-workbench

我是 MySQL Workbench 的新手，我真的不知道如何在 MySQL 建模面板上重命名 SQL 脚本...

![在此处输入图像描述](../Images/69ea645e4d4dfbe32e7346cdec93e52a.png)

我觉得有点傻！

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T08:37:11.167

只需以最小的延迟再次单击选定的脚本（不要双击！）。您将能够编辑名称。

# iphone - 'removeLastObject' 越界错误

> ID：13442657
> 
> 赞同：0
> 
> 时间：2012-11-18T17:33:22.197
> 
> 标签：iphone, xcode, ipad

我有一个名为 lineStore 的 NSMutableArray，当我运行时：

```
[lineStore removeLastItem] 
```

我得到错误

```
'NSRangeException'....index 92 beyond bounds [0..90] 
```

索引超出其界限的 2 处。不是主要问题，显然我可以使用“removeObjectAtIndex”方法。问题是为什么这种方法会这样做，我在文档中遗漏了什么。这种方法*听起来很*简单，所有其他 NSMutableArray 方法似乎都以直观的方式工作。

谢谢！

# python - 多个复选框 Python HTML SQL

> ID：13442662
> 
> 赞同：1
> 
> 时间：2012-11-18T17:33:42.193
> 
> 标签：python, html, sql, checkbox

我有多个复选框，我想允许用户选择多个并显示结果：这是 HTML：

```
<form action= "antisearch.py"> 

 <input type="checkbox" name="a" value="b">b<br>
 <input type="checkbox" name="a" value="c">c<br>
 <input type="checkbox" name="a" value="d">d<br>
 <input type="checkbox" name="a" value="e">e<br>
 <input type= submit value = "Search"/> <input type= reset value = "Clear"/> 
```

这是python 2.7

```
form =cgi.FieldStorage() 

my_a=form.getlist("a") 

     db = MySQLdb.connect(host="127.0.0.1",user="root",passwd="", db="project")
     cursor=db.cursor() 
     print "Results for the a(s) : <br>"
     sql = "select * FROM table name where a= '%s'" %(my_a)  
     cursor.execute(sql) 
     rows = cursor.fetchall()  
     for row in rows:
       print row
       print "<br>"

      db.close() 
```

任何人都可以帮忙吗？

# optimization - 如何优化加载和存储？

> ID：13442665
> 
> 赞同：1
> 
> 时间：2012-11-18T17:33:59.293
> 
> 标签：optimization, gcc, load, store

我试图在不同的目标上执行一堆操作，例如 ARM、Bfin ......但是每次我用 C 编写一个简单的代码然后为每个操作编译它时，它都有 2 个加载和一个存储，这是不必要的对于每个操作。

```
 ldr     r2, [fp, #-24]
    ldr     r3, [fp, #-28]
    add     r3, r2, r3
    str     r3, [fp, #-20]
    ldr     r2, [fp, #-36]
    ldr     r3, [fp, #-40]
    add     r3, r2, r3
    str     r3, [fp, #-32]
    ldr     r2, [fp, #-44]
    ldr     r3, [fp, #-48]
    add     r3, r2, r3
    str     r3, [fp, #-20]
    ldr     r3, [fp, #-16]
    add     r3, r3, #1
    str     r3, [fp, #-16] 
```

当我打开任何优化选项时，甚至`-O1`，它都会简单地计算结果并将其存储在输出中：

```
 subl    $24, %esp
    movl    $4, 4(%esp)
    movl    $.LC0, (%esp) 
```

无论如何，我可以在不一遍又一遍地获取相同变量的情况下进行操作吗？我试过了`gcc -fgcse-lm`，`-fgcse-sm`但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:34:01.637

这取决于操作。Gcc 无法为

```
int a(int b, int c)
{
  b-=c;
  c-=b;
  b-=c;
  c-=b;
  b-=c;
  c-=b;
  return c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:59:47.820

如果您想在 gcc 中进行基准测试并避免优化器的常量折叠和死代码消除，您需要使用非常量作为输入并确保结果到达某个地方。

例如，而不是使用

```
int main(int argc, char** argv) {
    int a = 1;
    int b = 2;

    start_clock();
    int c =  a + b;
    int d =  c + a;
    int e =  d + b;
    stop_clock();
    output_time_needed();

    return 0;
} 
```

你应该使用类似的东西

```
int main(int argc, char** argv) {
    int a = argc;
    int b = argc + 1;

    start_clock();
    int c =  a + b;
    int d =  c + a;
    int e =  d + b;
    stop_clock();
    output_time_needed();

    return e;
} 
```

# cappuccino - 卡布奇诺 [警告]：无法连接操作

> ID：13442667
> 
> 赞同：1
> 
> 时间：2012-11-18T17:34:03.070
> 
> 标签：cappuccino, objective-j

这必须是一些愚蠢的事情，因为这是非常基本的，即使那样它也不起作用。

无论如何，

```
➜  ~  capp --version
cappuccino 0.9.6 (2012-11-17 788ee6) 
```

我使用以下命令从模板构建了一个基本的 NibApplication。

```
capp gen -t NibApplication ButtonTest 
```

我没有对框架进行符号链接。

我将以下方法添加到 AppController.j

```
- (IBAction)hello:(id)sender {
    alert("hello");
} 
```

我运行了 XcodeCapp，在 Xcode 4.5.2 中打开了项目，并在窗口中添加了一个 NSButton 并将其链接到 AppController 中的操作“hello:”

当我在 Safari 中运行 index-debug.html 时，这就是我在控制台中得到的。

```
2012-11-18 22:58:01.566 Cappuccino [warn]: Could not connect the action hello: to target of class AppController 
```

我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:22:24.803

所以，我忘了通过一个简单的网络服务器运行它。我通过在 Apache 上运行它来测试它，它可以工作。很奇怪，Safari 控制台没有给我任何关于此的错误。

# c# - 您可以在没有 Visual Studio 或任何其他软件的计算机上执行 C# 程序吗？

> ID：13442671
> 
> 赞同：4
> 
> 时间：2012-11-18T17:34:32.047
> 
> 标签：c#

我有一个工作 C# 项目，我想在另一台计算机上运行。唯一的问题是，另一台计算机没有 Visual Studio，我不想在上面安装任何软件。是否可以运行 .exe 文件或其他东西，以便我在没有 Visual Studio 的情况下获得 GUI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:44:48.660

我认为您要问的是是否可能，如果可能，如何。正如其他人所提到的，是的，这是可能的。这是重点。您的 exe 将位于 /bin/debug 或 /bin/release 文件夹中，具体取决于您编译的模式。只需将 .exe 文件发送到另一台计算机，并假设它具有最新版本的 Windows，它将运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:39:14.367

它唯一需要的是[.NET 客户端](http://www.microsoft.com/en-us/download/details.aspx?id=17113)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:36:14.583

是的。VS 将创建一个带有 setup.exe 的 .msi 文件供您的用户安装。只要用户拥有正确的点网框架，应用程序就可以正常运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:36:36.277

您不需要 Visual Studio 来运行可执行文件，但它需要的是安装了正确的 .NET Framework，即编译可执行文件的版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T17:38:04.333

是的，这是可能的，只要另一台计算机安装了符合您的软件要求的 .net 框架版本，您就可以通过创建带有安装程序的 MSI 或通过从创建的 bin 目录中发送 exe 和任何所需的 dll 来发送应用程序在编译期间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T17:44:11.250

C# 基于 Microsoft .NET 框架。.NET 框架有多个版本。1.0 到 4.5

如果您在 .net framework 2.0 中构建您的代码，那么要让您的 .exe 文件在另一台计算机上运行，​​他们必须首先在该计算机上安装 .net framework 2.0。所有其他版本相同。

所有框架都可以从 microsoft.com 网站下载。

# c# - 在应用程序退出时停止 Java 进程

> ID：13442673
> 
> 赞同：1
> 
> 时间：2012-11-18T17:34:43.530
> 
> 标签：c#, java, process

我目前正在尝试编写一个 Windows 窗体应用程序（在 C# 中），它可以启动和停止多个 Java 进程（使用参数来运行特定的 jar 文件）。

我开始每个过程都没有问题；但是我需要找到一种方法让应用程序在退出时关闭所有这些应用程序，无论采用哪种方式（作为未知数量的 java 进程），我都在一个单独的工作线程中运行，以避免占用主线程同时应用程序正在运行（并捕获进程输出）。

我看过这个：[关闭应用程序时关闭另一个进程](https://stackoverflow.com/questions/943681/close-another-process-when-application-is-closing)

但它似乎不适用于我的目的（它不会关闭进程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:06:43.540

> 它似乎不适用于我的目的..（它不会关闭进程）。

但它有什么作用？它是否至少关闭了 Java 窗口？您的 Java 应用程序甚至*有*窗口吗？

一般来说，

1.  如果可能（即如果您自己构建 Java 应用程序），您应该在您的 C# 和 Java 应用程序之间建立一个机制，以优雅地通知 Java 应用程序关闭（套接字等）
2.  [否则，您仍然可以通过发送 WM_CLOSE](https://stackoverflow.com/questions/2055753/how-to-gracefully-terminate-a-process)来优雅地关闭 Java 应用程序（如果它们是图形应用程序）。这就是`Process.CloseMainWindow/Process.Close`您尝试（但失败）的方法所做的。如果您的 Java 应用程序是控制台应用程序，您可以尝试关闭其/它们的[标准输入](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardinput.aspx)和/或进行[模拟`^C`](https://stackoverflow.com/questions/7741820/start-a-exe-file-from-a-service-and-stop-it-by-sending-sigbreak)。
3.  最后，当所有其他方法都失败时，使用`Process.Kill`来终止您的 Java 子进程——不优雅。您可能希望您的控制进程首先尝试上面的 1\. 或 2.，等到所有子进程都已退出或直到经过很短的时间（例如 3 秒），然后才继续`Process.Kill`处理尚未退出的任何进程.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:12:32.233

`procrss.kill`Kill 方法是使进程以暴力和迅速的方式结束的极好方法。Kill 方法可以抛出一些异常。但它通常不会而且通常会实现你想要的目标——介于冷血谋杀和快速无痛处决之间。

# java - 在通用 java BST 类中将值交换为键时遇到问题

> ID：13442676
> 
> 赞同：3
> 
> 时间：2012-11-18T17:34:49.573
> 
> 标签：java, generics

我得到了一个具有以下声明的通用二叉搜索树类：

```
public class BST<K extends Comparable<K>, V> 
```

我被要求编写一个反转 BST 的方法，使值成为键，键成为值。当我调用以下方法时（在给定的类中定义）

```
reverseDict.put(originalDict.get(key), key); 
```

我从 Netbeans 收到以下两条错误消息：

> 线程“主”java.lang.RuntimeException 中的异常：无法编译的源代码 - 错误的符号类型：BST.put

并且：

> 没有找到适合方法的`put(V,K)`方法`BST.put(BST<K,V>.Node,K,V)`不适用（实际参数列表和形式参数列表的长度不同）方法`BST.put(K,V)`不适用（实际参数`V`不能通过`K`方法调用转换转换为）其中`V`，`K`是类型变量：
> 
> `V extends Object`在方法中声明`<K,V>reverseBST(BST<K,V>)`
> 
> `K extends Comparable<K>`在方法中声明`<K,V>reverseBST(BST<K,V>)`

从错误消息告诉我的内容来看，由于我的值没有扩展`Comparable`，我无法将它们用作键。如果我是对的，我怎样才能在不改变给定课程（可能是演员表）的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:46:05.260

我认为问题在于您需要 a`V extends Comparable<V>`才能将其用作键，但您只有 a`V`没有界限。我*认为*您需要编写一个静态方法，例如..

```
public static <A extends Comparable<A>, B extends Comaparable<B>> 
    BST<B,A> invert(BST<A,B> bst) {...} 
```

..以确保附加条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:52:17.940

您的类`public class BST<K extends Comparable<K>, V>`必须有`put`方法（通常`insert`在树中）以避免此错误。也是`get`方法。

添加这个方法

```
public void put(K key, V value) {
   // add key and associated value to this BST; 
} 
```

并通过调用该方法

```
reverseDict.put(originalDict.get(key), key) ; 
```

这是一个很好的[二叉搜索树](http://pages.cs.wisc.edu/~skrentny/cs367-common/readings/Binary-Search-Trees/index.html)示例，您可以参考。

# css - 在 Twitter Bootstrap 中覆盖 CSS 属性

> ID：13442677
> 
> 赞同：0
> 
> 时间：2012-11-18T17:34:51.227
> 
> 标签：css, twitter-bootstrap

我想改变 Twitter Bootstrap 的外观。我基本上知道这是如何工作的，并且一切都已设置和工作。

默认情况下，`.navbar-inner`有一个边界半径。看看它是如何在下面声明的——他们使用了前缀。

```
.navbar-inner {
  min-height: 40px;
  padding-right: 20px;
  padding-left: 20px;
  background-color: #fafafa;
  background-image: -moz-linear-gradient(top, #ffffff, #f2f2f2);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#f2f2f2));
  background-image: -webkit-linear-gradient(top, #ffffff, #f2f2f2);
  background-image: -o-linear-gradient(top, #ffffff, #f2f2f2);
  background-image: linear-gradient(to bottom, #ffffff, #f2f2f2);
  background-repeat: repeat-x;
  border: 1px solid #d4d4d4;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ffffffff', endColorstr='#fff2f2f2', GradientType=0);
  *zoom: 1;
  -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);
     -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);
          box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);
} 
```

现在让我们说我不想要那个`border-radius`。我必须这样写吗

```
.navbar-inner {
    border-radius: 0;
} 
```

或者像这样

```
.navbar-inner {
    -webkit-border-radius: 0;
     -moz-border-radius: 0;
          border-radius: 0;
} 
```

确保最大的浏览器兼容性？

使用第一个选项对我有用，它看起来比所有前缀都好，但我担心某些浏览器不会理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:49:36.323

如果要覆盖所有旧版浏览器，则必须使用前缀。这就是引导程序开始包含前缀的原因。

如果您只使用无前缀版本，则仅实现了前缀版本的旧浏览器将无法正确解释无前缀版本，并且不会被更改/清零。

# java - Spring MVC 如何在我的控制器方法中获取 GET HTTP 请求的参数值？

> ID：13442678
> 
> 赞同：87
> 
> 时间：2012-11-18T17:34:51.580
> 
> 标签：java, spring, http, parameters, request

在此期间，我正在研究 Spring MVC 展示示例（可从 STS 仪表板下载），我对`Request Mapping`示例有一些简单的问题：

1）在我的`home.jsp`页面中，我有这个链接：

```
 <li>
            <a id="byParameter" class="textLink" href="<c:url value="/mapping/parameter?foo=bar" />">By path, method, and presence of parameter</a>
        </li> 
```

正如您通过此链接所看到的，我正在执行一个 HTTP GET 请求，该请求具有一个“foo”参数，其中包含值：“bar”。

此 HTTP 请求由控制器类 MappingController 的以下方法处理：

```
@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="foo")
public @ResponseBody String byParameter() {
    return "Mapped by path + method + presence of query parameter! (MappingController)";
} 
```

`GET`此方法管理具有名为“foo”的参数的HTTP 请求（仅类型）

如何获取此参数的值（“bar”）并将其放入我的 by Parameter 方法代码内的变量中？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-11-18T17:40:54.253

如[文档中所述](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-requestparam)，通过使用`@RequestParam`注释：

```
public @ResponseBody String byParameter(@RequestParam("foo") String foo) {
    return "Mapped by path + method + presence of query parameter! (MappingController) - foo = "
           + foo;
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-11-19T10:10:36.660

您还可以使用 URI 模板。如果你将你的请求构造成一个安静的 URL，Spring 可以从 url 中解析提供的值。

**HTML**

```
<li>
    <a id="byParameter" 
       class="textLink" href="<c:url value="/mapping/parameter/bar />">By path, method,and
           presence of parameter</a>
</li> 
```

**控制器**

```
@RequestMapping(value="/mapping/parameter/{foo}", method=RequestMethod.GET)
public @ResponseBody String byParameter(@PathVariable String foo) {
    //Perform logic with foo
    return "Mapped by path + method + presence of query parameter! (MappingController)";
} 
```

[Spring URI 模板文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-uri-templates)

# java - 如有必要，如何将字符串四舍五入，如果不只是这样

> ID：13442680
> 
> 赞同：-5
> 
> 时间：2012-11-18T17:35:09.353
> 
> 标签：java

我的要求是这样的

*   如果是 1.0 输出是 1
*   如果是 1.00 输出是 1
*   如果是 1.5 输出是 1.5
*   如果是 1.25 输出是 1.25
*   有时它可能是空的

我试过这样：

```
public class roundup 
{
    public static String Convert_Roundup(Float Amount, String element)  
    {
        if (Amount > 0)
        {
            LEFT(Amount,INDEX(Amount,element)    
        }
        else 
            return Amount;
        }       
    }
} 
```

因为我是 Java 和 Talend 的初学者，所以我必须编写一个例程，以便我可以随时重用它。

我的旧例程将任何浮点值四舍五入到小数点后两位：

```
public class decimal 
{
    public static String ConvertTo_TwoDecimals(Float Amount) 
    {
        String Amount1 = "";
        if (Amount != null) 
        {
            DecimalFormat myFormat = new DecimalFormat("0.00");
            Amount1 = myFormat.format(Amount);
        }
        return Amount1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:52:51.483

为什么不将数据类型从 float 更改为 double 然后使用 printf 函数？那是您将输出放在哪里吗？例如 System.out.println("编号为：%1.2f", example); 你必须使用浮子吗？

# wpf - 通过静态属性访问字符串资源

> ID：13442682
> 
> 赞同：1
> 
> 时间：2012-11-18T17:35:18.620
> 
> 标签：wpf, localization, windows-8

在 Windows Phone 中，为我的 .resx 文件生成了类。我可以通过如下静态属性访问它们`AppName.Resources.AppResources.MyButton_Caption`：

使用 .resw 文件的 Windows 应用商店应用程序中是否有任何等价物？

`ResourceManager.Current.MainResourceMap.GetValue("MyButton_Caption").ToString()`

在我看来，可维护性较差，我不明白为什么不应该同时存在这两个选项。

# c - C 结构总线错误 10

> ID：13442683
> 
> 赞同：0
> 
> 时间：2012-11-18T17:35:38.303
> 
> 标签：c, struct, structure

我在 C 中有一个结构，我使用一个函数从用户那里获取结构的值。下面是我的结构。

```
typedef struct {
    char    *name;
    char    *chemical_symbol;
    char    *class;
    int     atomic_number;
    double  atomic_weight;
    int     *electrons;
} element_t; 
```

这是我用来从用户那里获取值的函数。在询问化学符号后，问题出在此功能上。我得到总线错误：10。我对总线错误的理解是处理器无法尝试访问内存。任何帮助表示赞赏。谢谢！

```
element_t scan_element() {

    element_t element;

    printf ("Enter New Element Information:\n\n");

    printf("Element Name: ");
    scanf("%s", element.name);

    printf("Element Chemical Symbol: ");
    scanf("%s", element.chemical_symbol);

    printf("Element Class: ");
    scanf("%s", element.class);

    printf("Element Atomic Number: ");
    scanf("%d", &element.atomic_number);

    printf("Element Atomic Weight: ");
    scanf("%lf", &element.atmoic_weight);

    printf("Element Electrons: ");
    scanf("%p", &element.electrons);

    return(element);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T17:36:42.230

```
printf("Element Name: ");
scanf("%s", element.name); 
```

您必须为所指向的对象分配内存，`element.name`例如使用`malloc`. 没有正确分配`element.name`是一个无效的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:36:58.957

您没有分配足够的内存来尝试读入您的字符串。

顺便说一句，你的最后一个`scanf`很奇怪：你真的要问地址吗？这可能很危险。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T17:43:14.113

您需要分配内存。也许最好的（当然是*最简单*的！）方法是简单地将结构定义为具有字符数组（而不是字符指针）。

例子：

```
#define MAX_STRING 80
#define MAX_ELECTRONS 32

typedef struct {
    char    name[MAX_STRING];
    char    chemical_symbol[MAX_STRING];
    char    class[MAX_STRING];
    int     atomic_number;
    double  atmoic_weight;
    int     electrons[MAX_ELECTRONS];
} element_t; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T17:43:09.087

在扫描字符串之前，您应该为它们分配一些空间。例如：

```
void initialize( element_t * p ) {
  p->name = malloc( sizeof( char ) * MAXSIZE );
  p->chemical_symbol = malloc( sizeof( char ) * MAXSIZE );
  p->class = malloc( sizeof( char ) * MAXSIZE );
} 
```

在你打电话之前`scan_element`，打电话`initialize`。我确信它会正确编译。

# vim - 在 Vim 中更改快捷键

> ID：13442688
> 
> 赞同：1
> 
> 时间：2012-11-18T17:36:11.623
> 
> 标签：vim, keyboard, keyboard-shortcuts, shortcut

我刚刚开始使用 Vim。我学习打字的方式是让我的手指固定在“j,k,l,;”上。键而不是“h,j,k,l”键。我想将键盘快捷键更改为基本上将左、下、上、右功能从“h、j、k、l”键移动到“j、k、l”；键。谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:51:48.647

Drew Neil最近的书*Practical Vim*对这个话题进行了有趣的讨论：

> 如果您`h`连续按下该键两次以上，您就是在浪费击键。在水平移动方面，您可以使用逐字或字符搜索动作更快地解决问题。
> 
> ...
> 
> 我很高兴`;`钥匙舒适地放在我的小指下面。

[鉴于这`;`是`f`搜索命令的“查找下一个”键。]

# c# - 从网站运行 Silverlight 时的不同行为

> ID：13442695
> 
> 赞同：0
> 
> 时间：2012-11-18T17:36:45.133
> 
> 标签：c#, silverlight, storyboard

我正在开发一个简单的 Silverlight 应用程序。应用点是显示从 XML 文件加载的数据。数据由**String "password"**和**Integer "passwordCount"**组成。每个加载的位置都显示为一个彩色方块，每当用户将鼠标移到该方块上时，它的大小都会调整为“passwordCount/10”像素宽度或高度，并在其上显示“密码”字符串。这是一个例子：

鼠标悬停时：
[![](../Images/5297a9cb5bd7f769b6e259f5caa918be.png)](https://i.stack.imgur.com/IXR1l.png)

如果我通过 VisualStudio 运行按钮运行它，一切正常。问题是，当我将脚本放在网站上时，图块会朝错误的方向调整大小（它们变得更小而不是更大）。文本也不显示。我不知道为什么。网站上的 Silverlight 在单独的窗口中打开，鼠标悬停时看起来像这样：

[![](../Images/d398e7e62223f77f84944993433ecd49.png)](https://i.stack.imgur.com/ZmDo7.jpg)
[（来源：[screenshu.com](https://screenshu.com/static/uploads/temporary/x9/qg/l9/q4jrro.jpg)）]

这是我用来为图块设置动画的函数：

```
 public void rectangle_MouseEnter(object sender, MouseEventArgs e)
    {
        sbMouseON = new Storyboard();
        DoubleAnimation sizeAnimation = new DoubleAnimation();
        sizeAnimation.To = passwordCount/10; //passwordCount is always greater than 1000
        sizeAnimation.Duration = new Duration(TimeSpan.FromMilliseconds(300));
        Storyboard.SetTarget(sizeAnimation, (Rectangle)sender);
        Storyboard.SetTargetProperty(sizeAnimation, new PropertyPath(direction));
        sbMouseON.Children.Add(sizeAnimation); 

        Canvas.SetZIndex(rect, 2); //move rectangle up to make animation visible
        DrawTextBlock();
        sbMouseON.Begin();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:08:16.510

The problem solved itself. I've just copied all files onto server and it works great. Looks like it was some Windows problem. Thank you for your interest @Abhinav.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:57:12.727

**模组：无法添加评论，因此发布为答案**

这里我假设您在 TargetProperty 中传递的“方向”是“（FrameworkElement.Width）”以增加矩形的宽度。

如果是这样，则对象可以减小大小的唯一逻辑原因是您设置的“sizeAnimation.To”属性设置的值小于对象的实际宽度。

这个 DrawTextBlock() 在做什么？里面有没有可以改变动画行为的代码？

# ruby-on-rails - Capybara 和 Factory Girl 出现“电子邮件已被占用”错误

> ID：13442700
> 
> 赞同：1
> 
> 时间：2012-11-18T17:37:26.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, capybara, factory-bot

我认为这可能与[我在这个问题中描述的问题有关](https://stackoverflow.com/questions/12963095/capybara-not-working-with-factory-girl)。

我不明白为什么 Capybara 在使用 Factory Girl 创建用户工厂时无法在我的 rails 应用程序上测试注册表单。我不断收到`email has already been taken`错误消息。这是我的工厂：

```
FactoryGirl.define do
  sequence :email do |n|
    "email#{n}@example.com"
  end

  factory :user do
    email
    password "secret"
    password_confirmation "secret"
  end
end 
```

这是我的注册测试：

```
require "test_helper"

describe "Signup integration" do

  before(:each) do
    visit signup_path
  end

  it "successfully routes to the signup page" do
    page.text.must_include "Sign Up"
  end

  it "signs up a new user" do
    user = FactoryGirl.create(:user)
    fill_in "user_email", :with => user.email
    fill_in "Password", :with => user.password
    fill_in "Password confirmation", :with => user.password_confirmation
    click_button "Create User"
    current_path == "/"
    page.text.must_include "Signed up!"
  end  
end 
```

这是我的 test_helper.rb：

```
ENV["RAILS_ENV"] = "test"
require File.expand_path("../../config/environment", __FILE__)
require "minitest/autorun"
require "capybara/rails"
require "active_support/testing/setup_and_teardown"

class IntegrationTest < MiniTest::Spec
  include Rails.application.routes.url_helpers
  include Capybara::DSL
  register_spec_type(/integration$/, self)

  def last_email
    ActionMailer::Base.deliveries.last
  end

  def reset_email
    ActionMailer::Base.deliveries = []
  end
end

class HelperTest < MiniTest::Spec
  include ActiveSupport::Testing::SetupAndTeardown
  include ActionView::TestCase::Behavior
  register_spec_type(/Helper$/, self)
end

Turn.config.format = :outline 
```

我不太确定这有什么问题。如果我将 Capybara`save_and_open_page`方法添加到每一行，它可以一直到达密码字段，但 Capybara 无法填写密码字段。它会在电子邮件字段中添加一个唯一的电子邮件地址`email3@example.com`，但随后无法添加 Factory Girl 密码。如果我在测试中输入纯文本密码（`fill_in "Password", :with => "password")`它能够填写该字段，但这似乎不是测试它的正确方法。

我也不确定它是否与我在应用程序中的登录测试有关？问题可能是 Capybara 以登录测试中的另一个用户身份登录吗？如果是这样，你如何清理你的测试会话？

最后，这是我的 gemfile，以防万一：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'jquery-rails'
gem 'pg'
gem 'heroku'
gem 'taps'
gem 'sorcery'
gem 'bootstrap-sass'
gem 'simple_form'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :test do
  gem 'minitest'
  gem 'capybara'
  gem 'capybara_minitest_spec'
  gem 'turn'
  gem 'factory_girl_rails'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:46:51.627

问题可能出在这一行

```
user = FactoryGirl.create(:user) 
```

尝试将其更改为

```
user = FactoryGirl.build(:user) 
```

创建用户对象的`FactoryGirl.create`一个​​实例并将其保存到数据库中。`build`创建一个实例，但不将其保存到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T03:28:40.183

数据库清理器帮助了我..

宝石文件

```
 gem 'database_cleaner' 
```

minitest_helper.rb

```
 class MiniTest::Spec
    include FactoryGirl::Syntax::Methods
    before :each do
      DatabaseCleaner.clean
    end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-09T17:40:41.463

发生这种情况是因为您对应该唯一的电子邮件列使用相同的值

在Gemfile 中使用`gem fake`或。`gem database_cleaner``group :development, test`

Fakers 允许您`database_cleaner`在创建记录后清理数据库时为记录生成随机值

# sql-server-2005 - 有关支持 MS SQL Server 的轻量级框架的任何建议

> ID：13442705
> 
> 赞同：0
> 
> 时间：2012-11-18T17:38:14.380
> 
> 标签：sql-server-2005, php

注意：我已经很久没有接触 PHP 世界了。我主要是一名 Python 开发人员。

我必须用 PHP5 构建一个小应用程序。请给我推荐一个轻量级的框架：

*   具有在 Linux 上运行的 MS SQL Server 支持，因为该应用程序将在 Ubuntu 上运行。
*   快速学习、使用和设置。

性能不是关键问题。由于该应用程序将主要由大约 10 人在专用 LAN 上用于数据输入。

**关于模板引擎的建议也将不胜感激**

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:40:34.480

让我们先结束这个简单的问题——通过诱惑，我假设你的意思是**模板**。如果是这样，Smarty 通常是一个非常好的竞争者，因为它易于学习且非常强大。

现在，对于框架。各种各样的 PHP 框架已经为 SQL 请求切换到 PDO，这意味着它们中的大多数将很容易适应 MS SQL。CodeIgniter 可以，我上次检查的 CakePHP 也可以。

最终，选择你所知道的而不是选择看起来很花哨的东西，除非你需要额外的功能。学习曲线会更小。

# python - 如何循环使用不同的颜色并将它们分配给已绘制的对象？

> ID：13442707
> 
> 赞同：3
> 
> 时间：2012-11-18T17:38:22.870
> 
> 标签：python

我的任务是使用 Python 绘制拼凑图案。我需要从用户那里得到一个宽度和高度，两者都必须大于 3 但小于 10 和 4 种颜色，不能相同。我已经为此编写了代码。但我需要绘制 2 种不同类型的图案。一种图案沿着边缘，只有 1 块深，第二种图案填充中心方块。现在，我用来绘制它的代码是沿着顶部、底部和每一侧重复第一个补丁，然后在整个中间重复第二个图案。但是现在我必须为每个不同的单独的补丁分配一种颜色，循环使用给定的颜色，以便它从第一个开始，循环遍历它们，然后再次从第一个开始。

我的问题是，我不知道如何循环使用颜色，因为顺序会逐行不同。有没有一种很好的有效方法来处理我到目前为止所写的内容，即。绘制一个单独的补丁并在线条上重复它，如果是这样，最好的方法是什么？

```
from graphics import *

def main():
    width, height = getDimensions()
    colour1, colour2, colour3, colour4 = getColours()
    win = drawGraphWin(width, height)
    drawPattern(win, width, height, colour1, colour2, colour3, colour4)

def getDimensions():
    width = input("How many patches, between 4 and 9, would you like \
                    horizontally? :")
    while True:
        try:
            width = int(width)
            break
        except ValueError:
            width = input("How many patches, between 4 and 9, would you like \
                            horizontally? :")
    while width < 4 or width > 9:
        width = eval(input("How many patches, between 4 and 9, would you like \
                            horizontally? :"))
    height = input("How many patches, between 4 and 9, would you like \
                    vertically? :")
    while True:
        try:
            height = int(height)
            break
        except ValueError:
            height = input("How many patches, between 4 and 9, would you like \
                            vertically? :")
    while height < 4 or height > 9:
        height = eval(input("How many patches, between 4 and 9, would you like \
                            vertically? :"))
    return width, height

def getColours():
    colour1 = input("Please enter a colour \
                    (red, green, blue, yellow, magenta, orange, cyan): ")
    while valid1(colour1) == False:
        colour1 = input("Please enter a colour \
                        (red, green, blue, yellow, magenta, orange, cyan): ")
    colour2 = input("Please enter a second colour \
                    (red, green, blue, yellow, magenta, orange, cyan): ")
    while valid2(colour1, colour2) == False:
        colour2 = input("Please enter a second colour \
                        (red, green, blue, yellow, magenta, orange, cyan): ")
    colour3 = input("Please enter third a colour \
                        (red, green, blue, yellow, magenta, orange, cyan): ")
    while valid3(colour1, colour2, colour3) == False:
        colour3 = input("Please enter third a colour \
                        (red, green, blue, yellow, magenta, orange, cyan): ")
    colour4 = input("Please enter a fourth colour \
                    (red, green, blue, yellow, magenta, orange, cyan): ")
    while valid4(colour1, colour2, colour3, colour4) == False:
        colour4 = input("Please enter a fourth colour \
                        (red, green, blue, yellow, magenta, orange, cyan): ")
    return colour1, colour2, colour3, colour4

def valid1(colour1):
    if any( [colour1 == "red", colour1 == "green", colour1 == "blue", \
             colour1 == "yellow", colour1 == "magenta", colour1 == "orange", \
             colour1 == "cyan"]):
        return True
    else:
        return False

def valid2(colour1, colour2):
    if any( [colour2 == "red", colour2 == "green", colour2 == "blue", \
             colour2 == "yellow", colour2 == "magenta", colour2 == "orange", \
             colour2 == "cyan"]):
        if colour2 == colour1:
            return False
        else:
            return True
    else:
        return False

def valid3(colour1, colour2, colour3):
    if any( [colour3 == "red", colour3 == "green", colour3 == "blue", \
             colour3 == "yellow", colour3 == "magenta", colour3 == "orange", \
             colour3 == "cyan"]):
        if any( [colour3 == colour2, colour3 == colour1]):
            return False
        else:
            return True
    else:
        return False

def valid4(colour1, colour2, colour3, colour4):
    if any( [colour4 == "red", colour4 == "green", colour4 == "blue", \
             colour4 == "yellow", colour4 == "magenta", colour4 == "orange", \
             colour4 == "cyan"]):
        if any( [colour4 == colour3, colour4 == colour2, colour4 == colour1]):
            return False
        else:
            return True
    else:
        return False

def drawGraphWin(width, height):
    win = GraphWin("CW PatchWork Deisgn", width*100, height*100)
    win.setCoords(0.0,0.0,4*width,3*height)
    for i in range(width):
        vLineN = Line(Point(i*4, 0), Point(i*4, height*3))
        vLineN.draw(win)
    for j in range(height):
        hLineN = Line(Point(0, j*3), Point(width*4, j*3))
        hLineN.draw(win)
    return win

def drawPattern(win, width, height, colour1, colour2, colour3, colour4):
    for widthNo in range(width):
        drawPatch1(win, widthNo, 0, colour1, colour2, colour3, colour4)
    for widthNo in range(width):
        drawPatch1(win, widthNo, height-1, colour1, colour2, colour3, colour4)
    for heightNo in range(height-2):
        drawPatch1(win, 0, heightNo+1, colour1, colour2, colour3, colour4)
    for heightNo in range(height-2):
        drawPatch1(win, width-1, heightNo+1, colour1, colour2, colour3, colour4)
    for innerNoH in range(width-2):
        innerWidth = innerNoH +1
    for innerNoV in range(height-2):
        innerHeight = height - 2 - innerNoV
            drawPatch2(win, innerWidth, innerHeight, colour1, colour2, colour3,\
                        colour4)
    win.getMouse()
    win.close()

def drawPatch1(win, widthNo, height, colour1, colour2, colour3, colour4):
    for i in range(6):
        vLineN = Line(Point((0.8*(i))+widthNo*4, 0+height*3), \
                      Point((0.8*(i))+widthNo*4, 3+height*3))
        vLineN.draw(win)
        hLineN = Line(Point(0+widthNo*4, (0.6*(i))+height*3), \
                      Point(4+widthNo*4, (0.6*(i))+height*3))
        hLineN.draw(win)
        if i == 0:
            for j in range(5):
                hiMessage = drawHiMessage(0.4+widthNo*4, (0.3+(j*0.6))+height*3,\
                                        win, colour1, colour2, colour3, colour4)
                hiMessage.setFill(colour1)
                vLineN.setFill(colour1)
                hLineN.setFill(colour1)
        elif i == 1:
            for k in range(5):
                hiMessage = drawHiMessage(1.2+widthNo*4, (0.3+(k*0.6))+height*3,\
                                        win, colour1, colour2, colour3, colour4)
                hiMessage.setFill(colour2)
                vLineN.setFill(colour2)
                hLineN.setFill(colour2)
        elif i == 2:
            for l in range(5):
                hiMessage = drawHiMessage(2+widthNo*4, (0.3+(l*0.6))+height*3, \
                                        win, colour1, colour2, colour3, colour4)
                hiMessage.setFill(colour3)
                vLineN.setFill(colour3)
                hLineN.setFill(colour3)
        elif i == 3:
            for m in range(5):
                hiMessage = drawHiMessage(2.8+widthNo*4, (0.3+(m*0.6))+height*3,\
                                        win, colour1, colour2, colour3, colour4)
                hiMessage.setFill(colour4)
                vLineN.setFill(colour4)
                hLineN.setFill(colour4)
        elif i == 4:
            for n in range(5):
                hiMessage = drawHiMessage(3.6+widthNo*4, (0.3+(n*0.6))+height*3,\
                                        win, colour1, colour2, colour3, colour4)
                hiMessage.setFill(colour1)
                vLineN.setFill(colour1)
                hLineN.setFill(colour1)

def drawHiMessage(x, y, win, colour1, colour2, colour3, colour4):
    hiMessage = Text(Point(x, y), "hi!")
    hiMessage.draw(win)
    hiMessage.setSize(7)
    return hiMessage

def drawPatch2(win, innerNoH, height, colour1, colour2, colour3, colour4):
    for i in range(4):
        x = (0.5+i)+innerNoH*4
        for j in range(3):
            y = (2.2-j)+height*3
            sail = drawBoat(x, y, win, colour1, colour2, colour3, colour4)
            if i == 0:
                sail.setFill(colour1)
            elif i == 1:
                sail.setFill(colour2)
            elif i ==2:
                sail.setFill(colour3)
            elif i == 3:
                sail.setFill(colour4)

def drawBoat(x, y, win, colour1, colour2, colour3, colour4):
    sail = Polygon(Point(x-0.5,y), Point(x,y+0.8), Point(x+0.5,y))
    hull = Polygon(Point(x-0.5,y-0.1), Point(x+0.5,y-0.1), Point(x+0.3,y-0.2), \
                   Point(x-0.3,y-0.2))
    mast = Line(Point(x,y), Point(x,y-0.1))
    sail.draw(win)
    hull.draw(win)
    mast.draw(win)
    hull.setFill("white")
    return sail

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:40:47.477

您可以使用[`itertools.cycle`](http://docs.python.org/2.7/library/itertools.html?highlight=itertools#itertools.cycle)重复浏览所有颜色。因此，假设您将所有补丁都放在名为 的列表中`patches`，您可以执行以下操作

```
import itertools
colors = ['red','blue','green','yellow']
patches = ['a','b','c','d','e','f','g','h','i','j']

for patch, color in itertools.izip(patches, itertools.cycle(colors)):
    # color a patch
    print 'Colour', patch, 'as', color 
```

打印出来

```
Colour a as red
Colour b as blue
Colour c as green
Colour d as yellow
Colour e as red
Colour f as blue
Colour g as green
Colour h as yellow
Colour i as red
Colour j as blue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:42:10.397

我建议你这样做：

```
for x in range(0,maxX-1):
   for y in range(0,maxY-1):
      paint_patch(x,y,color((x+y)%4) 
```

从本质上讲，这将以不同的颜色开始每一行，并在它们之间循环。你也会有漂亮的对角线。

# java - apache mina 过滤器

> ID：13442708
> 
> 赞同：0
> 
> 时间：2012-11-18T17:38:32.683
> 
> 标签：java, memory-leaks, apache-mina

是否允许从自定义线程调用 apache mina 过滤器？我有定期调用的计时器`NextFilter.messageReceived(...)`。我目前内存不足异常，想知道这些调用是否会导致内存泄漏？

我正在使用 apache mina 1.0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:53:01.880

似乎内存泄漏是由探查器入侵引起的，而不是由 mina finter 调用引起的。

# system - 代表所有整数的数字系统可以代表所有有理数吗？所有实数？

> ID：13442711
> 
> 赞同：-2
> 
> 时间：2012-11-18T17:38:52.933
> 
> 标签：system, digital

**代表所有整数的数字系统可以代表所有有理数吗？都是实数？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:40:51.257

这不是这里的问题，但是：

是的，对于有理数，有理数和整数都具有相同的基数

不知道实数，实数的基数高于整数的基数。因此，可能存在可以表示所有整数但不能表示所有实数的系统（有些系统会同时表示两者）。

# sql - ColdFusion - 多个插件 - 每个插件上的轨道编号

> ID：13442714
> 
> 赞同：0
> 
> 时间：2012-11-18T17:39:11.170
> 
> 标签：sql, coldfusion, coldfusion-8

正在开发我们的火灾报告系统...

跟踪谁在卡车上......所以卡车 A、卡车 B、卡车 C

我可以得到员工总数 - 但不是每辆卡车......我有点没有想法......使用ColdFusion 8

我知道的这个（车辆 ID 号）nvid 东西不起作用 - 只计算员工总数，而不是个别卡车。每辆卡车都有一个唯一的 ID 和附加的人员变量...... CFInserts 对总数工作正常，但不是每个卡车号码。

关于如何跟踪每辆卡车上的员工人数的想法？谢谢...

```
 <cfset nvid = 0>

    <cfloop from="1" to="#st.recordcount#" index="i">

    <cfif IsDefined("form.checkbox1_#i#")>

    <cfoutput>

    <cfset newvid = "vid_"&#variables.i#> 
    <cfset newloginid = "checkbox1_"&#variables.i#> 

    <cfset vid = "#Evaluate(variables.newvid)#"> 

    <cfset nvid = nvid + 1>

    <cfset loginid = "#Evaluate(variables.newloginid)#"> 

    <br>
    NewVid - #newvid# and VID - #vid#
    <br>
    cfquery name="insert" datasource="fire_report">

    INSERT INTO stafflist (id, unitid, loginid)

    VALUES (#id#, #vid#, #loginid#); 

    /cfquery> 
    <br>
    <br>
    </cfoutput>

    </cfif>
    </cfloop> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:19:20.407

您可能想看看您的数据模型。我怀疑在现实生活中，分配给每辆卡车的人员会随着时间而改变。您的代码示例中没有任何内容表明您已经考虑过这一点。

对于您关于计算每辆卡车的人数的具体问题，这样的事情会起作用。

```
select TruckName, count(*) PeoplePerTruck
from YourTruckTable join stafflist on TruckId = UnitId
group by TruckName 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T20:44:33.387

决定在插入后检查数据..它可以工作，也许这是最简单的方法，除非有人有其他更简单的方法......

基本上-如果数字没有在组检查中相加-我将其配置为删除先前插入的数据并强制他们再次执行...

```
 Check Data After Insert???

        <cfquery name="tcheck" datasource="fire_report">
        select * from stafflist
        order by unitid
        </cfquery>
        <br>

        <cfoutput query="tcheck" group=unitid>

        <cfset groupCount = 0>
        <cfoutput>
        #unitid#
        <cfset groupCount = groupCount + 1>
        </cfoutput>
        <br><br>Check vs Original
        <br>

        <cfquery name="ucheck" datasource="fire_report">
        select * from unit
        WHERE ID=#id# and unitid = #unitid#
        </cfquery>
        Original: <cfoutput>#ucheck.unitid# - #ucheck.numff# &nbsp;</cfoutput>

        GroupCount = #groupCount#
        <br><br><cfif ucheck.numff NEQ groupCount>

        Bad<br>
        <cflocation url="staff.cfm?id=#id#&src=del">
        <cfelse>All Good<br></cfif>
        </cfoutput> 
```

# powershell - 检测 PowerShell 脚本执行时出错

> ID：13442720
> 
> 赞同：2
> 
> 时间：2012-11-18T17:40:22.943
> 
> 标签：powershell, batch-file

我有一个*PowerShell*脚本：

```
...
Any-Command -ErrorCode Stop
... 
```

*然后我从一个bat*脚本调用这个脚本：

```
...
powershell myscript.ps1
... 
```

现在我想在*bat*脚本中知道调用的*PowerShell*脚本是否因错误而停止并且没有到达脚本的末尾。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T23:23:43.457

一种方法是在脚本中添加顶级陷阱语句，例如：

```
trap {
   exit 1; # or whatever error code
} 
```

注意：陷阱可能被认为是老式的（尽管我喜欢它是顶级的），另一个选项是围绕整个脚本的 try-finally。

所以当 Any-Command 出现异常退出时，会执行 trap 语句，脚本会以错误代码 1 退出。如果你不添加这个，Powershell 会以错误代码 0 退出（毕竟 Powershell 运行得很好，虽然脚本没有）。

然后，您可以使用以下内容检测 bat 脚本中的错误代码：

```
powershell -noprofile -noninteractive -file <<your script>>

IF ERRORLEVEL 1 (echo ERROR) ELSE (echo OK)

pause 
```

这将检测任何 1 或更高的错误代码。

您也可以使用`%ERRORLEVEL%`，但要小心，这可能会被作为环境变量覆盖。

注意：如果您在嵌套的运行空间中运行脚本，您可以考虑使用`$host.SetShouldExit(1)`以确保根主机也退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T06:44:59.663

只是添加到马库斯给出的答案

我注意到陷阱代码甚至隐藏了实际错误。就我而言，我需要发生实际错误。只需添加修改后的代码即可完成。

```
 trap 
    { 
        write-error $("Error: " + $_.Exception.Message); 
        exit 1; # or whatever error code 
    } 
```

更多信息请访问[http://huddledmasses.org/trap-exception-in-powershell/](http://huddledmasses.org/trap-exception-in-powershell/)

# c# - 访问自定义控件项目中的程序集文件中的图像

> ID：13442733
> 
> 赞同：0
> 
> 时间：2012-11-18T17:41:01.330
> 
> 标签：c#, custom-controls

为了在网络上呈现它们，我在访问程序集文件中的图像时遇到了麻烦。

我创建了一个复合控件来呈现一个面板，我为面板的某些部分分配了 gif，但是一旦我发布网站或点击 f5，它们似乎无法访问，我在应该出现图像的地方得到一个损坏的图像图标。

这就是我试图授予方法以获取程序集中图像的方式：

```
[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
    protected override void Render(HtmlTextWriter output) 
```

但它不起作用，这是我如何尝试将程序集中的图像访问到该方法的示例：

```
(ColapseIconUrl == "") ? Page.ClientScript.GetWebResourceUrl(this.GetType(), "CompositeCustomControl.Images.icon_collapse.gif") : ColapseIconUrl; 
```

我究竟做错了什么？

请询问您是否需要有关该问题的更多信息，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:56:11.940

查看[http://forums.asp.net/t/1227097.aspx/1](http://forums.asp.net/t/1227097.aspx/1)后，您需要将“构建操作”从内容更改为“嵌入式资源”，您可以通过从解决方案资源管理器中选择项目来执行此操作. 右键单击选择“属性”的项目，然后将“构建操作”更改为“嵌入式资源”。

希望有帮助

# security - 单板计算机上的代理服务器（作为家庭 IP 摄像机的安全措施）

> ID：13442734
> 
> 赞同：0
> 
> 时间：2012-11-18T17:41:13.830
> 
> 标签：security, ip-camera

背景 -

假设 IP 摄像机 UI 是通过 http 交付的小型（通常不安全）Web 应用程序。我的目标是代理对该 UI 的访问并在该代理上实施一些安全措施。完成后，用户被定义为“友好的”，并将被重定向到实际的 IP 摄像机 UI，并进一步代理 http 事务，仅用于基本会话验证目的。这仅供家庭使用，最多需要同时处理 3~5 个用户。

问题 -

我正在考虑使用 mod_perl 和 Apache 来完成这项工作，因为这是我最了解的。我也在考虑在单板计算机上实现这一点。我还阅读了有关使用 ModSecurity 和 mod_perl 的人的文章。这听起来对我的事业来说是一个很大的优势。

从未使用过单板计算机 - 我不知道这是否可行。

非常感谢您的想法/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:45:19.750

带有 C 模块的 Apache 可以处理它没有问题，带有 mod perl 的 Apache 也可能没有太多加密。但是，如果您想使用地理位置等，您将需要一些电源（cpu），如果您拥有它，那么您选择哪种技术并不重要，它可能会处理它。顺便说一句，您可以使用 snort 的 mod 安全性和附加加载 apache 插件。

# c++ - 将 new[] 创建的对象传递给类，需要析构函数以进行删除吗？

> ID：13442741
> 
> 赞同：-1
> 
> 时间：2012-11-18T17:41:58.993
> 
> 标签：c++, memory-management, destructor

我不知道我是否应该创建一个析构函数来删除`Controller`设置为由 main 传递的参数的成员，这些参数是动态创建的，因为构造函数从未使用`new`关键字来设置它们。

```
int main()  
{
    int numCars = 3;
    int numPlanes = 3;
    Machine *car= new Car[numCars];
    Machine *plane = new Plane[numPlanes];

    Controller *control = new Controller(car, plane);

    delete control;
    return 0;
}

class Controller
{
public:
    Controller(Machine *car, Machine *plane);
//Would I need to make a destructor 
//~Controller();
private:
    Machine *car;
    Machine *plane;
Controller :: Controller(Machine *car, Machine *plane)
{
    this->car = car;
    this->plane = plane;
    changeCarandPlane();
}
//destructor
//    Controller :: ~Controller()
//   {
//    delete[] car;
//    delete[] plane;
//    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:43:32.080

不，您不应该在析构函数中删除。`main`似乎拥有分配的数组，所以从`main`.

```
int main()  
{
    int numCars = 3;
    int numPlanes = 3;
    Machine *car= new Car[numCars];
    Machine *plane = new Plane[numPlanes];

    Controller *control = new Controller(car, plane);

    delete control;
    delete [] plane;
    delete [] car;
    return 0;
} 
```

如果要在`Controller`析构函数中删除，则必须确保没有两个实例`Controller`指向相同的动态分配的`Machine`数组。

您应该考虑使用`std::vector<Machine>`而不是动态分配的数组，或者至少使用一些范围保护来保证删除。

```
#include <vector>
int main()  
{
    const int numCars = 3;
    const int numPlanes = 3;
    std::vector<Machine> cars(numCars); // holds 3 default constructed Machines
    std::vector<Machine> planes(numPlanes); // holds 3 default constructed Machines

    Controller control(cars, planes);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:45:47.737

在好的设计中，创建对象的实体通常也负责释放它。鉴于此，要么从控制器构造函数中释放内存，要么`main()`在控制器构造函数中分配内存，然后在控制器析构函数中释放 - 选择取决于实际要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:12:46.750

那么如何使用共享指针呢？

```
#include <memory>

class Machine {};
class Car : public Machine{};
class Plane : public Machine{};

template<typename T>
struct ArrayDeleter
{
   void operator()(T* p)
   {
      delete [] p;
   }
};

class Controller
{
public:
    Controller(std::shared_ptr<Car> cars, std::shared_ptr<Plane> planes)
    {}
};

int main()  
{
    int numCars = 3;
    int numPlanes = 3;
    std::shared_ptr<Car> cars(new Car[numCars], ArrayDeleter<Car>());
    std::shared_ptr<Plane> planes(new Plane[numPlanes], ArrayDeleter<Plane>());

    Controller *control = new Controller(cars, planes);

    delete control;
    return 0;
} 
```

# java - java中的标准矩阵代码？

> ID：13442746
> 
> 赞同：3
> 
> 时间：2012-11-18T17:42:26.933
> 
> 标签：java

我是 Java 新手，我需要一个 Matrix 类。是否有为此的标准库/包，或者我必须自己编写？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:44:41.193

你可以看看[JAMA](http://math.nist.gov/javanumerics/jama/)。

JAMA 是 Java 的基本线性代数包。它提供了用于构造和操作真实密集矩阵的用户级类。它旨在为常规问题提供足够的功能，并以非专家自然且易于理解的方式打包。它旨在用作 Java 的标准矩阵类...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T17:46:06.740

不，标准库中没有内置“矩阵类”。

是的，有许多线性代数库可用。例如：

*   [http://math.nist.gov/javanumerics/jama/](http://math.nist.gov/javanumerics/jama/)

*   [http://commons.apache.org/math/](http://commons.apache.org/math/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:29:22.723

我可以推荐[EJML](http://code.google.com/p/efficient-java-matrix-library/)
提供以下功能：
•基本运算符（加法，乘法，...）
•矩阵操作（提取，插入，组合，...）
•线性求解器（线性，最小二乘，增量，... )
•分解（LU，QR，Cholesky，SVD，特征值，...）
•矩阵特征（秩，对称，确定性，...）
•随机矩阵（协方差，正交，对称，...）
•不同的内部格式(row-major, block)
•单元测试

# java - 设置类路径以便在 mysql 和 jdbc 之间连接

> ID：13442747
> 
> 赞同：4
> 
> 时间：2012-11-18T17:42:30.927
> 
> 标签：java, mysql, jdbc, classpath

我使用的程序是：eclipse 和 mysql。

我在 mysql 中有一个数据库，我想在 eclipse 和 mysql 之间连接。

我在 Eclipse 中创建的项目中有一些文件夹。

我有主文件夹：testest.. 我会向您展示我在相关文件夹中的内容：

```
testest
..src
....testest
......testestservlet.java
..app engine sdk
..JRE system library
..referenced library
..war
..lib
....mysql-connector-java-5.1.22 
```

我更新了我的 testestservlet.java：

```
package testest;

import java.io.IOException;
import javax.servlet.http.*;
import java.sql.*;

@SuppressWarnings("serial")
public class TestestServlet extends HttpServlet {
  public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
      resp.setContentType("text/plain");
      resp.getWriter().println("Hey, world");
      resp.getWriter().println("MySQL Connect Example.");
      Connection conn = null;
      String url = "jdbc:mysql://localhost:3306/";
      String dbName = "database_alon";
      String driver = "com.mysql.jdbc.Driver";
      String userName = "root"; 
      String password = "ADMINALON";
      try {
          Class.forName(driver).newInstance();
          conn = DriverManager.getConnection(url+dbName,userName,password);
          resp.getWriter().println("Connected to the database");
          conn.close();
          resp.getWriter().println("Disconnected from database");
      } catch (Exception e) {
          e.printStackTrace(); 
      }
  }
} 
```

现在，我通过运行 as->web 应用程序来运行 testest。

输入网址：localhost:8888

并且只看到“你好世界”。

我读到了，发现我需要编写命令：

```
set CLASSPATH=%CLASSPATH%;JAVA_HOME\lib; 
```

但是我的 CLASSPATH 和 JAVA_HOME 的 url-s 应该是什么？我有以下文件夹：c:/program_fils/java 和：c:/Jconnector（类似的东西）。

Jconnector的文件夹包含一个文件：mysql-connector-java-5.1.22.jar

我尝试通过 Eclipse 将 JAR 添加到库中（右键单击 testest->properties->Libraries->add external jar->mysql-connector-java-5.1.22-bin.jar：

![在此处输入图像描述](../Images/ae5e72d5b4eefb7c307ccdc323edd1f4.png)

ps，我的操作系统是windows 32bit。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T05:33:32.533

没必要做

```
set CLASSPATH=%CLASSPATH%;JAVA_HOME\lib; 
```

只需添加`mysql-connector-java-5.1.22-bin.jar:`到`/WEB-INF/lib`目录。

Eclipse 足够聪明，可以识别添加到 CLASSPATH 下的 .jar 文件，`/WEB-INF/lib`并且应该包含在 CLASSPATH 中。

使用“”添加库`Add External Jar`也应该有效，但它不是最佳实践。

当`/WEB-INF/lib`您使用`.war`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T19:33:34.277

添加`mysql-connector-java-5.1.22-bin.jar`to`WE-INF\LIB`应该可以解决此问题。通过添加jar文件

> 属性 -> 构建路径 -> 添加外部 jar

由于 Eclipse 的各种平台的行为不同，这不是一个确定的解决方案。但是添加上面提到的 jar 文件肯定会使 JDBC 程序工作。

# javascript - 如何检查 twitter bootstrap popover 是否可见？

> ID：13442749
> 
> 赞同：34
> 
> 时间：2012-11-18T17:42:38.523
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个`$('#anElement')`附加了潜在弹出框的元素，例如

```
<div id="anElement" data-original-title="my title" data-trigger="manual" data-content="my content" rel="popover"></div> 
```

我只是想知道如何检查弹出框是否可见：如何使用 jQuery 来完成？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-18T17:55:06.500

如果此功能未内置到您正在使用的框架中（它不再是*twitter*引导程序，只是[bootstrap](http://twitter.github.com/bootstrap/index.html)），那么您必须检查生成/修改的 HTML 以创建引导程序的此功能。

看看[popupver 文档](http://twitter.github.com/bootstrap/javascript.html#popovers)。那里有一个按钮，您可以使用它来查看它的运行情况。这是检查在幕后工作的 HTML 元素的好地方。

破解打开你的 chrome 开发者工具或 firebug（firefox 的），看看它发生了什么。看起来`<div>`按钮之后只是插入了一个 -

```
<div class="popover fade right in" style="... /> 
```

您所要做的就是检查该元素是否存在。根据您的标记是如何编写的，您可以使用这样的东西 -

```
if ($("#popoverTrigger").next('div.popover:visible').length){
  // popover is visible
} 
```

`#popoverTrigger`是触发该弹出框首先出现的元素，正如我们在上面注意到的，引导程序只是将弹出框 div 附加在元素之后。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-18T17:52:40.047

boostrap popover 插件中没有明确实现的方法，因此您需要找到解决方法。这是一个 hack，无论插件是否可见，它都会返回 true 或 false。

```
var isVisible = $('#anElement').data('bs.popover').tip().hasClass('in');
console.log(isVisible); // true or false 
```

它访问实际上是一个对象的popover插件存储的数据，调用负责获取tip元素`Popover`的对象的方法，然后检查返回的元素是否具有class ，这表明popover附加到该元素可见。`tip()``in`

* * *

您还应该检查是否附加了弹出框以确保您可以调用该`tip()`方法：

```
if ($('#anElement').data('bs.popover') instanceof Popover) {
  // do your popover visibility check here
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-28T15:36:40.007

在当前版本的 Bootstrap 中，您可以检查您的元素是否已`aria-describedby`设置。该属性的值是`id`实际弹出框的值。

因此，例如，如果您想更改可见弹出框的内容，您可以执行以下操作：

```
var popoverId = $('#myElement').attr('aria-describedby');
$('#myElement').next(popoverid, '.popover-content').html('my new content'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-18T17:50:03.370

这会检查给定的 div 是否可见。

```
if ($('#div:visible').length > 0) 
```

或者

```
if ($('#div').is(':visible')) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-05T06:12:43.337

也许最可靠的选择是监听显示/隐藏的事件，如下所示。这将消除深入挖掘可能容易出错的 DOM 的必要性。

```
var isMyPopoverVisible = false;//assuming popovers are hidden by default  

$("#myPopoverElement").on('shown.bs.popover',function(){
isMyPopoverVisible = true;
});

$("#myPopoverElement").on('hidden.bs.popover',function(){
isMyPopoverVisible = false;
}); 
```

即使您以编程方式隐藏/显示/切换弹出框，这些事件似乎也会被触发，而无需用户交互。

PS用BS3测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-29T17:33:10.227

这是一个简单的 jQuery 插件来管理它。我添加了一些注释选项来呈现访问对象的不同方法，并且没有注释我喜欢的选项。

对于当前的 Bootstrap 4.0.0，您可以捆绑`Popover.js`：[https ://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js](https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js)

```
// jQuery plugins
(function($)
{
    // Fired immiedately

    $.fn.isPopover = function (options)
    {
        // Is popover?
        // jQuery
        //var result = $(this).hasAttr("data-toggle");
        // Popover API
        var result = !!$(this).data('bs.popover');

        if (!options) return result;

        var $tip = this.popoverTip();

        if (result) switch (options)
        {
            case 'shown' :
                result = $tip.is(':visible');
                break;

            default:
                result = false;
        }

        return result;
    };    

    $.fn.popoverTip = function ()
    {
        // jQuery
        var tipId = '#' + this.attr('aria-describedby');
        return $(tipId);

        // Popover API by id
        //var tipId = this.data('bs.popover').tip.id;
        //return $(tipId);

        // Popover API by object
        //var tip = this.data('bs.popover').tip; // DOM element
        //return $(tip);
    };

    // Load indicator
    $.fn.loadIndicator = function (action)
    {
        var indicatorClass = 'loading';
        // Take parent if no container has been defined
        var $container = this.closest('.loading-container') || this.parent();

        switch (action)
        {
            case 'show' :
                $container.append($('<div>').addClass(indicatorClass));
                break;

            case 'hide' :
                $container.find('.' + indicatorClass).remove();
                break;
        }
    };
})(jQuery);

// Usage
// Assuming 'this' points to popover object (e.g. an anchor or a button)

// Check if popover tip is visible
var isVisible = $(this).isPopover('shown');

// Hide all popovers except this
if (!isVisible) $('[data-toggle="popover"]').not(this).popover('hide');

// Show load indicator inside tip on 'shown' event while loading an iframe content
$(this).on('shown.bs.popover', function ()
{
    $(this).popoverTip().find('iframe').loadIndicator('show');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-07T08:27:55.033

这是一种使用 Vanilla JS 检查状态的方法。

```
document.getElementById("popover-dashboard").nextElementSibling.classList.contains('popover'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-10T15:04:36.707

这适用于 BS4：

```
$(document).on('show.bs.tooltip','#anElement', function() {
    $('#anElement').data('isvisible', true);
});

$(document).on('hidden.bs.tooltip','#anElement', function() {
    $('#anElement').data('isvisible', false);
});

if ($('#anElement').data('isvisible'))
{
    // popover is visible
    $('#tipUTAbiertas').tooltip('hide');
    $('#tipUTAbiertas').tooltip('show');
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-02-28T19:28:52.133

使用带有 boostrap 4 的弹出框，tip() 似乎不再是一个函数。这是检查弹出框是否启用的一种方法，基本上是它是否已被单击并处于活动状态：

```
if ($('#element').data('bs.popover')._activeTrigger.click == true){
...do something
} 
```

# android - 自定义对话框中的列表视图行不可见

> ID：13442760
> 
> 赞同：1
> 
> 时间：2012-11-18T17:44:20.063
> 
> 标签：android, android-layout

我有一个格式为 Header + listview + footer 的自定义对话框。对应的代码如下：（我不介意分享代码但它超过800行）......

```
 /* Setup dialog layout */
View header = (View)getLayoutInflater().inflate(R.layout.stockcountheader, null);
View footer = (View)getLayoutInflater().inflate(R.layout.stockcountfooter, null);

    final Dialog listDialog;

    listDialog = new Dialog(this, android.R.style.Theme_Dialog);
    listDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

    LayoutInflater li = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = li.inflate(R.layout.dialog, null, false);
    listDialog.setContentView(v);
    listDialog.setCancelable(true);

    final AdditemAdapter adapter = new AdditemAdapter(this, R.layout.additemrow, updateitems);
    final ListView filterrow = (ListView) listDialog.findViewById(R.id.dialoglist);
    filterrow.addHeaderView(header);
    filterrow.addFooterView(footer);
    filterrow.setAdapter(adapter);
    i = adapter.getCount();
    listDialog.show(); 
```

在标题中，我有一个单选按钮并打算控制列表视图行的可见性。所以，我有以下代码：...

```
 radiostockresGroup = (RadioGroup)listDialog.findViewById(R.id.radiostockres);
    radiostockresButton = (RadioButton) radiostockresGroup.findViewById(radiostockresGroup.getCheckedRadioButtonId());
    radiostockresGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
        public void onCheckedChanged(RadioGroup radiostockresGroup, int checkedId) {
            radiostockresButton = (RadioButton) radiostockresGroup.findViewById(checkedId);

            switch(checkedId) {
                case R.id.radioresno:

                    listDialog.findViewById(R.id.tblayout2).setVisibility(View.INVISIBLE);          
                    break;
                case R.id.radioresyes:                      

                    listDialog.findViewById(R.layout.tblayout2).setVisibility(View.VISIBLE);
                    break;
            }

        }
    }); 
```

但是，它给了我“listDialog.findViewById(R.id.tblayout2).setVisibility(View.INVISIBLE);”行中的java空指针错误。列表视图和对话框的 xml 如下：

盘点.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TableLayout android:id="@+id/tblayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="0"
        android:stretchColumns="*">

        <TableRow 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">    

            <TextView android:id="@+id/txtfieldname"  
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
                android:layout_span="3" 
                android:gravity="top" />

            <EditText android:id="@+id/txtinput"  
                android:layout_toRightOf="@+id/txtfieldname"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_span="3" 
                android:gravity="top" />

        </TableRow>
    </TableLayout>      
</RelativeLayout> 
```

我尝试使用“filterrow.findViewById(R.id.tblayout2).setVisibility(View.INVISIBLE);” 并且仍然得到相同的空指针。

请帮我一把，非常感谢！

开尔文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:49:23.380

如果您查看您的代码，您会注意到：

```
final ListView filterrow = (ListView) listDialog.findViewById(R.id.dialoglist);
listDialog.findViewById(R.id.tblayout2).setVisibility(View.INVISIBLE); 
```

本质上，您说的`R.id.tblayout2`是与`R.id.dialoglist`. 我不认为他们在这种情况下。

没有看到您的课程扩展了什么，我只能假设这应该可行。如果没有，你能发布类定义吗？就像`public class MainActivity extends Activity {`这两个课程一样。

```
findViewById(R.id.tblayout2).setVisibility(View.INVISIBLE); 
```

# c# - “$/Folder1/Folder2/Folder3/File.xml”的正则表达式

> ID：13442765
> 
> 赞同：-1
> 
> 时间：2012-11-18T17:44:57.590
> 
> 标签：c#, .net, regex

如果我想验证`$/Folder1/Folder2/Folder3/File.xml`始终以开头`$`和结尾的正则表达式应该是什么样子`xml`

```
"$/Folder1/Folder2/Folder3/File.xml"
Pass

"$/Folder1/Folder2/Folder3/File.xm"
Fail

"$/Folder1/Folder2/Folder3/File.py"
Fail

"A/Folder1/Folder2/Folder3/File.xml"
Fail 
```

编辑...所以...正确的正则表达式是...

```
"^\$.*xml$" 
```

执行正则表达式检查器后的方法看起来像......

```
public bool ValidateConfigPath(string config)
    {
        var match = Regex.Match(config, @"^\$.*xml$", RegexOptions.IgnoreCase);

        return match.Success;
    } 
```

我所有的单元测试都通过了......

```
[TestMethod]
    public void ValidateConfigPath_InCorrect1()
    {
        var t = new TfsWrapper();
        var isValid = t.ValidateConfigPath("$/Quantz/Main/CSS Calculator/main.py");
        Assert.IsFalse(isValid);
    }

    [TestMethod]
    public void ValidateConfigPath_InCorrect2()
    {
        var t = new TfsWrapper();
        var isValid = t.ValidateConfigPath("C:/Quantz/Main/CSS Calculator/main.xml");
        Assert.IsFalse(isValid);
    }

    [TestMethod]
    public void ValidateConfigPath_Correct()
    {
        var t = new TfsWrapper();
        var isValid = t.ValidateConfigPath("$/Quantz/Main/CSS Calculator/main.xml");
        Assert.IsTrue(isValid);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:46:21.030

[你读过教程吗？](http://www.regular-expressions.info/tutorial.html)

```
^\$.*xml$ 
```

`^`是字符串的开头。`\$`是文字`$`字符。`.*`是 0 个或多个任意字符（实际上，没有换行符，但这在您的输入示例中似乎无关紧要）。`xml`真的只是`xml`。并且`$`是字符串的结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:55:09.803

如果对使用正则表达式没有严格要求，我建议使用更直接的方法，即简单地检查开始和结束字符：

```
string.startswith("$") and string.endswith("xml") 
```

有了上面的内容，任何人的意图都是绝对清楚的，包括不懂正则表达式的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T17:48:49.350

试试这个：-

```
 ^\$.*xml$ 
```

检查此[链接](http://www.codeproject.com/Articles/13255/Validation-with-Regular-Expressions-Made-Simple)以获取详细信息

# xcode - MacRuby 发布应用程序缺少 libmacruby.dylib

> ID：13442767
> 
> 赞同：0
> 
> 时间：2012-11-18T17:45:42.730
> 
> 标签：xcode, macruby

使用 XCode 4.5.2 和 MacRuby 0.12，我的应用程序在我的计算机上运行良好，但发布版本无法在其他计算机上运行：

```
Dyld Error Message:
  Library not loaded: /Library/Frameworks/MacRuby.framework/Versions/0.12/usr/lib/libmacruby.dylib
  Referenced from: /Users/USER/Desktop/PocheFactory.app/Contents/MacOS/PocheFactory
  Reason: image not found 
```

我检查了我的部署设置，它们看起来很好：在 BuildPhases->“Link Binary With Libraries”中，我需要“MacRuby.framework”，在 BuildSettings->Framework Search Paths 中，我包含“/Library/Frameworks” " 带有递归选项。

为什么这个特定的库不包含在发布版本中？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T18:35:23.407

与其找出正确的 Xcode 设置，不如运行它*更*容易：

/usr/local/bin/macruby_deploy --compile --embed

我从 Matt Aimonetti 的*MacRuby, The Definitive Guide*获得了这些信息。

（最后一个命令参数被去掉了：它是 Xcode 创建的 Derived Data 中应用程序包的路径。）

# sql - 加入至少有一个论点的比赛

> ID：13442768
> 
> 赞同：1
> 
> 时间：2012-11-18T17:45:44.133
> 
> 标签：sql, oracle, join

我有两张桌子：

```
T1(RES1, RES2)
T2(RES, WORD, COUNT) 
```

我需要生成 T3：

```
T3(RES1, RES2, WORD, COUNT) 
```

如下例所示

```
T1
RES1   RES2
------------
A      B
C      D

T2
RES    WORD     COUNT
----------------------
A      W1        10
B      W1        5
B      W2        7
C      W2        8

T3
RES1   RES2      WORD  COUNT
-----------------------------
A       B         W1     15 = (10+5)
A       B         W2     7  = (NOTHING FOR A+7)
C       D         W2     8  = (8+NOTHING FOR D) 
```

也就是说，对于 T1 中的每一对，生成与它一起出现的不同单词计数的总和。在 SQL 中执行此操作的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:59:53.840

```
-- sample of data from your question
SQL> with t1(RES1, RES2) as(
  2    select 'A', 'B'  from dual union all
  3    select 'C', 'D'  from dual
  4  ),
  5  t2(RES , WORD,     COUNT1) as(
  6    select 'A',  'W1',   10 from dual union all
  7    select 'B',  'W1',    5 from dual union all
  8    select 'B',  'W2',    7 from dual union all
  9    select 'C',  'W2',    8 from dual
 10  ) -- the query
 11  select t1.res1
 12       , t1.res2
 13       , t2.word
 14       , sum(t2.count1) as count
 15    from t1
 16    join t2
 17      on (t1.res1 = t2.res or
 18          t1.res2 = t2.res)
 19  group by t1.res1
 20         , t1.res2
 21         , t2.word
 22  order by t1.res1
 23  ;

RES1 RES2 WORD      COUNT
---- ---- ---- ----------
A    B    W1           15
A    B    W2            7
C    D    W2            8 
```

# html - 空白背景

> ID：13442769
> 
> 赞同：1
> 
> 时间：2012-11-18T17:45:47.127
> 
> 标签：html, image, text

我为我的要点创建了一个带有背景的 HTML。

我为它输入文字。当我将其发送到缺少整个背景的电子邮件地址时。

但是，当我取出文字时，它很好。项目符号点背景在那里。这几乎就像背景在前景中并掩盖了该文本。

以下是部分源代码：

```
<tr>
   <td width="600" valign="top" background="thanksgiving-template-bullets.jpg" height="250px" padding:40px="" name="thanksgiving-template-bullets.jpg" contentid="57e93b50-13b0bf80bae-b72427ac28f4177bd55290ce12678282" xt="SPIMAGE" spname="thanksgiving-template-bullets.jpg">
      <v:image xmlns:v="urn:schemas-microsoft-com:vml" id="theImage" style='behavior: url(#default#VML); display:inline-block; position:absolute; height:350px; width:600px; top:0; left:0; border:0; z-index:1;' src="<img%20src="thanksgiving-template-bullets.jpg" name="thanksgiving-template-bullets.jpg" contentid=57e93b50-13b0bf80bae-b72427ac28f4177bd55290ce12678282 xt="SPIMAGE" SPNAME="thanksgiving-template-bullets.jpg">"/>
      <v:shape xmlns:v="urn:schemas-microsoft-com:vml" id="theText" style='behavior: url(#default#VML); display:inline-block; position:absolute; height:254px; width:600px; top:0; left:0; border:0; z-index:2;'>
         <p style="font-family:Arial, Helvetica, sans-serif; font-size:18px; color:#ffffff; font-weight:bold;"></p>
         <p style="padding:50px  100px 0 100px; font-family:Arial, Helvetica, sans-serif; font-size:18px; color:#ffffff; padding:30px  000px 00px 100px;font-weight:bold;">This is </p>
         <p style="font-family:Arial, Helvetica, sans-serif; font-size:18px; color:#ffffff;padding:00px  00px 00px 100px;font-weight:bold;">my list:</p>
         <ul style="font-family:Arial, Helvetica,sans-serif;font-size:12px; color:#ffffff; padding:00px  00px 00px 100px;line-height:32px; margin:15px 0 0 0;">
                    <li>List 1</li>
                    <li>List 2</li>
                    <li>List 3</li>
                    <li>List 4</li>
         </ul>
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:20:08.093

您必须将背景图像上传到类似服务`imgur.com`（或任何图像托管服务）并从那里引用 bg 图像，或者将图像正确嵌入到您发送的消息中。否则，您指的是您机器本地的图像。

# java - 当我们在 java 中有 peek() 和 poll() 时为什么要 element() 和 remove()

> ID：13442775
> 
> 赞同：6
> 
> 时间：2012-11-18T17:46:19.017
> 
> 标签：java, data-structures, queue

当我们有 peek() 和 poll() 时，在 Queue 接口中有 element() 和 remove() 有什么用？

我检查了文档，发现这些方法也存在于 java 7 中。提到的唯一区别是 element() 和 remove() 为空队列抛出异常。如果队列为空，我们可以手动抛出异常（如果需要）。

是否真的有必要为这唯一的区别保留两组方法？如果我们开始根据这些差异制作不同的方法，我认为 java 类和接口将充满很多方法。这是真正的面向对象风格吗？

编辑：只是为了让我的问题清楚，所以我没有得到相同的“你需要例外的地方使用这个，否则使用那个”的答案。我无法理解的是有很多这样的方法，其中具有相同差异的额外方法将很有用。那么为什么它只在某些情况下实施而不在其他情况下实施呢？为什么没有整体应用相同的原则？我可以理解，也许只有语言创造者才能回答这些为什么。**我想知道这种方法是否符合 OOP 原则？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T17:50:25.247

有必要吗？......可能。也许，也许不是。

通常，您应该更喜欢`element()`或者`remove()`如果队列在程序中的这一点永远不应该为空。这是快速失败的一般原则的一部分：如果出现问题，请尽快抛出错误，以便对其进行调试。（如果您的程序*没有*在错误发生时立即抛出，那么跟踪该错误将变得非常困难，因为您稍后只能在堆栈中的不同位置发现它。）

也就是说，当您不*知道*队列是否为空并且想要找出时，异常可能具有不可接受的开销，返回 null 可能更可取。

这显然是一个判断电话，我可以想象可能会做出不同的决定，但我认为做出的决定至少是合理的。在某些情况下有*充分*的理由偏爱`element()`，而在其他情况下有充分的理由偏爱。`peek()``peek()``element()`

就“为什么在某些情况下使用这种方法而不在其他情况下使用这种方法”而言……答案各不相同，而且*始终*是一个高度主观的判断要求。在许多情况下，当 null 永远不会是“肯定”答案时，JDK 经常在“失败”时返回 null，否则会抛出异常——例如，`NavigableMap.firstKey()`可以返回 null，因为 null 是第一个键，所以它会`NoSuchElementException`在空时抛出 a map, while`NavigableMap.firstEntry()`在空地图上返回 null 因为不可能`null`与有效返回混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:50:23.217

例外是差异。如果您的 Queue*应该*有元素，请使用`element()`or `remove()`，因此如果 Queue 为空，则会出现异常。如果 Queue 可以为空是合理的，则使用 poll() 和 peek() 并处理该`null`值。

至于这种方法是否符合 OOP 原则——我认为这无关紧要。OOP 的三大支柱（多态性、继承性和封装性）不包括包含可疑必要性的方法。OOP 不是解决效率和有效性问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:02:08.070

包含抛出异常的方法有一个半正当的理由：它们的存在允许解决方案，其中 a`null`是队列中的合法项目。每当您需要这样的场景时，如果没有这些方法，您就需要创建一个表示 null 的“null-sentinel”值；使用这些方法可以减少样板文件。

# asp.net-mvc-3 - 为什么 CreateView 中的 masterPath 参数为空？

> ID：13442777
> 
> 赞同：2
> 
> 时间：2012-11-18T17:46:27.313
> 
> 标签：asp.net-mvc-3, razor

写一个小的概念证明应用程序，想知道为什么 masterPath 参数是空的：

在 application_start 中：

```
ViewEngines.Engines.Add(new AlternateLocationViewEngine(
                new string[] { 
                    "~/Views/Shared/_Layout.cshtml", //Is this correct? Can/should i do that
                    "~/Views/Shared/{0}.cshtml",
                    "~/Plugins/Views/Shared/{0}.cshtml",
                },
                new string[] { 
                    "~/Plugins/Views/{1}/{0}.cshtml", 
                    "~/Plugins/{1}/{0}.chstml",    
                    "~/Plugins/Views/Shared/{0}.cshtml" 
                }
            ));

public class AlternateLocationViewEngine : RazorViewEngine 
    {
        public AlternateLocationViewEngine(string[] masterLocations, string[] viewLocations)
            : base()
        {
            MasterLocationFormats = masterLocations;
            ViewLocationFormats = viewLocations;
            PartialViewLocationFormats = ViewLocationFormats;

        }

        protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
        {
            if (string.IsNullOrEmpty(masterPath))
            {               
                masterPath = MasterLocationFormats.ElementAt(0);
            }

            var nameSpace = controllerContext.Controller.GetType().Namespace;
            return base.CreateView(controllerContext, viewPath.Replace("%1", nameSpace), masterPath.Replace("%1", nameSpace));
        }
    } 
```

如您所见，我被迫在 CreateView() 方法中检查 masterPath 是否为空。为什么是这样？我错过了一些基本的东西吗？

我的开发环境：ASP.NET MVC3、Razor、.NET4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:44:36.793

masterPath 只有在使用 masterName 创建 ViewResult 时才会有值。

```
protected internal ViewResult View(string viewName, string masterName); 
```

在内部，RazorView 在其构造函数中处理 null masterPaths。

```
// where layoutPath is the masterPath arg from the RazorViewEngine's CreateView
LayoutPath = layoutPath ?? String.Empty; 
```

渲染视图时，RazorView 会将 OverridenLayoutPath 设置为 masterPath（如果提供）。

```
// An overriden master layout might have been specified when the ViewActionResult got returned.
// We need to hold on to it so that we can set it on the inner page once it has executed.
webViewPage.OverridenLayoutPath = LayoutPath; 
```

您不需要将 _Layout 指定为 MasterLocationFormat 之一。下面是 RazorViewEngine 的默认行为。

```
 MasterLocationFormats = new[] {
            "~/Views/{1}/{0}.cshtml",
            "~/Views/{1}/{0}.vbhtml",
            "~/Views/Shared/{0}.cshtml",
            "~/Views/Shared/{0}.vbhtml"
        }; 
```

您可以查看[源代码](https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/SystemWebMvc/Mvc/RazorViewEngine.cs)以获得更多灵感。

# python - 使用 SSL 支持编译 Python 时出错

> ID：13442779
> 
> 赞同：1
> 
> 时间：2012-11-18T17:46:46.970
> 
> 标签：python, ssl, build

我正在尝试在 Centos6 上编译 Python 2.7.3。几乎一切正常，除了我真正需要的东西^^。

当我输入 make 时，我收到错误：

```
building '_ssl' extension
gcc -pthread -fPIC -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I. -IInclude -I./Include -I/usr/local/include -I/root/Python-2.7.3/Include -I/root/Python-2.7.3 -c /root/Python-2.7.3/Modules/_ssl.c -o build/temp.linux-i686-2.7/root/Python-2.7.3/Modules/_ssl.o
gcc -pthread -shared build/temp.linux-i686-2.7/root/Python-2.7.3/Modules/_ssl.o -L/usr/local/lib -lssl -lcrypto -o build/lib.linux-i686-2.7/_ssl.so
*** WARNING: renaming "_ssl" since importing it failed: build/lib.linux-i686-2.7/_ssl.so: undefined symbol: krb5_auth_con_getrcache 
```

最后，我收到一条消息，表明模块 _ssl 的构建失败（类似这样）。

你有没有遇到过这个问题？我已经安装了 OpenSSL (0.9.8e fips) 和 OpenSSL-dev。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:01:06.083

确保 openssl-dev（lib 和 include）的正确路径在您的 Makefile 中

# java - 在Java中将十六进制字符串转换回字符串

> ID：13442782
> 
> 赞同：2
> 
> 时间：2012-11-18T17:46:52.980
> 
> 标签：java, string, methods, hex

我正在努力尝试将十六进制数字字符串转换回原始字符串。我使用以下方法转换字符串：

```
 private static String hex(String  binStr) {

        String newStr = new String();

        try {
            String hexStr = "0123456789ABCDEF";
            byte [] p = binStr.getBytes();
            for(int k=0; k < p.length; k++ ){
                int j = ( p[k] >> 4 )&0xF;
                newStr = newStr + hexStr.charAt( j );
                j = p[k]&0xF;
                newStr = newStr + hexStr.charAt( j ) + " ";
            }   
        } catch (Exception e) {
            System.out.println("Failed to convert into hex values: " + e);
        } 

        return newStr;
    } 
```

我真的被困住了，任何建议都将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:55:22.660

考虑一下：

```
 String hexStr = "0123456789ABCDEF";
     long i = Long.valueOf(hexStr, 16);
     System.out.println(Long.toHexString(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:55:47.570

问题中的代码会破坏信息。只有每个输入字节的最高有效两位和最低有效四位对结果有影响。这意味着它通常不能被逆转。

如果右移了 4 位，而不是 6：

```
int j = ( p[k] >> 4 )&0xF; 
```

所有输入都将被保留，并且可以从十六进制字符串中恢复原始字符串。也许您真的是指四位移位？

# java - 与 http://repo.maven.apache.org 的连接被拒绝

> ID：13442785
> 
> 赞同：1
> 
> 时间：2012-11-18T17:47:09.550
> 
> 标签：java, maven

我确实想在家中为我的项目使用 maven，但我无法连接到中央存储库。

我看到有人建议使用代理，但我应该使用什么代理？我如何确定它？我对此感到非常困惑。

如果有人可以逐步解释我需要做什么，我将不胜感激。

* * *

### 编辑

事实证明这是一个防火墙问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:56:31.207

请参阅[手动覆盖内置存储库](https://www.jfrog.com/confluence/display/RTF/Maven+Repository#MavenRepository-ResolvingArtifactsthroughArtifactory)。或添加到您的 pom 中（对于 pluginRepository 也是如此）：

```
<repository>              
          <id>central</id>
          <name>Central</name>
          <url>http://repo1.maven.org/maven2</url>
</repository> 
```

# php - 使用新创建的实体

> ID：13442786
> 
> 赞同：0
> 
> 时间：2012-11-18T17:47:10.073
> 
> 标签：php, doctrine, doctrine-orm

在 Doctrine Getting Started 教程中，有一个错误创建的示例。错误具有报告者和实体用户的工程师属性。

该示例让您传递现有记者和现有工程师的 id。该示例然后使用 id 在数据库中查找用户。

```
$reporter = $entityManager->find("User", $theReporterId);
$engineer = $entityManager->find("User", $theDefaultEngineerId); 
```

后来，记者和工程师附在了这个bug上。

```
$bug->setReporter($reporter);
$bug->setEngineer($engineer); 
```

由于我知道 id，我想我会很聪明并创建一个新用户，将 id 设置为传递的变量并在用户上调用persist。

```
$reporter = new User();
$reporter->setId($theReporterId);
$reporter->setName("Foo");
$entityManager->persist($reporter); 
```

然后我继续使用新的用户对象调用 setReporter/Engineer，在 bug 上调用 persist，然后调用 flush。

但是，当这种情况发生时，会为记者和工程师创建一个新用户，并将数据库中的错误条目设置为新用户的新 id。

看起来 Doctrine 不知道新用户是基于现有实体的。有没有办法可以做我想做的事？我认为这将是绕过对数据库的点击以获取用户的好方法。

# eclipse - IBM worklight 5 - 无法安装插件

> ID：13442787
> 
> 赞同：1
> 
> 时间：2012-11-18T17:47:10.340
> 
> 标签：eclipse, ibm-mobilefirst

我正在尝试在 Eclipse Classic 中运行 IBM Worklight 插件，但遇到了一些错误：

*   首先，我想更新eclipse，但这样做似乎需要20多个小时。是否有另一种可能更新到最新软件？我需要这样做才能安装 ibm worklight。
*   其次，我收到了这个错误代码：

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Eclipse 4.2 Dependencies 1.0.0.v20120615_1503 (com.ibm.rational.dependency.eclipse42.feature.group 1.0.0.v20120615_1503)

我正在从 .zip 文件加载 IBM 工作灯。希望我已经给了你足够的信息来帮助我。

**更新 1：**我也尝试使用 Eclipse EE for IDE。然后我得到了这个错误：

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：AJAX Web Tools 1.0.0.v20120731_1538 (com.ibm.wdt.webtools.ajax.feature.feature.group 1.0.0.v20120731_1538)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:19:22.853

您正在加载 Worklight 的开发人员版本还是许可版本。我建议使用 Eclipse 市场并搜索 Worklight 插件。通常这是安装插件的一种更顺畅的方式。您从哪里获得插件的 zip 文件？如果它直接来自 IBM，请确保它是最新版本，即 5.0.5.1（我知道疯狂的版本）如果不是，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:20:55.840

IBM Worklight 支持 Eclipse 版本 4.2、3.7 和 3.6。对于 Marketplace 客户端，请使用 Juno、Indigo 或 Helios Eclipse IDE for Java EE Developers。（取自：[http](http://marketplace.eclipse.org/content/ibm-worklight-developer-edition#.UTTUNoeH7zs) ://marketplace.eclipse.org/content/ibm-worklight-developer-edition#.UTTUNoeH7zs ）。如果您使用其他版本的 eclipse，您可能会遇到安装问题。还要检查“安装新软件”向导中的“在安装过程中联系所有更新站点以查找所需软件”选项。关于升级 eclipse 据我所知没有办法将 eclipse 升级到下一个版本，您必须下载并安装所需的 eclipse 版本。

# objective-c - 在一个视图中拍摄照片或视频的 iphone 应用程序

> ID：13442788
> 
> 赞同：-1
> 
> 时间：2012-11-18T17:47:14.877
> 
> 标签：objective-c, video, photo

我正在寻找一些示例代码/教程，这些示例代码/教程将演示使用 iPhone 应用程序中的一个视图拍摄照片或视频，并带有拨动开关。类似于内置的 iOS 相机应用程序。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T16:30:14.677

这个库包括照片和视频拍摄的功能。此外，它还允许您显示一个弹出窗口供用户选择照片/视频。

[https://www.cocoacontrols.com/controls/fdtake](https://www.cocoacontrols.com/controls/fdtake)

# c# - 如何在 datagridview 上显示多个复选框

> ID：13442789
> 
> 赞同：0
> 
> 时间：2012-11-18T17:47:27.170
> 
> 标签：c#, sql-server, visual-studio-2008, if-statement, checkbox

我需要在 datagridview 上显示多个复选框。

i have 4 checkbox when select 2 checkbox it's show 2 checkbox on datagridview.

**前 2 复选框。**

**复选框missShw**

```
0001
0002 
```

**复选框 leaveFull**

```
0003
0004 
```

我首先选择 CheckBox missShw 和 CheckBox leaveFull 它的输出。

```
0003
0004 
```

或者我首先选择 CheckBox leaveFull 和 CheckBox missShw 它的输出。

```
0001
0002 
```

**我需要输出 2 复选框。**

```
0001
0002
0003
0004 
```

现在，我选择了 2 复选框，因此它将所有数据显示到 datagridview**但它不显示所有数据**。

**这段代码：**

```
public void missShw() 
        {
            SqlConnection conn = new SqlConnection(appConn);
            string sql = "SELECT [filesTA].EmpNo,[Employee].Title + ' ' + [Employee].[First Name] + ' ' + [Employee].[Last Name] as 'FullName',[filesTA].ChkDate"
            + ",Convert(nvarchar(5),[filesTA].ChkIn,108) as 'ChkIn',Convert(nvarchar(5),[filesTA].ChkOut,108) as 'ChkOut"
            + ",[filesTA].LateMin"
            + " From [WebSP].[dbo].[filesTA] inner join [WebSP].[dbo].[Employee] on [Employee].EmployeeNo=[filesTA].EmpNo INNER JOIN [WebSP].[dbo].[CompanyData] On [CompanyData].Company = [Employee].Company"
            + " WHERE [filesTA].ChkDate ='" + dateTimePicker.Value.ToString("yyyy-MM-dd") + "'"
            + " and [Employee].Section = '" + cbSection.SelectedValue + "'"
            + " and [Employee].Team = '" + cbTeam.SelectedValue + "'"
            + " and [filesTA].ErrorCode = '2'";

            da = new SqlDataAdapter(sql, Conn);
            DataSet ds = new DataSet();
            da.Fill(ds);
            Conn.Close();

            dgvShow.DataSource = ds.Tables[0];
        }

public void leaveFull()
        {
            SqlConnection conn = new SqlConnection(appConn);
            string sql = "SELECT [filesTA].EmpNo,[Employee].Title + ' ' + [Employee].[First Name] + ' ' + [Employee].[Last Name] as 'FullName',[filesTA].ChkDate"
            + ",Convert(nvarchar(5),[filesTA].ChkIn,108) as 'ChkIn',Convert(nvarchar(5),[filesTA].ChkOut,108) as 'ChkOut"
            + ",[filesTA].LateMin"
            + " From [WebSP].[dbo].[filesTA] inner join [WebSP].[dbo].[Employee] on [Employee].EmployeeNo=[filesTA].EmpNo INNER JOIN [WebSP].[dbo].[CompanyData] On [CompanyData].Company = [Employee].Company"
            + " WHERE [filesTA].ChkDate ='" + dateTimePicker.Value.ToString("yyyy-MM-dd") + "'"
            + " and [Employee].Section = '" + cbSection.SelectedValue + "'"
            + " and [Employee].Team = '" + cbTeam.SelectedValue + "'"
            + " and [filesTA].ErrorCode = '3'";

            da = new SqlDataAdapter(sql, Conn);
            DataSet ds = new DataSet();
            da.Fill(ds);
            Conn.Close();

            dgvShow.DataSource = ds.Tables[0];
        }

//missShw()
        private void checkBox4_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBox4.Checked == true)
            {
                missShw();                
            }
        }

//leaveFull()
        private void checkBox3_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBox3.Checked == true)
            {
                leaveFull();                
            }
        } 
```

谢谢你的时间。:)

# hibernate - Hibernate 4：一个类映射两个表 - 如何在两个表上保留一个对象？

> ID：13442792
> 
> 赞同：4
> 
> 时间：2012-11-18T17:47:45.440
> 
> 标签：hibernate, save, hbmxml

我有这个类 Person 映射两个表：Persons 和 PersonsAUD（审计）：

```
 <class catalog="test" name="test.Person" table="Persons" entity-name="Person">
    <id name="id" type="int">
      <column name="Id"/>
      <generator class="increment"/>
    </id>
    <property name="name" type="string">
      <column length="30" name="Name" not-null="true"/>
    </property>
    ...    

  </class>

  <class catalog="test" name="test.Person" table="PersonsAUD" entity-name="PersonAUD">

    <id name="idAudit" type="int">
      <column name="IdAudit"/>
      <generator class="increment"/>
    </id>      

    <property name="name" type="string">
      <column length="30" name="Name" not-null="true"/>
    </property>
    <property name="action" type="string">
      <column length="10" name="Action" not-null="true"/>
    </property>
    ...
  </class> 
```

我正在尝试将此对象保存在两个表中，如下所示：

```
session.save("Person", person);
session.save("PersonAUD", person); 
```

但只插入第一行，不插入审计行；可能休眠检查该人的状态并确认已保存。

有没有机会强制休眠在两个表中保存同一个对象？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T05:48:09.710

我强烈建议不要这样做。这非常令人困惑。不仅对 Hibernate，而且以后它可能会给您（其他开发人员）带来更多问题。为了更清楚，请让我们尝试在 POJO 实体（不是动态模型）中考虑这个问题

```
Person person = new Person();
// fill properties
session.save(person); // as a person
session.save(person); // as a person audit 
```

会话将只调用一次插入，因为只有一个实例。一个具有一个唯一标识符的对象。*除了一个人*之外，它不能被评价为其他任何东西。

您的动态模型也是如此。插入后尝试观察您的`HashMap` *人。*应该有一个键“ `$type$`”，它应该告诉您该实例是如何评估的（作为一个*人*）。它不能充当其他任何东西。

### 建议的解决方案：

如果您需要将一组信息保存到两个表中，请更倾向于 ORM 样式。例如`clone`将*人*放入`new HashMap()`并保存两个独立的实体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:49:31.237

在你的第二个映射中改变这个

```
<id name="idAudit" type="int"> 
```

到

```
<id name="id" type="int"> 
```

# macos - 区分实际滚轮、触控板和平板电脑滚动事件

> ID：13442793
> 
> 赞同：3
> 
> 时间：2012-11-18T17:48:21.977
> 
> 标签：macos, cocoa, mousewheel, trackpad

看来 scrollWheel: 必须是它，才能接收这些。不幸的是，触控板的滚动增量比鼠标高几个数量级，因此滚动速度非常快。因此，我需要区分它们，以便我可以使用适当的阻尼器。

文档令人困惑地注意到，虽然您通常通过检查 NSEvent 的子类型来执行此操作，但在 scrollWheel: 中特别是这不起作用。但他们没有说你应该做什么。实验告诉我，虽然触控板滚动确实没有正确键入为 NSTouchEventSubtype，但它们的类型*与*鼠标滚轮滚动不同 - NSTabletPointEventSubtype 与 NSMouseEventSubtype。问题是，NSTabletPointEventSubtype 也是用于真正的平板电脑滚动事件的，其中的增量甚至*更高*。所以我也需要区分它们。

注意：类似的先前问题包括[this](https://stackoverflow.com/q/5217680/790079)，其中唯一的建议是基于未记录的 API 或其他具有类似 hack 的推断。有些人似乎建议您完全忽略 scrollWheel: 并手动跟踪触摸事件，但这似乎是很多冗余工作，可能会在未来的操作系统版本中中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:43:07.463

我相信`[event hasPreciseScrollingDeltas]`这就是你要找的。它在 OS X 10.7 中可用。

# algorithm - Np 完整性 - 需要对减少进行一些澄清

> ID：13442795
> 
> 赞同：0
> 
> 时间：2012-11-18T17:48:22.193
> 
> 标签：algorithm, np-complete, np, np-hard

我想澄清一个概念。为了证明一个问题是 NP 完全的，我们使用约简。

现在假设我有 L<=L'。减少是从 L 到 L' 还是我也可以反过来做？即我可以证明如果 L 可以使用 L' 来解决，那么 L' 是 NP 完全的吗？

我对此感到很困惑。

例如。为了从火腿循环减少到火腿路径，我们采用了倒退的方式。

此外，我无法通过减少火腿循环来解决我必须证明“在至少有 k 个边的图中是否存在从 s 到 t 的路径”的问题。

请给我一个澄清并指导我解决上述问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:44:16.823

为了证明语言 L 是 NP 完全的，你实际上需要证明两件事，L 在 NP 中，L 是 NP-hard。通常，证明 L 在 NP 中很容易，但不要忘记这样做。

显示 L 是 NP-hard 的正常方法实际上是表明，L 的多项式时间判定器可用于为已被证明是 NP 完全的语言 L' 构建多项式时间判定器。

它必须是这样的。多项式时间可判定语言 L 的许多情况下，可以从 NP 完全语言的多项式时间判定器构建多项式时间判定器。例如，考虑用两种颜色为图着色的多项式时间可判定问题与 NP 完全一般图着色问题。

我在评论你关于哈密顿循环的问题时给了你一个提示。你读过提示并考虑过吗？如果是这样，请回答该问题。

# java - Spring Neo4j 保存 MultipartFile

> ID：13442796
> 
> 赞同：1
> 
> 时间：2012-11-18T17:48:35.080
> 
> 标签：java, spring, file, neo4j, spring-data-neo4j

我想知道将**MultipartFile** ( `org.springframework.web.multipart.MultipartFile`) 字段存储到 Neo4j 数据库中的最佳方法是什么。

看来我应该`org.springframework.core.convert.converter.Converter`以某种方式转换它（）。也许到一个`String[]`.

我的用例是：我有一个`Person`具有`photo`属性（MultipartFile）的节点。然后，我想存储和检索`photo`.

我应该将它保存到文件系统中吗？为什么？有没有人有任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:35:45.670

我假设你的意思是`org.springframework.web.multipart.MultipartFile`......所以问题是你想在数据库中保存什么？包括二进制原始数据的整个文件？

虽然可以[保存 byte[]](http://api.neo4j.org/1.8/org/neo4j/graphdb/PropertyContainer.html#setProperty%28java.lang.String,%20java.lang.Object%29)，但我不推荐它。相反，我建议将文件存储到文件系统中，并在数据库中只保留一些相关数据（例如文件名、存储位置、文件大小、内容类型等）。

此外，您需要某种从`MultipartFile`特定`PropertyContainer`（[节点](http://api.neo4j.org/1.8/org/neo4j/graphdb/Node.html)或[关系](http://api.neo4j.org/1.8/org/neo4j/graphdb/Relationship.html)）到特定的映射。

我建议查看 SDN：[http ://www.springsource.org/spring-data/neo4j](http://www.springsource.org/spring-data/neo4j)

# eclipse - 如何在 Eclipse 中运行 Red5 Server？

> ID：13442799
> 
> 赞同：1
> 
> 时间：2012-11-18T17:48:50.023
> 
> 标签：eclipse, red5

我已经检查了 Red5 SVN 的源代码。右键单击“build.xml”后，我通过 Ivy 下载了许多 jars。最后 Eclipse 注意到了我的意思：“构建成功”。

而且我还为 Eclipse 安装了 Red5 插件。那么如何在 Eclipse IDE 中运行 Red5 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:11:34.723

通常你不会那样做。如果您想测试一些服务器端逻辑，您可以：

1.  使用 Spring Mock up 进行 JUnit 测试（参见 AbstractJUnit4SpringContextTests）。这样，如果您的应用程序使用 Red5 的 Spring 服务，您就可以加载 Spring 上下文。
2.  您可以从 Eclipse 内部使用远程调试控制台。要设置它，您将使用一些特殊参数启动 Red5，然后将 Eclipse 连接到它。不久前，我们发布了一些关于设置 Red5 和 Eclipse 的文档：[http](http://code.google.com/p/openmeetings/wiki/DebugServer) ://code.google.com/p/openmeetings/wiki/DebugServer 。
3.  例如，您可以下载 .war 版本并在 Eclipse 中设置一个常规的 Tomcat 项目，然后将 .war 作为 webapp 部署到您的 Eclipse 项目中。我们已经这样做了，但是我们再次删除了它，因为生成这样的 .war 有一些缺点，如果您运行独立版本，则更容易升级到最新的 Red5 版本。

但是，我更喜欢使用 JUnit，因为它允许重新运行测试用例，或者例如将其集成到您的 Nightly/Daily/Continuous 构建环境中。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:36:07.837

可能有用，试试吧！：

Red5 可以作为独立服务器或战争部署安装。

过程是创建red5版本0.8（旧版本）的war部署。（冗长，请多多包涵）。

在 linux 上下载并安装 jdk1.6、glassfish2.1 和 netbeans 6.5。

下载“Red5War_0.8.0.war”。

我分享希望以下内容可以帮助社区按照 Netbeans 6.5 中使用的步骤在 glassfish2.1 上创建可部署的 war red5 版本 0.8：

第 1 步：解压缩 Red5War_0.8.0.war

第 2 步：在 Netbeans 中创建一个名为“red5”的 Web 项目

第三步：复制膨胀的war文件夹“/WEB-INF/classes”的内容，粘贴到Netbeans项目的“Source Packages”中。

第4步：右键单击“库”，添加“JAR/Folder”，导航到膨胀的war文件夹的“/WEB-INF/lib”，选择所有依赖jar并单击Netbeans项目的“打开”。

第 5 步：删除 Netbeans 项目的 WEB-INF（注意：忽略警告/错误）。

第6步：删除膨胀文件夹的META-INF。

第7步：将膨胀文件夹的剩余内容（“/WEB-INF/classes”和“/WEB-INF/lib”）复制到Netbeans项目的“Web Pages”中。

第八步：在防火墙中打开以下端口 TCP/843,TCP/1935,TCP/5229,TCP/5080

第 9 步：运行项目

第 10 步：在 Netbeans 项目文件夹 (../NetBeansProjects/red5/dist/) 中创建可部署的 war 文件“red.war”

由于我面临错误，我请求您使用新版本的 netbeans、jdk 为新版本的 glassfish 服务器（3.x）创建新版本（1.0、1.0.1、1.02）战争部署。

阿鲁姆甘 AV

# jquery - div内的Jquery wrap函数

> ID：13442802
> 
> 赞同：0
> 
> 时间：2012-11-18T17:49:02.427
> 
> 标签：jquery

如何将函数包装在不存在的 div 中？

到目前为止，我已经尝试过 .append 前后，但这会关闭标签。还尝试了.html，并在函数之后包装，没有运气。

```
$("#testing .input").each(function() {
    var s = $(this).find("li .value").text();
    // start wrap
    $("span.rune > span", this).each(function() {
        var e = $(this).text();
        $("#test-output").append('<span class="' +e+ ' Rune"></span>');
    });
    // stop wrap
    $("#test-output").append('<span>' +txtToNumber[s]+ '</span>');
}); 
```

开始 HTML ：

```
<div id="test-output"></div> 
```

结束 HTML：

```
<div id="test-output">
    <div class="three">
        <span class="Z Rune"></span>
        <span class="Y Rune"></span>
        <span class="X Rune"></span>
    </div>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:16:48.170

You can create elements in jQuery without appending them. Then they basically "don't exist yet", at least not in the DOM (they are disconnected). What you can also do is creating the `.three` element, append it to the DOM, and then append the `.Rune` elements to it:

```
// create .three element and append it to the DOM
var $three = $("<div>").addClass("three").appendTo("#test-output");

// map these elements to .Rune elements
$("span.rune > span", this).map(function() {
    var e = $(this).text();

    return $("<span>")
             .addClass(e)
             .addClass("Rune")
             .get(0);
}).appendTo($three);  // and append them to .three 
```

# java - 内置 wiki 模块的 CMS（开源+Java）列表

> ID：13442803
> 
> 赞同：2
> 
> 时间：2012-11-18T17:49:09.533
> 
> 标签：java, open-source, content-management-system, wiki

我们的 Java 开发新手团队被赋予了使用免费的开源 Java 解决方案为我们公司构建门户/网站的任务。它必须是具有强制性 2 个部分的网站：

1.  关于公司员工的部分（根据Oracle数据库），
2.  带有版本控制文档的部分。实际上，我们需要本节的 wiki 系统，因此我正在寻找带有内置/就绪 wiki 模块的 CMS。

我已经阅读了许多评论和文章，但无法获得有关 wiki 的太多信息。我知道 Magnolia 和 Liferay 满足这些要求。但是还有其他的吗？（我对 Riot CMS 特别好奇）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:03:24.767

[XWiki](http://www.xwiki.org/xwiki/bin/view/Main/WebHome)似乎有你需要的东西。

*   插件、API、编程（在开发中易于扩展）
*   结构化内容和内联脚本，允许构建 wiki 应用程序（易于添加新内容）
*   版本控制（添加新文章的能力，带有版本控制）
*   全文搜索（搜索内容的能力）
*   通过维基/空间/页面、使用组等进行用户权限管理（为用户分配角色的能力）

它使用许多流行的 Java 框架，如 Hibernate、Lucene 和 Velocity。还支持使用 Groovy 编写脚本，因此不难找到文档和帮助。另外，我引用[维基百科](http://en.wikipedia.org/wiki/XWiki)：

> XWiki 是一个用 Java 编写的免费 wiki 软件平台，其设计重点是可扩展性。

最好的部分（至少对我来说）是它在 LGPL 下获得许可。

# java - Xtext 运行时编译

> ID：13442808
> 
> 赞同：0
> 
> 时间：2012-11-18T17:50:01.407
> 
> 标签：java, parsing, dsl, xtext

我正在尝试了解[Xtext](http://www.eclipse.org/Xtext/index.html)并确定它是否符合我的需求。我正在寻找一种工具，它允许我创建一个可以在执行期间在我的应用程序中编译和评估的 DSL。

Xtext 似乎是一个非常好的工具，因为它为此提供了很多东西（语法编辑器、IDE 集成、解析器生成器等）。据我了解，Xtext 可以为我生成解析器和 IDE 扩展，但如果我需要编译器，我必须自己编写它或创建 Java 映射，从而生成可以编译的 Java 源文件。

我没有看到是否可以将 Xtext 的解析器和生成器嵌入到我的应用程序中，并在运行时编译用我的 DSL 编写的脚本，而无需预编译它们。目标是随我的应用程序一起发布脚本，使发布后的更改成为可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:13:44.707

是的，这是完全可能的，而且实际上很容易。所有核心组件，即非IDE 特性，都独立于Eclipse。文档中有示例 Java 代码展示了如何执行此操作。这基本上是一个问题或

```
// creating the injector
Injector injector = new MyLanguageStandaloneSetup().createInjectorAndDoEMFRegistration()

// obtain a resource set
XtextResourceSet resourceSet = injector.get(XtextResourceSet.class);

// load file
Resource resource = resourceSet.getResource(URI.create("path/to/file.mylanguage"), true);

// obtain root AST element
MyModel model = (MyModel) resource.getContents().get(0); 
```

# android - 通过安卓手机路由视频流流量

> ID：13442813
> 
> 赞同：3
> 
> 时间：2012-11-18T17:50:16.677
> 
> 标签：android, video, streaming, upnp, dlna

我想要一部 Android 手机来控制三星智能电视上的视频流播放。我可以通过视频流的 URL 向电视发送 UPnP 命令。不幸的是，三星电视不接受指向本地网络之外的 URL。为了使远程流工作，我必须通过我的手机循环流量，这样它看起来就像是三星电视的本地 URL。

我可能必须在手机上运行一个简单的代理类型的服务器。电话始终知道流 URL 是什么，因此代理可以非常简单，它始终接收任何传入请求并将其通过管道传输到外部服务器上的视频流。

我尝试过运行套接字连接并简单地将输入流从外部服务器复制到套接字服务器连接的输出流。虽然使用这个网络浏览器能够下载文件，但所有元数据都丢失了，而且每次文件下载完成时我似乎也遇到了一个损坏的管道异常。媒体播放器似乎根本不理解流，例如在 VLC 上没有播放。

对于服务器，我使用了一段非常简单的代码，如下所示：

```
 public class ServerThread implements Runnable {

    public void run() {
        try {
            if (SERVERIP != null) {

                serverSocket = new ServerSocket(SERVERPORT);

                while (true) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    client.setSoTimeout(20000);
                    client.setKeepAlive(true);

                    OutputStream os = client.getOutputStream();

                    OutputStream out = new BufferedOutputStream(os);

                    InputStream is = openHttpConnection("<URL to the stream>");

                    copyStream(is, out); 
```

对于复制流代码：

```
 private static void copyStream(InputStream input, OutputStream output)
        throws IOException {
    int bytesRead;
    try {
        while ((bytesRead = input.read()) != -1) {
            output.write(bytesRead);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    output.flush();
    output.close();
    input.close();
} 
```

我可以做些什么来简单地将所有元数据转发到套接字连接吗？还是我也做错了什么？

是否有任何从 Android 手机向媒体播放器提供视频的示例，我可以使用它来了解如何正确格式化响应流？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:22:09.710

第一：哥们！不知道你在这里！:-)

随着寒暄的结束...

我猜你的问题，至少部分是，你只是在复制 HTTP 有效负载，而不是来自服务器的整个 HTTP 响应。因此，您缺少该`200 OK`行和任何必要的标题。这假设 unseen`openHttpConnection()`正在使用`getInputStream()`a`HttpUrlConnection`或等价物。

选项包括：

*   在提供结果流之前，还要服务`getResponseCode()`、`getResponseMessage()`和从 重建的标头。`getHeaderFields()`

*   `HttpUrlConnection`从用于手动发出 HTTP 请求的原始套接字切换到仅提供输入。

*   查找并使用现有的 HTTP 反向代理引擎或透明代理引擎，例如[一个基于 servlet 的](http://wiki.apache.org/tomcat/ServletProxy)引擎，或者[一个基于本机代码](https://guardianproject.info/apps/orbot/)的引擎（可能在对其进行 de-Tor 处理之后）

# python - 两个字符串中的相似字符，在 Python 中返回所有相似字符（没有重复字符）

> ID：13442816
> 
> 赞同：0
> 
> 时间：2012-11-18T17:50:36.913
> 
> 标签：python, python-3.x

事先，我已经寻找了解决这个问题的方法，但似乎没有。因此，我目前正在尝试通过运行[http://singpath.appspot.com](http://singpath.appspot.com)上的 Python“路径”来自学 Python ，但遇到了一个我不知道如何解决的问题。我尝试了多种不同的方法来解决它，但不断提出不同的错误结果。任何提示/帮助都会很壮观！提前致谢！

问题：

> ### 比较字符串
> 
> 创建一个函数，该函数接受两个字符串的输入并返回一个字符串，该字符串包含两个输入中出现的所有字符。结果不应有任何重复，并应按排序顺序列出。您可能希望使用字符串模块中的变量小写，以便按顺序排列所有字母。

我当前的代码：

```
def in_both(s1, s2):
    s1 = s1.lower()
    s2 = s2.lower()

    l1=list(''.join(s1.split()))
    l2=list(''.join(s2.split()))

    same = ''

    for i in l1:
        if i in l2:

            same = ''.join(i)

    return same 
```

例子：

```
call: in_both('apple','orange') recieved: 'e' expected: 'ae' 
```

如您所见，它只收集一个相似的字符。有什么建议么？我尝试了几种不同的方法，但我不确定从这里去哪里！请帮忙！

Ps 我从一个类似的问题中得到了列表的想法：[Python Function to return a list of common letters in first and last names](https://stackoverflow.com/questions/9742832/python-function-to-return-a-list-of-common-letters-in-first-and-last-names)

我了解它是如何工作的问题是我必须同时返回一个包含所有比较的字符串。感谢“狼”对字符列表的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T18:10:30.773

您可以通过将其转换为集合来获取任何字符串中的唯一字符。您可以使用 获得两组的交集`intersection`。您可以对结果进行排序，这将返回一个列表。

```
def in_both(s1, s2):
    s1 = s1.lower()
    s2 = s2.lower()
    s1_chars = set(s1)
    s2_chars = set(s2)
    result = sorted(s1_chars.intersection(s2_chars))
    return result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:54:22.490

您不会在每个循环上附加到变量“send”，而是从头开始设置它。我想你想换行

```
same = ''.join(i) 
```

到：

```
same += i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T18:05:43.087

您可以先转换为字符集，然后找到交集

```
str1 = 'apple'
str2 = 'orange'
print list(str1)

set1 = set(list(str1))
set2 = set(list(str2))
setout = set1 & set2

print setout
myres = ''.join(setout)
print myres 
```

上述代码的输出

kkiller 机器：Eclipse$ python unique.letter.py

```
['a', 'p', 'p', 'l', 'e']
set(['a', 'e'])
ae 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T18:13:47.160

首先感谢所有帮助我解决问题的人！我输入的最终解决方案如下。它可能不是很pythonic，但它完成了工作:)如果我以后有时间我会回来重新审视解决方案！无论如何感谢您的建议！

代码：

* * *

```
def in_both(s1, s2):
    s1 = s1.lower()
    s2 = s2.lower()

    l1=list(''.join(s1.split()))
    l2=list(''.join(s2.split()))

    same = []

    for i in l1:
        if i in l2:            
            if i not in same:
                same += i
                same = sorted(same)
                same = ''.join(same)

    return same 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T18:16:25.020

试试这个 ：

```
def in_both(s1,s2):
       l1 =[]
       l2 = []
       l1= list(s1.lower())
       l2= list(s2.lower())
       s = [i for i in l1 if i in l2]
       same = list(set(''.join(s)))
       return same 
```

# rest - 在 WADL 中链接 XSD 文件

> ID：13442817
> 
> 赞同：3
> 
> 时间：2012-11-18T17:50:54.263
> 
> 标签：rest, xsd, cxf, jax-rs, wadl

我想创建一个 WADL 文件，可以使用 Apache CXF `wadl2java`Maven 插件从中创建 Java 接口。在 WADL 中，我想使用 XSD 文件中定义的数据类型。

这些是我的 REST 服务：

```
@Path("/v1/order")
public interface OrderResource {

@PUT
@Consumes(MediaType.APPLICATION_XML)
public Response createOrder(Order order);

@GET
@Produces(MediaType.APPLICATION_XML)
public List<Order> getOrders(@QueryParam("orderId") List<Long> orderIds);
} 
```

我的 WADL：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<application xmlns="http://wadl.dev.java.net/2009/02" >
    <grammars>
        <include href="RestService_schema1.xsd" />
    </grammars>
    <resources base="http://localhost:9080/rest/">
        <resource path="v1/order/" id="OrderResource">
            <resource>
                <method name="PUT" id="createOrder">
                    <request>
                        <representation mediaType="application/xml"  />
                    </request>
                    <response status="200">
                    </response>
                </method>
            </resource>
        </resource>
            <resource>
                <method name="GET" id="getOrders">
                    <request>
                        <param name="orderId" style="query" type="xs:long" />
                    </request>
                    <response status="200">
                        <representation mediaType="application/xml" />
                    </response>
                </method>
        </resource>   
    </resources>
</application> 
```

我的 RestService_schema1.xsd：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="Order" type="Order" />
    <xs:complexType name="Order">
        <xs:attribute name="OrderId" type="orderid">
            <xs:annotation>
                <xs:documentation>...
                </xs:documentation>
            </xs:annotation>
        </xs:attribute>
        <xs:sequence>
        .
        .
        .
        .
        </xs:sequence>
    </xs:complexType>
    <xs:simpleType name="orderid">
        <xs:annotation>
            <xs:documentation> ....
            </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:long" />
    </xs:simpleType>
</xs:schema> 
```

**我想做的事：**

*   我想在我的 WADL 中为 createOrder 服务指定输入类型 Order。我知道这可以通过元素属性来完成，但我该如何链接呢？也许`element="Order"`在`<representation>`-Tag 内？

*   getOrders()-Service 的查询参数应该是`List<Long>`（在 WADL 中是带有 orderid 的列表）和响应类型`List<Order>`。如何在 WADL 中指定它？

# html - HTML5 本地存储和变量类型

> ID：13442819
> 
> 赞同：6
> 
> 时间：2012-11-18T17:51:04.590
> 
> 标签：html, variables, types

我只是在为 HTML5 中的本地存储做一些测试。注意我使用的是 Safari 6.0.2，因为似乎许多 Web 引擎处理它们的方法不同。

如果我这样做：

```
localStorage.setItem('subTotal', Number(12345)); // I know, it's redundant :)
var varType = typeof localStorage.getItem('subTotal');

alert(varType); 
```

你现在会想；这是一个数字！但不，它不是.. 似乎，即使使用类型转换，HTML5 本地存储在插入它们时也会将所有变量类型转换为字符串。这很有趣，因为当使用开发工具时，它会在引号之间显示字符串值，而不是数字。也许是检查器窗格去掉了引号。

我已经在 jQuery 中有一个旧的自动 typeCasting 函数，但我总是厌倦这些情况，因为 0 和 false 仍然可以把事情搞砸。

任何人都知道 localStorage.* 库是否有维护变量类型的设置？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-18T17:52:54.257

您应该先将它们转换为 JSON：

```
localStorage.setItem( 'subTotal', JSON.stringify(12345) ); 
```

然后，在检索您的项目时，解析 JSON：

```
JSON.parse( localStorage.getItem('subTotal') ); 
```

这是小提琴：http: [//jsfiddle.net/hD9dF/](http://jsfiddle.net/hD9dF/)

* * *

为了更方便使用，请创建自己的包装器：

```
var myLocalStorage = {
    set: function (item, value) {
        localStorage.setItem( item, JSON.stringify(value) );
    },
    get: function (item) {
        return JSON.parse( localStorage.getItem(item) );
    }
}; 
```

这是小提琴：http: [//jsfiddle.net/hD9dF/1/](http://jsfiddle.net/hD9dF/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T17:57:43.940

本地存储将所有内容都转换为字符串（因为它将所有内容保存为文本）。为了让您的生活更轻松，并至少保留数字/布尔/对象结构，`JSON.stringify`以及`JSON.parse`进出的所有内容。

为了提高该建议的性能，每个“概念”仅使用一个 localStorage 变量（如地图小部件的所有数据，或所有用户首选项等），并构建一个 JS 对象，然后将其转换为 JSON 字符串，以保存到那个变量（必要时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T19:57:01.970

您想要做的事情很简单[localDataStorage](https://github.com/macmcmeans/localDataStorage)，您可以在其中透明地设置/获取以下任何“类型”：Array、Boolean、Date、Float、Integer、Null、Object 或 String。

[免责声明] 我是该实用程序的作者 [/DISCLAIMER]

例子：

```
localDataStorage.set( 'key1', 'Belgian' );
localDataStorage.set( 'key2', 1200.0047 );
localDataStorage.set( 'key3', true );
localDataStorage.set( 'key4', { 'RSK' : [1,'3',5,'7',9] } );
localDataStorage.set( 'key5', null );

localDataStorage.get( 'key1' );   -->   'Belgian'
localDataStorage.get( 'key2' );   -->   1200.0047
localDataStorage.get( 'key3' );   -->   true
localDataStorage.get( 'key4' );   -->   Object {RSK: Array(5)}
localDataStorage.get( 'key5' );   -->   null 
```

所有的转换工作都是在后台为您完成的：只需设置和获取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-10T10:01:03.480

例子：

```
let id = JSON.parse(<any>localStorage.getItem("id"))

if (typeof id != "number") {
// rest of code 
```

# vhdl - 如何表示大于整数的整数'high

> ID：13442822
> 
> 赞同：8
> 
> 时间：2012-11-18T17:51:47.440
> 
> 标签：vhdl

有没有办法使用 STD_LOGIC_1164 或 STD_NUMERIC 中的预定义类型来表示从 0 到 2^32-1 的整数？（考虑到默认整数类型范围从 -2^31-1 到 2^31-1）

我需要实现 32 位计数器，并且正在寻找某种方法来使用整数类型而不是 std_logic_vector 来保存代码。有任何设计模式吗？

或者，更好地问：声明支持操作 >/<、=、+-/ 的 32 位（无符号）整数的最佳方法是什么？

提前

Edit1：我发现的一个选项是将信号声明为 std_logic_vector(31 downto 0)，并在进行比较或 +- 操作时执行转换。例如：counter <= counter + std_logic_vector(unsigned(value) + 1)..仍然没有找到除法的方法（例如，如果需要计数器值的 1/4）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T22:46:09.870

使用整数类型，您不能（至少，不可移植；可能有一些 VHDL 工具超出最小值并提供 64 位整数）

使用 IEEE.numeric_std，您可以声明一个具有完整 32 位范围（或 53 位，如果您愿意）的无符号，它应该做您想要的一切。需要，除非我误解了您的要求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T14:36:41.387

```
use ieee.numeric_std.all; 
```

然后使用`unsigned`数据类型 - 它作为一个位向量运行，并为其定义了数学运算。您可以选择所需的位数。例如：

```
signal mynum : unsigned(234 downto 0) 
```

# android - 使用 Android 手机摄像头执行操作？

> ID：13442828
> 
> 赞同：0
> 
> 时间：2012-11-18T17:52:23.387
> 
> 标签：android, camera, implementation, sensors

我想知道是否可以注册靠近相机的动作，然后在应用程序中执行一些操作。

这在 Symbian 上是可能的，所以它也应该在更新的 Android 手机上。问题是我找不到任何可以开始使用的资源。

有人对我应该从哪里开始有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:27:41.487

看起来在 Google 代码上创建了一个库：[http ://code.google.com/p/android-motion-detection/](http://code.google.com/p/android-motion-detection/)

如果你想要更强大的东西，你也可以在 Android 上运行 OpenCV：http: [//opencv.org/android](http://opencv.org/android)不要以为没有其他相机或不同类型的传感器就可以做任何检测距离的事情（像声纳）虽然。

作为奖励，根据您要实现的目标，甚至还有一个不错的 API 不涉及任何额外的 Android SDK：http: [//developer.android.com/reference/android/media/FaceDetector.Face.html](http://developer.android.com/reference/android/media/FaceDetector.Face.html)

# php - 在我的用户密码上加盐

> ID：13442829
> 
> 赞同：0
> 
> 时间：2012-11-18T17:52:26.490
> 
> 标签：php

嘿伙计们

就是这样，我只喜欢在我身边这样做，不仅是 sha1。但是登录和许多其他事情更安全一些。

现在试试我举个例子。

```
function generateSalt($length) {
      $alphabet = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      $alphabet_length = strlen($alphabet);
      $salt = '';
      for ($i = 0; $i < $length; $i++) {
          $salt .= $alphabet[rand(0, $alphabet_length - 1)];
      }
      return $salt;
  }

  /*
  * Opret bruger på siden og kan har mulighed for alle ting!..
  */

 function bruger_opret_siden(){
         if ($stmt = $this->mysqli->prepare('SELECT NULL FROM `bruger` WHERE `brugernavn` = ?'))
         {
             $stmt->bind_param('s', $brugernavn);
             $brugernavn = $_POST["brugernavn"];
             $stmt->execute();
             $stmt->store_result();
             $count = $stmt->num_rows;
             $stmt->close();
             if($count > 0)
             {
                 $user_found = 1;
             }
         }
         if(!isset($user_found))
         {
             if($_POST["pass"] != $_POST["gentag"])
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive ens password på siden..</li>";
             }
             if(empty($_POST["pass"]) && empty($_POST["gentag"]))
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive et password på siden..</li>";
             }
             if(empty($_POST["navn"]))
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive et Fornavn</li>";
             }
             if(empty($_POST["efternavn"]))
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive et Efternavn</li>";
             }
             if(empty($_POST["land_by"]))
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive en by</li>";
             }
             if(empty($_POST["hojde"]))
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive en Højde</li>";
             }
             if(empty($_POST["email"]))
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive en Email</li>";
             }
             if(empty($_POST["brugernavn"]))
             {
                 $errors = 1;
                 echo "<li id=\"check_not\">Angive en Højde</li>";
             }

             if(!isset($errors))
             {
                 $pb = null;

                 include 'function/class.upload.php';
                 $handle = new Upload($_FILES["file"]);

                 if($handle->uploaded)
                 {
                     //lidt mere store billeder
                     $handle->image_resize = true;
                     $handle->image_ratio_y = true;
                     $handle->image_x = 220;
                     $handle->Process("profil-img/store");

                     //til profil billede lign..
                     $handle->image_resize = true;
                     $handle->image_ratio_crop = true;
                     $handle->image_y = 115;
                     $handle->image_x = 100;
                     $handle->Process("profil-img");

                     //til profil billede lign..
                     $handle->image_resize = true;
                     $handle->image_ratio_crop = true;
                     $handle->image_y = 75;
                     $handle->image_x = 75;
                     $handle->Process("profil-img/lille");
                     $pb = $handle->file_dst_name;            

                 }

              $password = $_POST["pass"];
              $algorithm = '$6$'; //<--- Dette betyder SHA 512
              $salt = $this->generateSalt(16); //<--- SHA 512 bruger et 16 tegn langt salt

              $hash = crypt($password, $algorithm . $salt);

             if ($stmt = $this->mysqli->prepare('INSERT INTO `bruger` 
             (`rank`, `email`, `brugernavn`, `password`, `profilbillede`, `profilbillede_godkendt`, `navn`, `efternavn`, `alder_d`, `alder_m`, `alder_aar`, `status`, `kon`, `seksualitet`, `land_by`, `hojde`) 
             VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)'))
             {

                 $stmt->bind_param('issssisssssiiisi', $rank, $email, $brugernavn, $password, $profilbillede, $pb_godkendt, $navn, $efternavn, $alder_d, $alder_m, $alder_aar, $kon, $seksualitet, $partnerstatus, $land_by, $hojde);
                 $rank = '1';
                 $pb_godkendt = '1';
                 $email = $_POST["email"];
                 $brugernavn = $_POST["brugernavn"];//C
                 $password = $hash;//C
                 $profilbillede = $pb;//C
                 $navn = $_POST["navn"];
                 $efternavn = $_POST["efternavn"];
                 $alder_d = $_POST["alder_d"];
                 $alder_m = $_POST["alder_m"];
                 $alder_aar = $_POST["alder_aar"];
                 $kon = $_POST["kon"];
                 $seksualitet = $_POST["seksualitet"];
                 $partnerstatus = $_POST["partnerstatus"];
                 $land_by = $_POST["land_by"];
                 $hojde = $_POST["hojde"];

                 $stmt->execute();
                 $stmt->close();

                 echo "godkendt";

                 }
                 else
                 {
                     /* Der er opstået en fejl */
                     echo 'Der opstod en fejl i erklæringen til ligge i databasen: ' . $mysqli->error;
                 }
             }
         }
         else
         {
             echo "<li id=\"check_not\">Dette brugernavn er optaget!!</li>";
         }
 } 
```

这是它在注册页面上的外观：

```
 if(isset($_POST["godkendt_bruger"]))
             {
                 $pass = $mebe->generateSalt();
                 $users = $mebe->bruger_opret_siden();
             }
'<?php
     /*
      * Giver admin adgang til se indhold på siden.
      */
     if(isset($_SESSION["rank"]) && $_SESSION["rank"] > 0) {
         $bruger = $mebe->brugerindhold_side();
     }

     /*
      * Hvis ingen af dem så få de bare adgang sådan her..
      */
     else{
     ?>
 <form name="login" method="post" action="#">
     <h1>Log ind</h1>
     <p>Brugernavn</p><input type="text" name="brugernavn"/>
     <p>Password</p><input type="password" name="pass"/>
     <br />
     <input type="submit" name="Log_ind" value="Log ind" id="login">
     <?php
     if(isset($_POST["Log_ind"]))
     {
     $pass = $mebe->generateSalt(12);
     $login = $mebe->godkendt_bruger_login();
     }
     ?>
     <ul>
         <li><a href="">Forgot password and username</a></li>
         <li><a href="/opret-bruger/">Users</a></li>
     </ul>
 </form>
 <?php
     }
 ?> 
```

当我需要登录页面时，这说明了它：

注意：未定义的变量：第 216 行 /home/jesperbo/public_html/mebe/function/function.php 中的哈希

```
function godkendt_bruger_login(){
          $password = $_POST["pass"];
          $algorithm = '$6$'; //<--- Dette betyder SHA 512
          $salt = $this->generateSalt(16); //<--- SHA 512 bruger et 16 tegn langt salt
         if($stmt = $this->mysqli->prepare('SELECT `id`, `brugernavn`, `rank`, `profilbillede`, `profilbillede_godkendt` FROM `bruger` WHERE `brugernavn` = ? AND `password` = ?'))
         {
         $stmt->bind_param('ss', $brugernavn, $password);
         $brugernavn = $_POST["brugernavn"];
         $password = $hash;
         $stmt->execute();
         $stmt->store_result();
         $stmt->bind_result($id, $brugernavn, $rank, $profilbillede, $profilbillede_godkendt);
         $stmt->fetch();
         $count = $stmt->num_rows;
         $stmt->close();

         if($count > 0)
         {
             $_SESSION["logged_in"] = true;
             $_SESSION["id"] = $id;
             $_SESSION["profilbillede"] = $profilbillede;
             $_SESSION["brugernavn"] = $brugernavn;
             $_SESSION["rank"] = $rank;
             $_SESSION["profilbillede_godkendt"] = $profilbillede_godkendt;

             if($_SESSION["logged_in"] == true)
             {
                 echo "godkendt";
             }
             else
             {
                 echo "<p>Desværre prøve igen brugernavn eller adgangskode passe ikke med vores</p>";
             }
         }
         else
         {
             echo "<p>Skrive brugernavn og Password</p>";
         }
     }
     } 
```

就是说这里；

```
$password = $hash; 
```

创建部分工作正常，因为它会生成一个长密码。但问题是当我登录页面时。

**希望你能帮我**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:08:00.960

这里：

```
function godkendt_bruger_login(){
          $password = $_POST["pass"];
          $algorithm = '$6$'; //<--- Dette betyder SHA 512
          $salt = $this->generateSalt(16); //<--- SHA 512 bruger et 16 tegn langt salt
         if($stmt = $this->mysqli->prepare('SELECT `id`, `brugernavn`, `rank`, `profilbillede`, `profilbillede_godkendt` FROM `bruger` WHERE `brugernavn` = ? AND `password` = ?'))
         {
         $stmt->bind_param('ss', $brugernavn, $password);
         $brugernavn = $_POST["brugernavn"];
         /* ---> */ $password = $hash;
         $stmt->execute(); 
```

您正在尝试初始化`$password`，`$hash`而函数范围内没有`$hash`定义。

正如你的错误正确地说：

> 注意：未定义的变量：第 216 行 /home/jesperbo/public_html/mebe/function/function.php 中的哈希

它只是让你注意到它`$hash`不存在，它将被转换，在`=`- 表达式中`NULL`，所以是`$password`; 这显然是您不想要的行为。

# javascript - 更改特定的喜欢使用 DOM

> ID：13442835
> 
> 赞同：1
> 
> 时间：2012-11-18T17:52:55.653
> 
> 标签：javascript, jquery, dom

我对 JavaScript 和 DOM 比较陌生，但对 C++ 有经验。我正在进行几个严重依赖 DOM 的 JavaScript 实验，包括一个响应命令的控制台。整个工作正常，除非元素比页面长。控制台的工作方式是使用 DOM，它接受一个元素并向内容添加一行。这是一个问题，因为在清除它时，我无法针对特定行（即顶部行）来仅清除/修改该行。我已经尝试了我所知道的一切，循环、数组、嵌套 if 等，但没有运气。我只是希望控制台停止无休止地扩展，要么有一个滚动条，要么只是开始清除旧行。这是当前的清算机制（非常没用）：

```
if (extended > 24)
{
    alert("Message Stream full, resetting.");
    document.getElementById("boxRightSpace").innerHTML = "";
    extended = 0;
} 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:03:48.277

每次插入新行时，您都可以将控制台滚动到底部：

```
document.getElementById("boxRightSpace").scrollTop = document.getElementById("boxRightSpace").scrollHeight; 
```

控制台 div 本身必须有一个固定的高度，`overflow:auto`就像这样

```
#boxRightSpace {
   overflow: auto;
   height: 300px;
   width: 400px;
} 
```

或者，您可以通过这种方法删除行：

```
<div id="boxRightSpace">
    <div>line1</div>
    <div>line2</div>
    <div>line3</div>
    <div>line4</div>
    <div>line5</div>
    <div>line6</div>
    <div>line7</div>
    <div>line8</div>
</div>

<script>

    var max_console_items = 5,
        cons= document.getElementById("boxRightSpace"),
        console_items = cons.getElementsByTagName("div");

    while (console_items.length > max_console_items)
    {
        cons.removeChild(console_items[0]);
    }
</script> 
```

# c - C 程序未正确读取参数

> ID：13442837
> 
> 赞同：2
> 
> 时间：2012-11-18T17:53:26.660
> 
> 标签：c

我正在编写一个程序，并且我想接受命令行参数，但是当我传递任何参数时，它就像总是调用 start 一样。我的代码如下。任何帮助表示赞赏。

```
//compile to iservices
// Ilkotech Services - C Core
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[]) {
    if (argc < 2) {
        printf("Usage: %s start|shutdown|reload\n",argv[0]);
    }
    else {
        if (strcmp(argv[1],"start") != 0) {
            services_start();
        }
        else if (strcmp(argv[1],"shutdown") != 0) {
            services_shutdown();
        }
        else if (strcmp(argv[1],"reload") != 0) {
            services_reload();
        }
        else {
            printf("%s is not a valid argument\n",argv[1]);
            printf("Usage: %s start|shutdown|reload\n",argv[0]);
            exit(1);
        }
    }
    return 0;
}
int services_start() {
    printf("Started.\n");
    return 0;
}
int services_shutdown() {
    printf("Shutting down!\n");
    return 0;
}
int services_reload() {
    printf("Reloading services configuration.\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T17:55:47.433

`strcmp`如果两个字符串相等，则返回 0。

> **C11 (n1570), § 7.24.4.2`strcmp`函数**
> 该`strcmp`函数返回一个大于、等于或小于零的整数，相应地，因为指向的字符串`s1`大于、等于或小于指向的字符串`s2`。

一些程序员曾经调用以下宏：

```
#include <string.h>
#define cmp_strings(a, b) (strcmp(a, b) == 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:57:34.197

根据[在线 C++ 参考](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)，如果字符串相等， strcmp() 将返回零。在这种情况下，您的代码基本上会说，如果第一个参数不是“start”，则运行 services_start()。

# html - 出现水平滚动条 - 偶数div的宽度=100%

> ID：13442838
> 
> 赞同：2
> 
> 时间：2012-11-18T17:53:44.567
> 
> 标签：html, css

我一直试图通过将 div 的
宽度和高度设置为 100% 来将 div 放入浏览器的工作区域。尽管我在屏幕上得到了垂直和水平滚动条。

HTML：

```
<html>
<body>
<div id="test">
</div>
</body>
</html> 
```

CSS：

```
#test{ width:100%; height:100%; background-color:red; }
body{ margin:0; padding:0; } 
```

我也用脚本尝试过这个，但返回了相同的结果。

脚本：

```
$('#test').css({'width':$(window).width(),'height':$(window).height()}); 
```

我一直在用 IE9 测试这个。有什么办法可以避免这种情况。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:09:29.530

**获得的解决方案：**

问题是，我忘记**为 Body 指定边框属性**

```
 body{ margin:0; padding:0; border:0;} 
```

现在它很好，**H 和 V 滚动条消失**了。
无论如何谢谢你们的及时回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:23:26.150

Depending on IE version / quirks mode, either:

```
 $(document).ready(function () {
        $('#test').css('height', $(window).innerHeight());
    }); 
```

or

```
 $(document).ready(function () {
        $('#test').css('height', document.body.clientHeight);
    }); 
```

will work. You can do the same with widths as well.

```
 $(window).innerWidth();
    document.documentElement.clientWidth; 
```

Using your code & my code in IE 9 worked good for me. Since it apparently didn't work for you, my only other suggestion is to **ensure there are no other borders/margins/paddings that could be interfering.**

```
<html>
<head>
<title>hi</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <style type="text/css">
        body{ margin:0; padding:0; }
        #test{ width:100%; height:100%; background-color:red; }
    </style>
</head>
<body>
<div id="test">
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('#test').css('height', $(window).innerHeight());
    });
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:23:45.570

```
body{ 

    margin:0; 
    padding:0; 

}

#test{ 

    position:absolute;
    top: 0px;
    left: 0px;
    width:100%; 
    height:100%; 
    border:none;
    background-color:red; 

} 
```

**或者**

```
#test{ 

    position:absolute;
    top: 0px;
    left: 0px;
    right:0px;
    bottom: 0px;
    border:none;
    background-color:red;

} 
```

# mongodb - MongoDB Capped Collection 最大允许大小

> ID：13442840
> 
> 赞同：3
> 
> 时间：2012-11-18T17:53:45.937
> 
> 标签：mongodb, pymongo

我正在使用可尾随的 mongodb 上限集合。我想将它的大小设置为最大值，因为我不想真正根据 FIFO 规则删除最旧的记录。

我希望数据尽可能长时间地保留，同时保持上限集合的功能。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T19:24:18.697

您可以根据需要制作上限集合；只需将`size`参数设置[`create_collection`](http://api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.create_collection)为足够大的值，以免空间不足。

像这样：

```
 db.create_collection('captest', capped=True, size=20000000000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T20:44:28.580

在这种情况下，您可以使用 size（以字节为单位）或 max（要保留的最大文档数）或两者都创建上限集合：

pymongo->

```
self.db.create_collection('system_health_log', capped=True, size=5242880, max=5000) 
```

蒙戈壳->

```
db.createCollection("system_health_log", { capped : true, size : 5242880, max : 5000 } ) 
```

[在此处](https://docs.mongodb.com/manual/core/capped-collections/)查看更多关于上限集合的信息。

# css - Angular.js、ng 风格和 IE8

> ID：13442841
> 
> 赞同：0
> 
> 时间：2012-11-18T17:53:47.547
> 
> 标签：css, internet-explorer-8, angularjs

我正在使用 angular.js 来重复一些数据。绑定之一计算 x 和 y 坐标并使用 ng-style-binding 设置它们。这在除 IE8 之外的所有浏览器中都可以正常工作。在 IE8 中，它似乎甚至没有运行我的功能。

但是，如果我使用 {{ }} 绑定将其作为文本输出，它会正确输出，但使用属性时则不会。

我的 html 看起来像这样：

```
<span ng-repeat="obj in item.products" class="product-point" ng-style="getPos(obj.point.x, obj.point.y, index)">
    <img ng-src="Images/add-button.png" width="100%" ng-click="addItemToList(obj.id)"/>
</span> 
```

getPos 函数如下所示：

```
$scope.getPos=function(x, y) {
    x = (parseFloat(x) * 0.01) * imageSize.width;
    y = (parseFloat(y) * 0.01) * imageSize.height;

    return "left:"+Math.round(x)+"px; " +"top:"+Math.round(y)+"px";
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:33:02.593

`object { top: y, left: x }`如果你返回一个而不是一个字符串，似乎工作。

# html - Twitter Bootstrap 品牌仅在折叠模式下显示

> ID：13442851
> 
> 赞同：14
> 
> 时间：2012-11-18T17:54:24.797
> 
> 标签：html, twitter, twitter-bootstrap

我正在使用 twitter bootstrap 响应式导航栏，我试图弄清楚如何让品牌仅在导航栏处于折叠模式时出现。

我认为可能需要涉及一些额外的 js，但我不确定那是什么或放在哪里。

这是我所拥有的：

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">

  <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>

  <!-- Be sure to leave the brand out there if you want it shown -->
  <a class="brand" href="#">Navigation</a>

  <!-- Everything you want hidden at 940px or less, place within here -->
  <div class="nav-collapse collapse">
    <!-- .nav, .navbar-search, .navbar-form, etc -->

        <ul class="nav nav-pills">
          <li><a href="#">Nav 1</a></li>
          <li><a href="#">Nav 2</a></li>
          <li class="dropdown">
            <a class="dropdown-toggle"
               data-toggle="dropdown"
               href="#">
                Programs
                <b class="caret"></b>
              </a>
            <ul class="dropdown-menu">
              <!-- links -->
              <li><a href="#">Program 1</a></li>
              <li><a href="#">Program 2</a></li>
              <li><a href="#">Program 3</a></li>
              <li class="divider"></li>
              <li><a href="#">Program A</a></li>
              <li><a href="#">Program B</a></li>
              <li><a href="#">Program C</a></li>
          </ul> <!-- closes dropdown menu -->
          </li> <!-- closes dropdown class -->
        </ul>   <!-- closes nav-pills -->   
  </div> <!-- closes collapse -->
</div> <!-- closes container -->
</div> <!-- closes navbar-inner -->
</div> <!-- closes overall navbar --> 
```

现在，品牌一直在显示，但我希望它仅在折叠模式下显示，以便观众知道那是导航栏。他们不需要在更大的屏幕模式下看到它。

任何资源都可能有所帮助。

谢谢你的时间。

克雷格

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-18T18:42:11.493

解决此问题的一种简单方法是使用 Bootstrap 提供的响应式实用程序类：

## 引导程序 4：

[![显示实用程序](../Images/e934e0ff4c9f62754b1f7fe5262912c4.png)](https://i.stack.imgur.com/B0JIv.png)

[来源](https://getbootstrap.com/docs/4.0/utilities/display/)

## Bootstrap 4 阿尔法：

[![Bootstrap 4 响应式实用程序](../Images/6e87f28e534e6a57efcc95958b3620b4.png)](https://i.stack.imgur.com/a7wOZ.png)

## 引导程序 3：

[![Bootstrap 3 响应式实用程序](../Images/1e1d721f2f2529c122e95197d3a7c68d.png)](http://getbootstrap.com/css/#responsive-utilities)

### 例子：

```
<a class="brand hidden-lg" href="#">Navigation</a> 
```

## 引导程序 2：

[![Bootstrap 2 响应式实用程序](../Images/5cadb068ec0f7be8a713777f9a838683.png)](http://getbootstrap.com/2.3.2/scaffolding.html#responsive)

### 例子：

```
<a class="brand hidden-desktop" href="#">Navigation</a> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-01T19:37:22.730

对于 Bootstrap 3，请使用以下类参考： http: [//getbootstrap.com/css/#responsive-utilities-classes](http://getbootstrap.com/css/#responsive-utilities-classes)

![引导可见性类](../Images/f9eff69b49def81c28f9746c3176ff48.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-10T17:08:17.540

由于 Bootstrap3.2 visible-xs、visible-sm 等已被弃用。参考： http: [//getbootstrap.com/css/#responsive-utilities-classes](http://getbootstrap.com/css/#responsive-utilities-classes)

所以在这种情况下，你应该使用：

```
<a class="brand visible-xs-block" href="#">Navigation</a> 
```

或者

```
<a class="brand visible-xs-inline" href="#">Navigation</a> 
```

或者

```
<a class="brand visible-xs-inline-block" href="#">Navigation</a> 
```

`display`取决于应将哪种类型的属性应用于此链接。

这将`Navigation`仅在您的导航折叠时显示您的品牌链接

# android - 更改 ListView 的空视图

> ID：13442853
> 
> 赞同：3
> 
> 时间：2012-11-18T17:54:37.400
> 
> 标签：android, android-layout, listview

我正在使用带有自定义适配器的 ListView 来接收 JSON 响应并将其放入一个不错的列表中 - 效果很好。

我现在正在测试各种异常和错误处理，并在 Android 应用程序中捕获从我的 Web API 收到的错误。这一切都很好，处理得很好 - 但对于我来说，一旦设置一次，我无法弄清楚如何更改 ListView 的“空视图”。

它在一个片段中，如果这有什么不同的话 - 但是 ProgressBar 和 ListView 是在一个 XML 布局中定义的，该布局在片段中膨胀。我在那里也有一个 TextView，其中包含一些错误文本 - 我想知道如何为 TextView onError() 切换 ProgressBar！

编辑：目前 ListView 使用 ProgressBar 作为空视图 - 我想知道以后如何将其更改为另一个视图 - XML 定义或编程。

UI 线程没有被锁定，因为所有 API 调用都是在 AsyncTask 上执行的，所以这不是问题。

ListView.removeAllViews() 导致了相当迫在眉睫的崩溃。

抱歉，如果这是微不足道的...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T18:01:57.003

您可以将空视图定义为 FrameLayout 并将任何您想要的空状态放在该视图中，并按照您更改任何其他视图的内容的方式对其进行更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-19T13:54:37.757

我的 ListView 有两个空视图。一个是我在从数据库或服务器加载数据时显示的 ProgressBar。其他是TextView，当我出错或没有数据时显示。

我将 ListView、ProgressBar 和 TextView 放在 FrameLayout 中。并将 ProgressBar 和 TextView 的可见性设置为 Gone。

```
 <FrameLayout 
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1">

        <ListView 
            android:id="@+id/my_listview"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

        <TextView 
            android:id="@+id/empty_textview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:visibility="gone"
            android:text="@string/no_contacts_found"/>

        <ProgressBar 
            android:id="@+id/empty_progressbar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="gone"
            android:layout_gravity="center"
            android:indeterminate="true"/>

    </FrameLayout> 
```

在从数据库或服务器加载数据之前，我将 ProgressBar 的可见性更改为 Visible，并将其设置为我的 ListView 的空视图。所以我的 ListView 开始显示 ProgressBar，指示用户数据仍在加载。

如果我收到错误或没有从数据库或服务器获得数据，我将 ProgressBar 的可见性设置为 Gone，并将 TextView 的可见性更改为 Visible。然后将 TextView 设置为我的 ListView 的空视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T18:00:29.813

我刚刚在一个旧项目中找到了这段代码，应该可以正常工作：

```
View emptyView = inflater.inflate(R.layout.id_of_your_layoout_file, parent, false);
getListView.setEmptyView(emptyView); 
```

# c# - 用通配符替换

> ID：13442855
> 
> 赞同：9
> 
> 时间：2012-11-18T17:54:41.540
> 
> 标签：c#, regex

我需要一些建议。假设我有以下字符串：`Read Variable` 我想在一个字符串中找到所有这样的文本，并使它们都像下面这样：`Variable = MessageBox.Show`. 作为其他示例：

```
"Read Dog" --> "Dog = MessageBox.Show"
"Read Cat" --> "Cat = MessageBox.Show" 
```

你能帮助我吗？我需要在 C# 中使用 RegEx 的快速建议。我认为这是一项涉及通配符的工作，但我不知道如何很好地使用它们......另外，我明天需要这个用于学校项目......谢谢！

编辑：这是我到目前为止所做的，但它不起作用：`Regex.Replace(String, "Read ", " = Messagebox.Show")`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T17:59:43.877

你可以这样做

```
string ns= Regex.Replace(yourString,"Read\s+(.*?)(?:\s|$)","$1 = MessageBox.Show"); 
```

`\s+`匹配 1 到多个空格字符

`(.*?)(?:\s|$)`匹配 0 到多个字符，直到第一个空格（即`\s`）或到达字符串的末尾（即`$`）

`$1`代表第一个捕获的组，即`(.*?)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T18:04:48.540

您可能想澄清您的问题......但这里有：

如果要匹配正则表达式中“Read”之后的下一个单词，请使用`Read (\w*)`where`\w`是单词字符类并且`*`是贪婪匹配运算符。

如果要匹配正则表达式中“Read”之后的所有内容，请使用`Read (.*)$`where`.`将匹配所有字符并`$`表示行尾。

使用任一正则表达式，您都可以使用替换，`$1 = MessageBox.Show`因为 $1 将引用第一个匹配的组（由括号表示）。

完整代码：

```
replacedString = Regex.Replace(inStr, @"Read (.*)$", "$1 = MessageBox.Show"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T18:00:01.453

您尝试的问题是，它不知道应该在变量之后插入替换字符串。假设有效的变量名包含字母、数字和下划线（可以方便地与 匹配`\w`）。这意味着，任何其他字符都以变量名结尾。然后您可以匹配变量名称，捕获它（使用括号）并将其放入替换字符串中`$1`：

```
output = Regex.Replace(input, @"Read\s+(\w+)", "$1 = MessageBox.Show"); 
```

请注意，`\s+`匹配一个或多个任意空白字符。`\w+`匹配一个或多个字母、数字和下划线。如果您只想将变量名称限制为字母，则可以在此处进行更改：

```
output = Regex.Replace(input, @"Read\s+([a-zA-Z]+)", "$1 = MessageBox.Show"); 
```

[这是一个很好的教程。](http://www.regular-expressions.info/tutorial.html)

最后请注意，在 C# 中，建议将正则表达式编写为逐字字符串 ( `@"..."`)。否则，您将不得不双重转义所有内容，以便反斜杠进入正则表达式引擎，这确实降低了正则表达式的可读性。

# web-services - 轻量级 Java Web 服务

> ID：13442856
> 
> 赞同：0
> 
> 时间：2012-11-18T17:54:49.493
> 
> 标签：web-services, node.js, rest

我正在研究用于构建 REST Web 服务的 node.js。这听起来很有趣，但不能很好地支持对 Java 的调用。我有一个我希望能够与 node.js 一起使用的应用程序的 Java API，但 node.js 似乎与 Java 的接口不太好。有没有像 node.js 这样对 Java 更友好的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T07:54:00.330

我不知道您希望您的框架如何像 node.js，但我找到了[Play！框架](http://www.playframework.org/)是轻量级的，并为此提供了很好的功能。

# opengl-es - 将 Adob e Illustrator 矢量图像转换为 Open GL

> ID：13442859
> 
> 赞同：1
> 
> 时间：2012-11-18T17:55:21.860
> 
> 标签：opengl-es, vector-graphics, adobe-illustrator

如何获取 Adob​​e Illustrator 生成的矢量并获得在 Open GL 调用中再现图像所需的点？

我想做的是拿一些我的二维艺术品，并直接在我的程序上制作它。这将使我能够支持我可能需要的任何分辨率，同时看起来仍然清晰，并且可能还节省一些内存。我只是不知道如何实现它。最终，这将转向 Android 编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:40:12.093

OpenGL 不是一个很好的绘制 2D 矢量图形插图的 API。这些通常包含许多弯曲的补丁（Bezier 和/或 NURBS），必须先将其分解为三角形，然后才能使用 OpenGL 绘制它们。

还有另一种 API，称为 OpenVG，专门用于支持绘制 2D 矢量插图。一些 OpenVG 实现支持 OpenGL 交互。并且一些 OpenVG 实现*确实*使用 OpenGL 作为其后端。

另一种选择也是目前更可行的方法是使用矢量图形绘图库，它使用 OpenGL 作为后端。其中一个库是[Cairo](http://www.cairographics.org/)，它还提供了 SVG 文件的阅读器。

Adobe Illustrator (.ai) 是一种专有格式，所以我宁愿不使用它。但是 Illustrator 可以很好地导出到 SVG，Cairo 确实可以很好地读取和绘制 Illustrator 生成的 SVG 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T19:12:51.470

Use Inkscape's command line to `--export-plain-svg` on the Illustrator file. It's not a perfect conversion (particularly fonts) but it gets the job done.

Anyone know if Cairo has something similar to `--export-plain-svg` since Inkscape is based off of it and it's so low-level (faster)?

# python - 以下 Python 代码有什么作用？

> ID：13442864
> 
> 赞同：-4
> 
> 时间：2012-11-18T17:55:54.620
> 
> 标签：python

```
tmp = dict(zip(listToAppend, x_test))
# x_test is a data vector imported earlier from a file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:57:53.620

```
>>> listToAppend = ['a', 'b', 'c']
>>> x_test = [1, 2, 3]
>>> zip(listToAppend, x_test)
[('a', 1), ('b', 2), ('c', 3)]
>>> dict(zip(listToAppend, x_test))
{'a': 1, 'c': 3, 'b': 2} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:58:37.917

以列表为例`two`并理解它。

`zip`组合这两个列表，并使用两个列表中的元素创建一个`list`of 。`2-elements tuple`

然后`dict`将其转换`list`为`tuple`字典，`1st element`将每个元组的作为`key`和第二个值作为值。

```
>>> l1 = [1, 2, 3]
>>> l2 = [4, 5, 6]
>>> zip(l1, l2)
[(1, 4), (2, 5), (3, 6)]
>>> dict(zip(l1, l2))
{1: 4, 2: 5, 3: 6}
>>> 
```

如果你结合`3 lists`using `zip`，你会得到一个`list of 3-elements tuple`.

此外，如果您的列表大小不同，则`zip`仅考虑最小大小，并忽略较大列表中的额外元素。

```
>>> l1 = ['a', 'b']
>>> l2 = [1, 2, 3]
>>> zip(l1, l2)
[('a', 1), ('b', 2)] 
```

# c# - 如何更新旋转矩形边缘上的 x、y 坐标

> ID：13442867
> 
> 赞同：1
> 
> 时间：2012-11-18T17:56:09.973
> 
> 标签：c#, coordinates, rectangles, rotatetransform

好的，所以我已经搜索并搜索了我的问题的解决方案，但似乎没有解决它。

我需要制作一个带有旋转“大炮”的游戏，我的大炮是一个简单的矩形，放置在面板中间，我可以用键盘旋转它。它围绕一个边缘旋转。我想从另一边的边缘射出去。我通过以下方式找到了射击子弹的起点：

```
x = a + dia * (float)Math.Cos(angle);
y = b + dia * (float)Math.Sin(angle) 
```

其中“a，b”是我旋转它的中心坐标，“dia”是矩形的对角线，“angle”是我的矩形一半的角度。

```
public float rotate = 0.0f; 
g.TranslateTransform(a , b);
        g.RotateTransform(rotate); 
```

我有一个自己的子弹类，我把它放在一个列表中。到目前为止，一切都很好。但是当我旋转我的大炮时，子弹不再从尖端出来了......它们只是开始出现在我想要它们的地方很远的地方。这是因为这段代码：

```
x = (float)((x * Math.Cos(rotate)) - (y * Math.Sin(rotate)));
        y = (float)((x * Math.Sin(rotate)) + (y * Math.Cos(rotate))); 
```

那应该更新大炮尖端的x，y坐标。如果我删除它，它只会从同一个地方触发（不废话）。有人可以向我解释一下我需要编写什么代码来更新 X、Y 以便它们从我的矩形边缘出来吗？这让我疯狂..

编辑：发现我的答案在清晨盯着屏幕。我不需要任何“查找新的 x，y 坐标”。我只是做了一个更新程序，用浮点数更新原始角度，每次旋转它时它需要移动一点。哈哈！如此简单，却又如此难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:12:22.000

首先，

```
x = (float)((x * Math.Cos(rotate)) - (y * Math.Sin(rotate)));
y = (float)((x * Math.Sin(rotate)) + (y * Math.Cos(rotate))); 
```

需要是这样的：

```
float oldx = x;
float oldy = y; 
x = (float)((oldx * Math.Cos(rotate)) - (oldy * Math.Sin(rotate)));
y = (float)((oldx * Math.Sin(rotate)) + (oldy * Math.Cos(rotate))); 
```

您的新价值观需要完全基于旧价值观..

如果修复后还有其他问题，可能与矩形在平面上的平移方式有关。

编辑：如果这是一次代码审查，我会说我刚刚给出的解决方案也不是最好的解决方案（它只是不会受到您通过使用 x 的新值来计算新值而引入的错误的影响y)。请参阅，与乘法和加法相比，Math.Cos 和 Math.Sin 通常是昂贵的运算。如果您有一堆需要以相同方式转换的点，最好计算一次`Math.Sin(rotate)`并`Math.Cos(rotate)`为每个点使用这些值。这可能是使用[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)并定义一个类的好地方，其中一个实例将保存给定对象/上下文的所有点，以便可以聚合完成操作。

# javascript - jquery在点击时交换图像然后隐藏

> ID：13442871
> 
> 赞同：0
> 
> 时间：2012-11-18T17:56:32.013
> 
> 标签：javascript, jquery

我正在尝试建立一个菜单。在画布上，我加载不同的图像并使用 CSS 定位它们。目前我使用 SHOW / HIDE 操作，有很多代码重复。我的问题是： - 而不是仅仅隐藏一个图像，我怎样才能在点击另一个图像时改变它？如果我应该单击另一个按钮，然后再次隐藏它？- 是否有可能以某种方式更简单地编写所有这些代码？

非常感谢...

```
 $("#ten").click(sizeTen);
function sizeTen(){
    cb_ctx.lineWidth = 10;
    clickSound();
    $(this).hide();
    $("#twenty").show();
    $("#forty").show();
    $("#sixty").show();
}

$("#twenty").click(sizeTwenty);
function sizeTwenty(){
    cb_ctx.lineWidth = 20;
    clickSound();
    $(this).hide();
    $("#tenClick").show();
    $("#ten").show();
    $("#forty").show();
    $("#sixty").show();
}

$("#forty").click(sizeForty);
function sizeForty(){
    cb_ctx.lineWidth = 40;
    clickSound();
    $(this).hide();
    $("#ten").show();
    $("#twenty").show();
    $("#sixty").show();
}

$("#sixty").click(sizeSixty);
function sizeSixty(){
    cb_ctx.lineWidth = 60;
    clickSound();
    $(this).hide();
    $("#ten").show();
    $("#twenty").show();
    $("#forty").show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:06:30.170

也许你可以通过以下代码来缩小你的编码，

```
$("#ten,#twenty,#sixty").show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:32:35.567

我会将所有数值与相应的 ID 一起放在地图中，并为所有按钮创建一个处理程序：

```
var boo = function () {
    var values = { 'ten': 10, 'twenty': 20, 'forty': 40, 'sixty': 60 };
    var id = $(this).attr('id');

    $(this).hide();

//    cb_ctx.lineWidth = values[id];
//    clickSound();

    $.each(values, function(key, value) {
        if (id != key) {
            $('#' + key).show();
        }
    });
};

$('#ten, #twenty, #forty, #sixty').click(boo); 
```

在以下位置查看 jsfiddle：http: [//jsfiddle.net/LNFza/4/](http://jsfiddle.net/LNFza/4/)

干杯。

# opengl - GL_LUMINANCE 和 ATI 的问题

> ID：13442872
> 
> 赞同：1
> 
> 时间：2012-11-18T17:56:38.603
> 
> 标签：opengl, glsl, luminance

我正在尝试在我的 ATI 显卡上使用亮度纹理。

*问题*：我无法从我的 GPU 中正确检索数据。每当我尝试阅读它（使用 glReadPixels）时，它给我的只是一个“全一”数组（1.0、1.0、1.0...）。

您可以使用以下代码对其进行测试：

```
#include <stdio.h>
#include <stdlib.h>
#include <GL/glew.h>
#include <GL/glut.h>

static int arraySize = 64;
static int textureSize = 8;
//static GLenum textureTarget = GL_TEXTURE_2D;
//static GLenum textureFormat = GL_RGBA;
//static GLenum textureInternalFormat = GL_RGBA_FLOAT32_ATI;
static GLenum textureTarget = GL_TEXTURE_RECTANGLE_ARB;
static GLenum textureFormat = GL_LUMINANCE;
static GLenum textureInternalFormat = GL_LUMINANCE_FLOAT32_ATI;

int main(int argc, char** argv)
{
    // create test data and fill arbitrarily
    float* data = new float[arraySize];
    float* result = new float[arraySize];

    for (int i = 0; i < arraySize; i++)
    {
        data[i] = i + 1.0;
    }

    // set up glut to get valid GL context and
    // get extension entry points
    glutInit (&argc, argv);
    glutCreateWindow("TEST1");
    glewInit();

    // viewport transform for 1:1 pixel=texel=data mapping
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0.0, textureSize, 0.0, textureSize);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glViewport(0, 0, textureSize, textureSize);

    // create FBO and bind it (that is, use offscreen render target)
    GLuint fboId;
    glGenFramebuffersEXT(1, &fboId);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fboId);

    // create texture
    GLuint textureId;
    glGenTextures (1, &textureId);
    glBindTexture(textureTarget, textureId);

    // set texture parameters
    glTexParameteri(textureTarget, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(textureTarget, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(textureTarget, GL_TEXTURE_WRAP_S, GL_CLAMP);
    glTexParameteri(textureTarget, GL_TEXTURE_WRAP_T, GL_CLAMP);

    // define texture with floating point format
    glTexImage2D(textureTarget, 0, textureInternalFormat, textureSize, textureSize, 0, textureFormat, GL_FLOAT, 0);

    // attach texture
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, textureTarget, textureId, 0);

    // transfer data to texture
    //glDrawBuffer(GL_COLOR_ATTACHMENT0_EXT);
    //glRasterPos2i(0, 0);
    //glDrawPixels(textureSize, textureSize, textureFormat, GL_FLOAT, data);
    glBindTexture(textureTarget, textureId);
    glTexSubImage2D(textureTarget, 0, 0, 0, textureSize, textureSize, textureFormat, GL_FLOAT, data);

    // and read back
    glReadBuffer(GL_COLOR_ATTACHMENT0_EXT);
    glReadPixels(0, 0, textureSize, textureSize, textureFormat, GL_FLOAT, result);

    // print out results
    printf("**********************\n");
    printf("Data before roundtrip:\n");
    printf("**********************\n");

    for (int i = 0; i < arraySize; i++)
    {
        printf("%f, ", data[i]);
    }
    printf("\n\n\n");

    printf("**********************\n");
    printf("Data after roundtrip:\n");
    printf("**********************\n");

    for (int i = 0; i < arraySize; i++)
    {
        printf("%f, ", result[i]);
    }
    printf("\n");

    // clean up
    delete[] data;
    delete[] result;

    glDeleteFramebuffersEXT (1, &fboId);
    glDeleteTextures (1, &textureId);

    system("pause");

    return 0;
} 
```

我还在互联网上的某个地方读到 ATI 卡还不支持亮度。有没有人知道这是不是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:53:59.000

这与亮度值无关；问题在于您读取浮点值。

为了通过 glReadPixels 正确读取浮点数据，您首先需要[设置颜色钳位模式](http://www.opengl.org/wiki/GLAPI/glClampColor)。由于您显然没有使用 OpenGL 3.0+，因此您应该查看[ARB_color_buffer_float 扩展](http://www.opengl.org/registry/specs/ARB/color_buffer_float.txt)。在那个扩展中是`glClampColorARB`，它的工作方式与核心 3.0 版本非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:56:26.100

这是我发现的：

1) 如果您使用 GL_LUMINANCE 作为纹理格式（以及 GL_LUMINANCE_FLOAT32_ATI GL_LUMINANCE32F_ARB 或 GL_RGBA_FLOAT32_ATI 作为内部格式），则 glClampColor(..)（或 glClampColorARB(..)）似乎根本不起作用。如果我将纹理格式设置为 GL_RGBA，我只能看到值被主动钳制/未钳制。我不明白为什么会发生这种情况，因为我听说的唯一 glClampColor(..) 限制是它只适用于浮点缓冲区，所有选择的内部格式似乎都是。

2）如果您使用 GL_LUMINANCE（同样，使用 GL_LUMINANCE_FLOAT32_ATI、GL_LUMINANCE32F_ARB 或 GL_RGBA_FLOAT32_ATI 作为*内部*格式），看起来您必须“更正”您的输出缓冲区将其每个元素除以 3。我猜这是因为当您使用 glTexImage2D(. .) 使用 GL_LUMINANCE[它在内部将每个数组组件复制三次](http://www.opengl.org/sdk/docs/man2/xhtml/glTexImage2D.xml)，当您使用 glReadPixel(..) 读取 GL_LUMINANCE 值时，[它会根据 RGB 组件的总和计算其值](http://www.opengl.org/sdk/docs/man2/xhtml/glReadPixels.xml)（因此，是您作为输入给出的三倍）。但同样，它仍然为您提供钳位值。

3）最后，如果你使用 GL_RED 作为纹理格式（而不是 GL_LUMINANCE），你不需要打包你的输入缓冲区并且你可以正确地得到你的输出缓冲区。这些值没有被限制，您根本不需要调用 glClampColor(..)。

所以，我想我会坚持使用 GL_RED，因为最终我想要的是一种从“内核”发送和收集浮点值的简单方法，而不必担心偏移数组索引或类似的事情。

# dataset - 高效连接多个 sas 数据集

> ID：13442882
> 
> 赞同：4
> 
> 时间：2012-11-18T17:57:48.217
> 
> 标签：dataset, concatenation, sas

我有超过 20 万个具有相同变量（n<1000，通常是 n<100）的小数据集，我想将它们连接到主数据集中。我尝试使用一个宏，它使用一个数据步骤来遍历所有新数据集，并使用“set master new:”与主数据集连接，但这需要很长时间。此外，如果我尝试同时运行，调用执行数据步骤会说我在一个巨大的服务器机器上内存不足。作为参考，所有小数据集加起来刚刚超过 5 Gigs。任何建议将不胜感激。这是我到目前为止所拥有的：

```
%macro catDat(name, nbr) ;
    /*call in new dataset */
    data new ;
    set libin.&name ;
    run ;

    /* reorder names */
    proc sql noprint;
    create table new as 
    select var1, var2, var3
    from new;
    quit;

    %if &nbr = 1 %then %do ;
        data master;
        set new;
        run;
    %end; 
    %if &nbr > 1 %then %do ;
        data master;
        set master new ;
        run;
    %end ;
%mend;

/* concatenate datasets */
data runthis ;
set datasetNames ;
call execute('%catdat('||datasetname||','||_n_||')');
run; 
```

已解决：请参阅下面 Bob 的评论。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T18:31:29.767

尝试使用`PROC APPEND`而不是您的“新”数据集；这会快得多：

```
%macro DOIT;

proc sql noprint;
   select count(*) into : num_recs
   from datasetNames;
quit;

%do i=1 %to &num_recs;

data _null_;
  i = &i;
  set datasetNames point=i;
  call symput('ds_name',datasetname);
  stop;
run; /* UPDATE:  added this line */

%if &i = 1 %then %do;
/* Initialize MASTER with variables in the order you wish */
data master(keep=var1 var2 var3);
   retain var1 var2 var3;
   set libin.&ds_name;
   stop;
run;
%end;

proc append base=master data=libin.&ds_name(keep=var1 var2 var3);
run;

%end;

%mend DOIT; 
```

`PROC APPEND`将每个数据集添加到您的新“主”中，而无需像您现在所做的那样每次都重新构建它。这也避免了使用`CALL EXECUTE`，消除了您遇到的内存问题（由于在执行堆栈中生成了如此多的代码）。

# search - Solr 数据导入属性 - 不存在

> ID：13442884
> 
> 赞同：1
> 
> 时间：2012-11-18T17:57:53.620
> 
> 标签：search, solr, lucene

我正在尝试通过 Solr 中的 DIH 进行增量导入。当我尝试这样做时，我在我的努力日志中得到了这个：

```
INFO: Starting Delta Import
Nov 18, 2012 12:48:46 PM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/dataimport params={clean=false&command=delta-import} status=0 QTime=1 
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.SimplePropertiesWriter readIndexerProperties
WARNING: Unable to read: dataimport.properties
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder doDelta
INFO: Starting delta collection.
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Running ModifiedRowKey() for Entity: 84430688679548
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Completed ModifiedRowKey for Entity: 84430688679548 rows obtained : 0
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Completed DeletedRowKey for Entity: 84430688679548 rows obtained : 0
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Completed parentDeltaQuery for Entity: 84430688679548
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Running ModifiedRowKey() for Entity: document
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Completed ModifiedRowKey for Entity: document rows obtained : 0
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Completed DeletedRowKey for Entity: document rows obtained : 0
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder collectDelta
INFO: Completed parentDeltaQuery for Entity: document
Nov 18, 2012 12:48:46 PM org.apache.solr.handler.dataimport.DocBuilder doDelta
INFO: Delta Import completed successfully 
```

它不起作用，但我认为这与此错误有关：

```
WARNING: Unable to read: dataimport.properties 
```

显然这个文件应该在我的 solr/conf 目录中，但它不在这个目录中。此错误是否会停止 DIH 工作以及如何创建此文件。关于为什么默认情况下不创建它的任何线索也会很有趣。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:19:21.217

我遇到了这个问题，解决方法是使 conf 目录可写。或者只是让 dataimport.properties 对所有人都可写。

# xcode - 通过 MacPorts 安装颠覆时，port install 命令冻结

> ID：13442885
> 
> 赞同：1
> 
> 时间：2012-11-18T17:58:07.053
> 
> 标签：xcode, svn, osx-mountain-lion, macports, configure

我在通过 MacPorts 安装 subversion 时遇到问题。来自的命令输出`port`是：

```
# port install subversion
--->  Computing dependencies for subversion
--->  Configuring subversion 
```

在这一点上，它无限期地坐在那里。我 Ctrl+C 退出，并使用 -d 选项运行 port 以获取一些调试信息，这就是我得到的：

[包含命令输出的 Pastebin](http://pastebin.com/SGs8kf9J)

所以在这一点上，我可以看到它`configure`在 python 检查结束时或下一次检查开始时卡在脚本中。

本`configure`例中的脚本位于`/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_devel_subversion/subversion/work/subversion-1.7.7`

`configure`调用`$abs_srcdir/build/find_python.sh`返回的帮助脚本 ( ) `python`，`configure`脚本然后进行一些检查，并返回`python`可执行文件的完整路径，然后进行下一个检查。根据第 20129 行的下一个检查`configure`是针对 JVM（我确实安装了）。没有进一步手动迭代配置脚本，我想我在这里检查一下，看看社区是否有任何建议。

```
Mac OS X 10.8 (Mountain Lion)
MacPorts v2.1.2
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Xcode 4.5.2 (with up to date command line tools)
Python 2.7.2 
```

如果有任何其他相关信息我忽略了，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T19:17:32.690

听起来很愚蠢，我知道...但是您是否尝试重新启动系统？

在升级 OS X（因此也升级了 Xcode）之后，我还陷入了使用不同软件包（ccutils、gmp 等）进行配置的困境。花了一些时间寻找答案，重新安装了所有东西，没有任何帮助。

重新启动是最后的手段......并为我做了诀窍：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:39:41.240

我可以通过破解配置脚本来安装颠覆，只需将 OSX_VERSION 设置为硬编码的“10.8”并再次运行端口安装命令。由于某种原因，它挂在一系列命令上：

`/usr/bin/sw_vers | grep ProductVersion | cut -f2 | cut -d"." -f1,2`

我认为第二次切割是问题所在，因为在第二个窗口中运行 ps -ef 显示切割`-d"." -f1,2`仍在运行。也许尝试`-f1,2`用引号括起来？

但是，只需`OSX_VERSION="10.8"`在配置脚本中的所有位置进行设置，我就可以安装颠覆！

# java - 如何在java中使用FTPClient压缩FTP位置的文件夹

> ID：13442888
> 
> 赞同：1
> 
> 时间：2012-11-18T17:58:22.420
> 
> 标签：java, ftp, zip, directory

我想压缩一个文件夹，其中包含一些文件并且存在于 ftp 位置。我如何在 FTP 位置压缩文件夹。

```
 FTPClient ftp = new FTPClient();
 ftp.connect(hostname);
 ftp.login(user, pass);
 ftp.changeWorkingDirectory("myfolder"); //I wanted to zip this "myfolder" 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:10:18.913

虽然下载文件、在本地压缩文件和上传文件的过程将完全按照您的意愿进行，但这可能需要很多时间，具体取决于您的连接速度。

如果您对机器有 SSH 访问权限，我强烈建议您使用它。您可以使用 Java 的 SSH 库（如[SSHJ](https://github.com/shikhar/sshj)）并在文件夹上运行 zip 命令。这将使服务器在本地压缩文件，这会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:01:53.053

FTP 只处理文件传输。因此，您可以下载或上传文件，但仅此而已。如果你想压缩一些东西，你必须将它下载到你控制的机器上并在那里压缩。或者，您可以使用其他协议来访问机器（ssh / 远程桌面 / telnet / 你实现的任何东西）并远程压缩它，但这不会通过 FTP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T18:03:23.467

查看[FTP 协议命令列表](http://en.wikipedia.org/wiki/File_Transfer_Protocol#List_of_FTP_commands)- 那里没有关于 ZIP 的内容。而且`FTPClient`只能做FTP协议能做的。你要做的是：

*   下载要压缩的文件夹的内容
*   本地压缩
*   上传，可选择删除原始文件夹

当然，您可以将其包装在代码/库中的伪 FTP 命令中。

# c# - 在另一个表单 C# 中调用方法

> ID：13442891
> 
> 赞同：1
> 
> 时间：2012-11-18T17:58:42.633
> 
> 标签：c#, windows, visual-studio-2010, graphics, emulation

我知道这是一个非常常见的话题，我一直在寻找解决方案。我再次在 CHIP8 模拟器上工作，我正在尝试创建一个单独的表单来处理图形。

我现在有两种形式，Form1 和图形。我想做的是从Form1调用图形中的“draw”方法。在 Form1 我有以下代码...

这是我得到的错误：错误4'System.Windows.Forms.Form'不包含'Draw'的定义并且没有扩展方法'Draw'接受'System.Windows.Forms.Form'类型的第一个参数' 可以找到（您是否缺少 using 指令或程序集引用？）

```
Form graphicsTest = new graphics(); // This is in the initial declaration of Form1
graphicsTest.Draw(screen); // Screen is a [64,32] boolean array representing pixel states 
```

这是我所拥有的“图形”...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class graphics : Form // The purpose of this form is to handle the graphics
{
    Graphics dc;
    Rectangle ee = new Rectangle(10, 10, 30, 30); // Size of each pixel
    Pen WhitePen = new Pen(Color.White, 10); // Pen to draw the rectangle object
    Pen BlackPen = new Pen(Color.Black, 10);
    bool[] drawMe;

    public graphics()
    {
        InitializeComponent();
        dc = this.CreateGraphics();
    }

    private void Form2_Load(object sender, EventArgs e)
    {

    }

    public void Draw(bool[] drawme) // This method recieves the array and draws the appropriate Sprites!
    {
        // This is where I will draw the appropriate pixels...   
    }
}
} 
```

同样，我可能遗漏了一些简单的东西，这对我来说都是相对较新的，如果我没有发布足够的信息，我深表歉意。任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:01:06.613

将变量类型更改`graphics`为`Form`

```
graphics graphicsTest = new graphics(); 
graphicsTest.Draw(screen); 
```

否则，您将只能使用基类成员。

*顺便说一句*，在 C# 中使用 PascalCase 作为类名。

# winapi - 服务可以使用 Windows 原始输入 API 吗？

> ID：13442894
> 
> 赞同：1
> 
> 时间：2012-11-18T17:59:08.303
> 
> 标签：winapi, service, windows-services

Windows Raw Input API 需要一个窗口来监听 WM_INPUT 消息。但是，服务没有像控制台应用程序那样的窗口句柄。我们如何在服务上使用 Windows Raw Input API？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:27:34.787

服务可以创建 HWND，但它不会在交互式工作站中运行，并且窗口消息不能跨越工作站边界。所以我认为不可能在服务中使用原始输入。

# jquery - jQuery Animate backgroundPosition 不起作用

> ID：13442897
> 
> 赞同：2
> 
> 时间：2012-11-18T17:59:42.320
> 
> 标签：jquery, jquery-animate, background-position

我正在尝试为某些 div 的背景位置设置动画，然后是执行相同操作的回调动画。

我在这里想念什么？

HTML：

```
<div>
    <div class='divimg'></div>
    <div class='divimg'></div>
    <div class='divimg'></div>
</div>
​ 
```

CSS：

```
.divimg {
    width:250px;
    height:250px;
    margin:20px;
    float:left;
    background-size: 500px 500px;
    background-position: top center;
    background-repeat: no repeat;
    background-image: url(http://lorempixel.com/186/116/nature/1);
}​ 
```

JavaScript：

```
$(function() { 
    function animateGrid() {  
        $('.divimg').animate(
            {backgroundPosition:"bottom center"}, 
            500, function() { 
                $('.divimg').animate(
                    {backgroundPosition:"top center"}, 
                500)
            }
        );   
    }
    animateGrid(); 
})​ 
```

[http://jsfiddle.net/jc6212/WPF6H/2/](http://jsfiddle.net/jc6212/WPF6H/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:18:50.880

From [`.animate()` docs](http://api.jquery.com/animate/):

> All animated properties should be animated to a single numeric value, except as noted below; [...] Shorthand CSS properties (e.g. font, background, border) are not fully supported.

To animate just the `backgroundPositionY` as you're doing, in Chrome you can simply animate said property. As Firefox does not support `backgroundPositionY`, you can apply a [CSS Hook](http://api.jquery.com/jQuery.cssHooks/) for browsers that do not support it:

```
if (!('backgroundPositionY' in document.createElement('div').style)) {
    $.cssHooks.backgroundPositionY = {
        get: function(elem, computed, extra) {
            return $.css(elem, 'backgroundPosition').split(' ')[1];
        },
        set: function(elem, value) {
            elem.style.backgroundPosition = $.css(elem, 'backgroundPosition').split(' ')[0] + ' ' + value;
        }
    };
}

$(function() {

    function animateGrid() {
        $('.divimg').animate({
            backgroundPositionY: 250
        }, 500, function() {
            $('.divimg').animate({
                backgroundPositionY: 0
            }, 500);
        });
    }

    animateGrid();
}); 
```

Tested in Chrome, FF, IE9\. Should work in all browsers.

## [*jsFiddle*](http://jsfiddle.net/WPF6H/30/)

# hibernate - 在创建休眠查询时显式删除左外连接

> ID：13442901
> 
> 赞同：1
> 
> 时间：2012-11-18T17:59:56.660
> 
> 标签：hibernate

我有一个 hbm 文件，它定义了左外连接。现在，我需要创建一个不需要任何左外连接的查询。

请帮助我，在创建休眠查询时我应该使用什么标准来显式删除左外连接，这已经在 hbm 文件中定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:40:31.167

如果您使用左外连接来获取对象，建议删除左外连接并定义休眠获取配置文件，看看[文档](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/performance.html#performance-fetching-profiles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:04:51.267

我猜你已经定义了一个命名查询，并且想要执行一个与这个命名查询相似但仍然不同的查询。解决方案就是不使用这个命名查询。定义另一个，做你想做的事，并使用这个新的命名查询而不是另一个。

或者，如果您不想在两个查询之间重复所有常见内容，则根本不要使用命名查询，而是直接在您的 Java 代码中动态组合查询。

# wix - WIX 是属性集

> ID：13442905
> 
> 赞同：3
> 
> 时间：2012-11-18T18:00:24.250
> 
> 标签：wix, windows-installer

使用命令行，我可以像这样执行“msi”文件：

```
myProgramm.msi myProperty="abc" 
```

在我的 wxs 文件中，我只想在未定义的情况下设置 myProperty（例如设置为“xyz”）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T03:14:21.930

看一下[SetProperty](http://wix.sourceforge.net/manual-wix3/wix_xsd_setproperty.htm)元素。元素的内部文本是一个条件，必须评估为真才能发生 SetProperty。

假设您正确使用安全自定义公共属性，代码将如下所示：

```
<SetProperty Id="MYPROPERTY" After="AppSearch" Sequence="both" Value="SomeValue">Not MYPROPERTY</SetProperty> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:07:08.480

不，你应该使用这个：

```
<SetProperty Id="P.IP" 
             After="AppSearch" 
             Sequence="first" 
             Value="SomeValue">NOT P.IP</SetProperty> 
```

我将 Sequence 更改为“First” - 它只会执行一次：在 InstallUISEquence 期间（如果它执行）或在 InstallExecuteSequence 期间（否则 - 静默模式）。但也许你真的需要在两个序列中设置属性 - 你应该决定。如果要从命令行指定属性，可以考虑使用静默模式运行：

```
msiexec  /i setup.msi /qn /lv*x install.log P.PASSWORD="xxx" P.IP="192.168.1.1" 
```

或基本 UI 模式：

```
msiexec  /i setup.msi /qb /lv*x install.log P.PASSWORD="xxx" P.IP="192.168.1.1" 
```

我还建议阅读 Rob Menching 关于记住属性模式的文章 - 它与从命令行传递的属性的注册表搜索设置有关：[http ://robmensching.com/blog/posts/2010/5/2/The -WiX-toolsets-Remember-Property-pattern](http://robmensching.com/blog/posts/2010/5/2/The-WiX-toolsets-Remember-Property-pattern)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:11:34.923

我认为不需要使用自定义操作。如果您创建具有值的 PUBLIC 属性并将其添加到 SecureCustomProperties 列表，那么它将提供值，除非您使用命令行覆盖它。那是：

```
<Property Id='P.IP' Value="Localhost" Secure='yes'> 
```

然后，如果你只是运行安装程序，你最终会得到 P.IP=Localhost，如果你启动 msi 并为其提供值，该值将被存储，直到你卸载你的包，即：

```
msiexec /i <YouPackage.Msi> P.IP=192.168.1.1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-19T06:39:42.843

```
msiexec  /i setup.msi /lv*x install.log P.PASSWORD="xxx" P.IP="192.168.1.1" 
```

所以当我想设置 P.IP 时，如果用户没有在命令行中设置它，我可以使用它吗？：

```
<SetProperty Id="P.IP" 
             After="AppSearch" 
             Sequence="both" 
             Value="SomeValue">localhost</SetProperty> 
```

# c - 嵌入 Lua 5.2 并定义库

> ID：13442907
> 
> 赞同：5
> 
> 时间：2012-11-18T18:00:32.750
> 
> 标签：c, lua, embed

[Lua](http://www.lua.org)附带了5.2 版（我正在使用）的免费在线[参考手册](http://www.lua.org/manual/5.2/)，并且还提供了 5.0 版[的 Lua 编程。](http://www.lua.org/pil/#1ed)

然而，这些版本之间有一些我似乎无法超越的变化。[在5.2](http://www.lua.org/manual/5.2/manual.html#8)和[5.1](http://www.lua.org/manual/5.1/manual.html#7)参考手册的后续版本中记录了这些更改。请注意依次弃用`luaL_openlib()`赞成`luaL_register()`，然后`luaL_register()`赞成`luaL_setfuncs()`。

网络上的搜索结果好坏参半，其中大多数指向`luaL_register()`.

我尝试实现的目标可以通过下面的小程序进行总结，该小程序可以编译和链接，例如，`gcc ./main.c -llua -ldl -lm -o lua_test`

```
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>

#include <stdio.h>
#include <string.h>

static int test_fun_1( lua_State * L )
{
    printf( "t1 function fired\n" );
    return 0;
}

int main ( void )
{
    char buff[256];
    lua_State * L;
    int error;

    printf( "Test starts.\n\n" );

    L = luaL_newstate();
    luaL_openlibs( L ); 

    lua_register( L, "t1", test_fun_1 );

    while ( fgets( buff, sizeof(buff), stdin ) != NULL)
    {
      if ( strcmp( buff, "q\n" ) == 0 )
      {
          break;
      }
      error = luaL_loadbuffer( L, buff, strlen(buff), "line" ) ||
              lua_pcall( L, 0, 0, 0 );
      if (error)
      {
        printf( "Test error: %s\n", lua_tostring( L, -1 ) );
        lua_pop( L, 1 );
      }
    }
    lua_close( L );

    printf( "\n\nTest ended.\n" );
    return 0;
 } 
```

这可以按预期工作，并且键入`t1()`会产生预期的结果。

我现在想创建一个对 Lua 可见的库/包。[Lua 中](http://www.lua.org/pil/#1ed)的编程 建议我们[使用](http://www.lua.org/pil/26.2.html)数组和加载函数：

```
static int test_fun_2( lua_State * L )
{
    printf( "t2 function fired\n" );
    return 0;
}

static const struct luaL_Reg tlib_funcs [] =
{
  { "t2", test_fun_2 },
  { NULL, NULL }  /* sentinel */
};

int luaopen_tlib ( lua_State * L )
{
  luaL_openlib(L, "tlib", tlib_funcs, 0);

  return 1;
} 
```

然后`luaopen_tlib()`在之后使用`luaL_openlibs()`。这样做允许我们在`tlib:t2()`定义时使用`LUA_COMPAT_MODULE`（在兼容模式下工作）。

在 Lua 5.2 中这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T19:50:22.537

`luaopen_tlib`函数应该这样写：

```
int luaopen_tlib ( lua_State * L )
{
  luaL_newlib(L, tlib_funcs);
  return 1;
} 
```

在`main`函数中，您应该像这样加载模块：

```
int main ( void )
{
    // ...
    luaL_requiref(L, "tlib", luaopen_tlib, 1);
    // ...
} 
```

或者，您可以将条目添加`{"tlib", luaopen_tlib}`到.`loadedlibs``linit.c`

# c++ - 在 C++ 中修改静态成员变量

> ID：13442909
> 
> 赞同：6
> 
> 时间：2012-11-18T18:00:46.280
> 
> 标签：c++, static-members

我试图用静态成员变量 MAX_DIST 定义一个类 Util，在以下意义上，

```
class Util{

 public:
    static double MAX_DIST;
    Util():MAX_DIST(400.0){}
}; 
```

并能够在其他类中更新它，例如

```
Util::MAX_DIST = 387.98; 
```

这给了我一个错误：

```
‘double Util::MAX_DIST’ is a static data member; it can only be initialized at its definition 
```

但是，如果我在其定义中初始化 MAX_DIST，例如

```
class Util{

 public:
    static const double MAX_DIST = 400;
    Util();
}; 
```

（我必须按照编译器的指示添加'const'，否则我会得到一个“ISO C++ 禁止非 const 静态成员的类内初始化”错误）现在我不能在其他地方修改 MAX_DIST，因为它现在是仅准备：

```
error: assignment of read-only variable ‘Util::MAX_DIST’ 
```

在互联网上搜索无果后，我找不到解决这个悖论的方法。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T18:02:50.070

将其放入您的`Util.cpp`（或任何文件名）文件中：

```
double Util::MAX_DIST = 0; 
```

静态变量需要初始化。

长答案，引用标准`9.4.2 $2`：

> 静态数据成员在其类定义中的声明不是定义，并且可能是除 cv 限定的 void 之外的不完整类型。静态数据成员的定义应出现在包含该成员的类定义的命名空间范围内。在命名空间范围的定义中，静态数据成员的名称应使用 :: 运算符由其类名限定。静态数据成员定义中的初始化表达式在其类 (3.3.7) 的范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T18:03:26.747

在第一种情况下，您尝试从非静态上下文中（即从构造函数中）初始化静态变量。你是对的，这是错误的。

在第二种情况下，您不希望变量为 const。相反，您需要在类之外声明它，使用如下语句：

```
double Util::MAX_DIST = 400; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T18:04:35.730

> 但是，如果我在其定义中初始化 MAX_DIST

你混淆了定义和 *声明*。您正在尝试在后者中进行初始化——C++ 禁止这样做。其他答案向您展示了*定义*的样子：它必须在类声明*之外*，并且在其自己的编译单元中（否则，当您尝试在多个源文件中包含标头时，您将违反单一定义规则）。

关于为什么原始代码不起作用的一句话：您尝试将初始化放入*构造函数*的初始化列表中。*但是，每个实例*都会调用此构造函数。即使编译了该代码，它也会始终重置您的静态变量——而不是您想要的。

# ios - NSArray* excludeActivities 即使在使用 ARC 并将其设置为 nil 时也会泄漏内存

> ID：13442910
> 
> 赞同：1
> 
> 时间：2012-11-18T18:00:51.370
> 
> 标签：ios, memory-leaks, nsarray, uiactivityviewcontroller

我正在尝试使用新的 iOS6 UIActivityViewController，它工作正常，除了 Memory Leaks 仪器说每次我尝试显示控制器时 NSArray *execludedActivities 都会泄漏。

请注意，我尝试使用一个名为 excludeActivities 的 NSArray，然后将 shareShareController.excludedActivityTypes 设置为以后能够将数组设置为 nil （下面的所有注释代码），但现在我直接设置属性并且仍然存在泄漏.

```
- (IBAction)share:(id)sender
{

    //prepare the image
    UIImage *theImage = [self screenShot];

    //The array of activity Items
    NSArray *activityItems = [[NSArray alloc] initWithObjects:theImage, nil];

   //The acitivyViewController
   UIActivityViewController *shareController = [[UIActivityViewController alloc]   initWithActivityItems:activityItems applicationActivities:nil];

//Excluded Actvivity Types
//NSArray *excludedAcitivities = [[NSArray alloc]   initWithObjects:UIActivityTypeAssignToContact,UIActivityTypeCopyToPasteboard,UIActivityTypePostToWeibo, UIActivityTypePrint, nil];

shareController.excludedActivityTypes = [[NSArray alloc] initWithObjects:UIActivityTypeAssignToContact,UIActivityTypeCopyToPasteboard,UIActivityTypePostToWeibo, UIActivityTypePrint, nil];

    //testing fixning the leak of NSArray
    //excludedAcitivities = nil;

    //set the completion handler
    [shareController setCompletionHandler:^(NSString *activityType, BOOL completed) {

        //test hiding the By MunasabaPro lable
        int shareScreen = pageControl.currentPage;
        MainViewController *someController = [viewControllers objectAtIndex:shareScreen];
        someController.byLabel.hidden = YES;
    }];

    [self presentViewController:shareController animated:YES completion:nil];
} 
```

![在此处输入图像描述](../Images/01477745ab699753a66750d0b0a39c95.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:05:24.777

我认为您的完成处理程序中有一个保留周期。看看那个[问题](https://stackoverflow.com/questions/4352561/retain-cycle-on-self-with-blocks)。

```
__weak id blockShareController = shareController;
[shareController setCompletionHandler:^(NSString *activityType, BOOL completed) {

       //test hiding the By MunasabaPro lable
        int shareScreen = pageControl.currentPage;
        blockShareController.byLabel.hidden = YES;
    }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:42:53.200

试试这个，这应该可以解决问题（至少对于我来说）：

```
NSArray *activityItems = [NSArray arrayWithObjects:textToShare, imageToShare, nil];

__block UIActivityViewController *activityVC =[[UIActivityViewController alloc] 
initWithActivityItems:activityItems applicationActivities:nil];

activityVC.excludedActivityTypes = @[
    UIActivityTypePrint,
    UIActivityTypeAssignToContact
];

[self presentViewController:activityVC animated:YES completion:^{
    activityVC.excludedActivityTypes = nil;
    activityVC = nil;
}]; 
```

# jquery - Facebook喜欢使用jquery在asp.net中更改鼠标上的图像

> ID：13442911
> 
> 赞同：1
> 
> 时间：2012-11-18T18:00:52.557
> 
> 标签：jquery, asp.net

我有一个 asp.net listview 控件来绑定我的图片库。在每个列表视图项下，我相对有多个图像。我想要的是建立一个类似facebook的功能，在鼠标悬停时，可以快速查看专辑显示下的图像。请帮助我..提前谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:42:16.377

它就像激活[jQuery Cycle](http://jquery.malsup.com/cycle/)插件`mouseover`并在`mouseout`.

# android - 在 ListView 中延迟加载图像

> ID：13442920
> 
> 赞同：14
> 
> 时间：2012-11-18T18:02:01.163
> 
> 标签：android, lazy-loading

我知道这是一个广泛讨论的问题，但我还是想问一个问题。我的应用程序中有列表（带有 BaseAdapters），所有这些列表都从网络获取图像。现在我试过了：

1) AsyncTasks，其中先下载图片，存储到缓存中，然后在onPostExecute方法上显示。随后从缓存中获取图像。

2) Nostra 的[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)。

3) Fedor 的[LazyList](https://github.com/thest1/LazyList)。和;

4) Novoda 的[ImageLoader](https://github.com/novoda/ImageLoader)。

所有这些方法都声称使图像的加载“懒惰”。但问题是我的列表滚动仍然不顺畅。当图像完成加载时，它会卡住并继续。我已经在这几天了。有谁知道这个问题的好解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T18:51:15.937

到目前为止，我使用过的最简单的缓存图像并且运行良好的 libaray 是[AQuery Image Loading](http://code.google.com/p/android-query/wiki/ImageLoading) Lib。我一直使用它来加载和缓存图像，非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:09:02.507

试试这个，我希望它可以帮助你解决你的问题

[示例 1](https://github.com/commonsguy/cwac-endless)

[示例 2](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

# javascript - jquery 自动完成使用多个来源（本地 json api 和 jsonp）

> ID：13442921
> 
> 赞同：4
> 
> 时间：2012-11-18T18:02:06.610
> 
> 标签：javascript, json, jquery-ui, autocomplete, jquery-autocomplete

基本上我有一个酒店搜索引擎，在网站顶部有一个必须显示自动完成结果的搜索字段。结果可以是酒店或位置（城市）。类似于 Facebook 自动完成功能（搜索可以是人员、页面……）

我从基本的地理名称 jsuery 示例开始：http: [//jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)

但我不知道如何为酒店使用我自己的 JSON api。我知道我应该将我的 JSON 酒店与 geonames 中的酒店合并？任何人都可以告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T19:19:07.957

最简单的高级代码应如下所示，其中 requestFromSource1 是您请求地理名称的地方， requestFromSource2 是您查询自己的自动完成引擎的地方。

```
 $( "#city" ).autocomplete({
        source: function( request, response ) {
    var resultFromSource1 = null;
    var resultFromSource2 = null;
    var agregateResults = function(){
        if( resultFromSource1 && resultFromSource2){
            var result = resultFromSource1.concat(resultFromSource2);
            response(result);
        }
    }
    requestFromSource1(function( result ){
        resultFromSource1 = result;
        agregateResults();
    });
    requestFromSource2(function( result ){
        resultFromSource2 = result;
        agregateResults();
    });
        }
    });
}); 
```

更复杂的情况是通过相关性得分合并。恐怕在你的情况下这个注释是可能的。

# php - PHP 表单：列数与第 1 行的值数不匹配

> ID：13442923
> 
> 赞同：-1
> 
> 时间：2012-11-18T18:02:32.210
> 
> 标签：php, mysql, registration

在更新我的注册表单验证 PHP 时，我遇到了一个似乎无法修复的错误：

列计数与第 1 行的值计数不匹配

我一遍又一遍地查看代码，我似乎看不出它有什么问题。PHP 语法和格式检查器似乎都说代码没问题。我知道这个错误经常出现，但我看不到我的代码与收到相同错误的其他人的代码之间的相似性。

```
<?
include "./includes/config.inc.php";

include $include_path."cc.inc.php";
include $include_path."banemails.inc.php";

$is_pre_registration = (isset($_REQUEST['pre_registration']) && $_REQUEST['pre_registration'] == "1") ? "1" : "";

$TIME = mktime(date("H")+$SETTINGS['timecorrection'],date("i"),date("s"),date("m"), date("d"),date("Y"));
$NOW = date("YmdHis",$TIME);
$NOWB = date("YmdHis",$TIME);
// --
if (!isset($_POST['auction_id']) && !isset($_GET['auction_id'])) {
    $auction_id = $_SESSION["CURRENT_ITEM"];
} else {
    $_SESSION["CURRENT_ITEM"]=intval($auction_id);
}
if (empty($_POST['action'])) {
    $action = "first";
}
#// Retrieve users signup settings
$query = "SELECT * FROM BPLA_usersettings";
$res_s = @mysql_query($query);
if(!$res_s){
    MySQLError($query);
    exit;
}else{
    $REQUESTED_FIELDS = unserialize(mysql_result($res_s,0,"requested_fields"));
    $MANDATORY_FIELDS = unserialize(mysql_result($res_s,0,"mandatory_fields"));
}

if ($_POST['action'] == "first") {

    if (empty($_POST['accounttype']) && $SETTINGS['accounttype'] == 'sellerbuyer') {
        $TPL_err = 1;
        $TPL_errmsg = $MSG_25_0137;
    } elseif (empty($_POST['TPL_nick'])) {
        $TPL_err = 1;
        $TPL_errmsg = $ERR_5030;
    } elseif (empty($_POST['TPL_password'])) {
        $TPL_err = 1;
        $TPL_errmsg = $ERR_5031;
    } elseif (empty($_POST['TPL_repeat_password'])) {
        $TPL_err = 1;
        $TPL_errmsg = $ERR_5032;
    } elseif (empty($_POST['TPL_email'])) {
        $TPL_err = 1;
        $TPL_errmsg = $ERR_5033;
    } else {
        if (strlen($_POST['TPL_nick']) < 6) {
            $TPL_err = 1;
            $TPL_errmsg = $ERR_107;
        } else if (strlen ($_POST['TPL_password']) < 6) {
            $TPL_err = 1;
            $TPL_errmsg = $ERR_108;
        } else if ($_POST['TPL_password'] != $_POST['TPL_repeat_password']) {
            $TPL_err = 1;
            $TPL_errmsg = $ERR_109;
        } else if (strlen($_POST['TPL_email']) < 5) { // Primitive mail check
        $TPL_err = 1;
        $TPL_errmsg = $ERR_110;
        } elseif (!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+([\.][a-z0-9-]+)+$", $_POST['TPL_email'])) {
            $TPL_err = 1;
            $TPL_errmsg = $ERR_008;
        } elseif(BannedEmail($_POST['TPL_email'],$BANNEDDOMAINS)){
            $TPL_err = 1;
            $TPL_errmsg = $MSG_30_0054;
        } else {
            $sql = "SELECT nick FROM BPLA_users WHERE nick=\"" . AddSlashes ($_POST['TPL_nick']) . "\"";
            $res = mysql_query ($sql);
            if (mysql_num_rows($res) == 0) {
                $id = md5(uniqid(rand()));
                $id = eregi_replace("[a-f]", "", $id);

                $TPL_id_hidden = $id;
                $TPL_nick_hidden = $_POST['TPL_nick'];
                $TPL_password_hidden = $_POST['TPL_password'];
                $TPL_email_hidden = $_POST['TPL_email'];
            } else {
                $TPL_err = 1;
                $TPL_errmsg = $ERR_111; // Selected user already exists
            }

            $sql = "SELECT email FROM BPLA_users WHERE email=\"" . AddSlashes ($_POST['TPL_email']) . "\"";
            $res = mysql_query ($sql);
            if (mysql_num_rows($res) == 0) {
                $id = md5(uniqid(rand()));
                // $id = eregi_replace("[a-f]","",$id);
                $TPL_id_hidden = $id;
                $TPL_nick_hidden = $_POST['TPL_nick'];
                $TPL_password_hidden = $_POST['TPL_password'];
                $TPL_email_hidden = $_POST['TPL_email'];
            } else {
                $TPL_err = 1;
                $TPL_errmsg = $ERR_115; // E-mail already used
            }

            if ($TPL_err == 0) {
                $TODAY = $NOWB;
                # // #################################################################
                # // Users suspended field
                # // VALUES:
                # //        9 - sign up fee due
                # //         8 - no fee due, waiting for user's confirmation
                # //            1 - suspended by the administrator via admin utility
                # //
                $SUSPENDED = 8;
                if($SETTINGS['accounttype'] == 'sellerbuyer') {
                    $selected_accounttype = $_POST['accounttype'];
                } else {
                    $selected_accounttype = 'unique';
                }

                if($is_pre_registration != ""){
                    $user_pre_registration = "1";
                }else{
                    $user_pre_registration = "0";
                    //, is_pre_registration
                    //, ".intval($user_pre_registration)."
                }
                if($BPLowbidAuction_TESTMODE == 'yes') {
                     include "header.php";
                    echo "<strong>".$ERR_9999."</strong>";
                        include phpa_include("template_register.html");
                    exit();
                } else {
                $sql = "INSERT INTO BPLA_users (id,
                        nick, password, nletter,email, reg_date,
                        rate_sum,  rate_num,suspended,accounttype)
                          VALUES (NULL, \"" . Addslashes ($TPL_nick_hidden) . "\", \""
                      . md5($MD5_PREFIX . Addslashes ($TPL_password_hidden)) . "\", \""
                        . (int)($_POST['TPL_nletter']) . "\", \""
                        . AddSlashes ($_POST['TPL_email']) . "\",
                      '$TODAY',
                      0,
                      0,
                      '$DATE',
                      '$SUSPENDED',
                      ENCODE(\"$MD5_PREFIX\"))";
                $res = mysql_query ($sql);
                if ($res == 0) {
                    $TPL_err = 1;
                    $TPL_errmsg = mysql_error (); //"Error updating users data";
                } else {
                    $TPL_id_hidden=mysql_insert_id();
                    # // ===========================================================
                    # // Added by Gian for IP banning
                    # // Store user IP address in the database
                    # // ===========================================================
                    $query = "INSERT INTO BPLA_usersips VALUES(
                              NULL,
                              ".intval($TPL_id_hidden).",
                              '".$_SERVER["REMOTE_ADDR"]."',
                              'first','accept')";
                    $res___ = @mysql_query($query);
                    if (!$res___) {
                        MySQLError($query);
                        exit;
                    }
                    # // ===========================================================
                    /**
                    * Update column users in table BPLA_counters
                    */
                    $query = "UPDATE BPLA_counters SET inactiveusers=inactiveusers+1";
                    $counteruser = mysql_query($query);
                    if (!$counteruser) {
                        MySQLError($query);
                        exit;
                    }
                    # // ===========================================================
                    /**
                    * Set up the language of this user in table BPLA_userslanguage
                    */
                    $language = $SETTINGS['defaultlanguage'];
                    $_SESSION['language'] = $language;
                    $userlanguage = mysql_query("INSERT INTO BPLA_userslanguage VALUES(
                                         '".$TPL_id_hidden."',
                                         '$language')");
                    if (!$userlanguage) {
                        MySQLError($query);
                        exit;
                    }
                    # // Send confirmation e-mail message depending on the peyment settings
                    #// and the signup confirmation settings
                    //if ($SETTINGS['signupfee'] != 1) {
 //                       if(($SETTINGS['usignupconfirmation'] == 'y' && $SETTINGS['accounttype'] == 'unique') || 
 //                          (($SETTINGS['sbsignupconfirmation'] == 's' || $SETTINGS['sbsignupconfirmation'] == 'sb') && $_POST['accounttype'] == 'seller') ||
 //                          (($SETTINGS['sbsignupconfirmation'] == 'b' || $SETTINGS['sbsignupconfirmation'] == 'sb') && $_POST['accounttype'] == 'buyer')) {
                            #Suspend user
                    $query = "UPDATE BPLA_users SET suspended=0,reg_date=reg_date WHERE id=$TPL_id_hidden";
                    $RES__ = @mysql_query($query);
                    if (!$RES__) {
                        echo "KLSDHD";
                        //MySQLError($query);
                        exit;
                    } else {
                        # Send e-mail to the user and the admin                    
                        include $include_path."user_confirmation_needapproval.inc.php";                        
                    }
//                        }else{
//                            include $include_path."user_confirmation.inc.php";
 //                       }
                    //}
                }
                }
            } // if($TPL_err == 0)
        }
    }
}

include "header.php";
if (($action == "first" && count($_POST) == 0) || ($_POST['action'] == "first" && $TPL_err)) {
    include phpa_include("template_register.html");
}

if ($_POST['action'] == "first" && !$TPL_err) {
    # //
    include phpa_include("template_registered_php.html");
}
include "footer.php";
$TPL_err = 0;
$TPL_errmsg = "";
?> 
```

改变：

```
 $sql = "INSERT INTO BPLA_users (id,
                nick, password, nletter,email, reg_date,
                rate_sum,  rate_num,suspended,accounttype)
                  VALUES (NULL, \"" . Addslashes ($TPL_nick_hidden) . "\", \""
              . md5($MD5_PREFIX . Addslashes ($TPL_password_hidden)) . "\", \""
                . (int)($_POST['TPL_nletter']) . "\", \""
                . AddSlashes ($_POST['TPL_email']) . "\",
              '$TODAY',
              0,
              0,
              '$DATE',
              '$SUSPENDED',
              ENCODE(\"$CC\",\"$MD5_PREFIX\"),
              '$_POST[TPL_exp_month]','$_POST[TPL_exp_year]','$_POST[TPL_card_owner]','$_POST[TPL_card_zip]',1)" 
```

到：

```
$sql = "INSERT INTO BPLA_users (id,
                        nick, password, nletter,email, reg_date,
                        rate_sum,  rate_num,suspended,accounttype)
                          VALUES (NULL, \"" . Addslashes ($TPL_nick_hidden) . "\", \""
                      . md5($MD5_PREFIX . Addslashes ($TPL_password_hidden)) . "\", \""
                        . (int)($_POST['TPL_nletter']) . "\", \""
                        . AddSlashes ($_POST['TPL_email']) . "\",
                      '$TODAY',
                      0,
                      0,
                      '$DATE',
                      '$SUSPENDED',
                      ENCODE(\"$MD5_PREFIX\"))"; 
```

现在收到错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 10 行的 '))' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:09:32.313

`INSERT`当查询中指定的列数与提供的值数不匹配时，会发生此错误。例如：

```
INSERT INTO mytable (col1, col2) VALUES ('val1'); 
```

在以下行中，您列出了 10 列（id、nick、password、nletter、email、reg_date、rate_sum、rate_num、suspended、accounttype），但有 16 个值。

```
$sql = "INSERT INTO BPLA_users (id,
        nick, password, nletter,email, reg_date,
        rate_sum,  rate_num,suspended,accounttype)
          VALUES (NULL, \"" . Addslashes ($TPL_nick_hidden) . "\", \""
      . md5($MD5_PREFIX . Addslashes ($TPL_password_hidden)) . "\", \""
        . (int)($_POST['TPL_nletter']) . "\", \""
        . AddSlashes ($_POST['TPL_email']) . "\",
      '$TODAY',
      0,
      0,
      '$DATE',
      '$SUSPENDED',
      ENCODE(\"$CC\",\"$MD5_PREFIX\"),
      '$_POST[TPL_exp_month]','$_POST[TPL_exp_year]','$_POST[TPL_card_owner]','$_POST[TPL_card_zip]',1)"; 
```

您需要列出与以下值对应的列名：

```
$_POST[TPL_exp_month]
$_POST[TPL_exp_year]
$_POST[TPL_card_owner]
$_POST[TPL_card_zip]
1 
```

**非常重要：**您应该使用准备好的语句来防止 SQL 注入。这是一种非常危险且可悲的是非常常见的攻击。见[https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:11:59.553

您的`INSERT INTO BPLA_users ...;`查询有 10 个列名，但有 16 个值。由于数字不匹配，您会收到错误消息。

# html - 覆盖最后两个元素之间的空间

> ID：13442941
> 
> 赞同：0
> 
> 时间：2012-11-18T18:03:47.440
> 
> 标签：html, css, html-lists

我的网站页面中有一个包含链接列表的页脚，最后两个链接是社交图标 ![页脚项目](../Images/5c9d592ea400b5da9394a0a1fd5f49e9.png)

我有这个CSS代码

```
 #FooterLinks{
        width:960px;
        margin:0 auto;
        text-align:center;
        padding-top:10px;
        font-weight:bold;
}

#FooterLinks li{
        display:inline;

        color:White;
}
#FooterLinks li:last-child{
        border:none;
}
#FooterLinks li a {

        color:White;
        padding: 0 10px;

}
#FooterLinks li a img{

        border:none;

}
a:link{text-decoration:none;}

#FooterLinks li a:hover{
        color:Red;

} 
```

这是我的页脚的源代码：

```
<div id="FooterLinks">
 <ul>
   <li id="fbAbout"><a href="aboutus.aspx">About Us</a></li>
   <li id="fbcareers"><a href="careers.aspx">Careers</a></li>
   <li id="fbprivacy"><a href="privacy.aspx">Privacy</a></li>
   <li id="fbterms"><a href="terms.aspx">Terms</a></li>
   <li id="fbpress"><a href="press.aspx">Press</a></li>
   <li id="fbcontactus"><a href="contactus.aspx">Contact Us</a></li>
   <li id="fbfaq"><a href="faq.aspx">FAQ</a></li>
   <li id="fbgethelp"><a href="gethelp.aspx">Get Help</a></li>
   <li id="twitter"><a href="https://twitter.com/YOUR_USER_NAME"><img src="Imaes/Main/SocialIcons/twitter.png" width="32" height="32" alt="Twitter"  /></a></li>
   <li id="facebook"><a href="http://www.facebook.com/298542786850699"><img src="Images/Main/SocialIcons/facebook.png" width="32" height="32" alt="Facebook" /></a></li>

  </ul>
  <p>&copy; PlaySight Interactive Ltd. All Right Reserved</p>       
</div> 
```

我应该在 css 中添加什么来解决我的问题？

编辑：我添加了页脚的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:24:02.863

Add class to links you want no space:

```
 <li id="twitter"><a class='noPadding' href="https://twitter.com/YOUR_USER_NAME"><img src="Images/Main/SocialIcons/twitter.png" width="32" height="32" alt="Twitter"  /></a></li>
  <li id="facebook"><a class='noPadding' href="http://www.facebook.com/298542786850699"><img src="Images/Main/SocialIcons/facebook.png" width="32" height="32" alt="Facebook" /></a></li> 
```

and CSS:

```
.noPadding{ padding:0px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:14:34.950

由于您还没有发布您的 HTML 代码，我只能猜测。假设您有类似`#footerLinks > li > a`以下的内容应该可以解决问题：

```
#FooterLinks li:last-child a {
    padding: 0;
} 
```

此代码删除了最后一个 的填充，`li`将两个社交图标之间的空间减少了 50%。如果你想完全删除空间，你可以使用 CSS 选择器`nth-last-child()`。

请注意`last-child`，许多旧版浏览器不支持 CSS 选择器。因此，如果您希望您的网站在每个浏览器中都能正常工作，您应该尝试其他方法。我会在你的 HTML`li`中创建类的社交`social`（或类似的东西），然后我会添加一些 CSS 代码来删除该类的填充。然后，您还可以隐藏那些不带`last-child`. 如果您发布您的 HTML 代码，我可以举个例子。

# java - 在 Spring MVC / Hibernate 中简单地更新多个值

> ID：13442943
> 
> 赞同：1
> 
> 时间：2012-11-18T18:03:57.773
> 
> 标签：java, spring, hibernate, spring-mvc

我目前正在设置一个 Spring MVC / Hibernate 应用程序，它将存储一个人员数据库。

我已经使用以下教程进行了设置（已删除评论）： http: [//krams915.blogspot.co.uk/2011/01/spring-mvc-3-hibernate-annotations.html](http://krams915.blogspot.co.uk/2011/01/spring-mvc-3-hibernate-annotations.html)

```
public void edit(Person person) {
  logger.debug("Editing existing person");
  Session session = sessionFactory.getCurrentSession();
  Person existingPerson = (Person) session.get(Person.class, person.getId());
  existingPerson.setFirstName(person.getFirstName());
  existingPerson.setLastName(existingPerson.getLastName());
  existingPerson.setMoney(existingPerson.getMoney());
  session.save(existingPerson);
} 
```

有没有一种方法可以更新整个人，而不必指定每个更新的字段（例如**existingPerson.setFirstName(person.getFirstName());**）？随着项目的扩展，我希望能够根据需要轻松添加尽可能多的字段，而不必每次都更新此类。

在评论中，有一些建议**session.update(page);** 会起作用，但这只会引发错误（*具有相同标识符值的不同对象已与会话相关联*）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:16:56.057

How is Person parameter of the function getting created.? Since id is already present for that object, I assume it is fetched from database before function call.

So just a session.save(person) should work in that case.

# python - Pygame：鼠标特定轴检测

> ID：13442949
> 
> 赞同：2
> 
> 时间：2012-11-18T18:04:42.733
> 
> 标签：python, pygame, mouse

例如，如何仅检测 X 轴？

```
maus_x = 0
maus_y = 0
pygame.mouse.get_pos(maus_x, maus_y)

while not done:

    for event in pygame.event.get():

    if event.type == pygame.MOUSEMOTION:         
        if maus_x < wx_coord:
            angle += 10 
```

理论上，这个“pygame.mouse.get_pos”返回一个元组（x，y）。但是，我在那里定义了一个变量来表示这个元组中的 x 和 y。问题是，当我移动鼠标（pygame.MOUSEMOTION）时，当我执行“maus_x < wx_coord:”中所写的操作时，它也会执行 Y 轴的功能。这根本没有意义。

只有当我在 x 轴上移动鼠标时，才必须执行“角度 +=10”。有人知道发生了什么吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:06:46.740

这不是函数调用的工作方式。在您的代码中，`maus_x`is always `0`，因为没有任何东西可以修改它。你要：

```
while not done:
    for event in pygame.event.get():
        if event.type == pygame.MOUSEMOTION:      
            mousex, mousey = pygame.mouse.get_pos()   
            if mousex < wx_coord:
                angle += 10 
```

事实上，您可能只想直接检查[事件](http://www.pygame.org/docs/ref/event.html#pygame.event.get)对象：

```
while not done:
    for event in pygame.event.get():
        if event.type == pygame.MOUSEMOTION:      
            mousex, mousey = event.pos   
            if mousex < wx_coord:
                angle += 10 
```

或者更好：

```
while not done:
    for event in pygame.event.get():
        if event.type == pygame.MOUSEMOTION:      
            relx, rely = event.rel   
            if relx != 0:  # x movement
                angle += 10 
```

# jquery - 跨域文件正在加载但语法错误

> ID：13442950
> 
> 赞同：0
> 
> 时间：2012-11-18T18:04:44.340
> 
> 标签：jquery, cross-browser, cross-domain, getjson

我正在尝试通过 jquery 从跨域获取文件，代码是

```
$.getJSON('http://tzook.info/bot/t.htm?callback=?', function(jsonp) {
alert('loaded');
}); 
```

但是控制台上的错误是

```
Resource interpreted as Script but transferred with MIME type text/html: "http://tzook.info/bot/t.htm?callback=jsonp1353261653582". jquery-1.4.2.js:5093
Uncaught SyntaxError: Unexpected token < 
```

为什么会出现这个错误。

[Js小提琴链接](http://jsfiddle.net/ZfvKm/2635/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:44:16.817

尝试使用简单的 ajax 请求，然后解码结果。并链接[http://tzook.info/bot/t.htm?callback=](http://tzook.info/bot/t.htm?callback=)？获取 html ！不是 json

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:45:12.980

你不能`?`在url中使用char，它是用来分隔参数的

尝试这样的事情来消除你的错误：

```
$.getJSON('http://tzook.info/bot/t.htm?callback=test', function(jsonp) {
alert('loaded');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T18:50:03.220

[如果出于安全原因](http://en.wikipedia.org/wiki/Same_origin_policy)进行跨域调用，则无论您尝试做什么都是不可能的。

只有 JSONP 是一个例外，并且您的响应看起来不像站点 JSON。

**解决方案：**

使用 JSONP 响应或使用后端代理。

# vb.net - 这是线程不安全的调用吗？

> ID：13442951
> 
> 赞同：-1
> 
> 时间：2012-11-18T18:04:47.757
> 
> 标签：vb.net, multithreading, thread-safety

这是我的代码

```
Public th As New Thread(New ThreadStart(AddressOf StartFirstPrint))
Public th4 As New Thread(New ThreadStart(AddressOf sendFirstEmail)) 
```

这是和的`StartFirstPrint`代码`sendFirstEmail`

```
Public Sub StartFirstPrint()
  Do While thCont
    Try
      Dim frm As New frmPrint()
      'frm.MdiParent = Me
      frm.StartPrinting()
    Catch ex As Exception
    End Try
  Loop
End Sub

Public Sub sendFirstEmail()
  Do While thCont
    Try
      Dim frmSNDEmail As New frmEmail
      frmSNDEmail.SendEmails()
    Catch ex As Exception
    End Try
  Loop
End Sub 
```

thCont是一个公共布尔变量，**它**指定何时购买这些线程。

如果我访问 from 的任何控件和`frmPrint`from的`StartPrinting`任何控件`frmEmail`，`SendEmails`它会是线程不安全调用吗？ `StartPrinting`是的公共子，`frmPrint`并且`SendEmails`是的公共子`frmEmail`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:32:50.797

您无法访问控件，因为您会因为尝试从不是创建它们的线程的线程访问控件而获得异常。该方法在 Form 内部并没有什么不同 - 它仍然是从不同的线程调用的。

# jquery - 拖动div而不拖动整个浏览器（移动浏览器）

> ID：13442954
> 
> 赞同：2
> 
> 时间：2012-11-18T18:04:55.353
> 
> 标签：jquery, mobile-browser

我用 touchstart、touchmove 和 touchend 在移动浏览器上做了一个可拖动的 div，但我有一个问题。
当我拖动div时，整个屏幕都在移动，当我触摸div并且移动手指时，屏幕不会移动怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:45:48.830

您需要将事件绑定到文档以使浏览器停止其默认行为。

```
$(document).bind('touchmove' , function()
{
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:35:25.913

我正在使用这个在移动设备上运行良好的库：http: [//touchpunch.furf.com/](http://touchpunch.furf.com/)

# javascript - 如何检查哪个参数已传递给函数

> ID：13442955
> 
> 赞同：0
> 
> 时间：2012-11-18T18:05:02.827
> 
> 标签：javascript, jquery

我想调用另一个 jQuery 函数并传递另一个参数 - 我传递的参数取决于传递给原始函数的参数的名称。所以我可能有这样的事情：

```
matchedNumbers1 = compareArrays(userNumbers, winningNumbers1, matchedNumbers1);
matchedNumbers2 = compareArrays(userNumbers, winningNumbers2, matchedNumbers2);
matchedNumbers2 = compareArrays(userNumbers, winningNumbers3, matchedNumbers2);

//COMPARE INPUTTED ARRAY OF NUMBERS TO WINNING ARRAYS OF NUMBERS
    function compareArrays (userInput, winningNums, matches) {
        matches = 0;
        allMatchedNumbers.length = 0;
        $(userInput).each(function(i) {
            $(winningNums).each(function(j) {
                if (userInput[i] == winningNums[j]) {
                    allMatchedNumbers[matches] = userInput[i];
                    matches++;
                }
            });
        });
        switch (winningNums) {
            case 'winningNumbers1':
                alert("!!!!!");
                markMatches(ListItems1);
                break;
            case 'winningNumbers2':
                markMatches(ListItems2);
                break;
            case 'winningNumbers3':
                markMatches(ListItems3);
                break;
        }
        return matches;
    } 
```

希望上面的代码能清楚地说明我想要做什么。我尝试使用`switch`语句，但这仅比较值而不是传递给函数的原始参数的名称。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:08:56.923

你不应该那样做，即使你可以。只需传入要匹配的数组作为另一个参数：

```
function compareArrays(userInput, winningNums, matches, listToMark) {
    ...

    markMatches(listToMark)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:11:40.097

```
function winningNumbers1(){
    var result = 1;
    return {result:result, fname: 'winningNumbers1'};
}

function winningNumbers2(){
    var result = 2;
    return {result:result, fname: 'winningNumbers2'};
}

function compareArrays (userInput, winningNums, matches) {
    var result = winningNums ? winningNums() : null;
    if(result)
    switch(result.fname){
        case 'winningNumbers1': 
        // action
            break;
        case 'winningNumbers2': 
        // action
            break;
    }
} 
```

# spring - 在 Activiti 中使用自动装配的 Spring bean 的任务

> ID：13442956
> 
> 赞同：0
> 
> 时间：2012-11-18T18:05:09.093
> 
> 标签：spring, spring-data-jpa, activiti

从任务中调用服务的方法时，我在 Activiti Explorer 中使用 Spring 的自动装配功能时遇到问题。这个想法是让服务任务调用 Spring @Service bean 上的方法之一，以便使用 @Autowired JPARepository 持久化数据。

问题是，在执行服务任务后，由于 myService 中的 @Autowired 存储库未正确实例化，我得到一个空指针异常。

那么我的问题是，**我怎样才能从任务服务中正确调用 Spring bean？**

JavaDelegate 方法[不适](http://forums.activiti.org/en/viewtopic.php?f=8&t=3276&p=13020)用于 Spring，我尝试采用“Expression”方法，如此处所建议[的](https://stackoverflow.com/questions/6474324/how-can-i-access-a-spring-bean-in-activiti-javadelegate)，但无济于事。

这是 Service Task 运行方法的代码，它的运行方式如下：

```
activiti:expression="${testServiceTask.doSomething()}" 
```

//被调用的java类

```
public class testServiceTask {

@Autowired
private TestServiceDummy serviceDummy; 

public void doSomething() {
    serviceDummy.run(); // NPE here, the serviceDummy is null when called
    }
    // Getters and Setters for the testServiceDummy omitted for brevity

    } 
```

这是我的服务：

```
public interface TestServiceDummy {

public void createUser();

}

@Service(value = "testServiceDummyImpl")
@Transactional(readOnly = true)
public class TestServiceDummyImpl implements TestServiceDummy {

    @Autowired
    private UserRepository userRepo;

@Override
public void createUser() {
    User u = new User();
        userRepo.save(u);
    }

    // Getters and Setters for userRepo omitted for brevity
} 
```

从我们的 web 应用程序调用时，同样的事情没有问题（将服务调用为 @ManagedProperty 工作正常），因此嵌入式项目的配置似乎没问题。

这是 Activiti Explorer 的 applicationContext 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xmlns:jee="http://www.springframework.org/schema/jee"

xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/data/jpa 
        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
        http://www.springframework.org/schema/jdbc 
        http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/jee 
        http://www.springframework.org/schema/jee/spring-jee-3.1.xsd">

<import resource="classpath*:/applicationContextCore.xml" />
<context:property-placeholder location="classpath*:jdbc.properties" />

<!-- Scan this classpath for annotated components that will be auto-registered 
    as Spring beans -->
<context:annotation-config /> <!-- this should take care of the @Autowiring issue -->

<!-- scan the embedded project's components -->
    <context:component-scan base-package="my.project.*" /> 

<jpa:repositories base-package="my.project.repositories*" />

<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<!-- Automatically translate hibernate/jpa exceptions into Spring's generic 
    DataAccessException hierarchy for those classes annotated with Repository -->
<bean
    class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

<bean id="testServiceDummy" class="edu.bedelias.services.TestServiceDummyImpl" />

<!-- JPA Entity Manager Factory -->
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter" ref="hibernateJpaVendorAdapter" />
    <property name="packagesToScan">
        <list>
            <value>edu.bedelias.*</value>
        </list>
    </property>
    <property name="jpaProperties">
        <props>
            <!-- set HibernateJpaVendorAdapter's behavior: 'create' = build a new 
                DB on each run; 'update' = modify an existing database; 'create-drop' = 'create' 
                and also drops tables when Hibernate closes; 'validate' = makes no changes 
                to the database -->
            <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
        </props>
    </property>
</bean>

<bean id="hibernateJpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="showSql" value="true" />
    <property name="generateDdl" value="false" />
    <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
</bean>

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close">
    <property name="driverClass" value="${jdbc.driverClass}" />
    <property name="jdbcUrl" value="${jdbc.jdbcUrl}" />
    <property name="user" value="${jdbc.user}" />
    <property name="password" value="${jdbc.password}" />
    <property name="maxPoolSize" value="${jdbc.maxPoolSize}" />
    <property name="maxStatements" value="${jdbc.maxStatements}" />
    <property name="minPoolSize" value="${jdbc.minPoolSize}" />
</bean>

<!-- Transaction Manager is defined -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource" />
</bean>

<!-- Hijack the current @Session scope annotation on each @Service and make 
    it last only for the duration of the thread -->
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
        <map>
            <entry key="session">
                <bean class="org.springframework.context.support.SimpleThreadScope" />
            </entry>
        </map>
    </property>
</bean>

<!-- Enable the configuration of transactional behavior based on annotations -->
<tx:annotation-driven />

<bean id="dbProperties"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:db.properties" />
    <!-- Allow other PropertyPlaceholderConfigurer to run as well -->
    <property name="ignoreUnresolvablePlaceholders" value="true" />
</bean>

<bean id="demoDataGenerator" class="org.activiti.explorer.demo.DemoDataGenerator">
    <property name="processEngine" ref="processEngine" />
</bean>

<bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration">
    <property name="dataSource" ref="dataSource" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="databaseSchemaUpdate" value="true" />
    <property name="jobExecutorActivate" value="true" />
    <property name="customFormTypes">
        <list>
            <ref bean="userFormType" />
        </list>
    </property>
</bean>

<bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"
    destroy-method="destroy">
    <property name="processEngineConfiguration" ref="processEngineConfiguration" />
</bean>

<bean id="repositoryService" factory-bean="processEngine"
    factory-method="getRepositoryService" />
<bean id="runtimeService" factory-bean="processEngine"
    factory-method="getRuntimeService" />
<bean id="taskService" factory-bean="processEngine"
    factory-method="getTaskService" />
<bean id="historyService" factory-bean="processEngine"
    factory-method="getHistoryService" />
<bean id="managementService" factory-bean="processEngine"
    factory-method="getManagementService" />
<bean id="identityService" factory-bean="processEngine"
    factory-method="getIdentityService" />

<bean id="activitiLoginHandler" class="org.activiti.explorer.ui.login.DefaultLoginHandler">
    <property name="identityService" ref="identityService" />
</bean>

<!-- Include the UI-related wiring. This UI context will be used in the 
    alfresco activiti admin UI -->
<import resource="activiti-ui-context.xml" />

<!-- Custom form types -->
<bean id="userFormType" class="org.activiti.explorer.form.UserFormType" /> 
```

如果有人好奇，该项目的 URL 在这里： [Google Code 托管项目](http://code.google.com/p/tecnoinf-activiti/source/browse/)

提前致谢，

加斯顿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:49:09.300

Did you try using the hash-sign instead of the dollar?

```
activiti:expression="#{testServiceTask.doSomething()}" 
```

This works in my Spring+Activiti Configuration

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T14:43:22.310

这最终起作用了：

```
ClassPathXmlApplicationContext cpx = new ClassPathXmlApplicationContext("classpath:applicationContextActiviti.xml");
TestServiceDummy = (TestServiceDummy) cpx.getBean("testServiceDummy"); 
```

其中 applicationContextActiviti 是声明了 TestServiceDummy 服务的自定义 appContext 配置文件。我在任务调用的 JavaDelegate 类中使用它。

基本上，从 Activiti Explorer 我看不到 Spring Beans（除非你[弄脏](https://stackoverflow.com/questions/8136953/spring-vaadin-integration-design-patterns)了你的手）所以我所做的是跳过 @Autowired 并使用旧的手动方法来处理 bean，然后从调用者类中加载它们.

把这个留在这里，以防它希望将来有时间旅行者：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T12:42:05.800

It seems that testServiceTask is not declared in spring config file.

# c# - 问题：SQL Server 2012 + C#.NET 连接数不断增长

> ID：13442959
> 
> 赞同：0
> 
> 时间：2012-11-18T18:05:53.560
> 
> 标签：c#, ado.net, sql-server-2012

我有一个多线程 C# 应用程序，我需要每个线程都有一个活动连接。我不能使用连接池，除非有一种方法可以使用静态连接在多线程应用程序中准确地更新/插入多个表而不使用锁。当连接数在 200 左右时，没问题。连接不会超出此范围。但是当我需要 2200+ 个连接时，连接数会无限增长。

创建连接的代码 -

```
 @"Data Source=Server-3-PC\SQLSERVER2012;Initial Catalog=****;Persist Security Info=True;User ID=****;Password=****;Pooling=false"; 
```

我正在使用 - 检查来自 SSMS 的连接 -

```
sp_who2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:21:05.097

您有责任关闭您打开的任何连接。不管你是否使用池化，模式都是创建一个连接，打开，将它用于一个或多个 SqlCommands 并关闭它。

关于池化，启用池化的连接在关闭之前不会被重新使用，此时连接会在重新使用之前被重置。无论哪种方法，您仍然需要关闭连接。

* * *

关于影响连接池使用的多个线程，我看不出这有什么关系。SqlConnection 不是线程安全的，因此您应该将给定连接的所有权分配给单个线程或确保一次只有一个线程访问它。无论哪种方式，只要在完成后关闭它，就不会遇到连接池问题。

* * *

我理解，我不能说 2k 连接会发生什么，但我无法想象这么多连接的开销是健康的。鉴于您最终会受到数据库或 CPU 的限制，我会考虑重新考虑我的设计。也许是某种允许更少连接的缓冲或委托。

例如，我有一个处理入站 EDI 文件的应用程序，一次处理很多。每个文件有大约 50k 条记录，需要在数据库中进行更新。我没有使用每个文件一个连接执行 50,000 个命令，而是有一个阅读器，它产生的更改会排队等待以后更新。

在读者创建了大约 5000 次更新后，队列会创建一个数据表并将其作为参数传递给存储过程。这允许一次往返、一次事务和一次连接来处理来自许多文件的 5000 次更新。我们从每秒 200 次更新增加到每秒 17,000 次更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:47:17.637

我找到了答案。在并行循环中创建连接和关闭是不可靠的。连接应始终在循环外部创建，在内部使用并在外部关闭。

谢谢大家的调查。

为了更好地解释这一点，这有效 -

```
 Parallel.For(0,NumSymWatching , x =>
                {
                    String conString = @"Data Source=TEJ-HP\SQLSERVER2012;Initial Catalog=DRMinutesData;Persist Security Info=True;User ID=sa;Password=sql;Pooling=false;";
                    SqlConnection hConnectionBars = new SqlConnection(conString);
                    hConnectionBars.Open();
                    SqlCommand hCommandBars = new SqlCommand();
                    hCommandBars.Connection = hConnectionBars;

                    BuildHistoricalBarData(A[x], B[x], beginFilterTimeMinutes, hCommandBars);

                    hConnectionBars.Dispose();
                    hConnectionBars = null;

                }); 
```

连接以您想要的方式打开、使用和关闭。但是，如果您在 BuildHistoricalBarData 方法中创建连接，它将继续增长。

此处未使用池化的原因是“A”是指向不同表的项目数组。即使它是同一张表，hCommandBars 也会被更改（通过并行运行的线程），并且您永远无法在不使用锁的情况下执行准确的插入/更新操作。锁会减慢它的速度。

# android - (Expandable)ListView 中的自定义 CompoundButton 不可点击（但 CheckBox 是可点击的）

> ID：13442961
> 
> 赞同：0
> 
> 时间：2012-11-18T18:06:04.323
> 
> 标签：android, listview, button, expandablelistview

我有一个几乎完成的应用程序，它使用 ExpandableListView，每个子行都有一个切换按钮。我可以很好地使用 CheckBox 或 ToggleButton，但底层的 CompoundButton 不支持按钮图形的水平居中（wtf？）。所以我建立了自己的，但以某种方式使用它而不是使它在列表视图中不可点击。

在常规布局中，自定义复合按钮可以完美运行。

一些魔法咒语似乎不见了，我不太确定那会是什么。我会感谢你的任何见解。

```
package net.shangtai.listener;

import android.widget.CompoundButton;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.view.Gravity;

class ImageToggle extends CompoundButton {
    private Drawable buttonDrawable;

    public ImageToggle(Context context) {
        super(context, null);
    }
    public ImageToggle(Context context, AttributeSet attrs) {
        super(context, attrs, 0);
    }
    public ImageToggle(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void setButtonDrawable(Drawable d) {
        super.setButtonDrawable(d);
        buttonDrawable=d;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        if (buttonDrawable != null) {
            final int gravity = getGravity();
            final int height = buttonDrawable.getIntrinsicHeight();
            final int width = buttonDrawable.getIntrinsicWidth();

            int top=0;
            int bottom=0;
            int left=getWidth();
            int right=getHeight();

            switch (gravity) {
                case Gravity.TOP:
                    top=0;
                    bottom=height;
                    break;
                case Gravity.BOTTOM:
                    top=getHeight() - height;
                    bottom=0;
                    break;
                case Gravity.CENTER_VERTICAL:
                    top=(getHeight() - height)/2;
                    bottom=top+height;
                    break;
                case Gravity.LEFT:
                    left=0;
                    right=width;
                    break;
                case Gravity.RIGHT:
                    left=getWidth() - width;
                    right=0;
                    break;
                case Gravity.CENTER_HORIZONTAL:
                    left=(getWidth() - width)/2;
                    right=left+width;
                    break;
                case Gravity.CENTER:
                    left=(getWidth() - width)/2;
                    right=left+width;
                    top=(getHeight() - height)/2;
                    bottom=top+height;
                    break;
            }

            buttonDrawable.setBounds(left, top, right, bottom);
            buttonDrawable.draw(canvas);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T15:58:54.543

我认为**缺少的魔力是自动应用**自定义小部件的默认样式的属性，特别是*android:clickable=true*。也许令人惊讶的是，默认情况下按钮是不可点击的。这是通过样式设置的。

现在，如果这是您的问题，这里有两种解决方法：

1.  快速修复：在小部件的构造函数中使用*setClickable(true)*，除非*android:clickable*已明确设置为*false*。有人可能会争辩说 Button 在默认情况下是可点击的，或者

2.  更详细：遵循 [如何接受的答案中概述的过程：为自定义小部件定义主题（样式）项目](https://stackoverflow.com/questions/4493947/how-to-define-theme-style-item-for-custom-widgets)

对于 2，确保在*style_imagetoggle.xml*中为自定义小部件定义默认样式，该样式具有“可点击”样式，例如父级的*Widget.CompoundButton*，或直接设置*android:clickable=true*：

```
<resources>
    <!-- Default style attribute values, can be expanded upon in themes -->
    <style name="Widget.CompoundButton.ImageToggle" parent="@android:style/Widget.CompoundButton" />
</resources> 
```

注意：以下可能是所有这些都是必要的原因： [问题 12683：View 类构造函数的 defStyle 参数有问题](https://code.google.com/p/android/issues/detail?id=12683)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T06:24:23.190

如果您的`groupView`行中的自定义复选框特别是这个问题？您的复选框必须设置为不可聚焦**并且**它不能直接与 groupview 展开/折叠指示器相邻（尝试在它们之间放置一个 textview 或其他东西）。出于某种原因，这就像他们在争夺点击时要表达的内容的主导权。

# jquery - 多张幻灯片上的 HTML 表单

> ID：13442964
> 
> 赞同：1
> 
> 时间：2012-11-18T18:06:18.487
> 
> 标签：jquery, html, slideshow, forms

我想在一个包含大约五个问题的网站上创建一个表单，每个问题都位于不同的幻灯片上。我想要的效果是你回答一个问题，然后在短暂的延迟后，下一个问题出现在同一个位置。现在我正在使用 jQuery 选项卡来完成它，但我更愿意在不可见选项卡（或至少看起来不像选项卡）的情况下这样做，并且自动进入下一个问题。

我寻找“JavaScript 幻灯片”，但这似乎带来了无数的图像幻灯片插件。我发誓我以前见过这种效果，但现在找不到了。是否有一个插件（现在即使只是一个允许在每张幻灯片上显示任意 HTML 的幻灯片也会很有帮助——我稍后会弄清楚如何从表单中获取信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:09:50.963

您可以将在每个页面上输入的值保存在 JavaScript 变量中。

```
var answerOne, answerTwo, answerThree, answerFour, answerFive;
$('form').submit(function(event){
    event.preventDefault();
    answerOne = $('form input#question-one').value();
    // then run the script which hides current page and shows next
}); 
```

您可以使用 jQuery 在页面之间切换也相当容易。

最简单的方法如下（想象您在每个 div 中的表单）：

```
<div id="page-1"></div>
<div id="page-2"></div>
<div id="page-3"></div>
 ...

<script>
    $('#page-1').hide();
    $('#page-2').show();
</script> 
```

这是一个非常简单的示例，说明如何在页面上隐藏和显示元素。它应该给你足够的工作。您需要一个变量来存储您正在查看的页面，并随着它的变化而增加它。

如果要在最后保存信息，我建议在服务器端处理它，确保它是有效的以及您期望的数据类型。否则，攻击者可以在发送值之前对其进行操作，可能会创建不需要的 SQL 注入/恶意代码等。

# objective-c - 界面生成器中 UIBarButton 的自定义背景图片

> ID：13442965
> 
> 赞同：1
> 
> 时间：2012-11-18T18:06:27.473
> 
> 标签：objective-c, ios, interface-builder, storyboard, uibarbuttonitem

今天我开始在 Xcode 中搞乱 Storyboard，有一个问题让我觉得很愚蠢：

我有一个带有导航控制器和表视图作为其根视图的故事板。现在我在导航栏中添加了一个条形按钮项。因为我希望这个按钮有一个自定义背景，所以我通过在“自定义类”字段中选择我的类的名称来将我的自定义 UIBarButtonItem 类分配给这个按钮。

类本身如下所示：

```
- (id)initWithTitle:(NSString *)title style:(UIBarButtonItemStyle)style target:(id)target action:(SEL)action
{
    self = [super initWithTitle:title style:style target:target action:action];

    if (self) {
        [self setBackgroundImage:[self buttonBg] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    }
    return self;
}

- (id)initWithImage:(UIImage *)image style:(UIBarButtonItemStyle)style target:(id)target action:(SEL)action
{
    self = [super initWithImage:image style:style target:target action:action];

    if (self) {
        [self setBackgroundImage:[self buttonBg] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    }
    return self;
}

- (UIImage *)buttonBg
{
    return [[UIImage imageNamed:@"navBarButton.png" ] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 6, 15, 6)
                                                                     resizingMode:UIImageResizingModeTile];
} 
```

我写了这个类，假设以编程方式添加一个按钮，这当然可以，因为我可以自己调用初始化程序。问题是我不知道Interface Builder调用了哪个初始化器，我什至尝试过覆盖基本的“init”，但似乎这个也没有调用......</p>

我做了很多搜索，但没有找到合适的东西，尽管我确信这是基本的东西。所以请道歉。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:24:24.920

Interface Builder will always call `initWithCoder:`. It makes sense, as the IB / storyboard file is actually an XML-encoded file that has to be decoded.

I usually define my own `initialize` method and call that from any overridden init methods.

# java - 如何在 SLF4j 或 Log4J 中动态更改日志级别

> ID：13442967
> 
> 赞同：22
> 
> 时间：2012-11-18T18:06:37.707
> 
> 标签：java, logging, log4j, slf4j

最近我遇到了一个应用程序日志级别动态变化的情况。应用程序管理员可以从前端将其设置为 INFO/DEBUG/WARN。根据选择的日志级别，必须更改应用程序日志记录。

我确信记录器支持这种情况，但不知道如何实现这一点。如果你们对此有任何想法/想法，请告诉我。

在此先感谢您的帮助。

-纳伦德拉

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-03-12T18:43:03.613

无法在 slf4j 中动态更改日志级别，但 slf4j 的一些后端支持它，包括 log4j。

这个解决方案对我有用：

```
org.apache.log4j.Logger logger4j = org.apache.log4j.Logger.getRootLogger();
logger4j.setLevel(org.apache.log4j.Level.toLevel("ERROR")); 
```

（来源： http: [//prateep.info/2015/12/12/Dynamically-change-log-level-in-SLF4j-Log4J-with-Standalone-Java-Class/](http://prateep.info/2015/12/12/Dynamically-change-log-level-in-SLF4j-Log4J-with-Standalone-Java-Class/)）

此解决方案的缺点是它直接使用后端，在使用 slf4j 时不应该这样做，因为 slf4j 的目的是提供远离您正在使用的特定后端的抽象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-18T18:42:13.277

考虑 Logback [http://logback.qos.ch/](http://logback.qos.ch/) - “流行的 log4j 项目的继承者，在 log4j 停止的地方接手”。如果指示这样做，logback-classic 将扫描其配置文件中的更改，并在配置文件更改时自动重新配置自己。此外，您可以使用 JMX 控制 Logback 的日志记录级别。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T19:29:06.517

我不得不用 log4j 做一次。我能弄清楚如何做到这一点的唯一方法是在 Logger 对象上调用[getAllAppenders 。](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Category.html#getAllAppenders%28%29)然后，遍历附加程序。如果他们扩展 AppenderSkeleton 类（他们应该），他们将拥有[setThreshold](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AppenderSkeleton.html#setThreshold%28org.apache.log4j.Priority%29)方法。使用您的新级别作为参数调用此方法。对记录器的后续调用应使用新级别。这将在内存中设置级别，但不在您的 log4j 配置文件中。您可能也想这样做，除非当管理员通过前端更改级别时它会自动更改。如果可以选择，您可能需要考虑遵循 Evgeniy Dorofeev 的建议并使用 logback。听起来会更容易。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-09-01T14:35:01.263

对于[SLF4J](http://www.slf4j.org/)，此代码将演示如何以编程方式（在运行时）控制记录器级别。

此答案假设您使用的是[Logback Classic](http://logback.qos.ch/)：

*   Maven 中心：[https ://search.maven.org/artifact/ch.qos.logback/logback-classic](https://search.maven.org/artifact/ch.qos.logback/logback-classic)

假设默认 SLF4J 配置：

```
final Logger logger = LoggerFactory.getLogger(LoggerListener.class);
// These five statements will log.
logger.error("error");
logger.warn("warn");
logger.info("info");
logger.debug("debug");
logger.trace("trace");

final ch.qos.logback.classic.Logger logger2 = (ch.qos.logback.classic.Logger) logger2;
@Nullable
final Level nullablePrevLevel = logger2.getLevel();
final Level level = Level.INFO;
logger2.setLevel(level);
logger.info("Change log level: [{}]->[{}]", nullablePrevLevel, level);

// These three statements will log.
logger.error("error");
logger.warn("warn");
logger.info("info");
// These two statements will not log.
logger.debug("debug");
logger.trace("trace"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-20T11:02:12.960

从`slf4j`version`1.7.26`开始，我能够更改日志记录级别。

这是`logback.xml`源文件夹中的。对于 Spring Boot 应用程序，您可能希望将其放在资源文件夹中。

```
<configuration scan="true" scanPeriod="20000">
    <include file="C:/logback-ext.xml"/>
</configuration> 
```

该`logback-ext.xml`文件保存在任何外部位置。以`scanPeriod`毫秒为单位。如果失败，请尝试使用`include resource`而不是`include file`in `logback.xml`。

```
<included>
  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>
          %d{yyyy-MM-dd HH:mm:ss} %-5p [%t] --- %c{1}.%M:%L :: %m %n
      </pattern>
    </encoder>
  </appender>
  <root level="INFO">
    <appender-ref ref="STDOUT" />
  </root>
</included> 
```

我能够更改日志记录级别、日志记录模式、附加/分离新的附加程序以及添加/删除附加程序。

这些是依赖项`pom.xml`

```
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>1.2.3</version>
<scope>compile</scope>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.25</version>
</dependency> 
```

干杯!

# matlab - Matlab中的概率生成

> ID：13442972
> 
> 赞同：1
> 
> 时间：2012-11-18T18:07:20.120
> 
> 标签：matlab, random

我想创建一个概率生成器，它将根据先验概率在一定数量的选项之间进行选择。例如，假设我想根据以下先验概率在 A、B 和 C 之间进行随机选择：

```
P(A) = .4
P(B) = .5
P(C) = .1 
```

那么，如何创建一个随机生成器，它将根据上述概率随机生成 A、B 或 C？

编辑：对不起，我忘了补充项目的数量，它们的概率并不总是相同的。所以，它不会总是像上面那样只有三个项目。它将是一个 Mx2 矩阵，其中 M 是项目数，第二列（概率）的总和为 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:33:58.430

我很困惑，但你的意思是 M，但如果 P 是概率矩阵，这是我的看法：

```
cumP = cumsum (P);
ind = find(cumP>rand, 1, 'first');
sol = P(ind); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:10:12.630

```
p=rand;
probs_vector=[.4 .5 .1];
current_prob=probs_vector(1);
index=1;
while (current_prob<p)
    index=index+1;
    current_prob=current_prob+probs_vector(index)
end 
```

需要进行一些基本检查以确保向量加起来为 1 而不是更高/更低，以防止无限循环等，但我将把这些细节留给你。`index`是输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:22:15.377

如果 P 是长度为 N 的概率向量，那么您可以使用一行代码从中返回一个样本：

```
out = 1 + sum( rand() > cumsum(P) ); 
```

这将根据 P 中的概率返回一个从 1 到 N 的整数。

# javascript - 工件移动后的开始和结束位置

> ID：13442974
> 
> 赞同：1
> 
> 时间：2012-11-18T18:07:23.710
> 
> 标签：javascript, jquery, html

我正在创建一个跳棋变体游戏。我是 jquery 的新手，但通过一些帮助，现在可以在棋盘上移动。

有没有办法指示移动的开始位置和结束位置？

一旦移动，我还想禁用所有棋子移动。

jsfiddle 可以在这里找到：http: [//jsfiddle.net/blueberrymuffin/mwu3u/1/](http://jsfiddle.net/blueberrymuffin/mwu3u/1/)

谢谢。

这是javascript代码：

```
function drag(ob){       
  ob.dataTransfer.setData("Text",ob.target.id);     
}

function drop(ob){
  var id = ob.dataTransfer.getData("Text");     
  var t = ob.target;    
  if (ob.target.nodeName == "IMG")
    t = ob.target.parentNode;
  t.innerHTML = "";
  var img = document.getElementById(id);
  t.appendChild(img);
  ob.preventDefault();    
}

function allowDrop(ob){
  ob.preventDefault();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:23:13.597

如果您同意使用 JQuery，这很容易（您上面的代码不包含 JQuery 源代码）

查看 JQueryUI 可拖放小部件[http://jqueryui.com/](http://jqueryui.com/)

这是一段允许在删除元素后检索源位置的代码：

```
 $( ".cases" ).droppable({ 
    drop: function(event, ui) {
        console.log(event.target.id);
        console.log(ui.draggable[0].parentElement.id);

        var target = event.target.id;
        var source = ui.draggable[0].parentElement.id;

    }
  }); 
```

# php - 简单的 PHP 博客：无法编辑帖子

> ID：13442975
> 
> 赞同：0
> 
> 时间：2012-11-18T18:07:28.137
> 
> 标签：php, mysql, database, content-management-system

**背景：**所以，我一直在关注本教程，了解如何在 Youtube 上使用 PHP 和 MySQL 构建自己的简单博客/CMS。CMS 允许您添加类别、添加帖子、查看类别列表以及删除和编辑帖子。这些文件由 index.php 文件、edit_post.php、add_post.php 等组成。此外，还有一个包含所有函数的 blog.php 文件。还有配置和初始化文件。该数据库有两个表，帖子和类别。该博客非常丑陋，但一切正常，除了：

**问题：**编辑帖子时，帖子内容移动到帖子标题，cat_id替换为数字0，内容替换为数字1。我只能在phpmyadmin中查看数据库才能看到这个信息。至于 index.php 页面，帖子就消失了。我还收到这两个错误：“未定义变量：第 69 行 C:\xampp\htdocs\blogg\resources\func\blogg.php 中的帖子”和“C:\xampp\htdocs\ 中为 foreach() 提供的参数无效第 40 行的 blogg\index.php"。

**代码：**我知道代码使用了过时的 mysql 函数。我稍后会解决这个问题。这不是这里的问题。无论如何，这是代码。我真的很感谢这里的帮助。

从包含所有功能的文件中：

```
function edit_post($id, $title, $contents, $category) {
    $id         = (int) $id;
    $title      = mysql_real_escape_string($title);
    $contents       = mysql_real_escape_string($contents);
    $category       = (int) $category;

    mysql_query(" UPDATE `posts` SET
                    `cat_id`    = {$category},
                    `title`     = '{$title}',
                    `contents`  = '{$contents}'
                 WHERE `id` = {$id}");
} 
```

整个 edit_post.php 文件：

```
 <?php
include_once('resources/init.php');

$post = get_posts($_GET['id']);

if ( isset($_POST['title'], $_POST['contents'], $_POST['category']) ) {
    $errors = array();

    $title      = trim($_POST['title']);
    $contents   = trim($_POST['contents']);

    if ( empty ($title) ) {
        $errors[] = 'Skriv in titel';
    }

    if ( empty ($contents) ) {
        $errors[] = 'Skriv in text';
    }

    if ( ! category_exists('id', $_POST['category']) ) {
        $errors[] = 'Kategorin finns inte';
    }

    if ( strlen($title) > 255) {
        $errors[] = 'Titeln får inte vara längre än 255 tecken';
    }

    if ( empty($errors) ) {
        edit_post($_GET['id']. $title, $contents, $_POST['category']);

        header("Location: index.php?id={$post[0]['post_id']}");
        die();
    }
}

?>

<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <style>
    label { display: block; }
    </style>

    <title> Edit a Post </title>
</head>

<body>
    <h1> Edit a Post </h1>

    <?php

    if ( isset($errors) && ! empty($errors) ) {
        echo '<ul><li>', implode('</li><li>', $errors), '</li></ul>';
    }
    ?>

    <form action="" method="post">
        <div>
            <label for="title"> Title </label>
            <input type="text" name="title" value="<?php echo $post[0]['title']; ?>">
        </div>
        <div>
            <label for="contents"> Contents </label>
            <textarea name="contents" rows="15" cols="50"><?php echo $post[0]['contents']; ?></textarea>
        </div>
        <div>
            <label for="category"> Category </label>
            <select name="category">
                <?php
                foreach ( get_categories() as $category ) {
                    $selected = ($category['name'] == $post[0]['name']) ? ' selected' : '';
                    ?>
                    <option value="<?php echo $category['id']; ?>" <?php echo $selected; ?>> <?php echo $category['name']; ?> </option>
                    <?php
                }
                ?>
            </select>
        </div>
        <div>
            <input type="submit" value="Edit Post">
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:23:28.210

Oh man... I'm sorry for taking your time. I discovered the problem now. After edit_post($_GET['id'] I used a dot instead of a comma. After changing that, everything works as it should. Small things...

# jpa - OpenJpa 和 JNDI

> ID：13442978
> 
> 赞同：5
> 
> 时间：2012-11-18T18:07:52.727
> 
> 标签：jpa, jndi, openjpa

对于 OpenJPA，如何在 jta_datasource 中指定 JNDI 连接而不在 persistence.xml 中指定用户名和密码？当在 jndi 的 persistence.xml 文件中未指定用户名和密码时，它会给我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:22:56.210

好问题；OpenJPA 文档中没有很好地介绍这一点。您需要做的是对“openjpa.ConnectionFactoryName”属性使用特殊的“java:comp/env/...”语法来要求 OpenJPA 从 JNDI 检索连接参数。例如，您的 persistence.xml 应如下所示：

```
<?xml version="1.0"?>
<persistence>
  <persistence-unit name="openjpa">
    <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
    <class>tutorial.Animal</class>
    <class>tutorial.Dog</class>
    <class>tutorial.Rabbit</class>
    <class>tutorial.Snake</class>
    <properties>
      <property name="openjpa.ConnectionFactoryName" value="java:comp/env/jdbc/myjndi"/>
      <property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO"/>
    </properties>
  </persistence-unit>
</persistence> 
```

这将从容器中请求一个名为“myjndi”的 jndi 资源。如果您使用的是 Tomcat，您将有一个如下所示的 context.xml：

```
<?xml version='1.0' encoding='UTF-8'?>
<Context>
    <Resource name="jdbc/myjndi"
        auth="Container"
        scope="Shareable"
        type="javax.sql.DataSource"
        maxActive="100"
        maxIdle="30"
        maxWait="10000"
        removeAbandoned="true"
        username="username"
        password="password"
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/DBNAME?characterEncoding=UTF-8"
        />
</Context> 
```

根据您的数据库的需要更改上面的 JNDI 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:48:21.353

尝试使用`jta-data-source`persistence.xml 中的元素。

```
<jta-data-source>java:comp/env/jdbc/FooBarDataSourceJNDI</jta-data-source> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T22:10:42.660

通过代码进行配置对我有用：

```
Map<String, String> conf = new HashMap<>();
conf.put("javax.persistence.jtaDataSource", "java:comp/env/jdbc/myjndi");
return getEntityManagerFactory().createEntityManager(conf); 
```

我想我还没有放在`persistence.xml`正确的位置。

# wpf - 如何隐藏WPF中的控件？

> ID：13442980
> 
> 赞同：0
> 
> 时间：2012-11-18T18:08:21.380
> 
> 标签：wpf

我在我的窗口中添加了一些控件和选项卡控件。现在我想在用户按下tabItem2时隐藏控件，就像我需要的每个tabItem应该显示一些控件并且应该隐藏一些控件如何进行这种类型的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:14:57.833

只需在 TabControl 中声明控件

```
<TabControl>
    <TabItem>
        <Button x:Name="Button1"/>
    </TabItem>
    <TabItem>
        <Button/>
    </TabItem>
</TabControl> 
```

或者，您可以通过处理 TabControl 的 SelectionChanged 事件来隐藏所需的控件。

```
void OnTabControlSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    Button1.Visibility = Visibility.Collapsed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:08:32.650

For Clarification: do you mean that for each tabitem you press, you would like a different set of tabitems to be visible? If so, I'd suggest wrapping that functionality up in a UserControl, and providing the "set" logic as part of the codebehind for that control.

# python - 实现一个带有约束的python列表

> ID：13442981
> 
> 赞同：10
> 
> 时间：2012-11-18T18:08:23.423
> 
> 标签：python, data-structures

我需要一个 python`list`对象，它在插入时会自动检查表单的某些约束：“A 必须始终位于 B 之前”或“如果包含 C，则它必须始终位于最后”。

实现这一点的最简单/最快的方法是什么。显而易见的方法是覆盖列表数据类型的所有更改其内容的方法（`append`、`extend`、`insert`等），并验证在操作后约束是否仍然有效。只是这很乏味，因为有很多这些方法。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:23:47.510

我强烈建议从`collections.MutableSequence`抽象基类继承。缺点是它不会被识别为`list`（正如[user4815162342](https://stackoverflow.com/a/13443454/577088)指出的那样）的子类。但是，只要使用结果类的人做正确的事情（即使用鸭子类型或将抽象基类而不是具体类传递给 `isinstance`），这几乎无关紧要。

关于这一点的美妙之处在于，一旦您定义了以下方法，您就[`MutableSequence`](http://docs.python.org/2/library/collections.html#collections-abstract-base-classes)可以免费获得界面的其余部分。这是一个具体的子类`MutableSequence`，您可以将其用作进一步定制的模板。在您的情况下，您应该只需要自定义`__init__`、`__setitem__`、`insert`和`__delitem__`。其他所有内容都是根据这些定义的，因此将执行您插入的任何检查：

```
import collections
class MyList(collections.MutableSequence):
    def __init__(self, it=()):
        self._inner = list(it)
    def __len__(self):
        return len(self._inner)
    def __iter__(self):
        return iter(self._inner)
    def __contains__(self, item):
        return item in self._inner
    def __getitem__(self, index):
        return self._inner[index]
    def __setitem__(self, index, value):
        self._inner[index] = value
    def __delitem__(self, index):
        del self._inner[index]
    def __repr__(self):
        return 'MyList({})'.format(self._inner)
    def insert(self, index, item):
        return self._inner.insert(index, item) 
```

几个简单的测试：

```
>>> ml = MyList('foo')
>>> ml
MyList(['f', 'o', 'o'])
>>> ml.append(5)
>>> ml
MyList(['f', 'o', 'o', 5])
>>> ml.reverse()
>>> ml
MyList([5, 'o', 'o', 'f']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:59:01.520

如果您的类型必须是 的子类型`list`，则您的选择是有限的。您必须继承并重写 mutator 方法，不要忘记特殊方法，例如`__setitem__`. 坏消息是没有办法强制使用这些方法。任何人，在任何时候，都可以调用：`list.append(your_list, new_elem)`，并绕过你的`append`。更糟糕的是，Python 的实现在某些地方正是这样做的。（这在字典和元组中更常见。）

如果您的类型不需要继承 from `list`，请查看[`UserList`](http://docs.python.org/2/library/userdict.html#module-UserList)和 at [`collections.MutableSequence`](http://docs.python.org/2/library/collections.html#collections.MutableSequence)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:00:31.960

不要子类化`list`，代理它：覆盖`__getattribute__`以将所有调用传递给代理列表，然后检查您的约束。

# spring - Spring-MVC：一个请求的多个控制器

> ID：13442982
> 
> 赞同：2
> 
> 时间：2012-11-18T18:08:23.697
> 
> 标签：spring, spring-mvc

我需要在一页上显示几个控制器的输出。

```
Menu controller: adds "menuItems" collection to the model
Banner controller: adds "banner" to the  model
ListItems controller: the "main" one: it adds all other data to display 
```

我的观点（我使用 xslt）了解模型并使用它。

我的问题是如何为一个请求调用*3 个*控制器并将它们的输出组合到一个模型中。

我不想在这里使用继承（那味道）。我不想使用拦截器，因为它们是低级的，我想使用映射参数而不是请求和响应。

如何在 Spring MVC 中实现？

谢谢！

PS：我可能会尝试使用 WebRequestInterceptor

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:29:34.000

您可以使用 spring mvc 的 Handler 拦截器功能，我已将其用于菜单、面包屑等。您可以找到更多的实现[示例](http://www.mkyong.com/spring-mvc/spring-mvc-handler-interceptors-example/)

# wordpress - 如何更改 Wordpress 自定义页面模板中的内容？

> ID：13442988
> 
> 赞同：0
> 
> 时间：2012-11-18T18:08:50.243
> 
> 标签：wordpress, templates

我创建了一个 Wordpress 页面模板，希望显示自定义菜单和相应的页面。我的问题实际上是如何更改模板中显示的内容？我想用从菜单中选择的任何页面选项替换菜单。php include 只是将内容添加到已经存在的内容中，并且 header(location:) 函数将我带到另一个 php 文件，但随后我丢失了页面模板。这可能很简单，但我完全糊涂了。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:03:00.490

您首先必须在 WordPress 管理员中创建您的页面。如果管理员中不存在它们，您将无法（至少，不具备一些编程技能）能够定位它们并使用 WordPress 模板显示它们。你做了这个了吗？您的页面将具有诸如 http:://yoursite.com/pagename/ 等 URL。然后，如果您在菜单中选择一个选项，您可以将用户链接到相应的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:17:40.680

好吧，我想你想创建一个所谓的“跳转菜单”：当在下拉菜单中选择页面名称时，你希望用户被自动发送到相应的页面。所以你可以看看这个小例子：[http](http://www.entheosweb.com/website_design/jump_menus.asp) ://www.entheosweb.com/website_design/jump_menus.asp 只需提前在 WordPress 中创建所有目标页面，记下它们的 URL（http://yoursite.com/page1/, [http ://yoursite.com/page2/](http://yoursite.com/page2/)， ETC。）。将 URL 放入选项 select 的值中，一切都应该工作。您不想将目标页面的 URL 放在“操作”中，因为那是表单将发送到的 URL，而事实是您没有将表单用作真实表单，而是作为一种手段选择一个选项并获取要执行的 JavaScript 命令。看看教程是否让你更清楚，否则，继续发布。

# android - LocationManager 请求LocationUpdates

> ID：13442991
> 
> 赞同：0
> 
> 时间：2012-11-18T18:09:05.643
> 
> 标签：android, handler, locationmanager, looper

我编写了以下代码，以便在收到位置更新时在线程上进行回调（这是主线程）：

```
Handler handler; // this Handler is initialized in the following thread
Runnable r = new Runnable() {
    public void run() {
        Looper.prepare();
        handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                Log.d("MSG", msg.toString());
            }
        };
        Looper.loop();
    }
};
Thread t = new Thread(r);
t.start();

LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, new LocationListener() {
    public void onLocationChanged(Location location) {
        Log.d("UPD", "onLocationChanged");
    }
    [...]
}, handler.getLooper()); 
```

我希望在收到更新时在日志中看到 MSG。相反，当我看到 UPD 行时，我看不到 MSG。

那么，当我通过 looper 时 requestLocationUpdates 的正确行为是什么？

# php - 空白 index.php 与选项 - 禁止目录列表的索引？

> ID：13442993
> 
> 赞同：1
> 
> 时间：2012-11-18T18:09:19.073
> 
> 标签：php, apache, security, .htaccess, directory-listing

完全阻止人们查看目录列表（以提高安全性和保护内容）似乎是一个好主意，并且从我所做的阅读中我发现了两种方法：

方式#1：在每个目录中放置一个空白的index.php/index.html文件
方式#2：将行`Options -Indexes`放在每个目录中的.htaccess文件中

其中哪一个更可取？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T18:11:35.507

`Options -Indexes`当您不想暴露*任何*目录列表时使用（在根目录，而不是目录级别）。

当某些目录可以列出时使用空白 index.html，但有些目录要保密

# c++ - 如何删除指向动态分配对象内的动态分配对象的指针？

> ID：13442999
> 
> 赞同：0
> 
> 时间：2012-11-18T18:10:18.500
> 
> 标签：c++, pointers, dynamic, allocation, delete-operator

我有一个 Person 类。在这个 Person 类中，我有一个指针 Strategy 对象，它是我的基类（我正在使用继承/多态）：

`Strategy* strat;`

我也有一个 Parser 类。我在解析器类中说这两行代码：

`StrategyType* newStrat; = new StrategyType;
person.strat = newStrat`

StrategyType 是我的基类 Strategy 的层次结构的一部分。现在，我想在程序结束时删除*strat*，这样就不会导致内存泄漏。我创建了一个 Person 析构函数，它基本上删除了*strat*。但问题是，我的 Person 析构函数在我的 Parser 类中被调用，其中 Person 对象超出了范围。我希望我的 Person 对象寿命比这更长。我也可以动态分配 Person 对象来解决这个问题。但是新的问题是，我将如何删除动态分配的 Person 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:31:26.657

根据我的理解，您的 Parser 类有一个 Person 对象，但您希望 Person 对象能够比 Parser 对象寿命更长。这是[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)为了什么。

```
class Parser
{
public:
    Parser(std::shared_ptr<Person> person)
        :m_person(std::move(person))
    {
        // probably want to use a unique_ptr for strat, but one thing at a time
        m_person->strat = new StrategyType;
    }
private:
    std::shared_ptr<Person> m_person;
};

int main()
{
    auto person = std::make_shared<Person>();

    {
        Parser parser(person);
        // parser shares person            
    }
    // parser is destroyed, but person lives on

    person->do_something();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:02:08.053

我认为您需要 shared_ptr 和 unique_ptr 的组合。策略类型应该在您的基类之一中，并且您应该根据需要使用共享/唯一 ptr，现在这里是 unique_ptr。这样您就可以确定重新分配不会泄漏或更好地检查它是否已经分配。

显然，您不希望成员变量公开，但在这里它们是为了演示。

```
#include <memory>

class StrategyType
{};

class PersonBase
{
public:
    std::unique_ptr<StrategyType> strat;
};

class Person : public PersonBase
{
public:

    void do_something()
    {
        double d = 0;
        d = d + 9;
        d = d * d;
    }
};

class Parser
{
public:
    //  makes no sense in moving shared_ptr
    //  hence pass by value
    Parser(std::shared_ptr<Person> _person)
        :m_person(_person)
    {
        // probably want to use a unique_ptr for strat, but one thing at a time
        m_person->strat.reset(new StrategyType);
    }
private:
    std::shared_ptr<Person> m_person;
};

int main()
{
    auto person = std::make_shared<Person>();

    {
        Parser parser(person);
        // parser shares person            
    }
    // parser is destroyed, but person lives on

    person->do_something();
} 
```