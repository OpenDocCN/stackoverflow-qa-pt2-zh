# StackOverflow 问答 12864000-12864999

# python - 在深度优先搜索中跟踪和返回路径

> ID：12864004
> 
> 赞同：42
> 
> 时间：2012-10-12T17:13:34.593
> 
> 标签：python, algorithm, artificial-intelligence

所以我有一个问题想用深度优先搜索来解决，返回DFS找到的第一个路径。这是我的（不完整的）DFS 函数：

```
 start = problem.getStartState()
    stack = Stack()
    visited = []
    stack.push(start)
    if problem.isGoalState(problem.getStartState):
        return something
    while stack:
        parent = stack.pop()
        if parent in visited: continue
        if problem.isGoalState(parent):
            return something
        visited.append(parent)
        children = problem.getSuccessors(parent)
        for child in children:
            stack.push(child[0]) 
```

startState 和goalState 变量只是x, y 坐标的元组。问题是一个有多种方法的类。这里重要的是 getSuccessors （它以 3 项元组列表的形式返回给定状态的子项。但是对于这部分问题，只有元组的第一个元素 (child[0])，它返回子节点在 x、y 坐标中的状态，很重要）和 isGoalState（它提供目标状态的 x、y 坐标）。

所以我认为（在这一点上很难测试），这个函数，如果正确实现了其他一切，一旦达到目标状态，它就会返回。如果我遗漏了什么，请告诉我。不过，我最大的问题是返回什么。我希望它按从头到尾的顺序输出到达目标状态所需的所有状态的列表。似乎简单地返回我的堆栈并不能解决问题，因为堆栈将包含许多未访问的孩子。我的访问列表也不会产生任何有用的信息，因为可以想象我可能会到达死胡同，不得不回溯，但访问列表中仍然有死胡同。我将如何获得我想要的列表？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-12T17:25:32.843

你是对的 - 你不能简单地返回堆栈，它确实包含很多未访问的节点。

但是，通过维护一个地图（字典）：`map:Vertex->Vertex`这样`parentMap[v] = the vertex we used to discover v`，您可以获得您的路径。

您需要做的修改几乎在 for 循环中：

```
 for child in children:
        stack.push(child[0])
        parentMap[child] = parent #this line was added 
```

稍后，当您找到目标时，您可以获取从源到目标的路径（伪代码）：

```
curr = target
while (curr != None):
  print curr
  curr = parentMap[curr] 
```

请注意，顺序会颠倒，可以通过将所有元素压入堆栈然后打印来解决。

我曾经回答过一个类似的（虽然不是完全相同的 IMO）问题，关于在[这个线程中找到 BFS 中的实际路径](https://stackoverflow.com/q/9590299/572670)

另一种解决方案是使用 DFS 的递归版本而不是迭代 + 堆栈，一旦找到目标，`current`将递归中的所有节点打印备份 - 但此解决方案需要将算法重新设计为递归算法。

* * *

`visited`PS 请注意，如果图包含无限分支 ，DFS 可能无法找到到目标的路径（即使维护一个集合）。如果您想要一个完整的（如果存在，总是找到解决方案）和最佳（找到最短路径）算法 -如果您有一些启发式函数
，您可能想要使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)或[迭代深化 DFS](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)甚至[A* 算法](http://en.wikipedia.org/wiki/A*_search_algorithm)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-09-07T17:40:42.403

不是针对您的问题，但是您可以调整此代码并将其应用于不同的场景，实际上，您可以使堆栈也保持路径。

例子：

```
 A
   /    \
  C      B
  \     / \
   \    D E
    \    /
       F 
```

```
graph = {'A': set(['B', 'C']),
         'B': set(['A', 'D', 'E']),
         'C': set(['A', 'F']),
         'D': set(['B']),
         'E': set(['B', 'F']),
         'F': set(['C', 'E'])}

def dfs_paths(graph, start, goal):
    stack = [(start, [start])]
    visited = set()
    while stack:
        (vertex, path) = stack.pop()
        if vertex not in visited:
            if vertex == goal:
                return path
            visited.add(vertex)
            for neighbor in graph[vertex]:
                stack.append((neighbor, path + [neighbor]))

print (dfs_paths(graph, 'A', 'F'))   #['A', 'B', 'E', 'F'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T17:17:06.467

此链接应该对您有很大帮助...这是一篇冗长的文章，广泛讨论了返回路径的 DFS 搜索...我觉得它比我或其他任何人可以发布的任何答案都好

[http://www.python.org/doc/essays/graphs/](http://www.python.org/doc/essays/graphs/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-05T23:26:06.680

我刚刚在`PHP`.

背后的基本思想如下：为什么要维护另一个堆栈，当有**调用堆栈**时，它在执行的每个点都反映了从入口点获取的路径。当算法达到目标时，您只需要返回当前调用堆栈，这会导致读取向后的路径。这是修改后的算法。注意`return immediately`部分。

```
/**
 * Depth-first path
 * 
 * @param Node $node        Currently evaluated node of the graph
 * @param Node $goal        The node we want to find
 *
 * @return The path as an array of Nodes, or false if there was no mach.
 */
function depthFirstPath (Node $node, Node $goal)
{
    // mark node as visited
    $node->visited = true;

    // If the goal is found, return immediately
    if ($node == $goal) {
        return array($node);
    }

    foreach ($node->outgoing as $edge) {

        // We inspect the neighbours which are not yet visited
        if (!$edge->outgoing->visited) {

            $result = $this->depthFirstPath($edge->outgoing, $goal);

            // If the goal is found, return immediately
            if ($result) {
                // Insert the current node to the beginning of the result set
                array_unshift($result, $node);
                return $result;
            }
        }
    }

    return false;
} 
```

# ruby-on-rails-3 - Rails 在 HTTP/rack 请求开始期间连接到数据库

> ID：12864005
> 
> 赞同：1
> 
> 时间：2012-10-12T17:13:37.860
> 
> 标签：ruby-on-rails-3, activerecord, database-connection, ruby-on-rails-3.2

有没有办法改变这种行为？即让 Rails 懒惰地从池中获取连接，而不是在请求进来时。

我们将 Postgres 用作辅助数据源，因此如果该辅助数据源关闭，应用程序不应受到影响，我们希望从中拯救。

现在，当 postgres 出现故障时，所有请求都会受到影响。

任何输入将不胜感激。

```
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `initialize'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `new'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `connect'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
vendor/ruby-1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
vendor/ruby-1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:67:in `rescue in call'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:61:in `call'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1061097989250305020__call__4547997776545495741__callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/deflater.rb:13:in `call'
vendor/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:535:in `process_client'
vendor/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:610:in `worker_loop' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:50:49.357

This is due to the QueryCache middleware. Unless you want to monkey patch it, you can just remove it from the middleware stack:

```
config.middleware.delete ActiveRecord::QueryCache 
```

you might need to remove ActiveRecord::ConnectionAdapters::ConnectionManagement middleware as well.

# xaml - 将项目添加到嵌套列表后更新 GridView

> ID：12864007
> 
> 赞同：2
> 
> 时间：2012-10-12T17:13:41.973
> 
> 标签：xaml, windows-runtime, winrt-xaml

当我使用 GridView 控件为我的应用程序开发启动屏幕时，我遇到了一个问题。我的主屏幕上有一个 GridView，它的 CollectionViewSource 设置为 ItemSource。

对于此 CollectionViewSource，源设置为 ObservableCollection 列表。每个 GroupViewModel 中都有一个 ObservableCollection。在代码中，重要部分如下所示：

```
public class StartPageViewModel : ViewModelBase
{
    public ObservableCollection<GroupViewModel> Groups { get; set; }
    public CollectionViewSource GroupsCvs { get; set; }     

    public StartPageViewModel()
    {
        // fill Groups with some mock data
        GroupsCvs.Source = Groups;
        GroupsCvs.IsSourceGrouped = true;
    }

    public void MoveItems(GroupViewModel grp)
    {
        // add a dummy item
        grp.AddRecipe(new ItemViewModel(new Item()) { Id = "123" });
        RaisePropertyChanged("GroupsCvs");
        RaisePropertyChanged("Groups");
    }
}

public class GroupViewModel : ViewModelBase, IEnumerable<ItemViewModel>
{ 
    public ObservableCollection<ItemViewModel> Items { get; set; }
}

View:

public sealed partial class MainPage : LayoutAwarePage
{
    private ViewModelLocator locator = new ViewModelLocator();

    public MainPage()
    {
        this.InitializeComponent();
        this.DataContext = locator.Main; // returns StartPageViewModel
    }
}

XAML part for MainPage, GridView

<GridView ItemsSource="{Binding GroupsCvs.View}" ...
</GridView> 
```

当我将项目添加到组的集合时，如何刷新 UI？在我的 StartPageViewModel 中，我将虚拟项目添加到 GroupViewModel 并引发 propertychanged，但 Grid 保持不变。

我还尝试在 GroupViewModel 类中触发属性更改事件，当 Items 集合更改时没有任何运气。

**编辑：**正如我在评论中所写的，可以通过重新分配源属性来刷新，但是这会使 GridView 再次呈现，这并不好。我正在寻找能够带来更好用户体验的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:31:48.360

我想`CollectionViewSource`不会对`PropertyChanged`事件做出反应。修改后尝试重新分配`Source`。`GroupCvs`它并不优雅，但它应该可以工作：

```
GroupsCvs.Source = Groups; 
```

作为最后的手段，您可以`ObservableCollection<GroupViewModel>`在重新分配之前创建一个新实例：

```
Groups = new ObservableCollection<GroupViewModel>(Groups)
GroupsCvs.Source = Groups; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:33:00.253

```
<GridView ItemsSource="{Binding GroupsCvs.View, **BindingMode=TwoWay**}" ...  
</GridView> 
```

# php - Codeigniter 重定向不使用 jQuery mobile 更新 url

> ID：12864013
> 
> 赞同：3
> 
> 时间：2012-10-12T17:13:55.727
> 
> 标签：php, jquery, codeigniter, redirect, jquery-mobile

我有一个登录控制器，假设用户有效时重定向到我的索引页面。重定向有效，但在索引页面上，url 仍然是验证方法的 URL，例如：login/validate_login/。如果我单击索引页面上的链接，然后尝试返回浏览器历史记录，浏览器会将我指向验证方法而不是索引页面。

我该如何解决？

我曾尝试将重定向与刷新和位置一起使用，但都没有运气。

我怀疑这是 jQuery mobile 的 ajax 调用的问题，但我不确定。

任何帮助表示赞赏。亲切的问候

注意：我会在索引页面上发布 url 的图像，但我不允许这样做，因为我是新用户。

我的验证方法：

```
 function validate_login($controller='',$method='') {
    $this->load->library('form_validation');
    $this->load->model('workout_model');

    $this->form_validation->set_rules('ex_password','Koden','trim|required|min_length[4]|max_length[4]|callback_pw_check');

    if($this->form_validation->run() == FALSE) {
        $this->index();
    } else {
        if($query = $this->workout_model->validate()) {

            $data = array(
            'is_logged_in' => true,
            'user_id' => $query->id,
            'current_exercise' => '1'
            );

            $this->session->set_userdata($data);

            if($controller=='' || $method=='') {
                redirect("workout");
            } else {
                redirect($controller."/".$method);
            }
        } else {
            $this->index();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T01:03:28.017

要正确更新 URL，似乎需要两件事：使用 redirect(...) 而不是方法调用和禁用 jQuery Mobile ajax 调用。这样做的两种方法：添加和属性到最初指向您的方法的链接，

```
<a href='.../validate_login/...' data-ajax='false'>...</a> 
```

或者，通过编辑设置（未测试）全局禁用 ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:06:19.360

有两种方法可以处理这个问题，它与 AJAX 无关，它是 CI 做事的方式。最快最简单的方法是改变

```
$this->index(); 
```

至

```
redirect(index); 
```

您这样做的方式实际上并没有重定向，而是在当前 URL 上调用 index 函数，即 validate_login。这样做的问题是，如果登录失败，它仍将保留在 validate_login URL 上以供下次尝试。

处理它的最佳方法是从控制器中的索引函数而不是表单本身调用实际的 validate_login 函数。因此，将表单发送回索引，让索引控制器检查表单数据，如果为真，则调用 validate_login()。这样你就不会真正离开索引页面，它只是处理登录表单是否已提交。解决网址问题。实际上，我对所有提交表单以进行任何类型验证的页面都是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-19T21:18:09.777

当您通过 HTML 表单提交时，例如登录注册。那么您还有某种仪表板重定向，您需要像这样更新您的表单标签。当我使用 Codeigniter 和 jquery mobile 使用**data-ajax="false "**

```
<form id="login-box" method="post" action="<?php echo base_url('index.php/auth/login_user'); ?> " data-ajax="false"> 
```

# sql - 从视图优化sql查询

> ID：12864014
> 
> 赞同：1
> 
> 时间：2012-10-12T17:13:58.593
> 
> 标签：sql, sql-server

我有一个从非常慢的视图中提取的 sql 查询，我知道这可能是视图错误；但是我无法改变观点。我有这个查询，想看看是否有人对如何优化它有建议，以便我可以让它更快。

```
SELECT COUNT(id) AS recordnum, firstname, lastname 
    FROM view 
    WHERE personid=123 AND transactiondate BETWEEN '9/1/2012' AND '9/30/2012' 
    GROUP BY firstname, lastname 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:24:32.593

```
SELECT COUNT(id) AS recordnum, firstname, lastname 
FROM view 
WHERE personid=123 AND transactiondate BETWEEN '9/1/2012' AND '9/30/2012' 
GROUP BY firstname, lastname 
```

考虑在 (personid) 和/或 (transactiondate) 和/或 (firstname, lastname) 上的索引，以最具选择性的为准。也就是说，如果 personid 将选择 100,000 条记录中的 1 条，则 personid 上的索引通常就足够了。如果 personid+transactiondate 的组合为您提供了这种选择性，请在两列上创建一个复合索引。

如果这是您执行次数最多的单个查询，或者您只是经常运行它，您还可以将所有列包含到索引中，例如

```
create index ix_basetable_1 on basetable_inside_view(personid,transactiondate)
INCLUDE(firstname,lastname,id) 
```

# file-management - 用于选择性复制源项目的实用程序

> ID：12864015
> 
> 赞同：0
> 
> 时间：2012-10-12T17:14:00.287
> 
> 标签：file-management

我需要一些工具。

我有项目（Java/Android）。在文件夹 src 我有我所有的 java 文件。我对项目进行了一些更改（一些文件已更改）。现在我想从 src 复制所有更新的文件（例如：今天更改），但保留目录结构。

例如，我有：

```
src\dir1\file1.java 
         file2.java (updated)
   \dir2\file3.java (updated)
   \dir2\dir3\file4.java 
```

应对后，我想用结构获取新的 src 文件夹：

```
(some folder)\dir1\file2.java
             \dir2\file3.java 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:09:20.387

我们可以使用命令行工具：xcopy 或 robocopy。我最好的方法：Total Commander + CopyTree。

# c++ - 在 qt C++ 中硬编码俄语翻译

> ID：12864018
> 
> 赞同：2
> 
> 时间：2012-10-12T17:14:10.473
> 
> 标签：c++, qt, user-interface, translation

我是入门级程序员，也是 QT 的新手。我有一个项目，我将我的编程硬编码成三种不同的语言。我在弄清楚如何硬编码俄语而不是我得到的字母时遇到问题？？？。我的代码被分解为 FR.h SP.h German.h Russian.h ->我知道其他人使用拉丁编解码器，但俄语不使用 English.h 下面的文件外观示例 - 每个单词的定义

```
 #ifndef EN_H
#define EN_H

#define TR_PRG_EN                 "Program"
#define TR_HELP_EN                "Help"
#define TR_PASSRW_EN              "Pass: R/W"
#define TR_ALLOWWRITE_EN          "Allow Write"
#define TR_SERIAL_EN              "Serial #"
#define TR_ALLOWREAD_EN           "Allow Read"
#define TR_PRO_EN                 "Product #"
#define TR_MEMSIZE_EN             "Mem. Size"
#define TR_TRIP_EN                "Trip #"
#define TR_RANGE_EN               "Range"
#define TR_DESCR_EN                "Description"
#define TR_LOGSET_EN              "Logger Settings"
#define TR_INTTEMP_EN             "Int. Temp (NTC)"
#define TR_HHIGH_EN               "HHigh(°F)"
#define TR_HIGH_EN                "High(°F)"
#define TR_LOW_EN                 "Low(°F)"
#define TR_LLOW_EN                "LLow(°F)" 
```

用 russian.h

```
 #ifndef RU_H
#define RU_H

#define TR_ENCODING               "utf-8"
#define TR_PRG_RU                 "??????????"
#define TR_HELP_RU                "Help"
#define TR_PASSRW_RU              "?????????"
#define TR_ALLOWWRITE_RU          "????????"
#define TR_SERIAL_RU              "???????? #"
#define TR_ALLOWREAD_RU           "????????? ??????"
#define TR_PRO_RU                 "??????? #"
#define TR_MEMSIZE_RU             "?????? ?????? "
#define TR_TRIP_RU                "??????? #"
#define TR_RANGE_RU               "????????"
#define TR_DESCR_RU                "????????" 
```

然后我有 Clang.cpp(class,with.h file) 文件，我将单词放入 Qlist>(2d array)-> 下面是一个例子

```
const char *trOK[NB_LAN]={TR_OK_EN,TR_OK_FR,TR_OK_SP,TR_OK_IT,TR_OK_RU,TR_OK_GR,TR_OK_PR};
const char *trName[NB_LAN]={TR_NAME_EN,TR_NAME_FR,TR_NAME_SP,TR_NAME_IT,TR_NAME_RU,TR_NAME_GR,TR_NAME_PR};
const char *trDesc[NB_LAN]={TR_DESC_EN,TR_DESC_FR,TR_DESC_SP,TR_DESC_IT,TR_DESC_RU,TR_DESC_GR,TR_DESC_PR};
const char *trLL[NB_LAN]={TR_LL_EN,TR_LL_FR,TR_LL_SP,TR_LL_IT,TR_LL_RU,TR_LL_GR,TR_LL_PR};
const char *trL[NB_LAN]={TR_L_EN,TR_L_FR,TR_L_SP,TR_L_IT,TR_L_RU,TR_L_GR,TR_L_PR};
const char *trH[NB_LAN]={TR_H_EN,TR_H_FR,TR_H_SP,TR_H_IT,TR_H_RU,TR_H_GR,TR_H_PR};
const char *trHH[NB_LAN]={TR_HH_EN,TR_HH_FR,TR_HH_SP,TR_HH_IT,TR_HH_RU,TR_HH_GR,TR_HH_PR};
CLang::CLang()
{
    for(int i=0;i<NB_LAN;i++)
    {

        strTab << QStringList();
        strTab[i] << trPrg[i];            //m_tabLogger
        strTab[i] << trHelp[i];           //m_textBrowserHelp
        strTab[i] << trPassrw[i];         //label_13
        strTab[i] << trAllowWrite[i];     //m_checkBoxLoggerAllowWrite
        strTab[i] << trSerial[i];         //label_2
        strTab[i] << trAllowRead[i];      //m_checkBoxLoggerAllowRead
        strTab[i] << trPro[i];            //label_3
        strTab[i] << trMemSize[i];        //label_5
        strTab[i] << trTrip[i];           //label_6
        strTab[i] << trRange[i];          //m_labelRange
        strTab[i] << trDescr[i];           //label_7
        strTab[i] << trLogSet[i];         //m_groupBoxSettings 
```

然后我在主窗口中调用它，所以我的问题是如何让俄语显示字母我的另一个问题是我有多个窗口（GUI）我如何在这些不同的窗口（GUI）上调用这些翻译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:19:27.893

几乎每个框架都有处理翻译的工具，包括 QT： [http ://doc.qt.digia.com/4.7-snapshot/linguist-programmers.html](http://doc.qt.digia.com/4.7-snapshot/linguist-programmers.html)

您应该使用它而不是在源文件中硬编码 UTF8

并回答它失败的原因 - 您正在尝试将 UTF8 放入 char 中。不会工作。您需要使用 QString 或类似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:34:39.643

我看到了 2 个解决方案。更真实的方法是以这种方式编写您的定义：

1.使用 const char* 常量：

```
const char* TR_HELP_RU = "Справка"; 
```

然后在你的 main.cpp 添加：

```
QTextCodec *codec = QTextCodec::codecForName("UTF-8");
QTextCodec::setCodecForCStrings(codec); 
```

2.使用QString常量：

```
 const QString TR_HELP_RU = QString("Справка"); 
```

# javascript - 输入更多时使文本框变大（Facebook 风格）

> ID：12864024
> 
> 赞同：0
> 
> 时间：2012-10-12T17:14:24.580
> 
> 标签：javascript, jquery, html, css

我想模仿 Facebook 的确切评论功能。例如，当我输入的句子超出文本框中的宽度空间量（或输入换行符）时，文本框应降低一行以容纳新行。

*在图片中：*

**情况1**

![案例 1 图片](../Images/c2b446297cfa3e8b95fa7389ed0be7a0.png)

我在文本框中键入一个句子，不超过可用宽度，因此文本框不会在下面创建新行。

**案例2**

![案例 2 图片](../Images/5158b43d7c69a576fe9ed5a68131ca6b.png)

我输入了 4 个句子，每个句子都有与之相关的换行符。文本框降低 1 行以容纳最后一句“例如”。

**案例3**

![案例 3 图片](../Images/9e59788e9dc6aebf35e0314e2ad5749d.png)

当我添加更多行时，文本框应该扩展更多空间以容纳新句子。

**案例4**

![案例 4 图片](../Images/0381d6dfef55250947b69183c4c449e6.png)

当我删除这些行时，文本框的大小应该变小以适应文本的减少。*案例 4 的图片可能看起来有点欺骗性，但最后一个空白行在那里，因为我的文本光标在那里。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:16:31.353

有很多 jQuery 插件可以实现这一点：

> *   [http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)
> *   [http://unwrongest.com/projects/elastic/](http://unwrongest.com/projects/elastic/)
> *   [http://jqueryui.com/resizable/#textarea](http://jqueryui.com/resizable/#textarea)

# delphi - 如何更正/移动 SRT (SubRip) 文件中的字幕时间？

> ID：12864047
> 
> 赞同：6
> 
> 时间：2012-10-12T17:15:34.300
> 
> 标签：delphi, shift, subtitle

如何向前和向后更正/移动字幕时间？字幕时间格式如下： `00:00:52,656 --> 00:00:56,326`

如果字幕和音频不同步，例如字幕出现在语音/音频之前，`00:00:52,656 --> 00:00:56,326`则应更正所有字幕行的时间（时间格式： ）。

因此，如果所有字幕行的时间必须更改/移动 2 秒。前进，那么，这次的字幕行：`00:00:52,656 --> 00:00:56,326`应该改为： `00:00:54,656 --> 00:00:58,326`。

而这里指的是字幕文件中的所有时间，而不仅仅是一行文字/一次。

* * *

SubRip (.srt) 文件的示例如下：

```
1
00:00:52,656 --> 00:00:56,326
Kanalska Zona: Panama

2
00:00:56,335 --> 00:00:59,755
Francuzi su pokušali da izgrade
kanal pre Amerikanaca. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T08:54:09.990

假设输入中每一行的格式始终为`00:00:00,000 --> 00:00:00,000`，则此例程将字符串时间转换为`TDateTime`，添加或减去移位，并重写该行：

```
procedure ShiftSubtitleTimes(Lines: TStrings; Diff: TTime);
var
  FS: TFormatSettings;
  I: Integer;
  T1: TDateTime;
  T2: TDateTime;
begin
  // Ensure using the correct time separator
  FS.TimeSeparator := ':';
  // Parse each line separately
  for I := 0 to Lines.Count - 1 do
  begin
    // Convert the two time strings to time values
    if not TryStrToTime(Copy(Lines[I], 1, 8), T1, FS) then
      // But skip line in case of wrong format
      Continue;
    T1 := T1 + StrToInt(Copy(Lines[I], 10, 3)) / MSecsPerDay;
    T2 := StrToTime(Copy(Lines[I], 18, 8), FS);
    T2 := T2 + StrToInt(Copy(Lines[I], 27, 3)) / MSecsPerDay;
    // Add the shift
    T1 := T1 + Diff;
    T2 := T2 + Diff;
    // Rewrite the line
    Lines[I] := FormatDateTime('hh:nn:ss,zzz --> ', T1, FS) +
      FormatDateTime('hh:nn:ss,zzz', T2, FS);
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  List: TStringList;
begin
  List := TStringList.Create;
  try
    List.LoadFromFile('Filename.dat');
    Memo1.Lines.Add('Input:');
    Memo1.Lines.AddStrings(List);
    Memo1.Lines.Add('');
    // Shift 3,5 seconds backwards:
    ShiftSubtitleTimes(List, -3.5 / SecsPerDay);  
    Memo1.Lines.Add('Output:');
    Memo1.Lines.AddStrings(List);
  finally
    List.Free;
  end;
end; 
```

![在此处输入图像描述](../Images/75a6615e09365edd482f73899d6d8145.png)

**编辑：**

由于您的编辑，现在输入可能包含不需要转换的“错误”行。

# c# - Why is MigraDoc generating a blank pdf in my asp.net application?

> ID：12864051
> 
> 赞同：1
> 
> 时间：2012-10-12T17:15:49.910
> 
> 标签：c#, asp.net, pdfsharp, migradoc

I have the following code in my attempts to create a PDF:

```
 public static MemoryStream Test()
    {
        var document = new Document();
        document.Info.Title = "Test Report";
        document.Info.Subject = "blah";
        document.Info.Author = "Me";
        //new CoverPageSummarySection().AddToDocument(document, new int[0], 2004);

        Style style = document.Styles["Normal"];
        style.Font.Name = "Times New Roman";
        style = document.Styles["Heading1"];
        style.Font.Name = "Tahoma";
        style.Font.Size = 14;
        style.Font.Bold = true;
        style.Font.Color = Colors.DarkBlue;
        style.ParagraphFormat.PageBreakBefore = true;
        style.ParagraphFormat.SpaceAfter = 6;

        var section = document.AddSection();
        var p = section.AddParagraph("test");
        p.AddText("Testing 1234");

        var renderer = new PdfDocumentRenderer(true, PdfSharp.Pdf.PdfFontEmbedding.Always);
        renderer.Document = document;
        renderer.RenderDocument();

        var ms = new MemoryStream();
        renderer.PdfDocument.Save(ms, false);
        return ms;
    } 
```

The resulting pdf is blank. I can view the properties and the `document.Info` fields are showing correctly in my PDF, but I can't see any text on my page.

What am I doing wrong?

* * *

**Edit:** So it appears that the issue has something to do with saving to a memory stream. When I replace `renderer.PdfDocument.Save(ms, false);` to `renderer.PdfDocument.Save("e:\\test.pdf");` it saves it correctly at test.pdf.

My code to save the memory stream to the asp.net output is:

```
 var stream = TestReportGen.Test();

        // Set the content headers
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.Buffer = true;
        HttpContext.Current.Response.ContentType = "application/pdf";
        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=testReport.pdf");

        stream.WriteTo(HttpContext.Current.Response.OutputStream);
        stream.Close();

        HttpContext.Current.Response.End(); 
```

Is the issue with how I'm sending back the memorystream or what?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T01:12:59.857

假设您有一个有效的 MigraDoc 文档，以下应该可以工作：

```
PdfDocumentRenderer renderer = new PdfDocumentRenderer(true, PdfFontEmbedding.Always);
renderer.Document = document;
renderer.RenderDocument();

// Send PDF to browser
MemoryStream stream = new MemoryStream();
renderer.PdfDocument.Save(stream, false);
Response.Clear();
Response.ContentType = "application/pdf";
Response.AddHeader("content-length", stream.Length.ToString());
Response.BinaryWrite(stream.ToArray());
Response.Flush();
stream.Close();
Response.End(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:59:54.167

我与流有关的大部分问题都通过`Seek(0, SeekOrigin.Begin)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:29:35.717

我不是 ASP.NET 专家，但 PDFsharp 包含一个工作 Web 服务器示例：
[http ://www.pdfsharp.net/wiki/Clock-sample.ashx](http://www.pdfsharp.net/wiki/Clock-sample.ashx)

我不知道是否是失踪`content-length`造成了差异。

`Seek(0, SeekOrigin.Begin)`早期版本的 PDFsharp 缺少，但在当前版本中自动完成。

# android - Android 应用要求在 Flash Builder 4.6 上强制关闭模拟器

> ID：12864056
> 
> 赞同：2
> 
> 时间：2012-10-12T17:16:05.043
> 
> 标签：android, android-emulator, flash-builder

我是 Android 应用程序开发和使用 Flash Builder 4.6 的新手。我的应用程序在桌面上运行良好，但在模拟器中安装应用程序并尝试打开它后，我得到`The application process air.nameofapp has stopped unexpectedly. Please try again`. 在调试模式下，我没有看到任何错误，但是一旦我收到上述错误，我会在 Logcat 中看到以下内容：

```
10-12 17:07:17.019：E/dalvikvm(452)：找不到类 'com.adobe.air.AIRWindowSurfaceView$2'，引用自方法 com.adobe.air.AIRWindowSurfaceView.DoSetOnSystemUiVisibilityChangeListener
10-12 17:07:17.688：E/AndroidRuntime(452)：致命异常：主要
10-12 17:07:17.688: E/AndroidRuntime(452): java.lang.UnsatisfiedLinkError: nativeOnFormatChangeListener
10-12 17:07:17.688: E/AndroidRuntime(452): at com.adobe.air.AIRWindowSurfaceView.nativeOnFormatChangeListener(Native Method)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 com.adobe.air.AIRWindowSurfaceView.surfaceChanged(AIRWindowSurfaceView.java:683)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.SurfaceView.updateWindow(SurfaceView.java:549)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.View.draw(View.java:6883)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.SurfaceView.draw(SurfaceView.java:334)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewGroup.drawChild(ViewGroup.java:1646)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.View.draw(View.java:6883)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.widget.FrameLayout.draw(FrameLayout.java:357)
10-12 17:07:17.688: E/AndroidRuntime(452): at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewRoot.draw(ViewRoot.java:1522)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.os.Handler.dispatchMessage(Handler.java:99)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.os.Looper.loop(Looper.java:123)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 android.app.ActivityThread.main(ActivityThread.java:3683)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 java.lang.reflect.Method.invokeNative(Native Method)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 java.lang.reflect.Method.invoke(Method.java:507)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-12 17:07:17.688: E/AndroidRuntime(452): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-12 17:07:17.688: E/AndroidRuntime(452): at dalvik.system.NativeStart.main(Native Method)

```

# sql-server - SQL Server 2005 PIVOT 语法错误

> ID：12864058
> 
> 赞同：0
> 
> 时间：2012-10-12T17:16:10.877
> 
> 标签：sql-server, tsql, sql-server-2005

我收到以下错误

消息 156，级别 15，状态 1，第 10 行 关键字“SELECT”附近的语法不正确。消息 102，级别 15，状态 1，第 10 行 ')' 附近的语法不正确。

当我运行以下查询时

```
 SELECT TOP 100 *
FROM
(
SELECT [TimeStamp],[MeterID],[Value]
FROM access_AMIData) AS source
PIVOT
(
SUM(Value)
FOR MeterID IN (SELECT MeterNumber FROM access_tblFcppPvMeterList)
) as pvt
ORDER BY TimeStamp 
```

此行附带错误：

```
FOR MeterID IN (SELECT MeterNumber FROM access_tblFcppPvMeterList) 
```

如果我将此行更改为：

```
FOR MeterID IN (1,2,3,4) 
```

它工作得很好......我如何在 IN 中指定一个选择查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:18:59.333

您不能，至少在 SQL 2005 中不能。您可以将其包含在内部查询的 WHERE 子句中，但您必须对列名进行硬编码，除非您当然使用动态 SQL。

# wpf - 我们可以通过 LAN 上的访问 Db 共享 Silverlight 应用程序吗

> ID：12864059
> 
> 赞同：2
> 
> 时间：2012-10-12T17:16:13.420
> 
> 标签：wpf, silverlight, ms-access, lan, silverlight-oob

我正在开发小型学院管理系统作为我学院的一个学术项目。我打算在silverlight 4或5中开发项目。在这个项目中，我想提供出勤设施；即学生将能够从他们各自连接到局域网的机器上登录应用程序。将没有可用的互联网连接。

我可以开发这个应用程序吗

```
1.How can I achive this?
2\. should I use silverlight out of browser app or simple silverlight app
3\. Is there any way to achive this using WPF? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:19:57.597

经过一番研究，我发现了这个概念`Intranet`，它应该可以解决我共享源代码和数据库的问题。

关于应该使用什么技术：

*   最好在 Silverlight 中开发此应用程序，因为它只是 WPF 的一个子集。
*   从这两种技术开始开发应用程序更好，因为我可以对这两种技术使用相同的 XAML，而几乎没有或根本没有变化。

在 WPF 中连接到数据库将比在 Silverlight 中更简单，因为后者不直接连接到数据库并且需要服务来实现这一点。即使在 php.ini 中，也可以使用 WCF 或 Ria 服务编写此服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:16:28.070

@Ash，Silverlight 可以面向桌面，与 WPF 相同。在某些方面需要注意的是，Silverlight 被简化为使用 Web 服务通信，就像 Adob​​e Flash 一样。

WPF 更面向非Internat（即Intranet/LAN）连接，但几乎使用与Silverlight 相同的.Net 框架。

尽管 Silverlight 比 WPF 更独立于平台，但它们的操作方式相同。

您可以使用 Silverlight 应用程序并将其转换为 WPF，而对代码库几乎没有更改（取决于应用程序的复杂性）。

WPF 优于 Silverlight 的一个好处是能够利用 Click-Once 部署和版本控制。尽管您可以实现 Click-Once 样式的 Silverlight 部署，但它与桌面应用程序的大多数 Click-Once 部署模型的工作方式不同。

我希望这可以帮助你。

# mercurial - 如何从其他 repo 中提取和合并特定文件夹、文件

> ID：12864062
> 
> 赞同：0
> 
> 时间：2012-10-12T17:16:21.743
> 
> 标签：mercurial

我有几个问题，我会感谢你的帮助：

1.  说，我需要将另一个仓库中的特定文件夹合并到我的仓库/工作目录中。我该怎么做？

2.  如果我拉另一个回购然后合并。之后，意识到这不起作用，所以我称之为'hg update -C'。这是否从我从另一个我发布的 repo 中提取的更改中清除了我的 repo，这不是我需要的？

3.  我可以做一个悲观的合并，它只添加和更新，但不删除？

感谢您帮助学习 Mercurial

玛戈兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:51:04.330

1.  我只会从其他仓库复制所需的文件和文件夹并提交它们。从技术上讲，你可以做你想做的合并，但这是一个手动的、容易出错的、挑剔的过程。
2.  如果您尚未提交合并`update -C`将放弃合并。做得到你`update -C <myVersion>`想要的特定版本。
3.  这将是一个混乱的过程（见 1.），我不会打扰。如果有问题，您可以随时将文件恢复到以前的版本。

# login - Cloudfoundry 登录问题

> ID：12864064
> 
> 赞同：0
> 
> 时间：2012-10-12T17:16:25.390
> 
> 标签：login, cloud-foundry, vmc

我刚刚在 cloudfoundry 注册了一个帐户，并收到了一封带有密码的确认电子邮件。

安装 vmc 后，我 vmc 目标为 api.cloudfoundry.com 并验证。

然后我尝试使用 $vmc login 登录，但收到此错误。

```
**source '<oauth><error_descri' not in JSON!, try again or register for an account** 
```

所以，我多次重置密码，但仍然收到相同的错误。此外，密码在我想要 dl micro cloud Foundry 的网站上也不起作用。

有谁知道为什么？

**更新**使用了不同的电子邮件并且连接正常。奇怪的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:13:56.830

在 vmc login 命令的末尾添加一个额外的**-t选项。**这将向您显示请求/响应标头和响应 json。

# java - Java-集合搜索

> ID：12864068
> 
> 赞同：0
> 
> 时间：2012-10-12T17:16:42.673
> 
> 标签：java, collections

我有一个可变长度的集合，其中包含一个字母字符串（它可以是任何类型的集合）。我正在尝试根据集合包含的内容创建结果。如果集合中的所有字母都是“P”，则结果为“P”，如果所有字母均为“N”，则结果为“N”，如果两者混合，则结果为“数控”。有没有办法在不产生复杂的循环混乱的情况下做到这一点？感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:20:24.720

是的，您可以使用：

```
Collections.frequency(f, "N"); 
```

像这样：

```
String n = "N";      
Collection f = new ArrayList();
f.add(n);
f.add(n);
f.add(n);
f.add(n);
System.out.println(Collections.frequency(f, n)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:23:21.117

您可以将集合转换为集合，然后每个元素只会出现一次，并且您可以遍历集合以收集每个条目的单个实例（即，集合中的元素将在集合中仅出现一次）。

我相信

`Set newSet = new HashSet(existingCollection)`

将为此工作

# printing - lua重载表__tostring函数

> ID：12864072
> 
> 赞同：1
> 
> 时间：2012-10-12T17:16:59.353
> 
> 标签：printing, lua

我有一个简单的问题：我想让`print`lua 中的函数打印表的内容，而不仅仅是单词“表”和内存地址。例如：

```
> tab = {}
> tab[1]="hello"
> tab[2]="there"
> 
> print(tab)
table: 0x158ab10
--should be 
1   hello
2   there 
```

我知道我可以通过执行以下操作来获得这种效果：

```
for i,v in pairs(tab) do print(i,v) end 
```

但我希望它只是在我执行时发生，`print(tab)`而不是每次都写出一个循环。可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:21:23.070

您需要在您创建的每个表上设置 __tostring()。一种更简单的方法是使用漂亮的印刷技术。

请参阅此链接： http: [//lua-users.org/wiki/TableSerialization](http://lua-users.org/wiki/TableSerialization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:41:49.153

您可以通过覆盖全局`tostring()`函数来做到这一点。这就是`print()`它的论点。

如果您不想进行任何编码，请尝试 Steve Donovan 的[Microlight](https://github.com/stevedonovan/Microlight)库。您可以按如下方式使用它：

```
tostring = require "ml".tstring
tab = {"abc", 3.14, print, key="value", otherkey={1, 2, 3}}
print(tab) --> {"abc",3.14,function: 0x7f5a40,key="value",otherkey={1,2,3}} 
```

# system.reactive - 为什么在 RX 的 BehaviorSubject 中命名为“行为”？

> ID：12864073
> 
> 赞同：29
> 
> 时间：2012-10-12T17:17:02.123
> 
> 标签：system.reactive

我很好奇，为什么你认为他们在 Ractive Extensions 中为 BehaviorSuject 对象使用了“行为”这个名称？

注意：行为主体将最后一个值（或初始值）作为第一个值返回给任何订阅者。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-14T07:38:09.893

在**函数式反应式编程**的世界中，*行为*是随时间变化的值。这正是一个 BehaviorSubject 所代表的：当你订阅时，你会得到当前的值，然后你可以继续观察变化。请参阅[http://en.wikipedia.org/wiki/Functional_reactive_programming](http://en.wikipedia.org/wiki/Functional_reactive_programming)。

# jquery - Jquery点击一个div显示这个，点击除了这个隐藏div之外的任何地方？

> ID：12864079
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:17:26.570
> 
> 标签：jquery, click, hide, show

我有两个 div，第一个是隐藏的（真实的），第二个是显示的（假的）。

问题：点击 1st div hide 1st div, show 2nd div 然后点击 document.body except 2nd div > hide 2nd div, show 1st div ？

这里是：

```
$(".fake").click(function () {
    $(".fake").hide();
    $(".real").show();
});
$(document.body).click.**except(".real")**.(function () {
    $(".fake").show();
    $(".real").hide();
}); 
```

像这样 :D 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:19:58.387

```
$(document.body).not(".real").click.(function () {
    $(".fake").show();
    $(".real").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:23:20.817

你也可以使用`event.target`：

```
$(document.body).click(function (e) {
    if (e.target.is('.real')) { return false; }
    $(".fake").show();
    $(".real").hide();
}); 
```

# php - 递归正则表达式不起作用

> ID：12864081
> 
> 赞同：4
> 
> 时间：2012-10-12T17:17:57.327
> 
> 标签：php, regex

我处理的字符串如下所示：

```
abc {def ghi {jkl mno} pqr stv} xy z 
```

我需要把括号中包含的数字放在标签中，所以它应该看起来像这样

```
abc <tag>def ghi <tag>jkl mno</tag> pqr stv</tag> xy z 
```

我试过了

```
'#(?<!\pL)\{  ( ([^{}]+) | (?R) )*  \}(?!\pL)#xu' 
```

但我得到的只是`<tag>xy z</tag>`。请帮忙，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:31:10.993

根据定义，嵌套结构对于正则表达式来说太复杂了（是的，PCRE 支持递归，但这对这个替换问题没有帮助）。您有两种可能的选择（无论如何使用正则表达式）。首先，您可以简单地通过打开标签替换左括号，关闭标签也是如此。但是，这也会转换不匹配的括号：

```
$str = preg_replace('/\{/', '<tag>', $str);
$str = preg_replace('/\}/', '</tag>', $str); 
```

另一种选择是只替换匹配的`{`and `}`，但是你必须重复这样做，因为一次调用`preg_replace`不能替换多个嵌套级别：

```
do
{
    $str = preg_replace('/\{([^{]*?)\}/', '<tag>$1</tag>', $str, -1, $count);
}
while ($count > 0) 
```

**编辑：**虽然 PCRE 支持递归，`(?R)`但这很可能无助于替换。原因是，如果一个捕获组被重复，它的引用将只包含最后一个捕获（即当匹配`/(a|b)+/`in时`aaaab`，`$1`将包含`b`）。我想这对于递归是一样的。这就是为什么你只能替换最里面的匹配，因为它是递归中捕获组的最后一个匹配。同样，您不能尝试使用递归捕获`{`并`}`替换它们，因为它们也可能匹配任意次数，并且只会替换最后一个匹配项。

Just matching a correct nested syntax and then replacing the innermost or outermost matching brackets will not help either (with one `preg_replace` call), because multiple matches will never overlap (so if 3 nested brackets have been found, the inner 2 brackets themselves will be disregarded for further matches).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:23:10.643

两个步骤怎么样：

`s!{!<tag>!g;`
`s!}!</tag>!g;`

（perl 格式；根据需要转换为您的格式）

或者这个：

`1 while s!{([^{}]*)}!<tag>$1</tag>!g;`

# php - MySql 更新查询有效，但在 php 中无效

> ID：12864085
> 
> 赞同：0
> 
> 时间：2012-10-12T17:18:39.087
> 
> 标签：php, mysql, sql-update

当我将下面的 UPDATE Query 放入 Workbench 时，它工作得很好，但是当我尝试通过 php 运行它时它什么也不做？有任何想法吗？

我已经尝试了表结构，`TURNOVERSCORE`因为 varchar(100) 和 Float，table1.item 和 t2.item 是主键。

使用 mysql_error 时提供错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'UPDATE table1 JOIN (SELECT count(*) as cnt, ITEM FROM table2 WHERE' 附近使用正确的语法

```
$con = mysql_connect("localhost","username","pw");
$turnoverquery = "UPDATE table1 
JOIN (SELECT count(*) as cnt, item FROM table2 WHERE table2.TRANS_DATE BETWEEN DATE_SUB(CURDATE(), INTERVAL 365 DAY) AND CURDATE() GROUP BY item) t2 
ON table1.item = t2.item

SET table1.TURNOVERSCORE=CASE
WHEN t2.cnt/12 < 1 AND table1.CAT = 'E' THEN .05
WHEN t2.cnt/12 >= 1 AND t2.cnt/12 < 4 AND table1.CAT = 'E' THEN .5
WHEN (t2.cnt/12) >= 4 AND table1.CAT = 'E' THEN 1
WHEN (t2.cnt/12) <= 5 AND table1.CAT != 'E' THEN .05
WHEN (t2.cnt/12) >= 6 AND (t2.cnt/12) < 11 AND table1.CAT != 'E' THEN .25
WHEN (t2.cnt/12) >= 11 AND (t2.cnt/12) < 21 AND table1.CAT != 'E' THEN .5
WHEN (t2.cnt/12) >= 21 AND table1.CAT != 'E' THEN 1 END";

mysql_query($turnoverquery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:37:57.363

你的括号不匹配。您`GROUP BY ITEM)`在子查询中有两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:11:05.960

php 查询要求我识别数据库，（当然）。在 Workbench 中，一旦您的数据库被选中，您就不需要添加`db.tablename`到查询中，而如果您尚未使用连接字符串标识它，则必须在 php 中添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:59:25.093

只是将我的评论转换为 answer 。

执行前需要选择DB，或者将数据库添加到表名中。

# ios - 减少 UIButton 的触控区域

> ID：12864093
> 
> 赞同：3
> 
> 时间：2012-10-12T17:19:01.007
> 
> 标签：ios, cocoa-touch, ios5

我正在尝试减少 UIButton 的触摸区域。这甚至可能吗？当用户触摸按钮并将其触摸拖到按钮外时，触摸事件应在按钮图形结束时立即停止。不幸的是，该区域比实际图形大得多。我发现了很多关于如何增加面积而不是如何缩小面积的事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:08:37.247

我想出了一个解决方案。您可以子类化`UIButton`和覆盖`touchesMoved:`，以便它识别触摸在按钮之外时要结束。这是我的片段。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch * touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self];

    if(!CGRectContainsPoint(self.bounds, touchPoint))
    {
        [super touchesEnded:touches withEvent:event];
    }
    else
    {
        [super touchesMoved:touches withEvent:event];
    }
} 
```

这样做的缺点是，如果您离开按钮并再次返回，按钮将不会变为活动状态。但除此之外，我认为它应该可以正常工作。

# javascript - 我可以在 URL 中不添加 '?callback=' 参数的情况下发出 jQuery JSONP 请求吗？

> ID：12864096
> 
> 赞同：8
> 
> 时间：2012-10-12T17:19:07.343
> 
> 标签：javascript, jquery, ajax, cross-domain, jsonp

服务器不会接受请求 URL 中的任何参数，因此我需要删除 URL 中的所有额外参数，当然我无法控制服务器。

jQuery：

```
$.ajax({
    type: 'GET',
    url: 'http://cross-domain.com/the_jsonp_file,
    jsonpCallback: 'jsonCallback',
    contentType: 'application/json',
    cache: 'true',
    dataType: 'jsonp',
    success: function(json) {
        console.log(json);
    },
}); 
```

JSONP 文件：

```
jsonCallback({"test": "hello"}); 
```

当我发送该 Ajax 请求时，URL 如下所示：

```
http://cross-domain.com/the_jsonp_file?callback=jsonCallback 
```

但我需要这个（不带参数）：

```
http://cross-domain.com/the_jsonp_file 
```

**编辑：**

这是我的整个情况：

```
function MyClass(imgs) {
    // imgs is array of URLs
    this.imgs = imgs;

    this.submit = function() {
        // button click event triggers this method
        this._show();
    };

    this._show = function() {
        var _this = this;

        for (var i = 0; i < _this.imgs.length; i++) {
            (function($, j) {
                $.ajax({
                    type: 'GET',
                    url: _this.imgs[j],
                    jsonp : false,
                    jsonpCallback: 'jsonCallback',
                    cache: 'true',
                    dataType:'jsonp',
                    success: function(json) {
                      console.log(_this.imgs[j]);
                    },
                });
            })(jQuery, i);
        };
    };
}; 
```

我收到了这个错误信息：

```
Uncaught TypeError: Property 'jsonCallback' of object [object Window] is not a function 
```

奇怪的是很少有请求成功调用 jsonCallback。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T17:28:18.600

检查 jQuery 文档 - 他们说 jsonp: false 和 jsonpCallback : 'callbackFunction' 在 ajax args ......就像：

```
$.ajax({
    url: 'http://cross-domain.com/the_jsonp_file',
    jsonp : false,
    jsonpCallback: 'jsonCallback',
    // contentType: 'application/json', -- you can't set content type for a <script> tag, this option does nothing for jsonp | KevinB
    cache: 'true',
    dataType : 'jsonp'
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:24:37.140

每个请求都调用相同的回调`jsonCallback`，所以我认为这就是问题所在。

首先，文档中的 Javascript：

```
<script type="text/javascript">
    new Gallery([
        ['http://cross-domain.url/whatever', '27b2afa5c77c2510'],
        ['http://cross-domain.url/whatever', '13df51b2f2801bc1'],
        ['http://cross-domain.url/whatever', '4de326fc9a2c5a24'],
        ['http://cross-domain.url/whatever', '60c266a73ba699bc'],
        ['http://cross-domain.url/whatever', '3db01e95aaf2b9f2'],
        ['http://cross-domain.url/whatever', '94eb17f9b0e1be9c'],
        ['http://cross-domain.url/whatever', 'ca8c5c3c0b8cd5ae'],
        ['http://cross-domain.url/whatever', '6b0f5c5737ee88fd'],
        ['http://cross-domain.url/whatever', '318d8ebb51a97a15'],
        ['http://cross-domain.url/whatever', 'f5028c8b62e81a8b'],
    ]);
</script> 
```

客户端将 JSONP 文件（只是另一个 Javascript 文件）上传到服务器，如下所示：

```
jsonCallback_27b2afa5c77c2510({"test": "hello"}); 
```

**之后添加随机十六进制字符串`jsonCallback_`来分隔每个请求，就像 jQuery 的默认回调一样。**

从输入中读取随机十六进制字符串并设置为`jsonpCallback`：

```
function Gallery(imgs) {
    // imgs is array of URLs
    this.imgs = imgs;

    this.submit = function() {
        // button click event triggers this method
        this._show();
    };

    this._show = function() {
        var _this = this;

        for (var i = 0; i < _this.imgs.length; i++) {
            (function($, j) {
                $.ajax({
                    type: 'GET',
                    url: _this.imgs[j][0],
                    jsonp : false,
                    jsonpCallback: 'jsonCallback_' + _this.imgs[j][1],
                    cache: 'true',
                    dataType:'jsonp',
                    success: function(json) {
                      // Process
                      console.log(json.test);
                    },
                });
            })(jQuery, i);
        };
    };
}; 
```

谢谢@Adam @Kevin B @Dcullen 和大家！:D

ps：我输入了上面的每个来源，例如，它可能不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:42:55.343

JSONP 需要回调作为 URL 的一部分。我会根据您正在访问的服务器不支持 JSONP 的描述猜测。

jQuery 向您的文档添加一个脚本标签，添加该标签后会运行 API 请求，响应会调用您代码中的回调函数（这是为了简化它）。

如果您想要更准确的描述，可以查看 Wikipedia。 [http://en.wikipedia.org/wiki/JSONP#How_it_works](http://en.wikipedia.org/wiki/JSONP#How_it_works)

# c# - 是否可以通过序列化将属性应用于对象？

> ID：12864102
> 
> 赞同：2
> 
> 时间：2012-10-12T17:19:30.367
> 
> 标签：c#, asp.net-mvc, serialization

我在我们的服务器解决方案中有一个枚举值：

```
public enum TaskStatus
{
    //Description attribute modifies how an Enum's label is displayed when displayed via MVC.
    [Description("Draft")]
    Draft = 1,
    [Description("Being Planned")]
    BeingPlanned = 2,
    [Description("Waiting For Change")]
    WaitingForChange = 3,
    [Description("In Progress")]
    InProgress = 4,
    [Description("Waiting For Customer Information")]
    WaitingCustomerInformation = 5,
    [Description("Cancelled")]
    Cancelled = 6,
    [Description("Completed")]
    Completed = 7
}; 
```

此枚举值被序列化并作为 WCF 服务引用传递给客户端。

然后我在模型中显示 Enum 值。然而，我注意到在序列化/反序列化过程中，Description 属性已被删除。

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.450")]
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.cormant.com/cswebapi")]
public enum TaskStatus {

    /// <remarks/>
    Draft,

    /// <remarks/>
    BeingPlanned,

    /// <remarks/>
    WaitingForChange,

    /// <remarks/>
    InProgress,

    /// <remarks/>
    WaitingCustomerInformation,

    /// <remarks/>
    Cancelled,

    /// <remarks/>
    Completed,
} 
```

我仍然希望能够描述我的枚举应该如何显示给最终用户。是否有可能做到这一点？反序列化后可以重新应用属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:33:21.187

据我所知，您不能通过包含 WCF 服务参考的代码生成过程将属性传输给客户端。无法在客户端获取属性。

在为一个项目工作时，我做了一个非常有效的技巧。我在 Client 项目中将该 Enum 文件添加为参考文件（添加为链接），如下所示：

![在此处输入图像描述](../Images/bac6e5879ab2801d3d7234bd0ca2428b.png)

这样，您可以在客户端拥有带有 Description 属性的 Enum 副本。如果您尝试更改它，您实际上是在更改服务器枚举文件，因为它是一个参考文件，但神奇的是我将在构建过程中作为您的客户端项目的一部分进行编译。这确实是一个很好的解决方法。

希望对你有帮助 ：）

# c++ - 移动函数体，避免完全克隆

> ID：12864106
> 
> 赞同：2
> 
> 时间：2012-10-12T17:19:45.897
> 
> 标签：c++, optimization, llvm, cloning

[这是此](https://stackoverflow.com/q/5369790/170521)问题的后续问题。

我使用`llvm::CloneFunctionInto`defined in`llvm/Transforms/Utils/Cloning.h`是为了在代码生成后使用从返回值的类型推断出的正确签名来创建一个新函数。这很好用，但速度很慢

我正在尝试通过某种方式对其进行优化，以将功能体从旧功能移动或转移到新功能，是否有实用程序？

我试图通过查看[CloneFunctionInto 中的代码](http://llvm.org/docs/doxygen/html/CloneFunction_8cpp_source.html)来破解一种进行传输的方法，但想看看是否存在现有函数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-11T21:12:08.747

无耻地从[Arg Promotion 通行证](http://llvm.org/docs/doxygen/html/ArgumentPromotion_8cpp_source.html)中窃取（搜索 splice）：

```
// Since we have now created the new function, splice the body of the old
// function right into the new function, leaving the old rotting hulk of the
// function empty.
NF->getBasicBlockList().splice(NF->begin(), F->getBasicBlockList()); 
```

`NF`您要克隆的新函数在哪里，并且`F`是您刚刚克隆的旧函数。

# ios - UIActivityIndi catorView 出现在屏幕截图中的问题

> ID：12864112
> 
> 赞同：0
> 
> 时间：2012-10-12T17:20:05.667
> 
> 标签：ios, uiactivityindicatorview

因此，我有一个页面，其中包含一个包含名称的 tableview，我想截屏并使用 airprint 打印。不幸的是，如果我尝试添加那个很酷的小活动指示器微调器，他就会出现在屏幕截图中！非常不可接受。但重点是让他在应用程序忙于截屏时旋转。（有时因为多页而多次拍摄，需要十秒钟左右）有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:43:34.023

根据您截取屏幕截图的方式...如果您使用的是renderInContext，只需在绘制之前进行测试以确保当前视图不是activityIndi​​cator（因此不会绘制旋转的东西）。

# c++ - RInside 分段错误和链接问题

> ID：12864113
> 
> 赞同：0
> 
> 时间：2012-10-12T17:20:10.103
> 
> 标签：c++, r, rinside

我正在尝试通过 RInside 从 linux 上的 c++ 调用 R，我使用 gcc 版本 4.5.3 (Debian 4.5.3-1) 从源代码编译 R-2.15.1，我没有使用 apt-get 的 sudo 权限安装。我正在使用 OpenBlas 和系统优化的 lapack。blas 和 lapack 库适用于许多 scalapack 应用程序

我安装了 R

```
./configure --with-blas="-I/lib/OpenBLAS-v0.2.3-0/xianyi-OpenBLAS-48f075c/install/include -L/lib/OpenBLAS-v0.2.3-0/xianyi-OpenBLAS-48f075c/install/lib -lopenblas -lgfortran" --with-lapack="/usr/lib/liblapack.so -lgfortran" --enable-BLAS-shlib=yes --enable-R-shlib --enable-R-static-lib --prefix= . 
```

它安装并运行良好，我运行 make check 没有错误，所有软件包（Rcpp 和 RInside）也安装良好..

但是，当我使用给定的 RInside 时`makefile`，编译的基本 hello world 示例`/standard/rinside_sample0.cpp`！但它没有运行，我收到以下错误

```
./rinside_sample0: error while loading shared libraries: libRblas.so: cannot open shared object file: No such file or directory 
```

该文件`libRblas.so`存在并且在`R/lib`文件夹中，

当我尝试使用 g++ 命令手动链接它时，make 文件创建或链接如下，我得到一个分段错误

```
/R/lib/libRblas.so ./hello_world
Segmentation fault 
```

编辑：继承人示例 make 文件如何尝试编译示例，（编译良好）但不会运行上述丢失的`libRblas.so`错误

```
g++ -I/nfs/user03/jimmie21/libs/lib64/R/include -I/nfs/user03/jimmie21/libs/lib64/R/library/Rcpp/include -I/nfs/user03/jimmie21/libs/lib64/R/library/RInside/include -g -O2 -Wall -I/usr/local/include   hello_world.cpp  -L/nfs/user03/jimmie21/libs/lib64/R/lib -lR  -L/nfs/user03/jimmie21/libs/lib64/R/lib -lRblas -L/nfs/user03/jimmie21/libs/lib64/R/lib -lRlapack -L/nfs/user03/jimmie21/libs/lib64/R/lib -lRblas -L/nfs/user03/jimmie21/libs/lib64/R/library/Rcpp/lib -lRcpp -Wl,-rpath,/nfs/user03/jimmie21/libs/lib64/R/library/Rcpp/lib -L/nfs/user03/jimmie21/libs/lib64/R/library/RInside/lib -lRInside -Wl,-rpath,/nfs/user03/jimmie21/libs/lib64/R/library/RInside/lib -o hello_world 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:44:16.257

几件事：

1.  请提供可重复的示例

2.  您有非标准设置

3.  使用 1) 中的脚本，在标准设置上尝试它，因为这就是 Rcpp / RInside 开发和测试的方式（在 Ubuntu / Debian 上）

4.  Rcpp 测试套件现在包含来自大约 350 个单元测试功能的近 800 个单元测试。这些没有 seg.fault，所以问题出在你的最后。同样，RInside 在四个`examples/`子目录中有几十个示例。这也有效。

这可能就像调整 Makefile / Makevars 文件一样简单，以确保在所有情况下都能获得您的库。但我们不能说，因为这里没有可重现的东西。

*编辑* 如果你想链接，`libRblas.so`那么你有一个*完全*非标准的设置作为 Debian / Ubuntu 的 R 包，因为使用外部 BLAS。同样，不是 RInside 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:12:12.450

我通过将 R 安装路径库添加`../R/lib:`到开头来解决问题，`LD_LIBRARY_PATH`之后所有示例都编译并运行良好

# android - android 如何在屏幕上的特定位置显示图像

> ID：12864118
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:20:47.717
> 
> 标签：android

我正在开发一个远程桌面应用程序，所以我正在从流中读取图像数据并将其显示在 android 设备上。所以有什么方法可以在屏幕上的特定位置显示图像。可能在特定的 x，y设备上的坐标位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:35:40.360

您可以使用[AbsoluteLayout](http://developer.android.com/reference/android/widget/AbsoluteLayout.html)在特定的 x,y 坐标处显示。

[您可以在此处](http://www.androidaspect.com/2012/02/absolute-layout-tutorial-android-ui.html)和[此处](http://start-jandroid.blogspot.in/2011/01/android-buttonandroid-button.html)找到`AbsoluteLayout`示例

但是我真的不推荐使用它。这是文档所说的`AbsoluteLayout`：

一种布局，可让您指定其子项的确切位置（x/y 坐标）。与没有绝对定位的其他类型的布局相比，绝对布局更不灵活且更难维护。

我宁愿使用 a`RelativeLayout`并指定边距，例如`layout_marginTop`并`marginLeft`以密度像素 (dp) 指定图像位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:30:36.333

使用`RelativeLayout`.

[在此处](http://developer.android.com/reference/android/widget/RelativeLayout.html)查看文档

# c# - 需要硬编码密码

> ID：12864120
> 
> 赞同：2
> 
> 时间：2012-10-12T17:20:53.160
> 
> 标签：c#, winforms, encryption, passwords

我正在做这个应用程序，它取决于存储在 xml 文件中的设置。此文件应加密，其中的值由负责创建应用程序设置的人员提供，并用于根据用户安装的版本确定可用的功能选项。

我需要一种方法将硬编码的密码存储在我的软件中，以便能够在运行时解密该文件并读取其中的值以查看用户可以访问应用程序的哪些功能。

请记住，此文件不应被编辑，并作为软件的一部分提供。

我没有提供任何代码，因为它更多的是设计问题而不是编码问题。

我知道硬编码密码是愚蠢的，但我没有选择。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T17:36:16.683

如果您将应用程序提供给不值得信任的用户（即这是一个桌面应用程序，而不是在用户无法直接访问的 [ASP] 服务器上运行的代码），那么您无能为力。

如果您将代码提供给将解密配置文件的用户，那么他们将能够自己访问该文件。如果你投入时间/精力/金钱，你可以让它变得更难，甚至可能更难，但你不能让它变得不可能。以下是他们可以做的一些事情：

1.  反编译您的程序并查找`password = "12345"`代码行。
2.  监控程序的内存；查看它何时加载 XML 文件，并尝试在内存中找到它的解密版本。
3.  找到您读取解密的 XML 文件的代码部分，并相应地执行一些操作并更改代码，以便无论文件中的内容如何，​​它总是可以做任何他们想做的事情（基本上只是注释掉`if`检查）。

您可以做一些事情来使上述步骤更难（但并非不可能）包括：

1.  混淆你的代码。
2.  签署您的代码。
3.  做一些毫无意义的随机事情来试图混淆代码嗅探器（例如通过拥有 3 个文件来玩 shell 游戏，全部读取它们，全部解密它们，然后让其中的 2 个文件实际上没有被使用。
4.  将配置文件发送到您的 Web 服务进行解密，而不是在本地解密。（这可以通过嗅探网络以获取解密结果来解决）。
5.  拥有一个您可以查询的 Web 服务，以查看用户是否有权执行您想要的操作（同样，这可以通过嗅探/欺骗网络连接来解决）。

现在，有可能实际上阻止用户做“某事”，这取决于“某事”是什么，首先不给他们做这件事的代码。这些将（可能；如果编码正确）是牢不可破的：

1.  在服务器上完成工作。

    1.  拥有一个可以完成一些敏感工作的 Web 服务。桌面应用程序仅管理 UI 或其他非敏感任务。如果你这样做，用户只能破坏你给他们的代码。
    2.  使整个应用程序成为网站或其他基于服务器的应用程序（例如 MMORPGS），在没有服务器的情况下它根本无法运行；它几乎完成了所有敏感（和非敏感）的工作。

请注意，唯一*真正*的解决方案要求所有用户在使用该应用程序时都可以使用互联网连接；他们不能离线。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T17:26:54.110

```
internal const string XmlPassword = "This is more like security through "+
+"obfuscation than real security.  If it fits your purposes, cool, but you "+
+"might want to consider using real encryption, like public key encryption"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T17:42:16.870

一种方法是始终根据文件的某些哈希值加密设置文件。然后，您的软件可以使用与密钥相同的哈希值来解密文件。

所以你基本上会做以下事情：

1.  获取文件名（和/或文件的一些其他属性 - 大小，也许）
2.  计算文件名的哈希
3.  使用该哈希解密文件

并不是说这是一种好方法或我个人会在任何类型的生产软件中使用的方法，但至少您不依赖于代码中的纯文本或过度使用的字符串，它使您可以灵活地更改设置文件名并依赖于加密的约定。

同样，这可能只是“将密钥存储在源”解决方案之上的一步。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-12T18:05:06.193

如果我没看错 - OP 需要用某种类型的第 3 方软件包解密提供的文件（已经加密），并且他已经从软件的原始发布者那里获得了解密密码（密钥）。

我会做类似于itsmatt建议的事情，只是不加密文件，加密提供的密码，将加密的密码存储在您的配置文件中，然后在运行时读取和解密密码，并使用它来解密文件。

这样，您就不会在源代码中硬编码明文密码，以便轻松嗅出。通过将其保存在您的配置文件中，您可以在将来需要时轻松更改它。

回复评论：

我使用 AES256。

我使用这个类来 AES256 加密/解密：

```
#region Preprocessor Directives

# if __FRAMEWORK_V35 || __FRAMEWORK_V4
#define __DotNet35Plus
#endif

#if !__DotNet35Plus
#warning AES implementation used by this compile of the library is not NIST certified as FIPS 140-2 compliant
#endif

#endregion

#region Namespaces
using System;
using System.Security.Cryptography;
using System.IO;
using System.Text;
using System.Threading;
using System.Runtime.Serialization.Formatters.Binary;
#endregion

namespace Simple
{
    public static class AES256Encryption
    {
        private static readonly object _lock = new object();
        private const Int32 KeySize = 256;
#if __DotNet35Plus
        private static AesCryptoServiceProvider thisCSP = new AesCryptoServiceProvider();
#else
        private static RijndaelManaged thisCSP = new RijndaelManaged();
#endif
        private static MemoryStream msEncrypt = new MemoryStream();
        private static CryptoStream csEncrypt;
        private static MemoryStream msDecrypt = new MemoryStream();
        private static CryptoStream csDecrypt;

        public enum stringIOType
        {
            base64EncodedString = 0,
            HexEncodedString = 1
        }

        public static bool NISTCertified()
        {
#if __DotNet35Plus
            return true;
#else
            return false;
#endif
        }

        #region Encryption Methods
        public static byte[] encryptBytes(byte[] Value, string PassPhrase, Encoding PassPhraseEncoding)
        {
            try
            {
                Monitor.Enter(_lock);
                return encryptBytes(Value, getKeyFromPassPhrase(PassPhrase, PassPhraseEncoding), getIVFromPassPhrase(PassPhrase, PassPhraseEncoding));
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static byte[] encryptBytes(byte[] Value, byte[] Key, byte[] IV)
        {
            try
            {
                Monitor.Enter(_lock);
#if __DotNet35Plus
                thisCSP = new AesCryptoServiceProvider();
#else
                thisCSP = new RijndaelManaged();
#endif
                thisCSP.KeySize = KeySize;
                Int32 bitLength = Key.Length * 8;
                if (bitLength != thisCSP.KeySize)
                {
                    throw new ArgumentException("The supplied key's length [" + bitLength.ToString() + " bits] is not a valid key size for the AES-256 algorithm.", "Key");
                }
                bitLength = IV.Length * 8;
                if (bitLength != thisCSP.BlockSize)
                {
                    throw new ArgumentException("The supplied IV's length [" + bitLength.ToString() + " bits] is not a valid IV size for the AES-256 algorithm.", "IV");
                }
                ICryptoTransform Encryptor = thisCSP.CreateEncryptor(Key, IV);
                msEncrypt = new MemoryStream();
                csEncrypt = new CryptoStream(msEncrypt, Encryptor, CryptoStreamMode.Write);
                csEncrypt.Write(Value, 0, Value.Length);
                csEncrypt.FlushFinalBlock();
                Encryptor.Dispose();
                Encryptor = null;
                msEncrypt.Close();
                return msEncrypt.ToArray();
            }
            finally
            {
                thisCSP = null;
                Monitor.Exit(_lock);
            }
        }

        public static string encryptString(string Value, string PassPhrase, Encoding PassPhraseEncoding, Encoding inputEncoding, stringIOType outputType)
        {
            try
            {
                Monitor.Enter(_lock);
                return encryptString(Value, getKeyFromPassPhrase(PassPhrase, PassPhraseEncoding), getIVFromPassPhrase(PassPhrase, PassPhraseEncoding), inputEncoding, outputType);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static string encryptString(string Value, byte[] Key, byte[] IV, Encoding inputEncoding, stringIOType outputType)
        {
            try
            {
                Monitor.Enter(_lock);
                byte[] baseValue = (byte[])Array.CreateInstance(typeof(byte), inputEncoding.GetByteCount(Value));
                baseValue = inputEncoding.GetBytes(Value);
                switch(outputType)
                {
                    case stringIOType.base64EncodedString:
                        return Convert.ToBase64String(encryptBytes(baseValue, Key, IV));
                    case stringIOType.HexEncodedString:
                        return ByteArrayToHexString(encryptBytes(baseValue, Key, IV));
                    default:
                        return Convert.ToBase64String(encryptBytes(baseValue, Key, IV));
                }
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }
        #endregion

        #region Decryption Methods
        public static byte[] decryptBytes(byte[] Value, string PassPhrase, Encoding PassPhraseEncoding)
        {
            try
            {
                Monitor.Enter(_lock);
                return decryptBytes(Value, getKeyFromPassPhrase(PassPhrase, PassPhraseEncoding), getIVFromPassPhrase(PassPhrase, PassPhraseEncoding));
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static byte[] decryptBytes(byte[] Value, byte[] Key, byte[] IV)
        {
            try
            {
                Monitor.Enter(_lock);
#if __DotNet35Plus
                thisCSP = new AesCryptoServiceProvider();
#else
                thisCSP = new RijndaelManaged();
#endif
                thisCSP.KeySize = KeySize;
                Int32 bitLength = Key.Length * 8;
                if (bitLength != thisCSP.KeySize)
                {
                    throw new ArgumentException("The supplied key's length [" + bitLength.ToString() + " bits] is not a valid key size for the AES-256 algorithm.", "Key");
                }
                bitLength = IV.Length * 8;
                if (bitLength != thisCSP.BlockSize)
                {
                    throw new ArgumentException("The supplied IV's length [" + bitLength.ToString() + " bits] is not a valid IV size for the AES-256 algorithm.", "IV");
                }
                try
                {
                    byte[] Decrypted;
                    ICryptoTransform Decryptor = thisCSP.CreateDecryptor(Key, IV);
                    msDecrypt = new MemoryStream(Value);
                    csDecrypt = new CryptoStream(msDecrypt, Decryptor, CryptoStreamMode.Read);
                    Decrypted = (byte[])Array.CreateInstance(typeof(byte), msDecrypt.Length);
                    csDecrypt.Read(Decrypted, 0, Decrypted.Length);
                    Decryptor.Dispose();
                    Decryptor = null;
                    msDecrypt.Close();
                    Int32 trimCount = 0;
                    // Remove any block padding left over from encryption algorithm before returning
                    for (Int32 i = Decrypted.Length - 1; i >= 0; i--)
                    {
                        if (Decrypted[i] == 0) { trimCount++; } else { break; }
                    }
                    if (trimCount > 0)
                    {
                        byte[] buffer = (byte[])Array.CreateInstance(typeof(byte), Decrypted.Length - trimCount);
                        Array.ConstrainedCopy(Decrypted, 0, buffer, 0, buffer.Length);
                        Array.Clear(Decrypted, 0, Decrypted.Length);
                        Array.Resize<byte>(ref Decrypted, buffer.Length);
                        Array.Copy(buffer, Decrypted, buffer.Length);
                        buffer = null;
                    }
                    return Decrypted;
                }
                finally
                {
                    thisCSP = null;
                }
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static string decryptString(string Value, string PassPhrase, Encoding PassPhraseEncoding, stringIOType inputType, Encoding outputEncoding)
        {
            try
            {
                Monitor.Enter(_lock);
                return decryptString(Value, getKeyFromPassPhrase(PassPhrase, PassPhraseEncoding), getIVFromPassPhrase(PassPhrase, PassPhraseEncoding), inputType, outputEncoding);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static string decryptString(string Value, byte[] Key, byte[] IV, stringIOType inputType, Encoding outputEncoding)
        {
            try
            {
                Monitor.Enter(_lock);
                byte[] baseValue;
                switch (inputType)
                {
                    case stringIOType.base64EncodedString:
                        baseValue = Convert.FromBase64String(Value);
                        break;
                    case stringIOType.HexEncodedString:
                        baseValue = HexStringToByteArray(Value);
                        break;
                    default:
                        baseValue = Convert.FromBase64String(Value);
                        break;
                }
                return outputEncoding.GetString(decryptBytes(baseValue, Key, IV));
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }
        #endregion

        #region Key/Digest Generation Methods
        public static byte[] getKeyFromPassPhrase(string PassPhrase, Encoding encoder)
        {
            Monitor.Enter(_lock);
            try
            {
                return getDigest(PassPhrase, encoder, 32);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static byte[] getIVFromPassPhrase(string PassPhrase, Encoding encoder)
        {
            Monitor.Enter(_lock);
            try
            {
                byte[] buffer = (byte[])Array.CreateInstance(typeof(byte), encoder.GetByteCount(PassPhrase));
                byte[] reverseBuffer = (byte[])Array.CreateInstance(typeof(byte), encoder.GetByteCount(PassPhrase));
                buffer = encoder.GetBytes(PassPhrase);
                for (Int32 i = 0; i <= buffer.Length - 1; i++)
                {
                    reverseBuffer[i] = buffer[buffer.Length - i - 1];
                }
                return getDigest(reverseBuffer, 16);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static byte[] getDigest(string value, Encoding encoder, Int32 digestLength)
        {
            Monitor.Enter(_lock);
            try
            {
                return getDigest(encoder.GetBytes(value), digestLength);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static byte[] getDigest(object value, Int32 digestLength)
        {
            Monitor.Enter(_lock);
            try
            {
                BinaryFormatter bf = new BinaryFormatter();
                MemoryStream ms = new MemoryStream();
                bf.Serialize(ms, value);
                return getDigest(ms.ToArray(), digestLength);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static byte[] getDigest(byte[] value, Int32 digestLength)
        {
            Monitor.Enter(_lock);
            try
            {
                Int32 iterations = 0;
                // Find first non-zero byte value to use to calculate iterations
                for (Int32 i = 0; i < value.Length; i++)
                {
                    if (value[i] != 0) { iterations = (Int32)(value[i] * 10); break; }
                }
                // There were no non-zero byte values use the max for iterations
                if (iterations == 0) { iterations = (Int32)(byte.MaxValue * 10); }
                Rfc2898DeriveBytes deriveBytes = new Rfc2898DeriveBytes(value, new SHA256Managed().ComputeHash(value), iterations);
                return deriveBytes.GetBytes(digestLength);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }
        #endregion

        #region HexArray/String String/HexArray Converters
        public static string ByteArrayToHexString(byte[] ba)
        {
            try
            {
                Monitor.Enter(_lock);
                StringBuilder hex = new StringBuilder(ba.Length * 2);
                foreach (byte b in ba)
                    hex.AppendFormat("{0:x2}", b);
                return hex.ToString();
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

        public static byte[] HexStringToByteArray(String hex)
        {
            try
            {
                Monitor.Enter(_lock);
                int NumberChars = hex.Length;
                byte[] bytes = new byte[NumberChars / 2];
                for (int i = 0; i < NumberChars; i += 2)
                    bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
                return bytes;
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }
        #endregion
    }
} 
```

如果您使用的是 .Net Framework 3.5 或 4.0，请将 __FRAMEWORK_V35 或 __FRAMEWORK_V40 定义为预处理器的值。使用的类不适用于低于 3.5 的框架版本。如果您使用的是较早的框架版本，只需不要定义预处理器值，将使用较早的类。

首先获取文件名。

然后使用以下加密 OEM 密码（我建议编写一个小工具来执行此操作）：

```
string fileName = "Whatever The Filename is";
string password = "Whatever the OEM supplied password is";
string encryptedValue = Simple.AES256Encryption.encryptString(password, fileName, new UTF8Encoding(), new UTF8Encoding(), stringIOType.base64EncodedString); 
```

将生成的 base64 编码字符串从 encryptString 保存到您的配置文件中。

要恢复 OEM 密码：

```
string encryptedPassword = "This is the base64 encoded string you read from your config file";
string decrytptedPassword = Simple.AES256Encryption.decryptString(encryptedPassword, fileName, new UTF8Encoding(), stringIOType.base64EncodedString, new UTF8Encoding()); 
```

# regex - 如何使用 Dojo 更改 Spring WebFlow 项目中的 regExp 更改字段大小

> ID：12864121
> 
> 赞同：0
> 
> 时间：2012-10-12T17:21:00.473
> 
> 标签：regex, spring, spring-mvc, dojo, spring-webflow

如何使用 Dojo 更改 Spring WebFlow 项目中的 regExp 更改字段大小。我正在使用 Dojo 开发 Spring WebFlow 项目，我想更改 Dojo 中的 regExp 以检查用户输入的名称是否大于 1 位和小于 10 位。有人可以帮我解决这个问题，。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<style type="text/css" media="screen">
 @import url("<c:url value="/resources/dojo/resources/dojo.css"/>");
 @import url("<c:url value="/resources/dijit/themes/claro/claro.css"/>");
</style>     

<script djconfig="parseOnLoad: true"
 src="<c:url value="/resources/dojo/dojo.js"/>" type="text/javascript"></script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring.js" />"> </script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring-Dojo.js" />"></script>
<script type="text/javascript">dojo.require("dojo.parser");</script>

<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>
</head>
<body class="claro">
    <h2>Field Size Test</h2>

    <form:form commandName="customer" id="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <div id="container">
            <table>
                <tr>
                    <td valign="top"><b>Name:</b></td>
                    <td valign="top"><form:input path="name" class="value" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "name",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Please Enter Your Name from 1 to 10 digits",
                                invalidMessage : "A 1 to 10 digit value is required.",
                                required : true,
                                regExp : "[0-9]{10}"

                            }
                        }));
                    </script> <br />
                        <p></td>
                </tr>
            </table>
        </div>
        <p>
        <input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <input type="submit" name="_eventId_cancel" value="Cancel" />
        <script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'submit',
                event : 'onclick'
            }));
        </script>
    </form:form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:29:22.033

你应该试试这个`[0-9]{1,10}`，这意味着 1 到 10 位数字（包括 10 位）这对电话号码或类似的东西很有用。
如果你也在谈论字母，我建议`[a-zA-Z0-9]{1,10}`或者如果你只想要字母 `[a-zA-Z]{1,10}`

# mysql - MySQL通配符与concat匹配

> ID：12864126
> 
> 赞同：2
> 
> 时间：2012-10-12T17:21:15.250
> 
> 标签：mysql, sql-like, concat

我有这段代码返回我想要的结果：

```
SELECT CONCAT('#', id, ' ', firstname, ' ', lastname, ' (', company, ')') AS result FROM client_detail 
```

结果如下：

```
#1 James Hadley (OpenBill)
#2 Lucinda Hadley (Make a Squish) 
```

但是，当尝试使用 LIKE 搜索相同的字符串时（我想在上述结果中的任何位置搜索变量字符串），我没有得到任何输出，也没有错误：

```
SELECT CONCAT('#', id, ' ', firstname, ' ', lastname, ' (', company, ')') AS result FROM client_detail WHERE CONCAT('#', id, ' ', firstname, ' ', lastname, ' (', company, ')') LIKE '%jam%' ORDER BY id ASC 
```

我使用 LIKE 操作数是正确的，还是有更好/正确的搜索结果的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:31:16.673

MySQL 的`CONCAT`语句将使用系统默认的排序规则。如果您的表定义为*UTF-8*，但您的系统是*latin1*，那么您的`LIKE`语句可能会选择区分大小写的排序规则。

`LOWER` 使用（使用`HAVING`您的别名）强制进行不区分大小写的匹配`result`：

```
SELECT CONCAT('#',id,' ',firstname,' ',lastname,' (', company, ')') AS result
  FROM client_detail 
HAVING LOWER(result) LIKE '%jam%'    
 ORDER BY id ASC 
```

或使用 COLLATION（取决于您的系统）

```
...
HAVING result LIKE '%jam%' COLLATE latin1_general_ci
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:42:52.387

您可以强制使用不区分大小写的排序规则，而不是转换大小写，这是一项昂贵的操作：

```
SELECT   CONCAT('#', id, ' ', firstname, ' ', lastname, ' (', company, ')')
           AS result
FROM     client_detail
WHERE    CONCAT('#', id, ' ', firstname, ' ', lastname, ' (', company, ')')
           LIKE '%jam%' COLLATE utf8_general_ci
ORDER BY id ASC 
```

但是，这仍然非常昂贵，因为它需要对表中的每条记录执行连接和搜索：索引是无用的。

也许可以改写查询以更好地利用索引（如果存在）：

```
SELECT   CONCAT('#', id, ' ', firstname, ' ', lastname, ' (', company, ')')
           AS result
FROM     client_detail
WHERE    firstname LIKE 'jam%' COLLATE utf8_general_ci
      OR lastname  LIKE 'jam%' COLLATE utf8_general_ci
      OR company   LIKE 'jam%' COLLATE utf8_general_ci
ORDER BY id ASC 
```

尽管此查询仅`'jam'`在每个字段的开头进行搜索，而不是其中的某个子字符串。

# javascript - JavaScript 和隐藏输入

> ID：12864127
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:21:18.897
> 
> 标签：javascript

我在使用 JavaScript 设置/获取隐藏输入值时遇到问题，并且看不到我做错了什么。

我基本上想做的是在提交表单时保持页面上可扩展/可折叠 div 的状态。所以我在页面上放了一个隐藏的输入来保存 div 的状态。当 div 展开/折叠时，我会更改输入的值。当页面加载时，我读取输入的值并设置 div 的状态。

但是输入的价值正在丢失。我通过警报验证它是否设置正确，然后当我在加载时读取它时，我通过警报验证它是空的。以下是相关代码：

```
<input type="hidden" name="ECState" id="hdnECState" />

<script language="javascript" type="text/javascript">
<!--
    var ecValue;

    function ec(div, btn) {
        //expands or collapses an error detail div
        var e = document.getElementById(div);
        var b = document.getElementById(btn);
        var ecStr = div.toString() + ',' + btn.toString() + '|'
        if (e.style.display == 'block') {
            e.style.display = 'none';
            b.src = '../../Images/plus.gif';
            ecValue = ecValue.replace(ecStr, '');
        }
        else {
            e.style.display = 'block';
            b.src = '../../Images/minus.gif';
            ecValue = ecValue + ecStr;
        }
        alert(ecValue);
        document.getElementById('hdnECState').value = ecValue;
    }
    function reexpand() {
        //restores the expanded state of the error detail divs
        var pipe, comma, db, div, btn, e, b;
        var n = document.getElementById('hdnECState').value;
        alert('n=' + n);
        if (n != '') {
            pipe = n.indexOf('|');
            while (pipe > 0) {
                db = n.substring(0, pipe);
                comma = db.indexOf(',');
                if (comma > 0) {
                    div = db.substring(0, comma);
                    btn = db.substring(comma + 1);
                    e = document.getElementById(div);
                    b = document.getElementById(btn);
                    e.style.display = 'block';
                    b.src = '../../Images/minus.gif';
                }
                n = n.substring(pipe+1);
                pipe = n.indexOf('|');
            }
        }
    }

    reexpand();

//-->
</script> 
```

当我展开一个 div 时，我看到来自 ec() 的警报显示 ecValue 是 'foo,bar|'。

但是在提交表单后，我看到 reexpand() 的警报说'n ='。

有人看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:30:58.740

您尚未发布代码的 Html 部分。所以我有点困惑，但我认为你应该先放一些价值。

```
<input type="hidden" name="ECState" id="hdnECState" value="1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:25:30.803

Rudu 在评论中提供了答案，但由于我无法将评论标记为答案，所以这里是：

我忘记了隐藏的输入不会在表单提交时自动将其值保留在 ViewState 中。我需要在页面加载时重新评估后端隐藏的输入，然后一切正常。

# php - 如果可能的话，我可以从时间戳中获取月份吗？我该怎么做？

> ID：12864129
> 
> 赞同：0
> 
> 时间：2012-10-12T17:21:19.867
> 
> 标签：php, timestamp

当图像上传到网站时，我想在图片下显示它上传的月份。我在数据库中有一个时间戳字段。

如果可能的话，我可以从时间戳中获取月份吗？

我试着用这段代码来做

```
<?php $query="SELECT * FROM magimgdes ORDER BY id DESC, time DESC " ;

  $result=mysql_query($query) OR DIE(mysql_error());
  while($row=mysql_fetch_array($result)){
      $value1=$row['image'];
      $value3=$row['time'];
     ?>
  <img src="admin/upload/hompageimage/<?php echo $value1; ?>" width="180" height="195" alt="magimage" />

 <?php echo $value3;} ?></div> 
```

“时间”字段是数据库中的时间戳字段。

我只想回显月份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:22:46.650

**是**的，你可以通过[date()](http://php.net/manual/en/function.date.php)

```
$weekday = date('N', $timestamp); 
$month = date('m', $timestamp);   
$day = date('d', $timestamp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:24:12.783

您可以使用日期功能来做到这一点。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T11:03:17.453

首先，您需要将 MySql 日期时间格式转换为 UNIX 时间戳，为此您可以使用`strtotime`函数。然后你可以使用很多函数来处理月份的提取，例如`getdate`函数。

```
$timestamp = strtotime($row['time']); // Convert to unix time.
$info = getdate($timestamp); // Get the fields of a date (in an array).
$month = $info['mon']; // This is the element that contains the month.
echo $month; // This will print a number from 1 to 12. 
```

# hadoop - 生成 HDFS 序列文件

> ID：12864131
> 
> 赞同：1
> 
> 时间：2012-10-12T17:21:23.660
> 
> 标签：hadoop, apache-pig, hdfs

我正在使用 org.apache.pig.PigServer 类从 Java 运行 pig 脚本。我需要以 gz 压缩的序列格式输出我的文件。这就是我所做的：

```
effectivePigProperties.put("mapred.output.compress", "true");
effectivePigProperties.put("mapred.output.format.class", "org.apache.hadoop.mapred.SequenceFileOutputFormat");
effectivePigProperties.put("mapred.output.compression.type", "SequenceFile.CompressionType.BLOCK");
effectivePigProperties.put("mapred.output.compression.codec", "org.apache.hadoop.io.compress.GzipCodec"); 
```

输出是 gz 但不是序列文件。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:18:05.613

虽然尚未出现在 Apache Pig 包（也不是它的 Piggybank）中，但 Twitter 的 Elephant Bird 库提供了一个可供您使用的[SequenceFileStorage 实现。](https://github.com/kevinweil/elephant-bird/blob/master/pig/src/main/java/com/twitter/elephantbird/pig/store/SequenceFileStorage.java)

# jquery - 在新的浏览器选项卡中加载同一页面时显示 JQuery 动画的最终状态

> ID：12864141
> 
> 赞同：0
> 
> 时间：2012-10-12T17:21:56.400
> 
> 标签：jquery, jquery-animate

我正在使用 JQuery 为页面条目设置动画。当我导航到网站上的另一个页面并使用浏览器的后退按钮返回原始页面时，我注意到页面动画的最终状态正在加载。然后我发现了以下修复该问题的方法：

```
<body onunload=""> 
```

这工作得很好，但现在我注意到了一个不同的问题。当我加载页面时，打开一个新的浏览器选项卡并转到同一页面，动画的最终状态也被加载。我不确定是什么原因造成的，我想知道是否有解决办法。

**编辑**

这是导致问题的动画：

以下函数由其他函数调用，计数设置为 0，数组内容被打乱。

```
 function EntryFadeInContainers(count, array) {

        $('#subContainer' + array[count]).fadeTo(50, 1, function () {

            $('#subContainer' + array[count]).css("display", "block");

            ++count;

            if (count != 20) {
                document.title = "shown: " + count;
                EntryFadeInContainers(count, array);
            }
            else {
                $("#mainContainer").css("display", "block");
                isPageEntryAnimationDone = true;
            }
        });
    } 
```

`document.title = "shown: " + count;`仅用于调试目的。我注意到当页面加载到新选项卡中时，IE9 10 次中有 9 次不会运行递归函数。

**编辑**

在 IE10 中测试，它似乎工作正常。

# perl - 去掉字符串中的最后一个 URL 名称

> ID：12864143
> 
> 赞同：1
> 
> 时间：2012-10-12T17:22:00.740
> 
> 标签：perl, cgi

我需要去掉变量中的最后一页名称。

到目前为止，这是我的代码，但我丢失了 .jpg 扩展名，我需要保留它，需要的结果：ImageName256.jpg

```
#!/usr/bin/perl

print "Content-type: text/html\n\n";

use CGI qw(:standard);
use CGI::Carp qw(warningsToBrowser fatalsToBrowser);

$Variable = "http://www.MyDomain.com/SomefolderPath/ImageName256.jpg";

($LastInUrl) = $Variable =~ m(.*/(\w+));

print $LastInUrl; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T17:27:43.233

对于这类事情，我通常会避免使用正则表达式并像这样处理它：

```
#!/usr/bin/perl

use strict;
use warnings;

use URI;
use URI::Escape qw( uri_unescape );
use File::Basename;

my $variable = "http://www.MyDomain.com/SomefolderPath/ImageName256.jpg";
my $last_in_url = uri_unescape( basename( URI->new( $variable )->path ) );

print $last_in_url; 
```

* * *

注意：File::Basename 的行为会根据使用的系统而有所不同。如果您想要可移植性，则必须使用以下内容：

```
my $fstype = fileparse_set_fstype('uri');
my $last = uri_unescape( basename( $uri->path ) );
fileparse_set_fstype($fstype); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T17:26:21.440

```
use URI qw( );
my $uri = "http://www.MyDomain.com/SomefolderPath/ImageName256.jpg";
$uri = URI->new($uri);
my $basename = ( $uri->path_segments )[-1]; 
```

如果您想继续使用正则表达式，则必须使用以下内容：

```
use URI::Escape qw( uri_unescape );
my $uri = "http://www.MyDomain.com/SomefolderPath/ImageName256.jpg";
my $basename = $uri =~ m{/([^/#?]*)(?=[#?]|\z)} ? uri_unescape($1) : ''; 
```

显然，我强烈推荐第一个解决方案而不是第二个解决方案。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-12T17:42:01.760

```
($LastInUrl) = (split qr{/}, $Variable)[-1]; 
```

# javascript - 向下滑动 SVG 元素的简单方法？

> ID：12864145
> 
> 赞同：4
> 
> 时间：2012-10-12T17:22:02.670
> 
> 标签：javascript, jquery, svg, d3.js

是否有与 jQuery 的 SVG 元素的 slideDown 方法等效的方法？现在这些元素只是突然出现。我想通过向下滑动来软化一点。

编辑：我的代码基于这里的动态堆叠条形图：http: [//benjchristensen.com/2011/12/16/dynamic-stacked-bar-chart-using-d3-js/](http://benjchristensen.com/2011/12/16/dynamic-stacked-bar-chart-using-d3-js/)

我没有一个带有许多条的图表，而是有许多带有一条条的图表。我想让它当图表出现时，它会慢慢滑下来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:29:58.460

我不相信 jQuery 很容易支持 SVG。Keith Wood 有一个[SVG 特定的 jQuery 库](http://keith-wood.name/svg.html#anim)，它允许你做一些动画。

另一种选择是使用与 SVG 一起使用的图形库。首先想到的是[D3.js](http://d3js.org/)，它提供了一些非常易于使用的方法来操作 SVG 元素。此外，选择器样式类似于您可能习惯用于 jQuery 的样式。

如果您使用的是 D3，我会检查[转换](https://github.com/mbostock/d3/wiki/Transitions)方法。您可以做很多事情，而 D3 非常强大。一个例子是：

```
var rect = d3.select('#rectangle');
// this selects a rectangle.  Let's say that it starts at 
// the origin, or even off screen in your case   

rect.transition()
    .duration(250)
    .attr('x', 10)
    .attr('y', 20); 
    // this changes the x and y attributes
    // of the rectangle to 10 and 20 respectively
    // using a transition over a 250ms duration. 
```

对于您给出的特定示例，我只需更改`y`属性，使其从屏幕开始（例如`y = -1 * height`），然后将其转换为`y = height`or`y = 200`或类似的东西。

# apache - 使用 mod_proxy_ajp 连接 apache 和 Coldfusion 10

> ID：12864146
> 
> 赞同：0
> 
> 时间：2012-10-12T17:22:03.673
> 
> 标签：apache, coldfusion, coldfusion-10

我正在尝试设置我的本地开发环境，但我只缺少一块拼图。

我能够在我的 Mac OSX 10.7.5 x86_x64 XAMPP 上成功安装以下内容 - [http://www.apachefriends.org/en/xampp-macosx.html](http://www.apachefriends.org/en/xampp-macosx.html) ColdFusion 10 - 开发人员版

两者都运行良好。我能够拉起 localhost (Apache) 和 localhost:8500 (ColdFusion) - 我的 ajp 连接器端口是 8012

现在我希望能够使用 mod_proxy_ajp 将请求从 Apache 传递给我的 ColdFusion。

我在 ColdFusion 的 wwwroot/cf 目录中创建了一个 index.cfm 文件，启用了 NameVirtualHost 并在 Apache 中创建了一个 VirtualHost 指令，如下所示：

```
NameVirtualHost *:80

<VirtualHost *:80>
ServerName localhost
<Location "/cf">
Allow from all
ProxyPass ajp://localhost:8012/
</Location>
</VirtualHost> 
```

重新启动一切后，我收到 503 错误。非常感谢任何帮助或指示。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T06:10:45.883

检查您的 CF 日志： `{cf_root}/cfusion/logs/coldfusion-error.log`

您可能在日志中有这样的内容：

```
org.apache.coyote.ajp.AjpProcessor getRealPathFromServer
SEVERE: Error in getRealPathFromConn
java.io.IOException: Socket read failed 
```

所以 mod_proxy_ajp 正在将请求传递给 Tomcat，但 Tomcat 无法读取它。

您是否尝试过使用 mod_jk 进行配置？

[http://helpx.adobe.com/coldfusion/kb/coldfusion10-apache-manual-connector-configuration.html](http://helpx.adobe.com/coldfusion/kb/coldfusion10-apache-manual-connector-configuration.html)

可能不是您想要配置它的方式，但它应该让您启动并运行。

# xslt - 带有“包含”的 XSLT 多个条件

> ID：12864148
> 
> 赞同：0
> 
> 时间：2012-10-12T17:22:04.637
> 
> 标签：xslt

我是 XSLT 技术的新手，我碰壁了。

我需要过滤（并复制）名称包含“stringA”并且也是名称包含“stringB”的节点的子节点的所有节点。

我遇到了麻烦`multiple conditions`。

我没有找到与我的问题相关的任何线程。

如果有人可以指导我了解相关内容或对其进行解释，将不胜感激。

```
<x>
<a>
    <a>1</a>
    <b>2</b>
    <c>3</c>
</a>

<b>
    <a>4</a>
    <b>5</b>
    <c>6</c>
</b>

<c>
    <a>7</a>
    <b>8</b>
    <c>9</c>
</c> 
```

我需要复制名称包含“c”且祖先节点包含“b”的所有节点。本例中的值为 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:25:23.450

你的意思是

```
//*[contains(name(),'stringB')]/*[contains(name(),'stringA')] 
```

# jquery - Jquery mobile - href 的奇怪行为

> ID：12864152
> 
> 赞同：0
> 
> 时间：2012-10-12T17:22:35.717
> 
> 标签：jquery, cordova, jquery-mobile, href

我正在使用 jquery (jquery.mobile-1.1.0.min)、jquery mobile (jquery.mobile-1.1.0) 和 phoneGap。

在queryWLSuccess中，每个链接根据数据库都有唯一的ID，当我传输包含ID的名称时，单击每个链接将显示链接的详细信息。当我不使用 href='#' （显示每个链接 ID ='1'，ID='2'，...正确）但添加 href='#'（显示每个链接 ID = '2', ID='2',ID='2',...所有链接的 ID 相同）

这种奇怪的行为发生了什么？如何导航到其他外部页面？单击时我需要导航到另一个页面。

JS文件

```
---DATABASE---
function queryWLDB(tx) {
        tx.executeSql("SELECT * FROM WORD WHERE Level='"+ sessionStorage.StudyLevel +"'ORDER BY Word_ID" , [], queryWLSuccess, errorCB);

    }

     function queryWLSuccess(tx, results) {

        var len = results.rows.length

        for (var i=0; i<len; i++){
            $("<li class='content'><a  ***href='#'*** name='"+results.rows.item(i).ID+"'>"+results.rows.item(i).Eng+"</a></li>").appendTo(".wordList");
        }           
    }

---JQUERY MOBILE---
$( document ).delegate("#list", "pageshow", function() {
   $('.content').remove();
   onDeviceReady();
   db.transaction(queryWLDB, errorCB);
}); 

$("li.content a").live('click', function(){
    alert("ID =  "+$(this).attr("name")); 

}); 
```

INDEX.HTML 单词表页面

```
<div data-role="page" id="wordList">

<div data-role="content">   
    <ol class="list">

    </ol>

</div>

</div><!-- WordList page --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:01:00.100

当我使用时解决了

```
$.mobile.changePage("anotherpage.html", {transition: "slide"}); 
```

当点击监听器。

# emacs - 在 Emacs AutoComplete 中建议列表中源的更改顺序

> ID：12864153
> 
> 赞同：2
> 
> 时间：2012-10-12T17:22:45.243
> 
> 标签：emacs, eclim

有没有办法改变建议列表中项目的顺序？我正在使用 Eclim，似乎本地缓冲区建议是第一个，然后是片段，然后是 eclim ac 源。我希望先是 eclim 源，然后是片段，然后是其他任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:29:03.623

您只能用于`ac-complete-eclim`完成来自 eclim 源的建议。您可以将其绑定到所需的键以方便使用。有关详细信息，请参阅自动完成模式手册的[使用特定源完成](http://cx4a.org/software/auto-complete/manual.html#Completion_with_specific_source)部分。

这不是一个理想的解决方案。但是，我用它来做某些事情。我希望候选人按源设置`ac-sources`变量的顺序显示。但是，情况似乎并非如此。

# node.js - 如何在 socket.io 中处理任何事件本身

> ID：12864160
> 
> 赞同：1
> 
> 时间：2012-10-12T17:22:59.757
> 
> 标签：node.js, socket.io

我需要在服务器 node.js/socket.io 中为来自客户端的每个事件运行一些函数这是关于计算事件之间的平均时间，以便我可以检测垃圾邮件发送者。

有任何想法吗？在文档中我没有找到它。就像是：

```
socket.onAnyEvent( function() {
 //do things
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:29:39.207

这是一个很好的线程：[https](https://github.com/LearnBoost/socket.io/issues/434) ://github.com/LearnBoost/socket.io/issues/434特别是您可以扩展发射器。

# c# - 为什么此 api 显示错误消息“未知字段：性别”？

> ID：12864163
> 
> 赞同：2
> 
> 时间：2012-10-12T17:23:17.773
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

我正在为 facebook 应用程序使用图形 api。我正在使用这个 api

```
https://graph.facebook.com/<friendlist_id>/members?fields=id,name,gender&access_token=<access_token> 
```

但它告诉我错误，

```
{
   "error": {
      "message": "(#100) Unknown fields: gender.",
      "type": "OAuthException",
      "code": 100
   }
} 
```

当我从 api 中删除“性别”时，它可以正常工作。那么，为什么这个 api 会向我显示这个错误。如何在这个 api 中获取用户的性别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:29:06.997

因为根据[朋友列表文档](https://developers.facebook.com/docs/reference/api/FriendList/)，`members`连接是`An array of objects containing friend id and name fields.`- 这些是结构中仅有的两个字段 - 您需要在另一个调用中获取有关这些 ID 所需的任何其他数据

（虽然大多数应用程序可能已经有`/me/friends`缓存的结果，所以这应该很快）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:47:26.807

你不能像[Igy](http://facebook.stackoverflow.com/a/12864243/321505)所说的那样一次性拉出性别，所以在 FQL 中做到这一点的方法是

`SELECT uid, sex FROM user WHERE uid IN (SELECT uid, flid FROM friendlist_member WHERE flid = <friendlist_id>)`

# java - Maven + GWTTestCase + Test => 没有可用于类型 nnn 的源代码（依赖项）

> ID：12864166
> 
> 赞同：2
> 
> 时间：2012-10-12T17:23:26.683
> 
> 标签：java, gwt, maven

我正在使用 Maven 编写一个 gwt 2.4 应用程序。该项目分为几个（Maven）子项目。gwt maven 插件用于构建项目。虽然构建本身运行良好，但我遇到了 GwtTests 的问题：

```
[INFO] [ERROR] Errors in 'file:/Users/yanosz/app/gwt-app/src/test/java/com/company/gwt-app/ui/ng/gwt/screen/impl/s0A5/GwtTestValidationMeldung.java'
[INFO]    [ERROR] Line 59: No source code is available for type com.company.commons.gwt.types.LogicalDate; did you forget to inherit a required module?
[INFO]    [ERROR] Line 61: No source code is available for type com.company.commons.gwt.types.JaNeinType; did you forget to inherit a required module?
[INFO]    [ERROR] Line 98: No source code is available for type com.company.ui.ng.gwt.screen.layout.messages.MessageAreaDisplay; did you forget to inherit a required module?
[INFO]    [ERROR] Line 101: No source code is available for type com.company.ui.ng.gwt.screen.support.gwt-appD.ialogYesNoCallback; did you forget to inherit a required module?
[INFO]    [ERROR] Line 111: No source code is available for type com.company.ui.ng.gwt.infrastructure.scheduler.SchedulerSimple; did you forget to inherit a required module?
[INFO]    [ERROR] Line 138: No source code is available for type com.company.commons.gwt.ui.UIProperties; did you forget to inherit a required module?
[INFO]    [ERROR] Line 143: No source code is available for type com.company.ui.ng.gwt.screen.support.editor.EditorValidationType; did you forget to inherit a required module?
(....)
[INFO]  [ERROR] Unable to find type 'com.company.ui.ng.gwt.screen.impl.s0A5.GwtTestValidationMeldung'
[INFO]    [ERROR] Hint: Previous compiler errors may have made this type unavailable 
```

这些测试可以使用*Run As GWT 单元测试*在 Eclipse 中运行- 但是，我想使用 Maven 这样做以便在 Jenkins 上运行它们。

*重要说明*：所有丢失的源文件都是部分不同的子 probjects。它们不包含在我正在尝试构建的项目中。它们被定义为项目依赖项，并在 compileSourcesArtifacts 语句中提到：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>2.4.0</version>
    <executions>
        <execution>
            <phase>prepare-package</phase>
            <goals>
                <goal>compile</goal>
                <goal>test</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <module>${gwt.module}</module>
        <style>${gwt.style}</style>
        <runTarget>GwtApp.html</runTarget>
        <compileSourcesArtifacts>
            <compileSourcesArtifact>com.company.gwt-app:gwt-app-commons</compileSourcesArtifact>
            <compileSourcesArtifact>com.company.gwt-app:gwt-app-ui</compileSourcesArtifact>
        </compileSourcesArtifacts>
    </configuration>
</plugin> 
```

你为什么在编译（mvn install）中使用'em时Maven在测试中缺少源不是问题？我该如何解决？

在此先感谢， Greetz yanosz

编辑：我的测试的模块配置是：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='gwt-app'>

  <inherits name='com.company.gwt-app.commons.Module' />
  <inherits name='com.company.gwt-app.ui.ng.Module' />
  <inherits name="com.google.gwt.i18n.I18N" />

  <entry-point class="com.company.gwt-app.ui.ng.gwt.application.gwt-appEntryPoint" />

  <source path='gwt' />

  <!-- German language, independent of country -->
  <set-property name="locale" value="de" />
  <set-property-fallback name="locale" value="de" />
  <extend-property name="locale" values="en" />

</module> 
```

所有必要的模块都被继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:30:19.247

Gwt 需要所有需要的 java 源。你必须打包它们。请参阅[多项目设置](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/multiproject.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:30:24.107

你需要继承你的模块`.gwt.xml`

请参阅：[http ://code.google.com/p/google-web-toolkit-doc-1-5/wiki/DevGuideModules](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/DevGuideModules)

# parsing - 分号作为由 flex/bison 解析的自定义语法中的分隔符

> ID：12864169
> 
> 赞同：2
> 
> 时间：2012-10-12T17:23:34.437
> 
> 标签：parsing, grammar, bison, yacc, flex-lexer

我正在尝试为元编程语言编写一个简单的解析器。一切正常，但我想使用';' 作为语句分隔符，而不是换行符或完全省略分号。

所以这是预期的行为：

```
// good code
v1 = v2;
v3 = 23; 
```

应该解析*没有错误*

但：

```
// bad code
v1 = v2
v3 = 23; 
```

*应该失败*

但是，如果我从分隔符**中删除“空”规则，****则两个代码都会失败**，如下所示：

```
ID to ID
Error detected in parsing: syntax error, unexpected ID, expecting SEMICOLON
; 
```

如果我让**“空”规则处于活动状态**，那么**两个代码都被接受**，这是不希望的。

```
ID to ID   // should raise error
ID to NUM; 
```

这里欢迎任何帮助，因为大多数教程根本不涉及分隔符。

这是我的解析器/lexxer 的简化版本：

*解析器.l：*

```
%{
#include "parser.tab.h"
#include<stdio.h>
%}

num      [0-9]
alpha    [a-zA-Z_]
alphanum [a-zA-Z_0-9]
comment "//"[^\n]*"\n"
string  \"[^\"]*\"
whitespace [ \t\n]

%x ML_COMMENT

%%
<INITIAL>"/*"               {BEGIN(ML_COMMENT); printf("/*");}
<ML_COMMENT>"*/"            {BEGIN(INITIAL); printf("*/");}  
<ML_COMMENT>[.]+            { }
<ML_COMMENT>[\n]+           { printf("\n"); }
{comment}+                  {printf("%s",yytext);}

{alpha}{alphanum}+          { yylval.str= strdup(yytext); return ID;}
{num}+                      { yylval.str= strdup(yytext); return NUM;}
{string}                    { yylval.str= strdup(yytext); return STRING;}

';'                         {return SEMICOLON;}
"="                         {return ASSIGNMENT;}
" "+                        { }
<<EOF>>                     {exit(0); /* this is suboptimal */}
%% 
```

*解析器.y：*

```
%{
#include<stdio.h>
#include<string.h>
%}

%error-verbose

%union{
        char *str;
}

%token  <str> ID
%token  <str> NUM
%token  <str> STRING
%left SEMICOLON
%left ASSIGNMENT

%start input

%%
input:  /* empty */
        | expression separator input
;

expression: assign 
            | error {}
;

separator:  SEMICOLON
            | empty
;

empty:      
;

assign:   ID ASSIGNMENT ID      { printf("ID to ID"); }
        | ID ASSIGNMENT STRING  { printf("ID to STRING"); }
        | ID ASSIGNMENT NUM     { printf("ID to NUM"); }
;

%%

yyerror(char* str)
{
        printf("Error detected in parsing: %s\n", str);
}

main()
{
        yyparse();
} 
```

编译如下：

```
$>flex -t parser.l > parser.lex.yy.c
$>bison -v -d parser.y
$>cc parser.tab.c parser.lex.yy.c -lfl -o parser 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:36:29.100

没关系......有问题的线路是这一行：

```
';'                         {return SEMICOLON;} 
```

需要更改为

```
";"                         {return SEMICOLON;} 
```

现在行为是正确的。:-)

# c# - 在 C# 中编辑 pdf 文档复选框和字段

> ID：12864170
> 
> 赞同：0
> 
> 时间：2012-10-12T17:23:42.267
> 
> 标签：c#, pdf, itextsharp

我想知道如何在 C# 中编辑现有的 PDF 文档。该文档已经创建，并且具有如下图所示的字段：

![样本](../Images/74b09e184fae8b4eab68d3005dbb1a74.png)

我想知道是否有代码可以选中所需的复选框或在行中输入文本。请告诉我。

我查看了 iTextSharp 但我不知道该工具是否可以帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:26:01.533

有办法做到这一点，但它需要外部工具。我使用 ActivePDF 库，它提供表单填写例程并且运行良好..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:14:02.653

您可以使用 iTextSharp 做到这一点，但首先您应该了解有关该文档的更多信息。如果 pdf 包含实际的 acroform 表单定义，则填写它相当容易。文档和 iText 网站上有很多示例。但是，如果它不包含这样的表单定义，并且复选框和文本字段只是在某处绘制的一些线，那么它会变得有点困难：您必须衡量在哪里放置您的条目。此外，您应该了解文档是否经过签名或加密，这可能会限制您可以对文档执行的操作。

# php - 仅允许 .jpg 和 .png 文件

> ID：12864171
> 
> 赞同：0
> 
> 时间：2012-10-12T17:23:49.753
> 
> 标签：php

> **可能重复：**
> [如何只允许在 php 中上传某些文件类型？](https://stackoverflow.com/questions/2486329/how-can-i-only-allow-certain-filetypes-on-upload-in-php)

如何使下面的脚本只允许 .jpg 图像或 .png 图像？它根据会话用户名匹配将图像目录上传到 mysql 表。是否可以限制文件类型？因为我只需要 .jpg 或 .png

```
 if ($_POST['submit']) {
    //get file attributes

    $Name = $_FILES['myfile']['name'];
    $tmp_name = $_FILES['myfile']['tmp_name'];
    error_reporting(E_ERROR | E_PARSE);

    if ($Name) {            
    $location = "avatars/$Name";    
    move_uploaded_file($tmp_name, $location ) or die('Failed to upload picture'); 
    $query = mysql_query("UPDATE fgusers3 SET imagelocation='$location' WHERE name='$name'") or die("Your profile image has been uploaded!");

   }}

echo "Upload your image below:
  <form action='profilepic.php' method='POST' enctype='multipart/form-data'>
   Profile Picture: <input type='file' name='myfile'> <input type='submit' name='submit' value='upload'>
   </form>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:24:56.070

您可以尝试使用`pathinfo`&`exif_imagetype`

```
if(pathinfo($Name,PATHINFO_EXTENSION) != "jpg" || exif_imagetype($Name) != IMAGETYPE_JPEG)
{
    // throw error 
} 
```

[查看更多信息以检测假图像](https://stackoverflow.com/a/10464964/1226894)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:30:11.073

您可以[`exif_imagetype($tmp_name)`](http://www.php.net/manual/en/function.exif-imagetype.php)根据文件头来检查文件的实际类型。这会根据文件的内容检查类型，因此它是最可靠的（例如，即使有人给您一个带有“.png”扩展名的 JPG，它也会为您提供正确的信息）。

还有一个`type`属性 ( `$_FILES['myfile']['type']`)，它将为您提供浏览器声称文件的 MIME 类型。但是，如果有人恶意伪造请求，则无法信任。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:28:50.907

```
if($_FILES){
    $allowedExtensions = array("jpg","png");

    foreach($_FILES as $key=>$val){
        if(!empty($val['tmp_name'])){
            $ext = end(explode(".",strtolower(basename($val['name']))));
            if(in_array($ext,$allowedExtensions)){
                $file = 'PATH_TO_UPLOAD'.basename($val['name']);

                if(move_uploaded_file($val['tmp_name'],$file)){
                    //SUCCESS_MESSAGE
                }
            }else{
                //FAIL_MESSAGE
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:33:50.193

$imageType = getimagesize($tmp_name); switch ($imageType['mime'] != "image/jpg" OR $imageType['mim'] != "image/png") { //错误代码在这里。}

它比检查扩展更安全，因为扩展可以轻松更改。哑剧类型也可以更改，但需要更多知识 xD

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T17:35:29.590

当然，您可以通过文件扩展名进行限制，但这并不安全。您可以尝试重命名 gif 文件并上传。更安全一点的是使用 mime-type 来检测文件类型（但仍然不能保证）。看： [如何用php找到文件的mime-type？](https://stackoverflow.com/questions/134833/how-do-i-find-the-mime-type-of-a-file-with-php)

我认为更安全的是尝试获取图像大小或者转换为另一种图像类型是否成功。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T17:27:47.633

```
$whitelist = array(".jpg",".png");
foreach ($whitelist as $item) {
  if(preg_match("/$item\$/i", $_FILES['uploadfile']['name'])) {
    $uploaddir='uploads/uploads_image/';
    // or code
  }
} 
```

# xslt - 防止 C:if 测试字符串的 XslPath 解析

> ID：12864175
> 
> 赞同：1
> 
> 时间：2012-10-12T17:24:09.767
> 
> 标签：xslt

我正在使用 XSL，我想将 ac:if 放入我生成的 HTML 中，

```
<c:if test="${value=='yes'}"> 
```

但是标签的 test="" 部分被解释为 XslPath 并解析...

有什么方法可以逃脱或禁用这个作为 XslPath 的测试部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:27:21.563

问题是由于 XSLT 将属性中的一对花括号视为 AVT（属性值模板）的规范。

为了指定一个真正的花括号，它必须加倍。

**使用**：

```
 <c:if test="${{value=='yes'}}"> 
```

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:c="some:c" exclude-result-prefixes="c">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <c:if test="${{value=='yes'}}"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（本演示中未使用）时，将产生所需的正确结果**：

```
<c:if xmlns:c="some:c" test="${value=='yes'}"/> 
```

# android - 通过新活动的android套接字连接

> ID：12864177
> 
> 赞同：1
> 
> 时间：2012-10-12T17:24:13.720
> 
> 标签：android, sockets, android-activity

我正在尝试在 Android 应用程序中打开一个新的“活动”（C2M），并在该新活动中打开一个套接字，其 IP 地址和端口来自前一个“活动”（称为 MeasActivity）。我检查了 C2M 中的 ip 和地址是否正确（作为字符串），但无法创建套接字。部分代码如下：

```
public class C2M extends Activity {
    Socket socket;
    private String serverIpAddress;
    private String serverPort;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainmeas);
        intentback = new Intent(this, MeasActivity.class);
        Intent intent = getIntent();
        serverIpAddress = intent.getStringExtra(MeasActivity.EXTRA_IP);
        serverPort = intent.getStringExtra(MeasActivity.EXTRA_PORT);
        try {
            socket = new Socket(serverIpAddress, Integer.parseInt(serverPort));
        } catch (Exception e) {
            startActivity(intentback);
        }
    }
} 
```

此外，清单文件如下：

```
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-sdk android:minSdkVersion="14" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MeasActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="C2M"></activity>
</application> 
```

我不确定我是否遗漏了什么，但正如我所说，我在创建套接字时遇到了问题。

提前感谢您提供的帮助和建议。

格斯

# php - 如何提取电子邮件地址？

> ID：12864179
> 
> 赞同：0
> 
> 时间：2012-10-12T17:24:23.763
> 
> 标签：php, email, autofill, email-address

我正在通过 sendblaster 组合一个 eblast，我有一个合格的电子邮件地址列表；在电子邮件副本中是一个网页链接，用于查看产品列表（在网页上），并带有一个请求批量定价的按钮。onclick 我需要检查的项目和填写表格的人的电子邮件地址，以通过电子邮件发送回给定的电子邮件地址，包括用户的电子邮件地址（为此使用 php 邮件功能）。如何从 sendblaster（或 IP 地址）中提取用户的电子邮件地址并将其自动填写到表单中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:39:47.890

我相信您需要在邮件中使用#email# 标签： [http ://www.sendblaster.com/support/newsletter-creation/email-merge-software-tutorial-newsletter-personalization](http://www.sendblaster.com/support/newsletter-creation/email-merge-software-tutorial-newsletter-personalization)

# android - 在android中使用ViewAnimation或PropertyAnimation旋转图像

> ID：12864182
> 
> 赞同：0
> 
> 时间：2012-10-12T17:24:27.543
> 
> 标签：android

我想在我的应用程序中旋转图像，使其像简单的钟摆一样旋转，并在一段时间后停止。

我如何在 android 中使用 View Animation 或 Property Animation 来实现它

我使用下面的 xml 动画

```
 <rotate
        android:duration="2000"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:fromDegrees="-15"
        android:pivotX="50%"
        android:pivotY="0%"
        android:repeatCount="5"
        android:repeatMode="reverse"
        android:toDegrees="15" /> 
```

下面是动画的代码

```
 Animation hyperspaceJumpAnimation = AnimationUtils.loadAnimation(this,
            R.anim.rotate);
    firstBell.startAnimation(hyperspaceJumpAnimation); 
```

但问题是当动画开始时它突然移动到角度 -15 然后开始动画。并且在 5 次计数后突然不顺畅地停止。

所以我的问题是如何解决这个问题

寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:43:32.170

约-15度：

`android:fromDegrees="-15"`

和

`android:toDegrees="15"`

这两行表示您的对象从 -15 度开始，以 15 度结束。如果那不是您想要的，请删除它们。

对于平滑方式，您可以`fade.xml`在 ApiDemo/res/anim 文件夹中找到 。

# c# - WASAPI C++ DLL 线程挂在 C# 应用程序中

> ID：12864195
> 
> 赞同：1
> 
> 时间：2012-10-12T17:25:32.283
> 
> 标签：c#, c++, dll, usb, wasapi

我已经非常彻底地寻找了一个类似的问题，但还没有真正找到我所拥有的确切情况。

我有一个用于创建线程并等待来自声卡的事件来填充输出缓冲区的音频应用程序的非托管 dll。

该应用程序在板载声卡上运行良好，但如果我切换到任何 USB 音频设备，线程就会挂起。

这是主要代码位：我在我的 Initialize 函数中初始化我的事件

```
::Initialize()
{
    _AudioSamplesReadyEvent = CreateEventEx(NULL, L"InputReady", 0, EVENT_MODIFY_STATE | SYNCHRONIZE);
} 
```

并在初始化后将其传递给声音设备

```
::InitiAudioEngine()
{
    hr = _AudioClient->SetEventHandle(_AudioSamplesReadyEvent);
} 
```

这是线程

```
//HRESULT hr = CoInitializeEx(NULL, COINIT_SPEED_OVER_MEMORY); //gets called in the constructor of my renderthread class

DWORD DoRenderThread()
{
    HANDLE waitArray[2] = {_ShutdownEvent, _AudioSamplesReadyEvent};
    HANDLE mmcssHandle = NULL;
    DWORD mmcssTaskIndex = 0;

    mmcssHandle = AvSetMmThreadCharacteristics(L"Audio", &mmcssTaskIndex);

    while (_StillPlaying)
    {
        HRESULT hr;
        DWORD waitResult = WaitForMultipleObjects(2, waitArray, FALSE, INFINITE);
        switch (waitResult)
        {
        case WAIT_OBJECT_0 + 0:     // _ShutdownEvent
            _StillPlaying = false;       // We're done, exit the loop.
            break;
        case WAIT_OBJECT_0 + 1:     // _AudioSamplesReadyEvent
            //  We need to provide the next buffer of samples to the audio renderer.
            BYTE *pData;
            //invoke the callback to the managed app to fill our buffer
            _Handler(NULL, 0);

            hr = _RenderClient->GetBuffer(_BufferSizePerPeriod, &pData);
            if (SUCCEEDED(hr))
            {
                  //  Copy data from the render buffer to the output buffer and bump our render pointer.

               if(_FrameSize == QUAD_FRAME)
               {
                  //we have to remux the stream data in to an L,R,LR,RR frame
                  //inserting silence for the rear channels
                  const int bufmuxsz = FIXED_FRAME_SIZE * QUAD_FRAME;
                  BYTE  muxarray[bufmuxsz] = {0};
                  BYTE  tempbuffer[FIXED_FRAME_SIZE * STEREO_FRAME];
                  CopyMemory(tempbuffer, _Buffer, FIXED_FRAME_SIZE * STEREO_FRAME);
                  int i = 0;
                  for(int x = 0; x < bufmuxsz; ++x)
                  {
                     muxarray[x++] = tempbuffer[i++];
                     muxarray[x++] = tempbuffer[i++];
                     muxarray[x++] = tempbuffer[i++];
                     muxarray[x++] = tempbuffer[i++];
                     x += 3; //the array is initialized to '0' so skip the assignments
                  }
                  CopyMemory(pData, muxarray, _BufferSizePerPeriod*_FrameSize);
               }
               else
               {
                  CopyMemory(pData, _Buffer, _BufferSizePerPeriod * _FrameSize);

               }
               hr = _RenderClient->ReleaseBuffer(_BufferSizePerPeriod, 0); 
               if (!SUCCEEDED(hr))
               {
                  printf("Playback Failed!!\n");
                  _StillPlaying = false;
               }
            }
            else
            {
               _StillPlaying = false;
            }
            break;
        }
    }
    AvRevertMmThreadCharacteristics(mmcssHandle);
    CoUninitialize();
    return 0;
} 
```

我等待的两个事件是关闭事件和来自声卡的 samplesready 事件。它总是命中一次，然后挂起。同样，这仅适用于 USB 音频接口。

# asp.net-mvc - 如何在 ASP.NET MVC 应用程序中使用 flexigrid 作为局部视图？

> ID：12864199
> 
> 赞同：0
> 
> 时间：2012-10-12T17:25:56.350
> 
> 标签：asp.net-mvc, flexigrid

我可以在从我的主菜单调用的普通视图中显示 Flexigrid。我正在使用此示例[http://mvc4beginner.com/Sample-Code/Insert-Update-Delete/Asp-.Net-MVC-Ajax-Insert-Update-Delete-Using-Flexigrid.html](http://mvc4beginner.com/Sample-Code/Insert-Update-Delete/Asp-.Net-MVC-Ajax-Insert-Update-Delete-Using-Flexigrid.html)使其工作并且工作对于我来说足够了。

但是，我的想法是使用更复杂的界面 - 使用搜索控件进行常规视图，并在按下搜索按钮时显示网格，其中包含我搜索的项目的数据。

到目前为止，我尝试了几件事，但无法正常工作。这是我尝试过的最新索引视图：

```
@model CardNumbers.Objects.Client

@{
    ViewBag.Title = "Clients";
}

<h2>Clients</h2>

<br />
      @using (Ajax.BeginForm("Search", "Client",
    new AjaxOptions
    {
        HttpMethod = "POST",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "ClientsResults"

    }))
    {
    <fieldset>
        <legend>Search</legend>
        <label for="clientNo">Client No: </label>
        <input type="number" name="searchClientNo" class="numericOnly" /><br />
        <label for="clientName">Client Name: </label>
        <input type =  "text" size =25 data-autocomplete="@Url.Action("QuickSearch", "Client")"  name ="searchClientName" />
        <div>
       <input type="submit" value="Find / Refresh" />      

            @*<input type="button" value="Find / Refresh" id="ClientsSearch" data-url="@Url.Action("Client", "Client")" />

            @*<input type="submit" value="Find / Refresh" />*@
       @*     @Ajax.ActionLink("Find / Refresh", "Client", new AjaxOptions {UpdateTargetId = "ClientResults",
           InsertionMode = InsertionMode.Replace, HttpMethod = "POST"}) *@
          @*}*@

        </div>
    </fieldset>
          <div style="padding-left:150px; padding-top:50px; padding-bottom:50px;" id="ClientsResults">
@*@{Html.RenderPartial("_Client", Model); }*@
              @*<table id="flexClients" style="display:none"/>*@

</div>
      }

@*<br />*@ 
```

您还可以在此处查看所有已评论的尝试。因此，Clients 控制器中的 Search 方法现在具有以下代码：

```
public ActionResult Search(int? searchClientNo = null, string searchClientName = null)
        {
            // Assume we want to select everything
            var clients = Db.Clients; // Should set type of clients to IQueryable<Clients>

            if ((searchClientNo ?? 0) != 0) //Number was supplied
                clients = clients.Where(c => (c.Number == searchClientNo));

            // If clientNo was supplied, clients is now filtered by that. If not, it still has the full list. The following will further filter it.
            if (!String.IsNullOrWhiteSpace(searchClientName)) // Part of the name was supplied
                clients = clients.Where(c => (c.Name.Contains(searchClientName)));

            return PartialView("_ClientsSearch", clients);
            //return PartialView("_Client", clients);
        } 
```

注释视图是具有 flexigrid 且无法正常工作的部分视图。_ClientsSearch 视图是使用模板创建的“正常”索引视图，并且可以正常工作。

你明白我到底错过了什么吗？当我尝试将 flexigrid 方法用作该主视图的局部视图时，它根本不会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:22:02.483

我还没有弄清楚我最初想到的更复杂的场景，但我能够使用常规视图使其工作。这个有用的想法首先来自这个常见问题解答： [http](http://code.google.com/p/flexigrid/wiki/FAQ) ://code.google.com/p/flexigrid/wiki/FAQ ，并且看起来更接近我使用的那个示例。

所以，现在我的客户视图是这样的：

```
 @model CardNumbers.Objects.Client

@{
    ViewBag.Title = "Client";
}

 <form id="frmClientsSearch">

        <label for="clientNo">Client No: </label>
        <input type="number" name="searchClientNo" class="numericOnly" /><br />
        <label for="clientName">Client Name: </label>
        <input type =  "text" size =25 value ="Please enter the search value"
            name ="searchClientName" />

       <input type="button" id="btnClientsSearch" value ="Find / Refresh" />      
</form>
<div style="padding-left: 150px; padding-top: 50px; padding-bottom: 50px;" id="ClientsResults">
    <table id="flexClients" style="display: none">
    </table>
</div>
<div style="display: none">
   <form id="sform">
        <input type="hidden" id="fntype" name="fntype">
        <input type="hidden" id="Id" name="Id">
        <label for="Number">Client No: </label>
        <input type="number" id="Number" name="Number" class="numericOnly" />
        <label for="Name">Client Name: </label>
        <input type="text" size="25" id="Name" name="Name" /><br />
        <label for="Contact11">Contact 1: </label>
        <input type="text" size="25" id="Contact1" name="Contact1" /><br />
        <div class="float-right">
            <button type="Submit" id="btnSave">Submit</button>
            <button type=reset id="btnCancel">Cancel</button>
        </div>
    </form>
</div> 
```

主要工作是在 .js 文件中完成的（注意 AddFormData 方法）：

```
 /// <reference path = "jquery-1.5.1-vsdoc.js"/>
/// <reference path = "jquery-ui-1.8.11.js"/>

$(document).ready(function() {
    $(":input[data-autocomplete]").each(function() {
        $(this).autocomplete({ source: $(this).attr("data-autocomplete") });
    });
});

$(function () {
    $('input[name="delete"]').click(function () {
        return confirm('Are you sure?');
    });
});

$(".numericOnly").keypress(function (e) {
    if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
});

    $("#flexClients").flexigrid({
        url: '/Client/Client/',
        dataType: 'json',
        colModel: [
        { display: 'Client Id', name: 'Id', width: 100, sortable: true, align: 'center', hide: true},
        { display: 'Client #', name: 'Number', width: 100, sortable: true, align: 'center' },
        { display: 'Name', name: 'Name', width: 350, sortable: true, align: 'center' },
        { display: 'Contact 1', name: 'Contact1', width: 350, sortable: true, align: 'center' },
        ],
        buttons: [
        { name: 'Add', bclass: 'add', onpress: test },
        { name: 'Edit', bclass: 'edit', onpress: test },
        { name: 'Delete', bclass: 'delete', onpress: test },
        { separator: true }
        ],
        searchitems: [
        { display: 'Client Name', name: 'Name' }
        ],
        sortname: "Name",
        sortorder: "asc",
        usepager: true,
        title: 'Clients',
        useRp: true,
        rp: 15,
        showTableToggleBtn: true,
        width: 1000,
        onSubmit: addFormData,
        height: 300
    });

//This function adds parameters to the post of flexigrid. You can add a verification as well by return to false if you don't want flexigrid to submit           
function addFormData() {

    //passing a form object to serializeArray will get the valid data from all the objects, but, if the you pass a non-form object, you have to specify the input elements that the data will come from
    var dt = $('#sform').serializeArray();
    dt = dt.concat($('#frmClientsSearch').serializeArray());

    $("#flexClients").flexOptions({ params: dt });

    return true;
}

$('#sform').submit(function () {

    $('#flexClients').flexOptions({ newp: 1 }).flexReload();
    alert("Hello World");
    return false;
});

function test(com, grid) {
    if (com === 'Delete') {
        var clientName = $('.trSelected td:eq(2)').text();
        if (clientName) //Variable is defined and not empty
        {
            if (confirm("Are you sure you want to delete " + $.trim(clientName) + "?"))
                return false;

            $('#fntype').val('Delete');
            $('#Id').val($('.trSelected td:eq(0)').text());
            $('#Number').val('');
            $('#Name').val('');
            $('#Contact1').val('');

            $('.trSelected', grid).each(function () {
                var id = $(this).attr('id');
                id = id.substring(id.lastIndexOf('row') + 3);

                addFormData(); $('#flexClients').flexOptions({ url: '/Client/Client/' }).flexReload();
            });

            clearForm();
        }
    } else if (com === 'Add') {

        $("#sform").dialog({
            autoOpen: false,
            show: "blind",
            width: 1000,
            height: 500
        });
        $("#sform").dialog("open");

        $('#fntype').val('Add');
        $('#Number').val('');
        $('#Name').val('');
        $('#Contact1').val('');

    } else if (com === 'Edit') {

        $('.trSelected', grid).each(function () {

            $("#sform").dialog({
                autoOpen: false,
                show: "blind",
                width: 1000,
                height: 500
            });
            $("#sform").dialog("open");

            $('#fntype').val('Edit');
            $('#Id').val($('.trSelected td:eq(0)').text());
            $('#Number').val($('.trSelected td:eq(1)').text());
            $('#Name').val($('.trSelected td:eq(2)').text());
            $('#Contact1').val($('.trSelected td:eq(3)').text());

        });

    }
}

function clearForm() {    

        $("#sform input").val("");    

};

$(function () {
    $('#btnSave').click(function () {
        addFormData();
        $('#flexClients').flexOptions({ url: '/Client/Client/' }).flexReload();
        clearForm();
        $('#sform').dialog('close');
        return false;
    });
});

$(function () {
    $('#btnCancel').click(function () {      

      //  clearForm();
        $('#sform').dialog('close');
        return false;
    });
});

$(function () {
    $('#btnClientsSearch').click(function () {
        addFormData();
        $('#flexClients').flexOptions({ url: '/Client/Client/' }).flexReload();
        //$.ajax({
        //    url: $(this).data('url'),
        //    type: 'GET',
        //    cache: false,
        //    success: function (result) {
        //        $('#ClientsResults').html(result);
        //    }
        //});
        return;//false;
    });
}); 
```

我在控制器中的 Client 方法与以前相同，只是稍作更改。

* * *

现在，我的下一个挑战是概括上述内容，并且以某种方式而不是调用我展示的表单 sForm，而是使用更复杂的带有验证的表单，就像它来自 Create/Edit 视图一样。

# glsl - GLSL：找不到我的自定义函数

> ID：12864203
> 
> 赞同：10
> 
> 时间：2012-10-12T17:26:07.217
> 
> 标签：glsl, webgl, three.js

所以我有这个片段着色器，在我将一些逻辑重构为一个单独的函数之前，它运行良好。我希望能够多次调用它以将不同版本的效果叠加在一起。

但是，一旦我创建了这个自定义函数，着色器就会开始抛出错误：

```
ERROR: 0:33: 'grid' : no matching overloaded function found 
```

这很奇怪，因为它似乎将其编译为函数。如果我从中删除`return`，`grid()`我也会收到此错误：

```
ERROR: 0:36: '' : function does not return a value: grid 
```

那么关于声明函数，我在这里遗漏了什么？

完整的着色器在这里：

```
uniform float brightness;
uniform float shiftX;
uniform float shiftY;

uniform vec4 color;
varying vec3 vPos;

void main() {
  gl_FragColor = vec4( grid(200.0), 0.0, 0.0, 1.0 );
}

float grid(float size) {
  float x = pow(abs(0.5 - mod(vPos.x + shiftX, 200.0) / 200.0), 4.0);
  float y = pow(abs(0.5 - mod(vPos.y + shiftY, 200.0) / 200.0), 4.0);
  return (x+y) * 5.0 * pow(brightness, 2.0);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T17:29:51.743

您要么必须将网格函数放在 main 之前，要么像在 c 中那样前向声明它。

如：

```
float grid(float size); 
```

在主要方法之前。

# php - pdo mysql insert 将相同的东西放在多个字段中

> ID：12864212
> 
> 赞同：2
> 
> 时间：2012-10-12T17:27:09.347
> 
> 标签：php, pdo

好的，由于某种原因，这个查询：

```
$db->sqlquery("INSERT INTO `password_reset` SET `user_email` = ?, `secret_code` = ?, `expires` = ?", array($email, $random_string, $next_week)); 
```

在每个字段中输入“random_string”，我不知道为什么。

这是我的查询代码：

```
 public function sqlquery($sql, $objects = array())
{
    global $core;
    try
    {
        $this->STH = $this->database->prepare($sql);

        foreach($objects as $k=>$p)
        {
            // +1 is needed as arrays start at 0 where as ? placeholders start at 1 in PDO
            if(is_numeric($p))
            {
                $this->STH->bindParam($k+1, $p, PDO::PARAM_INT);
            }
            else
            {
                $this->STH->bindParam($k+1, $p, PDO::PARAM_STR);
            }
        }

        return $this->STH->execute();

        $this->counter++;
    }

    catch (PDOException $e)
    {
        $core->message($e->getMessage());
    }
} 
```

知道为什么会这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:58:52.090

PDO 参数受引用约束。因此，您的所有参数都被绑定为对同一`$p`变量的引用，该变量在执行查询时的值是数组的最后一个元素。

尽管您说插入到所有字段中的值是数组的*第二个*元素。我不确定为什么会这样。

解决方案是使用`bindValue`而不是`bindParam`.

# ruby-on-rails - 带有二进制 uuid 的 link_to 模型

> ID：12864215
> 
> 赞同：0
> 
> 时间：2012-10-12T17:27:19.970
> 
> 标签：ruby-on-rails, activerecord, uuid

我正在为我的模型使用 uuid，他们会发表评论。我这样做是为了不必在我的评论表中定义任何类型。

为了获得最佳性能和存储限制，我在表格中将 uuid 作为二进制文件。

```
> Task.first.id
# gives
\xD8<\x92&\x14\x80\x11\xE2\x82\xB8\xC4\x85\b\"\xE2_ 
```

如果我使用例如：

```
<%= link_to "task", task_item %> 
```

我不会得到任何有效的链接。

```
<a href="http://localhost:3000/tasks/%D8X%C4n%14%80%11%E2%82%B8%C4%85%08%22%E2_">Task</a> 
```

**我的问题是。我可以对我的模型做些什么，这样我就不必每次在我的视图和控制器中来回解析我的 uuid。**

*编辑：请不要评论或回答我没有 uuid 作为主键。我的目标是拥有多个网络应用程序和其他客户端，如本地 linux 和/或 android 应用程序，它们可以相互通信。它们也可以在离线模式下或通过本地网络工作，然后在用户需要时与服务器同步。所以我宁愿已经开始使用 uuid，这样我以后就不必进行大量的大型数据库合并。*

# c++ - 为什么要以这种方式执行乘法？

> ID：12864216
> 
> 赞同：9
> 
> 时间：2012-10-12T17:27:35.060
> 
> 标签：c++, multiplication, fixed-point

我遇到了这个功能：

```
static inline INT32 MPY48SR(INT16 o16, INT32 o32)
{
    UINT32   Temp0;
    INT32    Temp1;
    // A1\. get the lower 16 bits of the 32-bit param
    // A2\. multiply them with the 16-bit param
    // A3\. add 16384 (TODO: why?)
    // A4\. bitshift to the right by 15 (TODO: why 15?)
    Temp0 = (((UINT16)o32 * o16) + 0x4000) >> 15;
    // B1\. Get the higher 16 bits of the 32-bit param
    // B2\. Multiply them with the 16-bit param
    Temp1 = (INT16)(o32 >> 16) * o16;
    // 1\. Shift B to the left (TODO: why do this?)
    // 2\. Combine with A and return
    return (Temp1 << 1) + Temp0;
} 
```

内联评论是我的。似乎它所做的只是将这两个参数相乘。这是正确的，还是还有更多？为什么会这样做呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T18:43:16.817

这些参数不代表整数。*它们以定点*格式表示实数，小数点右侧有 15 位。例如，1.0 表示为 1 << 15 = 0x8000，0.5 表示 0x4000，-0.5 表示 0xC000（或 32 位中的 0xFFFFC000）。

添加定点数很简单，因为您只需添加它们的整数表示。但是如果要相乘，首先必须将它们作为整数相乘，但是小数点右侧的位数是原来的两倍，因此必须通过移位丢弃多余的位。例如，如果您想以 32 位格式将 0.5 与自身相乘，则将 0x00004000 (1 << 14) 与自身相乘得到 0x10000000 (1 << 28)，然后右移 15 位得到 0x00002000 (1 < < 13)。为了获得更好的准确性，当您丢弃最低 15 位时，您希望四舍五入到最接近的数字，而不是向下舍入。您可以通过添加 0x4000 = 1 << 14 来做到这一点。然后如果丢弃的 15 位小于 0x4000，则向下舍入，如果为 0x4000 或更大，则向上舍入。

```
 (0x3FFF + 0x4000) >> 15 = 0x7FFF >> 15 = 0
 (0x4000 + 0x4000) >> 15 = 0x8000 >> 15 = 1 
```

总而言之，您可以像这样进行乘法运算：

```
 return (o32 * o16 + 0x4000) >> 15; 
```

但是有一个问题。在 C++ 中，乘法的结果与其操作数具有相同的类型。So`o16`提升为与 相同的大小`o32`，然后将它们相乘得到 32 位结果。但这会丢弃最高位，因为该产品需要 16 + 32 = 48 位才能准确表示。一种方法是将操作数转换为 64 位，然后相乘，但这可能会更慢，并且并非所有机器都支持。因此，它改为`o32`分成两个 16 位片段，然后在 32 位中进行两次乘法运算，然后合并结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T18:37:52.080

这实现了[定点数](http://en.wikipedia.org/wiki/Q_%28number_format%29)的乘法。这些数字被视为采用 Q15 格式（小数部分有 15 位）。

在数学上，此函数计算`(o16 * o32) / 2^15`，四舍五入到最接近的整数（因此`2^14`，表示 的因子被`1/2`添加到一个数字中以对其进行四舍五入）。它使用无符号和有符号的 16 位乘法与 32 位结果，这可能是指令集支持的。

请注意，存在一个极端情况，其中每个数字都有一个最小值（-2^15 和 -2^31）；在这种情况下，结果 (2^31) 无法在输出中表示，并被包裹起来（变为 -2^31）。对于 和 的所有其他组合`o16`，`o32`结果是正确的。

# php - 如何在 php-openid 中使用属性交换 (AX)？

> ID：12864219
> 
> 赞同：1
> 
> 时间：2012-10-12T17:27:48.583
> 
> 标签：php, openid, janrain, openid-provider

我们正在使用 Janrain 的 php-openid 库。没有关于如何使用 AX.php 类并在 OpenID 提供程序/服务器上配置它的文档或示例。

我们在消费者/客户端示例中找到了一个关于此的线程：[Example usage of AX in PHP OpenID](https://stackoverflow.com/questions/1183788/example-usage-of-ax-in-php-openid)

我们想在提供者和消费者上使用的属性交换类型在此处定义：http: [//web.archive.org/web/20100827030457/http ://www.axschema.org/types/](http://web.archive.org/web/20100827030457/http://www.axschema.org/types/)

有人可以解释一下，如何在提供者和消费者上使用 AX 类吗？我还需要更改文件吗？

# node.js - nodejs内存分析

> ID：12864221
> 
> 赞同：4
> 
> 时间：2012-10-12T17:27:58.210
> 
> 标签：node.js, profiling

需要剖析节点进程。在运行节点进程几天后，我在生产中出现了一些内存泄漏。

我已经尝试过 node-inspector + v8，但它不起作用，在新版本的 node-inspector 中没有配置文件选项卡。在旧版本中，当我开始分析错误并停止调试时。

我也尝试过nodetime.com，但它没有显示我需要什么，而且它占用了太多内存，它不适合生产。

我也尝试过 dtrace （[http://blog.nodejs.org/2012/04/25/profiling-node-js/](http://blog.nodejs.org/2012/04/25/profiling-node-js/)），但它没有给我必要的信息。

* * *

那么我需要什么信息来分析内存：
获取实时实例、实例计数、内存大小、实例类型

你知道如何获取这些信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:11:43.237

我发现[node-memwatch](https://github.com/lloyd/node-memwatch)很有用。

缺点是您必须将它嵌入到您的应用程序中并为其编写一些代码，但它对于检查不同位置的堆以查看在您执行某些操作后它发生了多大变化很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T20:18:03.853

您可以尝试使用[外观](https://github.com/baryshev/look)模块。它基于[节点时间](https://github.com/nodetime/nodetime)，但在本地工作。

# visual-studio-2010 - 在VS中保存设置而不退出

> ID：12864222
> 
> 赞同：7
> 
> 时间：2012-10-12T17:27:58.960
> 
> 标签：visual-studio-2010, crash, settings

我很少故意关闭 Visual Studio。我正在处理的项目非常庞大，加载它大约需要 15 分钟，所以我的习惯是让解决方案在一夜之间打开，以便第二天早上为我准备好。我现在必须重新启动程序的唯一一次是它是否崩溃 - 发生了。每隔一段时间，我就会做一些它不喜欢的事情，然后它就会放弃我。我接受这一点。我希望它是防弹的，但我几乎没想到会这样。

这样做的缺点显然是，您在程序运行时更改的任何设置（字体和颜色、键盘快捷键、自动格式化设置，基本上是“工具/选项”对话框中的任何内容）只有在您合法退出程序时才会保存。崩溃时**不会**保存这些设置。所以我发现自己每次都必须重做任何设置更改。

首先 - 为什么在*更改设置时它不保存设置*？那会有多难？相信您的程序将始终正常关闭并且在关闭过程之前不会打扰保存状态，这是某种程度的狂妄自大。（并且在异常关闭过程中也没有保存设置）我会因为编写这样做的代码而被解雇（或至少受到谴责），那么微软如何摆脱它呢？是否有某种方法可以强制它在不退出和重新加载的情况下保存设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T08:15:08.730

据我所知，在您的情况下，您唯一能做的就是在更改设置后直接导出设置，并在崩溃后导入它们。这样你的设置是安全的，你不需要重新启动。

# objective-c - UIView 中的 CG 绘图用作 UIImage？

> ID：12864223
> 
> 赞同：0
> 
> 时间：2012-10-12T17:27:59.973
> 
> 标签：objective-c, core-graphics, uinavigationbar, uibarbuttonitem, uiappearance

我正在尝试为 UINavigationbar 创建一个自定义后退按钮。

我知道我可以`backButtonBackgroundImageForState:barMetrics:`用来设置图像。

我的问题是我不必使用图像文件。我宁愿在代码中绘制后退按钮。

我的问题是我可以继承一个 UIView，覆盖 drawrec: 来绘制一个后退按钮，然后使用该 UIView 作为图像`backButtonBackgroundImageForState:barMetrics`：

我想它会是这样的：

```
UIImage * backButtonImage = // somehow get image from my subclassed UIView;

backButtonImage = [backButtonImage stretchableImageWithLeftCapWidth: 15.0 topCapHeight: 30.0];

[[UIBarButtonItem appearance] setBackButtonBackgroundImage: backButtonImage forState: UIControlStateNormal barMetrics: UIBarMetricsDefault]; 
```

这甚至是解决这个问题的最好方法吗？或者我应该把它吸起来然后在 Photoshop 中创建一个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:39:12.860

您可以使用创建位图图像上下文`UIGraphicsBeginImageContextWithOptions`，而无需创建子类`UIView`和覆盖`drawRect:`。

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(80, 30), NO, 0);
// drawing code here
// Use UIKit functions and objects
// or use CoreGraphics functions on UIGraphicsGetCurrentContext()
UIImage *image = UIGraphicsGetImageFromCurrentContext();
UIGraphicsEndImageContext(); 
```

# android - 阻止 Facebook 移动应用

> ID：12864225
> 
> 赞同：5
> 
> 时间：2012-10-12T17:28:03.113
> 
> 标签：android, ios, facebook, mobile

这可能看起来与这里的普通帖子相反，但我被引导到堆栈溢出作为来自 FB 开发人员网站的问题论坛，所以这里开始！

我是一名网络工程师，协助当地学区进行一些网络升级。部分升级涉及设置 Web 内容过滤器 (Untangle)，效果很好。出于各种原因，他们希望在正常上课时间阻止从学校网络访问 Facebook。普通网站和移动网站被阻止，但 Web 内容过滤器不会阻止移动应用程序（因为请求不是来自浏览器，所以对流量的分析方式不同）。

我已经和他们开了一张票，看看是否有解决方法，但我正在寻找一种方法来阻止移动应用程序访问 Facebook，直到他们找到解决方案。我可以在我们的 Cisco ASA 上阻止哪些 IP/主机名/端口来阻止流向移动应用站点的流量？是否有一个简单的检查应用程序是否可以连接到 FB，我可以拦截并“欺骗”它认为它没有网络访问权限？

这些是个人设备，因此我们无法对其进行更改，是的，我意识到从技术上讲，他们仍然可以通过他们的移动提供商获得访问权限。

提前感谢您的想法和任何建议！

-比蒂

# c - int **p 的奇怪行为？

> ID：12864226
> 
> 赞同：1
> 
> 时间：2012-10-12T17:28:05.000
> 
> 标签：c, visual-c++

> **可能重复：**
> [二维数组如何在内存中格式化？](https://stackoverflow.com/questions/2565039/how-are-two-dimensional-arrays-formatted-in-memory)

```
int map[3][3] = {1,2,3,4,5,6,7,8,9};
int **p = map;
printf( "%d", *p+1 ); 
```

有人能告诉我为什么结果是**5**吗？而如果

```
printf( "%d", *p+2); 
```

结果是**9**？（由 Visual C++ 编译）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:36:41.190

因为数组不是指针。双指针不等同于二维数组，因为数组在内存中是连续的。您的数组已创建并填充数据，如下所示：

```
map[0][0] = 1
map[0][1] = 2
map[0][2] = 3
map[1][0] = 4
map[1][1] = 5
map[1][2] = 6
map[2][0] = 7
map[2][1] = 8
map[2][2] = 9 
```

当您将其分配给双指针时，您做错了几件事。例如：

```
printf("%d", *p + 1); 
```

不做你认为它做的事。这是未定义的行为，因为`*p`is的类型`int *`但`%d`格式说明符需要`int`. 基本上，不要试图将数组视为指针，因为**它们不一样。**请阅读[C FAQ 的相关部分，](http://c-faq.com/aryptr/index.html)以了解如何正确处理这种情况。基本上，在这种情况下使用一维指针并正确索引就足够了。

示范：

![在此处输入图像描述](../Images/917558000a4fbb4bd7b6a0833e3a23d1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:45:12.073

要修改 H2C03 的答案...

您的第一个 deref 会将您带入数组 1 维度。具体来说，它让您指向“1”的条目。

这里的大多数人似乎并没有完全弄清楚接下来会发生什么。此时' *p'仍然被认为是一个指针。它认为它包含地址“1”。当您执行“+1”时，您实际上得到的是指针算术。由于 sizeof(int* ) （通常）为 4，因此您只需打印矩阵 +4 的第一个元素。因此 +2 转换为 +8 因为指针运算总是根据指针指向的“事物”的大小来完成。所以你得到 5 和 9。

将显示代码的快速解除。

```
mov eax, DWORD PTR ?p@@3PAPAHA      ; p
mov ecx, DWORD PTR [eax]            ; deref of p (which is '1')
add ecx, 4                          ; let's just +4 it and push it as the arg to printf
push    ecx
push    OFFSET $SG3670
call    _printf 
```

# ajax - 当传统和异步为假时，对 $.ajax() 感到困惑

> ID：12864228
> 
> 赞同：3
> 
> 时间：2012-10-12T17:28:07.793
> 
> 标签：ajax, jquery

我有以下代码：

```
var params = {
  task: task,
  pk: pk,
  rk: rk,
  responses: null
}

var resp = [];
$(".city-checkbox").each(function () {
  var i = parseInt(this.id.match(/\d+/)[0], 10);
  resp[i] = this.checked;
});
parms.responses = resp;

$.ajax({
  type: "POST",
  traditional: true,
  async: false,
  data: parms,
  dataType: "json",

  [...]
}); 
```

我的代码向 ASP MVC 操作发送 POST 请求。我查看了 jQuery 文档，但仍然无法理解传统的功能。有人可以解释我是否真的需要在这里使用它。

与 async false 相同：它有什么缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:35:04.473

的文档`traditional`实际上在[jQuery.param](http://api.jquery.com/jQuery.param/)结束：

> 从 jQuery 1.4 开始，该`$.param()`方法递归地序列化深层对象以适应现代脚本语言和框架，例如 PHP 和 Ruby on Rails。您可以通过设置全局禁用此功能`jQuery.ajaxSettings.traditional = true;`。

您是否要使用该标志取决于您的后端将如何反序列化参数。除非您遇到麻烦，否则您可能希望坚持使用默认值`false`- 但我可能是错的。您应该在您的特定环境中对其进行测试。

* * *

更新 - 正如 Kevin 所说，除非您真的知道自己在做什么，否则*永远不要*使用`async: false`，因为它会阻止用户的浏览器，直到 AJAX 调用完成。你将无法控制这一点。更好的方法是使用默认设置`async: true`并显示一个旋转的 GIF 或类似的东西来自己阻止 UI 并让用户知道他们需要等待。

# web-services - SOA Webservices - 如何在 Git 上管理单个服务开发

> ID：12864231
> 
> 赞同：6
> 
> 时间：2012-10-12T17:28:31.797
> 
> 标签：web-services, git, version-control, architecture, soa

作为更大 SOA 计划的一部分，我们在 Oracle Service Bus 上开发了许多 Web 服务。目前这些在 SVN 上进行管理。SVN 允许我们管理单个服务的版本控制，因为它允许我们在单个文件夹级别创建标签和分支。以下是我们遵循的典型结构，

```
 +- Services
   |
   +- Service1
   |   |
   |   +- tags
   |   |
   |   +- branch1
   |   |
   |   +- trunk
   |       |
   |       +- artefacts
   |
   +- Service2
   |   |
   |   +- tags
   |   |
   |   +- branch1
   |   |
   |   +- trunk
   |       |
   |       +- artefacts
   |
   +- service N 
```

Git 绝对不允许在文件夹级别进行版本控制。我们有 150 多个 Web 服务，每个服务都可以有自己的开发周期，并且可以构建到可部署的环境中。我们当前策略到 Git 的直接映射是将每个服务作为一个 git 存储库，并且也遵循 git 的原则，但这使得我们拥有超过 150 个 git 存储库。

这种方法对吗？有没有更好的方法？任何人在开发大量网络服务时都有类似的用例吗？

我们还考虑过创建某种逻辑分组并为该组创建 git 存储库，但我认为这是一个错误的策略，因为这会使我对单个服务的版本控制和标记变得混乱。git中还有其他方法可以管理这种分组吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T17:41:07.907

## 子模块和回购管理

您可以将它们与子模块分组 - 如果需要，可以递归。ProGit[书](http://git-scm.com/book/en/Git-Tools-Submodules)很好地解释了这一点。[您可以使用gitolite](https://github.com/sitaramc/gitolite#readme)非常轻松地管理大量存储库- 直到用户可以访问哪些存储库以及该存储库中的哪些分支。

## 每个功能的分支

至于标准 SVN 分支策略的一个很好的替代方案，谷歌“每个功能的分支”，你应该看到[我](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)关于这个确切主题的文章。我们提出的策略部分是由于处理了大量的存储库。

因为您使用的是Oracle，所以我应该为大家指出显而易见的：**不要通过数据库集成。**如果你是，就在这里停止阅读。我为你的灵魂祈祷。

* * *

## 建筑胶

根据 SOA，我将指定一个存储库来保存您的合同或版本化消息 - 版本化意味着您支持同一消息的多个版本（通常 3：当前、已弃用和特定异常 - 所有以前的都应该引发未处理的异常），因此您可以滚动在处理客户端 - 服务器和发布 - 订阅关系时，在 0 停机部署期间推出新版本的横向扩展服务并支持新旧客户端。此存储库是具有集成端点的所有存储库的子模块。

## 挂钩

向此存储库添加一个[钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)，以仅允许转发在架构级别体现[OCP（打开关闭原则）的更改。](http://en.wikipedia.org/wiki/Open/closed_principle)您根本不允许对已发布的类进行任何更新。一旦发布，您必须支持它。Gitolite 使得远程管理钩子变得非常容易。它本身使用它们来透明地添加它的功能。

## 合同迁移

此外，事件溯源状态使消息版本迁移（除其他外）变得更容易。这是 CQRS（命令查询职责分离）的一个子集。[甚至微软也在这样做](http://msdn.microsoft.com/en-us/library/jj554200.aspx)，我很幸运能参与其中。[相关的是来自DDD（域驱动设计）](http://domaindrivendesign.org/)的上下文映射和反腐败层，用于管理服务外部存在的消息与服务内部使用的消息。可以在 Ubiquitous Language（也来自 DDD）和 Domain Specific Language（参见 Martin Fowler[在此处](http://martinfowler.com/bliki/DomainSpecificLanguage.html)的文章）下找到有关这方面的更多指南。

## 执行

考虑使用[0MQ (ZeroMQ)](http://www.zeromq.org/)进行交付，以避免其他“消息总线”想法的潜在巨大技术足迹。这确实将持续排队的责任推到了你的肩上——总体上推动了一个更强大的策略。有关如何完成的线索，请参阅上一段。如果在 Windows 环境中遇到 WCF，请考虑[服务堆栈。](http://www.servicestack.net/)技术中的魔法/自动生成的代码越少，您在解决冲突的困难场景、部署、测试等方面遇到的问题就越少。

# php - 如何在代码点火器的控制器中的 else 语句中回显表单错误？

> ID：12864233
> 
> 赞同：0
> 
> 时间：2012-10-12T17:28:35.740
> 
> 标签：php, codeigniter, validation

我在代码点火器中为我的登录表单提交错误表单的所有不同组合都正常工作。

**编辑 - 这似乎是最合乎逻辑的形式，因为其他建议是加载双视图，或者与我的结构没有凝聚力。除一个错误外，所有错误都正常工作。

当您使用正确的电子邮件和乱码密码点击提交时，不会出现错误，并且页面会重新加载，输入的电子邮件自动填充，密码字段设置回默认的“密码”文本。

我一直坚持这一点太久了，任何帮助都将不胜感激。

```
function validate_credentials_login()
    {
        $this->load->library('session');
        $this->load->helper(array('form','url'));
        $this->load->model('user_model', 'um');
        $this->load->library('encrypt');
        $this->load->library('form_validation');

        $this->form_validation->set_rules('email_login', 'Email', 'trim|required|valid_email'); 
        $this->form_validation->set_rules('password_login', 'Password', 'trim|required');

        if ( $this->form_validation->run() === TRUE ) 
        {   
            $user = $this->um->validate_home_login(array('email' => $this->input->post('email_login')));

            if ( $user )
            {
                if ( $user->password == $this->encrypt->sha1( $user->salt .         $this->encrypt->sha1($this->input->post('password_login'))) && $user->email == $this->input->post('email_login') ) 
                {
                    $this->session->set_userdata(array('email' => $this->input->post('email_login')));
                    redirect('account/edit');
                }
                else
                {
                   $this->form_validation->run() == FALSE;
                }
            }
            else
            {
                $this->form_validation->run() == FALSE;
            }
        }

  $data['main_content'] = 'home/home_page';
  $this->load->view('includes/templates/home_page_template', $data);   

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:57:38.570

我会做（并且已经做过）只是`validation_errors()`在登录视图页面上使用。你可以这样做：

```
if ($user)
    if ($success)
    {
        redirect(...);
    }
}
$this->load->view('login_page_template', $data); // Not sure what your login view is named 
```

在登录视图中：

```
...
<?php echo validation_errors('<div class="errors_login">', '</div>'); ?>
... 
```

如果你稍微改变你的逻辑，你可以摆脱's 并在语句运行`else`后加载登录视图。`if`如果用户成功登录，他们将在登录视图加载之前被重定向。这样，您就不必`else`一遍又一遍地重复每个 if 语句并重复相同的代码。让我知道这是否没有意义。

编辑：就像@m4t1t0 说的，你不必将错误传递给视图，你可以在`echo validation_errors('<div class="errors_login">', '</div>');`任何你想要错误出现的地方。我已经更新了我的示例以反映这一点。

如果您想在每个表单项上方单独显示错误（即电子邮件不存在、密码不正确等），那么您可以`echo form_error('field_name');`在每个相应的位置使用。

编辑 2：我也刚刚注意到您正在使用 sha1 加密来加密您的密码。这对于低安全性设置很好，但我建议使用 PHP 的[`crypt()`](http://us3.php.net/manual/en/function.crypt.php)函数，默认情况下使用 Blowfish 算法（如果可用）。这是一个**基本**的实现：

```
// to make password hash
$password = crypt($this->input->post('password'));

// to check password hash
if (crypt($this->input->post('password'), $password_from_db) == $password_from_db)
{
    // success 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:20:43.430

正如@Brendan 所说，您不需要最后 2 个 else 语句，但您甚至不需要将错误传递给视图！你可以把这段代码：

在控制器中：

```
$this->form_validation->set_rules('email_login', 'Email', 'trim|required|valid_email'); 
$this->form_validation->set_rules('password_login', 'Password', 'trim|required');

if ( $this->form_validation->run() === TRUE ) 
{   
  $user = $this->um->validate_home_login(array('email' => $this->input->post('email_login')));

  if ( $user )
    {
    if ( $user->password == $this->encrypt->sha1( $user->salt .         $this->encrypt->sha1($this->input->post('password_login'))) && $user->email == $this->input->post('email_login') ) 
      {
        $this->session->set_userdata(array('email' => $this->input->post('email_login')));
        redirect('account/edit');
      }

  $data['main_content'] = 'home/home_page';
  $this->load->view('includes/templates/home_page_template', $data);   
} 
```

在视图中：

```
<?php echo validation_errors('<div class="error">', '</div>'); ?> 
```

<div class="error" 仅在验证表单时出现错误时显示，在其他情况下不显示任何内容。

# php - 数据库中的空文本框为 NULL

> ID：12864236
> 
> 赞同：0
> 
> 时间：2012-10-12T17:28:43.060
> 
> 标签：php, mysql, null, string

当文本框为空时，我在 UPDATE 中设置空值有问题。这是我的价值：

```
$kod = $_POST['Kod'];
$kod = !empty($kod) ? "'$kod'" : "NULL"; 
```

和查询：

```
$query = "UPDATE Sprzety SET Kod = $kod, Wlasciciel = '$wlasciciel', Konfiguracja = '$konfiguracja' WHERE SprzetID = '$id'"; 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:45:18.213

你应该使用`mysqli_`or`PDO`函数。下面是一个`mysqli_`程序解决方案：

```
$kod = !empty($_POST['Kod']) ? $_POST['Kod'] : null;

//$link refers to your mysqli_ connection
if ($stmt = mysqli_prepare($link, 
    "UPDATE UPDATE Sprzety 
     SET Kod = ?, Wlasciciel = ?, Konfiguracja = ?
     WHERE SprzetID = ?")) {

/* bind parameters for markers */
mysqli_stmt_bind_param($stmt, "sssi", $kod, $wlasciciel, $konfiguracja, $id);

/* execute query */
mysqli_stmt_execute($stmt); 
```

# zend-framework2 - zend framework 2 邮件设置默认发件人

> ID：12864240
> 
> 赞同：0
> 
> 时间：2012-10-12T17:28:51.783
> 
> 标签：zend-framework2, zend-mail

ZF1`Zend_Mail`有一个静态方法`setDefaultFrom($email, $name = null)`。此处指定的值在没有为具体对象指定的情况下用作默认值。

ZF2 不再有门面组件 Zend\Mail。相反，您应该明确使用

```
Zend\Mail\Transport\TransportInterface::send(Mail\Message $message) 
```

我的建议是将默认发件人存储在配置中，并在每次创建 Zend\Message 对象时设置它。我们甚至可以更进一步，在 Module 中为邮件消息创建工厂，每次都实例化新对象并注入默认发件人（确保您不共享相同的消息对象）

```
'service_manager' => array(
    'shared' => array(
        'default_mail_message' => false,
    ),
), 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:10:16.607

我不确定你在问什么。您建议的方法肯定没有错。

就我自己而言，我已将默认发件人存储在配置中，并每次在我的应用程序中进行设置，应用程序发送的每封电子邮件的发件人都是不同的。

# php - 一个类中的两个方法在他们的工作上如此接近

> ID：12864242
> 
> 赞同：0
> 
> 时间：2012-10-12T17:29:04.220
> 
> 标签：php

我有这个类，它有这两种彼此密切相关的方法。我不想传递标志，所以我将它们分开。我想知道是否有办法重写它，这样我就不必如此密切地重复了！

```
 class Test extends Controller
    {
        public static function nonFormattedData($param)
        {
            $arr = array();
            if (is_array($param)) {
                $i = 0;
                $sql = "
                    select *
                    from table1
                    where
                    ";

                if (isset($param['startDate'])) {
                    $sql .= "   date_created between ? AND  ?";
                    $arr[] = $param['startDate'];
                    $arr[] = $param['endDate'];
                    $i++;
                }
                if (isset($param['amount']) && !empty($param['amount'])) {

                    if ($i > 0) $sql .= " AND ";
                    $sql .= " balance= ?";
                    $arr[] = $param['amount'];
                    $i++;
                }
                if (isset($param) && !empty($param['amount'])) {

                    if ($i > 0) $sql .= " AND ";
                    $sql .= " balance= ?";
                    $arr[] = $param['amount'];
                    $i++;
                }
                if (isset($param['createdBy']) && !empty($param['createdBy'])) {

                    if ($i > 0) $sql .= " AND ";
                    $sql .= " column2 like '%Created By: " . $param['createdBy'] . "%'";
                }
                $sql .= ' group by id.table1 ';
                $rs = Query::RunQuery($sql, $arr);
                foreach ($rs as $row) {
                    $records = new Account();
                    $results[] = $records;
                }
                return $results;
            }
        }

        public static function formattedData($serArray, $orderBy = "giftcardaccount_id desc", $offset = 0, $limit = 10)
        {
                $arr = array();
            if (is_array($param)) {
                $i = 0;
                $sql = "
                    select *
                    from table1
                    where
                    ";

                if (isset($param['startDate'])) {
                    $sql .= "   date_created between ? AND  ?";
                    $arr[] = $param['startDate'];
                    $arr[] = $param['endDate'];
                    $i++;
                }
                if (isset($param['amount']) && !empty($param['amount'])) {

                    if ($i > 0) $sql .= " AND ";
                    $sql .= " balance= ?";
                    $arr[] = $param['amount'];
                    $i++;
                }
                if (isset($param) && !empty($param['amount'])) {

                    if ($i > 0) $sql .= " AND ";
                    $sql .= " balance= ?";
                    $arr[] = $param['amount'];
                    $i++;
                }
                if (isset($param['createdBy']) && !empty($param['createdBy'])) {

                    if ($i > 0) $sql .= " AND ";
                    $sql .= " column2 like '%Created By: " . $param['createdBy'] . "%'";
                }
                $sql .= ' group by id.table1 ';
                $rs = Query::RunQuery($sql, $arr);

                return array("data" => $rs);
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:53:47.810

为什么没有一种方法，但有一个可选的格式化选项对象/数组？

```
public static function getData($params, $formatting = null) {
    // continue as normal, adding formatting if it's there
} 
```

# varnish - Varnish 3 - 如何在 http 标头中设置最大年龄

> ID：12864245
> 
> 赞同：3
> 
> 时间：2012-10-12T17:29:07.490
> 
> 标签：varnish, varnish-vcl

我正在使用 Varnish 3.0.3，并通过在静态资源的 HTTP 标头中设置最大年龄来使用它来利用浏览器缓存。我尝试将以下配置添加到 default.vcl：

```
sub vcl_fetch {
  if (beresp.cacheable) {
    /* Remove Expires from backend, it's not long enough */
    unset beresp.http.expires;

    /* Set the clients TTL on this object */
    set beresp.http.cache-control = "max-age=900";

    /* Set how long Varnish will keep it */
    set beresp.ttl = 1w;

    /* marker for vcl_deliver to reset Age: */
    set beresp.http.magicmarker = "1";
  }
}

sub vcl_deliver {
  if (resp.http.magicmarker) {
    /* Remove the magic marker */
    unset resp.http.magicmarker;

    /* By definition we have a fresh object */
    set resp.http.age = "0";
  }
} 
```

[这是从https://www.varnish-cache.org/trac/wiki/VCLExampleLongerCaching](https://www.varnish-cache.org/trac/wiki/VCLExampleLongerCaching)复制的。也许我只是打错了。在重新启动 Varnish 时，它不再起作用。

我有两个问题。这是为 Varnish 3 做的正确方法吗？如果是这样，我做错了什么？其次，有没有办法在重启之前测试 Varnish 配置文件？与 Apache 的“/sbin/service httpd configtest”类似。在上线之前发现错误。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:46:48.793

是的，通常这是覆盖后端 TTL 的方式。删除 beresp.http.expires，设置 beresp.http.cache-control，设置 beresp.ttl。beresp.cacheable 是一个 2.[01]-ism。3.0 中的相同测试是检查 beresp.ttl > 0。

一个小技巧是将你的魔法标记存储在 req.http 上，然后你不必在将对象交给客户端之前清理它。

关于测试配置文件，你可以直接调用 VCL 编译器，例如“varnishd -C -f /etc/varnish/default.vcl”。如果您的 VCL 有故障，您会收到错误消息，如果 VCL 有效，您会收到几页生成的 C 代码。

# php - 从表格的选定行中获取所有值

> ID：12864251
> 
> 赞同：0
> 
> 时间：2012-10-12T17:29:39.700
> 
> 标签：php, jquery, ajax

如何将表 2 中的一些值插入表 1。如果单击“添加”按钮，我想获取我选择的行的所有值。我应该`rowindex`从我选择的当前行中获取`$prod`价值`rowindex`吗？

```
<table id="table1">
    <tr>
        <th>Product ID</th>
        <th>Product Name</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Action</th>
    </tr>
    <?php foreach($prod->getAll() as $name):?>
    <tr>
        <td><?php echo $name['prod_id'];?></td>
        <td><?php echo $name['name'];?></td>
        <td><?php echo $name['price'];?></td>
        <td><?php echo $name['stock'];?></td>
        <td><button class="addbtn">Add</button></td>
    </tr>
    <?php endforeach;?>
</table>

<table id="table2">
<tr>
    <th>No</th>
    <th>Product Name</th>
    <th>Price</th>
    <th>Qty</th>
    <th>Total</th>
</tr>
<tr>
    <td>1</td>
    <td>Some Product Name From Table 1</td>
    <td>Some Product Price From Table 1</td>
    <td>Qty is generated from table 1</td>
    <td>Qty * Price</td>
</tr>
</table>

 <?php

 class Product extends DB_Connect
 {

    public function __construct()
    {
     parent::__construct();
    }

function getAll(){
    try
    {
        $sql = "SELECT * FROM product Order By prod_id asc";
        $result = $this->db->query($sql);
        $results = $result->fetchAll(PDO::FETCH_ASSOC);
        return $results;
    }
    catch ( Exception $e )
    {
        die ( $e->getMessage() );
    }
}
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:46:51.550

如果您使用的是 jQuery，则可以使用以下`closest()`功能：

```
$('.addbtn').click(function(){
    var row = $(this).closest('tr'),
        cells = row.find('td'),
        prodId = cells.eq(0).html(),
        name = cells.eq(1).html(),
        price = cells.eq(2).html(),
        stock = cells.eq(3).html();
}); 
```

小提琴：http: [//jsfiddle.net/Afk8a/1/](http://jsfiddle.net/Afk8a/1/)

# c# - MapPageRoute() 与站点的根目录重复加载目标资源

> ID：12864252
> 
> 赞同：0
> 
> 时间：2012-10-12T17:29:41.410
> 
> 标签：c#, asp.net, routes, global-asax

我有以下行`Global.asax.cs`：

```
routes.MapPageRoute( "Resorts", "{resortname}", "~/Pages/ViewResort.aspx" ); 
```

目的是允许这样的请求：

```
www.mysite.com/some-resort-name 
```

加载此资源（或多或少）

```
www.mysite.com/Pages/ViewResort.aspx?resortname=some-resort-name 
```

这种行为很好。但是，我注意到*每次*`ViewResort.aspx`请求任何资源时都会加载它，大概是因为我的路线不包含文字路径段，就像这个替代方案一样：

 *```
routes.MapPageRoute( "Resorts", "Resort/{resortname}", "~/Pages/ViewResort.aspx" ); 
```

我的客户坚持认为 URL 中主机名之后的唯一内容是度假村名称，因此不可能使用备用路线。

`RouteUrl`所以我的问题是：当它引用站点的根目录时，是否需要做一些特别的事情？如果做不到这一点，是否可以在目标页面（`ViewResort.aspx`在这种情况下）上实现特定的模式，以防止它在每个页面请求中被加载和丢弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T04:15:58.087

你的路线是一个包罗万象的路线。在这种情况下，您需要在包罗万象的路线*之前*提供特定路线，以便为这些特定路线提供正确的响应。换句话说，唯一应该通过您的包罗万象的路由是*必须*重定向到 Pages/ViewResort.aspx 的路由。*

# c# - 在显示另一个表单时最小化和恢复一个表单

> ID：12864253
> 
> 赞同：2
> 
> 时间：2012-10-12T17:29:48.707
> 
> 标签：c#, .net, winforms

我有 2 个表单，其中一个是通过单击第一个中的按钮来显示的。我希望这样当单击显示第二个表单的按钮时，第一个表单被最小化，第二个表单正常打开。当第二个窗体被关闭时，第一个窗口应该被最小化并放置在它之前的位置。

用户可以覆盖它，只需单击快速 luanch 区域中的第一个表单，如果他/她愿意，可以调出第一个表单，所以我不想要第二个来自我的 Dialog 类型。

我正在尝试下面的代码，但是当我单击按钮时，第一个表单被最小化，第二个表单也被最小化！所以我必须手动取消最小化第二种形式！

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (DebugForm != null)
            return;

        DebugForm = new DebugForm();
        DebugForm.Closed += delegate
                                 {
                                     WindowState = FormWindowState.Normal;
                                     DebugForm = null;
                                 };

        WindowState = FormWindowState.Minimized;
        DebugForm.Show();
        DebugForm.WindowState = FormWindowState.Normal;
        DebugForm.BringToFront();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T17:55:09.473

当屏幕上有另一个窗口时，它似乎会最小化两个窗口。最小化除您的应用程序之外的所有窗口。你会看到它有效。让它与其他窗口一起工作，如下所示：

改变这个：

```
WindowState = FormWindowState.Minimized;
DebugForm.Show();
DebugForm.WindowState = FormWindowState.Normal;
DebugForm.BringToFront(); 
```

对此：

```
DebugForm.Show();
WindowState = FormWindowState.Minimized; 
```

我删除的行并不是真正必要的。重要的是语句的顺序在最小化之前与父窗体的 Z 顺序相协调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T16:58:16.817

遇到类似的问题。问题是我试图回调的表单不是活动表单。这是我解决问题的方法。在当前 from2 的按钮单击上，我添加了：

```
if (form1.ActiveForm == null)// Check to see if form is active
{
    form1 frm = (form1)Application.OpenForms["form1"];// find open form
    frm.WindowState = FormWindowState.Maximized;// Set state
    frm.ShowInTaskbar = true; //set to show in taskbar
} 
```

# reporting-services - SSRS 矩阵百分比

> ID：12864258
> 
> 赞同：4
> 
> 时间：2012-10-12T17:29:54.720
> 
> 标签：reporting-services, matrix, percentage

这是报告：![报告表](../Images/c1e576d03b935111c93948f2f191fd8f.png)

这就是我获得“最近一年的百分比变化”列的百分比的方式。

```
=((Last(Fields!Quantity.Value,"Child")  -  First(Fields!Quantity.Value)) / First(Fields!Quantity.Value))`

= ((54675 - 55968)/55968 ) = -2.31%'
= ((54675 - 57849)/57849)  = -5.49%' 
```

在这种情况下，它总是需要第一年“2012”并获得相对于其他年份的百分比。如果我输入 2005、2004、2003、2002、2001 年，它将始终采用第一年，并且每增加一年就计算一个百分比。2005 年至 2004 年、2005 年至 2003 年、2005 年至 2002 年等等。我可以有多达 2 列（年）到许多列。

我需要为总计和小计执行此操作，但它不起作用，因为它在不同的范围内。

```
data is     = row Child group
Sub Total:  = row Parent group
Total:      = row Total group
Year        = Column Period group 
```

查询用于获取结果。

```
 SELECT     MEMBERSHIP_CODE
, PERIOD, COUNT(DISTINCT ID) AS Distinct_ID
, SUM(QUANTITY) AS Quantity
, '01-Personal' AS Child
, '01-Overall' AS Parent
, 'Total' as Total
  FROM         vf_Sshot AS vfs
INNER JOIN vProd AS vP ON vfs.PRODUCT_CODE = vP.PRODUCT_CODE
INNER JOIN vMem_Type vMT on vMT.Member_Type = vfs.Member_Type
  WHERE  (PERIOD IN ( (SELECT Val from dbo.fn_String_To_Table(@Periods,',',1))))                  
      AND (vMT.MEMBER_TYPE NOT IN ('a','b','c')) 
      AND (vfs.STATUS IN ( 'A', 'D', 'C')) 
      AND (MEMBERSHIP_CODE NOT IN ('ABC', 'DEF' ))
      and vP.PROD_TYPE in ('DUE','MC','SC')
  and vMT.Member_Record = '1'
 GROUP BY MEMBERSHIP_CODE, PERIOD 
```

有任何想法吗？

我将如何产生这个输出？

总计：57,573 58,941 57,573 61,188 57,573 61,175 57,175

![在此处输入图像描述](../Images/c1e576d03b935111c93948f2f191fd8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:19:09.750

这是解决您的问题的最简单方法。在您的查询中，在单独的列上确定最新期间的总和（您可以将查询转换为 CTE，这样您就不必大量更改基本查询）：

```
WITH query AS (
   SELECT     MEMBERSHIP_CODE
     , PERIOD, COUNT(DISTINCT ID) AS Distinct_ID
     , SUM(QUANTITY) AS Quantity
     , '01-Personal' AS Child
     , '01-Overall' AS Parent
     , 'Total' as Total
  ...
UNION
   SELECT
  ...
)
SELECT
   A.MEMBERSHIP_CODE,
   A.PERIOD,
   A.Distinct_ID,
   A.Child,
   A.Parent,
   A.Total,
   A.Quantity,
   B.Quantity AS LastPeriodQuantity
FROM
   query A INNER JOIN
(SELECT *, ROW_NUMBER() OVER(PARTITION BY MEMBERSHIP_CODE, Distinct_ID, Child, Parent ORDER BY PERIOD DESC) as periodOrder FROM query) B ON
A.MEMBERSHIP_CODE = B.MEMBERSHIP_CODE AND
A.DISTINCT_ID = B.DISTINCT_ID AND
A.Parent = B.Parent AND
A.Child = B.Child AND
A.Total = B.Total AND
B.PeriodOrder = 1 
```

然后在所有总计/小计/列上，您将访问一个按与分母相同的规则分组/过滤的列。对于所有单元格，您的表达式可以保持如下： `=(Fields!LastPeriodQuantity.Value - Fields!Quantity.Value) / Fields!Quantity.Value`

# java - Java：将数据从一个线程传递到另一个线程

> ID：12864264
> 
> 赞同：3
> 
> 时间：2012-10-12T17:30:16.840
> 
> 标签：java, udp

我正在创建一个基于 UDP 的聊天客户端。主要结构是有一个客户端注册的服务器，客户端也可以请求与另一个在服务器上注册的客户端建立连接。客户端是使用伪代码的结构如下：

```
public UDPClient() {
    // Create datagram socket

    // Execute RECEIVE thread using datagram socket above
    // Execute SEND thread using datagram socket above
} 
```

这个想法是让发送和接收在不同的线程上执行，这样我就不会在接收时被阻塞 I/O。这两个线程在它们的运行方法中都有循环，允许您不断地发送和接收消息。我遇到的问题是这个。如果接收线程上的消息改变了我的 SEND 应该如何执行，我如何将它传达给 SEND 线程？我是否必须向自己发送数据报，或者我可以以某种方式在代码中传达这个信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:47:07.937

您的 SEND 线程应该具有公共（可访问）方法（如果可能，同步），您应该能够从您的 RECEIVE 线程访问。您可以使用此方法创建一个布尔标志、字符串消息等，您应该始终在 .send(yourPacket); 之前阅读它们。从你的发送线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:53:56.833

假设两个线程没有相互引用，创建第三个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)类，它都读取/发送线程（类）引用，它有一个`volatile`成员字段来存储您想要共享的状态数据并且可以`synchronized`访问。

关键字与同步访问相结合，`volatile`保证一个线程对字段所做的更改将被另一个线程看到。没有这个，由于 java 内存模型规范，更改可能不可见。

### 编辑：

遵循“关注点分离”设计指南，最好*不要*让读取/发送线程相互了解，并使用第三类来协调它们的活动/行为。将方法添加到您的读取/发送类到`stop()`等`start()`，并从其他类调用这些。

使用单独的类还允许：

*   通过其他方式进行行为控制，例如管理网页上的“停止发送”按钮
*   允许每种类型的多个线程，但仍然可以通过中心点进行适当的控制，可能使用这样的线程池（如果没有单独的类，您将面临多对多的噩梦和大量与无关的代码手头的工作：即结束和接收）
*   更容易测试你的工人阶级，因为他们做的更少，更专注
*   将它们独立移植/嵌入以供其他用途

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:37:00.953

在您的 READ 方法中有一个成员变量，您的代码可以从中读取并根据该变量更改 SEND 方法。

# c - 使用管道在父子之间传递整数值

> ID：12864265
> 
> 赞同：18
> 
> 时间：2012-10-12T17:30:17.407
> 
> 标签：c, pipe

我对如何正确使用 pipe() 在两个进程之间传递整数值有点困惑。

在我的程序中，我首先创建一个管道，然后将其分叉。我假设我有“两个”管道呢？

据我了解，这是我的任务。我的父母通过一个 for 循环检查某个操作的整数值“i”，增加一个计数变量，并将值保存到一个数组中。每次检查后，我的父母应该通过管道将一个整数值“i”传递给我的孩子。然后我的孩子使用该整数值，对该值进行一些检查，并且应该增加一个计数变量，并将结果保存在 [shared?] 数组中。最终; 孩子应该将它的最终计数返回给父母，然后父母打印出两个计数和“共享”数组。

-> 我不确定我是否需要共享数组或保存结果。我可能只需要计数 - 作业模棱两可，我正在等待教授的回复。还; 我什至可以在进程之间做一个共享数组吗？对我来说，这听起来像是一个问题的开始。

-> 这是我的问题： 一；如何将管道用于整数？我只在字符数组中看到过它们，以前的答案似乎不认为这是可能的或合法的..？我不知道。我找不到任何解决方案。

-> 如何使用单向管道将整数传递给孩子？让孩子还东西吗？我不确定我如何能够...区分两个管道。我确实“知道”[或认为我知道]我必须关闭每个管道的一个未使用部分以避免“一些模糊的问题”。

对不起，愚蠢的问题；在这门课上，我还没有学过流程（除了 fork）或管道（根本没有）——所以我不确定从哪里开始！

这是我的代码的一部分-它不漂亮，它不起作用，我不希望它。它更像是一个外壳占位符。一旦我弄清楚如何使用管道 - 我可能会让代码有意义。

```
int main(void)
{
int fd[2];
pid_t childpid;
pid_t parentpid;
int i;
int threecount = 0;
int fivecount = 0;;
int results [MAXSIZE];

parentpid = getpid(); //Get current process ID number

pipe(fd);
childpid = fork(); 

if(childpid == 0){
close(fd[0]); //Closing this for some other reason

}
int j = 0;

if(childpid > 0)
close(fd[1]); //Closing this for some reason

if( childpid == -1 )
{
    perror("Failed to fork\n");
    return 1;
}
if (childpid > 0)
{
    for(i = 1; i < MAXSIZE;i++)
    {
        if(i % 5 == 0)
        {
            fivecount++;
            i = results[j];
            j++; 
            wait(NULL);
        }
    }
}
else if (childpid == 0)
    {
        if(i % 3 == 0) //This i here should probably be the i value above, piped to the child
        {
            threecount++;
            i = results[j];  //This should be part of th pipe
            j++;    //Trying to keep count of that shared array, not really the right way to do it though.
        }

    }
    printf("%d  %d  \n", fivecount,threecount);
    return 0; 
```

}

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-12T17:57:14.717

这与我可以收集的样本一样蹩脚（并且没有错误检查，顺便说一句），因为我可以使用管道将 int 从父进程发送到子进程，子进程是从 fork() 启动的。发送*和*接收数据变得更加复杂（显然），但我不能为你做*所有事情*。这只是分叉并等待子级的 int（实际上是 int 使用的字节数）。

**更新：**在此之后添加了发送+响应双向通信示例。有关详细信息，请参阅第二个代码清单。

希望能帮助到你。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    int fd[2];
    int val = 0;

    // create pipe descriptors
    pipe(fd);

    // fork() returns 0 for child process, child-pid for parent process.
    if (fork() != 0)
    {
        // parent: writing only, so close read-descriptor.
        close(fd[0]);

        // send the value on the write-descriptor.
        val = 100;
        write(fd[1], &val, sizeof(val));
        printf("Parent(%d) send value: %d\n", getpid(), val);

        // close the write descriptor
        close(fd[1]);
    }
    else
    {   // child: reading only, so close the write-descriptor
        close(fd[1]);

        // now read the data (will block)
        read(fd[0], &val, sizeof(val));
        printf("Child(%d) received value: %d\n", getpid(), val);

        // close the read-descriptor
        close(fd[0]);
    }
    return 0;
} 
```

输出：

```
Parent(5943) send value: 100
Child(5945) received value: 100 
```

* * *

**更新：**扩展为包括使用两个管道集的发送+响应

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>

// some macros to make the code more understandable
//  regarding which pipe to use to a read/write operation
//
//  Parent: reads from P1_READ, writes on P1_WRITE
//  Child:  reads from P2_READ, writes on P2_WRITE
#define P1_READ     0
#define P2_WRITE    1
#define P2_READ     2
#define P1_WRITE    3

// the total number of pipe *pairs* we need
#define NUM_PIPES   2

int main(int argc, char *argv[])
{
    int fd[2*NUM_PIPES];
    int val = 0, len, i;
    pid_t pid;

    // create all the descriptor pairs we need
    for (i=0; i<NUM_PIPES; ++i)
    {
        if (pipe(fd+(i*2)) < 0)
        {
            perror("Failed to allocate pipes");
            exit(EXIT_FAILURE);
        }
    }

    // fork() returns 0 for child process, child-pid for parent process.
    if ((pid = fork()) < 0)
    {
        perror("Failed to fork process");
        return EXIT_FAILURE;
    }

    // if the pid is zero, this is the child process
    if (pid == 0)
    {
        // Child. Start by closing descriptors we
        //  don't need in this process
        close(fd[P1_READ]);
        close(fd[P1_WRITE]);

        // used for output
        pid = getpid();

        // wait for parent to send us a value
        len = read(fd[P2_READ], &val, sizeof(val));
        if (len < 0)
        {
            perror("Child: Failed to read data from pipe");
            exit(EXIT_FAILURE);
        }
        else if (len == 0)
        {
            // not an error, but certainly unexpected
            fprintf(stderr, "Child: Read EOF from pipe");
        }
        else
        {
            // report what we received
            printf("Child(%d): Received %d\n", pid, val);

            // now double it and send it back
            val *= 2;

            printf("Child(%d): Sending %d back\n", pid, val);
            if (write(fd[P2_WRITE], &val, sizeof(val)) < 0)
            {
                perror("Child: Failed to write response value");
                exit(EXIT_FAILURE);
            }
        }

        // finished. close remaining descriptors.
        close(fd[P2_READ]);
        close(fd[P2_WRITE]);

        return EXIT_SUCCESS;
    }

    // Parent. close unneeded descriptors
    close(fd[P2_READ]);
    close(fd[P2_WRITE]);

    // used for output
    pid = getpid();

    // send a value to the child
    val = 42;
    printf("Parent(%d): Sending %d to child\n", pid, val);
    if (write(fd[P1_WRITE], &val, sizeof(val)) != sizeof(val))
    {
        perror("Parent: Failed to send value to child ");
        exit(EXIT_FAILURE);
    }

    // now wait for a response
    len = read(fd[P1_READ], &val, sizeof(val));
    if (len < 0)
    {
        perror("Parent: failed to read value from pipe");
        exit(EXIT_FAILURE);
    }
    else if (len == 0)
    {
        // not an error, but certainly unexpected
        fprintf(stderr, "Parent(%d): Read EOF from pipe", pid);
    }
    else
    {
        // report what we received
        printf("Parent(%d): Received %d\n", pid, val);
    }

    // close down remaining descriptors
    close(fd[P1_READ]);
    close(fd[P1_WRITE]);

    // wait for child termination
    wait(NULL);

    return EXIT_SUCCESS;
} 
```

（编译，例如，`gcc thisfile.c -o test`）

**输出**

```
Parent(2794): Sending 42 to child
Child(2797): Received 42
Child(2797): Sending 84 back
Parent(2794): Received 84 
```

# excel - Excel/VBA 代码自动将行复制到另一个工作表

> ID：12864267
> 
> 赞同：1
> 
> 时间：2012-10-12T17:30:21.477
> 
> 标签：excel, vba

我一直在尝试自己做这件事，并且搜索了谷歌，但对 VBA 一无所知。如果您知道自己在做什么，我相信这很简单：

表 1 是主电子表格 B 列是查询列

当 B 列中的单元格等于“X”时，我希望将整行复制到工作表 2 中，包括任何条件格式。

我希望这会自动发生并更新或覆盖工作表 2 中的数据（除了第 1 行有标题）。

所以基本上工作表 2 应该始终包含工作表 1 中所有行的精确副本，其中列 B =“X”。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:36:43.220

假设您的数据从 sheet1 的 A1 开始，此宏会将其传输到 sheet2，覆盖 sheet2 中除第一行之外的所有内容。

```
Sub FilterAndCopy()
Dim sht1 As Worksheet, sht2 As Worksheet

Set sht1 = Sheets("Sheet1")
Set sht2 = Sheets("Sheet2")

intersect(sht2.UsedRange,sht2.rows("2:" & rows.count)).ClearContents

sht1.Cells(1, 1).CurrentRegion.AutoFilter
sht1.Cells(1, 1).CurrentRegion.AutoFilter 1, "X"
sht1.Cells(1, 1).CurrentRegion.Offset(1).SpecialCells(xlCellTypeVisible).EntireRow.Copy sht2.Cells(2, 1)
sht1.Cells(1, 1).CurrentRegion.AutoFilter

End Sub 
```

# javascript - 如何使用 JS 在 URL 中传递“#”？

> ID：12864269
> 
> 赞同：0
> 
> 时间：2012-10-12T17:30:23.980
> 
> 标签：javascript

为什么如果`#`在带有 JS 的 URL 中使用它会返回 ''/false？

```
var el = '#string with number character -> #'   
el = el.replace(/[']/g, '&#039;');
el = el.replace(/[&#35;]/g, '&#039;');

xmlhttp.open("GET","process_add_article.php?&title=" + (el),true);
xmlhttp.send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:32:55.147

如果你想在 url 上编码一个字符串，有一个本地方法可以做到这一点：

```
var el = '#string with number character -> #'; 
el = encodeURI(el); 
```

我不确定这是否会完成您正在寻找的内容，网址将是：

```
xmlhttp.open("GET","process_add_article.php?&title=#string%20with%20number%20character%20-%3E%20#",true); 
```

这意味着标题参数为空，因为服务器将忽略哈希（#）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:33:56.533

因为#指定了一个片段标识符。片段标识符完全是客户端实体，因此不会发送到服务器。请参阅有关该主题的[维基百科。](http://en.wikipedia.org/wiki/Fragment_identifier)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:37:28.770

您正在使用[`Numeric Character Reference`](http://www.w3.org/TR/html5/syntax.html#character-references)而不是[`Percent-Encoding`](http://www.ietf.org/rfc/rfc3986.txt)用于 URI。

您可能想[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)改用。

```
var el = '#string with number character -> #'; 
xmlhttp.open("GET", "process_add_article.php?&title=" + encodeURIComponent(el), true);
xmlhttp.send(); 
```

不要与which [`encodeURI`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)doesn't encode`#`和characters 混淆。`+``=`

# iphone - 在标签栏上添加加载视图

> ID：12864285
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:31:30.657
> 
> 标签：iphone

我想在标签栏应用程序上添加一个加载视图，当用户更新时它会显示在屏幕顶部。我在窗口上添加了视图，但它没有定向。有什么好办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:18:06.477

在解决了这个问题之后，我得到了一些东西 [How to add an overlay to a UITabbarController](https://stackoverflow.com/questions/12368986/how-to-add-an-overlay-to-a-uitabbarcontroller) 这很有帮助，它对我有点用..

```
-(void)lodingView
{
    ProcessView *LoadView = [[ProcessView alloc] init];
    [tabbarcontroller presentModalViewController:LoadView animated:YES];
    [tabbarcontroller.selectedViewController viewDidAppear:true];
} 
```

我们可以通过这种方法移除加载视图。

```
-(void)removelodingView
{
    [tabbarcontroller dismissModalViewControllerAnimated:YES];
} 
```

# facebook - 控制 Facebook 标准登录选项？

> ID：12864289
> 
> 赞同：1
> 
> 时间：2012-10-12T17:32:02.030
> 
> 标签：facebook, login, limit, options

情况：我们正在开发一个贸易展亭，允许用户使用 Flash/Air 将结果发布到他们的 Facebook 页面。当我们连接到 Facebook 时，我们会看到常用字段和链接，例如“忘记密码”、“创建帐户”链接。

我们不希望这些链接起作用，因为它在技术上不是一个网站。这些链接打开了击败信息亭应用程序或进入下一个用户不希望的状态的大门。

问题：是否有可能通过替代登录过程来解决这个问题？

有没有巧妙的方法来打败这些行为，以便只提交或取消链接？

我会考虑围绕想法进行的任何工作。

谢谢！

# c - 对所有核心使用 perfsuite

> ID：12864293
> 
> 赞同：0
> 
> 时间：2012-10-12T17:32:38.520
> 
> 标签：c, performancecounter, papi

我正在尝试使用 perfsuite（内部使用 papi）来测量函数周围的一些性能计数器。此函数为每个内核生成一个线程。问题是，如果我在函数调用之前启动计数器并在调用之后停止它们，我会得到这些计数器的错误值。但如果该函数不创建任何线程，它会获得正确的值。

我知道 psrun 可以获得可执行文件的所有内核的计数器。但我希望函数调用具有相同的功能，而不是可执行文件。

我在 Debian 上使用来自 C 的 perfsuite 1.1.1 和 papi 4.4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:06:08.933

PAPI 计数基于线程而不是内核。如果您想要后者，您可能需要考虑使用 intel pcm - 它能够提供每个核心的计数。

它回答了你的问题吗？

tjr

# matplotlib - 在 ipython 笔记本中向 matplotlib 图中添加任意线

> ID：12864294
> 
> 赞同：135
> 
> 时间：2012-10-12T17:32:40.253
> 
> 标签：matplotlib, ipython

我对 python/matplotlib 和通过 ipython notebook 使用它都很陌生。我正在尝试向现有图形添加一些注释线，但我不知道如何在图形上呈现这些线。因此，例如，如果我绘制以下内容：

```
import numpy as np
np.random.seed(5)
x = arange(1, 101)
y = 20 + 3 * x + np.random.normal(0, 60, 100)
p =  plot(x, y, "o") 
```

我得到以下图表：

![美丽的散点图](../Images/fbb106271a4bfe28913efdd61c280059.png)

那么如何添加从 (70,100) 到 (70,250) 的垂直线？从 (70,100) 到 (90,200) 的对角线呢？

我已经尝试了一些事情，`Line2D()`但结果却是我的困惑。在`R`我将简单地使用将添加线段的segments() 函数。中是否有等价物`matplotlib`？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-10-12T19:43:42.340

您可以通过向`plot`命令提供相应的数据（线段的边界）来直接绘制所需的线：

`plot([x1, x2], [y1, y2], color='k', linestyle='-', linewidth=2)`

（当然你可以选择颜色、线宽、线型等）

从你的例子：

```
import numpy as np
import matplotlib.pyplot as plt

np.random.seed(5)
x = np.arange(1, 101)
y = 20 + 3 * x + np.random.normal(0, 60, 100)
plt.plot(x, y, "o")

# draw vertical line from (70,100) to (70, 250)
plt.plot([70, 70], [100, 250], 'k-', lw=2)

# draw diagonal line from (70, 90) to (90, 200)
plt.plot([70, 90], [90, 200], 'k-')

plt.show() 
```

![新图表](../Images/bfca5cc33013730ceb0430517902786f.png)

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2014-11-21T22:27:38.840

[对于新人来说](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.axvline)，现在还为时不晚。

```
plt.axvline(x, color='r') # vertical
plt.axhline(x, color='r') # horizontal 
```

它的范围也`y`为 ，使用`ymin`和`ymax`。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-10-12T17:46:35.077

使用[`vlines`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.vlines)：

```
import numpy as np
np.random.seed(5)
x = arange(1, 101)
y = 20 + 3 * x + np.random.normal(0, 60, 100)
p =  plot(x, y, "o")
vlines(70,100,250) 
```

基本的调用签名是：

```
vlines(x, ymin, ymax)
hlines(y, xmin, xmax) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-08-23T20:17:47.597

Matplolib 现在允许 OP 正在寻找的“注释行”。该`annotate()`功能允许多种形式的连接路径和无头无尾箭头，即简单的线，是其中之一。

```
ax.annotate("",
            xy=(0.2, 0.2), xycoords='data',
            xytext=(0.8, 0.8), textcoords='data',
            arrowprops=dict(arrowstyle="-",
                      connectionstyle="arc3, rad=0"),
            ) 
```

在[文档](https://matplotlib.org/users/annotations_guide.html#annotating-with-arrow "文档")中它说您只能绘制一个带有空字符串的箭头作为第一个参数。

从OP的例子：

```
%matplotlib notebook
import numpy as np
import matplotlib.pyplot as plt

np.random.seed(5)
x = np.arange(1, 101)
y = 20 + 3 * x + np.random.normal(0, 60, 100)
plt.plot(x, y, "o")

# draw vertical line from (70,100) to (70, 250)
plt.annotate("",
              xy=(70, 100), xycoords='data',
              xytext=(70, 250), textcoords='data',
              arrowprops=dict(arrowstyle="-",
                              connectionstyle="arc3,rad=0."), 
              )

# draw diagonal line from (70, 90) to (90, 200)
plt.annotate("",
              xy=(70, 90), xycoords='data',
              xytext=(90, 200), textcoords='data',
              arrowprops=dict(arrowstyle="-",
                              connectionstyle="arc3,rad=0."), 
              )

plt.show() 
```

![示例内联图像](../Images/5dc181a1d9ef8c536ed3f1b182923149.png)

就像gcalmettes答案中的方法一样，您可以选择颜色、线宽、线型等。

这是对部分代码的更改，它会使两个示例行之一变为红色、更宽且不是 100% 不透明。

```
# draw vertical line from (70,100) to (70, 250)
plt.annotate("",
              xy=(70, 100), xycoords='data',
              xytext=(70, 250), textcoords='data',
              arrowprops=dict(arrowstyle="-",
                              edgecolor = "red",
                              linewidth=5,
                              alpha=0.65,
                              connectionstyle="arc3,rad=0."), 
              ) 
```

您还可以通过调整 为连接线添加曲线`connectionstyle`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-09-03T20:41:09.097

而不是滥用`plot`or `annotate`，这对于许多行来说效率很低，您可以使用[`matplotlib.collections.LineCollection`](https://matplotlib.org/api/collections_api.html#matplotlib.collections.LineCollection)：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.collections import LineCollection

np.random.seed(5)
x = np.arange(1, 101)
y = 20 + 3 * x + np.random.normal(0, 60, 100)
plt.plot(x, y, "o")

# Takes list of lines, where each line is a sequence of coordinates
l1 = [(70, 100), (70, 250)]
l2 = [(70, 90), (90, 200)]
lc = LineCollection([l1, l2], color=["k","blue"], lw=2)

plt.gca().add_collection(lc)

plt.show() 
```

![通过 LineCollection 绘制两条线的图](../Images/7aaa35c3257ea31dc463a86d6589fd2e.png)

它需要一个行列表`[l1, l2, ...]`，其中每行是*N*个坐标的序列（*N*可以超过两个）。

标准格式关键字可用，接受单个值，在这种情况下，该值适用于每一行，或一系列*M* `values`，在这种情况下，第*i*行的值为`values[i % M]`。

# android - java.lang.RuntimeException Theme.Sherlock

> ID：12864298
> 
> 赞同：6
> 
> 时间：2012-10-12T17:32:59.300
> 
> 标签：android, themes, actionbarsherlock, runtimeexception

我已经在 google play 上进行了更新，并看到了这个错误：

```
java.lang.RuntimeException: Unable to start activity 

ComponentInfo{com.jim2/com.jim2.SettingWidgetActivity}: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
at android.app.ActivityThread.access$500(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4123)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1007)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:919)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251)
at com.jim2.SettingWidgetActivity.onCreate(SettingWidgetActivity.java:37)
at android.app.Activity.performCreate(Activity.java:4397)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
... 11 more 
```

我不明白为什么会出现此错误，因为它在我的设备上完美运行

有人有想法吗？

这是我的 Manifest.xml 的一部分

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" > 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T20:17:01.173

不要使用`android:theme="@style/Theme.Sherlock"`.

`setTheme(R.style.Theme_Sherlock);`在里面使用`OnCreate`。

例如

```
@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.Theme_Sherlock);
    super.onCreate(savedInstanceState);

    // What you want to do here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T12:01:31.863

你可以让你的风格继承自 Theme.Sherlock

```
<style name="MyAppTheme" parent="Theme.Sherlock"> 
```

然后在清单中使用您的主题

```
android:theme="@style/MyAppTheme" 
```

您不必在每个页面上都使用 setTheme ，因为 Muz 说，当有更好的解决方案时，这似乎需要做很多工作，将上面的答案标记下来，但我不能！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-31T08:28:08.267

我同意 matt_lethargic。在我的样式文件中是：

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar"> 
```

我的应用程序在我将其更改为后停止崩溃：

```
<style name="AppBaseTheme" parent="Theme.Sherlock"> 
```

# database - 每次运行我的应用程序时，如何使用我的数据重新生成数据库表？

> ID：12864299
> 
> 赞同：0
> 
> 时间：2012-10-12T17:32:58.333
> 
> 标签：database, asp.net-mvc-3, entity-framework, entity-framework-migrations

我有一个使用 EF5 的网络应用程序。我有两张桌子是我主要关心的。我有一个成员表和一个索赔表。我有用于测试目的的虚假成员，这会将他们的声明保存到声明表中。

这些表中还有我不想更改的真实数据。一些虚假成员缺少不同的数据或需要特定的东西来处理所述索赔。如何在不删除数据库的情况下完全按照我的需要重新填充我的虚假成员。

我在 www.pluralsight.com 上查看了 Code First Migrations，但我不确定如何告诉它始终播种 10 个虚假成员并从声明表中删除新声明。一些成员有过去的声明，所以我只想删除在测试期间添加的那些。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:48:26.920

这与迁移无关。迁移仅在执行迁移时播种数据=当您的类结构和数据库中的某些内容也需要修改时。你只需要调用你的初始化逻辑，`Application_Start`但你应该有条件地遵守它——我猜这样的代码不应该进入生产版本。

# magento - magento 导入唯一密钥

> ID：12864300
> 
> 赞同：0
> 
> 时间：2012-10-12T17:33:02.923
> 
> 标签：magento

通过导入/导出配置文件在 Magento 中导出和导入数据时，产品不会被更新。我们只选择了映射字段。我有一些想法。但我不确定。

*   导出和导入时，是否使用相同的配置文件？（或者标准导入功能是否理解并导入映射字段）

*   Magento 使用什么作为索引来更新正确的记录。我们正在更新 SKU，但也许这被用作关键？

谢谢，感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:37:00.157

每个产品的 SKU 都是独一无二的。由于导入的产品没有 id，因此如果 SKU 更改，magento 无法理解您正在更新产品。

# http - 如何在http get请求中设置标头？

> ID：12864302
> 
> 赞同：216
> 
> 时间：2012-10-12T17:33:03.570
> 
> 标签：http, go

我在 Go 中做一个简单的 http GET：

```
client := &http.Client{}
req, _ := http.NewRequest("GET", url, nil)
res, _ := client.Do(req) 
```

但是我找不到在[文档](http://golang.org/pkg/net/http/)中自定义请求标头的方法，谢谢

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2012-10-12T17:36:52.097

请求的`Header`字段是公开的。你可以这样做：

```
req.Header.Set("name", "value") 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2016-12-08T08:05:44.083

注意http.Request header中的“Host”不能通过`Set`方法设置

`req.Header.Set("Host", "domain.tld")`

但可以直接设置：

`req.Host = "domain.tld"`：

```
req, err := http.NewRequest("GET", "http://10.0.0.1/", nil)
if err != nil {
    ...
}

req.Host = "domain.tld"
client := &http.Client{}
resp, err := client.Do(req) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2021-06-17T12:01:28.583

如果你想设置多个标题，这比编写 set 语句更方便。

```
client := http.Client{}
req , err := http.NewRequest("GET", url, nil)
if err != nil {
    //Handle Error
}

req.Header = http.Header{
    "Host": []string{"www.host.com"},
    "Content-Type": []string{"application/json"},
    "Authorization": []string{"Bearer Token"},
}

res , err := client.Do(req)
if err != nil {
    //Handle Error
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-19T19:14:48.950

Go 的 net/http 包有许多[处理 headers 的函数](https://godoc.org/net/http#Header)。其中包括[Add](https://godoc.org/net/http#Header.Add)、[Del](https://godoc.org/net/http#Header.Del)、[Get](https://godoc.org/net/http#Header.Get)和[Set](https://godoc.org/net/http#Header.Set)方法。Set的使用方法是：

```
func yourHandler(w http.ResponseWriter, r *http.Request) {
    w.Header().Set("header_name", "header_value")
} 
```

# c# - 使用 EventLog .NET 类型和拥有 eventLog 注册表项有什么区别？

> ID：12864303
> 
> 赞同：0
> 
> 时间：2012-10-12T17:33:10.003
> 
> 标签：c#, visual-studio-2010, event-log, event-viewer

使用 System.Diagnostics.EventLog .NET 类型一可以以编程方式将日志创建到事件查看器应用程序中。

1.  有人知道“HKLM\SYSTEM\CurrentControlSet\Services\EventLog\Application\XXX\”注册表项吗？

2.  谁使用这个程序集以及它是如何使用的？

3.  首选方法是什么？使用 EventLog 类型或注册表项？或者这个问题是否有效？

-达特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:09:11.060

Basicaly Event Logging 服务使用“HKLM\SYSTEM\CurrentControlSet\Services\EventLog\Application\”键来存储每个事件源的配置变量（即日志文件的位置）。事实上，实际的日志存储在这些文件中。

所以我相信可以自己更新注册表和管理日志文件，但这根本不是一个好主意。我更喜欢使用 API。

您可以在此处查看详细信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363648 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363648(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:19:34.977

我更喜欢使用[EventLogInstaller](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventloginstaller%28v=vs.80%29.aspx)并显式使用 installutil 创建事件日志源。

关于谁使用程序集，我猜谁想写入 EventLog。请记住，还有其他方法可以从使用检测清单的 .NET 应用程序写入 EventLog。查看[System.Diagnostics.Eventing](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.aspx)命名空间。

# jquery - 是否可以增量调整 div 大小？

> ID：12864312
> 
> 赞同：4
> 
> 时间：2012-10-12T17:34:15.983
> 
> 标签：jquery, css, html, resize

我有一个带有浮动元素的居中 div，每个元素都具有相同的高度和宽度并且是浮动的。当 div 调整大小时，右侧总是有一个间隙，没有足够的空间容纳另一个元素。我想要的是 div 仅在它可以容纳另一个元素时才扩展，而不仅仅是在那里有一个空间。那可能吗？ ![在此处输入图像描述](../Images/6c0be27fd8e0a7f3c802282fe758bdb4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:46:38.890

## CSS3 解决方案

使用一些`@media`查询调用（因此对于可能想要的大小有一个实际限制），在 CSS3 浏览器上会产生良好的结果。请参阅[此小提琴](http://jsfiddle.net/2Xskq/8/)（[全屏](http://jsfiddle.net/2Xskq/8/embedded/result/)），它使用此（仅作为示例）代码：

**HTML**

```
<ul class="container">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

**CSS**

```
@media screen and (min-width: 122px) {
  .container {width: 120px;}
}

@media screen and (min-width: 242px) {
  .container {width: 240px;}
}

@media screen and (min-width: 362px) {
  .container {width: 360px;}
}

@media screen and (min-width: 482px) {
  .container {width: 480px;}
}

@media screen and (min-width: 602px) { 
  .container {width: 600px;}
}

/* you need to decide just how far to take it */

.container {
    margin: 10px auto;
    overflow: hidden;
    border: 1px solid red;
    height: 210px;
}

li {
    width: 100px;
    height: 50px;
    background: cyan;
    float: left;
    margin: 10px;
} 
```

此外，您或其他用户可能会觉得[这很有帮助](https://stackoverflow.com/questions/8331150/center-fluid-grid-of-elements-without-setting-hard-width-on-parent/8332101#8332101)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:37:45.370

您似乎正在寻找类似于[Masonry](http://masonry.desandro.com/)的功能。**它与 Pinterest 使用的**Pinterest（如果不是插件）具有相同的结构。

我不认为它仅限于形状奇特的元素，所以应该完美。

# java - Eclipse 中的“已安装软件”与“功能”与“插件”

> ID：12864314
> 
> 赞同：7
> 
> 时间：2012-10-12T17:34:27.957
> 
> 标签：java, eclipse, eclipse-plugin

当我`Installation Details`在 Eclipse 中单击时， ![在此处输入图像描述](../Images/31b06564b56971400f20fbbaa9d2a5ed.png)

我得到了这个标签`Installed software`

![在此处输入图像描述](../Images/ce253f2b1195fe05ae4be629844d2d60.png)

和一个标签`Features`

![在此处输入图像描述](../Images/baac039840f7b91b6aeb487e3b83552a.png)

和一个标签`plug-ins`。

![在此处输入图像描述](../Images/458f12a2830a0a7918615c6c9fde1d2b.png)

Eclipse 软件、Eclipse 功能和 Eclipse 插件之间有什么关系，如该窗口所示？

我猜想`Help -> Install New Software ...`安装软件，而软件是由一堆相关的插件组成的。这两个选项卡只是从`Install New Software ...`菜单安装的相同内容（软件名称/插件名称）？

Bananeweizen在他的回答[https://stackoverflow.com/a/12863077/260127](https://stackoverflow.com/a/12863077/260127)中说`Eclipse "features" are the smallest installable pieces of Eclipse applications for users (e.g. the Java development toolkit). They consist of multiple plugins, where plugins are the smallest pieces that make sense from the developers point of view (e.g. org.eclipse.jdt.core, org.eclipse.jdt.ui, org.eclipse.jdt.somethingelse).`，但对我来说，eclipse 功能似乎与 eclipse 软件几乎相同，而 eclipse 应用程序是一组 eclipse 软件（功能）在上面eclipse平台的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:18:03.587

“已安装的软件”是*您*作为用户*主动选择*在此 Eclipse 实例中安装的功能的子集。

另一方面，特性列表包含安装在这个 Eclipse 实例中的*所有特性。*它包括“已安装软件”中的所有项目，并包含“已安装软件”中项目的*依赖关系*。这些是您没有选择自己安装的功能，但 Eclipse P2 更新管理器决定这样做，以满足您的安装要求。

同样，Eclipse 安装过程会安装特性，其中一些是根据用户的请求安装的，其中一些是根据系统的请求来安装用户的。

为了使这一切变得更加复杂，Eclipse 用户通常将 Eclipse 特性称为“插件”，尽管这并不正确。因此，如果您阅读了诸如“安装 PHP 插件”之类的内容，那实际上是指安装 PHP 功能，该功能再次由*多个*插件组成（但您不会将这些视为 Eclipse 用户，而只是作为 Eclipse 开发人员）。

您可以双击该对话框中的一项功能以查看其包含的插件列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:07:30.143

插件是为更大的软件应用程序添加特定功能。

每个插件 1) 贡献于 1 个或多个扩展点（意味着它可以通过将其连接到任何扩展点来增加其属性） 2.) 通常需要 JRE 并为您的 Eclipse SDK 添加一些小功能的小程序集。 .

而eclipse软件是一组插件（通常称为RCP-Rich Client Platform），为eclipse SDK提供了完整的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:43:49.960

是的，软件可能包含多个插件。“已安装”不仅意味着您已经通过更新站点安装了它们，而且该软件也包含在该 Eclipse 包中。

# session - 获取在 ColdFusion 应用程序内的 Open SSO 中设置的会话变量的值

> ID：12864323
> 
> 赞同：1
> 
> 时间：2012-10-12T17:35:30.533
> 
> 标签：session, coldfusion, opensso

当用户登录时，我们在 Open SSO 应用程序中设置了一个会话变量。我需要从 ColdFusion 应用程序访问这个变量。有什么办法吗？我试过 GetPageContext().getSession() 但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:52:55.813

找到了解决方案！事实证明，该值不在会话中，而是在请求标头中。

```
GetHTTPRequestData().headers['sessionvariablename'] 
```

为我工作。

# jquery - div中的自定义滚动条

> ID：12864328
> 
> 赞同：0
> 
> 时间：2012-10-12T17:35:48.503
> 
> 标签：jquery, css, html, interface, scroll

![图片](../Images/e41e55adf420c849d3d7f4fea1d5519b.png)

我被这种情况困住了。我有一个使用滚动条制作 div 内容的请求（设计在图像中）。我搜索并发现只有一种方法适合：[jQuery 自定义内容滚动器](http://manos.malihu.gr/jquery-custom-content-scroller)，但它非常复杂且难以使用。所以我想问是否有其他方法可以做同样的事情。谢谢你，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:39:59.673

[Jscrollpane](http://jscrollpane.kelvinluck.com)在我看来是最好的

[此演示](http://jscrollpane.kelvinluck.com/basic.html)显示您可以毫无问题地使用嵌套滚动条。

我以前做过。使用 jscrollpane 有一点学习曲线，但这是值得的。

## 编辑

我刚刚查看了您链接到的演示滚动条。我以前用过。它运行良好，但我更喜欢 jscrollpane，因为我没有发现它有任何限制。但是要回答您的问题，没有像您的图像中那样具有自定义滚动条的简单方法。您将需要使用这两个插件之一（或其他）。困难的部分实际上是用 CSS 设置滚动条的样式。初始化非常简单。

# tfs - 每个带有 TFS 的分支的 Nuget 存储库

> ID：12864330
> 
> 赞同：5
> 
> 时间：2012-10-12T17:36:02.623
> 
> 标签：tfs, merge, nuget

我有一个具有以下分支设置的 TFS 环境

*   Dev - 开发人员的主要工作分支
*   Main - 稳定、可发布的分支
*   Hotfix - 用于修复不属于正常发布周期的生产代码

我们正在设置自己使用 Nuget，我想配置一些东西，以便 Dev 分支中的代码从“Dev”nuget 存储库中提取包，从“Main”存储库中提取包，等等。

现在，我已经弄清楚了，我有一个文件位于我的分支的根目录，它告诉 nuget.exe 要使用哪个存储库。

我现在正试图弄清楚如何在每个分支中使这些文件的内容不同。我可以将它们分别签入每个分支，但这会引入从 Dev->Main 和 Main->HotFix 合并的问题。

所以，我想我想做的是以某种方式将这个特定的配置文件排除在 Dev-> Main 等合并的一部分之外。有什么办法吗？

或者，是否有其他方法可以完成我想用 Nuget 做的事情，将它指向不同分支的不同 nuget 存储库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T07:26:15.230

你将不得不做一些诡计...

*   每个分支有不同的提要。设置多个提要的简单方法是 www.myget.org
*   在要注册此行为的解决方案中启用 NuGet 包还原
*   在解决方案的 .nuget\nuget.config 文件中，添加以下内容：

```
<configuration>
  <packageSources>
    <add key="Branch X packages" value="http://www.myget.org/F/corpxyzbranchxyz" />
  </packageSources>
  <disabledPackageSources />
  <activePackageSource>
    <add key="Branch X packages" value="http://www.myget.org/F/corpxyzbranchxyz" />
  </activePackageSource>
</configuration> 
```

这*确实*意味着每个分支都必须有一个不同的 nuget.config 文件，并且在合并/分支时应该小心。

# python - 为什么 sysconfig.get_paths() 在 Ubuntu 上包含 local/ 子目录？

> ID：12864331
> 
> 赞同：1
> 
> 时间：2012-10-12T17:36:03.233
> 
> 标签：python, virtualenv

在 Ubuntu 12.04 上的 Python 2.7 virtualenv (virtualenv 1.8.2) 中，`sysconfig.get_paths()`包含一些带有 的路径`local`，例如：

```
'platlib': '/home/me/prog/py27/local/lib/python2.7/dist-packages', 
```

virtualenv 植根于 /home/me/prog/py27/。这些路径是怎么回事？

# c++ - 如何检查 C++ 中的两个堆栈是否相同？

> ID：12864341
> 
> 赞同：3
> 
> 时间：2012-10-12T17:36:48.597
> 
> 标签：c++, stack

我正在使用堆栈，需要检查两个是否相同。我已经超载了

```
bool operator== 
```

函数在我的代码中，现在我需要将逻辑放入代码中。我将检查几件事，看看这两个堆栈是否相同：长度、数据类型和每个元素的内容。长度和内容没有问题，它是给我问题的数据类型。

我试图做一个功能：

```
...
    Type getType();
};

template <class Type>
Type getType(){ returnType;} 
```

但这没有用。

我也想过：

```
bool operator== (stack<Type> &lhs, stack<Type> &rhs){

    return (lsh.Type == rhs.Type);
//additional conditions will be checked.
} 
```

如何检查它们是否是同一类型？

**编辑：**如果我只是检查了两个堆栈的顶部元素的数据类型怎么办？那就足够了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T17:40:03.650

如果你`operator==`这样实现：

```
template<typename Type>
bool operator== (const stack<Type> &lhs, const stack<Type> &rhs){
    // compare and return.
} 
```

您已经知道两个堆栈都将包含相同类型的元素。没有必要检查。

如果您想允许比较使用不同模板参数的堆栈，您可以执行以下操作：

```
template<typename Type1, typename Type2>
bool operator== (const stack<Type1> &lhs, const stack<Type2> &rhs){
    // compare
} 
```

然后比较使用的元素`operator==`，你就完成了。当然，如果没有 and 类型的for`operator==`参数，那么编译器就会报错。`Type1``Type2`

*编辑*：因为你想要一个很好的错误信息，你可以这样做（使用 C++11）：

```
#include <type_traits>

template<typename Type1, typename Type2>
bool operator== (const stack<Type1> &lhs, const stack<Type2> &rhs){
    // This is a compile time assert!
    static_assert(std::is_same<Type1, Type2>::value, "Types are not equal!");
    // compare
} 
```

反正我会避免这种情况。让编译器自己发出错误，而不是自己做这个检查更简单。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T17:40:34.553

C++ 不像其他（动态）语言，因为您不需要检查类型。如果两个堆栈包含不同的类型，如果您尝试比较它们，您的代码将无法编译。换句话说，跳过这一步，编译器会为你做这件事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T17:43:23.727

如果您使用*模板*（例如`template <typename T> class Stack...`）实现堆栈数据结构，那么您只需要重载`operator==`并检查大小并进行逐项比较：

```
template <typename T>
bool operator==(const Stack<T> & lhs, const Stack<T> & rhs)
{
  if (lhs.Size() != rhs.Size())
    return false;

  // Compare item by item
  ...
} 
```

该类型将由 C++ 编译器类型系统隐式检查（如果您有 a`Stack<int>`并尝试与 a 进行比较，`Stack<string>`您将遇到编译器错误）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-17T10:40:57.090

我找到了一个可以解决您的目的的简单程序，它是检查两个堆栈是否相等的简单且非常有效的方法。

```
 bool isEqual(stack<Type> &stack1, stack<Type> &stack2) {
    if (stack1.empty() && stack2.empty())
      return true;
    else if (stack1.empty() || stack2.empty())
      return false;
    while (!stack1.empty() && !stack2.empty())
    {
      if (stack1.top() != stack2.top())
        return false;
      stack1.pop();
      stack2.pop();
    }
    if (stack1.empty() && stack2.empty())
      return true;
    else
      return false;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T18:06:18.390

正如您在 stackoverflow 的 C++ 标记定义中看到的那样

```
C++ is a widely-used, statically-typed, free-form, compiled,
multi-paradigm, multi-level, imperative, general-purpose,
object-oriented programming language. 
```

在此定义`statically-typed`中，意味着所有类型信息在编译时必须是干净的，因此在 C++ 中，如果您想要拥有不同类型的容器或想要比较不同类型的容器，则必须在编译时通过使用模板来识别它。

因此，当您比较 2 种不同类型的容器（此处为堆栈）时，您知道两种容器的类型，并且不需要比较它们的类型。因此，如果您想要不同类型的容器，它们应该都派生自同一个类，以便它们可以存储为相同类型，或者您必须将它们保存为`void*`（除非您知道自己在做什么，否则这是非常危险的）。如果您从同一个类派生所有类，您可以简单地使基类多态（通过添加至少一个虚函数）并使用 typeid 来获取对象的类型，或者您可以添加一个进行比较的虚函数，然后将其专门化每个派生类（甚至您可以混合使用这两种技术）但如果`void*`您必须有另一种方法来识别对象的类型！

# cordova - Jquery mobile 修复了黑莓上的页眉/页脚

> ID：12864352
> 
> 赞同：2
> 
> 时间：2012-10-12T17:37:39.337
> 
> 标签：cordova, jquery-mobile, blackberry, blackberry-simulator

我正在使用 JqueryMobile 创建一个 Cordova 应用程序，在 Android 设备和模拟器上一切似乎都运行良好。

对于黑莓，我遇到的问题（到目前为止在模拟器中）是页眉和页脚没有显示（都带有 data-position="fixed"）。奇怪的是，在屏幕的顶部（和底部），“空间”就像“保留”。

此外，为了让它在该页面上更加奇怪，有一个“输入”，如果我点击它，标题就会显示！但是当它失去焦点时，标题又回到隐藏状态！

有任何想法吗？这个问题今天让我大吃一惊

# javascript - 当父元素有兄弟姐妹时如何获取元素的父节点？

> ID：12864356
> 
> 赞同：12
> 
> 时间：2012-10-12T17:37:47.537
> 
> 标签：javascript, dom, parent, siblings, dom-traversal

请看下面的片段：

```
<div>
    <div></div>
    <div><!-- my target node -->
        <div><!-- not my target node -->
            <img /><!-- my source node -->
        </div>
    </div>
</div> 
```

如您所见，`img`-elment 有两个封闭`div`的 s。我希望将这两个封闭`div`s 中的第一个视为 -elment 的“真正”父级（我需要找到的那个），`img`因为它`div`之前有一个兄弟，因此搜索结束并且兄弟`div`和外部封闭`div`被忽略。

如果根本没有兄弟姐妹，则必须让出外部`div`；在元素没有被包围的情况下，元素本身必须被让出。

正如我通过 JavaScript 解释的那样，我只想知道如何定位元素。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-12T17:52:13.623

所以听起来你想要第一个具有兄弟元素的祖先。如果是这样，您可以这样做：

```
var parent = img.parentNode;

while (parent && !parent.previousElementSibling && !parent.nextElementSibling) {
    parent = parent.parentNode;
} 
```

或者也许更恰当地写成一个`do-while`循环：

```
do {
    var parent = img.parentNode;
} while (parent && !parent.previousElementSibling && !parent.nextElementSibling); 
```

因此，当它找到一个具有至少一个兄弟元素的循环，或者当它用完祖先元素时，循环将结束。

如果您知道兄弟姐妹是在父母之前还是之后，您可以只测试其中一个。

* * *

`***ElementSibling`另请注意，如果您支持旧版浏览器，则需要为属性添加 shim 。

您可以创建一个函数来执行此操作：

```
function prevElement(el) {
    while ((el = el.previousSibling) && el.nodeType !== 1) {
        // nothing needed here
    }

    return el;
}

function nextElement(el) {
    while ((el = el.nextSibling) && el.nodeType !== 1) {
        // nothing needed here
    }

    return el;
} 
```

然后使用如下函数：

```
do {
    var parent = img.parentNode;
} while (parent && !prevElement(parent) && !nextElement(parent)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:04:41.473

如果您不知道父元素的层数，则很难使用`element.getParent`单独的方法来选择它。但是，您可以遍历父节点，直到您正在查看的节点具有兄弟姐妹并且是`body`元素的子节点。假设您的`img`标签由`imgNode`.

```
function getParentWithSiblings(imgNode) {
    for( ; n; n = imgNode.parentNode) {
        if (n.nextSibling && n.parentNode.tagName == 'body') {
            return n;
       }
    }
} 
```

在上面的代码中，我们逐步遍历图像节点的父节点。在每次迭代中，我们检查当前节点（节点的某个父`img`节点）是否有兄弟节点并且是`body`标签的子节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:34:48.617

以防万一您好奇，这里是您如何使用[jQuery实现](http://jquery.com/)[user1689607 的答案](https://stackoverflow.com/a/12864538/105570)。

```
function getAncestorWithSiblings(element) {
  var ancestor = element.parent();
  while (ancestor && ancestor.siblings().length === 0) {
    ancestor = ancestor.parent();
  }
  return ancestor;
} 
```

将这个库用于您的目的是否有意义取决于我们没有的大量上下文。正如其他人正确指出的那样，您不需要 jQuery 来解决这个问题，它可能是一个不必要的重量级解决方案。也就是说，它可能是一个非常有用的库，如果您不知道或尚未研究过它，它当然值得您考虑。

# javascript - Backbonejs 获取触发路由的元素

> ID：12864358
> 
> 赞同：0
> 
> 时间：2012-10-12T17:37:53.830
> 
> 标签：javascript, backbone.js

我正在使用 Backbonejs 路由并尝试获取触发路由的元素，例如，如果我有：

`<a href="#/files" id="link123">Click</a>`，在路由内部是否无论如何都知道单击了哪个元素，以便我可以获取该元素的任何任意属性的 id 或类？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:50:39.643

首先，来自官方 Backbone 文档：

> [http://backbonejs.org/#Router-extend](http://backbonejs.org/#Router-extend)
> 
> 请注意，您需要避免在路由定义中使用前导斜杠

我建议遵循该模式

其次要解决您的问题，您可以做的是在您的视图中，绑定到链接的“点击”事件，如下所示：

```
events: {
    'click a': 'onClick'
} 
```

在哪里

```
onClick: function (event) {
    event.preventDefault();
    event.stopPropagation();
    var url = $(event.currentTarget).attr('href');
    // the following line depends on how you implemented your app, this is an example
    window.app.controller.navigate(url, {trigger: true});
} 
```

现在所做的是，您已经在视图中截获了用于触发该`onClick`方法的元素。

如果您能提供更多关于您想要达到的目标的信息，也许我可以详细说明我的答案。

# android - Android：什么时候使用layout_margin，什么时候使用weightSum？

> ID：12864359
> 
> 赞同：2
> 
> 时间：2012-10-12T17:37:55.867
> 
> 标签：android, android-layout, android-linearlayout

我正在尝试在我的 Android 应用程序上实现以下布局：

![在此处输入图像描述](../Images/40a012c3ef23aee3980fd96cedcee218.png)

正如你所看到的，我想要一个中央登录框占据大约 70% 的宽度。我相信基本上有两种方法可以实现这一目标：

**1.**为登录框创建一个Linear或Relative布局，左右两边都添加layoutMargin。

**2.**创建一个weightSum="1" 的包装器LinearLayout，然后将RelativeLayout 放置在其中，layout_width="0dp" 和layout_weight="0.7"。

使用第一种方法，XML 将如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ImageView
        android:layout_gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:src="@drawable/logo"
        android:contentDescription="@string/logo"  
         />

    <LinearLayout
        android:layout_width="match_parent"         
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="#999999"
        android:gravity="center"
        android:layout_margin="30dp"
         >
        <EditText
            android:layout_width="fill_parent"           
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:hint="@string/email" />
        <EditText
            android:layout_width="fill_parent"            
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:hint="@string/password" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"  
            android:text="@string/login"/>

    </LinearLayout>     

</LinearLayout> 
```

第二种方法只是在当前布局之上有一个包装器 LinearLayout，weightSum="1"，内部布局将获得一个 layout_weight="0.7" 属性。

你认为哪一个是最好的方法？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:08:15.050

一种相当简单的方法是在相对布局中使用线性布局。然后使用 layout_centerInParent 并将其设置为“true”。完成后，您可以将边距设置为您想要的任何值（我使用 30 dp）。这是一个例子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:layout_margin="30dp"
    android:orientation="vertical"
    android:weightSum="50" >

    <EditText
    android:id="@+id/editText1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:inputType="textEmailAddress" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/editText1"
    android:layout_centerHorizontal="true"
    android:inputType="numberPassword" />

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/editText2"
    android:layout_centerHorizontal="true"
    android:text="Button" />
</LinearLayout>

</RelativeLayout> 
```

当然，如果您希望登录框的宽度正好是屏幕宽度的 70%，您可以通过编程来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:47:06.993

有一个 3d 替代方案，在 LinearLayout/RelativeLayout 中创建登录框，然后将其水平居中对齐。

# java - 用户复制粘贴链接时如何将用户限制为“主页”。

> ID：12864362
> 
> 赞同：0
> 
> 时间：2012-10-12T17:38:10.733
> 
> 标签：java, jsp

当用户将链接从一个浏览器复制并粘贴到另一个浏览器时，如何将用户限制为“主页”......即

当用户从 Internet Explorer 复制我的项目“localhost:8080/MyJavaProjectV1.0/Admin_GetTokenId.jsp”中的链接时

和

将其粘贴到 chrome..我希望用户被限制在主页..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:06:18.117

In every jsp page after the user was logged in, I am saving the username in a session and I am displaying username in every page, like...

```
hai  <%= ss.getAttribute("username")%> 
```

now I have used that username session and checking if username is null or empty.. if its null(ie the link is copied and pasted to other browser..) then im redirecting to login page

```
if(ss.getAttribute("username")==null || ss.getAttribute("username")=="")
{
    response.sendRedirect("loginpage.jsp");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:46:10.923

如果您使用的任何应用服务器都配置了登录以进行身份​​验证，只需保护文件中除`Login`页面之外的所有 URL 模式`web.xml`。**如果用户在没有身份验证的情况下尝试访问“登录”页面以外的任何 URL（或更多不安全的 URL），`Login`则默认情况下会显示页面。**. 您的配置如下所示：

```
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>Sample Security Realm</realm-name>
</login-config>

<security-role><role-name>admin</role-name></security-role>
<security-role><role-name>user</role-name></security-role>

<security-constraint>
    <web-resource-collection>
        <web-resource-name>Admin</web-resource-name>
        <!-- Mention your URL pattern here for admin access check>
        <url-pattern>/admin/*</url-pattern>  
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint>
<security-constraint>
    <web-resource-collection>
        <web-resource-name>User</web-resource-name>
        <!-- Mention your URL pattern here for standard user access check>
        <url-pattern>/user/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>user</role-name>
    </auth-constraint>
</security-constraint> 
```

如果您没有使用任何应用程序服务器，而是使用网络服务器（例如`apache`前端应用程序），请使用 apache 的安全插件和您的身份验证机制，例如很好的`Siteminder`凝胶。`Apache`

如果以上都不适用，请配置请求过滤器，检查用户，如果用户未通过身份验证，则重定向到登录页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:39:13.703

添加一个 servlet 过滤器，将每个请求过滤到主页并检查请求是否经过身份验证以提供服务 - 服务，否则限制

* * *

**另见**

*   [为我的 Web 应用程序编写授权过滤器（JSF 2.0）](https://stackoverflow.com/questions/5662367/writing-an-authorization-filter-for-my-web-appjsf-2-0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:48:00.527

这个问题尚不清楚是否有任何形式的身份验证。假设这与身份验证无关，一种解决方案是查看一个名为referrer [http://en.wikipedia.org/wiki/HTTP_referrer](http://en.wikipedia.org/wiki/HTTP_referrer)的http 标头 ，该referrer 标头包含有关用户先前在哪个页面上的信息。

您可以创建一个 servlet 过滤器来检查引荐来源网址。在访问任何文章时检查引荐来源标题，如果它的任何页面或网站不是您的主页，或者引荐来源为空白，您会将用户转发到主页，否则将用户发送到他请求的页面。

# .htaccess - .htaccess 规则重定向所有页面，除了少数提供的页面

> ID：12864366
> 
> 赞同：0
> 
> 时间：2012-10-12T17:38:29.383
> 
> 标签：.htaccess

我有以下 .htaccess 文件。

```
ErrorDocument 404 /404.php

RewriteRule ^aanbiedinginformatie$ aanbiedinginformatie.php
RewriteRule ^algemenevoorwaarden$ algemenevoorwaarden.php

RewriteRule ^contact$ contact.php
RewriteRule ^disclaimer$ disclaimer.php
RewriteRule ^faq$ faq.php
RewriteRule ^index$ index.php
RewriteRule ^informatie$ informatie.php
RewriteRule ^inloggen-bedrijven$ inloggen-bedrijven.php
RewriteRule ^inloggen-consument$ inloggen-consument.php
RewriteRule ^nieuws$ nieuws.php
RewriteRule ^(.*)-nieuws$ bekijknieuws.php?id=$1
RewriteRule ^(.*)-(.*)-persbericht$ persbericht.php?id=$1&bedrijf=$2
RewriteRule ^persberichteninformatie$ persberichteninformatie.php
RewriteRule ^privacy$ privacy.php
RewriteRule ^registreren-bedrijven$ registreren-bedrijven.php
RewriteRule ^registreren-bedrijven-stap-2$ registreren-bedrijven-stap-2.php
RewriteRule ^registreren-bedrijven-stap-3$ registreren-bedrijven-stap-3.php
RewriteRule ^registreren-bedrijven-stap-4$ registreren-bedrijven-stap-4.php
RewriteRule ^registreren-bedrijven-stap-5$ registreren-bedrijven-stap-5.php
RewriteRule ^registreren-consument$ registreren-consument.php
RewriteRule ^vacatureinformatie$ vacatureinformatie.php
RewriteRule ^(.*)-vacatures$ vacatures.php?id=$1

RewriteRule ^zoeken-op-(.*)$ zoeken.php?query=$1
RewriteRule ^zoeken-in-(.*)$ zoeken.php?plaats=$1
RewriteRule ^zoeken-q-(.*)-in-(.*)$ zoeken.php?query=$1&plaats=$2

RewriteRule ^(.*)-vacatures-zoeken$ zoekenvac.php?query=$1
RewriteRule ^(.*)-in-(.*)-vacatures$ zoekenvac.php?query=$1&plaats=$2
RewriteRule ^vacatures-in-(.*)$ zoekenvac.php?plaats=$1 

RewriteRule ^(.*)-aanbiedingen$ zoekenaan.php?query=$1
RewriteRule ^(.*)-aanbiedingen-in-(.*)$ zoekenaan.php?query=$1&plaats=$2
RewriteRule ^aanbiedingen-in-(.*)$ zoekenaan.php?plaats=$1

RewriteRule ^(.*)-persberichten$ zoekenpers.php?query=$1
RewriteRule ^persberichten-in-(.*)$ zoekenpers.php?plaats=$1
RewriteRule ^(.*)-persberichten-in-(.*)$ zoekenpers.php?query=$1&plaats=$2

RewriteRule ^bedrijven-in-(.*)$ zoeken.php?plaats=$1

RewriteRule ^control/consument$ control/consument.php
RewriteRule ^control/consument-mijngegevens$ control/consument-mijngegevens.php
RewriteRule ^control/consument-wachtwoord$ control/consument-wachtwoord.php
RewriteRule ^control/consument-cv$ control/consument-cv.php
RewriteRule ^control/consument-reacties$ control/consument-reacties.php
RewriteRule ^control/consument-reviews$ control/consument-reviews.php
RewriteRule ^control/logout$ control/logout.php

RewriteRule ^control/bedrijven$ control/bedrijven.php
RewriteRule ^control/bedrijven-aanbieding$ control/bedrijven-aanbieding.php
RewriteRule ^control/bedrijven-facturen$ control/bedrijven-facturen.php
RewriteRule ^control/bedrijven-fotos$ control/bedrijven-fotos.php
RewriteRule ^control/bedrijven-kortingscode$ control/bedrijven-kortingscode.php
RewriteRule ^control/bedrijven-kortingscode-bewerken-(.*)$ control/bedrijven-    kortingscode-bewerken.php?id=$1
RewriteRule ^control/bedrijven-kortingscode-verwijderen-(.*)$ control/bedrijven-    kortingscode-verwijderen.php?id=$1
RewriteRule ^control/bedrijven-wachtwoord$ control/bedrijven-wachtwoord.php
RewriteRule ^control/bedrijven-pakket$ control/bedrijven-pakket.php
RewriteRule ^control/bedrijven-persbericht$ control/bedrijven-persbericht.php
RewriteRule ^control/bedrijven-persbericht-bewerken-(.*)$ control/bedrijven-   persbericht-bewerken.php?id=$1
RewriteRule ^control/bedrijven-persbericht-verwijderen-(.*)$ control/bedrijven- persbericht-verwijderen.php?id=$1
RewriteRule ^control/bedrijven-profiel$ control/bedrijven-profiel.php
RewriteRule ^control/bedrijven-vacatures$ control/bedrijven-vacatures.php
RewriteRule ^control/bedrijven-vacatures-bekijk-(.*)$ control/bedrijven-vacatures- bekijk.php?id=$1
RewriteRule ^control/bedrijven-vacatures-bewerken-(.*)$ control/bedrijven-vacatures-   bewerken.php?id=$1
RewriteRule ^control/bedrijven-vacatures-verwijderen-(.*)$ control/bedrijven-vacatures-verwijderen.php?id=$1
RewriteRule ^control/logoutb$ control/logoutb.php

RewriteRule ^(.*)$ bedrijf.php?q=$1 [L]

RewriteRule ^id(.*)-(.*)$ bedrijf.php?id=$1
RewriteRule ^branche(.*)-(.*)$ zoekenbranche.php?id=$1 
```

我想要的是，除了上面提供的 URL 之外的所有 URL 都将重定向到`bedrijf.php?q=$1`. 我尝试排除，但这不起作用。

所以 www.site.com/companyname 将重定向到 bedrijf.php?q=companyname，而 www.site.com/contact 将重定向到 contact.php

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:02:23.307

重写规则循环。整套规则不断地重新应用于 URI，直到 URI 停止更改。你的规则在这里：

```
RewriteRule ^(.*)$ bedrijf.php?q=$1 [L] 
```

没有条件阻止以前重写的 URI 被重写为`bedrijf.php`，因为`(.*)`匹配所有内容。

尝试为其添加一些条件，例如：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ bedrijf.php?q=$1 [L] 
```

或者

```
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule ^(.*)$ bedrijf.php?q=$1 [L] 
```

# c# - 有没有办法加快这种方法？

> ID：12864367
> 
> 赞同：0
> 
> 时间：2012-10-12T17:38:30.173
> 
> 标签：c#, winforms, refactoring, email

我有两种发送电子邮件的方式。一个“静默”发送电子邮件，速度快如闪电，另一个比西伯利亚糖蜜慢。不过，我们需要后者，因为我们希望允许用户添加和/或编辑内容、收件人等。

这是快速但现在已过时的方法：

```
public static void SendEmail(String Recipients,
                 String Sender,
                 String Subject,
                 String Body,
                 String SMTPHost)
{
    try
    {
        var message = new MailMessage();
        string[] recipients = Recipients.Split(';');
        foreach (string recipient in recipients)
        {
            message.To.Add(recipient);
        }
        message.Subject = Subject;
        message.From = new MailAddress(Sender);
        message.Body = Body;
        if (String.IsNullOrWhiteSpace(SMTPHost))
        {
            SMTPHost = "localhost";
        }
        var smtp = new SmtpClient(SMTPHost);
        smtp.Send(message);
    } catch (Exception e)
    {
        log.Error(e, e);
    }
} 
```

...这是新的但缓慢的方法：

```
public static void SendEmail(String Recipients,
                             String Subject,
                 String Body)
{
    System.Diagnostics.Process proc = new System.Diagnostics.Process();
    proc.StartInfo.FileName = string.Format("mailto:{0}?subject={1}&body={2}", Recipients, Subject, Body);
    proc.Start();
} 
```

有没有办法加快调用默认电子邮件客户端（在我们的例子中是 Outlook）的后一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:41:56.830

我寻找一个真正快速的答案。我知道 C# 是从 java 中分离出来的，所以这里是 java 对这个问题的回答。

[Java 库](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html)

我将继续寻找 C# 版本，但这将帮助您了解在进行自己的研究时要寻找什么。

# python - python矩阵与numpy矩阵。我究竟做错了什么？

> ID：12864368
> 
> 赞同：2
> 
> 时间：2012-10-12T17:38:30.157
> 
> 标签：python, numpy

我正在尝试用 Python 进行一些 3d 渲染。我一直在读 Python 太慢了！我只是必须利用 Numpy 的 C-awesomeness 来处理我在着色器中无法完成的所有矩阵内容！否则什么都行不通，yadda，yadda（在这里转述..）。

但是：我做了一些测试！

这是一个随机矩阵，一次是 Numpy 风格的：

```
matrix1 = numpy.matrix([[1, 1, 0, 0,], [0, 1, 0, 0], [0, 0, 1, 1], [0, 0, 0, 1]])
>>> matrix([[1, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 0, 1, 1],
            [0, 0, 0, 1]]) 
```

并且曾经作为一个沼泽标准元组：

```
matrix2 = (1, 1, 0, 0,\
      0, 1, 0, 0,\
      0, 0, 1, 1,\
      0, 0, 0, 1) 
```

现在，如果我想要反过来，我可以在 Numpy 中做到这一点：

```
def inv_1():
    return matrix1.I 
```

或者作为纯 Python （我省略了一些数学，因为它伤害了我的头）：

```
def inv_2():
    m0, m1, m2, m3, \
    m4, m5, m6, m7, \
    m8, m9, m10, m11, \
    m12, m13, m14, m15 = matrix2

    A0 = (( m0 *  m5) - ( m1 *  m4))  ....
 ...B5 = ((m10 * m15) - (m11 * m14))

    det = 1.0 / det
    return (
        (+ ( m5 * B5) - ( m6 * B4) + ( m7 * B3)) * det, ...
     ...(+ ( m8 * A3) - ( m9 * A1) + (m10 * A0)) * det
    ) 
```

两者都工作正常：

```
inv_1()
>>>> matrix([[ 1., -1.,  0.,  0.],
             [ 0.,  1.,  0.,  0.],
             [ 0.,  0.,  1., -1.],
             [ 0.,  0.,  0.,  1.]])

inv_2()
>>>> (1.0, -1.0, 0.0, 0.0, 
      0.0, 1.0, 0.0, 0.0, 
      0.0, 0.0, 1.0, -1.0,
      0.0, 0.0, 0.0, 1.0)   (I added the line-breaks here for clarity) 
```

但纯 Python 代码的运行速度*始终*比备受赞誉的 Numpy 快十倍：

```
timeit.timeit(inv_1, number=100000)
>>>> 3.0659120082855225

timeit.timeit(inv_2, number=100000)
>>>> 0.4014430046081543 
```

如果你加上将我漂亮的元组矩阵转换为 Numpy 矩阵的开销，它会更慢。

那么这里发生了什么？难道我做错了什么？这完全是由于调用 C 函数的开销造成的吗？我偷的反码代码是不是违反了物理定律？

谢谢你帮我解禁！爱你们！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T17:41:49.080

您正在分析地反转矩阵（这是可能的，因为您知道尺寸并且它们不是太大）。numpy 必须使用其他一些（数字）算法来反转矩阵，如果矩阵是 4x4 以及 10000x10000，则该算法有效。换句话说，一般问题比您拥有的简单 4x4 案例要困难得多。

# java - 如何从包含撇号的下拉列表中选择答案？

> ID：12864375
> 
> 赞同：0
> 
> 时间：2012-10-12T17:39:16.197
> 
> 标签：java, xpath, selenium, webdriver

当我尝试使用 webdriver（在所有浏览器中发生）选择带有撇号的答案时，我得到了这个 InvalidSelectorException。我试图使用反斜杠来转义撇号，但我认为这是因为它存储在一个变量中，它没有被转义：

```
org.openqa.selenium.InvalidSelectorException: The xpath expression '//select[@name='titleCode']/option[@value='I'm in college']' cannot be evaluated or does notresult in a WebElement (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 219 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/invalid_selector_exception.html
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:08:56'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_25'
Driver info: driver.version: EventFiringWebDriver
Session ID: 6efb7eae-3afb-4ab1-948d-146b42d2c96c
Command duration or timeout: 701 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/invalid_selector_exception.html
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '3.2.0-32-generic', java.version: '1.6.0_31'
Driver info: driver.version: RemoteWebDriver
Session ID: 1350062508295 
```

这是java代码。变量 question 和 answer 是来自数据库的字符串列表：

```
driver.findElement(By.xpath("//select[@name='" + question + "']/option[@value='" + answer + "']")).click(); 
```

这是HTML：

```
<select id="select1" class="select" name="titleCode">
<option selected="" value="">Please select...</option>
<option value="I'm in high school">I'm in high school</option>
<option value="I'm in college">I'm in college</option>
</select> 
```

有没有办法逃避存储在变量中的字符串的撇号或其他方式解决这个问题，或者撇号甚至是问题？任何帮助将不胜感激。谢谢！

布莱恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:09:14.713

试试这个：

```
 <select id="select1" class="select" name="titleCode">
    <option selected="" value="">Please select...</option>
    <option value="I&#39;m in high school">I&#39;m in high school</option>
    <option value="I&#39;m in college">I&#39;m in college</option>
</select> 
```

选项标签之间不应该是必需的，因为它们没有发布，但以防万一。

我希望这有效

# mysql - 将 SNMP GET 输出存储到 MySQL 数据库

> ID：12864381
> 
> 赞同：0
> 
> 时间：2012-10-12T17:39:45.370
> 
> 标签：mysql, database, snmp, net-snmp

我想制作一个简单的脚本，定期执行 SNMP GET 并将输出存储到 MySQL 数据库。它将在 Windows 上运行。

用什么编程语言来编写它最不痛苦的选择是什么？Powershell，Java，...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:57:03.870

Python 有 SNMP（即 NET-SNMP）绑定。它也将处理 MySQL 数据库。通过这种方式，您可以使用这些 API 创建您自己的扫描应用程序，使用 SNMP 通信通道和 MySQL 数据库存储收集的数据。当然还有很多其他可能的解决方案/组合......但是我推荐这个，因为在这种简单的情况下，您不必使用繁重的 JVM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:46:32.950

Python具有SNMP（Net-SNMP）绑定，最好使用RRD数据库存储输出，因为它本身包含时间间隔。Python也具有RRD api，您可以轻松处理

# php - 需要帮助将 html 表单内容转发到公共 http 服务

> ID：12864382
> 
> 赞同：1
> 
> 时间：2012-10-12T17:39:45.430
> 
> 标签：php, javascript, html

如果有人可以解释如何做到这一点或者在哪里可以找到这方面的教程，我需要帮助将 html 表单内容转发到公共 http 服务！

我制作了我的表格，如下所示：

```
<span class="text"> <input class="text" type="text" name="First" value="First" ></span>
                <span class="text"> <input class="text" type="text" name="Last" value="Last" ></span>
                <span class="text"><input type="text" value="Email" /></span>
                <input class="btn-submit" type="submit" value="Submit"  /> 
```

我得到了以下代码来转发输入：

```
$.ajax({
    url: 'https://www.saddleback.com/Services/Subscription/Subscription/Save/' + subscriptionId,
    data: {
        'firstName': firstName,
        'firstName': firstName,
        'lastName': lastName,
        'email': email,
        'redirectToUrl': redirectToUrl,
        'redirectFailureToUrl': redirectFailureToUrl
    },
    type: "post",
    cache: false,
    dataType: "text",
    success: function (message) {
        $('.subscriptionWarning').append("<span id=''litStatus''>" + message + "</span>");
    },
    error: function (xhr, ajaxOptions, thrownError) {
        $('.subscriptionWarning').append("<span id=''litStatus''>Error encountered while saving subscription.</span>");
    }
}); 
```

我需要转发到的 ID 是 23

感谢您的帮助，如果我的问题措辞错误，我们深表歉意。

```
 <span class="text"> <input class="text" type="text" name="firstName" value="First" ></span>
                <span class="text"> <input class="text" type="text" name="lastName" value="Last" ></span>
                <span class="text"><input type="text" name="email" value="Email" /></span>
                <input class="btn-submit" type="submit" value="Submit"  />       

$fname = $_GET['firstName'];
$lname = $_GET['lastName'];
$email = $_GET['email'];

$h = curl_init();

curl_setopt($h, CURLOPT_URL,           "http://profile.purposedriven.com/managesubscriptionssimple.aspx");
curl_setopt($h, CURLOPT_POST, true);
curl_setopt($h, CURLOPT_POSTFIELDS, array(
'name' => 'yes',
'comment' => 'no'
));
curl_setopt($h, CURLOPT_HEADER, false);
curl_setopt($h, CURLOPT_RETURNTRANSFER, 1);

$result = curl_exec($h);
echo $result; 
```

这就是我的代码现在的样子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:16:03.330

您将无法向具有不同域的网站发出 ajax 请求。

在这里阅读更多：[为什么不允许跨域 AJAX 调用？](https://stackoverflow.com/questions/5383045/why-cross-domain-ajax-call-is-not-allowed)

[如何使用 php 和cURL](http://php.net/manual/en/book.curl.php)或[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)在自己的服务器中发出请求

**示例：**在您自己的网站上提交您的表格，而不是：

```
$fname = $_GET['firstName'];
$lname = $_GET['lastName'];
$email = $_GET['email']; 
```

并按照[此处手册中的 cURL](http://www.php.net/manual/en/book.curl.php#102885)

# android - 如何在 Preferences Activity 中重新启动应用程序或返回 LAUNCHER 页面？

> ID：12864383
> 
> 赞同：2
> 
> 时间：2012-10-12T17:39:54.730
> 
> 标签：android, android-preferences, android-launcher

> **可能重复：**
> [重新启动应用程序到某个活动？](https://stackoverflow.com/questions/7308324/restart-app-to-a-certain-activity)

我目前正在编写一个 DialogPreferences Activity 来删除用户帐户。我成功地完全删除了用户数据，现在计划返回 LAUNCHER 屏幕以推动用户进行新安装。但我真的找不到任何回去的方法。

据我所知，意图只能从 XML 文件中使用。

有什么方法可以使用 StartActivity() 或在 DialogPreferences Activity 中重新启动应用程序？

```
 public class DeleteAccountActivity extends DialogPreference {

       public DeleteAccountActivity(Context context, AttributeSet attrs) {
          super(context, attrs);
       }

       @Override
       protected void onDialogClosed(boolean positiveResult) {
          super.onDialogClosed(positiveResult);
          if (positiveResult) {
             if (DEBUG)
                Log.d(0, DEBUG_TAG, "DeleteAccountActivity");

         try {
            ...

            boolean success = rest.deregister(request);
            if (success) {
               Toast.makeText(getContext(),
                              getContext().getResources().getText(R.string.successfully_deleted_account),
                              Toast.LENGTH_LONG).show();

               SharedPreferences.Editor editor = mSharedPref.edit();
               editor.clear();
               editor.commit();

               Intent intent = new Intent();
               intent.setClass(this, A.class);
               StartActivity(intent); //error
               if (DEBUG)
                  Log.d(0, DEBUG_TAG, "Deleted the user account successfully.");
            }
         }
         catch (Exception e) {
            Log.e(0, DEBUG_TAG, "asd", e);
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:48:33.953

（通过您的代码示例，我立即看到了一个解决方案，感谢您发布它！）由于[`startActivity()`](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29)是 Context 类的成员，所以只需使用：

```
getContext().startActivity(...); 
```

当然，与其调用`getContext()`三次或更多次，不如将它的引用保存在本地或类变量中。

# javascript - 如何在验证失败时禁用提交按钮并在使用validation.js通过后重新启用它？

> ID：12864387
> 
> 赞同：1
> 
> 时间：2012-10-12T17:39:58.957
> 
> 标签：javascript, jquery, jquery-validate

我在我的网站中使用[validate.js进行验证。](https://github.com/jzaefferer/jquery-validation)那么如何在验证失败时禁用提交按钮并在通过后重新启用它。我已经通过将以下代码添加到成功回调来尝试过

```
success: function(label) {
            label.html(" ").addClass("pop_valid");
            if($('#form').validate()){
                $('#submit -button').attr('disabled',false);
            }
        } 
```

通过这个，我可以在总表单有效时启用它，但是如果在那之后再次更改了某个字段并且如果表单变得无效，如何再次禁用它？任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:47:20.640

尝试以下代码禁用按钮

```
 $('[id$=helobtn]').attr("disabled", "disabled"); 
```

并启用尝试以下操作：

```
$('[id$=helobtn]').removeAttr("disabled"); 
```

希望这会对你有所帮助............或者你可以[查看这个链接以获得你需要的东西......](http://forum.jquery.com/topic/disable-enable-button-in-form)

**更新** 我认为您想在更改值上执行此操作。如果是这样，那么您必须验证文本框的模糊和下拉列表的**更改**，如下所示：对于文本框

```
 $(document).ready(function () {
        $('[id$=test]').live('blur', function () {
            if (validate) {
                // enable btn 
            } else {
                // disable btn 

            }

        });

         }); 
```

对于下拉列表

```
 $('[id$=test]').live('change', function () {
            if (validate) {
                // enable btn 
            } else {
                // disable btn 
            }
        }); 
```

# css - 将内部 CSS 复制到外部 CSS，有些项目看起来不一样

> ID：12864391
> 
> 赞同：1
> 
> 时间：2012-10-12T17:40:25.757
> 
> 标签：css

我把我的内部 CSS 复制粘贴到一个外部 CSS 文档中，一些格式已经消失了。我没有从内部更改任何内容到外部，我知道它正在工作，因为某些格式正在工作。以前有没有人遇到过这个问题，并且可能对为什么会发生这种情况有答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:47:34.483

内联样式覆盖内部样式，内部样式覆盖外部样式。很可能您的样式正在被覆盖...

我现在从评论、删除`<style>`和`</style>`外部 css 中看到了问题。 `<style>`属性告诉浏览器接下来是样式，但是当使用外部样式表时，您不需要放置标记，因为当您通过使用和属性`<style>`导入文件时，您已经告诉浏览器它是什么。`type``rel`

# matlab - 在 inputdlg 框中显示循环计数的值？

> ID：12864395
> 
> 赞同：1
> 
> 时间：2012-10-12T17:41:00.500
> 
> 标签：matlab

为这个相当模糊的问题道歉，我写了一个简单的声明，其中玩家是一个预定的整数：

```
for k = 0:players;
    inputdlg('Enter the name of player (?): ');
end 
```

我想让部分（？）自动填充，因为语句通过玩家编号计数。谁能建议一种方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:42:07.210

使用`sprintf`：

```
for k = 0:players
    st = sprintf('Enter the name of player %d',k);
    inputdlg(st);
end 
```

# delphi - 启用运行时主题时如何避免系统异常？

> ID：12864397
> 
> 赞同：1
> 
> 时间：2012-10-12T17:41:02.323
> 
> 标签：delphi, delphi-2007

我刚刚在项目选项中遇到了一些有趣的、启用的运行时主题，当 TDCTree 上显示提示（来自旧的 Dream 组件，类似于 TTreeView）并且鼠标移到另一个应该显示提示的节点上时，我得到了什么是：

```
---------------------------
Debugger Fault Notification
---------------------------
Project DRIVE:\path\to\project\MyApp.exe faulted with message: 'system exception (code 0xc000041d) at 0x73c84cad'. Process Stopped. Use Step or Run to continue.
---------------------------
OK   
--------------------------- 
```

我相信在 IDE 中会出现同样的问题，每当我在设计时添加项目时尝试将鼠标悬停在项目上。

如果我在项目选项中禁用运行时主题，也不例外，但它会显示“旧式 XP 提示”。

应用程序本身会引发事件名称为“APPCRASH”的异常。

看到很多与“运行时主题”相关的问题，但还没有看到任何方法可以在不禁用它们的情况下避免这些问题。

操作系统：Windows 7 x64

Delphi：2007 年安装了 2007 年 12 月和 2008 年 2 月的更新

**更新 1：**

避免该问题的一种方法是：

```
Procedure TDCTreeToolTip.DoHideToolTip;
Begin
  Inherited;
  If FToolTipAdded Then
    if FTreeNode <> NIL then // fix
      DeleteToolTip(ToolTipID,FTreeNode.TreeView.Handle);
  FToolTipAdded:=False;
  FTreeNode:=Nil;
End; 
```

在单元“dcntree.pas”中。

似乎 FTreeNode 在调用 DoHideToolTip 之前“以某种方式”获得了 NIL-ed，因此“引发了系统异常......它仍然无法解释为什么只有在“启用运行时主题”时

我现在没有时间进一步调查，但找到了“触发器”，需要弄清楚“谁”在拉动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:45:42.287

至少目前看来，只能使用以下解决方法：

```
Procedure TDCTreeToolTip.DoHideToolTip;
Begin
  Inherited;
  If FToolTipAdded Then
    if FTreeNode <> NIL then // fix
      DeleteToolTip(ToolTipID,FTreeNode.TreeView.Handle);
  FToolTipAdded:=False;
  FTreeNode:=Nil;
End; 
```

在单元“dcntree.pas”中。

# mono - 圆形仪表梯度 - TeeChart - MonoAndroid

> ID：12864398
> 
> 赞同：3
> 
> 时间：2012-10-12T17:41:05.150
> 
> 标签：mono, xamarin.android, gradient, teechart, gauge

我正在使用 TreeChart 制作如图所示的指标。**但是我有一个问题，我不能使三色渐变到那个量规**。这是我的代码

```
 Steema.TeeChart.TChart tChart = new Steema.TeeChart.TChart(this);
        tChart.Panel.Transparent = false;
        Steema.TeeChart.Styles.Gauges gauges = new Steema.TeeChart.Styles.Gauges(tChart.Chart);
        Steema.TeeChart.Drawing.Gradient g = new Steema.TeeChart.Drawing.Gradient(gauges.Chart);

        gauges.bBrush.Gradient.Direction = Steema.TeeChart.Drawing.GradientDirection.DiagonalUp;
        gauges.bBrush.Gradient.StartColor = System.Drawing.Color.Red;
        gauges.bBrush.Gradient.MiddleColor = System.Drawing.Color.Black;
        gauges.bBrush.Gradient.EndColor = System.Drawing.Color.Blue;
        gauges.bBrush.Gradient.Visible = true;
        gauges.Pen.Color = System.Drawing.Color.FromArgb(5,56,73);

        gauges.TotalAngle = 180; // circular arc  
        gauges.RotationAngle = 180; // arc rotation angle  
        gauges.HandStyle = Steema.TeeChart.Styles.HandStyle.Triangle; // pointer style  
        gauges.Center.Style = Steema.TeeChart.Styles.PointerStyles.Circle; // SPHERE center circle style  
        gauges.Center.HorizSize = 5; // center circle level size  
        gauges.Center.VertSize = 5; // center circle vertical size 

        gauges.ShowInLegend = false; // display the legend  
        gauges.HandDistance = 23; // pointer length  

        //---------------------------------------------------
        gauges.Value = 80;
        gauges.Minimum = 0; //   minimum;
        gauges.Maximum = 100; // maximum value  
        //----------------------------------------------------

        gauges.MinorTickDistance = 0;

        gauges.Pen.DashWidth = 23;
        gauges.Chart.Axes.Left.AxisPen.Width = 65; //   brush width; 
        gauges.Chart.Axes.Left.AxisPen.Color = System.Drawing.Color.Red;
        gauges.Chart.Axes.Left.MinorTickCount = 5; // the scale value scale line number  
        gauges.Chart.Axes.Left.MinorTicks.Length = 10; // the scale value scale line length of  
        gauges.Chart.Axes.Left.Ticks.Length = 20; // display the value scale line length of  
        gauges.Chart.Axes.Left.Increment = 3000; // the scale value of interval size

        SetContentView(tChart) ; 
```

我还尝试了以下代码行

```
 gauges.CircleGradient.Direction = Steema.TeeChart.Drawing.GradientDirection.DiagonalUp;
        gauges.CircleGradient.Visible = true;
        gauges.CircleGradient.StartColor = System.Drawing.Color.Green;
        gauges.CircleGradient.EndColor = System.Drawing.Color.Red;
        gauges.CircleGradient.UseStandardGradient = true; 
```

我希望我能帮助

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:10:37.647

您应该使用*Steema.TeeChart.Styles.CircularGauge*而不是*Steema.TeeChart.Styles.Gauges*，这是一个更简单的仪表版本。例如，使用下面的代码片段，您将获得与链接中的图像类似的仪表：

![带 TeeChart 的圆形仪表](../Images/db666c0de5a72593c6044c1f226efb9f.png)

这与您正在寻找的相似吗？

```
 tChart1.Header.Visible = false;

  Steema.TeeChart.Styles.CircularGauge circularGauge1 = new Steema.TeeChart.Styles.CircularGauge(tChart1.Chart);

  circularGauge1.Frame.Visible = false;
  circularGauge1.FaceBrush.Visible = false;
  circularGauge1.DisplayTotalAngle = 180;
  circularGauge1.TotalAngle = 180;
  circularGauge1.Value = 200;
  circularGauge1.Ticks.Visible = false;
  circularGauge1.Minimum = 0;
  circularGauge1.Maximum = 1000;
  circularGauge1.Axis.AxisPen.Visible = false;
  circularGauge1.Axis.Increment = 500;
  circularGauge1.RedLine.Visible = false;
  circularGauge1.GreenLineStartValue = 0;
  circularGauge1.GreenLineEndValue = 1000;
  circularGauge1.GreenLine.Gradient.Direction = Steema.TeeChart.Drawing.GradientDirection.LeftRight;
  circularGauge1.GreenLine.Gradient.UseMiddle = true;
  circularGauge1.GreenLine.Gradient.StartColor = Color.Orange;
  circularGauge1.GreenLine.Gradient.MiddleColor = Color.Yellow;
  circularGauge1.GreenLine.Gradient.EndColor = Color.Green;
  circularGauge1.GreenLine.Pen.Visible = false; 
```

# mysql - 具有复杂连接的 Rails 和查询：每个连接表都可以有别名吗？

> ID：12864400
> 
> 赞同：3
> 
> 时间：2012-10-12T17:41:08.227
> 
> 标签：mysql, ruby-on-rails, activerecord, join

我正在开发一个用于教育研究的在线应用程序，我经常需要*非常*复杂的 SQL 查询：

*   查询通常包括 5-20 个连接，通常多次连接到同一个表
*   SELECT 字段通常在派生字段/计算和 CASE 语句之间有 30-40 行高
*   根据用户的权限和其他安全设置，在 PHP 中添加了额外的 WHERE 条件
*   用户界面具有搜索和排序控件，可将自定义子句添加到 WHERE / ORDER / HAVING 子句。

目前，这个应用程序是基于 PHP + MYSQL + Jquery 构建的，用于移动部件。（这源于旧的 Dreamweaver 代码。）很快我们将从头开始重建应用程序，目的是整合、清理并为未来的扩展做好准备。虽然我对 PHP 很熟悉，但我正在学习一些关于 Rails 的知识并意识到，也许在更现代的框架上构建 2.0 版本会更好。但在我投入数小时的教程之前，我需要知道 Rails 查询系统（ActiveRecord？）是否能满足我们的查询需求。

这是我关心的一个查询挑战的示例。查询必须从表的 3+“实例”中进行选择，并从每个实例中获取可比较的信息：

```
SELECT p1.name AS my_name, pm.name AS mother_name, pf.name AS father_name
FROM people p1
    JOIN mother pm ON p1.mother_id = pm.id
    JOIN father pf ON p1.father_id = pf.id
    # etc. etc. etc.
WHERE p1.age BETWEEN 10 AND 16
# (selects this info for 10-200 people) 
```

或者，一个类似的例子，更能代表我们的挑战。一个“原始数据”表多次连接到一个“编码选择”表，每个实例又必须查找与其存储的键关联的文本：

```
SELECT d.*, c1.coder_name AS name_c1, c2.coder_name AS name_c2, c3.coder_name AS name_c3, 
    (c1.result + c2.result + c3.result) AS result_combined,
    m_c1.selection AS selected_c1, m_c2.selection AS selected_c2\. m_c3.selection AS selected_c3
FROM t_data d
    LEFT JOIN t_codes c1 ON d.id = c1.data_id AND c1.category = 1
        LEFT JOIN t_menu_choice m_c1 ON c1.menu_choice = m_c1.id
    LEFT JOIN t_codes c2 ON d.id = c2.data_id AND c2.category = 2
        LEFT JOIN t_menu_choice m_c2 ON c2.menu_choice = m_c2.id
    LEFT JOIN t_codes c3 ON d.id = c3.data_id AND c3.category = 3
        LEFT JOIN t_menu_choice m_c3 ON c3.menu_choice = m_c3.id 
WHERE d.date_completed BETWEEN ? AND ?
    AND c1.coder_id = ? 
```

这些类型的连接很容易用纯 SQL 编写，当需要搜索过滤器和其他不同的元素时，几个 PHP 循环可以帮助将字符串拼凑成一个完整的查询。但是我还没有看到任何解决这种结构的 Rails / ActiveRecord 示例。如果我需要使用 find_by_sql("") 将每个查询作为纯 SQL 运行，那么与坚持使用我所知道的 PHP 相比，使用 Rails 可能不会有太大的改进。

我的问题是：ActiveRecord 是否支持表需要“昵称”的情况，例如上面的查询？主表也可以有别名吗？（在我的示例中，“p1”或“d”）我对 SELECT 语句中选择的字段有多少控制权？我可以为选定的字段创建别名吗？我可以在 SELECT 子句中进行计算并选择派生字段吗？CASE 语句呢？

如何设置指定连接表别名的 WHERE 条件？我的 WHERE 子句可以包括（使用上面的例子）“ WHERE pm.age BETWEEN p1.age AND 65 ”之类的东西吗？

这种复杂性不仅仅是偶尔出现的奇怪查询，它是应用程序的一个恒定且核心的特性（因为它目前的结构）。我关心的不仅仅是在 Rails 和 ActiveRecord 中编写这些查询是否“可能”；这是“Rails 方式”是否支持这种需求，因为我需要写很多这样的东西。因此，我正在尝试确定切换到 Rails 是否会带来比其价值更多的麻烦。

提前致谢！- 如果您在 Rails 中遇到类似的可怕查询，我很想听听您的故事及其结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:07:56.497

简短的回答是肯定的。Rails 通过各种类型的关系、范围等来处理这些需求的大部分。最重要的是正确地为您的应用程序建模以支持您将需要的查询类型和功能。如果某事难以向人解释，通常在 Rails 中很难做到。它经过优化以处理大多数“现实世界”类型的关系和任务，因此“异常”变得有点难以适应这个约定，后来变得更难以维护、管理、进一步开发、解耦等。底线是 rails 可以为您处理 sql 查询`SomeObject.all_active_objects_with_some_quality`，让您完全控制 sql`SomeObject.find_by_sql("select * from ...")`以及`execute("update blah set something=''...)`介于两者之间的所有内容。

Rails 的优势之一是可以让您快速创建原型，我会创建您的模型概念，然后测试您拥有的最复杂的业务需求。这将使您快速了解什么是可能的和容易做的，以及您在开发中可能面临的瓶颈和潜在问题。

# .htaccess - .htaccess。将请求重定向到 ~username 文件夹

> ID：12864402
> 
> 赞同：4
> 
> 时间：2012-10-12T17:41:18.287
> 
> 标签：.htaccess, mod-rewrite

情况：

我正在将网站从生产环境转移到测试环境。

测试环境url类似于 `http://192.168.1.100/~username/`

有数千个文件在 html 中使用以下内容

```
<img src='/images/image.jpg' /> 
```

由于请求将根目录`http://192.168.1.100/`，因此文件为 404。

与其查找和替换所有 html，不如假设有一种简单的方法可以通过 .htaccess 使用 mod_rewrite 修复它。

我试过使用以下

```
RewriteCond %{REQUEST_URI} !^/~username/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /~username/$1 
```

但没有按预期工作。

提前致谢。

**更新** 开发环境位于 cpanel/whm 中。因此，当从请求的 url 中删除用户名时，它现在属于 root 用户。所以，我现在的问题是：如何将 root 用户的 .htaccess 文件更新为 mod_rewrite 回 ~username？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:29:18.250

如果你删除

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

它似乎按预期工作，因为对正确 url 的任何请求都不会被重写。

您可能想添加`[L]`一个标志来表示它是最后一个重写规则，如下所示：

```
RewriteCond %{REQUEST_URI} !^/~username/
RewriteRule ^(.*)$ /~username/$1 [L] 
```

# c# - 设置两个相差一个月的范围日期的最佳方法是什么？

> ID：12864406
> 
> 赞同：0
> 
> 时间：2012-10-12T17:41:43.447
> 
> 标签：c#, datetime

我正在尝试渲染一个显示两个日期之间的一些记录的视图，当没有传递参数时，视图必须显示从第 5 天开始到下个月的下一个第 5 天的一个月的记录。

现在我做到了，但我担心我的代码，有没有另一种方法可以做到这一点，我的意思是让我的代码看起来更好。

```
var dateStart = new DateTime();
var dateEnd = new DateTime();

if(dateTime !=null)
{  
     dateStart = Convert.ToDateTime(dateTime);
     dateEnd = new DateTime(dateStart.Year, dateStart.Month + 1, 5);
}
else
{
     if (DateTime.Today.Day <= 4)
     {
          DateTime lastMonth = DateTime.Today.AddMonths(-1);
          dateStart = new DateTime(lastMonth.Year, lastMonth.Month, 5);
          dateEnd = new DateTime(dateStart.Year, dateStart.Month + 1, 5);
     }

     DateTime date = DateTime.Today;
     dateStart = new DateTime(date.Year, date.Month, 5);
     dateEnd = new DateTime(date.Year, date.Month + 1,5);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:55:14.027

`DateTime`您不应该添加这样的月份，因为当它尝试创建一个月份为 13 的 DateTime 时，您最终会在 12 月无效，所以我会改用该`AddMonths`方法。您似乎还需要另一个`else statement`添加，以便第二个`if statement`不是无关紧要的。我已经稍微简化了代码，这是你的意思吗？

```
var dateStart = new DateTime();
var dateEnd = new DateTime();

if(dateTime !=null)
{  
     dateStart = Convert.ToDateTime(dateTime);
     dateEnd = new DateTime(dateStart.Year, dateStart.Month, 5).AddMonths(1);
}
else
{
     if (DateTime.Today.Day <= 4)
     {
          dateStart = new DateTime(DateTime.Today.Year, DateTime.Today.Month, 5).AddMonths(-1);
          dateEnd = dateStart.AddMonths(1);
     }
     else
     { 
          dateStart = new DateTime(DateTime.Today.Year, DateTime.Today.Month, 5);
          dateEnd = dateStart .AddMonths(1);
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:57:36.783

这将在 12 月引发异常：

```
dateEnd = new DateTime(dateStart.Year, dateStart.Month + 1, 5); 
```

你可以试试：

```
DateTime dateEnd = dateStart.AddMonths(1);
dateEnd = new DateTime(dateEnd.Year, dateEnd.Month, 5); 
```

# image - 如何在 GWT UiBinder 中定义 IMAGE 的 TITLE 文本？

> ID：12864423
> 
> 赞同：1
> 
> 时间：2012-10-12T17:42:26.210
> 
> 标签：image, gwt, default, uibinder

我正在为 i18n 使用 GWT 消息。

在 ui.xml 文件中，我定义：

```
<g:Image ui:field="logo" url="img.png">
<ui:attribute name='title' ui:description='tooltip for image'/>
</g:Image> 
```

在应用程序启动时，GWT 环境抱怨：封闭元素需要为属性“标题”提供默认值

我找不到任何关于向 . 你知不知道怎么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:52:12.140

弄清楚了！

这不是 ui:attribute 上缺少的属性！只需将 title='the default text' 添加到 g:Image 标签。

# jquery - jquery touchSwipe：如何获取多个图像“一次不只是一个”并且仍然滑动

> ID：12864424
> 
> 赞同：0
> 
> 时间：2012-10-12T17:42:28.093
> 
> 标签：jquery

我目前正在使用以下插件[http://labs.skinkers.com/content/touchSwipe/demo/11_Image_gallery_example.php](http://labs.skinkers.com/content/touchSwipe/demo/11_Image_gallery_example.php)

该插件允许用户从一个图像滑动到另一个图像。但是，如果我将#content div 从 500 像素扩大到 700 像素，显示更多的下一张图像，它就不再起作用了。试图弄清楚如何在不破坏的情况下显示更多图像……有什么想法吗？

PS：我使用这个插件而不是其他插件的原因是为了增加点击功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:31:39.403

您是否还使具有“容器”类的 div 更宽？也试试。我做到了，它有效。

```
.container {
    margin-right: auto;
    margin-left: auto;
    width: 700px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:49:34.420

您不应该根据其处理点击的能力来选择插件。点击的处理内置在 javascript 中，您可以自己实现。选择效果最好的插件，然后自行处理点击。

# ruby-on-rails - Rails 3 会话不延迟加载

> ID：12864426
> 
> 赞同：0
> 
> 时间：2012-10-12T17:42:36.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我读过 Rails 3 中的会话是延迟加载的，但我没有看到这种行为。为了测试这一点，我使用 MySQL 和 activerecord 会话存储创建了一个新的 Rails 3.2 应用程序。除了 V8 JavaScript 引擎，没有添加任何 gem。然后我用索引操作创建了一个名为 welcome 的空控制器。这里根本没有代码。当我点击索引页面时，我看到在 MySQL 的会话表中创建了一个会话。

难道我做错了什么？我认为只有当我访问它时才会创建一个会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:05:40.300

我猜这是 Ruby on Rails 从 3.0 版开始的默认行为。看：

[http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T12:30:09.597

如果您需要停止在数据库中为机器人/爬虫创建会话，这对我有用：

```
# Save this file as config/initializers/session_store_ext.rb 
# and don't forget to define BOT_REGEX to match bots/crawlers

class ActiveRecord::SessionStore
  _set_session = instance_method :set_session

  define_method :set_session  do | env, sid, session_data, options |
    unless env['HTTP_USER_AGENT'] =~ BOT_REGEX
      _set_session.bind(self).call env, sid, session_data, options
    end

    sid
  end

  private :set_session
end 
```

我写了一篇博文，解释了我是如何创建它的以及它为什么起作用 - [Conditionally Disabling Database Sessions in Ruby on Rails 3](http://bugmuncher.com/2015/07/13/conditionally-disabling-database-sessions-rails-3.html)

# accessibility - 粘滞键激活（shift 5 次）不能通过热键工作 ::Send {LShift 5}

> ID：12864435
> 
> 赞同：2
> 
> 时间：2012-10-12T17:43:27.583
> 
> 标签：accessibility, autohotkey, hotkeys

我想通过按 1 个按钮来激活粘滞键，而不是按 5 次 shift，这是默认方式。

如果我做

`F9::Send {LShift 5}`

按 F9 不会产生任何结果。

我也试过

```
F9::
Send {LShift}
sleep 50
Send {LShift}
sleep 50
Send {LShift}
sleep 50
Send {LShift}
sleep 50
Send {LShift}
sleep 50
return 
```

为什么它不起作用有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:58:59.433

虽然很可能有办法进行 dll 调用或一些复杂的事情，但也可能使用 AutoHotkey 编写类似的功能。这也可以避免粘键提示，您可以改为使用托盘提示。

```
stickykeys = 0

F9::
    stickykeys:=!stickykeys
    Traytip, Sticky Keys, % (stickykeys) ? "On" : "Off"
    return

#If stickykeys

    *$Shift::
        key = 0
        Input, key, L1 M
        SendInput {Shift Down}{%key%}{Shift Up}
    return

    *$Ctrl::
        key = 0
        Input, key, L1 M
        SendInput {Ctrl Down}{%key%}{Ctrl Up}
    Return

    *$Alt::
        key = 0
        Input, key, L1 M
        SendInput {Alt Down}{%key%}{Alt Up}
    Return
#If 
```

F9 只是打开和关闭粘滞键。

注意：这是使用支持[#If的 AHK_L](http://l.autohotkey.net/docs/commands/_If.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:17:36.443

```
SPI_GETSTICKYKEYS:=0x003A
SPI_SETSTICKYKEYS:=0x003B
SKF_STICKYKEYSON:=0x1

VarSetCapacity(STICKYKEYS,8) ; DWORD cbSize;DWORD dwFlags;
NumPut(8,&STICKYKEYS,"UInt")
F9::
  DllCall("SystemParametersInfo","UInt",SPI_GETSTICKYKEYS,"UInt",8,"PTR",&STICKYKEYS,"UInt",0)
  dwFlags:=NumGet(&STICKYKEYS,4,"Uint")
  If (dwFlags & SKF_STICKYKEYSON)
    dwFlags-=SKF_STICKYKEYSON
  else dwFlags|=SKF_STICKYKEYSON
  ToolTip % "STICKYKEYS are " (dwFlags & SKF_STICKYKEYSON ? "ON" : "OFF")
  SetTimer,ToolTipOff,-1000
  NumPut(dwFlags,&STICKYKEYS,4,"UInt")
  DllCall("SystemParametersInfo","UInt",SPI_SETSTICKYKEYS,"UInt",8,"PTR",&STICKYKEYS,"UInt",0)
Return
ToolTipOff: 
```

代码来自[http://www.autohotkey.com/community/viewtopic.php?f=1&t=93650的 Autohotkey 论坛](http://www.autohotkey.com/community/viewtopic.php?f=1&t=93650)

任何想要使用该代码的人的注意事项：我认为您必须将其放在脚本的顶部才能使其工作。在我的热键脚本中，将它放在中间，然后按 F9 激活粘滞键会导致一些奇怪的事情发生：光标跳来跳去，一些文件夹被启动，脚本退出等等。我猜它激活了其他附近有热键吗？

# c# - 是否有用于大型字典的 IDictionary 实现不会最终出现在大型对象堆上？

> ID：12864440
> 
> 赞同：4
> 
> 时间：2012-10-12T17:43:54.873
> 
> 标签：c#, .net, dictionary

[这与.NET 集合和大对象堆 (LOH)](https://stackoverflow.com/questions/698147/net-collections-and-the-large-object-heap-loh)密切相关。简而言之，如果有超过 85K 的存储桶，它会自动在 LOH 上，并且何时释放是未知的。有没有人知道基于数组列表或类似的东西的 IDictionary 的良好实现可以防止它进入 LOH？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:47:32.633

您可以使用[`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)，它是二叉树。

如果您需要 Dictionary 的 O(1) 性能，或者更接近的性能，您可以使用不同的哈希表实现，将数据存储在足够小的块中，不会继续 LOH。我不知道任何公开的信息；以前用过SortedDictionary，发现性能下降很小，所以没有再看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:54:23.110

这是一个选项的开始。我假设您可以按照给出的模式来实现其他方法。

只需更改`numDictionaries`以确定它是如何分解的。

如果您真的需要，您可以使字典的数量动态化，并在现有字典足够大时添加更多。

```
public class NonContigousDictionary<TKey, TValue>
//TODO make this implement IEnumerable, IDictionary, 
//and any other relevant interfaces.
{
    public Dictionary<TKey, TValue>[] dictionaries;

    private readonly int numDictionaries = 5;
    public NonContigousDictionary()
    {
        dictionaries = Enumerable.Range(0, numDictionaries)
            .Select(_ => new Dictionary<TKey, TValue>())
            .ToArray();
    }

    public TValue this[TKey key]
    {
        get
        {
            int hash = key.GetHashCode();
            return dictionaries[GetBucket(hash)][key];
        }
        set
        {
            int hash = key.GetHashCode();
            dictionaries[GetBucket(hash][key] = value;
        }
    }

    public bool Remove(TKey key)
    {
        int hash = key.GetHashCode();
        return dictionaries[GetBucket(hash].Remove(key);
    }

    public void Clear()
    {
        foreach (var dic in dictionaries)
        {
            dic.Clear();
        }
    }

    private int GetBucket(int hash)
    {
        return (hash % numDictionaries + numDictionaries) % numDictionaries;
    }
} 
```

# c# - 文件上传安全关注

> ID：12864441
> 
> 赞同：11
> 
> 时间：2012-10-12T17:43:57.813
> 
> 标签：c#, asp.net, security, file-upload

我有一个可供公众使用的网络表单，它具有文件上传功能。现在文件要么保存在网络服务器上，要么作为电子邮件的附件发送出去。我们对上传文件的大小有限制，即 15MB 和扩展名。我们的 SMTP 服务器在同一个 Web 服务器上。我担心安全性，因为任何人都可以上传恶意文件，并可能对我们的生产网络服务器产生影响。

通过这种向公众开放的文件上传控制，我将面临哪些风险？是否有人可以通过上传恶意文件在 Web 服务器上执行恶意脚本。

我做了一些研究，发现了以下几点

1.  如果我在电子邮件中将文件作为附件发送出去，该文件将临时存储在 ASP .Net 临时文件夹中，一旦发送电子邮件，该文件将被删除。
2.  您可以在将文件保存到文件系统之前重命名文件。
3.  您可以将文件保存在不同的位置作为您的网站
4.  您可以进行某种实时病毒检查。我不知道你怎么能做到这一点。我正在阅读一些命令行病毒扫描。但不确定我是否真的需要那个。

这些只是几点，但我想知道文件上传中的任何盲点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T18:00:33.073

要回答您关于可能存在的安全漏洞的问题，是的，即使您不将文件保存到磁盘，您也可以肯定地在您的应用程序和您的用户中创建漏洞。但是您可以采取几条防线来验证。

首先是明显限制可以上传的文件类型，您可以通过**白名单**和扩展名检查来做到这一点，**但不要止步于此。** 您还应该通过查看文件的内容进行验证，以确保它符合预期的格式。这可能很关键，因为坏人可以将文件头注入上传的文件中，并将您的系统用作僵尸来传递他的恶意软件。

其次，您应该对上传的文件进行病毒扫描，您可以使用命令行执行本地病毒扫描程序来执行此操作。对于包括趋势科技在内的许多病毒扫描来说，这是一件容易的事，除非您正在查看大量文件上传，否则它不应该对您的服务器造成巨大的负担。

确保您**永远不会将路径**作为用户提交的数据传递（通过 GET 或 POST 下载），因为这会使您面临路径遍历攻击。如果您的用户需要从浏览器下载文件，您可以创建一个存储记录的数据库，然后创建一个控制器或页面，该控制器或页面将根据数据库记录和用户对该记录的访问来获取它，而不是提供用户可以控制和用于从您的服务器获取文件的路径。

确保**Web 服务器无法读取**您要保存到的目录，这样他们就不会上传恶意软件脚本，然后通过 HTTP 从浏览器执行它

确保针对某些反 XSS 库验证所有用户输入（Microsoft 提供了一个[http://www.microsoft.com/en-us/download/details.aspx?id=28589](http://www.microsoft.com/en-us/download/details.aspx?id=28589)）

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T14:10:32.813

最好的方法是将它们上传到 /App_Data 文件夹或将它们作为二进制对象存储在数据库中。App_Data 无法通过 Web 服务器读取，因此这将保护您免受执行和脚本访问。将它们存储为二进制的另一种方法是将它们进行 Base 64 编码并将它们存储在文本中（同样在文件系统 App_Data 或数据库中）。

创建一个代理页面以检查用户是否有权查看/下载文件，如果有，则将文件流发送到 HTTP 响应。这样用户就没有直接访问权限，也无法执行他们不应该执行的任何操作。您还可以使用来自流引用的 SMTP 类附加文件。

如果存储在文件系统中，您可以实现自己的命名约定，以便将实际文件的请求映射到存储的版本。

病毒扫描可能很有用，但请将此视为保护其他可能有权下载文件的用户，而不是保护您的服务器。

# algorithm - O(n) 中的最长公共子序列

> ID：12864443
> 
> 赞同：-5
> 
> 时间：2012-10-12T17:44:10.603
> 
> 标签：algorithm

是否有任何可能的算法可以在 O(n) 时间内找到最长子序列的长度？我知道 O(nlogn)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:19:33.190

不，没有 LCS 算法可以为您提供 O(n) 复杂度的结果。O(nlgn) 是这个问题的最高性能。

# python - 如何将meshgrid的输出转换为对应的点数组？

> ID：12864445
> 
> 赞同：30
> 
> 时间：2012-10-12T17:44:16.200
> 
> 标签：python, numpy

我想创建一个与网格相对应的点列表。因此，如果我想创建从`(0, 0)`到的区域网格，`(1, 1)`它将包含点`(0, 0)`、`(0, 1)`和。`(1, 0)``(1, 0)`

我知道这可以通过以下代码完成：

```
g = np.meshgrid([0,1],[0,1])
np.append(g[0].reshape(-1,1),g[1].reshape(-1,1),axis=1) 
```

产生结果：

```
array([[0, 0],
       [1, 0],
       [0, 1],
       [1, 1]]) 
```

我的问题是双重的：

1.  有没有更好的方法来做到这一点？
2.  有没有办法将其推广到更高的维度？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-15T08:11:37.917

我刚刚注意到 numpy 中的文档提供了一种更快的方法来执行此操作：

```
X, Y = np.mgrid[xmin:xmax:100j, ymin:ymax:100j]
positions = np.vstack([X.ravel(), Y.ravel()]) 
```

使用链接的 meshgrid2 函数并将“ravel”映射到生成的网格，这可以很容易地推广到更多维度。

```
g = meshgrid2(x, y, z)
positions = np.vstack(map(np.ravel, g)) 
```

对于每个轴上有 1000 个刻度的 3D 数组，结果比 zip 方法快大约 35 倍。

来源：[http ://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html#scipy.stats.gaussian_kde](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html#scipy.stats.gaussian_kde)

要比较这两种方法，请考虑以下代码部分：

创建有助于创建网格的众所周知的刻度线。

```
In [23]: import numpy as np

In [34]: from numpy import asarray

In [35]: x = np.random.rand(100,1)

In [36]: y = np.random.rand(100,1)

In [37]: z = np.random.rand(100,1) 
```

为网格网格定义 mgilson 链接到的函数：

```
In [38]: def meshgrid2(*arrs):
   ....:     arrs = tuple(reversed(arrs))
   ....:     lens = map(len, arrs)
   ....:     dim = len(arrs)
   ....:     sz = 1
   ....:     for s in lens:
   ....:        sz *= s
   ....:     ans = []
   ....:     for i, arr in enumerate(arrs):
   ....:         slc = [1]*dim
   ....:         slc[i] = lens[i]
   ....:         arr2 = asarray(arr).reshape(slc)
   ....:         for j, sz in enumerate(lens):
   ....:             if j != i:
   ....:                 arr2 = arr2.repeat(sz, axis=j)
   ....:         ans.append(arr2)
   ....:     return tuple(ans) 
```

创建网格并为这两个函数计时。

```
In [39]: g = meshgrid2(x, y, z)

In [40]: %timeit pos = np.vstack(map(np.ravel, g)).T
100 loops, best of 3: 7.26 ms per loop

In [41]: %timeit zip(*(x.flat for x in g))
1 loops, best of 3: 264 ms per loop 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-12T17:48:06.223

您的网格点总是不可或缺的吗？如果是这样，你可以使用`numpy.ndindex`

```
print list(np.ndindex(2,2)) 
```

更高维度：

```
print list(np.ndindex(2,2,2)) 
```

* * *

不幸的是，这不符合 OP 的要求，因为不满足积分假设（从 0 开始）。只有在其他人正在寻找那些假设正确的相同事物时，我才会留下这个答案。

* * *

另一种方法是`zip`：

```
g = np.meshgrid([0,1],[0,1])
zip(*(x.flat for x in g)) 
```

这部分可以很好地缩放到任意尺寸。不幸的是，`np.meshgrid`不能很好地扩展到多个维度，因此需要解决该部分，或者（假设它有效），您可以使用这个[SO 答案](https://stackoverflow.com/a/1830192/748858)来创建自己的 ndmeshgrid 函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-26T14:25:45.880

另一种方法是：

```
np.indices((2,2)).T.reshape(-1,2) 
```

这可以推广到更高的维度，例如：

```
In [60]: np.indices((2,2,2)).T.reshape(-1,3)
Out[60]:
array([[0, 0, 0],
       [1, 0, 0],
       [0, 1, 0],
       [1, 1, 0],
       [0, 0, 1],
       [1, 0, 1],
       [0, 1, 1],
       [1, 1, 1]]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-08T10:46:41.867

一个简单的 3D 示例（我猜可以扩展到 N 维，但要注意最终维度和 RAM 使用情况）：

```
import numpy as np

ndim = 3
xmin = 0.
ymin = 0.
zmin = 0.
length_x = 1000.
length_y = 1000.
length_z = 50.
step_x = 1.
step_y = 1.
step_z = 1.

x = np.arange(xmin, length_x, step_x)
y = np.arange(ymin, length_y, step_y)
z = np.arange(zmin, length_z, step_z)
%timeit xyz = np.array(np.meshgrid(x, y, z)).T.reshape(-1, ndim) 
```

在：`2.76 s ± 185 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)`

产生：

```
In [2]: xyx
Out[2]: 
array([[  0.,   0.,   0.],
       [  0.,   1.,   0.],
       [  0.,   2.,   0.],
       ...,
       [999., 997.,  49.],
       [999., 998.,  49.],
       [999., 999.,  49.]])

In [4]: xyz.shape
Out[4]: (50000000, 3) 
```

Python`3.6.9`
麻木：`1.19.5`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-28T02:09:53.277

我正在使用以下内容将网格网格转换为 MX 2 数组。还将向量列表更改为迭代器可以使其非常快。

```
import numpy as np

# Without iterators
x_vecs = [np.linspace(0,1,1000), np.linspace(0,1,1000)]

%timeit np.reshape(np.meshgrid(*x_vecs),(2,-1)).T
6.85 ms ± 93.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

# With iterators
x_vecs = iter([np.linspace(0,1,1000), np.linspace(0,1,1000)])

%timeit np.reshape(np.meshgrid(*x_vecs),(2,-1)).T
5.78 µs ± 172 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

对于使用生成器的 ND 阵列

```
vec_dim = 3
res = 100

# Without iterators
x_vecs = [np.linspace(0,1,res) for i in range(vec_dim)]

>>> %timeit np.reshape(np.meshgrid(*x_vecs),(vec_dim,-1)).T
11 ms ± 124 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

# With iterators
x_vecs = (np.linspace(0,1,res) for i in range(vec_dim))

>>> %timeit np.reshape(np.meshgrid(*x_vecs),(vec_dim,-1)).T
5.54 µs ± 32.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

# jquery - 遍历表单提交中的每个“必填”字段

> ID：12864446
> 
> 赞同：3
> 
> 时间：2012-10-12T17:44:20.780
> 
> 标签：jquery, loops

我在这里遇到了真正的麻烦。我不能用我的大脑来解决这个问题！

我想要做的是在验证电子邮件地址后提交一个表单，然后每个输入都标有“必需”类。我非常感谢有人向我展示如何循环浏览这些内容，并且只有在每个都填写的情况下才提交。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.button').click(function() {
            var email = $("input.email").val();        
            var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
            if(filter.test(email)) {
                $('input.required').each(function() {
                    var name = $("input.required").val();
                    if(name != "") {
                        $('#form').submit();
                    } else {
                        $('#error').show();
                        return false;
                    }
                });
            } 
            else {
                $('#error').show();
                return false;
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T17:51:05.687

您可以使用[`.filter()`](http://api.jquery.com/filter/)仅过滤掉空的元素，然后检查与过滤器匹配的元素的数量。如果任何输入与过滤器匹配，则您有错误并且不应发布它。像这样的东西：

```
var emptyFields = $('input.required').filter(function() {
    return $(this).val() === "";
}).length;

if (emptyFields === 0) {
   $('#form').submit();
} else {
   $('#error').show();
   return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:46:35.083

```
 var isValid = true;  // Set the isValid to flag try initially

    $('input.required').each(function() {   // Loop thru all the elements
        var name = $("input.required").val();
        if(name != "") {  // If not empty do nothing

        } else {          
            isValid = false; // If one loop is empty set the isValid flag to false
            return false;    // Break out of .each loop 
        }
    });

    if(isValid){    // If valid submit form else show error
      $('#form').submit();
    }
    else{
       $('#error').show();
    return false;
} 
```

# iphone - 确定 segue 是否为 unwind segue？

> ID：12864454
> 
> 赞同：5
> 
> 时间：2012-10-12T17:45:05.920
> 
> 标签：iphone, objective-c, ios, storyboard, segue

我有大约 6 个 segue 在 prepareForSegue 方法中执行相同的操作，但是，我想为我的 unwind segue 跳过此操作，但我不知道如何确定传递的 segue 是否是 unwind segue。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T20:20:22.740

啊，没关系，机器猫有答案，基本上就是给 unwind segue 一个标识符。直到我意识到您可以从情节提要左侧的拉出面板中选择 segues 并从那里设置标识符之前，我无法弄清楚如何做到这一点。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T15:42:40.663

`prepareForSegue`仅在正向调用。放松时不会调用它。要处理展开转场，您需要将退出按钮连接到将转场作为参数的 IBAction 方法。放松时将调用此方法。

这篇[文章](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-to-use-them)有更多关于如何使用它们的细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T02:23:38.543

我本人对 SWIFT 很陌生。但我相信这里有一些误解。如果你自己添加一个 unwind segue，prepareForSegue 就会被触发。但是在单击导航栏中自动显示的“返回”按钮时，prepareForSegue 实际上并没有被触发。

# python - Django：href {% url %} 问题

> ID：12864464
> 
> 赞同：4
> 
> 时间：2012-10-12T17:46:28.307
> 
> 标签：python, django, python-2.7, django-views

为什么

```
<a href="{% url 'answers.views.display_answers' Question.id %}">View answers</a> 
```

在我的模板中翻译成 Django 的这种解释：

```
Request URL:    http://127.0.0.1:8000/questions/%7B%%20url%20'answers.views.display_answers'%20Question.id 
```

这当然会导致 url 不匹配错误。

似乎它以 ASCII 形式在我的“{”中读取。谁能告诉我为什么会这样？

编辑：

这就是我渲染模板的方式——

```
return render(request, 'display_questions.html', context) 
```

并且模板包含href。我的显示答案视图重定向到另一个视图，如下所示：

```
def display_answers(request, q_id): 
        q = get_object_or_404(Question, id=q_id) 
        ans_list = Answer.objects.filter(question=q) 
        context = {'question': q, 'ans_list': ans_list} 
        return redirect('view_answers.html', context) 
```

错误：

当前 URL，questions/{% url 'answers.views.display_answers' Question.id，与其中任何一个都不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:38:42.973

这是对的。如果不是 - 你`urls.py`似乎错了。请张贴。

```
<a href="{% url answers.views.display_answers question.id %}">View answers</a> 
```

**编辑** 这是您视图的更好版本。

```
from django.template import RequestContext
from django.core.urlresolvers import reverse
from django.shortcuts import render_to_response, redirect, get_object_or_404

def display_answers(request, q_id): 
    q = get_object_or_404(Question, id=q_id) 
    ans_list = Answer.objects.filter(question=q) 
    context = {'question': q, 'ans_list': ans_list} 
    return render_to_response('view_answers.html', context, RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:05:02.140

问题是您`redirect`在视图中的使用。你应该使用`render`or`render_to_response`除非你真的想重定向浏览器。（使用 Fiddler、Firebug 或 Chrome 的开发人员工具进行观察，您会看到它正在重定向。）

这不是很明显的问题的原因是因为`redirect`可能将 URL 作为其第一个参数。`'view_answers.html'`被解释为相对 URL，它可能映射到 URLconf 中的 URL，也可能不映射。如果它确实映射到一个 URL，那么您会得到一个误报结果，表明一切似乎都在工作，但是如果您的 Web 服务器处理该链接而不是 Django，那么它可能只是以纯文本形式发送回模板页面。正如我所说的，解决方案是要么`render`渲染`render_to_response`页面，要么`redirect`使用视图名称或 URL 模式的特殊名称重定向到不同的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:05:16.820

Modify your redirect in your `display_answers` view to use the name of the view, instead of the name of your template (`view_answers.html`) and don't pass it the context ([`redirect`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.redirect) doesn't take the context as a parameter):

```
return redirect('your_view_answers_view') 
```

# sql - 如何在 SQL 中获取具有相同 ID 的列的总和？

> ID：12864467
> 
> 赞同：10
> 
> 时间：2012-10-12T17:46:35.800
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [对数据求和的 sql 查询](https://stackoverflow.com/questions/10142367/sql-query-to-sum-the-data)

我有以下表结构

```
TradeId     TableName        PricingSecurityID  Quantity    Price   
2008        Fireball.dbo.Bond    506             50         100.0000    
2009        Fireball.dbo.Bond    506             50         100.2500    
2010        Fireball.dbo.Bond    588             50         100.7500    
2338        Fireball.dbo.Bond    588             100        102.5000 
```

我需要进行`Quantity`匹配的总和，或者我们可以说按特定分组`PricingSecurityID`

喜欢`PricingSecurityID=506`我应该得到`quantity=100`

因为`PricingSecurityID=588`我应该得到`quantity=150`

如何编写此 SQL 查询？

> 我确实尝试过使用简单的 group by 语句，但由于我也在选择 tradeid，但出现错误：选择列表中的“TradeId”列无效，因为它不包含在聚合函数或 GROUP BY 子句中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T17:49:29.413

修改后的问题——还需要 TradeID。

```
SELECT f.TradeID, f.PricingSecurityID, s.TotalQuantity
  FROM FollowingTableStructure AS f
  JOIN (SELECT PricingSecurityID, SUM(Quantity) AS TotalQuantity
          FROM FollowingTableStructure
         GROUP BY PricingSecurityId
       ) AS s ON f.PricingSecurityID = s.PricingSecurityID 
```

我不完全相信这个查询是明智的，但那是你的问题。它可以很容易地扩展到处理其他表；只需添加适当的 JOIN 子句。

* * *

*请记住在问题中包含表名——令人惊讶的是，SQL 问题被问到的频率却没有给表起名（所以不只是你忘记了）。*

* * *

重新更新的问题

因此，最初的匿名表显然是，`Fireball.dbo.Trade`或`Fireball..Trade`。我可能会将 11 路 UNION 放入视图中，因为它可能会在多个地方使用。但是，忽略这一点，我们仍然可以将信息添加到您的查询中：

```
SELECT t.TradeId, 
       ISNULL(Securities.SecurityType,'Other') SecurityType, 
       Securities.TableName,
       CASE 
       WHEN SecurityTrade.SecurityId IS NOT NULL THEN SecurityTrade.SecurityId
       ELSE Trade.SecurityId
       END AS PricingSecurityID,
       s.TotalQuantity AS Quantity,
       t.Price,
       CASE
       WHEN (t.Buy = 1 AND t.Long = 1) THEN 1
       WHEN (t.Buy = 0 AND t.Long = 0) THEN 1
       ELSE 0
       END AS Position
  FROM Fireball_Reporting..Trade AS t
  JOIN (SELECT PricingSecurityID, SUM(Quantity) AS TotalQuantity
          FROM Fireball_Reporting..Trade
         GROUP BY PricingSecurityId
       ) AS s ON t.PricingSecurityID = s.PricingSecurityID
  LEFT JOIN
       (SELECT TradeId, 'Bond' SecurityType, 'Fireball.dbo.Bond' TableName FROM Fireball..CorpBondTrade
        UNION
        SELECT TradeId, 'IRS' SecurityType, 'Fireball.dbo.Bond' TableName FROM Fireball..IRPTrade
        UNION
        SELECT TradeId, 'Treasury' SecurityType, 'Fireball.dbo.Bond' TableName FROM Fireball..TreasuryTrade
        UNION
        SELECT TradeId, 'Index' SecurityType, 'Fireball.dbo.CDSIndex' TableName FROM Fireball..CreditIndexTrade
        UNION
        SELECT TradeId, 'CDS' SecurityType, 'Fireball.dbo.CDS' TableName FROM Fireball..CDSTrade WHERE IsSovereign = 0
        UNION
        SELECT TradeId, 'Sovereign CDS' SecurityType, 'Fireball.dbo.CDS' TableName FROM Fireball..CDSTrade WHERE IsSovereign = 1
        UNION
        SELECT TradeId, 'Equity Option' SecurityType, 'Fireball.dbo.EquityOption' TableName FROM Fireball..EquityOptionTrade
        UNION
        SELECT TradeId, 'Equity' SecurityType, 'Fireball.dbo.Equity' TableName FROM Fireball..EquityTrade
        UNION
        SELECT TradeId, 'Loan' SecurityType, 'Fireball.dbo.Loan' TableName FROM Fireball..LoanTrade
        UNION
        SELECT TradeId, 'Swaption' SecurityType, 'Fireball.dbo.Bond' TableName FROM Fireball..SwaptionTrade
        UNION
        SELECT TradeId, 'Preferred Stock' SecurityType, 'Fireball.dbo.Bond' TableName FROM Fireball..PreferredEquityTrade
        --UNION
        --SELECT TradeId, 'Bond' SecurityType FROM Fireball..BondTrade
       ) AS Securities ON Securities.TradeId = t.TradeId
  LEFT JOIN
       (SELECT TradeID, SecurityId 
          FROM Fireball..CDSTrade 
        UNION
        SELECT TradeID, SecurityId 
         FROM Fireball..CreditIndexTrade          
       ) AS SecurityTrade ON SecurityTrade.TradeId = t.TradeId 
```

这主要是复制和粘贴 - 并重新格式化 - 您的查询，额外的子查询隐藏在 Trade 表之后的 FROM 子句中。如果是我的查询，我也会对最后两个子查询使用单字母（或其他短助记符）别名；我只是没有花时间研究什么是 SecurityTrade 和 Securities 的适当缩写。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-12T17:48:45.113

```
select PricingSecurityID, sum(Quantity)
from table
group by PricingSecurityID 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-12T17:49:13.157

```
select PricingSecurityID, sum(quantity)
from Fireball.dbo.Bond
group by PricingSecurityID 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-12T17:56:29.547

```
SELECT PricingSecurityID, SUM(ISNULL(Quantity,0))
  FROM Table
 GROUP BY PricingSecurityId; 
```

# javascript - 尝试重新加载嵌入式 iframe 时出现 CORS 错误

> ID：12864468
> 
> 赞同：4
> 
> 时间：2012-10-12T17:46:37.750
> 
> 标签：javascript, iframe, reload, same-origin-policy, cors

我正在尝试强制重新加载 iframe 的内容（强制重新加载意味着不应使用浏览器缓存）。从解决方案[Reload an iframe with jQuery](https://stackoverflow.com/questions/4249809/reload-an-iframe-with-jquery) here 中，我可以通过以下 javascript 代码执行此操作：

```
document.getElementById(FrameID).contentDocument.location.reload(true); 
```

但是我遇到了同源策略错误。但是我确实在嵌入了 iframe 的页面和在 iframe 中加载的页面上都启用了 CORS。从 Web 开发工具中，我验证了在*两个*负载上，CORS 标头都存在：

```
Access-Control-Allow-Origin: * 
```

虽然双方都在不同的域下，但我控制它们，并且可以发送 CORS 标头或任何其他标头（如果需要）。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-06-29T09:54:25.797

虽然这个问题很老了，但它有很多观点，所以我将在这里为有同样问题的开发人员链接这个好[技巧。](https://stackoverflow.com/a/4062084/824796)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:10:08.960

所描述的情况不需要 CORS。[同源策略](http://code.google.com/p/browsersec/wiki/Part2#Same-origin_policy)不允许跨不同域访问 DOM 属性和方法。您可以使用[postMessage JavaScript API](http://help.dottoro.com/ljgheukc.php)来启用 IFRAME 和父页面之间的通信。

# java - 碰撞检测错误

> ID：12864478
> 
> 赞同：0
> 
> 时间：2012-10-12T17:47:22.393
> 
> 标签：java

我目前正在开发一个相对简单的平台游戏，它有一个奇怪的错误。游戏开始时你会掉到地上（你会在离地面几格的地方生成），但是当你落地时，你的脚会卡在世界里面，直到你跳起来才能移动。这就是我的意思：

[http://i.imgur.com/IKLZY.png](http://i.imgur.com/IKLZY.png)

玩家的脚在地面以下几个像素。然而，这个问题只出现在整个地图的 3 个地方，并且只出现在这 3 个选定的地方。我假设问题出在我的碰撞检测代码中，但我不完全确定，因为当它发生时我没有收到错误。

```
public boolean isCollidingWithBlock(Point pt1, Point pt2) { 
//Checks x  
    for(int x = (int) (this.x / Tile.tileSize); x < (int) (this.x / Tile.tileSize + 4); x++) {
//Checks y
        for(int y = (int) (this.y / Tile.tileSize); y < (int) (this.y / Tile.tileSize + 4); y++) {
            if(x >= 0 && y >= 0 && x < Component.dungeon.block.length && y < Component.dungeon.block[0].length) {
//If the block is not air
                if(Component.dungeon.block[x][y].id != Tile.air) {
                    //If the player is in contact with point one or two on the block 
                    if(Component.dungeon.block[x][y].contains(pt1) || Component.dungeon.block[x][y].contains(pt2)) {
//Checks for specific blocks 
                        if(Component.dungeon.block[x][y].id == Tile.portalBlock) {
                            Component.isLevelDone = true;
                        } 
                        if(Component.dungeon.block[x][y].id == Tile.spike) {
                            Health.health -= 1;
                            Component.isJumping = true;

                            if(Health.health == 0) {
                                Component.isDead = true;
                            }
                        }
                        return true;
                    }
                } 
            }
        }
    }

    return false;
} 
```

我要问的是我将如何解决这个问题。我已经查看了我的代码很长一段时间，但我不确定它有什么问题。另外，如果有更有效的方法来进行碰撞检查，请告诉我！

我希望这是足够的信息，如果它不只是告诉我你需要什么，我一定会添加它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:47:22.333

问题可能不是您的碰撞检查，而是您在碰撞时要做什么的逻辑。你的角色掉进了方块，一旦进去，它总是会与方块发生碰撞。所以它不能跳跃（因为你在跳跃时检查碰撞我猜）。当您检查碰撞时，您必须通过预先检查和调整来确保您的角色不会落入块中。

```
if (will collide) {
    put beside block
} 
```

你可能正在做类似的事情

```
if (colliding) {
    stop moving
} 
```

但是，当放在旁边时，您必须检查您正在移动的方式以及您没有移动到块中。

# asp.net - 服务器端asp Moss 2007

> ID：12864480
> 
> 赞同：0
> 
> 时间：2012-10-12T17:47:30.297
> 
> 标签：asp.net, sharepoint, web-config, moss

我需要帮助启用服务器端脚本，我参考了教程，但更改似乎没有生效。

处理/CMD/Pages/gjgc.aspx时出错。此文件中不允许使用代码块。

我知道解决方案是编辑 web.config 并为 PageParser 添加一行。问题是当我进行更改时，我仍然得到错误。

该页面位于 http//xxx/CMD/Pages/route.aspx （端口 80）

这是我添加到 web.config 中的条目：

```
<SafeMode MaxControls="200" CallStack="false" DirectFileDependencies="10" TotalFileDependencies="50" AllowPageLevelTrace="false"> 

  <PageParserPaths> 
  <PageParserPath VirtualPath="~/CMD/Pages/route.aspx" CompilationMode="Always" AllowServerSideScript="true" IncludeSubFolders="true"/> 
  </PageParserPaths> 
```

我无法弄清楚为什么更改没有生效，或者我对虚拟路径的使用不正确？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:30:30.310

要在文件夹上启用代码块，请执行如下通配符：

```
<PageParserPath VirtualPath="/CMD/Pages/*" 
    CompilationMode="Always" AllowServerSideScript="true"  
        IncludeSubFolders="true"/> 
```

否则，要在文件上启用代码块：

```
<PageParserPath VirtualPath="/CMD/Pages/Test.aspx" 
    CompilationMode="Always" AllowServerSideScript="true" /> 
```

注意 2 个更改：VirtualPath 和 IncludeSubFolders

请在每次 web.config 更改后进行 iisreset。

# android - 在 android Cordova 2.1 应用程序上，ajax 请求总是被中断并返回 HTML 页面并提供更新浏览器（Dolphin HD）

> ID：12864485
> 
> 赞同：0
> 
> 时间：2012-10-12T17:47:37.280
> 
> 标签：android, cordova, dolphin-browser

我在 android 应用程序（Cordova 2.1）上有一个非常奇怪的行为。

我简单地使用这样的代码：

```
$.ajax({
        类型：“获取”，
        网址：this.serverUrl，
        数据：数据，
        数据类型：“json”，
        timeout: 3000, // 以毫秒为单位
        成功：函数（数据）{
            //永远不会到这里...
        },
        错误：函数（请求，状态，错误）{
            //总是到这里
            console.log(request.responseText);
        }
    });

```

request.responseText 始终包含具有以下内容的 html 页面：http: [//dimalezhnev.ru/assets/tmp/html.txt](http://dimalezhnev.ru/assets/tmp/html.txt)（我将输出放在此文件中）。

我在脑海中画了一幅画，浏览器在执行 ajax 请求时将其删除并返回带有该 html 的响应 - 强制用户以激进的风格更新浏览器。

如何预防？我只是无法想象为什么现在会发生这种情况。

# php - 如何通过更高id的sql排序

> ID：12864486
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:47:38.177
> 
> 标签：php, mysql

我在 MYSQL 中有行。

它们基本上是基于用户输入的文章和谣言。在我的查询中，我希望创建的表使后面的结果排名更高。按查询排序将如何工作？

```
$query = "SELECT * FROM rumours";
$query.= "ORDER BY"
$query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));

while ($row = mysql_fetch_assoc($query)) {
     $id = $row['id'];
     $band = $row['band'];
     $title = $row['Title'];
     $description = $row['description'];
     echo "<table border='1'>";
     echo "<tr>";
     echo "<td> $title  </td>";
     echo "</tr>";
     echo "<tr>";
     echo "<td class = 'td1'> $description </td>";
     echo "</tr>";
     echo "</table>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:04:09.783

关于您的代码段的几件事。

1.  使用列列表并避免选择`*`
2.  `mysql_`功能正在被[弃用](http://www.deprecatedphp.com)。您应该使用其中一个`mysqli_`或`PDO`功能。
3.  您可以通过直接调用列而不是重新分配变量来节省时间。
4.  当您要求首先显示*较旧的*记录时，这样做的标准是什么？更高`id`的记录是否意味着更新？我已经在我的回答中假设了这一点。

这是您的代码的改进版本，使用`mysqli_`：

```
$link = mysqli_connect("localhost", "user", "pass", "db");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$q = "SELECT id, band, Title, description FROM rumours ORDER BY id DESC";
$result = mysqli_query($link, $q);

while($row = mysqli_fetch_array($result, MYSQLI_BOTH)) {
     echo "<table border='1'>";
     echo "<tr>";
     echo "<td>" . $row[id] . "</td>";
     echo "</tr>";
     echo "<tr>";
     echo "<td class = 'td1'>" . $row[description] . "</td>";
     echo "</tr>";
     echo "</table>";
}

mysqli_free_result($result); 
```

# nagios - Nagios action_url：让它成为一个包含多个 URL 的弹出窗口？

> ID：12864492
> 
> 赞同：0
> 
> 时间：2012-10-12T17:48:13.927
> 
> 标签：nagios

我们想在 Nagios 配置文件中使用“action_url”来弹出一个小窗口，允许用户选择两个 URL 之一。（我可以想象，如果实现这一点，管理层可能会要求更多，但现在需要两个。）我认为我有一个可行的（虽然很差）解决方案，但在最好的情况下，它会在浏览器中添加一个空选项卡并弹出小窗口，在最坏的情况下，它只会打开两个选项卡，一个带有两个 URL，另一个是空的。

本来我以为不用修改源代码就可以做到，现在我不太确定了。类似于我见过的“AddThis”按钮的功能将是完美的，但它可能需要使用“action_url”字符串无法实现的控制级别。

或者，第二个 action_url 也足够了，如果我需要修改源代码，这就是我将采取的方向。

那么，有谁知道这是否可以在不修改 Nagios 源代码的情况下实现，还是我只需要进入源代码并添加第二个 action_url 指令？

谢谢，

肖恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:55:35.907

最简单的方法是使用 Nagios CGI 包括：[http ://nagios.sourceforge.net/docs/3_0/cgiincludes.html](http://nagios.sourceforge.net/docs/3_0/cgiincludes.html)

因此，您可以将自定义 JavaScript 添加到 Nagios Web 界面，并从`action_url`服务或主机定义中的属性中引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:57:11.293

在 /etc/apache2/conf.d 中的 apache2 配置文件中，确保执行以下操作：

```
<Directory "/<yournagiosDIR>/sbin">
   Options ExecCGI +Includes
   AllowOverride None
   Order allow,deny
   Allow from all    
   AuthName "Nagios Access"
   AuthType Basic
   AuthUserFile /<yournagiosDIR>/etc/htpasswd.users
   Require valid-user
</Directory> 
```

对于 SBIN 目录，您必须执行 ExecCGI 和 +Includes。否则它不会在您的 CGI 文件中包含 SSI。

# java - 通过 http post 请求发送键值参数和 json 消息体

> ID：12864493
> 
> 赞同：0
> 
> 时间：2012-10-12T17:48:14.460
> 
> 标签：java, android, http, post

我需要从移动 android 应用程序向服务器端应用程序发送 http POST 请求。此请求需要在正文中包含 json 消息和一些键值参数。我正在尝试编写此方法：

```
 public static String makePostRequest(String url, String body,  BasicHttpParams params) throws ClientProtocolException, IOException {
        Logger.i(HttpClientAndroid.class, "Make post request");
        HttpPost httpPost = new HttpPost(url);
        StringEntity entity = new StringEntity(body);
        httpPost.setParams(params);
        httpPost.setEntity(entity);
        HttpResponse response = getHttpClient().execute(httpPost);
        return handleResponse(response);
    } 
```

在这里，我设置参数以通过方法 setParams 请求并通过 setEntity 设置 json 正文。但这行不通。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:59:42.870

你可以使用 a`NameValuePair`来做到这一点............

**下面是我项目中的代码，我使用 NameValuePair 发送 xml 数据并接收 xml 响应，这将为您提供一些关于如何将其与 JSON 一起使用的想法。**

```
public String postData(String url, String xmlQuery) {

    final String urlStr = url;
    final String xmlStr = xmlQuery;
    final StringBuilder sb  = new StringBuilder();

    Thread t1 = new Thread(new Runnable() {

        public void run() {

            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(urlStr);

            try {

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                        1);
                nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                HttpResponse response = httpclient.execute(httppost);

                Log.d("Vivek", response.toString());

                HttpEntity entity = response.getEntity();
                InputStream i = entity.getContent();

                Log.d("Vivek", i.toString());
                InputStreamReader isr = new InputStreamReader(i);

                BufferedReader br = new BufferedReader(isr);

                String s = null;

                while ((s = br.readLine()) != null) {

                    Log.d("YumZing", s);
                    sb.append(s);
                }

                Log.d("Check Now",sb+"");

            } catch (ClientProtocolException e) {

                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
        }

    });

    t1.start();
    try {
        t1.join();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    System.out.println("Getting from Post Data Method "+sb.toString());

    return sb.toString();
} 
```

# javascript - 使用 javascript 从 HTML 中获取文本

> ID：12864495
> 
> 赞同：3
> 
> 时间：2012-10-12T17:48:36.237
> 
> 标签：javascript, html, dom

我是 JavaScript 的初学者。我试图了解如何在 js 中使用 DOM ...

无论结构多么复杂，我都想从每个 DIV 中获取某个网站的文本。如果我在下面运行我的代码，它将给我文本但是： patern div 给我他的文本和来自子 div 的文本......然后子 div 给我他的文本......所以得到很多重复的文本。

```
var items = document.body.getElementsByTagName('*');
for(var i=0; i<items.length; i++)
{
  document.write(items[i].textContent);
} 
```

知道当前文本的节点对我来说很重要所以我不能使用它，因为我得到了文本但我不知道文本的节点：

```
var body = document.body, textContent = 'textContent' in body ? body.textContent : body.innerText;
document.write(textContent); 
```

我知道解决方案是 jQuery。，但我试图了解如何在 JS 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:13:36.687

在这种情况下，通常的`textContent`or`innerHTML`方法会失败，因为它`.innerHTML`包含子节点的 HTML。

但是您可以使用另一个属性：`childNodes`. 此列表不仅包含子*元素*，还包含所有子*节点*，包括*文本节点*：

```
var items = document.body.getElementsByTagName('*');
for(var i=0; i<items.length; i++)
{
  var currItem = items[i];
  for(var j = 0; j < currItem.childNodes.length; ++j)
  {
    if(currItem.childNodes[j].nodeName === "#text")
    {
      // the current child node is a text node
      document.write(items[i].textContent);
    }
  }
} 
```

由于每个节点在 DOM 中都有一个唯一的位置，这将确保每个节点只被写入一次。

### 参考：

*   W3C：DOM Level 3（官方文档）
    *   [节点.nodeName](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-F68D095)
    *   [Node.childNodes](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1451460987)
*   Mozilla 开发者网络（更容易理解）
    *   [节点.nodeName](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeName)
    *   [Node.childNodes](https://developer.mozilla.org/en-US/docs/DOM/Node.childNodes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:09:26.147

您可以尝试使用 jQuery .get() 函数获取所有匹配的元素。

例子：

```
var elements = [];
elements = $('div').get(); 
```

一旦你拥有了所有元素，你就可以从每个元素中获取文本（如果有的话）并将其存储在另一个数组中，如下所示：

```
var textStrings = [];
var len = elements.length;
for(var a = 0; a < len; a++)
    textStrings[a] = elements[a].text(); 
```

第二个代码块将遍历第一个元素数组并从每个元素中提取文本，将其保存在名为 textStrings 的第二个数组中。'len' 变量用于优化 javascript 代码并防止浏览器每次通过循环评估 'elements.length'。

希望这可以帮助。

# android - 安卓屏幕尺寸分辨率

> ID：12864497
> 
> 赞同：0
> 
> 时间：2012-10-12T17:48:46.017
> 
> 标签：android, size, screen, drawable, resolution

我的应用程序在 480x800 分辨率下完美运行。如果我保持 480x800 分辨率但将屏幕尺寸更改为例如 2.7 英寸、3.7 英寸或 5.4 英寸，它仍然是完美的。但是，当我将分辨率更改为例如 640x1066 时，所有的 ImageButton 都太小了，并且在所有屏幕尺寸中都位于错误的位置......我已经在所有四个文件夹（drawable-l、m、h、xh）中创建了 ImageButtons 但仍然是按钮大小不正确..

```
<ImageButton
android:id="@+id/ib1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginLeft="6dp"
android:layout_marginTop="433dp"
android:background="@drawable/imagebutton1" />

<ImageButton
android:id="@+id/ib2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginLeft="188dp"
android:layout_marginTop="436dp"
android:background="@drawable/imagebutton2" /> 
```

注意：我的问题不是当我改变屏幕尺寸时，而是当我改变屏幕分辨率时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:13:09.000

我真的很想看一些代码。

如果你使用`RelativeLayout`像`android:layout_width`and这样的属性并在**dp**（密度像素）`android:layout_height`中指定值，例如它应该可以正常工作。**`android:layout_height="40dp"`**

 **请尝试与我们分享一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:26:49.993

确保您在 ldpi、mdpi、hdpi 和 xhdpi 文件夹中的资产已正确缩放以适应差异。决议。我不小心不正确地缩放了一些资产，虽然它们在正确的文件夹中..给了我一些不好的结果

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)**

# objective-c - ios应用升级委托

> ID：12864500
> 
> 赞同：1
> 
> 时间：2012-10-12T17:49:05.673
> 
> 标签：objective-c, ios, upgrade

当用户升级或重新安装更新版本的 iOS 应用程序时，是否会调用任何委托方法？

我使用 Core Data 来缓存来自服务器的一些信息。当任何实体的schema发生变化时，我需要手动从模拟器中删除SQLite数据库，否则应用程序在启动时会崩溃，并出现错误“用于打开商店的模型与用于创建商店的模型不兼容。” 如果有任何应用程序升级的委托方法，则可以自动删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:52:16.917

您需要使用 CoreData 版本控制：

[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:02:25.553

丹尼尔史密斯的答案是正确的，但我只想添加我的应用程序如何确定其已更新。我希望在默认值中保留一个“当前版本”字符串。当应用程序启动时，我将其与当前版本进行比较：

*   defaults 没有字符串 - 这是应用程序的第一次运行
*   默认版本不同 - 用户更新了应用
*   默认值相同 - 用户刚刚重新启动应用程序

有时很高兴知道以上内容。确保在设置标签后立即保存默认值并执行您想要的任何版本控制，因此崩溃不会让您再次执行此操作。

编辑：如果他的模型发生变化，如何不崩溃。我现在使用它，保留旧的存储库，并调整模型，在每次调整时它只是删除旧的（如果它无法打开它）并创建一个新的。这是以 Apple 的代码为模型的，但不确定我做了哪些更改。无论如何，如果模型发生变化，您都不会崩溃。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{   
    //LTLog(@"_persistentStoreCoordinator = %@", _persistentStoreCoordinator); 
    if (_persistentStoreCoordinator)
    {
        return _persistentStoreCoordinator;
    }
    NSFileManager *manager = [NSFileManager defaultManager];
    NSString *path = [[appDelegate applicationAppSupportDirectory] stringByAppendingPathComponent:[_dbName stringByAppendingPathExtension:@"SQLite"]];
    storeURL = [NSURL fileURLWithPath:path];

    BOOL fileExists = [manager fileExistsAtPath:path];
    if(!fileExists) {
        _didCreateNewRepository = YES;
    }
    if(_createNewRepository) {
        [manager removeItemAtURL:storeURL error:nil];
        if(fileExists) _didDestroyOldRepository = YES;
        _didCreateNewRepository = YES;
    }

    while(YES) {
        __autoreleasing NSError *error = nil;
        _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
        if ([_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {

            break;
        } else {
            _persistentStoreCoordinator = nil;
            [manager removeItemAtURL:storeURL error:&error];
            if(fileExists) {
                _didDestroyOldRepository = YES; // caller didn't want a new one but got a new one anyway (old one corrupt???)
                _didCreateNewRepository = YES;
            }
#ifndef NDEBUG
            LTLog(@"CORE DATA failed to open store %@: error=%@", _dbName, error);
#endif
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.

             Typical reasons for an error here include:
             * The persistent store is not accessible
             * The schema for the persistent store is incompatible with current managed object model
             Check the error message to determine what the actual problem was.
             */
            //LTLog(@"Unresolved error %@, %@", error, [error userInfo]);
            //abort();
        }    
    }
    return _persistentStoreCoordinator;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:09:08.093

关注博客很好：

[http://blog.10to1.be/cocoa/2011/11/28/core-data-versioning/](http://blog.10to1.be/cocoa/2011/11/28/core-data-versioning/)

# php - 不使用 max_execution_time 使操作原子化

> ID：12864501
> 
> 赞同：0
> 
> 时间：2012-10-12T17:49:05.200
> 
> 标签：php, mysql, algorithm, atomic

我已经设置了一个 cron 作业（PHP 脚本），它执行以下工作：

```
1\. Read all of the unseen emails, using imap
   1.1  For each email readed
   1.2\. Fetches the details and save detail in database
   1.3\. Moves email to other mailbox named "Processed"
   1.4\. Goto step 1.1 
```

但是如果 PHP 脚本**停止或**执行失败，**在步骤 1.2 之后但在 1.3 之前**，电子邮件将被***重新处理***，这就是这里的*问题*。

众所周知，处理时间取决于服务器负载和要处理的电子邮件数量等许多因素，所以我认为设置 max_execution_time 不会有帮助。

我如何使这个原子？有任何想法吗？（如果您对不同的流程有任何想法，我也可以更改流程）。

**编辑：**假设电子邮件移动了，它只是要提交，但是 PHP 脚本停止了？然后会发生的是，电子邮件会在没有存储记录的情况下移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:51:15.040

您可以将步骤 1.2 放入数据库事务中，然后如果步骤 1.3 失败，您将回滚该事务。

如果您有一个事务，并且没有显式调用“提交”（即通过超时，或者您只是忘记调用提交），那么它会自动假定为回滚。

# mysql - 双重计数语句 MySQL 查询

> ID：12864503
> 
> 赞同：1
> 
> 时间：2012-10-12T17:49:15.480
> 
> 标签：mysql, sql, join

我有一个带有布尔列的下表，`has_object`它指示每一行是否有关联的数字对象。

```
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
| pid        | varchar(255) | NO   | PRI |         |       |
| title      | text         | YES  |     | NULL    |       |
| owner_uid  | int(11)      | YES  |     | NULL    |       |
| has_object | int(11)      | YES  |     | NULL    |       |
+------------+--------------+------+-----+---------+-------+ 
```

我已尝试使用此查询来获取有关每个`owner_uid`. 但在我的表中它返回错误的结果：

```
SELECT 
  a.owner_uid, 
  count(b.pid) as count1, 
  count(c.pid) as count2  
FROM
  islandora_report a
  JOIN islandora_report b ON b.owner_uid = a.owner_uid AND b.has_object = 0
  JOIN islandora_report c ON c.owner_uid = a.owner_uid AND c.has_object = 1
GROUP BY a.owner_uid; 
```

结果：

![在此处输入图像描述](../Images/d76a40e7c530eef22d7cf696f9d45f34.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:53:28.833

由于`BOOLEAN`只是一个`0`or `1`，您实际上可以在`SUM()`没有任何连接的情况下执行一对来添加列。

```
SELECT
  owner_uid,
  /* SUM() adds up all the 1 values */
  SUM(has_object) AS count_true,
  /* Invert the boolean with a case statement to get the inverse */
  SUM(CASE WHEN has_object = 1 THEN 0 ELSE 1 END) AS count_false
FROM islandora_report
GROUP BY owner_uid 
```

除了上述方法之外，还有其他方法可以反转布尔值。这只是第一个想到的。您还可以从总数中减去真实的总和，例如：

```
SUM(has_object) AS count_true,
COUNT(*) - SUM(has_object) AS count_false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:53:53.283

您实际上并不需要连接；你可以写：

```
SELECT owner_uid,
       COUNT(CASE WHEN has_object = 0 THEN 1 END) AS count1,
       COUNT(CASE WHEN has_object = 1 THEN 1 END) AS count2
  FROM islandora_report
 GROUP
    BY owner_uid
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:01:54.023

怎么办：

```
SELECT
  owner_id, count(*), has_object = 1 as has_it
FROM islandora_report
GROUP BY owner_id,has_it 
```

# scala - 如何从 Scala 的列表中惯用地“删除”单个元素并缩小差距？

> ID：12864505
> 
> 赞同：11
> 
> 时间：2012-10-12T17:49:23.050
> 
> 标签：scala, list, filter, functional-programming

列表在 Scala 中是不可变的，因此我试图弄清楚如何“删除”——实际上，创建一个新集合——该元素，然后缩小列表中创建的差距。这对我来说听起来像是一个使用地图的好地方，但我不知道如何在这种情况下开始。

Courses 是一个字符串列表。我需要这个循环，因为我实际上有几个列表，我需要从中删除该索引处的元素（我正在使用多个列表来存储跨列表关联的数据，并且我通过简单地确保索引将始终跨列表对应）。

```
 for (i <- 0 until courses.length){
    if (input == courses(i) {
    //I need a map call on each list here to remove that element
    //this element is not guaranteed to be at the front or the end of the list
    }
  }
} 
```

让我为这个问题添加一些细节。我有四个通过索引相互关联的列表；一个列表存储课程名称，一个以简单的 int 格式（即 130）存储课程开始的时间，一个存储“am”或“pm”，一个以 int 存储课程的日期（因此“MWF”评估为 1，“TR”评估为 2，等等）。我不知道拥有多个这是否是解决这个问题的最佳或“正确”方法，但这些都是我拥有的工具（从我 16 岁起就没有认真编程的一年级 comp sci 学生）。我正在编写一个函数来从每个列表中删除相应的元素，我所知道的是 1）索引对应和 2）用户输入课程名称。如何使用 filterNot 从每个列表中删除相应的元素？我不

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T18:10:52.620

这是用例`filter`：

```
scala> List(1,2,3,4,5)
res0: List[Int] = List(1, 2, 3, 4, 5)

scala> res0.filter(_ != 2)
res1: List[Int] = List(1, 3, 4, 5) 
```

在转换列表的所有元素时，您想使用 map。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-12T20:20:45.697

要直接回答您的问题，我认为您正在寻找`patch`，例如删除索引为 2 的元素（“c”）：

```
List("a","b","c","d").patch(2, Nil, 1)      // List(a, b, d) 
```

where`Nil`是我们要替换的内容，并且`1`是要替换的字符数。

但是，如果你这样做：

> 我有四个通过索引相互关联的列表；一个列表存储课程名称，一个以简单的 int 格式（即 130）存储课程开始的时间，一个存储“am”或“pm”，一个以 int 存储课程的日期

你会过得很糟糕。我建议你使用`case class`：

```
case class Course(name: String, time: Int, ampm: String, day: Int) 
```

然后将它们存储在`Set[Course]`. （将时间和日期存储为`Int`s 也不是一个好主意 - 请查看`java.util.Calendar`。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T18:17:27.703

## 首先是一些旁注：

1.  `List`不是基于索引的结构。对它的所有面向索引的操作都需要线性时间。因为面向索引的算法`Vector`是一个更好的候选者。事实上，如果您的算法需要索引，这肯定表明您确实没有公开 Scala 的函数功能。

2.  `map`用于使用传入的转换器函数将项目“A”的集合转换为相同的项目“B”集合，从单个“A”到单个“B”。它不能改变结果元素的数量。可能您对`map`or`fold`感到困惑`reduce`。

# 回答您更新的问题

好的，这是一个功能性解决方案，它在列表上有效：

```
val (resultCourses, resultTimeList, resultAmOrPmList, resultDateList)
  = (courses, timeList, amOrPmList, dateList)
      .zipped
      .filterNot(_._1 == input)
      .unzip4 
```

但有一个问题。实际上，我非常惊讶地发现，该解决方案中使用的函数对于函数式语言来说非常基础，但标准 Scala 库中不存在这些函数。Scala 将它们用于 2 元组和 3 元组，但没有其他元组。

为了解决这个问题，您需要导入以下隐式扩展。

```
implicit class Tuple4Zipped 
  [ A, B, C, D ] 
  ( val t : (Iterable[A], Iterable[B], Iterable[C], Iterable[D]) ) 
  extends AnyVal 
  {
    def zipped 
      = t._1.toStream
          .zip(t._2).zip(t._3).zip(t._4)
          .map{ case (((a, b), c), d) => (a, b, c, d) }
  }

implicit class IterableUnzip4
  [ A, B, C, D ]
  ( val ts : Iterable[(A, B, C, D)] )
  extends AnyVal
  {
    def unzip4
      = ts.foldRight((List[A](), List[B](), List[C](), List[D]()))(
          (a, z) => (a._1 +: z._1, a._2 +: z._2, a._3 +: z._3, a._4 +: z._4)
        )
  } 
```

此实现需要 Scala 2.10，因为它利用新的有效值类功能来拉动现有类型。

[实际上，我已经将它们包含在一个名为SExt](https://github.com/nikita-volkov/sext)的小型扩展库中，根据您的项目，您只需添加一条`import sext._`语句就可以拥有它们。

### 当然，如果您愿意，您可以直接将这些函数组合到解决方案中：

```
val (resultCourses, resultTimeList, resultAmOrPmList, resultDateList)
  = courses.toStream
      .zip(timeList).zip(amOrPmList).zip(dateList)
      .map{ case (((a, b), c), d) => (a, b, c, d) }
      .filterNot(_._1 == input)
      .foldRight((List[A](), List[B](), List[C](), List[D]()))(
        (a, z) => (a._1 +: z._1, a._2 +: z._2, a._3 +: z._3, a._4 +: z._4)
      ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T18:11:09.477

**删除和过滤列表元素**

在 Scala 中，您可以过滤列表以删除元素。

```
scala> val courses = List("Artificial Intelligence", "Programming Languages", "Compilers", "Networks", "Databases")
courses: List[java.lang.String] = List(Artificial Intelligence, Programming Languages, Compilers, Networks, Databases) 
```

让我们删除几个类：

```
courses.filterNot(p => p == "Compilers" || p == "Databases") 
```

您也可以使用 remove，但不推荐使用它以支持 filter 或 filterNot。

如果要按索引删除，可以使用 将列表中的每个元素与有序索引相关联`zipWithIndex`。所以，`courses.zipWithIndex`变成：

`List[(java.lang.String, Int)] = List((Artificial Intelligence,0), (Programming Languages,1), (Compilers,2), (Networks,3), (Databases,4))`

要从中删除第二个元素，您可以参考元组中的索引，`courses.filterNot(_._2 == 1)`其中给出了列表：

`res8: List[(java.lang.String, Int)] = List((Artificial Intelligence,0), (Compilers,2), (Networks,3), (Databases,4))`

最后，另一个工具是用来`indexWhere`查找任意元素的索引。

`courses.indexWhere(_ contains "Languages") res9: Int = 1`

**重新更新**

> 我正在编写一个函数来从每个列表中删除相应的元素，我所知道的是 1）索引对应和 2）用户输入课程名称。如何使用 filterNot 从每个列表中删除相应的元素？

与 Nikita 的更新类似，您必须“合并”每个列表的元素。所以需要将课程、经络、天数和时间放入一个元组或类中来保存相关的元素。然后您可以过滤元组的元素或类的字段。

使用此示例数据将相应的元素组合成一个元组如下所示：

```
val courses = List(Artificial Intelligence, Programming Languages, Compilers, Networks, Databases)
val meridiems = List(am, pm, am, pm, am)
val times = List(100, 1200, 0100, 0900, 0800)
val days = List(MWF, TTH, MW, MWF, MTWTHF) 
```

将它们与 zip 结合起来：

`courses zip days zip times zip meridiems`

`val zipped = List[(((java.lang.String, java.lang.String), java.lang.String), java.lang.String)] = List((((Artificial Intelligence,MWF),100),am), (((Programming Languages,TTH),1200),pm), (((Compilers,MW),0100),am), (((Networks,MWF),0900),pm), (((Databases,MTWTHF),0800),am))`

这种憎恶将嵌套的元组扁平化为元组。有更好的方法。

`zipped.map(x => (x._1._1._1, x._1._1._2, x._1._2, x._2)).toList`

一个很好的元组列表。

`List[(java.lang.String, java.lang.String, java.lang.String, java.lang.String)] = List((Artificial Intelligence,MWF,100,am), (Programming Languages,TTH,1200,pm), (Compilers,MW,0100,am), (Networks,MWF,0900,pm), (Databases,MTWTHF,0800,am))`

最后，我们可以使用`filterNot`. 例如`filterNot(_._1 == "Networks")`

`List[(java.lang.String, java.lang.String, java.lang.String, java.lang.String)] = List((Artificial Intelligence,MWF,100,am), (Programming Languages,TTH,1200,pm), (Compilers,MW,0100,am), (Databases,MTWTHF,0800,am))`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T13:11:03.987

我即将给出的答案可能超出了您迄今为止在课程中所教的内容，所以如果是这种情况，我深表歉意。

首先，您是否应该有四个列表的问题是正确的 - 从根本上讲，听起来您需要的是一个代表课程的对象：

```
/**
 * Represents a course.
 * @param name the human-readable descriptor for the course
 * @param time the time of day as an integer equivalent to 
 *             12 hour time, i.e. 1130
 * @param meridiem the half of the day that the time corresponds 
 *                 to: either "am" or "pm"
 * @param days an encoding of the days of the week the classes runs.
 */
case class Course(name : String, timeOfDay : Int, meridiem : String, days : Int) 
```

你可以用它来定义一个单独的课程

```
val cs101 = 
  Course("CS101 - Introduction to Object-Functional Programming", 
         1000, "am", 1) 
```

有更好的方法来定义这种类型（更好地表示 12 小时时间，更清晰地表示星期几等），但我不会偏离你原来的问题陈述。

鉴于此，您将拥有一个课程列表：

```
val courses = List(cs101, cs402, bio101, phil101) 
```

如果您想查找并删除与给定名称匹配的*所有*课程，您可以编写：

```
val courseToRemove = "PHIL101 - Philosophy of Beard Ownership"
courses.filterNot(course => course.name == courseToRemove) 
```

等效地，在 Scala 中为函数文字使用下划线语法糖：

```
courses.filterNot(_.name == courseToRemove) 
```

如果存在多个课程可能具有相同名称的风险（或者您正在使用正则表达式或前缀匹配基于某些部分标准进行过滤）并且您只想删除第一个匹配项，那么您可以定义您的自己的功能来做到这一点：

```
def removeFirst(courses : List[Course], courseToRemove : String) : List[Course] =
  courses match {
    case Nil => Nil
    case head :: tail if head == courseToRemove => tail
    case head :: tail => head :: removeFirst(tail)
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-22T14:35:05.533

使用 ListBuffer 是一个可变列表，如 java 列表

```
 var l =  scala.collection.mutable.ListBuffer("a","b" ,"c")
 print(l) //ListBuffer(a, b, c)
 l.remove(0)
 print(l) //ListBuffer(b, c) 
```

# php - 从 JSON 文件创建图像？

> ID：12864510
> 
> 赞同：1
> 
> 时间：2012-10-12T17:50:16.637
> 
> 标签：php, json, image, image-processing

> **可能重复：**
> [在php中将数组转换为png](https://stackoverflow.com/questions/11199723/transform-array-to-png-in-php)

像素.JSON

```
{
  "274:130":"000",
  "274:129":"000",
  "274:128":"000",
  "274:127":"000",
  "274:126":"000",
  "274:125":"000",
} 
```

从具有 X、Y 坐标和十六进制代码的 JSON 文件到基于数据生成图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:06:33.070

这里缺少的是`height`，`width`但如果你能得到，那么你可以使用[imagesetpixel](http://php.net/manual/en/function.imagesetpixel.php)从像素生成图像

例子

```
$pixels = '{
      "274:130":"000",
      "274:129":"000",
      "274:128":"000",
      "274:127":"000",
      "274:126":"000",
      "274:125":"000"
    }';

$list = json_decode($pixels, true);

//#GENERATE MORE DATA
for($i = 0; $i < 10000; $i ++) {
    $list[mt_rand(1, 300) . ":" . mt_rand(1, 300)] = random_hex_color();
}

$h = 300;
$w = 300;

$gd = imagecreatetruecolor($h, $w);
// ImageFillToBorder($gd, 0, 0, 0, 255);

foreach ( $list as $xy => $color ) {
    list($r, $g, $b) = html2rgb($color);
    list($x, $y) = explode(":", $xy);
    $color = imagecolorallocate($gd, $r, $g, $b);
    imagesetpixel($gd, $x, $y, $color);
}

header('Content-Type: image/png');
imagepng($gd); 
```

样本输出

![在此处输入图像描述](../Images/68eb47fbe322abbff72b04d627d75571.png)

使用的功能

```
function html2rgb($color) {
    if ($color[0] == '#')
        $color = substr($color, 1);
    if (strlen($color) == 6)
        list($r, $g, $b) = array($color[0] . $color[1],$color[2] . $color[3],$color[4] . $color[5]);
    elseif (strlen($color) == 3)
        list($r, $g, $b) = array($color[0] . $color[0],$color[1] . $color[1],$color[2] . $color[2]);
    else
        return false;
    return array(hexdec($r),hexdec($g),hexdec($b));
}

function random_hex_color(){
    return sprintf("%02X%02X%02X", mt_rand(0, 255), mt_rand(0, 255), mt_rand(0, 255));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:54:49.490

假设您的意思是，在客户端网页/浏览器中：您可以创建一个 HTML5 画布并根据您的 JSON 数据直接在其上绘制；我想它会很慢，但它会起作用。

您的“最佳”选择可能是重新考虑为什么要在 JSON 对象中发送图像数据，但我想这有一些未共享的上下文。

# python - 当 ntp 更新时间时，Python Twisted 应用程序中断

> ID：12864519
> 
> 赞同：2
> 
> 时间：2012-10-12T17:50:53.980
> 
> 标签：python, twisted

我有一个广泛使用 Twisted 的 python 应用程序。我正在从 python 2.5 迁移到 2.7 以及更新库和模块，包括从 Twisted 2.5 到 12.2。查看代码，为了解决一个问题，如果系统时间突然改变（如第一次 ntp 更新）， callLater 和其他一些方法会出现意外行为（取决于时间向前或向后）。

我们在twisted 2.5 时的工作是用返回单调时间的自定义方法重新定义一些方法。从那时起，似乎扭曲的某些行为已经改变以解释这一点并破坏了我们的工作。我看到几个讨论相关问题的线程：

[http://twistedmatrix.com/trac/ticket/1396](http://twistedmatrix.com/trac/ticket/1396)

[http://twistedmatrix.com/trac/ticket/2424](http://twistedmatrix.com/trac/ticket/2424)

我看到几个补丁漂浮在周围，但不确定它们是否真的被接受了。我想知道是否有人有这方面的经验。有没有办法在 Twisted 中启用单调时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:25:14.900

这两张票的状态都是“新的”，所以，不，它们还没有修复。

这就是为什么您应该将您的错误修复贡献给您的开源依赖项，并参与这些长期运行的困难错误。当您开始更新时，您会希望您的问题已得到解决:)。

迟到总比没有好 - 我期待看到您对 #2424 和 #1396 的贡献:)。

# .net-4.0 - 为什么调试输出显示在 WinDbg 而不是 VS2010？

> ID：12864528
> 
> 赞同：1
> 
> 时间：2012-10-12T17:51:30.977
> 
> 标签：.net-4.0

我们有 .NET 4 应用程序可以进行一些日志记录。

从 Studio 启动应用程序时，Debug 视图中没有输出。

从 WinDbg 启动应用程序时，日志会按预期显示。

我已经读到 .NET 4 中的更改阻止了日志记录显示在 Studio 和 WinDbg 中，但它现在似乎根本没有显示在 Studio 中。在升级解决方案之前，它确实在 VS2008 中按预期记录。

为什么从 WinDbg 启动时调试输出正确显示，但从 VS2010 启动时却没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:14:48.927

这是由于 log4net.config 文件配置错误造成的。

添加了`<appender>`块和`<appender-ref>`块以引用所述附加程序。

```
<log4net>
  ...
  <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender" >
    <layout type="log4net.Layout.PatternLayout">
      <param name="Header" value="[Header]\r\n" />
      <param name="Footer" value="[Footer]\r\n" />
      <param name="ConversionPattern" value="%d [%t] %-5p %m%n" />
    </layout>
  </appender>

  <root>
    ...
    <appender-ref ref="ConsoleAppender" />
  </root>
</log4net> 
```

# c# - ASP.NET MVC 4 - 在主页上登录

> ID：12864529
> 
> 赞同：1
> 
> 时间：2012-10-12T17:51:34.197
> 
> 标签：c#, asp.net, asp.net-mvc

我想在我的主页上有一个登录表单。在`index.cshtml`我有这个：

```
@using (Html.BeginForm("Login", "AccountController", FormMethod.Post)) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
        <div>
            <div class="usernametb">
                @Html.LabelFor(m => m.LoginMod.UserName)
            </div>
            <div class="usernametb">
                @Html.TextBoxFor(m => m.LoginMod.UserName, new { style = "width:150px" })
                @Html.ValidationMessageFor(m => m.LoginMod.UserName)
            </div>
        </div>
        <div class="clear"></div>
        <div>
            <div class="pwtb">
                @Html.LabelFor(m => m.LoginMod.Password)
            </div>
            <div class="pwtb">
                @Html.PasswordFor(m => m.LoginMod.Password, new { style = "width:150px" })
                @Html.ValidationMessageFor(m => m.LoginMod.Password)
            </div>
        </div>
        <div class="clear"></div>
        <div class="rememberme">
            @Html.CheckBoxFor(m => m.LoginMod.RememberMe)
            @Html.LabelFor(m => m.LoginMod.RememberMe, new { @class = "checkbox" })
        </div>
        <div><input class="loginbutton" type="submit" value="Log In" /></div>
} 
```

我参考了这个模型：

```
namespace memsite.Models
{
    public class MemEvent
    {
        public LoginModel LoginMod { get; set; }
        public DateTime Start { get; set; }
        public DateTime End { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }
} 
```

我正在尝试点击此帐户控制器登录操作，但它从未点击过控制器，它只是重定向到`/AccountController/Login`不存在的控制器。此外，验证控件不起作用...

```
namespace memsite.Controllers
{
    [Authorize]
    [InitializeSimpleMembership]
    public class AccountController : Controller
    {
        //
        // GET: /Account/Login

        [AllowAnonymous]
        public ActionResult Login(string returnUrl)
        {
            ViewBag.ReturnUrl = returnUrl;
            return View();
        }

        //
        // POST: /Account/Login

        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Login(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
            {
                return RedirectToLocal(returnUrl);
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
            return View(model);
        } 
```

（我是 MVC 的新手，永远离开了网络表单。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T17:53:09.523

在表单中使用 Account 而不是 AccountController。ASP MVC 基于命名约定并且隐含了控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:57:37.863

在下面的行中更改控制器的名称

```
@using (Html.BeginForm("Login", "AccountController", FormMethod.Post)) { 
```

到

```
@using (Html.BeginForm("Login", "Account", FormMethod.Post)) { 
```

因为 ASP.NET MVC 将通过路由配置自动检测以 Controller 结尾的任何内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:55:52.500

中的**身份验证**部分`Web.config`指定您具有登录类型：

```
<authentication mode="Forms">
    <forms loginUrl="Account/Login" timeout="2880" />
</authentication> 
```

也许您`Web.config`的配置错误。

# jenkins - 触发期间的詹金斯失败

> ID：12864530
> 
> 赞同：2
> 
> 时间：2012-10-12T17:51:41.067
> 
> 标签：jenkins

在执行我所做的作业时，在执行 shell 执行之前出现错误（因此此错误必须来自 Jenkins 或 Git）。

```
Started by user anonymous
Building in workspace /var/lib/jenkins/workspace/Deploy example.com master branch
Checkout:Deploy example.com master branch / /var/lib/jenkins/workspace/Deploy example.com master branch - hudson.remoting.LocalChannel@51a745fc
Using strategy: Default
Last Built Revision: Revision 133257b4b34f8c0a90bf5ce11c634ebc9587d20d (origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from https://joachimroeleveld:fod4xvo0@bitbucket.org/joachimroeleveld/exofes_profiler.git
Commencing build of Revision 133257b4b34f8c0a90bf5ce11c634ebc9587d20d (origin/master)
Checking out Revision 133257b4b34f8c0a90bf5ce11c634ebc9587d20d (origin/master)
Triggering default
default completed with result FAILURE
Finished: FAILURE 
```

在这种情况下，“默认”是什么意思？单击它会出现一个带有“工作区”和“最近更改”链接的页面。此错误是否来自 Git（我将 BitBucket 用于远程存储库）或 Jenkins 中的错误配置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T21:22:59.253

您可能正在使用多配置作业。

如果是这种情况，请先尝试配置“自由风格的软件项目”。日志将如下所示：

```
Started by an SCM change
Checkout:...
Using strategy: Default
Last Built Revision: Revision ...
Fetching changes from 1 remote Git repository
Fetching upstream changes from ...
Commencing build of Revision ...
Checking out Revision ...
[job-name] $ /bin/sh -xe /tmp/hudson7227596484536996852.sh 
```

# encoding - 为 NSData 添加更多变量以进行回合制游戏数据编码

> ID：12864533
> 
> 赞同：0
> 
> 时间：2012-10-12T17:51:50.490
> 
> 标签：encoding, nsdata, game-center

我正在制作一个回合制游戏，我将一个整数变量“points”存储到 NSData 中，然后由 gamecenter 存储。到目前为止，我这样做如下：

> NSString *newString=[[NSString alloc] initWithFormat: @"%i", points];
> 
> NSData *data = [newString dataUsingEncoding:NSUTF8StringEncoding];

我需要将更多变量存储到 NSData *data 中。我怎样才能做到这一点？

我现在知道您可以通过以下方式在字符串 *newString 中存储 2 个整数：

> NSString *newString=[[NSString alloc] initWithFormat: @"%i, %i", points, otherInteger];

但是我不知道如何解码它，因为字符串将作为一个整数值存储在最后一个整数值之后。无论如何，它可能不是最好的实现，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:30:00.023

你可以这样做：

```
// for encoding
int32_t points = ...;
int32_t otherInteger = ...;
NSMutableData *data = [NSMutableData data];
[data appendBytes:&points length:sizeof(int32_t)];
[data appendBytes:&otherInteger length:sizeof(int32_t)];
.
.
.

// for decoding
NSData *data = ...;
int32_t points;
int32_t otherInteger;
int index = 0;
NSRange range;

range = NSMakeRange(index, sizeof(int32_t));
[data getBytes:&points range:range];
index += sizeof(int32_t);

range = NSMakeRange(index, sizeof(int32_t));
[data getBytes:&otherInteger range:range];
index += sizeof(int32_t);

.
.
. 
```

# javascript - Javascript 安全问题

> ID：12864537
> 
> 赞同：0
> 
> 时间：2012-10-12T17:52:12.703
> 
> 标签：javascript, jquery, security

在我之前的问题中： [Securing javascript game timing](https://stackoverflow.com/questions/12861419/securing-javascript-game-timing)

... 很明显，Javascript/Canvas 游戏中的客户端计时根本不安全。我知道不信任客户的口头禅——这首先是导致我挣扎的原因。:-)

因此，如果我确实将所有时间转移到服务器并处理它，这是一个后续问题。游戏显然需要在提交之前完成。由于游戏拼图全是 Javascript，这就引入了操纵客户端代码来伪造游戏完成的问题。

我在一个单独的类文件中创建了游戏 JS 代码。如果我这样实例化游戏：

```
var game;
$document.ready(function(){
  game = new Game();
}); 
```

...然后，我可以通过控制台访问“游戏”对象及其所有方法和变量。

但是，如果我这样做：

```
$document.ready(function(){
  var game = new Game();
}); 
```

...然后我无法通过控制台访问“游戏”对象。这似乎有帮助，但有什么我不知道的 - 这个对象是否仍然可以以我不知道的某种方式访问​​，或者让它成为该函数中的私有 var 更安全一些？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:28:01.567

不要太在意控制台。是的，如果有全局对象的方法可以很容易地被触发以“赢得”游戏，那么作弊的可能性很大，但正如您所演示的那样，它很容易被阻止。

因此，黑客只会监听（查看网络窗格）向您的服务器发出的请求并手动触发它们。如果它们只是一些简单的 url，比如`/action=start`and `/action=end`，他可以很容易地手动触发它们而无需任何时间。因此，您需要防止这种情况发生（尽管您永远无法真正做到安全），例如通过添加额外的凭证令牌。或者您可以在游戏代码中嵌入一些“秘密”，这些“秘密”在游戏过程中被泄露，需要发送到服务器以证明其合法性。当然它们可以从你的代码中读出，但是你必须让它对黑客来说*太复杂了。*这有点像[默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)......</p>

# android - Android：Logcat 在 Intellij IDEA 中不显示任何内容

> ID：12864540
> 
> 赞同：13
> 
> 时间：2012-10-12T17:52:17.133
> 
> 标签：android, intellij-idea, logcat

在 Intellij IDEA 中，Logcat 输出为空 - 怎么办？应用程序正在运行（动态壁纸），日志级别为 Verbose，设备选择正确，ADB 和 USB 调试已启用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-01T20:27:21.150

按下以下按钮总是为我修复它。

![在此处输入图像描述](../Images/9cddcc1c72412809e213aaa8ef6df823.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-20T07:55:06.417

我经常在 eclipse IDE 中看到这个问题，重启 IDE（或命令行的 ADB）是我的解决方案。

重启亚行：

sudo adb kill-server sudo adb start-server

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-13T16:19:41.393

似乎 adb 有时会与 Intellij 断开连接。您可以重新启动服务器或 Intellij，但更容易转到：

工具 -> 安卓

然后关闭“启用 ADB 集成”，然后重新打开。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-06T11:54:07.757

[![说明](../Images/e8b0a425afe0b0cbdaf0e10a26a9a12a.png)](https://i.stack.imgur.com/wA3DU.png)

只需重新启动您在 IntelliJ 中的日志记录。我的版本是15。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T12:56:02.420

我也有同样的问题。但临时解决方案是从菜单转到“工具>Android>监视器（包括DDMS）”它将显示Android Debug Monitor，您将能够看到您的日志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-09T11:29:04.773

确保 Eclipse/ADT 没有并行运行并访问电话。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-17T05:55:02.037

在我的情况下，“Resume”（参见：**Run -> Resume** in AndroidStudio）是彩色的。单击标签 Locgat 后，它的工作就完成了......

我真的不知道最后一个小时我的手机（运行 Lollipop）是什么搞砸了 - 但我从来没有为让 adb / logcat 运行而如此努力。

似乎系统通过重新启动存储了应用程序的状态 oO 这可能吗？我不知道为什么 AndroidStudio 显示简历条目“突出显示”，重启我的设备后我没有运行应用程序......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-20T07:50:44.243

如果您愿意迁移，这不是您问题的直接答案，而是可能的解决方案：

我一直遇到这个问题，有时重启会暂时起作用。过了一会儿，我决定尝试一下 Android Studio（它是基于 Intellij 构建的）。我已经有一段时间没有遇到这个问题了，Android Studio 的感觉很像 Intellij，喜欢它！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-02T03:06:34.717

[![指示](../Images/4adc7241f52c3637e6ee45d226707c20.png)](https://i.stack.imgur.com/k3rej.png)

如果你像我一样是 android 新手，我会因为无法调试而大发雷霆。碰巧我“不小心”按下了隐藏这个屏幕的那个小按钮。再次点击它，它会回来。

我希望这个答案对您和其他许多人有用。

# grep - grep 字符串后的所有内容

> ID：12864543
> 
> 赞同：0
> 
> 时间：2012-10-12T17:52:43.453
> 
> 标签：grep

我只需要 grep md5 哈希

这是哈希

```
MD5 (mt.pm) = adcddd9492c707642d2bcffbfc67b7a6 
```

它需要看起来像这样

```
adcddd9492c707642d2bcffbfc67b7a6 
```

或做相反的事情

crapb0c63a3cb776502fe03706b2fd540439 /home/mta.pm”

并且现在只获取哈希线索如何获得任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:55:41.500

要 grep，请执行以下操作（这不适用于所有[grep 实现](http://docs.oracle.com/cd/E19082-01/819-2239/grep-1/index.html)）：

```
grep -o '[a-z0-9]*$' 
```

或者你可以使用 sed：

```
sed 's/.*= *\([a-z0-9]*\)$/\1/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:56:28.783

试试这个（`GNU grep`）：

```
grep -oP '.* \K.*$' 
```

或更好 ：

```
grep -o '[[:xdigit:]]\{32\}$' 
```

或与`bash`：

```
read -a arr <<< 'MD5 (mt.pm) = adcddd9492c707642d2bcffbfc67b7a6'
echo ${arr[-1]} 
```

* * *

有了`\{32\}`它就更强大了。`md5`始终为 32 个十六进制字符，请参阅[http://en.wikipedia.org/wiki/MD5](http://en.wikipedia.org/wiki/MD5)

* * *

`[[:xdigit:]]`是一个[POSIX 类正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，这意味着只匹配十六进制字符。

* * *

**最后**

如果要匹配字符串中长 32 个十六进制字符：

```
grep -o '[[:xdigit:]]\{32\}' 
```

会成功的。

# javascript - 从变量设置对象键

> ID：12864544
> 
> 赞同：0
> 
> 时间：2012-10-12T17:52:43.607
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 javascript 中是否可以构造一个对象文字，其表达式为属性名称的字符串？](https://stackoverflow.com/questions/1783403/in-javascript-is-it-possible-to-construct-an-object-literal-with-expressions-eva)

我在从变量中设置对象键和值时遇到问题，如果我仅设置键或仅从变量中设置值，如果我从变量中设置它们都不起作用，则它可以正常工作。

这工作正常

```
 $(":input").change(function () { 

    var currentId = $(this).attr('id');
    var currentval = $(this).attr('value');

    $.post("/inside/update.php", {
        "profile_age":currentval 
    });
}); 
```

此配置不起作用

```
$(":input").change(function () { 

    var currentId = $(this).attr('id');
    var currentval = $(this).attr('value');

    $.post("/inside/update.php", {
        currentId:currentval 
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:56:26.843

试试这个：

```
var options = {};
options[currentId] = currentval; 
$.post("/inside/update.php", options); 
```

# php - 从现有表创建新表

> ID：12864545
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:52:44.527
> 
> 标签：php, jquery, datatable

有点随机练习，但我想从现有表中获取内容并根据所获取的条目创建一个新表。

![在此处输入图像描述](../Images/eb27db3f2f9f5222d8744c97ac8e624a.png)

在上图中，左边的表格是我必须使用的。右边的蓝色表格是我要创建的；使用左侧表格中的数据。

这可以用 jQuery 或一些基本的 PHP 来完成吗？

如果您想知道我为什么这样做是因为我无法访问 SQL 数据库并且我想使用 Google Charts API 来显示每个月的用户注册总数。

与往常一样，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:59:21.933

使用 JQuery 可以通过这种方式完成

```
//initialize monthArray
var monthArr = [{month:'April', occ:0}, {month:'May', occ:0},{month:'June', occ:0}];

//read occurrences for MonthNames in your existing table
$.each(monthArr, function(n,i){
    var _occ = $("td:contains('"+monthArr[n].month+"')").size();
    monthArr[n].occ = _occ;
});

// create new table and show the values
$.each(monthArr, function(index, value) {
  //alert(value.occ+ ': ' + value.month);
    $('#inTable').append('<tr><td>'+value.month+'</td><td>'+value.occ+'</td></tr>');
}); 
```

这是小提琴：http: [//jsfiddle.net/A3WeJ/38/](http://jsfiddle.net/A3WeJ/38/)

注意：此解决方案中未完成表格外观格式设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:02:34.510

您是否希望使用 jQuery 或 PHP 的问题取决于这些表格的内容在页面加载后是否可能发生变化。如果页面不会改变，你应该使用 PHP。

假设表格是使用`while`or`foreach`循环生成的，您可以简单地为表格中的每个选项设置计数。在循环中，如果您检查此列中的内容并添加到适当的任意计数，您可以计算每个中有多少。

检查内容是什么以及它是否已经在您的数组中可能会很好。

希望能为这个问题背后的思考提供一些初步的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:37:06.970

你可以试试这个（你没有提供更多信息，所以可能只是一个想法）

**HTML** id`maintable`可以用另一个 id/class 来改变，或者只是`table`

```
​&lt;table id="maintable">
    <thead><th>Name</th><th>Join Month</th><th>Join Year</th></thead>
    <tbody>
        <tr><td>Joe Blogs</td><td>April</td><td>2012</td></tr>
        <tr><td>Mr. X</td><td>April</td><td>2012</td></tr>
        <tr><td>Andrew Xmen</td><td>April</td><td>2012</td></tr>
        <tr><td>Matt Bblogs</td><td>may</td><td>2012</td></tr>
        <tr><td>Malcom McGuiness</td><td>June</td><td>2012</td></tr>
       <tr><td>Friday Needavodka</td><td>June</td><td>2012</td></tr>
    </tbody>
</table>
<div id="myTblDiv"></div> 
```

**JS**

```
​$(function(){
    var rows={};
    $('table#maintable tbody tr').each(function(){
        var item=$('td:eq(1)', $(this));
        if(rows.hasOwnProperty(item.text()))
            rows[item.text()]=parseInt(rows[item.text()])+1;
        else rows[item.text()]=1;
    });

    var myTable=$('<table />', {'id':'myNewtable', 'class':'table table-striped'});
    var th=$('<thead><th>Total</th><th>Month</th></thead>');
    var tbody=$('<tbody></tbody>');
    myTable.append(th).append(tbody);
    $.each(rows, function(k, v){
        var row=$('<tr><td>'+v+'</td><td>'+k+'</td></tr>');
        myTable.find('tbody').append(row);
    });
    $('div#myTblDiv').append(myTable);
});​ 
```

[**演示**](http://jsfiddle.net/DwS4L/2/)或[**不同的风格**](http://jsfiddle.net/QKqhH/)。

请注意，我`(maintable)`为 google 生成的表使用了 id，在这种情况下，您必须更改`id`or `class`（如果有的话），甚至您可以不使用`table`任何 id 或类名，但确保只有一个表当您仅使用时`$('table')`，如果您可以将表格包装在父 div 中，那么您可以使用`$('div#parentDivId table')`.

# javascript - 如何将子元素以外的元素用作拖动手柄？

> ID：12864549
> 
> 赞同：0
> 
> 时间：2012-10-12T17:53:23.603
> 
> 标签：javascript, jquery, user-interface, svg, draggable

我有以下代码（[jsfiddled](http://jsfiddle.net/N5L42/2/)）。我想使用红色 SVG 矩形作为可拖动 div 元素的句柄，但是因为 SVG 元素不是 div 的子元素，所以这是不可能的。这个想法是让手柄（红色矩形）触发 div 的拖动事件，当拖动 div 时，代码会更新红色 SVG 矩形的位置。**如何让 SVG 矩形充当 div 的拖动句柄（以便 SVG 元素不是 div 元素的子元素）？**

我已经测试过使 SVG 成为 div 的子对象，并使用 SVG rect 作为句柄，这可以正常工作。当我拖动 SVG 矩形时，拖动时会移动 div 和 SVG 矩形。但问题是 SVG 元素本身也被拖动了。但我不希望 SVG 元素本身在拖动时移动，只有 rect 和 div。

编辑：当在 svg rect 上按下鼠标时，某种触发 div 的拖动事件作为一种可能的解决方案出现在我的脑海中，但尚未经过测试。

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>jQuery UI Draggable - Handles</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
        <style>
            #draggable { position:absolute; opacity:0.5;
    width: 100px; height: 100px; padding: 0.5em; float: left; margin: 0 10px 10px 0; }
           #draggable p { cursor: move; }
           #draggable {left:30px;top:0px;z-index:1}
        </style>
        <script>
            $(function() {
                $( "#draggable" ).draggable({ handle: "p" });
                $( "div, p" ).disableSelection();
            });
        </script>
    </head>
    <body>
        <div id="draggable" class="ui-widget-content">
            <p class="ui-widget-header">I can be dragged only by this handle</p>
        </div>
        <svg width="500" height="500" style="position:absolute;z-index:-1">
            <rect x="0" y="0" width="100" height="100" fill="#FF8888"/>
        </svg>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:29:30.557

经过一些测试后，我最终以[这种 jsfiddled 方式](http://jsfiddle.net/WuTec/)`div.trigger(e)`在可拖动 div 的拖动功能中使用组合和更新 SVG rect 的变换属性。

关键是下面这段代码，当鼠标在SVG路径元素上按下时，会触发div的拖动事件：

```
$("#path_1").mousedown(function(e) {
    $( "#div_1" ).trigger(e);
}); 
```

另一个关键点如下，它更新了 SVG path 元素的 transform 属性来实现移动：

```
drag: function(e, ui)
{
    var x=$( "#div_1" )[0].style.left;
    var y=$( "#div_1" )[0].style.top;
    x = parseInt(x);
    y = parseInt(y);
    $( "#path_1" ).attr("transform", "translate("+x+","+y+")");
} 
```

它依赖`pointer-events:none`于 div，因此不适用于 Opera，但在其他新浏览器中可以。有[一个 hack](http://lea.verou.me/css3-secrets/#pointer-events-workaround)可以允许`pointer-events:none`，但最好等待所有最新的浏览器本机允许它。在问题的示例中，指针事件不是问题，因为红色矩形没有完全低于 div。

[Jsfiddle 示例](http://jsfiddle.net/WuTec/)可以扩展到例如。如果您想使用 jQuery Draggable 插件来拖动 SVG 的图形对象并希望使用 div 作为选择矩形，请为 SVG 元素制作选择矩形功能。（选择矩形的其他可能解决方案是使用两个 SVG 根元素，一个用于选择矩形，一个用于实际形状。）

并且[使用 setTimeout()](http://jsfiddle.net/WuTec/1/)我们可以强制在移动 div 时始终移动 SVG 路径。

# ms-access - Access VBA如何选择最后添加的记录？

> ID：12864551
> 
> 赞同：1
> 
> 时间：2012-10-12T17:53:34.610
> 
> 标签：ms-access, vba

我有一个带有子表单的访问表单。子表单有一个数据表。主窗体有下拉框和按钮，可将记录添加到子窗体。这一切都很好（VBA代码）。现在我想突出显示最近插入的记录，就好像我单击了行标题一样。

我该怎么做呢？主窗体的组合框仍应在 tpoint 设置为正确的记录，那么如何突出显示子窗体记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:08:28.967

使您的目标记录成为子表单的当前记录。然后使用`RunCommand`“选择”它......这也将突出显示记录。

```
DoCmd.RunCommand acCmdSelectRecord 
```

似乎您的问题正在演变为“*如何使最后添加的记录成为当前记录*”。

如果最后添加的记录仍然是当前记录，那么您已经在那里，所以没问题。

如果用户在添加最后一条记录后导航到另一条记录，则至少有两种方法可以返回到该记录。

1.  `DoCmd.GoToRecord`
2.  在记录集克隆上使用查找方法。

选择最适合您情况的方法。如果您的组合框的绑定值是最后添加的行的数字主键，您可以尝试第二个建议，方法是用您正在使用的实际名称替换`pkey_field`,`YourComboNameHere`和。`SubformControl`

```
Private Sub FindLastRecordAdded()
    Dim rst As DAO.Recordset
    Dim strCriteria As String

    strCriteria = "[pkey_field] =" & Me.YourComboNameHere

    Set rst = Me.SubformControl.Form.RecordsetClone
    rst.FindFirst strCriteria
    If rst.NoMatch Then
        MsgBox "Oops. This shouldn't happen.", vbInformation
    Else
        Me.SubformControl.Form.Bookmark = rst.Bookmark
    End If

    Set rst = Nothing
End Sub 
```

# android - 意图有问题

> ID：12864552
> 
> 赞同：0
> 
> 时间：2012-10-12T17:53:36.140
> 
> 标签：android, bluetooth

我试图让我的android在注册蓝牙连接时启动一个活动，我拥有所有适当的权限，并且这段代码运行良好，直到它需要启动意图。之后它崩溃了。现在我没有一个logcat，因为它在我的手机上进行实时测试。

那么，让我们再玩一个“我该如何解决这个问题？”的游戏。

```
public class detectService extends Service {

public void onCreate() {
    IntentFilter filter1 = new IntentFilter(
            BluetoothDevice.ACTION_ACL_CONNECTED);
    this.registerReceiver(mReceiver, filter1);
    Toast.makeText(this, "Starting Service!", Toast.LENGTH_LONG).show();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return START_STICKY;
}

// The BroadcastReceiver that listens for bluetooth broadcasts
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        BluetoothAdapter device = intent
                .getParcelableExtra(BluetoothDevice.ACTION_ACL_CONNECTED);

        if (device.equals(action)) {
            // Device is now connected
            // Start Second Activity
            Intent otherIntent = new Intent(detectService.this,
                    otherClass.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(otherIntent);
        }
    };
};
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

感谢这里有人的帮助，我的手机上现在有了 logcat！这是错误的副本：

```
E/AndroidRuntime(  567): FATAL EXCEPTION: main
E/AndroidRuntime(  567): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.bluetooth.device.action.ACL_CONNECTED (has extras) } in lionsimages.com.bluetoothalert.detectService$1@4051ad68
E/AndroidRuntime(  567):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
E/AndroidRuntime(  567):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(  567):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(  567):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(  567):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(  567):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  567):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(  567):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
E/AndroidRuntime(  567):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
E/AndroidRuntime(  567):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  567): Caused by: java.lang.NullPointerException
E/AndroidRuntime(  567):    at lionsimages.com.bluetoothalert.detectService$1.onReceive(detectService.java:39)
E/AndroidRuntime(  567):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
E/AndroidRuntime(  567):    ... 9 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:49:17.860

试试这个：

```
 if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) {
            // Device is now connected
            // Do your stuff here
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:01:30.697

在你的`onReceive()`方法中，你这样做：

```
 BluetoothAdapter device = intent
            .getParcelableExtra(BluetoothDevice.ACTION_ACL_CONNECTED); 
```

但是在这个广播中没有那个名字的额外内容`Intent`。如果你想从那里获取设备，`Intent`那么你需要这个：

```
 BluetoothDevice device = intent
            .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE); 
```

但是，如果我查看您的代码，您似乎只想检查 Intent`ACTION`是否为`ACTION_ACL_CONNECTED`. 如果您只想这样做，请改用以下代码：

```
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();

    if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) {
        // Device is now connected
        // Start Second Activity
        Intent otherIntent = new Intent(detectService.this,
                otherClass.class);
        // NOTE: I changed "intent" to "otherIntent" in the following line as well!
        otherIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(otherIntent);
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:00:21.123

使用此代码，在某些情况下，广播接收器代码的成功完成和运行也需要它。

```
 if( "android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) 
      { 
                  //You broad cast activity code ...
       } 
```

# php - SELECT COUNT() 与 mysql_num_rows();

> ID：12864557
> 
> 赞同：12
> 
> 时间：2012-10-12T17:54:13.917
> 
> 标签：php, mysql, select, optimization, large-data

我有一张大表（60+）数百万条记录。

我正在使用 PHP 脚本浏览此表。

PHP 脚本（带分页）加载速度非常快，因为：

表引擎是 InnoDB 因此`SELECT COUNT()`非常慢并且`mysql_num_rows()`不是一个选项，所以我将总行数（我用来生成分页的数字）保存在一个单独的表中（我更新这个记录和`total_rows=total_rows-1`期间`total_rows=total_rows1+1`）。`DELETE``INSERT`

但问题是如何处理搜索结果的分页？

现在我用两个步骤来做这件事：

1.

```
$condition = " fname='rinchik' ";
$result = "SELECT * FROM my_large_table WHERE" . $condition; 
```

在这里，我从数据库中获得了所有搜索结果。

2\. 现在我需要计算这些结果来创建分页。我正在这样做：

```
$condition; <- we already have this from the step 1
$result_count = "SELECT COUNT(id) FROM my_large_table WHERE" . $condition; 
```

而且有点慢。

如果我这样做（只需一步）会更好吗？：

```
$condition = " fname='rinchik' ";
$result = "SELECT * FROM my_large_table WHERE" . $condition;
$result_count = mysql_num_rows($result); 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-12T17:58:38.877

使用`COUNT`，服务器内部会以不同的方式处理请求。

这样做`COUNT`时，服务器只会分配内存来存储计数的结果。

使用`mysql_num_rows`时，服务器将处理整个结果集，为所有结果分配内存，并将服务器置于获取模式，这涉及到很多不同的细节，例如锁定。

把它想象成下面的伪场景：

**`SELECT COUNT(*)`**

> 嗨，鲍勃，教室里有多少人？

**`mysql_num_rows`**

> 嘿，鲍勃，把教室里的所有人都送到我这里来，……我会自己数数来得到人数

总之，在使用时，`mysql_num_rows`您将所有记录传输给客户端，而客户端将不得不自己计算计数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:55:52.903

使用 COUNT(id)。它只返回计数，使用`mysql_num_rows($result);`php 从 mysql 获取所有数据并计算找到的结果数。

最后，不要使用 mysql_* 函数。

> 建议的替代品
> 
> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> mysqli_stmt_num_rows() PDOStatement::rowCount()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-22T11:13:57.243

在`inoDB`引擎和 mysql 5.5 中测试。

有`id`索引，我认为这非常快

```
$q = "SELECT count(`id`) FROM table where 1";
$rows = mysql_query($q);
$count = mysql_fetch_array($rows);
echo $count[0]; 
```

如果你想要更多，你必须使用一个索引`id`或者你想要选择的任何东西。

**缓存是另一种解决方案，您可以在几毫秒内**从一组记录中进行选择！

# sql - SQL Server while 循环联合所有

> ID：12864558
> 
> 赞同：9
> 
> 时间：2012-10-12T17:54:15.020
> 
> 标签：sql, sql-server

我正在尝试在下面执行此代码。这是我必须编写的实际代码的简化示例，所以我知道以这种方式循环是没有用的。但是，我需要在 SQL Server 中查看和联合选择语句。当我尝试运行此查询时，出现错误：

> *关键字“END”附近的语法不正确。*

有任何想法吗？

```
 DECLARE @position INT
    SET @position = -1

    WHILE(@position < 1)
    BEGIN
    SELECT * FROM mytable

    UNION ALL
    END
 SELECT * FROM mytable 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T17:59:43.483

我不会尝试使用`UNION`临时表或临时表变量来合并结果集

```
CREATE TABLE #Temp
(
  <COLUMNS>
)

 DECLARE @position INT
 SET @position = -1

 WHILE(@position < 1)
 BEGIN

    INSERT INTO #Temp (<COLUMNS>)
    SELECT * FROM mytable

    SET @position = @position + 1

 END

 SELECT * FROM #Temp 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T17:55:51.290

这个查询没有意义。要使用`UNION`，您需要从第二个表中进行选择。

SQL Server 本质上看到：

```
SELECT * FROM mytable      

UNION ALL 
```

之后没有第二张桌子`UNION`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:04:47.513

这种方式摆脱了 UNION 语句并完全避免了循环：

```
DECLARE @position INT
SET @position = 5

DECLARE @n TABLE (n int)

INSERT INTO @n 
SELECT ROW_NUMBER() OVER (ORDER BY name) AS x
FROM syscolumns

SELECT t.* 
FROM dbo.Table t
    CROSS JOIN @n n 
WHERE n <= @position 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:58:16.717

您需要第二个设置为 UNION。while 循环不会保留选定的集合并在下一次知道它。您要完成的基本上是从 mytable 中选择所有数据，然后在同一组中再次将其合并... n 次。这真的没有意义。请记住，SQL 是基于设置的，因此 select * From mytable 将选择其中的每条记录。您也从不说明您要完成的工作。

# javascript - 使用 Javascript 或 JQuery 删除 Chrome 自动填充文本 onclick

> ID：12864565
> 
> 赞同：1
> 
> 时间：2012-10-12T17:55:07.840
> 
> 标签：javascript, jquery, autofill

我无法删除 Chrome 使用 JQuery 自动填充生成的文本。到目前为止，我一直在这样做。

```
$(document).ready(function () {
    $(".link").click(function () {        
        $("#textbox").val("");
        return false;
    }); 
```

这可以很好地删除文本，除非它是自动填充文本。我希望能够在不完全禁用自动完成的情况下删除此文本，即我不想使用自动完成=“关闭”。

现在我正在使用 JQuery，但我并不反对只使用纯 Javascript。

PS 这些文本框是 ASP.NET MVC3 Html.TextBoxFor 的。我不知道这是否有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:00:11.207

也许您可以`autocomplete="off"`在元素或表单本身上使用该属性。此处的相关问题[是否有 W3C 有效的方法来禁用 HTML 表单中的自动完成功能？](https://stackoverflow.com/questions/582244/is-there-a-w3c-valid-way-to-disable-autocomplete-in-a-html-form)

# iphone - 按下按钮时更改 UIButton 图像

> ID：12864571
> 
> 赞同：4
> 
> 时间：2012-10-12T17:55:33.133
> 
> 标签：iphone, objective-c, xcode

我试图在按下按钮的那一刻更改图像按钮。发布后，我想回到原来的状态。

我在这里阅读了一些帖子，但它不起作用。

是否可以在没有编程的情况下在 GUI 中完成？

我试过这个：

```
-(IBAction) toggleUIButtonImage:(id)sender{
     if ([sender isSelected]) {
         [sender setImage:unselectedImage forState:UIControlStateNormal];
         [sender setSelected:NO];
     }else {
         [sender setImage:selectedImage forState:UIControlStateSelected];
         [sender setSelected:YES];
      }
 } 
```

但是我应该将什么样的发送者事件关联到函数 toggleUIButtonImage ？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T19:18:24.447

您可以在界面生成器中通过为每个按钮状态配置提供不同的设置来完成此操作：

![可用状态为：默认、选择和禁用](../Images/1604b4bec01d37258a6ed7dd20c29f9a.png)

或者，您也可以使用 'UIButton' setImage:forState 方法更改代码中按钮的“设置”。

```
 [myButton setImage:highlightedImage forState:UIControlStateHighlighted]; 
```

通常，您应该通过如上所述“配置”按钮来完成此操作，而不是手动更改按钮的子视图作为对用户交互的响应。它对您不起作用的原因是 UIButton 固有的隐藏行为。您手动更改按钮的子视图作为对用户交互的响应，但您的更改将更改回按钮设置中定义的内容（根据按钮的状态）。所以看起来你的代码根本没有做任何事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T18:06:13.933

在`ViewDidLoad`方法中

设置属性

```
[[button setImage:[UIImage ImageNamed:@"unselectedImage.png"] forState: UIControlStateNormal]; 
[[button setImage:[UIImage ImageNamed:@"selectedImage.png"] forState: UIControlStateHighlighted ]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T18:03:53.387

这可以通过 Interface Builder 完成，无需代码。

在 IB 中选择您的按钮，转到右侧边栏，将类型更改为自定义，确保状态配置为默认，然后在背景图像文本字段中输入“常规图像”参考的名称。

然后将状态配置更改为突出显示，并在背景图像文本字段中输入“按下图像”参考的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T18:02:30.613

在 IB 中，您可以将图像设置为按钮的突出显示（未选择）状态。那应该这样做。

查看 Utilities 窗格的 Button 部分，然后从 State Config 下拉菜单中选择 Highlighted。

# c# - 打开word模板并另存为

> ID：12864572
> 
> 赞同：0
> 
> 时间：2012-10-12T17:55:34.603
> 
> 标签：c#, ms-word

我正在使用 C# 从 CSV 文件中读取数据并更新 word 文档中书签的值。我让它工作，但是，我希望它打开模板文件，更新它并以另一个名称保存它。

我使用了这段代码：

```
_Application word = new Application();
Document doc = word.Documents.Open(@"D:\Documents\Bookmarked.dot");
doc.Bookmarks["mybookmark"].Select();
word.Selection.TypeText("Replacement text");
((_Application)word).Quit(WdSaveOptions.wdSaveChanges, WdOriginalFormat.wdOriginalDocumentFormat); 
```

从这里：[http ://social.msdn.microsoft.com/Forums/en-HK/csharpgeneral/thread/32b25cfd-cc5b-4e9f-bcbf-0dbbd49bca02](http://social.msdn.microsoft.com/Forums/en-HK/csharpgeneral/thread/32b25cfd-cc5b-4e9f-bcbf-0dbbd49bca02)

我只是不知道如何以另一个名称保存它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:11:17.577

```
object paramMissing = Type.Missing;
object fileFormat = wdSaveFormat.[whatever you want]
object filenameOut = @"c:\somefile.extension";

doc.SaveAs(ref filenameOut, ref fileFormat,
              ref paramMissing, ref paramMissing, ref paramMissing, ref paramMissing,
              ref paramMissing, ref paramMissing, ref paramMissing, ref paramMissing, 
              ref paramMissing, ref paramMissing, ref paramMissing, ref paramMissing, 
              ref paramMissing, ref paramMissing); 
```

这里有一些信息和示例：

[http://msdn.microsoft.com/en-us/library/bb412305.aspx](http://msdn.microsoft.com/en-us/library/bb412305.aspx)

# asp.net-mvc - 在 HttpApplication 构造函数上使用 Application_Start？

> ID：12864575
> 
> 赞同：3
> 
> 时间：2012-10-12T17:55:39.013
> 
> 标签：asp.net-mvc

我有一个正在处理的`ASP.NET MVC 4.0`项目，我注意到默认情况下，`global.asax`文件看起来像这样......

```
namespace Application1.Web {
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801
    public class MvcApplication : System.Web.HttpApplication {
        protected void Application_Start() {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
        }
    }
} 
```

有什么特别的原因我想使用`Application_Start`而不是仅仅把它放在构造函数中？我在不知不觉中已经做到了这两种方式，并且从未遇到过任何问题。

这个问题不是为了解决问题，只是为了获取我缺乏的信息。如果是多余的，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:05:30.910

其他人可能能够提供更深入的答案，但是，某些方法，例如`Begin_Request`将根据请求执行。 `Session_Start`将在每个用户会话开始时执行。

但是，`Application_Start`它只执行一次，因此它是线程安全的。如果您要将这些调用移至构造函数，则将为每个请求执行这些方法，因为将为每个请求实例化该对象。

这是[ASP.NET 应用程序生命周期页面](http://msdn.microsoft.com/en-us/library/ms178473.aspx)的片段：

> 初始化所有核心应用程序对象后，通过创建 HttpApplication 类的实例来启动应用程序。**如果应用程序有一个 Global.asax 文件，ASP.NET 会创建一个从 HttpApplication 类派生的 Global.asax 类的实例，并使用派生类来表示应用程序**。

# javascript - Javascript prompt() - 取消按钮以终止函数

> ID：12864582
> 
> 赞同：44
> 
> 时间：2012-10-12T17:55:55.903
> 
> 标签：javascript, prompt

我正在调用 Javascript`window.prompt()`并提示用户提交一个变量，我将其与另一个变量进行比较（一个非常基本的密码保护）。该函数效果很好，但是，如果您单击`"cancel"`窗口`prompt()`，该函数不会简单地终止，而是将变量与空字符串进行比较（用户选择不通过按“取消”来提交）导致函数继续该`else{ }`部分。

我的问题是，如何在按下取消后终止该功能？我只需要知道如何定位取消按钮。

通常我只会在按钮`.stop()`上调用 a `click()`，但我不知道如何定位提示窗口的取消按钮。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-12T18:00:15.300

[`prompt`](https://developer.mozilla.org/en-US/docs/DOM/window.prompt)`OK`如果用户按下（`''`没有提交值），则返回一个字符串。如果用户按下`Cancel`，`null`则返回。您需要做的就是检查该值是否为`null`：

```
function doSomething() {
    var input;
    input = prompt('Do something?');
    if (input === null) {
        return; //break out of the function early
    }
    switch (input) {
    case 'fun':
        doFun();
        break;
    case 'boring':
        beBoring();
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T17:59:09.110

您应该明确检查`null`作为返回值（使用三等号）以及`return`何时是结果。

```
var result = prompt("OK?");
if (result === null) {
    return;
} 
```

这使您可以与空字符串区分开来，空字符串是用户单击`OK`但未输入内容时返回的内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-22T04:47:14.440

处理“提示”结果的一个重大问题是，当单击“取消”时，Safari（至少版本 9.1.2）返回“”而不是 null。这意味着： if(result==null) return; 不起作用，并且您无法区分空字符串的输入和取消。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T18:15:31.410

你能检查一下吗

```
if (prompt_responce == null) 
```

告诉它是否关闭。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-20T07:36:48.557

尝试：

```
message = prompt("Enter text");
if(message == "null" || message == null || message == "" ); 
```

这对我有用。

# android - 如何用 SherlockFragments 做到这一点？

> ID：12864583
> 
> 赞同：1
> 
> 时间：2012-10-12T17:55:55.553
> 
> 标签：android, actionbarsherlock, fragment

我正在尝试将使用片段的应用程序转换为 Sherlock 并遇到此声明。但是我在 Sherlock 中找不到任何 show 的实现。

我怎样才能在 Sherlock 中做到这一点？

```
fragment.show(getSupportFragmentManager(),"dialog"); 
```

和这个：

```
fragment.dismissAllowingStateLoss(); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:36:39.643

您现在可能已经解决了这个问题，但是对于偶然发现这个线程的任何人：您只需要继承 Activity 和 Fragment 的 Sherlock 对应项，即：SherlockFragmentActivity 和 SherlockDialogFragment。

一旦你这样做了，你就可以使用这两种方法。

# svn - SVN 如何在文件历史记录中搜索字符串？

> ID：12864585
> 
> 赞同：3
> 
> 时间：2012-10-12T17:55:59.933
> 
> 标签：svn, tortoisesvn, ankhsvn

> **可能重复：**
> [搜索颠覆历史（全文）](https://stackoverflow.com/questions/44176/searching-subversion-history-full-text)

我正在使用 TortoiseSVN 和 AnkhSVN。我有一个提交了 > 100 更改的文件。我需要找出在哪个版本中删除了某些代码。我只知道唯一的方法名称。如何在不挖掘整个文件历史记录的情况下找到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:58:28.260

你试过SVN责备来解决你的问题吗？另请参阅[stackoverflow 上的这个问题](https://stackoverflow.com/questions/44176/searching-subversion-history-full-text)。

# javascript - 使图像成为上传功能而不使其成为输入

> ID：12864590
> 
> 赞同：0
> 
> 时间：2012-10-12T17:56:31.940
> 
> 标签：javascript, jquery, file-upload

我的处境很棘手。我正在尝试将图像设置为上传按钮，但我根本无法更改该图像......但是，当您单击图像时，我会调用一个 JS 函数，我可以将任何内容放入其中。

如何仅通过此功能启动浏览器上传？通常我只会将图像作为输入，但就像我说的那样，在这种情况下我不能这样做。

有没有人可以分享一个例子？

这是我的函数（称为图像的 onclick）：

```
 function fnImport(elem){
    var $input;

    $input = $input || $("<input type='file'>");
    $('#Import').append($input);
    $input.click();
    $input.hide();

    } 
```

但是，当我运行它时，第一次单击它会添加按钮，然后第二次它充当上传（并且不会隐藏在其中）。

另外，我的控制台也很奇怪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:08:30.650

像这样的事情可能会为你激发一些想法：http: [//jsfiddle.net/NKekN/2/](http://jsfiddle.net/NKekN/2/)

# c# - 如何获取从 WinRT/Metro 应用程序中的 StreamSocket.InputStream.ReadAsync 读取的字节数？

> ID：12864593
> 
> 赞同：2
> 
> 时间：2012-10-12T17:57:02.043
> 
> 标签：c#, .net, windows, windows-runtime, windows-store

我正在 WinRT/Metro 应用程序中使用 StreamSocket.InputStream.ReadAsync() 进行字节读取，并且需要知道实际读取了多少字节。此读取被视为**同步读取**，并且**必须保持同步读取。**

这是相关的代码片段：

```
var receivedTask = this._socket.InputStream.ReadAsync(buffer.AsBuffer(), length, Windows.Storage.Streams.InputStreamOptions.None);
receivedTask.AsTask().Start();
receivedTask.AsTask().Wait(timeout);
// Need code here to get the number of bytes received

if (receivedBytes > 0)
{
    receivedTotal += receivedBytes;
    continue;
}
else
{
    // Socket Closed
} 
```

# c# - TransactionScope 中的 EntityFramework CodeFirst 和 EDMX

> ID：12864594
> 
> 赞同：1
> 
> 时间：2012-10-12T17:57:13.240
> 
> 标签：c#, entity-framework, ef-code-first, msdtc

我需要在一个应用程序中合并

1.  编译前从 DB 生成的代码到 EDMX 文件
2.  应用程序本身在运行时生成和编译的代码，其中生成的代码使用 CodeFirst 访问数据库。

备注：1.和2.中的代码有不同的DbContexts，访问同一个数据库，但不同的表。

看起来，当我在不同的事务范围内使用类型 1\. 和 2\. 的实例时，一切正常。但是当我尝试在一个事务范围内一起使用它们时，我得到了错误（如果首先调用 EDMX）

```
System.Reflection.TargetInvocationException: Exception has been thrown by the ta
rget of an invocation. ---> System.Data.ProviderIncompatibleException: An error
occurred while getting provider information from the database. This can be cause
d by Entity Framework using an incorrect connection string. Check the inner exce
ptions for details and ensure that the connection string is correct. ---> System
.Data.ProviderIncompatibleException: **The provider did not return a ProviderManif
estToken string.** ---> System.Transactions.TransactionException: **The operation is
 not valid for the state of the transaction.** 
```

和错误（如果首先使用 CodeFirst）

```
System.Data.MetadataException: Schema specified is not valid. Errors:
(0,0) : error 0175: **The specified store provider cannot be found in the configur
ation, or is not valid.**
   at System.Data.Metadata.Edm.StoreItemCollection.Loader.ThrowOnNonWarningErrors() 
```

为了使我的情况更加复杂，我必须添加以下内容：描述的行为只有在数据库位于远程服务器上时才有。如果我使用本地数据库，一切看起来都很好。我的怀疑是分布式事务协调器可以发挥它的作用......

主要问题：是否可以在一个 TransactionScope 中结合 EDMX 和 CodeFirst。如果是，那怎么办？

任何帮助，将不胜感激。米洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:00:29.650

我首先使用代码保存到两个不同的数据库，但出现错误连接字符串错误，所以我这样做了，它成功了....

```
try
{
    using (TransactionScope ts = new TransactionScope(TransactionScopeOption.RequiresNew))
    {
        MegaBotExtractorDBContext2 db = new MegaBotExtractorDBContext2();
        MegaBotExtractorDBContext db1 = new MegaBotExtractorDBContext();
        FullUri newUri = new FullUri();
        HostUri NewHostUri = new HostUri { HostUriName = "google10.com" };
        db1.HostUris.Add(NewHostUri);
        db1.SaveChanges();

        using (TransactionScope ts2 = new TransactionScope(TransactionScopeOption.RequiresNew))
        {
            db.FullUris.Add(newUri);
            db.SaveChanges();
            ts2.Complete();
            ts.Complete();
        }
    }
}
catch { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:02:22.033

CodeFirst 基于您的类创建 EDMX，并且无法加载现有的 edmx 文件。但是，您可以从您的数据库生成类（例如使用 EF Power Tools）并配置您的模型，以便您的 CodeFirst 应用程序生成的 EDMX 与您要加载的相同。您可以将 TransactionScope 与实体框架一起使用。您收到的错误消息与事务范围无关，而是与缺少或错误使用的提供程序有关。

# android - 没有显示如果用另一个替换当前片段

> ID：12864596
> 
> 赞同：0
> 
> 时间：2012-10-12T17:57:14.867
> 
> 标签：android, android-layout

我有这样的布局：

**frame_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/items"
android:layout_width="match_parent"
android:layout_height="match_parent">
</FrameLayout> 
```

接下来，在 FragmentActivity 我做：

```
setContentView(R.layout.fragment_layout);
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
String tag = MyListFragment.class.getName();
MyListFragment fragment = (MyListFragment)
            getSupportFragmentManager().findFragmentByTag(tag);
 if (fragment == null) {
    fragment = new MyListFragment();
    ft.add(R.id.items, fragment, tag);
 }
 else {
    ft.replace(R.id.items, fragment, tag);
 }
 ft.addToBackStack(null);
 ft.commit(); 
```

当我调用此代码一次时，片段完美显示！但是，当它调用两次时，我看不到任何内容！经过一番调查，我发现问题是由这个引起的：

```
 setContentView(R.layout.fragment_layout); 
```

例如，当它被调用一次时，片段内容就完美地显示出来了！但是我需要调用`setContentView`很多次才能显示另一个片段。

哪里错了？

PS 可以`MyListFragment`硬编码成 XML，但这不适合我，因为我需要用其他片段替换布局内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:39:05.390

由于没有人回答，我找到了另一个解决方案：保留每一帧的布局并显示/隐藏它们。

我就是这样做的......主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<FrameLayout
    android:id="@+id/container1"
    android:visibility="gone"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</FrameLayout>

<FrameLayout
    android:id="@+id/container2"
 android:visibility="gone"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</FrameLayout> 
```

这就是我在片段活动中显示片段2（属于容器2）的方式：

```
findViewById(R.id.container1).setVisibility(View.GONE);
findViewById(R.id.container2).setVisibility(View.VISIBLE);

FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
String tag = MyFragment.class.getName();
Fragment fragment = (Fragment)getSupportFragmentManager().findFragmentByTag(tag);
if (fragment == null) {
   fragment = new MyFragment();
   ft.add(R.id.container2, fragment, tag);
}

ft.addToBackStack(null);
ft.commit(); 
```

# vb6 - VB6：使用 Acrobat 类型库在 VB6 中合并 PDF

> ID：12864597
> 
> 赞同：2
> 
> 时间：2012-10-12T17:57:14.557
> 
> 标签：vb6, adobe, acrobat

我继承了一个 VB6 程序，它使用 Crystal Reports 8.5 来运行报表，然后将输出导出为 PDF。然后，它使用 Adob​​e Acrobat 5.0 类型库将生成的 PDF 合并为单个 PDF 文档。我们的问题是我们需要升级 Acrobat 5.0 类型库，但最新版本的 Acrobat 似乎没有提供适用于 VB6 的类型库。有人知道 VB6 支持的最新版本的 Acrobat 吗？另外，是否有人对如何在不将整个应用程序升级到.Net 的情况下升级它有任何建议？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:17:11.797

我会掏出[钱来 pdftk](http://www.pdflabs.com/docs/install-pdftk/)。手册页中的示例：

> 将两个或多个 PDF 合并到一个新文档中
> 
> `pdftk 1.pdf 2.pdf 3.pdf cat output 123.pdf`

请注意，如果您的应用是分布式的且非 GPL，则您需要为其提供商业许可，但目前只需 24 美元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-01T21:45:25.027

15 年前我也有同样的要求，并在 vb6 中创建了一个 mod 来做到这一点：

modMergePDF

公共功能 MergePDFFiles

我最近更新了处理 Acrobat 10.0 类型库的代码，因此您需要安装截至 2020 年 8 月 1 日的最新版本 Acrobat DC Pro，以...

1.  使用下面的代码
2.  使用编译好的 MergePDF.exe

此外，该模组使用许多 PDF 的文件名添加书签，并使用清理代码来删除一些难看的文件名（如果您需要将文件名清理为书签名称，您可能需要详细说明），进入单个pdf文件。

还包括一个生成批处理文件代码的功能：

公共函数 BuildBatchFileCode

在命令行中调用 MergePDF.exe，该命令行由许多 pdf 目录和单个 pdf 合并文件目录和文件名组成。您还可以传入一个标志以对 CaseSensitive 进行排序（任何大写的文件名都将按小写排序），并且您可以传入另一个标志以维护书签名称中的 .pdf 扩展名。

在 git 上找到 MergePDF.exe 以及此处的所有支持代码：

[https://github.com/Brad-Skidmore/MergePDF](https://github.com/Brad-Skidmore/MergePDF)

注意：错误处理参考 goUtil.utErrorLog 你也可以在 GitHub 上找到，或者你可以用你自己的错误处理替换它。这是 Mod 代码：modMergePDF

```
'  http://www.xlsure.com 2020.07.30
' *********************************************************************
'  You are free to use this code within your own applications, but you
'  are expressly forbidden from selling or otherwise distributing this
'  source code without prior written consent.
'  Merge PDF Files - modMergePDF
' *********************************************************************

Option Explicit
'PDF documents must be declared in general declaration space and not local!
Private moMainDoc As Acrobat.AcroPDDoc
Private moTempDoc As Acrobat.AcroPDDoc

Private Property Get msClassName() As String
    msClassName = "modMergePDF"
End Property

Public Function MergePDFFiles(psRawPDFFilesDir As String, _
                                psSinglePDFOutputDir As String, _
                                psSinglePDFOutputName As String, _
                                Optional ByVal pbRemovePdfExtFromBookMark As Boolean = True, _
                                Optional pbCaseSensitiveSort As Boolean = False, _
                                Optional ByVal pbShowError As Boolean = False) As Boolean
    On Error GoTo EH

    Dim bFirstDoc As Boolean
    Dim sRawPDFFilesDir As String
    Dim sSinglePDFOutputDir As String
    Dim sSinglePDFOutputName As String
    Dim saryFileSort() As String
    Dim sBMName As String
    'Track pos of things
    Dim lBMPageNo As Long
    Dim lPos As Long
    Dim lFile As Long
    Dim lInsertPageAfter As Long
    Dim lNumPages As Long
    Dim lRet As Long
    'Need to use Adobe internal Java Object
    'in order to Add Book marks
    Dim oJSO As Object 'JavaScript Object
    Dim oBookMarkRoot As Object
    'File I/O
    Dim oFolder As Scripting.Folder
    Dim oFile As Scripting.File
    Dim oFSO As Scripting.FileSystemObject

    sRawPDFFilesDir = psRawPDFFilesDir
    'ensure backslash for the 2 b merged PDF files directory
    If StrComp(Right(sRawPDFFilesDir, 1), "\", vbBinaryCompare) <> 0 Then
        sRawPDFFilesDir = sRawPDFFilesDir & "\"
        psRawPDFFilesDir = sRawPDFFilesDir
    End If

    sSinglePDFOutputDir = psSinglePDFOutputDir
    sSinglePDFOutputName = psSinglePDFOutputName

    'ensure .pdf for the PDFOutputName (If it's CAP .PDF should be okay)
    If StrComp(Right(sSinglePDFOutputName, 4), ".pdf", vbTextCompare) <> 0 Then
        sSinglePDFOutputName = sSinglePDFOutputName & ".pdf"
        psSinglePDFOutputName = sSinglePDFOutputName
    End If

    Set oFSO = New Scripting.FileSystemObject

    Set oFolder = oFSO.GetFolder(sRawPDFFilesDir)

    bFirstDoc = True

    If oFolder.Files.Count = 0 Then
        Exit Function
    End If

    'Because the FSO folder files collection does not allow for
    'Native sorting, need to plug all the files into an array and sort that motha
    ReDim saryFileSort(1 To oFolder.Files.Count)
    lFile = 0
    For Each oFile In oFolder.Files
        lFile = lFile + 1
        saryFileSort(lFile) = oFile.Name
    Next

    'Once they is all in der sor the array
    'Sort is Case Sensitive
    If pbCaseSensitiveSort Then
        goUtil.utBubbleSort saryFileSort
    End If

    For lFile = 1 To UBound(saryFileSort, 1)
        If LCase(Right(saryFileSort(lFile), 4)) = ".pdf" Then
            If bFirstDoc Then
                bFirstDoc = False
                Set moMainDoc = CreateObject("AcroExch.PDDoc") 'New AcroPDDoc
                lRet = moMainDoc.Open(sRawPDFFilesDir & saryFileSort(lFile))
                Set oJSO = moMainDoc.GetJSObject
                Set oBookMarkRoot = oJSO.BookMarkRoot
                sBMName = saryFileSort(lFile)
                lPos = InStr(1, sBMName, "_{", vbBinaryCompare)
                If lPos > 0 Then
                    sBMName = left(sBMName, lPos - 1) & ".pdf"
                End If
                If pbRemovePdfExtFromBookMark Then
                    sBMName = Replace(sBMName, ".pdf", vbNullString, , , vbTextCompare)
                End If
                lRet = oBookMarkRoot.CreateChild(sBMName, "this.pageNum =0", lFile - 1)
            Else
                Set moTempDoc = CreateObject("AcroExch.PDDoc") 'New AcroPDDoc
                lRet = moTempDoc.Open(sRawPDFFilesDir & saryFileSort(lFile))
                'get the Book mark page number before the actual instert of new pages
                lBMPageNo = moMainDoc.GetNumPages
                lInsertPageAfter = lBMPageNo - 1
                lNumPages = moTempDoc.GetNumPages
                lRet = moMainDoc.InsertPages(lInsertPageAfter, moTempDoc, 0, lNumPages, 0)
                moTempDoc.Close
                If lRet = 0 Then
                    sBMName = saryFileSort(lFile)
                    lPos = InStr(1, sBMName, "_{", vbBinaryCompare)
                    If lPos > 0 Then
                        sBMName = left(sBMName, lPos - 1) & ".pdf"
                    End If
                    'Need to copy the errored document over to be included in the enitre document
                    goUtil.utCopyFile sRawPDFFilesDir & saryFileSort(lFile), sSinglePDFOutputDir & "\" & sBMName
                    sBMName = "PDF Insert Page Error_" & sBMName
                Else
                    sBMName = saryFileSort(lFile)
                    lPos = InStr(1, sBMName, "_{", vbBinaryCompare)
                    If lPos > 0 Then
                        sBMName = left(sBMName, lPos - 1) & ".pdf"
                    End If
                End If
                If pbRemovePdfExtFromBookMark Then
                    sBMName = Replace(sBMName, ".pdf", vbNullString, , , vbTextCompare)
                End If
                lRet = oBookMarkRoot.CreateChild(sBMName, "this.pageNum =" & lBMPageNo, lFile - 1)
            End If
        End If
    Next

    lRet = moMainDoc.Save(1, sSinglePDFOutputDir & "\" & sSinglePDFOutputName)
    moMainDoc.Close

    MergePDFFiles = True

CLEAN_UP:
    Set oFolder = Nothing
    Set oFile = Nothing
    Set oFSO = Nothing
    Set oBookMarkRoot = Nothing
    Set oJSO = Nothing
    Set moMainDoc = Nothing
    Set moTempDoc = Nothing

    Exit Function
EH:
    goUtil.utErrorLog Err, App.EXEName, msClassName, "Public Function MergePDFFiles", pbShowError
End Function

Public Function BuildBatchFileCode(psRawPDFFilesDir As String, _
                                    psSinglePDFOutputDir As String, _
                                    psSinglePDFOutputName As String, _
                                    pbRemovePdfExtFromBookMark As Boolean, _
                                    pbCaseSensitiveSort As Boolean) As String

    On Error GoTo EH

    Dim sRawPDFFilesDir As String: sRawPDFFilesDir = psRawPDFFilesDir
    Dim sSinglePDFOutputDir As String: sSinglePDFOutputDir = psSinglePDFOutputDir
    Dim sSinglePDFOutputName As String: sSinglePDFOutputName = psSinglePDFOutputName
    Dim bRemovePdfExtFromBookMark As Boolean: bRemovePdfExtFromBookMark = pbRemovePdfExtFromBookMark

    'ensure backslash for the 2 b merged PDF files directory
    If StrComp(Right(sRawPDFFilesDir, 1), "\", vbBinaryCompare) <> 0 Then
        sRawPDFFilesDir = sRawPDFFilesDir & "\"
        psRawPDFFilesDir = sRawPDFFilesDir
    End If

    'ensure .pdf for the PDFOutputName (If it's CAP .PDF should be okay)
    If StrComp(Right(sSinglePDFOutputName, 3), ".pdf", vbTextCompare) <> 0 Then
        sSinglePDFOutputName = sSinglePDFOutputName & ".pdf"
        psSinglePDFOutputName = sSinglePDFOutputName
    End If

    Dim sCommandLine As String

    sCommandLine = "RawPDFFilesDir|" & sRawPDFFilesDir _
                    & "|SinglePDFOutputDir|" & sSinglePDFOutputDir _
                    & "|SinglePDFOutputName|" & sSinglePDFOutputName _
                    & "|RemovePdfExtFromBookMark|" & CStr(bRemovePdfExtFromBookMark) _
                    & "|CaseSensitiveSort|" & CStr(pbCaseSensitiveSort)

    BuildBatchFileCode = """" & App.Path & "\" & App.EXEName & ".exe"" """ & sCommandLine
    Exit Function
EH:
    goUtil.utErrorLog Err, App.EXEName, msClassName, "Public Function BuildBatchFileCode"
End Function 
```

# maven - maven 使用 release:branch 来分支选择模块

> ID：12864601
> 
> 赞同：1
> 
> 时间：2012-10-12T17:57:40.950
> 
> 标签：maven, branch, maven-release-plugin

我有一个像这样的Maven多模块项目

```
modA  
modB
modC
modD
  custom-pom.xml 
```

这里是 pom

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.xx.xx.correspondence</groupId>
  <artifactId>xxHudsonTP</artifactId>
  <version>1</version>
  <packaging>pom</packaging>

 <modules>
  <module>modA</module>
  <module>modB</module>
 </modules>
</project> 
```

现在，当我调用 release:branch 以在 custom-pom.xml 上创建一个分支时，就像这样

```
mvn release:branch -DbranchName=new-branch -f custom-pom.xml 
```

它最终创建了一个包含所有 4 个模块的分支。

有没有办法使用发布插件来确保只分支选定的模块，而不需要单独分支每个模块。？

任何其他maven插件..？

**已编辑** 这个问题的背景源于这样一个事实，即我正在使用的 svn repo 有大约 20 个不同的模块，它们需要生成 4 个不同的工件。我本可以轻松地将模块分组到子文件夹中，但是由于工件之间有一些模块是通用的，因此我没有过多考虑将它们分开。

我知道对所有模块进行分支是微不足道的，并且可能很容易管理，但是团队中的其他开发人员有这种处理太多的感觉来完成简单的任务，比如单行错误修复。希望有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:09:16.730

据我所知，没有解决方案可以回答您的问题。

您必须记住，多模块项目（聚合）意味着每个子模块共享相同的应用程序生命周期。这**确实**是模块和聚合的目的。

我看到了 2 种不同的解决方法。

## 你有 2 个真正不同的生命周期

在您的 4 个子模块中确实有 2 个组，比如说 group1：A 和 B，组 2，C 和 D。

将它们拆分为 2 个新项目：

```
Group1
|-- Project A
|   `-- pom.xml
|-- Project B
|   `-- pom.xml
`-- pom.xml

Group2
|-- Project C
|   `-- pom.xml
|-- Project D
|   `-- pom.xml
`-- pom.xml 
```

优点：您可以分别分支 1 组和 2 组。缺点：您将无法再对每个项目执行同时操作（在一个命令中）（例如 realeasing 或 builind 它们）

## 你真的有 1 个生命周期

大概就是这样。由于您对项目的底层架构非常了解，您可能只想分支 1 或 2 个子模块。因此，您不想处理太多的 conf/artifacts/time 构建……确实，所有这些原因可能会产生您看不到的间接影响。始终构建整个项目！

如果这是为了节省空间（但是大多数 SCM 允许您使用很少的空间进行分支，就像 Yorkw 说的那样），因为您的 SCM 只允许您获取子模块（也许两者都可以，比如 Clearcase）......对不起，没有解决方案。这是行家的方式，我认为这是好的方式。（好吧这有点煽动，但我真的相信我说的话）

**不要犹豫，向我们解释为什么你真的只想分支你的模块的一个子集。**如果还有其他原因，您可能有更准确的解决方案。

# c++ - feof 或 fscanf 错误

> ID：12864603
> 
> 赞同：0
> 
> 时间：2012-10-12T17:57:53.010
> 
> 标签：c++, scanf, feof

我正在做一个程序，我使用 Dev C++。运行我的程序时终止。在调试时它说**“分段错误”**。我不知道它是否会进入无限循环。我不知道问题是否`while(!feof(program))`出`fscanf(...)`在代码中。

任何人都可以帮助解决这个问题吗？请参阅下面的程序：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
#include<stdlib.h>
int main()
{
    fpos_t curDesStart,curDesEnd;
    fpos_t curDesLocBackup,curDes;
    char *label,*opc,*operands;
    char *curMacroName;
    FILE *namTab,*desTab,*temp,*program;
    namTab=fopen("namTab.txt","rw");
    desTab=fopen("desTab.txt","rw");
    temp=fopen("temp.txt","w");
    program=fopen("program.txt","r");
    while(!feof(program))
    {
        fscanf(program,"%[^\n]%[^\n]%[^\n]",label,opc,operands);

        if(!strcmp(label,"MACRO"))
        {
            fprintf(desTab,"%s%s%s\n",label,opc,operands);
            fgetpos(desTab,&curDesStart);
            strcpy(curMacroName,label);
            while(!strcmp(opc,"MEND"))
            {
                fscanf(program,"%s%s%s",label,opc,operands);
            }
            fprintf(desTab,"%s%s%s\n",label,opc,operands);
            fgetpos(desTab,&curDesEnd);

            fprintf(namTab,"%s%ld%ld\n",curMacroName,curDesStart,curDesEnd);

        }

        else
        {
            while(!feof(namTab))
            {
                fgetpos(desTab,&curDesLocBackup);
                fscanf(namTab,"%s%ld%ld",curMacroName,curDesStart,curDesEnd);
                if(!strcmp(curMacroName,label))
                {
                    fsetpos(desTab,&curDesStart);
                    fscanf(desTab,"%s%s%s\n",label,opc,operands);
                    fprintf(temp,".%s%s%s\n",label,opc,operands);

                    do{
                        fprintf(temp,"%s%s%s\n",label,opc,operands);
                        fgetpos(desTab,&curDes);
                    }while(curDes<=curDesEnd);

                    fsetpos(desTab,&curDesLocBackup);
                    fsetpos(namTab,0);
                }
                else
                {
                    fprintf(temp,"%s%s%s\n",label,opc,operands);
                }
            }

        }
    }
    fclose(program);
    fclose(namTab);
    fclose(desTab);
    fclose(temp);
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:14:42.613

这段代码有几个问题：

*   如果 program.txt 不存在，fopen() 将返回 NULL
*   fscanf(%[...]) 或 fscanf(%s) 需要一个指向 char 的指针，它必须为读取的文本和终止 nul 字节提供足够的空间（参见[http://pubs.opengroup.org/onlinepubs/007904975/函数/scanf.html](http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html) )
*   fscanf(%ld) 需要一个指向 long 的指针，而不是 long

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:23:15.047

您既没有为您的任何`char *`s 分配存储空间，也没有将它们初始化为指向其他东西。结果，您实际上是将随机数传递给`fscanf`，这会导致未定义的行为，其中程序崩溃是一种可能的化身。

# xaml - Metro App Style：如何更改 ComboBox 下拉箭头的颜色/删除/隐藏？

> ID：12864605
> 
> 赞同：0
> 
> 时间：2012-10-12T17:57:57.720
> 
> 标签：xaml, colors, combobox, windows-8, microsoft-metro

我有这个简单的组合框：

```
<StackPanel>
    <ComboBox Width="200" Background="Transparent" 
    Foreground="White" BorderBrush="Transparent" 
    UseLayoutRounding="True" SelectedIndex="0">
        <x:String>item 1</x:String>
        <x:String>item 2</x:String>
        <x:String>item 3</x:String>
    </ComboBox>    
</StackPanel> 
```

我想改变下拉箭头的颜色，有什么办法可以改变吗？或者如果可能的话，至少删除/隐藏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:24:58.320

发布作为将来参考的答案：

您可以通过打开在 Blend 中定义的 xaml 文件来编辑组合框样式，右键单击组合框，然后选择编辑模板 --> 编辑副本。从出现的屏幕中，您可以找到要更改的适当值

# c# - 从 URL 读取 xml

> ID：12864612
> 
> 赞同：0
> 
> 时间：2012-10-12T17:58:23.867
> 
> 标签：c#, asp.net

我正在尝试从 url 读取 xml（它不是 url 它的安静服务），下面是我的代码。我不知道问题是什么，但我无法从 url 读取 xml。我得到错误，我没有得到任何数据..

```
 string soap = "";
if (fPortalGuid != string.Empty)
{
    HttpWebRequest request = WebRequest.Create("http://cramapp-dt-02s.cable.comcast.com:8158/restfulqueryservice/queryservice/getrequestdetails?api_key=......&request_id=33ebc6e9-9def-4f39-adf9-bba2edef3b54") as HttpWebRequest;
    //request.Credentials = new NetworkCredential("rolland", "409cleaner");
    //request.ContentType = "application / json; charset = utf - 8";
    request.Method = "POST";

    using (Stream stm = request.GetRequestStream())
    {
        using (StreamWriter stmw = new StreamWriter(stm))
        {
            stmw.Write(soap);
        }
    }
    // Get response  
    using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
    {
        // Get the response stream  
        StreamReader reader = new StreamReader(response.GetResponseStream());
        // Console application output  
        Console.WriteLine(reader.ReadToEnd());
    }
} 
```

xml看起来像这样![xml文件图片](../Images/d9ac5d04a7c14b627671e6c224b929de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:22:21.793

此行可能会出错

```
HttpWebRequest request = WebRequest.Create("http://cramapp-dt-02s.cable.comcast.com:8158/restfulqueryservice/queryservice/getrequestdetails?api_key=......&request_id=33ebc6e9-9def-4f39-adf9-bba2edef3b54") as HttpWebRequest; 
```

因为 create 函数中的 url 不能访问（太长所以有 ... 用于喊显示），请尝试找到并粘贴完整链接或此链接：

```
http://www.w3schools.com/xml/note.xml 
```

# python - 在 Django 模板中生成与当前页面具有相同 GET 参数的 url

> ID：12864616
> 
> 赞同：10
> 
> 时间：2012-10-12T17:58:40.240
> 
> 标签：python, django

我有一个指向 Django 模板中 url 的链接。我想获取当前页面 url 的所有 GET 参数并将它们添加到模板链接的 url 中。当前页面可能有零个 GET 参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T18:05:30.737

在您的 中包含[`django.core.context_processors.request`](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)上下文处理器`settings.py`，然后`request`在模板的链接中使用该对象：

```
<a href="{% url 'my_url' %}?{{ request.META.QUERY_STRING }}"> 
```

这将导致来自没有任何 GET 变量的页面的链接有尾随`?`，但这是无害的。如果这不可接受，您可以先对其进行测试：

```
<a href="{% url 'my_url' %}{% if request.META.QUERY_STRING %}?{{ request.META.QUERY_STRING }}{% endif %}"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T18:00:27.690

你可以传递`request.META['QUERY_STRING']`给模板。

您可以在渲染模板之前获取 get 参数并将它们传递给模板并在正确的链接上渲染它们。

您还可以从`request.GET`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:00:17.113

当前请求的 GET 参数存储在[HTTPRequest.Get](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.GET)中。

# jquery - 我怎样才能让 scrollTo 正常工作

> ID：12864617
> 
> 赞同：0
> 
> 时间：2012-10-12T17:58:47.067
> 
> 标签：jquery, jquery-plugins

我有一个这样定义的多选列表

```
<select id="MyId" multiple="multiple">
    <option value = 1>This is one</option>
     etc...
</select> 
```

我正在尝试像这样使用 scrollTo 插件

```
$("#MyId option").scrollTo("[value=1]", 100) 
```

我尝试了几种不同的组合，但没有结果。

有谁知道我做错了什么？

编辑：我希望能够滚动到任何给定值。不只是1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:33:02.643

你应该使用`scrollTop()`jQuery

```
$("#MyId option").scrollTop(100); 
```

[在这里你可以阅读它。](http://www.w3schools.com/jquery/css_scrolltop.asp)试试看[。](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_css_scrolltop_get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:55:13.880

.scrollTop、nor.position() 返回一个像素值（它们返回 0）。因此，我在选项元素中搜索的值上使用了 .index() 。然后我将它乘以选择列表中一个元素的高度。然后使用scrollTop()，传入之前找到的值

# wordpress - 由于临时文件夹错误，托管在 Azure 上的 WordPress 不允许上传媒体文件

> ID：12864620
> 
> 赞同：1
> 
> 时间：2012-10-12T17:59:02.863
> 
> 标签：wordpress, azure-storage, azure-blob-storage, azure-web-app-service

在最近升级到最新的 WordPress 版本后，媒体上传不再起作用。他们返回缺少临时文件夹错误。

我发现 WP 认为 /wwwroot/wp-admin/ 是临时文件夹，这就是它试图发送上传的地方。

我尽一切努力迫使它在 WordPress 中改变。设置 WP_TEMP_DIR，甚至尝试重写在 /wp-includes/text/Diff.php 中查找临时文件夹并设置静态路径的核心函数。

没有任何效果。我对 Azure 了解不多，所以这让我很头疼。

我最后的手段是为 WP 安装和使用 Azure 存储插件，但这是最后的手段。

任何人都可以对这个问题有所了解吗？将不胜感激。

更新：站点是一个 Azure 网站，它不使用 Azure 实例。 [http://www.windowsazure.com/en-us/home/features/web-sites/](http://www.windowsazure.com/en-us/home/features/web-sites/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:35:05.823

我不确定 Azure，但您可以使用以下命令更改 WordPress 使用的 tmp 目录。在这样做之前，请确保在您的主目录中创建一个文件夹。

wp-配置

```
define('WP_TEMP_DIR','/link-to-your-folder-you-just-made'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T20:32:13.397

首先，您永远不应该在 Azure 实例上存储任何内容，将其视为 volalite 存储，就像 RAM 一样 - 如果实例出现故障甚至随机重新启动，您实际上可能会获得具有新文件系统的全新虚拟机并丢失所有内容。

话虽如此，您可以安全地 RDP 进入实例 - 创建一个目录（例如 c:\temp），只要 IIS 帐户对该目录具有权限，您将其用作暂存存储不会有任何问题。我会使用上面 Andy 的方法（我不知道 wordpress，但我知道 Azure），只需确保它指向一个可以用作临时目录并且 IIS 用户可以安全使用的目录。

您可能希望使用 RDP 登录到 VM，如果只是因为它可以让您深入了解 Azure 如何为其运行的软件构建文件系统，您将看到 3 个驱动器，如果内存为其中一个提供服务纯粹是您可以使用的暂存驱动器。但它不是持久的，考虑到它可以随时清除。

希望这可以帮助，

# eclipse - m2e 已安装但未显示在 Ubuntu Juno 的列表中

> ID：12864623
> 
> 赞同：1
> 
> 时间：2012-10-12T17:59:14.943
> 
> 标签：eclipse, maven, eclipse-plugin

我已经通过 Eclipse Marketplace 在 Juno 中安装了 m2e 并添加了 M2E 存储库，它们都安装没有问题。

M2E 显示在“已安装软件”列表中。

`New Project`但是，我在菜单或菜单中没有 Maven 选项`Import`。

我错过了什么吗？它与 Helios 完美配合。

我正在为 J2EE 和 Ubuntu 10.04 运行 Eclipse Juno。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:47:20.207

我认为原因是工作区被锁定，因此您无法安装插件。

尝试以下方法：

```
rm ~/workspace/.metadata/.lock

sudo gedit /opt/eclipse/configuration/.settings/org.eclipse.ui.ide.prefs

sudo chown -R user_name:user_name /home/kate/workspace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T11:51:34.650

我只是将 eclipse 从 indigo 迁移到 juno 版本，我遇到了同样的问题。

我删除了 ~/.eclipse 的内容（包含 eclipse indigo 的数据），删除了 .metadata/.lock 并再次安装了 m2e 和 m2e-wtp。

现在它可以工作了，我在右键菜单、首选项和导入菜单中有 Maven 选项。

# c# - 使用反射通过对象递归并打印树

> ID：12864628
> 
> 赞同：1
> 
> 时间：2012-10-12T17:59:28.217
> 
> 标签：c#, .net, oop, reflection, recursion

如果我在 C# 中有一个预定义的对象，我如何使用反射循环遍历对象的结构进行打印，使其如下所示：

```
Class PurchaseOrder
------------------
Property: ID     | Type: Int32
Property: Client | Type: Some.Namespace.Client
+----   Property: FirstName | Type: String
+----   Property: LastName  | Type: String
+----   Property: Address   | Type: Some.Namespace.Address
+----   +----    Property: Line1 | Type: String
Property: Date   | Type: DateTime 
```

我想通过对象的结构进行递归（不关心里面的实际数据，只关心属性的名称和类型）。此外，如果它不是基本类型，请继续沿树递归（即对象或列表）。

注意：只有公共成员...

由于某种原因，我似乎无法想象这一点。

这是上面打印的树的 C# 类的样子：

```
class PurchaseOrder {
    public Int32 Id {get;set;}
    public Client Client {get;set;}
    public DateTime Date {get;set;}
}

class Client {
    public string FirstName {get;set;}
    public string LastName  {get;set;}
    public Address Address {get;set}
}

class Address {
    public string Line1 {get;set;}
    ....
} 
```

但是，理想情况下，这适用于任何类型。

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:08:16.477

[使用ObjectDumper](http://objectdumper.codeplex.com/)很容易做到这一点。

它是由 Microsoft 编写的开源工具，似乎完全符合您的要求：编写对象属性的文本/可读表示。这是一个简单的类，如果您想调整输出格式，很容易修改。

最简单的使用示例：

```
ObjectDumper.Write(purchaseOrder) 
```

检查[此页面](http://blogs.msdn.com/b/ericwhite/archive/2008/08/14/object-dumper-an-invaluable-tool-for-writing-code-in-the-functional-programming-style.aspx)以获取使用示例。

# java - 使用 Java Compiler API，创建了哪些类？

> ID：12864633
> 
> 赞同：1
> 
> 时间：2012-10-12T17:59:50.023
> 
> 标签：java, compiler-construction

因为单个 Java 文件可以编译成任意数量的类文件，编译器 API 有没有办法找出生成了哪些类文件？它正在输出到一个可能包含其他文件的目录，所以我不能只看那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:26:18.887

我想出了一些似乎可行的方法。*FileManager 有回调来获取事物的位置，包括用于输出的事物。您可以使用 ForwardingJavaFileManager 包装它，覆盖并存储来自调用的值。

```
final List<String> classFiles = new ArrayList<>();
StandardJavaFileManager inner = compiler.getStandardFileManager(null, null, null);
JavaFileManager fileManager = new ForwardingJavaFileManager(inner) {
    @Override
    public JavaFileObject getJavaFileForOutput(Location location, String className,
                JavaFileObject.Kind kind, FileObject sibling) throws IOException {
        JavaFileObject o = super.getJavaFileForOutput(location, className, kind, sibling);
        classFiles.add(o.getName());
        return o;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:33:30.777

[javax.tools](http://docs.oracle.com/javase/7/docs/api/javax/tools/package-summary.html)包显示了管理编译单元的几种方法。

请参阅[JavaFileObject](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileObject.html)或[JavaFileManager](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:51:50.823

我不认为我们可以使用任何给定的引用找到由 Java Compiler API 创建的非公共类。您需要对输入的 java 文件进行解析（或应用 reg 表达式）以识别可用的类名。获得类的名称后，您应该能够使用自定义类加载器来加载它们。

萨西什

# php - .htaccess 和 url 中的双引号

> ID：12864634
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:59:59.523
> 
> 标签：php

由于引号，当我单击超链接时出现 404 错误。MySQL 列`title`有这个值`the official "i'm hungry" page`

```
$title = str_replace(' ','-',$row['title']);
<a href='/page/$id/$title'>click me</a> 
```

这是没有 modrewrite 的 url`http://localhost/page.php&id=7&p=the-official-"i'm-hungry"-page`

modrewrite 将 url 更改为`http://localhost/page/7/the-official-"i'm-hungry"-page`但链接不起作用。

这是重写规则`RewriteRule ^page/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)?/?$ /page.php?id=$1&p=$2 [L]`

我该如何解决这个问题，所以我没有收到 404 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:03:31.833

通常，您希望通过其 ID 而非标题来识别您的页面。客户总是会尝试在他们的页面标题中添加奇怪的字符，例如`"`、`/`、`'`和。`&`这些字符可以断开链接。

[http://example.com/page/1234/the+official+](http://example.com/page/1234/the+official+) “我+饿了”/“我+口渴”+page

此重写规则应收集页面的 ID，然后添加其他任何内容作为第二个变量：

```
RewriteRule ^page/([0-9]+)/(.*)$ /page.php?id=$1&p=$2 [L] 
```

如果你这样做，那么标题就变得纯粹是装饰性的，你可以添加更严格的过滤器来防止意外行为（例如，如果用户创建了名为 的页面`the official "i'm hungry"/"i'm thirsty" page`，你可以将其转换为`the-official-i-m-hungry-i-m-thirsy-page`URL，而不会影响你的网页内容。

例如，这两个链接都将您带到同一个地方：

```
http://stackoverflow.com/questions/12864634/htaccess-and-double-quotations-in-url
http://stackoverflow.com/questions/12864634/gibberishgibberishgibberish 
```

如果您想强制用户访问具有正确标题的页面，则可以更新`page.php`以从 URL 中获取 ID，然后将用户重定向到正确、美观的 URL。例如：

```
<?php
function ConvertTitle($title)
{
    // Replace all non-alphanumeric characters with a dash (-)
    return preg_replace($title, '%[^A-z0-9]+%', '-');
}

$id = $_GET['id'];
$title = getArticleTitleById($id);

//  If the title isn't correct
if(ConvertTitle($title) != ConvertTitle($_GET['p'])
{
    //  Send the user to the correct Cosmetic URL, StackOverflow does something like this
    $url = '/page/'.$id.'/'. ConvertTitle($title);
    header("location: $url");
} 

// load the page as normal
?> 
```

但是，只要您通过页面的 ID 而不是名称加载内容，那么即使使用不正确的 URL，它也应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:09:36.210

代替`str_replace`您使用的，使用 a`preg_replace`从 the 中删除除字母和数字之外的任何内容，`$title`并将其替换为 a`-`

# cloudbees - Cloudbees 实例大小调整

> ID：12864643
> 
> 赞同：1
> 
> 时间：2012-10-12T18:00:25.700
> 
> 标签：cloudbees

我正准备配置我们的生产 Cloudbees 实例，并希望获得有关应用单元大小的一些建议。我们将使用多个启用自动缩放的实例，但需要选择应用单元大小。这显然是水平和垂直缩放之间的折衷，并且每个应用程序的最佳选择会有所不同。

我们的应用程序是用 GWT 编写的购物服务，因此有一个 JSP 和应用程序 HTML、JS、CSS 和图像文件的初始下载。之后，一切都在客户端的浏览器中运行，只有搜索调用到达服务器并返回纯 JSON，没有序列化。此外，我们不使用会话，并且不需要服务器上的任何类型的状态，因此内存占用应该很低。

鉴于所有这些，我的直觉是使用更多的较小实例进行更水平扩展的部署。欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:57:37.493

这个问题没有一般的答案。应用程序设计和内部处理进入等式并改变结果。只有负载测试才能为您提供有关应用程序最佳大小的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:42:42.427

无状态意味着您可以非常轻松地水平扩展 - 因此这开辟了两种扩展方式。

我的建议是确定哪个“容器大小”对于单个实例足够好（通常是内存限制），一旦您对此感到满意，您就可以根据使用情况进行水平扩展。

# extjs - 如何更改 extjs 中按钮的填充？

> ID：12864645
> 
> 赞同：2
> 
> 时间：2012-10-12T18:00:27.680
> 
> 标签：extjs

是否可以动态更改放置在 FormPanel 内的按钮的填充？

谢谢，Y_Y

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:24:23.250

您可以使用 CSS 更改填充

```
Ext.create('Ext.Button', {
    text: 'Click me',
    renderTo: Ext.getBody(),
    cls: 'my-btn'
});

/* The button wrapper */
.my-btn.x-btn {
   padding: 5px;
}

 /** or the button itself */
.my-btn.x-btn button {...} 
```

或者你可以用 JS 破解它

```
Ext.create('Ext.Button', {
    text: 'Click me',
    renderTo: Ext.getBody(),
    padding: 10,
    handler: function() {
        alert('You clicked the button!');
    }
}); 
```

# java - 读取 RandomAccessFile 时出现 EOFException 错误

> ID：12864647
> 
> 赞同：0
> 
> 时间：2012-10-12T18:00:39.537
> 
> 标签：java, random-access, eofexception

每当我想打印我得到的文件时，我在读取字节时遇到了一些`readInt()`问题。当我想显示更新的数字系列时，最后一个 catch 语句中出现了相同的错误。这是我的代码：`RandomAccessFile``EOFException`

```
import java.io.*;
import java.util.Scanner;
public class CentNumbers {
public static void main(String[] args) throws Exception {
Scanner input = new Scanner(System.in);
int num;
RandomAccessFile numbers = new RandomAccessFile("Numbers.dat", "rw");

System.out.println("Saved numbers are:");
numbers.setLength(0);

for (int i = 0; i < 100; i++){
  num=(int)(Math.random()*100);
  numbers.writeInt(num);
  System.out.print(numbers.readInt()+" ");
  }
try{
do{
System.out.print("\nadd another number? (y/n):");

String x= input.next();

if (!x.equals("y")) throw new Exception("Comeback Soon");

    System.out.print("Write number :");
    int b=input.nextInt();
    numbers.seek(numbers.length());
    numbers.writeInt(b);

 } while(true);

}//end try

catch ( Exception e){

    System.out.println("Saved numbers are:");

    for (int i=0; i<numbers.length();i++){
        numbers.seek(i*4);
        System.out.print(numbers.readInt()+" ");

    }//end for
    System.out.println();
    System.out.println(e.getMessage() );
    numbers.close();

    }//end catch

 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:06:37.940

在此循环中，您尝试从文件末尾读取（您`readInt()`在 之后`writeInt()`，而不重置位置）。

```
for (int i = 0; i < 100; i++){
  num=(int)(Math.random()*100);
  numbers.writeInt(num);
  System.out.print(numbers.readInt()+" ");
} 
```

在这个循环中，文件中的数字数量*不*等于文件的字节长度，因为每个 int 有 4 个字节，因此您正在读取文件末尾。

```
for (int i=0; i<numbers.length();i++){
    numbers.seek(i*4);
    System.out.print(numbers.readInt()+" ");

}//end for 
```

未来注意事项：在处理此类问题时，在调试器中单步执行代码是找出逻辑问题所在的好方法。你可以在每一步之后查看 RAF 的位置和长度，你应该能够找出你做错了什么。

# python - ImportError：没有名为 pyobjc 的模块

> ID：12864650
> 
> 赞同：0
> 
> 时间：2012-10-12T18:01:01.493
> 
> 标签：python, pyobjc

我是 Python 新手。我正在运行 Mac OS X 10.8.2、Python 2.7.3、Xcode 4.5.1。我无法`import pyobjc`使用 python。我使用`easy_install pyobjc`或手动从[http://pypi.python.org/pypi/pyobjc/2.3](http://pypi.python.org/pypi/pyobjc/2.3)下载并运行`python setup.py install`. 这是我的截图`site-packages folder` ![在此处输入图像描述](../Images/b3469a8956a1e3f168f3ff47b687ef21.png)

我该如何解决这个问题？

这是 sys.path.PyOBJc 的屏幕截图存在于 sys.path ![](../Images/683ee869ac51257d2d103e82492a58f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:10:39.390

我在您的目录中没有看到`.pth`文件。`pyobjc``site-packages`

`.pth`放置在 Python 搜索路径上的目录中的文件包含要添加到该搜索路径的目录。它们是简单的文本文件；您可以查看已经存在的那些以了解它们是如何工作的。

至于*为什么*你没有得到`.pth`文件`pyobjc`，我不确定。但是您可以创建一些来解决问题。

延伸阅读：[修改 Python 的搜索路径](http://docs.python.org/install/index.html#inst-search-path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:59:47.013

PyObjC 的模块名称不是“pyobjc”。

要使用低级桥接器，请使用“import objc”

要访问 Cocoa 框架，请使用“import Cocoa”。

如果“import objc”出现导入错误，您可能有许多 Python 解释器，请检查“sys.prefix”的值是否符合您的预期。还要检查“/Library/Frameworks/Python.framework/Version/2.7/lib/python2.7/site-packages”是否在“sys.path”上。

# javascript - 使用 jQuery 特色滑块更改目标 DIV 的类

> ID：12864653
> 
> 赞同：0
> 
> 时间：2012-10-12T18:01:30.563
> 
> 标签：javascript, jquery, html, css

这里[http://jsfiddle.net/comparebest/yBcKk/6/](http://jsfiddle.net/comparebest/yBcKk/6/)我有一个 jQuery 滑块和两个 Div - DIV ONE 和 DIV TWO。

有没有办法让我自动拥有它：

1）当滑块显示幻灯片 1 时，替换 DIV ONE 的类（从“test”到“testc”）。

2）当滑块显示幻灯片 2 时，替换 DIV TWO 的类（从“test1”到“test1c”）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:14:38.050

我想出了一个使用你的索引的解决方案，`.paging a.active`看看这个[小提琴](http://jsfiddle.net/yBcKk/9/) 这是我在你的旋转函数中添加的：

```
 if ($('.paging a.active').index() == 0){
                //alert('slide1');  
            $('.test').removeClass('test').addClass('testc').html('DIV ONE now has class: testc');          
            }
        if ($('.paging a.active').index() == 1){
                //alert('slide1');  
            $('.test1').removeClass('test1').addClass('test1c').html('DIV TWO now has class: test1c');          
            } 
```

基本上，如果 .paging a.active index = 0 （真的滑动一个）然后相应地更改 div 。它只是不适用于滑块的初始加载，因为直到它移动到第二个滑块才会调用旋转函数。

# objective-c - UIView 卡在纵向模式

> ID：12864658
> 
> 赞同：0
> 
> 时间：2012-10-12T18:01:56.863
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, autoresizingmask

我无法以横向模式启动应用程序。视图始终以纵向模式显示。

我在 plist 中配置了以下内容：

```
<key>UISupportedInterfaceOrientations</key>
<array>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
</array> 
```

UIViewController 在 AppDelegate.m 中创建：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.myViewController = [MyViewController alloc];

    UIView *myView = [[UIView alloc] init];
    myView = [UIColor whiteColor];
    self.myViewController.view = myView;

    self.window.rootViewController = self.myViewController;
    self.window makeKeyAndVisible];
    return YES;
} 
```

将 shouldAutorotateToInterfaceOrientation 添加到 MyViewController.m

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

当设备处于纵向模式并且应用程序启动时，状态栏处于横向模式。但是，当 UIView 显示时，它将以纵向模式结束。当设备处于横向模式时，也会发生同样的事情。

但是，当我在 Interface Builder 中创建 UIViewController 时，它可以工作。

这是否与 autoresizemasking 有关，因为当我在 AppDelegate.m 中添加它时它不起作用：

```
 myView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:29:49.897

在您的代码中，我发现了一个语法错误，我认为您的意思是 myView.backgroundColor = [UIColor whiteColor]; 但这是唯一的错误，您的代码工作正常，应用程序启动并保持横向模式，无论是否有 myView.autoresizingMask

我的环境：xCode 4.5 设备 iPhone 4S 和 IOS 6.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:16:39.460

将此代码替换为您的`ViewController`：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||(interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:21:15.253

使用它在启动时查找方向..它将正常工作：

```
UIInterfaceOrientation orientation = [UIDevice currentDevice].orientation;
if (! UIDeviceOrientationIsValidInterfaceOrientation(orientation))
    orientation = [UIApplication sharedApplication].statusBarOrientation; 
```

然后使用这个方向来旋转你的视图

# php - 长轮询不会停止

> ID：12864659
> 
> 赞同：0
> 
> 时间：2012-10-12T18:02:01.233
> 
> 标签：php, mysql, long-integer, polling

我试图修改长轮询代码以适应我的情况。我想从 mysql 中计算总数，如果数字发生变化（增加或减少），它会通知我。

问题是while循环不断循环。我怎样才能阻止它？我只需要在总金额发生变化时收到通知。

```
<?php
include("db.php");
$result = mysql_query("SELECT sum( r ) as totalsum FROM (SELECT colA, colB, COUNT( * ) AS r FROM product GROUP BY productid ) AS t");
while($row = mysql_fetch_array($result))
{
    $old_totalsum = $row['totalsum']; 
}

?>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">

var old_totalsum =<?php echo $old_totalsum; ?>;
function waitForMsg(){
$.ajax({
    type: "GET",
    url: "poll.php?old_totalsum=" + old_totalsum,
    async: true,
    cache: false,
        success: function(data){

        var json = "eval(+(" + data + ")+)";
    if(json['msg'] != "") {

        alert(data); 
    }

    old_msg_id = json['old_msg_id']; 
    setTimeout('waitForMsg()',1000);
    },
    error: function(XMLHttpRequest, textStatus, errorThrown){
    alert("error: " + textStatus + " (" + errorThrown + ")");
    setTimeout('waitForMsg()',15000);
    }

    });  // end ajax
} //end waitformsg

$(document).ready(function(){ 
 waitForMsg();
});

</script>
</head>
<body>
<div id="chat">
</div>
</body>
</html>
<----------------------------------------------------------->

poll.php
<----------------------------------------------------------->
<?php
include("db.php");

$old_totalsum = $_GET['old_totalsum']; 

$result = mysql_query("SELECT sum( r ) as totalsum FROM (SELECT colA, colB, COUNT( * ) AS r FROM product GROUP BY productid ) AS t");
while($row = mysql_fetch_array($result))
{
    $last_sum = $row['totalsum']; 
}

while($last_sum < $old_totalsum || $last_sum > $old_totalsum)

    while($last_sum <= $old_totalsum)
    {
    usleep(1000);
    clearstatcache();
    $result = mysql_query("SELECT sum( r ) as totalsum FROM (SELECT colA, colB, COUNT( * ) AS r FROM product GROUP BY productid ) AS t");
        while($row = mysql_fetch_array($result))
        {
         $last_sum = $row['totalsum'];
            //echo $last_sum;
            //return;
        }

    }

$response = array();
$response['msg'] = 'new';
$response['old_msg_id'] = $last_sum;
echo json_encode($response);
?>
<-------------------------------------------> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:15:48.127

我期望这样的逻辑：

```
$latest_sum= -1;
// Loop until sum from DB is different from what was passed  in
while( $latest_sum == -1 || $latest_sum!= $old_sum ){
  $result = mysql_query("SELECT sum( r ) as totalsum FROM (SELECT colA, colB, COUNT( * ) AS r FROM product GROUP BY productid ) AS t");
   while($row = mysql_fetch_array($result))
   {
      $lastest_sum = $row['totalsum']; 
   }
}

$response = array();
$response['msg'] = 'new';
$response['old_msg_id'] = $latest_sum;
echo json_encode($response); 
```

如果更改需要很长时间，那么 Apache（或任何运行 PHP 的程序）可能会取消请求。这也将在昂贵的数据库上运行大量查询。

所以最好在javascript中有你的循环。它会调用一个函数，该函数只会从数据库中返回最新的总和。javascript 应该在每个请求之间等待一秒钟或更长时间。

如果数据库的性能仍然太难，那么 php 应该以某种方式每分钟缓存一次值并返回缓存的值。

# coldfusion - 替换子域中 Cfchart 的 URL

> ID：12864669
> 
> 赞同：0
> 
> 时间：2012-10-12T18:02:35.030
> 
> 标签：coldfusion, coldfusion-9, cfchart

我有一个小问题`<cfchart>`......
`<cfchart>`在我的现场网站上运行良好。但是，不能使用子域。因为，它的网址为`<cfchart>`http://subdomain.mysite.com/CFIDE/GraphChart.cfm**而** 不是**http://mysite.com/CFIDE/GraphChart.cfm**

以下是相关代码：

```
<cfchart format="flash" xaxistitle="Month" yaxistitle="Reviews" chartwidth="180" chartheight="150" show3d="yes">
    <cfchartseries type="bar" colorlist="##778899,##778899,##778899,##778899">
        <cfchartdata item="#DateFormat(LastMonthThree, 'mmm')#" value="0">
    </cfchartseries>
</cfchart> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:13:32.153

感谢大家对我的回复...无论如何，我已经解决了问题...
问题实际上出在 cfchart-tag 上，它通过 CFIDE 的相对路径获取地图。

```
(/CFIDE/chartData.cfm) 
```

所以，当我尝试使用 subdomain.mysite.com 时，它确实找到了 CFIDE。
`(as it was tring to access **(subdomain.mysite.com/CFIDE/chartData.cfm)`** ...
但是当我尝试使用 mysite.com/CFIDE 访问 CFIDE 时，它正在工作

```
(as it was added from the IIS-Server) 
```

所以，我只是去 IIS 管理器并将我的 CFIDE 文件夹添加到 subdomain.mysite.com

```
(subdomain.mysite.com/CFIDE) 
```

它奏效了...... :)

# maven-plugin - 使用 JSVC 守护使用 Maven One-Jar 插件打包的 Java 应用程序

> ID：12864671
> 
> 赞同：2
> 
> 时间：2012-10-12T18:02:45.653
> 
> 标签：maven-plugin, daemon, jsvc, onejar

这是问题所在：

[我已经使用Maven 插件 One-Jar](http://code.google.com/p/onejar-maven-plugin/)将我的 Java 应用程序打包到一个 jar 中。

现在我想使用 JSVC 将应用程序作为 Unix Daemon 运行，即 Apache Commons Daemon。

我按如下方式使用 JSVC（适用于使用 Maven 程序集插件等制作的 Jars）：

```
jsvc -user $USER -home $HOME -pidfile $PID_PATH -cp $PATH_TO_ONE_JAR my.package.MyClass 
```

错误是这样的：

```
jsvc.exec error: Cannot find daemon loader org/apache/commons/daemon/support/DaemonLoader
jsvc.exec error: Service exit with a return value of 1 
```

有谁知道是否可以一起使用 JSVC 和 One-Jar，因为 One-Jar 使用自定义类加载器？当我运行 java -jar my-one-jar.jar 时，jar 运行得很好。

可以做什么？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:38:53.253

我必须将所有 jars 依赖项添加到 jsvc 的类路径选项中。似乎jsvc不使用另一个罐子里的罐子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T07:50:30.720

如果您使用（文档不足的）[Maven Shade Plugin](https://maven.apache.org/plugins/maven-shade-plugin/usage.html)而不是 One-jar（它们可以达到彼此相似的结果），它应该可以解决您的问题。它解压缩依赖的 jar 并将类文件直接存储在 fat Jar 中（而不是在 jar 中包含 jar）。我已经使用它创建了一个在 JSVC 下运行的可执行 jar，并取得了一些成功。

当然，事情很少像听起来那么简单。使用 Shade 插件，当依赖关系树中存在冲突时，您可能需要做一些工作来[重新定位类，或者使用](http://maven.apache.org/plugins/maven-shade-plugin/examples/class-relocation.html)[资源转换](https://maven.apache.org/plugins/maven-shade-plugin/usage.html)器来处理非 Java 资源文件。但希望不会。

（*当然*Mkyong.com 有[这方面的指南](http://www.mkyong.com/maven/create-a-fat-jar-file-maven-shade-plugin/)）

# c++ - 为什么链接时有未定义的符号？

> ID：12864672
> 
> 赞同：-1
> 
> 时间：2012-10-12T18:02:50.077
> 
> 标签：c++, linker-errors, ld

我有两个类`Triangle`，`ALine`并且我想将新`ALine`实例分配给`Triangle`其构造函数中的属性。但我收到了这个错误

```
Undefined symbols for architecture x86_64:
  "ALine::ALine()", referenced from:
      Triangle::Triangle(triangle) in Triangle.o
ld: symbol(s) not found for architecture x86_64 
```

下面是我写的代码：

## ALine.cpp

```
#include "Geometry.h"
#include "ALine.h"

ALine::ALine(point a, point b)
{       
        double tmpy = a.y - b.y;
        double tmpx = a.x - b.x;
        double tmpk;
        if(equals(tmpy, 0))
        {
            tmpk = 0;
        }
        else
        {
            tmpk = tmpx/tmpy;
        }
        double tmpq = a.y - tmpk*a.x;
        if(equals(tmpx, 0))
        {
            if(equals(a.x, 0))
            {
                if(equals(b.x, 0)) tmpk = 0;
                else tmpk = (b.y-tmpq)/b.x;
            }
            else
            {
                tmpk = (a.y-tmpq)/a.x;
            }
        }

        a = a;
        b = b;
        k = tmpk;
        q = tmpq;

}; 
```

## ALine.h

```
class ALine{

private:
    double k;
    double q;
    point a;
    point b;

    double length;

    void calculateLength();

public:

    ALine(point a, point b);
    ALine();

    point getK();
    point getQ();

    static bool areinline(point a, point b, point c);

}; 
```

## 三角形.cpp

```
#include "Triangle.h"
#include "Geometry.h"
#include "ALine.h"

    Triangle::Triangle(triangle t)
    {
        triangle itself = t;
        a = *new ALine(itself.a, itself.b);
        b = *new ALine(itself.b, itself.a);
        c = *new ALine(itself.c, itself.a);
    }; 
```

注意，类不完整，我在这里只粘贴了与我的问题相关的代码（如果没有，我可以添加更多）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T18:07:52.637

您正在声明一个默认构造函数，但没有定义一个。

```
// in ALine.h
class ALine
{
private:
    void calculateLength(); // this is a declaration
public:
    ALine(point a, point b); // this is another
    ALine(); // this is a declaration as well

...

// in ALine.cpp
ALine::ALine(point a, point b) // this is a definition
{
    double tmpy = a.y - b.y;
    double tmpx = a.x - b.x;
    double tmpk;
    ... 
```

你告诉编译器该函数存在，所以它让你使用它。这是合法的。但是，当链接器尝试处理编译后的代码时，它`ALine::ALine()`会寻找却找不到它，因为您从未说过它是什么。

添加到您的 ALine.cpp 中，如下所示：

```
ALine::ALine()
{
} 
```

# 话虽如此

您没有正确使用动态分配。按照目前的情况，您在堆上分配一个新的 ALine，将其复制到堆栈上的 ALine 中，然后丢弃堆 ALine 的地址（不是一次，而是 3 次）。这是内存泄漏，ALines 永远不会消失，只要您的程序正在运行，它们就会一直存在。

`Triangle::Triangle(triangle other)`更改为以下内容会更好：

```
Triangle::Triangle(const triangle& t) : a(t.a, t.b), b(t.b, t.c), c(t.c, t.a) {} 
```

这使用 的语法`Class::Class(args ...) : member(...), member2(...), ... { /* body */ }`在构造函数中初始化类的成员。这样做的一个好处是不会调用它们的默认构造函数，因为它们会（隐式地）在您的代码中调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:08:28.403

您需要为 class 实现默认构造函数`ALine`。在 Triangle 的构造函数中，成员`a,b`和`c`使用默认构造函数，并且一旦初始化，它们就使用赋值运算符 ( `a = *new ALine(itself.c, itself.a);`)。也许你想要的是这样的：

`Triangle::Triangle(const Triangle &t) : a(t.a, t.b), b(t.b, t.c), c(t.c, t.a) {}`

此代码不使用 ALine 的默认构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:07:29.450

从您的代码示例中可以看出，您未能提供默认构造函数的实现，只有`ALine::ALine(point a, point b)`. 为also 提供一个实现`ALine::ALine()`，您应该会看到此错误消失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T18:08:38.457

您声明了，但没有实现该类的默认构造`ALine::Aline()`函数`ALine`。您的`Triangle`构造函数调用它，并且链接器在任何目标文件中都找不到实现。

# python - numpy数组中多个单元格补丁的相邻单元格

> ID：12864673
> 
> 赞同：1
> 
> 时间：2012-10-12T18:02:52.713
> 
> 标签：python, multidimensional-array, numpy, scipy

这是此[解决方案](https://stackoverflow.com/questions/12612663/counting-of-adjacent-cells-in-a-numpy-array)引起的后续问题。除非数组中有多个补丁，否则计算相邻单元格的解决方案效果很好。

所以这次数组例如看起来像这样。

```
import numpy
from scipy import ndimage

s = ndimage.generate_binary_structure(2,2)
a = numpy.zeros((6,6), dtype=numpy.int) # example array
a[1:3, 1:3] = 1;a[2:4,4:5] = 1
print a
[0 0 0 0 0 0]
[0 1 1 0 0 0]
[0 1 1 0 1 0]
[0 0 0 0 1 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0]

# Number of nonoverlapping cells
c = ndimage.binary_dilation(a,s).astype(a.dtype)
b = c - a
numpy.sum(b) # returns 19
# However the correct number of non overlapping cells should be 22 (12+10) 
```

是否有任何聪明的解决方案来解决这个困境而不使用任何循环或遍历数组？原因是数组可能非常大。

**想法1：**

仔细考虑一下，一种方法可能是检查迭代结构中的多个补丁。为了使总计数正确，下面的这些单元格在膨胀中必须等于 2（或更多）。有人知道如何将这个想法变成代码吗？

```
[1 1 1 1 0 0]
[1 0 0 2 1 1]
[1 0 0 2 0 1]
[1 1 1 2 0 1]
[0 0 0 1 1 1]
[0 0 0 0 0 0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:16:48.137

您可以使用`label`from`ndimage`来分割每个补丁。

然后，您只需询问返回的数组在哪里等于 1、2、3 等并对其执行您的算法（或者您只需使用`ndimage.distance_transform_cdt`但为每个标记的段反转您的前景/背景。

**编辑1：**

此代码将获取您的数组`a`并执行您的要求：

```
b, c = ndimage.label(a)
e = numpy.zeros(a.shape)
for i in xrange(c):

    e += ndimage.distance_transform_cdt((b == i + 1) == 0) == 1

print e 
```

我意识到那里的所有平等有点难看，但它输出：

```
In [41]: print e
[[ 1\.  1\.  1\.  1\.  0\.  0.]
 [ 1\.  0\.  0\.  2\.  1\.  1.]
 [ 1\.  0\.  0\.  2\.  0\.  1.]
 [ 1\.  1\.  1\.  2\.  0\.  1.]
 [ 0\.  0\.  0\.  1\.  1\.  1.]
 [ 0\.  0\.  0\.  0\.  0\.  0.]] 
```

**编辑 2（替代解决方案）：**

这段代码应该做同样的事情并且希望更快（但是它**不会**找到两个补丁只接触角落的地方）。

```
b = ndimage.binary_closing(a) - a
b = ndimage.binary_dilation(b.astype(bool))

c = ndimage.distance_transform_cdt(a == 0) == 1

e = c.astype(numpy.int) * b + c

print e 
```

# google-chrome - 在 Chrome 和 Safari 中删除下拉菜单上的背景样式？

> ID：12864676
> 
> 赞同：1
> 
> 时间：2012-10-12T18:03:16.383
> 
> 标签：google-chrome, drop-down-menu, safari

是否可以在 Chrome 和 Safari 中以透明的形式使下拉菜单的背景和边框？我们让它在 Firefox 和 IE 中看起来很完美，但 Chrome 和 Safari 似乎热衷于想要使用自己的默认样式。:(

这是我们正在使用的代码，第一个 div 的背景 url 是应用我们自己的自定义下拉箭头：

```
<div style="margin-top:-15px;background: url(images/select-arrow.gif) no-repeat right; overflow: hidden; font-family:SwankyandMooMoo; color:#565da4; width:352px;">      
<select name="for" id="for" style="background: none; border:none; width:376px;font-family:SwankyandMooMoo; color:#565da4; font-size:26px;">
<option value="ads" style=" background: none; border:none; width:376px;font-family:SwankyandMooMoo; color:#565da4; font-size:26px;">Ads</option>
<option value="other" style=" background: none; border:none; width:376px;font-family:SwankyandMooMoo; color:#565da4; font-size:26px;">Other</option>
</select>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:10:53.103

**编辑**现在问题已得到澄清，这里有一个 jsfiddle 可以做你想做的事。

[http://jsfiddle.net/wnGs8/30/](http://jsfiddle.net/wnGs8/30/)

您在选择上设置背景图像并使用包装器 div 隐藏真正的下拉箭头。

HTML

```
<div class="dropdown-wrapper">
    <select class="dropdown">
        <option>Test 123</option>
        <option>Test 123</option>
        <option>Test 123</option>
        <option>Test 123</option>
    </select>
</div> 
```

CSS

```
.dropdown-wrapper {
    position: relative;
    overflow: hidden;
    width: 152px; /* width minus 24 */
}
.dropdown {
    font-size: 24px;
    border: none;
    width: 176px;
    background: url('http://whatsnew.googleapps.com/_/rsrc/1299892144226/choose-release-track/arrow_down_blue24.png') no-repeat;
    background-position: 128px 0px; /* width minus 48 */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:05:37.287

好吧，如果没有看到任何代码，就很难判断你的答案。“修复”可能是使用 100% 不透明的 .png 图像作为输入的背景。这应该适用于所有现代浏览器。

编辑回复评论：尝试使用`background: transparent;`and`border: 0;`因为这是实现您想要的正确语法。

此外，自定义字体不应该真正影响任何东西。我一直在使用它们。

最后，我们当前的 HTML 和 CSS 标准甚至可能无法实现。这是另一个与您有关的stackoverflow问题。

[如何在没有 JavaScript 的情况下仅使用 CSS 设置 <select> 下拉菜单的样式？](https://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript)

# php - 魔法场 - 重复组输出始终相同的第一张图像

> ID：12864678
> 
> 赞同：0
> 
> 时间：2012-10-12T18:03:19.533
> 
> 标签：php, wordpress, plugins, duplicates

teSo我试图通过Magic Fields从重复组中输出文本和图像字段，文本字段显示不同的重复项，但图像字段不断重复显示第一个图像的url。谁能告诉我我做错了什么？

```
<?php
$articlephotos="&amp;w=728&amp;h=560&amp;q=95&amp;zc=1&amp;iar=0&amp;far=0";
?>

<?php $myContents = get_group('contents'); // use the Custom Group name
  foreach($myContents as $contents){ ?>

<?php  if( get('contents_text', true) ) { ?>
<div class="contents"><?php echo $contents['contents_text'][1]; ?></div>
<?php } ?>

<?php  if( get('contents_image', true) ) { ?>
<div class="post_container" style="padding-bottom: 24px;">
<div class="photo_outside">
<div class="photo_inside">
<img src="<?php bloginfo('stylesheet_directory'); ?>/phpThumb/phpThumb.php?src=<?php echo get_image('contents_image',$contents,$contents,0); ?><?php echo $articlephotos ?>" title="<?php echo get_the_title($ID) ?>" alt="<?php echo get_the_title($ID) ?>">
</div><!-- end photos_inside -->
</div><!-- end photos_outside -->
</div>
<?php } ?>

<?php } ?> 
```

提前致谢！

编辑： Var Dump 输出：

> 数组（2）{[1]=>数组（2）{[“contents_text”]=>数组（1）{[1]=>字符串（1085）“
> 
> 文字 01
> 
> " } ["contents_image"]=> array(1) { [1]=> array(2) { ["original"]=> string(122) "http://www.mysite.com/image01.jpg" [“拇指”]=> 字符串（122）“http://www.mysite.com/image01.jpg” } } } [2]=> 数组（2）{ [“contents_text”]=> 数组（1） { [1]=> 字符串（1380）“
> 
> 文字 02
> 
> " } ["contents_image"]=> array(1) { [1]=> array(2) { ["original"]=> string(119) "http://www.mysite.com/image01.jpg" [“拇指”]=> 字符串（119）“http://www.mysite.com/image01.jpg” } } } }

我缩写了文本和图像网址的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:27:35.493

我从插件组找到了解决方案，谢谢你的帮助！

```
<?php $elements = get_group('contents');
foreach($elements as $key => $element){                                      

if( get('contents_text', true) ) {
    echo '<div class="contents">';
    echo $element['contents_text'][1];
    echo '</div>'; 
}

$images = get_order_field('contents_text',$key);
foreach($images as $image){

if( get('contents_image', $key ,$image = true) ) {
    echo '<div class="photo_outside"><div class="photo_inside">';
    echo '<img src="' . get('contents_image', $key ,$image) .'">';
    echo '</div></div>';
    }

} } ?> 
```

# c# - 如何在 VS 2010 for WP7 中将 async-await 与 WCF 一起使用？

> ID：12864680
> 
> 赞同：1
> 
> 时间：2012-10-12T18:03:33.227
> 
> 标签：c#, wcf, windows-phone-7.1, async-await

异步 CTP 非常好用。我看到了一些 windows phone 的例子，都使用：
（Assembly AsyncCtpLibrary_Phone.dll，v2.0.50727，AsyncCtpExtensions）。

```
 var client = new WebClient();
 string data = await client.DownloadStringTaskAsync(new Uri(url)); 
```

或类似上面的代码。

如何为我的服务使用带有 async / await 的方法？(WCF)
今天所有的方法都是这样工作的：

```
 service.MyRequestCompleted += service_myRequestCompleted;
  service.MyRequestAsync(); 
```

我找不到为服务使用扩展方法的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:11:53.723

不幸的是，我还没有找到一种针对任何事件进行概括的好方法，但是很容易将其用于特定事件：

```
public static Task WhenRequestCompleted(MyService service) //can make it an extension method if you want.
{
    TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();

    service.MyRequestCompleted += () => //change parameter list to fit the event's delegate
        {
            tcs.SetResult(null);
        };
    service.MyRequestAsync();

    return tcs.Task;
} 
```

然后你可以这样做：

```
await WhenRequestCompleted(service);
//code that runs after the request is completed. 
```

我假设您在这里看到了该模式，因此您可以对其进行调整，以便它可以与其他类型的其他事件一起使用。

哦，如果事件有对你特别重要的参数，那么你可以让它返回 a`Task<T>`而不是 a `Task`，而不是使用`tcs.SetResult(null)`你可以使用 lambda 的参数之一来设置结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:51:15.397

自从我从事 WP7 工作以来已经有一段时间了，所以我将*假设*客户端代理对于每种合约方法都有 EAP 端点 ( `*Async`+ `*Completed`) 和 APM 端点 ( `Begin*`+ )。`End*`

如果这是正确的，那么您可以使用`TaskFactory.FromAsync`来包装`Begin*`/`End*`方法，如下所示：

```
[ServiceContract]
public interface ICalculator
{
  [OperationContract]
  uint Divide(uint numerator, uint denominator);
}

static class Program
{
  // Wrap those Begin/End methods into a Task-based API.
  public static Task<uint> DivideAsyncTask(this CalculatorClient client,
      uint numerator, uint denominator)
  {
    return Task<uint>.Factory.FromAsync(client.BeginDivide, client.EndDivide,
        numerator, denominator, null);
  }

  static async Task CallCalculator()
  {
    var proxy = new CalculatorClient();
    var task = proxy.DivideAsyncTask(10, 5);
    var result = await task;
    Console.WriteLine("Result: " + result);
  }

  static void Main(string[] args)
  {
    try
    {
      CallCalculator().Wait();
    }
    catch (Exception ex)
    {
      Console.Error.WriteLine(ex);
    }

    Console.ReadKey();
  }
} 
```

您可能对我[今天和明天的一篇博文 async WCF](http://nitoprograms.blogspot.com/2012/08/async-wcf-today-and-tomorrow.html)感兴趣- 不幸的是，WP7 仍然停留在“今天”模式。现在 VS2012 出来了，Async CTP 可能很快就会被放弃。

# python - python SMTP服务器中的AUTH LOGIN问题

> ID：12864692
> 
> 赞同：3
> 
> 时间：2012-10-12T18:04:23.853
> 
> 标签：python, sockets, ssl, smtp, gmail

我正在尝试创建一个 python 脚本来通过 smpt.gmail.com 发送电子邮件。我只被允许使用套接字。

目前，我已经获得了成功连接到服务器、声明 StartTLS 并将我的套接字包装在 SSL 中的脚本。但是，我在尝试向服务器进行身份验证时遇到了问题。

这是我的身份验证代码：

```
clientSocketSSL.send('AUTH LOGIN\r\n')
clientSocketSSL.send(base64.b64encode('USERNAME')+'\r\n')
clientSocketSSL.send(base64.b64encode('PASS')+'\r\n') 
```

我得到的回应是

```
501 5.5.2 Cannot Decode response 
```

那么 MAIL FROM 命令失败，因为我没有正确验证。

我觉得这是一个非常简单的解决方案，我只是错误地使用了身份验证登录吗？我已经找了两个小时了，但什么都没找到……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:08:14.780

它应该可以工作我自己用openssl尝试过：

```
OpenSSL> s_client -starttls smtp -connect smtp.gmail.com:587                                                 
CONNECTED(00000003)
depth=1 C = US, O = Google Inc, CN = Google Internet Authority
verify error:num=20:unable to get local issuer certificate
verify return:0
---
Certificate chain
 0 s:/C=US/ST=California/L=Mountain View/O=Google Inc/CN=smtp.gmail.com
   i:/C=US/O=Google Inc/CN=Google Internet Authority
 1 s:/C=US/O=Google Inc/CN=Google Internet Authority
   i:/C=US/O=Equifax/OU=Equifax Secure Certificate Authority
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIDgDCCAumgAwIBAgIKO3T/ewAAAABoqDANBgkqhkiG9w0BAQUFADBGMQswCQYD
VQQGEwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzEiMCAGA1UEAxMZR29vZ2xlIElu
dGVybmV0IEF1dGhvcml0eTAeFw0xMjA5MTIxMTU3NTBaFw0xMzA2MDcxOTQzMjda
MGgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1N
b3VudGFpbiBWaWV3MRMwEQYDVQQKEwpHb29nbGUgSW5jMRcwFQYDVQQDEw5zbXRw
LmdtYWlsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAv0UvQmjW1y96
cOK6AdQVEYPRd3ZQ9UhxkKfuVaYS9riOESFkWxkz+b3Ts/EOA5SY8axkaJS7Qa/v
N7laztYY8tTkx9Ml+eCY4xh0fFq9z4/WWADGqTY5I0wvqjZr+jBuYGulK1fU4ZUS
QpuZMMO9x7Bmr5LVP9C5r2qnoqtMtJUCAwEAAaOCAVEwggFNMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjAdBgNVHQ4EFgQUaCtARMZ9urIDfdpR6v1AkQsr
44owHwYDVR0jBBgwFoAUv8Aw6/VDET5nup6R+/xq2uNrEiQwWwYDVR0fBFQwUjBQ
oE6gTIZKaHR0cDovL3d3dy5nc3RhdGljLmNvbS9Hb29nbGVJbnRlcm5ldEF1dGhv
cml0eS9Hb29nbGVJbnRlcm5ldEF1dGhvcml0eS5jcmwwZgYIKwYBBQUHAQEEWjBY
MFYGCCsGAQUFBzAChkpodHRwOi8vd3d3LmdzdGF0aWMuY29tL0dvb2dsZUludGVy
bmV0QXV0aG9yaXR5L0dvb2dsZUludGVybmV0QXV0aG9yaXR5LmNydDAMBgNVHRMB
Af8EAjAAMBkGA1UdEQQSMBCCDnNtdHAuZ21haWwuY29tMA0GCSqGSIb3DQEBBQUA
A4GBADSkwmtEUhy/AhX2sIULT0Q5S9OlfKxbyE8hEc8nxls3jbk5yKZYd35Bzyy8
raoUPFuD3IH+zP/FGj5LPQirjnJLUvuFDsiM4eowPUthQad9SGWWdz6hCx8HpEUZ
1ssGnwb3HX34e9RH57v9LdtVUPdFYQsBJ36miGPylWk6r0xx
-----END CERTIFICATE-----
subject=/C=US/ST=California/L=Mountain View/O=Google Inc/CN=smtp.gmail.com
issuer=/C=US/O=Google Inc/CN=Google Internet Authority
---
No client certificate CA names sent
---
SSL handshake has read 2304 bytes and written 383 bytes
---
New, TLSv1/SSLv3, Cipher is ECDHE-RSA-RC4-SHA
Server public key is 1024 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1.1
    Cipher    : ECDHE-RSA-RC4-SHA
    Session-ID: 3A9E6D2BD679FD124B6772C91C74A5AFCEE7699A212D514FBC11710B684BDE31
    Session-ID-ctx: 
    Master-Key: D7B5B70090660B2359CFD8B82582033C16B569DEE6ACE1F6EB2CDD4E2042A613410B5E6DD07643664ABC33E8049547B8
    Key-Arg   : None
    PSK identity: None
    PSK identity hint: None
    SRP username: None
    TLS session ticket lifetime hint: 100800 (seconds)
    TLS session ticket:
    0000 - 63 53 11 b3 92 0d 59 63-15 90 58 10 84 f2 f7 6a   cS....Yc..X....j
    0010 - e8 4b b0 a8 41 0a 73 0e-41 ee 3c a0 ab 91 df df   .K..A.s.A.<.....
    0020 - f0 24 b5 08 18 7d cc 56-05 9b 05 f4 e5 57 23 1b   .$...}.V.....W#.
    0030 - e0 00 33 e6 61 11 6b a2-9e 05 32 bb a3 99 8f 64   ..3.a.k...2....d
    0040 - 50 2c 6c 3a 5f 46 d1 53-2d 2a 3f 6a 8d cd c5 c8   P,l:_F.S-*?j....
    0050 - 4e 0a 15 63 04 e7 4e a0-01 51 79 93 38 3c de 62   N..c..N..Qy.8<.b
    0060 - 75 76 7a 0e 1c fc 98 0f-04 b5 b2 59 2a 1e c3 e5   uvz........Y*...
    0070 - aa d2 f6 2b 36 8c b8 97-77 77 9e 77 37 a7 ed 12   ...+6...ww.w7...
    0080 - d5 85 30 d2 e8 42 67 e8-84 97 0a f2 b6 95 fd 2f   ..0..Bg......../
    0090 - e7 f2 de 0e                                       ....

    Start Time: 1354229935
    Timeout   : 300 (sec)
    Verify return code: 20 (unable to get local issuer certificate)
---
250 ENHANCEDSTATUSCODES
ehlo
250-mx.google.com at your service, [188.79.92.35]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
auth login
334 VXNlcm5hbWU6
MY_EMAIL_BASE64
334 UGFzc3dvcmQ6
MY_PASS_BASE64
235 2.7.0 Accepted 
```

# mysql - Mysql、group_concat 性能：拆分大表

> ID：12864693
> 
> 赞同：0
> 
> 时间：2012-10-12T18:04:24.933
> 
> 标签：mysql, performance, group-concat

我有一个巨大的表**231,451,584 行，14 列，15.1 GiB 大小**。

最后 3 列的数据将`group_concat`进入 3 个不同的表（通过消除前 11 列的冗余并将列 #12 或 #13 或 #14 的值合并为一个大逗号分隔，将行数恢复到 ≈2,500 , csv 格式的文本）。

此操作（每个新表上的 group_concat 插入）需要**大量时间**（`≈18.000 seconds`每个新表）。

**如果我将我的第一个表分成 3 个**（首先是相同的 11 列，并且对于每个新表，只有最后一个具有我想要连接的不同值的最后一个），它应该会很快吗？

我在这里问这个是因为我需要很长时间才能获得我的案例的基准。

谢谢！

# flash - 无法在 Flash 中获取影片剪辑的位置

> ID：12864694
> 
> 赞同：0
> 
> 时间：2012-10-12T18:04:32.050
> 
> 标签：flash, macromedia

我的闪存中有一个电影剪辑，我通过右键单击它复制了它并将复制的重命名为enemy1。当我尝试使用以下方法打印它的坐标时：

```
trace(_root.enemy1._x); 
```

它被打印为未定义。我怎样才能找到它的位置？谢谢

# perl - 带有模板工具包的 Mojolicious::Lite

> ID：12864708
> 
> 赞同：7
> 
> 时间：2012-10-12T18:06:03.497
> 
> 标签：perl, web-frameworks, template-toolkit, mojolicious

我正在尝试让 Template Toolkit 作为 Mojolicious::Lite 中的默认渲染器工作。是）我有的：

```
use strict;
use warnings;

use Mojolicious::Lite;
use Mojolicious::Plugin::TtRenderer;
plugin tt_renderer => { template_options => { INCLUDE_PATH => './tmpl', DEBUG => 1 } };

get '/' => sub {
  my $self = shift;

  $self->render( 'index' );
};

app->renderer->default_handler( 'tt' );
app->start; 
```

当我尝试访问测试服务器时，我得到：

```
[Fri Oct 12 14:02:02 2012] [info] Listening at "http://*:3000". 
Server available at http://127.0.0.1:3000\. 
[Fri Oct 12 14:02:08 2012] [debug] Your secret passphrase needs to be changed!!! 
[Fri Oct 12 14:02:08 2012] [debug] GET / (Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:16.0) Gecko/20100101 Firefox/16.0). 
[Fri Oct 12 14:02:08 2012] [debug] Routing to a callback. 
[Fri Oct 12 14:02:08 2012] [debug] Nothing has been rendered, expecting delayed response. 
```

无论我将什么作为参数传递给“渲染”，都会发生这种情况。我似乎无法弄清楚如何从中获得任何有用的调试信息；但我以前没有使用过 Mojo。

我已经通过在一些`warn`声明中确认我的`get`处理程序正在被调用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T18:23:42.553

在查看了Mojolicious [::Plugin::TtRenderer::Engine的](https://metacpan.org/module/Mojolicious::Plugin::TtRenderer::Engine)[来源](https://metacpan.org/source/PLICEASE/Mojolicious-Plugin-TtRenderer-1.28/lib/Mojolicious/Plugin/TtRenderer/Engine.pm)之后，我想通了。该插件忽略传递给 Template Toolkit 的选项，而是从. 所以更新我的代码以包括：`INCLUDE_PATH``$app->renderer_paths`

```
app->renderer->default_handler( 'tt' );
app->renderer->paths( [ './tmpl' ] ); 
```

让它工作。

# objective-c - 在哪里设置弹出窗口中显示的视图控制器的大小？

> ID：12864709
> 
> 赞同：2
> 
> 时间：2012-10-12T18:06:03.587
> 
> 标签：objective-c, ios, uiviewcontroller, ios6, uipopovercontroller

基于 Apple 的 [示例代码](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/Popovers.html)，我的应用程序在弹出窗口中显示了一个视图控制器，该视图控制器由一个条形按钮触发：

```
- (IBAction)configChartTapped:(id)sender {

GrowthChartConfigOneViewController *panelViewController = [[GrowthChartConfigOneViewController alloc]init];

UIPopoverController *popover = [[UIPopoverController alloc]initWithContentViewController:panelViewController];
popover.delegate = self;

// Store the popover in a custom property for later use.
self.popover = popover;

[self.popover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
} 
```

但是，我没有找到设置弹出框大小的方法。

**问题：我应该在哪里以及如何设置弹出框及其视图控制器的大小？我可以直接在 XCode 中设置大小以使视图在情节提要中正确调整大小吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:52:06.777

您也可以在 popover 类本身中设置它。这样，如果您允许从多个位置调用弹出框，您只需设置一次大小。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.view.backgroundColor = [UIColor redColor];
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 216.0);
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T18:14:18.593

只需给出 popovercontentsize 并确保该视图应符合如下定义的弹出框大小：

```
 popover = [[UIPopoverController alloc] initWithContentViewController: panelViewController];
    popover.popoverContentSize = CGSizeMake(550, 700); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-30T19:12:53.363

上面的答案很好，但由于我的需求略有不同，我只想为情节提要更新它。如果您使用这样的情节提要标识符进行实例化：

```
CBItemViewController *addNewPayee = [self.storyboard instantiateViewControllerWithIdentifier:@"cbItemPopover"]; 
```

然后您可以在弹出框的代码中设置自定义大小，如下所示：

```
- (id)initWithCoder:(NSCoder *)decoder {
    if(self = [super initWithCoder:decoder]) {
        self.preferredContentSize = CGSizeMake(630, 340);
    }
    return self;

} 
```

# c# - 如何在 C# 中为 TIFF 图像添加水印

> ID：12864711
> 
> 赞同：0
> 
> 时间：2012-10-12T18:06:06.307
> 
> 标签：c#, tiff, watermark

我正在尝试打开 TIFF 图像，添加水印并将其保存回完全相同的 TIFF 格式。我的代码适用于 PNG，但无法打开和操作 TIFF 文件。我尝试使用[TiffBitmapDecoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.tiffbitmapdecoder.aspx)但我无法让它工作。我已经工作了 16 个小时，没有运气。

```
string fileName = "sample.tiff";
int opacity = 127;
int X, Y;
string text = "My Sample Watermark";
Font font = new Font("Verdana", 18.0f);
Stream stream = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read);   

// I need to do something here to convert the stream so it can used by the Image object.

Image image = Image.FromStream(stream);               
Graphics g = Graphics.FromImage(image);
Brush myBrush = new SolidBrush(Color.FromArgb(opacity, Color.SteelBlue));
SizeF sz = g.MeasureString(text, font);
X = (int)(image.Width - sz.Width) / 2;
Y = (int)(image.Height - sz.Height);
g.DrawString(text, font, myBrush, new Point(X, Y));
stream.Dispose();
File.Delete(fileName);

// I need to do something here to save the Image in TIFF format with the same exact characteristics. 

image.Save(fileName); 
```

我正在从电影文件中提取原始 TIFF。现在我正在使用“Imagemagick convert CLI”来添加水印，但我想使用 VB C# 或者不必调用命令行来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:07:53.330

您可以尝试将 TIFF 转换为 png，然后再次使用

```
System.Drawing.Bitmap.FromFile(filename).Save(filename + ".png", System.Drawing.Imaging.ImageFormat.Png); 
```

然后转换回来

```
System.Drawing.Bitmap.FromFile(filename + ".png").Save(filename, System.Drawing.Imaging.ImageFormat.Png); 
```

# asp.net - 将临时数据存储在 SQL Server 之外以加快访问速度

> ID：12864716
> 
> 赞同：0
> 
> 时间：2012-10-12T18:06:21.687
> 
> 标签：asp.net, sql-server

我有一个 SQL Server(SQL Azure) 表，它的查询率很高，但每个月只更新几次。

我想知道我有哪些选项可以在应用程序端缓存结果集，这样它就不必一直访问 SQL Server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:58:29.170

一种选择是仅`[OutputCache]`返回视图的操作方法。您甚至可以摆脱 SQL 依赖缓存，但不确定这是否适用于 Azure。

另一种选择是尝试[为 EF 实现二级缓存](http://www.codeproject.com/Articles/435142/Entity-Framework-Second-Level-Caching-with-DbConte)。

另一种选择是拥有完全不同的读取模型。这样，您就不会查询该表，而是查询更接近 IIS 和/或比 SQL Azure 更快的其他内容（例如来自 Azure 缓存的 NoSQL 或 JSON）。

# javascript - 在 ruby on rails 中提交表单，其中 action 是您的完整网址

> ID：12864719
> 
> 赞同：1
> 
> 时间：2012-10-12T18:06:25.807
> 
> 标签：javascript, ruby-on-rails, model-view-controller, post, iframe

所以跟进这个问题：[从 ruby​​ on rails ssl post 收到错误的请求](https://stackoverflow.com/questions/12844277/getting-bad-request-from-ruby-on-rails-ssl-post)。

我解决了这个问题，我在交易的下一步没有问题。我面临的问题是他们的响应作为 html 文档上的隐藏表单发送到 iFrame。然后表单发布到我提供给他们的 url。

我尝试让他们`localhost:3000/policies/complete`为帖子制作控制器操作和路由资源，但它没有显示任何内容。- 它只是说`javascript error unable to load resource: localhost:3000/policies/complete`

所以然后我尝试了`/policies/complete`（使用我的策略控制器中的对应方法`complete`）但由于某种原因而不是发布到该操作 - 它发布到`theirwebserver.com/policies/complete`显然不存在。

因此，由于看起来我必须传入整个 url 才能使其正常工作，因此表单将如下所示：`<form method='Post' action='whatever whole url I give them'>`

表格如下所示：

```
<form name="frmReturn" method="Post" action="localhost:3000/policies/hosted_checkout_complete">
    <input name="PaymentID" type="hidden" value="the value you need really badly!">
    <input name="ReturnCode" type="hidden" value="0">
    <input name="ReturnMessage" type="hidden" value="Your transaction has been approved."> 
</form> 
```

Tl:DC 我如何设置我的应用程序来处理它？

我可以要求他们`get`用来将信息发回给我。如果这样更容易设置和接受，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:55:20.283

您需要将协议（http:// 或 https://）添加到操作的前面=

```
<form name="frmReturn" method="Post" action="http://localhost:3000/policies/hosted_checkout_complete"> 
```

但是，我不建议这样做……您完全错过了 Rails 路由的要点。你应该做这样的事情：

```
<form name="frmReturn" method="Post" action="<%= resource_url %>"> 
```

理想情况下，您会使用 Rails 表单构建器：

```
<%= form_for :resource, :action => 'hosted_checkout_complete' do %> 
```

# c - 如何获取使用 C 程序打开特定端口的进程的进程 ID？

> ID：12864721
> 
> 赞同：-1
> 
> 时间：2012-10-12T18:06:33.027
> 
> 标签：c, networking, tcp, port

我想知道哪个进程正在打开一个端口，我该如何在c代码中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:17:51.420

我建议您查看“netstat”命令的源代码。 `netstat --inet -p`将为您提供所需的信息，因此代码将具有阅读该信息所需的一切。

[http://freecode.com/projects/net-tools](http://freecode.com/projects/net-tools)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:18:52.683

如果您不介意从命令行执行此操作，只需使用

网络统计-anp | grep [你想要的端口]

# html - 多个选定的文件名到特定元素

> ID：12864730
> 
> 赞同：1
> 
> 时间：2012-10-12T18:07:02.073
> 
> 标签：html, file, upload, html-table

我想选择多个文件进行上传并在表格中显示文件的名称。我在这个 jsFiddle 中发现了类似的东西：

[http://jsfiddle.net/jonathon/bdbXk/](http://jsfiddle.net/jonathon/bdbXk/)

这个小提琴使用 li 元素。但我希望将列表插入到由 id 或 class 标识的特定 td 元素中。

这个小提琴描述了我正在尝试的内容。

[http://jsfiddle.net/5vecv/5/](http://jsfiddle.net/5vecv/5/)

文件名只能插入到具有“文件”类的 td 中。或者只有每行的第一个 td ..

# eclipse - 了解 Eclipse 的内存参数

> ID：12864732
> 
> 赞同：28
> 
> 时间：2012-10-12T18:07:12.627
> 
> 标签：eclipse, jvm

我刚刚在 Linux 64 位上安装了[Eclipse 4.2 (Juno)。](http://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases)Stack Overflow上看了几个`Eclipse.ini`线程，还是不明白不同内存参数之间的关系。

一方面，有一些用于[VM](https://en.wikipedia.org/wiki/Virtual_machine#Process_virtual_machines)的参数`-vmargs`（例如`-Xms`和`-Xmx`、`-XX`），而其他参数（例如`--launcher.XXMaxPermSize`）则直接提供给 Eclipse。

这些参数之间有什么关系？我如何为内存超过 8 GB 的机器设置它们？

我知道长堆栈溢出问题*[什么是 Eclipse 的最佳 JVM 设置？](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)*，但我想**学习**如何自己调整这些参数。

供参考，安装后Juno默认参数为：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.cpp.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-XX:MaxPermSize=256m
-Xms40m
-Xmx512m 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T19:28:37.343

如果您在 Oracle/Sun JVM 上运行 Eclipse，我会忽略`--launcher.XXMaxPermSize`（我个人将其删除）并专注于`-XX:MaxPermSize`,`-Xms`和`-Xmx`.

原因`--launcher.XXMaxPermSize`是一些非 Oracle/Sun JVM 会阻塞`-XX:MaxPermSize`. 启动器被编程为检测 JVM 并有条件地提供`-XX:MaxPermSize`. 这当然被`-XX:MaxPermSize`默认**eclipse.ini**文件中的显式设置所破坏。这看起来像一个错误。

我从不乱`-Xms`设置。我设置`-Xmx1024m`和`-XX:MaxPermSize=512m`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-11T13:36:21.210

为了完整起见，需要注意的是，Java 8 HotSpot 中将永久代（PermGen）替换为 MetaSpace。

因此，如果您使用的是 Java 8 或更高版本的 Oracle JVM，您不必再担心这些参数，并且可以安全地从 eclipse.ini 中删除这些参数：

```
--launcher.XXMaxPermSize
-XX:MaxPermSize 
```

此后，该`-XX:MaxPermSize`参数被 JVM 忽略并生成警告（请参阅：[JDK 8 中的 PermGen 消除](https://stackoverflow.com/questions/18339707/permgen-elimination-in-jdk-8)）。

# ruby - 如何在 Ruby 中创建网格/热图图像？

> ID：12864739
> 
> 赞同：0
> 
> 时间：2012-10-12T18:07:36.287
> 
> 标签：ruby, graphics, data-visualization

寻找一种通过在 Ruby 中生成简单图形来可视化数据的方法。

是否有一个 gem 可以让您创建简单的图像，例如棋盘？

它应该是：

*   便于使用
*   红宝石 1.9.3
*   不需要 Rails
*   以至少一种常见格式保存图像，例如 jpeg、gif 或 png

编辑：经过更多研究，我发现图表的名称是网格或热图。找到这个[RubyVis](http://rubyvis.rubyforge.org/examples/1_basic_grid.html)库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:18:39.467

[RMagick](http://rmagick.rubyforge.org/)文档齐全，支持多种常见文件格式。它是 ImageMagick 的接口，因此您需要安装它才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:20:54.940

Chris Lowis 于 2009 年 12 月在伦敦的 Ruby Manor 会议上发表了关于在 Ruby 中进行可视化的演讲。也许您可能对他的[幻灯片](https://github.com/chrislo/data_visualisation_ruby/raw/master/slides.pdf)[pdf] 和[示例](https://github.com/chrislo/data_visualisation_ruby)感兴趣？

# c++ - 将公历日期转换为儒略日期，然后再返回（带时间）

> ID：12864741
> 
> 赞同：3
> 
> 时间：2012-10-12T18:01:13.773
> 
> 标签：c++, date, gregorian-calendar, date-conversion

我正在编写一个程序，该程序必须将当前的公历日期和时间转换为儒略日期，然后再转换回公历门。最终，我将需要添加能够添加年、月、日、小时、分钟和秒的功能，但我需要先把这部分排除在外。

现在我有从公历日期到儒略日期的转换，所以从逻辑上讲，我觉得我应该能够以某种方式简单地反转等式，这将相当简单。但是，我正在执行一个两步过程，首先将公历日期转换为儒略日数，然后转换为儒略日数（差异是天数不包括时间）。所以将它转换回来应该只是意味着我必须从等式中得到小时、分钟和秒，然后将儒略日数单独转换回公历日期。我想这是一个简单的过程，将小时、分钟和秒划分和调制 3 次，通常我对数学和逻辑思考这些事情非常擅长，但我的大脑根本无法在这个上运作。

```
jdn_t gregorian_to_jd(year_t year, month_t month, day_t day, hour_t hour, minute_t     minute, second_t second)
{ 
//implement the conversion from gregorian to jdn
long long a = (14 - month)/12;
long long y = year + 4800 - a;
long long m = month + 12*a - 3;

jdn_t jdn = day + (153 * m + 2)/5 + 365*y + y/4 - y/100 + y/400 - 32045 - 0.5;
jdnt_t jdnt = jdn + (hour-12)/24 + minute/1440 + second/86400;
}

void jdn_to_gregorianTime(jdnt_t jdnt,year_t & year, month_t & month, day_t & day,   hour_t & hour, minute_t & minute, second_t & second)
{
    long long j = static_cast<long long>(jdnt + 0.5) + 32044;
    long long g = j / 146097;
    long long dg = j % 146097;
    long long c = (dg / 36524 + 1) * 3 / 4;
    long long dc = dg - c * 36524;
    long long b = dc / 1461;
    long long db = dc % 1461;
    long long a = (db / 365 + 1) *3 / 4;
    long long da = db - a * 365;
    long long y = g * 400 + c * 100 + b * 4 + a;
    long long m = (da * 5 + 308) / 153 - 2;
    long long d = da - (m+4) * 153 / 5 + 122;
    year = y - 4800 + (m + 2) / 12;
    month = (m + 2) % 12 + 1;
    day = static_cast<day_t>(d + 1); 
```

下半部分是一旦我能够计算出我的小时、分钟和秒后我需要的计算。他们所做的只是将儒略日数放回公历日期。

维基页面为那些不熟悉的人解释了整个朱利安日期：[http ://en.wikipedia.org/wiki/Julian_day](http://en.wikipedia.org/wiki/Julian_day)

我希望我已经很好地解释了我需要什么！感谢你们提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-11T15:05:25.933

这个[免费的开源 C++11/14 日期/时间库](https://github.com/HowardHinnant/date)使用该基础，通过设置从*所有*日历到 Unix Time 和从[Unix Time](https://en.wikipedia.org/wiki/Unix_time)`<chrono>`的转换来促进*任意*两个日历之间的转换。

 *它恰好有一个儒略历和两个公历变体（{year,month,day} 和 {year,month,weekday,index}）、基于 ISO 周的日历和（不完美的）伊斯兰日历. 日历相对容易添加，并且一旦添加，日历就可以与所有其他日历互操作，并且`<chrono>`具有`system_clock::time_point`任何精度。

示例代码：

```
#include "date.h"
#include "julian.h"
#include <iostream>

int
main()
{
    using namespace date::literals;
    auto ymd = 2016_y/oct/11;
    auto jymd = julian::year_month_day{ymd};
    auto ymd2 = date::year_month_day{jymd};
    std::cout << ymd << '\n';
    std::cout << jymd << '\n';
    auto ymd2 = date::year_month_weekday{jymd};
} 
```

输出：

```
2016-10-11
2016-09-28
2016/Oct/Tue[2] 
```

如果您想了解有关底层算法的更多详细信息，请在此处讨论（并证明）它们：

[http://howardhinnant.github.io/date_algorithms.html](http://howardhinnant.github.io/date_algorithms.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T05:08:53.310

你可以只使用这个库。 [http://www.iausofa.org/current_C.html](http://www.iausofa.org/current_C.html) 或者通过查看它并使用这些概念来获得一些洞察力。我以前用过它，它非常简单。虽然有很多指针，但请做好准备。我知道的一个是 cal2jd，另一个是 jd2cal。那些给你日期。还有更多时间和格式。它在文档中有一些示例。如果你很想用 C++，那么 [http://www.naughter.com/aa.html](http://www.naughter.com/aa.html) 有天文计算的功能。祝你好运！其他一些资源... [http://129.79.46.40/~foxd/cdrom/musings/formulas/formulas.htm](http://129.79.46.40/~foxd/cdrom/musings/formulas/formulas.htm)

[http://robm.fastmail.fm/articles/date_class.html](http://robm.fastmail.fm/articles/date_class.html)

[https://www.autoitscript.com/forum/topic/182372-standalone-moon-phase-calculation/](https://www.autoitscript.com/forum/topic/182372-standalone-moon-phase-calculation/)

[从儒略日计算公历年、月、日的默认值是什么（比如 1721119）](https://stackoverflow.com/questions/16896311/what-are-the-default-values-taken-say-1721119-to-calculate-the-gregorian-year)

[http://www.projectpluto.com/source.htm](http://www.projectpluto.com/source.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T08:41:34.213

这是一种解决方案，其中完整时间以 hhmmss 格式返回，但您可以单独获取它们。在 //hours: secs/3600 % 24, min: secs/60 % 60, secs secs % 60 处查看函数的结尾

无符号 JulianToTime(double julianDate) { double 余数 = julianDate - (unsigned)julianDate;

```
 const unsigned long long base = 1000000; 
 const unsigned long long halfbase = 500000; 
 const unsigned secsPerDay = 86400; 

 // "rounded" remainder after adding half a day 
 unsigned long long rndRemainder = (unsigned long long)(remainder * base + halfbase) % base; 

 rndRemainder *= secsPerDay; 

 // "rounded" number of seconds 
 unsigned long long nsecs = (rndRemainder + halfbase) / base; 

 //hours: secs/3600 % 24, min: secs/60 % 60, secs secs % 60 
 unsigned rtn = (nsecs/3600 % 24) * 10000 + (nsecs/60 % 60) * 100 + (nsecs % 60); 
 return rtn; 
```

}*

# nhibernate - NHibernate 实体未更新

> ID：12864750
> 
> 赞同：3
> 
> 时间：2012-10-12T18:08:22.463
> 
> 标签：nhibernate, any

什么会导致更改不为现有实体生成更新语句？我有一个命令可以更新实体上的状态枚举。它将它从活动更改为已删除。我使用相同的命令（通常）来更新其他实体上的状态位而没有问题。我可以在相关实体上更新单个字符串，而无需更改任何其他内容，并且更新过程正常。我可以在NHProf中观察到这一切……

我想我的问题是：

*   什么会导致 NHibernate 在枚举值（而不是其他......或其他东西？）被更改时不更新实体？
*   追踪此类问题的最佳方法是什么？

谢谢你的帮助！

线索。基本类型的属性是：

```
public virtual EntityStatus Status { get; protected set; } 
```

如果我将 setter 公开并直接分配给它，NHibernate 就会很好地接受它。当它受到保护时，我在实体上调用一个方法并在那里更新状态。这是否提供任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:29:54.003

所以，这是一个有趣的事情，而且追查起来很痛苦。事实证明，在 Any 映射中使用延迟加载以某种方式在某处搞砸了老狗。因此，当我这样做时，调用虚拟方法来更新受保护的属性不起作用：

```
Any(o => o.Thing, typeof(Guid), m =>
                        {
                            m.IdType<Guid>();
                            m.MetaType<string>();
                            m.MetaValue("Squirmy", typeof(SquirmyThing));
                            m.MetaValue("Odoriferous", typeof(OdoriferousThing));
                            m.Columns(id => id.Name("ThingId"), cr => cr.Name("ThingType"));
                            m.Lazy(true);
                            m.Cascade(Cascade.Persist);
                        }); 
```

但是当我这样做时它确实有效：

```
Any(o => o.Thing, typeof(Guid), m =>
                        {
                            m.IdType<Guid>();
                            m.MetaType<string>();
                            m.MetaValue("Squirmy", typeof(SquirmyThing));
                            m.MetaValue("Odoriferous", typeof(OdoriferousThing));
                            m.Columns(id => id.Name("ThingId"), cr => cr.Name("ThingType"));
                            m.Lazy(false);
                            m.Cascade(Cascade.Persist);
                        }); 
```

无论如何，我真的希望这可以帮助其他疯狂到使用 Any 映射的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:59:34.283

如果您要更新的实体不在会话对象中，则可能会发生这种情况。确保您没有关闭在其中查询或附加原始对象的会话。

还要确保您实际上将值更改为与以前不同的值。如果您已`dynamic-update`为此实体启用并且您实际上并未更改该值，则它不会生成更新。

> dynamic-update（可选，默认为 false）：指定 UPDATE SQL 应该在运行时生成，并且只包含那些值已经改变的列。

我还将启用 NHibernate 日志记录并查看它吐出的内容，您可能会在日志中找到一些有用的信息。

老实说，我还会在您的问题中发布有问题的代码。通过查看代码，总是更容易判断哪里可能出错。

# javascript - Javascript按带有分隔符的字符串中的字符串排序

> ID：12864751
> 
> 赞同：2
> 
> 时间：2012-10-12T18:08:24.837
> 
> 标签：javascript, sorting

我有一个这样的字符串：

```
var allString = "|AQW12|2|34|33|12|<br>|AQW11|2|34|33|12|<br>|AQW09|2|34|33|12|<br>"; 
```

基本上，这是某种表格，其中列名将被分隔`|`并分隔`<br>`行。

我的问题是如何按第 2 列（即 AQW12、AQW11 等）对 allString 进行排序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:27:42.353

快速解决方案，请原谅错误的变量名：

```
var allString = "|AQW12|2|34|33|12|<br>|AQW11|2|34|33|12|<br>|AQW09|2|34|33|12|<br>";

var l1 = allString.split("<br>");
var l2 = l1.map( function(elem) { return elem.split("|"); } )
var l3 = l2.sort( function(a,b) { return a[1].localeCompare(b[1]); } )
var l4 = l3.map( function(elem) { return elem.join("|"); } );
var output = l4.join("<br>");
console.log(allString);
console.log(output); 
```

输出：

```
|AQW12|2|34|33|12|<br>|AQW11|2|34|33|12|<br>|AQW09|2|34|33|12|<br>
|AQW09|2|34|33|12|<br>|AQW11|2|34|33|12|<br>|AQW12|2|34|33|12|<br> 
```

该变量`l3`包含数组形式的数据：

```
[ [ 'AQW09', '2', '34', '33', '12' ],
  [ 'AQW11', '2', '34', '33', '12' ],
  [ 'AQW12', '2', '34', '33', '12' ] ] 
```

有关评论`localCompare`，请参阅[https://stackoverflow.com/a/2167619/1689451](https://stackoverflow.com/a/2167619/1689451)

当然，如果你想炫耀，你也可以使用方法链:)

```
var output = allString.split("<br>")
  .map( function(elem) { return elem.split("|"); } )
  .sort( function(a,b) { return a[1].localeCompare(b[1]); } )
  .map( function(elem) { return elem.join("|"); } )
  .join("<br>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:25:27.720

如果此列始终采用相同的模式，例如 3 个字母和 2 个数字（AQW12、AQW11）。

你可以这样做：

```
var allString  = "|AQW12|2|34|33|12|<br>|AQW11|2|34|33|12|<br>|AQW09|2|34|33|12|<br>"
var allRows    = allString.split('<br>');
var sortedRows = allRows.sort(function(a,b){ 

  if(a && b ){
      var arrA = a.split('|');
      var arrB = b.split('|');

      return new Number(arrA[1].substr(3,2)) - new Number(arrB[1].substr(3,2));
  }

  return null;
});

var sortedString = sortedRows.join('<br>');

>> |AQW09|2|34|33|12|<br>|AQW11|2|34|33|12|<br>|AQW12|2|34|33|12|<br> 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:28:08.620

可能最简单的方法是将其拆分为一个数组，对其进行排序并重新组合：

```
var rows = allString.split("<br>");
//sort...
var sortedString = rows.join("<br>"); 
```

JavaScript 数组有一个内置的排序方法，它接受一个自定义比较函数，您可以定义它来比较每个字符串中的第二项：

```
function compare(rowA, rowB) {

    var rowAcol2 = rowA.split("|")[1];
    var rowBcol2 = rowB.split("|")[1];

    return rowAcol2.localeCompare(rowBcol2);
} 
```

然后传入 sort 方法：

```
rows.sort(compare); 
```

[这个 JSBin 展示了这一切。](http://jsbin.com/onohoq/3/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:29:29.287

```
var allString = "|AQW12|2|34|33|12|<br>|AQW11|2|34|33|12|<br>|AQW09|2|34|33|12|<br>";

​var arr = allString.split("<br>");

var re=/AQW([\d]+)/;
​arr.sort(function(a,b){
    if(!(a && b)) return -1;
    x=a.split("|")[1];
    y=b.split("|")[1];

    return(parseInt(x.match(re)[1]) - parseInt(y.match(re)[1]));
});

console.log(arr.join("<br>")); 
```

# perl - Unicode和解码字符串之间的区别

> ID：12864752
> 
> 赞同：0
> 
> 时间：2012-10-12T18:08:26.220
> 
> 标签：perl, unicode, decode

是否`decoded strings`没有额外的属性并且`Unicode`可以互换？

更新：

如果我写会有什么不同吗

```
subroutine expects decoded strings. 
```

或写

```
subroutine expects Unicode strings. 
```

?

```
sub subroutine {
    my $unicode = shift;
    utf8::upgrade( $unicode );
    my $gcs = Unicode::GCString->new( $unicode );
    my $colwidth = $gcs->columns();
    return $colwidth;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:10:28.673

假设我们正在讨论解码字符编码（UTF-8、cp1252 等），是的。

编码`decode`产生一串 Unicode 代码点。“Unicode 字符串”是对结果的恰当描述。

请注意，“Unicode 字符串”不是“使用 UTF8=1 格式存储的字符串”的合适替代品。与返回的字符串不同`decode`，使用 UTF8=1 格式存储的字符串不一定是 Unicode 代码点字符串。

# java - BufferedImageOp.filter() 抛出通道错误

> ID：12864760
> 
> 赞同：3
> 
> 时间：2012-10-12T18:08:42.653
> 
> 标签：java, image, image-processing

`BufferedImage`我正在尝试使用`BufferedImageOp`该类实现用于反转每个像素的蓝色部分的算法，如此[处](http://www.javaworld.com/javaworld/jw-09-1998/jw-09-media.html?page=1)所述。我的尝试导致了这种方法的创建：

```
private BufferedImage getInvertedVersion(BufferedImage source) {
     short[] invert = new short[256];
     short[] straight = new short[256];
     for (int i = 0; i < 256; i++) {
        invert[i] = (short)(255 - i);
        straight[i] = (short)i;
     }

     short[][] blueInvert = new short[][] { straight, straight, invert }; //Red stays the same, Green stays the same, Blue is inverted
     BufferedImageOp blueInvertOp = new LookupOp(new ShortLookupTable(0, blueInvert), null);

     //This produces error #1 when uncommented
     /*blueInvertOp.filter(source, source);
     return source;*/

     //This produces error #2 instead when uncommented
     /*return blueInvertOp.filter(source, null);*/
} 
```

但是，当我调用`BufferedImageOp`类的 .filter 方法时，我遇到了与通道数或字节数相关的错误。上面代码的注释部分产生了这些相应的错误：

错误 #1：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Number of channels in the src (4) does not match number of channels in the destination (2)
at java.awt.image.LookupOp.filter(LookupOp.java:273)
at java.awt.image.LookupOp.filter(LookupOp.java:221) 
```

错误 #2：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Number of color/alpha components should be 4 but length of bits array is 2
at java.awt.image.ColorModel.<init>(ColorModel.java:336)
at java.awt.image.ComponentColorModel.<init>(ComponentColorModel.java:273)
at java.awt.image.LookupOp.createCompatibleDestImage(LookupOp.java:413) 
```

链接中的代码很旧，（它是在 1998 年编写的！）所以我认为从那时起发生了一些变化，这就是代码不再有效的原因。但是，我还没有找到几乎同样能解释这个概念的另一个来源，这是我最关心的问题。

谁能解释这些错误的含义以及如何解决它们？或者更好的是，给我指出一个关于如何操作图像的更新但仍然全面的教程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T05:07:25.857

我遇到了同样的事情......答案是使用您正在寻找的颜色模型创建目标图像。此外，short[][] 数据还需要包含 Alpha 通道的维度。这是我通过反复试验偶然发现的工作代码示例：

```
short[] red = new short[256];
short[] green = new short[256];
short[] blue = new short[256];
short[] alpha = new short[256];

for (short i = 0; i < 256; i++) {
  green[i] = blue[i] = 0;
  alpha[i] = red[i] = i;
}
short[][] data = new short[][] {
    red, green, blue, alpha
};

LookupTable lookupTable = new ShortLookupTable(0, data);
LookupOp op = new LookupOp(lookupTable, null);
BufferedImage destinationImage = new BufferedImage(24, 24, BufferedImage.TYPE_INT_ARGB);
destinationImage = op.filter(sourceImage, destinationImage); 
```

这对我有用。

# javascript - Phonegap 设备就绪与文档就绪

> ID：12864766
> 
> 赞同：10
> 
> 时间：2012-10-12T18:09:17.973
> 
> 标签：javascript, cordova

我遇到了 phonegap 设备就绪事件的问题。我在 iOS 6.0 下测试。

当 device ready 被触发时，DOM 还没有准备好。如果我将事件绑定到事件侦听器中的某些 DOM 元素`deviceready`，我将不会收到任何通知，因为这些元素在此早期不存在。

那么等到 DOM 和 phonegap 都完成加载的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-21T16:47:32.067

如果你正在使用 jquery 试试这个

```
$(document).ready(function(){

    document.addEventListener("deviceready",onDeviceReady,false);       
});

function onDeviceReady(){
    //write your function body here

} 
```

如果您使用的是 javascript，请尝试此操作

```
if(document.readyState === "complete") {
  document.addEventListener("deviceready",onDeviceReady,false); 
}

function onDeviceReady(){
        //write your function body here

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:22:21.887

尝试这样的事情：

```
function onLoad(){
  document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady(){
  // Now safe to use the PhoneGap API
} 
```

然后：

```
<body onload="onLoad()"> 
```

这将确保在调用 deviceready 之前 DOM 已准备就绪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T13:32:17.573

我使用基于 PhoneGap 的应用程序的最佳体验是使用[FastClick](https://github.com/ftlabs/fastclick)库并像这样初始化您的应用程序：

```
<script type="text/javascript" src="vendor/fastclick/lib/fastclick.js"></script>

<script type="text/javascript">
    window.addEventListener('load', function() {
        FastClick.attach(document.getElementById('container'));

        document.addEventListener('deviceready', function () {
            // Initialize your app here
        });
    });
</script> 
```

您还可以查看此[答案](https://stackoverflow.com/a/1236040/1109883)以获取有关文档加载事件的更多详细信息。

FastClick 必须用于消除移动浏览器上物理点击和点击事件触发之间的 300 毫秒延迟。

# jquery - $(".sth").attr("id"); 返回多个值，未定义为第一个

> ID：12864771
> 
> 赞同：0
> 
> 时间：2012-10-12T18:09:36.163
> 
> 标签：jquery, jquery-ui

以下代码生成两个警报框，第一个包含`undefined`，第二个包含 id 属性。当我添加`return false`到最后时，它只显示`undefined`，并且不返回 id。我对这个 jquery 很陌生。这段代码背后的想法是，当您单击 时`<a href="/abcd" id="abc"></a>`，显示`<ul class="abc"></ul>`，它的*显示*最初设置为*none*。

```
$(".navgbr-itm").click(function(){
  target_menu = $(this).attr("id");
  alert(target_menu);
  //$("."+target_menu).toggle();
}); 
```

我使用 jquery 1.8.2 和 jquery-ui 1.9 。我正在将 jquery ui 用于与此片段无关的某事（用于图像滑块）。作为说明，我必须在点击后取消导航。

html:

```
<nav id="main-navgbr" class="htmlf-block">  
    <ul id="main-navgbr-itms" class="navgbr-itms">  
      <li id="main-nvgbr-itm-academc" class="navgbr-itm"><a  
        href="/akademik" class="navgbr-itm">Akademik</a></li>  
      <li id="main-nvgbr-itm-idari" class="navgbr-itm"><a  
        href="/idari" class="navgbr-itm">İdari / Personel</a></li>  
      <li id="main-nvgbr-itm-ogrn" class="navgbr-itm"><a  
        href="/ogrenci" class="navgbr-itm">Öğrenci</a></li>  
      <li id="main-nvgbr-itm-arastr" class="navgbr-itm"><a  
        href="/arastirma" class="navgbr-itm">Araştırma</a></li>  
      <li id="main-nvgbr-itm-hast" class="navgbr-itm"><a  
        href="/hastaneler" class="navgbr-itm">Hastaneler</a></li>  
      <li id="main-nvgbr-itm-ktph" class="navgbr-itm"><a  
        href="/kutuphane" class="navgbr-itm">Kütüphane</a></li>  
      <li id="main-nvgbr-itm-bshi" class="navgbr-itm"><a   
        href="/bshi" class="navgbr-itm">Basın / Halkla İlişkiler</a></li>   
      <li id="main-nvgbr-itm-blog" class="navgbr-itm"><a  
        href="/bloglar" class="navgbr-itm">Bloglar</a></li>  
    </ul>
</nav> 
```

我用这个页面尝试了 w3c 验证器，它验证了。我基本上是为了培训目的重新创建我的大学网站。这个文件是通过`lighttpd`服务器运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:17:18.280

试试这个：

```
<a href="#" class="menuitem" data-target-menu="mymenu">Click Me</a>

<ul id="mymenu" style="display:none;">
    <li>Submenu 1</li>
    <li>Submenu 2</li>
    <li>Submenu 3</li>
    <li>Submenu 4</li>
</ul>

<script>
$(function() {
    $('.menuitem').click(function() {
        $('ul#' + $(this).data('target-menu')).toggle();
    }
});
</script> 
```

在这里，我向您介绍`$.data`jQuery 实用程序。它可以帮助您将数据存储在标签的特定`"data-*"`属性中。

您可以在 jQuery 文档中查看更多信息：

> [http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:20:47.947

您的 HTML 中有嵌套`.navgbr-item`元素。这意味着单击链接将触发 the`a`和`li`元素的事件处理程序。这些`a`元素虽然没有 ID，但您会得到`undefined`.

不要将事件处理程序绑定到`li`元素和`a`元素，而是`li`仅将其绑定到元素：

```
$("li.navgbr-itm").click(function(){
  target_menu = $(this).attr("id");
  alert(target_menu);
  //$("."+target_menu).toggle();
}); 
```

[HTML5`data-`属性](http://ejohn.org/blog/html-5-data-attributes/)也是存储数据的好方法。

# search - Marklogic - 匹配约束 X 次的结果（不仅仅是单个匹配）

> ID：12864774
> 
> 赞同：1
> 
> 时间：2012-10-12T18:09:45.820
> 
> 标签：search, xquery, marklogic

假设我有 2 个文件：

```
<doc1>
  <a>the dog</a>
  <a>the cat</a>
  <a>the human</a>
</doc1> 
```

和

```
<doc2>
  <a>the dog</a>
  <a>foo</a>
  <a>bar</a>
</doc2> 
```

现在对于 Marklogic，我想在它们中搜索“the”，这样我就可以运行：

```
search:search(
  'a:the',
  <options xmlns="http://marklogic.com/appservices/search">
    <constraint name="a">
        <value>
            <term-option>case-insensitive</term-option>
            <element ns="" name="a"/>
        </value>
    </constraint>
  </options>
) 
```

这可行，但返回两个文档（这是我要求的）但是如果我只想要在约束上有超过 1 个匹配的结果...即。'给我有 2+ 个节点的文档，带有“the”'

我不知道从哪里开始。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:47:15.593

[您在http://markmail.org/message/gaehhxnr7qb2un5p#query:+page:1+mid:vxjmjuh2wflofa67+state:results](http://markmail.org/message/gaehhxnr7qb2un5p#query:+page:1+mid:vxjmjuh2wflofa67+state:results)上的问题的答案似乎不错。总结线程，Rob 和 John 都指出了`min-occurs`选项`cts:search`，Colleen 补充说：

> 要在 Search API 中启用它，您需要在该元素上配置一个单词约束，添加`<term-option>min-occurs=2</term-option>`

Mary 指出，索引查找将是

> ...只要您启用了正确的位置，就可以准确地处理像这样的简单情况。
> 
> 如果您在其上运行 xdmp:plan 并在最终计划中看到 min-occurs，则您启用了正确的位置。

澄清一下：虽然 Colleen 提到了一个词约束，但[http://docs.marklogic.com/cts:element-value-query](http://docs.marklogic.com/cts:element-value-query)显示了相同的选项可用于`cts:element-value-query`. 因此，您也应该能够将其与值约束一起使用。

# android - 基于离线位置的 android 应用程序

> ID：12864775
> 
> 赞同：6
> 
> 时间：2012-10-12T18:09:47.647
> 
> 标签：android, google-maps, navigation, location, offline

我正在尝试制作一个应用程序，在地图上显示一些兴趣点以及一些简要信息，当我单击它们时。我还想将我在地图上的位置显示为地图上的一个点。这些点指的是一些考古方面，因此不会有互联网报道。

我设法从谷歌开发人员方面成功完成了[MapView 教程](https://developers.google.com/maps/documentation/android/hello-mapview) 。

现在我的问题是这样的：

1.  如何离线使用地图？
2.  如何添加将自动更新的位置？
3.  如何在点之间绘制一条自定义线，以便我在两侧导航人们？

将来我想将基于位置的 AR 功能添加为其他活动。我只是在有任何限制的情况下添加此信息。

# php - 从 Mysql 行中提取 URL

> ID：12864776
> 
> 赞同：0
> 
> 时间：2012-10-12T18:10:00.997
> 
> 标签：php

人们上网并提交一篇带有标题和描述的文章。人们经常包含链接，但它们显示为基本文本。我想要一种方式，当人们包含一个 url 时，它被识别为一个工作链接。我写了一个代码，但它只扫描一行，似乎在实际表中不起作用，因为它在表外回显。

基本上...我想要一个表格，当提交链接时，会生成一个超链接。有任何想法吗？下面这个更新的代码保持同样的事情发生。

我的代码如下：

```
 $query = "SELECT * FROM rumours ORDER BY id DESC";
     $query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
    while ($row = mysql_fetch_assoc($query)) {
$id = $row['id'];
$band = $row['band'];
$title = $row['Title'];
$description = $row['description'];

$reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";

// The Text you want to filter for urls
 // Check if there is a url in the text
  if(preg_match($reg_exUrl, $description, $url)) {
   // make the urls hyper links
   preg_replace($reg_exUrl, '<a href="'.$url[0].'">'.$url[0].'</a>', $description);

      }

   echo "<table border='1'>";
   echo "<tr>";
   echo "<td> $title  </td>";
   echo "</tr>";
   echo "<tr>";
   echo "<td class = 'td1'> $description </td>";
   echo "</tr>";
   echo "</table>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:13:02.377

`$reg_exUrl`没有在任何地方回响。所以，你`a href`没有出现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:11:35.430

这是因为您在替换为`preg_replace`...之前打印出来

像这样将你的 preg 放在你的循环中：

```
$query = "SELECT * FROM rumours ORDER BY id DESC";
$query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
while ($row = mysql_fetch_assoc($query)) {
    $id = $row['id'];
    $band = $row['band'];
    $title = $row['Title'];
    $description = $row['description'];

    $reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";

    // The Text you want to filter for urls

    // Check if there is a url in the text
    if(preg_match($reg_exUrl, $description, $url)) {
           // make the urls hyper links
           preg_replace($reg_exUrl, '<a href="'.$url[0].'">'.$url[0].'</a>', $description);

    }

    echo "<table border='1'>";
    echo "<tr>";
    echo "<td> $title  </td>";
    echo "</tr>";
    echo "<tr>";
    echo "<td class = 'td1'> $description </td>";
    echo "</tr>";
    echo "</table>";

} 
```

顺便说一句，尝试使用 PDO 或 mysqli_ 而不是常规的 mysql_ 函数。

# android - NDK 中的共享内存区域

> ID：12864778
> 
> 赞同：1
> 
> 时间：2012-10-12T18:10:10.203
> 
> 标签：android, android-ndk, shared-memory, parcel, ashmem

我想要一个`ashmem`从本机代码映射和访问的共享内存块（一个区域）。我还希望这个块被多个应用程序使用。我也希望它在 SDK 7 级（Android 2.1）上工作

有两条路线。我可以在本机代码中创建一个 ashmem 区域；但问题是 - 我如何将整数文件描述符传递给另一个进程？您可以通过 a 编组`FileDescriptor`对象`Parcel`，但无法围绕原始 FD 构造对象。还有`ParcelFileDescriptor`支持构造和检索整数 FD，但相关方法仅在 SDK 级别 12 或更高级别中支持。

或者，我可以创建一个`MemoryFile`. 在 Parcels 中传递它有一种丑陋的[方式。](https://stackoverflow.com/questions/8165216/what-is-the-use-of-memoryfile-in-android)但是我如何从中检索文件描述符，以便本机代码有一些东西`mmap()`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:43:15.313

在从 1.5 到 4.1 的所有 Android 版本上，`FileDescriptor`都有一个`int`名为`descriptor`. 它在早期版本的 Android 上是包私有的，在最近的版本上是私有的。通过一些刻意的访问控制颠覆，您可以通过反射或通过 JNI 访问它。默认情况下，每个都可以绕过访问控制——在反射的情况下，通过`Field.setAccessible()`，在 JNI 的情况下。

考虑到这一点，您**可以**围绕原生 FD构建一个`FileDescriptor`就好了。构造一个空白的，然后设置`descriptor`。这就是构建这些代码时 Android 代码的点点滴滴。

谁知道这个肮脏的黑客最终是否会破裂。幸运的是，在我的例子中，它不是核心功能——有一些优雅的退化。

如果平台允许，可以有条件地使用支持`ParcelFileDescriptor`的方法，使用字段访问黑客作为后备。这样，它将是相对未来的证明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-24T15:32:02.587

这个 jniCreateFileDescriptor() [https://android.googlesource.com/platform/libnativehelper/+/jb-dev/include/nativehelper/JNIHelp.h](https://android.googlesource.com/platform/libnativehelper/+/jb-dev/include/nativehelper/JNIHelp.h)在帮助库 libnativehelper.so 中有一个方法。它基本上与之前的答案中所述相同，但您可能会发现这种方法更简洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T18:43:19.873

这就是我在处理类似问题时的工作方式：

我没有使用 shmfd = open(SHM_PATH, O_RDWR) 来创建和获取文件描述符，而是将其替换为

```
int fd = ashmem_create_region("SharedRegionName", size); 
```

并使用文件描述符获取基地址：

```
int base_address = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0); 
```

// 写入数据 您可以使用返回描述符的本机函数将 base_address 从本机代码传递给您的 java 代码。

然后我创建了一个带有aidl接口的服务，并使用这个接口从另一个进程绑定了这个服务。从服务中，我使用 ParcelFileDescriptor 对象返回到另一个进程。您可以通过以下方式创建 ParcelFileDescriptor：

```
ParcelFileDescriptor desc = ParcelFileDescriptor.fromFd(fd); 
```

# language-agnostic - 在多种编程语言的源文件之间共享函数

> ID：12864779
> 
> 赞同：1
> 
> 时间：2012-10-12T18:10:19.817
> 
> 标签：language-agnostic, rpc, language-binding

当源文件用几种不同的编程语言编写时，我试图弄清楚如何在源文件之间共享函数。有没有办法在三个不同的源文件中共享用三种语言编写的函数，如下所示？我希望用每种语言编写的函数都可以从其他语言访问。

（澄清一下，所有源文件都在同一个文件夹中。）

Java 文件：

```
public class JavaFile{
    public static String generateStringFromRegex(String theRegex){
        //native Java function, implement this using xeger
    }
    public static String generateRandomString(String theString){
        //return the result from the corresponding Javascript function
    }
    public static int getFileText(String filename){
        //return the result from the corresponding C++ function
    }
} 
```

Javascript 文件：

```
function getFileText(fileName){
    //call the corresponding C++ function and return the value
}

function generateRandomString(theString){
    //native Javascript function
}
function generateStringFromRegex(int1, int2){
    //call the corresponding Java function and return the value
} 
```

C++ 文件：

```
#include<string>

int main(){

}

string generateRandomString(string theString){
    //call the corresponding Javascript function and return the value
}
string generateStringFromRegex(string theRegex){
    //call the corresponding Java function and return its value
}

string getFileText(string fileName){
    //native C++ function: get the text of a text file
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:43:21.803

让我解释一下函数调用机制是如何工作的，然后您将能够更清楚地了解什么是可能的，什么是不可能的。

调用函数时会发生什么？[在最顶层] 你调用一个带参数的函数，它可能会返回一个值。参数可以通过引用或值传递。返回地址必须存储在某个地方，以便被调用的函数知道从哪里跳回。

必须准备好参数：传递引用以便重用地址或按值传递，这意味着正在堆栈上创建副本。返回值必须存储在某个地方以供调用函数访问。这通常也在堆栈上[不一定是，可以是 CPU 上的寄存器，具体取决于 CPU 架构或编译器优化]。最后，在返回返回地址的同时也被返回。

对于每种语言，上述细节都不同且不兼容。这是您需要明确跨语言绑定的地方，这些绑定可以从一种语言翻译成另一种语言。此绑定被包装在库 [目标代码] 中。所以例如。C 程序不直接调用 Java 函数。它只是有一个未解析的符号，绑定包装器以兼容的方式解析该符号。这反过来又调用了java代码。

除非出于上述目的，中间有一个 JNI 接口，否则不能从 C 调用 Java 函数。如果没有在编译 C++ 库时显式添加支持，甚至无法从 C 代码调用 C++ 代码。

此外，如果您已经解释了 javascript 之类的语言，我不确定您是否可以调用编译语言。

所以我的答案是对于任意的语言集：这取决于语言，但答案大多是否定的。如果您编写绑定来支持您的库 [记住编译语言]：是的。

如果上述内容没有意义，请随时在评论中提问。

编辑：HTTP 用法：

当跨机器时，程序可以通过套接字相互通信，或者在同一台机器上使用文件/管道/共享内存。最终，基于 HTTP 的通信只不过是套接字。像 apache thrift 这样的东西也是一样的。它将使用套接字（跨机器）或管道（在同一台机器内）将数据发送到另一个程序。然后，Apache thrift 为另一端的另一种语言提供绑定。因此，您必须让多个程序运行通过套接字进行通信。这与在同一语言中的函数调用或使用对“链接”到正在运行的可执行文件中的对象库的绑定不同。希望您了解其中的区别。

用一种语言编写的程序可以与用另一种语言编写的程序通信吗？绝对我们一直都这样做。您的整个互联网基于不同的语言。您的操作系统和其中的软件使用大量语言，它们彼此无缝协作，因为它们都尊重彼此的界面。

作为开发人员，尽管您需要了解要在各种语言中使用函数，双方可能都必须使用 thrift，并且使用 RPC 抽象通过套接字进行通信和通过函数调用调用函数之间存在差异。希望你能得到图片。

# c# - 保存分割成 3 个不同字符串的部分字符串

> ID：12864780
> 
> 赞同：0
> 
> 时间：2012-10-12T18:10:23.297
> 
> 标签：c#, string, split

```
 /* string fecha_act = DateTime.Now.ToString("d/MM/yy"); */
date_act = "10-12-12"  
string[] splitting = date_act.Split('-');

foreach (string split in splitting)
{
    MessageBox.Show(split);
} 
```

上面的代码显示了字符串中的日期。该字符串将分为三个部分。也就是说，我需要将三个部分保存在三个不同的字符串中。

```
string day_act;
string month_act;
string year_act; 
```

我试过用计数器和开关来做，但它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T18:13:08.343

```
string day_act;
string month_act;
string year_act;

string[] separando = date_act.Split('-');

day_act = separando[0];
month_act = separando[1];
year_act = separando[2]; 
```

或者，更好的是，给自己一个真正的日期对象：

```
string date_act = "10-12-12";
var foo = DateTime.ParseExact(date_act, "MM-dd-yy", null); 
```

然后您可以查看类似`foo.Day`或的属性`foo.Month`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T18:12:58.517

这不行吗？它是如此简单，我怀疑你已经尝试过了。

```
day_act = separando[0];
month_act = separando[1];
year_act = separando[2]; 
```

**编辑**

所以你想要替代方法`Split`吗？这里有一些：

*   使用该`DateTime.Parse`方法的变体（如其他答案中所述）。

*   使用正则表达式。

    ```
    var match = Regex.Match(date, @"(?<day>\d+)-(?<month>\d+)-(?<year>\d+)");
    day_act = match.Groups["day"].Value;
    month_act = match.Groups["month"].Value;
    year_act = match.Groups["year"].Value; 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:21:12.627

两个答案都解决了我提出的问题，但为了彻底解决我的问题，我选择了一个完全不使用拆分的替代解决方案。在这种情况下，是一个子字符串。

```
day_act = date_act.Substring(0,2);
month_act = date_act.Substring(3,2);
year_act = date_act.Substring(6,2); 
```

# java - 传递参数

> ID：12864781
> 
> 赞同：0
> 
> 时间：2012-10-12T18:10:24.913
> 
> 标签：java, methods, parameters, arguments, return

我试图理解传递的参数，但遇到了一个问题。

假设我有以下代码：

我将值 60 传递给方法 someMethod。从那里我希望通过用户输入修改该值。一旦它被修改，我希望它将该值传递给另一个名为 getValue 的方法。getValue 方法然后返回该值。

这是问题所在：

1) 如果我要调用 someMethod，它还会再次调用我不想要的用户输入。

2）打印出getValue方法的值的正确方法是什么：

> **New.getValue(int 返回值);** 调用错误“意外的类型，所需的值，找到的类”

```
public class New {

    Scanner sc = new Scanner(System.in)

private int static num1 = 60;
someMethod(num1);

    public static int someMethod(int myValue)
    {
        //modify the integer
        System.out.println("Enter in the value to modify");
        myValue = sc.nextInt();
        //output the value to a getter method
        getValue(myValue);
        return myValue;
    }

    public static int getValue(int returnedValue)
    {
        return returnedValue;
    }

} 
```

与往常一样，如果您需要澄清，请询问！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:12:10.527

`someMethod(num1);`应该包含在您的`main`方法或其他方法中。

第二：您没有`sc`定义变量。所以，你的代码在那里也失败了。

第三：您没有定义`num1`. 它应该是`private static int num1 - 60;`

`getValue()`调用方法时需要传递实际值而不是定义。

例子：`System.out.println(getValue(50));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:20:31.730

试试这个...

**我还添加了修改部分......**

```
public class New {

private static int num1;

    public static int someMethod()
    {

        System.out.println("Enter in the value to modify");

        Scanner s = new Scanner(System.in);

        int temp = s.nextInt();

        return getValue(num1+temp); // Modification Done
    }

    public static int getValue(int returnedValue)
    {
        return returnedValue;
    }

    public static void main(String[] args){

        Scanner scan = new Scanner(System.in);

        New.num1 = scan.nextInt();
        int i = someMethod();
        System.out.println(i);

    }

} 
```

# javascript - 使用jQuery或javascript将json渲染成多列表

> ID：12864790
> 
> 赞同：0
> 
> 时间：2012-10-12T18:11:13.427
> 
> 标签：javascript, jquery, json

我正在尝试将 JSON 呈现到 HTML 表中。但难点在于它需要遍历 JSON 并在必要时呈现多个列。

对于下面的示例，我想要的是：

想要的结果

**想要的结果**

```
<table>
<tr><th>AppName</th><td>App 1</td><td>App 2</td></tr>
<tr><th>Last Modified</th><td>10/1/2012</td><td></td></tr>
<tr><th>App Logo</th><td>10/1/2012</td><td></td></tr>
blahblah
</table>

<table>
<tr><th>AppName</th><td>App 1</td></tr>
blahblah
</table> 
```

**JSON 示例**

```
"Records": [
    {
        "AppName": "App 1",
        "LastModified": "10/1/2012, 9:30AM",
        "ShipTo_Name": "Dan North",
        "ShipTo_Address": "Dan North",
        "ShipTo_Terms": "Dan North",
        "ShipTo_DueDate": "Dan North",
        "Items 1": [
            {
                "Item_Name": "Repairs",
                "Item_Description": "Repair Work"
            }
        ]
    },
    {
        "AppName": "App 2",
        "AppLogo": "http://www.google.com/logo.png",
        "LastModified": "10/1/2012, 9:30AM",
        "BillTo_Name": "Steve North",
        "Items 1": [
            {
                "Item_Name": "Repairs",
                "Item_Description": "Repair Work"
            }
        ]
    }
],
"Records": [
    {
        "AppName": "App 1",
        "LastModified": "10/1/2012, 9:30AM",
        "ShipTo_Name": "222",
        "ShipTo_Address": "333 ",
        "ShipTo_Terms": "444",
        "ShipTo_DueDate": "5555",
        "Items 1": [
            {
                "Item_Name": "Repairs",
                "Item_Description": "Repair Work"
            }
        ]
    }
], 
```

我现在使用的代码

```
function CreateComparisonTable (arr,level,k) {
    var dumped_text = "";
    if(!level) level = 0;

    //The padding given at the beginning of the line.
    var level_padding = "";
    for(var j=0;j<level+1;j++) level_padding = "--";

    if(typeof(arr) == 'object') { //Array/Hashes/Objects
        for (var item in arr) {
            var value = arr[item];
            if (typeof(value) == 'object') { //If it is an array,
                if(item !=0) {
                    dumped_text += '<tr><td>' + item + '<br>';
                    dumped_text += CreateComparisonTable(value,level+1);
                    dumped_text += '</td></tr>';
                } else {
                    dumped_text += CreateComparisonTable(value,level, value.length);
                }
            } else {
              dumped_text += '<tr><td>' + level_padding + item + '</td><td>' + value + '</td></tr>';
            }
        }
    } 
    return dumped_text;
} 
```

[Jsfiddle在这里](http://jsfiddle.net/dUQQx/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:23:06.640

[DataTables](http://datatables.net/)是 jQuery 的一个插件，非常适合这种场景，它的代码中“嵌入”了很多特性。

我用过它，它几乎可以处理我扔给它的所有东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:14:22.637

您可能想考虑使用诸如[Mustache之类的模板语言](http://mustache.github.com/mustache.5.html)

您可能会发现这个问题很有用：[How to Structure JSON and build HTML via jQuery](https://stackoverflow.com/questions/3375035/how-to-structure-json-and-build-html-via-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:51:55.863

看看我刚刚制作的关于[jsfiddle的比较图表。](http://jsfiddle.net/HammerMan/Ju8ME/)当从下拉菜单中检测到选择事件时，将动态填充各个单元格。也许您可以分叉小提琴并使用一些代码来完成您想要对表执行的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:31:40.223

我会推荐jtemplates。一个 jQuery 插件[http://jtemplates.tpython.com/](http://jtemplates.tpython.com/)它是一种强大的模板语言，代码可以存储在任何地方。在页面中内联，在一个单独的文件中最适合您。它看起来很像 asp 经典。看一看

```
{#template MAIN}
 <div id="header">{$T.name}</div>
 <table>
 {#foreach $T.table as r}
  {#include row root=$T.r}
 {#/for}
 </table>
{#/template MAIN}

{#template row}
 <tr bgcolor="{#cycle values=['#AAAAEE','#CCCCFF']}">
  <td>{$T.name.bold()}</td>
  <td>{$T.age}</td>
  <td>{$T.mail.link('mailto:'+$T.mail)}</td>
 </tr>
{#/template row} 
```

# jmeter - JMeter：如何访问 ForEach 控制器内的循环计数器？

> ID：12864796
> 
> 赞同：12
> 
> 时间：2012-10-12T18:11:37.737
> 
> 标签：jmeter

我在 JMeter 中有一个 ForEach 控制器。

如何访问此控制器内的循环计数器（通过变量），然后使用它来创建新变量？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T18:21:19.230

将[计数器配置元素](http://jmeter.apache.org/usermanual/component_reference.html#Counter)放入 ForEach 控制器并检查属性“为每个用户独立跟踪计数器”和“在每个线程组迭代时重置计数器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T11:08:48.457

我在我的脚本中使用了这个 ForEach 控制器，我得到了答案。首先为您要查找的值创建一个正则表达式，然后[添加一个 ForEach 控制器](https://i.stack.imgur.com/XBINw.png)

通过上面的图像，您将对此有一个清晰的了解。

# c++ - C++ 从返回额外行的文件中读取

> ID：12864797
> 
> 赞同：-1
> 
> 时间：2012-10-12T18:11:42.673
> 
> 标签：c++, linked-list, ifstream, getline

> **可能重复：**
> [测试 stream.good() 或 !stream.eof() 读取最后一行两次](https://stackoverflow.com/questions/4324441/testing-stream-good-or-stream-eof-reads-last-line-twice)

我正在执行一项任务，我需要将文件中的数据读取到链接列表中。到目前为止，我能够毫无问题地将文件读入链接列表，但是每次我从文件中读取到列表中时，我都会得到一个额外的条目：

这是我的结构：

```
struct Video { 
char video_name[1024];      // video name
int ranking;                // Number of viewer hits
char url[1024];             // video URL
YouTubeVideo *next;  // pointer to Video structure
}  *head = NULL;        // EMPTY linked list 
```

这是我读入的代码：

```
void load()
{
ifstream rankFile ("Ranking.dbm");
struct Video *temp;
if (rankFile.is_open())
{
    string line;
    do {

        temp = (Video*)malloc(sizeof(Video)); //allocate space for node 
        temp->next = head;
        head = temp;
        rankFile.getline(temp->video_name,1024);
        rankFile >> temp->ranking;
        getline(rankFile, line); // need to skip 'ranking's
        // unread new-line
        rankFile.getline(temp->url,1024);

    }while (rankFile.good() );

    rankFile.close();
}

else cout << "Unable to open file"; 

return ;

} 
```

它正在从如下所示的文件中读取：

```
spiderman
100
spiderman.com
lucy
30
lucy.com
disney
1200
disney.com 
```

这些都读得很好，但是似乎`do-while(rankFile.good());`循环又经历了一次迭代，给了我链表中的一个空节点。我已经尝试使用我的所有`getline()`语句作为 while 循环的条件，但这似乎并没有改变任何东西。也使用`rankFile != eof`给了我没有运气。

有没有办法检查下一个 I/O 以确保它不是`\n`或文件结尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:13:11.097

将其更改为`while(rankFile.good())`而不是使用`do...while`语法。`do...while`直到循环的内容完成处理后，才会评估上次迭代的终止条件。一个简单的`while`将在处理循环体之前进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:17:20.020

Do-while 循环首先执行，然后检查条件。所以总是像第一次一样多一步，循环总是会运行。While 循环在执行主体之前首先检查条件。所以没有额外的迭代。

在这里检查。

[http://www.cplusplus.com/doc/tutorial/control/](http://www.cplusplus.com/doc/tutorial/control/)

# php - 为什么提琴手显示 html 内容有时不显示？

> ID：12864799
> 
> 赞同：0
> 
> 时间：2012-10-12T18:11:48.717
> 
> 标签：php, localhost, fiddler

我正在使用 fiddler 来监视在 localhost 中运行的 php 文件中的简单 html 内容。但是每当我按 f5 刷新页面（浏览器）时，在提琴手中，有时整个 Web 会话的字体会变成蓝色，即当它实际显示内容（html）时，当 Web 会话为灰色时会发生相反的情况，它不会显示html内容。

注意：始终显示请求/响应标头，这仅用于内容。我还尝试了点技巧（“.:80”）并从 localhost 切换到 127.0.0.1。我也没有更改任何配置。顺便说一句，我使用的是谷歌浏览器，每当我创建一个新选项卡并粘贴 php 文件的 url 时，它甚至都不会显示网络会话。

我真的不知道为什么提琴手在这方面工作不一致。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:13:06.573

检查以确保服务器没有发回 304 http 响应。如果是，您可以通过选择规则 > 性能 > 禁用缓存来禁用缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:35:52.080

为了在 fiddler 中显示此内容，需要清除浏览器缓存。您可以使用 ctrl+f5 进行缓存刷新。

# php - Document.getElementById doesn't work in Google Maps info window

> ID：12864802
> 
> 赞同：1
> 
> 时间：2012-10-12T18:12:09.060
> 
> 标签：php, javascript, google-maps

So I'm trying to combine two Google Maps API tutorials into one map. [This documentation](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-geolocation) and [this one](https://developers.google.com/maps/articles/phpsqlajax_v3).

I use to have two maps for each displayed on the sample page and now I want to have one. Everything works except for when I try to save the content to the database. `document.getElementbyId` doesn't return anything from the form in the info window just the coordinates.

It works when the maps are separate but not when they are together.

This is the code that I combined:

```
var customIcons = {
  blue: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  red: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

var locationInfowindow;
var locationMarker;

function initialize() {
//get the html from the water
    var waterHTML = "Why is water important in your community?" +
            "<table>" +
             "<tr><td>Name:</td> <td><input type='text' id='watername'/> </td> </tr>" +
             "<tr><td>School:</td> <td><input type='text' id='wateraddress'/></td> </tr>" +
             "<tr><td>Reason:</td> <td><input type='text' id='waterreason'/> </td></tr>" +
             "<tr><td></td><td><input type='button' value='Save & Close' onclick='saveData()'/></td></tr>";

//setup Map 
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(37.926868, -104.501953),
    zoom: 5,
    mapTypeId: 'roadmap'
  });

  //start the markers from the database
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadXMLUrl('mapxml.php', function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("school");
      var math = markers[i].getAttribute("reason");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/> <i>" + address + "</i><br/>" +math ;
      var icon = customIcons['blue'] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });

        //Try HTML5 geolocation
  if(navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var pos = new google.maps.LatLng(position.coords.latitude,
                                         position.coords.longitude);

     locationInfowindow = new google.maps.InfoWindow({
        content: waterHTML
     });

     locationMarker = new google.maps.Marker({
        draggable: true,
        position: pos,
        map: map,
        title: 'Water Event'
    });

    locationInfowindow.open(map,locationMarker);
            map.setCenter(pos);
      }, function() {
        handleNoGeolocation(true);
      });

    } else {
      // Browser doesn't support Geolocation
      handleNoGeolocation(false);
    }

}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadXMLUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

 function handleNoGeolocation(errorFlag) {
    if (errorFlag) {
      var content = 'Your browser doesn\'t support geolocation.' + '</br>'+
            "Why is water important in your community?” " +
            "<table>" +
             "<tr><td>Name:</td> <td><input type='text' id='watername'/> </td> </tr>" +
             "<tr><td>School:</td> <td><input type='text' id='wateraddress'/></td> </tr>" +
             "<tr><td>Reason:</td> <td><input type='text' id='waterreason'/> </td></tr>" +
             "<tr><td></td><td><input type='button' value='Save & Close' onclick='saveData()'/></td></tr>";
    } else {
      var content = 'Error: Your browser doesn\'t support geolocation.' + '</br>' + html;
    }

    var options = {
      map: map,
      position: new google.maps.LatLng(37.926868, -104.501953),
      content: content
    };

    locationInfowindow = new google.maps.InfoWindow(options);
    map.setCenter(options.position);
  }

  google.maps.event.addDomListener(window, 'load', initialize);

function saveData() {

  var watername = escape(document.getElementById("watername").value);

  console.log(watername);
  var wateraddress = escape(document.getElementById("wateraddress").value);

  console.log(wateraddress);
  var waterreason = document.getElementById("waterreason").value;
  console.log(waterreason);

  var latlng = locationMarker.getPosition();

  var url = "phpsqlinfo_addrow.php?name=" + watername + "&school=" + wateraddress + "&reason=" + waterreason + "&lat=" + latlng.lat() + "&lng=" + latlng.lng();

  console.log(url);

  downloadUrl(url, function(data, responseCode) {

  console.log("inurl");
   // if (responseCode == 200 && data.length <= 1) {
      locationInfowindow.close();
      document.getElementById("message").innerHTML = "Location added. Refresh to see your addition!";
   // }
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:41:14.330

I can't tell you exactly why this happens, but there is some garbage inside the document, a hidden node-copy of the waterHTML.

`getElementById()` retrieves the first element with a given ID in a document, so you always get the value of this copy instead of desired value. This copy will be removed somehow after the first button-click.

Suggestion: Instead of IDs use name-attributes, you will be able to retrieve the last item from the returned nodeList:

```
 var waternames = document.getElementsByName("watername");
  var watername = escape(waternames[waternames.length-1].value);
  //the same for waterreason and wateraddress 
```

# glsl - 如何在 Kick.js 着色器编辑器中添加第二个纹理统一

> ID：12864804
> 
> 赞同：1
> 
> 时间：2012-10-12T18:12:09.080
> 
> 标签：glsl, webgl

如何在 Kick.js 着色器编辑器中添加第二个纹理统一，以便我的着色器可以使用它？Kick.js 的 URL 是： [http ://www.kickjs.org/example/shader_editor/shader_editor.html](http://www.kickjs.org/example/shader_editor/shader_editor.html)

我修改了 Kick.js 中的默认着色器。它使用一种纹理。通过引用我在 images.google.com 上找到的图像，我成功地使用“纹理”面板添加了第二个纹理。

现在的问题是“制服”面板没有显示纹理采样器制服。我怎样才能让这件制服出现？

顺便说一下，这是我的着色器代码。但是，我不相信这段代码是问题的一部分。谢谢你的帮助。

```
#ifdef GL_ES
precision highp float;
#endif
varying vec3 vColor;
varying vec2 uv;

uniform sampler2D video_tex;
uniform sampler2D video_mask;

void main(void)
{
    vec4 samp_video = texture2D(video_tex,uv);
    vec4 samp_mask = texture2D(video_mask,uv);

    vec3 samp_virtual = vec3(1,0,0);

    float alpha = samp_mask.r;
    //gl_FragColor.rgb = (alpha)*samp_virtual.rgb + (1.0-alpha)*samp_video.rgb;
    gl_FragColor.rgb = samp_mask.rgb;  
    gl_FragColor.a = 1.0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:54:31.107

你的代码工作得很好:)

您需要将纹理绑定到统一变量。该过程需要两个步骤：

1.  设置纹理（在纹理面板中）。![在此处输入图像描述](../Images/0c0817ecb50b8e62d83a91904f7ae64d.png)
2.  设置制服以将您的制服变量绑定到纹理![在此处输入图像描述](../Images/cbfcb7adba32429b7d4b3cb09e494ebc.png)

# php - 夏令时

> ID：12864807
> 
> 赞同：3
> 
> 时间：2012-10-12T18:12:49.147
> 
> 标签：php, strtotime

我有一个奇怪的问题：
我从 mysql 数据库中获取了一些数据，我用 strotime 将这些数据转换为时间戳。然后我将这些时间戳与 for 循环进行比较：

```
for ($i=$start;$i<=$end;$i=$i+86400){
 $ptag=date("w",$i);
 if ($i<=$checkdateend){
   if ($wochendays[$ptag]==1){
     if (!in_array($i,$solvedays)){
      $solvedays[]=$i;
     }
   }
 }
} 
```

给定日期（也是时间戳）
，其中 `$wochendays=(0,0,1,0,1,0,0)`

这很好用，但是当我跨过夏季/冬季变化时，我遇到了问题。
在solvedays数组中应该有这些值：

```
27.10.2012
28.10.2012
29.10.2012 
```

但我明白了

```
27.10.2012
28.10.2012
28.10.2012 
```

反而。
我想原因是夏季改为冬季，但我不知道如何解决这个问题。任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:34:39.450

尝试[日期](http://php.net/manual/ru/datetime.modify.php)时间：

```
$date = new DateTime('2006-12-12');
$date->modify('+1 day');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:34:31.777

您遇到了基于夏令时的时间变化。

看到这个问题：[php - 时间戳 - 天之间的间隔并不总是 86400 秒 - 为什么？](https://stackoverflow.com/q/12516059/416627)

# javascript - 如何在 for 循环中附加 onchange 处理程序

> ID：12864808
> 
> 赞同：0
> 
> 时间：2012-10-12T18:12:49.043
> 
> 标签：javascript, event-handling

我有一个循环遍历表单中的依赖字段。数组如下所示：

```
var dependentFields = [
    { parent: FLDID_LABEL, children: [FLDID_LABEL_TEMPLATE, FLDID_LABEL_INSTRUCTIONS], choiceTrigger: 'Yes', markAsReq: true },
    { parent: FLDID_SHIP_TO, children: [FLDID_SHIP_TO_ADDR], choiceTrigger: 'No', markAsReq: true }
]; 
```

我有一个函数被调用来附加所有事件处理程序。为简单起见，我将只显示问题发生的循环。

```
function attachEventHandlers() {
    // begin dependent fields
    for (var i = 0; i < dependentFields.length; i++) {
        var o = dependentFields[i];
        $('#' + o.parent).change(function () {
            var visible = $('#' + o.parent + ' :selected').text() === o.choiceTrigger;
            for (var c = 0; c < o.children.length; c++) {
                var child = o.children[c];
                showField(child, visible);
                if (o.markAsReq && $('#' + child).val() === '') {
                    MarkFieldAsRequired(child);
                }
            }
        });
    }
} 
```

只有第二个依赖字段有效，第一个无效。我认为这与方式有关，`var i`或者`var o`是从外部函数中引用的。实际上，相同的事件处理程序附加到所有相关字段。我怎样才能解决这个问题？

编辑：这是一个带有错误的 jsfiddle：http: [//jsfiddle.net/H3Bv2/4/](http://jsfiddle.net/H3Bv2/4/) 请注意更改父母中的任何一个只会影响第二个孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:12:33.753

看看这里的解决方案：[循环内的 JavaScript 闭包 – 简单实用的示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)。

您的原始代码引用循环中创建的每个回调函数中的单个变量`o`- 并且该变量的值在每次迭代时重新分配，因此所有回调最终都使用分配的*最后一个*值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:59:14.540

我想到了。使用`jQuery.each`让我避免在循环中定义变量。这是我的解决方案：

```
function attachEventHandlers() {
    // begin dependent fields
    $.each(dependentFields, function (i, o) {
        $('#' + o.parent).change(function () {
            var visible = $(':selected', this).text() === o.choiceTrigger;
            for (var c = 0; c < o.children.length; c++) {
                var child = o.children[c];
                showField(child, visible);
                if (o.markAsReq && $('#' + child).val() === '') {
                    MarkFieldAsRequired(child);
                }
            }
        });
    });
} 
```

# c# - 字典的 OrderBy 方法的大 O 是什么

> ID：12864815
> 
> 赞同：3
> 
> 时间：2012-10-12T18:13:17.207
> 
> 标签：c#, sorting, dictionary, big-o

我正在使用 OrderBy 方法对包含 10,000 个元素的字典进行排序，如下所示，并且想知道它的大 O。有人知道吗？订购它们后，我按该顺序将它们添加到新字典中。可能有更好的方法来做到这一点，但它适用于我的目的。

这是我的例子：

```
 m_sortedItems = new Dictionary<int,string>();
        foreach(KeyValuePair<int,string> item in collection.OrderBy(key => key.Value)){
            m_sortedItems.Add(item.Key, item.Value);
        } 
```

我检查了 msdn，但没有列出：http: [//msdn.microsoft.com/en-us/library/bb534966.aspx](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T18:15:38.463

在常规字典中添加排序集合是没有意义的，因为字典不能保证保持顺序。这只是不鼓励您在问题中显示的代码：它可能在某些情况下有效，但相信我这是不正确的。有必要指出这样一个事实，即通过将有序集添加回字典只会使您之前*所做的排序无效。*您可以按某种顺序枚举 KeyValuePairs 并添加到常规列表中，这将保留插入顺序，或者更好地使用其他一些数据结构。看看[排序字典的例子](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx). 当然，这种数据结构在插入阶段需要更多时间，而排序通常很快，因为它们是“自然”排序的。根据文档，排序字典插入时间“充其量” **O(log(n))**，我建议您也调查几乎有序输入集的性能，因为有时基于树的数据结构会由于不平衡的树形成而遭受这种情况. 如果是这种情况（我不知道内部是如何实现的）并且性能变得至关重要，那么另一个有趣的数据结构是 B-Tree。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T18:15:39.687

字典没有定义顺序，因此按特定顺序添加项目不是您应该做的事情。

就排序的大 O 而言，O(NlogN) 将成为您将遇到的大多数排序算法的基准。

# android - 您如何引用存储在移动设备上的文件？

> ID：12864816
> 
> 赞同：0
> 
> 时间：2012-10-12T18:13:24.613
> 
> 标签：android, lua, coronasdk

在构建应用程序（在我的情况下为 android）时，您将如何引用和显示使用 Corona 存储在设备上的音乐文件。我已经搜索了[http://developer.coronalabs.com/reference](http://developer.coronalabs.com/reference)，但我找不到它，但我并不是说它不是他们的。

所以这是用于“歌曲”的视图之一

```
local storyboard = require( "storyboard" )
local scene = storyboard.newScene()

function scene:createScene( event )
  local group = self.view

  local bg = display.newRect( 0, 0, display.contentWidth, display.contentHeight )
  bg:setFillColor( 255 )    -- white

  local title = display.newRetinaText( "First View", 0, 0, native.systemFont, 32 )
  title:setTextColor( 0 )   -- black
  title:setReferencePoint( display.CenterReferencePoint )
  title.x = display.contentWidth * 0.5
  title.y = 125

  local summary = display.newRetinaText( "Loaded by the first tab 'onPress' listener\n— specified in the 'tabButtons' table.", 0, 0, 292, 292, native.systemFont, 14 )
  summary:setTextColor( 0 ) -- black
  summary:setReferencePoint( display.CenterReferencePoint )
  summary.x = display.contentWidth * 0.5 + 10
  summary.y = title.y + 215

  local sliderListener = function( event )
  local sliderObj = event.target

function buildGUI()
  print( "New value is: " .. event.target.value )
end

group:insert( bg )
group:insert( title )
group:insert( summary ) 
```

谁在神秘帐户上写了这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:53:27.297

你不能。

Corona 只能访问其自己的沙箱上的文件或通过 http 下载内容。

# c++ - 使用 c++ ai 引擎和 ASP.NET C# 页面的纸牌游戏

> ID：12864818
> 
> 赞同：0
> 
> 时间：2012-10-12T18:13:29.563
> 
> 标签：c++, asp.net, c#-4.0, game-engine, playing-cards

我有一个使用 C# ASP.NET 构建纸牌游戏的项目，该项目是有一个纸牌游戏网站，用户可以在其中玩耍和互相挑战。

我的朋友可以使用 C++ 构建 AI 引擎，但我如何通过 c# 与该引擎进行通信，特别是它应该是基于浏览器的在线游戏。

页面、脚本和站点系统的所有内容都很容易在 C# 中实现，但每个游戏的卡片表（与引擎的通信）是我无法想象的。

使用哪种方法，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:40:22.400

如果您真的想将 C# 与 C++ 混合使用，那么最简单的通信方式可能是创建一个包含 C 接口的 C++ DLL。然后，您可以使用[P/Invoke](http://msdn.microsoft.com/en-us/library/aa288468%28v=VS.71%29.aspx)导入此 DLL ：

```
[DllImport("ai.dll")]
static extern int doSomething(int numCardOnTable, int[] cardOnTable,
  int numCardsOnHand, int[] cardsOnHand, out int cardToPlay); 
```

另一种方法是使用可以直接在 C# 中导入的托管 C++：

```
namespace CPP_managed_code
{
  public ref class AI
  {
  public:
    int doSomething(int numCardOnTable, int[] cardOnTable, int numCardsOnHand,
      int[] cardsOnHand, out int cardToPlay)
    {
      // ...
      return 0;
    }
  };
} 
```

还有你的 C# 代码：

```
using CPP_managed_code;

// ...
  unsafe private void myCSharpMethod()
  {
    AI ai = new AI();
    ai.doSomething(/*...*/);
  } 
```

但我不建议使用托管 C++，因为它不是标准 C++。

# iis - IIS 转换管理器 - 实时流

> ID：12864819
> 
> 赞同：2
> 
> 时间：2012-10-12T18:13:33.477
> 
> 标签：iis, encoding, video-streaming, transform

我一直在做一些研究，并试图利用 IIS Smooth Streaming 创建一个实时流。

我要具体完成的是：

1.  上传视频文件。
2.  使用 IIS 转换管理器编码为平滑流格式。
3.  作为“实时”提要访问流畅的流。
4.  如果其他视频文件放置在工作文件夹中，请将它们编码并将它们附加到实时流中。

这样的事情可能吗？

# python - 从 Python 中的数据结构中解压缩位置参数

> ID：12864821
> 
> 赞同：1
> 
> 时间：2012-10-12T18:13:34.100
> 
> 标签：python

给定：

```
def psum(a,b,c):
    return a**b+c 
```

以及 我该怎么做-> 等价物`x = [1,2]`。`y = 3``psum(*x,3)`

我不想这样做，`x[0], x[1]`因为函数返回`x`并调用它两次会效率低下。一个可以吗`z = function(a)`。哪里`z = x`。然后做`z[0]`，`z[1]`。

但我想知道是否可以这样做并以这种方式使用位置参数。

此外，*不*使用包装器。

编辑：不能使用名称，因为我没有实现函数并且函数编写者没有使用命名参数：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:22:47.780

你可以这样做：

```
psum(*x + [y]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:15:25.800

在这种情况下，参数的顺序无关紧要，所以`psum(3,*x)`会起作用。

在稍微更一般的情况下，如果您知道参数的名称，

```
psum(*x,c=3) 
```

`sum`似乎也对我有用，但如果定义为它需要可变参数，它将不起作用......

我认为在不修改您传递给的对象的情况下，在完全一般的情况下没有办法做到这一点`psum`：

```
x.append(3)
psum(*x) 
```

# unit-testing - 如何导出 WinRT 单元测试报告的测试结果？

> ID：12864822
> 
> 赞同：1
> 
> 时间：2012-10-12T18:13:34.447
> 
> 标签：unit-testing, windows-runtime

我已经为 WinRT 编写了单元测试用例，但我无法将测试结果导出为 HTML 或 XML 格式，以便进一步处理。请建议我在哪里可以找到测试结果的详细信息。

# java - 由数据库控制的休眠时间戳版本。

> ID：12864826
> 
> 赞同：3
> 
> 时间：2012-10-12T18:13:40.903
> 
> 标签：java, sql, hibernate, sybase

我同时使用 Hibernate 注释和 Sybase。我正在寻找设置版本列以防止锁定。数据库需要管理时间戳而不是应用程序。我想使用注释而不是 hbm.xml 来完成此操作。

我尝试了以下但没有成功，

我在 jboss.org 上阅读以使用

```
@org.hibernate.annotations.SourceType.DB
@org.hibernate.annotations.Generated(GenerationTime.ALWAYS) 
```

但是我收到了 DB 的 IDE 编译错误，“找不到符号符号：类 DB 位置：类 SourceType”

以及 rowVersion 的编译错误，

Version 字段或属性不是受支持的类型之一。确保它是以下类型之一：int、Integer、short、Short、long、Long、java.sql.Timestamp。

必须使用 @Temporal 注释标记时间属性。

[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#d0e5785](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#d0e5785)

5.1.3.2。时间戳

示例代码

```
@Version
@org.hibernate.annotations.SourceType.DB
@org.hibernate.annotations.Generated(GenerationTime.ALWAYS)
@Column(name = "row_version")
private Date rowVersion;

public Date getRowVersion() {
    return rowVersion;
}

public void setRowVersion(Date rowVersion) {
    this.rowVersion = rowVersion;
} 
```

有人能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:19:24.537

这不是注释，而是枚举的一个字段：

```
@org.hibernate.annotations.SourceType.DB 
```

你需要这个在你的领域：

```
@Version
@org.hibernate.annotations.Source(SourceType.DB)
@org.hibernate.annotations.Generated(GenerationTime.ALWAYS)
@Column(name = "row_version") //maybe unnecessary, because this annotation
                              //is only needed, if the column name does not
                              //match hibernate's default naming strategy
                              //(or custom strategy).
@Temporal(TemporalType.TIMESTAMP)
private Date rowVersion; 
```

# android - 在 Android 中通过音频信号传输和提取消息

> ID：12864828
> 
> 赞同：0
> 
> 时间：2012-10-12T18:13:58.933
> 
> 标签：android, audio, signal-processing, javasound, audio-processing

我对音频处理进行了研究，并且有一个大问题要解决。是否可以通过将文本消息或二进制流（10101010）嵌入到音频信号中来传输它，广播它以便其他安卓设备可以记录该声音并提取嵌入的文本消息或二进制流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:58:44.907

如果您不介意您的音频信号被明显检测到，那么这就是声学调制解调器的作用，并且在业余无线电和电话文献中描述了大量的调制方案、软件协议和调制解调器实现，包括 RTTY、AFSK、PSK- 31、Bell-103 等，几十年来已经成熟，并且在嘈杂的无线电频段和坏的电话线路上经过了良好的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:37:34.713

字段非常复杂，请尝试在谷歌上搜索[Audio Steganography](https://www.google.com/search?q=audio%20steganography&aq=0&oq=audio%20stegano)。

您必须知道携带信号的介质的确切属性。

你必须实时分析两边的声音，寻找放置你的位置的地方。

您必须避免发送->接收链中的所有压缩和音频丢失。

...

最后，如果你幸运的话，你最多只能得到几个 BITS/SECOND。但是，请考虑如果声音是静音，您将无法发送任何内容。

或者：尝试使用**音频水印**，也许这就是你需要的，事实上。

# c# - Visual Studio 加载项不适用于打开多个 VS 实例

> ID：12864831
> 
> 赞同：1
> 
> 时间：2012-10-12T18:14:21.980
> 
> 标签：c#, visual-studio-2010, visual-studio-addins

我正在开发一个在（Windows 窗体）窗口中显示阶段的 Visual Studio 加载项。创建一个新的特殊项目（与加载项相关）会创建一个包含所有必要 .dll 的新项目，以便用户在自己的代码中与舞台交互。在舞台上，演员四处走动，可以与其他演员互动。舞台具有允许用户创建新演员的 UI。用户应该能够在舞台存在时更改 .cs 文件。它是一个插件的原因是用户可以创建和编辑演员的代码，编译它，并立即在舞台上看到他们的演员的结果。

无论如何 - 这工作正常，直到有两个 Visual Studio 实例打开。第二个无法绘制任何东西（我在 Windows 窗体窗口中得到了红色的 X）。我收到一条错误消息，告诉我“在消息过滤器内调用是非法的。（来自 HRESULT 的异常：0x80010005 (RPC_E_CANTCALLOUT_INEXTERNALCALL)）。我四处搜索，我能找到的最相关的事情是它可能是一个问题COM 控件或绘画。我不太确定。在这种情况下，有人遇到过这个错误吗？有没有办法让我的加载项在多个 VS 实例上正常运行？

# javascript - Javascript JQuery第一次用户尝试将表单放置在带有特定网址的图片下方

> ID：12864837
> 
> 赞同：1
> 
> 时间：2012-10-12T18:14:53.507
> 
> 标签：javascript, jquery, html, image, forms

嗨，我正在尝试在具有特定 URL 的图像下方放置一个表单，但是它不起作用。由于我是 JQuery 的新手，所以我不确定自己做错了什么。有人会碰巧知道这有什么问题吗？

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript">
function main(){
    var imageURL = getImageURL();
    $("img[src=imageURL]");
    $("img[src='Your URL']").append("<input type="radio" name="geo" value="geolocation">Use Geolocation? <br> Additional Information About the Image: <input type="comment" name="cmnt">");

}

function getImageURL(){
var url = "http://www.w3schools.com/images/pulpit.jpg";
return url;
}
</script>
</head>
<body onload="main()">
<b> Page </b>
<img src="http://www.w3schools.com/images/pulpit.jpg">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:18:06.773

jQuery 方法`.append()`实际上在给定节点内添加了它的参数。相反，使用[after()](http://api.jquery.com/after/)方法，该方法在指定元素之后插入内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:19:55.587

几个问题。不能使用的变量`imageURL`不能直接放在 src 选择器里面。您需要将其与`+`. 然后，您需要使用将元素作为兄弟节点添加到选择器，而不是[`.append()`](http://api.jquery.com/append/)添加到给定节点的*子节点。*[`.after()`](http://api.jquery.com/after/)

而不仅仅是一个`<input>`，你应该附加一个嵌套在其中`<form>`的a 。`<input>`

```
function main(){
    var imageURL = getImageURL();
    // Concatenate the imageURL variable into the $() selector.
    // Put the <input> inside a <form> if it needs to function as a form element.
    $("img[src='" + imageURL + "']").after("<form><input type="radio" name="geo" value="geolocation">Use Geolocation? <br> Additional Information About the Image: <input type="comment" name="cmnt"></form>");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:21:11.817

除了第一个答案，还有其他一些事情：

您的 JQuery 库前面需要 http://。

您的字符串封装在双引号中并包含双引号，您需要转义内部双引号或仅将字符串封装在单引号中。

# objective-c - 在目标 C 中公开 iVar 是否违背了封装的目的？

> ID：12864838
> 
> 赞同：1
> 
> 时间：2012-10-12T18:15:16.223
> 
> 标签：objective-c, oop

在 Objective-C 中公开 iVar 是否违背了封装的目的？

```
@interface SampleClass{
@public
int totalRecords;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:22:48.190

简而言之，是的。

对 ivars 的直接访问意味着在读取或写入`SampmleClass`时，您的子类或未来版本无法实现任何类型的自定义行为。`totalRecords`

这就是为什么访问对象状态是通过方法无处不在，但在类本身的实现中（即使那样，它也主要是通过方法）。

# php - 在 PHP 中从 foreach 循环动态地将值添加到二维数组

> ID：12864842
> 
> 赞同：0
> 
> 时间：2012-10-12T18:15:31.653
> 
> 标签：php, post, loops, multidimensional-array, foreach

我有来自表单提交的以下数组：

```
 Array ( [id0] => id [gd0] => 50% [q0] => 1 [p0] => 10 [t0] => 10 [id1] => id [gd1] => 65%     [q1] => 2 [p1] => 20 [t1] => 40 [id2] => id [gd2] => 90% [q2] => 2 [p2] => 510 [t2] => 1020 ) 
```

我想通过以如下新模式存储相同的值来使其成为二维数组：

```
Array (array([id0] => id [gd0] => 50% [q0] => 1 [p0] => 10 [t0] => 10 ) , array([id1] => id [gd1] => 65% [q1] => 2 [p1] => 20 [t1] => 40 ) , array([id2] => id [gd2] => 90% [q2] => 2 [p2] => 510 [t2] => 1020)) 
```

因此，我试图在另一个数组的新维度中重新排列类似的信息。我尝试了一个 foreach 循环，但没有运气：

```
 $items = array();
                $X = -1; // the index of the first dimension
                $Y = 0; // the second index

 foreach ($_POST as $val) {

                    if ($val == 'id') {

                        $X++;
                        $Y = 0;
                    } else {

                        $items[$X][$Y] == $val;

                        // increment the second index to prevent overwriting

                        $Y++;
                    }
                }

                print_r($items); 
```

但是，它不起作用。`print_r()`仅显示`Array()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:21:25.367

您在语句中使用相等运算符`==`而不是赋值运算符。`=``else`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:35:06.170

我假设您在表单提交中有某种数组输入。如果是这样，您可以尝试像这样命名字段。它会直接在 $_POST 变量中为您提供一个二维数组。

```
<input type="text" name="data[0][id]" />
<input type="text" name="data[0][gd]" />
<input type="text" name="data[0][q]" />
<input type="text" name="data[0][p]" />
<input type="text" name="data[0][t]" />

<input type="text" name="data[1][id]" />
<input type="text" name="data[1][gd]" />
<input type="text" name="data[1][q]" />
<input type="text" name="data[1][p]" />
<input type="text" name="data[1][t]" />

<input type="text" name="data[2][id]" />
<input type="text" name="data[2][gd]" />
<input type="text" name="data[2][q]" />
<input type="text" name="data[2][p]" />
<input type="text" name="data[2][t]" /> 
```

$_POST 数组看起来像：

```
array(
  "data" => array(
    0 => array("id" => "value", "gd" => "value" ... ),
    1 => array("id" => "value", "gd" => "value" ... ),
    2 => array("id" => "value", "gd" => "value" ... ),
  )
) 
```

# java - 在 Java 中使用多个线程

> ID：12864846
> 
> 赞同：0
> 
> 时间：2012-10-12T18:15:44.007
> 
> 标签：java, multithreading

我正在尝试制作一个充当家具厂的多线程程序......例如，它需要有 3 个钉子、2 块木头和 1 块胶水才能制作 1 张桌子。我制作了胶水、木头和钉子类（作为 Thread 类的扩展）

现在，按照我制作的方式，它没有编译错误，但是当它运行时，我在 thread.start() 处得到一个 IlegalThreadState 异常。这是我的主要（）

```
public class Main 
{
public static int mueble = 0; 
public static void main(String[] args) throws InterruptedException 
{
    Semaphore smain = new Semaphore(1);
    Madera m = new Madera();
    Formica f = new Formica();
    Clavo c = new Clavo();
    boolean b = true;
    while(b)
    {
        Random rand = new Random();
        int r = (int)(rand.nextDouble()*6+0);
        if(r < 1)
        {
            smain.acquire();
            f.start();
        }
        else if ((r>1)&&(r<3))
        {
            smain.acquire();
            m.start();
        }
        else 
        {
            smain.acquire();
            c.start();
        }
        if (mueble == 30)
        {
            b = false;
        }
        smain.release();
    }

}
} 
```

不要介意西班牙语。我认为问题可能出在每个线程的 run() 部分，在这里（三个类几乎相同）

```
@Override
public void run()
{
    try {
        sclavo.acquire();
        System.out.println("Llega 1 clavo");
        System.out.println("Hay " + (3-sclavo.availablePermits()) + " clavo(s)");
        if((sclavo.availablePermits()==0)&&(Madera.smadera.availablePermits()==0)&&(Formica.sformica.availablePermits()==0))
                {
                    System.out.println("Se ha creado 1 mueble");
                    Main.mueble++;
                    System.out.println("Hay" + Main.mueble + "mueble(s)");
                    Formica.sformica.release(1);
                    sclavo.release(3);
                    Madera.smadera.release(2);
                }
    } catch (InterruptedException ex) {
        Logger.getLogger(Clavo.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:26:55.937

您无法重新启动线程。查看[`Thread.start`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#start%28%29). 它说：

> 多次启动一个线程是不合法的。

您在一个循环中一遍又一遍地启动相同的线程。相反，您应该查看其`ExecutorService`工作原理并改为使用它。一个好的多线程系统是基于作业的，每个作业要么是 a`Runnable`要么是`Callable`. 当您`Runnable`只想运行某些任务并且它没有任何输出时使用（特别是，如果作业基本上返回`void`）。`Callable`当你的工作*确实有*回报时，你会使用它。在 SO 和其他地方有很多关于如何使用`ExecutorService`和相关类的示例。

如果你别无选择只能手动使用线程，那么你需要在每个循环上创建并启动一个新线程，例如：

```
new Formica().start(); 
```

`Formica`而不是一遍又一遍地启动同一个实例。

# caching - 生产档案的限制大小

> ID：12864848
> 
> 赞同：0
> 
> 时间：2012-10-12T18:15:47.847
> 
> 标签：caching, sencha-touch-2

我使用 Sencha Cmd 3 和 Sencha 2.1 在生产模式下构建我的 ST 应用程序，浏览器上的缓存应用程序通过增量更新。Sencha 说，要使 delta 版正常工作，生成和更新的归档文件夹必须保持完整。每次部署新版本时，此存档文件夹的大小大约会增加 0.5 MB。

有没有办法将存档文件夹的大小保持在一定范围内，同时确保继续正确生成增量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:21:15.193

虽然我没有在 Sencha 上使用 delta 的经验，但我猜测原因是 Sencha 为之前的每个构建都保留了一个 delta。
例如，我将有三个构建（1.0、1.2、1.3），在您的第四个构建中创建了 3 个增量：

*   1.0 --> 1.4
*   1.2 --> 1.4
*   1.3 --> 1.4

如果您有未部署给用户的构建，您可以查看存档文件夹，如果您可以删除不需要的增量。希望这可以帮助！

# scala - 如何从 Playframework Scala 模板中的模型类迭代中获取索引

> ID：12864849
> 
> 赞同：2
> 
> 时间：2012-10-12T18:15:47.393
> 
> 标签：scala, playframework-2.0

我正在尝试使用 TODO 教程做一个简单的事情。

我想在表格中显示任务列表，但找不到在迭代中获取索引的方法。

```
@tasks.map { task =>
                <tr>
                    <td><!-- DISPLAY INDEX HERE --></td>
                    <td>
                        @form(routes.Application.deleteTask(task.id.get)) {
                            <input type="submit" class="btn btn-primary remove_task" value="-">
                        }
                        @task.label
                    </td>
                </tr>
            } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:25:58.063

您可以使用`@tasks.zipWithIndex.map { case (task, index) => ... }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:24:30.433

您可以使用`zipWithIndex`. 例如：

```
scala> List("A","B","C")
res4: List[java.lang.String] = List(A, B, C)

scala> res4.zipWithIndex
res5: List[(java.lang.String, Int)] = List((A,0), (B,1), (C,2)) 
```

您的最终代码将是，请注意我重命名了`task`变量：

```
@tasks.zipWithIndex.map { tuple =>
                <tr>
                    <td>tuple._2</td>
                    <td>
                        @form(routes.Application.deleteTask(tuple._1.id.get)) {
                            <input type="submit" class="btn btn-primary remove_task" value="-">
                        }
                        @tuple._1.label
                    </td>
                </tr>
            } 
```

# mysql - MySql InnoDB - 在表的“Not Null”列中插入

> ID：12864851
> 
> 赞同：0
> 
> 时间：2012-10-12T18:15:55.537
> 
> 标签：mysql, innodb, myisam, insertion

我对数据库的 InnoDB 和 MyISAM 存储引擎有疑问。

假设我们在一个表中有 5 列，所有列都设置为“Not Null”。当我运行查询以仅在 MyISAM 数据库的两列中插入值时，它不会产生任何错误，将记录插入表中，默认情况下将其他列留空。但是当我对 InnoDB 数据库执行相同操作时，它会生成“某些列不能为空”的错误。

我的所有表都设置为 MyISAM 类型，但我的数据库是 InnoDB，我遇到了这个问题。

有没有办法解决？我已经有几个解决方案可以将数据库类型更改为 MyISAM，或者将所有表的每一列都设置为“Null”值除外。我想知道比上面提到的更好的解决方案。

希望它有任何意义。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:34:36.177

为所有 NOT NULL 列设置一个 DEFAULT 值，如果你没有在 INSERT 上指定一个值，将使用默认值。

# python - 来自结构字段的 Python CTypes 回调

> ID：12864852
> 
> 赞同：1
> 
> 时间：2012-10-12T18:15:55.507
> 
> 标签：python, callback, ctypes

我需要编写一个 python 调用，该调用具有将由 C 函数调用的回调。C头文件有以下内容

```
...
typedef struct _myResponse {
   char * data, 
   void (*setResponseFunc)(const char * const  req, char ** dataptr);
} MyResponse_t 
```

C库像这样调用回调

```
void process(const char * const req , MyResponse_t *response) {
   response->SetResponseFunc("some request", &response->data);
} 
```

C 中回调的示例回调实现：

```
void SetResponse(const char *respData, char **dataptr) {
      char *ptr = malloc(strlen(respData));
      strcpy(ptr, respData);
      *dataptr= ptr;
} 
```

然后我使用 ctypesgen 生成 python 代码。生成的文件包含以下内容：

代理.py：

```
def String:
 ...

class struct__myResponse(Structure):
    pass

struct__myResponse.__slots__ = [
    'data',
    'SetResponseFunc',
]
struct__myResponse._fields_ = [
    ('data', String),
    ('SetResponseFunc', CFUNCTYPE(UNCHECKED(None), String, POINTER(String))),
] 
```

这就是我尝试使用它的方式

```
CALLBACK_FUNC = CFUNCTYPE(c_agent.UNCHECKED(None), agent.String, POINTER(agent.String))

def PyCopyResponse(a,b):
    print "XXXXXX" // here, I haven't tried to implement the proper code, just want to see if the callback is called from the C library

copy_response = CALLBACK_FUNC(PyCopyResponse) 
```

调用它

```
 agentResp = agent.MyResponse_t(None,copy_response)

    agent.process("some value",agentResp) 
```

我根本没有看到我的 python 回调实现被调用。我已经验证 C 库正在适当地调用回调。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:06:06.240

好的，找到问题了。该过程需要一个指向结构的指针，我直接传递结构。

```
data = agent.String() 
agentResp = agent.MyResponse_t(data,copy_response)
agentResp_p = pointer(agentResp)

agent.process("some value",agentResp_p) 
```

# youtube-api - YouTube 播放列表已满时返回什么响应状态代码？

> ID：12864858
> 
> 赞同：2
> 
> 时间：2012-10-12T18:16:22.277
> 
> 标签：youtube-api

为了避免我不得不用 200 个视频填充播放列表，有人可以告诉我在尝试将视频添加到已经包含 200 个视频的播放列表时是否返回了特定的响应状态代码？

我想避免每次在添加视频之前检查播放列表的大小。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:46:18.430

创建包含 200 个视频的播放列表并尝试添加另一个后，响应状态为“400 Bad request”，以及带有内部原因“播放列表太大”的 XML 正文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:37:29.377

我相当肯定你会`403 Forbidden`在那种情况下得到一个响应体，其中包含一个 XML 文档，详细说明了错误的原因。

如果您碰巧使用的是 Java GData 客户端库，它将被反序列化为`ServiceForbiddenException`，正如您从[这段代码](https://code.google.com/p/youtube-direct/source/browse/trunk/ytd/src/com/google/ytd/youtube/YouTubeApiHelper.java#479)中看到的那样。

# python - Python arcpy 脚本所需的错误处理建议

> ID：12864861
> 
> 赞同：0
> 
> 时间：2012-10-12T18:16:31.547
> 
> 标签：python, arcgis, arcpy

我可以就如何处理 Python 脚本中的错误提出一些建议。从我通过阅读该站点上的所有 Python 错误处理帖子所收集到的信息来看，您不能简单地使用 try except continue 语句绕过 for 循环中的错误。相反，您必须直接处理每个错误。这是我在将它们捆绑在一起时遇到问题的地方。我附上了在 for 循环中间发生的错误消息。此外，我附上了我的脚本，该脚本通过以下工作流程：

1.  在栅格周围放置一个多边形
2.  在多边形的平均中心上放置一个点
3.  使用该点来标识与其相应栅格关联的特定县
4.  根据选定的县多边形裁剪栅格

**如何将错误消息中的信息合并到 try except continue 语句中，以便脚本可以移动到列表中的下一个栅格，而不是在处理过程中停止？**

```
# Import arcpy module
import arcpy
from arcpy import env
from arcpy.sa import *
arcpy.CheckOutExtension("3D")

# Set Over write
arcpy.env.overwriteOutput = 1

# Set the workspace
env.workspace = r"Z:\temp.gdb"
outworkspace = r"Z:\location2\temp2.gdb"

# Local variables:
counties = r"Z:\temp.gdb\boundaries\Counties"
counties_lyr = arcpy.MakeFeatureLayer_management(counties,"counties_lyr")

# Get the list of rasters to process
raster_list = arcpy.ListRasters("*_clp")
print raster_list

for raster in raster_list:
    # Define name and location for output raster
    name = outworkspace + "\\" + str(raster)

    # Process: Raster Domain
    arcpy.RasterDomain_3d(raster, "in_memory/temp", "POLYGON")

    # Process: Central Feature
    arcpy.MeanCenter_stats("in_memory/temp", "in_memory/temp1")

    # Process: Select Layer By Location
    arcpy.SelectLayerByLocation_management(counties_lyr, "intersect", "in_memory/temp1", "", "NEW_SELECTION")

    # Clip Raster
    arcpy.Clip_management(raster, "#", name,counties_lyr, "#", "ClippingGeometry")

    # Delete in_memory
    arcpy.Delete_management("in_memory")

    print "processing " + raster + " complete..."

print "All processing is now finished" 
```

![在此处输入图像描述](../Images/b9f6b61ba1fd8a256e9903a22a51df5d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:20:22.977

您可以在 for 循环中处理错误。将代码包装在 try except 块中将允许您在参数无效的情况下处理错误。

```
try:

# Process: Raster Domain
    arcpy.RasterDomain_3d(raster, "in_memory/temp", "POLYGON")

except ExcecuteError: 
  continue 
```

这将在您的循环内发生，它基本上说如果异常发生问题 a `continue`，这意味着继续下一个循环迭代。

您可以将 try except 块放在任何地方，正如 Mark Amery 建议的那样，您也可以将整个 for 循环体包装在 try except 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:22:16.423

这是你需要的吗？如果 for 循环中的任何单个栅格出现任何问题，它将打印出回溯，然后继续下一个。

```
import traceback

# Import arcpy module
import arcpy
from arcpy import env
from arcpy.sa import *
arcpy.CheckOutExtension("3D")

# Set Over write
arcpy.env.overwriteOutput = 1

# Set the workspace
env.workspace = r"Z:\temp.gdb"
outworkspace = r"Z:\location2\temp2.gdb"

# Local variables:
counties = r"Z:\temp.gdb\boundaries\Counties"
counties_lyr = arcpy.MakeFeatureLayer_management(counties,"counties_lyr")

# Get the list of rasters to process
raster_list = arcpy.ListRasters("*_clp")
print raster_list

for raster in raster_list:
    try:
        # Define name and location for output raster
        name = outworkspace + "\\" + str(raster)

        # Process: Raster Domain
        arcpy.RasterDomain_3d(raster, "in_memory/temp", "POLYGON")

        # Process: Central Feature
        arcpy.MeanCenter_stats("in_memory/temp", "in_memory/temp1")

        # Process: Select Layer By Location
        arcpy.SelectLayerByLocation_management(counties_lyr, "intersect", "in_memory/temp1", "", "NEW_SELECTION")

        # Clip Raster
        arcpy.Clip_management(raster, "#", name,counties_lyr, "#", "ClippingGeometry")

        # Delete in_memory
        arcpy.Delete_management("in_memory")

        print "processing " + raster + " complete..."

    except:
        print "Something went wrong handling " + str(raster) + ". Here's a traceback:"
        traceback.print_exc()
        continue

print "All processing is now finished" 
```

这是一个惰性程序员的实现，将 for 循环的全部内容包装在一个 try...except... 块中，该块将捕获块中任何位置的任何类型的异常。根据您的需求和品味，您可能会发现仅捕获您在实践中遇到的特定错误更有帮助（或更优雅），正如 dm03514 所建议的那样 - 但我认为对于这样的小脚本，其输出是会被人看到，不管你做什么。

正如您在问题中指定的那样，对您来说可能很重要的是，当错误发生时您会看到回溯。这就是 traceback.print_exc() 的用武之地。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:23:59.453

我不知道arcpy。但也许处理第 969 行中的异常：

```
try:
    your stuff

except arcpy.ExecuteError, error:
    print error 
```

有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T18:43:01.183

不太清楚您在 for 循环中所说的 try/except/continue 是什么。以下内容大致基于您提供的代码。

```
def failing_func(raster):
    raise ValueError("raster <%s> function has failed" % (raster))

def working_func(raster):
    print("raster <%s> function has succeeded" % (raster))
    return True

raster_list = [0, 1, 2, 3, 4, 5]

for raster in raster_list:
    print("Processing <%s>" % (raster))

    try:
        v1 = working_func("raster_1")
        v2 = failing_func("raster_2")
        v3 = working_func("raster_3")
        v4 = failing_func("raster_4")
        v5 = working_func("raster_5")
    except ValueError, e:
        print("Exception was raised: %s when processing item %s" % (str(e), raster))
        continue 
```

哪个输出：

```
Processing <0>
raster <raster_1> function has succeeded
Exception was raised: raster <raster_2> function has failed when processing item 0
Processing <1>
raster <raster_1> function has succeeded
Exception was raised: raster <raster_2> function has failed when processing item 1
Processing <2>
raster <raster_1> function has succeeded
Exception was raised: raster <raster_2> function has failed when processing item 2
Processing <3>
raster <raster_1> function has succeeded
Exception was raised: raster <raster_2> function has failed when processing item 3
Processing <4>
raster <raster_1> function has succeeded
Exception was raised: raster <raster_2> function has failed when processing item 4
Processing <5>
raster <raster_1> function has succeeded
Exception was raised: raster <raster_2> function has failed when processing item 5 
```

# r - 基于行的汇总计算

> ID：12864867
> 
> 赞同：2
> 
> 时间：2012-10-12T18:16:42.387
> 
> 标签：r

xx

```
head(xx,1)
     Sport    variable 2012.07.01 2012.07.02 2012.07.03 2012.07.04 2012.07.05 2012.07.06 2012.07.07 2012.07.08 2012.07.09 2012.07.10 2012.07.11 2012.07.12 2012.07.13 2012.07.14 2012.07.15 2012.07.16 2012.07.17
1 Soccer Likes         13         13         14         12         11         11         NA          9         16         11         12         15         10         NA         13          9         10
  2012.07.18 2012.07.19 2012.07.20 2012.07.21 2012.07.22 2012.07.23 2012.07.24 2012.07.25 2012.07.26 2012.07.27 2012.07.28 2012.07.29 2012.07.30 2012.07.31 2012.08.01 2012.08.02 2012.08.03 2012.08.04 2012.08.05
1         16         10         17         NA         10         15         14         11         11         13         NA         13         26        987        898        162        146         NA        257
  2012.08.06 2012.08.07 2012.08.08 2012.08.09 2012.08.10 2012.08.11 2012.08.12 2012.08.13 2012.08.14 2012.08.15 2012.08.16 2012.08.17 2012.08.18 2012.08.19 2012.08.20 2012.08.21 2012.08.22 2012.08.23 2012.08.24
1        370        443        490        612        646         NA        311        371        432        512        610        734         NA       1002        931        886        190        317        386
  2012.08.25 2012.08.26 2012.08.27 2012.08.28 2012.08.29 2012.08.30 2012.08.31 2012.09.01 2012.09.02 2012.09.03 2012.09.04 2012.09.05 2012.09.06 2012.09.07 2012.09.08 2012.09.09 2012.09.10 2012.09.11 2012.09.12
1         NA        586        812        904        863        941        922         NA        150        146        175        132        254        330         NA        198        281        254        316
  2012.09.13 2012.09.14 2012.09.15 2012.09.16 2012.09.17 2012.09.18 2012.09.19 2012.09.20 2012.09.21 2012.09.22 2012.09.23 2012.09.24 2012.09.25 2012.09.26 2012.09.27 2012.09.28 2012.09.29 2012.09.30 2012.10.01
1        416        594         NA        668        745        972        984        885        496         NA        687        734        767        832        965        934         NA        200        225
  2012.10.02 2012.10.03 2012.10.04 2012.10.05 2012.10.06 2012.10.07 2012.10.08 2012.10.09 2012.10.10 2012.10.11       SD Mean        Max   Min mean
1        219        181        198        229         NA        364        431        492        592        612 336.9102   NA soccer     9   NA 
```

尝试使用以下公式计算每行的行标准偏差、平均值、最大值、最小值等：

```
transform(xx, SD=apply(xx,1, sd, na.rm = TRUE)) 
transform(xx, Mean=apply(xx,1, mean, na.rm = TRUE)) 
transform(xx, Max=apply(xx,1, max, na.rm = TRUE)) 
transform(xx, Min=apply(xx,1, min, na.rm = TRUE)) 
```

我认为这不起作用，因为我的前两列是文本而不是所有数字。

有没有办法只计算基于行的计算中的数字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T18:27:49.480

您可以使用`[`以下方式选择相关变量：

```
set.seed(007)
X <- data.frame(matrix(sample(c(10:20, NA), 100, replace=TRUE), ncol=10))
sex <- sample(c('F', 'M'), 10, T)
reg <- sample(c('N', 'S', 'E', 'W'), 10, T)
DF <- cbind(sex, reg, X)
DF # this is your data.frame
       sex reg X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
1    F   E NA 12 17 18 19 16 12 13 20  14
2    F   S 14 12 13 13 14 18 16 17 20  10
3    F   N 11 19 NA 12 19 19 19 20 12  20
4    F   E 10 11 20 12 15 17 18 17 18  12
5    M   E 12 15 NA 14 20 18 16 11 14  18
6    F   E 19 11 10 20 13 14 17 16 10  16
7    M   E 14 16 17 15 10 11 15 15 11  16
8    F   W NA 10 15 19 19 12 15 15 19  14
9    M   N 11 NA NA 20 20 14 14 17 14  19
10   F   W 15 13 14 15 NA 13 15 NA 15  12 
```

如您所见，第一个变量是非数字的。用`sapply(DF, class)`来看。

现在使用`[`如上所述，您可以选择所有数字变量

```
DF[,-c(1,2)] # selecting all variables but 1 and 2 
```

您现在可以对这些变量执行计算

```
transform(DF, SD=apply(DF[,-c(1,2)],1, sd, na.rm = TRUE))  # and so on
   sex reg X1 X2 X3 X4 X5 X6 X7 X8 X9 X10       SD
1    F   E NA 12 17 18 19 16 12 13 20  14 3.041381
2    F   S 14 12 13 13 14 18 16 17 20  10 3.020302
3    F   N 11 19 NA 12 19 19 19 20 12  20 3.865805
4    F   E 10 11 20 12 15 17 18 17 18  12 3.496029
5    M   E 12 15 NA 14 20 18 16 11 14  18 2.958040
6    F   E 19 11 10 20 13 14 17 16 10  16 3.596294
7    M   E 14 16 17 15 10 11 15 15 11  16 2.449490
8    F   W NA 10 15 19 19 12 15 15 19  14 3.201562
9    M   N 11 NA NA 20 20 14 14 17 14  19 3.356763
10   F   W 15 13 14 15 NA 13 15 NA 15  12 1.195229 
```

另一种选择是：

```
newDF <- DF[,sapply(DF, is.numeric)]
transform(DF, SD=apply(newDF,1, sd, na.rm = TRUE))
   sex reg X1 X2 X3 X4 X5 X6 X7 X8 X9 X10       SD
1    F   E NA 12 17 18 19 16 12 13 20  14 3.041381
2    F   S 14 12 13 13 14 18 16 17 20  10 3.020302
3    F   N 11 19 NA 12 19 19 19 20 12  20 3.865805
4    F   E 10 11 20 12 15 17 18 17 18  12 3.496029
5    M   E 12 15 NA 14 20 18 16 11 14  18 2.958040
6    F   E 19 11 10 20 13 14 17 16 10  16 3.596294
7    M   E 14 16 17 15 10 11 15 15 11  16 2.449490
8    F   W NA 10 15 19 19 12 15 15 19  14 3.201562
9    M   N 11 NA NA 20 20 14 14 17 14  19 3.356763
10   F   W 15 13 14 15 NA 13 15 NA 15  12 1.195229 
```

我更喜欢最后一个，因为您不必知道哪个变量是数字，R 会为您选择它们​​。

## 编辑

这将是一个更好的方法

为基本统计定义一个函数

```
 Stats <- function(x){
      Mean <- mean(x, na.rm=TRUE)
      SD <- sd(x, na.rm=TRUE)
      Min <- min(x, na.rm=TRUE)
      Max <- max(x, na.rm=TRUE)
      return(c(Mean=Mean, SD=SD, Min=Min, Max=Max))
    }

    cbind(DF, t(apply(newDF,1, Stats))) # Where newDF is define as above 
   sex reg X1 X2 X3 X4 X5 X6 X7 X8 X9 X10     Mean       SD Min Max
1    F   E NA 12 17 18 19 16 12 13 20  14 15.66667 3.041381  12  20
2    F   S 14 12 13 13 14 18 16 17 20  10 14.70000 3.020302  10  20
3    F   N 11 19 NA 12 19 19 19 20 12  20 16.77778 3.865805  11  20
4    F   E 10 11 20 12 15 17 18 17 18  12 15.00000 3.496029  10  20
5    M   E 12 15 NA 14 20 18 16 11 14  18 15.33333 2.958040  11  20
6    F   E 19 11 10 20 13 14 17 16 10  16 14.60000 3.596294  10  20
7    M   E 14 16 17 15 10 11 15 15 11  16 14.00000 2.449490  10  17
8    F   W NA 10 15 19 19 12 15 15 19  14 15.33333 3.201562  10  19
9    M   N 11 NA NA 20 20 14 14 17 14  19 16.12500 3.356763  11  20
10   F   W 15 13 14 15 NA 13 15 NA 15  12 14.00000 1.195229  12  15 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-19T23:03:49.587

```
summary(t(xx)) 
```

`summary()`可以按列获取统计信息，因此使用`t()`.

# css - 如何在 .less 文件上打开 Visual Studio 2008 .css Intellisense

> ID：12864870
> 
> 赞同：4
> 
> 时间：2012-10-12T18:16:51.517
> 
> 标签：css, visual-studio-2008, intellisense, less

有谁知道如何在非 .css 文件扩展名中启用*Css 智能感知？*
我有一个基本上是 .css 文件的 .less 文件，但**Visual Studio 2008**不会在该文件上使用*Css intellisense 。*

我已经看到很多插件为 VS2010 和 2012 做这个，但在 2008 年没有。

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:36:30.757

不，你不能。两年前，我们（我们的开发团队）甚至无法打开正确的语法突出显示（这让我抓狂）。但是，经过数小时的调查，您可以像我一样在 Sublime Text 2 或 Adob​​e Dreamweaver 中轻松编辑 .less。

见[https://github.com/danro/LESS-sublime](https://github.com/danro/LESS-sublime)

# model-view-controller - 防止代码重复 CodeIgniter 验证

> ID：12864871
> 
> 赞同：0
> 
> 时间：2012-10-12T18:16:52.540
> 
> 标签：model-view-controller, validation, codeigniter

> **可能重复：**
> [不同函数的构造函数会话验证](https://stackoverflow.com/questions/12485719/constructor-session-validation-for-different-functions)

**框架**：CI（CodeIgniter）

**情况**：

我有 4 个页面（控制器），即：

`home` `login` `dashboard` `editprofile`

**使用权**

*   **home**可以被所有类型的用户访问，无论是否登录

*   **登录**必须仅在未经​​身份验证的情况下才能访问

*   **仪表板**和editprofile只能由学生（经过身份验证的用户）访问

我对我的控制器进行了这样的验证：

```
if($this->session->userdata('isLoggedIn')){
    // stay here do the function
} else {
// leave this page
    header('Location:'.base_url().'login');
} 
```

我的`function index(){}`.

但是随着我开发系统，随着我创建更多的方法，更多的控制器，它变得更加混乱......因为你需要使用它

```
if($this->session->userdata('isLoggedIn')){
// stay here do the function
} else {
// leave this page
header('Location:'.base_url().'login');
} 
```

每当你有一个方法，

我已经阅读了stackoverflow中的几个问题......唯一的最佳答案是：link here

它说我必须为此使用装饰器模式......但我不清楚我应该如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:15:05.377

为每种类型的用户创建不同的基本控制器，然后您只需设置该语句一次。我们的用户控制器如下所示：

```
<?PHP
class User_Controller extends MY_Controller
{
function __construct()
{
    parent::__construct();      
    if (!$this->session->userdata('is_logged_in')) {
        $this->session->set_flashdata('message', "I'm sorry, but you must  be logged in to view that page.");
        redirect("/");
    }
}
} 
```

然后我们希望登录用户访问的任何控制器自动扩展 User_Controller 确保任何功能仅在您登录时可用。您需要将其保存到核心文件夹才能扩展它。

您还需要将其添加到您的 config.php 以使基本控制器具有除 MY_ 之外的任何前缀

```
function __autoload($class)
{
if(strpos($class, 'CI_') !== 0)
{
    @include_once( APPPATH . 'core/'. $class . EXT );
}
} 
```

# mysql - 如何在单个查询中执行复杂的插入、选择、更新？

> ID：12864872
> 
> 赞同：0
> 
> 时间：2012-10-12T18:16:52.657
> 
> 标签：mysql, sql

我有 2 张桌子 -`ACCOUNTS`和`USERS`：

帐户：

```
CREATE TABLE  `ACCOUNTS` (
  `pk` bigint(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` varchar(9) NOT NULL,
  `primary` varchar(1) NOT NULL DEFAULT 'N',
  `edit_on` bigint(10) unsigned DEFAULT NULL,
  `status` varchar(1) NOT NULL DEFAULT 'A',
  PRIMARY KEY (`pk`) USING BTREE
) ENGINE=MyISAM AUTO_INCREMENT=1234567890 DEFAULT CHARSET=latin1 
```

用户：

```
CREATE TABLE  `USERS` (
  `user_id` bigint(9) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

如果`edit_on`包含非空值，则表示该条目是对现有条目的编辑，其`pk`包含在`edit_on`.

这是我想要做的：

1.  对于每一个`user_id`in `ACCOUNTS`，都应该有一个匹配`user_id`的 in `USERS`。
2.  如果`edit_on`是`not null`，则应该存在一个等于 this (input)和等于 this (input)`ACCOUNTS`的条目。对于那个（旧）条目，应该设置为.`pk``edit_on``user_id``user_id``status``E`
3.  如果, 那么对于具有特定,`primary = 'Y'`的其他行应设置为`ACCOUNTS``user_id``primary``'N'`

在尝试了很多不同的查询（使用`ON DUPLICATE UPDATE`等）之后，我仍然找不到解决方案。请帮忙，因为我已经为此工作了整整 2 天。提前致谢。

**编辑**

这是我迄今为止尝试过的一些事情：

```
insert into ACCOUNTS
case
    when edit_on is null
        then
            select null, '222222222', 'N', null)
    else
        select null, '222222222', 'N', pk)
        from ACCOUNTS
            where '222222222' = user_id and '2147483680' = pk
        select pk, '222222222', 'N', pk)
        on duplicate key update status='E'
end 
```

我还没有做任何事情`primary`加上*这*不是解决方案：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:23:49.960

听起来您需要两个约束：

1）`FOREIGN KEY`约束。这将确保任何`user_id`插入的内容`ACCOUNTS`都存在于`USERS`.

```
ALTER TABLE ACCOUNTS
ADD FOREIGN KEY
accounts_user_user_id (user_id)
REFERENCES USERS (user_id) 
```

2) 自引用`FOREIGN KEY`约束。这将确保插入的任何值都是来自in`edit_on`的有效值。`pk``ACCOUNTS`

```
ALTER TABLE ACCOUNTS
ADD FOREIGN KEY
accounts_accounts_edit_on (edit_on)
REFERENCES ACCOUNTS (pk) 
```

或者，您可以定义您想要的操作`ON UPDATE`以及`ON DELETE`引用键的操作。[您可以在此处](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)阅读有关`FOREIGN KEY`约束的更多信息。

您需要确保`user_id`两个表的类型相同，并且两个表都是`InnoDB`.

# php - 分解包含引号的字符串

> ID：12864877
> 
> 赞同：0
> 
> 时间：2012-10-12T18:17:40.247
> 
> 标签：php, arrays, quotes, explode

我正在寻找位于字符串中的数据，如下所示： `string(22) "width="16" height="16""`

我希望使用 explode 函数来获取 16 和 16 值并将它们放入我可以使用的数组中。但我不知道如何`$num`在 PHP 的explode 函数中定位。通常我只有一个可以使用的逗号。

像这样的东西，但我知道这是错误的：

```
$size = "width="16" height="16""
$sizes = explode('""', $size); 
```

所有这一切都是：`array(1) { [0]=> string(5) "Array" }`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:30:47.317

explode() 不会为您执行此操作；它只是在常量分隔符（例如逗号）上拆分字符串，您需要做的是从引号之间提取文本。在这个简单的例子中，您可以使用 preg_match_all() 来完成这项工作：

```
 $str = 'width="16" height="16"';
 preg_match_all('/\"(.*?)\"/', $str, $matches);
 print_r($matches); 
```

返回

```
 Array
 (
   [0] => Array
     (
       [0] => "16"
       [1] => "16"
     )

   [1] => Array
     (
       [0] => 16
       [1] => 16
     )
 ) 
```

-- 换句话说，在 preg_match_all() 调用之后， $matches[1] 包含一个与模式匹配的值数组，在这种情况下是你所追求的属性值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:28:54.910

奇怪的变量。

无论哪种方式，为什么不使用拆分命令？

```
$size = 'width="16" height="16"';

$split_sizes = explode('"',$size);
$count = count($split_sizes);

for ( $i = 1; $i < $count; $i += 2) {
    $sizes[] = $split_sizes[$i];
} 
```

这里的假设是字符串将只填充成对的未引用键和双引号值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:36:18.277

试试这个

```
preg_match_all('/"([^"]+)"/', 'width="16" height="16"', $matches);
$result = $matches[1];

/* print_r($result);
Array
(
        [0] => 16
        [1] => 16
)
*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T18:39:43.997

我会这样做：

```
$size = 'width="16" height="16" maxlength="200"';
preg_match_all('/([A-Za-z\-]+)=/',$size,$fields);
preg_match_all('/[A-Za-z\-]+="([A-Za-z0-9_\-]+)"/',$size,$values);
var_dump($fields[1]);
var_dump($values[1]);

// gives you
array(3) {
  [0]=>
  string(5) "width"
  [1]=>
  string(6) "height"
  [2]=>
  string(9) "maxlength"
}
array(3) {
  [0]=>
  string(2) "16"
  [1]=>
  string(2) "16"
  [2]=>
  string(3) "200"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T18:28:23.140

如果它们将成为字符串中的唯一数字 (1234567890)，您可以使用正则表达式来选择这些值。[preg_filter()](http://www.php.net/manual/en/function.preg-filter.php)会做这样的事情 - 只需让你的“替换”用自己替换匹配项（`'$1'`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T18:47:20.793

如何摆脱双引号并在空间上爆炸。然后 $sizes 看起来像：

```
{ 
    [0]=> width=16
    [1]=> height=16
} 
```

然后，您可以在 equals 上分解 $sizes 的每个切片以获取值。

```
{
    [0] => width
    [1] => 16
}
{
    [0] => height
    [1] => 16
} 
```

示例代码：

```
<?php

$size = 'width="16" height="16";
//get rid of all double quotes
$size = str_replace('"', '', $size);
$sizes = explode(' ', $size);
//show what is in the sizes array
print_r($sizes);
//loop through each slide of the sizes array
foreach($sizes as $val)
{
    $vals = explode('=', $val);
//show what is in the vals array during this iteration
    print_r($vals);
}

?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-11T12:04:58.793

你可以简单地使用

```
explode("\"",$string); 
```

# twitter-bootstrap - 如何在 Twitter Bootstrap AngularJS 模态窗口中以 100% 宽度显示 Flot 图表

> ID：12864881
> 
> 赞同：4
> 
> 时间：2012-10-12T18:18:08.273
> 
> 标签：twitter-bootstrap, width, modal-dialog, angularjs, flot

我正在使用 Twitter Bootstrap AngularJS 来构建一个网络应用程序。在模态窗口中，我喜欢显示一个 JQuery Flot 实时图表，类似于：   [http ://people.iola.dk/olau/flot/examples/realtime.html](http://people.iola.dk/olau/flot/examples/realtime.html)

[我从http://people.iola.dk/olau/flot/examples/realtime.html](http://people.iola.dk/olau/flot/examples/realtime.html)复制了代码 ，并将其放在我的服务器上的一个名为 flot2.html 的文件中。有用。我只指定高度，它会自动将宽度设置为 100%

但是，当我将代码放入模板 (index.html) 文件并放入模态窗口时，会出现两个问题。除非我指定宽度，否则它会在下面给我这个错误：

```
Invalid dimensions for plot, width = 0, height = 300 
```

我设置了 width=100%，但看起来它只显示了 100px。

此外，Y 轴的标签位于网格的左边缘/边界上方，而不是其左侧的几个像素。

这是代码：

在 index.app.html 中：

```
<!DOCTYPE HTML>
<html ng-app="app">
...
<body ng-controller="AppCtrl">
...
<div class="container">
  <div ng-view></div>
</div>
...
<script src="/js/jquery.min.js"> 
```

在模板 (index.html) 中：

```
...
<!--  Modal window -->
<div class="modal fade hide" id="chartModal">
...
<style>
  display:block!important;
</style>
<script src="/js/jquery.flot.min.js"></script>
<script src="/js/flot/flot.demo.js"></script>  <!-- I copied the Javascript code from http://people.iola.dk/olau/flot/examples/realtime.html and put it here -->
<div id="placeholder" style="width:100%; height:300px; display:block"></div> 
```

在 bootstrap.css 中：

```
...
.hide {
  display: none;
} 
```

我注意到当我从以下位置删除“隐藏”时：

```
<div class="modal fade hide" id="chartModal"> 
```

我的两个问题消失了，图表看起来很好。但是删除“隐藏”会导致网站上出现其他问题，因此我无法删除它。因此，我添加了这段代码（如上所示）：

```
<style>
  display:block!important;
</style> 
```

但是，它什么也没做。我已经尝试了几乎所有的显示选项，例如 display:auto、display:inline、display:table 等，但它们都不起作用。

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:19:40.067

您必须指定宽度。

根据浮动文档

> *你需要设置这个div的宽度和高度，否则绘图库不知道如何缩放图形。你可以这样内联：*

```
 <div id="placeholder" style="width:600px;height:300px"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:02:14.283

CSS 规则很棘手。尝试直接在您的 CSS 中引用该元素，并确保您的 CSS 在引导程序包含之后。

所以

```
#chartModal { display:block; } 
```

应该可以工作，如果需要，请放入！important。我不喜欢在 CSS 中引用 id，但有时它会让你更快地进入最后阶段。

# android - Android 屏幕尺寸和分辨率

> ID：12864883
> 
> 赞同：0
> 
> 时间：2012-10-12T18:18:10.083
> 
> 标签：android, xml, drawable, resolution, screen-size

> **可能重复：**
> [Android 屏幕尺寸分辨率](https://stackoverflow.com/questions/12864497/android-screen-size-resolution)

我的应用程序在 480x800 分辨率下完美运行。如果我保持 480x800 分辨率但将屏幕尺寸更改为例如 2.7 英寸、3.7 英寸或 5.4 英寸，它仍然是完美的。但是，当我将分辨率更改为例如 640x1066 时，所有的 ImageButton 都太小并且在所有屏幕尺寸中都位于错误的位置...我在所有四个文件夹（drawable-l、m、h、xh）中都创建了 ImageButtons 但仍然是按钮大小不正确..

```
<ImageButton
    android:id="@+id/ib1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="6dp"
    android:layout_marginTop="433dp"
    android:background="@drawable/imagebutton1" />

<ImageButton
    android:id="@+id/ib2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="188dp"
    android:layout_marginTop="436dp"
    android:background="@drawable/imagebutton2" /> 
```

注意：我的问题不是当我改变屏幕尺寸时，而是当我改变屏幕分辨率时。

# ruby-on-rails - 无法使用 xmpp4r_facebook 发送 facebook 消息

> ID：12864884
> 
> 赞同：2
> 
> 时间：2012-10-12T18:18:19.967
> 
> 标签：ruby-on-rails, ruby, facebook, facebook-graph-api, xmpp4r

我正在按照[http://dalibornasevic.com/posts/35-how-to-send-private-messages-with-facebook-api](http://dalibornasevic.com/posts/35-how-to-send-private-messages-with-facebook-api)中的说明向我的朋友发送消息，目前正在从命令行进行测试。以下是我正在使用的代码。当我打开我的 Facebook 帐户并检查发送的消息时，我没有看到我试图通过命令行发送的消息。我只是不明白我正在犯的错误。

```
1.9.3-p194 :017 >   require 'xmpp4r_facebook'
 => true 

1.9.3-p194 :00 3  >   id = '-<my facebook id>@chat.facebook.com'
=> "-<my facebook id>@chat.facebook.com"

1.9.3-p194 :00 4 > to = '-<friend facebook id>@chat.facebook.com'
=> "-< friend's facebook id>@chat.facebook.com"

1.9.3-p194 :00 5 > body = "hello, Im not spam!"
=> "hello, Im not spam!"

1.9.3-p194 :00 6 > subject = 'message from ruby'
=> "message from ruby"

1.9.3-p194 :00 7 > message = Jabber::Message.new to, body
=> <message xmlns='jabber:client' to='-<friend facebook id>@chat.facebook.com'> ... </>

1.9.3-p194 :00 8 > message.subject = subject
=> "message from ruby"

1.9.3-p194 :00 9 >
1.9.3-p194 :010 >   client = Jabber::Client.new Jabber::JID.new(id)
=> #<Jabber::Client:0x007fc47e4d8498 @fd=nil, @status=1, @xmlcbs=#<Jabber::CallbackList:0x007fc47e4d8470 @list=[]>, @stanzacbs=#<Jabber::CallbackList:0x007fc47e4d8420 @list=[]>, @messagecbs=#<Jabber::CallbackList:0x007fc47e4d83d0 @list=[]>, @iqcbs=#<Jabber::CallbackList:0x007fc47e4d8380 @list=[]>, @presencecbs=#<Jabber::CallbackList:0x007fc47e4d8330 @list=[]>, @send_lock=#<Mutex:0x007fc47e4d82e0>, @last_send=2012-10-12 23:29:34 +0530, @exception_block=nil, @tbcbmutex=#<Mutex:0x007fc47e4d8290>, @threadblocks=[], @wakeup_thread=nil, @streamid=nil, @streamns="jabber:client", @features_sem=#<Jabber::Semaphore:0x007fc47e4d8218 @tickets=0, @lock=#<Mutex:0x007fc47e4d81f0>, @cond=#<ConditionVariable:0x007fc47e4d81c8 @waiters=[], @waiters_mutex=#<Mutex:0x007fc47e4d8178>>>, @parser_thread=nil, @processing=0, @host=nil, @port=nil, @allow_tls="constant", @tls=false, @ssl_capath=nil, @ssl_verifycb=nil, @features_timeout=10, @keepalive_interval=60, @use_ssl=false, @jid=-<my facebook id>@chat.facebook.com>

1.9.3-p194 :011 > client.connect
=> #<Jabber::Client:0x007fc47e4d8498 @fd=#<OpenSSL::SSL::SSLSocket:0x007fc47c852260>, @status=2, @xmlcbs=#<Jabber::CallbackList:0x007fc47e4d8470 @list=[]>, @stanzacbs=#<Jabber::CallbackList:0x007fc47e4d8420 @list=[]>, @messagecbs=#<Jabber::CallbackList:0x007fc47e4d83d0 @list=[]>, @iqcbs=#<Jabber::CallbackList:0x007fc47e4d8380 @list=[]>, @presencecbs=#<Jabber::CallbackList:0x007fc47e4d8330 @list=[]>, @send_lock=#<Mutex:0x007fc47e4d82e0>, @last_send=2012-10-12 23:29:35 +0530, @exception_block=nil, @tbcbmutex=#<Mutex:0x007fc47e4d8290>, @threadblocks=[], @wakeup_thread=nil, @streamid="10BAB5BB", @streamns="jabber:client", @features_sem=#<Jabber::Semaphore:0x007fc47e4d8218 @tickets=0, @lock=#<Mutex:0x007fc47e4d81f0>, @cond=#<ConditionVariable:0x007fc47e4d81c8 @waiters=[], @waiters_mutex=#<Mutex:0x007fc47e4d8178>>>, @parser_thread=#<Thread:0x007fc47c852008 sleep>, @processing=0, @host="chat.facebook.com", @port=5222, @allow_tls="constant", @tls=true, @ssl_capath=nil, @ssl_verifycb=nil, @features_timeout=10, @keepalive_interval=60, @use_ssl=false, @jid=santhosh.vangapelli@chat.facebook.com, @socket=#<OpenSSL::SSL::SSLSocket:0x007fc47c852260>, @stream_mechanisms=["X-FACEBOOK-PLATFORM", "DIGEST-MD5"], @stream_features={}, @parser=#<Jabber::StreamParser:0x007fc47c852030 @stream=#<OpenSSL::SSL::SSLSocket:0x007fc47c852260>, @listener=#<Jabber::Client:0x007fc47e4d8498 ...>, @current=nil, @started=true>, @keepaliveThread=#<Thread:0x007fc47c899868 run>>
1.9.3-p194 :012 > client.auth_sasl(Jabber::SASL::XFacebookPlatform.new(client, '<App ID>', '<access token>', 'App Secret'), nil) => <iq xmlns='jabber:client' type='result' id='2071'> ... </>

1.9.3-p194 :013 > client.send message
=> nil

1.9.3-p194 :014 > client.close
=> #<Thread:0x007fc47c899868 dead> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:42:10.533

这个 gem 的格式是

`-<id>@chat.facebook.com`对于`to`和`id`

不是

`<id>@chat.facebook.com`

注意最初的破折号`-`（不知道为什么）

所以之后的回应

```
message = Jabber::Message.new to, body 
```

应该

`<message xmlns='jabber:client' to='-<friend facebook id>@chat.facebook.com'> ... </>`

我不确定用户名是否可以互换，因此您必须使用 Facebook 用户的 id 号，我相信您只能使用 Chat API 在 Facebook 朋友之间进行交流，而不是与 Gmail 中的任何人交流。Facebook Messages 是一个与 Facebook Chat 完全不同的平台。

您需要使用 id，例如，如果配置文件是`facebook.com/zuck`并且 id 是`4`，那么`to = '-4@chat.facebook.com'`我相信用户名将不适用于这个 gem。

# validation - AngularJS：与服务器端验证集成

> ID：12864887
> 
> 赞同：55
> 
> 时间：2012-10-12T18:18:39.390
> 
> 标签：validation, angularjs

我有一个角度应用程序，其中包含从示例中获取的保存按钮：

```
<button ng-click="save" ng-disabled="form.$invalid">SAVE</button> 
```

这对于客户端验证非常有用，因为`form.$invalid`当用户修复问题时会变为错误，但是如果另一个用户使用相同的电子邮件注册，我有一个电子邮件字段设置为无效。

一旦我将电子邮件字段设置为无效，我就无法提交表单，并且用户无法修复该验证错误。所以现在我不能再使用`form.$invalid`来禁用我的提交按钮了。

肯定有更好的办法

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-12T18:57:11.087

这是自定义指令是您朋友的另一种情况。您需要创建一个指令并将 $http 或 $resource 注入其中，以便在验证时回调服务器。

自定义指令的一些伪代码：

```
app.directive('uniqueEmail', function($http) {
  var toId;
  return {
    restrict: 'A',
    require: 'ngModel',
    link: function(scope, elem, attr, ctrl) { 
      //when the scope changes, check the email.
      scope.$watch(attr.ngModel, function(value) {
        // if there was a previous attempt, stop it.
        if(toId) clearTimeout(toId);

        // start a new attempt with a delay to keep it from
        // getting too "chatty".
        toId = setTimeout(function(){
          // call to some API that returns { isValid: true } or { isValid: false }
          $http.get('/Is/My/EmailValid?email=' + value).success(function(data) {

              //set the validity of the field
              ctrl.$setValidity('uniqueEmail', data.isValid);
          });
        }, 200);
      })
    }
  }
}); 
```

以下是您在标记中使用它的方式：

```
<input type="email" ng-model="userEmail" name="userEmail" required unique-email/>
<span ng-show="myFormName.userEmail.$error.uniqueEmail">Email is not unique.</span> 
```

编辑：对上面发生的事情的一个小解释。

1.  当您更新输入中的值时，它会更新 $scope.userEmail
2.  该指令在 $scope.userEmail 上有一个 $watch ，它在其链接功能中设置。
    *   当 $watch 被触发时，它会通过 $http ajax 调用来调用服务器，并传递电子邮件
    *   服务器将检查电子邮件地址并返回一个简单的响应，例如 '{ isValid: true }
    *   该响应用于 $setValidity 控件。
3.  标记中有一个 ng-show 设置为仅在 uniqueEmail 有效性状态为 false 时显示。

...对用户来说，这意味着：

1.  键入电子邮件。
2.  轻微的停顿。
3.  如果电子邮件不是唯一的，“电子邮件不是唯一的”消息会显示“实时”。

EDIT2：这也允许您使用 form.$invalid 禁用您的提交按钮。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-04-09T18:35:59.307

我在一些项目中需要这个，所以我创建了一个指令。最后花了一点时间把它放在 GitHub 上，供任何想要一个插入式解决方案的人使用。

[https://github.com/webadvanced/ng-remote-validate](https://github.com/webadvanced/ng-remote-validate)

**特征：**

*   用于 Ajax 验证任何文本或密码输入的解决方案

*   与 Angulars 内置验证一起使用，并且可以通过 formName.inputName.$error.ngRemoteValidate 访问 cab

*   限制服务器请求（默认 400 毫秒）并且可以设置为`ng-remote-throttle="550"`

*   允许使用 HTTP 方法定义（默认 POST）`ng-remote-method="GET"`

要求用户输入当前密码和新密码的更改密码表单的示例用法：

```
<h3>Change password</h3>
<form name="changePasswordForm">
    <label for="currentPassword">Current</label>
    <input type="password" 
           name="currentPassword" 
           placeholder="Current password" 
           ng-model="password.current" 
           ng-remote-validate="/customer/validpassword" 
           required>
    <span ng-show="changePasswordForm.currentPassword.$error.required && changePasswordForm.confirmPassword.$dirty">
        Required
    </span>
    <span ng-show="changePasswordForm.currentPassword.$error.ngRemoteValidate">
        Incorrect current password. Please enter your current account password.
    </span>

    <label for="newPassword">New</label>
    <input type="password"
           name="newPassword"
           placeholder="New password"
           ng-model="password.new"
           required>

    <label for="confirmPassword">Confirm</label>
    <input ng-disabled=""
           type="password"
           name="confirmPassword"
           placeholder="Confirm password"
           ng-model="password.confirm"
           ng-match="password.new"
           required>
    <span ng-show="changePasswordForm.confirmPassword.$error.match">
        New and confirm do not match
    </span>

    <div>
        <button type="submit" 
                ng-disabled="changePasswordForm.$invalid" 
                ng-click="changePassword(password.new, changePasswordForm);reset();">
            Change password
        </button>
    </div>
</form> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-07T06:17:47.530

我创建了 plunker，其解决方案非常适合我。它使用自定义指令，但在整个表单上而不是在单个字段上。

[http://plnkr.co/edit/HnF90JOYaz47r8zaH5JY](http://plnkr.co/edit/HnF90JOYaz47r8zaH5JY)

我不建议禁用服务器验证的提交按钮。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-22T14:35:49.150

行。如果有人需要工作版本，它在这里：

来自文档：

```
 $apply() is used to enter Angular execution context from JavaScript

 (Keep in mind that in most places (controllers, services) 
 $apply has already been called for you by the directive which is handling the event.) 
```

这让我觉得我们不需要： `$scope.$apply(function(s) {`否则它会抱怨`$digest`

```
app.directive('uniqueName', function($http) {
    var toId;
    return {
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
            //when the scope changes, check the name.
            scope.$watch(attr.ngModel, function(value) {
                // if there was a previous attempt, stop it.
                if(toId) clearTimeout(toId);

                // start a new attempt with a delay to keep it from
                // getting too "chatty".
                toId = setTimeout(function(){
                    // call to some API that returns { isValid: true } or { isValid: false }
                    $http.get('/rest/isUerExist/' + value).success(function(data) {

                        //set the validity of the field
                        if (data == "true") {
                            ctrl.$setValidity('uniqueName', false);
                        } else if (data == "false") {
                            ctrl.$setValidity('uniqueName', true);
                        }
                    }).error(function(data, status, headers, config) {
                        console.log("something wrong")
                    });
                }, 200);
            })
        }
    }
}); 
```

HTML：

```
<div ng-controller="UniqueFormController">

        <form name="uniqueNameForm" novalidate ng-submit="submitForm()">

            <label name="name"></label>
            <input type="text" ng-model="name" name="name" unique-name>   <!-- 'unique-name' because of the name-convention -->

            <span ng-show="uniqueNameForm.name.$error.uniqueName">Name is not unique.</span>

            <input type="submit">
        </form>
    </div> 
```

控制器可能如下所示：

```
app.controller("UniqueFormController", function($scope) {
    $scope.name = "Bob"
}) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-20T12:14:35.283

感谢此页面的答案了解[https://github.com/webadvanced/ng-remote-validate](https://github.com/webadvanced/ng-remote-validate)

选项指令，这比我不太喜欢的略少，因为每个字段都要写指令。模块是相同的 - 一个通用的解决方案。

但是在模块中我遗漏了一些东西 - 检查该字段的几个规则。
然后我刚刚修改了模块[https://github.com/borodatych/ngRemoteValidate](https://github.com/borodatych/ngRemoteValidate)
为俄罗斯自述文件道歉，最终会改变。
我赶紧分享一下突然有人有同样的问题。
是的，我们为此聚集在这里……

加载：

```
<script type="text/javascript" src="../your/path/remoteValidate.js"></script> 
```

包括：

```
var app = angular.module( 'myApp', [ 'remoteValidate' ] ); 
```

**HTML**

```
<input type="text" name="login" 
ng-model="user.login" 
remote-validate="( '/ajax/validation/login', ['not_empty',['min_length',2],['max_length',32],'domain','unique'] )" 
required
/>
<br/>
<div class="form-input-valid" ng-show="form.login.$pristine || (form.login.$dirty && rv.login.$valid)">
    From 2 to 16 characters (numbers, letters and hyphens)
</div>
<span class="form-input-valid error" ng-show="form.login.$error.remoteValidate">
    <span ng:bind="form.login.$message"></span>
</span> 
```

**后端 [Kohana]**

```
public function action_validation(){

    $field = $this->request->param('field');
    $value = Arr::get($_POST,'value');
    $rules = Arr::get($_POST,'rules',[]);

    $aValid[$field] = $value;
    $validation = Validation::factory($aValid);
    foreach( $rules AS $rule ){
        if( in_array($rule,['unique']) ){
            /// Clients - Users Models
            $validation = $validation->rule($field,$rule,[':field',':value','Clients']);
        }
        elseif( is_array($rule) ){ /// min_length, max_length
            $validation = $validation->rule($field,$rule[0],[':value',$rule[1]]);
        }
        else{
            $validation = $validation->rule($field,$rule);
        }
    }

    $c = false;
    try{
        $c = $validation->check();
    }
    catch( Exception $e ){
        $err = $e->getMessage();
        Response::jEcho($err);
    }

    if( $c ){
        $response = [
            'isValid' => TRUE,
            'message' => 'GOOD'
        ];
    }
    else{
        $e = $validation->errors('validation');
        $response = [
            'isValid' => FALSE,
            'message' => $e[$field]
        ];
    }
    Response::jEcho($response);
} 
```

# jquery - 在点击时使用 jquery 隐藏元素在 IE 上不起作用？

> ID：12864889
> 
> 赞同：0
> 
> 时间：2012-10-12T18:18:56.020
> 
> 标签：jquery, html, css

我有这样的下拉菜单，

```
<div class="my_div">
    <select name="selection" id="select_id">
        <option value="0">A</option>
        <option value="5">B</option>
        <option value="6">C</option>
        <option value="7">D</option>
        <option value="8">D</option>
        <option value="9">F</option>
    </select>
</div> 
```

我的链接看起来像这样，

```
<a class="links" href="#">Disable A C D</a>
<a class="links" href="#">Disable B E F</a> 
```

我的脚本看起来像这样，

```
$(document).ready(function(){
    $('.links a').click(function(){
        var txt = $(this).text();       

        if( txt == 'Disable A C D'){
            $('div.my_div #select_id').find("option[value='0']").hide();
            $('div.my_div #select_id').find("option[value='6']").hide();
            $('div.my_div #select_id').find("option[value='7']").hide();
        }
    });
}); 
```

这适用`Firefox`，`Chrome`但只有禁用该选项才能起作用`IE`，隐藏它不起作用。我想念什么？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:35:33.693

您的代码示例不适用于任何浏览器。

'.links a' 应该只是 '.links' 或 'a.links'，当 '#select_id' 可以正常工作时，你不需要 'div.my_div #select_id'。

对于您的问题，看起来 IE 不喜欢`display: none`Option 元素。您可能必须根据需要以编程方式删除和添加选项到 Select 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:25:53.500

您的链接选择器错误。尝试这个：

`$('a.links')`

这个小提琴适用于 IE（至少 9 个）：http: [//jsfiddle.net/gromer/2qyT7/1/](http://jsfiddle.net/gromer/2qyT7/1/)

请注意，该 Fiddle 中有几个 console.logs，可能会使 IE 生气。

它不会隐藏`option`在 IE 中，但它们已被禁用。

编辑：我根据您在 SO 上找到的要求和答案为 IE 拼凑了这个解决方法。

新小提琴：http: [//jsfiddle.net/2qyT7/19/](http://jsfiddle.net/2qyT7/19/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:41:07.710

它只适用于FF，它不应该。（[见这个 jsFiddle](http://jsfiddle.net/KEfjM/2/)）

[这个问题也已经问过了。](https://stackoverflow.com/questions/4398966/how-can-i-hide-select-options-with-javascript-cross-browser)

如果您真的想从您的选择列表中删除该选项，您应该完全删除它们，而不是隐藏它们。如果您可能想要它们回来，请将它们移到内存中的其他数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:38:36.073

...您确定它可以在 chrome 中使用吗？[http://jsfiddle.net/KEfjM/2/](http://jsfiddle.net/KEfjM/2/)这是 CSS/浏览器支持问题，不是 jQuery 问题。唯一的解决方案是从选择中删除选项。

```
$(document).ready(function(){
    $('.links a').click(function(){
        var txt = $(this).text();    
        if( txt == 'Disable A C D'){
           $('#select_id').find("option[value='0'],option[value='6'],option[value='7']").detach();
        }
    });
}); 
```

# rdf - 使用 SPARQL 查询链接电影数据库 (LMDB)

> ID：12864893
> 
> 赞同：3
> 
> 时间：2012-10-12T18:19:17.627
> 
> 标签：rdf, sparql, semantic-web, linked-data

给定这样的 RDF 图：

```
:Matrix [rdfs:label] :The Matrix .
:Matrix [movie:id] :23 .
:Matrix [movie:actor] :Keanu Reaves .
:Matrix [movie:actor] :Laurence Fishburne .
:Die Hard 3 [rdfs:label] :Die Hard 3 .
:Die Hard 3 [movie:id] :42 .
:Die Hard 3 [movie:actor] :Bruce Willis .
:Die Hard 3 [movie:actor] :Samuel L. Jackson . 
```

和这样的查询：

```
SELECT ?id ?name ?actor
WHERE {
  ?instance movie:id ?id .
  ?instance rdfs:label ?name .
  ?instance movie:actor ?actor .
} 
```

我希望得到如下结果：

```
id | name       | actor
23 | The Matrix | Laurence Fishburne
23 | The Matrix | Keanu Reaves
42 | Die Hard 3 | Bruce Willis
42 | Die Hard 3 | Samuel L. Jackson 
```

但相反，我只得到：

```
id | name       | actor
23 | The Matrix | Laurence Fishburne
42 | Die Hard 3 | Bruce Willis 
```

那是怎么回事？

顺便说一句，当我使用这个查询时：

```
SELECT *
WHERE {
  ?instance movie:id ?id .
  ?instance rdfs:label "The Matrix" .
  ?instance movie:actor ?actor .
} 
```

结果是（如预期的那样）：

```
id | name       | actor
23 | The Matrix | Laurence Fishburne
23 | The Matrix | Keanu Reaves 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T16:35:29.223

使用 Jena 的 ARQ，我能够使用以下查询从 Linked Movie DataBase SPARQL 端点获取您似乎感兴趣的数据：

```
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX movie: <http://data.linkedmdb.org/resource/movie/>

SELECT ?id ?filmTitle ?actorName WHERE { 
  VALUES ?filmTitle { "The Matrix" }
  SERVICE <http://data.linkedmdb.org/sparql> {
    ?film a movie:film ;
          movie:filmid ?id ;
          dcterms:title ?filmTitle ;
          movie:actor [ a movie:actor ;
                        movie:actor_name ?actorName ].
  }
} 
```

`data.n3`是一个空文件，因为`arq`需要一个`--data`参数，即使`SERVICE`关键字意味着我们正在查询远程数据。

```
$ arq --query query.sparql --data data.n3 
-----------------------------------------------------------------------------------------
| id                                              | filmTitle    | actorName            |
=========================================================================================
| "38146"^^<http://www.w3.org/2001/XMLSchema#int> | "The Matrix" | "Keanu Reeves"       |
| "38146"^^<http://www.w3.org/2001/XMLSchema#int> | "The Matrix" | "Laurence Fishburne" |
| "38146"^^<http://www.w3.org/2001/XMLSchema#int> | "The Matrix" | "Hugo Weaving"       |
| "38146"^^<http://www.w3.org/2001/XMLSchema#int> | "The Matrix" | "Joe Pantoliano"     |
| "38146"^^<http://www.w3.org/2001/XMLSchema#int> | "The Matrix" | "Gloria Foster"      |
| "38146"^^<http://www.w3.org/2001/XMLSchema#int> | "The Matrix" | "Carrie-Anne Moss"   |
----------------------------------------------------------------------------------------- 
```

当然，删除这`VALUES ?filmTitle ...`条线会将搜索范围扩大到所有电影及其演员。

您的查询中使用的属性与 LMDB 中使用的实际属性有很大的不同，很难看出可能有什么有意义的不同。它可以`rdfs:label`代替`dcterms:title`，或者带有或不带有语言标签的字符串，等等。

# java - 基于java类中的2个字段实现搜索

> ID：12864894
> 
> 赞同：1
> 
> 时间：2012-10-12T18:19:21.627
> 
> 标签：java, algorithm, search, collections

为了便于理解，我试图在这里提出我的要求的简化版本。

我有这门课

```
public class MyClass {
   private byte[] data1;
   private byte[] data2;
   private long hash1;  // Hash value for data1
   private long hash2;  // Hash value for data2
   // getter and setters } 
```

现在我需要在这个类的 2 个 List 实例之间进行搜索，找到这 2 个实例之间有多少 hash1 匹配，以及所有匹配有多少对应的 hash2 匹配。2 列表将有大约 1000 万个 MyClass 对象。

现在我打算遍历第一个列表并在第二个列表中搜索。有没有一种方法可以通过以任何特定方式排序或排序来优化搜索？我应该对两个列表进行排序还是仅对 1 个列表进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:21:52.813

仅第二次排序，首先迭代并在第二次进行二进制搜索，排序 O(nlogn) 并且对 n 项进行二进制搜索 O(nlogn)

或第二次使用哈希集，首先迭代并在第二次搜索，O(n)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:23:46.483

最好的解决方案是迭代没有比这更快的解决方案。您可以创建 Hashmap 并利用 map 不会添加相同的键，但它有自己的创建重载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:31:57.993

如果您必须检查所有元素，我认为您应该遍历第一个列表并为第二个列表创建一个 Hashmap，如 AmitD 所述。

您只需要正确覆盖`equals`并`hashcode`在您的`MyClass`班级中。最后，我会建议你尽可能使用基本类型。例如，对于第一个列表，使用简单数组而不是列表会更好。

此外，在开始时，您可以选择两个列表中的哪一个是较短的（如果大小不同）并迭代该列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:43:51.820

我认为您应该为其中一个列表创建一个哈希图（例如`list1`）-

```
Map<Long, MyClass> map = new HashMap<Long, MyClass>(list1.size());//specify the capacity
//populate map like - put(myClass.getHash1(), myClass) : for each element in the list 
```

现在只需遍历第二个列表（对两者进行排序没有意义）-

```
int hash1MatchCount = 0;
int hash2MatchCount = 0;
for(MyClass myClass : list2) {
    MyClass mc = map.get(myClass.getHash1());
    if(mc != null) {
        hash1MatchCount++;
        if(myClass.getHash2() == mc.getHash2) {
            hash2MatchCount++;
        }
    }
} 
```

注意：假设没有关于`hash1`重复的问题。

# redis - redis如何处理大数据

> ID：12864900
> 
> 赞同：0
> 
> 时间：2012-10-12T18:19:42.547
> 
> 标签：redis

我的电脑有3G内存，我将数据存储到redis中。我通过dump.rdb将数据写入磁盘。我发现当dump.rdb大约1.5G时，redis会关闭，这是为什么呢？

当我在redis-cli中输入**信息**时，我发现我所有的内存都被redis占用了。

如何解决这个问题？

我用`32bit, ubuntu 12.04.`

如果我加更多内存，32位机器只能容纳4G内存，那么如果我再增加5G数据，那么这么多数据如何处理？

谢谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:24:15.817

您正在达到 32 位进程内存限制。2GB 的地址空间是为内核保留的，只剩下 2GB。然后你读取 1.5GB，大概用它做更多的事情，包括分配更多的内存，在这个过程的某个地方，你用完了。

如果您希望能够使用更多功能，则需要一台具有更多内存和 64 位操作系统的机器。

# javascript - 如何滚动到 ul 列表中的 li 元素

> ID：12864901
> 
> 赞同：16
> 
> 时间：2012-10-12T18:19:47.100
> 
> 标签：javascript, jquery, list, web

我在带有 li 元素的 div 中有一个 ul 列表，在 li 元素中是一个复选框。我有复选框的 ID。所以我想获取复选框的父 li 元素并滚动到它的位置。我不能让它工作。

我的html是这样的：

```
<div id="divElement">
   <ul>
      <li>
         <input type="checkbox" id="343532532523" />
      </li>
   </ul>
</div> 
```

我尝试了这两种方法，但它们对我不起作用：

```
$('#divElement').scrollTop($('#343532532523').parent().position().top);
$('#divElement').firstChild().scrollTop($('#343532532523).parent().position().top); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-23T08:01:50.283

如果有人需要香草 JS 版本，以下对我来说效果很好，50 的值只是为了让我在靠近列表顶部时显示整个项目。你可以调整它。

```
function updateListSelection(liID) {

    var list = document.getElementById("id Tag Of The <UL> element"),
        targetLi = document.getElementById(liID); // id tag of the <li> element

    list.scrollTop = (targetLi.offsetTop - 50);
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T16:54:48.213

我有另一个开发朋友帮助我，我们想出了这个，它可以工作，没有动画，我可以做到我只是不需要它..

```
var offset = $('#someDivElementId ul li').first().position().top;
$('#someDivElementId').scrollTop($('#23532532532532').parent().position().top - offset); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-11T15:17:07.653

我使用 Element.scrollIntoView() 方法解决了这个问题：

[https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)

它可以在 Chrome、Firefox 和 Internet Explorer 中运行——我还没有在任何其他浏览器中测试过它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-31T21:18:35.607

老问题，但这是一个纯 js 函数，如果它当前在顶部上方，则将 LI 滚动到顶部的视图中，如果它当前在底部下方，则在底部。如果您使用向下和向上箭头滚动浏览它（使用 addEventListener 处理 keydown 和 keyup 事件），这将提供平滑滚动 UL。

```
function scrollUL(li) {
    // scroll UL to make li visible
    // li can be the li element or its id
    if (typeof li !== "object"){
        li = document.getElementById(li);
    }
    var ul = li.parentNode;
    // fudge adjustment for borders effect on offsetHeight
    var fudge = 4;
    // bottom most position needed for viewing
    var bottom = (ul.scrollTop + (ul.offsetHeight - fudge) - li.offsetHeight);
    // top most position needed for viewing
    var top = ul.scrollTop + fudge;
    if (li.offsetTop <= top){
        // move to top position if LI above it
        // use algebra to subtract fudge from both sides to solve for ul.scrollTop
        ul.scrollTop = li.offsetTop - fudge;
    } else if (li.offsetTop >= bottom) {
        // move to bottom position if LI below it
        // use algebra to subtract ((ul.offsetHeight - fudge) - li.offsetHeight) from both sides to solve for ul.scrollTop
        ul.scrollTop = li.offsetTop - ((ul.offsetHeight - fudge) - li.offsetHeight) ;
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T18:33:47.343

一个有趣的怪癖：

```
window.location.href = window.location.origin+window.location.pathname+window.location.search+"#343532532523" 
```

它的作用是获取 url 部分并将其设置回元素的实际锚点

如果您的网站不是 webapp 之类的东西，可能适用于大多数情况 =)

编辑：在现代浏览器中没有往返，唯一更改的 URL 部分是锚点。我对不是 webapp 的考虑是，这类网站通常会编辑锚点和历史记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T01:01:36.980

这是一个简单的演示，它使用 jQuery`position()`获取父 UL 中的 LI 位置，然后使用`animate()`滚动视图中的复选框

[http://jsfiddle.net/qKGv8/](http://jsfiddle.net/qKGv8/)

API 参考：

[http://api.jquery.com/position/](http://api.jquery.com/position/) http://api.jquery.com/animate/

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-05T07:16:01.947

promptAnswerBlock-->ul 元素id

$('#promptAnswerBlock').scrollTop($('#promptAnswerBlock')[0].scrollHeight + 150);

150 只是一个偏移值

您可以根据您的要求进行调整

# php - SEO 友好的 .htaccess RuleRewrites

> ID：12864904
> 
> 赞同：0
> 
> 时间：2012-10-12T18:20:22.180
> 
> 标签：php, html, .htaccess, seo

我正在使用一款具有产品类别的电子商务软件，链接如下：
`http://www.mysitename.com/mycategory--c7.html`

有没有一种简单的方法可以删除“--c7”或它产生的任何标识符？

这是我在 .htacccess 中发现的一部分：

```
#cre SEO reformat for pages.html pages
RewriteRule ^pd([0-9]+_?[0-9]*)-(.*)\.html$ pages.php?pID=$1 [QSA,L]
RewriteRule ^(.*)/c([^/]*)/p([0-9]+_?[0-9]*)/(.*)/pages\.html$ pages.php?cID=$2&pID=$3 [QSA,L]
RewriteRule ^(.*)/c([^/]*)/pages\.html$ pages.php?cID=$2 [QSA,L] 
```

我真的不知道这个符号，所以稍微解释一下你的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:12:00.813

检查 .htaccess 的 URL 重写。那是你想要集中注意力的地方，但这可能需要一些工作，所以要做好准备。

# javascript - 在道场中创建 dijit 的三元逻辑

> ID：12864907
> 
> 赞同：1
> 
> 时间：2012-10-12T18:20:27.943
> 
> 标签：javascript

在 if/else 中执行此操作相当简单，但我正在尝试了解三元逻辑及其工作原理。这是我第一次尝试。

```
 if(condtion == true){
                        var showProtected = new dijit.form.CheckBox({                                                               
                            checked: true
                        })else{
                            showProtected = new dijit.form.CheckBox({
                            checked: false
                            });     
                        });
                         showProtected.placeAt("showProtected", "first");   
} 
```

我累了但不工作：

```
showProtected = (condition == true) ? new dijit.form.CheckBox({                                                             
                            checked: true
                        }) : new dijit.form.CheckBox({
                            checked: false
                        });     
                         showProtected.placeAt("showProtected", "first"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:23:59.047

你可以让它更简单，然后说：

```
var showProtected = new dijit.form.CheckBox({
  checked: (condition == true)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:47:14.547

```
 if(condition){                     
                        var pro = new dijit.form.CheckBox({
                            id: "true",                                 
                            title: "Checked",
                            checked: true
                        });                         

                    }else{
                        var pro = new dijit.form.CheckBox({
                            id: "false",                                
                            title: "Unchecked",
                            checked: false
                        });             
                    }
                    pro.placeAt("showCheckbox", "first"); 
```

# r - 将日期转换为年季格式

> ID：12864910
> 
> 赞同：3
> 
> 时间：2012-10-12T18:20:49.277
> 
> 标签：r, date, date-format

我有一堆格式的日期，`yyyy-mm-dd`我想将它们转换为一年中的季度的`yyyy-q`格式`qq`（所以月份 1、2、3 映射到 q=1 和 4、5、6 映射到 q =2 等）。我使用以下函数来完成此操作：

```
get_month <- function(d) { return(as.numeric(format(d, "%m")))}
get_qtr <- function(d) {
f <- function(m) {
    if (m %in% c(1,2,3)) { return(1) }
    else if (m %in% c(4,5,6)) { return(2) }
    else if (m %in% c(7,8,9)) { return(3) }
    else if (m %in% c(10,11,12)) { return(4) }
}
m <- get_month(d)
r <- sapply(m, f)
return(r)
} 
```

然而，这是非常缓慢的。有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:21:23.977

您可以`yearqtr`在 zoo 包中使用。

```
> as.yearqtr(Sys.Date())
[1] "2012 Q4" 
```

# python - 用 Python 提取隐藏的 html

> ID：12864911
> 
> 赞同：0
> 
> 时间：2012-10-12T18:20:53.587
> 
> 标签：python, html-parsing

我对“隐藏”的 html 代码有点困惑。如果我使用“查看源代码”功能，我尝试提取的 html 源代码部分如下所示：

```
<div class="comments_with_more">
  <div id="comments_section">
  </div>
</div> 
```

如果我在 Firefox 中使用“检查元素”功能，它会显示隐藏在“查看源代码”选项中的附加层：

```
<div class="comments_with_more">
  <div id="comments_section">
    <div id="comments">
      (....what I am trying to get to.........)
    </div>
    <script>
  </div>
</div> 
```

我怀疑脚本可能是什么搞砸了。有谁知道如何获取一般或 Python 中的隐藏代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:39:48.710

您应该为此使用[webkit](http://en.wikipedia.org/wiki/WebKit)的绑定，[在这里](http://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/)您可以看到它正在执行您需要的操作（解析已加载 javascript 更改的页面）

# objective-c - 实现 HIDictionaryWinsowShow 函数并获取错误：无法获取 Carbon 窗口的属性

> ID：12864913
> 
> 赞同：5
> 
> 时间：2012-10-12T18:21:05.293
> 
> 标签：objective-c, xcode

我想将字典服务添加到我的应用程序中，所以我实现了 HIDictioanryWindowShow()。这是我的代码

> CFRange 范围=DCSGetTermRangeInString (NULL,(__bridge CFStringRef)string,0);

```
CTFontRef font =CTFontCreateWithName((__bridge CFStringRef)string, 0.0, NULL);
CGFloat x= [_window frame].size.width/3;
CGFloat y = [_window frame].size.height/2; 
```

> HIDictionaryWindowShow(NULL, (__bridge CFStringRef)string, range, font, CGPointMake(x, y), YES, NULL);

当我运行我的应用程序时，出现错误说：无法获取 Carbon 窗口的属性。无法获得碳窗的功能。无法获取窗口模式：错误=-5600

请帮我 ！谢谢你 ！

# data-structures - 标记斐波那契堆中某些节点的目的是什么？

> ID：12864914
> 
> 赞同：3
> 
> 时间：2012-10-12T18:21:07.393
> 
> 标签：data-structures, heap, priority-queue, fibonacci-heap

这张来自[维基百科文章的](http://en.wikipedia.org/wiki/Fibonacci_heap)[图片](http://en.wikipedia.org/wiki/File%3aFibonacci_heap.png)有一个斐波那契堆的三个节点，标记为蓝色。在这个数据结构中标记一些节点的目的是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T20:03:06.477

直观地说，斐波那契堆维护着一组不同顺序的树，当删除最小值发生时将它们合并。构建斐波那契堆的希望是每棵树都拥有大量节点。每棵树中的节点越多，需要存储在树中的树的数量就越少，因此在每个删除分钟上合并树所花费的时间就越少。

同时，斐波那契堆试图使递减键操作尽可能快。为此，斐波那契堆允许子树从其他树中“切出”并移回根部。这使得减少键更快，但使每棵树拥有更少的节点（并且也增加了树的数量）。因此，设计结构中存在基本张力。

为了使它起作用，斐波那契堆中的树的形状必须有所限制。直观地说，斐波那契堆中的树是允许丢失少量孩子的[二叉树。](http://en.wikipedia.org/wiki/Binomial_heap#Binomial_tree)具体来说，斐波那契堆中的每棵树最多允许丢失两个孩子，然后该树需要在后面的步骤“重新处理”。斐波那契堆中的标记步骤允许数据结构计算到目前为止丢失了多少孩子。未标记的节点没有丢失任何子节点，而标记的节点丢失了一个子节点。一旦一个标记节点失去了另一个孩子，它就失去了两个孩子，因此需要移回根列表进行重新处理。

许多介绍性算法教科书记录了为什么这项工作的细节。这一点都不明显，而且数学有点棘手。

希望这提供了一个有用的直觉！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T18:24:53.613

当其子节点之一由于减少键而被剪切时，节点被标记。当第二个孩子被切割时，该节点也会从其父节点切割自己。标记已完成，以便您知道第二次切割何时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T10:15:15.787

来自Wiki的很好的解释：操作减少键将取节点，减少键，如果违反堆属性（新键小于父键），则从其父节点中删除节点。如果父级不是根，则对其进行标记。如果它已经被标记，它也会被剪切并标记它的父节点。我们继续向上直到到达根节点或未标记的节点。现在，如果它是新的最小值，我们将最小值指针设置为减小的值。

# jsp - Netbeans中的jsp颜色编码视图

> ID：12864928
> 
> 赞同：0
> 
> 时间：2012-10-12T18:21:41.043
> 
> 标签：jsp, netbeans-7, code-formatting

我正在使用 Netbeans 7.0 中的 JSP，现在 jsp 代码看起来像纯文本记事本数据，没有不同代码块（如 java 代码）的颜色编码。有什么方法可以让 netbeabs 为 JSP 显示这种格式化的代码？该项目是一个 Java 自由格式项目，如果 Netbeans 期望项目是用于 JSP 代码格式的“Web 应用程序”类型，则需要一种方法来忽略项目类型。

我现在也无法使用 Netbeans 在 JSP 中设置断点，并且 jsut 在线阅读它，这对于 jsp 中的嵌入式 java 部分是可能的。如何设置 Netbeans 以便我可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:07:57.593

您是否有理由需要它成为 Java 自由形式项目？您可以创建一个新的 Web 应用程序项目，并且 JSP 标记将被着色。

# javascript - 单击事件jQuery后更改默认图像

> ID：12864929
> 
> 赞同：1
> 
> 时间：2012-10-12T18:21:40.730
> 
> 标签：javascript, jquery, html

我想在单击图像时获得新的图像，但 1 秒后我想获得默认值。我添加了函数 setTimeout()，但一秒钟后我仍然有相同的图像（pressed.svg）

这是我所有的代码：

```
 <html>
 <head>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script language='Javascript'> 

 $(document).ready(function(){

            $("#myImage").on("click",function() {

                $(this).attr("src","images/pressed.svg");
                setTimeout(function() {
                    $(this).attr("src","images/normal.svg");
                },1000);

            });

        });
        </script>
</head>
  <body>
      <img src="images/normal.svg" id="myImage">    
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:25:19.263

问题是`this`在你的匿名函数调用中指错了`this`。您需要将`this`处理程序中的值分配给匿名函数将使用的临时值：

```
$(document).ready(function() {
    $("#myImage").on("click",function() {
        var me = this;
        $(me).attr("src", "images/pressed.svg");
        setTimeout(function() {
            $(me).attr("src", "images/normal.svg");
        }, 1000);
    });
}); 
```

你可以只使用 DOM 来完成同样的事情，因为你没有做任何特定于 jQuery 的事情：

```
$(document).ready(function() {
    $("#myImage").on("click", function() {
        var me = this;
        me.src = "images/pressed.svg";
        setTimeout(function() {
            me.src = "images/normal.svg";
        }, 1000);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:25:45.237

演示：http: [//jsfiddle.net/](http://jsfiddle.net/)

JS修复：

```
 $(document).ready(function(){
        $("#myImage").on("click",function() {
            var $img = $(this);
            $img.attr("src","images/pressed.svg");
            setTimeout(function() {
                $img.attr("src","images/normal.svg");
            },1000);
        });

    });​ 
```

当您在 setTimeout 中执行 $(this) 时，它不会工作，因为 settime out 函数中没有引用。首先缓存元素，然后在 settimeout 中使用它。

# c - 将数据从 C 中的二维动态数组传输到 CUDA 并返回

> ID：12864930
> 
> 赞同：2
> 
> 时间：2012-10-12T18:21:41.460
> 
> 标签：c, arrays, dynamic, cuda, 2d

我的 C 程序中有一个动态声明的二维数组，我想将其内容传输到 CUDA 内核以进行进一步处理。处理后，我想在我的 C 代码中使用 CUDA 处理的数据填充动态声明的 2D 数组。我可以使用静态 2D C 数组来做到这一点，但不能使用动态声明的 C 数组。欢迎任何意见！

我的意思是动态数组的动态数组。我写的测试代码如下。

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <stdio.h>
#include <conio.h>
#include <math.h>
#include <stdlib.h>

const int nItt = 10;
const int nP = 5;

__device__ int d_nItt = 10;
__device__ int d_nP = 5;

__global__ void arr_chk(float *d_x_k, float *d_w_k, int row_num)
{

int index = (blockIdx.x * blockDim.x) + threadIdx.x;
int index1 = (row_num * d_nP) + index; 
if ( (index1 >= row_num * d_nP) && (index1 < ((row_num +1)*d_nP)))              //Modifying only one row data pertaining to one particular iteration
{

        d_x_k[index1] = row_num * d_nP;
        d_w_k[index1] = index;
}

}

float **mat_create2(int r, int c)
{
float **dynamicArray;
dynamicArray = (float **) malloc (sizeof (float)*r);
for(int i=0; i<r; i++)
    {
    dynamicArray[i] = (float *) malloc (sizeof (float)*c);
        for(int j= 0; j<c;j++)
        {
            dynamicArray[i][j] = 0;
        }
    }
return dynamicArray;
}

/* Freeing memory - here only number of rows are passed*/
void cleanup2d(float **mat_arr, int x)
{
int i;
for(i=0; i<x; i++)
{
    free(mat_arr[i]);
}
free(mat_arr);
}

int main()
{

//float w_k[nItt][nP]; //Static array declaration - works!
//float x_k[nItt][nP];
// if I uncomment this dynamic declaration and comment the static one, it does not work.....
float **w_k = mat_create2(nItt,nP); 
float **x_k = mat_create2(nItt,nP);
float *d_w_k, *d_x_k;       // Device variables for w_k and x_k
int nblocks, blocksize, nthreads;
for(int i=0;i<nItt;i++)
{
    for(int j=0;j<nP;j++)
    {
        x_k[i][j] = (nP*i);
        w_k[i][j] = j;
    }
}

for(int i=0;i<nItt;i++)
{
    for(int j=0;j<nP;j++)
    {
        printf("x_k[%d][%d] = %f\t",i,j,x_k[i][j]);
        printf("w_k[%d][%d] = %f\n",i,j,w_k[i][j]);
    }
}
int size1 = nItt * nP * sizeof(float);
printf("\nThe array size in memory bytes is: %d\n",size1);
cudaMalloc( (void**)&d_x_k, size1 );
cudaMalloc( (void**)&d_w_k, size1 );

if((nP*nItt)<32)    
{
    blocksize = nP*nItt;
    nblocks = 1;
}
else
{
    blocksize = 32;     // Defines the number of threads running per block. Taken equal to warp size
    nthreads = blocksize;
    nblocks =  ceil(float(nP*nItt) / nthreads);     // Calculated total number of blocks thus required
}

for(int i = 0; i< nItt; i++)
{
    cudaMemcpy( d_x_k, x_k, size1,cudaMemcpyHostToDevice ); //copy of x_k to device
    cudaMemcpy( d_w_k, w_k, size1,cudaMemcpyHostToDevice ); //copy of w_k to device
    arr_chk<<<nblocks, blocksize>>>(d_x_k,d_w_k,i);
    cudaMemcpy( x_k, d_x_k, size1, cudaMemcpyDeviceToHost );
    cudaMemcpy( w_k, d_w_k, size1, cudaMemcpyDeviceToHost );
}
printf("\nVerification after return from gpu\n");
for(int i = 0; i<nItt; i++)
{
    for(int j=0;j<nP;j++)
    {
        printf("x_k[%d][%d] = %f\t",i,j,x_k[i][j]);
        printf("w_k[%d][%d] = %f\n",i,j,w_k[i][j]);
    }
}
cudaFree( d_x_k );
cudaFree( d_w_k );
cleanup2d(x_k,nItt);
cleanup2d(w_k,nItt);
getch();
return 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T10:52:05.523

> 我的意思是动态数组的动态数组。

嗯，这正是问题所在。动态数组的动态数组由一大堆不相交的内存块组成，数组中的每一行都有一个内存块（从你循环的`malloc`内部可以清楚地看到）。因此，您不能只调用一次^*就将这样的数据结构复制到设备内存中。相反，你必须做`for``mat_create2``cudaMemcpy`

*   还要在 CUDA 上使用动态数组的动态数组。为此，您必须基本上重新创建您的`mat_create2`函数，使用`cudaMalloc`而不是`malloc`，然后分别复制每一行。

*   像现在一样在 CUDA 上使用“紧密”的二维数组（这是一件好事，至少在性能方面！）。但是如果你继续在主机内存上使用 dyn-dyn-arrays，你仍然需要单独复制每一行，比如

    ```
    for(int i=0; i<r; ++i){
      cudaMemcpy(d_x_k + i*c, x_k[i], c*sizeof(float), cudaMemcpyHostToDevice)
    } 
    ```

您可能想知道“为什么它与静态二维数组一起工作”？好吧， C*中的**静态*二维数组是可以一次性复制的正确、紧凑的数组。使用与 dyn-dyn 数组 ( ) 完全相同的语法对它们进行索引有点令人困惑，因为它实际上完全不同。*`arr[x][y]`*

 *但是您也应该考虑在主机内存上使用紧密数组，也许使用面向对象的包装器，例如

```
typedef struct {
  float* data;
  int n_rows, n_cols;
} tight2dFloatArray;

#define INDEX_TIGHT2DARRAY(arr, y, x)\
  (arr).data[(y)*(arr).n_cols + (x)] 
```

这种方法当然可以更安全地实现为 C++ 类。

* * *

^*你也不能只用一个复制它在主内存中`memcpy`：它只复制指针数组，而不是实际数据。*

# wcf - 定期调用服务

> ID：12864931
> 
> 赞同：1
> 
> 时间：2012-10-12T18:21:45.110
> 
> 标签：wcf, iis

我希望在启动另一个服务时进行服务调用。

这是场景。我有一个名为 abc.svc 的 WCF 服务托管在 IIS 上。我希望在托管 abc 服务时调用来自 xyz.svc 的名为“MyMethod”的方法，从那时起，我希望“MyMethod”定期触发。

尝试在 abc 的 Appplcation_start 事件中调用“MyMethod”。但是在尝试为服务 xyz.svc 创建服务客户端时，我得到 Endpoint not found exceptioniopn。有人可以建议这个用例的最佳解决方案吗？

# sql - 期待 SELECT 或 '( ' 在 Sql 中

> ID：12864934
> 
> 赞同：0
> 
> 时间：2012-10-12T18:21:51.067
> 
> 标签：sql, sql-server, sql-server-2008

基本上当我注册时（注册详细信息进入登录表），然后这些数据进入 2 个表：

1.  登录表

2.  登记表（具体）

使用`@Attrib`我检查哪些数据需要转到哪个表。但是在这里我在第一`else`部分附近遇到了一个错误。

错误是：

> '@Attrib' 附近的语法不正确，需要 SELECT 或 ,'('

这是代码：

```
ALTER procedure [dbo].[Registration_SP]
(
    @Email varchar(50),
    @Password varchar(50),
    @Repassword varchar(50),
    @Attrib varchar(50) 
)
AS

BEGIN

    Insert into Login (Email,Password,Repassword,Attrib)
    values(@Email,@Password,@Repassword,@Attrib)

    IF (@Attrib = 'Student')
    BEGIN
        Insert into StudentReg
            (StudentId,FirstName,LastName,Gender,Address1,Address2,Address3,
             LandPhone,MobilePhone,Budget,IsFinancialSupport,CourseName,
             IsJobSeeker,Country,Region,IsSupportActive,RegDate,ImagePath,
             ShortCode)
        Values(@Email,'','','','','','','','','','','','','','','','','','')
    END
    ELSE (@Attrib = 'Financial Supporter')
    BEGIN
        Insert into SupporterReg   
        (SupporterId,SupporterName,University,ContactNo,StudentLocation,RegDate,
         ImagePath,ShortCode)
        Values(@Email,'','','','','','','')
    END 
```

进一步澄清，我附上了下面的图片：

![在此处输入图像描述](../Images/ae80c08dbacae433a96abc4a6a7af8ef.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T18:24:38.913

你后来`ELSE`失踪了：`IF`

IE

```
ELSE (@Attrib = 'Financial Supporter') 
```

应该

```
ELSE IF (@Attrib = 'Financial Supporter') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T18:24:08.873

`ELSE`case没有条件，所以报语法错误。

```
-- Should be no condition here, syntax error.
ELSE (@Attrib = 'Financial Supporter') 
```

我假设你打算这样做`ELSE IF`

```
ELSE
 IF (@Attrib = 'Financial Supporter') 
```

# objective-c - NSDates 列表中的应用内警报

> ID：12864936
> 
> 赞同：0
> 
> 时间：2012-10-12T18:21:52.880
> 
> 标签：objective-c, ios, nsdate, nsnotificationcenter

我将会议日期列表从服务器下拉到我的应用程序。我解析所有这些并将它们保存为 NSDates。

给出一个用例更容易：

1.  用户下拉会议日期
2.  用户导航到应用程序的另一个部分
3.  如果距离各自的会议时间还有 15 分钟，则在他们所在的任何视图中显示警报。

除了通知应用程序时间即将开始的方法外，我已完成上述所有工作。

我猜这是 NSNotificationCenter 的最佳时机。

所以我的问题是，如果我有一系列 NSDates，如何持续监控一个 15 岁以外的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:26:35.817

使用下面的代码来安排通知：只需给出 firedate = (date_saved-15minutes)

```
 UILocalNotification *localNotif = [[UILocalNotification alloc] init];

    if (localNotif == nil)
        return FALSE;

    localNotif.fireDate = fireDate;
    localNotif.repeatInterval = repeatInterval;
    localNotif.timeZone = [NSTimeZone defaultTimeZone];

    localNotif.alertBody = @"Meeting";

    // Set the action button
    localNotif.hasAction = YES;

    localNotif.alertAction = NSLocalizedString(@"Show",nil); 

    localNotif.soundName = UILocalNotificationDefaultSoundName;

    localNotif.applicationIconBadgeNumber = 1;

    /* SCHEDULE NOTIFICATION */
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
```

这样做也在 appdelegate.h 中声明一个属性 localNotification 并拦截通知，然后如下所示：

```
UILocalNotification *localNotification;
@property (nonatomic, retain) UILocalNotification *localNotification;
@synthesize localNotification;

- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

    self.localNotification = notification;
    NSLog(@"NOTIFICATION - DID RECEIVE");
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    if (self.localNotification) 
    {
         // Do whatever you want
    }
} 
```

# perl - 提取使用 R rpart 构建的回归树模型

> ID：12864939
> 
> 赞同：1
> 
> 时间：2012-10-12T18:22:17.020
> 
> 标签：perl, r, regression, rpart

我已经使用`rpart`R 中的包构建了几个回归树模型，我需要将它们迁移到另一种语言，例如 Perl。

predict 函数在 R 中运行良好，但是有没有办法在每个节点上打印出加权公式之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:48:45.747

I believe what you are trying to do can be done using a little hack of the Rattle package/GUI. If you install Rattle then from the command line use the `asRules()` function on your rpart fit object and you will get back a human readable rules set. I have used these rules to quickly convert to SQL or other languages in seconds. I hope this helps.

# javascript - 无法返回值（我相信范围问题）

> ID：12864942
> 
> 赞同：1
> 
> 时间：2012-10-12T18:22:28.190
> 
> 标签：javascript, node.js, mongodb

我的大学课程刚开始学习 mongodb，我们有一个任务要做。到目前为止一切似乎都很顺利，但我遇到了一个问题，在我的 response.write 中返回了一个值。范围问题似乎一直是困扰我的问题。这是代码：

```
var querystring = require("querystring"),
fs = require("fs"),
mongodb = require('mongodb'),
server = new mongodb.Server('localhost',27017, {auto_reconnect: true}),
db = new mongodb.Db('testdb',server);

db.createCollection('testCollection', {safe : true}, function(err, collection){});

function createData(response, postData) {
    var fname = querystring.parse(postData).fname;
    var lname = querystring.parse(postData).lname;
    var phone = querystring.parse(postData).phone;

    var info = {'fname':fname,'lname':lname,'phone':phone};
    var infojson = JSON.stringify(info);
    var infojson = JSON.parse(infojson);

    db.open(function(err, db) {
            if(!err) {
                    db.collection('testCollection', function(err, collection) {
                            collection.insert(infojson, {safe : true}, function(err, result) {
                                    if(err) {
                                            console.log(err);
                                    } else {
                                            console.log(result);
                                            db.close();
                                    }
                            });
                    });
            }
    return result;
    });
response.writeHead(200, {"Content-Type": "text/plain"});
response.write("You have added " + result + " to the database.");
response.end();
} 
```

这是我得到的错误：

```
/home/ubuntu/151_final/requestHandlers.js:36
response.write("You have added " + result + " to the database.");
                                   ^
ReferenceError: result is not defined
at Object.createData [as /createData] (/home/ubuntu/151_final/requestHandlers.js:36:40)
at route (/home/ubuntu/151_final/router.js:4:19)
at IncomingMessage.<anonymous> (/home/ubuntu/151_final/server.js:18:4)
at IncomingMessage.EventEmitter.emit (events.js:85:17)
at IncomingMessage._emitEnd (http.js:366:10)
at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
at Socket.socket.ondata (http.js:1690:22)
at TCP.onread (net.js:402:27) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:23:59.677

我认为你应该这样做

```
 db.open(function(err, db) {
            if(!err) {
                    db.collection('testCollection', function(err, collection) {
                            collection.insert(infojson, {safe : true}, function(err, result) {
                                    if(err) {
                                            console.log(err);
                                    } else {
                                            console.log(result);
                                            db.close();
                                            response.writeHead(200, {"Content-Type": "text/plain"});
                                            response.write("You have added " + result + " to the database.");
                                            response.end();
                                    }
                            });
                    });
            }

    }); 
```

这不是范围问题，只是调用是异步的，结果它没有定义，因为该行

```
response.write("You have added " + result + " to the database."); 
```

立即执行，它不等待其他函数返回

# java - JAVA：在循环中定义的引用

> ID：12864943
> 
> 赞同：7
> 
> 时间：2012-10-12T18:22:43.400
> 
> 标签：java, performance, jvm

我只是好奇。
假设我在 while/for 循环中定义了一个引用。

JVM 是每次迭代都定义这个引用，还是优化为只定义一次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T18:23:21.503

它定义了每次，并仅限于该循环迭代。

一旦循环迭代完成，它就有资格进行 GC。

正如 Louis Wasserman 评论的那样，该变量每次都会重新初始化，但内存空间可能会被重用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T18:29:18.790

每次迭代都会定义引用。一旦代码优化为本机代码，就可以将其移到循环之外，因此不必对性能产生影响。如果您每次都将此引用设置为一个`new`对象，则它可能会在每次迭代时创建一个新对象，除非该对象的创建也已被优化掉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T18:24:49.120

它每次都定义。没有优化（据我所知）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T18:27:27.440

**-****每次循环迭代时定义引用**，但引用的范围仅附加到该迭代。

**-**假设您**在循环外声明了一个引用**，但在循环**内****为其分配了对象**，则引用保持不变，但它在每次迭代中引用该类型的新对象。

# oracle - 将 CLOB 列更新为 NULL

> ID：12864946
> 
> 赞同：1
> 
> 时间：2012-10-12T18:22:58.047
> 
> 标签：oracle

我需要将 oracle clob 列值更新为`null`. 我试图低于但没有奏效。有任何想法吗？

```
update table_name 
   set CONTENT_TEMPLATE=empty_clob() 
 where table_key=12345;

Name                 Null     Type          
-------------------- -------- ------------- 
TEST_KEY            NOT NULL NUMBER(10)    
TEST_ID             NOT NULL VARCHAR2(100) 
TEST_TYPE           NOT NULL VARCHAR2(30)  
TEMPLATE_ID                   VARCHAR2(100) 
ROUTE                         VARCHAR2(100) 
MEDIUM                        VARCHAR2(100) 
BEGIN_EFFECTIVE_DATE NOT NULL DATE          
END_EFFECTIVE_DATE   NOT NULL DATE          
CUSTOMER_ID          NOT NULL VARCHAR2(30)  
VAR_ID               NOT NULL VARCHAR2(30)  
CREATION_DATE        NOT NULL DATE          
LAST_UPDATED_DATE    NOT NULL DATE          
LAST_UPDATED_BY      NOT NULL VARCHAR2(30)  
CONTENT_TEMPLATE              CLOB          
SUBJECT_TEMPLATE              CLOB          
UNIT_TYPE                     VARCHAR2(30)  
OVERLOADED_ALERT_KEY          NUMBER(10)    
ALERT_TYPE_ALIAS              VARCHAR2(100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:31:35.263

```
update table_name 
   set column_name = null 
 where table_key=12345; 
```

`NULL`- 缺乏数据

`empty_clob()`-`CLOB`已初始化且为空，与 . 不同`NULL`。

如果您仍然`ORA-01407`使用此列，则这意味着`NOT NULL`该列存在数据类型的约束`CLOB`。

**更新：**

由于该`CLOB`列未`NOT NULL`将其设置为`CONTENT_TEMPLATE = NULL`应该可以工作。`CONTENT_TEMPLATE = empty_clob()`也可以，但请记住，它与`NULL`.

# nginx - nginx 不提供更新的静态文件

> ID：12864947
> 
> 赞同：10
> 
> 时间：2012-10-12T18:23:03.007
> 
> 标签：nginx

从 apache 切换到 nginx，遇到了一些奇怪的事情。

1）假设我的站点的文档根目录中有一个文件 yo.txt，它包含“foo”。

`curl http://localhost/yo.txt => 'foo'`

2）然后我将文件更改为包含“bar”

`curl http://localhost/yo.txt => 'foo'`（仍然！）

如果我删除 yo.txt，我会得到 404。如果我删除所有文本，当我卷曲 url 时，我会正确地得到一个空文件。

我在修改文件后检查了最后修改的 HTTP 标头，它是正确的，即使文件的内容是陈旧的。

在 apt-get install nginx 之后，我正在使用来自 nginx 的标准配置。

是什么赋予了？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T18:30:51.167

我正在使用流浪者。设置`sendfile`为`off`in`nginx.conf`解决了[此处](https://serverfault.com/questions/269420/disable-caching-when-serving-static-files-with-nginx-for-development)发现的问题，例如“

```
sendfile off; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T23:05:25.470

对我来说，以下工作：

```
 expires modified 10y; 
```

根据[文档](http://nginx.org/en/docs/http/ngx_http_headers_module.html#expires)：

> “过期”字段中的时间计算为当前时间和指令中指定的时间的总和。如果使用修改的参数 (0.7.0, 0.6.32)，则时间计算为文件的修改时间和指令中指定的时间之和。

# php - 使用 PHP 和 SQL Server 2005，我可以从 XML 字段返回数据并转换为字符串吗？

> ID：12864952
> 
> 赞同：0
> 
> 时间：2012-10-12T18:23:24.830
> 
> 标签：php, xml, sql-server-2005

我有一个 SQL Server 2005 表，它在 xml 列中有 XML 片段。要正确使用 XSL 将代码段转换为 XHTML，我需要用其他节点等围绕代码段。我的想法是我需要能够将 XML 数据作为字符串处理，然后我可以对其进行前置和后置处理然后转换为 DOM 对象。

这是正确的方法吗？有没有更好的办法？

这是我需要放置片段（可能相当大）的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<document xmlns="urn:hl7-org:v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:hl7-org:v3 http://www.accessdata.fda.gov/spl/schema/spl.xsd">
    <id />
    <code />
    <effectiveTime  />
    <component>
        <structuredBody>
            << SNIPPET GOES HERE >>
        </structuredBody>
    </component>
</document> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:34:27.750

我发现 Transact SQL 将使用 CAST 处理转换。

要从 xml 字段中获取 xml 数据，可以使用以下命令：

```
SELECT CAST(XmlField as varchar(max)) AS XmlStr 
FROM table1
WHERE (id = 22234) AND (code = '34071-1') 
```

这将数据作为字符串返回，这正是我所需要的。

# python - 在没有 sudo 权限的情况下在 virtualenv 中安装 BeautifulSoup

> ID：12864953
> 
> 赞同：0
> 
> 时间：2012-10-12T18:23:33.237
> 
> 标签：python, virtualenv, pip

当我尝试通过 pip 和 trough 下载的 tar.gz 球在 virtualenv 中安装 BeautifulSoup 和 Yolk 时，我遇到了一个问题：

```
(ola)1x-193-157-193-184:beautifulsoup4-4.1.3 ola$ python setup.py install
running install
running build
running build_py
running install_lib
running install_egg_info
removing '/Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info' (and everything under it)
error removing /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info/dependency_links.txt: Permission denied
error removing /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info/installed-files.txt: Permission denied
error removing /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info/PKG-INFO: Permission denied
error removing /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info/SOURCES.txt: Permission denied
error removing /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info/top_level.txt: Permission denied
error removing /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: Permission denied
Writing /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info
error: /Library/Python/2.7/site-packages/beautifulsoup4-4.1.3-py2.7.egg-info: Is a directory 
```

当我尝试通过 pip 安装时，也会出现同样的问题：

```
(ola)1x-193-157-193-184:beautifulsoup4-4.1.3 ola$ pip install BeautifulSoup4
Downloading/unpacking BeautifulSoup4
  Downloading beautifulsoup4-4.1.3.tar.gz (131Kb): 131Kb downloaded
  Running setup.py egg_info for package BeautifulSoup4

Installing collected packages: BeautifulSoup4
  Running setup.py install for BeautifulSoup4
    error: could not delete '/Library/Python/2.7/site-packages/bs4/__init__.py': Permission denied
    Complete output from command /Users/ola/.virtualenvs/ola/bin/python -c "import setuptools;__file__='/Users/ola/.virtualenvs/ola/build/BeautifulSoup4/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/3z/xsfq9cfx6vb18z0n84xnbdd00000gn/T/pip-JmvSkh-record/install-record.txt --install-headers /Users/ola/.virtualenvs/ola/include/site/python2.7:
    running install

running build
running build_py
creating build
creating build/lib
creating build/lib/bs4
copying bs4/__init__.py -> build/lib/bs4
copying bs4/dammit.py -> build/lib/bs4
copying bs4/element.py -> build/lib/bs4
copying bs4/testing.py -> build/lib/bs4
creating build/lib/bs4/builder
copying bs4/builder/__init__.py -> build/lib/bs4/builder
copying bs4/builder/_html5lib.py -> build/lib/bs4/builder
copying bs4/builder/_htmlparser.py -> build/lib/bs4/builder
copying bs4/builder/_lxml.py -> build/lib/bs4/builder
creating build/lib/bs4/tests
copying bs4/tests/__init__.py -> build/lib/bs4/tests
copying bs4/tests/test_builder_registry.py -> build/lib/bs4/tests
copying bs4/tests/test_docs.py -> build/lib/bs4/tests
copying bs4/tests/test_html5lib.py -> build/lib/bs4/tests
copying bs4/tests/test_htmlparser.py -> build/lib/bs4/tests
copying bs4/tests/test_lxml.py -> build/lib/bs4/tests
copying bs4/tests/test_soup.py -> build/lib/bs4/tests
copying bs4/tests/test_tree.py -> build/lib/bs4/tests
running install_lib
copying build/lib/bs4/__init__.py -> /Library/Python/2.7/site-packages/bs4
error: could not delete '/Library/Python/2.7/site-packages/bs4/__init__.py': Permission denied
----------------------------------------
Command /Users/ola/.virtualenvs/ola/bin/python -c "import setuptools;__file__='/Users/ola/.virtualenvs/ola/build/BeautifulSoup4/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/3z/xsfq9cfx6vb18z0n84xnbdd00000gn/T/pip-JmvSkh-record/install-record.txt --install-headers /Users/ola/.virtualenvs/ola/include/site/python2.7 failed with error code 1 in /Users/ola/.virtualenvs/ola/build/BeautifulSoup4
Storing complete log in /Users/ola/.pip/pip.log 
```

我的 virtualenv 安装有什么问题吗？所有文件（Python 和库）都分开包含的关于 virtualenv 的优点之一不是吗？

- - 更新 - -

我试图制作一个新的 virtualenv，但我得到的只是这个错误消息：

```
Olas-MacBook-Pro:~ ola$ mkvirtualenv olaenv
New python executable in olaenv/bin/python
Installing setuptools.............................
  Complete output from command /Users/ola/.virtualenvs/olaenv/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Users/ola/.venvburr...ols-0.6c11-py2.7.egg:
  error: can't create or remove files in install directory

The following error occurred while trying to add or remove files in the
installation directory:

    [Errno 13] Permission denied: '/Library/Python/2.7/site-packages/test-easy-install-88488.write-test'

The installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

    /Library/Python/2.7/site-packages/

Perhaps your account does not have write access to this directory?  If the
installation directory is a system-owned directory, you may need to sign in
as the administrator or "root" account.  If you do not have administrative
access to this machine, you may wish to choose a different installation
directory, preferably one that is listed in your PYTHONPATH environment
variable.

For information on other options, you may wish to consult the
documentation at:

  http://packages.python.org/distribute/easy_install.html

Please make the appropriate changes for your system and try again.

----------------------------------------
...Installing setuptools...done.
Traceback (most recent call last):
  File "/Users/ola/.venvburrito/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
  File "/Users/ola/.venvburrito/lib/python/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Users/ola/.venvburrito/lib/python/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 1052, in create_environment
    search_dirs=search_dirs, never_download=never_download)
  File "/Users/ola/.venvburrito/lib/python/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 598, in install_setuptools
    search_dirs=search_dirs, never_download=never_download)
  File "/Users/ola/.venvburrito/lib/python/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 570, in _install_req
    cwd=cwd)
  File "/Users/ola/.venvburrito/lib/python/virtualenv-1.7.2-py2.7.egg/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/ola/.virtualenvs/olaenv/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Users/ola/.venvburr...ols-0.6c11-py2.7.egg failed with error code 1
Olas-MacBook-Pro:~ ola$ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:31:27.040

如果它是较旧版本的 virtualenv，则 `--no-site-packages' 直到最近才默认（2011-11-30 的 1.7 版）。在创建 virtualenv 时尝试显式使用该标志。

```
mkvirtualenv olaenv --no-site-packages 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T11:10:56.763

简而言之：您必须使用 sudo 安装 virtualenv

我就是这样做的：

*   sudo pip uninstall virtualenv （为了进行全新安装）
*   sudo pip install virtualenv
*   虚拟环境
*   光盘
*   source bin/activate 此时您可以检查是否使用了正确的 pip 或 python：

*   哪条蟒蛇

*   哪个点

他们应该是 virtualenv 的

此时您可以使用以下命令安装 bs： - pip install beautifulsoup4

# ios - 多个导航控制器后退按钮

> ID：12864965
> 
> 赞同：2
> 
> 时间：2012-10-12T18:24:01.447
> 
> 标签：ios, xcode

我有一个看起来像这样的应用程序；

导航控制器->表格视图控制器->导航控制器2->表格视图控制器2

我面临的问题是我想在 Table View Controller2 上有一个“返回”按钮，它将带我回到第一个导航控制器。除了在 Table View Controller2 的导航栏中放置一个按钮并创建一个返回到第一个导航控制器的模态序列外，我一生都无法弄清楚如何做到这一点。我不认为苹果会喜欢这样。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:44:12.697

试试这个：

```
NavigationController *nav = [[NavigationController alloc]init];
[self.navigationController pushViewController:nav animated:YES];                
[nav release]; 
```

# .net - Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 副本之间的差异

> ID：12864968
> 
> 赞同：5
> 
> 时间：2012-10-12T18:24:15.547
> 
> 标签：.net, unit-testing, mstest

我在 VS2012 中创建了一个控制台应用程序并尝试添加 MS 单元测试 dll。但是有5个。我应该将哪一个用于带有 VS2012 的 .NET 4.0，而其他的又是什么？

```
Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll

Version:  9.0.0.0         File Version:  9.0.30729.1
Version: 10.0.0.0         File Version: 11.0.30319.1
Version: 10.0.0.0         File Version: 11.0.50727.1

Version: 10.1.0.0         File Version: 11.0.40219.1
Version: 10.1.0.0         File Version: 11.0.50727.1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T03:41:15.533

每个版本的 Visual Studio 都附带一个测试运行程序。9、10、11 分别指 Visual Studio 2008、2010 和 2012。

在 Visual Studio 2008 之前，每个版本的 Visual Studio 都针对单个 .net 运行时并具有特定的测试运行器。Visual Studio 2008 通过支持多目标改变了这一点，允许您使用单个 IDE 编译针对不同版本框架的应用程序。当时，一个测试运行器适用于所有 .net 版本，因为 .net 2-3.5 都是基于 CLR 版本 2。

当 Visual Studio 2010 发布时，您可以定位和编译 .net 2 到 4.0，但由于 4.0 基于不同版本的 CLR，Visual Studio 2010 团队仅提供运行在 4.0 下编译的测试的能力。

这显然不适合想要使用 VS 2010 来针对早期版本的运行时并使用相同的运行时编译他们的测试的团队，因此 Visual Studio 2010 SP1 提供了一个可以针对 3.5 的修补测试运行器 - 因此，10.1 .0.0 被引入。（如果你想在 VS 2010 中运行 3.5 测试，你只需要引用 10.1.0.0。）

我只是随便使用了 VS2012，但我的猜测是相同的逻辑适用。

11.0.3xxx = .net 2-3.5 11.0.4xxx = .net 4.0 11.0.5xxx = .net 4.5

我在这方面可能错了，其中一个可能是针对 WinRT 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:49:47.587

如果您正在运行旧版本的 Visual Studio（编辑：或希望您的项目与旧版本的 VS 兼容），则必须使用旧版本，这应该澄清：http: [//juristr.com/blog/2011/04 /麻烦与-vs-qualitytoolsunittestfra/](http://juristr.com/blog/2011/04/trouble-with-vs-qualitytoolsunittestfra/)

# html - GWT 在创建 HTML 小部件时添加“nullnullnullnullnull”

> ID：12864973
> 
> 赞同：0
> 
> 时间：2012-10-12T18:24:25.990
> 
> 标签：html, gwt, html-table

我正在以 html 表格格式返回从 csv 文件生成的列表：

```
<span class="gwt-HTML">
  <div id="productList">
    nullnullnullnullnull
    <table cellspacing="0">
      <tbody>
       <tr>
        <th>Type Name</th>
        <th>Class Name</th>
        <th>Sub Class Name</th>
        <th>Minor Class Name</th>
        <th>Country Origin</th>
        <th>SKU</th> 
```

ETC..

注意到奇怪的 nullnullnullnullnull 出现了吗？将 html 转换为小部件后会发生这种情况：

```
SimplePanel pnl = new SimplePanel();
HTML res = new HTML(result);
pnl.add(res);
RootPanel.get("tableData").add(pnl); 
```

结果变量是 html 字符串：

```
 <div id="productList">
    <table cellspacing="0">
      <tbody>
       <tr>
        <th>Type Name</th>
        <th>Class Name</th>
        <th>Sub Class Name</th>
        <th>Minor Class Name</th>
        <th>Country Origin</th>
        <th>SKU</th>
        ...etc 
```

我已经检查以确保结果字符串不包含空值。有人知道为什么会这样吗？很奇怪...

# c++ - 尽管令牌不完整，但 Boost Spirit 信号解析成功

> ID：12864978
> 
> 赞同：4
> 
> 时间：2012-10-12T18:24:42.740
> 
> 标签：c++, boost, boost-spirit, boost-spirit-lex

我有一个非常简单的路径构造，我试图用 boost spirit.lex 解析它。

我们有以下语法：

```
token := [a-z]+
path := (token : path) | (token) 
```

所以我们在这里只讨论冒号分隔的小写 ASCII 字符串。

我有三个例子“xyz”、“abc:xyz”、“abc:xyz:”。

前两个应该被认为是有效的。第三个结尾有一个冒号，不应该被认为是有效的。不幸的是，我所拥有的解析器认为这三个都是有效的。语法不应允许空标记，但显然精神正在这样做。我错过了什么让第三个被拒绝？

此外，如果您阅读下面的代码，在注释中有另一个版本的解析器要求所有路径都以分号结尾。当我激活这些行时，我可以获得适当的行为（即拒绝“abc:xyz:;”），但这并不是我真正想要的。

有人有想法么？

谢谢。

```
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>

#include <iostream>
#include <string>

using namespace boost::spirit;
using boost::phoenix::val;

template<typename Lexer>
struct PathTokens : boost::spirit::lex::lexer<Lexer>
{
      PathTokens()
      {
         identifier = "[a-z]+";
         separator = ":";

         this->self.add
            (identifier)
            (separator)
            (';')
            ;
      }
      boost::spirit::lex::token_def<std::string> identifier, separator;
};

template <typename Iterator>
struct PathGrammar 
   : boost::spirit::qi::grammar<Iterator> 
{
      template <typename TokenDef>
      PathGrammar(TokenDef const& tok)
         : PathGrammar::base_type(path)
      {
         using boost::spirit::_val;
         path
            = 
            (token >> tok.separator >> path)[std::cerr << _1 << "\n"]
            |
            //(token >> ';')[std::cerr << _1 << "\n"]
            (token)[std::cerr << _1 << "\n"]
             ; 

          token 
             = (tok.identifier) [_val=_1]
          ;

      }
      boost::spirit::qi::rule<Iterator> path;
      boost::spirit::qi::rule<Iterator, std::string()> token;
};

int main()
{
   typedef std::string::iterator BaseIteratorType;
   typedef boost::spirit::lex::lexertl::token<BaseIteratorType, boost::mpl::vector<std::string> > TokenType;
   typedef boost::spirit::lex::lexertl::lexer<TokenType> LexerType;
   typedef PathTokens<LexerType>::iterator_type TokensIterator;
   typedef std::vector<std::string> Tests;

   Tests paths;
   paths.push_back("abc");
   paths.push_back("abc:xyz");
   paths.push_back("abc:xyz:");
   /*
     paths.clear();
     paths.push_back("abc;");
     paths.push_back("abc:xyz;");
     paths.push_back("abc:xyz:;");
   */
   for ( Tests::iterator iter = paths.begin(); iter != paths.end(); ++iter )
   {
      std::string str = *iter;
      std::cerr << "*****" << str << "*****\n";

      PathTokens<LexerType> tokens;
      PathGrammar<TokensIterator> grammar(tokens);

      BaseIteratorType first = str.begin();
      BaseIteratorType last = str.end();

      bool r = boost::spirit::lex::tokenize_and_parse(first, last, tokens, grammar);

      std::cerr << r << " " << (first==last) << "\n";
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T23:02:11.747

除了 llonesmiz 已经说过的内容之外，还有一个`qi::eoi`我有时会使用的技巧：

```
path = (
           (token >> tok.separator >> path) [std::cerr << _1 << "\n"]
         | token                           [std::cerr << _1 << "\n"]
    ) >> eoi; 
```

这使得语法在成功匹配结束时**需要（输入结束）。** `eoi`这导致了预期的结果：

[http://liveworkspace.org/code/23a7adb11889bbb2825097d7c553f71d](http://liveworkspace.org/code/23a7adb11889bbb2825097d7c553f71d)

```
*****abc*****
abc
1 1
*****abc:xyz*****
xyz
abc
1 1
*****abc:xyz:*****
xyz
abc
0 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T19:19:29.820

问题在于你调用的含义`first`和`last`之后`tokenize_and_parse`。`first==last`检查您的字符串是否已完全标记化，您无法推断出任何有关语法的内容。如果你像这样隔离解析，你会得到预期的结果：

```
 PathTokens<LexerType> tokens;
  PathGrammar<TokensIterator> grammar(tokens);

  BaseIteratorType first = str.begin();
  BaseIteratorType last = str.end();

  LexerType::iterator_type lexfirst = tokens.begin(first,last);
  LexerType::iterator_type lexlast = tokens.end();

  bool r = parse(lexfirst, lexlast, grammar);

  std::cerr << r << " " << (lexfirst==lexlast) << "\n"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T01:43:35.763

这就是我最终得到的结果。它使用了来自@sehe 和@llonesmiz 的建议。请注意转换为 std::wstring 以及在语法定义中使用操作，这些在原始帖子中不存在。

```
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/bind.hpp>

#include <iostream>
#include <string>

//
// This example uses boost spirit to parse a simple
// colon-delimited grammar.
//
// The grammar we want to recognize is:
//    identifier := [a-z]+
//    separator = :
//    path= (identifier separator path) | identifier
//
// From the boost spirit perspective this example shows
// a few things I found hard to come by when building my
// first parser.
//    1\. How to flag an incomplete token at the end of input
//       as an error. (use of boost::spirit::eoi)
//    2\. How to bind an action on an instance of an object
//       that is taken as input to the parser.
//    3\. Use of std::wstring.
//    4\. Use of the lexer iterator.
//

// This using directive will cause issues with boost::bind
// when referencing placeholders such as _1.
// using namespace boost::spirit;

//! A class that tokenizes our input.
template<typename Lexer>
struct Tokens : boost::spirit::lex::lexer<Lexer>
{
      Tokens()
      {
         identifier = L"[a-z]+";
         separator = L":";

         this->self.add
            (identifier)
            (separator)
            ;
      }
      boost::spirit::lex::token_def<std::wstring, wchar_t> identifier, separator;
};

//! This class provides a callback that echoes strings to stderr.
struct Echo
{
      void echo(boost::fusion::vector<std::wstring> const& t) const
      {
         using namespace boost::fusion;
         std::wcerr << at_c<0>(t) << "\n";
      }
};

//! The definition of our grammar, as described above.
template <typename Iterator>
struct Grammar : boost::spirit::qi::grammar<Iterator> 
{
      template <typename TokenDef>
      Grammar(TokenDef const& tok, Echo const& e)
         : Grammar::base_type(path)
      {
         using boost::spirit::_val;
         path
            = 
            ((token >> tok.separator >> path)[boost::bind(&Echo::echo, e,::_1)]
             |
             (token)[boost::bind(&Echo::echo, &e, ::_1)]
             ) >> boost::spirit::eoi; // Look for end of input.

          token 
             = (tok.identifier) [_val=boost::spirit::qi::_1]
          ;

      }
      boost::spirit::qi::rule<Iterator> path;
      boost::spirit::qi::rule<Iterator, std::wstring()> token;
};

int main()
{
   // A set of typedefs to make things a little clearer. This stuff is
   // well described in the boost spirit documentation/examples.
   typedef std::wstring::iterator BaseIteratorType;
   typedef boost::spirit::lex::lexertl::token<BaseIteratorType, boost::mpl::vector<std::wstring> > TokenType;
   typedef boost::spirit::lex::lexertl::lexer<TokenType> LexerType;
   typedef Tokens<LexerType>::iterator_type TokensIterator;
   typedef LexerType::iterator_type LexerIterator;

   // Define some paths to parse.
   typedef std::vector<std::wstring> Tests;
   Tests paths;
   paths.push_back(L"abc");
   paths.push_back(L"abc:xyz");
   paths.push_back(L"abc:xyz:");
   paths.push_back(L":");

   // Parse 'em.
   for ( Tests::iterator iter = paths.begin(); iter != paths.end(); ++iter )
   {
      std::wstring str = *iter;
      std::wcerr << L"*****" << str << L"*****\n";

      Echo e;
      Tokens<LexerType> tokens;
      Grammar<TokensIterator> grammar(tokens, e);

      BaseIteratorType first = str.begin();
      BaseIteratorType last = str.end();

      // Have the lexer consume our string.
      LexerIterator lexFirst = tokens.begin(first, last);
      LexerIterator lexLast = tokens.end();

      // Have the parser consume the output of the lexer.
      bool r = boost::spirit::qi::parse(lexFirst, lexLast, grammar);

      // Print the status and whether or note all output of the lexer 
      // was processed.
      std::wcerr << r << L" " << (lexFirst==lexLast) << L"\n";
   }
} 
```

# ruby-on-rails - 如何从 github 解压 gem 并指定分支？

> ID：12864986
> 
> 赞同：2
> 
> 时间：2012-10-12T18:25:23.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, github, gem

在我的 gemfile 中，我使用了一个指向 git 和特定分支的 gem。如何在 vendor/gem 文件夹中解压 gem 并像这样指定分支？

```
gem 'devise-async', :git => 'git://github.com/mhfs/devise-async.git', :branch => 'master' 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T20:24:20.977

`bundle install`在您的 Rails 应用程序中执行后，您可以尝试`bundle open devise-async`在编辑器中打开 gem，然后将其保存？

还有`bundle cache`一个缓存你的应用程序的所有使用的gem `vendor/cache`，但我不知道到底是哪种......

希望这可以帮助！

# objective-c - NSLayoutConstraints 和动态设置视图的宽度/高度

> ID：12864990
> 
> 赞同：33
> 
> 时间：2012-10-12T18:25:46.613
> 
> 标签：objective-c, ios, xcode, nslayoutconstraint

我有一个关于设置我正在应用一些布局约束的视图大小的问题。
如何在不定义框架的情况下定义视图的大小？

我正在尝试创建一个高度固定且原点位于屏幕原点的视图。它填充视图的宽度，因此当设备旋转时，视图会延伸到屏幕的宽度。这就是我到目前为止所得到的......

```
self.containerView = [[HitTestContainerView alloc] init];
[self.containerView setBackgroundColor:[UIColor redColor]];
[self.view addSubview:self.containerView];

NSDictionary *viewsDictionary = @{@"view":self.containerView};
NSArray *verticalConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-50-[view]-250-|" options:0 metrics:nil views:viewsDictionary];
NSArray *horizontalConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[view]|" options:0 metrics:nil views:viewsDictionary];
[self.view addConstraints:verticalConstraints];
[self.view addConstraints:horizontalConstraints]; 
```

问题是我无法在屏幕上显示任何内容，除非我设置了那个`containerView`. 不使用 Interface Builder 的正确方法是什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-06-02T12:30:42.547

我写了一个小工具来帮助你：

[http://autolayoutconstraints.com](http://autolayoutconstraints.com)

## 这是工具自动生成的问题的答案

### Objective-C

```
// align view from the left and right
[self.containerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-10-[view]-10-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(view)]];

// width constraint
[self.containerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[view(==250)]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(view)]];

// height constraint
[self.containerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[view(==50)]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(view)]]; 
```

### 迅速

```
// align view from the left and right
self.containerView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("H:|-10-[view]-10-|", options: NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view": view]));

// width constraint
self.containerView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("H:[view(==250)]", options: NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view": view]));

// height constraint
self.containerView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("V:[view(==50)]", options: NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view": view])); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-26T18:42:25.563

要使用布局约束定义视图的高度和宽度，您，呃，使用布局约束定义视图的高度和宽度。例如，您已经在说：

```
NSArray *verticalConstraints = 
[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-50-[view]-250-|" 
    options:0 metrics:nil views:viewsDictionary]; 
```

因此，您可以将其更改为：

```
NSArray *verticalConstraints = 
[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-(50)-[view(40)]" 
    options:0 metrics:nil views:viewsDictionary]; 
```

现在视图将距其父视图顶部 50 像素，高 40 像素。

或者，您可以使用`constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant:`设置高度约束；当然，`toItem`将为零，因为与另一个视图没有关系。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-22T19:06:20.093

迟到总比没有好...

对于 Storyboard、IB 和 Swift：

只需像任何其他控件一样将您的约束控制拖动到您的 viewController

```
@IBOutlet weak var spaceToTopThatIDecided: NSLayoutConstraint! 
```

然后简单地改变它：

```
spaceToTopThatIDecided.constant = 44 
```

就这样！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-29T08:40:03.477

您不必使用 addConstraints:() 方法

```
- (void)addConstraint:(NSLayoutConstraint *)constraint NS_AVAILABLE_MAC(10_7); 
```

// 此方法已弃用，应避免使用。相反，将 NSLayoutConstraint 的 active 属性设置为 YES。

```
- (void)addConstraints:(NSArray *)constraints NS_AVAILABLE_MAC(10_7); 
```

// 此方法已弃用，应避免使用。而是使用

```
+[NSLayoutConstraint activateConstraints:]. 
```

// 非常需要使用

```
+ (void)activateConstraints:(NSArray *)constraints NS_AVAILABLE(10_10, 8_0); 
```

// 然后设置为

```
NSView *view,*containerView;
view =//superview
containerView=//subview
[view addSubview:containerView]; 
```

// 添加约束

```
[containerView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

// 关于它从 Apple 文档中读取

// 然后添加约束，如

```
[NSLayoutConstraint activateConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-50-[view]-50-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(containerView)]];
[NSLayoutConstraint activateConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[view]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(containerView)]]; 
```

// 而已。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-16T12:09:17.917

**Swift 4：** 除了前导、尾随和顶部和底部空间之外，您还可以管理宽度和高度，只需使用以下 2 个选项

```
 //1 . left and right spacing
    theContentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|-16-[view]-16-|", options:NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view":nibView]))

 //2\. top and bottom spacing
    theContentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|-16-[view]-16-|", options:NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view":nibView])) 
```

或者 **更具体地说，对 W、H、左间距、顶间距有单独的约束，您可以执行以下操作**

```
 //left only spacing
        theContentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|-16-[view]", options:NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view":nibView]))

//top only spacing
        theContentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|-16-[view]", options:NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view":nibView]))

//width
        theContentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:[view(==130)]", options:NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view":nibView]))

//height
        theContentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:[view(==100)]", options:NSLayoutFormatOptions(rawValue: 0), metrics: nil, views: ["view":nibView])) 
```

# jquery - IE 不会响应 CSS 或 jquery

> ID：12864994
> 
> 赞同：2
> 
> 时间：2012-10-12T18:26:10.317
> 
> 标签：jquery, html, internet-explorer, debugging, css

对于一个不是特别狭窄或对更大社区没有好处的问题，我预先道歉。现在解决这个问题是个人理智的问题。

我在一个网站上工作，我创建了一个社交抽屉。基本上，您将鼠标悬停在社交媒体选项卡上，它会稍微向左移动。当您单击它时，会打开一个抽屉，其中包含该 SocMedia 提要。

它在 FF、Chrome 和 Safari 上运行良好。在 IE9 中绝对没有任何反应！当我第一次创建抽屉时，它在 IE 中运行良好，但随着我继续开发该网站，显然我遇到了一些与之冲突的东西。但这不仅仅是一个 JS 冲突，因为即使是 CSS 悬停功能也不起作用，事实上，我正在使用最小的 jQuery 来实现这个效果。CSS 承担了大部分工作。

另外，我意识到 CSS3 过渡在 IE 中不起作用，我不关心 IE 中的平滑移动。

无论如何，这是该网站的链接。过了年龄门后，您会在菜单下方的右上角看到社交抽屉。首先在非 IE 浏览器中尝试，看看它应该如何运行。

[http://pearlvodkatest.com/](http://pearlvodkatest.com/)

的HTML：

```
<div id="social_drawer">
<div id="twitter_drawer" class="drawer_pull"></div>
<div id="tw_drawer" class="drawer"> </div>
<div id="facebook_drawer" class="drawer_pull"></div>
<div id="fb_drawer" class="drawer"></div>
<div id="google_drawer" class="drawer_pull"></div>
<div id="gl_drawer" class="drawer"></div>
</div> 
```

这是我的 jQuery：

```
<script type="text/javascript">
$('#facebook_drawer').click(function() {
$(this).toggleClass('open');
$('.drawer_pull').not(this).toggleClass('hidden');
$('#social_drawer').toggleClass('open');
$('#fb_drawer').toggleClass('open');
});
$('#twitter_drawer').click(function() {
$(this).toggleClass('open')
$('.drawer_pull').not(this).toggleClass('hidden');
$('#social_drawer').toggleClass('open');
$('#tw_drawer').toggleClass('open');
});
$('#google_drawer').click(function() {
$(this).toggleClass('open')
$('.drawer_pull').not(this).toggleClass('hidden');
$('#social_drawer').toggleClass('open');
$('#gl_drawer').toggleClass('open');
});
</script> 
```

这是CSS：

```
#social_drawer {
width: 36px;
height: 450px;
background: url(images/tab_shadow.png) right top no-repeat;
position: absolute;
z-index: 1000;
right: -7px;
/*box-shadow: -10px 0 27px -13px #000000 inset;*/
padding-top: 25px;
transition: all 1s linear 0s;
-moz-transition: all 1s linear 0s;
-webkit-transition: all 1s linear 0s;
-o-transition: all 1s linear 0s;
overflow: hidden;
}
#social_drawer.open {
width: 375px;
box-shadow: none;
transition: all 1s linear 0s;
-moz-transition: all 1s linear 0s;
-webkit-transition: all 1s linear 0s;
-o-transition: all 1s linear 0s;
}
#social_drawer .drawer {
background: #fff;
width: 0px;
height: 400px;
position: absolute;
z-index: 1000;
left: 29px;
right: auto;
box-shadow: 0px 0 21px -5px #000000 inset;
transition: all 1s linear 0s;
-moz-transition: all 1s linear 0s;
-webkit-transition: all 1s linear 0s;
-o-transition: all 1s linear 0s;
opacity: 0;
border: none;
}

#social_drawer #fb_drawer.drawer.open {
border: 3px solid #336699;
}
#social_drawer #tw_drawer.drawer.open {
border: 3px solid #6699cc;
}
#social_drawer #gl_drawer.drawer.open {
border: 3px solid #d94c2c;
}
#social_drawer .drawer.open {
left: auto;
right: 0;
transition: all 1s linear 0s;
-moz-transition: all 1s linear 0s;
-webkit-transition: all 1s linear 0s;
-o-transition: all 1s linear 0s;
display: block;
opacity:1;
width: 295px;
padding: 21px;
}
#social_drawer .drawer_pull {
width: 30px;
height: 31px;
transition: all .3s linear 0s;
-moz-transition: all .3s linear 0s;
-webkit-transition: all .3s linear 0s;
-o-transition: all .3s linear 0s;
cursor: pointer;
padding: 3px 0;
position: absolute;
right: 0;
z-index: 5000;
}
#social_drawer.open .drawer_pull.open {
left: 0;
width: 36px;
transition: all .3s linear 0s;
-moz-transition: all .3s linear 0s;
-webkit-transition: all .3s linear 0s;
-o-transition: all .3s linear 0s;
}
#social_drawer.open .drawer_pull.hidden {
float: right;
width: 30px;
margin-right: -30px;
transition: all .3s linear 0s;
-moz-transition: all .3s linear 0s;
-webkit-transition: all .3s linear 0s;
-o-transition: all .3s linear 0s;
opacity: 0;
}

#social_drawer .drawer_pull:hover {
width: 36px;
}
#facebook_drawer {
background:url(images/social/facebook_drawer.png) left no-repeat;
top: 60px;
}
#twitter_drawer {
background:url(images/social/twitter_drawer.png) left no-repeat;

}
#google_drawer {
background:url(images/social/google_drawer.png) left no-repeat;
top: 95px;
} 
```

最初我认为这是一个 z-index 问题，但我尝试了许多 z-index 组合，甚至将社交抽屉移入和移出不同的 div 都没有效果。我敢肯定，这可能是我忽略的小事。

请比我聪明的人帮忙！我的理智受到威胁。提前致谢。如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:47:08.753

`z-index:-100;`从 BODY 标记中删除。IE 通常不喜欢负 z-index。

当我在开发人员工具中执行此操作时，您的社交图标的行为符合设计。我把它改成`z-index:0;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:45:49.457

我认为这是由于在您网站的 custom-js.js 中的第 49 行中对 .Sortable() 的调用引起的。它会在所有浏览器中导致错误，但其他浏览器会报告错误，然后在 IE 卡在那里时继续执行您的 javascript。如果你想使用 .sortable 那么它属于 jquery UI，它不包含在引用的脚本中。

# php - JQuery Mobile，一个页面上的多个表单，通过 JQuery Post 按表单 id 提交唯一表单。

> ID：12864996
> 
> 赞同：0
> 
> 时间：2012-10-12T18:26:28.607
> 
> 标签：php, jquery, html, jquery-mobile

我尝试使用 unique.submit 函数为页面上的所有表单提供相同的表单 ID 或单个表单 ID。两者似乎都不起作用，总是只有第一个表格可以正常工作，其余的都会把我踢回主页。看我的代码。代码在只有一种表单的页面上效果很好，但是当我有多个表单时，它会导致问题。

```
$("#sQuote").submit(function() {
                //Send the serialized data to mailer.php.
                $.post("mailerS.php", $("#sQuote").serialize(),
                    //Take our repsonse, and replace whatever is in the "formResponse"
                    //div with it.

                    function(data) {
                    $("#sQuote").html( $("#formResponse").html() );
                    }
                );
                return false;
            });

        }); 
```

我尝试使用所有表单 id's = sQuote 并将它们分别命名为 sQuote1 等...并为该唯一 ID 添加了另一个 .submit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:45:24.893

值得一提的是，在每个页面上，所有使用的 id 属性都必须是唯一的。拥有多个具有相同值的 id 属性将导致各种失败。

使用 W3 验证器验证您的文档并修复错误作为开始。重复的 id 将在那里报告为错误。

# java - JTable 连续调用自定义单元格渲染器方法...

> ID：12864998
> 
> 赞同：5
> 
> 时间：2012-10-12T18:26:38.417
> 
> 标签：java, performance, swing, jtable, java-web-start

可编译源可以在以下位置找到：[http ://www.splashcd.com/jtable.tar](http://www.splashcd.com/jtable.tar)

我是该语言的新手，所以我不确定这是否是可接受的行为。

我创建了一个 JTable 来为收到的每条消息显示一行（大约每 20 秒接收一条）。其中一个表格列可以包含大量文本，因此我创建了一个自定义单元格渲染器，它自动换行并相应地设置行高。

一切都按预期工作，除了一旦表格显示第一行，它会每秒调用单元格渲染器大约十次......直到用户关闭表格。

一旦我在那里获得大约 20 行，表格就会变得相当缓慢，需要 2-8 秒来调整列的大小、向上或向下滑动，或者使用选定的背景颜色渲染选定的行。

我在渲染器中插入了一个打印语句，所以我可以看到 getTableCellRendererComponent 方法被调用了多少次。

我禁用了工具提示，并禁用了所有单元格编辑。我确实有一个侦听器，当添加新行或调整表大小时，它会将视图滚动到最后一行。

当我只是查看屏幕（不触摸鼠标或键盘）时，是否应该每秒调用几次 getTableCellRendererComponent 方法？

TIA

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T22:16:10.337

*   啊啊啊

*   你需要`doLayout()`，

*   下一级:-) ，然后您也可以轻松设置`Maximum visible row`s`JTextComponents`

![在此处输入图像描述](../Images/31e56efe5ac3afa0474f7ef7e8540afa.png)

布局（）

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.text.*;
//http://tips4java.wordpress.com/2008/10/26/text-utilities/
public class AutoWrapTest {

    public JComponent makeUI() {
        String[] columnNames = {" Text Area Cell Renderer "};
        Object[][] data = {
            {"123456789012345678901234567890"},
            {"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddx"},
            {"----------------------------------------------0"},
            {">>>>>>>>>>>>>dddddddddddddddddddddddddddddddddddddddddddddddddd"
                + "dddddddxdddddddddddddddddddddddddddddddddddddddddddddd"
                + "dddddddddddx>>>>>>>>>>>>>>>>>>>>>>>>>|"},
            {">>>>>>>>>>>>ddddddddddddddddddddddddddddddddddddddddddddddddddd"
                + "ddddddx>>>>>>>>>>>>>>>>>>>>>>>>>>|"},
            {"a|"},
            {">>>>>>>>bbbb>>>>>>>>>>>>>>>>>>>|"},
            {">>>>>>>>>>>>>>>>>>|"},
            {">>>>>>>>>>>>>dddddddddddddddddddddddddddddddddddddddddddddddddd"
                + "dddddddxdddddddddddddd123456789012345678901234567890dddddd"
                + "dddddddddddddddddddddddddddddddddddddx>>>>>>>>>>>>>>>>>>>>"
                + ">>>>>|"},
            {">>>>>>>>>>>>>dddddddddddddd123456789012345678901234567890dddddd"
                + "dddddddddddddddddddddddddddddddddddddxdddddddddddddd123456"
                + "789012345678901234567890dddddddddddddddddddddddddddddddddd"
                + "ddddd123456789012345678901234567890ddddx>>>>>>>>>>>>>>>>>>"
                + ">>>>>>>|"},};
        TableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            }
        };
        JTable table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public void doLayout() {
                TableColumn col = getColumnModel().getColumn(0);
                for (int row = 0; row < getRowCount(); row++) {
                    Component c = prepareRenderer(col.getCellRenderer(), row, 0);
                    if (c instanceof JTextArea) {
                        JTextArea a = (JTextArea) c;
                        int h = getPreferredHeight(a) + getIntercellSpacing().height;
                        if (getRowHeight(row) != h) {
                            setRowHeight(row, h);
                        }
                    }
                }
                super.doLayout();
            }

            private int getPreferredHeight(JTextComponent c) {
                Insets insets = c.getInsets();
                View view = c.getUI().getRootView(c).getView(0);
                int preferredHeight = (int) view.getPreferredSpan(View.Y_AXIS);
                return preferredHeight + insets.top + insets.bottom;
            }
        };
        table.setEnabled(false);
        table.setShowGrid(false);
        table.setTableHeader(null);
        table.getColumnModel().getColumn(0).setCellRenderer(new TextAreaCellRenderer());
        //table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane sp = new JScrollPane(table);
        sp.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        sp.setPreferredSize(new Dimension(250, 533));
        JPanel p = new JPanel(new BorderLayout());
        p.add(sp);
        return p;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        f.getContentPane().add(new AutoWrapTest().makeUI());
        f.setLocation(100, 100);
        f.pack();
        f.setVisible(true);
    }
}

class TextAreaCellRenderer extends JTextArea implements TableCellRenderer {

    private static final long serialVersionUID = 1L;
    private final Color evenColor = new Color(230, 240, 255);

    public TextAreaCellRenderer() {
        super();
        setLineWrap(true);
        setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        if (isSelected) {
            setForeground(table.getSelectionForeground());
            setBackground(table.getSelectionBackground());
        } else {
            setForeground(table.getForeground());
            setBackground(table.getBackground());
            setBackground((row % 2 == 0) ? evenColor : getBackground());
        }
        setFont(table.getFont());
        setText((value == null) ? "" : value.toString());
        return this;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T18:51:15.533

要从 中获得最大性能`TableCellRenderer`，请确保您没有在每次`getTableCellRenderer`调用时都创建组件的新实例。制作一次组件并将它们保存为类的字段。

此外，您需要确保您使用的每个组件都覆盖了以下方法以不执行任何操作：

*   证实
*   无效
*   重新验证
*   重绘
*   firePropertyChange

（你可能想要硬编码`isOpaque`）。

有关更多信息，请参阅：[http ://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T22:06:48.733

问题似乎源于在自定义单元格渲染器中使用 JTable 的**setRowHeight()**，因为它调用自定义单元格渲染器，将其放入无限循环中。

我必须添加检查以查看当前行高是否与计算的单词换行行高匹配。如果是这样，我没有尝试再次 setRowHeight()。

更正的代码：

```
import java.awt.Component;

import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.table.TableCellRenderer;

//custom cell renderer for word wrapping, but if you use, you have to
//implement zebra striping functionality which the default renderer has
public class LineWrapCellRenderer extends JTextArea implements TableCellRenderer
{
    private int numOfTimesCalled;
    @Override
    public Component getTableCellRendererComponent(
            JTable table,
            Object value,
            boolean isSelected,
            boolean hasFocus,
            int row,
            int column)
    {
        System.out.println("Line Wrap Cell Renderer Called: " + numOfTimesCalled++);
        System.out.println("row:"+ row + ", col:" + column);
//set up the row size based on the number of newlines in the text in the cell
        int fontHeight = this.getFontMetrics(this.getFont()).getHeight();
        int numWraps = value.toString().split("\r\n|\r|\n").length;
        int rowHeight = fontHeight * numWraps;
//if the calculated rowHeight is the same as the row height of row,
// then don't call setRowHeight again, as doing so will throw us into
// an infinite loop
        if(rowHeight != table.getRowHeight(row))
        {
            table.setRowHeight(row, rowHeight);

//configure word wrapping
            setWrapStyleWord(true);
            setLineWrap(true);
//use the table's font
            setFont(table.getFont());
        }
//zebra striping, because whatever cell uses this renderer loses the
//default cell renderer zebra striping
        if(isSelected)
        {
            setBackground(table.getSelectionBackground());
        }
        else
        {
            if(row%2 == 1)
            {
                setBackground(UIManager.getColor("Table.alternateRowColor"));
            }
            else
            {
                setBackground(table.getBackground());
            }
        }
        this.setText(value.toString());
        return this;
    }
} 
```

# c# - 发送和接收 UDP 数据包

> ID：12864999
> 
> 赞同：5
> 
> 时间：2012-10-12T18:26:45.203
> 
> 标签：c#, udp, message, broadcast, packet

以下代码在端口 15000 上发送数据包：

```
int port = 15000;
UdpClient udp = new UdpClient();
//udp.EnableBroadcast = true;  //This was suggested in a now deleted answer
IPEndPoint groupEP = new IPEndPoint(IPAddress.Broadcast, port);
string str4 = "I want to receive this!";
byte[] sendBytes4 = Encoding.ASCII.GetBytes(str4);
udp.Send(sendBytes4, sendBytes4.Length, groupEP);
udp.Close(); 
```

但是，如果我不能在另一台计算机上接收它，那就没用了。我所需要的只是向局域网上的另一台计算机发送一个命令，让它接收它并做一些事情。

如果不使用 Pcap 库，有什么办法可以做到这一点？我的程序与之通信的计算机是 Windows XP 32 位，发送计算机是 Windows 7 64 位，如果有区别的话。我研究了各种`net send`命令，但我无法弄清楚。

我还可以通过在其上物理键入“ipconfig”来访问计算机（XP 计算机）的本地 IP。

**编辑：**这是我正在使用的接收功能，从某处复制：

```
public void ReceiveBroadcast(int port)
{
    Debug.WriteLine("Trying to receive...");
    UdpClient client = null;
    try
    {
        client = new UdpClient(port);
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.Message);
    }

    IPEndPoint server = new IPEndPoint(IPAddress.Broadcast, port);

    byte[] packet = client.Receive(ref server);
    Debug.WriteLine(Encoding.ASCII.GetString(packet));
} 
```

我在打电话`ReceiveBroadcast(15000)`，但根本没有输出。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T20:57:24.697

这是`simple`发送/接收 UDP 数据包的服务器和客户端的版本

**服务器**

```
IPEndPoint ServerEndPoint= new IPEndPoint(IPAddress.Any,9050);
Socket WinSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
WinSocket.Bind(ServerEndPoint);

Console.Write("Waiting for client");
IPEndPoint sender = new IPEndPoint(IPAddress.Any, 0)
EndPoint Remote = (EndPoint)(sender);
int recv = WinSocket.ReceiveFrom(data, ref Remote);
Console.WriteLine("Message received from {0}:", Remote.ToString());
Console.WriteLine(Encoding.ASCII.GetString(data, 0, recv)); 
```

**客户**

```
IPEndPoint RemoteEndPoint= new IPEndPoint(
IPAddress.Parse("ServerHostName"), 9050);
Socket server = new Socket(AddressFamily.InterNetwork,
                           SocketType.Dgram, ProtocolType.Udp);
string welcome = "Hello, are you there?";
data = Encoding.ASCII.GetBytes(welcome);
server.SendTo(data, data.Length, SocketFlags.None, RemoteEndPoint); 
```