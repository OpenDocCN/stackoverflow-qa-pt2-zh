# StackOverflow 问答 12941000-12941999

# php - mongodb php为博客文章创建计数器

> ID：12941000
> 
> 赞同：0
> 
> 时间：2012-10-17T18:35:45.403
> 
> 标签：php, mongodb

这应该是一般问题，但我是 mongodb 和 php 的新手，所以请多多包涵:-)。

我正在创建 blogpost 站点，并打算为每个博客提供唯一的 blogId，并且用户可以访问[http://www.sitename.com/blogID](http://www.sitename.com/blogID)。

我将计数器（作为整数）存储在 mongodb 中，并在有人发布他/她的博客时将其递增：

```
$collection = $collection = new MongoCollection($db, 'blogCount');;     
$object = $collection->findOne();
$count = $object['count'];
$id = $object['_id'];
$collection->update(array('_id'=>$id),array('$inc' => array("count" => 1)));
$object = $collection->findOne();
$count = $object['count']; 
```

到目前为止它工作得很好，但是如果多个用户同时尝试发布博客，它可能会为多个用户提供相同的 $count。

我怎样才能消除这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:04:35.130

您的问题是您想要创建一个唯一的 ID 并确保它不会被重用，即使存在对数据库的并发访问。

在 MongoDB 中，您可以使用 findAndModify() 命令执行此操作。有关如何使用 MongoDB 执行此操作的方法，请参见此处：

*   [http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)

有关 findAndModify() 的更多信息，请参见此处：

*   [http://docs.mongodb.org/manual/reference/command/findAndModify/](http://docs.mongodb.org/manual/reference/command/findAndModify/)
*   [http://docs.mongodb.org/manual/reference/method/db.collection.findAndModify/](http://docs.mongodb.org/manual/reference/method/db.collection.findAndModify/)
*   [https://stackoverflow.com/a/9822181/1408889](https://stackoverflow.com/a/9822181/1408889)

# php - 数据库中的与号

> ID：12941001
> 
> 赞同：0
> 
> 时间：2012-10-17T18:35:45.717
> 
> 标签：php, xml, html-entities, ampersand, addslashes

我正在尝试编写一个 php 函数，该函数进入我的数据库并提取 URL 列表并将它们排列成 xml 结构并创建一个 xml 文件。

问题是，其中一些 url 将包含一个 HTML 编码的 & 符号。所以，数据库很好，但是目前，当我的函数尝试获取这些 URL 时，脚本将在 & 符号处停止并且不会完成。

来自数据库的一个示例链接：

```
http://www.mysite.com/myfile.php?select=on&amp;league_id=8&amp;sport=15 
```

```
function buildXML($con) {
//build xml file
$sql = "SELECT * FROM url_links";
$res = mysql_query($sql,$con);

$gameArray = array ();

while ($row = mysql_fetch_array($res))
    {
    array_push($row['form_link']);
    }

$xml = '<?xml version="1.0" encoding="utf-8"?><channel>';

foreach ($gameArray as $link)
    {   
        $xml .= "<item><link>".$link."</link></item>";  
    }

$xml .= '</channel>';   
file_put_contents('../xml/full_rankings.xml',$xml);
}

mysql_close($con);
session_write_close(); 
```

如果我需要更改数据库中的链接，可以这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:40:14.250

您可以使用[`html_entity_decode()`](http://php.net/html_entity_decode)PHP`$link`转换`&amp;`回`&`.

在您的 XML 中，您还可以包装链接`<![CDATA[]]>`以允许它包含字符。

```
$xml .= "<item><link><![CDATA[" . html_entity_decode($link) . "]]></link></item>"; 
```

**更新**
刚刚注意到你实际上没有把任何东西放进去`$gameArray`：

```
array_push($row['form_link']); 
```

尝试：

```
$gameArray[] = $row['form_link']; 
```

* @Musa 似乎首先注意到了它，以获得应有的信誉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:42:03.797

看这条线

```
array_push($row['form_link']); 
```

你从来没有在`$gameArray`数组中放任何东西，它应该是

```
array_push($gameArray, $row['form_link']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:39:11.193

您需要使用[htmlspecialchars_decode](http://php.net/manual/en/function.htmlspecialchars-decode.php)。它将解码传递给它的字符串中的任何编码特殊字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:41:17.823

这很可能是您正在寻找的内容：

[http://www.php.net/manual/en/function.mysql-real-escape-string.php](http://www.php.net/manual/en/function.mysql-real-escape-string.php)

阅读文档，页面底部有示例...

oracleSQL 和 MySQL 中的“&”在查询中用作逻辑运算符，这就是它抛出错误的原因。

您可能还想解码 HTML...

# php - jquery highlight() 打破动态表

> ID：12941004
> 
> 赞同：0
> 
> 时间：2012-10-17T18:35:59.343
> 
> 标签：php, jquery, mysql, ajax, jquery-plugins

我正在处理的突出显示功能有一点问题。我基本上从数据库中加载以某种方式匹配当前表单数据的记录。然后，当有人填写表格时，如果他们描述的是我的系统中已经存在的问题，它将突出显示他们的描述与现有记录有共同之处的词。我的问题是桌子坏了。它会在一定程度上起作用，但有时它会将 PHP 循环部分从表格的其余部分中分离出来，然后它就没有格式，高亮功能也不起作用。更具体地说，一旦损坏，表格正文中的 td 标记就不会遵循标题行的格式。导致不良影响的条件：

1.  浏览文本区域
2.  如果必须一次删除或应用太多类（通过删除所有、添加许多单词或删除或搜索出现多次的单个字符）

主页上的html && 脚本来触发突出显示

```
<textarea name="description" id="description"></textarea>
<script>
 var delay = (function(){
 var timer = 0;
 return function(callback, ms){
 clearTimeout (timer);
 timer = setTimeout(callback, ms);
 };
 })();
 $(function(){
    $("#description").keydown(function(){
    delay((function(){
    $("#displayer *").removeClass('highlight');
    var1 = $('textarea#description').val().split(' ');
    for (var i=0;i<var1.length;i++){
    $("#displayer *").highlight(var1[i], "highlight")};
    }),1000);
    });
    });
 </script> 
```

基于 ajax 调用构建搜索表的外部 php 是这样的：

```
echo '<TABLE BORDER="0" CELLSPACING="5" CELLPADDING="5" id="displayer"><FONT     FACE="ARIAL">';

   echo ' <tr> '; 
echo '   <td width="20" ALIGN="LEFT" height="1">ID</td>'; 
echo '   <td width="89" ALIGN="LEFT" height="1">Date</td> '; 
echo '   <td width="200" ALIGN="LEFT" height="1" >Description</td>'; 
echo '   <td width="89" ALIGN="LEFT" height="1" >Solution</td>'; 
echo '   <td width="20" ALIGN="LEFT" height="1" >User:</td>'; 
echo '   <td ALIGN="LEFT" height="1" >Key?:</td>';
echo '   <td ALIGN="LEFT" height="1" >Part:</td>';
echo '   <td ALIGN="LEFT" height="1" >Classified As:</td>';
echo ' </tr>   '; 
 for ($i=1; $i <= $num_results; $i++)
    {
   $row = mysql_fetch_array($result1); 

     echo '<TR BGCOLOR="#EFEFEF">';
     echo '<TD width="20">';
     echo  stripslashes($row['0']) ;
     echo '</TD>';
     echo '<TD width="89" >';
     echo  $row['1'] ;
     echo '</TD>';
     echo '<TD width="200">';
     echo  stripslashes($row['6']) ;
     echo '</TD>';
     echo '<TD width="89">';
     echo  stripslashes($row['11']) ;
     echo '</TD>';
     echo '<TD  width="20">';
     echo  $row['5'] ;
     echo '</TD>';
      echo '<TD>';
      if ($row['8'] == 1)
     {echo  'Yes' ;}
     else 
     {echo 'No' ;}

     echo '</TD>';
     echo '<td>'.$row['10'].'</td>';
     echo '<td>'.$row['9'].'</td>';

     echo '</TR>';

    }
         echo '</TABLE>'; 
```

外部高亮插件：

```
jQuery.fn.highlight = function (str, className) {
    var regex = new RegExp(str, "gi");
    return this.each(function () {
        $(this).contents().filter(function() {
            return this.nodeType == 3 && regex.test(this.nodeValue);
        }).replaceWith(function() {
            return (this.nodeValue || "").replace(regex, function(match) {
                return "<span class=\"" + className + "\">" + match + "</span>";
            });
        });
    });
}; 
```

我想我应该添加一个带有某种转义的空测试，以解决第一个条件，但是对于第二个，我不确定发生了什么。任何建议都绝对值得赞赏。抱歉，这篇文章内容庞大且令人费解，但我希望每个人都能获得我能提供的所有信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:30:01.600

```
$(function(){
    $("#description").keydown(function(){
        delay((function(){
        var divClone = $("#disp_hidden .serial_display").clone();
        $("#displayer .serial_display").replaceWith(divClone);
                if ($.trim($('textarea#description').val()) != ''){
                var1 = $('textarea#description').val().trim().split(' ');
            for (var i=0;i<var1.length;i++){
            $("#displayer *").highlight(var1[i], "highlight")};
            };
        }),1000);
        });
        }); 
```

隐藏表克隆，在新编辑处替换，已修复。

# javascript - nitro 之前的 javascript 引擎（在 Mobile Safari 中）

> ID：12941005
> 
> 赞同：0
> 
> 时间：2012-10-17T18:36:00.537
> 
> 标签：javascript, ios, uiwebview

许多文章都在讨论 iOS 上的“新”js 引擎 nitro。

为了对较旧的 iOS 设备进行开发和舒适的测试，我想在使用相同 js 解释器的 windows 或 ubuntu 上安装过时的浏览器？

js解释器或js引擎差异如此之大，即使是解析脚本也是如此。

要找到正确的 WebKit 端口，我必须知道“旧”js 引擎的名称。在哪里可以找到它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:51:05.107

要使用不同的 JavaScript 引擎和浏览器进行测试，我建议使用天才[Browserstack](http://www.browserstack.com/)。它为 iPhone 或 iPad 提供 iOS 3.2 到 6.0 的模拟器。使用适用于您的应用程序的全面单元测试套件，应该很容易找到引擎特定的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:52:14.610

在 pastebin 示例的情况下，存在语法错误，因为 class 是保留字并且不能写入（使用严格的 js 设置，如旧 ios webkit 上）。改用 .className ！

# php - RollingCurl.php 零字节响应

> ID：12941012
> 
> 赞同：1
> 
> 时间：2012-10-17T18:36:25.343
> 
> 标签：php, curl, ubuntu-12.04

任何人都知道有关解决 PHP Curl 问题的任何信息吗？我一直在我的 OSX 笔记本电脑上成功使用 RollingCurl，但是当我上传到我的 Ubuntu 服务器时，相同的代码无法产生结果。

所以服务器端显然有问题，错误日志是干净的。我不知道要检查什么...有什么帮助吗？任何人！？

非常感谢你，斯图

```
![http://rolling-curl.googlecode.com/svn/trunk/

Ubuntu 12.04 result 
Array ( \[url\] => \[content_type\] => \[http_code\] => 0 \[header_size\] => 0 \[request_size\] => 0 \[filetime\] => 0 \[ssl_verify_result\] => 0 \[redirect_count\] => 0 \[total_time\] => 0 \[namelookup_time\] => 0 \[connect_time\] => 0 \[pretransfer_time\] => 0 \[size_upload\] => 0 \[size_download\] => 0 \[speed_download\] => 0 \[speed_upload\] => 0 \[download_content_length\] => -1 \[upload_content_length\] => -1 \[starttransfer_time\] => 0 \[redirect_time\] => 0 \[certinfo\] => Array ( ) \[redirect_url\] => )

Local OSX Leoard result
Array ( \[url\] => http://www.google.co.uk/ \[content_type\] => text/html; charset=ISO-8859-1 \[http_code\] => 200 \[header_size\] => 1535 \[request_size\] => 108 \[filetime\] => -1 \[ssl_verify_result\] => 0 \[redirect_count\] => 1 \[total_time\] => 0.597785 \[namelookup_time\] => 0.033881 \[connect_time\] => 0.070866 \[pretransfer_time\] => 0.070939 \[size_upload\] => 0 \[size_download\] => 43439 \[speed_download\] => 72666 \[speed_upload\] => 0 \[download_content_length\] => 221 \[upload_content_length\] => 0 \[starttransfer_time\] => 0.171418 \[redirect_time\] => 0.147887 )][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:48:55.277

```
if (ini_get('safe_mode') == 'Off' || !ini_get('safe_mode')) {
 $options[CURLOPT_FOLLOWLOCATION] = 1;
 $options[CURLOPT_MAXREDIRS] = 5;
} 
```

这就是问题所在...我将其注释掉以进行测试，然后砰....开始行动。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:53:24.453

检查 ubuntu 服务器中的 php.ini 配置文件。在这篇文章中，您可以看到许多人（现在，一些软件包）保护他们的服务器免受攻击的许多良好实践：http: [//blog.up-link.ro/php-security-tips-securing-php -by-hardening-php-configuration/](http://blog.up-link.ro/php-security-tips-securing-php-by-hardening-php-configuration/)

更新。

为了更清楚：

1.  以管理员用户身份登录到您的 ubuntu 服务器。
2.  切换到配置文件的目录

    ```
     cd /etc/PHP5 
    ```

3.  `allow_url_fopen = Off`使用以下命令在文件中搜索值：

    ```
    sudo nano php.ini 
    ```

4.  将值更改为`On`并按`CTRL+X`“是”以保存更改并退出 nano 编辑器

# ajax - $ajax async false 的问题

> ID：12941019
> 
> 赞同：1
> 
> 时间：2012-10-17T18:36:52.770
> 
> 标签：ajax, bing-maps

我有这个代码：

```
 for(var i in dataJson){    
            direcc=dataJson[i].dir  ; 
            id=dataJson[i].id   ;

    $.ajax({
            url: 'http://dev.virtualearth.net/REST/v1/Locations?query=' + direcc + '&key=mykey&jsonp=?',
           dataType: 'json',
       async: false,
           success: function(result) {

             loc = result.resourceSets[0].resources[0].point.coordinates;
             direcc=result.resourceSets[0].resources[0].address.formattedAddress;
             lat=loc[0];
             long=loc[1];

          $("#bing").append('latitudeBing:' + lat + '<p>longitudeBing:' + long+'$$$$$$'+id);
 }
   }); 
```

问题是我想写纬度+经度+ id，但是当它写时，id是所有这些的最后一个（id从1到200，所有坐标出现200）。

原来的函数是 $getjson，我改变了它以使 $ajax 调用 async:false，但这并不能解决我的问题。

有人可以帮我吗？非常感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:43:14.363

*现在用正确*的答案编辑。

[小提琴来展示这个概念](http://jsfiddle.net/gromer/2Q3xD/1/)

```
for(var i in dataJson){    
    var direcc = dataJson[i].dir; 
    var id = dataJson[i].id;
    makeAjaxCall(direcc, id);
}

function makeAjaxCall(direcc, id) {
    $.ajax({
        url: 'http://dev.virtualearth.net/REST/v1/Locations?query=' + direcc + '&key=mykey&jsonp=?',
        dataType: 'json',
        async: false,
        success: function(result) {
            loc = result.resourceSets[0].resources[0].point.coordinates;
            direcc=result.resourceSets[0].resources[0].address.formattedAddress;
            lat=loc[0];
            long=loc[1];
            $("#bing").append('latitudeBing:' + lat + '<p>longitudeBing:' + long+'$$$$$$'+id);
        }
    });
} 
```

这将“当前”置于函数`direcc`的`id`范围内`makeAjaxCall`。我添加的小提琴只是展示了如何。

此外，不需要保留`async: false,`周围，所以如果你愿意，可以随意删除它。

# javascript - 提交时将 HTML 复制到 textarea

> ID：12941020
> 
> 赞同：0
> 
> 时间：2012-10-17T18:36:54.127
> 
> 标签：javascript, jquery, html

我有一个表单，其中包含多个输入块，默认值由 PHP 分配，我想将其中一个块的 HTML 标记传递给 PHP 脚本。这是我的表单的修改片段以举例说明标记：

```
<form action="/page/do_work/job_number" id="work_form">
    <textarea style="display: none;" name="markup" id="markup"></textarea>
    <div id="block_1">
        <table>
            <tr>
                <td><input type="text" value="123" /></td>
                <td><input type="text" value="123" /></td>
            </tr>
        </table>
    </div>
    <div id="block_2">
        <table>
            <tr>
                <td><input type="text" value="abc" /></td>
                <td><input type="text" value="abc" /></td>
            </tr>
        </table>
    </div>
</form> 
```

我正在用一些 jQuery 监听表单的提交，这样我就可以将表格的 HTML 复制到 textarea 中。：

```
$('#work_form').submit(function(){
    // Snatch the markup
    var markup = $('#block_1', '#work_form').html(); 
    // Place it into the textarea
    $('#markup', '#work_form').html( markup );
    // Move on
    return true;
}); 
```

**问题**是修改后的值没有被复制到文本区域中。例如，如果我将值从“abc”更改为“xyz”，则传递给 textarea 的标记仍然显示“abc”。任何帮助将不胜感激。

**编辑：**使用`.html()`或`.val()`同时将标记添加到textarea，但我想知道为什么输入值的变化没有反映在插入到textarea的标记中。进一步检查后，更改输入字段的值，然后在 Firebug 中检查它们显示保留默认值。我需要以某种方式更新 DOM 吗？

**编辑 2：**正在`markup`设置变量，但我对输入字段所做的更改并未反映在插入到 textarea 中的标记中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:39:24.437

尝试，

```
$('#markup', '#work_form').val( markup ); 
```

还要输入一个 console.log(markup) 以确保标记变量设置正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:40:34.487

那么对于文本区域，您需要更改它**的“值”**而不是它**的“innerhtml”**，这就是 .html 所做的。

```
$('#markup').val(markup) 
```

试试这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T23:34:09.367

对输入字段的更改不会更改 DOM，这是我应该做的。要更改 DOM，我将`.submit()`函数编辑为如下所示：

```
$('#work_form').submit(function(){
    // Update the DOM
    var block_1 = $('#block_1', '#work_form');
    block_1.find('input').each(function(i,e){
        el = $(e);
        el.attr('value', el.val());
    });
    // Snatch the markup
    var markup = block_1.html(); 
    // Place it into the textarea
    $('#markup', '#work_form').html( markup );
    // Move on
    return true;
}); 
```

感谢@PherricOxide 向我指出这个问题：

[使用 INPUT 标记的 VALUE 属性（及其值）读取 HTML 表单的 innerHTML](https://stackoverflow.com/questions/7601851/reading-innerhtml-of-html-form-with-value-attribute-its-value-of-input-tags)

# iphone - 适用于 iphone 4/4s 的 Xcode 4.5 MainStoryboard

> ID：12941021
> 
> 赞同：0
> 
> 时间：2012-10-17T18:36:55.687
> 
> 标签：iphone, xcode

我刚刚升级到**Xcode 4.5**并注意到我的应用程序没有正确显示在**MainStoryboard**中。**MainStoryboard**的高度似乎有所***增加***。我怀疑它与新的 iPhone 5 有关。如何将 MainStoryboard 设置为 iPhone 4 和 4S 的高度来创建新应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:48:44.687

对于情节提要上的视图控制器，选择视图控制器属性面板并将模拟指标大小属性设置为 Retina 3.5 全屏。

# javascript - 修复 div 宽度 @media 修复 IE

> ID：12941022
> 
> 赞同：2
> 
> 时间：2012-10-17T18:36:56.670
> 
> 标签：javascript, jquery, html, css, media

我有一个 div 设置为 100% 宽度，当页面以 1024 分辨率查看时，宽度应该从 100% 变为 1000px，我让它与@media 查询一起正常工作，并且在 FF、safari chrome 上工作正常。但是ie8及以下忽略了它，有没有其他方法可以让div在IE上以1024分辨率将宽度从100%更改为1000px？我用 jquery 试过这个，但没有用。

```
$(document).ready(function(){
if ($(window).width() < 1024) {
    $('#content')css('width','1000px')
} else {
    $('#content')css('width','100%')
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:40:10.090

媒体查询是 CSS3。表示 IE8 及更低版本不支持。但是看看[这里](http://code.google.com/p/css3-mediaqueries-js/)，它为 IE 带来了对媒体查询的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:45:12.457

```
$(document).load($(window).bind("resize", changeWidth));

function changeWidth( e ) {
    if($(window).width()<1024)
    {
        $('#content').css('width','1000px');
    } else {
        $('#content').css('width','100%');
    }
} 
```

[jsFiddle](http://jsfiddle.net/WHdWE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:53:27.540

您可以使用此代码：

```
 $(window).resize(function () {
    var width = screen.width;
    var height = screen.height;
    if (width <= 1024) {
        //somecode
    } else {
        //somecode

    }
 }); 
```

然而，正如 Sven Bieder 所说，CSS 媒体查询比响应式设计更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:02:25.407

为什么不直接在 CSS 中设置：

```
width: 100%;
max-width: 1000px; 
```

我可以向你保证，它比任何 JS/jQuery 解决方案都高效得多。

# android - Android - 从 PHONEGAP 打开原生 Android 应用程序

> ID：12941024
> 
> 赞同：1
> 
> 时间：2012-10-17T18:37:02.813
> 
> 标签：android, cordova

有谁知道如何从 phonegap 中的按钮打开本机 android 应用程序？我正在创建一个打开你的手机应用程序的活动，所以我需要一些东西来打开应用程序。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:47:29.880

创建一个插件，启动一个 Intent。

这个博客可能是一个不错的条目： [http ://tannerburson.com/blog/2012/05/28/IntentChooser-my-first-PhoneGap-Cordova-plugin/](http://tannerburson.com/blog/2012/05/28/IntentChooser-my-first-PhoneGap-Cordova-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:13:51.783

好吧，如果你想打开任何原生 Android 应用程序，那么你需要[编写一个插件](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)来调用应用程序的 Intent。

虽然如果您只想打开拨号器应用程序，您可以执行以下操作：

```
<button onclick="document.location='tel:'">Phone</button> 
```

如果还可以指定电话号码：

```
<button onclick="document.location='tel:411'">Phone</button> 
```

# java - JAXB：如何向内部元素添加属性

> ID：12941025
> 
> 赞同：2
> 
> 时间：2012-10-17T18:37:06.407
> 
> 标签：java, attributes, annotations, jaxb, java-6

我有以下想要阅读的 XML。在 java 1.6 上使用 JAXB，如何为属性 regex 进行注释？我可以将字段设为 boolean 类型吗？

```
<?xml version="1.0" encoding="utf-8"?>

 <authStore>
  <authList>
       <auth>
         <resource>res1</resource>
         <privilege regex = "true">PRIV_FILE_.+?_READ</privilege>   
       </auth>
       <auth>
         <resource>res2</resource>
         <privilege>PRIV_FILE_READ</privilege>   
       </auth>
</authStore> 
```

更新：是否可以使属性可选？如果是，当我解组时，当特权元素没有可选属性 regex 时，我会得到 regex 字段为 false 吗？

UDPATE2 ：我不想为资源和特权定义单独的类。另外，我不想使用 MOXy。请。建议仅适用于 sun/oracle JDK 1.6 JAXB 的解决方案。

UPDATE3：我当前的对象模型是这样的

```
// AuthStore.java
@XmlRootElement
public class AuthStore {

    @XmlElementWrapper(name = "authList")
    @XmlElement(name = "auth")
    private ArrayList<Auth> authList;

    public void setAuthList(ArrayList<Auth> authList) {
        this.authList = authList;
    }

    public ArrayList<Auth> getAuthsList() {
        return authList;
    }
}

// Auth.java    
@XmlRootElement(name = "auth")
@XmlType(propOrder = { "resource", "privilege" })
public class Auth
{
    private String resource;
    private String privilege;

    @XmlElement(name = "resource")
    public String getResource()
    {
        return resource;
    }

    public void setResource(String resource)
    {
        this.resource = resource;
    }

    @XmlElement(name = "privilege")
    public String getPrivilege()
    {
        return privilege;
    }

    public void setPrivilege(String author)
    {
        this.privilege = author;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:17:42.823

因为 privilege 包含一个属性（它实际上是复杂类型），你必须创建一个类来保存值和属性：

```
import java.io.InputStream;
import java.util.List;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlValue;

@XmlRootElement(name = "authStore")
@XmlAccessorType(XmlAccesssType.FIELD)
public class AuthStore {
    public static void main(String []args) throws Exception {
        InputStream inputStream = AuthStore.class.getResourceAsStream("test.xml");
        JAXBContext jaxbContext = JAXBContext.newInstance(AuthStore.class);
        Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
        AuthStore authStore = (AuthStore)unmarshaller.unmarshal(inputStream);

        System.out.println(authStore.getAuthList().get(0).getResource());
        System.out.println(authStore.getAuthList().get(0).getPrivilege().getRegex());
        System.out.println(authStore.getAuthList().get(0).getPrivilege().getValue());
    }

    @XmlElementWrapper(name = "authList")
    @XmlElement(name = "auth")
    private List<Auth> authList;

    public List<Auth> getAuthList() {
        return authList;
    }

    @XmlAccessorType(XmlAccesssType.FIELD)
    public static class Auth {
        @XmlElement(name = "resource")
        private String resource;
        @XmlElement(name = "privilege")
        private Privilege privilege;

        public String getResource() {
            return resource;
        }

        public Privilege getPrivilege() {
            return privilege;
        }

        @XmlAccessorType(XmlAccesssType.FIELD)
            public static class Privilege {
            @XmlAttribute(name = "regex")
            private Boolean regex;
            @XmlValue
            private String value;

            public Boolean getRegex() {
                return regex;
            }

            public String getValue() {
                return value;
            }
        }
    }
} 
```

# c# - 按多个值分组并分解为每周周期

> ID：12941028
> 
> 赞同：0
> 
> 时间：2012-10-17T18:37:26.323
> 
> 标签：c#, linq

我仍在学习 LINQ，并且有一项任务需要按四个属性对 Booking 对象进行分组，然后根据输入时间范围按每周间隔分组。

```
public class Booking
{
    public string Group { get; set; }
    public BookingType Type { get; set; }
    public BookingStatus Status { get; set; }
    public decimal Price { get; set; }
    public bool Notification { get; set; }
    public DateTime Date { get; set; }
} 
```

假设我们有以下预订：

```
 IList<Booking> Bookings = new List<Booking>
        {
            new Booking{Group = "Group1", Type = BookingType.Online, Status = BookingStatus.New, Price = 150, Date = new DateTime(2012,06,01)},
            new Booking{Group = "Group1", Type = BookingType.Online, Status = BookingStatus.New, Price = 100, Date = new DateTime(2012,06,02)},
            new Booking{Group = "Group1", Type = BookingType.Online, Status = BookingStatus.New, Price = 200, Date = new DateTime(2012,06,03)},

            new Booking{Group = "Group2", Type = BookingType.Phone, Status = BookingStatus.Accepted, Price = 80, Date = new DateTime(2012,06,10)},
            new Booking{Group = "Group2", Type = BookingType.Phone, Status = BookingStatus.Accepted, Price = 110, Date = new DateTime(2012,06,12)},

            new Booking{Group = "Group3", Type = BookingType.Store, Status = BookingStatus.Accepted, Price = 225, Date = new DateTime(2012,06,20)},

            new Booking{Group = "Group3", Type = BookingType.Store, Status = BookingStatus.Invoiced, Price = 300, Date = new DateTime(2012,06,21)},
            new Booking{Group = "Group3", Type = BookingType.Store, Status = BookingStatus.Invoiced, Price = 140, Date = new DateTime(2012,06,22)},
        }; 
```

这将导致最终打印输出中出现以下几行：

```
 Week 22     Week 23     Week 24     Week 25     Week 26
                                        May28-Jun3  Jun4-10     Jun11-17    Jun18-24    Jun25-Jul1
            Group   Type    Status      Cnt. Price  Cnt. Price  Cnt. Price  Cnt. Price  Cnt. Price
            ----------------------------------------------------------------------------------------------
            Group1  Online  New         3   450     0   0       0   0       0   0       0   0
            Group2  Phone   Accepted    0   0       1   80      1   110     0   0       0   0
            Group3  Store   Accepted    0   0       0   0       0   0       1   225     0   0       
            Group3  Store   Invoiced    0   0       0   0       0   0       2   440     0   0 
```

我创建了 2 个额外的类来表示一条可以包含任意周数的行：

```
 public class GroupedLine
{
    public string Group { get; set; }
    public BookingType Type { get; set; }
    public BookingStatus Status { get; set; }
    public List<WeeklyStat> WeeklyStats { get; set; } 
}

public class WeeklyStat
{
    public DateTime WeekStart { get; set; }
    public decimal Sum { get; set; }
    public int Count { get; set; }
} 
```

如果我有以下时间段：

```
 var DateFrom = new DateTime(2012, 05, 28);
        var DateTo = new DateTime(2012, 7, 01); 
```

首先，我需要确定统计数据中需要哪些周：在本例中为第 22-26 周。

为此，我有以下代码：

```
 var DateFrom = new DateTime(2012, 05, 28);
        var DateTo = new DateTime(2012, 7, 01);

        var firstWeek = GetFirstDateOfWeek(DateFrom, DayOfWeek.Monday);
        IList<DateTime> weeks = new List<DateTime> { firstWeek };

        while(weeks.OrderByDescending(w => w).FirstOrDefault().AddDays(7) <= DateTo)
        {
            weeks.Add(weeks.OrderByDescending(w => w).FirstOrDefault().AddDays(7));
        } 
```

现在，我需要一些 LINQ 魔法来按 4 个属性和聚合（预订计数和价格总和）进行分组。

我可以附上我明天到目前为止得到的 LINQ 的代码示例，因为我现在无法访问它。对不起，很长的帖子，希望我的意思很清楚。

编辑：2012-11-07 我必须稍微修改一下问题，以便分组的周仅包括那些实际上有数据的周。更新的示例输出：

```
 May28-Jun3  Jun4-10     Jun18-24    
            Group   Type    Status      Cnt. Price  Cnt. Price  Cnt. Price  
            ---------------------------------------------------------------
            Group1  Online  New         3   450     0   0       0   0       
            Group2  Phone   Accepted    0   0       1   80      0   0       
            Group3  Store   Accepted    0   0       0   0       1   225             
            Group3  Store   Invoiced    0   0       0   0       2   440 
```

在这种情况下，在 6 月 11 日至 17 日和 6 月 25 日至 7 月 1 日期间没有预订，因此从结果中省略了它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:23:09.727

此查询将获取所有数据

```
var query = from b in Bookings
            where b.Date >= dateFrom && b.Date <= dateTo
            group b by new { b.Group, b.Type, b.Status } into g
            select new GroupedLine()
            {
                Group = g.Key.Group,
                Type = g.Key.Type,
                Status = g.Key.Status,
                WeeklyStats = (from b in g
                                let startOfWeek = GetFirstDateOfWeek(b.Date)
                                group b by startOfWeek into weekGroup
                                orderby weekGroup.Key
                                select new WeeklyStat() 
                                {
                                    WeekStart = weekGroup.Key,
                                    Count = weekGroup.Count(),
                                    Sum = weekGroup.Sum(x => x.Price)

                                }).ToList()
            }; 
```

我把 UI 输出留给你 :)

这也将返回所有周的 WeekStats（如果我们在某周没有预订组，则值为 0）：

```
// sequence contains start dates of all weeks
var weeks = Bookings.Select(b => GetFirstDateOfWeek(b.Date))
                    .Distinct().OrderBy(date => date);

var query = from b in Bookings
            group b by new { b.Group, b.Type, b.Status } into bookingGroup
            select new GroupedLine()
            {
               Group = bookingGroup.Key.Group,
               Type = bookingGroup.Key.Type,
               Status = bookingGroup.Key.Status,
               WeeklyStats = (from w in weeks
                              join bg in bookingGroup 
                              on w equals GetFirstDateOfWeek(bg.Date) into weekGroup
                              orderby w
                              select new WeeklyStat() 
                              {
                                  WeekStart = w,
                                  Count = weekGroup.Count(),
                                  Sum = weekGroup.Sum(b => b.Price)    
                              }).ToList()
            }; 
```

请记住，如果您需要日期过滤器（从、到），那么您需要将它应用于`weeks`查询和`bookings`查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:02:31.160

```
var query = Bookings.GroupBy(book => new GroupedLine()
{
    Group = book.Group,
    Type = book.Type,
    Status = book.Status
})
.Select(group => new
{
    Line = group.Key,
    Dates = group.GroupBy(book => GetWeekOfYear(book.Date))
        .Select(innerGroup => new
        {
            Week = innerGroup.Key,
            Count = innerGroup.Count(),
            TotalPrice = innerGroup.Sum(book => book.Price)
        })
});

public static int GetWeekOfYear(DateTime date)
{
    return date.DayOfYear % 7;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:08:49.560

此变体会在没有数据的情况下生成数周的“空”点：

```
// I group by week number, it seemed clearer to me , but you can change it
var firstWeek = cal.GetWeekOfYear(DateFrom, dfi.CalendarWeekRule, dfi.FirstDayOfWeek);
var lastWeek  = cal.GetWeekOfYear(DateTo, dfi.CalendarWeekRule, dfi.FirstDayOfWeek);

var q = from b in Bookings
        group b by new { b.Group, b.Type, b.Status }
        into g
        select new 
        {
            Group = g.Key,
            Weeks = 
                from x in g
                select new 
                { 
                    Week = cal.GetWeekOfYear(x.Date,
                                             dfi.CalendarWeekRule, 
                                             dfi.FirstDayOfWeek), 
                    Item = x 
                }   
        } into gw
        from w in Enumerable.Range(firstWeek, lastWeek-firstWeek+1) 
        select new 
        { 
            gw.Group,
            Week = w,
            Item = from we in gw.Weeks
                   where we.Week == w
                   group we by we.Item.Group into p 
                   select new 
                   {
                       p.Key,
                       Sum = p.Sum (x => x.Item.Price),
                       Count = p.Count()
                   }
        }; 
```

# xsd - XSD 长度限制选项

> ID：12941030
> 
> 赞同：4
> 
> 时间：2012-10-17T18:37:48.053
> 
> 标签：xsd

这是有效的，但使用模式和 maxLength 来重复长度约束以强制执行它：

```
<xsd:simpleType name="MyType">     
    <xsd:restriction base="xsd:string">
       <xsd:pattern value="[0-9]{0,10}" />
       <xsd:maxLength value="10" />
    </xsd:restriction> 
 </xsd:simpleType> 
```

仅模式就足够了：

```
 <xsd:restriction base="xsd:string">
       <xsd:pattern value="[0-9]{0,10}" />
    </xsd:restriction> 
```

或者可以简化模式，我们将依赖 maxLength：

```
 <xsd:restriction base="xsd:string">
       <xsd:pattern value="[0-9]*" />
       <xsd:maxLength value="10" />
    </xsd:restriction> 
```

问题：

选择其中一个是否存在已知的性能影响？如果两者都提供，任何给定的解析器会先检查 len 并在编译模式之前短路验证吗？或者在任何情况下都将被检查？它是否因解析器而异？

我承认这里的性能差异可能很小。我还希望正则表达式引擎也可以缩短长度约束——但这比我可能关心的更深层次。

抛开性能不谈，我认为我更喜欢将它全部包含在模式中，但这可能反映了我对正则表达式的舒适程度，而不是典型的最佳实践。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:18:56.073

您的代码是数字还是数字字符串？我的意思是允许前导零吗？如果不是，您可以通过将其设置为具有最大长度或最大值的 xsd:integer 限制来使您的数据类型更加简单，例如：

```
<xsd:restriction base="xsd:integer"> 
   <xsd:maxLength value="10" /> 
</xsd:restriction> 
```

或者

```
<xsd:restriction base="xsd:integer"> 
    <xsd:maxExclusive value="10000000000"/>
</xsd:restriction> 
```

这将是描述它的最简单方法，并且可能更快，因为您现在正在执行整数检查，而不是正则表达式检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T00:14:11.270

在某种程度上，你的问题也有一个有趣的一面......因为即使你在翻译最后一个模式时也犯了一个错误（`+`意味着一个或多个，你想要`*`的），它证明了一些人会说正则表达式的一点，一个正则表达式可能会很棘手。无论我们喜欢与否，Regex 对许多人来说都是一场斗争。

我坚信“让事情尽可能简单，但不要简单”。

如果可以不用正则表达式，请远离它（见上文）。尽可能多地参考内置类型和提供的方面（我认为对你来说唯一有效的情况是如果你想允许前导零，否则带有约束方面的 unsignedint 也会这样做）。

如果你不能，但正则表达式可以做到，请不要犹豫使用它。

永远不要重复你的“要求”——维护是最重要的原因。不可否认，有机会获得额外的 CPU 周期，但除非有人故意过度使用它，正如你所说的那样，开销很可能是最小的。

我认为如果你坚持这些原则，你的问题就会消失......

# django - Django 简单页面稳定与否？

> ID：12941036
> 
> 赞同：0
> 
> 时间：2012-10-17T18:38:29.243
> 
> 标签：django, django-flatpages

我想使用 Django 创建一个包含几个页面的非常简单的站点。我想我可以使用 Wordpress。但是有一些自定义的东西（比如一种特殊的日历应用程序）我宁愿用 Python 而不是 PHP。

我遇到了简单页面，这似乎是平面页面和成熟的 Django CMS 之间的一个很好的中间方式（这似乎有点过头了）。它可以自动生成菜单。不过好像很久没更新了。它已弃用还是稳定？或者这些天平面页面是否具有相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:03:49.697

老实说，因为您了解 python，所以构建自己的小型自定义 CMS 将非常容易。它只需要几个模型而不是很多时间 - 结果是可以更好地根据您的需求定制。

我以前使用过其中的一些示例——它们工作正常，但我总是发现自己不得不添加更多内容。

一个想法是检查其中一些东西正在使用哪些子应用程序——也许只导入你真正需要的东西。

但是我几乎总是发现自己花了一点额外的时间来为简单的页面构建自己的架构/结构然后在将它交给客户时使用像 grappelli 这样的漂亮管理皮肤（你会得到那种 wordpress 的感觉（有点））

大量的管理员自定义可以让客户（和您）轻松使用静态页面。

# javascript - 在 flickr photostream 上显示照片设置标题

> ID：12941039
> 
> 赞同：1
> 
> 时间：2012-10-17T18:38:33.093
> 
> 标签：javascript, jquery, flickr

在我的主页上实现我的 Flickr 照片流时，我有点挣扎。我可以通过分页和所有方式让照片显示得很好，但我想在每张照片上加上它们所属的**集合的标题。**

这样做：

```
var url = "http://api.flickr.com/services/feeds/photos_public.gne?id=62356909@N05&lang=en-us&format=json&nojsoncallback=1";
jQuery.getJSON(url, function (data) { }); 
```

与照片所属的集合没有任何关系。此外，当调用 photos.getInfo() 时不包含有关集合的任何信息：-/

有谁知道如何在不打几次电话的情况下实现这一目标`collection -> collections -> sets -> photos`？

提前非常感谢！

一切顺利，

博

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:30:58.037

您返回的对象的 .title 属性不包含集合的标题吗？

*   或者这不是你的意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:44:58.547

我怀疑您是否能够仅使用来自 Flickr 的 RSS 提要来完成您想要的事情。要获得更大的灵活性（以更多的编程复杂性为代价），请查看完整的[Flickr API](http://www.flickr.com/services/api/)。如果您只是从自己的照片流中提取信息，则可以忽略身份验证，这是使用 API 最棘手的一点。

# c - 为什么我不能显示正确的列表值？

> ID：12941043
> 
> 赞同：0
> 
> 时间：2012-10-17T18:38:47.920
> 
> 标签：c, list, linked-list

要检查示例列表实施，我尝试了以下代码。但是每当我试图显示结果时，它就会进入一个循环。我找不到哪里出错了。

```
#include<stdio.h>
#include<stdlib.h>

typedef struct linkedlist
{
    int data;
    struct linkedlist *next;
}node;

int main()
{
    int ch,num;

    node *head=NULL;
    head=(node *)malloc(sizeof(node));
    node *new=NULL;
    new=(node *)malloc(sizeof(node));
    node *temp=NULL;
    temp=(node *)malloc(sizeof(node));
    printf("\n1.Insert to list");
    printf("\n3.Display the list");
    printf("\n Enter Choice->");
    scanf("%d",&ch);
    switch(ch)
    {
     case 1:printf("\n Enter data->");
            scanf("%d",&num);
            new->data=num;
            new->next=NULL;
            head->next=new;
            break;

     case 3: temp=head;
            while(temp!=NULL)
            {
                printf("\n %d",temp->data);
                temp=temp->next;
            }

                break;
     default:printf("Wrong Choice");
              break;

    }
    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:43:36.900

这里有两个错误。

1.  您只分配“新”一次。这意味着每次用户输入“1”并实际将其链接到自身时，您都在重用同一个节点。
2.  您根本不应该为“temp”分配节点，因为您没有使用它。您实际上正在使用这一行丢失指向该已分配节点的指针：`case 3: temp=head;`这称为“内存泄漏”。

我建议你多研究指针；他们似乎让你感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:55:06.577

为什么我觉得这是一道作业题？

这里有一些提示：

1.  `head`已分配，但从未初始化，这是您开始打印的地方。坦率地说，我很惊讶它没有崩溃。

2.  您的菜单允许您打印列表或输入一个数字，然后程序结束。我怀疑您正在输入一个数字，然后再次运行该程序以打印出该列表。程序状态不会在运行之间保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:46:54.267

我可以看到以下问题：

1）您没有使用选项循环，因此用户在每次运行程序时只能做一件事（插入或显示）。如果他选择插入，他将无法显示，如果他选择显示，则没有任何列表可显示。

2）每次要在列表中插入新节点时，都需要创建一个新节点。目前，您只是在更改同一节点的数据（由 new 指向）。

# c++ - 具有等待功能的简单线程

> ID：12941056
> 
> 赞同：1
> 
> 时间：2012-10-17T18:39:36.030
> 
> 标签：c++, multithreading, winapi

我不明白为什么下一个代码不起作用。它编译正确，但不输出任何内容。你能帮助我吗？

```
HANDLE hEvent;
unsigned int WINAPI MyThread(void *p)
{
    WaitForSingleObject(hEvent, INFINITE);
    _tprintf(TEXT("%s\n"),p);
    return 0;
}

int _tmain(int argc, TCHAR *argv[])
{
    hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    unsigned int ThreadID;
    HANDLE hThread1 = (HANDLE)_beginthreadex(NULL, 0, MyThread, L"hello world", 0, &ThreadID);
    SetEvent(hEvent);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:42:47.500

您的程序甚至在线程开始之前就停止了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:43:23.880

我的猜测是应用程序在 print 语句触发之前就退出了。您设置事件，然后立即退出。尝试等待线程完成后再退出。您应该能够使用从 _beginthreadex 返回的句柄。

```
HANDLE hThread1 = (HANDLE)_beginthreadex(NULL, 0, MyThread, L"hello world", 0, &ThreadID);
SetEvent(hEvent);
WaitForSingleObject( hThread1, INFINITE ); 
```

注意：我只是使用 INFINITE 作为超时示例，通常您可能不想要可能导致死锁等的 INFINITE。需要检查每种情况以确定正确的行为。在这里，由于您只是在向控制台写入数据，因此如果它在几秒钟内没有返回，则可能有问题。您可以修改代码以检查 WaitForSingleObject 的返回值，以查看它是否因超时而退出，然后根据该值做出决定（例如记录错误或有助于诊断问题所在的内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:46:14.253

把它放在你面前，`return 0;`你应该会得到一些结果

```
DWORD retVal;
GetExitCodeThread(hThread1, &retVal);

while(retVal == STILL_ACTIVE) {
    Sleep(1000);
    GetExitCodeThread(hThread1, &retVal);
} 
```

retVal 还将帮助您查看线程如何结束（假设您有不同的退出代码，例如`_endthreadex(6);`）

# jquery - 动态按钮和 on.click 事件问题

> ID：12941060
> 
> 赞同：1
> 
> 时间：2012-10-17T18:40:00.413
> 
> 标签：jquery, jsonp

我正在生成具有唯一 id 的动态 css 按钮，并且我正在使用以下单击处理程序捕获单击事件

```
$(document.body).on('click', 'a', function() {
    if (typeof(this.id) != "undefined") { //check if id exists
        var n = this.id.split("%");
        if (n[0] == "jsonpbtn") { //check if one of our buttons    
            var surl = "http://www.blah.com/tree/jsonp/foo/" + n[1];
            $.ajax({
                url: surl,
                cache: false,
                dataType: "jsonp",
                jsonp: false,
                jsonpCallback: 'foo',
                error: function(XHR, textStatus, errorThrown) {
                    alert(textStatus + ":" + errorThrown)
                },
                success: function(foo) {
                    $('#blah' + foo.id).html(foo.message);
                }
            });
        }
    }
});​ 
```

尽管 ajax 调用有效，但页面会生成错误“parsererror:Error: foo was not called”；我相信问题是这会遍历页面上的所有“a”元素并为每个“jsonpbtn”调用函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:22:16.297

我发现通过在我更改按钮状态的 ajax 调用之前插入一个初步阶段可以解决问题。

```
$(document.body).on('click', 'a', function() {
if (typeof(this.id) != "undefined") { //check if id exists
    var n = this.id.split("%");
    if (n[0] == "jsonpbtn") { //check if one of our buttons    
        var surl = "http://www.blah.com/tree/jsonp/foo/" + n[1];
        $('#div_id'+n[1]).html('<a class="button" href="#">working</a>');//<-added this
        $.ajax({
            url: surl,
            cache: false,
            dataType: "jsonp",
            jsonp: false,
            jsonpCallback: 'foo',
            error: function(XHR, textStatus, errorThrown) {
                alert(textStatus + ":" + errorThrown)
            },
            success: function(foo) {
                $('#blah' + foo.id).html(foo.message);
            }
        });
    }
}
});​ 
```

感谢那些试图提供帮助的人。问候马丁

# java - 填充多（多于 2）维字符串数组 Java

> ID：12941061
> 
> 赞同：-1
> 
> 时间：2012-10-17T18:40:01.023
> 
> 标签：java, arrays, multidimensional-array

我想知道是否有一些方法/策略来填充多维数组。

```
private String[] MENU = {"MENU 1", "MENU 2", "MENU 3"};
private String[][][] SUBMENU = {
  {{"SUBMENU 11", "TEXTO 11"}},
{{"SUBMENU 21", "TEXTO 21"}, {"SUBMENU 22", "TEXTO 22"}},
   {{"SUBMENU 31", "TEXTO 31"}, {"SUBMENU 32", "TEXTO 32"}, {"SUBMENU 33", "TEXTO 33"}}}; 
```

这是我从这里获得的一个例子：[http ://www.portalandroid.org/comunidade/viewtopic.php?f=7&t=14561](http://www.portalandroid.org/comunidade/viewtopic.php?f=7&t=14561)

但我不知道填充该 3 维字符串数组的任何方法或方式。

有小费吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:37:26.857

用于`ArrayList<String>`填充过程，然后通过调用检索数组`String[] a1 = aList.toArray(new String[0])`，对所有*内部*数组执行此操作，然后通过调用将它们全部相加`String[][] multiDim = new String[]{a1, a2, a3, a4}`

# python - Python Nmap 路径错误

> ID：12941062
> 
> 赞同：2
> 
> 时间：2012-10-17T18:40:01.363
> 
> 标签：python, nmap

Python可以很好地导入NMap，但是当我进行基本变量赋值时，它会返回错误：

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    nm = nmap.PortScanner()
  File "C:\Python32\lib\site-packages\nmap\nmap.py", line 144, in __init__
    raise PortScannerError('nmap program was not found in path. PATH is : {0}'.format(os.getenv('PATH')))
nmap.nmap.PortScannerError: 'nmap program was not found in path. PATH is : C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\DMIX;C:\\Program Files (x86)\\Microsoft SQL Server\\90\\Tools\\binn\\;C:\\Python32\\Lib\\;C:\\Python32\\Tools\\Scripts;C:\\Program Files (x86)\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files (x86)\\Java\\jdk1.7.0_05\\bin;C:\\Program Files (x86)\\Java\\jdk1.7.0_05;C:\\Program Files (x86)\\Java\\jdk1.7.0_05\\jre\\bin\\client;C:\\Program Files (x86)\\Android;N:\\PortableApps\\Android_SDK\\tools;N:\\PortableApps\\Android_SDK\\platform-tools;C:\\Python32;C:\\Python32\\Lib;C:\\Python32\\Scripts;C:\\Python32\\Lib\\site-packages;C:\\Python32\\Lib\\site-packages\\android.py;C:\\Python32\\Lib\\site-packages;C:\\Python32\\Lib\\site-packages\\nmap' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:55:52.717

我也遇到了这个问题。我通过安装 nmap 解决了这个问题。在 PATH 变量中添加 nmap.exe 目录后，我不再遇到此问题。

# payment-gateway - 信用卡交易中的批次有什么意义

> ID：12941064
> 
> 赞同：6
> 
> 时间：2012-10-17T18:40:08.153
> 
> 标签：payment-gateway, credit-card, payment-processing

因此，在刷信用卡的零售店，机器通常在一天结束时进行批量处理。正是在该批处理发生时，该卡才被实际收费。这是为什么？为什么不立即对 CC 收费？我能看到的一个原因可能是，在拨号上网的日子里，你会让所有的 CC 交易堆积到一天结束，然后你会收取你在一天中收集的所有 CC 信息一口气。

但这已经不是拨号上网的日子了，那么批处理的全部意义何在？

此外，在查看特定支付网关的规格时，我看到除其他外，“Sale”和“CaptureAll”的交易类型（我猜这与批量处理机器的作用相同）。如果每次刷卡都必须发送一个“销售”数据包，为什么不直接收费呢？或者为什么不在每次“销售”之后进行“捕获”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T03:03:17.453

[AUTH 和 CAPTURE](http://www.paymentsgateway.com.au/what-you-need-to-know/payments-gateway-authorization-and-capture)是 [支付卡处理](http://www.ippay.com/index.php?q=merchant_processing_overview)的两个重要功能。

作为商家，您可以将交易处理为：

*   仅授权
*   AUTH 然后 CAPTURE
*   授权和捕获。

**AUTH Only**只是简单的授权，用于检查卡或燃料授权的有效性。这些交易永远不会被结算。

**AUTH *then* CAPTURE**是指 AUTH 交易（实时），然后是延迟的 CAPTURE 交易进行结算。这些捕获事务是**批处理**的。

**AUTH*和*CAPTURE**是一次交易的实时授权和结算。

在电子商务世界中，商家通常选择 AUTH*然后*CAPTURE，原因如下：

1.  验证成功后但发货前的欺诈检查
2.  由于缺货而延迟发货
3.  多产品配送的部分配送

在实体世界中，商家使用混合方法。*与 AUTH和*CAPTURE 相比，*收*单方通常对 AUTH 和 CAPTURE 收取较高的交易费用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T05:19:57.610

到目前为止，没有人提到的一件事是 VOID，它是许多商家的“运营救星”，他们的运营技术比我们这里的许多人可以编程或部署的技术要少。

如果信用卡交易没有在“一天结束”时分批结算（在许多系统上，例如 Authorize.net，您可以指定您的批次最终结算的时间），则 VOID 是不可能的。

VOID 允许商家在批处理时间标记交易不在一天结束时结算 - 许多商家在缺货时会这样做，甚至（是的，我在现实世界中遇到过这种情况）如果他们在线处理设计非常糟糕，如果购物者双击最后一张卡片提交，他们会处理 2 笔交易。无效使交易“好像从未发生过”，但必须在批量结算之前完成 - 在批量结算之后，必须向卡提供信用。

如果您想到我们习惯于处理信用卡交易的所有无数要求，如果我们突然取消每天一次的批量交易结算，对于许多商家来说将是一场名副其实的噩梦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-29T16:54:47.370

至少在美国，这部分是因为资金是通过[ACH](http://en.wikipedia.org/wiki/Automated_Clearing_House)转移的，而且计算哪些银行欠哪些银行的大额、夜间批次比单独交易更有效。虽然授权通常是实时的，但它们不一定是实时的，它的核心仍然是一个“离线”的批处理系统。它是在“在线”不可能的时候设计的，而这正是它的工作方式。

从技术上讲，您可以在每次交易后关闭批处理，但每次都需要支付批处理费用，因为结算需要实际工作，而这不是网络的设计使用方式。由于 ACH 的运作方式，您最早也要到下一个工作日才能收到款项。

这与 EFTPOS（一种您在终端输入 PIN 的“在线”借记卡交易）形成鲜明对比，后者涉及不同的技术、不同的网络和资金的即时转账。

在美国，借记卡通常也带有信用卡网络的品牌，如 Visa 或 MasterCard。当您刷这些卡并输入 PIN 码时，它会通过 EFTPOS 网络（Interlink、Star、Pulse——您以前在卡上看到过这些名称，但可能没有多加考虑）。这通常对商家有利，因为费用较低，并且发卡行通常对欺诈性使用负责（这一切都是实时在线发生的，并且用户使用 PIN 进行身份验证）。当您刷这些卡并且不输入您的 PIN 码（有时在收据上签名）时，它会通过信用卡网络 - 再次，一个完全不同的网络 - 并且是每晚一批的一部分。商家通常支付更高的费用，如果被欺诈使用，商家通常会为此买单。（收单方几乎总是将其传递给商家。）如果您曾经想知道为什么沃尔玛或您的杂货店默认使用密码键盘并让您跳过箍找到信用功能，这就是为什么 - 借记更便宜他们。如果您曾经想知道为什么当您的帐单地址错误时电子商务商店会吓坏，这就是为什么 - 如果您认为交易是欺诈性的，那么支付账单的是他们，银行不会出汗。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T18:53:27.093

我不确定这是不是正确的论坛，但我会尝试一下。

至于批处理，你说得对，这是一个有拨号的遗留问题。一些供应商还没有转换，并不是每个人都为完整的互联网连接付费，尤其是在偏远地区。因此，信用卡刷卡机仍然允许这种收费方式。对于使用它的美国供应商来说，风险稍大一些，因为大多数美国信用卡都不是可以验证自己的智能卡。我不确定我会说“大多数零售店”不再这样做，除非你不在美国。

至于有两个步骤：并非所有信用卡交易都会立即产生费用。根据信用卡规则，拥有实物产品的供应商必须等到产品实际发货前的窗口才能收费。因此，许多供应商会授权验证信用卡并保留资金。当产品发货时，他们将使用捕获交易向同一张信用卡收取费用，而无需出示信用卡。

有很多关于这个过程的好资源

[更多信息](http://www.paymentsgateway.com.au/what-you-need-to-know/payments-gateway-authorization-and-capture)

[更多信息](http://www.softwareprojects.com/resources/conversion-traffic-to-cash/t-processing-payments-authorize-vs-capture-vs-settle-2030.html)

# c++ - C++ 文本文档

> ID：12941070
> 
> 赞同：0
> 
> 时间：2012-10-17T18:40:22.737
> 
> 标签：c++, io, fstream

它可能是一个简单的答案，我希望它很容易理解我的问题。我有一个包含很多行和几个段落的文本文档

有没有一种方法可以将所有行合并为一行而无需手动操作？我之所以问这个问题是因为假设我正在搜索只有一个段落的文档中的特定单词。（假设该段落有 10 行）如果该单词在该段落中，则假设返回段落 1 被接受。但是我的程序在做什么奇怪的事情，而不是给我这样的输出：

```
paragraph1:accepted
paragraph2:accepted
paragraph3:accepted
paragraph4:accepted
paragraph5:accepted
paragraph6:accepted
paragraph7:accepted
paragraph8:accepted
paragraph9:accepted
paragraph10:accepted 
```

这是读取我的文档的代码

```
 void processParagraph(std::string &paragraph, size_t paragraphNumber)
   {

    ifstream input;
    input.open("data.txt"); //opens the text file with the documents

    if (input.fail()) //if the file doesn't open
     {
      cout << "file not found" << endl;
      return;
     }

    if (isMyWordThere(paragraph)) //if the word im looking its there 
     cout << "paragraph " << paragraphNumber << ": accepted" << endl;
     else // if the word its not there 
      cout << "paragraph " << paragraphNumber << ": not accepted" << endl;
      paragraph.clear(); // reset the paragraph to handle the next one.

    std::string line;
    std::string paragraph;
    size_t paragraphNumber = 0;
    while ( getline(input, line) ) // read a LINE
     {
      if ( !line.empty() ) // paragraph not finished
       {
        paragraph.append("\n").append(line);
       }
     else // paragraph finished, because we found an empty line
      {
        ++paragraphNumber;
        processParagraph(paragraph, paragraphNumber);
      }
     }
     if ( !paragraph.empty() )
      {
       processParagraph(paragraph, paragraphNumber);
      }
   } 
```

它有一种方法可以将所有行合并为一个，或者我可以更改我的代码以便它不计算行数？

输入文件如下所示：（我正在寻找单词“hello”）

```
hello world
hello everyone
hello All 
```

输出应如下所示

```
paragraph 1: accepted 
```

但我得到的是

```
paragraph 1: accepted
paragraph 2: accepted
paragraph 3: accepted 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:55:33.797

您似乎想将此功能拆分为一个单独的函数，该函数可以采用文件名或打开的文件流。然后为每个文件调用一次此函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:02:02.587

您正在处理*行*而不是*段落*。

这将做到：

```
void processParagraph(std::string &paragraph, size_t paragraphNumber)
{
    if (isMyWordThere(paragraph)) //if the word im looking its there 
        std::cout << "paragraph " << paragraphNumber << ": accepted" << std::endl;
    else // if the word its not there 
        std::cout << "paragraph " << paragraphNumber << ": not accepted" << std::endl;
    paragraph.clear(); // reset the paragraph to handle the next one.
}

void processFile(std::string filename)
{
    std::ifstream input;
    input.open(filename.c_str()); // open file
    std::string line;
    std::string paragraph;
    size_t paragraphNumber = 0;
    while ( getline(input, line) ) // read a LINE
    {
       if ( !line.empty() ) // paragraph not finished
       {
           paragraph.append("\n").append(line);
       }
       else // paragraph finished, because we found an empty line
       {
           ++paragraphNumber;
           processParagraph(paragraph, paragraphNumber);
       }
    }
    if ( !paragraph.empty() )
    {
        processParagraph(paragraph, paragraphNumber);
    }
} 
```

# iphone - CGImage 和 ALAsset 的内存泄漏

> ID：12941071
> 
> 赞同：1
> 
> 时间：2012-10-17T18:40:29.227
> 
> 标签：iphone, objective-c, ios, memory-leaks

```
NSData * pngdata = UIImageJPEGRepresentation([UIImage imageWithCGImage:selected.defaultRepresentation.fullScreenImage scale:1 orientation:UIImageOrientationUp],.6); 
```

上面的代码每次调用都会导致内存泄漏。有谁知道为什么？如果我尝试释放会使应用程序崩溃的 pngdata，我假设 NSData 无论如何都是自动释放的。

这是来自仪器。

> Leaked Object # Address Size Responsible Library Responsible Frame Malloc 16 Bytes 2 < multiple > 32 Bytes ImageIO CGImageMergeXMPPropsWithLegacyProps

# powershell - - 像多种模式

> ID：12941078
> 
> 赞同：3
> 
> 时间：2012-10-17T18:40:51.337
> 
> 标签：powershell, powershell-2.0

有没有一种简单的方法（不使用循环）将多个模式应用于一个字符串？

所以

```
"c:\myfile.txt" -like "*.dat","*.txt" 
```

应该返回 $true

```
"c:\myfile.dat" -like "*.dat","*.txt" 
```

应该返回 $true

> "c:\myfile.doc" 类似 " *.dat",".* txt"

应该返回 $false

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:47:04.690

我不这么认为。您可以使用正则表达式：

```
"c:\myfile.txt" -match '^.+\.(dat|txt)$' 
```

更新

从包含通配符模式的输入中创建一个正则表达式模式：

```
 PS> $or = '"*.dat","*.txt","*.foo"' -replace '"|\*\.'  -replace ',','|'
    PS> $pattern = '^.+({0})$' -f $or
    PS> $pattern 
    ^.+(dat|txt|foo)$

   $string -match $pattern 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:46:31.583

您可以尝试使用`-match`，而不是在`-like`这里：

```
"c:\myfile.txt" -match "\.(dat|txt)$" ==> True
"c:\myfile.dat" -match "\.(dat|txt)$" ==> True
"c:\myfile.doc" -match "\.(dat|txt)$" ==> False 
```

# objective-c - 获取当前年份

> ID：12941081
> 
> 赞同：5
> 
> 时间：2012-10-17T18:41:01.793
> 
> 标签：objective-c, cocoa

只是出于好奇（因为这是我第一次需要在 Cocoa 中计算它）——
**这*真的*是计算当前年份的最简洁的方法吗？**

```
int thisYear = [[[NSCalendar currentCalendar] 
                components:NSYearCalendarUnit fromDate:[NSDate date]] 
               year]; 
```

看起来很笨拙。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:00:52.970

是的，当我需要从诸如日、月或年之类的日期获取组件时，我使用`NSDateComponents`，事实上日期是笨拙的 - 有不同的日历、时区、闰年等。

# node.js - 在 node.js 中执行并获取 shell 命令的输出

> ID：12941083
> 
> 赞同：155
> 
> 时间：2012-10-17T18:41:11.367
> 
> 标签：node.js, shell, command-line-interface

在 node.js 中，我想找到一种获取 Unix 终端命令输出的方法。有没有办法做到这一点？

```
function getCommandOutput(commandString){
    // now how can I implement this function?
    // getCommandOutput("ls") should print the terminal output of the shell command "ls"
} 
```

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-10-17T18:47:32.707

这是我在我目前正在从事的项目中使用的方法。

```
var exec = require('child_process').exec;
function execute(command, callback){
    exec(command, function(error, stdout, stderr){ callback(stdout); });
}; 
```

检索 git 用户的示例：

```
module.exports.getGitUser = function(callback){
    execute("git config --global user.name", function(name){
        execute("git config --global user.email", function(email){
            callback({ name: name.replace("\n", ""), email: email.replace("\n", "") });
        });
    });
}; 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2018-05-14T16:30:59.583

如果您使用的 node 是 7.6 之后的版本并且您不喜欢回调样式，您还可以使用 node-util 的`promisify`函数 with`async / await`来获取清晰读取的 shell 命令。这是使用此技术的已接受答案的示例：

```
const { promisify } = require('util');
const exec = promisify(require('child_process').exec)

module.exports.getGitUser = async function getGitUser () {
  // Exec output contains both stderr and stdout outputs
  const nameOutput = await exec('git config --global user.name')
  const emailOutput = await exec('git config --global user.email')

  return { 
    name: nameOutput.stdout.trim(), 
    email: emailOutput.stdout.trim()
  }
}; 
```

这还有一个额外的好处，即在失败的命令上返回一个被拒绝的承诺，这可以`try / catch`在异步代码中进行处理。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-10-17T18:44:51.757

您正在寻找[child_process](http://nodejs.org/api/child_process.html)

```
var exec = require('child_process').exec;
var child;

child = exec(command,
   function (error, stdout, stderr) {
      console.log('stdout: ' + stdout);
      console.log('stderr: ' + stderr);
      if (error !== null) {
          console.log('exec error: ' + error);
      }
   }); 
```

* * *

正如 Renato 所指出的，现在也有一些同步 exec 包，请参阅[sync-exec](http://davidwalsh.name/sync-exec)，这可能是您正在寻找的更多内容。但请记住，node.js 被设计为单线程高性能网络服务器，因此如果您希望使用它，请远离 sync-exec 之类的东西，除非您只在启动期间使用它或者其他的东西。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2019-08-08T20:35:56.207

## 要求

这需要支持 Promises 和 Async/Await 的 Node.js 7 或更高版本。

## 解决方案

创建一个包装函数，利用 promise 来控制`child_process.exec`命令的行为。

## 解释

使用 Promise 和异步函数，您可以模仿 shell 返回输出的行为，而不会陷入回调地狱，并且 API 非常简洁。使用`await`关键字，您可以创建一个易于阅读的脚本，同时仍然能够`child_process.exec`完成工作。

## 代码示例

```
const childProcess = require("child_process");

/**
 * @param {string} command A shell command to execute
 * @return {Promise<string>} A promise that resolve to the output of the shell command, or an error
 * @example const output = await execute("ls -alh");
 */
function execute(command) {
  /**
   * @param {Function} resolve A function that resolves the promise
   * @param {Function} reject A function that fails the promise
   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
   */
  return new Promise(function(resolve, reject) {
    /**
     * @param {Error} error An error triggered during the execution of the childProcess.exec command
     * @param {string|Buffer} standardOutput The result of the shell command execution
     * @param {string|Buffer} standardError The error resulting of the shell command execution
     * @see https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback
     */
    childProcess.exec(command, function(error, standardOutput, standardError) {
      if (error) {
        reject();

        return;
      }

      if (standardError) {
        reject(standardError);

        return;
      }

      resolve(standardOutput);
    });
  });
} 
```

## 用法

```
async function main() {
  try {
    const passwdContent = await execute("cat /etc/passwd");

    console.log(passwdContent);
  } catch (error) {
    console.error(error.toString());
  }

  try {
    const shadowContent = await execute("cat /etc/shadow");

    console.log(shadowContent);
  } catch (error) {
    console.error(error.toString());
  }
}

main(); 
```

## 样本输出

```
root:x:0:0::/root:/bin/bash
[output trimmed, bottom line it succeeded]

Error: Command failed: cat /etc/shadow
cat: /etc/shadow: Permission denied 
```

## 在线尝试。

复制[.it](https://repl.it/repls/SpiffyThirdInterfacestandard)

## 外部资源

[承诺](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)。

[`child_process.exec`](https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback).

[Node.js 支持表](https://node.green/)。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2018-07-17T13:15:42.063

感谢 Renato 的回答，我创建了一个非常基本的示例：

```
const exec = require('child_process').exec

exec('git config --global user.name', (err, stdout, stderr) => console.log(stdout)) 
```

它只会打印您的全局 git 用户名:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-25T08:04:19.457

您可以使用 nodejs 附带的 util 库从 exec 命令中获取承诺，并可以根据需要使用该输出。使用重组将 stdout 和 stderr 存储在变量中。

```
const util = require('util');
const exec = util.promisify(require('child_process').exec);

async function lsExample() {
  const {
    stdout,
    stderr
  } = await exec('ls');
  console.log('stdout:', stdout);
  console.error('stderr:', stderr);
}
lsExample();
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-13T05:15:57.040

你可以使用`ShellJS`包。
ShellJS 是基于 Node.js API 的 Unix shell 命令的可移植（Windows/Linux/OS X）实现。
见：[https ://www.npmjs.com/package/shelljs#execcommand--options--callback](https://www.npmjs.com/package/shelljs#execcommand--options--callback)

```
import * as shell from "shelljs";

//usage:
//exec(command [, options] [, callback])

//example:
const version = shell.exec("node --version", {async: false}).stdout;
console.log("nodejs version", version); 
```

# java - C++/Java 引用变量

> ID：12941087
> 
> 赞同：2
> 
> 时间：2012-10-17T18:41:20.613
> 
> 标签：java, c++, variables, pointers, reference

在 Java 中，当我这样做时

```
Foo bar = new Foo(); 
```

bar 将是一个包含新构造对象地址的变量。我的教授称它为**参考变量**

上一行在 C++ 中等价于：

```
Foo *bar = new Foo(); 
```

这里，bar 是指向对象的指针

那么，Java 中的引用变量是否基本上是一个指针？

此外，当我在 C++ 中执行此操作时：

```
Foo bar; 
```

bar也是指针吗？如果不是，那么这是否意味着两者之间的内存结构存在差异

```
Foo bar; 
```

和

```
Foo *bar = new Foo(); 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T18:45:42.863

C++ 中的指针的行为类似于 Java 中的引用。

然而，`Foo bar;`与`Foo *bar = new Foo();`. 第一个创建具有自动持续时间的 Foo 实例。它将在创建它的块的末尾被销毁。第二个创建动态分配的 Foo 实例。它会一直存在，直到被明确删除。

如果您希望对象在函数返回后存在，则不能使用第一个。如果在函数返回后使用指针或对它的引用，就会发生不好的事情。在这种情况下，您必须使用第二种形式。

第一种形式的优点是您不必担心内存管理。它将在其作用域结束时自动销毁。对于第二种形式，您必须手动删除它，或者使用某种智能指针对其进行管理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T18:42:29.733

> 那么，Java 中的引用变量是否基本上是一个指针？

--> 总之是！但是由于 c++ 允许您操作指针，java 不允许。（相似是区分的好词）

```
Foo bar; // bar is allocated on stack in c++ 
```

--> 在 java 中，这只是`bar`类型的声明`Foo`。

In`c++`对象可以被保存，`stack`也可以`heap`在`Java`对象被存储`only on heap`时被保存，而指向对象的对象引用在堆栈上。

> Foo *bar = new Foo(); // C++ : *bar 在堆栈上，而分配的内存在堆上
> 
> Foo bar = new Foo(); // Java : 栈上的 bar 和使用 new 创建的对象在堆上

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T18:44:05.563

如果您想知道“指针”一词是否适用于每种语言，给定每种语言的规范，那么*是*的。

在**[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.1)**中，Java 引用被称为“指针”：

> *对象*是*类*实例或*数组*。
> 
> 引用值（通常只是*引用*）是指向这些对象的指针，以及一个特殊的空引用，它不引用任何对象。

在 C++ 语言规范（这是一个国际 ISO 标准，**C++ 标准**）中，C++ 指针被称为“指针”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T18:44:10.603

> 此外，当我在 C++ 中执行此操作时：
> 
> 富吧；bar也是指针吗？如果不是，那么这是否意味着两者之间的内存结构存在差异
> 
> 富吧；

它不是指针。它只是在堆栈上创建的一个对象。

在 Java 中，所有对象都是引用或指针，或者使用返回地址 `new` C++ 指针和 Java“指针”之间的区别在于，您不能在 Java 中进行指针运算。

上次我阅读 Java 编程语言时，它说引用*是*指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T18:48:32.043

好吧，如果你想挑剔的话，它们实际上并不*完全*像指针：

1.  **Java 指针不允许使用指针算术。**您不能递增、递减、乘以等指针来移动它们在内存中指向的内容。
2.  **不是强类型。**在 C 中，您可以将指针从一种类型转换为几乎任何类型，而不会产生任何后果（只要您小心）。在 Java 中，如果您尝试在不兼容的类型之间进行转换，您将得到一个异常。

否则，它们的行为方式与指针几乎相同，只要您不需要 C 样式指针的上述任何特性，您可能不会注意到差异。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T19:15:56.310

指针是表示内存地址的值。
引用是引用对象的值。
指针是实现引用的一种方式。其实使用指针实现引用有多种方式，因为大多数对象占用不止一个地址，所以你要定义引用指向哪个地址。

几个区别：

*   您可以使用指针进行数学运算，因为地址是整数值。参考值没有内在意义，它只是代表一个对象。
*   指针可以指向任何值，例如对象中的字段；引用始终代表整个对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T23:07:23.210

将它们与 Pascal 指针进行比较会更准确。它们有许多相同的特征：强类型、没有算术、可以为空。

# java - 在 Android 中将 OnClickListeners 添加到按钮的不同方法

> ID：12941088
> 
> 赞同：1
> 
> 时间：2012-10-17T18:41:21.550
> 
> 标签：java, android, button, onclick, listeners

Android中给按钮添加事件监听器的两种方式是什么？

我已经看到您可以在 XML 中指定侦听器。我个人更喜欢这种方式，因为它通常涉及更少的代码。我知道有些人喜欢创建一个匿名的内部类......

我对 Android 编程比较陌生，所以这个问题纯粹是为了扩展我的知识。有兴趣听听社区对此有什么看法！

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:54:05.310

我看它的方式，我想大多数人都会同意，如果按钮用于一次性功能，那么将它放在 xml 中就可以了。如果您有一个在多个地方使用的按钮，那么最好在活动中设置 onClick 侦听器。我有一个程序，它的按钮可以根据程序中的其他变量执行某些操作。如果我从 xml 调用一个函数，那么它不会总是调用正确的函数或采取适当的行动。我希望这是有道理的。蒂姆是对的，这个问题对于 SO 来说不是一个“建设性”的问题，但希望我以一种更客观的方式为你回答了这个问题。快乐编程！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:57:39.910

我所使用的都是内部类，因为这就是我所见过的所有教程所展示的。我知道您也可以在类声明中使用“实现 OnClickListener”，并将代码中的所有点击侦听器设置为一个大案例语句。它可能看起来更整洁，但我不认为它在编写活动时遵循自然的思路，尤其是有很多按钮的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:49:31.597

这取决于你的任务。在一种情况下，在 XML 中指定侦听器就足够了。在其他情况下，例如，当您在代码中动态创建按钮时，您将需要在代码中定义侦听器或创建匿名内部。另一种情况是侦听器用作方法的参数并且您将无法在 XML 中指定它。

# python - Python one-liner 用文本文件中的另一个词替换一个词

> ID：12941091
> 
> 赞同：2
> 
> 时间：2012-10-17T18:41:34.763
> 
> 标签：python

我正在尝试使用 Python（通过 Linux 终端）替换文本文件以下行中的“示例”一词`text_file.txt`：

```
abcdefgh example uvwxyz 
```

我想要的是：

```
abcdefgh replaced_example uvwxyz 
```

我可以用 Python 中的单线来做到这一点吗？

**编辑：** 我有一个 perl 单行`perl -p -i -e 's#example#replaced_example#' text_file.txt`，但我也想用 Python 来做

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T18:57:16.400

你能行的：

```
python -c 'print open("text_file.txt").read().replace("example","replaced_example")' 
```

但它相当笨拙。Python 的语法并不是为了制作漂亮的 1-liners 而设计的（尽管它经常以这种方式工作）。Python 重视清晰度高于一切，这是您需要导入内容以获得 Python 必须提供的真正强大工具的原因之一。由于您需要导入内容才能真正利用 python 的强大功能，因此它不适合从命令行创建简单的脚本。

我宁愿使用专为这类事情设计的工具——例如`sed`：

```
sed -e 's/example/replace_example/g' text_file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:12:48.053

顺便说一下，fileinput 模块支持就地修改，就像 sed -i

```
-bash-3.2$ python -c '
import fileinput
for line in fileinput.input("text_file.txt", inplace=True):
    print line.replace("example","replace_example"),
' 
```

# java - 序列化/反序列化 SIPDIalog

> ID：12941092
> 
> 赞同：3
> 
> 时间：2012-10-17T18:41:36.417
> 
> 标签：java, cassandra, sip, jain-sip, astyanax

我试图将 gov.nist.javax.sip.stack.SIPDialog 对象序列化和反序列化到 Cassandra 中。但是当我将反序列化对象与我序列化的原始 SIPDialog 对象进行比较时，对反序列化对象的等于比较失败。所以看起来我在序列化中遗漏了一些东西。我正在使用 ByteArraySerializer 将字节读/写到 Cassandra。

//保存对话框

```
MutationBatch mutationBatch = createMutator();
byte[] dialogBytes = SIPDialogEntity.serializeDialog(dialog);

mutationBatch.withRow(SIPDIALOGS, dialogId)
.putColumn("dialog".getBytes(),dialogBytes,null);
mutationBatch.execute();

public static byte[] serializeDialog(SIPDialog dialog) throws IOException {

    ByteArrayOutputStream bStream = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bStream);       
    oos.writeObject(dialog);
    oos.close();
    byte[] bytes = bStream.toByteArray();
    bStream.close();

    return bytes;
} 
```

//阅读对话框

```
Column<byte[]> result;
result = getKeySpace().prepareQuery(SIPDIALOGS).getKey(dialogId).getColumn("dialog").execute().getResult();
        sipDialog = SIPDialogEntity.deserializeDialog(result.getByteArrayValue());

public static SIPDialog deserializeDialog(byte[] byteArrayDialog) throws IOException, ClassNotFoundException {      
    System.out.println("DEBUG Reading Dialog Bytes:" + byteArrayDialog );       
    ByteArrayInputStream bStream = new ByteArrayInputStream(byteArrayDialog);
    ObjectInputStream ois = new ObjectInputStream(bStream);     
    SIPDialog dialog = (SIPDialog) ois.readObject();
    ois.close();
    bStream.close();
    return dialog;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:26:39.593

SIPDialog 类不会覆盖 equals 方法，这就是比较失败的原因。请在[http://java.net/jira/browse/JSIP上用 jain sip 打开一个问题](http://java.net/jira/browse/JSIP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:36:25.247

嗯，如果 SipDialog 是您的课程，您可以跳过所有工作并使用 PlayOrm 进行 cassandra ;)。然后你不需要处理序列化/反序列化。

如果它不是您的课程，我想我会让他们添加一种方法来添加要转换为实体的 3rd 方 bean，就像 Guice 在绑定文件中所做的那样，它可以绑定到可以由 PlayOrm 保存的实体。如果您通过请求在 PlayOrm 上开票，我们可能会在短短 1 周内获得该功能。

# java - 在 Spring 的 Java 配置中使用 FactoryBean 和 DisposableBean

> ID：12941095
> 
> 赞同：4
> 
> 时间：2012-10-17T18:41:49.463
> 
> 标签：java, spring, config

[ThreadPoolExecutorFactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolExecutorFactoryBean.html)是实现[DisposableBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/DisposableBean.html)的[FactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/FactoryBean.html)。当像这样在 Spring 的 XML bean 定义中使用时

```
<bean id="executorService" 
      class="org.springframework.scheduling.concurrent.ThreadPoolExecutorFactoryBean"/> 
```

创建的 bean 将是[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)的一个实例，并确保`ThreadPoolExecutorFactoryBean#destroy()`在 Spring 应用程序上下文关闭后被调用。

[是否可以使用 Spring 3 的@Configuration](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/annotation/Configuration.html)类配置这样的 bean ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T18:57:45.137

我发现这种方法最优雅：

```
@Configuration
public class Cfg {

    public ExecutorService executorService() {
        return executorServiceFactoryBean().getObject();
    }

    @Bean
    public ThreadPoolExecutorFactoryBean executorServiceFactoryBean() {
        return new ThreadPoolExecutorFactoryBean();
    }

} 
```

请注意，`executorService()`它**没有**用 - 注释，`@Bean`但您仍然可以从其他`@Bean`需要的 - 方法中调用它`ExecutorService`。由于`ThreadPoolExecutorFactoryBean`用 注释`@Bean`，Spring 将自动管理其生命周期（检测`DisposableBean`等）

# java - 在java中编写等于字符串匹配的正则表达式

> ID：12941098
> 
> 赞同：2
> 
> 时间：2012-10-17T18:42:05.037
> 
> 标签：java, regex

我希望有一个正则表达式方法来查找 java 接受的确切字符串模式。

我现在有正则表达式：

```
STRINGS = \"[a-zA-Z0-9" "]*\" 
```

哪个与以下字符串匹配：

```
"this is a string"

"thisisstring" 
```

但它不支持转义字符，所以字符串如下：

```
"this is a sting \"\"" 
```

失败。另请注意，此字符串是：

```
"this is a sting \"\" 
```

无效。有什么方法可以让我在正则表达式中捕获这些条件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:45:14.030

您需要`\\\\`在您的正则表达式字符串中包含 a （在方括号之间）。`\\`是转义Java字符串中的 \ ，您需要 2 ，`\\`因为您需要转义正则表达式中的反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:00:57.993

很难说出你的字符串是什么，因为它们是伪代码。但这应该匹配所有 apha-numerics 和双引号：

```
String pattern = "[a-zA-Z0-9\" ]*";
Pattern.matches(pattern, "\"this is a sting \""); 
```

这应该匹配所有字母数字、双引号或以下组合`\"`

```
String pattern = "([a-zA-Z0-9\" ]|\\\\\")*";
System.out.println(Pattern.matches(pattern, "\"this is a sting \\\"")); 
```

这是因为您必须`\`为字符串转义一次，为正则表达式解析器转义一次（因此它最终`\`连续 4 个以匹配`\`字符串中的 a）。

# matlab - Matlab - 子图中不同的轴大小

> ID：12941104
> 
> 赞同：0
> 
> 时间：2012-10-17T18:42:33.423
> 
> 标签：matlab, plot, axes, subplot

我有两个不同比例的图表，我想使用子图。如何为 subplot(211) 设置轴大小并为 subplot(212) 设置不同的轴比例？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:52:49.500

[subplot](http://www.mathworks.se/help/matlab/ref/subplot.html)返回一个坐标区对象：

```
ha = subplot(211);
plot(1:10);
set(ha, 'xscale', 'log');
hb = subplot(212);
plot(1:10);
set(hb, 'xscale', 'linear'); 
```

将其存储在变量中并根据需要设置比例。

# python - python - 为什么一行上的嵌套控制语句在python中失败？

> ID：12941105
> 
> 赞同：4
> 
> 时间：2012-10-17T18:42:36.203
> 
> 标签：python

我一直在尝试转换一个简单的执行，例如：

```
for x in xrange(10):
    if x % 2 == 0:
        print x, 'is even' 
```

到一个班轮版本：

```
for x in xrange(10): if x % 2 == 0: print x, 'is even' 
```

这给了我：

```
 File "foo.py", line 1
    for x in xrange(10): if x % 2 == 0: print x, 'is even'
                      ^
SyntaxError: invalid syntax 
```

**我在这里没有看到任何歧义。失败有什么特别的原因吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T18:47:36.713

[语法](http://docs.python.org/reference/grammar.html)根本不允许这样做。相关产品有：

```
for_stmt: 'for' exprlist 'in' testlist ':' suite ['else' ':' suite]
suite: simple_stmt | NEWLINE INDENT stmt+ DEDENT 
```

如您所见，在 a 之后`for`您可以放置​​一个简单的语句或一个“套件”，即一个缩进块。`if`语句是复合语句，而不是简单语句。

表达这个程序的最少两行代码：

```
for x in xrange(10):
    if x % 2 == 0: print x, 'is even' 
```

（当然，您可以编写只占用一行的等效程序，例如

```
for x in xrange(0, 10, 2): print x, "is even" 
```

或针对此问题发布的任何其他单行词。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T18:49:26.167

从[2.7 的正式语法](http://docs.python.org/reference/grammar.html)：

```
compound_stmt: if_stmt | while_stmt | for_stmt | try_stmt | with_stmt | funcdef | classdef | decorated

if_stmt: 'if' test ':' suite ('elif' test ':' suite)* ['else' ':' suite]
for_stmt: 'for' exprlist 'in' testlist ':' suite ['else' ':' suite]

suite: simple_stmt | NEWLINE INDENT stmt+ DEDENT

simple_stmt: small_stmt (';' small_stmt)* [';'] NEWLINE
small_stmt: (expr_stmt | print_stmt  | del_stmt | pass_stmt | flow_stmt |
             import_stmt | global_stmt | exec_stmt | assert_stmt) 
```

如果`suite`允许，`compound_stmt`那么您的建议将被接受。但这也将允许这样的事情：

```
if True: try:
  # do something
except:
  # handle
foo() 
```

那是`except`在封闭之外`if`吗？是`foo`外接电话`if`吗？我认为这表明我们真的*不*希望形式语法允许内联复合语句。简单地添加`suite: compound_stmt`会使语法在我阅读时变得模棱两可，其中相同的代码可以用两种或多种不同的含义来解释，两者都不可证伪。

基本上，您所问的是解析错误是设计使然。修改形式语法可以让您的示例中的代码在没有其他有趣内容的情况下工作，但需要仔细注意歧义和其他问题。

另请参阅[Dangling Else](http://en.wikipedia.org/wiki/Dangling_else)，这是一个困扰标准 Algol-60 语言的语法问题。发现这类问题并不总是那么容易，因此对改变有效语法的健康恐惧是一件好事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T18:45:24.577

尝试类似：

```
In [14]: from __future__ import print_function

In [17]: for x in xrange(10): print (x,'is even') if x%2==0 else None
   ....: 
0 is even
2 is even
4 is even
6 is even
8 is even 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T19:05:11.477

你可以试试这个：

```
for y in (x for x in xrange(10) if x % 2 == 0): print y 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T19:06:18.027

如果您想要类似的东西，请使用列表推导：

```
print '\n'.join('{0} is even'.format(x) for x in xrange(10) if x % 2 == 0) 
```

印刷：

```
0 is even
2 is even
4 is even
6 is even
8 is even 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T17:37:50.743

[关于复合语句](http://docs.python.org/2/reference/compound_stmts.html)的 Python 文档说明了***为什么****语法不允许这样*做的*决定*的**原因**：

 *> 一个套件可以是一个或多个以分号分隔的简单语句，位于与标题相同的行上，位于标题的冒号之后，或者它可以是一个或多个在后续行中的缩进语句。只有后一种形式的套件可以包含嵌套的复合语句；以下是非法的，**主要是因为不清楚后面的 else 子句属于哪个 if 子句**：
> 
> ```
> if test1: if test2: print x 
> ```

所以在[wberry](https://stackoverflow.com/users/729627/wberry)的[回答中，关于 Dangling](https://stackoverflow.com/a/12941217/611007) [Else](http://en.wikipedia.org/wiki/Dangling_else)是正确的。*

# nullpointerexception - 如何使用 JList 操作 JList？

> ID：12941109
> 
> 赞同：1
> 
> 时间：2012-10-17T18:42:46.200
> 
> 标签：nullpointerexception, jlist, defaultlistmodel

我有两个 JList，另一个有武器类别（我正在做角色扮演角色创建软件），另一个有该特定类别的项目。我希望根据类别更改项目

目前，每次用户更改类别时，带有项目的 jList 都会交换其 DefaultListModel（每个 DefaultListModel 变量都有不同的项目集），每当用户在更改类别后单击项目时，都会以某种方式产生 NullPointerException。

我试图在网上搜索这个，我已经阅读了 JList 的示例，但我无法解决这个问题。

这是相关代码

```
private void jList1ValueChanged(javax.swing.event.ListSelectionEvent evt) { //Kategory
    String selection = jList1.getSelectedValue().toString();

    if(selection.equals(settings.weapon_classes[0])){
        jList2.clearSelection();
        jList2.setModel(model_l_pistols);
        jList2.validate();

    }
    if(selection.equals(settings.weapon_classes[1])){
        jList2.clearSelection();
        jList2.setModel(model_m_pistols);
        jList2.validate();
    }
}

private void wpn_available_valuechanged_listener(javax.swing.event.ListSelectionEvent evt) {                                                     

     Weapon wpn = new Weapon(); //The details of selected weapon are stored here for desplaying
        try{
            String wpn_name = jList2.getSelectedValue().toString();
            if(jList1.getSelectedValue().equals("Light pistols")){
                wpn = controller.get_Weapon(wpn_name, settings.light_pistols); //Stores right item details from array in settings class
            }
            if(jList1.getSelectedValue().equals("Medium pistols")){
                wpn = controller.get_Weapon(wpn_name, settings.medium_pistols);
            }

        }catch(Exception e){
            System.out.println(e + "String wpn_name = jList2.getSelectedValue().toString();");
        }
} 
```

这是我在使用 NetBeans IDE 运行程序时收到的错误消息（第一行包括我的 try/catch 块打印异常：

```
java.lang.NullPointerExceptionString wpn_name = jList2.getSelectedValue().toString();
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at charcreation.GUI.wpn_available_valuechanged_listener(Unknown Source)
    at charcreation.GUI.access$6900(Unknown Source)
    at charcreation.GUI$67.valueChanged(Unknown Source)
    at javax.swing.JList.fireSelectionValueChanged(JList.java:1765)
    at javax.swing.JList$ListSelectionHandler.valueChanged(JList.java:1779)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:167)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:147)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:194)
    at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:388)
    at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:398)
    at javax.swing.DefaultListSelectionModel.removeSelectionIntervalImpl(DefaultListSelectionModel.java:559)
    at javax.swing.DefaultListSelectionModel.clearSelection(DefaultListSelectionModel.java:403)
    at javax.swing.JList.clearSelection(JList.java:2013)
    at charcreation.GUI.jList1ValueChanged(Unknown Source)
    at charcreation.GUI.access$6800(Unknown Source)
    at charcreation.GUI$66.valueChanged(Unknown Source)
    at javax.swing.JList.fireSelectionValueChanged(JList.java:1765)
    at javax.swing.JList$ListSelectionHandler.valueChanged(JList.java:1779)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:167)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:147)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:194)
    at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:388)
    at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:398)
    at javax.swing.DefaultListSelectionModel.setSelectionInterval(DefaultListSelectionModel.java:442)
    at javax.swing.JList.setSelectionInterval(JList.java:2035)
    at javax.swing.plaf.basic.BasicListUI$Handler.adjustSelection(BasicListUI.java:2731)
    at javax.swing.plaf.basic.BasicListUI$Handler.mousePressed(BasicListUI.java:2687)
    at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:263)
    at java.awt.Component.processMouseEvent(Component.java:6260)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6028)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4235)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2475)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T13:31:50.457

可能的错误可能在这一行

```
String selection = jList1.getSelectedValue().toString(); 
```

`jList1.getSelectedValue()`可以是空值，因此当`toString()`函数调用空值时，它会引发异常

改用它来避免异常

```
String selection = String.valueOf(jList1.getSelectedValue()); 
```

这样，如果它是一个空选择，您将只取回 ; 的字符串值`null`。

# data-structures - Big -Oh 计算（进修帮助）

> ID：12941112
> 
> 赞同：2
> 
> 时间：2012-10-17T18:42:57.183
> 
> 标签：data-structures, big-o

好的，所以我今天晚些时候有一个期中考试，我正在审查的项目之一是 big-O。现在，我在当天完成了家庭作业，并获得了 100%....但我现在找不到它，我不确定我在做什么。Sooo 有人可以解释一下我做错了什么……如果我做对了……也许你知道我为什么怀疑自己？谢谢！

另外，我记得我以前在做作业时使用求和，我会从内到外工作。当我完成每个求和时，我使用一些“公式”来计算最高的 n，然后保留该值并继续进行下一个求和，依此类推，直到求和全部完成。

问题1。

```
sum = 0;
for (i = 0; i < n; i++)
    sum++; 
```

所以，由于我忘记了整个求和方面，我的直觉告诉我这是 O(N)，因为最大运行时间是 N 次......因为它只是一个 for 循环。

问题 2。

```
sum = 0;
for (i = 0; i < n; i++)
    for (j = 0; j < n; j++)
        sum++; 
```

对于这个，我“认为”最高运行时间是 O(N^2)，因为两个循环都依赖于 n，并且每个 if 循环可以在 N * N 处最大化。

问题 3。

```
sum = 0;
for (i = 0; i < n; i++)
    for (j = 0; j < n * n; j++)
        sum++; 
```

这就是我卡住的地方......我觉得我实际上需要使用求和布局以及将它们相加的公式。最里面的循环可以在 n*n 处最大化，所以 n^2。最重要的是，对于最外层的循环，它可以再次在 N 处最大化……所以我猜是 0(N^3)。

问题 4。

```
sum = 0;
for (i = 0; i < n; i++)
    for (j = 0; j < i; j++)
        sum++; 
```

再一次，我对这个更迷失了。内部循环可以最大化 i 次...这取决于 i 然而，这取决于 N...所以...我看到三个最大化的变量，我真的不确定如何比较它们以找到最大化运行。（我真的需要记住求和设置和公式）。

下一个问题也是如此，不知道从哪里开始，我宁愿不尝试，因为我不想在脑海中产生错误的想法。我很肯定，一旦我再次看到公式，它会立即点击，因为我之前得到它......我只是以某种方式丢失了它。任何帮助表示赞赏！

问题 5：

```
sum = 0;
for (i = 0; i < n; i++)
    for (j = 0; j < i * i; j++)
        for (k = 0; k < j; k++)
        sum++; 
```

问题6：

```
sum = 0;
for (i = 1; i < n; i++)
    for (j = 1; j < i * i; j++)
        if (j % i == 0)
           for (k = 0; k < j; k++)
               sum++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:32:38.397

对于问题 4 到 6，我假设 ij 和 k 都是整数，不像 n 是一个变量。我将如何解决这些问题：

例如问题 4

内循环 - 从 0 到 (i-1) 的迭代，这给了我们 i 次迭代。

外循环 - n 个求和

组合 - O(i * n) = O(n) 因为 i 是整数。

# matlab - MATLAB 如何将矩阵转换为带有数字的图形网格？

> ID：12941113
> 
> 赞同：0
> 
> 时间：2012-10-17T18:43:04.133
> 
> 标签：matlab

我正在做一个项目，并试图能够在 MATLAB 中生成一种非常特定类型的图形输出，但不知道该怎么做：

首先，我希望能够获取一个 3x3 矩阵，并生成一个基本上是 3x3 网格的图像，其中的数字是网格上适当空间中的矩阵条目。

如果可能的话，我还希望能够将任意颜色分配给不同的网格方块。

有谁知道一个简单的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:26:53.777

```
a = reshape(1:9, 3,3)
imagesc(a)
grid on
text(1,1,'1', 'fontsize', 18)
set(gca, 'xtick', [0.5,1.5,3.5])
set(gca, 'ytick', [0.5,1.5,3.5])
grid off 
```

试试看。也许它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:56:09.277

您可能需要查看 IMAGE 或 IMAGESC 函数。它将矩阵作为输入并显示一个网格，而每个段（或“像素”）对应于相应的矩阵元素。

例如尝试

```
 imagesc( randn(3,3) ) 
```

IMAGESC 在显示之前将输入值缩放为 0 和 1（与直接获取值的 IMAGE 不同）。

数字到颜色的映射由轴的特定颜色图（参见 COLORMAP 函数）进行调整。

# c# - 以获胜形式移动的对象

> ID：12941114
> 
> 赞同：-1
> 
> 时间：2012-10-17T18:43:10.317
> 
> 标签：c#

我在 Windows 窗体中使用以下代码来移动按钮。但是，按钮在移动时会闪烁。即使我使用的是 SmoothingMode.HighQuality 和 DoubleBuffer。

如何减少按钮的闪烁？

```
 public Form1()
    {
        InitializeComponent();

        this.DoubleBuffered = true;
        this.SetStyle(ControlStyles.DoubleBuffer | ControlStyles.UserPaint | ControlStyles.AllPaintingInWmPaint, true);
        this.UpdateStyles();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        timer1.Enabled = true;
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        this.DoubleBuffered = true;
        if (button1.Location.X > 10 && button1.Location.X < 550)
        {
            Point osp = new Point(button1.Location.X + 1, button1.Location.Y);                
            button1.Location = osp;
        }
        else
        {
            Point osp = new Point(11, button1.Location.Y);
            button1.Location = osp;
        }  
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:59:27.900

尝试使用 Timer 的 Interval 属性来减少每个刻度之间的间隔；

```
private void Form1_Load(object sender, EventArgs e)
{
    timer1.Enabled = true;
    timer1.Interval = 400;
} 
```

**还要从timer1_tick**方法中删除以下代码，因为您已经在表单的初始化中使用它

```
this.DoubleBuffered = true; 
```

# mysql - 随机选择表上的两个不同行

> ID：12941125
> 
> 赞同：2
> 
> 时间：2012-10-17T18:43:46.780
> 
> 标签：mysql, sql

```
| 邮政编码 | 价值 | 标题 |
----------------------------
| 1 | 0 | 标题 1 |
| 2 | 1 | 标题 2 |
| 3 | 1 | 标题 3 |
| 4 | 0 | 标题 4 |
| 5 | 4 | 标题 5 |
```

我试图从我的表中选择两个随机不同的行。有没有办法用 SQL 做到这一点？

我试过了

```
SELECT postid
FROM table
WHERE postid > 0.9
ORDER BY RAND( )
LIMIT 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:51:47.083

试试这个

```
SELECT DISTINCT postid 
FROM tablename
ORDER BY RAND()
LIMIT 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T18:49:22.860

是的，与and`DISTINCT`一起使用：`ORDER BY RAND()``LIMIT`

```
SELECT
  DISTINCT
  postid,
  value,
  title
FROM yourtable
ORDER BY RAND()
LIMIT 2 
```

# c# - c#调用函数后类变量仍然为null

> ID：12941126
> 
> 赞同：0
> 
> 时间：2012-10-17T18:43:59.020
> 
> 标签：c#, class, variables

调用 func1 后，变量 mydata 保持为空。在调试模式下，我看到在 func3 中它将数据设置为字符串。为什么退出函数后不传值？
类示例

```
class myclass
{
    public string mydata;

    public int func1()
    {

        //....
            func2(/**/, mydata);
        //....
        return 1;
    }

    private int func2(/**/,data)
    {
        byte[] arr = new byte[1000];
            //...
                func3(arr,data);
            //...
        return 1;
    }

    private void func3(byte[] arr, string data)
    {
        char[] a = new char[100];
        //...

        data = new string(a);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:47:08.163

默认情况下，参数是按值传递的；这意味着传递的实际上是变量的副本（在引用类型如 的情况下是引用的副本`string`）。当`func3`assigns`data`时，它只修改变量的本地副本。

现在，如果您更改`func2`并`func3`签名以便`data`通过引用传递，您将获得预期的结果：

```
public int func1()
{

    //....
        func2(/**/, ref mydata);
    //....
    return 1;
}

private int func2(/**/,ref string data)
{
    byte[] arr = new byte[1000];
        //...
            func3(arr, ref data);
        //...
    return 1;
}

private void func3(byte[] arr, ref string data)
{
    char[] a = new char[100];
    //...

    data = new string(a);
} 
```

我建议您阅读 Jon Skeet[关于参数传递的文章](http://www.yoda.arachsys.com/csharp/parameters.html)以了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:46:55.447

这是因为所有参数都通过引用传递到方法中。`data = new string(a);` 用新的引用创建一个字符串的新实例。

```
var o = new object(); // reference 1

function void method(object something)
{
   // here we have reference to something in stack, so if we will assign new value to it, we will work with stack copy of a reference.
   something = null; // we removed reference to something in method not initial o instance
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:47:39.040

首先，它是一个**实例**变量，而不是**类**变量。要成为一个类变量，它必须被声明`static`。

其次，你为什么把它作为参数传递给各个函数？你这样做的方式，它在每​​个方法中创建一个单独的字符串，并且不引用原始字符串。直接调用它：

```
private void func3(byte[] arr)
{
    //...
    mydata = new string(a);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:56:40.757

您正在按值传递对字符串的引用`mydata`。这意味着`mydata`在函数返回后仍然会引用同一个对象，无论您在函数内部做什么。如果你想改变字符串`mydata`，你可以通过引用传递引用：

```
public int func1()
{
    //....
        func2(/**/, ref mydata);
    //....
    return 1;
}

private int func2(/**/, ref string data)
{
    byte[] arr = new byte[1000];
        //...
            func3(arr, ref data);
        //...
    return 1;
}

private void func3(byte[] arr, ref string data)
{
    char[] a = new char[100];
    //...

    data = new string(a);
} 
```

# c# - 类 const C# 中的令牌无效

> ID：12941130
> 
> 赞同：-4
> 
> 时间：2012-10-17T18:44:17.370
> 
> 标签：c#

我知道这个问题以前在这里问过，但我找不到我的代码有什么问题。

```
 class Slider
     {
        public int const DEFAULT_SIZE = 20; // Problem is here. Invalid token in class 

    private int rise { get; set; }
    private int run { get; set; }
    private int size { get; set; }

    int positionX = 0;
    int positionY = 0;

    private int leftBoundX { get; set;}
    private int leftBoundY { get; set; }

    private int rightBoundX { get; set; }
    private int rightBoundY { get; set; }

    // Constructor
    Slider()
    {
        size = DEFAULT_SIZE; 
    }

    private void Bound()
    {
        if (positionX > leftBoundX)
            positionX = rightBoundX;
        else if (positionY > leftBoundY)
            positionY = rightBoundY;
        else if (positionX > leftBoundX)
            positionX = rightBoundX;
        else if (positionX > leftBoundX)
            positionX = rightBoundX;
        } 
```

我用谷歌搜索了一些东西，他们告诉我要包括 System.Collection 我做了但仍然是同样的错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T18:45:26.370

`const`修饰符必须在常量类型*之前*。你要：

```
public const int DEFAULT_SIZE = 20; 
```

或者遵循 .NET 命名约定：

```
public const int DefaultSize = 20; 
```

# c - c中的子进程信号处理

> ID：12941132
> 
> 赞同：3
> 
> 时间：2012-10-17T18:44:21.743
> 
> 标签：c, operating-system, fork, parent-child, signal-handling

我需要你的帮助来完成我关于进程之间信号处理的练习。我认为这是一个微不足道的问题，但我无法在任何地方找到答案。我想在文件中从父级打印一些东西，从父级向子级发送信号，子级必须在文件中打印，然后从子级向父级发送信号。

我正在使用的代码是这样的：

```
#include <stdio.h>
#include <sys/types.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <signal.h>
#include <unistd.h>

#define WRITEF 123451  //Random number

FILE *infile;

void writef() {
    fprintf(infile, "Child Starting (%d)\n", getpid());
    printf("Child Starting (%d)\n", getpid());
}

int main() {
    pid_t pid;

    infile = fopen("pid_log.txt","w");
    pid = fork();
    signal(WRITEF, writef);
    if ( pid == 0 ) {
            pause();
            printf("enter child\n");
    }
    else {
            fprintf(infile, "Parent (%d)\n", getpid());
            printf("Parent (%d)\n", getpid());
            kill(pid, WRITEF);
            pause();
            wait((int*)1);
    }

    fclose(infile);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:40:30.300

问题解决了！！！关键是您必须在每次 pause() 之前注册信号（使用信号函数）。此外，您不能使用“用户制造”信号，在我的情况下，我使用了 SIGCONT。

这是我的程序的最终（几乎）版本：

```
#include <stdio.h>
#include <sys/types.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <signal.h>
#include <unistd.h>

FILE *infile;

void noth() {

}

void writec() {
    infile = fopen("pid_log.txt","a+");
    fprintf(infile, "Child (%d)\n", getpid());
    printf("Child (%d)\n", getpid());
    fclose(infile);
}

void writep() {
    infile = fopen("pid_log.txt","a+");
    fprintf(infile, "Parent (%d)\n", getpid());
    printf("Parent (%d)\n", getpid());
    fclose(infile);
}

main() {
    pid_t pid = fork();

    if ( pid == 0 ) {                                               //child process
            signal(SIGCONT,noth);                          //registering signal before pause()
            pause();
            infile = fopen("pid_log.txt","a+");
            printf("Child Starting (%d)\n",getpid());
            fprintf(infile,"Child Starting (%d)\n",getpid());
            fclose(infile);
            while (1) {
                    sleep(2);

                    kill(getppid(), SIGCONT);                       //sending singal to parent

                    signal(SIGCONT, writec);

                    pause();
            }
    }
    else {                                                          //parent process
            infile = fopen("pid_log.txt","a+");
            printf("Parent Starting (%d)\n",getpid());
            fprintf(infile,"Parent Starting (%d)\n",getpid());
            fclose(infile);
            kill(pid, SIGCONT);
            signal(SIGCONT, writep);
            pause();
            while (1) {
                    sleep(2);

                    kill(pid, SIGCONT);

                    signal(SIGCONT, writep);

                    pause();
            }
    }
    return 1;
} 
```

# python - 如何将 Python 模块中的所有方法代理到另一个模块？

> ID：12941135
> 
> 赞同：2
> 
> 时间：2012-10-17T18:44:30.037
> 
> 标签：python

我想在我的应用程序中拥有一个记录到文件的通用日志记录模块。例如在我的 commonlog.py 中我可以有这样的东西：

```
# Python logging module
import logging                                                   

logging.basicConfig(filename="test.log", level=logging.DEBUG) 
```

从应用程序的其他模块中，我想导入这个模块并能够像使用 Python 日志记录模块一样使用它，但不需要复制其所有功能，例如来自模块 test.py：

```
import commonlog

commonlog.debug("debug message")
commonlog.info("info message")
commonlog.ANY_OTHER_METHOD_THAT_BELONGS_TO_LOGGING() 
```

**如何在我的 commonlog 中“代理”来自日志记录模块的所有方法？**

正在做：

```
commonlogging.logging.etc.. 
```

不是一个有效的解决方案，因为它直接使用日志记录模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:54:30.840

我以前从来没有从一个模块“继承”，所以我不知道`from logging import *`在`commonlogging`. 这是显示它似乎可以工作的代码：

```
>>> with open('mylogging.py', 'w') as f:
...     f.write('''from logging import *
... my_customization = "it works"''')
...
>>> import mylogging
>>> print mylogging.my_customization
it works
>>> help(mylogging.log)
Help on function log in module logging:

log(level, msg, *args, **kwargs)
    Log 'msg % args' with the integer severity 'level' on the root logger. 
```

# mongodb - 复合 _ID 并使用 MongoDB 作为复合存储桶存储，通过 C#

> ID：12941136
> 
> 赞同：0
> 
> 时间：2012-10-17T18:44:38.640
> 
> 标签：mongodb, database-design, mongodb-.net-driver, upsert, database

我正在构建一个电子商务系统，该系统使用复合桶散列来有效地对类似项目进行分组。不用说我为什么选择这个系统，我只想说它解决了分布式电子商务系统面临的几个关键问题。

有 11 个桶，它们都是整数，代表各种值。我们将这些字段称为 A 到 K。第 12 个字段 L 是一个产品 ID 数组。将这一切视为一个层次结构，叶级别 (L) 是数据。

我在 MongoDB 中运行了一些初始测试，我将这些数据存储为单独的文档。但是，这并不高效，因为给定的一组 A 到 K 可能有许多 L 值，因此可以将这些值存储为数组。

这给了我两个选择：

1.  插入一个无意义的_id文档id，并在A-K上放一个索引，保证唯一性。我已经对索引进行了一些测试，并且索引的前两列对速度的影响更大。
2.  将 A - K 设为复合 _id，并具有一个文档数据字段：L。

我知道#2 是对 MongoDB 的一种非常规的使用。我不应该这样做有什么技术原因吗？如果没有，使用官方 C# 驱动程序，我将如何执行此插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:48:35.383

如果您选择选项 #2，您也许可以使用[自定义 ID 生成器创建自己的](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-WriteacustomIdgenerator)[优化](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs)复合 ID（使用 AK）。

您是否对[复合键](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys)进行了测试？

# json - REST API 和安全性

> ID：12941143
> 
> 赞同：4
> 
> 时间：2012-10-17T18:45:09.243
> 
> 标签：json, api, rest, authentication, authorization

我计划为我的基于 javascript 的 Web 应用程序和其他开发人员使用的 API 做一个统一的 JSON REST API。

我想做的是让我的 js 应用程序使用用户名/密码对用户进行身份验证，并允许他们访问自己的私有资源。当 API 将被其他开发人员访问时，我想允许他们访问公共资源（同时仍然能够跟踪他们的 API 使用情况），并让他们在用户许可的情况下访问用户的私有数据（授权？） .

现在，我将如何构建这样的 API？哪些库/协议/...在这方面是最好的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:51:45.133

你真的应该看看 Oauth。看看[http://oauth.net](http://oauth.net)

# vba - 如何在 Visual Basic for Applications 中找到有关未知数据类型的更多信息？

> ID：12941144
> 
> 赞同：0
> 
> 时间：2012-10-17T18:45:11.167
> 
> 标签：vba, excel

第三方向我提供了一个带有宏的 Excel 文档，我应该扩展它们的功能。

在查看第三方代码时，我遇到了一些奇怪的数据类型：

```
IUtlPropertySet2
CStandardPropertySet2 
```

它们的使用方式如下：

```
Dim myDataType as IUtlPropertySet2
...
Set myDataType = new CStandardPropertySet2 
```

我已经在他们的所有文件中搜索了这些数据类型，但在任​​何地方都找不到它们。

有人可以阐明这些数据类型可能是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:21:15.933

使用[VBA 对象浏览器](http://office.microsoft.com/en-us/excel-help/HV080557817.aspx)找出它们是什么。

1.  打开您的 Excel 电子表格。
2.  按 Alt+F11 打开 VBA 环境。
3.  按 F2 打开对象浏览器窗口。
4.  在搜索框中输入数据类型的名称，然后单击双筒望远镜图标。
5.  使用搜索结果查找更多信息。

# finite-automata - 如何构造有限自动机

> ID：12941145
> 
> 赞同：1
> 
> 时间：2012-10-17T18:45:10.650
> 
> 标签：finite-automata

我必须创建一个确定性有限自动机，接受偶数为 1 并以 0 结尾的字符串集。我应该将 0 作为该集合中的字符串包含在内吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:47:46.450

> 我应该`0`作为这个集合中的字符串包含吗？

是的

> 我该怎么做？

要构造有限自动机，您需要识别状态和转移。如果您能够识别“不可区分”字符串的等价类，Myhill-Nerode 定理允许您找到有限自动机的必要（和充分！）状态。

从这个意义上说，两个字符串`x`and`y`是无法区分的，如果对于任何其他 string `z`，要么两者`xz`和`yz`都在该语言中，要么两者都不是。

在您的情况下，让我们尝试识别等价类。空字符串在某个等价类中。该字符串`0`位于不同的等效类中，因为您可以将空字符串添加到`0`该语言中并获取一个字符串（而您不能将空字符串添加到空字符串中以获取该语言的字符串）。到目前为止，我们已经找到了两个不同的等价类——一个用于空字符串，一个用于`0`. 在我们的 FA 中，这两者都需要不同的状态。

字符串`1`呢？`0`它与空字符串有区别，因为您可以添加`10`到`1`get `110`，该语言中的字符串，但您不能将其添加到`0`或空字符串中以获取该语言中的字符串。所以我们还有另一个状态。

字符串`00`呢？该字符串不在该语言中，并且不能将其他字符串添加到该字符串中以获得该语言的字符串。这是另一个等价类。事实证明，接下来的字符串`01`和`10`也在这个类中。

该字符串`11`最终与空字符串属于同一类：您可以将语言中的任何字符串添加到该语言中`11`并获取该语言中的另一个字符串。如果您尝试所有长度为 3 的字符串，您会发现所有这些都已属于上述类别之一，您可以在此时停止检查。

所以我们有四种状态——我们称它们`[-]`为 、`[0]`、`[1]`和`[00]`。现在我们找出过渡。

如果你进入`0`，`[-]`你需要去`[0]`……如果你进入`1`，你需要去`[1]`。其余的，只需弄清楚通过添加到规范字符串会得到什么字符串，以及生成的字符串将属于哪个类......然后进入那个状态。

# jquery - scrollTop() 在 Firefox 中返回 0，但在 Chrome 中不返回

> ID：12941150
> 
> 赞同：32
> 
> 时间：2012-10-17T18:45:13.843
> 
> 标签：jquery, html, scrolltop, document-body

不确定是否还有其他问题，如果是这样，我道歉，请不要释放猎犬。

使用 html5 文档类型并在我的滚动侦听器中快速执行 console.log，它告诉我 scrollTop() 值的值。我基本上是这样做的，所以当我滚动过去一个点时，我会改变一个元素的不透明度。我正在使用 MVS 解决方案执行此操作，但我无法将其推送到外部站点，以便您查看。这是一个快速的片段：

```
var opacity = 1;
var scrollTop = $('body').scrollTop();
if (scrollTop > 200) {
   opacity = 0.1;
}
$('#element).css('opacity', opacity); 
```

如果我在 Chrome 中滚动，我会得到一个 console.log(scrollTop); 显示我想要的（即；每次滚动 100 次），当我达到 200 次滚动顶部后，我的不透明度消失了。如果我在 FF 和 IE7+ 中滚动，则每次滚动时 var 都会返回“0”。如果我将 $('body').scrollTop() 更改为 $('document').scrollTop(); 然后我在滚动时得到一个“null”返回。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-17T18:57:00.493

尝试使用`var scrollTop = $(document).scrollTop();`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-17T19:01:37.077

`$(window).scrollTop()`在 Firefox 和 Chrome 中都可以正常工作。

为了验证，在 chrome 和 firefox 中运行以下 jsfiddle：http: [//jsfiddle.net/RBBw5/6/](http://jsfiddle.net/RBBw5/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-02T12:41:49.153

在对 IE9 的怪癖模式有些失望之后，我发现它`$('body').scrollTop()`在 IE9、Chrome 32 和 Firefox 26 中可靠地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T06:11:07.083

使用 var`scrollTop = $('html').scrollTop();`适用于 FireFox

不过，您需要嗅探浏览器（我知道，功能检测，而不是嗅探，但您无法检测到这一点），因为它在 Chrome 中不起作用，请在此处尝试：

[浏览器检测 jQuery 1.9 最简单/最轻的替代品？](https://stackoverflow.com/questions/14365725/easiest-lightest-replacement-for-browser-detection-jquery-1-9)

# facebook - Facebook 共享图像或网站图标未从 GAE 应用重定向链接中显示

> ID：12941151
> 
> 赞同：0
> 
> 时间：2012-10-17T18:45:14.910
> 
> 标签：facebook, google-app-engine, favicon

我有一个托管在 GAE 上的网站，但我使用自己的域名将其重定向到 my-app.appspot.com。当我在 facebook 上分享这个链接时，我看不到任何与之关联的图片，但是当我使用分享直接 my-app.appspot.com 链接时，它工作正常..

与 favicon 相同，当我使用重定向到我的应用程序的链接时，浏览器选项卡上的小图标不显示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:20:17.537

您有两个问题；-)

favicon 问题与浏览器中的缓存有关。如果您在 myapp.appspot.com 的一个页面上看到 favicon 而不是在 www.example.com 上重定向到 myapp.appspot.com，这也是缓存的问题当然，您可以清除浏览器的缓存（请参阅首选项/选项菜单），但一个可靠的方法是用另一个浏览器打开同一页面。

分享按钮 查看 facebook 在 [http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)看到的内容 输入您的域

此信息每 7 天获取一次（即，如果您正确更正了 html，则必须强制更新打开的图表）

要在 facebook 调试工具中显示正确的信息，您需要 1/ 配置您的按钮 2/ 在标题中输入打开的图形标签。

因为您将 www.example.com 域重定向到您的 apppot 网站，所以如果您查看 html，您会看到您的 apppot 包含在 html 标记中。换句话说，html 标头不是您的 GAE 模板中的标头，而是来自重定向包装器的标头。

要完成所有这些工作，请在 FB 按钮代码和打开的图形标签中使用 apppot URL。 [http://developers.connect.facebook.com/docs/reference/plugins/like/](http://developers.connect.facebook.com/docs/reference/plugins/like/) 打开图形标签仅代表您的 FB 对象的内容。FB 按钮的代码是查询打开图形的关键。两个网址必须相同！（好吧，在您完全理解如何填充和查询打开的图表之前都是一样的！）

# php - IMAP 开放流：自签名证书问题

> ID：12941158
> 
> 赞同：5
> 
> 时间：2012-10-17T18:45:44.780
> 
> 标签：php, certificate, imap, self-signed, dovecot

我正在尝试打开非安全（端口 143）IMAP 连接（我使用的是 PHP）：

```
imap_open('{localhost:143/imap}INBOX', USERNAME, PASS); 
```

我得到下一个错误：`Certificate failure for localhost: self signed certificate ...`

行。我试过使用`/novalidate-cert`邮箱参数。然后我得到另一个错误：`Can not authenticate to IMAP server`。

我还尝试结合所有可能的非安全连接参数，例如`/notls`,`/norsh`和`/secure`. 但我总是出错。

这是我正在使用的 Dovecot 配置：

`* OK [CAPABILITY IMAP4rev1 LITERAL+ SASL-IR LOGIN-REFERRALS ID ENABLE IDLE STARTTLS AUTH=LOGIN] Dovecot ready.`

该证书实际上是自签名并使用 openssl 生成的。

问题是：

1.  为什么我使用非安全连接时会出现证书错误？
2.  邮件服务器配置有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-16T06:26:32.847

使用此代码

```
 imap_open('{localhost:143/imap/novalidate-cert/debug}INBOX', USERNAME, PASS); 
```

而不是这个

```
 imap_open('{localhost:143/imap}INBOX', USERNAME, PASS); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:58:48.410

STARTTLS 当然使用证书来启动 TLS 通道，因此您会看到自签名证书错误。`Can not authenticate`，但是，意味着您的用户名和密码错误。尝试使用 telnet 登录以验证您的用户名和密码是否正确

# php - 使用 XMLHttpRequest 将 Html 视频上传发送到 php 文件

> ID：12941160
> 
> 赞同：0
> 
> 时间：2012-10-17T18:45:55.750
> 
> 标签：php, html, file-upload, xmlhttprequest

这是我今天遇到的一个非常简单的问题，这让我非常沮丧：假设我正在通过 HTML 的“选择文件”输入上传视频文件，并且我有一个提交按钮，该按钮调用 onclick java 脚本函数来发送视频到一个 php 文件并通过 XMLhttpRequest() 将有关视频的数据返回到原始页面（像 echo $_FILES[$myvideoupload]['name'] 这样简单的东西）。

这可能吗？

就像现在一样，视频根本没有通过我的 ajax 函数传递到 php 文件。document.getElementByID("stuff") 是否适用于视频文件？还是更多关于我应该如何在 send(var) 中格式化 var？任何关于通过 XMLHttpRequest() 传递文件的想法或知识都会很棒。

这是我在 js 中注释掉的文件尝试的不太棒的代码。希望这可以帮助。

```
<html>
<head>

<link href="jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="jquery.js"></script>
<script src="jquery-ui.js"></script>

<script language="JavaScript" type="text/javascript">

function file_upload(){
    var hr = new XMLHttpRequest();
    var url = "vidcon.php";

    if(document.getElementById('preset_mp4').checked) {
        pr = document.getElementById("preset_mp4").value;
    }else if(document.getElementById('preset_ogg').checked) {
    pr = document.getElementById("preset_ogg").value;
    }else if(document.getElementById('preset_mov').checked) {
    pr = document.getElementById("preset_mov").value;
    }else if(document.getElementById('preset_wmv').checked) {
    pr = document.getElementById("preset_wmv").value;
    }else if(document.getElementById('preset_3gp').checked) {
        pr = document.getElementById("preset_3gp").value;
}

    //var fd = new FormData();
    //fd.append('uploadedfile', document.getElementByID("uploadedfile").files[0]);
    var vars = "preset="+pr;
    hr.open("POST", url, true);
    hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    hr.onreadystatechange = function() {
        if(hr.readyState == 4 && hr.status == 200) {
                var return_data = hr.response;
        document.getElementById("status").innerHTML = return_data;
                }
}

hr.send(vars);
document.getElementById("status").innerHTML = "processing...";
}
</script>
</head>

<body>
<input type="hidden"/>
<form enctype="multipart/form-data" action="" method="POST">
Choose pload:<br> <input id="uploadedfile" name="uploadedfile" type="file" /><br />
</form>
Select Output Format for Conversion (changes will be made to conversion settings) <br>
<div class="field form-inline radio">
<input id="preset_mp4" name="preset" type="radio" value="mp4">mp4<br>
<input id="preset_ogg" name="preset" type="radio" value="ogg">ogg<br>
<input id="preset_mov" name="preset" type="radio" value="mov">mov<br>
<input id="preset_wmv" name="preset" type="radio" value="wmv">wmv<br>
<input id="preset_3gp" name="preset" type="radio" value="3gp">3gp<br>
</div>
<input type="submit" value="Upload File" onClick="javascript:file_upload();"/>
<div id="status"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:56:20.223

您需要使用[`FormData`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)对象通过 ajax 上传文件。就像是

```
var fd = new FormData();
fd.append('preset', pr);
fd.append('videofile', document.getElementByID("videofileinputid").files[0]);
hr.open("POST", url, true); 
hr.onreadystatechange = function() { 
    if(hr.readyState == 4 && hr.status == 200) { 
        var return_data = hr.response; 
        document.getElementById("status").innerHTML = return_data; 
    } 
} 
hr.send(fd); 
document.getElementById("status").innerHTML = "processing..."; 
```

请注意，并非所有浏览器都支持 FormData 对象，但它们是模拟 ajax 文件上传的 js 库。

# javascript - Javascript isEmailValid

> ID：12941161
> 
> 赞同：0
> 
> 时间：2012-10-17T18:45:59.087
> 
> 标签：javascript, function, email-validation

使用 JSLint 我无法让我的 isEmailValid 工作，代码有什么问题？我收到不同的错误消息，例如 local 在使用之前未定义或 @ 无效字符或 ^ 未包含但对于电子邮件它可能有符号“^”？

```
function isEmailValid(email) {
"use strict";
var e = (email.split("@"), local = /[^\w.!#$%&*+-\/=?^_{|}~]/, domain = /[^\w.-]/);
if (e.length !== 2) {
    return false;
}
if (local.test(e[0])) {
    return false;
}
if (e[0].length > 253) {
    return false;
}
if ((e[0][0] === ".") || (/\.\./.test(e[0]))) {
    return false;
}
if (domain.test(e[1])) {
    return false;
}
if (e[1].length > 253) {
    return false;
}
if (e[1][0] === "." || /\.\./.test(e[1]) || e[1][e[1].length - 1] === ".") {
    return false;
}
return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:45:16.213

使用此正则表达式在客户端验证电子邮件地址：

```
/.@./ 
```

然后通过向该地址发送电子邮件来进行真正的服务器端验证。

不符合任何规范的工作电子邮件地址可以并且确实存在。限制用户是没有意义的，因为他们的有效电子邮件地址*看起来*错误，同时允许用户输入*看起来*正确但虚假的电子邮件地址（例如，iwontgiveyoumyrealemailaddress@noreply.com在计算机上*看起来*是真实的，但可能不是）。

[必读](https://stackoverflow.com/a/201378/361684)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:32:55.487

您收到错误是`local`因为您实际上并未将其声明为函数中的局部变量。

[`var`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)不包含或使用括号。因此，无论如何都将它们用作：

```
var e = (email.split("@"), local = /[^\w.!#$%&*+-\/=?^_{|}~]/, domain = /[^\w.-]/); 
```

相当于：

```
local = /[^\w.!#$%&*+-\/=?^_{|}~]/;
domain = /[^\w.-]/;
var e = (email.split("@"), local, domain); 
```

`e`然后将被设置为被评估的括号的结果，它只包含[逗号操作符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)的操作数。所以，最后一行相当于：

```
email.split("@");
local;
var e = domain; 
```

而且，由于这似乎不是您想要的，您可能不想要括号：

```
var e = email.split("@"), local = /[^\w.!#$%&*+-\/=?^_{|}~]/, domain = /[^\w.-]/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:49:34.047

我建议使用正则表达式：

```
function validateEmail(email) { 
   var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
   return re.test(email);
} 
```

另请参阅：[在 JavaScript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

# html - 在 Selenium IDE 中断言元素颜色

> ID：12941162
> 
> 赞同：4
> 
> 时间：2012-10-17T18:46:00.210
> 
> 标签：html, css, selenium, automation, assert

我正在尝试设置一个测试自动化，它会在单击时断言元素颜色。但是，我找不到正确的方法来做到这一点。我是硒新手，我已经尝试了所有可能的方法，但失败了。

HTML：

```
<a class="mg-friend-12345 friend selected" title="test" data-cid="12345" style=""> 
```

CSS：

```
.imweb #mgifting-dialog .mg-friends .friend.selected, .imweb #mgifting-dialog .mg-friends .non-friend.selected {
  background-color: #9DD4FD;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:15:05.557

恕我直言，想法如下：我们只需要在单击之前获取元素的 css 属性（颜色，特别是）。并在单击后获取元素的 css 属性（颜色）。

所以它就像（我在java上工作，我们将使用jsExecutor执行一段javascript来实现getColor函数。它将采用元素的css选择器。并返回它的颜色）：

```
public String jsGetColor(String css){
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        //stringBuilder.append("return x.css('background-color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;
    }

String cssSelectorLink="a[class='mg-friend-12345 friend selected']";
WebElement linkToClick = driver.findElemebt(By.cssSelector(cssSelectorLink));
String colorBeforeClick = jsGetColor(cssSelectorLink);
linkToClick.click();
String colorAfterClick = jsGetColor(cssSelectorLink);
Assert.assertFalse(colorBeforeClick.equals(colorAfterClick)); 
```

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:16:27.507

好吧，我在 intelij IDEA 工作。所以 setUp 编写硒测试，例如如下：

1）安装maven

*   将分发包解压缩，即 apache-maven-3.0.4-bin.zip 到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 C:\Program Files\Apache Software Foundation。将从存档中创建子目录 apache-maven-3.0.4。
*   通过打开系统属性（WinKey + Pause）添加 M2_HOME 环境变量，选择“高级”选项卡和“环境变量”按钮，然后在用户变量中添加 M2_HOME 变量，值为 C:\Program Files\ Apache 软件基金会\apache-maven-3.0.4。确保省略路径周围的任何引号，即使它包含空格。 
*   在同一个对话框中，在用户变量中添加 M2 环境变量，其值为 %M2_HOME%\bin。

2）安装jdk 3）![在此处输入图像描述](../Images/1b44fdc3929dc86df96e68e6bae68dd0.png)

4) 验证您设置的所有环境变量是否正确 ![在此处输入图像描述](../Images/a7af32a203d937521ad0cea86ee48229.png) 5) 运行 intelij IDEA 选择项目结构以设置安装的 JDK ![在此处输入图像描述](../Images/8fca47fa68d37459341e37358a771543.png) 6) 按 New.select jsdk。写入我们安装java的路径，例如C：\ Program Files \ Java \ jdk1.6.0_29 ![在此处输入图像描述](../Images/2e35bd6ab409d1469dc860dfb933fbbf.png) 7）从头开始创建新项目 ![在此处输入图像描述](../Images/c3117cb2dd8130fcf24d55cb6b2fde00.png) 8）maven模块 ![在此处输入图像描述](../Images/8f141f45e623d9a3e92f848da8b051fd.png) 9）![在此处输入图像描述](../Images/3920c6bad3b385eb0fa8decd406bbf41.png) 10）![在此处输入图像描述](../Images/142ca649cdc9717e7b75708d7e1d2f84.png) 11）添加到POM适当的依赖项： ![在此处输入图像描述](../Images/50ae1e3d07aa4bf01d21d964b031213e.png)

```
 <dependency>
 <groupId>org.seleniumhq.selenium</groupId> 
<artifactId>selenium-java</artifactId> 
<version>2.24.1</version> 
</dependency> 
```

12）如果还是有红线下划线，按alt+enter就可以了>>idea应该会自动提示自动导入。

13）项目中的测试结构 ![在此处输入图像描述](../Images/d0c852da716d0b45bc68e3b4e371a9af.png)

14）硒测试的常用结构

```
import com.thoughtworks.selenium.SeleneseTestBase;
import org.junit.After;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;

import java.util.concurrent.TimeUnit;

public class HomePageTest extends SeleneseTestBase{

    static WebDriver driver;

    @Before
    public void openFirefox(){

        driver = new FirefoxDriver();
        driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

    }

    @Test
    public void testHomePage(){
        driver.get("https://www.google.by/");
        WebElement search = driver.findElement(By.xpath("//*[@id=\"gbqfq\"]"));
        search.sendKeys("laptop");
        search.submit();

    }

    @After
    public void closeFirefox(){
        // driver.quit();
    }
} 
```

15) 也不要忘记您可以将您在 selenium IDE 中创建的测试导出为 JUNIT4- selenium 并在 IDEA 中打开它们 ![在此处输入图像描述](../Images/aaf19e3e5c0a8fdd435ca0b7ce86bf13.png)

问候

# sql-server-2008 - SQL Server：如何遍历行并赋值

> ID：12941165
> 
> 赞同：2
> 
> 时间：2012-10-17T18:46:28.223
> 
> 标签：sql-server-2008

我有几张桌子要处理。一个是这样的：

**dbo.userActivity**

```
 userID    Action    Time
   1         25       12:00
   1         10       12:01
   1         12       12:35
   1          6       13:54
   2         10        6:47
   2         42        6:48
   3          8       11:54
   etc. 
```

另一个表是如下所示的时间表：

**dbo.userSchedule**

```
 userID    schedule_start    schedule_stop
   1            07:00            09:00
   2            11:00            12:30
   3            14:00            15:00
  etc. 
```

我需要为每一行做的`dbo.userActivity`是确定每个动作是在 之前的一个小时，在和`schedule_start`之间，在之后的一个小时，还是任何其他时间。`schedule_start``schedule_stop``schedule_stop`

所以我需要`dbo.userActivity`根据时间计算在“之前”、“期间”、“之后”、“其他”的值上附加一列。

我真的不确定如何做到这一点，并希望大家能提供任何帮助。

编辑：

好的，所以我大部分时间都在工作。我刚刚看到了一些我将要处理的真实数据，并注意到活动时间是完整的日期时间戳，而活动时间表是及时的。所以我需要将日期时间转换为我可以比较的东西。

这看起来很有效：

> SELECT * FROM (SELECT CONVERT(TIME, SCANDATE) as scanTime FROM appData) st WHERE st.scanTime <= '6:00' ORDER BY st.scanTime

举个例子。但是当我尝试像这样将它合并到下面的案例语句中时，它不起作用。它将相同的 THEN 应用于每一行。

> ```
> SELECT
>   CASE
>   WHEN EXISTS
>   (
>   SELECT *
>   FROM
>   (
>   SELECT CONVERT(TIME, SCANDATE) as scanTime 
>   FROM appData
>   ) st
>   WHERE st.scanTime <= '6:00'
>   )
>   THEN 'Before 6 am'
> 
>   ELSE '6 am or after'
>   END
> FROM appData 
> ```

对此有什么进一步的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:11:44.107

首先，您需要将列 ( `NULL`) 添加到表中。

```
ALTER TABLE dbo.UserActivity
ADD TimeStatus VARCHAR(6) NULL; 
```

接下来，您将编写更新查询。它可以写成一个`CASE`语句：

```
UPDATE ua
SET ua.TimeStatus =
   CASE
      WHEN CAST(ua.Time AS TIME) >= us.Schedule_Start
         AND CAST(ua.Time AS TIME) <= us.Schedule_stop THEN 'During'
      WHEN CAST(ua.Time AS TIME) >= DATEADD(HOUR, -1, us.Schedule_Start)
         AND CAST(ua.Time AS TIME) <= us.ScheduleStart THEN 'Before'
      WHEN CAST(ua.Time AS TIME) >= us.Schedule_Stop
         AND CAST(ua.Time AS TIME) <= DATEADD(HOUR, 1, us.Schedule_Stop)
         THEN 'After'
      ELSE 'Other'
   END
FROM dbo.UserActivity AS ua
INNER JOIN dbo.userSchedule AS us ON ua.UserId = us.UserId 
```

一旦所有列都有数据，`NOT NULL`如果您已更新应用程序以了解并填充此新列，则可以将该列设置为。

* * *

我还会考虑不将字符串值存储在此表中，而是将一个较小的值存储为引用表的外键。只需 4 个值，您就可`TINYINT`以为您存储的每个 dbo.UserActivity 记录使用并节省空间。

如果您决定走这条路，您只需从参考表中获取值，并将字符串值替换为 ID 值。如果之前 = 0，期间 = 1，之后 = 2，其他 = 3

```
UPDATE ua
SET ua.TimeStatusId =
   CASE
      WHEN CAST(ua.Time AS TIME) >= us.Schedule_Start
         AND CAST(ua.Time AS TIME) <= us.Schedule_stop THEN 1
      WHEN CAST(ua.Time AS TIME) >= DATEADD(HOUR, -1, us.Schedule_Start)
         AND CAST(ua.Time AS TIME) <= us.ScheduleStart THEN 0
      WHEN CAST(ua.Time AS TIME) >= us.Schedule_Stop
         AND CAST(ua.Time AS TIME) <= DATEADD(HOUR, 1, us.Schedule_Stop)
         THEN 2
      ELSE 3
   END
FROM dbo.UserActivity AS ua
INNER JOIN dbo.userSchedule AS us ON ua.UserId = us.UserId 
```

`INNER JOIN`然后，您将使用TimeStatus 参考表获取 UI 的文本值

# javascript - 发送电子邮件而不等待操作完成执行

> ID：12941168
> 
> 赞同：1
> 
> 时间：2012-10-17T18:46:39.587
> 
> 标签：javascript, asp.net, c#-4.0, sendmail

我试图通过在退出页面之前发送电子邮件来避免等待时间。

页面/应用程序在退出之前执行一系列操作，如下所示：

1.  数据库交互
2.  发送电子邮件（向经理更新有关该交易的信息）
3.  退出页面/应用程序。

函数背后的代码：

```
 ExecEntryOnTbl(SQL);// <-- update / insert to database 
    sendMailNote(action);// <-- send mail with notification of update 

    exitTC(action, custid);<-- exit page.

    done via javascript :
    window.location.href = "someOtherPage.aspx"
    from code behind via 
    RegisterClientScriptBlock(...) 
```

我想解决这个问题：

在执行以下操作之前，我怎样才能避免等待`sendMailNote()`完成`exitTC()`。那可能吗 ？

*   更新电子邮件类/方法

    ```
    public static class mail
    {
        public static string aReciver, bSubject, cBody;
        public static void sendMailNoteExc()
        {

            string SmtpServer = "smtp.gmail.com";
            int port = 111;
            string sender = "aaa@bbb.com";
            string ReCiver = aReciver;
            string Subject = bSubject;
            string Body = cBody;
            string account = "acc@domain.com";
            string Pass = "a123456";
            Send(SmtpServer, port, account, Pass, sender, ReCiver, Subject, Body);

        }
        public static void Send(string smtpServer,int Port,string Account, string PassWord, string From, string To, string Subject, string Body)
        {

            MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient(smtpServer);

            mail.From = new MailAddress(From);
            mail.To.Add(To);
            mail.Subject = Subject;
            mail.Body = Body;

            SmtpServer.Port = Port;
            SmtpServer.Credentials = new System.Net.NetworkCredential(Account, PassWord);
            SmtpServer.EnableSsl = true;

            SmtpServer.Send(mail);

        }
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:50:26.087

只要您使用 C# 4.0，您就可以利用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)并`sendMailNote(action)`在后台线程中运行，如下所示：

```
Task.Factory.StartNew(() => sendMailNote(action)); 
```

只需确保添加代码来处理发送电子邮件期间发生的任何异常。然而，更好的解决方案是从用户界面代码中完全删除此逻辑，并在 Windows 服务或云工作者角色等后台任务中执行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T18:55:53.167

在另一个线程中执行。因此，您的主线程不会等待电子邮件发送。

```
ExecEntryOnTbl(SQL);// <-- update / insert to database 

ThreadStart sendMail = delegate()
{
    sendMailNote(action)
};

Thread thread = new Thread(sendMail );
thread.IsBackground = true;
thread.Start();

exitTC(action, custid);<-- exit page.

done via javascript :
window.location.href = "someOtherPage.aspx"
from code behind via 
RegisterClientScriptBlock(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:49:29.730

您可以将电子邮件信息保存到数据库中，并拥有一个实际发送邮件的后台 cron 作业。

# objective-c - viewWillAppear 使用 transitionFromView 调用了两次自定义 segue 动画

> ID：12941169
> 
> 赞同：8
> 
> 时间：2012-10-17T18:46:40.220
> 
> 标签：objective-c, ios, ios6, segue, uistoryboardsegue

我正在寻找使用 curl up 动画执行 segue 以将窗口的根视图控制器替换为另一个视图控制器。这个想法是，在使用 curl up 动画转换 ( ) 到下一个之前，我会`SplashViewController`显示几秒钟。`performSegueWithIdentifier:``LoginViewController`

我创建了一个`UIStoryboardSegue`名为`AnimatedSegue`. 下面是重写`perform`方法的代码：

```
- (void)perform
{
  UIViewController *source = self.sourceViewController;
  UIViewController *destination = self.destinationViewController;

  UIWindow *window = source.view.window;

  [UIView transitionFromView:source.view
                      toView:destination.view
                    duration:1.0
                     options:UIViewAnimationOptionTransitionCurlUp
                  completion:^(BOOL finished) {
                    [window setRootViewController:destination];
                  }];
} 
```

它工作正常，除了在 iOS 6 中（显然不是在 iOS 5 中）该方法在视图控制器`viewWillAppear:`上被调用两次。`destination`似乎它在过渡期间被称为第一次，在执行时被称为第二次`[window setRootViewController:destination];`

请注意，我不想使用导航控制器。`SplashViewController`一旦过渡结束，就会被释放（如预期的那样）。

关于如何解决我的问题的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T03:36:48.120

回答我自己的问题，以防它可以帮助别人......

我最终使用**[Core Animation](https://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coreanimation_guide/introduction/introduction.html)**的[`CATransition`](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CATransition_class/Introduction/Introduction.html)类来创建 segue 的动画而不是 的`UIView`动画方法。

这是我的新`perform`方法的样子：

```
- (void)perform
{
  UIViewController *source = self.sourceViewController;
  UIWindow *window = source.view.window;

  CATransition *transition = [CATransition animation];
  [transition setDuration:1.0];
  [transition setDelegate:self];
  [transition setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]];
  [transition setType:@"pageCurl"];
  [transition setSubtype:kCATransitionFromBottom];

  [window.layer addAnimation:transition forKey:kCATransition];
  [window setRootViewController:self.destinationViewController];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T22:41:49.453

我可能会以不同的方式执行此操作，使用 2 个视图和一个控制器，而不是使用自定义 segue 的 2 个控制器。在您的情节提要中，只需为控制器创建一个空白视图，然后添加两个带有初始视图和一个主视图的 xib 文件（视图类型）。初始视图将作为控制器视图的子视图添加到 viewDidLoad 中，然后使用您所做的相同方法切换出来：

```
@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.splashView = [[NSBundle mainBundle] loadNibNamed:@"SplashView" owner:self options:nil].lastObject;
    [self.view addSubview:self.splashView];
    [self performSelector:@selector(removeSplash) withObject:nil afterDelay:2];
}

-(void)removeSplash {
    self.mainView = [[NSBundle mainBundle] loadNibNamed:@"MainView" owner:self options:nil].lastObject;
    [UIView transitionFromView: self.splashView toView:self.mainView duration:.6 options:UIViewAnimationOptionTransitionCurlUp
                    completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T17:40:44.690

如果你真的，真的想使用`transitionFromView:`我能找到的唯一可行的方法就是创建源视图控制器的屏幕截图，并为其设置动画。

```
- (void)perform
{
    UIViewController *source = self.sourceViewController;
    UIViewController *destination = self.destinationViewController;

    // Create screenshot for animation
    UIGraphicsBeginImageContextWithOptions(source.view.bounds.size, NO, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [source.view.layer renderInContext:context];
    UIImageView *screenShot = [[UIImageView alloc] initWithImage:UIGraphicsGetImageFromCurrentImageContext()];
    UIGraphicsEndImageContext();

    // Put destination view controller and screen shot in place
    UIWindow *window = source.view.window;
    window.rootViewController = destination;
    [window addSubview:screenShot];

    [UIView transitionFromView:screenShot
                        toView:destination.view
                      duration:1.0
                       options:UIViewAnimationOptionTransitionCurlUp
                    completion:^(BOOL finished) {
                    }];
} 
```

`viewWillAppear:`并且它的同类只按预期被调用一次。

# python - 是否可以在 Tornado 中基于模板变量运行 javascript 代码？

> ID：12941173
> 
> 赞同：4
> 
> 时间：2012-10-17T18:46:57.840
> 
> 标签：python, tornado

如果处理程序返回一个变量和一个模板：

```
self.render('page.html', enabled=enabled) 
```

其中`enabled`是一个布尔变量。

到目前为止，我知道我可以做以下事情：

```
{% if enabled %}
    ...
{% end %} 
```

在模板的 HTML 部分中。

但是我们可以在 Tornado 模板中基于这个`enabled`变量有条件地运行一些 javascript 代码吗？换句话说，我们可以在嵌入模板的javascript中访问这个变量的值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T19:41:54.070

当然 - 模板中的任何内容`{% if ... %}` 都 `{ % end %}`只会在`if`表达式为 True 的情况下发送到浏览器。因此，其中的任何内容，无论是`<script >`带有内联 javascript 的`<link>`标签，还是从某个地方导入 javascript 文件的标签，都只会在这种情况下通过网络传输。

您甚至可以在 Javascript 代码本身中放置一个模板`if`或`for`指令，以根据服务器代码已知的条件启用或禁用部分代码。我认为这个，unlinke embedding or not a whole piece of code，不会被认为是一个好的做法——因为它会以不受欢迎的方式纠缠代码的服务器端和客户端。

要从 javascript 访问变量，只需执行以下操作：

var 启用 = {{ 启用 }};

标记内的值`{{...}}`使用服务器变量呈现。

在这种情况下，为了确保 in 的值在`enabled`Python 和 Javascript 之间兼容，您应该使用数字 0 表示 False，使用数字 1 表示 True（因为如果您使用 Python 布尔值，模板将呈现为 `var enabled = True;`- 这不是 javascript 所期望的, 因为 Javascript 中保留的 "true" 是小写的)

唯一的限制是您只能在页面发送到浏览器之前设置服务器端变量。因此，如果您需要在服务器端设置任何取决于用户在所显示页面上的操作的任何变量，这种处理方式将不再适用（仅在页面重新加载时）。使页面在不重新加载的情况下进行交互更新的方法是依赖来自 javascript（以前专门称为“ajax”）的异步通信。

**编辑**- OP进一步询问：

> 这是一个问题：当我将诸如 myvar='foo-bar' 之类的字符串变量返回到模板时，并且在 JS 代码中评估此 {{myvar}} 时，JS 显然将 foo-bar 解释为变量名一个字符串。在这种情况下，它会导致错误，因为 - 表示减法。如何让 JS 将 foo-bar 识别为字符串值？

再次，发生的事情非常简单：`{{ <expr> }}`模板运算符插入结果表达式的字符串表示 - 所以如果你在 python `myvar = "bla"`和模板上有`var myvar = {{ myvar }}`，它会被渲染（并以这种方式发送到客户端浏览器）`var myvar = bla`- 不带引号周围`bla`-这就是javascript将其视为变量名的原因。解决方法是在你的变量周围加上额外的引号，如果它是一个字符串，无论是在 Python 端还是在模板上。

在模板上，您可以： `var myvar="{{ myvar }}"`- 或者，在 Python 端，定义 myvar 时：`myvar = '"%s"' % "bla"`

# c# - C#/ASP.NET 以编程方式生成带有选项的选择元素

> ID：12941176
> 
> 赞同：0
> 
> 时间：2012-10-17T18:47:11.520
> 
> 标签：c#, mysql

我想使用 C#/ASP.NET 生成一个带有选项的选择框。

我该怎么做呢？我可以在 PHP 或 Python 中做到这一点，但是在 C# 中我认为我必须使用 .cs 文件？

我需要在 ASPX 主页面上放置任何控件吗？

我想从 MySQL 数据库中提取名称和 id 列表，插入名称作为要选择的选项，并将 id 作为值，然后将它们全部显示在页面上。

我不确定在这种情况下 C# 如何在 .aspx 和 .aspx.cs 之间进行交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:54:53.313

基本上，您将有一个`Dropdownlist`控件绑定到页面中的`Datasource`控件`.aspx`。该`Datasource`控件将使用您在 web.config 文件中定义的连接字符串来连接到您的 mysql 数据库。

包含当您回发到服务器后的`.aspx.cs`代码，例如，在您的`Dropdownlist`. 如果您使用的是 Visual Studio，则大部分都可以通过 UI 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:53:25.897

```
using System.Web.UI.WebControls;
...
DropDownList ddl = new DropDownList();
ddl.DataSource = [your data source];
ddl.Databind();
ddl.DataTextField = [field to show]
ddl.DataValueField = [value]

Page.Controls.Add(ddl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:54:40.157

您可以在此处找到示例：

[C#/ASP.NET 中的数据绑定下拉列表](https://stackoverflow.com/questions/7071407/databinding-dropdownlist-in-c-asp-net)

[http://www.codeproject.com/Tips/303564/Binding-DropDownList-Using-List-Collection-Enum-an](http://www.codeproject.com/Tips/303564/Binding-DropDownList-Using-List-Collection-Enum-an)

基础知识：

[http://asp.net-tutorials.com/basics/code-behind/#.UH7-zsWlXO4](http://asp.net-tutorials.com/basics/code-behind/#.UH7-zsWlXO4)

一个简单的例子：

.aspx 文件：

```
<body>
<form id="form1" runat="server">
<div>
    <asp:DropDownList ID="myDDL" runat="server" DataTextField="MyTextField" DataValueField="MyValueField" />
</div>
</form> 
```

文件背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!IsPostBack)
  {
    myDDL.DataSource = myDataTable;
    myDDL.DataBind();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:56:20.207

我建议使用本教程中明确解释的 Checkboxlist；

[http://www.aspsnippets.com/Articles/Save-and-Repopulate-Users-selections-from-Database-using-ASP.Net-CheckBoxList.aspx](http://www.aspsnippets.com/Articles/Save-and-Repopulate-Users-selections-from-Database-using-ASP.Net-CheckBoxList.aspx)

# asp.net-mvc - 映射时如何处理循环引用？

> ID：12941180
> 
> 赞同：6
> 
> 时间：2012-10-17T18:47:15.903
> 
> 标签：asp.net-mvc, entity-framework, automapper

以这个数据库为例

**员工**

*   id - 整数 (PK)
*   名称 - varchar

**薪水**

*   id - 整数 (PK)
*   employee_id - int (FK)
*   金额 - 浮动

Entity Framework 将生成类似于以下的模型：

```
public partial class Employee
{
    public Employee()
    {
        this.Salaries = new HashSet<Salary>();
    }
    public int id { get; set; }
    public string name { get; set; }
}

public partial class Salary
{
    public int id { get; set; }
    public int employee_id { get; set; }
    public float amount  { get; set; }
    public Employee employee { get; set; }
} 
```

Emplyee 引用他的 Salary 列表，而每个 Salary 都指向他拥有的员工。这会导致循环引用问题。

我遵循存储库模式并使用 AutoMapper 将 Employee 转移到 EmployeeDTO 并将 Salary 转移到 SalaryDTO。我希望那些 DTO 保留其子关系的信息。但是，我不想递归地这样做。我可以做类似的事情。

```
public partial class EmployeeDTO
{
    public EmployeeDTO()
    {
        this.Salaries = new HashSet<SalaryChildDTO>();
    }
    public int id { get; set; }
    public string name { get; set; }
}

public partial class SalaryChildDTO
{
    public int id { get; set; }
    public float amount  { get; set; }
} 
```

但这将成为维护的噩梦。

我如何告诉 AutoMapper 只映射一个后代，或实现类似的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:21:01.020

我最终选择了 DTO - ChildDTO 路线，因为我找到了一种易于管理的方式。

```
public partial class EmployeeDTO
{
    public int id { get; set; }
    public string name { get; set; }
    public virtual IEnumerable<SalaryChildDTO> Salaries { get; set; } //Notice the Virtual
}

public partial class EmployeeChildDTO : EmployeeDTO
{
    [IgnoreMap] //MAGIC!
    public override IEnumerable<SalaryChildDTO> Salaries { get; set; } //Override! :o
}

public partial class SalaryDTO
{
    public int id { get; set; }
    public int employe_id { get; set; }
    public float amount  { get; set; }
    public virtual EmployeeChildDTO Employee { get; set; } //Notice the Virtual once again
}

public partial class SalaryChildDTO : SalaryDTO
{
    [IgnoreMap] //MAGIC!
    public override EmployeeChildDTO Employee { get; set; } //Override! :o
} 
```

这样，影响子 DTO 的唯一数据库更改是 FK！

我本可以用另一种方式完成它（EmployeeDTO 扩展 EmployeeChildDTO）并避免 Overrides、Virtuals 和 IgnoreMaps，但我想将核心 DTO 保留为基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:22:04.547

我不明白为什么这将是维护的噩梦。我一直在做同样的事情有一段时间了，它对我来说工作得很好。不过要注意的一件事是，您仍然希望在`SalaryChildDTO`班级中使用员工 ID。

# python - 无法识别具有联合登录的新用户

> ID：12941192
> 
> 赞同：0
> 
> 时间：2012-10-17T18:47:49.647
> 
> 标签：python, google-app-engine, openid, federated-identity

我正在使用 Google App Engine Python Federated Login，它使用 OpenID 让用户使用现有帐户登录。我希望用户被引导到一个页面，在那里他们填写一些关于他们的额外信息，例如用户名和简短的简历。现在登录后用户被定向到这个处理程序，然后如果他们有用户名，我希望他们留在这个页面上，否则我希望他们重定向到 /profile

```
class Tester(BlogHandler):
    def get(self):
        global visits
        logout = users.create_logout_url(self.request.uri) 

        user = users.get_current_user()
        if user:
            currentregistereduser = None
            try:
                user_db_qry = User.query(User.theid == user.federated_identity())
                user_db_list = user_db_qry.fetch(1)
                #this is the line that is causing the error
                currentregistereduser = user_db_list[0]
            except IndexError:
                #I could do something here to fix it but I am not sure what
            if currentregistereduser:
                if not currentregistereduser.username:
                    self.redirect("/profile")
                else:
                    self.render("tester.html", user=user, logout=logout) 
```

问题是当我尝试对新用户执行 currentregistereduser = user_db_list[0] 时遇到 IndexError，但它在现有用户上运行良好。有谁知道这可能是什么原因造成的？我必须在我的 /profile 页面上做同样的事情来识别用户，所以我只是将它们重定向到那里并没有多大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:04:00.800

发生这种情况的原因是您对数据存储的查询返回为空（在您的情况下是新用户的情况下是预期的）。解决此问题的一种方法是检查列表是否存在，如果存在，则处理：

```
class Tester(BlogHandler):
    def get(self):
        global visits
        logout = users.create_logout_url(self.request.uri)
        user = users.get_current_user()

        if user:
            currentregistereduser = None
            user_db_qry = User.query(User.theid == user.federated_identity())
            user_db_list = user_db_qry.fetch(1)
            # Check to see if the query returned anything at all - if so, assign
            # the value to currentregistereduser; it not, it will remain None
            if user_db_list:
              currentregistereduser = user_db_list[0]

            if currentregistereduser:
                if not currentregistereduser.username:
                    self.redirect("/profile")
                else:
                    self.render("tester.html", user=user, logout=logout)

        # Assuming the code continues here... 
```

# vb.net - 在 vb 中进行更改

> ID：12941196
> 
> 赞同：-1
> 
> 时间：2012-10-17T18:48:19.977
> 
> 标签：vb.net

> **可能重复：**
> [Visual Basic Friend 错误](https://stackoverflow.com/questions/12925558/visual-basic-friend-error)

我正在尝试创建一个程序来使用不同的子进行更改。到目前为止，我只是在研究美元和季度，但我遇到了一些重大问题。任何人都可以帮忙吗？提前致谢。

```
Option Explicit On
'Option Strict On

Imports System

Module Conversion
  Sub Coin()
    Number = (Number mod 1.00)
    Console.Writeline(Number)
    Number = (Number mod 0.25)
    Console.Writeline(Number)
  End Sub

  Sub Main()
    Console.Write("Enter the Canadian dollar amount: ")
    Dim input As Decimal = Console.ReadLine()
    Dim Number As Decimal = Input
    Coin()
  End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:55:03.637

`Coin`看不见`Number`。您必须像这样传递`Number`参数`Coin()`：

```
Sub Main()
  Console.Write("Enter the Canadian dollar amount: ")
  Dim input As Decimal = Console.ReadLine()
  Dim Number As Decimal = Input
  Coin(Number)
End Sub

Sub Coin(Number as Decimal)
  Number = (Number mod 1.00)
  Console.Writeline(Number)
  Number = (Number mod 0.25)
  Console.Writeline(Number)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:55:54.857

`Number`在`Coin()`方法中未定义。您必须`Coin()`获取参数或使`Number`模块的成员可以访问`Coin()`

例如：

```
Sub Coin(Byval Number as Decimal)
  Number = (Number mod 1.00)
  Console.Writeline(Number)
  Number = (Number mod 0.25)
  Console.Writeline(Number)
End Sub 
```

# ruby-on-rails - Rails 是否有可能拥有一个可以包含两种模型的模型：多个模型的树

> ID：12941204
> 
> 赞同：3
> 
> 时间：2012-10-17T18:48:33.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

本质上，我希望具有以下结构：

```
class Group < ActiveRecord::Base

end

class Person < ActiveRecord::Base

end

Group_1 (parent)
  Group_2 (child)
    Person_1 (grandchild)
    Person_2 (grandchild)
  Person_3 (child)
  Group_3 (child)
    Person_4 (grandchild)
    Group_4 (grandchild)
      Person_5 (great grandchild) 
```

我通过尝试以下 gem 进行了研究：acts_as_tree、ancestry、nested_sets 和closure_tree。

他们能够保持一棵树，这是我面临的挑战的一半；但是他们无法将另一个模型添加到树结构中，因为他们总是期望孩子们是同一个模型。[例如：ActiveRecord::AssociationTypeMismatch: Group (#2179078840) 预期，从closure_tree gem 中得到 Person(#2171128160)]

无论如何，是否有可能让上面定义的结构与树内的两个不同模型一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:57:56.150

本质上，您希望 Person 从 Group 继承。我不知道为什么你会想要这种结构，因为组和人不是同一类型的东西。

也许您想详细说明您尝试共享的功能。在两个非常不同的对象之间共享功能的更“红宝石”方式是通过模块，而不是通过继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:18:17.277

我会使用该`habtm`方法来解决这个问题。但是您可能需要注意如何构建数据库表。Rails 代码看起来是这样的

```
class Group < ActiveRecord::Base
  has_and_belongs_to_many :people, class: Person
end

class Person < ActiveRecord::Base
  has_and_belongs_to_many :groups
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:51:09.113

您是否需要 Tree 附带的功能。如果没有，你可以做一些简单的事情......

在每个对象上放置一个 group_id。一个 nil group_id 意味着它属于根。

```
class Group < ActiveRecord::Base
  belongs_to :group  # The parent

  has_many :groups
  has_many :people
end

class Person < ActiveRecord::Base
  belongs_to :group

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:53:53.527

您可以定义将用于“树节点”的模型。每个节点可以有一个布尔字段来指示它是否是叶子，另一个字段（或多个字段）指向该节点“持有”的组/个人。（如果您只使用一个字段来指向 Group/Person，那么您可以使用多态关联，或者您可以编写一个自定义 SQL 查询，根据 "groups" 或 "people" 的值进行检索叶”字段。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T05:27:02.057

在[closure_tree](http://mceachen.github.com/closure_tree/) [测试](https://github.com/mceachen/closure_tree/blob/master/spec/label_spec.rb#L56)中有一些使用 STI 或单表继承的示例，这就是您想要使用的样子。不过，请阅读 STI——“组”似乎与“组”具有相同类型的字段或行为，因此这可能不是正确的解决方案。

但是，假设它是创建一个数据库迁移，它将一个字符串类型的列添加到您的模型中。我会将该表命名为通用名称，例如“节点”。

```
class AddTypeToNode < ActiveRecord::Migration
  def change
    add_column :nodes, :type, :string
  end
end 
```

然后创建一个基类和你的子类：

```
class Node < ActiveRecord::Base
  abstract_class = true
  acts_as_tree
end

class Group < Node
end

class Person < Node
end 
```

然后你就可以这样做了：

```
g1 = Group.create(:name => "Group_1")
g2 = g1.add_child(Group.create(:name => "Group_2"))
p1 = g2.add_child(Person.create(:name => "Person_1"))
p2 = g2.add_child(Person.create(:name => "Person_2"))
… 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T09:58:56.827

完全工作 *这可以改进，但我只做了你想要的*

* * *

```
gem 'ancestry' 
```

**组.rb**

* * *

```
class Group < ActiveRecord::Base
  attr_accessible :parent_id, :name
  has_many :people
  attr_accessor :relationship
  has_ancestry

  def people_group_children
    (people + children).sort_by(&:created_at)
  end

  RELATIONSHIP = ['parent', 'child', 'grandchild']
  def relationship_by_depth(depth_diff)
    @relationship = RELATIONSHIP[depth_diff] || (depth_diff-2) * 'great ' + RELATIONSHIP[2]
  end

  def arrange_as_desired(ancestor_depth = 0, parent_depth = 0)
    output = '<ul>'.html_safe
    output.safe_concat name + '(' + relationship_by_depth(depth - ancestor_depth) + ')'
    people_group_children.map do |child|
      output.safe_concat '<li>'
      output.safe_concat child.arrange_as_desired(ancestor_depth, depth)
      output.safe_concat '</li>'
    end
    output.safe_concat '</ul>'
    output
  end
end 
```

**人.rb**

* * *

```
class Person < ActiveRecord::Base
  attr_accessible :group_id, :name
  belongs_to :group
  attr_accessor :relationship, :depth
  def parent; group; end

  def people_group_children; []; end

  RELATIONSHIP = ['parent', 'child', 'grandchild']
  def relationship_by_depth(depth_diff)
    @relationship = RELATIONSHIP[depth_diff] || 'great ' * (depth_diff-2) + RELATIONSHIP[2]
  end

  def arrange_as_desired(ancestor_depth = 0, parent_depth = 0)
    output = '<ul>'.html_safe
    @depth = parent_depth + 1
    output.safe_concat name + "(#{relationship_by_depth(depth - ancestor_depth)})"
    people_group_children.map do |child|
      output.safe_concat '<li>'
      output.safe_concat child.arrange_as_desired(ancestor_depth, depth)
      output.safe_concat '</li>'
    end
    output.safe_concat '</ul>'
    output
  end
end 
```

**组\show.html.erb**

* * *

```
<ul>
  <%= raw @group.arrange_as_desired %>
</ul> 
```

* * *

* * *

## 迁移

**create_groups.rb**

* * *

```
class CreateGroups < ActiveRecord::Migration
  def change
    create_table :groups do |t|
      t.string :name
      t.string :ancestry

      t.timestamps
    end
  end
end 
```

**create_people.rb**

* * *

```
class CreatePeople < ActiveRecord::Migration
  def change
    create_table :people do |t|
      t.integer :group_id
      t.string :name

      t.timestamps
    end
  end
end 
```

# sqlite - 将 SQL Server CE 版数据库文件 (.sdf) 转换为 sqlite3 支持的数据库文件

> ID：12941205
> 
> 赞同：0
> 
> 时间：2012-10-17T18:48:41.927
> 
> 标签：sqlite, sql-server-ce

我正在寻找一种方法来支持 sqlite3 上的现有 SQL Server CE 数据库文件 (*.sdf)。有人可以帮我找到将 SQL Server CE 数据库文件 (.sdf) 转换为 sqlite3 支持的数据库文件的方法吗？sqlite3 库是否提供任何实用程序来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:58:22.520

您可以导出为 CSV 文件，然后将其导入 SQLite。但是，CSV 文件不能代表所有数据类型。

[http://exportsqlce.codeplex.com/](http://exportsqlce.codeplex.com/)上的工具允许将数据库导出为 SQL 脚本，然后可以直接在 SQLite 中执行以在那里重新创建它。

# vb.net - 从多个位置的多个文件中获取元数据

> ID：12941208
> 
> 赞同：2
> 
> 时间：2012-10-17T18:48:49.237
> 
> 标签：vb.net, metadata

我正在尝试从多个文件访问元数据。我已经找到了抓取元数据的代码，但我需要能够从不同文件夹中的多个文件中抓取。文件类型都是一样的。这可能吗？如果是这样，是否可以将其添加到当前代码中？

Eventaully，我想获取所有元数据并将其发送到数据库进行比较。

这是我发现我用来从一个位置的 1 个文件中获取它的代码：

```
Imports System
Imports System.Collections.Generic
Imports System.Windows.Forms
Imports System.IO
Imports Shell32

Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Call Main()
End Sub

Sub Main()
    Dim FileName As String
    FileName = "D:\Folder\Folder1\filename.pst"
    Dim Properties As Dictionary(Of Integer, KeyValuePair(Of String, String)) = GetFileProperties(FileName)
    For Each FileProperty As KeyValuePair(Of Integer, KeyValuePair(Of String, String)) In Properties
        ListBox1.Items.Add(FileProperty.Value.Key & ": " & FileProperty.Value.Value)
    Next
End Sub

Public Function GetFileProperties(ByVal FileName As String) As Dictionary(Of Integer, KeyValuePair(Of String, String))
    Dim Shell As New Shell
    Dim Folder As Folder = Shell.[NameSpace](Path.GetDirectoryName(FileName))
    Dim File As FolderItem = Folder.ParseName(Path.GetFileName(FileName))
    Dim Properties As New Dictionary(Of Integer, KeyValuePair(Of String, String))()
    Dim Index As Integer
    Dim Keys As Integer = Folder.GetDetailsOf(File, 0).Count
    For Index = 0 To Keys - 1
        Dim CurrentKey As String = Folder.GetDetailsOf(Nothing, Index)
        Dim CurrentValue As String = Folder.GetDetailsOf(File, Index)
        If CurrentValue <> "" Then
            Properties.Add(Index, New KeyValuePair(Of String, String)(CurrentKey, CurrentValue))
        End If
    Next
    Return Properties
End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:05:31.500

看看下面的代码是否有帮助 -

```
Imports System
Imports System.Collections.Generic
Imports System.Windows.Forms
Imports System.IO
Imports Shell32

Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Call Main()
End Sub

Sub Main()

    Dim dir As New IO.DirectoryInfo("c:\")
    Dim files As IO.FileInfo() = di.GetFiles("*.pst")
    Dim file As IO.FileInfo
    Dim FileName As String

    For Each file In files

        FileName = file.FullName

        Dim Properties As Dictionary(Of Integer, KeyValuePair(Of String, String)) = GetFileProperties(FileName)
        For Each FileProperty As KeyValuePair(Of Integer, KeyValuePair(Of String, String)) In Properties
            ListBox1.Items.Add(FileProperty.Value.Key & ": " & FileProperty.Value.Value)
        Next
    Next
End Sub

Public Function GetFileProperties(ByVal FileName As String) As Dictionary(Of Integer, KeyValuePair(Of String, String))
    Dim Shell As New Shell
    Dim Folder As Folder = Shell.[NameSpace](Path.GetDirectoryName(FileName))
    Dim File As FolderItem = Folder.ParseName(Path.GetFileName(FileName))
    Dim Properties As New Dictionary(Of Integer, KeyValuePair(Of String, String))()
    Dim Index As Integer
    Dim Keys As Integer = Folder.GetDetailsOf(File, 0).Count
    For Index = 0 To Keys - 1
        Dim CurrentKey As String = Folder.GetDetailsOf(Nothing, Index)
        Dim CurrentValue As String = Folder.GetDetailsOf(File, Index)
        If CurrentValue <> "" Then
            Properties.Add(Index, New KeyValuePair(Of String, String)(CurrentKey, CurrentValue))
        End If
    Next
    Return Properties
End Function

End Class 
```

上面的代码将搜索 C:\ 中的所有 .pst 文件并读取属性。要允许不同的文件夹，您需要创建目录数组并根据您的要求从配置文件或任何其他位置读取它们。

# objective-c - 如何获取 UITableView 的分段单元格的索引

> ID：12941209
> 
> 赞同：0
> 
> 时间：2012-10-17T18:48:55.250
> 
> 标签：objective-c, ios, uitableview

我想从分段的表格视图中获取选定单元格的索引号。我为用户提供了将 tableview 从标准切换到分段的选项。当它在标准视图中时，我用这条线得到选定的索引

```
NSString *myIndex = [NSString stringWithFormat:@"%d", inedxPath.row]; 
```

我如何在分段的 TableView 中获得相同的字符串？？？

我一直在玩弄

```
NSString *myIndex = [NSString stringWithFormat:@"%d", indexPath.Section inedxPath.row]; 
```

...希望这是有道理的..Thx ...??????

上下文：我将索引号存储在字典中，当用户返回表格视图时，应用程序应通过将所选单元格中的产品名称文本颜色更改为灰色来提醒他们之前选择的内容...我通过保存所有所选产品的索引号以及它们返回时仅更改我列表中索引的文本颜色。希望有帮助。 ![我的分区表](../Images/cf324c5522ac9e132ae2e47fb2137ada.png)

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:11:08.667

我会将 indexPath 对象本身存储在一个数组中，而不是字典中。然后在您的 tableView:cellForRowAtIndexPath: 方法中使用 if 子句来测试您的数组是否包含 indexPath，如果是，则将该单元格的文本着色为灰色。

编辑后：

如果您创建一个名为 indexPathArray 的可变数组，那么在您的 didSelectRowAtIndexPath: 方法中，添加一行将 indexPath 放入数组中：

```
[self.indexPathArray addObject:indexPath]; 
```

在 tableView:cellForRowAtIndexPath: 方法中，添加此代码以将所选单元格着色为灰色：

```
if ([self.indexPathArray containsObject:indexPath]) 
        cell.textLabel.textColor = [UIColor grayColor]; 
```

您可以将此代码放在上面设置 textLabel 文本值的位置。根据您的应用程序中发生的其他情况，您可能应该在 viewDidAppear 方法中添加一个 [self.tableView reloadData] 行，以便更新表格视图并显示您的灰色文本。

# c# - 如何制作包含主要项目的列表

> ID：12941214
> 
> 赞同：1
> 
> 时间：2012-10-17T18:49:11.320
> 
> 标签：c#, generic-list

我需要一个具有可共享行为的项目列表。

例子：

```
Person class 
```

有 其他物品`List<PhoneNumber>` 只有一个相同`PhoneNumber`有 有`bool IsPrimary``List<EmailAddress>``List<Address>`

想象一下，每个项目 ( `PhoneNumber`, `EmailAddress`, `Address`) 共享相同的接口`ICanBePrimary`，其中包含一个属性的要求，`bool IsPrimary`并且当`List<ICanBePrimary>`列表中只有一个项目可以具有真实值时`IsPrimary`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:53:22.793

最干净的方法是在一个类后面隐藏一个列表，让您枚举内容，并提供其他方法来识别主要项目：

```
class AddressList : List<Address> {
    private int indexOfPrimaryAddress = 0;
    public Address PrimaryAddress {
        get {
            return this[indexOfPrimaryAddress];
        }
        set {
            indexOfPrimaryAddress = this.IndexOf(value);
        }
    }
    // Override more methods to make sure that the index does not become "hanging"
} 
```

一个更简洁的实现会将列表封装在您的`AddressList`类中，并且只公开您想要公开的方法：

```
class AddressList : IList<Address> {
    private int indexOfPrimaryAddress = 0;
    private readonly IList<Address> actualList = new List<Address>();
    // Implement the List<Address> by forwarding calls to actualList
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T18:53:18.103

您可以创建自己的具有*主要项目*概念的专用集合类。

像这样的东西：

```
public class ListWithPrimary<T> : List<T> {
    public bool HasPrimary { get; private set; }
    private T primary;
    public T Primary
    {
        get
        {
            return primary;
        }
        set
        {
            if (!Contains(value)) throw new Exception();
            primary = value;
        }
    }
    public void AddPrimary(T item)
    { 
        Add(item);
        primary = item;
        HasPrimary = true;
    }
    public void ClearPrimary() {
        primary = default(T);
        HasPrimary = false;
    }
    .... 
} 
```

（请注意，以上内容仍然不完整。您必须保持主要项目始终是列表的一部分的不变量。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:25:20.740

*重新发布已删除的内容......正如我们所见......问题不够清楚，需要澄清......但仍然......我回答了这个问题，假设所有答案都是“是”。问题的作者仍然将我的帖子标记为删除……​​即使另一个人不同意作者的观点，版主也做到了。*

我们需要更多信息。

您是否在您的 Person、EmailAddress 和 Address 类中使用或可以使用 INotifyPropertyChanged？

您真的需要 IsPrimary 属性成为您的课程的一部分吗？

**如果你这样做**

然后，您可以在您的项目上监听所有 PropertyChanged 事件（它们是该接口的一部分）并拦截对 IsPrimary 的更改，然后您将检查它是否切换到 ON，然后将所有其他项目上的 IsPrimary 切换到 OFF。

**请记住，这是实现您要求的行为的正确方法。所以是的，这是正确的答案。**

PS。如果您只对“CurrentItem”行为感兴趣，也可以使用 CollectionView 类。

# jquery - 如何使用 JQuery 获取具有相同类的输入值？

> ID：12941215
> 
> 赞同：0
> 
> 时间：2012-10-17T18:49:11.703
> 
> 标签：jquery, html, class, backbone.js, selector

这应该很容易，但我似乎无法正确处理。

```
var totalHours = 0;
this.$(".timesheet-daily-input").each( function () {
    var inputValue = $(this).text();
    var hours = parseInt(inputValue);
    totalHours += (hours == null) ? 0 : hours;
}); 
```

我也尝试过`$(this).val()`，`$(this).html()`但无法从输入字段中获取值。

编辑：抱歉，我知道我忘了提一些事情。“这个”。在每个循环的开始是因为我正在使用主干的模型和集合。第一个“这个”。指有问题的具体型号。它循环了正确的次数，我只是无法获得价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:50:27.790

摆脱`this.`之前`$(".timesheet-daily-input")`并使用`$(this).val()`来获取输入的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:52:13.707

```
var inputValue = $(this).val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:44:51.940

找不到确切的解决方案，但通过选择父 div 并循环遍历它的子元素来改变我的方法。

```
var totalHours = 0;
this.$("#timesheet-daily-entry-fields-container").children().each(function () {
    var inputValue = $(this).val();
    var hours = parseInt(inputValue);
    totalHours += isNaN(hours) ? 0 : hours;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:56:18.917

没有更多代码很难说，但要改变

```
var inputValue = $(this).text();
var hours = parseInt(inputValue);
totalHours += (hours == null) ? 0 : hours; 
```

至

```
var inputValue = $(this).val(); // use val
var hours = parseInt(inputValue, 10); // use 10 as radix
totalHours += isNaN(hours) ? 0 : hours; // compare to NaN instead of null 
```

请注意[`parseInt("09")`is`0`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)并且 parseInt 的结果不能是`null`.

# javascript - 使用 jQuery 将锚属性附加到数组

> ID：12941218
> 
> 赞同：0
> 
> 时间：2012-10-17T18:49:26.960
> 
> 标签：javascript, jquery, arrays, attributes, append

遇到这个问题真的很麻烦，我知道这很简单。谷歌并没有提供太多帮助，因为我不太确定要问什么。所以这是交易：

我有一个锚点列表，需要将每个锚点的两个属性附加到特定格式的数组中。我可以轻松地获取每个元素的属性，但我不确定如何将它们附加到数组中。这就是我要找的东西：

目标数组输出

```
slides = [{
    img: 'img/aaron1.jpg',
    desc: '127'
} 
```

HTML

```
<section id="photoBin">
    <ul>
        <li><a id="test" href="img/aaron1.jpg" title="Photo #127">127</a></li>
        <li><a href="img/aaron2.jpg" title="Photo #128">128</a></li>
        <li><a href="img/aaron3.jpg" title="Photo #129">129</a></li>
        <li><a href="img/aaron4.jpg" title="Photo #130">130</a></li>
        <li><a href="img/aaron5.jpg" title="Photo #131">131</a></li>
        <li><a href="img/aaron6.jpg" title="Photo #132">132</a></li>
    </ul>
</section> 
```

JavaScript

```
var slides = [];

$('li a').each(function(){

    var el = $(this)
        img,
        desc;

        img = el.attr('href');
        desc = el.attr('title').split('Photo #');
}); 
```

谢谢你的帮助！让我们把它归结为容易的声誉:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:54:03.017

您错过了通过 将它们添加到数组的部分[`push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)。

另外，[`split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)给你一个数组；如果您只查找拆分的第二部分（数字），则需要通过索引访问器访问该数组的第二个元素`[1]`：

[http://jsfiddle.net/H4wWX/1/](http://jsfiddle.net/H4wWX/1/)

```
var slides = [];

$('li a').each(function(){
    var el = $(this);

    slides.push({
        img: el.attr('href'),
        desc: el.attr('title').split('Photo #')[1]
    });
}); 
```

您可能还需要考虑对此进行防弹；如果`el.attr('title')`不是字符串或不包含`"Photo #"`，则拆分/索引访问器将抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:52:40.717

```
var slides = [];

$('li a').each(function(){

    var el = $(this)
        img,
        desc;

        img = el.attr('href');
        desc = el.attr('title').split('Photo #');
slides.push({
     img: img ,
    desc: desc 
})
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:52:51.893

小的修改应该可以为您提供所需的内容：

```
var slides = [];

$('li a').each(function(){

    var el = $(this)
        img,
        desc;

    var slide = { img : el.attr('href'),
                  desc: el.attr('title').split('Photo #')[1] };
    slides.push(slide); 
}); 
```

需要注意的是，这不一定是万无一失的。如果标题属性错误或为空，请期待奇怪的 js 错误。在将幻灯片推到阵列之前，您可能需要进行一些测试以确保您得到您期望的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:56:49.730

您想添加以下行，对吗？

```
slides.push({img: img, desc: desc}) 
```

这个问题太简单了，所以你可能需要一些不同的东西吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T18:55:17.077

小提琴：http: [//jsfiddle.net/gromer/zqn43/](http://jsfiddle.net/gromer/zqn43/)

```
var slides = [];

$('li a').each(function(){

    var el = $(this);
    var imgHref= el.attr('href');
    var description = el.attr('title').split('Photo #')[1];

    slides.push({
        img: imgHref,
        desc: description
    });
}); 
```

# css - 基于 Google Maps aAPI v3 的地图不响应 IE 中的鼠标事件

> ID：12941227
> 
> 赞同：0
> 
> 时间：2012-10-17T18:50:11.733
> 
> 标签：css, internet-explorer, google-maps, google-maps-api-3

我使用 Google Maps API 创建了一张地图。在除 IE 之外的所有浏览器中都运行良好，其中地图不响应鼠标 - 没有光标更改，没有鼠标滚轮缩放，根本没有点击事件。通过 IE 开发人员工具中的控制台不会引发任何错误。在找出有问题的部分之前，除了注释掉代码部分之外，我不确定从哪里开始寻找。有没有其他人经历过这个？

示例地图（在 IE 中打开以观察行为）

[http://notinmyneighbourhood.com/mapTest.php](http://notinmyneighbourhood.com/mapTest.php)

提前致谢！

我很确定它与 CSS 有关，因为这个无 CSS（这是一个新词吗？）版本可以正常工作：

[http://notinmyneighbourhood.com/mapTest2.php](http://notinmyneighbourhood.com/mapTest2.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:27:30.293

在 IE 中，您的蒙版位于地图上方，阻止了所有点击。

# wpf - 除非打开 RibbonGroup 下拉菜单，否则 WPF Command CanExecute 事件不会触发

> ID：12941229
> 
> 赞同：0
> 
> 时间：2012-10-17T18:50:17.273
> 
> 标签：wpf, ribbon, ribbon-control, ribboncontrolslibrary, canexecute

我在 RibbonTab 中有大约 5 个 RibbonGroups，每个功能区组包含大约 3-5 个命令。为了适应屏幕上的所有内容，WPF Ribbon 控件会自动将几个 RibbonGroups 折叠到下拉菜单中。到这里为止没有什么特别的。

现在我看到折叠的 RibbonGroups 中的命令的 CanExecute 事件在第一次打开下拉菜单之前不会触发。（这可能是为了提高性能 - 即除非任何命令可见，否则需要触发 CanExecute！？）

在我的应用程序中，逻辑是，如果在 RibbonGroup 中没有启用任何命令（即 CanExecute 为 false），则我们隐藏该 RibbonGroup。但除非所有 CanExecute 都被触发，否则我不知道启用了多少（或所有）命令。

这是 RibbonGroup 的限制还是设计使然？是否有任何解决方法可以手动执行所有 CanExecutes，至少一次，无论命令是否在折叠的 RibbonGroup 中。

顺便说一句，`CommandManager.InvalidateRequerySuggested()`这里也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:56:33.690

RibbonControls 被发现是一个非常幸运的库。考虑迁移到[Fluent Ribbon Control Suite](http://fluent.codeplex.com/)

# c++ - 如何使用 dynamic_bitset<> 制作位副本

> ID：12941232
> 
> 赞同：0
> 
> 时间：2012-10-17T18:50:25.433
> 
> 标签：c++, boost

我有这个功能：

```
void SetCode(dynamic_bitset<> * c) {  
    this->_code = c;  
    this->_size = c->size();  
} 
```

它在哪里说：`this->_code = c`，我想复制`c`并放入`this->_code`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:12:26.510

鉴于这`this->_code`与. 您可以只使用赋值运算符（这需要已经初始化，即ed）：`dynamic_bitset<>``c``_code``new`

```
*_code = *c; 
```

您可能应该从类型中删除指针`this->_code`并在参数中使用引用：

```
class A {
public:
  void foo (boost::dynamic_bitset<T, U>& c)
  {
    _code = c;
  }

private:
  boost::dynamic_bitset<T, U> _code;
}; 
```

你没有提供任何模板参数，`dynamic_bitset`所以我只选择了两个假的。

# php - 具有相等数字范围的PHP MySQL搜索表单

> ID：12941235
> 
> 赞同：0
> 
> 时间：2012-10-17T18:50:39.257
> 
> 标签：php, mysql, forms

我正在尝试制作彩票游戏的搜索形式。我的目的是让表格找到所有抽出的 15 个数字中有 12 个相等的游戏。

我制作了一个表格，但它不起作用，因为它显示了所有包含至少 1 个成功结果的游戏。

我只想出现在每次抽签中匹配 12 个号码的游戏。

sql 文件只包含两行 id 和 numbers：

```
如果不存在 `lotto_table` 则创建表（
  `id` int(4) NOT NULL AUTO_INCREMENT,
  `数字`文本不为空，
  主键（`id`）
) 引擎=MyISAM 默认字符集=latin1 AUTO_INCREMENT=4 ；

--
-- Extraindo dados da tabela `lotto_table`
--

插入`lotto_table`（`id`，`numbers`）值
(3, '01, 04, 06, 07, 08, 09, 10, 11, 12, 14, 16, 17, 20, 23, 24'),
(4, '01, 02, 04, 05, 08, 10, 12, 13, 16, 17, 18, 19, 23, 24, 25'),
(5, '01, 02, 04, 08, 09, 11, 12, 13, 15, 16, 19, 20, 23, 24, 25'),
(6, '01, 02, 04, 05, 06, 07, 10, 12, 15, 16, 17, 19, 21, 23, 25'),
(7, '01, 04, 07, 08, 10, 12, 14, 15, 16, 18, 19, 21, 22, 23, 25'),
(8, '01, 05, 06, 08, 09, 10, 13, 15, 16, 17, 18, 19, 20, 22, 25'),
(9, '03, 04, 05, 09, 10, 11, 13, 15, 16, 17, 19, 20, 21, 24, 25'),
(10, '02, 03, 04, 05, 06, 08, 09, 10, 11, 12, 14, 19, 20, 23, 24'),
(11, '02, 06, 07, 08, 09, 10, 11, 12, 16, 19, 20, 22, 23, 24, 25'),
(12, '01, 02, 04, 05, 07, 08, 09, 10, 11, 12, 14, 16, 17, 24, 25'),
(13, '03, 05, 06, 07, 08, 09, 10, 11, 13, 14, 15, 16, 17, 19, 23'),
(14, '01, 02, 05, 06, 07, 09, 13, 14, 15, 18, 19, 20, 21, 23, 25'),
(15, '01, 02, 04, 06, 08, 10, 12, 15, 16, 18, 19, 21, 23, 24, 25'),
(16, '02, 05, 06, 07, 08, 10, 12, 13, 15, 17, 19, 21, 23, 24, 25'),
(17, '01, 02, 03, 05, 06, 07, 09, 13, 14, 16, 17, 18, 19, 20, 21'),
(18, '02, 06, 07, 08, 10, 11, 14, 15, 17, 18, 19, 20, 22, 23, 24'),
(19, '02, 05, 06, 07, 08, 10, 11, 13, 14, 15, 16, 17, 20, 23, 24'),
(20, '03, 04, 06, 07, 08, 09, 10, 14, 16, 17, 18, 19, 20, 23, 24'),
(21, '01, 02, 04, 05, 08, 11, 14, 16, 18, 19, 20, 22, 23, 24, 25'),
(22, '01, 02, 03, 04, 05, 06, 07, 09, 10, 12, 13, 14, 15, 22, 25'),
(23, '01, 03, 04, 05, 06, 08, 10, 11, 12, 14, 16, 17, 18, 19, 20'),
(24, '01, 02, 03, 05, 07, 10, 11, 14, 17, 19, 20, 21, 23, 24, 25'),
(25, '01, 02, 03, 04, 05, 06, 07, 09, 13, 14, 16, 20, 22, 23, 24'),
(26, '05, 07, 08, 09, 10, 11, 13, 14, 16, 17, 19, 20, 21, 22, 23'),
(27, '03, 06, 08, 10, 11, 12, 13, 14, 15, 18, 20, 21, 22, 24, 25'),
(28, '01, 03, 07, 09, 10, 11, 12, 13, 14, 16, 17, 18, 19, 20, 21'),
(29, '01, 04, 05, 06, 08, 09, 13, 14, 16, 17, 19, 20, 21, 22, 24'),
(30, '01, 02, 03, 04, 06, 07, 08, 11, 14, 17, 19, 20, 21, 22, 23'),
(31, '01, 02, 03, 04, 09, 13, 14, 15, 17, 19, 20, 21, 22, 24, 25'),
(32, '01, 02, 04, 06, 07, 09, 10, 11, 14, 15, 16, 17, 20, 22, 23'),
(33, '01, 02, 05, 07, 08, 10, 11, 12, 14, 16, 19, 20, 21, 23, 24'),
(34, '01, 02, 04, 07, 08, 09, 10, 11, 15, 16, 18, 19, 20, 21, 23'),
(35, '01, 04, 05, 06, 11, 12, 13, 14, 16, 17, 19, 21, 22, 23, 25'),
(36, '01, 04, 05, 07, 08, 10, 11, 14, 17, 19, 20, 21, 22, 23, 24'),
(37, '01, 03, 04, 05, 08, 09, 10, 11, 13, 15, 20, 21, 22, 23, 24'),
(38, '01, 02, 03, 06, 07, 08, 09, 10, 13, 14, 15, 16, 22, 24, 25'),
(39, '02, 07, 08, 09, 11, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24'),
(40, '01, 02, 05, 07, 08, 10, 12, 13, 14, 16, 17, 20, 21, 22, 24'),
(41, '02, 03, 04, 09, 12, 13, 15, 16, 17, 18, 19, 20, 21, 23, 25'),
(42, '01, 03, 04, 05, 06, 08, 11, 12, 14, 15, 17, 21, 22, 24, 25'),
(43, '01, 03, 06, 07, 08, 09, 10, 14, 17, 18, 19, 20, 22, 23, 24'),
(44, '03, 04, 05, 06, 10, 11, 12, 13, 14, 18, 19, 21, 23, 24, 25'),
(45, '01, 02, 03, 05, 07, 09, 14, 16, 17, 18, 19, 21, 23, 24, 25'),
(46, '01, 02, 04, 05, 06, 08, 10, 11, 14, 18, 19, 21, 23, 24, 25'),
(47, '01, 02, 03, 04, 05, 06, 08, 10, 11, 13, 15, 18, 20, 22, 25'),
(48, '02, 05, 06, 07, 11, 13, 15, 16, 17, 18, 19, 20, 21, 22, 23'),
(49, '02, 04, 05, 06, 08, 11, 13, 15, 16, 19, 20, 21, 22, 23, 24'),
(50, '01, 02, 03, 06, 07, 09, 10, 11, 12, 13, 19, 20, 21, 23, 25');

```

搜索表格：

```
<html>
<head>
    <title>Search the Database</title>
</head>

<body>

<form action="search.php" method="post">
 Search:
 <input type="text" name="num1" />,
 <input type="text" name="num2" />,
 <input type="text" name="num3" />,
 <input type="text" name="num4" />,
 <input type="text" name="num5" />,
 <input type="text" name="num6" />,
 <input type="text" name="num7" />,
 <input type="text" name="num8" />,
 <input type="text" name="num9" />,
 <input type="text" name="num10" />,
 <input type="text" name="num11" />,
 <input type="text" name="num12" />,<br />
<input type="submit" name="submit" value="Submit" />
</form>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-31T07:08:27.350

如果数字序列很重要，最好将每个具有一个 id 的数字放在不同的列中，如下所示：

```
CREATE TABLE IF NOT EXISTS `lotto_table` (
  `id` int(4) NOT NULL AUTO_INCREMENT,
  `n1` int(4) NOT NULL,
  `n2` int(4) NOT NULL,
  `n3` int(4) NOT NULL,
  `n4` int(4) NOT NULL,
  `n5` int(4) NOT NULL,
  `n6` int(4) NOT NULL,
  `n7` int(4) NOT NULL,
  `n8` int(4) NOT NULL,
  `n9` int(4) NOT NULL,
  `n10` int(4) NOT NULL,
  `n11` int(4) NOT NULL,
  `n12` int(4) NOT NULL,
  `n13` int(4) NOT NULL,
  `n14` int(4) NOT NULL,
  `n15` int(4) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 
```

然后放数据：

```
INSERT INTO `lotto_table` (`n1`,`n2`,`n3`,`n4`,`n5`,`n6`,`n7`,`n8`,`n9`,`n10`,`n11`,`n12`,`n13`,`n14`,`n15`) 
VALUES
(01, 04, 06, 07, 08, 09, 10, 11, 12, 14, 16, 17, 20, 23, 24),
(01, 02, 04, 05, 08, 10, 12, 13, 16, 17, 18, 19, 23, 24, 25),
(01, 02, 04, 08, 09, 11, 12, 13, 15, 16, 19, 20, 23, 24, 25),
(01, 02, 04, 05, 06, 07, 10, 12, 15, 16, 17, 19, 21, 23, 25),
(01, 04, 07, 08, 10, 12, 14, 15, 16, 18, 19, 21, 22, 23, 25),
(01, 05, 06, 08, 09, 10, 13, 15, 16, 17, 18, 19, 20, 22, 25),
(03, 04, 05, 09, 10, 11, 13, 15, 16, 17, 19, 20, 21, 24, 25),
(02, 03, 04, 05, 06, 08, 09, 10, 11, 12, 14, 19, 20, 23, 24),
(02, 06, 07, 08, 09, 10, 11, 12, 16, 19, 20, 22, 23, 24, 25),
(01, 02, 04, 05, 07, 08, 09, 10, 11, 12, 14, 16, 17, 24, 25),
(03, 05, 06, 07, 08, 09, 10, 11, 13, 14, 15, 16, 17, 19, 23),
(01, 02, 05, 06, 07, 09, 13, 14, 15, 18, 19, 20, 21, 23, 25),
(01, 02, 04, 06, 08, 10, 12, 15, 16, 18, 19, 21, 23, 24, 25),
(02, 05, 06, 07, 08, 10, 12, 13, 15, 17, 19, 21, 23, 24, 25),
(01, 02, 03, 05, 06, 07, 09, 13, 14, 16, 17, 18, 19, 20, 21),
(02, 06, 07, 08, 10, 11, 14, 15, 17, 18, 19, 20, 22, 23, 24),
(02, 05, 06, 07, 08, 10, 11, 13, 14, 15, 16, 17, 20, 23, 24),
(03, 04, 06, 07, 08, 09, 10, 14, 16, 17, 18, 19, 20, 23, 24),
(01, 02, 04, 05, 08, 11, 14, 16, 18, 19, 20, 22, 23, 24, 25),
(01, 02, 03, 04, 05, 06, 07, 09, 10, 12, 13, 14, 15, 22, 25),
(01, 03, 04, 05, 06, 08, 10, 11, 12, 14, 16, 17, 18, 19, 20),
(01, 02, 03, 05, 07, 10, 11, 14, 17, 19, 20, 21, 23, 24, 25),
(01, 02, 03, 04, 05, 06, 07, 09, 13, 14, 16, 20, 22, 23, 24),
(05, 07, 08, 09, 10, 11, 13, 14, 16, 17, 19, 20, 21, 22, 23),
(03, 06, 08, 10, 11, 12, 13, 14, 15, 18, 20, 21, 22, 24, 25),
(01, 03, 07, 09, 10, 11, 12, 13, 14, 16, 17, 18, 19, 20, 21),
(01, 04, 05, 06, 08, 09, 13, 14, 16, 17, 19, 20, 21, 22, 24),
(01, 02, 03, 04, 06, 07, 08, 11, 14, 17, 19, 20, 21, 22, 23),
(01, 02, 03, 04, 09, 13, 14, 15, 17, 19, 20, 21, 22, 24, 25),
(01, 02, 04, 06, 07, 09, 10, 11, 14, 15, 16, 17, 20, 22, 23),
(01, 02, 05, 07, 08, 10, 11, 12, 14, 16, 19, 20, 21, 23, 24),
(01, 02, 04, 07, 08, 09, 10, 11, 15, 16, 18, 19, 20, 21, 23),
(01, 04, 05, 06, 11, 12, 13, 14, 16, 17, 19, 21, 22, 23, 25),
(01, 04, 05, 07, 08, 10, 11, 14, 17, 19, 20, 21, 22, 23, 24),
(01, 03, 04, 05, 08, 09, 10, 11, 13, 15, 20, 21, 22, 23, 24),
(01, 02, 03, 06, 07, 08, 09, 10, 13, 14, 15, 16, 22, 24, 25),
(02, 07, 08, 09, 11, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24),
(01, 02, 05, 07, 08, 10, 12, 13, 14, 16, 17, 20, 21, 22, 24),
(02, 03, 04, 09, 12, 13, 15, 16, 17, 18, 19, 20, 21, 23, 25),
(01, 03, 04, 05, 06, 08, 11, 12, 14, 15, 17, 21, 22, 24, 25),
(01, 03, 06, 07, 08, 09, 10, 14, 17, 18, 19, 20, 22, 23, 24),
(03, 04, 05, 06, 10, 11, 12, 13, 14, 18, 19, 21, 23, 24, 25),
(01, 02, 03, 05, 07, 09, 14, 16, 17, 18, 19, 21, 23, 24, 25),
(01, 02, 04, 05, 06, 08, 10, 11, 14, 18, 19, 21, 23, 24, 25),
(01, 02, 03, 04, 05, 06, 08, 10, 11, 13, 15, 18, 20, 22, 25),
(02, 05, 06, 07, 11, 13, 15, 16, 17, 18, 19, 20, 21, 22, 23),
(02, 04, 05, 06, 08, 11, 13, 15, 16, 19, 20, 21, 22, 23, 24),
(01, 02, 03, 06, 07, 09, 10, 11, 12, 13, 19, 20, 21, 23, 25); 
```

因此您可以创建查询以将每一列与输入数字相匹配

```
SELECT * FROM lotto_table WHERE
   n1=$num1 AND
   n2=$num2 AND
   ....
   ....
   n11=$num11 AND
   n12=$num12; 
```

或为每个输入数字和 concat 操作创建一个 PHP 循环，以编程方式构建查询字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:54:32.600

不要以这种方式存储数字，为每个数字使用单独的行，并制作`numeros`整数数据类型。

然后一个简单的`GROUP BY`查询会给你答案。

因此，您的第一行数据将改为：

```
id    number
3    1
3    4
3    6
3    7
3    8
3    9
3    10
3    11
3    12
3    14
3    16
3    17
3    20
3    23
3    24 
```

一个示例查询是：

```
select id
from lotto_table
where number in (1,4,6,7,8,9,10,11,12,14,16,17)
group by id
having count(*) = 12 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:17:22.587

sql应该是这样的吧？

```
(1, 2, 3, 5, 6, 9, 10, 11, 13, 14, 16, 18, 20, 23, 24, 25),
(2, 1, 4, 5, 6, 7, 9, 11, 12, 13, 15, 16, 19, 20, 23, 24),
(3, 1, 4, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 20, 23, 24),
(4, 1, 2, 4, 5, 8, 10, 12, 13, 16, 17, 18, 19, 23, 24, 25),
(5, 1, 2, 4, 8, 9, 11, 12, 13, 15, 16, 19, 20, 23, 24, 25),
(6, 1, 2, 4, 5, 6, 7, 10, 12, 15, 16, 17, 19, 21, 23, 25),
(7, 1, 4, 7, 8, 10, 12, 14, 15, 16, 18, 19, 21, 22, 23, 25),
(8, 1, 5, 6, 8, 9, 10, 13, 15, 16, 17, 18, 19, 20, 22, 25),
(9, 3, 4, 5, 9, 10, 11, 13, 15, 16, 17, 19, 20, 21, 24, 25),
(10, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 14, 19, 20, 23, 24),
(11, 2, 6, 7, 8, 9, 10, 11, 12, 16, 19, 20, 22, 23, 24, 25),
(12, 1, 2, 4, 5, 7, 8, 9, 10, 11, 12, 14, 16, 17, 24, 25),
(13, 3, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19, 23),
(14, 1, 2, 5, 6, 7, 9, 13, 14, 15, 18, 19, 20, 21, 23, 25),
(15, 1, 2, 4, 6, 8, 10, 12, 15, 16, 18, 19, 21, 23, 24, 25),
(16, 2, 5, 6, 7, 8, 10, 12, 13, 15, 17, 19, 21, 23, 24, 25),
(17, 1, 2, 3, 5, 6, 7, 9, 13, 14, 16, 17, 18, 19, 20, 21),
(18, 2, 6, 7, 8, 10, 11, 14, 15, 17, 18, 19, 20, 22, 23, 24),
(19, 2, 5, 6, 7, 8, 10, 11, 13, 14, 15, 16, 17, 20, 23, 24),
(20, 3, 4, 6, 7, 8, 9, 10, 14, 16, 17, 18, 19, 20, 23, 24),
(21, 1, 2, 4, 5, 8, 11, 14, 16, 18, 19, 20, 22, 23, 24, 25),
(22, 1, 2, 3, 4, 5, 6, 7, 9, 10, 12, 13, 14, 15, 22, 25),
(23, 1, 3, 4, 5, 6, 8, 10, 11, 12, 14, 16, 17, 18, 19, 20),
(24, 1, 2, 3, 5, 7, 10, 11, 14, 17, 19, 20, 21, 23, 24, 25),
(25, 1, 2, 3, 4, 5, 6, 7, 9, 13, 14, 16, 20, 22, 23, 24),
(26, 5, 7, 8, 9, 10, 11, 13, 14, 16, 17, 19, 20, 21, 22, 23),
(27, 3, 6, 8, 10, 11, 12, 13, 14, 15, 18, 20, 21, 22, 24, 25),
(28, 1, 3, 7, 9, 10, 11, 12, 13, 14, 16, 17, 18, 19, 20, 21),
(29, 1, 4, 5, 6, 8, 9, 13, 14, 16, 17, 19, 20, 21, 22, 24),
(30, 1, 2, 3, 4, 6, 7, 8, 11, 14, 17, 19, 20, 21, 22, 23),
(31, 1, 2, 3, 4, 9, 13, 14, 15, 17, 19, 20, 21, 22, 24, 25),
(32, 1, 2, 4, 6, 7, 9, 10, 11, 14, 15, 16, 17, 20, 22, 23),
(33, 1, 2, 5, 7, 8, 10, 11, 12, 14, 16, 19, 20, 21, 23, 24),
(34, 1, 2, 4, 7, 8, 9, 10, 11, 15, 16, 18, 19, 20, 21, 23),
(35, 1, 4, 5, 6, 11, 12, 13, 14, 16, 17, 19, 21, 22, 23, 25),
(36, 1, 4, 5, 7, 8, 10, 11, 14, 17, 19, 20, 21, 22, 23, 24),
(37, 1, 3, 4, 5, 8, 9, 10, 11, 13, 15, 20, 21, 22, 23, 24),
(38, 1, 2, 3, 6, 7, 8, 9, 10, 13, 14, 15, 16, 22, 24, 25),
(39, 2, 7, 8, 9, 11, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24),
(40, 1, 2, 5, 7, 8, 10, 12, 13, 14, 16, 17, 20, 21, 22, 24),
(41, 2, 3, 4, 9, 12, 13, 15, 16, 17, 18, 19, 20, 21, 23, 25),
(42, 1, 3, 4, 5, 6, 8, 11, 12, 14, 15, 17, 21, 22, 24, 25),
(43, 1, 3, 6, 7, 8, 9, 10, 14, 17, 18, 19, 20, 22, 23, 24),
(44, 3, 4, 5, 6, 10, 11, 12, 13, 14, 18, 19, 21, 23, 24, 25),
(45, 1, 2, 3, 5, 7, 9, 14, 16, 17, 18, 19, 21, 23, 24, 25),
(46, 1, 2, 4, 5, 6, 8, 10, 11, 14, 18, 19, 21, 23, 24, 25),
(47, 1, 2, 3, 4, 5, 6, 8, 10, 11, 13, 15, 18, 20, 22, 25),
(48, 2, 5, 6, 7, 11, 13, 15, 16, 17, 18, 19, 20, 21, 22, 23),
(49, 2, 4, 5, 6, 8, 11, 13, 15, 16, 19, 20, 21, 22, 23, 24),
(50, 1, 2, 3, 6, 7, 9, 10, 11, 12, 13, 19, 20, 21, 23, 25), 
```

我拥有的搜索表单是：

```
<?php
mysql_connect ("localhost", "user","pass")  or die (mysql_error());
mysql_select_db ("database");

$num1 = $_POST['num1'];
$num2 = $_POST['num2'];
$num3 = $_POST['num3'];
$num4 = $_POST['num4'];
$num5 = $_POST['num5'];
$num6 = $_POST['num6'];
$num7 = $_POST['num7'];
$num8 = $_POST['num8'];
$num9 = $_POST['num9'];
$num10 = $_POST['num10'];
$num11 = $_POST['num11'];
$num12 = $_POST['num11'];

$sql = mysql_query("select * from lotto_table where numbers like '%$num1%' AND numbers like '%$num2%' AND numbers like '%$num3%' AND numbers like '%$num4%' AND numbers like '%$num5%' AND numbers like '%$num6%' AND numbers like '%$num7%' AND numbers like '%$num8%' AND numbers like '%$num9%' AND numbers like '%$num10%' AND numbers like '%$num11%' AND numbers like '%$num12%'");

while ($row = mysql_fetch_array($sql)){
    echo 'Game: '.$row['id'];
    echo '<br/> Numbers: '.$row['numbers'];
    echo '<br/><br/>';
    }

?> 
```

# android - 仅在活动开始时如何滚动到 Horizo ntalScrollView 的中心？

> ID：12941237
> 
> 赞同：8
> 
> 时间：2012-10-17T18:50:46.337
> 
> 标签：android, android-layout, scrollview, horizontalscrollview

我有一个显示带有水平长图像视图的 howizontalscrollview 的活动。

我需要当活动开始时，horizo​​ntalscrollview 必须滚动到 selft 的中心，而不是开始。

我在谷歌和这里搜索，我找不到路..

这是我的水平滚动视图：

```
 HorizontalScrollView wvScroll = new HorizontalScrollView(this);
    wvScroll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
    iv.setImageBitmap(Util.getRemoteImage("http://mywebsite.com/90.gif"));
    iv.setScaleType(ScaleType.CENTER_CROP);
    wvScroll.addView(iv);
    mainLayout.addView(wvScroll); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:02:59.053

尝试：

```
wvScroll.scrollTo(offsetX, 0); 
```

可能存在时间问题，偏移量将在创建滚动视图之前设置。在这种情况下，`postDelayed()`与`runnable`调用的 a 一起使用`scrollTo`

添加：

要使用 postDelayed()：

```
private Handler mHandler = new Handler(); 
```

在 onCreate 做：

```
mHandler.postDelayed(new Runnable(){
    public void run() {
       wvScroll.scrollTo(offsetX, 0);
    }
}, 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T19:55:38.987

我不确定，但可能你需要有孩子的高度和宽度。像这样：

```
int centerX = wvScroll.getChildAt(0).getWidth()/2;
int centerY = wvScroll.getChildAt(0).getHeight()/2;
wvScroll.scrollTo(centerX, centerY); 
```

# c - 有人能解释一下 C 中这条语句在内存中发生了什么吗？

> ID：12941238
> 
> 赞同：0
> 
> 时间：2012-10-17T18:50:56.867
> 
> 标签：c, arrays, pointers

我有以下 C 代码，我正在尝试理解它。

```
char buffer[128];
A* a = (A*) &buffer[sizeof(A*)]; 
```

起初，我试图这样做，`A* a = (A*) buffer[sizeof(A*)];` 这给了我一个警告，我想这是因为这实际上会给我一个字符`sizeof(A*)`并投射它？另一个困惑是由于 buffer 已经是指向数组第一个元素的指针，为什么我需要一个`&`运算符来获取一个指向`A*`. 有人可以帮助我理解这段代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:55:08.147

有问题的行占用您的 128-byte `buffer`，查看索引`sizeof(A*)`并返回对它的引用，将其转换为 type 的指针`A`。

> 另一个困惑是由于缓冲区已经是指向数组第一个元素的指针，为什么我需要一个 & 运算符来获取一个指向 A* 的指针。

嗯，这是因为，当您`buffer`使用带有 的下标编写数组索引时`[]`，它返回指向缓冲区索引的值，而不是内存位置本身。通过预先`&`获取该数据的内存地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:55:14.977

`(A*)`- 转换为数据结构 A 的指针

`&buffer[]`- 转到缓冲区指向的内存位置

`[sizeof(A*)]`- 使用指向 A 数据结构的指针的大小作为索引

# deployment - 如何避免在 Inno Setup 下重启第三方安装程序？

> ID：12941241
> 
> 赞同：3
> 
> 时间：2012-10-17T18:51:03.470
> 
> 标签：deployment, installation, inno-setup, device-driver

我正在使用[Inno Setup](http://en.wikipedia.org/wiki/Inno_Setup)，我需要安装第三方驱动程序。一切都很好，除了这个第三方安装程序在我的安装脚本终止之前要求重新启动机器。

例子：我需要安装两个驱动，第二个需要第一个，但是第一个驱动需要重启机器。

```
[Run]

Filename: "FirstDriver.msi"; Flags: shellexec waituntilterminated; 
Filename: "SecondDriver.msi"; Flags: shellexec waituntilterminated; 
```

我只想重新启动我的安装完成。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:57:25.357

对我有用的解决方案是：

```
Filename: "{sys}\msiexec.exe"; Parameters: "/package ""{app}\FirstDriver.msi"" /qn /norestart /passive"; Flags: shellexec waituntilterminated; Check: not Is64BitInstallMode; StatusMsg: "Installing my First Driver"; 
```

我需要使用常量来指定 msiexec.exe 的工作目录`{sys}`，以便从 System 文件夹中获取 msiexec.exe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:57:32.177

`/norestart`尝试使用命令行参数调用第三方安装程序：

```
[Run]

Filename: "FirstDriver.msi"; Parameters: /norestart; Flags: shellexec waituntilterminated; 
Filename: "SecondDriver.msi"; Parameters: /norestart; Flags: shellexec waituntilterminated; 
```

**编辑**

有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/7558882/msi-silent-without-rebooting-automatically)问题。

# c# - 带有 2D 运动的罕见物理边缘案例

> ID：12941243
> 
> 赞同：3
> 
> 时间：2012-10-17T18:51:08.367
> 
> 标签：c#, 2d, game-physics, physics

我正在构建一个基于太空船的游戏，但我遇到了一个间歇性问题，我的 Force 的天空火箭飞到了无限远。我假设问题与这些关系船有关：

*   加速度取决于力
*   速度取决于加速度
*   DragForce（力）取决于速度

这是船游戏：[http ://shootr.signalr.net](http://shootr.signalr.net)

这是运动背后的物理方程的重新分解（使其不那么大，组合了一些函数）。

```
double PercentOfSecond = (DateTime.UtcNow - LastUpdated).TotalMilliseconds / 1000;

// Mass = 50
_acceleration += Forces / Mass;

Position += Velocity * PercentOfSecond + _acceleration * PercentOfSecond * PercentOfSecond;
Velocity += _acceleration * PercentOfSecond;

_acceleration = new Vector2();
Forces = new Vector2();

// DRAG_COEFICCIENT = .2,  DRAG_AREA = 5
Vector2 direction = new Vector2(Rotation), // Calculates the normalized vector to represent the rotation
        dragForce = .5 * Velocity * Velocity.Abs() * DRAG_COEFFICIENT * DRAG_AREA * -1;

Forces += direction * ENGINE_POWER; // Engine power = 110000

LastUpdated = DateTime.UtcNow; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:02:47.383

首先，你有一个不适当的操作，只有当你假设向量被初始化为零向量时才会起作用。例如：

```
_acceleration += Forces / Mass; // your code
_acceleration = Forces / Mass; // what it should be 
```

你的部队也应该是：

```
Forces = direction * ENGINE_POWER + dragForce; 
```

如果这对您的问题没有帮助，那么您在计算方向向量时遇到了问题。确保它是标准化的。你的阻力方程看起来不错。但是，请确保添加它而不是减去，因为您已经将 dragForce 乘以 -1。

# hardware - 如何基于 MIPS 转换进程/cpu 核心？

> ID：12941247
> 
> 赞同：0
> 
> 时间：2012-10-17T18:51:32.253
> 
> 标签：hardware, cpu

我想知道如果我有 MIPS 值，我如何找到支持的 cpu 内核/处理器的数量？

例如，我想知道匹配内核/处理器的数量以处理速度`18 trillion instructions / sec.`

考虑到我没有任何处理器速度，我可以使用与数据库相关的每秒匹配数作为处理器速度的测量单位吗？例如每秒 2000 万次匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:20:39.003

公式很简单：

```
target_mips / mips_per_core = number_of_core 
```

但是在这里，你没有`mips_per_core`；相反，您每秒有数据库匹配数。*因此，您必须查看针对特定数据库软件和*体系结构的单个匹配执行了多少指令。

**我建议您在与用于生产数据库的架构相同的计算机上测量数据库的性能。**

# assembly - 汇编程序的错误结果

> ID：12941250
> 
> 赞同：0
> 
> 时间：2012-10-17T18:51:42.710
> 
> 标签：assembly, x86-64, gnu-assembler

有人可以帮我找出以下程序有什么问题吗？我正在阅读“从头开始编程”并尝试将示例转换为 x86-64 程序集。下面的程序在一组数据中找到最大的数。但是当我组装、链接和运行它时，我得到 0。这显然不是最大的数字。它在 32 位寄存器/指令下运行良好，但不是 64 位。

```
# PURPOSE: This program finds the largest value in a set of data.
#
#
# VARIABLES: %rax holds the current value. %rdi holds the largest 
#            value. %rbx holds the current index. data_items is the
#            actual set of data. The data is terminated with a 0.
#

.section .data

data_items:
    .long 76, 38, 10, 93, 156, 19, 73, 84, 109, 12, 21, 0

.section .text
.globl _start
_start:
    movq $0, %rbx
    movq data_items(, %rbx, 4), %rax
    movq %rax, %rdi

loop_start:
    cmpq $0, %rax                     # Have we reached the end?
    je   loop_end
    incq %rbx                         # Increment the index.
    movq data_items(, %rbx, 4), %rax  # Load the next value.
    cmpq %rdi, %rax                   # Is new value larger?
    jle  loop_start
    movq %rax, %rdi                   # New val is larger, store
                                      # it.
    jmp  loop_start

loop_end:
    # The largest value is already in %rdi and will be returned as
    # exit status code.
    movq $60, %rax
    syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:11:26.430

您正在使用 movq 从包含 32 位值的列表中移动 64 位值。那会给你错误的结果。将列表定义为保存 64 位值：将 .long 替换为 .quad 并将 4 替换为 mov 中的 8。

# android - 异步任务和进度对话框有问题吗？

> ID：12941252
> 
> 赞同：0
> 
> 时间：2012-10-17T18:51:49.900
> 
> 标签：android, android-layout, android-asynctask, progress-bar, progressdialog

我是 android 的菜鸟，我试图在启动画面之后的 OnCreate 方法期间显示一个进度对话框。目前，在我的启动画面之后，屏幕黑屏大约 5 秒钟，然后出现布局。我正在使用 Asynctask 进行后台操作，所以我不明白为什么在应用程序初始化时没有出现进度对话框而不是 5 秒的黑色。这仅适用于 Android 3.0 及更低版本。所有后续 sdk 版本都会正确显示进度对话框。任何帮助是极大的赞赏。

```
@Override
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //wakelock
    PowerManager pM = (PowerManager)getSystemService(Context.POWER_SERVICE);
    wL = pM.newWakeLock(PowerManager.FULL_WAKE_LOCK, "Screen Dim");
    wL.acquire();

    LoadingData dataLoaded = new LoadingData();
    dataLoaded.execute("");

    ---code for UI Thread---

    }//--End onCreate

private class LoadingData extends AsyncTask<String, Integer, String> {
    @Override
    protected String doInBackground(String... sUrl) {
        try {
            //TWITTER API CODE HERE

            } catch (Exception e) {
                Log.e("log_tag", "Error parsing data "+ e.toString());
            }
            publishProgress(33);

            //DOWNLOADING IMAGES CODE HERE
            try{

            }catch(Exception e){

            } 
            publishProgress(66);

            //FOREX RATES CODE HERE
            try {

        }catch(JSONException e)        {
         Log.e("log_tag", "Error acquiring forex data "+e.toString());
        }
        publishProgress(100);

        return null;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        dialog = new ProgressDialog (GoldandSilverCoinCalculatorActivity.this);
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setMessage("Loading... please wait");
        dialog.setIndeterminate(false);
        dialog.setMax(100);
        dialog.setProgress(0);
        dialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        dialog.setProgress(progress[0]);
    } 

    @Override       
    protected void onPostExecute(String result) {       
        super.onPostExecute(result);       
        dialog.dismiss();

       }

} 
```

----EDIT---- 我的 OnResume 和 OnPause 方法

```
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    compass.disableCompass();
    super.onPause();
    wL.release();
    lm.removeUpdates(this);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    compass.enableCompass();
    super.onResume();
    wL.acquire();
    lm.requestLocationUpdates(towers, 500, 1, this);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:55:34.693

要在 AsyncTask 中显示进度对话框，请使用 AsyncTask 的 onPreExecute() 方法

```
 @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
        pDialog = new ProgressDialog(YOUR_ACTIVITY.this);
        pDialog.setMessage("Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);   // if true, it enables to dismiss dialog with back button
        pDialog.show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:11:46.340

将您的所有代码行一一注释...看看需要 5 秒

我认为您的问题是以下几行：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
```

应该在 onCreate 的顶部，而不是在获取唤醒锁之后

# jquery - jQuery：为元素分配背景颜色

> ID：12941253
> 
> 赞同：0
> 
> 时间：2012-10-17T18:51:53.473
> 
> 标签：jquery, colors

我对 jQuery 很陌生，我想根据页面加载时的值设置元素的背景颜色。

每个元素都有一个`id`结尾，`"*_hex"`这就是我使用选择器的原因`$("[id$=_hex]")`，每个元素都有`value`一个十六进制颜色。

这是一个示例元素：

```
<input id="product_colors_attributes_382873_hex" type="text" value="#c22424"> 
```

这是我到目前为止提出的代码：

```
$(document).ready(function(){
$("[id$=_hex]").each(function(){
        $(this).css('backgroundColor', $(this).value);
    });
}); 
```

如果我对颜色进行硬编码，它会起作用，但显然`$(this).value`不起作用。有什么线索吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:53:39.777

您应该能够使用`this.value`，不需要 jQuery 来获取输入的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T18:55:16.667

使用`val()`而不是`$(this).value`

```
 $(this).val() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T18:55:08.560

```
$(this).css('backgroundColor', $(this).val()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T18:55:20.253

要使用 jquery 访问值字段，您应该使用函数 val()

```
$(document).ready(function(){
$("[id$=_hex]").each(function(){
        $(this).css('backgroundColor', $(this).val());
    });
}); 
```

# devise - 如何自定义（Rails）设计以“new”、“edit”等结尾的路线？

> ID：12941261
> 
> 赞同：0
> 
> 时间：2012-10-17T18:52:03.703
> 
> 标签：devise, routes, ruby-on-rails-3.2, customization

这是我的 config/route.rb 的设计部​​分：

```
devise_for :admin_utilisateurs, :path_names => { :sign_up => 'enregistrer',
                                                 :sign_in => 'connexion',
                                                 :sign_out => 'deconnexion',
                                                 :password => 'mot_de_passe',
                                                 :unlock => 'deverouiller'},
                                :path => 'identification' 
```

这导致以下结果`rake routes`：

```
 new_admin_utilisateur_session GET    /identification/connexion(.:format)             devise/sessions#new
            admin_utilisateur_session POST   /identification/connexion(.:format)             devise/sessions#create
    destroy_admin_utilisateur_session DELETE /identification/deconnexion(.:format)           devise/sessions#destroy
           admin_utilisateur_password POST   /identification/mot_de_passe(.:format)          devise/passwords#create
       new_admin_utilisateur_password GET    /identification/mot_de_passe/new(.:format)      devise/passwords#new
      edit_admin_utilisateur_password GET    /identification/mot_de_passe/edit(.:format)     devise/passwords#edit
                                      PUT    /identification/mot_de_passe(.:format)          devise/passwords#update
cancel_admin_utilisateur_registration GET    /identification/cancel(.:format)                devise/registrations#cancel
       admin_utilisateur_registration POST   /identification(.:format)                       devise/registrations#create
   new_admin_utilisateur_registration GET    /identification/enregistrer(.:format)           devise/registrations#new
  edit_admin_utilisateur_registration GET    /identification/edit(.:format)                  devise/registrations#edit
                                      PUT    /identification(.:format)                       devise/registrations#update
                                      DELETE /identification(.:format)                       devise/registrations#destroy
       admin_utilisateur_confirmation POST   /identification/confirmation(.:format)          devise/confirmations#create
   new_admin_utilisateur_confirmation GET    /identification/confirmation/new(.:format)      devise/confirmations#new
                                      GET    /identification/confirmation(.:format)          devise/confirmations#show
             admin_utilisateur_unlock POST   /identification/deverouiller(.:format)          devise/unlocks#create
         new_admin_utilisateur_unlock GET    /identification/deverouiller/new(.:format)      devise/unlocks#new
                                      GET    /identification/deverouiller(.:format)          devise/unlocks#show 
```

我该如何更改？例如，路线：

```
/identification/deverouiller/new 
```

进入

```
/identification/deverouiller/nouveau 
```

如果我添加`:new => 'nouveau'`到`:path_names`哈希中，那是行不通的。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-14T13:49:40.407

一种不需要使用额外 gem 的解决方案是使用带有**path_names**选项的范围：

```
scope path_names: { new: 'creer', edit: 'modifier' } do

   devise_for :users

end 
```

有关详细信息，请参阅[http://guides.rubyonrails.org/routing.html#overriding-the-new-and-edit-segments](http://guides.rubyonrails.org/routing.html#overriding-the-new-and-edit-segments)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:35:10.223

看起来[`rails-translate-routes`gem](https://github.com/francesc/rails-translate-routes)可以帮助解决这个问题。查看Fabio Akita 的这篇博文中的**I18n 路由部分：** [Minimal I18n with Rails 3.2](http://rubylearning.com/blog/2012/07/24/minimal-i18n-with-rails-3-2/)，详细了解如何使用 gem - 与 devise 结合 - 将完整的 URL 转换为本地语言。

# spring - 我可以在 tomcat 上使用一个休眠持久性单元并在部署的战争之间共享它吗？

> ID：12941265
> 
> 赞同：0
> 
> 时间：2012-10-17T18:52:27.473
> 
> 标签：spring, hibernate, tomcat, jpa, persistence-unit

我有一个在 tomcat 上运行的应用程序，我们有多个战争。

1.  War1 是一个用于配置数据库的 Web 应用程序。
2.  War2 用于通过网络服务上传数据。
3.  War3 用于通过 Web 服务获取数据。
4.  War4 是另一个用于在仪表板中查看数据的 Web 应用程序。

我们使用hibernate/jpa 和spring。这些类是带注释的，我们没有任何一个persistence.xml。所有配置都在 spring 上下文文件和注释中。这是弹簧文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:flow="http://www.springframework.org/schema/webflow-config"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xmlns:osgi="http://www.springframework.org/schema/osgi"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:cache="http://www.springframework.org/schema/cache"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
          http://www.springframework.org/schema/webflow-config http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd
          http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd
          http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi-3.0.xsd
          http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
          http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
          http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
          http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
">
    <tx:annotation-driven transaction-manager="transactionManager"/>
    <!-- Directory to scan for repository classes -->
    <jpa:repositories
        base-package="com.blah.db.model.repository" />
    <bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>/WEB-INF/configuration.properties</value>
            </list>
        </property>
    </bean>
    <cache:annotation-driven />
        <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager" p:cache-manager-ref="ehcache"/>
        <bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
                    p:config-location="/WEB-INF/ehcache.xml"
                    p:shared="true"/>
    <context:component-scan base-package="com.blah.db.model.service" />
    <context:component-scan base-package="com.blah.business.objects" />
    <context:component-scan base-package="com.blah.data.access.objects" />
    <context:component-scan base-package="com.blah.common" />

    <bean class="org.springframework.orm.jpa.JpaTransactionManager"
      id="transactionManager">
        <property name="entityManagerFactory"
            ref="entityManagerFactory" />
        <property name="jpaDialect">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
        </property>
    </bean>
    <bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="packagesToScan" value="com.blah.db.model"  />
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="generateDdl" value="${hibernate.generate.ddl}" />
                <property name="database" value="${hibernate.database}" />
                <property name="showSql" value="${show.sql}" />
            </bean>
        </property>
        <property name="jpaProperties">
            <map>
                <entry key="hibernate.default_schema" value="${default.schema}"/>
                <entry key="hibernate.dialect" value="${jdbc.hibernate.dialect}"/>
                <entry key="hibernate.id.new_generator_mappings" value="${new.generator.mappings}"/>
                <entry key="hibernate.cache.region.factory_class" value="${hibernate.cache.factory.class}"/>
                <entry key="hibernate.cache.use_second_level_cache" value="${hibernate.use.second.level.cache}"/>
                <entry key="hibernate.cache.use_query_cache" value="${hibernate.use.query.cache}"/>
                <entry key="net.sf.ehcache.configurationResourceName" value="${ehcache.config.file}"/>
            </map>
        </property>
    </bean>
    <bean id="dataSource"
      class="org.apache.commons.dbcp.BasicDataSource"
      destroy-method="close">
        <property name="driverClassName" value="org.postgresql.Driver" />
        <property name="url" value="jdbc:postgresql://127.0.0.1:5432/blah" />
        <property name="username" value="postgres" />
        <property name="password" value="password" />
    </bean>
    <bean id="openSessionInViewInterceptor" class="org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor">
        <property name="entityManagerFactory">
            <ref local="entityManagerFactory"/>
        </property>
        <property name="jpaProperties">
            <map>
                <entry key="singleSession" value="true"/>
                <entry key="flushModeName" value="FLUSH_AUTO"/>
            </map>
        </property>
    </bean>
</beans> 
```

我如何确保所有战争都使用一个持久性单元？我希望能够使用ehcache，但我知道如果他们都使用自己的PU，我将无法使用它。

我唯一的选择是迁移到 JavaEE 并将其全部打包在 EAR 中吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:24:18.983

在应用程序之间共享一个持久性单元意味着在共享的 tomcat 文件夹中部署您的公共类，这与用您的舌头清理装载的霰弹枪一样安全。

如果您需要共享缓存，请使用 ehcache，使用[terracotta](http://terracotta.org/products)作为堆外缓存。这个解决方案将很简单，而且风险肯定更小。

另一种选择是将这 4 个应用程序合并为一个更大的应用程序，如果它们都共享相同的数据，这可能是有意义的。

# java - Java 中的 replace() 和 replaceAll()

> ID：12941266
> 
> 赞同：7
> 
> 时间：2012-10-17T18:52:30.800
> 
> 标签：java, regex, string, replace, replaceall

以下代码使用Java`replace()`中类的方法。`String`

```
String a = "abc/xyz";
System.out.println(a.replace("/", "\\")); 
```

`/`在给定的字符串`a`中被替换为`\`.

如果我们使用`replaceAll()`如下方法，同样的事情是错误的。

```
System.out.println(a.replaceAll("/", "\\")); 
```

它会导致`java.lang.StringIndexOutOfBoundsException`抛出异常。它需要两个额外的反斜杠`\`，如下所示，因为`replaceAll()`使用的正则表达式与该`replace()`方法不同。

```
System.out.println(a.replaceAll("/", "\\\\")); 
```

唯一的问题是为什么这种方法在只使用两个像这样的斜线时会`a.replaceAll("/", "\\")`抛出`java.lang.StringIndexOutOfBoundsException`？

* * *

`split()`另一方面，该方法最初发出警告`Invalid regular expression: Unexpected internal error`（我使用的是 NetBeans 6.9.1）。

```
String b="abc\\xyz";
System.out.println(b.split("\\")[0]+b.split("\\")[1]); //Issues a warning as specified. 
```

尝试运行它会导致`java.util.regex.PatternSyntaxException`抛出异常。

由于它使用 regex 之类的正则表达式`replaceAll()`，因此需要四个反斜杠。

```
System.out.println(b.split("\\\\")[0]+b.split("\\\\")[1]); 
```

为什么`a.replaceAll("/", "\\\\");`在前面的例子中没有发出这样的警告或这样的运行时异常，即使它有一个无效的模式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T18:56:08.600

来自 Javadoc [String.replaceAll](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

> 请注意，`\`替换字符串中的反斜杠 ( ) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；请参阅 Matcher.replaceAll。如果需要，使用 Matcher.quoteReplacement(java.lang.String) 来抑制这些字符的特殊含义。

```
System.out.println(a.replaceAll("/", Matcher.quoteReplacement("\\"))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T19:02:27.570

> 为什么这个方法在只使用两个斜杠时会抛出 java.lang.StringIndexOutOfBoundsException？

如您所知，`\`是正则表达式中的元字符。当您`\`在正则表达式中使用时，它后面总是跟着另一个字符，例如`\d or \s`.

`java.lang.StringIndexOutOfBoundsException`当它尝试评估**模式字符串 ITSELF** ie`\\`并且**找不到后续字符**时，您的异常即将到来，这在这种情况下是强制性的。这不会出现在参数字符串上`a`——> abc/xyz，因为它试图在下面做：

```
if (nextChar == '\\') {  //<-- \\ is read here
    cursor++;

    //<--Its attempting to read next character and fails
    nextChar = replacement.charAt(cursor); 
    result.append(nextChar);
    cursor++;
} 
```

# windows-phone-7 - 如何在用于 Windows Phone 开发的 TextBlocks 上实现类似于 WrapWithOverflow 的行为？

> ID：12941269
> 
> 赞同：0
> 
> 时间：2012-10-17T18:52:42.933
> 
> 标签：windows-phone-7, xaml, expression-blend

我在 Expression Blend 4 中工作并为 Windows Phone 7.1 开发。我想为该`Wrap`属性实现类似的东西，`WrapWithOverflow`但是根据 Blend 帮助文件，此选项仅在 WPF 中可用 - 唯一可用的行为是`Wrap`和`NoWrap`。

`WrapWithOverflow`将单词换行，但如果一个单词比它长，`TextBlock`它会将其剪短，而不是将单词换行。

我将如何使用 XAML 并最好使用 Blend 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:46:02.257

所以我有一种解决方法。

1.  设置剪切路径。通过创建`Rectangle`与 相同的大小来执行此操作`TextBlock`，选择第`TextBlock`一个然后 Ctrl 选择`Rectangle`第二个并选择“对象 -> 路径 -> 制作剪切路径”。
2.  在 Visual Studio 中的代码隐藏上创建一个`IValueConverter`（因为文本是数据绑定的）。如果文本未绑定数据，则手动格式化。转换器插入换行符代替空格 - 由于各种原因，这并不理想，但对于我的目的来说已经足够了。我最终得到的代码显示在底部。
3.  `IValueConvertor`在绑定对话框的高级部分插入。

```
public class WordsOnNewlines : System.Windows.Data.IValueConverter
{
    public object Convert(object value, Type targetType,
        object parameter, CultureInfo cultureInfo)
    {
        string s = (string)value;
        return s.Replace(" ", System.Environment.NewLine);
    }

    public object ConvertBack(object value, Type targetType,
        object parameter, CultureInfo cultureInfo)
    {
        return null;    
    }
} 
```

# html - 防止背景图像在 CSS 中移动或平铺

> ID：12941270
> 
> 赞同：6
> 
> 时间：2012-10-17T18:52:43.343
> 
> 标签：html, css, background

我试图让背景在文本滚动时保持静止，并将图像居中并防止平铺或重复。就目前而言，我可以得到它，但不能同时得到。目前我的样式表以这种方式处理它。

```
{
background: url(LOCATION OF PIC FILE) repeat fixed;
height: 610px;
text-align: center;
margin: 0 auto;
overflow: hidden;
} 
```

据我所知高度：610px；限制文本可以向上滚动的距离，我想保留它。我试图更改“重复固定”部分，但没有得到我想要的结果。我试过这个...

```
{
background-repeat: no-repeat;
background-attachment: fixed;
background-position: center;
height: 610px;
} 
```

...在 HTML 中使用这个 ..

```
<div id="intro">
<img src="IMAGE SOURCE" width="100%" height="100%">
</div> 
```

但这并不能保持背景固定......

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T03:41:49.043

在查看了您的 CSS 之后，我注意到了一些可以通过稍微调整来解决的冲突。首先，我绝对建议您使用浏览器 Web 开发工具（例如 Firebug）进行更改和调整。我发现它可以节省您的耐心和挫败感。

我遇到的解决方案如下：

```
.body{
    background-image: url('../images/go_here.png');
    background-repeat:repeat-x;
    background-attachment:fixed;
    background-position: left top;
    position:absolute;
    height:610px
    width: ?px;
    margin:0;
   } 
```

如果您希望背景水平重复，请使用 background-repeat: x-axis; 垂直，背景重复：y轴；。为了确保背景不滚动，请使用 background-attachment: fixed;。背景位置应该使用两个单词或两个数字测量值（例如中心中心/左上/右上/右中/左中/右下或 0px 0px）。因为你希望背景有一个高度，我假设一个宽度；元素的位置必须是绝对的。如果您决定使用浮动，则主容器或背景必须是绝对的。

我的建议是，如果您想将文本附加到背景，这取决于您。根据我的经验，我发现最好将文本与背景分开。从长远来看，它只会减少头痛。我将文本编码如下：

```
 .text{
       text-align: center;
       overflow: hidden;
       height: 610?px;
       width: ?px;
       } 
```

至于 img src 和 background-image 的用法，根据我的经验，我发现它们有冲突。由于某些奇怪的原因，除非标签之外有单词或短语，否则 img src 标签将不起作用。通过同时使用两者，img src 将覆盖背景 css 元素。我发现 img 标签在 CSS 中更难操作。这是可行的，但执行起来却是一场噩梦。

例子：

```
 <div><img src="http://www.example.com">Example</div> 
```

根据我的经验，我发现 img src 与 text-indent: -9999px; 密切相关。或显示：无；。除非标签有要附加的单词或元素，否则该标签将不起作用。文本缩进导致单词（即示例）被推离屏幕。显示：无；使该单词看起来不可见，但如果突出显示，它会出现在图像上。（如果这没有意义，我深表歉意。我总是可以澄清。）

至于 HTML 标记，我要么使用 img 标签，要么只使用 div 标签。HTML 标记：

```
 <html>
     <body>
      <div class="text">I put my text here.</text>
     </body>
    </html> 
```

让我知道这个是否奏效。我很抱歉，这变得这么长。我不是故意的。如果您遇到任何问题或需要更多说明，请告诉我。我不介意帮忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:45:07.800

```
.whateverclassyouwant{background: (url) fixed center no-repeat; margin:0 auto; height:auto} 
```

应该管用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T16:21:04.130

试试下面的。请注意添加`no-repeat`和`background-size`：

```
{
    background: url(LOCATION OF PIC FILE) no-repeat;
    background-size: cover;
    height: 610px;
    text-align: center;
    margin: 0 auto;
    overflow: hidden;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:30:34.100

我认为你缺少的是你有

```
 overflow: hidden; 
```

在您的背景上不允许 div 滚动，除非您打开了那些在您的 css 中属于哪个的选项。

如果您希望将溢出隐藏在您的 div 上，那很好，但它会在其上放置滚动条。

[看看这个链接](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_intro)

# python - 'not e in c' 与 Python 中的 'e not in c' 不同吗？

> ID：12941287
> 
> 赞同：19
> 
> 时间：2012-10-17T18:53:26.630
> 
> 标签：python

> **可能重复：**
> [使用“not”和“in”关键字的语法顺序](https://stackoverflow.com/questions/8738388/order-of-syntax-for-using-not-and-in-keywords)

我的助教声称这`e not in c`并不总是产生相同的结果`not e in c`（尽管他没有解释*原因*）。我从来没有亲自在任何人的代码中看到过第二种形式（除了他的书和解释这两者*是*等价的），也从未见过两者在行为上有所不同，所以我怀疑这种说法。通过谷歌没有找到任何东西，我决定来这里。

那么有没有人有任何关于两者行为不同的情况的信息？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-17T18:58:01.267

它们完全相同，因为两者都实际应用了`not in`比较：

```
In [25]: def func():
    'e' not in 'bee'
   ....:     
   ....:     

In [27]: def func1():
    not 'e' in 'bee'
   ....:     
   ....:     
In [29]: dis.dis(func)
  2           0 LOAD_CONST               1 ('e')
              3 LOAD_CONST               2 ('bee')
              6 COMPARE_OP               7 (not in)
              9 POP_TOP             
             10 LOAD_CONST               0 (None)
             13 RETURN_VALUE        

In [30]: dis.dis(func1)
  2           0 LOAD_CONST               1 ('e')
              3 LOAD_CONST               2 ('bee')
              6 COMPARE_OP               7 (not in)
              9 POP_TOP             
             10 LOAD_CONST               0 (None)
             13 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:00:46.847

它们是相同的。`not`的优先级低于`in`，因此`not x in y`被解析为`not (x in y)`，它返回 的相反值`in`，这就是`not in`它的作用。

# ios - iOS - 应用程序在配置的 iPad 上崩溃，在模拟器中运行正常

> ID：12941296
> 
> 赞同：0
> 
> 时间：2012-10-17T18:53:56.553
> 
> 标签：ios, compiler-errors

这是跟踪：

```
2012-10-17 14:46:42.280 Site Inspection Report[10446:907] *** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [384 nan]'
*** First throw call stack:
(0x38af92a3 0x3141897f 0x38af91c5 0x3113c953 0x3113c87b 0x3113c80b 0x3597eaf5 0x354bf 0x33f97 0x3599c595 0x359dcd79 0x359d8aed 0x35a1a1d1 0x3331d 0x359ddad9 0x359dd663 0x359d584b 0x3597dc41 0x3597d6d5 0x3597d123 0x3497a5a3 0x3497a1d3 0x38ace173 0x38ace117 0x38accf99 0x38a3febd 0x38a3fd49 0x359d4485 0x359d1301 0x330f5 0x33090)
libc++abi.dylib: terminate called throwing an exception 
```

环顾四周，通常怀疑这会返回被 0 或某些与表相关的问题。我没有在应用程序中进行任何划分，但我确实有一张桌子，所以这将是我的起点。我的问题是，除了“盲松鼠”方法之外，有没有办法破译上面的消息，可以为调试提供更好的起点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:30:18.197

为了更好地了解错误及其根本原因，请添加异常断点以获取导致错误的代码行。选择断点并在 Xcode 窗口的左下方选择“+”并单击“添加异常断点”。单击以下警报。这最适用于 Xcode 4.5.1。

![在此处输入图像描述](../Images/91a1a4385d42cf5038b400fcc276d649.png)

# android - 模拟器未运行 OpenGL 应用程序，显示消息“不幸的是，OpenGL ES 2.0 Basic 已停止”

> ID：12941299
> 
> 赞同：8
> 
> 时间：2012-10-17T18:54:02.703
> 
> 标签：android, opengl-es, android-emulator

我通过[开发者网站获得了一个 OpenGL 的例子。](http://developer.android.com/training/graphics/opengl/index.html)

我的问题是它不运行应用程序。

这是我的日志：

```
10-17 14:43:12.574: E/Trace(684): error opening trace file: No such file or directory (2)
10-17 14:43:13.523: D/libEGL(684): Emulator without GPU support detected. Fallback to software renderer.
10-17 14:43:13.523: D/libEGL(684): loaded /system/lib/egl/libGLES_android.so
10-17 14:43:13.573: I/Choreographer(684): Skipped 44 frames!  The application may be doing too much work on its main thread.
10-17 14:43:13.643: D/gralloc_goldfish(684): Emulator without GPU emulation detected.
10-17 14:43:13.653: W/dalvikvm(684): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
10-17 14:43:13.653: E/AndroidRuntime(684): FATAL EXCEPTION: GLThread 78
10-17 14:43:13.653: E/AndroidRuntime(684): java.lang.IllegalArgumentException: No configs match configSpec
10-17 14:43:13.653: E/AndroidRuntime(684):  at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:863)
10-17 14:43:13.653: E/AndroidRuntime(684):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1024)
10-17 14:43:13.653: E/AndroidRuntime(684):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1401)
10-17 14:43:13.653: E/AndroidRuntime(684):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
10-17 14:43:14.233: I/Choreographer(684): Skipped 83 frames!  The application may be doing too much work on its main thread.
10-17 14:43:16.963: I/Choreographer(684): Skipped 260 frames!  The application may be doing too much work on its main thread.
10-17 14:43:16.963: I/Process(684): Sending signal. PID: 684 SIG: 9 
```

我试过的：

*   我在网上搜索，发现有人可以通过将 GPU 仿真设置为是
*   更新了我的 AVD 模拟器

我的模拟器是如何设置的：

*   目标 4.1.2。- API 级别 16
*   ARM(armeabi-v7a)
*   大小：1000mib
*   皮肤：默认（WVGA800）
*   硬件：MaxVm:48；抽象液晶密度：240；设备内存大小：512；GPU 仿真：是的；

有人可以帮我解决这个问题吗？

我想补充一点，我正在使用 Eclipse，我尝试重新安装所有东西（Eclipse 和 SDK）仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:17:12.260

模拟器GPU直通不稳定，建议使用真机。它在 Win7（Intel GPU）和 Ubuntu（nVidia GPU）上随机使我的 OpenGL ES 2.0 应用程序崩溃。

如您所见，它报告它无法检测到 OpenGL 并回退到软件渲染器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:39:00.373

我尝试了完全相同的步骤，并且能够在这里运行它。我可以看到一个绿色三角形。

确保您使用 API 级别 14 构建项目（这就是我所做的）

还可以尝试重新创建 AVD 的经典步骤。

# javascript - 使用popcornjs，如何一键播放视频和显示脚注？

> ID：12941303
> 
> 赞同：1
> 
> 时间：2012-10-17T18:54:07.547
> 
> 标签：javascript, html, html5-video, popcornjs

我有一个包含 10 个视频的导航（菜单）栏，我希望每个带有脚注的视频都能一键显示。现在，只需单击一下，每个视频都会出现，但我不知道如何处理不同的脚注？

这是我的html：

```
 <div id="menu">
    <uL>
    <li>Choose a Country:</li>
    <li><a href="javascript:changeSource1();">US</a></li> 
    <li><a href="javascript:changeSource2();">Canada</a></li> 
    </ul>
    </div>

    <div id="content">
    <div class="video-player">
    <video id="videos" controls>
    <source id="mp4" src="Video/(name of the video).mp4" type="video/mp4" />
    <source id="ogv" src="Video/(name of the video).ogv" type="video/ogg" />
    </video>

     </div> 

    <div id="video-text">
    <p id="popcorn-text">Ipsum Lorem...Aenean consectetur ornare pharetra. Praesent et urna eu justo convallis sollicitudin. Nulla porttitor mi euismod neque vulputate sodales. </p>
     </div>

     </div> 
```

这是我的 POPCORNJS 代码，仅适用于视频：

```
 <script>
    function changeSource1()
    { 
    document.getElementById("mp4").src=  "Video/(name of the video).mp4";
    document.getElementById("ogv").src=  "Video/(name of the video).ogv";
    document.getElementById("videos").load();
    } 
    </script> 
```

如何使用 popcornjs 代码实现多功能（例如为每个视频显示不同的脚注）？谢谢，N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:21:58.183

您可以拥有任意数量的 Popcorn 实例，因此在这里为每个视频设置一个是有意义的。Popcorn 的每个实例都有自己的一组脚注。我们将从一个数组开始，并动态设置每个视频。

```
var data = [
    {
        src: {
            mp4: 'video1.mp4', webm: 'video1.webm', ogg: 'video1.ogv'
        },
        footnotes: [
            {
                start: 2,
                end: 4,
                text: 'Ipsum Lorem...'
            }
            // etc.
        ]
    }
    // etc.
]; 
```

现在，设置爆米花实例，加载数据，并添加一个用于切换的点击事件处理程序。

```
var activeVideo = data[0];

//Popcorn provides this handy 'forEach' helper
Popcorn.forEach(data, function(vid, i) {
    var button;
    vid.video = document.createElement('video');
    Popcorn.forEach(vid.src, function(src, type) {
        var source = document.createElement('source');
        source.setAttribute('src', src);
        source.setAttribute('type', 'video/' + type);
        vid.video.appendChild(source);
    });
    vid.video.preload = true; //optional
    document.getElementById('').appendChild(vid.video);
    if (i) {
        vid.video.style.display = 'none';
    }

    vid.popcorn = Popcorn(vid.video);

    //every footnote needs a target
    vid.popcorn.defaults('inception', {
        target: 'video-text'
    });

    Popcorn.forEach(vid.footnotes, function(footnote) {
        vid.popcorn.footnote(footnote);
    });

    button = document.getElementById('button' + i); // or create one here
    button.addEventListener('click', function() {
        //pause and hide the old one
        activeVideo.popcorn.pause();
        activeVideo.style.display = 'none';

        activeVideo = data[i];
        activeVideo.style.display = '';
        activeVideo.popcorn.play();
    });
}); 
```

那应该差不多了。

一个问题是这在 iPad 上不起作用，因为如果您在一个页面上给它提供多个视频，Mobile Safari 就会发疯。在这种情况下，只需创建一个视频元素，然后在点击处理程序中，设置 src 属性（仅限 mp4）并调用`.load()`. 您仍然可以在同一个视频标签上拥有多个 Popcorn 实例，但是当您“停用”一个实例时，只需调用`.disable('footnote')`以防止它在错误视频上显示脚注并`enable`在活动视频上运行。

# c# - 在 C# 中将分层字符串列表转换为 JSON

> ID：12941305
> 
> 赞同：1
> 
> 时间：2012-10-17T18:54:12.050
> 
> 标签：c#, json, string, hierarchical, delimited

我有一个字符串列表，这些字符串表示分层数据并且用连字符分隔（3 个连字符表示分隔）。我正在尝试将此列表转换为 JSON 字符串，以便可以将其绑定到树控件。

我正在寻找一个 C# 示例。

该列表可以如下（列表不是完整的列表，在某些情况下它可以有 7 个节点，但您可以理解）：

```
Automotive Electronics
Automotive Electronics---Body Electronics
Automotive Electronics---Body Electronics---Access Control Systems
Automotive Electronics---Body Electronics---Body Control Modules
Automotive Electronics---Driver Information
Automotive Electronics---Driver Information---Clocks
Automotive Electronics---Driver Information---Compass Systems
Automotive Electronics---HomeL
Automotive Electronics---Infotainment & Connectivity
Automotive Electronics---Infotainment & Connectivity---Handsfree Systems
Automotive Interiors
Automotive Interiors---Door Panels
Automotive Interiors---Floor Consoles
Automotive Interiors---Headliners & Overhead Systems
Automotive Interiors---Overhead Consoles
Automotive Seating
Automotive Seating---Complete Seats
Automotive Seating---Complete Seats---SuperThin Seats 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:57:44.197

主要技巧是将字符串放入树结构中。下一个代码片段 (linqpad) 就是这样做的。我不知道输出是否是您可以在客户端处理的东西，但它应该是您可以修改的东西，因为它适合您。

```
void Main()
{
    var rootNode = new Node("root");
    foreach(string s in new[] {"Automotive Electronics",
        "Automotive Electronics---Body Electronics",
        "Automotive Electronics---Body Electronics---Access Control Systems",
        "Automotive Electronics---Body Electronics---Body Control Modules",
        "Automotive Electronics---Driver Information",
        "Automotive Electronics---Driver Information---Clocks",
        "Automotive Electronics---Driver Information---Compass Systems",
        "Automotive Electronics---HomeL",
        "Automotive Electronics---Infotainment & Connectivity",
        "Automotive Electronics---Infotainment & Connectivity---Handsfree Systems",
        "Automotive Interiors",
        "Automotive Interiors---Door Panels",
        "Automotive Interiors---Floor Consoles",
        "Automotive Interiors---Headliners & Overhead Systems",
        "Automotive Interiors---Overhead Consoles",
        "Automotive Seating",
        "Automotive Seating---Complete Seats",
        "Automotive Seating---Complete Seats---SuperThin Seats"})
    {
        AddNodes(rootNode, s.Split(new[] {"---"}, StringSplitOptions.RemoveEmptyEntries));
    }
    new JavaScriptSerializer().Serialize(rootNode.Nodes).Dump();
}

public void AddNodes( Node parentNode, string[] names)
{
    if (names.Any())
    {
        var node = parentNode.AddNode(names.First());
        AddNodes(node, names.Skip(1).ToArray());
    }
}

public class Node
{
    public Node(string name)
    {
        Name = name;
        Nodes = new List<Node>();
    }

    public Node AddNode(string name)
    {
        if (!this.Nodes.Select(n => n.Name).Contains(name.Trim()))
        {
            //name.Dump(this.Name);
            this.Nodes.Add(new Node(name.Trim()));
        }
        return this.Nodes.Where (n => n.Name == name).First();
    }

    public string Name { get;set;}
    public List<Node> Nodes { get; set; }
} 
```

输出：

> [{"Name":"Automotive Electronics","Nodes":[{"Name":"Body Electronics","Nodes":[{"Name":"Access Control Systems","Nodes":[]}, {"Name":"Body Control Modules","Nodes":[]}]},{"Name":"Driver Information","Nodes":[{"Name":"Clocks","Nodes":[ ]},{"Name":"Compass Systems","Nodes":[]}]},{"Name":"HomeL","Nodes":[]},{"Name":"信息娱乐和连接性" ,"Nodes":[{"Name":"Handsfree Systems","Nodes":[]}]}]},{"Name":"汽车内饰","Nodes":[{"Name":"门面板","节点":[]},{"名称":"落地控制台","节点":[]},{"名称":"顶篷和架空系统","节点":[]},{"名称":"架空控制台","节点":[]}] },{"Name":"Automotive Seating","Nodes":[{"Name":"Complete Seats","Nodes":[{"Name":"SuperThin Seats","Nodes":[]}] }]}]

（请注意，`JavaScriptSerializer`您必须在 linqpad 中导入一些命名空间才能运行此代码段）。

# c++ - 在 WNDCLASSEX 中向 WndProc 回调添加代码会破坏代码

> ID：12941309
> 
> 赞同：2
> 
> 时间：2012-10-17T18:54:25.543
> 
> 标签：c++, user-interface, system

我有这个代码，它是我正在创建的用户界面系统的一部分，它将有多个窗口

```
bool UISystem::HandleMessage(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    UIWindow* target = NULL;
    for(vector<UIWindow*>::iterator it = windowList.begin(); it < windowList.end(); it++)
    {
        if((*it)->windowHandle == hwnd)
        {
            target = *it;
            break;
        }
    }

    if(target == NULL)
    { return false; }

    switch(msg)
    {
    case WM_DESTROY:

        return true;

    case WM_PAINT:  

        return true;

    default:
        return false;
    }
}

LRESULT WINAPI UISystem::WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    /*if(UISYSTEM->HandleMessage(hwnd, msg, wParam, lParam))
    {
    }*/
    return DefWindowProc(hwnd, msg, wParam, lParam);
} 
```

当此代码按原样实现时，包括 UISystem::WndProc 中的注释块，窗口会正确显示，但是，如果我在 UISystem::WndProc 中取消注释此块，则从 CreateWindow 返回无效句柄，任何帮助将不胜感激，因为这真的让我很困惑，我在 UISystem::WndProc 中执行任何其他代码之前尝试调用 DefWindowProc 但我所有的尝试都失败了

这是 UIWindow 的构造函数：

```
UIWindow::UIWindow(int x, int y, int width, int height, string & text)
{

    int frameWidth   = GetSystemMetrics(SM_CXSIZEFRAME);
    int frameHeight  = GetSystemMetrics(SM_CYSIZEFRAME);
    int menuHeight   = GetSystemMetrics(SM_CYMENU);
    int windowXPos   = (GetSystemMetrics(SM_CXSCREEN) - width) / 2;
    int windowYPos   = (GetSystemMetrics(SM_CYSCREEN) - height) / 2;
    int windowWidth  = width + frameWidth * 2;
    int windowHeight = height + frameHeight * 2 + menuHeight;

    bounds.X = x;
    bounds.Y = y;
    bounds.Width = width;
    bounds.Height = height;
    title = text;

    MSG msg;

    WNDCLASSEX wc = {sizeof(WNDCLASSEX), CS_VREDRAW|CS_HREDRAW|CS_OWNDC, 
        &UISystem::WndProc, 0, 0, hInstance, NULL, NULL, (HBRUSH)(COLOR_WINDOW + 1), 
        NULL, "AurousWindow", NULL};

    RegisterClassEx(&wc);

    windowHandle = CreateWindow("AurousWindow", title.c_str(), WS_OVERLAPPEDWINDOW, windowXPos, windowYPos, windowWidth, windowHeight, NULL, NULL, hInstance, NULL);
    SetWindowRgn(windowHandle, CreateRectRgn(0, 0, width, height), TRUE);
    ShowWindow(windowHandle, nShow);
    UpdateWindow(windowHandle);

    //RECT rec = {0, 0, width, height};

    while(GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:33:48.670

不确定这是否是根本问题，但您应该解决的一件事是删除：

```
while(GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
} 
```

从：

```
UIWindow::UIWindow(int x, int y, int width, int height, string & text) 
```

只要您的窗口存在，这个 while 就会循环，并且会阻止 UIWindow 被正确构造。这个对象（UIWindow）实际上是在内部访问的：UISystem::HandleMessage，但由于它的构造函数永远不会结束，所以它可能是 NULL 或处于未定义状态。

# c# - 我怎么知道魅力栏已经打开？

> ID：12941310
> 
> 赞同：2
> 
> 时间：2012-10-17T18:54:25.600
> 
> 标签：c#, xaml, windows-8

当魅力栏打开时，我想关闭我的弹出窗口。我以为会有一个事件说魅力已经打开，但事实并非如此。由于魅力栏打开了而取消弹出窗口的正确方法是什么？

（C#、XAML 应用程序）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:07:55.963

（目前）无法检测魅力栏何时打开。只有当用户点击魅力按钮时，您才会收到通知。

这是一个很好的行为，因为用户可以打开超级按钮栏来查看日期/时间，然后将其关闭以返回您的应用程序。所以，你不会因为它被打开而改变任何东西。

当用户点击一个超级按钮时，Windows 会自动关闭任何打开的具有 IsLightDismissEnabled == true 的弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T17:56:56.897

你应该使用`Window.Current.Activated += Current_Activated;`. 它实际上在窗口激活更改时触发！

```
 void Current_Activated(object sender, WindowActivatedEventArgs e)
    {

        if (e.WindowActivationState == CoreWindowActivationState.CodeActivated)
        {
            if (BottomAppBarWasOpenBeforeCharmsActivated)
            {
                BottomAppBar.IsSticky = true;
                BottomAppBar.IsOpen = true;
                BottomAppBarWasOpenBeforeCharmsActivated = false;
            }

        }
        if (e.WindowActivationState == CoreWindowActivationState.Deactivated)
        {
            if (BottomAppBar.IsOpen == true)
            {
                BottomAppBarWasOpenBeforeCharmsActivated = true;
                BottomAppBar.IsSticky = false;
                BottomAppBar.IsOpen = false;
            }
        }
    } 
```

# xml - ASP 和 XSL 编码问题

> ID：12941315
> 
> 赞同：1
> 
> 时间：2012-10-17T18:54:42.277
> 
> 标签：xml, xslt, asp-classic

我正在通过经典 ASP 解析我的 XML 和 XSL。（这正是服务器可以运行的）我的 XML 和 XSL 文件被编码为 UTF-8，但在解析时，它们变成了 UTF-16。这导致我的法语字符被错误地表示。

ASP 代码：

```
'Load XML
Set URL_xml = Server.CreateObject("MSXML2.DomDocument.3.0")
URL_xml.async = false
URL_xml.SetProperty "SelectionLanguage", "XPath"
URL_xml.preserveWhiteSpace = True
URL_xml.load(Server.MapPath("xml/1_branches.xml"))
'Load XSL
Dim URL_xsl : Set URL_xsl = CreateObject("MSXML2.FreeThreadedDOMDocument.3.0")
URL_xsl.async = false
URL_xsl.load(Server.MapPath("xsl/default.xsl"))

Dim xslTemplate : Set xslTemplate = CreateObject("MSXML2.XSLTemplate.3.0")
xslTemplate.stylesheet = URL_xsl

Dim processor : Set processor = xslTemplate.createProcessor()
processor.addParameter "auth", cookie_auth
processor.addParameter "user_name", cookie_user_name
processor.input = URL_xml
processor.transform()

strTrans = processor.output
strFolder = strFolder & strFolders & strTrans 
```

XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <branches>
    <branch>Audit and Evaluation</branch>
    <folder>ae-ve</folder>
    <program></program>
    <section>About EC</section>
  </branches>
</root> 
```

XSL 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output encoding="utf-8"  omit-xml-declaration="yes" method="html" indent="yes" ></xsl:output>
    <xsl:param name="auth"/>
    <xsl:param name="user_name"/>
    <xsl:template match="/">
        <xsl:if test="$auth = 'Super'">
            <p>There are <xsl:value-of select="count(root/branches)"/> individual folders.</p>
            <xsl:for-each select="root/branches">
                <xsl:variable name="folder" select="folder" />
                <fieldset><legend><strong><a href="url_list.asp?fldr={$folder}.xml"><xsl:value-of select="folder"/></a></strong></legend><!--h3 class="folder"><a href="url_list.asp?fldr={$folder}.xml"><xsl:value-of select="folder"/></a></h3-->
                <p class='details'><strong>Com Advisor: </strong>
                <xsl:for-each select="./people/person[@resp = 'com']">
                    <xsl:value-of select="."/>, 
                </xsl:for-each><br />
                <strong>Branch: </strong><xsl:value-of select="branch"/><br />
                <strong>Folder: </strong><xsl:value-of select="folder"/><br />
                <strong>Program: </strong><xsl:value-of select="program"/><br />
                <strong>Section: </strong><xsl:value-of select="section"/></p>
        </xsl:for-each>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

我已经和这个斗争了一段时间。我在这里找到了一些很好的建议，但大多数解决方案都会导致通过流保存文件。我需要将 XSl 的输出作为字符串变量在文档中进一步使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:11:27.983

为确保您的处理页面采用 UTF-8 格式（并且您没有使用网络服务器的默认代码页），您可以为您的页面设置如下代码页：

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%> 
```

或者

```
<%
Response.CodePage = 65001
%> 
```

可选：如果要将这些字符输出到浏览器（此处似乎不是这种情况），您也可以按如下方式设置输出编码：

```
<%
Response.Charset= "utf-8"
%> 
```

# php - php:结合id和值数组

> ID：12941318
> 
> 赞同：1
> 
> 时间：2012-10-17T18:54:46.583
> 
> 标签：php, arrays

我有两个逗号分隔的列表，对应于查询返回的东西的 ID 和值。我可以使用explode轻松地将每个转换为数组。

我的问题是如何将这两个列表转换为一组超链接，每个超链接使用一个，如下所示：

```
Ids:  34,23,78
Values: red, blue, green

Links: <a href='get.php?id=34'>red</a> etc. 
```

我可以用：

```
$valuesarray =explode(',',$values);
foreach($valuesarray as $val) {
Echo ....$Val
} 
```

但是如何将 ID 放入链接中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:58:54.847

就个人而言，我会使用`array_combine`将它们组合成一个数组：

```
$arr = array_combine(explode(",",$ids),explode(",",$values));
foreach($arr as $id=>$value) {
    ...
} 
```

但还有其他方法。如：

```
$idarray = explode(",",$ids); $valuesarray = explode(",",$values);
// option 1:
foreach($idarray as $k=>$id) {
    $value = $valuesarray[$k];
}
// option 2:
$length = count($idarray);
for( $i=0; $i<$l; $i++) {
    $id = $idsarray[$i]; $value = $valuesarray[$i];
} 
```

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:58:22.643

如果您可以假设项目数始终相同，则可以执行常规 for 循环：

```
for ($i = 0; $i < count($valuesarray); $i++) {
    echo "<a href='get.php?id=" . $idsarray[$i] . "'>" . $valuesarray[$i] . "</a>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T18:57:51.793

在 for each 循环中使用 $key => $value 将完成此操作。

```
foreach($valuesarray as $id => $val) {
echo '<a href="file.php?id=' . $id . '">' . $val . '</a>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:59:40.540

您可以将它们映射到一个数组中，其中“id”作为键，“值”作为值，如下所示：

```
$id_array = explode(',', $ids);
$value_array = explode(',', $values);
$final_array = array();

for ($i=0; $i < count($id_array); $i++) {
    $final_array[$id_array[$i]] = $value_array[$i];
} 
```

请注意，您可能还想在进入循环之前验证 id 的数量是否与值的数量匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T19:00:10.663

```
$ids = '33,22,55';
$values = 'red,yellow,blue';

$ids = explode(',', $ids);
$values = explode(',', $values);

foreach($ids as $key => $value){
    echo "<a href='get.php?id=$ids[$key]'>$values[$key]</a><br />";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T19:02:24.580

尝试这个：

```
$id_arr = explode(',',$ids);
$val_arr = explode(',',$values);
for($i = 0; $i < count($id_arr); $i++)
{
    echo '<a href="get.php?id='.$id_arr[$i].'">'.$val_arr[$i].'</a>';
} 
```

# javascript - iframe 中的绝对位置 - facebook 画布

> ID：12941334
> 
> 赞同：0
> 
> 时间：2012-10-17T18:55:23.410
> 
> 标签：javascript, jquery, facebook, iframe

我正在尝试页面内的`position:absolute`一个元素，它是一个. 但它不起作用，因为我必须从父页面进行控制。`mydiv``facebook canvas``iframe`
`mydiv`

是否可以使用javascript动态写入顶部框架？
我找到了这个，但不知道如何实现它，尤其是这一行`frames[name]`。

```
var iframe = top.frames[name].document;
var css = '' +
                     '<style type="text/css">' +
                     '#mydiv{margin:0;padding:0;postiton:absolute}' +
                     '</style>';
iframe.open();
iframe.write(css);
iframe.close(); 
```

**编辑：**这有帮助：[Facebook画布应用程序上的居中对话框](https://stackoverflow.com/questions/11000073/centered-dialog-on-facebook-canvas-app)

# ios - 从 MultiChannelMixer AudioUnit 同时录制和播放

> ID：12941338
> 
> 赞同：2
> 
> 时间：2012-10-17T18:55:30.800
> 
> 标签：ios, core-audio

我正在尝试创建一个应用程序，它可以播放从文件加载的多个样本（类似于 iPhoneMultichannelMixer 示例应用程序），同时记录来自麦克风或线路输入的用户输入，并将任何立体声格式的所有内容保存（记录）到文件中。

在架构上，我有一个 Mixer AudioUnit，它接收不同的样本作为输入，混合它们并通过 IORemote 播放。IORemote 麦克风输入被另一个回调捕获以进行录制。问题是 - 我如何记录麦克风输入*和*Mixer AudioUnit 输出总线正在播放的内容？

我可以简单地将我从麦克风获得的内容混合到同一个混音器中，然后将混音器连接到 IORemote 以及其他一些将处理混合信号记录的 AudioUnit（哪种类型？）？可以同时进行吗？我应该按顺序进行吗 - 首先将混音器连接到录音 AudioUnit（哪个？？），然后连接到 IORemote 进行播放？我应该/我可以使用 AudioQueue 来记录混音器的输出吗？

我意识到这是很多问题，但搜索没有产生任何积极的结果，所以感谢任何方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:40:16.403

我以前做过。

我这样做的方法是在混音器中为语音创建另一条总线，该总线从远程IO（特别是麦克风）呈现其数据。然后在混音器的输出端添加一个 AudioRenderNotify 来捕获所有组合的音频。在这个回调中，我设置了 ExtAudioFileWriteAsync 和瞧！您所有的音频合并并保存到一个文件中。

您甚至可以即时使用压缩音频。AAC AppleLossless 甚至是简单的 LinearPCM (Wave, Aiff)

# java - Java 2012-006 更新破坏了 xCode 上传

> ID：12941342
> 
> 赞同：2
> 
> 时间：2012-10-17T18:55:48.587
> 
> 标签：java, xcode, app-store

这与这个问题有关 [提交申请是不可能的](https://stackoverflow.com/questions/10026248/submit-application-not-possible)

然而，在苹果最近的 Java 更新（删除了 Web 插件）之后，oracle immediatley 发布了 Java 7 的更新

现在 xcode 无法再上传“上传到 iTunes Store 时发生错误”并且旧的修复程序不起作用。Java 1.6 消失了吗？还是我们需要做点别的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T00:03:44.737

如果您有 Java 的旧副本，则之前的答案是可以的。一个简单的修复（这将破坏 Java，然后您可以将其恢复）是临时删除/备份两个符号链接。

1.  cd /System/Library/Frameworks/JavaVM.framework/Versions
2.  sudo mv 当前 Current.bak
3.  sudo mv CurrentJDK CurrentJDK.bak
4.  上传你的二进制文件
5.  sudo mv Current.bak 当前
6.  sudo mv CurrentJDK.bak CurrentJDK

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T20:26:10.900

您可以在终端中执行此操作

```
cd /System/Library/Frameworks/JavaVM.framework/Versions  
open . 
```

然后将 Current 和 CurrentJDK 文件夹复制到桌面或其他位置，然后

```
rm Current*  
ln -s 1.6.0/ Current  
ln -s 1.6.0/ CurrentJDK 
```

这解决了上传问题，然后当您在终端中完成

```
cd /System/Library/Frameworks/JavaVM.framework/Versions
rm Current*
open . 
```

然后从桌面复制原件，您的 Java 将再次工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T05:18:57.620

作为对没有链接任何其他 Java 版本的任何人的后续行动，我发现只需删除 Current 和 CurrentJDK 文件即可。/var/log/system.log 中没有发现任何问题，这让我相信 Xcode 要么跳过需要 Java 的脚本，要么自己找到了 1.6 版本的 Java。

与 Gary Rudolph 描述的步骤相同：

cd /System/Library/Frameworks/JavaVM.framework/Versions

```
sudo mv Current Current.bak
sudo mv CurrentJDK.bak CurrentJDK.bak 
```

上传你的二进制文件

```
sudo mv Current.bak Current
sudo mv CurrentJDK.bak CurrentJDK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:20:04.783

我使用了本网站上的说明

[http://creativepark.net/1146](http://creativepark.net/1146)

```
rm Current*
ln -s 1.6.0/ Current
ln -s 1.6.0/ CurrentJDK 
```

然而，这似乎破坏了 java :( 至少我的上传工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T16:11:43.997

使用 xcode 4.6 Organizer 提交您的存档。而且您无需在 Mountain Lion 上使用 Java 进行任何操作

# c# - 为什么在创建 Lazy<> 时出现错误“Activator.CreateInstance 找不到构造函数”？

> ID：12941343
> 
> 赞同：0
> 
> 时间：2012-10-17T18:55:51.627
> 
> 标签：c#, delegates, activator

我有像下面这样的课程。TestOne 方法正在运行，但 TestTwo 未运行。因为 TestTwo 有一个参数。激活器给出错误。我该如何解决这个原因？我需要一起使用 Activator.CreateInstance 和 Delegate.CreateDelegate 吗？

```
public class Foo
{
    public Foo(string name)
    {
        Name = name;
    }

    public string Name { get; set; }
}

public class MyClass
{
    public Lazy<IEnumerable<Foo>> Foos { get; set; }
}

[TestFixture]
public class Test
{
    private IEnumerable<T> CreateItems<T>() where T : class
    {
        for (int i = 0; i < 5; i++)
        {
            yield return (T)Activator.CreateInstance(typeof(T), i.ToString(CultureInfo.InvariantCulture));
        }
    }

    private IEnumerable<T> CreateItems<T>(int count) where T : class
    {
        for (int i = 0; i < count; i++)
        {
            yield return (T)Activator.CreateInstance(typeof(T), i.ToString(CultureInfo.InvariantCulture));
        }
    }

    public IEnumerable<T> TestMethod<T>() where T : class
    {
        return CreateItems<T>();
    }

    public IEnumerable<T> TestMethod2<T>(int i) where T : class
    {
        return CreateItems<T>(i);
    }

    [Test]
    public void TestOne()
    {
        var u = new MyClass();
        var prop = u.GetType().GetProperties().First(x => x.PropertyType.IsGenericType 
            && x.PropertyType.GetGenericTypeDefinition() == typeof(Lazy<>));
        var enu = prop.PropertyType.GetGenericArguments()[0];
        var j = enu.GetGenericArguments()[0];
        var func = typeof(Func<>).MakeGenericType(enu);
        var mi = this.GetType().GetMethod("TestMethod").MakeGenericMethod(j);
        var factory = Delegate.CreateDelegate(func, this, mi);
        var type = typeof(Lazy<>).MakeGenericType(enu);
        prop.SetValue(u, Activator.CreateInstance(type, factory), null);
        Debug.WriteLine("Count:" + u.Foos.Value.Count());
        foreach (var foo in u.Foos.Value)
        {
            Debug.WriteLine(foo.Name);
        }
    }

    [Test]
    public void TestTwo()
    {
        var u = new MyClass();
        var prop = u.GetType().GetProperties().First(x => x.PropertyType.IsGenericType 
            && x.PropertyType.GetGenericTypeDefinition() == typeof(Lazy<>));
        var enu = prop.PropertyType.GetGenericArguments()[0]; 
        var j = enu.GetGenericArguments()[0];
        var func = typeof(Func<,>).MakeGenericType(typeof(int), enu);
        var mi = this.GetType().GetMethod("TestMethod2").MakeGenericMethod(j);
        var factory = Delegate.CreateDelegate(func, this, mi);
        var type = typeof(Lazy<>).MakeGenericType(enu);
        // How do I send parameter to the TestMethos2 ? 
        // I get the error this line.
        prop.SetValue(u, Activator.CreateInstance(type, factory), null);
        Debug.WriteLine("Count:" + u.Foos.Value.Count());
        foreach (var foo in u.Foos.Value)
        {
            Debug.WriteLine(foo.Name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:02:34.060

当您使用 Activator.CreateInstance 时，它​​将尝试为您提供的参数找到最佳构造函数。如果您不提供参数，它将搜索 Foo 没有的无参数构造函数。

由于 Foo 只有一个带有字符串参数的构造函数，因此您必须为 CreateInstance 提供相同的定义，如下所示：

```
Activator.CreateInstance(typeof(Foo), new object[] { "a string" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:27:45.433

在这里查看 Lazy 的构造函数信息。

[http://msdn.microsoft.com/en-us/library/dd642331.aspx](http://msdn.microsoft.com/en-us/library/dd642331.aspx)

```
public Lazy<IEnumerable<Foo>> Foos { get; set; } 
```

必须将类型的委托发送`Func<IEnumerable<Foo>>`到其构造函数以创建`Lazy<T>`. 但是在这里试图发送一个类型为`Func<int, IEnumerable<Foo>>`.

`Func<IEnumerable<Foo>>`为的类型创建一个委托`TestMethod2`是不可能的。它在这里。

[如何使用 Delegate.CreateDelegate 而不是 Func<> 定义委托？](https://stackoverflow.com/questions/12974158/how-to-define-a-delegate-using-delegate-createdelegate-instead-of-func)

# c - malloc/calloc分配的块差异

> ID：12941347
> 
> 赞同：4
> 
> 时间：2012-10-17T18:55:55.747
> 
> 标签：c

> **可能重复：**
> [c malloc 和 calloc 之间的区别](https://stackoverflow.com/questions/1538420/c-difference-between-malloc-and-calloc)

虽然 calloc 以块和 malloc 的形式在单个块中分配内存，但它们是否都连续分配内存，如果有障碍物，calloc 是否能够跳过障碍物，然后在剩余的堆内存中分配另一个块。我想弄清楚这件事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T18:56:57.657

这两个函数都在一个连续的块中分配内存。参数的差异并不反映底层分配策略的差异。这是历史的矛盾，仅此而已。

（你可以推断出这个结论。如果 calloc 分配不连续的块，调用者如何知道漏洞在哪里以及如何跳过它们？调用者收到的只是一个指针。不是说，a块的链表，这是访问非连续区域所需的。）

你要么打电话`calloc(n,s)`要么`malloc(n*s)`; calloc 为你做乘法，就是这样。如果需要，您可以将参数切换到`calloc(s,n)`。它分配大小为“n”的“s”对象的想法只是一个概念性的想法，系统实际上并没有跟踪或强制执行它。`calloc(4,1)`等于`calloc(1,4)`等于`calloc(2,2)`。

两者之间唯一有意义的区别是 calloc 将内存设置为零。malloc 使其未初始化，因此如果您不需要清除内存，它会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:09:59.553

正如约翰所说，由于历史原因存在差异，分配策略没有实际差异。不过，值得指出的一个区别是`calloc`ed 内存将被设置为零，同时`malloc`返回一个指向未初始化内存的指针。

# excel - 删除动态图表中的所有数据系列

> ID：12941356
> 
> 赞同：6
> 
> 时间：2012-10-17T18:56:23.810
> 
> 标签：excel, vba, charts

根据我在列表框 (Lbox1) 中所做的选择，我在多个数据系列上创建了一个动态图表。

当我最初删除所有数据系列以制作新图表时，它会引发错误。

```
Public Sub listbox_selection()
    Dim i As Integer
    Dim temp As String
    Dim k As Integer
    Dim s As SeriesCollection

    k = Sheets("Plan1").ChartObjects(1).Chart.SeriesCollection.count

    ##This part giving error
    For i = 1 To k
        Sheets("Plan1").ChartObjects(1).Chart.SeriesCollection(i).Delete
    Next
    ####

    Sheets("Plan1").ListBoxes("LBox1").Select
    For i = 1 To Sheets("Plan1").Shapes("LBox1").ControlFormat.ListCount
        If Sheets("Plan1").ListBoxes("LBox1").Selected(i) = True Then
            Call Listit(X:=i)
        End If
    Next
End Sub

Public Sub Listit(ByVal X As Integer)
    X = X + 3
    With Sheets("Plan1").ChartObjects(1).Chart
        With .SeriesCollection.NewSeries
           .XValues = Range("Q2:U2")
           .Values = Range("Q" & X & ":U" & X & "")
           .Name = Range("P" & X).Value
        End With    
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T23:36:13.813

试试这个，

```
Sub temp()
  ActiveSheet.ChartObjects("Chart 1").Activate
  For Each s In ActiveChart.SeriesCollection
      s.Delete
  Next s
End Sub 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-01T11:40:17.717

您可以使用`Sheets("Plan1").ChartObjects(1).Chart.ChartArea.ClearContents`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-01T09:53:49.033

Excel 2010

```
ActiveChart.ChartArea.ClearContents 
```

# postgresql - Postgres 按列名删除约束

> ID：12941358
> 
> 赞同：1
> 
> 时间：2012-10-17T18:56:31.823
> 
> 标签：postgresql, post

有没有办法可以删除基于列名的约束？

我有 postgres 8.4，当我升级我的项目时，升级失败，因为约束在不同版本中被命名为不同的东西。

基本上，如果存在约束，我需要删除它，或者我可以使用列名删除约束。

约束的名称是唯一改变的东西。知道这是否可能吗？

在这种情况下，我需要删除“patron_username_key”

```
discovery=# \d patron
                       Table "public.patron"
          Column          |            Type             | Modifiers
--------------------------+-----------------------------+-----------
 patron_id                | integer                     | not null
 create_date              | timestamp without time zone | not null
 row_version              | integer                     | not null
 display_name             | character varying(255)      | not null
 username                 | character varying(255)      | not null
 authentication_server_id | integer                     |
Indexes:
    "patron_pkey" PRIMARY KEY, btree (patron_id)
    "patron_username_key" UNIQUE, btree (username, authentication_server_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:17:20.470

您可以使用[系统目录](http://www.postgresql.org/docs/current/interactive/catalogs.html)来查找有关约束的信息。`pg_constraint`尽管如此，一些约束，如键，在单独的表中被提及，而其他约束，如`NOT NULL`，本质上是表中的`pg_attribute`列。

对于键，您可以使用此查询来获取约束定义列表：

```
SELECT pg_get_constraintdef(c.oid) AS def
  FROM pg_class t
  JOIN pg_constraint c ON c.conrelid=t.oid
 WHERE t.relkind='r' AND t.relname = 'table'; 
```

然后，您可以过滤掉引用您的列并动态构造`ALTER TABLE ... DROP CONSTRAINT ...`语句的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:27:04.010

假设唯一索引是添加唯一约束的结果，您可以使用以下 SQL 语句删除该约束：

```
do $$
declare 
  cons_name text;
begin
  select constraint_name 
     into cons_name
  from information_schema.constraint_column_usage  
  where constraint_schema = current_schema()
  and column_name in ('authentication_server_id', 'username')
  and table_name = 'patron'
  group by constraint_name
  having count(*) = 2;

  execute 'alter table patron drop constraint '||cons_name;
end;
$$ 
```

如果您“仅”添加了唯一索引（而不是唯一约束），我不确定这是否可行。

如果您需要对超过 2 列执行此操作，您还需要调整`having count(*) = 2`部分以匹配条件中的列数`column_name in ..`。

（因为你没有指定你的 PostgreSQL 版本，我假设是当前版本）

# regex - 是否可以使用正则表达式替换来增加数字？

> ID：12941362
> 
> 赞同：81
> 
> 时间：2012-10-17T18:56:37.093
> 
> 标签：regex

是否可以使用正则表达式替换来增加数字？当然，不使用[评估/基于函数的替换](https://stackoverflow.com/questions/1742798/increment-a-number-in-a-string-in-with-regex)。

这个问题的灵感来自[另一个问题，提问者想在文本编辑器中增加数字](https://stackoverflow.com/questions/12940450/sublime-text-2-regex-replace-n-with-n1)。支持正则表达式替换的文本编辑器可能比支持完整脚本的文本编辑器多，因此如果存在正则表达式，则可能更方便浮动。

此外，我经常从巧妙的解决方案中学到一些巧妙的东西，解决实际上无用的问题，所以我很好奇。

*假设我们只讨论非负十进制整数，即`\d+`.*

*   可以单次替换吗？或者，有限数量的替换？

*   如果不是，是否至少有可能*给出一个上限*，例如高达 9999 的数字？

当然，给定一个while循环（替换匹配时）是可行的，但我们在这里寻求一个无循环的解决方案。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-07-23T23:27:58.970

这个问题的主题让我很开心，因为我之前做了一个特定的实现。我的解决方案恰好是两个替换，所以我会发布它。

我的实现环境是solaris，完整示例：

```
echo "0 1 2 3 7 8 9 10 19 99 109 199 909 999 1099 1909" |
perl -pe 's/\b([0-9]+)\b/0$1~01234567890/g' |
perl -pe 's/\b0(?!9*~)|([0-9])(?=9*~[0-9]*?\1([0-9]))|~[0-9]*/$2/g'

1 2 3 4 8 9 10 11 20 100 110 200 910 1000 1100 1910 
```

拆开来解释：

```
s/\b([0-9]+)\b/0$1~01234567890/g 
```

对于每个数字 (#)，将其替换为 0#~01234567890。第一个 0 是在需要将 9 舍入到 10 的情况下。01234567890 块用于递增。“9 10”的示例文本是：

```
09~01234567890 010~01234567890 
```

下一个正则表达式的各个部分可以单独描述，它们通过管道连接以减少替换计数：

```
s/\b0(?!9*~)/$2/g 
```

选择所有不需要四舍五入的数字前面的“0”位并丢弃。

```
s/([0-9])(?=9*~[0-9]*?\1([0-9]))/$2/g 
```

(?=) 是正向前瞻，\1 是匹配组#1。所以这意味着匹配所有后面跟着 9 的数字，直到 '~' 标记然后转到查找表并找到该数字后面的数字。替换为查找表中的下一个数字。因此，当正则表达式引擎解析数字时，“09~”变为“19~”，然后变为“10~”。

```
s/~[0-9]*/$2/g 
```

此正则表达式删除 ~ 查找表。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-17T20:15:25.027

哇，事实证明这是可能的（尽管很丑）！

如果您没有时间或懒得通读整个解释，这里是执行它的代码：

```
$str = '0 1 2 3 4 5 6 7 8 9 10 11 12 13 19 20 29 99 100 139';
$str = preg_replace("/\d+/", "$0~", $str);
$str = preg_replace("/$/", "#123456789~0", $str);
do
{
$str = preg_replace(
    "/(?|0~(.*#.*(1))|1~(.*#.*(2))|2~(.*#.*(3))|3~(.*#.*(4))|4~(.*#.*(5))|5~(.*#.*(6))|6~(.*#.*(7))|7~(.*#.*(8))|8~(.*#.*(9))|9~(.*#.*(~0))|~(.*#.*(1)))/s",
    "$2$1",
    $str, -1, $count);
} while($count);
$str = preg_replace("/#123456789~0$/", "", $str);
echo $str; 
```

现在让我们开始吧。

因此，首先，正如其他人提到的那样，即使您循环它也不可能在单个替换中进行（因为您将如何将相应的增量插入单个数字）。但是，如果您先准备字符串，则可以循环使用单个替换。这是我使用 PHP 的演示实现。

我使用了这个测试字符串：

```
$str = '0 1 2 3 4 5 6 7 8 9 10 11 12 13 19 20 29 99 100 139'; 
```

首先，让我们通过附加标记字符来标记我们想要增加的所有数字（我使用`~`，但您可能应该使用一些绝对不会出现在目标字符串中的疯狂 Unicode 字符或 ASCII 字符序列。

```
$str = preg_replace("/\d+/", "$0~", $str); 
```

由于我们将一次替换每个数字的一​​位数字（从右到左），我们只需在每个完整数字后添加该标记字符。

现在主要的技巧来了。我们在字符串的末尾添加了一个小“查找”（也用您的字符串中不出现的唯一字符分隔；为简单起见，我使用了`#`）。

```
$str = preg_replace("/$/", "#123456789~0", $str); 
```

我们将使用它来替换相应的后继数字。

现在是循环：

```
do
{
$str = preg_replace(
    "/(?|0~(.*#.*(1))|1~(.*#.*(2))|2~(.*#.*(3))|3~(.*#.*(4))|4~(.*#.*(5))|5~(.*#.*(6))|6~(.*#.*(7))|7~(.*#.*(8))|8~(.*#.*(9))|9~(.*#.*(~0))|(?<!\d)~(.*#.*(1)))/s",
    "$2$1",
    $str, -1, $count);
} while($count); 
```

好吧，这是怎么回事？匹配模式对每个可能的数字都有一个替代方案。这会将数字映射到继任者。以第一个替代方案为例：

```
0~(.*#.*(1)) 
```

这将匹配任何`0`后面跟着我们的增量标记`~`，然后它匹配所有直到我们的作弊分隔符和相应的后继（这就是我们把每个数字都放在那里的原因）。如果您看一下替换，它将被替换为`$2$1`（然后是`1`我们匹配的所有内容`~`以将其放回原位）。请注意，我们`~`在此过程中删除了 。`0`从to增加一个数字`1`就足够了。数字已成功增加，没有结转。

`1`接下来的 8 个选项与的数字完全相同`8`。然后我们处理两个特殊情况。

```
9~(.*#.*(~0)) 
```

当我们替换 时`9`，我们不会删除增量标记，而是将其放在结果的左侧`0`。这（结合周围的循环）足以实现结转传播。现在还剩下一种特殊情况。对于仅由`9`s 组成的所有数字，我们将`~`在数字前面加上。这就是最后一个替代方案的用途：

```
(?<!\d)~(.*#.*(1)) 
```

如果我们遇到 a`~`前面没有数字（因此是否定的向后看），它一定是一直通过一个数字的，因此我们只需将它替换为 a `1`。我认为我们甚至不需要消极的后视（因为这是检查的最后一个替代方案），但这样感觉更安全。

`(?|...)`关于整个图案的简短说明。这确保我们总是在相同的引用中找到两个匹配项的替代项`$1`和`$2`（而不是字符串中更大的数字）。

最后，我们添加`DOTALL`修饰符 ( `s`)，以使其适用于包含换行符的字符串（否则，只会增加最后一行中的数字）。

这使得替换字符串相当简单。我们只是先写`$2`（我们在其中捕获了后继标记，可能还有结转标记），然后我们将匹配的所有其他内容放回原处`$1`。

就是这样！我们只需要从字符串末尾删除我们的hack，我们就完成了：

```
$str = preg_replace("/#123456789~0$/", "", $str);
echo $str;
> 1 2 3 4 5 6 7 8 9 10 11 12 13 14 20 21 30 100 101 140 
```

所以我们可以完全在正则表达式中做到这一点。我们唯一的循环总是使用相同的正则表达式。我相信这是我们在不使用`preg_replace_callback()`.

当然，如果我们的字符串中有带小数点的数字，这将做可怕的事情。但这可能可以通过第一次准备更换来解决。

**更新：**我刚刚意识到，这种方法会立即扩展到任意增量（不仅仅是`+1`）。只需更改第一个替换。您追加的数量`~`等于您应用于所有数字的增量。所以

```
$str = preg_replace("/\d+/", "$0~~~", $str); 
```

将字符串中的每个整数递增`3`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-18T02:17:25.683

我设法让它在 3 次替换中工作（没有循环）。

**tl;博士**

```
s/$/ ~0123456789/

s/(?=\d)(?:([0-8])(?=.*\1(\d)\d*$)|(?=.*(1)))(?:(9+)(?=.*(~))|)(?!\d)/$2$3$4$5/g

s/9(?=9*~)(?=.*(0))|~| ~0123456789$/$1/g 
```

**解释**

让是一个*不会*出现在文本中任何地方`~`的特殊字符。

 *1.  如果在文本中找不到一个字符，那么就没有办法让它神奇地出现。所以首先我们在最后插入我们关心的字符。

    ```
    s/$/ ~0123456789/ 
    ```

    例如，

    ```
    0 1 2 3 7 8 9 10 19 99 109 199 909 999 1099 1909 
    ```

    变成：

    ```
    0 1 2 3 7 8 9 10 19 99 109 199 909 999 1099 1909 ~0123456789 
    ```

2.  接下来，对于每个数字，我们（1）增加最后一个非（如果*都是*s，则在`9`前面加上 a ），以及（2）“标记”每个尾随组s。`1`*`9``9`*

     *```
    s/(?=\d)(?:([0-8])(?=.*\1(\d)\d*$)|(?=.*(1)))(?:(9+)(?=.*(~))|)(?!\d)/$2$3$4$5/g 
    ```

    例如，我们的示例变为：

    ```
    1 2 3 4 8 9 19~ 11 29~ 199~ 119~ 299~ 919~ 1999~ 1199~ 1919~ ~0123456789 
    ```* 
**   最后，我们 (1) 用 s 替换每个“标记”的`9`s组`0`，(2) 删除`~`s，以及 (3) 删除最后的字符集。

    ```
    s/9(?=9*~)(?=.*(0))|~| ~0123456789$/$1/g 
    ```

    例如，我们的示例变为：

    ```
    1 2 3 4 8 9 10 11 20 100 110 200 910 1000 1100 1910 
    ```* 

 ***PHP 示例**

```
$str = '0 1 2 3 7 8 9 10 19 99 109 199 909 999 1099 1909';
echo $str . '<br/>';
$str = preg_replace('/$/', ' ~0123456789', $str);
echo $str . '<br/>';
$str = preg_replace('/(?=\d)(?:([0-8])(?=.*\1(\d)\d*$)|(?=.*(1)))(?:(9+)(?=.*(~))|)(?!\d)/', '$2$3$4$5', $str);
echo $str . '<br/>';
$str = preg_replace('/9(?=9*~)(?=.*(0))|~| ~0123456789$/', '$1', $str);
echo $str . '<br/>'; 
```

输出：

```
0 1 2 3 7 8 9 10 19 99 109 199 909 999 1099 1909
0 1 2 3 7 8 9 10 19 99 109 199 909 999 1099 1909 ~0123456789
1 2 3 4 8 9 19~ 11 29~ 199~ 119~ 299~ 919~ 1999~ 1199~ 1919~ ~0123456789
1 2 3 4 8 9 10 11 20 100 110 200 910 1000 1100 1910 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-17T19:30:27.210

> 可以单次替换吗？

不。

> 如果不是，是否至少可以在给定上限的单个替换中，例如高达 9999 的数字？

不。

你甚至不能用它们各自的继任者替换 0 到 8 之间的数字。匹配并分组此号码后：

```
/([0-8])/ 
```

你需要更换它。但是，正则表达式不是对数字进行操作，而是对字符串进行操作。所以你可以用这个数字的两倍替换“数字”（或更好：数字），但正则表达式引擎不知道它正在复制一个包含数值的字符串。

即使你会这样做（愚蠢）：

```
/(0)|(1)|(2)|(3)|(4)|(5)|(6)|(7)|(8)/ 
```

这样正则表达式引擎“知道”如果组 1 匹配，则数字`'0'`匹配，它仍然无法进行替换。您不能指示正则表达式引擎用 digit 替换 group 1 ，用 digit 替换 group等`'1'`。当然，像 PHP 这样的一些工具可以让您用相应的替换字符串定义几个不同的模式，但我的印象是不是你想的。`'2'``'2'`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T19:25:05.507

仅通过正则表达式搜索和替换是不可能的。

您必须使用其他东西来帮助实现这一目标。您必须使用手头的编程语言来增加数字。

**编辑：**

作为**[单一 Unix 规范](http://pubs.opengroup.org/onlinepubs/007908799/xbd/re.html)**的一部分，正则表达式定义没有提到支持计算算术表达式或执行算术运算的能力的正则表达式。

* * *

尽管如此，我知道一些风格（TextPad，Windows 编辑器）允许您将其`\i`用作替代术语，它是找到搜索字符串多少次的增量计数器，但它不会评估或将找到的字符串解析为数字它也不允许向其添加数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-25T17:49:45.790

我需要从无法修改的管道中将输出文件的索引增加一个。经过一些搜索后，我在此页面上获得了成功。虽然这些读数是有意义的，但它们确实没有为问题提供可读的解决方案。是的，只用正则表达式就可以；不，它不是那么容易理解。

在这里，我想给出一个可读的解决方案`Python`，这样其他人就不需要重新发明轮子了。我可以想象你们中的许多人可能最终得到了类似的解决方案。

这个想法是将文件名分成三组，并格式化匹配字符串，使递增的索引是中间组。然后可以只增加中间组，之后我们再次将三个组拼凑在一起。

```
import re
import sys
import argparse
from os import listdir
from os.path import isfile, join

def main():
    parser = argparse.ArgumentParser(description='index shift of input')
    parser.add_argument('-r', '--regex', type=str,
            help='regex match string for the index to be shift')
    parser.add_argument('-i', '--indir', type=str,
            help='input directory')
    parser.add_argument('-o', '--outdir', type=str,
            help='output directory')

    args = parser.parse_args()
    # parse input regex string
    regex_str = args.regex
    regex = re.compile(regex_str)
    # target directories
    indir = args.indir
    outdir = args.outdir

    try:
        for input_fname in listdir(indir):
            input_fpath = join(indir, input_fname)
            if not isfile(input_fpath): # not a file
                continue

            matched = regex.match(input_fname)
            if matched is None: # not our target file
                continue
            # middle group is the index and we increment it
            index = int(matched.group(2)) + 1
            # reconstruct output
            output_fname = '{prev}{index}{after}'.format(**{
                'prev'  : matched.group(1),
                'index' : str(index),
                'after' : matched.group(3)
            })
            output_fpath = join(outdir, output_fname)

            # write the command required to stdout
            print('mv {i} {o}'.format(i=input_fpath, o=output_fpath))
    except BrokenPipeError:
        pass

if __name__ == '__main__': main() 
```

我有这个脚本名为`index_shift.py`. 举一个用法示例，我的文件名为`k0_run0.csv`，用于使用参数引导机器学习模型的运行`k`。参数`k`从零开始，所需的索引映射从一开始。首先我们准备输入和输出目录以避免覆盖文件

```
$ ls -1 test_in/ | head -n 5
k0_run0.csv
k0_run10.csv
k0_run11.csv
k0_run12.csv
k0_run13.csv
$ ls -1 test_out/ 
```

要查看脚本如何工作，只需打印其输出：

```
$ python3 -u index_shift.py -r '(^k)(\d+?)(_run.+)' -i test_in -o test_out | head -n5
mv test_in/k6_run26.csv test_out/k7_run26.csv
mv test_in/k25_run11.csv test_out/k26_run11.csv
mv test_in/k7_run14.csv test_out/k8_run14.csv
mv test_in/k4_run25.csv test_out/k5_run25.csv
mv test_in/k1_run28.csv test_out/k2_run28.csv 
```

它生成 bash`mv`命令来重命名文件。现在我们将这些线直接导入`bash`.

```
$ python3 -u index_shift.py -r '(^k)(\d+?)(_run.+)' -i test_in -o test_out | bash 
```

检查输出，我们已经成功地将索引移动了一个。

```
$ ls test_out/k0_run0.csv
ls: cannot access 'test_out/k0_run0.csv': No such file or directory
$ ls test_out/k1_run0.csv
test_out/k1_run0.csv 
```

您也可以使用`cp`代替`mv`. 我的文件有点大，所以我想避免重复它们。您还可以重构作为输入参数转换的数量。我没有打扰，因为我的大部分用例都是移位。**

# jquery - 隐藏其他一切，但

> ID：12941368
> 
> 赞同：1
> 
> 时间：2012-10-17T18:56:59.073
> 
> 标签：jquery

***这是代码：http:*** [//jsfiddle.net/t2nite/KCY8g/](http://jsfiddle.net/t2nite/KCY8g/)

我试图让**`SHOW`**按钮下方的**`HIDE/SHOW ALL`**按钮是，如果您按下一个按钮，它将显示它的文本并隐藏其他文本。

我使用了这段代码，但是只要我在任何按钮上点击显示，它就会显示和隐藏自己。

```
$(".show").click(function() {
   $(this).parent().find("p").show(200);
   $("p").not(this).hide(200);
});​ 
```

帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:03:00.457

您的问题是`this`在显示功能中不是`<p>`按钮。

```
$(".show").click(function() {
    var $thisP = $(this).parent().find("p")
    $thisP.show(200);
    $("p").not($thisP).hide(200);
});​ 
```

[http://jsfiddle.net/KCY8g/11/](http://jsfiddle.net/KCY8g/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:02:18.163

[jsFiddle 演示](http://jsfiddle.net/DNpKN/)

基本上你想隐藏除当前区域之外的所有“itsawrap p”区域。

```
$(".show").click(function() {
    var _p = $(this).parent().find('p');
    // maybe even do: $(this).closest('.itsawrap').find('p');
    // (if you ever think you'll wrap any of these things in other divs/etc

    _p.show(200);
    $('.itsawrap p').not(_p).hide();
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:02:10.880

将显示代码更改为：

```
$(".show").click(function() {
    var container = $(this).closest(".itsawrap");
    $(".itsawrap").not(container).find("p").hide(200);
    container.find("p").show(200);
});​ 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/6ypRz/](http://jsfiddle.net/jfriend00/6ypRz/)

这适用于容器级别，因此您可以在所需的容器上进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:06:59.390

问题出在`this`.

```
$(".show").click(function() {
    var p = $(this).parent().find("p");
    p.show(200);
    $("p").not(p).hide(200);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T19:08:06.840

最短的方法之一：

```
$(".show").click(function(e) {
    $("p").not($(this).parent().find("p").show(200)).hide(200);
}); 
```

[jsfiddle](http://jsfiddle.net/librasoft/KCY8g/16/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T19:12:21.223

错误是父“this”是按钮，所以 $("p").not(this).hide(200); 说除了你的按钮之外的所有 p，它仍然是所有 p。

```
$(".show").click(function() {
     var parent = $(this).parent();
     $(".itsawrap").not(parent).find('p').hide(200);
     parent.find('p').show(200);
});​ 
```

[http://jsfiddle.net/renekoch/KCY8g/17/](http://jsfiddle.net/renekoch/KCY8g/17/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T19:03:17.383

像这样？

```
$("#btn").click(function() {
    var oneshow = false;
    $(".para2, .para3, .para4").each(function() {
        if ($(this).is(":visible")) {
            oneshow = true;
        }
    });
    if (oneshow == true) {
        $(".para2, .para3, .para4").hide(200);
    } else {
        $(".para2, .para3, .para4").show(200);
    }
});

$(".hide").click(function() {
    $(this).parent().find("p").hide(200);
});

$(".show").click(function() {
    var p = $(this).parent().find("p");
    $(p).show(200);
    $(parent).not(p).hide(200);
});​ 
```

# excel - 如何在excel 2010中转置

> ID：12941370
> 
> 赞同：0
> 
> 时间：2012-10-17T18:57:03.040
> 
> 标签：excel, vba

我有一个格式如下的 excel 表

```
a 2 3 4 0 0 0 0 0   
a 2 5 6 7 0 0 0 0  
a 4 5 9 0 0 0 0 0  
b 5 5 9 0 0 0 0 0   
b 1 1 1 1 1 1 1 1 
```

我想结束这样的事情

```
a 2  
a 3  
a 4  
a 2  
a 5  
a 6  
a 7  
a 4  .....  
b 1  
b 1   
b 1 .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:00:42.710

尝试这个

```
Sub move()

    Dim cell As Range, _
        found As Range
    Dim letter As String

    Set cell = Range("B1")
    Set found = Range("A:A").Find("*", Range("A1"), searchdirection:=xlPrevious).Offset(2, 0)

    Do While (cell.Value <> "")
        letter = cell.Offset(0, -1).Value
        Do While (cell.Value <> 0)
            found.Value = letter
            found.Offset(0, 1).Value = cell.Value
            Set cell = cell.Offset(0, 1)
            Set found = found.Offset(1, 0)
        Loop
        Set cell = Cells(cell.Row + 1, 2)
    Loop

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:01:55.907

[我能够通过连接和去连接的组合以及来自http://www.cpearson.com/excel/TableToColumn.aspx](http://www.cpearson.com/excel/TableToColumn.aspx)的公式很快地做到这一点

```
=$A1&","&B1 
```

![防爆1](../Images/6fdc52a619596113186c7fa14cafa318.png)

```
=OFFSET($K$1:$R$5,TRUNC((ROW()-ROW($U$1))/COLUMNS($K$1:$R$5),0),MOD(ROW()-ROW($U$1),COLUMNS($K$1:$R$5)),1,1) 
```

![Ex2](../Images/f823e06ef94cd6ec5cb50288d3d373cb.png)

```
=LEFT(U1,FIND(",",U1,1)-1) 
```

![Ex3](../Images/6653b801c8c6bb27918bb9710380ffed.png)

```
=RIGHT(U1,FIND(",",U1,1)-1) 
```

![防爆4](../Images/3c042848b94b153167e0976463e7e784.png)

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:40:20.197

查看我的[unpivot 加载项](http://tduhameau.wordpress.com/2012/09/24/the-unpivot-add-in/)（只需添加一个标题行，之后您可以将其删除）。它将以您需要的格式返回数据。

# wpf - 如何为 dll 中的自定义控件分配资源字典

> ID：12941373
> 
> 赞同：5
> 
> 时间：2012-10-17T18:57:08.267
> 
> 标签：wpf, custom-controls, resourcedictionary

`MyControl.cs`我的应用程序项目 (.exe) 中有一个 WPF 自定义控件，其样式位于`MyControlResources.xaml`. 此 xaml 被指定`app.xaml`为合并字典的一部分。一切正常。

现在我想将此自定义控件移动到应用程序引用的现有 DLL 项目中。有没有一种方法可以在 DLL 中创建资源字典“分配”并使其对调用者透明，即应用程序项目可以像任何不需要您了解资源字典的任何内置控件一样使用它？

我读过有关创建一个新的自定义控件项目的文章可以解决问题，但这只是我不想为其创建新项目的一个控件。任何人都知道如何在现有的类库 DLL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:00:47.650

[这个答案](https://stackoverflow.com/a/5639164/986080)帮助我找到了诀窍。

1.  创建一个名为`Themes\Generic.xaml`合并资源字典的文件。

2.  将以下属性添加到`Assembly.cs`

    [程序集：ThemeInfo(ResourceDictionaryLocation.None, ResourceDictionaryLocation.SourceAssembly)]

# vim - 在 Vim 中用字符串替换行号显示

> ID：12941385
> 
> 赞同：1
> 
> 时间：2012-10-17T18:57:54.380
> 
> 标签：vim

我想在我的 vimrc 中创建一个插件或一段代码来使用 vim 作为 DNA 序列查看器。为此，我需要永久显示一行的名称。

例如：

```
String1  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
String2  BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB
String3  CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC 
```

`String1`,`String2`并且`String3`必须替换为 vim 中的行号，例如，`String543`如果该行位于文件的第 543 行。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:20:13.820

请参阅该[`statusline`选项](http://vimdoc.sourceforge.net/htmldoc/options.html#%27statusline%27)的帮助。

您可能希望使用如下状态行字段：

```
%{substitute(getline(".")," .*","","")} 
```

显示当前行的第一个空格分隔的单词。
（不要忘记转义`和`"`设置时。）`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:10:18.553

ShowMarks.vim[插件](http://www.vim.org/scripts/script.php?script_id=152)“关闭” - 如果你喜欢

它将显示文件内标记的位置：

![在此处输入图像描述](../Images/9c5945145724564dd4676e225b2eff89.png)

*   将此与[`mksession`](http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession)和[`viminfo`](http://vimdoc.sourceforge.net/htmldoc/starting.html#viminfo-file)一起使用以在重新启动时保留标记。
*   您可以使用 :marks 生成标记列表：

    ```
    mark line  col file/text
     '     13   29 cout << std::boolalpha << b << endl;
     a     11    0 smatch m;
     b     13    0 cout << std::boolalpha << b << endl;
     c     16    0 cout << m[0] << endl;
     q     20    0 }
     M      4    0 using namespace std;
     6      8    0 
     "      5    0 
     [      1    0 #include <regex>
     ]     20 2147483647 }
     ^     13   30 cout << std::boolalpha << b << endl;
     .     18    0 cout << endl;
     <     18    0 cout << endl;
     >     18    0 cout << endl; 
    ````

# mysql - 制作博客；无法在 MongoDB 和 MySQL 之间做出决定

> ID：12941387
> 
> 赞同：6
> 
> 时间：2012-10-17T18:57:58.157
> 
> 标签：mysql, mongodb, blogs

是的，所以我即将开始使用 Node.js 为我的网站写博客（就像任何学习过程一样），我一直在激烈地与自己争论使用 MySQL 或 MongoDB 中的哪一个。

到处搜索已经产生了一些“如何在 Mongo 中写博客”指南，但它们似乎并没有涵盖我遇到的问题。这是我的困境：

如果我要使用*MySQL*，我会想象我的架构是这样的：

### 帖子：

```
ID, USER, DATE, TITLE, TAGS 
```

### 评论：

```
POST_ID, USER, DATE, MESSAGE 
```

### 用户：

```
ID, SCREEN_NAME, IMAGE_URL 
```

因此，每个帖子都有关联的评论，并且帖子和评论都有关联的用户。优点是如果用户希望更改他们的屏幕名称或图像，只需更新用户表中的一行。但是，我不确定如何获取所有包含 X 标签的帖子，除非我有多个字段用于多个潜在标签？

或者，使用类似*MongoDB*的东西，我正在研究这样的格式：

### 帖子集合：

```
{ 
    {
    _ID: something
    USER: {id: id, name: "screen name", image: "image_url"}
    DATE: ...
    TITLE: ...
    TAGS: [tag1, tag2...]
    COMMENTS: 
         [
         {USER:someone, DATE:something, MESSAGE:"hi"},
         {USER:someone, DATE:something, MESSAGE:"another message"}
         ]
    },
    {
    _ID: something,
    USER: {id: id, name: "screen name", image: "image_url"},
    DATE: ...
    TITLE: ...
    TAGS: [tag1, tag2...]
    COMMENTS: 
         [
         ...
         ]
    },
} 
```

因此，评论嵌入在每个帖子中，这看起来很自然。

在这里，一个查询可以检索到所有匹配的帖子，这很棒。另一方面，如果我需要更新用户使用的屏幕名称或图像怎么办？挖掘给定文档中的嵌入对象似乎很困难，更不用说更新每个帖子中的所有相关记录了。

我可以将评论移到一个单独的集合中以使它们更易于访问，但我仍然面临着对诸如屏幕名称之类的内容进行大量更新。

### 所以...

从本质上讲，我更喜欢使用 MongoDB，因为它可以做的事情，它可以很容易地做，并且全面使用一种语言是很好的。但是，我不禁觉得我需要采用关系方法才能“正确”完成工作。

有没有人有过用任何一种或两种语言做类似事情的经验？

您对此有何看法，特别是您如何处理用户与评论/帖子之间的关系？

在此先感谢您的帮助:) 詹姆斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T21:38:57.637

这个问题绝对不会归结为性能，因为 MongoDB 和 SQL 都会以完全相同的方式选择这样的小型数据集，因此不会有真正可衡量的性能提升。

在这种情况下，MongoDB 的主要思想是能够将许多表嵌套在一个表中，从而减少更新信息的查询，例如，您只需查询一个表，而不是查询 12 个表。不仅如此，有时模式对于您实际使用数据的方式可能更自然。

我会更改您的架构中的一些内容：

```
USER: {id: id, name: "screen name", image: "image_url"} 
```

这应该只是`ObjectId`与用户行相关的，并在评论中再次出现：

```
{USER:someone, DATE:something, MESSAGE:"hi"} 
```

使用一个`ObjectId`字段`USER`。这些`ObjectId`s 将与用户集合有关。还要去掉那些大写字母，我觉得编码会很痛苦。

至于处理关系：-您将可重复信息作为子文档嵌套到实体中（通常在第一个 NF 中被规范化），但这并不意味着您应该嵌套到无穷大，通常建议最多 3 级用于查询兼容性也牢记应用程序实体的边界，`blog`例如`post`和`user`。

现在您必须管理非嵌套关系，例如`blog`和`user`行（因为帖子将嵌套评论等）。解决这些关系的方法是客户端，因为 MongoDB 没有关系理想（它是 RDB 异端）。

您只需执行 MySQL 通常会在服务器端客户端执行的操作，即单独挑选用户，然后根据该用户 id 挑选帖子，而不是挑选出每一行的巨大结果集作为用户和帖子之间的连接表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:59:52.423

我不同意需要一种关系方法才能正确完成事情。

决定取决于您是否可以免除 ACID 和关系细节。

如果您的博客是基于文档的，那么 NoSQL 方法也许可以正常工作。

更好的是，如果您使用 Java 或 C# 等面向对象的语言，您可以抽象出如何在接口后面持久化事物的细节，并将一个实现换成另一个实现。你不必以这种方式被锁定。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-17T18:59:32.033

我只会使用 wordpress，它非常受欢迎，而且我从来没有遇到过任何性能问题！当今全球 25% 的网站使用 wordpress！

# raphael - 欧洲地图中的拉斐尔情节点

> ID：12941389
> 
> 赞同：0
> 
> 时间：2012-10-17T18:58:04.020
> 
> 标签：raphael

1.  你好，

    我有一张欧洲拉斐尔地图。现在我想在地图中的某些城市上绘制点。我尝试将纬度 n 经度转换为其中的绘图点。但不幸的是它正在其他地方绘制。是不是我们应该有世界地图绘图点？这是我的代码。

    脚本类型="text/javascript" charset="utf-8">

    ```
     $(document).ready(function() {
            var rsr = Raphael('map', '631', '686');
            var attr = {
                       fill: "#C0C0C0",
                       stroke: "#666",
                       "stroke-width": 1,
                       "stroke-linejoin": "round"
                   };
               var world = {};
               world.Portugal = rsr.path("56,0.133-1.32,0.527c-0.661,1.321-0.264,2.906-  0.925,4.228c-0.528,1.057-3.698,5.415-3.434,6.868c0.132,0.526,1.056-0.529,1.584-0.529c0.792-0.132,1.585,0.133,2.377,0c0.396,0,0.792-0.396,1.188-0.264 
    ```

    c2.113,0.527,8.981,5.019,9.906,4.887c0.396,0,4.49-1.981,4.754-2.113C57.876,621.536,58.537,621.536,59.197,621.536L59.197,621.r)r.5attr.6 .Spain = rsr.path(" M194.57,552.728c0.924,0.396,1.981,0.63.434,4.754c-,0,0.792,0 c0.661,0.133,1.453,0.133,1.849,0.528c0.66,0.528 ,0.264,1.717,0.924,2.113v0.132C190.74,552.066,190.476,553.916,194.57,552.728 L194.57,552.728z").attr(attr);

    ```
     var current = null;
                for(var country in world) {
                 (function (st, country) {
                   country = country.toLowerCase();
                     st[0].style.cursor = "pointer";
                     st[0].onmouseover = function () { 
                         st.animate({fill:"#808080", stroke: "#ccc"}, 500);
                     };
                     st[0].onmouseout = function () {
                         st.animate({fill: "#C0C0C0", stroke: "#666"}, 500);
                         st.toFront();
                         R.safari();
                     };
                     st[0].onclick = function () {
                     st.toFront();
                           st.animate({
                             fill: '#808080',
                             transform: 's1.5 '
                         }, 1000);
                     };
                 })(world[country], country);
               }
             });   
      var cities = {};//here i define the cities with lat n long but both draws in thesame point all time
            cities.rome = plot(55.70466,13.19101,1);
          cities.copenhagen = plot(55.676097,12.568337,1);
            var city_attr = {
                    fill:"#FF7F50",
                     stroke:"#666",
                    opacity: .3
                };
            function plot(lat,lon,size) {
                size = size * .5 + 4;
                return   rsr.circle(lon2x(lon),lat2y(lat),size).attr(city_attr);
              }

            function lon2x(lon) {
                var xfactor = 1.5255;
                var xoffset = 263.58;
                var x = (lon * xfactor) + xoffset;
                return x;           }           function lat2y(lat) {
                 var yfactor = -1.5255;
                    var yoffset = 130.5;
                    var y = (lat * yfactor) + yoffset;
                    return y;           }
         }); 
          var myMarker = rsr.ellipse(513.859,35.333, 7, 7).attr({
              stroke: "none", 
              opacity: .7, 
              fill: "#f00"
            }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:47:14.603

地图编码的坐标似乎相当随意。如果是这样，就没有[简单的]方法可以自动确定映射。我建议在其自己的坐标系中获取矢量图像的边界框，并在常规地图上的纬度/经度坐标中获取相应的边界框，并从中导出映射，至少作为第一近似值。

# php - Laravel eloquent - One to many relationships

> ID：12941397
> 
> 赞同：3
> 
> 时间：2012-10-17T18:58:29.103
> 
> 标签：php, laravel, eloquent, laravel-3

I have just got started with laravel v3 and am trying to wrap my head around eloquent's One-To-Many relationships by creating a blog, I have posts that have a many to one relationship with categories (Each Post is linked to a category).

I have the following tables with the following fields:

**posts**: id, title, body, date_created, category_id

**categories**: id, name

I have the following two models:

```
class Category extends Eloquent 
{
    public function posts()
    {
        return $this->has_many('Post');
    }
}

class Post extends Eloquent 
{
    public function categories()
    {
        return $this->belongs_to('Category');
    }
} 
```

I figured out how to get all posts by passing in a category id:

```
category::find(2)->posts()->get()) 
```

I just need help on finding out how to get all posts, and get their corrisponding categories. So at the end of the day in the view I can output something like this:

```
{$post->title} -  Category: {$post->category->name} 
```

Thanks for any help!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T19:10:09.133

I hope you will find these tips useful.

On the post model rename the `categories` function to `category`. A `belongs_to` relation is singular, so this post has one and only one category.

Relations also have a short hand, this shorthand syntax is useful because it is cleaner to use and the results are cached. Heres an example:

```
$category = Category::find(1);
foreach($category->posts as post) {
    echo $post->title;
} 
```

Now an example of how to get all the posts with their related categories:

```
$posts = Post::all();
foreach($posts as $post) {
    echo $post->category->name;
} 
```

Now one thing you will quickly notice when doing this second example is the number of queries increase for each post you have. This is called the N+1 effect. Example, if you have 5 posts, one query will be executed to get those posts. Then in the loop we are executing a query to get the category. This results in 6 total queries.

To solve this problem, use eager loading, which reduces those 6 queries in our example down to 2.

```
$posts = Post::with('category')->all();
foreach($posts as $post) {
    echo $post->category->name;
} 
```

I hope that helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T20:49:27.863

Laravel 4 has a slightly different syntax , it uses camelCase to build expressions (while L3 uses snake_Case syntax).Laravel's (L4) new syntax is now [PSR-1 compliant](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md) .

```
L3 : $this->belongs_to('Category');
L4 : $this->belongsTo('Category'); 
```

To prove that "eager loading" boosts the performance of your application (by minimizing database queries) , use Laravel's event eco-system .

```
// app/routes.php 
Event::listen('illuminate.query', function($sql) { echo '<h4>' . $sql . '</h4>' ;}); 
```

.

# java - 如何使用 JAXB 或 Jackson 有条件地序列化？外部视图与内部视图

> ID：12941398
> 
> 赞同：4
> 
> 时间：2012-10-17T18:58:37.097
> 
> 标签：java, xml, json, jaxb, jackson

我正在构建一个 RESTful API，并且我有一个用例，我需要能够呈现我的数据的两个不同视图。一种我们可以在内部使用，一种我们将在外部公开。此外，我的 API 需要同时支持 XML 和 JSON。

对于我的 JSON 响应，这对 Jackson 来说非常容易。我可以通过使用 JsonViews 的功能有条件地在我的 JSON 响应中包含字段：[http ://wiki.fasterxml.com/JacksonJsonViews](http://wiki.fasterxml.com/JacksonJsonViews)

首先，您需要创建一个简单的类来指定您的视图：

```
public class Views {

    public static class External {}

    public static class Internal extends External {}
} 
```

现在使用我的视图类，我只是用它们所属的视图来注释我的字段，如下所示：

```
 @JsonView(Views.External.class)
    private String external = "External";

    @JsonView(Views.Internal.class)
    private String internal = "Internal"; 
```

然后，您可以序列化对象并指定要使用的视图：

```
 ObjectMapper jsonMapper = new ObjectMapper();
    ObjectWriter externalWriter = jsonMapper.writerWithView(Views.External.class);
    String externalJson = externalWriter.writeValueAsString(new ResponseObject()); 
```

这适用于 JSON，但不幸的是，目前 XML 不支持同样的方法。我怎样才能用 XML 达到同样的效果？如果需要进行 XML 转换，我愿意使用 JAXB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:16:39.617

我能够通过添加一个新库来覆盖默认值来实现这一点：

```
 <!-- Used to Convert our objects to JSON and XML -->
        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-databind</artifactId>
            <version>2.0.6</version>
        </dependency>
        <dependency>
            <groupId>com.fasterxml.jackson.dataformat</groupId>
            <artifactId>jackson-dataformat-xml</artifactId>
            <version>2.0.5</version>
        </dependency>
        <dependency>
            <groupId>com.fasterxml</groupId>
            <artifactId>aalto-xml</artifactId>
            <version>0.9.8</version>
        </dependency> 
```

所以现在我可以使用 Jackson 和他们的 @JsonView 功能序列化为 JSON**和XML。**很干净！我添加的一个是 aalto-xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:38:28.370

**注意：** 我是**[EclipseLink JAXB (MOXy)](http://www.eclipse.org/eclipselink/moxy.php)**负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

EclipseLink JAXB (MOXy) 提供了一个外部映射文件。此映射文件可以增加或完全替换通过注释提供的元数据。下面是一个示例，其中相同的对象模型映射到两个不同的天气服务（Google 和 Yahoo）

*   [http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html](http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html)

MOXy 还支持 XML 和 JSON 绑定：

*   [http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html](http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html)

MOXy 还可以轻松地与 JAX-RS 实现集成：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# c# - 将 .net 4.0 语法 OfType 转换为 .net 3.5

> ID：12941399
> 
> 赞同：2
> 
> 时间：2012-10-17T18:58:50.160
> 
> 标签：c#, .net, excel, interop

我有这个 .NET 4.0 代码：

```
var myTable = tables[1];
myTable = tables.Item["Table1"];
myTable = tables.OfType<Excel.ListObject>().FirstOrDefault(t => t.Name == "Table1"); 
```

我正在尝试使用 .NET 3.5 进行编译并遇到一堆错误：

> 错误 23 语言不支持属性、索引器或事件“项目”；尝试直接调用访问器方法“Microsoft.Office.Interop.Excel.ListObjects.get_Item(object)”

和

> 错误 24“Microsoft.Office.Interop.Excel.ListObjects”不包含“OfType”的定义，并且最佳扩展方法重载“System.Linq.Queryable.OfType(System.Linq.IQueryable)”有一些无效参数

和

> 错误 25 实例参数：无法从“Microsoft.Office.Interop.Excel.ListObjects”转换为“System.Linq.IQueryable”

您能否指导我了解这些错误的确切含义，以便我可以尝试将其转换为 .NET 3.5？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:39:20.177

这个问题指的是给出的答案[这个命令需要至少两行源数据](https://stackoverflow.com/questions/12755248/this-command-requires-at-least-two-rows-of-source-data/12876478#comment17540673_12876478)；该代码显示了在代码中访问表/列表对象的 3 种不同方式。

这是我发布的代码：

```
 var myTable = tables[1];
    var myTable = tables.Item["Table1"];
    var myTable = tables.OfType<Excel.ListObject>().FirstOrDefault(t => t.Name == "Table1"); 
```

我的意思是说明在代码中访问表有不同的方法。

为了把它放在上下文中，我创建了一个带有一个名为“TestButton”的按钮的功能区。这是整个代码，应该适用于 3.5：

```
using Excel = Microsoft.Office.Interop.Excel;

    private void TestButton_Click(object sender, RibbonControlEventArgs e)
    {
        var worksheet = (Excel.Worksheet) Globals.ThisAddIn.Application.ActiveSheet;
        var tables = worksheet.ListObjects;
        var table = tables.Item["Table1"]; // this is the line you are referring to

        //do something with table
    } 
```

# oracle - Delphi TDBXTransaction '无效的事务对象'

> ID：12941403
> 
> 赞同：3
> 
> 时间：2012-10-17T18:59:00.810
> 
> 标签：oracle, delphi, transactions, dbexpress

首先，我是 Delphi 的新手，所以这可能是一个被忽视的“平凡细节”。[提前抱歉]

`'Invalid Transaction Object'`当我尝试通过连接到**Oracle** 11g DB的 datasnap 服务器运行事务时出现错误。

由于系统细节和公司业务计划，我们选择不使用**ClientDataSets**来处理我们的交易。相反，我们试图使 Snap 服务器非常通用，并且只通过接收查询和返回本机类型来处理数据访问。

话虽如此，这里有一些让我很适合的示例代码：

```
function TSnapMethods.TransUpdate: boolean;
var
  dbx: TDBXTransaction;
  params:TParams;
begin
  SqlCon.Open;
  dbx := SQLCon.DBXConnection.BeginTransaction(TDBXIsolations.ReadCommitted);
  try
      params:= TParams.Create(self);
      with Params.AddParameter do
      begin
        name:= 'param';
        DataType:= ftWideString;
        ParamType:= ptInput;
        asString:= 'Bugsville';
      end;
      with Params.AddParameter do
      begin
        name:= 'var';
        DataType:= ftWideString;
        ParamType:= ptInput;
        asString:= 'ZZZTOP';
      end;
      sqlcon.Execute('Update Name set City=:param Where Abrv=:var',params);

      SQLcon.CommitFreeAndNil(dbx);//Breaks here...
      result:= true;
  except
    Sqlcon.RollbackFreeAndNil(dbx);//Breaks here also...
    result:= false;
  end;        
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:50:34.387

通过调用`SQLCon.DBXConnection.BeginTransaction()`，您绕过了在调用SQLConnection 对象`TTransactionItem`时提交事务时检查的 internal 设置。`SQLcon.CommitFreeAndNil()`请注意，您是在`DBXConnection`对象上启动事务，但同样没有提交它。

代替

```
SQLCon.DBXConnection.BeginTransaction() 
```

和

```
SQLCon.BeginTransaction() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-15T19:07:26.110

From another source I got this helpful information: [http://codeverge.com/embarcadero.delphi.ide/record-not-found-or-changed-by-another/1061559](http://codeverge.com/embarcadero.delphi.ide/record-not-found-or-changed-by-another/1061559)

For start transaction:

```
transaction:=Datamodule.SqlConection.BeginTransaction(TDBXIsolations.ReadCommitted); 
```

For commit:

```
DataModule1.SqlConection.CommitFreeAndNil(Transacao); 
```

To rollback:

```
DataModule1.SqlConection.RollbackIncompleteFreeAndNil(Transacao) 
```

And use

> RollbackIncompleteFreeAndNil

instead

> RollbackIncompleteFreeAndNil

like referenced by:

[http://docwiki.embarcadero.com/Libraries/Tokyo/en/Data.SqlExpr.TSQLConnection.RollbackIncompleteFreeAndNil](http://docwiki.embarcadero.com/Libraries/Tokyo/en/Data.SqlExpr.TSQLConnection.RollbackIncompleteFreeAndNil)

Please try this and report the results.

# watin - 从下拉列表中随机选择？

> ID：12941406
> 
> 赞同：0
> 
> 时间：2012-10-17T18:59:09.210
> 
> 标签：watin

这里的问题是单个页面上有多个下拉菜单。比如说，我的 dropdown1 的值为 A、B、C、D、E、F 和 G。然后我的 dropdown2 的选项为 1、2、3、4、5、6。是否有可能让 Watin 看看可能该下拉菜单的值并随机选择一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:27:23.390

这是一个小例子 - 您必须根据自己的目的对其进行自定义，但您会得到大致的想法：

```
IE browser = new IE(@"http://www.w3schools.com/aspnet/demo_dropdownlist.aspx");
var options = browser.SelectList("drop1").Options;
Random rand = new Random();
int index = rand.Next(options.Count);
browser.SelectList("drop1").Select(options[index].ToString()); 
```

# ruby-on-rails - Rabl 1+N 查询和缓慢的视图加载

> ID：12941408
> 
> 赞同：1
> 
> 时间：2012-10-17T18:59:27.557
> 
> 标签：ruby-on-rails, activerecord, rabl

我们有一个 Rabl 视图，它由带有嵌套子级的 Rails 动作提供支持，结构如下：

```
:foo has many :bars
:bar has many :baz 
```

这意味着我们的 rabl 视图可能看起来像这样：

```
collection @foo
attributes (#whatever)
child(:bar) {attributes :baz} 
```

这非常有效，除了 Rabl 执行一个新查询来加载每个 bar 对象以及每个 baz 对象（最多有 7 个 baz 对象）。生成原始集合的查询需要不到 100 毫秒的时间返回，但总渲染时间需要 8 秒以上，并且每条`foo`记录包括大约 30 个额外的查询。我已经尝试使用`includes`语法来预加载关联的行，这样 Rabl 就不需要重新加载它们，但它似乎只是忽略了发送的信息。

我正在寻找关于如何优化此操作的想法，以便我们可以从中获得最佳性能。我不太确定从这里攻击的正确方法是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:46:38.520

看起来这个问题已经在这里解决了：

[https://github.com/nesquena/rabl/issues/142#issuecomment-2969107](https://github.com/nesquena/rabl/issues/142#issuecomment-2969107)

通过使用 object false 并将对象分配给这样的数组：

```
object false
child @cars.to_a do
extends "api/v1/cars/car"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:38:01.100

你厌倦了扩展命令吗？检查此链接它将帮助您[https://github.com/nesquena/rabl](https://github.com/nesquena/rabl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:04:04.207

解决这个问题的一种方法是[缓存](https://github.com/nesquena/rabl#caching)片段。

另一种方法是查看为什么`includes`不起作用。我的印象是它有效（因为我在我的代码库中使用它）。添加您的`includes`代码，让我们看看我们是否可以解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T19:20:40.267

不幸的是，我无法想出一种可接受的方式来使用 Rabl 加快速度，所以我不得不让这个端点手动构建响应对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T22:36:55.063

如果您有直接关系，即“属于”关系，则可以采取一种技巧来强制记录预加载。在您的控制器中，您将编写：

```
@foo = FooModel.all
@foo.bars.size
. . .
render 'foo/view' 
```

即使您有嵌套关系，这也可以：

```
@foo = FooModel.all
@foo.bars.size
@foo.bars.bazzes.size
. . .
render 'foo/view' 
```

"size" 方法通过它们的关联预加载所有对象，而不是将 rabl 委托给单个查询。

# vb.net - 如何显示数字

> ID：12941415
> 
> 赞同：0
> 
> 时间：2012-10-17T18:59:42.767
> 
> 标签：vb.net

这是我的 DataGrid 的内容

```
id

1
2
3A
4
5
6A
..
...
10V1 
```

我想从数据网格中获取最大数量。然后，我想在网格旁边的文本框中显示下一个数字（在这种情况下：11）

预期产出

```
id

1
2
3A
4
5
6A
..
...
10V1
11 
```

我尝试了以下代码：

```
textbox1.text = gridList.Rows(gridlist.RowCount() - 1).Cells(1).Value + 1 
```

如果前一行的值完全是数字，它会起作用。但是，如果该值为字母数字，我会收到以下错误：

```
Conversion from string "10V1" to type 'Double' is not valid. 
```

有人可以帮我解决这个问题吗？我正在寻找解决方案`VB.Net`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:17:52.890

您可能想考虑`Regex`这样做（根据我从您的问题中了解到的）

这是一个[相关的问题](https://stackoverflow.com/questions/7066150/regex-on-vb-net-to-get-only-first-few-numbers-from-left-to-right)。

`Regex.Match`将返回与表达式匹配的字符串部分...在您的情况下，您需要字符串中的第一个数字（尝试`"^\d+"`作为您的表达式，它将在字符串的开头找到任何一系列数字）。然后，您可以将结果字符串转换为 an`int`并向其添加 1。

希望这可以帮助！

编辑：这里有更多关于[正则表达式](http://www.regular-expressions.info/dotnet.html)的信息。

# python - 如何使用 SQLAlchemy 使用 SELECT COUNT(*) 计算行数？

> ID：12941416
> 
> 赞同：85
> 
> 时间：2012-10-17T18:59:48.527
> 
> 标签：python, sql, sqlalchemy

我想知道是否可以`SELECT COUNT(*) FROM TABLE`在 SQLAlchemy 中生成一个语句，而无需使用`execute()`. 如果我使用：

`session.query(table).count()`

然后它会产生类似的东西：

```
SELECT count(*) AS count_1 FROM
    (SELECT table.col1 as col1, table.col2 as col2, ... from table) 
```

这在带有 InnoDB 的 MySQL 中要慢得多。我正在寻找一种不需要表具有已知主键的解决方案，如[使用 SQLAlchemy 获取表中的行数中](https://stackoverflow.com/questions/10822635/get-the-number-of-rows-in-table-using-sqlalchemy)所建议的那样。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-17T20:03:28.237

我设法在两层上使用 SQLAlchemy 呈现以下 SELECT。

```
SELECT count(*) AS count_1
FROM "table" 
```

## SQL 表达式层的用法

```
from sqlalchemy import select, func, Integer, Table, Column, MetaData

metadata = MetaData()

table = Table("table", metadata,
              Column('primary_key', Integer),
              Column('other_column', Integer)  # just to illustrate
             )   

print select([func.count()]).select_from(table) 
```

## ORM 层的用法

你只是子类`Query`（你可能无论如何）并提供一个专门的`count()`方法，比如这个。

```
from sqlalchemy.sql.expression import func

class BaseQuery(Query):
    def count_star(self):
        count_query = (self.statement.with_only_columns([func.count()])
                       .order_by(None))
        return self.session.execute(count_query).scalar() 
```

请注意，这会`order_by(None)`重置查询的顺序，这与计数无关。

使用此方法，您可以`count(*)`在任何 ORM 查询上使用，这将遵守所有已指定的`filter`和`join`条件。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-10-17T19:56:13.183

仅查询一个已知列：

```
session.query(MyTable.col1).count() 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-06-04T01:48:42.263

我需要对具有许多连接的非常复杂的查询进行计数。我使用连接作为过滤器，所以我只想知道实际对象的数量。count() 是不够的，但我在这里的文档中找到了答案：

[http://docs.sqlalchemy.org/en/latest/orm/tutorial.html](http://docs.sqlalchemy.org/en/latest/orm/tutorial.html)

代码看起来像这样（计算用户对象）：

```
from sqlalchemy import func

session.query(func.count(User.id)).scalar() 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-09-14T10:19:00.760

在接受的答案中添加来自 ORM 层的**用法**： count(*) 可以使用 为 ORM 完成`query.with_entities(func.count())`，如下所示：

```
session.query(MyModel).with_entities(func.count()).scalar() 
```

它也可以用于更复杂的情况，当我们有连接和过滤器时 - 这里重要的是放置`with_entities`在连接之后，否则 SQLAlchemy 可能会引发`Don't know how to join`错误。

例如：

*   我们有`User`模型 ( `id`, `name`) 和`Song`模型 ( `id`, `title`, `genre`)
*   我们有用户歌曲数据 -`UserSong`模型（`user_id`, `song_id`, `is_liked`），其中`user_id`+`song_id`是主键）

我们想得到一些用户喜欢的摇滚歌曲：

```
SELECT count(*) 
  FROM user_song
  JOIN song ON user_song.song_id = song.id 
 WHERE user_song.user_id = %(user_id)
   AND user_song.is_liked IS 1
   AND song.genre = 'rock' 
```

可以通过以下方式生成此查询：

```
user_id = 1

query = session.query(UserSong)
query = query.join(Song, Song.id == UserSong.song_id)
query = query.filter(
    and_(
        UserSong.user_id == user_id, 
        UserSong.is_liked.is_(True),
        Song.genre == 'rock'
    )
)
# Note: important to place `with_entities` after the join
query = query.with_entities(func.count())
liked_count = query.scalar() 
```

完整的例子在[这里](https://github.com/serebrov/so-questions/blob/master/sql-alchemy/test_count_star_query.py)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-03T08:31:21.963

如果您正在使用 SQL 表达式样式方法，那么如果您已经拥有表对象，则还有另一种方法来构造 count 语句。

准备获取表对象。也有不同的方法。

```
import sqlalchemy

database_engine = sqlalchemy.create_engine("connection string")

# Populate existing database via reflection into sqlalchemy objects
database_metadata = sqlalchemy.MetaData()
database_metadata.reflect(bind=database_engine)

table_object = database_metadata.tables.get("table_name") # This is just for illustration how to get the table_object 
```

发出计数查询`table_object`

```
query = table_object.count()
# This will produce something like, where id is a primary key column in "table_name" automatically selected by sqlalchemy
# 'SELECT count(table_name.id) AS tbl_row_count FROM table_name'

count_result = database_engine.scalar(query) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-09T21:10:43.357

我不清楚您所说的“没有使用execute（）明确要求”是什么意思所以这可能正是您不要求的。OTOH，这可能对其他人有所帮助。

您可以只运行文本 SQL：

```
your_query="""
SELECT count(*) from table
"""
the_count = session.execute(text(your_query)).scalar() 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-03-08T07:57:24.693

以下是查找任何查询计数的方法。

```
aliased_query = alias(query)
db.session.query(func.count('*')).select_from(aliased_query).scalar() 
```

如果您想探索更多选项或阅读详细信息，这里是[参考文档的链接。](https://docs.sqlalchemy.org/en/14/orm/tutorial.html#counting)

# c# - 使用 Enterprise Library 5.0 Logging Block 打包日志

> ID：12941421
> 
> 赞同：3
> 
> 时间：2012-10-17T19:00:19.600
> 
> 标签：c#, enterprise-library

我正在使用 RollingFlatFileTraceListener 来保存日志文件。监听器的配置是这样的：

```
<listeners>
      <add name="Rolling Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        fileName="log/ReferentNet.log" footer="" formatter="Text Formatter"
        header="" rollFileExistsBehavior="Increment" rollSizeKB="1024"
        timeStampPattern="" maxArchivedFiles="10" traceOutputOptions="Callstack" />
</listeners> 
```

问题是，我能否以某种方式启用存档文件的打包（例如打包成 .zip 文件）。我希望滚筒不要简单地滚动文件，而是将它们打包，除了最后一个。

这是相当标准的功能......例如，我用于 C++ 项目的 Poco Foundation 库能够做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:44:25.397

我很确定这不是 RollingFlatFileTraceListener 或企业库中内置的任何其他 FlatFileTraceListener 的功能。您必须实现自己的 CustomTraceListener 才能启用文件压缩。

# css - 什么是最简单的将溢出：可见到悬停菜单的方法？

> ID：12941431
> 
> 赞同：3
> 
> 时间：2012-10-17T19:01:24.360
> 
> 标签：css, layout

我正在尝试仅使用 css 将嵌套 div 和普通 div 转换为可以悬停在顶部的 div 以查看更多内容而无需移动所有布局的东西。

本质上：

[悬停我更多]

[内容被悬停内容重叠]

或查看 jsfiddle 上几乎可行的示例：

[http://jsfiddle.net/tchalvakspam/vVgY2/9/](http://jsfiddle.net/tchalvakspam/vVgY2/9/)

不幸的是，当你这样做时`overflow:visible`，它似乎几乎没有用，因为你不能给出溢出任何背景样式的内容，所以它仍然不可读。

是不是，没有办法给overflow:visible溢出内容一个背景？如果这是可悲的情况，那么可以对该内容进行的最短更改量是多少，以将其变成可读的悬停展开部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:16:17.953

最终找到了解决方案，即悬停上的兄弟选择器，为悬停元素之后的下一个元素提供边距，以代替现在绝对悬停元素。

[http://jsfiddle.net/tchalvakspam/MBcDW/](http://jsfiddle.net/tchalvakspam/MBcDW/)

所以相关的css变成：

```
#fixed-height{
    position:relative;        
    width:100%;
    height:1.25em;
    overflow:hidden;
    background-color:lightblue;
    color:red;
    z-index:10;
}
#fixed-height:hover{
    overflow:visible;
    height:auto;
    position:absolute;
    max-width:20em;
}
#fixed-height:hover + #right-below{
    margin-top:1.25em;
} 
```

# c# - 更改/编辑插入到表中的数据

> ID：12941432
> 
> 赞同：0
> 
> 时间：2012-10-17T19:01:32.983
> 
> 标签：c#, asp.net, stored-procedures, sql-server-2012

我创建了一个登录和注册页面，人们可以在其中登录或注册（如果他们是新用户），当他们登录时，他们有机会发布信息，就像我现在正在做的那样......这个信息进入一个列表在他们登录后出现的页面中查看

现在我已经对其进行了测试并且它可以工作，问题是我犯了很多错误，现在我想通过制作一个与帖子页面具有相同控件的编辑页面来编辑它，但是如何更改我发布的信息？

发布信息的代码

```
 protected void Button1_Click(object sender, EventArgs e)
{
    string answer = "NO";
    string strcon = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\VC_temps.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
    SqlConnection con = new SqlConnection(strcon);

    SqlCommand com = new SqlCommand("Store-Jobs", con);
    com.CommandType = CommandType.StoredProcedure;
    SqlParameter p1 = new SqlParameter("Job", TextBox1.Text);
    SqlParameter p2 = new SqlParameter("JobType", DropDownList1.Text);
    SqlParameter p3 = new SqlParameter("StartDate", TextBox3.Text);
    SqlParameter p4 = new SqlParameter("Time", TextBox2.Text);
    SqlParameter p5 = new SqlParameter("JobID", TextBox1.Text.Substring(3).ToUpper());
    SqlParameter p6 = new SqlParameter("CompanyID", Session["CompID"]);
    SqlParameter p7 = new SqlParameter("PoistionFilled", answer);
    SqlParameter p8 = new SqlParameter("Description", TextBox4.Text);
    com.Parameters.Add(p1);
    com.Parameters.Add(p2);
    com.Parameters.Add(p3);
    com.Parameters.Add(p4);
    com.Parameters.Add(p5);
    com.Parameters.Add(p6);
    com.Parameters.Add(p7);
    com.Parameters.Add(p8);
    con.Open();
    com.ExecuteNonQuery();
    Labelinfo.Text = "Post successful.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:06:54.170

按 ID 在文本框中加载数据，然后在 Store-Jobs 的 SP 中处理更新。当 ID 大于 0 时进行更新，否则进行插入。

SQL 示例；

```
If @ID > 0
'Update Store-Jobs
Else
'Insert Store Jobs 
```

C＃

```
SqlCommand com = new SqlCommand("Store-Jobs", con);
com.CommandType = CommandType.StoredProcedure;
com.Parameters.AddWithValue("ID", Request.QueryString("ID") == Null ? Request.QueryString("ID") : 0);    
com.Parameters.AddWithValue("Job", TextBox1.Text);
com.Parameters.AddWithValue("JobType", DropDownList1.Text);
com.Parameters.AddWithValue("StartDate", TextBox3.Text);
com.Parameters.AddWithValue("Time", TextBox2.Text);
com.Parameters.AddWithValue("JobID", TextBox1.Text.Substring(3).ToUpper());
com.Parameters.AddWithValue("CompanyID", Session["CompID"]);
com.Parameters.AddWithValue("PoistionFilled", answer);
com.Parameters.AddWithValue("Description", TextBox4.Text);
con.Open();
com.ExecuteNonQuery();
Labelinfo.Text = "Post successful."; 
```

# c# - 用于 VS 2012 的 LINQ to SQL 调试可视化工具？

> ID：12941433
> 
> 赞同：4
> 
> 时间：2012-10-17T19:01:35.203
> 
> 标签：c#, linq, debugging, visualizer

我正在寻找 VS 2012 的 Linq to SQL 调试可视化工具。

我发现您需要导入C:\Program Files `Microsoft.VisualStudio.DebuggerVisualizers.dll`(
x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizer

但我只找到了这 4 个 dll：
- Microsoft.VisualStudio.Debugger.DataSetVisualizer.dll
- Microsoft.VisualStudio.Debugger.WpfTreeVisualizer.dll
- Microsoft.VisualStudio.Diagnostics.Common
- Microsoft.VisualStudio.Tools.Office.Debugger

以上都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:59:26.927

我在`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0`目录中有这个文件。

# networking - TCP/UDP 打孔和混合 P2P + 客户端/服务器架构

> ID：12941434
> 
> 赞同：1
> 
> 时间：2012-10-17T19:01:35.297
> 
> 标签：networking, tcp, udp, p2p, hole-punching

我有一个混合架构，其中 A 是试图从 B 请求内容的客户端，B 是可能位于 NAT 后面的服务器（尽管不一定）。S 是一个服务器，充当 A 和 B 之间的中间人，以下列方式使用打孔：

A联系S并说我想从B那里得到一些东西。S给了A B最后知道的IP地址和端口，A开始尝试联系B。同时，S给了B A的IP地址和端口，B开始尝试联系 A。

S**不会**充当中继服务器；相互连接后，所有通信都将在 A 和 B 之间直接连接。如果无法直接连接，则连接将失败。UDP和TCP都有这个问题。

我的问题是，让 S 与 B 的 IP 地址和端口保持同步的最有效方法是什么，以便任何数量的 As 可以随时连接到 B。我还希望解决方案能够处理这样一种情况，如果 B 背后的 NAT 与端口混淆（例如将它们增加 1），我将能够“猜测”端口的实际情况是。

我想到的解决方案（但我并不完全满意）：

通过每 X 秒从 B 向 S 发送一个请求，用 B 的 IP 地址和端口更新 S。我的问题是，如果 X 太高，S 将没有 B 的正确信息，如果太低，则会对 B 和 S 施加开销。我怀疑这最终会成为最终答案，并且诀窍是为 X 找到合适的值。

# ruby-on-rails - 基于 Rails 环境在 Rails javascript 资产中动态设置值

> ID：12941442
> 
> 赞同：2
> 
> 时间：2012-10-17T19:01:53.863
> 
> 标签：ruby-on-rails, asset-pipeline

我有一个用于 Recurly 的 js 文件：

```
(function() {

  // Required
  Recurly.config({
    subdomain: 'MYSUBDOMAIN',
    currency: 'USD'
  });

})(); 
```

我希望能够根据我的 Rails 环境切换子域属性，但保持此 javascript 可用于资产管道。这在资产管道中是否可能，或者实现等效功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:16:51.890

`<head>`这是一个令人失望的 hacky 解决方案，但您可以在包含资产流水线 JS 之前在文档中设置一个全局变量，然后稍后使用该变量，例如：

在你的`application.html.erb`：

```
<head>
    ...
    <%= javascript_tag "var subdomain = '#{request.subdomains.join(".")}';" %>
    <%= javascript_include_tag "application" %>
    ...
</head> 
```

在你的 JS 中：

```
(function() {

  // Required
  Recurly.config({
    subdomain: subdomain,
    currency: 'USD'
  });

})(); 
```

# git - Git：撤消已发布的合并提交并应用相同提交的另一个合并

> ID：12941448
> 
> 赞同：0
> 
> 时间：2012-10-17T19:02:10.447
> 
> 标签：git

一位开发人员将分支`feature2`合并`feature1`并推送结果，但错误地解决了一些合并冲突。我签出提交`A`并正确`feature1`合并提交`B`（并且与其他开发人员合并的提交相同）。`feature2``A``B`

我将合并的结果提交给了一个分离的头，现在需要恢复其他开发人员的合并提交并将我自己的应用到`feature1`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:14:51.767

危险的方式：

1）标记您的分离提交，即`git tag temp`.

2）检查`feature1`分支。

3)`git reset --hard temp`用于移动分支的本地副本以指向您的提交。

4)`git push -f origin feature1`用于覆盖`origin`.

5) 删除带有 的标签`git tag -d temp`。

小心地做这一切，并用它`gitk`来看看你在做什么。确保`origin`当时没有其他人在使用。如果您偏执，请在开始执行所有这些操作之前标记您同事的提交（这是一个好主意，以防您搞砸了）。

重要提示：如果其他人的工作基于您同事的合并，请在以这种方式进行之前三思而后行。每个人最终都需要根据您的新提交重新定位。

# android - 从图库中选择图像并如何转换为字节数据？

> ID：12941452
> 
> 赞同：2
> 
> 时间：2012-10-17T19:02:18.140
> 
> 标签：android, image, gallery

我需要从图库中挑选一张图片，然后将其转换为字节数据。我知道如何从画廊中挑选图片。我也知道如何将图像转换为字节数据。但问题是我转换了可绘制的图像，但现在我需要从图库中选择它并将其转换为字节码。任何帮助谢谢在 onClick 函数中我正在使用此代码从图库中选择图像

```
Intent image = new Intent(Intent.ACTION_GET_CONTENT);
        image.setType("Image/*");
        startActivityForResult(image, 0); 
```

我使用以下代码将可绘制的图像转换为字节数据。

```
 bm = BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher);
       data = new ByteArrayOutputStream(); 
       bm.compress(Bitmap.CompressFormat.JPEG, 40 , data);
     bitmapdata = data.toByteArray(); 
```

现在我将如何将图像从画廊转换为字节数据。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:21:55.643

在`onActivityResult`您将收到`Uri`您选择的图像，如下所示：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == PICK_IMAGE && data != null && data.getData() != null){
       Uri imageUri = data.getData();
       //....
    }
} 
```

然后从`MediaStore`你应该使用的检索它：

```
 Bitmap bitmap =
      MediaStore.Images.Media.getBitmap(this.getContentResolver(), imageUri); 
```

之后，您应该`Bitmap`像现在一样处理。

# spring - 从特定的上下文文件中读取所有的 spring bean

> ID：12941457
> 
> 赞同：1
> 
> 时间：2012-10-17T19:02:32.100
> 
> 标签：spring

我有一个弹簧上下文文件，其中定义了几个类型的 bean。如果我的程序的输入是“帮助”，那么我想显示上下文文件中的 bean 名称，以便用户可以选择特定的 bean 并将其作为输入。该程序将使用该名称实例化 bean 并执行一些逻辑。我无法从特定上下文文件中查询 bean 名称列表。我不想使用属性文件来存储 bean 名称，因为我已经在使用 spring 上下文文件。有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:12:49.727

Spring 的 BeanFactory 有一个名为`String[] getBeanDefinitionNames()`. 请参阅[此处的 Javadoc。](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/ListableBeanFactory.html#getBeanDefinitionNames%28%29)您可以遍历返回的列表并将它们显示给用户。然后您可以对所选的 bean 名称进行 getBean 调用以运行逻辑。

# ruby-on-rails - Rails 教程第 7.4.4 章 Git 后所有测试都失败

> ID：12941464
> 
> 赞同：2
> 
> 时间：2012-10-17T19:02:50.567
> 
> 标签：ruby-on-rails, rspec, railstutorial.org, failing-tests

成功完成注册页面后，没有失败的测试，我到达 7.4.4，他说：

```
$ git add .
$ git commit -m "Finish user signup"
$ git checkout master
$ git merge sign-up 
```

在我运行 git checkout master 之后，spork 开始抱怨 28 次失败。合并后，继续。运行 bundle exec rspec spec/ 我得到 28 个与 user_pages_spec.rb 测试有关的错误。

错误如下：

```
Failures:

  1) User pages signup page 
     Failure/Error: before { visit signup_path }
     ActiveRecord::StatementInvalid:
       PGError: ERROR:  relation "users" does not exist
       LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                               ^
       :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
                     FROM pg_attribute a LEFT JOIN pg_attrdef d
                       ON a.attrelid = d.adrelid AND a.attnum = d.adnum
                    WHERE a.attrelid = '"users"'::regclass
                      AND a.attnum > 0 AND NOT a.attisdropped
                    ORDER BY a.attnum
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./spec/requests/user_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  2) User pages signup page 
     Failure/Error: before { visit signup_path }
     ActiveRecord::StatementInvalid:
       PGError: ERROR:  relation "users" does not exist
       LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                               ^
       :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
                     FROM pg_attribute a LEFT JOIN pg_attrdef d
                       ON a.attrelid = d.adrelid AND a.attnum = d.adnum
                    WHERE a.attrelid = '"users"'::regclass
                      AND a.attnum > 0 AND NOT a.attisdropped
                    ORDER BY a.attnum
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./spec/requests/user_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  3) User pages profile page 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::StatementInvalid:
       PGError: ERROR:  relation "users" does not exist
       LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                               ^
       :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
                     FROM pg_attribute a LEFT JOIN pg_attrdef d
                       ON a.attrelid = d.adrelid AND a.attnum = d.adnum
                    WHERE a.attrelid = '"users"'::regclass
                      AND a.attnum > 0 AND NOT a.attisdropped
                    ORDER BY a.attnum
     # ./spec/requests/user_pages_spec.rb:15:in `block (3 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  4) User pages profile page 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::StatementInvalid:
       PGError: ERROR:  relation "users" does not exist
       LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                               ^
       :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
                     FROM pg_attribute a LEFT JOIN pg_attrdef d
                       ON a.attrelid = d.adrelid AND a.attnum = d.adnum
                    WHERE a.attrelid = '"users"'::regclass
                      AND a.attnum > 0 AND NOT a.attisdropped
                    ORDER BY a.attnum
     # ./spec/requests/user_pages_spec.rb:15:in `block (3 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  5) User pages signup with invalid information should not create a user
     Failure/Error: before { visit signup_path }
     ActiveRecord::StatementInvalid:
       PGError: ERROR:  relation "users" does not exist
       LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                               ^
       :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
                     FROM pg_attribute a LEFT JOIN pg_attrdef d
                       ON a.attrelid = d.adrelid AND a.attnum = d.adnum
                    WHERE a.attrelid = '"users"'::regclass
                      AND a.attnum > 0 AND NOT a.attisdropped
                    ORDER BY a.attnum
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./spec/requests/user_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

  6) User pages signup with valid information should create a user
     Failure/Error: before { visit signup_path }
     ActiveRecord::StatementInvalid:
       PGError: ERROR:  relation "users" does not exist
       LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                               ^
       :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
                     FROM pg_attribute a LEFT JOIN pg_attrdef d
                       ON a.attrelid = d.adrelid AND a.attnum = d.adnum
                    WHERE a.attrelid = '"users"'::regclass
                      AND a.attnum > 0 AND NOT a.attisdropped
                    ORDER BY a.attnum
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./spec/requests/user_pages_spec.rb:24:in `block (3 levels) in <top (required)>' 
```

我的 user_pages_spec.rb 文件：

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end
    end
  end

end 
```

我的用户控制器：

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

end 
```

我的模型/user_spec.rb

```
require 'spec_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:authenticate) }

  it { should be_valid }

  describe "when name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
  end

  describe "when email is not present" do
    before { @user.email = " " }
    it { should_not be_valid }
  end

  describe "when name is too long" do
    before { @user.name = "a" * 51 }
    it { should_not be_valid }
  end  

  describe "when email format is invalid" do
    it "should be invalid" do
        addresses = %w[user@foo,com user_at_foo.org example.user@foo.foo@bar_baz.com foo@bar+baz.com]
        addresses.each do | invalid_address|
            @user.email = invalid_address
            @user.should_not be_valid
        end
    end
  end

  describe "when email format is valid" do
    it "should be valid" do
        addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
        addresses.each do |valid_address|
            @user.email = valid_address
            @user.should be_valid
        end
    end
  end

  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end

  describe "email address with mixed case" do
    let(:mixed_case_email) { "Foo@ExAMPle.CoM"}

    it "should be saved as all lower-case" do
      @user.email = mixed_case_email
      @user.save
      @user.reload.email.should == mixed_case_email.downcase
    end
  end

  describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " " }
    it { should_not be_valid }
  end

  describe "when password doesn't match confirmation" do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid }
  end

  describe "when password confirmation is nil" do
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
  end

  describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
      it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
      let(:user_for_invalid_password) { found_user.authenticate("invalid") }

      it { should_not == user_for_invalid_password }
      specify { user_for_invalid_password.should be_false }
    end
  end

  describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5 }
    it { should be_invalid }
  end

end 
```

这是怎么回事？为什么会失败？我不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:08:14.393

看来您没有运行 migrations `PGError: ERROR: relation "users" does not exist`。

尝试运行`bundle exec rake db:migrate`

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:09:46.607

尝试在“测试”环境中运行迁移：

```
bundle exec rake db:migrate RAILS_ENV=test 
```

# asp.net-mvc - 调用 DisplayNameFor 的 IEnumerable 重载

> ID：12941465
> 
> 赞同：24
> 
> 时间：2012-10-17T19:02:52.210
> 
> 标签：asp.net-mvc, generics, razor

这适用于获取标题（**NOT VALUES**）：

```
@model IEnumerable<SomeModel>
...
<th>@Html.DisplayNameFor(m => m.SomeModelProperty)</th> 
```

如果 SomeModelProperty 是：

```
[Display(Name = "An Excellent Header")]
SomeModelProperty { get; set; } 
```

`th`然后它会在标题元素中显示“一个优秀的标题” 。

你会认为这不起作用，因为模型是 IEnumerable，它没有 m.SomeModelProperty，但它起作用是因为 HtmlHelper 有一个`HtmlHelper<IEnumerable<TModel>>`这样的 lambda 的参数是`TModel`，而不是`IEnumerable<TModel>`。由于这仅使用元数据，因此不需要集合中的项目。（虽然intellisense on`m.`会欺骗你，让你认为它是一个集合）。我不确定何时添加了这个很酷的重载，但对于 Index.cshtml 来说非常方便，并且消除了`@Html.DisplayNameFor(m => @Model.FirstOrDefault().SomeModelProperty)`我想要避免的时髦的东西。

[http://msdn.microsoft.com/en-us/library/hh833697(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/hh833697(v=vs.108).aspx)

但是，当我的模型不是 IEnumerable 而是包含 IEnumerable 作为属性时，我无法弄清楚如何让它工作，例如：

```
public class SomeList
{
   public List<SomeModel> SomeModels { get; set; }
   public int Page { get; set; }
   public DateTime CurrentAsOf { get; set; }
} 
```

我希望对泛型类型参数进行明确说明，但我认为类型参数是由引擎指定的，该引擎从使用页面创建的 HtmlHelper 中向下渗透。我可以在页面中声明一个新的 HtmlHelper，或者以某种方式明确指定类型参数吗？

索引.cshtml：

```
@model SomeList
//No idea how to do this:
@Html.DisplayNameFor<IEnumerable<SomeModel>>(m => m.SomeModelProperty) 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-08T18:10:13.497

即使没有行，另一个类似的解决方法可能是：

```
...
@{var dummy = Model.FirstOrDefault(); }
    <tr>
        <th>
            @Html.DisplayNameFor(model => dummy.SomeModelProperty)
        </th>
... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-18T11:49:05.223

我有完全相同的问题，因为我使用的是 ViewModels，所以我有一个 ViewModel，它带有一个 IEnumerable 的实际对象作为属性。

我确实遇到过这篇文章，如果你检查答案，这个人已经创建了自己的 HTMLHelper 来解决这个问题[http://forums.asp.net/t/1783733.aspx](http://forums.asp.net/t/1783733.aspx)。他的版本是：

```
public static MvcHtmlString DisplayColumnNameFor<TModel, TClass, TProperty>(
    this HtmlHelper<TModel> helper, IEnumerable<TClass> model, 
    Expression<Func<TClass, TProperty>> expression)
{
    var name = ExpressionHelper.GetExpressionText(expression);
    name = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(name);
    var metadata = ModelMetadataProviders.Current.GetMetadataForProperty(
        () => Activator.CreateInstance<TClass>(), typeof(TClass), name);

    return new MvcHtmlString(metadata.DisplayName);
} 
```

您必须传递两个参数枚举和表达式，而不是普通的 just 表达式，因此您可能更喜欢@franz 答案。我看不出无论如何都必须传递 2 个参数，因为它需要知道您将表达式应用到的视图模型的哪个属性。

# wicket - Wicket - 通过下拉菜单更改面板

> ID：12941467
> 
> 赞同：2
> 
> 时间：2012-10-17T19:02:58.727
> 
> 标签：wicket

我在页面上添加了一个下拉组件。此下拉列表的目的是更改呈现的输入表单的类型。例如，不同的表单有不同的必填字段、可编辑字段等。

```
public final class Test extends WebPage
{

    CustomPanel currentPanel = new MeRequest("repeater",FormType.MIN);

    public Test(PageParameters parameters)
    {
        add(currentPanel);         

        DropDownChoice ddc = new DropDownChoice("panel", new PropertyModel(this, "selected"), panels, choiceRenderer);
        ddc.add(new AjaxFormComponentUpdatingBehavior("onchange") {
            protected void onUpdate(AjaxRequestTarget target) {
                System.out.println("changed");
                currentPanel = new MeRequest("repeater",FormType.PRO);
                target.add(currentPanel);
            }
        });
        add(ddc);
    } 
```

我尝试了各种选择，但结果有限。唯一真正的成功是更新模型，但我真正想做的是改变组件的行为方式。

对我所缺少的有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T20:47:46.610

1) 如果您想用另一个面板替换一个面板，您可以执行以下操作。

首先，您应该输出原始面板的标记 id：

```
currentPanel.setOutputMarkupId(true); 
```

然后在 ajax 事件处理程序中编写如下内容：

```
protected void onUpdate(AjaxRequestTarget target) {
    CustomPanel newPanel = new MeRequest("repeater", FormType.PRO);
    currentPanel.replaceWith(newPanel);
    currentPanel = newPanel;
    currentPanel.setOutputMarkupId(true);
    target.addComponent(currentPanel);
} 
```

在这种情况下，每次更改下拉选项时，您都会将新面板添加到页面并从页面中删除旧面板。

2）但我会提出一种稍微不同的方法来解决你的问题。您应该将面板的构造逻辑移至 onBeforeRender() 方法：

```
public class MeRequest extends Panel {

    private FormType formType;

    public MeRequest(String id, FormType formType) {
        super(id);
        this.formType = formType;

        // don't forget to output the markup id of the panel
        setOutputMarkupId(true);

        // constructor without construction logic
    }

    protected void onBeforeRender() {
        // create form and form components based on value of form type
        switch (formType) {
            case MIN:
                // ...
                break;
            case PRO:
                // ...
                break;
        }            

        // add form and form components to panel
        addOrReplace(form);
        form.add(field1);
        form.add(field2);
        // ...

        super.onBeforeRender();
    }

    public void setFormType(FormType formType) {
        this.formType = formType;
    }
} 
```

然后，您将只能在 ajax 事件中更改面板的类型：

```
protected void onUpdate(AjaxRequestTarget target) {        
    currentPanel.setFormType(FormType.PRO);
    target.addComponent(currentPanel);
} 
```

因此，我们重建了原始面​​板而不重新创建它。

# ruby-on-rails - 导轨 postgres 插入

> ID：12941471
> 
> 赞同：1
> 
> 时间：2012-10-17T19:03:17.197
> 
> 标签：ruby-on-rails, postgresql

我正在尝试按照 Jonaphin 在[http://www.genesx.com/2012/06/import-csv-files-100x-faster-in-rails-3/上给出的示例从 csv 文件中导入数据](http://www.genesx.com/2012/06/import-csv-files-100x-faster-in-rails-3/)

我正在尝试从 postgres 获取最后插入的索引，但由于某种原因，代码无法正常工作。

```
def process_data!(file, survey_id)
 headers = [
    "zip_code",
    "booking_date"
 ]
 ActiveRecord::Base.establish_connection

 created_at = Time.now.strftime("%Y-%m-%d %H:%M:%S")

 CSV.foreach(file, {headers: :first_row}) do |row|
  sql_keys = []
  sql_vals = []

  headers.each_with_index do |key, idx|
    val = row[idx]

    sql_keys << key
    sql_vals << ActiveRecord::Base.connection.quote(val)
  end

  sql = "
    INSERT INTO bookings (survey_id, #{sql_keys.join(', ')}, created_at, updated_at)
    VALUES (#{survey_id}, #{sql_vals.join(', ')}, '#{created_at}', '#{created_at}')
  "

  booking_id = ActiveRecord::Base.connection.insert(sql)

 end
end 
```

`booking_id`现在应该有最后插入行的 id，但由于某种原因它是`nil`.

我尝试`ActiveRecord::Base.connection.insert(sql)`在控制台中运行并且它有效（即，它返回了我想要的 id）。

有人知道这里出了什么问题吗？我需要更改一些设置以允许 postgres 返回最后一个 id 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:26:47.553

```
INSERT INTO bookings (survey_id, #{sql_keys.join(', ')}, created_at, updated_at)
VALUES (#{survey_id}, #{sql_vals.join(', ')}, '#{created_at}', '#{created_at}')
returning survey_id 
```

# iphone - 如何用 RestKit 映射不同的 json？

> ID：12941472
> 
> 赞同：1
> 
> 时间：2012-10-17T19:03:17.867
> 
> 标签：iphone, ios, mapping, restkit

我是 Restkit 的新手，我想将它用于我的 iOS 项目。

我遇到了一个问题，因为我从服务器返回了不同的 JSON，而且我不知道如何使用 RestKit 配置我的映射。

以下是我可以从服务器接收的两种 JSON 消息。

1.  第一条json消息：

    ```
    {"result":"not found"} 
    ```

2.  第二个json消息：

    ```
    { "OPDRACHT": 
         { "streetnaam":"value", 
           "postalcode":"value", 
           "city":"value"
         }
    } 
    ```

我一直在阅读有关没有 KVC 和动态对象映射的映射的 RestKit 文档，但我不知道如何为 RestKit 配置映射。

有人知道在这种情况下如何使用 RestKit 配置映射吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:44:38.860

我今天解决了我的映射问题。我以更对象的结构更改了服务器的 json 输出。现在 RestKit 与我的 json 配合得很好。

# iphone - 从 Xcode 安装到 iPhone 滞后

> ID：12941474
> 
> 赞同：-1
> 
> 时间：2012-10-17T19:03:19.527
> 
> 标签：iphone, ios, xcode

我的问题是：几天后，当我在设备上安装应用程序时，Xcode 在“在 iPhone 上运行”消息到应用程序真正在设备上启动后至少花费 10 秒。

这是我第一次遇到这个问题，但它真的很烦人，因为它是时间的腰部！

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:05:33.220

是的。有时会发生这种情况。我从来没有找到任何特别的原因为什么有时需要很长时间，但我已经学会了忍受它。

# matlab - Matlab - 将虚线更改为实线

> ID：12941475
> 
> 赞同：0
> 
> 时间：2012-10-17T19:03:30.387
> 
> 标签：matlab, plot, line, dotted-line

我如何在情节中改变我的虚线？？？我知道它是这样完成的，`plot(x, y, '-')`但即使我把它放在那里，我也会得到虚线

```
naj_cas = 0;
uhol_deg = -5;
v = 20;
g = 9.80665;

while uhol_deg < 85
    uhol_deg = uhol_deg + 10;
    uhol_rad = degtorad(uhol_deg);

    for t = 0:.1:5
        x = v * t * cos(uhol_rad);
        y = v * t * sin(uhol_rad) - 0.5 * g * t^2;
        axis([0 50 0 25])
        subplot(211);
        plot(x, y)
        hold on
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:30:03.260

您正在绘制单个点而不是一条线。这些显示为点，对线属性的任何更改都没有影响。试试这个：

```
t = (0:.1:5);    
while uhol_deg < 85
    uhol_deg = uhol_deg + 10;
    uhol_rad = pi*uhol_deg/180;

    x = v * t * cos(uhol_rad);
    y = v * t * sin(uhol_rad) - 0.5 * g * t.^2;
    axis([0 50 0 25])
    plot(x, y)
    hold on
end 
```

# c# - float.Parse 在小数和逗号上失败

> ID：12941476
> 
> 赞同：12
> 
> 时间：2012-10-17T19:03:40.963
> 
> 标签：c#, parsing

当我尝试这条线时：

```
float f = float.Parse(val, System.Globalization.NumberStyles.AllowDecimalPoint | System.Globalization.NumberStyles.AllowThousands); 
```

其中 val 是设置为“5.267”的字符串，不带引号，我收到此错误：

FormatException：未知字符：。System.Double.Parse（System.String s，NumberStyles 样式，IFormatProvider 提供程序） System.Single.Parse（System.String s，NumberStyles 样式）

所以我尝试将小数点更改为逗号，例如：5,267 并收到此错误：

FormatException: Unknown char: , System.Double.Parse (System.String s, NumberStyles 风格, IFormatProvider 提供者) System.Single.Parse (System.String s, NumberStyles 风格)

我不明白。据我所知，我这样做是对的。这是一件很简单的事情，为什么它让我如此悲伤？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T19:13:44.340

Parse 具有文化意识。如果您的本地文化有不同的要求，那么您可能需要传入文化或其他格式提供程序。尝试使用`CultureInfo.InvariantCulture`. 如果你这样做，你将不需要小数选项。

```
float f = float.Parse(val,
                      System.Globalization.NumberStyles.AllowThousands,
                      CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-07T17:41:52.340

```
using System;
using System.Collections.Generic;
using System.Globalization;

namespace ConsoleApp2
{
    class Program
    {
        static void Main(string[] args)
        {

            var numList = new List<string>(){"0", "-6e-5", "78.56238", "05.56", "0.5E9", "-45,000.56", "", ".56", "10.4852,64"};
            numList.ForEach(num =>
            {
                // If we use NumberStyles.Float => -45,000.56 is invalid
                if (decimal.TryParse(num, NumberStyles.Any, CultureInfo.InvariantCulture, out decimal result))
                {
                    Console.WriteLine(result);
                }
                else
                {
                    Console.WriteLine(num + " is not a valid number");
                }
            });

        }
    }
} 
```

# php - 用 php 发送 HTML 电子邮件？

> ID：12941479
> 
> 赞同：2
> 
> 时间：2012-10-17T19:03:52.257
> 
> 标签：php, html, html-email

我有一个脚本，在成功购买后使用贝宝 IPN 发送电子邮件。如何修改脚本以发送 HTML 电子邮件？

```
<?php

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}

// post back to PayPal system to validate

$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";

// If testing on Sandbox use: 
// $header .= "Host: www.sandbox.paypal.com:443\r\n";
$header .= "Host: ipnpb.paypal.com:443\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

// If testing on Sandbox use:
//$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);
$fp = fsockopen ('ssl://ipnpb.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];

//set email variables
$From_email = "From: admin@domain.com";
$Subject_line = "Thanks";

$email_msg = "Thanks for purchasing my item. Your order will be delivered in 3-4 days. We       appreciate your business.";
$email_msg .= "\n\nThe details of your order are as follows:";
$email_msg .= "\n\n" . "Transaction ID: " .  $txn_id ;
$email_msg .= "\n" . "Payment Date: " . $payment_date;

if (!$fp) {
// HTTP ERROR
} else {
fputs ($fp, $header . $req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {
// check the payment_status is Completed
// check that txn_id has not been previously processed
// check that receiver_email is your Primary PayPal email
// check that payment_amount/payment_currency are correct
// process payment

$mail_From = $From_email;
$mail_To = $payer_email;
$mail_Subject = $Subject_line;
$mail_Body = $email_msg;

mail($mail_To, $mail_Subject, $mail_Body, $mail_From);

}
else if (strcmp ($res, "INVALID") == 0) {
// log for manual investigation

$mail_From = $From_email;
$mail_To = $receiver_email;
$mail_Subject = "INVALID IPN POST";
$mail_Body = "INVALID IPN POST. The raw POST string is below.\n\n" . $req;

mail($mail_To, $mail_Subject, $mail_Body, $mail_From);

}
}
fclose ($fp);
}
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T19:08:32.630

您需要发送具有内容类型的完整标头，而不仅仅是 mail_from。这是一个例子

```
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= $mail_From . "\r\n";
mail($mail_To,$mail_Subject,$mail_Body,$headers); 
```

[http://www.w3schools.com/php/func_mail_mail.asp](http://www.w3schools.com/php/func_mail_mail.asp)

在您的代码中：

$mail_From = $From_email; $mail_To = $payer_email; $mail_Subject = $Subject_line; $mail_Body = $email_msg;

邮件（$mail_To，$mail_Subject，$mail_Body，$mail_From）；

$mail_From 是第四个参数（标题）。创建一个新字符串，其中包含 html 电子邮件的完整标题以及：$_From

```
$mail_From = $From_email;
$mail_To = $payer_email;
$mail_Subject = $Subject_line;
$mail_Body = $email_msg;
//start $headers
$headers = "MIME-Version: 1.0" . "\r\n"; 
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n"; //adds content type to headers
$headers .= $mail_From . "\r\n"; //adds the sender details
mail($mail_To,$mail_Subject,$mail_Body,$headers); //sends the email 
```

如果你回显 $headers 它将是这样的

```
MIME-Version:1.0
Content-type:text/html;charset=iso-8859-1
From:email@email.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:08:25.763

只需将 HTML 放在邮件正文中，大多数邮件客户端应该都能弄清楚。

更正确的答案还包括`Content-Type`邮件中的适当标题 ( `text/html`)。

一个完整的答案将是我所做的：

```
<?php
$html = <<<HTML
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" value="text/html; charset=iso-8859-1" />
        <title>Title here</title>
    </head>
    <body>
        <p>My mail content here.</p>
        <hr />
        <p style="font-size: 8pt; font-style: italic;">Some signature here</p>
    </body>
</html>
HTML;
$text = preg_replace("(\n{2,})","\n",strip_tags(str_replace(Array("\t","<hr />"),Array("","===================="),$html)));
$seperator = uniqid();
mail("user@example.com","Title here",
        "--".$seperator."\r\n"
        ."Content-Type: text/plain\r\n\r\n"
        .$text."\r\n"
        ."--".$seperator."\r\n"
        ."Content-Type: text/html\r\n\r\n"
        .$html."\r\n"
        ."--".$seperator."--",
    "From: My name <me@example.com>\r\n"
    ."MIME-Version: 1.0\r\n"
    ."Content-Type: multipart/alternative; boundary=".$seperator);
?> 
```

这不仅会发送所有正确的标头以使客户端不作任何猜测，而且还会为不想要 HTML 电子邮件的用户自动生成纯文本版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T05:48:27.530

通过 PHP 发送 HTML 电子邮件使用与文本电子邮件完全相同的**邮件**功能：

```
mail($to, $subject, $message, $headers);

$to = 'bob@example.com';

$subject = 'Website Change Reqest';

$headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "Reply-To: ". strip_tags($_POST['req-email']) . "\r\n";
$headers .= "CC: susan@example.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$message = '<html><body>';
$message .= '<h1>Hello, World!</h1>';
$message .= '</body></html>'; 
```

来源和下载可用于[css 技巧](http://css-tricks.com/sending-nice-html-email-with-php/)

# ruby - Ruby：两个同名方法之间的关系，一个是“超级”到另一个

> ID：12941485
> 
> 赞同：1
> 
> 时间：2012-10-17T19:04:20.300
> 
> 标签：ruby

在下面的茶水计时器代码中，SleepTimer 中有一个“start”方法，它调用“notify”。

```
 def start
    sleep minutes * 60
    notifier.notify("Tea is ready!")
  end 
```

如果您查看下面的代码，您会发现 中有一个 notify 方法`class StdioUi`以及`module UiWithBeep`. 上面显示的 start 方法调用 in 中的 notify 方法`module UiWithBeep`，然后通过 'super' 调用 in 中的 notify 方法`class StdioUi`。（效果是在“Tea is ready”之前听到“BEEP！”。）但是，我不明白为什么 notifier.notify 调用 notify 方法是 in`module UiWithBeep`而不是 in `class StdioUi`。 **第一个问题：**它如何知道去一个“通知”而不是另一个。 **SecondQuestion**而且，虽然我理解超级，但建立关系以便通知`class StdioUi`对另一个通知是“超级”的。你能解释一下吗

茶计时器

```
class TeaClock
  attr_accessor :timer
  attr_accessor :ui

  def initialize(minutes)

    self.ui = StdioUi.new

    self.timer = SleepTimer.new(minutes, ui)
    init_plugins

  end

  def init_plugins
    puts "init plugins"
    @plugins = []
    ::Plugins.constants.each do |name|
      @plugins << ::Plugins.const_get(name).new(self)
    end
  end

  def start
    timer.start
  end
end

class StdioUi
  def notify(text)
    puts text
  end
end

SleepTimer = Struct.new(:minutes, :notifier) do
  def start
    sleep minutes * 60
    notifier.notify("Tea is ready!")
  end
end

module Plugins
  class Beep    
    def initialize(tea_clock)

      tea_clock.ui.extend(UiWithBeep)
    end

    module UiWithBeep
      def notify(*)         #gets called by notifier.notify("Tea is ready")
        puts "BEEP!"

        super               #calls notify in class StdioUi
      end
    end
  end
end

t = TeaClock.new(0.01).start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:21:47.620

每个类都有一个名为的属性`ancestors`，表示继承链。ruby 遍历继承的行为列表并寻找匹配的方法。如果它找到一个，它用给定的参数调用它。如果你打电话给`super`它寻找下一场比赛。

```
1.9.3-p194 :003 > String.class.ancestors
 => [Class, Mocha::ClassMethods, Module, NewRelic::Agent::MethodTracer::InstanceMethods, NewRelic::Agent::MethodTracer::InstanceMethods::TraceExecutionScoped, NewRelic::Agent::MethodTracer::ClassMethods, NewRelic::Agent::MethodTracer::ClassMethods::AddMethodTracer, Mocha::ModuleMethods, ActiveSupport::Dependencies::ModuleConstMissing, Object, FactoryGirl::Syntax::Vintage, Metaclass::ObjectMethods, Mocha::ObjectMethods, PP::ObjectMixin, JSON::Ext::Generator::GeneratorMethods::Object, ActiveSupport::Dependencies::Loadable, FriendlyId::ObjectUtils, Kernel, BasicObject] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:40:38.793

**本书**：我一直推荐这本优秀的书，[Metaprogramming Ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)。我在撰写此答案时正在咨询它。

* * *

所以，在这里你用一个模块扩展一个对象。在 Ruby 中，它被称为对象扩展。在简单的情况下，一切都按预期工作，如下所示：

```
module Foo
  def hello
    puts "foo"
  end
end

class Bar
end

bar = Bar.new
bar.extend Foo
bar.hello
# >> foo 
```

当涉及到类自己的方法时，事情就会变得复杂。这是您的代码段的简化版本，它表现出相同的行为。

```
module Foo
  def hello
    puts "foo"
    super
  end
end

class Bar
  def hello
    puts 'bar'
  end
end

bar = Bar.new
bar.extend Foo
bar.hello
# >> foo
# >> bar 
```

在 ruby​​ 中调用方法时，解释器必须首先找到要调用的方法。这称为方法查找。现在，当您定义实例方法时，实际上它是类对象上的方法，而不是那个实例。因此，第一个片段的方法查找如下所示：

```
 1) bar instance => method hello not found here
 2) Bar class => method hello found 
```

然而，当你扩展一个对象时，方法会被注入到实例的`eigenclass`. 这是一个特殊的“隐藏”类，每个实例都是唯一的。实际上，方法查找首先经过它。又是第一个片段：

```
 1) bar instance => method hello not found here
 2) bar's eigenclass => method hello not found here
 3) Bar class => method hello found 
```

现在应该清楚为什么`Foo.hello`调用而不是`Bar.hello`: 因为它出现在方法查找过程的早期！

```
 1) bar instance => method hello not found here
 2) bar's eigenclass => method hello found 
```

我可能犯了一些错误，但这大致就是发生了什么。

# asp.net-mvc - 如果在 DynamicGridData 中使用 Authorize 和 HandleJsonexception，如何向 jqgrid 返回授权错误

> ID：12941486
> 
> 赞同：1
> 
> 时间：2012-10-17T19:04:29.580
> 
> 标签：asp.net-mvc, asp.net-mvc-2, jqgrid, mono, asp.net-authorization

[HandleJsonException] 和来自 Oleg 答案的代码在 [ASP.NET MVC 2.0 中实现 jqgrid 中的搜索](https://stackoverflow.com/questions/5500805/asp-net-mvc-2-0-implementation-of-searching-in-jqgrid)

用于在 ASP.NET MVC2 应用程序中向用户显示错误。

DynamicGridData 方法也用 [Authorize] 修饰。页面包含“注销”按钮。

如果用户注销并在浏览器中按下返回按钮，[Authorize] 会导致 ASP.NET 以 html 格式返回登录页面作为 DynamicGridData 结果。

jqgrid 在这种情况下显示奇怪的错误。如何以正确的 json 格式返回错误，例如 [HandleJsonException] 返回其他错误？

出现包含原始 html 的不可读警报框。

ASP.NET 代码中引用了一个

# graph - 如何在 2 个不同日期之间构建画布折线图？

> ID：12941491
> 
> 赞同：0
> 
> 时间：2012-10-17T19:04:51.737
> 
> 标签：graph, html5-canvas, linegraph

我正在尝试使用画布在 2 个日期点之间构建折线图。我需要沿图表底部的日期测量值根据开始和结束日期数据进行更改，这些数据在应用程序获取的信息之间可能会有很大差异。是否有任何插件可以专门/动态地执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:47:52.923

有大量的图表和图形绘图库可以做到这一点，而[gRaphaël](http://g.raphaeljs.com/)似乎可以很好地满足您的要求。

# jquery - 如何访问前一个元素不是兄弟

> ID：12941492
> 
> 赞同：-2
> 
> 时间：2012-10-17T19:04:55.640
> 
> 标签：jquery

我有以下代码结构：

```
<div></div>

<ul>
    <li></li>
    <li></li>
</ul>

<div></div>

<ul>
    <li></li>
    <li id="current"></li>
</ul> 
```

抱歉，我在帖子中使用了 HTML，它隐藏了 DIV。

我正在寻找一个`<DIV>`直接高于父级的`<UL>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:06:20.710

**编辑**

`.parent().prev()`我想这就是你要找的东西

* * *

**原来的**

`.parent()`我想这就是你要找的东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:06:40.687

首先使用 parent()，然后使用 prev()。像`$('#current').parent().prev()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T19:08:54.143

你似乎需要

```
$('#current').parent().prev() 
```

这将`div`选择`ul`包含`current`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T19:09:39.847

你可以使用：

```
$('#current').parent() // goes to the closest parent - which is the <ul>
             .prev();  // now, starting at that <ul>
                       // we go to the previous html element which is <div>

//Could also be done:
$('#current').closest('ul')
             .prev();  // or .prev('div') - there's a lot of options 
```

# ruby - 使用 ruby 查找字符串中所有出现的 1 或 2 个字母

> ID：12941495
> 
> 赞同：0
> 
> 时间：2012-10-17T19:05:09.583
> 
> 标签：ruby, regex

如果我有一个诸如“abcde”之类的字符串，并且我想获得一个包含 1 个或 2 个字母的所有组合的二维数组。

```
[ ['a', 'b', 'c', 'd', 'e'], ['ab', 'c', 'de'], ['a', 'bc', 'd', 'e'] ... 
```

我该怎么做呢？

我想在 ruby​​ 中执行此操作，并认为我应该使用正则表达式。我试过使用

```
strn = 'abcde'
strn.scan(/[a-z][a-z]/) 
```

但这只会给我两个不同的字符集

```
['ab', 'cd'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:12:34.780

我认为应该这样做（尚未测试）：

```
def find_letter_combinations(str)
  return [[]] if str.empty?
  combinations = []
  find_letter_combinations(str[1..-1]).each do |c|
    combinations << c.unshift(str[0])
  end
  return combinations if str.length == 1
  find_letter_combinations(str[2..-1]).each do |c|
    combinations << c.unshift(str[0..1])
  end
  combinations
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:19:16.950

正则表达式对这类问题没有帮助。我建议在 Ruby 1.9中使用方便的[`Array#combination(n)`函数：](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-combination)

```
def each_letter_and_pair(s)
  letters = s.split('')
  letters.combination(1).to_a + letters.combination(2).to_a
end

ss = each_letter_and_pair('abcde')
ss # => [["a"], ["b"], ["c"], ["d"], ["e"], ["a", "b"], ["a", "c"], ["a", "d"], ["a", "e"], ["b", "c"], ["b", "d"], ["b", "e"], ["c", "d"], ["c", "e"], ["d", "e"]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:08:19.753

不，正则表达式不适合这里。当然，您可以像这样匹配一个或两个字符：

```
strn.scan(/[a-z][a-z]?/)
# matches: ['ab', 'cd', 'e'] 
```

但是您不能使用正则表达式生成所有组合的（2d）列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:16:45.897

函数递归方法：

```
def get_combinations(xs, lengths)
  return [[]] if xs.empty?
  lengths.take(xs.size).flat_map do |n|
    get_combinations(xs.drop(n), lengths).map { |ys| [xs.take(n).join] + ys } 
  end
end

get_combinations("abcde".chars.to_a, [1, 2])
#=> [["a", "b", "c", "d", "e"], ["a", "b", "c", "de"], 
#    ["a", "b", "cd", "e"], ["a", "bc", "d", "e"], 
#    ["a", "bc", "de"], ["ab", "c", "d", "e"], 
#    ["ab", "c", "de"], ["ab", "cd", "e"]] 
```

# .net - 边框未覆盖整个区域

> ID：12941506
> 
> 赞同：0
> 
> 时间：2012-10-17T19:05:38.980
> 
> 标签：.net, wpf, rounded-corners

我是 WPF 的新手。我的要求是制作一个圆角矩形的闪屏。我做了一些搜索并实现了圆角矩形。但问题是它在某些方面失败了。请查看屏幕截图并检查下面的代码。 ![在此处输入图像描述](../Images/002823855f5792137680621348c09f62.png)

在该图像中，您可以看到黑色边框在角落处破裂

这是我的xml

```
<Window x:Class="TimeLogger.StartWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"   Width="470" Height="270"      ShowInTaskbar="False" WindowStartupLocation="CenterScreen" 
        ResizeMode="NoResize"  WindowStyle="None" AllowsTransparency="True" Background="Transparent"  >
    <Border BorderBrush="#FF000000" BorderThickness="2,2,2,2" CornerRadius="8,8,8,8">
        <Grid Background="#012a7a"   >
            <Label Margin="-5,-7,5,7">
                <TextBlock Foreground="Black"  FontFamily="Segoe UI" FontSize="25" FontStretch="UltraExpanded" Height="71" Width="177">
                    TimeLogger
                </TextBlock>
            </Label>
        </Grid>
    </Border>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:13:26.043

我看到了你的问题。

`Border`s 是很棒的东西。它们重量轻，对外观有很大的控制力。 **问题是你给了你`Grid`的`Background`颜色，而你应该把它给你的`Border`.** 通常，网格不能很好地设置样式，尤其是当您已经在此处使用边框时。网格非常适合简单到复杂的布局，有时给它们一个有意义的，`Background`但它几乎总是最好只用于布局。

只需复制粘贴：

```
<Border BorderBrush="#FF000000" Background="#012a7a" BorderThickness="2,2,2,2" CornerRadius="8,8,8,8">
    <Grid>
        <Label Margin="-5,-7,5,7">
            <TextBlock Foreground="Black"  FontFamily="Segoe UI" FontSize="25" FontStretch="UltraExpanded" Height="71" Width="177">
                TimeLogger
            </TextBlock>
        </Label>
    </Grid>
</Border> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:14:29.473

将圆角半径应用于边框不会缩小边框内容的大小，从而使其受到限制。您会在边框顶部看到 Grid 绘画，因为它仍在填充边框表示其可用的整个区域。修复相当简单：

1.  在边框上设置背景颜色，而不是网格。保持网格透明。
2.  对边框应用填充或对网格应用边距，以便为应用的角半径留出空间。使用确切的值，直到你得到你喜欢的东西。

像这样的东西：

```
<Border 
    BorderBrush="#FF000000" 
    Background="#012a7a" 
    BorderThickness="2" 
    CornerRadius="8"
    Padding="5"
    >
    <Grid>
        <!-- In a code review, I'd question the value of negative margin on this label -->
        <Label Margin="-5,-7,5,7">
            <TextBlock Foreground="Black"  FontFamily="Segoe UI" FontSize="25" FontStretch="UltraExpanded" Height="71" Width="177">
                TimeLogger
            </TextBlock>
        </Label>
    </Grid>
</Border> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:33:43.720

Border 只是一个内容控件，但其中的 TextBlock

```
<Border Background="#012a7a" BorderBrush="#FF000000" Margin ="6" BorderThickness="4" CornerRadius="8,8,8,8">
    <TextBlock Foreground="Black" Margin="-5,-7,5,7" Height="71" Width="177"
               VerticalAlignment="Center" HorizontalAlignment="Center" 
               FontFamily="Segoe UI" FontSize="25" FontStretch="UltraExpanded" 
               Text="TimeLogger" />
</Border> 
```

# javascript - 未使用 JavaScript 正确设置 Internet Explorer cookie

> ID：12941511
> 
> 赞同：1
> 
> 时间：2012-10-17T19:05:46.977
> 
> 标签：javascript, internet-explorer, cookies, scroll

我正在尝试保存/恢复回发的滚动位置。我的代码适用于 Firefox 和除 Internet Explorer 之外的所有主要浏览器。

```
 function saveScrollPosition() {

    // Save the cookie if the requestor is Internet Explorer
    if (navigator.appName.indexOf("Microsoft") != -1) {
       alert("Internet Explorer browser has been identified...");
       var scrollX, scrollY;
       var strA = "KulScrollPos=";
       var strB = ",";
       var strC = "; path=";

       // Depending on the version of Internet Explorer --- call the appropriate API
       if (!document.documentElement.scrollLeft)
         scrollX = document.body.scrollLeft;
       else
         scrollX = document.documentElement.scrollLeft;
       if (!document.documentElement.scrollTop)
         scrollY = document.body.scrollTop;
       else
         scrollY = document.documentElement.scrollTop;
       alert("scrollX = " + scrollX + " and " + "scrollY = " + scrollY);
       alert("strA = " + strA);

       //document.cookie = "KulScrollPos="+scrollX+","+scrollY+"; path="+document.location.pathname;
       document.cookie = strA.concat(scrollX, strB, scrollY, strC, document.location.pathname);
    }
    // Save the cookie for all other major browsers
    else {
       document.cookie = "KulScrollPos="+f_scrollLeft()+","+f_scrollTop()+"; path="+document.location.pathname;
    }
    alert("cookie = " + document.cookie)
}

function restoreScrollPosition() {
    alert("Entered the restore method...");
    cookieName = "KulScrollPos";

    if (document.title == "KFS :: Create Purchase Log") {
       resetScrollPosition();
       expireCookie( cookieName );
       return true;
    }
    else {
       var matchResult = document.cookie.match(new RegExp(cookieName+"=([^;]+);?"));
       if ( matchResult ) {
         var coords = matchResult[1].split( ',' );
         if (coords[1] != 0) {
           alert("Restoring the scroll position before scrollTo... " + coords[0] + " and " + coords[1]);
           window.scrollTo(coords[0],coords[1]);
           parent.window.scrollTo(coords[0],coords[1]);

        }
        expireCookie( cookieName );
        return true;
    }
    else {
     return false;
    }
} 
```

请注意我正在打印 cookie 名称的警告框。

Firefox 打印以下内容：

```
cookie = KulScrollPos=0,1946; kualiSessionId=A7807919-4719-D5B4-91D6-9CC04EEA1BA8;JSESSIONID=1F155C7FC23C48A4DAF557CA4B92D2CB 
```

Internet Explorer 打印以下内容：

```
cookie = kualiSessionId=072BE31C-6AF5-6D4C-11A4-55E799790C6A; JSESSIONID=76D83E8E7EBA5F25B8A1B1990B9344E8 
```

注意字符串 KulScrollPos=0,1946; 被忽略了 cookie 名称。这只发生在 Internet Explorer 中！

***我尝试了另一种方法来设置我正在设置 document.cookie = ... 的字符串变量（被注释掉的行）。这一行也产生了与上面显示的相同的警报输出。

请注意我的 RestoreScrollPosition 中的 ELSE 块。if (matchResult) 条件总是因此而失败，因此，我在那里调用我的 scrollTo 方法的代码永远不会被调用！

呃，我是不是把字符串连接错了？IE 不喜欢 FF 做什么？

确实非常奇怪的行为！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:41:51.867

显然 Internet Explorer 不喜欢双引号中提供的 cookie 名称中的“=”（等号）。它正在解释 '='; 而不是接受它作为文字；因此，我使用单引号解决了这个问题。显然，你必须对IE强行！去搞清楚....

以下代码解决了我遇到的问题 -

```
function saveScrollPosition() {

    // Save the cookie if the requesting browser is Internet Explorer
    if (navigator.appName.indexOf("Microsoft") != -1) {
        // Ensure that the cookie will be saved on IE version 5/+
        if (!document.documentElement.scrollLeft)
          scrollX = document.body.scrollLeft;
        else
          scrollX = document.documentElement.scrollLeft;
        if (!document.documentElement.scrollTop)
          scrollY = document.body.scrollTop;
        else
          scrollY = document.documentElement.scrollTop;
        document.cookie = 'KulScrollPos =' + scrollX+','+scrollY+';'+document.location.pathname;
    }

    // Save the cookie for all other major browsers
    else {
        document.cookie = "KulScrollPos="+f_scrollLeft()+","+f_scrollTop()+"; path="+document.location.pathname;
    }
} 
```

得到教训 -

不要在 cookie 名称中使用“=”符号。如果您需要它们，请使用单引号告诉 IE 不要解释它，而是接受它作为文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:17:04.340

Cookie 数据不应包含逗号。您需要在写入滚动数据之前对其进行编码或转义，然后在读取时对其进行解码或转义。

编辑：您也可以更改分隔符；也许试试管道（|）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:18:21.630

逗号是多个 cookie 的有效分隔符。尝试将逗号替换为`%2C`，或`escape()`整个 cookie 值。

# linq - lambda 比 linq 查询快吗？

> ID：12941514
> 
> 赞同：3
> 
> 时间：2012-10-17T19:06:02.520
> 
> 标签：linq, c#-4.0, lambda, parallel-processing, parallel-extensions

我正在玩 lambda、linq 和 parallel，一个问题来了。

lambda 比 linq 查询快吗？

O 编写一些测试代码（[在 GitHub 中 Fork it](https://github.com/Ewerton/LinqAndLambdaPerformanceTest/blob/master/Program.cs)）并且 lambda 方法似乎更快。这是真的还是我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T19:09:53.233

您的查询不一样。

查询表达式：

```
from p in lista 
where p.Age > 18 && p.Age < 60 && p.Phone.StartsWith("11")
select p 
```

常规扩展方法调用：

```
.Where(n => n.Age > 18).
 Where(n => n.Age < 60).
 Where(n => n.Phone.StartsWith("11")) 
```

第一个调用`Where` *一次*；第二次调用`Where`三次。要使它们*的行为完全相同，*您应该使用：

```
.Where(n => n.Age > 18 && n.Age < 60 && n.Phone.StartsWith("11")) 
```

此时，这两种形式将编译为完全相同的代码。

此外，您的测试中有一个*巨大*的漏洞：您正在测试*构建*查询......您从未真正*评估*它：

```
sw.Start();
IEnumerable listaSemParalelismoLinq = from p in lista
                                      where p.Age > 18 && p.Age < 60 && 
                                            p.Phone.StartsWith("11")
                                      select p;
sw.Stop(); 
```

您*必须*以某种形式使用查询，例如调用`Count()`它，以使其真正“执行”。（您需要将类型更改为通用`IEnumerable`形式，例如使用`var`。）在几乎所有情况下，简单地构造查询所花费的时间基本上是无关紧要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:27:27.210

我做了@Jon Skeet 建议的修改，按以下顺序运行程序

```
Console.WriteLine("1 - LINQ without paralelism " + LinqWithoutParalelism(lista));
Console.WriteLine("2 - LINQ with paralelism " + LinqWithParalelism(lista));
Console.WriteLine("3 - Lambda without paralelism: " + LambdaWithoutParalelism(lista));
Console.WriteLine("4 - Lambda with paralelism: " + LambdaWithParalelism(lista)); 
```

显然，兰巴更快，但我将执行顺序更改为

```
Console.WriteLine("3 - Lambda without paralelism: " + LambdaWithoutParalelism(lista));
Console.WriteLine("4 - Lambda with paralelism: " + LambdaWithParalelism(lista));
Console.WriteLine("1 - LINQ without paralelism " + LinqWithoutParalelism(lista));
Console.WriteLine("2 - LINQ with paralelism " + LinqWithParalelism(lista)); 
```

并且 lambda 不是更快的。我知道这个测试非常简单，我没有考虑预热时间并进行大量交互，但是，实际上我的回答是：不，lambda 并不比 linq 查询快。

# android - 如何将图像从列表视图加载到详细活动

> ID：12941515
> 
> 赞同：1
> 
> 时间：2012-10-17T19:06:02.833
> 
> 标签：android, android-layout, android-intent, android-listview, android-activity

你好我有一个列表视图，我在其中加载我的 JSON 文本和缩略图。我使用了来自[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)的教程中的代码，并将其从 xml 转换为加载 json。

解析文本和图像在我的列表视图中工作，但现在我添加了第二个活动，例如详细视图，我还希望在其中显示与缩略图相同的图像。我使用惰性列表教程中的 ImageLoader 类。

问题是我无法在我的详细视图中加载此图像。有人对我如何使这项工作提出建议吗？

我的代码自定义列表视图：

```
 `package com.example.androidhive;

    import java.util.ArrayList;
    import java.util.HashMap;

    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;
    import org.w3c.dom.Document;

import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import com.example.androidhive.JSONParser;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class CustomizedListView extends Activity {

    // url om request te maken
    private static String URL = "http://www.iappministrator.com/OBDE/webservice/android_deelnemers_items.php";

    // JSON Node namen
    static final String TAG_ITEMS = "items";
    static final String TAG_TITLE = "title";
    static final String TAG_MESSAGE = "message";
    static final String TAG_DATE = "date";
    static final String TAG_IMAGES = "images";

    // Nieuws JSONArray
    JSONArray newsArray = null;

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Hashmap voor listView
        ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

        // Maak een JSON Parser instance
        JSONParser jParser = new JSONParser();

        // Pakt JSON string uit URL
        JSONObject json = jParser.getJSONFromUrl(URL);

        try{
            // Pakt de Array van Nieuwsartikelen
            newsArray = json.getJSONArray(TAG_ITEMS);

            // Loop door alle Nieuwsartikels
            for(int i=0; i < newsArray.length(); i++){
                JSONObject c = newsArray.getJSONObject(i);

                // Het plaatsen van elk json item in variabele
                String title = c.getString(TAG_TITLE);
                String message = c.getString(TAG_MESSAGE);
                String date = c.getString(TAG_DATE);
                String images = c.getString(TAG_IMAGES);

                // maak een nieuwe HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // voeg elk item child node in de Hashmap -> value
                map.put(TAG_TITLE, title);
                map.put(TAG_MESSAGE, message);
                map.put(TAG_DATE, date);
                map.put(TAG_IMAGES, images);

                // voeg de HashList toe aan ArrayList
                newsList.add(map);
            }
        } catch(JSONException e){
            e.printStackTrace();
        }

        list=(ListView)findViewById(R.id.list);

        adapter=new LazyAdapter(this, newsList, R.layout.list_row, 
                new String[]{TAG_TITLE, TAG_MESSAGE, TAG_DATE, TAG_IMAGES}, new int[] {
                R.id.title, R.id.artist, R.id.duration, R.id.list_image});        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
                String date = ((TextView) view.findViewById(R.id.duration)).getText().toString();
                String message = ((TextView) view.findViewById(R.id.artist)).getText().toString();
                //String images = ((TextView) view.findViewById(R.id.list_image)).getText().toString();
                //ImageView thumb_image = (ImageView) view.findViewById(R.id.thumbnail); // thumb image
                String images = ((ImageView)view.findViewById(R.id.list_image)).getImageMatrix().toString();
                //String images = ((ImageView)view.findViewById(R.id.list_image)).toString();
                //String images = ((ImageView)view.findViewById(R.id.list_image)).getContext().toString();

                // Start de nieuwe intent

                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                //Bitmap bitmap = (Bitmap) in.getParcelableExtra(TAG_IMAGES);

                in.putExtra(TAG_TITLE, title);
                in.putExtra(TAG_DATE, date);
                in.putExtra(TAG_MESSAGE, message);
                in.putExtra(TAG_IMAGES, images);
                startActivity(in);

            }
        });     
    }   
}` 
```

第二个Activity的代码：

```
 package com.example.androidhive;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.HashMap;

import com.nostra13.example.universalimageloader.ImageGridActivity.ImageAdapter;

import android.app.Activity;
import android.content.Intent;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.widget.ImageView;
import android.widget.TextView;

public class SingleMenuItemActivity  extends Activity {

    // JSON node keys
    private static final String TAG_TITLE = "title";
    private static final String TAG_MESSAGE = "message";
    private static final String TAG_DATE = "date";
    private static final String TAG_IMAGES = "images";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);

        // getting intent data
        Intent in = getIntent();

        // Get JSON values from previous intent
        String title = in.getStringExtra(TAG_TITLE);
        String date = in.getStringExtra(TAG_DATE);
        String message = in.getStringExtra(TAG_MESSAGE);
        String images = in.getStringExtra(TAG_IMAGES);
        //Bitmap bitmap = in.getParcelableExtra(TAG_IMAGES);
        //ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image);

        // Displaying all values on the screen
        TextView lblTitle = (TextView) findViewById(R.id.title_label);
        TextView lblDate = (TextView) findViewById(R.id.date_label);
        TextView lblMessage = (TextView) findViewById(R.id.message_label);
        ImageView lblImages = (ImageView) findViewById(R.id.images_label); 
        //TextView lblImages = (TextView) findViewbyId(R.id.images_label);

        // loader image
        //int loader = R.drawable.loader;
        System.out.println("Ja en nu werkt het niet meer");

        // image url
        //String image_url = "http://d24w6bsrhbeh9d.cloudfront.net/photo/5614379_460s.jpg";

       //ImageLoader imgLoader = new ImageLoader(getApplicationContext());
        //-imgLoader.DisplayImage(song.get(CustomizedListView.TAG_IMAGES), lblImages);
        System.out.println("Error? haha bam jammer dan:");
       //imgLoader.DisplayImage(images, lblImages);
        System.out.println("Plaatjes?:"+ images);

        lblTitle.setText(title);
        lblDate.setText(date);
        lblMessage.setText(message);
        //lblImages.setImageURI(Uri.parse(images));

        //ImageLoader imageLoader = new ImageLoader(getApplicationContext());
        //imageLoader.DisplayImage(images,lblImages);

        //lblImages.setImageResource(images);
        //imageLoader.displayImage(images);
        //lblImages.setImageBitmap(bitmap);
        //lblImages.setImageResource(R.drawable.bitmap);
        //lblImages.setImageResource(images);
        /*if (d instanceof BitmapDrawable) {
            Bitmap bm = ((BitmapDrawable)d).getBitmap();
            //Maybe more code here?
            lblImages.setImageBitmap(bm);
    }*/
        //lblImages.setImageResource(images);
        //lblImages.DisplayImage(images);
        //lblImages.DisplayImage(images);
    }
} 
```

懒惰的适配器：

```
`package com.example.androidhive;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d, int listRow, String[] strings, int[] is) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
        TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get(CustomizedListView.TAG_TITLE));
        artist.setText(song.get(CustomizedListView.TAG_MESSAGE));
        duration.setText(song.get(CustomizedListView.TAG_DATE));
        imageLoader.DisplayImage(song.get(CustomizedListView.TAG_IMAGES), thumb_image);
        return vi;
    }
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:38:28.410

只需将其添加到自定义列表视图中

```
TAG_ITEMS = "items";
static final String TAG_TITLE = "title";
static final String TAG_MESSAGE = "message";
static final String TAG_DATE = "date";
static final String TAG_IMAGES = "images";

public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                          HashMap<String, String> map = newsList.get(position);

                        Intent in = new Intent(SingleMenuItemActivity.this, org.scout.android.library.LibraryDetail.class);
                        in.putExtra(TAG_TITLE, map.get(TAG_TITLE));
                        in.putExtra(TAG_MESSAGE, map.get(TAG_MESSAGE));                         
                        in.putExtra(TAG_DATE, map.get(TAG_DATE));
                        in.putExtra(TAG_IMAGES, map.get(TAG_IMAGES));

                        startActivity(in); 
```

在你的单个菜单项类中获得额外的并显示图像，如下所示：

```
Intent in = getIntent();
final String image_url = in.getStringExtra(TAG_IMAGES);

ImageView imgv = (ImageView) findViewById(R.id.ID);
ImageLoader imageLoader = new ImageLoader(getApplicationContext());
imageLoader.DisplayImage(iamge_url, imgv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:38:57.387

在这里，我向您建议一种更清洁的方法（至少在我看来）。这将是列出所有视图的代码：

```
public class ListFiles extends ListActivity {
private List<String> dirEntries = new ArrayList<String>();
File[] files;

@Override
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);

    Intent i = getIntent();
    File dir = new File(i.getStringExtra("directory"));

    if (dir.isDirectory())
        files = dir.listFiles();

    this.dirEntries.clear();

    for (File file : files)
        this.dirEntries.add(file.getPath());

    ArrayAdapter<String> dirList = new ArrayAdapter<String>(this, R.layout.file_row, this.dirEntries);
    this.setListAdapter(dirList);
}

@Override
public void onListItemClick(ListView lv, View v, int pos, long id) {
    File clickedFile = new File(this.dirEntries.get(pos));
    Intent i = getIntent();
    //Detect what view was clicked
    i.putExtra("clickedFile", clickedFile.toString());
    setResult(RESULT_OK, i);
    finish();
} 
```

}

以下是点击查看详情的代码：

```
public class ImageManipulation extends Activity {
static final String CAMERA_PIC_DIR = "/DCIM/CAMERA";
ImageView image;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.board);

    image = new ImageView(this);
    this.addContentView(image, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
    String dir = Environment.getExternalStorageDirectory().getAbsolutePath() + CAMERA_PIC_DIR;

    Intent i = new Intent(this, ListFiles.class);
    i.putExtra("directory", dir);

    startActivityForResult(i, 0);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if ((requestCode == 0) && (resultCode == RESULT_OK)) {
        String tmp = data.getExtras().getString("clickedFile");
        Bitmap bmp = BitmapFactory.decodeFile(tmp);
        processImage(bmp);
    }
}

private void processImage(Bitmap bmp) {

    image.setImageBitmap(bmp);
} 
```

}

在我的代码中，我为列表视图使用标准适配器，但我确信很容易适应你所做的事情。祝你好运！！！！

# javascript - 谷歌地图不尊重 DIV CSS 样式

> ID：12941516
> 
> 赞同：0
> 
> 时间：2012-10-17T19:06:04.903
> 
> 标签：javascript, css

所以我有一个名为 dgmap 的 div，我将我的谷歌地图放置在其中。我遇到的问题是，当我显示地图时，它超出了我在 CSS 中指定的大小。仅供参考，我的目标是设备宽度为 480 像素的 HTC evo。所以宽度应该是44px。?? 有任何想法吗 ？

```
#dgmap {
float:none;
width: 98%;
height: 300px;
}
@media only screen and (max-width: 480px) 
{
#dgmap{
float: none;
width: 44px;
height: 250px;      

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:09:10.320

您是否尝试过将`!important`标签包含在宽度中，如下所示：

```
width: 44px !important; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:05:35.200

谷歌地图提供了一个带有 iframe 的代码，例如：

```
<iframe width="250" height="250" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=FRCUIAIduoZTCCnnVy7whxtdYDGJG1cii2EBLg%3BFYBHIQIdCrpTCCkfVrpup5IYYDF4sncnN-BKPQ&amp;q=tokyo+to+toshima+ku+ikebukuro+3-30-15.&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=34.122306,86.572266&amp;ie=UTF8&amp;t=m&amp;start=0&amp;ll=35.724496,139.70541&amp;spn=0.041808,0.051498&amp;z=13&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=FRCUIAIduoZTCCnnVy7whxtdYDGJG1cii2EBLg%3BFYBHIQIdCrpTCCkfVrpup5IYYDF4sncnN-BKPQ&amp;q=tokyo+to+toshima+ku+ikebukuro+3-30-15.&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=34.122306,86.572266&amp;ie=UTF8&amp;t=m&amp;start=0&amp;ll=35.724496,139.70541&amp;spn=0.041808,0.051498&amp;z=13" style="color:#015492;text-align:left; font-size:10px; font-weight:bold; float:right;">VIEW LARGER MAP</a></small> 
```

您必须在 iframe 中指定地图的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:09:45.507

隐藏 div 直到需要然后显示它调用 google.maps.event.trigger(map, 'resize')

希望这可以帮助！

# sql-server - ASP.Net MVC 项目 SQL Server 审计的多个数据库用户，还是我们自己的？

> ID：12941517
> 
> 赞同：1
> 
> 时间：2012-10-17T19:06:06.937
> 
> 标签：sql-server, asp.net-mvc, audit

我们目前为我们的 ASP.Net MVC 应用程序设置了一个 SQL Server 2008 实例，并且 SQL Server 实例使用内置审计（我相信 CDC？）

我们还将我们的 ASP.Net 应用程序设置为使用web.config 中为整个应用程序指定的**一个**连接字符串，无论谁登录（大约 50 个用户）

问题：**我们希望能够在审计信息中包含进行特定更改的用户的用户名。**

看起来我们只能通过以下两种方式之一来做到这一点：

1.  **更改我们的应用程序设置，以便每个用户都有自己的数据库登录。**这将要求我们使用动态连接字符串（也许不是太糟糕），但此外，向系统添加新用户会很痛苦，并且管理员不能再通过应用程序的界面自动执行此操作（我认为）。
2.  **使用 ASP.Net 应用程序本身的另一个解决方案**。这将允许我们在我们希望的应用程序中简单地添加任何信息，但将涉及废弃整个内置解决方案，并且基本上从头开始需要付出巨大的努力。

在进行审计之前一定有人遇到过这个问题——#1 可行吗？或者＃2是我们可以去这里的唯一途径吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:22:01.417

选项 #1 对管理员来说很痛苦，“动态”连接字符串的代码有点复杂，并且调用 sp_addlogin 来创建用户。但最糟糕的是，每个用户的单独数据库登录也允许他们直接查询数据库（如果他们知道实例和数据库名称，这可能会以任何方式泄漏给他们并通过网络“看到”数据库服务器）。直接访问数据库可能会使每个应用程序崩溃。不要这样做，除非您非常确定用户无法直接访问数据库服务器。

关于#2。如何将“LastModifiedLogin”列添加到每个表中，在每次插入/更新期间将登录用户的登录信息放在其中？这不应该让 CDC 崩溃，你得到了你想要的。但是审计删除问题不大，因为您发出语句并且不再有可以放置登录名的行。您可以组织单独的“DeleteAudit”表，在其中将表名、行标识符和用户登录名放在每次删除时，但这只是粗略的想法。

如果您使用 NHibernate 进行数据访问，我建议您考虑将 CDC 切换到 NHibernate Envers，这是一个非常简洁的解决方案。

# mysql - 在 SQL 中排序：最旧的记录，但 x 行内没有重复值

> ID：12941521
> 
> 赞同：2
> 
> 时间：2012-10-17T19:06:31.913
> 
> 标签：mysql, sql

我有一排要在摄影网站主页上展示的照片。摄影师倾向于一次上传几十张照片，这意味着选择最佳上传照片的编辑很可能将同一摄影师的几张照片一个接一个地放入队列中。但我们不希望一位摄影师连续数小时拥有主页。

目前，我们手动对队列进行排序，使其尽可能按排队时间顺序 (FIFO)，但同一摄影师的两张照片的距离不会超过五个时隙。我们想自动化这个。

我知道我们可以在 PHP 中进行排序，但是我们可以使用单个 MySQL 查询以正确的顺序检索队列吗？

表结构看起来像这样。我们通过交换两个相邻镜头的 queued_time 来对队列进行排序——这并不理想，但它确实有效：

```
homepage_queue
--------------
id INT NOT NULL
photo INT NOT NULL
queued_time INT NOT NULL

photos
------
id INT NOT NULL
photographer INT NOT NULL 
```

浏览相关的 SO 问题会弹出此页面，这似乎表明我需要模拟 Oracle 的 LAG 功能： http: [//onlamp.com/pub/a/mysql/2007/04/12/emulating-analytic-aka-排名功能与 mysql.html?page=2](http://onlamp.com/pub/a/mysql/2007/04/12/emulating-analytic-aka-ranking-functions-with-mysql.html?page=2)

尤其是当我考虑到我需要查看最后五行时，这看起来很混乱，以至于我很想尖叫着跑开并用 PHP 来做，但是我错过了更简单的方法吗？

我们通常将队列塞满一周，每张照片一个小时，所以我们在外面谈论可能有 200 条记录。

队列末尾肯定有一些照片无法以符合“五分开”规则的方式进行排序。没关系，因为我们很可能每 24 小时运行一次作业，而且随着上传的源源不断，队列的尾端变得一团糟是可以的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:10:27.183

确实，当您提出问题时，您应该提供一些有关数据结构的信息。让我假设您在基础表中有以下列：

*   队列位置
*   摄影师
*   照片身份证

如果是这样，以下将根据队列中的第一张照片为每位摄影师返回一行：

```
select q.*
from Queue q join
     (select PhotographerId, min(QueuePosition) as minQP
      from queue q
      group by PhotographerId
     ) qp
     on q.QueuePosition = minQP
order by q.QueuePosition 
```

以下是您的实际数据的变化：

```
select q.*
from Queue q join
     (select Photographer, min(QueuedTime) as minQT
      from HomePage_Queue hpq join
           Photos p
           on hpq.PhotoId = p.Id
      group by Photographer
     ) qp
     on q.QueuedTime= minQT
order by q.QueuedTime 
```

假设 QueuedTimes 是唯一的，这将起作用。如果不是，则需要做更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:32:35.440

我会在组合中添加另一张表，其中记录了最近出现在您网站上的 5 位摄影师。

查询以选择您的下一张照片：

```
SELECT
  homepage_queue.photo
FROM
  homepage_queue
INNER JOIN
  photos
    ON photos.id = homepage_queue.photo
LEFT JOIN
  (SELECT photographer, COUNT(*) AS occurances FROM last_five GROUP BY photographer) AS last_five
    ON last_five.photographer = photos.photographer
ORDER BY
  last_five.occurances ASC,
  homepage_queue.queued_time
LIMIT
  1 
```

选择照片后：
- 将该值存储在某处
- 删除最旧的条目`last_five`
- 添加`last_five`与新照片的摄影师相关的新条目
- 从队列中删除所选照片

一些额外的维护，但解决方案相对简单并且可以自行维护。

*   如果队列中只有两名摄影师，他们将交替进行
*   如果新摄影师上传了几张照片，他们将获得优先权
*   在最后 5 名中出现次数最少的摄影师总是优先

**编辑：**

这简化了问题，只关注`what's next?`

您可以通过在循环中重复该过程 24 次来调整它以生成一个全新的队列。您将每次迭代推入`next photo`新队列。

您甚至可以一次生成 24 张照片的列表，然后每小时使用一次迭代：
- 删除一张照片
- 使用此方法添加一张照片

然后，您就有了一个包含 24 张照片的固定列表，一种始终将“正确的”添加到列表末尾的方法，并且可以随时重新排列 24 张照片的列表。

# mongodb - 使用 Doctrine 和 MongoDB 存储数组

> ID：12941523
> 
> 赞同：8
> 
> 时间：2012-10-17T19:06:38.413
> 
> 标签：mongodb, symfony, doctrine

如何使用 Doctrine 和 Mongo DB 存储数组？

我不想要参考文件，只想要数组。

例子：

```
Type[ 
     Type1,
     Type2,
     Type3
] 
```

我需要创建新的 Doctrine ODM 数据类型吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-19T14:33:15.870

如果您需要将未映射到文档类的值存储在数组中，则可以使用`collection`字段映射，该映射映射到 MongoDB 中的基本数组。还有一种`hash`类型，类似地将 PHP 中的关联数组转换为 MongoDB 中的对象，而不在其中映射任何内容。

如果您的示例中的“类型”是一个映射文档类，那么您将需要使用[EmbedMany](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/embedded-mapping.html#embed-many)关系，它将一个或多个映射文档存储在父文档内的数组中。在 MongoDB 中，这将被表示为一个对象数组，这类似于您可以自己对`collection`字段执行的操作（存储关联数组的数组）；但是，ODM 将利用 EmbedMany 映射将这些对象水合回文档实例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-17T05:31:22.033

您可以根据需要使用 mongo 类型的哈希或集合。

**Hash ：**以关联数组的形式存储和检索值。

**Collection ：**将值存储和检索为数字索引数组。

例如：

```
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

class Category
{
    /**
     * @MongoDB\Field(name="tags", type="collection")
     */
    private $tags;

    /**
     * @MongoDB\Field(name="country_wise_total_count", type="hash")
     */
    private $country_wise_total_count;
} 
```

数据存储如下：

```
"tags": [
    "man",
    "boy",
    "male",
    "sandal",
    "cloth",
    "army boots",
    "boots",
    "sport shoes",
    "school",
    "casual",
    "office"
  ],

"country_wise_total_count": {
     "NP": NumberInt(7),
     "US" : NumberInt(10)
  } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-26T09:03:28.027

```
...
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;
...
class MyClass
{
    /**
     * @MongoDB\Hash
     */
    protected $tags = array();
} 
```

此外，如果您想要一种可以帮助您处理该类型变量的表单类型，您可以查看[BSPTagBundle 。](https://github.com/D3r3ck/BSPTagBundle)

# android - android 中是否支持索引 png 文件——尤其是 16 位 png 文件？

> ID：12941526
> 
> 赞同：2
> 
> 时间：2012-10-17T19:06:42.713
> 
> 标签：android, png

我将地形数据存储为 16 位 png 文件。我想应用一个颜色表，将高度映射到要在地图上绘制的颜色。（是的，我意识到该表将有 65536 个条目）。

Android 是否支持此功能，或者我是否必须在加载数据时将数据转换为 RGB？或者找到适用于 Android 的 libpng 版本？还是自己建？

编辑：正确；png 文件中没有颜色表；我在加载图像时在软件中生成它。

我想表达我的问题的更好方法是：有没有办法通过查找表映射 16 位整数的位图以生成新的 RGB 位图？还是我需要自己动手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:44:11.593

没有 16 位索引 PNG 格式，因此我想您要做的是加载 16 位灰度 PNG 并使用 64Kb 颜色表以伪彩色显示它。这实际上意味着您需要进行 16 位灰度到 24 位 RGB 的转换（或者可能是[RGB_565](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)）。这与 PNG 关系不大，因此“为 Android 找到一个 libpng 版本”并没有多大帮助，您仍然需要自己进行转换（在 PNG 解码之后）。如果您担心转换浪费更少的内存，我建议您看看我的[PNGJ](https://code.google.com/p/pngj/)库。

# jquery - 垂直滚动黑客，水平滚动内容

> ID：12941528
> 
> 赞同：1
> 
> 时间：2012-10-17T19:06:49.650
> 
> 标签：jquery, html, scroll

有人问了这个问题，我正在尝试做类似的事情，因为我在那里发帖试图寻求替代方案，但评论被删除了，我正在问一个新问题。

此版本的答案删除了自然的水平功能，而不是将水平替换为垂直，我想将其添加为附加功能，因为当您水平滚动时它会水平滚动，但是当您垂直滚动时会水平滚动。所以你可以做任何一个或，它具有相同的效果..

这是示例代码。

当向上或向下移动鼠标滚轮或使用触控板向上或向下滚动时，或者通过垂直移动滚动条时，您能否帮助使这两个功能可用于水平滚动。最终结果是水平滚动内容。

[将垂直滚动破解为水平滚动](https://stackoverflow.com/questions/3885059/hacking-vertical-scroll-into-horizontal-scroll)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<title>Scrolling test</title>
<!-- jQuery library - I get it from Google API's -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function(){

$(window).scroll(function(event){
    var topScroll = $(window).scrollTop();
    var leftScroll = $(window).scrollLeft();
    $(window).scrollLeft(topScroll);
    $("body").css("padding-top", leftScroll);
});

});

</script>

<style type="text/css">
h1 {
    font-family: Verdana, Arial, sans-Serif;
    font-size: 46px;
    display: block;
    white-space:nowrap;
}

body {
    height: 1000px;
}
</style>
</head>

<body>
<div id="content"><h1>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur tincidunt dictum rhoncus. Phasellus nulla nulla, facilisis eu aliquam aliquet, mattis pulvinar purus. </h1></div>
</body>
</html> 
```

# android - 如何维护添加到购物车会话

> ID：12941535
> 
> 赞同：1
> 
> 时间：2012-10-17T19:07:10.940
> 
> 标签：android, android-intent

我的应用程序基本上用于扫描二维码，首先当用户扫描二维码时，会显示产品图片、描述、价格和添加到购物车按钮。当用户点击添加到购物车按钮时，它会继续进行另一个活动，他/她设置产品数量，在同一活动上设置更多产品图标，当用户单击该图标时，此处会显示更多产品图像还添加到购物车按钮单击该按钮时会放置另一个活动，他/她在那里设置数量，我的问题是没有维护添加到购物车会话，以前的产品没有显示在他/她的购物袋中，目前选择的产品之前没有在购物中存储。

请帮助我，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:19:41.557

你问了一个模糊的问题，所以我假设你正在寻找一种策略而不是特定的代码。

我能想到有两种方法可以解决这个问题。基本上，您希望在活动之间维护信息。您可以使用存储您点击的项目的应用程序类，或者您可以将会话活动保存到 sqlite 数据库中。

我推荐第一个选项，应用程序级别的类。基本上，这是一个位于应用程序级别的所有活动之上的类，并且可供所有活动以及服务和广播接收器等访问。我认为它等同于在 php 中使用 SESSION 变量。

有一篇关于通过应用程序在 android 中的全局变量的文章的链接：http: [//trace.adityalesmana.com/2010/08/declare-global-variable-in-android-via-android-app-application/](http://trace.adityalesmana.com/2010/08/declare-global-variable-in-android-via-android-app-application/)

# vb.net - 如何除整数值

> ID：12941537
> 
> 赞同：6
> 
> 时间：2012-10-17T19:07:20.097
> 
> 标签：vb.net, integer-division

我想在 VB.NET 中执行整数除法，即只保留除法结果的整个部分。

```
Dim a, b, c as int32
a = 3500
b = 1200
c = a/b 
```

此示例输出`3`.

我该如何让它返回`2`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T20:16:54.623

由于这是 Visual Basic，因此您有 2 个除法[运算符](http://msdn.microsoft.com/en-us/library/b6ex274z%28v=vs.100%29.aspx) [`/`](http://msdn.microsoft.com/en-us/library/25bswc76%28v=vs.100%29.aspx)，它们用于标准除法，[`\`](http://msdn.microsoft.com/en-us/library/0e16fywh%28v=vs.100%29.aspx)用于整数除法，它返回“*两个操作数的整数商，余数被丢弃*”，这听起来像你想要的。

结果：

```
a/b = 3
a\b = 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T19:12:10.023

实际计算：`3500/1200 = 2.916`

您必须使用`Math.Floor`方法将值四舍五入`2`如下 -

```
c = Math.Floor(a/b) 
```

更多信息可在 MSDN - [Math.Floor上获得](http://msdn.microsoft.com/en-us/library/k7ycc7xh.aspx)

# jquery - 如何根据视口大小停用jquery

> ID：12941538
> 
> 赞同：0
> 
> 时间：2012-10-17T19:07:24.453
> 
> 标签：jquery, jquery-animate

我有一个使用 .animate() 滑出到网页上的导航菜单。在浏览器大小低于 1000 像素之前，它看起来很棒。如果视口小于1000px，有没有办法告诉jquery不要使用我创建的函数，所以我可以让css接管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:09:46.637

我不认为您可以在 CSS 中停用 jQuery，但在制作动画之前，您可以这样做：

```
if($(window).width() > 1000) {
    //animate
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:16:25.387

我不知道是否有一个很好的小解决方案，但是如果窗口宽度大于 1000 像素，您可以检查窗口宽度，然后加载脚本。

```
if($(window).width() > 1000) {
    $.getScript // http://api.jquery.com/jQuery.getScript/
} 
```

# google-maps - 打开时打印 Fancybox 的内容，关闭时打印页面内容

> ID：12941541
> 
> 赞同：0
> 
> 时间：2012-10-17T19:07:34.080
> 
> 标签：google-maps, printing, fancybox

我试图让用户能够在 Fancybox 打开时打印 Fancybox 的内容。Fancybox 的内容是它自己的 div 内的 Google 地图方向面板。基本上我想让用户能够打印他们刚刚完成搜索的方向。

但是，当 Fancybox 未打开时，即当他们查看包含地图的页面内容时。我希望用户能够打印页面。

我曾尝试使用 CSS 将代码段创建为“可打印”和“不可打印”，但显然这违背了我的目的。

这是我当前的代码：

```
 <style type="text/css">

    -->#printable { display: none; }

    @media print
    {
        -->#non-printable { display: none; }
        -->#printable { display: block; }
        body * { visibility: hidden; }
        #directionsPanel * { visibility: visible; }
        #directionsPanel { position: absolute; top: 1px; left: 1px; }

    }
    </style>

  </head>
  <body onLoad="initialize()">
    <table>
        <tr>
            <td>
                <input name="start_address" id="address" type="text" value="Enter Address" onFocus="doClear(this)" size="45"/>
            </td>
        </tr>
        <tr align="center">
            <td align="center">
                <a id="portDirectionBtn" class="fancybox" href="#directionsPanel" onClick="calcRoute();">Get Directions</a>
            </td>
        </tr>
    <div id="map_canvas" style="width:300px; height:300px">
    </div>
    <div id="printable">
    <div id="directionsPanel">
        <a href="javascript:window.print();">Print!</a><br />
    </div>
    </div>
    </table>

  </body>
</html> 
```

显然还有 Fancybox 和 Google Maps 脚本。如果该代码有帮助，请告诉我。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:26:19.300

在 iframe 中打开 fancybox 并从其中调用 print。由于它在 iframe 内，打印命令只会看到它并因此打印它。如果fancybox关闭，您可以从另一个按钮（iframe外部）调用print来打印整个页面

# javascript - 在 dojo 构建期间优化 CSS - 使用 dojo 1.5.2

> ID：12941542
> 
> 赞同：1
> 
> 时间：2012-10-17T19:07:40.930
> 
> 标签：javascript, css, dojo, minify

我正在尝试优化我的 CSS 文件（内联所有 @import 并删除行），但我不知道该怎么做？IRC 房间里有人告诉我关于包的事，但看起来 dojo 1.5.2 的构建系统不支持包：http: [//dojotoolkit.org/reference-guide/1.6/quickstart/custom-builds.html](http://dojotoolkit.org/reference-guide/1.6/quickstart/custom-builds.html)

我的构建配置文件看起来像这样（我添加了包部分，但无济于事）： http: [//pastebin.com/4wqca6iy](http://pastebin.com/4wqca6iy)

有人可以帮忙吗？甚至可以在 dojo 1.5.2 的 dojo 文件夹之外优化 CSS 吗？

谢谢，

维卡斯。

# php - 为什么我在 php if 语句中收到标头信息错误？

> ID：12941544
> 
> 赞同：-1
> 
> 时间：2012-10-17T19:07:55.020
> 
> 标签：php, html, mysql

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

好的，我收到此错误：

```
Warning: Cannot modify header information - headers already sent by (output started at   
/home/content/91/9646291/html/quotesystem/cpanel/index.php:1) in 
/home/content/91/9646291/html/quotesystem/cpanel/index.php on line 11

Notice: Undefined variable: content in 
/home/content/91/9646291/html/quotesystem/cpanel/index.php on line 63

Warning: include() [function.include]: Filename cannot be empty in 
/home/content/91/9646291/html/quotesystem/cpanel/index.php on line 63

Warning: include() [function.include]: Failed opening '' for inclusion 
(include_path='.:/usr/local/php5_3/lib/php') in 
/home/content/91/9646291/html/quotesystem/cpanel/index.php on line 63 
```

这是页面上的代码：

```
//Check USER LOGIN IF not logged in bring to login screen else display content
if (!(checkUser())){
    header('Location: /quotesystem/index.php');

}else{

    //Get the user array to display data 
    $userArray = getUserArray();

    //Make sure that the userid in the browser is the same as current loggin in user
    if($userArray['user_id'] != $uid){

        $content = '';

        $view = (isset($_GET['view']) && $_GET['view'] != '') ? $_GET['view'] : '';

        switch ($view) {
            case 'list' :
                $content    = 'list.php';       
                $pageTitle  = 'Customer Control Panel - View Product';
                break;

            case 'changepass' :
                $content    = 'includes/changePass.php';        
                $pageTitle  = 'Customer Control Panel - Change Password';
                break;

            case 'modify' :
                $content    = 'includes/modify.php';        
                $pageTitle  = 'Customer Control Panel - Modify Product';
                break;

            case 'detail' :
                $content    = 'detail.php';
                $pageTitle  = 'Customer Control Panel - View Product Detail';
                break;

            default :
                $content    = 'main.php';       
                $pageTitle  = 'Customer Control Panel - View Info';
        }

                    if(!($content) OR $content =='') {
                        $content = 'main.php';
                        $pageTitle = 'Customer Cpanl';
                    }

    }else {
        echo  "Sorry this is for the customer's eyes only...you are being redirected to the <a href=\"http://www.domain.com/quotesystem\">homepage</a>.     ";

    }
}
include $content;

include('../admin/footer.php');
?> 
```

流程如下：如果用户已登录（如果未登录，checkUser() 返回 true，如果未登录，则返回 true），如果当前用户 id 与 url 中的用户 id 匹配，则会显示内容。如果不是，它会显示一条消息并重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:19:49.997

我怀疑你的实际问题是：

```
if($userArray['user_id'] != $uid){ // is $uid even set ever?  is the $userArray set with the right user_id? 
```

或者

```
checkUser() // could easily be skipping the rest of the content because of this. 
```

因为如果那些返回正确的布尔值， $content 变量将永远不会被设置，你会得到错误`include('');`

一般来说，我建议设置测试或它们的小表亲，断言以确保您获得正确的逻辑流程。此外，尽早和广泛地设置您的默认值。这些步骤将有助于降低调试复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:36:41.193

我发现翻转逻辑以及使用 javascript 重定向非常成功。

```
if (checkUser()){
  Display the content
 }else{
echo "<script type='text/javascript'> window.location = 'http://www.domain.com/quotesystem'</script>";
} 
```

# jquery - 在 iPad 上滚动“中断”彩盒？

> ID：12941545
> 
> 赞同：0
> 
> 时间：2012-10-17T19:08:00.163
> 
> 标签：jquery, colorbox

这可以在这里的官方示例中轻松重复：[http ://www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)

打开第一个示例，然后尝试连续向上或向下滚动页面 4-5 次。颜色框可能会稍微移动。然后，尝试关闭颜色框。触摸颜色框外的任何位置或触摸关闭按钮似乎无济于事。我什至尝试手动添加手动 $.colorbox.close() 调用和关闭按钮触摸事件的警报。警报出现（实际上是两次），但 Colorbox 没有关闭。绝对没有办法关闭它。这个动作似乎从根本上破坏了某些东西。

如果您玩得很好并且只需触摸 Colorbox 外部或触摸关闭按钮，它就可以正常工作，但是如果您进行任何“粗略滚动”，那么它似乎会以某种方式完全破坏它。

所以，我有几个问题。1\. 其他人可以复制吗？（或者我做错了什么？） 2\. 以前有没有人遇到过这种情况？3\. 如果有，有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:22:24.013

我最近也遇到了这个问题。问题源于以下事实：由于某种原因，jQuery 中的动画优化停止更新。这会导致 Colorbox 在动画中一遍又一遍地显示相同的步骤。我能找到的唯一解决方法是更改​​ Colorbox 脚本，将每个淡入淡出动画的时间属性设置为 0。它现在似乎已经纠正了这个问题，尽管你确实失去了很好的效果。我希望这能够帮到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:05:26.490

*编辑：*此错误已在 jQuery 1.8.3 中修复。

如果您使用的是 jQuery 1.8.2，那么以下补丁将解决该问题。

```
--- jquery-1.8.2.js (original)
+++ jquery-1.8.2.js (fixed)
@@ -8615,6 +8615,9 @@
            delete tick.elem;
        }),
        tick = function() {
+           setTimeout(function() {
+               fxNow = undefined;
+           }, 0 );
            var currentTime = fxNow || createFxNow(),
                remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
                percent = 1 - ( remaining / animation.duration || 0 ), 
```

如果您使用的是 jQuery 1.7.1，则可以使用以下补丁。

```
--- jquery-1.7.1.js (original)
+++ jquery-1.7.1.js (fixed)
@@ -8706,6 +8706,7 @@

    // Each step of an animation
    step: function( gotoEnd ) {
+       setTimeout( clearFxNow, 0 );
        var p, n, complete,
            t = fxNow || createFxNow(),
            done = true, 
```

我已在[票证 #12837](http://bugs.jquery.com/ticket/12837)中向 jQuery 提交了有关此错误的更多信息。

# php - AJAX 请求未提交我的表单

> ID：12941551
> 
> 赞同：0
> 
> 时间：2012-10-17T19:08:20.467
> 
> 标签：php, ajax, codeigniter

我有一个用于提交表单的 ajax 请求。

```
$('#position'+i).change(function () { 
        var data = $(this).attr('value');
        var form = $('#pages_form');
        $.ajax({
            type: "POST",
            url: form.attr('action'),
            data: data,
            succes: alert('Postion has been saved')
        });
    }); 
```

它似乎不想去我硬编码它的url天气或使用表单动作属性。我需要做什么才能提交我的表格。

这很奇怪，因为如果我按 Enter 键，它会提交表单，但会绕过 ajax 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:10:49.570

```
var form = $('pages_form'); 
```

这很糟糕，这是什么类型的选择器，据我所知，没有 pages_from 标记。它应该是

```
var form = $('#pages_form'); 
```

如果它的 ID。

如果上课那么

```
 var form = $('.pages_form'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:13:00.680

一些更正：

```
var form = $('pages_form'); 
```

不是指有效元素。如果 'pages_form' 是你的表单的 id，那么你需要使用这个：

```
var form = $('#pages_form'); 
```

此外，您拼写错误的“成功”，并且它没有所需的格式。将该行更改为

```
success: function() {alert('Postion has been saved');} 
```

我认为在修复这些之后，您的代码应该可以工作。:)

好的，那么需要一些验证，尽管它们可能看起来很明显。

1.  确保 i 包含一个值并且有一个具有相应 id 的输入元素，因此如果 i 等于 1，那么您有一个 id 为“position1”的输入元素。
2.  确保您的表单正确设置了正确的操作属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:09:57.120

这不是回调的工作方式，而且您的成功拼写错误。您将函数名称或匿名函数传递给成功方法。

工作版本：

```
$('#position'+i).change(function () { 
        var data = $(this).attr('value');
        var form = $('#pages_form'); // Is this an id?
        $.ajax({
            type: "POST",
            url: form.attr('action'),
            data: data,
            success: function () {
               alert('Postion has been saved');
            }
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:10:41.083

您的问题很可能在于您用于获取表单的选择器：

```
var form = $('pages_form'); 
```

没有带有名称的**html 标记**`pages_form`；）

此外，您指定回调的方式显然是错误的。

# asp.net-mvc - MVC 3 会员服务重置密码问题

> ID：12941556
> 
> 赞同：0
> 
> 时间：2012-10-17T19:08:33.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership

我目前有一个 MVC 3 应用程序，当用户忘记密码时，它要求安全答案正确。

但是，我希望系统管理员能够在不知道安全答案的情况下重置任何用户的密码。

有什么可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:00:08.960

我最终为这个解决方案使用了两个不同的提供者。两个提供程序都添加到应用程序的 Web.Config 文件中：

```
<membership>
  <providers>
    <clear/>
    <add name="ProviderRequiredAnswer"  .......
       enablePasswordReset="true" requiresQuestionAndAnswer="true" ...... />
    <add name="ProviderNoRequiredAnswer"  ......
       enablePasswordReset="true" requiresQuestionAndAnswer="false" ...... />

   </providers>
</membership> 
```

当普通用户忘记密码并需要重置密码时，我将通过以下方式让用户使用第一个提供程序：

MembershipUser user = Membership.Providers[" **ProviderRequiredAnswer** "].GetUser(model.userToReset, false);

**字符串 autoGenPass = userToReset.ResetPassword(model.PasswordAnswer);**

bool resetPasswordSucceeded = userToReset.ChangePassword(autoGenPass, model.NewPassword);

另一方面，如果没有安全答案的系统管理员需要重置用户的密码，我将通过以下方式让用户使用第二个提供程序：

MembershipUser user = Membership.Providers[" **ProviderNoRequiredAnswer** "].GetUser(model.userToReset, false);

**字符串 autoGenPass = userToReset.ResetPassword();**

bool resetPasswordSucceeded = userToReset.ChangePassword(autoGenPass, model.NewPassword);

# visual-studio-2010 - Windows Phone：对象引用未设置为对象的实例

> ID：12941558
> 
> 赞同：0
> 
> 时间：2012-10-17T19:08:42.453
> 
> 标签：visual-studio-2010, windows-phone

我在 vs2010 中创建了一个 windows phone 应用程序，当我尝试构建它时出现此错误：

```
object reference not set to an instance of an object 
```

我没有对 vs2010 构建的项目进行任何修改，但是我得到了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T06:06:27.640

基本上，由于您使用的扩展程序确实会发生这种情况。例如，`NuGet`。

尝试更新`NuGet`，然后这个问题将摆脱希望如此。如果没有，只需卸载它`NuGet`，然后您可以稍后再安装它。

`NuGet`就是例子，我告诉你的。这个问题可能是由于扩展而引起的，例如`NuGet`正是您问题的答案。

# maps - 将代码更新到 Google 地图版本 3

> ID：12941560
> 
> 赞同：2
> 
> 时间：2012-10-17T19:08:49.007
> 
> 标签：maps

将代码更新到 Google 地图版本 3：

如何将以下代码使用谷歌地图版本 2 更新到最新版本 3？有人能帮我吗？？Google 已将 api 从 2 更新到 3，所以我也想更新我的代码。

```
 <div id="map" style="width: 100%; height: 550px"></div>

<script type="text/javascript" language="javascript">
<!--
function loadGoogleMapsAPI() {
    var script = document.createElement("script");
    script.src = "http://www.google.com/jsapi?key=ABQIAAAAyMh6cNobclm3PrugAcTTkRRV64WZ3bUzAPoCqIiq79wunMeoIRQemm_B8-GS77IHof0-AYwkueQQaQ&hl=nl&callback=loadMaps";
    script.type = "text/javascript";
    document.getElementsByTagName("head")[0].appendChild(script);
}

function loadMaps() {
    google.load("maps", "2", {"callback" : mapLoaded});
}

var gmarkers = [];

function mapLoaded() {
    var map = null;
    var geocoder = null;

    if (GBrowserIsCompatible()) {
        var labelContainer;
        var side_bar_html = "";

        function LabelControl() {  }

        LabelControl.prototype = new GControl();

        LabelControl.prototype.initialize = function(map) {
            labelContainer = document.createElement("div");
            labelContainer.style.overflow="auto";
            labelContainer.style.backgroundColor = "#ffffff";
            labelContainer.style.border = "1px solid black";
            labelContainer.style.height="350px";
            labelContainer.style.width="137px";
            labelContainer.style.paddingLeft="5px";

            map.getContainer().appendChild(labelContainer);
            return labelContainer;
        }

        LabelControl.prototype.getDefaultPosition = function() {
            return new GControlPosition(G_ANCHOR_TOP_RIGHT, new GSize(7, 33));
        }

        var bounds = new GLatLngBounds();
        var map = new GMap2(document.getElementById("map"),{size:new GSize(screen.width-410,screen.height-300)});
        map.setCenter(new GLatLng(0,0), 1);
        map.setUIToDefault();
        map.addControl(new LabelControl());
        map.addControl(new GMapTypeControl());
        map.addControl(new GScaleControl());

        geocoder = new GClientGeocoder();

        var Tsize = new GSize(150, 150);
        map.addControl(new GOverviewMapControl(Tsize));

        showAddress("blsa bla<br />bla 46<br />1blabla RX blabla (Noordholland)<br />Nederland","Datum/ Tijd: 17 okt 2012, 19:38<br />Ordernummer: <a href=\"order.php?cart_order_id=121017-193856-6447\" class=\"txtLink\">121017-193856-6447</a><br />Status: Open (nieuwe order)<br />Bedrag: 1221.20","blabla 46,1741 rx schagen,Nederland","Mw blabla");
        showAddress("blabla<br />The Boathouse<br />blabla<br />blabla blablabla (Ablabla)<br />Verenigd Koninkrijk","Datum/ Tijd: 17 okt 2012, 09:47<br />Ordernummer: <a href=\"order.php?cart_order_id=121017-094729-7406\" class=\"txtLink\">121017-094729-7406</a><br />Status: Order verwerkt &amp; voltooid<br />Bedrag: 12121.40","blablabla,blabla,ab12 blabla,Verenigd Koninkrijk"," bla");
        showAddress("blabla blabla<br />blablabla 46<br />2323 RX Schagen (Noordholland)<br />Nederland","Datum/ Tijd: 16 okt 2012, 20:42<br />Ordernummer: <a href=\"order.php?cart_order_id=121016-203616-1862\" class=\"txtLink\">121016-203616-1862</a><br />Status: Open (nieuwe order)<br />Bedrag: 1212.40","blabla,blabla rx blabla,Nederland","Mw Rblabla");
    }

    function createMarker(point,html,html2,linkname) {
        // use a custom icon with letter A - Z
        var letter = String.fromCharCode("A".charCodeAt(0) + (gmarkers.length));
        var myIcon = new GIcon(G_DEFAULT_ICON, "http://www.google.com/mapfiles/marker" + letter + ".png");
        myIcon.printImage = "http://maps.google.com/mapfiles/marker"+letter+"ie.gif"
        myIcon.mozPrintImage = "http://maps.google.com/mapfiles/marker"+letter+"ff.gif"

        var marker = new GMarker(point, {icon:myIcon});
        GEvent.addListener(marker, "click", function() {
            //marker.openInfoWindowHtml(html);
            marker.openInfoWindowTabsHtml([new GInfoWindowTab('Klant','<span class="tdText">'+html+'</span>'), new GInfoWindowTab('Bestelling','<span class="tdText">'+html2+'</span>')]);
        });
        // save the info we need to use later for the side_bar
        gmarkers.push(marker)
        // add a line to the side_bar html
        side_bar_html += '<table cellspacing="0" class="wp100"><tr class="aT"><td width="20"><b class="pageTitleSmall">'+letter+':<\/b></td><td><a href="javascript:myclick(' + (gmarkers.length-1) + ')" class="txtLinkSmall">' + linkname + '<\/a></td></tr></table>';
        labelContainer.innerHTML = side_bar_html;

        return marker;
    }

    function showAddress(customer,order,address,linkname) {
        if (geocoder) {
            geocoder.getLatLng(
                address,
                function(point) {
                    if (!point) {
                        //alert(address + " not found");
                    } else {
                        map.checkResize();
                        var marker = createMarker(point,customer,order,linkname);
                        map.addOverlay(marker);

                        bounds.extend(point);

                        // ===== determine the zoom level from the bounds =====
                        map.setZoom(map.getBoundsZoomLevel(bounds));

                        // ===== determine the centre from the bounds ======
                        map.setCenter(bounds.getCenter());
                    }
                }
            );
        }
    }
}

// === This function picks up the click and opens the corresponding info window ===
function myclick(i) {
    GEvent.trigger(gmarkers[i], "click");
}

$(document).ready(function() {
    loadGoogleMapsAPI();
});
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:58:57.233

这是一个很大的话题，不是我们可以在这里用几行来回答的。幸运的是，有一个完整的文档解释了您需要做什么： [https ://developers.google.com/maps/articles/v2tov3](https://developers.google.com/maps/articles/v2tov3)

# css - 引导站点结构 - 重新定位/流动导航

> ID：12941561
> 
> 赞同：0
> 
> 时间：2012-10-17T19:08:53.580
> 
> 标签：css, twitter-bootstrap, responsive-design

这个小提琴[http://jsfiddle.net/Wyq6F/](http://jsfiddle.net/Wyq6F/)展示了我想如何布局我的基于引导程序的网站。

该站点将有一个按钮，用于隐藏旁边并切换内容类以填充空间。

唯一不正确的是导航的位置。目前，它与包含旁边和内容的行上方的品牌共享一行。

这意味着在较小的显示器中，当我需要它之后导航时，导航将在旁边流动。

我应该如何重新定位导航？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:58:03.620

认为我已经找到了使用 position: absolute 和 margins 的解决方案。[http://jsfiddle.net/Wyq6F/1/](http://jsfiddle.net/Wyq6F/1/)

这只是恢复到位置的问题：静态并删除相关媒体查询中的边距。

除非我错了，有人有更好的主意？

谢谢

# backbone.js - 在 Backbone 中渲染集合

> ID：12941563
> 
> 赞同：1
> 
> 时间：2012-10-17T19:08:58.883
> 
> 标签：backbone.js

我有一个看起来像这样的模型

```
collection=
{
foo:[ [1,1], [2,2], [3,3] ] 
bar: [ [1,1], [2,2], [3,3] ] 
} 
```

我通过这样做将其渲染出来以在主干中查看：

```
template: JST["backbone/templates/first"]
collection.each (data) ->
      foo = data.attributes.foo
      bar = data.attributes.bar
      for foos in foo
        view = new Traveltime.Views.ViewExtractTimeList(model: foos)
        $('ul.listcontainer').append(view.render().el)
      for bars in bar
        console.log perce
        view = new Traveltime.Views.ViewExtractPercentList(model: bars)
        $('ul.2ndlistcontainer').append(view.render().el) 
```

模板优先：

```
<ul class="listcontainer">
</ul>

<ul class="2ndlistcontainer">
</ul> 
```

然后我有另外 2 个视图，每个视图处理一个单独的 tempate：

```
class App.Views.ViewExtractFoo extends Backbone.View

  tagName: "li"
  template: JST['backbone/templates/foo']

  render: ->
    $(@el).html(@template(content: @model))
    this

class App.Views.ViewExtractBar extends Backbone.View

  tagName: "li"
  template: JST['backbone/templates/bar']

  render: ->
    $(@el).html(@template(content: @model))
    this 
```

模板看起来像这样（交换 foo 为 bar 为 bar 示例）：

```
<li>
Foo: <%=content.attributes.foo%>
</li> 
```

现在这行得通，而且效果很好。但感觉真的很乱。我在 Rails 中使用主干，所以有 6 个或更多不同的文件只需接受 JSON 请求并呈现它。感觉很恶心，还有更好的方法。我只是不确定它是哪一个。

我只是在想，如果我在 Rails 中做到这一点，我可以有一个可以将这一切都拉出来的视图！？

我可以使用 collection.each 并以某种方式将嵌套集合传递给模板吗？

有点卡在这里，我绝不擅长这个，所以任何帮助都会得到很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:09:29.400

简化和统一您的模板和视图是一种选择。模板可以使用 json 对象，因此它们可以渲染数组，这非常适合渲染列表，例如您的情况。例如，您可以只有一个 ListView 使用单个模板对任何列表进行实际呈现，然后在主视图中为集合对象的两个属性重用此视图。希望下一个示例能让您了解在何处以及如何进行简化。

```
class ListView extends Backbone.View 
   tagName: 'ul'
   template: """
        {{#items}}
           <li>{{content}}</li>
        {{/items}}
    """
   render: ->
       @$el.html @template items: @options.items
       @

class MainView extends Backbone.View

    render: ->
        @$el.empty()
        for own subitems of @options.items
            @$el.append new ListView items: subitems
        @

# Example usage #
collection = 
    foo: [[1,1], [2,2], [3,3]] 
    bar: [[1,1], [2,2], [3,3]] 

$('body').append new MainView(items: collection).render().$el 
```

# vb.net - 如何与用 vb 编写的基本 cmd 程序进行交互？

> ID：12941564
> 
> 赞同：0
> 
> 时间：2012-10-17T19:09:03.157
> 
> 标签：vb.net, nsis

感谢到目前为止的所有帮助。我能够将 $Email 变量发送到 stdio 流并在 vb 脚本中接收它。我现在遇到一些代码问题

```
Option Strict On

Imports MySql.Data.MySqlClient
Imports System.Runtime.Serialization

Module jrConnect

    Sub Main(ByVal cmdArgs() As String)
        Dim returnValue As Integer = 0
        ' See if there are any arguments.
        If cmdArgs.Length > 0 Then
            For argNum As Integer = 0 To UBound(cmdArgs, 1)

                Console.Write("your email address is " & cmdArgs(argNum))
                If cmdArgs(argNum) <> "" Then
                    Dim email As String = cmdArgs(argNum)
                    Console.Write("Your email is " & email)
                End If
             Next argNum
        End If
        Dim cs As String = "*********"
        Dim conn As New MySqlConnection(cs)
        Dim entID As String

        Try
            conn.Open()
            Dim stm As String = "SELECT ***** FROM **** WHERE email =" & "'" & email & "'"
            Dim cmd As MySqlCommand = New MySqlCommand(stm, conn)
            Dim reader As MySqlDataReader = cmd.ExecuteReader()

            While reader.Read()
                entID = reader.GetString(0)
            End While
            reader.Close()

            Dim stm2 = "SELECT ***** FROM ****** WHERE ***** = " & entID
            Dim cmd2 As MySqlCommand = New MySqlCommand(stm2, conn)
            Dim reader2 As MySqlDataReader = cmd2.ExecuteReader()
            Dim counter As Integer = 0

            While reader2.Read() And counter < 3
                Console.WriteLine(reader2.GetString(0) & "%")
                counter = counter + 1
            End While
            reader.Close()

        Catch ex As MySqlException
        Finally
            conn.Close()
        End Try

    End Sub

End Module 
```

它将正确打印电子邮件地址，但是当它在 sql 语句中调用电子邮件地址时，它指出“未声明电子邮件”它是否在“Next argNum”命令中更改了它的值？它只将电子邮件写入控制台一次。如有必要，这也是我的 NSIS 脚本。

```
Outfile "test.exe"
Section
    SetOutPath $DOCUMENTS/
    Var /GLOBAL Email
    StrCpy $Email "spkelly8@gmail.com"

    nsExec::ExecToLog '"C:path/vbapp.exe" $Email'
    Pop $1
    Pop $2

    DetailPrint $1
    DetailPrint $2

SectionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:47:52.407

从 NSIS 手册：

```
nsExec will execute command-line based programs and capture the output
without opening a dos box 
```

你`console.Readline`会期待某种交互，因为它没有连接到标准输入/标准输出，所以会失败。由于您不需要 DOS 框，并且您想通过标准输入发送电子邮件字符串而不是手动输入，请使用`ExecDos::exec`

```
ExecDos::exec /TIMEOUT=2000 "$DOCUMENTS\VBApp.exe" "$Email$\n" 
```

注意`$`前面的`\n`NSIS 发送一个文字换行而不是字符串`\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:53:19.207

您正在尝试从标准输入读取，但 nsExec 不提供您可以从标准输入读取的任何数据。如果您的子进程必须从标准输入中获取数据，请更改 VB 程序以解析命令行，或者使用[ExecDos](http://nsis.sourceforge.net/ExecDos_plug-in)或[ExecCmd ...](http://nsis.sourceforge.net/ExecCmd_plug-in)

# c - 使用递归来反转字符串 - C

> ID：12941568
> 
> 赞同：0
> 
> 时间：2012-10-17T19:09:10.257
> 
> 标签：c

我不知道我是不是不懂数组还是什么，但过去几个小时我一直在寻找这段代码中的问题。当我运行它时，我得到一个无限循环的返回。

这是代码：

```
#include <stdio.h>
#include <string.h>

void reverse(char string2Reverse[80], int start, int end);

int main(int argc, char *argv[])
{
    char string[80];

    int cntr;
    for(cntr = 0; cntr < 80; cntr++)
        string[cntr] = '\0';

    int start = 0, end;

    while((scanf("s", string)) != EOF)
    {
    end = 0;
    printf("%s ", string);

    while(string[end] != '\0')
        end++;

    end--;
    reverse(string, start, end);
    end++;
    printf("%s\n\n", string);

    for(cntr = 0; cntr < end; cntr++)
        string[cntr] = '\0';
    }
}

void reverse(char string2Reverse[80], int start, int end)
{
    if(string2Reverse[start] != string2Reverse[end] && start != end)
    {
    char temp = string2Reverse[start];
    string2Reverse[start] = string2Reverse[end];
    string2Reverse[end] = temp;
    reverse(string2Reverse, start + 1, end - 1);
    }
} 
```

任何帮助都是极好的！我似乎找不到我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:15:03.463

如果 end-start 不均匀，您将无限循环，因为 start 将 != end ever .. 而且我不知道您是否真的想要比较`string2Reverse[start] != string2Reverse[end]`类似的东西，这意味着字符串中是否有一个位置是一个'a'并且在弦的另一侧的平衡位置也有一个'a'，它会终止。尝试这个：

```
void reverse(char string2Reverse[80], int start, int end)
{
    if(start < end)
    {
    char temp = string2Reverse[start];
    string2Reverse[start] = string2Reverse[end];
    string2Reverse[end] = temp;
    reverse(string2Reverse, start + 1, end - 1);
    }
} 
```

* * *

正如其他人在这里指出的那样，您的 scanf 中需要“%s”而不是“s”，您现在循环的原因是因为 end 以 -1 开头（因为它是零 len 字符串），所以很明显，开始在增加，结束在减少，所以你的终止条件从未满足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:16:04.360

`while((scanf("s", string)) != EOF)`应该`while((scanf("%s", &string)) != EOF)`不要忘记 % 和 &。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:12:38.380

`scanf`读取字符串的格式是`%s`，看来您缺少百分号。

# c - malloc 和分段错误

> ID：12941570
> 
> 赞同：-2
> 
> 时间：2012-10-17T19:09:14.310
> 
> 标签：c, segmentation-fault

我的代码中有“分段错误”。我很好奇我是否在函数中使用“malloc()”分配了一些空间。功能完成后，空格还有效吗？进一步的问题，当创建这样的子线程时，我想它即使在其父级退出后也存在。我在 Linux 中使用 GCC。

```
void foo(){
    void *child_stack;
    child_stack=(void*)malloc(16384);
    child_stack += 16384;
    clone((void*)do_function,child_stack,0,NULL);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:19:34.203

Stack 和 Heap 之间的主要区别在于，当您从函数调用返回时，堆栈中的内容已经消失，但堆中的内容仍然存在。

例如，在以下函数中：

```
void test_func() 
{
   char a[20];  //using stack
   char *b = malloc(20); //using heap

   strcpy(a, "test string");
   strcpy(b, "test string");

} 
```

函数完成后，b 仍然指向字符串，但 a 完全消失了。

对于第二个问题，子线程不会依赖于父线程，除非您使用`thread_join`. 但是，一旦主进程完成，所有线程都会停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:28:32.597

要找到分段错误的原因，您可以尝试使用调试标志 () 编译代码并在[Valgrind 的 memcheck 工具中](http://valgrind.org/docs/manual/mc-manual.html)`-g`运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:12:49.147

1.  使用 malloc 创建的内存在**堆上**，直到它被 free 显式销毁之前都是可用的。**这是使用 malloc 而不是在堆栈**上创建变量的主要原因，这些变量在超出范围时被销毁（例如，函数返回）并且堆栈帧被销毁。段错误可能是因为您分配了 16384 字节，然后使用 += 将指针向前移动 16384（为什么要这样做？），然后再将其传递给可能试图访问它的函数。

2.  我不是 100% 确定，但是从 wait() 手册页，

    ```
    If a parent process terminates, then its "zombie" children (if any) are adopted by init(8), which automatically performs a wait to remove the zombies. 
    ```

# c# - ASP.NET Gridview 分页和排序事件无法正常工作

> ID：12941574
> 
> 赞同：1
> 
> 时间：2012-10-17T19:09:27.950
> 
> 标签：c#, asp.net, sorting, gridview, paging

我有一个网格视图，我将一些票数据加载到其中。根据用户操作，此 gridview 将加载不同的 sqldatasource 并重新显示数据。

这是gridview的标记：

```
<X:GridViewX ID="gvxTaskList" runat="server"
    AllowPaging="True" AllowSorting="True" AutoGenerateColumns="False"
    Width="100%" Height="100%" CssClass="tablestyle"
    OnRowCreated="gvxTaskList_RowCreated"
    OnPageIndexChanging="gvxTaskList_PageIndexChanging"
    OnSorting="gvxTaskList_Sorting"> 
```

所以，我有两个问题。

首先，排序事件对我来说根本不起作用。我在数据表中得到一个空值。编码：

```
protected void gvxTaskList_Sorting(object sender, GridViewSortEventArgs e)
{
    try
        {
            System.Data.DataTable dataTable = gvxTaskList.DataSource as  
                                                  System.Data.DataTable;

            if (dataTable != null)
            {
                System.Data.DataView dataView = new System.Data.DataView(dataTable);
                dataView.Sort = e.SortExpression + " " +   
                                    ConvertSortDirectionToSql(e.SortDirection);

                gvxTaskList.DataSource = dataView;
                gvxTaskList.DataBind();
            }
        }
        catch (Exception ex)
        {
        }
    }

    private string ConvertSortDirectionToSql(SortDirection sortDirection)
    {
        string newSortDirection = String.Empty;
        try
        {
            switch (sortDirection)
            {
                case SortDirection.Ascending:
                    newSortDirection = "ASC";
                    break;

                case SortDirection.Descending:
                    newSortDirection = "DESC";
                    break;
            }                
        }
        catch (Exception ex)
        {
        }
        return newSortDirection;
    } 
```

if (dataTable != null) 失败，因为它是空的。

第二个问题是分页。当它第一次加载 gridview 时，分页很好。我有两页的数据onload。我可以整天来回翻页，没有错误。问题是当我更改数据源并带回三页数据时。我尝试立即从第一页单击第 3 页，它会重新加载以前的数据（有两页）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:39:26.117

我开始直接回答，但我宁愿这是一个思考的练习。运行你的代码一秒钟，看看你在做什么。

1.  从网格中提取数据
2.  对数据进行排序
3.  将数据绑定回网格

不是一个好的模式，对吧？为什么？因为如果你得到的不是 NULL，那么你已经绑定了表单，这将导致数据绑定崩溃。而且，如果你得到 NULL，你就不能排序，这就是你正在经历的。

更好的模式是将数据概念与显示它的容器分开（有效地将域模型（在本例中为数据表）与 UI 元素分开）。这意味着您每次都绑定一种方式。

如何？获取数据。如果您只是调整（例如，相同的数据，不同的排序），您可以在帖子之间在服务器上存储一份副本（在会话中是一个示例，但还有其他方法）。然后，您可以对数据进行排序并绑定。如果是分页，则请求下一组并绑定。

这个想法是你不依赖一些看似状态的哈利波特魔法，因为网络是无状态的。相反，您每次都假设无状态并控制流程。

现在，阿洛夫有了一个有趣的想法来激发更多的思考。我发现它与问题并不完全相关，但我确实发现理解网页中的流程非常有用。如果您每次都在 Page_Load 中加载，则您有数据，但实际上，将 Page_Load 用于非回发事件以外的任何事情都是一种糟糕的模式......除非做了某事 a) 每次页面加载时 [更有可能] 或b）每次回发时[非常不可能，因为您将拥有事件处理程序]。

这意味着 Get Page.PostBack == false 是当您从 Page_Load 加载并使用事件处理其他所有内容时。

您的 Sort 事件有此功能，但您希望从 GridView 中提取数据，这意味着您希望它已经被绑定。但是，如果它已经绑定，则必须将其清除才能绑定，这在某些情况下甚至是不可能的。在这种情况下，你很幸运，因为你得到了一个空值，这意味着你没有在绑定之上进行绑定（哎呀！！！）。sort 方法 args 对于确定用户期望很有用，但您应该自己控制数据并绑定它。这可以是每次访问数据库，或者您可以将其“缓存”并从缓存中绑定。如果你做很多事情，比如排序，“缓存”效果最好。会话是您可以在页面点击之间“缓存”的一个地方。

希望这是有道理的。

# php - 在多个服务器之间共享 gettext .mo 文件

> ID：12941583
> 
> 赞同：0
> 
> 时间：2012-10-17T19:09:53.217
> 
> 标签：php, gettext

我昨天才开始使用gettext for php。

我使用 poedit 在本地创建了一个 .po 文件。（ubunt 12.04 64 位）。我将此文件和编译后的 .mo 文件置于版本控制之下，因为我计划部署到该站点的生产版本，该站点在机架空间云站点上运行。

我的问题是：

**.mo 文件平台是否依赖？它可以在任何服务器上运行吗？如果不是，通常如何处理？问题是没有对 cloudsites 的 shell 访问，所以如果我需要重新编译它或其他东西会很痛苦。**

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:18:16.393

是的，您可以在服务器之间重新分发 mo 文件。mo 文件实际上是由 apache 网络服务器读取的，而不是由 PHP 读取的。

但是请注意，如果您的 mo 使用未安装在底层操作系统上的语言环境，则您的 mo 文件将无法工作。

# java - 将 gif 图像添加到 java 小程序？

> ID：12941586
> 
> 赞同：2
> 
> 时间：2012-10-17T19:09:58.277
> 
> 标签：java, applet, animated-gif

我正在尝试将 .gif 图像添加到我的 java 小程序中，但由于某种原因它只是变成空白。我`getImage(getCodeBase(), "BLACK_Sel.gif ")`用来获取我的 .gif 图像，它适用于 .jpg 图像但不是 .gif 图像。然后绘制我使用的 .jpg/.gif

`g.drawImage(SelectedBlack,testx, testy, Checkers.SIZE_Y / 8, Checkers.SIZE_Y / 8, null);`

这同样适用于 .jpgs。对于动画 .gif 图像，我有什么不同的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:13:03.533

Abstract Window Toolkit 有一个支持 GIF 的 getImage() 方法。

```
Image img1 = Toolkit.getDefaultToolkit().getImage("yourFile.gif"); 
```

# javascript - telerik radmenu 在操作后取消回发

> ID：12941587
> 
> 赞同：0
> 
> 时间：2012-10-17T19:09:59.060
> 
> 标签：javascript, telerik, client-side, radmenu

我有一个 radmenu（Telerik 控件），单击它时应该做两件事：1\. 打开菜单，2\. 取消回发。

这是菜单：

```
<telerik:RadMenu ID="radMnu1" runat="server" ClickToOpen="true" OnClientItemClicked="MenuItemClicked" OnClientItemClicking="MenuItemClickingCancelPostback">
   <Items>...
   </Items>
</telerik:RadMenuItem> 
```

以下是 JS 方法：

```
function MenuItemClicked(sender, args) {
        var itemValue = args.get_item().get_value();

        var menu = $find("ctl00_radMnu1");
        var menuItem = menu.findItemByText(itemText);
        if (menuItem) menuItem.open();
        }
    }

    function MenuItemClickingCancelPostback(sender, args) {
        args.set_cancel(true); // Cancel the postback 
    } 
```

问题是，如果我启用 OnItemClicking 事件，它会执行它，取消回发然后永远不会进入 OnItemClicked（因为回发已被取消）。如果我禁用 OnItemClicking，它会触发 OnItemClicked 并正确打开菜单，但也会进行回发。

如何同时取消打开菜单和回发？不知何故，我需要执行这两个事件。我会取消 OnItemClicked 事件的回发，但 set_cancel() 在其参数中不可用。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T05:49:36.937

请使用 onitemclicking 编写代码，它肯定会工作，就像这样

```
function MenuItemClickingCancelPostback(sender, args) {       
    // first open the menu then cancel the postback.
    var menu = $find("ctl00_radMnu1");
    var menuItem = menu.findItemByText(itemText);
    if (menuItem) menuItem.open();
    args.set_cancel(true); // Cancel the postback 
} 
```

# sql-server - Netbeans休眠MS SQL Server 2005异常

> ID：12941591
> 
> 赞同：1
> 
> 时间：2012-10-17T19:10:04.157
> 
> 标签：sql-server, hibernate, exception, netbeans

我正在尝试使用 NetBeans 7.2 配置 Hibernate 以连接到 MS SQL 2005 服务器（本地主机）。每当我尝试在 HQL Query0 窗口中输入要测试的查询时，我会得到一个异常对话框，它只显示我的驱动程序类名称，即“com.microsoft.sqlserver.jdbc.SQLServerDriver”，其下方带有大红色“X”图标和“确定”按钮我完成了查询行的输入。就像hibernate根本看不到驱动程序一样。

我按照 Netbeans 网站的指示配置了所有内容，并查阅了一些似乎与我的案例相关的在线搜索结果。我检查并重新检查了每一行。当我使用“新连接”向导在服务选项卡上建立连接时，连接成功。我的 Windows 7 操作系统是 64 位家庭高级版与此有关吗？我很沮丧。请帮忙！

顺便说一句，我的同事使用相同的代码（他可能是 32 位 Win 7）对相同的测试没有问题。

# list - 返回两个列表中出现的元素列表 - SML

> ID：12941597
> 
> 赞同：1
> 
> 时间：2012-10-17T19:10:23.703
> 
> 标签：list, sml

）我刚从 SML 开始，一直在尝试编写一个函数，该函数采用两个列表 L1 和 L2，并返回两个列表中出现的元素列表。这是我到目前为止所拥有的：

```
fun exists x nil = false | exists x (h::t) = (x = h) orelse (exists x t);

    fun listAnd L1 nil = nil
     | listAnd nil L2 = nil
     | listAnd L1 L2 = if exists(hd(L1) L2) = true then hd(L1)::(listAnd(tl(L1) L2)) else listAnd(tl(L1) L2); 
```

我不确定错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:24:50.490

由于`exists`是一个带有两个参数的函数，因此您的错误是在两个参数周围加上了额外的括号。例如，`exists(hd(L1) L2)`应更正为`exists (hd L1) L2`。

我有几个建议：

*   去除多余的`= true`
*   用于`[]`空列表和通配符`_`用于未使用的值
*   使用模式匹配`L1`代替`hd`and`tl`

现在这是更正后的函数：

```
fun listAnd _ [] = []
  | listAnd [] _ = []
  | listAnd (x::xs) ys = if exists x ys 
                         then x::(listAnd xs ys) 
                         else listAnd xs ys 
```

# iphone - iOS - 将两个类合二为一

> ID：12941598
> 
> 赞同：0
> 
> 时间：2012-10-17T19:10:24.407
> 
> 标签：iphone, ios, ipad

我已经用我想要的几个函数扩展了 UIVIewController 类。

我想将相同的功能添加到 UITableViewController 类，我的意思是，也扩展该类。

为了做到这一点，我必须将扩展 viewController 类上的所有方法复制到一对新的文件中，这些文件将用于扩展 tableViewController 类。对不起我的无知，但是有一种方法可以在没有冗余的情况下扩展这两个类？我的意思是，只有一个通用扩展类（？）可以被 viewController 和 tableViewController 扩展文件继承？对不起，如果这很混乱。我的意思是，而不是这个：

```
UIViewController+extensions.h
UIViewController+extensions.m 
```

两者都包含许多 UIViewController 类的扩展方法和

```
UITableViewController+extensions.h
UITableViewController+extensions.m 
```

两者都包含很多 UITableViewController 类的扩展方法。

我要这个：

```
GenericExtension.h
GenericExtension.m 
```

这个，包含扩展方法

然后，

UIViewController+extension 和 UITableViewController+extension，都继承了 GenericExtension，所以我只有一份扩展方法。

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:33:34.503

如果您不使用继承而是使用类别`UIViewController`（正如您的文件命名所暗示的那样），那么这些方法也将可用`UITableViewController`。确保在子类中导入头文件`UITableViewController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:34:14.160

选项1：

将所有方法写入（**GenericExtension.h/.m**）使其成为 UIViewController 类型

后来在里面`UIViewController`

```
@interface RootViewController : Generic Extensions 
```

你可以对`UITableViewController`since `UITableViewController`is derived from做同样的事情`UIViewController`。

# image - 减少颜色数量并获得单个像素的颜色

> ID：12941600
> 
> 赞同：2
> 
> 时间：2012-10-17T19:10:38.740
> 
> 标签：image, colors, javafx-2

使用 JavaFX 2.2 我需要执行以下操作：

1.  将给定图像的颜色（例如使用 JavaFX`image`类加载）减少到 8 或 16 种颜色，或者可能是 256 种颜色
2.  访问图像对象中单个像素的颜色 - 好的，似乎 `Image.getPixelReader()`应该完成这项工作，所以应该只保留第一个问题

谁能给我一些提示或代码示例？谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:57:03.423

1.  用于`image.getPixelReader()`获取[PixelReader](http://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html#getPixelReader%28%29)以访问图像中的单个像素。
2.  创建一个[WritableImage](http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html#WritableImage%28int,%20int%29)。
3.  获取 WritableImage 的[PixelWriter](http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html#getPixelWriter%28%29)。
4.  遍历从像素读取器读取的像素，通过缩小算法对其调色板运行每个像素，并将缩小的像素写入像素写入器。

完成此操作后，您可以在[ImageView](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html)中显示降采样的 WritableImage或将其转换为[awt 图像](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/SwingFXUtils.html#fromFXImage%28javafx.scene.image.Image,%20java.awt.image.BufferedImage%29)并将[其保存](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File%29)为 png、jpg 等。

这是一些示例代码：

```
import javafx.application.Application;
import javafx.event.*;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.*;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

// displays a button with a 64 color image palette and a full color palette when pressed.
public class ButtonShadeTest extends Application {
  @Override public void start(final Stage stage) throws Exception {
    final Label response = new Label("");
    final Image originalImage = new Image("http://icons.iconarchive.com/icons/eponas-deeway/colobrush/128/heart-2-icon.png");
    final Image resampledImage = resample(originalImage);
    final ImageView imageView = new ImageView(resampledImage);
    final Button button = new Button("I love you", imageView);
    button.setStyle("-fx-base: coral;");
    button.setContentDisplay(ContentDisplay.TOP);
    button.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        if ("".equals(response.getText())) {
          response.setText("I love you too!");
          imageView.setImage(originalImage);
        } else {
          response.setText("");
          imageView.setImage(resampledImage);
        } 
      }
    });

    final VBox layout = new VBox(10);
    layout.setAlignment(Pos.CENTER);
    layout.getChildren().addAll(button, response);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10; -fx-font-size: 20;");
    stage.setTitle("Heart");
    stage.getIcons().add(originalImage);
    stage.setScene(new Scene(layout));
    stage.show();
  }
  public static void main(String[] args) { launch(args); }

  // downsamples an image to a 64 color palette by only 
  // using the 2 most significant bits of color to represent
  // each of the image's pixels.
  private Image resample(Image inputImage) {
    int W = (int) inputImage.getWidth();
    int H = (int) inputImage.getHeight();
    WritableImage outputImage = new WritableImage(W, H);
    PixelReader reader = inputImage.getPixelReader();
    PixelWriter writer = outputImage.getPixelWriter();
    for (int y = 0; y < H; y++) {
      for (int x = 0; x < W; x++) {
        int argb = reader.getArgb(x, y);
        int a = (argb >> 24) & 0xFF;
        int r = (argb >> 16) & 0xFF;
        int g = (argb >>  8) & 0xFF;
        int b =  argb        & 0xFF;

        r = r & 0xC0;
        g = g & 0xC0;
        b = b & 0xC0;

        argb = (a << 24) | (r << 16) | (g << 8) | b;
        writer.setArgb(x, y, argb);
      }
    }

    return outputImage;
  }
}
// icon license: (creative commons with attribution) http://creativecommons.org/licenses/by-nc-nd/3.0/
// icon artist attribution page: (eponas-deeway) http://eponas-deeway.deviantart.com/gallery/#/d1s7uih 
```

当心碎时，它会以减少的调色板显示，当心完整时，它会以完整的调色板显示。

![伤心](../Images/ccbbaa15eafdc58d73b8fcaced3ab69e.png) ![心心念念](../Images/ae8b9a66c4f0b1307863a0aa91654a4e.png)

# c++ - SDL 鼠标按键不一致

> ID：12941605
> 
> 赞同：2
> 
> 时间：2012-10-17T19:11:06.280
> 
> 标签：c++, button, mouse, mouseevent, sdl

我在使用 SDL 轮询鼠标事件时遇到了一个奇怪的小问题。

```
 if(event.type == SDL_MOUSEBUTTONDOWN) {
            printf("click %d\n", event.button.button);
        }
        else if(event.type == SDL_MOUSEMOTION) {
            printf("move %d\n", event.button.button);

        } 
```

如果我在移动鼠标时单击并按住鼠标右键，我会得到：

```
click 3 // = SDL_BUTTON_RIGHT
move 4  // != SDL_BUTTON_RIGHT !
move 4
... 
```

即 SDL_MOUSEBUTTONDOWN 将 button.button 设置为 3 用于鼠标右键，而 SDL_MOUSEMOTION 将其设置为 4。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:16:47.253

你应该使用[`event.motion`](http://www.libsdl.org/docs/html/sdlmousemotionevent.html)for `SDL_MOUSEMOTION`，而不是`event.button`。此外，`event.motion.state`是一个位掩码，您应该使用`event.motion.state & SDL_BUTTON(3)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:16:53.297

event.button.button 用于单击事件而不是运动，我不明白这段代码的目的？

# post - Javascript - 内置类似 POST URL 上的参数

> ID：12941607
> 
> 赞同：1
> 
> 时间：2012-10-17T19:11:11.563
> 
> 标签：post, parameters, facebook-javascript-sdk, facebook-like

我正在制作一个单页网站，我需要在上面放置不同的内置喜欢，但每个喜欢都会从主页获得 og 标签。

我怎样才能将这个参数传递给我的 POST？就像是：

```
FB.api(
    'https://graph.facebook.com/me/og.likes',
    'post',
    {
        'object': 'http://www.example.com',
        'access_token': token,
        **'Title' : 'The Title'**,
        **'Description' : 'The Description'**
    },
    function(response) {
        if (!response || response.error) {
            console.log(response.error);
        } else {
        }
    };
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:24:11.573

您发布“喜欢”操作的 URL 需要具有该 URL 的正确元标记。

无论您从哪里发布点赞操作，或者用户在喜欢该 URL 时实际在哪个 URL 上，但您喜欢的 URL 必须将该 URL 上的有效元标记提供给 Facebook 的爬虫。

[您可以通过Facebook 的调试工具](https://developers.facebook.com/tools/debug)查看爬虫检测到的 URL

# jquery - html文本覆盖自身

> ID：12941611
> 
> 赞同：4
> 
> 时间：2012-10-17T19:11:32.067
> 
> 标签：jquery, css, ajax

在通过 ajax (jQuery) 将一些纯文本作为 html 粘贴到 div 后，文本会覆盖自身。

![例子](../Images/2d8d21ad90bbcaea1bb165f2785e4254.png)

我不知道发布我的所有代码是否有帮助，但也许有人以前遇到过同样的问题，可以给我一个提示。

我正在使用 Symfony2 和 jQuery（ajax 请求行动）。

这是ajax请求和回调：

```
$('.tile').click(function(e){
    e.preventDefault();

    var thisTileImg = e.target
    var x = thisTileImg.x;
    var y = thisTileImg.y;
    var tileID = thisTileImg.id;

    // execute ajax-request to turnAction and give parameters for x and y of the tile
    var request = $.ajax({
      url: pathTurnAction,
      type: "POST",
      data: {'x':x, 'y':y, 'tileID':tileID},
      dataType: "html"
    });

    request.done(function(msg) {
        var obj = jQuery.parseJSON(msg);
        switch(obj.result){
            case -1:
      showPopup(obj.text, obj.button);
                break;
            case 0:
                thisTileImg.src = pathTileImg0;
                break;
            case 1:
                thisTileImg.src = pathTileImg1;
                break;
        }
        $('#attempts_left').html(obj.attempts);
    });

    request.fail(function(jqXHR, textStatus) {
        // TODO: do something with the error
        // ...
        alert( "Request failed: " + textStatus );
    });

});

function showPopup(text, button){
    $('#overlay_popup_text').html(text);
    $('#overlay_popup_button').html(button);
    $('#overlay_bg').show();
    $('#overlay_popup').show().center();
} 
```

和 html/css

```
<div id="overlay_bg"></div>
<div id="overlay_popup">
  <div id="overlay_popup_text"></div>
  <div id="overlay_popup_button"></div>
</div>

#overlay_bg {
width: 100%;
height: 1900px;
overflow: hidden;
position: absolute;
left: 0;
top: 0;
display: none;
background: rgba(0, 0, 0, 0.75);
-moz-transition: opacity 1.5s;
-o-transition: opacity 1.5s;
-webkit-transition: opacity 1.5s;
z-index: 10000;
}

#overlay_popup {
width: 200px;
height: 200px;
overflow: hidden;
position: absolute;
left: 0;
top: 0;
display: none;
padding: 15px;
background-color: #fff;
-webkit-border-radius: 8px;
-moz-border-radius: 8px;
border-radius: 8px;
z-index: 10001;
}

#overlay_popup_text {
  height: 80px;
}
#overlay_popup_buttons {
  height: 80px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T05:33:29.160

解决方案是与 CSS 相关的。Line-height 为 0。文本只是不断写在自身之上。

# c - 为什么优化会破坏这个 C 代码？

> ID：12941618
> 
> 赞同：5
> 
> 时间：2012-10-17T19:12:03.437
> 
> 标签：c, optimization, gcc, volatile

有谁知道为什么 -O2 会破坏此代码？我怀疑这是 gcc 中的一个错误，因为它适用于不同的平台和不同版本的 gcc。但是，代码也可能包含一些我不知道的特殊性。谁能启发我？

这是代码，它是可变数量的嵌套循环的实现，产生所有可能的组合。预期的输出是

```
100 1
010 2
001 4
110 3
101 5 
```

和损坏的版本报告

```
100 1
010 2
001 4
100 1
010 2 
```

代码是：

```
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
int main()
{
    int nmax = 5; // finish after 5 combinations
    int n = 3;    // three elements
    int *out = (int*) calloc(nmax, sizeof(int)); 
    int *cnt = (int*) calloc(n, sizeof(int)); // declaring volatile solves the problem. But why ?
    int il, nl, i = 0;
    for (nl=1; nl<=n; nl++)
    {
        for (il=0; il<nl; il++) cnt[il] = 0;
        cnt[nl-1] = -1;
        while ( cnt[0]<n-nl )
        {
            for (il=nl-1; il>=0; il--)
            {
                if ( ++cnt[il] < n-nl+il+1 ) break;
                cnt[il] = 0;
            }
            for (il=1; il<nl; il++)
            {
                if ( cnt[il] <= cnt[il-1] ) cnt[il] = cnt[il-1]+1;
            }
            for (il=0; il<nl; il++) out[i] |= 1<<cnt[il];
            if ( ++i >= nmax ) break;
        }
        if ( i >= nmax ) break;
    }
    for (i=0; i<nmax; i++)
    {
       for (il=0; il<n; il++) printf("%d", out[i]&(1<<il) ? 1 : 0);
       printf("\t%d\n", out[i]);
    }
    free(cnt);
    free(out);
    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:00:46.240

您应该发布您正在使用的 gcc 版本、目标以及您正在使用的确切命令行的详细信息。此外，发布由 GCC 生成的程序集（例如，通过使用`-S`选项）会有所帮助。

我猜编译器错误地从循环控制表达式中提升`cnt[0]`出来。`while`以下修改（将模拟提升机）会产生错误的输出：

```
// ...

for (nl=1; nl<=n; nl++)
{
    int tmp;                            // <== new line
    for (il=0; il<nl; il++) cnt[il] = 0;
    cnt[nl-1] = -1;
    tmp = cnt[0];                       // <== new line
    while ( /*cnt[0] */ tmp <n-nl )     // modified
    {
        for (il=nl-1; il>=0; il--)

// ... 
```

当然，这只是一个猜测——获取请求的详细信息会更有趣，以便可以检查生成的代码。

# c# - 为两个具有 linq 方法的相似方法创建抽象

> ID：12941620
> 
> 赞同：0
> 
> 时间：2012-10-17T19:12:11.423
> 
> 标签：c#, linq, dry

我有两种非常接近的方法，并且想要创建一种可以调用以保持代码干燥的方法

```
public IEnumerable<HighScoreViewModel> GetNightlyHighScores()
{
    lock (_Key)
    {
        //return GetHighScores(x => x.NightlyHighScore);

        return _allPlayers
            .OrderByDescending(x => x.NightlyHighScore)
            .Take(8)
            .Select(x=> new HighScoreViewModel
            {
                Points = x.NightlyHighScore,
                PointsText = "FG: " + x.NightlyHighScore,
                ImageUrl = x.Facebook.SmallImageUrl,
                DisplayName = x.DisplayName,
            }).ToList();
    }
}

public IEnumerable<HighScoreViewModel> GetBestHighScores()
{
    lock (_Key)
    {
        //return GetHighScores(x => x.BestHighScore);

        return _allPlayers
            .OrderByDescending(x => x.BestHighScore)
            .Take(8)
            .Select(x => new HighScoreViewModel
            {
                Points = x.BestHighScore,
                PointsText = "FG: " + x.BestHighScore,
                ImageUrl = x.Facebook.SmallImageUrl,
                DisplayName = x.DisplayName,
            }).ToList();
    }
} 
```

我接近某事，但无法弄清楚标记为“魔法”的位

```
public IEnumerable<HighScoreViewModel> GetHighScores<TKey>(Func<Player, TKey> highscore)
{
    return _allPlayers
        .OrderByDescending(highscore)
        .Take(8)
        .Select(x => new HighScoreViewModel
        {
            // Magic?
            //Points = x.BestHighScore,
            PointsText = "FG: " + x.BestHighScore,
            //ImageUrl = x.Facebook.SmallImageUrl,
            DisplayName = x.DisplayName,
        }).ToList();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:16:53.403

由于`BestHighScore`和`NightlyHighScore`具有相同的类型，您应该能够：

```
public IEnumerable<HighScoreViewModel> GetHighScores(Func<Player, double> highscore)
{
    return _allPlayers
        .OrderByDescending(highscore)
        .Take(8)
        .Select(x => new HighScoreViewModel
        {
            // Magic?
            Points = highScore(x),
            PointsText = "FG: " + x.BestHighScore,
            //ImageUrl = x.Facebook.SmallImageUrl,
            DisplayName = x.DisplayName,
        }).ToList();
} 
```

`highscore`应该返回真正的类型`Points`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:17:29.143

没那么神奇，只需使用函数从播放器获取值：

```
public IEnumerable<HighScoreViewModel> GetHighScores<TKey>(Func<Player, TKey> highscore)
{
  return _allPlayers
    .OrderByDescending(highscore)
    .Take(8)
    .Select(x => new HighScoreViewModel
    {
        Points = highscore(x),
        PointsText = "FG: " + highscore(x),
        ImageUrl = x.Facebook.SmallImageUrl,
        DisplayName = x.DisplayName,
    }).ToList();
} 
```

致电：

```
GetHighScores(x => x.NightlyHighScore) 
```

和

```
GetHighScores(x => x.BestHighScore) 
```

# android - ViewPager Inside Fragment 是 FragmentActivity 选项卡的一部分

> ID：12941623
> 
> 赞同：0
> 
> 时间：2012-10-17T19:12:20.940
> 
> 标签：android, android-fragments, viewgroup, android-tabs, fragmentation

我正在尝试构建一些我不确定是否可行的东西。我有 Fragment 选项卡（使用 FragmentActivity、TabHost 和 TabWidget 作为我的 Fragment 选项卡容器），并且在每个我想要的 Fragment 中，作为顶栏，还有另一个 Fragment。您可以将其视为 - 由项目类型构成的底部栏，以及将是过滤器的顶部栏。我想以常规手势在过滤器之间捕捉。

我的应用程序的行为如下：我可以看到第一个片段所在的主要活动，我可以看到顶部/底部栏，但我看不到第一个顶部栏类别的视图（片段）。当我试图捕捉到另一个类别时，什么也没有发生。

这是片段的代码：

```
Public class Tab1Fragment extends Fragment {

private ViewPager _mViewPager;
private ViewPagerAdapter _adapter;
private View child;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        return null;
    }

    child = inflater.inflate(R.layout.tab_frag1_layout, container);

    _mViewPager = (ViewPager) child.findViewById(R.id.viewPager);
    _adapter = new ViewPagerAdapter(GlobalContext.getAppContext(),getFragmentManager());
    _mViewPager.setCurrentItem(0);

    new setAdapterTask().execute();

    return (LinearLayout) inflater.inflate(R.layout.tab_frag1_layout,
            container, false);
}

private class setAdapterTask extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... params) {
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        _mViewPager.setAdapter(_adapter);
        _mViewPager.setCurrentItem(0);
    }
}

public void onActivityCreated(Bundle bdl) {
    super.onActivityCreated(bdl);

    _mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageScrollStateChanged(int position) {
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
        }

        @Override
        public void onPageSelected(int position) {
            // TODO Auto-generated method stub
            switch (position) {
            case 0:
                child.findViewById(R.id.first_tab).setVisibility(
                        View.VISIBLE);
                child.findViewById(R.id.second_tab)
                        .setVisibility(View.GONE);
                break;

            case 1:
                child.findViewById(R.id.first_tab).setVisibility(View.GONE);
                child.findViewById(R.id.second_tab).setVisibility(
                        View.VISIBLE);
                break;
            }
        }

    });

}

} 
```

这是外部片段的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
android:orientation="vertical" >  

<TableLayout
    style="@style/layout_f_w"
    android:stretchColumns="*" >
    <TableRow
        android:id="@+id/tableRow1"
        android:background="#dddddd"
        style="@style/layout_wrap">

          <!-- First Tab -->
            <LinearLayout
            style="@style/layout_f_w"
            android:id="@+id/first_text"
            android:orientation="vertical" >

                  <TextView
                    android:id="@+id/textView1"
                    style="@style/text_title"
                    android:text="Tab1" />
           </LinearLayout>

        <!-- Second Tab -->
            <LinearLayout
            style="@style/layout_f_w"
            android:id="@+id/second_text"
            android:orientation="vertical" >

                <TextView
                    android:id="@+id/textView1"
                    style="@style/text_title"
                    android:text="Tab2" />

           </LinearLayout>

    </TableRow>
 </TableLayout>
 <!-- Include Tab Indicator  -->
 <include layout="@layout/indicator" android:layout_width="fill_parent"
  android:layout_height="wrap_content"  />

<android.support.v4.view.ViewPager
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:id="@+id/viewPager" />
</LinearLayout> 
```

这是我的第一个类别片段（第一个片段内的片段类别）的示例：

```
public class LayoutOne extends Fragment {

public static Fragment newInstance(Context context) {
    LayoutOne f = new LayoutOne();  

    return f;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    ViewGroup root = (ViewGroup) inflater.inflate(R.layout.layout_one, null);       
    return root;
}

} 
```

请帮我 ：（

这是我的片段适配器：

```
public class ViewPagerAdapter extends FragmentStatePagerAdapter {
private Context _context;

public ViewPagerAdapter(Context context, FragmentManager fm) {
    super(fm);  
    _context=context;

    }
@Override
public Fragment getItem(int position) {
    Fragment f = new Fragment();
    switch(position){
    case 0:
        f=LayoutOne.newInstance(_context);  
        break;
    case 1:
        f=LayoutTwo.newInstance(_context);  
        break;
    }
    return f;
}
@Override
public int getCount() {
    return 2;
}
@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    // TODO Auto-generated method stub
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:52:08.153

最后我们在 4.2 和兼容性中嵌套了片段[http://developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:27:31.983

> 在我想要的每个片段中，作为顶栏，另一个片段

[不支持](https://stackoverflow.com/questions/6847460/fragments-within-fragments/6847770#6847770)在片段中包含片段，抱歉。

**更新：**从 Android 4.2（和 Android 支持库 rev 11）开始支持嵌套片段：http: [//developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

# haskell - 来自 Haskell 的 State Monad 的 ID

> ID：12941625
> 
> 赞同：0
> 
> 时间：2012-10-17T19:12:22.440
> 
> 标签：haskell, monads, uniqueidentifier, state-monad

> **可能重复：**
> [在 Haskell 中创建唯一标签](https://stackoverflow.com/questions/6311512/creating-unique-labels-in-haskell)

我有一个数据类型 Person 和一些用于创建 Persons 的输入数据。

我想让每个人都有自己的 ID（比如说整数 [0..]）。我可以通过递归来做到这一点，但由于我在 Haskell 中这样做，我想了解单子。我想，State Monad 可能是这项工作的最佳选择？

问题是，我真的不明白很多事情：我什么时候在 monad 里面（什么函数可以使用里面），我如何将它们组合在一起，我如何让“tick”函数前进，等等。 .

所以我目前对此感到困惑：tick 功能可能有效，但我不确定如何使用它；以及如何依次获取其用于构建 Persons 的值。

```
import Control.Monad.State

data Person = Person {
  id   :: Int,
  name :: String
} deriving Show

type MyState = Int
startState = 0

tick :: State MyState Int
tick = do
  n <- get
  put (n+1)
  return n

names = ["Adam","Barney","Charlie"]

-- ??? -> persons = [Person 0 "Adam", Person 1 "Barney", Person 2 "Charlie"]

main = do
  print $ evalState tick startState
  -- ??? 
```

编辑：使用 Data.Unique 或 Data.Unique.Id 会更容易吗？在我的情况下如何使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T19:55:09.610

好吧，我认为最好的解释方法就是编写一些代码。

首先，你也想隐藏你当前工作的 monad 的内部工作。我们将使用类型别名来做到这一点，但还有更强大的方法，请参阅[Real World Haskell](http://book.realworldhaskell.org/read/monad-transformers.html)中的这一章。

```
type PersonManagement = State Int 
```

这样做的原因是您稍后会向 PersonManagement 添加更多内容，以及使用黑盒抽象的良好实践。

连同 PersonManagement 的定义，您应该公开定义此 monad 的原始操作。在您的情况下，我们现在只有 tick 函数，它看起来几乎相同，但具有更清晰的签名和更具暗示性的名称。

```
generatePersonId :: PersonManagement Int
generatePersonId = do
    n <- get
    put (n+1)
    return n 
```

现在，以上所有内容都应该位于一个单独的模块中。在此之上，我们可以定义更复杂的操作，比如创建一个新的 Person：

```
createPerson :: String -> PersonManagement Person
createPerson name = do
    id <- generatePersonId
    return $ Person id name 
```

现在你可能已经意识到，PersonManagement 是一种计算类型，或者是一个封装了处理 Person 的逻辑的过程，并且`PersonManagement Person`是我们从中获取 person 对象的计算。这非常好，但是我们如何真正获取我们刚刚创建的人并对他们做一些事情，比如在控制台上打印他们的数据。好吧，我们需要一个“运行”方法，它运行我们的过程并给我们结果。

```
runPersonManagement :: PersonManagement a -> a
runPersonManagement m = evalState m startState 
```

runPersonManagement 运行 monad 并在后台执行所有副作用时获得最终结果（在您的情况下，勾选 Int 状态）。这使用了state monad 中的[evalState](http://cvs.haskell.org/Hugs/pages/libraries/mtl/Control-Monad-State.html)，它也应该驻留在上述模块中，因为它知道 monad 的内部工作原理。我假设，您总是希望从一个由 startState 标识的固定值开始人员 ID。

例如，如果我们想创建两个人并将他们打印到控制台，程序将类似于：

```
work :: PersonManagement (Person, Person)
work = do
    john <- createPerson "John"
    steve <- createPerson "Steve"
    return (john, steve)

main = do
    let (john, steve) = runPersonManagement work
    putStrLn $ show john
    putStrLn $ show steve 
```

输出：

```
Person {id = 0, name = "John"}
Person {id = 1, name = "Steve"} 
```

由于 PersonManagement 是一个成熟的 monad，您还可以使用[Control.Monad](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html)中的通用函数，例如。假设您想从姓名列表中创建人员列表。好吧，这只是在 monads 领域中提升的 map 函数——它被称为[mapM](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#v%3amapM)。

```
createFromNames :: [String] -> PersonManagement [Person]
createFromNames names = mapM createPerson names 
```

用法：

```
runPersonManagement $ createFromNames ["Alice", "Bob", "Mike"] =>
    [
        Person {id = 0, name = "Alice"},
        Person {id = 1, name = "Bob"},
        Person {id = 2, name = "Mike"}
    ] 
```

例子可以继续。

要回答您的一个问题-仅当您需要该 monad 提供的服务时，您才在 PersonManagement monad 中工作-在这种情况下， generatePersonId 函数或您需要函数，而这些函数又需要 monad 的原语，例如`work`需要该`createPerson`函数的函数需要在 PersonManagement monad 内部运行，因为它需要自增计数器。例如，如果你有一个检查两个人是否有相同数据的函数，你就不需要在 PersonManagement monad 中工作，它应该是一个普通的纯函数 type `Person -> Person -> Bool`。

要真正了解如何使用 monad，您只需要阅读大量示例即可。[Real World Haskell](http://book.realworldhaskell.org/read/monads.html)是一个很好的开始，[Learn you a Haskell](http://learnyouahaskell.com)也是如此。

您还应该查看一些使用 monad 的库，以了解它们是如何制作的以及人们如何使用它们。解析器就是一个很好的例子，而[parsec](http://hackage.haskell.org/package/parsec)是一个很好的起点。

此外，P. Wadler 的这篇[论文](http://homepages.inf.ed.ac.uk/wadler/papers/marktoberdorf/baastad.pdf)提供了一些非常好的示例，当然，还有更多资源可供发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:36:07.520

最好用`mapAccumL`like

```
getPersons = snd . mapAccumL f 0
    where
        f n name = (n+1,Person n name) 
```

无论如何，我修改了您的程序以使其与 state monad

```
import Control.Monad.State

data Person = Person {
  id   :: Int,
  name :: String
} deriving Show

type MyState = Int
startState = 0

tick :: State MyState Int
tick = do
  n <- get
  put (n+1)
  return n

getPerson :: String -> State MyState Person
getPerson ps = do
  n <- tick
  return (Person n ps)

names = ["Adam","Barney","Charlie"]

getPersonsExample :: State MyState [Person]
getPersonsExample = do
    a <- getPerson "Adam"
    b <- getPerson "Barney"
    c <- getPerson "Charlie"
    return ([a,b,c])

main1 = do
  print $ evalState (sequence $ map getPerson names) startState

main2 = do
  print $ evalState getPersonsExample startState 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:44:06.857

语法中的Monad 在`do`许多方面都非常“像你所期望的那样”工作，将整个事物视为一种命令式语言。

那么，从程序上讲，我们想在这里做什么？遍历给定的名称，对吗？怎么样

```
forM names 
```

`forM`从`Control.Monad`. _ 如您所知，这非常像一个`for`循环。好的，首先我们需要将每个名称绑定到一个变量

```
forM names $ \thisName -> do 
```

*我们想做什么*？*我们需要一个 ID，`tick`将为我们生成它*

 *```
 newId <- tick 
```

并将其与人名结合起来。就是这样！

```
 return $ Person newId thisName 
```

整个事情看起来像这样：

```
(persons, lastId) = (`runState` startState) $ do
   forM names $ \thisName -> do
      newId <- tick
      return $ Person newId thisName 
```

可以[按预期工作](http://ideone.com/OLAZh)，或者如果 Ideone 安装了 mtl 包...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T22:04:09.760

这里真正的困难是定义和处理期望标识符唯一的范围。使用`State`monad 和一个`Succ`实例（如下面的示例）可以很容易地进行按摩，以保证在单个`State`monad 计算范围内的唯一性。稍加注意（在 a 之后捕获最终状态`runState`并确保将其用作 next 中的初始状态`runState`），您可以保证多次`State`计算的唯一性——但最好将两个计算组合成一个更大的计算。

`Data.Unique`并且`Data.Unique.Id`可能看起来更容易，但要记住两个问题：

1.  您的代码将绑定到`IO`monad。
2.  这些`Unique`模块没有明确说明生成的 ID 的唯一范围。您的程序是否关心相同的 ID 是否可能在程序的不同运行中分配给两个不同的人？您的程序是否依赖于能够“恢复”之前执行的 Person-to-ID 分配？

这些是我在这里选择替代方案之前要考虑的问题。

无论如何，这是我对您的代码的看法（完全未经测试，甚至可能无法编译，但您应该明白）：

```
import Control.Monad (mapM) -- Study the Control.Monad module carefully...

-- Your "tick" action can be made more generic by using `Enum` instead of numbers
postIncrement :: Enum s => State s s
postIncrement = do r <- get
                   put (succ r)
                   return r

 -- Action to make a labeled Person from a name.
 makePersonM :: String -> State Int Person
 makePersonM name = do label <- postIncrement
                       return $ Person label name

-- The glue you're missing is mapM
whatYouWant = evalState (mapM makePersonM names) 0 
```*

# jquery - 如何在骨干模型中使用 JQuery 获取具有相同类的输入值？

> ID：12941630
> 
> 赞同：-1
> 
> 时间：2012-10-17T19:12:33.033
> 
> 标签：jquery, html, class, backbone.js, selector

> **可能重复：**
> [如何使用 JQuery 获取具有相同类的输入值？](https://stackoverflow.com/questions/12941215/how-can-i-get-values-of-inputs-that-have-the-same-class-using-jquery-each)

使用主干的模型和集合结构，我有这个代码：

```
var totalHours = 0;
this.$(".timesheet-daily-input").each( function () {
    var inputValue = $(this).val();
    var hours = parseInt(inputValue);
    totalHours += (hours == null) ? 0 : hours;
}); 
```

“这个”。before 循环仅指示相关模型中的输入。（如果我不包括它，则循环将遍历我的所有输入，而不管模型如何，这是不需要的）。

# android - 排除 jar 中的文件进入 apk

> ID：12941631
> 
> 赞同：2
> 
> 时间：2012-10-17T19:12:36.900
> 
> 标签：android, eclipse, ant, adt

我最近在我的**android**项目中添加了一些新的 jar。一些 jar 包含 version.properties。其中一个甚至包含一个 README.TXT。

如何告诉 eclipse/adt/ant 排除文件进入 apk？

显然我可以解压缩apk，删除文件，压缩，签名和拉链......但我希望从源头解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:42:07.193

如果您从自己的项目中创建 jar 文件，请右键单击项目 -> 选择导出 -> 在 Java 下选择 JAR 文件 -> 然后您可以选择在创建 jar 时要包含哪些文件。因此，请取消选择您不想包含在 Jar 文件中的任何资源。

如果这不是您要查找的内容，您还可以尝试将这些文件添加到构建配置中的排除文件夹中。这是一个可能有帮助的[链接。](https://stackoverflow.com/questions/1489179/exclude-files-from-jar-or-war-in-eclipse)

# javascript - 带鼠标拖动的 Firefox

> ID：12941638
> 
> 赞同：0
> 
> 时间：2012-10-17T19:12:50.363
> 
> 标签：javascript, firefox, mouse, mouseevent

我正在尝试制作一个类似 iPad 的界面，除了 firefox 之外一切都很好（显然 IE 现在不能工作）。鼠标后备（非触摸屏）似乎无法处理多个鼠标拖动事件。屏幕开始冻结，它像图像一样“移动”所有 html。

您可能想知道的事情：

MacOSX 10.8 火狐 14.0.1

* * *

我做了一个非常简单的 jsfiddle 项目的例子，它似乎对我有用（我希望它对你有用），然后是来自hammer.js 网站的一个工作示例。

[http://jsfiddle.net/QD2ew/13/](http://jsfiddle.net/QD2ew/13/)

^-- 这是出了什么问题的例子（至少对我来说）。

[http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

^-- 这是一个工作示例

这两个代码单元之间出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:15:20.663

[http://jsfiddle.net/QD2ew/18/](http://jsfiddle.net/QD2ew/18/)

^--回答。

因此，Firefox 会将空 div 视为图像，它的鼠标事件将几乎立即被接管（第二次拖动尝试）。

所以要修复它，我在元素中放置了一个隐藏的 div（可见性：隐藏）。

Wowza，真是个讨厌的虫子！感谢那些试图提供帮助的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:17:48.057

看起来带有 console.log() 的东西不适用于 jsfiddle。看到这个：http: [//jsfiddle.net/QD2ew/19/](http://jsfiddle.net/QD2ew/19/)

# vb.net - 有没有办法在不指定其位置的情况下将字符串变量从一组字符修剪到另一个字符？

> ID：12941642
> 
> 赞同：0
> 
> 时间：2012-10-17T19:13:04.543
> 
> 标签：vb.net, string

我在一个字符串变量上有一个很大的值，我想只保留其中的一部分，我不知道我的数据所在的字符串中的确切位置，因为它可能随时变化，但我知道它介于特定之间标签，那么我怎么能只保留这些标签内的内容呢？

我拥有的那种字符串的例子：

```
Dim var as String = "
<random>     <stuffIDontNeed>      <x>1</x>      <x>2</x>      <x>3</x>     
</stuffIDontNeed>     <stuffIDoNeed>      <x>a</x>      <x>b</x>      <x>c</x>   
</stuffIDoNeed>    </random> " 
```

它都在同一个字符串中，我只是使用了多行，所以它完全显示而无需滚动。

所以我想做的是获取从 stuffIDoNeed 开始到结束的所有内容、标签和所有内容，而不仅仅是其中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:57:28.350

使用[String.IndexOf 方法](http://msdn.microsoft.com/en-us/library/system.string.indexof%28v=vs.100%29.aspx)方法。

```
Dim var as String = "<random>     <stuffIDontNeed>      <x>1</x>      <x>2</x>     <x>3</x>     </stuffIDontNeed>     <stuffIDoNeed>      <x>a</x>      <x>b</x>      <x>c</x>  </stuffIDoNeed>    </random> "

Dim Start As Integer = var.IndexOf("<stuffIDoNeed>")
Dim End As Integer = var.IndexOf("</stuffIDoNeed>") + 15

Dim var NewString = var.SubString(Start, End - Start) 
```

抓取字符串中`<stuffIDoNeed>`开始的位置。

接下来，获取字符串中`</stuffIDoNeed>`开始的位置，然后将 15 添加到它以说明您要查找的文本的结尾。

最后，使用带有 Start 位置的 Substring 和 End - Start 来获取要提取的字符串的长度。

`NewString`将等于`<stuffIDoNeed> <x>a</x> <x>b</x> <x>c</x> </stuffIDoNeed>`。

或者，如果您打算对提取的字符串中的值执行某些操作，则可以查看 LINQ to XML 并使用 XDocument 加载 XML 并将其解析出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:00:59.563

这将从输入字符串中提取子字符串（请不要使用 var 作为变量名，这会造成混淆）

```
Dim inputData as String = " " & _
        "<random>     <stuffIDontNeed>      <x>1</x>      <x>2</x>      <x>3</x>      " & _
        "</stuffIDontNeed>     <stuffIDoNeed>      <x>a</x>      <x>b</x>      <x>c</x>   "  & _
        "</stuffIDoNeed>    </random> " 

Dim result as string = string.Empty
Dim startPos = inputData.IndexOf("<stuffIDoNeed>")
Dim endPos = inputData.IndexOf("</stuffIDoNeed>")
if startPos > 0 AndAlso endPos > 0 andAlso endPos > startPos then
    result = inputData.SubString(startPos, endPos + 15 - startPos)
end if

Console.WriteLine(result) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T21:47:30.550

如果您要在 XML 文档中查找节点的值，最好使用 .NET 中内置的 XML 文档解析器之一，例如`XmlDocument`或`XDocument`. 例如，您可以这样做`XmlDocument`：

```
Dim doc As New XmlDocument()
doc.LoadXml(var)
Dim stuffIDoNeed As String = doc.SelectSingleNode("/random/stuffIDoNeed").InnerXml 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:17:30.990

最好转换成 XML，如果你知道你的结构总是这样。否则使用正则表达式，如果它变得更复杂，你可以适应。它也比`IndexOf`方法更具可读性。例如：

```
Imports System.Text.RegularExpressions
.....
Dim var As String = "<random>     <stuffIDontNeed>      <x>1</x>      <x>2</x>      <x>3</x>     </stuffIDontNeed>     <stuffIDoNeed>      <x>a</x>      <x>b</x>      <x>c</x>   </stuffIDoNeed>    </random> "
Dim g As Match = Regex.Match(var, "<stuffIDoNeed>(?<stuffIDoNeed>.*)</stuffIDoNeed>")
MsgBox(g.Groups("stuffIDoNeed").Value) 
```

# c# - 将 THEAD 和 TBODY 自动添加到 GridVIew 站点范围内的全局类或方法

> ID：12941649
> 
> 赞同：1
> 
> 时间：2012-10-17T19:13:33.063
> 
> 标签：c#, class, gridview, rendering, global-asax

我对 C# 和 DotNet 有点陌生，但我正在尝试解决一个问题。我想创建将驻留在全局 asax 中的类或作为可由 GridView 的 PreRender 触发器调用的 cs 文件，以将 THEAD 和 TBODY 功能添加到站点上的任何 gridview。我有我想使用的代码，但我只是不确定如何将其弹出到全局类或 asax 文件中，以便站点中的所有网格视图呈现 THEAD、TBODY 标记。

任何人都可以帮忙吗？我认为这对于那些喜欢用 THEAD 和 TBODY 标签呈现他们的 GridView 的人来说是一个有用的工具。

这是我在 C# 中的代码：

```
protected void GridViewThead(object sender, EventArgs e)
{
        if (sender.GetType() == typeof(GridView))
        {
            GridView Grid = (GridView)sender;
            if (Grid.Rows.Count > 0)
            {
                Grid.UseAccessibleHeader = true;
                Grid.HeaderRow.TableSection = TableRowSection.TableHeader;
                Grid.FooterRow.TableSection = TableRowSection.TableFooter;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:29:29.660

这将是创建一个从`GridView`. 您可以通过覆盖该`OnRender`方法来添加此功能。

# java - 如何对另一个类的返回值进行连续检查？

> ID：12941654
> 
> 赞同：0
> 
> 时间：2012-10-17T19:13:44.017
> 
> 标签：java, android, libgdx

我想在 android 线程中执行检查以检查另一个类中方法的返回值。到目前为止，这是我的代码：

```
public class HelloWorldAndroid extends AndroidApplication {

    private MyGame myGame;

@Override
public void onCreate (Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            **********Other lines Omitted***********

    myGame = new MyGame(false, 30, new AndroidLeaderboard());

            //check to see if the game is over
    Thread background = new Thread(new Runnable() {

        @Override
        public void run() {
            if (myGame.gameOver()) {

                //if the game is over go to another screen
                startActivity(new Intent(HelloWorldAndroid.this, MainActivity.class));

            }
        }

    });
            background.start();
      } 
```

我试图用一个处理程序来实现它，但它只是不执行检查，所以当值为 true 时它仍然运行。有谁知道我如何`myGame.gameOver() = true`在这个线程的整个运行过程中连续执行检查（这样我就可以继续进行不同的活动）。

几天来一直在绞尽脑汁，但仍然一无所获：S 欢迎任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:17:40.207

为什么不创建某种侦听器（接口）？

小而基本的例子，

```
myGame = new MyGame(false, 30, new AndroidLeaderboard());
myGame.setGameOverListener(this); 
```

**注意：**您不需要`setGameOverListener`方法，也可以将构造函数更改为具有侦听器参数。

侦听器将如下所示：

```
interface GameOverListener {
    abstract public void notifyGameOver();
} 
```

并在您的 MyGame 对象中创建一个方法：

```
setGameOverListener(GameOverListener gol){
    this.gol = gol;
} 
```

您的 Activity 将实现该侦听器，并在该`notifyGameOver()`方法中打开该 Activity。

像这样：

```
public void notifyGameOver(){
    startActivity(new Intent(HelloWorldAndroid.this, MainActivity.class));
} 
```

要通知您的游戏结束，只需让您的 MyGame 对象调用该`notifyGameOver()`方法：

```
gol.notifyGameOver(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T19:17:25.263

这对我来说似乎是非常糟糕的设计。相反，我建议创建一个`OnGameOverListener`具有一种方法的接口，`onGameOver()`. 该类`MyGame`具有客户端可以设置的此接口的实例。然后，当`MyGame`班级决定游戏结束时，它可以调用`onGameOver()`

看[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)

# javascript - 从字符串中删除 HTML 标记并保留“：”（冒号）

> ID：12941663
> 
> 赞同：-3
> 
> 时间：2012-10-17T19:14:40.737
> 
> 标签：javascript, jquery

> **可能重复：**
> [从文本 JavaScript 中剥离 HTML](https://stackoverflow.com/questions/822452/strip-html-from-text-javascript)

有没有办法从Javascript中的字符串中删除html并保留：（冒号）

我已经完成了[从 Text JavaScript 中剥离 HTML](https://stackoverflow.com/questions/822452/strip-html-from-text-javascript)以及[如何在 textarea 输入中剥离 html 标签](https://stackoverflow.com/questions/12022614/how-do-you-strip-html-tags-in-textarea-input)以及一些类似的问题，但无法找到正确的解决方案。

例如`"Something here<div> content</div>"`应该给予`"Something here content"` 和`"Something here :)"`应该给予`"Something here :)"`

在其他问题中提供的解决方案有助于去除 HTML 内容，也可以去除笑脸。

**编辑**：在提到从文本中去除笑脸的解决方案之前，请注意我需要这个来改进我在 www.chesshunt.com 上的聊天引擎解决方案。目前我正在剥离 HTML 标签和笑脸

我当前的代码

```
function strip(html) {
    var tmp = document.createElement("DIV");
    tmp.innerHTML = html;
    return tmp.textContent || tmp.innerText;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:16:59.520

假设内容在另一个容器中，只需使用 .text() 函数：

```
$('#some_container').text(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:17:01.543

您可以使用创建一个元素

```
var element = document.createNode('<div>'+yourString+'</div>'); 
```

然后获取 textContent（适用于除 IE 之外的所有浏览器）或 innerText。

编辑：Arg，标签中最初没有 jQuery ......所以可以使用

```
var stripped = $('<div>'+yourString+'</div>').text(); 
```

[演示（保持笑脸）](http://jsfiddle.net/8V6p4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T19:28:21.573

我不得不不同意您的说法，即“在其他问题中提供的解决方案有助于剥离 html 内容，但也剥离笑脸。”

这是基于您的链接的示例：http: [//jsfiddle.net/be8gz/](http://jsfiddle.net/be8gz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:17:10.627

您可以使用正则表达式[jsfiddle](http://jsfiddle.net/BjaH6/)

```
 var myStr = "Something here<div> content</div>";    
    var myRegEx = /<\/?[^<>]*\/?>/gim;
     var result = myStr.split(myRegEx).join(""); 
```

或者

```
 result = myStr.replace(/<\/?[^<>]*\/?>/gim, "");

​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T19:19:36.420

一个简单的正则表达式应该可以完成这项工作

```
var string = "Something here<div> content</div> :)";
alert(string.replace(/<([^>]+)>.*?<\/\1>/g,''));​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T19:27:30.987

我不明白你是否要保留笑脸。根据您问题中的示例，我必须假设您要保留笑脸，但要摆脱任何 html 标签。我认为像这样的正则表达式会起作用：

```
pattern = /<.*?>/g; 
```

请参阅[JSFiddle](http://jsfiddle.net/bozdoz/ywTDk/)。

# c++ - 为什么这个简单的 c++ c 风格字符串反转方法会抛出访问冲突异常？

> ID：12941664
> 
> 赞同：0
> 
> 时间：2012-10-17T19:14:42.580
> 
> 标签：c++, cstring

我一直在使用 Stroustrup 的 C++ 编程语言，但我在早期练习时遇到了困难。任务是构建一个反转 ac 样式字符串的方法 rev。我认为我的逻辑是正确的，但是当我尝试修改字符串时出现错误。我不能这样做吗？

```
int strlen_(char* string)
{
    int count = 0;
    while (*string != '\0'){
        count ++;
        string ++;
    }

    return count;
}

void rev(char* string)
{
    //length of the string is going to be useful 
    int len = strlen_(string);

    //two counters, one going forward, one going back

    int forwardIndex = 0;
    int backwardIndex = len-1; 

    char temp;
    while (forwardIndex < backwardIndex){
        temp = string[forwardIndex];
        string[forwardIndex] = string[backwardIndex];   //Exception Here
        string[backwardIndex] = temp;
        forwardIndex--;
        backwardIndex--;
    }

}

void main()
{
    char* test = "test"; 
    rev(test);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:15:53.093

您不能修改文字字符串，并且您的 reverse 函数会修改它的字符串参数。

通过传递类似的东西来测试你的反向函数：

```
void main()
{
    char test[] = "test";
    rev(test);
} 
```

这将`"test"`在您可以修改的数组中复制文字字符串。

此外，你正在减少`forwardIndex`和`backwardIndex`: 你应该*增加* `forwardIndex`: `forwardIndex++`。这个想法是指数将在中间相遇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:19:35.480

似乎您正在减少 forwardIndex。第一次运行后它将是-1。查找`forwardIndex--;`并更改为`forwardIndex++;`

# c# - 控制台应用程序与 Windows 服务

> ID：12941671
> 
> 赞同：5
> 
> 时间：2012-10-17T19:15:06.700
> 
> 标签：c#, windows, service

我创建了一个小型 C# 程序，它与 Web 服务联系并检索和处理数据集。在对 stackOverflow 进行了一番摸索和大量探索之后，这没问题 - 感谢所有做出贡献的人。

我通常在 Linux 世界工作，所以这是对 Windows 环境的罕见尝试。我需要做的是设置它，以便 TaskScheduler 将运行这个应用程序。没有控制台显示或交互，所有内容都写入日志文件。

在 Linux 中我会简单地使用 CRONTASK，但在 Windows 中有些不同。这是正确的吗？怎么做到这一点，因为它将每天运行一次？我考虑过一个 Windows 服务，但存在一定程度的复杂性，我不确定是否合理。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T19:19:51.797

如果您的应用程序经常执行小任务，那么计划任务会更好，因为您会占用系统资源，而服务大部分时间都无所事事。

如果您在最新版本的 Windows 上运行您的应用程序，请查看控制面板并搜索“计划任务”。您将能够设置一个工作来每天在那里运行您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:31:35.660

您可能会为此编写脚本，因此请使用 schtasks.exe 创建您的计划任务： [msdn link to schtasks.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx)

此外，在 win7 及更高版本上，您实际上可以将创建的计划任务以 xml 的形式迁移并导入到另一台机器上，如果需要，操作和/或保存它们会更容易一些。

# user-interface - 形状绘图 GUI。将paintComponent 与从JPanel 派生的类一起使用。

> ID：12941672
> 
> 赞同：2
> 
> 时间：2012-10-17T19:15:10.473
> 
> 标签：user-interface, graphics, paintcomponent

我正在尝试绘制一个简单的 gui，用户在其中添加数据，然后按下按钮，它会在窗口中绘制形状。我在更大的计划上失败了，所以我回到了第一方。我只是想创建一个简单的窗口，在菜单栏中有一个“绘图”按钮。当您按下按钮时，我已经硬编码到从实现图形类的 JPanel 派生的类中的形状应该出现在同一个窗口中。

这是我所拥有的，但它不起作用。有人可以看看我做错了什么。令人沮丧的是，当我只是在构造函数中创建形状并将其添加到布局中时，它可以正常工作，但是当我尝试使用按钮执行操作时，它会失败。

谢谢。

公共类 ShapeGUITest 扩展 JFrame {

```
public static final int WINDOW_WIDTH = 500;
public static final int WINDOW_HEIGHT = 500;
public static final int X = 100;
public static final int Y = 75;
public static final int SHAPE_BASE = 200;
public static final int SHAPE_HEIGHT = 250;
JPanel buttonPanel;
JComponent shapeArea;

public ShapeGUITest() {

    super("Draw Shapes Dammit!");
    setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());

    shapeArea = new Jpanel();
    add(shapeArea, BorderLayout.CENTER);

    JButton drawButton = new JButton("Draw");
    drawButton.addActionListener(new DrawButtonListener());

    JMenuBar bar = new JMenuBar();
    bar.add(drawButton);
    setJMenuBar(bar);

}

/*public void drawShapePanel() {
    shapeArea = new ShapePanel();
    add(shapeArea, BorderLayout.CENTER);
}*/

private class DrawButtonListener implements ActionListener {
public void actionPerformed(ActionEvent e) {
    //drawShapePanel();

    //shapeArea = new ShapePanel();
    //add(shapeArea, BorderLayout.CENTER);
    ShapePanel s = new ShapePanel();
    //s.setVisible(true);
    //shapeArea.removeAll();
    shapeArea.add(s);
    shapeArea.revalidate();
    validate();
    //ShapeFrame s = new ShapeFrame();

}
}

private class ShapeFrame extends JFrame {

    public ShapeFrame() {
        super("the shape is here");
        setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void paint(Graphics g) {
        super.paint(g);
        setBackground(Color.WHITE);
        g.setColor(Color.YELLOW);
        g.fillRect(X, Y, SHAPE_BASE, SHAPE_HEIGHT);
        g.setColor(Color.GREEN);
        g.drawRect(X, Y, SHAPE_BASE, SHAPE_HEIGHT);
    }
}

private class ShapePanel extends JPanel {

    public ShapePanel() {
        super();
        setVisible(true);
        setLayout(new FlowLayout());
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        setBackground(Color.WHITE);
        g.setColor(Color.YELLOW);
        g.fillRect(X, Y, SHAPE_BASE, SHAPE_HEIGHT);
        g.setColor(Color.GREEN);
        g.drawRect(X, Y, SHAPE_BASE, SHAPE_HEIGHT);
    }
}

public static void main(String[] args) {
    ShapeGUITest gui = new ShapeGUITest();
    gui.setVisible(true);
} 
```

}

# gtk - 如何扩展 Gtk 标签以填充整个水平空间？

> ID：12941674
> 
> 赞同：4
> 
> 时间：2012-10-17T19:15:16.093
> 
> 标签：gtk, label, pygtk

我正在尝试在对话框中插入文本标签，但是当我将对齐设置为 (X=0, Y=0.5) 并将换行设置为 True 时，文本不会填充整个水平空间。

[这](http://i.stack.imgur.com/AKn3Q.png)是一张图片

这是python中的示例代码：

```
import gtk

if __name__ == "__main__":

    lbl = gtk.Label('Presione el botón "Adelante" para iniciar la instalación del sistema. Después de este paso no podrá detener la instalación, así que asegúrese de que sus datos son correctos.')
    lbl.set_line_wrap(True)
    lbl.set_alignment(0, 0.5)
    lbl.set_justify(gtk.JUSTIFY_FILL)
    lbl.show()

    diag = gtk.Dialog()
    diag.set_size_request(640, 480)
    diag.vbox.pack_start(lbl)
    diag.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:00:12.810

将标签打包到对话框中时，尝试设置“扩展”和“填充”属性：

```
diag.vbox.pack_start(lbl, True, True, 0) 
```

**编辑**

你是对的。对不起。根据 GTK 参考手册：

> 请注意，将换行设置为 TRUE 不会使标签在其父容器的宽度处换行，因为 GTK+ 小部件在概念上不能使它们的请求取决于父容器的大小。对于在特定位置环绕的标签，使用 gtk_widget_set_size_request() 设置标签的宽度。

`GtkLabel`因此，在对话框上而不是在对话框上设置大小请求，`GtkDialog`并让对话框自行调整大小。

```
# -*- coding: utf-8 -*-
import gtk

if __name__ == "__main__":

    lbl = gtk.Label('Presione el botón "Adelante" para iniciar la instalación del sistema. Después de este paso no podrá detener la instalación, así que asegúrese de que sus datos son correctos.')
    lbl.set_line_wrap(True)
    lbl.set_alignment(0, 0.5)
    lbl.set_justify(gtk.JUSTIFY_FILL)
    lbl.set_size_request(640, 480)
    lbl.show()

    diag = gtk.Dialog()
    diag.set_resizable(True)
    diag.vbox.pack_start(lbl, True, True, 0)
    diag.run() 
```

# c++ - 如何初始化不同对象指针的向量？

> ID：12941675
> 
> 赞同：2
> 
> 时间：2012-10-17T19:15:16.787
> 
> 标签：c++, pointers, vector

我想看看是否可以在一行中初始化一个对象向量，所以我编写了以下示例：

```
vector<Bar*> bar(5, new Bar());

bar[3]->hit++;
for (int i = 0; i < 5; i++)
    cout << bar[i]->hit << endl; 
```

但是当我运行它时，我得到：

```
1
1
1
1
1 
```

它似乎对所有指针使用相同的 new Bar() 。是否可以初始化对象指针向量以指向不同的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:16:07.847

您的所有指针都指向同一个位置，因此结果是预期的。

```
vector<Bar*> bar(5, new Bar()); 
```

不会`Bar`为所有 5 个对象创建一个新对象，而是使用 的返回值（`new Bar()`指向内存位置的指针）来生成向量。

要获得您期望的结果，您可以使用`std::generate`：

```
Bar* newBar() { return new Bar(); }

//...

vector<Bar*> bar(5);
std::generate(bar.begin(),bar.end(),newBar); 
```

或者干脆

```
std::generate(bar.begin(),bar.end(), []{return new Bar();}); 
```

如果 C++11 是一个选项。

输出将是

```
0
0
0
1
0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:18:12.217

用几个不同的值初始化一个向量需要 C++11 和对初始化列表的支持：

```
std::vector<Bar*> v { new Bar, new Bar, new Bar, new Bar }; 
```

You can probably use a library like Boost.Assign in versions before C++11.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:23:14.130

From the spec:

```
Effects: Constructs a vector with n copies of value [...] 
```

where n is the first and value the second argument.

# r - 合并两个数据框

> ID：12941677
> 
> 赞同：6
> 
> 时间：2012-10-17T19:15:23.013
> 
> 标签：r, merge, dataframe

我有以下数据框：

```
Date,Year,Austria,Germany,...
1969-12-31,1969,96.743,95.768,...
1970-01-30,1970,95.515,95.091,...
1970-02-27,1970,95.075,95.235,... 
```

最终，我想将此数据框与另一个看起来像这样的数据框合并：

```
Year,Country,Exp,...
1969,Austria,1,...
1970,Austria,0,...
1969,Germany,0,...
1970,Germany,1,... 
```

在我看来，我必须将第一个数据框更改为以下格式：

```
Date,Year,Country,Exp,…
1969-12-31,1969,Austria,96.743,...
1970-01-30,1970,Austria,95.515,...
1970-02-27,1970,Austria,95.075,...
1969-12-31,1969,Germany,95.768,...
1970-01-30,1970,Germany,95.091,...
1970-02-27,1970,Germany,95.235,... 
```

然后，我可以使用合并功能并使用年份和国家/地区合并它们（一对多）。

我试图按照上面的建议转换数据框。但是，我能想到的唯一方法是使用几个复杂的“for”循环。如果有人有更简单的方法，将不胜感激。此外，如果您认为合并这两个数据帧可以以更简单的方式完成，那也很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:43:42.433

您需要融化的第一个数据框。

```
library(reshape)
melt(dat, id.vars="Date,Year") # may need to add ...,c()) 
```

重命名新列以匹配您的其他 data.frame。

然后合并（或者您可能更喜欢加入，使用 plyr 包）

```
merge(dat,dat2, by=c("Date","Country")) 
```

或者：

```
library(plyr)
join(dat,dat2, by=c("Date","Country")) 
```

我更喜欢 join 函数，因为它比合并更直观，尤其是在存在 NA 值的情况下。

# c - C中分数的加法：浮点异常

> ID：12941688
> 
> 赞同：-1
> 
> 时间：2012-10-17T19:16:08.570
> 
> 标签：c, floating-point

我正在编写一个使用分数的小程序：

```
struct fraction
{
     int num;
     int den;
};

typedef struct fraction FRAC; 
```

我使用最小公倍数函数来添加两个分数（之后不简化它们）：

```
FRAC *add (FRAC a, FRAC b)
{
    int l = lcm(a.den, b.den);
    FRAC *sum;
    sum = malloc(sizeof(FRAC));
    sum->den = l;
    int la = l/a.den;
    int lb = l/b.den;
    sum->num = a.num*la + b.num*lb;
    return sum;
} 
```

给定一个数组，`FRAC`我想用以下函数计算总和：

```
FRAC* fraction_sum (FRAC *a, unsigned int size)
{
    int i;
    FRAC* sum = malloc(sizeof(FRAC));
    sum->num = 0;
    sum->den = 0;

    for (i = 0; i < size; i++)
    {
        FRAC b = {sum->num, sum->den};
        sum = add(b,a[i]);
    }

    return sum;
} 
```

然而这个表达

```
print(*fraction_sum(fractions, N)); 
```

返回错误

```
Floating point exception (core dumped) 
```

有任何想法吗？有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:19:15.717

看起来你被零除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:23:39.923

将您的初始化更改为

```
 sum->den = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:56:58.333

你**除以零**。

你第一次调用函数 add 时，参数*a*的*num*和*den*都等于 0。这会导致您稍后在此表达式中遇到该异常。

```
int la = l/a.den; 
```

Initializing b.den to 1 should stop your program from crashing. But it may not produce the correct sum I'm afraid.

# jquery - jquery mobile refire pagebeforecreate事件

> ID：12941691
> 
> 赞同：1
> 
> 时间：2012-10-17T19:16:19.947
> 
> 标签：jquery

我有一个发布到相同 url 的表单，响应是表单字段，其中包含从表单派生的一些新数据。

在我的页面上，我有：

```
$(document).delegate("#mypage","pagebeforecreate", function(){
     //some stuff
}); 
```

首次访问页面时会触发此事件，但不会在表单从 post 中返回时触发。

有没有办法重新触发 pagebeforecreate 事件？

感谢您的任何意见。安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:33:07.817

经过大量挖掘正确的方法是使用*文档*而不是像这样的页面ID：

```
$(document).on("pageinit","selector",function(){
    // your code here
}); 
```

这将确保您在将“page-id”插入 DOM 时捕获 pageinit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:37:17.037

您可以使用[trigger()](http://api.jquery.com/trigger/)：

```
$("#mypage").trigger("pagebeforecreate"); 
```

`_trigger()`或者，您可以调用页面小部件的内部方法：

```
$("#mypage").data("page")._trigger("beforecreate"); 
```

# jquery - 如果子表被隐藏，则隐藏父 Div（显示：无）

> ID：12941697
> 
> 赞同：5
> 
> 时间：2012-10-17T19:16:39.237
> 
> 标签：jquery, sugarcrm

我已经尝试在 StackOverflow 和 Google 上进行搜索，我发现了我认为可行但似乎没有任何帮助的想法！

我在 SugarCRM Professional 6.5.5 中工作，如果使用 jQuery 隐藏表（显示：无），我正在尝试隐藏子表的父 div，但我运气不佳。

例如，在下面的代码中，我试图隐藏`<div id="detailpanel_5" class="detail view detail508 expanded">`，因为子表`<table id="LBL_EDITVIEW_PANEL6" class="panelContainer" cellspacing="0" style="overflow: hidden; height: 0px; display: none;">`是隐藏的。

我能够成功隐藏父 div，`$('#LBL_EDITVIEW_PANEL6').parent().hide();`但问题是每个页面上隐藏了很多表格，并且视图是动态的 - 并非每个页面都会隐藏相同的表格。

所以我想要 jQuery 做的是在页面加载后浏览页面并仅隐藏隐藏的子表的父 div。

我试过使用类似的东西：`$(":hidden").parent().hide();`搜索任何隐藏的元素，但隐藏了整个页面（屏幕完全是白色的）。我试过`$("table:hidden").parent().hide();`了，但这似乎没有任何作用。

如果我遗漏了任何需要帮助回答的细节，我深表歉意。如果需要，我很乐意提供更多信息。希望这是我忽略的非常小的东西。

下面是一小段 HTML：

```
<div class="yui-content">
    <div id="tabcontent0">
        <div id="detailpanel_1" class="detail view detail508 ">
        <div id="detailpanel_2" class="detail view detail508 expanded">
        <div id="detailpanel_3" class="detail view detail508 expanded">
        <div id="detailpanel_4" class="detail view detail508 expanded">
            <h4>
            <table id="LBL_EDITVIEW_PANEL7" class="panelContainer" cellspacing="0">
            <script type="text/javascript">
        </div>
        <div id="detailpanel_5" class="detail view detail508 expanded">
            <h4>
            <table id="LBL_EDITVIEW_PANEL6" class="panelContainer" cellspacing="0" style="overflow: hidden; height: 0px; display: none;"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:30:17.017

`$(":hidden")`也返回`<head>`, `<style>`, `<script>`, 等元素。它们的父级是`<html>`文档本身。所以自然`$(":hidden").parent().hide();`会隐藏整个文档。因此，您必须更具体一点。

正如@denisk 所说，`$('table:hidden').parent().hide();`应该可以完美运行。

*`<h4>`在您显示的代码中，它可能因为标签而不起作用。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:43:45.830

```
$(':hidden').parent().hide(); 
```

应该工作：http: [//jsfiddle.net/UtGM3/](http://jsfiddle.net/UtGM3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:24:41.300

试试这个。因为您将 css display 设置为 none

```
$('table').each(function(){
if ($(this).css("display") == "none")
{
$(this).parent().hide();
}
}) 
```

# asp.net - asp：参数未正确绑定值

> ID：12941702
> 
> 赞同：0
> 
> 时间：2012-10-17T19:16:50.080
> 
> 标签：asp.net

我的删除命令没有删除。当我单击删除按钮时，我看到 Get 和 Post 事件触发，但没有任何更改反映在我的数据库或页面上。`asp:Parameter`如果我为每次传递的默认值分配一个默认值，并且如果它恰好存在于数据库中，则删除命令会正确评估并删除记录。

```
<asp:SqlDataSource
    ID="AcknowledgementDataSource" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ProductionDatabaseConnectionString1 %>" 
    SelectCommand="select tblHRM_Acknowledgements.AcknowledgementID, tblHRM_Acknowledgements.Acknowledger, lstduperoncontacts.Contact as Acknowledgee, tblHRM_Acknowledgements.Comment from tblHRM_Acknowledgements left join lstduperoncontacts on tblHRM_Acknowledgements.acknowledgee = lstDuperonContacts.contactid where Acknowledger in (select lstDuperonContacts.ContactID from lstDuperonContacts where lstDuperonContacts.email = @lblemail)"
    InsertCommand="insert into tblHRM_Acknowledgements(Acknowledger, Acknowledgee, Comment) Select contactID, @ddlAck, @txtComment from lstDuperonContacts where email = @lblemail"         
    DeleteCommand="delete from tblHRM_Acknowledgements where tblHRM_Acknowledgements.AcknowledgementID = @AcknowledgementID">
        <SelectParameters>
            <asp:ControlParameter ControlID="lblemail" Name="lblemail" />
        </SelectParameters>
        <InsertParameters>
            <asp:ControlParameter ControlID="lblemail" Name="lblemail" />
            <asp:ControlParameter ControlId="ddlAcknowledgee" PropertyName="SelectedValue" Name="ddlAck" />
            <asp:ControlParameter ControlID="txtComment" Name="txtComment" />
        </InsertParameters>
        <DeleteParameters>
            <asp:Parameter Name="AcknowledgementID" />
        </DeleteParameters>

    </asp:SqlDataSource> 
```

我觉得这是一个明显的问题，例如拼写错误或其他什么，我只是找不到它，但我不能肯定地说。有什么错误的吗？

显示/删除数据的列表视图：

```
 <asp:ListView ID="ListView1" runat="server" DataSourceID="AcknowledgementDataSource">
        <AlternatingItemTemplate>
            <li style="">
                <asp:HiddenField ID="AcknowledgementField" Value='<%# Eval("AcknowledgementID") %>' runat="server" />
                Acknowledgee:
                <asp:Label ID="AcknowledgeeLabel" runat="server" 
                    Text='<%# Eval("Acknowledgee") %>' />
                <br />
                Comment:
                <asp:Label ID="CommentLabel" runat="server" Text='<%# Eval("Comment") %>' />
                <br />
                <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                    Text="Delete" />
            </li>
        </AlternatingItemTemplate>
        <EmptyDataTemplate>
            No data was returned.
        </EmptyDataTemplate>
        <ItemSeparatorTemplate>
            <br />
        </ItemSeparatorTemplate>
        <ItemTemplate>
            <li style="">
                <asp:HiddenField ID="AcknowledgementField" Value='<%# Eval("AcknowledgementID") %>' runat="server" />
                Acknowledgee:
                <asp:Label ID="AcknowledgeeLabel" runat="server" 
                    Text='<%# Eval("Acknowledgee") %>' />
                <br />
                Comment:
                <asp:Label ID="CommentLabel" runat="server" Text='<%# Eval("Comment") %>' />
                <br />
                <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                    Text="Delete" />
            </li>
        </ItemTemplate>
        <LayoutTemplate>
            <ul ID="itemPlaceholderContainer" runat="server" style="">
                <li runat="server" id="itemPlaceholder" />
            </ul>
            <div style="">
            </div>
        </LayoutTemplate>
    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:40:53.900

试试这个代码

```
<asp:ListView ID="ListView1" DataKeyNames="AcknowledgementID"....... 
```

使用`DataKeyNames`列表视图的属性。

[ListView.DataKeyNames 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.datakeynames.aspx)

# php - 将 cURL 与 SNI（服务器名称指示）一起使用

> ID：12941703
> 
> 赞同：31
> 
> 时间：2012-10-17T19:16:50.317
> 
> 标签：php, ssl, curl, sni

我正在尝试使用 cURL 发布到刚刚开始使用 SNI 的 API（因此他们可以在 1 个 IP 地址上托管多个 ssl 证书）。

由于迁移到 SNI，我的 cURL 停止工作。他们解释说，这是因为 cURL 正在返回 *.domain-a.com 而不是 *.domain-b.com，因此 SSL 失败。

这似乎是 cURL 中的一个错误，因为从浏览器访问 API URL 时没有错误。

使用此代码，它确实有效：

```
exec('curl -k -d "parameters=here", https://urlhere.com/', $output);
print_r($output); 
```

但是，使用 -k 很糟糕，因为它不会验证 SSL 证书。

使用此代码，不起作用：

```
exec('curl -d "parameters=here", https://urlhere.com/', $output);
print_r($output); 
```

所以我的问题是，我怎样才能将 curl 与 SNI 一起使用并仍然验证 SSL（不必使用 -k）。PHP 中是否有其他设置或我可以设置的 cURL 选项来解决这个问题？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-17T19:57:24.133

为了能够使用 SNI，需要三个条件：

*   [根据更改日志](http://curl.haxx.se/changes.html)，使用支持它的 Curl 版本，至少为 7.18.1 。
*   使用针对支持 SNI 的库编译的 Curl 版本，例如 OpenSSL 0.9.8j（取决于某些旧版本的编译选项）。
*   至少使用 TLS 1.0（不是 SSLv3）。

请注意，Curl 的调试`-v`代码[`ssl_tls_trace`](https://github.com/bagder/curl/blob/9547be37c252416f856fea664ff91c4fbfd86c2c/lib/ssluse.c#L1383)（ v3.1 或更高版本，3 是相同的主要版本号）。

您可以使用 Wireshark 检查您安装的 curl 版本是否可以使用 SNI。如果您使用 建立连接`curl -1 https://something`，如果您展开“Client Hello”消息，您应该能够看到一个“ `server_name`”扩展名。

`curl`当您不使用`-1`（对于 TLS 1.0）或（对于 SSLv3）使用时，我不确定默认使用哪个 SSL/TLS 版本（取决于您的编译选项）`-3`，但是您可以尝试强制`-1`执行命令，因为它不会无论如何都不能使用 SSLv3。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-10-16T21:59:20.373

连同所需的库和 Curl 版本，请求应使用 resolve 在 curl 中发送 SNI：

```
curl -vik --resolve example.com:443:198.18.110.10 https://example.com/ 
```

# wpf - 当 TextBox 获得焦点时，UserControl 中的 KeyBinding 不起作用

> ID：12941707
> 
> 赞同：24
> 
> 时间：2012-10-17T19:17:00.537
> 
> 标签：wpf, xaml, mvvm, focus, inputbinding

以下情况。我有一个带有五个键绑定的 UserControl。当 TextBox 获得焦点时，UserControl 的键绑定停止触发..

有没有办法解决这个“问题”？

```
<UserControl.InputBindings>
    <KeyBinding Key="PageDown" Modifiers="Control" Command="{Binding NextCommand}"></KeyBinding>
    <KeyBinding Key="PageUp" Modifiers="Control" Command="{Binding PreviousCommand}"></KeyBinding>
    <KeyBinding Key="End" Modifiers="Control"  Command="{Binding LastCommand}"></KeyBinding>
    <KeyBinding Key="Home" Modifiers="Control" Command="{Binding FirstCommand}"></KeyBinding>
    <KeyBinding Key="F" Modifiers="Control" Command="{Binding SetFocusCommand}"></KeyBinding>
</UserControl.InputBindings>
<TextBox Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}">
    <TextBox.InputBindings>
        <KeyBinding Gesture="Enter" Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl }}, Path=DataContext.FilterCommand}"></KeyBinding>
    </TextBox.InputBindings>
</TextBox> 
```

似乎功能键（`F1`等）和`ALT`+`[key]`确实有效。我认为`CTRL`and`SHIFT`修饰符以某种方式“阻止”事件冒泡到 UserControl。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-17T21:02:17.137

某些输入绑定有效而某些无效的原因是 TextBox 控件捕获并处理了一些键绑定。例如，它处理`CTRL`+`V`用于粘贴，`CTRL`+`Home`用于转到文本的开头等。另一方面，其他组合键（例如`CTRL`+ `F3`）不由 TextBox 处理，因此它们会冒泡。

如果您只是想禁用 TextBox 的输入绑定，那很简单 - 您可以使用该`ApplicationCommands.NotACommand`命令，该命令将禁用默认行为。例如，在以下情况下，使用`CTRL`+粘贴`V`将被禁用：

```
<TextBox>
    <TextBox.InputBindings>
        <KeyBinding Key="V" Modifiers="Control" Command="ApplicationCommands.NotACommand" />
    </TextBox.InputBindings>
</TextBox> 
```

然而，让它冒泡到用户控件有点棘手。我的建议是创建一个附加行为，该行为将应用于 UserControl，注册到它的`PreviewKeyDown`事件，并在它们到达 TextBox 之前根据需要执行它的输入绑定。当执行输入绑定时，这将优先于 UserControl。

我编写了一个实现此功能的基本行为来帮助您入门：

```
public class InputBindingsBehavior
{
    public static readonly DependencyProperty TakesInputBindingPrecedenceProperty =
        DependencyProperty.RegisterAttached("TakesInputBindingPrecedence", typeof(bool), typeof(InputBindingsBehavior), new UIPropertyMetadata(false, OnTakesInputBindingPrecedenceChanged));

    public static bool GetTakesInputBindingPrecedence(UIElement obj)
    {
        return (bool)obj.GetValue(TakesInputBindingPrecedenceProperty);
    }

    public static void SetTakesInputBindingPrecedence(UIElement obj, bool value)
    {
        obj.SetValue(TakesInputBindingPrecedenceProperty, value);
    }

    private static void OnTakesInputBindingPrecedenceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ((UIElement)d).PreviewKeyDown += new KeyEventHandler(InputBindingsBehavior_PreviewKeyDown);
    }

    private static void InputBindingsBehavior_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        var uielement = (UIElement)sender;

        var foundBinding = uielement.InputBindings
            .OfType<KeyBinding>()
            .FirstOrDefault(kb => kb.Key == e.Key && kb.Modifiers == e.KeyboardDevice.Modifiers);

        if (foundBinding != null)
        {
            e.Handled = true;
            if (foundBinding.Command.CanExecute(foundBinding.CommandParameter))
            {
                foundBinding.Command.Execute(foundBinding.CommandParameter);
            }
        }
    }
} 
```

用法：

```
<UserControl local:InputBindingsBehavior.TakesInputBindingPrecedence="True">
    <UserControl.InputBindings>
        <KeyBinding Key="Home" Modifiers="Control" Command="{Binding MyCommand}" />
    </UserControl.InputBindings>
    <TextBox ... />
</UserControl> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-02T02:14:18.343

Adi Lester 的解决方案效果很好。这是使用 Behavior 的类似解决方案。C# 代码：

```
public class AcceptKeyBinding : Behavior<UIElement>
{

    private TextBox _textBox;

    /// <summary>
    ///  Subscribes to the PreviewKeyDown event of the <see cref="TextBox"/>.
    /// </summary>
    protected override void OnAttached()
    {
        base.OnAttached();

        _textBox = AssociatedObject as TextBox;

        if (_textBox == null)
        {
            return;
        }

        _textBox.PreviewKeyDown += TextBoxOnPreviewKeyDown;
    }

    private void TextBoxOnPreviewKeyDown(object sender, KeyEventArgs keyEventArgs)
    {
        var uielement = (UIElement)sender;

        var foundBinding = uielement.InputBindings
            .OfType<KeyBinding>()
            .FirstOrDefault(kb => kb.Key == keyEventArgs.Key && kb.Modifiers ==           keyEventArgs.KeyboardDevice.Modifiers);

        if (foundBinding != null)
        {
            keyEventArgs.Handled = true;
            if (foundBinding.Command.CanExecute(foundBinding.CommandParameter))
            {
                foundBinding.Command.Execute(foundBinding.CommandParameter);
            }
        }
    }

    /// <summary>
    ///     Unsubscribes to the PreviewKeyDown event of the <see cref="TextBox"/>.
    /// </summary>
    protected override void OnDetaching()
    {
        if (_textBox == null)
        {
            return;
        }

        _textBox.PreviewKeyDown -= TextBoxOnPreviewKeyDown;

        base.OnDetaching();
    }

} 
```

和 XAML：

```
<TextBox>
  <TextBox.InputBindings>
      <KeyBinding Key="Enter" Modifiers="Shift" Command="{Binding CommandManager[ExecuteCommand]}"
          CommandParameter="{Binding ExecuteText}" />
  </TextBox.InputBindings>
      <i:Interaction.Behaviors>
         <behaviours:AcceptKeyBinding />
      </i:Interaction.Behaviors>
</TextBox> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-07T15:48:10.167

除了 Adi Lester 他的（非常有帮助的）回答之外，我还想提出一些改进/扩展来帮助我实施的建议。

**手势匹配**

foundBinding 也可以通过调用 Gesture.Matches 来完成。将 foundBinding Linq 查询更改为以下内容：

```
KeyBinding foundBinding = ((UIElement)this).InputBindings
            .OfType<KeyBinding>()
            .FirstOrDefault(inputBinding => inputBinding.Gesture.Matches(sender, eventArgs)); 
```

**鼠标绑定**

此外，您还可以定义 MouseBindings。

```
<MouseBinding Command="{Binding DataContext.AddInputValueCommand, ElementName=root}" CommandParameter="{Binding}" Gesture="Shift+MiddleClick" /> 
```

然后，您还需要订阅 PreviewMouseEvents，例如 PreviewMouseUp 和 PreviewMouseDoubleClick。实现与 KeyBindings 几乎相同。

```
private void OnTextBoxPreviewMouseUp(object sender, MouseButtonEventArgs eventArgs)
{
    MouseBinding foundBinding = ((UIElement)this).InputBindings
        .OfType<MouseBinding>()
        .FirstOrDefault(inputBinding => inputBinding.Gesture.Matches(sender, eventArgs));

    if (foundBinding != null)
    {
        eventArgs.Handled = true;
        if (foundBinding.Command.CanExecute(foundBinding.CommandParameter))
        {
            foundBinding.Command.Execute(foundBinding.CommandParameter);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-08T10:36:06.477

这个线程很旧，但很多人都有这个问题。我的研究表明，Adi Lester 的解决方案是唯一一个不是“肮脏”的解决方法。对于需要的人，VisualBasic.NET 实现：

```
Public Class InputBindingsBehavior
    Public Shared ReadOnly TakesInputBindingPrecedenceProperty As DependencyProperty = DependencyProperty.RegisterAttached("TakesInputBindingPrecedence", GetType(Boolean), GetType(InputBindingsBehavior), New UIPropertyMetadata(False, AddressOf OnTakesInputBindingPrecedenceChanged))

    Public Shared Function GetTakesInputBindingPrecedence(obj As UIElement) As Boolean
        Return obj.GetValue(TakesInputBindingPrecedenceProperty)
    End Function

    Public Shared Sub SetTakesInputBindingPrecedence(obj As UIElement, value As Boolean)
        obj.SetValue(TakesInputBindingPrecedenceProperty, value)
    End Sub

    Public Shared Sub OnTakesInputBindingPrecedenceChanged(d As DependencyObject, e As DependencyPropertyChangedEventArgs)
        AddHandler DirectCast(d, UIElement).PreviewKeyDown, AddressOf InputBindingsBehavior_PreviewKeyDown
    End Sub

    Public Shared Sub InputBindingsBehavior_PreviewKeyDown(sender As Object, e As KeyEventArgs)
        Dim uielement = DirectCast(sender, UIElement)

        Dim foundBinding = uielement.InputBindings.OfType(Of KeyBinding).FirstOrDefault(Function(kb As KeyBinding) kb.Key = e.Key And kb.Modifiers = e.KeyboardDevice.Modifiers)

        If foundBinding IsNot Nothing Then
            e.Handled = True
            If foundBinding.Command.CanExecute(foundBinding.CommandParameter) Then
                foundBinding.Command.Execute(foundBinding.CommandParameter)
            End If
        End If
    End Sub

End Class 
```

其余如前所述。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-12T18:10:57.453

```
<UserControl.Style>
    <Style TargetType="UserControl">
        <Style.Triggers>
            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                <Setter Property="FocusManager.FocusedElement" Value="   {Binding ElementName=keyPressPlaceHoler}" />
                </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Style> 
```

`keyPressPlaceHoler`是目标容器的名称`uielement`

记得在用户控件中`Focusable="True"`设置

# c# - 垂直（从左到右）而不是从上到下读取 .NET BitmapData

> ID：12941709
> 
> 赞同：0
> 
> 时间：2012-10-17T19:17:02.313
> 
> 标签：c#, .net, bitmapdata

我正在做一些在 C# 中处理位图的工作，并且我正在使用`BitmapData`一个`byte`指针来使其尽可能快。下面的代码在从上到下读取时垂直查找第一条水平像素线，其中包含可见数据（即 alpha 值 == !0）：

```
var rectangle = new Rectangle(0, 0, 590, 590);
BitmapData data = logo.LockBits(rectangle, ImageLockMode.WriteOnly, logo.PixelFormat);

var bmpBytes = (byte*)data.Scan0;
int nOffset = data.Stride - logo.Width * 4;

for (int y = 0; y < height; y++)
{
    for (int x = 0; x < width; x++)
    {
        if (bmpBytes[3] > 0)
        {
            bmpBytes -= (y * x);
            return y;
        }
        bmpBytes += 4;
    }

    bmpBytes += nOffset;
}

return -1; 
```

我现在想做同样的事情，但从左到右读取数据并获取其中包含可见数据的第一条垂直像素线。问题是位图数据被“展平”并排成一行，如果你愿意的话，我不知道该怎么做。

有人对我如何做到这一点有任何见解吗？

# latex - \begin{figure}[H] 有效，但 \begin{figure}[htbp] 无效

> ID：12941711
> 
> 赞同：4
> 
> 时间：2012-10-17T19:17:04.540
> 
> 标签：latex

我想将 png 文件插入到我的文档中。

基本上，像这样，它可以工作（在调用'float'之后），

```
\begin{figure}[H]
  \begin{center}
      \includegraphics{myfigure}
    \caption{short caption}{VERY LONG FIGURE LEGEND}
    \label{fig:myfigure}
  \end{center}
\end{figure} 
```

但像那样，它没有，

```
\begin{figure}[htbp!]
  \begin{center}
      \includegraphics{myfigure}
    \caption{short caption}{VERY LONG FIGURE LEGEND}
    \label{fig:myfigure}
  \end{center}
\end{figure} 
```

这对我来说很奇怪；显然我也调用`\usepackage{graphicx}`了，因为没有它，它一开始就不起作用。有什么建议可能是什么问题？

**更新：找到解决方案：**

我在[http://anthony.liekens.net/index.php/LaTeX/SubscriptAndSuperscriptInTextMode中定义了 \textsuperscript 宏](http://anthony.liekens.net/index.php/LaTeX/SubscriptAndSuperscriptInTextMode)

[在 ^ 和 _ 宏之后发生](https://stackoverflow.com/questions/2497047/figures-occurring-after-and-macros-was-latex-limitation)的图中勾画了一个修复（是：LaTeX 限制？） ，它似乎对我有用

干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:04:31.410

我不能在这里测试它，但我认为这种组合`htbp`是`!`不允许的。`!`定义 LaTeX 应该听给定的放置说明符并按照您指定的方式放置图形。你`htbp!`对 LaTeX 说类似

> 将我的图像放在这里、顶部、底部或特殊页面上。做这一切！

我认为你应该选择`htbp`or `h!`, `t!`, `b!`or `p!`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:34:29.267

**找到了解决方案：**

我在[http://anthony.liekens.net/index.php/LaTeX/SubscriptAndSuperscriptInTextMode中定义了 \textsuperscript 宏](http://anthony.liekens.net/index.php/LaTeX/SubscriptAndSuperscriptInTextMode)

[在 ^ 和 _ 宏之后发生](https://stackoverflow.com/questions/2497047/figures-occurring-after-and-macros-was-latex-limitation)的图中勾画了一个修复（是：LaTeX 限制？） ，它似乎对我有用

# asp.net - 在网站中查找从未使用过的图像

> ID：12941712
> 
> 赞同：0
> 
> 时间：2012-10-17T19:17:08.500
> 
> 标签：asp.net, html, performance, image, optimization

如何检测网站中从未使用过的图像，以提高整个内容的加载速度？..提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:29:21.810

如果图像从未在 html 中使用或引用，则浏览器不会下载该图像。

即使它们不在您的主机上，它们也只会像存储一样坐在那里，而不会影响页面时间的速度。

这是加载时间优化的一个很好的参考。

[http://sixrevisions.com/web-development/site-speed-performance/](http://sixrevisions.com/web-development/site-speed-performance/)

1.  尽可能推迟加载内容
2.  使用外部 JS 和 CSS 文件
3.  使用缓存系统
4.  避免在 HTML 中调整图像大小
5.  停止使用图像显示文本
6.  使用正确的文件格式优化图像大小
7.  优化编写代码的方式
8.  在文档末尾加载 JavaScript
9.  使用内容交付网络 (CDN)
10.  优化网页缓存

# ios - 带有设计的 Heroku 上的 Rails 3.2 应用程序：无法使用 Mobile Safari 登录

> ID：12941714
> 
> 赞同：2
> 
> 时间：2012-10-17T19:17:13.123
> 
> 标签：ios, ruby-on-rails-3, devise, mobile-safari

我已经构建了一个简单的 rails 应用程序并将其部署到 heroku。该应用程序使用设计进行身份验证。在开发和生产环境中一切正常，当尝试通过 iOS 上的 Mobile Safari 浏览器登录时接受。

Heroku 日志显示以下内容：

```
2012-10-17T18:56:52+00:00 app[web.1]: Started POST "/users/sign_in" for 87.123.175.106 at 2012-10-17 20:56:52 +0200
2012-10-17T18:56:52+00:00 app[web.1]: Processing by Devise::SessionsController#create as HTML
2012-10-17T18:56:52+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"SHHVgAxRFJ8VFu2cnbh/YGn6s6q0L9Mnp24x9Whu2mk=", "user"=>{"name"=>"test", "password"=>"[FILTERED]"}, "commit"=>"anmelden"}
2012-10-17T18:56:52+00:00 app[web.1]: WARNING: Can't verify CSRF token authenticity
2012-10-17T18:56:53+00:00 app[web.1]: Redirected to http://xxxxxxxx.herokuapp.com/ 
```

其他 iOS 浏览器（例如 Opera）不会出现此问题。我没有做任何定制的东西来设计（除了添加用户名），它几乎是开箱即用的。

我已经阅读了几篇文章，其中模糊地解决了 iOS 和 CSRF 令牌的问题，但我对 Rails 很陌生，并不真正知道如何解决这个问题。有人可以帮忙吗？

更新：

如[本文](https://stackoverflow.com/questions/11619683/session-nil-with-rails-3-2-6-and-authlogic-3-1-3/11654771#11654771)`protect_from_forgery`所述，我在 application_controller.rb 和 application.html.erb 中注释掉了`csrf_meta_tags`。另外，我添加`:domain => :all`到 config/session_store.rb。

没有任何帮助。显然，我不再收到`Can't verify CSRF token authenticity`错误消息，但出现以下日志：

```
2012-10-18T18:19:03+00:00 app[web.1]: Started POST "/users/sign_in" for 87.123.130.136 at 2012-10-18 20:19:03 +0200
2012-10-18T18:19:03+00:00 app[web.1]: Processing by Devise::SessionsController#create as HTML
2012-10-18T18:19:03+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"Q+fF+9Sj2Q+X2VV34Jkrt1K8C3u4/NB6YC3yslYjkyQ=", "user"=>{"name"=>"test", "password"=>"[FILTERED]"}, "commit"=>"anmelden"}
2012-10-18T18:19:03+00:00 heroku[router]: POST pacific-beyond-5428.herokuapp.com/users/sign_in dyno=w
eb.1 queue=0 wait=0ms service=783ms status=302 bytes=107
2012-10-18T18:19:03+00:00 app[web.1]: Redirected to http://pacific-beyond-5428.herokuapp.com/
2012-10-18T18:19:03+00:00 app[web.1]: Completed 302 Found in 577ms (ActiveRecord: 0.0ms)
2012-10-18T18:19:04+00:00 app[web.1]: 
2012-10-18T18:19:04+00:00 app[web.1]: 
2012-10-18T18:19:04+00:00 app[web.1]: Started GET "/" for 87.123.130.136 at 2012-10-18 20:19:04 +0200
2012-10-18T18:19:04+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-10-18T18:19:04+00:00 app[web.1]: Completed 401 Unauthorized in 0ms
2012-10-18T18:19:04+00:00 heroku[router]: GET pacific-beyond-5428.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=12ms status=302 bytes=120
2012-10-18T18:19:04+00:00 app[web.1]: 
2012-10-18T18:19:04+00:00 app[web.1]: Started GET "/users/sign_in" for 87.123.130.136 at 2012-10-18 20:19:04 +0200
2012-10-18T18:19:04+00:00 app[web.1]: Processing by Devise::SessionsController#new as HTML
2012-10-18T18:19:04+00:00 app[web.1]: 
2012-10-18T18:19:04+00:00 app[web.1]:   Rendered layouts/_navigation.html.erb (1.4ms)
2012-10-18T18:19:04+00:00 app[web.1]:   Rendered devise/shared/_links.html.erb (0.7ms)
2012-10-18T18:19:04+00:00 app[web.1]:   Rendered devise/sessions/new.html.erb within layouts/application (25.8ms)
2012-10-18T18:19:04+00:00 app[web.1]:   Rendered layouts/_messages.html.erb (0.4ms)
2012-10-18T18:19:04+00:00 app[web.1]:   Rendered layouts/_sidebar.html.erb (0.3ms)
2012-10-18T18:19:04+00:00 app[web.1]: Completed 200 OK in 33ms (Views: 31.9ms | ActiveRecord: 0.0ms)
2012-10-18T18:19:04+00:00 heroku[router]: GET pacific-beyond-5428.herokuapp.com/users/sign_in dyno=web.1 queue=0 wait=0ms service=44ms status=200 bytes=2361
2012-10-18T18:19:04+00:00 app[web.1]: 
2012-10-18T18:19:04+00:00 app[web.1]: 
2012-10-18T18:19:04+00:00 app[web.1]: Started GET "/assets/foundation/app.js" for 87.123.130.136 at 2012-10-18 20:19:04 +0200
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/app.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Served asset /foundation/app.js - 304 Not Modified (282ms)
2012-10-18T18:19:05+00:00 heroku[router]: GET pacific-beyond-5428.herokuapp.com/assets/foundation/app.js dyno=web.1 queue=0 wait=0ms service=297ms status=304 bytes=0
2012-10-18T18:19:05+00:00 app[web.1]: 
2012-10-18T18:19:05+00:00 app[web.1]: 
2012-10-18T18:19:05+00:00 app[web.1]: Started GET "/assets/foundation/index.js" for 87.123.130.136 at 2012-10-18 20:19:05 +0200
2012-10-18T18:19:05+00:00 heroku[router]: GET pacific-beyond-5428.herokuapp.com/assets/foundation/index.js dyno=web.1 queue=0 wait=0ms service=905ms status=304 bytes=0
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/modernizr.foundation.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.placeholder.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.alerts.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.accordion.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.buttons.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.tooltips.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.forms.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.tabs.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.navigation.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.topbar.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.reveal.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.orbit.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/jquery.foundation.mediaQueryToggle.js  (0ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Compiled foundation/index.js  (86ms)  (pid 2)
2012-10-18T18:19:05+00:00 app[web.1]: Served asset /foundation/index.js - 304 Not Modified (616ms) 
```

有人出主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:06:51.600

我在 Heroku 日志中看到相同的生产症状时遇到了同样的错误：

*   `WARNING: Can't verify CSRF token authenticity`
*   以及登录尝试后的 401 Unauthorized 重定向。

我的解决方案是添加`domain: :all`到`session_store`in `config/initializers/session_store.rb`。

# java - 在 antlr 中，有没有办法在 AST 模式下获取 CommonTree 的解析文本？

> ID：12941718
> 
> 赞同：5
> 
> 时间：2012-10-17T19:17:20.737
> 
> 标签：java, antlr

一个简单的例子：

```
(grammar):

stat: ID '=' expr NEWLINE -> ^('=' ID expr)

expr: atom '+' atom -> ^(+ atom atom)

atom: INT | ID

...

(input text): a = 3 + 5 
```

'3 + 5' 对应的 CommonTree 包含一个 '+' 标记和两个子 (3, 5)。

此时，恢复解析成这棵树（'3 + 5'）的原始输入文本的最佳方法是什么？

我已经获得了对象中各个标记的文本、位置和行号`CommonTree`，因此理论上可以确保仅丢弃空白标记并使用此信息将它们拼凑在一起，但它看起来容易出错。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:27:28.563

> 有一个更好的方法吗？

更好，我不知道。当然，还有另*一种*方式。你决定什么更好。

另一种选择是创建自定义 AST 节点类（和相应的节点适配器）并在解析期间将匹配的文本添加到此 AST 节点。这里的技巧是不使用`skip()`，它会从词法分析器中丢弃令牌，而是将其放在`HIDDEN`通道上。这实际上是相同的，但是，这些（隐藏的）标记匹配的文本在解析器中仍然可用。

一个快速演示：将所有这 3 个文件放在一个名为的目录中`demo`：

## 演示/Tg

```
grammar T;

options {
  output=AST;
  ASTLabelType=XTree;
}

@parser::header {
  package demo;
  import demo.*;
}

@lexer::header {
  package demo;
  import demo.*;
}

parse
 : expr EOF -> expr
 ;

expr
@after{$expr.tree.matched = $expr.text;}
 : Int '+' Int ';' -> ^('+' Int Int)
 ;

Int
 : '0'..'9'+
 ;

Space
 : ' ' {$channel=HIDDEN;}
 ; 
```

## 演示/XTree.java

```
package demo;

import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;

public class XTree extends CommonTree {

  protected String matched;

  public XTree(Token t) {
    super(t);
    matched = null;
  }
} 
```

## 演示/Main.java

```
package demo;

import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;

public class Main {

  public static void main(String[] args) throws Exception {
    String source = "12    +  42 ;";
    TLexer lexer = new TLexer(new ANTLRStringStream(source));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    parser.setTreeAdaptor(new CommonTreeAdaptor(){
      @Override
      public Object create(Token t) {
        return new XTree(t);
      }
    }); 
    XTree root = (XTree)parser.parse().getTree();
    System.out.println("tree    : " + root.toStringTree());
    System.out.println("matched : " + root.matched);    
  }
} 
```

您可以通过打开 shell 并 cd-ing 到包含该目录的`demo`目录并执行以下命令来运行此演示：

```
java -cp demo/antlr-3.3.jar org.antlr.Tool demo/Tg
javac -cp 演示/antlr-3.3.jar 演示/*.java
java -cp .:demo/antlr-3.3.jar demo.Main
```

这将产生以下输出：

```
树：（+ 12 42）
匹配：12 + 42；
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T20:10:16.003

另一种可能性是使用`TokenRewriteStream`它有几种`toString()`方法。

借用@Bart Kiers 的示例[Demo/Main.java](https://stackoverflow.com/a/12942825/22876)

```
TokenRewriteStream tokens = new TokenRewriteStream(lexer)
TParser parser = new TParser(tokens);
...
tokens.toString(n.getTokenStartIndex(), n.getTokenStopIndex() + 1).trim() 
```

因此，给定解析树的任何节点“n”，如上所述对其调用 toString() 将产生“生成”该节点的字符串。

# shopify - 使用 API 查询客户

> ID：12941719
> 
> 赞同：2
> 
> 时间：2012-10-17T19:17:20.897
> 
> 标签：shopify

使用命令行 shopify 应用程序

```
include ShopifyAPI
Customer.first(:params => {:query => "email:foo@fizz.com", :fields => "email"})

=> #<ShopifyAPI::Customer:0x00000100b75448 @attributes={"email"=>"poohbear@gmail.com"}, @prefix_options={}, @persisted=true> 
```

我很好奇是否可以在您提供电子邮件的地方进行查询，结果是空集（未找到）或客户记录？无论我的查询是什么，我总是会收到客户记录。这使得很难确定客户是否存在于商店之外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:56:18.130

你打错了终点。在您尝试进行搜索 ( ) 时`Customer.first`查询索引端点 ( )。`admin/customers.json``admin/customers/search.json`

索引端点不理解查询参数，因此它会忽略它并获得常规索引。

要解决此问题，您需要指定您尝试访问的端点。[文档在此处](http://api.rubyonrails.org/classes/ActiveResource/CustomMethods.html#method-i-get)，[Shopify 特定示例在此处](https://github.com/Shopify/shopify_api/issues/17)。也在这里：

```
ShopifyAPI::Customer.find(:all, :from => :search, :params => { :q => "John" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T22:04:33.680

这是一篇旧帖子，但 Shopify 的文档参差不齐。您需要使用搜索 API 端点并且需要引用您正在搜索的电子邮件地址，例如

```
/admin/customers/search.json?query=email:"email@domain.com" 
```

如果您不引用电子邮件地址，您可能会收到很多类似的电子邮件地址。

请参阅[https://community.shopify.com/c/Shopify-APIs-SDKs/Find-a-Customer-by-Email-via-API-Call/td-p/141661](https://community.shopify.com/c/Shopify-APIs-SDKs/Find-a-Customer-by-Email-via-API-Call/td-p/141661)

# xml - 根据高度和文本创建容器宽度和字体大小

> ID：12941724
> 
> 赞同：0
> 
> 时间：2012-10-17T19:17:39.057
> 
> 标签：xml, svg

我有以下变量：

**容器高度：** 3cm
**文本：** John Smith
**字体类型：** Times New Roman

基于这些变量，我想创建一个 svg 文档，其中呈现的文本适合高度，宽度适合呈现的文本.

所以在我的情况下，看起来像这样（手动完成）： ![在此处输入图像描述](../Images/4a5c57ad234dff23f75d23c6849ffc34.png)

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="" height="3cm" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <text x="" y="" font-size="" font-family="Times New Roman" >
  John Smith
  </text>
</svg> 
```

这有可能吗？这是我第一次处理 SVG。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:12:45.980

我唯一可以建议的是使用 javascript 根据呈现的文本调整文档的大小。在我的脑海中，您可以执行以下操作：

```
var elem = document.getElementById(//text id);
var height = elem.getBBox().height;
var width = elem.getBBox().width;

var svg_elem = document.getElementById(//svg id);
svg_elem.setAttributeNS(null, "width", width); 
svg_elem.setAttributeNS(null, "height", height); 
```

就 Javascript 而言，您可以将其放在您的 html 文件中，并在加载 DOM 后立即运行它。

# http - 在nodejs中没有收到数据时如何处理http.get（）？

> ID：12941732
> 
> 赞同：0
> 
> 时间：2012-10-17T19:18:01.533
> 
> 标签：http, node.js

假设我有一个通过给定 ID 返回客户信息的服务。如果没有找到，我返回 null。

我的应用程序这样调用此服务：

```
http.get('http://myserver/myservice/customer/123', function(res) {
    res.on('data', function(d) {
        callback(null, d);
    });
}).on('error', function(e) {
    callback(e);
}); 
```

目前我的服务响应 200 但没有数据。

没有数据返回时如何处理？

我应该更改它以返回不同的 http 代码吗？在这种情况下如何处理？我尝试了许多不同的方法，但都没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:31:46.023

首先，重要的是要记住这`res`是一个*数据流*；就目前而言，您的代码可能会`callback`多次调用数据块。（`data`每次有新数据进入时都会触发该事件。）如果您的方法一直到此为止，那只是因为响应足够小以至于响应有效负载没有分成多个块。

为了让您的生活更轻松，请使用处理缓冲 HTTP 响应正文并允许您获得*完整*响应的库。在 npm 上快速搜索会显示[请求](https://npmjs.org/package/request)包。

```
var request = require('request');
request('http://server/customer/123', function (error, response, body) {
  if (!error && response.statusCode == 200) {
      callback(null, body);
  } else {
      callback(error || response.statusCode);
  }
}); 
```

* * *

就您的服务而言，如果未找到客户 ID，则**返回 404** - 实际上没有这样的客户时返回 200 OK 在语义上是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:27:23.953

使用[客户端响应`'end'`事件](http://nodejs.org/docs/latest/api/http.html#http_event_end_1)：

```
 //...
    res.on('data', function(d) {
        callback(null, d);
    }).on('end', function() {
        console.log('RESPONSE COMPLETE!');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:48:41.420

我终于找到了解决问题的方法：

```
http.get('http://myserver/myservice/customer/123', function(res) {
    var data = '';

    response.on('data', function(d) {
        data += d;
    });

    response.on('end', function() {
        if (data != '') {
            callback(null, data);
        }
        else {
            callback('No customer was found');
        } 
    });
}).on('error', function(e) {
    callback(e);
}); 
```

这解决了问题，但我也将采用 josh3736 的建议，并在找不到客户时在我的服务上返回 404。

# ios - 在没有预览屏幕的 iOS 中拍照

> ID：12941739
> 
> 赞同：0
> 
> 时间：2012-10-17T19:18:22.027
> 
> 标签：ios, camera, uiimagepickercontroller

有没有办法使用 UIImagePickerController 来拍照，而无需每张照片都进入预览屏幕？

我需要我的用户能够拍摄多张照片，现在他们必须点击按钮打开相机，点击快门按钮，然后点击预览屏幕上的使用按钮。有没有办法切断这最后一步并完全跳过预览屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:24:56.853

这是一个[使用 AVFoundation 的教程](http://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/)，您可以使用实时相机预览来拍摄照片，该预览*的样式和大小可以随心所欲*，而无需烦人的确认视图。

# azure - 如何在天蓝色队列中获取消息编号

> ID：12941740
> 
> 赞同：-1
> 
> 时间：2012-10-17T19:18:24.140
> 
> 标签：azure, azure-queues

请建议如何计算 azure 队列中有多少消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:22:54.623

[CloudQueue.RetrieveApproximateMessageCount()](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudqueue.retrieveapproximatemessagecount.aspx)怎么样

# ember.js - 事务提交后如何维护数据变化，包括设置belongsTo关系

> ID：12941744
> 
> 赞同：1
> 
> 时间：2012-10-17T19:18:31.063
> 
> 标签：ember.js, ember-data

我很难使用 ember 数据设置 belongsTo 关系。我有一个[jsfiddle 示例](http://jsfiddle.net/sohara/2XHZ2/)来演示。我最初的问题是我收到以下错误：

`Uncaught Error: <DS.StateManager:ember5035> could not respond to event loadedData in state rootState.loaded.updated.inFlight.`

这只发生在我使用 select 更新模型上的 belongsTo 关系时。那是使用 Ember Data 内置的 RestAdapter。在当前示例中，我正在使用 FixtureAdapter 并且似乎无法保留任何更改（如果您查看小提琴并编辑其中一本书的名称，您会看到它恢复为原始名称）？一旦适配器模拟了“服务器响应”，它们似乎就会恢复？有没有办法模拟正确的服务器响应？

另外，我想知道我的问题是否是我如何设置数据存储事务的结果。我在控制器中使用以下方法：

```
App.EditBookController = Ember.ObjectController.extend({
  enterEditing: function() {
    this.transaction = App.router.get('store').transaction();
    this.transaction.add(this.get('content'));
  },
  updateRecord: function() {
    this.transaction.commit();
    this.transaction = null;
    App.router.transitionTo('books');
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:43:34.703

好的，您正在使用非常边缘版本的 ember-data。这很棒，但我也必须让自己更新。在@tchak 的帮助下，我可以开始让它工作：

[http://jsfiddle.net/Sly7/2XHZ2/45/](http://jsfiddle.net/Sly7/2XHZ2/45/)

您会注意到我第一次使用 App.Book.find() 来加载固定装置，而 App.Book.all() 似乎是一个实时数组，因此会保持更新。

我必须更进一步才能使选择工作。

好的，我目前的最后一次尝试...... [http://jsfiddle.net/Sly7/2XHZ2/57/](http://jsfiddle.net/Sly7/2XHZ2/57/)

**最后编辑**通过将 RESTSerializer 添加到 FixtureAdapter 使其工作。见[http://jsfiddle.net/Sly7/2XHZ2/61/](http://jsfiddle.net/Sly7/2XHZ2/61/)

# gwt - gwt 可以像 maven 那样分析依赖关系吗？

> ID：12941747
> 
> 赞同：1
> 
> 时间：2012-10-17T19:18:48.910
> 
> 标签：gwt, dependencies, inheritance, gwt-maven-plugin

如何让 GWT 提供与 **mvn dependency:analyze**相同的依赖洞察？

Maven 可以报告依赖项（使用的未声明的依赖项和未使用的已声明的依赖项）。我想让 GWT 做同样的事情，因为 在我的 gwt.xml 中确定丢失的*继承证明是困难的。*

系统有没有分析依赖状态的好方法？

谢谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:15:24.767

我不知道有任何这样的工具，虽然我认为分析和报告 GWT 依赖关系的实用程序可能很有趣，但我也认为很难定义好。

## 使用的、未声明的依赖项

在尝试解决这个问题之前，问题是什么？在 maven 中，这个类别意味着一个类是从一个不直接依赖的依赖项加载的，而是传递加载的。这开始涉及传递依赖（存在于 GWT 中）和作用域（不存在）的整个问题。如果 A 在 C 中使用了一个类，但只依赖于 B，而 B 又依赖于 C，这将列在“已使用的、未声明的依赖项”列表中。

然而，在 GWT 中，我们很少列出我们直接使用的每一个依赖项。`com.google.gwt.user.RemoteService`相反，我们假设传递依赖将保持传递 -只要我们已经`com.google.gwt.user.User`列出，我们就不会费心为 RPC 继承。

那么我们如何判断我们是否使用了未声明的依赖项，即当我们执行 a 时会发出警告的那种`gwt:compile`？也许这样的工具可以找到`.gwt.xml`类路径上的每个文件，并通读其`<source>`和`<super-source>`规则以查找我们正在使用的类被声明的地方？或者在调用`GWT.create`某些东西并返回非具体类型的情况下，它可以查找`<replace-with>`和`<generate-with>`规则。只要您的代码已经在 J​​ava 中编译，类就在类路径中，但您仍然会冒着风险，即当类存在时，`.java`或`.gwt.xml`文件可能不存在。

## 未使用的、已声明的依赖项

这似乎是一个更简单的问题 - 分析我们正在继承的模块，并查看它们是否有任何可以删减的模块。不幸的是，正如上面的讨论所指出的，我们不能只寻找类和它们在哪个包中，哪些`<source>`和`<super-source>`元素未使用——我们还需要寻找`<replace-with>`和`<generate-with>`规则——考虑类似的东西`com.google.gwt.user.RemoteService`，它只添加一个规则和一些配置细节，甚至`com.google.gwt.user.RemoteServiceObfuscateTypeNames`，它只修改了 RemoteService 模块的单个设置。如果 RemoteServiceObfuscateTypeNames 被删除，一切仍然可以编译，但现在可能会有关于编译到应用程序中的 RPC 类的信息，而这些信息是您不希望出现的。

考虑到这些，也许这样的工具可以观察当前构建中所有可能的重新绑定规则，以及所有配置设置、属性等，并查看这些规则中是否有任何规则在`gwt:compile`进程中未使用。然后，指出哪些模块有未使用的部分，如果有任何模块（及其所有继承的模块）未使用，则可以向用户显示它可以被删除。

更重要的一点是：在定义`<inherits>`语句时，顺序很重要。如果我添加一个继承`com.google.gwt.logging.Logging`，然后跟随它`com.google.gwt.logging.LoggingDisabled`，日志记录类将在源路径上并编译，但没有效果。但是，如果它们以相反的方式排序，那么它们不仅会在源路径上，而且都会正常工作。因此，对使用和未使用的模块的任何分析都需要包括传递继承语句及其顺序。

# python - Python 变量范围和类

> ID：12941748
> 
> 赞同：7
> 
> 时间：2012-10-17T19:18:51.817
> 
> 标签：python, python-2.7

在 Python 中，如果我定义一个变量：

```
my_var = (1,2,3) 
```

并尝试在`__init__`类的功能中访问它：

```
class MyClass:
    def __init__(self):
        print my_var 
```

我可以访问它并打印`my_var`而无需说明（全局 my_var）。

但是，如果我紧随`my_var`其后`class MyClass`，我会得到 scope error `(no global variable found)`。

这是什么原因？我该怎么做？我在哪里可以阅读有关此内容的信息？我确实阅读了 Python Class 页面，但没有遇到它的解释。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T19:42:13.730

补充@mgilson 的答案：请注意，Python 类变量在类实例之间共享。而且这种行为可能非常出乎意料并且看起来很奇怪。在实践中，它是这样工作的：

```
class MyClass(object):
    my_var = 10

    def __init__(self):
        print(self.my_var)

m1 = MyClass()
print(m1.my_var)
>>> 10          # this is fine

MyClass.my_var = 20
print(m1.my_var)
>>> 20          # WTF? :) --> shared value

m2 = MyClass()
print(m2.my_var)
>>> 20          # this is expected

m1.my_var = 30
print(MyClass.my_var)
>>> 20          # this is also expected

MyClass.my_var = 40 
print(m1.my_var)
>>> 30           # But WHY? Isn't it shared? --> 
                 # The value WAS shared until m1.my_var = 30 has happened.

print(m2.my_var)
>>> 40           # yep m2.my_var's value is still shared :) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T19:20:17.850

当你把它放在后面`class MyClass`时，它就变成了一个类属性，你可以通过`MyClass.my_var`或`self.my_var`从类中访问它（前提是你没有创建同名的*实例变量）。*

这是一个小演示：

```
my_var = 'global'
class MyClass(object):
   my_var = 'class' 
   def __init__(self):
      print my_var #global
      print MyClass.my_var #class
      print self.my_var #class -- Only since we haven't set this attribute on the instance
      self.my_var = 'instance' #set instance attribute.
      print self.my_var #instance
      print MyClass.my_var #class 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T19:21:09.600

如果你写：

```
class MyClass(object):
    my_var = (1, 2, 3) 
```

您正在定义 的属性`MyClass`，而不是变量。那么，在您的`__init__`方法中，它是`MyClass.my_var`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T19:20:58.993

一旦它在`class`定义中，它就不再是全局的，它现在在类对象的命名空间中。您可以使用 inside 访问`self.my_var`它`__init__`...

# testing - 向我的客户展示我的系统的服务器？

> ID：12941749
> 
> 赞同：0
> 
> 时间：2012-10-17T19:18:52.733
> 
> 标签：testing, webserver, temporary, web-testing

我开发了一个网站，并且在我的本地主机上运行良好。我想通过将它上传到服务器上一两个小时来向我的客户展示它，以便我的客户可以直接访问和使用它。

有没有办法在我的电脑上设置一个临时服务器，或者有没有免费的服务器可以让我的系统上传 2 到 3 个小时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:24:16.170

您可能应该有一个公司服务器和网站来宣传您的公司。

您可以将客户网站放在您的公司网站上，网址为[http://www.company.com/demonstration/client](http://www.company.com/demonstration/client)（例如）。

您可以将链接通过电子邮件发送给您的客户，并且由于它是您的网站，因此您可以控制访问。

2 或 3 天可能比 1 或 2 小时更合适。

# grails - 反序列化期间的 ClassNotFound

> ID：12941750
> 
> 赞同：1
> 
> 时间：2012-10-17T19:18:54.137
> 
> 标签：grails

我正在尝试使用 jason-io 来序列化/反序列化 MyClass 实例。jason-io 库有两个类，JsonWriter 和 JsonReader，分别执行序列化和反序列化。这两个操作都是从 Grails 控制器调用的。

在序列化过程中，会创建一个 JSON 对象，其中包含类名等。反序列化在 Class.forName("...MyClass") 处失败。类名是正确的。

我追踪了问题，发现MyClass的类加载器是（java.net）URLClassLoader，而JsonReader类加载器是（org.codehaus.groovy.grails.cli.support）GrailsRootLoader。不过，我不知道如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:54:35.587

这可能与[groovy 中的一个已知问题有关](http://jira.codehaus.org/browse/GROOVY-1627)。该错误报告中的解决方案是指定类加载器：

```
def file = new File('thingy.txt')
file.withObjectInputStream(getClass().classLoader){ ois ->
    def yourObject = ois.readObject ( )
} 
```

*withObjectInputStream*方法也可以在其他类的 groovy 中使用，例如，我成功地将其与 GZIPInputStream 的实例一起*使用*。

# php - 通过 PHP 访问 Webmail

> ID：12941752
> 
> 赞同：3
> 
> 时间：2012-10-17T19:18:55.780
> 
> 标签：php, cpanel, pop3, webmail

我有 Cpanel 和域。我可以通过转到 Cpanel 中的电子邮件帐户选项来创建电子邮件帐户。我的问题是如何从 php Web 应用程序在 Cpanel 中创建电子邮件帐户？我想要一个适当的指南。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:59:21.060

看一下这个。它用于 gmail 帐户。为您的帐户配置：

```
/* connect to gmail */
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = 'username@gmail.com';
$password = 'password here';

/* try to connect */
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' .   imap_last_error());

/* grab emails */
$emails = imap_search($inbox,'ALL');

/* if emails are returned, cycle through each... */
   if($emails) {

/* begin output var */
$output = '';

/* put the newest emails on top */
rsort($emails);

/* for every email... */
foreach($emails as $email_number) {

    /* get information specific to this email */
    $overview = imap_fetch_overview($inbox,$email_number,0);
    $message = imap_fetchbody($inbox,$email_number,2);

    /* output the email header information */
    $output.= '<div class="toggler '.($overview[0]->seen ? 'read' : 'unread').'">';
    $output.= '<span class="subject">'.$overview[0]->subject.'</span> ';
    $output.= '<span class="from">'.$overview[0]->from.'</span>';
    $output.= '<span class="date">on '.$overview[0]->date.'</span>';
    $output.= '</div>';

    /* output the email body */
    $output.= '<div class="body">'.$message.'</div>';
}

echo $output;
} 

/* close the connection */
imap_close($inbox); 
```

我想这会对你有所帮助。Thanks.razin223

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:14:08.527

请检查一下。我希望它会帮助你你想要什么。

[http://www.zubrag.com/scripts/cpanel-create-email-account.php](http://www.zubrag.com/scripts/cpanel-create-email-account.php)

# c# - 使用 Linq lambdas，如何获得双键排序列表中的第一项？

> ID：12941757
> 
> 赞同：1
> 
> 时间：2012-10-17T19:19:30.237
> 
> 标签：c#, linq, sorting, lambda

我知道这很简单，但我的大脑现在正在欺骗我。如果我们有一个包含属性 GroupSortIndex 和 ItemSortIndex（在组内）的平面对象列表，并且我们想要找到列表中的第一项，那么 Linq/lambda 是什么？

我能想到的只是（元，而不是文字代码......）

```
var soughtItem = Source.OrderBy(ItemSortIndex).OrderBy(GroupSortIndex).ToList()[0] 
```

...但是出于某种原因，这对我来说看起来很不对劲。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:21:16.750

阅读帖子：[默认扩展方法](http://pranayamr.blogspot.in/2011/04/default-extension-methods.html)以获取 first 和 firstordefault 之间的区别

您可以使用 FirstOrDefualt() 或 First() 函数

```
var soughtItem = Source.OrderBy(ItemSortIndex).
                   ThenBy(GroupSortIndex).FirstOrDefualt();
if(soughtItem !=null)//advantage of using firstordefault
{
} 
```

它更好用`FirstOrDefualt`，因为如果没有数据，它将返回 null 而不是 excetipn

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T19:20:59.283

```
var soughtItem = Source
    .OrderBy(ItemSortIndex)
    .ThenBy(GroupSortIndex).First(); 
```

如果`ItemSortIndex`和`GroupSortIndex`是属性而不是函数，那么您需要：

```
var soughtItem = Source
    .OrderBy(i => ItemSortIndex)
    .ThenBy(i => GroupSortIndex).First(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T19:21:27.007

您可以使用`IOrderedEnumerable.ThenBy`（注意： an`IOrderedEnumerable`从 中返回`IEnumerable.OrderBy`）：

```
var firstItem = source.OrderBy(s => s.GroupSortIndex)
                      .ThenBy(s => s.ItemSortIndex)
                      .First(); 
```

这首先按组排序，然后按项目排序。`FirstOrDefault`如果序列可以为空，则应使用。否则`First`引发异常。

（我假设您想先按组排序，然后按项目排序，因为 ItemSortIndex 是组内项目的索引（如前所述））

# java - 对本体是“数据驱动”的更新本体感到困惑

> ID：12941765
> 
> 赞同：2
> 
> 时间：2012-10-17T19:19:44.200
> 
> 标签：java, jena, ontology, owl, triples

我在这里读到*，本体（本质上是 RDF）是数据驱动的，因为可以使用小型本体并将其用于应用程序，然后......将其他概念集成到同一本体中以使其更健壮。

我担心的是某个三元组在未来如何变得更加强大？例如。

```
School : Class
Properties:
has Name : String
has Area : float
has Type : String // can be** , choices are Specialist, Faith, Free etc. 
```

此时，实例化 School 会给我们...

```
School X : School
has Name = School X : String
has Area = 20000.00 : float
has Type = Specialist : String                    <<-------------------------- 
```

我感兴趣的三元组是

```
SchoolX  hasType Specialist^^string 
```

如果后来我发现“专家”这个词下面有几个属性，所以我决定创建一个专家：类

```
Specialist : Class                                <<--------------------------
has Specialization : String // can be**
followsNationalCurriculum : boolean
...and so forth 
```

说，

```
MusicSpc : Specialist
has Specialization = Music : String
followsNationalCurriculum = true
etc. 
```

我的问题是。

1.  对于那些使用 hasType=Specialist^^string 的人，您如何实现旧本体中的字符串文字“Specialist”必须连接到新本体中的 Specialist(Cls) 实例？你是在耶拿还是 OWL/RDF 做的？
2.  关于 (1)，我知道在 Java 中重载方法有时会很有用。重载对本体有好处吗？st hasType：字符串，hasType：专家（Cls）？我是否在 OWL/RDF 中声明 URI=namespace#hasType 既是数据类型又是对象属性？

我希望有人能在这方面帮助我。

参考：

*   [https://www.mkbergman.com/483/advantages-and-myths-of-rdf/](https://www.mkbergman.com/483/advantages-and-myths-of-rdf/)
*   [https://www.gov.uk/types-of-school/overview](https://www.gov.uk/types-of-school/overview)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:36:46.297

关于您的第一个问题，有一些方法可以更新您的数据，例如，您可以使用 SPARQL 1.1 更新操作来更新您的数据，在这种特定情况下：

```
DELETE { ?x :hasType "Specialist"@en }
INSERT { ?x :hasType :Specialist } 
WHERE { ?x :hasType "Specialist"@en } 
```

至于您的第二个问题：您可以在 RDF(S) 中从这个意义上“重载”属性：任何属性都可以将字符串和单个资源作为值。这样做是否明智则是另一回事，因为有效查询和处理数据将变得更加困难。你可能最好不要重载它 - 也因为在 OWL（至少 OWL DL）中，你不能这样做：属性可以是 DatatypeProperty 或 ObjectProperty，但不能同时是两者。

一般来说：如果您不确定属性是否应该具有字符串值或更复杂的值，请从一开始就选择一个复杂的值。这样一来，您的本体被设计为在未来可扩展，您不必太担心跳过箍来更新。在您的示例案例中，您已经知道您的值集`:hasType`是一组固定的*types*，即事物的类。不要将字符串值用于此类构造，而是为这些事物引入实际的类

# google-bigquery - 在 bigquery 中使用一年中的一周和 subsquend

> ID：12941769
> 
> 赞同：2
> 
> 时间：2012-10-17T19:19:53.590
> 
> 标签：google-bigquery

我需要每周显示不同的用户。我有一个日期访问列和一个用户 ID，它是一个有 10 亿行的大表。我可以将日期列从 CSV 更改为年、月、日列。但是我如何从查询中推断出一周。我可以从 CSV 计算星期，但这是一个很大的过程步骤。

我还需要显示有多少不同的用户日复一日地访问，寻找解决方法，因为没有日期类型。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-19T23:44:57.563

要获得一年中的星期数：

```
SELECT STRFTIME_UTC_USEC(TIMESTAMP('2015-5-19'), '%W')
20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T21:53:54.843

如果您将日期作为时间戳（即自纪元以来的微秒），您可以使用 UTC_USEC_TO_DAY/UTC_USEC_TO_WEEK 函数。或者，如果您有一个 iso 格式的日期字符串（例如“2012/03/13 19:00:06 -0700”），您可以调用 PARSE_UTC_USEC 将字符串转换为时间戳，然后使用它来获取星期或日期。

要查看示例，请尝试：

```
SELECT LEFT((format_utc_usec(day)),10) as day, cnt 
FROM (
    SELECT day, count(*) as cnt 
    FROM (
        SELECT UTC_USEC_TO_DAY(PARSE_UTC_USEC(created_at)) as day 
        FROM [publicdata:samples.github_timeline])
    GROUP BY day 
    ORDER BY cnt DESC) 
```

要显示星期，只需更改`UTC_USEC_TO_DAY(...)`为`UTC_USEC_TO_WEEK(..., 0)`（末尾的 0 表示星期从星期日开始）。[有关更多信息，请参阅https://developers.google.com/bigquery/docs/query-reference](https://developers.google.com/bigquery/docs/query-reference)上的上述函数的文档 。

# xcode - 通过 Jenkins 运行 UI 自动化

> ID：12941779
> 
> 赞同：1
> 
> 时间：2012-10-17T19:20:45.573
> 
> 标签：xcode, jenkins, xcode-instruments

我在 Jenkins 的“执行 shell”命令中添加了一个 perl 脚本。这个 perl 脚本通过命令行启动 Instruments，运行 js 测试（我们使用 tuneup_js 框架）。当脚本统计其中一项测试时，jenkins 控制台输出与仪器输出的完全不同。有关 Jenkins 控制台给出的输出，请参见下文：

```
Oct 17 15:06:03 macserver.local instruments[7197] <Error>: CGImageCreateWithImageProvider: invalid image size: 0 x 0.
2012-10-17 15:08:10.312 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0x7c41ab0 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.316 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0xaa28be0 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.320 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0xaa2a5d0 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.324 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0xa4274e0 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.328 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0x7c433a0 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.332 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0x7c43c50 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.335 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0x7c44d90 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.339 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0x7c43340 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940>
2012-10-17 15:08:10.343 ScriptAgent[13266:13403] actionSheet:<UIAActionSheet_0x7c45ab0 uiaxElement=0x7c41a30 AXUIElementRef=0x7c41940> 
```

我可以看到测试在模拟器上完美运行。如果我通过 Instruments 运行相同的测试，我的输出将类似于：

```
2012-10-17 21:10:32 +0000 Start:
2012-10-17 21:10:32 +0000 Pass: 
2012-10-17 21:10:32 +0000 Start: 
2012-10-17 21:10:32 +0000 Issue: 
2012-10-17 21:10:32 +0000 Issue: 
2012-10-17 21:10:32 +0000 Pass: 
2012-10-17 21:10:32 +0000 Start: 
2012-10-17 21:10:32 +0000 Debug: target.setDeviceOrientation("3")
2012-10-17 21:10:33 +0000 Issue: 
2012-10-17 21:10:33 +0000 Debug: target.setDeviceOrientation("1")
2012-10-17 21:10:35 +0000 Debug: target.frontMostApp().mainWindow().scrollViews()[0].buttons()["t"].tap()
2012-10-17 21:10:36 +0000 Debug: target.setDeviceOrientation("3")
2012-10-17 21:10:38 +0000 Issue: 
```

我想要控制台的输出类似于上面的输出。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:16:21.327

我终于让它工作了！

问题出在运行测试的 perl 脚本中。

我没有使用 system($command)，而是使用了反勾号运算符。

我不知道为什么反引号运算符不会返回输出，也不知道为什么 system() 在这里工作。

# javascript - 使用相同名称定位多个输入字段

> ID：12941781
> 
> 赞同：0
> 
> 时间：2012-10-17T19:20:48.213
> 
> 标签：javascript, html

我有一些

```
<input type="text" name="price[]" value="100">
<input type="text" name="price[]" value="50">
<input type="text" name="price[]" value="10">
<input type="text" name="price[]" value="90"> 
```

我也有一个输入字段

```
<input type="text" name="Add" value=""> 
```

我想

1.  每个 price[] 输入字段旁边都有自己的添加按钮，它将从该特定 price[] 输入字段中获取值
2.  将添加输入字段中的值添加到其中
3.  最后更新该特定价格 [] 输入字段的值

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:35:41.950

遍历价格 [] 框以向它们添加按钮并将价格 [] 的值设置为按钮，像这样

```
<input type="text" name="price[]" value="100">
<input type="text" name="price[]" value="50">
<input type="text" name="price[]" value="10">
<input type="text" name="price[]" value="90">

<script type="text/javascript">
$(document).ready(function() {
    $('input[name="price[]"]').each(function(i) {
        $(this).after('<button class="additionButton" price="'+$(this).val()+'">'+$(this).val()+'</button>');
    });
    //click
    $(".additionButton").on('click',function() {
        //original price, set on load
        alert($(this).attr('price'));
        //price in the input-field before the button (could be changed, think this is the idea)
        alert($(this).prev('input').val());
    });
});
</script> 
```

其余的，我不确定你的意思，“添加”没有价值，你真的想要某种计算吗？但是试试自己，这至少是迭代。

# haskell - 如何使用darcs库查询补丁信息？

> ID：12941793
> 
> 赞同：11
> 
> 时间：2012-10-17T19:21:43.313
> 
> 标签：haskell, darcs

我想编写一个 Haskell 程序来查询有关 darcs 存储库的信息。我宁愿直接使用 darcs 库，而不是调用 darcs 可执行文件并解析结果。据说它[“](http://darcs.net/Library)正在进行大量工作”并且“缺乏稳定的 API”，但似乎可用。

我想我可以通过研究 darcsden 源代码来回答我的问题，例如，从[这个模块](http://hub.darcs.net/simon/darcsden/browse/src/DarcsDen/Handler/Repository/Changes.hs)开始，但我认为如果有知识的人提供评论介绍来补充这样的研究，这不仅对我有帮助。

所以，这里有一个具体的例子。

如何为给定文件计算影响它的最新补丁以及补丁的日期、作者和名称？如果您解释解决方案中使用的关键库函数，这将非常有用。

* * *

*编辑：*

这里有一些对不熟悉 darcs 源代码的人可能不明显的评论。我是从[Jason Dagit 的硕士论文](http://ir.library.oregonstate.edu/xmlui/bitstream/handle/1957/11180/thesis.pdf?sequence=1)中学到的，希望它们有助于理解 Ganesh 给出的答案。

在 Darcs 中，补丁有一个前后上下文，表示应用补丁之前和之后存储库的状态。在源代码中，这些上下文是在补丁类型上使用幻像类型建模的。这些幻影类型被称为见证`seal2`者，用于摆脱它们。

在补丁列表中，只有第一个前上下文和最后一个后上下文在类型中表示。所有其他上下文都使用存在类型隐藏。Darcs 定义了前向列表（称为 FL）和反向列表（称为 RL）。反向列表以反向（按时间顺序）顺序存储补丁（由 darcs 完成的模补丁重新排序）。反向列表可用于访问头部位置的最新补丁。所有名称中带有 RL 的函数都会创建或操作此类反向列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:09:22.453

```
-- This works with darcs 2.9.5 (a tag in the development repo
-- at http://darcs.net/screened).
--
-- It should work with darcs 2.8.2 with the following changes:
--  - some minor namespace changes
--  - change withRepositoryDirectory to pass [] instead of YesUseCache
--  - comment out the line below that uses the "patch index"

import Control.Applicative ( (<$>) )

import Darcs.Patch.Info ( PatchInfo )
import Darcs.Patch.Inspect ( listTouchedFiles )
import Darcs.Patch.PatchInfoAnd ( info )
import Darcs.Patch.Set ( newset2RL )
import Darcs.Patch.Witnesses.Ordered ( mapRL )
import Darcs.Patch.Witnesses.Sealed ( seal2, unseal2 )

import Darcs.Repository
    ( withRepositoryDirectory, RepoJob(..), readRepo )
import Darcs.Repository.FileMod ( filterPatches )
import Darcs.Repository.Flags ( UseCache(..) )

import Data.Maybe ( listToMaybe )

getChange
    :: FilePath                -- ^repository directory
    -> FilePath                -- ^file path
    -> IO (Maybe PatchInfo)    -- ^patch metadata
getChange repoDir fileName =

    -- Select the repository from repositoryDirectory.
    --
    -- The function parameter to 'RepoJob' needs to be polymorphic
    -- in the underlying patch type (darcs-1 or darcs-2).

    withRepositoryDirectory YesUseCache repoDir $ RepoJob $ \repo -> do

    -- 'readRepo' gives us a PatchSet, a lazy witnessed list of all
    -- the patches structured by "clean tags".
    --
    -- We use 'newset2RL' to get rid of the tag structure as we don't
    -- need it, and 'mapRL seal2' to get rid of the witnesses which we
    -- also don't need. The result is of type '[Sealed2 p]', where 'p'
    -- is the underlying patch type of the repository we are reading
    -- (either darcs-1 or darcs-2)

    patches <- mapRL seal2 . newset2RL <$> readRepo repo

    -- Use the recently introduced "patch index" to filter the list of
    -- patches from the repo down to ones that just touch 'fileName'.
    --
    -- This step is optional: we can remove it and the result will be
    -- the same, but substantially slower on large repositories where
    -- the patch we want is far back in the repo.

    patches <- filterPatches repo [fileName] patches

    -- Use 'filter' and 'listToMaybe' to get the first patch that touches
    -- 'fileName'.
    --
    -- The filter is superfluous in this simple case if the patch
    -- index was used, but doesn't cost much if so.
    --
    -- Note that this doesn't track renames, so isn't suitable for
    -- finding anything but the last patch that touched 'fileName'.
    --
    -- 'unseal2' is used to lift a function that works on witnessed
    -- patches to one that works on "sealed" patches.

    let wanted = unseal2 (\patch -> fileName `elem` listTouchedFiles patch)
    let thepatch = listToMaybe . filter wanted $ patches

    -- Finally, return the metadata of the patch.
    --
    -- Things get a little bit more complex if we want to deal
    -- with the contents of the patch, because the specific
    -- patch type isn't known statically - it might be
    -- darcs-1 or darcs-2.
    --
    -- The best approach is to write a polymorphic function that
    -- can accept any instance of 'RepoPatch'.

    return (fmap (unseal2 info) thepatch) 
```

# c# - 带有聚合和分组依据的 LINQ 查询

> ID：12941794
> 
> 赞同：2
> 
> 时间：2012-10-17T19:21:45.167
> 
> 标签：c#, linq, entity-framework

我有以下 SQL 查询...

```
 select  seaMake AS Make,
        seaModel AS Model,
        COUNT(*) AS [Count],
        MIN(seaPrice) AS [From],
        MIN(seaCapId) AS [CapId]
from tblSearch 
where seaPrice >= 2000
and seaPrice <= 7000
group by seaMake, seaModel
order by seaMake, seaModel 
```

我试图将其编写为 LINQ to Entities 查询，但我遇到了问题。这是我到目前为止所拥有的，但我无法从 var S 访问品牌和型号值

```
var tester = from s in db.tblSearches
             where s.seaPrice >= 2000
             && s.seaPrice <= 7000
             orderby s.seaMake
             group s by s.seaMake into g
             select new
             {
                 make = g.seaMake,
                 model = s.seaModel,
                 count = g.Max(x => x.seaMake),
                 PriceFrom = g.Min(s.seaPrice)
              }; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:40:49.167

这应该是 SQL 的直接翻译：

```
from s in db.tblSearches
where
    s.seaPrice >= 2000 &&
    s.seaPrice <= 7000
group s by new {s.seaMake, s.seaModel} into g
orderby g.Key
select new
{
    Make =  g.Key.seaMake,
    Model = g.Key.seaModel,
    Count = g.Count(),
    From =  g.Min(x => x.seaPrice),
    CapId = g.Min(x => x.seaCapId)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:47:24.560

`IEnumerable<TypeOfS>`当您*分组到*g 时，您将该集合转换为 IEnumerable>而不是您的原始集合，因此当前范围内的集合是`g`. 所以以下是有效的

```
from s in db.tblSearches
where s.seaPrice >= 2000
   && s.seaPrice <= 7000
orderby s.seaMake
group s by s.seaMake into g // the collection is now IEnumerable<IGrouping<TypeOfSeaMake, TypeofS>>
select new {
    make = g.Key, // this was populated by s.seaMake
    model = g.First().seaModel, // get the first item in the collection
    count = g.Max(x => x.seaMake), // get the max value from the collection
    PriceFrom = g.Min(x => x.seaPrice), // get the min price from the collection
}; 
```

现在将为每个分组返回一个项目

# ruby - Twitter / Ruby - 状态ID中的用户ID？

> ID：12941795
> 
> 赞同：0
> 
> 时间：2012-10-17T19:21:46.603
> 
> 标签：ruby, twitter

有没有办法从状态 ID（234552300176293888）中提取用户 ID（331063009）？如果有答案，Ruby 的答案更可取。

响应来自 Twitter 的 REST API (https://dev.twitter.com/docs/api/1.1/)

我希望将推文和用户信息放入两个单独的数据库中，并且没有存储状态所属的文档的文档。我宁愿有一个搜索查询（小数据集）。

示例响应：

```
{"_id"=>331063009,
 "attrs"=>
  {"default_profile_image"=>true,
   "id"=>331063009,
   "contributors_enabled"=>false,
   "geo_enabled"=>false,
   "favourites_count"=>0,
   "verified"=>false,
   "followers_count"=>6,
   "profile_background_image_url"=>
    "http://a0.twimg.com/images/themes/theme1/bg.png",
   "profile_link_color"=>"0084B4",
   "show_all_inline_media"=>false,
   "profile_background_image_url_https"=>
    "https://si0.twimg.com/images/themes/theme1/bg.png",
   "notifications"=>false,
   "utc_offset"=>nil,
   "time_zone"=>nil,
   "follow_request_sent"=>false,
   "name"=>"ZORO",
   "profile_use_background_image"=>true,
   "protected"=>false,
   "profile_text_color"=>"333333",
   "default_profile"=>true,
   "url"=>nil,
   "created_at"=>"Thu Jul 07 15:58:34 +0000 2011",
   "lang"=>"en",
   "profile_sidebar_border_color"=>"C0DEED",
   "statuses_count"=>1,
   "profile_image_url_https"=>
    "https://si0.twimg.com/sticky/default_profile_images/default_profile_4_normal.png",
   "description"=>"",
   "listed_count"=>0,
   "profile_image_url"=>
    "http://a0.twimg.com/sticky/default_profile_images/default_profile_4_normal.png",
   "id_str"=>"331063009",
   "friends_count"=>24,
   "profile_background_tile"=>false,
   "profile_sidebar_fill_color"=>"DDEEF6",
   "location"=>"",
   "is_translator"=>false,
   "status"=>
    {"in_reply_to_status_id_str"=>nil,
     "favorited"=>false,
     "in_reply_to_user_id_str"=>nil,
     "in_reply_to_user_id"=>nil,
     "coordinates"=>nil,
     "retweeted"=>false,
     "retweet_count"=>0,
     "in_reply_to_status_id"=>nil,
     "source"=>
      "<a href=\"http://twitter.com/tweetbutton\" rel=\"nofollow\">Tweet Button</a>",
     "contributors"=>nil,
     "in_reply_to_screen_name"=>nil,
     "truncated"=>false,
     "id"=>234552300176293888,
     "possibly_sensitive"=>false,
     "id_str"=>"234552300176293888",
     "place"=>nil,
     "geo"=>nil,
     "text"=>
      "The Cool Gadgets - Quest for The Coolest Gadgets http://t.co/FGhpj4Gu via @thecoolgadgets",
     "created_at"=>"Sun Aug 12 07:30:00 +0000 2012"},
   "screen_name"=>"ZORO1959",
   "following"=>false,
   "profile_background_color"=>"C0DEED"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:44:50.623

Twitter API 直接公开您想要的数据。我使用[Twitter API 控制台](https://dev.twitter.com/console)来请求`http://api.twitter.com/1/statuses/show/234552300176293888.json`，它给了我：

```
{
  "id": 234552300176293900,
  "id_str": "234552300176293888",
  // ...
  "user":  {
    "id": 331063009,
    "id_str": "331063009",
    "name": "ZORO",
    "screen_name": "ZORO1959",
    // ...
  },
} 
```

给定状态 ID，它会愉快地返回用户 ID。

# asp.net - ASP.NET MVC 4 SimpleMembership 在 web.config 中缺少 roleManager 等

> ID：12941802
> 
> 赞同：0
> 
> 时间：2012-10-17T19:22:11.297
> 
> 标签：asp.net, mysql, asp.net-mvc-4, simplemembership

我知道整个成员资格方法在 MVC 4 中应该更容易。但是，事实证明，要让它工作起来非常耗时。

[举个例子： http](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/) ://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties 的例子[/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)显示了对 web.config 的 System.Web 部分的修改，即将 WebMatrix 类型添加到 roleManager 部分。但是，我的 web.config 中没有角色管理器部分。这是一个新鲜的项目。

一路上我错过了什么？

其次，我最终想要做的是将 SimpleMembership 连接到我的 MVC 4 项目，并拥有自定义配置文件字段。我需要对 MySQL 执行此操作。我读过通用数据提供者允许这样做，但是有没有人有一个简单的、单一的教程来说明如何做到这一点？

我真的希望 MVC 4 中的事情真的比 MCV 3 中的更“简单”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:31:02.120

SimpleMembership 提供程序不适用于 MySql - 必须扩展 ExtendedMembershipProvider 并实现方法等...才能与 mysql/EF 一起使用。

# visual-studio - Windows 8 SDK 中的 DirectShow 示例在哪里？

> ID：12941803
> 
> 赞同：5
> 
> 时间：2012-10-17T19:22:13.667
> 
> 标签：visual-studio, windows-8, visual-studio-2012, directshow, winapi

DirectShow 示例位于 Windows 7.1 SDK 中的 (SDK samples root)\DirectShow\ 下，但 Windows 8 SDK 在 C:\Program Files (x86)\Windows Kits\8.0 和 C:\Program Files ( x86)\Microsoft SDKs\Windows。这些示例也不能在[http://code.msdn.microsoft.com/windowsapps下载](http://code.msdn.microsoft.com/windowsapps)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T15:34:06.490

我相信 DirectShow 将被 Microsoft Media Foundation (MF) 淘汰并取而代之。我认为这是自 Windows Vista 以来的意图，尽管当时 MF 还不足以取代 DirectShow。微软代表表示 Metro UI 应用程序将不支持 DirectShow。

我认为 dshow.h、quartz.dll 等仍然在 Window 8 SDK 套件中。但是，虽然 Windows 8 仍将在普通桌面上运行 DirectShow 程序，**但 DirectShow 示例可能永远不会包含在 Windows 8 SDK 或新的 Windows 开发中心**中，因为它已被视为已弃用。我找不到任何明确说明这一点的信息，但有关 MF 的大多数信息似乎表明 DirectShow 不是前进的方向，并且从 Windows 8 SDK 中进行了大量清理和删除过时的工件。

轶事参考：

*   [http://en.wikipedia.org/wiki/Media_Foundation](http://en.wikipedia.org/wiki/Media_Foundation)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197(v=vs.85).aspx)
*   [http://msdn.microsoft.com/en-us/library/aa468614.aspx](http://msdn.microsoft.com/en-us/library/aa468614.aspx)
*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/8f045f59-b03f-4328-a13c-bd90bf9545b1/](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/8f045f59-b03f-4328-a13c-bd90bf9545b1/)

相关下载链接：

*   [Windows 7.1 SDK（带 DirectShow 示例）](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=8279)
*   [视窗 8 SDK](http://msdn.microsoft.com/en-us/windows/apps/br229516)
*   [Windows 开发中心](http://msdn.microsoft.com/en-US/windows/default.aspx)

Fwiw，在 Windows 开发中心有[一些使用 DirectShow 的非官方示例。](http://code.msdn.microsoft.com/windowsdesktop/site/search?query=DirectShow&f%5B0%5D.Value=DirectShow&f%5B0%5D.Type=SearchText&ac=8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-25T16:47:32.750

Microsoft 现在有一个包含旧样本的 github 存储库：[https ://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/multimedia/directshow/baseclasses](https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/multimedia/directshow/baseclasses)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:41:35.620

您是否尝试过**适用于 Windows 8**（桌面和 Win32 应用程序）的 Windows 软件开发工具包 (SDK)？
[http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)

# compression - 为什么我们不使用单词等级来进行字符串压缩？

> ID：12941804
> 
> 赞同：-1
> 
> 时间：2012-10-17T19:22:17.250
> 
> 标签：compression

我有3个主要问题：

假设我有一个大文本文件。**（1）用排名替换单词是压缩文件的有效方法吗？**（得到了这个问题的答案。这是一个坏主意。）

另外，我想出了一个新的压缩算法。我阅读了一些广泛使用的现有压缩模型，发现它们使用了一些非常先进的概念，例如统计冗余和概率预测。我的算法没有使用所有这些概念，并且是一组相当简单的规则，在压缩和解压缩时需要遵循这些规则。**（2）我的问题是我是否在没有足够了解现有压缩方案的情况下试图提出一种新的压缩算法而浪费时间？**

**(3)此外，如果我成功地压缩了一个字符串，我可以将我的算法扩展到其他内容，如视频、图像等吗？**

（我知道如果没有压缩算法知识，第三个问题很难回答。但我怕算法太初级和新生，我不好意思分享它。如果有必要，请随时忽略第三个问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:41:07.303

你的意思是喜欢有一个按频率排序的单词排名表，并为那些重复最多的单词分配较小的“符号”，从而减少需要传输的信息量？

这基本上就是[霍夫曼编码](http://en.wikipedia.org/wiki/Huffman_coding)的工作原理，压缩的问题是你总是[在路上的某个地方遇到一个限制](http://en.wikipedia.org/wiki/Kolmogorov_complexity)，当然，如果你尝试压缩的一组东西遵循[特定的模式/分布](http://en.wikipedia.org/wiki/Grammar-based_codes)，那么它可能会非常有效它，但是出于一般目的（似乎是随机的音频/视频/文本/加密数据），没有（而且我相信不可能有）“最佳”压缩技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:32:47.383

1.  您的问题没有任何意义（请参阅答案＃2），但我会尝试重新措辞，如果我抓住您的问题，您可以告诉我。使用单个单词的概率对文本进行建模是否会成为一个好的文本压缩算法？回答：不。那将是一个零阶模型，并且无法利用更高阶的相关性，例如给定单词在前一个单词之后的条件概率。寻找匹配字符串和不同字符概率的简单现有文本压缩器会表现得更好。

2.  是的，如果您对现有的压缩方案没有足够的了解，您正在浪费时间尝试提出一种新的压缩算法。您应该首先了解随着时间的推移对数据、文本和其他数据建模的技术，以及使用建模信息来压缩数据的方法。在开发新方法之前，您需要研究已经研究了几十年的内容。

3.  压缩部分可以扩展，但建模部分不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:48:59.797

霍夫曼编码在字母上使用频率。您可以对单词或更多维度的字母频率（即字母及其频率的组合）执行相同操作。

# javascript - jQuery多个选择器，获取哪个选择器触发的事件

> ID：12941806
> 
> 赞同：5
> 
> 时间：2012-10-17T19:22:21.287
> 
> 标签：javascript, jquery

使用多个选择器处理事件时，例如：

```
$('.item a, .another-item a').click(function(e) {

}); 
```

是否可以确定哪个父选择器触发了该事件？是吗`.item`？`.another-item`

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T19:23:06.077

由于选择器几乎可以是任何东西，因此您必须检查特定的，例如：

```
if($(this).is('.item a')){
  //your code here
} else if ($(this).is('.another-item a')){
  //more here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T19:25:09.507

您可以使用 jQuery `is`。

```
if($(this).is('.item a')){
      // code
   }
   else if($(this).is('.another-item a')){//remove 'if ' in case there are only two selector separated by commas.
        //code..

   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T19:25:18.193

试试这个

```
$(this).closest('.item').length > 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T19:24:52.423

您可以检查：

```
var isItem = $( this ).parents( '.item:first' ).length > 0,
    isAnotherItem = $( this ).parents( '.another-item:first' ).length > 0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T19:26:04.883

如果`.item`和`.another-item`属于2个不同的节点..那么你可以尝试如下，

```
$('.item a, .another-item a').click(function(e) {
    if ($(this).closest('.item').length) {  //if it is '.item'

    } else {

    }
}); 
```

# windows-8 - Windows 商店应用的 Bing 地图上的 pushpin.Location 错误

> ID：12941807
> 
> 赞同：1
> 
> 时间：2012-10-17T19:22:21.960
> 
> 标签：windows-8, location, bing-maps, windows-store-apps, pushpin

我正在使用 C# 创建一个使用 bing 地图的 Windows 商店应用程序。我正在尝试存储和检索地图上随机放置的图钉的位置，但是当我使用 pushpin.Location 尝试打印该位置时，例如，我收到以下错误：

> “Bing.Maps.Pushpin”不包含“Location”的定义，并且找不到接受“Bing.Maps.Pushpin”类型的第一个参数的扩展方法“Location”（您是否缺少 using 指令或程序集引用?)

下面的简单代码示例更清楚地说明了我的意思：

```
private async void pushpinTapped(object sender, Windows.UI.Xaml.Input.TappedRoutedEventArgs e)
{
      MessageDialog dialog = new MessageDialog("You are here" + pushPin.Location());
      await dialog.ShowAsync();
} 
```

它清楚地表明位置是 API [here](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.pushpin_properties.aspx)中图钉类的属性 还有一些示例说明它被用于 windows phone 7，就像在[这个问题](https://stackoverflow.com/questions/7679979/windows-phone-7-map-pushpin-not-moving-with-the-map)中一样。

有什么我想念的想法吗？还是此功能不适用于 Windows 8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:22:57.913

它的工作原理如下：

```
async void pin_Tapped(object sender, TappedRoutedEventArgs e)
        {
            Pushpin pin = sender as Pushpin;
            Location pinLocation = MapLayer.GetPosition(pin);
            MessageDialog dialog = new MessageDialog("You are here: " + pinLocation.Latitude +", " + pinLocation.Longitude);
            await dialog.ShowAsync();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:19:00.767

啊，不错，谢谢。我也找到了另一种方法。本质上是相同的东西，但使用`var x`而不是位置。

```
private async void pushpinTapped(object sender,Windows.UI.Xaml.Input.TappedRoutedEventArgs e)
{
     Pushpin tappedpin = sender as Pushpin;  
     if (null == tappedpin) return;  
     var x = MapLayer.GetPosition(tappedpin); 
     MessageDialog dialog = new MessageDialog("You are here " + x.Latitude + ", " + x.Longitude);
     await dialog.ShowAsync();
} 
```

# css - html标签

> ID：12941809
> 
> 赞同：0
> 
> 时间：2012-10-17T19:22:29.510
> 
> 标签：css, tags, html

我正在做一个项目，我将 html 发送给 PDF 创建者，所以我不太担心正确的 html，只要它正确显示在 PDF 上即可。

我目前正在处理一个 PDF，其中大约一半页面的字体大小与另一个不同。我希望通过在选择周围放置标签来轻松完成此操作。但是，有些表格和列表没有继承 css 样式。

例如：

CSS：

```
.fs8
{
    font-size:8pt;
} 
```

HTML：

```
...
<p>Size 10 text here...</p>

<span class='fs8'>

<p>This text is size 8</p>

<table>
    <tr>
        <td>This text is NOT size 8</td>
    </tr>
</table>

<p>Still size 8...</p>

<ul>
    <li>NOT size 8!
</ul>

</span>

<p>Size 10 again...</p> 
```

有什么好的方法可以跨越表格和列表，所以我不必在数百个地方添加类标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:25:11.933

不确定我是否明白你的意思，但据我所知，你想改进你的选择器。

尝试这个：

```
.fs8 td,
.fs8 li
{
    font-size:9pt;
} 
```

这会将 font-size 设置为 9pt 在任何`td`或`li`带有 class 的元素内的标签中`fs8`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:16:47.520

您应该使用 div 而不是 span，因为 span 默认情况下是内联元素，这意味着它不应包含块级元素，例如 table 或 ul。现在为 CSS。

```
.fs8 {
  font-size: 8px;
}
.fs8 table,
.fs8 ul {
  font-size: 10px; /* not 8px */
} 
```

这应该够了吧。**除了包装div**之外，您不需要向任何项目添加类，记住它不能是跨度，因此将其替换为 div 以获得正确的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:31:41.420

在元素周围使用`span`标签`table`只是无效的标记，所以所有的赌注都没有了。考虑`div`改用或直接将所需的 CSS 属性分配给适用的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T20:08:41.470

由于您想要一个快速且可能很脏的解决方案，您可以使用通配符选择器

```
.fs8, .fs8 *, .fs8 * *, .fs * * * { font-size:8pt; } 
```

（您需要所有 3 个表格（跨度 > 表格 > tr > td）

虽然，请注意可能会有不良副作用！

此外，您应该小心用于生成 PDF 的工具，有些工具使用旧的浏览器渲染引擎（hello ie6 渲染）生成文件。实际上，这可能就是您遇到问题的原因，因为[此示例](http://jsfiddle.net/QD9TM/)在 ie8 上完美运行，但在 quirk 模式下却不行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T20:05:57.457

我知道你不想做类标签，但你不必把它放在所有标签上。您可以在整个事物周围放置一个 div，而不是可以被外部设置覆盖的 span 标签。我以前遇到过这个问题，所以做这样的事情：

```
 <div id="my_settings">

     <table>.....
     </table>

     <ul>....
     </ul>

     </div> 
```

然后在你的CSS中这样做：

```
 #my_settings li, #my_settings li, #my_settings p{
         font-siz: ....;
     } 
```

我不完全确定这是否是您想要的，但它可能比为所有这些都添加一个类更容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T19:30:14.043

我不确定您的问题，但我会尝试回答：

```
p { font-size:10px; }
.fs8 p { font-size:8px; } 
```

或者

```
p, td, li { font-size: 10px; }
span.fs8 p { font-size:8px; } 
```

# java - Pdfbox ExtractImage 为每个页面保存相同的图像

> ID：12941810
> 
> 赞同：2
> 
> 时间：2012-10-17T19:22:29.910
> 
> 标签：java, pdfbox

***Pdfbox* **(1.7.1)提取图像***类提取带有故障的图像。我的目标 pdf 文件有 136 页，第 1 页只有一张图片（封面图片）。该代码将该图像保存了 136 次。***

 ***问题是从每个页面获取资源。每次获取不同的资源（每个页面的# 不同）。但是每个资源都提供具有不同 # 但相同键值的图像。

我通过比较之前图像的键值暂时解决了这个问题。

但这是pdfbox的错误吗？还是我的 pdfbox 1.7.1 编译出了点问题？***

# facebook-fql - 通过 Facebook API 获取 Facebook 用户的隐私设置

> ID：12941812
> 
> 赞同：0
> 
> 时间：2012-10-17T19:22:46.163
> 
> 标签：facebook-fql, privacy

我正在编写一个 javascript 应用程序来获取 Facebook 用户的隐私设置。我可以从隐私设置表中获取它们吗？是否有关于该主题的 fql 参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:31:18.403

我很确定使用 FQL 不可能实现您想要做的事情。唯一与隐私相关的 FQL 表（即[http://developers.facebook.com/docs/reference/fql/privacy/](http://developers.facebook.com/docs/reference/fql/privacy/)和[http://developers.facebook.com/docs/reference/fql/privacy_setting/](http://developers.facebook.com/docs/reference/fql/privacy_setting/)）分别包含信息关于对象（如照片或帖子）的可见性设置以及用户针对查询应用选择的隐私设置。同时，用户表（参见[http://developers.facebook.com/docs/reference/fql/user/](http://developers.facebook.com/docs/reference/fql/user/)）不包含任何与隐私相关的内容。

Graph API 同样不提供任何方法来访问您想要的信息。用户对象（请参阅[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)）允许您访问与 FQL 相同的所有与隐私相关的信息，但不允许您访问用户的隐私设置。

你确定你真的需要获取用户的隐私设置吗？我对这些东西并不完全熟悉，但我很确定：

*   如果您担心您的应用在用户时间线上发布的帖子是否会公开，这完全由您可以从 privacy_setting 表中提取的信息所涵盖。
*   如果您要使用扩展权限通过图形 API 代表用户发帖，那么无论如何您都必须明确指定您创建的对象的隐私设置。

也许我只是缺乏想象力，但我想不出任何了解用户隐私设置的场景，因为基本上对于您作为用户发布的任何对象，您都可以指定它对谁可见，从而覆盖您的隐私设置。你的用例是什么？

如果您不需要 100% 确定，您可以随时提取他们之前发布的对象的隐私设置，看看最常见的设置是什么，然后从中猜测他们的默认设置是什么。

# javascript - AJAX 回合制游戏

> ID：12941826
> 
> 赞同：0
> 
> 时间：2012-10-17T19:23:49.003
> 
> 标签：javascript, ajax, websocket

使用 WebSockets 而不是 AJAX 开发一个有什么优势吗？我浏览了谷歌，但没有找到一个关于如何对 C# 服务器进行 AJAX 调用的示例。

另外，我将如何为玩家创建会话服务器端并能够知道哪个 ajax 调用来自哪个玩家？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:44:01.450

你的问题由几个问题组成，我会一一回答

## 1\. 使用 WebSockets 而不是 AJAX 开发有什么优势吗？

是的，但您需要认真考虑您的用例。如果网页需要向服务器传递大量消息，则应使用 WebSocket，反之亦然。应该使用 AJAX 来检索数据。正如 Kolink 所说，这意味着 AJAX 非常适合回合制游戏，而 WebSocket 的优势在于处理实时通信。

还有一个叫[彗星](https://en.wikipedia.org/wiki/Comet_(programming))的中间地带。这种技术使用 AJAX 来完成与 WebSockets 接近的事情，但它代表了对 HTTP 协议的滥用，也是创建 WebSocket 的原因之一。

下面的三个图表应进一步说明差异。如果您需要在网页访问者和服务器之间创建双向通信通道，它们代表了如何使用这些技术：

**阿贾克斯：**

![在此处输入图像描述](../Images/3cc9dcb45febe59d25e90fc90054f4af.png)

**彗星：**

![在此处输入图像描述](../Images/a06a4501e9ec7ead92b36fbd2d64dea7.png)

**网络套接字：**

![在此处输入图像描述](../Images/28062dcd11be728c3a8636fa38882d49.png)

## 2\. 我浏览了谷歌并没有找到一个关于如何对 C# 服务器进行 AJAX 调用的示例。

~~尝试以下两种中的任何一种：~~

~~*   [炼金术](http://olivinelabs.com/Alchemy-Websockets/)~~
*   ~~[XSockets](http://www.xsockets.net/)~~

哎呀，你问了关于 AJAX 的问题。我对 C# 不是很熟悉，但最好的方法可能是拥有一个 ASP.NET 脚本，您可以对其进行 AJAX 调用。在服务器端支持 AJAX 没有什么特别需要做的。

## 3\. 另外，我如何为玩家创建会话服务器端并能够知道哪个 ajax 调用来自哪个玩家？

这可以通过使用客户端 ID 对每个 AJAX 调用进行身份验证来完成。有时它们也被称为令牌。如果您使用现有的实现，它可能会有一种机制来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:26:25.920

AJAX 适用于回合制游戏。实时游戏几乎需要 WebSockets。

# algorithm - 查找总和小于给定数组的最大数组数

> ID：12941827
> 
> 赞同：3
> 
> 时间：2012-10-17T19:23:55.340
> 
> 标签：algorithm

给定一个长度为 n 的数组 x 和一组数组 S，使得 S 中的每个数组的长度为 n，找到 S 中的数组 G 的最大大小集，使得对于所有 1 <= i <= n，x[i] >= sum(g[i]) 对于 G 中的所有 g。

例如，如果 x = [3, 3] 且 S = {[3, 0], [1, 1], [2, 1]}，则最佳集合是 {[1, 1], [2, 1]}因为总和是 [3, 2] 并且每个索引处的元素小于 x 中的对应元素。{[3, 0], [1, 1]} 不起作用，因为总和为 [4, 1]，并且 4 > x[0] = 3。

是否存在运行时间是 n 和 |S| 中多项式的算法？

背景/背景：这个问题来自一个关于拼字游戏的问题。给定一个瓦片列表和一个单词，你能用瓦片组成单词吗？我将它扩展到给定一个瓷砖列表和一个单词列表，列表中可以从瓷砖形成的最大单词数是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:14:12.183

这是[多维背包问题](http://en.wikipedia.org/wiki/List_of_knapsack_problems#Multiple_constraints)。

为了证明不存在算法，多项式时间`n`和`|S|`（或证明这是一个[强 NP-hard 问题](http://en.wikipedia.org/wiki/Strongly_NP-complete)），简化这个问题，只允许`1`数组`x`和值`0`或`1`数组的值`S`。经过这种简化，我们得到了[Set packing](http://en.wikipedia.org/wiki/Set_packing)的优化版本，这是一个经典的 NP 完全问题。

与集装问题的关系表明也没有好的近似算法。

这使得算法的选择非常有限：

1.  [分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)。
2.  [整数线性规划](http://en.wikipedia.org/wiki/Integer_linear_program#Integer_unknowns)。
3.  [模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)或[禁忌搜索](http://en.wikipedia.org/wiki/Taboo_search)等[元启发式算法](http://en.wikipedia.org/wiki/Metaheuristic)。

# java - Java小程序找不到类

> ID：12941833
> 
> 赞同：0
> 
> 时间：2012-10-17T19:24:25.310
> 
> 标签：java, html, applet, classnotfoundexception

所以我遇到了java小程序的问题。我的 HTML 目录中有一个类 TestUser.class。我尝试在 HTML 页面上加载该类，它显示 ClassNotFoundException... 这是 html 代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>UserTest</title>
</head>
<body>
<object type="application/x-java-applet" width=300 height=300>
    <param name="codebase" value="./">
    <param name="code" value="TestUser.class">
</object>
</body>
</html> 
```

.class 绝对在带有 index.html 的目录中。我在 Eclipse 小程序测试器中运行该程序... 100% 正常工作，没有错误。该类不声明包。我不知道发生了什么。感谢所有帮助:)。

# java - 如何在 Windows Server 2008 上将 Java .jar 文件作为 Windows 服务运行？

> ID：12941835
> 
> 赞同：6
> 
> 时间：2012-10-17T19:24:32.390
> 
> 标签：java, windows, jar, windows-services

如何在 Windows 2008 服务器上将 Java .jar 文件作为 Windows 服务运行？我有一个名为 SomeJavaFile.jar 的 jar 文件，位于`C:\SomeDirectory`Windows Server 2008 框的目录下。我通常只是在命令行中手动运行这个 jar：`java –cp SomeJavaFile.jar com.ctg.SomeJavaFile`然后让它 24/7 运行。

我们的 Windows Server 的问题是，如果它重新启动，我需要将它作为服务运行，以便它在启动时自动作为服务启动，因为我们对 Vistakon 的处理运行 24/7。我用谷歌搜索并尝试使用服务包装器和 sc.exe 命令来创建服务。

我将包装器 service.exe 放在`C:\SomeDirectory\`. 我使用以下命令来创建它：`sc.exe SomeJavaService binPath= “C:\SomeDirectory\service.exe \”java –jar C:\SomeDirectory\SomeJavaFile.jar\”” type= own start= auto error= ignore`. 这会正确创建 SomeJavaService 服务，但是当我尝试启动它时，我收到一条错误消息，提示本地计算机上的服务已启动然后停止。

如果某些服务没有被其他服务或程序使用，它们会自动停止。我是否需要通过添加 com.ctg.SomeJavaFile 来更改我的 sc.exe 命令以获得确切的先前工作命令行？所以我应该改变这个 jar 应该只在后台运行并不断轮询/ping C:/poll 目录，然后如果存在数据，它会处理数据并将导出文件发送到另一个目录。

我已经成功使用同一个 .jar 文件多年，它没有改变，但我无法让它作为 Windows 服务运行。这是我用来获取服务包装器[http://code.google.com/p/simple-service-wrapper/](http://code.google.com/p/simple-service-wrapper/)的站点。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:59:46.543

“winsw”是随 Glassfish Java EE 参考实现一起提供的 Windows 服务安装程序的独立版本。

效果很好，但不是一个完全抛光的产品 - 我已经为此目的使用了几年。在 Windows 机器上的某些最新版本中需要 .NET。

[https://github.com/kohsuke/winsw](https://github.com/kohsuke/winsw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T17:32:23.690

根据我的分析，

空闲解决方案将编写一个 VC++ (.net) Windows 服务创建程序，以将 .bat（触发 jar 文件）/.exe 作为系统服务启动，其中包含所有必需的 SCM 回调方法。

注意： 1\. 使用 sc.exe / srvany.exe 包装进程将不起作用，因为它没有任何对 SCM（服务控制管理器）的回调进程。2\. java service Wrapper 是第三方 API（很多是 LGPL 许可的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:04:42.797

我认为最好的选择是用[Procrun](http://commons.apache.org/daemon/procrun.html) of [Apache Commons Daemon](http://commons.apache.org/daemon/index.html)包装你的 java 应用程序。

> Procrun 是一组应用程序，允许 Windows 用户将（大部分）Java 应用程序（例如 Tomcat）包装为 Windows 服务。
> 
> 该服务可以设置为在机器启动时自动启动，并且在没有用户登录机器的情况下继续运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:36:31.507

如果您使用命令行从命令行启动 Java 代码，`java -j some.jar`它会一直运行到您终止程序，还是会自行停止？

需要有一个非守护线程，它一直在运行。如果没有线程在运行，JVM 将终止，即未标记为守护进程。

如果您有一点预算，请购买安装工具。我使用 instll4j。使用该工具，您可以创建服务启动器并在安装期间安装它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-26T07:24:31.747

以下解决方案适用于我在 Windows Server 上作为服务运行的 OpenFire 连接管理器（这是一个 jar 文件）。

下载并安装**[非吸盘服务管理器](https://nssm.cc/)**

我没有使用 OpenFire 团队制作的批处理，因为它对我不起作用（未找到依赖项错误...）因此，使用以下代码制作批处理文件：

```
@ECHO OFF

cd /D "E:\connection_manager\lib"
java -jar startup.jar 
```

并将其保存`cm_startup.bat`在连接管理器的 bin 文件夹中。

之后，您可以使用 NSSM 创建服务。因此，打开 a`cmd.exe`并运行以下命令：

```
 nssm install ConnManager "E:\connection_manager\lib\cm_startup.bat" 
```

.

***文档和示例***

此处为非吸吮服务管理器提供更多文档和示例：[https](https://nssm.cc/usage) : //nssm.cc/usage 实际上 NSSM 有很多可用选项。

这是一个更复杂的例子：

```
nssm install solr "%JavaExe%" -Dsolr.solr.home="\"%CD%\solr"\"
-Djetty.home="\"%CD%"\" -Djetty.logs="\"%CD%\logs"\" -cp
"\"%CD%\lib\*.jar"\";"\"%CD%\start.jar"\" -jar "\"%CD%\start.jar"\" 
```

# codeigniter - CodeIgniter - 将 _post 数据存储在多维数组中并显示

> ID：12941836
> 
> 赞同：0
> 
> 时间：2012-10-17T19:24:34.453
> 
> 标签：codeigniter, post, multidimensional-array

我的页面上有一个表格。在“提交”时，我需要从表单中获取发布数据并将其存储在多维数组中。

这就是我到目前为止所拥有的。

```
//view
<input type="text" name="option[fname]" />
<input type="text" name="option[lname]" />
<input type="submit" />

//controller
$data['myarray'] = $this->input->post('options', TRUE);
$this->load->view('template',$data); 
```

然后在“提交”时，我们返回视图并查看我们添加的内容。

```
//view
<?php
foreach($myarray as $row){
    echo $myarray['fname'] . '<br>' . $myarray['lname'];
}
?> 
```

我希望能够在每次点击“提交”时继续添加到数组中。现在它只显示最后输入的数据。我怎么做？谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:42:26.230

您必须在每次请求时将数组保存在文件、cookie 或数据库中。

保存到文件的简化示例：

```
// controller
// load array from the file if exists
if (is_file('myarray.dat')) $myarray = unserialize(file_get_contents('myarray.dat'));
// put new data to array
$myarray[] = $this->input->post('options', TRUE);
// output array
$this->load->view('template', array('myarray' => $myarray));
// save array back to the file
file_put_contents('myarray.dat', serialize($myarray)); 
```

# jpa-2.0 - 在 CDI bean 中安排 JPA 查询和访问结果？

> ID：12941842
> 
> 赞同：0
> 
> 时间：2012-10-17T19:25:01.723
> 
> 标签：jpa-2.0, cdi

每 x 分钟我想查询新实例并缓存结果。我目前只需要一个简单的缓存解决方案，所以我想更新`Set`我的`@ApplicationScoped` `CacheBean`

我试过一个：

```
ScheduledExecutorService scheduler = Executors
        .newScheduledThreadPool(1);
    ScheduledFuture<?> sf = scheduler.scheduleAtFixedRate(new Runnable() {
        public void run() {
//................. 
```

但是创建的线程无法访问任何上下文实例（InvocationException）。

那么如何以 CDI/JPA 方式做到这一点呢？

使用 Tomcat 7、焊接、JPA2 - 休眠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:53:37.247

我的建议是尝试已集成 CDI 和 JPA 的 Tomcat 版本（[TomEE](http://tomee.apache.org)）。它带有 OpenJPA，但您可以使用 Hibernate。然后使用这样的类进行缓存：

```
@Singleton
@Startup
public class CachingBean {

    @Resource 
    private BeanManager beanManager;

    @Schedule(minute = "*/10", hour = "*")
    private void run() {
        // cache things
    }
} 
```

该组件将在应用程序启动时自动启动，并每十分钟运行一次上述方法。有关详细信息，请参阅[计划](http://docs.oracle.com/javaee/6/api/javax/ejb/Schedule.html)文档。

## 更新

给你举了一个例子。使用良好的 CDI/EJB 组合来安排 CDI 事件。

`BeanManager.fireEvent(Object,Annotations...)`实际上，这是对添加`ScheduleExpression`到混合中的方法的简单包装。

```
@Singleton
@Lock(LockType.READ)
public class Scheduler {

    @Resource
    private TimerService timerService;

    @Resource
    private BeanManager beanManager;

    public void scheduleEvent(ScheduleExpression schedule, Object event, Annotation... qualifiers) {

        timerService.createCalendarTimer(schedule, new TimerConfig(new EventConfig(event, qualifiers), false));
    }

    @Timeout
    private void timeout(Timer timer) {
        final EventConfig config = (EventConfig) timer.getInfo();

        beanManager.fireEvent(config.getEvent(), config.getQualifiers());
    }

    // Doesn't actually need to be serializable, just has to implement it
    private final class EventConfig implements Serializable {

        private final Object event;
        private final Annotation[] qualifiers;

        private EventConfig(Object event, Annotation[] qualifiers) {
            this.event = event;
            this.qualifiers = qualifiers;
        }

        public Object getEvent() {
            return event;
        }

        public Annotation[] getQualifiers() {
            return qualifiers;
        }
    }
} 
```

然后使用它，`Scheduler`作为 EJB 注入并安排离开。

```
public class SomeBean {

    @EJB
    private Scheduler scheduler;

    public void doit() throws Exception {

        // every five minutes
        final ScheduleExpression schedule = new ScheduleExpression()
                .hour("*")
                .minute("*")
                .second("*/5");

        scheduler.scheduleEvent(schedule, new TestEvent("five"));
    }

    /**
     * Event will fire every five minutes
     */ 
    public void observe(@Observes TestEvent event) {
        // process the event
    }

} 
```

完整的源代码和工作示例，[在这里](http://tomee.apache.org/examples-trunk/schedule-events/)。

## 你必须知道

*   CDI 事件不是多线程的

如果有 10 个观察者，每个观察者需要 7 分钟执行，那么一个事件的总执行时间是 70 分钟。将事件安排为比 70 分钟更频繁地触发对您绝对没有好处。

如果你这样做了会发生什么？取决于`@Singleton` `@Lock`政策

*   `@Lock(WRITE)`是默认值。在这种模式下，该`timeout`方法将基本上被锁定，直到前一次调用完成。即使您每 70 分钟只能处理一次，但每 5 分钟触发一次，最终会导致所有池化计时器线程都在您的 Singleton 上等待。
*   `@Lock(READ)`允许并行执行该`timeout`方法。事件将并行触发一段时间。然而，由于它们实际上每个都需要 70 分钟，所以在一个小时左右的时间内，我们将用完计时器池中的线程，就像上面一样。

优雅的解决方案是使用然后在方法上`@Lock(WRITE)`指定一些短的超时。当接下来的 5 分钟调用被触发时，它会等到 1 分钟才能访问 Singleton，然后才放弃。这将使您的计时器池不会被备份的作业填满——“溢出”被简单地丢弃。`@AccessTimeout(value = 1, unit = TimeUnit.MINUTES)``timeout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:31:37.803

与其将 new Runnable() {....} 传递给 scheduler.scheduleAtFixedRate ，不如创建一个实现 Runnable 的 CDI bean 和 @Inject 该 bean，然后将其传递给 scheduler.scheduleAtFixedRate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:48:18.170

在与 David Blevins 聊了一会儿之后，我可以承认他的回答是一个很棒的回答，我投了赞成票。非常感谢这一切。尽管大卫你忘了宣布你参与 TomEE，但我知道这总是会打扰别人。

无论如何，我所寻求的解决方案是由 Mark Struberg 在#Deltaspike (freenode) 中提出的。

作为一个 deltaspike 用户，我很高兴使用 deltaspike 来做到这一点。此博客文章中概述了解决方案：

[http://struberg.wordpress.com/2012/03/17/controlling-cdi-containers-in-se-and-ee/](http://struberg.wordpress.com/2012/03/17/controlling-cdi-containers-in-se-and-ee/)

我不得不切换到 OWB 见[https://issues.apache.org/jira/browse/DELTASPIKE-284](https://issues.apache.org/jira/browse/DELTASPIKE-284)

干杯

# oracle - 如何保护 Oracle Apex 中的单个页面

> ID：12941845
> 
> 赞同：2
> 
> 时间：2012-10-17T19:25:08.493
> 
> 标签：oracle, oracle-apex

我的应用程序不需要身份验证，但想保护一些页面。

在我希望保护的页面上，我已指定用户不应是公共用户。

当我单击指向该页面的链接时，我确实得到了一个登录框，但我似乎能够输入任何旧垃圾并继续进入该页面。

如何在没有应用程序级别的通用身份验证方案的情况下保护单个页面，因此需要 Apex 用户帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:46:43.917

最好反过来做：将身份验证方案应用于您的应用程序，然后将单个页面标记为公开（即不需要身份验证），但需要身份验证的页面除外。

# sql - 带有 auto_increment 的 SQL 插入和 id

> ID：12941847
> 
> 赞同：0
> 
> 时间：2012-10-17T19:25:11.973
> 
> 标签：sql, insert, auto-increment

嘿，我这里有这个插入语句

```
INSERT INTO persons VALUES (16,'First Name',NULL,NULL,NULL,2,0,now(),NULL,NULL); 
```

它说列数不匹配，因为最后一列是自动递增的 id。我必须输入一个 id 值吗？

谢谢，J

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:27:40.407

您不应在插入中包含自动增量列。

最好将列名放在表名之后。这有助于使查询更清晰，更易于阅读和维护。

```
INSERT INTO persons(Column1, col2, ...)
VALUES (16, 'First Name', ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:27:44.167

只是不要包含该字段 INSERT INTO people VALUES (16,'First Name',NULL,NULL,NULL,2,0,now(),NULL);

# excel - VBA 子程序声明问题阻止 excel VBA 正确执行

> ID：12941852
> 
> 赞同：1
> 
> 时间：2012-10-17T19:25:37.480
> 
> 标签：excel, vba, subroutine

我正在研究一个简单的子例程，以从主工作表中提取值并将这些值移动到其他工作表中。当我运行 VBA 宏时，它永远不会超过子例程声明，任何建议都将不胜感激。

```
Option Explicit
Sub Macro2()
Dim rCell As Range, ws As Worksheet
Application.DisplayAlerts = False

With Sheets("Sheet1")
Sheets.Add().Name = "Temp"
.Range("D2", .Range("D" & Rows.Count).End(xlUp)).AdvancedFilter Action:=xlFilterCopy,         CopyToRange:=Sheets("Temp").Range("B1"), Unique:=True
For Each rCell In Sheets("Temp").Range("D2", Sheets("Temp").Range("B" & Rows.Count).End(xlUp))
    If Not IsEmpty(rCell) Then
        .Range("D2").AutoFilter field:=3, Criteria1:=rCell
        If SheetExists(rCell.Text) Then
            Set ws = Sheets(rCell.Text)
        Else
            Set ws = Worksheet.Add(After:=Worksheets(Worksheets.Count - 1))
            ws.Name = rCell
        End If
        With .AutoFilter.Range
            .Offset(1).Resize(.Rows.Count - 1).Copy ws.Range("A" & Rows.Count).End(xlUp)(2)
        End With
    End If
Next rCell
Sheets("Temp").Delete
.AutoFilterMode = False
End With

Application.DisplayAlerts = True

End Sub 
```

新增功能

```
 Function SheetExists(shtName As String, Optional wb As Workbook) As Boolean
 Dim sht As Worksheet

 If wb Is Nothing Then Set wb = ThisWorkbook
 On Error Resume Next
 Set sht = wb.Sheets(shtName)
 On Error GoTo 0
 SheetExists = Not sht Is Nothing
 End Function 
```

新错误

```
extract range has a illegal or missing field name 
```

@

```
.Range("D2", .Range("D"&Rows.Count).End(xlDown)).AdvancedFilter  Action:=xlFilterCopy, CopyToRange:=Sheets("Temp").Range("B1"), Unique:=True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:33:49.943

您是否进行了调试以查看失败的确切位置。例如，您不会尝试在已经存在的情况下添加名为 Temp 的工作表。调试并找到它失败的确切位置。

一世

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:36:49.960

~~当我运行该代码时，它说：~~

 ~~> 编译错误：
> 
> 子或函数未定义~~ 

~~然后突出显示该`SheetExists`功能。要么`SheetExist`是您忘记包含在表单中的函数，要么是您的示例中未包含的自定义函数。~~

**编辑：**哇，这里发生了很多事情。

如果之后单步执行代码，您还会在此处收到运行时 1004 错误（“应用程序定义或对象定义错误”）：

```
.Range("D2", .Range("D" & Rows.Count).End(xlUp)).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Sheets("Temp").Range("B1"), Unique:=True 
```

尝试将其更改为：

```
.Range("D2", .Range("D" & Rows.Count).End(xlDown)).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Sheets("Temp").Range("B1"), Unique:=True 
```

从那里，改变这个：

```
Set ws = Worksheets.Add(After:=Worksheets(Worksheets.Count - 1))
ws.Name = rCell 
```

对此：

```
Worksheets.Add(After:=Worksheets(Worksheets.Count - 1)).Name = rCell 
```

但是，从那里开始，我不确定`With .AutoFilter.Range`应该做什么，除非您的意思是`With Sheets("Sheet1").AutoFilter.Range`.

从调试的角度来看，您确实想`On Error Goto ErrRoutine`在代码的开头添加，然后将其添加到例程的末尾：

```
 Exit Sub

ErrRoutine:

    MsgBox Err.Description
    Resume 
```

并设置一个断点`MsgBox Err.Description`以退回到有问题的行。

# jquery - CSS3 饼图阴影问题

> ID：12941853
> 
> 赞同：0
> 
> 时间：2012-10-17T19:25:39.707
> 
> 标签：jquery, css, css3pie

我正在使用 CSS3 Pie 在 IE 中创建盒子阴影和圆角。我有一个带有盒子阴影的背景容器，然后是位于第一个顶部的另一个 div。发生的情况是，盒子阴影围绕着所有盒子，就好像它是一个容器一样，而不是一直勾勒出两个盒子。它在 Chrome、Safari 和 Firefox 中看起来很好，问题只是在 IE 中。

有问题的页面在[这里](http://www.brighamandwomens.org/Patients_Visitors/pcs/rehabilitationservices/mock/standards.aspx)。

这是代码，它非常简单：

```
<div id="standards_backing" 
class="gradient_1 gradient_2 gradient_3 gradient_4 gradient_5 gradient_6" 
style="-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
-webkit-box-shadow: #666 0px 0px 4px;
-moz-box-shadow: #666 0px 0px 4px;
box-shadow: #666 0px 0px 4px;
background: fbfbfb;
background: -webkit-gradient(linear, 0 0, 0 bottom, from(fbfbfb), to(f4f4f5));
background: -webkit-linear-gradient(fbfbfb, f4f4f5);
background: -moz-linear-gradient(fbfbfb, f4f4f5);
background: -ms-linear-gradient(fbfbfb, f4f4f5);
background: -o-linear-gradient(fbfbfb, f4f4f5);
background: linear-gradient(fbfbfb, f4f4f5);
-pie-background: linear-gradient(fbfbfb, f4f4f5);
behavior: url(pie.htc);">

<div id="standards_container_total">

<div 
class="standard_containers gradient_1 gradient_2 gradient_3 gradient_4 gradient_5  
gradient_6" 
style="-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
-webkit-box-shadow: #666 0px 0px 4px;
-moz-box-shadow: #666 0px 0px 4px;
box-shadow: #666 0px 0px 4px;
background: fbfbfb;
background: -webkit-gradient(linear, 0 0, 0 bottom, from(fbfbfb), to(f4f4f5));
background: -webkit-linear-gradient(fbfbfb, f4f4f5);
background: -moz-linear-gradient(fbfbfb, f4f4f5);
background: -ms-linear-gradient(fbfbfb, f4f4f5);
background: -o-linear-gradient(fbfbfb, f4f4f5);
background: linear-gradient(fbfbfb, f4f4f5);
-pie-background: linear-gradient(fbfbfb, f4f4f5);
behavior: url(pie.htc);">

</div></div></div>

var standards_backing = {
    "width": "690px",
    "margin-left": "17px",
    "padding-top": "35px",
    "padding-bottom": "30px"
};
var standards_container_total = {
    "width": "2968px",
    "margin-left": "-26px",
    "margin-top": "100px",
    "position": "relative"
};
var standard_containers = {
    "width": "341px",
    "margin-top": "-25px",
    "margin-left": "15px",
    "margin-right": "15px",
    "padding-top": "15px",
    "padding-bottom": "25px",
    "float": "left",
    "display": "inline-block"
};

$("#standards_backing").css(standards_backing);
$("#standards_container_total").css(standards_container_total);
$(".standard_containers").css(standard_containers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:36:05.480

尝试在面板上设置背景颜色，同时设置`overflow: hidden;`以防止背景流过圆角。

# excel - 如何在excel中进行连接？

> ID：12941858
> 
> 赞同：-2
> 
> 时间：2012-10-17T19:26:08.557
> 
> 标签：excel

我正在使用 excel 连接来生成 SQL 插入语句，但我发现很难为以下 SQL 值定义连接...有人可以建议吗？关于串联公式要使用？

```
VALUES ( 
NEWID(),'ABC', 'ABC', 'ABC', 'abc', 'abc', 'abc', NULL,  CONVERT(datetime, '1999/01/01',     101)
,  CONVERT(datetime, '1999/12/31', 101), 1, 0, 1, LOWER(NEWID())
, 'abc',  getdate(), 'system'
,  getdate()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:35:24.573

如果 Excel 试图解释/评估您的 SQL 函数，那么您可能对这种方法不走运。

尝试在存储过程中设置插入 SQL，然后让您的 excel 文件生成存储过程调用。像这样的东西：

```
spInsertRecord('ABC', 'ABC', 'ABC', 'abc', 'abc', 'abc', NULL,... etc) 
```

这样，您就不会遇到对嵌入式命令的误解的任何问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:18:13.643

```
="INSERT SOMETABLE VALUES ( \
NEWID(),'" & A2 & "', '" & B2 & "', 'ABC', 'abc', 'abc', 'abc', NULL, \
CONVERT(datetime, '1999/01/01',     101) \
,  CONVERT(datetime, '1999/12/31', 101), 1, 0, 1, LOWER(NEWID()) \
, 'abc',  getdate(), 'system' \
,  getdate());" 
```

注意：当您`\`在上面看到时，这意味着该行连接到下一行。整个公式应该在一行上。

我已将“ABC”的前两个固定值替换为工作表`A2`中`B2`的单元格，例如，您可能在 中包含此公式`X2`，您可以将其复制下来。如果您的单元格值本身可以包含单引号，则它会变得更加复杂，您需要添加 SUBSTITUTE 以将它们加倍。例如

```
="INSERT SOMETABLE VALUES ( \
NEWID(),'" & SUBSTITUTE(A2,"'","''") & "', '" & B2 & "', 'ABC', 'abc', 'abc', 'abc', NULL, \ 
```

# html - CSS子菜单对齐问题

> ID：12941860
> 
> 赞同：0
> 
> 时间：2012-10-17T19:26:23.030
> 
> 标签：html, css, css-selectors, html-lists

我目前正在阅读有关响应式网页设计的教程，并且我想让我的导航与教程中的不同（我希望我的导航栏有彩色背景，并且居中..而不是 tut 没有bkgd 并且左对齐）。

没有背景，我的子菜单可以正常显示。在背景中设置彩色条时，我可以让它显示的唯一方法是删除`float:left;`我最初在“ `.primary ul li{}`”选择器中的“”。现在已将其删除，当我将鼠标悬停在`Item 4`带有子菜单的项目“ ”上时，子菜单现在显示为与栏左对齐，而不是直接在项目 4 下方。您可以在这里看到我的意思：

[http://jsfiddle.net/mark_a_b/ytB66/1/](http://jsfiddle.net/mark_a_b/ytB66/1/)

如果我`float:left;`重新添加''，你会看到我的导航的背景颜色栏消失了，我的菜单项不再像我想要的那样居中（不是我将此版本的 bkgd 颜色设置为深灰色而已因此您可以看到菜单项），如下所示：

[http://jsfiddle.net/mark_a_b/ytB66/3/](http://jsfiddle.net/mark_a_b/ytB66/3/)

我敢肯定这可能是我忽略的一些愚蠢的事情，但是我花了太多时间搞砸它并且无处可去，所以希望其他人能够帮助我解决这个问题。感谢提供的任何帮助！

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:33:17.360

只需在您的子菜单中添加一个定位`left: 0;`-[**演示**](http://jsfiddle.net/ytB66/4/)

```
.primary ul ul{
    position: absolute;
    left: 0; /* this */
    z-index: 999;
    background-color: #ccc;
    height:0px;
    overflow: hidden;
    min-width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:33:31.777

`<ul>`并且`<li>`是**块级元素**；

通常`<li>`是垂直放置的，而在这里它们是水平显示的，因为`display: inline;`属性值。

这里的每一个`<li>`也是另一个的容器，使用**内联元素作为块级元素**的容器是**不好**`<ul>`的。

 ****解决方案是： use `display: inline-block;`，它将内联显示样式与块级行为相结合：

```
.primary ul li{
    display: inline-block;
    position: relative;
} 
```****

# visual-studio-2012 - 从 VS2012 发布 Web 应用程序正在清除用户内容

> ID：12941862
> 
> 赞同：4
> 
> 时间：2012-10-17T19:26:25.413
> 
> 标签：visual-studio-2012, msdeploy

我正在尝试使用 Web Deploy 来发布 Web 应用程序。我希望 Visual Studio 删除任何不再存在的文件，因此我检查了我的发布配置文件中的“在目标位置删除其他文件”设置。但是，我希望 VS 忽略 /Content/uploads 文件夹，因为它包含我的用户上传的内容。当然，我的开发站点中的内容与实际站点中的内容不同。不幸的是，我一直无法找到一种方法让 Visual Studio 在发布时忽略此文件夹（它想要删除所有内容，因为它在项目中不存在）。有谁知道如何将目标站点上的特定文件夹排除在 Web Deploy 的检查范围之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:30:25.743

我有一个类似的问题，想在部署包中保留一些文件，即使它们不是项目的一部分。

尝试为此创建一个自定义 MSBuild 目标，这对我有用。

[这](http://blogs.msdn.com/b/visualstudio/archive/2010/02/25/the-visual-studio-blog.aspx)是 MSBuild 入门参考

希望这可以帮助。祝一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:03:12.510

我无法为这个问题找到合适的解决方案，所以我创建了自己的： [https ://pubsync.codeplex.com/](https://pubsync.codeplex.com/)

PubSync 为发布 Visual Studio 项目提供快速可靠的文件同步。

# git - 我的 Git 更改去了哪里？

> ID：12941863
> 
> 赞同：4
> 
> 时间：2012-10-17T19:26:35.773
> 
> 标签：git, smartgit, atlassian-sourcetree

我已提交对 Git 的更改并推送到原点。另一位开发人员在合并时遇到问题。他们做了一些事情并推动了。我看到了更新并进行了拉动，我的一半更改被还原了！发生了什么？我猜他们有合并冲突并使用了他们的文件版本，但即便如此我还是找不到我在 Git 中工作的任何历史记录？

我正在使用 SourceTree，但还不太适应。我刚刚安装了 Smart Git（更熟悉它），但没有找到任何有用的东西来发现其中发生的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:47:32.357

在**SmartGit**中，打开 Log 并使用**Query|Load All Commits**。这应该会暂时返回您的提交，因此您可以添加一个分支以使其再次可访问。之后，合并、变基或 Cherry-Pick 您的更改`master`（假设是`master`您和您的团队正在处理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T21:24:27.220

如果您能够使用命令行， git log 应该会显示所有提交。

如果您已经在本地提取，那么您可以使用 reflog 来展开已发生的事情。[http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)

然后，您可以在必要时放松并分支或挑选新分支。

或者您可以恢复合并。[http://git-scm.com/2010/03/02/undoing-merges.html](http://git-scm.com/2010/03/02/undoing-merges.html)

# c# - 通过隐藏变量传递复杂的 json 并在 mvc 3 控制器中读取

> ID：12941864
> 
> 赞同：0
> 
> 时间：2012-10-17T19:26:44.370
> 
> 标签：c#, asp.net, json, asp.net-mvc-3

我想做以下事情。

1.  在隐藏的输入变量中传递一个复杂的 json 对象
2.  通过表单集合对象获取该隐藏变量。
3.  将隐藏的文本值转换为动态对象，我可以循环通过该对象从中获取数据

所以我认为上面的前两项我可以做到。

1.  $("#hiddenVariableID").val(JSON.stringify(data));
2.  在 MVC 控制器中有一个名为 FormCollection 集合的参数。然后通过以下方式获取值 String data = collection.Get("hiddenVariableID");
3.  ?? 不知道该怎么做。

我传递的数据是一个对象数组。对象永远不会相同，这就是为什么我需要将结果转换为可以循环遍历的某种类型的动态对象。

我无法执行 ajax 调用来执行此操作，因为我想流式传输隐藏变量中传递的数据。所以它必须通过表单提交。

谢谢你，-Tesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:57:06.740

此时您可以使用一些 JSON 解析器在字符串和您可以动态访问的 JSON 对象之间进行转换。那里有许多 JSON 解析器，下面的代码展示了如何使用其中两个来完成：[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)（.NET 框架的一部分）和[JSON.NET](http://json.net)（一个非 MS 库，但 IMO 确实是好的）。

```
public static void Test()
{
    string JSON = @"[
        {'name':'Scooby Doo', 'age':10},
        {'name':'Shaggy', 'age':18},
        {'name':'Daphne', 'age':19},
        {'name':'Fred', 'age':19},
        {'name':'Velma', 'age':20}
    ]".Replace('\'', '\"');

    Console.WriteLine("Using JavaScriptSerializer");
    JavaScriptSerializer jss = new JavaScriptSerializer();
    object[] o = jss.DeserializeObject(JSON) as object[];
    foreach (Dictionary<string, object> person in o)
    {
        Console.WriteLine("{0} - {1}", person["name"], person["age"]);
    }

    Console.WriteLine();
    Console.WriteLine("Using JSON.NET (Newtonsoft.Json) parser");
    JArray ja = JArray.Parse(JSON);
    foreach (var person in ja)
    {
        Console.WriteLine("{0} - {1}", person["name"].ToObject<string>(), person["age"].ToObject<int>());
    }
} 
```

# html - Twitter Bootstrap 堆叠层次结构

> ID：12941866
> 
> 赞同：1
> 
> 时间：2012-10-17T19:26:49.613
> 
> 标签：html, twitter-bootstrap, responsive-design

我对使用 Twitter Bootstrap 2 比较陌生，因为我只使用过 Foundation。我无法弄清楚如何做的一件事是控制较小分辨率的堆叠。

我正在使用三列布局，两个侧边栏和内容区域。看起来像这样：

```
| Sidebar 1 |   |   Content     |   | Sidebar 2 | 
```

但是，在较小的分辨率上，我希望列像这样堆叠：

```
|  Content  |
| Sidebar 1 |
| Sidebar 2 | 
```

我认为在 Bootstrap 中控制这种堆叠的唯一方法是使用 pull-left 或 pull-right。有没有更好的方法，或者甚至可以在 Bootstrap 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:31:42.727

Bootstrap 中没有内置机制来控制堆叠顺序 - 元素将按照它们在 HTML 中出现的顺序堆叠。
如果`.pull-left`并且`.pull-right`正在实现您想要的行为，那可能是您最好的选择，而无需求助于 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:57:42.333

我只是想知道如何做同样的事情，这里是代码：

```
<div class="container">
  <div class="row">
    <div class="span9">
      <div class="row">
        <div class="span6 pull-right">Content</div>
        <div class="span3 pull-left">Sidebar 1</div>
      </div>
    </div>
    <div class="span3">Sidebar 2</div>
  </div>
</div> 
```

我在我的[Blueprint CSS Class](http://www.php-ease.com/classes/blueprint-css.html "蓝图 CSS 类")中使用了同样的“技巧”包，但最近刚刚转换为 Bootstrap 并且正在转换。抱歉，我来晚了一点。

# html - 为什么当我将整个网站上传到虚拟主机时会扩展？

> ID：12941868
> 
> 赞同：4
> 
> 时间：2012-10-17T19:26:52.207
> 
> 标签：html, css, localhost, web-hosting

在我的本地计算机上测试我的网站时，比例是正确的；图像和宽度是我想要的。

但是，当我将它们上传到我的虚拟主机 Dreamhost 时，整个网站似乎都增加了大约 10%（图像、字体大小、侧边栏宽度等）。缩放问题出现在 Firefox、Chrome、IE7-10、Safari 中，但在本地查看时也能正确显示。

代码完全相同。我尝试重新上传图像并测试我的代码，但无济于事。我以前从来没有遇到过这样的问题……有点难过。

![在此处输入图像描述](../Images/41eba67f99af113ebaf59ff6370e912a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:34:54.150

您可能会在本地计算机上放大您的站点。当您将其上传到托管站点时，它会显示它的默认大小视图。所以在制作网页时不要放大或缩小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:56:36.833

有时会发生这种情况，当 CSS 程序员使用`em`而不是`px`. 在某些情况下，可以解决问题，特别是在字体问题上，具有属性：100%。喜欢：

```
body{
font-size:100%;
}

p{
font-size:0.5em;
} 
```

它将为所有字体属性设置 100%，但会在特定区域标签中指定字体大小。然后 100% 将引导区域，标记以精确比例设置调整大小。
你可以为你的`<img>`标签尝试同样的事情（虽然没有经过测试）。首先设置一个公共属性，然后设置任何你想要的。
*我不确定，但这只是一个想法。*:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T22:08:19.813

为了完成[Mayeenul Islam](https://stackoverflow.com/users/1743124/mayeenul-islam)的回答，我可以补充一点，最好在身体标签之后立即放置一个容器。它不会伤害并且有很大帮助。因此，与其强制对每种 CSS 样式进行 100% 的字体校正，不如在全局范围内进行。像这样：

```
 <style>
 body { font-size:100% }
 #container { font-size:1em }
 </style> 
```

# c - 警告：从“int”转换为“u8int”可能会改变其值等

> ID：12941878
> 
> 赞同：4
> 
> 时间：2012-10-17T19:27:26.023
> 
> 标签：c

所以最近我一直在写一些东西，我必须使用很多 uint8/uint16 并将它们相互混合以及整数文字。所以我收到警告，例如：

```
warning: conversion to 'u16int' from 'int' may alter its value 
```

代码：

```
u16int attr = attr_byte << 8; 
```

我喜欢编译时有很多警告。我不喜欢收到警告。有一些（最好是干净的）方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:30:21.637

你总是可以投：

```
u16int attr = (u16int)(attr_byte << 8); 
```

即你告诉编译器你知道你在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T21:35:11.903

C 标准规定对每个操作数执行“整数提升”，结果的类型是提升的左操作数的类型（C99 §6.5.7/3）。

整数提升（§6.3.1.1/2）说如果 an`int`可以代表所有可能的值，那么它被提升为`int`. 所以，假设它`attr_byte`是一个字节，它可以容纳一个`int`，所以它被提升为一个`int`。因此，左移的结果是 a (signed) `int`，因此编译器抱怨从`int`to的转换`u16int`可能会改变其值是正确的。

在这种情况下，左移的结果永远不会大于 0xFF00 或小于 0，因此不会有任何数据丢失。但是，如果您不希望编译器在此处警告您，则需要将结果转换为`u16int`，因为无论其操作数的类型如何，移位的结果将始终是`int`or `unsigned int`（或更大的整数类型）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T19:35:53.613

```
u16int attr = ((unsigned int) attr_byte << 8); 
```

您应该只按位移动无符号类型。

C 标准不需要对上述声明进行任何诊断，但如果您的编译器过于冗长，您可以`uint16_t`向按位移位表达式添加额外的强制转换。

# apache - apache重写规则可以进入httpd.conf吗

> ID：12941879
> 
> 赞同：9
> 
> 时间：2012-10-17T19:27:28.503
> 
> 标签：apache, rewrite, httpd.conf

如何创建一个简单的 apache 重写规则来重写：

[http://domain.com/vanity](http://domain.com/vanity)到[http://domain.com/foo/](http://domain.com/foo/)

重写规则也可以放在 httpd.conf 中还是必须放在 .htaccess 文件中？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T09:50:40.140

把它放在你网站的`<virtualhost>`.

```
RewriteEngine On
RewriteRule ^/vanity$ /foo/ [L] 
```

将`[L]`静默重定向，因此用户仍会在 URL 中看到 /vanity。您可以使用`[R]`强制重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:30:45.707

他们进入**httpd.conf**。查看[文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T14:31:31.073

对于 httpd.conf，将“目录”标签包裹在您的重写规则周围。对于 .htaccess 没有必要。但是，通常认为将它们放在您的 httpd.conf 中更安全，所以这就是我所做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T19:06:11.390

事实上 apache [docs](https://httpd.apache.org/docs/current/howto/htaccess.html)推荐`httpd`而不是`.htaccess`

> 如果您有权访问 httpd 主服务器配置文件，则应完全避免使用 .htaccess 文件。使用 .htaccess 文件会降低 Apache http 服务器的速度。您可以包含在 .htaccess 文件中的任何指令都最好设置在 Directory 块中，因为它具有相同的效果并具有更好的性能。

`httpd.conf`性能更好，但您的`.htaccess`文件看起来会有所不同，`httpd`因为 httpd 中的变量可能具有完整路径。

# .net - AbandonedMutexException 和 ThreadPool.RegisterWaitForSingleObject

> ID：12941880
> 
> 赞同：1
> 
> 时间：2012-10-17T19:27:30.193
> 
> 标签：.net, multithreading, concurrency, synchronization

对象的`WaitOne`方法`Mutex`可以抛出`AbandonedMutexException`. 因此，通过等待互斥体，我能够区分*正常*状态和*废弃*状态。

等待的另一种方法是使用该`ThreadPool.RegisterWaitForSingleObject`方法注册回调。在回调中（在另一个线程中执行）我知道互斥体已经发出信号（正在调用回调），我什至知道等待是否已经超时，但是没有办法知道互斥体是否已经*弃*。

这是对的吗？

# javascript - 滑块中的可滚动标签

> ID：12941884
> 
> 赞同：1
> 
> 时间：2012-10-17T19:27:35.213
> 
> 标签：javascript, jquery, jquery-ui, coda-slider

我一直在努力让这段代码工作一整天。我有一个（内容）滑块（使用 Coda Slider 插件），其中包含更多选项卡，默认情况下可见。基本上我想要实现的是使选项卡可滚动，这意味着当您到达最后一个可见选项卡并单击下一步时，它应该变得可见。与 jQuery UI 可滚动插件完全相同（[演示](http://jsfiddle.net/LtmA5/1/)和[文档](http://code.google.com/p/jquery-ui-scrollable-tabs/)）。

我可以切换到这个，但不幸的是我需要坚持使用 Coda 滑块插件..

我尝试使用可滚动的 jQuery UI 的代码，但没有成功。基本上我需要编写 2 个函数（请参见下面的代码），一个是直接单击选项卡时（更改为当前状态），另一个是单击 prev/next 时。

[演示](http://jsfiddle.net/epnDK/1/)

有任何想法吗？

用户单击上一个/下一个时的功能

```
$('.coda-nav-left, .coda-nav-right').click(function(e) {
  if ($(this).hasClass('coda-nav-left')) {
    $('.coda ul li').remove('.coda ul li:first');
  } else {
    $('.coda ul li'). remove('.coda ul li:last');
  }
}); 
```

当用户单击选项卡并将类更改为当前时的功能

```
function current() {
  var $current = $('.coda-nav ul li a.current');
  if (current) {
    //show next/prev tab next to and sibling from current..
  }
} 
```

# javascript - 在 IE 8 或 9 中设置 a 元素的 href 属性

> ID：12941885
> 
> 赞同：0
> 
> 时间：2012-10-17T19:27:37.740
> 
> 标签：javascript, internet-explorer, location-href

你如何设置 a 元素的 href 属性？此函数在 FF、CHROME 和 SAFARI 中有效，但在 IE 8 或 9 中无效。在 IE 8 或 9 中，vars location 和 href 都只显示“#”

```
 var getLocation = function(href) {
            l = document.createElement("a");
            l.href = href;
            // or l.setAttribute('href', href);
            confirm( "Location = " + l + " href = " +  href );
            return l;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:37:25.603

从支持方面来看，我看不出有任何不工作的理由。你`JavaScript`的 IE8 和 IE9 中启用了吗？如果您认为是，请在第一行添加警报并检查是否正在调用此函数。如果您得到正确的警报，您能否`alert(l.tagName)`在更新之前添加`href`并验证`a(anchor)`元素是否已创建？

# jquery - 滚动时更新元素和窗口之间的距离

> ID：12941889
> 
> 赞同：0
> 
> 时间：2012-10-17T19:27:44.493
> 
> 标签：jquery

如何让 div 元素和浏览器 bootom 的距离自动更新？

这是我计算从元素到窗口底部的距离的代码部分。尽管用户滚动时值没有更新，但它工作正常。让我们假设有几个块，我需要知道其中是否有任何块接近窗口边缘。正如我之前提到的，这会计算加载距离，但如果用户滚动页面，我需要它来更新值。有任何想法吗？

```
var the_height = $(window).height(); // viewport height
var activeimage = $(this);  // div element
distanceBottom = the_height - activeimage.offset().top + activeimage.height(); 
```

[jsFiddle](http://jsfiddle.net/cEDMs/7/)

现在，由于小提琴也在这里，我需要距离值是因为我想确保工具提示在可见区域内。如果拇指真的靠近边缘，我最初的想法是移动使工具提示位置高于拇指。那就是需要距离的地方

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:31:49.600

将代码包装在 window.scroll 事件中，每次滚动文档时都会调用它。如果将它放在文档 onload 事件中，它会被调用一次，因此之后不会更新。

```
$(window).scroll(function () { 
    var the_height = $(window).height(); // viewport height
    var activeimage = $(this);  // div element
    distanceBottom = the_height - activeimage.offset().top + activeimage.height();
}); 
```

**更新**

不确定，如果我正确理解您的要求。注释掉函数定义有帮助吗？我也没有看到 distanceBottom 变量的任何用法。

```
$(document).ready(function () {

    $('div.thumbnail-item').mouseenter(function(e) {

        contents = $(this).find('.tooltip').find('.invisible').html();
        tooltip = $(this).find('.tooltip').find('img');
        wholetooltip = $(this).find('.tooltip');
        var activeimage = $(this);  // div element

        tooltip.attr('src', contents);
        //$(window).scroll(function () { 
        var the_height = $(window).height(); // viewport height
        distanceBottom = the_height - activeimage.offset().top + activeimage.height();
        //});

        if (tooltip[0].complete) { // if image already loaded
            tooltipWidth = wholetooltip.width();
            tooltipHeight = wholetooltip.height();

            imgwidth = activeimage.width();
            imgheight = activeimage.height();

            test = 0 - tooltipHeight + imgheight; // will position nice without gray border

            activeimage.css('z-index','999')
        .children("div.tooltip")
        .css({'top': test,'left': imgwidth + 30,'display':'block'});

        } else { // if image not loaded
        tooltip.load(function() {

            imgwidth = activeimage.width();
            imgheight = activeimage.height();
            test = activeimage.offset().top - activeimage.offset().top - imgheight;

            activeimage.css('z-index','999')
        .children("div.tooltip")
        .css({'top': test,'left': imgwidth + 30,'display':'block'});

            tooltip.css({
            'border-color': 'red',
            'border-width': '5px'
            });
        });
        }

    }).mouseleave(function() {

        // Reset the z-index and hide the image tooltip 
        $(this).css('z-index','10')
        .children("div.tooltip")
        .animate({"opacity": "hide"}, "fast");
    });

}); 
```

# joomla - 使用超级用户获取没有 FTP 或 MYSQL 的 Joomla 网站

> ID：12941890
> 
> 赞同：2
> 
> 时间：2012-10-17T19:27:47.270
> 
> 标签：joomla, joomla2.5, joomla-extensions

我想知道是否可以在没有 ftp 或 phpmyadmin 的情况下下载/获取 Joomla 网站。

我有超级用户帐户，但是我遇到了一位老开发人员的问题。我想获取该网站并将其移至新服务器。

是否有扩展来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:50:51.170

如果您有管理员权限，请尝试使用 Akeeba

[Akeeba 备份](https://www.akeebabackup.com/products/akeeba-backup.html)

您可以使用 Akeeba Kickstart 备份您的站点并轻松放入另一台服务器

[Akeeba 启动](https://www.akeebabackup.com/products/akeeba-kickstart.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:44:02.793

joomla.org 的 Joomla 扩展目录中列出了一些用于备份的第三方解决方案。您需要访问 Joomla 管理员才能安装它们。但是为了将它移动到其他任何地方，您将需要访问来创建一个新的 MySQL 数据库。

我的专业建议是不要使用这种方法，除非你别无选择。如果您和其他人不知道，首选的方法是创建网站的 tar 球并做数据库的 mysqldump。一旦文件与数据库一起恢复，位于 Joomla 安装根目录中的 configuration.php 文件需要为新配置进行编辑。

# python - 腌制一个类时，我在 python 中的行为与在 cython 中的行为不同

> ID：12941899
> 
> 赞同：4
> 
> 时间：2012-10-17T19:28:56.273
> 
> 标签：python, import, pickle, cython

我有以下文件层次结构：

```
python/apps/A.py
      /geometrylib/__init__.py
      /geometrylib/B.py
      /geometrylib/geometry.py
      /geometrylib/goemetry.pyx
      /geometrylib/goemetry.pyd 
```

geometry.pyx 和 geometry.py 包含相同的类 Camera（cython 版本使用 cdef 定义类）。A.py 和 B.py 都导入几何模块。

如果我导入 cython 版本（编译为 geometry.pyd），我可以从 python/geometrylib 文件夹中的 B.py 中正确地腌制相机。但是我不能从 python/apps 文件夹中的 A.py 腌制相机，我得到以下异常：

pickle.PicklingError: Can't pickle : it's not found as geometry.Camera

但是，如果我删除 geometry.pyd 并导入 python 版本（geometry.py），那么我可以从 A.py 或 B.py 腌制相机。除了删除geometry.pyd（相同的python命令行，在两种情况下都从相同的文件夹运行）之外，没有其他任何变化。 **为什么会有这种差异？**

稍微挖掘一下，我发现异常发生在 C:\Python27\Lib\pickle.py 第 742 行

```
try:
    __import__(module)            #line 742
    mod = sys.modules[module]
    klass = getattr(mod, name)
except (ImportError, KeyError, AttributeError):
    raise PicklingError(
        "Can't pickle %r: it's not found as %s.%s" %
        (obj, module, name)) 
```

在 A.py 中，我导入了 cython 版本（geometry.pyd），（我腌制了一个 Camera 实例以触发期望）模块是“几何”并`__import__(module)`触发异常。在 A.py 中，我导入了 python 版本（geometry.py），（并且我腌制了一个相机实例以触发期望）模块是“geometrylib.geometry”并`__import__(module)`正确导入模块。

我已经通过将 python/geometrylib 添加到 PYTHONPATH 解决了这个问题，然后我可以使用 cython 版本从 A.py 和 B.py 正确地腌制相机。

**这是它应该如何工作的吗？**我不喜欢我的解决方案。**有人有更好的解决方案吗？**

编辑添加一些额外的信息。

此外，根据要求，这是我用来构建 cython 扩展的 setup.py。

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import numpy

setup(
    cmdclass = { 'build_ext': build_ext},
    ext_modules = [Extension("geometry", ['geometry.pyx'], include_dirs=[numpy.get_include(), "."])]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T18:56:57.340

您正在构建 geometry.pyx 作为顶级模块，而实际上它是`geometrylib`包的一部分。结果，`Camera`类被分配了不正确的`__module__`值（`geometry`而不是`geometrylib.geometry`），并且pickler 在尝试查找名为 的顶级模块时失败`geometry`。

您应该遵循标准打包指南，即将 setup.py 放入顶级模块（geometrylib）旁边的“Python”文件夹中。设置调用将如下所示：

```
setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("geometrylib.geometry", ['geometrylib/geometry.pyx'], include_dirs=[numpy.get_include(), "."])]) 
```

# java - 在 JBoss 中运行正常的应用程序

> ID：12941900
> 
> 赞同：1
> 
> 时间：2012-10-17T19:28:58.487
> 
> 标签：java, jboss7.x

我需要在 JBoss AS 7 中运行一个没有接口或任何东西的普通 Java 应用程序。该应用程序将不时启动线程来执行一些工作，然后断开连接，因此该应用程序将运行一个计时器或其他东西做。

所以我需要一个应用程序的入口点来启动将启动线程的计时器，但我不知道该怎么做。任何帮助表示赞赏

# c# - 根据 ID 数组选择多个对象

> ID：12941901
> 
> 赞同：1
> 
> 时间：2012-10-17T19:29:01.157
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, entity

我有一个 ProgramID 数组，并希望根据有多少 ProgramId 动态创建许多 Select 语句。

例如：

```
 var surveyProgramVar = surveyProgramRepository.Find().Where(x => x.ProgramId == resultsviewmodel.ProgramIds.FirstOrDefault()); 
```

这是一个使用单个 ProgramId.FirstOrDefault() 的 select 语句示例。如何创建 SurveyProgramVars 列表/数组并为数组中的每个 ProgramIds 选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:31:37.547

它不一定是最佳的，但您可以尝试：

```
var surveyProgramVar = surveyProgramRepository.Find()
                       .Where(x => resultsviewmodel.ProgramIds.Contains(x.ProgramId)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:32:07.103

您可以尝试以下方法：

```
var surveyProgramVar = surveyProgramRepository.Find().Where(x => resultsviewmodel.ProgramIds.Contains(x.ProgramId)); 
```

*提示：*如果该方法对数据库产生了影响，那么如果您为查询的语句`Find()`创建一个特定的方法会很好。`IN`如果您不这样做，它将获取表上的所有记录并将其过滤到内存中（linq to objects），这可以工作但不是很好。您的代码可能类似于：

```
var surveyProgramVar = surveyProgramRepository.FindByProgramsId(resultsviewmodel.ProgramIds); 
```

# c# - 使用相对路径检查文件是否存在

> ID：12941908
> 
> 赞同：26
> 
> 时间：2012-10-17T19:29:44.340
> 
> 标签：c#

使用相对路径检查文件是否存在的最佳方法是什么。

我使用了以下方法，但尽管文件存在，但它返回 false。

```
 bool a = File.Exists("/images/Customswipe_a.png"); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T19:32:36.087

那不是相对路径。您需要省略第一个，`/`否则它将被解释为已植根（即 C:/images...）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T19:43:32.607

我猜您是在 asp.net 应用程序中运行此代码，这就是您得到错误的原因。

在 asp.net 中，您应该使用`Server.MapPath("/images/Customswipe_a.png")`获取“正确”路径（相对于 Web 应用程序根目录）。否则，您将获得网络服务器可执行文件的本地路径（IIS/WEBDAV/..name 任何其他）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-17T19:33:19.207

相对路径是相对于当前工作目录的。它可能不是应用程序目录。调用**GetCurrentDirectory()**来检查您正在测试的实际路径。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-17T21:15:16.657

你只需要定义你的文件是相对的

*   您的应用程序主程序集？
*   当前目录？
*   应用数据目录？
*   给它命名...

在每种情况下，我建议您通过`Path.Combine`方法将其转换为绝对路径：

```
public static readonly string AppRoot = Path.GetDirectoryName(Assembly.GetEntryAssembly().Location);

...

//calling with a '/' heading makes the path absolute so I removed it
var fullPath = Path.Combine(AppRoot, "images/Customswipe_a.png");
var exists = File.Exists(fullPath); 
```

这样您就可以保证您正在寻找的地方。甚至打开/保存文件对话框也可能会更改您的当前目录。因此，没有完整路径的调用`File.Exists`通常是一个错误的决定。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-30T14:11:29.717

您可以使用 System.IO.DirectoryInfo 测试此路径：

```
DirectoryInfo info = new DirectoryInfo("/images/Customswipe_a.png");
string absoluteFullPath = info.FullName; 
```

正如 Mike Park 正确回答的那样，这条路径很可能是（即 C:/images...）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T19:34:51.703

相对路径，是**相**对于某物的。在此 API 中，它将根据文档[File.Exists](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)：

> 相对路径信息被解释为相对于当前工作目录。

所以这里的一切都取决于执行此查询时*CurrentDirectoty是什么。*

另外，您的路径不是有效的桌面路径（我假设您从一些网络文件或知识中选择它）。要了解指定路径是否包含无效字符，请使用[GetInvalidCharacters](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidpathchars.aspx)函数。

在您的特定情况下，使用`@"\images\Customswipe_a.png"`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T19:46:06.120

在 WinForms 应用程序中，您可以使用以下命令获取 exe 文件的目录

```
string directory =
    Path.GetDirectoryName(System.Windows.Forms.Application.ExecutablePath); 
```

另一种解决方案使用反射

```
string directory =
    Path.GetDirectoryName(Assembly.GetEntryAssembly().Location); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-17T19:33:14.810

该路径是相对于您的二进制文件的位置。对于视觉工作室项目，这将是`%PROJECTDIR%/bin/(RELEASE||DEBUG)/`

我要做的是将文件系统根目录放在配置文件中，并将其用作您的相对路径。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-26T15:59:10.100

从**.NET Core 3.1**开始，这有效：

使用依赖注入来包含服务`IWebHostEnvironment`

```
private IWebHostEnvironment Env;

public MyController (IWebHostEnvironment env){
    Env = env;
} 
```

然后使用它来获取应用程序根目录的路径`Env.ContentRootPath`

并将其结合起来：

```
var file = System.IO.Path.Combine(Env.ContentRootPath, "images", "some-file.png"); 
```

# html - UIWebView 中令人讨厌的事件点击可视化

> ID：12941910
> 
> 赞同：0
> 
> 时间：2012-10-17T19:29:58.863
> 
> 标签：html, ios, css

我有`UIWebView`一个 iPhone 应用程序。在 html 代码中有一个大图像，名为**loadedBar**，它有一个效果绑定到它，使用jQuery，如下方式：

```
$('#loadedBar').click(function(){ ... }); 
```

函数中的一切都OK，但是有一个我不需要的可视化效果。单击图像时，它会在几分之一秒内变为灰色。我在带有事件的 div 上发现了相同的行为，绑定方式与图像上相同。

这是默认的`UIWebView`事件点击可视化吗？有没有办法将其关闭（一些 CSS 规则可能会起作用），以便应用程序的行为类似于原生应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:40:32.593

您正在寻找：

```
-webkit-tap-highlight-color:<css-color> 
```

> 这是一个继承的属性，可以更改点击突出显示的颜色，遵循 alpha 值。如果您不指定 alpha 值，iOS 上的 Safari 会为颜色应用默认的 alpha 值。要禁用点击突出显示，请将 alpha 设置为 0（不可见）。如果将 alpha 设置为 1.0（不透明），则点击时元素将不可见。

文档：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/AdjustingtheTextSize/AdjustingtheTextSize.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/AdjustingtheTextSize/AdjustingtheTextSize.html)

禁用该属性的示例：

```
-webkit-tap-highlight-color:rgba(0,0,0,0); 
```

# json - 如何使用咖啡脚本遍历 JSON 哈希

> ID：12941915
> 
> 赞同：18
> 
> 时间：2012-10-17T19:30:12.870
> 
> 标签：json, hash, coffeescript, ruby-on-rails-3.2

我是 Coffeescript 的新手，我在解决问题时遇到了问题。我有一个当前存储在变量中的 JSON 对象。如何遍历 JSON 对象中的键以显示与其关联的键名和值？

```
if client
  result = JSON.parse client
  $.each result, (k, v) ->
    alert k + " is " + v 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-17T19:47:22.587

```
for key, value of result
  console.log "#{key} and #{value}" 
```

更多在[文档#loops](http://coffeescript.org/#loops)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-30T08:33:53.647

```
result = JSON.parse client
     for c in result
        console.log(c.key +"-"+ c.value) 
```

这是工作！

# php - 将 pchart 与 cakephp 集成时的奇怪字符

> ID：12941922
> 
> 赞同：-1
> 
> 时间：2012-10-17T19:30:30.097
> 
> 标签：php, cakephp, pchart

我已将 pChart 集成到 cakePHP 2，但它根本没有显示任何图表。只是在使用 pchart 的 autoOutput 功能时显示一些奇怪的字符。任何帮助将不胜感激。

是这样显示的

> `?PNG IHDR???? IDATx???{\Uu????A$DD?dfDhD"5???c?9f?y?j3k??3?~?1+???2?8f??8ffffddFHj^????r???????b??~>z????f?6?|?Z??]???/? "?v "r?X"??v ??'X??kG???????1X?a??????v?'N??Oj??|i%RC ,??y3k?????4l?}?y?M?HK#!???????5?6l`??e?Z?1?W?$%?z?Qÿ?i??C??P???dgs???????#^J.????-YY?^? fy@??DG?d ?^???dg???z???(??|?????%.???8????*o?????/F?2 ?? `n???d????&M8s??p??^}???x= p????\w?W???{i????????[{??<8?[????E|?9?&q?=4i???f?5?g?z?p???N??F?????Y?og?lf?Do? ?G??[3?u??lKx8??3}?7???oi????$^??~?M?r?-dfR^n?*?!??CB?s??X??§?RTDv??\??Ea!????C?^??????~? !2??=x ?HM5??c??U?]?-0mÇ{????>'9??u??wdg??V?6??????Fn?????`v?d?N??Z??4??i?????z??}GByy|?5???f?:$?9?;????][%??# G????7?5??Z=?u????-3f?????v? *E=,???DPP?$>?\?8?9sbbx?O????? [{?$???a"-o?e* )!;4W??????''??@?8????%K?T ,?Sq)??{??Fr2:? ????YX[????%x??AA????{?{X?????#?o?N????|iU?6?/???DXqO_e??} ?]??`C?[?z?S?:?? f??`

这是我在控制器中编写的代码：

```
App::import('Vendor', 'PdataClass', array('file' => 'pchart/class' . DS . 'pData.class.php'));
App::import('Vendor', 'PdrawClass', array('file' => 'pchart/class' . DS . 'pDraw.class.php'));
App::import('Vendor', 'PimageClass', array('file' => 'pchart/class' . DS . 'pImage.class.php'));
App::import('Vendor', 'PbubbleClass', array('file' => 'pchart/class' . DS . 'pBubble.class.php'));
$this->autoRender = false;
/* Create and populate the pData object */
$MyData = new pData();  
$MyData->addPoints(array(34,55,15,62,38,42),"Probe1");
$MyData->addPoints(array(5,30,20,9,15,10),"Probe1Weight");
$MyData->addPoints(array(5,10,-5,-1,0,-10),"Probe2");
$MyData->addPoints(array(6,10,14,10,14,6),"Probe2Weight");
$MyData->setSerieDescription("Probe1","This year");
$MyData->setSerieDescription("Probe2","Last year");
$MyData->setAxisName(0,"Current stock");
$MyData->addPoints(array("Apple","Banana","Orange","Lemon","Peach","Strawberry"),"Product");
$MyData->setAbscissa("Product");
$MyData->setAbscissaName("Selected Products");

/* Create the pChart object */
$myPicture = new pImage(700,230,$MyData);

/* Turn of AAliasing */
$myPicture->Antialias = FALSE;

/* Draw the border */
$myPicture->drawRectangle(0,0,699,229,array("R"=>0,"G"=>0,"B"=>0));

$font_name = $fontFolder = APP.'Vendor'.DS.'pchart'.DS.'fonts';

$myPicture->setFontProperties(array("FontName"=>$font_name.DS.'pf_arma_five.ttf',"FontSize"=>6));

/* Define the chart area */
$myPicture->setGraphArea(60,30,650,190);

/* Draw the scale */
$scaleSettings = array("GridR"=>200,"GridG"=>200,"GridB"=>200,"DrawSubTicks"=>TRUE,"CycleBackground"=>TRUE);
$myPicture->drawScale($scaleSettings);

/* Create the Bubble chart object and scale up */
$myPicture->Antialias = TRUE;
$myBubbleChart = new pBubble($myPicture,$MyData);

/* Scale up for the bubble chart */
$bubbleDataSeries   = array("Probe1","Probe2");
$bubbleWeightSeries = array("Probe1Weight","Probe2Weight");
$myBubbleChart->bubbleScale($bubbleDataSeries,$bubbleWeightSeries);

/* Draw the bubble chart */
$myBubbleChart->drawBubbleChart($bubbleDataSeries,$bubbleWeightSeries,array("BorderWidth"=>4,"BorderAlpha"=>50,"Surrounding"=>20));

/* Write the chart legend */
$myPicture->drawLegend(570,13,array("Style"=>LEGEND_NOBORDER,"Mode"=>LEGEND_HORIZONTAL));

$myPicture->autoOutput(APP.'Vendor'.DS.'pchart'.DS.'pictures'.DS.'example.jpeg'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:06:36.847

找到了我发现 pchart 现在使用 CakePHP 2.0 版本的解决方案。我只是在代码末尾的一行： **`exit;`**

谢谢

# php - php中的sha1没有正确存储在mysql中

> ID：12941923
> 
> 赞同：2
> 
> 时间：2012-10-17T19:30:34.017
> 
> 标签：php, mysql, sha1

我使用以下代码将密码存储到 mysql

```
 if (!$errors) {
    // include the connection file
    require_once('connection.inc.php');
    $conn = dbConnect('write');
    // create a salt using the current timestamp
    $salt = time();
    // encrypt the password and salt
    $pwd = sha1($password, $salt);
    echo $pwd;
    // prepare SQL statement
    $sql = 'INSERT INTO users (username, salt, pwd)
            VALUES (?, ?, ?)';
    $stmt = $conn->stmt_init();
    $stmt = $conn->prepare($sql);
    // bind parameters and insert the details into the database
    $stmt->bind_param('sis', $username, $salt, $pwd);
    $stmt->execute();
    if ($stmt->affected_rows == 1) {
        $success = "$username has been registered. You may now log in.";
    } elseif ($stmt->errno == 1062) {
        $errors[] = "$username is already in use. Please choose another username.";
        } else {
            $errors[] = 'Sorry, there was a problem with the database.';
        }

} 
```

密码字段 pwd 定义为 CHAR 40。当我检查它时，我发现它包含以下内容：

```
ƒ7Ž{9‰ù|EòsŒs”ºþ 
```

无论我输入什么密码。自然，当我尝试使用以下代码登录时，这与密码无法比较：

```
 require_once('connection.inc.php');
$conn = dbConnect('read');
// get the username's details from the database
$sql = 'SELECT salt, pwd FROM users WHERE username = ?';
// initialize and prepare  statement
$stmt = $conn->stmt_init();
$stmt->prepare($sql);
// bind the input parameter
$stmt->bind_param('s', $username);
// bind the result, using a new variable for the password
$stmt->bind_result($salt, $storedPwd);
$stmt->execute();
$stmt->fetch();
// encrypt the submitted password with the salt
// and compare with stored password
if (sha1($password . $salt) == $storedPwd) {
    $_SESSION['authenticated'] = 'Jethro Tull';
    // get the time the session started
    $_SESSION['start'] = time();
    session_regenerate_id();
    header("Location: $redirect");
    exit;
} else {
    // if no match, prepare error message
    echo "  pwd " . $password;
    echo "  salt " . $salt;
    echo "  sha1 " . sha1($password . $salt);
    echo "  St. pwd " . $storedPwd;
    $error = 'Invalid username or password';
} 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:32:15.847

不确定这是否是您唯一的问题，但

```
 $pwd = sha1($password, $salt); 
```

不是你如何使用该`sha1`功能。[http://php.net/manual/en/function.sha1.php](http://php.net/manual/en/function.sha1.php)

`time()`将始终评估为`TRUE`，因此您将原始二进制格式插入到您的 char 密码字段中。导致您所看到的问题。

你可能想要做的是

```
 $pwd = sha1($password . $salt);
                       ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:34:20.023

sha1 默认返回二进制哈希，您将其存储在 char 字段中 - char 字段受字符集转换的影响，这意味着 mysql 正在修改哈希。将字段转换为二进制/varbinary，而不是进行字符集转换

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:35:37.957

您有一个简单的错字，在将数据插入数据库时​​，您使用逗号 ( `,`) 而不是点 ( )。`.`

```
// encrypt the password and salt
$pwd = sha1($password, $salt); 
```

将此与验证密码时生成哈希和的位置进行比较：

```
// encrypt the submitted password with the salt
// and compare with stored password
if (sha1($password . $salt) == $storedPwd) { 
```

由于两者具有非常不同的含义，因此很小的错误将总体上产生巨大的后果。

您想形成一个由`$password`加号组成的新字符串，`$salt`但您现在给出了`sha1`两个参数而不是一个。

The second argument to `sha1` controls what kind of data the function will return, plaintext (if false, default) vs raw data (if true).

# c# - 无法使用 linq 插入数据库

> ID：12941931
> 
> 赞同：0
> 
> 时间：2012-10-17T19:31:25.397
> 
> 标签：c#, linq

我正在尝试将一组人插入到数据库表中。我可以毫无问题地从数据库中进行选择，但是当我尝试输入时，我得到了

```
Cannot add an entity with a key that is already in use 
```

我知道这意味着什么，但为什么会这样。我在表 id 上有增量。这是我的代码。

```
 public static List<Person> GetPeople(DataContext db)
        {
            List<Person> people = new List<Person>();            
            Table<Person> People = db.GetTable<Person>();

            for (int i = 0; i < 5; i++)
            {
                Person pers = new Person();
                pers.PersFirstName = "Wesley " + i;                
                //pers.PersId is the primary key that I want to auto-increment and not have to set it here
                people.Add(pers);            
            }
            People.InsertAllOnSubmit(people);
            People.Context.SubmitChanges();

            IQueryable<Person> query =
            from person in People
            select person;

            return people;
        } 
```

问题发生在生产线上

```
People.InsertAllOnSubmit(people); 
```

有什么特殊的方法我必须用 Linq 设置自动增量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:44:47.420

在您的 dbml 设计器中，单击作为主键的列并确保以下属性具有这些值：

```
Auto Generated Value: True
Auto-Sync: OnInsert
Primary Key: True 
```

由于您没有使用 dbml 设计器，因此您可以使用字段属性的 Column 属性上的参数来完成它（这将是您可能已经拥有的其他参数的补充）。

```
[Column(AutoSync=AutoSync.OnInsert, DbType="Int NOT NULL IDENTITY", IsPrimaryKey=true, IsDbGenerated=true)] 
```

# c++ - “return std::move(*this);”有什么不正确的地方吗？

> ID：12941932
> 
> 赞同：0
> 
> 时间：2012-10-17T19:31:26.400
> 
> 标签：c++, c++11, move-semantics

我知道某个对象仅作为临时对象创建（它是库中的私有成员对象）。有时，通过将成员函数链接在一起（）进一步初始化该对象`TempObj().Init("param").Init("other param")`。我想使用该临时实例为另一个对象启用移动构造，所以我想知道关于`return std::move(*this)`.

```
struct TempObj
{
    TempObj &&Member() { /* do stuff */ return std::move(*this); }
};

struct Foo
{
    Foo(TempObj &&obj);
};

// typical usage:
Foo foo(TempObj().Member()); 
```

它在功能上等同于这个吗？

```
struct TempObj
{
    TempObj(TempObj &&other);
    TempObj Member() { /* do stuff */ return *this; }
};

Foo foo(TempObj().Member()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:33:49.160

使用移动语义，您不希望（或不需要）从函数返回 r-value 引用...... r-value 引用用于“捕获”未命名的值或内存地址。当您从调用者的角度返回对实际上是左值的对象的右值引用时，语义都是错误的，并且当其他人使用您的对象的方法时，您就有机会出现不必要的意外.

换句话说，最好将您的代码定向为如下所示：

```
Foo foo(std::move(TempObj().Member())); 
```

并且`TempObj::Member`只需返回一个左值引用。这使移动变得明确，并且对于使用您对象的方法的人来说没有任何意外。

最后，不，它在功能或语义上不等同于您的上一个示例。您实际上正在制作对象的临时*副本*，并且该副本将是一个 r 值对象（即，在这种情况下是一个未命名的对象）......因为 r 值引用的假设是该对象是未命名的值或对象，因此它可以被传递给它的函数无害地修改，该函数采用 r 值引用参数。另一方面，如果您将对象的副本传递给函数，则该函数无法修改原始对象。它将简单地修改引用的临时 r-value，当函数退出时，对象的临时 r-value 副本将被销毁。

# c++ - 三元运算符不适用于 lambda 函数

> ID：12941933
> 
> 赞同：14
> 
> 时间：2012-10-17T19:31:30.700
> 
> 标签：c++, lambda, c++11, conditional-operator

我正在分配`std::function<double()>`一个 lambda 表达式。这个片段有效

```
if(fn_type==exponential)
    k.*variable = [=,&k](){ return initial*exp(-k.kstep*par); };
else
    k.*variable = [=,&k](){ return initial*pow(k.kstep, par); }; 
```

而如果我想使用三元运算符

```
k.*variable = (fn_type==exponential ? [=,&k](){ return initial*exp(-k.kstep*par); } : [=,&k](){ return initial*pow(k.kstep, par); }); 
```

我收到以下错误：

```
error: no match for ternary ‘operator?:’ in <awfully long template error, because this whole thing is in a class defined in a function...> 
```

这是一个 gcc 错误（我使用的是 4.7.2）吗？否则为什么标准中有这个限制？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T19:43:21.437

条件运算符的第二个和第三个操作数必须具有相同的类型，或者必须有某种通用类型，它们都可以转换为编译器可以识别的类型。编译器只会考虑少数几种转换。

您的两个 lambda 表达式具有不同的类型，并且没有可以将它们都转换为的通用类型（`std::function<double()>`不能考虑转换为用户定义的类型，例如 ，因为可能存在无限数量的有效目标类型）。

您可以直接将每个操作数转换为`std::function<double()>`：

```
k.*variable = fn_type==exponential
    ? std::function<double()>([=,&k](){ return initial*exp(-k.kstep*par); })
    : std::function<double()>([=,&k](){ return initial*pow(k.kstep, par); }); 
```

但实际上，使用`if`/更清洁`else`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-10-18T12:00:05.450

也面临这个问题 - 不会编译！

'if/else' 对我不好，我想打开自动类型推断功能。

> ```
>  auto memcpy_traits = 
>         [&](uint8_t* line_dst, const uint8_t* curr_src, const size_t bytes_to_copy) {
>             std::memcpy(line_dst, curr_src, bytes_to_copy);
>             line_dst += bytes_to_copy;
>             curr_src += bytes_to_copy;
>     }
>     :
>      [&](uint8_t* line_dst, const uint8_t* curr_src, const size_t bytes_to_copy) {
>      std::memcpy(line_dst, curr_src, bytes_to_copy);
>      line_dst += bytes_to_copy;
>      curr_src += bytes_to_copy;
>      }; 
> ```

# c# - 更新数据库后 GridView 未更新

> ID：12941940
> 
> 赞同：0
> 
> 时间：2012-10-17T19:31:50.760
> 
> 标签：c#, asp.net, gridview

我有一个 GridView。我在这个 GV 中显示系统中的所有用户，并且我有一个按钮可以通过将表中已删除的列更新为 1 来删除用户。

```
<asp:GridView ID="GridView1" AllowPaging="True" OnPageIndexChanging="GridView1_PageIndexChanging"
            PageSize="20" runat="server" OnRowCommand="GridView1_OnRowCommand"
            DataKeyNames="Id, Email" EnableViewState="false" AutoGenerateColumns="false">

            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton ID="buttonDelete" runat="server" CommandName="Remove" Text="Delete"
                            CommandArgument='<%# Eval("Id") + ";" +Eval("Email")%>'
                            OnClientClick='return confirm("Are you sure you want to delete this user?");' />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="FirstName" HeaderText="First Name" />
                <asp:BoundField DataField="LastName" HeaderText="Last Name" />
                <asp:BoundField DataField="Email" HeaderText="Email" />
                <asp:BoundField DataField="Status" HeaderText="Status" />
                <asp:BoundField DataField="Location" HeaderText="Location" />
            </Columns>
        </asp:GridView>

protected void GridView1_OnRowCommand(object sender, GridViewCommandEventArgs e)
{
    string cmdName = e.CommandName;
    string[] commandArgs = e.CommandArgument.ToString().Split(new char[] { ';' });
    string UserRowID = commandArgs[0];
    string Email = commandArgs[1];

    string sql = "UPDATE USERS " +
    "SET [Deleted]= 1" +
    "WHERE ROWID= " + UserRowID;

    DataTable table = PublicClass.ExeSql_Table(sql, "Utility");

    GridView1.DataBind();
} 
```

当我单击删除时，它会更新数据库，但不会从 GV 中删除该行。我需要刷新页面或单击两次以删除该行。如何一键完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T19:35:27.043

当您删除该行时，使用数据重新绑定您的网格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T19:36:12.773

您只需再次加载 DataSource 并将其绑定到 GridView：

```
DataTable table = PublicClass.ExeSql_Table(sql, "Utility");
GridView1.DataSource = table; //  <-- you've forgotten this
GridView1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:38:24.403

在链接按钮“buttonDelete”中指定 OnCommand 字段

例子 ：

```
OnCommand = "Delete_Record" 
```

并在 aspx.cs 中编写以下代码

```
 protected void Delete_Record(object sender, CommandEventArgs e)
{
       GridView1.DataSource = table; 
       GridView1.DataBind();    
} 
```

# asp.net - 使用 msdeploy(webdeploy) 部署网站

> ID：12941945
> 
> 赞同：0
> 
> 时间：2012-10-17T19:32:32.030
> 
> 标签：asp.net, msdeploy, webdeploy

我正在使用 webdeploy 在 tfs2010 中的构建服务器之后发布我的网站。

我已将 web.config 从包中排除，因为我想将其保留在目标服务器上。

问题是由于 web.config 不是包的一部分，webdeploy 会从目标服务器中删除 web.config 文件！

我该如何防止呢？我在选项中没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:14:12.587

我发现...我需要将此额外参数添加到 msdeploy.exe ：

-enableRule:DoNotDeleteRule

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:11:07.390

您需要将其包含在您的包裹中。

# java - 将负数变为0的java函数

> ID：12941948
> 
> 赞同：27
> 
> 时间：2012-10-17T19:32:39.440
> 
> 标签：java

java中是否有可以将任何负数转换为0的内置函数？我想要做的是从变量中减去数字，并确保它不会低于 0。这是否可以使用内置函数或者我必须自己编写？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-17T19:35:21.630

你应该使用：

```
 Math.max(0, yourVar) 
```

您不需要内置函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-16T09:53:26.753

您不需要任何函数将负数变为零。您可以使用变量的条件声明并将负值变为零。

在条件声明中，问号前面的是条件。如果条件评估为真，则问号后面的第一个值将分配给变量。

如果条件评估为假，则列之后的值将分配给变量。在下面的例子中，如果 a 不携带小于零的值，它将被赋予其自身的值。

```
int a = -1;
a = a < 0? 0 : a; 
```

# r - 如何使用 R 或 Gnuplot 绘制时间线

> ID：12941949
> 
> 赞同：3
> 
> 时间：2012-10-17T19:32:41.687
> 
> 标签：r, gnuplot, timeline

使用 R 或 Gnuplot 绘制如下图所示时间线的最佳且简单的方法是什么：

![在此处输入图像描述](../Images/41185da3acbec856c446af1b096916ba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T14:31:52.083

我的解决方案使用“烛台”绘图样式，该样式似乎在 X 和 Y 列输入方面是固定的。因此，必须手动旋转输出图像，但这似乎是生成从基轴“浮动”的条形的唯一选项。可能您会想要稍微调整样式，但这应该可以帮助您入门。

![示例项目时间线图](../Images/f700c4462011270c0e2f4731d57848f4.png)

样本输入数据；注意我必须在第 1 列中添加任意 Y 轴（旋转 X 轴）坐标：

```
1 proj1     768.83      2011-05-12 2013-06-19
2 proj2     426.79      2011-06-15 2012-08-15
3 proj3     429.89      2011-06-17 2012-08-20
4 proj4     318.02      2012-01-06 2012-11-19
5 proj5     278.72      2011-11-10 2012-08-15
6 proj6     231.16      2011-11-14 2012-07-02
7 proj7     230.27      2011-11-15 2012-07-02
8 proj8     230.23      2011-11-15 2012-07-02
9 proj9     581.81      2011-11-15 2013-06-19
10 proj10   230.08      2011-11-15 2012-07-02 
```

（为下面的脚本保存为“dates4.dat”。）

gnuplot 脚本：

```
# horizontal timelines / time bars with gnuplot ; manually rotate result image at end

# size specification controls landscape vs. portrait, this is for A4 paper size
set terminal pdf size 21cm,29.7cm
set output 'dates.pdf'

# margins get confused so set explicitly
set lmargin at screen 0.04
set bmargin at screen 0.07
set tmargin at screen 0.97

# rotation will swap Y and X axis

# input Y data as date values
set ydata time
set timefmt "%Y-%m-%d"

# y coordinates now specified in time values
set yrange ['2011-03-01':'2014-01-01']

# normal Y axis labels end up on top of graph, don't want that
unset ytics

# format y2 axis for time scale, this will appear along bottom of graph
set y2data time
set format y2 "%b %Y"
set y2tics font "Courier, 8"
set y2tics rotate by 90 

# y2tics 'incr' measured in seconds for y2data time, this is 4 months = 4*30*24*60*60
set y2tics '2011-05-12',10368000,'2013-12-01'

set xrange [-1:28]
set xtics font "Courier, 8"
set xtics rotate by 90 offset 0,-5 out nomirror

# cannot rotate key (dataset label), so must create manually
unset key
set label 'elapsed project time' at 0,'2013-06-15' rotate font "Courier, 8"
set object 1 rect from -0.1,'2013-11-01' to 0,'2013-12-01' fillstyle solid noborder fillcolor rgb "red"

# note duplication of date columns 4 and 5 so don't get whiskers
plot "dates4.dat" using 1:4:4:5:5:xticlabels(2) with candlesticks fillcolor rgb "red" 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:26:29.987

不确定 r，但在 gnuplot 中，您可以将轴声明为时间格式。要实现您的 y 轴示例：

```
set ydata time # tells gnuplot that y is a time series
set ylabel 'Submission day in August'
set timefmt '%Y-%m-%d' # this should be set to the format of your date series
set format y '%d' # sets the axis labels format 
```

除此之外，gnuplot 支持多个系列、网格和任意形状，所以你应该没问题。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T22:14:18.497

使用 @robm 和 package 的示例数据`vistime`，你会得到

```
install.packages("vistime")
library(vistime)
data<-read.csv(text="proj1,768.83,2011-05-12,2013-06-19
                proj2,426.79,2011-06-15,2012-08-15
                proj3,429.89,2011-06-17,2012-08-20
                proj4,318.02,2012-01-06,2012-11-19
                proj5,278.72,2011-11-10,2012-08-15
                proj6,231.16,2011-11-14,2012-07-02
                proj7,230.27,2011-11-15,2012-07-02
                proj8,230.23,2011-11-15,2012-07-02
                proj9,581.81,2011-11-15,2013-06-19
                proj10,230.08,2011-11-15,2012-07-02", header=F, sep=",")
data$tooltip=paste(data$V1, data$V2)
vistime(data, events="V1", start="V3", end="V4") 
```

[![在此处输入图像描述](../Images/dc9d99dc98041f7e5c7fb3ca4f287dca.png)](https://i.stack.imgur.com/Fq2bc.png)

或者，或者，

```
vistime(data, events="V2", start="V3", end="V4", groups="V1") 
```

[![在此处输入图像描述](../Images/a2ec1e5eee47720a8ec40609cd25a528.png)](https://i.stack.imgur.com/DxKZF.png)

# firefox - 来自选择器的内容字段中的图像：在 Firefox 中不工作之前

> ID：12941953
> 
> 赞同：0
> 
> 时间：2012-10-17T19:32:53.677
> 
> 标签：firefox, selector, image

我不知道发生了什么，但问题如下：

我试图在内容字段中之前在选择器中加载和图像，如下所示：

```
.commentlist ul.children:before {
   content: url("images/arrow.png") no-repeat;                                                                                                                                    
   top: 13px;
   left: 11px;
   position: relative; 
 } 
```

这就像 Chrome 和 Safari 等 webkit 浏览器中的魅力，但在 Firefox 中不再适用，所以当我打开 Firebug 并查找我的样式时，我可以看到 content 属性没有显示，因为无法加载内容但是如果我尝试通过 Firebug 将它放在内容上，它就可以工作！无论刷新多少次，即使我尝试清空缓存，也从不显示内容样式，我错过了什么？我希望有人能帮我解决这个问题。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:43:25.787

`content`这不是该属性的有效值。有关规范，请参见[http://www.w3.org/TR/CSS21/generate.html#content](http://www.w3.org/TR/CSS21/generate.html#content)。

特别是，该`no-repeat`部分不允许在那里。

当然，如果您查看其控制台，Firefox 会告诉您该值无效...

# java - Spring Beans - 如何将null作为构造函数arg？

> ID：12941955
> 
> 赞同：45
> 
> 时间：2012-10-17T19:32:55.770
> 
> 标签：java, spring

我定义了以下bean：

```
<bean id="myBean" class="com.me.myapp.Widget">
    <constructor-arg name="fizz" value="null"/>
    <constructor-arg name="buzz" ref="someOtherBean" />
</bean> 
```

当我运行我的应用程序时，Spring 抛出一个 bean 配置异常：

```
[java] Exception in thread "main" org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'myBean' defined in class path resource [spring-config.xml]:
Unsatisfied dependency expressed through constructor argument with index 0
of type [com.me.myapp.Widget]: Could not convert constructor argument value of
type [java.lang.String] to required type [com.me.myapp.Widget]: Failed to
convert value of type 'java.lang.String' to required type
'com.me.myapp.Widget'; nested exception is java.lang.IllegalStateException:
Cannot convert value of type [java.lang.String] to required
type [com.me.myapp.Widget]: no matching editors or conversion strategy found 
```

`Widget`如果我编写以下 Java，我只想创建一个类似的内容：

```
Widget w = new Widget(null, someOtherBean); 
```

我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-17T19:36:09.883

您可以使用 Spring 的`<null>`标签：

```
<bean id="myBean" class="com.me.myapp.Widget">
    <constructor-arg name="fizz">
            <null />
    </constructor-arg>
    <constructor-arg name="buzz" ref="someOtherBean" />
</bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T19:39:46.200

有时 spring 无法将您提到的顺序中的值注入到构造函数中。如果您尝试使用显式排序会更好，即

```
<constructor-arg index="0" name="fizz"><null/></constructor-arg> 
<constructor-arg index="1" name="buzz"><ref bean="someOtherBean"/></constructor-arg> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T15:30:57.810

this was, actually, not working for me,

so what I've done is, *not* passing the object through spring, but asking "if the object is null", and create New object and assign it to it,

it is also done once (similar to spring), the difference is that, it is not the *best* practice, and the creation point of the object is in the flow of the class, and not in early stage.

# r - 在R中，如何返回观察组，而不是观察次数？

> ID：12941956
> 
> 赞同：1
> 
> 时间：2012-10-17T19:32:59.477
> 
> 标签：r, grouping

我有一个大型数据框，我正在尝试运行 a `for loop`，但需要先获取所有不同的观察结果。我目前正在尝试处理的过程是这样的：

1.  创建观察的列表/向量/数据框
2.  在 a 中使用每个观察`for loop`

这是我解决它的方法：

生成一些数据：

```
x <- gl(12,5) 
```

我正在寻找的结果是所有不同观察结果的列表：

```
1 2 3 4 5 6 7 8 9 10 11 12 
```

我可以创建一个`data frame`，然后像这样删除数字列：

```
list <- data.frame(table(x))

list[,2] <- NULL

print(list) 
```

从这个列表/向量/数据框，我会`for loop`像这样运行：

```
for (i in list) print(i) 
```

必须有一种更有效的方法来获取`for loop`. 有人可以推荐一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:41:06.117

几个选项包括：

```
R> unique(x)
 [1] 1  2  3  4  5  6  7  8  9  10 11 12
Levels: 1 2 3 4 5 6 7 8 9 10 11 12
R> levels(x)
 [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12"
R> as.numeric(levels(x))
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 
```

`levels()`如果您想要分组，这些是最合乎逻辑和最合适的。

现在你是否真的想要这是另一个问题。查看`?split`哪个可以根据一个因素（您可以`lapply()`超过）或`?aggregate`其他因素来拆分数据框。还有**plyr**包，它似乎很受欢迎。

# c# - 更改嵌入式资源文件中的内容

> ID：12941957
> 
> 赞同：0
> 
> 时间：2012-10-17T19:33:06.803
> 
> 标签：c#, text, text-files

我想更改从嵌入式资源作为[流加载的文件的内容。](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)

以下代码获取文件：

```
Stream theFile = Assembly.GetExecutingAssembly().GetManifestResourceStream("_3LinksFourmTool.Resources.fourmlinks.txt"); 
```

[我创建了一个方法，该方法采用提供的Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)中存在的一串文本。该字符串将使用新内容重写到[Stream 。](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)

```
public static void WriteNewTextToFile(string text, Stream theFile)
{

    string fileText = GetAllTextFromFile(theFile);
    ArrayList fileLIst = populateListFromText(fileText);

    using (StreamWriter fileWriter = new StreamWriter(theFile))
    {
        fileWriter.Write("");
        for (int i = 0; i < fileLIst.Count; i++)
        {
            fileWriter.WriteLine(fileLIst[i].ToString());        
        }
    }
} 
```

上面的代码抛出[System.ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception%28v=vs.110%29.aspx)。

此异常是否与文本文件有关`Embedded Resource`？

如何在不引发[System.ArgumentException的情况下修改此文件？](http://msdn.microsoft.com/en-us/library/system.argumentexception%28v=vs.110%29.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:44:11.030

资源无法在运行时修改，部分原因是当时可执行文件正在执行，并且无法对其进行写入。如果您只有程序集，您可以使用外部二进制编辑器来修改它们，或者您可以使用更改后的文件重新编译您的项目。在大多数应用程序平台中，为了打开资源进行写入或执行，您必须先从二进制文件中提取文件，然后对其执行操作。但是你不能放回去。

这里有一些关于如何在设计/编译时操作资源的链接：http: [//msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.90%29.aspx) http://msdn.microsoft。 com/en-us/library/cd818wbk%28v=vs.100%29.aspx

在这种情况下，您是否考虑过使用设置而不是资源？它们可以在运行时保存，所以如果你只需要文本值的东西，那应该很适合你。

# linux - Bash 是否有办法获得关于表达式评估的详细输出？

> ID：12941960
> 
> 赞同：2
> 
> 时间：2012-10-17T19:33:18.360
> 
> 标签：linux, bash, shell, scripting

假设我想知道我的陈述是如何被扩展和解释的`bash`，我应该如何行动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T19:35:41.367

在你的脚本里面

```
set -x 
```

开始调试和

```
set +x 
```

停止调试模式。这样，您可以只调试脚本的一部分而不是所有的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T19:35:03.673

尝试调试模式：

```
bash -x script_name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T19:36:33.037

只是猜测你的意思。试试`set -v`。

# junit4 - 在junit测试之间清除/重置selenium webdriver

> ID：12941962
> 
> 赞同：1
> 
> 时间：2012-10-17T19:33:23.200
> 
> 标签：junit4, selenium-webdriver, jboss-arquillian

我正在使用带有 selenium webdriver 的 arquillian 石墨烯，但我遇到了一个恼人的问题。

WebDriver 似乎在每次测试之间保留页面状态。我目前正在测试登录页面，第一个测试检查登录失败。这行得通。

第二个测试检查登录是否成功。单独运行时，它工作正常。但是，与上面的一起运行，它失败了。在查看页面输出时，似乎用户名字段是第一个测试和第二个测试中的用户名的组合。

例如，第一个测试将用户名设置为“不存在”，第二个测试将用户名设置为“test”，如果我单独运行测试，这将有效。

如果我一起运行它们，用户名字段以“不存在的测试”结束

这表明 webdriver 不会在测试之间“重置”/“清除”页面。

有没有办法让它重置它？

我目前通过在@Before 测试的每个字段上调用 ​​clear() 方法来解决这个问题。

任何援助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:10:11.587

您是否尝试过在 @Before 方法中重新加载应用程序 url？

# javascript - IE9 抛出 DOM 异常：INVALID_CHARACTER_ERR (5)

> ID：12941963
> 
> 赞同：5
> 
> 时间：2012-10-17T19:33:23.627
> 
> 标签：javascript, internet-explorer-9, mootools, domexception

在下面的脚本中，IE9 抛出错误：

SCRIPT5022：DOM 异常：INVALID_CHARACTER_ERR (5) mootools-1.2.1-core-yc.js，第 118 行字符 1

```
Document.implement({
    newElement: function (A, B) {
        if (Browser.Engine.trident && B) {
            ["name", "type", "checked"].each(function (C) {
                if (!B[C]) {
                    return;
                }
                A += " " + C + '="' + B[C] + '"';
                if (C != "checked") {
                    delete B[C];
                }
            });
            A = "<" + A + ">";
        }
        return $.element(this.createElement(A)).set(B); //THIS IS LINE 118
    },
    newTextNode: function (A) {
        return this.createTextNode(A);
    },
    getDocument: function () {
        return this;
    },
    getWindow: function () {
        return this.window;
    }
}); 
```

该片段是开发人员在网站上使用的 Mootools js 库的一部分。是否有解决方法来修复 IE 的错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T19:46:50.813

是的，那段代码是垃圾，你永远不应该做这样的浏览器检查，它是用 JavaScript 101 教授的……哈哈，不能相信那是在 mootools 中吗？无论如何

IE9 不再允许使用疯狂的`document.createElement('<div style="background:red">yay!</div>');`语法（从一开始就没有人应该真正使用过它......）

这是一个例子：

```
var d = document;
var x = d.createElement('div');

x.innerHTML = 'yay';
x.style.backgroundColor = 'red';
x.style.padding = '6px';
x.style.margin = '20px';

d.body.appendChild(x);

var sameHTML = '<div style="background:green;padding:6px;margin:20px;">yay!</div>';

// fails in IE > 8 and other browsers
try {
  var y = d.createElement(sameHTML);
  d.body.appendChild(y);
} catch (err) {
  d.body.appendChild(d.createTextNode(err)); 
}

// quick fix using innerHTML:
var temp = d.createElement('div');
temp.innerHTML = sameHTML;
d.body.appendChild(temp.childNodes[0]); 
```

解决这个问题的方法是创建一个虚拟元素并使用`.innerHTML`然后提取子元素，或者在 mootools 中检查浏览器版本，`IE > 8`如果我记得正确的 mootools 有`Browser.Engine.version`类似的效果，请不要这样做......

编辑：我觉得我还应该补充一点：这`Browser.Engine.trident`是有问题的检查，从代码的角度来看，它也可能发生在其他地方......

啊哈！另一个更新：我在查看 [一个旧的] 支持线程时发现了这一点：

> 您需要更新到 1.2.5 或 1.3。IE9 不支持以前的 MooTools 版本。

所以对脚本的更新应该可以解决你的问题，希望它不会引入更多的错误......你可以在这里得到它：http: [//mootools.net/download](http://mootools.net/download)，你可能想试试那个 1.2.5 版本页面顶部，因为它将具有最少的更改...

祝你好运-ck

# javascript - jQuery：html() 在事件中不可用？

> ID：12941964
> 
> 赞同：3
> 
> 时间：2012-10-17T19:33:25.313
> 
> 标签：javascript, jquery

新手问题：

我有一个带有单个 p 元素的网页。我以为我可以访问事件中的 p.html() ，但不能。有没有办法将事件内的元素作为 jQuery 元素访问？

```
<script src="Scripts/jquery-1.8.2.js"></script>      
    $(function () {
        $("p").first().bind('click',null, function (event) {
            this.innerHTML = "this works";
            this.html('this does not');
        });
    }
    ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T19:34:07.203

`this`in handler function 是您的 DOM 元素..它没有`.html`功能.. 将其包装`$`以使其成为 jQuery 对象并执行`.html`

```
$(this).html('this does work now'); 
```

**完整代码：**

```
$(function () {
    $("p").first().bind('click',null, function (event) {
       this.innerHTML = "this works";
       $(this).html('this does work now');
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T19:34:36.017

在您的上下文中使用`this`时，它是 DOM 元素。您可以使用本机方法，例如`innerHTML`. `html`是一个 jQuery 方法，它需要你使用`$(this).html()`.

* * *

**参考：**

*   `$().html()`- [https://api.jquery.com/html/](https://api.jquery.com/html/)
*   `element.innerHTML`- [https://developer.mozilla.org/en-US/docs/Web/API/Element.innerHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element.innerHTML)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:38:20.583

当您使用`this`时，它是一个`DOM`对象，“html”是`jQuery`对象的方法。

`jQuery object`在使用 any 之前，您需要将其转换为`jQuery api`. 要转换它，只需使用 $( `DOM Object`) 构造。

现在这将起作用 -

```
$(function () {
    $("p").first().bind('click',null, function (event) {
        this.innerHTML = "this works";
        $(this).html('this works !!!)');
    });
}
); 
```

根据[jQuery API](http://api.jquery.com/jQuery/) -

`$()`— 在 DOM 中搜索与提供的选择器匹配的任何元素，并创建一个引用这些元素的新 jQuery 对象：

```
$('div.foo'); 
```

这`div.foo`是`this`您的情况的DOM元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:34:20.840

修改后的代码：这不是一个 jQuery 对象。

```
 $(function () {
        $("p").first().bind('click',null, function (event) {
            this.innerHTML = "this works";
            $(this).html('this will work now');
        });
    }
    ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T19:34:52.170

`this`是 DOM 元素，它不是 jquery 对象。所以使用`$(this)`

```
 $(this).html('this now works'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T19:34:58.043

试试这个（nned jQuery 对象）：

```
$( this ).html() 
```

# r - 2 个向量的样本协方差

> ID：12941972
> 
> 赞同：5
> 
> 时间：2012-10-17T19:33:54.230
> 
> 标签：r

我正在尝试计算这两个向量之间的样本协方差。我定义了一个带有两个输入变量的函数。不知道对不对？我的样本协方差公式也不会运行。谁能帮我用R写出来？

```
 xv = c(1., 5.5, 7.8, 4.2, -2.7, -5.4, 8.9)
  yv = c(0.1, 1.5, 0.8, -4.2, 2.7, -9.4, -1.9)
  sampleCov= function(x,y){ 
    cov(xv,yv) = frac{sum_{i=1}^{n}(x_i-\mu_x)(y_i-\mu_y)}{n-1}].
    return (Cov(xv,yv)
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T19:45:06.100

R 中有一个基函数被调用`cov`，它完全符合您的要求，但如果您想编写一个函数（无需这样做），您可以尝试以下操作：

```
COV<- function(x,y) {
  if(length(x)!=length(y)) {stop('x must have the same length as y ')}
  x.bar <- mean(x)
  y.bar <- mean(y)
  N <- length(x)

  Cov <- (sum((x-x.bar)*(y-y.bar))) / (N-1)
  return(Cov)
}

COV(xv, yv)
[1] 8.697381

cov(xv, yv)
[1] 8.697381 
```

如您所见`COV`，给出了相同的结果，`cov`因此您不必为此编写函数。

此外，您的函数主体没有 R 语法，而是您编写了不一样的 LaTex 语法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T19:45:41.820

只需使用内部`cov()`函数：

```
xv <- c(1., 5.5, 7.8, 4.2, -2.7, -5.4, 8.9)
yv <- c(0.1, 1.5, 0.8, -4.2, 2.7, -9.4, -1.9)
cov(xv, yv)

R> cov(xv, yv)
[1] 8.697381 
```

如果你真的想重新发明轮子：

```
sampleCov <- function(x,y){
    stopifnot(identical(length(x), length(y)))
    sum((x - mean(x)) * (y - mean(y))) / (length(x) - 1)
}

R> sampleCov(xv, yv)
[1] 8.697381 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T00:41:04.860

我知道这很旧，但您可以使用以下公式计算两个矩阵的协方差：

```
 cov_xv_yv <- 1/(length(xv)-1) * t(xv) %*% yv 
```

这是矩阵 xv 和矩阵 yv 的转置的矩阵乘积的 1/(N-1) 倍。

这种形式很容易扩展到许多维度。

# c++ - 如何使用微软的 C++ 分配器

> ID：12941975
> 
> 赞同：4
> 
> 时间：2012-10-17T19:34:03.840
> 
> 标签：c++, stl, allocator

我在[http://msdn.microsoft.com/en-us/library/ee292117.aspx](http://msdn.microsoft.com/en-us/library/ee292117.aspx)和[http://msdn.microsoft.com/en-us/library/ee292134.aspx](http://msdn.microsoft.com/en-us/library/ee292134.aspx)上看到 Microsoft 为专业人士提供宏和类分配器，但我不确定每种缓存策略是什么，如何使用它们。有人可以解释何时使用这些部分吗？

*   缓存模板
    *   `cache_freelist`-`cache_freelist`模板类维护一个大小为 的内存块的空闲列表`Sz`。当空闲列表已满时，它用于`operator delete`释放内存块。当空闲列表为空时，它用于`operator new`分配新的内存块。空闲列表的最大大小由参数`max class`中传递的类决定。`Max`每个内存块都保存`Sz`可用内存的字节数以及所需的`operator new`数据`operator delete`。
    *   `cache_suballoc`-`cache_suballoc`模板类将释放的内存块存储在一个长度无限的空闲列表中，使用，并在空闲列表为空时`freelist<sizeof(Type), max_unbounded>`从分配的更大块中重新分配内存块。`operator new`每个块都包含`Sz * Nelts`可用内存的字节数以及所需的`operator new`数据`operator delete`。分配的块永远不会被释放。
    *   `cache_chunklist`- 此模板类用于`operator new`分配原始内存块，在需要时为内存块分配存储空间；它将释放的内存块存储在每个块的单独空闲列表中，并`operator delete`在其内存块均未使用时用于释放块。每个内存块都保存`Sz`着可用内存的字节数和一个指向它所属块的指针。每个块包含`Nelts`内存块、三个指针、一个 int 和所需的`operator new`数据`operator delete`。

我自己写了几个分配器，但是这个文档只是......令人困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:34:33.060

哇，他们真的把文档弄乱了，不是吗？（我在 Dinkumware 时编写了该代码）

这里的分配器是基于策略的：您可以指定缓存策略和同步策略。

基本思想是更容易编写使用内部缓存并且可以跨线程同步的分配器。有六个预定义的分配器；他们的名字都以 . 开头`allocator_`。如果它们符合您的需求，请使用它们。在 MSDN 的资料中，查看特定分配器描述的第一段；不要阅读他们谈论的“备注” `ALLOCATOR_DECL`；。

您还可以使用该代码创建自己的分配器，这些分配器使用预定义的缓存策略（名称以 开头的模板`cache_`）和同步策略（名称以 开头的模板`sync_`），或者使用您自己的缓存模板和同步模板。从这些部分获取可用的分配器有点乏味，因此标题提供`ALLOCATOR_DECL`了一种方便的方式来生成所有必要的样板，而无需自己编写。`ALLOCATOR_DECL`接受三个参数：要使用的缓存模板的名称、要使用的同步模板的名称以及您正在创建的分配器的名称。所以不要写

```
template <class T> class name
    : public Dinkum::allocators::allocator_base<T, sync<cache > >
    {
    public:
        name() {}
        template <class U> name(const name<U>&) {}
        template <class U> name& operator = (const name<U>&)
            {return *this; }
        template <class U> struct rebind
            {    /* convert a name<T> to a name<U> */
            typedef name<U> other;
            };
    }; 
```

你会写`ALLOCATOR_DECL(cache, sync, name);`。`allocator_base`做繁重的工作；分配器本身必须是派生类型，这样才能`rebind`正确处理。（该`Dinkum`代码中的代码来自 Dinkumware 文档；我不知道 Microsoft 的东西将这些名称放在哪个名称空间中，但大概是宏将正确的名称放在那里）。

对于缓存模板：

*   `cache_freelist`维护一个节点大小的块的链表；列表的最大大小由模板参数设置`Sz`，节点分配由`operator new`and管理`operator delete`。
*   `cache_suballoc`添加另一个管理节点块块的层`Nelts`，所有节点块都分配为单个 blob；新元素的分配首先查看空闲列表，如果没有空闲，则分配一个新的 blob。在分配器被销毁之前，不会删除内存块。
*   `cache_chunklist`以 blob 的形式分配内存（如`cache_suballoc`），但不使用公共空闲列表；当一个块被释放时，它会回到它的 blob 的空闲列表中。当所有 blob 块已被释放时，该 blob 本身将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:09:51.573

第一个子问题很简单。什么时候使用它们？当分析显示默认分配器存在问题时。仅这一点就使这个问题与大多数开发人员无关。

一些宏使用动词“yields”，大致意思是“最终扩展为，可能通过多个步骤”。

缓存模板保存已释放的块以供以后重新分配。您将选择最适合您的分配模式的缓存，在重用百分比和缓存大小之间具有最佳折衷的缓存（请参阅上面的分析）。

一些缓存模板具有有限数量的释放块，通过`freelist<>`. Max 类决定了这样一个`freelist`可以变成多长时间。

分配器最终是上述的预先组合的组合。

# cron - 月底前7天Quartz调度器

> ID：12941977
> 
> 赞同：3
> 
> 时间：2012-10-17T19:34:10.180
> 
> 标签：cron, quartz-scheduler

我想将我的石英调度程序配置为在月底前的第七天运行。我设法设置了每个月的最后一天（0 0 0 L *？*），但无法赶上前七天。例如：脚本必须在 24/10/12、23/11/12、24/12/12、24/01/13、21/02/13 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:52:11.933

你非常接近：

```
0 0 0 L-7 * ? * 
```

注意`"-7"`部分。我使用 Quartz 2.1.5 对此进行了测试，此功能是作为[QTZ-91](https://jira.terracotta.org/jira/browse/QTZ-91)的一部分实现的。

# php - Yii：选择 20 个最后的条目 order by id ASC

> ID：12941979
> 
> 赞同：4
> 
> 时间：2012-10-17T19:34:17.537
> 
> 标签：php, mysql, sql, activerecord, yii

我想获得表的最后 20 个条目，但按 id 升序排列。

在 Sql 中它不是很复杂：

```
SELECT * 
FROM (SELECT * FROM comments
      WHERE postID='$id' 
      ORDER BY id DESC 
      LIMIT 20) t
ORDER BY id ASC; 
```

但我想用我的 yii 模型来做，比如：

```
Comment::model()->findAll($criteria) 
```

但我真的不知道我应该在我的 CDbCriteria 中放什么！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T20:05:42.873

```
$models = Comment::model()->findAll(array(
    "condition" => "WHERE postID = '".$id."'",
    "order" => "id DESC",
    "limit" => 20,
)); 
```

~~将获得最后 20 个。现在您想订购由 id ASC 设置的记录正确吗？您是否没有其他字段可以订购类似的结果（可能是日期或创建的字段？）例如：~~

```
"order" => "id DESC, created ASC" 
```

取消二级排序，但为什么不直接使用数组反转呢？

```
$models = array_reverse($models); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T20:44:07.037

`array_reverse`如果您考虑使用此 sql，则有一种不使用的方法：

```
SELECT * FROM `comments` `t` 
WHERE id 
in (SELECT id 
     FROM (SELECT id FROM comments Where postID = xyz ORDER BY id DESC LIMIT 20) 
    as q) 
ORDER BY id ASC 
```

在标准中将变为：

```
$criteria=new CDbCriteria();
$criteria->condition='id in (SELECT id FROM (SELECT id FROM comments Where postID='.$id.' ORDER BY id DESC LIMIT 20) as q)';
$criteria->order='id ASC'; 
```

**更新**：

使用您的原始查询，您还可以使用[`findBySql`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAllBySql-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAllBySql-detail")：

```
$sql='SELECT * FROM (SELECT * FROM comments  WHERE postID= :postid  ORDER BY id DESC LIMIT 20) q ORDER BY id ASC';
$params=array('postid'=>$id);
$comments=Comment::model()->findAllBySql($sql,$params); 
```

这个查询的性能比我之前的查询要好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T20:48:18.543

**升级版：**

请注意，一般来说，其他一些解决方案比我的要好。

使用`offset`会降低查询的性能。请参阅：[http](http://www.slideshare.net/Eweaver/efficient-pagination-using-mysql) ://www.slideshare.net/Eweaver/efficient-pagination-using-mysql以及[为什么 MYSQL 更高的 LIMIT 偏移会减慢查询速度？](https://stackoverflow.com/questions/4481388/why-does-mysql-higher-limit-offset-slow-the-query-down)

因此，当数量`Comments`会增加时，您可以获得性能下降。

* * *

使用`offset`功能呢？

```
 $model = Comment::model();

    $condition = 'postID =' . $id;
    $limit = 20;
    $totalItems = $model->count($condition);

    $criteria = new CDbCriteria(array(
        'condition' => $condition,
        'order' => 'id ASC',
        'limit' => $limit,
        'offset' => $totalItems - $limit // if offset less, thah 0 - it starts from the beginning
    ));

    $result = $model->findAll($criteria); 
```

# ios - 在 iOS 上以小型大写字母排版字体

> ID：12941984
> 
> 赞同：11
> 
> 时间：2012-10-17T19:34:43.437
> 
> 标签：ios, fonts

在 iOS 上，我通过将其文件名（一个 .otf 文件）添加到 info.plist 文件然后使用以下代码行来在我的项目中加载自定义字体：

> UIFont myFont * = [UIFont fontWithName:titleFontName size:titleFontSize];

我获得了可以在 UILabels 和 UITextViews 中使用的字体。

我如何才能获得该字体仅以小型大写字母显示？如果我在 Photoshop 中使用它，则可以打开小型大写字母开关以将所有单词排版为小型大写字母（因此，我得出结论，字体没有任何遗漏）。我怎样才能在 iOS 上获得类似的效果？

由于其他原因，将我的字符串转换为大写不是一个可行的选择。

更多信息：字体家族中只有一个成员，正如我通过使用以下代码可以理解的那样，家族中没有独立的小型大写字母成员。

```
 for (NSString * familyName in [UIFont familyNames]) {

        NSLog(@"---------------- %@ ---------------", familyName);
        for (NSString * fontName in[UIFont fontNamesForFamilyName:familyName] )
           NSLog(@"- %@", fontName);
   } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-11T19:53:07.700

通过开放式功能在字体中启用小型大写字母。在 iOS 7 中，我们可以使用字体描述符来访问开放类型功能并启用小型大写字母。

[这个问题涉及](https://stackoverflow.com/questions/4810409/does-coretext-support-small-caps?answertab=votes#tab-top)如何使用核心文本打开小型大写字母，但对于 UIFonts 和 UIKit 视图也可以很容易地做到这一点。您需要为要启用的功能创建一个字典`UIFontDescriptor`并将其设置`UIFontDescriptorFeatureSettingsAttribute`为字典数组。

每个字体特征字典包含指定特征类型的键和值，以及特征选择器的键和值。根据您使用的字体，您需要找到与小型大写字母相对应的正确值。您可以在注释部分记录的数组中找到这些。

## UIFont 类别

此类别将生成启用小型大写字母的 UIFont 对象。您需要添加正确的字体名称。

```
#import "UIFont+SmallCaps.h"
#import <CoreText/CoreText.h>

@implementation UIFont (SmallCaps)

+ (UIFont *) applicationSmallCapsFontWithSize:(CGFloat) size {
    /*
    // Use this to log all of the properties for a particular font
    UIFont *font = [UIFont fontWithName: fontName size: fontSize];
    CFArrayRef  fontProperties  =  CTFontCopyFeatures ( ( __bridge CTFontRef ) font ) ;
    NSLog(@"properties = %@", fontProperties);
    */

    NSArray *fontFeatureSettings = @[ @{ UIFontFeatureTypeIdentifierKey: @(kLowerCaseType),
                                         UIFontFeatureSelectorIdentifierKey : @(kLowerCaseSmallCapsSelector) } ];

    NSDictionary *fontAttributes = @{ UIFontDescriptorFeatureSettingsAttribute: fontFeatureSettings ,
                                      UIFontDescriptorNameAttribute: FONT_NAME } ;

    UIFontDescriptor *fontDescriptor = [ [UIFontDescriptor alloc] initWithFontAttributes: fontAttributes ];

    return [UIFont fontWithDescriptor:fontDescriptor size:size];
}

@end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-20T15:50:26.057

`UIFont`Swift 中的扩展：

```
extension UIFont {

    func smallCaps() -> UIFont {

        let settings = [[UIFontFeatureTypeIdentifierKey: kLowerCaseType, UIFontFeatureSelectorIdentifierKey: kLowerCaseSmallCapsSelector]]
        let attributes: [String: AnyObject] = [UIFontDescriptorFeatureSettingsAttribute: settings, UIFontDescriptorNameAttribute: fontName]

        return UIFont(descriptor: UIFontDescriptor(fontAttributes: attributes), size: pointSize)
    }
} 
```

**用法：**

```
label.font = UIFont(name: "SourceSansPro-Regular", size: 12)?.smallCaps() 
```

**例子：**

[![在此处输入图像描述](../Images/3fa4fa4d701d4140ddde86f7599f8e65.png)](https://i.stack.imgur.com/yDJFf.png) [![在此处输入图像描述](../Images/555d2975502d9ac499fc778fb16abf5a.png)](https://i.stack.imgur.com/NDcS6.png)

**macOS 版本：**

```
extension NSFont {
    func smallCaps() -> NSFont? {
        let settings = [[NSFontFeatureTypeIdentifierKey: kLowerCaseType, NSFontFeatureSelectorIdentifierKey: kLowerCaseSmallCapsSelector]]
        let attributes: [String: AnyObject] = [NSFontFeatureSettingsAttribute: settings as AnyObject, NSFontNameAttribute: fontName as AnyObject]

        return NSFont(descriptor: NSFontDescriptor(fontAttributes: attributes), size: pointSize)
    }
} 
```

**重要的：**

*   **并非每种字体都可以使用它，这取决于@Anthony Mattox**所说 的这些字符是否包含在字体中。

*   请记住将字符串设置为：`Example`，而不是`EXAMPLE`。

*   设置是`Array<NDSictionary>`，不是`NSDictonary`。

# java - RESTful Web 服务返回太多结果且顺序不正确

> ID：12941986
> 
> 赞同：0
> 
> 时间：2012-10-17T19:34:50.343
> 
> 标签：java, web-services, rest, annotations, jersey

我正在使用 Jersey 来提供 RESTful Web 服务。我使用 javax.xml.bind.annotation 来设置我的 POJO 数据传输对象。我的 DTO 包含一些其他 POJO，它们为主 DTO 提供值。我能够从浏览器中的资源中获取 JSON，万岁，但是 JSON 返回了更多对象的成员变量并且顺序错误。

这是资源：

```
@Controller
@Path("/merchants/{merchantId}/profile")
public class MerchantProfileResource {

    @Autowired
    private MerchantProfileManager merchantProfileManager;

    public MerchantProfileResource() {
    }

    @GET
    @Produces("application/json")
    // TODO - wire this up
    public MerchantProfileDTO getMerchantProfile(@PathVariable String id) {
        MerchantProfileDTO merchantProfile = merchantProfileManager.getMerchantProfileDTO(id);

        return merchantProfile;
    }

    public MerchantProfileManager getMerchantProfileManager() {
        return merchantProfileManager;
    }

    public void setMerchantProfileManager(MerchantProfileManager merchantProfileManager) {
        this.merchantProfileManager = merchantProfileManager;
    }
} 
```

这是 DTO 类：

```
@XmlRootElement(name = "response")
@XmlType(propOrder={"merchantId", "email", "paymentMethods", "merchantTaxData"})
public class MerchantProfileDTO {

    @XmlElement(name = "merchantId")
    private int merchantId;

    public int getMerchantId() {
        if (merchant == null)
            return 0;
        return merchant.getMerchantid();
    }

    @XmlElement(name = "email")
    private String email;

    public String getEmail() {
        if (merchantProfile == null)
            return null;
        return merchantProfile.getEmail();
    }

    @XmlElementWrapper(name = "paymentMethods")
    @XmlElement(name = "paymentMethod")
    private List<PaymentMethod> paymentMethods;

    public List<PaymentMethod> getPaymentMethods() {
        return paymentMethods;
    }

    public void setPaymentMethods(List<PaymentMethod> paymentMethods) {
        this.paymentMethods = paymentMethods;
    }

    @XmlElement(name = "merchantTaxData")
    private MerchantTaxData merchantTaxData;

    public MerchantTaxData getMerchantTaxData() {
        return merchantTaxData;
    }

    public void setMerchantTaxData(MerchantTaxData merchantTaxData) {
        this.merchantTaxData = merchantTaxData;
    }

    private MerchantProfile merchantProfile;

    public MerchantProfile getMerchantProfile() {
        return merchantProfile;
    }

    public void setMerchantProfile(MerchantProfile merchantProfile) {
        this.merchantProfile = merchantProfile;
    }

    private Merchant merchant;

    public Merchant getMerchant() {
        return merchant;
    }

    public void setMerchant(Merchant merchant) {
        this.merchant = merchant;
    }
} 
```

这是 MerchantProfile 类：

```
@javax.persistence.Table(name = "merchant_profile", schema = "", catalog = "mexp")
@Entity
public class MerchantProfile {

    private int merchantid;

    @javax.persistence.Column(name = "merchantid", nullable = false, insertable = true, updatable = true, length = 22, precision = 0)
    @Id
    public int getMerchantid() {
        return merchantid;
    }

    public void setMerchantid(int merchantid) {
        this.merchantid = merchantid;
    }

    private String email;

    @javax.persistence.Column(name = "email", nullable = true, insertable = true, updatable = true, length = 255, precision = 0)
    @Basic
    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
} 
```

这是商人类：

```
@javax.persistence.Table(name = "merchant", schema = "", catalog = "mexp")
@Entity
public class Merchant {

    private int merchantid;

    @javax.persistence.Column(name = "merchantid", nullable = false, insertable = true, updatable = true, length = 22, precision = 0)
    @javax.persistence.Id
    public int getMerchantid() {
        return merchantid;
    }

    public void setMerchantid(int merchantid) {
        this.merchantid = merchantid;
    }

    private MerchantProfile merchantProfile;

    @OneToOne
    @JoinColumn(name = "merchantid", unique = true, nullable = false, updatable = true)
    public MerchantProfile getMerchantProfile() {
        return merchantProfile;
    }

    public void setMerchantProfile(MerchantProfile merchantProfile) {
        this.merchantProfile = merchantProfile;
    }

    private Collection<MerchantNexus> merchantNexusesByMerchantid;

    @javax.persistence.OneToMany(orphanRemoval = true)
    @JoinColumn(name="merchantid")
    public Collection<MerchantNexus> getMerchantNexusesByMerchantid() {
        return merchantNexusesByMerchantid;
    }

    public void setMerchantNexusesByMerchantid(Collection<MerchantNexus> merchantNexusesByMerchantid) {
        this.merchantNexusesByMerchantid = merchantNexusesByMerchantid;
    }
} 
```

MerchantTaxData 类：

```
@XmlRootElement(name = "merchantTaxData")
@XmlType(propOrder={"isTaxInfoKnown", "nexusList"})
public class MerchantTaxData {

    public MerchantTaxData() {
    }

    @XmlElement(name = "isTaxInfoKnown")
    private boolean isTaxInfoKnown;

    public boolean isTaxInfoKnown() {
        if (merchant == null)
            return false;
        return (1 == merchant.getIstaxinfoknown());
    }

    @XmlElementWrapper(name = "nexusList")
    @XmlElement(name = "nexus")
    private List<MerchantNexus> nexusList;

    public List<MerchantNexus> getNexusList() {
        return nexusList;
    }

    public void setNexusList(List<MerchantNexus> nexusList) {
        this.nexusList = nexusList;
    }

    private Merchant merchant;

    public Merchant getMerchant() {
        return merchant;
    }

    public void setMerchant(Merchant merchant) {
        this.merchant = merchant;
    }
} 
```

我想要回来的是

```
{
    response: {
        merchantId: 92,
        email: "dev-catchall@blah.com",
        paymentMethods: [
            {paymentMethod: pm1},
            ...,
            {paymentMethod: pmN}
        ],
        merchantTaxData: {
            isTaxInfoKnown: true,
            nexusList: {
                nexus: [
                    {merchantid: 92,statecode: "CA"},
                    ...,
                    {merchantid: 92,statecode: "WA"}
                ]
            }
        }
    }
} 
```

但我得到的远不止这些：

```
{
response: {
        merchantId: 0, 
        merchantTaxData: { 
            isTaxInfoKnown: true, 
            nexusList: {
                nexus: [
                    {merchantid: 92, statecode: "CA"}, 
                    ...,
                    {merchantid: 92, statecode: "WA"}
                ]
            }, 
            merchant: {
                merchantNexusesByMerchantid: [
                    {merchantid: 92, statecode: "CA"},
                    ...,
                    {merchantid: 92, statecode: "WA"}
                ],
                merchantProfile: {
                    email: "dev-mexp-catchall@pronto.com",
                    merchantid: 92
                },
                merchantId: 92
            }
        },
        merchant: {
            merchantNexusesByMerchantid: [
                {merchantid: 92, statecode: "CA"},
                ...,
                {merchantid: 92, statecode: "WA"}
            ],
            merchantProfile: {
                email: "dev-mexp-catchall@pronto.com",
                merchantid: 92
            }, 
            merchantid: 92
        }, 
        merchantProfile: {
            email: "dev-mexp-catchall@pronto.com", 
            merchantid: 92
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:14:46.230

您可以使用 @XmlTransient 忽略某些属性。在您的 MerchantProfileDTO 类中，在属性 MerchantProfile 和商人中设置 @XmlTransient

```
@XmlTransient
private MerchantProfile merchantProfile;
@XmlTransient
private Merchant merchant; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:23:27.603

我应该在 getter 之前有我的注释，而不是变量。

除此之外，@SamiKorhonen 或@user463324 在评论中说使用@XmlAccessorType(XmlAccessType.NONE) 是正确的方法。我邀请他们对这个问题提交一个真正的答案，但从来没有。

我不想因为不接受我的问题的答案而让社区感到悲伤。

# java - J2ME 序列化

> ID：12941991
> 
> 赞同：4
> 
> 时间：2012-10-17T19:35:00.637
> 
> 标签：java, serialization, java-me

我正在用 Java 编写手机应用程序。它的目标是向服务器发送和接收 Vector 对象。但是在这里我遇到了一个问题：J2ME 不`ObjectOutputStream`支持。所以我必须将我的转换`Vector`为`byte`数组或做类似的事情。

我一直在考虑将 转换`Vector`为`string`，通过网络传输它并从字符串中重建原始向量，但它似乎很难以适当的形式工作。

另外，我查看了一些框架，例如[J2ME Polish](http://www.j2mepolish.org)，但不幸的是，我未能在安装文件夹中找到带有 API 的 jar 文件。

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:49:43.533

有两种相对简单的方法可以将 Java 对象序列化和反序列化为其二进制表示，以促进服务器和 Java ME 设备之间的网络通信：

1.  [协议缓冲区](http://code.google.com/p/protobuf/)

    协议缓冲区是 Google 创建的，用于通过网络快速实现非常有效的数据交换。您定义一个“protobuf”文件，该文件是您要交换的对象的规范，然后 protobuf 工具创建客户端和服务器端存根以通过网络连接处理对象的序列化和反序列化。

    基于[“第三方插件页面”](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)，有几个 Java ME 项目用于处理 Java ME 上的协议缓冲区。还有许多其他语言库，因此这种方法也应该为您提供大量服务器端实现选项。我个人没有在 Java ME 上使用过这种方法。

2.  Netbeans 的[“移动客户端到 Web 应用程序”工具](http://netbeans.org/kb/71/javame/webtomobile.html)

    如果您的服务器端实现使用 Java，您可以使用 Netbeans 的[“移动客户端到 Web 应用程序”工具](http://netbeans.org/kb/71/javame/webtomobile.html)生成服务器端和客户端存根，以通过二进制数据流发送 Java 对象。上面的链接是一个很好的详细实现教程。

    一般步骤是：

    a) 在 Java EE 中定义您的服务器端 Web 服务，包括您希望通过网络连接传递的对象。

    b) 运行“移动客户端到 Web 应用程序”工具以生成客户端和服务器端存根。

    我已经在几个 Java ME 应用程序中使用了这种方法，并且效果很好。这种方法的优点是您可以查看和编辑生成的存根的所有源代码，因为它就在您的项目中。可能的缺点是它需要服务器端代码的 Java 实现，并且不像协议缓冲区那样可移植到其他平台。

# vb.net - 数据网格视图 VB 2010

> ID：12941992
> 
> 赞同：0
> 
> 时间：2012-10-17T19:35:02.590
> 
> 标签：vb.net, visual-studio-2010

我在 datagridview 中使用 imagecolumn 来显示 48 像素的 png。图像是根据同一 datagridview 中按钮列的文本选择的。

它工作正常，唯一的问题是第一张图像在我向下滚动然后再次向上滚动之前不会改变，之后所有图像都会毫无问题地显示，直到再次出现第一张图像。

¿ 可能是什么问题？

这是我用于更改图像的代码。

```
Private Sub DataGridView1_CellFormatting(sender As Object, e As System.Windows.Forms.DataGridViewCellFormattingEventArgs) Handles DataGridView1.CellFormatting
If Not DataGridView1.Rows(e.RowIndex).IsNewRow Then
        If DataGridView1.Columns(e.ColumnIndex).Name = "Column4" Then
            'e.Value = Nothing
            If (DataGridView1.Rows(e.RowIndex).Cells(2).Value) = "NO Entregado" Then
                e.Value = Image.FromFile(procesando)
            ElseIf (DataGridView1.Rows(e.RowIndex).Cells(2).Value) = "Entregado" Then
                e.Value = Image.FromFile(lista)
            ElseIf (DataGridView1.Rows(e.RowIndex).Cells(2).Value) = "NO SE Entregará" Then
                e.Value = Image.FromFile(yellow)
            ElseIf (DataGridView1.Rows(e.RowIndex).Cells(2).Value) = "Devuelto" Then
                e.Value = Image.FromFile(green)
            End If
        End If
    End If
end sub 
```

在此先感谢对不起英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:36:03.273

`DataGridView1.InvalidateColumn(3)`做的伎俩...

# android - 可换肤小部件 android

> ID：12941995
> 
> 赞同：0
> 
> 时间：2012-10-17T19:35:19.460
> 
> 标签：android, clock, android-appwidget, skinning

我已经在 android 中制作了一个工作时钟小部件应用程序，但希望用户可以通过单击它并转到设置页面来更改钟面。有没有一种简单的方法可以做到这一点？我对android编程相当陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:53:25.197

您可以尝试使用 Intent 来启动设置活动，如下所示：

```
Intent intent = new Intent(context, SettingsActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
remoteViews.setOnClickPendingIntent(R.id.widget, pendingIntent); 
```

如果您在您编写的 AppWidgetProvider 的 onUpdate 方法中使用此代码，它应该可以为您解决问题。

当然，`SettingsActivity.class`并且`R.id.widget`需要替换为您所称的任何内容。

如果您还希望在首次将小部件添加到主屏幕时自动弹出设置活动，您可以将其合并到您的应用小部件提供程序信息 XML 文件中：

```
android:configure="com.example.yourapplication.SettingsActivity" 
```

为了使其正常工作，您应该查看[Android Developer pages](http://developer.android.com/guide/topics/appwidgets/index.html#Configuring)。

# c - 如何在C中将char数组转换为变量long？

> ID：12941998
> 
> 赞同：1
> 
> 时间：2012-10-17T19:35:24.140
> 
> 标签：c, long-integer, typeconverter, arrays

我已经尝试了几个小时来转换它。我尝试循环遍历将字符转换为长整数的数组，但这不起作用。我在网上看到过简单的例子，但它们没有涵盖更长的 char 数组的循环过程。我可以使用什么方法将这个 char (SAMPLE) 数组转换为一个 long 类型的变量？

ar.h

```
struct  ar_hdr       /* file member header */
     {
         char    ar_name[16];    /* '/' terminated file member name */
         char    ar_date[12];    /* file member date */
         char    ar_uid[6]       /* file member user identification */
         char    ar_gid[6]       /* file member group identification */
         char    ar_mode[8]      /* file member mode (octal) */
         char    ar_size[10];    /* file member size */
         char    ar_fmag[2];     /* header trailer string */
     }; 
```

我的代码

```
struct ar_hdr sample;
lseek(fileD, 24, SEEK_SET); //fileD is the file desriptor for the opened archive

//I start at 24 because of the 8 byte magic string for an archive starts the file "!<arch>\n"

int numRead = read(fileD, sample.ar_date, 12);
printf(sample.ar_date);

long epoch = (long *) *sample.ar_date;   //terrible coding here
printf("The current time is: %s\n", asctime(gmtime(&epoch))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:06:38.897

**[`man ar`](http://man.cx/ar%283%29)**说：

> 文件成员标题中的所有信息都是**可打印的 ASCII 格式**。标头中包含的数字信息存储为十进制数（除 ar_mode 以八进制表示）。因此，如果档案包含可打印文件，则档案本身是可打印的。

所以**`atol(ar_date)`**应该做的伎俩。