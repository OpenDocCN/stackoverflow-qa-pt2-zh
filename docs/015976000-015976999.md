# StackOverflow 问答 15976000-15976999

# yii - Yii如何计算相关模型（getRelation with params）？

> ID：15976002
> 
> 赞同：0
> 
> 时间：2013-04-12T16:03:57.340
> 
> 标签：yii, count, params, yii-relations

我有一个名为“relationName”的 HAS_MANY 关系，

所以我可以使用所有相关模型

```
$model->relationName; 
```

或使用

```
$model->getRelated('relationName'); 
```

我还可以通过添加参数获得相关模型的子集

```
$model->getRelated('relationName', true, array('fieldName'=>'val')); 
```

所以，我会得到所有相关模型的一个子集，其中*fieldName* = " *val* "

**但我怎么数呢？**

这个想法看起来很糟糕（因为它将采用所有模型然后计算它们）：

```
count($model->getRelated('relationName', true, array('fieldName'=>'val'))); 
```

我需要一些最终会使用 COUNT() 构建查询并返回结果的东西。

使用 STAT 关系看起来也是个坏主意（因为我已经在代码中描述了关系，为什么要重复关系的描述？）

那么，**有没有什么好的解决方案来计算具有动态参数的相关（HAS_MANY）模型？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:59:30.520

如果您希望它作为 COUNT() 查询运行，最好的选择是使用统计关系。

`'countOfRelationName' => array(self::STAT, 'Relation', 'field', 'condition'=>'field = val')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T14:44:46.170

好的，所以我有这样的模型： Product (product_id) Order (order_id, product_id) OrderProduct (order_id, product_id)

产品型号有关系

'orders'=>array(self::HAS_MANY,'Order',array('order_id'=>'order_id'),'through'=>'orderedProducts'),

我的任务是 - 计算每个产品 - >订单，而不加载所有订单模型。

正如罗斯建议的那样，我创建了 STAT 关系

'statOrders'=>array(self::STAT,'Order',array('order_id'=>'order_id'),'through'=>'orderedProducts'),

最终，当我调用 $product->statOrders 时，我得到了一个异常 CStatRelation has no 'through' attribute

![在此处输入图像描述](https://i.stack.imgur.com/nvtOn.png)

这意味着如果我想让它发挥作用，我必须发明另一种方式来描述产品和订单之间的关系。这比重复更糟糕。

最后我想出了这个解决方法：

```
$c=$product->getRelated('orders', true, аггау('select'=>'CОUNТ(огdегѕ.огdег_іd) as order_id', 'gгоuр'=>'ргоduсt_іd'));
$count=$c[О]->order_id; 
```

• 无需描述新关系

• 它使干净的 sql 查询：

```
system.db.CDbCommand.query(SELECT COUNT(orders.order_id) as order_id, `orders`.`order_id` AS `t1_c0` FROM `orders` `orders` LEFT OUTER JOIN `orders_products` `orderedProducts` ON (`orderedProducts`.`order_id`=`orders`.`order_id`) WHERE (`orderedProducts`.`product_id`=:ypl0) GROUP BY product_id. Bound with :ypl0='458739') 
```

• 您可以动态添加参数： ![在此处输入图像描述](https://i.stack.imgur.com/tXQUh.png)

• 以此类推，您可以计算订单中的产品数量（每个订单中的产品数量之和）： ![在此处输入图像描述](https://i.stack.imgur.com/ca6eb.png)

我目前的最终解决方案： ![在此处输入图像描述](https://i.stack.imgur.com/RyqRV.png)

# java - 使用 Mockito 存根并执行测试方法

> ID：15976008
> 
> 赞同：56
> 
> 时间：2013-04-12T16:04:15.843
> 
> 标签：java, junit, mocking, mockito

我最近问了几个面向 jUnit 和 Mockito 的问题，但我仍然很难掌握它。这些教程都是针对非常简单的示例，所以我正在努力扩大我的测试用例以适用于我的课程。

我目前正在尝试为我在 webapp 中的一个代理中使用的方法编写一些测试用例。该方法与代理内部的其他几个方法交互以验证某些对象。我现在只想测试这种方法。

这是我尝试做的事情：

1.  像这样创建我的代理的 Mockito 对象：

    `MyProcessingAgent mockMyAgent = Mockito.mock(MyProcessingAgent.class);`

2.  使用 Mockito.when 设置存根（希望是正确的术语），如下所示：

    `Mockito.when(mockMyAgent.otherMethod(Mockito.any(arg1)).thenReturn(requiredReturnArg);`

3.  尝试像这样执行我的方法：

    `List myReturnValue = mockMyAgent.methodThatNeedsTestCase();`

我期待的东西`myReturnValue`，但收到 0 代替，所以我尝试调试。当我调用该方法时，它永远不会执行。我在方法的第一行有一个永远不会被触及的调试点。

如果我想在类的一个方法中执行代码，但强制类中的其他方法（尝试与外部世界中的数据库交互的方法）返回伪造的值。Mockito 可以做到这一点吗？

看来我目前的方法不是正确的测试风格，但我不确定如何前进。我可以模拟我的类并像正常一样执行一种方法，而将其他方法存根以返回我的给定值，这样我就不必在测试这一种方法期间处理数据访问？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-12T16:12:23.680

您将 a`Mock`与 a混淆了`Spy`。

在模拟中，**所有方法**都被存根并返回“智能返回类型”。这意味着在模拟类上调用任何方法都不会*执行任何操作*，除非您指定行为。

在 spy 中，类的原始功能仍然存在，但您可以在 spy 中验证方法调用并覆盖方法行为。

你想要的是

```
MyProcessingAgent mockMyAgent = Mockito.spy(MyProcessingAgent.class); 
```

一个简单的例子：

```
static class TestClass {

    public String getThing() {
        return "Thing";
    }

    public String getOtherThing() {
        return getThing();
    }
}

public static void main(String[] args) {
    final TestClass testClass = Mockito.spy(new TestClass());
    Mockito.when(testClass.getThing()).thenReturn("Some Other thing");
    System.out.println(testClass.getOtherThing());
} 
```

输出是：

```
Some Other thing 
```

注意：您真的应该尝试模拟正在测试的类的依赖关系而**不是**类本身。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T16:10:05.040

因此，嘲笑被测类的想法是对测试实践的厌恶。你不应该这样做。因为你已经这样做了，所以你的测试是进入 Mockito 的模拟类而不是你的被测类。

间谍也不会起作用，因为这只提供了围绕间谍类的包装器/代理。一旦在类内部执行，它将不会通过代理，因此不会命中间谍。更新：虽然我相信 Spring 代理确实如此，但 Mockito 间谍似乎并非如此。`m1()`我设置了一个方法调用的场景`m2()`。我监视对象并存根`m2()`到`doNothing`. `m1()`当我在测试中调用时，`m2()`没有达到类的。Mockito 调用存根。因此，使用间谍来完成所要求的事情是可能的。但是，我会重申，我认为这是不好的做法（恕我直言）。

您应该模拟被测类所依赖的所有类。这将允许您控制被测方法调用的方法的行为，因为您可以控制这些方法调用的类。

如果您的类创建其他类的实例，请考虑使用工厂。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T16:29:00.197

你几乎明白了。问题是[被测类](http://c2.com/cgi/wiki?ClassUnderTest)（**CUT**）不是为单元测试而构建的——它并不是*真正*的[TDD](http://en.wikipedia.org/wiki/Test-driven_development)。

这样想……

*   我需要测试一个类的函数——我们称之为*myFunction*
*   该函数调用另一个类/服务/数据库上的函数
*   该函数还调用**CUT上的另一个方法**

在单元测试中

*   应该创建一个具体的**CUT**或`@Spy`在其上
*   您可以`@Mock`使用所有其他类/服务/数据库（即外部依赖项）
*   您*可以*存根在**CUT**中调用的其他函数，但这并不是真正应该如何进行*单元*测试

为了避免执行您没有严格测试的代码，您可以将该代码抽象为可以`@Mock`编辑的东西。

在这个*非常*简单的示例中，创建对象的函数将很难测试

```
public void doSomethingCool(String foo) {
    MyObject obj = new MyObject(foo);

    // can't do much with obj in a unit test unless it is returned
} 
```

但是使用服务获取 MyObject 的函数很容易测试，因为我们已经将难以/不可能测试的代码抽象为使该方法可测试的东西。

```
public void doSomethingCool(String foo) {
    MyObject obj = MyObjectService.getMeAnObject(foo);
} 
```

因为可以模拟 MyObjectService 并验证 .getMeAnObject() 是使用*foo*变量调用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-19T15:54:38.450

简短的回答

在你的情况下怎么做：

```
int argument = 5; // example with int but could be another type
Mockito.when(mockMyAgent.otherMethod(Mockito.anyInt()).thenReturn(requiredReturnArg(argument)); 
```

长答案

实际上你想做的事情是可能的，至少在 Java 8 中。也许你没有从其他人那里得到这个答案，因为我使用的是允许这样做的 Java 8，而这个问题是在 Java 8 发布之前（允许传递函数） ，不仅是其他函数的值）。

让我们模拟对数据库查询的调用。此查询返回 HotelTable 中所有 FreeRoms = X 和 StarNumber = Y 的行。我在测试期间期望的是，此查询将返回一个不同酒店的列表：每个返回的酒店具有相同的值 X 和 Y，而其他值，我将根据我的需要决定它们。下面的例子很简单，当然你也可以让它变得更复杂。

所以我创建了一个函数，它会返回不同的结果，但它们都有 FreeRoms = X 和 StarNumber = Y。

```
static List<Hotel> simulateQueryOnHotels(int availableRoomNumber, int starNumber) {
    ArrayList<Hotel> HotelArrayList = new ArrayList<>();
    HotelArrayList.add(new Hotel(availableRoomNumber, starNumber, Rome, 1, 1));
    HotelArrayList.add(new Hotel(availableRoomNumber, starNumber, Krakow, 7, 15));
    HotelArrayList.add(new Hotel(availableRoomNumber, starNumber, Madrid, 1, 1));
    HotelArrayList.add(new Hotel(availableRoomNumber, starNumber, Athens, 4, 1));

    return HotelArrayList;
} 
```

也许 Spy 更好（请尝试），但我是在模拟课上这样做的。这里我是怎么做的（注意 anyInt() 值）：

```
//somewhere at the beginning of your file with tests...
@Mock
private DatabaseManager mockedDatabaseManager;

//in the same file, somewhere in a test...
int availableRoomNumber = 3;
int starNumber = 4;
// in this way, the mocked queryOnHotels will return a different result according to the passed parameters
when(mockedDatabaseManager.queryOnHotels(anyInt(), anyInt())).thenReturn(simulateQueryOnHotels(availableRoomNumber, starNumber)); 
```

# php - 使用单个 mySQL 查询检索多个数据“系列”

> ID：15976009
> 
> 赞同：0
> 
> 时间：2013-04-12T16:04:17.707
> 
> 标签：php, mysql, charts, report

有没有办法将这两个查询组合成一个查询，以便我可以检索两个数据“系列”以用于图表目的，同时仍保持单个日期的关系？

```
SELECT 
        COUNT(j.id) AS power_count, jd.ber_rcvd 
    FROM
        jobs j 
        INNER JOIN job_dates jd 
            ON jd.job_id = j.id 
    WHERE j.tech = 7 AND jd.ber_rcvd != '0000-00-00' GROUP BY jd.ber_rcvd;
SELECT 
        COUNT(j.id) AS transport_count, jd.ber_rcvd 
    FROM
        jobs j 
        INNER JOIN job_dates jd 
            ON jd.job_id = j.id 
    WHERE j.tech = 1 AND jd.ber_rcvd != '0000-00-00' GROUP BY jd.ber_rcvd; 
```

我正在寻找的是这样的输出：

```
power_count | 运输计数 | ber_rcvd 

    11 | 3 | 2013-03-01 

     7 | 1 | 2013-03-02

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:12:15.227

使用 GROUP BY 函数：

```
SELECT j.tech, COUNT( j.id ) AS ber_count 
FROM job j
    INNER JOIN job_dates jd ON jd.job_id = j.id
WHERE j.tech IN ( 7, 1 )
GROUP BY j.tech; 
```

那应该给你两行，一排技术= 1，一排技术= 7。当您使用 GROUP BY 函数时，COUNT() 将应用于每个分组。

针对更新的问题，试试这个：

```
SELECT COUNT( IF(j.tech=7,1,NULL)) AS power_count, COUNT( IF( j.tech = 1, 1, NULL )) AS transport_count, jd.ber_rcvd
FROM
    jobs j 
    INNER JOIN job_dates jd 
        ON jd.job_id = j.id 
WHERE j.tech IN ( 1, 7 ) AND jd.ber_rcvd != '0000-00-00' 
GROUP BY jd.ber_rcvd; 
```

如果不是这样，请发布一些示例数据供我们使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:12:02.017

有了`UNION ALL`它看起来像

```
SELECT COUNT(j.id) AS ber_count, jd.ber_rcvd 
  FROM jobs j 
       INNER JOIN job_dates jd 
               ON jd.job_id = j.id 
 WHERE j.tech = 7
 UNION ALL
SELECT COUNT(j.id) AS ber_count, jd.ber_rcvd 
  FROM jobs j 
       INNER JOIN job_dates jd 
               ON jd.job_id = j.id 
 WHERE j.tech = 1 
```

*但`GROUP BY`正如@Seth 建议的那样，这是一种更好的方法*

# wpf - WPF Datagrid selectedItem 不更新源

> ID：15976011
> 
> 赞同：1
> 
> 时间：2013-04-12T16:04:25.237
> 
> 标签：wpf, binding, datagrid

我正在尝试使用 MVVM 模式使用数据网格。问题是当我第一次在数据网格中选择一个项目时，数据网格将正确更新源属性，然后我选择另一个项目，源属性不更新。这是我在 xaml 中的绑定：

```
<DataGrid ItemsSource="{Binding Customers}" 
          SelectedItem="{Binding SelectedCustomer, Mode=TwoWay, 
              UpdateSourceTrigger=PropertyChanged}" AutoGenerateColumns="False"> 
```

视图模型代码：

```
public Customer SelectedCustomer
{
    get { return _selectedCustomer; }
    set
    {
        if (value != _selectedCustomer)
        {
            _selectedCustomer = value;
            NotifyOfPropertyChange(() => SelectedCustomer);
        }
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:23:11.430

我已经解决了这个问题，原因是 Customer 的 Equals 方法存在拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:29:55.777

看来您的实施可能略有偏差。通常，您实现 ModelView 以在属性更改后实现更改的“INotifyPropertyChanged”。你绑定到一个可观察的集合，通常你有一个类似于你所拥有的成员列表，但我通常这样做：

```
public string Email
        {
            get { return _customer.Email; }
            set
            {
                if (value == _customer.Email)
                    return;

                _customer.Email = value;

                OnPropertyChanged("Email");  // Text should match property name
            }
        } 
```

在此示例中，_customer 将是设置了自己的属性的 POCO 对象的私有成员。您通常绑定到父集合作为数据源，然后在其成员上实现属性。我也从主要的 MVVM MSDN 示例中得到了这个供参考：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

我也不确定，但是一旦我通常绑定数据 Itemssource={Binding (collectionName in ModelView)} 我只是列出了该集合成员的文本。EG：selectitem = "email" 这是集合的一个属性。我通常也使用“可观察集合”数据类型，因为这将实现更改。由于这个原因，我不确定在 MVVM 中是否使用了列表和其他集合。我知道'readonlycollection'和'observablecollection'是最常见的。

# java - 如何在 Grizzly 中设置默认索引页面

> ID：15976015
> 
> 赞同：2
> 
> 时间：2013-04-12T16:04:31.727
> 
> 标签：java, grizzly

目前在我的应用程序中，如果我去`http://localhost:8181/index.htm`它工作得很好，如果我去`http://localhost:8181`我得到一个 404 错误。如何让 Grizzly 默认加载 index.htm 页面？

```
 final HttpServer server = HttpServer.createSimpleServer(".", 8181);

    WebappContext ctx = new WebappContext("Socket", "/");

    //enable annotation configuration
    ctx.addContextInitParameter("contextClass", "org.springframework.web.context.support.AnnotationConfigWebApplicationContext");
    ctx.addContextInitParameter("contextConfigLocation", "com.production");

    //allow spring to do all of it's stuff
    ctx.addListener("org.springframework.web.context.ContextLoaderListener");

    //enable web socket support
    final WebSocketAddOn addon = new WebSocketAddOn();
    for (NetworkListener listener : server.getListeners()) {
        listener.registerAddOn(addon);

        //if false, local files (html, etc.) can be modified without restarting the server
        listener.getFileCache().setEnabled(false);
    }

    //add jersey servlet support
    ServletRegistration jerseyServletRegistration = ctx.addServlet("JerseyServlet", new ServletContainer());
    jerseyServletRegistration.setInitParameter("com.sun.jersey.config.property.packages", "com.production.resource");
    jerseyServletRegistration.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true");
    jerseyServletRegistration.setLoadOnStartup(1);
    jerseyServletRegistration.addMapping("/api/*");

    //add atmosphere servlet support
    AtmosphereServlet atmosphereServlet = new AtmosphereServlet();
    AtmosphereFramework f = atmosphereServlet.framework();

    ReflectorServletProcessor r = new ReflectorServletProcessor();
    r.setServletClassName("com.sun.jersey.spi.spring.container.servlet.SpringServlet");

    f.addAtmosphereHandler("/socket/*", r);

    ServletRegistration atmosphereServletRegistration = ctx.addServlet("AtmosphereServlet", atmosphereServlet);
    atmosphereServletRegistration.setInitParameter("org.atmosphere.websocket.messageContentType", "application/json");
    atmosphereServletRegistration.setInitParameter("com.sun.jersey.config.property.packages", "com.production.resource");
    atmosphereServletRegistration.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true");
    //atmosphereServletRegistration.addMapping("/socket/*");
    atmosphereServletRegistration.setLoadOnStartup(1);

    //serve static assets
    StaticHttpHandler staticHttpHandler = new StaticHttpHandler("src/main/web");
    server.getServerConfiguration().addHttpHandler(staticHttpHandler, "/");

    //deploy
    logger.info("Deploying server...");
    ctx.deploy(server); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:02:22.310

你没有提到你使用的是什么版本的灰熊，但从 2.2.19 开始：

[http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.grizzly/grizzly-http-server/2.2.19/org/glassfish/grizzly/http/server/StaticHttpHandler.java](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.grizzly/grizzly-http-server/2.2.19/org/glassfish/grizzly/http/server/StaticHttpHandler.java)

看起来如果您更改`index.htm`为`index.html`默认页面应该可以工作。

如果没有，或者由于某种原因您无法更改文件名，您可以简单地扩展 StaticHttpHandler 并覆盖该`handle`方法以使其执行您想要的操作。

# css - ie7中底部内容隐藏阴影

> ID：15976023
> 
> 赞同：3
> 
> 时间：2013-04-12T16:05:01.370
> 
> 标签：css, css-float

我想显示以下输出：

![在此处输入图像描述](https://i.stack.imgur.com/mNMOU.png)

以下行代码在除 ie7 之外的所有浏览器中都能正常工作。在 ie7 中它看起来： ![在此处输入图像描述](https://i.stack.imgur.com/2d855.png)

那么你能告诉我这段代码有什么问题吗？

```
<div id="parent" class="shadow">
<div style="margin: 10px 20px 30px 20px; min-height: 300px; word-wrap: break-word;
  Low cost enclosed temperature control; UL Class 2 low voltage sensor circuit with var...                  
</div>
<table id="seemore" cellpadding="0" cellspacing="0">
    <tr>
      <td align="center">
        <a href="#" id="" title="See More">
          <span class="SeeMoreText">See More</span> </a>
       </td>
    </tr>
 </table> 
```

#父母{

```
float: right;
width: 250px;
display: inline-block;
background-color: #e3e3e3;
margin-top: 30px;
position: relative;
max-height: 420px; 
```

}

＃看更多 {

```
width: 100%;
height: 40px;
position: absolute;
z-index: 250;
*z-index:250;
bottom: -20px;
text-align: center; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:10:36.853

添加`overflow:visible;`到`#parent`

```
#parent{
 float: right;
 width: 250px;
 display: inline-block;
 background-color: #e3e3e3;
 margin-top: 30px;
 position: relative;
 max-height: 420px;
 overflow:visible; /*<--*/
} 
```

让我知道这是否对您有用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:48:55.293

哦，这是clearfix问题。有很多事情要避免。要么你可以试试这个。

```
/* For modern browsers */
        #parent:before,
        #parent:after {
            content:"";
            display:table;
        }

        #parent:after {
            clear:both;
        }

        /* For IE 6/7 (trigger hasLayout) */
        #parent {
            *zoom:1;
        } 
```

[或者，您可以使用此处](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)讨论的以下技术。或者，如果仍然没有解决，试试[这个。](https://stackoverflow.com/questions/4181884/after-and-before-css-pseudo-elements-hack-for-ie-7)

# ember.js - ember：理解错误

> ID：15976024
> 
> 赞同：0
> 
> 时间：2013-04-12T16:05:01.853
> 
> 标签：ember.js

我很难理解 ember.js 错误。我总是必须查看所有代码并进行随机更改，因为我无法确定错误在哪里。特别是我有这个错误，修改（但在结构上保持相同）[窥视代码](https://peepcode.com/products/emberjs)示例：

```
Uncaught Error: Something you did caused a view to re-render after it rendered but 

before it was inserted into the DOM. application.js:30508
Ember.merge.rerender application.js:30508
Ember.View.Ember.CoreView.extend.rerender application.js:29198
Ember.View.Ember.CoreView.extend._controllerDidChange application.js:29117
sendEvent application.js:18480
Ember.notifyObservers application.js:17033
propertyDidChange application.js:17640
iterDeps application.js:17089
dependentKeysDidChange application.js:17113
propertyDidChange application.js:17638
set application.js:16460
Ember.View.Ember.CoreView.extend.createChildView application.js:30079
Ember.ContainerView.Ember.View.extend.init application.js:30944
superWrapper application.js:15393
Ember._Metamorph.Ember.Mixin.create.init application.js:32704
superWrapper application.js:15393
Class application.js:24583
Mixin.create.create application.js:24842
Ember.View.Ember.CoreView.extend.createChildView application.js:30063
Ember.merge.appendChild application.js:30517
Ember.View.Ember.CoreView.extend.appendChild application.js:29931
EmberHandlebars.ViewHelper.Ember.Object.create.helper application.js:33864
get application.js:34043
get application.js:38247
EmberHandlebars.registerHelper.context application.js:33224
program1 application.js:49634
(anonymous function) application.js:14488
Ember.View.Ember.CoreView.extend.render application.js:29173
Ember.CoreView.Ember.Object.extend._renderToBuffer application.js:28180
Ember.View.Ember.CoreView.extend._renderToBuffer application.js:29728
superWrapper application.js:15393
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28159
Ember.Instrumentation.instrument application.js:15703
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28158
Ember.ContainerView.Ember.View.extend.render application.js:30985
Ember.View.Ember.CoreView.extend.forEachChildView application.js:29412
Ember.ContainerView.Ember.View.extend.render application.js:30984
superWrapper application.js:15393
Ember.CoreView.Ember.Object.extend._renderToBuffer application.js:28180
Ember.View.Ember.CoreView.extend._renderToBuffer application.js:29728
superWrapper application.js:15393
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28159
Ember.Instrumentation.instrument application.js:15703
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28158
Ember.merge.appendChild application.js:30520
Ember.View.Ember.CoreView.extend.appendChild application.js:29931
EmberHandlebars.ViewHelper.Ember.Object.create.helper application.js:33864
get application.js:34043
handlebarsGet application.js:34260
Ember.Handlebars.registerHelper.template application.js:34684
anonymous application.js:49660
(anonymous function) application.js:14452
Ember.View.Ember.CoreView.extend.render application.js:29173
Ember.CoreView.Ember.Object.extend._renderToBuffer application.js:28180
Ember.View.Ember.CoreView.extend._renderToBuffer application.js:29728
superWrapper application.js:15393
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28159
Ember.Instrumentation.instrument application.js:15703
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28158
Ember.ContainerView.Ember.View.extend.render application.js:30985
Ember.View.Ember.CoreView.extend.forEachChildView application.js:29412
Ember.ContainerView.Ember.View.extend.render application.js:30984
superWrapper application.js:15393
Ember.CoreView.Ember.Object.extend._renderToBuffer application.js:28180
Ember.View.Ember.CoreView.extend._renderToBuffer application.js:29728
superWrapper application.js:15393
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28159
Ember.Instrumentation.instrument application.js:15703
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28158
Ember.merge.appendChild application.js:30520
Ember.View.Ember.CoreView.extend.appendChild application.js:29931
EmberHandlebars.ViewHelper.Ember.Object.create.helper application.js:33864
get application.js:34043
get application.js:38247
EmberHandlebars.registerHelper.context application.js:33224
anonymous application.js:49530
(anonymous function) application.js:14452
Ember.View.Ember.CoreView.extend.render application.js:29173
Ember.CoreView.Ember.Object.extend._renderToBuffer application.js:28180
Ember.View.Ember.CoreView.extend._renderToBuffer application.js:29728
superWrapper application.js:15393
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28159
Ember.Instrumentation.instrument application.js:15703
Ember.CoreView.Ember.Object.extend.renderToBuffer application.js:28158
Ember.View.Ember.CoreView.extend.createElement application.js:29570
Ember.merge.insertElement application.js:30459
Ember.View.Ember.CoreView.extend._insertElement application.js:29502
RunLoop._prev application.js:18573
Ember.handleErrors application.js:14910
invoke application.js:18571
invokeOnceTimer application.js:19016
RunLoop._prev application.js:18573
Ember.handleErrors application.js:14910
invoke application.js:18571
iter application.js:18643
RunLoop.flush application.js:18697
RunLoop.end application.js:18602
tryable application.js:18806
Ember.tryFinally application.js:15548
Ember.run.end application.js:18809
Ember.tryFinally application.js:15550
Ember.run application.js:18765
Ember.Mixin.create.init application.js:41369
sendEvent application.js:18480
Ember.Evented.Ember.Mixin.create.trigger application.js:24352
DS.Model.Ember.Object.extend.trigger application.js:45189
superWrapper application.js:15393
    states.rootState.Ember.State.create.loaded.DS.State.create.materializing.DS.State.create.firstTime.DS.State.create.exit application.js:44608
    RunLoop._prev application.js:18573

Ember.handleErrors application.js:14910
invoke application.js:18571
invokeOnceTimer application.js:19016
RunLoop._prev application.js:18573
Ember.handleErrors application.js:14910
invoke application.js:18571
iter application.js:18643
RunLoop.flush application.js:18697
RunLoop.end application.js:18602
tryable application.js:18806
Ember.tryFinally application.js:15548
Ember.run.end application.js:18809
Ember.tryFinally application.js:15550
Ember.run application.js:18765
DS.RESTAdapter.DS.Adapter.extend.findAll.ajax.success application.js:49038
jQuery.Callbacks.fire application.js:1038
jQuery.Callbacks.self.fireWith application.js:1149
done application.js:8075
jQuery.ajaxTransport.send.callback 
```

错误发生然后导航键入此地址（不导航） `transport_documents/2`。相反，如果我导航到此路径，则错误是不同的：我打开的第一个传输文档没问题，而导航到第二个我得到 `You can't call renderToBufferIfNeeded on a destroyed view`

Ember 是否太年轻而无法实现对开发人员有意义的错误处理，或者有什么方法可以让我更轻松地调试代码？

编辑：这是我的 hbl：

应用

```
<div class="container">
  <div class="content">
    {{outlet}}
  </div>
</div> 
```

TRANSPORT_DOCUMENTS

```
<table class="table table-striped">
  <thead>
    <tr>
      <th>
        n
      </th>
      <th>
        data
      </th>
      <th>
        Azioni
      </th>
    </tr>
  </thead>
  <tbody>
    {{#each controller}}
      <tr>
        <td>
          {{#linkTo "transport_document" this}}{{number}}{{/linkTo}}
        </td>
        <td>{{#linkTo "transport_document" this}}{{date}}{{/linkTo}}</td>
        <td>
          <a target="_blank" {{bindAttr href="printable_url"}} class="btn btn-info btn-small">
            <i class="icon-white icon-print"></i>
          </a>

          <a target="_blank" {{bindAttr href=pdf_url}} class="btn btn-info btn-small">
            <i class="icon-white icon-print"></i>
          </a>

          {{#linkTo transport_document this class='btn btn-warning btn-small'}}
            <i class="icon-white icon-edit"></i>
          {{/linkTo}}

          <button {{action this.destroy target="controller"}} class='btn btn-danger btn-small'>
            <i class="icon-white icon-remove"></i>
          </button>
        </td>
      </tr>
      {{outlet}}
    {{/each}}
  </tbody>
</table> 
```

TRANSPORT_DOCUMENT

```
<p>Hello world</p> 
```

路由器

```
App.Router.map ->
  @route "index", path: "/"
  @resource "transport_documents", ->
    @route 'new'
    @resource 'transport_document', {path: "/:transport_document_id"}

App.Router.reopen
  location: 'history'

App.TransportDocumentsRoute = Ember.Route.extend
  model: -> App.TransportDocument.find() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:08:55.520

有几个调试器，作为 chrome 扩展：

[ember 检查器](https://github.com/rapheld/ember_inspector)和[ember 扩展](https://github.com/tildeio/ember-extension)。但它们无法工作，因为 ember 的发展速度比这些插件快。

重新渲染错误是由`outlet`循环内部错误引起的

# html - 带有使用剃刀的子菜单的下拉菜单的简单示例

> ID：15976025
> 
> 赞同：2
> 
> 时间：2013-04-12T16:05:04.690
> 
> 标签：html, razor, asp.net-mvc-4

我在网上搜索了一种将“subItem1”和“subItem2”添加到“Home”项菜单（在下面的示例代码中）的方法，但我发现使用的是 java 或复杂的 razor 示例。有没有更简单的方法只使用剃须刀？

```
 <nav>
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("About", "About", "Home")</li>
                    <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                </ul>
            </nav> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:31:48.083

听起来您想要以下内容？

```
<nav>
    <ul id="menu">
        <li>@Html.ActionLink("Home", "Index", "Home")
            <ul>
                <li>@Html.ActionLink("subItem1", "SubItemOne", "Home")</li>
                <li>@Html.ActionLink("subItem2", "SubItemTwo", "Home")</li>
            </ul>
        </li>
        <li>@Html.ActionLink("About", "About", "Home")</li>
        <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
    </ul>
</nav> 
```

# sorting - DataFrame排序的意外结果

> ID：15976026
> 
> 赞同：1
> 
> 时间：2013-04-12T16:05:06.427
> 
> 标签：sorting, dataframe, pandas

当我使用几列（`['Symbol','Year','Month','Day']`）对我的 DataFrame 进行排序时，生成的 DataFrame 是按`Symbol > Year > Month`但**不是**按以下方式排序的`Day`：

```
In [1]: df = pd.DataFrame({'Symbol': {79: 'F', 81: 'F', 82: 'F', 83: 'F', 84: 'F', 85: 'F', 86: 'F', 87: 'F', 89: 'F'}, 'Shares': {79: 100, 81: 100, 82: 100, 83: 100, 84: 100, 85: 100, 86: 100, 87: 100, 89: 100}, 'Month': {79: '08', 81: '08', 82: '08', 83: '08', 84: '08', 85: '08', 86: '08', 87: '08', 89: '09'}, 'Year': {79: '2008', 81: '2008', 82: '2008', 83: '2008', 84: '2008', 85: '2008', 86: '2008', 87: '2008', 89: '2008'}, 'Action': {79: 'Sell', 81: 'Sell', 82: 'Buy', 83: 'Sell', 84: 'Buy', 85: 'Sell', 86: 'Buy', 87: 'Sell', 89: 'Sell'}, 'Day': {79: 2L, 81: 4L, 82: '06', 83: 11L, 84: '13', 85: 18L, 86: '18', 87: 23L, 89: 22L}})

In [2]: df
Out[2]:
   Action Day Month  Shares Symbol  Year
79   Sell   2    08     100      F  2008
81   Sell   4    08     100      F  2008
82    Buy  06    08     100      F  2008
83   Sell  11    08     100      F  2008
84    Buy  13    08     100      F  2008
85   Sell  18    08     100      F  2008
86    Buy  18    08     100      F  2008
87   Sell  23    08     100      F  2008
89   Sell  22    09     100      F  2008

In [3]: df.sort(['Symbol','Year','Month','Day'])
Out[3]:
   Action Day Month  Shares Symbol  Year
79   Sell   2    08     100      F  2008
81   Sell   4    08     100      F  2008
83   Sell  11    08     100      F  2008
85   Sell  18    08     100      F  2008
87   Sell  23    08     100      F  2008
82    Buy  06    08     100      F  2008
84    Buy  13    08     100      F  2008
86    Buy  18    08     100      F  2008
89   Sell  22    09     100      F  2008 
```

为什么没有[`sort`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.sort.html)按预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:50:27.303

它没有像您预期的那样工作，因为 Days 存储为混合类型（字符串和长整数），并且因为**字符串在 python 中“大于”数字**（排序看起来像是出乎意料的行为）。

[`apply`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html)您可以通过-ing将此列转换为整数[`int`](http://docs.python.org/2/library/functions.html#int)：

```
df['Day'] = df['Day'].apply(int) 
```

我也会考虑在月份和年份执行此操作，因为在您的 DataFrame 中这些是字符串（也许作为 int 更有意义）：

```
df['Mo.'] = df['Mo.'].apply(int)
df['Year'] = df['Year'].apply(int) 
```

然后你可以[`sort`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.sort.html)白天：

```
In [11]: df.sort(['Day'])
Out[11]:
   Indx  Year  Mo.  Day Sym Action  Shares
0    79  2008    8    2   F   Sell     100
1    81  2008    8    4   F   Sell     100
5    82  2008    8    6   F    Buy     100
2    83  2008    8   11   F   Sell     100
6    84  2008    8   13   F    Buy     100
3    85  2008    8   18   F   Sell     100
7    86  2008    8   18   F    Buy     100
8    89  2008    9   22   F   Sell     100
4    87  2008    8   23   F   Sell     100 
```

或使用多列排序：

```
In [12]: df.sort(['Mo.', 'Day'])
Out[12]:
   Indx  Year  Mo.  Day Sym Action  Shares
0    79  2008    8    2   F   Sell     100
1    81  2008    8    4   F   Sell     100
5    82  2008    8    6   F    Buy     100
2    83  2008    8   11   F   Sell     100
6    84  2008    8   13   F    Buy     100
3    85  2008    8   18   F   Sell     100
7    86  2008    8   18   F    Buy     100
4    87  2008    8   23   F   Sell     100
8    89  2008    9   22   F   Sell     100

In [13]: df.sort(['Day', 'Mo.'])
Out[13]:
   Indx  Year  Mo.  Day Sym Action  Shares
0    79  2008    8    2   F   Sell     100
1    81  2008    8    4   F   Sell     100
5    82  2008    8    6   F    Buy     100
2    83  2008    8   11   F   Sell     100
6    84  2008    8   13   F    Buy     100
3    85  2008    8   18   F   Sell     100
7    86  2008    8   18   F    Buy     100
8    89  2008    9   22   F   Sell     100
4    87  2008    8   23   F   Sell     100 
```

并与`ascending`论点：

```
In [14]: df.sort(['Mo.', 'Day'], ascending=[True, False])
Out[14]:
   Indx  Year  Mo.  Day Sym Action  Shares
4    87  2008    8   23   F   Sell     100
3    85  2008    8   18   F   Sell     100
7    86  2008    8   18   F    Buy     100
6    84  2008    8   13   F    Buy     100
2    83  2008    8   11   F   Sell     100
5    82  2008    8    6   F    Buy     100
1    81  2008    8    4   F   Sell     100
0    79  2008    8    2   F   Sell     100
8    89  2008    9   22   F   Sell     100 
```

...将按预期工作。

# c++ - 如何使用 ref 类从 C++ 中的线程访问非静态方法

> ID：15976029
> 
> 赞同：1
> 
> 时间：2013-04-12T16:05:25.613
> 
> 标签：c++, multithreading, c++-cli

我有一门课，我想从.net 调用。我将班级装饰为“参考”。我有一个非静态方法“someFunc”，我打算使用 Thread 调用它。

//在啊我有以下代码

```
include "afxwin.h"

include "msclr\auto_gcroot.h"

using namespace System;

using msclr::auto_gcroot;

namespace A

{

    public ref class A
    {

    public:

        virtual bool Func();

        A();

        ~A();

        virtual bool Connect();

    protected:

        DWORD WINAPI threadConnect(void* pParam);

};

public class AHelper 
{

public:

    auto_gcroot A;

};

} 
```

在 A.cpp 我有以下代码

```
// This is the main DLL file.

include "stdafx.h"
include "A.h"
include "string"
include "sstream"
include "stdlib.h"
include "strsafe.h"
include "windows.h"
include "tchar.h"
namespace A
{

    A::A()
    {
        m_FuncHandle = mpsNil;
    }
    A::~A()
    {

    }

    bool A::Func()
    {
        return true;
    }

    bool A::Connect() 
    {

        AHelper* AHelper;

        m_retVal = false;
        AHelper = new AHelper();

        AHelper->A = this;

        HANDLE Handle_Of_Thread = 0;

        DWORD dwThreadId;

        //DWORD WINAPI threadConnect(void* pParam);

        //If I declare the function declaration here I am getting

        //error LNK2001: unresolved external symbol "unsigned long __stdcall  threadConnect(void *)" (?threadConnect@@YGKPAX@Z)

        Handle_Of_Thread = CreateThread (NULL, 0, threadConnect, AHelper, 0, &dwThreadId);   // with this code I am getting

        //error C3867: 'A::A::threadConnect': function call missing argument list; use '&A::A::threadConnect' to create a pointer to member

        return m_retVal;
    }

    DWORD WINAPI A::threadConnect(void* pParam)
    {
         AHelper* AHelper = reinterpret_cast(pParam);
         //Here I need to call Func
         return 0;   
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:21:14.130

使用托管[线程](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)而不是非托管线程来调用托管类型的方法。

```
gcnew Thread(gcnew ThreadStart(this, &A::threadConnect)); 
```

并更改方法声明以匹配托管线程的预期签名。

```
void A::threadConnect()
{
    // No need for AHelper. The thread that's running will have a reference to
    // the 'this' object, so no need for a GCRoot to keep it alive.
} 
```

# c# - 属性与 get 的区别；放; 并且没有得到；放;

> ID：15976031
> 
> 赞同：1
> 
> 时间：2013-04-12T16:05:26.753
> 
> 标签：c#, properties, static, get, set

我不明白静态属性之间的区别：

```
public static int intId; 
```

并得到；设置；特性：

```
public int intId
{
  get
  {
    return intId;
  }
  set
  {
    intId = value;
  }
} 
```

这两者有什么区别？它们的工作方式相同还是不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:06:14.807

您的第一个示例是一个字段，而不是一个属性。

始终将字段设为私有并将它们包装在属性中是一种很好的做法。

这样，您可以在后代中添加对 set 或覆盖属性的验证（如果它被标记为虚拟）。您还可以在 get 和 set 中添加一些棘手的代码，这些代码将对使用您的课程的人隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:06:50.887

第一个不是财产。它是一个领域。它也是一个*静态*的。

即使它不是静态的，而是一个实例变量，两者也是不同的，编译成不同的 IL。

关于为什么在公共字段上使用简单属性 - 属性允许您封装背后的实现。它们允许您在不更改接口的情况下更改类型内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:08:12.060

> 这两者有什么区别？

您的第一个代码示例是一个字段，而您的第二个代码示例是一个属性。

字段是一个`class`成员，它的值是在`class`实例化时分配的（如果它是在`class`定义上设置的），在`constructor`被调用之前，你在设置或获取它时没有任何控制：

```
public static int intId; 
```

属性是一个`class`成员，我可以将其描述为一个特殊的“字段”，您可以控制数据的设置和获取方式，换句话说 - 封装，它是一种函数，但行为类似于字段：

```
public int intId
    {
        get
        {
            return intId;
        }
        set
        {
            intId = value;
        }
    } 
```

在您的示例中，该`int`属性正在使用该`static` `int`字段，但您对两者的使用都错误：

1.  您的字段应该带有`private`修饰符而不是`static`，否则使用它没有意义，因为它可能会从外部来源更改。

2.  两个名字一样，改一下。

像那样：

```
private int _intId;

public int IntId
{
    get
    {
        return _intId;
    }
    set
    {
        _intId = value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:20:36.000

它们是该类的相同 int 变量，但是第一个是静态 int，它将从 Class 访问并且可以更改，并且它的任何实例都将具有相同的值。

```
public static int intId; 
```

第二个将仅由实例访问，并且每个实例具有唯一值，因为它不是静态的，但自从它公开以来，任何人都可以访问它。

```
 public int intId
    {
        get
        {
            return intId;
        }
        set
        {
            intId = value;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T16:06:52.520

首先是静态场；它甚至不是财产。

静态字段对于应用程序只有一个值。

而第二个是实例属性，对于类的每个实例都是不同的。

如果它是属性或字段，则在此示例中没有太大区别。但从长远来看，如果您在界面中使用属性，您可能会在以后更改它以拥有一个实际的 getter 和 setter，例如验证或使对象以某种方式对新值做出反应。字段只是一个字段，您无法控制何时以及如何设置它并对它做出反应。

# ios6 - UIScrollView contentSize 自动布局约束问题

> ID：15976033
> 
> 赞同：1
> 
> 时间：2013-04-12T16:05:27.723
> 
> 标签：ios6, uiscrollview, autolayout

这是情况。

我有一个使用自动布局的 UIScrollView，当我旋转它时，它成功地调整到屏幕上，我的问题在于滚动视图的内容没有调整。

scrollView 是红色部分。

![1](https://dl.dropboxusercontent.com/u/7231699/ScreenShots/Captura%20de%20pantalla%202013-04-12%20a%20la%28s%29%2011.25.53.png) ![2](https://dl.dropboxusercontent.com/u/7231699/ScreenShots/Captura%20de%20pantalla%202013-04-12%20a%20la%28s%29%2011.25.58.png)

这是我的代码：

```
-(void)preparePromotions
{

CGRect frameViewPromotions = [self getPossibleFrame];

    frameViewPromotions.origin.x = 10.0f;
    frameViewPromotions.origin.y = 10.0f;
    if (!_promotionsViewController)
    {
        _promotionsViewController = [[PromotionsViewController alloc] init];
    }
    _promotionsViewController.view.frame = frameViewPromotions;
    _promotionsViewController.margin = 2.0f;
    _promotionsViewController.diameterPageController = 10.0f;
    _promotionsViewController.marginPageController = 15.0f;
    _promotionsViewController.frameContentView = frameViewPromotions;

    [self addChildViewController:_promotionsViewController];

_promotionsViewController.view.translatesAutoresizingMaskIntoConstraints = NO;
[self.view addSubview:_promotionsViewController.view];
[self createCosntraintWithView:_promotionsViewController.view];    

}

-(void)createCosntraintWithView:(UIView *)subview
{
NSDictionary *views = NSDictionaryOfVariableBindings(subview);

[self.view addConstraints:
 [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-10-[subview]-10-|"
                                         options:0
                                         metrics:nil
                                           views:views]];

[self.view addConstraints:
 [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-40-[subview]-50-|"
                                         options:0
                                         metrics:nil
                                           views:views]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:24:12.770

scrollView 的内容不会调整，因为您在那里使用的是框架，而不是 AutoLayout。如果您将框架重写为 AutoLayout 约束，它会在您旋转时进行调整。始终尽量避免混合 AutoLayout 和框架，因为您可能会得到不可预知的结果。

# php - 函数中接收到错误的值

> ID：15976034
> 
> 赞同：1
> 
> 时间：2013-04-12T16:05:36.623
> 
> 标签：php, cakephp, parameters, cakephp-1.3, iepngfix

我用 CakePHP 1.3.10 制作的网站上发生了一些非常奇怪的事情，我不知道这是 CakePHP 问题还是 PHP 问题。我遇到的问题是属于插件的控制器内部的操作。

这是一个简单的函数，它看起来像：

```
function my_function($my_parameter) {

    $current_url = $this->params['url']['url']; //We get the current url (includes plugin/controller/action/parameters) from Cake's $this->params array

    $this->saveInfoToDB($current_url); //Function that saves the variable and other info to a table in the database - This function doesn't change the value of the variable, just saves it
} 
```

此操作由网站中的多个链接调用，格式为“/my_plugin/my_controller/my_function/my_paramenter”。这个想法是显示页面“my_function”并将当前url存储在数据库中

那么问题是什么？让我解释：

查看数据库中“saveInfoToDB”存储的注册表，我意识到我存储“current_url”值的字段**有时**（它似乎是随机的）具有意外值。

**正常值**如下所示：/my_plugin/my_controller/my_function/ 3 **（**整数从 1 到 100）**错误**值总是相同：**/my_plugin/my_controller/my_function/js/iepngfix.htc**

你能看出什么问题是对的吗？我不知道为什么在世界上**js/iepngfix.htc**存储在那里！我将**$my_parameter**放在示例中的原因是因为我已经意识到**js/iepngfix.htc**被作为参数传递到该函数中（因此它也显示在**$this->params**数组中）。但为什么？

**我的网站上没有**像 **/my_plugin/my_controller/my_function/js/iepngfix.htc**这样的链接，那怎么会发生呢？我不相信许多不同的用户会同意在浏览器中输入该网址（顺便说一句，**用户必须登录才能访问该链接**）。显然，在某些时候，当用户浏览网站时，该链接被“调用”，但我不知道如何......

该网站使用了一些针对 PNG 图像的 IE hack（如 iepngfix.htc、iepng_tilebg.js 等），但我已经删除了它们，因此它们不会在任何地方调用，甚至从服务器中删除了文件。

我知道很难回答为什么会发生这种情况，但是如果有人可以就如何对我的网站进行故障排除以找出问题的根源给我一些建议。我试图重新创建这个问题，但我只能使用 IE 并访问用户访问的链接之一（例如**/my_plugin/my_controller/my_function/43**），但尝试了更多次并且它没有再次发生. 那么这是IE的问题吗？当用户调用**正确**的链接时，此浏览器是否调用了该链接（**错误**的链接） ？

 **任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:39:22.597

您可能正在尝试`iepngfix.htc`通过**相对**URL 包含该行为；**可能来自样式表**；

例如：如果`iepngfix.htc`使用此 URL 链接

```
../js/iepngfix.htc 
```

你目前在这个页面：

```
http://example.com/mycontroller/myaction/ 
```

然后`iepngfix.htc`URL 被解析为：

```
http://example.com/mycontroller/js/iepngfix.htc 
```

这将给出错误 404。

**但是**，如果您当前位于**此**页面：

```
http://example.com/mycontroller/myaction/123 
```

然后`iepngfix.htc`URL 被解析为：

```
http://example.com/mycontroller/myaction/js/iepngfix.htc 
```

最后一部分将作为参数 ( `js/iepngfix.ht`)发送到您的控制器操作

## 如何解决这个问题

*   首先，你真的需要 pngfix 吗？您可能只需要 Internet Explorer 6 及以下版本。除非您的目标是中国，否则 Internet Explorer 6 的市场份额**不到 1%** ( [http://www.ie6countdown.com/](http://www.ie6countdown.com/) )。即便如此，这种行为也会产生很多负面影响，导致性能非常差
*   检查您的网址！由于 URL 重写，您应该始终使用“资产”（CSS、JavaScript）的**完整路径；**即`/js/myscript.js`代替`js/myscript.js`或`../js/myscript.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:23:31.200

我想我可能已经找到了罪魁祸首。在其中一个 css 文件中有这个 css 代码“隐藏”：

```
body { behavior: url('js/iepngfix.htc') } 
```

（我会提到这个设计是别人做的）

删除该片段后，该问题*似乎*不再发生。为什么？我不知道...为什么在函数中将其作为参数传递？我真的不知道...为什么会随机发生？我真的不知道...

我确信所有这些都有一个解释，但我没有太多时间进一步调查它，我很高兴它现在正在工作！**

# php - 如何将 php 与 ini 文件一起使用

> ID：15976038
> 
> 赞同：3
> 
> 时间：2013-04-12T16:05:55.447
> 
> 标签：php, ini

我的php代码在这里

```
 <?php
    function String($word){

            $lang = parse_ini_file("../pard_language/en/language.ini");

        $key = array_search($word, $lang); 
        if(isset($key)){
        echo $key;

        }
        }

     echo String("PARD_INSTALL");
    ?> 
```

我的 language.ini 文件是这个

```
PARD_INSTALL = Install
PARD_USER_AGGREMENT = User Aggrement
PARD_AGREE = Agree
PARD_HOST_NAME = Host Name
PARD_DATA_BASE = Data Base
PARD_DATA_BASE_USER =  Data Base User
PARD_DATA_BASE_USER_PASS_WORD =  Data Base User Password
PARD_CONNECT = Connect
PARD_RESET = Reset
PARD_ADMIN_USER_NAME =  Admin User Name
PARD_ADMIN_USER_PASS_WORD =  Admin User Password
PARD_LOGIN = Login 
```

这是我上面的代码不起作用。我想保留一个包含语言的ini文件，需要使用上面的php函数获取单词值。这个代码没有给出任何输出。请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:10:29.187

您正在搜索未获得键的值， `parse_ini_file`将返回所有元素的数组，因此`$lang[$word]`您应该获得所需的值...

```
function String($word) {
    $lang = parse_ini_file("../pard_language/en/language.ini");
    return isset($lang[$word]) ? $lang[$word] : null ;
} 
```

现在这仍然是一个`BAD Approach`为什么？

*   `parse_ini_file`每次需要加载文件时都必须调用
*   `String`是一个函数的坏名字
*   `echo`被调用了两次.. 1.在函数内和函数外使用`return`

这是我会使用的：

```
$ini = new ArrayINI("../pard_language/en/language.ini");
echo $ini("PARD_INSTALL");
// or
echo $ini['PARD_INSTALL']; 
```

因为我也扩展`IteratorAggregate`了我可以循环所有的值

```
foreach ( $ini as $k => $value ) {
    var_dump($k . " = " . $value);
} 
```

使用的类

```
class ArrayINI implements ArrayAccess, IteratorAggregate {
    private $lang;

    public function __construct($ini) {
        $this->lang = parse_ini_file($ini);
    }

    function __invoke($offset) {
        return $this->offsetGet($offset);
    }

    public function getIterator() {
        return new ArrayIterator($this->lang);
    }

    public function offsetSet($offset, $value) {
        if (is_null($offset)) {
            $this->lang[] = $value;
        } else {
            $this->lang[$offset] = $value;
        }
    }

    public function offsetExists($offset) {
        return isset($this->lang[$offset]);
    }

    public function offsetUnset($offset) {
        unset($this->lang[$offset]);
    }

    public function offsetGet($offset) {
        return isset($this->lang[$offset]) ? $this->lang[$offset] : null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:11:10.080

我建议您创建一个静态类，这样您就不必为所需的每个键重新解析相同的 ini 文件：

```
class IniParser {
    private static $parsedFile = null;

    public static function getValue($word) {
        if (self::$parsedFile === null) {
            self::$parsedFile = parse_ini_file("../pard_language/en/language.ini");
        }

        if (isset(self::$parsedFile[$word])) {
            return self::$parsedFile[$word];
        }

        return null;
    }
}

echo IniParser::getValue("PARD_INSTALL"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:08:50.960

尝试

```
$lang = parse_ini_file("../pard_language/en/language.ini");
print_r($lang); 
```

# asp.net-mvc-3 - 将不同模型的查询传递给不同模型的视图

> ID：15976040
> 
> 赞同：0
> 
> 时间：2013-04-12T16:06:00.620
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我有一个`Location`模型和一个`Services`模型，使用应用程序的上下文类我可以在位置的 create 方法中对服务模型进行查询，但是如何在绑定的强类型视图的视图中访问这些结果到地点？

```
namespace LocationApp.Models
{
    public class Location
    {
        public Location()
        {
            this.ServiceAssignments = new HashSet<ServiceAssignment>();
        }

        public int id { get; set; }
        public string name { get; set; }
        public bool active { get; set; }

        public virtual ICollection<ServiceAssignment> ServiceAssignments { get; set;  }
    }
}

namespace LocationApp.Models
{
    public class Service
    {
        public Service()
        {
            this.ServiceAssignments = new HashSet<ServiceAssignment>();
        }

        public int id { get; set; }
        public string name { get; set; }
        public string description { get; set; }
        public bool active { get; set; }
        public string icon { get; set; }

        public virtual ICollection<ServiceAssignment> ServiceAssignments { get; set; }
    }
}

public ActionResult Create()
{
    using (var db = new LocationAppContext())
    {
        var serv = (from s in db.Services
                    where s.active == true
                    select s).ToList();

         if (serv.Count > 0)
         {
             return View(serv);
         }
         else
         {
             return View();
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:45:56.987

您需要创建一个新的 ViewModel。

```
public class CreateLocationVM
{
  public string Name { set; get;}
  public List<SelectedService> Services { set; get;}  
  public CreateLocationVM()
  {
     Services=new List<SelectedService>();
  }
}
public class SelectedService
{
  public int ID { set; get;}
  public string Name {set; get;}
  public bool IsSelected { set; get;}
} 
```

现在在您的**GET**操作中，您创建视图模型的对象并填充`Services`集合属性并将其发送到视图。

```
public ActionResult Create()
{
    var vm = new CreateLocationVM();

    //The below code is hardcoded for demo. you mat replace with DB data.
    vm.Services.Add(new SelectedService{ Name = "Test1" , Id=1});
    vm.Services.Add(new SelectedService{ Name = "Test2", Id=2 });

    return View(vm);
} 
```

现在让我们创建一个 EditorTemplate。转到`Views/YourControllerName`并创建一个名为“ **EditorTemplate**`SelectedService.cshtml` ”的文件夹，并在那里创建一个与属性 Name( )同名的新视图

将此代码添加到您的新编辑器模板中。

```
@model SelectedService
<p>
  <b>@Model.Name</b>   :
  @Html.CheckBoxFor(x => x.IsSelected) <br />
  @Html.HiddenFor(x=>x.Id)
</p> 
```

`EditorFor`现在在您的主视图中，使用Html Helper 方法调用您的编辑器模板。

```
@model CreateLocationVM
<h2>Add Location</h2>
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(m => m.Name)
        @Html.TextBoxFor(m => m.Name)
    </div>    
    <div>  
      @Html.EditorFor(m=>m.Services)         
    </div>    
    <input type="submit" value="Submit" />
} 
```

现在，当您发布表单时，您的模型将拥有`Services`Collection，其中 Selected Checkboxes 将具有属性`True`值。`IsSelected`

```
[HttpPost]
public ActionResult Create(CreateLocationVM model)
{
   if(ModelState.IsValid)
   {
      //Check for model.Services collection and Each items
      //  IsSelected property value.
      //Save and Redirect(PRG pattern)
   }
   return View(model);
} 
```

您可以从 Viewmodel 中读取并创建实体并设置正确的值并保存到数据库。

# ios - 在 ios 2.1 之后以横向模式启动应用程序

> ID：15976041
> 
> 赞同：0
> 
> 时间：2013-04-12T16:06:01.153
> 
> 标签：ios, uiview

我想知道按照苹果告诉我在横向模式下显示应用程序的子菜单下的步骤我错过了[什么](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW9)。发生的事情是我的坐标系都搞砸了，我不相信我完全想通的唯一指示是在横向模式下布置视图并确保它们的布局或自动调整大小选项设置正确。这就是为什么我认为我的坐标系一团糟的原因。为了解决这个问题，我在网上找到了一些代码，可以为我修复我的坐标空间，但解决这个问题的方法仅适用于 ios 2.1 及更低版本。那么有人可以告诉我我需要做什么才能不使用该代码吗？

# c - 无法在结构中初始化条件变量

> ID：15976043
> 
> 赞同：3
> 
> 时间：2013-04-12T16:06:03.023
> 
> 标签：c, pthreads

为什么我无法在结构中初始化条件变量？我希望每个节点都有一个条件变量，这样我就可以等待并发出信号，当我添加初始化代码时，它会抛出这个错误：预期的'：'，'，'，';'，'}'或'<strong> '=' 标记之前的属性'：*** [trie.o] 错误 1

我尝试在需要时（不在结构中）进行初始化，但仍然出现错误，我已经包含了 pthreads.h

```
struct trie_node {

  pthread_cond_t condition=PTHREAD_COND_INITIALIZER;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:10:37.533

`PTHREAD_COND_INITIALIZER`初始化结构成员时不能使用。

您必须[`pthread_cond_init`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_cond_destroy.html)在创建结构实例后使用。

*实际上，在结构体定义中根本*无法初始化结构体成员，不只是这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:42:12.657

要在定义 struct trie_node 对象时进行初始化，请使用：

```
struct trie_node x = { …, PTHREAD_COND_INTIALIZER, … }; 
```

代替“...”，放置结构的其他成员的初始化器（如果有的话）。如果你不关心它们，你可以省略尾随的。

要为`condition`现有对象中的成员分配值，请使用：

```
x.condition = (pthread_cond_t) PTHREAD_COND_INITIALIZER; 
```

两件事情：

您使用的代码失败，因为您在定义结构时无法指定成员的初始化。初始化伴随着对象的定义，而不是类型的定义。

扩展`PTHREAD_COND_INITIALIZER`具有初始化程序的格式，例如`{ values }`. 它不是表达式，因此您不能在赋值语句中正常使用它。但是，`(pthread_cond_t) PTHREAD_COND_INITIALIZER`上面显示的创建了一个“复合文字”，它是一个表达式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T16:16:38.023

要初始化结构成员，您必须按如下方式创建结构的实例。

结构 trie_node my_node;

然后你可以像下面这样初始化它。

my_node.condition=PTHREAD_COND_INITIALIZER;

或者

结构 trie_node *my_node; my_node->条件=PTHREAD_COND_INITIALIZER；

# c# - 从 CLR 存储过程调用返回表变量

> ID：15976054
> 
> 赞同：1
> 
> 时间：2013-04-12T16:06:46.057
> 
> 标签：c#, clr, sql-server-2012, sqlclr, clrstoredprocedure

我有一个现有的 CLR，它使用 XST 来分解和验证传入的 XML。我想将数据点（不关心 XML 本身）捕获到可以直接插入到数据库表中的表中。所以我会调用我的 CLR 存储过程，它会返回 4 列数百或行，我可以简单地做一个

```
insert into EXISTINGtable 
select * from TableReturnedFromCLRspCAll 
```

它不一定是 SP，它可以是 UDF……我真正的问题是如何让 CLR 返回一个表。我还需要能够传入表定义。因此，对于 CLR 返回的表......我希望将 4 个列名和类型作为变量作为 CLR 调用的一部分。

如果有人能帮我解决这个问题，我将不胜感激，也给我留下了深刻的印象，因为我问过一些经验丰富的人，当我到达 CLR 的动态表和/或 CLR 返回表时，他们都举起了手一点也不。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:10:18.487

来自 MSDN [http://msdn.microsoft.com/en-us/library/ms131094.aspx](http://msdn.microsoft.com/en-us/library/ms131094.aspx)

> 返回表格结果
> 
> 若要将查询结果直接发送到客户端，请使用 SqlPipe 对象上的 Execute 方法的重载之一。这是将结果返回给客户端的最有效方式，因为数据被传输到网络缓冲区而不被复制到托管内存中。

我没有从存储过程中尝试过它，但是我使用以下示例从 CLR UDF 返回了一个表。 [http://msdn.microsoft.com/en-us/library/ms131103.aspx](http://msdn.microsoft.com/en-us/library/ms131103.aspx)

# wpf - 允许用户在 WPF 中调整扩展器的大小

> ID：15976057
> 
> 赞同：7
> 
> 时间：2013-04-12T16:06:50.023
> 
> 标签：wpf, wpf-controls, wpf-4.0

我有很多 C# 和 WinForms 经验，但我是 WPF 的新手。我有一个带有向下扩展的扩展器的窗口。就像我当前输入的问题框一样，我希望用户能够通过单击底部的字形（如此问题框）并将扩展器拖动到所需的大小来动态调整扩展器的大小。

任何人都可以提供 XAML（和任何其他代码）来执行此操作吗？

这是我到目前为止所拥有的：

```
<Expander Header="Live Simulations" Name="expandLiveSims" Grid.Row="0" ExpandDirection="Down" IsExpanded="True">
    <Expander.Background>
        <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
            <GradientStop Color="White" Offset="0" />
            <GradientStop Color="LightGray" Offset="0.767" />
            <GradientStop Color="Gainsboro" Offset="1" />
        </LinearGradientBrush>
    </Expander.Background>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <DataGrid Height="250" Margin="5" Name="gridLiveProducts" VerticalAlignment="Top" Grid.Row="0" Grid.Column="0">
        </DataGrid>
        <GridSplitter Grid.Row="0" Grid.Column="1" Width="3" VerticalAlignment="Stretch" HorizontalAlignment="Center">
            <GridSplitter.Background>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="White" Offset="0" />
                    <GradientStop Color="DarkGray" Offset="0.25" />
                    <GradientStop Color="DarkGray" Offset="0.75" />
                    <GradientStop Color="Gainsboro" Offset="1" /> <!-- Gainsboro matches the expander -->
                </LinearGradientBrush>
            </GridSplitter.Background>
        </GridSplitter>
        <Border Grid.Row="0" Grid.Column="2" Background="White" BorderBrush="Black" BorderThickness="1" Margin="5" >
            <Image Height="250" HorizontalAlignment="Right" Name="imgShares" Stretch="Fill" VerticalAlignment="Top" Width="250">
            </Image>
        </Border>
        <GridSplitter Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" Height="3" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="3">
            <GridSplitter.Background>
                <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                    <GradientStop Color="Gainsboro" Offset="0" />
                    <GradientStop Color="DarkGray" Offset="0.25" />
                    <GradientStop Color="DarkGray" Offset="0.75" />
                    <GradientStop Color="Gainsboro" Offset="1" />
                </LinearGradientBrush>
            </GridSplitter.Background>
        </GridSplitter>
    </Grid>
</Expander> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T16:19:58.040

你必须使用`Grid`with `GridSplitter`。

像这样：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Expander Grid.Row="0" Background="Azure"></Expander> <!--this is you Expander-->
    <GridSplitter Grid.Row="1" Height="10" Background="Red" ResizeDirection="Rows" HorizontalAlignment="Stretch"/> <!--this GridSplitter represents the glyph-->
</Grid> 
```

为了以这种方式成功，拖带边必须是 Height="*"

# vim - 为什么这个 Vim 命令会清除我终端上的所有字符？

> ID：15976061
> 
> 赞同：1
> 
> 时间：2013-04-12T16:06:57.700
> 
> 标签：vim, terminal

我的 .vimrc 中有这个函数，我在[这里得到的](http://vim.wikia.com/wiki/Setting_file_attributes_without_reloading_a_buffer)

```
function! SetExecutableBit()
  let fname = expand("%:p")
  checktime
  execute "au FileChangedShell " . fname . " :echo"
  silent !chmod a+x %
  checktime
  execute "au! FileChangedShell " . fname
endfunction
command! Xbit call SetExecutableBit() 
```

当我运行时`:call SetExecutableBit()`，它按预期工作。但是当我运行时`:Xbit`，所有字符都会从我的术语中消失（但在 Gvim 中不会）。我已经在 gnome-terminal 和 urxvt 上复制了这个。如果我尝试用鼠标或 突出显示某些文本`ggVG`，该文本将重新出现。

“之前”截图：

![](https://i.imgur.com/helBrRu.png)

词条运行后截图`:Xbit`：

![](https://i.imgur.com/3CB38v1.png)

选择一些文本后的屏幕截图：

![](https://i.imgur.com/h5xmY8K.png)

* * *

更新，因为这个错误发生在`--noplugin`但不会*发生*在`-u NONE`我的 .vimrc 文件中：[https ://gist.github.com/dbb/5373175](https://gist.github.com/dbb/5373175)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:29:29.133

这可能只是重绘屏幕的问题。尝试将 a 添加`:redraw`到您的函数中。如果需要，在此命令后附加 a`!`将首先清除屏幕。

```
function! SetExecutableBit()
  let fname = expand("%:p")
   ...
  execute "au! FileChangedShell " . fname
  redraw
endfunction 
```

[`:h :redraw`](http://vimdoc.sourceforge.net/htmldoc/various.html#%3aredraw)

# c# - DevExpress XtraGrid：如何强制使用不采用系统短/长日期设置的日期时间格式

> ID：15976065
> 
> 赞同：0
> 
> 时间：2013-04-12T16:07:16.180
> 
> 标签：c#, winforms, devexpress, xtragrid

**在我们公司，长日期和短**日期的 Windows 区域设置已自定义为始终显示日期名称，如下所示：“dddd dd MMMM yyyy”表示“2012 年 4 月 12 日星期五”。

在我们的 CRM 软件中，我们使用了很多 DevExpress 组件，在其中一个 XtraGrid 中，我想避免默认系统行为并显示自定义格式。

我确实将列设置为显示格式类型：“DateTime”和[MSDN](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#GeneralDateLongTime)上指定的 FormatString：“G”，但是当我运行软件时，它仍然显示系统短日期（2012 年 4 月 12 日，星期五）

有没有办法强制显示格式不使用系统默认值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:11:43.403

您可以在属性中指定所需的任何[自定义格式字符串。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)`DisplayFormat.FormatString`您不仅限于标准格式字符串。例如，您可以将列的格式指定为：

```
FormatString = "MM/dd/yyyy" 
```

你会得到标准的美式短日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:36:34.920

像这样创建一个日期时间：

```
DateTime dtime = DateTime.ToString("dddd dd MMMM yyyy"); 
```

# java - 如何向 JFrame 添加更多 Jpanels？

> ID：15976068
> 
> 赞同：0
> 
> 时间：2013-04-12T16:07:21.877
> 
> 标签：java, swing

我已将所有 UI 组件添加到我的 JPanel，并在 Jframe 的 JMenu 发生特定事件时将这些面板添加到 JFrame。我的 JFrame 也有 JTollbar。

但是问题是，当我尝试添加 Panel 类对象时，我需要调用 removeAll() 以删除以前添加的 Jpanel 。但是此方法也删除了我的 Jtoolbar 。我应该怎么做这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:11:42.533

你应该看看[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，甚至可能是[卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。卡片布局允许您堆叠面板，然后决定哪一个是可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:56:22.943

正如其他人所说，使用布局来安排您的面板，并且可能会在视图中添加一个新面板。例如，您可以使用 BorderLayout 将 Toolbar 分配给 PageStart 并将面板分配给 JFrame 的中心。稍后您可以更改布局中心位置的内容

如果新面板的布局完全不同，卡片布局可能会有所帮助。

一个非常简单（可能很糟糕）的解决方案是首先将一个大的 JPanel 添加到您的 JFrame 作为主要内容面板。然后将您的面板添加到其中，然后删除该主要内容面板中的所有组件。在这种情况下，您的工具栏是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:17:21.607

使用 Swing 库提供的布局，例如`BorderLayout`，甚至是`GroupLayout`( [http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:08:27.777

我将向您展示简短的代码，希望您能够将其集成到您的应用程序中。

```
class MyClass extends JFrame implements ActionListener,ItemListener
{
    JMenuBar menubar1;
    JMenu menu1,menu2;
    JMenuItem item1,item2,item3;
    JCheckBoxMenuItem jcbmi;

    PanelFont pf = new PanelFont();
    PanelShape ps = new PanelShape();
    PanelIcon pi = new PanelIcon();

................

    MyClass()
    {
        menubar1=new JMenuBar();
        menu1=new JMenu("Application");
        menu2=new JMenu("Window");

        item1=new JMenuItem("Font & Color");
        item2=new JMenuItem("Shape");
        item3=new JMenuItem("Image & IconButton");

        jcbmi=new JCheckBoxMenuItem("Resize");

        menu1.add(item1);
        menu1.add(item2);
        menu1.add(item3);
        menu2.add(jcbmi);

        menubar1.add(menu1);
        menubar1.add(menu2);

        setJMenuBar(menubar1);

        getContentPane().add(pf);

        item1.addActionListener(this);
        item2.addActionListener(this);
        item3.addActionListener(this);
        jcbmi.addItemListener(this);

    }

...............

    public void actionPerformed(ActionEvent e)
    {
        Object source =(JMenuItem) e.getSource();

        if(source == item1 )
        {
            System.out.println("Font & Color...");

            pf=new PanelFont();
            getContentPane().removeAll();
            getContentPane().add(pf);
            validate();
        }

        else if(source == item2 )
        {
            System.out.println("Shape...");

            ps =new PanelShape();
            getContentPane().removeAll();
            getContentPane().add(ps);
            validate();     
        }

        else if(source == item3 )
        {
            pi =new PanelIcon();
            getContentPane().removeAll();
            getContentPane().add(pi);

            Image picture = pi.myFrameImage();
            setIconImage(picture);

            validate();
        }

    }

............

}//End of class

class PanelFont extends JPanel implements ItemListener
{

..........

JComboBox fontSize = new JComboBox (size);
JComboBox fontColor = new JComboBox (color);
JComboBox fontFamily;

JCheckBox ckBold = new JCheckBox ("Bold");
JCheckBox ckItalic = new JCheckBox ("Italic");

PanelFont()
    {
        GraphicsEnvironment ge ;
        ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        String[] family = ge.getAvailableFontFamilyNames();
        fontFamily = new JComboBox (family);

        add(fontFamily);        
        add(fontSize);
        add(fontColor);
        add(ckBold);
        add(ckItalic);

}//End of class

//Start of PanelShape
class PanelShape extends JPanel implements ItemListener
{
JComboBox cbShape;
String[] shape1 = {"Rectangle","RoundRectangle","Line","Polygon","Oval","Arc"};
Shape sp = null;

    PanelShape()
    {
        cbShape = new JComboBox(shape1);
        add(cbShape);

............

}//End of PanelShape

//Start of Panel Icon & Image
class PanelIcon extends JPanel
{
Image picture;
ImageIcon btnImage,FrameImage;

JButton btnHello = new JButton("BHUSHAN");
Toolkit tk ;
    PanelIcon()
    {
        tk = Toolkit.getDefaultToolkit();
        picture  = tk.getImage("Image\\JavaLogo1.jpg");

        btnImage  =new ImageIcon("Image\\Icon.jpg");
        btnHello.setIcon(btnImage);

        add(btnHello);
        repaint();
    }
.....

In this example , I used three different Panels & It is also be changed at menu change event occurs... 
```

# sql - 如何在单个 SELECT 语句中使用不同条件对 DISTINCT 行进行计数？

> ID：15976072
> 
> 赞同：0
> 
> 时间：2013-04-12T16:07:48.623
> 
> 标签：sql, sql-server

我有一张桌子，上面有来自不同用户的订单。每个用户（由电子邮件地址标识）可以有任意数量的订单。我没有额外的用户表，只有一个普通的 OrderData 表。我想要的听起来很简单：

1.  用户总数
2.  XYZ 用户数
3.  非 XYZ 用户数

其中 1\. 是 2\. 和 3\. 的总和。“XYZ”用户由以“@xyz.com”结尾的电子邮件地址定义。

我想要一个查询，在三列中返回三个值。我目前拥有的是：

```
SELECT 
    (
    SELECT COUNT(DISTINCT User_EmailAddress)
    FROM OrderData
    WHERE User_EmailAddress IS NOT NULL
    AND RequestTime >= @RequestTimeFrom
    AND RequestTime  < @RequestTimeTo
    ) AS [Total Users],
    (
    SELECT COUNT(DISTINCT User_EmailAddress)
    FROM OrderData
    WHERE User_EmailAddress IS NOT NULL
    AND User_EmailAddress LIKE '%@xyz.com'
    AND RequestTime >= @RequestTimeFrom
    AND RequestTime  < @RequestTimeTo
    ) AS [XYZUsers],
    (
    SELECT COUNT(DISTINCT User_EmailAddress)
    FROM OrderData
    WHERE User_EmailAddress IS NOT NULL
    AND User_EmailAddress NOT LIKE '%@xyz.com'
    AND RequestTime >= @RequestTimeFrom
    AND RequestTime  < @RequestTimeTo
    ) AS [Non-XYZ Users] 
```

它返回正确的结果集：

```
Total Users | XYZ Users | Non-XYZ Users
------------+-----------+--------------
        123 |        23 |           100 
```

有没有更好的方法来编写这个查询，而不是基本上使用相同的代码进行三个类似的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:16:14.300

这是一种减少冗余代码并避免多次扫描数据问题的解决方案。由于您真正关心的是计数，因此您甚至不需要返回任何实际数据，并且您可以将几乎所有逻辑折叠成一个`CASE`表达式：

```
;WITH x AS 
(
  SELECT isxyz = CASE WHEN User_EmailAddress LIKE '%@xyz.com' THEN 1 ELSE 0 END
  FROM dbo.OrderData
  WHERE User_EmailAddress IS NOT NULL
    AND RequestTime >= @RequestTimeFrom
    AND RequestTime  < @RequestTimeTo
    GROUP BY User_EmailAddress
)
SELECT 
  TotalUsers      = COUNT(isxyz),
  XYZUsers        = SUM(isxyz),
  [Non-XYZ Users] = COUNT(NULLIF(isxyz,1))
FROM x; 
```

诀窍是利用聚合对您有利。由于`1/0`输出不是真正的`BIT`列，因此您可以`SUM`获取`1`s 的计数。而相反的情况可以通过将`1`s更改为 来实现`NULL`，因为`NULL`s 会被 忽略`COUNT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:24:56.197

bluefeet 提供的解决方案仍然有一个缺点——每个 DISTINCT 聚合（在本例中为 COUNT）分别使用输入行流。这可能会导致对基表进行单独的扫描/查找 - 每个不同的聚合一组。尽管有时优化器可以将基表搜索/扫描假脱机到工作表中，然后计算聚合。

一种更注重性能的方法（在这种特定情况下）是将总计数放入一个变量，然后将 xyz 计数放入另一个变量，然后使用标量算术推导出第三个值（非 xyz）。这样你就可以避免一个假脱机重播（或者更糟糕的是基表查找/扫描运算符。）

阅读 Paul White 的博客了解更多信息：[http ://web.archive.org/web/20170606142356/http://sqlblog.com/blogs/paul_white/archive/2011/12/04/is-distinct-aggregation-仍然认为有害的.aspx](http://web.archive.org/web/20170606142356/http://sqlblog.com/blogs/paul_white/archive/2011/12/04/is-distinct-aggregation-still-considered-harmful.aspx)

# wordpress - 无法删除某些未设置的菜单

> ID：15976078
> 
> 赞同：1
> 
> 时间：2013-04-12T16:08:24.157
> 
> 标签：wordpress, menu, user-roles

我有一个自定义用户角色，只需要访问某些帖子类型，我试图用这个隐藏其他菜单：

```
function remove_menus () {

    global $current_user;
    if ($current_user->wp_capabilities['my_custom_capability']){

        global $menu;
        $restricted = array(
        __('Supporters'),
        __('Posts'),
        __('Press Release'),
        __('Consumer Care'),
        __('Tools')
        );
        end ($menu);
        while (prev($menu)){
            $value = explode(' ',$menu[key($menu)][0]);
            if(in_array($value[0] != NULL?$value[0]:"" , $restricted)){unset($menu[key($menu)]);}
        }
    }
}
add_action('admin_menu', 'remove_menus'); 
```

这适用于支持者（这是另一种自定义帖子类型）、帖子和工具，但不适用于消费者服务或新闻稿。我已经尝试了数组中我能想到的所有变体：

```
__('Consumer_Care'),
__('Consumer-Care'),
__('consumer care'),
__('consumer-care'),
__('consumer_care') 
```

他们都没有做这项工作。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:53:56.757

只需将[高优先级](http://codex.wordpress.org/Plugin_API#Hook_to_WordPress)添加到操作调用。没有它，它会默认触发，之后会`10`运行许多插件，所以你`unset`不会得到它们。

```
add_action( 'admin_menu', 'remove_menus', 999 ); 
```

# c++ - C 文件包含的所有头文件的列表

> ID：15976080
> 
> 赞同：10
> 
> 时间：2013-04-12T16:08:31.263
> 
> 标签：c++, c

我正在尝试“武装”编译一个 C 文件，它递归地包含许多头文件..我正在尝试查找这些头文件的列表..有没有更简单的方法来查找它包含的所有头文件的列表?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T16:11:22.333

您可以使用带有选项的 GCC C 预处理器来转储递归包含的标头列表：

```
cpp -M 
```

这将显示所有包含的标题。

您可能需要为其提供常规构建中使用的所有包含目录的根。迭代运行它，添加更多包含路径，直到错误停止。

此用法中此命令的完整形式为：

```
cpp -M [-I include_directory *] path_to_c_file.c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:41:35.397

根据[http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options) -H 和 -M 选项可用于此目的。

另一种选择是使用[http://www.doxygen.nl/](http://www.doxygen.nl/)并生成项目的文档，之后您可以检查它以查看文件依赖关系:)，这是首选，因为它支持多种语言：C、C++、Objective- C、C#、PHP、Java、Python、IDL（Corba 和 Microsoft 风格）、FORTRAN、VHDL、Tcl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:11:42.637

大多数编译器都有开关，使它们只预处理文件。`#include`他们将 all ' 扩展为实际代码意味着什么。通常它们确实在原始包含行中包含注释（正确的 C 注释）。因此，您可以在生成的预处理代码中搜索所有此类注释以收集所有包含的标头。

# php - 重叠匹配的正则表达式问题

> ID：15976085
> 
> 赞同：0
> 
> 时间：2013-04-12T16:09:17.303
> 
> 标签：php, regex, preg-match-all, overlapping-matches

简而言之，我试图匹配符合此模式的字符串中最右边的最长项目：

```
[0-9][0-9\s]*(\.|,)\s*[0-9]\s*[0-9] 
```

例如，考虑字符串“abc 1.5 28.00”。我想匹配“5 28.00”。

使用“原样”模式，就像这样

```
preg_match_all('/[0-9][0-9\s]*(\.|,)\s*[0-9]\s*[0-9]/', 'abc 1.5 28.00', $result); 
```

相反，我们得到以下匹配项：

```
[0] => 1.5 2
[1] => 8.00 
```

出于显而易见的原因，没有“5 28.00”或“28.00”。

我做了一些研究，人们建议对此类问题使用积极的前瞻性。所以我尝试了以下

```
preg_match_all('/(?=([0-9][0-9\s]*(\.|,)\s*[0-9]\s*[0-9]))/', 'abc 1.5 28.00', $result); 
```

给我们这些比赛：

```
[0] => 1.5 2
[1] => 5 28.00
[2] => 28.00
[3] => 8.00 
```

现在，“5 28.00”在那里很好，但它不能被可靠地识别为正确的匹配（例如，你不能只是从末端遍历寻找最长的匹配，因为可能会有更长的匹配出现在字符串的前面）。理想情况下，我希望最后的那些子匹配（索引 2 和 3）不存在，这样我们就可以抓住最后一个索引。

有没有人知道如何以最简单/最好的方式完成我所需要的？如果我需要澄清任何事情，请告诉我，因为我知道这些东西会让人感到困惑，在此先感谢。

**编辑：一些额外的输入/匹配示例

"abc 1.5 28.00999" => "5 28.00"（即不能匹配字符串结尾，$）

"abc 500000.05.00" => "5.00"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:19:44.987

我能为你得到的最近的比赛是以下

```
((?:\d\s*)+[.,](?:\s*\d){2})(?:(?![.,](?:\s*\d){2}).)*$ 
```

并产生以下输出（在每种情况下查看“1”）...

```
'abc 1.5 28.00999' => array (
  0 => '5 28.00999',
  1 => '5 28.00',
)
'abc 500000.05.00' => array (
  0 => '05.00',
  1 => '05.00',
)
'abc 111.5 8.0c 6' => array (
  0 => '111.5 8.0c 6',
  1 => '111.5 8',
)
'abc 500000.05.0a0' => array (
  0 => '500000.05.0a0',
  1 => '500000.05',
)
'abc 1.5 28.00999 6  0 0.6 6' => array (
  0 => '00999 6  0 0.6 6',
  1 => '00999 6  0 0.6 6',
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:15:43.190

通过添加美元符号确保您匹配输入字符串的末尾，您的问题很容易解决：

```
preg_match_all('/[0-9][0-9\s]*(\.|,)\s*[0-9]\s*[0-9]$/', 
               'abc 1.5 28.00', $result); 
```

回报：

```
array (size=2)
  0 => 
    array (size=1)
      0 => string '5 28.00' (length=7)
  1 => 
    array (size=1)
      0 => string '.' (length=1) 
```

现在我不完全确定您为什么将圆点括在括号中，但据我所知，此输出对于您的问题是正确的，并且实现了“最右边”的要求。

# php - 推进总是选择枚举列的默认值？

> ID：15976086
> 
> 赞同：2
> 
> 时间：2013-04-12T16:09:17.833
> 
> 标签：php, mysql, propel

我对不理解 Propel 对枚举列的处理（使用 Propel 1.6.9 和 MySQL）感到非常恼火。它似乎总是返回默认值。

表的 CREATE-Statement：

```
CREATE TABLE IF NOT EXISTS `offerVariant` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `offerID` int(11) unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  [1] -> `amountType` enum('entity','person') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'entity',
  `unitCount` smallint(5) unsigned DEFAULT NULL,
  [2] -> `priceType` enum('per night','per day','per hour','flat rate') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'per night',
  `tax` tinyint(3) NOT NULL DEFAULT '7',
  `maxPrice` decimal(12,2) NOT NULL DEFAULT '0.00',
  PRIMARY KEY (`id`),
  KEY `offerID` (`offerID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=5 ; 
```

这是我的 schema.xml 的相关部分：

```
<table name="offerVariant">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
        <column name="offerID" type="integer" size="11" required="true" />
        <column name="name" type="varchar" size="255" required="true" />
        <column name="description" type="longvarchar" required="true" />
        [1] -> <column name="amountType" type="enum" valueSet="entity, person" sqlType="ENUM('entity','person')" required="true" />
        <column name="unitCount" type="smallint" size="5" required="false" />
        [2] -> <column name="priceType" type="enum" valueSet="per night, per day, per hour, flat rate" sqlType="ENUM('per night','per day','per hour','flat rate')" required="true" />
        <column name="tax" type="tinyint" size="3" required="true" />
        <column name="maxPrice" type="decimal" size="14" required="true" />
        <foreign-key foreignTable="offer" refPhpName="offerVariant">
            <reference local="offerID" foreign="id"/>
        </foreign-key>
    </table> 
```

我有 2 个枚举列，*amountType*和*priceType*。我从此表中选择 2 行

1.  一个有*amountType* == **entity** | *priceType* ==**每晚**
2.  一个有*amountType* == **person** | *priceType* ==**每天**

*amountType*的默认值为**entity**，*priceType* **per night**。

我以这种方式获取行：

```
public function selectVariantsByOffer($offerid){
    $variants = OffervariantQuery::create()
    ->filterByOfferId($offerid)
    ->find();

    return $variants;
} 
```

回报是：

```
[0] => Offervariant Object
  (
    [startCopy:protected] => 
    [id:protected] => 1
    [amounttype:protected] => 0
    [pricetype:protected] => 0
    [...]
  )

[1] => Offervariant Object
  (
    [startCopy:protected] => 
    [id:protected] => 2
    [amounttype:protected] => 0
    [pricetype:protected] => 0
    [...]
  ) 
```

使用吸气剂后：

> ```
> [0] => Array
>     (
>         [id] => 1
>         [...]
>         [amountType] => entity
>         [priceType] => per night
>     )
> 
> [1] => Array
>     (
>         [id] => 2
>         [...]
>         [amountType] => entity
>         [priceType] => per night
>     ) 
> ```

完全错了。

我了解到 Propel 以不同于 MySQL 的方式解释 type="enum" 的事实，并且在 schema.xml 中设置 sqlType 是必要的。我按照上面提到的那样做了，重建了，但没有改变。

1.  不能获取规定的枚举值吗？
2.  还是我的 schema.xml 不正确？
3.  还是我取错了方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:26:55.297

> **枚举列**
> 
> **尽管以整数形式**存储在数据库中，但 ENUM 列允许用户操作一组预定义的值，而无需担心它们的存储。[http://propelorm.org](http://propelorm.org/cookbook/working-with-advanced-column-types.html#enum-columns)

如果你在 propel 中将列设置为`ENUM`，请在 sql 中声明为`INTEGER`。

或者，最好，您可以尝试`type="VARCHAR" sqlType="ENUM('...')"`.

# javascript - 处理不返回视图但在完成时弹出窗口的控制器事件的 ASP.Net MVC 最佳实践

> ID：15976090
> 
> 赞同：0
> 
> 时间：2013-04-12T16:09:31.693
> 
> 标签：javascript, ajax, asp.net-mvc

我是 asp.net mvc 的新手。

我有一个页面，最初有一个链接，该链接将使用 javascript 弹出一个窗口，允许他们登录到他们的 facebook 页面。

这很好，但现在我需要在弹出窗口之前更新我们数据库中的一些数据。我添加了一个在用户单击链接时调用的方法（不返回任何内容）。在控制器方法中，我更新了我的数据库，然后什么也不返回（也就是说，没有返回任何视图。）只要代码返回，原始的 javascript 就会触发并打开 facebook 窗口。

这种方法适用于 IE，但 javascript 不会在 chrome 或 firefox 中触发。我究竟做错了什么？

这是原始代码：

```
 <a onclick="ShareFacebook('@Model.ShareFacebookTitle', '@Model.ShareFacebookBody');" class="facebook"  target="_blank">
        <img src="/Content/images/socialMediaIcons/facebookIcon.png" alt="Add to Facebook" onmouseover="this.src='/Content/images/socialMediaIcons/colorFacebookIcon.png'"
           onmouseout="this.src='/Content/images/socialMediaIcons/greyFacebookIcon.png'" /></a> 
```

这适用于所有 3 个浏览器。

然后我将代码更改为如下所示：

```
 @Ajax.ImageActionLink("/Content/images/socialMediaIcons/facebookIcon.png", "facebook", "/Content/images/socialMediaIcons/colorFacebookIcon.png", "/Content/images/socialMediaIcons/greyFacebookIcon.png",
        "ShareViaFacebook", "ContactUs",
        new { ... paremeters not relevant here },
        new AjaxOptions
        {
            HttpMethod = "POST",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "content-dialog",
            OnComplete = "ShareFacebook('@Model.ShareFacebookTitle', '@Model.ShareFacebookBody');"
        }, null) 
```

并添加了一个控制器方法：

```
 public void ShareViaFacebook(... parameters not relevant here)
    {
        //do database update
    } 
```

基本上，我将 ShareFacebook javascript 方法从原始代码中的 onclick 事件移动到修改后的代码中的 OnComplete 事件。如前所述，这在 IE 中运行良好，但在 Chrome 和 Firefox 中，OnComplete 事件永远不会触发。

Chrome 和 Firefox 不会触发此事件是否有原因，我可以做些什么来让它触发吗？我尝试使用 OnSuccess 事件，但这也不会触发。我还尝试更改 ShareViaFacebook 签名以返回 ActionResult，然后在代码中返回 new EmptyResult()。那也没有解决它。返回空视图 (View()) 或部分视图 (PartialView()) 也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:58:22.030

好的，

**编辑**

我重读了您的问题，虽然我认为下面的解决方案是一个很好的解决方案，但您可能没有得到 onSuccess 或 onComplete 触发的原因是因为我不确定它们会在没有实际响应的情况下触发。

您应该设置 .NET 操作以在完成后返回某些内容。请参阅下面的示例，了解如何使用 JsonResult 执行此操作。

**结束编辑**

首先，我看到您尝试使用 MVC razor 标记做什么，尽管我非常喜欢 MVC 助手，但我建议您不要使用它们，而是使用 jQuery ajax 调用。MVC Helpers 工作正常，但我觉得比它的 jQuery 版本更难使用。

这是我将如何做这样的事情（我把它简化为更简单的东西，希望它不会太混乱

1）创建img标签

```
<img id='img-id' src='ImageUrl' class='foo' /> 
```

2) 使用 jQuery 创建绑定

```
<script type='text/javascript'>
    $('#img-id').click(function(){
        launchFacebookToDotNet();
    });
</script> 
```

3) 创建 lanchFacebookToDotNet 函数

```
<script type='text/javascript'>
// use jQuery Ajax call and promise pattern to finish calls
var launchFacebookToDotNot = function(){

// make the request
    var request = $.ajax({
        url : '@Url.Action("ActionName","ControllerName"),
        type : 'POST', // or 'GET', get is by default
        data : {
            paramName1 : 'paramValue1',
            paramName2 : 'paramValue2'
        } //etc
    });

    //when done and successful
    request.success(function(){
        ShareFacebook('@Model.ShareFacebookTitle', '@Model.ShareFacebookBody');
    });

    //when error
    request.error(function(){
        alert('there was a server error');
    });
};
</script> 
```

您还应该从 .net 控制器返回一个 JsonResult 以防出现已处理的错误，或者如果您想自定义您的响应

会是这样的

```
 public JsonResult ActionName(){

     // code here to make something awesome happen
     return new JsonResult(new {success = true, message = "I am Json, hear me roar.");
 } 
```

ajax调用中的响应可以这样处理

```
 // using ajax success example from above

 request.success(function(response){ // the response will be passed in automatically as JSON
     // always do error and value checking but I am skipping it due to time

     if (response.success === true){
          ShareFacebook('@Model.ShareFacebookTitle', '@Model.ShareFacebookBody');
     } else {
          alert(response.message);
     }

    }); 
```

希望这可以帮助！

# c# - 对 c# 类与图像的混淆

> ID：15976091
> 
> 赞同：1
> 
> 时间：2013-04-12T16:09:32.290
> 
> 标签：c#, image, class

我正在创建一个项目，该项目将使用 a 读取数据文件`streamreader`并以 Windows 形式显示数据。

然而，该数据文件的属性之一是图像。由于我以前从未真正使用过图像，在 c# 中，我有点困惑。

做一些先前的研究，我创建了一个名为`team`并设法设置声明的类，`Image` `using System.Drawing;`但我不确定我应该如何为具有图像或获取/设置方法的类设置构造函数。

我设法在网上找到的只是该`Image`课程的一般用途和提示，没有将其放入您自己创建的课程中。这是我到目前为止所拥有的。

```
using System;
using System.Collections.Generic;
using System.Collections;
using System.Linq;
using System.Text;
using System.Drawing;

namespace teams_2
{
class Team
{
    string teamName;
    string teamLeague;
    string teamManager;
    string teamNickname;
    string teamStadium;
    int leaguePosistion;
    int leaguePoints;
    int gamesPlayed;
    int goalDifference;
    int playerNumber;
    Image teamLogo; //the problem

    //constructor(image?)
    //team order = teamName teamLeague teamManager teamNickname teamStadium leaguePosistions leaguePoints gamesPlayed goalDifference playerNumber teamLogo

    public Team( string inTeamName, string inTeamLeague, string inTeamManager, string inTeamNickname,
                 string inTeamStadium, int inLeaguePosistion, int inLeaguePoints, int inGamesPlayed,
                 int inGoalDifference, int inPlayerNumber)
    {//
        teamName = inTeamName;
        teamLeague = inTeamLeague;
        teamManager = inTeamManager;
        teamNickname = inTeamNickname;
        teamStadium = inTeamStadium;
        leaguePosistion = inLeaguePosistion;
        leaguePoints = inLeaguePoints;
        gamesPlayed = inGamesPlayed;
        goalDifference = inGoalDifference;
        playerNumber = inPlayerNumber;

    }//end constructor
    //begin getters
    public string getTeamName()
    {
        return teamName;
    }
    public string getTeamLeague()
    {
        return teamLeague;
    }
    public string getTeamManager()
    {
        return teamManager;
    }
    public string getTeamNickname()
    {
        return teamNickname;
    }
    public string getTeamStadium()
    {
        return teamStadium;
    }
    public int getLeaguePosistion()
    {
        return leaguePosistion;
    }
    public int getLeaguePoints()
    {
        return leaguePoints;
    }
    public int getGamesPlayed()
    {
        return gamesPlayed;
    }
    public int getGoalDifference()
    {
        return goalDifference;
    }
    public int getPlayerNumber()
    {
        return playerNumber;
    }
    //end getters

    //begin setters
    public void setTeamName(string inTeamName)
    {
        teamName = inTeamName;
    }
    public void setTeamLeague(string inTeamLeague)
    {
        teamLeague = inTeamLeague;
    }
    public void setTeamManager(string inTeamManager)
    {
        teamManager = inTeamManager;
    }
    public void setTeamNickname(string inTeamNickname)
    {
        teamNickname = inTeamNickname;
    }
    public void setTeamStadium(string inTeamStadium)
    {
        teamStadium = inTeamStadium;
    }
    public void setLeaguePosistion(int inLeaguePosistion)
    {
        leaguePosistion = inLeaguePosistion;
    }
    public void setLeaguePoints(int inLeagePoints)
    {
        leaguePoints = inLeagePoints;
    }
    public void setGamesPlayed(int inGamesPlayed)
    {
        gamesPlayed = inGamesPlayed;
    }
    public void setGoalDifference(int inGoalDifference)
    {
        goalDifference = inGoalDifference;
    }
    public void setPLayerNumber(int inPlayerNumber)
    {
        playerNumber = inPlayerNumber;
    }
    //end setters

}
} 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:38:26.747

您可能最好使用位图类而不是图像类，因为它允许您从文件路径引用图像

所以这是我的解决方案

```
Image logo = new Bitmap("Path");

    public Image getlogo()
    {
        return logo;

    } 
```

应该不需要设置器，因为它是在声明时设置的

编辑我已经尝试过这个解决方案，即使使用 png 仍然可以工作，所以试一试

希望这有助于享受

# actionscript-3 - As3 Flash文本字段垂直调整大小？

> ID：15976093
> 
> 赞同：0
> 
> 时间：2013-04-12T16:09:35.443
> 
> 标签：actionscript-3, flash, height, autosize

我正在制作一个聊天应用程序，我想将单独的文本字段添加到 mc 中，以便用户可以定制这些文本字段，即背景、字体和其他内容。为此，我必须获取文本字段的高度，因为我需要它来放置下一个文本字段（高度 = 下一个文本字段的 Y）

我已经尝试过多行和自动换行，但它只显示 1 行...我也尝试过 AUTOSIZE = left 但是...它在最后添加了一个巨大的不必要的空白

这是代码在此处输入代码`for (i=0; i

```
// Apply some text to the textfield
boxMC.txTitle.htmlText ="<div style='width:50px'>Instance:aefvasdfawe efaegfawegfaw     egawerg alejr joaej alejuf owirt a iajsejrt a aopeu rt tauwe taiej r aiejrt a mc"+nextYPos+"</div>";
//attach the newly created instance to the container
myContent.addChild(boxMC);
//set y value for next item
boxMC.txTitle.width = 100;
boxMC.txTitle.autoSize = "100";
boxMC.txTitle.wordWrap = true;
boxMC.txTitle.multiline = true;
nextYPos+=boxMC.txTitle.height;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:19:24.793

修好了……我想

```
 boxMC.txTitle.width = apW-30;
 boxMC.txTitle.wordWrap = true;
 boxMC.txTitle.multiline = true;
 if(boxMC.txTitle.textHeight == 15)
    { var theight = 9; }
 else { theight = 0; }

 boxMC.txTitle.height = boxMC.txTitle.textHeight + 4;
 myContent.addChild(boxMC);
 nextYPos+=boxMC.txTitle.textHeight + theight + 4 + 6; 
```

# python - 从变量和列表创建元组

> ID：15976098
> 
> 赞同：0
> 
> 时间：2013-04-12T16:09:50.480
> 
> 标签：python, python-2.7

我有一个变量`s`，它是一个字符串，以及一个名为的整数列表`l`。`s`添加到前面`l`并将其最终结果转换为元组的最快方法是什么`concatenation`？

这对我有用：

```
l.insert(0, s)
t = tuple(l) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:11:19.107

连接它们：

```
t = (s,) + tuple(l) 
```

在列表前面插入会改变列表本身，并且需要循环整个列表两次（一次用于插入，将列表的其余部分向上移动 1 步，一次用于创建元组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:01:10.970

使用生成器表达式构造结果，该表达式在列表中循环一次并且不需要最终连接：

```
t = tuple(l[i] if i > -1 else s for i in xrange(-1, len(l))) 
```

# ios - __CFTSDFinalize 中的崩溃

> ID：15976099
> 
> 赞同：3
> 
> 时间：2013-04-12T16:09:52.010
> 
> 标签：ios, objective-c, crash, grand-central-dispatch, nsthread

我们有一个严重的崩溃错误，我们绝对无法控制。问题是它恰好在后台异步发生，显然是在调度系统清理工作线程时。以下是两个示例堆栈跟踪：

```
Thread 7 Crashed:
0   libobjc.A.dylib                     0x3b23b5b0 objc_msgSend + 15
1   Foundation                          0x33c03581 -[NSNotificationCenter postNotificationName:object:userInfo:] + 49
2   Foundation                          0x33cb3367 __NSFinalizeThreadData + 255
3   CoreFoundation                      0x3336cf81 __CFTSDFinalize + 65
4   libsystem_c.dylib                   0x3b68a12b _pthread_tsd_cleanup + 174
5   libsystem_c.dylib                   0x3b689e03 _pthread_exit + 119
6   libsystem_c.dylib                   0x3b68cd02 _pthread_workq_return + 26
7   libsystem_c.dylib                   0x3b68ca16 _pthread_wqthread + 366 
```

和：

```
Thread 8 Crashed:
0   Foundation                          0x31bfd2e2 __NSFinalizeThreadData + 122
1   CoreFoundation                      0x312b6f81 __CFTSDFinalize + 65
2   libsystem_c.dylib                   0x395d412b _pthread_tsd_cleanup + 174
3   libsystem_c.dylib                   0x395d3e03 _pthread_exit + 119
4   libsystem_c.dylib                   0x395d6d02 _pthread_workq_return + 26
5   libsystem_c.dylib                   0x395d6a16 _pthread_wqthread + 366 
```

所有这些崩溃报告似乎都有相同的原因：

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x9209ea83 
```

我得到了这一点：似乎有一个`NSThreadWillExitNotification`被张贴。**崩溃日志在没有**`NSNotificationCenter`框架的情况下更频繁地出现（第二个示例）。常规调用只是传递`@"NSThreadWillExitNotification"`对象`NSThread`userInfo `nil`。

我现在能想到的所有问题都是 NSThread 对象以某种方式被过度释放。我刚刚检查过，我们对 NSThread 的**所有使用都是与主线程的简单等价检查。**像这样：

```
if (NSThread.currentThread == NSThread.mainThread) ... 
```

有什么见解吗？只是另一个奇怪的ARC问题？

谢谢大家，
麦克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T16:35:48.810

虽然很神秘，但这个问题似乎在 iOS 7 之后就消失了。它在使用 Xcode 4.6.3 编译后也消失了。因此，其中任何一个（或两者）似乎都已修复了该错误。

# asp.net - asp.net 从生产网络服务器中卸载并删除所有成员表和存储过程

> ID：15976100
> 
> 赞同：0
> 
> 时间：2013-04-12T16:09:52.213
> 
> 标签：asp.net, webserver

我的数据库出现了严重问题。今天，我通过提供身份验证详细信息，使用 aspnet_regsql.exe 在我的网络服务器中安装了成员资格表。后来我发现这没什么用。所以我决定将它们全部删除。到处搜索我发现正在运行命令行 aspnet_regsql 并提供合适的属性来删除。

但是我如何在网络服务器上运行命令行工具。我只需要卸载由 aspnet_regsql 创建的所有表，因为我的数据库也有其他表。而且我不想丢失已经注册的记录。

我需要删除表存储过程视图和该工具创建的所有内容。

**建议？**

请帮助我使用 Visual Studio 或任何内置工具卸载它。因为我的网络服务器上没有 SQL Server 20o8 R2 和 R2 管理工作室

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:14:27.207

使用 SQL Server Management Studio 中的对象资源管理器视图按创建日期对表进行排序并以这种方式删除它们可能更容易。您可能还需要删除一些存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:18:18.780

[正如文档](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.80%29.aspx)所说，用-R调用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T21:47:56.287

您也可以通过双击 aspnet_regsql.exe 来使用图形界面，它位于

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319 
```

或者

```
C:\Windows\Microsoft.NET\Framework\v2.0.50727 
```

取决于您用于应用程序的框架版本。单击下一步，选择*“从现有数据库中删除应用程序服务信息”*。然后提供您的数据库服务器 IP 和数据库凭据（可以从您的 connectionString 中找到）。

但是在运行这个程序之前，你必须确保你删除了 aspnet_Membership 和 aspnet_Applications 表的所有记录。要删除用户，您可以使用成员程序 [dbo].[aspnet_Users_DeleteUser]。此过程的示例调用是：

```
DECLARE @out int
EXEC [dbo].[aspnet_Users_DeleteUser] '/', 'username', 15, @out OUTPUT 
```

您可以使用 db 游标来遍历所有用户。

# python - 在 Python 中安全地处理密码？

> ID：15976101
> 
> 赞同：2
> 
> 时间：2013-04-12T16:09:57.457
> 
> 标签：python, security

我想尝试一个系统，在该系统中，我使用密钥并用网站名称对其进行加盐，然后对其进行散列并将散列用作我在加盐的站点上的密码。但是，我想安全地做到这一点。我的担忧是：

1.  正在打印到终端的哈希（给定站点的我的密码）

2.  哈希以及用于生成哈希的通用密钥都在内存中。

将密码打印到终端，然后关闭终端是否安全？Python 完成后，密钥和密码会从内存和磁盘中消失吗？我将使用 getpass，但这是否提供了任何实际的安全性，除了过肩的外观之外的任何东西？有没有办法安全地覆盖 RAM 中的原始密钥和哈希/密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:36:57.887

最简洁的答案是不。Python 会将密码存储在内存中的多个位置，也不会将其从内存中清除，它只是释放存储密码的内存区域。

例如，这意味着`SecureString`在 .NET 中找不到类似的东西。

有关这一切的更多信息：[Python - 释放/替换字符串变量，它是如何处理的？](https://stackoverflow.com/questions/15904973/python-releasing-replacing-a-string-variable-how-does-it-get-handled)

您最好的选择是编写自己的 C 库来处理内存中的输入和存储，并在其中构建一个`shred()`函数，不仅释放内存区域，而且在该内存分配上写入数据。

您是否在 ld_preload 中替换了 malloc 以及 python 不使用的内容。

```
import getpass
print getpass.getpass('Give me your password: ') 
```

此外，散列通常是不好的。散列你的东西很好，如果你存储东西，纯文本是错误的，但你不应该将它用作身份验证方法，除非你知道为什么以及你在做什么。此外，通常你必须存储你的盐，这在大多数情况下是一个坏主意，因为这只会使哈希值全部归零。嗯，我累了，但谷歌周围，你会明白的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:50:46.850

我不会担心这些。如果您的机器上有恶意代理，那么您需要担心的问题比终端缓冲区和私有内存更大。

我确实知道已经有类似的解决方案比您描述的要巧妙得多；将主密码与域名相结合的浏览器插件，以创建一个独特的插件，具有很好的自动完成功能。

但如果这主要是一个编程练习，那就去做吧！“普通”用户将无法访问您的终端缓冲区。他们也不*应该*能够检查您的进程的内存。

# windows - 无法让 IViewObject::Draw 工作

> ID：15976102
> 
> 赞同：1
> 
> 时间：2013-04-12T16:09:59.573
> 
> 标签：windows, winapi, com

我需要实现一个屏幕捕获服务 (C++)，它启动即导航到一个站点，然后抓取该站点。

我加载了站点并收到了 DISPID_FRAMENAVIGATECOMPLETE 事件，我正处于调用 IViewObject::Draw 的阶段，如下所示：

```
SHANDLE_PTR hwnd = 0;
browser->get_HWND(&hwnd);

RECT rc ={0,0,100, 100};
BOOL tst = GetClientRect((HWND)hwnd, &rc);

HDC hDC = GetDC((HWND)hwnd);
HDC hDCMem = CreateCompatibleDC(hDC);
HBITMAP hBitmap = CreateCompatibleBitmap(hDC, rc.right - rc.left, 
                                         rc.bottom - rc.top);
SelectObject(hDCMem, hBitmap);

//hr = OleDraw(ivo, DVASPECT_DOCPRINT, hdc, &rc);
hr = ivo->Draw(DVASPECT_CONTENT, -1, NULL, NULL, hDC, 
               hDCMem, (LPCRECTL)&rc, NULL, NULL, 0);

//copy to clipboard
OpenClipboard(NULL);
EmptyClipboard();
SetClipboardData(CF_BITMAP, hBitmap);
CloseClipboard(); 
```

一切都返回正确的返回值，S_OK 等；

但是我在剪贴板上得到的只是一个黑色矩形 - 当复制到绘画中时，这可能是通过 CreatCompatibleBitmap 创建的普通位图数据。

如果我使用 PrintWindow 而不是 IViewObject::Draw 那么它可以工作，但是我不能使用它，因为它不适用于不可见的窗口（尽管目前在我的测试中一切都是可见的）。

有人知道代码有什么问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:22:33.223

愚蠢的是，我忘记了一些 COM 基础知识。调用跨越进程边界。一旦我托管了控件（刚刚破解了一个使用 CHTMLView 的 MFC 应用程序），它就可以正常工作。

但是，我认为我应该有某种错误告诉这一点。

# c# - 绑定到 ValidationRule

> ID：15976106
> 
> 赞同：1
> 
> 时间：2013-04-12T16:10:04.210
> 
> 标签：c#, wpf

我有一个 WPF 用户控件，其中有一个文本框。这绑定到在运行时生成的视图模型。

我的视图模型如下所示：

```
public class MyViewModel
{
    private readonly IValidationRule _validationRule;

    public MyViewModel(IValidationRule validationRule)
    {
        _validationRule = validationRule;
    }

    public IValidationRule ValidationRule { get; set; }
}

public interface IValidationRule
{
}

internal class MyValidationRule:ValidationRule,IValidationRule
{
    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        throw new NotImplementedException();
    }
} 
```

我需要将属性绑定`ValidationRule`到文本框。通过指定类型，我可以像下面这样轻松地做到这一点：

```
<TextBox Name="UploadsLoginsTextBox" MinWidth="30">
    <TextBox.Text>
        <Binding Path="MaxUp" Mode="TwoWay" NotifyOnValidationError="True">
            <Binding.ValidationRules>
                <Validators:MyValidationRule/>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

..但是由于我的视图模型以及因此我的验证器是动态创建的，所以我不能这样做。有没有办法可以在 XAML 中做到这一点。类似于将验证规则绑定到视图模型中的属性？请注意我使用的是 .NET 3.5。

谢谢，-迈克

# git - 在 git 中修改提交的补丁

> ID：15976109
> 
> 赞同：2
> 
> 时间：2013-04-12T16:10:09.403
> 
> 标签：git, patch

我在我的 repo 中应用了一个补丁，其中意外包含尾随空格。当我执行“git rebase master”时，git 抱怨尾随空格。如何修复补丁以消除尾随空格？

我想将分支的顶部重置为需要修改的补丁，修复尾随空格，然后重新应用补丁：

```
$ git reset --hard <commit-id>
< edit files>
$ git commit --amend 
```

有一个更好的方法吗？

如何让分支恢复到之前的状态，并应用后续补丁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:20:13.320

只要您尚未发布（推送）您的提交，修改这些提交就没有问题。

执行此操作的主要命令是`git rebase -i`，它在正确配置上游时效果最佳。

它将向您显示所有尚未推送到上游的本地提交。然后，您可以决定对它们重新排序、将多个提交压缩为一个、更改提交消息或完全更改提交的内容。

看来你是在最后一个之后。;)

在这种情况下，git 会将您重置为该提交，允许您对其进行修改，并且后续`git rebase --continue`将重播剩余的提交。

另一种方法可能是添加一个新的提交来修复问题，然后使用`git rebase -i`这个提交与错误的提交结合起来。

# database-design - 数据库设计 - 根据用户权限读取/删除内容

> ID：15976110
> 
> 赞同：0
> 
> 时间：2013-04-12T16:10:15.523
> 
> 标签：database-design, relational-database, sql-server-2012, database-schema

我在设计数据库/找到解决此问题的方法时遇到问题：

我有一个名为 Documents 的页面，它显示数据库中“内容”表中的内容。

我想知道如何为内容添加用户权限，但在组合/设计数据库时遇到了麻烦。

我将如何解决它？

数据库图：

![在此处输入图像描述](https://i.stack.imgur.com/CxIDF.png)

文档页面：

![在此处输入图像描述](https://i.stack.imgur.com/wOQdk.png)

例如，如果“用户类型”是管理员，我希望用户具有读取和删除权限，但如果用户是“普通”（例如），我希望用户只能查看内容而不能删除.

关于我需要创建哪些表或需要使用哪些 SQL 语句的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:28:42.037

我会创建一个`permissions`包含两列的表：`permission_id`和`name`. 正如您当前描述的问题一样，该表将有两行：1-读取，2-删除。

然后，您将需要另外三个表：`user_type_permissions`、`role_permissions`和`user_permissions`。这些表中的每一个都将具有该`permissions`表的外键`user_types`，`roles`并且`users`分别具有 、 和 。

# javascript - 为更大的数字获取更低的 z-index

> ID：15976111
> 
> 赞同：0
> 
> 时间：2013-04-12T16:10:20.090
> 
> 标签：javascript, css, math, z-index

这更像是一个数学问题，而不是一个编码问题......我正在创建一个散点图，其中包含不同大小的气泡。我希望较大的尺寸比较小的尺寸具有较低的 z-index，以避免较大的尺寸站在较小的尺寸上并且无法进行交互。所以我需要一个公式通过代码恢复该顺序。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:12:40.053

只需使用大小并将其设为负数 ( `var zIndex = size * -1;`)。

**编辑非负选项。**

```
var zIndex = (1 / size) * 1000; 
```

你可以`1000`根据自己的喜好调整。对于较大的尺寸（保持在零以上），倒数将给出一个较小但为正的浮点值。乘法为您提供了一个可以使用的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:14:06.033

如果您知道气泡的数量，那么您可以首先将最大的一个设为零，将最小的一个设为气泡总数。或者，您可以使用负 Z 指数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:38:11.707

物有所值 ...

从性能的角度来看，最好的方法是在创建时计算并应用每个气泡的 zIndex。

如果这不切实际或不可能，那么您可以按如下方式重新索引所有气泡：

```
function reindex_bubbles() {
    var bubbleArr = $(".bubble").get().sort(function(a, b) {
        return b.width() - a.width();//or possibly the other way round?
    });
    $.each(bubbleArr, function(i, bubble) {
        bubble.attr('zIndex', i);
    });
} 
```

我们在这里假设`.width()`给出了气泡大小的可靠度量。如果不是，则替换为其他表达式。

# java - 如何找到对象的类型然后相应地工作？

> ID：15976117
> 
> 赞同：1
> 
> 时间：2013-04-12T16:10:38.823
> 
> 标签：java, object

我有一个方法可以传递任何类型的参数。我的目标是找到传递的参数是否是数字，然后找到数字的绝对值。传递的对象可以是double、Integer、string、long等。

## 演示.java

```
public class Demo{
public Object abs(Object O){
       if(Number.class.isAssignableFrom(O.getClass())){

    // Check the type of the number and return the absolute value of the number

        }
       else
       {
             return -1
       }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:13:40.743

只需做一个**insatnceof**测试：

```
if(o insatnceof Integer) {
//abs(int)
}
else if(o instanceof Double){
//abs(double)
}
..... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:14:56.937

如果您想找到对象的确切类型，可以使用`if-then-else`s 链，如下所示：

```
Class<? extends Object> cls = O.getClass();
if (cls == Integer.class) {
} else if (cls == String.class) {
} else if (cls == Long.class) {
} else if (cls == Double.class) {
} ... 
```

`Object`然而，这听起来像是一个糟糕的设计选择：考虑使用重载方法来代替首先避免这个问题的“包罗万象”方法；

```
public Double abs(Double O){
   ...
}
public String abs(String O){
   ...
}
public Long abs(Long O){
   ...
}
public Integer abs(Integer O){
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:13:02.347

尝试改用`instanceof`运算符。

```
if ( O instanceof Number ) {
  return Math.abs(((Number)O).doubleValue());
} 
```

您的要求越来越高 - 可以转换为`double`吗？

请参阅[instanceof 和 Class.isAssignableFrom(...) 有什么区别？](https://stackoverflow.com/questions/496928/what-is-the-difference-between-instanceof-and-class-isassignablefrom)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:14:19.717

您在这里寻找的关键字可能是`instanceof`

```
public Object abs(Object O){
   if(Number.class.isAssignableFrom(O.getClass()))
   {

       if(O instanceof Integer) {
            ....
       }
       else if(O instanceof Double) {
            ....
       }
       .....

   }
   else
   {
         return -1
   } 
```

}

# c# - 在 MVC4 部分视图中使用 PagedList 时出现不良行为

> ID：15976119
> 
> 赞同：0
> 
> 时间：2013-04-12T16:10:44.607
> 
> 标签：c#, css, razor, asp.net-mvc-4, pagedlist

我有一个部分视图，显示列表中的许多搜索结果。出于美学原因，我将结果显示为每行两个列表项：

> 清单项目 1 | 清单项目 2
> 
> 清单项目 3 | 清单项目 4
> 
> ETC....

我正在使用 PagedList 实现分页，因为它是部分视图，所以我使用`Ajax.ActionLink`s 来导航每个“分页列表”。例如：

```
@Ajax.ActionLink("<<", "GetAllProperties", new { page = 1 }, new AjaxOptions { UpdateTargetId = "quick-property-search-results" }) 
```

当页面加载时，列表中的所有项目都会正确显示 - 每行两个列表项目。但是，当我单击时`Next >`，会显示下一个项目，但格式会消失，如下所示：

> 清单项目 1
> 
> 清单项目 2
> 
> 清单项目 3
> 
> ETC...

我尝试将实际上为我提供每行两个列表项布局的 css 类作为 html 属性传递给 ActionLinks，但它没有帮助。

有谁知道是什么导致了这种行为 - 以及如何补救？

**编辑：**添加了 css 类和 razor 代码。

```
.result-container { 
    border: 3px solid #999;
    padding: 5px;
    margin-bottom: 5px;
    margin-right: 5px;
    width: 563px; 
    float: left; 
    height:130px;
}

@foreach (var result in Model)
{
    <div class="result-container">
    // output model data...
    </div>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:33:41.403

@Ajax.ActionLink 生成的标记是什么样的？我猜这是在您的 ajax 调用之后绑定到您的动态内容的问题。在 jquery 中，您将使用 .on 事件与 .click 事件。

# graphviz - 将节点保留在特定集群中

> ID：15976123
> 
> 赞同：9
> 
> 时间：2013-04-12T16:10:51.267
> 
> 标签：graphviz, dot

过去一小时我一直在查看 GraphViz 文档和 stackoverflow，但找不到解决此问题的方法。我的点文件中有几个集群，我需要某些节点留在特定的集群中。一些节点与其他集群中的节点有关系。似乎每次我保存文件时，都有一些节点在不同的集群之间跳转。有没有办法将节点定义为始终是特定集群的一部分？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T23:03:32.773

我想出了如何避免这个问题。

我在子图中定义了节点和边，所以我认为当边包含不应该包含在子图中的节点时会感到困惑。

相反，我只定义子图中的节点（所有节点），然后在文件末尾一起定义边。像冠军一样工作:)

# sql - 在 MySQL 和 PHP 中使用多表和 LEFT JOIN 查询非常慢

> ID：15976125
> 
> 赞同：1
> 
> 时间：2013-04-12T16:11:09.857
> 
> 标签：sql, performance, phpmyadmin, localhost, left-join

我的问题是我添加的行越多，检索 SQL 查询结果所需的时间就越多。我不是在谈论大量的行（在 10,000 - 80,000 之间）。一开始，我需要几毫秒才能从查询中检索结果，昨天我最多需要 3 分钟才能显示 50 行，但从今天开始，它最多：

**致命错误：第 247 行 C:\wamp\apps\phpmyadmin3.5.1\libraries\dbi\mysqli.dbi.lib.php 中的最大执行时间超过 300 秒**

找不到问题所在（我是 SQL 新手）。我已经为此苦苦挣扎了两个月。我已经尝试了所有可能的解决方案，我可以在互联网上找到（包括这里）来加快速度，我什至更改了主机、phpMyAdmin、MySQL、httpd.config、iPV6 等的配置文件。但因为没有这行得通，我回滚了所有更改，创建了一个新数据库，在其中添加了一个**唯一的 uuid 以左连接数据库中的表**。

但它仍然像龟树懒一样缓慢！

我不确定这是 PHP，MySQL，apache 本地服务器（WAMPP）的问题，还是 SQL 级别的数据结构问题（*我没有主键，也没有唯一键，也没有索引设置，因为我不知道如何使用 then*）。

让我给你一些关于我正在做什么以及我正在尝试做什么的背景信息。

每天我都会进行几次**API 调用**，以获取特定搜索引擎的产品和搜索的不同广告的排名位置。我使用 Python 解析 API 对象，同时也将数据注入 MySQL 数据库。

每个页面结果都有一个包含 50 个产品广告的列表，这些广告按与搜索引擎的相关性排序。这个排名位置每天都在变化。每个排名位置列表是根据搜索引擎中使用的关键字（'key'）生成的。尽管每个产品每天都可以更改其属性，但它始终具有相同的唯一 ID ('ad_id')。例如，产品 ad_id = a001 可以显示它今天的访问量比前一天多 200 次，或者它的卖家可能更改了他/她的“别名”。

我在排名位置列表（排名数据库）中生成**uuid 字符串**，从那里我将该 uuid 附加到其他数据库。

所以这些是**我的表格**（见下面的链接）。为了清楚起见，我过度简化了。表格只显示前 3 行，请注意第三行的 RANKINGS、ITEMS 和 USERS 显示**不同的日期**（这是因为我每天都更新数据库）。

**[http://oi49.tinypic.com/11ceidz.jpg](http://oi49.tinypic.com/11ceidz.jpg)**

这实际上是**我的数据结构**的样子（基于过于简单的示例）：

**排名**

*   c_id int(11)，不为空，AUTO_INCREMENT
*   ad_id varchar(20)，不为空
*   rank int(3) 不为空
*   卖家 int(20)，不为空
*   键 varchar(30)，不为空
*   日期时间戳，CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
*   uuid varchar(36)

**用户**

*   c_id int(11)，不为空，AUTO_INCREMENT
*   卖家 int(20)，不为空
*   别名 varchar(30)，不为空
*   日期时间戳，CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
*   uuid varchar(36)

**项目**

*   c_id int(11)，不为空，AUTO_INCREMENT
*   ad_id varchar(20)，不为空
*   标题 varchar(30)，不为空
*   字幕 varchar(30), null
*   访问 int(11)，不为空
*   日期时间戳，CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
*   uuid varchar(36)

这是**我的查询**：

选择rankings.key、rankings.rank、items.visits、users.seller、users.alias、rankings.ad_id、items.title、rankings.date

FROM排名

LEFT JOIN 项目上的rankings.uuid = items.uuid

LEFT JOIN users ON rankings.seller = users.seller

WHERE 排名.key = '苹果'

GROUP BY 排名.日期，排名.排名

**我做错了什么？**请任何帮助/提示将不胜感激！并感谢您提前提供帮助！

**编辑**：如果我删除**GROUP BY**行并添加**LIMIT 0，50 个**查询的结果将只需要几毫秒......但是有大量重复的行！如果限制为 0，则 500 = 仅 4 秒。

**第二次编辑**：**Scorpi0 成功**了！！！请参阅下面的他/她的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:41:14.470

哇！

> 我没有主键，也没有唯一键，也没有设置索引，因为我不知道如何使用

严重地？那就学吧！！
没有索引，查询在 O(n^3) 中运行，有 3 个表。使用索引，它将在 O(log n) 中运行。

赶紧跑

```
CREATE INDEX idxrankginsuuid ON rankings(uuid);
CREATE INDEX idxrankingsseller ON rankings(seller);
CREATE INDEX idxrankingskey ON rankings(key);

CREATE INDEX idxitemsuuid ON items(uuid);

CREATE INDEX idxuserseller ON users(seller); 
```

您会注意到性能在提高。

**如果不知道主键和索引是如何工作的，就无法执行 SQL。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:15:25.283

服务器处理查询的时间过长，因为它不是一个简单的查询。您可以优化您的`MySQL`查询和数据库的结构以尝试加快进程，或者，如果您不能，则通过`set_time_limit(0);`在脚本开头添加 PHP 脚本来将最大执行时间更改为无限制。

# java - Java - 表格 - 更改表格格式

> ID：15976128
> 
> 赞同：1
> 
> 时间：2013-04-12T16:11:11.180
> 
> 标签：java, swing, jtable, tablecolumn

如何在java中更改表格格式？

现在，我有左表，但我希望我的表看起来像右表。

![图片](https://i.stack.imgur.com/C5Efv.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;

public class Farby extends JTable {
    public Farby(String[][] data, String[] fields) {
        super(data, fields);
    }

    @Override
    public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
        Component c = super.prepareRenderer(renderer, row, column);
        c.setBackground(row % 2 == 0 ? getBackground() : Color.getHSBColor(250, 250, 128));
        return c;
    }

    public static void main(String[] args) {
        String[] fields = {"So long String", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10"};
        String[][] a2 = new String[12][12];
        for (int i = 0; i < a2.length; i++) {
            for (int j = 0; j < a2[0].length; j++) {
                a2[i][j] = i + j + "";
            }
        }
        JFrame frame = new JFrame("Help");
        Farby table = new Farby(a2, fields);
        JScrollPane pane = new JScrollPane(table);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(pane, BorderLayout.CENTER);
    //    frame.add(pane);

        frame.setSize(800, 400);
    //    frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:15:25.197

你需要类似的东西

```
 table.getColumnModel().getColumn(1).setPreferredWidth(15); 
```

这取决于您是否希望用户能够更改宽度。您可以在循环中调用上述内容来设置除第一个之外的所有内容。

# c++ - QDockWidget showFullscreen 在 Ubuntu（gnome）上不起作用

> ID：15976134
> 
> 赞同：7
> 
> 时间：2013-04-12T16:11:19.613
> 
> 标签：c++, ubuntu, qt4, fullscreen, qdockwidget

我正在尝试将浮动（未停靠）QDockWidget 置于全屏模式。在 Windows 上，一切似乎都是直截了当的。例如，我将 dockwidget (dw) 的 topLevelChanged() 信号连接到自定义插槽 floatingChanged()

```
connect(dw, SIGNAL(topLevelChanged(bool)), this, SLOT(floatingChanged(bool))); 
```

在插槽内我检查：如果 dw 是浮动的并调用 dw->showFullscreen()。

```
void MainWindow::floatingChanged(bool floating)
{
    if( floating )
    {
        QDockWidget* dw = static_cast<QDockWidget*>(QObject::sender());
        dw->showFullScreen();
    }
} 
```

在 Windows 中，未停靠（浮动）的 QDockWidget 在取消停靠后直接切换到全屏模式。但是在 linux 下（ubuntu 12.04，gnome-shell 3.4.1）这不起作用（qt 4.8.0）。停靠小部件仅保持正常模式。

我不知道如何将（浮动）QDockWidget 切换到全屏模式。对此的任何解决方案都非常受欢迎。事实上，不同的操作系统在此目的上表现不同。

我已经在网上搜索但没有成功，所以这是我在这里的第一篇文章。请原谅我的拼写错误，我不是以英语为母语的人，thanx ;)

ps 我也会尝试 osx-lions 的行为。顺便说一句：要尝试一下，只需在 Qt 示例[http://qt-project.org/doc/qt-5.0/qtwidgets/mainwindows-mainwindow.html](http://qt-project.org/doc/qt-5.0/qtwidgets/mainwindows-mainwindow.html)的 MainWindow 中实现上面显示的 floatingChanged() 插槽并连接它与任何现有的dockwidgets或在MainWindow::createDockWidget()方法内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T05:34:19.563

调用此函数`showFullScreen()`仅影响窗口。

全屏模式在 Windows 下可以正常工作，但在 X 下有一些问题。这些问题是由于指定 X11 客户端和窗口管理器之间通信的 ICCCM 协议的限制。ICCCM根本不理解非装饰全屏窗口的概念。因此，我们能做的最好的事情就是请求一个无边框的窗口并放置并调整它的大小以填满整个屏幕。根据窗口管理器，这可能会或可能不会起作用。使用 MOTIF 提示请求无边框窗口，几乎所有现代窗口管理器至少部分支持。另一种方法是完全绕过窗口管理器并使用 Qt::X11BypassWindowManagerHint 标志创建一个窗口。不过，这还有其他严重的问题，就像完全损坏的键盘焦点和桌面更改或用户打开其他窗口时非常奇怪的效果一样。遵循现代后 ICCCM 规范的 X11 窗口管理器正确支持全屏模式。

# android - 在 TimePickerDialog 的 EditText 中显示 AM 和 PM

> ID：15976136
> 
> 赞同：1
> 
> 时间：2013-04-12T16:11:24.523
> 
> 标签：android

晕，如何使 timePickerDialog 显示在带有 AM 和 PM 的 EditText 上？设置 timePickerDialog 后，有 24 小时格式。例如，晚上 7.45，EditText 将得到 19.45，仅此而已。我希望它是 EditText 中的 7.45 pm。有人可以帮忙吗？

这是我的编码...

```
private TimePickerDialog.OnTimeSetListener timePickerListener = new TimePickerDialog.OnTimeSetListener() {
    public void onTimeSet(TimePicker view, int selectedHour,
            int selectedMinute) {
        hour = selectedHour;
        minute = selectedMinute;
        String zone = "";

        if (Calendar.AM_PM == Calendar.AM)              
            zone = "AM";

        else if (Calendar.AM_PM == Calendar.PM)         
            zone = "PM";

        // set current time into textview
        timeField.setText(new StringBuilder().append(pad(hour)).append(":").append(pad(minute)).append(" ").append(zone));

    }

};

private static String pad(int c) {
    if (c >= 10)
       return String.valueOf(c);
    else
       return "0" + String.valueOf(c);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:20:11.320

> 例如，晚上 7.45，EditText 将得到 19.45，仅此而已。我希望它是 EditText 中的 7.45 pm。

简单的答案是检查是否`selectHour`大于 12：

```
if(selectedHour > 12) {
    selectedHour -= 12;
    zone = "PM";
}
else 
    zone = "AM"; 
```

您还可以使用内置的时间对象，例如 Calendar 和 SimpleDateFormat 来显示您想要的任何格式。

# c - 本地主机服务器套接字程序不工作

> ID：15976137
> 
> 赞同：3
> 
> 时间：2013-04-12T16:11:26.160
> 
> 标签：c, sockets, echo-server

我有用 C 编写的服务器和客户端套接字程序。我想使用`local host ipaddress 127.0.0.1`. 当我执行服务器程序时。它的输出是绑定失败并停止。如何使客户端连接到同一台笔记本电脑上的服务器（即通过本地主机）成为可能。请帮忙。

这是服务器代码（这是一个回显服务器程序）：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <string.h>

main(int argc, char *argv[])
{
    int clilen, sockfd, newsockfd, n, cpid;
    char msg[100];
    struct sockaddr_in serv_addr, cli;
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
    {
        printf("socket failed to establish\n");
        exit(0);
    }
    printf("socket created\n");
    bzero((char *)&serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = inet_addr(argv[1]);
    serv_addr.sin_port = htons(atoi(argv[2]));
    if (bind(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0)
    {
        printf("binding failed\n");
        exit(0);
    }
    printf("binding established\n");
    if (listen(sockfd, 5) < 0)
    {
        printf("not listening\n");
        exit(0);
    }
    printf("listening|n");
    for (;;)
    {
        clilen = sizeof(cli);
        if ((newsockfd = accept(sockfd, (struct sockaddr *)&cli, &clilen)) < 0)
        {
            printf("accept failed\n");
            exit(0);
        }
        printf("accepted\n");
        cpid = fork();
        if (cpid == 0)
        {
            n = read(newsockfd, msg, 80);
            msg[n] = '\0';
            write(newsockfd, msg, strlen(msg));
            close(newsockfd);
            exit(0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:53:23.497

我相信问题已经发生，因为您通过命令行传递了错误的值。

以下代码行可能没有按您预期的那样工作，

```
serv_addr.sin_addr.s_addr=inet_addr(argv[1]); 
```

请改成

```
 servaddr.sin_addr.s_addr = htonl(INADDR_ANY); 
```

还要添加这个检查来测试端口号，

```
unsigned int port;
if ( argc < 2 ) 
{
   port = Some_Port_No;
}
else 
{
   port=atoi(argv[2]);
} 
```

并改变

```
serv_addr.sin_port=htons(atoi(argv[2])); 
```

至

```
servaddr.sin_port = htons(port); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:47:12.887

因此，通常在编写服务器时，您只需将其绑定到任何地址，而不是特定地址。重要的是服务器侦听的端口号。当您告诉客户端连接到本地主机时，您还将向它传递服务器正在侦听的端口号，以便您可以建立连接。

尝试改变这个：

```
serv_addr.sin_addr.s_addr=inet_addr(argv[1]); 
```

对此：

```
serv_addr.sin_addr.s_addr=INADDR_ANY; 
```

这是一个可以帮助你很多的链接：http: [//beej.us/guide/bgnet/output/html/singlepage/bgnet.html](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)

# android - 捕获音频并发送返回

> ID：15976139
> 
> 赞同：0
> 
> 时间：2013-04-12T16:11:29.940
> 
> 标签：android

我需要创建一个应用程序来捕获来自麦克风的信号并直接发送到耳机输出。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:55:18.030

您需要同时录制和播放音频。使用[AudioRecord](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CC4QFjAA&url=http://developer.android.com/reference/android/media/AudioRecord.html&ei=r_JoUZ3zBIaGrAfw6YGoDw&usg=AFQjCNFBt26xiWEJRm08NKiIe-hLH_j3Kg&sig2=MNs0w2Yzr1IdzcE_-V8UUQ&bvm=bv.45175338,d.bmk)进行录制，使用[AudioTrack](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://developer.android.com/reference/android/media/AudioTrack.html&ei=t_JoUeOlO4WQrgfo6oDoBA&usg=AFQjCNEZ1q9apedBkvGFgO8H8_lW3TImwg&sig2=iZ9ygcynP105ZRacQWoDYw&bvm=bv.45175338,d.bmk)进行播放。您可以在那里找到大量同时播放和录制的示例。以下是一些示例链接

[链接1](https://stackoverflow.com/questions/5728454/playing-back-sound-coming-from-microphone-in-real-time)，[链接2](https://stackoverflow.com/questions/8959486/audio-record-and-play-loopback-issue)

# json - 使用 ActionController::Metal 处理 ActiveRecord::RecordNotFound

> ID：15976146
> 
> 赞同：3
> 
> 时间：2013-04-12T16:11:43.567
> 
> 标签：json, ruby-on-rails-3, api

我正处于开发（JSON）API 阶段并决定继承我`ApiController`的 from`ActionController::Metal`以利用速度等。

所以我已经包含了一堆模块来使它工作。

最近我决定在找不到记录时以空结果响应。Rails 已经`ActiveRecord::RecordNotFound`从`Model#find`方法中抛出，我一直在尝试使用`rescue_from`它来捕获它并编写如下内容：

```
module Api::V1
  class ApiController < ActionController::Metal
    # bunch of included modules 

    include ActiveSupport::Rescuable

    respond_to :json

    rescue_from ActiveRecord::RecordNotFound do
      binding.pry
      respond_to do |format|
        format.any { head :not_found }
      end
    end
  end
end 
```

在调用我的简单动作之后

```
def show
  @post = Post.find(params[:id])
end 
```

并且执行永远达不到`rescue_from`。它的抛出：

```
ActiveRecord::RecordNotFound (Couldn't find Post with id=1 
```

进入我的日志文件。

我一直在尝试它并处于生产模式。服务器以 404 响应，但响应正文是**JSON**请求的标准**HTML**错误页面。

 **当我将继承从 更改为 时效果`ActionController::Metal`很好`ActionController::Base`。

您可能会注意到缺少`respond_with`呼叫。那是因为我使用[RABL](https://github.com/nesquena/rabl)作为我的模板系统。

所以问题是：是否有机会`rescue_from`使用`Metal`或摆脱响应中的 HTML？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T19:16:18.780

以下对我有用：

```
class ApiController < ActionController::Metal
  include ActionController::Rendering
  include ActionController::MimeResponds
  include ActionController::Rescue

  append_view_path Rails.root.join('app', 'views').to_s
  rescue_from ActiveRecord::RecordNotFound, with: :four_oh_four

  def four_oh_four
    render file: Rails.root.join("public", "404.html"), status: 404
  end
end 
```**

# android - 如何使用 Maven 在 apklib 中包含两个架构的本机 .so 文件？

> ID：15976148
> 
> 赞同：3
> 
> 时间：2013-04-12T16:11:46.823
> 
> 标签：android, maven, android-maven-plugin

我有两个 .so 文件需要用 apklib 打包，结构如下：

```
- libs
-- armeabi
--- libvinit.so
-- armeabi-v7a
--- libvinit.so 
```

我知道我可以使用 install-file 将其上传到我的本地 repo 并在我的 pom 中将它们声明为依赖项，但问题是它们具有相同的名称，并且位于不同的文件夹中，这很重要。我如何确保当 Maven 打包 apklib 时会强制执行此结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T13:57:48.013

要获得所有架构，只需将 ndkArchitecture 配置添加到您的 pom.xml 中：

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
       <artifactId>android-maven-plugin</artifactId>
         <configuration>
             <sdk>
                <platform>${sdk.platform}</platform>
             </sdk>
             <ndkArchitecture>armeabi armeabi-v7a x86</ndkArchitecture>
         </configuration>
 </plugin> 
```

但是为了工作 maven android 插件版本必须是：3.8.2 (with maven 3.1.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:17:37.130

我正在努力寻找类似问题的答案（包括第三方提供的共享库）。我最终通过以下`ndk-build`方式直接使用`exec-maven-plugin`：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.1.1</version>
    <executions>
        <execution>
            <phase>compile</phase>
             <goals>
                <goal>exec</goal>
             </goals>
        </execution>
    </executions>
    <configuration>
        <workingDirectory>jni</workingDirectory>
        <executable>$ANDROID_NDK_HOME/ndk-build</executable>
    </configuration>
</plugin> 
```

这最终将生成的库放置在本`libs`机项目的目录中。将`android-maven-plugin`使用 libs 目录作为要捆绑到生成的 apk（或 apklib）中的本机库的源。

您可能希望为.`libs`和.`obj``ndk-build`

# c++ - 使用迭代器调用STL Set中的非静态函数

> ID：15976149
> 
> 赞同：1
> 
> 时间：2013-04-12T16:11:57.490
> 
> 标签：c++, stl, set

在下面的程序中，我有一个`A`带有非静态函数的类`void add()`。我想使用迭代器来调用`add()`集合中的每个元素，但是最后一个元素有错误。

我该如何解决？

```
#include <iostream>
#include <set>

using namespace std;

class A
{
private:
    int a;
public:
    A(int x) { a = x; }
    void add() {a = a + 1; }
    bool operator<(A x) const { return a < x.a; }
};

int main()
{
    //type of the collection
    typedef set<A> IntSet;

    //define a IntSet type collection
    IntSet col1;
    IntSet::iterator pos;

    //insert some elements in arbitrary order
    col1.insert(A(3));
    col1.insert(A(4));
    col1.insert(A(5));

    //iterator over the collection and print all elements

    for(pos = col1.begin(); pos != col1.end(); ++pos)
    {
        (*pos).add();
        // ERROR!: Member function 'add' not viable:
        // 'this' argument has type'const value_type' 
        // (aka 'const A'), but function is not marked const
    }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:14:46.327

包含在`set<>`容器中的项目被考虑`const`并且不能被修改。如果他们这样做了，他们的身份可能会改变，但`set<>`不会意识到这一点，对其内部结构造成严重破坏，因为一个项目将被存储在一个不属于它的桶中！

例如，考虑`set<>`使用您的自定义`operator<`重载来对其内容进行排序。`a`如果在对象包含在集合中时更改成员变量，您期望会发生什么？集合不会知道发生了`a`变化，并将对象留在原来的位置。

要解决此潜在问题，`set<>`仅提供`const`对包含对象实例的引用。

您将只能`const`在此上下文中使用您的类的成员，并且`add()`未声明`const`. 如果要修改对象并将这些更改反映在集合中，则必须制作对象的副本，从集合中删除原始对象，对副本进行更改，然后将副本添加到集合中.

# search - 像 Emacs 的 Vim 的 Ctrp 之类的东西？

> ID：15976152
> 
> 赞同：7
> 
> 时间：2013-04-12T16:12:11.770
> 
> 标签：search, plugins, emacs

我正在寻找一种工具或插件，可以让我浏览我的文件、目录和标签，比如 Vim 的 Ctrlp，但对于 Emacs，有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:52:01.943

我不是 Vim 用户，但在查找 CtrlP 的功能后，您似乎正在寻找`ido-mode`.

`ido-mode`带有 emacs，您可以通过将其放入 .emacs 来启用它

```
(require 'ido)
(ido-mode t) 
```

有很多功能，`ido-mode`但这个视频很好地介绍了一些基本功能。请注意，模糊匹配现在默认启用，`ido-mode`但视频建议您必须自己启用它。

[http://www.youtube.com/watch?v=lsgPNVIMkIE](http://www.youtube.com/watch?v=lsgPNVIMkIE)

如需完整参考，请访问此处：[http ://emacswiki.org/emacs/InteractivelyDoThings](http://emacswiki.org/emacs/InteractivelyDoThings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-13T07:44:35.787

使用[fipler](https://github.com/grizzl/fiplr)或使用[projectile](https://github.com/bbatsov/projectile)和[helm](https://github.com/emacs-helm/helm)。这是你能做到的最接近的。

fipler 的一个问题是，如果您将主目录作为 git repo(dotfiles)，则在主目录中获取文件将需要很长时间。否则，只需使用 fipler。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T19:30:22.807

我刚刚发现了textmate，这很酷:) ...

[https://github.com/defunkt/textmate.el](https://github.com/defunkt/textmate.el)

它提供的功能几乎相同，除了命令不是“Ctrl+P”，而是“Command+T”......（在我的情况下 - “Alt+T”）...... :)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-26T10:56:07.180

我能够使用 project-root.el 的 project-root-find-file 辅助函数来完成此操作

请参阅：[http ://solovyov.net/project-root/](http://solovyov.net/project-root/)

# ios - UIPickerView 按标题设置选定行

> ID：15976162
> 
> 赞同：3
> 
> 时间：2013-04-12T16:12:37.460
> 
> 标签：ios, uipickerview

我正在尝试从包含位置列表的 UIPickerView 代码中选择一行。pickerview 的内容是在运行时从服务器加载的，我有用户上次登录时使用的位置。

我知道我可以用`[pickerview selectrow:int ...]`数字选择一行，但我需要将先前的位置与选择器中的位置相匹配以获取行号。我还没有找到可以帮助我做到这一点的方法。

如果我不清楚，我实际上是在尝试`UIPickerView`通过行的标题来查找 a 中元素的行号。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:55:25.107

如果你的选择器只显示`NSStrings`你可以这样做。

```
NSUInteger index = [locationsArray indexOfObject:@"London"]; 
```

# ruby-on-rails-3 - Rails 使用 efax 发送传真

> ID：15976168
> 
> 赞同：3
> 
> 时间：2013-04-12T16:12:55.040
> 
> 标签：ruby-on-rails-3, actionmailer, fax

我正在构建一个 Rails 应用程序，我需要将记录发送到收件人的传真号码。我想使用 Efax 来实现这一点。

大多数收件人没有 efax 电子邮件地址，否则我只会使用邮件程序以这种方式发送。

是否有使用 Efax 将出站传真发送到实际传真号码的 Rails 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:47:50.157

我在 ruby​​gems.org 中搜索 efax 并找到了 efax gem。

[http://rubygems.org/gems/efax](http://rubygems.org/gems/efax)

[https://github.com/szimek/efax](https://github.com/szimek/efax)

Efax 本身需要您注册才能使用 API，但您可以联系他们进行免费试用。

另请参阅[http://www.efaxdeveloper.com/developer/howWorks](http://www.efaxdeveloper.com/developer/howWorks)

可以在 [https://secure.efaxdeveloper.com/downloads.jsp找到详细的 API 信息和示例传真（选择通用实施工具包）](https://secure.efaxdeveloper.com/downloads.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T13:02:19.943

我最终使用了 Hello Fax 而不是 Efax，因为它更灵活并且开发人员可以轻松访问 API。我在这里使用了 hello_fax gem：[hello_fax ruby​​ gem](https://github.com/maletor/hello_fax)

# c# - 如何在不指定命名空间的情况下从字段中消除枚举的歧义？

> ID：15976169
> 
> 赞同：0
> 
> 时间：2013-04-12T16:12:58.833
> 
> 标签：c#, enums

```
enum SameName { Value }
class Tester
{
   void Method1() {
      SameName SameName;
      SameName test = SameName.Value;
   }
   void Method2() {
      string SameName;
      SameName test = SameName.Value;
   }
} 
```

在第一种方法中，编译器正确地判断 SameName.Value 指的是枚举。

在第二种方法中，编译器会感到困惑，并认为 SameName.Value 指的是字符串类的 Value 成员。由于不存在这样的成员，因此会出错。

在这种情况下，我可以做些什么来帮助编译器更加了解我的 SameName 枚举？有没有办法用 using 语句来做到这一点？

*   我无法在我的真实代码中重命名变量或枚举。
*   我正在创建一个包含许多枚举值的大型字典，我宁愿不在枚举的每个实例前面添加命名空间前缀。

**更新：**是的，我知道我不应该使用大写的局部变量。是的，我意识到这些是局部变量，而不是字段。是的，我意识到如果真正的代码看起来像这样，调试起来会很糟糕。我把上面写成一个简短的、人为的例子，显示了我在实际代码中遇到的问题。我很抱歉我没有明确表达我的意图。在实际代码中，类位于枚举命名空间中包含的命名空间中，而局部变量是基类中的属性。我试图删除所有无关的代码以使问题更容易被发现，并列出了我的要求以便为问题提供一点范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:30:44.200

C# 被设计为在面对与其类型相同的*属性时是健壮的，因为这很常见：*

```
class Shape
{
    public Color Color { get; set; }
    ... 
```

如果您有一个 Color 类型，那么拥有一个也称为 Color 的属性是很常见的，并且没有很好的方法来重命名它们中的任何一个。因此，C# 旨在合理优雅地处理这种情况。有关颜色颜色问题的一些有趣细节，请参阅我 2009 年的文章：

[http://blogs.msdn.com/b/ericlippert/archive/2009/07/06/color-color.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/07/06/color-color.aspx)

当声明的事物是本地的时，C# 的设计目的*不是处理颜色颜色问题。***重命名您的本地**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:16:47.653

您可以为枚举类型使用*别名：*

```
namespace ConsoleApplication13
{
    using NewEnumName = ConsoleApplication13.SameName;

    internal enum SameName { Value }

    internal class Tester
    {
        private void Method1()
        {
            SameName SameName;
            SameName test = SameName.Value;
        }

        private void Method2()
        {
            string SameName;
            SameName test = NewEnumName.Value;
        }
    }

    public class Program
    {
        private static void Main(string[] args)
        {
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T18:01:51.770

好的，根据您的更新，我想我们可以为您提供帮助。现在的情况更有意义。我想有代码：

```
// in a place you're not allowed to edit
namespace Outer
{
  public enum SameName { Value, }
} 
```

和

```
// in a place you're not allowed to edit
namespace BaseSpace
{
  public class TesterBase
  {
    public string SameName { get; set; }
  }
} 
```

然后您在*可以*编辑的第三个代码文件中遇到问题。我建议您使用指向该类型的[`using`别名指令](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)来解决它。这样您就不必一遍又一遍地重复完整的命名空间。它看起来像这样：

```
using BaseSpace;
using snEnum = Outer.SameName;          // this helps you (a using alias)

namespace Outer.Inner
{
  public class Tester : TesterBase
  {
    void Method2() {
      snEnum test = snEnum.Value;
    }
  }
} 
```

请注意，使用别名指令可以“指向”命名空间或类型（如本例所示）。它们为您提供了一个您经常使用的繁琐名称的简写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T16:25:44.367

`sameName`出于诸如此类的原因，使用命名局部变量的约定会好得多。这是一个完整的例子：

```
enum SameName { Value }
class Tester
{
   void Method1() {
      SameName sameName;
      SameName test = SameName.Value;
   }
   void Method2() {
      string sameName;
      SameName test = SameName.Value;
   }
} 
```

您说您无法重命名该字段，但您的示例显示了局部变量。这是一个约定，字段只能是私有的，并且不能以大写字母开头。局部变量和私有字段可以，除了极少数例外（例如反射......如果你正在反射私有字段，你还有其他问题），总是可以重命名以适应你需要的任何东西。

简而言之，使用良好的做法，你就不会有这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T17:19:58.073

这不是一个真正的答案。而是受问题启发的观察：

测验：这段代码输出了什么（假设`System.Object`有*实例*方法`ToString()`和`GetHashCode()`）？

```
class Color
{
  private static new int ToString()
  { return 42; }
  public static new string GetHashCode()
  { return "I'm public!"; }
}

static class Program
{
  static void Main()
  {
    Color Color = new Color();
    var testA = Color.ToString();
    var testB = Color.GetHashCode();
    Console.WriteLine(testA);
    Console.WriteLine(testB);
  }
} 
```

答：由于`Color`定义了与其继承的实例方法具有相同名称和签名的新静态方法，因此编译器可以选择两个重载。在`ToString`它选择实例方法的情况下，这是幸运的，因为静态方法是私有的。但是`GetHashCode`它选择了静态方法。颜色-颜色魔法。

补充说明：对于不同意用大写首字母命名局部变量的人，可以在Color-Color为直接类成员时做同样的例子，例如`public static Color Color { get; set; }`。

# iphone - 在显示之前无法为控制器中的标签分配值？

> ID：15976171
> 
> 赞同：0
> 
> 时间：2013-04-12T16:13:00.713
> 
> 标签：iphone, ios, objective-c

伙计们，这已经让我头疼了好几个小时了.... :(

我有一组控制器，它们被加载到滚动视图中

我想将值分配给标签“类别”，但我无法执行此操作 - 值显示为 NULL ??

但是，我可以在 viewDidLoad 方法中对其进行硬编码？

我尝试了几种方法，但都没有奏效？...

我的 .h 文件看起来像这样......

```
@interface ReviewCategoryViewController : UIViewController {
    @public
    UILabel *CategoryTitle;
}

- (id)initWithCategory:(NSString *)category;
- (id)setCategory:(NSString *)category;

@property (strong, nonatomic) IBOutlet UILabel *CategoryTitle;

@end 
```

我的实现看起来像这样......

```
- (id)setCategory:(NSString *)category
{
    [self.CategoryTitle setText:category];
    NSLog(@">>2\. Category %@ %@", category, CategoryTitle.text);

    return self;
}

// load the view nib and initialize the pageNumber ivar
- (id)initWithCategory:(NSString *)category
{
    self = [super initWithNibName:@"ReviewCategoryViewController" bundle:nil];

    [self.CategoryTitle setText:category];
    NSLog(@">>1\. Category %@ %@", category, CategoryTitle.text);

    return self;
} 
```

我对该方法的调用如下所示...

```
 ReviewCategoryViewController *controller = [viewControllers objectAtIndex:cardNo];

    if ((NSNull *)controller == [NSNull null])
    {
        NSString *temp = [categories_array objectAtIndex:cardNo];

        controller = [[ReviewCategoryViewController alloc] initWithCategory:temp];

        [controller setCategory:temp];

        [viewControllers replaceObjectAtIndex:cardNo withObject:controller];
    } 
```

我的日志显示以下内容？？？？

```
2013-04-12 16:54:27.507 Review Writer[14455:11603] >>1\. Category Adapability **(null)**
2013-04-12 16:54:27.509 Review Writer[14455:11603] >>2\. Category Adapability **(null)** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:28:08.783

```
- (id)initWithCategory:(NSString *)category
{
    seidlf = [super initWithNibName:@"ReviewCategoryViewController" bundle:nil];

    [self.CategoryTitle setText:category];
    NSLog(@">>1\. Category %@ %@", category, CategoryTitle.text);

    return self;
} 
```

调用`self = [super initWithNibName:@"ReviewCategoryViewController" bundle:nil];`链接到您的插座后尚未建立。您只能在`viewDidLoad`方法中加载视图后使用您的插座；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:07:39.703

您可以在全局变量中设置类别并在 didLoad 方法中设置标签文本：

```
- (id)initWithCategory:(NSString *)category
{
    self = [super initWithNibName:@"ReviewCategoryViewController" bundle:nil];

    // categoryStr is a global NSString var
    categoryStr = category;

    return self;
}

- (void)viewDidLoad
{
    [self.CategoryTitle setText:categoryStr];
} 
```

# ios - Objective-C 中 HMAC SHA1 实现的问题

> ID：15976174
> 
> 赞同：2
> 
> 时间：2013-04-12T16:13:06.310
> 
> 标签：ios, objective-c, cocoa, hmacsha1, commoncrypto

我正在尝试使用 HMAC-SHA1 算法为休息请求创建 base64 签名。我专门使用 SinglePlatform API，步骤如下：

1.  去掉请求的域部分，只留下路径和查询：/locations/haru-7?client=YOUR_CLIENT_ID
2.  检索您的私钥，该私钥在 URL 的修改后的 Base64 中编码，并使用 HMAC-SHA1 算法对上述 URL 进行签名。您可能需要将签名密钥解码为其原始二进制格式。在许多密码库中，生成的签名将采用二进制格式。
3.  使用修改后的 Base64 for URL 对生成的二进制签名进行编码，以将此签名转换为可以在 URL 中传递的内容。使用 sig 参数将此签名附加到 URL：

我目前的实现如下：

```
 // Convert a modified Base64 key into Base64
NSString *modifiedKey = [SIGNING_KEY stringByReplacingOccurrencesOfString:@"-" withString:@"+"];
modifiedKey = [modifiedKey stringByReplacingOccurrencesOfString:@"_" withString:@"/"];

// Decode the Base64 key
NSData *key = [NSData dataFromBase64String:modifiedKey];

// Construct a url with params
NSString *data = [NSString stringWithFormat:@"/locations/%@?client=%@", _id, CLIENT_ID];

// Convert key and data to c chars
const char *keyBytes = [key bytes];
const char *baseStringBytes = [data cStringUsingEncoding:NSUTF8StringEncoding];

unsigned char digestBytes[CC_SHA1_DIGEST_LENGTH];

CCHmacContext ctx;
CCHmacInit(&ctx, kCCHmacAlgSHA1, keyBytes, strlen(keyBytes));
CCHmacUpdate(&ctx, baseStringBytes, strlen(baseStringBytes));
CCHmacFinal(&ctx, digestBytes);

NSData *digestData = [NSData dataWithBytes:digestBytes length:CC_SHA1_DIGEST_LENGTH];

// Reconvert the into Base64 modified 
NSString *signingKey = [digestData base64EncodedString];
signingKey = [signingKey stringByReplacingOccurrencesOfString:@"+" withString:@"-"];
signingKey = [signingKey stringByReplacingOccurrencesOfString:@"/" withString:@"_"];

if ( [data hasSuffix:@"="] ) {
    [signingKey substringToIndex:[hassigningKeyh length]-1];
}

NSLog(@"Signing Key: %@", signingKey); 
```

我最初收到的签名密钥是经过修改的 Base64，这就是我替换 -+_/ 字符的原因。此实现返回了正确的签名密钥，但不一致。

在将 Objective-C 转换为 C 时，我做错了什么吗？有没有更好的方法来处理这个？

我的应用程序正在使用 ARC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-11T14:01:19.660

问题是我是用 C 方法来确定数据长度的：

```
CCHmacContext ctx;
CCHmacInit(&ctx, kCCHmacAlgSHA1, keyBytes, strlen(keyBytes));
CCHmacUpdate(&ctx, baseStringBytes, strlen(baseStringBytes));
CCHmacFinal(&ctx, digestBytes); 
```

当我使用 NSString/NSData 长度方法时，它一直有效：

```
CCHmacContext ctx;
CCHmacInit(&ctx, kCCHmacAlgSHA1, keyBytes, [key length]);
CCHmacUpdate(&ctx, baseStringBytes, [data length]);
CCHmacFinal(&ctx, digestBytes); 
```

**编辑：**
正如`Ivo Beckers`评论中提到的，这也可以写成一行：

```
CCHmac(kCCHmacAlgSHA1, keyBytes, strlen(keyBytes), baseStringBytes, strlen(baseStringBytes), digestBytes); 
```

# c++ - 使用波兰语字符时文件内容被截断

> ID：15976177
> 
> 赞同：2
> 
> 时间：2013-04-12T16:13:11.740
> 
> 标签：c++, file, character, ofstream, polish

代码：

```
#include <fstream>

const wchar_t * testArray[] =
{
    L"Wszystkie kategorie równoważne",
    L"Oczekiwane przepływy pieniężne",
    L"Risk i dojrzałość",
    L"Pozycja strategiczna i lata na rynku",
    L"Prawdopodobieństwo oszacowania"
};

void FaultyFunction(void)
{
    std::wofstream file("test.txt");
    for (int i = 0 ; i < 100 ; ++i)
    {
        for (int j = 0 ; j < 5 ; ++j)
        {
            file << testArray[j] << L'\t';
        }
        file << L'\n';
    }
}

int main(void)
{
    FaultyFunction();
    return 0;
} 
```

执行后的“test.txt”：

> Wszystkie 类别 równowa

（是的，这就是整个文件！）

现在，我不知道这是`std::wofstream`文件编码的问题还是什么，但结果至少很奇怪。但是当我删除波兰字母时：

```
const wchar_t * testArray[] =
{
    L"Wszystkie kategorie rownowazne",
    L"Oczekiwane przeplywy pieniezne",
    L"Risk i dojrzalosc",
    L"Pozycja strategiczna i lata na rynku",
    L"Prawdopodobienstwo oszacowania"
}; 
```

文件内容符合预期：

> Wszystkie kategorie rownowazne Oczekiwane przeplywy pieniezne Risk i dojrzalosc Pozycja strategiczna i lata na rynku Prawdopodobienstwo oszacowania Wszystkie kategorie
> rownowazne Oczekiwane przeplywy pieniezne Risk i dojrzalosc Pozycja strategiczna i lata na rynku Prawdopodobienstwo oszacowania Wszystkie kategorie
> rownowazne Oczekiwane przeplywy pieniezne Risk i dojrzalosc Pozycja strategiczna i lata na rynku Prawdopodobienstwo oszacowania
> ...（其余的 97 行都是这样）

当我使用相同的`testArray`（**带有**波兰字符）在 *.xls 文件（使用 libxl 库）中写一些东西时，更加侮辱伤害，一切都很好。

怎么了？如何将波兰语字母保存在文本文件中？

**编辑：** 实际上，当我尝试使用`std::string`和`std::ofstream`（不宽）相同的代码时，它也可以正常工作（**使用**波兰字母）。那么宽字符有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-23T16:36:19.247

[已经在 StackOverflow、MSDN、CodeGuru、CodeProject 等上讨论了](https://www.google.cz/search?q=c%2B%2B%20wofstream%20unicode)数十次。但是，在 Visual Studio 2013 中准备的 C++ 控制台应用程序的下一个代码可能会有所帮助：

```
#include "stdafx.h"     // added by Visual Studio
#include <fstream>
#include <iostream>
#include <codecvt>
#include <locale>
#include <fcntl.h>
#include <io.h>

const std::locale utf8_locale = std::locale(std::locale(),
    new std::codecvt_utf8<wchar_t>());      // prepare parameter for imbue call
const wchar_t* testArray[] =
{
    L"Wszystkie kategorie równoważne",
    L"Oczekiwane przepływy pieniężne",
    L"Risk i dojrzałość",
    L"Pozycja strategiczna i lata na rynku",
    L"Prawdopodobieństwo oszacowania"
};

void FaultyFunction(void)
{
    _setmode(_fileno(stdout), _O_U16TEXT); // for debugging; if omitted then
                                           // std::wcout would be truncated as well
    std::wofstream test_file("test.txt");
    // test_file << L"\xEF\xBB\xBF";     // Byte Order Mark: not required nor recommended
                                         //       important: write BOM before imbue
    test_file.imbue(utf8_locale);        // set the locale of the stream (and buffer
                                         //       if any) to the specified locale
    for (int i = 0; i < 10; ++i)
    {
        for (int j = 0; j < 5; ++j)
        {
            test_file << testArray[j] << L'\t';
            // std::wcout << testArray[j] << L'\n';  // for debugging
        }
        test_file << L'\n';
    }
}

int main(void)
{
    FaultyFunction();
    return 0;
} 
```

# sql - 查询多于两列且在一列中不同的列

> ID：15976179
> 
> 赞同：2
> 
> 时间：2013-04-12T16:13:22.973
> 
> 标签：sql, ms-access-2007

我有一个包含四列的表，并且希望仅基于一列显示不同的输出。我怎样才能做到这一点？

我尝试在 ID 上使用 Max 函数，但它仅适用于两列，超过两列的任何内容都会显示所有记录。

任何帮助深表感谢

- 编辑 -

样本数据：

```
ID Name Date    Status
1  Sam  1/1/11    A
2  Sam  2/22/12   A
3  Jill 1/5/10    R
4  Jim  7/2/12    I
5  Jim  5/6/11    I
6  Bob  11/11/12  A
7  Bob  7/26/10   A 
```

输出：

```
ID Name Date    Status
1  Sam  1/1/11    A
3  Jill 1/5/10    R
4  Jim  7/2/12    I
6  Bob  11/11/12  A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:45:01.923

似乎您想要`ID`每个 值最低的行中的值`Name`。使用`GROUP BY`子查询来获取`ID`每个`Name`. 然后`INNER JOIN`你的表到子查询。

```
SELECT y2.ID, y2.Name, y2.Date, y2.Status
FROM
    YourTable AS y2
    INNER JOIN
        (
            SELECT y.Name, Min(y.ID) AS MinOfID
            FROM YourTable AS y
            GROUP BY y.Name
        ) AS sub
    ON y2.ID = sub.MinOfID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:17:27.730

不确定您想从其他列返回什么，但这样的事情会返回 col1 中的唯一值，以及其他列的最小值。

```
SELECT 
    Col1,
    MIN(Col2) AS Col2,
    MIN(Col3) AS Col3,
    MIN(Col4) AS Col4
FROM MyTable
GROUP BY Col1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:28:11.903

不确定这是否是您想要的，但请尝试：

从 yourTable 中选择 DISTINCT columnYouFilterBy、column2、column3、column4

# android - Android - 拍摄照片/视频并通过 Intent 使用自定义名称将它们保存到自定义目的地仅在某些设备上工作，为什么？

> ID：15976181
> 
> 赞同：0
> 
> 时间：2013-04-12T16:13:23.977
> 
> 标签：android, android-camera-intent

这是我用来创建意图的代码：

```
try {
                    file = createImageFile();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                 if(file!= null)
                 {

                    Log.d(Tag,"absolute path: "+imageAbsolutePath);
                    Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    i.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(file));        
                    startActivityForResult(i, TAKE_PICTURE);
                 } 
```

这是返回具有自定义名称和位置的文件的方法：

```
private File createImageFile() throws IOException {

      SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
      String currentDate = sdf.format(new Date());

      SimpleDateFormat sdf2 = new SimpleDateFormat("HH:mm:ss");
      String currentTime = sdf2.format(new Date());
      String timeArray[] = currentTime.split(":");

      String imageName = currentDate+" "+timeArray[0]+"-"+timeArray[1]+"-"+timeArray[2];

   // create a File object for the parent directory
   File Pictures = new File(Environment.getExternalStorageDirectory()+File.separator+"Pictures");
   // have the object build the directory structure, if needed.
   if (!Pictures.exists()) {
       Pictures.mkdirs();
       Log.d(Tag,"Pictures folder created: "+Pictures);
       }else
       {
           Log.d(Tag,"Pictures folder Already Exists: "+Pictures);
       }

       // File image = File.createTempFile(imageName,".jpg",Pictures);
   File image = new File (Pictures,imageName+".jpg" );
        Log.d(Tag,"This is Image name: "+ imageName);
        imageAbsolutePath = image.getAbsolutePath();

        return image;

    } 
```

这是我使用的 inActivityResult 方法：

```
case TAKE_PICTURE:
             if(resultCode == RESULT_OK)
                {
                 galleryAddPic();
                    Bitmap imgBitmap=null;

                    try
                        {
                        imgBitmap = lessResolution(imageAbsolutePath);                                             

                        }catch (Exception e)                             
                        {
                            e.printStackTrace();
                        }
                        if (imgBitmap!=null)
                        {
                            images.add(imgBitmap);
GridView grid = (GridView) findViewById(R.id.grid_view);
grid.setAdapter(new ImageAdapter(this));
} 
```

所有这些方法都适用于以下设备：摩托罗拉 Xoom、摩托罗拉 Droid、Razor、一些三星设备，但在三星 Galaxy Ace s5830m (Android 2.3.6) 中不起作用。它正确拍摄图像，但是当它返回 onActivityResult 时没有任何反应。经过一些测试，我发现它没有显示任何内容，因为图像保存在 DCIM/Camera 文件夹而不是图片文件夹中，所以我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T16:18:19.550

我遇到了同样的问题，在某些手机中它可以正常工作，而对于其他手机则不能，我在此链接中找到了我的解决方案，希望对您有所帮助：

[拍摄相机意图照片后删除图库图像](https://stackoverflow.com/questions/6390163/deleting-a-gallery-image-after-camera-intent-photo-taken)

# android - 安装新的 apk 并删除以前的

> ID：15976183
> 
> 赞同：0
> 
> 时间：2013-04-12T16:13:28.173
> 
> 标签：android, mobile, installation, apk

今天是个好日子。

这`s the situation. I got an android application and it`是更新它的自我。所以它会下载新版本的apk文件并执行。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(uri, "application/vnd.android.package_archive");
        intent.addFlags(intent.FLAG_ACTIVITY_NEW_TASK);
        mApp.startActivity(intent); 
```

安装开始但停止并显示“无法安装应用程序”消息。我发现原因是 - 我的新 apk 没有签名，而以前的版本是。

所以我需要我的应用程序来删除它的自我并安装新的（未签名的）apk。或者做任何事情来让我的新 apk 安装并运行。我需要在以前的应用程序代码中这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:44:15.200

必须先对应用程序进行签名（例如，开发人员直接从 Eclipse 签名，或使用您自己生成的密钥）才能安装它。时期。因此，您需要先对其进行签名，并且必须使用相同的密钥——否则您将收到安装错误。

参见：[安卓文档](http://developer.android.com/tools/publishing/app-signing.html)

我想不出在安装新版本之前必须卸载该应用程序的任何原因，除了应用程序兼容性原因（例如您的新应用程序以不同方式处理保存的数据或其他原因）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T11:38:59.153

您可以参考以下链接：

[如何签署一个android apk文件](https://stackoverflow.com/questions/4853011/how-to-sign-an-android-apk-file)

或者

[http://developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

# c# - 为什么我的 EventWaitHandle 会收到 UnauthorizedAccessException？

> ID：15976187
> 
> 赞同：0
> 
> 时间：2013-04-12T16:13:57.590
> 
> 标签：c#, .net, events, event-wait-handle

我编写了一个运行以下代码行的可执行进程：

```
immediateShutdownEvent = new EventWaitHandle(false, EventResetMode.ManualReset, "Global\\immediateShutdownEvent", out createdNew, security); 
```

我可以在这个可执行进程正在运行并且它工作正常时设置这个事件，但是一旦可执行文件作为一个进程被终止（例如，如果你手动终止该进程，则从任务管理器中）并且我在我终止后立即自动重新启动该进程它，我得到一个“System.UnauthorizedAccessException：对路径'Global\immediateShutdownEvent'的访问被拒绝”，即使它在相同的SYSTEM上下文下运行。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:27:38.990

我想出了如何通过使用 OpenExisting() 并抓住 WaitEventHandle 来解决它......然后如果它存在则将其关闭，尽管据说您当前的帐户需要访问权限才能删除此事件。

# php - 使用 .htm 文件（包含 XML）作为模板，然后重新保存保留原始格式

> ID：15976201
> 
> 赞同：0
> 
> 时间：2013-04-12T16:14:34.497
> 
> 标签：php

我目前有一个 Snom XML 文件（存储为 filename.htm），我需要将其用作模板文件来生成特定的单个文件。

我尝试使用[get_file_contents](http://php.net/manual/en/function.file-get-contents.php)和[DOMDocument](http://php.net/manual/en/class.domdocument.php)加载 .htm，但是我要么丢失了文档中的标签，要么丢失了格式。

有没有办法加载文件的内容，替换模板占位符，然后保存新文件，保留格式和原始间距？

**模板文件**

```
<?xml version="1.0" encoding="utf-8" ?> 
<settings>
    <phone-settings e="2">
        <user_active idx="1" perm="R">on</user_active>
        <user_realname idx="1" perm="R">{Prefix}{Suffix}</user_realname>
        <user_pname idx="1" perm="R">{Prefix}{Suffix}</user_pname>
        <user_name idx="1" perm="R">{Prefix}{Suffix}</user_name>
        <phone_name idx="1" perm="R">{Prefix}{Suffix}</phone_name>
        <user_idle_text idx="1" perm="R">{Prefix}{Suffix}</user_idle_text>

        <idle_offhook idx="1" perm="R">on</idle_offhook>
        <offhook_dial_prompt idx="1" perm="R">off</offhook_dial_prompt>
    </phone-settings>
</settings> 
```

**所需的最终结果**

```
<?xml version="1.0" encoding="utf-8" ?> 
<settings>
    <phone-settings e="2">
        <user_active idx="1" perm="R">on</user_active>
        <user_realname idx="1" perm="R">Phone 001</user_realname>
        <user_pname idx="1" perm="R">Phone 001</user_pname>
        <user_name idx="1" perm="R">Phone 001</user_name>
        <phone_name idx="1" perm="R">Phone 001</phone_name>
        <user_idle_text idx="1" perm="R">Phone 001</user_idle_text>

        <idle_offhook idx="1" perm="R">on</idle_offhook>
        <offhook_dial_prompt idx="1" perm="R">off</offhook_dial_prompt>
    </phone-settings>
</settings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:19:02.143

假设占位符是唯一的并且不在“非占位符”上下文中的其他地方使用，那么一个简单的字符串操作就可以了：

```
$xml = file_get_contents('template.xml');
$xml = str_replace('{Prefix}', 'Phone', $xml);
$xml = str_replace('{Suffix}', '001', $xml);
etc...

file_put_contents('parsed.xml, $xml); 
```

# c - 这个函数之类的宏是什么意思？

> ID：15976202
> 
> 赞同：3
> 
> 时间：2013-04-12T16:14:39.033
> 
> 标签：c, macros, c-preprocessor

我是一个比较优秀的**C**程序员，我喜欢做研究，讨厌问问题，但是这段特殊的代码简直令人不安。它与 XQueryKeymap 一起使用，但我完全不明白：

```
#define BIT(c,x) (c[x/8]&(1<<(x%8))) 
```

真正困扰我的是`[]`和 `<<`符号。但如果你能口头说出整件事的意思，我会非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:17:41.323

它将值打包到 char 数组中。每个数组元素（一个 char 数组）有 8 位，因此数组的索引由`x/8`- 同时`1<<(x%8)`通过模数（的余数）对 char 中的 8 位移动一个位`x/8`- 所以这个如果设置了位，则宏返回非零，否则返回`x`0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T16:17:55.793

万维网。`c`如果不是可取消引用的类型并且`x`不是整数类型，则此宏将失败。另外，没有括号会使这更不安全。不好的代码。

`x`将位数转换为包含在`c`. 将`<<`掩码向上移动以读取位，而将`[]`用于读取内存。如果设置了数组中的位，则返回 1，否则返回 0——因此`BIT`得名。

# android - 机器人和服务测试

> ID：15976206
> 
> 赞同：3
> 
> 时间：2013-04-12T16:14:43.873
> 
> 标签：android, android-service, robotium, android-testing

我有一个使用#startService 绑定到服务的应用程序。Service 是一个远程服务，使用 AIDL 定义。

我想编写一个绑定到“模拟”服务的 Robotium 4.x 测试，该服务提供一些测试数据，以便我可以控制服务提供哪些数据。我对设置这样的场景还不够了解。

我的第一次尝试是调用由我的 ActivityInstrumentationTestCase2 启动的 Activity 上的一些方法，然后简单地传入 ServiceConnection 并手动调用 #onServiceConnected 以模拟来自系统的回调。

```
 activity.setConnection(new FakeServiceConnection()); 
```

这总是导致

```
 Instrumentation run failed due to 'java.lang.IllegalArgumentException' 
```

似乎Android运行时已经以某种方式看到了ServiceConnection。

我阅读了有关 RenamingDelegateContext 和 IsolatedContext 的信息，但我不知道在调用运行时#startService 时如何控制或设置服务上的创建。

文档说我可能必须像这样覆盖相应的方法。

```
public class ServiceRenamingContext extends RenamingDelegatingContext {

    @Override
    public ComponentName startService(Intent service) {
        throw new UnsupportedOperationException("I got called!!!!");
        // return super.startService(service);
    }

    @Override
    public boolean stopService(Intent name) {
        throw new UnsupportedOperationException("I got called!!!!");
        // return super.stopService(name);
    }

    public ServiceRenamingContext(Context context, String filePrefix) {
        super(context, filePrefix);

    }

    @Override
    public boolean bindService(Intent service, ServiceConnection conn, int flags) {

        throw new UnsupportedOperationException("I got called!!!!");

        // return super.bindService(service, conn, flags);
    }
} 
```

如您所见，这只是引发某种异常以查看它是否被运行时调用。但什么也没有发生。

非常感谢任何提示如何设置它。

我想我不明白如何使用 ActivityInstrumentationTestCase2 设置像我这样的特殊上下文。

干杯

# git - Github 无需提交即可拉取远程仓库

> ID：15976209
> 
> 赞同：0
> 
> 时间：2013-04-12T16:14:46.377
> 
> 标签：git, version-control, github

我正在处理某个目录中的一个项目，该目录链接到它对应的远程 git repo，但我不得不将项目的内容复制到另一个文件夹，现在需要将它重新链接到远程 repo。

我看到的一切都说要做...

```
cd newfolder
git init
git add -A
git commit -a -m "Creating repo"
git remote add origin git@github.com:username/reponame.git 
```

...但我想提取远程项目的最新更改，并且不想推送我的本地仓库。以上内容会为我做，还是我可以做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:18:46.673

刚刚怎么样

```
cd newfolder
git clone git@github.com:username/reponame.git . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:50:00.117

仅仅使用创建一个全新的存储库`git init`是行不通的，因为这将启动一个全新的提交树，这将与远程存储库已知的所有内容完全不同。

您的单独目录中是否有任何新更改？

如果您只是简单地复制了目录并且没有更改任何内容，只需删除整个目录并再次克隆您的远程存储库，一切都很好。

如果您的私有副本中有重要更改，那么将它们正确集成到远程存储库中可能会变得很棘手。- 但在这种情况下，第一步是获取存储库的克隆以获取所有历史记录和所有新更改。

# python - 使用 cx_freeze 编译 PySNMP

> ID：15976211
> 
> 赞同：1
> 
> 时间：2013-04-12T16:14:49.110
> 
> 标签：python, cx-freeze, pysnmp

我编写了一个小的 python 3.3 脚本，通过 pySNMP 查询设备。

`cx_freeze`我用（没有错误）编译了脚本，但我遇到了一个问题：
当我运行脚本时，我遇到了关于 library.zip 中不存在的 MIB 文件 (*.py) 的错误，因此我手动复制了库中的 MIB 并脚本运行良好。然后我尝试在编译添加期间添加库（示例）：

`zipinclude = [("C:/Python33/Lib/site-packages/pysnmp-4.2.4-py3.3.egg/pysnmp/smi/mibs/SNMP-FRAMEWORK-MIB.py","pysnmp/smi/mibs/SNMP-FRAMEWORK-MIB.py")]`

到 setup.py 中的脚本`cx_freeze`，但即使 MIB（.py）在编译后出现在 library.zip 中，脚本也无法工作，直到我手动将 MIB 复制到 library.zip（覆盖 cx_freeze 包含的那些） ）。

对这个问题有什么建议吗？

# windows - 访问 VBA 表单私有子调用不同模块中的公共函数

> ID：15976224
> 
> 赞同：3
> 
> 时间：2013-04-12T16:15:44.067
> 
> 标签：windows, ms-access, vba, ms-access-2010

在我的数据库中，我在一个模块中有一个公共函数，它接收一个 SQL 字符串并返回一个打开的记录集。这个函数在被这个模块和其他模块中的其他公共子调用时工作得很好。

但是，如果我尝试使用相同的确切代码调用相同的函数，则会出现编译错误：“参数数量错误或属性分配无效。”

如果我将确切的代码作为公共子代码剪切并粘贴到不同的模块中，则它可以正常工作。我怀疑这个问题与命名或隐藏变量有关。不幸的是，我无法通过搜索提出任何解决方案。

```
Public Function Query(SQL As String) As ADODB.Recordset
   Dim cnnConn As ADODB.Connection
   Dim rsRecord As New ADODB.Recordset
   Set cnnConn = CurrentProject.Connection
   rsRecord.ActiveConnection = cnnConn
   rsRecord.Open SQL
   Set Query = rsRecord
End Function

Private Sub Setup()
   Dim rs As New ADODB.Recordset
   Dim SQL As String
   SQL = "Select * FROM [Configuration]"
   Set rs = Query(SQL) <--- Compile Error
   rs.Close
End Sub 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:44:37.363

我的预感是使用`Query`该自定义 VBA 函数的名称导致的问题。

将函数从 重命名`Query`为`fnQuery`并将其返回值更改为`Set fnQuery = rsRecord`。`Setup()`然后将过程中的赋值语句更改为`Set rs = fnQuery(SQL)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:20:13.433

我发现使用 Debug > Compile 在 VBA 中发现了很多问题 - 它会突出显示许多错误：

![在此处输入图像描述](https://i.stack.imgur.com/Egl4r.png)

# java - 如何在 JAVA 中使用另一个 jar 中的类？

> ID：15976226
> 
> 赞同：0
> 
> 时间：2013-04-12T16:15:45.067
> 
> 标签：java, manifest.mf

我有一个小应用程序使用

```
import simple.http.Request;
import simple.http.Response;
import simple.http.load.BasicService;
import simple.http.serve.Context;
... 
```

运行 jar 文件（`java -jar test2.jar`）时，我收到此错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: simple/http/serve/ResourceEngine
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    ... 
```

谷歌我发现那个类（simple.http.serve.ResourceEngine）是[simple-2.7.jar](http://www.jarvana.com/jarvana/view/org/simpleframework/simple/2.7/simple-2.7.jar!/simple/http/serve/FileEngine.class?classDetails=ok)的一部分。

我已经像这样修改了 MANIFEST.MF 文件

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.9.0
Created-By: 1.7.0_17-b02 (Oracle Corporation)
Main-Class: com.App.Main
Class-Path: simple-2.7.jar 
```

在我的 jar 文件附近下载`simple-2.7.jar`并复制，但错误仍然存​​在

我是java中的NB。您能提供有关如何使 jar 工作的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:24:03.310

尝试使用此命令运行 java 程序

java -jar test2.jar -cp simple-2.7.jar

希望 simple-2.7.jar 在同一目录下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:21:22.307

您必须将 simple-2.7.jar 添加到您的类路径中。

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)

# java - 使用相反的布尔值

> ID：15976231
> 
> 赞同：-1
> 
> 时间：2013-04-12T16:15:59.567
> 
> 标签：java, boolean

这是我的想法，如果我将布尔值设置为自身的否，它只会设置相反的值。

```
boolean isRunning = true;

isRunning = !isRunning; //Changes to true.

isRunning = !isRunning; //Changes to false. 
```

现在，我的问题是..使用它有什么问题吗？因为我看到没有人以这种方式编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:17:18.453

不，这个结构绝对没有错。事实上，这很常见。

请参阅[在 Java 中切换布尔变量的最简洁方式？](https://stackoverflow.com/questions/224311/cleanest-way-to-toggle-a-boolean-variable-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:19:47.980

一点也不。一元运算符的使用如 Java 教程所示，例如[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:20:33.653

考虑替代方案：

```
if (isRunning) {
    isRunning = false;
} else {
    isRunning = true;
} 
```

显然你写的更清楚更简洁。

# android - 我想通过随机单击每个文本框在另一个表单上显示数据

> ID：15976233
> 
> 赞同：0
> 
> 时间：2013-04-12T16:16:03.460
> 
> 标签：android, sqlite

我已经动态创建了文本框...现在我想知道如何获取每个文本框的 id ..通过他们的 id 我想获取数据并将其显示到另一种形式...如果可能的话请帮我..

```
public class remaind_report extends Activity {

    SQLiteDatabase db;
    LinearLayout l2;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.remaind_report);

        db = openOrCreateDatabase("tracker.db",
                SQLiteDatabase.CREATE_IF_NECESSARY, null);
        Toast.makeText(getApplicationContext(), "Database Is Created
                Successfully...", Toast.LENGTH_LONG).show();

                l2 = (LinearLayout)findViewById(R.id.layout_remind);

        db= SQLiteDatabase.openDatabase("sdcard/tracker.db",null,SQLiteDatabase.CREATE_IF_NECESSARY);

        try
        {
            db.execSQL("CREATE TABLE remind(renotes VARCHAR(200),date
                    TEXT,time TEXT);");
            Toast.makeText(getApplicationContext(), "Table Is Created
                    Successfully....", Toast.LENGTH_LONG).show();
        }
        catch(Exception ex)
        {
            Toast.makeText(getApplicationContext(), "Table Is Already
                    Exists.....", Toast.LENGTH_LONG).show();
        }

        try {

            Cursor c1 = db.rawQuery("select * from remind ",null);
            int theTotal= c1.getCount();
            Toast.makeText(this, "Total: "+ theTotal, 1).show();
            String[] args= {"renotes","date","time"};
            int notesCol= c1.getColumnIndex("renotes");
            int dateCol= c1.getColumnIndex("date");
            int timeCol = c1.getColumnIndex("time");
            TextView t1=null;

            while(c1.moveToNext()) {

                t1=new TextView(getApplicationContext());
                t1.setText("textbox");
                t1.setId(notesCol);
                t1.setClickable(true);
                t1.setBackgroundColor(Color.parseColor("#ff009999"));
                l2.addView(t1);

                args[0] = c1.getString(notesCol);
                args[1] = c1.getString(dateCol);
                args[2] = c1.getString(timeCol);

                t1.append("\nNotes: "+ args[0]+"\nDate: "+args[1]+"\nTime: "+args[2]+"\n");

                t1.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        {

                            Toast.makeText(getApplicationContext(),"hiiii...",
                                    Toast.LENGTH_LONG).show();
                            // do stuf here
                        }

                    }
                });
            }
        }
        catch (Exception e){
            Toast.makeText(getApplicationContext(),e.getMessage(),
                    Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:04:09.333

动态创建的视图不需要任何 id。

```
t1=new TextView(getApplicationContext()); 
```

在这里使用 t1 您可以获取数据，例如

```
t1.getText("Some text").toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:35:04.033

```
we can not get position by dynamically generated textview's...so better to use list view instead of textviews to display different records from db...

here is my edited code.

    enter code here

package com.account;

import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class remaind_report extends ListActivity {

    Button logout;
    SQLiteDatabase db;
    LinearLayout l2;
    ListView lv;
    TextView ans;
    String[] name;
    ImageButton home;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.remaind_report);

        db = openOrCreateDatabase("tracker.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);
        Toast.makeText(getApplicationContext(), "Database Is Created Successfully...", Toast.LENGTH_LONG).show();

        l2 = (LinearLayout)findViewById(R.id.layout_remind);
        home = (ImageButton)findViewById(R.id.imageButton1);
        logout = (Button)findViewById(R.id.button1);

        db= SQLiteDatabase.openDatabase("sdcard/tracker.db",null,SQLiteDatabase.CREATE_IF_NECESSARY);

        try
        {
            db.execSQL("CREATE TABLE remind(renotes VARCHAR(200),date TEXT,time TEXT);");
            Toast.makeText(getApplicationContext(), "Table Is Created Successfully....", Toast.LENGTH_LONG).show();
        }
        catch(Exception ex)
        {
            Toast.makeText(getApplicationContext(), "Table Is Already Exists.....", Toast.LENGTH_LONG).show();
        }

        db= SQLiteDatabase.openDatabase("sdcard/tracker.db",null,SQLiteDatabase.CREATE_IF_NECESSARY);

        try
        {   

            //TextView nTv = new TextView(view.getContext()); 
        lv = getListView();

        //lv.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT, 1f));
        lv.getBaseline();
        lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        lv.setBackgroundColor(Color.TRANSPARENT);
        lv.setDividerHeight(2);
        //lv.setMinimumHeight(20);

        String col[] = new String[] {"renotes","date","time"};
        Cursor c = db.query("remind", col, null, null, null, null, null);

        name = new String[c.getCount()];
        c.moveToFirst();

        for(int i=0;i<c.getCount();i++)
        {
            name[i] = new String (c.getInt(0)+"-"+c.getString(1)+"-"+c.getString(2));
            c.moveToNext();
        }
        c.close();
        db.close();
        lv.setAdapter(new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_checked,name));

         ans = (TextView)findViewById(R.id.txtans);

        }           

    catch (Exception e) 
    {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();                
    }       

    home.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent myIntentAcc_TrackerActivity = new Intent(remaind_report.this,AccountTrackerActivity.class);
            startActivityForResult(myIntentAcc_TrackerActivity,101);
        }
    });
    logout.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent myIntentlogout = new Intent(remaind_report.this,AccountTrackerActivity.class);
            myIntentlogout.putExtra("FINISH", "ACTION.FINISH.LOGOUT");
            startActivityForResult(myIntentlogout,101);
            Toast.makeText(getApplicationContext(), "You Have Successfully Logout", 1).show();
        }
    });

 }

    protected void onListItemClick(ListView l, View v, int position, long id)
    {
        super.onListItemClick(l, v, position, id);

        Intent showreport=new    Intent(getApplicationContext(),show_trans_report.class);
        startActivity(showreport);
        Toast.makeText(getApplicationContext(), "You have clicked", 1).show();

        }
} 
```

# java - 未删除的重复项

> ID：15976234
> 
> 赞同：1
> 
> 时间：2013-04-12T16:16:04.663
> 
> 标签：java, file, arraylist

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Set;

public class Test {

    List<String> knownWordsArrayList = new ArrayList<String>();
    List<String> wordsArrayList = new ArrayList<String>();

    public void readKnownWordsFile()
    {
        try {
            FileInputStream fstream2 = new FileInputStream("knownWords.txt");
            BufferedReader br2 = new BufferedReader(new InputStreamReader(fstream2));
            String strLine;
            while ((strLine = br2.readLine()) != null) {
                knownWordsArrayList.add(strLine);
            }
        } catch (Exception e) {
        }

    }

    public void readFile() {
        try {
            FileInputStream fstream = new FileInputStream("newWords.txt");
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
            String strLine;
            String numberedLineRemoved = "";
            String strippedInput = "";
            String[] words;
            String trimmedString = "";
            while ((strLine = br.readLine()) != null) {
                numberedLineRemoved = numberedLine(strLine);
                strippedInput = numberedLineRemoved.replaceAll("\\p{Punct}", "");
                if ((strippedInput.trim().length() != 0) || (!strippedInput.contains("")) || (strippedInput.contains(" "))) {
                    words = strippedInput.split("\\s+");
                    for (int i = 0; i < words.length; i++) {
                        if (words[i].trim().length() != 0) {
                            wordsArrayList.add(words[i]);
                        }
                    }
                }
            }

            for (int i = 0; i < knownWordsArrayList.size(); i++) {
                wordsArrayList.add(knownWordsArrayList.get(i));
            }
            HashSet h = new HashSet(wordsArrayList);
            wordsArrayList.clear();
            wordsArrayList.addAll(h);
            for (int i = 0; i < wordsArrayList.size(); i++) {
                System.out.println(wordsArrayList.get(i));
            }
            System.out.println(wordsArrayList.size());
            in.close();
        } catch (Exception e) {// Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    }

    public String numberedLine(String string) {
        if (string.matches(".*\\d.*")) {
            return "";
        } else {
            return string;
        }
    }

    public static void main(String[] args) {
        Test test = new Test();
        test.readKnownWordsFile();
        test.readFile();

    }

} 
```

从文件添加到 knownWordsArrayList。然后我转到另一个文件并将单词放入 wordsArrayList。然后我制作了一个 hashSet 来删除重复的单词，但它们仍然存在。例如，“Mrs”在 knownWordsArrayList 中，但是当我打印 wordsArrayList 时，我仍然看到“Mrs”。我不明白为什么没有删除重复的单词。会不会跟字符集有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:20:02.747

> 例如，“Mrs”在 knownWordsArrayList 中，但是当我打印 wordsArrayList 时，我仍然看到“Mrs”。

是的，会的。您明确地将*所有*值添加`knownWordsArrayList`到`wordsArrayList`：

```
 for (int i = 0; i < knownWordsArrayList.size(); i++) {
      wordsArrayList.add(knownWordsArrayList.get(i));
 } 
```

目前还不清楚您的代码要做什么（使用整个集合操作和增强的 for 循环将有助于清晰），但这就是为什么 in 中的所有`knownWordsArrayList`内容也在`wordsArrayList`.

重要的是，这个声明：

> 然后我做一个 hashSet 来删除重复的单词

...只是意味着每个单词只会出现一次。这就是它要做的一切。

我怀疑你*应该*删除我上面引用的代码，而是这样做：

```
HashSet h = new HashSet(wordsArrayList);
h.removeAll(knownWordsArrayList);
wordsArrayList = new ArrayList<String>(h); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:29:12.853

```
 String[] arr = { "kitty", "mitty", "kitty" };
    Set<String> hs = new HashSet<String>(Arrays.asList(arr));
    System.out.println(Arrays.asList(arr));
    System.out.println(hs); 
```

输出是：

```
[kitty, mitty, kitty]
[mitty, kitty] 
```

这是你所期望的吗？

# objective-c - 将 tableview 放在与 tableviewcontroller 上的另一个 tableview 完全相同的视图控制器上

> ID：15976236
> 
> 赞同：0
> 
> 时间：2013-04-12T16:16:18.977
> 
> 标签：objective-c, uiviewcontroller, uitableview

我的项目需要你的帮助。

我想知道是否可以将 tableview 放在与 tableviewcontroller 上的 tableview 完全相同的视图控制器上。

我创建了我的自定义 tableviewcontroller 和一个 tableviewcontroller 对象，其中自定义 tableview 控制器是我的（假设是 ConA）在情节提要上，而在这个上的 tableview 工作正常。让我们将此 tableview 称为 Table A。

而我想要的是，在故事板的另一个场景中，它是一个视图控制器对象（假设是 ConB），我想显示一个与表 A 完全相同的表视图。让我们将此表视图对象称为表 B。

我想我可以通过从 ConA 复制 TableA 的 tableview 数据源和委托方法，并将其粘贴到连接到表 B 的数据源和委托的 ConB 上。

但是......还有其他更简单的选项可以让表 B 与表 A 相同吗？请帮忙。

如果有任何不清楚的地方，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:35:49.213

如果表 A 和 B 应该完全相同，为什么不使用同一个控制器类的两个实例呢？如果控制器 B 具有附加功能，您应该让它从控制器 A 继承，然后在 B 的实现中添加任何附加和/或覆盖的方法。

# python - 匹配来自两个单独文件的行

> ID：15976237
> 
> 赞同：1
> 
> 时间：2013-04-12T16:16:27.603
> 
> 标签：python, python-2.7, batch-file

我有这个问题。我有两个文件.txt，`match_list`格式如下：

```
Sevilla, Ath Bilbao
Valencia, Valladolid
Getafe, Atl. Madrid 
```

和`data`

```
Getafe, Atl. Madrid,5:00 PM, Coliseum Alfonso Pérez, 9.500,27.8, 2.760.000,8
Valencia, Real Valladolid,7:00 PM, Mestalla, 41.000,26.3, 8.640.000,6
Sevilla, Ath Bilbao,8:00 PM, Ramón Sánchez Pizjuan, 4-2-3-1,26, 5.488.000,11 
```

我想遍历这两个文件，匹配团队名称并将与每个匹配项对应的所有数据从 复制`data.txt`到`match_list.txt`.

我的代码无法处理这个问题（可能是因为我只循环一个文件？）：

```
match_data = open('data.txt').readlines()
match_list = open('m_list.txt').readlines()
outfile = open('done.txt', 'w')

for line in match_data:
    if line[:2] == match_list[:2]:
        match_list = match_list+',' + line[2:]
        outfile.write(match_list) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:33:43.447

您有 CSV 数据，请使用`csv`模块读取它们。首先读`data.txt`入内存，读入以前两列为键的字典：

```
import csv

with open('data.txt', 'rb') as match_data:
    reader = csv.reader(match_data)
    match_data = {tuple(row[:2]): row for row in reader}

with open('m_list.txt', 'rb') as match_list, open('done.txt', 'wb') as outfile:
    reader = csv.reader(match_list)
    writer = csv.writer(outfile)

    for row in reader:
        row = tuple(row)
        if row in match_data:
            writer.writerow(match_data[row]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:57:32.137

打扰一下。我在您的问题中看到了“批处理文件”标签，因此我发布了批处理文件 .bat 解决方案作为替代方案。我的方法包括首先将所有文件行`data`加载到由团队名称索引的数组中；这样，在处理文件时，可以直接访问`match_list`对应的元素。`data`这里是：

```
@echo off
setlocal EnableDelayedExpansion

rem Load all lines of data.txt file into data array indexed by team name
for /F "tokens=1* delims=," %%a in (data.txt) do (
   set data[%%a]=%%b
)

rem Process lines of m_list.txt file and output the corresponding data into done.txt file
(for /F "delims=," %%a in (m_list.txt) do (
   echo %%a, !data[%%a]!
)) > done.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:28:13.493

尝试这个：

```
for line in match_list:
    for x in match_data:
        if x.startswith(line.split(',')[0]):
            outfile.write(line +', '+ x)
            break 
```

我没有对每个字符串进行任何格式化，如果你愿意，你可以这样做。但是因为可能两个文件中的顺序不同，您要么需要执行匹配（如果您将它们读入真实的数据结构会更容易 -`csv`如果您愿意，可以尝试），或者只是循环两个假设它们不是太大的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T16:36:29.467

您的 data.txt 不是您希望 match_list.txt 采用的格式吗？

```
for line in match_data :
   for match in match_list :
      if match[:-1] in line : # careful of \n
         # write line to file
         break 
```

# tinymce - Tinymce 仅作为文本编辑器，不编辑 html

> ID：15976240
> 
> 赞同：4
> 
> 时间：2013-04-12T16:16:38.663
> 
> 标签：tinymce

我有一个复杂的布局，不希望客户能够把它搞砸并最终破坏它。所以我想限制tinymce，以便他们只能编辑/更改文本。

*   不允许对布局进行任何更改
*   除文本外，不得添加/删除任何内容
*   从字面上看，他们所能做的就是更改文本。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:34:56.327

我会说：“是的，这是可能的，这取决于您认为用户可能会执行哪种操作。”

我假设您的布局以 html 代码的形式存在，并且可以在编辑器中找到。现在，当用户开始选择和删除时 - 这就是您必须介入的地方。您可以编写自己的插件（或带有 onKeyUp 处理程序的合适的设置配置参数）来检查您的任何有价值的布局元素是否消失了。如果是这种情况，您将需要修复它。您还可以检查键码（ctrl+x、DELTE、Backspace 等）。复制到编辑器也需要限制为文本（关于这个问题有几个 SO 问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T15:00:44.967

TinyMce 有一个插件。它被称为不可编辑： [https :](https://www.tinymce.com/docs/plugins/noneditable/) ***//www.tinymce.com/docs/plugins/noneditable/***

您可以像这样启动tinymce：

```
tinymce.init({
    selector: 'texteditor',  // change this value according to your HTML
    toolbar: 'undo redo', // disable most of the plugins ...
    context_menu: false,
    menubar: false,        // ... to allow text edit only
    noneditable_editable_class: "editable", // class allowed to edit
    noneditable_noneditable_class: "non_editable" // the parent (everything else)

}); 
```

您必须定义这两个属性 - 我只尝试使用***noneditable_editable_class***计数它将把其余的视为不可编辑 - 没有成功。

**另一个解决方案**（没有 tinyMce）将***contenteditable***属性放置在您希望被允许编辑的页面元素上：

```
$('.editable').attr('contenteditable','true'); 
```

# php - PHP5打开一个现有的PDF文件？

> ID：15976241
> 
> 赞同：0
> 
> 时间：2013-04-12T16:16:39.647
> 
> 标签：php, zend-framework, pdf

是否可以使用 PHP5 PDF 内置功能来编辑现有文件，类似于 Zend 的这种方法。

```
<?php
require_once 'Zend/Pdf.php';

$pdf = Zend_Pdf::load('blank.pdf');
$page = $pdf->pages[0];
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);
$page->setFont($font, 12);
$page->drawText('Hello world!', 72, 720);
$pdf->save('zend.pdf');
?> 
```

...但不使用 Zend？

[（与PHP](https://stackoverflow.com/questions/7364/pdf-editing-in-php)中的问题PDF 编辑有关？ ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:23:24.863

There is no such thing as "built in PHP PDF", as the PHP pdflib wrappers are from PECL (and therefore not standard). However, if you'd like to run with pdflib... Have a read of the basic examples [here](http://fr2.php.net/manual/en/pdf.examples-basic.php). It isn't much harder than Zend, though slightly less intuitive (and probably less documented).

There are also a couple of PHP userland libraries (PHPPDF and similar) which might provide more features, at a cost: slower processing.

(To install pdflib: `pecl install pdflib` and then add it to extensions in your `php.ini`)

# toast - trigger.io toast 不工作

> ID：15976242
> 
> 赞同：-1
> 
> 时间：2013-04-12T16:16:40.013
> 
> 标签：toast, trigger.io

我正在尝试在 android 上使用“toast”调用，但没有任何显示

我正在尝试使用一个简单的测试

```
forge.notification.toast{"some string",function(){},function(e){}} 
```

在调试中它说它被调用但屏幕上没有显示

我在安装了 jellybean 的 HTC 上进行测试。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:56:15.190

forge.notification.toast 是一个函数。你的语法不正确。它应该是：

```
forge.notification.toast( "some string", function() {}, function(err) {} ); 
```

# c# - WCF 丢失继承的属性值

> ID：15976243
> 
> 赞同：0
> 
> 时间：2013-04-12T16:16:46.977
> 
> 标签：c#, wcf, inheritance, serialization

我有一个 WCF 服务方法：

```
public EntityBase GetEntityById(string entityName, object entityId) 
```

我有两个基类：

```
public abstract class EntityBase
{
    public virtual object Id { get; set; }
}

public abstract class VersionableEntityBase : EntityBase
{
    public virtual int Version { get; protected set; }
} 
```

我从 EntityBase 继承的所有实体在启动时都作为 KnownTypes 添加到服务中，还包括 VersionableEntityBase 实体。

现在当我创建一个对象

```
public class MyEntity : EntityBase
{
} 
```

并使用 GetEntityById 调用服务，在客户端中接收到继承的 Id 就好了。

但是，如果我创建以下内容：

```
public class MyVersionableEntity : VersionableEntityBase 
{
} 
```

并从 GetEntityById() 方法返回相同的实体，我的版本字段在客户端收到时变为空。不知何故，WCF 没有看到 MyVersionableEntity 从中间的 VersionableEntityBase 继承，因此它跳过了 Version 字段。

不幸的是，我无法更改 GetEntityById 方法以返回 VersionableEntityBase，因为并非每个实体都需要版本控制功能。

**如何告诉 WCF 序列化程序从 GetEntityById 方法返回的实体也是 VersionableEntityBase 类型，而不仅仅是 EntityBase？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:36:13.320

从 中删除`protected`修饰符`Version.set`。WCF 序列化程序无法访问它。

```
public abstract class VersionableEntityBase : EntityBase
{
    public virtual int Version { get; set; }
} 
```

# html - 怎么粘 页面底部的元素（HTML5 和 CSS3）？

> ID：15976245
> 
> 赞同：20
> 
> 时间：2013-04-12T16:16:51.210
> 
> 标签：html, css, coding-style, styles, footer

当我使用没有内容的**相对**位置时，页脚上升，**绝对**有很多内容，页脚下降，并且**固定**它总是在那里。

有没有一种简单的方法可以在页面末尾独立于内容，随内容缩小和增长？

当内容很多时，我们可以在第一页看到页脚，当内容很少时，我们会在底部看到。

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        html,body {
            padding: 0;
            margin: 0;
        }

        header {
            position:fixed;
            top:0;
            width:100%;
            height:40px;
            background-color:#333;
            padding:20px;
        }

        footer {
            background-color: #333;
            width: 100%;
            bottom: 0;
            position: relative;
        }
        #main{
            padding-top:100px;
            text-align:center;
        }
  </style>
</head>
<body>
    <header>
    header
    </header>

    <div id="main">
    main
    </div>

    <footer>
    footer
    </footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-12T16:20:13.620

对于页脚更改`position: relative;`从`position:fixed;`

```
 footer {
            background-color: #333;
            width: 100%;
            bottom: 0;
            position: fixed;
        } 
```

示例：http: [//jsfiddle.net/a6RBm/](http://jsfiddle.net/a6RBm/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-25T11:54:01.593

这是一个使用 css3 的示例：

**CSS：**

```
html, body {
    height: 100%;
    margin: 0;
}
#wrap {
    padding: 10px;
    min-height: -webkit-calc(100% - 100px);     /* Chrome */
    min-height: -moz-calc(100% - 100px);     /* Firefox */
    min-height: calc(100% - 100px);     /* native */
}
.footer {
    position: relative;
    clear:both;
} 
```

**HTML：**

```
<div id="wrap">
    body content....
</div>
<footer class="footer">
    footer content....
</footer> 
```

[jsfiddle](http://jsfiddle.net/vcarvalho/637j2cfw/2/)

**更新**
正如@Martin 所指出的，'position: relative' 在`.footer`元素上不是强制性的，对于`clear:both`. 这些属性仅作为示例。因此，将页脚粘贴在底部所需的最小 css 应该是：

```
html, body {
    height: 100%;
    margin: 0;
}
#wrap {
    min-height: -webkit-calc(100% - 100px);     /* Chrome */
    min-height: -moz-calc(100% - 100px);     /* Firefox */
    min-height: calc(100% - 100px);     /* native */
} 
```

* * *

此外，css-tricks 上有一篇出色的文章展示了不同的方法：[https ://css-tricks.com/couple-takes-sticky-footer/](https://css-tricks.com/couple-takes-sticky-footer/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-05T20:16:16.780

我会在 HTML 5 中使用它...只是说

```
#footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 60px;
  background-color: #f5f5f5;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:19:48.883

只是设置`position: fixed`为页脚元素（而不是相对）

[Jsbin 示例](http://jsbin.com/aloqad/2/)

请注意，您可能还需要将 a 设置`margin-bottom`为`main`至少等于页脚元素高度的元素（例如`margin-bottom: 1.5em;`），否则，在某些情况下，主要内容的底部区域可能会与页脚部分重叠

# ssl - 充当 SSL 客户端的 WebSphere 服务器能否在握手期间提供其证书列表？

> ID：15976251
> 
> 赞同：3
> 
> 时间：2013-04-12T16:17:07.227
> 
> 标签：ssl, client, websphere, handshake

我知道在 WebSphere Security 中，在 SSL 配置 -> QOS 设置下 - 我可以将客户端身份验证设置为“必需”。这意味着在 SSL 握手期间，客户端应该通过向服务器显示证书链列表来验证自己。如果服务器也信任其中一个证书，则握手将继续进行。

我的情况与此完全相反。

我的 Websphere 服务器充当客户端（向另一台服务器发送 SOAP 请求）。但另一台服务器也将客户端身份验证设置为 true。在尝试调试握手时，我发现我的 Websphere 服务器在步骤 ServerHello Done 之后没有提供证书列表。

Websphere 中是否有任何配置可以用来执行此操作？

这是握手的要点：

```
Server A                    WebSphere serer(client)

                            *** ClientHello, TLSv1

*** ServerHello, TLSv1
*** Certificate chain
*** CertificateRequest
*** ServerHelloDone
[write back to client]

                            *** Certificate chain
                            [empty]

[At server A] javax.net.ssl.SSLHandshakeException: null cert chain 
```

# html - 使用 :before 和 sprite 背景图像

> ID：15976255
> 
> 赞同：0
> 
> 时间：2013-04-12T16:17:20.417
> 
> 标签：html, css, background-image, pseudo-element

尝试使用`:before`跨度在主要内容的边缘添加背景图像。

基本上应该是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/i2yVT.png)

我将三角形作为背景图像，但似乎无法使其正确放置或根本无法显示。

见 JS 小提琴：

[http://jsfiddle.net/Y6rMs/1/](http://jsfiddle.net/Y6rMs/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:26:19.980

如果你愿意，你可以在没有图像的情况下做到这一点

[http://jsfiddle.net/Y6rMs/26/](http://jsfiddle.net/Y6rMs/26/)

```
#bottomWide span.ribbon:before {
    content: "";
    width: 0; 
    height: 0; 
    position: absolute;
        top:0;
        left: -40px;
    border-top: 20px solid transparent; 
    border-right: 40px solid #0099ff; 
    border-bottom: 20px solid transparent;
} 
```

这是您可以使用 css 创建的其他一些形状的列表 [http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:27:41.093

这里是
[jsfiddle.net/trajce/Y6rMs/27/](http://jsfiddle.net/trajce/Y6rMs/27/)

```
#bottomWide span.ribbon{
    position:relative;
    background-color:#C1C976;
    padding:5px 2%;
    float:right; 
}
#bottomWide span.ribbon:before{
    content:'';
    height:38px;
    width:25px;
    background-image:url(http://i.imgur.com/7nrYgTn.png);
    background-position:center left; <-
    background-repeat:no-repeat;
    position:absolute; 
    top:0;
    left:-30px; <- just play with this values a bit
    height:40px; <-
    width:30px; <-
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:22:27.460

I got it to [show up here](http://jsfiddle.net/watson/Y6rMs/5/), I think you can get the rest... I added `display: block;` and removed your background-position rule.

# sql - 如何返回调用不同数据库中存储过程的远程数据库名称？

> ID：15976257
> 
> 赞同：6
> 
> 时间：2013-04-12T16:17:27.140
> 
> 标签：sql, sql-server, stored-procedures

我在一个 SQL Server 2008 R2 上有许多不同的数据库。为了论证起见，我们称它们为 DB_A、DB_B 和 DB_C。我被要求开发为存储在 DB_A 上的存储过程。此存储过程将用于删除和创建索引，并将有关索引的一些额外信息存储在 DB_A 上的表中。当从 DB_C 或 DB_C 调用此存储过程时，它将能够在调用数据库上删除和创建索引，但将有关索引的额外信息存储在 DB_A 上的表中。

这就是我想做的事情：我希望存储的过程能够获得调用数据库的名称，而不必请求数据库名称作为参数。

这是一个简单的例子：

```
USE [DB_A]

CREATE PROC sp_WhatDatabaseAmICallingFrom
AS 
BEGIN
      DECLARE @calling_db NVARCHAR(128)
      SET @calling_db = DB_NAME()
      PRINT 'calling database: ' + @calling_db
END 
```

当我在 DB_A 中执行存储过程时...

```
EXEC sp_WhatDatabaseAmICallingFrom 
```

...它返回：“**调用数据库：DB_A** ”

当我在 DB_B 中执行存储过程...

```
USE DB_B
GO

EXEC DB_A.dbo.sp_WhatDatabaseAmICallingFrom 
```

...它返回：“**调用数据库：DB_A** ”。

在阅读了各种 SQL Server 元数据函数之后，这正是它应该做的。但我想要更改代码，以便将 @calling_db 设置为调用数据库的名称，以便我的示例存储过程将打印：“**调用数据库：DB_B** ”。

不幸的是，我找不到任何可以做到这一点的元数据函数。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T12:28:46.967

要使 SP 在当前连接的上下文中运行，您需要在`master`数据库上创建 SP*并*使其成为系统对象。

```
USE MASTER 
GO 

CREATE PROC sp_WhatDatabaseAmICallingFrom
AS 
BEGIN
      DECLARE @calling_db NVARCHAR(128)
      SET @calling_db = DB_NAME()
      PRINT 'calling database: ' + @calling_db
END
GO

EXEC sp_ms_marksystemobject 'sp_WhatDatabaseAmICallingFrom'
GO 
```

检查它是如何工作的：

```
USE [DB_A]
GO

EXEC sp_WhatDatabaseAmICallingFrom
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-02T14:10:11.057

我知道这个线程已经很老了，但我发现了一些至少对我有帮助的东西。

如果您使用 DB_A 并在 DB_B 中调用存储过程，例如：

```
USE DB_A
EXEC db_b.dbo.sproc 
```

我发现获取“调用数据库”ID 的唯一方法是在存储过程中对 sys.dm_tran_locks 运行选择。request_session_id 应该是您的 spid，resource_type 应该是 DATABASE，request_owner_type 应该是 SHARED_TRANSACTION_WORKSPACE。对于每个连接的会话，数据库上始终存在这样的共享锁。查询将类似于：

```
SELECT resource_database_id FROM sys.dm_tran_locks WHERE request_session_id = @@SPID and resource_type = 'DATABASE' and request_owner_type = 'SHARED_TRANSACTION_WORKSPACE' 
```

尽管这要求执行用户至少具有服务器上的 VIEW SERVER STATE 权限。就我而言，这不是问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-22T20:24:05.353

基于 Mike 的回答，这是一个适用于 Sql2012 的解决方案示例。

您必须在以具有足够权限（'VIEW SERVER STATE'）的用户身份登录时创建该函数，但使用该函数的人只需要执行该函数本身的权限。

```
USE [DB_A];
GO

CREATE FUNCTION dbo.GetCallingDbCatName()
RETURNS nvarchar(128) 
WITH EXECUTE AS SELF
AS
BEGIN
    DECLARE @result nvarchar(128);
    SELECT TOP 1 @result = DB_NAME(resource_database_id) 
        FROM sys.dm_tran_locks 
        WHERE request_session_id = @@SPID 
            AND resource_type = 'DATABASE' 
            AND request_owner_type = 'SHARED_TRANSACTION_WORKSPACE' 
        ORDER BY IIF(resource_database_id != DB_ID(), 0, 1);
    RETURN @result;
END
GO

USE [DB_A];
SELECT DB_A.dbo.GetCallingDbCatName(); --"DB_A"
USE [DB_B];
SELECT DB_A.dbo.GetCallingDbCatName(); --"DB_B"
USE [DB_C];
SELECT DB_A.dbo.GetCallingDbCatName(); --"DB_C" 
```

从那里，您应该能够构建您需要的实际功能，而无需污染*主*dbcat。

**编辑 2019-07-26** - 仅供参考：这是有效的，因为除了*master*或*tempdb之外的***每个**dbcat 连接（或使用）都将具有 SHARED_TRANSACTION_WORKSPACE 锁。[下面的解释来自这个页面](https://mysqlpages.blogspot.com/2018/03/lock-types.html?m=1) （和[另一个类似解释](https://www.sqlservercentral.com/forums/topic/definitions-needed-transaction-workspace-latches)的页面）

 **> SHARED_TRANSACTION_WORKSPACE 锁所有者的目的是防止 SQL Server 获取 EXCLUSIVE_TRANSACTION_WORKSPACE 锁，即防止进程在数据库正在使用时删除、恢复或更改数据库的可读性状态。SQL Server 没有为 master 和 tempdb 数据库获取这些锁的原因是这些数据库不能被删除，或者它们的可读性状态被改变。此外，我们从不恢复 tempdb，要恢复 master 数据库，我们必须以单用户模式启动整个服务器，因此，SHARED_TRANSACTION_WORKSPACE 锁是不必要的。

因此，当您从 DB_B 调用位于 DB_A 中的函数时，该查询返回 2 行；一种用于运行查询的 DB_B，另一种用于运行/存在函数的 DB_A。这也意味着上述查询不适用于更复杂的调用堆栈（DB_A 在 DB_B 中调用 func，然后在 DB_C 中调用 func 来尝试确定调用者的 dbcat；ORDER BY 将无法在 DB_A 和DB_B。）

最后，此解决方案也适用于 CLR 方法。一定要记得执行“包装器”Sql函数有足够的使用权限`db_tran_locks`，`SqlFunction`属性必须有“SystemDataAccess = SystemDataAccessKind.Read”。“上下文连接”使用与调用者相同的 SPID，它位于程序集所在的 dbcat 中（因此，包装函数/存储过程所在的位置暴露了 CLR 方法。）

作为参考，这是我的测试 CLR 方法：

```
[SqlFunction(IsDeterministic = false, DataAccess = DataAccessKind.Read, SystemDataAccess = SystemDataAccessKind.Read), SqlMethod(OnNullCall = true)]
public static SqlString GetCallingDbcatName()
{
    string sqlResult = "";
    using (var connection = new System.Data.SqlClient.SqlConnection("context connection=true"))
    {
        connection.Open();
        var sqlCmd = connection.CreateCommand();
        sqlCmd.CommandText = @"
SELECT TOP 1 DB_NAME(resource_database_id) 
  FROM sys.dm_tran_locks
  WHERE request_session_id = @@SPID
    AND resource_type = 'DATABASE'
    AND request_owner_type = 'SHARED_TRANSACTION_WORKSPACE'
  ORDER BY IIF(resource_database_id != DB_ID(), 0, 1); ";
        sqlResult = sqlCmd.ExecuteScalar().ToString();
    }
    return sqlResult;
} 
```**

# c - 如何阻止 pthread 从 main 打印全局变量，然后继续 pthread？

> ID：15976263
> 
> 赞同：1
> 
> 时间：2013-04-12T16:17:49.823
> 
> 标签：c, multithreading, pthreads, mutex, semaphore

我有一个创建 pthread 的主函数。我正在尝试使用信号量在有选择的时间打印一个全局变量（注意-mutex、s1、s2 和 memoryUsed 都全局声明）：

```
int main(int argc, const char * argv[])
{
    pthread_mutex_init(&mutex, NULL);
    sem_init(&s1, 0, 0);
    sem_init(&s2, 0, 0);

    pthread_t t0;
    pthread_create(&t0, NULL, &matrix_management, NULL);

    sem_wait(&s1); // wait for signal from pthread
    printf("Memory Usage from main: %d bytes\n\n", memoryUsed); // global var
    sem_post(&s2); // signal pthread to continue

    pthread_join(t0, NULL);
    sem_destroy(&s1);
    sem_destroy(&s2);
    pthread_mutex_destroy(&mutex);
    return 0;
} 
```

在我的目标函数中，我想停在一个选择点并从 main 打印一个全局变量。请注意，变量在目标函数中已更改。打印后，我想继续目标功能：

```
void *matrix_management(void *len)
{
    pthread_mutex_lock(&mutex);

    // CHANGE GLOBAL VAR
    memoryUsed = 1;

    sem_post(&s1); // print from main
    sem_wait(&s2); // wait for signal

    // continue thread...

    pthread_mutex_unlock(&mutex);
    return NULL;
} 
```

但是，主线程似乎根本没有等待来自 pthread 的信号。它立即打印其全局变量的值。如果我注释掉 pthread 中的信号，程序就不会死锁。你能像这样在主线程和 pthread 之间使用信号量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:56:22.367

根据您的平台，可能不支持未命名的信号量。在这种情况下，以下内容将起作用，尽管您可能希望创建临时名称并稍后将它们用于取消链接。我熟悉这一点的唯一原因是因为我通常使用的平台 OS X 不支持 10.8.3 之前的未命名信号量，因此无错误检查我在你的代码中看到了类似的行为，因为所有信号量 API 失败。

希望能帮助到你。

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <semaphore.h>
#include <assert.h>

sem_t* s1=NULL, *s2=NULL;
int memoryUsed = 0;

void *matrix_management(void *len)
{
    // CHANGE GLOBAL VAR
    memoryUsed = 1;

    sem_post(s1); // print from main
    sem_wait(s2); // wait for signal
    printf("Thread woken up.\n");

    // continue thread...
    return NULL;
}

int main(int argc, const char * argv[])
{
    s1 = sem_open("s1", O_CREAT, S_IRUSR | S_IWUSR, 0);
    s2 = sem_open("s2", O_CREAT, S_IRUSR | S_IWUSR, 0);
    assert(s1 && s2 && "Failed to allocate semaphores.");

    pthread_t t0;
    pthread_create(&t0, NULL, &matrix_management, NULL);

    sem_wait(s1); // wait for signal from pthread
    printf("Memory Usage from main: %d bytes.\n", memoryUsed); // global var

    printf("Waking thread...\n"); // global var
    sem_post(s2); // signal pthread to continue

    pthread_join(t0, NULL);
    printf("Thread finished\n");
    sem_close(s1);
    sem_close(s2);
    sem_unlink("s1");
    sem_unlink("s2");
    return 0;
} 
```

**输出**

```
Memory Usage from main: 1 bytes.
Waking thread...
Thread woken up.
Thread finished 
```

# logfile - 有没有办法在 httperf 中保存请求日志

> ID：15976264
> 
> 赞同：1
> 
> 时间：2013-04-12T16:17:54.763
> 
> 标签：logfile, httperf

我正在使用 httperf 进行测试，并且正在尝试监视请求的单个响应时间。测试结束时给出的结果对我不起作用，而且太近似了。我正在考虑研究单一响应时间并分析这些响应时间的分布。我是否缺少任何内置功能或可能的解决方法？

# c# - 使用 SetValue 时未创建注册表项

> ID：15976267
> 
> 赞同：2
> 
> 时间：2013-04-12T16:18:08.527
> 
> 标签：c#, registry

我正在编写的程序使用许多注册表项来存储一些重要信息。为了确保所有注册表项都存在于我的程序的第一种方法中，我测试注册表项是否存在，如果不存在默认值则创建它们。

这是我的代码：

```
 RegistryKey RK = Registry.LocalMachine.OpenSubKey("Software");

        if (RK.OpenSubKey("NR") == null)
            RK.CreateSubKey("NR");
        RK = RK.OpenSubKey("NR");

        if (RK.OpenSubKey("P") == null)
            RK.CreateSubKey("P");
        RK = RK.OpenSubKey("P");

        if (RK.GetValue("BP") == null)
            RK.SetValue("BP", "B{1}-{0}"); 
```

问题是，即使我在没有这些密钥的计算机上运行它，它们也不会被创建。该程序设置为始终以管理员身份运行，并且在 Windows XP 计算机上运行。所以使用上面的代码 SubKey NR\P 存在但 BP 不存在，运行此代码后 BP 仍然不存在。任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:41:12.393

RK 必须以写访问权限打开：

```
RK = RK.OpenSubKey("P",true); 
```

没有第二个参数，它是只读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:37:51.293

调用 SetValue 时，需要使用正确的[OpenSubKey](http://msdn.microsoft.com/en-gb/library/xthy8s8d.aspx)方法打开要写入的密钥。

# android - 无法在 android 4.2.2 上使用谷歌地图 v1

> ID：15976270
> 
> 赞同：1
> 
> 时间：2013-04-12T16:18:11.690
> 
> 标签：android, google-maps

我正在使用谷歌地图 api v1 制作应用程序。该程序在我的 4.0.4 Android 手机上运行良好。但是今天将我的手机更新到 Android 4.2.2 后，我的应用程序不再运行。它抛出一个 IllegalStateException: Null Bitmap！在 MapView.drawMap()。好像没有 loading_tile_android.png 文件。我真的很困惑。搜索了很多，但我发现没有任何帮助。

logcat 看起来像这样：

```
11-01 17:00:08.238: ERROR/MapView(8971): IllegalStateException on drawMap. Wiping cache.
11-01 17:00:08.238: ERROR/MapView(8971): java.lang.IllegalStateException: Null Bitmap! "loading_tile"; if seen during a test, this usually means that the image file needs to be added to the test.config file
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.common.graphics.android.AndroidImage.<init>(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.common.graphics.android.AndroidImageFactory.createImage(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.googlenav.map.MapTile.createTempImages(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.googlenav.map.MapTile.getTempImage(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.googlenav.map.MapTile.getImage(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.googlenav.map.Map.drawTile(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.googlenav.map.Map.drawMapBackground(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.googlenav.map.Map.drawMap(Unknown Source)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.android.maps.MapView.drawMap(MapView.java:1048)
11-01 17:00:08.238: ERROR/MapView(8971):     at com.google.android.maps.MapView.onDraw(MapView.java:486)
11-01 17:00:08.238: ERROR/MapView(8971):     at android.view.View.draw(View.java:6535) 
```

# objective-c - 如何告诉用户更改了可可控件上的值

> ID：15976271
> 
> 赞同：0
> 
> 时间：2013-04-12T16:18:12.390
> 
> 标签：objective-c, macos, cocoa

我有一个包含一堆 NSTextFields、日期选择器和一个 NSPopupButton 的表单。只有当用户更改了这些控件的值时，我才想提供保存功能。那么如何追踪可可的变化呢？我曾想过使用 Key Value Observing 分析每个控件的值属性，但是它会触发以编程方式分配的值（例如默认值）的通知。那么任何想法如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:44:25.157

对于您的文本字段，将您的窗口或视图控制器设置为字段的委托，然后在`-controlTextDidChange:`其中实现并启用保存。如果您需要根据编辑的文本字段采取不同的操作，您可以从传入的通知对象中检索它。

NSPopupButtons 是按钮，所以它们使用 target:action 模式。在控制器中实现 IBAction 方法，然后将弹出按钮连接到它。如果您对每个弹出按钮执行相同的操作（例如，只需启用保存按钮和/或菜单项），您可以对多个弹出按钮使用相同的操作方法。

在为控件设置默认值时，您可能仍会收到虚假通知，具体取决于您的操作方式。如果是这样，只需将 BOOL 属性添加到您的控制器，称为`changeTrackingDisabled`或类似。设置默认值（或恢复到上次保存的状态）时将其设置为 YES，完成后将其设置回 NO。然后在每个注意到更改的方法中，检查该属性的状态。

我个人觉得在这种情况下使用委托和动作是比 KVO 更有效的方法。KVO 的 API[有一些不足](http://www.mikeash.com/pyblog/key-value-observing-done-right.html)之处，并且往往会增加组件之间的耦合，因为您必须使用字符串对您希望观察的所有属性的路径进行静态编码。[这篇博客文章](http://blog.shinetech.com/2011/06/14/delegation-notification-and-observation/)对优缺点进行了很好的深入讨论。

# yii - Yii validation rules for min value or empty

> ID：15976278
> 
> 赞同：2
> 
> 时间：2013-04-12T16:18:44.623
> 
> 标签：yii

I want to add a rule where user can post empty value, or integer value shoud be in range min-max. Is this possible without custom rules?

So, if min is 5 and max is 10, user could post values: empty, 5,6,7,8,9 or 10.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:31:57.740

您可以通过将其设置为、和来尝试使用[数字](http://www.yiiframework.com/wiki/56/#hh16)验证器。`min``5``max``10``allowEmpty``integerOnly``true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T08:33:09.503

尝试这个 -

```
public function rules() {
        return array(
            array('test', 'safe'),
            array('test', 'length', 'min' => 5, 'max'=>10, 
            'tooShort'=>Yii::t("translation", "{attribute} to short."),
            'tooLong'=>Yii::t("translation", "{attribute} to long.")),

            array('test', 'match', 'pattern'=>'/^[0-9]+$/'), 
        );
    } 
```

# c# - Use C# request web service with header and body

> ID：15976280
> 
> 赞同：1
> 
> 时间：2013-04-12T16:18:47.520
> 
> 标签：c#, android, google-cloud-messaging

I am using GMC to send a message to an Android phone from C#.

link: [https://android.googleapis.com/gcm/send](https://android.googleapis.com/gcm/send)

Method: POST

Header:

```
Authorization: key=AIzaSyCPNaU7Pn6csAKxXQHJXSprwWjO0JWaFsw 
```

Body:

```
{
    "registration_ids": [
        "APA91bEzrLAiphAldxy6lSpSO503YaNm7CCng5uLzGRFWw93dwQIKfisdioyTY2Y0AyJrV81DHd8afBvmOi_KWgMcQKLFwCXJR8vLzuu2_nijBBu9kXRmcBDAGdwTMq9PQ5QPRWDcHh3PGFViTs4lC2DysiRLykASvV25ivY7Vwl_EvNZgcnqkmDM"
    ],
    "data": {
        "price": "Nguyễn Anh Quế. hehe"
    }
} 
```

I have tried it from web with success but in C# I don't know how to do it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:56:07.303

像这样：

```
string postData = "{ \"registration_ids\": [ \"APA91bEzrLAiphAldxy6lSpSO503YaNm7CCng5uLzGRFWw93dwQIKfisdioyTY2Y0AyJrV81DHd8afBvmOi_KWgMcQKLFwCXJR8vLzuu2_nijBBu9kXRmcBDAGdwTMq9PQ5QPRWDcHh3PGFViTs4lC2DysiRLykASvV25ivY7Vwl_EvNZgcnqkmDM\" ], \"data\": { \"price\": \"Nguyễn Anh Quế. hehe\" } }";

var request = (HttpWebClient)WebClient.Request("https://android.googleapis.com/gcm/send");
request.Method="POST";
request.ContentType = "application/x-www-form-urlencoded";
byte[] byteArray = Encoding.UTF8.GetBytes (postData);
request.ContentLength = byteArray.Length;
Stream dataStream = request.GetRequestStream ();
dataStream.Write (byteArray, 0, byteArray.Length);
dataStream.Close ();
var response = (HttpWebRequest)request.GetResponse ();
// response contains the response 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:30:38.790

```
string postData = "{ \"registration_ids\": [ \"APA91bEzrLAiphAldxy6lSpSO503YaNm7CCng5uLzGRFWw93dwQIKfisdioyTY2Y0AyJrV81DHd8afBvmOi_KWgMcQKLFwCXJR8vLzuu2_nijBBu9kXRmcBDAGdwTMq9PQ5QPRWDcHh3PGFViTs4lC2DysiRLykASvV25ivY7Vwl_EvNZgcnqkmDM\" ], \"data\": { \"price\": \"Nguyễn Anh Quế. hehe\" } }";

        var request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");
        request.Method = "POST";
        request.Headers.Add("Authorization: key=AIzaSyCPNaU7Pn6csAKxXQHJXSprwWjO0JWaFsw");
        request.ContentType = "application/json";
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        request.ContentLength = byteArray.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();
        var response = request.GetResponse(); 
```

# node.js - Difference between http connection request and socket.io connection

> ID：15976284
> 
> 赞同：2
> 
> 时间：2013-04-12T16:18:56.020
> 
> 标签：node.js, socket.io

All:

I am new to node.js and socket.io, and have no idea about how the protocol works. But I am learning.

I got a beginner question about socket.io,if I got code from some tutorial like:

```
var http = require('http');
var fs = require('fs');

var app = http.createServer(
        function(request, response){
            console.log("New Connection!");
            fs.readFile(
                "client.html","utf-8", 
                function(err, data){
                    response.writeHead(200, {'Content-Type':'text/html'});
                    response.write(data);
                    response.end();
                }
            );
        }
).listen(1337);

var io = require('socket.io').listen(app);

io.sockets.on(
            'connection',
            function( socket ){
                socket.on(
                        'message_to_server',
                        function(data){
                        io.sockets.emit('message_to_client',{message: data['message']});
                        }
                );
            }
); 
```

My question is can someone tells me how this code works? What I am confused is:

It seems like the socket.io just wraps the app,sending and receiving event message and doing callback. But I wonder why those action will not triger app's request event, I put console.log("New Connection!"); inside that callback, and it only displays when I input the server address and press enter in browser, but when I press the send button, it will not display anything?

Here is my client code:

```
<!DOCTYPE html>

<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            // Out client code here.
            var socketio = io.connect("192.168.1.150:1337");
            socketio.on(
                    'message_to_client',
                    function(data){
                        document.getElementById("chatlog")
                        .innerHTML=
                        ("<hr/>"+data['message']+document.getElementById("chatlog").innerHTML);
                    }
            );

            function sendMessage(){
                var msg = document.getElementById("message_input").value;
                if(msg!=""){
                    socketio.emit("message_to_server", {message:msg});
                }
            }
        </script>
    </head>
    <body>
        <input type="text" id="message_input" />
        <button onclick="sendMessage()">SEND</button>
        <div id="chatlog"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:27:05.223

在您的代码`app`中是一个 http 服务器，并且`io`是一个 websocket 服务器。如您所知，http 服务器服务于 http 请求，而 websocket 服务器使用 websocket 协议。检查[维基](http://en.wikipedia.org/wiki/WebSocket)。

*   http:// 是 http 协议， https:// 是 http 安全协议
*   ws:// 是 web socket 协议， wss:// 是 web socket 安全协议

这是做什么的

```
var app = http.createServer(
    function(request, response){
        console.log("New Connection!"); 
```

它启动一个 http 服务器并在每个 http 请求上执行给定的函数。对您来说，它会打印`New Connection`并发送 client.html。

这是做什么的

```
var io = require('socket.io').listen(app); 
```

它告诉套接字服务器挂钩到 http 服务器。它在与 http/https 服务器相同的地址和端口上侦听 websocket 连接。

这是做什么的

```
var socketio = io.connect("192.168.1.150:1337"); 
```

在 192.168.1.150:1337 连接到 websocket 服务器并使用套接字进行通信。您说单击发送时没有任何显示，您使用的地址是否正确？试试这个，它会自动获取地址（正在使用）：

```
var socketio = io.connect(""); 
```

# javascript - 使用 JavaScript 关闭子页面时刷新父页面

> ID：15976285
> 
> 赞同：0
> 
> 时间：2013-04-12T16:19:01.740
> 
> 标签：javascript

我在主页面的子页面弹出窗口中调用了以下函数。功能：

```
function getBenefitEdit(bfn_benefit, bfn_benefit_id, bfn_std_max_days, bfn_std_pcy_wait_days){
    document.forms[0].std_benefit_nm_policy_chg.value = bfn_benefit;
    document.forms[0].std_benefit_id_policy_chg.value = bfn_benefit_id;
    document.forms[0].std_max_days_policy_chg.value = bfn_std_max_days;
    document.forms[0].std_pcy_wait_days_policy_chg.value = bfn_std_pcy_wait_days;  
          document.forms[0].action = "nwrGetBenefitSTD.do";            
          document.forms[0].submit();
          window.opener.location.href = window.opener.location.href;
          window.close(); 
        } 
```

我试图让新页面更新父页面，然后在关闭父页面时刷新父页面。不幸的是，虽然这在 FireFox 中有效，但在 IE 中却失败了。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:43:39.063

我不知道为什么它在 IE 中不起作用，但你可以改用它：

```
window.opener.location.reload(); 
```

[更新] 您还可以将重新加载附加到[onsubmit](https://developer.mozilla.org/en-US/docs/DOM/window.onsubmit)事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:07:17.480

尝试按以下顺序调用末尾的几行：

```
window.opener.location.href = window.opener.location.href;
document.forms[0].submit();
window.close(); 
```

我猜想在 IE 中（或任何它不能工作的浏览器），当表单被提交（页面被留下）时，它不会允许与开启者通信。

# c - 如何将 nlink_t 与 int 进行比较

> ID：15976290
> 
> 赞同：4
> 
> 时间：2013-04-12T16:19:22.160
> 
> 标签：c, file, parsing, variables

我`stat`在 Linux 上使用系统调用并检索文件信息。

```
char *parent_dir; // for example: /run/atd.pid/
struct stat buf;
stat(parent_dir, &buf); 
```

**buf**结构类型：

```
struct stat {
               dev_t     st_dev;     /* ID of device containing file */
               ino_t     st_ino;     /* inode number */
               mode_t    st_mode;    /* protection */
               nlink_t   st_nlink;   /* number of hard links */
               uid_t     st_uid;     /* user ID of owner */
               gid_t     st_gid;     /* group ID of owner */
               dev_t     st_rdev;    /* device ID (if special file) */
               off_t     st_size;    /* total size, in bytes */
               blksize_t st_blksize; /* blocksize for file system I/O */
               blkcnt_t  st_blocks;  /* number of 512B blocks allocated */
               time_t    st_atime;   /* time of last access */
               time_t    st_mtime;   /* time of last modification */
               time_t    st_ctime;   /* time of last status change */
           }; 
```

我得到这样的硬链接数量：`buf.st_nlink`.

我的问题是我无法将硬链接的数量与整数值进行比较。我试图初始化另一个**nlink_t**，然后将我的变量与`stat`变量进行比较，但它不起作用。我也试过这个[链接](https://stackoverflow.com/questions/1401526/use-printf-to-display-off-t-nlink-t-size-t-and-others)。

**将nlink_t 转换**为**int**的替代方法，但它不起作用。总是返回相同的数字。

```
int
parse_to_int(nlink_t *source)
{
  int buffer_size = sizeof(*source);
  char buffer[buffer_size];
  snprintf(&buffer[0], buffer_size, "%lu", (unsigned long)source);
  int val = atoi(buffer);
  return val;
} 
```

任何想法？

使用`parse_to_int`函数时的程序输出：

```
get stat for: /run/nm-dhclient-wlan0.conf/ 
nlink_t: 321
get stat for: /run/wpa_supplicant/ 
nlink_t: 321
get stat for: /run/udisks2/ 
nlink_t: 321
get stat for: /run/nm-dns-dnsmasq.conf/ 
nlink_t: 321
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:09:14.983

`nlink_t`是 typedef'd 作为整数类型（例如，`unsigned short`或`unsigned int`），因此您应该能够强制`stat.st_nlink`转换为一个`unsigned`或`unsigned long`没有编译器抱怨。

您的`parse_to_int()`函数不正确，因为您将指针 ( `nlink_t*`) 转换为`unsigned int`，而不是`nlink_t`变量的值。但是您不需要该功能，只需正确使用强制转换即可。

**附录**

还要确保您没有将*无符号*类型与进行比较`-1`，这会给您带来意想不到的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:07:39.813

所以我有几个问题：

1.  `stat`如果路径以结尾，则无法从文件中获取`/`
2.  您计算机的文件夹列表中有一些文件夹是由您的操作系统创建的。内存中的某种数据，解释为文件夹和文件（称为[虚拟文件系统](http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html)）。所以如果你试图`i-node`从这种文件中获取数字，你会得到一些垃圾值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:11:38.843

您应该能够与 uint 进行比较。如果您有超过 64k 的硬链接，我会感到惊讶。

试图根据 nlink_t 的长度来猜测打印 nlink_t 的字符串表示所需的大小是一个错误。nlink_t 可能是 8 个字节，但 4000000000 是超过 8 个字节的数字打印出来的。

找到正确大小的正确方法是检查 snprintf 的返回值，它会告诉您实际需要多大的缓冲区（或者您可以平底船并分配大于 8 的东西。 sizeof(*source) 不是固体溶液。

```
int size = snprintf(NULL, 0, "%lu", (unsigned long)source);
buffer = new chara[size + 1]; //+1 for a NULL
int size = snprintf(buffer, size, "%lu", (unsigned long)source); 
```

此外，除非您的文件系统发生变化，否则硬链接的数量应该是一致的。看看输出

```
tmp]$ ls -ld /home/
drwxr-xr-x. 5 root root 4096 Feb  3  2012 /home/ 
```

所有者之前的数字是硬链接的数量，在本例中为 5。

# android - Android listview 项目使用数组适配器在图像上显示文本

> ID：15976292
> 
> 赞同：1
> 
> 时间：2013-04-12T16:19:24.960
> 
> 标签：android, listview, textview, imageview, android-arrayadapter

我已经重载了 listview 的 getView 方法来填充列表项的自定义样式。

这是现在的样子：！！

![在此处输入图像描述](https://i.stack.imgur.com/zyzu7.png)

*红色只是显示列表视图项的背景*

在这里，我使用了 3 个控件：用于图像的 Imageview、2 个文本视图（一个顶部，一个底部）。

这里的问题是列表视图项目的高度正在增加。我想要两个文本视图而不是高于或低于图像。在某种程度上我知道这个问题的根本原因，但不知道如何解决它。

这是列表视图项的布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp"   >

  <ImageView android:id="@+id/imgIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="5dp" 
    android:scaleType="fitCenter"/>

   <TextView android:id="@+id/txtTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="top"
    android:textStyle="bold"
    android:textSize="20sp"
    android:textColor="#FFFFFF"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="2dp"
    android:layout_alignLeft="@+id/imgIcon"
    android:layout_alignTop="@+id/imgIcon"
    android:layout_alignBottom="@+id/imgIcon"/>

   <TextView android:id="@+id/txtTime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:textStyle="bold"
    android:textSize="18sp"
    android:textColor="#FFFFFF"
    android:layout_marginLeft="10dp"
    android:layout_marginBottom="5dp"
    android:layout_alignLeft="@+id/imgIcon"
    android:layout_alignTop="@+id/imgIcon"
    android:layout_alignBottom="@+id/imgIcon"/> 
```

问题是我正在为 Imageview 使用 png 图像，并且它们的大小在某些纵横比中增加了。如果我对列表视图项布局的高度进行硬编码，特别是在我的手机屏幕尺寸上，事情开始看起来不错，但在某些不同的屏幕尺寸上情况变得更糟（这也是有道理的）。

![在此处输入图像描述](https://i.stack.imgur.com/9Dwed.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal" 
android:layout_width="fill_parent"
android:layout_height="70dp"
android:padding="5dp"   > 
```

如果有人可以解释如何做到这一点，那就太好了。主要问题是在图像上显示文本（并且图像不一样）。谢谢。

更新：我的主要问题是我没有图像的位向量，而是 PNG，它试图放大图像。（*将比例类型设置为 center-fit 可能是一个选项，但它是否适用于背景资源？*如果我将图像设置为列表视图项的背景并在其上设置两个文本，则输出如下。 ![在此处输入图像描述](https://i.stack.imgur.com/jiZys.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:34:36.800

如果您使用纯色作为背景，并且您打算支持各种屏幕尺寸，我认为在文本视图上使用背景颜色填充可能会更容易，文本视图堆叠和对齐以便有没有边界。然后它不会有任何堆叠问题（一个简单的线性布局就可以了）并且它可以在不处理图像的情况下进行扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:51:22.680

好的，在您的 CustomArrayAdaptor 中调用 getView() 时，不要将 ImageView 位图设置为您拥有的图像（我相信您当前正在做的事情），而是在您的视图上调用 View.setBackgroundResource(R.drawable.yourimage.png)在你充气之后。xml中的等价物如下：

android:background="@drawable/yourimage"。

如果您需要更多信息，请告诉我。

# apache-flex - 有没有办法检查 SWF 以查看它使用了哪些 RSL？

> ID：15976293
> 
> 赞同：1
> 
> 时间：2013-04-12T16:19:28.913
> 
> 标签：apache-flex, flash

我正在调查一个 Flex 应用程序的问题，该应用程序试图从意外的 URL 下载（至少）一个 Flex 框架 RSL。我无法重现该问题，但我对`mxmlc`构建配置中 RSL 规范的某些方面也有些不确定。

鉴于所有这些，能够检查列出 RSL 依赖项的 SWF 文件以准确了解存在哪些依赖项以及与之关联的 URL 将很有帮助。

有没有这样做的方法？我已经尝试过 Adob​​e 的 SWF Investigator，但我没有看到任何明显的地方调用了此类依赖项。（我猜它们是`mxmlc`由 Flash Player 生成的而不是本机生成的代码处理的，所以它们没有被列为 SWF 的属性？）

该应用程序是使用/反对 Flex 4.6，FWIW 构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:39:14.893

我还没有找到以自动化方式执行此操作的工具，但我发现通过研究 SWF 的反汇编版本很容易找到信息，可使用 Adob​​e 的[SWF 调查工具](http://labs.adobe.com/technologies/swfinvestigator/)。

为此，将指定 RSL 依赖项的 SWF 加载到 SWF 调查器中，然后在“SWF 反汇编程序”选项卡上查看反汇编代码（使用“使用文本视图打开...”按钮最容易弹出外部编辑器）。

RSL 依赖项在 SWF 函数的定义中指定`info()`，一个以如下内容开头的块：

```
 function info():Object /* disp_id=0 method_id=57 nameIndex = 75 */ 
```

跨域 RSL 依赖项在`cdRsls`属性中列出，其他在`rsls`属性中列出。这些列表填充了许多`RSLData`对象，并且很容易看到 RSLData 构造函数的参数被推入堆栈。例如，以下部分添加了两个可能的 URL 来检索 Flex 4.6“框架”库：

```
 13   findpropstrict  mx.core::RSLData //nameIndex = 6
   15   pushstring      "http://fpdownload.adobe.com/pub/swz/flex/4.6.0.23201/framework_4.6.0.23201.swz"
   18   pushstring      "http://fpdownload.adobe.com/pub/swz/crossdomain.xml"
   21   pushstring      "abd49354324081cebb8f60184cf5fee81f0f9298e64dbec968c96d68fe16c437"
   24   pushstring      "SHA-256"
   27   pushtrue        
   28   pushtrue        
   29   pushstring      "default"
   31   constructprop   mx.core::RSLData (7) //nameIndex = 6
   34   findpropstrict  mx.core::RSLData //nameIndex = 6
   36   pushstring      "framework_4.6.0.23201.swz"
   39   pushstring      ""
   41   pushstring      "abd49354324081cebb8f60184cf5fee81f0f9298e64dbec968c96d68fe16c437"
   44   pushstring      "SHA-256"
   47   pushtrue        
   48   pushtrue        
   49   pushstring      "default"
   51   constructprop   mx.core::RSLData (7) //nameIndex = 6
   54   newarray        [2] 
```

`newarray [2]`底部的行似乎表明它们代表同一文件的两个可能位置（即，后备 URL）。如果提供了单个 URL，则将创建一个 RSLData 对象和`newarray [1]`一行。

此代码对应于与 Flex SDK 捆绑在一起的标准 flex-config.xml 文件中的以下定义：

```
 <!-- Framework SWC -->
<runtime-shared-library-path>
    <path-element>libs/framework.swc</path-element>
    <rsl-url>http://fpdownload.adobe.com/pub/swz/flex/4.6.0.23201/framework_4.6.0.23201.swz</rsl-url>
    <policy-file-url>http://fpdownload.adobe.com/pub/swz/crossdomain.xml</policy-file-url>
    <rsl-url>framework_4.6.0.23201.swz</rsl-url>
    <policy-file-url></policy-file-url>
</runtime-shared-library-path> 
```

最后，作为参考，这里是 RSLData 类的构造函数的签名，看看值对应什么参数：

```
public function RSLData(rslURL:String = null, 
                        policyFileURL:String = null, 
                        digest:String = null, 
                        hashType:String = null, 
                        isSigned:Boolean = false, 
                        verifyDigest:Boolean = false,
                        applicationDomainTarget:String = "default") 
```

# jquery - jQuery 删除空的 td 单元格

> ID：15976295
> 
> 赞同：5
> 
> 时间：2013-04-12T16:19:42.550
> 
> 标签：jquery

我需要删除所有空的 td 单元格，我可以用 jQuery 做到这一点吗？

```
<td></td>

if(td == empty){
$("td").remove();
} 
```

我不确定如何写我想要做的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T16:24:09.950

这是要走的路：{伪类空}

```
$("td:empty").remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T16:20:57.990

删除所有空的 td

```
$('td').each(function() {
    if ($(this).html() == '') {
        $(this).remove();
    }
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T16:21:59.140

You can use `.each()`

```
$("td").each(function() {
    if ($(this).html() == "") {
        $(this).remove();
    }
} 
```

# xml - 在 XSLT 中，当有多个值时替换一个类值

> ID：15976297
> 
> 赞同：1
> 
> 时间：2013-04-12T16:19:45.850
> 
> 标签：xml, xslt, xslt-1.0

我正在处理应用于 HTML 文档的 XSL 转换。相关 HTML 示例：

```
<div class="row home-row">
    <p>Hello</p>
</div> 
```

我选择与以下 XSL 匹配的项目（运行良好）：

```
<xsl:template match="//*[contains(concat(' ', normalize-space(@class), ' '), ' row ')]" priority="1"> 
```

然后，如果我之前检查过的条件匹配，我将“row”替换为“row-fluid”，如下所示：

```
<xsl:variable name="original-row-class" select="string(@class)" />
<xsl:variable name="row-class">
                  <xsl:call-template name="replace">
                        <xsl:with-param name="text" select="$original-row-class" />    
                        <xsl:with-param name="replace" select="' row '" />
                        <xsl:with-param name="by" select="' row-fluid '" />
                    </xsl:call-template>
                </xsl:variable>
                <xsl:copy>
                    <xsl:attribute name="class"><xsl:value-of select="$row-class" /></xsl:attribute>
                    <xsl:apply-templates select="@*[local-name() != 'class']|node()[local-name() != 'class']"/>
                </xsl:copy> 
```

这也很有效，除了它将所有提到的“row”替换为“row-fluid”，即使它们在“home-row”内。我想做的是将“行”类更改为“行流体”，但这样做时忽略“主行”类。这可能吗？

我应该提到我被锁定在 XSLT 1.0 中。

**更新**：在下面添加替换模板（早该想到的！）：

```
<xsl:template name="replace">
    <xsl:param name="text" />
    <xsl:param name="replace" />
    <xsl:param name="by" />
    <xsl:choose>
      <xsl:when test="contains($text, $replace)">
        <xsl:value-of select="substring-before($text,$replace)" />
        <xsl:value-of select="$by" />
        <xsl:call-template name="replace">
          <xsl:with-param name="text" select="substring-after($text,$replace)" />
          <xsl:with-param name="replace" select="$replace" />
          <xsl:with-param name="by" select="$by" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text" />
      </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

谢谢，乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:17:36.703

我认为您必须使用递归模板调用将类字符串拆分为单词。 [例如](https://stackoverflow.com/a/15953621/)。并比较/替换每个单词。

好的，这是一个基于递归方法的解决方案。

```
 <xsl:template match="test" >
            <xsl:variable name ="new_class">
                <xsl:call-template name="replace_words">
                    <xsl:with-param name="replace" select="'xx'"/>
                    <xsl:with-param name="by" select="'yyy'"/>
                    <xsl:with-param name="words" select="'xx xx-a xx-b xx xx'"/>
                </xsl:call-template>
            </xsl:variable>
            <xsl:value-of select="$new_class"/>

        </xsl:template>

        <xsl:template name="replace_words">
            <xsl:param name="replace"/>
            <xsl:param name="by"/>
            <xsl:param name="words"/>
            <xsl:choose>
                <xsl:when test="contains($words,' ')">
                    <!-- try replace first word-->
                    <xsl:call-template name="replace_words">
                        <xsl:with-param name="replace" select="$replace"/>
                        <xsl:with-param name="by" select="$by"/>
                        <xsl:with-param name="words" select="substring-before($words,' ')"/>
                    </xsl:call-template>
                    <!-- dlimeter -->
                    <xsl:text> </xsl:text>
                    <xsl:call-template name="replace_words">
                        <xsl:with-param name="replace" select="$replace"/>
                        <xsl:with-param name="by" select="$by"/>
                        <xsl:with-param name="words" select="substring-after($words,' ')"/>
                    </xsl:call-template>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:choose>
                        <xsl:when test="$replace = $words">
                            <xsl:value-of select="$by"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:value-of select="$words"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:25:37.123

**只需对您的原始转换进行一些触摸，它现在就可以按照想要的方式工作 - 不需要扩展函数：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[contains(concat(' ', @class, ' '), ' row ')]">
   <xsl:variable name="original-row-class" select="string(@class)" />
   <xsl:variable name="row-class">
     <xsl:call-template name="replace">
        <xsl:with-param name="text" select=
        "concat(' ', $original-row-class, ' ')" />
        <xsl:with-param name="replace" select="' row '" />
        <xsl:with-param name="by" select="' row-fluid '" />
     </xsl:call-template>
   </xsl:variable>
   <xsl:copy>
     <xsl:attribute name="class">
      <xsl:value-of select="normalize-space($row-class)" />
     </xsl:attribute>
     <xsl:apply-templates select=
      "@*[local-name() != 'class']|node()"/>
   </xsl:copy>
 </xsl:template>

    <xsl:template name="replace">
        <xsl:param name="text" />
        <xsl:param name="replace" />
        <xsl:param name="by" />
        <xsl:choose>
          <xsl:when test="contains($text, $replace)">
            <xsl:value-of select="substring-before($text,$replace)" />
            <xsl:value-of select="$by" />
            <xsl:call-template name="replace">
              <xsl:with-param name="text" select="substring-after($text,$replace)" />
              <xsl:with-param name="replace" select="$replace" />
              <xsl:with-param name="by" select="$by" />
            </xsl:call-template>
          </xsl:when>
          <xsl:otherwise>
            <xsl:value-of select="$text" />
          </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<div class="row home-row">
    <p>Hello</p>
</div> 
```

**产生了想要的正确结果**：

```
<div class="row-fluid home-row">
    <p>Hello</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:49:04.053

这似乎对我有用。跳过分隔线并将其全部粘贴到下面。

虽然我在发布以下答案之前就可以正常工作，但我确实尝试了那个，但它并没有立即工作。我想在这一点上我会很好奇这是否有什么严重的问题，但否则我会坚持下去。至少在下面给出了很棒的方向。

```
<xsl:template match="//*[contains(concat(' ', normalize-space(@class), ' '), ' row ')]" priority="1">

    <xsl:param name="separator" select="' '" />

    <xsl:variable name="class-array">
        <xsl:attribute name="name">
            <xsl:value-of select="$original-row-class"/>
        </xsl:attribute>
        <xsl:call-template name="tokenize">
            <xsl:with-param name="text" select="$original-row-class" />
        </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="items" select="ext:node-set($class-array)" />

    <xsl:variable name="row-class">
        <xsl:for-each select="$items/item">
          <xsl:choose>
            <xsl:when test="position() = 1">
                <xsl:choose>
                    <xsl:when test=". = 'row'">row-fluid</xsl:when>
                    <xsl:otherwise><xsl:value-of select="." /></xsl:otherwise>
                </xsl:choose>    
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when test=". = 'row'"><xsl:value-of select="concat($separator, 'row-fluid') "/></xsl:when>
                    <xsl:otherwise><xsl:value-of select="concat($separator, .) "/></xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
          </xsl:choose>
        </xsl:for-each>
    </xsl:variable>

    <xsl:copy>
        <xsl:attribute name="class"><xsl:value-of select="$row-class" /></xsl:attribute>
        <xsl:value-of select="original-row-class" />
        <xsl:apply-templates select="@*[local-name() != 'class']|node()[local-name() != 'class']"/>
    </xsl:copy>
</xsl:template>

<xsl:template name="tokenize">
    <xsl:param name="text" select="."/>
    <xsl:param name="sep" select="' '"/>
    <xsl:choose>
        <xsl:when test="not(contains($text, $sep))">
            <item>
                <xsl:value-of select="normalize-space($text)"/>
            </item>
        </xsl:when>
        <xsl:otherwise>
            <item>
                <xsl:value-of select="normalize-space(substring-before($text, $sep))"/>
            </item>
            <xsl:call-template name="tokenize">
                <xsl:with-param name="text" select="substring-after($text, $sep)"/>
            </xsl:call-template>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

# git - git clean -dfx 不会删除被忽略的目录

> ID：15976300
> 
> 赞同：0
> 
> 时间：2013-04-12T16:19:53.647
> 
> 标签：git

我使用 git 1.7.9.5 并且我有一个目录`_hashdist`，其中没有跟踪文件。这是我的`.gitignore`：

```
*~
*.pyc
*.pyo

/opt
/bld
/db
/src
/_hashdist
/local 
```

所以它被忽略了，如下所示：

```
$ git status --ignored
# On branch master
# Ignored files:
#   (use "git add -f <file>..." to include in what will be committed)
#
#   _hashdist/
nothing to commit (working directory clean) 
```

然后我想通过以下方式删除它：

```
$ git clean -dfx
Removing _hashdist/ 
```

它正确地说它正在删除它。但实际上什么也没发生：

```
$ git status --ignored
# On branch master
# Ignored files:
#   (use "git add -f <file>..." to include in what will be committed)
#
#   _hashdist/
nothing to commit (working directory clean) 
```

或者

```
$ ls -d _hashdist/
_hashdist/ 
```

目录还在。这对我来说非常困惑，因为我一直习惯于`git clean -dfx`清洁所有东西，这是第一次它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:36:00.400

尝试使用 strace 找出发生了什么。

您应该会看到如下内容：

```
$ strace git clean -dfx
[...]
unlink("_hashdist/foo")                 = 0
getdents(3, /* 0 entries */, 32768)     = 0
close(3)                                = 0
rmdir("_hashdist/")                     = 0
[...] 
```

有`unlink`删除文件的`rmdir`调用和删除目录的调用。就我而言，两者都是成功`= 0`的。

也许这可以带来一些光明。

如果 rmdir 成功但目录仍然存在，我能想到的唯一想法是另一个进程，它重新创建该目录。- 但是手动删除目录时应该是一样的...

# css - 奇怪的 CSS mangling - a:hover 中的意外边框底部值

> ID：15976304
> 
> 赞同：0
> 
> 时间：2013-04-12T16:20:05.777
> 
> 标签：css, ruby-on-rails, sass

SASS 在生产服务器上插入了意外的 CSS 并弄乱了我**的 a:hover**

这是我的 application.css 的片段：

```
pre {
  background-color: #eee;
  padding: 10px;
  font-size: 11px; }

a {
    color: #000000;
}
a:visited {
    color: #666666;
}
a:hover {
    border-bottom: none;
}

div {
  &.field, &.actions {
    margin-bottom: 10px; } } 
```

但是在生产服务器Firefox上报告以下css：

```
pre {
    background-color: #EEEEEE;
    font-size: 11px;
    padding: 10px;
}
a {
    color: #000000;
}
a:visited {
    color: #666666;
}
a:hover {
    border-bottom: 1px solid #777777;
}
div.field, div.actions {
    margin-bottom: 10px;
} 
```

在我的开发机器上，Firefox 显示以下 CSS：

```
a:hover {
    border-bottom: medium none;
} 
```

我使用 Rails 3.2.13，我从未见过这样的问题。我浪费了整个下午试图找到解决方案。这个问题破坏了我的主页，使它看起来非常不专业。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:11:41.453

首先，`border-bottom`是一个[速记属性](http://www.456bereastreet.com/archive/200502/efficient_css_with_shorthand_properties/)。它结合`border-bottom-width`了`border-bottom-color`和`border-bottom-style`。这些属性的值可以按任何顺序出现。其中任何一个都可以省略。

`none`是来自 的值`border-bottom-style`。

其次，Firefox 在其检查功能中显示的并不是您的 CSS。它显示了它对待 CSS 的方式。`border-bottom: medium none;`意味着您将边框的样式更改为`none`，而宽度保持不变`medium`（显然，它是继承的）。

要查看实际的 CSS，请打开实际的 CSS 文件并查看内部。它还可以让您查看媒体查询包装器。

第三，要删除底部边框，请使用`border-bottom: 0;`. 这将被视为`border-bottom-width: 0;`，这有效地删除了边界。

# c++ - 配置下拉 Vs2010 中缺少活动（调试）选项

> ID：15976325
> 
> 赞同：0
> 
> 时间：2013-04-12T16:21:28.877
> 
> 标签：c++, visual-studio-2010

我按照说明准备我的应用程序以通过 Profiler。该指令指出我应该在配置下拉列表中选择 Active(Debug)。但是，我看到的唯一选项是 Active(Release)、Debug、Release 和 All 配置。关于为什么 Active(Debug) 没有出现的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:22:30.470

`Active`适用于您当前使用的模式。

# python - 优化有助于找到最大除数

> ID：15976329
> 
> 赞同：0
> 
> 时间：2013-04-12T16:21:42.750
> 
> 标签：python

我正在尝试解决欧拉项目的问题 12。第一个有超过 500 个除数的三角形数的值是多少？（第 7 个三角形数为 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28）。这是我的代码，但速度不够快。。你有什么优化技巧吗？

```
n=0
a=0
list=[]
maxcount=0

while True:
    n+=1
    a+=n
    count=0
    for x in range(1,int(a+1)):
        if a%x==0:
            count+=1   
            if count>maxcount:
                maxcount=count
                print a, "has", maxcount, "dividors" 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:32:48.600

从这个实现非常快速素数分解的问题中获取代码：
[快速素数分解模块](https://stackoverflow.com/questions/4643647/fast-prime-factorization-module)

然后使用这个问题的答案将你的素数转换为所有除数的列表（长度就是你想要的）：
[得到一个数字的所有除数的最佳方法是什么？](https://stackoverflow.com/questions/171765/what-is-the-best-way-to-get-all-the-divisors-of-a-number)

例如，您可以将以下函数（改编自第二个链接）从第一个链接添加到模块底部：

```
def alldivisors(n):
    factors = list(factorization(n).items())
    nfactors = len(factors)
    f = [0] * nfactors
    while True:
        yield reduce(lambda x, y: x*y, [factors[x][0]**f[x] for x in range(nfactors)], 1)
        i = 0
        while True:
            if i >= nfactors:
                return
            f[i] += 1
            if f[i] <= factors[i][1]:
                break
            f[i] = 0
            i += 1 
```

然后在您的代码中计算您将使用的除数，`len(list(alldivisors(a)))`这将比您当前使用的蛮力方法更快地计算除数的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:33:51.480

从减少搜索空间开始，无需查看不是三角形数字的数字。也尝试查看除数`range(1, sqrt(n))`而不是`range(1, n)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:30:23.163

除了数论：尝试缓存，并以相反的方式做事。例如：当您已经知道 300 有 18 个除数（以及它们是什么）时，对于可被 300 整除的数字意味着什么？你能缓存这些信息吗？（你当然可以。）

纯 python 加速技巧对你没有帮助，你需要一个更好的算法。

# java - java中最小和最大的。否则如果？

> ID：15976330
> 
> 赞同：0
> 
> 时间：2013-04-12T16:21:43.387
> 
> 标签：java, if-statement

我必须制作一个程序，告诉你 5 个数字中的最大和最小数量，并且输出时我不断得到最小 = 0 和最大 = 0。我还没有添加评论或类似的东西，我尝试了 else if 并且它根本没有工作（很惊讶我得到了 else 工作）。有人可以帮我解决这个问题。我不应该需要帮助，但我就是想不通。

```
public class int_big_small {
    public static void main(String args[]){

        int num1=3, num2=9, num3=5, num4 = 3, num5 = 7;
        int largest = 0, smallest = 0;

            if(num1 > num2){
                num1 = largest;
                num2 =  smallest;
            }else{
                num2 = largest;
                num1 = smallest;
            }

            if(num3>largest){
                num3 = largest;
            }
            if(num3<smallest)
                num3 = smallest;
            if(num4>largest){
                num4 = largest;
            }
            if(num4<smallest)
                num4 = smallest;

            if(num5>largest){
                    num5 = largest;
                }
                if(num5<smallest)
                    num5 = smallest;

            System.out.println("the smallest number is " + smallest + " and the largest is " + largest);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:23:12.767

Your assignments are all in reverse order - they should be `smallest = whatever`, not `whatever = smallest`

This is also crying out to be put in for loop.

```
int[] nums = new int[] {num1, num2, num3, num4, num5};
int smallest = nums[0];
int largest = nums[0];
for(int i = 1; i < nums.length; i++) {
    if(nums[i] < smallest) {
        smallest = nums[i];
    }
    if(nums[i] > largest) {
        largest = nums[i];
    }
} 
```

Initialize `smallest` and `largest` to a valid int from your list of numbers - initializing them to `0` is going to result in `smallest` equaling `0` when you're finished. (The only default values that wouldn't cause problems are `smallest = Integer.MAX_VALUE; largest = Integer.MIN_VALUE;`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:28:00.270

```
public int min(int a, int b) {
    if(a > b) return b;
    return a;
}

public int max(int a, int b) {
    if(a > b) return a;
    return b;
}

int num1=3, num2=9, num3=5, num4 = 3, num5 = 7;
int largest = num1, smallest = num1;

smallest = min(min( min(num1, num2) , min(num3, num4)), num5);
largest  = max(max( max(num1, num2) , max(num3, num4)), num5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:46:53.870

如果您正在*学习*Java，请使用带有数组和循环的解决方案。如果您*使用*的是Java，则可以分 3 行完成：

```
List<Integer> list = Arrays.asList(num1, num2, num3, num4, num5);
int smallest = Collections.min(list);
int largest  = Collections.max(list); 
```

# data-binding - 模型绑定和提交按钮 mvc4

> ID：15976332
> 
> 赞同：2
> 
> 时间：2013-04-12T16:21:46.957
> 
> 标签：data-binding, razor, asp.net-mvc-4

我在 cshtml 页面上有多个表单。这些表单中的第一个正确绑定，但我无法让第二个绑定。每次我单击提交按钮时，传递的值都是 0 或 null（分别为 int 和 stings）

我的模型包含两个对象。AccountInfo 和 AccountSettings 列表：

```
public class AccountDetailViewRequest
{
    public Account AccountInfo { get; set; }
    public List<AccountSettings> Settings { get; set; }
}

public class AccountSettings
{
    public int AccountID;
    public string Name;
    public string Value;
    public int ID;
} 
```

我的行动。第一个动作可以正常工作，但第二个不能。

```
public ActionResult UpdateAccountDetails(Account model)
{...}

public ActionResult DeleteSetting(AccountSettings model)
{...} 
```

在我的cshtml页面中，我有这个可以正常工作的块

```
@using (Html.BeginForm("UpdateAccountDetails", "Account"))
{ 
    <input type = "hidden" name = "AccountInfo.AcctID" value = @Model.AccountInfo.AcctID />
    <table>
        <tr>
            <td>Company @Html.TextBox("AccountInfo.Company")</td>
            <--More text boxes here-->
        </tr>
        <tr>  
            <td><input name="Save" type="submit" value="Save Changes"/></td>
        </tr>
    </table>
} 
```

在页面后面我有这个块。当我使用关联的提交按钮时，该函数被调用，但无论文本框的内容如何，​​参数都是 0 或 null。当我查看代码源时，这些框会从我的数据库中正确填充。

```
@for (int index = 0; index < Model.Settings.Count; index++)
{
    var setting = Model.Settings[index];
    using (Html.BeginForm("DeleteSetting", "Account"))
    {
        <tr>
            <td>@Html.TextBox("Name", @Model.Settings[index].Name)</td>
            <td>@Html.TextBox("Value", setting.Value)</td>
            @Html.Hidden("ID", setting.ID)
            @Html.Hidden("AccountID", Model.AccountInfo.AcctID)
            <td><input type="submit" value="Delete"/></td>
        </tr>
    }
} 
```

我在语法上尝试了许多不同的变体，但似乎无法做到正确。欢迎提出建议、解决方案和资源。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:22:01.897

尝试这样的事情

```
 <tr>
        <td>@Html.TextBox("AccountSettings.Name", @Model.Settings[index].Name)</td>
        <td>@Html.TextBox("AccountSettings.Value", setting.Value)</td>
        @Html.Hidden("AccountSettings.ID", setting.ID)
        @Html.Hidden("AccountSettings.AccountID", Model.AccountInfo.AcctID)
        <td><input type="submit" value="Delete"/></td>
    </tr> 
```

您的视图模型是 AccountDetailViewRequest，其名称、值等不是属性。

如果你做这样的事情会更整洁：

```
@foreach (var setting in Model.Settings)
{
    using (Html.BeginForm("DeleteSetting", "Account"))
    {
        <tr>
            <td>@Html.TextBoxFor(m => setting.Name)</td>
            <td>@Html.TextBoxFor(m => setting.Value)</td>
            @Html.HiddenFor(m => setting.ID)
            @Html.HiddenFor(m => setting.AcctID)
            <td><input type="submit" value="Delete"/></td>
        </tr>
    }
} 
```

请注意，我对上述代码进行了即兴创作，您可能需要对其进行调整才能正常工作

# c++ - 递归函数导致的栈溢出

> ID：15976333
> 
> 赞同：18
> 
> 时间：2013-04-12T16:21:56.670
> 
> 标签：c++, function, recursion, stack-overflow

我是 C++ 的初学者。昨天我读到了递归函数，所以我决定自己写。这是我写的：

```
int returnZero(int anyNumber) {
    if(anyNumber == 0)
        return 0;
    else  {
        anyNumber--;
        return returnZero(anyNumber);
    }
} 
```

当我这样做时：`int zero1 = returnZero(4793);`，它会导致堆栈溢出。但是，如果我将值 4792 作为参数传递，则不会发生溢出。

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-12T16:24:36.643

每当您调用函数时，包括递归调用，返回地址和参数通常都会被压入[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)。堆栈是有限的，所以如果递归太深，你最终会用完堆栈空间。

令我惊讶的是，你的机器上只需要 4793 次调用就可以溢出堆栈。这是一个很小的堆栈。相比之下，在我的计算机上运行相同的代码需要大约 100 倍的调用次数才能使程序崩溃。

堆栈的大小是可配置的。在 Unix 上，命令是`ulimit -s`.

鉴于该函数是[tail-recursive](http://en.wikipedia.org/wiki/Tail_call)，一些编译器可能能够通过将递归调用转换为跳转来优化递归调用。一些编译器可能会更进一步地采用您的示例：当被要求进行最大优化时，`gcc 4.7.2`将整个函数转换为：

```
int returnZero(int anyNumber) {
  return 0;
} 
```

这需要两个汇编指令：

```
_returnZero:
        xorl    %eax, %eax
        ret 
```

挺整洁的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T16:24:13.263

您刚刚达到了系统调用堆栈的大小限制，这就是正在发生的事情。由于某种原因，您系统中的堆栈很小，4793 个函数调用的深度相当小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T16:24:37.507

你的筹码量是有限的，所以当你跟注时，你只是在`4793`下注的时候就达到了上限`4792`。每个函数调用都将使用堆栈上的一些空间来进行管理和参数。

本页提供了一个递归函数调用期间堆栈的[示例。](http://cis.stvincent.edu/carlsond/swdesign/recur/recur.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T16:25:06.293

我的猜测是你的堆栈足够大，可以容纳 4792 个条目 - 今天。明天或下一个，这个数字可能会有所不同。递归编程可能很危险，这个例子说明了原因。我们尽量不让递归变得如此深或“坏”的事情可能发生。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T16:29:07.830

任何“无限”递归，即自然不限于小（ish）数字的递归调用都会产生这种效果。限制的确切位置取决于操作系统、调用函数的环境（编译器、哪个函数调用递归函数等）。

如果您添加另一个变量，例如`int x[10];`调用您的递归函数的函数，则崩溃所需的数字将会改变（可能大约为 5 左右）。

用不同的编译器（甚至不同的编译器设置，例如打开优化）编译它，它可能会再次改变。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-28T17:18:52.133

使用递归，可以实现 SuperDigit：

```
public class SuperDigit
{
    static int sum = 0;

    int main()
    {
        int n = 8596854;
        cout<<getSum(n);
    }

    int getSum(int n){
        sum=0;
        while (n > 0) {
            int rem;
            rem = n % 10;
            sum = sum + rem;
            n = n / 10;
            getSum(n);
        }
        return sum;
    }
} 
```

# vb.net - Is there a way to close an open PDF file in VB.net programatically

> ID：15976334
> 
> 赞同：0
> 
> 时间：2013-04-12T16:21:58.220
> 
> 标签：vb.net

In my VB.net application I am opening a PDF file using System.Diagnostics.Process.Start("c:\TEMP\MyFile.pdf").

Is it possible to Close this file Programatically in some event.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:28:33.253

是的，有一种方法，尽管它不是一个非常优雅的解决方案。

当您启动 PDF 进程时，您会在某个全局变量中捕获进程 ID：

```
Dim id As Integer 'Global variable
id = System.Diagnostics.Process.Start("C:\Temp\myfile.pdf").Id 
```

然后，当您需要终止进程时，只需执行以下操作：

```
System.Diagnostics.Process.GetProcessById(id).Kill() 
```

（确保有一个具有此 ID 的进程正在实际运行！）

您还可以使用该`Process.HasExited`属性查看 PDF 是否已关闭，并可以根据该属性处理您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T12:49:30.777

我认为不可能关闭特定的 PDF 文件，因为它们不是独立的进程，它们是任务管理器中的子进程。您可以自行杀死 adobe acrobat reader 进程。

```
Dim AcrobateInstance() As Process = Process.GetProcessesByName("AcroRd32")
If AcrobateInstance.Length > 0 Then
   For value As Integer = 0 To AcrobateInstance.Length - 1
      BillInstance(value).Kill()
   Next
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:16:09.517

这可能有效：

```
 Process1.Start()
 Process1.WaitForExit()
 If Process1.HasExited Then
     System.IO.File.Delete(Your File Path)
 End If 
```

确保将 Process Object 从工具箱添加到表单并配置 startinfo 部分。

如果您遇到权限问题。使用`AppData`文件夹。它具有程序运行所需的必要权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:30:24.263

这是在 C# 中，但可能会派上用场......

`var myPDFEvent = System.Diagnostics.Process.Start(@"C:\Temp\myfile.pdf");` `myPDFEvent.Exited += new EventHandler(myPDFEvent_Exited);` `myPDFEvent.EnableRaisingEvents = true;`

`void myPDFEvent_Exited(object sender, EventArgs e)` `{` `System.IO.File.Delete(@"C:\Temp\myfile.pdf);` `}`

# programming-languages - Separate name for print without newline

> ID：15976338
> 
> 赞同：1
> 
> 时间：2013-04-12T16:22:22.007
> 
> 标签：programming-languages, language-design, output

Some programming languages e.g. Pascal and Java have a keyword or standard library function e.g. `print` to output a value, and a separate name `println` to output with a newline, but this has the disadvantage of giving the shorter/more obvious name to the behavior you don't usually want.

Other languages e.g. Basic and Python use `print` for the behavior you do usually want and have a special syntax such as a trailing `;` or `,` to suppress the newline when required. This works, but one could argue that it would be more elegant/transparent to have different names for the two behaviors.

Are there - or have there ever been - any languages where output of a value with newline is spelled `print`, and there is a separate name for output without newline?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:30:53.933

Tcl默认[`puts`](http://www.tcl.tk/man/tcl8.6/TclCmd/puts.htm)打印给定的字符串*和*尾随的换行符，除非它传递了`-nonewline`命令行选项。

# android - 生成端点库后，应用引擎连接的 android 项目中的包名称错误

> ID：15976339
> 
> 赞同：2
> 
> 时间：2013-04-12T16:22:24.373
> 
> 标签：android, eclipse, google-app-engine, google-cloud-endpoints

创建新的应用引擎连接的 android 项目后，它会立即在生成的客户端库的构建路径中生成错误。它突然发生在我的另一个主要项目中（该项目已经工作了很长一段时间），在未能解决它之后，我创建了一个新的测试项目，它从一开始就有相同的错误。我试过清理项目，重新启动 Eclipse，甚至重新安装 Eclipse ......有什么想法吗？

问候

在此处查看屏幕截图：

[![](https://i.stack.imgur.com/WJg7V.jpg)](https://i.stack.imgur.com/WJg7V.jpg)
[（来源：[osmoel.se](http://www.osmoel.se/stackoverflow/packages.jpg)）]

和

[![](https://i.stack.imgur.com/93O0W.jpg)](https://i.stack.imgur.com/93O0W.jpg)
[（来源：[osmoel.se](http://www.osmoel.se/stackoverflow/errors.jpg)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:55:27.480

在 appengine sdk 1.7.7 发布后，Google 今天似乎对 Cloudendpoints 有一些问题。这里描述的另一个问题是 cloudendpoint 用户无法在 api-explorer ( [https://developers.google.com/apis-explorer/](https://developers.google.com/apis-explorer/) )中看到他们的 APIS

*   [https://code.google.com/p/googleappengine/issues/detail?id=9167](https://code.google.com/p/googleappengine/issues/detail?id=9167)
*   [端点停止使用 proxy.html 错误](https://stackoverflow.com/questions/15967102/endpoints-stopped-working-with-proxy-html-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:27:31.253

我相信这是相关的问题：

[https://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=117](https://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=117)

# java - how to read virtual serial port of MIB520

> ID：15976344
> 
> 赞同：0
> 
> 时间：2013-04-12T16:22:34.013
> 
> 标签：java, serial-port, virtual-serial-port, tinyos, nesc

i need to read from my Pc the serial port that connected with [MIB520](http://www.willow.co.uk/html/mib520-_usb_gateway.html) usb board ?

if i know the sequence of the data received byte by byte then can i use C# or any tool to read this port ??

i have iris and MicAz motes that read gps packet then they send them to the mote which attached to the [MIB520](http://www.willow.co.uk/html/mib520-_usb_gateway.html) usb board.

note: that MIB 520 use two virtual ports,it use `FTDI FT2232C`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:49:01.843

这是关于通过 USB 连接到串行端口的一个非常普遍的问题，因此我将向您指出一些一般信息的来源。

首先，您的机器需要安装 FTDI[驱动](http://www.ftdichip.com/Drivers/VCP.htm)程序。

如果您想通过键入命令和读取响应来手动与串行设备交互，您可以使用终端仿真器，如`minicom`or `gtkterm`。这个[问题](https://stackoverflow.com/questions/5347962/how-to-connect-to-a-terminal-to-serial-usb-device-on-ubuntu-10-10)的答案中有一些相关信息。

如果您正在寻找 java 串行库，您可以尝试以下几种：

*   [RXTX](http://rxtx.qbang.org/wiki/index.php/Main_Page)
    *   [serterm](https://code.google.com/p/serterm/) : 使用 RXTX 构建的示例项目
*   javax.com
*   [jSSC](https://code.google.com/p/java-simple-serial-connector/)

# c# - Why is change to static field not propagated to another project/process in C#/.Net?

> ID：15976346
> 
> 赞同：-1
> 
> 时间：2013-04-12T16:22:40.000
> 
> 标签：c#, static

I have a class (mydatarec) in my project (client) that is referenced to another project (server). When I call the public double (xxr) in the other project (server) I always get a zero value:

```
///client///
public class mydatarec
{
   public static double xxr;
}
.
.
static void Main(string[] args)
{
   mydatarec.xxr = 100;
          ...
} 
```

In the other project:

```
///server///
//When I call it here..
Console.WriteLine(mydatarec.xxr); // I always get 0 
```

I dont know how to continuously change the static double. I need your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:24:29.283

您似乎假设该值由多个进程共享。它不是。静态字段仅在一个进程内共享（或更准确地说，在一个应用程序域内）。

如果您确实需要在进程之间共享内存，请按照问题[Shared memory between 2 processes (applications)](https://stackoverflow.com/q/2004790/850848)。

# jquery - 无法清除单选按钮

> ID：15976347
> 
> 赞同：-1
> 
> 时间：2013-04-12T16:22:45.743
> 
> 标签：jquery, button, radio-button

如何清除这些复选框：

```
<form class="betMatch" id="4">

<table class="grid-info">
 <tr>                
  <td><input type="radio" class="betMatchWin" id="49" value="1" name="betmatch1" /></td>
  <td><input type="radio" class="betMatchCover" id="49" value="2" name="betmatch1" /></td>
 </tr>
</table>

</form> 
```

我的查询：

```
var x=1;

$('form.matchBet#4 input:radio[name=betmatch'+x+']').attr('checked',false); 
```

我不明白为什么它不起作用，但按钮不会清除....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:24:26.290

采用

```
.removeAttr('checked') 
```

或者

```
.prop('checked',false) 
```

第二个更好 - [http://api.jquery.com/prop/](http://api.jquery.com/prop/)

啊是的..代码中有错误^_^应该是：

```
var x=1;

$('form.betMatch#4 :radio[name=betmatch'+x+']').prop('checked',true); 
```

[http://jsfiddle.net/fGkM3/](http://jsfiddle.net/fGkM3/)

（只有第二个被检查，因为它们具有相同的名称，这就是单选按钮的工作方式......这只是一个例子，`false`在你的情况下使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:23:45.560

试试下面的代码：

```
$('form.matchBet#4 input:radio[name=betmatch'+x+']').removeAttr('checked'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:26:23.033

如果你想清除它们：

```
$('form.betMatch#4 :radio[name=betmatch'+x+']').each(function() {
    $(this).prop("checked", false);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:29:07.303

试试这个...

$('input[name=betmatch'+x+']').removeAttr('checked');

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T07:14:59.240

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Clear Radio Button</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
        function clear_radio(){
            var x = 1;
            $('input[name=betmatch'+x+']').removeAttr('checked');
        }
    </script>
</head>

<body>
    <form class="betMatch" id="4">

    <table class="grid-info">
        <tr>         
            <td><input type="radio" class="betMatchWin" id="49" value="1" name="betmatch1" /></td>
            <td><input type="radio" class="betMatchCover" id="49" value="2" name="betmatch1" /></td>
        </tr>
    </table>

    </form>
    <input type="button" onclick="javascript: clear_radio()" value="clear" />
</body>
</html> 
```

希望它有效...

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-12T16:58:50.787

抱歉，伙计们，您的所有答案都是正确的，但是我的 x 变量设置不正确，因此尽管表单的类和 id 是正确的，但我引用了错误的无线电名称。抱歉浪费你的时间:0(

# c# - How to change image without refreshing the page

> ID：15976349
> 
> 赞同：0
> 
> 时间：2013-04-12T16:23:07.147
> 
> 标签：c#, jquery, html, jquery-ui, updatepanel

I have a website where the user can select different cards. I need a way where when a new card is selected then the page does not refresh. When I click the back button now it just goes back to previous selections. I need it to go back to the previous page. Here is the code for the image change

```
 <div class="imgCard" style="padding-right: 50px">
       <asp:ScriptManager ID="ScriptManager" runat="server" />
       <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="conditional">
            <ContentTemplate>
                  <fieldset style="border-width: 150px; border-style: none">
                        <asp:Image ID="imgCardChoice1" runat="server" />
                        <br />
                        <br />
                        <a id="openChange1" href="#" style="color: Red">Change Card</a>
                   </fieldset>
             </ContentTemplate>
        </asp:UpdatePanel>
    </div> 
```

When the user clicks on "Change Card" then a jquery modal box opens and allows them to change the card. Thank you for any help/advice. If needed the code behind to select a new card is in C#.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:27:27.077

在不了解更多信息的情况下，听起来您需要使用 AJAX 来执行此操作。如果您已经在使用 jQuery，请查看 jQuery.load()。您可以向站点上的 url 发出 AJAX 请求，该请求将仅返回图像信息并将其加载到您指定的元素中。

这是文档的链接：http: [//api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:53:17.507

尝试使用一些javascript函数。创建一个要放置图像的 div。然后给他一个 ID，在 javascript 函数上调用 div id 并将 src 更改为您要放置的图像。在您的链接上或无论您必须更改图像，调用 onclick 函数并使用 javascript 函数。在我的网站上，我有 2 张图片，onmouseover 将其他 div 中的图片完全不同。在以下网址查看：[http](http://roundhillevents.com) ://roundhillevents.com 并将光标传递到 facebook 和 youtube 徽标上。如果什么都没有出现，让光标停留在那片刻。PS：只适用于forefox，不知道为什么。

# oracle - Creating trigger for date of Birth

> ID：15976350
> 
> 赞同：-1
> 
> 时间：2013-04-12T16:23:11.390
> 
> 标签：oracle, oracle11g, date-arithmetic, data-integrity

Please can someone enlighten me on how to create trigger for date of birth having upper limit of 60 and lower limit of 20\. I am working on an assignment that requires constraint on staff age range for a shipping company on oracle 11g. thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:30:08.973

不要使用触发器来强制关系完整性，使用约束。这就是他们的目的。

您还没有为我们提供表格结构而烦恼，因此您需要针对您的实际表格进行调整。

```
alter table employees
    add constraint minimum_age_ck check
         (hire_date >= add_months(date_of_birth, 240);

alter table employees
    add constraint maximum_age_ck check
         (hire_date <= add_months(date_of_birth, 720); 
```

当然，如果您的`employees`表格缺少一`hire_date`列，您就会遇到大问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T12:08:48.977

谢谢。我终于用了这个

```
alter table staff
    add constraint minimum_age_ck check
         ((dateOfBirth >= add_months(dateOfBirth, -18))); 
```

和这个

```
alter table staff
    add constraint maximum_age_ck check
         ((dateOfBirth <= add_months(date_of_birth, 60))); 
```

将尝试插入值并检查约束是否有效。

同时，通过插入值对上述答案进行检查证明它是无效的。我也尝试使用这个 ALTER TABLE STAFF ADD CONSTRAINT minimum_age_ck CHECK ( (months_between (sysdate, dateOfBirth) >= 240)); CHECK ((months_between (sysdate, dateOfBirth) >= 240)) * ERROR at line 3: ORA-02436: date or system variable wrongly specified in CHECK constraint

sysdate 不是months_between 的有效可用比较吗？

# asp.net - 生产现场报告查看器程序集的问题

> ID：15976353
> 
> 赞同：1
> 
> 时间：2013-04-12T16:23:19.917
> 
> 标签：asp.net, reporting-services

我的生产站点上的报表查看器有一个奇怪的问题。我在同一台机器上部署了站点的舞台和演示版本。最近我一直在进行更新，并一直在部署到运行良好的阶段版本。今天我部署到Demo，突然报表查看器坏了，只在Demo上。

我得到的错误是：

```
CS0433: The type 'Microsoft.Reporting.WebForms.ReportDataSource' exists in both 
'c:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\10.0.0.0__b03f5f7f11d50a3a\Microsoft.ReportViewer.WebForms.dll' 
and 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\h2o-demo\d354e6e4\ac3ce3e\assembly\dl3\67b85cd6\0027fec0_ed32ca01\Microsoft.ReportViewer.WebForms.DLL' 
```

在此更新中，该项目已从 Report Viewer 9 更新到 10。Web Config 中的所有引用以及我项目的“引用”中的所有引用都已更新。我注意到由于某种原因，放入“临时 ASP.NET 文件”中的版本实际上是版本 9。

再次回顾一下；该项目在我的本地机器上运行良好。它也适用于部署在与损坏的演示站点相同的服务器上的 Stage 站点。

有人对我可以做些什么来解决这个问题有任何想法吗？我似乎找不到任何具有对我有用的解决方案的资源。我尝试了编译 batch = false 并添加了从 9 到 10 的程序集 bindingredirect（尽管我想我可能做错了）。我真的很困惑为什么它会在一个站点上运行，而在另一个站点上却不行。

编辑 1：在环顾四周后，我再次尝试绑定重定向。我的配置文件现在看起来像这样：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="log4net" publicKeyToken="1b44e1d426115821" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-1.2.10.0" newVersion="1.2.10.0" />
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="Microsoft.ReportViewer.WebForms" publicKeyToken="b03f5f7f11d50a3a" />
      <bindingRedirect oldVersion="9.0.0.0" newVersion="10.0.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="Microsoft.ReportViewer.Common" publicKeyToken="b03f5f7f11d50a3a" />
      <bindingRedirect oldVersion="9.0.0.0" newVersion="10.0.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

“Log4Net”重定向已经存在，并且是舞台上唯一的东西。添加“WebForms”后，“Common”出现错误，因此我也添加了该错误。现在我收到此错误：

```
Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821' or one of its dependencies. The system cannot find the file specified. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:35:54.453

此错误看起来像您有多个程序集，然后通过指向程序集的显式 GUID 来纠正该问题，现在您缺少一个。您能否验证“log4net”程序集是否存在？如果你有一个现有的工作 SSRS 系统，我会看看。查看该配置是否相同以及该程序集的该文件是否存在。如果是这样，您可以随时尝试将其复制到非工作环境中。在许多情况下，程序集或类库要么被另一部分更改或覆盖。在一台机器上运行多个版本的类似产品有时很困难。

我在家中使用 SQL Server 在我的 2008 Enterprise、2008R2 express 和 2012 Developer 的 Dev box 上运行。我遇到了很多关于十六进制错误的问题，以及它们指向无法找到文件的问题。简单的答案是，如果您能提供帮助，请不要在同一台机器上安装同一产品的多个版本，但我知道这并不总是适用于廉价或您拥有的测试。通常对于重复的 DLL 问题，我将一个重新列出为 dllOLD 或类似的，然后查看它是否有效。如果您正在执行更正确的方法并明确列出，那么您就是。我只想确保 DLL 确实存在，并且可以通过 RDP 远程到另一个环境并同时启动该屏幕。希望您有两台显示器来查看一个环境与另一个环境的对比；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:48:30.530

我想到了。原来在演示站点的 Bin 目录中有一个旧的 DLL。它没有被新版本覆盖，因为它不再使用，所以它只是坐在那里以某种方式搞乱项目。我清理了演示站点上的 bin 目录，然后重新部署，它工作正常。谢谢你们的帮助。

# php - PHP 文本编码/解码 (TinyMCE)

> ID：15976357
> 
> 赞同：2
> 
> 时间：2013-04-12T16:23:49.183
> 
> 标签：php, ajax, encoding, tinymce, decoding

我已经在这个过程中苦苦挣扎了一段时间，所以我可以使用一些帮助。

我目前有一个页面，用户可以使用 TinyMCE 编辑他的页面。

工作流程是基本的：用户进行编辑 -> 提交 -> AJAX 调用 SQL 文件 -> 数据库中的 SQL 文件更新。

问题是我必须对输入进行编码/解码，因为当 AJAX 接收到数据并在内容中包含 & 时，数据字符串将失败。所以这就是我目前所拥有的：

```
<script>
$(document).ready(function() {
    $('#edit').click(function () {
        var content = escape(tinyMCE.activeEditor.getContent());
        $.ajax({
            url: "AJAX_edit_information.php", 
            type: "POST",
            data: "content="+content,     
            success: function (msg) {
                //alert('blabla..');
            }       
        });
    });
}); 
```

AJAX_edit_information.php 包含一些检查，用于提交数据的代码是：

```
$inhoud = html_entity_decode(stripslashes($_POST['content']));
$query = "UPDATE informatie SET inhoud='$inhoud' WHERE id='1'";
$result = mysql_query($query); 
```

到目前为止，我测试的大多数东西都有效，除了编码的奇怪字符。

在我提取数据的页面上，我有以下代码：

```
$query = "SELECT * FROM informatie";
$result = mysql_query($query);
$row = mysql_fetch_array($result);
echo html_entity_decode(stripslashes($row['inhoud'])); 
```

当我看到文本时，我得到了一些奇怪的字符，例如：%u0308、%u0301o、%u0301.. 现在是我的问题，我在我的过程中监督什么.. 谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T17:01:03.213

我解决了问题..

声明 TinyMCE 编辑器时，您可以选择：

```
tinyMCE.init({
        ...
        entity_encoding : "raw"
}); 
```

此选项控制 TinyMCE 如何处理实体/字符。可以按照下面的编码类型中所示设置该值。

更多信息查看：[http ://www.tinymce.com/wiki.php/Configuration:entity_encoding](http://www.tinymce.com/wiki.php/Configuration:entity_encoding)

# php - getting top users uploaded pictures using php

> ID：15976359
> 
> 赞同：0
> 
> 时间：2013-04-12T16:23:51.547
> 
> 标签：php, mysql, laravel

guys im using the laravel framework version 3 , i wanna to get the most 10 active users (who uploaded huge number of pictures) . my tables structres : *Users* :

```
id,username .. 
```

*Images* :

```
id,user_id,views.. 
```

then i want to show the total of views of their pictures exmaple : views of the pic 1 is : 150 views of the pic 2 is : 100 so the total of that users will be 250 and so on . can anyone help plz?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:49:40.540

SQL 查询将是这样的：

```
SELECT
  COUNT(*) as numPics,
  SUM(p.views) as totalViews
FROM
  pics p
INNER JOIN
  users u
ON
  p.user_id = u.id
GROUP BY p.user_id
ORDER BY numPics DESC LIMIT 10 
```

但是，根据您拥有的数据量，我强烈建议您避免这种实时聚合并寻求缓存它。

# jquery - hover on one image to fade swap a different image or the div containing the image's background image?

> ID：15976360
> 
> 赞同：-3
> 
> 时间：2013-04-12T16:23:51.637
> 
> 标签：jquery, image, hover, toggleclass

I have a div containing 4 images in a row and a div the length of all 4 on the next row.

What I want to do is apply the hover and toggleclass functions so that when you hover over each of the 4 top row images the div below's background image changes. Is this possible? How would I do it?

```
<div id="float3_1">
<img id= "twit" src= "face.jpg" width= "240px"> 
<img id = "twit" src= "twit.jpg" width= "240px"> 
<img id= "twit" src= "goog.jpg" width= "240px"> 
<img idc= "twit" src= "insta.jpg" width= "240px"> 
<div class="divbelow"></div>
</div>

<script type= "text/javascript">
$('#twit').hover(function () {
$(.divbelow).toggleClass('image1', 500);
}, function () {
$(this).toggleClass('image1', 1000 );
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:47:53.773

下面的代码你可以在这里看到它工作：http: [//fiddle.jshell.net/FuzaC/2/](http://fiddle.jshell.net/FuzaC/2/)

```
<div class="float3_1">
    <img class= "twit" src= "http://www.codeproject.com/KB/IP/ZetaTwitter/zetatwitter-03.png" width= "100"/> 
    <img class= "twit" src= "http://higher-and-higher.com/wp-content/uploads/2010/12/twitter-icon-1a.png" width= "100"/> 
    <img class= "twit" src= "http://tapdesigner.com/wp-content/uploads/2012/04/twitter.png" width= "00"/> 
    <img class= "twit" src= "http://cdn1.iconfinder.com/data/icons/yooicons_set01_socialbookmarks/256/social_twitter_box_blue.png" width= "100"/> 
</div>
<div id="div" style="height:256px">Content of the div</div>

<script type= "text/javascript">
$(function(){
    $('.twit').mouseenter(function(){
        $('#div').css('background','url('+$(this).attr('src')+')');
    });
});
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:50:24.257

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js" type="text/javascript"></script>

<style>
    img { margin:0px; padding: 0px; float:left}
    .image1 { background-color:#333; }
    .image2 { background-color:#f00; }
    .image3 { background-color:#0f0; }
    .image4 { background-color:#00f; }
    #divbelow {clear:left}
</style>

<div id="float3_1">
    <img id="twit1" src="face.jpg" width="25%">
    <img id="twit2" src="twit.jpg" width="25%">
    <img id="twit3" src="goog.jpg" width="25%">
    <img id="twit4" src="insta.jpg" width="25%">
    <div id="divbelow">foo</div>
</div>

<script type= "text/javascript">
$(document).ready(function() {
    $('#float3_1 img').hover(function (e) {
        var imgclass='image'+((e.target.id).split('twit'))[1];
        console.log(imgclass);
        $('#divbelow').toggleClass(imgclass, 500);
    });
});
</script> 
```

# sql - 尝试传递一组值以使用“IN”进行搜索

> ID：15976366
> 
> 赞同：1
> 
> 时间：2013-04-12T16:24:10.633
> 
> 标签：sql, vb.net, ms-access

我在 Access 中存储了一个简单的访问查询，但它似乎不起作用。查询是这样的...

```
SELECT blah FROM table WHERE (((tableID) IN ([@myArrayOfIDs]))); 
```

很简单，但当然它只是不想工作？如果我写 IN (16,17,21) 那么结果会正确返回，但是按照我现在的方式，什么也没有回来。我错过了什么？

编辑：在将数组传递给 Access 之前，我使用 VB.NET 将数组转换为逗号分隔值的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:29:07.063

你得到的只是 IN(['16,17,21'])，它不是测试单个数字。我不记得 Access 支持多个可变数量的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:29:23.337

Access db 引擎将不接受`IN`值列表的参数。IOW，这样的事情永远不会奏效......

```
tableID IN ([a_parameter_string]) 
```

您需要动态创建 SQL 语句并将逗号分隔值的字符串插入 SQL 语句文本。

或者你可以做这样的事情......

```
"," & [a_parameter_string] & "," Like "%," & tableID & ",%" 
```

但是那个看起来很丑，并且不能使用索引检索来加速查询。

# python - f2py 函数发布 GIL

> ID：15976369
> 
> 赞同：4
> 
> 时间：2013-04-12T16:24:16.227
> 
> 标签：python, numpy, fortran, gil, f2py

当我调用 f2py 包装函数时，全局解释器锁 (GIL) 是否会被释放？

（我很高兴自己尝试发现，但我对 numpy 的来源不够熟悉，不知道从哪里开始寻找）......

澄清一下，对这个问题的一个好的回答*要么*帮助我知道在 numpy 源中寻找 a 的位置，`Py_BEGIN_ALLOW_THREADS` *要么*它只会让我知道 GIL 是否已发布（最好有一些证据）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T04:08:22.857

不，f2py 默认保留 GIL。`threadsafe`但是，您可以通过添加指令来释放 GIL 。

例子：

```
subroutine foo(a)
!f2py threadsafe
!f2py intent(out) :: a
integer a
a = 5
end subroutine foo 
```

现在编译它：

```
f2py -c -m foo --build-dir test_build foo.f90 
```

我们可以查看源代码：

```
grep THREAD test_build/src.*/*.c
build/src.linux-x86_64-2.7/testmodule.c:      Py_BEGIN_ALLOW_THREADS
build/src.linux-x86_64-2.7/testmodule.c:      Py_END_ALLOW_THREADS 
```

但是，如果我们重复删除该`!f2py threadsafe`行的过程，则不包括释放 GIL 的宏。

# android - 无法编译着色器，日志中没有任何内容

> ID：15976370
> 
> 赞同：2
> 
> 时间：2013-04-12T16:24:19.243
> 
> 标签：android, opengl-es, opengl-es-2.0, shader, libgdx

我尝试在三星 Galaxy Gio S5660 上运行我的游戏。有些着色器编译成功，有些则没有。日志中没有任何相关内容（ShaderProgram.getLog()）。

**日志：**

```
--From Fragment Shader:
--From Vertex Shader: 
```

有没有办法获得有关错误的更多信息。离线编译？

# javascript - 连接和扩展谷歌地图上的多边形编辑功能

> ID：15976373
> 
> 赞同：1
> 
> 时间：2013-04-12T16:24:29.003
> 
> 标签：javascript, events, google-maps-api-3

在我的用例中，我们允许用户在地图上定义“区域”（多边形）。只需设置即可启用基本的多边形编辑功能，`editable: true`效果很好。但是，我需要一些额外的功能。

例如，当用户开始拖动一个顶点时，我想突出显示其他多边形上附近的顶点，如果用户拖动其中一个顶点，它将“捕捉”他们拖动的顶点的纬度/经度，使其与被拖过来的顶点。

有没有人成功地在编辑过程中插入了一些“额外”的代码？在那些顶点句柄（拖动、鼠标移动等）上是否有任何中间事件被触发，我可以在地图上挂钩、解释和绘制一些额外的东西？我希望有人能告诉我“哦，如果`polygon.obfuscatedVariable`设置了，那些是拖动手柄，你可以监听 mousemove on `polygon.obfuscatedVariable[3]`，检索纬度/经度等。”

黑客和陪审团操纵的解决方案是可以接受的：由于内置编辑非常接近我想要的，我真的不想从头开始重新创建它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-25T12:47:05.413

我已经忘记了这个问题，但这是我们解决问题的方法。希望对您有所帮助！

简洁版本：

每当 a`mousedown`出现在形状上时，检查它是否在顶点上，如果是，则用于保存对表示顶点句柄`elementFromPoint`的实际 HTML 的引用。`<div>`在后续`mousemove`和`mouseup`事件中，您可以轮询此的屏幕位置`<div>`并将其与地图上其他点的位置进行比较。

长版：

我已经从我们的应用程序中提取了相关功能，因此您需要忽略我们的一些特定功能和对象等，但这确实显示了我们正在工作的“snap-to-point”实现。

首先，我们将进行像素到纬度经纬度的转换，因此您需要在某处定义一个简单的叠加层（您总是需要一个来进行这些计算）：

```
_this.editor.overlay = new g.maps.OverlayView();
_this.editor.overlay.draw = function () {};
_this.editor.overlay.setMap(This.map); 
```

现在，只要我们在地图上初始化了一个形状，我们就会`mousedown`向它添加一个事件处理程序。

```
g.maps.event.addListener(_this.shape, 'mousedown', function (event) {
  if (event.vertex >= 0) {
    var pixel =  _this.editor.overlay.getProjection().fromLatLngToContainerPixel(_this.shape.getPath().getAt(event.vertex));
    var offset = _this.mapElement.offset();
    var handle = document.elementFromPoint(pixel.x + offset.left, pixel.y + offset.top);

    if (handle) {
      _this.dragHandle = $(handle);
      _this.snappablePoints = _this.editor.snappablePoints(_this);
    } else {
      _this.dragHandle = null;
      _this.snappablePoints = null;
    }
  }
}); 
```

（您会注意到对 的调用`snappablePoints`，它只是一个内部实用程序函数，它收集所有对该点有效的点。我们在这里这样做是因为在每个单个 上执行这将是一个昂贵的循环`mousemove`。）

现在，在我们形状的`mousemove`监听器中，因为我们已经保存了对它的引用，所以`<div>`我们可以轮询它的屏幕位置并将其与地图上其他点的屏幕位置进行比较。如果一个点在某个像素范围内（我认为我们的像素是 8 个像素），我们保存它并悬停一个小图标，告诉用户我们要捕捉。

```
g.maps.event.addListener(this.shape, 'mousemove', function (event) {
  var projection, pixel, pixel2, offset, dist, i;

  if (event.vertex >= 0 && this.dragHandle) {
    // If dragHandle is set and we're moving over a vertex, we must be dragging an
    // editable polygon point. 

    offset = this.editor.mapElement.offset();
    pixel = {
      x: this.dragHandle.offset().left - offset.left + this.dragHandle.width() / 2,
      y: this.dragHandle.offset().top - offset.top + this.dragHandle.height() / 2
    };

    // Search through all previously saved snappable points, looking for one within the snap radius.
    projection = this.editor.overlay.getProjection();
    this.snapToPoint = null;
    for(i = 0; i < this.snappablePoints.length; i++) {
      pixel2 = projection.fromLatLngToContainerPixel(this.snappablePoints[i]);
      dist = (pixel.x - pixel2.x) * (pixel.x - pixel2.x) + (pixel.y - pixel2.y) * (pixel.y - pixel2.y);

      if (dist <= SNAP_RADIUS) {
        this.snapToPoint = this.snappablePoints[i];
        $('#zone-editor #snapping').css('left', pixel.x + 10 + offset.left).css('top', pixel.y - 12 + offset.top).show();
        break;
      }
    }

    if (!this.snapToPoint) {
      $('#zone-editor #snapping').hide();
    }
  }); 
```

当用户停止移动鼠标时进行一点清理：

```
g.maps.event.addListener(this.shape, 'mouseup', function (event) {
  // Immediately clear dragHandle, so that everybody knows we aren't dragging any more.
  // We'll let the path updated event deal with any actual snapping or point saving.
  _this.dragHandle = null;
  $('#zone-editor #snapping').hide();
}); 
```

最后，我们实际上处理了“捕捉”，这实际上只是形状路径上的事件侦听器中的一小部分逻辑。

```
g.maps.event.addListener(this.shape.getPath(), 'set_at', function (index, element) {
  if (this.snapToPoint) {
    // The updated point was dragged by the user, and we have a snap-to point.
    // Overwrite the recently saved point and let another path update trigger.
    var point = this.snapToPoint;
    this.snapToPoint = null;
    this.shape.getPath().setAt(index, point);
  } else  {
    // Update our internal list of points and hit the server
    this.refreshPoints();
    this.save();
  };

  // Clear any junk variables whenever the path is updated
  this.dragHandle = null;
  this.snapToPoint = null;
  this.snappablePoints = null;
}); 
```

鳍。

# mysql - MySQL：当特定类型的记录不在另一个表中时如何加入

> ID：15976380
> 
> 赞同：0
> 
> 时间：2013-04-12T16:25:00.467
> 
> 标签：mysql, outer-join

我的大脑在这个问题上变得糊涂，但我怀疑有一个简单的答案。

我有一张戏剧表演表，还有一张这些表演的评论表。评论有一个标志来表示该评论是内部评论还是观众评论，即 1 表示内部评论，0 表示观众。

现在，我想做的是退回所有没有内部审查的节目。我尝试了以下，但没有结果（显然是因为我冲突 r.id is NULL and r.author = 1）

```
 SELECT s.title FROM shows s LEFT OUTER JOIN reviews r ON s.id = r.showid WHERE r.id is NULL AND r.author = 1 
```

如果我取消 r.author = 1，那么我会得到结果，但如果有观众评论，则会出现误报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:26:16.320

`r.author = 1`在加入之前先将`ON`子句转移到过滤表。`reviews``shows`

```
SELECT s.title 
FROM   shows s 
       LEFT OUTER JOIN reviews r 
          ON s.id = r.showid AND 
             r.author = 1
WHERE  r.showid is NULL 
```

`ON`和之间的区别在于`WHERE`，`ON`在加入另一个表之前过滤来自特定表的行，而在加入表`WHERE`之后过滤结果。

# php - PHP：用动态数字替换占位符（分隔符，正则表达式）

> ID：15976386
> 
> 赞同：0
> 
> 时间：2013-04-12T16:25:15.527
> 
> 标签：php, regex, replace, delimiter

亲爱的 stackoverflow 社区，

我目前正在为一个网站制作自己的模板系统，在该系统中，我可以用 php 代码替换 {$stuff} 样式的模板占位符。我有以下代码：

```
/**
 * Replace a default placeholder.
 *
 * @access    public
 * @param     string $replace     Placeholder name
 * @param     string $replacement Text with which to replace placeholder.
 * @uses      $leftDelimiter
 * @uses      $rightDelimiter
 * @uses      $template
 */
public function assign($replace, $replacement) {
    $this->template = str_replace( $this->leftDelimiter .$replace.$this->rightDelimiter,
                                   $replacement, $this->template );
} 
```

在这种情况下，leftDelimiter 和 rightDelimiter 分别是 {$ 和 }。

现在我想添加一个新函数来动态解析包含数字的占位符 - 例如，{$image_1}、{$image_2}、{$image_3} 并让我使用其中包含的数字作为我的替换代码，例如以便我替换{$image_1337} 带有来自 id 为“1337”的行的 mysql 数据库条目。

我该怎么做呢？可悲的是，由于我缺乏编码词汇和解释能力，广泛的谷歌搜索和询问朋友让我失望了。它可能与正则表达式有关，但我绝对不能用我的大脑来围绕它们，并且所有构建合适表达式的尝试都失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:33:21.980

使用[`preg_replace`](https://www.php.net/manual/en/function.preg-replace.php)代替`str_replace`：

```
preg_replace("/\\{\\\$image_(\d).*?\\}/", "$1", $template) 
```

这个简单的例子`{$image_2}`用`2`等替换了。

如果您需要在替换中使用真正的逻辑，您有两种选择：

1.  用于[`preg_match_all`](https://www.php.net/manual/en/function.preg-match-all.php)在模板中查找模式的所有实例。然后您可以遍历实例，并使用普通`str_replace($match, $your_smart_replacement, $template)`

2.  使用[`preg_replace_callback`](https://www.php.net/manual/en/function.preg-replace-callback.php)允许回调函数生成替换。

# c++ - 并行读取多个文件

> ID：15976387
> 
> 赞同：2
> 
> 时间：2013-04-12T16:25:17.457
> 
> 标签：c++, boost, io, signal-processing

我在 C++ 中有一个跨平台项目，我在其中实时混合音频。我有几个独立的轨道作为输入，我从磁盘上的单独文件中读取。然后我混合这些，应用一些处理，并用生成的音频吐出一个缓冲区。我遇到的问题是磁盘 IO 速度。对于我正在执行的当前测试，我有大约 10 个同时从磁盘读取的磁道。每个音轨都是原始 PCM、48000 HZ 16 位立体声。这意味着需要尽快读取大量数据。我已经通过 Boost 尝试了简单的 fread 调用和内存映射文件，但问题是一样的。首次打开文件时，通常会导致音频中断（可能是在文件被操作系统读入缓存时）。之后，一切运行顺利，没有出现故障。目前我在常见情况下每个文件使用一个线程，有时每个线程两个文件。通常，当我每个线程有两个文件时，就会发生流的停止/中断。请注意，我事先并不知道需要播放哪些输入文件，因为这是由用户控制的。所以我的问题是如何以这样的方式阅读这些初始块，这样我就不会陷入停滞/分手。此外，当加载新文件时，读取不一定要从头开始。所以我的问题是如何以这样的方式阅读这些初始块，这样我就不会陷入停滞/分手。此外，当加载新文件时，读取不一定要从头开始。所以我的问题是如何以这样的方式阅读这些初始块，这样我就不会陷入停滞/分手。此外，当加载新文件时，读取不一定要从头开始。

我有几个想法：

1.  我们可以通过在启动时读取所有文件但忽略数据来将文件预取到缓存中吗？我无法将其全部存储在内存中。但是依赖操作系统读取现金的内部行为似乎很糟糕，特别是因为这是跨平台的。

2.  我们是否可以使用 Ogg Vorbis 等格式进行压缩，将压缩数据完全加载到内存中，然后即时解码？我在想解码 10 个或更多 Vorbis 流可能太占用 CPU，但我还没有基准测试。至少通过这种方式，我们将其从 I/O 密集型任务转变为 CPU 密集型任务。

3.  我们可以做任何其他聪明的缓冲方法来使大读取更均匀分布吗？我对如何做到这一点知之甚少。

我被困在这一点上，如果有任何可能提高吞吐量的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:57:22.607

尝试使用事件处理进行文件加载。

这是您打开一堆文件描述符并让操作系统在数据可用时通知您的程序的地方。

[使用“select”（ http://linux.die.net/man/2/select](http://linux.die.net/man/2/select) ）执行此操作的最广泛可用的 api ，但是有更好的方法（poll、epoll、kqueue）。这些并非随处可见。

有一些库可以为你抽象出来（ libev 和 libevent ）。

所以你这样做的方式是，一个线程打开你需要的所有文件并在它们上设置一个“观察者”。当数据可用时，观察者触发，并调用回调。

优点是您没有大量线程等待和休眠检查所有打开的文件描述符。如果这不起作用，那么很可能您已经过度饱和了硬件的 io 带宽——在这种情况下，您只需要等待。如果是这种情况，那么您需要做一些缓冲以避免口吃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:09:37.100

根据经验，您需要在单独的线程中执行文件 IO 操作以进行实时操作。当用户想要混合第二个音频文件时，您可以打开一个新线程并读取第二个音频文件的前 N ​​个字节并将读取的数据返回到主线程。这也会导致延迟，但不会中断音频流。

# javascript - Jquery：使用复选框值更改现有价格

> ID：15976389
> 
> 赞同：0
> 
> 时间：2013-04-12T16:25:24.880
> 
> 标签：javascript, jquery, html

我有一个基本价格为 249.99 美元的结帐表格。用户可以选择以 99.99 美元的价格添加一张桌子和/或椅子。截至目前，价格发生了变化，但取消了基础价格而不是增加了基础价格。取消选择后，它实际上减去了基本价格，总共剩下 0 美元。

```
$(':checkbox').change(function(){
    var sum = 0;
    var names = $(':checked').map(function(){
        sum += (this.value - 0);
        return this.name;
    }).get().join(',');
    var spans = $('span.amount');
    spans[1].innerHTML = sum;
}); 
```

我在这里做了一个[小提琴](http://jsfiddle.net/XSCZ3/6/)来说明我的意思。那么我如何让基本价格保持在 249.99 美元并进行正确的数学计算呢？非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:28:16.383

为什么`sum = 0`？在给定的示例中不应该是 249.99 吗？

看看这个：

[http://jsfiddle.net/XSCZ3/7/](http://jsfiddle.net/XSCZ3/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:32:13.443

2个问题。

将总和更改为初始化为 249.99。

最后一行应该更改显示总和的 2 行代码。 [http://jsfiddle.net/XSCZ3/12/](http://jsfiddle.net/XSCZ3/12/)

你为什么只改变按钮价格。您应该更改小提琴顶部的按钮价格和最终价格标题。

```
$(':checkbox').change(function(){
    var sum = 249.99;
    var names = $(':checked').map(function(){
        sum += (this.value - 0);
        return this.name;
    }).get().join(',');
    //var spans = $('span.amount'); No need for this
    //spans[1].innerHTML = sum;  No need for this
    $('span.amount').text(sum); //Change to this.
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:29:00.403

只需初始化您的`sum`变量，如：`var sum = 249.99;`

演示：http: [//jsfiddle.net/darkajax/vANz4/](http://jsfiddle.net/darkajax/vANz4/)

# codeigniter - Codeigniter 缓存页面

> ID：15976392
> 
> 赞同：0
> 
> 时间：2013-04-12T16:25:39.790
> 
> 标签：codeigniter, session, caching, architecture

我有一个用 codeigniter 开发的网站。
在页面搜索中，我有一个表单，当我编译它时，我使用 CURL 向服务器发送请求并返回一个 xml。
这个查询和打印日期大约需要 15 秒，因为我必须对许多服务器进行更多查询，这个时间是必要的。
但问题是：我有一个元素列表，当我单击一个元素时，我会进行查询以检索元素的数据。
但是，如果我单击返回或单击返回搜索的所有元素，我不想进行其他需要 15 秒的查询。

当我搜索元素时，我有一个获取请求，并且我有一个这样的链接：

```
http://myurl/backend/hotel/hotel_list?nation=94&city=1007&check-in=12%2FApr%2F2013&check-out=13%2FApr%2F2013&n_single_rooms=1&n_double_rooms=0&n_triple_rooms=0&n_extra_beds=0 
```

我加载页面，我可以有更多的元素。我在一个简单的链接中单击其中的一些，如下所示：

```
http://myurl/backend/hotel/hotel_view?id_service=tra_0_YYW 
```

当我进入此页面时，我必须返回上一个 url（第一个）而不重新进行需要更多秒的查询。我无法缓存结果，因为它是一个实时数据库并且每分钟或每秒更改一次，但我想在我输入它时缓存页面搜索，如果我回到它，如果时间小于 2 分钟，则从缓存重新加载例子。
这是一个好方法还是在codeigniter中有一种更高效的方法来做到这一点？
我无法进行会话，因为数据量很大。

另一个解决方案是：
- 缓存页面（但我必须每分钟删除一次）
- 缓存结果（但我必须每分钟删除一次）
- 创建 sessionflashdata（但我有大量数据）

当我返回不重新制作页面时，浏览器有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:16:07.430

*   缓存页面（但每分钟我都必须删除它）

我认为您可以使用 codeigniter 的页面缓存功能“$this->output->cache(1);”轻松实现它

*   缓存结果（但每分钟我都必须删除它）您将不得不使用 codeigniter 的对象缓存方法来实现它。

*   创建 sessionflashdata （但我有大量数据） 在会话中保存大量数据不是一个好主意。而是使用“数据库会话”，这将帮助您处理类似的方式，并且 codeigniter 具有其集成支持。

希望这可以帮助。如果您刚开始使用它，您可以阅读有关[所有类型的 codeigniter 缓存的更多信息。](http://codesamplez.com/development/codeigniter-caching-tutorial-php)

# php - 网站重定向问题

> ID：15976394
> 
> 赞同：0
> 
> 时间：2013-04-12T16:25:49.140
> 
> 标签：php, html, wordpress, .htaccess

我一直在一个主要基于 PHP 的网站上工作。当用户访问像[http://robroscoe.ca/index.php](http://robroscoe.ca/index.php)这样的网站时，会被重定向到`http://robroscoe.ca`，我可以接受。我不满意的是，我的网页就像`robroscoe.ca/cv.php`您输入`robroscoe.ca/cv`重定向回`robroscoe.ca`. 我不确定这是怎么发生的，我想知道是否有人可以向我解释发生了什么。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

我认为该`.htaccess`文件与此有关，但我不确定如何修改它，因为 Wordpress 似乎在我不知情的情况下为我创建了它。任何帮助或阅读材料将不胜感激。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:49:05.577

您的问题是您创建了一个*与 WordPress 不同*的 PHP 脚本，并试图通过 WordPress 处理的“漂亮”URL 来访问它。WordPress 不知道名为“cv”的页面，并像处理任何其他 404 一样处理它。

我*强烈*建议您在 WP 中创建页面，以便它可以管理自己的“漂亮 URL”结构。

如果您一心想将自己的脚本硬塞进去，那么您可以轻松地为每个脚本手动编辑 .htaccess 文件。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^cv/?$ cv.php [L]   #new rule
RewriteRule ^index\.php$ - [L]  #this is made redundant by the very next line.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

# c# - 如何从 C# 打印修改后的 Word 模板？

> ID：15976396
> 
> 赞同：0
> 
> 时间：2013-04-12T16:25:50.447
> 
> 标签：c#, printing, ms-word

我创建了一个程序来读取 Word 模板并使用某些信息对其进行修改。但现在我想打印文档而不保存它。

```
 Word.Application wordApp = new Word.Application();
 Document wordDoc = new Document(); 
```

如何打印或打印预览`wordDoc`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:29:34.677

看起来该`document.PrintOut()`方法就是您正在寻找的方法。

检查[此链接](http://msdn.microsoft.com/en-us/library/vstudio/b9f0ke7y%28v=vs.100%29.aspx)以获取一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:31:33.127

你可以使用打印对话框

```
using (PrintDialog pd = new PrintDialog())
            {
                pd.ShowDialog();

                ProcessStartInfo info = new ProcessStartInfo(@"C:\documents\DOCNAME.DOC");

                info.Verb = "PrintTo";
                info.Arguments = pd.PrinterSettings.PrinterName;

                info.CreateNoWindow = true;

                info.WindowStyle = ProcessWindowStyle.Hidden;

                Process.Start(info);
            } 
```

# dns - 拥有包含重音字符的域的主要缺点是什么？

> ID：15976405
> 
> 赞同：3
> 
> 时间：2013-04-12T16:26:24.120
> 
> 标签：dns, hosting, special-characters

我正在考虑获取一个包含重音字符的域（它包含一个 á）。但是，我注意到只有一些公司提供它们。这些域是否存在一般性问题，或者在使用某个域时我会有某些缺点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T21:52:07.950

DNS 协议仅支持 ASCII。带有重音字符的域使用[Punycode](http://en.wikipedia.org/wiki/Punycode)编码为 ASCII 。这意味着您的域`éxàmplê.com`实际上是`xn--xmpl-0na6cm.com`.

可以肯定的是，有很多软件不支持[国际化域名](http://en.wikipedia.org/wiki/Internationalized_domain_name)(IDN)。您可以在自己的环境中进行测试，并决定域名中丰富字符集的优势是否值得。

这里只是要检查的几件事，就在我的脑海中。

*   您的网络浏览器是否支持 IDN？（可能确实如此）。
*   您的网站访问者使用的所有网络浏览器是否都支持它们？
*   您的电子邮件服务器软件是否支持它们？
*   您的邮件用户代理是否支持它们（即当您使用电子邮件地址配置电子邮件帐户时它是否工作`myself@éxàmplê.com`）？
*   您所有的电子邮件通讯员使用的邮件服务器和邮件用户代理软件是否支持 IDN？
*   您的 SSH 客户端是否接受 IDN ( `ssh myserver.éxàmplê.com`)？
*   您的系统日志服务器是否支持它们？你的数据库客户端？您的负载均衡器（如果您使用名称，而不是 IP 地址）？
*   他们在工作`/etc/hosts`吗？
*   您的 DHCP 客户端和服务器能否处理 DNS 域中的重音字符？
*   ETC...
*   *还有很多*！

很多人的答案可能是否定的。在这种情况下，您始终可以使用域的原始 punycoded 形式配置有问题的特定软件，但是您真的要写入`xn--xmpl-0na6cm.com`配置文件并在服务器日志中查看该字符串吗？

# java - Objectify 和 TimerTask：没有为此线程注册 API 环境

> ID：15976406
> 
> 赞同：5
> 
> 时间：2013-04-12T16:26:38.120
> 
> 标签：java, google-app-engine, scheduled-tasks, objectify, servletcontextlistener

我正在尝试`TimerTask`设置以定期从 Google App Engine 的数据存储中删除条目。所以我`ServletContextListener`用`Timer`.

在里面`contextInitialized`，我已经注册了我的 Objectify 类：

```
ObjectifyService.register(Person.class); 
```

但是，当任务实际运行时，它会抱怨没有设置 API 环境：

```
Exception in thread "Timer-0" java.lang.NullPointerException: No API environment is registered for this thread.
    at com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppId(DatastoreApiHelper.java:80)
    at com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppIdNamespace(DatastoreApiHelper.java:90)
    at com.google.appengine.api.datastore.Query.<init>(Query.java:214)
    at com.google.appengine.api.datastore.Query.<init>(Query.java:143)
    at com.googlecode.objectify.impl.cmd.QueryImpl.<init>(QueryImpl.java:72)
    at com.googlecode.objectify.impl.cmd.LoadTypeImpl.createQuery(LoadTypeImpl.java:50)
    at com.googlecode.objectify.impl.cmd.LoadTypeImpl.filter(LoadTypeImpl.java:58)
    at myApp.MyServletContextListener$MyTask.run(MyServletContextListener.java:58)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505) 
```

有任何想法吗？我尝试将注册类的行更改为，`ObjectifyService.factory().register(Person.class);`但似乎没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T19:22:40.633

从[类的](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)[文档`java.util.Timer`](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)：

> 每个 Timer 对象对应的是单个后台线程。

并且查看[类](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Timer.java#100)[的内部代码`java.util.Timer`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Timer.java#100)，我们可以看到它基本上是通过调用来实例化线程`new Thread()`。

同时，来自[App Engine 的](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)关于在其 Java 沙箱中使用线程的文档：

> 您必须使用[ThreadManager](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager)上的一种方法来创建线程。**您不能自己调用​​ new Thread()**或使用默认线程工厂。

所以这里发生的事情是`Timer`对象实例化了它们自己的线程，然后执行 Objectify 查询，但是由于在 ThreadManager 之外实例化的线程没有为它们设置适当的 App Engine API 环境，它会引发异常。

您需要重构代码以避免使用 Timer 和 TimerTask 类，而使用基本线程。例如，而不是使用：

```
import java.util.Timer;
import java.util.TimerTask;

...

Timer timer = new Timer();
timer.schedule( new TimerTask()
{
    @Override
    public void run()
    {
        // Objectify query here.
    }
}, 5000 ); 
```

您可以改为使用：

```
import com.google.appengine.api.ThreadManager;

...

final long tScheduleDelay = 5000;
ThreadManager.createThreadForCurrentRequest( new Runnable()
{
    @Override
    public void run()
    {
        try
        {
            Thread.sleep( tScheduleDelay );
        }
        catch ( InterruptedException ex )
        {
            // log possible exception
        }

        // Objectify query here.
    }
} ).start(); 
```

# php - 从其他网站下载时重命名文件

> ID：15976408
> 
> 赞同：0
> 
> 时间：2013-04-12T16:26:48.157
> 
> 标签：php, .htaccess, download, rename

我正在尝试重命名文件并为用户下载！

示例... 在我的网站中，我提议从我的网站链接下载 Google 徽标！ [http://www.mywebsite.com/files/logo-mysite.jpg](http://www.mywebsite.com/files/logo-mysite.jpg)

然后文件在用户计算机中保存为 logo-mysite.jpg，但实际文件是从[https://www.google.co.in/images/srpr/logo4w.png下载的](https://www.google.co.in/images/srpr/logo4w.png)

我们可以通过将图像从[https://www.google.co.in/images/srpr/logo4w.png](https://www.google.co.in/images/srpr/logo4w.png)临时保存到我们的网站，然后在下载时自动删除或在 1 小时内自动删除！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:30:12.657

您可以通过添加 content-disposition 标头来建议下载的文件名：

```
header('Content-disposition', 'attachment;filename=logo-mysite.jpg');
die(file_get_contents('https://www.google.co.in/images/srpr/logo4w.png')); 
```

显然这会带来问题，因为您正在下载带有 jpg 扩展名的 png 文件，但我只是在关注您的问题......要转换图像，您需要添加一些 GD2 代码行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:35:35.563

使用该`header()`函数设置用户将下载的名称：

```
header('Content-Type: image/png');
header('Content-Disposition: attachment; filename=logo-mysite.png');

// Open the new file, and dump it out to the user
$handle = fopen( "https://www.google.co.in/images/srpr/logo4w.png" );
fpassthru( $handle );
fclose( $handle ); 
```

如果你真的想将它从 jpg 转换为 png，你需要通过 ImageMagick 或类似的方法来运行它。

# asp.net - 浏览器问题：如何检查发送到页面的内容（IE 版本 10）

> ID：15976414
> 
> 赞同：1
> 
> 时间：2013-04-12T16:27:06.123
> 
> 标签：asp.net, firefox, user-interface, internet-explorer-9, internet-explorer-10

我有一个 ASP.net 网站，它在 IE9、Mozilla、chrome 上运行良好，但在 IE 10 用户上却有很多问题。UI 甚至功能（如单击按钮、登录/注销不起作用）都不适用于 IE10。

我的IE版本是10.0.9200.16519。

我看到来自 IE10 和 google-chrome（甚至 IE9）的视图源之间几乎没有区别，但不能理解很多。

我实际上在站点的哪个位置可以检查为什么发送到 IE 10 浏览器的页面与其他浏览器或 IE9 不同？

请建议我如何进一步调试？

PS：该网站在 IE9 及以下版本的 IE 下运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:18:02.960

ASP.NET 无法识别 IE10 的用户代理字符串，因此可能会发回损坏的代码。这已经在各个地方进行了讨论，但最引人注目的可能是 Scott Hanselman 的博客。请参阅标题为“[错误和修复：ASP.NET 无法检测 IE10 导致`_doPostBack is undefined`JavaScript 错误或保持 FF5 滚动条位置](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)”的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:34:36.030

检查是否有js错误，使用IE开发者工具栏（F12）调试脚本

# breeze - 如何确定 Decimal 类型的精度和小数位数？

> ID：15976420
> 
> 赞同：0
> 
> 时间：2013-04-12T16:27:27.437
> 
> 标签：breeze

微风元数据似乎不包括小数类型的精度和小数位数。它只是将属性标识为“十进制”。该信息在 EF 型号中可用。这是可以添加到元数据中的东西，还是信息已经存在于某处但我只是没有看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:30:01.720

We don't expose it in the metadata right now, but it is a reasonable request. Can you add this to the [Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions) ? We use this to prioritize new features and take it very seriously.

We have also discussed 'formally' supporting extensible metadata. I say formally because there is nothing stopping you from adding additional properties to the 'dataProperty' metadata objects right now.

# c# - 使用 .NET/WinRT 混合设置 Windows 8 帐户图片

> ID：15976422
> 
> 赞同：1
> 
> 时间：2013-04-12T16:27:35.437
> 
> 标签：c#, windows-8, windows-runtime

基本上我正在尝试从“控制台应用程序”设置 Windows 8 帐户图片。我发现的唯一设置图片的 API 是在 WinRT API 中。基本上相同的问题（[Windows 8 Set User Account Image](https://stackoverflow.com/questions/13883096/windows-8-set-user-account-image)）让我至少能够构建混合，但它似乎没有工作。

```
private static async Task SetAccountPicture(string employeeId)
{
    // Download image
    string imagePath = DownloadImage(employeeId);

    // Set account picture
    Stream fileStream = File.Open(imagePath, FileMode.Open);
    IRandomAccessStream winRTStream = await DotNetToWinRTStream(fileStream);
    SetAccountPictureResult result = await UserInformation.SetAccountPicturesFromStreamsAsync(null, winRTStream, null);

    // Clean up download file
    File.Delete(imagePath);
}

public static async Task<IRandomAccessStream> DotNetToWinRTStream(Stream dotNetStream)
{
    IBuffer buffer;
    var inputStream = dotNetStream.AsInputStream();
    using (var reader = new DataReader(inputStream))
    {
        await reader.LoadAsync((uint)dotNetStream.Length);
        buffer = reader.DetachBuffer();
    }

    var memoryStream = new InMemoryRandomAccessStream();
    await memoryStream.WriteAsync(buffer);
    return memoryStream;
} 
```

SetAccountPictureResult 说“失败”，没有任何其他信息。这里会发生什么？

# android - android - 我怎样才能有时间睡觉

> ID：15976432
> 
> 赞同：2
> 
> 时间：2013-04-12T16:28:16.347
> 
> 标签：android

有谁知道获取设备睡眠时间的方法？我正在尝试获取设备电池的唤醒时间，我可以使用 SystemClock 获取自启动以来的总时间，但他们没有睡眠时间的方法。如果我能获得睡眠时间，我可以做 totalTime - sleepTime 并获得 awakeTime，但不确定如何获得睡眠时间。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:40:04.553

`SystemClock.elapsedRealtime()`是“系统启动后的时间，包括深度睡眠”。

`SystemClock.uptimeMillis()`“自系统启动后以毫秒为单位计数。当系统进入深度睡眠（CPU 关闭、显示变暗、设备等待外部输入）时，此时钟停止，但不受时钟缩放、空闲或其他省电机制的影响。 "

因此，`SystemClock.elapsedRealtime()-SystemClock.uptimeMillis()`应该是“深度睡眠”的时间量。

# actionscript-3 - 在 MovieClip 中访问 MovieClip

> ID：15976434
> 
> 赞同：0
> 
> 时间：2013-04-12T16:28:20.397
> 
> 标签：actionscript-3, oop, flash-cs5

我有一个名为 Tile 的 MovieClip，它有自己的类。我在 for 循环中有以下代码，它创建了一个网格。

```
var tile:MovieClip = new Tile();
tile.gotoAndStop(Floor1[i][u]+1);
tile.x = ((u-i)*tileh)+365;
tile.y = ((u+i)*tileh/2)+70;
addChild(tile);

tile.addEventListener(MouseEvent.ROLL_OVER, mouseover); 
```

现在，在 Tile 中还有另一个移动剪辑，称为 Outline。它不是一门课。我想要做的是当我用鼠标滚动平铺变量时让大纲动画剪辑转到一个帧。

下面是鼠标事件的函数。我试过 event.currentTarget.Outline.gotoAndStop(3) 但它似乎不起作用。我收到参考错误 #1069：在 Tile 上找不到属性大纲，并且没有默认值。

```
function mouseover(event:MouseEvent)
        {
            event.currentTarget.Outline.gotoAndStop(3);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:46:08.127

（`Outline`所有变量都应该小写，顺便说一下驼峰式。大写暗示它是一个类名）是公共变量吗？您应该在全局范围内声明 Outline，如下所示：

```
package com.blah.blah
{
    public class Tile extends DisplayObjectContainer {

        public var outline:DisplayObject;

        public function Tile() {
            // instantiate outline here
        }
    }
} 
```

访问修饰符的基本解释：

*   **Public** : 可以从任何类访问
*   **Private** : 只能从它声明的类访问
*   **内部**：只能由同一包中的类访问
*   **静态**：只存在一个实例，只能通过类作用域访问（Class.function()）
*   **受保护**的：只有扩展该类的类才能访问该对象
*   **Final** : 孩子不能覆盖该功能

# c - strtok 和自由

> ID：15976435
> 
> 赞同：3
> 
> 时间：2013-04-12T16:28:23.693
> 
> 标签：c, free, strtok

这样做有什么问题：

```
void *educator_func(void *param) {
char *lineE = (char *) malloc (1024);
size_t lenE = 1024;
ssize_t readE;

FILE * fpE;

fpE = fopen(file, "r");

if (fpE == NULL) {
    printf("ERROR: couldnt open file\n");
    exit(0);
}

while ((readE = getline(&lineE, &lenE, fpE)) != -1) {
    char *pch2E = (char *) malloc (50);

    pch2E = strtok(lineE, " ");

    free(pch2E);
}

free(lineE);
fclose(fpE);

return NULL;
} 
```

如果我删除该行`'pch2E = strtok(lineE, " ");'`它工作正常...

为什么我不能在`strtok()`那里做？我也尝试过，`strtok_r()`但没有运气，它给了我无效的免费（地址 0x422af10 在大小为 1,024 的块内是 0 个字节）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:32:48.417

你的代码没有做你认为它正在做的事情......调用`pch2E = strtok(lineE, " ");`是用它`pch2E`的返回值替换值，`strtok`或者`lineE`是新分配的替换`lineE`

您可以按以下方式修复它...

```
int firstPass = 1;
while ((readE = getline(&lineE, &lenE, fpE)) != -1) 
{
    char* pch2E = strtok( firstPass ? lineE : NULL, " ");
    firstPass = 0;
}

free(lineE); 
```

我应该补充一点，我越看你的代码，它在我看来就越有根本性的缺陷。您的代码中需要一个内部循环来处理标记，而外部循环正在加载行......

```
while ((readE = getline(&lineE, &lenE, fpE)) != -1) 
{
    char* pch2E;
    int firstPass = 1;

    while( (pch2E = strtok( firstPass ? lineE : NULL, " ")) != NULL )
    {
        firstPass = 0;
        // do something with the pch2E return value
    }
}

free(lineE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:44:51.247

strtok 返回一个指向令牌的指针，该指针包含在您传递的字符串中，因此您无法释放它，因为它不（总是）指向您使用 malloc 分配的内容。

这种分配甚至不能在 C 中工作，如果你想要一个将令牌复制到缓冲区的函数，它会是这样的：

```
tokenize(char* string, char* delimiter, char* token); 
```

并且您需要将有效的指针传递给令牌，以便函数复制数据。在 C 中复制指针中的数据，函数需要访问该指针，因此函数不可能在返回值。

另一种策略（但最糟糕的）是在内部分配内存并返回指向需要由调用者释放的内存区域的指针的函数。

对于您的问题，需要多次调用 strtok 才能返回所有标记，直到它返回 null，所以它应该是：

```
while ((readE = getline(&lineE, &lenE, fpE)) != -1) {
    char *pch2E;

    pch2E = strtok(lineE, " "); //1st token

    while ((pch2E = strtok(NULL, " ")) != NULL) {
        //Do something with the token
    }
} 
```

# javascript - 打开一个javascript对话框以将完整的文件位置存储到一个var中

> ID：15976445
> 
> 赞同：0
> 
> 时间：2013-04-12T16:28:57.600
> 
> 标签：javascript

我需要你的帮助。

我想设计一个javascript函数，这样当我调用它时，它会打开一个对话框，要求我导航到选定的文件，一旦我点击“打开”按钮，它就会将文件的路径保存到一个变种。

你怎么做到这一点？我不喜欢 input type="file" 方法，因为我不需要那个特定的输入出现在我的页面上。

IE：

```
function getlocation() {
var x = popup the open file dialog box and let the user select a file
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:42:54.617

允许用户选择文件的唯一方法是使用`<input type="file" />`¹。您不必让此元素可见，只需在页面上即可。

当用户选择一个文件时，您所能得到的只是它的名称。你无法得到它的路径。另外，请注意文件上传元素是异步的。您需要使用`onchange`事件（回调）来获取名称。

您可以使用 隐藏上传元素`display: none`，然后让另一个 JavaScript 函数以编程方式触发它。（注意：此方法不适用于 Opera，可能还有其他浏览器。已在 Chrome、Firefox 和 IE 8/9 中测试过）

```
<style>
    #getFile{
        display: none;
    }
</style>

<input type="file" id="getFile" />
<button id="openFile" type="button">Click Me</button>

<script>
    var uploadElement = document.getElementById('getFile'),
        uploadTrigger = document.getElementById('openFile'),
        openFileUpload = function(){
            uploadElement.click();
        },
        alertValue = function () {
            alert(uploadElement.value);
        };

    if (window.addEventListener) {
        uploadTrigger.addEventListener('click', openFileUpload);
        uploadElement.addEventListener('change', alertValue);
    } else {
        uploadTrigger.attachEvent('onclick', openFileUpload);
        uploadElement.attachEvent('onchange', alertValue);
    }
</script> 
```

演示： http: [//jsfiddle.net/rJA7n/3/show](http://jsfiddle.net/rJA7n/3/show)（编辑：http: [//jsfiddle.net/rJA7n/3/](http://jsfiddle.net/rJA7n/3/)）

*在大多数*浏览器（包括 Opera）中应该工作的另一种方法是使文件上传元素“不可见”并在其顶部放置一个元素。因此，当您单击您认为是按钮的内容时，您实际上是在单击上传元素。AJAX 上传器（如[http://fineuploader.com/](http://fineuploader.com/)）使用此方法允许您“样式化”上传按钮。

```
<style>
    #getFile{
        width: 100px;
        opacity: 0;
        filter: alpha(opacity = 0);
    }

    #openFile{
        display: inline;
        margin-left: -100px;
        background-color: red;
        height: 30px;
        width: 100px;
        padding: 10px;
        color: white;
        text-align: center;
    }
</style>

<input type="file" id="getFile" />
<div id="openFile">Click Me</div>

<script>
    var uploadElement = document.getElementById('getFile'),
        alertValue = function(){
            alert(uploadElement.value);
        };

    if(window.addEventListener){
        uploadElement.addEventListener('change', alertValue);
    }
    else{
        uploadElement.attachEvent('onchange', alertValue);
    }
</script> 
```

演示： http: [//jsfiddle.net/cKGft/4/show/](http://jsfiddle.net/cKGft/4/show/)（编辑：http: [//jsfiddle.net/cKGft/4/](http://jsfiddle.net/cKGft/4/)）

[¹好吧，如果你想真正花哨，你*可以*使用拖放。我在这里做了一个快速演示：http: [//jsfiddle.net/S6BY8/2/show](http://jsfiddle.net/S6BY8/2/show)（编辑：http: [//jsfiddle.net/S6BY8/2/](http://jsfiddle.net/S6BY8/2/)）]

# .net - .NET Publish 不会产生与手动复制相同的结果

> ID：15976446
> 
> 赞同：1
> 
> 时间：2013-04-12T16:28:59.447
> 
> 标签：.net, deployment, publish

当我右键单击项目文件时，我正在使用 Visual Studio 2008 .NET 并尝试使用上下文菜单中的“发布”选项。理想情况下，这将仅部署运行项目所需的文件。我已选择在部署之前删除所有文件，包括 App_Data 文件夹和运行项目所需的文件。我的项目有几个正确引用的其他项目的 .dll。

我的问题如下......如果我将整个项目从本地驱动器手动复制到应用程序服务器，我不会遇到任何问题，但是，如果我使用“发布”选项，我可以让应用程序在其上运行应用程序服务器，但我最终遇到了表单身份验证错误。我已经检查了 EventViewer 错误中引用的帐户，该帐户是数据库中的 db_owner 并且没有被锁定。

我很困惑....有什么想法吗？

似乎只有当我选择仅包含运行应用程序所需的文件的选项时才会发生这种情况。如果我发布所有文件，我没有错误。

# java - Java Swing SearchBox Model

> ID：15976452
> 
> 赞同：3
> 
> 时间：2013-04-12T16:29:06.710
> 
> 标签：java, swing

I need search Box using Java Swing which shows suggestion from database when we type letters if we click on any suggestion it will perform some action . if it possible in java swing please give the source code

thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:36:36.933

You can use `DefaultComboBoxModel` , and the output will be like that.

![](https://i.stack.imgur.com/KZpXj.gif)

[**Try this**](http://www.roseindia.net/tutorial/java/swing/autosuggest.html)

* * *

In this code you will find `countries` array , so you need to take this array from your database

# javascript - 骨干视图未选择元素

> ID：15976455
> 
> 赞同：1
> 
> 时间：2013-04-12T16:29:07.507
> 
> 标签：javascript, jquery, backbone.js, backbone-views

这是我第一次使用 Backbone 创建视图，但我无法呈现对文档中现有元素的更改。

```
var ParamsView = Backbone.View.extend({

    el: $('#node-parameters'),

    initialize: function() {
        console.log('WOW');
    },

    render: function() {
        console.log('doing it');
        console.log(this.$el.length);
        console.log($('#node-parameters').length);
        this.$el.append('<span>hello world!</span>');
        return this;
    }

});

    var v = new ParamsView();
    v->render(); 
```

该词`hello world!`没有出现在目标中`div`。

渲染视图时，控制台会输出以下内容。

```
WOW
doing it
0
1 
```

所以我知道我的 jQuery 选择器`$('#node-parameters')`正在找到 1 个 DOM 元素，但视图没有使用它。

任何想法我做错了什么？

**编辑：**在 JS 调试器中，我可以看到`this.el`该视图未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:50:08.643

您的代码可能等同于：

```
var ParamsView = Backbone.View.extend({
    el: $('#node-parameters'),

    initialize: function() {
        console.log('WOW');
    },

    render: function() {
        console.log('doing it');
        console.log(this.$el.length);
        console.log($('#node-parameters').length);
        this.$el.append('<span>hello world!</span>');
        return this;
    }
});

$(document).ready(function() {
    var v = new ParamsView();
    v.render();
}); 
```

[http://jsfiddle.net/nikoshr/mNprr/](http://jsfiddle.net/nikoshr/mNprr/)

请注意，您的类是在*DOM 就绪事件*之前声明的。

您将 el 设置为延长时间`$('#node-parameters')`。`$`是一个立即执行的函数，但这就是为什么你得到一个未定义的元素，#node-parameters 在那个时候不存在。

通过使用 注入元素`new ParamsView({el: '#node-parameters'})`，您可以在 DOM 就绪事件之后设置一个有效的 el。你也可以通过

```
var ParamsView = Backbone.View.extend({
    el: '#node-parameters'
}); 
```

`el`然后在您实例化您的类时，在 DOM 就绪事件之后进行评估。[http://jsfiddle.net/nikoshr/mNprr/1/](http://jsfiddle.net/nikoshr/mNprr/1/)

# php - PHP：“智能”绝对路径与相对路径

> ID：15976462
> 
> 赞同：0
> 
> 时间：2013-04-12T16:29:18.070
> 
> 标签：php, relative-path, absolute-path

我正在为我的一个库编写一个路由器类。此类将保留某些路径的位置，但我想知道是否应该使用“智能”绝对路径、相对路径或两者（对于这种情况）将是同一件事。

Obs.1：当我写*“智能”绝对路径*是因为即使管理员将库移动到另一个位置，这个绝对路径也可以工作。

Obs.2：Stack 对此主题还有其他问题，但看起来它们与我要查找的内容无关，所以我提出了这个问题。

**第一个解决方案：**

`MyVendor/src/class/MyVendor/MyNamespace/Router.php`使用“智能”绝对路径

```
namespace MyVendor\MyNamespace;

class Router
{
    private $root;
    private $cache;

    public function __construct()
    {
        $this->setRootPath();
        $this->cache = "{$this->root}var/cache/";
    }

    public function setRootPath()
    {
        $currentDir = __DIR__;

        $exploded = explode("/", $currentDir);

        array_pop($exploded);   // Removing MyNamespace
        array_pop($exploded);   // Removing MyVendor
        array_pop($exploded);   // Removing class
        array_pop($exploded);   // Removing src

        $this->root = implode("/", $exploded)."/";
    }
} 
```

**第二种解决方案：**

`MyVendor/src/class/MyVendor/MyNamespace/Router.php`使用相对路径

```
namespace MyVendor\MyNamespace;

class Router
{
    private $root;
    private $cache;

    public function __construct()
    {
        $this->setRootPath();
        $this->cache = "{$this->root}var/cache/";
    }

    public function setRootPath()
    {
        $this->root = __DIR__."/../../../../";
        // ..(pointing to MyVendor)/..(pointing to class)/..(pointing to src)/..(pointing to the root, MyVendor)
    }
} 
```

Obs.3：请参阅第一个解决方案将使用以下链接：

```
root => `/var/www/myproject/vendor/MyVendor/`

cache => `/var/www/myproject/vendor/MyVendor/var/cache` 
```

第二个将使用如下链接：

```
root => `/var/www/myproject/vendor/MyVendor/src/class/MyVendor/MyNamespace/../../../../`

cache => `/var/www/myproject/vendor/MyVendor/src/class/MyVendor/MyNamespace/../../../../var/cache/` 
```

Obs.4：初始处理（使用array_pop）与我无关。

那么，我应该使用什么解决方案，为什么？还有另一种更好的方法吗（如果是，请编写一个路由器类替代方案）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:36:47.937

为什么不简单地要求呢？

```
namespace MyVendor\MyNamespace;

class Router
{
    private $root;
    private $cache;

    public function __construct($rootPath)
    {
        $this->root = $rootPath;
        $this->cache = "{$this->root}var/cache/";
    }
} 
```

注入根路径允许您的库的客户端将其（物理上）放置在他们想要的任何位置。在您的示例中，您假设根路径是 4 dir up；如果不是这样呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:42:08.703

首先，如果您决定使用它，我肯定会`realpath()`在您的相对路径工作中使用它（为开发人员简化它并使其更容易预测）。

其次，我会放弃你的 array_pop() 技术，如果你决定重新组织事情，它会很快崩溃。

我会选择一种`preg_replace('#^'.$FS_ROOT.'#', __FILE__);`类型方法来确定被调用的内容。

我认为你应该看看你的信息流的反向并传递你项目的“基础”，然后从那里确定一切。当您移动它或运行该代码的多个副本以进行开发时，这将为您省去很大的麻烦。

# python - 字典：如何找到元素的最大值

> ID：15976472
> 
> 赞同：0
> 
> 时间：2013-04-12T16:29:44.807
> 
> 标签：python, python-3.x

给定一本字典...

```
result={'A - - -': ['ALLY'], '- - A -': ['DEAL'], '- - - A': ['BETA'], '- - - -': ['COOL',    'ELSE', 'FLEW', 'GOOD', 'HOPE', 'IBEX']} 
```

我将如何将变量“答案”分配给具有最多元素的键？我试过了...

```
inverse=[(value,key) for key, value in result.items()]
Answer=max(inverse) 
```

但这让我无处可去。由于最大的家庭是 ['COOL', 'ELSE', 'FLEW', 'GOOD', 'HOPE', 'IBEX'] 我希望能够将 '- - - -' 分配给 'Answer'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:35:06.847

[`max()`](http://docs.python.org/3.3/library/functions.html#max)接受一个`key`关键字参数，它允许你给出一个排序函数：

```
>>> answer, _ = max(result.items(), key=lambda x: len(x[1]))
>>> answer
'- - - -' 
```

这将比构建一个额外的列表来排序更有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T16:31:47.267

您正在按列表本身而不是它们的长度进行排序：

```
inverse = [(len(value), key) for key, value in result.items()]
Answer = max(inverse)[1] 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-12T16:33:10.697

```
import operator
dict(sorted(result.iteritems(), key=operator.itemgetter(1), reverse=True)[:1]) 
```

你有你的最大值，现在只是给它分配一些东西？

# java - 超类方法的可访问性

> ID：15976473
> 
> 赞同：-7
> 
> 时间：2013-04-12T16:29:55.970
> 
> 标签：java, inheritance

我怀疑我们是否可以创建和引用一个类的对象并将其分配给它的子类。如果是这样，我们可以使用创建该对象的子类方法吗？

这是示例：

```
class Super_Class
{
}

class Sub_Class extends Super_Class
{
}

public class test
{
    public static void main(String a[])
    {
        Super_Class obj;
        obj= new Sub_Class;
    }
} 
```

方法的访问呢，我的意思是哪些类方法是可访问的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:33:52.090

将一种类型的对象分配给另一种类型的引用的经验法则是“isA”测试。如果您的超类是`Fruit`并且子类是`Banana`，您可以分配：`Fruit obj = new Banana()` **if** `Banana` isA `Fruit`。

我建议您对 Java 中的继承和类型系统有一个很好的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:41:13.500

您正在寻找的称为多态性，它是面向对象编程的主要部分

您可以使用界面来完成。

例如。

```
public interface myInterface {
  public void test();
  public int getInt();
}

public class Super_Class {
  public void test() {
 //code here
  }
}

public class Sub_Class extends Super_Class implements myInterface{

public int getInt() {
  return 0;
  }
} 
```

这意味着你可以像这样使用它

```
public static void main(String[] args) {
myInterface subClass = (myInterface) Sub_Class;
} 
```

您现在可以访问这两个类中的方法，只要它们在接口中定义即可。

请在[此处查看维基百科页面](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

# c# - 用于通知系统的 Jquery 观察者模式

> ID：15976479
> 
> 赞同：0
> 
> 时间：2013-04-12T16:30:22.450
> 
> 标签：c#, jquery, asp.net, observer-pattern

我一直在为通知系统做一些研究。在我的项目中，人们可以发布一些带有类别 ID 的问题。可以说，另一个用户想要关注该类别的所有问题。因此，如果我关注该类别，我希望立即收到所有这些问题的通知。

我不想每分钟都检查数据库是否有新问题，我想在插入新问题时得到通知。

我怎样才能做到这一点？

# c++ - 如何在 WP8 上使用 cpp 使用“Application.Current.Terminate”

> ID：15976483
> 
> 赞同：1
> 
> 时间：2013-04-12T16:30:28.497
> 
> 标签：c++, windows-phone-8, terminate

我正在为 Windows Phone 8 编写一个不带 XAML 的 C++ DirectX 应用程序。我处理了后退键，因为我想手动关闭应用程序，但我找不到 cpp 的 API。

C# 有官方 API `System.Windows.Application.Current.Terminate()`，但 cpp 没有命名空间`System::Windows::Application`。

我搜索了很多，但我只能找到 C# 方法。我试过`Windows::UI::Core::CoreWindow::GetForCurrentThread()->Close();`
它可以关闭应用程序，但它会导致 a `Platform::COMException`，并且无法通过 try-catch 解决。

**//////////////////更新1////////////**

我发现

```
int b = 0.1*10 - 1;
int a = 1/ b; 
```

应用程序也会退出。所以`Windows::UI::Core::CoreWindow::GetForCurrentThread()->Close();`不是关闭的方法。也许这只是一次崩溃。

**//////////////////更新2////////////**

我找到了一个 API

```
Windows::ApplicationModel::Core::CoreApplication::Exit(); 
```

但医生说

> “关闭应用程序。请勿使用此方法在测试或调试场景之外关闭应用程序。”

所以我认为它不会通过测试。

**//////////////////更新3////////////**

如果使用 Windows::ApplicationModel::Core::CoreApplication::Exit(); 关闭应用程序。然后如果我单击该图标以重新启动应用程序。这将花费非常非常长的时间来启动。可能是 Windows::ApplicationModel::Core::CoreApplication::Exit() 关闭一些系统服务。但如果使用异常关闭应用程序，启动时间不会很长。

**//////////////////更新4////////////**

如果使用 Windows::ApplicationModel::Core::CoreApplication::Exit(); 在模拟器中，它无法通过再次单击图标重新启动应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:00:15.393

退出应用程序所需要做的就是跳出`CoreApplication::Run`while() 循环。

例如，对于默认模板立方体 DirectX 示例应用程序，您只需将`m_windowClosed`成员变量设置为 true。

因此，如果您希望应用程序在您点击屏幕时结束，请执行...

```
void PhoneDirect3DApp1::OnPointerPressed(CoreWindow^ sender, PointerEventArgs^ args)
{
    m_windowClosed = true;
} 
```

但是，正如评论所说，您必须注意正确处理后退按钮，否则您将无法通过证书。

# python - Python中的滑动窗口方法

> ID：15976485
> 
> 赞同：1
> 
> 时间：2013-04-12T16:30:34.340
> 
> 标签：python, sliding-window

我有一个数据框 DF，两列 A 和 B 如下所示：

```
A                    B                  
1                    0             
3                    0               
4                    0                   
2                    1                    
6                    0                    
4                    1                     
7                    1                 
8                    1                     
1                    0 
```

第一部分：应执行滑动窗口方法，如下所示。我需要在大小为 3 的滑动窗口中计算 B 列的平均值，滑动 1 个位置。每个窗口的平均值都是手动计算的，并显示在左侧。

```
 A:         1    3    4    2    6    4    7    8    1                                          
    B:         0    0    0    1    0    1    1    1    0                                
              [0    0    0]                                              0
                    [0    0    1]                                        0.33
                          [0    1    0]                                  0.33
                                [1    0    1]                            0.66
                                      [0    1    1]                      0.66
                                            [1    1    1]                1
                                                 [1    1    0]           0.66
output:        0   0.33 0.33 0.66   0.66    1     1    1   0.66 
```

第二部分：现在，对于 A 列中的每一行/坐标，所有包含该坐标的窗口都被考虑并应保留给出结果的最高平均值，如“输出”列所示。

第二部分详解：第一部分是计算滑动窗口3中滑动1个位置的均值。第二步是：对于A列中的每个坐标'i'，应评估包含坐标'i'的所有窗口并保留最高平均分数。例如，在 A 列中，1 仅出现在第一个窗口中，因此 1 的分数为 0（这是第一个窗口的平均值）。同样，2 出现在第一个和第二个窗口中，因此 2 的分数应该是 window1 和 window2 的分数中最高的，即 max(0, 0.33333)。同样，3 出现在第一、第二和第三个窗口中，因此 3 的得分是前三个窗口得分的最大值，即 max(0,0.333333,0.3333333)。4 存在于第二个、第三个和第四个窗口中，因此 4 的分数是这些窗口分数的最大值，即 max(0.

我需要获得如上所示的输出。输出应该像：

```
A                   B                  Output   
1                   0                      0
3                   0                      0.33
4                   0                      0.33
2                   1                      0.66
6                   0                      0.66
4                   1                      1
7                   1                      1
8                   1                      1
1                   0                    0.66 
```

对 python 的任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:14:25.780

对于第一部分，使用`numpy`：

```
WS = 3
B = numpy.array([0,0,0,1,0,1,1,1,0])
filt = numpy.ones(WS) / WS
mean = numpy.convolve(B, filt, 'valid') 
```

对于第二部分：

```
paddedmean = numpy.zeros(mean.size + 2 * (WS - 1))
paddedmean[WS-1:-(WS-1)] = mean
output = [numpy.max(paddedmean[i:i+WS]) for i in range(mean.size+WS-1)] 
```

但是有什么`A`用？？？

# java - 将 HashMap 绑定到 ComboBox

> ID：15976487
> 
> 赞同：4
> 
> 时间：2013-04-12T16:30:43.763
> 
> 标签：java, swing, combobox, hashmap

有没有人有一个如何将 HashMap 的键绑定到 ComboBox 以便 HashMap 中的更改立即反映到 ComboBox 的示例？

谢谢！

编辑：

感谢“充满鳗鱼的气垫船”的解决方案：

```
private Map<String, String> format = new LinkedHashMap<String,String>();

    public class ToComboBoxModel<String> extends AbstractListModel<String> implements MutableComboBoxModel<String> {

        private String selectedItem;

        @Override
        public Object getSelectedItem() {
            return selectedItem;
        }

        @Override
        public void setSelectedItem(Object anItem) {
            // TODO Auto-generated method stub
            for (java.lang.String str : format.keySet()){
                if (anItem.equals(str))
                {
                    selectedItem=(String) str;
                    break;
                }
            }
        }

        @Override
        public String getElementAt(int index) {         
            List<Entry<String,String>> randAccess = new ArrayList<Entry<String,String>>((Collection<? extends Entry<String, String>>) format.entrySet());

            return randAccess.get(index).getKey();
        }

        @Override
        public int getSize() {
            // TODO Auto-generated method stub
            return format.size();
        }

        @Override
        public void removeElement(Object obj) {
            // TODO Auto-generated method stub

        }

        @Override
        public void removeElementAt(int index) {
            // TODO Auto-generated method stub

        }

        @Override
        public void addElement(String item) {

        }

        @Override
        public void insertElementAt(String item, int index) {
            // TODO Auto-generated method stub

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:41:33.613

我将创建一个实现`MutableComboBoxModel<T>`接口的类，并让它使用它的一个`TreeMap<T>`或其他子级`SortedMap<T>`作为其数据核。我认为您不想使用 a`HashMap`因为需要订购 JComboBox 的模型并且未订购 HashMap 。

该类还应该扩展[`AbstractListModel<E>`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractListModel.html)，以便自动获得 ListModel 的功能，使您不必维护自己的 EventListenerList 并免费为您提供我上面列表中底部四个方法中的两个，以及一些`fireXXX(...)`数据更改通知方法。

您必须做的是创建由`MutableComboBoxModel<T>`接口的[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/MutableComboBoxModel.html)规定的必要方法。这仅意味着实现 12 种方法，

*   4 个`MutableComboBoxModel<E>`，
    *   `void addElement(E item)`
    *   `void insertElementAt(E item, int index)`
    *   `void removeElement(E obj)`
    *   `void removeElementAt(int index)`
*   2 个`ComboBoxModel<E>`，
    *   `E getSelectedItem()`
    *   `void setSelectedItem(E item)`
*   和 4 个`ListModel<E>`，
    *   `void addListDataListener(ListDataListener listener)`无需编写——AbstractListModel 的一部分
    *   `E getElementAt(int index)`
    *   `int getSize()`
    *   `void removeListDataListener(ListDataListener listener)`无需编写——AbstractListModel 的一部分

我应该认为，这应该是可行的。

编辑：再看一遍，我遇到了`insertElementAt(...)`. 由于我提倡将 SortedMap 作为模型的核心，因此您不能将元素任意添加到 Map 中的 a 位置，因为它是按其“自然”顺序排序的。这最适合使用 ArrayList、Vector 或其他类似集合作为模型的数据核。

**编辑 2** ：根据 Omid 的建议使用**LinkedHashMap要好得多。**

# java - 如何用 3 个给定点计算 arcTo() 的半径？

> ID：15976489
> 
> 赞同：1
> 
> 时间：2013-04-12T16:30:45.290
> 
> 标签：java, javascript, gwt, canvas

我有 2 个`Points`由一条线连接，起点和终点。

我想在它们之间画一条弧线，但半径应该是动态的，具体取决于用户点击的位置。因此，我有一个来自鼠标的第三个点，带有 XY 坐标。

如何绘制一个`ctx.arcTo()`使结果线穿过特定点（鼠标点）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:59:28.610

*更新：这个答案实际上是不正确的，请忽略它。圆弧的圆心不一定在 A 和 B 之间的中点。*

假设两个点是 A 和 B，用户动态提供 C 点。

找到 A 和 B 之间的中点。这将是圆的中心。从中心到点 C 的线将是弧的半径。

计算 A 和 B 之间的中点（圆心）的坐标。

计算点 C 到这个中心点的距离。这是半径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T14:31:42.257

计算A、B、C点随机定位的最大允许不包曲线半径（假设我们用`arcTo`从A到B经过C点的方法绘制。

```
//calculate distance between points and find the smallest one
 const dAC = distance(pointA, pointC);
 const dBC = distance(pointB, pointC);
//calculate angle between ACB (C is vertex)
 const anglePoints = findAngle(pointA, pointC, pointB);
// calculate radius
 const r = Math.ceil(Math.min(dAC, dBC) * Math.abs(Math.tan(anglePoints / 2)));
 ctxChart.arcTo(pointC.x, pointC.y, pointB.x, pointB.y, r);

function distance(p1: Point, p2: Point): number {
    const xDelta = (p2.x - p1.x);
    const yDelta = (p2.y - p1.y);
    const d = Math.sqrt(xDelta * xDelta + yDelta * yDelta);
    return d;
}

function findAngle(A: Point,B: Point,C: Point) {
    var AB = Math.sqrt(Math.pow(B.x-A.x,2)+ Math.pow(B.y-A.y,2));    
    var BC = Math.sqrt(Math.pow(B.x-C.x,2)+ Math.pow(B.y-C.y,2)); 
    var AC = Math.sqrt(Math.pow(C.x-A.x,2)+ Math.pow(C.y-A.y,2));
    return Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
} 
```

有答案链接帮助我计算正确的半径值 [https://math.stackexchange.com/questions/797828/calculate-center-of-circle-tangent-to-two-lines-in-space/797891#797891](https://math.stackexchange.com/questions/797828/calculate-center-of-circle-tangent-to-two-lines-in-space/797891#797891)

# hibernate - 异常是 org.hibernate.HibernateException: No Hibernate Session bound to thread

> ID：15976493
> 
> 赞同：1
> 
> 时间：2013-04-12T16:31:02.730
> 
> 标签：hibernate, jakarta-ee, spring-mvc

我的数据库输入数据有问题？春天mvc项目

你能给我一些解决方案吗？

这是一个错误：

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/pow] threw 
exception [Request processing failed; nested exception is org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here] with root cause
org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean$TransactionAwareInvocationHandler.invoke(LocalSessionFactoryBean.java:960)
    at $Proxy11.getCurrentSession(Unknown Source)
    at com.project.dao.LoginDaoImpl.saveUser(LoginDaoImpl.java:37)
    at com.project.service.LoginServiceImpl.saveUser(LoginServiceImpl.java:30)
    at com.project.controller.LoginController.registration(LoginController.java:106)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我将 @Transactional 注释放在我的 DAO 和我的服务中。

**servlet-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <context:annotation-config />
    <context:component-scan base-package="com.project.controller, com.project.dao, com.project.service"  use-default-filters="true"/>

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />
    <resources mapping="/resources/gfx/**" location="/resources/gfx/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <!--title beans -->

<!--
<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesViewResolver"/>
<beans:bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/spring/appServlet/titles.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean> 
-->

    <!--hibernate beans -->

      <beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
                        <beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
                        <beans:property name="url" value="jdbc:mysql://localhost:3306/mydb" />
                        <beans:property name="username" value="root" />
                        <beans:property name="password" value="admin" />
                        <beans:property name="initialSize" value="3" />
                        <beans:property name="maxActive" value="10" />
        </beans:bean>

<beans:bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

 <beans:bean id="messageSource"

    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">

    <beans:property name="basename" value="/WEB-INF/messages" />
</beans:bean>

<beans:bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <beans:property name="dataSource" ref="dataSource" />
            <beans:property name="annotatedClasses">
            <beans:list>
                <beans:value>com.project.data.DodatkowiProwadzacy</beans:value>
                <beans:value>com.project.data.GrupyProjektowe</beans:value>
                <beans:value>com.project.data.GrupyZajeciowe</beans:value>
                <beans:value>com.project.data.Kursy</beans:value>
                <beans:value>com.project.data.LaczenieNotatekIPlikow</beans:value>
                <beans:value>com.project.data.Notatki</beans:value>
                <beans:value>com.project.data.Obecnosc</beans:value>
                <beans:value>com.project.data.OcenyCzastkowe</beans:value>
                <beans:value>com.project.data.Pliki</beans:value>
                <beans:value>com.project.data.PozwoleniaNaLaczenia</beans:value>
                <beans:value>com.project.data.Prowadzacy</beans:value>
                <beans:value>com.project.data.Spotkania</beans:value>
                <beans:value>com.project.data.Studenci</beans:value>
                <beans:value>com.project.data.StudenciDoGrupProjektowych</beans:value>
                <beans:value>com.project.data.StudenciDoGrupZajeciowych</beans:value>
            </beans:list>
        </beans:property>

         <beans:property name="configurationClass">
            <beans:value>org.hibernate.cfg.AnnotationConfiguration</beans:value>
        </beans:property> 

        <beans:property name="hibernateProperties">
            <beans:props>
                <beans:prop key="current_session_context_class">thread</beans:prop>
                <beans:prop key="hibernate.dialect">${jdbc.dialect}</beans:prop>
                <beans:prop key="hibernate.show_sql">true</beans:prop>
            </beans:props>
        </beans:property>
    </beans:bean>

<context:annotation-config />
 <!-- Enables the Spring MVC @Controller programming model -->
 <annotation-driven />

 <tx:annotation-driven transaction-manager="transactionManager"/>
    <beans:bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <beans:property name="sessionFactory" ref="sessionFactory" />
    </beans:bean>

   <!-- enable the configuration of transactional behavior based on annotations -->  
<!--   <tx:annotation-driven /> -->
   <!-- a PlatformTransactionManager is still required -->
 <!-- <beans:bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <beans:property name="dataSource" ref="dataSource"/>
  </beans:bean>-->

</beans:beans> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml,
                     /WEB-INF/spring/appServlet/spring-security.xml,
                     /WEB-INF/spring/appServlet/servlet-context.xml
         </param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
       <listener-class>
                org.springframework.web.context.request.RequestContextListener
       </listener-class>
    </listener>

     <filter>
        <filter-name>hibernateFilter</filter-name>
        <filter-class>
           org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
        </filter-class>
        <init-param>
            <param-name>sessionFactoryBeanName</param-name>
            <param-value>sessionFactory</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>hibernateFilter</filter-name>
        <url-pattern>*.htm</url-pattern>
    </filter-mapping>           

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter>
        <filter-name>characterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>characterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

     <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/user/*</url-pattern>
    </servlet-mapping> 
    <welcome-file-list>

        <welcome-file>index.jsp</welcome-file>

    </welcome-file-list>

</web-app> 
```

这是我的控制器：

**登录控制器.java**

```
package com.project.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import java.util.Date; 
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;

import com.project.Utils.Encryption;
import com.project.service.LoginService;
import com.project.data.Prowadzacy;

@Controller
public class LoginController {

    @Autowired
    private LoginService loginService;

    @RequestMapping("loginform.html")
    public String ShowLogin(){
        return "login";
    }

    @RequestMapping("logout.html")
    public String Logout(HttpSession session){
    session.invalidate();
    return "login";

    }

    @RequestMapping("login.html")
    public String LoginAuthentication(HttpServletRequest req){
    String username=req.getParameter("user");
    String password=req.getParameter("pass");
    List<Prowadzacy> loginlist=loginService.validateLogin(username, password);

    return "login";

    }

    @RequestMapping("registrationform.html")
    public String registrationform() {
        return "registration";
    }

    @RequestMapping("registration")
    public String registration(HttpServletRequest req){
        String imiona=req.getParameter("imiona");
        String nazwisko=req.getParameter("nazwisko");
        String email=req.getParameter("Email");
        String username=req.getParameter("UserName");
        String password=req.getParameter("Password");

        Date date = new Date();

        Prowadzacy prow = new Prowadzacy();
        prow.setImiona(imiona);
        prow.setNazwisko(nazwisko);
        prow.setEmail(email);
        prow.setLogin(username);
        prow.setHaslo(password);
        prow.setWaznosc(true);
        prow.setDataDodania(date);
        prow.setAktywowany(false);      

        loginService.saveUser(prow);

        return "login";
    }
} 
```

文件：**LoginDaoImpl.java**

```
package com.project.dao;

import com.project.data.Prowadzacy;

import java.util.List;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.stereotype.Service;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.transaction.annotation.Transactional;

@Repository("loginDao")
public  class LoginDaoImpl implements LoginDao {

    @Autowired
    private SessionFactory sessionFactory;

    @Override
    @Transactional(readOnly=true)
    public List<Prowadzacy> validateLogin(String user, String password) {
        return this.sessionFactory.getCurrentSession().createQuery("from Prowadzacy where login=:user and haslo=:password").setString("password", password).list();

    }

    @Override
    @Transactional
    public void saveUser(Prowadzacy prow) {
    this.sessionFactory.getCurrentSession().save(prow);
    }

} 
```

**登录道.java**

```
package com.project.dao;

import java.util.List;
import com.project.data.Prowadzacy;

public interface LoginDao {

    public List<Prowadzacy> validateLogin(String user, String password);

    public void saveUser(Prowadzacy user);

} 
```

**LoginServiceImpl.java**

```
package com.project.service;

import java.util.List;

import com.project.dao.LoginDao;
import com.project.data.Prowadzacy;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service("loginService")
public class LoginServiceImpl implements LoginService{

    @Autowired
    private LoginDao loginDao;

    @Override
    @Transactional
    public List<Prowadzacy> validateLogin(String user,String password){
        return loginDao.validateLogin(user, password);
    }

    @Override
    @Transactional
    public void saveUser(Prowadzacy user) {
        loginDao.saveUser(user);
    }

} 
```

**登录服务.java**

```
package com.project.service;

import java.util.List;

import com.project.data.Prowadzacy;

public interface LoginService {
    public List<Prowadzacy> validateLogin(String user,String password);
    public void saveUser(Prowadzacy user);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:15:50.583

`hibernateProperties`您是否尝试在 Spring中将以下内容添加到您的定义中`applicationContext.xml`：

```
<beans:prop key="current_session_context_class">thread</beans:prop> 
```

或者您是否尝试将`@Transactional`注释添加到基本/通用 Hibernate DAO 实现类？还是在服务层？

# ruby - 如何在 jekyll 液体中进行 url 编码？

> ID：15976495
> 
> 赞同：6
> 
> 时间：2013-04-12T16:31:05.620
> 
> 标签：ruby, jekyll, liquid

当我使用带有变音符号的德语单词（例如ä、ü）时，我遇到的问题是类别不是 url 编码的。我尝试了 Liquid 似乎提供的 cgi_escape，但使用以下代码成功：

```
<strong>Kategorien</strong><br/>
{% for category in site.categories  do %}
  <small><a href="/categories/{{ category[0] | cgi_escape }}">{{ category[0] }} </a><br/>
         </small>    
{% endfor %} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-21T05:11:27.177

对于带有空格的类别，使用`cgi_escape`无法正常工作。链接生成为`/category/the+category`而不是`/category/the%20category`.

我最终使用的解决方案来自~~[这篇博文](http://blog.akciom.com/2013/01/11/setting-up-jekyll/)~~：

```
# _plugins/url_encode.rb
require 'liquid'
require 'uri'

# Percent encoding for URI conforming to RFC 3986.
# Ref: http://tools.ietf.org/html/rfc3986#page-12
module URLEncoding
  def url_encode(url)
    return URI.escape(url, Regexp.new("[^#{URI::PATTERN::UNRESERVED}]"))
  end
end

Liquid::Template.register_filter(URLEncoding) 
```

加号是除了在 URL 的查询部分之外的任何地方的文字加号，它代表一个空格。 ~~[良好的 URL 编码参考](http://blog.lunatech.com/2009/02/03/what-every-web-developer-must-know-about-url-encoding)~~（[archive.org 镜像](https://web.archive.org/web/20151229061347/http://blog.lunatech.com:80/2009/02/03/what-every-web-developer-must-know-about-url-encoding)）。

然后可以在布局或其他任何地方使用它：

```
<a href="{{ site.category_dir }}/{{ category | url_encode }}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:54:16.913

@Peterb，你升级到最新版本的 Jekyll 了吗？当前的 1.0x 版本支持 UTF-8 并且可以更好地处理这样的 URL。

您可以通过从终端命令行运行它来安装最新版本：

`$ [sudo] gem install jekyll --pre`

这篇 GitHub 问题帖子将更清楚地说明这个问题： [https ://github.com/mojombo/jekyll/issues/960](https://github.com/mojombo/jekyll/issues/960)

# web-services - SSIS Web 服务任务

> ID：15976503
> 
> 赞同：0
> 
> 时间：2013-04-12T16:31:45.970
> 
> 标签：web-services, ssis

我有一个带有 Web 服务任务的 SSIS 包，该任务由 sql server 作业执行。Web 服务任务配置为使用 .dtsConfig 文件中提到的服务 url 调用 .asxm 服务。

我们的测试团队尝试了一个场景，在该场景中，在 .asmx 服务中重命名了一个 SP，以确保服务调用将失败。

从 SSIS 调用 .asmx 服务时按预期失败，但执行 SSIS 包的作业在作业历史记录中显示成功状态。

这是正确的行为吗，Web 服务任务是异步的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:40:31.087

SSIS 包是存储在文件系统中，还是存储在 mssql db 中？

MSSQL 作业代理异步执行非 MSSQL 作业/步骤，如果它执行的东西在 MSSQL 环境之外，它将启动外部进程并报告成功。我认为将包部署到 MSSQL Server 而不是文件系统是更明智的做法。

它还取决于您如何处理包中的任务错误/结果，您可以实现警报、引发错误等...

以下是有关 MSSQL 2k12 上同步/异步作业执行的一些链接：

[从 SQL Server 2012 以同步或异步模式执行 SSIS 包](http://sqlblog.com/blogs/davide_mauri/archive/2011/11/24/execute-a-ssis-package-in-sync-or-async-mode-from-sql-server-2012.aspx)

[执行 SQL Server SSIS 包的不同方法](http://www.mssqltips.com/sqlservertip/1775/different-ways-to-execute-a-sql-server-ssis-package/)

# actionscript-3 - 防止 Flex 树掉落反馈

> ID：15976505
> 
> 赞同：6
> 
> 时间：2013-04-12T16:31:47.570
> 
> 标签：actionscript-3, apache-flex, drag-and-drop

我希望允许用户重新排序 Flex 树文件夹中的项目，但不要将这些项目移出文件夹。我可以阻止外部 drop 成功，但我想给用户反馈（在 drop 之前）drop 不会成功。我发现了很多关于 drop 动作的例子，但没有任何东西可以向用户显示正确的反馈。

根据 Tree 文档，我应该可以`DragManager.showFeedback(DragManager.NONE)`在`dragOver`活动期间打电话，但这不起作用。下面包含一个简短的示例项目。有没有办法在拖动事件期间向用户指示拖放不会成功？

提前感谢您的任何解决方案！

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       width="354"
                       height="480">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.core.IUIComponent;
            import mx.core.mx_internal;
            import mx.events.DragEvent;
            import mx.events.FlexEvent;
            import mx.managers.DragManager;

            protected function tree_dragEnterHandler(event:DragEvent):void {
                // only items can be dragged - not folders
                if (tree.selectedItem.@type == "item") {
                    DragManager.acceptDragDrop(IUIComponent(event.currentTarget));
                } else {
                    event.preventDefault();
                    DragManager.showFeedback(DragManager.NONE);
                }
            }

            protected function tree_dragOverHandler(event:DragEvent):void {
                var dropData:Object = tree.mx_internal::_dropData;
                var dragItem:XML = event.dragSource.dataForFormat("treeItems")[0];
                if (!dropData || !dropData.parent || !dragItem.parent() || dragItem.parent() != dropData.parent) {
                    trace("preventing drop");
                    DragManager.showFeedback(DragManager.NONE);
                    return;
                }
                trace("allowing drop");
                DragManager.showFeedback(DragManager.MOVE);
            }

            protected function tree_dragDropHandler(event:DragEvent):void {
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <fx:XML id="treeData">
            <folder id="root"
                    label="root"
                    type="root">
                <folder id="folder1"
                        label="Folder 1"
                        type="folder">
                    <folder id="folder2"
                            label="Folder 2"
                            type="folder">
                        <item id="item1"
                              label="Item 1"
                              type="item"/>
                        <item id="item2"
                              label="Item 2"
                              type="item"/>
                        <item id="item3"
                              label="Item 3"
                              type="item"/>
                        <item id="item4"
                              label="Item 4"
                              type="item"/>
                        <item id="item5"
                              label="Item 5"
                              type="item"/>
                    </folder>
                </folder>
                <folder id="folder3"
                        label="Folder 3"
                        type="folder"/>
                <folder id="folder4"
                        label="Folder 4"
                        type="folder"/>
                <folder id="folder5"
                        label="Folder 5"
                        type="folder"/>
            </folder>
        </fx:XML>
    </fx:Declarations>
    <mx:Tree id="tree"
             left="29"
             right="28"
             top="28"
             bottom="27"
             dragEnabled="true"
             dropEnabled="true"
             dragMoveEnabled="true"
             dataProvider="{treeData}"
             labelField="@label"
             dragEnter="tree_dragEnterHandler(event)"
             dragOver="tree_dragOverHandler(event)"
             dragDrop="tree_dragDropHandler(event)"
             showRoot="false">
    </mx:Tree>
</s:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:05:56.787

令人沮丧的是，默认的拖放功能*几乎*提供了完成此操作所需的一切，但并不完全。似乎 IlyaZ 的答案应该有效，但这可能是 Flex 的 mx:Tree 控件中的错误。

我最终通过滚动我自己的拖放实现来实现这一点，正如 SunilD 所暗示的那样。该代码包含在下面，供将来可能遇到相同问题的任何人使用。

请注意，当用户在`maxDropIndex`和之间的边界上拖动时，仍然存在一个小的视觉反馈问题`maxDropIndex+1`：在边界的下部，放置指示器将移动以指示可以在文件夹级别放置项目。我仍在寻找一个好的解决方案（谁能指出我的树源？）。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       width="354"
                       height="480">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.core.DragSource;
            import mx.core.IUIComponent;
            import mx.core.mx_internal;
            import mx.events.DragEvent;
            import mx.events.FlexEvent;
            import mx.managers.DragManager;

            protected var dragging:Boolean = false;
            protected var minDropIndex:int = 0;
            protected var maxDropIndex:int = 0;

            protected function tree_dragEnterHandler(event:DragEvent):void {
                // only items can be dropped
                if (event.dragSource.hasFormat("tree_item_node")) {
                    DragManager.acceptDragDrop(IUIComponent(event.currentTarget));
                    trace("accepting DragDrop");
                } else {
                    event.preventDefault();
                    DragManager.showFeedback(DragManager.NONE);
                    trace("rejecting DragDrop");
                }
            }

            protected function tree_dragOverHandler(event:DragEvent):void {
                var index:int = tree.calculateDropIndex(event);
                if (index < minDropIndex || index > maxDropIndex) {
                    trace("preventing drop");
                    DragManager.showFeedback(DragManager.NONE);
                    this.tree.hideDropFeedback(event);
                    return;
                }
                trace("allowing drop");
                DragManager.showFeedback(DragManager.MOVE);
                this.tree.showDropFeedback(event);
            }

            protected function tree_dragDropHandler(event:DragEvent):void {
                trace("dragDropHandler");
            }

            protected function tree_mouseMoveHandler(event:MouseEvent):void {
                // see if we should start a drag operation
                if (event.buttonDown && !dragging && tree.selectedItem && tree.selectedItem.@type == "item") {
                    // TODO: calculate the min and max drag indices from currently-selected index
                    minDropIndex = 2;
                    maxDropIndex = 7;

                    // start the drag
                    dragging = true;
                    var dragSource:DragSource = new DragSource();
                    dragSource.addData(tree.selectedItem, "tree_item_node");
                    DragManager.doDrag(IUIComponent(event.currentTarget), dragSource, event);
                }
            }

            protected function tree_dragCompleteHandler(event:DragEvent):void {
                trace("dragComplete: no longer dragging");
                this.tree.hideDropFeedback(event);
                dragging = false;
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <fx:XML id="treeData">
            <folder id="root"
                    label="root"
                    type="root">
                <folder id="folder1"
                        label="Folder 1"
                        type="folder">
                    <folder id="folder2"
                            label="Folder 2"
                            type="folder">
                        <item id="item1"
                              label="Item 1"
                              type="item"/>
                        <item id="item2"
                              label="Item 2"
                              type="item"/>
                        <item id="item3"
                              label="Item 3"
                              type="item"/>
                        <item id="item4"
                              label="Item 4"
                              type="item"/>
                        <item id="item5"
                              label="Item 5"
                              type="item"/>
                    </folder>
                </folder>
                <folder id="folder3"
                        label="Folder 3"
                        type="folder"/>
                <folder id="folder4"
                        label="Folder 4"
                        type="folder"/>
                <folder id="folder5"
                        label="Folder 5"
                        type="folder"/>
            </folder>
        </fx:XML>
    </fx:Declarations>
    <mx:Tree id="tree"
             left="29"
             right="28"
             top="28"
             bottom="27"
             dragEnabled="false"
             dropEnabled="false"
             dataProvider="{treeData}"
             labelField="@label"
             dragEnter="tree_dragEnterHandler(event)"
             dragOver="tree_dragOverHandler(event)"
             dragDrop="tree_dragDropHandler(event)"
             dragComplete="tree_dragCompleteHandler(event)"
             mouseMove="tree_mouseMoveHandler(event)"
             showRoot="false">
    </mx:Tree>
</s:WindowedApplication> 
```

# windows - Windows 任务计划程序 - Windows Server 2000

> ID：15976508
> 
> 赞同：0
> 
> 时间：2013-04-12T16:31:59.393
> 
> 标签：windows, scheduled-tasks

全部，

我需要安排一个任务（批处理脚本）每天每分钟运行一次。查看任务计划程序，我看到任务的最小重复间隔是 5 分钟，它位于“触发器”窗口下拉列表中。

您如何在任务计划程序中执行此操作？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:43:26.583

下拉框是可编辑的，所以只需将值更改为“1 分钟”

# c# - 文本框值和隐藏字段值的比较验证

> ID：15976510
> 
> 赞同：1
> 
> 时间：2013-04-12T16:32:08.580
> 
> 标签：c#, asp.net, validation

```
<asp:TextBox ID="txtAppSanctionLimit" runat="server" onblur="calcCustDebtEquity()">     </TextBox>
<asp:HiddenField ID="hfAppReqeustAmt" runat="server" Value="0" />

<asp:CompareValidator ID="CompareValidator1" runat="server" ErrorMessage="Proposed Limit is never greater than Request Limit" ControlToCompare="txtAppSanctionLimit"       ControlToValidate="txtRequestLimits" Operator="GreaterThan" 
       ValidationGroup="Report3" Display="none" ></asp:CompareValidator>

<asp:Button ID="btnLimtUpdate" runat="server" Text="Update" ValidationGroup="Report3" 
                onclick="btnLimtUpdate_Click"/>
<asp:ValidationSummary ID="ValidationSummary3" runat="server" ShowMessageBox="true" ShowSummary="false" ValidationGroup="Report3"  /> 
```

最重要的是已在 Visual Studio 2010 下的 defalt.aspx 页面中使用。如果 txtAppSanctionLimit 值大于 hfAppReqeustAmt 值，我想显示验证消息。请注意，hfAppReqeustAmt 值通过查询从数据库中获取。

我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T19:24:06.023

接受的答案是完全错误的！

简单地说，您不能将 CompareValidator 与 HiddenField 一起使用。您需要使用 CustomValidator。

请参阅：[asp:RequiredFieldValidator 不验证隐藏字段](https://stackoverflow.com/questions/6607984/asprequiredfieldvalidator-does-not-validate-hidden-fields)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T17:38:28.510

目标的属性

```
ControlToCompare="txtAppSanctionLimit" 
```

可能应该指向您的隐藏字段。

```
ControlToCompare="hfAppReqeustAmt" 
```

并且 ControlToValidate 的属性应该指向您的用户数据输入字段。

```
ControlToValidate="txtAppSanctionLimit" 
```

因为它当前指向示例代码中未显示的控件。

编辑：根据[MSDN](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.controltocompare(v=vs.110).aspx)的 CompareValidator.ControlToCompare -

> 如果要比较的控件隐藏或位于不可见的容器（例如 Panel 控件）内，则验证器仅执行服务器端验证。验证器客户端脚本仅支持可见控件。

# php - php mysql如何插入自动生成的字段表单

> ID：15976511
> 
> 赞同：0
> 
> 时间：2013-04-12T16:32:10.303
> 
> 标签：php, mysql

我是一个新的 php 初学者，正在从事一个彩票项目..每次抽奖我有 5 个输入文本字段，总抽奖是 10 个抽奖，9 个隐藏它仅在玩家选择要玩的抽奖数量时显示...

这里遇到的问题是我将如何将 5 个拣货号码插入数据库中......这就是我所做的

```
$game1 = (int) $_POST['game1_mainball3'] . "-" . (int) $_POST['game1_mainball2'] . "-" . (int) $_POST['game1_mainball3'] . "-" . (int) $_POST['game1_mainball4'] . "-" . (int) $_POST['game1_mainball5']; 
```

我在插入数据时默认绘制`$game1`它只插入`$_POST['game1_mainball3']`到列中

这是我的插入代码

```
 $sql = "INSERT INTO tickets (drawdate, drawtime, ticket_no) VALUES ('$drawdate','$drawtime','$game1')";
   mysql_query($sql); 
```

我真的很喜欢你的回复..但我想也许是我的表格名称有问题，也许影响它的是我发布的表格

游戏 1      **或** **游戏****类型**   **```
 <div class="fields" id="game_set_2" style="display: none;"><div class="lotto_game">Game 2</div><input onkeypress="return EnterKeyHandler(this, event)" type="text" title="Game 2 - Ball 1" class="text_num" name="game2_mainball1" id="game2_mainball1" maxlength="2">&nbsp;<input onkeypress="return EnterKeyHandler(this, event)" type="text" title="Game 2 - Ball 2" class="text_num" name="game2_mainball2" id="game2_mainball2" maxlength="2">&nbsp;<input onkeypress="return EnterKeyHandler(this, event)" type="text" title="Game 2 - Ball 3" class="text_num" name="game2_mainball3" id="game2_mainball3" maxlength="2">&nbsp;<input onkeypress="return EnterKeyHandler(this, event)" type="text" title="Game 2 - Ball 4" class="text_num" name="game2_mainball4" id="game2_mainball4" maxlength="2">&nbsp;<input onkeypress="return EnterKeyHandler(this, event)" type="text" title="Game 2 - Ball 5" class="text_num" name="game2_mainball5" id="game2_mainball5" maxlength="2">&nbsp;<span class="quickpick" style="display: inline;">
        <strong>OR</strong>
        <input type="button" name="quickpick" class="btn light" value="Quick Pick" onclick="QuickPick(2, 5, 0, 90, 0)">
        </span>
         <strong>Game Type</strong>
        <input type="text" class="text_small" readonly="readonly" name="gametypeform2" value="Perm" maxlength="10">
        &nbsp;
        </span>
        <strong>At</strong>
        <input onkeypress="return EnterKeyHandler(this, event)" type="text" title="price" class="text_small" name="game2_price" id="game2_price" maxlength="5" />
        &nbsp;
        <br>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:06:09.230

尝试：

```
$gameball[1] = (int) $_POST['game1_mainball1'];
$gameball[2] = (int) $_POST['game1_mainball2'];
$gameball[3] = (int) $_POST['game1_mainball3'];
$gameball[4] = (int) $_POST['game1_mainball4'];
$gameball[5] = (int) $_POST['game1_mainball5'];

foreach($gameball as $value){
    $game1 .= $value.'-';
}

$data = mysql_query("INSERT INTO tickets (drawdate, drawtime, ticket_no) VALUES ('$drawdate','$drawtime','$game1')") or die(mysql_error()); 
```**

# javascript - 从 Jquery 函数返回值

> ID：15976514
> 
> 赞同：0
> 
> 时间：2013-04-12T16:32:21.533
> 
> 标签：javascript, jquery

我是 jQuery 和 javascript 的完全新手，所以如果这听起来很愚蠢或很简单，请用你的专业知识帮助我

```
$(document).ready(function(){
  $('#add_button').click(function(){
    var vol = $('input#cv').val();
    var col = $('input#cc').val();
    var comment = $('input#co').val();
    var sample = $('#cv').attr('class');
    var url = $('input#cv').attr('title');
    if( (vol && col && comment)  == ''){
      alert('No data to update');
    }else{
      url =  url.concat('volupdate=',vol,'&concupdate=',col,'&commupdate=',comment,'&sample=',sample);

      alert(sample + " " + vol + " " + col +" "+ comment +" " + url);
    }
  });
}); 
```

html：

```
my $correct_vol = qq{<input type="text" name="cv" id="cv" size="6" class="$sample_name" title="/here/is/where/you/are">};
my $correct_conc = qq{<input type="text" name="cc" id="cc" size="6" class="$sample_name" title="/here/is/where/you/are">};
my $comments = qq{<input type="text" name="co" id="co" size="10" class="$sample_name" title="/here/is/where/you/are">};
my $update = q{<input type="submit" value="Update" id="add_button" class="add_now">}; 
```

这些构成了大表中的最后四列。
我的问题是：我应该如何将 jquery 函数中的 url 返回到我的 perl？
如果我使用`return url`我应该期待什么？我应该如何处理从`url`我的脚本中传递的值？感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:37:25.017

您的 javascript 代码本身不会与您的 perl 代码连接。与 perl 的连接将在它处理表单元素时发生。因此，您的值需要通过 POST 或 GET 传递，就像您在仅 HTML + perl 的解决方案中执行此操作时一样。

您可以在 javascript 中做的是设置您需要传递的表单输入的值。这将通过类似的方式来完成`$("#inputElementID").val(url);`（假设您`inputElementID`在创建它的 html 中为输入元素提供了一个 id 。

如果这样做有意义的话，您也可以通过 javascript 提交表单。

至于 using `return url`，最终只会将 的值返回`url`给调用它的 javascript 函数（在这种情况下，它实际上并不存在，因为这是一个`document.ready()`执行。

# asp.net-mvc - ASP MVC3 - 使用正则表达式验证器查找整个单词

> ID：15976515
> 
> 赞同：0
> 
> 时间：2013-04-12T16:32:25.070
> 
> 标签：asp.net-mvc, regex, asp.net-mvc-3, asp.net-mvc-2

这是我第一次不得不使用正则表达式，我没有运气尝试匹配整个单词。我在我的视图模型上使用 ASP MVC 正则表达式验证器，具有以下模式：

```
 [Required(ErrorMessage = "Welcome Letter required as (Y)es or (N)o")]
    [RegularExpression(@"^[|YES|YEs|Yes|yES|yEs|YeS|yeS|yes|Y|y|NO|No|nO|N|n]{1}", ErrorMessage = "Welcome Letter required as (Y)es or (N)o")] 
    [DisplayName("Welcome Letter Req")]
    public string WelcomLetterReq { get; set; } 
```

如果我想输入一个`Y`或`N`（小写或大写），这很好用，但其他任何东西都会给我一条错误消息。有人可以用语法帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:19:20.680

试试这个：

```
^(([yY][eE][sS])|([nN][oO])|([yY]|[nN]))$ 
```

现场示例：[http ://rubular.com/r/CfPJnLuHqe](http://rubular.com/r/CfPJnLuHqe)

# css - 我可以在 CSS 的背景 url() 中使用 attr() 吗？

> ID：15976516
> 
> 赞同：0
> 
> 时间：2013-04-12T16:32:31.767
> 
> 标签：css, background-image, attr

我想在 HTML 中执行此操作： `<a href="http://host.com/cat.png">text</a>`

在 CSS 中： `a { background-image: url(attr(href)); }`

它似乎对我不起作用。甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:38:34.100

在静态 CSS 文件中不可能。但是，您可以通过任何服务器端语言（例如 PHP）动态生成 CSS。

如果您需要 CSS 中的变量，或者使用[Sass](http://sass-lang.com/)或[LESS 。](http://lesscss.org/)

# c# - 如果用同一个val来替换两个单独的string.Format占位符，一定要提供两次吗？

> ID：15976517
> 
> 赞同：5
> 
> 时间：2013-04-12T16:32:32.767
> 
> 标签：c#, string.format

鉴于这种：

```
string msg = string.Format("Duckbill {0} Platypus has not been loaded. Fetch Duckbill {1}'s Platypus then continue.", userDuckbill, userDuckbill); 
```

...改为这样做就足够了：

```
string msg = string.Format("Duckbill {0} Platypus has not been loaded. Fetch Duckbill {1}'s Platypus then continue.", userDuckbill); 
```

?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T16:33:04.037

您可以多次指定参数。改用这个：

```
string msg = string.Format("Duckbill {0} Platypus has not been loaded. Fetch Duckbill {0}'s Platypus then continue.", userDuckbill); 
```

[官方文档](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)有几个这样的例子。这里只有一个：

```
 string formatString = "    {0,10} ({0,8:X8})\n" + 
                        "And {1,10} ({1,8:X8})\n" + 
                        "  = {2,10} ({2,8:X8})";
  int value1 = 16932;
  int value2 = 15421;
  string result = String.Format(formatString, value1, value2, value1 & value2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T16:33:14.727

使用`{0}`两次：

```
string msg = string.Format(
    "Duckbill {0} Platypus has not been loaded. Fetch Duckbill {0}'s Platypus then continue.",
    userDuckbill); 
```

您的第二个代码示例将产生`FormatException`以下消息：

> 索引（从零开始）必须大于或等于零且小于参数列表的大小。

因此，无论何时使用，格式字符串后`{n}`都必须至少有参数。`n`然而，拥有更多`n`是无用的。

# jquery - 用 JQuery 折叠两个元素数组

> ID：15976520
> 
> 赞同：0
> 
> 时间：2013-04-12T16:32:39.037
> 
> 标签：jquery, optimization

我有两个元素数组。它们具有不同且未知的长度。

```
array1 = [$div1, $div2, $div3];  
array2 = [$div4, $div5, $div6, $div7, $div8]; 
```

我正在寻找将它们附加到另一个元素的最佳解决方案，以便它们看起来折叠起来。
最终结果应该是

```
$div1
$div4
$div2
$div5
$div3
$div6
$div7
$div8 
```

我知道我可以通过一些循环和一些长度检查来实现这一点，但我想知道是否有一个功能可以让它们轻松折叠。
我正在寻找最优化的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:39:10.703

假设 array2 总是比 array1 大

```
array1 = [1, 2, 3];  
array2 = [4, 5, 6, 7, 8,9];  

array3 = [];

for(var i = 0 ; i < array2.length ; i++){
  if(i <= array1.length){
     array3.push(array1[i]);
  }
  array3.push(array2[i]);

} 
```

[**jsFiddle**](http://jsfiddle.net/mohammadAdil/PGZje/)

# php - 如何在保持当前属性的同时动态创建 PHP SimpleXMLElement 对象？

> ID：15976521
> 
> 赞同：1
> 
> 时间：2013-04-12T16:32:42.850
> 
> 标签：php, xml, object

我正在读取一个 xml 文件，该文件返回给我 xml 的 SimpleXMLElement 对象表示。我将获取一个数组并向该对象输入新值。我不知道我将在那个数组中成为什么。

如果我要蛮力这样做，我会做这样的事情。

```
//Solution 1: Brute Force

    //Just creating an array and value for purposes of demonstration.
    $arOfData = array( [0]=>"theFirstNode", [1]=>"theSecondNode",[2]=>"theThirdNode" );
    $value = "The XML Node Value";

    $simpleXml->$arOfData[0]->$arOfData[1]->$arOfData[2] = $value;

    //The next best thing I can think of doing is something like this.
    //Solution 2: Semi-brute force
    //
    foreach($this->arrayData as $key => $value) {
                $xmlNodes = explode( '-', $key);
                $numNodes = count($xmlNodes);
                switch($numNodes) {
                    case 1:
                        $simpleXml->$xmlNodes[0] = $value;
                        break;
                    case 2:
                        $simpleXml->$xmlNodes[0]->$xmlNodes[1] = $value;
                        break;
                    case 3:
                        $simpleXml->$xmlNodes[0]->$xmlNodes[1]->$xmlNodes[2] = $value;
                        break;
                    case 4:
                        $simpleXml->$xmlNodes[0]->$xmlNodes[1]->$xmlNodes[2]->$xmlNodes[3] = $value;
                        break;
                    case 5:
                        $simpleXml->$xmlNodes[0]->$xmlNodes[1]->$xmlNodes[2]->$xmlNodes[3]->$xmlNodes[4] = $value;
                        break;
                }
            } 
```

*note 此解决方案使用数组键并将其分解为由破折号分隔的数组，然后将数组值用作新的 xml 值。所以不要让它分散你的注意力。

解决方案#2 的问题是：当我们得到一个比 5 更深的 xml 节点时会发生什么？它不会被塞进我们正在创建的新对象中。哦哦。它也不是很优雅;)。我不确定如何以更递归的方式执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:21:00.187

就像您在问题中已经写过的那样，您需要动态处理它，因为您不知道父元素的数量。

您需要更深入地研究 simpexml 如何完成这项工作。

但首先让我建议您使用不同的符号，而不是使用减号，而是使用路径中的斜线。

```
first/second/third 
```

这在 Xpath 中也很常见，我认为它本身就很好。减号也可以是元素名称的一部分，但斜线不能。所以这只是好一点。

在我向您展示如何轻松访问该*`<third>`*元素节点以设置其值之前，首先让我们看一下 simplexml 中的一些赋值基础知识。

要在 SimpleXMLElement 中访问和设置此元素节点，请参见以下示例：

```
$xml = new SimpleXMLElement('<root><first><second><third/></second></first></root>');    

$element = $xml->first->second->third;
$element[0] = "value"; 
```

这很简单，但您可以在这里看到两件事：

1.  该*`<third>`*元素已存在于文档中。
2.  该代码用作 simplexml-self-reference ( `[0]`)，它允许设置元素变量（而不是变量）的 XML 值。这特定于*SimpleXMLElement*的工作方式。

第二点还包含如何处理不存在元素的问题的解决方案。`$element[0]`如果`NULL`元素不存在：

```
$xml = new SimpleXMLElement('<root><first><second/></first></root>');

$element = $xml->first->second->third;
var_dump($element[0]); # NULL 
```

所以让我们尝试有条件地添加*第三个*元素，以防它不存在：

```
if ($xml->first->second->third[0] === NULL) {
    $xml->first->second->third = "";
} 
```

这确实解决了这个问题。所以剩下要做的就是以迭代方式对路径的所有部分执行此操作：

```
first/second/third 
```

为了简单起见，为此创建一个函数：

```
/**
 * Modify an elements value specified by a string-path.
 *
 * @param SimpleXMLElement $parent
 * @param string           $path
 * @param string           $value (optional)
 *
 * @return SimpleXMLElement the modified element-node
 */
function simplexml_deep_set(SimpleXMLElement $parent, $path, $value = '') 
{
    ### <mocked> to be removed later: ###

    if ($parent->first->second->third[0] === NULL) {
        $parent->first->second->third = "";
    }

    $element = $parent->first->second->third;

    ### </mocked> ###

    $element[0] = $value;

    return $element;
} 
```

因为函数是mock的，所以可以直接使用：

```
$xml = new SimpleXMLElement('<root><first><second/></first></root>');

simplexml_deep_set($xml, "first/second/third", "The XML Node Value");

$xml->asXML('php://output'); 
```

这有效：

```
<?xml version="1.0"?>
<root><first><second><third>The XML Node Value</third></second></first></root> 
```

所以现在删除模拟。首先插入*爆炸*，就像你有它一样。然后需要做的就是沿着路径的每一步走，如果元素还不存在，有条件地创建它。最后*`$element`*将是要修改的元素：

```
$steps   = explode('/', $path);

$element = $parent;
foreach ($steps as $step)
{
    if ($element->{$step}[0] === NULL) {
        $element->$step = '';
    }

    $element = $element->$step;
} 
```

这个*foreach*需要用工作版本替换模拟。与完整的函数定义一目了然：

```
function simplexml_deep_set(SimpleXMLElement $parent, $path, $value = '')
{
    $steps   = explode('/', $path);

    $element = $parent;
    foreach ($steps as $step)
    {
        if ($element->{$step}[0] === NULL) {
            $element->$step = "";
        }

        $element = $element->$step;
    }

    $element[0] = $value;

    return $element;
} 
```

让我们修改更多疯狂的东西来测试它：

```
$xml = new SimpleXMLElement('<root><first><second/></first></root>');

simplexml_deep_set($xml, "first/second/third", "The XML Node Value");

simplexml_deep_set(
    $xml, "How/do/I/dynamically/create/a/php/simplexml/object/while/keeping/current/properties"
    , "The other XML Node Value"
);

$xml->asXML('php://output'); 
```

示例输出（美化）：

```
<?xml version="1.0"?>
<root>
  <first>
    <second>
      <third>The XML Node Value</third>
    </second>
  </first>
  <How>
    <do>
      <I>
        <dynamically>
          <create>
            <a>
              <php>
                <simplexml>
                  <object>
                    <while>
                      <keeping>
                        <current>
                          <properties>The other XML Node Value</properties>
                        </current>
                      </keeping>
                    </while>
                  </object>
                </simplexml>
              </php>
            </a>
          </create>
        </dynamically>
      </I>
    </do>
  </How>
</root> 
```

[在行动中看到它。](http://eval.in/16205)

# asp.net-mvc-4 - 我应该使用什么样的会员系统？

> ID：15976526
> 
> 赞同：1
> 
> 时间：2013-04-12T16:32:52.553
> 
> 标签：asp.net-mvc-4, asp.net-membership

[问题]

我有一个带有用户凭据的预建数据库。关于这个数据库，我唯一可以改变的是密码是如何散列的。（不要问这个......让我们说它很愚蠢，我正在修复它，拜托。）它填充了凭据，所以无论我使用什么都必须适应它。我们正在切换到 ASP.net MVC4 框架，并从头开始。

[问题]

如果有问题，我应该使用什么会员系统？

它应该：

a) 允许我使用 SHA512 检查数据库的密码 b) 根据结果设置角色 c) 装饰控制器中的操作，让我感觉自己像个老板

[细节]

假设我有一个网站，供喜欢扮演牙刷角色的人使用。现有数据库中已有大量数据（对于中小型网站）。我正在迁移到一个全新的数据库布局，并将从旧的进行转换。我们可以改变用户系统的管理方式，但老实说，我们宁愿不这样做。我们有一个包含用户名和密码的用户表。很简单。

我用谷歌搜索过，搜索过，Stack Overflow'd 和 Stack Overflow'd。我发现本质上是一本选择你自己的冒险书，其中要么有空白页码，要么给我一页，看一本与这本冒险不太一样的旧书。

我希望要么a）有人会称我为愚蠢的屁股并指出我在问一个重复的问题，该问题导致资源具有一些​​完整的示例和/或有关如何做我想做的事情的文档或b）帮助我找到一种方法。

截至目前，我正在考虑编写自己的用户管理/身份验证过滤系统。我打算选择 MembershipProvider ，但这似乎有点矫枉过正，似乎并没有达到我想要的效果。也许我的视野太窄了。

我非常愿意以自己的方式解决问题并努力解决问题，但如果有可用的东西我可以加入，我不想推出自己的东西。

**更新 1**

Win 发表了关于 MembershipProvider 独立于 MVC 系统的评论，这给了我一个“啊哈！” 事情走到一起的那一刻。我正在重新评估我的研究，看看我是否没有正确地将拼图拼凑在一起。

**更新 2**

在 dkroy 和 Win 的大力帮助下，我对这里发生的事情有了更深入的了解。完成所有工作后，我会将其包含在编辑中，以供其他寻找信息的人使用。从本质上讲，在我考虑废弃它之前，我已经走在了正确的轨道上。我没有实现 GetUser 调用，也没有调用 SetAuthCookie，所以它不能正常工作。我现在正在编写 RoleProvider。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:12:13.663

**a) 允许我使用 SHA512 检查数据库的密码**

会员提供者支持 SHA512。

**b) 根据结果设置角色 c) 装饰控制器中的动作，让我感觉自己像个老板**

如果要按角色限制用户，则需要同时实现[Custom Memebership Provider 和 Custom Role Provider](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)。

但是，您不需要全部覆盖。以下是主要的 -

```
// Membership provider 
public override bool ValidateUser(string username, string password)

public override MembershipUser GetUser(string username, bool userIsOnline)

public override string GetUserNameByEmail(string email)

// Role provider
public override bool IsUserInRole(string username, string roleName)

public override string[] GetRolesForUser(string username) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:41:11.870

您可以创建自己的自定义 RoleProvider 和 MembershipProvider。这样，您将能够使用现有的数据库结构，并且仍然利用 ASP.NET 实现的 MembershipProvider 和 RoleProvider 合同来提供成员服务。对自定义 MembershipProviders 的最小搜索应该可以帮助您入门。

# logging - 如何在不产生无限循环的情况下复制数据？

> ID：15976530
> 
> 赞同：0
> 
> 时间：2013-04-12T16:33:12.390
> 
> 标签：logging, replication

我正在编写一个远程客户端，它会自动连续地将其日志上传到远程服务器。然而，当我在设计这个过程时，让我感到震惊的是，如果我记录上传过程，我会遇到这样一种情况，即我不断地生成必须上传的日志数据，这会无限地产生更多的日志数据。

我能想到的唯一解决方法是排除与上传过程相关的上传日志。

任何人都可以就此提供任何其他想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T18:30:49.257

如果我没听错，那是顺序问题。如果一个动作在动作本身发生之前放置日志记录怎么办？上传过程记录“上传日志”，然后上传包含“上传日志”的日志作为最后一条记录。

如果这对您没有帮助，可能是由于我对您的程序设计缺乏了解。;-)

# javascript - 处理滚动条和 jquery .width() 方法

> ID：15976531
> 
> 赞同：6
> 
> 时间：2013-04-12T16:33:12.230
> 
> 标签：javascript, jquery, css

jQuery 的`.width()`方法似乎没有考虑滚动条。这对我来说是个问题，因为我想将一些孩子的宽度设置为等于他们父母的宽度。我使用了类似于以下的 jQuery：

```
$('#contentDiv').width($('#containerDiv').width()) 
```

在此示例中，`#contentDiv`是我想要调整大小的元素，并且我想将其设置为具有 的宽度`#containerDiv`，这是它的父元素。我的问题是，这会切断 的一侧`#contentDiv`，正如在[这个小提琴中看到的那样。](http://jsfiddle.net/NbpFM/)

在我的实际代码中，我有几个使用 jQuery 调整大小的元素，它们都需要适合可滚动的 div，因此仅将 css 设置`#contentDiv`为 100% 不是一个选项。在 jQuery 中处理 div 的滚动条宽度的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:39:51.503

我在解决此解决方案时发现的最佳解决方案是：

[http://chris-spittles.co.uk/?p=531](http://chris-spittles.co.uk/?p=531)

jQuery 功能强大，但有时只需要少量的原生 JS 即可渲染像素完美的页面……我希望这个解决方案对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T00:16:01.080

尝试这个：

```
$('#contentDiv').width($('#containerDiv')[0].clientWidth) 
```

有关该解决方案的更多信息，请参阅[此 StackOverflow 答案](https://stackoverflow.com/a/21064102/1450294)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T00:18:06.593

我尝试的另一种方法是将两个元素的[`box-sizing`属性](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)都设置为'border-box'，并查看是否将 contentDiv 的宽度设置为 100%，然后按你想要的方式工作。

现在越来越少的项目担心旧的浏览器很糟糕，'border-box' 可以让事情变得更容易使用。不过，请务必在多个平台上测试多个浏览器，因为我不确定它们都以相同的方式处理滚动条。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:42:43.710

更新：

jQuery 宽度查找方法都没有考虑滚动条。在我最初的示例中，使用`.innerWidth(true)`LOOKS 就像它一样有效，但只是因为它返回和对象，这会导致`width`失败并且内部内容自身大小以适合可用空间，因为示例不是很好。但是，可以编写一个函数来计算带有滚动条的 div 中的可用空间，然后可以使用它来根据需要定位内容。

为了编写这个函数，我利用了这样一个事实，即当一个 div 被附加到一个带有滚动条的 div 时，它会占用整个可用宽度（即父级的内部宽度减去滚动条的宽度）。

该函数如下所示：

```
function noScrollWidth(div){
    var measureDiv = $('<div id="measureDiv">');

    div.append(measureDiv);

    var width = measureDiv.outerWidth();

    measureDiv.remove();

    return width
}; 
```

然后我用它来调整我的内容 div：

```
$('#contentDiv').width(noScrollWidth($('#containerDiv'))); 
```

[工作小提琴。](http://jsfiddle.net/NbpFM/5/)

# c++ - 预编译的头文件，重新包含文件和 Intellisense

> ID：15976533
> 
> 赞同：2
> 
> 时间：2013-04-12T16:33:17.930
> 
> 标签：c++, visual-studio-2012, intellisense, precompiled-headers

我有一个预编译的标头，其中包含各种 3rd 方库的包含，例如：

```
#ifndef PRECOMPILED_H
#define PRECOMPILED_H

#include "booststuff.h"
#include "luastuff.h"

#endif 
```

booststuff.h和*luastuff.h是我项目**中*的头文件，它们只包含各种 boost / lua 相关的东西，并设置了一些 typedefs / usings / 命名空间别名。

我在 Visual Studio (2012) 中以通常的方式设置了预编译头文件，并使用强制包含选项将其包含在每个 cpp 文件中。

在 cpp 文件中，我也非常小心地使用了 #include "booststuff.h"（我有时会禁用预编译的头文件来测试它）。但是，我最近一直在想这是否是一个好主意。所以：

*   如果我再次包含一个已经包含在预编译头文件中的文件，是否会发生任何不好的事情（我不明白为什么会这样，但我已经看到关于头文件必须“以相同的顺序”包含的事情，并且没有真正理解他们在说什么）？

*   它是否会影响 Intellisense（对于一个相当小的项目来说速度非常慢）？我很乐意放弃一些可移植性以获得更好的 Intellisense，因为我目前不想切换平台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:50:09.957

如果每个包含文件都包含[`#pragma once`](http://msdn.microsoft.com/en-us/library/4141z1cx.aspx)在其中，编译器将在第二次和后续尝试包含该文件时完全跳过读取该文件。它没有明确说明，但我假设预编译的标头也跟踪此信息。

# mysql - MySQL IFNULL CONCAT

> ID：15976549
> 
> 赞同：1
> 
> 时间：2013-04-12T16:34:28.310
> 
> 标签：mysql

我正在处理一个查询，其中有一列帐号，我使用 CONCAT 语句对其进行格式化，以使数字为 1-11111 而不是 11111。

有一列包含先前的帐号，但是除非实际上存在先前的帐号，否则此值为 NULL。为了尝试仅格式化存在的帐号，我这样做了：

```
 IFNULL(CONCAT(LEFT(a.prior_acct, 1), '-', RIGHT(a.prior_acct, 5)), 0) AS prior_account 
```

现在，这是正确地将那里的帐号格式化为 1-11111 格式。但是，NULL 字段返回的是连字符而不是 0（同样可以接受的是空格）。

我尝试在完整的 concat 语句周围添加一组额外的括号，看看这是否会消除连字符，但没有运气！

我错过了什么？蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:41:38.003

您的查询应该按原样工作，除非您实际上将空字符串存储在 中`prior_acct`，而不是`NULL`.

```
SELECT IFNULL(CONCAT(LEFT('', 1),'-',RIGHT('', 5)),0); -- outputs -
SELECT IFNULL(CONCAT(LEFT(null, 1),'-',RIGHT(null, 5)),0); --outputs 0 
```

`NULL`空字符串和相同的不是 Oracle 。如果您需要将空字符串视为`null`，则需要明确指定它。一种方法是

```
IFNULL(CONCAT(
IF(
  TRIM(LEFT('', 1))='',NULL, TRIM(LEFT('', 1))
  ),
 '-', RIGHT(a.prior_acct, 5)), 0) AS prior_account 
```

# assembly - 在 DOSBOX 中使用程序集 8086 进行乘法运算

> ID：15976559
> 
> 赞同：0
> 
> 时间：2013-04-12T16:35:05.423
> 
> 标签：assembly, x86-16

我正在尝试做一个基本的乘法，但我不断收到错误，我不明白为什么。我知道我必须使用“MUL”。

这是我正在使用的代码

```
POP AX 
MOV AL, [NUMB]
MUL 10H
POP AX
RET 
```

错误是：MUL 10H 的操作码和操作数组合无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:00:31.983

这是无符号乘法（MUL 操作数）的一个很好的例子：

```
Inputting a 2-digit decimal number

MOV AH, 1       ;read first digit
INT 21H
SUB AL, ‘0’     ; convert digit from ASCII code to binary
MOV BL, 10
MUL BL          ; multiply digit by 10
MOV CL, AL
MOV AH, 1       ; read 2nd digit
INT 21H
SUB AL, ‘0’     ; convert digit from ASCII code to binary
ADD AL, CL      ; AL contains the 2-digit number 
```

您还必须阅读文档以了解每条指令的含义及其工作原理。这是一个开始学习汇编的好网站，每个基本指令都有很好的例子 [完整的8086指令集](http://www.electronics.dit.ie/staff/tscarff/8086_instruction_set/8086_instruction_set.html#MUL)和8086指令[集的例子](http://wiki.answers.com/Q/Explain_the_instruction_set_of_8086_with_examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T03:21:37.200

我知道这真的很晚了，但问题是你不能乘以立即值。您需要将该值加载到寄存器中，然后将该寄存器作为操作数进行 mul 。像这样：

mov al, [numb]
mov ah, 10h
mul ah

另外，我不确定你在用 pop 指令做什么，但看起来你正在弹出 ax 两次，这将使它加载一个未知的值。您的意思是在开始时使用推送指令吗？

# solr - Nutch 解析出 HTML5 标头标签

> ID：15976561
> 
> 赞同：0
> 
> 时间：2013-04-12T16:35:13.267
> 
> 标签：solr, nutch

我正在尝试使用 Nutch 1.2 解析 HTML5 页面，并遇到索引中包含 HTML5 标记“标题”的问题。

我曾经使用“parser.html.divIDsToExclude”排除 HTML4 标头，但这将不再符合我的要求。

是否有类似的插件可以排除已配置的 HTML5 标签

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T20:38:03.437

我已经在 Nutch 1.6 中成功使用了这个插件。

[Nutch 过滤器 xpath](http://www.atlantbh.com/precise-data-extraction-with-apache-nutch/)

我确实有相反的要求，我只想包含一个特定的 div。:)

使用此插件，您可以使用 XPath 查询配置要提取的 HTML 文档的哪些部分。

# javascript - jsp表单没有被提交

> ID：15976562
> 
> 赞同：0
> 
> 时间：2013-04-12T16:35:13.547
> 
> 标签：javascript, jsp

我在这里尝试做的是在表单中，如果没有输入任何字段，则会显示警报，如果即使输入了一个字段，也会提交表单。我正在使用 javascript 提交表单这里是我的表单-

```
 <form  method="POST" name="report" id="reportbean">

        <div id="maindiv">
            <div align="center">
                <p>&nbsp;</p>
                <p id="Title">CHANDNA COLD STORAGE
                </p>
            </div>
            <p>&nbsp;</p>
            <p>&nbsp;   </p>
            <p align="center" style="font-size: 20px; text-align: left;"> OCCUPANT    DETAILS:</p>
            <table width="770" height="97" cellpadding="10" >
                <tr>
                    <td><input type="text" name="FirstName" id="FirstName"     placeholder="FIRSTNAME" value="${firstname}" onchange="stringCheck(this);"  /></td>

                    <td><input type="text" name="LastName" id="LastName" placeholder="LASTNAME" value="${lastname}" onchange="stringCheck(this);"  ></td>
                    <td><input type="text" name="Village" id="Village" placeholder="VILLAGE" value="${village}" onchange="stringCheck(this);" ></td>
                </tr>
                <tr>
                    <td><input type="text" name="FatherName" id="FatherName" placeholder="FATHER'S NAME" value="${sonof}" onchange="stringCheck(this);" ></td> 
                    <td><input type="text" name="District" id="District" placeholder="DISTRICT" value="${district}" onchange="stringCheck(this);" ></td>
                    <td>&nbsp;</td>
                </tr>
            </table>
            <p>&nbsp;</p>
           <div id="occupationlist" >
            <display:table name="List" export="true" class="displaytag"   sort="list"   >
                <display:setProperty name="basic.empty.showtable" value="true" />

                <display:column  property="occid" title="ID" ></display:column>
                <display:column  property="firstName" title="First Name" ></display:column>
                <display:column  property="lastName" title="Last Name"   ></display:column>
                <display:column  property="sonOf" title="Father's Name"  ></display:column>
                <display:column  property="district" title="District"  ></display:column>
                <display:column  property="village" title="Village"  ></display:column>
                <display:column  title="Reservation Form">
                    <input type="button" id="reservationid" name="show reservation" onClick="javascript:toggle1();" value="show reservation det">
                </display:column>
                <display:column  title="Agreement Form">

                    <input type="button" id="agreementid" name="show agreement" onClick="javascript:toggle2();" value="show agreement det">
                </display:column>
            </display:table>
            </div>
            <br>
            <br>
            <div id="reservationlist" style="display: none">
                <display:table name="List1" export="true" class="displaytag" sort="list"  >
                <display:setProperty name="basic.empty.showtable" value="true"  />

                <display:column  property="resid" title="Reservation ID" ></display:column>
                <display:column  property="date" title="Date" ></display:column>
                <display:column  property="weight" title="Weight"   ></display:column>
                <display:column  property="bags" title="Bags"  ></display:column>
                <display:column  property="amount" title="Amount"  ></display:column>
                <display:column  property="advance" title="Advance"  ></display:column>

            </display:table>   
            </div>
            <br>
            <br>

            <div id="agreementlist" style="display: none" >
                <display:table name="List2" export="true" class="displaytag" sort="list" >
                <display:setProperty name="basic.empty.showtable" value="true" />

                <display:column  property="agreeNo" title="Agreement ID" ></display:column>
                <display:column  property="date" title="Date" ></display:column>
                <display:column  property="weight" title="Weight"   ></display:column>
                <display:column  property="rate" title="Rate"  ></display:column>
                <display:column  property="bags" title="Bags"  ></display:column>
                <display:column  property="amount" title="Amount"  ></display:column>
                <display:column  property="advance" title="Advance"  ></display:column>
                <display:column  property="lotNo" title="Lot No"  ></display:column>

            </display:table>            
            </div>
            <p align="CENTER">
              <input type="button" name="BACK" id="BACK" value="BACK"  width="10px" height="10px" onClick="javascript:goBack()">&nbsp;&nbsp;
              <input type="button" name="SUBMIT" id="submit" value="SEARCH" onclick="checkemptyreport();" >
            </p>

   </div>
   <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>

    </form> 
```

这是我的javascript函数-

```
 function checkemptyreport()
 {
var firstname = document.getElementById("FirstName").value;
var lastname = document.getElementById("LastName").value;
var fathername = document.getElementById("FatherName").value;
var village = document.getElementById("Village").value;
var district = document.getElementById("District").value;
if((firstname=="") && (lastname == "") && (village == "") && (fathername == "") &&     (district == "")  )
{

    alert("Enter Atleast One field");
    document.getElementById("FirstName").focus();
    return false;
}
else
{
    alert(2);

    //document.forms["report"].submit();
   document.form["report"].action = "/reportbeanservlet";
    //document.location = "reportbeanservlet";
    return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:42:07.133

将搜索按钮的类型更改为“提交”（类型按钮不提交表单），它将提交表单。或者你可以这样做：

```
 document.form["report"].submit(); 
```

函数内部`checkemptyreport()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:54:08.553

看这个例子：

**Javascript**：

```
window.onsubmit = function()
{
    var firstname = document.getElementById("FirstName").value;
    var lastname = document.getElementById("LastName").value;
    var district = document.getElementById("District").value;

    if(firstname == "" && lastname=="" && district=="")
    {
        alert("Fill in at least one");
        return false;
    }
    else  
    {
        alert(2);
        //document.forms["report"].submit();
        document.form["report"].action = "/reportbeanservlet";
        //document.location = "reportbeanservlet";
        return true;
    }
} 
```

**标记**：

```
<form  method="POST" name="report" id="reportbean">
    <input type="text" name="FirstName" id="FirstName" />
    <input type="text" name="LastName" id="LastName" />
    <input type="text" name="District" id="District" />
    <input type="submit" value="Submit" />
</form> 
```

这当然是您的代码的较小版本，但正如@tomor 所建议的那样，您可以使用提交按钮来完成它，并捕获表单的`onsubmit`事件。

**jsFiddle**：http: [//jsfiddle.net/hescano/xZEbH/](http://jsfiddle.net/hescano/xZEbH/)

# java - 将添加的字符串项保存到 ComboBox

> ID：15976565
> 
> 赞同：0
> 
> 时间：2013-04-12T16:35:23.220
> 
> 标签：java, swing, combobox

我是 Java 和 Swing 的新手，我找不到解决问题的方法。我有一个可以将项目添加到组合框的 GUI。我试图在 GUI 关闭后将添加的项目保留在组合框中，并在再次启动时拥有新添加的项目。有什么简单的方法可以做到这一点？

这是图形用户界面的代码：

```
package GUI1;

import java.awt.BorderLayout;

public class OnurComboBox extends JDialog implements 
ActionListener, ItemListener {

    private final JPanel contentPanel = new JPanel();
    private JComboBox comboBox = null;
    private int comnum;
    public String combo;
//    final String[] theOptions = {
//  "Option 1", "Option 2", 
//        "Option 3", "Option 4", 
//  "Option 5", "Option 6"
//    };
    private JTextField textField;
    private JTextField textField_1;
    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        try {
            OnurComboBox dialog = new OnurComboBox();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the dialog.
     */
    public OnurComboBox() {

        setTitle("Choose an Option");
        setSize(325, 300);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        setLocationRelativeTo(null);

        JDesktopPane desktopPane = new JDesktopPane();
        getContentPane().add(desktopPane, BorderLayout.CENTER);

        JButton btnOk = new JButton("OK");
        btnOk.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {                
                System.out.println("The item selected is: " + combo);
                System.exit(0);
            }
        });
        btnOk.setBounds(66, 153, 89, 23);
        desktopPane.add(btnOk);

        JButton btnCancel = new JButton("Cancel");
        btnCancel.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        btnCancel.setBounds(165, 153, 89, 23);
        desktopPane.add(btnCancel);

//        final JComboBox comboBox = new JComboBox(theOptions);
        Vector comboBoxItems=new Vector();
        comboBoxItems.add("A");
        comboBoxItems.add("B");
        comboBoxItems.add("C");
        comboBoxItems.add("D");
        comboBoxItems.add("E");
        final DefaultComboBoxModel model = new DefaultComboBoxModel(comboBoxItems);
        final JComboBox comboBox = new JComboBox(model);
        comboBox.setBounds(10, 34, 187, 23);
        comboBox.setSelectedIndex(-1);
        comboBox.addItemListener(this);
        desktopPane.add(comboBox);
        comboBox.addItemListener(new ItemListener(){
          public void itemStateChanged(ItemEvent ie){
          combo = (String)comboBox.getSelectedItem();
          comnum = comboBox.getSelectedIndex();
          textField.setText(combo);
          }
          });

        textField = new JTextField();
        textField.setBounds(10, 228, 187, 23);
        desktopPane.add(textField);
        textField.setColumns(10);

        textField_1 = new JTextField();
        textField_1.setBounds(10, 103, 187, 23);
        desktopPane.add(textField_1);
        textField_1.setColumns(10);

        JTextPane txtpnSelected = new JTextPane();
        txtpnSelected.setEditable(false);
        txtpnSelected.setText("Item Selected:");
        txtpnSelected.setBounds(10, 202, 89, 23);
        desktopPane.add(txtpnSelected);

        JButton btnAdd = new JButton("Add");
        btnAdd.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (!textField_1.getText().equals("")){
                      int a = 0;
                      for(int i = 0; i < comboBox.getItemCount(); i++){
                      if(comboBox.getItemAt(i).equals(textField_1.getText())){
                      a = 1;
                      break;
                      }
                      }
                      if (a == 1)
                     JOptionPane.showMessageDialog(null,"Combobox already has this item.");
                      else
                     comboBox.addItem(textField_1.getText());
                     JOptionPane.showMessageDialog(null,"Item added to Combobox");
                      }
                      else{
                      JOptionPane.showMessageDialog(null,"Please enter text in the Text Box");
                      }
                      }
                      });

        btnAdd.setBounds(207, 103, 92, 23);
        desktopPane.add(btnAdd);

        JTextPane txtpnEnterTheOption = new JTextPane();
        txtpnEnterTheOption.setText("Enter the new option:");
        txtpnEnterTheOption.setEditable(false);
        txtpnEnterTheOption.setBounds(10, 80, 131, 23);
        desktopPane.add(txtpnEnterTheOption);

        JButton btnRemove = new JButton("Remove");
        btnRemove.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (comboBox.getItemCount() > 0){
                    comboBox.removeItemAt(comnum);
                    JOptionPane.showMessageDialog(null,"Item removed");}
                      else
                      JOptionPane.showMessageDialog(null,"Item not available");
            }
        });
        btnRemove.setBounds(207, 34, 92, 23);
        desktopPane.add(btnRemove);

        JTextPane txtpnSelectAnItem = new JTextPane();
        txtpnSelectAnItem.setText("Select an item from the list or add a new option");
        txtpnSelectAnItem.setBounds(10, 3, 289, 20);
        desktopPane.add(txtpnSelectAnItem);
        setVisible(true);

    }

    public void itemStateChanged(ItemEvent e) {

        if (e.getStateChange() == ItemEvent.SELECTED) {
            JComboBox combo = (JComboBox) e.getSource();
//            int index = combo.getSelectedIndex();
//            display.setIcon(new ImageIcon(
//                ClassLoader.getSystemResource(images[index])));
        }

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub

    }
} 
```

在“Alya'a Gamal”的大力帮助下，完成这项工作的编辑和工作代码：

```
package GUI1;

import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JDesktopPane;
import java.awt.event.ActionEvent;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import java.util.Vector;

import javax.swing.JTextField;
import javax.swing.JTextPane;

public class OnurComboBox1 extends JDialog implements 
ActionListener, ItemListener {

    private final JPanel contentPanel = new JPanel();
    private JComboBox comboBox = null;
    private int comnum;
    public String combo;
    private JTextField textField;
    private JTextField textField_1;
    static String filePath = "t.txt";/////this text file have 
//    private PrintWriter out;
//    private BufferedReader input;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {

        try {
            OnurComboBox1 dialog = new OnurComboBox1();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the dialog.
     * @throws IOException 
     */
    public OnurComboBox1() throws IOException {

        BufferedReader input = new BufferedReader(new FileReader(filePath));  

        final PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("t.txt", true)));

        setTitle("Choose an Option");
        setSize(325, 300);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        setLocationRelativeTo(null);

        JDesktopPane desktopPane = new JDesktopPane();
        getContentPane().add(desktopPane, BorderLayout.CENTER);

        JButton btnOk = new JButton("OK");
        btnOk.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {                
                System.out.println("The item selected is: " + combo);
                out.close();/////to close the text file
                System.exit(0);
            }
        });
        btnOk.setBounds(66, 153, 89, 23);
        desktopPane.add(btnOk);

        JButton btnCancel = new JButton("Cancel");
        btnCancel.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        btnCancel.setBounds(165, 153, 89, 23);
        desktopPane.add(btnCancel);

        List<String> strings = new ArrayList<String>();
        try {
            String line = null;
            try {
                while ((line = input.readLine()) != null) {
                    strings.add(line);
                }
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        } finally {
            try {
                input.close();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }

        String[] lineArray = strings.toArray(new String[]{});
        final DefaultComboBoxModel model = new DefaultComboBoxModel(lineArray);
        final JComboBox comboBox = new JComboBox(model);

        comboBox.setBounds(10, 34, 187, 23);
        comboBox.setSelectedIndex(-1);
        comboBox.addItemListener(this);
        desktopPane.add(comboBox);
        comboBox.addItemListener(new ItemListener(){
          public void itemStateChanged(ItemEvent ie){
          combo = (String)comboBox.getSelectedItem();
          comnum = comboBox.getSelectedIndex();
          textField.setText(combo);
          }
          });

        textField = new JTextField();
        textField.setBounds(10, 228, 187, 23);
        desktopPane.add(textField);
        textField.setColumns(10);

        textField_1 = new JTextField();
        textField_1.setBounds(10, 103, 187, 23);
        desktopPane.add(textField_1);
        textField_1.setColumns(10);

        JTextPane txtpnSelected = new JTextPane();
        txtpnSelected.setEditable(false);
        txtpnSelected.setText("Item Selected:");
        txtpnSelected.setBounds(10, 202, 89, 23);
        desktopPane.add(txtpnSelected);

        JButton btnAdd = new JButton("Add");
        btnAdd.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (!textField_1.getText().equals("")){
                      int a = 0;
                      for(int i = 0; i < comboBox.getItemCount(); i++){
                      if(comboBox.getItemAt(i).equals(textField_1.getText())){
                      a = 1;
                      break;
                      }
                      }
                      if (a == 1)
                     JOptionPane.showMessageDialog(null,"Combobox already has this item.");
                      else
                     comboBox.addItem(textField_1.getText());
                     out.println(textField_1.getText());////this will add the new value in the text file
                     JOptionPane.showMessageDialog(null,"Item added to Combobox");
                      }
                      else{
                      JOptionPane.showMessageDialog(null,"Please enter text in the Text Box");
                      }
                      }
                      });

        btnAdd.setBounds(207, 103, 92, 23);
        desktopPane.add(btnAdd);

        JTextPane txtpnEnterTheOption = new JTextPane();
        txtpnEnterTheOption.setText("Enter the new option:");
        txtpnEnterTheOption.setEditable(false);
        txtpnEnterTheOption.setBounds(10, 80, 131, 23);
        desktopPane.add(txtpnEnterTheOption);

        JButton btnRemove = new JButton("Remove");
        btnRemove.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (comboBox.getItemCount() > 0){
                    comboBox.removeItemAt(comnum);
                    JOptionPane.showMessageDialog(null,"Item removed");}
                      else
                      JOptionPane.showMessageDialog(null,"Item not available");
            }
        });
        btnRemove.setBounds(207, 34, 92, 23);
        desktopPane.add(btnRemove);

        JTextPane txtpnSelectAnItem = new JTextPane();
        txtpnSelectAnItem.setText("Select an item from the list or add a new option");
        txtpnSelectAnItem.setBounds(10, 3, 289, 20);
        desktopPane.add(txtpnSelectAnItem);
        setVisible(true);

    }

    public void itemStateChanged(ItemEvent e) {

        if (e.getStateChange() == ItemEvent.SELECTED) {
            JComboBox combo = (JComboBox) e.getSource();
//            int index = combo.getSelectedIndex();
//            display.setIcon(new ImageIcon(
//                ClassLoader.getSystemResource(images[index])));
        }

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:30:43.073

您可以使用文本文件对其进行读写

```
String filePath = "t.txt";/////this text file have 
```

1-创建文本文件并将您的 Vectot (A,B,C,D) 分别写在单独的行中

2-创建两个变量，一个读取文本

```
BufferedReader input = new BufferedReader(new FileReader(filePath)); 
```

第二个写入文件的值将被添加：

```
PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("t.txt", true))); 
```

3-在您的文件中读取此文件`comboBox`，如下所示：

```
 List<String> strings = new ArrayList<String>();
        try {
            String line = null;
            while ((line = input.readLine()) != null) {
                strings.add(line);
            }
        } catch (FileNotFoundException e) {
            System.err.println("Error, file " + filePath + " didn't exist.");
        } finally {
            input.close();
        }

        String[] lineArray = strings.toArray(new String[]{});
        final DefaultComboBoxModel model = new DefaultComboBoxModel(lineArray);
        final JComboBox comboBox = new JComboBox(model); 
```

4- 在 `btnAdd`按钮 Actionlistner 添加：

```
out.println(textField_1.getText());////this will add the new value in the text file 
```

5- 在 `btnOk`按钮 Actionlistner 添加：

```
out.close();/////to close the text file 
```

* * *

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JDesktopPane;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JTextPane;

class OnurComboBox extends JDialog implements
        ActionListener, ItemListener {

    private final JPanel contentPanel = new JPanel();
    private JComboBox comboBox = null;
    private int comnum;
    public String combo;
//    final String[] theOptions = {
//  "Option 1", "Option 2", 
//        "Option 3", "Option 4", 
//  "Option 5", "Option 6"
//    };
    private JTextField textField;
    private JTextField textField_1;
    String filePath = "t.txt";
     BufferedReader input = new BufferedReader(new FileReader(filePath));
public static PrintWriter out;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    try {
        out = new PrintWriter(new BufferedWriter(new FileWriter("t.txt", true)));
    } catch (Exception e) {
    }

    try {
        OnurComboBox dialog = new OnurComboBox();
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dialog.setVisible(true);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
    /**
     * Create the dialog.
     */
    public OnurComboBox() throws FileNotFoundException, IOException {

        setTitle("Choose an Option");
        setSize(325, 300);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        setLocationRelativeTo(null);

        JDesktopPane desktopPane = new JDesktopPane();
        getContentPane().add(desktopPane, BorderLayout.CENTER);

        JButton btnOk = new JButton("OK");
        btnOk.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                System.out.println("The item selected is: " + combo);

                out.close();

                System.exit(0);
            }
        });
        btnOk.setBounds(66, 153, 89, 23);
        desktopPane.add(btnOk);

        JButton btnCancel = new JButton("Cancel");
        btnCancel.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        btnCancel.setBounds(165, 153, 89, 23);
        desktopPane.add(btnCancel);

//        final JComboBox comboBox = new JComboBox(theOptions);

        List<String> strings = new ArrayList<String>();
        try {
            String line = null;
            while ((line = input.readLine()) != null) {
                strings.add(line);
            }
        } catch (FileNotFoundException e) {
            System.err.println("Error, file " + filePath + " didn't exist.");
        } finally {
            input.close();
        }

        String[] lineArray = strings.toArray(new String[]{});
        final DefaultComboBoxModel model = new DefaultComboBoxModel(lineArray);
        final JComboBox comboBox = new JComboBox(model);
        comboBox.setBounds(10, 34, 187, 23);
        comboBox.setSelectedIndex(-1);
        comboBox.addItemListener(this);
        desktopPane.add(comboBox);
        comboBox.addItemListener(new ItemListener() {

            public void itemStateChanged(ItemEvent ie) {
                combo = (String) comboBox.getSelectedItem();
                comnum = comboBox.getSelectedIndex();
                textField.setText(combo);
            }
        });

        textField = new JTextField();
        textField.setBounds(10, 228, 187, 23);
        desktopPane.add(textField);
        textField.setColumns(10);

        textField_1 = new JTextField();
        textField_1.setBounds(10, 103, 187, 23);
        desktopPane.add(textField_1);
        textField_1.setColumns(10);

        JTextPane txtpnSelected = new JTextPane();
        txtpnSelected.setEditable(false);
        txtpnSelected.setText("Item Selected:");
        txtpnSelected.setBounds(10, 202, 89, 23);
        desktopPane.add(txtpnSelected);

        JButton btnAdd = new JButton("Add");
        btnAdd.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if (!textField_1.getText().equals("")) {
                    int a = 0;
                    for (int i = 0; i < comboBox.getItemCount(); i++) {
                        if (comboBox.getItemAt(i).equals(textField_1.getText())) {
                            a = 1;
                            break;
                        }
                    }
                    if (a == 1) {
                        JOptionPane.showMessageDialog(null, "Combobox already has this item.");
                    } else {
                        comboBox.addItem(textField_1.getText());
                    }

                    out.println(textField_1.getText());

                    JOptionPane.showMessageDialog(null, "Item added to Combobox");
                } else {
                    JOptionPane.showMessageDialog(null, "Please enter text in the Text Box");
                }
            }
        });

        btnAdd.setBounds(207, 103, 92, 23);
        desktopPane.add(btnAdd);

        JTextPane txtpnEnterTheOption = new JTextPane();
        txtpnEnterTheOption.setText("Enter the new option:");
        txtpnEnterTheOption.setEditable(false);
        txtpnEnterTheOption.setBounds(10, 80, 131, 23);
        desktopPane.add(txtpnEnterTheOption);

        JButton btnRemove = new JButton("Remove");
        btnRemove.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if (comboBox.getItemCount() > 0) {
                    comboBox.removeItemAt(comnum);
                    JOptionPane.showMessageDialog(null, "Item removed");
                } else {
                    JOptionPane.showMessageDialog(null, "Item not available");
                }
            }
        });
        btnRemove.setBounds(207, 34, 92, 23);
        desktopPane.add(btnRemove);

        JTextPane txtpnSelectAnItem = new JTextPane();
        txtpnSelectAnItem.setText("Select an item from the list or add a new option");
        txtpnSelectAnItem.setBounds(10, 3, 289, 20);
        desktopPane.add(txtpnSelectAnItem);
        setVisible(true);

    }

    public void itemStateChanged(ItemEvent e) {

        if (e.getStateChange() == ItemEvent.SELECTED) {
            JComboBox combo = (JComboBox) e.getSource();
//            int index = combo.getSelectedIndex();
//            display.setIcon(new ImageIcon(
//                ClassLoader.getSystemResource(images[index])));
        }

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:41:29.970

在您的情况下，最简单的可能是将它们写入文件。看看[Commons IO](http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html)，让文件读写更容易。最好的方法是有一种初始化方法，它将读取文件，从文件内容中填充它，然后显示它。

然后，每当您将某些内容添加到列表中时，也将其写入文件。那，或者你可以去数据库，或者 ComboBox 模型的序列化，但是文件读/写将是最简单的，IMO。

# java - eclipse rcp：如何将选择传递给处理程序

> ID：15976567
> 
> 赞同：0
> 
> 时间：2013-04-12T16:35:34.610
> 
> 标签：java, eclipse-plugin, swt, eclipse-rcp, jface

我的 ecp 应用程序中有一个视图部分，它只包含一个`TreeViewer`.

每个树节点都有一个操作提供程序，当节点被右键单击时，它将有助于上下文菜单：

```
MenuManager menuManager = new MenuManager();
        menuManager.addMenuListener(new IMenuListener(){

            @Override
            public void menuAboutToShow(IMenuManager manager) {
                IStructuredSelection is = (IStructuredSelection)treeViewer.getSelection();
                if(is.isEmpty()){
                    return;
                }else{
                    Node node = (Node)is.getFirstElement();
                    IActionProvider provider  = node.getActionProvider();
                    IContributionItem[] actions = provider.getActions();
                    if(actions.length == 0){
                        return;
                    }else{
                        for(IContributionItem action : actions){
                            manager.add(action);
                        }
                    }
                }
            }

        });
        Menu menu = menuManager.createContextMenu(treeViewer.getTree());
        menuManager.setRemoveAllWhenShown(true);
        treeViewer.getTree().setMenu(menu);
        getSite().registerContextMenu(menuManager, treeViewer);
        getSite().setSelectionProvider(treeViewer); 
```

动作提供者示例：

```
public class CPSActionProvider implements IActionProvider {
    private Object source;

    @Override
    public void setInitializationData(IConfigurationElement config,
            String propertyName, Object data) throws CoreException {
        // TODO Auto-generated method stub

    }

    @Override
    public IContributionItem[] getActions() {
        CommandContributionItemParameter cp = new CommandContributionItemParameter(
                PlatformUI.getWorkbench().getActiveWorkbenchWindow(),
                null, "cn.ggfan.dmp.commands.addCP",
                CommandContributionItem.STYLE_CHECK);
        HashMap<String, Object> paras = new HashMap<String, Object>();
        paras.put("source", this.source);
        cp.parameters = paras;
        CommandContributionItem add = new CommandContributionItem(cp);
        //add.setId("cn.ggfan.dmp.commands.addCP");
        return new IContributionItem[] { add };
    }

    @Override
    public void setSource(Object o) {
        // TODO Auto-generated method stub
        this.source = o;
    }

} 
```

`cn.ggfan.dmp.commands.addCP`是一个定义的命令，它有一个`defaultHandler`，源字段是被右键单击的节点，现在我的问题是如何将源字段传递给处理程序？如您所见，我正在尝试这样做：

```
HashMap<String, Object> paras = new HashMap<String, Object>();
        paras.put("source", this.source);
        cp.parameters = paras; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:24:32.353

1.  您需要将您的`Tree/Table Viewer`as设置`SelectionProvider`为`PartSite`.

IWorkbenchSite.java

```
 public void setSelectionProvider(ISelectionProvider provider); 
```

1.  您的命令处理程序代码，您有以下方法

公共对象执行（ExecutionEvent 事件）抛出 ExecutionException

利用 `ISelection selection = HandlerUtil.getCurrentSelectionChecked(event);`

///////////////////////////////////////// //////////////////////////////

如果工作台没有提供 SourceProvider，还有另一种方法。您可以实现自己的

```
org.eclipse.ui.ISourceProvider 
```

您有责任更新提供者地图。这是示例参考

[http://www.vogella.com/articles/EclipseCommandsAdvanced/article.html](http://www.vogella.com/articles/EclipseCommandsAdvanced/article.html)

# bash - find 的 -print0 和 xargs 的 -0 开关是否有 grep 等效项？

> ID：15976570
> 
> 赞同：54
> 
> 时间：2013-04-12T16:35:40.633
> 
> 标签：bash, unix, grep, find, xargs

我经常想写这样的命令（`zsh`如果相关，在 中）：

```
find <somebasedirectory> | \
    grep stringinfilenamesIwant | \
    grep -v stringinfilesnamesIdont | \
    xargs dosomecommand 
```

（或更复杂的 greps 组合）

近年来`find`添加了`-print0`开关，并且 xargs 添加了`-0`，它允许通过空终止文件名以优雅的方式处理名称中带有空格的文件，从而允许这样做：

```
find <somebasedirectory> -print0 | xargs -0 dosomecommand 
```

但是，`grep`（至少我拥有的版本，Ubuntu 上的 GNU grep 2.10）似乎没有等效于使用**和**生成空终止行的方法；它有`--null`，但这似乎只与使用`-l`grep 直接在文件中搜索时使用输出名称有关。

是否有可以与 grep 一起使用的等效选项或选项组合？或者，是否有一种简单而优雅的方式来简单地使用 find`-regex`或 Perl 来表达我的命令管道？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-13T14:57:19.527

## 使用 GNU Grep 的`--null`标志

根据[GNU Grep 文档](http://www.gnu.org/software/grep/manual/grep.html#Output-Line-Prefix-Control)，您可以使用输出行前缀控制来处理 ASCII NUL 字符，其方式与*find*和*xargs*相同。

> -Z
> --null
> 输出一个零字节（ASCII NUL 字符）而不是通常跟在文件名后面的字符。例如，'grep -lZ' 在每个文件名之后输出一个零字节，而不是通常的换行符。此选项使输出明确，即使存在包含不寻常字符（如换行符）的文件名。此选项可与“find -print0”、“perl -0”、“sort -z”和“xargs -0”等命令一起使用，以处理任意文件名，即使是那些包含换行符的文件名。

## `tr`从 GNU Coreutils使用

正如 OP 正确指出的那样，此标志在处理输入或输出的文件名时最有用。为了实际将 grep 输出转换为使用 NUL 字符作为行尾，您需要使用*sed*或*tr*之类的工具来转换每一行输出。例如：

```
find /etc/passwd -print0 |
    xargs -0 egrep -Z 'root|www' |
    tr "\n" "\0" |
    xargs -0 -n1 
```

此管道将使用 NUL 将文件名与*find*分开，然后将换行符转换为*egrep*返回的字符串中的 NUL 。这会将 NUL 终止的字符串传递给管道中的下一个命令，在这种情况下，这只是*xargs*将输出转换回正常字符串，但它可以是您想要的任何内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T19:43:45.050

由于您已经在使用 GNU `find`，您可以使用其内部的正则表达式模式匹配功能来代替这些`grep`，例如：

```
find <somebasedirectory> -regex ".*stringinfilenamesIwant.*" ! -regex ".*stringinfilesnamesIdont.*" -exec dosomecommand {} + 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-11T11:37:59.027

采用

```
find <somebasedirectory> -print0 | \
 grep -z stringinfilenamesIwant | \
 grep -zv stringinfilesnamesIdont | \
 xargs -0 dosomecommand 
```

但是，该模式可能不包含换行符，请参阅[错误报告](https://bugs.launchpad.net/ubuntu/+source/grep/+bug/1641092)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-18T17:11:56.887

最新版本的 GNU grep 源代码现在可以使用`-z`/`--null`以空字符分隔输出，而它以前只能与 结合使用`-l`：

[http://git.savannah.gnu.org/cgit/grep.git/commit/?id=cce2fd5520bba35cf9b264de2f1b6131304f19d2](http://git.savannah.gnu.org/cgit/grep.git/commit/?id=cce2fd5520bba35cf9b264de2f1b6131304f19d2)

这意味着您的问题在使用最新版本时会自动解决。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T16:37:45.993

`-exec`您可以将 find与`+`终止符一起使用，而不是使用管道。要将多个命令链接在一起，您可以在`-exec`.

```
find ./ -type f -exec bash -c 'grep "$@" | grep -v something | xargs dosomething' -- {} + 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-07-17T20:03:03.720

```
find <somebasedirectory> -print0 | xargs -0 -I % grep something '%' 
```

# c# - 通过 Web 服务将 Java Map 传递给 C# 程序

> ID：15976571
> 
> 赞同：0
> 
> 时间：2013-04-12T16:35:43.907
> 
> 标签：c#, java, web-services

在我正在处理的一个项目中，我试图从 Web 服务调用中检索图像的 Java 映射。调用程序是用 C# 编写的，并且能够调用其他 Web 服务函数（在 C# 或 Java 中）。问题是尝试从 Java Map 访问数据。我打算将地图数据传递到 C# 字典中，但地图始终为空。我已经在 J​​ava 端验证了正在返回数据，但是 C# 函数将我的变量显示为 null。

我希望有人知道为什么会这样。我将在下面发布对 Java Web 服务的简单代码调用。WebReference 是对 Java Web 服务的引用。

```
WebReference.ApplicationName testWeb = new WebReference.ApplicationName();
WebReference.Map testMap = new WebReference.Map();
testMap = testWeb.getMapImages(); 
```

编辑）我不确定它是否相关，但用于处理 java web 函数的客户端代码是通过 Visual Studio 自动生成的。Map 类型是 Java 函数转换器的最佳建议返回类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:07:08.043

一种解决方案是将地图序列化为某些内容（json、xml、...），然后在 c# 中再次将其反序列化为字典。

要在 java 中序列化为 json，我可以推荐[gson](https://code.google.com/p/google-gson/)。

# ruby-on-rails - 环境变量返回 nil

> ID：15976572
> 
> 赞同：3
> 
> 时间：2013-04-12T16:35:44.907
> 
> 标签：ruby-on-rails

这是我设置 ENV 变量的方法

```
#~/repos/project
export GA_USERNAME="email@gmail.com" 
```

当我尝试`ENV['GA_USERNAME]`在我的应用程序中使用时，它返回 nil。但是，在控制台中，它奇怪地打印了变量，然后返回 nil ...

```
1.9.2-p320 :003 > puts ENV['GA_USERNAME']
email@gmail.com
=> nil 
```

**编辑**我认为我的 ENV 变量不会持续存在。当我重新启动计算机时，变量为零，需要再次设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:40:56.803

为服务器进程设置环境变量的传统方法是：

```
RAILS_ENV=production GA_USERNAME=foobar rails s 
```

如果您想以持久的方式指定环境变量，例如在文件中，请尝试[`figaro`](https://github.com/laserlemon/figaro). 自述文件告诉你如何开始，但想法是：

1.  `rails generate figaro:install`
2.  编辑`config/application.yml`（最后一个命令创建的）
3.  在您的应用程序中，它将自动设置每个环境（生产、开发、测试）变量

**更新**

[`dotenv`](https://github.com/bkeepers/dotenv)可能是一种更好更简单的方法：

1.  `gem 'dotenv-rails', :groups => [:development, :test]`
2.  将跨环境键值对放入`.env`
3.  放置特定于环境的对`.env.test`或`.env.development`

有关所有详细信息，请参阅他们的 README。

# ios - Monotouch 获取 UiPickerView 选中项

> ID：15976573
> 
> 赞同：0
> 
> 时间：2013-04-12T16:35:45.423
> 
> 标签：ios, xamarin.ios, uipickerview

我在操作表中以编程方式创建了一个自定义 uipicker，现在我需要设置一个文本字段，其中包含选择器的选定项目。使用日期选择器，我得到如下值：

```
 actionSheetDatePicker.DatePicker.ValueChanged += (s, e) => {
                this.lblCheckOut.Text = f.ToString ((s as UIDatePicker).Date);
            }; 
```

现在我试图用我的 UIPickerView 做同样的事情，但我没有 ValueChanged 方法。

有谁可以帮助我获得用我的选择器选择的项目的价值。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-28T16:48:45.633

为了详细说明 Jason 的答案，这里是一个使用 UIPickerView 作为自定义日期选择器的代码示例。希望它可以帮助某人。

```
UIPickerView datePicker = new UIPickerView ();
var mod = new DatePickerDataModel ();
datePicker.Model = mod;

mod.ValueChanged += (object sender, EventArgs e) => {
    _selectedDate = mod.SelectedItem;
};

class DatePickerDataModel : UIPickerViewModel
    {
        public event EventHandler<EventArgs> ValueChanged;

        public List<DateTime> Items { get; private set; }

        public DateTime SelectedItem {
            get { return Items [selectedIndex]; }
        }

        int selectedIndex = 0;

        public DatePickerDataModel ()
        {
            var items = new List<DateTime> ();
            for (int i = 0; i < 14; i++) {
                items.Add (DateTime.Now.Subtract (TimeSpan.FromDays (i)));
            }
            Items = items;
        }

        public override nint GetRowsInComponent (UIPickerView picker, nint component)
        {
            return Items.Count;
        }

        public override nint GetComponentCount (UIPickerView picker)
        {
            return 1;
        }

        public override void Selected (UIPickerView picker, nint row, nint component)
        {
            selectedIndex = (int)row;
            ValueChanged?.Invoke(this, EventArgs.Empty());
        }

        public override string GetTitle (UIPickerView pickerView, nint row, nint component)
        {
            var t = Items [(int)row];
            var m = t.ToString ("MMM");
            var d = t.ToString ("ddd");
            return $"{d} {m} {t.Day}";
        }

        public override nfloat GetRowHeight (UIPickerView picker, nint component)
        {
            return 44;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:10:53.703

UIPickerViewDelegate 有一个 Selected 方法，当用户选择一个值时，您可以使用该方法引发一个事件。

# jquery - 如何使用jquery从指针的当前位置向文本框添加文本？

> ID：15976574
> 
> 赞同：5
> 
> 时间：2013-04-12T16:35:47.180
> 
> 标签：jquery

我有一个带有一些单词和文本的文本框。我想做的是，当用户单击按钮时，从指针的当前位置向文本框的文本添加一些单词。如何做到这一点？这是文本框和按钮：

```
<textarea id="txt" rows="15" cols="70">There is some text here.</textarea>
<input type="button" id="btn" value="OK" /> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T17:08:16.000

也许更短的版本，[http://jsfiddle.net/NaHTw/4/](http://jsfiddle.net/NaHTw/4/)会更容易理解？

```
jQuery("#btn").on('click', function() {
    var caretPos = document.getElementById("txt").selectionStart;
    var textAreaTxt = jQuery("#txt").val();
    var txtToAdd = "stuff";
    jQuery("#txt").val(textAreaTxt.substring(0, caretPos) + txtToAdd + textAreaTxt.substring(caretPos) );
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-12T16:41:04.283

很巧，我几分钟前刚刚回答了一个类似的[问题。](https://stackoverflow.com/questions/15975922/how-to-use-jquery-insertatcaret-function)您可以使用这样的自定义函数：

```
jQuery.fn.extend({
insertAtCaret: function(myValue){
  return this.each(function(i) {
    if (document.selection) {
      //For browsers like Internet Explorer
      this.focus();
      sel = document.selection.createRange();
      sel.text = myValue;
      this.focus();
    }
    else if (this.selectionStart || this.selectionStart == '0') {
      //For browsers like Firefox and Webkit based
      var startPos = this.selectionStart;
      var endPos = this.selectionEnd;
      var scrollTop = this.scrollTop;
      this.value = this.value.substring(0, startPos)+myValue+this.value.substring(endPos,this.value.length);
      this.focus();
      this.selectionStart = startPos + myValue.length;
      this.selectionEnd = startPos + myValue.length;
      this.scrollTop = scrollTop;
    } else {
      this.value += myValue;
      this.focus();
    }
  })
}
}); 
```

`textbox`基本上，这个插件允许你在多个或的插入符号处插入一段文本`textarea`。你可以像这样使用它：

```
 $('#element1, #element2, #element3, .class-of-elements').insertAtCaret('text'); 
```

`**[Working Demo](http://jsfiddle.net/gHN8G/1/)**`

# c# - MVC 和实体框架 Html.DisplayNameFor 与复合 ViewModel

> ID：15976576
> 
> 赞同：18
> 
> 时间：2013-04-12T16:35:49.407
> 
> 标签：c#, asp.net-mvc-4, .net-4.5, razor-2

我对使用 WPF/Silverlight 的 MVVM 相当满意，但这是我第一次尝试 MVC Web 应用程序……只是我的背景。

我创建了一个名为 TestSitesController 的控制器，它是从我的实体框架模型（生成读/写操作和视图的模板）中的“站点”模型类自动生成的。我唯一修改的是在 3 个地方，某些方法有一个默认参数 Guid id = null。我刚刚摆脱了“= null”，一切正常。这是我更改的示例

```
public ActionResult Delete(Guid id = null)
{
    //....
} 
```

这已更改为

```
public ActionResult Delete(Guid id)
{
    //....
} 
```

Site 模型没有什么特别的 SiteId、Abbreviation 和 DisplayName……试图让这个问题尽可能简单。好的，所以我运行该网站并转到 htpp://.../TestSites/ 并且一切正常。

我注意到我的所有视图（创建、删除、详细信息和编辑）都在使用 @model MVCWeb.MyEntities.Site，我现在完全可以使用它；但在 Index.cshtml 视图中，我注意到它使用的是

```
@model IEnumerable<MVCWeb.MyEntities.Site> 
```

这适用于生成的模板，但我想使用“复合视图模型”，也许这是我试图混合我的 MVVM 知识的地方，但如果可能的话，我会坚持下去。在我看来，复合视图模型只是一个特定于由 1 个或多个实体模型以及 SelectedSiteId 等附加属性组成的视图的模型。

所以我创建了一个非常简单的 ViewModel，叫做 TestSitesViewModel

```
public class TestSitesViewModel
{
    //Eventually this will be added to a base ViewModel to get rid
    //of the ViewBag dependencies
    [Display(Name = "Web Page Title")]
    public string WebPageTitle;

    public IEnumerable<MVCWeb.MyEntities.Site> Sites;

    //Other Entities, IEnumberables, or properties go here
    //Not important for this example
} 
```

然后在我的控制器中，我添加了一个名为 IndexWithViewModel 的操作方法

```
public ActionResult IndexWithViewModel()
{
    var vm = new TestSitesViewModel();
    vm.WebPageTitle = "Sites With Composite View Model";
    vm.Sites = db.Sites.ToList();

    return View(vm);
} 
```

然后，我制作了 Index.cshtml 的副本并将其命名为 IndexWithModel.cshtml 以匹配我的新 ActionResult 方法名称。我改变了顶行

```
@model IEnumerable<MVCWeb.MyEntities.Site> 
```

至

```
@model MVCWeb.Models.TestSitesViewModel 
```

我在表格部分之前添加了这个来测试 DisplayNameFor 和 DisplayFor

```
@Html.DisplayNameFor(model => model.WebPageTitle)
&nbsp;
@Html.DisplayFor(model => model.WebPageTitle)
<br /> 
```

改变了

```
@foreach (var item in Model) { 
```

至

```
@foreach (var item in Model.Sites) { 
```

并暂时注释掉包含所有表头的 tr 部分。除了@Html.DisplayNameFor 显示“WebPageTitle”的变量名称而不是使用“Web Page Title”，如数据注释的 Display 属性中所示，一切都运行良好

```
[Display(Name = "Web Page Title")]
public string WebPageTitle; 
```

此外，如果我在包含表头信息的 tr 部分中进行评论。我一生都无法弄清楚要放入什么我尝试过 model.Sites.Abbreviation、model.Sites[0].Abbreviation 和其他各种组合，但出现错误。

```
<tr>
    <th>
        @Html.DisplayNameFor(model => model.Abbreviation)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.DisplayName)
    </th>
    <th></th>
</tr> 
```

那么我应该在那里使用什么？我不太确定为什么 model.Sites.Abbreviation 不起作用，因为 Sites 与原始 Index.cshtml 中的模型使用的类型完全相同

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-12T20:18:24.000

在搞砸了几个小时后，我终于弄清楚了。

第一个问题为了在数据注释中使用 Display arrtibute，即使它们只是默认的，也必须添加 get 和 set 访问器方法。我假设这是因为它们只能处理属性而不是类的公共数据成员。这是获取的代码

```
@Html.DisplayNameFor(model => model.WebPageTitle) 
```

正常工作

```
public class TestSitesViewModel
{
    //Eventually this will be added to a base ViewModel to get rid of
    //the ViewBag dependencies
    [Display(Name = "Web Page Title")]
    public string WebPageTitle { get; set; }

    //PUBLIC DATA MEMBER WON'T WORK
    //IT NEEDS TO BE PROPERTY AS DECLARED ABOVE
    //public string WebPageTitle;

    public IEnumerable<MVCWeb.MyEntities.Site> Sites;

    //Other Entities, IEnumberables, or properties go here
    //Not important for this example
} 
```

问题的第二部分是访问 IEnumerable 变量中的元数据。我声明了名为 headerMetadata 的临时变量并使用它而不是尝试通过 IEnumerable 访问属性

```
@{var headerMetadata = Model.Sites.FirstOrDefault();}
<tr>
    <th>            
        @Html.DisplayNameFor(model => headerMetadata.Abbreviation)
    </th>
    <th>
        @Html.DisplayNameFor(model => headerMetadata.DisplayName)
    </th>
    ... 
```

这确实引出了 headerMetadata 变量何时超出范围的问题？它可用于整个视图还是仅限于 html 表格标签？我想这是另一个约会的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:53:05.417

我将尝试用我新学到的 MVVM ASP.NET MVC 经验。

而不是调用`@Html.DisplayNameFor(model => model.WebPageTitle)`，尝试使用`@Html.DisplayFor(model => model.WebPageTitle)`. 您似乎正在 IndexWithViewModel 控制器中设置 WebPageTitle 值，该值应该显示在您的视图中。

查看 ASP.NET MVC 的共享[模板](https://stackoverflow.com/questions/5037580/asp-net-mvc-3-partial-vs-display-template-vs-editor-template)。`/Views/Shared/EditorTemplates/Site.cshtml`您可以在和处为 DisplayFor/EditorFor 助手设置自定义模板或部分`/Views/Shared/DisplayTemplates/Site.cshtml`。ASP.NET MVC 将在使用 DisplayFor 和 EditorFor 呈现您的站点对象时自动选择这些模板。

祝你好运！

# java - java HttpClient 方法（加载、确认）

> ID：15976580
> 
> 赞同：0
> 
> 时间：2013-04-12T16:36:10.660
> 
> 标签：java, http-headers, apache-httpclient-4.x

HttpClient 客户端 = 新 DefaultHttpClient();
字符串 URL = (" [http://www.alfa](http://www.alfa) ");
HttpGet 请求 = 新的 HttpGet(URL);
**我想用“LOAD”方法加载卡并使用“CONFIRM”方法**
*有人可以建议我如何编写这些方法还是应该只使用 httpget 和 post 方法*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:46:52.347

根据 RFC，我不确定是否存在 LOAD 方法：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

是否必须使用您请求访问特定状态“LOAD”而不是“GET”的 API？

# php - 如何重构方法并将拆分验证保持在一种方法上？

> ID：15976584
> 
> 赞同：1
> 
> 时间：2013-04-12T16:36:31.550
> 
> 标签：php, refactoring

我正忙于重构一个类，现在怀疑如何重构 2 个方法。他们来了：

```
public function transform($transformXml, $importXml, $xsdScheme = '')
{
    ...
    if (!empty($xsdScheme)) {
        $this->_validateXml($exportDoc, $xsdScheme);
    }
    ...
}

protected function _validateXml(DOMDocument $xml, $xsdScheme)
{
    ...
    if (!file_exists($xsdScheme)) {
        throw new Exception('XSD file was not found in ' . $xsdScheme);
    }
    ...
} 
```

`$xsdScheme`方法的参数`transform`是可选的，如果它是空的，我们将不会应用 xsd 验证。在它之后我们调用方法`_validateXml`，我们正在检查 if `file_exists`。此验证分为两部分，我不喜欢它，我更喜欢它在一个地方。所以，我会写这样的东西：

```
public function transform($transformXml, $importXml, $xsdScheme = '')
{
    ...
    if (!empty($xsdScheme)) {
        if (!file_exists($xsdScheme)) {
            throw new Exception('XSD file was not found in ' . $xsdScheme);
        }

        $this->_validateXml($exportDoc, $xsdScheme);
    }
    ...
}

protected function _validateXml(DOMDocument $xml, $xsdScheme)
{
    ...

    ...
} 
```

这是一个好方法吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:43:47.137

如果您考虑每种方法的职责，应该更容易理解这一点。

transform 函数进行转换，并将验证委托给另一个方法。Transform 只知道它需要将文件名传递给验证器函数——它并不真正关心验证器函数对它做了什么。

因此，在我看来，将文件相关检查等保留在验证功能中是有意义的。或者，如果您想进一步进行重构，可以将文件加载和文件检查拆分为另一个方法，或者创建一个完全独立的类来执行验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:42:33.390

我想你可能想保持你目前的结构。方法真的应该被设计成做一件事。您的 _validateXml 方法检查该方案是否存在，这听起来像是 XML 验证方法应该做的事情。检查方案不一定是转换方法需要做的事情，因为方案是可选的。

# client - Axis 1.4.1 wsdl2Java 定位器类

> ID：15976585
> 
> 赞同：0
> 
> 时间：2013-04-12T16:36:32.923
> 
> 标签：client, axis, wsdl2java, generated-code

我在休息服务上花费了大量时间，但在 SOAP 服务上花费的时间不多。所以这可能是一个愚蠢的问题，但我还是要问它。

我正在使用 wsdl2java（轴 1.4.1）构建我的 wsdl 文件。我得到的示例代码在生成的客户端代码中有一个服务定位器类。我想弄清楚在构建客户端之后是否需要构建这个类，或者我在 wsdl2java 命令中做错了什么

```
wsdl2java.bat --test-case --generate-all --unpack-classes  -uri file.wsdl -o src 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T16:04:30.823

尝试将 -W -a 添加到 cmd 行参数。我遇到了缺失类的问题（实际上仍然存在），但是这些参数创建了大部分缺失的类。当我解决我最后一次缺课时，我会更新答案。

这是轴 wsdl2java 参考[http://axis.apache.org/axis/java/reference.html](http://axis.apache.org/axis/java/reference.html)

* * *

刚刚发现添加 -w 参数也解决了我的上一个问题。

# ios - 增加 UILabel.text 中第一个字母的字体大小

> ID：15976595
> 
> 赞同：3
> 
> 时间：2013-04-12T16:37:16.227
> 
> 标签：ios, uilabel

我希望 UILabel 的第一个字母具有与其他字母不同的字体大小，一些字体大小更大。需要一些关于如何做到这一点的指导。标签上有很多字。

这是我尝试过的：

```
NSArray * words = [Label.text componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
NSString *firstLetter = [[words objectAtIndex:0] substringToIndex:1]; 
```

但是被困在增加 NSString 的大小上。有没有更好的办法？欢迎给我建议和指导。。谢谢。。

编辑：

```
[Label setFont:[UIFont fontWithName:@"Arial" size:12.f]];
NSArray * words = [Label.text componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
UIFont *fontFirst=[UIFont fontWithName:@"Arial" size:15.f];
NSDictionary *attrsDictFirst=[NSDictionary dictionaryWithObject:font forKey:NSFontAttributeName];
NSAttributedString *finalString=[[NSAttributedString alloc] initWithString:[[words objectAtIndex:0] substringToIndex:1]  attributes:attrsDictFirst]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:30:09.193

例如，要获得这个：

![在此处输入图像描述](https://i.stack.imgur.com/KyHny.png)

说这个：

```
NSString* s2 = @"Fourscore and seven years ago, our fathers brought forth "
    @"upon this continent a new nation, conceived in liberty and dedicated "
    @"to the proposition that all men are created equal.";
NSMutableAttributedString* content2 =
    [[NSMutableAttributedString alloc]
     initWithString:s2
     attributes:
         @{
           NSFontAttributeName:
               [UIFont fontWithName:@"HoeflerText-Black" size:16]
         }];
[content2 setAttributes:
    @{
      NSFontAttributeName:[UIFont fontWithName:@"HoeflerText-Black" size:24]
     } range:NSMakeRange(0,1)];
[content2 addAttributes:
    @{
      NSKernAttributeName:@-4
     } range:NSMakeRange(0,1)];

NSMutableParagraphStyle* para2 = [NSMutableParagraphStyle new];
para2.headIndent = 10;
para2.firstLineHeadIndent = 10;
para2.tailIndent = -10;
para2.lineBreakMode = NSLineBreakByWordWrapping;
para2.alignment = NSTextAlignmentJustified;
para2.lineHeightMultiple = 1.2;
para2.hyphenationFactor = 1.0;
[content2 addAttribute:NSParagraphStyleAttributeName
                 value:para2 range:NSMakeRange(0,1)]; 
```

然后分配`content2`给一个标签的`attributedText`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:39:27.750

需要使用[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)。**iOS6.0 及以上**

得到第一个字母后，将其放入属性字符串中，更改其大小。

将其余的字符串设置为其他大小。

```
UIFont *font=[UIFont fontWithName:@"Arial" size:12.f];
NSDictionary *attrsDict=[NSDictionary dictionaryWithObject:font
                                forKey:NSFontAttributeName];
NSAttributedString *attribString=[[NSAttributedString alloc] initWithString:[words[0] substringFromIndex:1]  attributes:attrsDict];

UIFont *fontFirst=[UIFont fontWithName:@"Arial" size:15.f];
NSDictionary *attrsDictFirst=[NSDictionary dictionaryWithObject:font forKey:NSFontAttributeName];
NSAttributedString *firstString=[[NSAttributedString alloc] initWithString:[attribString subStringToIndex:1]  attributes:attrsDictFirst];

[attribString replaceCharactersInRange:NSMakeRange(0, 1)  withString:firstString]; 
```

# git - 如何从 git-show-branch 中减去/过滤特定分支？

> ID：15976598
> 
> 赞同：0
> 
> 时间：2013-04-12T16:37:24.990
> 
> 标签：git, branch

我尝试查看 git glob'ing 功能，但找不到我想做的事情。我有很多 master 的分支，它们彼此相对接近，但 master 远远落后，所以当我执行 git show-branch 时，树非常高，所以我想基本上过滤掉 master。我需要类似 git show-branch * - master

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:17:42.907

你可以使用：

```
git log --graph --oneline --all <commit>.. 
```

它将以图形方式显示所有分支和之后的提交`<commit>`。`--all`您可以使用以下方法列出分支，而不是参数：

```
git log --graph --oneline <commit>.. <path> ... 
```

如果这些不能让您获得更短的输出，您可以尝试：

```
git branch | grep -v master | xargs git log --graph --oneline <commit>.. 
```

# cordova - phonegap 应该只在准备好时调用外部网站

> ID：15976599
> 
> 赞同：2
> 
> 时间：2013-04-12T16:37:37.743
> 
> 标签：cordova, jquery-mobile

我正在为我的私人 phonegap 项目工作。我想启动应用程序，然后调用一个外部网站，里面塞满了 jquerymobile 的东西。应用程序中的第一个脚本是一个脚本，它应该等到设备准备好并在线。然后调用外部链接。但它不起作用。不幸的是，我不知道为什么不...这里是（只有被调用的 js 脚本）：（在我加载 jquery 和 jquerymobile 的网站中，没有问题）。

```
 var lat = "";
            var lng = "";
            var dat = "";
             devReady = false;
             devOnline = false;

            $(function(){
              document.addEventListener("deviceready", onDeviceReady, false);
              document.addEventListener("online", onOnline, false);
            })

            function onDeviceReady() {
                devReady = true;
                callExtPage();
            }

            function onOnline() {
                devOnline = true;
                callExtPage();
                }

            function callExtPage() {
                // calls the external Page when device is ready (parameters set) and online
                if(devOnline == true && devReady == true) {
                    navigator.geolocation.getCurrentPosition(function() {
                        lat = position.coords.latitude;
                        lng = position.coords.longitude;
                        dat = currentDate();
                    }, false);
                    // load an external page ($.mobile.changePage does only call as ajax)
                    window.location.href="http://www.mydomain.com/mobiles?lat="+lat+"&lng="+lng+"&dat="+dat;
                }
            }
            function currentDate() {
                var d = new Date();
                var curr_date = d.getDate();
                var curr_month = d.getMonth() + 1; //Months are zero based
                var curr_year = d.getFullYear();
                if(curr_date < 10) {curr_date = "0"+curr_date}
                if(curr_month < 10) {curr_month = "0"+curr_month}
                var currDate = curr_year+"-"+curr_month+"-"+curr_date;
                return currDate;
            } 
```

感谢您提供任何帮助或捷径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:38:00.507

将调用移至 deviceready 行作为您部分中的第一条语句。您当前的代码，deviceready 事件连接根本没有被调用。

```
<script>
 document.addEventListener("deviceready", onDeviceReady, false);

 function onDeviceReady() {
                devReady = true;
                callExtPage();
 }
</script> 
```

# android - 比较按钮的背景资源

> ID：15976601
> 
> 赞同：7
> 
> 时间：2013-04-12T16:37:48.743
> 
> 标签：android

```
button.setBackgroundResource(R.Drawable.abc);
if ( button.getBackground()==getResources().getDrawable(R.drawable.abc))
{
    button.setBackgroundResource(R.drawable.xyz);
}

else if( button.getBackground()==getResources().getDrawable(R.drawable.xyz) )
{
    button.setBackgroundResource(R.drawable.abc);
} 
```

我想比较按钮上设置的背景图像。上面的代码取自 Stack Overflow... 但它似乎不起作用

请提出更好的方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T16:41:59.363

尝试这个

```
if ( button.getBackground().getConstantState()==getResources().getDrawable(R.drawable.abc).getConstantState())
{
     button.setBackgroundResource(R.drawable.xyz);
} 
```

# jquery - 使用 jquery 获取隐藏的输入元素 ID

> ID：15976604
> 
> 赞同：0
> 
> 时间：2013-04-12T16:37:52.397
> 
> 标签：jquery

我在页面上有一个隐藏的输入字段，我想使用 jQuery 获取它的 ID。我正在使用下面的语句，但它显示为 null。有人能告诉我我在这里做错了什么吗？

```
$(document).ready(function()
{
    var hiddenID = $('input[id~="HiddenCounter"]').attr('id');
}); 
```

在页面的源视图中，我可以看到我的元素

```
<input type="hidden" name="longstringgeneratedbyASP.Net_HiddenCounter" id="longstringgeneratedbyASP.Net_HiddenCounter"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:39:52.010

试试下面的代码：

```
var hiddenID = $('input[name$="HiddenCounter"]').attr('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:47:40.157

您可以将 .NET 生成的 ID 与控件的 ClientID 属性一起使用。你的 javascript 看起来像这样：

```
$(document).ready(function()
{
    var hiddenID = '<%=HiddenCounter.ClientID%>';
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:39:20.933

你可以使用`:hidden`选择器。例如

```
$(document).ready(function() {
    var hiddenID = $('input:hidden').attr('id');
}); 
```

# 已编辑

您的 id 属性为空

```
<input ... id="" longstringgeneratedbyASP.Net_HiddenCounter"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:40:21.263

你有一个语法错误，属性`"`的开头有一个额外的`id``id=""long...`

```
<input type="hidden" name="longstringgeneratedbyASP.Net_HiddenCounter" id="longstringgeneratedbyASP.Net_HiddenCounter"/> 
```

还将选择器更改为

```
var hiddenID = $('input:hidden[id$="HiddenCounter"]').attr('id'); 
```

# c++ - 错误：我的每个函数和变量都没有在这个范围内声明（代码；；块，C++）

> ID：15976608
> 
> 赞同：0
> 
> 时间：2013-04-12T16:38:02.633
> 
> 标签：c++, codeblocks

我是 C++ 新手，我写了我的第一个“真正的”程序（一个简单的四操作计算器）。当我编译它时，我得到了 12 个编译器错误。我能够解决一些问题（缺少分号等），但其中有 7 个拒绝离开。错误和我的代码在这里：

错误：

```
 15 error: 'cout' was not declared in this scope
    15 error: 'endl' was not declared in this scope
    21 error: 'GetNumber' was not declared in this scope
    24 error: 'GetOperator' was not declared in this scope
    29 error: 'nAnswer' was not declared in this scope
    33 error: 'AskContinue' was not declared in this scope
    35 error: 'bContinue' was not declared in this scope 
```

主文件

```
 //Four-operation calculator
    //© Olli Utriainen 2013

    #include <iostream>
    //Header with functions GetNumber(), GetOperator() and AskContinue()
    #include "calculator.h"

    using namespace std;

    int main()
    {
        //Main loop's condition
        bool bContinue = false;

        cout << "Welcome to Olli's calculator!" << endl << endl;

        //Main loop
       do
        {
            cout << "Give first number" << endl;
            int nNumber1 = GetNumber();

            cout << "Give operator (+,-,*,/)" << endl;
            char cOperator = GetOperator();

            cout << "Give second number" << endl;
            int nNumber2 = GetNumber();

            nAnswer = nNumber1 + nNumber2;

            cout << nNumber1 << " " << cOperator << " " <<
            nNumber2 << " = " << nAnswer << endl;

            bContinue = AskContinue();

        } while (bcontinue);

        return 0;
    } 
```

头文件.h

```
 //Headers for the calculator
    //© Olli Utriainen 2013

    #ifndef CALCULATOR_H_INCLUDED
    #define CALCULATOR_H_INCLUDED

   //Function for inputting numbers
   int GetNumber()

   //Function for inputting a mathematical operator (+,-,*,/)
   char GetOperator()

   //Function for asking Continue Yes/No
   bool AskContinue()

   #endif // CALCULATOR_H_INCLUDED 
```

函数.cpp

```
 //Functions for the calculator
   //© Olli Utriainen 2013

   #include <iostream>

   using namespace std;

   //Function for inputting numbers
   int GetNumber()
   {
       int nNumber

       cin >> nNumber;

       return nNumber
   }

   //Function for inputting a mathematical operator (+,-,*,/)
   int GetOperator()
   {
       char cOperator
       bool bValidOperator = false;

       //Do-while loop for checking if given operator
       //is valid (+,-,*,/). If invalid, bValidOperator
       //is changed to false ->loop will break and the
       //given operator is returned
       do
       {
           cin >> cOperator;

           if (cOperator == '+' || '-' || '*' || '/')
               {
                   bValidOperator = true;
               }
           else
               {
                   bValidOperator = false;
                   cout << "Invalid operator" << endl;
               }

       } while (!bValidOperator)

       return cOperator;

   }

   //Function for asking Continue Yes/No
   bool AskContinue()
   {
       cout << "New calculation? Y/N" << endl;

       bool bContinue = false;
       if (cin >> 'Y' || 'y')
           {
               bContinue = true;
           }
       if (cin >> 'N' || 'n')
           {
               bContinue = false;
           }
       return bcontinue;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:39:26.180

标题中函数声明的分号？哦，实际上很多分号不见了。确保在需要的地方插入它们，然后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:10:29.450

很多错字；大量分号丢失；

在calculator.cpp 中，你应该#include "calculator.h"

在 bool AskContinue() 中它应该是：

```
{
cout << "New calculation? Y/N" << endl;
bool bContinue = false;
char choice;
cin >> choice;
if ((choice == 'Y')||(choice == 'y'))
{
   bContinue = true;
}
   if ((choice == 'N')||(choice == 'n'))
{
   bContinue = false;
}
   return bContinue;
} 
```

这些是我现在能找到的。

# sql - 用 , 和 | 替换空格的 SQL 函数 带空格和复制文本 (SQL Server 2008 R2)

> ID：15976610
> 
> 赞同：1
> 
> 时间：2013-04-12T16:38:13.387
> 
> 标签：sql, tsql, sql-server-2008-r2

我只是 SQL 脚本的初学者，我有一个`A`包含以下格式的字符串值的字段：

```
X1|Y1 X2|Y2 X3|Y3 X4|Y4 X5|Y5 
```

我正在尝试创建一个函数来替换**空格**，然后替换 | 有一个空格。之后，将 , 放在字符串的末尾，并将字符串“X1 Y1”中第一个空格逗号之前的字符粘贴到文本的末尾。因此，该字段中的结果文本`B`将如下所示：

```
X1 Y1,X2 Y2,X3 Y3,X4 Y4,X5 Y5,X1 Y1 
```

字段 A 和 B 的类型为：ntext

注意：我尝试使用替换函数但收到错误消息：Argument data type ntext is invalid for argument 1 of replace function

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:58:12.527

在 SQL Server 2008R2 中：

```
SELECT REPLACE(@mystring,'|',',') + ' ' + REPLACE(LEFT(@mystring,CHARINDEX(' ',@mystring)-1),'|',',') 
```

替换`@mystring`为您的字段名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:20:23.483

您不能将***REPLACE***与 blob 字段一起使用，您应该先将其转换为字符串字段试试这个：

```
select replace(replace(cast(a as nvarchar(max)) + ' ' + left(cast(a as nvarchar(max)),
      charindex(' ', cast(a as nvarchar(max))) - 1),' ',','),'|',' ')
from aaa 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:41:18.727

MySQL：

```
Select Replace(colName,"|",",") 
```

# python - 在 Python 中使用 PEG 解析重要的空白（特别是 Parsley）

> ID：15976614
> 
> 赞同：5
> 
> 时间：2013-04-12T16:38:26.810
> 
> 标签：python, parsing, peg

我正在创建一种支持重要空格的语法（最像 Python 或 yaml 的“Z”lisp 变体，但相同的想法）

我遇到了[这篇关于如何在 pegasus 中进行重要的空白解析的文章，这是 C# 的 PEG 解析器](https://github.com/otac0n/Pegasus/wiki/Significant-Whitespace-Parsing)

但是我在将其转换为欧芹方面不太成功，看起来 Pegasus 中的#STATE# 变量以某种方式跟随回溯。

这是我最接近简单解析器的方法，如果我使用`indent`with look ahead 的版本，它就无法解析孩子，如果我使用没有的版本，它就无法解析兄弟姐妹。

如果这是欧芹的限制并且我需要使用 PyPEG 或 Parsimonious 或其他东西，我对此持开放态度，但看起来如果内部缩进变量可以跟随 PEG 内部回溯，这一切都会奏效。

```
import parsley

def indent(s):
    s['i'] += 2
    print('indent i=%d' % s['i'])

def deindent(s):
    s['i'] -= 2
    print('deindent i=%d' % s['i'])

grammar = parsley.makeGrammar(r'''
id = <letterOrDigit+>
eol = '\n' | end
nots = anything:x ?(x != ' ')

node =  I:i id:name eol !(fn_print(_state['i'], name)) -> i, name

#I = !(' ' * _state['i'])
I = (' '*):spaces ?(len(spaces) == _state['i'])
#indent = ~~(!(' ' * (_state['i'] + 2)) nots) -> fn_indent(_state)
#deindent = ~~(!(' ' * (_state['i'] - 2)) nots) -> fn_deindent(_state)

indent = -> fn_indent(_state)
deindent = -> fn_deindent(_state)

child_list = indent (ntree+):children deindent -> children

ntree = node:parent (child_list?):children -> parent, children
nodes = ntree+

''', {
    '_state': {'i': 0},
    'fn_indent': indent,
    'fn_deindent': deindent,
    'fn_print': print,
})

test_string = '\n'.join((
    'brother',
    '  brochild1',
    #'    gchild1',
    #'  brochild2',
    #'    grandchild',
    'sister',
    #'  sischild',
    #'brother2',
))

nodes = grammar(test_string).nodes() 
```

# git - Git 没有在 ASP.NET MVC4 Web 应用程序中“看到” App_Data

> ID：15976617
> 
> 赞同：1
> 
> 时间：2013-04-12T16:38:33.043
> 
> 标签：git, git, git, git

当我注意到它已经被忽略时，我正在考虑是否将`App_Data`（我的 ASP.NET MVC4 Web 应用程序的）目录包含在它的[git](/questions/tagged/git "显示标记为“git”的问题")存储库中，即使根本没有`.gitignore`文件。

这是我刚刚创建并立即初始化了一个 repo 的新应用程序。我尝试创建另一个新应用程序（来自 Visual Studio 2012），并得到了相同的结果。我还尝试在我手动创建的目录中简单地初始化一个[git](/questions/tagged/git "显示标记为“git”的问题") repo。这是我的结果（来自 bash 提示符）：

*我在 Windows 7 上使用 git 版本 1.8.1.2 运行 msysgit。*

```
$ mkdir TEST

$ cd TEST

$ mkdir App_Data

$ ls
App_Data/

$ git init
Initialized empty Git repository in c:/Projects/TEST/.git/

$ git status
# On branch master
#
# Initial commit
#
nothing to commit (create/copy files and use "git add" to track)

$ echo wtf... 
```

**为什么[git](/questions/tagged/git "显示标记为“git”的问题")忽略`App_Data`目录？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:44:21.717

Git 忽略 App_Data 目录，因为它是空的。Git 基于文件而不是文件夹工作，因此会忽略空目录。存储空目录的标准方法是在文件夹中放置一个`.gitignore`或`readme`文件并提交它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T10:27:41.773

如果解决了您的问题，请将上面的帖子标记为答案。

我遇到了同样的问题，我的仓库忽略了我的数据库文件（.sdf）所在的 App_Data 文件夹。我尝试添加 .gitignore ，但仍然无法正常工作。我必须同步 .sdf 文件，所以我这样做了，

*   打开.gitignore
*   查找您不希望 git 忽略的文件类型（在我的情况下，该行是 ' *.sdf '）
*   删除所需文件类型的行，保存文件。

现在您的 App_Data 及其文件/子目录应该在 repo 中可见。

# u2 - .NET 的 U2 工具包 - UniSession 与 U2Connection

> ID：15976620
> 
> 赞同：4
> 
> 时间：2013-04-12T16:38:42.227
> 
> 标签：u2, unidata, u2netdk

我在 U2 Toolkit 的一些基本概念上有些挣扎（而且我在以前的版本中非常成功！）。

首先，我必须使用 U2.Data.Client.UO 添加；为了引用 UniSession 或 UniFile。这可能只是一般的无知，但“使用 U2.Data.Client”并不意味着我也想要它下面的 .UO 东西？！？

第二 - 通过 U2Connection 的 Open() 或 UniSession 的 OpenSession() 连接之间的区别（从概念上）是什么？他们每个人都提供了不同的工作环境吗？

最后 - 虽然文档和 Rajan 的各种文章中提供的示例很有帮助，但我想要一些更实用的东西：简单的“这是您在 Unidata 文件中读取和写入特定记录的方式”怎么样？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:45:27.540

请参阅第一个和第二个问题的答案

# 关于命名空间

如果您想使用 ADO.NET（SQL Access、UCI SERVER）开发应用程序，您需要一个命名空间（U2.Data.Client）

如果要使用 UO.NET（Native Access，UO SERVER）开发应用程序，则需要两个命名空间（U2.Data.Client 和 U2.Data.Client.UO）

U2.Data.Client 命名空间一般都有 Microsoft ADO.NET 规范类。

U2.Data.Client.UO 命名空间一般都有 UniObjects Native Specification Classes。正如您过去使用过的 UODOTNET.DLL，您可以感觉到所有的类都在那里。

# 关于 U2Connection/UniSession

这是设计使然。

当您在连接字符串中使用 Accessmode='Native' 时，U2Connection.Open() 会调用 UniSession.Open()。您可以从 LOG/TRACE 文件中进行验证。在这种情况下，基本上，U2Connection 和 U2Session 是相同的。U2Connection 类只是将连接字符串传递给 UniSession 类，然后 UniSession 类使用此连接字符串并调用 Open()。这是对使用静态类 UniObjects(...) 并且没有标准连接字符串概念的旧方式的改进。基本上我们将静态类 UniObjects(…) 替换为 U2Connection 类并提供连接字符串功能。

当您在连接字符串中使用 Accessmode='SQL' 时，U2Connection.Open() 会调用 UCINET.Open()。您可以从 LOG/TRACE 文件中进行验证。

这是 clear() 吗？

# java - XxX 未被识别为有效类型

> ID：15976622
> 
> 赞同：3
> 
> 时间：2013-04-12T16:38:55.450
> 
> 标签：java

我有这个代码：

```
List<NumericConfig> results = null;

@SuppressWarnings("unchecked")
results = query.getResultList(); // query is JPA named query 
```

但我收到此错误：

> 结果未被识别为有效类型

但这段代码有效：

```
@SuppressWarnings("unchecked")
List<NumericConfig> results = query.getResultList(); // query is JPA named query 
```

为什么我的第一个代码不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:42:07.467

像这样的注解

```
@SuppressWarnings("unchecked") 
```

只能应用于包、类、类成员（包括`enum`值）或变量声明。它们不能应用于任意陈述。

[JLS 的第 9.7 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/interfaces.html#9.7)说

> 注释可以在任何声明中用作修饰符，无论是包（第 7.4 节）、类（第 8 节）、接口、字段（第 8.3 节、第 9.3 节）、方法（第 8.4 节、第 9.4 节）、参数、构造函数（第 8.8 节） ，或局部变量（§14.4）。

由于它出现在方法体内，编译器已经排除了（包，类，成员）声明，因此期望在它之后有一个变量声明。变量声明以类型开头，因此它解释`results`为类型名称，然后意识到它不是，并抱怨它，然后才意识到这`= query...`不是有效的变量名称和初始化程序。

* * *

我认为

```
List<NumericConfig> results 
```

应该是

```
List<? extends NumericConfig> results 
```

因为您可能不知道查询使用的确切实现类型，并且无论如何都无法有效地添加到结果列表中。

* * *

我不会将注释添加到整个方法中，因为这可能会抑制您（或以后的代码维护者）不确定是否安全的其他未经检查的分配。

您可以将作业分成两部分

```
// This is type-safe because query is known to be a JPA named query.
// We use ? extends because query may be a more specific concrete type,
// and because we cannot add to the list owned by query.
@SuppressWarnings("unchecked")
List<? extends NumericConfig> resultListTyped = query.getResultList();
results = resultListTyped; 
```

或者，根据我的喜好，您可以将注释附加到静态方法

```
results = unpackResultList(query, NumericConfig.class); 
```

和其他地方

```
@SuppressWarnings("unchecked")
private static <T>
List<? extends T> unpackResultList(Query query, Class<T> resultType) {
  List<T> results = query.getResultList();
  // A quick and dirty sanity check of just the first value.
  assert results.isEmpty() || resultType.isInstance(results.get(0));
  return results;
} 
```

后一种选择的好处是也适用于 Java 5。

# vb.net - VB.NET - 执行 Me.Close 之后的代码

> ID：15976627
> 
> 赞同：0
> 
> 时间：2013-04-12T16:39:07.543
> 
> 标签：vb.net

更新：@Mark Hall 的解决方案：在 Me.Close 之后使用 Exit Sub 以防止在 Closing 事件进行时进一步执行子..

* * *

我试图在关闭表单时打开一个弹出窗口，用户可以在其中决定他是否真的要关闭表单。

因此我写道：

```
Private Sub Form1_FormClosing_1(ByVal sender As System.Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles MyBase.FormClosing
    e.Cancel = True 'Fenster wird nicht geschlossen

    Dim DialogExit As DialogResult
    DialogExit = MsgBox("Do you want to exit the setup process?", vbQuestion Or MsgBoxStyle.OkCancel, "Exit Setup?")

    Select Case DialogExit
        Case Windows.Forms.DialogResult.OK
            Me._Result_ThisForm = Result_Form.Yes
            e.Cancel = False
        Case Else
            'Just no exit
    End Select

End Sub 
```

但是当我从代码中的某个地方调用 Me.Close 时，表单并没有关闭，但它会执行进一步的代码！

就像在（代码中的某处）：

```
If bErr = False Then
    Me._Result_ThisForm = Result_Form.Goto_Next ' Just an additional info Enum
    Me.Close()
End If

MsgBox("This should not pop up if bErr = false") 
```

-> “退出设置？” MsgBox 正确弹出，但用户按“确定”退出程序，“Me.Close（）”之后的 MessageBox 突然出现然后程序关闭。

是什么导致了这种行为？

谢谢您的帮助！

# ios - 默认 UIButton 的文本是什么颜色的？

> ID：15976634
> 
> 赞同：2
> 
> 时间：2013-04-12T16:39:30.737
> 
> 标签：ios, xcode, uibutton, uicolor

默认的文本是什么颜色的`UIButton`？我正在尝试在某些表格视图单元格中重新创建它，但没有运气。我最接近的是：

```
[UIColor colorWithRed:0/255.0 green:51.0/255.0 blue:102.0/255.0 alpha:1]; 
```

该颜色、字体大小和样式是否记录在任何地方？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-06-04T16:02:36.987

这是一个很老的问题，但我想我还是会添加自己的答案。

如果您需要在 iOS 7 及更高版本上具有相同颜色的自定义“纯文本”按钮，则不要使用 .`UIButton()`而是使用`UIButton.buttonWithType(UIButtonType.System)`.

这将为您提供与标准系统按钮具有相同属性的文本按钮，包括正确的颜色。然后，您可以将此按钮用作模板并更改字体大小或添加图像等内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T16:52:29.183

1.  在模拟器上运行带有 UIButton 的示例应用程序
2.  使用聚光灯搜索“DigitalColor Meter”（不带引号，见下文） ![在此处输入图像描述](https://i.stack.imgur.com/24hV5.png)
3.  使用指针将其指向文本颜色，这将为您提供文本的 RGB 值
4.  字体大小和其他值可以使用 IB 找到。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-12T16:53:46.043

尝试以下操作：

```
CGFloat red;
CGFloat green;
CGFloat blue;
CGFloat alpha;

UILabel *buttonLabel = [yourButton titleLabel];
UIColor *textColor = [buttonLabel textColor];

[textColor getRed:&red green:&green blue:&blue alpha:&alpha]; 
```

现在 red、green、blue 和 alpha 将包含您要查找的值：

```
NSLog(@"Red: %f Green:%f Blue:%f Alpha:%f", red, green, blue, alpha); 
```

对于 iOS 6，这将返回：

```
Red:0.220000 Green:0.330000 Blue:0.530000 Alpha:1.000000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T16:52:27.563

[与默认 UIButton 颜色匹配的文本颜色 [蓝色]](https://stackoverflow.com/questions/5374341/text-color-to-match-default-uibutton-color-blue)

看起来有人以编程方式将其拉出，但我尚未确认。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-21T10:54:31.017

就个人而言，我要做的是使用属性 currentTitleColor 捕获 viewDidLoad 中文本的颜色，然后在需要时使用它。这样您就不必担心 rgb 和其他问题。

所以在界面中为你的按钮设置一个 UIColor 属性和 Outlet

```
@property (strong,nonatomic)UIColor *backToTheDefaultTextColor;
@property (weak, nonatomic) IBOutlet UIButton *myButton; 
```

在 viewDidLoad 中获取按钮标题颜色

```
_backToTheDefaultTextColor = _myButton.currentTitleColor; 
```

然后，在您更改按钮标题的颜色并想要恢复后，只需输入

```
_myButton.titleLabel.textColor = _backToTheDefaultColor; 
```

# php - 如何使用php获取ajax页面内容

> ID：15976636
> 
> 赞同：-1
> 
> 时间：2013-04-12T16:39:40.273
> 
> 标签：php, javascript, ajax

我想从以下网站阅读赔率：http: [//uk.wettportal.com/Soccer/England/Premier_League/Arsenal_FC_-_Everton_FC_963003.html](http://uk.wettportal.com/Soccer/England/Premier_League/Arsenal_FC_-_Everton_FC_963003.html)

赔率是使用 ajax 动态加载的。源页面不包含赔率。是否有任何技术可以使用 php 获取此类页面的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:52:35.973

如果 data-url 是固定的，您可以使用简单的 php one-liner 立即使用它：
`$data = json_decode(file_get_contents('http://domain.com/data.json'));`

如果 'ajax' 数据 url 不固定，您首先需要获取主机页面（上面的行减去 json_decode）并从中获取实际的数据链接。

*注意：*如果网站的作者正确地完成了他的工作，那么可能会采取一些措施来解决这个问题，例如：检查引荐来源网址、浏览器的 http 标头、会话 cookie 等。
这将使获取数据变得更加困难（永远不可能） .

在这种情况下，您将使用 CURL 或 php 的[fsockopen](http://php.net/manual/en/function.fsockopen.php)（此处为文档）并*模拟*浏览器。
不要忘记 cookie 处理（因为该站点使用它！！！我嗅探了流量）以及可能是引荐来源网址（主机页面的 url）。也不要忘记`X-Requested-With: XMLHttpRequest`标题。

* * *

示例（针对您的情况）：

从函数`refresh_odds`中可以看到这些数据 url 是如何构建的（我清理了格式，所以它很容易阅读）：

```
var url = "/lib/ajax/getEventResult.php";
var data = "event_id=" + $("#event_id").val() 
         + "&partner=" + $("#partner").val() 
         + "&lang=" + $("#language").val();

var url = "/lib/ajax/getOddsTable.php";
var data = "partner=" + $("#partner").val() 
         + "&lang=" + $("#language").val() 
         + "&period=" + $("#period").val() 
         + "&betgame=" + $("#betgame").val() 
         + "&eventmode=" + $("#eventmode").val() 
         + "&event_id=" + $("#event_id").val() 
         + "&bettype=" + $("#bettype").val(); 
```

现在您知道隐藏的输入字段 ID 是什么，您的 php 脚本必须在主机页面中搜索才能构建实时数据 URL。

* * *

**更新**（根据您的评论）

奇数的标签可以：

```
$("#period").val("fulltime");
refresh_odds(); 
```

期间选项卡执行以下操作：

```
$("#period").val(period);
refresh_odds(); 
```

看看它是如何回到`refresh_odds()`...？

祝你好运

# iphone - 如何使网站与 iOS 和鼠标悬停兼容

> ID：15976637
> 
> 赞同：0
> 
> 时间：2013-04-12T16:39:41.667
> 
> 标签：iphone, ios, ipad, compatibility, mouseover

目前，我的网站编程为“将鼠标悬停在”指示框的名称（当您的鼠标移到它们上时），这适用于 Android 和一般计算机，但与 iOS 不兼容。

因此，如果使用 iPad 或 iPhone，则需要用户单击该框两次（而不是一次），因为鼠标悬停不兼容。

如何删除仅适用于 iOS 应用程序的悬停鼠标？您可以为此使用“if 语句”吗？或条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:43:53.450

有两种可行的方法来做到这一点：

1.  在服务器端，使用 WURFL 等技术来检测最终用户是否在 iOS 上，并提供不同的样式表。
2.  在客户端，检查用户代理字符串中的 ip(ad|hone|od) 并相应地修补受影响的元素。

# php - 如何将变量从 PHP 服务器返回到 iOS？（使用 ASIHTTP）

> ID：15976638
> 
> 赞同：1
> 
> 时间：2013-04-12T16:39:41.917
> 
> 标签：php, iphone, ios, objective-c, asihttprequest

我已经将一个文件从 iOS 发布到服务器（使用 PHP），我希望 PHP 服务器将一些变量返回给 iOS，我使用

```
>[request responseString] 
```

获取服务器响应，

但它总是返回我的 HTML 代码（关于我的网页的第一页），我想从我的网页的第三页返回变量。

换句话说，它意味着从 PHP 向 iOS 发布一些东西。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:42:01.367

你可能有类似的东西

```
include('header.html'); 
```

在您的 PHP 某处，加载您在 iOS 中看到的 html。您需要确保脚本的**唯一**输出是您要返回给 iOS 的数据，例如

```
<?php

... process data from iOS
echo $data_to_send_back_to_ios; 
```

**脚本的任何**输出，ANYWHERE，都将显示在您的客户端中。

请注意，您不会“回发”到 ios。这意味着您的 ios 设备正在运行网络服务器。不需要完整的第二个 http 连接来返回数据……您已经与服务器建立了连接，您可以通过该连接发送 ios->php 发布数据。使用该连接返回响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:56:55.353

这是一个对我来说效果很好的教程。也许它对你有用：

第 1 部分： [http ://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

第 2 部分： [http ://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:14:25.720

有不同的方法可以实现这一点，最流行的方法之一是使用 JSON 格式的序列化输出，这使得在 iOS 上解析变得容易。所以你需要做的是在 PHP 中使用它

```
<?php

// Only PHP code you need to pass to iOS

echo json_encode($_POST);

?> 
```

现在在 iOS 上，首先下载此库并将其包含在您的 Xcode 项目中[https://github.com/TouchCode/TouchJSON](https://github.com/TouchCode/TouchJSON)然后您需要执行此操作以在收到响应后检索 $_POST 变量

```
NSString *jsonString = [request responseString];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError *error = nil;
NSArray *postVars = [[CJSONDeserializer deserializer] deserializeAsArray:jsonData error:&error]; 
```

现在您在 *postVars 数组中拥有所有 $_POST 变量。

# python - 使用字典中的 replace() 时出现 TypeError

> ID：15976639
> 
> 赞同：1
> 
> 时间：2013-04-12T16:39:42.657
> 
> 标签：python, string, dictionary, int, typeerror

首先：请记住，我是编程的初学者。

我正在尝试用 Python 编写一个简单的程序，它将用辅音+“o”+辅音替换字符串中的辅音。例如，“b”将替换为“bob”，“d”将替换为“dod”（因此“python”一词将更改为“popytothohonon”）。

为此，我创建了一个字典，其中包含对 b:bob、c:coc、d:dod 等。然后我使用 replace() 命令通读单词并将辅音替换为字典中的翻译。完整的代码如下所示：

```
def replacer(text):
    consonant='bcdfghjklmnpqrstvwxz'
    lexicon={}
    for x in range(0,len(consonant)):
        lexicon[x]=(consonant[x]),(consonant[x]+'o'+consonant[x])
    for i,j in lexicon.items():
        text=(text.replace(i,j))
    return text 
```

现在，当我尝试调用此函数时，出现以下错误：

```
Traceback (most recent call last):
  File "D:\x\x.py", line 37, in <module> 
      print(replacer("python"))
  File "D:\x\x.py", line 17, in replacer 
      text=(text.replace(i,j))
TypeError: Can't convert 'int' object to str implicitly 
```

但我没有使用任何整数！字典肯定有问题，因为当我像这样“手工”制作时一切正常：

```
list={'b':'bob', 'c':'coc', 'd':'dod', 'f':'fof', 'g':'gog', 'h':'hoh'......} 
```

但是当我打印“非手工”字典时，一切似乎都井井有条：

```
{0: ('b', 'bob'), 1: ('c', 'coc'), 2: ('d', 'dod'), 3: ('f', 'fof')........ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:42:13.293

`lexicon`是一个以整数为键、元组为值的字典。当你迭代它的项目时，你会得到表单的元组`(integer,tuple)`。然后，您将该整数和元组传递给`text.replace`as `i`，`j`这就是它抱怨的原因。也许你的意思是：

```
 for i,j in lexicon.values():
     ... 
```

对于这个简单的替换，`str.replace`很好，但对于更复杂的替换，如果[你](https://stackoverflow.com/a/15324369/748858)[使用`re.sub`](https://stackoverflow.com/a/15324369/748858).

* * *

此外，正如评论中所指出的，对于这种情况，更好的数据结构是使用 a `list`：

```
lexicon = [ (x,'{0}o{0}'.format(x)) for x in chars ] 
```

现在，如果您真的想要，您可以从此列表中构建您的 dict：

```
lexicon = dict(enumerate(lexicon)) 
```

但可能没有必要。在这种情况下，您将`lexicon`直接迭代：

```
for i,j in lexicon:
    ... 
```

如果您只打算这样做一次，您甚至可以懒惰地这样做，而无需使用生成器表达式实现列表：

```
lexicon = ( (x,'{0}o{0}'.format(x)) for x in chars ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:47:52.680

这次不需要字典，只需遍历文本字符，将元音或辅音+o+辅音添加到结果数组中，然后将其连接到最后的字符串中：

```
def replacer(text):
    consonants = set('bcdfghjklmnpqrstvwxz')
    result = []
    for c in text:
        if c in consonants:
            result.append(c+"o"+c)
        else:
            result.append(c)
    return "".join(result)

print(replacer("python")) 
```

* * *

对于高级用户：

```
def replacer(text):
    return re.sub(r"[bcdfghjklmnpqrstvwxz]", r"\g<0>o\g<0>", text) 
```

* * *

并回答“我做错了什么？” - 字典对任意键很有用，通常`list.append()`比在字典中使用键 0-n 更可取。而且由于您对辅音的位置不感兴趣，您可以像这样直接迭代字符串：

```
for x in consonant:
    lexicon[x] = x+"o"+x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:29:51.117

我想您想要实现的是与替换相辅相成的词典映射。可以这样做：

```
lexicon = { c: c+'o'+c for c in consonant } 
```

这相当于：

```
for c in consonant:
  lexicon[c] = c+'o'+c 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T16:42:54.530

不...您在手工版本中的键是字符串...您在另一个版本中的 ket 是整数...整数没有替换方法

# image - 灯箱：在我的页面上，第一张图片加载了以下图片

> ID：15976643
> 
> 赞同：0
> 
> 时间：2013-04-12T16:39:59.043
> 
> 标签：image, loading, lightbox2

[正在处理的页面](http://www.josiahrussellwebdesign.com/fbc/Teens.htm)

大家好，我希望这将是一个简单的修复，我只是不知道是什么阻碍了程序。

所以这是场景，我刚刚安装了灯箱，我只测试了第一张图片，效果很好，没问题。因此，我开始对页面上的所有图像进行分组，但它们都不会打开。你现在会在页面上看到我只有两张图片，其余的都被注释掉了。

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T06:04:13.647

从我所看到的情况来看，您的第二张图片没有出现，因为您指向的文件尚未上传到该站点。

对于您的第一张图片，“A”标签引用 1small.jpg，与图片相同。对于您的第二张图片，“A”标签引用 125large.jpg，这与图片 (125small.jpg) 不同。

上传丢失的图像，或者更正“A”标签。

# vb.net - 如何在 VS 2012 vb.net 中开发后从构建中排除类

> ID：15976646
> 
> 赞同：0
> 
> 时间：2013-04-12T16:40:09.410
> 
> 标签：vb.net, visual-studio-2012, development-environment

我的项目中有一个 Helper 类，用于帮助我开发应用程序。当我将应用程序投入生产时，如何不将此类包含在最终构建中？

不过，我仍然希望要进行维护的人能够访问它。

所以我正在寻找的行为是让程序在我使用调试配置在 Visual Studio 中开发它时正常运行。但是如果我使用发布配置构建它，我会在调用未知成员时收到错误消息（假设我没有删除对 Helper 的调用）。

类似于我们在测试中的行为。

更好的解决方案不会让我删除代码中对 Helper 的调用。

有什么办法吗？

如果问题不清楚，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:43:12.103

使用[`ConditionalAttribute`](http://msdn.microsoft.com/en-gb/library/system.diagnostics.conditionalattribute.aspx)类中的方法。

传入`DEBUG`将意味着只有在定义了 DEBUG 符号时才会编译该类。

> 将 ConditionalAttribute 应用于方法向编译器指示不应将对该方法的调用编译为 Microsoft 中间语言 (MSIL)，除非定义了与 ConditionalAttribute 关联的条件编译符号。

```
<ConditionalAttribute("DEBUG")> _
Sub Method1(x As Integer)
    Console.WriteLine("DEBUG is defined")
End Sub 
```

# jquery - jQuery 可排序锁定项

> ID：15976651
> 
> 赞同：1
> 
> 时间：2013-04-12T16:40:34.173
> 
> 标签：jquery, jquery-ui-sortable

删除后是否可以将项目锁定在可排序列表中？

基本上，我有一个可排序的列表 [OBJECT]，用户应该将对象放入步骤中。这些步骤是静态的/不可移动的。像这样：

[步骤 1] [对象 1]

[步骤 2] [对象 2]

[步骤 3] [对象 3]

[步骤 4] [对象 4]

所以假设我将对象 1 拖到第 3 步：

[步骤 1] [对象 2]

[步骤 2] [对象 3]

**[步骤 3] [对象 1]**

[步骤 4] [对象 4]

现在任何被拖动的对象都不应改变 [OBJECT 1] 的位置，因为它需要停留在第 3 步。

是否可以锁定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:47:31.693

可能是“取消”选项可以帮助 ypu。

```
$( ".selector" ).sortable( "option", "cancel", "a,button" ); 
```

检查[此链接](http://api.jqueryui.com/sortable/#option-cancel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:38:34.183

我实现这一目标的最佳方法是使用拖放。我在这里解释了更多关于我所做的事情：[jQuery Drag & drop-reorder](https://stackoverflow.com/questions/15980047/jquery-drag-drop-reorder/16022314#16022314)

# jquery - 在wordpress中使用ajax动态加载帖子

> ID：15976653
> 
> 赞同：2
> 
> 时间：2013-04-12T16:40:39.203
> 
> 标签：jquery, ajax, wordpress

嗨，我已经阅读了很多关于这里的教程和问题，但主题似乎真的不清楚。

这是我能找到的最好的教程[5-tips-for-using-ajax](http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress)

我的自定义帖子缩略图显示在索引页面的网格中。我正在尝试创建一个单击事件以通过 ajax 将链接的帖子加载到同一页面上的 div 中，而不是被带到帖子中。我已经在许多网站上看到过这种方法，但只是找不到正确的教程/方法来做到这一点。

这里有一些例子： [Reveal](http://themetrust.com/demos/reveal/)、[aware](http://themewich.com/aware/)、[garnish](http://demo.themezilla.com/garnish/)、[ying+yang](http://onioneyethemes.com/yin-and-yang/)

希望有人能在两周后澄清这一点，我对这个问题不太清楚:(

到目前为止我使用的脚本：

```
<ul id="og-grid" class="og-grid">
            <?php query_posts( array( 'post_type' => array('portfolio') ));?><?php if (have_posts()) : while (have_posts()) : the_post(); ?>
            <li><a class="ajax-click" href="#" ><?php the_post_thumbnail('thumbnail', array('class' => 'thumb', 'alt' => ''.get_the_title().'', 'title' => ''.get_the_title().'')); ?></a></li><?php endwhile; ?><?php endif; ?>
        </ul>
    </div> 
```

索引.php

.

```
wp_register_script( 'loadajax', get_stylesheet_directory_uri() . '/library/js/loadajax.js', array( 'grid-js' ), false , true );
wp_localize_script( 'loadgrid', 'MyAjax', array( 'ajaxurl' => admin_url( 'admin-ajax.php' ) ) ); 
```

注册我的脚本和 admin-ajax

```
add_action ( 'wp_ajax_nopriv_cmdv_load', 'cmdv_load_ajax' );
add_action('wp_ajax_cmdv_load_ajax', 'cmdv_load_ajax' );

function cmdv_load_ajax () {

$the_slug = $_POST['slug'];
$args=array(
  'name' => $the_slug,
  'post_type' => 'projects',
  'post_status' => 'publish',
  'showposts' => 1,
);
$my_posts = get_posts($args);
if( $my_posts ) :

    global $post;
    $post = $my_posts[0];       

    // generate the response
    $response = json_encode( "Success" );

    // response output
    header( "Content-Type: application/json" );     
    ?>

    <div id="ajax-project-<?php the_ID(); ?>" <?php post_class('project main ajax clearfix'); ?> >

        <div class="projectHeader">
            <h1><?php the_title(); ?></h1>

            <div class="projectNav clearfix">                   
                <?php

                $prev_post = get_previous_post();
                if($prev_post) $prev_slug = $prev_post->post_name;
                $next_post = get_next_post();
                if($next_post) $next_slug = $next_post->post_name;
                ?>                  
                <div class="next <?php if(!$next_slug) echo 'inactive';?>"> 
                    <?php if(isset($next_slug)) : ?>
                        <a href="#<?php echo $next_slug;?>" onClick="nextPrevProject('<?php echo $next_slug;?>');">Next</a>
                    <?php endif; ?>
                </div>
                <div class="previous <?php if(!$prev_slug) echo 'inactive';?>"> 
                    <?php if(isset($prev_slug)) : ?>
                        <a href="#<?php echo $prev_slug;?>" onClick="nextPrevProject('<?php echo $prev_slug;?>');">Previous</a>
                    <?php endif; ?>
                </div>  
                <div class="closeBtn">  
                    <a href="#index">Close Project</a>
                </div>              
            </div> 
        </div>
    <div class="entry">
        <?php the_content(); ?>
    </div>
</div>
<?php endif; ?>
<?php die();?>
<?php } ?> 
```

函数.php

jquery 是我真正苦苦挣扎的地方，所以这是我需要指导的地方！我正在使用[带有扩展预览](http://tympanus.net/codrops/2013/03/19/thumbnail-grid-with-expanding-preview/)的缩略图网格来对齐缩略图，但添加了点击功能和响应我只是无法解决:(

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:53:12.530

最好的方法是使用内置的 AJAX。换句话说，将您的 AJAX 请求发送到`wp-admin/admin-ajax.php`. 您的 PHP 函数应该包含在`functions.php`.

对于初学者，我承认这不是一个容易的问题，但是网上有很多关于这个的教程。

这是我已经在 SO 上写过的关于 Wordpress AJAX 的教程：

[通过 AJAX 在 Wordpress 中动态更改导航链接（下一个和上一个）](https://stackoverflow.com/questions/15175020/dynamically-changing-navigation-links-next-and-previous-in-wordpress-via-ajax)

注意：不要阅读该问题，因为它包含我使用的旧方法，请阅读它包含正确方法的答案。

# android - 如何在安卓模拟器上安装openCV

> ID：15976656
> 
> 赞同：1
> 
> 时间：2013-04-12T16:40:50.677
> 
> 标签：android, opencv, configuration, virtual

我必须在模拟器上安装 openCV。有人写道应该使用某个命令

`adn install <...>/OpenCV-2.4.3.2-android-sdk/apk/OpenCV_2.4.3.2_Manager_2.4_x86.apk`

但没说放哪里？我没有看到任何命令行配置虚拟设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T17:17:46.600

You can install it on a VirtualBox appliance.

[http://dimitri-christodoulou.blogspot.com.es/2014/02/how-to-install-opencv-on-android-vm.html](http://dimitri-christodoulou.blogspot.com.es/2014/02/how-to-install-opencv-on-android-vm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:24:43.690

在模拟器上安装 OpenCV 管理器就像安装任何其他应用程序一样。这是有关如何执行此操作的[链接。](https://stackoverflow.com/questions/3480201/how-do-you-install-an-apk-file-in-the-android-emulator)

# c# - 如何将 .nav 文件嵌入 pdf 投资组合？

> ID：15976668
> 
> 赞同：0
> 
> 时间：2013-04-12T16:41:33.587
> 
> 标签：c#, pdf-generation, itextsharp, portfolio

我是新来的，也是 iTextsharp 的新手。我已经成功创建了一个 pdf 投资组合文件并将其显示在浏览器上。默认布局是详细信息或自定义。我的老板希望为它添加一些布局，比如点击或旋转。有谁知道该怎么做？我会感谢你的帮助！

我应该将 .nav 文件嵌入到 pdf 组合中还是自己创建导航？我不知道怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:31:47.370

.nav 文件在 ISO-32000-1（第 3 级）的 Adob​​e 扩展中进行了描述，如 iText in Action, Second Edition 第 541 页所述。.nav 文件未在此摘录中明确提及，但扩展规范确实提到了它们。

iText 不支持开箱即用的 .nav 文件。我认为从 .nav 文件中提取必要的信息并使用 iText 将它们添加到自己中应该是可管理的。当然，您需要尊重 ISO 规范并了解 3 级扩展的工作原理。

[http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/adobe_supplement_iso32000.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/adobe_supplement_iso32000.pdf) 相关页面：

*   p34 - 导航器

*   p130 - .nav 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T22:30:39.053

当通过 iTextSharp 创建 PDF 时，我找到了一种使用模板文件将自定义布局/导航器分配给 PDF 投资组合集合的方法。我在这里详细说明了我的答案：

[将现有的自定义布局/导航器分配给 iTextSharp 生成的投资组合](https://stackoverflow.com/questions/21343614/assigning-an-existing-custom-layout-navigator-to-a-portfolio-generated-by-itexts)

# c# - 对用户的动态权限

> ID：15976672
> 
> 赞同：3
> 
> 时间：2013-04-12T16:41:46.873
> 
> 标签：c#, asp.net-mvc-4

我正在使用 asp.net 网页的现有代码，其中控制器中的方法根据用户所处的角色受到限制，例如：

```
 namespace Principal.Controllers
    {
       [Authorize]
       public class MyController: Controller
       {
          [Authorize(Roles = "Role1,Role2,Role3")]
          public method1() {...}
       }
    } 
```

问题是声明允许的角色的部分：

```
 [Authorize(Roles = "Role1,Role2,Role3")] 
```

我想让字符串动态化，所以我可以根据管理员设置的属性从方法中返回它，但是它总是给我一些奇怪的错误，例如“错误 3 属性参数必须是常量表达式、typeof 表达式或属性参数类型的数组创建表达式"

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:45:49.297

正如您所发现的，您只能在定义属性时使用常量；这是因为属性被编译到代码中 - 您不能使用编译器在编译时不知道的表达式。

相反，您可以做的是创建一个从`AuthorizeAttribute`类继承的新属性，并覆盖`OnAuthorize`. 然后你可以在这里实现你的自定义角色逻辑。

# jquery - jQuery .get() 和 Perl 不能一起运行

> ID：15976673
> 
> 赞同：1
> 
> 时间：2013-04-12T16:41:50.020
> 
> 标签：jquery, perl, get

我觉得一些简单的事情有点麻烦。我有一个 Perl 脚本，其中已经包含了一堆正常运行的 JQuery。当用户离开电子邮件地址字段时，我希望立即使用 .blur 和 .get 在 Perl 中运行电子邮件验证子程序。但是，我似乎无法将 Perl 脚本和 JQuery 调用连接在一起。所以我已经尽可能地简化了，只是为了让它发挥作用。基本上，用户离开输入字段，调用脚本，简单地打印一些东西，我通过警报让 Jquery。

jQuery

```
$('#billemail').blur(function() {
    $.get('ajax_email_check.pl', { 'email': $('#billemail').val() }, function(data) {
        alert ("Billing email is "+data+"!");
    });
}); 
```

Perl

```
#!/usr/bin/perl

use warnings;
use DBI;
use CGI;
use CGI::Carp qw(fatalsToBrowser);
require "./lib/servervars.pl";
require "./lib/common.pl";

my $email_address = param('email');

#my $email_valid = &check_email($email_address);

#if ($email_valid) {
#    $output = "Success";
#} 
#else {
#    $output = "Fail";
#}

print "Success"; 
```

当然，如果我删除 .get 行和结束标记，则会在字段失去焦点时触发警报。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:18:17.767

您的 Perl 脚本（至少是您发布的版本）不输出内容类型标头。这是 CGI 脚本必须输出的最起码：响应标头、指示标头结束的空行以及可选的内容（`success`在您的情况下为字符串），例如

```
print "Content-Type: text/plain\n\n";
if (email_is_valid()) {
  print "success";
} else {
  print "error";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:44:21.057

你为什么要逃离`$`这里？

```
$.get('ajax_email_check.pl', { 'email': \$('#billemail').val() }

                                       ^^^^^ 
```

至少这可能会阻止您从`billemail`元素中获取价值（输入？）。

更重要的是，您的引号不匹配，因此您的 JS 大体上是无效的：

```
alert ("Billing email is '+data+'!");   // <-- Need double-quotes
                        ^^^    ^^^ 
```

尝试修复它，看看你是否能得到更好的结果。

# datetime - 指定发生两次的时间的标准？

> ID：15976675
> 
> 赞同：1
> 
> 时间：2013-04-12T16:41:55.833
> 
> 标签：datetime, timezone

鉴于时区的不连续性，是否有一种标准方法可以指定您对两个重复时钟时间中的哪一个感兴趣？我从最近提出的 Java 讨论“[为什么减去这两次（在 1927 年）给出了奇怪的结果？](https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result) ”中引起了我的注意，但这并不是孤立于 1920 年代中国的奇怪事件。

我如何告诉你我对今年 11 月 3 日上午 1 点 50 分（美国东部标准时间）感兴趣？我知道我可以使用 UTC、纪元时间……但是有没有一种好方法可以询问用户他们对哪个当地时间感兴趣？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:14:42.860

> 我如何告诉你我对今年 11 月 3 日上午 1 点 50 分（美国东部标准时间）感兴趣？

通过将其限定为 EST，您已经指定您的意思是“东部标准时间”，即 UTC-05:00。这是凌晨 1 点 50 分的第二次。第一个实例发生在“东部夏令时间”（EDT），即 UTC-04:00。当然，如果你刚才说的是“东部时间”，那我就不知道你说的是哪一个了。

但是 - 请记住，“EST”本身并不是唯一的。我猜你指的是美国东部标准时间——但你可能指的是三个不同区域中的一个，它们都称为同一个东西。 [有关时区缩写的列表，请参见此处。](http://www.timeanddate.com/library/abbreviations/timezones/) 现在碰巧所有“EST”区域都在UTC-05:00，但这只是巧合。有几个区域具有相同的名称或缩写，并且具有不同的偏移量或不同的 DST 开始/停止日期。

您正在寻找的“标准”是 ISO8601 的一部分，它允许日期和时间包含偏移量。例如，提到的两点是：

```
2013-11-03T01:50:00-04:00

2013-11-03T01:50:00-05:00 
```

请记住，偏移量唯一地标识了时刻/瞬间 - 但它并不*唯一*地标识时区。还有几个其他时区在不同时间使用 -04:00 和 -05:00 偏移量。这一点经常被遗忘，因为偏移量有时被错误地称为“区域”。

# django - 覆盖内联管理员的查询集

> ID：15976683
> 
> 赞同：13
> 
> 时间：2013-04-12T16:42:10.057
> 
> 标签：django, django-admin, django-forms

我在为我的内联管理员覆盖查询集时遇到了一些麻烦。

这是一个沼泽标准的父管理员和内联管理员：

```
class MyInlineAdmin(admin.TabularInline):
    model = MyInlineModel
    def queryset(self, request):
        qs = super(MyInlineAdmin, self).queryset(request)
        return qs

class ParentAdmin(admin.ModelAdmin):
    inlines = [MyInlineAdmin]
admin.site.register(ParentAdminModel, ParentAdmin) 
```

现在我可以做`qs.filter(user=request.user)`或`qs.filter(date__gte=datetime.today())`没有问题。

但我需要的是 MyInlineModel 实例或 ParentAdminModel 实例（不是模型！），因为我需要根据它过滤我的查询集。

是否有可能在 queryset() 方法中获得类似 self.instance 或 obj 的东西（如在 get_readonly_fields() 或 get_formset() 中）？

希望这是有道理的。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-14T13:26:23.413

```
class MyInlineAdmin(admin.TabularInline):
    model = MyInlineModel
    def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
        """enable ordering drop-down alphabetically"""
        if db_field.name == 'car':
            kwargs['queryset'] = Car.objects.order_by("name") 
        return super(MyInlineAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs)

class ParentAdmin(admin.ModelAdmin):
    inlines = [MyInlineAdmin]

admin.site.register(ParentAdminModel, ParentAdmin) 
```

我假设您的模型看起来像：

```
class MyInlineModel(models.Model):
    car=models.Foreignkey(Car)
    #blah 
```

有关此的更多信息；阅读 formfield_for_foreignkey 上的 django 文档——> [https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)

# c# - 从 Windows 资源管理器拖放到实际适用于 Windows 7 的自定义 C# 应用程序

> ID：15976687
> 
> 赞同：0
> 
> 时间：2013-04-12T16:42:19.443
> 
> 标签：c#, winforms, drag-and-drop

我尝试（使用几十个示例）创建一个简单的 WinForms 应用程序，该应用程序允许我将一个简单的文本文件拖放到自定义 DotNet 程序的输入框中。不幸的是，似乎没有在 Windows 7 中实际运行的示例。

这是一个简单的例子（来自另一篇被到处引用的帖子），但它根本不起作用。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace DragAndDropTestCSharp
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.AllowDrop = true;
        this.DragEnter += Form1_DragEnter;
        this.DragDrop += Form1_DragDrop;
    }
    private void Form1_DragEnter(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(DataFormats.FileDrop))
        {
            e.Effect = DragDropEffects.Copy;
        }
        else
        {
            e.Effect = DragDropEffects.None;
        }
    }

    private void Form1_DragDrop(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(DataFormats.FileDrop))
        {
            string[] filePaths = (string[])(e.Data.GetData(DataFormats.FileDrop));
            foreach (string fileLoc in filePaths)
            {
                // Code to read the contents of the text file
                if (File.Exists(fileLoc))
                {
                    using (TextReader tr = new StreamReader(fileLoc))
                    {
                        MessageBox.Show(tr.ReadToEnd());
                    }
                }

            }
        }
    }
}
} 
```

这可能是UAC问题吗？如果是这样，为什么世界上所有其他应用程序似乎都在使用 UAC 进行这种简单但难以捉摸的拖放壮举？

有人有一个真实可行的例子来让它在 Windows 7 中工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:57:27.980

我试过你的样品，效果很好。检查您是否已将表单对象的 Load 事件挂钩到 Form1_Load 处理程序，并且您的**命名空间**是否相同。

`this.Load += new System.EventHandler(this.Form1_Load);`

或通过属性编辑器：

![属性加载处理程序](https://i.stack.imgur.com/Zl6jN.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T22:08:26.930

好的，我发现在管理员下运行 VS（我必须为另一个项目做）是罪魁祸首。在普通用户模式下加载 VS，它可以在 UAC 上正常工作。感谢大家的意见！

# java - 如何检查ExecutorService线程池中是否有线程正在运行

> ID：15976696
> 
> 赞同：9
> 
> 时间：2013-04-12T16:42:47.413
> 
> 标签：java, multithreading, executorservice

如何检查线程 ExecutorService 池中是否正在运行线程？

背景：
如果设置了标志，我想在线程池中的线程之间进行同步。因此，如果该标志设置为 true 以进行同步，那么我必须检查其他线程是否正在运行或等待其完成，然后使用 synchronize 调用阻塞线程，以便其他线程等待这个阻塞线程完成。

如果未设置标志，则无需同步并且可以并行执行线程。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:56:34.633

您需要使用`Semaphore`.

这使您可以拥有许多“许可证”来工作。如果您只希望一次运行一个任务，则拥有`Semaphore`一个许可，否则拥有一个`Semaphore`许可数量大于`Thread`池中 s 数量的许可。

```
static class Worker implements Runnable {

    final Semaphore semaphore;

    public Worker(Semaphore semaphore) {
        this.semaphore = semaphore;
    }

    @Override
    public void run() {
        try {
            semaphore.acquire();
            try {
                //do stuff
            } finally {
                semaphore.release();
            }
        } catch (InterruptedException ex) {
            Thread.currentThread().interrupt();
        }
    }
}

public static void main(String[] args) {

    final int numThreads = 10;
    final ExecutorService executorService = Executors.newFixedThreadPool(10);
    final Semaphore semaphore;
    boolean myflag = true;
    if (myflag) {
        semaphore = new Semaphore(1);
    } else {
        semaphore = new Semaphore(numThreads);
    }
    final Worker worker = new Worker(semaphore);
    executorService.submit(worker);
} 
```

这个例子有点做作，因为`newSingleThreadExecutor()`当您一次只需要运行一个任务时，您可以只使用 a - 但我假设您知道这一点并且由于某种原因不能。

**编辑**

看了看这是否可以整理一下，我遇到了[这个](https://stackoverflow.com/questions/15148785/java-unlimited-semaphore)。这暗示了一个更整洁的解决方案：

```
static interface TaskBlocker {

    void acquire();

    void release();
}

static class Worker implements Runnable {

    final TaskBlocker taskBlocker;

    public Worker(TaskBlocker taskBlocker) {
        this.taskBlocker = taskBlocker;
    }

    @Override
    public void run() {
        taskBlocker.acquire();
        try {
            //do stuff
        } finally {
            taskBlocker.release();
        }
    }
}

public static void main(String[] args) {

    final int numThreads = 10;
    final ExecutorService executorService = Executors.newFixedThreadPool(numThreads);
    final TaskBlocker taskBlocker;
    boolean myflag = true;
    if (myflag) {
        taskBlocker = new TaskBlocker() {
            final Lock lock = new ReentrantLock();

            @Override
            public void acquire() {
                lock.lock();
            }

            @Override
            public void release() {
                lock.unlock();
            }
        };
    } else {
        taskBlocker = new TaskBlocker() {
            @Override
            public void acquire() {
            }

            @Override
            public void release() {
            }
        };
    }
    final Worker worker = new Worker(taskBlocker);
    executorService.submit(worker);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T16:54:32.290

简而言之，你没有。执行程序不应该以这种方式使用。如果您想手动管理线程，请在没有 Executors 的情况下进行。如果您使用 Executors，请将您的想法从`Thread`s 转移到`Runnable`s。使用同步或`java.util.concurrent`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-21T19:49:25.427

> 如何检查线程 ExecutorService 池中是否正在运行线程？

如果您只想知道线程是否在特定的 中运行`ExecutorService`，您可以`ExecutorService`使用特定创建`ThreadFactory`并让它附加一些特殊属性到线程，例如特殊名称。

```
private static final String EXECUTOR_THREADNAME_PREFIX = "ExecutorThread";

ThreadFactory threadFactory = new ThreadFactory() {

    private final AtomicInteger id = new AtomicInteger(0);

    @Override
    public Thread newThread(Runnable r) {
        Thread thread = new Thread(r);
        thread.setName(EXECUTOR_THREADNAME_PREFIX + "_" + id.incrementAndGet());
        return thread;
    }
};

myExecutor = Executors.newCachedThreadPool(threadFactory); 
```

然后，在线程中，您只需检查名称是否以您的前缀开头：

```
if (Thread.currentThread().getName().startsWith(EXECUTOR_THREADNAME_PREFIX)) {
    // In executor.
} else {
    // Not in executor.
} 
```

# python - nonzero(a)、where(a) 和 argwhere(a) 之间的区别。什么时候用哪个？

> ID：15976697
> 
> 赞同：43
> 
> 时间：2013-04-12T16:42:50.287
> 
> 标签：python, numpy

在 Numpy 中[`nonzero(a)`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html#numpy.nonzero)，[`where(a)`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)和[`argwhere(a)`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argwhere.html)是`a`一个 numpy 数组，似乎都返回了数组的非零索引。这三个调用有什么区别？

*   在`argwhere`文档上说：

    > `np.argwhere(a)`是一样的`np.transpose(np.nonzero(a))`。

    为什么有一个只转换输出的整个函数`nonzero`？什么时候它会如此有用以至于它值得一个单独的功能？

*   `where(a)`和 和有什么区别`nonzero(a)`？他们不会返回完全相同的结果吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T16:58:38.547

`nonzero`并且`argwhere`两者都为您提供有关元素在数组中的位置的信息`True`。 `where`工作方式与您发布的表单相同`nonzero`，但它有第二种形式：

```
np.where(mask,a,b) 
```

可以粗略地将其视为条件表达式的 numpy“ufunc”版本：

```
a[i] if mask[i] else b[i] 
```

（适当广播`a`和`b`）。

就*两者* `nonzero`而言`argwhere`，它们在概念上是不同的。 `nonzero`被构造为返回一个可用于索引的对象。如果 0 是稀疏的，这可能比创建整个布尔掩码更轻：

```
mask = a == 0  # entire array of bools
mask = np.nonzero(a) 
```

现在您可以使用该掩码来索引其他数组等。但是，实际上，从概念上确定哪些索引对应于 0 元素并不是很好。这就是`argwhere`进来的地方。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-12T16:54:11.790

我无法评论拥有一个单独的便利函数来转换另一个结果的有用性，但我可以评论`where`vs `nonzero`。在它最简单的用例中，`where`确实与`nonzero`.

```
>>> np.where(np.array([[0,4],[4,0]]))
(array([0, 1]), array([1, 0]))
>>> np.nonzero(np.array([[0,4],[4,0]]))
(array([0, 1]), array([1, 0])) 
```

或者

```
>>> a = np.array([[1, 2],[3, 4]])
>>> np.where(a == 3)
(array([1, 0]),)
>>> np.nonzero(a == 3)
(array([1, 0]),) 
```

`where``nonzero`与您希望从数组中选择元素（`a`如果某个条件是）`True`和从数组中选择元素的`b`情况不同`False`。

```
>>> a = np.array([[6, 4],[0, -3]])
>>> b = np.array([[100, 200], [300, 400]])
>>> np.where(a > 0, a, b)
array([[6, 4], [300, 400]]) 
```

同样，我无法解释为什么他们将`nonzero`功能添加到`where`，但这至少解释了两者的不同之处。

**编辑**：修正了第一个例子......我的逻辑以前不正确

# linux - MongoDB 进程每天都在关闭。如何在服务器中永远运行 mongod？

> ID：15976700
> 
> 赞同：5
> 
> 时间：2013-04-12T16:42:59.930
> 
> 标签：linux, mongodb, hostmonster

我是 MongoDB 的初学者，我在服务器中执行此操作时遇到问题。

我的项目托管在 hostmonster.com 的服务器上，但他们不给我对 MongoDB 数据库的支持，尽管他们说我可以在我自己的责任下安装它。

然后，我将 MongoDB 2.4.1 毫无问题地安装到 Linux 64 中，之后，在 MongoDB bin 文件夹中（包含：mongo、mongod、mongodump ...）我创建了一个名为“data”和“data/db”的文件夹来做一些事情测试。

从控制台，我通过 SSH 协议连接到服务器并运行

```
./mongod --dbpath 'data/db' 
```

它有效。

但是，我需要它永远自动运行。

我按照[Mongodb can't start](https://stackoverflow.com/questions/4405834/mongodb-cant-start)的步骤运行下一行：

```
./mongod --fork --dbpath 'data/db' --smallfiles --logpath 'data/mongodb.log' --logappend 
```

它也起作用了，它启动了这个过程，我关闭了控制台，这个过程继续运行，我可以在我的域中查看我的数据。

问题是该过程需要一天时间才能关闭，即我无法跨域查看我的数据，然后，我需要再次运行 mongod。和：

```
./mongod --fork --dbpath 'data/db' --smallfiles --logpath 'data/mongodb.log' --logappend 
```

我不想每天都这样做，我的问题是：

可能是什么问题？为什么 mongod 进程每天都死掉？

我怎样才能永远运行这个过程？

对不起我的英语不好。

编辑：添加最后一个错误日志。我不明白。

```
Fri Apr 12 03:19:34.577 [TTLMonitor] query local.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:0 keyUpdates:0 locks(micros) r:141663 nreturned:0 reslen:20 141ms
Fri Apr 12 03:19:34.789 [TTLMonitor] query users.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:3 keyUpdates:0 locks(micros) r:211595 nreturned:0 reslen:20 211ms
Fri Apr 12 03:20:57.869 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took: 18215ms
Fri Apr 12 03:20:57.931 [PeriodicTask::Runner] task: WriteBackManager::cleaner took: 8ms
Fri Apr 12 03:22:14.155 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took: 32ms
Fri Apr 12 03:22:14.215 [PeriodicTask::Runner] task: WriteBackManager::cleaner took: 14ms
Fri Apr 12 03:22:30.670 [TTLMonitor] query actarium.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:2 keyUpdates:0 locks(micros) r:430204 nreturned:0 reslen:20 430ms
Fri Apr 12 03:23:14.825 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took: 7ms
Fri Apr 12 03:23:31.133 [TTLMonitor] query actarium.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:2 keyUpdates:0 locks(micros) r:179175 nreturned:0 reslen:20 168ms
Fri Apr 12 03:25:19.201 [PeriodicTask::Runner] task: WriteBackManager::cleaner took: 505ms
Fri Apr 12 03:25:23.370 [TTLMonitor] query local.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:0 keyUpdates:0 locks(micros) r:3604735 nreturned:0 reslen:20 3604ms
Fri Apr 12 03:25:25.294 [TTLMonitor] query users.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:3 keyUpdates:0 numYields: 1 locks(micros) r:3479328 nreturned:0 reslen:20 1882ms
Fri Apr 12 03:26:26.647 [TTLMonitor] query actarium.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:2 keyUpdates:0 numYields: 1 locks(micros) r:1764712 nreturned:0 reslen:20 1044ms
Fri Apr 12 04:09:27.804 [TTLMonitor] query actarium.system.indexes query: { expireAfterSeconds: { $exists: true } } ntoreturn:0 ntoskip:0 nscanned:2 keyUpdates:0 locks(micros) r:200919 nreturned:0 reslen:20 200ms
Fri Apr 12 04:43:54.002 got signal 15 (Terminated), will terminate after current cmd ends
Fri Apr 12 04:43:54.151 [interruptThread] now exiting
Fri Apr 12 04:43:54.151 dbexit: 
Fri Apr 12 04:43:54.157 [interruptThread] shutdown: going to close listening sockets...
Fri Apr 12 04:43:54.160 [interruptThread] closing listening socket: 9
Fri Apr 12 04:43:54.160 [interruptThread] closing listening socket: 10
Fri Apr 12 04:43:54.160 [interruptThread] closing listening socket: 11
Fri Apr 12 04:43:54.160 [interruptThread] removing socket file: /tmp/mongodb-27017.sock
Fri Apr 12 04:43:54.160 [interruptThread] shutdown: going to flush diaglog...
Fri Apr 12 04:43:54.160 [interruptThread] shutdown: going to close sockets...
Fri Apr 12 04:43:54.176 [interruptThread] shutdown: waiting for fs preallocator...
Fri Apr 12 04:43:54.176 [interruptThread] shutdown: lock for final commit...
Fri Apr 12 04:43:54.176 [interruptThread] shutdown: final commit...
Fri Apr 12 04:43:54.176 [interruptThread] shutdown: closing all files...
Fri Apr 12 04:43:54.212 [interruptThread] closeAllFiles() finished
Fri Apr 12 04:43:54.220 [interruptThread] journalCleanup...
Fri Apr 12 04:43:54.246 [interruptThread] removeJournalFiles
Fri Apr 12 04:43:54.280 [interruptThread] error removing journal files 
boost::filesystem::directory_iterator::construct: No such file or directory: "/home2/anuncio3/bin/mongodb-linux-x86_64-2.4.1/bin/data/db/journal"
Fri Apr 12 04:43:54.280 [interruptThread] error couldn't remove journal file during shutdown boost::filesystem::directory_iterator::construct: No such file or directory: "/home2/anuncio3/bin/mongodb-linux-x86_64-2.4.1/bin/data/db/journal"
Fri Apr 12 04:43:54.285 shutdown failed with exception
Fri Apr 12 04:43:54.285 dbexit: really exiting now 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:42:20.500

你的答案在这里：

```
Fri Apr 12 04:43:54.002 got signal 15 (Terminated), will terminate after current cmd ends
Fri Apr 12 04:43:54.151 [interruptThread] now exiting 
```

您的进程正在接收信号 15，这是默认的终止信号。他们的系统可能会自动终止长时间运行的进程或类似的东西。如果确实发生了这种情况，那么您的主机将不得不解决这个问题。

此外，这些错误：

```
Fri Apr 12 04:43:54.280 [interruptThread] error removing journal files 
boost::filesystem::directory_iterator::construct: No such file or directory: "/home2/anuncio3/bin/mongodb-linux-x86_64-2.4.1/bin/data/db/journal"
Fri Apr 12 04:43:54.280 [interruptThread] error couldn't remove journal file during shutdown boost::filesystem::directory_iterator::construct: No such file or directory: "/home2/anuncio3/bin/mongodb-linux-x86_64-2.4.1/bin/data/db/journal" 
```

表明您的安装数据目录有问题。日志文件要么不存在，要么正在丢失；如果系统上的某个进程正在尝试清理内容，那么如果有什么东西正在破坏您的日志文件，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T07:34:24.293

我知道这是个老问题，但我的经验可能对其他评论者有帮助。根据我的测试，他们只让你在杀死它之前运行一个程序 5 分钟（有时超过这个时间），所以安装 MongoDB 是相当无用的，除非你有一个专用的 IP。

# mocking - 如何测试模拟 PHPUnit 方法的特定参数

> ID：15976706
> 
> 赞同：1
> 
> 时间：2013-04-12T16:43:17.827
> 
> 标签：mocking, arguments, phpunit

我的方法有 3 个参数，但我只想测试 arg3，arg1 和 arg2 没关系：

```
$observer = $this->getMock('SomeObserverClass', array('myMethod'));
$observer->expects($this->once())
         ->method('myMethod')
         ->with(null, null, $this->equalTo($arg3)); 
```

将它们设置为 null 或 !$this->empty() 不起作用。

方法签名：

```
public function myMethod(Integer $arg1, String $arg2, String $arg3) {...} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:10:44.753

您可以使用`anything`匹配器。尝试：

```
$observer->expects($this->once())
     ->method('myMethod')
     ->with($this->anything(), $this->anything(), $this->equalTo($arg3)); 
```

# php - 如何在 php 中向 url 添加信息？

> ID：15976707
> 
> 赞同：0
> 
> 时间：2013-04-12T16:43:25.617
> 
> 标签：php, post, get

我有一个 html 网站和一个页面，我有按钮可以将访问者带到 dj 的个人资料。

每个按钮将访问者带到不同的 dj 个人资料。我在 html 中创建了一个页面，该页面转到 XML 文档以获取 dj 的信息。所以，我的问题是，我如何在 php 页面的链接处添加 dj 的名称，这样他就可以保留个人链接？

我尝试了获取属性，但我也需要发布帖子，以便 PHP 获取该 dj 的信息。

djspace.html 页面的 html 有这个：

```
<form name="form" id="form" method="post"  action="allProfiles.php">
  <input type="submit" name="dj_name" value="Blowdrop"/> 
</form>
...
<form name="form" id="form" method="post"  action="allProfiles.php">
  <input type="submit" name="dj_name" value="Psychokiller"/> 
</form> 
```

然后是我的 allprofiles.php 页面：

```
<?php
  $counter = 0;
  $dj_name = ($_POST['dj_name']);
  $xml = simplexml_load_file("Profiles.xml");

  foreach ($xml as $newprofile){
    if($xml->newprofile[$counter]->Anome == $dj_name){
      $Anome           = $xml->newprofile[$counter]->Anome;
      $nacionalidade   = $xml->newprofile[$counter]->nacionalidade;
      $naturalidade    = $xml->newprofile[$counter]->naturalidade;
      $residencia      = $xml->newprofile[$counter]->residencia;
      $emprego         = $xml->newprofile[$counter]->emprego;
      $generos         = $xml->newprofile[$counter]->generos;
      $disponibilidade = $xml->newprofile[$counter]->disponibilidade;
      $partilha        = $xml->newprofile[$counter]->partilha;
      $sitios          = $xml->newprofile[$counter]->sitios;
      $tempo           = $xml->newprofile[$counter]->tempo;
      $editora         = $xml->newprofile[$counter]->editora;
      $promotora       = $xml->newprofile[$counter]->promotora;
      $influencias     = $xml->newprofile[$counter]->influencias;
      $fblink          = $xml->newprofile[$counter]->fb;
      $scloud          = $xml->newprofile[$counter]->scloud;
      $mail            = $xml->newprofile[$counter]->email;
      $img             = $xml->newprofile[$counter]->foto;
    }
  $counter = $counter + 1;
}

?> 
```

我可以获取所有信息，但如果我申请获取，我不能。

显然，如果您直接进入 php 页面，您将得不到任何信息。 [http://roundhillevents.com/allProfiles.php](http://roundhillevents.com/allProfiles.php)

但是进入这个链接，然后，dj's，dj space，然后点击你想查看信息的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:49:53.000

正如@Marc B 建议的那样，使用链接而不是带有按钮的表单。

如果您出于某种原因想继续使用按钮，请更改`method="post"`为`method="get"`. 然后浏览器为您添加对页面 URL 的 dj 引用。

当然，您需要在 PHP 代码中使用`$_GET['dj_name'])`而不是。`$_POST['dj_name']`这适用于两种情况，带有`GET`方法和链接的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:49:36.830

这是因为您在 php 中使用 $_POST。尝试使用 $_REQUEST 或 $_GET 全局变量而不是 $_POST

**尝试这个**

```
<?php
$counter = 0;
$dj_name = ($_REQUEST['dj_name']);
$xml = simplexml_load_file("Profiles.xml");
foreach ($xml as $newprofile){
if($xml->newprofile[$counter]->Anome == $dj_name){
$Anome = $xml->newprofile[$counter]->Anome;
$nacionalidade = $xml->newprofile[$counter]->nacionalidade;
$naturalidade = $xml->newprofile[$counter]->naturalidade;
$residencia = $xml->newprofile[$counter]->residencia;
$emprego = $xml->newprofile[$counter]->emprego;
$generos = $xml->newprofile[$counter]->generos;
$disponibilidade = $xml->newprofile[$counter]->disponibilidade;
$partilha = $xml->newprofile[$counter]->partilha;
$sitios = $xml->newprofile[$counter]->sitios;
$tempo = $xml->newprofile[$counter]->tempo;
$editora = $xml->newprofile[$counter]->editora;
$promotora = $xml->newprofile[$counter]->promotora;
$influencias = $xml->newprofile[$counter]->influencias;
$fblink = $xml->newprofile[$counter]->fb;
$scloud = $xml->newprofile[$counter]->scloud;
$mail = $xml->newprofile[$counter]->email;
$img = $xml->newprofile[$counter]->foto;
}
$counter = $counter + 1;
}
?> 
```

# css - 带有悬在边缘的按钮（img）的引导模式

> ID：15976709
> 
> 赞同：1
> 
> 时间：2013-04-12T16:43:27.970
> 
> 标签：css, gwt, twitter-bootstrap, modal-dialog, gwt-bootstrap

我正在尝试在模态框的角落“挂”一个关闭按钮，如下所示：http: [//i.imgur.com/3rminEM.png](http://i.imgur.com/3rminEM.png)

我试过给角落图像 display:inline;float:right; 和一些相对定位，但在模态的内部区域之外没有任何显示（有时模态会在滚动时获得一个滚动条来显示图像）。我也尝试增加 z-index，但无济于事。

有没有办法做到这一点？也许是模态本身的背景图像？替代模态？我正在将 GWT 与 gwt-bootstrap 一起使用，所以希望有一些仅限 css 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:09:06.550

这是模态标题的 HTML 标记

```
<div class="modal-header">
    <button type="button" class="close mynewclassclose" data-dismiss="modal" aria-hidden="true">
       <img src="http://expediaholiday.d.seven2.net/_images/modal_close.png"/>
    </button>
    <h3 id="myModalLabel">Modal Heading</h3>    
</div>/ 
```

我添加了一些新类`.mynewclassclose`，只是为了覆盖此按钮的默认 Twitter Bootstrap 设置。我添加了关闭按钮的图像。（你可以使用背景图片代替这个，没关系。但在这种情况下，你必须在 CSS 中定义宽度和高度）。

这是CSS

```
.modal-header {
    position: relative;
}

.mynewclassclose {
    position: absolute;
    margin: 0;
    top: -23px; /* half height of "X" image, just for nice placing*/
    right: -23px; /* half width of "X" image, just for nice placing*/
    opacity: 0.9;
}

.mynewclassclose:hover {
    opacity: 1;
} 
```

这是工作演示：http: [//jsfiddle.net/Aqydb/1/](http://jsfiddle.net/Aqydb/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:48:02.133

你说你已经尝试过内联和相对定位。你试过绝对定位吗？顶部：0；右：0；如果您尝试过，您介意发布一些代码或工作示例，它将帮助您更快地获得和回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T15:59:26.343

下面的 CSS 行可以解决问题：

```
.modal-body { overflow-y: visible !important; } 
```

或者，您可能需要最小高度：

```
.modal-body { min-height: 350px; overflow-y: visible !important; } 
```

# requirejs - 如何使 Backbone-Relational (0.8.5) 与 RequireJS 一起工作？

> ID：15976713
> 
> 赞同：7
> 
> 时间：2013-04-12T16:43:44.340
> 
> 标签：requirejs, backbone-relational

经过长时间的研究，某事出现了:-) 问题似乎与“getObjectByName”函数有关。它不能很好地与 requireJS(ADM) 一起工作。目前，我必须设置一个全局变量来解决这个问题。我相信一定有更好的解决方案。

这是我的临时解决方案：

（1）设置一个全局变量并将搜索模型范围设置为全局（“APP”）

```
var APP = {};

define(['backbone-relational'], function(){
    Backbone.Relational.store.addModelScope(APP);
}) 
```

(2) 将您的关系模型导出到全局

```
APP.YourRelationalModel = YourRelationModel; 
```

它有效，但不是很好......我真的很期待一个更好的答案。谢谢。

//------------

测试版本：

```
1.Backbone-Relational 0.8.5 
2.Backbone 1.0.0 and Underscore 1.4.4
3.JQuery 1.8.3
4.RequireJS 2.1.5 
```

代码很简单：（或见[https://github.com/bighammer/test_relational_amd.git](https://github.com/bighammer/test_relational_amd.git)）

```
require.config({

paths : {

    js                    : 'js',
    jquery                : 'js/jquery-1.8.3',
    underscore            : 'js/underscore',
    backbone              : 'js/backbone',
    'backbone-relational' : 'js/backbone-relational'
},

shim : {
    underscore : {
        exports : '_'
    },
    backbone   : {
        deps    : ['underscore', 'jquery'],
        exports : 'Backbone'
    },

    'backbone-relational' : {
        deps: ['backbone']
    }
} 
```

});

```
define(['backbone', 'backbone-relational'], function (Backbone) {

var Child = Backbone.RelationalModel.extend();
var Parent = Backbone.RelationalModel.extend({
    relations : [
        {
            key          : 'child',
            type         : Backbone.HasOne,
            relatedModel : 'Child'
        }
    ]

});

var test = new Parent(); 
```

});

将上述代码保存在 main.js 中并包含在 index.html 中，如下所示：

它不起作用。有警告信息：

```
Relation=child: missing model, key or relatedModel (function (){ return parent.apply(this, arguments); }, "child", undefined). 
```

我阅读了骨干关系的源代码，知道命名空间有问题。Relational-Backbone 找不到“Parent”中定义的relatedModel（即找不到releatedMode:“Child”）。由于我对javascript的了解有限，我未能找到解决此问题的解决方案:-)

谁能帮我这个？

在我提出问题之前，我研究了以下解决方案：

[Backbone.RelationalModel using requireJs](https://stackoverflow.com/questions/11224858/backbone-relationalmodel-using-requirejs)
[Can't get Backbone-relational to work with AMD (RequireJS)](https://stackoverflow.com/questions/11955309/cant-get-backbone-relational-to-work-with-amd-requirejs?rq=1)
[Loading Backbone.Relational using Use！插入](https://stackoverflow.com/questions/10659454/loading-backbone-relational-using-use-plugin?rq=1)

他们都没有在这种情况下工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T21:02:12.780

您不必通过字符串引用relatedModel，您可以直接引用它，所以不要`relatedModel: 'Child'`使用，只需使用：`relatedModel: Child`。

而且由于您使用的是 requireJS，因此您可以轻松地从其他文件中引用模型。

```
define(['backbone', 'models/child', 'backbone-relational'], function (Backbone, Child) {
  var Parent = Backbone.RelationalModel.extend({
    relations : [{
        key          : 'child',
        type         : Backbone.HasOne,
        relatedModel : Child
    }]
  });

  var test = new Parent();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T03:49:53.980

上述解决方案不适用于我。我逐渐将代码从 Rails 资产管道（不是 RequireJS/AMD/CommonJS/anything）移到 Webpack 中，从依赖项开始。当我`backbone-relational`通过我的模型将需求转移到 Webpack 包准备中并且关系定义仍在 Rails 资产管道中时，我开始得到很多无法解释的东西`Relation=child: missing model, key or relatedModel (function (){ return parent.apply(this, arguments); }, "child", undefined).`

就*我*而言，解决方案最终非常简单，尽管我花了很长时间才发现：

```
// In a Webpack module, later included into Rails Asset Pipeline
// temporarily to facilitate migration

require('expose?Backbone!backbone') // Exposing just for migration
require('backbone-relational')
Backbone.Relational.store.addModelScope(window) 
```

`backbone-relational`默认情况下，使用其全局范围来解析基于字符串的`relatedModel`s，但由于它不需要*真正的*全局范围，因此解决方案只是将其传递给 using `addModelScope`，以便它可以在该范围内搜索指定的模型。

# java - 您如何使用 intellij idea 编辑器分析 java 源代码？

> ID：15976718
> 
> 赞同：83
> 
> 时间：2013-04-12T16:43:57.900
> 
> 标签：java, intellij-idea, profiler

我知道 Netbeans 有一些“集成的”分析器，例如，您可以运行单元测试并使用它来分析并找出导致它们变慢的原因以及瓶颈所在。是否可以在 IntelliJ IDEA 编辑器中分析代码？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-18T20:26:18.060

[您可以通过插件](http://plugins.jetbrains.com/plugin/?idea&pluginId=7115)尝试免费的 VisualVM 分析器集成。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-03-28T14:04:46.267

正如 Stephen Murby 所指出的“你的测试在 VisualVM 启动之前完成的问题”。

是的，这个[VisualVMLauncher 插件在](https://github.com/krasa/VisualVMLauncher)VisualVM 启动之前不会暂停您的测试用例。您可能还需要时间手动更改特定于测试的分析设置。解决方案很简单，您的测试用例必须停止并等待，直到您手动告诉它继续。有几种方法可以做到：

1) 把 System.in.read(); 作为测试用例的第一行并且 VisualVM 准备就绪，在控制台按 enter。

```
System.in.read(); 
```

2）如果测试用例运行器没有为您提供控制台，请等待创建一些魔术文件。

3）你总是可以轻松地使用 sleep()

```
sleep(5 seconds); 
```

这种解决方法不是很方便，但对我有用，因为需要偶尔进行分析。问题的根本原因在于 IDEA 和 VisualVM 的插件架构不被认为是协作的。请参阅[与插件作者的讨论](https://github.com/krasa/VisualVMLauncher/issues/10#issuecomment-32389688) 希望有所帮助。

# restlet - Restlet 2.1.RC1 + Java 1.7 作为 Netbeans 7.x 应用程序模块工作正常；升级到 Restlet 2.1.2 会出现运行时错误 (FEATURE_SECURE_PROCESSING)

> ID：15976721
> 
> 赞同：0
> 
> 时间：2013-04-12T16:44:03.043
> 
> 标签：restlet

Restlet 2.1.RC1 工作正常，但升级到 2.1.2 给出：

```
 WARN - Unable to unmarshal the XML representation 
javax.xml.bind.JAXBException: Unable to create customized SAX source
 - with linked exception:
[javax.xml.parsers.ParserConfigurationException: FEATURE_SECURE_PROCESSING: Cannot set the feature to false when security manager is present.]
  at org.restlet.ext.jaxb.internal.Unmarshaller.unmarshal(Unmarshaller.java:201)
  at org.restlet.ext.jaxb.JaxbRepresentation.getObject(JaxbRepresentation.java:417)
  at org.restlet.ext.jaxb.JaxbConverter.toObject(JaxbConverter.java:172)
  at org.restlet.service.ConverterService.toObject(ConverterService.java:170)
  at org.restlet.resource.Resource.toObject(Resource.java:828)
  at org.restlet.engine.resource.ClientInvocationHandler.invoke(ClientInvocationHandler.java:240)
  at com.sun.proxy.$Proxy57.getServerInformation(Unknown Source) 
```

我承认不久前我发布了一个非常[相似的问题](https://stackoverflow.com/questions/14705003/restlet-client-on-java-1-7-xml-parse-error-feature-secure-processing-cannot-se)- 但在那一个问题上，我关注的问题是

Restlet 2.1.2 + **Java 1.6**作为 Netbeans 7.x 应用程序有效。

但是将 java 更改为 Java 1.7 会出现上述错误，所以我认为这个问题不是重复的，因为这里我关注的是 Restlet 2.1.RC1 ==> 2.1.2。

正如在其他问题中提到的，我怀疑[这种变化](https://github.com/restlet/restlet-framework-java/commit/ec692bd3b5e386261413210191b179fec22b6cd2#modules)是相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T01:03:44.870

最终的解决方法是 [https://stackoverflow.com/a/19230016/449347中描述的代码破解](https://stackoverflow.com/a/19230016/449347)

[请参阅https://github.com/restlet/restlet-framework-java/issues/785](https://github.com/restlet/restlet-framework-java/issues/785)提出的错误

# java - 跨浏览器缓存脚本文件

> ID：15976724
> 
> 赞同：0
> 
> 时间：2013-04-12T16:44:14.977
> 
> 标签：java, javascript, internet-explorer, caching, servlets

我希望将单个 javascript 文件缓存 1 小时并使用下面的代码来实现这一点。由于某种原因（可能是因为该 js 文件是异步加载的），当 js 文件在缓存中时，该 js 文件中的函数不会在 IE8 中执行。所以我想在除IE之外的所有浏览器中缓存js文件。我可以设置一个标头，使 js 文件不只为 IE 浏览器缓存吗？

```
try { 

       response.setHeader("Cache-Control", "max-age="+AIMConstants.CACHE_CONTROL_TIME_PERIOD); 

      } catch (Exception e) { 
       logger.info("Error in setting the cache control"); 
       e.printStackTrace(); 
      } 
```

注意：通过 getScript 调用在页面上多次加载 js 文件。因此，如果我只为 IE 应用条件逻辑，通过将变量附加到文件来获取该 js 文件，则该文件可能会被加载多次，这就是为什么我不在客户端添加随机变量来获取新副本的原因的 javascript 文件。我想使用标头指令解决此问题。也欢迎任何其他涉及 javascript 的解决方案。

更新：我添加了 Vary:* 以防止缓存 js 文件，当我这样做时，所有浏览器都会获取 js 文件的新副本。我只希望 IE 每次都检索 js 文件的新副本。所有其他浏览器都可以缓存 js 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:16:43.397

此代码每次仅适用于 IE 浏览器从服务器检索新副本。

```
var jsCache = true;
        if($.browser.msie){
            jsCache = false;
        }
            if(!initialized){

                $.getScript('thatjsfileurl', function() { 
                 $("#welcome").pluginInit({
                    start:'newPage'
                 });  
                 initialized = true;
                },jsCache);
            } 
```

# python - python构造知道所有目录和递归子目录的列表

> ID：15976726
> 
> 赞同：1
> 
> 时间：2013-04-12T16:44:18.473
> 
> 标签：python

是否有内置的python构造来知道给定目录的所有目录和递归子目录的列表？基本上我想运行一个脚本让我们在一个目录上说“dir.py”它应该列出所有目录和递归子目录...

C:\cwd> 目录.py

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:45:04.160

```
import os
os.walk('C:\\') 
```

你去吧。
但我们需要更深入......那好吧。

```
import os
for root, folders, files in os.walk('C:\\'):
    print 'In ' + root + ' There are ' + str(len(folders)) + ' folders and ' + str(len(files)) + '!' 
```

但是我不知道我在哪里..我很困惑..我..我..我不能没有时间吗？！时间是控制宇宙和我的思想的东西。

好吧好吧..如你所愿..

```
import os, time
from os.path import abspath
for root, folders, files in os.walk('C:\\'):
    for f in files:
        (mode, ino, dev, nlink, uid, gid, size, atime, mtime, ctime) = os.stat(abspath(root + '/' + f)
        print f + " was last modified: %s" % time.ctime(mtime) 
```

我们刚刚了解文件有多大吗？是的，我想我们做到了..哦，编程的奇迹；）

# php - Wordpress 中的多个背景包装器

> ID：15976727
> 
> 赞同：0
> 
> 时间：2013-04-12T16:44:19.813
> 
> 标签：php, css, wordpress, background

我怎样才能在 wordpress 中拥有 index.php、archive.php 和 single.php 的特定背景？

我尝试在每种情况下在特定 div 上使用 css 对象，但由于任何非 index.php 都从 index.php 继承主页，因此不起作用。

我也尝试了multiplebackground manager插件，但它改变了背景而不是包装，实际的背景图像到内容。

有什么办法可以做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:53:03.820

对于这些页面中的每一个，您都会在您的身体上获得一个特定的类，为什么不使用它（首先将 .home 放在首位，以防万一：P）。一个粗略的例子：

```
.home { background: red; }
.single { background: blue; }
.archive { background: green; } 
```

详细度编辑：

正如您所提到的，如果您在 CSS 中声明了此内容：

```
body { background:url(images/body.png); } 
```

..对于其他页面使用..

```
body.single { background:url(images/body-single.png); }
body.archive { background:url(images/body-archive.png); } 
```

.. 等等。

# css - KnockoutJS：如何为表格单元格着色（+淡出）

> ID：15976729
> 
> 赞同：0
> 
> 时间：2013-04-12T16:44:21.187
> 
> 标签：css, knockout.js

我发现了很棒的 KnockoutJS 库，但我坚持了一个我想实现的功能：

***解释***

我有一个包含 n 行的一类对象的数组：

html:

```
 <tbody data-bind="foreach: indexItems">
                    <tr data-bind="click: $parent.UpdateInterfaceItems, css: { 'active-row' :  $root.selecteditem() === $data }">
                        <td data-bind="text: param1"></td>
                        <td data-bind="text: param2"></td>
                        <td data-bind="text: param3"></td>
                    </tr>
                </tbody> 
```

Javascript：

```
 function ViewModel() {
            var self = this;

            //Public Properties
            self.selecteditem = ko.observable();
            self.indexMats = ko.observableArray();
                           ....

          hub.client.receivedNewValue= function (param1Value, param2Value, param3Value)
          {
            var match = ko.utils.arrayFirst(vm.indexItems(), function (item) {
                return item.param1() == param1Value;
            });

            if (match)
            {
                match.param1(param1Value);
                match.param2(param2Value);
                match.param3(param3Value);
            }
          }

       } 
```

***特征***

有时我想更新一行（仅在某些值上），**我想用一种会逐渐消失的颜色突出显示修改后的单元格**。有没有办法做到这一点？

我发现了一个非常相似的问题，但它不符合我的需要（[Knockout JS Update Color](https://stackoverflow.com/questions/10589681/knockout-js-update-color)）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:25:51.993

我很久以前写了一个绑定名称突出显示。认为这与您的需要相似。

```
ko.bindingHandlers.highlight = {
update: function(element, valueAccessor) {
    ko.toJS(valueAccessor());
    var old = parseInt($(element).html(),10);
    var current = parseInt(valueAccessor()(),10);        
    if ($(element).data("ko_init")) {
        if(current < old) {
            $(element).effect('highlight', {
                color: '#AA0000'
            }, 1000);
        } else if (current>old ) {
             $(element).effect('highlight', {
                color: '#00AA00'
            }, 1000);               
        }
    }
    else {
        $(element).data("ko_init", true);
    }
}};

function Table(rowCount, columnCount, headItems, initiliaze) {

var self = this;

var Cell = function(data, css, animate) {

    var cellInstance = this;

    this.data = ko.observable(data);
    this.css = ko.observable(css);
    this.animate = ko.observable(animate);

}

this.rowCount = ko.observable(rowCount);
this.columnCount = ko.observable(columnCount);
this.headItems = ko.observableArray(headItems);
this.rowsData = ko.observableArray();

if (initiliaze) {

    for (var i = 0; i < rowCount; i++) {
        var tmpArray = new Array();
        for (var j = 0; j < columnCount; j++)
        tmpArray.push(new Cell("0", "", ""));
        self.rowsData.push(ko.observableArray(tmpArray));
    }
}}

function ViewModel() {
    var self = this;

    this.table = new Table(5, 4, ["Name", "DT", "BID", "ASK"], true);

};

$(function() {

    var viewModel = new ViewModel();
    ko.applyBindings(viewModel);

    function changeData(x, y, data) {

        viewModel.table.rowsData()[x]()[y].data(data);

    }
    setInterval(function() {
        changeData(parseInt(Math.random(1000) * 5, 10), parseInt(Math.random(1000) * 4, 10), parseInt(Math.random(1000) * 10000, 10));

    }, 1000);
}) 
```

查看[jsfiddle 演示](http://jsfiddle.net/gurkavcu/XuFMQ/)

# python - 如何在 Django 中获取文件的扩展名？

> ID：15976732
> 
> 赞同：8
> 
> 时间：2013-04-12T16:44:24.183
> 
> 标签：python, django, file-upload

我正在 Django 中构建一个网络应用程序。我有一个将文件发送到views.py 的表单。

意见：

```
@login_required(login_url=login_url)
def addCancion(request):
    if request.method == 'POST':
        form2 = UploadSong(request.POST, request.FILES)
        if form2.is_valid():
            if(handle_uploaded_song(request.FILES['file'])):
                path = '%s' % (request.FILES['file'])
                ruta =  "http://domain.com/static/canciones/%s" % path
                usuario = Usuario.objects.get(pk=request.session['persona'])
                song = Cancion(autor=usuario, cancion=ruta)
                song.save()
                return HttpResponse(ruta)
            else:
                return HttpResponse("-3")
        else:
            return HttpResponse("-2")
    else:
        return HttpResponse("-1") 
```

我试图只上传 MP3 文件，但我不知道如何制作这个过滤器。我尝试了一个名为“ContentTypeRestrictedFileField(FileField):”的类并且不起作用。

如何获取views.py 中的文件类型？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-09T14:20:53.567

您还可以使用表单中的 clean() 方法来验证它。因此，您可以拒绝不是 mp3 的文件。像这样的东西：

```
class UploadSong(forms.Form):
    [...]

    def clean(self):
        cleaned_data = super(UploadSong, self).clean()
        file = cleaned_data.get('file')

        if file:
            filename = file.name
            print filename
            if filename.endswith('.mp3'):
                print 'File is a mp3'
            else:
                print 'File is NOT a mp3'
                raise forms.ValidationError("File is not a mp3\. Please upload only mp3 files")

        return file 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-14T19:24:47.120

与`import mimetypes, magic`：

```
mimetypes.MimeTypes().types_map_inv[1][
    magic.from_buffer(form.cleaned_data['file'].read(), mime=True)
][0] 
```

例如，为您提供“.pdf”的扩展名

[https://docs.djangoproject.com/en/dev/topics/forms/#processing-the-data-from-a-form](https://docs.djangoproject.com/en/dev/topics/forms/#processing-the-data-from-a-form)
[http://docs.python.org/2/library/mimetypes.html#mimetypes。 MimeTypes.types_map_inv](http://docs.python.org/2/library/mimetypes.html#mimetypes.MimeTypes.types_map_inv)
[https://github.com/ahupp/python-magic#usage](https://github.com/ahupp/python-magic#usage)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-28T18:19:18.997

获取直接请求：

```
import os

extesion = os.path.splitext(str(request.FILES['file_field']))[1] 
```

或在 db - 模型中获得扩展。

```
import os

file = FileModel.objects.get(pk=1)  # select your object
file_path = file.db_column.path  # db_column how you save name of file.

extension = os.path.splitext(file_path)[1] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T16:57:57.797

你是这个意思：

```
u_file = request.FILES['file']            
extension = u_file.split(".")[1].lower()

if(handle_uploaded_song(file)):
    path = '%s' % u_file
    ruta =  "http://example.com/static/canciones/%s" % path
    usuario = Usuario.objects.get(pk=request.session['persona'])
    song = Cancion(autor=usuario, cancion=ruta)
    song.save()
    return HttpResponse(content_type) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-15T04:18:13.077

您可以使用`request.FILES["file_field_name"].content_type`

```
my_file = request.FILES["file_field_name"]
if my_file.content_type != 'text/csv':
    print("Your file must be a CSV type") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-16T00:01:45.537

使用[FileType.py](https://github.com/h2non/filetype.py)库。

[示例](https://github.com/h2non/filetype.py/blob/master/examples/file.py)：

```
kind = filetype.guess('tests/fixtures/sample.jpg')
if kind is None:
    print('Cannot guess file type!')
    return

print('File extension: %s' % kind.extension)
print('File MIME type: %s' % kind.mime) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-03T09:53:04.280

使用`MimeTypes().guess_extension()`方法。检查下面的片段。

```
# guess the file extension
file_obj.seek(0)
mime = magic.from_buffer(file_obj.read(), mime=True)
extension = mimetypes.MimeTypes().guess_extension(mime)
>>> print extension
.jpeg 
```

# javascript - 带有回调和 Frame.js 的 JQuery Ajax

> ID：15976734
> 
> 赞同：1
> 
> 时间：2013-04-12T16:44:27.477
> 
> 标签：javascript, jquery, asynchronous

我需要按顺序执行几个 jquery Ajax 调用。我正在使用回调，所以每个调用都有一个成功函数来执行下一个 Ajax 调用，依此类推。那确实是一团糟且很难阅读的代码。在谷歌搜索后找到看起来很棒的 Frame.js，但是......我无法让它工作。

为了简化问题，我只是尝试调用第一个 Web 服务，我正在这样做：

文件：MyPage.aspx：

```
Frame(function (next) {
    this.request = { CodSeguro: 917766 };
        Emision_ConsultarSeguro(request, next, next);
        next();
    });
    Frame(function (next,ajaxResponse) 
    {
        alert(ajaxResponse);
    }); 
```

文件：WebServices.js：

```
function Emision_ConsultarSeguro(requestData, okFunction, failFunction) 
{
    runAjax("Emision/emision.asmx/Consultar", request, okFunction, failFunction);
} 
```

文件：Common.js

```
function runAjax(url, request, okFunction, failFunction) 
{
    var dto = "{'request':" + JSON.stringify(request) + "}";
    execAjax(url, dto, okFunction, failFunction);
} 
```

文件：Ajax.js

```
function execAjax(url, data, successFunction, errorFunction) 
{
    return $.ajax({
        type: "POST",
        url: GetUrl() + url,
        data: data,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(data) { 
            successFunction(data); 
        },
        error: function(XMLHttpRequest, textStatus, errorThrown {
            errorFunction(XMLHttpRequest, textStatus, errorThrown); 
        }
    });
} 
```

Ajax 调用已执行，但 ajaxResponse 始终未定义！！！请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:48:53.003

看起来在 WebServices.js 下，您应该用 requestData 替换您的请求参数。

```
function Emision_ConsultarSeguro(requestData, okFunction, failFunction) 
{
    runAjax("Emision/emision.asmx/Consultar", requestData, okFunction, failFunction);
} 
```

# spring-integration - 使用 SpEL @Value 获取有效负载或标头

> ID：15976737
> 
> 赞同：0
> 
> 时间：2013-04-12T16:44:40.950
> 
> 标签：spring-integration

我有一个测试类，我希望能够使用 @Value 来获取标头或有效负载。

我做了一些失败的 SWAG，现在我想知道这是否可能。

有没有办法编写一个可以让我获得配置文件之外的标头值的 SpEL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:19:07.523

正如 Mark 在 Spring 论坛上对相同问题的回答 - @Value 在加载上下文时评估一次，而消息有效负载和标头是运行时实体。

如果您解释您要做什么，我相信我们可以提供解决方案。

除了 Spring 论坛上的讨论之外，[这里有一个 Gist](https://gist.github.com/garyrussell/5375131)，它展示了如何在测试中添加通道拦截器。

# c# - 地图的每个区域都应该有自己的类吗？

> ID：15976738
> 
> 赞同：0
> 
> 时间：2013-04-12T16:44:46.580
> 
> 标签：c#, map, xna, 2.5d

**警告：**这里是 Xna Noobie。

我正在制作一个 2d、自上而下的 rpg，有点像口袋妖怪。在我的游戏中，除了主游戏类之外，还有一个玩家类和一个地图类。我是否应该为地图的每个区域设置单独的类（例如 Town.cs、Forest.cs、River.cs），如果是，它们是否应该从父类继承？或者我应该只有一个通用 MapRegion 类，并且地图的每个区域都只是 MapRegion 的一个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:09:19.690

该决定取决于不同地区是否需要不同的功能。如果唯一的区别是地形/障碍物/建筑物/那种东西，那么使用通用 MapRegion 类并将不同的地图存储在外部数据文件中以供每个 MapRegion 加载会更有意义。但是，如果这些区域在代码中的处理方式存在显着差异（这对于 Pokémon 风格的游戏可能不太可能），那么您将创建不同的子类。它基本上归结为它们是功能不同还是只是保存不同的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:14:45.500

我认为每个级别都有不同的课程并不好，但是您可以有一些需要不同课程的特殊级别。在大多数情况下，我会创建一个基类，如果我需要一个特殊的地图，我会创建一个子类。

一个基本的地图类将有一些更通用的成员：

1.  列表结构
2.  列出 NPCS
3.  背景纹理

等等....

# asp.net - System.DirectoryServices.AccountManagement.Principal.GetGroups 只为某些用户返回一个组“域用户”

> ID：15976746
> 
> 赞同：2
> 
> 时间：2013-04-12T16:45:26.677
> 
> 标签：asp.net, asp.net-mvc-3, active-directory, directoryservices, userprincipal

下面的代码几周前还在工作，但最近它停止获取许多用户帐户的组，我不知道发生了什么变化。代码没有改变。

该`.GetGroups()`方法只返回一个组，***域***上许多用户的域用户，但对于我的用户和其他几个用户，它确实返回了完整的组集合。

目标只是获取该用户所属的组列表。我对 Active Directory 结构了解不多。

```
using (var context = new PrincipalContext(ContextType.Domain, Environment.UserDomainName))
using (var user = UserPrincipal.FindByIdentity(context, Emply.Username))
    if (user != null)
    { 
        foreach (var gn in user.GetGroups())
        {
            groups += gn.Name + "|";
        }
    } 
```

# css - Safari在某个点以下忽略css max-width媒体查询

> ID：15976751
> 
> 赞同：15
> 
> 时间：2013-04-12T16:45:49.943
> 
> 标签：css, safari, media-queries

我正在优化响应式网站，而 Safari（桌面版和移动版）似乎完全忽略了低于某个点的媒体查询。我有如下代码：

```
@media screen and (max-width: 767px){
    /* Safari responds to css here */
}
@media screen and (max-width: 640px){
    /* css here is ignored by Safari */
} 
```

Firefox 和 Chrome 都做出了适当的响应。有没有人对正在发生的事情有任何想法？

您可以在此处查看该网站：http: [//kgillingham.webfactional.com](http://kgillingham.webfactional.com)。应该发生的事情（并且适用于 FF 和 Chrome）是当网站变得小于 640 像素时，滑块中的标题字体应该变得更小。

**编辑**：该站点现在已更新为在大小小于 640 像素时使用 javascript 添加一个类。该类总是使用较小的字体大小。这意味着它现在可以按预期工作，但我更愿意使用 CSS 媒体查询而不是 javascript，所以我仍然希望看到一个解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T21:34:22.790

原来我错过了一个波浪形的大括号，所以我有如下代码：

```
@media screen and (max-width: 767px){
    /* lots of css */
    .some_selector { padding: 20px; /*<---- missing squiggly brace*/
    /* more css */
}
@media screen and (max-width: 640px){
    /* lots more css */
} 
```

插入缺少的大括号导致 Safari 开始工作。其他浏览器并没有因该错误而窒息，这也是难以追踪的部分原因。

谢谢大家的帮助，我现在觉得很傻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:24:55.590

@media 规则与普通 css 规则的概念相同，最新的规则会覆盖第一个规则。但如果规则不同，它不会推翻它。

您可以通过键入来解决问题，此代码只会由 webkits 解释

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    /* put webkit CSS here*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T08:26:11.027

我也面临媒体查询的类似问题，查询在错误的断点处工作：[这个线程](https://www.sitepoint.com/community/t/media-queries-not-working-with-safari/33209/7)有一些东西可能会帮助其他人来到这里。去引用

**尝试放大/缩小到 0 即。正常分辨率。按`Command + 0`**

> 只是一个想法：你能在 Safari 中增加你的字体大小吗？尝试按 Command 0 以确保将其重置为默认字体大小。
> 
> 不，但你说的让我明白了！！！谢谢你们帮助我解决这个问题。问题是，我不是通过调整窗口大小，而是通过放大页面来测试媒体查询。
> 
> 所以，我的问题不是我想的那样。我应该将此作为新问题重新发布吗？在 FF 和 Chrome 中，当我放大网页时，上述代码中的媒体查询会启动，但在 Safari 中，它不会。我能做些什么来让 Safari 更像 FF 和 Chrome 吗？

# python - 使用嵌套循环使用 beautifulsoup 从 HTML 中获取所有表格

> ID：15976752
> 
> 赞同：0
> 
> 时间：2013-04-12T16:45:52.037
> 
> 标签：python, loops, web-scraping, beautifulsoup

我正在尝试使用嵌套循环从该站点获取所有表。我快到了，但仍然不确定几个具有相同类标识符的表的循环。我得到一个错误代码`line 26 : for s in soup.findALL ("table", { "class" : "boxScore"})`

> SyntaxError：无效的语法。

我的脚本：

```
import datetime
import urllib
from bs4 import BeautifulSoup
import urllib2

day = int(datetime.datetime.now().strftime("%d"))-1

month = datetime.datetime.now().strftime("%B")
year = datetime.datetime.now().strftime("%Y")
file_name = "/users/ripple/NHL.csv"
file = open(file_name,"w")
url = "http://www.tsn.ca/nhl/scores/?date=" + month + "/" + str(day) + "/" + year
print 'Grabbing from: ' + url + '...\n'
try:
        r = urllib2.urlopen(url)
except urllib2.URLError as e:
           r = e
if r.code in (200, 401):    
    #get the table data from the page
    data = urllib.urlopen(url).read()
    #send to beautiful soup
    soup = BeautifulSoup(data)
    print soup
    soup = soup.findALL ("table", { "class" : "boxScore"})
    for s in soup.findALL ("table", { "class" : "boxScore"})
        table = soup.find("table",{ "class" : "boxScore"})
        for tr in table.findAll('tr')[2:]:
            col = tr.findAll('td')
            team = col[0].get_text().encode('ascii','ignore').replace(" ","")
            firstp = col[1].get_text().encode('ascii','ignore').replace(" ","")
            secondp = col[2].get_text().encode('ascii','ignore').replace(" ","")
            thirdp = col[3].get_text().encode('ascii','ignore').replace(" ","")
            final = col[4].get_text().encode('ascii','ignore').replace(" ","")
            record = team + ',' + final + '\n'
            print record
            file.write(record)
else: 
    print str(i) + " NO GAMES"
file.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:53:06.480

Python 中的 for 循环以冒号 ':' 结尾。

另外：API 方法是 findAll() 而不是 findALL()。

# sharepoint - SharePoint 列表

> ID：15976757
> 
> 赞同：0
> 
> 时间：2013-04-12T16:46:17.897
> 
> 标签：sharepoint, sharepoint-2013

我对 SharePoint 完全陌生，我想做的是从指定站点获取指定列表中每个项目的列表作为数据集。我在哪里可以找到这方面的示例、书籍等？我的测试虚拟机是 Visual Studio 2010 下的 SharePoint 2013。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:52:49.607

见：[http ://social.technet.microsoft.com/forums/en-US/sharepointdevelopmentprevious/thread/2758e3f3-d603-4bb7-9733-25d34199cba3](http://social.technet.microsoft.com/forums/en-US/sharepointdevelopmentprevious/thread/2758e3f3-d603-4bb7-9733-25d34199cba3)

> SPListItemCollection 类表示列表项的集合（SPListItem 实例），由返回列表项的完整集合的 SPList 的 Items 属性或前面描述的 SPList 的 GetItems 方法返回。SPListItemCollection 公开了一个名为 GetDataTable 的方法。此方法返回一个 ADO.NET DataTable 对象，该对象与父 SharePoint 列表具有相同的架构，并且填充了 SPListItemCollection 实例的项目。您可以将该数据表添加到数据集中以供进一步使用

从列表中创建 DataTable 的函数：

```
private static DataTable ConvertSPListToDataTable(SPList oList)
{
    DataTable dt = new DataTable();
    try
    {
        dt = oList.Items.GetDataTable();
        foreach(DataColumn c in dt.Columns)
        c.ColumnName = System.Xml.XmlConvert.DecodeName(c.ColumnName);
        return (dt);
    }
    catch
    {
        return (dt);
    }
} 
```

# php - 如何显示来自搜索框或复选框的结果

> ID：15976759
> 
> 赞同：0
> 
> 时间：2013-04-12T16:46:26.423
> 
> 标签：php, javascript, dojo

我们有一个如下所示的搜索框，用户可以在其中输入一个值，例如 1234 ABC 街，单击“搜索”并显示结果。

```
<!--form1 -->

         <div id="inputBG">
       <form id="searchForm" class="search_field" method="get" action="">
            <input name="searchBox" id="searchBox" value="3440 Mark Drive" />
            <button type="button" onclick="searchMap()"><img src="Viewer/images/search.png" alt="Search" /></button>
          </form>
         </div> 
```

这很好用。

但是，如果用户希望显示多于一种类型的结果，则用户单击名为“高级搜索”的图标。发生这种情况时，将在新窗口中打开一个只有下面显示的复选框的表单。

```
<!--Form2 --->
          <div id="featuresDiv">
            <form id="featuresForm">
               <br/>
                <input type="checkbox" name="srcoptions" onClick="checkAll(this.form,this)" checked>Check/Uncheck All<br>
               <label><input type="checkbox" name="featType" checked value="Addresses">Addresses</label><br/>
               <label><input type="checkbox" name="featType" checked value="Voter Precincts">Voter Precincts</label><br/>
               <label><input type="checkbox" name="featType" checked value="Voter Precincts (Pending)">Voter Precincts (Pending)</label><br/>
               <label><input type="checkbox" name="featType" checked value="Voting Polls">Voting Polls</label><br/>
               <label><input type="checkbox" name="featType" checked value="Voting Polls (Pending)">Voting Polls (Pending)</label><br/>
               <label><input type="checkbox" name="featType" checked value="Zip Codes">Zip Codes</label><br/>
               <label><input type="checkbox" name="featType" checked value="Zoning Petitions">Zoning Petitions</label><br/>
               <button type="button" onclick="searchMap()"><img src="MapViewer/images/magnifying_glass.png" alt="Search" /></button>
             </form>
            </div> 
```

用户可以选择选中所有框或仅选中几个框。

当用户单击搜索时，应该显示这些复选框的结果。

在使用复选框选项并且选中多个框的情况下，搜索框在搜索中变得无关紧要。

我已经尝试了几件事，但到目前为止似乎没有任何效果。

当我使用复选框选项并检查多个选项时，我收到自定义消息“您的搜索未返回任何结果”

这是我们尝试过的 Javascript，它应该在搜索来自搜索框 (form1) 或复选框 (form2) 时显示。

然后我们有 php，它应该将所有搜索值（搜索框或复选框）抓取到逗号分隔的值中。

这已经让我们发疯了 3 多天了。

值得注意的是，搜索框的默认值为 3440 Mark Street。

我真的很难过。

任何帮助是极大的赞赏。

```
// Construct query
**$features = $_GET["featType"];**

$tsql = "SELECT *    FROM globes AS TBL
  WHERE KEY_TBL.RANK > 0
ORDER BY ListOrder, Name, TBL.RANK DESC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:34:56.620

有关 doGlobalSearch 中发生的事情以及 PHP 中如何处理数据的更多信息会有所帮助。顺便说一句，我猜在发送到 PHP 的数据的格式和预期的格式方面存在一些差异。在黑暗中彻底刺伤，你试过做`featureList = features.join()`吗？您确定需要引用各个值吗？

只是一个建议，但我会这样做：

*   将两种形式合二为一。
*   隐藏高级搜索 div 时，默认所有复选框未选中（或禁用它们）。
*   显示高级搜索 div 时检查（或启用）它们。
*   将 [] 添加到每个复选框名称的末尾，以便在提交表单时将（选中的）值作为数组传递给 PHP。

这样，PHP 将直接一起接收 searchData 和 featTypes（如果有的话），而您不必从 PHP 中的字符串中解析出 featTypes。然后你需要用 javascript 做的就是提交表单并处理响应。同样，这是不知道后端发生了什么或您对其拥有什么控制权的情况。

# php - SQL Select x-row from table2 if y.table1=y.table2 多个表

> ID：15976760
> 
> 赞同：0
> 
> 时间：2013-04-12T16:46:26.707
> 
> 标签：php, mysql, sql, select

我有 2 个不同的表：**categories**和**products**。每个表都有`category_id`列。为了在 时输出数组`SELECT-ing`，我使用的是`echo htmlentities`.

`category_id=categories`在产品category_id中选择产品名称和价格等字段的 SQL 语法是什么？（行标题相同 -> 名称（在产品上）和名称（在 cat 上）。

请记住，我首先要根据产品表中的标准选择产品，然后再`category_id`从 cat 中选择产品。表等于产品表中的 category_id 然后它将显示类别名称（在类别表中）

这是原始代码：

```
<?php
include('includes/global.php');

$sql = $db->query("SELECT name FROM ".DB_PREFIX."products WHERE active=1 AND closed=0 AND deleted=0 AND approved = 1 AND name LIKE '%".htmlentities($_GET["search"],  ENT_QUOTES)."%' LIMIT 20");

while($product_array = $db->fetch_array($sql)) {
    echo htmlentities($product_array["name"], ENT_QUOTES, $lang[codepage])."\n";
} 
```

这是我尝试过的：

```
$sql = $db->query("SELECT a.name,a.buy_price,c.name FROM ".DB_PREFIX."products a WHERE active=1 AND closed=0 AND deleted=0 AND approved = 1 AND name LIKE '% ".htmlentities($_GET["search"],  ENT_QUOTES)."%' INNER JOIN ".DB_PREFIX."categories c ON a.category_id = c.category_id LIMIT 20");

while($product_array = $db->fetch_array($sql)) {
    echo htmlentities($product_array["name"], ENT_QUOTES, $lang[codepage])." for ";
    echo htmlentities($product_array["buy_price"], ENT_QUOTES, $lang[codepage])." from category ";
    echo htmlentities($product_array[" * categoryname"], ENT_QUOTES, $lang[codepage])."\n";
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:19:13.120

我认为这是一个排序问题，整个表需要先构建。

```
SELECT a.name,a.buy_price,c.name FROM ".DB_PREFIX."products a 
INNER JOIN ".DB_PREFIX."categories c ON a.category_id = c.category_id 
WHERE active=1 AND closed=0 AND deleted=0 AND approved = 1 AND name LIKE '% ".htmlentities($_GET["search"],  ENT_QUOTES)."%' 
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:12:39.527

这是我得到的最终代码，在搜索时我没有得到任何输出（在相应的搜索框中）。我个人认为合并两个表中的数据存在问题。或者也许我这不是回显 htmlentities 的正确方法。

```
$sql = $db->query("SELECT a.name,c.name,a.buyout_price FROM ".DB_PREFIX."auctions a INNER JOIN ".DB_PREFIX."categories c ON a.category_id = c.category_id WHERE active=1 AND closed=0 AND deleted=0 AND approved = 1 AND a.name LIKE '% ".htmlentities($_GET["search"],  ENT_QUOTES)."%' LIMIT 20");

while($product_array = $db->fetch_array($sql)) {
    echo htmlentities($product_array["a.name"], ENT_QUOTES, $lang[codepage])." from category ";
    echo htmlentities($product_array["c.name"], ENT_QUOTES, $lang[codepage])." for ";
    echo htmlentities($product_array["a.buyout_price"], ENT_QUOTES, $lang[codepage])." EUR \n";} 
```

# javascript - 在 Smarty 2 模板中的 JavaScript 中不再需要 {ldelim} 和 {rdelim}

> ID：15976762
> 
> 赞同：0
> 
> 时间：2013-04-12T16:46:27.910
> 
> 标签：javascript, smarty, templating, error-logging, smarty2

我在 Smarty 2 模板文件中有以下 JavaScript 块。

代码与提供商提供给我的内容一字不差，但值得注意的是，我不得不添加许多Smarty 标记来替换 JavaScript`{ldelim}`和.`{rdelim}``{``}`

我需要输入`$log_id`，这不会改变，但是有没有办法让我编写这个更清洁的东西而不需要所有这些标签使代码看起来不那么可读？

我知道这个`{literal}`标签，但是打开和关闭这个标签可能会降低它的可读性。

```
<script type='text/javascript'>
    window.Muscula = {ldelim} settings:{ldelim}
        logId:"{$log_id}", suppressErrors: false, branding: 'none'
    {rdelim}};
    (function () {ldelim}
        var m = document.createElement('script'); m.type = 'text/javascript'; m.async = true;
        m.src = (window.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//musculahq.appspot.com/Muscula.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(m, s);
        window.Muscula.run=function(c){ldelim}eval(c);window.Muscula.run=function(){ldelim}{rdelim};{rdelim};
        window.Muscula.errors=[];window.onerror=function(){ldelim}window.Muscula.errors.push(arguments);
        return window.Muscula.settings.suppressErrors===undefined;{rdelim}
    {rdelim})();
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:53:09.933

在这种情况下，您可以更改 smarty 分隔符

[http://www.smarty.net/docsv2/en/language.escaping.tpl](http://www.smarty.net/docsv2/en/language.escaping.tpl)

```
<?php

$smarty->left_delimiter = '{{';
$smarty->right_delimiter = '}}';

$smarty->assign('log_id', 'something');

?> 
```

你的模板会变成：

**（注意变量 {{$variable}} 的双括号）**

```
<script type='text/javascript'>
    window.Muscula = { settings:{
        logId:"{{$log_id}}", suppressErrors: false, branding: 'none'
    } };
    (function () {
        var m = document.createElement('script'); m.type = 'text/javascript'; m.async = true;
        m.src = (window.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//musculahq.appspot.com/Muscula.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(m, s);
        window.Muscula.run=function(c){eval(c);window.Muscula.run=function(){};};
        window.Muscula.errors=[];window.onerror=function(){window.Muscula.errors.push(arguments);
        return window.Muscula.settings.suppressErrors===undefined;}
    })();
</script> 
```

# xslt-2.0 - 构造一个字母序列

> ID：15976764
> 
> 赞同：2
> 
> 时间：2013-04-12T16:46:31.337
> 
> 标签：xslt-2.0, xpath-3.0, xslt-3.0

这个 XPath 表达式：

```
for $n in 1 to 5 return $n 
```

退货

> 1 2 3 4 5

是否可以用字母字符做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:50:45.543

是的：

```
for $n in 65 to 70 return fn:codepoints-to-string($n) 
```

返回：

```
A
B
C
D
E 
```

至少在 ascii/iso-8859-1 中。

```
for $n in fn:string-to-codepoints('A') to fn:string-to-codepoints('E') 
    return fn:codepoints-to-string($n) 
```

应该在任何语言环境中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:04:01.557

**或者，在 XPath 3.0 (XSLT 3.0) 中：**

```
((32 to 127) ! codepoints-to-string(.))[matches(., '[A-Z]')] 
```

在这里，我们不知道想要的字符是否有相邻的字符代码（在许多实际情况下它们不会）。

**使用此 XPath 3.0 表达式的完整 XSLT 3.0 转换：**

```
<xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:sequence select=
  "((32 to 127) ! codepoints-to-string(.))[matches(., '[A-Z]')]
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对任何 XML 文档（未使用）应用此转换（我使用 Saxon-EE 9.4.0.6J）时，会产生所需的正确结果**：

```
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
```

**如果我们知道想要的结果字符具有所有相邻的字符代码，那么：**

```
(string-to-codepoints('A') to string-to-codepoints('Z')) ! codepoints-to-string(.) 
```

**说明**：

使用新的 XPath 3.0**[简单映射运算符`!`](http://www.w3.org/TR/xpath-30/#id-map-operator)**。

# wordpress - 在不同的位置创建文件

> ID：15976765
> 
> 赞同：1
> 
> 时间：2013-04-12T16:46:36.620
> 
> 标签：wordpress

我想用 wordpress 在常见 wordpress 帖子和页面的不同位置创建一个页面，如下所示：[http](http://example.com/sitemap.xml) ://example.com/sitemap.xml 但我想使用 WP Loop 和所有 wordpress 功能请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:57:16.370

您应该使用在文件开头调用“wp 函数”

```
header('Content-Type: text/html; charset: UTF-8');
require( '../../../../wp-load.php' ); 
```

其中 ../../ ... 是文件的路径，`wp-load.php`具体取决于您放置文件的位置。

在此之后，您可以按照自己喜欢的方式使用循环。

# javascript - 在 JavaScript 中结束事件驱动函数

> ID：15976771
> 
> 赞同：0
> 
> 时间：2013-04-12T16:46:59.997
> 
> 标签：javascript

我正在使用带有 HTML5 的 JavaScript。当用户点击一个按钮时，一个事件驱动的 JavaScript 函数就会启动。当用户再次单击该按钮时，该函数的另一个实例将启动。所以我有两个处理事件的相同函数的实例。但是我只希望新实例正在运行。如何结束第一个实例？

一个示例是具有以下代码的函数

```
Canvas.paper = Raphael(xOffset,yOffset,imageWidth,imageHeight);
masterBackground = Canvas.paper.rect(0,0,imageWidth,imageHeight);

window.onkeydown=function(e){
    // Event handler code
}

document.addEventListener('keydown', function(event) {
    // Event handler code
}

masterBackground.mousemove(function(e){
    // Event handler code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:54:26.757

有几种解决方案，其中一些依赖于库，但看起来“更好”：

例如，使用 jQuery：

```
<button>Click me</button>

<script>
  $('button').on('click', handleButtonClick);

  function handleButtonClick() {
    $(this).off('click', handleButtonClick); //disable click event
    //do various things you don't want duplicated
    $(this).on('click', handleButtonClick); //reattach handler
  }
</script> 
```

或者：

```
<button>Click me</button>

<script>
  $('button').once('click', handleButtonClick); //attach one-time handler

  function handleButtonClick() {
    //do various things you don't want duplicated
    $(this).once('click', handleButtonClick); //attach one-time handler
  }
</script> 
```

大多数库都支持类似的方法，如果您更愿意使用 vanilla JS，那当然也是可以的。“我不是”为此提供了一个很好的例子：[https ://stackoverflow.com/a/15976888/622129](https://stackoverflow.com/a/15976888/622129)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:02:26.590

如果你想确保一个函数只运行一次：

[基于 benny 示例的示例](http://jsfiddle.net/KHQ4y/1/)

```
function onlyOnce(proc){
    return function () {
        var result = proc.apply(this,arguments);
        proc = function () {};
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:56:04.640

```
var buttonView = document.getElementById('buttonView');

buttonView.handleEvent = function(event) {
    window.alert(this.id);
    //this.onclick = null;
};

buttonView.onclick = buttonView.handleEvent; 
```

试试看：http: **[//jsfiddle.net/KHQ4y/](http://jsfiddle.net/KHQ4y/)**

*编辑：我在您提供特定代码之前发布了此内容，但您明白了。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T16:54:36.530

似乎很明显正在发生一些异步和长时间运行的事情。

为了防止并发实例运行，只需使用一个在启动时设置的标志，以便其他实例无法启动。然后当当前一个完成时，重置标志以便另一个可以启动。

```
 // Immediately invoked function, makes a variable and returns the handler
 //    that uses the variable as a flag.
button.onclick = (function() {

    // local variable, only accessible to the returned handler
    var running = false;

    // This is your event handler.
    return function(e) {
        if (running === false) {
            running = true;

            // run your asynchronous operation

            // after it's complete,  set `running = false;`
        }
    };
})(); 
```

# ruby - Ruby HTTPClient：如何使用持久连接？

> ID：15976775
> 
> 赞同：5
> 
> 时间：2013-04-12T16:47:08.787
> 
> 标签：ruby, http, httpclient

如何将持久 HTTP 连接与 HTTPClient 一起使用？发送 HTTP 请求时是否只是设置 Keep Alive 的问题？文档说明支持持久连接，但没有告诉我们如何使用它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T17:04:57.713

它[在 Net::HTTP 中可用](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)

正如文档中所写，

> `Net::HTTP.start`立即创建与 HTTP 服务器的连接，该服务器在块期间保持打开状态。如果服务器指示它支持持久连接，则该连接将对块中的多个请求保持打开状态。

这意味着**您将在块中执行的所有请求都将使用相同的 HTTP 连接。**

文档中的示例

```
require 'net/http'

uri = URI('http://google.com/')

Net::HTTP.start(uri.host, uri.port) do |http|
  request = Net::HTTP::Get.new uri.request_uri

  response = http.request request # Net::HTTPResponse object
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T17:08:02.063

如 HttpClient[自述文件](https://github.com/nahi/httpclient)中所述：

> 你不必关心 HTTP/1.1 持久连接（httpclient 关心而不是你）

这通常意味着在服务器支持`HTTP 1.1`持久连接的情况下，`httpclient gem`将存储并重新使用它们（连接）以用于后续请求。在这种情况下，您不必担心。

# multithreading - 为什么工作线程从 CANCELED 过渡到 SCHEDULED 跳过 READY？(JavaFX2)

> ID：15976781
> 
> 赞同：3
> 
> 时间：2013-04-12T16:47:40.407
> 
> 标签：multithreading, javafx-2

**更新：我也发现其他线程的问题；他们进入 Scheduled 状态，但从未转换到 Running。为什么？**

我的程序有一个使用任务通过串行端口连接到设备的服务。换句话说，

```
public class ConnectService extends Service<String> {
   protected Task createTask() {
        return new ConnectTask();
    }

    class ConnectTask extends Task<ObservableList<String>> {
        @Override
        protected ObservableList<String> call() throws Exception {
            ...
            connect();
            ...
        }
    }
} 
```

如果先前连接到设备的调用挂起，那么我想取消任务/线程并在此尝试中重新开始。为此，

```
 if (connectService.getState() != Worker.State.READY) {
        connectService.cancel();
    }
    connectService.restart(); 
```

但是在调试器中，我发现如果状态是 SCHEDULED，那么上面的代码会将其发送到 CANCELLED。但是 restart() 不会将其发送到 READY - 相反它会返回 SCHEDULED - 并且**call() 不会被执行！**

这似乎与[此处的文档相矛盾](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Worker.State.html)

> 可重用的 Worker 将从 CANCELLED、SUCCEEDED 或 FAILED 转换回 READY。

我试过

```
 if (connectService.getState() != Worker.State.READY) {
        connectService.cancel();
        connectService.reset();
    }
    connectService.start(); 
```

现在状态回到 READY，但 call() 永远不会执行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T16:58:39.227

您需要添加`Worker.State.SCHEDULED`到您的条件中排除的`if`状态，即

```
if (connectService.getState() != Worker.State.READY && 
    connectService.getState() != Worker.State.SCHEDULED) {

    connectService.cancel();
}
connectService.restart(); 
```

这是因为在进入状态之前**总是**`Worker`会从 过渡到。从[文档](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Worker.State.html)**`READY``SCHEDULED``RUNNING`**

 **> 然而，即使在`Worker`立即执行的情况下， 也会在进入状态之前 `Worker`暂时进入状态。也就是说，转换总是从到 到（当然，除非 Worker 被取消）。`SCHEDULED``RUNNING``READY``SCHEDULED``RUNNING`

如果由于某种原因您的工作卡在该`SCHEDULED`状态，很可能`cancel`和`restart`只是将其返回到相同的卡住状态。

此外，（没有看到你的其余代码，所以这只是推断）当你捕捉到它运行时中断它的想法，假设它挂起似乎不稳定，因为它可能运行良好但花费的时间比预期的要长，或者每次调用它都可能挂起。如果没有可以运行的测试`connectService`来确定它是否挂起，那么我想你会遇到这样的事情，但感觉有问题。**

# windows-phone-7 - 如何使用 blend 4 突出显示文本框中的文本

> ID：15976782
> 
> 赞同：1
> 
> 时间：2013-04-12T16:47:50.657
> 
> 标签：windows-phone-7, expression-blend-4

我正在学习混合我自己，我遇到了一个愚蠢的问题，我不知道如何解决这个问题我正在混合创建一个登录页面，我想首先在文本框上做两件事**我想要更改文本框中的文本颜色，** 其次我想创建与 twitter 登录中使用的文本框完全相同的文本框（意味着**我想在我的 tetx 框中突出显示“用户名或电子邮件”**），我完全坚持这个问题如何解决这个问题......请原谅我这个愚蠢的问题

# javascript - orientationchange 和 resize 事件的问题 - 在所有移动浏览器中都不能正常工作

> ID：15976786
> 
> 赞同：0
> 
> 时间：2013-04-12T16:47:57.727
> 
> 标签：javascript, android, html, web-applications, mobile

我试图判断移动网站上的屏幕尺寸何时发生变化。问题是每个浏览器都以不同的方式实现这一点。我以为我可以检查orientationchange支持并使用它，但回退到resize事件，但这会导致以下问题：

*   **在 Dolphin HD 中，orientationchange 为我提供了前一个**方向的宽度

例如，纵向是 384，横向是 589。如果我从纵向旋转到横向，它会将方向更改报告为 384 的 window.innerWidth，这是纵向的。如果我然后旋转到纵向，它会报告 589，这是横向的宽度！

*   如果我使用 resize 事件，它会被调用 3 次！

这发生在 Chrome、Firefox 中。所以可能是安卓的问题。它在第三次调用时确实以正确的宽度结束，但在此之前它是不同的宽度，因此它会导致我的代码多次调整大小。这不是很敏感。

解决办法是什么？

# php - 网站的 Javascript/php 版本

> ID：15976788
> 
> 赞同：0
> 
> 时间：2013-04-12T16:48:01.377
> 
> 标签：php, javascript

我无法让我的网站在 JS 和*没有*JS 的情况下都能正常运行。

我有两个独立版本工作得很好。现在，我有一个相册。在 Javascript 版本中，有一个[FancyBox](http://fancyapps.com/fancybox/)。相册中有所有照片的概览，单击图像将在 FancyBox 中打开该图像。在体面的浏览器中，url 甚至会随着`ID`图像的变化而变化，因此您可以轻松地共享图像。当使用图像调用 Javascript 版本时，FancyBox 会自动加载。

问题在于`non JS version`. 在这里，我们对相册中的所有图像都有相同的概述，但链接不同。为了解决这个问题，我使用以下脚本：

`<noscript><!-- all the images here --></noscript>`

对于非 JS 版本，以及

`<div class='jsonly'><!-- all the images here --></div>`和

`<noscript><style>.jsonly{display:none;}</style></noscript>`

现在的**问题是，我宁愿不要在 php-version 的背景中使用整个 js-version，因为这是一个相当大的问题，并且还需要两个额外的查询**。为了尝试规避这些麻烦，如果启用了 JS，我使用 JS 设置了一个 cookie，这样我就可以在 PHP 中将其过滤掉。然而，这个问题是，当用户启用了 JS 并且突然不再启用时，它仍然会显示 JS 版本，因为 cookie 仍然存在。

此类问题的常见解决方案是什么？我应该把它全部放在后台，还是忽略某些人可能需要按下按钮才能返回 JS 版本的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:50:22.867

你把逻辑倒过来了。如果您希望某些内容仅在启用 JS 时可见，那么您默认隐藏该内容，然后使用 JS 显示它。

```
<div class="jsonly">...</div>

<style>
   .jsonly {
       display: none; /* hide by default */
   }
</style>
<script>
    $('.jsonly').show(); // will only work if jquery/JS is available.
</script> 
```

# c - 如何计算 pthread 矩阵乘法程序的运行时间？

> ID：15976790
> 
> 赞同：3
> 
> 时间：2013-04-12T16:48:25.430
> 
> 标签：c, time, matrix, pthreads, matrix-multiplication

我创建了一个矩阵乘法程序，一个是串行的，一个是使用 pthreads 的。我需要比较他们的运行时间。我的序列代码需要大约 16 秒来计算 1000x1000 矩阵乘法，我使用秒表检查它，它应该是正确的。另一方面，当我运行我的 pthreads 矩阵乘法程序时，我会在 22-23 秒左右打印结果，但结果打印在终端上的速度要快得多。我还用秒表检查了输出运行时间所需的时间，大约是 6 秒，但它打印出大约需要 23 秒。我想还有其他方法可以检查 pthread 程序的运行时间。您可以在下面找到我的 pthreads 代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <pthread.h>
#include <assert.h>

int SIZE, NTHREADS;
int **A, **B, **C;

void init()
{
    int i, j;

    A = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        A[i] = malloc(SIZE * sizeof(int));

    B = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        B[i] = malloc(SIZE * sizeof(int));

    C = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        C[i] = malloc(SIZE * sizeof(int));

    srand(time(NULL));

    for(i = 0; i < SIZE; i++) {
        for(j = 0; j < SIZE; j++) {
            A[i][j] = rand()%100;
            B[i][j] = rand()%100;
        }
    }
}

void mm(int tid)
{
    int i, j, k;
    int start = tid * SIZE/NTHREADS;
    int end = (tid+1) * (SIZE/NTHREADS) - 1;

    for(i = start; i <= end; i++) {
        for(j = 0; j < SIZE; j++) {
            C[i][j] = 0;
            for(k = 0; k < SIZE; k++) {
                C[i][j] += A[i][k] * B[k][j];
            }
        }
    }
}

void *worker(void *arg)
{
    int tid = (int)arg;
    mm(tid);
}

int main(int argc, char* argv[])
{
    pthread_t* threads;
    int rc, i;

    if(argc != 3)
    {
        printf("Usage: %s <size_of_square_matrix> <number_of_threads>\n", argv[0]);
        exit(1);
    }

    SIZE = atoi(argv[1]);
    NTHREADS = atoi(argv[2]);
    init();
    threads = (pthread_t*)malloc(NTHREADS * sizeof(pthread_t));

    clock_t begin, end;
    double time_spent;

    begin = clock();

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_create(&threads[i], NULL, worker, (void *)i);
        assert(rc == 0);
    }

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_join(threads[i], NULL);
        assert(rc == 0);
    } 

    end = clock();

    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    for(i = 0; i < SIZE; i++)
        free((void *)A[i]);
    free((void *)A);

    for(i = 0; i < SIZE; i++)
        free((void *)B[i]);
    free((void *)B);

    for(i = 0; i < SIZE; i++)
        free((void *)C[i]);
    free((void *)C);

    free(threads);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:03:22.400

这是你如何获得已经过去的 CPU 时间，而不是如何获得已经过去的挂钟时间。为此，您将希望使用`time`（仅具有第二个粒度）或`clock_gettime`与`CLOCK_MONOTONIC`选项一起使用，这将是首选。为此，您需要链接 POSIX 实时扩展 (-lrt)。

```
struct timespec begin, end;
double elapsed;

clock_gettime(CLOCK_MONOTONIC, &begin);

// spawn threads to do work here

clock_gettime(CLOCK_MONOTONIC, &end);

elapsed = end.tv_sec - begin.tv_sec;
elapsed += (end.tv_nsec - begin.tv_nsec) / 1000000000.0; 
```

在您的示例中，我猜您使用了大约 4 个线程？然后，CPU 时间将是（CPU 1 中使用的时间 + CPU 2 中使用的时间 + CPU 3 中使用的时间 + CPU 4 中使用的时间），这应该是绝对时间的大约 4 倍（6 秒对 23 秒）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:04:49.650

我知道的最简单的方法是使用 OpenMP。与 -fopenmp 链接

```
#include <omp.h>

int main() {
    double dtime = omp_get_wtime(); //value in seconds
    //run some code
    dtime = omp_get_wtime() - dtime; 
```

}

请注意，1000x1000 矩阵乘法的 16 秒非常慢。我的代码在 4.3 GHz 的 i7-2600k 上在 0.03 秒内完成了 1056x1056，甚至还不到最大理论速度的 30%。

# django - django 和 dataTables - 加速查询和页面显示

> ID：15976795
> 
> 赞同：2
> 
> 时间：2013-04-12T16:48:44.003
> 
> 标签：django, datatables

我的应用程序中有一个页面，列出了我们所有的客户记录——总共大约一千条。查询很简单（实际上是两个查询），看起来像这样（一个用于商业，一个用于住宅）：

```
all_comm = System.objects.all().filter(isRessy=False)
all_ressy = System.objects.all().filter(isRessy=True) 
```

在我的模板中，我只是遍历两个查询，在表格中显示信息。此代码如下所示：

```
 <table style="width:100%;" class="field_container dt full-border">
    <thead>
      <tr>
        <th align=left width=200>Owner</th>
        <th align=center width=100>System ID</th>
        <th align=left>System Address</th>
        <th align=center width=200>Options</th>
      </tr>
    </thead>

    <tbody>

      {% for System in all_ressy %}
      <tr onclick="window.location.href='{% url cpm.systems.views.system_overview System.systemID %}'">
        <td>{{ System.billingContact.lastName }}, {{ System.billingContact.firstName }}</td>
        <td align=center>{{ System.pk }}</td>
        <td>{{ System.systemAddress }}, {{ System.systemCity }}</td>
        <td align=center>
          <a href="{% url cpm.work_orders.views.create_wo 'R' System.systemID %}?=next{% url cpm.systems.views.system_overview System.systemID %}">Create Service Call</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table> 
```

此代码与显示所有商业记录相同。如果你注意到我`dt`在表中列出了一个类。这将表格设置为`dataTable`表格。因此，行得到很好的突出显示，列可以排序，表格顶部有一个搜索框。都是好东西。

问题是整个页面的加载速度有点慢。加载时间的一半似乎是数据的原始显示（获取数据然后迭代生成基本`HTML`表的所有记录）。加载时间的后半部分（或至少有相当一部分时间）看起来专门用于将常规表转换为`dataTable`.

我想知道我是否可以做些什么来加快整个过程。我尝试过在 上使用分页，`dataTable`但这似乎没用，因为无论如何都加载了所有记录，只是隐藏在多个`dataTable`页面中。考虑到应用程序的性质，整个页面的真正分页实际上是不可能的。我觉得查询不会变得更快，所以必须进行优化或一些技巧来使这个页面加载得更快。

有什么想法吗？

谢谢您的帮助

***编辑***我指的是这个dataTable插件： [http ://datatables.net/index](http://datatables.net/index)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T16:55:13.890

您可以尝试使用 ajax 将数据直接加载到`DataTable`它会删除 HTML 呈现步骤。

[http://datatables.net/release-datatables/examples/ajax/objects.html](http://datatables.net/release-datatables/examples/ajax/objects.html)（我假设这是您正在谈论的数据表......）

# javascript - 将类添加到图像加载 - 确定是否横向

> ID：15976796
> 
> 赞同：1
> 
> 时间：2013-04-12T16:48:45.293
> 
> 标签：javascript, jquery, onload, addclass

在确定图像是横向还是纵向后，我正在尝试向图像添加一个类。我遇到的问题是该类被添加到这样的`img`标签`img.landscape`中，显然没有正确注册。我怎样才能正确地做到这一点：`<img class="landscape"`？

```
$(data.images).each(function(j, imageURL){
        var thumbnail = new Image();
        thumbnail.src = imageURL;
        thumbnail.onload = function() {
            $('.images').append('<div class="image_mask"><a href="' + imageURL + '"><img src="' + imageURL + '"/></a></div>');
            if (thumbnail.width > thumbnail.height){
                $(this).addClass('landscape');
            }
        };
}); 
```

我之前的解决方案是在附加字符串中添加一个带有类的 if/else 语句，但我想知道是否有更简洁的方法来解决这个问题。谢谢！

编辑 -

[http://jsfiddle.net/curly33/XeHzK/1/](http://jsfiddle.net/curly33/XeHzK/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:53:16.553

我假设您想将一个类添加到`<img>`您之前动态创建几行的标签中？如果是这样，您可以这样做：

```
$('.image_mask img').addClass('landscape'); 
```

由于它在一个循环中并且您将拥有多个`div.image_mask`，因此请使用数组索引`j`作为类限定符：

```
$(data.images).each(function(j, imageURL){
        ...
        thumbnail.onload = function() {
            $('.images').append('<div class="image_mask image_mask' + j + '"><a href="' + imageURL + '"><img src="' + imageURL + '"/></a></div>');
            //                                                     ^^^^^^
            if (thumbnail.width > thumbnail.height){
                $('.image_mask' + j + ' img').addClass('landscape');
                //              ^^^^^^
            }
        };
}); 
```

**更新**

尽管这被接受了，但像我最初建议的那样添加类名对我来说感觉很笨拙。更简洁的方法是结合使用`j`数组索引变量和 jQuery 的`eq`函数来定位相关的图像掩码：

```
$('.images .image_mask').eq(j).addClass('landscape'); 
```

..然后取消整个添加类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:56:50.263

把它放在你的弦乐建筑里

```
$(data.images).each(function(j, imageURL){
        var thumbnail = new Image();
        thumbnail.src = imageURL;
        thumbnail.onload = function() {
            var orientationClass = thumbnail.width > thumbnail.height ? "landscape" : "portrait";
            $('.images')
                .append(
                    '<div class="image_mask"><a href="' +
                    imageURL +
                    '"><img class="' +
                    orientationClass +
                    '" src="' +
                    imageURL +
                    '"/></a></div>'
                );
        };
}); 
```

**编辑：更多选项**

如果你想让它更详细但更简洁，你可以一个一个地构建元素：

```
var $img = $('<img />', {
    class: thumbnail.width > thumbnail.height ? "landscape" : "portrait",
    src: imageUrl
});

var $a = $('<a />', {
    href: imageUrl,
}).append($img);

var $div = $('<div />', {
    class: "image_mask"
}).append($a);

$('.images').append($div); 
```

或者，如果您想使用更有效的字符串构建，但它更具可读性/性能，您可以使用连接做一个数组：

```
var contents = [
    '<div class="image_mask"><a href="',
    imageURL ,
    '"><img class="',
    orientationClass,
    '" src="',
    imageURL,
    '"/></a></div>'];

$('.images').append(contents.join('')); 
```

# windows-7 - 批处理文件可在 Win erver 2003 上运行，但不能在 Windows 7 上运行

> ID：15976798
> 
> 赞同：0
> 
> 时间：2013-04-12T16:48:46.110
> 
> 标签：windows-7, batch-file, windows-server-2003

我有以下批处理脚本：

```
@echo off
FOR /F "delims=|" %%I IN ('DIR "*.*" /B /O:D') DO (SET %NewestFile=%%I)
echo %NewestFile% 
```

在`Windows 2003 Server`它按预期工作并输出最新文件

```
IntelMPFilesPath=C:\Programme\Intel\NGSMS\MPFiles
IntelMPFilesPath=C:\Programme\Intel\NGSMS\MPFiles
test.bat 
```

但是运行相同的批处理文件`Windows 7`会给出以下结果：

```
Die Umgebungsvariable "I" ist nicht definiert.
Die Umgebungsvariable "I" ist nicht definiert.
Die Umgebungsvariable "I" ist nicht definiert.
Die Umgebungsvariable "I" ist nicht definiert.
ECHO ist ausgeschaltet (OFF). 
```

有人知道 Win7 和 Srv2003 命令 shell 之间是否有那么大的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:54:03.200

我不知道为什么它在 Server 2003 中工作。你有一个额外的`%`.

您应该删除`%`in `SET %NewestFile`：

```
@echo off
FOR /F "delims=|" %%I IN ('DIR "*.*" /B /O:D') DO (SET NewestFile=%%I)
echo %NewestFile% 
```

# tfs - Team Foundation Services 在服务器上不可用

> ID：15976799
> 
> 赞同：1
> 
> 时间：2013-04-12T16:48:46.993
> 
> 标签：tfs

好的，我不想重新打开以前解决的案例，但我无法让它工作。我有两个端点监听来自 TFS 2010 事件服务的事件，一个使用 Web 服务 (ASMX) 构建，一个使用 WCF (SVC)。第一个工作正常。第二个导致 TFS 引发此错误

```
HistoryId          : 4643911
EndTime            : 4/12/2013 11:40:31 AM
ResultMessage      : There were errors or warnings during notification delivery.

                     0/0 emails delivered.
                     1/2 soap notifications delivered. 
                     1 errors.
                     0 warnings.

                     -------------------------------
                     Notification not delivered.

                     Notification: WorkItemChangedEvent (DeliveryType: Soap; Address: http://[removed]/[removed]/Services/TfsListener.svc)

                     Exception: Microsoft.TeamFoundation.TeamFoundationServiceUnavailableException: Team Foundation services are not available from server 
                     http://[removed]/[removed]/Services/TfsListener.svc.
                     Technical information (for administrator):
                       HTTP code 404: Not Found ---> System.Net.WebException: The remote server returned an error: (404) Not Found.
                        at System.Net.HttpWebRequest.GetResponse()
                        at Microsoft.TeamFoundation.Client.TeamFoundationClientProxyBase.AsyncWebRequest.ExecRequest(Object obj)
                        --- End of inner exception stack trace ---
                        at Microsoft.TeamFoundation.Client.TeamFoundationClientProxyBase.ProcessHttpResponse(HttpWebResponse response, Stream responseStream, WebException webException, 
                     XmlReader& xmlResponseReader)
                        at Microsoft.TeamFoundation.Client.TeamFoundationClientProxyBase.ExecWebServiceRequest(HttpWebRequest request, XmlWriter requestXml, String methodName, 
                     HttpWebResponse& response)
                        at Microsoft.TeamFoundation.JobService.Extensions.Core.TeamFoundationNotificationClient.Notify(String eventXml, String tfsIdentityXml, Subscription subscription)
                        at Microsoft.TeamFoundation.JobService.Extensions.Core.NotificationJobExtension.SendSoapNotification(TeamFoundationRequestContext requestContext, 
                     TeamFoundationNotification notification, TeamFoundationIdentityService identityService)

JobSource          : d9ee5b23-4aa4-4768-a7fb-4db33ab686d0
JobId              : a4804dcf-4bb6-4109-b61c-e59c2e8a9ff7
QueueTime          : 4/12/2013 11:40:29 AM
ExecutionStartTime : 4/12/2013 11:40:30 AM
AgentId            : 917eb9ee-2622-455c-a6e6-a1c96eeb1666
Result             : PartiallySucceeded 
```

我遵循了我能找到的所有建议，包括[TFS 2010 向 WCF 4.0 服务发送 SOAP 警报时出现 404 错误](https://stackoverflow.com/questions/4116851/404-error-when-tfs-2010-sends-soap-alert-to-a-wcf-4-0-service)和[http://www.ewaldhofman.nl/post/2010/08/02/How-to-use-WCF -to-subscribe-to-the-TFS-2010-Event-Service-rolling-up-hours.aspx](http://www.ewaldhofman.nl/post/2010/08/02/How-to-use-WCF-to-subscribe-to-the-TFS-2010-Event-Service-rolling-up-hours.aspx)。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:53:19.760

好的，搞定了。以下是一些网站缺少的内容：

```
<service behaviorConfiguration="EventServiceBehavior" name="FullSvcClassName">
   <endpoint address="" binding="wsHttpBinding" bindingConfiguration="EventServiceBinding"
             contract="FullSvcInterfaceName" />
</service> 
```

如果服务名称与您的完整类名（包括命名空间）不匹配，您将获得一个 basicHttpBinding 并且它不起作用。如果您在端点地址中放入任何内容，例如我认为应该提供的相对地址，它将被附加到 URI 的 and 并失败。

我使用 WcfTestClient.exe 和 Fiddler2 来追踪它。享受！

# javascript - JDE/朱利安时间：如何格式化朱利安时间戳编号

> ID：15976800
> 
> 赞同：0
> 
> 时间：2013-04-12T16:48:49.207
> 
> 标签：javascript, regex, jdedwards

在我的系统中，使用旧的 IBM julian 格式返回时间戳。

例如：
12 点 0 分 1 秒 AM（午夜后 1 秒）返回 01。12
点 22 分 15 秒 AM 返回 2215。1
点 22 分 15 秒 AM 返回 12215 .
7 点 45 分 1 秒 AM 返回 74501。
7 点 22 分 15 秒 PM 返回 192215。

我需要一个正则表达式将它们转换为以下格式：
12 点钟 0 分 1 秒 AM（午夜后 1 秒）：00:00.01
12 点钟 22 分 15 秒 AM：00:22.15
1点时钟 22 分 15 秒 AM：01:22.15
7 点 45 分 1 秒 AM：7:45.01
7 点 22 分 15 秒 PM：19:22.15

任何帮助表示赞赏。

**解决方案** 感谢 MikeM，这是解决方案：

```
//var time = '01';
//var time = '2215';
//var time = '12215';
//var time = '74501';
var time = '192215';

time = time.replace( /^(?:(?:(\d)?(\d))?(\d\d))?(\d\d)$/,
  function ( all, hr1, hr2, min, sec ) {
    return (hr1 || '0') + (hr2 || '0') + ':' + (min || '00') + '.' + sec;
  }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:47:38.220

以下适用于您的示例，但除此之外我还没有对其进行测试

```
//var time = '01';
//var time = '2215';
//var time = '12215';
//var time = '74501';
var time = '192215';

time = time.replace( /^(?:(?:(\d)?(\d))?(\d\d))?(\d\d)$/,
  function ( all, hr1, hr2, min, sec ) {
    return (hr1 || '0') + (hr2 || '0') + ':' + (min || '00') + '.' + sec;
  }
); 
```

虽说不给`07:45.01`，`7:45.01`以求相得益彰`01:22.15`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:57:18.897

我给你一个线索：

1.  将返回值转换为数字。
2.  num % 100 是秒。
3.  (num / 100) % 100 是分钟。
4.  (num / 10000) 是小时数。
5.  如果小时数少于 12，请使用 AM
6.  如果小时数为 12 或更多，则使用 PM，如果为 13 或更多，则减去 12。

另一种方法是将其视为字符串。但是，您必须添加足够多的前导零以达到长度 6，然后将其分解为 2 个字符位并将每个字符位转换为“int”，这比仅修改 100 和 100 和 10,000 的工作量要多得多。

这两位数部分中的值永远不应大于 59。

**笔记**

@radi8 注意到我遗漏了一些东西。我应该注意到，上述算法中的“/”（除法）必须是整数运算才能正常工作。一些编程语言提供整数运算。JavaScript 没有。

由于 JavaScript 使用浮点运算，他在除法之前减去秒数。然后类似的分钟数减法确定下一步。

您也可以`Math.floor()`在除法之后使用来完成相同的事情（因为这些是正数）。

这是为执行此操作而修改的 OP 代码：

```
$(function () {
    var val1 = 41215,hr=0,min=0,sec=0;
    sec = val1%100;
    val1 = Math.floor(val1 / 100);
    min = val1%100;
    hr = Math.floor(val1 / 100);
    // format the result. This example could show 1:1:1 instead of 01:01:01
    tst2 = hr.toString()+':'+min.toString()+'.'+sec.toString();
    alert(tst2.toString());
}); 
```

# javascript - 跨浏览器同步 CSS 和 JS 媒体查询

> ID：15976805
> 
> 赞同：5
> 
> 时间：2013-04-12T16:49:13.577
> 
> 标签：javascript, css, cross-browser, media-queries

在进行响应式设计时，我使用 CSS3 媒体查询，包括使用 respond.js 的旧浏览器。有时我还需要使用 JavaScript/jQuery 来操作页面上的某些元素。但是，当使用 $(window).width() 时，由于浏览器 chrome 和/或垂直滚动​​条的存在，该值通常与 CSS 媒体查询中使用的值不同，这意味着 CSS 媒体查询将在与 JS 媒体查询不同的断点。

我知道 Modernizr 通过使用 Modernizr.mq 缓解了这个问题，但这只适用于一开始就支持 CSS 媒体查询的浏览器，通常意味着它不适用于 IE8 及更低版本。如果您使用 polyfill 为这些旧浏览器添加媒体查询支持（例如，respond.js），那么 Modernizr.mq 由于两者之间的冲突/覆盖而不再工作。

我所做的是利用页面上的隐藏输入元素，并在每个媒体查询中为其赋予 CSS 宽度样式。然后，我有一个在页面上（以及调整大小）自动运行的函数，该函数获取该宽度值并执行以下操作：

```
 if (width == "320px" ) {
            //Functions
        }

        //481px to 600px
        else if (width == "481px" ) {
            //Functions
        }

        //601px to 768px
        else if (width == "601px" ) {
            //Functions
        }

        //769px to 960px
        else if (width == "769px" ) {
            //Functions
        }

        //769 to 1024px
        else if (width == "961px" ) {
            //Functions
        }

        //1024px+
        else {
            //Functions
        } 
```

这基本上迫使 JS 完全脱离 CSS 媒体查询，同步两者。这可以变得更加具体，而不是像我所拥有的那样通用，而是根据特定元素和随该元素更改的特定样式触发，这取决于各个项目的需求。

那么我的问题是，有没有更简单的方法可以做到这一点？我花了相当多的时间研究和试验这个，它似乎是迄今为止考虑到旧浏览器的最佳选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:29:31.367

PPK 在他的博客上列出了一种配对 CSS 和 JS 的好方法，这有点支持您的方法：

```
@media all and (max-width: 900px) {
// styles
}

if (document.documentElement.clientWidth < 900) {
   // scripts
} 
```

他的完整帖子在[这里](http://www.quirksmode.org/blog/archives/2010/08/combining_media.html)。

还有[enquire.js](http://wicky.nillia.ms/enquire.js/)插件。

# c# - 需要 C# 中的刮刮卡代码生成器解决方案吗？

> ID：15976816
> 
> 赞同：0
> 
> 时间：2013-04-12T16:50:08.067
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, data-structures

我正在 c# Vs 2010 中制作一个 SCRATCH 卡代码生成器程序。它生成可能的组合数量和唯一数字以及意味着数字不重复

例如：

5！= 120 个组合或可能的数字

2！= 2 个组合或可能的数字

我们可以同时给出整数值和字符串值，它会生成程序成功运行的可能组合..

您可以在 MAIN METHOD 字符串中设置新值 c = "abc";

例如：（您可以在此处更改值） string c = "abc"; 字符串 c = "1232abc";

整个代码在控制台 c# 中：-

```
static void Main(string[] args)
{
    Permute p = new Permute();
    // here u can change value in string 
    string c = "abc";
    char[] c2 = c.ToCharArray();
    p.setper(c2);
    Console.ReadKey();
}

class Permute
{
    int count = 0 ;
    private void swap (ref char a, ref char b)
    {
        char x;
        if(a==b)return;
        x = a;
        a = b;
        b = x;
    }

    public void setper(char[] list)
    {
        int x=list.Length-1;
        go(list,0,x);
    }

    private void go (char[] list, int k, int m)
    {
        int i;
        if (k == m)
        {
            Console.Write (list );
            count++;
            Console.WriteLine ("  "+ count  );
        }
        else
        for (i = k; i <= m; i++)
        {
            swap (ref list[k],ref list[i]);
            go (list, k+1, m);
            swap (ref list[k],ref list[i]);
        }
    } 
```

问题是我们无法在 WINDOWS FORM C# 中进行转换，当我们转换它时不会生成在 CONSOLE 程序中执行的唯一数字我们尝试在 WINDOWS FORM 中执行此操作 什么是我们无法检测到的问题

Windows form c# 的代码是（我们已经尝试过）：

```
// this is our Button 1 we have changed name to BtGenerate
// we have used LISTBOX to show the generated values 
// or u can say to show numbers in Listbox
private void BtGenerate_Click(object sender, EventArgs e)
{
    string abc = textBox1.Text;
    char[] c = abc.ToCharArray();
    Permutation p = new Permutation();
    string value = p.setper(c);

    // here is our listbox
    listBox1.Items.Add(value); 
}

// we have used the PERMUTATION Class here
// which is generating numbers
// this class is changed compared to console Permutation class
class Permutation
{
    public string Value;

    private void swap(ref char a, ref char b)
    {
        if (a == b) return;
        a ^= b;
        b ^= a;
        a ^= b;
    }

    public string setper(char[] list)
    {            
        int x = list.Length - 1;
        string ValueInString =  go(list, 0, x);
        return ValueInString;                      
    }

    int x = 0;
    private string go(char[] list, int k, int m)
    {
        int i;

        if (k == m)
        {               
            if(x == 0)
            {
                x++;
                for (int j = 0; j < list.Length; j++)
                {                   
                    Value = Value + list[j].ToString();
                }
                //this code is used which gives gap like arrow to seperate number
                //because we are not able to generate each number to new line

                Value = Value + @"<--" + x + " ";
            }
            if (x > 0)
            {
                x++;

                for (int j = 0; j < list.Length; j++)
                {
                    Value = Value + list[j].ToString();
                }

                Value = Value + @"<--"+ x + " ";
            }            
        }
        else
            for (i = k; i <= m; i++)
            {
                swap(ref list[k], ref list[i]);
                go(list, k + 1, m);
                swap(ref list[k], ref list[i]);
            }
        return Value;
    } 
```

为什么它没有像在控制台程序中那样生成唯一的数字？？？问题是什么？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:24:52.020

这里有很多问题，没有一个是你遇到的明确问题，但所有这些都使它更难看到。这看起来*更像*C++ 代码而不是 C# 代码。

在编写良好的代码中：

1.  你永远不需要经过`ref`。
2.  您不应该从类的函数中输出，特别是这样您就可以在不同类型的事物之间重用它。
3.  您应该使用`foreach`而不是`for`循环。
4.  变量和函数应该有描述性的名称来表明它们是什么，除非从上下文中很明显。
5.  `char[]`应该`string`在大多数情况下*（这种情况下可能是合法使用）*

对于实际的排列逻辑，请参阅[此问题](https://stackoverflow.com/q/5128615/298754)的答案- 唯一的变化是您将在`char`而不是`string`. 或者，请参阅从那里链接的此处[。](http://www.codeproject.com/Articles/37215/Permutations-in-C-Using-Recursion)

# smtp - 是否有类似 SMTP 代理的服务可以提取和存储附件并用链接替换它们？

> ID：15976820
> 
> 赞同：1
> 
> 时间：2013-04-12T16:50:20.060
> 
> 标签：smtp, email-attachments

假设我支持现有的软件即服务应用程序，它可以通过 SMTP 向用户发送电子邮件。电子邮件有时可能包含附件。附件通常是 Excel 格式的报告。

有时附件比接收邮件服务器允许的大，并且邮件被退回。

我正在设想一种服务，它将充当 SMTP 代理并位于我的应用程序和我的 SMTP 邮件服务之间。该服务将提取附件并将​​其存储在某个地方，可能是 Amazon S3，然后将电子邮件中的附件替换为一个唯一链接以下载附件。

有人知道这样的服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:39:57.230

您可以使用[MIMEDefang](http://www.mimedefang.org/) milter 作为 sendmail 或 postfix 的插件。

[http://www.roaringpenguin.com/products/mimedefang](http://www.roaringpenguin.com/products/mimedefang)

> MIMEDefang 可以检查和修改通过您的邮件中继的电子邮件。MIMEDefang 是用 Perl 编写的，它的过滤动作是用 Perl 来表达的，所以它非常灵活。以下是您可以使用 MIMEDefang 轻松完成的一些事情：
> [...]
> * 将大型附件替换为指向中央存储副本的链接，以减轻 POP3 用户使用慢速调制解调器链接的负担。

[http://www.mimedefang.org/](http://www.mimedefang.org/)

> MIMEDefang 是免费软件：它是根据 GNU 通用公共许可证的条款发布的。它在 Linux、FreeBSD、Solaris 和大多数其他 UNIX 或类 UNIX 系统下运行。

# c - 条件变量误解

> ID：15976828
> 
> 赞同：0
> 
> 时间：2013-04-12T16:50:25.590
> 
> 标签：c, multithreading, variables, pthreads, conditional-statements

假设我有一棵树，并假设我在树的每个节点中都有一个条件变量。

假设 5 个节点试图插入到我的树中（已经有 10 个节点），由于某种原因，5 个节点无法插入（它们正在等待删除某些节点），所以我让它们等待使用它们的条件变量. 现在树中正在发生删除，我想检查等待的那些是否正在等待删除，所以我想给一个节点发信号，我怎么知道要发信号的线程，我是否必须跟踪所有最初在插入中的条件变量？

假设在某个删除时，我想向正在等待的线程 3 发出信号（以及其他 2 个），我该如何具体地向线程 3 发出信号？，线程 3 是否还记得他试图插入的内容？

在我的删除函数中，当我发出信号时，我不知道该线程等待的条件变量是什么，因为每个节点都有一个条件变量，并且可以有多个节点，每个节点都有一个条件变量等待。我知道广播所有人都会联系所有线程，但是没有那个我怎么能做到，并且特别表示一个线程最初想在树中插入一个值 5，但是由于 5 已经存在，它不能，并且知道那个5被删除了，应该插入5，但是随着5的等待，还有1,6,3,2在等待，所以我有5个条件变量，不知道哪个是5的。

这一切都在 C 中，使用 linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:34:22.753

通常，您将条件变量与它用于等待的事物相关联。因此，如果线程 3 正在等待节点 X 被删除，它可能会等待节点 X 的条件变量上的信号。线程 3 不会等待它正在插入的节点的条件变量上的信号。如果线程 5 删除节点 X，那么它会在节点 X 的条件变量上发出信号。线程 5 不需要知道线程 3 正在等待；它只是在节点 X 的条件变量上发出信号，而 pthreads 管理通知正在等待该条件变量的线程的工作。

我有点担心您正在删除节点，并且可能会连同它们一起删除条件变量。如果您要删除节点 X，则在等待它的线程被唤醒并且不再使用该条件变量之前，您不希望删除它的条件变量。所以你的设计在那里不清楚。

# html5-canvas - 在画布上打印输入标签值

> ID：15976830
> 
> 赞同：0
> 
> 时间：2013-04-12T16:50:28.953
> 
> 标签：html5-canvas

我希望输入标签值在画布上绘制...以下代码不起作用。

```
 window.onload()=draw()
    draw(){
    var canvas=document.getElementById('canvas');
    var ctx=canvas.getContext('2d');

    var text=document.getElementById('item').value
    ctx.fillStyle="#3e3e3e";
    ctx.font="16px Arial";
    ctx.fillText(text,50,50);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:46:02.803

您可以“监听”任何按键事件并在画布上绘制文本

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/ug88R/](http://jsfiddle.net/m1erickson/ug88R/)

```
<!doctype html>
<html>
<head>

<script>
    function draw(event){
        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");
        var text=document.getElementById('item').value
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle="#3e3e3e";
        ctx.font="16px Arial";
        ctx.fillText(text,50,50);
    }

    window.addEventListener("keyup", draw, true);

</script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
    <input type="text" id="item">
</body>
</html> 
```

# excel - 具有多个公式的整行的 Excel 条件格式

> ID：15976834
> 
> 赞同：0
> 
> 时间：2013-04-12T16:50:45.967
> 
> 标签：excel, formula, rule, conditional-formatting

经过3个小时的搜索，我仍然没有找到答案，这就是我想要做的：

我试图用绿色填充其中包含 WBS 的任何行，用红色填充其中包含 ACT 的任何行和蓝色任何包含 EPR 的行。它适用于第一个公式，然后当我尝试添加第二个公式时，一切都搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:42:32.750

我尝试制作一个类似于 asim-ishaq 的函数来确定您的搜索词是否存在于该行中以获得乐趣 :) 然后尝试将其应用于突出显示行，结果我不知道如何很好地使用条件格式！最后想通了，希望我已经解释得足够好。

有了这个，您必须在数据末尾有（一个）额外的列来包含结果。

通过将函数放在条件格式中可能不需要额外的列，但是我无法让它工作（没有很努力地尝试）。这不是一个很大的损失，因为如果它在工作簿上编辑公式要简单得多，而不必通过每个条件规则来编辑它，如果您将来需要编辑它。

要使格式正常工作，您需要创建许多规则（每个关键字一个）

![3 个关键字的示例格式](https://i.stack.imgur.com/Kfgn8.png)

您想创建如下所示类型的规则，在公式框中您需要以下内容：包含下面函数结果的列`=INDIRECT("D" & ROW())=0`在哪里，并且是您突出显示的关键字的索引。`D``0`

在我的示例中，`D`列中的公式是：（`=SearchRow(An:Cn,"ABS","KBS","JBS")`其中 n 是公式所在的行）

根据需要设置格式，然后按确定，当您返回规则管理器时，您需要更新`Applies to`值，该值应该是一个涵盖您要突出显示的所有数据的范围。在我的例子中是`$A$1:$C$3`

![要添加的规则类型](https://i.stack.imgur.com/57rbc.png)

我下面的函数需要 2+ 个参数，第一个是要搜索的范围。第二个（以及任何后续的）是搜索词。

该函数将返回一个数字。-1 表示没有匹配项，0+ 表示找到的搜索词。数量取决于参数中的位置。

```
A1 = "ABS"
B1 = "SBA"

A2 = "SBA"
B2 = "ABS"

A3 = ""
B3 = ""

C1 = "=SearchRow(A1:B1, "ABS", "SBA")"
C2 = "=SearchRow(A2:B2, "ABS", "SBA")"
C3 = "=SearchRow(A3:B3, "ABS", "SBA")"

C1 > 0
C2 > 1
C3 > -1 
```

该函数将始终返回第一个结果，从左到右按顺序将每个单元格与关键字进行比较。使用我的示例，如果单元格包含“SBA ABS”，则结果将为 0（对于 ABS）。我猜你的单元格可能只包含一个关键字，所以这应该不是问题吗？

```
Public Function SearchRow(ByVal Row As Range, ParamArray Keyword() As Variant) As Integer
Dim Column As Integer
Dim Value As String
Dim Index As Integer
Dim Result As Integer
For Column = 1 To Row.Columns.Count
    Value = LCase(Row.Cells(1, Column))
    Result = -1
    For Index = LBound(Keyword) To UBound(Keyword)
        If InStr(1, Value, LCase(Keyword(Index))) > 0 Then
            Result = Index
            Exit For
        End If
    Next Index
    If Result > -1 Then
        Exit For
    End If
Next Column
SearchRow = Result
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:19:00.180

我所理解的是，您需要连续搜索关键字，如果在该行的任何单元格中找到它，然后对其进行着色。

也许我们可以使用条件格式来做到这一点，但我有另一个想法。我们可以在 Excel VBA 中创建一个简单的搜索功能。像这样的东西：

=search_row(A1:F1,"EPR")

如果在指定行的任何单元格中找到 EPR，该函数将返回 1。现在，如果您在数据列的末尾创建两个不同的列，首先使用 WPS 命名，然后使用 EPR 命名，并将此函数写入其中。喜欢

G1 =search_row(A1:F1,"WPS")

H1 =search_row(A1:F1,"EPR")

拖动它结束。现在对列进行排序。首先是 WPS 从高到低。然后在一次选择中为所有具有 1 的行着色。同样对 EPR (H1) 列执行相同操作。

要使用此功能，您可以从以下 URL 下载宏文件：

[http://asimishaq.com/myfiles/SearchHighlight.xlsm](http://asimishaq.com/myfiles/SearchHighlight.xlsm)

现在运行它首先启用宏，然后重新打开你的数据文件，然后打开这个宏文件。只要打开这个宏文件就可以使用这个功能。如果您想自己创建宏，以下是 VBA 代码：

```
Function search_row(sRow As Range, Keyword As String)
    Dim i As Integer
    Dim Found As Integer

    For i = 1 To sRow.Columns.Count
        If InStr(1, LCase(sRow.Cells(1, i)), LCase(Keyword)) > 0 Then
          search_row = 1
        End If
    Next
End Function 
```

# email - 在 CDO.Message 对象中修改附件的内容类型

> ID：15976836
> 
> 赞同：7
> 
> 时间：2013-04-12T16:50:58.287
> 
> 标签：email, vbscript, content-type, email-attachments, mhtml

当我尝试将 MHTML 文件作为附件添加到 VBScript 中的电子邮件时，它`ContentMediaType`被错误地设置为`"message/rfc822"`( [RFC 822](https://www.rfc-editor.org/rfc/rfc822) )。据我了解，这在 Microsoft 中是正确的，但根据[RFC 2557](https://www.rfc-editor.org/rfc/rfc2557)是不正确的，该 RFC 2557指出它应该是`"multipart/related"`. 这是一个问题，因为大多数（如果不是全部）邮件客户端都将其解释`"message/rfc822"`为电子邮件消息。由于文件扩展名`".mht"`与`".mhtml"`电子邮件消息的任何有效文件扩展名都不匹配，因此邮件客户端会将 、 等之一附加`".msg"`到`".eml"`文件名。当用户打开附件时，它会作为电子邮件打开并且无法正确显示，因为 MHTML 文件和电子邮件的保存方式不同。

```
Sub SendEmail(FromAddress, ToAddress, Subject, Body, Attachment)
  Call Err.Clear
  On Error Resume Next

  Schema = "http://schemas.microsoft.com/cdo/configuration/"
  Set Configuration = Sys.OleObject("CDO.Configuration")
  Configuration.Fields.Item(Schema + "sendusing") = 2
  Configuration.Fields.Item(Schema + "smtpserver") = SMTPServer
  Configuration.Fields.Item(Schema + "smtpserverport") = 25
  Configuration.Fields.Item(Schema + "smtpauthenticate") = 1
  ' Configuration.Fields.Item(schema + "sendusername") = ""
  ' Configuration.Fields.Item(schema + "sendpassword") = ""
  Call Configuration.Fields.Update

  Set Message = Sys.OleObject("CDO.Message")
  Set Message.Configuration = Configuration
  Message.From = FromAddress
  Message.To = ToAddress
  Message.Subject = Subject
  Message.HTMLBody = Body
  If Not IsEmpty(Attachment) Then
    'CDO.Message.AddAttachment doesn't set the correct content media type for an MHTML file.
    Call Message.AddAttachment(Attachment)
  End If

  Call Message.Send
End Sub 
```

当我运行此代码时，`Message.Attachments.Item(1).ContentMediaType`设置为`"message/rfc822"`. `"multipart/related"`如果`Attachment`（字符串）以`".mht"`或`".mhtml"`（不区分大小写）结尾，我需要它。我可以用下面的代码做到这一点。

```
If Len(Attachment) >= 4 And InStr(Len(Attachment) - 3, Attachment, ".mht", vbTextCompare) Or Len(Attachment) >= 4 And InStr(Len(Attachment) - 5, Attachment, ".mhtml", vbTextCompare) Then
  Message.Attachments.Item(1).ContentMediaType = "multipart/related"
End If 
```

出于某种未知原因，这取消了从`Message.Attachments`.

[我已经按照这些说明](http://msdn.microsoft.com/en-us/library/exchange/aa488360(v=exchg.65).aspx)查看了手动添加附件，但是当我调用时`Message.Attachments.Item(1).Fields.Update`，对象变得未定义。我认为设置附件的`ContentMediaType`，隐式调用它的`Fields`方法`Update`，我认为这是造成这种意外行为的原因。

如何解决此问题并发送具有`"multipart/related"`内容类型的 MHTML 文件，同时保持正确的文件扩展名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-27T12:37:59.733

所以您的问题是，如果附件的内容类型设置为`content-type="message/rfc822"`.

首先，值得注意的是，您对问题根本原因的分析存在缺陷。您似乎对`multipart/related`MIME 类型发挥作用的地方感到困惑。事实上，[RFC 2557 并未](https://www.rfc-editor.org/rfc/rfc2557)声明*与 MHTML 附件对应的正文部分*必须具有`content-type="multipart/related"`. 相反，MIME multipart/related 是 MHTML 文件本身的内部结构。引用维基百科[文章](http://en.wikipedia.org/wiki/MHTML)：

> 使用 MIME 类型 multipart/related 对 MHTML 文件的内容进行编码，就好像它是 HTML 电子邮件一样。

即，如果您使用文本编辑器打开 MHTML 文件，您应该会看到以下内容：

```
Content-Type: multipart/related; ... 
```

Microsoft 声明 MHTML 文件应`content-type="message/rfc822"`在[KB937912](http://support.microsoft.com/kb/937912)中提供。`AddAttachment`当您通过方法附加此类文件时，这正是 CDO 默认执行的操作。我相信这种行为不会以任何方式与 RFC 2557 相矛盾。根据 RFC：

> 有许多文档格式……指定由根资源和该根资源中的 URI 引用的许多不同的辅助资源组成的文档。显然需要能够在电子邮件 [SMTP]、[RFC822] 消息中发送此类多资源文档。

> 本文档中定义的标准详细说明了如何在 MIME 格式的 [MIME1 到 MIME5] 消息中聚合此类多资源文档，以实现此目的。

回顾一下，您绝对不应该将 MHTML 附件的内容类型设置为`multipart/related`.

虽然`message/rfc822`似乎是使用 MHTML 文件*的方式，但它显然会触发您在问题中描述的问题。*我使用 Outlook 2010 和 OWA 2010 进行了测试，并且能够重现它。

各种电子邮件客户端用于 MHTML 附件的替代内容类型是`application/octet-stream`和`application/x-mimearchive`. 这两个在我的测试中没有表现出问题。

# android - 在 InputMethodService 之外调用 InputMethodManager.setInputMethod(IBinder token, String id)。在哪里可以找到令牌？

> ID：15976837
> 
> 赞同：3
> 
> 时间：2013-04-12T16:51:01.930
> 
> 标签：android, android-input-method

我想通过单击按钮在我的 EditText 上显示 Google 语音输入 IME。所以，根据[这篇](http://android-developers.blogspot.ru/2011/12/add-voice-typing-to-your-ime.html)文章和[源代码](https://google-voice-typing-integration.googlecode.com/)我应该写这段代码

```
inputMethodManager.setInputMethodAndSubtype(IBinder token, String id, InputMethodSubtype subtype) 
```

问题是：在哪里可以找到合适的令牌。在源代码中我看到了这个

```
mInputMethodService.getWindow().getWindow().getAttributes().token 
```

它工作得很好，但是这段代码位于 InputMetodService 超类中，因此它可以访问 InputMethodService 实例。但我没有（不幸的是:)）。

如果您有任何建议，请告诉我。谢谢。

**不工作：** EditText.getWindowToken()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T10:35:42.160

由于安全原因，android 不允许应用程序更改 inputMethod 类型。您提到的文章是用于将谷歌输入法集成到自定义实现的输入法中，它不适用于应用程序。[你可以在这里](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html)查看 InputMethodManager 的文档

客户端应用程序可以要求系统让用户选择一个新的 IME，**但不能以编程方式切换到它自己**。**这避免了恶意应用程序将用户切换到他们自己的 IME**，当用户导航到另一个应用程序时，它仍然在运行。另一方面，允许 IME 以编程方式将系统切换到另一个 IME，因为它已经完全控制了用户输入。

您可以在 onClick 回调中提示用户切换到新的 IME，如下所示：

```
InputMethodManager imm = (InputMethodManager)
                getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showInputMethodPicker(); 
```

# antlr4 - 是 ANTLR4 EOF 错误还是我的错误

> ID：15976839
> 
> 赞同：1
> 
> 时间：2013-04-12T16:51:05.443
> 
> 标签：antlr4

这是我精简的 ANTLR4 语法（注意我使用常量 false 来替换返回 false 的方法）：

```
grammar AnnotProcessor;
    cppCompilationUnit:  content+ EOF;

    content: anything  
           | {false}? .; 

    anything: ANY_CHAR;

    ANY_CHAR: [_a-zA-Z0-9]; 
```

我的测试文件只包含 1 个单词**“hello”**，测试结果如下：

```
D:\work\antlr4\work>java org.antlr.v4.runtime.misc.TestRig AnnotProcessor cppCompilationUnit -tree in.cpp
line 1:5 no viable alternative at input '<EOF>'
(cppCompilationUnit (content (anything h)) (content (anything e)) (content (anything l)) (content (anything l)) (content (anything o)))

D:\work\antlr4\work>java org.antlr.v4.runtime.misc.TestRig AnnotProcessor cppCompilationUnit -tokens in.cpp
[@0,0:0='h',<1>,1:0]
[@1,1:1='e',<1>,1:1]
[@2,2:2='l',<1>,1:2]
[@3,3:3='l',<1>,1:3]
[@4,4:4='o',<1>,1:4]
[@5,5:4='<EOF>',<-1>,1:5]
line 1:5 no viable alternative at input '<EOF>' 
```

为什么当我添加一个语义谓词（虽然这里是一个虚拟的）作为替代时，它一直说“输入 '< EOF >' 的第 1:5 行没有可行的替代方案”？如果我删除带有错误语义谓词的替代项，则错误会按预期消失。

PS：我正在使用 antlr-4.0-complete.jar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:00:44.357

是的，这是一个错误。在 ANTLR 4 中，在语法中任何地方引入以 [almost] 开头的替代项`{false}?`不应影响任何 [valid] 输入的解析结果。

你能在这里报告这个问题吗：
[https ://github.com/antlr/antlr4/issues](https://github.com/antlr/antlr4/issues)

**编辑：这是问题 #218，现已修复**
[https://github.com/antlr/antlr4/issues/218](https://github.com/antlr/antlr4/issues/218)

PS：您在规则中使用非贪婪运算符`+?`要么是不必要的，要么是不正确的`cppCompilationUnit`。如果您打算至少需要一个`content`元素，您可以简单地使用`+`. 但是，我认为您要写的是零个或多个`content`元素：`(content+)?`，可以简化为`content*`.

# php - 在 PHP 中按多个值对数组进行排序并插入 HTML 表

> ID：15976845
> 
> 赞同：0
> 
> 时间：2013-04-12T16:51:53.660
> 
> 标签：php, arrays, sorting

我正在尝试对数组的内容进行排序，然后将其输入到 HTML 表中。该数组需要根据进球数进行排序，如果两支球队拥有最多球员的球队，则需要将其放置在更高的位置。这是数组的示例：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [team] => Manchester United
            [goals] => 210
            [country] => england
            [players] => 10
        )

    [1] => Array
        (
            [id] => 2
            [team] => Manchester City
            [goals] => 108
            [country] => england
            [players] => 12
        )

    [2] => Array
        (
            [id] => 3
            [team] => Liverpool
            [goals] => 108
            [country] => england
            [players] => 15
        )
) 
```

我从来没有在 PHP 中进行过排序，而且我对数组只有一些经验，它们不是这样嵌套的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:56:36.277

所有你需要的是`usort`

```
usort($data, function ($a, $b) {
    if ($a['goals'] == $b['goals'])
        return $a['players'] > $b['players'] ? - 1 : 1;
    return $a['goals'] > $b['goals'] ? -1 : 1;
});

print_r($data); 
```

[输出](http://eval.in/16145)

```
Array
(
    [0] => Array
        (
            [id] => 1
            [team] => Manchester United
            [goals] => 210                    <--- Highest goal top
            [country] => england
            [players] => 10
        )

    [1] => Array
        (
            [id] => 3
            [team] => Liverpool
            [goals] => 108                    <--- Same Score found
            [country] => england
            [players] => 15                           Use This ---|
        )

    [2] => Array
        (
            [id] => 2
            [team] => Manchester City
            [goals] => 108                    <--- Same Score found
            [country] => england
            [players] => 12                           Use This ---|
        )

) 
```

[观看现场演示](http://eval.in/16145)

# excel - Excel VBA中的n列扩展行选择

> ID：15976846
> 
> 赞同：0
> 
> 时间：2013-04-12T16:52:09.780
> 
> 标签：excel, vba

这让我很困惑，因为通常我会使用数字作为列，但是，对于这种情况，我必须使用字母作为列。

例如，`T1`现在我想扩展 n 列。

*   `n = 10`，则范围为`T1:T11`
*   `n = 20`，则范围为`T1:T22`

它是列然后我可以使用.resize，我可以使用什么方法而不是调整大小来获得我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:05:23.743

我不确定你想做什么。要调整列的大小，这应该有效：

```
Dim rng As Range
Set rng = Sheet1.Range("t1:t11")
rng.Resize(, 10).Select 
```

如果您尝试做行，这似乎适用于我的测试表：

```
Dim rng As Range
Set rng = Sheet1.Range("t1:t11")
rng.Resize(rng.Rows.Count + 10, 1).Select 
```

我解释你的问题的第三种方式：

```
Dim RowCounter As Long
RowCounter = 20
Range("T1:T" & RowCounter + 1).Select 
```

这是另一种方式：

```
Dim rng As Range
Dim RowExtend As Long

RowExtend = 20

Set rng = Sheet1.Range("t1")
rng.Resize(rng.Rows.Count + RowExtend, 1).Select 
```

希望这四种方法中的一种能让你接近。如果没有，请澄清你的问题，我会继续解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T10:08:36.950

将当前选择扩展到 LEFT 怎么样？例如：当前选择是 E10:E100 ，我需要将选择向左扩展 2 列，到 C10:E100 吗？

# php - 使用php将XML数据插入mysql

> ID：15976852
> 
> 赞同：0
> 
> 时间：2013-04-12T16:52:37.210
> 
> 标签：php, mysql, xml, mysql-real-escape-string, xmldom

代表问题的部分 xml 文件（xml 文件有数百个客户记录）

```
 <?xml version="1.0" encoding="utf-8"?>
    <test>
       <customer>   
          <name>customer 1</name>
          <address>address 1</address>
          <city>city 1</city>
          <state>state 1</state>
          <zip>zip 1</zip>
          <phone>phone 1</phone>
          <buyerinfo>
             <shippingaddress>
               <name>ship to</name>
               <address>Ship address1</address>
             </shippingaddress>
           </buyerinfo>
           <shippingDetail>
             <saletax>
               <saletaxamount>2</saletaxamount>
             </saletax>
           </shippingDetail>
       </customer>... 
```

下面是我的代码

```
 //Xml string is parsed and creates a DOM Document object
    $responseDoc = new DomDocument();        
    $responseDoc->load('test.xml');     
    foreach ($responseDoc->getElementsByTagName('customer') as $customer){

     $sSQL = sprintf(
    "INSERT INTO customer (name, address, city, state, zip, phone, shipto, shipadderss, tax) 
    VALUES ('%s','%s', '%s', '%s','%s','%s', '%s','%s','%s')",
    mysql_real_escape_string($customer->getElementsByTagName('name')->item(0)->nodeValue),
    mysql_real_escape_string($customer->getElementsByTagName('address')->item(0)->nodeValue),
    mysql_real_escape_string($customer->getElementsByTagName('city')->item(0)->nodeValue),
    mysql_real_escape_string($customer->getElementsByTagName('state')->item(0)->nodeValue),
    mysql_real_escape_string($customer->getElementsByTagName('zip')->item(0)->nodeValue),
    mysql_real_escape_string($customer->getElementsByTagName('phone')->item(0)->nodeValue)
    ?
    ?
    ?       
);
$rResult = mysql_query($sSQL);

if(mysql_errno() > 0)
{
    printf(
        '<h4 style="color: red;">Query Error:</h4>
        <p>(%s) - %s</p>
        <p>Query: %s</p>
        <hr />',
        mysql_errno(),
        mysql_error(),
        $sSQL
    );
}

    } 
```

问题：

1.  如何在我的插入语句中使用 mysql_real_escape_string 访问获取 customer.buyerinfo.shippingaddress.name 节点值？用“ **？？？** ”表示

    我有两个具有相同节点名称**"name"**的节点，一个是*customer.name*，另一个是 *customer.buyerinfo.shippingaddress.name*来命名这一事实使得使用**getElementsByTagName** "name" 标记来获取值是有问题的。

2.  与第一个相同，但如何获取**saletaxamount** 节点数据值？

    请帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:25:21.830

对于您拥有的 XML 数据，我更喜欢 SimpleXML 扩展，它包含您需要的所有内容，并且不需要编写太多代码（它是 DOMDocument 的小妹妹）。

因此，对于输入数据中的每个*客户* ，您都希望获取 9 个左右的值。您可以将这些值表示为 xpath：

```
$values = <<<XPATH
(
    name
    |address
    |city
    |state
    |zip
    |phone
    |buyerinfo/shippingaddress/name
    |buyerinfo/shippingaddress/address
    |shippingDetail/saletax/saletaxamount
)
XPATH; 
```

这与数据库查询类似。您为 Xpath 语言中的 XML 创建一个包含查询的字符串。

我们对 SQL 也做同样的事情，因为两者应该齐头并进，所以这里是相应的 SQL 模式：

```
$pattern = <<<SQL
INSERT INTO customer
  (
    name, address, city, state, zip, phone, shipto, shipadderss, tax
  )
  VALUES
  (
    '%s','%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s'
  )
SQL; 
```

现在所需要做的就是打开 XML 并指定要处理的客户元素：

```
$customers = simplexml_load_string($test)->customer; // "test.xml" 
```

然后您只需要遍历每个客户，获取值，转义它们，将它们插入查询并运行 SQL 查询（或创建一个包含多条记录的更大查询）：

```
foreach ($customers as $customer) 
{
    $data = $customer->xpath($values);
    $escaped = array_map('mysql_real_escape_string', $data);
    $query = vsprintf($pattern, $escaped);

    // you can now run the query now
    // ...
} 
```

是的，这已经是你的代码了。如您所见，利用数组、xpath 和 SQL，您可以大大简化此操作。

对于您的示例 XML 中的第一个*客户*，这将生成以下查询：

```
INSERT INTO customer
  (
    name, address, city, state, zip, phone, shipto, shipadderss, tax
  )
  VALUES
  (
    'customer 1','address 1', 'city 1', 'state 1', 'zip 1', 'phone 1', 'ship to', 'Ship address1', '2'
  ) 
```

整个代码示例：

```
$values = <<<XPATH
(
    name
    |address
    |city
    |state
    |zip
    |phone
    |buyerinfo/shippingaddress/name
    |buyerinfo/shippingaddress/address
    |shippingDetail/saletax/saletaxamount
)
XPATH;

$pattern = <<<SQL
INSERT INTO customer
  (
    name, address, city, state, zip, phone, shipto, shipadderss, tax
  )
  VALUES
  (
    '%s','%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s'
  )
SQL;

$customers = simplexml_load_string($test)->customer; // "test.xml"

foreach ($customers as $customer)
{
    $data = $customer->xpath($values);
    $escaped = array_map('mysql_real_escape_string', $data);
    $query = vsprintf($pattern, $escaped);

    // you can now run the query now
    $result = mysql_query($query);
    if(mysql_errno())
    {
        printf(
            '<h4 style="color: red;">Query Error:</h4>
            <p>(%s) - %s</p>
            <p>Query:
              <pre>%s</pre>
            </p>
            <hr />',
            mysql_errno(),
            htmlspecialchars(mysql_error()),
            htmlspecialchars($query)
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:27:56.773

您可以通过节点内的循环获取子节点值`shippingaddress`。

类似的东西，之后 `mysql_real_escape_string($customer->getElementsByTagName('phone')->item(0)->nodeValue)`

添加：

```
foreach ($customer->getElementsByTagName('buyerinfo') as $buyerinfo)
{
    foreach ($buyerinfo->getElementsByTagName('shippingaddress') as $shippingaddress)
    {
        mysql_real_escape_string($shippingaddress->getElementsByTagName('name')->item(0)->nodeValue),
        mysql_real_escape_string($shippingaddress->getElementsByTagName('address')->item(0)->nodeValue)
    }
} 
```

当然，您必须使用新值修复查询。

这应该是你的工作，抱歉我没有机会测试它

# android - 应用程序在计算 WAV 文件的秒数时变慢

> ID：15976854
> 
> 赞同：0
> 
> 时间：2013-04-12T16:52:40.147
> 
> 标签：android, performance, listview, size, duration

在文件夹中声音文件的 ListView 中，我想以秒为单位显示文件的长度。我采取的步骤：

1.  首先，我为 soundFiles 的实例创建一个 ArrayList。
2.  然后在 for 循环中，我通过 soundFile.setLength(calculateLength(file[i])) 将数据添加到实例中。
3.  在此之后，我启动了我的 CustomArrayAdapter 并将它应用到我的 listView。
4.  在我的 CustomArrayAdapter 我应用它： tvFileLength.setText(soundFile.getLength()); （虽然有一个持有人..）

但是因为我这样做了，所以我的应用程序比乌龟还慢！（有400个文件）有什么办法可以解决这个速度吗？

```
private int calculateLength(File yourFile)
            throws IllegalArgumentException, IllegalStateException, IOException {
        MediaPlayer mp = new MediaPlayer();
        FileInputStream fs;
        FileDescriptor fd;
        fs = new FileInputStream(yourFile);
        fd = fs.getFD();
        mp.setDataSource(fd);
        mp.prepare(); 
        int length = mp.getDuration();
        length = length / 1000;
        mp.release();
        return length;

    } 
```

* * *

```
 **EDIT** 
```

我拥有的新代码：

活动

```
myList = new ArrayList<RecordedFile>();

        File directory = Environment.getExternalStorageDirectory();
        file = new File(directory + "/test/");

        File list[] = file.listFiles();

        for (int i = 0; i < list.length; i++) {
            if (checkExtension(list[i].getName()) == true) {

                RecordedFile q = new RecordedFile();
                q.setTitle(list[i].getName());
                q.setFileSize(readableFileSize(list[i].length()));
                            //above is the size in kB, is something else but I 
                            //also might move this to the AsyncTask!

                myList.add(q);
            }
        }
        new GetAudioFilesLength(myList).execute(); 
```

异步任务

```
List<RecordedFile> mFiles = new ArrayList<RecordedFile>();

    public GetAudioFilesLength(List<RecordedFile> theFiles) {
        mFiles = theFiles;
    }

    @Override
    protected String doInBackground(Void... params) {

        File directory = Environment.getExternalStorageDirectory();
        // File file = new File(directory + "/test/");
        String mid = "/test/";

        for (RecordedFile fileIn : mFiles) {

            File file = new File(directory + mid + fileIn.getTitle());
            try {
                int length = readableFileLengthSeconds(file);
                fileIn.setFileLengthSeconds(length);
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            // Do something with the length

            // You might want to update the UI with the length of this file
            // with onProgressUpdate so that you display the length of the files
            // in real time as you process them.
        }
        return mid;

    }

    @Override
    protected void onProgressUpdate(Void... values) {

    }

    @Override
    protected void onPostExecute(String result) {
        // Update the UI in any way you want. You might want
        // to store the file lengths somewhere and then update the UI
        // with them here
    }

    /*
     * @Override protected void onPreExecute() { }
     */

    public int readableFileLengthSeconds(File yourFile)
            throws IllegalArgumentException, IllegalStateException, IOException {
        MediaPlayer mp = new MediaPlayer();
        FileInputStream fs;
        FileDescriptor fd;
        fs = new FileInputStream(yourFile);
        fd = fs.getFD();
        mp.setDataSource(fd);
        mp.prepare(); // might be optional
        int length = mp.getDuration();
        length = length / 1000;
        mp.release();
        return length;

    } 
```

太棒了，它部分工作，但是！我还有两个问题：

1.  这看起来不错且有效吗？
2.  它适用于让我们说我的列表视图中的前 100 个元素，之后它显示 0 s，它与我假设的 onProgressUpdate 有关，但我不确定如何使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:05:00.000

读取文件以便 MediaPlayer 可以找到持续时间显然需要一些时间。由于您在 UI 线程上运行它，这将减慢整个应用程序的速度。

对于如何加快进程，我没有任何建议，但是如果您使用 AsyncTask 在后台线程中执行此工作，您可以使您的应用程序运行得更加顺畅。这可能看起来像这样：

```
private class GetAudioFilesLength extends AsyncTask<Void, Void, Void> {

      List<File> mFiles = new ArrayList<File>();

      public GetAudioFilesLength(List<File> theFiles){
           mFiles = theFiles;
      }

      @Override
      protected String doInBackground(String... params) {
            for(File file : mFiles){
                int length = calculateLength(file);
                // Do something with the length

                // You might want to update the UI with the length of this file
                // with onProgressUpdate so that you display the length of the files
                // in real time as you process them.
            }
      }      

      @Override
      protected void onPostExecute(String result) {
            // Update the UI in any way you want. You might want
            // to store the file lengths somewhere and then update the UI
            // with them here
      }

      @Override
      protected void onPreExecute() {
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

当您想开始处理时，只需调用`new GetAudioFilesLength(files).execute()`

编辑以回答其他问题：

1.  它看起来和您的原始代码一样高效。现在的不同之处在于用户仍然可以与您的应用程序交互，因为工作将在后台线程中完成。可能有一种更有效的方法来读取音频文件的长度，但我不知道那是什么。如果您知道采样率和编码，我可以想象您可以编写代码来计算音频的长度，而无需将其加载到 MediaPlayer 中，这需要更长的时间。不过，再一次，其他人将不得不提供帮助。

2.  我不确定我是否理解问题所在，但我想您是在问如何使用 onProgressUpdate 更新 UI 并将长度添加到 ListView？

您可以将 AsyncTask 生成的中间参数更改为`AsyncTask<Void, String, Void>, that tells onProgressUpdate what you will be passing to it. You can then call`来自 doInBackground 的字符串（或其他）publishProgress`，以相应地更新 UI。

```
@Override
  protected String doInBackground(Void... params) {
        for(File file : mFiles){
            int length = calculateLength(file);
            // Do something with the length

            // You might want to update the UI with the length of this file
            // with onProgressUpdate so that you display the length of the files
            // in real time as you process them.
            publishProgress("The length of " + file.getName() + " is: " + length);
        }
  }      

  @Override
  protected void onPostExecute(Void result) {
        // Update the UI in any way you want. You might want
        // to store the file lengths somewhere and then update the UI
        // with them here
  }

  @Override
  protected void onProgressUpdate(String... values) {
        // You'll have to implement whatever you'd like to do with this string on the UI
        doSomethingWithListView(values[0]);
  } 
```

# java - 添加 SpinnerDateModel 时，为什么我的 JSpinner 会调整大小以超出必要的大小？

> ID：15976856
> 
> 赞同：1
> 
> 时间：2013-04-12T16:52:55.773
> 
> 标签：java, swing, jspinner

我正在创建带有标签和输入的 GUI 表单。每行都有一个标签，然后是一个输入。其中之一使用两个 JSpinner 进行输入（开始时间和结束时间）。一切都很好，并且组件都很好地对齐，直到我将 SpinnerDateModel 添加到微调器。尽管微调器的大小已经足够容纳它的新内容，但它会扩大占用太多空间（文本末尾和箭头之间有很多空白）。我最初使用的是 GridBagLayout，然后尝试了 BoxLayout（每一行都有一个带有 X 轴 BoxLayout 的面板，都在 Y 轴 BoxLayout 上），但我得到了相同的结果。我找不到有关此特定问题的任何信息，但有关调整 JSpinners 大小的所有其他建议均无效。一世' 我尝试调整编辑器组件和 JFormattedTextField 的大小（包括使用 setColumns() 并检查列是否已更改，它们已更改）。我还能尝试什么？

**编辑**：这是根据要求的SSCCE：

```
import java.awt.Dimension;
import java.util.Calendar;
import java.util.Date;

import javax.swing.BoxLayout;
import javax.swing.JComponent;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.JTextField;
import javax.swing.SpinnerDateModel;

public class SpinnerTest extends JPanel {

    public static void main(String[] args) {
        new SpinnerTest();

    }

    public SpinnerTest() {
        JFrame mainFrame = new JFrame();

        BoxLayout mainLayout = new BoxLayout(this, BoxLayout.Y_AXIS);
        setLayout(mainLayout);
        JPanel titlePanel = new JPanel();
        BoxLayout titleLayout = new BoxLayout(titlePanel, BoxLayout.X_AXIS);
        titlePanel.setLayout(titleLayout);
        JPanel timePanel = new JPanel();
        BoxLayout timeLayout = new BoxLayout(timePanel, BoxLayout.X_AXIS);
        timePanel.setLayout(timeLayout);

        Calendar arb = Calendar.getInstance();
        Date initDate = arb.getTime();
        arb.add(Calendar.YEAR, -100);
        Date earliestDate = arb.getTime();
        arb.add(Calendar.YEAR, 200);
        Date latestDate = arb.getTime();
        SpinnerDateModel timeModel = new SpinnerDateModel(initDate, earliestDate,
                latestDate, Calendar.MINUTE);
        SpinnerDateModel timeModel2 = new SpinnerDateModel(initDate, earliestDate,
                latestDate, Calendar.MINUTE);

        JLabel titleLabel = new JLabel("Title:");
        titleLabel.setPreferredSize(new Dimension(60, 16));
        titlePanel.add(titleLabel);

        JTextField titleField = new JTextField("Title");
        titleField.setColumns(10);
        titlePanel.add(titleField);

        add(titlePanel);

        JLabel timeLabel = new JLabel("Time:");
        timeLabel.setPreferredSize(new Dimension(60, 16));
        timePanel.add(timeLabel);

        JSpinner startTime = new JSpinner(timeModel);
        JComponent editor = (JSpinner.DefaultEditor) startTime.getEditor();
        JFormattedTextField ftf = ((JSpinner.DefaultEditor) editor).getTextField();
        ftf.setColumns(5);
        ftf.setMaximumSize(new Dimension(50, 30));
        editor.setMaximumSize(new Dimension(50, 30));
        //System.out.println(tf.getColumns());
        startTime.setEditor(new JSpinner.DateEditor(startTime, "HH:mm"));
        timePanel.add(startTime);

        JSpinner endTime = new JSpinner(timeModel2);
        endTime.setMaximumSize(new Dimension(70, 20));
        JComponent editor1 = (JSpinner.DefaultEditor) endTime.getEditor();
        JFormattedTextField ftf1 = ((JSpinner.DefaultEditor) editor1).getTextField();
        ftf1.setColumns(5);
        ftf1.setMaximumSize(new Dimension(50, 30));
        editor1.setMaximumSize(new Dimension(50, 30));
        //System.out.println(ftf.getColumns());
        endTime.setEditor(new JSpinner.DateEditor(endTime, "HH:mm"));
        timePanel.add(endTime);

        add(timePanel);

        mainFrame.add(this);
        mainFrame.pack();
            mainFrame.setSize(189, mainFrame.getHeight());
    mainFrame.setResizable(false);
        mainFrame.setVisible(true);
    }

} 
```

我通常不会扩展 JPanel 然后创建一个 JFrame，但是我正在创建的类放在一个预先存在的 JFrame 中并扩展 JPanel，所以我尽可能地关注我的类。我将强调 BoxLayout 不是我的第一选择，我知道它比大多数其他布局更好地听 .setXXXSize （我知道我不应该使用 .setXXXSize 但我没有看到如何对其进行排序）。我已经放弃了我在研究这个问题时尝试过的所有尝试，这样你就不会再尝试了。尝试使用普通的 JSpinner 构造函数（并注释掉不起作用的代码）并将这些结果与完全使用此代码时得到的结果进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:20:09.810

我将您的程序更改为仅使用 FlowLayout，以便每个组件都可以以其首选大小显示。格式化文本字段的大小可容纳 5 个字符。它为每个字符使用 11 的宽度（这似乎有点过分），因此您可以获得很多额外的空间。

在您的代码中，您似乎手动尝试控制格式化文本字段的列数：

```
 JSpinner startTime = new JSpinner(timeModel);
    JComponent editor = (JSpinner.DefaultEditor) startTime.getEditor();
    JFormattedTextField ftf = ((JSpinner.DefaultEditor) editor).getTextField();
    ftf.setColumns(5);
    startTime.setEditor(new JSpinner.DateEditor(startTime, "HH:mm")); 
```

问题是您在更改编辑器之前访问了格式化的文本字段。相反，您需要在访问格式化文本字段之前设置编辑器。

```
 JSpinner startTime = new JSpinner(timeModel);
    startTime.setEditor(new JSpinner.DateEditor(startTime, "HH:mm"));
    JComponent editor = (JSpinner.DefaultEditor) startTime.getEditor();
    JFormattedTextField ftf = ((JSpinner.DefaultEditor) editor).getTextField();
    ftf.setColumns(3); 
```

我还将列更改为 3 以减少额外空白的数量。现在微调器的首选尺寸更合理。用 FlowLayout 测试它，看看我的意思。

# c++ - （C++ 线程）：创建工作线程，这些线程将监听作业并在需要时并发执行它们

> ID：15976857
> 
> 赞同：8
> 
> 时间：2013-04-12T16:53:01.110
> 
> 标签：c++, multithreading, parallel-processing

假设我们有两个工人。每个工人都有一个 id`0`和`1`。还假设我们一直有工作到达，每个工作也有一个标识符`0`或`1`指定哪个工人必须做这项工作。

我想创建 2 个最初被锁定的线程，然后当两个作业到达时，解锁它们，每个人都完成他们的工作，然后再次锁定它们，直到其他作业到达。

我有以下代码：

```
 #include <iostream>
  #include <thread>
  #include <mutex>

  using namespace std;

  struct job{

      thread jobThread;
      mutex jobMutex;

  };

  job jobs[2];

  void executeJob(int worker){

      while(true){

          jobs[worker].jobMutex.lock();

          //do some job

      }

   }

  void initialize(){

      int i;
      for(i=0;i<2;i++){
                jobs[i].jobThread = thread(executeJob, i);
      }

   }

  int main(void){

      //initialization
      initialize();

      int buffer[2];
      int bufferSize = 0;

      while(true){
          //jobs arrive here constantly, 
            //once the buffer becomes full, 
            //we unlock the threads(workers) and they start working
          bufferSize = 2;
          if(bufferSize == 2){
              for(int i = 0; i<2; i++){
                  jobs[i].jobMutex.unlock();
              }
          }
           break;
     }

  } 
```

`std::thread`我几天前开始使用，我不知道为什么，但 Visual Studio 给我一个错误说`abort() has been called`. 我相信缺少一些东西，但是由于我的无知，我无法弄清楚是什么。

我希望这段代码实际上

1.  初始化两个线程，然后锁定它们

2.  在主函数中解锁两个线程，这两个线程将完成它们的工作（在这种情况下什么都不做），然后它们将再次被锁定。

但它给了我一个错误。我究竟做错了什么？

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T17:02:56.193

为此，您可以使用 boost 的线程池类。它高效且经过良好测试。开源库，而不是您新编写并稳定它。

[http://threadpool.sourceforge.net/](http://threadpool.sourceforge.net/)

```
main()
{
    pool tp(2);   //number of worker threads-currently its 2.

    // Add some tasks to the pool.
    tp.schedule(&first_task);
    tp.schedule(&second_task);
}

void first_task()
{
    ...
}

void second_task()
{
    ...
} 
```

笔记：

对您的示例的建议：您不需要为每个线程都有单独的互斥对象。单个互斥对象锁本身将在所有线程之间进行同步。您在 executejob 函数中锁定了一个线程的互斥锁，而没有解锁另一个线程正在调用具有不同互斥锁对象的锁，从而导致死锁或未定义的行为。

此外，由于您在 whileloop 内调用 mutex.lock() 而没有解锁，因此同一线程正试图用同一互斥对象无限锁定自身，从而导致未定义的行为。

如果您不需要并行执行线程，您可以在 executejob 函数中使用一个全局互斥对象来锁定和解锁。

```
mutex m;

void executeJob(int worker)
{
    m.lock();

    //do some job

    m.unlock();
} 
```

如果你想并行执行作业，请使用我之前建议的 boost 线程池。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-12T18:27:57.000

一般来说，您可以编写类似于以下的算法。它适用于 pthreads。我确信它也适用于 c++ 线程。

1.  创建线程并让它们等待[条件变量](http://en.cppreference.com/w/cpp/thread/condition_variable)，例如`work_exists`。
2.  当工作到达时，您通知正在等待该条件变量的所有线程。然后在主线程中你开始等待另一个条件变量`work_done`
3.  收到`work_exists`通知后，工作线程醒来，从 中获取分配的工作`jobs[worker]`，执行它，在变量上发送通知`work_done`，然后返回等待`work_exists`条件变量
4.  当主线程收到`work_done`通知时，它会检查是否所有线程都已完成。如果没有，它会一直等待，直到最后一个完成线程的通知到达。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T17:00:50.063

从[cppreference 的页面`std::mutex::unlock`](http://en.cppreference.com/w/cpp/thread/mutex/unlock)：

> 互斥锁必须被所有成功锁定它的线程解锁，然后才能被销毁。否则，行为未定义。

您让一个线程代表另一个线程解锁互斥锁的方法是不正确的。

您尝试的行为通常会使用[`std::condition_variable`](http://en.cppreference.com/w/cpp/thread/condition_variable). 如果您查看成员函数的链接，就会有一些示例。

# annotations - 将类型添加到注释，以便我可以过滤 3 种引脚颜色的注释数组

> ID：15976858
> 
> 赞同：0
> 
> 时间：2013-04-12T16:53:01.007
> 
> 标签：annotations, mkmapview, mapkit, mkannotation, xcode4.6

我是 xcode 的新手——我制作了一张地图并使用 MutableArray 添加了一些注释。我想将它们分成 3 组，并使用 3 种不同的别针颜色在地图上显示它们。希望您能提供帮助或给我一个可以帮助我的指南的网址。我尝试制作一个“if 语句”和一个“annotationType”，但可以让它正常工作。希望你能帮助或给我一个提示。

感谢您的时间。

**视图控制器.m**

```
{

[super viewDidLoad];

[self.myMapView setDelegate:self];

MKCoordinateRegion myRegion;

CLLocationCoordinate2D center;
center.latitude = AMAR_LATITUDE;
center.longitude = AMAR_LONGITUDE;

MKCoordinateSpan span;
span.latitudeDelta = THE_SPAN;
span.longitudeDelta = THE_SPAN;

myRegion.center = center;
myRegion.span = span;

[myMapView setRegion: myRegion animated: YES];

NSMutableArray * locations = [[NSMutableArray alloc] init];
CLLocationCoordinate2D location;
Annotation *myAnn;
NSMutableArray * locations = [[NSMutableArray alloc] init];
CLLocationCoordinate2D location;
Annotation *myAnn;

myAnn = [[Annotation alloc] init];
location.latitude = TATU_LATITUDE;
location.longitude = TATU_LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"Tante Tuli";
myAnn.subtitle =@"Amagerbrogade 161";
[locations addObject:myAnn];
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

MKPinAnnotationView *view =[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Pin"];
view.pinColor = MKPinAnnotationColorRed;
view.enabled = YES;
view.animatesDrop = YES;
view.canShowCallout = YES;
view.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
return view;
} 
```

**注释.h**

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>
@interface Annotation : NSObject <MKAnnotation>
@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
- initWithPosition:(CLLocationCoordinate2D)coords;
@end 
```

**注释.m**

```
#import "Annotation.h"
@implementation Annotation;
@synthesize coordinate, title, subtitle;
- initWithPosition:(CLLocationCoordinate2D)coords; {
if (self = [super init]) {
    self.coordinate = coords;
}
return self;
}
@end 
```

我试图添加第四行：

**注释.h**

```
@property (nonatomic, copy) NSString  *colortag; 
```

**注释.m**

```
@synthesize coordinate, title, subtitle, colortag; 
```

**视图控制器.m**

```
myAnn = [[Annotation alloc] init];
location.latitude = TATU.LATITUDE;
location.longitude = TATU.LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"name";
myAnn.subtitle =@"adr";
myAnn.colortag =@"purple";
[locations addObject:myAnn];

if ([[annotation colortag] isEqualToString:@"purple"])
view.pinColor = MKPinAnnotationColorPurple; 
```

我收到错误：选择器“colertag”没有已知的实例方法：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:22:12.537

你的`Annotation`班级有标题、副标题和坐标属性。只需添加第四个并在设置其他内容时设置它，然后阅读它并在 viewForAnnotation 中设置颜色。在读取新属性之前，您需要将`annotation`参数转换为您的类（在检查它是您的类的实例而不是用户的位置注释之后）。

# ruby-on-rails - 在 rabl 中渲染没有节点标签的子节点

> ID：15976870
> 
> 赞同：-1
> 
> 时间：2013-04-12T16:53:37.043
> 
> 标签：ruby-on-rails, ruby, sinatra, rabl

我正在使用 rabl 在 Sinatra 中构建和 API。所需的 JSON des 不接受某些节点中的标签使用此 Rabl 模板：

```
object @user
  attributes :profile_photo => :profile_photo, :name => :first_name, :last_name =>       :last_name
  child :addresses do
  attributes :id 
    child :country do
      attributes :name
    end
  end 
```

我得到以下 JSON：

```
{
user: {
profile_photo: null,
first_name: "John",
last_name: "Doe",
addresses: [
{
address: {
id: 43,
country: {
name: "Iceland"
}
}
},
{
address: {
id: 44,
country: {
name: "Cambodia"
}
}
},
{
address: {
id: 45,
country: {
name: "North Korea"
}
}
}
]
}
} 
```

我想要得到的是：

```
{
user: {
profile_photo: null,
first_name: "John",
last_name: "Doe",
addresses: [
{
{
id: 43,
country: {
name: "Iceland"
}
}
},
{
{
id: 44,
country: {
name: "Cambodia"
}
}
},
{
{
id: 45,
country: {
name: "North Korea"
}
}
}
]
}
} 
```

有没有办法在 Rabl 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:35:37.343

我必须将 Rabl 配置设置为：

```
Rabl.configure do |config|
  config.include_json_root = false
  config.include_child_root = false
end 
```

我从另一个堆栈溢出线程中得到了答案：

[删除 RABL 中的子根节点](https://stackoverflow.com/questions/9673136/removing-child-root-nodes-in-rabl?rq=1)

# php - 在 MySQL 的 select 子句中使用自定义函数

> ID：15976872
> 
> 赞同：0
> 
> 时间：2013-04-12T16:53:47.980
> 
> 标签：php, mysql

我正在尝试进行查询，该查询为我提供了按距当前位置多远排序的商店列表。我正在使用 php 并将 MySQL 用于我的数据库。

为了计算 2 家商店之间的距离，我使用 2 家商店的经度和纬度并从中得出距离。这包含在自定义函数`distance($lat1, $lng1, $lat2, $lng2)`中。该函数的结果是 中的距离`km`。

我想使用这个函数在我的查询结果中创建一个额外的列，这样我就可以对所有商店从我当前位置最后面的一个到离我当前位置最远的一个进行排序。这两个函数都在同一个文件中声明，但我没有得到任何结果。是否可以通过像我一样声明它来调用 SELECT 子句中的函数？

```
function getSortedStores($cur_lat, $cur_lng)
{
    $query = "SELECT Store.ID, Store.Name, distance($cur_lat, $cur_lng, Address.Latitude, Address.Longitude) AS Distance FROM Store INNER JOIN Address ON Store.ID=Address.StoreID ORDER BY Distance";
    $result = mysql_query($query);
    return $result;
}

function distance($lat1, $lng1, $lat2, $lng2)
{
    $toRadians = M_PI / 180;
    $lat1 *= $toRadians;
    $lng1 *= $toRadians;
    $lat2 *= $toRadians;
    $lng2 *= $toRadians;

    $r = 6371; // mean radius of Earth in km
    $dlat = $lat2 - $lat1;
    $dlng = $lng2 - $lng1;
    $a = sin($dlat / 2) * sin($dlat / 2) + cos($lat1) * cos($lat2) * sin($dlng / 2) * sin($dlng / 2);
    $c = 2 * atan2(sqrt($a), sqrt(1 - $a));
    $km = $r * $c;
    $km = round($km, 1);

    return $km;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:03:59.857

你不能在mysql中使用php函数。有关 mysql 用户定义函数的更多详细信息

看到这个

[http://dev.mysql.com/doc/refman/5.1/en/adding-functions.html](http://dev.mysql.com/doc/refman/5.1/en/adding-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:15:45.850

您不能以这种方式混合 PHP 和 mySQL，您可以在 mySQL 中使用它们的[数学函数](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html)进行计算，或者选择原始数据并根据 PHP 中的结果集进行计算。但是您不能*在*mySQL 查询中调用 PHP 函数。

或者，假设您的商店不是移动的。您可以创建一个简单的表格来存储所有商店之间的距离。它占用了一些额外的存储空间，但最终可能会为您节省相当多的 CPU 周期。

```
TABLE distances
  store1_id INT PK
  store2_id INT PK
  distance FLOAT

SELECT distance
FROM distances
WHERE (store1_id = $store1 AND store2_id = $store2)
  OR (store1_id = $store2 AND store1_id = $store2)
LIMIT 1 
```

# symfony - 什么 Symfony2 捆绑包更适合 Neo4j 集成？

> ID：15976873
> 
> 赞同：2
> 
> 时间：2013-04-12T16:53:51.677
> 
> 标签：symfony, neo4j, symfony-2.1

[https://github.com/klaussilveira/neo4j-ogm-bundle](https://github.com/klaussilveira/neo4j-ogm-bundle)

[https://github.com/jadell/neo4jphp](https://github.com/jadell/neo4jphp)

我正在寻找更稳定/更活跃的人，并想看看您是否有人对其中任何一个有经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T21:52:51.470

Neo4jPHP 是一个简单的 REST 客户端。您不会从中获得任何对象映射。如果您不喜欢使用 ORM 并且更喜欢自己进行查询/查找，那么这可能更符合您的风格。

Neo4j-OGM 是一个围绕 Neo4jPHP 的包装器，它添加了 ORM 类型的功能、域类的注释和存储库模式。如果你曾经使用过 Doctrine 或 Propel，你就会认出它的风格和语法。

我的意见：如果您习惯使用 ORM 或 ODM，请使用 Neo4j-OGM。如果您想进行更多调整和“裸机”优化，请使用 Neo4jPHP。

# virtualbox - Vagrant，VirtualBox 是否内置？

> ID：15976880
> 
> 赞同：3
> 
> 时间：2013-04-12T16:54:17.197
> 
> 标签：virtualbox, vagrant

尝试使用 Vagrant 进行设置，但出现错误：

```
The "VBoxManage" command or one of its dependencies could not be found. 
Please verify VirtualBox is properly installed. You can verify everything 
is okay by running "VBoxManage --version" and verifying that the VirtualBox 
version is outputted. 
```

只是因为 Vagrant 文档状态而感到困惑：

“入门指南将使用 Vagrant 和 VirtualBox，因为它是免费的，可在每个主要平台上使用，并且**内置于 Vagrant。** ”

如果我安装 Vagrant 时应该包含 VirtualBox，则不想单独安装它。如果相关，运行 OSX 10.8，猜我只需要安装 VirtualBox？如果是这样的话，当他们说它是“内置的”时，他们在文档中是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:59:45.087

如果您打算将 VirtualBox 与 Vagrant 一起使用，则需要安装 VirtualBox。我猜他们的意思是 VirtualBox 集成是内置的？

最近，他们已经抽象出 VirtualBox 特定的代码，并正在努力允许多个提供者。我相信除了 VirtualBox 之外，现在还[支持VMWare。](http://www.vagrantup.com/vmware)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-03T17:49:43.933

我收到了这条消息，但我的问题有所不同。我使用 Vmware_fusion 作为提供者。Vagrant 无法检测到我正在使用的提供程序。它假设我正在使用 VirtualBox。通过调用 vagrant up provider 标志解决了这个问题。这是完整的命令

```
 vagrant up --provider vmware_fusion 
```

# android - 只有原始线程错误

> ID：15976881
> 
> 赞同：0
> 
> 时间：2013-04-12T16:54:19.670
> 
> 标签：android, multithreading, handler

我对这个错误感到困惑 -

> 只有创建视图层次结构的原始线程才能接触其视图。

我有一个类，它在 UI 的可运行/线程块中调用。没有尝试-据我所知？？？- 用于操作该可运行文件或它调用的类中的 UI，如下所示......

```
public class MonthSort {
Handler handler;
int imageWidth;
List<PhotoData> photoList;
public MonthSort(Handler handler2, int width, List<PhotoData> pList) {
    photoList = new ArrayList<PhotoData>();
    photoList = pList;
    imageWidth = width;
    handler = handler2;
}

public void sortFiles()
{
    int month, photoCount;
    File fileName = new File("");
    Message msg = handler.obtainMessage();
    for (int i = 0; i < 12; i++) {
        month = i + 1;
        photoCount = 0;
        for (PhotoData pd : photoList) {
            if(month == pd.month)
            {
                if(photoCount == 0)
                    fileName = pd.fileName;
                photoCount++;
            }
        }
        if(photoCount != 0)
        {

            Bundle bundle = new Bundle();
            bundle.putString("filename", fileName.toString());
            bundle.putInt("month", month);
            bundle.putInt("count", photoCount);
            byte[] thumbNail = getThumbnail(fileName, imageWidth);
            bundle.putByteArray("thumbnail", thumbNail);
            msg.setData(bundle);
            handler.dispatchMessage(msg);

        }
    }
    Bundle bundle = new Bundle();
    bundle.putBoolean("end", true);
    msg.setData(bundle);
    handler.dispatchMessage(msg);
}

private byte[] getThumbnail(File file, int size)
{
    /** The object of this code is to reduce the bitmap for thumbnail display,
     * Not just to reduce dimensions, but to reduce the physical size of the 
     * bitmap ready, so that several bitmaps can remain in memory without 
     * an outOfMemoryException error.*/
    byte[] thumbnail;
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    Bitmap bitmap = BitmapFactory.decodeFile(
            file.toString(), options);
    options.inSampleSize = calculateInSampleSize(
            options, imageWidth, imageWidth);
    options.inJustDecodeBounds = false;
    bitmap = BitmapFactory.decodeFile(file.toString(),
            options);
     /*now the size of the Bitmap is manageable, we set about sizing the 
     * thumbnail correctly, preserving the Aspect Ratio */

    final int REQUIRED_SIZE = imageWidth;
    int thumbHeight = REQUIRED_SIZE, thumbWidth = REQUIRED_SIZE;
    float ratio = (float) bitmap.getWidth() // Work out the aspect ratio.
            / (float) bitmap.getHeight();
    if (ratio == 1) {
        thumbHeight = REQUIRED_SIZE;
        thumbWidth = REQUIRED_SIZE;
    } else if (ratio < 1) {
        thumbHeight = REQUIRED_SIZE;
        thumbWidth = (int) ((float) REQUIRED_SIZE * (float) ratio);
    } else {
        thumbWidth = REQUIRED_SIZE;
        thumbHeight = (int) ((float) REQUIRED_SIZE / (float) ratio);
    }
    Bitmap bitmap2 = Bitmap.createScaledBitmap(
            bitmap, thumbWidth, thumbHeight, false);

    ByteArrayOutputStream out;
    try {
        out = new ByteArrayOutputStream();

        bitmap2.compress(CompressFormat.JPEG, 30, out); // Compress the bitmap   
        thumbnail = out.toByteArray();
        out.close(); // close the out stream.
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        thumbnail = new byte[1];
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        thumbnail = new byte[1];
    }
    return thumbnail;
}

private int calculateInSampleSize(Options options, int reqWidth, int reqHeight) {
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if(height > reqHeight || width > reqWidth)
    {
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }
    return inSampleSize;
} 
```

主线程像往常一样在顶部有处理程序（参见下面的代码 - 只是为了简洁起见的处理程序代码），并使用自定义适配器的 notifyDataSetChanged() 方法（包括代码）......

```
public class MonthActivity extends Activity {
List<PhotoData> photoList;
static List<MonthData> photos;
int imageWidth;
GridView photoGrid;
static ImageAdapter2 iAdapter2;
static int year;
Thread monthSortThread;

static Handler handler2 = new Handler(Looper.getMainLooper()) {
    @Override
    public void handleMessage(Message msg) 
    {
        super.handleMessage(msg);
        Bundle bundle = msg.getData();  // Get the message sent to the Handler.
        boolean ended = bundle.getBoolean("end");
        if(ended)
        {
            iAdapter2.notifyDataSetChanged();
            //Toast.makeText(getBaseContext(), "FINISHED !!!", Toast.LENGTH_LONG).show();
        } else
        {
            MonthData md = new MonthData();
            md.monthValue = bundle.getInt("month");
            md.monthString = getMonthString(md.monthValue);
            Log.d("Debug", md.monthString + " " + String.valueOf(year));
            md.count = bundle.getInt("count");
            byte[] tn = bundle.getByteArray("thumbnail");
            md.thumbnail =  BitmapFactory.decodeByteArray(tn, 0, tn.length);
            photos.add(md);
            iAdapter2.notifyDataSetChanged();
        }
    }
}; 
```

（适配器代码）

```
public class ImageAdapter2 extends BaseAdapter{
List<MonthData> photos;
Context context;
int year, imageWidth;
public ImageAdapter2 (Context ct, List<MonthData> pList, int yr, int i) {
    photos = new ArrayList<MonthData>();
    photos = pList;
    context = ct;
    year = yr;
    imageWidth = i;
}

@Override
public int getCount() {
    return photos.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View myView = null;
    if(convertView == null)
    {
        LayoutInflater li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        myView = li.inflate(R.layout.grid_cell, null);
    } else
    {
        myView = convertView;
    }
    TextView tv = (TextView)myView.findViewById(R.id.photoText);
    if(year == 0)
    {
        int count = photos.get(position).count;
        tv.setText(String.valueOf(count));
    } else
    {
        int count = photos.get(position).count;
        String month = photos.get(position).monthString;
        String yearString = String.valueOf(year);
        tv.setText(month + " " + yearString + " (" + String.valueOf(count) + ")");
    }
    ImageView iv = (ImageView)myView.findViewById(R.id.photoViewGridCell);
    iv.setScaleType(ImageView.ScaleType.CENTER_CROP);
    iv.setPadding(0, 0, 0, 0);
    iv.setLayoutParams(new LinearLayout.LayoutParams(imageWidth, imageWidth));
    iv.setMaxHeight(imageWidth);
    iv.setMaxWidth(imageWidth);
    iv.setImageBitmap(photos.get(position).thumbnail);
    return myView;
} 
```

}

请注意，在选择自定义视图（特别是视图集合，在单独的 xml 布局文件中）时，通过 Intent 调用 MonthActivity ImageAdapter2 只是用于“启动”活动的类似适配器的一个小变体，具有略有不同的自定义视图。

此外，ImageAdapter2 已正确“连接”到所需的 Layout，并在 onCreate() 方法中启动，它甚至成功运行了构造函数，但尽管在适配器的 getView 方法中有几个不同的断点，但在调试时都没有到达它们。 . 非常令人沮丧.. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:14:42.870

调用时将 Runnable 放入 runOnUiThread 方法中。

# vim - ~/.vimrc 如何推翻 filetype.vim 对语法高亮的错误猜测？

> ID：15976882
> 
> 赞同：2
> 
> 时间：2013-04-12T16:54:22.517
> 
> 标签：vim, glsl, vim-syntax-highlighting

GLSL 语法荧光笔[http://www.vim.org/scripts/script.php?script_id=1002](http://www.vim.org/scripts/script.php?script_id=1002)效果很好。但它不能识别通常以 .frag 或 .vert 之类的行开头的着色器文件`#version 330`。（这是在 Ubuntu 12.04.2 LTS 上，一切都是最新的。）

有了这样一行，加载文件后必须手动键入`set syntax=glsl`，可能是因为 /usr/share/vim/vim73/filetype.vim 有

`" Generic configuration file (check this last, it's just guessing!)`

`if`………… `getline(1)=~'^#'`_ `setf conf`_

为什么这不会被 ~/.vimrc's 否决`au BufNewFile,BufRead *.frag,*.vert setf glsl`？有没有在 filetype.vim 中犯错的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:54:22.517

[如何阻止 vim 为某些文件类型自动加载语法文件？](https://stackoverflow.com/questions/3286886/how-can-i-stop-vim-from-loading-a-syntax-file-automatically-for-certain-file-typ)接近了。这是解决方法，一个文件 ~/.vim/filetype.vim：

```
if exists("did_load_filetypes")
  finish
endif

augroup filetypedetect
  " Override filetypes for certain files
  autocmd! BufNewFile,BufRead *.frag setfiletype glsl
  autocmd! BufNewFile,BufRead *.vert setfiletype glsl
augroup END 
```

# java - 如何在没有某些字段的情况下从 couchdb 获取文档？尽可能使用 Ektorp

> ID：15976886
> 
> 赞同：3
> 
> 时间：2013-04-12T16:54:29.530
> 
> 标签：java, nosql, couchdb, ektorp

起初我误解了我的问题并发布了这个问题：[有人可以解释一下 Ektorp 中的 Cascading 和 FetchType 懒惰吗？](https://stackoverflow.com/questions/15970364/can-someone-explain-me-cascading-and-fetchtype-lazy-in-ektorp/15972037?noredirect=1#comment22770964_15972037)

我需要做的：我需要在 couchdb 中保存一个实体，然后有办法读取它并可能忽略某些字段。所以我想出了这个解决方案：我创建了一个 show 函数，它从对象中删除字段，然后将其发回。

```
function(doc, req) {
    var result = doc;
    var ignore = JSON.parse(decodeURIComponent(req.query.ignore)); //this is an array of field names
    for (var i = 0, j = ignore.length; i < j; i++) {
        if (result[ignore[i]]) {
            delete result[ignore[i]];
        }
    }
    return {
        body : JSON.stringify(result),
        headers : {
            "Content-Type" : "application/json"
        }
    };
} 
```

我有相同的功能，但相反，对象保留了我告诉函数保留的字段。

有一个更好的方法吗？

我也想使用 Ektorp 来调用它，但它只允许我调用 Views。现在我被迫自己管理http请求。有没有办法避免这种情况？

现在这是我必须使用的代码，但我想使用 Ektorp 来执行此操作。

```
 HttpClient httpClient = new StdHttpClient.Builder().url("http://localhost:5984").build();
    CouchDbInstance dbInstance = new StdCouchDbInstance(httpClient);
    CouchDbConnector db = new StdCouchDbConnector("mydatabase", dbInstance);
    db.createDatabaseIfNotExists();

    String[] forget = new String[] { "field_to_ignore" };
    String uri = "/mydatabase/_design/mydesigndoc/_show/ignorefields/mydocid?ignore=" + URLEncoder.encode(Json.stringify(Json.toJson(forget)), "UTF-8");
    System.out.println(uri);
    HttpResponse r = db.getConnection().get(uri);
    String stuff = new Scanner(r.getContent()).useDelimiter("\\A").next();
    System.out.println(stuff); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:20:25.240

从 CouchDB 的角度来看，显示功能并不是一个糟糕的主意。Ektorp 可能不支持它们，大概是因为它们没有被大量使用，但是 Ektorp 的开源和在 Github 上；你可以很容易地添加这个功能，特别是因为你已经有了它的工作实现的基础。

或者，您可以只为给定的一组字段构建一个执行此操作的视图。但是，您不能真正将其参数化，因此您需要事先知道的明确定义的字段集。

最后，我建议要么拉出整个文档而不用担心它（除非您处于带宽非常有限的情况下，这可能无关紧要），或者将文档拆分为您要查询的组成部分并独立请求他们，如果这绝对是不寻常的情况。

# css - 如何设置树形菜单选项的样式？

> ID：15976890
> 
> 赞同：1
> 
> 时间：2013-04-12T16:54:50.437
> 
> 标签：css

这是关于 jsfiddle 的示例：http: [//jsfiddle.net/v6kuL/](http://jsfiddle.net/v6kuL/)

如何将 Category1、Category2、Category3 更改为其他颜色？

HTML：

```
<ul>
   <li>
      <a href="/category/category1">Category 1</a>
      <ul class="children">
         <a href="/category/" >
            <li>
         <a href="/category/category1a">Category 1 A</a>
         </li>
         </a>
      </ul>
   </li>
   <li>
      <a href="/category/category2">Category 2</a>
   </li>
   <li>
      <a href="/category/category3">Category 3</a>
      <ul class="children">
         <a href="/category/" >
            <li>
         <a href="/category/category3a">Category 3 A</a>
         </li>
         <li>
            <a href="/category/category3b">Category 3 B</a>
         </li>
         </a>
      </ul>
   </li>
</ul> 
```

我的尝试是在上面链接的 jsfiddle 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:59:57.380

使用您要使用的颜色创建类，并将它们应用于`<a>`标签。

```
<a href="/category/category1" class="red">Category 1</a>
<a href="/category/category1a" class="black">Category 1 A</a> 
```

在您的 HTML 标头中创建一个`<style>`标签，并在标签中添加类。

```
.red{color:red;}
.black{color:black;} 
```

除了红色和黑色等颜色外，您还可以应用 RGB 格式的任何颜色，如下所示：`color: #FFCC00;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:09:31.893

您可以使用：

```
ul:not(.children) > li > a:first-child {
    color: red;
} 
```

`**[Updated Demo](http://jsfiddle.net/v6kuL/1/)**`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:12:57.650

我刚刚在 CSS 的开头添加了这个

```
li a{color:red;}
.children a{color:blue;} 
```

这样父母是红色的，孩子是蓝色的。干杯。

# python - 为什么这些代码段中的一个工作，而另一个引发溢出

> ID：15976893
> 
> 赞同：8
> 
> 时间：2013-04-12T16:54:57.487
> 
> 标签：python, exponential

我正在使用 python，我试图找到非常大的数字的幂，但是发生的一些有趣的事情是，这会引发数学溢出

```
math.pow(1000, 1000) 
```

但是下面这个似乎有效，虽然我不知道返回的值是否正确

```
1000**1000 
```

任何人都知道为什么会发生这种情况

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T16:56:45.127

简单，该`math.pow()`方法使用 C 浮点库，而`**`幂运算符使用整数数学。

这两种方法有不同的局限性。Python`int`大小仅受操作系统允许 Python 拥有多少内存的限制，浮点数受计算机架构的限制，请参阅[`sys.float_info.max`](http://docs.python.org/2/library/sys.html#sys.float_info).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T16:56:31.263

[数学.pow](http://docs.python.org/3/library/math.html#math.pow)：

> 与内置`**`运算符不同，`math.pow()`将其两个参数都转换为 type `float`。使用`**`或 内置`pow()`函数来计算精确的整数幂。

# jsf - Liferay：根据视图模式以不同方式呈现 portlet 内容

> ID：15976896
> 
> 赞同：1
> 
> 时间：2013-04-12T16:55:08.043
> 
> 标签：jsf, liferay-6

当portlet 处于“正常模式”而不是“最大化模式”时，我希望显示不同的内容。我使用 JSF 作为视图技术。是否可以在 JSF 端执行检查以检查当前正在使用哪个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:00:13.577

我自己挖掘，我发现它`#{request.windowState}`可以根据当前视图为您提供正常、最大化或最小化。使用它，可以有多种解决方案：

1.  进行`#{request.windowState == 'normal'}`检查并有条件地显示内容。

2.  在我的主视图中使用`<ui:include src="#{request.windowState}.xhtml" />`，然后创建 normal.xhtml 和 minimized.xhtml ui:composition 文件。

# java - Eclipse Docking Windows 实现：Eclipse 是否在 Graphic Context 之上重新实现 Docking Windows 而不是使用原生的？

> ID：15976899
> 
> 赞同：2
> 
> 时间：2013-04-12T16:55:19.660
> 
> 标签：java, eclipse, gtk, swt, docking

我正在尝试在 GTK+ 上的应用程序中实现对接窗口，并决定在 GTK+ 上模仿它们在 SWT 中的实现。我对移动停靠子窗口以及在停靠窗口内的笔记本/TabFolders 之间创建和移动选项卡感兴趣。这是一个停靠窗口示例（用红框显示）：

![在此处输入图像描述](https://i.stack.imgur.com/NRXi2.png)

我研究了 CTabFolder 和 CTabItem 类家族，并在其中找到了笔记本功能的实现。唉，它是在原生（GTK+Cairo/Win32/Cocoa）图形基元之上的 GC（图形上下文）类的基本 2D 渲染能力之上从头开始执行的。

但这仅适用于CTabs 的[关闭/恢复/最大化/最小化](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/bundles/org.eclipse.swt/Eclipse%20SWT%20Custom%20Widgets/common/org/eclipse/swt/custom/CTabFolder2Adapter.java#n41)功能。我找不到拖动子窗口/停靠子窗口/调整子窗口大小功能的实现。你能指点我吗？

SWT 源码在线： http: [//git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/bundles/org.eclipse.swt/Eclipse%20SWT%20Custom%20Widgets/common/org/eclipse/ swt/自定义](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/bundles/org.eclipse.swt/Eclipse%20SWT%20Custom%20Widgets/common/org/eclipse/swt/custom)

提前致谢。

# javascript - @font-face 和 Raphael VML 文本路径字体系列

> ID：15976904
> 
> 赞同：0
> 
> 时间：2013-04-12T16:55:45.287
> 
> 标签：javascript, raphael, font-face

VML 文本路径是否支持`@font-face`字体系列？我正在尝试将此与 Raphael 集成，Raphael 将 Raphael VML 文本路径用于 IE 7/8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:36:45.450

是的，我测试了@font-face（使用谷歌网络字体）在 IE7-8 中工作。

# html - 突出显示表格单元格但没有填充区域

> ID：15976905
> 
> 赞同：2
> 
> 时间：2013-04-12T16:55:46.083
> 
> 标签：html, css, hover, padding

我有一个表格列，并且该表格列内还有其他 div。在鼠标悬停时，我想突出显示所有内容（其中的多个 div）。我已经完成了这项工作，但这是问题所在。

也有来自 4 个侧面的一些填充。当我应用 CSS :hover 效果时，我不希望填充区域受到影响。相反，应该突出显示除填充区域之外的 div 内的所有其他内容。

这是html

```
<table id="MyTable">
    <tr>
        <td style="padding:120px;">
            <div>SomeStuff</div>
            <div>SomeMoreStuff</div>
        </td>
    </tr>
</table> 
```

这是CSS

```
#MyTable td { /* added only for visualisation */
    border:1px solid red;
}
#MyTable td:hover {
    background: black;
} 
```

[JsFiddled 在这里](http://jsfiddle.net/t5QxJ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:02:46.547

**工作小提琴：http:** [//jsfiddle.net/9zzcY/](http://jsfiddle.net/9zzcY/)

将 HTML 更改为：

```
 <td style="padding:20px;">
   <div class="tdContentWrapper">
    <div>SomeStuff</div>
    <div>SomeMoreStuff</div>
   </div>
 </td> 
```

将 CSS 更改为：

```
#MyTable .tdContentWrapper:hover{
  background: black;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:18:44.237

尝试在您的设计中插入一个内部标记不会溢出填充。

```
<table id="MyTable">
    <tr>
        <td style="padding:120px;">
            <div class="inner-td">
                <div>SomeStuff</div>
                <div>SomeMoreStuff</div>
            </div>
        </td>
    </tr>
</table> 
```

并将样式应用于td:hover**上**的“inner-td”分隔线

[jsFiddle 在这里更新](http://jsfiddle.net/t5QxJ/1/)

```
#MyTable td { /* added only for visualisation */
    border:1px solid red;
}
#MyTable td:hover .inner-td {
    background: black;
} 
```

另外，请注意，许多旧浏览器**不完全支持****:hover 在元素以外的任何内容上。`<a>`**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T17:01:35.440

尝试这个

```
td:hover div{
//your code here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T17:00:51.837

将您的样式声明更改为：

```
td:hover div { 
```

# facebook - Facebook setExtendedAccessToken() 和 FB.Event.subscribe('auth.login')

> ID：15976910
> 
> 赞同：5
> 
> 时间：2013-04-12T16:56:05.907
> 
> 标签：facebook

我目前正在开发我的第一个 facebook 应用程序。我在将 setExtendedAccessToken() 函数与 FB.Event.subscribe('auth.login') 结合使用时遇到问题。

我的 js 代码如下所示：

```
window.fbAsyncInit = function() {

    // init the FB JS SDK
    FB.init({
      appId      : 'XXX', // App ID from the App Dashboard
      channelUrl : 'http://domain.tld/app/channel.php', // Channel File for x-domain communication
      frictionlessRequests: true,
      cookie: true, 
      xfbml: true
    });

    FB.Event.subscribe('auth.login', function(response) {
        $('#loginSpinner').show();
        $('#loginFacebook').hide();
        window.location = "http://domain.tld/app/?first_login";
    });      

}; 
```

该`auth.login`事件应仅在用户首次登录时触发。这个 PHP 代码也应该只在第一次登录时触发：

```
// triggers on first login
if (isset($_GET['first_login'])) {
    if ($me) {
        $facebook->setExtendedAccessToken();
        $friends = $facebook->api('/me/friends');
        $friends = $friends['data'];
        if (!empty($friends)) {
        //sql
        }
        $permissions = $facebook->api("/me/permissions");

        if( array_key_exists('publish_actions', $permissions['data'][0]) ) {
            $attachment = array(
                    'message' => 'XXX',
                    'name' => 'XXX - App',
                    'link' => 'http://domain.tld/app/',
                    'description' => 'XXX',
                    'picture'=> 'http://domain.tld/app/img.jpg',
                    'access_token' =>  $facebook->getAccessToken()
            );
            $facebook->api('/me/feed', 'POST', $attachment);

            //sql
        }
    }
    header('Location: http://domain.tld/app/');
    exit;
} 
```

问题是一个无限循环，它总是会调用`auth.login`，因为`setExtendedAccessToken()`会破坏当前会话，facebook 会自动将用户登录到我的应用程序。

有没有办法`auth.login`只触发一次？当我设置`setExtendedAccessToken()`为评论时

```
// $facebook->setExtendedAccessToken(); 
```

我的网站只按原样重定向用户一次。但我需要为我的应用程序扩展登录。

我之前的问题：[我的 WebApp（使用 facebook 登录）让我退出](https://stackoverflow.com/questions/15839713/my-webapp-using-facebook-login-logs-me-out)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:12:07.130

那么你为什么不这样做：

```
FB.Event.subscribe('auth.login', function(response) {
        //it will only redirect if the token expires in less than 02h13m20s
        if(response && response.authResponse.expiresIn < 8000){
        $('#loginSpinner').show();
        $('#loginFacebook').hide();
        window.location = "http://domain.tld/app/?first_login";
        }
    }); 
```

# repository - 将 Centos 6.4 DVD 1 复制到文件夹并将其用作 repo 可以，但 DVD 2 返回错误

> ID：15976919
> 
> 赞同：0
> 
> 时间：2013-04-12T16:56:26.630
> 
> 标签：repository, centos

我下载了 centos 6.4 dvd 的 1 和 2 第一个是 4.4 GB 第二个是 1.4 GB

显然第二个也有回购文件。

所以安装它们然后将它们复制到2个文件夹。

```
home/a/repo_dvd_1
home/a/repo_dvd_2 
```

然后我将它们添加到回购

我只是编辑了 CentOS_Base.repo 或任何该文件的名称。

我将“启用= 0”添加到所有内容并将它们放在首位

```
[01]
name=01
baseurl=file:///home/a/repo_dvd_1
enabled=1
gpgcheck=0

[02]
name=01
baseurl=file:///home/a/repo_dvd_2
enabled=1
gpgcheck=0 
```

然后我跑了

```
yum clean all 
```

然后我尝试搜索`php`

```
yum search php 
```

这是结果。

```
[root@localhost a]# yum clean all
Loaded plugins: fastestmirror, refresh-packagekit, security
Cleaning repos: 01 02
Cleaning up Everything
Cleaning up list of fastest mirrors
[root@localhost a]# 
[root@localhost a]# yum search php
Loaded plugins: fastestmirror, refresh-packagekit, security
Determining fastest mirrors
01                                                       | 4.0 kB     00:00 ... 
01/primary_db                                            | 4.4 MB     00:00 ... 
file:///home/a/repo_dvd_2/repodata/repomd.xml: [Errno 14] Could not open/read file:///home/a/repo_dvd_2/repodata/repomd.xml
Trying other mirror.
Error: Cannot retrieve repository metadata (repomd.xml) for repository: 02\. Please verify its path and try again 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T18:23:46.567

我知道这是一个旧线程，但我只是来这里寻找完全相同的解决方案。

过了一会儿，我自己弄明白了：如果你想从 DVD1 和 DVD2 制作一个 repo（而不用'createrepo'弄脏你的手），你只需要复制 DVD2 rpms（从它的'Packages'子目录）到复制 DVD1 rpms 的同一目录（如果您尊重树，则为“包”，您应该这样做）。就是这个：

1.  将 DVD2 iso 挂载到一个目录中：

    > mount -o loop CentOS-6.4-x86_64-bin-DVD2.iso somedir

2.  将“Packages”子目录中的所有 rpm 复制到您首先复制 DVD1 包的目录（根据原始海报的帖子，“home/a/repo_dvd_1/Packages”）：

    > cp somedir/Packages/*.rpm home/a/repo_dvd_1/Packages

3.  去掉 .repo 文件中的 DVD2 部分（原始帖子中的 [02]），只留下 DVD1 的 [01]，因为 DVD1 中的 rpm 列表实际上包含 DVD2 的那些。

现在 DVD2 rpm 将从 DVD1 存储库中提取。

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T12:19:19.237

我用另一种方式做到了。

例如，您可以安装两个图像

```
mkdir myrepo myrepo/dvd1 myrepo/dvd2; 
cd myrepo
mount -o loop CentOS-6.4-x86_64-bin-DVD1.iso dvd1
mount -o loop CentOS-6.4-x86_64-bin-DVD2.iso dvd2 
```

并使用 createrepo 脚本创建自己的 repo 配置，但如果直接调用它，您将丢失组配置，在第一次 dvd 上查看文件 repomd.xml，有数据类型组部分，具有奇怪的 xml 文件名，其中包含组映射，因此您可以调用：

```
createrepo -g dvd1/repodata/2727fcb43fbe4c1a3588992af8c19e4d97167aee2f6088959221fc285cab6f72-c6-x86_64-comps.xml . 
```

当然，请检查此哈希名称是否适合您的版本。这将重新扫描 iso 内容并在 myrepo 目录中创建 repodata，因此将 yum 指向它

这可能不是最整洁的解决方案，但对我来说是最快的方法。

# drupal - drupal 7：如何访问列表字段的键而不是其标签（字段 api）

> ID：15976921
> 
> 赞同：2
> 
> 时间：2013-04-12T16:56:33.287
> 
> 标签：drupal, drupal-7, drupal-theming

我正在研究一个自定义主题并用谷歌搜索了一整天，但找不到我的问题的答案：

如何打印出 cck 列表字段的键而不是其标签？

我认为这是通过字段 api 访问字段的正确方法，对吗？所以我尝试

```
$output = field_view_field('node', $node, 'field_list');
print render($output); 
```

这似乎是获取键|标签对的标签值的方法。但即使我将显示选项格式设置为“键” - 它也只会打印标签值。我究竟做错了什么？

我知道还有其他选项可以呈现密钥，但是如何使用字段 api 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:22:13.740

您可以使用以下方法获取字段值本身（这将是允许的值数组键）[`field_get_items()`](http://api.drupal.org/api/drupal/modules!field!field.module/function/field_get_items/7)：

```
$items = field_get_items('node', $node, 'field_list');
$key = $items[0]['value']; 
```

如果您需要在任何时候再次匹配它们，您可以从字段元数据中获取完整的键/值列表：

```
$info = field_info_field('field_list');
$values = $info['settings']['allowed_values'];
$label = $values[$key]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-06T18:00:39.973

这里有一个类似的方法。此示例适用于具有 ISO 代码的国家/地区列表。这个想法是呈现被选择的国家名称，因为转储只返回密钥（在这种情况下是 iso 代码）

后端选择列表的格式：

```
AR|Argentina
US|United States 
```

假设您在后端选择了美国，并且您想在节点模板上打印国家名称：

```
$country_field = field_info_field('field_country_iso');
$country_iso = $node->field_country_iso[LANGUAGE_NONE][0]['value'];
$country_name = $country_field['settings']['allowed_values'][$country_iso]; 
```

然后

```
print $country_name; // This will return United States, not US code 
```

我希望这有帮助。

# c# - 是否有提供像 numpy 这样的数组操作的 ac# 库

> ID：15976925
> 
> 赞同：16
> 
> 时间：2013-04-12T16:56:37.627
> 
> 标签：c#, arrays, numpy

我开始使用 Numpy 并且非常喜欢它的数组处理能力。是否有一些我可以在 C# 中使用的库，它提供与数组类似的功能。我最想要的功能是：

*   从另一个数组创建一个数组
*   n维数组的简单/繁琐迭代
*   数组切片

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T17:00:13.507

NumPY 已通过 IronPython 移植到 .NET。[在此处](http://pytools.codeplex.com/wikipage?title=NumPy%20and%20SciPy%20for%20.Net)查找主页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:59:24.250

我认为你不需要图书馆。我认为 LINQ 可以很好地完成您提到的所有内容。

# 从另一个数组创建一个数组

```
int[,] parts = new int[2,3];

int[] flatArray = parts.ToArray();
// Copying the array with the same dimensions can easily be put into an extension 
// method if you need it, nothing to grab a library for ... 
```

# 轻松迭代

```
int[,] parts = new int[2,3];

foreach(var item in parts)
    Console.WriteLine(item); 
```

# 数组切片

```
int[] arr = new int[] { 2,3,4,5,6 };
int[] slice = arr.Skip(2).Take(2).ToArray();

// Multidimensional slice 
int[,] parts = new int[2,3];
int[] slice = arr.Cast<int>().Skip(2).Take(2).ToArray(); 
```

最后一个示例中的尴尬`.Cast<int>`是[由于 C# 中的多维数组 is only`IEnumerable`和 not`IEnumerable<T>`](https://stackoverflow.com/questions/275073/why-does-c-sharp-multidimensional-arrays-not-implement-ienumerablet)的怪癖。

# c# - 带有参数和 STDOUT 重定向的 Windows 任务计划程序作业

> ID：15976931
> 
> 赞同：5
> 
> 时间：2013-04-12T16:57:00.677
> 
> 标签：c#, windows, scheduled-tasks

我有一个命令行程序，它不需要参数或一个参数。如果没有提供参数，它会使用简单的代码提示输入参数，例如：

```
String theParameter = String.Empty;
if (args.Length == 1) theParameter = args[0];
else {
    Console.Write("Please provide theParameter: ");
    theParameter = Console.ReadLine();
}
Console.WriteLine("Some Output"); 
```

它以交互方式按预期工作：

```
> myprogram
Please provide theParameter:
{a value provided}
Some Output 
```

或者

```
> myprogram SomeValue
Some Output 
```

或者

```
> myprogram SomeValue > results.log
{Some Output in the results.log file) 
```

一切都按预期工作。

同样，当我使用 Windows 7 任务计划程序时，`myprogram SomeValue`它会按预期启动、执行和完成。

但是，当我使用`myprogram SomeValue > results.log`将 STDOUT 重定向到一个文件时，它会启动、运行并且永远不会完成。如果我手动运行作业（通过右键单击并从任务计划程序运行），它会抛出一个带有`Please provide the Parameter`.

我的问题是：如果我将 STDOUT 重定向到文件，为什么 Windows 任务计划程序作业会短路我的参数被传递给程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-19T13:07:40.647

输出重定向[可能会也可能不会与 Windows 任务计划程序一起使用](https://social.technet.microsoft.com/Forums/windows/en-US/985ce84c-ac55-4fe8-b652-259d5373f747/redirect-script-output-to-file-in-task-scheduler?forum=winserverpowershell)。解决方法是在批处理文件中运行所需的命令（包括输出重定向），并从任务计划程序调用批处理文件。

```
script.bat
----------
myprogram SomeValue > results.log 
```

# python - 让我的 NumPy 数组跨进程共享

> ID：15976937
> 
> 赞同：12
> 
> 时间：2013-04-12T16:57:16.870
> 
> 标签：python, numpy, multiprocessing, shared-memory

我已经阅读了很多关于共享数组的关于 SO 的问题，对于简单的数组来说似乎很简单，但我一直试图让它适用于我拥有的数组。

```
import numpy as np
data=np.zeros(250,dtype='float32, (250000,2)float32') 
```

我尝试通过尝试以某种方式`mp.Array`接受将其转换为共享数组`data`，我还尝试使用 ctypes 来创建数组：

```
import multiprocessing as mp
data=mp.Array('c_float, (250000)c_float',250) 
```

我设法让我的代码正常工作的唯一方法不是将数据传递给函数，而是传递一个编码字符串以进行解压缩/解码，但这最终会导致 n （字符串数）进程被调用，这似乎是多余的。我想要的实现是基于将二进制字符串列表切成 x （进程数）并将这个块传递给除了在本地修改之外工作`data`的`index`进程`data`，因此关于***如何使其共享***的问题，任何示例工作使用自定义（嵌套）numpy 数组已经很有帮助。

[PS：这个问题是Python 多处理](https://stackoverflow.com/q/15966157/1093485)的后续问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T17:59:16.660

请注意，您可以从复杂 dtype 的数组开始：

```
In [4]: data = np.zeros(250,dtype='float32, (250000,2)float32') 
```

并将其视为同质 dtype 的数组：

```
In [5]: data2 = data.view('float32') 
```

稍后，将其转换回复杂的 dtype：

```
In [7]: data3 = data2.view('float32, (250000,2)float32') 
```

更改 dtype 是一个非常快速的操作；它不会影响基础数据，只会影响 NumPy 解释它的方式。所以改变 dtype 几乎没有成本。

因此，您所阅读的有关具有简单（同质）dtype 的数组的内容可以很容易地通过上述技巧应用于您的复杂 dtype。

* * *

[下面的代码从JF Sebastian 的答案](https://stackoverflow.com/a/7908612/190597)中借用了许多想法，here 。

```
import numpy as np
import multiprocessing as mp
import contextlib
import ctypes
import struct
import base64

def decode(arg):
    chunk, counter = arg
    print len(chunk), counter
    for x in chunk:
        peak_counter = 0
        data_buff = base64.b64decode(x)
        buff_size = len(data_buff) / 4
        unpack_format = ">%dL" % buff_size
        index = 0
        for y in struct.unpack(unpack_format, data_buff):
            buff1 = struct.pack("I", y)
            buff2 = struct.unpack("f", buff1)[0]
            with shared_arr.get_lock():
                data = tonumpyarray(shared_arr).view(
                    [('f0', '<f4'), ('f1', '<f4', (250000, 2))])
                if (index % 2 == 0):
                    data[counter][1][peak_counter][0] = float(buff2)
                else:
                    data[counter][1][peak_counter][1] = float(buff2)
                    peak_counter += 1
            index += 1
        counter += 1

def pool_init(shared_arr_):
    global shared_arr
    shared_arr = shared_arr_  # must be inherited, not passed as an argument

def tonumpyarray(mp_arr):
    return np.frombuffer(mp_arr.get_obj())

def numpy_array(shared_arr, peaks):
    """Fills the NumPy array 'data' with m/z-intensity values acquired
    from b64 decoding and unpacking the binary string read from the
    mzXML file, which is stored in the list 'peaks'.

    The m/z values are assumed to be ordered without validating this
    assumption.

    Note: This function uses multi-processing
    """
    processors = mp.cpu_count()
    with contextlib.closing(mp.Pool(processes=processors,
                                    initializer=pool_init,
                                    initargs=(shared_arr, ))) as pool:
        chunk_size = int(len(peaks) / processors)
        map_parameters = []
        for i in range(processors):
            counter = i * chunk_size
            # WARNING: I removed -1 from (i + 1)*chunk_size, since the right
            # index is non-inclusive. 
            chunk = peaks[i*chunk_size : (i + 1)*chunk_size]
            map_parameters.append((chunk, counter))
        pool.map(decode, map_parameters)

if __name__ == '__main__':
    shared_arr = mp.Array(ctypes.c_float, (250000 * 2 * 250) + 250)
    peaks = ...
    numpy_array(shared_arr, peaks) 
```

如果你能保证执行任务的各个进程

```
if (index % 2 == 0):
    data[counter][1][peak_counter][0] = float(buff2)
else:
    data[counter][1][peak_counter][1] = float(buff2) 
```

永远不要竞争更改相同位置的数据，那么我相信您实际上可以放弃使用锁

```
with shared_arr.get_lock(): 
```

但是我对您的代码的理解还不够好，无法确定，因此为了安全起见，我将锁包括在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T09:42:11.693

```
from multiprocessing import Process, Array
import numpy as np
import time
import ctypes

def fun(a):
    a[0] = -a[0]
    while 1:
        time.sleep(2)
        #print bytearray(a.get_obj())
        c=np.frombuffer(a.get_obj(),dtype=np.float32)
        c.shape=3,3
        print 'haha',c

def main():
    a = np.random.rand(3,3).astype(np.float32)
    a.shape=1*a.size
    #a=np.array([[1,3,4],[4,5,6]])
    #b=bytearray(a)
    h=Array(ctypes.c_float,a)
    print "Originally,",h

    # Create, start, and finish the child process
    p = Process(target=fun, args=(h,))
    p.start()
    #p.join()
    a.shape=3,3
    # Print out the changed values
    print 'first',a
    time.sleep(3)
    #h[0]=h[0]+1
    print 'main',np.frombuffer(h.get_obj(), dtype=np.float32)

if __name__=="__main__":
    main() 
```

# c++ - 使用“make”构建 c++ 程序时忽略 -g 选项

> ID：15976943
> 
> 赞同：0
> 
> 时间：2013-04-12T16:57:52.843
> 
> 标签：c++, debugging, gcc, makefile, gdb

不幸的是，我不记得第一次发生这种情况是什么时候，但最近我在运行“make”来构建程序时发现了一个奇怪的错误。

我有以下生成文件：

```
SOURCE = Foo.cpp \
         Foobar.cpp

OBJECTS = $(SOURCE:.cpp=.o)
LIBS = -lX11 -lGL -lGLU

program: $(OBJECTS)
    g++ $(OBJECTS) $(LIBS) -o platform

.o: .cpp
    g++ -g -c $@ 
```

烦人的是，当我运行 make 时，我得到：

```
$ make
g++    -c -o Foo.o Foo.cpp
g++    -c -o Foobar.o Foobar.cpp
g++ Foo.o Foobar.o -lX11 -lGL -lGLU -o program 
```

“-g”选项被忽略。有谁知道为什么会这样？有趣的是，我尝试在终端中手动输入命令：

```
$ g++ -g -c Foo.cpp
$ g++ -g -c Foobar.cpp
$ make
g++ Foo.o Foobar.o -lX11 -lGL -lGLU -o program 
```

它按预期工作，我可以正确使用 gdb 之类的程序，所以它似乎不是 C++/gcc 问题，我对 makefile 没有丰富的经验，但我读过的示例或教程似乎都没有消失选项的任何问题，似乎没有任何关于它的帖子。我只是做了一些愚蠢的事情而没有意识到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:04:23.947

构建目标文件的规则是错误的，它缺少`%`：

```
%.o: %.cpp
    g++ -g -c $< 
```

# dynamics-crm-2011 - 调用 MSCRM Dynamics 本地登录 API

> ID：15976947
> 
> 赞同：0
> 
> 时间：2013-04-12T16:58:07.687
> 
> 标签：dynamics-crm-2011

我正在尝试实现 SOAP 调用以从 MS CRM Dynamics 中提取和推送信息，但我找不到任何 WSDL 或示例调用。

有谁知道我在哪里可以找到对 MSCRM Dynamics 的示例 SOAP 登录调用？或下载 WSDL 以在 SOAP UI 中上传？

谢谢，尼特什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:08:14.670

为 MSCRM 调用获取 SOAP 的最简单方法是使用诸如[Fiddler](http://fiddler2.com/)之类的工具，或者使用 CRM SDK 中的[SoapLogger 解决方案](http://msdn.microsoft.com/en-us/library/gg594434.aspx#BKMK_CaptureHTTPTraffic)将生成的 SOAP 写入文件。

# python - OpenERP 7 菜单项组

> ID：15976949
> 
> 赞同：0
> 
> 时间：2013-04-12T16:58:12.407
> 
> 标签：python, xml, openerp

我为我的模型创建了安全部分。为此，我创建了 ir.model.access.csv 文件/bpl_security.xml 并在**openerp** .py 中映射了这些文件。最后，我向用户添加了对 menuitems 的限制

但是双方的菜单都没有显示。我已经创建了用户和经理，并在我的 csv 文件中创建了用户并标记了他们。请检查我的代码并建议我这样做

[这](https://github.com/priyankahdp/openerp.git)是我上传的整个代码

> 请参见 bpl_view.xml 中的第 705 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:25:15.613

我检查了您的代码，发现错误在您的**openerp** .py 文件中。请将您的**openerp** .py 文件中的代码更改为以下内容

```
{
    'name': 'ERP System',
    'author': 'Bellvantage (Pvt) Ltd',
    'version': '1.0',
    'depends': ['base', 'hr'],
    'category' : 'Production',
    'summary': 'ERP Information System for Plantation Industry',
    'description': """
    """,
    'data': ['bpl_security.xml',
             'ir.model.access.csv',
             'bpl_worker_registration_sequence.xml',
             'bpl_view.xml',
             ],
    'css':[],
    'images': [],
    'demo': [],
    'installable': True,
    'application' : True,
    'certificate' : '',
    'images': [],
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:21:47.333

正如用户 Anoma 所说，openerp .py 文件中有问题**，**正如我看到你的代码，你写的像

```
'data': [
             'bpl_worker_registration_sequence.xml',
             'bpl_view.xml',
             'security/bpl_security.xml',
             'security/ir.model.access.csv'], 
```

正如我在之前的回答中所说，将 bpl_security.xml,ir.model.access.csv 放在安全文件夹中，然后更改**openerp** .py 文件。

所以请在你的模块 bpl 中创建一个**安全文件夹。**

喜欢

```
bpl
----security
    ---- bpl_security.xml
    ---- ir.model.access.csv 
```

所以你的结构必须像上面描述的那样

# visual-studio-2010 - MFC 中的 libmodbus

> ID：15976951
> 
> 赞同：1
> 
> 时间：2013-04-12T16:58:34.080
> 
> 标签：visual-studio-2010, build, mfc, compilation, modbus

我正在尝试将 libmodbus 提供的 modbus 库集成到 Visual Studio 2010 中的自定义 MFC 项目中。

到目前为止，我遵循的步骤如下：

1) 我在 Visual Studio 2010 中创建了项目，如下面的快照所示：

![图1](https://i.stack.imgur.com/hyPV1.jpg)

![图2](https://i.stack.imgur.com/Ul6cw.jpg)

![图3](https://i.stack.imgur.com/0W1dE.jpg)

2）我已经编辑了代码以包含一个小的 hello world 代码，只是为了检查它是否可以编译。

![图4](https://i.stack.imgur.com/9zpWP.jpg)

3) 我已将 libmodbus-3.0.3 的 src 文件夹中的 .c 和 .h 文件复制到 Visual Studio 项目文件夹中，如下所示，并将它们包含在项目中。

![图5](https://i.stack.imgur.com/jKrpB.jpg)

![图6](https://i.stack.imgur.com/e4Tqu.jpg)

4）当我尝试编译时，它给了我以下错误：

![图7](https://i.stack.imgur.com/TvnyA.jpg)

我的疑惑如下：

1) 我是否在我的项目中正确包含了 libmodbus？还是有更好或更正确的方法来做同样的事情？

2）如何消除即将出现的错误：无法打开包含文件：'config.h'。没有这样的文件或目录。[我已经看到我从http://libmodbus.org/download/](http://libmodbus.org/download/)
下载的 libmodbus-3.0.3 中没有 config.h 文件 如何继续？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T14:31:34.827

最新版本的 libmodbus 提供 Visual Studio 项目文件。

[https://github.com/stephane/libmodbus/tree/master/src/win32](https://github.com/stephane/libmodbus/tree/master/src/win32)

# php - 从 MySQL 查询将多个列值存储到 PHP 数组中

> ID：15976966
> 
> 赞同：0
> 
> 时间：2013-04-12T16:59:31.373
> 
> 标签：php, mysql, arrays

我目前有一个数组，它存储数据库中一列的值，并且工作正常，但是我想存储多个列值。因此，在我的示例中，我希望将一个团队及其场地存储在同一个数组索引中。我似乎找不到办法做到这一点。

如果有人可以提供帮助，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:09:47.267

你的意思是这样的吗？

```
$i = 0;
$my_array = array();

while ($row = mysql_fetch_assoc($result))
{
    $my_array[$i]['name'] = $row['names'];
    $my_array[$i]['otherfield'] = $row['otherfield'];
    $i++;
} 
```

现在你可以做这样的事情

```
echo $my_array[2]['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:30:38.487

只需这样做：

```
$rows = [];
while($row = mysql_fetch_assoc($result)) {
    $rows[] = $row;
} 
```

# javascript - 动态创建 HTML 表单

> ID：15976969
> 
> 赞同：0
> 
> 时间：2013-04-12T16:59:49.933
> 
> 标签：javascript, html, forms, google-maps

我正在创建一个带有谷歌地图窗口的网页，它是 JavaScript 和 HTML 格式的。我想知道，每次用户单击地图中的新点时，我可以创建一个新的 HTML 表单吗？我一直在网上寻找，并且很难找到任何关于此的内容，如果有人能指出我正确的方向，那就太棒了。

每次用户点击地图上的一个点时，它都会创建一个航路点，我希望页面上弹出几个新表单，以便用户可以输入与之关联的信息（如名称、描述等）他们刚刚创建的航路点。我还希望每个表单旁边有一个按钮，当用户输入航路点事故时，单击该按钮将删除它。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:41:22.700

一种方法是使用 div 标签来包含表单，然后使用 JavaScript 在字符串中构建新表单，然后使用新表单更新 div 的内容（使用 .innerHTML 属性）。

```
<div id="divForms"></div> 
```

```
string newForm = "<input type='text' id='txtName1' />";

document.getElementById("divForms").innerHTML = newForm; 
```

# jquery - 如何使用 jquery 删除和隐藏？

> ID：15976970
> 
> 赞同：0
> 
> 时间：2013-04-12T16:59:53.510
> 
> 标签：jquery, hide

有人可以告诉我如何使用 jquery 删除和隐藏事件吗？实际上，目前我正在使用 jquery bellow 并且它工作正常，但它只是删除了事件但没有隐藏它请你能为我修改它吗？

```
function delData(id){
    if(confirm('Do you really want to delete it ? if yes then click OK and wait for next notification please.. ')){
        $.ajax({
            type:'POST', 
            url:'manage_reports.php?action=del&id='+id, 
            success:function(result){
                alert('Sale has been deleted successfully.. Do not refresh your page if you want to keep stay here');
                $(control).parents('table').eq(0).remove().hide("table");
            }
        });      
    }
}; 
```

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:01:06.647

您不能`hide`仅使用`hide`或删除已删除的项目`remove`，如果要删除其他元素，请单独执行。[hide](http://api.jquery.com/hide/)不接受您可能试图传递的选择器，它接受一个参数，但它的选项不是选择器。

```
function delData(id){
    if(confirm('Do you really want to delete it ? if yes then click OK and wait for next notification please.. ')){
         $.ajax({
              type:'POST', 
              url:'manage_reports.php?action=del&id='+id,
              success:function(result){
                  alert('Sale has been deleted successfully.. Do not refresh your page if you want to keep stay here');
                  $(control).parents('table').eq(0).remove();
          }});
}}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:05:21.313

如果说“删除事件”是指使诸如“鼠标单击”之类的事件处于非活动状态，那么我建议您首先使用绑定创建/绑定该事件或在该元素上生存

完成 ajax 请求后，只需删除/隐藏元素并在其上调用 .unBind('event') 即可。

# powershell - 使用 :\ 获取位置

> ID：15976971
> 
> 赞同：2
> 
> 时间：2013-04-12T16:59:51.780
> 
> 标签：powershell, powershell-2.0

我想获取 CD 驱动器的当前驱动器号并附`:\`加到它。

我在想类似的东西

```
$test = (get-location).drive.name
$test2 = ":\"
$test = $test + $test2 
```

那么，`$test`将等于`p:\`

然而，这似乎不是很有效，有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:04:18.233

怎么样

```
(get-location).drive.root 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:20:04.970

如果您已经位于 CD 驱动器中，这一切都是正确的。这是另一种方法：

```
(Get-WmiObject Win32_CDRomDrive).Drive+'\' 
```

# css - 我什么都试过了！显示：内联在 IE 上不起作用

> ID：15976972
> 
> 赞同：0
> 
> 时间：2013-04-12T16:59:55.267
> 
> 标签：css, html, internet-explorer

我对 HTML5 很陌生，我被卡住了。 [这是我正在编码的网站。](http://www.tolgatoykoc.com/bs-html5/)在 Chrome、Firefox 和 Safari 中都可以。但是在IE中存在很多问题。但我会问最烦人的一个问题：我无法让菜单项在 IE 中保持内联。在你问之前，是的，我已经尝试了几十种在互联网上写的不同的解决方案，但都没有成功。

这是我的CSS代码：

```
#wrap{
margin: auto;
position: absolute;
bottom:0px;
width: 915px;
left:0;
right:0;}

nav{ 
text-align:center;
margin-bottom:-4px;}

nav ul li {
display: inline-block;
zoom: 1;
*display: inline;

background-color: rgba(255, 255, 255, 0.5);
-webkit-border-top-left-radius: 10px;
-webkit-border-top-right-radius: 10px;
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4); 
-moz-border-top-left-radius: 10px;
-moz-border-top-right-radius: 10px;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4); 
border-top-left-radius: 10px;
border-top-right-radius: 10px;
box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4); 
-webkit-transition-property: background-color;
-webkit-transition-duration: 0.5s;
-webkit-transition-timing-function: linear;
-moz-transition-property: background-color;
-moz-transition-duration: 0.5s;
-moz-transition-timing-function: linear;
transition-property: background-color;
transition-duration: 0.5s;
transition-timing-function: linear;}

nav ul li:hover {
background-color: rgba(255, 255, 255, 1);}

nav ul li a {
color:#8F8F8F; text-decoration:none; 
-webkit-transition-property: color;
-webkit-transition-duration: 0.5s;
-webkit-transition-timing-function: linear;
-moz-transition-property: color;
-moz-transition-duration: 0.5s;
-moz-transition-timing-function: linear;
transition-property: color;
transition-duration: 0.5s;
transition-timing-function: linear;}

nav ul li a:hover {color:#000;} 
```

这是 HMTL：

```
 <div id="wrap">
    <nav>
        <ul>
            <li style="padding: 8px 25px 10px 25px;"><a style="color:#000"><h2>BS Création</h2></a></li>
            <li style="padding: 8px 25px 10px 25px;"><a href="tasarimlar.htm"><h2>tasarımlar</h2></a></li>
            <li style="padding: 8px 25px 10px 25px;"><a href="custom.htm"><h2>kişiye özel</h2></a></li>
            <li style="padding: 8px 25px 10px 25px;"><a href="magaza.htm"><h2>mağaza</h2></a></li>
            <li style="padding: 8px 25px 10px 25px;"><a href="contact.htm"><h2>iletişim</h2></a></li>
            <li style="padding: 8px 10px 10px 10px;"><a href="http://www.facebook.com/bscreation"><img  src="img/facebook.png" width="15" height="15"></a>
        </ul>               
    </nav>
    </div> 
```

谁能帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:08:01.263

IE6-8 无法识别 HTML5 元素，例如`nav`. 您需要将它们“注册”到这些 IE，以便您可以在它们上使用 css 选择器。看看[这个 SO question](https://stackoverflow.com/questions/3621435/how-can-i-make-ie-recognize-html-5-tags)或[这篇](http://www.standardista.com/making-ie-recognize-html5-elements/)关于如何实现这一点的文章。

此外，您应该不惜一切代价避免内联样式。将它们放在您的外部 css 中，因为您已经有了一个。

# c - 有效地使用具有不同大小内部数组的 C 结构？

> ID：15976974
> 
> 赞同：0
> 
> 时间：2013-04-12T16:59:59.567
> 
> 标签：c, arrays, static, struct, size

我已经嵌入了带有结构和相关“机器”的 C 代码，用于在中断（填充缓冲区）和用户代码（清空缓冲区）之间实现乒乓缓冲方案。该结构由两个缓冲区和一些管理数据组成，如下所示：

```
#define PINGPONG_BUF_SIZE 1024

 typedef struct
 {
     volatile unsigned char active_buf; // 0: buf0, 1: buf1
     volatile unsigned int idx;
    // [...misc. other management data snipped...]

    union
     {
         volatile uint16_t asInt[PINGPONG_BUF_SIZE/2];
         volatile char asChar[PINGPONG_BUF_SIZE];
     }buf0;

     union
     {
         volatile uint16_t asInt[PINGPONG_BUF_SIZE/2];
         volatile char asChar[PINGPONG_BUF_SIZE];
     }buf1;
 } pingpong; 
```

“机械”由带有指向“乒乓球”的指针的函数组成，例如 pp_write_sample(pingpong * buf, uint16_t data)。

到目前为止很容易。现在我想回收那个“机器”来处理具有不同静态缓冲区大小（在编译时设置）的多个这样的乒乓结构。缓冲区大小可以作为管理数据的一部分存储，并且结构的管理部分的大小将始终相同。最干净的方法是什么？

它适用于内存非常有限的嵌入式系统，因此创建最大大小的缓冲区并且“不使用所有缓冲区”不是解决方案。如果可能的话，避免动态分配也很好（如果它甚至可用于该平台）。

请注意，我对在运行时动态分配或调整任何内容不感兴趣，只能在编译时以最少的复制+粘贴代码或其他丑陋来定义不同大小的“乒乓球”。我能想到的一些方法是使 buf0/buf1 指针指向已单独分配的缓冲区（有点难看），或者创建单独的例如'pingpong2048'，'pingpong_tiny'，......结构并将它们转换为'pingpong'每次使用它们（也很丑），但我想知道是否有更好的方法我不知道邻接。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:07:48.903

我假设这是直接的 C 并且类型安全规则相当宽松，没有类开销等......

所以......你可以声明你的不同结构并给它们一个共同的标题......

```
struct ManagementHeader 
{ 
    ... 
}; 
```

然后声明您的不同消息类型...

```
struct MessageType1
{ 
    ManagementHeader header; 
    SomeData body;
}

struct MessageType2
{
    ManagementHeader header;
    SomeOtherData body;
}

union PingPongMessage
{
    ManagementHeader header;
    MessageType1     type1;
    MessageType2     type2;
} 
```

现在您可以分配消息类型 1 或消息类型 2 并将其作为指向 PingPongMessage 的指针传递给 ping-pong，检查 PingPongMessage 的标头以确定消息类型是什么并使用 type1 或 type2 消歧属性来访问字段. 因此，您没有动态分配不断变化的块大小，也没有分配 PingPongMessage 并浪费大量空间，但您可以使用 PingPongMessage 作为进程的接口。

# ios - Cocos2d 和 UIImageView 哪个更适合 PNG 动画？

> ID：15976978
> 
> 赞同：0
> 
> 时间：2013-04-12T17:00:16.927
> 
> 标签：ios, animation, cocos2d-iphone, uiimageview

我需要运行一系列全屏 PNG，我想知道使用 UIImageView 动画或 Cocos2d 动画哪个会更优化（我不能在 Cocos2d 中使用精灵表，因为 PNG 太大）所以只是运行通过动画制作单个 PNG 会是更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:58:08.330

尝试使用 .pvr.ccz 格式（而不是 PNG），尤其是在逐帧加载时运行动画的上下文中。AFAI 知道（已测量），该格式的加载性能是最好的。此外，它往往会缩小应用程序包的大小。

如果您使用 TexturePacker，您将能够使用 NPOT 纹理轻松完成此操作（有利于“核心”内存消耗）。

# android - Android 中的 AFSK 解调

> ID：15976979
> 
> 赞同：2
> 
> 时间：2013-04-12T17:00:24.003
> 
> 标签：android, signal-processing

我正在使用此功能在 Android 中调制自己的 AFSK 信号

```
public static double[] MyFSK(char bit) //bit 1 or 0
{
    double[] a = new double[SamplesPerBit]; // SamplesPerBit =  44100 / 1200 (baudrate)
    for (int i = 0; i < a.length ; i++)
    {           
        if(bit == '1')
            a[i] = Math.sin(2 * Math.PI * i * C.FreqHigh / SamplesRate);
        else
            a[i] = Math.sin(2 * Math.PI * i * C.FreqLow / SamplesRate);
    }
    return a;
} 
```

现在我的问题是解调部分，我成功地使用了 FFT 算法找到了频率，但是 FFT 的缺点是它需要很长的数据流（1024-2048 个样本）才能找到频率，这导致波特率非常低。

那么有没有更合适的方法来找到具有较低样本数的频率？让我处理 1200 波特？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T08:01:05.030

对于您的用例，Goertzel 的算法需要的样本少得多，并且比 FFT 的性能更高。它可用于区分两个或多个已知频率。这是关于它的PDF（包括代码示例）...

[http://www.cs.washington.edu/education/courses/cse466/12au/calendar/Goertzel-EETimes.pdf](http://www.cs.washington.edu/education/courses/cse466/12au/calendar/Goertzel-EETimes.pdf)

# hadoop - Hadoop MapReduce 迭代 reduce 调用的输入值

> ID：15976981
> 
> 赞同：1
> 
> 时间：2013-04-12T17:00:28.620
> 
> 标签：hadoop, mapreduce

我正在测试一个简单的 mapreduce 应用程序，但我有点难以理解当我迭代 reduce 调用的输入值时会发生什么。

这是一段行为奇怪的代码..

```
public void reduce(Text key, Iterable<E> values, Context context)
    throws IOException, InterruptedException{

    Iterator<E> iterator = values.iterator();
    E first = (E)statesIter.next();

    while(statesIter.hasNext()){
        E state = statesIter.next();

        System.out.println(first.toString());
        // some other stuff
    }
    // some other stuff
} 
```

所以没什么奇怪的......除了每个 println 调用实际上打印一个不同的字符串这一事实。因此，每次我调用该`next()`方法时，所引用的对象都会`first`发生变化。

那么为什么会出现这种奇怪的行为呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T17:07:58.250

这有点违反直觉，但它实际上[记录在 API 文档中](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapred/Reducer.html#reduce%28K2,%20java.util.Iterator,%20org.apache.hadoop.mapred.OutputCollector,%20org.apache.hadoop.mapred.Reporter%29)——Hadoop 重用键/值，如果你想保留它们，你应该克隆它们。

# svg - 使用内容脚本注入 SVG 图像

> ID：15976993
> 
> 赞同：0
> 
> 时间：2013-04-12T17:01:02.090
> 
> 标签：svg, google-chrome-extension

我有一个 chrome 扩展，它使用内容脚本将 JavaScript 注入页面，我希望该脚本将 SVG 图像添加到页面。这是我正在使用的代码：

```
var url = chrome.extension.getURL('infotip.svg');
$('#elementId').append('<embed src="' + url +
    '" type="image/svg+xml" style="display: block; float: right;" />'); 
```

当我检查生成的 DOM 时，SVG 文件的 URL 设置正确（我可以在元素检查器的新选项卡中打开它并且它可以工作）但在实际页面中，而不是 SVG，我得到一个带有 Chrome 警告的框：

> **位于chrome-extension://invalid/**的网页可能暂时关闭，或者它可能已永久移动到新网址。
> 
> 错误 2 (net::ERR_FAILED)：未知错误。

我已经尝试按照[W3Schools](http://www.w3schools.com/svg/svg_inhtml.asp)甚至 <img> 使用 <embed> 和 <object>。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-12-17T00:35:09.593

您必须在 manifest.json 中添加 Web 可访问资源

```
{
    "web_accessible_resources": [
        "infotip.svg"
    ]
} 
```

参考：[web_accessible_resources](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources)，[在 chrome 扩展中插入图像](https://stackoverflow.com/questions/11804332/insert-an-image-in-chrome-extension)