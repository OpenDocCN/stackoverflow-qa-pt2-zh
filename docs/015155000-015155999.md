# StackOverflow 问答 15155000-15155999

# java - lucene - 越接近标题的开头赋予更多的权重

> ID：15155001
> 
> 赞同：11
> 
> 时间：2013-03-01T10:01:15.300
> 
> 标签：java, lucene

我了解如何在索引时或查询时提升字段。但是，如何提高匹配靠近标题开头的术语的分数？

例子：

```
Query = "lucene"

Doc1 title = "Lucene: Homepage"
Doc2 title = "I have a question about lucene?" 
```

我希望第一个文档得分更高，因为“lucene”更接近开头（暂时忽略术语频率）。

我看到了如何使用 SpanQuery 来指定术语之间的接近度，但我不确定如何使用有关字段中位置的信息。

我在 Java 中使用 Lucene 4.1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T20:04:24.490

我会使用 a [`SpanFirstQuery`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/spans/SpanFirstQuery.html)，它匹配字段开头附近的术语。作为所有跨度查询，它依赖于位置，在 lucene 中进行索引时默认启用。

让我们独立测试一下：您只需要提供您的[`SpanTermQuery`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/spans/SpanTermQuery.html)和可以找到该术语的最大位置（在我的示例中为一个）。

```
SpanTermQuery spanTermQuery = new SpanTermQuery(new Term("title", "lucene"));
SpanFirstQuery spanFirstQuery = new SpanFirstQuery(spanTermQuery, 1); 
```

鉴于您的两个文档，如果您使用`StandardAnalyzer`.

现在我们可以以某种方式将上述`SpanFirstQuery`内容与普通文本查询结合起来，并让第一个只影响分数。您可以使用 a 轻松完成此操作[`BooleanQuery`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/BooleanQuery.html)，并将 span 查询作为 should 子句，如下所示：

```
Term term = new Term("title", "lucene");
TermQuery termQuery = new TermQuery(term);
SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new SpanTermQuery(term), 1);
BooleanQuery booleanQuery = new BooleanQuery();
booleanQuery.add(new BooleanClause(termQuery, BooleanClause.Occur.MUST));
booleanQuery.add(new BooleanClause(spanFirstQuery, BooleanClause.Occur.SHOULD)); 
```

可能有不同的方法可以实现相同的目标，可能使用 a `CustomScoreQuery`too 或自定义代码来实现评分，但在我看来，这似乎是最简单的一种。

我用来测试它的代码打印以下输出（包括分数），`TermQuery`首先执行唯一的，然后是唯一的`SpanFirstQuery`，最后是组合的`BooleanQuery`：

```
------ TermQuery --------
Total hits: 2
title: I have a question about lucene - score: 0.26010898
title: Lucene: I have a really hard question about it - score: 0.22295055
------ SpanFirstQuery --------
Total hits: 1
title: Lucene: I have a really hard question about it - score: 0.15764984
------ BooleanQuery: TermQuery (MUST) + SpanFirstQuery (SHOULD) --------
Total hits: 2
title: Lucene: I have a really hard question about it - score: 0.26912516
title: I have a question about lucene - score: 0.09196242 
```

这是完整的代码：

```
public static void main(String[] args) throws Exception {

        Directory directory = FSDirectory.open(new File("data"));

        index(directory);

        IndexReader indexReader = DirectoryReader.open(directory);
        IndexSearcher indexSearcher = new IndexSearcher(indexReader);

        Term term = new Term("title", "lucene");

        System.out.println("------ TermQuery --------");
        TermQuery termQuery = new TermQuery(term);
        search(indexSearcher, termQuery);

        System.out.println("------ SpanFirstQuery --------");
        SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new SpanTermQuery(term), 1);
        search(indexSearcher, spanFirstQuery);

        System.out.println("------ BooleanQuery: TermQuery (MUST) + SpanFirstQuery (SHOULD) --------");
        BooleanQuery booleanQuery = new BooleanQuery();
        booleanQuery.add(new BooleanClause(termQuery, BooleanClause.Occur.MUST));
        booleanQuery.add(new BooleanClause(spanFirstQuery, BooleanClause.Occur.SHOULD));
        search(indexSearcher, booleanQuery);
    }

    private static void index(Directory directory) throws Exception {
        IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_41, new StandardAnalyzer(Version.LUCENE_41));

        IndexWriter writer = new IndexWriter(directory, config);

        FieldType titleFieldType = new FieldType();
        titleFieldType.setIndexOptions(FieldInfo.IndexOptions.DOCS_AND_FREQS_AND_POSITIONS);
        titleFieldType.setIndexed(true);
        titleFieldType.setStored(true);

        Document document = new Document();
        document.add(new Field("title","I have a question about lucene", titleFieldType));
        writer.addDocument(document);

        document = new Document();
        document.add(new Field("title","Lucene: I have a really hard question about it", titleFieldType));
        writer.addDocument(document);

        writer.close();
    }

    private static void search(IndexSearcher indexSearcher, Query query) throws Exception {
        TopDocs topDocs = indexSearcher.search(query, 10);

        System.out.println("Total hits: " + topDocs.totalHits);

        for (ScoreDoc hit : topDocs.scoreDocs) {
            Document result = indexSearcher.doc(hit.doc);
            for (IndexableField field : result) {
                System.out.println(field.name() + ": " + field.stringValue() +  " - score: " + hit.score);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:59:16.197

摘自《Lucene In Action 2》一书

" Lucene 在包 org.apache.lucene.search.payloads 中提供了一个内置查询 PayloadTermQuery。这个查询就像 SpanTermQuery 一样，它匹配包含指定术语的所有文档并跟踪实际出现的次数***（跨度）***比赛。

但它更进一步，使您能够根据每个术语出现时出现的有效负载贡献一个评分因子。为此，您必须创建自己的定义 scorePayload 方法的 Similarity 类，像这样“

```
public class BoostingSimilarity extends DefaultSimilarity {
public float scorePayload(int docID, String fieldName,
int start, int end, byte[] payload,
int offset, int length) {
....
} 
```

上面代码中的“start”只不过是有效载荷的起始位置。有效载荷与术语相关联。所以起始位置也适用于这个词（至少我是这么认为的..）

通过使用上面的代码，但忽略有效负载，您将可以访问评分位置的“开始”位置，然后您可以根据该开始值提高分数。

例如：新分数 = 原始分数 * ( 1.0f / start-position )

我希望上述方法有效，如果您找到任何其他有效的解决方案，请在此处发布..

# matlab - 遗传算法：最小代数？

> ID：15155002
> 
> 赞同：2
> 
> 时间：2013-03-01T10:01:17.980
> 
> 标签：matlab, optimization, genetic-algorithm, minimum

我有一个 Matlab 脚本（实际上是一个函数`funModel`），我试图通过遗传算法用 7 个整数变量来解决它：

* * *

```
nvars = 7; %number of variables
Aineq = [1 1 1 1 1 1 1]; Aeq = [];
bineq = [VesMaxCrew]; beq = [];
LowBound = [1 1 1 1 1 4 0];
UpBound = [1 1 VesMaxCrew 1 VesMaxCrew VesMaxCrew VesMaxCrew];
Nonlcon = [];
IntCon = [1:7]; % all 7 variables to be treated as integers
Options = gaoptimset('Display','iter',... %display every iteration
'Generations',70,... %maximum number of generations is 70
'TolFun',1,... %tolerance for optimisation is 1
'TolCon',1,...
'PlotFcns',@gaplotbestf);
OptimisedValue = ga(@funModel,nvars,Aineq,bineq,Aeq,beq,,LowBound,UpBound,NonlCon,IntCon,Options); 
```

* * *

遗传算法运行良好，并在 70 代内轻松找到了一个很好的解决方案（从 plot 函数可以看出`@gaplotbestf`）。使用当前输入，在 25 到 30 代后为每个个体选择最佳解决方案。然而，该算法会继续运行，直到完成 51 代。这看起来至少有 20 代太多了。

即使我更改 的输入参数`funModel`，遗传算法仍然至少运行 51 代，就像有一些约束或设置说算法必须至少运行 51 代。（可以看出，已经输入了最大代数）

为什么算法不会在 25 或 30 代之间停止？（或仅在 30 代之后）更重要的是，有人知道如何改变这一点吗？

（我无法`gaoptimset`在 Matlab 文档中找到关于最小代数设置（）的任何信息。我​​也找不到有相同问题/问题的人。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:46:29.320

“摊位世代”选项的默认值为 50。这实际上是它在您的情况下停止的点。这可以被认为是最小的世代数。欲了解更多详情，请查看[此处](http://www.mathworks.com/help/gads/genetic-algorithm-examples.html#f15811)。

# ios - 如何知道相机闪光灯是否已经点亮（iOS）？

> ID：15155008
> 
> 赞同：1
> 
> 时间：2013-03-01T10:01:43.473
> 
> 标签：ios, camera

更新：**我知道如何打开/关闭相机闪光灯。我想知道的是相机闪光灯是否*已经*点亮。**

我想知道 iPhone 上的相机闪光灯是否点亮，但我还没有找到任何`UIImagePickerController`允许我这样做的方法。我知道我们可以得到cameraFlashMode。但我想知道相机闪光灯是否已经点亮。

例如，如果模式是`UIImagePickerControllerCameraFlashModeAuto`，在我控制之前相机闪光灯是否点亮，我想在做一些操作之前知道相机闪光灯的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T21:18:00.850

令人惊讶的是，这真的没有回答第一个回答的人甚至没有回答这个问题......

```
 func torchButtonPressed() {
    //
    let device = AVCaptureDevice.defaultDeviceWithMediaType(AVMediaTypeVideo)
    do {
        try device.lockForConfiguration()
    } catch {
        return
    }
    if device.torchMode == AVCaptureTorchMode.Off {
        do {
            device.torchMode = AVCaptureTorchMode.On
            try device.setTorchModeOnWithLevel(AVCaptureMaxAvailableTorchLevel)
        } catch {
            print("no torch")
            return
        }

    } else {
        device.torchMode = AVCaptureTorchMode.Off
    }
    device.unlockForConfiguration()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:46:36.020

您可以使用以下代码找到

```
#import <AVFoundation/AVFoundation.h>

- (void) turnTorchOn: (bool) on {

Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
if (captureDeviceClass != nil) {
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
if ([device hasTorch] && [device hasFlash]){

    [device lockForConfiguration:nil];
    if (on) {
        NSLog(@"Torch is ON");
    } else {
      NSLog(@"Torch is OFF");

    }
    [device unlockForConfiguration];
}
}
} 
```

快乐编码...!!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T08:58:45.177

我遇到了和你一样的问题。

iOS 支持两种模式 - 闪光灯和手电筒。下面的代码检查每个是否可用，然后根据您调用的代码打开或关闭它们。它还检查灯是否已经打开/关闭。

闪光灯开 -

```
-(void)flashOn {
Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
if (captureDeviceClass != nil) {
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    [device lockForConfiguration:nil];

    if ([device hasFlash]) {
        if ([device flashMode] == AVCaptureFlashModeOff) {
            [device setFlashMode:AVCaptureFlashModeOn];
        }
    }

    if ([device hasTorch]) {
        if ([device torchMode] == AVCaptureTorchModeOff) {
            [device setTorchMode:AVCaptureTorchModeOn];
        }
    }

    [device unlockForConfiguration];
  }
} 
```

闪光灯关闭-

```
-(void)flashOff {
Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
if (captureDeviceClass != nil) {
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    [device lockForConfiguration:nil];

    if ([device hasFlash]) {
        if ([device flashMode] == AVCaptureFlashModeOn) {
            [device setFlashMode:AVCaptureFlashModeOff];
        }
    }

    if ([device hasTorch]) {
        if ([device torchMode] == AVCaptureTorchModeOn) {
            [device setTorchMode:AVCaptureTorchModeOff];
        }
    }

    [device unlockForConfiguration];
  }

} 
```

# node.js - 超时 POST 请求的浏览器重试行为不一致

> ID：15155014
> 
> 赞同：21
> 
> 时间：2013-03-01T10:02:25.300
> 
> 标签：node.js, http, google-chrome

当由于超时而没有来自服务器的响应时，我偶尔会重试 POST 请求。所有现代浏览器都有幂等请求（GET、HEAD 等）的重试逻辑，但我无法解释为什么它会发生在 POST 请求中。

我正在使用带有 3 个路由和 chrome 浏览器的简单 node.js 服务器测试这个案例。

```
/       : gives a html page with jquery and code snippets to fire ajax requests
/hi     : gives a text response 'hello'
/sleep  : request will timeout without any response 
```

默认情况下，node.js http 服务器会在 2 分钟后超时请求。

## 重试.js

```
var http = require('http');
var server = http.createServer();

server.on('request', function(req, res) {
    console.log(new Date() + ' ' + req.method + ' request on ' + req.url);

    if (req.url === '/sleep') {
        console.log('!!! sleeping');
    } else if (req.url === '/') {
        html = "$.post('/hi', {'for':'server'}, function() { console.log(arguments) } ).error(function() { console.log(arguments) })";
        html += "<br><br>";
        html += "$.post('/sleep', {'for':'infinite'}, function() { console.log(arguments) } ).error(function() { console.log(arguments) })";
        html += '<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>';

        res.writeHead(200, {'Content-Type': 'text/html'});
        res.end(html);
    } else {
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end('hello');
    }
});

server.listen(2020);
console.log('server listening on port 2020'); 
```

## 运行

```
$ node retry.js 
server listening on port 2020 
```

## 1

```
Load this page in browser http://localhost:2020

Fri Mar 01 2013 12:21:59 GMT+0530 (IST) GET request on /
Fri Mar 01 2013 12:21:59 GMT+0530 (IST) GET request on /favicon.ico 
```

## 2

从开发控制台，使用 jquery 向 /hi 发出 ajax POST 请求

```
$.post('/hi', {'for':'server'}, function() { console.log(arguments) } ).error(function() { console.log(arguments) }) 
```

> 2013 年 3 月 1 日星期五 12:22:05 GMT+0530 (IST) 在 /hi 上的 POST 请求

## 3

向 /sleep 发出 POST 请求，2 分钟后重试，4 分钟后出错。

```
$.post('/sleep', {'for':'infinite'}, function() { console.log(arguments) } ).error(function() { console.log(arguments) }) 
```

服务器日志显示 2 个请求

```
Fri Mar 01 2013 12:22:21 GMT+0530 (IST) POST request on /sleep
!!! sleeping
Fri Mar 01 2013 12:24:21 GMT+0530 (IST) POST request on /sleep
!!! sleeping 
```

再次触发，2分钟后出错，无需重试。

```
Fri Mar 01 2013 12:30:01 GMT+0530 (IST) POST request on /sleep
!!! sleeping ? 
```

### 在我们向 /hi （或任何其他 url）发出请求并导致响应之前，它不会重试。并且重试仅针对一个随后的 /sleep 请求。

## 在浏览器中，网络选项卡显示如下模式

```
/hi - success 
/sleep - cancelled - 4 mins (retry happens)
/sleep - cancelled - 2 mins (no retry)
/sleep - cancelled - 2 mins (no retry)
/hi - success 
/sleep - cancelled - 4 mins (retry happens)
/sleep - cancelled - 2 mins (no retry)
/sleep - cancelled - 2 mins (no retry) 
```

* * *

## 问题

尽管我们需要设计我们的 Web 应用程序来容忍这些额外的请求（通过浏览器或任何其他中介），但这种不一致的浏览器重试看起来很奇怪。我在 chrome (v16 & v24) 和 firefox 中观察到了这种行为。

有人可以帮我理解超时非幂等请求背后的浏览器重试逻辑吗？

### 其他相关的stackoverflow问题

[当请求没有收到响应时会发生什么？我看到重试](https://stackoverflow.com/questions/14302512/what-happens-when-no-response-is-received-for-a-request-im-seeing-retries)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-31T02:13:56.227

当连接关闭时，浏览器会在收到服务器响应之前重试请求（包括 POST）。这在[HTTP 1.1 Spec 第 8.2.4 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.4)中定义。

# c++ - 如何在 C++ 中初始化 OpenCV 中的轮廓

> ID：15155016
> 
> 赞同：0
> 
> 时间：2013-03-01T10:02:32.133
> 
> 标签：c++, opencv, contour

我想在 O 中使用[drawContours](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html?highlight=contours#cv-drawcontours)函数

```
 vector<vector<Point> > contours; 
```

**如何将以下（x，y）分配给变量轮廓？**

```
x = [194, 253, 293, 245]
y = [72, 14, 76, 125] 
```

谁能帮我吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:08:41.330

在 C++11 中，您可以轻松地初始化`contours`向量：

```
vector<vector<Point>> contours = {{{194, 72}, {253, 14}, {293, 76}, {245, 125}}}; 
```

请注意，`contours`是 a `vector`of 轮廓，其中每个轮廓都是 a `vector<Point>`。所以它是一个包含点容器的容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:07:00.817

这段代码可以帮助你吗？

```
vector<Point> firstContour;
firstContour.push_back(Point(194,72));
firstContour.push_back(Point(253,14));
firstContour.push_back(Point(293,76));
firstContour.push_back(Point(245,125));
contours.push_back(firstContour); 
```

# android - 图像动态添加到自定义 Toast

> ID：15155020
> 
> 赞同：0
> 
> 时间：2013-03-01T10:02:47.617
> 
> 标签：android

如何将自定义图像添加到自定义 Toast...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:10:17.387

只需将 ImageView 添加到您的 toast_layout 中，然后：

```
ImageView iv=  (ImageView) layout.findViewById(R.id.image);
iv.setBackgroundResource(R.drawable.img1);//Or wathever you want! 
```

这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:28:11.757

```
03-01 15:55:41.040: E/AndroidRuntime(6512): java.lang.NullPointerException
03-01 15:55:41.040: E/AndroidRuntime(6512):    at com.anthem.mathsmagic.maxone$1.onClick(maxone.java:98) 
```

这是 onClick 方法中相当常见的 NPE。你在第 98 行做什么？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-01T10:15:58.240

我是这样做的：

```
LayoutInflater inflater = LayoutInflater.from(getActivity());
    View layout = inflater.inflate(R.layout.toast, null); 
     ImageView image = (ImageView) layout.findViewById(R.id.image); 
     image.setImageBitmap(bm);

    TextView text = (TextView) layout.findViewById(R.id.toast_text);
    String toastText = "Hi"; 
    text.setText(toastText);

    Toast toast = new Toast(getActivity().getApplicationContext());
    toast.setGravity(Gravity.CENTER, 0, 0);
    toast.setDuration(Toast.LENGTH_SHORT);
    toast.setView(layout);
    toast.show(); 
```

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/toast_layout_root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/covu_sdk_background_toast"
android:orientation="horizontal"
android:padding="10dp" >

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/toast_text"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:textColor="#FFF" />

</LinearLayout> 
```

# antlr - 如何获得由该语法解析的 (A*B)>C 字符串？

> ID：15155022
> 
> 赞同：0
> 
> 时间：2013-03-01T10:02:56.193
> 
> 标签：antlr, context-free-grammar, recursive-descent

问题是因为 -- addExpression ((EQ | NE | GT | LT | LE | GE) addExpression)+ --- 。通过这样做，我想过滤掉单独的数学表达式，除非后面跟着一个关系以使其整体合乎逻辑......我不希望我的解析器单独解析数学表达式......

```
expression
    :
        logicalExpression
    ;

primitive
    :
        DECIMAL
    |   UNSIGNED_INTEGER
    |   SIGNED_INTEGER
    |   VARIABLE
    |   '(' logicalExpression ')'
    |   '{' logicalExpression '}'
    |   '[' logicalExpression ']'
    ;

notExpression
    :
        (NOT)* primitive
    ;

signExpression
    :
        ( '-' | '+' )* notExpression
    ;

mulExpression
    :
        signExpression ( ( '*' | '/' ) signExpression)*
    ;

addExpression
    :
        mulExpression ( ( '+' | '-' ) mulExpression)*
    ;

relationalExpression
    :
        addExpression ((EQ | NE | GT | LT | LE | GE) addExpression)+
    |   '(' VARIABLE ')'
    |   '{' VARIABLE '}'
    |   '[' VARIABLE ']'
    |       VARIABLE
    ; 
```

测试：

```
Input string: (5) --> Expected: to fail -- Current:failed
    Input string: 5*6 --> Expected: to fail -- Current:failed
    Input string: A-B --> Expected: to fail -- Current:failed
    Input string: A/B --> Expected: to fail -- Current:failed
    Input string: 5/A --> Expected: to fail -- Current:failed
    Input string: --2 --> Expected: to fail -- Current:failed
    Input string: 5++ --> Expected: to fail -- Current:failed
    Input string: A-B and B-A --> Expected: to fail -- Current:failed
    Input string: (A and B)--> Expected: to pass {AND(A,B)} -- Current:failed
    Input string: A and B-->   Expected: to pass AND(A,B) -- Current:failed
    Input string: (5)>6 --> Expected: to pass {GT(5,6)} -- Current:failed
    Input string:  5>6 --> Expected: to pass  {GT(5,6)} -- Current:pass
    Input string: 5*6 < 6-5 --> Expected: to pass  GT(MUL(5,6),SUB(5,6)) --Current:pass
    Input string: A/B == B/A --> Expected: to pass  -- Current:pass
    Input string: (A/B)=B/A --> Expected: to pass  -- Current:failed
    Input string: 5 /= 5 --> Expected: to pass  -- Current:pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:49:07.637

下面是两个简单的 ANTLR 语法，演示了两种评估逻辑和算术表达式混合的方法，然后是测试类及其输出。第一个语法采用您要求的形式，使用 ANTLR 确定表达式类型并确保表达式值兼容。另一种形式使用语法中的动作来确定表达式类型。我在这里提供它以进行比较。

我在两种语法中都对表达式求值进行了硬编码，以使示例更有用并显示它们按预期工作。请注意，除了您在下面的测试代码中看到的内容之外，我还没有测试过这些语法。此外，我只包括了演示感兴趣的概念所必需的运算符。添加其他人应该很容易。

* * *

要求 ANTLR 保持表达式类型不同需要告诉 ANTLR 当运算符对多个表达式类型有效时该怎么做。例如在下面的语法`LogicRules`中，词法分析器标记`LPAR`标记以 rule 开头的逻辑表达式`compExpr`或以 开头的算术表达式的开头`primaryExpr`。默认情况下，ANTLR 无法知道 input`"(3..."`是逻辑表达式分组 ( `"(3 + 3 == 6)"`) 的开头还是算术/数字表达式分组 ( `"(3 + 3) == 6"`) 的开头。rule 中的句法谓词`compExpr`用于帮助 ANTLR 区分这两种选择，实际上是告诉它等待和观察。

### LogicRules.g — 让 ANTLR 规则区分布尔表达式和数字表达式

```
grammar LogicRules;

statement returns [boolean result]
    : logicalExpr {$result = $logicalExpr.result;} EOF
    ;

logicalExpr returns [boolean result]
    @init { $result = true;}
    : lhs=compExpr {$result = $lhs.result;} 
        (AND rhs=compExpr 
            {$result = $result && $rhs.result;}
        )*
    ;

compExpr returns [boolean result]
    @init { $result = true;}
    : (eqExpr) => eqExpr {$result = $eqExpr.result;}
        //^^ Needs a syntactic predicate to differentiate between logical grouping and arithmetic grouping
    | LPAR logicalExpr {$result = $logicalExpr.result;} RPAR
        //^^ Only group logical expressions at this level. 
    ;

eqExpr returns [boolean result]
@init {$result = true;}
    : lhs=arithmeticExpr 
        (EQ rhs=arithmeticExpr 
            {$result = $result && $lhs.result == $rhs.result;}
        )+ 
        //^^ use +: a logical expression of arithmetic expressions
        //          requires a logical operation to produce a boolean value
    ;

arithmeticExpr returns [int result]
    @init {$result = 0;}
    : lhs=primaryExpr {$result += $lhs.result;} 
        (PLUS rhs=primaryExpr 
            {$result += $rhs.result;}
        )* 
    ;

primaryExpr returns [int result]
    @init {$result = 0;}
    :   INT {$result = $INT.int;}
    |   LPAR arithmeticExpr RPAR {$result = $arithmeticExpr.result;}
        //^^ Only group other numeric/arithmetic expressions at this level.
    ;

INT     : ('0'..'9')+;
AND     : '&&';
EQ      : '==';
LPAR    : '(';
RPAR    : ')';
PLUS    : '+'; 
WS      : (' '|'\t'|'\r'|'\n')+ {skip();}; 
```

* * *

使用代码而不是 ANTLR 规则评估表达式的结果类型会导致如下文法。请注意，分组仅在一个级别完成，不需要句法谓词。整体语法保持相对简单。和前面的语法一样，这个语法在遇到无效的类型转换时会产生错误。

### LogicEval.g — 让代码区分布尔表达式和数字表达式

```
grammar LogicEval;

@parser::members {
    private static boolean toBoolean(Object obj){
        if (obj instanceof Boolean){
            return (Boolean)obj;
        } else { 
            throw new RuntimeException("Cannot convert " + obj + " to boolean");
        }
    } 

    private static int toInt(Object obj){
        if (obj instanceof Integer){
            return (Integer)obj;
        } else { 
            throw new RuntimeException("Cannot convert " + obj + " to integer");
        }
    } 
}

statement returns [Object result]
    : expr {$result = $expr.result;} EOF
    ;

expr returns [Object result]
    : lhs=compExpr {$result = $lhs.result;} 
        (AND rhs=compExpr 
            {$result = toBoolean($result) && toBoolean($rhs.result);} 
        )*
    ;

compExpr returns [Object result]
    @init {Object lhsResult = null;}
    : lhs=arithmeticExpr {$result = lhsResult = $lhs.result;}
        (EQ rhs=arithmeticExpr
            {$result = toInt(lhsResult) == toInt($rhs.result);} 
        )* 
    ;

arithmeticExpr returns [Object result]
    : lhs=primaryExpr {$result = $lhs.result;}
        (PLUS rhs=primaryExpr
            {$result = toInt($result) + toInt($rhs.result);}
        )*
    ;

primaryExpr returns [Object result]
    :   INT {$result = $INT.int;}
    |   LPAR expr RPAR {$result = $expr.result;}
    ;

INT     : ('0'..'9')+;
AND     : '&&';
EQ      : '==';
LPAR    : '(';
RPAR    : ')';
PLUS    : '+'; 
WS      : (' '|'\t'|'\r'|'\n')+ {skip();}; 
```

* * *

### LogicTest.java — 两种语法的测试代码

```
public class LogicTest {

    public static void main(String[] args) {
        test("1 + 2 == 3", Result.True);
        test("1 + 2 == 4", Result.False);
        test("1 + 2 == 3 && 1 + 2 == 4", Result.False);
        test("1 + 2 == 3 && 4 + 5 == 9", Result.True);
        test("(1 + 2) == 3 && (4 + 5 == 9)", Result.True);
        test("1 + 2 == (3 && 4 + 5 == 9)", Result.Failure);
        test("1 && 2", Result.Failure);
        test("1 + 2", Result.Failure);
    }

    private static void test(String rawInput, Result expectedResult){
        Result rulesResult = runRules(rawInput);
        Result evalResult = runEval(rawInput);
        System.out.println("---\n");
        System.out.printf("**Input:** %s%n%n", rawInput);
        System.out.printf("**Expected Result:** %s%n%n", expectedResult);
        System.out.printf("**LogicRules Result:** %s%n%n", rulesResult);
        System.out.printf("**LogicRules Passed?** %s%n%n", (rulesResult == expectedResult));
        System.out.printf("**LogicEval Result:** %s%n%n", evalResult);
        System.out.printf("**LogicEval Passed?** %s%n%n", (evalResult == expectedResult));
    }

    private static Result runRules(String rawInput){
        CharStream input = new ANTLRStringStream(rawInput);
        LogicRulesLexer lexer = new LogicRulesLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        LogicRulesParser parser = new LogicRulesParser(tokens);

        boolean result;
        try {
            result = parser.statement();
        } catch (Exception e) {
            return Result.Failure;
        }

        if (lexer.getNumberOfSyntaxErrors() > 0 || parser.getNumberOfSyntaxErrors() > 0){
            return Result.Failure;
        }

        return result ? Result.True : Result.False;
    }

    private static Result runEval(String rawInput){
        CharStream input = new ANTLRStringStream(rawInput);
        LogicEvalLexer lexer = new LogicEvalLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        LogicEvalParser parser = new LogicEvalParser(tokens);

        Object result;
        try {
            result = parser.statement();
        } catch (Exception e) {
            return Result.Failure;
        }

        if (lexer.getNumberOfSyntaxErrors() > 0 || parser.getNumberOfSyntaxErrors() > 0){
            return Result.Failure;
        }

        if (result instanceof Boolean){
            return ((Boolean)result) ? Result.True : Result.False;
        } else { 
            return Result.Failure; //Produced a valid result, but it wasn't a boolean.
        }
    }

    private static enum Result { 
        True, False, Failure;
    }
} 
```

### 输出——所有测试通过

* * *

**输入：** 1 + 2 == 3

**预期结果：**真

**逻辑规则结果：**真

**逻辑规则通过了吗？**真的

**LogicEval 结果：**真

**逻辑评估通过了吗？**真的

* * *

**输入：** 1 + 2 == 4

**预期结果：**错误

**逻辑规则结果：**假

**逻辑规则通过了吗？**真的

**LogicEval 结果：**假

**逻辑评估通过了吗？**真的

* * *

**输入：** 1 + 2 == 3 && 1 + 2 == 4

**预期结果：**错误

**逻辑规则结果：**假

**逻辑规则通过了吗？**真的

**LogicEval 结果：**假

**逻辑评估通过了吗？**真的

* * *

**输入：** 1 + 2 == 3 && 4 + 5 == 9

**预期结果：**真

**逻辑规则结果：**真

**逻辑规则通过了吗？**真的

**LogicEval 结果：**真

**逻辑评估通过了吗？**真的

* * *

**输入：** (1 + 2) == 3 && (4 + 5 == 9)

**预期结果：**真

**逻辑规则结果：**真

**逻辑规则通过了吗？**真的

**LogicEval 结果：**真

**逻辑评估通过了吗？**真的

* * *

**输入：** 1 + 2 == (3 && 4 + 5 == 9)

**预期结果：**失败

**LogicRules 结果：**失败

**逻辑规则通过了吗？**真的

**LogicEval 结果：**失败

**逻辑评估通过了吗？**真的

* * *

**输入：** 1 && 2

**预期结果：**失败

**LogicRules 结果：**失败

**逻辑规则通过了吗？**真的

**LogicEval 结果：**失败

**逻辑评估通过了吗？**真的

* * *

**输入：** 1 + 2

**预期结果：**失败

**LogicRules 结果：**失败

**逻辑规则通过了吗？**真的

**LogicEval 结果：**失败

**逻辑评估通过了吗？**真的

# c# - 在 winform 应用程序中使用表单名称打开表单

> ID：15155024
> 
> 赞同：3
> 
> 时间：2013-03-01T10:02:58.263
> 
> 标签：c#, winforms, c#-4.0, desktop-application, windows-applications

我想问我应该怎么做才能在winform c#中使用帮助或类名打开表单？

我有三种不同的形式

*   用户管理
*   群组管理
*   位置管理

我从数据库获得这三种形式的许可

在菜单中单击我用这样的表单名称填充标签属性

```
tsmMain.Tag = item.PermissionName
tsmMain.Click += new EventHandler(tsmMain_Click); 
```

我想要做的是在按钮单击中动态打开表单并在条件下删除这些？我可以通过反射或其他方式做到这一点吗？

```
ToolStripMenuItem aa = sender as ToolStripMenuItem;
        var tag = aa.Tag;
        if (tag == "User Management")
        {
            UserManagement oUserForm = new UserManagement();
            oUserForm.Show();
        }
        if (tag == "Groups Management")
        {
            GroupManagement oGroupForm = new GroupManagement();
            oGroupForm.Show();
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T10:09:35.800

您可以使用表单名称作为字符串参数来执行以下操作：

```
var form = (Form)Activator.CreateInstance(Type.GetType("YourNameSpace.UserManagement"));
form.Show(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T10:07:06.623

一种简单但不一定非常干净的解决方案是将表单存储在`Tag`菜单项的属性中，而不是字符串中。

在应用程序开始的某个地方，您必须分配这些实例：

```
myUserManagementItem.Tag = new UserManagement();
myGroupsManagementItem.Tag = new GroupManagement(); 
```

然后，在点击事件中，您可以将代码缩短为：

```
ToolStripMenuItem aa = sender as ToolStripMenuItem;
Form form = aa.Tag as Form;
form.Show(); 
```

* * *

更清洁的解决方案将包括以下内容：

*   为不同的菜单项提供单独的事件处理程序。
*   派生您自己的菜单项类型，用于存储要在强类型属性中显示的表单。

# html - 启动图像不起作用

> ID：15155027
> 
> 赞同：1
> 
> 时间：2013-03-01T10:03:11.090
> 
> 标签：html, css, extjs, sencha-touch, sencha-touch-2

我需要一些关于启动图像的帮助。

该应用程序应显示登录面板。我想从启动（加载指示器）设置背景图像，直到登录面板出现全屏相同的背景图像。

我尝试了 4 种方法，但没有成功第一种方法：我在 index.html 中设置了一个样式块：

```
 <style type="text/css">                
shtml, body {                    
height: 100%;                    
background-color:#FFFFFF;                    
background-image: url(resources/startup/ios/Ipad_Landscape_1024x748.png);                    background-position: center;                    
background-repeat: no-repeat;                
} 
```

-> 问题是图像将在白屏和加载指示器之后加载，我不知道如何根据方向（纵向，横向）设置它

第二种方法：

我在 index.html 中写了这个：

```
 <!-- startup image for web apps - iPad - landscape (748x1024)             
    Note: iPad landscape startup image has to be exactly 748x1024 pixels 
    (portrait, with contents rotated).--> 
<link rel="apple-touch-startup-image" href="resources/startup/ios/Ipad_Landscape_748x1024" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape)" />                        
<!-- startup image for web apps - iPad - portrait (768x1004) -->            
<link rel="apple-touch-startup-image" href="resources/startup/ios/Ipad_Portrait_768x1004.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait)" />                        
<!-- startup image for web apps (320x460) -->            
<link rel="apple-touch-startup-image" href="img/iphone.png" media="screen and (max-device-width: 320px)" /> 
```

--> 没有成功

第三种方法：

```
 /*    icon: {        
'57': 'resources/icons/ios/Icon_phone.png',        
'72': 'resources/icons/ios/Icon-72_Ipad.png',        
'114': 'resources/icons/ios/Icon-114.png',        
'144': 'resources/icons/ios/Icon-144_ipad@2x.png'   
 },*/               
fullscreen: true,                
glossOnIcon:true,    
isIconPrecomposed: true,    
startupImage: {        
'768x1004': 'resources/startup/ios/Ipad_Portrait_768x1004.png',        
'748x1024': 'resources/startup/ios/Ipad_Landscape_748x1024.png',    
}, 
```

--> 失败

最后一个：我尝试将这一行添加到 app.js

代码：

```
tabletStartupScreen:    'resources/startup/ios/Ipad_Landscape_748x1024.png', 
```

--> 失败

我需要帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:57:21.003

为什么不尝试将图像放在加载屏幕和第一个视图（登录页面）的背景中？要将图像放在加载页面上，您可以更改 index.html 中 appLoadingIndicator 的 CSS 属性，如下所示：

```
 #appLoadingIndicator {
        margin: auto;
        text-align: center;
        width: 980px;
        height: 540px;
        background-image:url('resources/startup/ios/Ipad_Landscape_1024x748.png');
        -webkit-animation-name: appLoadingIndicator;
        -webkit-animation-duration: 3s;
        -webkit-animation-iteration-count: infinite;
        -webkit-animation-direction: linear;
    } 
```

然后使用相同的图像作为登录视图的背景。

# rest - RestFul Web API 返回问题

> ID：15155030
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:03:17.183
> 
> 标签：rest

```
@GET
@Produces("application/json")
public Site getSite() {
    return (Site)siteFacade.find(Integer.parseInt(id));
    return Response.status(204).type("text/plain")
            .entity("Invalid Request!").build();
} 
```

如果 Site==NULL，我正在尝试返回“无效请求”消息，但由于方法的原因，返回响应中有错误。公共站点 getSite()

任何人都可以建议如何克服那个错误代码响应..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:20:15.463

错误情况是 Response...build() 返回“Response”。尝试构建带有响应的站点类。前任

```
Response.status.(Status.OK).entity(site).build(); 
```

作为旁注：尝试具有两个返回语句的无效，完整示例

```
@GET
@Produces("application/json")
public Response getSite() {
   Site site = (Site)siteFacade.find(Integer.parseInt(id));
   return (site == null)? 
                  Response.status(204).type("text/plain").
                  entity("Invalid Request!").build(): 
                  Response.status.(Status.OK).entity(site).build();
} 
```

# ios - Objective - C，我如何裁剪 .caf 文件？

> ID：15155034
> 
> 赞同：0
> 
> 时间：2013-03-01T10:03:49.863
> 
> 标签：ios, objective-c, avfoundation, audio-recording, avaudiorecorder

我已经使用 .caf 将声音录制到**.caf**文件中`AVAudioRecorder`。

我想**剪切/修剪**这个文件的前 2 秒。
**怎么做？** *（我花了几个小时找到解决方案，但没有运气）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:20:06.740

您可以使用 AVAssetExportSession..

试试这个代码..

```
float vocalStartMarker = 0.0f;
float vocalEndMarker = 2.0f;

NSURL *audioFileInput = @"input filePath"; // give your audio file path

NSString *docsDirs;
NSArray *dirPath;
dirPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDirs = [dirPath objectAtIndex:0];
NSString *destinationURLs = [docsDirs stringByAppendingPathComponent:@"trim.caf"];
audioFileOutput = [NSURL fileURLWithPath:destinationURLs];

if (!audioFileInput || !audioFileOutput)
{
    return NO;
}
[[NSFileManager defaultManager] removeItemAtURL:audioFileOutput error:NULL];
AVAsset *asset = [AVURLAsset URLAssetWithURL:audioFileInput options:nil];
AVAssetExportSession *exportSession = [AVAssetExportSession exportSessionWithAsset:asset
                                                                        presetName:AVAssetExportPresetAppleM4A];
if (exportSession == nil)
{        
    return NO;
}
CMTime startTime = CMTimeMake((int)(floor(vocalStartMarker * 100)), 100);
CMTime stopTime = CMTimeMake((int)(ceil(vocalEndMarker * 100)), 100);
CMTimeRange exportTimeRange = CMTimeRangeFromTimeToTime(startTime, stopTime);
exportSession.outputURL = audioFileOutput;
exportSession.outputFileType = AVFileTypeAppleM4A;
exportSession.timeRange = exportTimeRange;

[exportSession exportAsynchronouslyWithCompletionHandler:^
 {
     if (AVAssetExportSessionStatusCompleted == exportSession.status)
     {
         // It worked!
             NSLog(@"DONE TRIMMING.....");
             NSLog(@"ouput audio trim file %@",audioFileOutput);
     } 
     else if (AVAssetExportSessionStatusFailed == exportSession.status)
     {
         // It failed...
             NSLog(@"FAILED TRIMMING.....");
     }
 }]; 
```

# c# - 如何在linq中加入两个查询

> ID：15155035
> 
> 赞同：0
> 
> 时间：2013-03-01T10:03:52.833
> 
> 标签：c#, mysql, linq, lambda

我想离开加入两个查询。在第一个查询将包含 4 条记录，第二个查询将包含 0 条或更多条记录，最多 4 条。我想加入这两个并希望获得 4 条记录。如果第二个查询中有任何记录，那么我想获得第二个表的权限。我写过类似的代码。

```
 var finalquery = values.GroupJoin(records, i => i.typeid, j => j.typeid, (i, j) => new { i, j }).SelectMany(i => i.j.DefaultIfEmpty(), (i, j) => new {
            id = i.i.typeid,
            Permission = (j.premission ==null)?null:j.premission

        }).ToArray(); 
```

但它抛出了一个异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:21:51.177

在这种情况下，您有 NullReferenceException：

```
j.premission ==null 
```

当 j 是`null`（您的默认情况）时会抛出。

```
var finalquery = values.GroupJoin(records, 
                                  v => v.typeid, 
                                  r => r.typeid, 
                                 (v, g) => new { v, g })
                       .SelectMany(x => x.g.DefaultIfEmpty(), 
                                  (x, r) => new { 
                                     id = x.v.typeid,
                                     Permission = r == null ? null : r.permission
                                  })
                       .ToArray(); 
```

或者使用查询语法（转换为美观省略的数组）：

```
 var finalquery =
    from v in values
    join r in records on v.typeid equals r.typeid into g
    from r in g.DefaultIfEmpty()
    select new {
        id = v.typeid,
        Permission = r == null ? null : r.permission
    }; 
```

# r - 在两列而不是一列上使用 tapply

> ID：15155036
> 
> 赞同：0
> 
> 时间：2013-03-01T10:04:11.670
> 
> 标签：r, plyr, tapply

我想用 R 从包 reldist 中取消 gini() 函数来计算几个图的基尼系数。我有一个数据框，我需要从中使用两列作为 gini 函数的输入。

```
>  head(merged[,c(1,17,29)])
  idp c13     w
1  19 126 14.14
2  19 146 14.14
3  19  76 39.29
4  19  74 39.29
5  19  86 39.29
6  19  93 39.29 
```

gini 函数使用第一个元素进行计算（此处为 c13），第二个元素是与 c13 中的每个元素对应的权重（此处为 w）。

所以我需要像这样使用列 c13 和 w ：

```
gini(merged$c13,merged$w)
[1] 0.2959369 
```

问题是我想为每个情节（idp）执行此操作。我有 4000 个不同的 idp 值，每个值都有另外两列的几十个值。

我想我可以使用函数tapply() 来做到这一点。但是我不能使用tapply在函数中放置两个列。

```
tapply(list(merged$c13,merged$w), merged$idp, gini) 
```

如您所知，这是行不通的。所以我希望得到的是这样的数据框：

```
 idp  Gini 
1  19 0.12 
2  21 0.45
3  35 0.65
4  65 0.23 
```

你知道怎么做吗？也许是 plyr 包？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:55:04.963

您可以使用`ddply()`库中的函数`plyr()`来计算每个级别的系数（在示例数据框中将一些`idp`值更改为 21）。

```
library(plyr)
library(reldist)
ddply(merged,.(idp),summarize, Gini=gini(c13,w))

  idp       Gini
1  19 0.15307402
2  21 0.05006588 
```

# c# - 我应该添加哪个名称以使用 System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration

> ID：15155039
> 
> 赞同：-5
> 
> 时间：2013-03-01T10:04:24.593
> 
> 标签：c#, reference

我应该添加哪个名称/引用以使用以下内容

```
System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration 
```

在我的代码中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:08:58.690

在这里我如何找到答案..

*   我打开了名为[Google](https://www.google.com.tr/)的网站。
*   编写您的代码并单击`Search`按钮。
*   它打开了我[`WebConfigurationManager.OpenWebConfiguration Method (String)`](http://msdn.microsoft.com/en-us/library/ms151456.aspx)的页面。

它说，命名空间部分；

```
Namespace:  System.Web.Configuration
Assembly:  System.Web (in System.Web.dll) 
```

如您所见，找到这种基本答案并不难。我的目的是为什么我写了这些步骤，我不想给你鱼，我试着教你如何钓到鱼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:08:17.680

这就是你需要的：

```
Namespace:  System.Web.Configuration
Assembly:  System.Web (in System.Web.dll) 
```

# ios - pdf页面中图像绘制的问题-目标c

> ID：15155040
> 
> 赞同：0
> 
> 时间：2013-03-01T10:04:26.020
> 
> 标签：ios, objective-c, ios5, qlpreviewcontroller

我现在正在制作pdf，除了图像绘制之外一切正常，它只绘制图像的左上角；额外放大。但它适用于模拟器，代码如下所示；

```
UIImage *plotImage=[[UIImage alloc]initWithContentsOfFile:
[localPictureArray objectAtIndex:i]];
    [plotImage drawInRect:CGRectMake
(kMargin, currentPageY, plotImage.size.width, plotImage.size.height)]; 
```

由于我是初学者，我需要您的宝贵帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:16:40.413

问题可能出在您的`CGRect`. 假设您的 x 和 y 边距正常，从这些边距测量，您的图像可能太大而无法放在页面上。

您需要确定可以在右侧和底部绘制多远并相应地缩放图像。（例如[这里](https://stackoverflow.com/questions/603907/uiimage-resize-then-crop)描述的）

# javascript - 如何在backbone.js中创建动画

> ID：15155041
> 
> 赞同：0
> 
> 时间：2013-03-01T10:04:27.773
> 
> 标签：javascript, backbone.js

最近，我一直在使用主干编写单页应用程序。当我尝试创建像扔卡片这样的动画但我不能使用 jquery 来执行此操作时。我发现在主干视图调用这个渲染（）之后。我尝试通过 jquery 选择 DOM 元素并对其进行修改。它没有改变什么？有人知道吗？

```
<!DOCTYPE html>
<head>
<style type="text/css">
#logo { 
position: relative;
}
</style>
</head>
<body>
<div id="container"></div>
<script id="template" type="text/template">
    <image id="card" src='10.png'/>
    <br/>
    <input type="button" id="btn" value="di chuyển"/>
</script>
<script src="move.js"></script>
<script src="jquery.js"></script>
<script src="underscore.js"></script>
<script src="backbone.js"></script>
<script src="app.js"></script>
</body>
</html>

(function($){
    var aniView = Backbone.View.extend({
        template: _.template($('#template').html()),

        events:{
            "mouseover input[type=button]":"moveCard"
        },

        moveCard:function () {
            alert('di chuyển');
            move('#card')
                .add('margin-left', 100)
                .end();
        },

        render:function () {
            $('#container').html(this.template());
        }

    }); 

    var a = new aniView();
    a.render();
})(jQuery); 
```

谢谢！

# ios - 如何在 iOS 中将文本/照片/视频分享到 Instagram

> ID：15155042
> 
> 赞同：6
> 
> 时间：2013-03-01T10:04:29.990
> 
> 标签：ios, instagram

我想将文字/照片/视频分享到 Instagram。我搜索了很长时间，但我没有得到任何适当的文档。如果有人知道 Instagram 上的分享，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T19:35:53.140

[Instagram 媒体端点](http://instagram.com/developer/endpoints/media/)

> 目前，无法通过 API 上传。我们有意识地选择不添加它，原因如下：
> 
> Instagram 是关于你在旅途中的生活——我们希望鼓励从应用程序中拍摄照片。但是，将来我们可能会根据具体情况授予对单个应用程序的白名单访问权限。
> 
> 我们要打击垃圾邮件和低质量的照片。一旦我们允许从其他来源上传，就很难控制进入 Instagram 生态系统的内容。尽管如此，我们正在努力确保用户在我们的平台上获得一致且高质量的体验。

也许你可以试试钩子：http: [//instagram.com/developer/iphone-hooks/](http://instagram.com/developer/iphone-hooks/)或[https://instagram.com/developer/mobile-sharing/android-intents/](https://instagram.com/developer/mobile-sharing/android-intents/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:45:17.250

试试下面的代码。

```
@property (nonatomic, retain) UIDocumentInteractionController *dic;    

CGRect rect = CGRectMake(0 ,0 , 0, 0);
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIGraphicsEndImageContext();
NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/test.igo"];

NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", jpgPath]];
//    NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", screenshot]];

self.dic.UTI = @"com.instagram.photo";
self.dic = [self setupControllerWithURL:igImageHookFile usingDelegate:self];
self.dic=[UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
self.dic.annotation = [NSDictionary dictionaryWithObject:@"Here Give what you want to share" forKey:@"InstagramCaption"];
[self.dic presentOpenInMenuFromRect: rect    inView: self.view animated: YES ];

- (UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate {
UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL: fileURL];
interactionController.delegate = interactionDelegate;
return interactionController;
} 
```

这个对我有用。希望它可以帮助你。

# python - 从xml中提取值

> ID：15155044
> 
> 赞同：3
> 
> 时间：2013-03-01T10:04:37.230
> 
> 标签：python, regex, xml, awk, sed

Q 非常业余的程序员，在这里寻求您的帮助。

我必须经常编辑看起来像这样的 xml 文件

```
 --- blah blah blah plenty xml stuff above ---
    <lex marker="mala" sentiment="negative"/>
    <lex marker="malas" sentiment="negative"/>
    <lex marker="maleducad\p{Ll}*" sentiment="negative" regex="true"/>
    <lex marker="mali\p{Ll}+sima\p{Ll}*" sentiment="negative" regex="true"/>
    <lex marker="mali\p{Ll}+simo\p{Ll}*" sentiment="negative" regex="true"/>
    --- blah blah blah plenty xml stuff below --- 
```

并且使用相当复杂的正则表达式搜索和替换过程，我只能提取标记属性的值。（这就是我所关心的）。

但这很耗时，并且 Python 中必须有非常简单的方法来查找属性 marker="SOME_TEXT" 部分并将所有值放入一个数组中，然后打印出该数组（到文件中）。但我想不通:(

我正在寻找一种不包括导入任何类型的 XML 库的方法，因为我想让它尽可能简单（和合乎逻辑）以供我的业余编程头脑学习）并且我只对数据感兴趣无论如何，来自那个特定的属性，我不关心文件的任何其余部分（或者它是 XML-ness）。

我只在 python 中询问，因为我认为这是我渴望进入的语言。但如果你能想到一个 Linux 终端的方式来做到这一点（sed、awk 等），我也很乐意走这条路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:08:14.010

用正则表达式匹配 XML 变得太复杂、太快了。你真的[不应该那样做](https://stackoverflow.com/a/1732454)。

改用 XML 解析器，Python 有几个可供选择：

*   [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)是标准库的一部分
*   [lxml](http://lxml.de/)是一个快速且功能丰富的基于 C 的库。

元素树示例：

```
from xml.etree import ElementTree

tree = ElementTree.parse('filename.xml')
for elem in tree.findall('lex'):
    print elem.attrib['marker'] 
```

# c# - 为什么我无法通过商店名称和哈希找到证书？

> ID：15155045
> 
> 赞同：1
> 
> 时间：2013-03-01T10:04:38.117
> 
> 标签：c#, .net, iis, certificate

在我的代码中，我枚举了所有本地 IIS 站点，并为每个站点尝试验证端口 443 的证书。

```
using( var sm = new ServerManager() ) {
  foreach( var site in sm.Sites ) {
    foreach( var binding in site.Bindings ) {
       if( binding.EndPoint.Port == 443 ) {
          var thumbprint = binding.CertificateHash;
          var storeName = binding.CertificateStoreName;
          //validation here...
       }
    }
  }
} 
```

这段代码产生了一些字节数组，我将`storeName`其转换为十六进制表示。`"MY"``thumbprint`

现在“验证”部分的工作方式如下：

```
var store = new X509Store("MY");
store.Open(OpenFlags.ReadOnly);
var certs = store.Certificates;
//find and validate my cert
store.Close(); 
```

这段代码产生一个空集合。然而如果我改变

```
var store = new X509Store("MY"); 
```

至

```
var store = new X509Store(StoreLocation.LocalMachine); 
```

然后代码生成一个包含两个证书的集合，其中一个具有正确的指纹，我可以验证它。

为什么会发生`Binding`返回证书存储名称但我在存储中找不到任何具有该名称的证书？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:37:21.127

*商店名称*和商店*位置*之间存在差异。

IIS 的所有证书都存储在本地计算机位置，而不是针对特定用户帐户的证书。

这就是构造函数的`X509Store`样子，它只需要一个`StoreLocation`，您的第二个示例正在调用：

```
public X509Store(StoreLocation storeLocation) : this("MY", storeLocation)
{
} 
```

它正在调用同时采用商店名称*和*位置的[构造函数。](http://msdn.microsoft.com/en-us/library/f07btzah.aspx)

 *你的第一个例子：

```
var store = new X509Store("MY"); 
```

正在打开`MY`商店[`CurrentUser`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storelocation.aspx)，而不是本地机器。所以你找*错*店了。切换到使用同时接受名称和位置的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:41:50.633

此方法将为您获取证书：

```
private X509Certificate2 GetServiceCertificate(String certificateSubjectName, StoreName storeName = StoreName.My, StoreLocation storeLocation = StoreLocation.CurrentUser)
{
    X509Store certificateStore = new X509Store(storeName, storeLocation);
    foreach (X509Certificate2 certificate in certificateStore.Certificates)
    {
        if (certificate.SubjectName.Name == certificateSubjectName)
        {
            return certificate;
        }
    }
    return null;
} 
```*

# objective-c - NSNumber 中的 arc4random 给出负值？

> ID：15155049
> 
> 赞同：1
> 
> 时间：2013-03-01T10:04:53.293
> 
> 标签：objective-c, nsnumber, arc4random

我正在创建一个随机数并将其存储在 NSNumber 对象中，如下所示：

```
NSNumber *index = [NSNumber numberWithUnsignedInt:arc4random_uniform(2^32-1)]; 
```

我也试过：

```
NSNumber *index = [NSNumber numberWithUnsignedInt:arc4random_uniform(4294967295)];
NSNumber *index = @(arc4random_uniform(4294967295)); 
```

在某些时候，我也会像这样分配数字 1：

```
NSNumber *index = @(1); 
```

这应该只给我正数。

稍后，我打印出这些数字，如下所示：

```
NSString *string = [NSString stringWithFormat:@"%@", index]; 
```

这给了我一些随机数的负值，并且 1 被打印为 1。所以我可能会这样做：

```
NSString *string = [NSString stringWithFormat:@"%u", index.unsignedIntValue]; 
```

我只会得到正数 - 我会 - 但现在 1 也突然被打印为一些大的正数。

这里发生了什么？如何在 NSNmber 中正确存储 u_int32 （arc4random 返回的）并确保它们只是正数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:32:55.360

利用

```
NSNumber *index = [NSNumber numberWithUnsignedInt:arc4random_uniform(exp2(32)-1)]; 
```

我从来没有得到任何负数。`arc4random_uniform(x)`总是返回一个介于 0 和 x 之间的数字，并且从中生成的 NSNumber 的 stringvalue 是正确的。

编辑：用 exp2(32) 替换 exp2(31)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:48:36.980

您在评论中说索引作为“整数 32”属性存储在核心数据实体中，我认为这就是问题所在。

Core Data 为托管对象类的所有属性（和关系）动态生成 getter 和 setter 方法。这些访问器方法不同于由实例变量支持的“常规”@synthesized 访问器方法。

对于“整数 32”属性，Core Data 使用（有符号）整数作为属性，当你设置一个值时，它只是被强制转换或截断为`int`. 例子：

```
e.index = [NSNumber numberWithUnsignedInt:0xFFFFFFF0U];
// This would give the same result:
// e.index = [NSNumber numberWithLongLong:0x1234FFFFFFF0LL];
NSNumber *val = e.index;
NSLog(@"value=%@, type=%s", val, [val objCType]);
// Output: value=-16, type=i 
```

输出`type=i`显示该值包含一个`int`.

如果您需要 range 中的无符号整数`0 .. 2^32-1`，那么您可以（就像您已经做过的那样）使用`unsignedIntValue`：

```
unsigned x = [val unsignedIntValue]; 
```

或将属性存储为“Integer 64”。

*评论：*

*   我相当确定这不是`arc4random_uniform`.
*   在您的第一个代码示例`arc4random_uniform(2^32-1)`中，您应该注意这`^`是异或，而不是求幂。

# file-upload - Windows Phone 8 发送文件 HttpClient FileBody

> ID：15155050
> 
> 赞同：0
> 
> 时间：2013-03-01T10:04:59.140
> 
> 标签：file-upload, windows-phone-8, http-post, webclient

您好，我只是在搜索超过 2 天...我的问题：我想向服务器发送一个发布请求，并用这篇文章发送一个文件（FileBody）。

我在 WebClient 类中找到了很多这样的例子。但我是 C# 和 Windows Phone 开发的新手，所以我没有让它工作。因为我看到的唯一方法是“UploadStringAsync”，但互联网“UploadFile”中提到的方法在我的对象中不可用。

```
string postdata = string.Format("cmd={0}&", "show");
postdata += string.Format("latitude={0}&", HttpUtility.UrlEncode("-1"));
...

WebClient wc = new WebClient();
wc.UploadStringAsync(new Uri("http://mydomain/myphp.php", UriKind.Absolute), "POST", postdata); 
```

问题是我必须发送此处提到的 FileBody：http: [//www.codescales.com/category/howto/](http://www.codescales.com/category/howto/)

但我不能将此项目引用到我的 windows phone 项目。我现在很困惑，希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:12:14.463

You can use [RestSharp](http://restsharp.org/), (Nuget it)

Contains several options to upload files:

```
 public IRestRequest AddFile(string name, string path);
    public IRestRequest AddFile(string name, Action<System.IO.Stream> writer, string fileName);
    public IRestRequest AddFile(string name, byte[] bytes, string fileName);      
    public IRestRequest AddFile(string name, Action<System.IO.Stream> writer, string fileName, string contentType);      
    public IRestRequest AddFile(string name, byte[] bytes, string fileName, string contentType); 
```

# eclipse-rcp - Eclipse Virtual TableViewer 过滤和排序？

> ID：15155059
> 
> 赞同：1
> 
> 时间：2013-03-01T10:05:12.497
> 
> 标签：eclipse-rcp

在 RCP 应用程序中，我使用带有 LazyContentProvider 和 SWT.VIRTUAL 标志的 TableViewer 来显示来自数据库的大量数据。这工作正常。

但是我们想在 TableViewer 中进行过滤，但它不起作用。

任何人都可以帮助我如何通过过滤和排序制作虚拟 TableViewer ...

# css - 三星 Galaxy Note II 的 CSS 媒体查询

> ID：15155060
> 
> 赞同：1
> 
> 时间：2013-03-01T10:05:15.340
> 
> 标签：css, media, media-queries, samsung-mobile

有人可以帮我告诉我用 CSS 媒体查询定位三星 Galaxy Note II 的最佳方法是什么？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:09:05.087

瞄准屏幕分辨率——这样你的规则将适用于多个设备，而不是你必须针对几十个不同的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T23:57:25.360

您通常不会针对特定设备。相反，您可以为视口宽度或设备宽度指定规则。第一步是确保您的 html 设置正确。

### 文档类型和视口

我知道如果不指定文档类型`window`，javascript 中的元素不会获得内部宽度。这会弄乱css中的媒体查询，因此请指定它。

```
<!DOCTYPE html> 
```

添加一个特定于微软的标签，意思是“最近的一切”关于遵循 W3C 规范。否则 Windows Phone 浏览器可能会搞砸。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

最后确保你有一个正确的视口元标记。例如[，根据 wikipedia](http://en.wikipedia.org/wiki/Samsung_Galaxy_Note_II)，Galaxy Note II 具有`3 subpixels/pixel`. 这意味着页面将呈现为屏幕宽度的 3 倍，用户一次只能看到页面的 1/3，并且需要水平滚动。

下面的元标记`<head>`修复了这个问题。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

以上是[HTML 5 Boilerplate](http://html5boilerplate.com/)的全部内容。如有疑问，请从那里开始。

### 媒体查询

在您的 CSS 中，您可以根据设备的宽度和高度指定媒体查询。通常你只关心宽度，但你也可以为设备的宽度和高度定制规则。

```
@media screen and (max-width: 800px) {
    /* rules here */
    .sidebar { display: none; }
} 
```

根据我的经验，媒体查询中的规则具有优先权。有一篇关于设备尺寸的[CSS 技巧文章可以帮助您入门。](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

### 网络检查员

为了测试它是否有效，Chrome 和 Firefox 开发工具都有适用于流行设备的模拟器。例如在 Chrome 中，打开开发工具并单击电话图标。

![chrome web 检查器按钮](../Images/5909551ecc72751fbecd4841e34f8b0b.png)

然后选择您想要的设备并使用 css 查询，直到它看起来不错。

![chrome web 检查器 Galaxy Note](../Images/cebf6fdb1bcabfae82632c5e2fb75f7e.png)

我已经切断了图像，但标题清楚地呈现正确。

# android - 如何在 Eclipse 中切换工作区？

> ID：15155061
> 
> 赞同：1
> 
> 时间：2013-03-01T10:05:15.320
> 
> 标签：android, eclipse, macos, workspace

我在 MacOS 上开发一个 Android 项目。最近我不得不在另一个位置创建我的项目的副本。说它是`Users/user/SVN/Applications/BarPoject/AndroidBarProject`，现在它是`Users/user/Projects/AndroidBarProject`。

现在我正在尝试让 Eclipse 在新位置使用该项目。启动 Eclipse 时，我浏览到新工作区，然后单击“确定”，然后出现一个弹出警报，内容如下：

```
An error has occurred. See the log file /Users/user/Projects/AndroidBarProject/.metadata/.log 
```

我接下来要做的是在旧工作区中打开 Eclipse 并单击`File/Switch Workspace`，但我再次看到完全相同的弹出消息。我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T05:09:33.963

打开 Eclipse -> 文件 -> 切换工作空间 -> 其他

# php - 如何在服务器端播放歌曲列表并在php中只将当前歌曲的歌词发送到客户端？

> ID：15155071
> 
> 赞同：3
> 
> 时间：2013-03-01T10:05:53.307
> 
> 标签：php, media, jscript

这是一个适合办公室工作人员的小包装。我正在尝试开发一个`php`应该`mp3`在服务器上运行歌曲并将当前歌曲的歌词（仅）发送到客户端的应用程序。我需要在服务器中随机播放歌曲列表，并且当前歌曲的歌词（在服务器上运行）应该在客户端发送。为此，我做了以下事情（所有事情都在 localhost 中完成）::

```
 database name:album
  table name: song(id,name,lyrics,status)
  Note: this is manual update done by admin::
  filename: - admin.php
  $id = $_POST['id'];
  mysqli_query($con,"update album set status=0");//all song status cleared
  mysqli_query($con,"update album set status=1 where id=$id");//status with value 1 is playing on               server 
```

文件名：-client.php

```
<html>
    <meta http-equiv="refresh" content="1" >
    <body align="center" bgcolor="skyblue">
    <?php
    $con=mysqli_connect("localhost","root","root","test");
    // Check connection
    if (mysqli_connect_errno())
    {
        echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }
    //echo $id;
    $result = mysqli_query($con,"select name,lyrics from album where album.status=1");
    //echo last_query();die;
    while($row = mysqli_fetch_array($result))
    {
        echo "<h1>".$row['name']."</h1>";
        echo "<br />";
        echo "<h3>".$row['lyrics']."</h3>";
    }
    mysqli_close($con);
    ?>
    </body>
</html> 
```

现在，上面的代码一切正常，但管理员应该在每次服务器播放歌曲时更新。我需要这个任务自动化。为此，我需要在客户端播放要播放的歌曲列表（来自数据库）及其对应的歌词。该怎么办？？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:30:09.427

我认为这就是您想要的（它使用 mp3 播放器 mpg123，但您可以使用其他任何东西（cvlc、mplayer、...）：

```
<?php
set_time_limit(0);
$con=mysqli_connect(...);
// Check connection
if (mysqli_connect_errno()){
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
while(true){
  mysqli_query($con,"update album set status=0");
  $res = mysqli_query($con,"select id, file from album order by rand() limit 1");
  $row = mysqli_fetch_assoc($res);
  mysqli_query($con,"update album set status=1 where id=".$row['id']);
  passthru('mpg123 '.escapeshellarg($row['file']));
} 
```

此脚本旨在从命令行执行（而不是使用 Web 服务器）

# jar - 如何蚂蚁构建liferay-yuicompressor.jar？

> ID：15155073
> 
> 赞同：0
> 
> 时间：2013-03-01T10:06:00.223
> 
> 标签：jar, weblogic, liferay

我在 weblogic 10 上使用 liferay 5.2 sp 2。

我需要 domain 的 lib 文件夹中的 liferay-yuicompressor.jar 文件。我正在尝试按照此链接中的说明创建 .jar 文件：http: [//issues.liferay.com/browse/LPS-3169](http://issues.liferay.com/browse/LPS-3169)

当我 ant build-yui 我面临以下异常。

get-swing-ex: [mkdir] 创建目录：D:\Liferay Material\GOSI\liferay-portal-src-5.2.2\liferay-portal-src-5.2.2\portal-impl\20130301133406114\rhino1_6R7\toolsrc\ com\liferay\mozilla\javasc ript\tools\debugger\downloaded [获取] 获取：http: [//java.sun.com/products/jfc/tsc/articles/treetable2/downloads/src.zip](http://java.sun.com/products/jfc/tsc/articles/treetable2/downloads/src.zip) [获取] 收件人：D :\Liferay Material\GOSI\liferay-portal-src-5.2.2\liferay-portal-src-5.2.2\portal-impl\20130301133406114\rhino1_6R7\toolsrc\com\liferay\mozilla\javascript\tool s\debugger\下载\swingExSrc.zip [get] [http://java.sun.com/products/jfc/tsc/articles/treetable2/downloads/src.zip](http://java.sun.com/products/jfc/tsc/articles/treetable2/downloads/src.zip)永久移至[http://www.oracle.com/technetwork/java/索引.html](http://www.oracle.com/technetwork/java/index.html) [解压] 展开：D:\Liferay Material\GOSI\liferay-portal-src-5.2.2\liferay-portal-src-5.2.2\portal-impl\20130301133406114\rhino1_6R7\toolsrc\com\liferay\mozilla\javascri pt\tools\debugger\downloaded\swingExSrc.zip 到 D:\Liferay Material\GOSI\liferay-portal-src-5.2.2\liferay-portal-src-5.2.2\portal-impl\20130301133406114\rhino1_6R7\toolsrc\ co m\liferay\mozilla\javascript\tools\debugger\downloaded

构建失败

据我了解，它正在尝试从 [http://java.sun.com/products/jfc/tsc/articles/treetable2/downloads/src.zip](http://java.sun.com/products/jfc/tsc/articles/treetable2/downloads/src.zip)获取 .zip 文件， 但它不再可用并移至[http： //www.oracle.com/technetwork/java/index.html](http://www.oracle.com/technetwork/java/index.html)

我需要你的帮助来获取 liferay-yuicompressor.jar 文件。请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:38:11.900

[Nakul，在 weblogic 上部署 liferay 时](https://stackoverflow.com/questions/15130958/facing-exception-while-deploying-liferay-on-weblogic/15138957#15138957)，我正在回复您面临异常的其他帖子。抱歉，我误解了您对该帖子的最后评论，因为我使用的是 LifeRay 6.x，而不是 5.x。

我们如何禁用运行时的缩小，这样您就不需要使用 liferay-yuicompressor.jar。

您可以将以下内容添加到`portal-ext.properties`

```
javascript.fast.load=false 
theme.css.fast.load=false 
```

如果出于性能原因您仍然喜欢进行缩小，您可以在构建期间执行此操作，如下所述：http: [//yui.github.com/yuicompressor/](http://yui.github.com/yuicompressor/)。在运行时和构建时间最小化之间，我总是更喜欢构建时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T19:05:09.700

尝试发表评论

```
<ant antfile="toolsrc/build.xml" target="compile"/> 
```

进入根 build.xml

不仅如此，如果您对 xbean.jar 有类似的问题，只需将 *without-xmlimpl: no*设置 为 build.properties 文件

# perl - 查询字符串加密

> ID：15155082
> 
> 赞同：-6
> 
> 时间：2013-03-01T10:06:37.557
> 
> 标签：perl, encryption, query-string

我在*perl*工作。我需要`querystring`对编辑页面进行加密。

现在我正在`querystring`传递`?id=1`

`?id=hjjkdty4567778xvcvbqeweretrtryfghghgcg5677rffhjvj` 像那样。

有人知道这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:32:35.507

I take it that you have information in a URL that you want to encrypt.

If all you want is that the query string isn't immediately readable then something simple like rot13 encoding may be suitable. Take a look at [`Crypt::Rot13`](http://search.cpan.org/~ayrnieu/Crypt-Rot13-0.6/Rot13.pm).

If you need more secure encrypting than that then another of the `Crypt::` modules will suit your purpose, so take a look on CPAN.

# windows-8 - 了解 Windows 8 设备支持多少并发接触点

> ID：15155084
> 
> 赞同：0
> 
> 时间：2013-03-01T10:06:43.947
> 
> 标签：windows-8, microsoft-metro, windows-runtime, touch, multi-touch

对于 Windows 8 应用程序，是否有办法以编程方式检查设备支持多少并发接触点？

有一些设备（例如三星 Ativ、WinRT）只允许五个并发接触点。对于我正在进行的项目，我需要至少有十个并发接触点，所以我想检查这些情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:38:45.140

查看[TouchCapabilities](http://msdn.microsoft.com/en-us/library/windows/apps/br225644.aspx)，有[TouchPresent](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.input.touchcapabilities.touchpresent.aspx)来确定触摸是否存在 :) 然后[Contacts](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.input.touchcapabilities.contacts.aspx)为您提供点数。

对于 HTML5/JavaScript 应用程序，还有：[msMaxTouchPoints](http://msdn.microsoft.com/en-us/library/windows/apps/hh779855.aspx)

另请参阅[输入：设备功能示例](http://code.msdn.microsoft.com/windowsapps/Input-device-capabilities-31b67745)

# jquery - Jquery 为第二个选择框动态填充 optgroup

> ID：15155086
> 
> 赞同：0
> 
> 时间：2013-03-01T10:06:47.963
> 
> 标签：jquery, multiple-select, optgroup, auto-populate

我在两个多选框中有一个很长的选项列表，我想动态填充`select_B`基于的选项`select_A`，例如：

我多次选择 opt1 和 opt2 from `select_A`，`select_B`将显示 optgroup 的选项，`id=sub1`并且`id=sub2`只有，如果我取消选择 opt1 并选择 opt3 from `select_A`，`select_B`将删除 optgroup`sub1`并保留`sub2`and `sub3`，依此类推，具有控制的灵活性。

```
<select id="select_A" multiple="multiple" size="10">
    <optgroup label="group 1">
        <option value="opt1" id="main1">opt1</option>
        <option value="opt2" id="main2">opt2</option>
    <optgroup label="group 2">
        <option value="opt3" id="main3">opt3</option>
</select>

<select id="select_B" multiple="multiple" size="10">
    <optgroup label="opt1" id="sub1" style="display:none;">
        <option value="1A">1A</option>
        <option value="1B">1B</option>

    <optgroup label="opt2" id="sub2" style="display:none;">
        <option value="2A">2A</option>
        <option value="2B">2B</option>

    <optgroup label="opt3" id="sub3" style="display:none;">
        <option value="3A">3A</option>
        <option value="3B">3B</option>
</select> 
```

我已经有了在 Chrome 和 IE 中隐藏 optgroup 的解决[方案](http://hceint.wordpress.com/2011/04/09/hiding-option-groups-optgroups-in-chrome-and-internet-explorer-with-jquery/)：

```
<script>
$(document).ready(function() {
    $.fn.hideOptionGroup = function() {
        $(this).hide();
        $(this).children().each(function(){
        $(this).attr("disabled", "disabled").removeAttr("selected");
    });

    $(this).appendTo($(this).parent());

    }

    $.fn.showOptionGroup = function() {
        $(this).show();    
        $(this).children().each(function(){
        $(this).removeAttr("disabled");
    });

        $(this).prependTo($(this).parent());
        $(this).parent().animate({scrollTop:0},0);
    }

    $("#sub1,#sub2").showOptionGroup();
    $("#sub1,#sub2").hideOptionGroup();
});
</script> 
```

请帮助和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:50:08.757

看到这个：[样本](http://jsfiddle.net/WtXss/10/)

```
 $("#select_A").change(function () {
    $("#select_B").children("optgroup").children().prop("disabled", "disabled").prop("selected", false);
    var arr = $(this).val();
    for (var i = 0; i < arr.length; i++) {
        $("#select_B").children("optgroup[label=" + arr[i] + "]").children().prop("disabled",false).prop("selected", "selected");
    }
    $("#select_B").focus();
 }); 
```

# java - 估计文件是否为 MIME 类型

> ID：15155087
> 
> 赞同：8
> 
> 时间：2013-03-01T10:06:48.240
> 
> 标签：java, mime-types

此方法应检查文件是否为 MIME 类型。为了实现这个目标，我使用[了 probeContentType()](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/spi/FileTypeDetector.html#probeContentType%28java.nio.file.Path%29)方法。
然而，也许是决定相同问题的另一种方式。还有哪些其他选择（如果有的话）？

**代码：**

```
class ProbeContentTypeCheker implements Checker {

    @Override
    public boolean check(File fileCheck) {
        try {
            Path filePath = FileSystems.getDefault().getPath(
                    fileCheck.getAbsolutePath());
            if ((Files.probeContentType(filePath) != null)) {
                return true;
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

        return false;
    }
} 
```

**问题：**

*   还有其他方法可以检查文件中的 MIME 类型吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T09:27:00.183

有两种获取文件 mime 类型的方法：

1.  [通过文件的幻数](http://en.wikipedia.org/wiki/File_format#Magic_number)识别- 这是一种可靠的方法，但它需要从文件中读取信息
2.  通过文件扩展名猜测 - 这是一种快速的方法，但可能不太准确

以下解决方案使用第一种方法：

1.  [Apache Tika](http://tika.apache.org/) - 一个使用现有解析器库从各种文档中检测和提取元数据和结构化文本内容的工具包
2.  [JMimeMagic](http://sourceforge.net/projects/jmimemagic/) - 用于确定文件或流的 MIME 类型的 Java 库
3.  [mime-util](http://sourceforge.net/projects/mime-util/) - 使 Java 程序能够根据文件扩展名、魔术数据和内容嗅探检测 MIME 类型

以下解决方案使用第二种方法：

1.  javax.activation.MimetypesFileTypeMap - JavaBeans 激活框架的这一部分。MimetypesFileTypeMap 在用户系统的不同位置查找 MIME 类型文件条目。
2.  使用 java.net.URL - 扩展名和 mime 类型之间的映射在文件 [jre_home]/lib/content-types.properties 中定义

有关更多信息，请参阅此[帖子](http://www.rgagnon.com/javadetails/java-0487.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:31:36.080

您可以使用`String mimeType = new MimetypesFileTypeMap().getContentType(theFile);`.

请注意，如果未找到 MIME 类型，`application/octet-stream`则返回而不是`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:00:05.617

如果您不能使用 Java 7，另一种选择是使用`URLConnection.guessContentTypeFromName(String fileName)`。请注意，如果无法猜测内容类型，则该方法将返回`null`.

# css - z-index 未激活

> ID：15155090
> 
> 赞同：0
> 
> 时间：2013-03-01T10:07:03.467
> 
> 标签：css, z-index

我有一个小例子，两个相邻的 div 带有背景图像。这个 div 是基于磁贴的编辑器中的磁贴。我想将图像放入第一个 div 并更改图像的位置，以便图像与两个 div 重叠（请参阅[http://jsfiddle.net/WRZJe/16/](http://jsfiddle.net/WRZJe/16/)）。我已经设置了所有 div 的 z-index 并且我已经设置了图像的 z-index。divs 和 image 的 position 属性都设置为 absolute：

```
<body id="exploration-body">
    <div class="dungeon-container" style="left: 1040px; top: 720px;">
        <div class="dungeon-canvas-full-screen" id="dungeon_canvas">
            <div style="top: -720px; left: -1040px; 
                   background-position: -82px -162px;" class="show-tile">
                <img id="token-1" class="token-img"        
                   src="1.png" alt="token1" style="top: 0px; left: 40px">
            </div>            
            <div style="top: -720px; left: -960px; background-position: -82px -162px;" class="show-tile">
            </div>            
        </div>
    </div>
</body> 
```

这是相关的css代码：

```
.dungeon-container {
    position: absolute;
}

.show-tile {
    background-image: url("stone_dungeon.png");
    height: 80px;
    width: 80px;
    position: absolute;
    z-index: 5;
}

.token-img {
    position: absolute;
    z-index: 50;
} 
```

由于图像的 z-index 高于两个 div，因此我希望将图像绘制在两个 div 的前面。但是页面的行为就像没有给定的 z-indexes。图像隐藏在第二个 div 后面，并且会在包含 div 的图像之前的每个 div 前面。

什么可能导致浏览器（我测试过 Safari 和 FF）忽略给定的 z-index？

更新：我添加了来自实际应用程序（[http://robitzki.de/zindex.png](http://robitzki.de/zindex.png)）的屏幕截图，显示图像移动到那些 div 后面，这些 div 放置在包含 div 之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:11:31.290

您必须将第二个 div 放在第一个 div 之前，以便它位于 img 标签之前

```
<body id="exploration-body">
    <div class="dungeon-container" style="left: 1040px; top: 720px;">
        <div class="dungeon-canvas-full-screen" id="dungeon_canvas">
            <div style="top: -720px; left: -960px; background-position: -82px -162px;" class="show-tile">
            </div>            
            <div style="top: -720px; left: -1040px; background-position: -82px -162px;" class="show-tile">
                <img id="token-1" class="token-img" src="http://dungeonpilot.com/assets/tokens/1.png" alt="token1" style="top: 0px; left: 40px">
            </div>            
        </div>
    </div>
</body> 
```

[http://jsfiddle.net/WRZJe/17](http://jsfiddle.net/WRZJe/17)

如果您可以将 img 标签移出 div 并使用与 div 相似的坐标定位它们，那么以下将产生所需的显示

```
<body id="exploration-body">
    <div class="dungeon-container" style="left: 1040px; top: 720px;">
        <div class="dungeon-canvas-full-screen" id="dungeon_canvas">
            <img id="token-1" class="token-img" src="http://dungeonpilot.com/assets/tokens/1.png" alt="token1" style="top: -720px; left: -1000px" />
            <img id="token-2" class="token-img" src="http://dungeonpilot.com/assets/tokens/1.png" alt="token1" style="top: -720px; left: -930px" />
            <div style="top: -720px; left: -960px; background-position: -82px -162px;" class="show-tile">
            </div>            
            <div style="top: -720px; left: -1040px; background-position: -82px -162px;" class="show-tile">
            </div>            
        </div>
    </div>
</body> 
```

[http://jsfiddle.net/WRZJe/20](http://jsfiddle.net/WRZJe/20)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:30:20.793

因为第二`.show-tile`个`z-index`比图片高，图片会被截掉

试试这个：

```
.dungeon-container {
    position: absolute;
}

.show-tile {
    background-image: url("stone_dungeon.png");
    height: 80px;
    width: 80px;
    position: absolute;
    /*z-index: 5;*/
}

.token-img {
    position: absolute;
    z-index: 1;
} 
```

[检查小提琴](http://jsfiddle.net/WRZJe/22/)以查看它的工作原理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:35:22.037

每个`div.show-tile`（都是兄弟姐妹）创建一个自己的堆叠上下文！子元素保留在父元素的堆叠上下文中，因此`img`如果它与具有更高 z-index 作为图像父 div 的 div 相邻，您将被隐藏。*在这种情况下，图像本身 (=child) 的 z-index 无关紧要*。

为了使图像与所有 div 重叠，最干净的解决方案是*不*将其放入其中一个 div 中，而是将其作为`.show-tile`div 的兄弟分开放置，并为其赋予最高的 z-index。

或者，您可以省略您在 div 上的绝对定位 - 这会使`img`它的位置取决于`#dungeon_canvas`.

如果你不能这样做，你必须确保保存图像的 div 始终具有最高的 z-index。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T10:37:07.513

现在像这个**[现场演示一样轻松地做到这一点](http://jsfiddle.net/WRZJe/31/)**

**html代码**

```
<div class="main-container"> 
    <div class="pic-1 pic-5"></div>
    <div class="pic-1 pic-3"></div>
    <div class="pic-1 pic-2"></div>
    <div class="pic-1 pic-4"></div>
    <img src="http://dungeonpilot.com/assets/tokens/1.png" alt="" class="pic-change">
</div> 
```

**CSS**

```
.pic-1 {
    background-image: url("http://dungeonpilot.com/assets/stone_dungeon.png");
    height: 80px;
    width: 80px;
    float:left;
    position:relative;
    background-position: -3px -3px;
}
.pic-2{
    clear:left;
}
.pic-change{
    position:absolute;
    left:40px;
    top:40px;
    z-index:3;
}
.main-container{
    position:relative;

}
.pic-4{
    z-index:4;

} 
```

***[演示](http://jsfiddle.net/WRZJe/31/)***

# mysql - 带有来自表的子查询的慢 MySQL 查询

> ID：15155092
> 
> 赞同：0
> 
> 时间：2013-03-01T10:07:07.257
> 
> 标签：mysql, database, subquery

我正在尝试根据 IF 语句恢复一个字符串，但它非常慢。

它与第一个子查询有关，但我不确定如何重新排列它以恢复相同的结果但速度更快。

这是我的 SQL：

```
SELECT IF
(
    (
        SELECT COUNT(*)
        FROM 
            (
                SELECT DISTINCT enquiryId, type 
                FROM parts_enquiries, parts_service_types AS pst 
                WHERE parts_enquiries.serviceTypeId = pst.id
            ) AS parts
        WHERE parts.enquiryId = enquiries.id
    ) > 1, 'Mixed',
    (
        SELECT DISTINCT type 
        FROM parts_enquiries, parts_service_types AS pst 
        WHERE parts_enquiries.serviceTypeId = pst.id AND enquiryId = enquiries.id
    )
) AS partTypes
FROM  enquiries,
entities
WHERE enquiries.entityId = entities.id 
```

我怎样才能让它更快？

* * *

我在下面修改了我的原始查询，但我收到子查询返回多行的错误：

```
SELECT
(SELECT
   CASE WHEN COUNT(DISTINCT type) > 1 THEN 'Mixed' ELSE `type` END AS type
FROM parts_enquiries 
INNER JOIN parts_service_types AS pst ON parts_enquiries.serviceTypeId = pst.id
INNER JOIN enquiries ON parts_enquiries.enquiryId = enquiries.id
INNER JOIN entities ON enquiries.entityId = entities.id
GROUP BY enquiryId) AS partTypes
FROM  enquiries,
entities
WHERE enquiries.entityId = entities.id 
```

* * *

![解释结果](../Images/0c91b82a521149fb8f55c5ca190b6fa9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:42:37.370

请查看此查询是否产生相同的结果：

```
SELECT 
   enquiryId, 
   CASE WHEN COUNT(DISTINCT type) > 1 THEN 'Mixed' ELSE `type` END AS type
FROM parts_enquiries 
INNER JOIN parts_service_types AS pst ON parts_enquiries.serviceTypeId = pst.id
INNER JOIN enquiries ON parts_enquiries.enquiryId = enquiries.id
INNER JOIN entities ON enquiries.entityId = entities.id
GROUP BY enquiryId 
```

但NB的评论仍然有效。要查看是否使用了和索引以及其他信息，我们需要查看`EXPLAIN`和表定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:47:18.250

这应该可以得到你想要的。

我将首先预先查询您的零件查询和零件服务类型，查找零件“类型”的计数和最小值，按查询 ID 分组。

然后，针对该结果运行 IF() 。如果不同计数 > 0，则为“混合”。如果只有一个，因为我做了 MIN()，它只会有你想要的那个值的描述。

```
SELECT
      E.ID
      IF ( PreQuery.DistTypes > 1, 'Mixed', PreQuery.FirstType ) as PartType
   from 
      Enquiries E
         JOIN ( SELECT
                      PE.EnquiryID,
                      COUNT( DISTINCT PE.ServiceTypeID ) as DistTypes,
                      MIN( PST.Type ) as FirstType
                   from 
                      Parts_Enquiries PE
                         JOIN Parts_Service_Types PST
                            ON PE.ServiceTypeID = PST.ID
                   group by 
                      PE.EnquiryID ) as PreQuery
            ON E.ID = PreQuery.EnquiryID 
```

# sql - Yii SQL CommandBuilder 获取随机结果

> ID：15155093
> 
> 赞同：3
> 
> 时间：2013-03-01T10:07:10.093
> 
> 标签：sql, yii

我正在尝试在我的模型中查询随机结果。

```
public function ListingsRandom(){

    // This gets 10 random listings
    $results = Yii::app()->db->createCommand()
    ->setFetchMode(PDO::FETCH_OBJ)
    ->select('*')
    ->from('listings')
    ->random('RAND')
    ->limit(10)
    ->queryAll();                    

    return $results;
} 
```

这对我不起作用。

如何从表格中随机获得 10 个结果？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T10:09:40.077

改变：

```
 ->random('RAND') 
```

到：

```
 ->order(array('RAND()')) 
```

# outlook - Exchange EWS 更改其他用户日历的权 限

> ID：15155101
> 
> 赞同：0
> 
> 时间：2013-03-01T10:07:30.520
> 
> 标签：outlook, exchange-server, exchangewebservices, outlook-web-app

想象一个人 A 共享他的日历。B 人如何能够修改 A 人日历的权限？我尝试过赋予 OWNER 权限，但这似乎不起作用。

如果没有假冒权利，这可能吗？

天呐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:48:36.863

这？： [配置 Exchange 模拟](http://msdn.microsoft.com/en-us/library/exchange/bb204095%28v=exchg.140%29.aspx)

# image - 调整大小的图像未出现在我的项目中

> ID：15155104
> 
> 赞同：0
> 
> 时间：2013-03-01T10:07:48.753
> 
> 标签：image, windows-8, png, splash-screen

我正在 w8 上开发 Metro 应用程序。我的启动画面图像太小，出现在屏幕中间。需要的是 620*300 像素的图片，所以我改变了图片的尺寸并在项目资产文件夹中替换它而不更改名称，我在属性中查看图片实际上是 620*300 像素，没有appmanifest 文件中的任何错误，但是当我启动程序时，图像大小是相同的，没有任何改变。

我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:21:10.953

这是预期的行为。图像将出现在屏幕中央，并带有您在清单中指定的背景颜色。

# java - 对象Java的深拷贝

> ID：15155108
> 
> 赞同：5
> 
> 时间：2013-03-01T10:08:04.633
> 
> 标签：java, clone

我正在尝试克隆 MyGraph 的一个对象，我希望它是一个深层副本，因此对象内的数组列表也被克隆。现在我有：

```
public static MyGraph deepCopy(MyGraph G){
    MyGraph Copy = (MyGraph) G.clone();

    Copy.VertexG = (ArrayList<Integer>) G.VertexG.clone();
    Copy.EdgeG = (ArrayList<String>) G.EdgeG.clone();

    return Copy;
} 
```

当它试图克隆 arraylist 时，这将返回一个错误。我不确定这是否是将数组列表添加到对象的正确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:38:09.567

中的`clone`操作`ArrayList`返回对象的浅拷贝，并且不适合您的目的。手动解决方法是：

1.  创建与源列表大小相同的目标数组列表
2.  迭代源列表并将每个项目的克隆创建到目标列表中

显然，这仅在数组列表包含实现`clone`的项目时才有效，并且项目`clone`操作实际上返回一个深层副本。换句话说，它不能保证。实际上，为 Java 对象实现深度克隆功能并不容易，请参阅[Java 中的广泛讨论：深度克隆/复制实例](https://stackoverflow.com/questions/2156120/java-recommended-solution-for-deep-cloning-copying-an-instance)和其他 SO 线程的推荐解决方案，以了解可用选项。除了那里提供的答案外，还有其他一些选项：

### 序列化

如果层次结构中的所有（必需的）对象都可以序列化，那么您可以使用这个简单的代码进行深度克隆：

```
public MyGraph deepCopy() {
    try {
        final ByteArrayOutputStream baos = new ByteArrayOutputStream(256);
        final ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(this);
        oos.close();

        final ObjectInputStream ois = new ObjectInputStream(
                new ByteArrayInputStream(baos.toByteArray()));
        final MyGraph clone = (QuicksortTest) ois.readObject();
        return clone;
    } catch (final Exception e) {
        throw new RuntimeException("Cloning failed");
    }
} 
```

请注意，一些深度克隆库将标准 Java 序列化与反射黑客和/或字节码检测结合起来，以使整个对象层次结构完全可序列化。您可能需要，也可能不需要。

### 复制工具

例如，[Dozer](http://dozer.sourceforge.net/)提供快速的深拷贝功能。[Orika](http://code.google.com/p/orika/)也可以达到相同的效果，尽管需要更多配置：

```
public MyGraph deepCopy() {
    final DozerBeanMapper mapper = new DozerBeanMapper();
    final QuicksortTest clone = mapper.map(this, MyGraph.class);
    return clone;
} 
```

当然，唯一的缺点是您需要将额外的依赖项拉入您的项目。

*总而言之，您的`deepCopy`方法不应该**是**静态的。此外，您应该认真考虑通过将对象的状态设为私有并实现 getter/setter 来封装对象的状态。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:58:20.143

您调用的每个类`clone()`都必须实现该`Cloneable`接口。从您的评论中，我了解您的`MyGraph`课程没有实现该`Cloneable`接口。在这种情况下，`Object.clone()`抛出`CloneNotSupportedException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:05:20.033

尝试进行深度复制`cloning`很复杂，因为您需要确保所有类都实现**Cloneable**接口并且它们具有**clone()**定义。

更好的方法是通过`Copy Constructor or Serialization`. 这是我详细讨论过[的博客。](http://geekrai.blogspot.com/2013/02/shallow-copy-vs-deep-copy-in-java.html)希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:05:59.433

Java中克隆的一个基本概念问题[可以说*是*基本问题]是一个类型的字段可能`List<String>`代表至少五个非常不同的事物：

*   *唯一*现存的对可变列表的引用，用于封装其可变状态，但作为唯一现存的引用 - 不会封装其身份（该列表可以替换为包含相同项目的不同列表，不改变程序的语义）。包含此字段的对象的正确克隆将包含对包含相同项目的不同列表的引用。

*   对可变列表的引用，虽然它允许自己被变异，但永远不会暴露给任何实际会改变它的东西。*仅*当其他代码不会改变列表或将其暴露给可能这样做的代码时，才能与其他代码共享此引用。包含此字段的对象的正确克隆可以包含对原始列表或包含相同项目的不同列表的引用。

*   对不可变列表的引用。此引用可以与其他代码自由共享，而无需考虑该代码如何公开它。如上所述，包含此字段的对象的正确克隆可以包含对原始列表或副本的引用。

*   对某个其他对象拥有的可变列表的引用，该列表的保留是为了将其绑定到封装在列表中的其他对象状态的那些方面。持有该字段的对象的正确克隆必须持有对*同一列表*的引用，而不是其副本。

*   对这个对象拥有的可变列表的引用，但其他对象也有一个引用，目的是观察这个对象的状态，或者向这个对象提供信息。拥有该字段的对象不能单独正确克隆，尽管可以克隆一组相互连接的对象，并为新的对象集提供一组与原始组中的对象同构的互连。

字段所引用的对象的具体类型可以区分上述一些情况，但不能区分所有情况。特别是，第一个和第四个场景需要克隆方法的不同行为，尽管在这两个场景中引用可能指向一个`ArrayList<string>`.

# android - Android + 对活动或 XML 文件有任何限制吗？

> ID：15155110
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:08:09.800
> 
> 标签：android, xml, android-activity, limit

我有以下要求：

-----> 显示五个不同颜色的元素并允许用户选择正确的一个。

-----> 就像我想随机显示 16 种（意味着 16*5 = 16 个活动的 80 个元素）。

===> 为此，我创建了 16 个活动和相应的 16 个 XML 文件，并随机使用它们。

&&

首先，我将显示 5 种颜色并让用户选择一种（说绿色），如果正确，我会让他从另一组 5 种颜色中选择一种（这次是红色）......& 以此类推.. .就像我必须让他随机选择 16 种颜色。然后重复这 16 种随机颜色，直到他按下返回按钮。这就是确切的流程

到一天结束时，我处于小困境中，可能会存在某种逻辑，通过减少代码来顺利完成工作。

如果是，请告诉我逻辑。

我有所有 80 个不同的元素，在 16 个活动中展示它们，每个活动 5 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:11:07.703

如果元素类型相同，您可以拥有一个 Activity 而不是 16 个，并在创建 Activity 时选择要显示的内容（甚至为此使用 Fragments）。无论如何，如果您想获得完整的答案，您必须在您的问题中更加具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:15:44.083

您可以创建一个 Activity 和 16 个不同的布局，而不是创建 16 个不同的活动。您可以动态更改活动的布局，我认为这会很好，如果真的不需要它，请避免创建这么多活动。

# mysql - Mysql表单新的优化查询

> ID：15155112
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:08:17.680
> 
> 标签：mysql

我在数据库中有四个表，

用户、计数、优惠券、帐户

需要以下条件的用户数：

1.  然后从用户表中选择所有用户
2.  从计数中选择用户不在过去 14 天列表中的位置，然后
3.  选择不在列表中的用户，检查优惠券表中是否有。如果他们不在优惠券表中，则获取这些用户 ID
4.  选择帐户表并检查这些用户在帐户表中是否有任何计数或插入。如果是，则将所有这些用户设置在一个数组中或将其打印出来。

请任何人帮助我形成良好的查询？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:50:55.130

如果我是对的就拿用户

*   过去14 天**不在**计数表中的人以及
*   谁**不在**优惠券表中。和
*   谁**在**帐户表中

看起来像一个奇怪的 sql，但这里有一个例子：

```
SELECT  
    * 
FROM 
    user
WHERE user_id NOT IN
    ( 
        SELECT 
            user_id 
        FROM 
            `count` 
        WHERE
            DATE_SUB(CURDATE(),INTERVAL 14 DAY) <= date_column
    )
AND user_id NOT IN
    (
        SELECT
            user_id
        FROM
            coupon
    )
AND user_id IN
    (
        SELECT
            user_id
        FROM
            account
    ) 
```

如果这不正确，那么您对您想要什么的解释是错误的，应该予以澄清。这个 sql 一切都可能有问题，因为我不知道你的列（用户 ID？日期？）。但我认为你可以根据自己的喜好更改 sql。

# javascript - 如何解决这个 Javascript 错误 TypeError: 'undefined' is not an object (evaluate 't.subscribe')？

> ID：15155116
> 
> 赞同：2
> 
> 时间：2013-03-01T10:08:25.307
> 
> 标签：javascript, ruby-on-rails, ruby, capybara, poltergeist

当我单击一个项目以在 web 上打开时出现以下错误。我们中的任何人都知道解决方案吗？

> 错误：test_inline_edit_an_item_app_built_via_app_builder(TaskFeature): Capybara::Poltergeist::JavascriptError: 页面上的 Javascript 代码中出现一个或多个错误。如果您不关心这些错误，可以通过在 Poltergeist 配置中设置 js_errors: false 来忽略它们（有关详细信息，请参阅文档）。

* * *

> TypeError：'未定义'不是对象（评估't.subscribe'）在[https://d3tga9h80dykic.cloudfront.net/assets/cd319648/podio-common-amd.js:1](https://d3tga9h80dykic.cloudfront.net/assets/cd319648/podio-common-amd.js:1) /home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/poltergeist-1.1.0/lib/capybara/poltergeist/browser.rb:197:in command' /home/abhay/.rvm/gems /ruby-1.9.3-p362/gems/poltergeist-1.1.0/lib/capybara/poltergeist/browser.rb:42:infind' /home/abhay/.rvm/gems/ruby-1.9.3-p362/gems /poltergeist-1.1.0/lib/capybara/poltergeist/driver.rb:110:in find' /home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/ capybara/node/finders.rb:113:inblock in all'/home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/capybara/node/base.rb: 78：在同步中'/home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/capybara/node/finders.rb:112:inall'/home/abhay/ .rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/capybara/node/finders.rb:26:in block in find' /home/abhay/.rvm/gems/ruby- 1.9.3-p362/宝石/水豚-2.0。2/lib/capybara/node/base.rb:78:insynchronize'/home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/capybara/node/finders。 rb:26:in find' /home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/capybara/session.rb:341:inblock (2 个级别) 在课堂上:Session' /home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/capybara/dsl.rb:51:in block (2 levels) in ' task_feature.rb :489:inblock in test_inline_edit_an_item_app_built_via_app_builder' /home/abhay/podio/auto_deetee/auto_deetee/test/test_helper.rb:69:in login_as' task_feature.rb:473:intest_inline_edit_an_item_app_built_via_app_builder'2/lib/capybara/session.rb:341:inblock（2 个级别）在类：Session' /home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/ capybara/dsl.rb:51:in block (2 levels) in 'task_feature.rb:489:inblock in test_inline_edit_an_item_app_built_via_app_builder' /home/abhay/podio/auto_deetee/auto_deetee/test/test_helper.rb:69:in login_as' task_feature。 rb:473:intest_inline_edit_an_item_app_built_via_app_builder'2/lib/capybara/session.rb:341:inblock（2 个级别）在类：Session' /home/abhay/.rvm/gems/ruby-1.9.3-p362/gems/capybara-2.0.2/lib/ capybara/dsl.rb:51:in block (2 levels) in 'task_feature.rb:489:inblock in test_inline_edit_an_item_app_built_via_app_builder' /home/abhay/podio/auto_deetee/auto_deetee/test/test_helper.rb:69:in login_as' task_feature。 rb:473:intest_inline_edit_an_item_app_built_via_app_builder'

1 次测试，0 次断言，0 次失败，1 次错误，0 次跳过

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T19:58:17.473

当 Poltergeist 在您正在测试的页面上检测到 Javascript 错误时，会发生此错误。Poltergeist 这样做是为了确保您的网站上有无错误的 Javascript 代码（这是大多数人想要的）。

但是，有些人不希望收到有关 Javascript 错误的通知。因此，您可以使用[该`js_errors: false`选项](https://github.com/jonleighton/poltergeist#customization)使此错误消失。（虽然这不会修复你的 Javascript。）

# asp.net - 如何在按钮单击时将 tabPanels 添加到 tabContainer

> ID：15155119
> 
> 赞同：1
> 
> 时间：2013-03-01T10:08:36.053
> 
> 标签：asp.net, ajax, vb.net

我在更新面板中有一个选项卡容器。我想通过单击按钮将生成的选项卡添加到该容器。选项卡被添加。一次，下一次单击该按钮时，前一个选项卡将丢失，并由一个新选项卡替换它。如果可能的话，我想保留标签。这些选项卡稍后将根据单击的按钮填充控件。

我发现许多帖子建议必须在 PostBack 上重新创建标签，但它不起作用。我想我也不知道该怎么做。

我当前的 aspx 文件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" ViewStateMode="Enabled">
    </asp:ScriptManager>

    <asp:Button ID="Button1" runat="server" Text="Add Tab" />
    <div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <ajaxToolkit:TabContainer ID="TabContainer1" runat="server" 
                    ViewStateMode="Enabled">
                </ajaxToolkit:TabContainer>
                <br />
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Button1" />
            </Triggers>
        </asp:UpdatePanel>

    </div>
    </form>
</body>
</html> 
```

这是到目前为止的代码隐藏。

```
Imports AjaxControlToolkit

Public Class WebForm1
    Inherits System.Web.UI.Page

    Private Sub WebForm1_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    End Sub

    Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim newTab As TabPanel = New TabPanel
        Dim rand As New Random
        Dim exampleID As String = rand.Next(1000).ToString
        newTab.ID = exampleID
        newTab.HeaderText = exampleID
        newTab.Controls.Add(New LiteralControl(exampleID))
        TabContainer1.Tabs.Add(newTab)
        Label1.Text = Label1.Text + "<br />" + "Added tab " + newTab.ID.ToString 'Just here for output.
    End Sub

End Class 
```

我确信当前打开的选项卡必须存储在某个地方并在更新面板的回发中重新创建，但就像我说的那样。我该把代码放在哪里，它是如何存储的？

任何帮助将非常感激！谢谢！

# deployment - CMake VS2008 CE 交叉编译-更改（部署-远程目录）

> ID：15155120
> 
> 赞同：1
> 
> 时间：2013-03-01T10:08:39.877
> 
> 标签：deployment, cmake, cross-compiling

是否可以从 CMakeLists.txt 中更改 Visual Studio (2008) 部署 - 远程目录设置。默认 CMake 正在使用：“%CSIDL_PROGRAM_FILES%\”

我想要实现的目标是将多个项目部署到同一个远程目录。所有 dll 和 exe 文件在远程机器上很好地一起用于调试目的。

PS。是否有更改 VisualStudio 设置的通用方法，我认为还需要自定义其他设置。

# asp.net - 按下commandField时如何pevent Gridview.DataBind

> ID：15155141
> 
> 赞同：0
> 
> 时间：2013-03-01T10:10:17.927
> 
> 标签：asp.net, search, gridview, edit, commandfield

我在gridview的最后一列有一个包含“编辑CommandFields更新和取消”的gridview。此外，我的 Gridview 上方有一个搜索按钮，一切都可以正常工作。当我搜索特定列时，我的 Gridview 的“sqlDataSource”在查询中分别发生变化并显示结果。

但是，编辑/更新/取消命令字段按钮刷新整个 Gridview，我丢失了从搜索结果派生的选定可编辑行。

当我单击编辑命令字段时，如何防止 grdiview 数据记录？

任何意见，将不胜感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:40:36.687

你可能错过了著名的 Page.IsPostback check.In vb.net 你将不得不做这样的事情

```
If Not Page.IsPostBack
->your binding code goes here
End if 
```

C＃

```
if (!Page.IsPostBack)
{

  ->your binding code goes here

} 
```

这样，当页面重新加载时，您的结果就不会丢失。

# javascript - jQuery 验证引擎总是使用 select2 验证失败

> ID：15155148
> 
> 赞同：0
> 
> 时间：2013-03-01T10:10:36.683
> 
> 标签：javascript, jquery, jquery-validation-engine, jquery-select2

我遇到了一个奇怪的问题，它没有使用 pos absolute jquery 验证引擎插件进行验证，而是该字段过度验证，我们总是收到“需要字段”提示。

这是我的html：

```
<div class="control-group">
    <label for="funeral_director" class="control-label">Funeral Director</label>

    <div class="controls">
        <select name="funeral_director" id="funeral_director" class="validate[required]">
            <option value=""></option>
            <option value="13">Test User</option>
            <option value="4">Admin User</option>
            <option value="1">Dev User</option>
        </select>
    </div>
</div> 
```

这是我的 select2 javascript：

```
$('#funeral_director').select2({
    blurOnChange: true,
    placeholder: 'Director',
    width: 'resolve'
}); 
```

这是我的验证引擎javascript：

```
$("#addForm").validationEngine({
                prettySelect: true,
                usePrefix: 's2id_'
            }); 
```

我认为这并不重要，因为我还尝试在验证实例化之前和之后将 select2 实例化移动到同一个文件中。但是大量的 javascript 都在`$(function(){/*..code*/})`块中被调用，但是在单独的文件中，验证引擎初始化文件是包含在 select2 初始化文件之前。

选择2 ：3.3.1
jqve：2.6.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-23T05:29:51.597

在**select2.min.js 中**找到这个笔画（在脚本中应该是 2 个笔画）：

`D(this.container,this.opts.element,this.opts.adaptContainerCssClass)`

并在您发现中风后立即添加此代码

`,this.container.removeClass("validate[required]")`

这应该可以解决您的问题。

# python - 如果在多线程的情况下打开新的 qprogressbar，qprogressbar 栏将停止更新

> ID：15155151
> 
> 赞同：0
> 
> 时间：2013-03-01T10:11:00.267
> 
> 标签：python, multithreading, pyqt

我想更新某些事件的进度条上的进度。有多个事件/线程，因此与每个事件/线程相关联的进度条。但是当新线程启动时，前一个线程停止更新进度条。这不应该发生。可以使用以下内容：

```
import sys
from PyQt4 import QtGui, QtCore

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_dialog_progress(object):
    def setupUi(self, dialog_progress):
        dialog_progress.setObjectName("dialog_progress")
        dialog_progress.resize(401, 165)
        self.gridLayout = QtGui.QGridLayout(dialog_progress)
        self.gridLayout.setObjectName("gridLayout")
        self.lblFileName = QtGui.QLabel(dialog_progress)
        self.lblFileName.setText("")
        self.lblFileName.setObjectName("lblFileName")
        self.gridLayout.addWidget(self.lblFileName, 0, 0, 1, 2)
        self.pbarFileSize = QtGui.QProgressBar(dialog_progress)
        self.pbarFileSize.setProperty("value", 0)
        self.pbarFileSize.setObjectName("pbarFileSize")
        self.gridLayout.addWidget(self.pbarFileSize, 1, 0, 1, 2)
        self.label_2 = QtGui.QLabel(dialog_progress)
        self.label_2.setObjectName("label_2")
        self.gridLayout.addWidget(self.label_2, 2, 0, 1, 1)
        self.pbarTotal = QtGui.QProgressBar(dialog_progress)
        self.pbarTotal.setProperty("value", 0)
        self.pbarTotal.setObjectName("pbarTotal")
        self.gridLayout.addWidget(self.pbarTotal, 3, 0, 1, 2)
        self.lblTotal = QtGui.QLabel(dialog_progress)
        self.lblTotal.setText("")
        self.lblTotal.setObjectName("lblTotal")
        self.gridLayout.addWidget(self.lblTotal, 4, 0, 1, 2)
        spacerItem = QtGui.QSpacerItem(213, 20, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Minimum)
        self.gridLayout.addItem(spacerItem, 6, 0, 1, 1)
        spacerItem1 = QtGui.QSpacerItem(20, 5, QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Expanding)
        self.gridLayout.addItem(spacerItem1, 5, 1, 1, 1)
        self.btnPbarCancel = QtGui.QPushButton(dialog_progress)
        self.btnPbarCancel.setObjectName("btnPbarCancel")
        self.gridLayout.addWidget(self.btnPbarCancel, 6, 1, 1, 1)

        self.retranslateUi(dialog_progress)
        QtCore.QMetaObject.connectSlotsByName(dialog_progress)

    def retranslateUi(self, dialog_progress):
        dialog_progress.setWindowTitle(QtGui.QApplication.translate("dialog_progress", "Dialog", None, QtGui.QApplication.UnicodeUTF8))
        self.label_2.setText(QtGui.QApplication.translate("dialog_progress", "Total:", None, QtGui.QApplication.UnicodeUTF8))
        self.btnPbarCancel.setText(QtGui.QApplication.translate("dialog_progress", "Cancel", None, QtGui.QApplication.UnicodeUTF8))

class Ui_dialog_file(object):
    def setupUi(self, dialog_file):
        dialog_file.setObjectName(_fromUtf8("dialog_file"))
        dialog_file.resize(101, 59)
        self.btnCreate = QtGui.QPushButton(dialog_file)
        self.btnCreate.setGeometry(QtCore.QRect(10, 20, 77, 25))
        self.btnCreate.setObjectName(_fromUtf8("btnCreate"))
        self.retranslateUi(dialog_file)
        QtCore.QMetaObject.connectSlotsByName(dialog_file)

    def retranslateUi(self, dialog_file):
        dialog_file.setWindowTitle(QtGui.QApplication.translate("dialog_file", "file", None, QtGui.QApplication.UnicodeUTF8))
        self.btnCreate.setText(QtGui.QApplication.translate("dialog_file", "Create", None, QtGui.QApplication.UnicodeUTF8))

class ProgressDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent = None)
        self.ui = Ui_dialog_progress()
        self.ui.setupUi(self)
#        self.setWindowModality(QtCore.Qt.ApplicationModal)

class MyThread(QtCore.QThread):
    trigger = QtCore.pyqtSignal()
    updateFPD = QtCore.pyqtSignal()
    updateTPD = QtCore.pyqtSignal()
    def __init__(self, parent=None):
        super(MyThread, self).__init__(parent)
        self.pd = ProgressDialog()
        signal = QtCore.SIGNAL("clicked()")
        self.pd.ui.btnPbarCancel.connect(self.pd.ui.btnPbarCancel, signal, self.abort)
        self.aborted= False

    def run(self):
        self.trigger.emit()

    def abort(self):
        self.aborted = True
        print "aborted"
        self.pd.close()

    def setup(self, no):
        self.threadNo = no
        self.name = "Thread %d"%self.threadNo

class Main(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Main, self).__init__(parent)
        self.ui = Ui_dialog_file()
        self.ui.setupUi(self)
        self.ui.btnCreate.clicked.connect(self.start_threads)
        self.count = 0
        self.threadPool = []

    def start_threads(self):
        self.mythread = MyThread(self)
        self.mythread.setup(self.count)
        self.count += 1
        self.mythread.trigger.connect(self.pdialog)
        self.mythread.start()
        self.threadPool.append(self.count)

    def abort(self):
        self.mythread.stop()

    def pdialog(self):
        self.mythread.pd.show()
        i = 1
        self.mythread.pd.ui.pbarTotal.setValue(0)
        self.mythread.pd.ui.pbarFileSize.setValue(0)
        self.mythread.pd.setWindowTitle(self.mythread.name)
        j = 1
        while i < 100:
            while j <= 100:
                self.mythread.pd.ui.lblFileName.setText(self.mythread.name)
                self.mythread.pd.ui.pbarFileSize.setValue(j)
                print "name: %s, fileprogress: %d"%(self.mythread.name,j)
                QtGui.qApp.processEvents()
                j += 1
            i += 1
            j = 1
            self.mythread.pd.ui.pbarTotal.setValue(i)
            print "name: %s, total progress %d"%(self.mythread.name, i)
            QtGui.qApp.processEvents()
            if self.mythread.aborted:
                return
        self.mythread.pd.close()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mainwindow = Main()
    mainwindow.show()
    sys.exit(app.exec_()) 
```

请找到我的新代码：

```
import sys
from PyQt4 import QtGui, QtCore
import time

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_dialog_progress(object):
    def setupUi(self, dialog_progress):
        dialog_progress.setObjectName("dialog_progress")
        dialog_progress.resize(401, 165)
        self.gridLayout = QtGui.QGridLayout(dialog_progress)
        self.gridLayout.setObjectName("gridLayout")
        self.lblFileName = QtGui.QLabel(dialog_progress)
        self.lblFileName.setText("")
        self.lblFileName.setObjectName("lblFileName")
        self.gridLayout.addWidget(self.lblFileName, 0, 0, 1, 2)
        self.pbarFileSize = QtGui.QProgressBar(dialog_progress)
        self.pbarFileSize.setProperty("value", 0)
        self.pbarFileSize.setObjectName("pbarFileSize")
        self.gridLayout.addWidget(self.pbarFileSize, 1, 0, 1, 2)
        self.label_2 = QtGui.QLabel(dialog_progress)
        self.label_2.setObjectName("label_2")
        self.gridLayout.addWidget(self.label_2, 2, 0, 1, 1)
        self.pbarTotal = QtGui.QProgressBar(dialog_progress)
        self.pbarTotal.setProperty("value", 0)
        self.pbarTotal.setObjectName("pbarTotal")
        self.gridLayout.addWidget(self.pbarTotal, 3, 0, 1, 2)
        self.lblTotal = QtGui.QLabel(dialog_progress)
        self.lblTotal.setText("")
        self.lblTotal.setObjectName("lblTotal")
        self.gridLayout.addWidget(self.lblTotal, 4, 0, 1, 2)
        spacerItem = QtGui.QSpacerItem(213, 20, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Minimum)
        self.gridLayout.addItem(spacerItem, 6, 0, 1, 1)
        spacerItem1 = QtGui.QSpacerItem(20, 5, QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Expanding)
        self.gridLayout.addItem(spacerItem1, 5, 1, 1, 1)
        self.btnPbarCancel = QtGui.QPushButton(dialog_progress)
        self.btnPbarCancel.setObjectName("btnPbarCancel")
        self.gridLayout.addWidget(self.btnPbarCancel, 6, 1, 1, 1)

        self.retranslateUi(dialog_progress)
        QtCore.QMetaObject.connectSlotsByName(dialog_progress)

    def retranslateUi(self, dialog_progress):
        dialog_progress.setWindowTitle(QtGui.QApplication.translate("dialog_progress", "Dialog", None, QtGui.QApplication.UnicodeUTF8))
        self.label_2.setText(QtGui.QApplication.translate("dialog_progress", "Total:", None, QtGui.QApplication.UnicodeUTF8))
        self.btnPbarCancel.setText(QtGui.QApplication.translate("dialog_progress", "Cancel", None, QtGui.QApplication.UnicodeUTF8))

class Ui_dialog_file(object):
    def setupUi(self, dialog_file):
        dialog_file.setObjectName(_fromUtf8("dialog_file"))
        dialog_file.resize(101, 59)
        self.btnCreate = QtGui.QPushButton(dialog_file)
        self.btnCreate.setGeometry(QtCore.QRect(10, 20, 77, 25))
        self.btnCreate.setObjectName(_fromUtf8("btnCreate"))
        self.retranslateUi(dialog_file)
        QtCore.QMetaObject.connectSlotsByName(dialog_file)

    def retranslateUi(self, dialog_file):
        dialog_file.setWindowTitle(QtGui.QApplication.translate("dialog_file", "file", None, QtGui.QApplication.UnicodeUTF8))
        self.btnCreate.setText(QtGui.QApplication.translate("dialog_file", "Create", None, QtGui.QApplication.UnicodeUTF8))

class ProgressDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent=None)
        self.ui = Ui_dialog_progress()
        self.ui.setupUi(self)
#        self.setWindowModality(QtCore.Qt.ApplicationModal)

class MyThread(QtCore.QThread):
    trigger = QtCore.pyqtSignal()
    updateFPD = QtCore.pyqtSignal(int, QtCore.QString)
    updateTPD = QtCore.pyqtSignal(int, QtCore.QString)
    showpdSignal = QtCore.pyqtSignal(bool)

    def __init__(self, parent=None, no=0):
        super(MyThread, self).__init__(parent)
        self.aborted = False
        self.threadNo = no
#        self.name = "Thread %d"%self.threadNo

    def run(self):
        self.trigger.emit()

    def emitSignals(self, iprogress=-99, tprogress=-99, \
                updateFPDSignal=True, updateTPDSignal=None, \
                showpdSignal=False, peSignal=None, msg=None
                ):
        if updateFPDSignal:
            self.updateFPD.emit(iprogress, msg)
        if updateTPDSignal:
            self.updateTPD.emit(tprogress, msg)
        if showpdSignal:
            self.showpdSignal.emit(True)
        else:
            self.showpdSignal.emit(False)
        if peSignal:
            QtGui.QApplication.processEvents()

    def abort(self):
        self.aborted = True
        print "aborted"

    def stop(self):
        self.terminate()

class Main(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Main, self).__init__(parent)
        self.ui = Ui_dialog_file()
        self.ui.setupUi(self)
        self.ui.btnCreate.clicked.connect(self.start_threads)
        self.count = 0
        self.threadPool = []

    def start_threads(self):
        self.mythread = MyThread()
        self.pd = ProgressDialog()
        self.pd.ui.btnPbarCancel.clicked.connect(self.abort)
        self.mythread.trigger.connect(self.pdialog)
        self.mythread.updateFPD.connect(self.updateFileProgress)
        self.mythread.updateTPD.connect(self.updateTotalProgress)
        self.mythread.start()
        self.threadPool.append(self.mythread)

    def abort(self):
        self.pd.close()
        self.mythread.aborted = True

    def updateFileProgress(self, j, name):
        self.pd.ui.lblFileName.setText(name)
        self.pd.ui.pbarFileSize.setValue(j)
#        print "name: %s, fileprogress: %d" % (name, j)

    def updateTotalProgress(self, i, name):
        self.pd.ui.pbarTotal.setValue(i)
#        print "name: %s, total progress %d" % (name, i)

    def showProgressDialog(self, show):
        if show:
            self.pd.show()
        else:
            self.pd.close()

    def pdialog(self):
        self.pd.show()
        i = 1
        self.threadPool[len(self.threadPool) - 1].emitSignals(iprogress=0 , tprogress=0, updateFPDSignal=True,
                                updateTPDSignal=True, showpdSignal=True, msg="")
        j = 1
        while i < 100:
            while j <= 100:
                self.threadPool[len(self.threadPool) - 1].emitSignals(iprogress=j, updateFPDSignal=True, \
                                        peSignal=True, msg="")
                j += 1
            i += 1
            j = 1
            self.threadPool[len(self.threadPool) - 1].emitSignals(tprogress=i, updateTPDSignal=True, \
                                          peSignal=True, msg="")
            if self.threadPool[len(self.threadPool) - 1].aborted:
                return
        self.threadPool[len(self.threadPool) - 1].sleep(2)
        self.pd.close()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mainwindow = Main()
    mainwindow.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:20:12.553

小部件只能由主 ui 线程（即控制主事件循环的线程）控制。如果一个小部件存在于主线程之外，那么它很可能不会收到任何更新，也不会发布任何事件，例如被点击。不要让您的线程拥有和/或操作 ui 小部件。在这种特殊情况下，您根本不需要`MyThread`。

让我举个例子。

```
import time
import sys
from PyQt4 import QtGui, QtCore

class MyThread(QtCore.QThread):

    progress_changed = QtCore.pyqtSignal(object)

    def run(self):
        for x in range(101):
            #we do not interect with the progress bar directly
            self.progress_changed.emit(x)
            time.sleep(0.1)

class MyWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)

        self.progress_thread1 = MyThread()
        self.progress_thread2 = MyThread()

        self.progress_bar1 = QtGui.QProgressBar()
        self.progress_bar1.setMinimum(0)
        self.progress_bar1.setMaximum(100)

        self.progress_bar2 = QtGui.QProgressBar()
        self.progress_bar2.setMinimum(0)
        self.progress_bar2.setMaximum(100)

        """
        the progress is emmited through the thread's progress_changed signal
        we connect that signal to our updateProgress method which will
        be used to set the progress_bar's value

        you can also just connect it directly to the progress bar's setValue method
        self.progress_thread.progress_changed.connect(self.progress_bar.setValue)
        """
        self.progress_thread1.progress_changed.connect(self.updateProgress1)

        self.progress_thread2.progress_changed.connect(self.updateProgress2)

        mainLayout = QtGui.QVBoxLayout()
        mainLayout.addWidget(self.progress_bar1)
        mainLayout.addWidget(self.progress_bar2)

        self.setLayout(mainLayout)

        self.progress_thread1.start()
        self.progress_thread2.start()

    def updateProgress1(self, progress):
        self.progress_bar1.setValue(progress)

    def updateProgress2(self, progress):
        self.progress_bar2.setValue(progress)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    widget = MyWidget()
    widget.show()
    r = app.exec_()
    sys.exit(r) 
```

将其复制到一个空的 python 脚本并运行它。

# java - 在当前 portlet 的 JSP 中定义另一个 portlet 控制器的 resourceUrl

> ID：15155156
> 
> 赞同：0
> 
> 时间：2013-03-01T10:11:13.650
> 
> 标签：java, spring-mvc, liferay, portlet

我有两个定义了一组控制器的 portlet。我们正在使用 Spring MVC。在 View ie JSP 中，我们定义了一些 resourceUrls，例如

```
<portlet:resourceURL var="ListResourceUrl" id="getList"  ></portlet:resourceURL> 
```

这指的是我定义为的控制器

```
@ResourceMapping("getList")
    @ResponseBody
public ModelAndView getList(ResourceRequest request,ResourceResponse response) throws IOException {

.........
} 
```

现在我想定义另一个resourceUrl 引用另一个portlet 中定义的控制器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:38:11.907

请尝试使用`liferay-portlet-ext.tld`而不是`liferay-portlet.tld`.

这里的标签数量几乎相同，但您可以添加一些额外参数。

> liferay-portlet:resourceURL 与 portlet:resourceURL 类似，只是它具有附加属性 plid、portletName、anchor 和 encrypt。

因此，您可以使用以下内容：

```
<%@taglib prefix="liferay-portlet" uri="http://liferay.com/tld/portlet" %>

<liferay-portlet:resourceURL id="getList" var="ListResourceUrl" 
                             portletName="portletname_WAR_portletname" /> 
```

portlet 的实际名称在哪里`portletname_WAR_portletname`，这是 Liferay 特有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:00:42.043

如果要在控制器中以编程方式创建 PortletURL，请使用 PortletURLFactoryUtil。下面的代码片段应该给你一个想法：

```
HttpServletRequest httpRequest = PortalUtil.getHttpServletRequest(request);
String portletId = "...";
Layout page = LayoutLocalServiceUtil.getLayoutByFriendlyUrl(group, "...");
PortletURL portletURL = PortletURLFactoryUtil.create(
        httpRequest, portletId, page.getPlid(), PortletRequest.RESOURCE_PHASE); 
```

# jsp - JSP 是ThreadSafe 默认的

> ID：15155157
> 
> 赞同：5
> 
> 时间：2013-03-01T10:11:13.697
> 
> 标签：jsp, jakarta-ee

我学习jsp。我对 jsp 中的 isThreadSafe 属性有很大的困惑。默认情况下，Jsp 不是线程安全的`isThreadSafe= true`

如果我们设置`isThreadSafe=false`意味着 JSP 引擎确保一次只有一个线程正在执行您的 JSP。

我对真假感到困惑。`isThreadSafe = false`表示只有多线程可以通过isThreadSafe访问jsp

isThreadSafe 是什么意思

```
 The isThreadSafe option marks a page as being thread-safe.
 By default, all JSPs are considered thread-safe. If you set the isThreadSafe option to false, the JSP engine makes sure that only one thread at a time is executing your JSP.

        The following page directive sets the isThreadSafe option to false:
    <%@ page isThreadSafe="false"  %> 
```

线程安全意味着多个线程一次不能访问jsp页面是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:13:42.413

如果您指定该属性的真值，则该属性支持维护线程以将多个并发请求从 JSP 容器发送到 JSP 页面，否则如果您指定该属性的假值，则 JSP 容器只能发送一个请求一次。该属性的默认值为 true。

线程安全的 JSP/servlet 是一种在多个线程同时运行时可以正常工作的 JSP/servlet。为了使您的 JSP 线程安全，您可以实现`SingleThreadModel`防止两个线程同时访问*服务方法*的接口。

默认情况下，servlet 容器认为 JSP 页面代码对于多个请求线程在单个实例中重用是安全的。如果页面的代码有无意在同时请求之间共享其状态的风险，则以下指令将导致 servlet 容器在每个请求中使用页面的单独实例：

```
<%@ page isThreadSafe="false" %> 
```

这样，为您的 JSP 页面生成的单个 servlet 实例不会加载到内存中，您将加载和初始化**N**个 servlet 实例，每个实例的服务方法有效地同步。您通常可以通过 JSP 引擎的管理屏幕控制为所有实现 SingleThreadModel 的 servlet 实例化的实例数 (N)。

您的 JSP 是否是线程安全的取决于您实现 JSP 的方式。当 JSP 中的代码避免保持状态（例如成员和会话变量）时，servlet 容器可以依靠“isThreadSafe”属性的默认“true”值来更快地回复，并且占用更少的内存。

*例如*，如果您碰巧使用`<%! %>`，这会将代码放在类级别而不是 _jspService 方法中。将类成员引入 JSP 开辟了一种在单实例使用中失去线程安全性的方法。

如果您的 JSP 作为服务并行请求的单个实例不是线程安全的，则必须添加`isThreadSafe=false`才能使事情正常工作。这将通过指示 servlet 容器解决 JSP 的线程不安全问题来保护 Web 应用程序的线程安全，但代价是：

*如果 isThreadSafe=true，那么 JSP 容器可以选择同时向页面分派多个未完成的客户端请求。使用 true 的页面作者必须确保他们正确同步对页面共享状态的访问。*

*如果 isThreadSafe=false 则 JSP 容器将分派多个未完成的客户端请求，一次一个，按照它们被接收的顺序，到页面实现进行处理。*

请注意，即使该`isThreadSafe`属性为假，JSP 页面作者也必须确保对任何共享对象的访问都正确同步。这些对象可以在 ServletContext 或 HttpSession 中共享。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-16T16:37:46.503

默认情况下，jsp 页面不是线程安全的。默认：

"<%@ page isThreadSafe="true" %>"

通过实现 SingleThreadModel 接口。当你在jsp页面中声明这个

"<%@ page isThreadSafe="false" %>"

这意味着jsp容器将接受多个请求，并且一次只能发送一个请求。

但是，当您使用以下方法声明任何变量时：

“<%！声明 %>”

这意味着您设置了“isThreadSafe = true”。意味着这个变量不是线程安全的......并且jsp容器无法控制这个变量。由于这个原因 SingleThreadModel 失败。

这就是为什么不建议正常使用 SingleThreadModel 的原因。陷阱很多，包括上面的例子不能使用 <%! %>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:14:50.377

默认情况下，JSP 不是自动线程安全的。如果您有从 JSP 的服务部分修改的实例变量，它们将被所有导致并发问题的请求共享。servlet 也是如此。与 servlet 一样，有一种机制可以帮助您的 JSP 更加线程安全，这是可以在 JSP 页面指令中设置的 isThreadSafe 属性。这种技术类似于使用 servlet 实现已弃用的 SingleThreadModel 接口。事实上，大多数容器通过让生成的代码实现这个已弃用的接口来实现线程安全的 JSP。

对于 servlet，结果证明这不是最好的想法，这就是不推荐使用 SingleThreadModel 的原因。这不是一个好主意，因为即使在使用它时，也可以编写一个非线程安全的 servlet。

因此，简而言之，您应该避免依赖 JSP 中的 threadSafe 指令，原因与您应该避免在 servlet 中使用已弃用的 SingleThreadModel 接口相同。

完全避免 scriptlet 是目前公认的最佳实践。没有 scriptlet 的 JSP 将没有实例变量，这将使您在获得线程安全的 JSP 方面走得更远。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-24T13:05:00.950

在jsp中，您使用的局部变量总是jsp是线程安全的，假设您使用的是实例变量jsp，s不是线程安全的。您必须指定 isThreadSafe

# c# - 检测继承的用户控件

> ID：15155158
> 
> 赞同：0
> 
> 时间：2013-03-01T10:11:16.850
> 
> 标签：c#, inheritance, user-controls

我在这里陷入了困境，因为我无法找到一种足够简单的方法来检测继承的用户控件。基本上，我有一个用户控件“UC”，

```
public partial class UC : UserControl 
```

它将作为通用属性的一种模板；

和一些继承的用户控件（“uc1”、“uc2”、“uc3”等...）

```
public partial class uc1 : UC 
```

*目的是列出继承的控件并在初始化时将它们扔到容器面板中。

**我的问题：**我可以检测/计数/列出它们是一些**简单的**方法（没有 20 多行代码的东西）还是可以完成？

任何建议表示赞赏。

*开发人员培训 :D*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:20:20.783

尝试这样的事情（这将遍历所有现有的程序集，而不是尚未加载的程序集。我还建议做一些比这更优雅的事情，这涉及到更多地了解你实际需要做什么。这只是蛮力（而且它也需要时间和资源，所以只运行一次，而不是每毫秒一次））：

```
var query = from assembly in AppDomain.CurrentDomain.GetAssemblies()
            from type in assembly.GetTypes()
            where typeof(UC).IsAssignableFrom(type) && (type != typeof(UC))
            let ctor = type.GetConstructor(Type.EmptyTypes)
            where ctor != null
            select type;

foreach (var type in query) {                
    var control = Activator.CreateInstance(type, nonPublic: true) as UC;
    control.Parent = thePanel;
} 
```

但要注意这里的逻辑缺陷：扩展该类的每个类`UC`都将有 1 个实例和仅 1 个实例。另外：您将如何动态管理这些用户控件在内部的定位`thePanel`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:15:35.497

如果您知道这些控件的位置（我的意思是程序集），您可以使用 use`Reflection`来遍历对象并测试类型。不确定生成的代码是否会是 20 行或更少的代码，但这是我知道的唯一方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:29:44.820

向基类添加一个静态计数器。在基类公共构造函数或 init 方法中 - 调用 counter++ 。并在其关闭的事件呼叫计数器上-。

如果你不害怕多写几行代码，那么用单模式来保存计数器会更好。

# algorithm - 计算给定范围内具有唯一数字的所有数字

> ID：15155165
> 
> 赞同：13
> 
> 时间：2013-03-01T10:11:45.337
> 
> 标签：algorithm, dynamic-programming

这是一道面试题。计算 [1, N] 范围内所有具有唯一数字（十进制）的数字。

显而易见的解决方案是测试范围内的每个数字，如果其数字是唯一的。我们还可以生成具有唯一数字（作为排列）的所有数字并测试它们是否在范围内。

现在我想知道这个问题是否有DP（动态编程）解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T10:44:47.707

我在想：

```
Number of unique digits numbers 1-5324
=   Number of unique digits numbers 1-9
  + Number of unique digits numbers 10-99
  + Number of unique digits numbers 100-999
  + Number of unique digits numbers 1000-5324 
```

所以：

```
f(n) = Number of unique digits numbers with length n.
f(1) = 9 (1-9)
f(2) = 9*9 (1-9 * 0-9 (excluding first digit))
f(3) = 9*9*8 (1-9 * 0-9 (excluding first digit) * 0-9 (excluding first 2 digits))
f(4) = 9*9*8*7 
```

将以上所有内容相加，直到您得到 N 负 1 的位数。

然后你只需要做`Number of unique digits numbers 1000-5324`

和：

```
Number of unique digits numbers 1000-5324
=   Number of unique digits numbers 1000-4999
  + Number of unique digits numbers 5000-5299
  + Number of unique digits numbers 5300-5319
  + Number of unique digits numbers 5320-5324 
```

所以：

```
N = 5324

If N[0] = 1, there are 9*8*7 possibilities for the other digits
If N[0] = 2, there are 9*8*7 possibilities for the other digits
If N[0] = 3, there are 9*8*7 possibilities for the other digits
If N[0] = 4, there are 9*8*7 possibilities for the other digits
If N[0] = 5
  If N[1] = 0, there are 8*7 possibilities for the other digits
  If N[1] = 1, there are 8*7 possibilities for the other digits
  If N[1] = 2, there are 8*7 possibilities for the other digits
  If N[1] = 3
    If N[2] = 0, there are 7 possibilities for the other digits
    If N[2] = 1, there are 7 possibilities for the other digits
    If N[2] = 2
      If N[3] = 0, there is 1 possibility (no other digits)
      If N[3] = 1, there is 1 possibility (no other digits)
      If N[3] = 2, there is 1 possibility (no other digits)
      If N[3] = 3, there is 1 possibility (no other digits) 
```

上面是这样的：

```
uniques += (N[0]-1)*9!/(9-N.length+1)!
for (int i = 1:N.length)
  uniques += N[i]*(9-i)!/(9-N.length+1)!

// don't forget N
if (hasUniqueDigits(N))
  uniques += 1 
```

你真的不需要DP，因为上面应该足够快。

**编辑：**

上面实际上需要稍微复杂一点（上面的 N[2] = 2 和 N[3] = 2 无效）。它需要更像：

```
binary used[10]
uniques += (N[0]-1)*9!/(9-N.length+1)!
used[N[0]] = 1
for (int i = 1:N.length)
  uniques += (N[i]-sum(used 0 to N[i]))*(9-i)!/(9-N.length+1)!
  if (used[N[i]] == 1)
    break
  used[N[i]] = 1

// still need to remember N
if (hasUniqueDigits(N))
  uniques += 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-31T18:34:24.140

对于这样的面试问题，可能会使用蛮力算法来展示逻辑和编程能力。但同样重要的是展示对这项工作的好工具的了解。

当然，在花费大量时间进行计算之后，您可以想出一个复杂的数学公式来缩短循环算法。但是这个问题是模式匹配的一个简单示例，那么为什么不使用内置于您将使用的任何语言的模式匹配工具：**正则表达式**？

下面以 C# 中的一个极其简单的解决方案为例：

```
string csv = string.Join(",", Enumerable.Range(1, N));
int numUnique = N - Regex.Matches(csv, @"(\d)\d*\1").Count; 
```

第 1 行会因您使用的语言而异，但它只是创建一个包含从 1 到 N 的所有整数的 CSV。

但是无论哪种语言，第 2 行都会非常相似：计算模式在 csv 中匹配的次数。

正则表达式模式匹配**一​​个数字**，可能后跟**一些其他数字，然后是****第一个数字**的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:54:41.233

懒人DP：

```
Prelude> :m +Data.List
Data.List> length [a | a <- [1..5324], length (show a) == length (nub $ show a)]
2939 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-31T15:47:40.293

虽然这个问题是在2013年发布的，但我觉得还是值得提供一个实现参考，因为除了Dukeling给出的算法我在互联网上找不到任何实现。

我用 Java 为蛮力和 Dukeling 的排列算法编写了代码，如果我是正确的，它们应该总是产生相同的结果。

希望它可以帮助那些努力寻找实际运行解决方案的人。

```
public class Solution { 

    public static void main(String[] args) {
        test(uniqueDigitsBruteForce(5324), uniqueDigits(5324));
        test(uniqueDigitsBruteForce(5222), uniqueDigits(5222));
        test(uniqueDigitsBruteForce(5565), uniqueDigits(5565));
    }

     /**
     * A math version method to count numbers with distinct digits.
     * @param n
     * @return
     */
    static int uniqueDigits(int n) {
        int[] used = new int[10];
        String seq = String.valueOf(n);
        char[] ca = seq.toCharArray();
        int uniq = 0;

        for (int i = 1; i <= ca.length - 1; i++) {
            uniq += uniqueDigitsOfLength(i);
        }

        uniq += (getInt(ca[0]) - 1) * factorial(9) / factorial(9 - ca.length + 1);
        used[getInt(ca[0])] = 1;
        for (int i = 1; i < ca.length; i++) {
            int count = 0;
            for (int j = 0; j < getInt(ca[i]); j++) {
                if (used[j] != 1) count++;
            }
            uniq += count * factorial(9 - i) / factorial(9 - ca.length + 1);
            if (used[getInt(ca[i])] == 1)
                break;
            used[getInt(ca[i])] = 1;
        }

        if (isUniqueDigits(n)) {
            uniq += 1;
        }
        return uniq;
    }

    /**
     * A brute force version method to count numbers with distinct digits.
     * @param n
     * @return
     */
    static int uniqueDigitsBruteForce(int n) {
        int count = 0;
        for (int i = 1; i <= n; i++) {
            if (isUniqueDigits(i)) {
                count++;
            }
        }
        return count;
    }

    /**
     * http://oeis.org/A073531
     * @param n
     * @return
     */
    static int uniqueDigitsOfLength(int n) {
        if (n < 1) return 0;
        int count = 9;
        int numOptions = 9;
        while(--n > 0) {
            if (numOptions == 0) {
                return 0;
            }
            count *= numOptions;
            numOptions--;
        }
        return count;
    }

    /**
     * Determine if given number consists of distinct digits
     * @param n
     * @return
     */
    static boolean isUniqueDigits(int n) {
        int[] used = new int[10];
        if (n < 10) return true;
        while (n > 0) {
            int digit = n % 10;
            if (used[digit] == 1)
                return false;
            used[digit] = 1;
            n = n / 10;
        }
        return true;
    }

    static int getInt(char c) {
        return c - '0';
    }

    /**
     * Calculate Factorial
     * @param n
     * @return
     */
    static int factorial(int n) {
        if (n > 9) return -1;
        if (n < 2) return 1;
        int res = 1;            
        for (int i = 2; i <= n; i++) {
            res *= i;
        }
        return res;
    }

    static void test(int expected, int actual) {
        System.out.println("Expected Result: " + expected.toString());
        System.out.println("Actual Result: " + actual.toString());
        System.out.println(expected.equals(actual) ? "Correct" : "Wrong Answer");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-04T20:00:34.300

一个python解决方案总结如下：</p>

该解决方案基于之前答案列表中提供的 Bernhard Barker 的数学原理：

感谢伯恩哈德的理想

```
def count_num_with_DupDigits(self, n: int) -> int:
    # Fill in your code for the function. Do not change the function name
    # The function should return an integer.
    n_str = str(n)
    n_len = len(n_str)
    n_unique = 0

    # get the all the x000 unique digits
    if n > 10:
        for i in range(n_len-1):
            n_unique = n_unique + 9*int(np.math.factorial(9)/np.math.factorial(10-n_len+i+1))
        m=0
        if m == 0:
            n_first  = (int(n_str[m])-1)*int(np.math.factorial(9)/np.math.factorial(10-n_len))
        m=m+1
        count_last=0
        n_sec=0

        for k in range(n_len-1):
            if m == n_len-1:
                count_last = int(n_str[m])+1
                for l in range(int(n_str[m])+1):a
                           if n_str[0:n_len-1].count(str(l)) > 0:
                               count_last = count_last-1

            else:
                for s in range(int(n_str[k+1])):
                    if n_str[0:k+1].count(str(s))>0:
                        n_sec=n_sec
                    else:
                        n_sec = int(np.math.factorial(9-m)/np.math.factorial(10-n_len))+n_sec
                if n_str[0:k+1].count(n_str[k+1]) > 0:
                    break
                m= m+1

        value=n-(n_sec+n_first+n_unique+count_last)
    else:
        value = 0
    return value 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-24T13:13:22.427

```
import java.io.*;
import java.util.*;
import java.text.*;
import java.math.*;
import java.util.regex.*;

public class Solution { 
 public static void main(String[] args) {

         int rem;
        Scanner in=new Scanner(System.in);
         int num=in.nextInt();
    int length = (int)(Math.log10(num)+1);//This one is to find the length of the number i.e number of digits of a number

    int arr[]=new int[length]; //Array to store the individual numbers of a digit for example 123 then we will store 1,2,3 in the array

    int count=0;
     int i=0;

     while(num>0)           //Logic to store the digits in array
    { rem=num%10;   
        arr[i++]=rem;
        num=num/10; 
    }     
    for( i=0;i<length;i++)          //Logic to find the duplicate numbers
    {
        for(int j=i+1;j<length;j++)
        {
            if(arr[i]==arr[j])
            {
                count++;
                 break;
            }
        }
    }
     //Finally total number of digits minus duplicates gives the output
     System.out.println(length-count);
   }
} 
```

# android - Android：使用 GPS 提供程序获取位置返回错误的位置

> ID：15155169
> 
> 赞同：3
> 
> 时间：2013-03-01T10:12:01.087
> 
> 标签：android, gps, location

我正在实现一个应用程序，当你打开它时它会获取你的位置。它仅在创建活动时获取，所以我不需要`LocationListener`. 我正在两个真实设备上对其进行测试。

首先，我尝试使用`GPS_PROVIDER`. 如果结果为 NULL，我使用`NETWORK_PROVIDER`. 由于我正在建筑物内对其进行测试，因此预计我将无法使用 GPS 提供商获取位置。

在其中一个设备中，使用的位置`GPS_PROVIDER`为 NULL，并且`NETWORK_PROVIDER`返回正确的位置。但在另一台设备中，使用 GPS_PROVIDER 的位置不是 NULL，但这是错误的（它与我现在所在的城市不同！）。这是我正在使用的代码：

```
private void getPosition() {
    locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    myloc = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if(myloc == null)
                myloc = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    if(myloc != null){ 
        Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
        try{
            List<Address> addresses = geoCoder.getFromLocation(myloc.getLatitude(), myloc.getLongitude(), 1);

            if(addresses.size()>0){
                String add = "";
                for(int i=0; i<addresses.get(0).getMaxAddressLineIndex(); i++)
                    add += addresses.get(0).getAddressLine(i)+"\n";
                placeEdit.setText(add);
            }
        }catch(IOException e){
            e.printStackTrace();
        }
    }
} 
```

我如何知道 GPS 提供商返回的位置是错误的？我应该先查看网络提供商，如果它为空，请使用 gps？这个应用程序应该是在外面使用的，所以我想先用gps，因为它更准确。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:13:18.693

作为[Android 文档中的状态](http://developer.android.com/reference/android/location/LocationManager.html)

> getLastKnownLocation(String provider)
> 返回一个 Location 指示从给定提供者获得的最后一个已知位置修复的数据。

因此，当您的设备提前 2 小时获得位置并且同时从未获得新的修复时，Location 对象会返回该旧位置。我建议您使用`LocationListener`但线程会在一段时间后停止收听 - 这种方法可以防止设备在卫星视野不佳或您在建筑物内时进行长时间的修复搜索。如果`LocationListener`获得位置使用它，如果没有 - 使用`NETWORK_PROVIDER`。

# android - 使用 Box2D、Cocos2D 和 Android 拖动对象

> ID：15155172
> 
> 赞同：1
> 
> 时间：2013-03-01T10:12:06.963
> 
> 标签：android, cocos2d-iphone, box2d, cocos2d-android

我需要创建一个简单的游戏，其中一个对象根据触摸（鼠标）事件在屏幕上移动。换句话说，我希望能够将它拖到 Android 机器的屏幕上。

到处都有很多“球”类游戏的好例子，其中一个球在屏幕上弹跳，对重力做出反应，甚至与其他静态或动态物体发生碰撞。但实际上没有任何东西有我可以在屏幕上触摸和移动的对象。

谁能指出我正确的方向？

# php - 如何生成这样的 JSON？

> ID：15155173
> 
> 赞同：-5
> 
> 时间：2013-03-01T10:12:10.877
> 
> 标签：php, json, libraries

伙计们。我有必须遵循的 JSON 结构，但我不知道如何使用 PHP 创建这个东西。我尝试使用两个 foreach 和数组，但是当我开始第三级（例如 urlMiniatura）时，我总是会出错，因为它们需要标签，（urlMiniatura）我的数组总是接收指针作为索引。

JSON 示例：

```
 {
  "Tipo de ambiente 1" : {
    "ID ambiente 1" : {
      "urlMiniatura" : "http://url-absoluta-da-imagem",
      "titulo" : "Nome do ambiente",
    },
    "ID ambiente 2" : {
      "urlMiniatura" : "http://url-absoluta-da-imagem",
      "titulo" : "Nome do ambiente",
    },
    (...)
    "ID ambiente N" : {
      "urlMiniatura" : "http://url-absoluta-da-imagem",
      "titulo" : "Nome do ambiente",
    }
  },
  (...)
  "Tipo de ambiente N" : {
    "ID ambiente 1" : {
      "urlMiniatura" : "http://url-absoluta-da-imagem",
      "titulo" : "Nome do ambiente",
    },
    "ID ambiente 2" : {
      "urlMiniatura" : "http://url-absoluta-da-imagem",
      "titulo" : "Nome do ambiente",
    },
    (...)
    "ID ambiente N" : {
      "urlMiniatura" : "http://url-absoluta-da-imagem",
      "titulo" : "Nome do ambiente",
    }
  }
} 
```

我的代码：

```
foreach ($this->conteudo['tipos_ambientes'] as $linha => $tipo_ambiente_item){
    //Seta valores do ambiente
    $array_retorno[$linha] = $tipo_ambiente_item['tipo_ambiente'];
    //Carrega ambientes
    $conteudo['ambientes'] = $this->ambiente_model->get_ambientes_api_by_codigo_tipo_and_codigo_tipo_ambiente(1, $tipo_ambiente_item['codigo_tipo_ambiente']);
    if ($conteudo['ambientes'] != null){
        foreach($conteudo['ambientes'] as $linha_interna => $ambiente){
            $array_retorno[$linha][$linha_interna] = $ambiente['codigo_ambiente'];
            $array_retorno[$linha][$linha_interna]['urlMiniatura'] = $ambiente['arquivo'];
        }
    }
}
$json = json_encode($allLinks); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:33:43.410

**问题**

您已声明错误消息是`Cannot use string offset as an array`.

当您尝试将数组元素添加到字符串变量时会发生此错误。

例如：

```
$myString = "some text";
$myString['arrayKey'] = "more text"; 
```

这将在第二行失败，因为变量是一个字符串，并且不能以这种方式用作数组。

**那么这与您的代码有什么关系呢？**

```
$array_retorno[$linha][$linha_interna] = $ambiente['codigo_ambiente'];
$array_retorno[$linha][$linha_interna]['urlMiniatura'] = $ambiente['arquivo']; 
```

在上面的代码中，您所做的事情与我引用的示例代码非常相似；主要区别在于您有很多数组嵌套，这使得更难确切地看到正在发生的事情，但基本问题是相同的。

问题是这`$ambiente['codigo_ambiente']`是一个字符串值，因此在第一行之后，`$array_retorno[$linha][$linha_interna]`也将是一个字符串。

然后在第二行，你尝试向这个字符串添加一个数组元素，我们得到了错误。

**如何解决？**

其意图显然是`$array_retorno[$linha][$linha_interna]`作为一个包含`$ambiente['codigo_ambiente']`和的数组`$ambiente['arquivo']`。

所以我们需要替换代码，以便将它们创建为一个数组，如下所示：

```
$array_retorno[$linha][$linha_interna] = array(
    'titulo' => $ambiente['codigo_ambiente'],
    'urlMiniatura' => $ambiente['arquivo']
); 
```

（我`titulo`从您的 JSON 示例中获取了数组键名）

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:15:55.137

这取决于您输入的格式。但是假设您有一个由结构生成的数组，PHP 公开[`json_encode`](http://php.net/manual/en/function.json-encode.php)了您可以用来将其转换为 JSON 的数组。例如：

```
<?php
  $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
   echo json_encode($arr);
?> 
```

> {"a":1,"b":2,"c":3,"d":4,"e":5}

显然，根据您的更新，您使用此方法，但`$allLinks`没有显示任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:14:01.727

试试这个：

`$json = json_encode($allLinks);`这是你没有`$allLinks`分配的错误

我想应该是 `$json = json_encode($array_retorno);`

# php - 我的第一个单元格数据中的零将在 PHPExcel 中删除

> ID：15155177
> 
> 赞同：1
> 
> 时间：2013-03-01T10:12:29.840
> 
> 标签：php, phpexcel

我正在尝试使用 PHPExcel 将我的数据导出到 excel，我有一列，该列上的许多数据将以`0`例如`0054672351`或`057524572`.

现在，当我尝试导出到 excel 时，我的数据将更改为`54672351`or `57524572`。

我正在尝试将此列的数据格式更改为文本，但我有这个问题！

我该怎么办 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:15:14.417

今天第二次在这里回答同样的问题：

任何一个：

```
// Set the value explicitly as a string
$objPHPExcel->getActiveSheet()
    ->setCellValueExplicit(
        'A1', 
        '0054672351', 
        PHPExcel_Cell_DataType::TYPE_STRING
    ); 
```

或者

```
// Set the value as a number formatted with leading zeroes
$objPHPExcel->getActiveSheet()
    ->setCellValue('A3', 54672351);
$objPHPExcel->getActiveSheet()
    ->getStyle('A3')
    ->getNumberFormat()
    ->setFormatCode('0000000000'); 
```

请注意，在第一种情况下，我调用的是 setCellValueExplicit() 方法，而不是 setCellValue() 方法。

如果您使用 fromArray() 方法一步填充数据块，那么后一种方法可能更容易，尤其是当您填充所有数据后，您可以一步设置整个单元格块的样式.

```
$objPHPExcel->getActiveSheet()
    ->getStyle('A3:A123')
    ->getNumberFormat()
    ->setFormatCode('0000000000'); 
```

# mysql - 从 MySQL 表中获取最后更新值

> ID：15155178
> 
> 赞同：0
> 
> 时间：2013-03-01T10:12:30.210
> 
> 标签：mysql, group-by

我有一个具有以下结构和数据的 mysql 表。我想在任何 id 上显示最后插入的记录。

```
id    lc_counter       lc_timestamp
1     15               2013-03-01 11:54:43
1     13               2013-03-01 11:48:56
10    7                2013-03-01 11:54:43
10    5                2013-03-01 11:48:56
100   5                2013-03-01 11:54:43
100   3                2013-03-01 11:54:43

SELECT inv_id, lc_counter, lc_timestamp 
FROM link_counter 
group by inv_id
order by inv_id asc, lc_timestamp desc 
```

我想得到这个结果：

```
id    lc_counter       lc_timestamp
1     15               2013-03-01 11:54:43
10    7                2013-03-01 11:54:43
100   5                2013-03-01 11:54:43 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:13:58.123

```
Select link_counter.lc_counter, MAX(link_counter.lc_timestamp)
 from link_counter group by link_counter.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:16:52.723

```
SELECT
  inv_id, lc_counter, lc_timestamp
FROM
  link_counter A
WHERE
  lc_counter >= ALL(
    SELECT
      lc_counter
    FROM
      link_counter B
    WHERE
      B.inv_id = A.inv_id
  )
ORDER BY
  1 
```

有一段时间没有这样做了，但这应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:48:00.293

如果您没有 2 条相同`lc_timestamp`的特定记录，`id`则以下内容将为您提供所需的确切结果。

```
select lc.id, lc.lc_counter, lc.lc_timestamp from link_counter lc inner join
 (select id, max(lc_timestamp) as lc_timestamp from link_counter group by id) as lc2 
 on lc.id = lc2.id and lc.lc_timestamp = lc2.lc_timestamp order by lc.id asc, lc.lc_timestamp desc;; 
```

`group by`本身不返回匹配的`lc_counter`. 所以，需要手动匹配。参考这个[小提琴](http://sqlfiddle.com/#!2/31601/37)。

# javascript - jQuery 函数上的 Access-Control-Allow-Origin 不允许

> ID：15155185
> 
> 赞同：0
> 
> 时间：2013-03-01T10:12:58.533
> 
> 标签：javascript, jquery, load, click

我尝试使用此代码但不工作。

```
$(".edit").click(function(){
$(".edit").load("another.html #user_adr");
}) 
```

当我通过 Firebug 检查时，得到这个错误：

```
XMLHttpRequest cannot load file://localhost/Users/Desktop/site-new/another.html. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:16:32.967

浏览器最近开始将本地文件系统上其他文件的调用视为跨域请求。默认安全设置禁止从其他域调用页面，这就是您遇到的问题。

最好的办法是使用本地计算机上的简单 Web 服务器来为您的页面提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:14:19.310

不，您正在执行跨域请求。如果没有适当的访问机制，您将无法进行跨域请求。 [跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

1.  您需要一个网络服务器来处理请求。您无法从文件协议加载文件。
2.  出于安全原因，浏览器不允许使用 file:/// 协议进行 AJAX 调用。

# android - android中WCF服务的JSON问题

> ID：15155187
> 
> 赞同：1
> 
> 时间：2013-03-01T10:13:04.627
> 
> 标签：android, json, rest, service

我有一个 wcf 服务，其中包含一些我将发布的方法，例如：

```
[OperationContract]
    [WebGet(
        UriTemplate = "GetPlates",
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    IList<string> GetPlates(); 
```

班上

```
 public IList<string> GetPlates()
    {
        return new List<string>
                   {
                       "ag",
                       "asda"
                   };
    } 
```

在活动中

```
try {

             // Send GET request to <service>/GetPlates
            HttpGet request = new HttpGet(SERVICE_URI + "/GetPlates");
            request.setHeader("Accept", "application/json");
            request.setHeader("Content-type", "application/json");

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpResponse response = httpClient.execute(request);

            HttpEntity responseEntity = response.getEntity();

            // Read response data into buffer
            char[] buffer = new char[(int)responseEntity.getContentLength()];
            InputStream stream = responseEntity.getContent();
            InputStreamReader reader = new InputStreamReader(stream);
            reader.read(buffer);
            stream.close();

            JSONArray plates = new JSONArray(new String(buffer));

        } catch (Exception e) {

            e.printStackTrace();
        } 
```

我每次都为空。如果我从浏览器或模拟器访问 URL，我会得到：["ag","asda"]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:21:06.527

嗨试试下面的代码

你可以参考**[这里的教程](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)**

```
 class RetreiveFeedTask extends AsyncTask<String, Void, RSSFeed> {

    private Exception exception;

    protected RSSFeed doInBackground(String... urls) {
    try {

         // Send GET request to <service>/GetPlates
        HttpGet request = new HttpGet(SERVICE_URI + "/GetPlates");
        request.setHeader("Accept", "application/json");
        request.setHeader("Content-type", "application/json");

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(request);

        HttpEntity responseEntity = response.getEntity();

        // Read response data into buffer
        char[] buffer = new char[(int)responseEntity.getContentLength()];
        InputStream stream = responseEntity.getContent();
        InputStreamReader reader = new InputStreamReader(stream);
        reader.read(buffer);
        stream.close();

        JSONArray plates = new JSONArray(new String(buffer));

    } catch (Exception e) {

        e.printStackTrace();
    }

   protected void onPostExecute(RSSFeed feed) {
     // TODO: check this.exception 
    // TODO: do something with the feed
    }
  }

  new RetreiveFeedTask().execute(urlToRssFeed); 
```

# hibernate - Hibernate 二级缓存惰性集合大小

> ID：15155190
> 
> 赞同：1
> 
> 时间：2013-03-01T10:13:29.217
> 
> 标签：hibernate, caching

我们使用以下属性在休眠中启用了二级缓存：

```
hibernateProperties.setProperty("hibernate.cache.region.factory_class", "org.hibernate.cache.ehcache.EhCacheRegionFactory");
hibernateProperties.setProperty("hibernate.cache.use_query_cache", Boolean.TRUE.toString());
hibernateProperties.setProperty("hibernate.cache.use_second_level_cache", Boolean.TRUE.toString());
hibernateProperties.setProperty("hibernate.cache.use_structured_entries", Boolean.TRUE.toString());     
hibernateProperties.setProperty("hibernate.cache.generate_statistics", Boolean.TRUE.toString()); 
```

并使用缓存标签标记我们的实体：

```
@Entity
@Indexed
@Table(name = "item")
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
public class Item implements Serializable { 
```

这个实体有一个惰性集合，带有额外的惰性集合选项：

```
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
@ManyToMany(fetch = FetchType.LAZY, targetEntity = User.class, mappedBy = "likes")
@LazyCollection(LazyCollectionOption.EXTRA)
private List<User> users; 
```

这似乎运作良好，在数据缓存后我看不到任何数据库查询，但我们看到的是调用日志

```
select count(user_id) from user_items where item_id =? 
```

有没有办法让休眠来缓存惰性集合的大小，这样我们在执行 users.size() 时就不需要访问数据库？

* * *

我已更改为 CacheConcurrencyStrategy.READ_WRITE 并看到相同的行为。

在第一个请求中，我看到选择实体的查询和查找集合大小的查询。我看到日志消息说实体正在被缓存。

在随后的请求中，没有调用加载实体，但仍然调用查找集合的大小。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T10:40:36.357

缓存数据时，您永远不会看到数据库查询。你是说有选择查询的连续日志。Ehcache 不提供事务缓存。你是说它正在工作。兄弟，它不起作用，您只是有相同的数据库调用和日志。 **检查 Ehcache 文档，因为它不支持 TRANSACTIONAL 缓存**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T09:02:22.637

用户列表是一个延迟加载的集合。在延迟加载的集合中，您将没有任何数据。每当您想要访问延迟加载的集合或想要确定延迟加载的集合的大小时，它必须具有有关其中数据的信息，例如那里有多少元素。为此，它将从数据库中获取该数据，因此每次都会生成数据库查询。我检查了最上层和其他一些对象内的列表。这表明当 List 不是顶级对象时，它将被延迟初始化。因此，每当您想获取有关集合的信息或从集合中获取信息时，它都会生成数据库查询。

# javascript - 如何在dojo / request promise中检索类成员

> ID：15155191
> 
> 赞同：1
> 
> 时间：2013-03-01T10:13:31.140
> 
> 标签：javascript, dojo

我使用*dojo/reqeust*和*delcare*进行测试。

我声明了一个带有函数的新类，该函数将使用 dojo/request 进行查询。在 promise 函数中，我无法检索*this*成员。

```
 var TestJson = declare(null, {
       name: "hello",
       doJson: function(){
          request.post("someTarget").then(function(res){
             alert(this.name);
          });
       }
  });

   var obj= new TestJson();
   obj.doJson(); 
```

如上所述，当 post 返回时，会调用*alert(this.name) 。*但是*this*指向*Window*对象，所以*this.name*是未定义的，没有指向*TestJson.name*。那么如何检索 TestJson.name 呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:38:33.453

有几种方法可以解决这个问题。

引用闭包范围内的变量：

```
var TestJson = declare(null, {
  name: "hello",
  doJson: function(){
    var instance = this;
    request.post("someTarget").then(function(res){
      alert(instance.name);
    });
  }
}); 
```

使用该`dojo/_base/lang`模块设置回调[的执行上下文：](http://dojotoolkit.org/documentation/tutorials/1.8/hitch/)

```
var TestJson = declare(null, {
  name: "hello",
  doJson: function(){
    var callback = lang.hitch(this, function(res){
      alert(this.name);
    });
    request.post("someTarget").then(callback);
  }
}); 
```

# android - 使用 asmack 发送消息时未捕获 XMPPException

> ID：15155192
> 
> 赞同：2
> 
> 时间：2013-03-01T10:13:31.577
> 
> 标签：android, asmack

我正在一个 android 应用程序中工作以实现 facebook 聊天，并且我已经使用 asmack 库成功实现了它。但是当我尝试在没有互联网连接的情况下发送消息时，XMPPException 没有被正确捕获。它显示找不到类文件编辑器源。[我已经从这个链接](https://code.google.com/p/asmack/downloads/detail?name=asmack-issue15.jar&can=2&q=)下载了我的 asmack 库。请查看我的代码并建议我一个解决方案。

谢谢。

```
 public Boolean sentMessage(String message, Long senderid) {
            ChatManager chatmanager = connection.getChatManager();
            Chat newChat = chatmanager.createChat("-" + senderid
                    + "@chat.facebook.com", new MessageListener() {

                @Override
                public void processMessage(Chat chat, Message message) {
                    System.out.println("Received message: " + message.getBody());

                }
            });

            try {
                newChat.sendMessage(message);
            } catch (XMPPException e) {
                return false;
            }
            return true;
        } 
```

# java - 变量在使用 getText 时具有空值，但在呈现单选按钮时不具有

> ID：15155196
> 
> 赞同：0
> 
> 时间：2013-03-01T10:13:49.567
> 
> 标签：java, struts2

我正在尝试在 Struts2 Web 应用程序中呈现一些单选按钮。

每个`value`单选按钮的 是一个整数，其关联的标签应该是一个 i18n 文本，它随值的变化而变化。i18n 键的格式为`Common.eventTypeId.<<integer value>>`,（例如`Common.eventTypeId.28`,`Common.eventTypeId.29`等）。

但是，当我访问该页面时，标签不会被翻译，因为有错误的键：`Common.eventTypeId.null`. 令我困惑的是，用于构建 i18n 键的相同变量呈现为`value`单选按钮的 ok。

这是生成 HTML 代码的片段。`eventTypeIds`是 a`List<Integer>`包含 3 个元素：28、29 和 31。

```
<s:iterator value="eventTypeIds" var="eTypeId">
    <div class="frm-field">
        <s:set var="label" value="%{getText('Common.eventTypeId.' + eTypeId )}"/>
        <s:radio name="currentActivity.eventTypeId" list="eTypeId" listValue="label"/> 
    </div>
</s:iterator> 
```

相关的 i18n 键：

```
Common.eventTypeId.29 = CAA
Common.eventTypeId.28 = Practical
Common.eventTypeId.31 = Non-assessable activity 
```

这是现在生成的实际 HTML：

```
<div class="frm-field">
    <input type="radio" value="29" checked="checked" id="frm-activity_currentActivity_eventTypeId29" name="currentActivity.eventTypeId">
    <label for="frm-activity_currentActivity_eventTypeId29">Common.eventTypeId.null</label>
</div>
<div class="frm-field">
    <input type="radio" value="28" id="frm-activity_currentActivity_eventTypeId28" name="currentActivity.eventTypeId">
    <label for="frm-activity_currentActivity_eventTypeId28">Common.eventTypeId.null</label>
</div>
<div class="frm-field">
    <input type="radio" value="31" id="frm-activity_currentActivity_eventTypeId31" name="currentActivity.eventTypeId">
    <label for="frm-activity_currentActivity_eventTypeId31">Common.eventTypeId.null</label>
</div> 
```

这将是预期的 HTML：

```
<div class="frm-field">
    <input type="radio" value="29" checked="checked" id="frm-activity_currentActivity_eventTypeId29" name="currentActivity.eventTypeId">
    <label for="frm-activity_currentActivity_eventTypeId29">CAA</label>
</div>
<div class="frm-field">
    <input type="radio" value="28" id="frm-activity_currentActivity_eventTypeId28" name="currentActivity.eventTypeId">
    <label for="frm-activity_currentActivity_eventTypeId28">Practical</label>
</div>
<div class="frm-field">
    <input type="radio" value="31" id="frm-activity_currentActivity_eventTypeId31" name="currentActivity.eventTypeId">
    <label for="frm-activity_currentActivity_eventTypeId31">Non-assessable activity</label>
</div> 
```

请注意，整数值正在使用`eTypeId`变量正确显示，但在构建 i18n 键时该变量为空。我错过了什么？我误解了 s:radio 标签的用法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:35:37.030

在标签内`#`使用`eTypeId`var之前您丢失了。`<s:set>`

```
<s:set var="label" value="%{getText('Common.eventTypeId.' + #eTypeId )}"/> 
```

BTW`<s:radio>`在`list`属性中采用可迭代源，因此您可以`eventTypeIds`在单选标签内使用列表并获取带有`listValue`属性和`top`关键字的翻译文本。

```
<s:radio name="currentActivity.eventTypeId" list="eventTypeIds" 
              listValue="%{getText('Common.eventTypeId.' + top)}"/> 
```

# gradle - Gradle Java 插件和多项目：为什么 jar 任务不依赖于检查？

> ID：15155197
> 
> 赞同：1
> 
> 时间：2013-03-01T10:13:50.890
> 
> 标签：gradle

根据[http://www.gradle.org/docs/current/userguide/java_plugin.html](http://www.gradle.org/docs/current/userguide/java_plugin.html)和图 23.1，jar 任务依赖于 classes 任务。

在我的场景中，我有一个包含三个项目的多项目 - ProjectCommon、ProjectApp1 和 ProjectApp2。ProjectApp1 依赖于 ProjectCommon，ProjectApp2 依赖于 ProjectCommon。

这是 ProjectApp1 和 ProjectApp2 的 build.gradle：

```
dependencies {
    compile         project(':ProjectCommon')    
} 
```

我现在不想只构建 ProjectApp1，使用

```
$ gradle :ProjectApp1:build 
```

输出显示，例如 ProjectCommon 的测试和检查未执行：

```
:ProjectCommon:compileJava UP-TO-DATE
:ProjectCommon:processResources UP-TO-DATE
:ProjectCommon:classes UP-TO-DATE
:ProjectCommon:jar
:ProjectApp1:compileJava UP-TO-DATE
:ProjectApp1:processResources UP-TO-DATE
:ProjectApp1:classes UP-TO-DATE
:ProjectApp1:jar
:ProjectApp1:assemble
:ProjectApp1:compileTestJava UP-TO-DATE
:ProjectApp1:processTestResources UP-TO-DATE
:ProjectApp1:testClasses UP-TO-DATE
:ProjectApp1:test
:ProjectApp1:check
:ProjectApp1:build

BUILD SUCCESSFUL

Total time: 4.633 secs 
```

ProjectApp1 现在是在不知道 ProjectCommon 是否真的很好的情况下构建的......

（当然我可以做 gradle :ProjectCommon:build :ProjectApp1:build 来避免这种情况）。

**如果 jar 通常依赖于检查，它不是“更安全”吗？**

或者我对依赖项做错了什么，我最好在 ProjectApp1 和 ProjectApp2 的 build.gradle 中使用：

```
dependsOn(':ProjectCommon') 
```

（给出弃用警告）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:21:16.900

Gradle Java 插件仅对某些任务使用项目编译依赖项，检查任务不是其中之一。

在 ProjectApp1 中，添加

```
check {
    dependsOn ':ProjectCommon:check'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:32:12.677

`jar`任务不依赖于任务，`check`因为它们没有*语义*依赖——后者不会产生任何前者消耗的东西。

> 如果 jar 通常依赖于检查，它不是“更安全”吗？

在某些情况下（例如 Java 编译）会花费时间而不会变得更安全，而在其他情况下（例如在发布相关项目时，您希望在发布*任何项目之前对**所有*项目进行测试）则不够安全。使用 Gradle，您可以根据特定需求调整行为。

 *Java 插件提供了一个`buildNeeded`任务，它在构建下游项目之前完全构建上游项目。以类似的方式，可以在下游项目中使用其输出之前让 Gradle 测试上游项目。问题是这会有多大用处。*

# asp.net - 为什么 InnerHtml、InnerText 和属性值在回发时为空？

> ID：15155198
> 
> 赞同：1
> 
> 时间：2013-03-01T10:13:51.340
> 
> 标签：asp.net, webforms

我的页面上有一些具有值属性的跨度。

当我尝试从后面的代码中获取这些属性时，我只得到前两个 - 其余为空，即使值属性存在且不为空。

怎么会？这是我的标记：

```
<div class="ExtraContainer">
    <div class="box_slider">
    <form id="Form1" runat="server">
        <div class="block block1">
            <h3>
                Vælg områder</h3>
            <div class="wraper">
                <input id="chkAllAreas" type="radio" name="group1" class="input_radio" runat="server"/>
                <label for="chkAllAreas">
                    Vis alle områder</label>
            </div>
            <div class="wraper">
                <input id="chkCustomAreas" type="radio" name="group1" class="input_radio" runat="server"/>
                <label for="chkCustomAreas">
                    Vælg områder</label>
            </div>
        </div>
        <div class="block block2">
            <h3>
                Vælg Ledighed</h3>
            <div class="wraper">
                <input id="chkShowAll" type="radio" name="group2" class="input_radio" runat="server" />
                <label for="chkShowAll">
                    Vis alle boliger</label>
            </div>
            <div class="wraper">
                <input id="chkIsAvailable" type="radio" name="group2" class="input_radio" runat="server" />
                <label for="chkIsAvailable">
                    Vis kun ledige boliger</label>
            </div>
        </div>
        <div class="block block3">
            <h3>
                Vælg boligtype</h3>
            <div class="wraper go_left">
                <input id="chkAllTHousingTypes" type="checkbox" class="input_check" runat="server" />
                <label for="chkAllTHousingTypes">
                    Vis alle boligtyper</label>
            </div>
            <div class="wraper go_left">
                <input id="chkFamilieboliger" type="checkbox" class="input_check" runat="server" />
                <label for="chkFamilieboliger">
                    Familieboliger</label>
            </div>
            <div class="wraper go_left">
                <input id="chkUngdomsboliger" type="checkbox" class="input_check" runat="server" />
                <label for="chkUngdomsboliger">
                    Ungdoms- &amp; studieboliger</label>
            </div>
            <div class="wraper go_left">
                <input id="chkAeldrebolig" type="checkbox" class="input_check" runat="server" />
                <label for="chkAeldrebolig">
                    Senior- &amp; ældreboliger</label>
            </div>
        </div>
        <div class="clear">
            &nbsp;</div>
        <div class="line">
            &nbsp;</div>
        <div class="block4 go_left">
            <h3>
                Vælg økonomi</h3>
            <div class="slider_info">
                <div class="slider_info_leftright_container">
                    <div class="slider_info_left">
                        <span>Husleje</span>
                    </div>
                    <div class="slider_info_right" style="float: right">
                        <span id="huslejefra" runat="server"></span> <em>til</em> <span id="huslejetil" runat="server"></span><span>kr</span>
                    </div>
                </div>
                <div class="Slider">
                    <div id="husleje-slider-range">
                    </div>
                </div>
            </div>
            <div class="slider_info">
                <div class="slider_info_leftright_container">
                    <div class="slider_info_left">
                        <span>Indskud</span>
                    </div>
                    <div class="slider_info_right" style="float: right">
                        <span id="indskudfra" runat="server"></span> <em>til</em> <span id="indskudtil" runat="server"></span><span>m2</span>
                    </div>
                    <div class="Slider">
                        <div id="indskud-slider-range">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div class="block4 go_right">
        <h3>
            Vælg størrelse</h3>
        <div class="slider_info">
            <div class="slider_info_leftright_container">
                <div class="slider_info_left">
                    <span>Antal værelser</span>
                </div>
                <div class="slider_info_right" style="float: right">
                    <span id="rumfra" runat="server">3</span> <em>til</em> <span id="rumtil"
                        runat="server">6</span><span>rum</span>
                </div>
            </div>
            <div class="Slider">
                <div id="rum-slider-range">
                </div>
            </div>
        </div>
        <div class="slider_info">
            <div class="slider_info_leftright_container">
                <div class="slider_info_left">
                    <span>m2</span>
                </div>
                <div class="slider_info_right" style="float: right">
                    <span id="storrelsefra" value="2" runat="server"></span> <em>til</em> <span id="storrelsetil" runat="server"></span><span>m2</span>
                </div>
            </div>
            <div class="Slider">
                <div id="storrelse-slider-range">
                </div>
            </div>
        </div>
    </div>
    <asp:Button ID="searchButton" OnClick="ImgSearch_Click" Text="Søg" runat="server" />
    </form>

    <div class="clear">
        &nbsp;</div>            

</div>
    <div class="block5">
        <h3>
            Vælg resultatvisning</h3>
            <div class="buttonswrapper">
        <div class="wraper">
            <input id="id9" type="radio" class="input_radio" />
            <label for="id9">
                Billedevisning</label>
        </div>
        <div class="wraper">
            <input id="id10" type="radio" class="input_radio" />
            <label for="id10">
                Kortvisning</label>
        </div>
        </div>
        <a class="link_img resetBtn" href="#">
            <img src="style/images/select_img.png" alt="" />Nulstil søgningen</a>
    </div>

    <div class="clear">&nbsp;</div>

<input id="HDSelectedAreas" type="hidden" runat="server" class="HSelectedArea" />
</div> 
```

搜索按钮在 aspx 中如下所示：

```
<asp:Button ID="searchButton" OnClick="ImgSearch_Click" Text="Søg" runat="server" /> 
```

这是背后的代码：

```
 protected void ImgSearch_Click(object sender, EventArgs e)
        {

            String cRoomsFrom = rumfra.Attributes["value"];
            String cRoomsTo = rumtil.Attributes["value"];
            String cSizeFrom = storrelsefra.Attributes["value"];
            String cSizeTo = storrelsetil.Attributes["value"];
            String cRentFrom = huslejefra.Attributes["value"];
            String cRentTo = huslejetil.Attributes["value"];
            String cDepositFrom = indskudfra.Attributes["value"];
            String cDepositTo = indskudtil.Attributes["value"];
} 
```

初始化值：

```
<script type="text/javascript" language="javascript">

        function setupSlider(min, max, step, values, sliderElement, minelement, maxelement) {

            $(sliderElement).slider({
                range: true,
                min: min,
                max: max,
                values: values,
                step: step,
                slide: function (event, ui) {
                    $(minelement).html(ui.values[0]);
                    $(maxelement).html(ui.values[1]);
                    $(minelement).attr('value', ui.values[0]);
                    $(maxelement).attr('value', ui.values[1]);
                    __doPostBack();
                }
            });

            $(minelement).html($(sliderElement).slider("values", 0));
            $(maxelement).html($(sliderElement).slider("values", 1));
            $(minelement).attr('value', $(sliderElement).slider("values", 0));
            $(maxelement).attr('value', $(sliderElement).slider("values", 1));
        }

        function initializeSliders() 
        {
            // størrelse slider
            var values = [10, 80];
            setupSlider(10, 80, 10, values, "#storrelse-slider-range", "#storrelsefra", "#storrelsetil");

            // husleje slider
            values = [1000, 7000];
            setupSlider(1000, 12000, 1000, values, "#husleje-slider-range", "#huslejefra", "#huslejetil");

            /// rum
            values = [3, 6];
            setupSlider(1, 8, 1, values, "#rum-slider-range", "#rumfra", "#rumtil");

            // indskud
            values = [3000, 7000];
            setupSlider(1000, 10000, 1000, values, "#indskud-slider-range", "#indskudfra", "#indskudtil");

            //fix color 
            fixToolTipColor();

        }

        $(document).ready(function () {
            $('.Udvidet').live('click', function () {
                $('.UdvidetSoegning').toggle('slow');
            });
            $(function () {
                initializeSliders();
                $(".resetBtn").live("click", function () {
                    initializeSliders();
                    __doPostBack();
                });

            });
        });
    </script> 
```

我尝试更改为`InnerHtml`and `InnerText`，但结果是一样的。有时 value 属性为 null，但随后 InnerHtml 或 InnerText 返回实际值：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:19:35.153

在回发时，仅`input`发布元素。

所以他们和回邮之前一样，他们在回邮之前有什么，现在有什么。所以实际上你**并没有**在后面的代码中“获取”这个参数，**你只是在打开视图状态的服务器控件上“设置”它们**，你可以在回发时记住这个参数 - 但你不能在客户端更改它们并期望阅读服务器上的此更改。

这里的解决方法是。Ether 使用页面的视图状态来保存一些值并将它们保留在回发中，以太使用输入隐藏元素将它们保留在回发中。

# php - 动态输入字段上的jquery datepicker

> ID：15155204
> 
> 赞同：2
> 
> 时间：2013-03-01T10:14:03.803
> 
> 标签：php, javascript, jquery

我需要有关动态创建的输入字段的日期选择器的帮助...

我有这个表格：

```
 <table id="reminder">
                 <tr>
                 <th>Payment Reminders</th> 
                 <th></th>
                 <th></th>
                 <th></th>
                 </tr>
                 <tr>
                    <td><label>Reminder</label></td>                              
                    <td><input type="text" name="payreminder[]" id="payreminder" class="input1" size="20" ><script>$('#payreminder').datepicker({dateFormat: $.datepicker.W3C, changeMonth: true, changeYear: true, yearRange: '2011:2020'}); </script></td> 
                    <td><label>Description</label></td>
                    <td><input type="text" class="input1" name="paydescription[]" id="paydescription"></td>
                    <td> <a href="#" onClick="addReminder('dynamicInputReminder');" title="Add another">Add another</a></td>
                 </tr>
                  <tr>
                   <td colspan="6"><div id="dynamicInputReminder"></div> </td> 

                </tr>

        </table> 
```

添加更多提醒的javascript是：

```
<script type="text/javascript" >

 var counterReminder = 1;
 var limit = 20;              
  function addReminder(divName){ 
     if (counterReminder == limit)  {
      alert("You have reached the limit of adding " + counterReminder+ " inputs");
      }
      else {
      var newdiv = document.createElement('div');
      newdiv.innerHTML = "<td><label>Reminder</label></td><td><input type=\"text\"  id=\"payreminder["+counterReminder+"]\" name=\"payreminder["+counterReminder+"]\" class=\"input1\" ></td><td><label>Description</label></td><td><input type=\"text\" id=\"paydescription["+counterReminder+"]\" name=\"paydescription["+counterReminder+"]\" class=\"input1\"></td>";
      document.getElementById(divName).appendChild(newdiv);
      counterReminder++;
 } 
}
</script> 
```

问题是：我如何以及在哪里可以为日期选择器调用下面的脚本，以便它适用于动态创建的字段？

```
<script>$('#payreminder').datepicker({dateFormat: $.datepicker.W3C, changeMonth: true, changeYear: true, yearRange: '2011:2020'}); </script> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:25:45.053

例如，为您的输入字段使用类而不是 id

```
<input type=\"text\"  id=\"payreminder["+counterReminder+"]\" name=\"payreminder["+counterReminder+"]\" class=\"payreminder\" >

<script>
    $(document).on('focusin', '.payreminder', function(){
      $(this).datepicker({dateFormat: $.datepicker.W3C, changeMonth: true, changeYear: true, yearRange: '2011:2020'});
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:24:19.803

试试这个

删除您的脚本并将其放在代码的末尾。

**注意： id 应该始终是唯一的，所以我在这里使用了 class。**

将您的 ID 更改为“payreminder”类。

```
$(document).find('.payreminder').datepicker({dateFormat: $.datepicker.W3C, changeMonth: true, changeYear: true, yearRange: '2011:2020'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:19:02.507

试试这个：

```
<script type="text/javascript" >

 var counterReminder = 1;
 var limit = 20;              
 function addReminder(divName) { 
     if (counterReminder == limit)  {
         alert("You have reached the limit of adding " + counterReminder+ " inputs");
     } else {
         var newdiv = document.createElement('div');
         newdiv.innerHTML = "<td><label>Reminder</label></td><td><input type=\"text\"  id=\"payreminder["+counterReminder+"]\" name=\"payreminder["+counterReminder+"]\" class=\"input1\" ></td><td><label>Description</label></td><td><input type=\"text\" id=\"paydescription["+counterReminder+"]\" name=\"paydescription["+counterReminder+"]\" class=\"input1\"></td>";
         document.getElementById(divName).appendChild(newdiv);
         $(newDiv).find('input').datepicker({dateFormat: $.datepicker.W3C, changeMonth: true, changeYear:  true, yearRange: '2011:2020'});
         counterReminder++;
     } 
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:19:17.867

```
$(document).on('focusin', 'input[id^=payreminder]', function(){
  $(this).datepicker({dateFormat: $.datepicker.W3C, changeMonth: true, changeYear: true, yearRange: '2011:2020'});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T10:27:58.043

在要添加日期选择器的每个输入字段上添加一个名为 date 的类，现在每次添加新字段时，调用以下函数

```
$(".date").datepicker(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-17T05:24:05.867

或者，您可以为每个输入使用`data-`属性而不是类。以下`<input type="text" data-datepicker ...>`在页面加载后立即初始化任何datepicker标签，然后可以在添加新提醒后再次调用。

```
function initDatePicker () {
    $("input[data-datepicker]").datepicker();
};
$(document).ready(initDatePicker()); 
```

此外，我发现`<input>`每次重新初始化它们时为所有 datepicker 调用 destroy() 方法很有用；否则，它们似乎会破裂。我使用了以下内容：

```
function addReminder(divName){
    ...
    $("input[data-datepicker]").datepicker('destroy');
    initDatePicker();
    ...
}; 
```

显然，请确保在调用`datepicker('destroy')` *之前先*调用`initDatePicker()`，否则每次添加新提醒时都会清除所有日期选择器。

[jQueryUI 日期选择器销毁方法](https://api.jqueryui.com/datepicker/#method-destroy)

# android - Android Wikipedia 文章搜索无法在我的 web 视图中正确显示？

> ID：15155205
> 
> 赞同：10
> 
> 时间：2013-03-01T10:14:12.933
> 
> 标签：android, html, webview

我在 Wikipedia-Article 搜索中工作，尝试使用 wikipedia API 沙箱并获取诸如[http://en.wikipedia.org/wiki/Special:ApiSandbox](http://en.wikipedia.org/wiki/Special:ApiSandbox)之类的网址。使用此获取 url 解析该 url 获取数据显示在我的 web 视图中但该数据未正确显示在我的 web 视图中的数据。

我想在我的 webview 中显示 json 数据。所有 webview 数据都没有在我的 webview 中修复，有时我的数据显示在屏幕外，那时我的 webview 滚动到水平。

**编辑：**删除我的网络视图中的水平滚动，数据超出屏幕。

**编辑：**这是我的屏幕截图；*我希望我的 webview 数据像这样显示*

![在此处输入图像描述](../Images/f908af13a4840f69ae589790a52ed8b9.png)

但是我的数据像这样显示只有如何在**不更改 HTML 数据的情况下解决这个问题，因为我的 html 数据是动态的**。

**任何人有任何图书馆维基百科搜索文章**给我一些想法。

![在此处输入图像描述](../Images/a4f1742fc0f4d032068ff247b578c8bc.png)

`ANOTHER QUESTION:`如何在我的动态 Html 数据中删除特定的`<div>`,以及如何获得点击（如列表视图点击）。给我任何维基百科图书馆，它对我非常有用。`<table>``Data``specific word in webview`

有人可以就如何做到这一点给出一些提示/建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T10:27:16.777

```
WebSettings settings = webview.getSettings();
settings.setBuiltInZoomControls(false);
settings.setUseWideViewPort(true);
settings.setJavaScriptEnabled(true);
settings.setSupportMultipleWindows(true);
settings.setJavaScriptCanOpenWindowsAutomatically(true);
settings.setLoadsImagesAutomatically(true);
settings.setLightTouchEnabled(true);
settings.setDomStorageEnabled(true);
settings.setLoadWithOverviewMode(true); 
```

用你的 webview 试试这些设置，我用这段代码修复了我的渲染错误。

# google-drive-api - PHP：类 Google_DriveService.php 的错误

> ID：15155206
> 
> 赞同：0
> 
> 时间：2013-03-01T10:14:15.420
> 
> 标签：google-drive-api

我使用库项目：google-api-php-client-0.6.1.tar.gts。复制示例[https://developers.google.com/drive/v2/reference/about/get?hl=ru](https://developers.google.com/drive/v2/reference/about/get?hl=ru)：

```
function printAbout($service) {
  try {
   $about = $service->about->get();

   print "Current user name: " . $about->getName();
   print "Root folder ID: " . $about->getRootFolderId();
   print "Total quota (bytes): " . $about->getQuotaBytesTotal();
   print "Used quota (bytes): " . $about->getQuotaBytesUsed();
  } catch (Exception $e) {
   print "An error occurred: " . $e->getMessage();
  }
} 
```

PHP错误：致命错误：调用非对象中的成员函数getName（）......
$about未分配给对象，并且数组类型：

```
Array (
[kind] => drive#file
[id] => 0B6xE_F1PfpXTWUVUNE5nZW5qYUU
[etag] => "Ys3khhcpAWaV7oeqaRGUOvsvqpo/MTM2MjEyNTY4MjE5NA"
[selfLink] => https://www.googleapis.com/drive/v2/files/0B6xE_F1PfpXTWUVUNE5nZW5qYUU
[webContentLink] => https://docs.google.com/uc?id=0B6xE_F1PfpXTWUVUNE5nZW5qYUU&export=download
[alternateLink] => https://docs.google.com/file/d/0B6xE_F1PfpXTWUVUNE5nZW5qYUU/edit
[iconLink] => https://ssl.gstatic.com/docs/doclist/images/icon_10_word_list.png
[thumbnailLink] => https://lh5.googleusercontent.com/Mb3p9nFVuzwGaaKVVxfyBKwPOS4-0QjiSUi7EcfiA6_QBgRThM7NrPOcBC-UcRKt6Q=s220
[title] => Kniga3_A5.doc
[mimeType] => application/msword
[labels] => Array
    (
        [starred] => 
        [hidden] => 
        [trashed] => 
        [restricted] => 
        [viewed] => 
    )

[createdDate] => 2013-03-01T08:14:40.352Z
[modifiedDate] => 2013-03-01T08:14:42.194Z
[modifiedByMeDate] => 2013-03-01T08:14:40.332Z
[parents] => Array .................. 
```

在函数 printFile 中获得了数组的一个示例，但它的格式与 printAbout 中的相同。
我认为应该给予对象......
我在其他功能中注意到的同样错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:56:58.877

PHP 客户端库可以返回关联数组或对象，示例假定您正在获取对象。要配置此行为，您可以`use_objects`在以下位置设置属性`$apiConfig`：

[https://code.google.com/p/google-api-php-client/source/browse/trunk/src/config.php#22](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/config.php#22)

# c# - Lotus Domino 同时检索在线状态

> ID：15155210
> 
> 赞同：1
> 
> 时间：2013-03-01T10:14:26.763
> 
> 标签：c#, lotus-notes, lotus-domino, sametime

有什么方法可以使用com-api同时访问在线状态吗？数据应该保存在 nsf 文件中，对吗？还是只能从相同的休息 api 访问？

我只想用 c# 访问每个用户的在线状态。有没有人有这方面的经验？

我已经使用 com-api 来检索房间状态和预订房间，所以如果仍然可以使用 com-api 来访问用户的在线状态，那就太好了！

我查看了这个文档[http://www.redbooks.ibm.com/redbooks/pdfs/sg247037.pdf](http://www.redbooks.ibm.com/redbooks/pdfs/sg247037.pdf)但没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T15:27:40.673

用户的状态不在 NSF 中维护，并且您不使用 Domino/Notes API 来访问 Sametime 信息，您将使用 Sametime SDK

曾经有一个 Sametime COM 工具包，但在后来的版本中被删除了。如果您获得了 Sametime Toolkit 的早期版本（我认为是 8.x 之前的版本），您会在其中找到它并且它仍然可以工作。

如果您有 Sametime 代理服务器，则可以使用 REST api 查询用户的状态。

Sametime 代理、Sametime COM 工具包都需要身份验证才能以用户身份登录。

Sametime 社区服务器工具包实际上是最有效的工具包，但它是一个 Java 工具包，因此您需要包装它才能使用它。

# ios - 如何以编程方式设置属性“Retina Display Off”？

> ID：15155216
> 
> 赞同：3
> 
> 时间：2013-03-01T10:15:03.040
> 
> 标签：ios, iphone, retina-display, vfr-reader

我使用开源 API（VFR 阅读器）创建了一个显示 pdf 文件的 iOS 应用程序。现在我想在我的 APP 中禁用 Retina 显示。我怎样才能做到这一点 。

请帮帮我。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:17:07.400

您可以使用该`enableRetinaDisplay:NO`方法。

# android - 如何在android中设置listview特定行的背景？

> ID：15155217
> 
> 赞同：1
> 
> 时间：2013-03-01T10:15:03.523
> 
> 标签：android, android-listview

在我的应用程序中，用户订购了一个家用产品，应用程序在列表视图中显示产品名称和价格，我想为**缺货**产品设置不同的背景。谁能帮我。

公共类产品扩展 BaseAdapter {

```
public ArrayList<HashMap<String, String>> list;
Activity activity;

boolean Connection;

public Products(Activity activity,
        ArrayList<HashMap<String, String>> list) {
    super();
    this.activity = activity;
    this.list = list;
}

public int getCount() {
    // TODO Auto-generated method stub
    return list.size();
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return list.get(position);
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

class ViewHolder {

    TextView item_name,item_price,product_id,item_stock;

}

public View getView(final int position, View convertView,
        final ViewGroup parent) {
    // TODO Auto-generated method stub

    final ViewHolder holder;
    LayoutInflater inflater = activity.getLayoutInflater();

    if (convertView == null) {

        convertView = inflater.inflate(R.layout.submenutext, null);

        if(ITEM_AVALIABLE_QUANTITY.equalsIgnoreCase("0")){

            convertView.setBackgroundResource(R.drawable.heading);
        }
        /*else{
            convertView.setBackgroundResource(R.drawable.sub_menu);
        }*/
        holder = new ViewHolder();

        holder.product_id = (TextView) convertView.findViewById(R.id.hide_text);
        holder.item_name = (TextView) convertView.findViewById(R.id.text);
        holder.item_price = (TextView) convertView.findViewById(R.id.price);
        //holder.item_stock = (TextView)convertView.findViewById(R.id.stock);

        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    final HashMap<String, String> map = list.get(position);
    holder.product_id.setText(map.get(PRODUCT_ID));
    holder.item_name.setText(map.get(ITEM_NAME_COLUMN));
    holder.item_price.setText(map.get(ITEM_PRICE_COLUMN));
    holder.item_stock.setText(map.get(ITEM_AVALIABLE_QUANTITY));

    /*if(holder.item_stock.equals("0")){

        convertView.setBackgroundResource(R.drawable.heading);
    }*/

    return convertView;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:44:31.030

您可以将数据发送到具有自己自定义布局的自定义适配器。

主.java

```
 ListAdapter  adapter = new ListAdapter(this, arrayList);//ListAdapter is custom Adapter  
hotelList.setAdapter(adapter);  // hotellist is instance of ListView 
```

这是您的自定义适配器 .java 文件。这个类有一个单独的视图，即list_row。

```
public class LazyAdapterForReminder extends BaseAdapter {    
private Activity activity;   
private static LayoutInflater inflater=null;   

public LazyAdapterForReminder(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);
 TextView lv = (TextView)vi.findViewByID(R.id.blabla);    

   if(stock==o)
       lv.setBackgroundResource(R.color.red);
   else
       lv.setBackgroundResource(R.color.green);

    return vi;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:26:18.123

我希望您熟悉编写自定义适配器以在列表视图上进行设置。您可以使用产品名称和日期的缺货产品状态管理您的列表项目。在 CustomAdapter getView 方法上，您可以检查状态并设置列表项颜色的背景，或者设置相应的可绘制图像。例如：

```
 @Override        
     public View getView(int position, View convertView, ViewGroup parent) { 

                               if(stock==0){
                                        convertView.setBackgroundColor(R.color.grey);
                                 }else{
                                        convertView.setBackgroundColor(R.color.red);
                                   }

                          return convertView;
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:22:02.210

您可以在 Adapter getView 中设置背景。代码如下所示：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;

          if (convertView == null) {

            LayoutInflater vi = (LayoutInflater)  getContext().getSystemService (Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.listsearchitem, null);
            }

  //.................

            // then you could set the backgorun for the out of stock products
            convertView.setBackgroundResource(resid)

            //.................
      } 
```

# python - 如何使用python制作现有列表中重复条目的另一个列表？

> ID：15155220
> 
> 赞同：1
> 
> 时间：2013-03-01T10:15:12.270
> 
> 标签：python, list

我有一个类似的清单：

```
l = [[(3,4)], [(3,7)], [(3,8)]] 
```

我使用该`chain()`函数来平展列表，现在我有一个类似的列表：

```
l2 = [3,4,3,7,3,8] 
```

我想将重复的项目分成另一个列表：

```
l3 = [3,3,3]
l4 = [4,7,8] 
```

我使用了该`set()`功能，但它破坏了重复的项目并导致：

```
l3 = [4,7,8] 
```

但我想分别获得它们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:17:50.003

您必须进行某种计数。使用[`collections.Counter()`该类](http://docs.python.org/2/library/collections.html#collections.Counter)会很容易：

```
from collections import Counter
counts = Counter(main_list)

duplicate_list, unique_list = [], []
for entry in main_list:
    if counts[entry] > 1:
        duplicate_list.append(entry)
    else:
        unique_list.append(entry) 
```

`counts`是多套或袋子；entry 到它的 count in 的映射`main_list`。上面的例子保留了 的顺序`main_list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:39:27.850

扩展到@Martijn Pieters 答案，您可以使用 ifilter 过滤掉那些与 lambda 表达式中的条件匹配的内容（ifilter 中的第一个参数）：

```
from collections import Counter
from itertools import ifilter

counts = Counter(l2)    

l3 = list(ifilter(lambda x: counts[x] > 1, l2))
l4 = list(ifilter(lambda x: counts[x] == 1, l2)) 
```

# javascript - jQueryUI 按钮：如何更改按钮图标“颜色”

> ID：15155225
> 
> 赞同：1
> 
> 时间：2013-03-01T10:15:32.267
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-button

我以以下方式在 div 中放置*了一个**html 按钮：*

 *```
<div class="ui-state-highlight">
    <button type="button" class="ui-button ui-state-default ui-corner-all ui-button-text-icon-primary">
        <!-- first span -->
        <span class="ui-button-icon-primary ui-icon ui-icon-disk"></span>
        <!-- second span -->
        <span class="ui-button-text">Save</span>
    </button>
    <!-- third span -->
    <span class="ui-icon ui-icon-info"></span>
    <strong>All</strong> form fields are required.
</div> 
```

由于*div*已分配类：*按钮的*`ui-state-highlight`图标颜色已更改为*blue*。

 **有没有办法可以将图标颜色恢复为：*默认（黑色）*颜色？

**此外**，我需要*第三个跨度*中的图标具有`ui-state-highlight`.

我尝试将 应用`ui-state-default`到第*一个跨度*（包含图标），但这并没有达到预期的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:00:24.960

重写`ui-state-highlight`应用于容器的类（例如*divs 和 spans*）解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:20:55.463

您可以添加新样式，默认（黑色）图标颜色的图像路径（[http://code.jquery.com/ui/1.9.2/themes/base/images/ui-icons_2e83ff_256x240.png](http://code.jquery.com/ui/1.9.2/themes/base/images/ui-icons_2e83ff_256x240.png)）

**编辑：**

或者将外部 div 类更改为 ui-state-default：

```
<div class="ui-state-default">
    <button type="button" class="ui-button ui-state-default ui-corner-all ui-button-text-icon-primary">
        <span class="ui-button-icon-primary ui-icon ui-icon-disk"></span>
        <span class="ui-button-text">Save</span>
    </button>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:32:50.830

自己定义样式，如下所示：

```
.ui-icon-custom { background-image: url(images/custom.png); } 
```

然后在调用 .button() 时使用它，如下所示：

```
$('#button').button({
  label: 'Test',
  icons: {primary: 'ui-icon-custom', secondary: null}
}); 
```

这假设您的自定义图标位于 CSS 下的 images 文件夹中……与 jQuery UI 图标映射通常位于相同的位置。创建图标时，它会得到一个像这样的类：class="ui-icon ui-icon-custom"，并且该 ui-icon 类看起来像这样（可能是不同的图像，取决于主题）：

```
.ui-icon { 
  width: 16px; 
  height: 16px; 
  background-image: url(images/ui-icons_222222_256x240.png); 
} 
```

因此，在您的风格中，您只是覆盖该背景图像，如果需要更改宽度、高度等。***

# codeigniter - 删除图像后的尾随（空格）%20

> ID：15155227
> 
> 赞同：0
> 
> 时间：2013-03-01T10:15:32.673
> 
> 标签：codeigniter, space, codeigniter-url, trailing

我从丢失图像的错误日志中收到错误消息。出现丢失的原因是因为在图像文件扩展名之后有一个这样的空格

> 上传/图片/thumbs/natasha.jpg%20

这个 404 错误并不总是发生，它有时会发生。

我已经在 Codeigniter php 框架上构建了该项目。

我应该怎么做才能删除尾随空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:09:21.043

尝试先修剪和解码

```
$image = trim(urldecode($image)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:05:12.527

您需要使用 trim() 函数。( [http://au1.php.net/manual/en/function.trim.php](http://au1.php.net/manual/en/function.trim.php) )

例如

```
$image = " this/is/the/path/to/myimage.jpg ";
// Note the spaces around the string

$image = trim($image);
// $image now equals "thisis/the/path/to/myimage.jpg"
// Note: no spaces 
```

# c++ - 在 .NET 中使用 C++ 应用程序

> ID：15155237
> 
> 赞同：1
> 
> 时间：2013-03-01T10:16:01.087
> 
> 标签：c++, vb.net, pinvoke

我是使用经典 C++ 的 PInvoke 的新手，昨天我问了这个问题：[在 .NET 中使用 Windows API 函数](https://stackoverflow.com/questions/15143425/using-windows-api-functions-in-net)

我现在创建了一个非常简单的 C++ 程序，如下所示：

```
#include <iostream>
#include <stdio.h>
#include <string>
extern "C" __declspec(dllexport) int hello()
{
  //printf ("Hello World!\n");
  return 1;
} 
```

然后我使用以下命令编译 DLL：g++ -c mydll.cpp 然后使用以下命令创建共享库：g++ -shared -o mydll.dll mydll.o，然后将 mydll.dll 复制到 C:\Windows\syswow64 .

然后我创建了一个新的 VB.NET 项目并创建了以下代码：

```
 Imports System.Runtime.InteropServices
Public Class TestPlatformInvoke
    <DllImport("mydll.dll", CallingConvention:=CallingConvention.Cdecl)> _
    Public Shared Function hello() As Integer
    End Function
    Public Sub New()
        Try
            Dim test As Integer = hello() 'Line 6 ex As Exception
            'I don't swallow exceptions
            MsgBox("test")
        Catch ex As Exception

        End Try
    End Sub
End Class 
```

应用程序在调用 hello() 后退出。它不会抛出异常。

我正在尝试了解它是如何工作的。我没有任何 C++ 商业经验；只有大学的学术经验。

这是 mydll.dll 的 Dependancy Walker 的图像。

![在此处输入图像描述](../Images/c6355fd006c5b4b47813e2f0bc29dc9e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:02:55.430

如果您使用 Visual Studio 调试程序并将 DLL 包含在您的项目中（Visual Studio 2012 Express Edition 允许在解决方案中包含不同类型的项目），您可以设置“允许本机代码调试”选项以自动将调试器从VB.NET 到 C++，当您从 DLL 中 P/Invoke 函数时。

这是一个[有效的概念证明](http://spook.freshsite.pl/Temporary/PInvokePoC.zip)。只需解压缩，在 Visual Studio 中打开，构建并运行。您可以将此程序与您的项目进行比较并发现差异，从而使您的代码失败。

我猜，您实际上并没有从 DLL 中导出函数。仅仅将它包含在 DLL 的代码中可能是不够的：检查，使用[Dependency Walker](http://www.dependencywalker.com)（[其他链接](http://download.cnet.com/Dependency-Walker/3000-2086_4-10052198.html)）程序从 DLL 中导出了哪些函数。例如，我必须添加以下声明：

```
__declspec(dllexport) int __stdcall Test() { ... } 
```

并另外为导出的函数的名称创建 .def 文件而不进行修饰。

尝试修改您的 DLL 源代码并将函数声明更改为：

```
extern "C" __declspec(dllexport) int hello()
{
  return 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:11:42.873

`Declare`是 VB6 遗留的。您应该使用 p/invoke 和 DllImport 属性。

```
<DllImport("mydll.dll", CallingConvention:=CallingConvention.Cdecl)> _
Public Shared Function hello() As Integer
End Function 
```

有很多方法可能会失败。可能由于 32/64 位不匹配，DLL 没有加载。此外，您的调用约定不匹配。您的 DLL 将使用 cdecl，但您的 VB 代码使用 stdcall。上面的 pinvoke 解决了这个问题。

最严重的是，您的函数似乎没有从 DLL 中导出。那肯定会失败。使用 Dependency Walker 确定您的函数是否已导出。我对 g++ 不太熟悉，所以你必须弄清楚如何使用 GNU 工具链导出你的函数。但要注意名称装饰和名称修饰。您可能需要注意如何导出函数，以便以所需的名称导出它。

# validation - cakephp 验证翻译的字段

> ID：15155239
> 
> 赞同：0
> 
> 时间：2013-03-01T10:16:06.557
> 
> 标签：validation, cakephp, translation, field

我有一个模特前任。充当翻译的帖子，我想验证作为翻译字段的标题。这怎么可能。以下不起作用。

```
'title' => array(
    'notempty' => array(
    'rule' => array('notempty'),
    ),
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:20:01.060

将规则名称更改为 camelCase: notEmpty 并添加消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:36:19.703

您在 /Locale default.po 中翻译您的消息

```
'title' => array(
    'notEmpty' => array(
        'rule' => array('notEmpty'),
        'message' => 'your translated message',
    ),
)); 
```

有什么大不了的？

# search - 在 Solr 多核中重用停用词和其他文件

> ID：15155240
> 
> 赞同：0
> 
> 时间：2013-03-01T10:16:18.137
> 
> 标签：search, solr, lucene

我有一个 solr 的多核设置，其目录结构类似于

```
-多核
|-核心0
|--配置
|---schema.xml
|---solrconfig.xml
|---停用词
|---同义词
|-核心1
|--配置
|---schema.xml
|---solrconfig.xml
|---停用词
|---同义词

```

这两个核心本质上都使用相同的停用词和同义词文件。有没有办法，这两个文件都可以放在一个共同的地方，两个内核都从那里读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:35:34.330

根据[CoreAdmin](http://wiki.apache.org/solr/CoreAdmin)文档，您可以

> 在 solr.xml 中指定可在 solrconfig.xml 和 schema.xml 文件中使用的属性。

因此，作为示例，您可以创建类似于以下内容的内容：

```
 <solr persistent="true" sharedLib="lib">
   <property name="synonymns" value="<your path here>/synonyms.txt" />
   <property name="stopwords" value="<your path here>/stopwords.txt" />
   <cores adminPath="/admin/cores">
     <core name="core0" instanceDir="core0"/>
     <core name="core1" instanceDir="core1" />
  </cores>
</solr> 
```

希望这可以帮助您入门，您显然希望/需要修改 solr.xml 设置以满足您的特定需求。对于如何定义属性和使用默认值，还有一些其他选项。有关详细信息，请参阅文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:32:58.853

不确定最新版本是否有任何优雅的方式。
您可以使用停用词文件的绝对路径进行检查。
我们刚刚创建了一个指向公共共享文件的符号链接，这些文件已更新以避免重复。

# php - 用PHP提取字符串中的第一个整数

> ID：15155247
> 
> 赞同：5
> 
> 时间：2013-03-01T10:16:34.547
> 
> 标签：php, preg-replace

考虑以下字符串：

```
$strings = array(
    "8.-10\. stage",
    "8\. stage"
); 
```

我想提取每个字符串的第一个整数，所以它会返回

```
8
8 
```

我试图用 preg_replace 过滤掉数字，但它返回所有整数，我只想要第一个。

```
foreach($strings as $string)
{
    echo preg_replace("/[^0-9]/", '',$string);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-01T10:19:58.753

使用正则表达式的一个方便（尽管在性能上不是破纪录的）解决方案是：

```
$string = "3rd time's a charm";

$filteredNumbers = array_filter(preg_split("/\D+/", $string));
$firstOccurence = reset($filteredNumbers);
echo $firstOccurence; // 3 
```

假设输入中至少有一个数字，这将打印第一个数字。

非数字字符将被完全忽略，除了它们被视为分隔数字之外，这意味着第一个数字可以出现在输入中的任何位置（不一定在开头）。

如果您只想考虑出现在字符串开头的数字，则不需要正则表达式：

```
echo substr($string, 0, strspn($string, "0123456789")); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-09T06:30:32.217

```
preg_match('/\d+/',$id,$matches);
$id=$matches[0]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-08T22:26:41.637

如果整数总是在字符串的开头：

```
(int) $string; 
```

如果不是，则[strpbrk](http://php.net/manual/en/function.strpbrk.php)可用于提取第一个非负数：

```
(int) strpbrk($string, "0123456789"); 
```

### 备择方案

这些单行代码基于[preg_split](http://php.net/manual/en/function.preg-split.php)、[preg_replace](http://php.net/manual/en/function.preg-replace.php)和[preg_match](http://php.net/manual/en/function.preg-match.php)：

```
preg_split("/\D+/", "$string ")[1];
(int) preg_replace("/^\D+/", "", $string);
preg_match('/\d+/', "$string 0", $m)[0]; 
```

其中两个将额外的字符附加到字符串中，因此空字符串或没有数字的字符串不会引起问题。

请注意，这些替代解决方案仅用于提取*非负*整数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T10:19:45.277

试试这个：

```
$strings = array(
    "8.-10\. stage",
    "8\. stage"
);

$res   = array();
foreach($strings as $key=>$string){
  preg_match('/^(?P<number>\d)/',$string,$match);
  $res[$key] = $match['number'];
}

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T10:20:06.157

```
foreach($strings as $string){
    echo preg_replace("/([0-9]+)\./", "\\1",$string);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T10:20:24.023

```
foreach($strings as $string){
 if(preg_match("/^(\d+?)/",$string,$res)) {
   echo $res[1].PHP_EOL;
 }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-04T12:20:48.463

**如果您在 PHP 7 + 中有通知**

> 注意：只有变量应该在第 LINE_NUMBER 行的 YOUR_DIRECTORY_FILE.php 中通过引用传递

**通过使用此代码**

```
echo reset(array_filter(preg_split("/\D+/", $string))); 
```

**将代码更改为**

```
$var = array_filter(preg_split("/\D+/", $string));
return reset($var); 
```

*享受！最好的问候奥瓦萨波夫*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-02-18T23:03:00.293

**如何过滤除第一个出现的整数以外的所有字符：**

目标整数可能不在字符串的开头（即使 OP 的问题仅提供以整数开头的样本 - 其他研究人员可能需要更多实用程序......就像我今天关闭的页面使用这一页）。输入也可能不包含整数，或者没有前导/没有尾随非数字字符。

下面是一个正则表达式有两个检查：

1.  它以字符串开头的所有非数字字符为目标——如果有的话，它会在第一个遇到的数字之前立即停止。
2.  它匹配/消耗第一个遇到的整个整数，然后`\K`在匹配/消耗字符串其余部分中的任何遇到的字符之前立即忘记/释放它（使用）。

我的代码片段将根据字符串的质量进行 0、1 或 2 次替换。

代码：（[演示](https://3v4l.org/hABgk)）

```
$strings = [
    'stage', // expect empty string
    '8.-10\. stage', // expect 8
    '8\. stage', // expect 8
    '8.-10\. stage 1st', // expect 8
    'Test 8\. stage 2020', // expect 8
    'Test 8.-10\. stage - 2020 test', // expect 8
    'A1B2C3D4D5E6F7G8', // expect 1
    '1000', // expect 1000
    'Test 2020', // expect 2020
];

var_export(
    preg_replace('/^\D+|\d+\K.*/', '', $strings)
); 
```

输出：

```
array (
  0 => '',
  1 => '8',
  2 => '8',
  3 => '8',
  4 => '8',
  5 => '8',
  6 => '1',
  7 => '1000',
  8 => '2020',
) 
```

# mongodb - 在 mongodb 上更新子元素

> ID：15155253
> 
> 赞同：1
> 
> 时间：2013-03-01T10:17:03.627
> 
> 标签：mongodb, mongodb-shell

我对 mongodb 更新方法有一点问题。这是我的（简化的）模式：

```
{
   profile: {
      birthdate: "XXX",
      city: "xxx"
   },
   account: {
      username: "...",
      password: "....",
      visits: 0
   }
} 
```

我在数据库中有 2000 个对象。我想通过删除用户名值来匿名化数据。

我试过这个：

```
db.users.update({}, {$set: account: {username: ""}}, false, true); 
```

这不起作用，此查询删除密码字段并访问。我明白为什么，但怎么办？

```
db.users.update({}, {account: { $set: {username: ""}}}, false, true); 
```

mongo 想要分配“$set”字段，所以这不起作用。

我的问题是：如何在不删除整个“帐户”子文档的情况下更新后代字段？

（将“upsert”设置为 true 也是如此。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:22:07.787

你应该使用：

```
$set:{"account.username":""} 
```

只是想知道你为什么不使用`$unset`？

# php - JavaScript 功能相同，但在 PHP 中

> ID：15155255
> 
> 赞同：0
> 
> 时间：2013-03-01T10:17:27.137
> 
> 标签：php, javascript, jquery, timer, shoutcast

好的，我正在重新提出这个问题，因为我认为我做的有点太长了:)

我的研究来自我学习如何制作函数和计时器的网站。我当然想用计时器重复 php 部分，但我想我也知道怎么做。首先，我认为这很重要，当我改变流时，我至少得到改变的价值。
这是我的 JQuery 代码，它从 @2 获取标题变量

@1

```
$("#jquery_jplayer").bind($.jPlayer.event.play, function(event) {       
$('#title').empty();
$('#title').append(myPlaylist.playlist[myPlaylist.current].title); 
```

@2

```
var myPlaylist = new jPlayerPlaylist({jPlayer: "#jquery_jplayer",
    cssSelectorAncestor: "#jp_container"
}, [{
    title: "test",                                           // This is grabbed
    mp3: "http://x.x.x.x:xxxx/",
    streaminfo: "x.x.x.x","xxxx",                            // Ip and port Seperate
    },
    {
    title: "test2",                                           // This is grabbed
    mp3: "http://x.x.x.x:xxxx/",
    streaminfo: "x.x.x.x","xxxx",                            // Ip and port Seperate
    }, 
```

我想要这个代码：

```
$('#title').append(myPlaylist.playlist[myPlaylist.current].title); 
```

获取ip和端口。但是在 PHP 中，因为我有以下 php 代码，它可以从广播流 URL 中获取歌曲标题。

php代码如下：

```
<?php

    function myTest($host,$port)
    {
        //$host = "178.156.201.212"; // ip or url of shoutcast server
        //$port = "8000";          // port of shoutcast server 

        $fp = @fsockopen("$host", $port, $errno, $errstr, 30);

        if($fp)
        {
          fputs($fp,"GET /7.html HTTP/1.0\r\nUser-Agent: GET SEVEN (Mozilla Compatible)\r\n\r\n");

          while(!feof($fp))
          {
            $data .= fgets($fp, 1000);
          }

          fclose($fp);

          $data              = ereg_replace(".*<body>", "", $data);
          $data              = ereg_replace("</body>.*", ",", $data);
          $data_array        = explode(",",$data);
          $listeners         = $data_array[0];
          $status            = $data_array[1];
          $peak_listeners    = $data_array[2];
          $maximum_listeners = $data_array[3];
          $unique_listeners  = $data_array[4];
          $bitrate           = $data_array[5];
          $track             = $data_array[6];
        }

        $title  = chop($track);
        $select = explode(" - ",$title);
        $artist = chop($select[0]);
        $title  = chop($select[1]);
    }
?> 
```

我希望我清楚地展示我的问题:)

# c# - 单击时选择的所有行

> ID：15155260
> 
> 赞同：0
> 
> 时间：2013-03-01T10:17:54.563
> 
> 标签：c#, .net, winforms, datagridview

我正在 C# Winforms 中构建一个应用程序并使用`Datagridview`.

我的问题是，当我单击一行时，所有行都被选中（无意）并且应用程序崩溃（因为从网格视图选择的行插入到标签中的值不完整（值太多......）。

![自动完成所有行的选择](../Images/726ebce5e3579e621afbb9a1af2e0751.png)

我正在寻找的正确行为是仅选择 on row 。我以为问题可能出在`selectionMode`（我使用了值“ `RowHeaderSelect`”），但我改变了它，问题仍然存在，所以不是这样。

你知道可能是什么问题吗？

* * *

真的不依赖太多代码，但这里是：

```
private void dgvCustomersList_MouseClick(object sender, MouseEventArgs e)
        {
            {
                customerFunctions ChoosenRow = new customerFunctions(); //empty
                DataGridViewRow dr = dgvCustomersList.SelectedRows[0];

                ChoosenRow.CfirstName = dr.Cells[1].Value.ToString();
                ChoosenRow.ClastName = dr.Cells[2].Value.ToString();
                ChoosenRow.Caddress = dr.Cells[3].Value.ToString();
                ChoosenRow.CcreditNumber = int.Parse(dr.Cells[7].Value.ToString());
                ChoosenRow.CpersonalID = int.Parse(dr.Cells[5].Value.ToString()); 
            }
} 
```

# javascript - Slide.js 在 UIWebView 中停止传播

> ID：15155262
> 
> 赞同：1
> 
> 时间：2013-03-01T10:17:57.490
> 
> 标签：javascript, ios, uiwebview

我正在使用 slidejs - slidejs.com - 库在嵌入到 iOS 上的 UIWebView 的页面上创建滑块。我基本上想在到达面板末尾时停止 JS 捕获手势，并开始将其传递回 WebView 本身以允许页面更改。

进入页面的 JS 优先于手势识别器，因此可能需要在特定事件上停止它以让 WebView 获得对手势的控制。

# c# - 在以下情况下如何重置 IEnumerator 实例

> ID：15155264
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:17:59.237
> 
> 标签：c#, .net

在以下情况下如何重置 IEnumerator 实例？（e.Reset() 抛出 NotImplementedException）

```
 void Main()
    {
       IEnumerator<string> e = new List<string> { "a", "b", "c" }.Select(o => o).GetEnumerator();

       while( e.MoveNext() ) 
       {
           Console.WriteLine( e.Current );
       }

       if( 
            //some condition
         ) 
       {
           e.Reset();

           while( e.MoveNext() ) 
           {
               //Do something else with e.Current
           }
       }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:20:58.123

因为该方法的“实现”看起来*像*这样：

```
public void Reset() {
  throw new NotImplementedException();
} 
```

[从 MSDN](http://msdn.microsoft.com/en-gb/library/system.notimplementedexception.aspx)参考：

> 为 COM 互操作性提供了 Reset 方法。它不一定需要实施；相反，实现者可以简单地抛出 NotSupportedException。

在这种情况下，使用的异常类型是该建议的偏差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:22:58.270

查看[文档](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.reset%28v=vs.100%29.aspx)的解释是这样的：

> 为 COM 互操作性提供了 Reset 方法。它不一定需要实施；相反，实现者可以简单地抛出 NotSupportedException。

和

> 对实施者的说明 所有对 Reset 的调用都必须导致枚举数的状态相同。首选的实现是将枚举数移动到集合的开头，在第一个元素之前。如果在创建枚举器后集合已被修改，这将使枚举器无效，这与 MoveNext 和 Current 一致。

# php - WP-admin 不工作，显示 php 错误

> ID：15155273
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:18:33.107
> 
> 标签：php, wordpress

```
Warning: require(wp-blog-header.php) [function.require]: failed to open stream: No such file or directory in /home/tratam79/public_html/masoarafebra.ro/wp-admin/index.php on line 17

Warning: require(wp-blog-header.php) [function.require]: failed to open stream: No such file or directory in /home/tratam79/public_html/masoarafebra.ro/wp-admin/index.php on line 17

Fatal error: require() [function.require]: Failed opening required 'wp-blog-header.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/tratam79/public_html/masoarafebra.ro/wp-admin/index.php on line 17 
```

这些是我在尝试访问 wp-admin 时遇到的错误。到目前为止，我已经尝试伪造文件的完整 URL。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:28:50.310

可能是您的 wordpress 文件丢失或无法访问。如果你只是上传它，它可能是它没有完全上传。

# matlab - 通过交换行和列重新排列稀疏数组

> ID：15155276
> 
> 赞同：8
> 
> 时间：2013-03-01T10:18:46.007
> 
> 标签：matlab, numpy, scipy, sparse-matrix

我有大而稀疏的数组，我想通过交换行和列来重新排列它们。什么是这样做的好方法`scipy.sparse`？

一些问题

*   我不认为置换矩阵非常适合这项任务，因为它们喜欢随机改变稀疏结构。并且操作将始终“乘以”所有列或行，即使只需要几次交换。

*   `scipy.sparse`这项任务的最佳稀疏矩阵表示是什么？

*   非常欢迎提出实施建议。

我也用 Matlab 标记了这个，因为这个问题可能会找到一个不一定`scipy`具体的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:50:17.593

CSC 格式保存所有非零条目的行索引列表，CSR 格式保存所有非零条目的列索引列表。我认为您可以利用它来交换以下内容，并且我认为它不应该有任何副作用：

```
def swap_rows(mat, a, b) :
    mat_csc = scipy.sparse.csc_matrix(mat)
    a_idx = np.where(mat_csc.indices == a)
    b_idx = np.where(mat_csc.indices == b)
    mat_csc.indices[a_idx] = b
    mat_csc.indices[b_idx] = a
    return mat_csc.asformat(mat.format)

def swap_cols(mat, a, b) :
    mat_csr = scipy.sparse.csr_matrix(mat)
    a_idx = np.where(mat_csr.indices == a)
    b_idx = np.where(mat_csr.indices == b)
    mat_csr.indices[a_idx] = b
    mat_csr.indices[b_idx] = a
    return mat_csr.asformat(mat.format) 
```

你现在可以做这样的事情：

```
>>> mat = np.zeros((5,5))
>>> mat[[1, 2, 3, 3], [0, 2, 2, 4]] = 1
>>> mat = scipy.sparse.lil_matrix(mat)
>>> mat.todense()
matrix([[ 0.,  0.,  0.,  0.,  0.],
        [ 1.,  0.,  0.,  0.,  0.],
        [ 0.,  0.,  1.,  0.,  0.],
        [ 0.,  0.,  1.,  0.,  1.],
        [ 0.,  0.,  0.,  0.,  0.]])
>>> swap_rows(mat, 1, 3)
<5x5 sparse matrix of type '<type 'numpy.float64'>'
    with 4 stored elements in LInked List format>
>>> swap_rows(mat, 1, 3).todense()
matrix([[ 0.,  0.,  0.,  0.,  0.],
        [ 0.,  0.,  1.,  0.,  1.],
        [ 0.,  0.,  1.,  0.,  0.],
        [ 1.,  0.,  0.,  0.,  0.],
        [ 0.,  0.,  0.,  0.,  0.]])
>>> swap_cols(mat, 0, 4)
<5x5 sparse matrix of type '<type 'numpy.float64'>'
    with 4 stored elements in LInked List format>
>>> swap_cols(mat, 0, 4).todense()
matrix([[ 0.,  0.,  0.,  0.,  0.],
        [ 0.,  0.,  0.,  0.,  1.],
        [ 0.,  0.,  1.,  0.,  0.],
        [ 1.,  0.,  1.,  0.,  0.],
        [ 0.,  0.,  0.,  0.,  0.]]) 
```

我使用 LIL 矩阵来展示如何保留输出的类型。在您的应用程序中，您可能希望已经是 CSC 或 CSR 格式，并根据它选择是否首先交换行或列，以最大限度地减少转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:55:21.507

在 Matlab 中，您可以按照自己喜欢的方式索引列和行：

```
Matrix = speye(10);
mycolumnorder = [1 2 3 4 5 6 10 9 8 7];
myroworder = [4 3 2 1 5 6 7 8 9 10];
Myorderedmatrix = Matrix(myroworder,mycolumnorder); 
```

我认为这保留了稀疏性...虽然不知道 scipy...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-23T14:53:08.823

我发现使用矩阵运算是最有效的。这是一个将行和/或列排列为指定顺序的函数。如果您愿意，可以修改它以交换两个特定的行/列。

```
from scipy import sparse

def permute_sparse_matrix(M, row_order=None, col_order=None):
    """
    Reorders the rows and/or columns in a scipy sparse matrix to the specified order.
    """
    if row_order is None and col_order is None:
        return M

    new_M = M
    if row_order is not None:
        I = sparse.eye(M.shape[0]).tocoo()
        I.row = I.row[row_order]
        new_M = I.dot(new_M)
    if col_order is not None:
        I = sparse.eye(M.shape[1]).tocoo()
        I.col = I.col[col_order]
        new_M = new_M.dot(I)
    return new_M 
```

# c++ - 字符串转换为 const char * 问题

> ID：15155277
> 
> 赞同：1
> 
> 时间：2013-03-01T10:18:55.553
> 
> 标签：c++, string, char, constants, libcurl

我有这个问题，每当我尝试通过 libcurls http post 发送我的 post_data1 时，它都会显示错误的密码，但是当我在 post_data2 中使用固定表达式时，它会登录。当我计算出两者时，它们是完全相同的字符串。

谁能告诉我为什么当 libcurl 将它们放在标题中时它们不一样？或者如果是这样的话，为什么在我发送它们之前它们会有所不同。

```
string username = "mads"; string password = "123"; 
stringstream tmp_s;
tmp_s << "username=" << username << "&password=" << password;
static const char * post_data1 = tmp_s.str().c_str();
static const char * post_data2 = "username=mads&password=123";

std::cout << post_data1 << std::endl;  // gives username=mads&password=123
std::cout << post_data2 << std::endl;  // gives username=mads&password=123

// Fill postfields
curl_easy_setopt(curl, CURLOPT_POSTFIELDS, post_data1);

// Perform the request, res will get the return code
res = curl_easy_perform(curl); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:21:45.543

当你使用时，`tmp_s.str()`你会得到一个*临时*字符串。您不能保存指向它的指针。您必须将其保存到 a`std::string`并在调用中使用该字符串：

```
std::string post_data = tmp_s.str();

// Post the data
curl_easy_setopt(curl, CURLOPT_POSTFIELDS, post_data.c_str()); 
```

* * *

如果（且仅当）`curl_easy_setopt` *复制*字符串（而不只是保存指针），您可以`tmp_s`在调用中使用：

```
// Post the data
curl_easy_setopt(curl, CURLOPT_POSTFIELDS, tmp_s.str().c_str()); 
```

但我不知道该函数是复制字符串还是只是保存指针，所以第一种选择（使用 a `std::string`）可能是最安全的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:22:32.060

```
static const char * post_data1 = tmp_s.str().c_str(); 
```

是个问题。它返回一个字符串对象，然后获得一个指向该对象内部字符串数据的指针。然后，该字符串在该行的末尾超出范围，因此您会留下一个指针，指向...接下来发生在该内存中的任何内容。

```
static std::string str = tmp_s.str();
static const char* post_data1 = str.c_str(); 
```

可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:25:41.773

尝试删除`static`存储说明符，编译并运行。

注意：即使`c_str()`结果名义上是暂时的，它也可能是（并且通常是）永久的。为了快速修复，它可能会起作用。

# c++ - 如何访问 std::list 的第一个元素？

> ID：15155291
> 
> 赞同：14
> 
> 时间：2013-03-01T10:19:34.540
> 
> 标签：c++, list, pointers, stl, iterator

我有一个清单`std::list<T *> *l;`。此列表不为空并且具有一些值。我的问题是如何正确访问项目？我不需要遍历列表。我只想要第一项。

```
std::list<T*>::iterator it = l->begin();

if (it != l->end())
{
    // accessing T
    int value = (*it)->value(); // Is this safe?
} 
```

还是我也应该检查 null ？

```
if (it != l->end() && (*it))
{
    // accessing T
    int value = (*it)->value();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T10:59:43.473

如果您被迫使用`std::list<T*> myList;`，假设`T`定义为：

```
struct T
{
    T(const char* cstr) : str(cstr){ }
    std::string str;
}; 
```

然后只需使用[`std::list::front`](http://www.cplusplus.com/reference/list/list/front/)访问第一个元素：

```
std::string firstStr = myList.front()->str; 
```

请注意，在这种情况下，`myList.front()`返回对列表中第一个元素的引用，在这种情况下是对指针的引用。因此，您可以将其视为指向第一个元素的指针。

关于你的问题`NULL`：当你使用指针容器时，一旦对象被破坏，指针应该从容器中删除。`std::list<T>`一旦开始使用指针，通常意味着您将负责与这些指针指向的对象相关的内存管理（这是您应该尽可能优先选择的主要原因`std::list<T*>`）。

比`NULL`指针更糟糕的是***悬空指针***：当你创建一个对象时，将它的地址存储在你的容器中，但是一旦对象被破坏，你就不会从容器中删除这个地址，那么这个指针将变得无效并试图访问内存这个指针指向会产生**未定义的行为**。因此，您不仅应该确保您的`std::list`不包含`NULL`指针，还应该确保它只包含指向仍然存在的有效对象的指针。

因此，当您清理这些元素时，您会发现自己从列表中删除指针并立即删除它们指向的对象：

```
std::list<T*> myList;

myList.push_back(new T("one"));
myList.push_back(new T("two"));
myList.push_back(new T("three"));
myList.push_back(new T("four"));

while (!myList.empty())
{
    T* pT = myList.front();                     // retrieve the first element
    myList.erase(myList.begin());               // remove it from my list
    std::cout << pT->str.c_str() << std::endl;  // print its member
    delete pT;                                  // delete the object it points to
} 
```

这些问题也值得阅读：
[您可以在迭代时从 std::list 中删除元素吗？](https://stackoverflow.com/q/596162/1168156)
[擦除 std::list::iterator 不会使迭代器无效并破坏对象吗？](https://stackoverflow.com/q/5274025/1168156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:23:08.030

是否需要对列表元素进行空检查完全取决于首先可以放入列表中的内容。

如果列表可能包含空指针，那么您绝对应该在访问元素之前检查 NULL。
如果不可能，那么也没有理由去检查。

# ssl - SSL - 服务器证书是否绑定到特定机器？

> ID：15155300
> 
> 赞同：9
> 
> 时间：2013-03-01T10:20:06.473
> 
> 标签：ssl, ssl-certificate

最近我们用 tomcat 创建了一个服务器，我们还为这个小服务器添加了 SSL 支持。对于 SSL 支持，我们需要由 Entrust、Thawte 等第三方颁发的证书。

一位同事对我说，证书绑定到特定的机器。那就是一旦我们获得了颁发的证书，那么这个证书就不能在另一台机器上使用。

我完全怀疑这一点，因为 CSR 不包含机器的任何信息。真的吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T10:28:55.520

证书不一定绑定到特定机器。为了能够在机器上“使用证书”，您需要两件事：证书本身和它的私钥。您应该已经生成了私钥以及 CSR（取决于您使用的工具）。

某些系统不允许您重新提取私钥（例如，Windows 可以选择以您无法再导出的方式导入私钥，但据我了解，如果您有足够的该机器上的访问权限）。在您使用智能卡或硬件令牌的情况下，可能会以无法提取的方式生成私钥（在这种情况下，如有必要，将令牌移至新机器是有意义的） .

另一部分是证书及其名称。证书中的主机名（通常也可以在 CSR 中找到，尽管这最终不是必需的）应该是这台机器的主机名，正如尝试连接到它的客户端所看到的那样（参见RFC 2818 第 3.1 节，详细了解 HTTPS 的主机名验证）。因此，虽然证书本身在硬件方面并未绑定到特定机器，但它将绑定到此主机名（例如，这允许您更改此机器的硬件或其 IP 地址）。

# c# - Protobuf-net 序列化枚举值超出范围

> ID：15155311
> 
> 赞同：3
> 
> 时间：2013-03-01T10:20:38.083
> 
> 标签：c#, protobuf-net

C# 允许将任何整数值分配给枚举。

当我尝试使用值超出范围的枚举字段序列化（通过protobuf-net）对象时，它会引发异常：没有线值映射到枚举PersonLevel。

我的枚举 PersonLevel 没有 Flags 属性。

```
[ProtoContract(ImplicitFields = ImplicitFields.AllFields)]
public enum PersonLevel
{
  Unknown = 1
}

[ProtoContract(ImplicitFields = ImplicitFields.AllFields)]
public class Person
{
  ...

  public PersonLevel PersonLevel { get; set; }

  ...
} 
```

```
var ms = new MemoryStream();

var person = new Person
{
  ...
  PersonLevel = (PersonLevel) 500
  ...
};

Serializer.Serialize(ms, person); //No wire-value is mapped to the enum PersonLevel 
```

是否有任何设施可以在不更改业务对象（可能是任何 protobuf 属性）的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T12:00:15.680

有几种方法可以告诉它简化规则；正如 Ravadre 所说，`[Flags]`自动禁用验证 - 它会导致`EnumPassthru`切换。您也可以手动执行此操作 - 只要**在**您开始序列化/反序列化之前：

```
RuntimeTypeModel.Default[typeof(PersonLevel)].EnumPassthru = true; 
```

其中有描述：

```
/// <summary>
/// Gets or sets a value indicating that an enum should be treated directly as an int/short/etc, rather
/// than enforcing .proto enum rules. This is useful *in particular* for [Flags] enums.
/// </summary> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:33:18.857

您可以做的是创建一个`int`字段，将其打包到 protobuf 消息中并公开一个属性，这会将您的`int`字段公开`enum`为您的类型（作为包装器）。

如果您使用隐式字段，这可能会更难，因为 protobuf 可能会尝试序列化您的整数和`enum`属性。您可以尝试明确`[ProtoIgnore]`您的`enum`财产。

但是，如果您的枚举标有`[Flags]`属性，protobuf 会自动为您执行此操作，因此将您的枚举更改为：

```
[ProtoContract(ImplicitFields = ImplicitFields.AllFields)]
[Flags]
public enum PersonLevel
{
    Unknown = 1
} 
```

应该让它工作。至少在第 2 版中。

# c# - System.TypeLoadException

> ID：15155312
> 
> 赞同：4
> 
> 时间：2013-03-01T10:20:39.403
> 
> 标签：c#, wpf, csla

我在 WPF 应用程序中收到以下错误：

```
Declaration referenced in a method implementation cannot be a final method. 
```

我发现的唯一一件事是问题是一个非虚拟方法被覆盖，但我检查并在我的对象中找不到任何方法。

编译时不会抛出错误，但只有在我调试时才会抛出错误。

有没有人建议我可以试试？

- 更新

调用时，我的 App.Xaml.cs`OnStartup`覆盖出现错误：

```
var catalog = new AggregateCatalog();
catalog.Catalogs.Add(new DirectoryCatalog(localDir));
_container = new CompositionContainer(catalog); 
```

在 _container 升级到 CSLA 4.5.10 后，我收到 15 LoaderException。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T07:30:21.340

好的，我找到了我的问题。我希望在这里发布它可以帮助其他人找到我一直在寻找的问题。

在我在上面发布的代码中，localDir 指向我本地机器上的一个目录，项目构建到该目录，然后使用 MEF 获取。对我来说，这里的问题是另一个项目的 .dll 仍在引用旧版本的 CSLA 并且`Save()`仍然被覆盖，尽管它不再被允许。

所以简而言之，这是我的 MEF 目录中的 .dll 不匹配，所以一定要检查类似的东西。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T08:39:53.987

这也发生在我身上，我正在运行我的测试并收到相同的错误消息。

问题是我在其中一个项目中更新了 nuget 包，并且在测试项目中 nuget 包已过时，因此产生了这个问题。

更新所有项目中的包解决了这个问题。

# c# - 使用 mouseDown 从画布中删除 2 种不同的对象类型

> ID：15155313
> 
> 赞同：0
> 
> 时间：2013-03-01T10:20:42.953
> 
> 标签：c#, wpf

所以我在画布上放置了两种类型的对象：矩形和文本框。**我的问题如下**：我需要像橡皮擦一样用 Mousedown 删除矩形和文本框。如果我只在我的屏幕上放置一个矩形，我只能删除一个矩形，如果我只在我的屏幕上放置一个文本框，我只能删除一个文本框。`Mousedown`但是我需要用（鼠标）在我的屏幕上删除它们，**例如**：在我的屏幕上它们是 2 个矩形和 1 个`textbox`，我单击它们并得到以下**错误**：无法转换 System.Windows.Controls 类型的对象。 TextBox 变成 System.Windows.Shapes.Rectangle 类型

我知道这是一个选角问题，但我尝试了很多东西。

这是我目前的代码：

```
class Eraser
{
    private Label status;
    private List<Rectangle> kaders;
    private List<TextBox> textboxen;
    private Canvas window;

    public Eraser(Canvas win, Label status)
    {
        this.status = status;
        this.window = win;
        //Application.Current.MainWindow.Cursor  = new Cursor(AppDomain.CurrentDomain.BaseDirectory + @"../../Icons/eraser.cur");
        //Mouse.OverrideCursor = newCursor;
        //Mouse.OverrideCursor = Application.Current.MainWindow.Cursor;
        textboxen = new List<TextBox>();
        kaders = new List<Rectangle>();
        foreach (Object element in win.Children)
        {
            if (element is Rectangle)
            {
                Mouse.RemoveMouseDownHandler(window, item_Mousedown);
                verzamelKaders();
            }
            else if (element is TextBox)
            {
                Mouse.RemoveMouseDownHandler(window, Element_Mousedown);
                verzamelTextboxen();
            }
        }

    }
    private void verzamelKaders()
    {
        Mouse.RemoveMouseDownHandler(window, item_Mousedown);

        foreach (Rectangle element in window.Children)
        {
            if (element.GetType() == typeof(Rectangle))
            {
                Mouse.RemoveMouseDownHandler(window, item_Mousedown);
                kaders.Add(element);
                element.MouseDown += new MouseButtonEventHandler(Element_Mousedown);
            }
            else
            {
                element.MouseDown += new MouseButtonEventHandler(item_Mousedown);
            }
        }

    }
    private void verzamelTextboxen()
    {

        Mouse.RemoveMouseDownHandler(window, Element_Mousedown);

        foreach (TextBox item in window.Children)
        {
            if (item.GetType() == typeof(TextBox))
            {
                Mouse.RemoveMouseDownHandler(window, Element_Mousedown);
                textboxen.Add(item);
                item.PreviewMouseDown += new MouseButtonEventHandler(item_Mousedown);
            }
            else
            {
                item.MouseDown += new MouseButtonEventHandler(Element_Mousedown);
            }

        }

    }
    private void Element_Mousedown(object sender, MouseButtonEventArgs e)
    {
        Mouse.RemoveMouseDownHandler(window, item_Mousedown);
        Rectangle removekader = new Rectangle();
        removekader = (Rectangle)sender;
        window.Children.Remove(removekader);

    }
    private void item_Mousedown(object sender, MouseButtonEventArgs e)
    {

        Mouse.RemoveMouseDownHandler(window, Element_Mousedown);
        TextBox removeTextbox = new TextBox();
        removeTextbox = (TextBox)sender;
        window.Children.Remove(removeTextbox);

    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:00:42.260

为什么会如此复杂？下面的简单方法从指定位置的 Canvas 中删除任何子元素。

```
public static void RemoveChild(Canvas canvas, Point position)
{
    var element = canvas.InputHitTest(position) as UIElement;
    UIElement parent;

    while (element != null &&
        (parent = VisualTreeHelper.GetParent(element) as UIElement) != canvas)
    {
        element = parent;
    }

    if (element != null)
    {
        canvas.Children.Remove(element);
    }
} 
```

`PreviewMouseDown`您可以在Canvas的处理程序中调用它：

```
private void Canvas_PreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    if (eraseChildren)
    {
        var canvas = sender as Canvas;
        RemoveChild(canvas, e.GetPosition(canvas));
    }
} 
```

# c - 将stdout和stderr重定向到同一个文件并恢复

> ID：15155314
> 
> 赞同：17
> 
> 时间：2013-03-01T10:20:47.850
> 
> 标签：c, redirect, stdout, output, stderr

我将我的 c 程序的 stderr 和 stdout 的输出重定向到两个文件，然后恢复原始的 stdout 和 stderr：

```
int sout = dup(fileno(stdout));
freopen("test.txt","w",stdout);

int serr = dup(fileno(stderr));
freopen("test.txt","a",stderr);

//some output....

dup2(sout,fileno(stdout));
close(sout);

dup2(serr,fileno(stderr));
close(serr); 
```

这就是代码示例。这行得通。

但是我想将 stdout 和 stderr 重定向到同一个文件（然后再次恢复它），以便在不重定向 stderr 和 stdout 时，输出的排序顺序与控制台输出上的排序顺序相同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T11:43:38.450

而不是再次打开文件`stderr`，如：

```
freopen("test.txt","a",stderr); 
```

通过执行以下操作将其重定向到`stdout`文件描述符级别：

```
dup2(fileno(stdout), fileno(stderr)); 
```

请注意，`stdout`并且`stderr`仍将使用独立的用户级缓冲区，并且当不针对交互式终端时，刷新规则是不同的。这很可能是重定向时输出排序不同的主要原因。请参阅有关[刷新模式](https://stackoverflow.com/questions/13932932/why-does-stdout-need-explicit-flushing-when-redirected-to-file)的说明和`setvbuf()`.

# c# - C# 类颜色到窗体？

> ID：15155320
> 
> 赞同：0
> 
> 时间：2013-03-01T10:21:10.450
> 
> 标签：c#, icsharpcode

相关话题：

[https://stackoverflow.com/questions/15150797/how-to-separate-condition-codes-from-mainform-to-class-c-sharp](https://stackoverflow.com/questions/15150797/how-to-separate-condition-codes-from-mainform-to-class-c-sharp) [https://stackoverflow.com/questions/15132363/color-code-from -class-to-form-condition](https://stackoverflow.com/questions/15132363/color-code-from-class-to-form-condition)

如何调用这种颜色语法的类：

```
namespace TE
{
    class High
    {
            rtb.SelectionColor = Color.Black;
            rtb.SelectionFont = new Font("Courier New", 10, FontStyle.Regular);
    }
} 
```

进入形式中的空白条件：

```
 private void TextChangedEvent(object sender, EventArgs e)
    {
} 
```

真的非常需要帮助。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:28:49.763

你不想“调用一个类”，你想“调用某个类中的方法”。

该方法显然应该更改表单中富文本框中选择的颜色。这样做的方法是将该编辑器控件作为参数提供给您的方法。

就像是：

```
namespace TE
{
    public class High
    {
        public static void ChangeSelection(RichTextBox rtb)
        {
            rtb.SelectionColor = Color.Black;
            rtb.SelectionFont = new Font("Courier New", 10, FontStyle.Regular);
        }
    }
} 
```

并以如下形式使用它：

```
private void TextChangedEvent(object sender, EventArgs e)
{
    TE.High.ChangeSelection(rtb); // assuming 'rtb' is your control
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:32:18.120

您应该在这样的方法中使用变色代码：

```
 namespace TE
{
    public class High
    {
        public static void ChangeMyColor(RichTextBox rtb)
        {

            rtb.SelectionColor = Color.Black;
            rtb.SelectionFont = new Font("Courier New", 10, FontStyle.Regular);
        }
    }
} 
```

像这样称呼它：

```
private void TextChangedEvent(object sender, EventArgs e)
{
    TE.High.ChangeMyColor(rtb);
} 
```

# amazon-s3 - 亚马逊 S3 存储桶级别统计信息

> ID：15155327
> 
> 赞同：1
> 
> 时间：2013-03-01T10:21:30.507
> 
> 标签：amazon-s3, statistics, amazon, bucket

我想知道是否有办法让我在 amazon s3 中获得存储桶级别的统计信息。基本上我想在我的系统（托管在 s3 上）上向客户收取存储和 GET 请求的费用。

所以我为每个客户创建了一个特定的存储桶，但我似乎无法仅获取特定存储桶的统计信息。

我看到 API 让我

```
GET Bucket 
```

或者

```
GET Bucket requestPayment 
```

但我只是找不到如何获取向所述存储桶发出的请求数和存储桶的总大小。

感谢帮助 ！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:46:47.997

我认为您尝试使用 Amazon API 实现的目标是不可能的。[GET Bucket 请求](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html)除了最新修改的时间戳 ( ) 之外不包含使用统计信息（请求等`LastModified`）。

我的建议是您在存储桶中启用日志记录并从那里执行您想要的分析。

[S3 起始页](http://aws.amazon.com/s3/)为您提供了一个概述：

> Amazon S3 还支持记录针对您的 Amazon S3 资源发出的请求。您可以配置您的 Amazon S3 存储桶，为针对它发出的请求创建访问日志记录。这些服务器访问日志捕获对存储桶或其中的对象发出的所有请求，并可用于审计目的。

我相信有很多关于这个问题的文档。
HTH。

# android - 测试台移动设备

> ID：15155329
> 
> 赞同：2
> 
> 时间：2013-03-01T10:21:31.000
> 
> 标签：android, ios, testing

我已经在互联网上搜索了一段时间。最糟糕的是我以前见过一个测试台，但现在找不到了。

有人知道移动设备的测试台吗？或者我应该自己建造一些东西。它旨在测试不同设备（例如 iPad、Galaxy tab 10、iPhone 等）上的应用程序。

或者当我闭上眼睛时，请给我一个答案链接。

提前致谢。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:58:53.813

您可能在询问[三星的开发者测试实验室](http://developer.samsung.com/remotetestlab/)。它允许您启动一堆虚拟三星 Android 设备并在其上进行测试。

我没有亲自使用过，所以 YMMV，而且它也仅限于三星/Android——没有 iOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:16:41.793

对于那些想知道的人。我前段时间找到的文章，找不到了，但昨天找到了，这是[http://mobile.smashingmagazine.com/2012/10/22/a-guide-to-mobile-app-testing/](http://mobile.smashingmagazine.com/2012/10/22/a-guide-to-mobile-app-testing/)。

在这里您可以设置不同的移动设备并建立一个测试实验室。感谢您的回复！

# webkit - 在我的应用程序中嵌入基本的 WebKit + V8

> ID：15155331
> 
> 赞同：2
> 
> 时间：2013-03-01T10:21:35.677
> 
> 标签：webkit, embed, v8, chromium, embedded-browser

我想要一个非常基本的 HTML/CSS/JS 渲染器嵌入到我的应用程序中，使用 WebKit，最好是 V8。我只需要始终呈现一个页面并可能发出网络和本地请求（加载 JSON/msgpack）。我不需要预取、选项卡、多功能框、配置文件和其他铬功能，但从我看到的 CEF 来看，它嵌入了功能齐全的铬。还有其他解决方案吗？

# c++ - 这个表达是什么意思？SP_DEVINFO_DATA devdata = {sizeof(SP_DEVINFO_DATA)};

> ID：15155332
> 
> 赞同：2
> 
> 时间：2013-03-01T10:21:40.427
> 
> 标签：c++

我看到c++代码是这样写的，可以通过MSVC编译。

```
SP_DEVINFO_DATA devdata = {sizeof(SP_DEVINFO_DATA)}; 
```

这个表达是什么意思？我以前从未见过这样的代码。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:24:12.763

这称为[聚合初始化](http://en.cppreference.com/w/cpp/language/aggregate_initialization)。在这种情况下，它显式初始化了`devdata`only 的第一个成员（其余的都是值初始化，感谢[WhozCraig](https://stackoverflow.com/users/1322972/whozcraig)的评论并让我添加这个），大概是一个保存字节数大小的字段，到结构的大小.

* * *

在[`SP_DEVINFO_DATA`](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff552344(v=vs.85).aspx)参考页面中，第一个成员是一个`DWORD`名为`cbSize`：

> SP_DEVINFO_DATA 结构的大小（以字节为单位）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:25:32.393

这表示：

> 初始化一个名为`devdata`, 类型 的自动变量`SP_DEVINFO_DATA`，并将其第一个成员设置为`sizeof(SP_DEVINFO_DATA)`。

WINAPI 结构的常见做法是在其第一个成员中公开结构的大小。这样，在这种结构上运行的代码可以检查该成员以确定它正在使用的结构的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:25:25.100

这就是初始化结构的方式。您初始化 - 结构的第一个成员`SP_DEVINFO_DATA`，它应该`cbSize`与结构的大小。对于这种特殊情况，这是必要的。

# database - 从 oracle 数据库中插入和选择中文单词

> ID：15155337
> 
> 赞同：0
> 
> 时间：2013-03-01T10:21:55.447
> 
> 标签：database, oracle

我正在尝试将中文单词插入oracle数据库，但无论如何它无法正确显示，这是我的数据库设置

```
SQL> select * FROM nls_database_parameters where parameter='NLS_NCHAR_CHARACTERSET';

PARAMETER
------------------------------
VALUE
--------------------------------------------------------------------------------
NLS_NCHAR_CHARACTERSET
AL16UTF16

SQL> select * FROM nls_database_parameters where parameter='NLS_CHARACTERSET';

PARAMETER
------------------------------
VALUE
--------------------------------------------------------------------------------
NLS_CHARACTERSET
AL32UTF8 
```

当我复制/粘贴到我的 SQLPLUS 运行查询时，汉字将是“..”。我使用的版本是 Oracle Database 11g Release 11.2.0.3.0 - 64bit。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:36:54.047

可能有几个问题：

1) 字符不能存入数据库。

2) 根据客户端语言设置，字符可能会转换为其他字符。

3) 您正在使用的工具无法显示字符。

--

1）检查字符的字节值，因为它存储在表中。

```
select dump(column) from table where ... 
```

转储函数将显示字节值，您可以检查列中是否存储了正确的字节。

2) 检查客户端上的 NLS_LANG 设置。

3) 如果正确的字节存储在表中，并且由于服务器和客户端之间的 NLS_LANG 不匹配，它们没有被转换为其他内容，那么您的工具可能无法正确显示字符。我很确定 SQLPlus 的界面非常有限。也许 SQL Developer 可以显示更广泛的字符。

# php - Woocommerce 使用产品图片展示产品

> ID：15155338
> 
> 赞同：5
> 
> 时间：2013-03-01T10:22:02.203
> 
> 标签：php, wordpress, woocommerce

我有一个运行 wordpress 插件 WooCommerce 的 wordpress 网站。由于本网站处理的产品数量庞大，我们一直在管理网站外的产品列表并上传。很多产品还没有图像，但它们有一个硬编码的图像 url，所以我们可以在获得它们时添加它们。为了解决损坏的图像，我只需搜索一下图像大小，如果找不到它并用占位符替换它。

```
$src = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), $size);
if (@getimagesize($src[0])) {
    //display product image
} else {
    //display placeholder image
} 
```

这在大多数情况下都可以正常工作，但现在我正在努力在一个类别中显示产品。我想先显示所有有图像的产品，然后显示没有图像的产品。问题是一旦循环开始，如果我排除没有图像的产品，它将循环遍历前 12 个产品，并且只显示有图像的 12 个产品的子集。我想要它做的是继续循环，直到我有 12 个带有图像的产品（如果有 12 个带有图像的产品）。

这就是我现在所拥有的不起作用。

```
<?php if ( have_posts() ) : ?>
    <ul class="products">
        <?php while ( have_posts() ) : the_post(); ?>
            <?php 
                $src = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), $size);
                if (@getimagesize($src[0])) {
                    woocommerce_get_template_part( 'content', 'product' );
                }
            ?>
        <?php endwhile; // end of the loop. ?>
    </ul>
<?php endif; ?> 
```

我无法编码的可能的逻辑解决方案是在循环中忽略某些产品（因此如果没有图像，它将再次运行）或以某种方式将我的查询编码为循环要求的一部分，即将其放入$args？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:05:00.187

我设法找到了一个可行的解决方案来解决我的问题。不可能通过单独的循环列出产品而不造成混乱的分页。因此，合乎逻辑的步骤是使用循环并基本上根据图像是否存在对产品进行排序。这会产生一个新问题，因为 Wordpress 排序无法确定图像链接是否指向文件。

但是，您可以在 woocommerce 中为产品设置“菜单顺序”。然后，如果您在“Woocommerce -> 设置 -> 目录”下将“默认产品排序”设置为“默认排序”，它将使用此菜单顺序在目录视图中订购产品。

伟大的！但是我仍然有 17000 个产品，我需要为每个产品指定一个菜单顺序。我无法使用本机 woocommerce 工具来做到这一点，这需要数周时间。所以我决定写一个小插件来根据图像是否存在来改变每个产品的“菜单顺序”。

这是用于写入 post 数据库的函数：

```
/**
 * This function sets the value of the menu_order of a product to 0 if the product contains an image and 1 if it does not
 * @param {int} $offset this is the start number for the batch
 * @param {int} $batch The number of products to process in the batch
 */
function setProductMenuOrder($offset, $batch) {
    global $post;
    $number_completed = 0;

    //define the arguments to be used in the loop
    $args = array( 'post_type' => 'product','offset' => $offset, 'numberposts' => $batch );
    $myposts = get_posts( $args );

    foreach( $myposts as $post ) : setup_postdata($post);
        $src = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID)); //getting image source

        //define post to be updated
        $my_post = array();
        $my_post['ID'] = $post->ID;

        if (@getimagesize($src[0])) { //if image source points to actual image menu order is set to 0
            $my_post['menu_order'] = '0';
            wp_update_post( $my_post ); //Update the post into the database
            $number_completed+=1;
        } else { //if it doesn't menu order is set to 1
            $my_post['menu_order'] = '1';
            wp_update_post( $my_post ); //Update the post into the database
            $number_completed+=1;
        }
    endforeach;
    echo '<p>Number of products edited: <strong>'.$number_completed.'</strong>.</p>';
} 
```

因为我有这么多产品，所以我的插件会以较小的批次处理它们。我一次管理一批大约 2000 种产品而没有失败。我确实必须在 config.php 中调整我的 php 内存限制

```
define('WP_MAX_MEMORY_LIMIT', '256M'); 
```

我仍然想知道是否有更简单的方法可以实现这一点，但目前这个解决方案就足够了。

# javascript - 在发布模式下运行 ASP.NET MVC 4 应用程序不会捆绑和缩小 js 文件

> ID：15155344
> 
> 赞同：15
> 
> 时间：2013-03-01T10:22:21.133
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, bundling-and-minification

*当我在发布*模式下运行我的 ASP.NET MVC 4 应用程序时，捆绑包仍在输出未缩小和单独的 js 文件，而不是将其捆绑并缩小为更少的捆绑 JavaScript 文件。

有任何想法吗？

仅供参考，发布配置：

```
<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
  </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-30T10:16:19.690

感谢 aleyush 的评论，该评论`Web.release.config`仅在发布应用程序时使用，而不是在本地运行时使用，我能够通过在`BundleConfig.cs`文件中添加以下行来修复它：

```
#if !DEBUG
BundleTable.EnableOptimizations = true;
#endif 
```

由于 Debug 模式将定义`DEBUG`常量，而在 Release 模式期间未定义，因此该行将仅在 Release 模式期间执行。（你可以通过设置断点来测试它）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:08:18.287

1.  如果在 Web.config 文件中将 debug 设置为 true，则不会捆绑或缩小任何内容，以便您可以轻松调试输出。

2.  如果您想覆盖它，只需将以下代码行添加到您的 BundleConfig 文件中：

    BundleTable.EnableOptimizations = true;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T15:33:22.443

这对我有用

```
<system.web>
    <compilation debug="false" />
</system.web> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T11:21:30.790

我的包裹太大了。我不得不把它分解成更小的部分，它工作得很好。缩小后可能有一些变量发生冲突。

将此行放在 bundleconfig 的末尾仅用于测试...

```
BundleTable.EnableOptimizations = true; 
```

如果您打开缩小的文件，您将看到类似这样的内容。

```
 /* Minification failed. Returning unminified contents.
    (5079,1-2): run-time warning JS1195: Expected expression: .
    (5080,18-19): run-time warning JS1004: Expected ';': :
    (5084,18-19): run-time warning JS1004: Expected ';': :
    (5091,18-19): run-time warning JS1004: Expected ';': :
    (5095,20-21): run-time warning JS1197: Too many errors. The file might not be a JavaScript file: ;
..... 
```

分解你的捆绑包，你可以隔离问题。

希望这可以帮助某人。

# c# - 自托管服务器中两个 WCF 服务之间的通信

> ID：15155346
> 
> 赞同：0
> 
> 时间：2013-03-01T10:22:22.233
> 
> 标签：c#, wcf, service, self-hosting

在这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ee939340.aspx)中描述的自托管服务中， 有两个服务。

现在我想打电话给对方。一个做一些与数据库相关的工作，另一个提供一些工作。我想在其他服务中使用数据库功能。

我尝试添加此处提到的服务引用：[Stackoverflow 有类似问题](https://stackoverflow.com/questions/409373/communicate-between-2-wcf-services) ，但我收到消息：“从地址下载元数据时出错”，因此无法添加服务引用。

因为我已经在客户端应用程序中使用了它们，所以它们自己的服务都在运行和工作。

这是我要使用的服务中的 web.config。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

以下是我的自托管服务中 App.config 的部分内容

```
<?xml version="1.0"?>
<configuration>

  <system.serviceModel>

   <!-- omitted lots of blocks -->

    <services>

      <service name="MyProject.WorkService.GeneralWorkService" behaviorConfiguration="SimpleServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/"/>
          </baseAddresses>
        </host>
        <endpoint address="traceability" binding="basicHttpBinding" name="WorkService" contract="MyProject.Service2.Contracts.IService2"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

      </service>
      <service name="MyProject.DatabaseService.GeneralDatabaseService" behaviorConfiguration="SimpleServiceBehavior">
          <host>
            <baseAddresses>
              <add baseAddress="http://localhost:8000/"/>
            </baseAddresses>
          </host>
          <endpoint address="gateway" binding="basicHttpBinding" name="DatabaseService" contract="MyProject.DatabaseService.Contracts.IDatabaseService"/>
          <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>

    </services>
    <client>
      <endpoint name="Service2EP" address="http://localhost/someWork" binding="basicHttpBinding" contract="MyProject.Service2.IService2">        
      </endpoint>

      <endpoint name="DatabaseServiceEP" address="http://localhost/gateway" binding="basicHttpBinding" contract="MyProject.DatabaseService.IDatabaseService">
      </endpoint>

    </client>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

-更新-

我可以使用浏览器窗口查看我的服务

`http://localhost:8000`

也许还有其他方式可以使用我的服务。我应该使用一些可以生成的代理`svcutil`吗？

也许有更好的方法。添加服务参考似乎不起作用，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:26:15.070

您确定在您尝试引用的服务的配置中配置了 mex-endpoint 吗？如果您没有，该服务将不会公开所需的信息 (WSDL) 以进行服务引用...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:30:26.347

至少有4种可能：

*   元数据交换 mex 端点未定义
*   未启用元数据交换
*   您使用了错误的地址
*   您被某些安全设置阻止

从[地址下载元数据时出错](https://stackoverflow.com/questions/10618181/there-was-an-error-downloading-metadata-from-the-address)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:26:01.330

终于找到了答案。

必须将端点从自托管 app.config 复制到服务 web.config。

从那时起，对话框中的错误消息（底部的“详细信息”链接）很有帮助。

只需将服务行为添加到我已经在 selfhosting app.config 中定义的 DatabaseService 中。

谢谢大家的帮助。将接受 W1ck3dHcH 的回答，因为它是正确的，但我只是没有看到它。

# java - Neo4J 意外关闭或配置错误？

> ID：15155347
> 
> 赞同：1
> 
> 时间：2013-03-01T10:22:27.030
> 
> 标签：java, nullpointerexception, neo4j

**原帖**

让我从我的代码开始。这是出现错误的代码片段。

```
DatabaseModuleInterface dbModule = new DatabaseModuleImpl();
System.out.println(dbModule.getDb());
Traverser t = dbModule.getGraphTree(usernode);

System.out.println("DBMODULE = " + dbModule.toString());
System.out.println("USERNODE = " + usernode);
System.out.println("TRAVERSER1 = " + dbModule.getGraphTree(usernode));

    System.out.println("T IS NOT NULL");
    if (t.nodes() != null) {
        System.out.println("T NODES IS NOT NULL");
        for (Node node : t.nodes()) {
            if (node != null) {
                System.out.println("NODE IS NOT NULL");
            } else {
                System.out.println("NODE IS NULL");
            }
        }
    } 
```

哪个返回

```
INFO: EmbeddedGraphDatabase [C:\impactordb]
INFO: DBMODULE = be.archimiddle.impactor.modules.database.interfaces.DatabaseModuleImpl@bed5ea
INFO: USERNODE = Node[241]
INFO: TRAVERSER1 = org.neo4j.kernel.impl.traversal.TraverserImpl@ce2016
INFO: T IS NOT NULL
INFO: T NODES IS NOT NULL 
```

然后出现以下堆栈跟踪的错误

```
java.lang.NullPointerException
at org.neo4j.kernel.impl.nioneo.xa.ReadTransaction.nodeLoadLight(ReadTransaction.java:86)
at org.neo4j.kernel.impl.persistence.PersistenceManager.loadLightNode(PersistenceManager.java:82)
at org.neo4j.kernel.impl.core.NodeManager.getLightNode(NodeManager.java:423)
at org.neo4j.kernel.impl.core.NodeManager.getNodeForProxy(NodeManager.java:440)
at org.neo4j.kernel.InternalAbstractGraphDatabase$4.lookup(InternalAbstractGraphDatabase.java:660)
at org.neo4j.kernel.impl.core.NodeProxy.getRelationships(NodeProxy.java:98)
at org.neo4j.kernel.StandardExpander$RegularExpander.doExpand(StandardExpander.java:579)
at org.neo4j.kernel.StandardExpander$RelationshipExpansion.iterator(StandardExpander.java:194)
at org.neo4j.kernel.impl.traversal.TraversalBranchWithState.expandRelationshipsWithoutChecks(TraversalBranchWithState.java:78)
at org.neo4j.kernel.impl.traversal.TraversalBranchImpl.expandRelationships(TraversalBranchImpl.java:104)
at org.neo4j.kernel.impl.traversal.StartNodeTraversalBranch.next(StartNodeTraversalBranch.java:46)
at org.neo4j.kernel.impl.traversal.AsOneStartBranch.next(AsOneStartBranch.java:100)
at org.neo4j.kernel.PreorderDepthFirstSelector.next(PreorderDepthFirstSelector.java:52)
at org.neo4j.kernel.impl.traversal.TraverserIterator.fetchNextOrNull(TraverserIterator.java:64)
at org.neo4j.kernel.impl.traversal.TraverserIterator.fetchNextOrNull(TraverserIterator.java:33)
at org.neo4j.helpers.collection.PrefetchingIterator.hasNext(PrefetchingIterator.java:55)
at org.neo4j.helpers.collection.IteratorWrapper.hasNext(IteratorWrapper.java:42)
at com.archimiddle.impactor.action.navigation.ViewGraphAction.getGraphTree(ViewGraphAction.java:107) 
```

此行 #107 是代码段中的以下行：

```
for(Node node : t.nodes()){ 
```

我检查了所有内容的空值，但找不到任何东西。如果有人可以帮助我，将不胜感激。

**编辑**

我使用这种方法来显示隐藏在我的图表中的树。我知道该方法有效，因为我可以看到我的图表。

只是在我使用 tinkerpop 蓝图中的 Neo4jgraph 添加节点后，我不再可以使用该方法查看我的图。为了让 Gremlin 将节点实际添加到我的 Neo4J 图中，我必须在提交节点之前调用关闭或 stopTransaction。

```
Neo4jgraph graph = new Neo4jGraph(my_graphdatabaseservice);
//ADD NODES HERE
//I USED TO DO THIS
neo4jgraph.shutdown();
//NOW I DO THIS
neo4jgraph.stopTransaction(Conclusion.SUCCESS); 
```

我必须做这两个中的一个，否则我的节点将不会被提交。出于一个非常具体的原因，我必须使用蓝图添加它们。

我怀疑它与此有关，因为它只发生在我这样做之后......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:34:12.580

该问题与您发布的代码片段无关。那里的一切工作正常。

问题在于您的 neo4j 实现。

尝试将以下参数添加到您的 neo4j 配置中

*   config.cache_classes = true
*   config.threadsafe！

# asp.net-mvc - ASP.NET MVC 3 EF 代码优先 - 掌握详细信息 CRUD

> ID：15155351
> 
> 赞同：2
> 
> 时间：2013-03-01T10:22:40.510
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ef-code-first

我将 ASP.NET MVC 3 EF Code First 与 Razor + SQLserver 一起使用，并希望通过 CRUD 操作实现 Master Details 场景（如 Order、Orderlines）。我遇到了一些在线示例，例如[http://hasibulhaque.com/index.php/2011/master-detail-crud-operations-ef-asp-net-mvc-3/](http://hasibulhaque.com/index.php/2011/master-detail-crud-operations-ef-asp-net-mvc-3/)但它们在很大程度上依赖于 JQuery 或其他复杂的实现. 有人可以用干净的代码建议我一步一步的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T13:32:00.427

如果你想为你做脚手架，不幸的是这是不可能的，你**不能****简单地**做到这一点。此外，您**必须**使用 jquery 和 ajax 来实现您想要的。

我认为对你来说最好和最简单的方法是你有一个创建表单的视图，并在它的底部放置一个字段集来为它分配 FormFields。

对于字段集，您应该有两个局部视图：一个用于创建，另一个用于编辑。创建的局部视图应该是这样的：

```
@model myPrj.Models.Form_FormFieldInfo

@{ 
    var index = Guid.NewGuid().ToString(); 
    string ln = (string)ViewBag.ListName;
    string hn = ln + ".Index";
}

<tr>
    <td>        
        <input type="hidden" name="@hn" value="@index" />
        @Html.LabelFor(model => model.FormFieldID)
    </td>
    <td>
        @Html.DropDownList(ln + "[" + index + "].FormFieldID", 
            new SelectList(new myPrj.Models.DbContext().FormFields, "ID", "FieldName"))
    </td>        
    <td>
        <input type="button" onclick="$(this).parent().parent().remove();" 
            value="Remove" />
    </td>
</tr> 
```

通过 ajaxly 在 create place view 中调用这个局部视图，您可以为每个标签呈现一些元素。每行元素都包含一个标签、一个包含标签的 DropDownList 和一个删除按钮，用于简单地删除创建的元素。

在创建地点视图中，您有一个裸表，其中包含您通过部分视图创建的那些元素：

```
<fieldset>
    <legend>Form and FormFields</legend>
    @Html.ValidationMessageFor(model => model.FormFields)</label>
    <table id="tblFields"></table>                                        
    <input type="button" id="btnAddTag" value="Add new Field"/>
    <img id="imgSpinnerl" src="~/Images/indicator-blue.gif" style="display:none;" />
</fieldset> 
```

并且您有以下脚本来为每个标签创建一行元素：

```
$(document).ready(function () {
    $("#btnAddField").click(function () {
        $.ajax({
            url: "/Controller/GetFormFieldRow/FormFields",
            type: 'GET', dataType: 'json',
            success: function (data, textStatus, jqXHR) {
                $("#tblFields").append(jqXHR.responseText);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                $("#tblFields").append(jqXHR.responseText);
            },
            beforeSend: function () { $("#imgSpinnerl").show(); },
            complete: function () { $("#imgSpinnerl").hide(); }
        });
    });
}); 
```

动作方法 GetFormFieldRow 如下：

```
public PartialViewResult GetFormFieldRow(string id = "")
{            
    ViewBag.ListName = id;
    return PartialView("_FormFieldPartial");
} 
```

并且您已完成创建...您问题的整个解决方案有许多用于视图、部分视图、控制器、ajax 调用和模型绑定的代码。我试图向您展示方式，因为我真的无法在此答案中发布所有这些。

[这](http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/)是完整的信息和操作方法。

希望这个答案对您有用并为您指明方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:28:28.013

asp.net 网站上有很好的教程。我建议你切换到 mvc4 学习。这是一个链接： [http ://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

# vim - vim：如何在插件脚本中获取文件类型

> ID：15155352
> 
> 赞同：6
> 
> 时间：2013-03-01T10:22:44.490
> 
> 标签：vim, file-type

如何在 vimscript 中获取当前文件类型，例如 .vimrc 或常规插件脚本？线

```
echo &filetype 
```

返回一个空字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:41:57.480

在一个函数中：

```
let current_filetype = &filetype 
```

在命令行上：

```
:echo &filetype 
```

`&filetype`没有文件类型时为空（显然）。如果您在没有加载缓冲区时尝试使用它，您将一无所获。

***编辑***

`&filetype`仅当您在编辑缓冲区时需要知道在运行时执行的函数中的当前文件类型时才有用。

`&filetype`仅在确定缓冲区为某种文件类型时才设置。执行时，脚本（vimrc、ftplugin 等）不会经历编辑时会经历的事情：没有文件类型检查，没有`&filetype`.

一个示例是根据文件类型在不同的外部应用程序中显示当前文件的函数。在任何其他上下文中使用`&filetype`都没有意义，因为它将是空的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:23:30.457

您需要考虑插件的时间。当你的插件脚本在 Vim 启动期间被 source 时，还没有加载缓冲区，所以`&filetype`是空的。因此，像这样

```
let s:formatprgvarname = "g:formatprg_".&filetype 
```

不**工作**！（对于*文件类型插件*（in `~/.vim/ftplugin/`），这是不同的；只有在检测到文件类型时才提供这些插件。但据我所知，您需要一个考虑当前文件类型的通用插件。）

相反，取消脚本局部变量`s:formatprgvarname`并`&filetype` **在操作点**解决；即当您的自动格式化功能被触发时（通过映射或自定义命令）。如果您没有这样的触发器，您可以挂钩`FileType`事件并设置一个（最好是缓冲区本地）变量，然后：

```
autocmd FileType * let b:formatprgvarname = "g:formatprg_".&filetype 
```

# jqgrid - jqGrid - 来自 prmNames 属性的模糊 npage 参数

> ID：15155355
> 
> 赞同：0
> 
> 时间：2013-03-01T10:22:54.417
> 
> 标签：jqgrid

我正在使用 jqGrid 通过虚拟滚动加载数据。它工作正常，但我也试图让它提前加载一些数据，至少提前一页，以避免在用户滚动时出现加载。在文档中， npage 参数是指定用于处理此问题的参数。我为它分配了布尔值，从 1 到 100 的 int 值，但没有任何效果。我错过了什么？

> 如果您在 prmNames 中设置了 npage 选项，那么网格有时会一次请求多个页面；如果没有，它只会执行多个 GET 请求。

[jqGrid Docs](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions) [demo virtual scrolling-npage设置为null](http://www.trirand.com/blog/phpjqgrid/examples/paging/scrollbar/default.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:36:42.443

您对文档有一点误解。您需要将对象的`npage`属性设置`prmNames`为字符串，例如：

```
prmNames: {
    npage: 'npage'
} 
```

这将告诉 jqGrid，当启用动态滚动时（`scroll`选项的值与 不同`False`），它可以（在自己的情况下并不总是）通过按名称在键下的请求中添加它想要的页数来请求多个页面您在`npage`属性中指定的。

# android - 使用omniture应用程序测量跟踪错误对话框

> ID：15155357
> 
> 赞同：1
> 
> 时间：2013-03-01T10:22:59.080
> 
> 标签：android, adobe-analytics

我不熟悉omniture跟踪，所以希望有工作过的人能够提供帮助。我想要的是跟踪显示错误对话框的次数。例如，如果我的应用程序显示超时错误对话框，则应在站点催化剂中对其进行跟踪.. 谁能告诉，我们该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:50:22.483

查看 SiteCatalyst 的[Android AppMeasurement 用户指南](http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/android/index.html)，了解有关实施方法的一般详细信息。

要跟踪错误消息，您需要创建一个自定义变量（prop 或 eVar）并将其专用于错误消息。然后，每当触发错误消息时，定义该变量并发送图像请求。同时定义其他变量（例如当前页面）可能是一个好主意，这样您就可以获得关于它们何时/如何触发的额外维度。

[pageType](http://microsite.omniture.com/t2/help/en_US/sc/implement/index.html#pageType)变量通常用于 JavaScript 跟踪库中的错误处理，但在最近的 Android 库中已将其删除[。](http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/android/index.html#Android_Version_2x_to_3x_Migration_Guide)

# javascript - 并发 AJAX 请求和响应函数

> ID：15155359
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:23:02.393
> 
> 标签：javascript, php, ajax

由于我是 AJAX 学习的新手，我有一个问题：

*   我们可以`Request/Response`为不同的调用编写并发 AJAX 函数吗？
*   我可以`XMLHttpRequest`在多个 AJAX 调用函数中使用相同的对象函数吗？
*   如果我在`request.Send()`Method 中使用 POST 方法怎么办？

为了让问题更简单：假设，从一个 AJAX 调用中，我想使用`Request/Respons`以下功能：

> 1.  检查密码强度
> 2.  在已投票的 DB 上进行条目
> 3.  插入发布评论的记录并在页面上显示更新的帖子/评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:53:48.523

AFAIK，

1.  您可以编写由不同（并发）调用使用的 AJAX 请求/响应函数
2.  您可以为多个 AJAX 调用重复使用同一个`XMLHttpRequest`对象，只要它们不是同时的
3.  我不完全明白你在问什么...

但是，我建议您避免使用`XMLHttpRequest`AJAX 技术，而是使用一些库（例如`jQuery`）。如果您不开发库或框架，则应避免直接调用 JavaScript API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:25:52.347

> 我想首先解释什么是 Ajax 以及我们如何使用它。
> 
> **Ajax 是异步 JavaScript 和 XML 的首字母缩写。**让我们专注于异步一分钟。这意味着我们可以进行非阻塞操作，而浏览器仍然可以做它想做的事情。当从 Ajax 请求接收到结果时，它可以处理它。我们都用过它，而且效果很好。但是您是否尝试过基于 Ajax 创建聊天？我做到了，我撞到了一堵我无法通过的砖墙。
> 
> 让我解释一下我想如何创建聊天。我想使用 Comet 编程技术来获取新的回复和正常的 Ajax 请求来发送我的线路。因此，确切地说，对于其他用户的回复，我向服务器发出了 Ajax 请求，如果聊天中有新回复或达到 15 秒，则该请求会做出响应。为了发送我的聊天线路，我有一个正常的 Ajax 请求，它发送我的线路并尽快做出响应。

详细信息：我们可以查看[链接](http://lucadaniel.ro/2013/01/27/concurrent-ajax-requests-and-php/)。

# iphone - isEqualToSet 没有按预期工作

> ID：15155362
> 
> 赞同：0
> 
> 时间：2013-03-01T10:23:05.890
> 
> 标签：iphone, objective-c, nsset

[我尝试使用 isEqualToSet 根据链接](https://stackoverflow.com/questions/4116164/comparing-nssets-by-a-single-property/4116463#4116463)中建议的特定属性比较两组。但是在实现逻辑之后，我发现它不起作用，我不知道原因。如果有人可以建议我哪里出错或其他解决方案会很有帮助。这是我的代码：

```
if([[[obj ofServer] valueForKey:@"name"] isEqualToSet:[serverSet valueForKey:@"name"]])
{
   NSLog(@"handle both equal case");
}
NSLog(@"db log %@ and current logs server %@ \n",[[obj ofServer] valueForKey:@"name"],[serverSet valueForKey:@"name"]); 
```

控制台中的输出显示相同的设置

```
db log {(
    "f7.net"
)} and current logs server {(
        (
        "f7.net"
    )
)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:34:41.610

查看日志显示您有 2 个不同的集合。我的意思是你在比较

```
(
    "f7.net"
) 
```

和

```
((
        "f7.net"
    )) 
```

希望这有帮助

# php - 从每个项目的桥表中获取状态 ID 的结果

> ID：15155364
> 
> 赞同：0
> 
> 时间：2013-03-01T10:23:11.297
> 
> 标签：php, codeigniter, codeigniter-2, multidimensional-array

我希望你能帮助解决我遇到的这个问题。

我有一个名为“events_delegates_bridge”的桥接表，它有 3 个字段，“id”、“event_id”和“delegate_id”。

我也有名为“代表”和“活动”的表格。

我还有一个名为“delegate_status”的表，它有两个字段，“id”和“delegate_status”。

每个代表都有一个附加状态，可以是“临时”、“确认”或“重新参加”。

表

```
Table : events_delegates_bridge |   Columns : id , event_id , delegate_id
Table : delegates
Table : events
Table : delegate_status | Columns : id , delegate_status (Provisional , Confirmed , Resit) 
```

现在，在我的 'delegates_model' 类中，我根据每个表中关联的 'id'、delegate_status 'id' 和 'delegate_id' 加入表 'delegates'、'delegate_status' 和 'events_delegates_bridge'，如下所示：

```
class Delegate_Model extends CI_Model {

    public function get_delegates() {

        $this->db->select( '*' );
        $this->db->from( 'delegates' );
        $this->db->from( 'delegate_status' );
        $this->db->join( 'events_delegates_bridge', 'events_delegates_bridge.delegate_id = delegates.id AND delegate_status.id = delegates.delegate_status_id', 'inner' );
        $query = $this->db->get();
        return $query->result();

    }

} 
```

然后，我使用一组“delegates_helper”函数来做各种事情，其中​​之一是为每个包含其状态 ID 的委托生成一个“status_id”变量，这样我就可以将它与 HTML 表中的三列之一关联起来，总临时代表及其姓名，确认的代表总数及其姓名，最后是总补考及其姓名。

我正在生成状态ID，如下所示：

```
function get_status_id( $delegates ) {

    foreach ( $delegates as $delegate ) {

        switch( $delegate->delegate_status ) {

            case 'Provisional':
                $status = 'Provisional';
                $status_id = 1;
            break;

            case 'Confirmed':
                $status = 'Confirmed';
                $status_id = 2;
            break;

            case 'Resit':
                $status = 'Resit';
                $status_id = 3;
            break;

            default:
                $status = 'Confirmed';
                $status_id = 2;
            break;

        }

    }

    return $status_id;

} 
```

目前，每个 $delegate->delegate_status 都有我认为的每个委托的所有记录，这使得这个函数总是显示为“临时”，1。

我知道我没有正确解决这个问题，并希望获得一些关于如何做我需要的指导。多谢你们。

**注意：编辑**

好的，所以我想要的输出是获取特定活动的每个代表，并将这些代表分成 HTML 中的 3 列，每个活动显示临时代表、确认代表和参加补考的代表。

表

```
Table : events_delegates_bridge |   Columns : id , event_id , delegate_id
Table : delegates       | Columns : id, delegate_first_name, delegate_last_name, delegate_status_id (1, 2, 3)
Table : events          | Columns : id, event_name, event_start_date
Table : delegate_status | Columns : id , delegate_status (Provisional , Confirmed , Resit) 
```

我正在使用以下函数为事件表生成 HTML。然后在视图中使用此信息（变量）来填充引导弹出窗口：

```
function delegate_status_total( $delegates, $event ) {

    $status_id = get_status_id( $delegates );

    $current_event_id = $event->id;

    foreach ( $delegates as $delegate ) {

        if( $delegate->event_id == $current_event_id ) {

            if( $delegate->delegate_status_id == $status_id ) {

                $delegate_status_ids[] = $delegate->delegate_status_id;

                $delegate_total = count( $delegate_status_ids );

            }

        }

    }

    return $delegate_total;

}

function delegate_info( $delegates, $event ) {

    $delegate_total = delegate_status_total( $delegates, $event );

    $status_id = get_status_id( $delegates );

    $current_event_id = $event->id;

    $delegate_info = "There are currently a total of $delegate_total Provisional delegates booked on this event.<br /><br />";

    $delegate_info .= '<ul>';

        foreach ( $delegates as $delegate ) {

                if( $delegate->event_id == $current_event_id ) {

                    if( $delegate->delegate_status_id == $status_id ) {

                        $delegate_info .= '<li>';

                            $delegate_info .= $delegate->delegate_first_name . ' ' . $delegate->delegate_last_name;

                        $delegate_info .= '</li>';

                    }

                }

        }
    $delegate_info .= '</ul>';

    return $delegate_info;

} 
```

**编辑**

因此，当对 $delegates 对象执行 foreach 循环然后设置 $status_id 时，它仅设置第一个委托的第一个 id。如果我在 foreach 循环中对 $delegate->delegate_status_id 进行 var_dump() ，如下所示：

```
foreach ( $delegates as $delegate ) {

    if( $delegate->event_id == $current_event_id ) {

        prettyDump( $delegate->delegate_status_id );

    }

} 
```

它会按照您的期望输出每个 $delegate 项目中的每个 delegate_status_id ：

```
string(1) "1"
string(1) "2"
string(1) "3"
string(1) "1" 
```

所以每个 $delegate 都包含每个其他委托的 delegate_status_ids，并且因为第一个是“临时的”，1 每个委托的所有 $status_id 变量都设置为此。

必须有一种方法可以只检索特定的委托状态 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:07:47.227

你可以用一个没有循环的查询来完成它。这是一个例子

```
SELECT 
    *
FROM events_delegates_bridge AS edb
  LEFT JOIN events AS e
    ON e.id = edb.event_id
  LEFT JOIN delegates AS d
    ON d.id = edb.delegate_id
  LEFT JOIN delegate_status AS ds
    ON ds.id = d.delegate_status_id 
```

[演示](http://sqlfiddle.com/#!2/ff78a/1)

输出

```
id  event_id    delegate_id id  event_name  event_start_date    id  delegate_first_name delegate_last_name  delegate_status_id  id  delegate_status
----------------------------------------------------------------------------------------------------------------------------------------------------
1   1           1           1   A           2013-03-31          1   Ralf                Rudolph             1                   1   Provisional
2   2           2           2   B           2013-03-31          2   Clark               Filsh               2                   2   Confirmed
3   3           3           3   C           2013-03-31          3   Neil                Johnson             3                   3   Resit 
```

如果您只需要特定列，请在查询中使用 tablename.column 而不是 *

# sql - Postgresql 规划器使用错误的索引

> ID：15155369
> 
> 赞同：2
> 
> 时间：2013-03-01T10:23:25.403
> 
> 标签：sql, postgresql

最近我将 Postgresql 从 9.1 升级到 9.2 版本。新规划器使用错误的索引并且查询执行时间过长。

询问：

```
explain SELECT mentions.* FROM mentions WHERE (searches_id = 7646553) ORDER BY id ASC LIMIT 1000 
```

9.1版本解释：

```
Limit  (cost=5762.99..5765.49 rows=1000 width=184)
->  Sort  (cost=5762.99..5842.38 rows=31755 width=184)
    Sort Key: id
    ->  Index Scan using mentions_searches_id_idx on mentions  (cost=0.00..4021.90 rows=31755 width=184)
          Index Cond: (searches_id = 7646553) 
```

在 9.2 版本中解释：

```
Limit  (cost=0.00..450245.54 rows=1000 width=244)
->  Index Scan using mentions_pk on mentions  (cost=0.00..110469543.02 rows=245354 width=244
    Index Cond: (id > 0)"
    Filter: (searches_id = 7646553) 
```

正确的方法是在 9.1 版本中，规划器在 search_id 上使用索引。在 9.2 版本中，规划器不使用该索引并通过 search_id 过滤行。

当我在没有 ORDER BY id 的情况下执行 9.2 版本查询时，规划器使用 searchs_id 上的索引，但我需要按 id 排序。

我还尝试在子查询中选择行并在第二个查询中对其进行排序，但解释表明，规划器在正常查询中执行相同的操作。

```
select * from (
SELECT mentions.* FROM mentions WHERE (searches_id = 7646553))
AS q1
order by id asc 
```

你会推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:54:03.263

如果 search_id #7646553 行超过表的百分之几，则该列上的索引将不会被使用，因为表扫描会更快。做一个

```
select count(*) from mentions where searches_id = 7646553 
```

并与总行数进行比较。

如果它们不到桌子的百分之几，然后尝试

```
with m as (
    SELECT *
    FROM mentions
    WHERE searches_id = 7646553
)
select *
from m
order by id asc 
```

（从 PostgreSQL v12 开始，您必须使用`with ... as materialized`.）

或者创建一个复合索引：

```
create index index_name on mentions (searches_id, id) 
```

如果 search_id 具有低[基数](http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29)，则以相反的顺序创建相同的索引

```
create index index_name on mentions (id, searches_id) 
```

做

```
analyze mentions 
```

创建索引后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T17:01:46.123

对我来说，我有索引，但它们都基于 3 列，而且我没有调用索引中的列之一，所以它正在对整个事物进行 seq 扫描。可能的修复：更多索引但使用更少的列（和/或切换列顺序）。

我们看到的另一个问题是我们有正确的索引，但显然它是一个“无效”（创建不良的 CONCURRENT？）索引。所以删除它并创建它（或重新索引它）并开始使用它。

[有哪些可用选项可以识别和删除 Postgres 中的无效对象（例如：损坏的索引）](https://stackoverflow.com/questions/2102136/what-are-the-available-options-to-identify-and-remove-the-invalid-objects-in-pos/29260046#29260046)

另见[http://www.postgresql.org/docs/8.4/static/indexes-multicolumn.html](http://www.postgresql.org/docs/8.4/static/indexes-multicolumn.html)

# objective-c - 使用沙盒打开文件

> ID：15155371
> 
> 赞同：0
> 
> 时间：2013-03-01T10:23:33.157
> 
> 标签：objective-c, cocoa, sandbox

好的，所以我知道在新的**沙盒**指南下，打开文件必须遵守某些规则（也就是打开操作必须由用户使用 触发`NSOpenPanel`，当然要考虑必要的“打开”权限）。

**但是，这里有一个问题：**

*   在我的应用程序中，我有`NSOutlineView`一个完整的文件管理器（完整的树结构）
*   用户应该能够从大纲视图中选择一个文件，然后应用程序将打开它。

鉴于应用程序应该 100% 兼容沙盒，我应该怎么做？有什么已知的解决方法吗？甚至可能吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:27:42.653

简短的回答：你不能那样做。为了在应用程序的 UI 中显示文件夹的内容，您首先必须让用户使用打开的面板或从 Finder 中将其拖入来打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T15:01:29.860

正如@omz 所说，您可以这样做，您的应用程序需要请求访问包含您的应用程序显示的所有文件/文件夹的文件夹的权限。您不需要单个文件的权限，但可以将整个目录结构作为单个权限获取，然后将其存储为安全范围的书签，以便您的应用程序的未来执行将已经拥有该权限。

您甚至可以在应用程序启动时询问用户访问整个硬盘驱动器或其整个用户目录的权限。

您可以使用我编写的这个类将所有这些包装到一个函数调用中，然后将保留权限，以便仅在第一次运行时询问它们。[https://github.com/leighmcculloch/AppSandboxFileAccess](https://github.com/leighmcculloch/AppSandboxFileAccess)

或者，如果您想手动使用 NSOpenPanel 执行此操作，只需查看[AppSandboxFileAccess](https://github.com/leighmcculloch/AppSandboxFileAccess)中的代码，因为它使用它来获取权限，然后保留这些权限。

# java - 处理程序而不是计时器？

> ID：15155372
> 
> 赞同：1
> 
> 时间：2013-03-01T10:23:36.197
> 
> 标签：java, android, timer, callback

基本上这就是我正在做的事情，而不是使用 a`Timer`我正在使用 a `Handler`：

```
Handler h = new Handler();    
Runnable r = new Runnable(){

public void run(){
 //do something and schedule it again
 h.postDelayed(r, 10000);
}

}; 
```

我说`h.removeCallBacks(r);`当我想停止它时。不好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:31:25.623

```
Is it bad.? 
```

这还不错，但该方法只是删除了 Runnable 的待处理帖子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T10:29:00.933

> 不好吗。？

不（除非你有一些问题:)）。不要忘记`Runnable`在`onPause`方法中取消它，这样您就可以取消任何挂起的活动，使其`Runnable`无法在可能的死活动上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:38:08.397

处理程序有两个主要用途：（1）安排消息和可运行文件在未来某个时间点执行；(2) 将要在与您自己的线程不同的线程上执行的操作排入队列。

# c++ - 实现批量记录获取

> ID：15155374
> 
> 赞同：10
> 
> 时间：2013-03-01T10:23:36.897
> 
> 标签：c++, database, mfc, fetch, bulk

在我的程序开始时，我需要将 MS Access 数据库 (.mdb) 中的数据读取到下拉控件中。这样做是为了每当用户键入该控件时，应用程序就可以自动完成。

无论如何，从数据库中读取数据需要很长时间，所以我想我会实现批量行获取。

这是我的代码：

```
CString sDsn;
CString sField;
sDsn.Format("ODBC;DRIVER={%s};DSN='';DBQ=%s",sDriver,sFile);
TRY
{
    // Open the database
    database.Open(NULL,false,false,sDsn);

    // Allocate the rowset
    CMultiRowset recset( &database );

    // Build the SQL statement
    SqlString =  "SELECT NAME "
            "FROM INFOTABLE";

    // Set the rowset size. These many rows will be fetched in one bulk operation
    recset.SetRowsetSize(25);

    // Open the rowset
    recset.Open(CRecordset::forwardOnly, SqlString, CRecordset::readOnly | CRecordset::useMultiRowFetch);

    // Loop through each rowset
    while( !recset.IsEOF() )
    {
        int rowsFetched = (int)recset.GetRowsFetched(); // This value is always 1 somehow
        for( int rowCount = 1; rowCount <= rowsFetched; rowCount++ )
        {
            recset.SetRowsetCursorPosition(rowCount);
            recset.GetFieldValue("NAME",sField);
            m_nameDropDown.AddString(sField);
        }

        // Go to next rowset
        recset.MoveNext();
    }

    // Close the database
    database.Close();
}
CATCH(CDBException, e)
{
    // If a database exception occured, show error msg
    AfxMessageBox("Database error: "+e->m_strError);
}
END_CATCH; 
```

`MultiRowset.cpp`好像：

```
#include "stdafx.h"
#include "afxdb.h"
#include "MultiRowset.h"

// Constructor
CMultiRowset::CMultiRowset(CDatabase *pDB)
   : CRecordset(pDB)
{
    m_NameData = NULL;
    m_NameDataLengths = NULL;

    m_nFields = 1;
    CRecordset::CRecordset(pDB);
}

void CMultiRowset::DoBulkFieldExchange(CFieldExchange *pFX)
{
   pFX->SetFieldType(CFieldExchange::outputColumn);
   RFX_Text_Bulk(pFX, _T("[NAME]"), &m_NameData, &m_NameDataLengths, 30);
} 
```

`MultiRowset.h`好像：

```
#if !defined(__MULTIROWSET_H_AD12FD1F_0566_4cb2_AE11_057227A594B8__)
#define __MULTIROWSET_H_AD12FD1F_0566_4cb2_AE11_057227A594B8__

class CMultiRowset : public CRecordset
{
public:
      // Field data members
      LPSTR m_NameData;

      // Pointers for the lengths of the field data
      long* m_NameDataLengths;

      // Constructor
      CMultiRowset(CDatabase *);

      // Methods
      void DoBulkFieldExchange(CFieldExchange *);
};

#endif 
```

在我的数据库中，`INFOTABLE`看起来像：

```
NAME    AGE
----    ---
Name1   Age1
Name2   Age2
      .
      .
      .
      . 
```

我需要做的只是从数据库中*读取*数据。有人可以告诉我我做错了什么吗？我的代码现在的行为与正常提取完全一样。没有发生批量提取。

**编辑：**

我只是四处逛逛，`DBRFX.cpp`发现`RFX_Text_Bulk()`将我的传递初始化`m_NameData`为`new char[nRowsetSize * nMaxLength]`！

这意味着`m_NameData`只是一个字符数组！我需要获取多个名称，所以我不需要二维字符数组吗？最奇怪的是，同样`RFX_Text_Bulk()`将 my pass 初始化`m_NDCDataLengths`为`new long[nRowsetSize]`. 为什么一个字符数组需要一个长度数组？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:18:30.873

根据[http://msdn.microsoft.com/en-us/library/77dcbckz.aspx#_core_how_crecordset_supports_bulk_row_fetching](http://msdn.microsoft.com/en-us/library/77dcbckz.aspx#_core_how_crecordset_supports_bulk_row_fetching)您必须在调用 SetRowsetSize 之前使用 CRecordset::useMultiRowFetch 标志打开 CRecordset：

> 要实现批量取行，必须在 Open 成员函数的 dwOptions 参数中指定 CRecordset::useMultiRowFetch 选项。要更改行集大小的设置，请调用 SetRowsetSize。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:10:11.307

你几乎做对了。要获取值，我会更改您的

```
 for( int rowCount = 1; rowCount <= rowsFetched; rowCount++ )
        {
            recset.SetRowsetCursorPosition(rowCount);
            recset.GetFieldValue("NAME",sField);
            m_nameDropDown.AddString(sField);
        } 
```

通过这样的事情

```
for( int nPosInRowset = 0; nPosInRowset < rowsFetched; nPosInRowset++ )
{
    //Check if value is null
    if (*(recset.m_NameDataLengths + nPosInRowset) == SQL_NULL_DATA)
        continue;    

    CString csComboString;
    csComboString = (recset.m_NameData + (nPosInRowset * 30)); //Where 30 is the size specified in RFX_Text_Bulk

    m_nameDropDown.AddString(csComboString);
} 
```

编辑：要获取多于一行，请删除 CRecordset::forwardOnly 选项

编辑 2：您也可以保留 CRecordset::forwardonly，但添加 CRecordset::useExtendedFetch 选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T19:24:10.883

刚刚面临同样的问题。您应该只在参数`recset.Open()`调用中使用，而不是。希望这可以帮助某人...`dwOptions``CRecordset::useMultiRowFetch``CRecordset::readOnly | CRecordset::useMultiRowFetch`

**编辑：-**重新检查后是这种情况-使用批量记录集并使用 and 打开时`CRecordset::forwardOnly`，`CRecordset::readOnly`您还必须`CRecordset::useExtendedFetch`在`dwOptions`. 对于其他类型的滚动，使用`CRecordset::readOnly | CRecordset::useMultiRowFetch`就好了。

# jquery - 如何在第一页的最后一张幻灯片和后退按钮上禁用任何滑块前进按钮？

> ID：15155377
> 
> 赞同：0
> 
> 时间：2013-03-01T10:23:44.200
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用来自[http://css-tricks.com/anythingslider-jquery-plugin/](http://css-tricks.com/anythingslider-jquery-plugin/)的 Jquery 组件“anythingslider”很棒的插件， 但是有一个小问题，我想在显示第一张幻灯片时禁用后退按钮，即第一张

*   元素并在显示最后一张幻灯片时禁用前进按钮，即最后一张*   元素 ？

    共有 8 个

    *   滑块中的元素

    谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:43:50.553

该插件基于 LI 结构，当前（活动）li 具有类“activePage”代码：

```
$('.arrow.back')click(
function(e){
   if($('ul#slider1').find('li:not(.cloned)').first().hasClass('activePage')){
      e.stopImmediatePropagation();
      return false;
}}); 
```

从页面源中调查了 id 和类，如果这将是队列中的第一个事件侦听器，希望这会对您有所帮助，它可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:50:48.650

使用以下代码

```
 $('#slider').anythingSlider({
        onInitialized   : function(){
              // hide back arrow
              $('.arrow.back').hide();
        },
        onSlideComplete     : function(){
            if($('#slider .panel:not(.cloned)').first().hasClass('activePage')){
              // hide back arrow
              $('.arrow.back').hide();
            }
            else{
              $('.arrow.back').show();
            }

            if($('#slider .panel:not(.cloned)').last().hasClass('activePage')){
              // hide forward  arrow
              $('.arrow.forward').hide();
            }
            else{
              $('.arrow.forward').show();
            }
        }
    }); 
```

# javascript - 如何保存对话框中的数据？

> ID：15155382
> 
> 赞同：1
> 
> 时间：2013-03-01T10:23:47.577
> 
> 标签：javascript, jquery, cakephp, jquery-ui-accordion, jquery-dialog

我有一个手风琴，其中有对话框的链接，但是当对话框打开时它没有保存字段并且没有重定向，这是什么问题？我尝试了很多，但没有得到任何成功。

这是我的观点：

```
<?php v_start($d);?>

<script>
    $(function() {
        var icons = {
            header: "ui-icon-circle-arrow-e",
            activeHeader: "ui-icon-circle-arrow-s"
        };
        $( "#accordion" ).accordion({
            icons: icons
        });
        $( "#toggle" ).button().click(function() {
            if ( $( "#accordion" ).accordion( "option", "icons" ) ) {
                 $( "#accordion" ).accordion( "option", "icons", null );
            } else {
                 $( "#accordion" ).accordion( "option", "icons", icons );
            }
        });
    }); 
    $(function()
    {
        var $dialog = $("#view_dialog").dialog({
            autoOpen: false,
            title: 'Add Group',
            height: 200,
            width: 1200,
            resizable: true,
            modal: true,
            buttons:
            {
                "Ok": function()
                {
                    $(this).dialog("close");
                }
            }
        });
    $(".view_dialog").click(function()
    {
        $dialog.load($(this).attr('href'), function ()
        {
            $dialog.dialog('open');
        });
        return false;
    });
});
</script>
    <div class="inner-heading"> 
        <div class="inner-heading-left">
        <h1><?php echo __l('Manage Groups');?></h1>
        </div>
    </div>  

    <div id="accordion">
        <div>
            <h3 style="margin-right: 0PX; margin-left: 30px; font-size:20px;"><?php echo __l('User Define Group') ?></h3>
        </div>
    <div class="firsttable">        
        <div class="top-button">
            //dialog link
            <?php echo $this->Manager->hlink('Add Group', array('action' => 'add_define_group'), array('class' => 'view_dialog')); ?>           
            <?php echo $this->Manager->link('Add Group',array('action'=>'add_define_group')) ?>
        </div>
    </div>
    <div>
        <h3 style="margin-right: 0PX; margin-left: 30px; font-size:20px;"><?php echo __l('Mailing Group') ?></h3>
    </div>
    <div class="firsttable">        
        <div class="top-button">
            <?php echo $this->Manager->link('Add Group',array('contoller'=>'ContactGroups','action'=>'add_define_group','mailing')) ?>
        </div>

    </div>
    <div>
        <h3 style="margin-right: 0PX; margin-left: 30px; font-size:20px;"><?php echo __l('Dynamic Group') ?></h3>
    </div>
    <div class="firsttable">
        <div class="top-button">
            <?php echo $this->Manager->link('Add Group',array('contoller'=>'ContactGroups','action'=>'add_define_dynamic_group')) ?>
        </div>
    </div>
    <div id="view_dialog"></div>
</div>
<?php v_end();?> 
```

基本上我试图在手风琴中打开对话框，对话框将保存数据并重定向它，但它没有保存任何数据并且没有重定向，我该怎么办？任何机构的帮助将不胜感激，在此先感谢。

# android - 如何将 GraphView 集成到我的项目中？

> ID：15155383
> 
> 赞同：6
> 
> 时间：2013-03-01T10:23:47.880
> 
> 标签：android, integration, android-graphview

所以我一直在为我的应用程序寻找图形解决方案，我偶然发现了[GraphView](http://www.jjoe64.com/2011/07/chart-and-graph-library-for-android.html)。

我在 github 和源文件中四处寻找，但似乎找不到集成指南。也许它就在我面前，但我在任何地方都看不到它。

我以前从未将其他人的代码集成到我自己的代码中，所以如果有人能给我简要介绍如何将 GraphView 与我当前的项目集成，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T11:12:08.213

选项1：

1.  [从这里](https://github.com/downloads/jjoe64/GraphView/GraphView-3.0.jar)得到图书馆的罐子。
2.  将该 jar 复制到`/libs`项目中要使用的文件夹中`GraphView`。
3.  用它。

选项 2：

1.  `github`从使用中获取项目`git`：

    *   使用 git bash 移动到您喜欢的目录
    *   从执行`git` `git clone git://github.com/jjoe64/GraphView.git graphView`
    *   in `Eclipse` `File`-> `Import...`-> `Android`-/ `Existing Android Code Into Project`（用于从上一步的您最喜欢的文件夹`Browse`导航到该文件夹​​）`graphView`
    *   右键单击将使用底部（区域）的`GraphView`-> `Properties`-> -> 的项目用于选择`Android``Library``Add...``GraphView`
    *   用它

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-11T07:04:01.633

GraphView 已添加到 Maven Central，因此 Android Studio 集成现在更加容易。只需将以下内容添加到您的 build.gradle 文件中，您无需下载 .jar。

```
dependencies {
    'com.jjoe64:graphview:3.1.3'
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-27T13:10:00.113

在 Android Studio 中，在 build.gradle 文件中添加这一行：

```
dependencies {
    compile files('libs/graphview-3.1.jar')
} 
```

并且不要忘记单击“使用 Gradle 文件同步项目”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-14T08:25:05.597

使用 android studio 回答： -[从此链接](https://github.com/downloads/jjoe64/GraphView/GraphView-3.0.jar)
下载 .jar

-将jar文件添加到项目->应用程序->库

-打开 build.gradle 并在依赖项下写入：

```
dependencies {
compile files('libs/graphview-3.1.jar')
} 
```

在那个同步项目之后

# .net - 使用 IIS 7 管理器设置权限

> ID：15155385
> 
> 赞同：0
> 
> 时间：2013-03-01T10:23:55.760
> 
> 标签：.net, asp.net-mvc-3, iis-7, permissions

我按照此处的步骤操作，但不知道如何设置权限，我需要创建一个目录并将一个 zip 文件解压缩到其中并在 CreateDirectory 行上拒绝访问：

```
string zipCurFile = model.ScormPackageFile.FileName;
string destinationDirectoryName = Path.GetFileNameWithoutExtension(zipCurFile);
Directory.CreateDirectory(destinationDirectoryName); 
```

[如何在 IIS 7、Windows 7 上将 ASP.NET 4.0 添加为应用程序池](https://stackoverflow.com/questions/4890245/how-to-add-asp-net-4-0-as-application-pool-on-iis-7-windows-7)

这是我的 IIS 7 管理器页面 ![在此处输入图像描述](../Images/c77da90702e921aaf5b28e09b90d60e4.png)

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:31:07.343

您需要将父目录的修改权限授予应用程序池身份用户。这是您可以通过 Windows 资源管理器而不是通过 IIS 管理器执行的操作。

右键单击目标目录并选择“属性”>“安全性”。编辑该目录的权限，添加您的应用程序池正在使用的用户并授予该用户对该文件夹的修改权限。

假设您正在创建目录`C:\Files\ZipTarget\Scorm`并且该`C:\Files\ZipTarget`目录已经存在，您将需要授予应用程序池身份用户对该`C:\Files\ZipTarget`目录的修改权限。

# mysql - MySQL 闭包表：使用 GUID 而不是自动增量时的树渲染

> ID：15155387
> 
> 赞同：0
> 
> 时间：2013-03-01T10:23:58.220
> 
> 标签：mysql, sql, tree, closures, hierarchical

我已经在 MySQL 中为层次结构组列表实现了一个闭包表系统。

这些组在 table company_groups 中，列 ID 和 Name 关闭表是 company_groups_treepaths：

```
CREATE TABLE `company_groups` (
  `id` char(36) NOT NULL default '',
  `name` varchar(150) NOT NULL default '',
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `company_groups_treepaths` (
  `ParentID` char(36) NOT NULL default '',
  `ChildID` char(36) NOT NULL default '',
  `PathLength` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ParentID`,`ChildID`),
  KEY `PathLength` (`PathLength`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

然后我试图从中得到一个树结构。问题是我发现的大多数解决方案都是在组 ID 上使用 group_concat，假设它是一个 INT 和 auto_increment。

但是，我使用 GUID，这使得它更难。我已经浏览了这里的其他示例，但无法真正掌握它。

例如，此查询检索正确的组，但检索错误的树：

```
SELECT SQL_CALC_FOUND_ROWS p.`ChildID`, p.ParentID, d.name, CONCAT(REPEAT('-', p.`PathLength`), d.`name`) as path, p.`PathLength` as depth
        FROM 
            `company_groups` AS d
        JOIN `company_groups_treepaths` AS p ON d.`id` = p.`ChildID`
        JOIN `company_groups_treepaths` AS crumbs ON crumbs.`ChildID` = p.`ChildID`

        WHERE 
            p.`ParentID` = 'aa420c70-7050-11e2-b75d-672efc30777e'
          GROUP BY d.id

ORDER BY GROUP_CONCAT(crumbs.`PathLength`) 
```

SQL小提琴在这里：[http ://sqlfiddle.com/#!2/474d4/2](http://sqlfiddle.com/#!2/474d4/2)

该查询的正确顺序应该是（获取 Swedbank 的所有子项）：

瑞典银行 (aa420c70-7050-11e2-b75d-672efc30777e)

*   hejsan (44b2b680-7f44-11e2-b04d-918fe8c8d065)
*   东约特兰 (aa420970-7050-11e2-893a-7f63b55a76db)
*   *   区域 1 (a6adc800-7050-11e2-9db0-ad8ff41db08c)
*   *   *   asd (56fd15a0-7f44-11e2-b10f-55240ef76c28)
*   *   *   hejsan3 (fc14c320-7f44-11e2-a2bb-ed51f02fd80f)
*   *   在 öster (bb6b93a0-80ea-11e2-be1d-fd97d33aad97)
*   斯莫兰 (ae5dc150-7050-11e2-9b11-c96b3591816c)
*   *   asdasd (534e3f00-80df-11e2-b92e-fd29e414f3fd)
*   *   asd (6e640160-80de-11e2-8c41-d135d36c28db)
*   hejsan2 (d95a7060-80be-11e2-8179-0b9231964800)

有人对使用 GUID 的树列表有什么好的想法吗？

该函数本身不会经常被调用，因此如果有必要解决问题，我也对子查询建议持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:01:48.630

我恢复尝试基础知识，遵循[http://karwin.blogspot.se/2010/03/rendering-trees-with-closure-tables.html上的大纲](http://karwin.blogspot.se/2010/03/rendering-trees-with-closure-tables.html)

这是最终起作用的查询：

```
select group_concat(n.name order by a.PathLength desc separator ' -> ') as fullpath, CONCAT(REPEAT('-', d.`PathLength`), cg.`name`) as path, d.ChildID as group_id, d.PathLength as depth, cg.name
            from company_groups_treepaths d
            join company_groups_treepaths a on (a.ChildID = d.ChildID)
            join company_groups n on (n.id = a.ParentId)
            join company_groups cg on (cg.id = d.ChildID)

            where d.ParentID = 'aa420c70-7050-11e2-b75d-672efc30777e' and cg.deleted = 0 
            group by d.ChildID
            order by fullpath 
```

# java - JOOQ 如何通过 id 获得一个条目（记录）？

> ID：15155390
> 
> 赞同：5
> 
> 时间：2013-03-01T10:24:09.957
> 
> 标签：java, sql, record, jooq

我认为这很简单，但我在文档中找不到任何简单的东西。

JOOQ 如何通过 id 获得一个条目（记录）？

类似于创建记录的东西：

```
factory.newRecord(MY_TABLE); 
```

还

```
MyTableRecord record = factory.selectRecord(MY_TABLE.ID.like(id)); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T20:51:45.487

除了[黄色](https://stackoverflow.com/a/15158509/521799)在他的回答中建议的内容外，您还可以在此处使用此“简短形式”：

```
MyTableRecord record = factory.fetchOne(MY_TABLE, MY_TABLE.ID.like(id)); 
```

使用 jOOQ 2.x[`Factory.fetchOne(Table, Condition)`](http://www.jooq.org/javadoc/2.6.x/org/jooq/impl/Factory.html#fetchOne%28org.jooq.Table,%20org.jooq.Condition%29)或 jOOQ 3.x 的[`DSLContext.fetchOne(Table, Condition)`](http://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#fetchOne%28org.jooq.Table,%20org.jooq.Condition%29)方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T13:05:50.587

我使用`selectFrom`和`fetchOne`

```
 PersonRecord record = factory.selectFrom(PERSON).
                                  where(PERSON.UUID.equal(uuid)).fetchOne(); 
```

# wcf-binding - WCF 用户名身份验证不起作用

> ID：15155398
> 
> 赞同：1
> 
> 时间：2013-03-01T10:24:38.627
> 
> 标签：wcf-binding, wcf-configuration, wcf-authentication

我是 WCF 服务的新手。我想使用**basichttpbinding**创建一个 WCF 服务，以便在访问我的 WCF 服务之前创建一个自定义身份验证机制。我使用了 **security mode = Transport**和**clientcredentialtype = basic**。我编写了一个自定义验证器函数来验证我的用户名和密码。

验证器功能

```
namespace CustomValidator

 {
  public class MyCustomValidator : UserNamePasswordValidator

   {
      public override void Validate(string userName, string password)
     {
         // This isn't secure, though!
        if ((userName != "check") || (password != "check"))
        {
            throw new SecurityTokenException("Validation Failed!");
        }
    }
  }
} 
```

这是我的服务配置文件

```
 < ?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <identity impersonate="false" />
</system.web>
<system.serviceModel>
    <diagnostics>
        <endToEndTracing activityTracing="true" messageFlowTracing="true" propagateActivity="true"></endToEndTracing>
    </diagnostics>

    <bindings>
     <basicHttpBinding>
     <binding name="BasicHttpEndpointBinding">
       <security mode="Transport">
        <transport clientCredentialType="Basic" />
       <!--  <message clientCredentialType="UserName" />-->
       </security>
      </binding>
    </basicHttpBinding>
     </bindings>
    <services>
        <service behaviorConfiguration="ServiceBehavior" name="Service">
            <endpoint address="" binding="basicHttpBinding"    name="BasicHttpEndpoint" bindingConfiguration="BasicHttpEndpointBinding" contract="IService">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding"   contract="IMetadataExchange" />
        </service>
    </services>

    <behaviors>
        <serviceBehaviors>
            <behavior name="ServiceBehavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="false" />
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false" />
                <serviceCredentials>

                    <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="CustomValidator.MyCustomValidator, App_Code" />

                    </serviceCredentials>
                </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
        <authentication>
            <basicAuthentication enabled="true" />
            <anonymousAuthentication enabled="false" />
            <windowsAuthentication enabled="false" />

        </authentication>

    </security>
</system.webServer>
  </configuration> 
```

所以这里的问题是，每当我运行我的服务时，如果我输入用户名和密码（我的验证器希望用户名和密码相同），我会得到一个登录对话框，我没有得到我的服务详细信息页面，它曾经来在正常情况下（没有身份验证机制）。我不知道我错过了什么，我确实觉得它的全部配置对我来说很重要，但我仍然无法找出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T13:01:00.667

已创建并共享了一个用户名密码验证的演示项目。它工作正常。请检查

[https://onedrive.live.com/redir?resid=3FE322C74D6AA4D1%21169](https://onedrive.live.com/redir?resid=3FE322C74D6AA4D1%21169)

您可以使用内部提供的 SelfCert 创建名称为**TrustedPeople**的证书，存储位置**LocalMachine**

# sharepoint-2007 - 如何在 Sharepoint 2007 中的问题列表上设置项目级别权限

> ID：15155401
> 
> 赞同：1
> 
> 时间：2013-03-01T10:24:44.487
> 
> 标签：sharepoint-2007

我有一个 Sharepoint 问题列表，我需要用户在其中

*   阅读所有项目
*   但是编辑他们创建的项目。

在 Sharepoint 普通列表中，我们可以通过高级设置 -> 项目级别权限来实现。此选项在问题列表中不可用。

我什至尝试过使用以下代码：

```
 SPList list = web.Lists["Shared Documents"]; 
      list.ReadSecurity = 2; 
      list.WriteSecurity = 2; 
      list.Update(); 
```

谁能建议还有什么可以做的？

# android - 单击我的自定义对话框按钮后，我的应用程序屏幕位置更改

> ID：15155405
> 
> 赞同：1
> 
> 时间：2013-03-01T10:25:07.327
> 
> 标签：android, position, screen

我使用包含许多字段的表单创建一个应用程序，其中一个显示一个对话框，但是如果我在对话框中显示的最新项目中，确定按钮屏幕移动到第一个或其他编辑文本和屏幕位置更改。单击按钮后我不会改变屏幕位置

感谢您的帮助，这是我的布局代码：

```
**    <?xml version="1.0" encoding="utf-8"?>**
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scrollbars="none"
tools:context=".SabtTavalodActivity" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/linearasli"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center|top"
    android:gravity="center|right"
    android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/spinnerRel"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/txtheadermonasebat"
        style="@style/sectionHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right"

        android:text="MOnasebat: " />

    <Spinner
        android:id="@+id/spinner"
        style="@style/SpinnerCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtheadermonasebat"
        android:layout_toLeftOf="@+id/txtmonasebat"

        />
    <!-- android:entries="@array/moshakhasat"  -->

    <TextView
        android:id="@+id/txtmonasebat"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/spinner"
        android:layout_alignBottom="@+id/spinner"
        android:layout_alignParentRight="true"
        android:layout_marginRight="24dp"
        android:gravity="right"
        android:text="monasebat: " />

</RelativeLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/txtname"
        style="@style/sectionHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="right"
        android:text="Name: " />

    <EditText
        android:id="@+id/name"
        android:inputType="text"
        style="@style/EditTextCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:textColorHint="#cacaca"
        android:ems="10"
        android:singleLine = "true"
        android:maxLines = "1"
        android:lines = "1"
        >

    </EditText>
<!-- 
    <QuickContactBadge
        android:id="@+id/quickContactBadge1"
        android:layout_width="75dp"
        android:layout_height="75dp"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/name" 
        android:src="@drawable/rihanna"
        ></QuickContactBadge> 
```

-->

```
 <LinearLayout

            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:background="@drawable/image_bg"
            android:layout_alignParentBottom="true"
            android:layout_toLeftOf="@+id/name"
            android:layout_marginTop="55sp"
            android:padding="3dip" >

    <ImageView
        android:id="@+id/imgvw32"
        android:layout_width="65dip"
        android:layout_height="65dip"

        android:contentDescription="@string/axpick"
         android:src="@drawable/rihanna" 
        android:scaleType="fitXY"/>
</LinearLayout>

</RelativeLayout>
**<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_marginTop="15sp">

    <TextView
        android:id="@+id/txtBirtday"
        style="@style/sectionHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="right"
        android:paddingTop="10dp"
        android:text="Birtday: " />

    <Button
        android:id="@+id/btnDatePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="55dip"
        android:background="@drawable/btn_add_datapicker"
        />

    <TextView
        android:id="@+id/txtsabtbirthday"
        android:background="@drawable/btn_toggle_on_focused_holo_light"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_marginTop="85sp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:textColorHint="#cacaca" />
</RelativeLayout>
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="25sp" >

    <TextView
        android:id="@+id/txtsalepish"
        style="@style/sectionHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="right"
        android:text="sale pish:  " />

    <EditText
        android:id="@+id/salepish"
        android:inputType="text"
        android:paddingTop="85dip" 
        style="@style/EditTextCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:ems="10"
        android:lines="1"
        android:maxLines="1"
        android:singleLine="true"
        android:textColorHint="#cacaca" />

</RelativeLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_marginTop="25sp">

    <TextView
        android:id="@+id/txtrate"
        style="@style/sectionHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="right"
        android:text="alaghe be in fard:  " />

    <RatingBar
        android:id="@+id/ratingBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="65dp"
        android:progressDrawable="@drawable/heart_rate" />

</RelativeLayout>
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20sp" >

     <TextView
        android:id="@+id/txtHeaderAlarm"
        style="@style/sectionHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="right"
        android:text="Alarm: " />

    <CheckBox
        android:id="@+id/AlarmcheckBox1"
        style="@style/CheckBoxCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtHeaderAlarm"
        android:text="ErsalMessage" />

    <TextView
        android:id="@+id/txtsabtAlarm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/AlarmcheckBox1"
        android:gravity="right"
        android:text="Message: "
        android:textColor="#cacaca"
        android:textSize="16dp" />
 <CheckBox
        android:id="@+id/AlarmcheckBoxTarikh"
        style="@style/CheckBoxCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtsabtAlarm"
        android:text="ErsalMessage" />

    <TextView
        android:id="@+id/txtsabtAlarmTarikh"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/AlarmcheckBoxTarikh"
        android:gravity="right"
        android:text="Message: "
        android:textColor="#cacaca"
        android:textSize="16dp" />

     <CheckBox
        android:id="@+id/AlarmcheckBoxHardo"
        style="@style/CheckBoxCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtsabtAlarmTarikh"
        android:text="ErsalMessage" />

     <CheckBox
         android:id="@+id/CheckBoxPickSong"
         style="@style/CheckBoxCalenderComp"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_below="@+id/txtHeaderAlarm"
         android:layout_toLeftOf="@+id/AlarmcheckBoxTarikh"
         android:text="ErsalMessage" />

     <TextView
         android:id="@+id/TextPickSong"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_below="@+id/AlarmcheckBox1"
         android:layout_toLeftOf="@+id/AlarmcheckBoxTarikh"
         android:gravity="right"
         android:text="Message: "
         android:textColor="#cacaca"
         android:textSize="16dp" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/relMsg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_marginTop="20sp">

    <TextView
        android:id="@+id/txtHeaderMsg"
        style="@style/sectionHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="right"
        android:text="Message: " />

    <CheckBox
        android:id="@+id/msgcheckBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        style="@style/CheckBoxCalenderComp"
        android:layout_below="@+id/txtHeaderMsg"
        android:text="ErsalMessage" />

    <TextView
        android:id="@+id/txtMSgactive"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/msgcheckBox1"
        android:gravity="right"
        android:text="Message: "
        android:textColor="#cacaca"
        android:textSize="16dp" />
    <CheckBox
        android:id="@+id/msgcheckBoxTarikh"
        style="@style/CheckBoxCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtMSgactive"
        android:text="ErsalMessage"
         />

    <TextView
        android:id="@+id/txtMSgactiveTarikh"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/msgcheckBoxTarikh"
        android:gravity="right"
        android:text="Message: "
        android:textColor="#cacaca"
        android:textSize="16dp" />
    <CheckBox
        android:id="@+id/msgcheckBoxSaat"
        style="@style/CheckBoxCalenderComp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtMSgactiveTarikh"
        android:text="ErsalMessage"
         />

    <TextView
        android:id="@+id/txtMSgactiveSaat"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/msgcheckBoxSaat"
        android:gravity="right"
        android:text="Message: "
        android:textColor="#cacaca"
        android:textSize="16dp" />

</RelativeLayout>

    <TextView
        android:id="@+id/txtNote"
        android:layout_width="fill_parent"
        style="@style/sectionHeader"
        android:layout_height="wrap_content"
        android:layout_marginBottom="@dimen/padding_small"

        android:layout_marginTop="25dip"
        android:gravity="right"
        android:text="Note: " />

    <EditText
        android:id="@+id/note"
        android:inputType="text"
        style="@style/EditTextCalenderComp"
        android:layout_width="@dimen/textbox"
        android:layout_height="wrap_content"
        android:layout_marginBottom="@dimen/padding_small"
        android:layout_marginRight="10dip"
        android:layout_marginTop="25dip"
        android:ems="10"
        android:textColorHint="#cacaca"
         />

    <Button
        android:id="@+id/btnNextScreen"
        android:background="@drawable/btn_toggle_holo_light_mosi"
        android:layout_width="@dimen/btndim"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="10dip"
        android:layout_marginTop="15dip"
        android:text="Send to Next Screen" />
</LinearLayout> 
```

**

# linux - perl + 仅当八位字节为 VALID IP 时才替换 IP 地址

> ID：15155406
> 
> 赞同：0
> 
> 时间：2013-03-01T10:25:08.587
> 
> 标签：linux, perl, bash, shell, ksh

以下 perl 单行代码的目标是替换前三个八位字节（如果四个八位字节是 digit/number - xxx.xxx.xxx.digit ）

*   备注 - 我使用 linux 和 solaris 机器

问题是 perl one 行也将替换前三个八位字节，而四个八位字节 IP 不是有效的 IP 八位字节（例如 5.5.5.555 ）

以下 perl 单行代码示例显示了 perl 语法如何替换前三个八位字节，尽管四个八位字节不是 VALID IP

```
# export OLD_IP=1.1.1
# export NEW_IP=5.5.5
# echo 1.1.1.555 | perl -i -pe 'next if /^ *#/; s/(?<![\d.])\Q$ENV{OLD_IP}\E(?=\.\d)/$ENV{NEW_IP}/g'
5.5.5.555 
```

请告知需要在我的 perl 单行代码中添加什么，以替换前三个八位位组

**仅**当四个八位字节为 VALID IP（介于 0 – 255 之间）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:24:07.390

这是使用`eval`标志进行替换的简单解决方案：

```
perl -i -pe 's/\b(1\.1\.1\.(\d+))\b/ $2 >= 0 && $2 < 255 ? "5.5.5.$2" : $1/ge' 
```

测试：

```
echo 1.1.1.12 | perl -i -pe 's/\b(1\.1\.1\.(\d+))\b/ $2 >= 0 && $2 < 255 ? "5.5.5.$2" : $1/ge'
5.5.5.12

echo 1.2.1.256 | perl -i -pe 's/\b(1\.1\.1\.(\d+))\b/ $2 >= 0 && $2 <= 255 ? "5.5.5.$2" : $1/ge'
1.2.1.256 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:40:17.823

如果最后的八位字节总是只有一个数字，那么您可以在模式的开头执行相同的操作，并确保第一个八位字节之后没有数字。

```
s/(?<![\d.])\Q$ENV{OLD_IP}\E(?=\.\d(?!\d))/$ENV{NEW_IP}/g 
```

这种方式比检查从 0 到 255 的有效最终八位字节要容易得多，看起来像

```
s/(?<![\d.])\Q$ENV{OLD_IP}\E(?=\.(?:1?\d?\d|2[0-4][0-9]|25[0-5])(?!\d))/$ENV{NEW_IP}/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:45:15.493

我的第一个想法是使用正则表达式：

下一个表达式应该让你开始，它检查不同的组，个位数 0 到 9，两位数 0 到 9，三位数以 1 开头，三位数以 2 开头但不跟 5，三位数跟 5 限制为 5第三位数

```
^(?:[23456789]|[0123456789][0123456789]|1[0123456789][0123456789]|2[01234][0123456789]|25[012345]?)$ 
```

确实在在线正则表达式测试器中对其进行了测试，并且似乎很好地过滤了它

我对 PERL 的了解已经超过 12 年了，但不应该得到输出并检查它的价值吗：

```
/\d\.\d\.\d\.(\d)/ if $1 < 255 
```

# android - 在应用订阅中做 android 的最低操作系统是多少？

> ID：15155408
> 
> 赞同：1
> 
> 时间：2013-03-01T10:25:15.363
> 
> 标签：android, in-app-purchase, subscription

我想在我的 android 应用上实现应用内订阅，但这样做的最低目标是什么？

2.1 还是 2.2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:32:47.850

来自 Android 开发者网站（版本 3 是最新的）：

> 运行 Android 2.2 或更高版本且安装了最新版 Google Play 商店的设备（绝大多数活动设备）支持应用内结算版本 3。

所以最低目标是2.2。

[http://developer.android.com/google/play/billing/billing_overview.html](http://developer.android.com/google/play/billing/billing_overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:34:24.667

Use the version 2.1 and above since for all the mobile devices are almost higher versions and its good to develop with min version 2.1 & above.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:42:15.610

在决定应用程序的最低版本之前，您必须始终检查 google 上的[平台分布](http://developer.android.com/about/dashboards/index.html)。例如，我选择不包含 2.2，因为它带来了不必要的 API 遗留问题，而且工作量太大而收益太少。请记住，应用内计费确实很复杂。API 非常复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:30:29.183

据我所知，订阅“最低目标”与 Google Play Store 应用相关，而不是与您的应用相关。看一眼：

[http://developer.android.com/google/play/billing/versions.html#Subs](http://developer.android.com/google/play/billing/versions.html#Subs)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T10:32:41.257

运行 Android 2.2 或更高版本且安装了最新版本的 Google Play 商店的设备支持应用内结算版本 3。

来源：http: [//developer.android.com/google/play/billing/billing_overview.html#migration](http://developer.android.com/google/play/billing/billing_overview.html#migration)

# django - 我可以在 dotcloud 上浏览源代码/提交吗？

> ID：15155410
> 
> 赞同：1
> 
> 时间：2013-03-01T10:25:22.107
> 
> 标签：django, version-control, repository, dotcloud

我在 Dotcloud 上部署了 Django 应用程序。有什么方法可以浏览我的提交/源代码并将 Dotcloud 也用作版本控制系统？或者我仍然需要将我的代码存储在其他地方。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:38:51.663

[dotCloud](https://www.dotcloud.com/)并非旨在成为版本控制系统，因此建议您在开发代码时使用[hg](http://mercurial.selenic.com/wiki/)或[git等工具。](http://git-scm.com/)[BitBucket](https://bitbucket.org/)和[Github](https://github.com/)为这两种工具提供免费和付费的版本控制托管选项。

也就是说，使用[dotCloud 命令行工具](http://docs.dotcloud.com/guides/migration/)(CLI)，您可以查看最近的几个部署版本，并可以重新部署它们。然后，您可以 ssh 进入代码容器并查看部署的代码，但是您没有工具（例如 diff）来比较已部署版本之间的更改（您将使用真正的 vcs 获得）。

检查修订：

```
$ dotcloud revisions -A <application>
==> Revisions for application <application>:
  rsync-1361893583994
  rsync-1361894923509
  rsync-1361896157246
  rsync-1361896963821
* rsync-1361897866164 
```

部署以前的版本：

```
dotcloud deploy -A <application> rsync-1361893583994 
```

部署最新的（最近推送的）：

```
dotcloud deploy -A <application> latest 
```

SSH 进入容器以查看已部署的内容：

```
dotcloud run -A <application> <service name> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:33:19.547

You still need to store your code somewhere else.

dotCloud uses git and mercurial as a transport mechanism but you can't rely on it for long term storage or retrieval. It is best to store it on your own servers or someplace like github, bitbucket, etc.

If you need more info about dotClouds git and mercurial push features check out this page.

[http://docs.dotcloud.com/guides/git-hg/](http://docs.dotcloud.com/guides/git-hg/)

# android - 在我的应用程序中仅通过 URL 在 android 2.3 上播放 .flv 视频

> ID：15155411
> 
> 赞同：1
> 
> 时间：2013-03-01T10:25:23.353
> 
> 标签：android, video, flv

我想从 android 2.3 上的 URL 播放 .flv 视频 Android 默认播放器不支持 flv 格式。但是我需要在我的应用程序中使用而不使用第三方应用程序。

# jquery - 当从 jQuery.ajax 接收数据类型为“json”的帖子时，asmx 会跳过请求验证

> ID：15155413
> 
> 赞同：0
> 
> 时间：2013-03-01T10:25:27.783
> 
> 标签：jquery, asmx, request-validation

我有一个带有字符串参数的 ASP.NET Web 服务 (asmx) 函数。如果 dataType 未设置为 json (ValidateRequest="true")，则内置请求验证应捕获 HTML 标记，并且在使用自动生成的 localhost 测试页面或使用 jQuery 的 ajax/post 时有效。

With`dataType:"json"` `HttpRequestValidationException`没有被触发：

```
$.ajax({
    type: "POST",
    url: "/my.asmx/SetName",
    data: '{"name":"' + $("#name").val() + '"}',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false
}); 
```

如果我删除`contentType`并`dataType`得到预期的`HttpRequestValidationException`.

这让我的 ws 很脆弱。不幸的是，WCF 不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T03:51:40.937

这是设计使然。仅验证 HttpRequest 的 Path、PathInfo、RawUrl、Cookies、Form、QueryString 和 File。您也可以使用自定义请求验证器验证标头。

删除 contentType 时完成请求验证的原因是因为 JQuery 默认它`application/x-www-form-urlencoded`是一个表单帖子 (HttpRequest.Form)

# iphone - 检测设备上有多少应用程序处于运行模式

> ID：15155416
> 
> 赞同：0
> 
> 时间：2013-03-01T10:25:29.710
> 
> 标签：iphone, ios, objective-c

我正在开发一个应用程序，我必须检测是否有任何应用程序已经在设备上运行。我想要所有正在运行的应用程序的列表。我在这个主题上进行了研发，但我一无所获。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:29:47.220

我认为在非越狱应用程序中你不能这样做。

但是，对于越狱应用程序，您可以执行以下操作：[返回 iOS 中正在运行的后台应用程序/进程的列表](https://stackoverflow.com/questions/5906180/return-a-list-of-running-background-apps-processes-in-ios)

另外：[使用 sysctl 检测当前在 iOS 上运行的应用程序](https://stackoverflow.com/questions/12319817/detect-which-app-is-currently-running-on-ios-using-sysctl)

编辑：

由于 [iTunes](http://itunes.apple.com/us/app/sys-activity-manager-for-memory/)中的此应用程序与您需要的相同，因此您可以使用上述方法。

# objective-c - Ipad 应用程序崩溃，内存问题

> ID：15155418
> 
> 赞同：1
> 
> 时间：2013-03-01T10:25:31.983
> 
> 标签：objective-c

我对 Objective C 很陌生，这实际上是我的第一个应用程序......我正在开发一个包含项目列表的应用程序，每个项目都有自己的图像库，segues וarc。画廊占据了大约 90% 的屏幕，而一行缩略图占据了其余部分。

它在模拟器上运行正常，但是当我从一个画廊到另一个画廊时（有时在三到四次之后）应用程序崩溃（在真实设备上 - 带有 IOS 6 的 iPad2）。没有异常或错误，日志是干净的。当应用程序达到 350MB 的 RAM 时，它似乎崩溃了。

我相信在通过画廊之间没有记忆释放，即使我使用的是 בarc וsegues。

此外，在第一次进入每个画廊时，加载画廊需要几秒钟（仅在第一次运行时，如果我退出并重新进入同一个画廊，它会立即进入），这似乎进一步表明它保存在内存中.

我真的很喜欢任何想法，即使它很简单，因为这是第一个应用程序而且我不是很有经验。

感谢您的时间和帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:28:50.047

我不确定确切的原因是内存问题。但是当您处理项目中的大负载（数据）时，您必须考虑内存达到当时为应用程序分配的最大可达数据大小会发生什么。

感谢 API，当应用程序达到系统可以处理的最大数据大小时，您有一个回调方法。

`- (void)didReceiveMemoryWarning{`
// 在此方法中，您可以删除（释放）视图控制器使用的额外内存
// 在您的案例`UIImage`中画廊的对象。
`}`

您不能直接调用此方法。这是一种系统调用方法。但是当您在模拟器中调试时，您可以选择要求调用方法。（模拟器状态栏：-- `Hardware`> `Simulate Memory Warning`）。

文档[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

# mysql - 解决 INSERT 竞争条件 mysql，避免锁定

> ID：15155420
> 
> 赞同：2
> 
> 时间：2013-03-01T10:25:39.093
> 
> 标签：mysql, innodb

假设我有几个脚本发送（合法！）电子邮件。每个脚本处理更大列表的一部分，并且它们同时运行。在发送之前，必须检查每个地址以避免两次发送到同一地址。

为此，我创建了一个仅包含电子邮件地址的简单表（mysql 5.1，innodb）。如果它不在表中，则添加它，然后发送邮件。现在我需要避免多个脚本同时测试同一个地址并错误地断定它没有被发送到的竞争条件。我想我可以为此使用锁，但出于性能原因，我宁愿不这样做。

所以我想知道以下替代方案是否正确：

*   在地址列上添加唯一索引
*   只需插入地址，无需通过选择进行检查
*   trap mysql返回的错误码：如果是1062，则地址已经存在。

在这种设置中，是否还有可能出现竞争条件？我的意思是：是否仍然有可能两个几乎同时插入地址的脚本都得出邮件尚未发送的结论？或者我应该为此使用锁吗？

谢谢， 斯蒂恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:23:23.853

首先，我觉得数据库不是最好的地方。虽然您的更大列表正在发送电子邮件（由于您尝试瘫痪，我猜测规模非常大）您必须使用临时表，因为您不想限制向收件人发送不同的电子邮件以前的邮件。

在这里，缓存将是维护地址列表或充当共享内存资源的服务器的明显选择。

但是，您可以在数据库中执行此操作，并且根据我的理解，如果一个电子邮件地址多次存在并不是很重要，因为您所做的只是检查一个过去没有发送到该地址。如果没有锁定策略，您将无法真正控制多个脚本同时发送到同一地址的竞争条件。但是，您可以通过使用索引来提高效率。我不会索引实际地址，而是使用地址的 CRC32 哈希创建一个新列（它可以是一个 32 位无符号整数，只占用 4 个字节的内存）。由于生日悖论，使用 CRC32 方法您还必须检查查询中的电子邮件地址。

例如：

```
SELECT COUNT(*) FROM email_addresses
WHERE email_address_crc = CRC32(?address)
AND email_address = ?address 
```

拥有一些有效的东西应该有助于对抗竞争条件，但是正如我之前所说，保证它的唯一方法是在发送每封电子邮件时锁定数据库，这样你就可以维护一个准确的列表——不幸的是，这不能扩展和这意味着让并行任务发送电子邮件可能无济于事。

**编辑以回应以下评论：**

正如评论中指出的那样，我实际上忘记解决 svdr 的锁定解决方案替代方案。确实，如果地址存在，包含电子邮件地址的唯一索引（或包含活动 ID 和地址的复合索引）确实会引发 MySQL 异常，从而导致并行脚本发送到同一地址的有效解决方案同时。但是，如果在脚本“尝试”发送电子邮件之前输入地址，则很难处理任何异常，例如由于 SMTP 错误/网络问题而无法发送电子邮件，这可能会导致收件人收不到电子邮件。还提供了一个非常简单的 INSERT 和 SELECT 它应该可以捕获 MySQL 异常，

另一个考虑因素是，出于性能原因，电子邮件地址字段需要完全索引，如果使用 INNODB，则此限制为 767 字节——假设电子邮件地址的最大有效长度为 254（如果使用 VARCHAR，则长度为 +1 字节）如果你没有一些巨大的主键，你应该没问题。

索引性能也应该得到解决，并且应该评估 CHAR 与 VCHAR。CHAR 字段上的索引查找通常比等效的 VCHAR 查找快 15% - 25% - 固定宽度的表大小也可以根据使用的表引擎提供帮助。

总而言之，是的，您的非锁定解决方案可以工作，但应该根据您的确切要求仔细测试和评估（我无法评论具体细节，因为我认为您的现实生活场景比您的 SO 问题更复杂）。正如答案的第一行所述，我仍然认为数据库不是最好的地方，缓存或共享内存空间会更有效，更容易实现。

# c# - 排序列表是最好的解决方案吗？

> ID：15155421
> 
> 赞同：1
> 
> 时间：2013-03-01T10:25:41.643
> 
> 标签：c#, list, sorting

我正在为学校做一个项目，并试图决定我应该如何去做。

这是一个餐厅模拟。我生成一张桌子和等候方的随机列表。我随机安排了一些派对，有些派对没有在等候名单上。我希望有保留的各方拥有第一优先权。

是否对列表进行排序，以便所有有保留的各方都在一端，而没有另一端的一方是解决这个问题的好方法？

然后我可以评估列表，看看派对是否适合在桌子上，然后让他们入座或继续下一个派对。还是有更聪明的方法来解决这个问题？任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T10:29:10.850

```
var groupedParties = parties.GroupBy(p => p.HasReservation); 
```

这是迄今为止我看到的最干净的方式。你会得到一个包含两个组的列表，一个包含没有的缔约方，一个包含有保留的缔约方。您现在可以分别处理不同类型的等候派对的座位。

## 编辑

```
static void Main(string[] args)
{
    GenerateRandomDataSomehow();
    var groupedParties = _parties.GroupBy(p => p.HasReservation)
    SeatParty(groupedParties.FirstOrDefault(g => g.Key == true));
    SeatParty(groupedParties.FirstOrDefault(g => g.Key == false));
}

private static void SeatParty(IEnumerable<Party> partyGroup)
{
    if (partyGroup == null) return;

    foreach (var party in partyGroup.OrderBy(p => p.ArrivalTime))
    {
        var properTable = _tables.FirstOrDefault(t => t.SeatsCount == party.PersonsCount &&
                                                      t.Party == null);
        if (properTable == null) continue;
        properTable.Party = party;
    }
} 
```

这是一个带有更多 LINQ 的非常简单的实现。选择标准需要适当扩展。在此表中，如果没有其他方坐在此表上，则将其评估为“适当”，但如果人数准确，则相应表的座位数。如果找不到合适的表，则跳过该组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T10:45:50.377

您可能希望使用[Queue](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)或类似队列的构造而不是 List 来为您的餐厅建模，并采用不同的方法。这样，您将按照人员到达的顺序存储人员，因此无需进行排序。

将人员分组到一个 Party 对象中。当派对到达时，您可以将它们添加到队列中。然后，您可以查看队列，如果一方有预订，您可以将其从队列中删除并将其发送到他们的餐桌。如果该聚会没有预订，那么您检查是否有桌子可供该大小的聚会使用，如果有，则将该聚会从队列中移除。

否则，您可以等到 Table 可用；当该事件发生时，您可以再次排队，寻找适合餐桌大小的派对。您还可以在此时检查队列中是否包含有预订的派对，这意味着他们优先 - 用于`Queue.First(x => x.HasReservation && x.Size <= Table.Places)`从队列中获取第一组有预订并且可以坐在桌子上的人**。否则，`Queue.First(x => x.Size <= Table.Places)`将让您排在队列中的第一批适合坐在桌子旁的人。

使用队列的优点是不需要排序，您可以按照到达的顺序处理多人，优先考虑有预订的人。

您在两点检查队列：

1.  当人们到达时（他们是否有预订，是否有空位）
2.  当有空位时 - 首先在队列中寻找已预订并能够坐到餐桌上的人；如果没有匹配，则从队列中取出与桌子大小匹配（或可以放在桌子上）的第一组人

这是一个很好的起点。

更新

正如您所发现的，您无法从队列中间移除项目。这是因为队列是先进先出 (FIFO) [与堆栈相反，堆栈是后进先出 - LIFO]。为了避免排序，您可以使用具有类似语义的队列的列表 -[这个答案](https://stackoverflow.com/questions/1594375/is-there-a-better-way-to-implement-a-remove-method-for-a-queue)中有一个很好的例子。

** 这里还有另一个有趣的排队问题——效率问题。如果有 4 个位置的桌子可用，你会怎么做？把它给第一个到达的适合在桌子上的一方，或者给它在队列中适合在桌子上的最大的一方。显然，第一个选项最适合客户服务，因为您坐着等待时间最长的人，但第二个选项可以最大化您的利润，因为您可以更充分地利用桌子:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T10:30:30.373

如果要对列表进行排序：

使用`Enumerable.OrderByDescending`,`ThenByDescending`

```
var ordered = parties.OrderByDescending(p => p.HasReservation)
                     .ThenByDescending(p => p.PersonCount);
// if you want a new list use ordered.ToList()
foreach(var party in ordered)
{
    // ...
} 
```

如果要对原始列表进行排序，可以使用[`List<T>.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)自定义委托：

```
parties.Sort((p1, p2) =>
{
    if (p1.HasReservation != p2.HasReservation)
        return p1.HasReservation ? 1 : -1;
    else
        return p1.PersonCount.CompareTo(p2.PersonCount);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T15:38:01.240

我会简单地使用两个队列（假设您的各方由一个名为`Party`. 的类型表示。适当地更改类型）：

```
Queue<Party> withReservation = new Queue<Party>();
Queue<Party> withoutReservation = new Queue<Party>(); 
```

您可以像这样将派对添加到队列中：

```
if (party has reservation) { // (condition in pseudo code)
    withReservation.Enqueue(party);
} else {
    withoutReservation.Enqueue(party);
} 
```

你会坐在这样的派对上：

```
if (withReservation.Count > 0) {
    Seat(withReservation.Dequeue());
} else if (withoutReservation.Count > 0) {
    Seat(withoutReservation.Dequeue());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T10:30:34.430

在这种情况下，使用`System.Linq`可能是您对列表进行排序的最佳选择。

就像是：

```
var sorted = tables.OrderByDescending(o => o.IsReserved); 
```

# sqlite - 在 windows mobile 6 上寻找具有紧凑框架的工作 SQLLite.Data 和互操作 dll

> ID：15155423
> 
> 赞同：0
> 
> 时间：2013-03-01T10:25:43.130
> 
> 标签：sqlite, connection, compact-framework, windows-mobile-6.5

谁能提供我，在紧凑框架上为 sqllite 工作的 DLL，

从论坛中我发现，一些构建对于紧凑框架有错误，我无法编译 c 和 c++ 二进制文件。

因此，如果有人为我提供 SQLlite.data 和 SQLite.Interop 的工作 dll，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:23:22.467

[我在其中一个 OpenNETCF ORM 实现](http://orm.codeplex.com/SourceControl/changeset/view/101801)中使用 SQLite，它在 WinMo 上进行了测试，所以 SQLite.Interop.dll 和 System.Data.SQLite.dll 在源代码中（在 下查看`OpenNETCF.ORM.SQLite\references\CF35`）。

# java - 从 JButton 按下动作侦听器返回字符串？

> ID：15155424
> 
> 赞同：0
> 
> 时间：2013-03-01T10:25:43.167
> 
> 标签：java, swing, jframe, jbutton, output

我已经尝试了一段时间来获得一个 JButton 我必须返回一个字符串并且我让它在一定程度上工作但是它只在我使用 System.out.println() 方法时才有效。

**我的相关代码：**

```
private String answer;

public void inputDataButton(JButton inButton)
{
inButton.addActionListener(new Action1());
}

public String returnAnswer()
{
return answer;
}

private void fileAnswer(String inString)
{
answer = new String(inString);
}

public class Action1 implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        String sub = JOptionPane.showInputDialog("Input The Date");
        fileAnswer(sub);
    }
} 
```

**用我的主要控制它：**

```
public class test
{
    protected static JTextField text;

    public static void main(String[] args)
    {
    javaUI base = new javaUI("Date Killer", 800, 800);

    JLabel label = new JLabel("Place Holder");
    base.addLabel(label, 1, 0, false);

    JButton button = new JButton("Press Here");
    base.addButton(button, 0, 0, false);

    String str = "EMPTY";

    base.inputDataButton(button);

    while (str == "EMPTY")
        {
        str = base.returnAnswer();
        }

    System.out.println(str + " TEST");
    label.setText(str + "SETTED");
    }
} 
```

JavaUI 只是另一个类，它简化了标签、按钮等的整个 JFrame 和 Jpanel 设置。

无论如何，这是我的问题。在主类中，在 while 语句中，*如果我后面直接有 System.out.println() 语句，则 str 被成功设置为字符串。* 这显然会使终端变得一团糟，因为它会重复“EMPTY”100 多次，直到按下按钮。

但是，如果我删除该语句，则显然不会打印任何内容，但 str 也从未设置为 str 。

我已经搞砸了很长一段时间（所有java UI的新东西，主要只是在计算部分工作）而且我还没有找到一个不会弄乱我的终端的工作解决方案. 感谢大家的帮助！！！

凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:11:43.400

1）使用循环“等待”动作发生有点奇怪。您可以查看您的 cpu 使用情况，如果它永远循环，它可能会死机。

2）此外，无论您的按钮是否被单击，该方法都会返回 - 在动作发生之前，该方法会`null`根据您的代码返回一个字符串。而在你的主要方法中，`str == "EMPTY"`第一轮之后很快就会变成假的。然后您会在屏幕上看到“null TEST”。

* * *

尝试将`while`循环后的代码放入`actionPerformed`方法或`fileAnswer`方法中并删除循环：

```
public void actionPerformed(ActionEvent e)
{
    String sub = JOptionPane.showInputDialog("Input The Date");
    System.out.println(sub + " TEST");
    label.setText(sub + "SETTED");
} 
```

另外，我不确定你为什么打电话给`answer = new String(inString)`. 如果你想将它分配给另一个变量，你只需要调用，`answer = inString`因为 String 是不可修改的。在这种情况下，你不要这样做。

# objective-c - Mac OS X：拦截键盘布局更改

> ID：15155429
> 
> 赞同：6
> 
> 时间：2013-03-01T10:25:51.427
> 
> 标签：objective-c, c, macos, cocoa, keyboard-shortcuts

我有个问题。我的 Mac 中有两种键盘布局，因为我必须在与不同的人交流时输入两种不同的语言。我使用键盘快捷键`Cmd+Space`从一种布局（语言）切换到另一种布局。

我想知道我是否可以在`Cmd+Space`按下时运行自定义脚本？我知道有一个名为[Punto Switcher](http://punto.yandex.ru/mac/)的应用程序可以做到这一点。

我的想法是更改键盘突出显示级别以指示当前语言。

*   Bright = 德语（或俄语或其他）
*   昏暗 = 英语

问题是在哪里可以找到可以

1.  在 Mac OS X 中截取键盘布局
2.  改变键盘高亮的亮度

![在此处输入图像描述](../Images/88545b0e73119b397fa526e5822010c7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T01:24:01.063

来自@Anoop Vaidya 的指向 LED 亮度的简洁指针——看起来很有趣！

当输入法发生变化时，系统会发送通知。

首先，声明一个函数来接收通知：

```
void theKeyboardChanged(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {
    NSLog(@"Keyboard/input method changed.");
} 
```

然后注册更改通知：

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDistributedCenter(),
    myContextInfo, theKeyboardChanged,
    kTISNotifySelectedKeyboardInputSourceChanged, NULL,
    CFNotificationSuspensionBehaviorDeliverImmediately); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:29:07.150

我找到了 Amit Singh 的博客，他在未记录的 API 中给出了想法，他使用了 C，为此，您肯定可以从中找到某种帮助。

[用光做实验](http://www.osxbook.com/book/bonus/chapter10/light/)。

或者您可以尝试使用以下代码：

```
UInt64 lightInsideGetLEDBrightness(){
    kern_return_t kr = 0;
    IOItemCount   scalarInputCount  = 1;
    IOItemCount   scalarOutputCount = 1;
    UInt64        in_unknown = 0, out_brightness;
    kr = IOConnectCallScalarMethod(dataPort, kGetLEDBrightnessID, &in_unknown, scalarInputCount, &out_brightness, &scalarOutputCount);
    return out_brightness;
} 
```

# jboss7.x - 如何确保 Jboss 安装和配置良好？

> ID：15155432
> 
> 赞同：0
> 
> 时间：2013-03-01T10:26:14.147
> 
> 标签：jboss7.x

我正在使用eclipse indigo，并且我之前安装了Jboss Server。尽管一切都很好；但是，例如，当我在 JSP 页面上单击鼠标右键时，没有“部署”，如果我要部署整个项目......同样的事情我不能这样做，因为没有“部署”选项。如果我完成所有这些并执行“运行方式”->“在服务器上运行”，我会收到一个 http 404 错误，说明请求的资源不可用。我的日食中有 Jboss，有什么理由知道 Jboss 安装得很好？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:04:45.343

检查 JBoss 7 是否正在运行的最简单方法是访问本机管理界面。
通常它绑定到 9999 端口。
为了验证端口，在standalone.xml（standalone-full.xml 或您使用的任何配置）中查找管理本机接口套接字绑定的端口属性
对于本地主机，它将是：
`http://localhost:9999`

检查 JBoss 7 状态的另一种方法是使用管理控制台。
通常它绑定到 9990 端口。
为了验证端口，在standalone.xml（standalone-full.xml 或您使用的任何配置）中查找管理HTTP 接口套接字绑定的端口属性。
对于本地主机，它将是：
`http://localhost:9999`

此外，您可以检查所谓的标记文件。
只需转到部署目录并查找 .deployed 文件（如果该文件存在，则表示您的应用程序已成功部署）。
您可以在以下位置阅读有关部署描述符的更多信息：
[https ://docs.jboss.org/author/display/AS7/Application+deployment](https://docs.jboss.org/author/display/AS7/Application+deployment)

# sass - 缩放所有指南针精灵

> ID：15155437
> 
> 赞同：1
> 
> 时间：2013-03-01T10:26:28.063
> 
> 标签：sass, compass-sass

是否有标准方法来缩放由指南针创建的所有精灵？也就是说，有一个图像是我需要的分辨率的两倍，我希望该图像中的所有精灵都具有大小。目前我可以通过迭代加载的精灵并设置`background-size`和修改`background-position`.

为了清楚起见，例如，如果我使用正常大小的精灵，我会这样做：

```
@import "settings/*.png";
@include all-settings-sprites; 
```

但要获得双倍大小的精灵，我必须这样做：

```
@import "icons/*.png";
@include retina-sprites($icons-sprites); // retina sprites

@mixin retina-sprites($map) {
    $base-class: sprite-map-name($map);

    .#{$base-class}-all-retina-sprites {
      background-image: sprite-url($map);
      @include background-size(ceil(image-width(sprite-path($map)) / 2) auto);
    }

    @each $sprite in sprite-names($map) {
      .#{$base-class}-#{$sprite} {
        @extend .#{$base-class}-all-retina-sprites;

        $position: sprite-position($map, $sprite);
        background-position: nth($position, 1) nth($position, 2) / 2;
      }
    }
} 
```

我希望有一种更简单或标准的方法来做到这一点。当我尝试在其他地方的 CSS 文件中包含单个精灵时，问题变得更糟，因为我不能使用任何标准定义。

# objective-c - 如何为 CLLocationCoordinate2D 使用桥接

> ID：15155451
> 
> 赞同：0
> 
> 时间：2013-03-01T10:27:06.833
> 
> 标签：objective-c, struct, cllocation, bridge

AM 试图将 CLLocationCoordinate2D[] 添加到 NSMutableArray 并将其作为参数发送。但是 (__bridge id) 正在使应用程序崩溃。结构到 id 的转换是问题所在。任何人都可以请让我知道如何使用它。

CLLocationCoordinate2D坐标[1000];

坐标[索引] --- 所有在循环中添加到它的坐标。

```
NSMutableArray *coorArray = [NSMutableArray array];
[coorArray addObject:(__bridge id)(coordinates)]; crashes here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:53:18.937

您不应该看`+[NSValue valueWithBytes:objCType:]`(__bridge) 演员表。桥是为了其他事情。

例如： `[NSValue value:&coordinate withObjCType:@encode(CLLocationCoordinate2D)];`

我想也可以对整个数组进行编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:53:59.740

采用：

```
NSMutableArray *coorArray = [NSMutableArray array];
[coorArray addObject:[NSValue valueWithPointer:coordinates]]; 
```

然后当你想检索结构数组时：

```
CLLocationCoordinate2D coordinates[] = [coorArray objectAtIndex:0].pointerValue; 
```

交流阵列不是对象，因此不能桥接。

# html - HTML 源代码中的空行对 seo 不利？

> ID：15155452
> 
> 赞同：3
> 
> 时间：2013-03-01T10:27:07.460
> 
> 标签：html, seo, removing-whitespace

我更喜欢清楚地写我的 HTML，所以我可以在这里和那里使用空行 - 例如：

```
<div>

    <!-- Seasons -->
    <table class="giantTable">
        ...
    </table>

    <!-- Prices -->
    <table class="giantTable">
        ...
    </table>

</div> 
```

今天我的新同事告诉我，这对 SEO 不利，因为 Google 需要更多时间来解析网站，并且可能会因超时而中止。

我从来没有听说过这个，我真的要再写一次Spaghetti-Code吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:32:45.957

谷歌确实使用[页面加载和渲染时间](http://googlewebmastercentral.blogspot.com/2010/04/using-site-speed-in-web-search-ranking.html)作为一个指标（超过 200 个！）来确定你的页面排名，所以在某种程度上你的同事是对的（尽管超时不是问题——他错了）。

但是，您可以两全其美 :) 像往常一样编写 HTML，然后在部署之前将其[缩小。](http://code.google.com/p/htmlcompressor/)

请注意，有许多工具可用于分析您的网站性能（在线和作为浏览器插件 - 例如 YSlow），这是一件非常明智的事情。您的网站可能会遇到许多瓶颈，并且通常可以获得一些快速的胜利，从而显着提高您网站的响应能力。

与往常一样优化 - 先测量！*在测量瓶颈并确认改进是*一种改进之前，不要随意实施假设的改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:36:42.970

情绪并没有完全消失。Google 现在确实将您的页面速度视为一个因素，并且代码中过多的空白会增加有效负载大小。谷歌自己建议缩小你的代码（[https://developers.google.com/speed/docs/best-practices/payload#MinifyHTML](https://developers.google.com/speed/docs/best-practices/payload#MinifyHTML)），这可以在网络服务器上没有太多开销的情况下完成。

我发现动态网站的最大罪魁祸首来自在 for/while 循环中间使用大量空间，因此减少它可以产生很大的不同。此外，尝试使用制表符而不是空格，你会大大减少你的空白。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T10:37:11.123

即使这是真的（我以前从未听说过，但是上面的 RB 点是一个很好的观点），还有许多其他因素对您的页面排名的贡献比这更多。

谷歌制作了一个很棒的 SEO 指南，我经常查看它，它真的很漂亮，也很容易阅读，还有机器人的所有图片。它绝对值得一试 - [Google SEO Guide](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T10:32:03.553

一点也不坏，他们忽略了空白。否则每个人都会试图在一行上编写代码

[http://jamesmartell.com/matt-cutts/is-excessive-whitespace-in-the-html-source-bad/](http://jamesmartell.com/matt-cutts/is-excessive-whitespace-in-the-html-source-bad/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T10:34:34.877

[本文档](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide.pdf)描述了如何为 Google 做 SEO（内容相当广泛）。第一眼浏览所有页面并没有说明压缩 HTML 的**任何内容。**

# ruby - 需要 Ruby 方法帮助

> ID：15155455
> 
> 赞同：0
> 
> 时间：2013-03-01T10:27:12.463
> 
> 标签：ruby, metaprogramming

我正在阅读 Metaprogramming Ruby 书，并且有一些我无法理解的方法：

```
def to_alphanumeric(s)
  s.gsub /[^\w\s]/, ''
end 
```

我看到有参数变量（s），它最近被调用并转换为一些奇怪的表达式？我到底能用这种方法做什么，他有用吗？

以下方法工作得很好：

```
def to_alphanumeric(s)
  s.gsub %r([aeiou]), '<\1>'
end

p = to_alphanumeric("hello")
p p
>> "h<>ll<>" 
```

但是如果我将方法升级到类，只需调用方法+ argv to_alphanumeric，就不再起作用了：

```
class String 
  def to_alphanumeric(s)
    s.gsub %r([aeiou]), '<\1>'
  end
end
p = to_alphanumeric("hello")
p p
undefined method `to_alphanumeric' for String:Class (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:00:38.740

看一下[Rubular](http://www.rubular.com/)，正则表达式`/[^\w\s]/`匹配特殊字符，如 ^、/ 或 $，它们既不是单词字符 (\w) 也不是空格 (\s)。因此，该函数会删除特殊字符，如 ^、/ 或 $。

```
>> "^/$%hel1241lo".gsub /[^\w\s]/, ''
=> "hel1241lo" 
```

像函数一样简单地调用它：

```
>> to_alphanumeric("U.S.A!")
=> "USA" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:31:12.147

检查文档会不会很痛苦？

[http://www.ruby-doc.org/core-2.0/String.html#method-i-gsub](http://www.ruby-doc.org/core-2.0/String.html#method-i-gsub)

> 返回 str 的副本，其中所有出现的模式替换为第二个参数。

/[^\w\s]/ 模式的意思是“所有不是单词或空格的东西”

# routing - 使用 AngularJS 路由并使用 requirejs 按需加载控制器

> ID：15155457
> 
> 赞同：13
> 
> 时间：2013-03-01T10:27:13.430
> 
> 标签：routing, angularjs, requirejs

我正在尝试结合使用 AngularJS 和 RequireJS。我想使用该`$routeProvider`服务并避免在应用程序启动时为我的视图加载所有控制器。为此，我尝试了以下方法：

```
define(['require', 'angular', 'appModule'], function (require, angular, app) {
    app.config(['$routeProvider', function($routeProvider) {
      $routeProvider
          .when('/sites', {templateUrl: '/Site/GetSitesView', controller: function() {
            require(['sitesController'], function(SitesController) {
                return new SitesController();
            })
        }})
    }]);
}); 
```

不幸的是，这对我不起作用。没有错误。包含控制器的 JS 文件正在正确加载，但我在渲染视图中看不到数据绑定值。我想知道是否可以`controller`以其他方式分配值，以等待异步调用（加载 JS 文件）完成。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-29T11:46:03.090

你可以在**[这里找到解决方案](http://weblogs.asp.net/dwahlin/archive/2013/05/22/dynamically-loading-controllers-and-views-with-angularjs-and-requirejs.aspx)**

您需要在每个路由上定义一个解析属性，并为其分配一个返回承诺的函数。该函数可以动态加载包含目标控制器的脚本，并在加载完成后解析promise。在[本文中](http://weblogs.asp.net/dwahlin/archive/2013/05/22/dynamically-loading-controllers-and-views-with-angularjs-and-requirejs.aspx)，**Dan Wahlin**展示了如何使用约定优于配置来获得更实用的路由。

# java - MATLAB UI 界面和编码问题

> ID：15155458
> 
> 赞同：0
> 
> 时间：2013-03-01T10:27:13.493
> 
> 标签：java, matlab, matlab-guide

我在我的 MATLAB 程序中遇到了这个问题。我想`set`在编码期间对我的 UI 执行操作。换句话说，我正在按下一个按钮来启动我的代码，同时我想更改一些`uicontrol`s. 我试过了`pause`，`wait`但没有运气。我很确定 MATLAB 优先考虑我的编码部分而不是 Java 接口。

有人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:55:04.933

感谢尼克我解决了添加

```
waitnow; pause(.1); 
```

伙计们，难以置信，这在 linux/OSX 上工作，但在 Windows 下不工作..这太奇怪了

# python - zip(*[iter(s)]*n) 的反面

> ID：15155459
> 
> 赞同：2
> 
> 时间：2013-03-01T10:27:15.120
> 
> 标签：python, iterator

`zip(*[iter(s)]*n)`使用成语巧妙地将列表分成相等的块。有没有很好的撤消方法？

例如，如果我有以下代码：

```
>>> s = [3,4,1,2]
>>> zip(*[iter(s)]*2)
[(3, 4), (1, 2)] 
```

是否有一些函数`func([(3,4),(1,2)]`可以`[3,4,1,2]`作为输出产生？

编辑：

时间和更多解决方案可以在下面由 Dominic Kexel 链接的问题中找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:29:24.717

有[`itertools.chain.from_iterable`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)

```
>>> import itertools
>>> s = [(3, 4), (1, 2)]
>>> list(itertools.chain.from_iterable(s))
[3, 4, 1, 2] 
```

但是，您也可以使用嵌套列表推导。

```
>>> s = [(3, 4), (1, 2)]
>>> [i for sub in s for i in sub]
[3, 4, 1, 2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:29:35.737

您可以使用减少：

```
>>> import operator
>>> reduce(operator.add, [(3,4),(1,2)])
(3, 4, 1, 2) 
```

# ruby-on-rails - Ruby on rails，加快数据库搜索的方法

> ID：15155461
> 
> 赞同：0
> 
> 时间：2013-03-01T10:27:23.513
> 
> 标签：ruby-on-rails, database-performance, sqlite3-ruby

我有具有以下字段的表产品：代码 - 字符串，id - 整数

我的表有超过 500 万行。

在模型中我使用代码：

```
find(:all, :conditions => ['code = ?', "#{search}"]) 
```

查找结果需要 2 秒。
有什么办法可以减少搜索时间？

我正在使用 rails 3.2.11、ruby 1.9.3 和 sqlite3 作为数据库

**UPD**
更改型号代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:07:55.387

我设法找到了答案。刚刚添加

```
add_index :products, :code 
```

迁移变化，现在它的工作速度非常快。你会[在这里找到更多信息](https://tomafro.net/2009/08/using-indexes-in-rails-index-your-associations)

# ios - 适用于 iOS 和 libc++ 的 Google Maps SDK

> ID：15155464
> 
> 赞同：4
> 
> 时间：2013-03-01T10:27:33.943
> 
> 标签：ios, libstdc++, libc++, google-maps-sdk-ios

在我们的项目中，我们使用在其实现中非常紧密地使用 libc++ 的库。当我们添加 Google Maps SDK 时，我们得到了链接错误：

```
Undefined symbols for architecture i386:
 "std::string::_Rep::_M_destroy(std::allocator<char> const&)", referenced from:
     gmscore::utils::gmsutils::StringPrintf(char const*, ...) in GoogleMaps(GMSUtils.o)
     _GMS_objc_lookUpClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getProtocol in GoogleMaps(GMSRenames.o)
     gmscore::vector::CameraPosition::StringValue() const in GoogleMaps(CameraPosition.o)

 "std::string::_Rep::_S_empty_rep_storage", referenced from:
     gmscore::utils::gmsutils::StringPrintf(char const*, ...) in GoogleMaps(GMSUtils.o)
     _GMS_objc_lookUpClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getProtocol in GoogleMaps(GMSRenames.o)
     gmscore::vector::CameraPosition::StringValue() const in GoogleMaps(CameraPosition.o)
     gmscore::utils::gmsutils::StringPrintf(char const*, ...) in GoogleMaps(GMSUtils.o)
     _GMS_objc_lookUpClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getProtocol in GoogleMaps(GMSRenames.o)
     gmscore::vector::CameraPosition::StringValue() const in GoogleMaps(CameraPosition.o)
     gmscore::utils::gmsutils::StringPrintf(char const*, ...) in GoogleMaps(GMSUtils.o)
     _GMS_objc_lookUpClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getClass in GoogleMaps(GMSRenames.o)
     _GMS_objc_getProtocol in GoogleMaps(GMSRenames.o)
     gmscore::vector::CameraPosition::StringValue() const in GoogleMaps(CameraPosition.o)

 "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&)", referenced from:
     gmscore::utils::gmsutils::StringPrintf(char const*, ...) in GoogleMaps(GMSUtils.o)
     gmscore::model::Point2D::StringValue() const in GoogleMaps(Point2D.o)

 "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&)", referenced from:
     gmscore::utils::gmsutils::StringPrintf(char const*, ...) in GoogleMaps(GMSUtils.o)
     gmscore::vector::CameraPosition::StringValue() const in GoogleMaps(CameraPosition.o) 
```

发生这种情况是因为 google maps sdk 使用 libstdc++ 库，但我们无法更改使用 libc++ 的代码。我们尝试将使用 libc++ 的代码和库封装在静态库 (*.a) 中，但没有成功。有机会让事情发挥作用吗？也许，可以将 Google Maps SDK 与 libc++ 链接起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:17:02.743

您看到的未定义符号是与 libstdc++ 关联的符号。libstdc++ 和 libc++ 在很大程度上是 ABI 不兼容的，即使它们呈现给您（很大程度上）相同的 API。

在已知 ABI 不兼容的地方，例如`std::string`，libc++ 使用不同的处理方案，以便在运行时不会意外混合 libstdc++ 和 libc++ 字符串（这会导致难以调试的运行时错误）。

如果您看到`std::__1`名称中有符号，那么这些符号就是与 libc++ 相关的符号，例如 libc++ 具有`std::__1::basic_string<...`，其中 libstdc++ 具有`std::basic_string<...`。

您可以使用这种修改知识来帮助您确定哪些库需要 std::lib 的哪些实现。

提交您所做的功能请求是您能做的最好的事情，感谢您这样做！:-)

# python - 装饰器和错误函数（）参数 1 必须是代码，而不是 str

> ID：15155466
> 
> 赞同：1
> 
> 时间：2013-03-01T10:27:38.207
> 
> 标签：python, decorator

我有下一个代码

```
def timer_dec(f):
    def wrapper(*args, **kwargs):
        t = time.time()
        args[0].debug('<{}> start'.format(f.__name__))
        res = f(*args, **kwargs)
        args[0].debug('<{}> finish'.format(f.__name__))
        args[0].debug("Working time for function <%s>: %f" % (f.__name__, time.time() - t))
        return  res

    return wrapper 
```

这很好用：

```
@timer_dec
class A(object):
  pass 
```

但这不起作用：

```
@timer_dec
class A(object):
  pass

class B(A):
  pass 
```

> TypeError：调用元类基础函数（）参数1时出错必须是代码，而不是str
> 
> Python版本是2.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:32:40.307

您似乎将函数装饰器用作类装饰器。

```
@timer_dec
class A(object):
  pass 
```

相当于

```
class A(object):
  pass
A = timer_dec(A) 
```

因为`timer_dec`返回一个函数，`A`现在是一个函数。

* * *

您可以创建一个类装饰器，将函数装饰器应用于类的所有方法。请参阅此处以获取示例：[Alex Martelli 对将 python 装饰器应用于类中的方法的回答](https://stackoverflow.com/a/2238076/222914)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:31:37.760

您的装饰器正在返回一个函数。因此，在装饰器调用之后，名称“A”被绑定到一个函数，而不是一个类。然后，您尝试从函数 A 继承 B，这是非法的。

# ios - NSDictionary objectForKey 返回错误值

> ID：15155467
> 
> 赞同：0
> 
> 时间：2013-03-01T10:27:42.910
> 
> 标签：ios, json, object, key, nsdictionary

我正在尝试使用从我的服务器作为 JSON 响应获得的字典。当我打印字典的描述时，一切都井井有条

```
 Printing description of dict:
{
    category = 1;
    code = 1;
    name = "xxxx";
    pictureUrl = "xxxx";
    sessionId = xxx;
    status = 0;
} 
```

我需要“code”值，当我使用 objectForKey:@"code" 来获取它时，我得到了一个错误的值：

```
int code = [NSDictionary objectForKey:@"code"]; 
```

在此之后，我打印出代码的值及其类似 3483765348 的内容，这是非常非常错误的。

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:31:39.377

返回的对象是 NSNumber 而不是 int（它不是对象）。如果你想要 int 值试试这个

```
int code = [[myDictionary objectForKey:@"code"] intValue]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T10:49:39.737

尝试使用以下代码来解决您的问题。根据您的代码，它只返回值，您必须将其转换为 int 值。使用这段代码

```
int code = [[NSDictionary objectForKey:@"code"]intValue]; 
```

希望这可以帮助 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:30:58.727

`-objectForKey:`不返回一个`int`，而是一个对象（在你的类型的情况下`NSNumber`）。

```
NSNumber *code = [myDict objectForKey:@"code"];
NSInteger codeInteger = [code integerValue]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:31:09.480

```
int code = [[yourResultingDictionary objectForKey:@"code"] intValue]; 
```

我想这会对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T10:53:54.240

对象键仅返回数组值，因此您将使用值作为键路径。

```
user_idstr = [tweet valueForKeyPath:@"properties.user_id"]; 
```

# iphone - NSURL 连接警告“未使用的变量”

> ID：15155472
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:28:02.303
> 
> 标签：iphone, ios, objective-c, xcode

我正在从如下所示的 NSURL 连接获取数据。该代码有效，但我收到一个编译器警告，上面写着“未使用的变量 strResult”。

**我实际上不需要使用返回的内容。我只需要执行 URL。**

我该如何修改它以消除警告？

```
NSString *strURL = [NSString stringWithFormat:@"http://www.site.com/file.php?id=%@", id];

NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL 
encoding:NSUTF8StringEncoding]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:31:44.877

您已经在变量中初始化并分配了数据，`strResult`但您没有使用该变量。

所以使用那个变量或者只是`NSLog@("%@",strResult)`

我建议如果变量没有用，那么删除它占用内存的变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:32:45.933

`strResult`声明即警告后，您没有使用任何地方。只需登录它，您就会看到警告消失。

```
NSString *strResult = [[NSString alloc] initWithData:dataURL 
encoding:NSUTF8StringEncoding];
NSLog(@"%@", strResult); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T12:26:17.037

使用`NSURLConnection`并调用它的静态方法：

```
[NSURLConnction sendSynchronousRequest:.....] 
```

如果您想发送异步请求，请使用：

```
[NSURLConnection sendAsynchronusRequest:....] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:30:25.673

编译器只是通知您创建了一个变量并且您还没有使用它（还）..所以最好的解决方案是使用它作为方法的返回值。这将有助于查看相关方法的完整实现以更好地帮助您。

希望这能澄清警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T10:30:27.547

您会收到该警告，因为您的代码中没有任何地方实际使用`strResult`.

使用它，警告就消失了 :) 或者，如果您实际上不需要响应，请删除该语句。

# jakarta-ee - JPA 中的可选持久性单元（使用多个持久性单元时）

> ID：15155475
> 
> 赞同：1
> 
> 时间：2013-03-01T10:28:06.237
> 
> 标签：jakarta-ee, jpa, java-ee-6, jndi, persistence-unit

JPA 是否支持可选的持久性单元，如果支持，我该如何配置？

我确实有一个持久性单元，它是我的主数据库。

然后我配置了另一个，我只是从数据库中读取对象来做一些检查。为了避免弄乱多个数据源上的事务，我设置了第二个数据源`jta="false"`。

但是我希望能够检查是否定义了第二个数据源，并且只有在它存在时才使用它。如果未定义，我想简单地跳过我的检查。

问题是我找不到如何使它成为可选的。如果没有配置第二个数据源，我会`New missing/unsatisfied dependencies`在部署我的战争时从 Jboss 中的部署扫描器中收到错误消息：

```
service jboss.naming.context.java.secondDatasource (missing) dependents: [service jboss.persistenceunit."de.my.war#secondDatasource"] 
```

（顺便说一句：我正在使用 JBoss 7.1.0 并在 standard.xml 中配置了数据源 - 如果该信息有任何相关性。）

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:30:00.410

我不确定 XML 配置是否可行，这基本上是在大多数情况下应如何使用 JPA 的约定。尝试寻找一种程序化的方法。

也许您可以以编程方式将数据源查找为 JNDI 资源，如果找到，您可以自己[构建一个 EntityManager](https://stackoverflow.com/questions/9315593/how-can-i-make-a-jpa-application-access-different-databases)。[在CDI](http://docs.oracle.com/javaee/6/tutorial/doc/giwhl.html)的帮助下，它甚至可能没有您想象的那么困难。

```
@Produces
@MyAlterNativeEntityManager
public EntityManager getEntityManager {
    EntityManager entityManager = null;
    if(jndiLookupMySecondDatasource()){
       entityManager = buildEntityManagerProgrammatically(...);
    }
    return entityManager;
} 
```

当然，如果找不到数据源，则会返回一个空的 EntityManager，但是在调用代码中，您可以简单地检查它是否已初始化并仅在初始化时使用。希望这有助于使您走上正确的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:28:08.677

在 JPA 标准中：

*   每个 EntityManagerFactory (EMF) 必须与一个 PersistentUnit (PU) 相关 - 不可能有多个 PersistenceUnits 也不可能有零个 PersistenceUnits。
*   每个 EntityManager (EM) 实例都是从 EMF 创建的，因此也有一个 PU。当然，可以从一个 EMF 创建多个 EM，所有这些都使用相同的 PU。
*   可以使用硬编码配置针对每个 EMF 显式使用的 PU

    EntityManagerFactory emf = Persistence.createEntityManagerFactory("EmployeeService");

    或通过使用注释注入 EMF

    @PersistenceUnit("EmployeeService") EntityManagerFactory 电动势；

    或者可以将其留空，只需选择在 persistence.xml 中配置的默认 PU。

*   可以通过使用注解注入 EM 来配置对每个 EM 显式使用的 PU。这里的代码根本没有引用 EMF（让容器不可见地引用 EMF）

    @PersistenceContext(unitName="EmployeeService") EntityManager em;

在所有这些中，可选 PU 的想法没有任何意义。如果您使用的是 JPA EM，则必须提交到 PU。

选项：

1.  编辑 persistence.xml 以在两个不同的物理数据库实例之间具有相同的逻辑持久性单元“切换”。不满足全部要求 - 仍会从替代数据源读取值。
2.  根据 Balazs Maria Nemeth 的解决方案，查找/注入环境变量（“调试”与否）并以编程方式在不同的数据源之间切换。不满足全部要求，因为它仍会从备用数据源读取值。
3.  查找/注入环境变量（“调试”与否）并适当地为您的替代 EM 运行/排除代码。

3 是唯一满足全部要求的选项。例如：

```
// Inject environment setting. Resource annotation works with/without CDI -  
// just doesn't give scoping support, which isn't required here.
@Resource boolean debugMode;

if (debugMode) {
    @PersistenceContext(unitName="DebugPersistenceUnit")
    EntityManager debugEM;

    Employee emp = debugEM.find(Employee.class, empId);
} 
```

然后在您的 web.xml 或 ejb.xml 中包含一个 env-entry：

```
<env-entry>
    <description>
     Only set this true in a debugging environment
    </description>
    <env-entry-name>debugMode</env-entry-name>
    <env-entry-type>java.lang.Boolean</env-entry-type>
    <env-entry-value>true</env-entry-value>
</env-entry> 
```

# python - 使用python检查列表中是否存在属于同一域的url？

> ID：15155476
> 
> 赞同：0
> 
> 时间：2013-03-01T10:28:09.203
> 
> 标签：python, list, python-2.7

我写了一个脚本来解析一些在传出链接存在上输入的 url。我真正需要的是检查输入的 url 是否存在于特定标签的传出链接列表中。我接下来做：

```
from lxml import html
import urllib2
url = 'http://businessinsider.com/'

Testurl = urllib2.urlopen('somequerryurl' +url).read()
tree = html.fromstring(Testurl)

#this check if specific <li class=""> id tag exists
Elements = tree.xpath('//div[@id="bd-cross"]//li[@class=""]')

try:

    if len(Elements) > 0:
    links = list(tree.xpath('//li[@class=""]//a/@href'))

        if url in links:
            print 'Yes'
        else:
            print 'No'
    else:
        print 'No'
except ValueError:
    print 'Check your entered url!', url 
```

例如，我有一个包含[http://www.businessinsider.com/2007/11/blablabla](http://www.businessinsider.com/2007/11/blablabla)的列表；[http://www.businessinsider.com/2012/news/blablaba](http://www.businessinsider.com/2012/news/blablaba)。脚本给了我“不”，因为 url（基于脚本）不在链接中 - 但正确的“是”。检查列表中是否存在属于同一域的 url 以获得正确结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:20:15.070

您`url`的 is`http://businessinsider.com/`和 this 不是您返回的链接的一部分，其中包含`http://www.businessinsider.com/`.

您需要搜索域本身：

```
>>> 'businessinsider.com' in 'http://www.businessinsider.com/foo/bar/zoo'
True 
```

为了避免对其进行硬编码，您可以解析域部分：

```
from urllib2 import urlparse
url = 'http://businessinsider.com/'
search_domain = urlparse.urlparse(url).hostname

if search_domain in 'http://www.businessinsider.com/foo/bar/zoo':
   print 'Yes'
else:
   print 'No' 
```

这是另一个例子：

```
>>> urls = ['http://www.businessinsider.com/hello/foo',
'http://google.com/',
'http://businessinsider.com/']
>>> search_domain = urlparse.urlparse('http://businessinsider.com/').netloc
>>> for i in urls:
...    if search_domain in i:
...       print "{} contains {}".format(i,search_domain)
... 
http://www.businessinsider.com/hello/foo contains businessinsider.com
http://businessinsider.com/ contains businessinsider.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:57:08.753

我认为您不需要使用该`list()`功能，因为它已经是一个列表。

您不能直接检查子字符串是否在列表中 - 您必须检查列表中的每个项目以查看子字符串是否在该项目中。

你可以试试：

```
links = tree.xpath('//li[@class=""]//a/@href')

found = False

for link in links:
    if url in link:
        found = True
        break

print found 
```

您可以使用以下方法使其更短：

```
any(url in link for link in links) 
```

该`any()`函数检查序列中的任何项目是否为真。 `url in link`是测试，`for link in links`是迭代。我不确定这是否更清楚，除非你知道一点 python。

# javascript - jQuery datepicker：预选第二个日期选择器的月份

> ID：15155480
> 
> 赞同：1
> 
> 时间：2013-03-01T10:28:28.780
> 
> 标签：javascript, jquery, calendar, datepicker

我有两个日期选择器：到达和离开。现在，如果您选择 4 月 26 日抵达，出发日期选择器应预选为 4 月（目前是 3 月）。那么我该如何实现呢？

我尝试了以下方法：

```
$( "#arrival" ).datepicker({
    buttonImage: 'fileadmin/templates/images/calendar.png',
    buttonImageOnly: true,
    changeMonth: true,
    changeYear: true,
    showOn: 'both',
    buttonText: 'arrival',
    onSelect: function(){
        var arrivalDate = $(this).datepicker('getDate').getDate();
        var arrivalMonth = $(this).datepicker('getDate').getMonth();
        var arrivalYear = $(this).datepicker('getDate').getFullYear();
        $('#departure').datepicker({ defaultDate: new Date(arrivalYear,arrivalMonth,01) });
    }
});
$( "#departure" ).datepicker({
    buttonImage: 'fileadmin/templates/images/calendar.png',
    buttonImageOnly: true,
    changeMonth: true,
    changeYear: true,
    showOn: 'both',
buttonText: 'departure'
}); 
```

`setDate`将填写不需要的文本输入字段。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:43:50.163

**问题**

目前在您的`onSelect`回调中，您正尝试重新初始化`departure`元素以更改其`defaultDate`选项：

```
$('#departure').datepicker({ defaultDate: new Date(arrivalYear,arrivalMonth,01) }); 
```

但是，在初始化之后，`datePicker`选项应该以这种形式设置，*而不需要重新初始化*元素：

```
datePicker('option','some-option','some-option-value'). 
```

**解决方案**

使用正确的形式设置元素的`defaultDate`选项。`depature`

例如：

```
...
var departure_date = new Date(arrivalYear,arrivalMonth,01);
$('#departure').datepicker('option','defaultDate', departure_date);
... 
```

参见**[jsFiddle 演示](http://jsfiddle.net/B2LRq/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:30:29.587

首先计算值然后像这样设置

```
$( "#departure" ).val($("#arrival").val())datepicker(
 ......

); 
```

# zend-framework2 - ZF2 User\Module.php 无法调用 $sm->get('Zend\Db\Adapter\Adapter')

> ID：15155481
> 
> 赞同：0
> 
> 时间：2013-03-01T10:28:33.647
> 
> 标签：zend-framework2

我正在通过开始编写一个简单的 UserAuth 插件来进行身份验证来学习 ZF2，但是遇到了异常：创建“userAuth”时引发了异常；没有返回实例以前的异常：提供的或实例化的驱动程序对象没有实现 Zend\Db\Adapter\Driver\DriverInterface

这一行的错误： $sm->get('Zend\Db\Adapter\Adapter')

以下是我的 User\Module.php

类模块{

```
public function onBootstrap(MvcEvent $e)
{
    $e->getApplication()->getServiceManager()->get('translator');
    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);
}

public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(
            __DIR__ . '/autoload_classmap.php',
        ),
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
}

public function getConfig()
{
    return include __DIR__ . '/config/module.config.php';
}

public function getServiceConfig()
{
    return array(
        'invokables' => array(
        ),
        'factories' => array(
            'User\Form\Signin' => function($sm) {
                $form = new Form\Signin();
                $form->setInputFilter(new Form\SigninFilter);
                return $form;
            },
            'User\Auth\Service' => function ($sm) {
                return new \Zend\Authentication\AuthenticationService(
                    new \Zend\Authentication\Storage\Session(),
                    new \Zend\Authentication\Adapter\DbTable($sm->get('Zend\Db\Adapter\Adapter'))
                );
            },
        ),
    );
}

public function getControllerPluginConfig()
{
    return array(
        'factories' => array(
            'UserAuth' => function ($sm) {
                $sl = $sm->getServiceLocator();
                $authService = $sl->get('User\Auth\Service');
                $authAdapter = new \Zend\Authentication\Adapter\DbTable($sm->get('Zend\Db\Adapter\Adapter'));
                $controllerPlugin = new Controller\Plugin\UserAuth();
                $controllerPlugin->setAuthService($authService);
                $controllerPlugin->setAuthAdapter($authAdapter);
                return $controllerPlugin;
            },
        ),
    );
} 
```

}

请帮我修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:09:31.727

添加：

```
use Zend\Db\Adapter\Adapter; 
```

到 Controller\Plugin\UserAuth.php 的顶部

和：

```
extends Adapter 
```

后：

```
class UserAuth 
```

在同一个文件中。这至少会让你朝着正确的方向前进。

# android - 使用谷歌方向API时如何检测方向

> ID：15155482
> 
> 赞同：0
> 
> 时间：2013-03-01T10:28:38.467
> 
> 标签：android, google-maps, driving-directions

我使用谷歌方向服务来获取地图中两点之间的方向。我已经成功解决了这个问题。我现在的问题是如何检测方向图像中的方向图像。我看到各种各样的指令，比如右转、轻微右转、右转。所以我可以交接所有可能出现的情况。

所以我的问题是如何检测如下图所示的指令图像（或箭头图像）。 ![在此处输入图像描述](../Images/a13dceca3295d0126fe37874cf1c7b00.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:40:36.747

```
function toRad(value) { "use strict"; return value * (Math.PI / 180); }

function bearing(lat1, lon1, lat2, lon2) {
    "use strict";
    var dLon, x, y;
    lat1 = toRad(lat1);
    lat2 = toRad(lat2);
    dLon = toRad(lon2 - lon1);
    y = Math.sin(dLon) * Math.cos(lat2);
    x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);
    return toBrng(Math.atan2(y, x));
} 
```

这两个功能，当通过投掷两组 long,lats 来使用它们会给你方位。

只需从您所在的方位计算出您要前往的方位，这将告诉您方向。

# php - 如何在 CodeIgniter 中的控制器后忽略 id

> ID：15155485
> 
> 赞同：0
> 
> 时间：2013-03-01T10:28:43.237
> 
> 标签：php, codeigniter

我在 CodeIgniter 中使用了分页。

这是我在本地主机地址栏中的链接

`PicTraveller/branches/1.0.1/Implementation/index.php/home`

当我单击下一步时，将显示接下来的 5 条记录。在我点击下一步后： `PicTraveller/branches/1.0.1/Implementation/index.php/home/5`

然后我必须在路由文件中为此编写： `$route['home/(:any)']= 'home/$1';`

但这行不通。请给我建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T11:46:16.300

您可以在不使用路由的情况下编写此代码，如下所示：将参数传递给您的主控制器上的函数索引，因为您的代码已放置。参数应该可以为空，因为没有发送记录号。IE

```
class Home extends CI_Controller
{
    function __construct() {
        parent::__construct();
    }

    function index($recordId = null) {
        if (!empty($recordId)) {
            //next button is clicked
        } else {
            // first time 
        }
    }
} 
```

# ruby-on-rails - Ruby on Rails：遍历 Json 结构

> ID：15155487
> 
> 赞同：1
> 
> 时间：2013-03-01T10:28:48.423
> 
> 标签：ruby-on-rails, directory, tree-traversal

```
def self.directory_hash(path, name=nil)
    data = {:parent => (name || path)}
    data[:children] = children = []
    Dir.foreach(path) do |entry|
      next if (entry == '..' || entry == '.')
      full_path = File.join(path, entry)
      if File.directory?(full_path)
        children << directory_hash(full_path, entry)
      else
      children << entry
      end
    end
    return data
  end 
```

我使用了返回下面给出的 json 的上述方法：-

```
{:parent=>"public", :children=>["422.html", {:parent=>"applications", :children=>[{:parent=>"1", :children=>[{:parent=>"1", :children=>[{:parent=>"1", :children=>["configurations.xml"]}, {:parent=>"2", :children=>["configurations.xml"]}, "Projects.rar"]}, {:parent=>"2", :children=>[{:parent=>"9", :children=>["configurations.xml"]}, "rest.rar", {:parent=>"5", :children=>["configurations.xml"]}, {:parent=>"6", :children=>["configurations.xml"]}, {:parent=>"3", :children=>["configurations.xml"]}, {:parent=>"4", :children=>["configurations.xml"]}]}]}, {:parent=>"2", :children=>[{:parent=>"3", :children=>["Projects.rar"]}, {:parent=>"4", :children=>["rest.rar"]}]}]}, "500.html", "robots.txt", "favicon.ico", {:parent=>"data", :children=>[]}, "_index.html", "404.html"]} 
```

现在在我看来，我想从上面的输出中显示结构，所以视图应该看起来像

```
public
 422.html
 applications
  1
   1
    1
    2
  2
.....
.....
..... 
```

一个这样的

我有一个变量来保存这个 json

```
@structure = ApplicationVersion.directory_hash("public") 
```

那么我需要编写什么代码来读取上面的 json 以便可以构建树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:39:12.420

尝试：

```
your_hash = {:parent=>"public", :children=>["422.html", {:parent=>"applications", :children=>[{:parent=>"1", :children=>[{:parent=>"1", :children=>[{:parent=>"1", :children=>["configurations.xml"]}, {:parent=>"2", :children=>["configurations.xml"]}, "Projects.rar"]}, {:parent=>"2", :children=>[{:parent=>"9", :children=>["configurations.xml"]}, "rest.rar", {:parent=>"5", :children=>["configurations.xml"]}, {:parent=>"6", :children=>["configurations.xml"]}, {:parent=>"3", :children=>["configurations.xml"]}, {:parent=>"4", :children=>["configurations.xml"]}]}]}, {:parent=>"2", :children=>[{:parent=>"3", :children=>["Projects.rar"]}, {:parent=>"4", :children=>["rest.rar"]}]}]}, "500.html", "robots.txt", "favicon.ico", {:parent=>"data", :children=>[]}, "_index.html", "404.html"]} 
```

```
new_hash= your_hash.to_s.gsub(/(\[\"\S*\"\])/,'').gsub(/(\[|\]|\{|\})/,'').gsub('=>',',').gsub(',,',',')

new_hash.split(',').each {|i| puts i if i.strip[0] != ":"} 
```

# c# - 在 C# 中查找控件样式

> ID：15155490
> 
> 赞同：0
> 
> 时间：2013-03-01T10:28:53.690
> 
> 标签：c#, asp.net

我正在使用它设置某些控件

```
divCorporateId.Style.Add("Visibility", "hidden"); 
```

我如何检查另一种方法中的值是什么？

我想是这样的：

```
if (divCorporateId.Style........ == "hidden")
{
    do something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:32:03.227

就像是：

```
if (divCorporateId.Style[HtmlTextWriterStyle.Visibility] == "hidden")
{
    do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:33:44.813

You can get Css property value in C# like this

```
string value = divCorporateId.Style["Key"] 
```

then you can apply your conditions based on this value.

# regex - 创建一个正则表达式来发现腐败

> ID：15155492
> 
> 赞同：-3
> 
> 时间：2013-03-01T10:28:55.977
> 
> 标签：regex, sequence, corruption, repeat

> kŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkŸkQOzW Îžò4d1|l»ÏAñ?:"ñl¦£.._ÇŸf€À?Lƒ,ðe¿íÏ".á¢..ü¾bÜW!jà×

被认为损坏的是：

> kŸkŸkŸkŸkŸk
> FFFFFFF
> oŸoŸoŸoŸoŸoŸoŸoŸoŸoŸo

*几乎任何 2 位序列都重复。*

我一生都无法想出一种在不检测其他一切的情况下检测它的方法——真正的问题不是检测`(kŸ{2,})`而是检测任何其他可能性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:37:45.867

此正则表达式将匹配重复的*两个字符*序列：

```
/(..)\1+/ 
```

**解释：**

`(..)`匹配任意两个字符，将它们放在第一个捕获组中。

`\1`指的是第一个捕获组，所以它会检查相同的两个字符是否重复

# objective-c - 如何在 XCode 4.6 中获取异常详细信息？

> ID：15155495
> 
> 赞同：7
> 
> 时间：2013-03-01T10:29:07.893
> 
> 标签：objective-c, xcode, exception, xcode4, xcode4.6

我曾经从模拟器中运行的应用程序中获取异常详细信息，如下所示：

```
po $eax 
```

自从我升级到 XCode 4.6 后，它就停止工作了；我总是收到这个错误：

```
error: warning: couldn't get object pointer (substituting NULL):
Couldn't find '_cmd' with appropriate type in scope
Couldn't materialize struct: Couldn't read eax (materialize)
Errored out in Execute, couldn't PrepareToExecuteJITExpression 
```

我见过人们推荐使用这个：

```
register read eax 
```

但这给了我这个错误：

```
eax          = error: unavailable 
```

如何在 XCode 4.6 中获取异常详细信息？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-05T23:12:19.447

如果您`objc_exception_throw`在调用任何可能引发异常的库之前中断所选的堆栈帧是代码中的最后一帧。那时 lldb 不允许您访问某些寄存器（有关可能的解释，请参阅[此答案](https://stackoverflow.com/a/13712939/1489997)。

要获取异常详细信息，您必须选择`objc_exception_throw`堆栈帧：

![选择 objc_exception_throw 堆栈帧](../Images/106419acf5a44d275d2595eea91964c2.png)

现在`po $eax`（`po $rax`如果您在 OS X 64 位、`po $r0`iPhone/iPad、`po $x0`arm64 上运行）应该为您提供异常详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T09:54:39.573

我没有什么要添加的，只需使用[这个很棒的指南，它可以帮助您使用](http://qwan.org/2013/06/18/how-to-snatch-the-error-code-from-the-trap-frame-in-xcode/)**在控制台中打印异常描述的操作（脚本）**设置异常断点。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-08T17:01:23.663

去 ：

```
Product -> Scheme -> Edit Scheme -> Run on the left -> diagnostics tab 
```

然后启用僵尸

# php - setInterval - 带有字符串的 ajax (GET)

> ID：15155502
> 
> 赞同：0
> 
> 时间：2013-03-01T10:29:28.510
> 
> 标签：php, javascript, jquery, ajax

我需要帮助弄清楚如何在为函数保留“str”的同时设置间隔。

客户端选择一个选项，函数“GET”是选定的选项。但是当它在 setInterval 中刷新时，它会丢失字符串。我该怎么做？

我试过这个：

```
<script type="text/javascript">
function countrystats(str)
  {
  if (str=="")
  {
  document.getElementById("countrystats").innerHTML="";

  return;
  } 
  if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
  else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
  document.getElementById("countrystats").innerHTML=xmlhttp.responseText;
  }
  }
  xmlhttp.open("GET","countrystats.php?q="+str,true);
  xmlhttp.send();

 setInterval(countrystats, 5000);

  }
  </script> 
```

希望你能帮我解决这个烂摊子:-)

我知道这可以用一些 jQuery 来完成，但我似乎可以让它工作。也许这两件事是相关的，我不知道:-)

以下是函数 countrystats 获取输入的方式：

```
script type="text/javascript">
$("#countrystats_menu > li > a").click(function (ev) {
  var str = $(this).html();
  countrystats(str);

  $('#country_span').html(str);
  });

  </script> 
```

编辑/解决方案：

似乎问题在于，在执行 setInterval 时，它丢失了附加的 str，但是这段代码保留了它。

```
setTimeout((function(strPriorToTimeout)
{//IIFE's scope preserves state of str variable
    return function()
    {
        countrystats(strPriorToTimeout);
    };
})(str),5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:51:14.003

我已经用 jQuery 简化了你的代码。我使用[jQuery.load](http://api.jquery.com/load/)将远程 html 加载到起始元素。

并且每当单击一个新项目时，您都需要创建上一个间隔，否则将运行多个请求线程

```
function countrystats(str) {
    if (str == "") {
        $('#countrystats').empty();
        return;
    }

    $('#countrystats').load('countrystats.php?q=' + str)

}

var interval;
$("#countrystats_menu > li > a").click(function(ev) {
    if (interval) {
        clearInterval(interval);
    }

    var str = $(this).html();

    countrystats(str);
    interval = setInterval(function() {
                countrystats(str);
            }, 5000);

    $('#country_span').html(str);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:47:39.093

参数`str`最后超出范围，间隔只是调用函数*而不*将任何值传递给`str`. 正如一些评论所暗示的那样，`countrystats(str)`似乎*可以*解决问题，但事实并非如此，原因如下：

```
setInterval(countrystats(str), 500); 
```

此行包含多个表达式，这些表达式*将*被评估/解析为某个值，例如`countrystats(str)`，这是对函数的直接调用。然后，将在设置间隔之前调用该函数。
最快的解决方案是创建一个匿名函数，并从内部调用该函数：

```
setInterval(function()
{
    countrystats(str);
},5000); 
```

您甚至可以通过创建一个闭包，将预期值实际传递给区间函数来*更加安全地发挥它。*`str`这是可选的，可能看起来有点混乱（和混乱）：

```
setInterval((function(strPriorToTimeout)
{//IIFE's scope preserves state of str variable
    return function()
    {
        countrystats(strPriorToTimeout);
    };
})(str),5000); 
```

关于您的代码，只有一件事让我感到困扰：您正在使用`setInterval`，它每 X 毫秒重复一次相同的函数调用。如果您只需要调用一次函数，则使用`setTimeout`.
另一件事是：`setInterval`返回间隔的 id，因此您可以在需要时停止常量函数调用。您似乎没有在任何地方分配该 ID，因此您的代码将继续运行，除非您强制`clearInterval`调用。也许考虑将返回值分配给`setInterval`您可以访问的某个变量。
如果您不清除间隔 AFAIK 的唯一方法是：

```
for (var i=0;i<Number.MAX_VALUE;i++)
{
    clearInterval(i);
} 
```

现在这太可怕了，不是吗？

根据评论，我想我会在这里添加一些关于网络工作者的信息。根据我收集到的 OP 想要实现的目标，我建议尽可能使用网络工作者。这里的基本设置可能是：

```
//client.js
var worker = new Worker('dashWorker.js');//worker script
//to kick off the worker: 
function countrystats(str)
{
    str = str || document.getElementById('countrystats').innerHTML;//get str value
    worker.postMessage(str);//that's it, the worker takes care of everything else
}
worker.onmessage = function(response)
{
    document.getElementById('countrystats').innerHTML = response.response;//cf worker code
    return countrystats(response.str);//choose when to call the countrystats function again, as soon as the worker responded... easy!
};

//the worker:
self.onmessage = function(e)
{//you could add a way of stopping the constant updates, by posting a 'stopDash' or something...
    //do ajax call using e.data --> this is the string anyhow
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function(response)
    {
        if (this.readyState === 4 && this.status === 200)
        {
            self.postMessage({str: e.data, 
                              response: response.responseText});
        }
    };
    xhr.open('GET', 'countrystats.php?q=' + e.data,true);
    xhr.send();
}; 
```

当然，这段代码远非*“干净”*：它可以做一些性能调整（比如不一直查询 DOM），但基本原则是……
这里有几个重要的链接：

[MDN](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)
[John Resig 关于workers 的博客文章](http://ejohn.org/blog/web-workers/)
[Webworkers 的逐步介绍](http://net.tutsplus.com/tutorials/javascript-ajax/getting-started-with-web-workers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:35:12.957

you are calling setInterval(countrystats, 5000); in the same function. you can do with jquery also

```
url='countrystats.php?q='+str; 
```

ajax calll

```
$.get(url, function(data) {
  $('#countrystats').html(data);

}); 
```

once the get finishes. you can call `setInterval(countrystats, 5000);` for refreshing the content.

# jaxb - 如何重新排序 XML 解组

> ID：15155503
> 
> 赞同：2
> 
> 时间：2013-03-01T10:29:27.983
> 
> 标签：jaxb

我需要知道我们是否可以将对象解组为我们想要的顺序。

例如：我们有 A、B 和 C 三个类。解组的顺序也相同。

因为我的概念不是很清楚，但据我所知，解组是按照它被编组的顺序发生的。

由于存在开发限制，我无法更改编组对象的顺序。那么有没有办法改变顺序，在 A 的对象之前先解组 B 的对象。

我正在使用 JAXB api。

谢谢， 苏维德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:58:00.617

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不要求 XML 文档中的元素严格匹配 XML 模式中定义的顺序。如果您希望执行命令，则可以`javax.xml.validation.Schema`在`Unmarshaller`.

# winapi - 获取鼠标光标下的像素颜色 - 快速方式

> ID：15155505
> 
> 赞同：5
> 
> 时间：2013-03-01T10:29:33.580
> 
> 标签：winapi, freepascal, lazarus

有什么方法可以让鼠标光标下的像素颜色真的很快吗？我有一个鼠标钩，我尝试在鼠标移动期间读取像素颜色。它的颜色选择器

任何使用 getPixel 和 BitBlt 的尝试都非常缓慢。

**更新 - 添加代码**

```
unit Unit1;

{$mode delphi}{$H+}

interface

uses
  Classes, SysUtils, FileUtil, Forms, Controls, Graphics, Dialogs, ExtCtrls, lclintf, Windows;

type

  { TForm1 }

  TForm1 = class(TForm)
    pnColor: TPanel;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure ms(var message: tmessage); message WM_USER+1234;
  private
    { private declarations }
  public
    { public declarations }
  end;

var
  Form1: TForm1;
  DC:HDC;

    const WH_MOUSE_LL = 14; //for Lazarus

implementation

{$R *.lfm}

{ TForm1 }

procedure HookMouse(Handle:HWND); stdcall; external 'mhook.dll';
procedure UnHookMouse; stdcall; external 'mhook.dll';

procedure TForm1.FormCreate(Sender: TObject);
begin
  //Self.Caption := IntToStr(Self.Height);
  Self.Left:= Screen.Monitors[0].WorkareaRect.Right  - Self.Width - 18;
  Self.Top := Screen.Monitors[0].WorkareaRect.Bottom - Self.Height - 18 - 25; //35 LAZARUS BUG

  DC := getDC(0);

  HookMouse(Self.Handle);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
    UnHookMouse;
end;

procedure TForm1.ms(var message: tmessage);
var color:TColor;
begin
  color := GetPixel(DC, message.WParam, message.LParam); //<-- Extremly slow
  //format('%d - %d',[message.LParam, message.WParam]); // Edited

  pnColor.Color:=color;
end;

end. 
```

和 DLL

```
library project1;

{$mode delphi}{$H+}

uses
  Windows,
  Messages;

var Hook: HHOOK;
    hParent:HWND;

function HookProc(nCode: Integer; MsgID: WParam; Data: LParam): LResult; stdcall;
var
  mousePoint: TPoint;
begin
  //if nCode = HC_ACTION then
  //begin
       mousePoint := PMouseHookStruct(Data)^.pt;
       PostMessage(hParent, WM_USER+1234, mousePoint.X, mousePoint.Y);
  //end;
  Result := CallNextHookEx(Hook,nCode,MsgID,Data);
end;

procedure HookMouse(Parent: Hwnd); stdcall;
begin
  hParent := parent;
  if Hook = 0 then Hook:=SetWindowsHookEx(WH_MOUSE_LL,@HookProc,HInstance,0); 
end;

procedure UnHookMouse; stdcall;
begin
  UnhookWindowsHookEx(Hook);
  Hook:=0;
end;

exports
  HookMouse, UnHookMouse;

begin

end. 
```

**更新 2 - 以 100 毫秒间隔更新一个单元**

```
unit Unit1;

{$mode delphi}{$H+}

interface

uses
  Classes, SysUtils, FileUtil, Forms, Controls, Graphics, Dialogs, ExtCtrls, lclintf, Windows;

type

  { TForm1 }

  TForm1 = class(TForm)
    pnColor: TPanel;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { private declarations }
  public
    { public declarations }
  end;

var
  Form1: TForm1;
  HookHandle: Cardinal;
  DC:HDC;
  timer:Long;

const WH_HOOK_LL = 14; //for Lazarus

implementation

{$R *.lfm}

{ TForm1 }

function LowLevelMouseProc(nCode: Integer; wParam: wParam; lParam: lParam): LRESULT; stdcall;
var
   point:TPoint;
begin
  if (nCode >= 0) then
  begin
    if(GetTickCount - timer >= 100) then
    begin
       point:=PMouseHookStruct(lParam)^.pt;
       Form1.pnColor.Color := GetPixel(DC,point.X,point.Y);
       timer := GetTickCount;
    end;
  end;
  Result := CallNextHookEx(HookHandle, nCode, wParam, lParam);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  //Self.Caption := IntToStr(Self.Height);
  Self.Left:= Screen.Monitors[0].WorkareaRect.Right  - Self.Width - 18;
  Self.Top := Screen.Monitors[0].WorkareaRect.Bottom - Self.Height - 18 - 25; //35 LAZARUS BUG

  DC :=  GetWindowDC(GetDesktopWindow);
  if HookHandle = 0 then
  begin
    HookHandle := SetWindowsHookEx(WH_HOOK_LL, @LowLevelMouseProc, hInstance, 0);
  end;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
    if HookHandle <> 0 then
    UnhookWindowsHookEx(HookHandle);

    ReleaseDC(GetDesktopWindow(), DC);
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T00:18:33.220

我个人不会为此使用钩子。例如，我会使用一个间隔为 30 毫秒的计时器，并使用以下代码来确定鼠标光标下当前像素的位置和颜色（该代码仅适用于 Windows 平台，就像您的原始代码一样）。我会使用它，因为如果您的应用程序将无法处理（虽然是低级别空闲优先级）`WM_TIMER`消息，我认为它无法处理来自您的钩子的如此频繁的回调，从而保持用户界面负责（处理自己的主线程消息）：

```
unit Unit1;

{$mode objfpc}{$H+}

interface

uses
  Classes, SysUtils, FileUtil, Forms, Controls, Graphics, Dialogs, ExtCtrls,
  StdCtrls, Windows;

type

  { TForm1 }

  TForm1 = class(TForm)
    Label1: TLabel;
    Panel1: TPanel;
    UpdateTimer: TTimer;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure UpdateTimerTimer(Sender: TObject);
  private
    DesktopDC: HDC;
  public
    { public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.lfm}

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  DesktopDC := GetDC(0);
  if (DesktopDC <> 0) then
    UpdateTimer.Enabled := True;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  ReleaseDC(GetDesktopWindow, DesktopDC);
end;

procedure TForm1.UpdateTimerTimer(Sender: TObject);
var
  CursorPos: TPoint;
begin
  if GetCursorPos(CursorPos) then
  begin
    Label1.Caption := 'Cursor pos: [' + IntToStr(CursorPos.x) + '; ' +
      IntToStr(CursorPos.y) + ']';
    Panel1.Color := GetPixel(DesktopDC, CursorPos.x, CursorPos.y);
  end;
end;

end. 
```

# c# - ASP.NET 将响应保存到 global.asax 中的文件

> ID：15155508
> 
> 赞同：1
> 
> 时间：2013-03-01T10:29:37.433
> 
> 标签：c#, asp.net, save, global-asax, outputstream

我在生产系统中有一个有问题的错误，我根本找不到。有时系统会产生无效链接。当最终用户单击它时，我会从系统收到错误报告，最终用户会收到错误消息。失败的 URL 是这样的：

```
http://www.mysite.com/somepath/undefined/ 
```

“未定义”部分是问题所在，我认为这是由 JavaScript 产生的，但我想确保它不是来自后端。

如果文件包含使用 global.asax 的字符串“/undefined/”，有没有办法保存对文件的每个响应？

我试过这个：

```
 protected void Application_EndRequest(object sender, EventArgs e)
    {           
        TextReader t = new StreamReader(Response.OutputStream);
        string content = t.ReadToEnd();
        // look for "/undefined/" and save to a temp file is the easy part after this
    } 
```

但是据说 OutputStream 不可读。

我不确定哪个页面/ajax 请求会产生错误链接，所以我需要检查每个响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:15:42.473

您无法读取响应流，但可以将响应过滤器添加到输出流，并获取它的副本。

这方面有几篇相关文章：

*   在 SO[的 ASP.NET MVC 和 IIS7 中记录原始 HTTP 请求/响应](https://stackoverflow.com/a/1792864/102112)
*   使用Rick Strahl[的 Response.Filter 捕获和转换 ASP.NET 输出。](http://www.west-wind.com/weblog/posts/2009/Nov/13/Capturing-and-Transforming-ASPNET-Output-with-ResponseFilter)

希望对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:35:09.820

Juest check the IIS log file. I tracks all request with urls

# algorithm - 排序申请难度

> ID：15155510
> 
> 赞同：1
> 
> 时间：2013-03-01T10:29:40.920
> 
> 标签：algorithm, sorting

目前我正在阅读一本关于算法的书，并发现了这种排序的用法。

> 重建原始顺序 - 我们如何在为某些应用程序排列一组项目后恢复它们的原始排列？为项目的数据记录添加一个额外的字段，以便第 i 条记录将此字段设置为 i。每当您移动记录时，请携带此字段，然后在您想要返回初始订单时对其进行排序。

我一直在努力理解它是什么意思。而我失败得很惨。请有人帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:39:02.487

假设您有随机顺序的项目列表：

```
itemC, itemB, itemA, itemD 
```

你对它们进行了分类：

```
itemA, itemB, itemC, itemD 
```

而且您没有足够的内存将它们存储在单独的位置，因此原始序列丢失了。此外，原始顺序是随机的，恢复它会有问题/不可能。

这篇文章给出了这个问题的解决方案。

> 为项目的数据记录添加一个额外的字段，以便第 i 条记录将此字段设置为 i

因此，我们为每个项目添加一个额外的字段：

```
(itemC,1), (itemB,2), (itemA,3), (itemD, 4) 
```

排序后我们有：

```
(itemA,3), (itemB,2), (itemC,1), (itemD, 4) 
```

因此我们可以通过附加字段轻松恢复初始订单排序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T10:34:47.740

Let's say you have the data in an array, because it's the simplest structure that I can use to exemplify.

So, your node (i.e., element of the array) may look like this:

```
 (some data type) data 
```

The algorithm is suggesting you to add an integer field, so it looks like this:

```
 (some data type) data,
 int              position 
```

And then, you fill the positions with the actual index. Something like this pseudocode:

```
for current: 0 to lastElement
  array[current].position = current 
```

(that's not written in any language I know of, but it should be readable)

After doing that, you shuffle it (resort it) for whatever you need to.

When you want to restore the original ordering, all you need to do is sort by the `position` field.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:41:17.773

好吧，基本上它是说您需要某种东西来跟踪原始顺序（被排列破坏）。[一种选择是简单地反转排列（在此处](https://stackoverflow.com/a/11149325/1174378)查看 Steve Jessop 的信息性答案）。

另一种反转排列的选择需要更少的处理步骤，但需要更多的内存。更具体地说，输入集中的每个节点都会有一个额外的 ID 字段，并且此输入集中的所有元素都基于此字段进行排序。应用排列后，很明显 ID 不再按排序顺序。如果您希望反转排列，您所要做的就是根据该字段再次对列表进行排序。

# r - 向数据框中添加缺失值

> ID：15155513
> 
> 赞同：3
> 
> 时间：2013-03-01T10:29:56.310
> 
> 标签：r, date, dataframe

在 R 中，我有一个数据框“closeValues”，如下所示

```
>closeValues
            date        value
    1  1980-12-10       5
    2  1980-12-15       8
    3  1980-12-18       7
    4  1980-12-20       1 
```

但是如果缺少“日期”，我需要用以前的值填充字段“值”的值。实际上我需要以下输出

```
>closeValues
   date        value
1  1980-12-10       5
2  1980-12-11       5
3  1980-12-12       5
4  1980-12-13       5
5  1980-12-14       5
6  1980-12-15       8
7  1980-12-16       8
8  1980-12-17       8
9  1980-12-18       7
10 1980-12-19       7
11 1980-12-20       1 
```

在R中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:49:42.610

使用`na.locf`from `zoo`package，你可以这样做：

```
dat1 <- data.frame(date = seq(as.Date('1980-12-10'),as.Date('1980-12-20'),1))
## the merge will fill dat1 with NA, and na.locf do the rest 
na.locf(zoo(merge(dat1,dat,all.x=T)))
   date       value
1  1980-12-10  5   
2  1980-12-11  5   
3  1980-12-12  5   
4  1980-12-13  5   
5  1980-12-14  5   
6  1980-12-15  8   
7  1980-12-16  8   
8  1980-12-17  8   
9  1980-12-18  7   
10 1980-12-19  7   
11 1980-12-20  1 
```

**PS**请下次提供可重现的示例。余可以这样写：

```
 dat <- data.frame(date = as.Date(c('1980-12-10','1980-12-15',
                                   '1980-12-18','1980-12-20')), 
                    value=c(5,8,7,1)) 
```

或者

```
dput(dat)
structure(list(date = structure(c(3996, 4001, 4004, 4006), class = "Date"), 
    value = c(5, 8, 7, 1)), .Names = c("date", "value"), row.names = c(NA, 
-4L), class = "data.frame") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:55:05.587

这可能会在基础 R 中执行您想要的操作：

```
df.1 <- read.table(text='
            DATE   VALUE
      1980-12-10       5
      1980-12-15       8
      1980-12-18       7
      1980-12-20       1', header=T, colClasses=c('character', 'numeric'))

df.1$DATE2 <- as.Date(df.1$DATE)

df.1$diffs <- c(as.numeric(diff(df.1$DATE2)),1)

df.2 <- df.1[rep(1:nrow(df.1),df.1$diffs),]

df.2$running.count = sequence(rle(df.2$VALUE)$lengths)

df.2$DATE3 <- df.2$DATE2 + (df.2$running.count-1)
df.2

#           DATE VALUE      DATE2 diffs running.count      DATE3
# 1   1980-12-10     5 1980-12-10     5             1 1980-12-10
# 1.1 1980-12-10     5 1980-12-10     5             2 1980-12-11
# 1.2 1980-12-10     5 1980-12-10     5             3 1980-12-12
# 1.3 1980-12-10     5 1980-12-10     5             4 1980-12-13
# 1.4 1980-12-10     5 1980-12-10     5             5 1980-12-14
# 2   1980-12-15     8 1980-12-15     3             1 1980-12-15
# 2.1 1980-12-15     8 1980-12-15     3             2 1980-12-16
# 2.2 1980-12-15     8 1980-12-15     3             3 1980-12-17
# 3   1980-12-18     7 1980-12-18     2             1 1980-12-18
# 3.1 1980-12-18     7 1980-12-18     2             2 1980-12-19
# 4   1980-12-20     1 1980-12-20     1             1 1980-12-20 
```

# python - 将CSV文件的内容粘贴到python 2.5中的excel表中

> ID：15155519
> 
> 赞同：0
> 
> 时间：2013-03-01T10:30:15.703
> 
> 标签：python, excel, csv, python-2.x

所以基本上我得到了一个 xlsm 文档，它包含一个工作表“数据”和一个图表，图表是从数据生成的。

我有 5 个 CSV 文件。

我需要删除数据的内容，然后用 5 个 CSV 文件填充它。

是否可以不将我的 csv 文件放入数组中并每行写入它们（非常耗时）。

我可以打开我的 CSV 文件并将它们粘贴到数据表中吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:39:03.073

您可以在 Excel 中打开 CSV 文件，然后可以将 CSV 文件合并成一个更大的文件

```
my_files = ['file_1.csv', 'file_2.csv', 'file_3.csv', 'file_4.csv', 'file_5.csv']

with open('output.csv', 'w') as oo:
    for file in my_files:
        with open(file, 'r') as io:
            oo.write(io.readlines()) 
```

然后就可以`output.csv`用excel打开了。

如果您不想手动列出所有输入文件，可以使用`glob`

```
>>> my_files = glob.glob('file_*.csv')
>>> my_files
... ['file_1.csv', 'file_2.csv', 'file_3.csv', 'file_4.csv', 'file_5.csv'] 
```

这里甚至还有一个 Excel 读/写 python模块[。](http://www.python-excel.org/)您可以使用它直接写入 Excel 文件：

```
import xlwt

w = xlwt.Workbook()
ws = w.add_sheet('First sheet')

i = 0
for file in my_files:
    with open(file, 'r') as fo:
    for line in fo.readlines():
       for j, col in enumerate(line.split(',')):
           ws.write(i, j, col)
           i += 1 
```

# git - git fetch/pull 在创建 bundle 之前

> ID：15155522
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:30:18.857
> 
> 标签：git, github

我正在为我的所有 github 存储库做一个备份脚本。我`git bundle create`用来创建我的回购的单个文件。

**我需要在 git bundle create 之前运行 git fetch/pull 吗？**如果是，哪一个： fetch 或 pull ？

我不明白这个人：

> 此命令支持 git fetch 和 git pull 通过将对象和引用打包到原始机器的存档中来操作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:08:30.917

主要`bundle`目的是允许在两台机器之间没有连接时在存储库之间交换数据。git 允许创建一个可以以某种方式离线传输的捆绑包（例如，通过带有信鸽的 CD-ROM），当捆绑包可以用作远程机器上获取/拉取命令的源时。

`fetch`和之间的区别`pull`很简单。`pull`== `fetch`+ `merge`。_

进行备份的最简单方法是使用`git clone --mirror <url>`，然后定期备份`git remote update`。它只会以最少的流量传输差异。

如果你想要一个文件，只需压缩镜像克隆文件夹。

# facebook - 脸书回复消息

> ID：15155536
> 
> 赞同：1
> 
> 时间：2013-03-01T10:30:35.960
> 
> 标签：facebook

我在回复（从应用程序中）到应用程序中收到的 Facebook 消息时遇到问题。facebook 通过 oauth 连接到这个应用程序，FB 消息将被传递到这个应用程序。Jijo AMT (jijo@facebook.com) 向 Anjaly AMT(anj@facebook.com) 发送了一条 FB 消息。Anjaly AMT facebook 帐户在应用程序中配置，因此消息在应用程序中传递。Anjaly 想将此消息回复给 Jijo。在应用程序中使用电子邮件客户端，她通过电子邮件 a@amt.in 进行操作。尽管用户 Jijo 在 facebook 中收到了这条消息，但它无法被识别为回复，并作为新消息落入 facebook。

我想知道，如何将回复识别为对 FB 消息的回复。（我们可以使用任何标题信息、消息 ID 等）

# dom - 在 keyevent 上使用 jquery

> ID：15155537
> 
> 赞同：0
> 
> 时间：2013-03-01T10:30:35.863
> 
> 标签：dom, jquery, onkeyup

我有一个由 jquery 的 .on 函数触发的 ajax 函数，它看起来像这样：

```
//button handler
$('body').on('click', '#btn', function() {
    ajaxloader(this);
}); 
```

现在，如果我有一个按钮并给它 btn id，它就可以正常工作。如何对 enter 键事件执行相同操作。我的伪代码：

```
//key handler
$('body').on('onkeyup:13', '.enter', function() {
    ajaxloader(this);
}); 
```

我想在 .on 函数的相同上下文中使用它，但如果这是不可能的，那么只有当我可以通过 .enter 类从元素中传递 this 变量时，其他方法才会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:34:37.057

```
 $('body').on('keyup', '.enter', function(e) {
      if(e.keyCode === 13) {
        ajaxloader(this);
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:32:34.767

我希望这将有所帮助。

```
$('#searchbox input').bind('keypress', function(e) {
     var code = (e.keyCode ? e.keyCode : e.which);
     if(code == 13) { //Enter keycode
       //Do something
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:35:29.163

不知道这是否是你想要的..

```
 $('body').on('keyup', '.enter', function(event) {
     if (event.keyCode == '13') {  /// check if the keypressed is enter.. if yes...
           //do your stuff
        }
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:06:00.107

在@Jashwant 的一些启发下，我找到了方法。我使用它来获取单击按钮的所有属性，但是当使用 enter 时它不知道它需要的女巫元素，所以我现在手动指定一个元素，如下所示：

```
$('body').on('keyup', function(e) {
        if(e.keyCode === 13){
            ajaxloader($('.enter'));
        }   
}); 
```

# php - 防止在调查中进行多次投票

> ID：15155539
> 
> 赞同：-2
> 
> 时间：2013-03-01T10:30:38.200
> 
> 标签：php, mysql

我正在进行一项[调查](http://www.kenyacancerbank.org/cancer.data/survey/survey.php)，我想阻止用户多次投票。有没有人有我可以包含在页面中的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:42:40.117

根据您的服务器/主机设置，这里有几个选项：

简单：当用户投票时，在浏览器上设置一个 cookie。在接受投票之前检查 cookie。可以轻松绕过（删除cookies）

Med：获取 IP 并将其存储在表中。在接受投票之前检查表格。“难以”规避（需要代理）。如果您接受来自 NAT 后面并具有相同 IP 的人的投票，这可能不是一个好的解决方案。

我会做什么：不要重新发明轮子。试试surveymonkey 另一个类似的在线服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:44:46.300

为了防止人们输入多个答案，您希望使用会话（这意味着您必须将该页面放在登录后面）。或者，您可以使用 IP。

但是，IP 发生了变化。这意味着，即使您仅使用 IP 并将其存储在某个地方（可能已加密），这样使用该 IP 的人将无法再次回答，您也不会阻止我再次回答。

您是否考虑过启用社交网络登录，例如 facbook 和 twitter 或 google+？这是登录的替代方法。

如果您只对 IP 感到满意，您可以简单地创建一个包含 IP 条目的数据库表。假设您已经拥有它并且该表包含三列（id、ip、调查）。

```
 <?
    //take the ip
     $user = $_SERVER['REMOTE_ADDR'];

//sanitize the ip (is it valid?). This can probably skipped with prepared statements but one never knows

    if (filter_var($user, FILTER_VALIDATE_IP)) {
    echo "This (ip_a) IP address is considered valid."; //for debug
    $user = md5( $user); //or whatever else if not md5

    $query = $mysqli->prepare("insert into iptable values (NULL, ?, ?)");
    //etc.

    }else{
    //return error
}
?> 
```

我希望这有帮助。不过我更喜欢登录。

# php - 如何将“AddThis”按钮添加到 Joomla

> ID：15155540
> 
> 赞同：0
> 
> 时间：2013-03-01T10:30:38.730
> 
> 标签：php, html, css, joomla, addthis

我已经*[为 Joomla 添加了 AddThis！](http://support.addthis.com/customer/portal/articles/381232-addthis-for-joomla-#.UTChOqWqf-Q)*Joomla 的模块。问题是我不能让它向左浮动。例如，这个站点在左侧有*AddThis*按钮，并且在滚动时它保持在同一个位置。我希望它在我的 Joomla 网站中完全一样。*在 Joomla 的AddThis*的模块管理器中，没有选项可以执行此操作。

任何人都可以在这件事上提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:33:32.777

要在页面左侧修复某些内容，请打开 CSS 文件并在文件底部替换以下内容：

```
.joomla_add_this {
    float:left;
} 
```

有了这个：

```
.joomla_add_this {
    position: fixed;
    left: 0;
    top: 100px;
} 
```

您可以更改`top: 0;`which 定义模块离顶部的距离。如果您想将其固定在底部，请`bottom: 0;`改用。

希望这可以帮助

# javascript - 按键 HIT/按下事件

> ID：15155541
> 
> 赞同：0
> 
> 时间：2013-03-01T10:30:38.657
> 
> 标签：javascript, jquery, javascript-events

我想接受按键事件。但这不在特定字段上，它在页面/窗口上。示例：在进行自动化时，在网页上我有快捷键假设“M”（键盘键）。那么我应该如何实现呢？如果可以实现插入java脚本那我怎么写呢？我是JavaScript的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:35:14.170

Using jquery you can do this as follow.

```
 $(document).keydown(function(e){
            if (e.keyCode == 77) { 
               alert( "M key pressed" );
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:36:32.580

试试下面的代码：

```
<script>
  function keyEvent (e) {
    if (!e)
      e = window.event;
    if (e.which) {
      keycode = e.which;
    } else if (e.keyCode) {
      keycode = e.keyCode;
    }
    if(keycode == 77){
      alert('Hi!');
    }
  }
  document.onkeydown = keyEvent;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:40:56.233

正如您在窗口上想要的那样，我会`eventListener`像这样直接在窗口对象上添加一个函数。如果你想改变 keyCode，你可以用谷歌搜索 keyCode。这适用于和不使用 jQuery 库:) [http://jsfiddle.net](http://jsfiddle.net/sagHc/4/)

```
window.addEventListener('keypress', function(e) {
    e = e || window.event;
    switch(e.which) {
        case 77:
            if (e.ctrlKey) { 
               alert( "M + ctrlKey is down" );
               // do some here
            }
            else {
                alert("M is down")
            }
        break;
    }

}, false); 
```

# c# - 如何让 c# 类相互了解？

> ID：15155543
> 
> 赞同：1
> 
> 时间：2013-03-01T10:30:48.623
> 
> 标签：c#, class

我有两个继承自同一个抽象类的类。我希望他们两个或至少一个知道另一个特定属性的变化。有什么简单的方法可以做到这一点吗？我一直在尝试将变量移动到父类，但这只会创建 2 个相同的变量，并且当我在第一个类中创建对另一个类的引用时，也会发生同样的事情。谢谢。

这就是我的代码的样子：

```
public abstract class Animal
    {
        public int MovementSpeed;
        public bool Death;
        public string Feedback;

        public bool DeerCaught;
        public int tiredRate;
        public virtual int Movement()
        {
            MovementSpeed = MovementSpeed - tiredRate;
            return MovementSpeed;
        }

        public virtual string Print()
        {
            return Feedback;
        }
    }

    public class Deer : Animal
    {
        public string hidden;
        public string Foraging;

        public int DeerCount;

        public Deer()
        {
            this.DeerCount = 10;
            this.DeerCaught = false;
            this.MovementSpeed = 10;
            this.tiredRate = 2;

        }
        public void Hide()
        {
            if (Hunting)
            {
                Feedback = "The deer is hiding.";
                if (DeerCount > 0)
                {
                    Print(); 
                }

            }
            else
            {
                //Forage();
            }
        }
        public void Forage()
        {
            if (!Hunting)
            {
                Feedback = "The deer is searching for food.";
                if (DeerCount > 0)
                {
                    Print();
                }

            }
            else
            {
                //Hide();
            }
        }
    }

    public class Wolf : Animal
    {

        public int Hunger;
        public bool Hunting;
        public Wolf()
        {
            this.Hunting = false;
            this.Hunger = 10;
            this.MovementSpeed = 10;
            this.tiredRate = 1;
        }
        public bool Hunt()
        {
            if (Hunger < 5)
            {
                Hunting = true;
                Feedback = "The wolf is searching for his next meal.";
                if (DeerCaught == true)
                {
                    Hunger++;
                }
                else
                {
                    Hunger--;
                }
                return Hunting;
            }
            else
            {
                Hunting = false;
                Feedback = "The wolf decides to rest.";
                Hunger--;
                return Hunting;
            }
        }
        public void Die()
        {
            if (Hunger < 0)
            {
                Death = true;
                Feedback = "The wolf has lost the hunt.";
            }

        }

    } 
```

我已经尝试`Hunting`在基类中设置为静态，但是当我运行每个类的方法时，我最终得到了两个不同版本的“Hunting”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T11:11:24.603

如果这是为了模拟，那么当狼在打猎时，鹿不会被告知，它必须找出答案。这里的类比是让鹿可以通过某种方式查询狼的存在（类似于`Deer.LookForWolves()`，然后检查`Hunting`每只狼的属性值。这将需要某种控制器类，代表世界。

```
class World
{
    public static List<Animal> Animals = new List<Animal>();
    //...
}

class Deer : Animal
{
    //...

    bool IsSafe()
    {
        return LookForWolves().All(wolf => !wolf.Hunting);
    }

    List<Wolf> LookForWolves()
    {
        return World.Animals.OfType<Wolf>();
    }

    //... 
```

或者，您可以`World`作为 each 的成员引用`Animal`，通过构造函数传入。这取决于您，并且取决于您是否需要拥有多个`World`对象，每个对象都有不同的`Animal`s 列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:42:29.790

诸如实施之类的东西`INotifyPropertyChanged`可能会有所帮助：

首先，声明一些实现的类`INotifyPropertyChanged`：

```
abstract class Base {

}

class ClassA : Base, INotifyPropertyChanged {
    public event PropertyChangedEventHandler PropertyChanged;

    private string _property;
    public string ClassAProperty {
        get {
            return _property;
        }
        set {
            _property = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ClassAProperty"));
        }
    }
}

class ClassB : Base, INotifyPropertyChanged {
    public event PropertyChangedEventHandler PropertyChanged;

    private string _property;
    public string ClassBProperty {
        get {
            return _property;
        }
        set {
            _property = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ClassBProperty"));
        }
    }
} 
```

然后，连接新实例以订阅该`PropertyChanged`事件：

```
using System.ComponentModel;

static void Main(string[] args) {
    ClassA a = new ClassA();
    a.PropertyChanged += PropertyChanged;
    a.ClassAProperty = "Default value";

    ClassB b = new ClassB();
    b.PropertyChanged += PropertyChanged;
    b.ClassBProperty = "Default value";

    b.ClassBProperty = "new value in B";
    a.ClassAProperty = "new value in A";

    Console.Read();
}

static void PropertyChanged(object sender, PropertyChangedEventArgs e) {
    Console.WriteLine("Property {0} on object {1} was changed, the value is \"{2}\"", e.PropertyName, sender.GetType().Name, sender.GetType().GetProperty(e.PropertyName).GetValue(sender));
} 
```

这个的输出是：

```
Property ClassAProperty on object ClassA was changed, the value is "Default value"
Property ClassBProperty on object ClassB was changed, the value is "Default value"
Property ClassBProperty on object ClassB was changed, the value is "new value in B"
Property ClassAProperty on object ClassA was changed, the value is "new value in A" 
```

每次设置任一属性时，`PropertyChanged`都会调用它，在上面的示例中，它将详细信息写入控制台。

在您的用例中，您将让事件调用另一个类中的方法（如果我理解正确的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:47:29.953

一种非常基本的方式来通知您自己的委托定义更改的属性。由于您不提供任何代码，因此我自己编写了一些类。以此为例来修改您自己的代码：

```
public delegate void PropertyChangedEventHandler();

public abstract class Base
{
}

public class A : Base
{
    public event PropertyChangedEventHandler PropertyChanged;

    private int _value;
    public int Value
    {
        get { return _value; }
        set 
        { 
            _value = value;
            if (PropertyChanged != null)
            {
                PropertyChanged();
        }
    }
}

public class B : Base
{
    private A _a;

    public B(A a)
    {
        _a = a;
        a.PropertyChanged += new PropertyChangedEventHandler(a_PropertyChanged);
    }

    private void  a_PropertyChanged()
    {
        Console.WriteLine(_a.Value);
    }
}

public class Application()
{
    public void DoStuff()
    {
        var a = new A();
        var b = new B(a);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T11:29:57.870

基本思想是将一个对象的引用传递给另一个对象。例如告诉鹿它正在被狼猎杀：

```
public class Wolf : Animal
{
    public void Hunt(Deer deer)
    {
        deer.SetHunter(this);
    }
} 
```

现在鹿可以检查是否有狼在猎杀它：

```
public class Deer : Animal
{
    Wolf _hunter;
    public void SetHunter(Wolf wolf)
    {
        _hunter = wolf;
    }

    public void Hide()
    {
        if (_hunter != null)
        {
            Feedback = "The deer is hiding.";
        }
        else
        {
            //Forage();
        }
    }
} 
```

这可以改进为更通用，但这是将一个对象的引用传递给另一个对象的基本思想。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T11:35:34.463

不要将公共字段用于类的属性。这样您将永远不会知道更改，因此无法通知其他人。将公共字段放入属性中，并始终使用这些属性来更改值，即使是在 Animal 类内部也是如此。然后可以使用属性设置器将更改通知其他人。

```
public abstract class Animal
{
    private int _movementSpeed;

    public int MovementSpeed
    {
        get
        {
            return _movementSpeed;
        }
        set
        {
            if (_movementSpeed != value)
            {
                _movementSpeed = value;
                OnMovementSpeedChanged();
            }
        }
    }

    protected virtual void OnMovementSpeedChanged()
    {
        // Derived classes can override this method.
        // It will be called each time MovementSpeed changes.
    }

    public virtual int Movement()
    {
        // always use the property to change the value
        // otherwise OnMovementSpeedChanged would never be called
        MovementSpeed -= tiredRate;
        return MovementSpeed;
    }
} 
```

像已经提到的其他人一样，您也可以`INotifyPropertyChanged`在您的基类中实现。由于这使用事件进行通知，因此不仅派生类可以使用它，而且任何其他引用动物的对象也可以使用。方法基本相同。每次属性值更改时，您都会调用一个触发事件的方法。然后任何其他对象都可以处理该事件。

```
public abstract class Animal : INotifyPropertyChanged
{
    private int _movementSpeed;

    public int MovementSpeed
    {
        get
        {
            return _movementSpeed;
        }
        set
        {
            if (_movementSpeed != value)
            {
                _movementSpeed = value;

                // call this method each time a property changes
                OnPropertyChanged(new PropertyChangedEventArgs("MovementSpeed"));
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs args)
    {
        // always implement events like this
        // -> check if the event handler is not null, then fire it
        if (PropertyChanged != null)
        {
            PropertyChanged(this, args);
        }
    }
} 
```

想要处理事件的类可以这样做：

```
public class AnyClass
{
    public AnyClass(Animal anAnimal)
    {
        TheAnimal = anAnimal;
        anAnimal += Animal_PropertyChanged;
    }

    public Animal TheAnimal { get; private set; }

    private void Animal_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "MovementSpeed")
        {
            Console.WriteLine("MovementSpeed changed"); 
        }
    }
} 
```

然而，派生类不需要处理事件。由于 OnPropertyChanged 方法被声明为受保护的虚拟方法，因此它们可以直接覆盖它。

```
public class Deer : Animal
{
    protected override void OnPropertyChanged(PropertyChangedEventArgs args)
    {
        if (args.PropertyName == "MovementSpeed")
        {
            Console.WriteLine("MovementSpeed changed");
        }

        // don't forget to call the base class otherwise the event will never get fired
        base.OnPropertyChanged(args);
    }
} 
```

# android - 谷歌地图 API v2 错误

> ID：15155549
> 
> 赞同：2
> 
> 时间：2013-03-01T10:31:15.940
> 
> 标签：android, android-fragments, google-maps-markers, google-maps-api-2

我在片段中的以下代码执行时遇到 numm 指针异常。

```
 MapFragment mapFragment = MapFragment.newInstance();
 FragmentTransaction fragmentTransaction =  getFragmentManager().beginTransaction();
 fragmentTransaction.add(R.id.container1, mapFragment);
 fragmentTransaction.commit();
 mGoogleMap=mapFragment.getMap();
 mGoogleMap.addMarker(new MarkerOptions().draggable(true).position(new LatLng(22.03, 72.56)).title("hello world").snippet("Ahmedabad").icon(BitmapDescriptorFactory.fromResource(R.drawable.wifi))); 
```

> 03-01 15:59:49.370：E/AndroidRuntime(12577)：引起：java.lang.NullPointerException 03-01 15:59:49.370：E/AndroidRuntime(12577)：在 com.tfick.fragment.PoiFragment.onCreateView (PoiFragment.java:64) 03-01 15:59:49.370: E/AndroidRuntime(12577): 在 android.app.FragmentManagerImpl.moveToState(FragmentManager.java:829) 03-01 15:59:49.370: E/AndroidRuntime (12577): 在 android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035) 03-01 15:59:49.370: E/AndroidRuntime(12577): 在 android.app.BackStackRecord.run(BackStackRecord.java:635) 03-01 15:59:49.370: E/AndroidRuntime(12577): 在 android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1397)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:34:33.660

我已经解决了问题。这是解决方案[Google Maps Android API v2 - 添加标记失败](https://stackoverflow.com/questions/15154906/google-maps-android-api-v2-add-a-marker-failed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:49:08.817

看来，`getMap()`回报`null`。可能的解决方案：

*   您是否检查`GooglePlayServicesUtil.isGooglePlayServicesAvailable(context)`过 Google Play 服务是否可用？
*   地图可能尚未初始化，`getMap()`请在生命周期的后期尝试，例如`onResume()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:33:21.067

这是我发现的问题的解决方案。

```
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.CameraPosition;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import com.tfick.android.R;

public class PoiFragment extends MapFragment {
    /*object of google map*/
    public GoogleMap mGoogleMap;
    /* summy location*/
    private static final LatLng SYDNEY = new LatLng(23.03, 72.62);

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        if (getMap() != null) {
            Log.d(getClass().getSimpleName(), "Map ready for use!");

            mGoogleMap = getMap();

            /* cretaing custom camera position */

            CameraPosition mCameraPosition = new CameraPosition.Builder()
                    .target(SYDNEY).bearing(0).tilt(30).build();
            Log.i("gmap", mGoogleMap.toString());

            /* setting custom camera position */

            mGoogleMap.animateCamera(CameraUpdateFactory
                    .newCameraPosition(mCameraPosition));

            /* adding custom marker on the map. */
            mGoogleMap
                    .addMarker(new MarkerOptions()
                            .draggable(true)
                            .position(new LatLng(22.03, 72.56))
                            .title("hello world")
                            .snippet("Ahmedabad")
                            .icon(BitmapDescriptorFactory
                                    .fromResource(R.drawable.wifi)));

            mGoogleMap
                    .addMarker(new MarkerOptions()
                            .draggable(true)
                            .position(new LatLng(23.03, 78.10))
                            .title("hello world")
                            .snippet("Baroda")
                            .icon(BitmapDescriptorFactory
                                    .fromResource(R.drawable.wifi)));

        }

    }

} 
```

# java - 为什么要测试 args.length？

> ID：15155567
> 
> 赞同：0
> 
> 时间：2013-03-01T10:32:23.413
> 
> 标签：java

我是一名 Java 初学者，我对在许多代码开头测试 args.length 感到困惑，为什么在我的任何代码中它都不会高于 0？

```
import java.net.Socket;
import java.net.UnknownHostException;
import java.io.IOException;

public class LowPortScanner {
public static void main(String[] args) {
String host = "localhost";
if (args.length > 0) {
host = args[0];
}
for (int i = 1; i < 1024; i++) {
try {
Socket s = new Socket(host, i);
System.out.println("There is a server on port " + i + " of "
+ host);
}
catch (UnknownHostException ex) {
System.err.println(ex);
break;
}
catch (IOException ex) {}
} // end for
} // end main
} // end PortScanner 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:35:40.493

您必须`main`从命令提示符输入 mathod。

像下面

```
java LowPortScanner TEST1 TEST2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:34:19.207

If there are no command arguments the `args[0]` will fail. This is why it must be protected.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:34:51.930

It depends on how you invoke the Java class file. In command prompt or bash shell:

> java LowPortScanner Argument1

typing the above line in the command prompt/bash will cause the argument count to increase to 1\. (because `Argument1` is one argument, after the class file `LowPortScanner`)

> java LowPortScanner Argument1 Argument2

the above line will make argument count to increase to 2\.

hence `args.length` will be `2` in the second case and `1` in the first case.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:36:09.400

如果你从 CMD 或 bash 调用你的程序，你可以像这样分配 ARGuments
`java LowPortScanner google.com`

那么“google.com”就是你的 args[0]。当您的程序支持命令行属性时，建议测试给定的参数是否正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T10:36:37.900

`args`in`public static void main(String[] args`是`String`从命令行传递的参数数组。

`java LowPortScanner argument1 argument2`

如果您尝试上述命令`args.length`将返回`2`.

至于检查长度的问题，它是为可以接受命令行参数的java程序完成的，如果没有传递参数，那么它们会提示输入。

```
if(args.length >0 ){
  //proceed using passed arguments
}else{
   //proceed with some default value
} 
```

您正在运行您的程序，`java LowPortScanner`因此没有传递任何参数并且`args.length`始终为零。

此外，如果您不传递任何参数并使用`host=args[0]`，您将得到`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T10:38:03.387

变量 String[] args 保存所有参数通过命令行传递给程序，如果你没有传递任何参数，那么 args 的长度变为 0。现在最好在访问它之前检查它的长度，否则有机会获得 ArrayIndexOutOfBoundsException如果它的大小为 0

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T10:33:42.923

因为如果不对其进行测试，则会抛出异常，因为`host = args[0];`这是非法的。

但是，这看起来并没有多大帮助，一个空的或`null` `host`看起来会导致进一步的问题。

如果 的长度`args`总是`0`，那么请确保您实际上是在传递参数参数。

# ns2 - NS-2.34 或 NS-2.35 中的定向天线

> ID：15155571
> 
> 赞同：0
> 
> 时间：2013-03-01T10:32:28.443
> 
> 标签：ns2

我想知道 ns-allinone-2.34 或 ns-allinone-2.35 是否支持定向天线？

问候，帕勒姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:41:00.603

全向天线是 ns2.. 中的默认天线。

ns2 中不提供定向型天线。您可以手动添加定向天线。

# xml - xslt 删除部分属性

> ID：15155572
> 
> 赞同：1
> 
> 时间：2013-03-01T10:32:29.090
> 
> 标签：xml, xslt, xslt-2.0

是否可以将属性从 "book1chapter2" 转换为 "chapter2" ？

例如这个节点：

```
<a myAttribute="part1chapter2" /> 
```

应该转化为

```
<a myAttribute="chapter2" /> 
```

我试过：

```
<xsl:variable name="chapter" select="replace('part1chapter2', 'book1', '')" /> 
```

但这会导致编译错误：

```
ERROR:  'Error checking type of the expression 'funcall(replace, [literal-expr(part1chapter2), literal-expr(part1), literal-expr()])'.'
FATAL ERROR:  'Could not compile stylesheet' 
```

我使用 XSLT 2.0 版。

没有任何库的解决方案将不胜感激:)

编辑：

Java代码，使用javac -g TestXslt.java编译运行；java TestXslt;

```
public static void main(String[] args) throws IOException, URISyntaxException, TransformerException {
    TransformerFactory factory = TransformerFactory.newInstance();
    Source xslt = new StreamSource(new File("../transform.xslt"));
    Transformer transformer = factory.newTransformer(xslt);

    Source text = new StreamSource(new File("../input.xml"));
    String r = new String();
    StreamResult result = new StreamResult(new File("../output.xml"));
    transformer.transform(text, result);
} 
```

Java版javac 1.6.0_27

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T11:26:18.057

我认为您认为在样式表上说 version="2.0" 会自动获得 XSLT 2.0 处理器。这不是它的工作方式。您获得的处理器取决于您的类路径中的内容，如果您选择默认的 JDK 处理器，它仅支持 XSLT 1.0。XSLT 1.0 的规范说，如果它看到对像 replace() 这样的无法识别的函数的调用，它应该引发运行时错误。

要在 XSLT 2.0 下运行它，请下载 Saxon 并确保它位于您的类路径中。理想情况下，为了健壮性，不要依赖 JAXP 加载方法来找到它，而是显式加载它。代替

```
TransformerFactory factory = TransformerFactory.newInstance(); 
```

做

```
TransformerFactory factory = new net.sf.saxon.TransformerFactoryImpl(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:53:00.867

我不太确定您是要更改属性内容还是属性名称。

如果是前者，则替换函数参数为（输入字符串、正则表达式、替换字符串），因此您可以尝试类似`replace(@attributeToChange, 'book1chaper2', 'book1')`. 如果是后者，那么我认为您需要类似的东西：

```
<xsl:attribute name="book1">
    <xsl:value-of select="@book1chaper2"/>
</xsl:attribute> 
```

编辑

不过，您遇到编译器错误很奇怪。如果您的 XSLT 引擎中的该功能存在问题，另一种方法（如果您正在更改内容）将是：

```
<xsl:choose>
    <xsl:when test="@attributeToChange='book1chaper2'">
         <xsl:text>book1</xsl:text>
    </xsl:when>
    <xsl:otherwise>
         <xsl:value-of select="@attributeToChange"/>
    </xsl:otherwise>
</xsl:choose> 
```

进一步编辑

听起来您的处理器可能是 XSLT 1.0：

[使用 eclipse 运行 XSLT 时出错](https://stackoverflow.com/questions/12824507/error-when-runing-xslt-with-eclipse)

尝试`starts-with(@attributeToChange, 'book1')`在选择时用作测试，否则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:53:43.087

你可以简单地这样做：

```
<xsl:variable name="chapter" select="substring-after('book1chapter2', 'book1', '')" /> 
```

但是值是否总是在开头包含“book1”？您是否从其他地方获得“book1”值，因此总是知道要删除哪个部分？

# php - PHP将用户评论添加到图片库

> ID：15155574
> 
> 赞同：1
> 
> 时间：2013-03-01T10:32:35.557
> 
> 标签：php, loops, comments, gallery

我真的很努力向我制作的用户生成的 php 库添加评论。我有一个用于图像的数据库表：userimage（id、imagepath、userid、description）和带有外键列（comment_id、comment、auther、image_id、comment_date）的表 image_comment。我的方法是使用 sql 查询创建一个函数，并在我的画廊的 while 循环中调用它——希望在循环中提取正确的注释到匹配的图像。
功能：

```
function getImageComments($imageId){
$query = "SELECT userimage.id, image_id, comment, id, comment_date
FROM userimage, image_comment
WHERE image_comment.image_id=userimage.id
ORDER BY comment_id DESC";
mysql_query($query);} 
```

While 循环中的变量和函数调用：

```
while($gallery_data=mysql_fetch_assoc($gallery_result))
{
$gallery_out .= "<div class=\"pic-container\"><img src=\"".$gallery_data['path']."\">";

$imageId = $gallery_data['id'];
$gallery_out .= getImageComments($imageId); 
```

这对我来说绝对没有任何作用，我只是在这里放养，没有幻想看看如何继续......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:41:03.123

```
function getImageComments($imageId){
   $query = "SELECT userimage.id, image_id, comment, id, comment_date
   FROM userimage, image_comment
   WHERE image_comment.image_id=userimage.id
   AND userimage.id='$imageId';
   ORDER BY comment_id DESC";
   $result=mysql_query($query);
   //do something with this query result, since you are doing $gallery_out .= getImageComments($imageId);
   $return_value="";
   while($row=mysql_fetch_array($result)){
       $return_value.="<div>$row[2]</div>";
   }  
   return $return_value;
} 
```

此外，如果您正在开发新代码，请考虑使用 mysqli_ 函数或 PDO！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:56:39.283

即使代码与您的代码完全不同。我做了类似于你的画廊的事情，每个帖子只使用两个查询而不是 1 + 1。

$user->GetPosts() 的一部分；（我省略了查询）

```
$posts = []; 
$post_IDs = [];
while($row = $result->fetch_assoc())
{
    if(!in_array($row['object_ID'], $post_IDs))
        $post_IDs[] = $row['object_ID'];

    $posts[] = new Post($row, $_SESSION['uid']);
}

if(count($post_IDs) == 0)
    return $posts;

$result = $this->getComments($post_IDs);

while($row = $result->fetch_assoc())
{
    $comment = new Comment($row, $_SESSION['uid']);
    foreach($posts as $post)
        if($post->object_ID == $comment->object_commented_ID)
            $post->comments[] = $comment;
}

return $posts; 
```

在 $this->getComments($post_IDs); 中查询 这是查询：

```
$object_IDs = implode(",", $object_IDs);

$query = 
    "SELECT 
        comments.object_ID, comments.object_commented_ID, comments.entity_ID, 
        comments.datetime, comments.text, 
        objects.likes, SUM(IF(likes.user_ID=?, 1, 0)) AS allowLike, 
    users.first_name, users.last_name, userinfo.image_ID FROM comments 
    LEFT JOIN users ON users.entity_ID=comments.entity_ID 
    LEFT JOIN userinfo ON users.entity_ID=userinfo.user_ID 
    LEFT JOIN likes ON likes.object_ID=comments.object_ID 
    LEFT JOIN objects ON objects.ID=comments.object_ID
    WHERE comments.object_commented_ID IN(". $object_IDs .") 
    GROUP BY comments.object_ID ORDER BY comments.datetime ASC LIMIT 0,100"; 
```

然后在一个单独的 foreach 循环中我调用

```
$post->Show(); //Which in turn calls foreach $comment->Show(); 
```

# java - java - 如何从java eclipse DOM上的XML文件中获取href值

> ID：15155582
> 
> 赞同：5
> 
> 时间：2013-03-01T10:32:49.680
> 
> 标签：java, xml, parsing, dom

我有一个格式为 XML 的文件：

```
<?xml version="1.0"?>

    <company>
    <tr>
    <td align="center" style="width:50px;">9850</td>
    <td align="center" style="width:150px;">Europe</td>
    <td align="center" style="width:150px;">Ukraine</td>
    <td align="center" style="width:100px;">Kiev</td>
    <td align="center"><a href="details.aspx?page=default&amp;post=99664">Kiev 1</a> </td> 
    </tr>
 </company> 
```

**我的程序**

```
import javax.xml.parsers.DocumentBuilderFactory;

import javax.xml.parsers.DocumentBuilder;

import org.w3c.dom.Document;

import org.w3c.dom.NodeList;

import org.w3c.dom.Node;

import org.w3c.dom.Element;

import java.io.File;

public class Myversion { public static void main(String argv[])  {

        try { File myfile = new File("/Users/Nik/Downloads/1.xml");

    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();

    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();

    Document doc = dBuilder.parse(myfile);

    doc.getDocumentElement().normalize();

    NodeList nodeList = doc.getElementsByTagName(doc.getDocumentElement().getChildNodes().item(1).getNodeName());;

    for (int temp = 0; temp < nodeList.getLength(); temp++) {

    Node nNode = nodeList.item(temp);

    if (nNode.getNodeType() == Node.ELEMENT_NODE) {

    Element element = (Element) nNode;

    System.out.print("id"+temp+" "+element.getElementsByTagName("td").item(0).getTextContent());
    System.out.print(" "+element.getElementsByTagName("td").item(1).getTextContent());
    System.out.print(" "+element.getElementsByTagName("td").item(2).getTextContent());
    System.out.print(" "+element.getElementsByTagName("td").item(3).getTextContent());
    System.out.print(" "+element.getElementsByTagName("td").item(4).getTextContent());

    }}} catch (Exception e) {e.printStackTrace();}}} 
```

**输出：**

```
id0 98500 Europe Ukraine Kiev Kiev 1 
```

ia 如何获得 href 的值？需要输入什么代码来输出链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:53:14.480

将此代码添加到侧面 for 循环

```
 Node href = element.getElementsByTagName("td").item(4);
    NodeList hrefList = href.getChildNodes();
    Element hrefEle = (Element)hrefList.item(0);
    System.out.println("href of "+ href.getTextContent() +"-->"+hrefEle.getAttribute("href")); 
```

# hibernate - 休眠双向多对多删除问题

> ID：15155587
> 
> 赞同：5
> 
> 时间：2013-03-01T10:32:59.207
> 
> 标签：hibernate, many-to-many, hibernate-mapping

在我的项目中，我有用户和公司的实体：

```
@Entity
@Table(name = "users")
public class UserDetails {

    @Id
    @GeneratedValue
    @Column(name = "user_id")
    private int id;

    @Column(name = "first_name")
    @NotEmpty
    @Size(min = 2, max = 20)
    private String firstName;

    @ManyToMany(cascade = CascadeType.REFRESH)
    @JoinTable(name = "users_companies",
            joinColumns = @JoinColumn(name = "user_id"),
            inverseJoinColumns = @JoinColumn(name = "company_id"))
    private Set<CompanyDetails> userCompanies = new HashSet();

    //getters and setters of course...
}

@Entity
@Table(name = "companies")
public class CompanyDetails {
    @Id
    @GeneratedValue
    @Column(name = "company_id")
    private int id;

    @Column(name = "name")
    @NotEmpty
    @Size(min = 1, max = 255)
    private String name;

    @ManyToMany(mappedBy = "userCompanies")
    private Set<UserDetails> companyUsers = new HashSet();

} 
```

我将用户分配给公司，然后尝试删除。当我删除用户时，一切正常 - 用户已删除，“users_companies”表中的记录也已删除，公司仍保留（根据需要）。但是，当我尝试删除一家公司时，我的堆栈跟踪具有以下根本原因：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`d_torianik/users_companies`, CONSTRAINT `FK447D806437A764EB` FOREIGN KEY (`company_id`) REFERENCES `companies` (`company_id`)) 
```

你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-25T20:47:29.967

我知道这很旧，但它可能对某人有所帮助......我试图做同样的事情 - 从每个主表中删除以首先在连接表中删除引用的记录，然后从主表中删除记录。benzonico 的帖子是有效的，但有一种更简单的方法可以做到这一点（不必自己从连接表中删除记录）。公司表的映射也需要更改为主表（不要使用 mappedBy）：

```
@Entity
@Table(name = "companies")
public class CompanyDetails {
    @Id
    @GeneratedValue
    @Column(name = "company_id")
    private int id;

    @Column(name = "name")
    @NotEmpty
    @Size(min = 1, max = 255)
    private String name;

    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinTable(name = "users_companies",
    joinColumns = {@JoinColumn(name = "company_id")},
    inverseJoinColumns = @JoinColumn(name = "user_id"))
    private Set<UserDetails> companyUsers = new HashSet();

} 
```

这应该够了吧。现在，每当您删除公司时，Hibernate 都会先删除 users_companies 中的记录，然后再删除公司本身。更多信息在这里： http: [//www.codereye.com/2009/06/hibernate-bi-directional-many-to-many.html](http://www.codereye.com/2009/06/hibernate-bi-directional-many-to-many.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:50:12.527

您必须`CascadeType.REMOVE`在实体`Cascade`属性的注释中添加一个。`companyUsers``CompanyDetails`

[评论后编辑]

抱歉，我在回答中错过了一件事，那就是它是多对多的。所以级联删除不起作用。那么问题是负责关系的是UserDetails类。这就是为什么它以一种方式工作而不是以另一种方式工作的原因。在删除公司之前，您可能必须从 companyUsers 集的每个 UserDetails 中的 userCompanies 集中删除该公司。

# java - Java ArrayList 声明

> ID：15155588
> 
> 赞同：8
> 
> 时间：2013-03-01T10:33:03.020
> 
> 标签：java, generics, arraylist

我目前正在学习 Java OCA 考试，遇到了一个与 ArrayList 声明有关的问题。

> 以下哪项是有效的？：
> 
> ```
> 1\. ArrayList al1 = new ArrayList();
> 2\. ArrayList al2 = new ArrayList<>();
> 3\. ArrayList<> al3 = new ArrayList<>();
> 4\. ArrayList<Double> al4 = new ArrayList<>();
> 5\. ArrayList<Double> al5 = new ArrayList<Float>(); 
> ```

根据我的书，答案 1,2 和 4 是有效的。答案 3 和 5 无效。

但是，没有给出适当的解释。它所做的只是展示了声明 ArrayList 的标准方法：

```
ArrayList<E> al3 = new ArrayList<E>(); 
```

并提到在没有泛型部分的情况下声明 ArrayList 也是有效的。

我也无法在网上找到关于这个主题的体面文章。有人可以解释（或指向一篇好文章的方向）上面的不同排列吗？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T10:36:16.220

1 适用于所有 Java 版本

在这里，您在不使用泛型的情况下声明 ArrayList。这意味着无论您将什么添加到数组列表中，当您将其取出时，它将是类型`Object`并且需要强制转换为类型。这是在 Java 1.4（前泛型）中使用集合的旧方式，并且支持向后兼容。现在你应该总是使用泛型。

* * *

2 和 4 仅在 Java 7 中有效

空括号： <> 是 Java7 的新类型推断，这意味着您不必指定类型两次。注意**Java7**，它不适用于旧版本。

所以在Java7

```
ArrayList<Double> al4 = new ArrayList<>(); 
```

是相同的

```
ArrayList<Double> al4 = new ArrayList<Double>(); 
```

此链接包含有关类型推断的更多信息：http: [//docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)

* * *

3 无效，因为如果您使用泛型，则必须在变量声明中指定类型。

* * *

5 是无效的，因为如果你声明了一个 Double 类型的 List，你就不能给它分配一个 Float 类型的 List，你只能给它分配一个 Double 类型的列表。

所以这将是有效的：

```
ArrayList<Double> al5 = new ArrayList<Double>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:46:46.360

低于 2 将是有效`only in Java SE7`的。**Java SE7**允许类型推断，因此您无需`<>`再次在内部提供类型。

```
 ArrayList<Double> al4 = new ArrayList<>();
  ArrayList al2 = new ArrayList<>(); 
```

* * *

另一方面，下面的一个在`all Java versions`; 这是为了确保非通用代码的向后兼容性。

```
ArrayList al1 = new ArrayList(); 
```

* * *

以下是不允许的，因为 Float 集合不是 Double 集合的子类型。而且 Float 不是 Double 的子类型；所以毫无疑问它是一个有效的声明。请注意，即使是数组版本也无法编译。

```
 Double[] dd = new Float[5];  //won't compile
 ArrayList<Double> al5 = new ArrayList<Float>(); //won't compile 
```

* * *

以下一个不是有效的声明。

```
ArrayList<> al3 = new ArrayList<>(); 
```

# zend-framework - Zend: 是否有禁用 ajax 请求的 init 功能？

> ID：15155593
> 
> 赞同：0
> 
> 时间：2013-03-01T10:33:13.473
> 
> 标签：zend-framework

我正在对我的一个控制器进行 ajax 调用。但是每次我打电话时都会执行 init() （这就是 init() 的工作方式）。那么有什么方法可以禁用 init() 的执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:17:19.953

最简单的方法是检查它是否是 init 中的 Ajax 请求：

```
public function init()
{
    if (!$this->getRequest()->isXmlHttpRequest()) {
        // init code here
    }       
} 
```

# zk - 来自 Java API 的 ZK Fire 事件

> ID：15155594
> 
> 赞同：0
> 
> 时间：2013-03-01T10:33:15.597
> 
> 标签：zk

我在 ZK 中定义了一个自定义命令，并希望通过单击菜单项来调用它。

我看到我们可以定义一个 AuRequest 对象，但是找不到像我们在 JavaScript 中使用 zkau.send 函数那样发送这个 AuRequest 的方法。

有什么可能吗？如果没有，是否可以在 JavaScript 函数中定义 zkau.send 并在 MeunItem Click Event 中调用它？

```
 public class MyCustomCommand extends Command
     {
        protected MyCustomCommand(final String id, final int flags)
        {
            super(id, flags);
        }

        @Override
        protected void process(final AuRequest request)
        {
            System.out.println("Menu Item Click");
        }

     } 
```

注册命令：

```
<bean id="myCustomCommand" class="com.test.commands.MyCustomCommand">
    <constructor-arg value="onMenuEdit" />
    <constructor-arg><util:constant static-field="org.zkoss.zk.au.Command.IGNORE_OLD_EQUIV"/></constructor-arg>
</bean> 
```

和 MenuItem 事件

```
 menuItem.addEventListener(Events.ON_CLICK, new EventListener()
        {
            @Override
            public void onEvent(final Event event) throws Exception
            {

                final Tree tree = (Tree) parent;
                final Treeitem treeitem = tree.getSelectedItem();

                final AuRequest auRequest = new AuRequest(treeitem.getDesktop(), treeitem.getUuid(), "onMenuEdit", new String[]{});

                //how to send the auRequest??
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:08:10.597

正如您在此处建议的那样，我无法评论`Command`or对象的使用。`AuRequest`我从未见过它们被使用过，我自己也从未使用过它们。如果有办法使用它们来解决这个问题，希望你能得到答案。也就是说，还有其他方法可以实现您想要做的事情。

正如开发者参考的[事件触发](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Event_Handling/Event_Firing)部分所详述的，您可以从静态`Events`对象触发事件。

```
Events.postEvent("onMenuEdit", myTree, myDataEgTheTreeItem); 
```

或者..

```
Events.sendEvent("onMenuEdit", myTree, myDataEgTheTreeItem); 
```

或者..

```
Events.echoEvent("onMenuEdit", myTree, myDataEgTheTreeItem); 
```

任何这些都可以在[`Composer`](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/Controller/Composer)using..

```
@Listen("onMenuItem = #myTree")
public void onTreeMenuItemEvent(Event event) {
    // Handle event
} 
```

希望有帮助。

# solr - Solr 3.6 Distribution 动态添加分片

> ID：15155598
> 
> 赞同：0
> 
> 时间：2013-03-01T10:33:32.550
> 
> 标签：solr, lucene, load-balancing, distribution, sharding

我正在考虑使用 Solr 3.6 与 Solr 4+ (SolrCloud) 的分布和分片

我可以看到 3.6 可以设置多个分片，理想情况下每个分片将位于不同的盒子上。一旦盒子开始内存不足，我想在索引中添加新的分片。据我所知，这是无法完成的/没有记录。

这是否需要对数据进行完整的重新索引？

可以将索引为 3 的分片重新索引到 4 分片实例中吗？

在重新索引期间是否仍可以在索引上调用查询？

重新索引所需的空间开销是多少？

schema.xml（字段名称和类型）不会更改，只是添加了一个新的分片位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T14:58:13.970

自我回答——据我所知，最好停止填充 3 个分片，只用数据填充新的第 4 个分片。然后更新 shards 参数以包含要搜索的新分片。

# json - Unrecognized Property in fetching data from JSONObject in Jersey web service

> ID：15155603
> 
> 赞同：1
> 
> 时间：2013-03-01T10:33:45.700
> 
> 标签：json, web-services, jersey, jackson, jax-rs

I need to convert a certain JSON string to a Java object. I am using Jackson for JSON handling. Here is my Java class:

```
public class RequestClass {

    String email_id;
    String password;

    public String getEmailId() {
        return email_id;
    }

    public String getPassword() {
        return password;
    }

    @Override
    public String toString(){

        return email_id+" "+password;
    }
} 
```

Here is the web service code:

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
@Path("/dbconnect3")
public String connectToDbTest3(RequestClass rc) {
    System.out.println("connectToDbTest3");
    String email_id = rc.getEmailId();
    String password = rc.getPassword();
    System.out.println(email_id + " " + password);
} 
```

This throws exception `UnrecognizedPropertyException` with message `"Unrecognized field "email_id" (Class jaxrs.RequestClass), not marked as ignorable"`.

In case i am not using the annotation `@JsonIgnoreProperties(ignoreUnknown = true)` in my Java class, the output I am getting on line 09 is:

```
null myPassword 
```

So I don't want to ignore Unrecognized field instead I want to get the value of `email_id`.

Please tell why It shows `email_id` as Unrecognized field while password is fetched successfully.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:59:53.900

只需在下面给出[`@JsonProperty("email_id")`](https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonProperty.html)的之前添加`getEmailId()`：

```
@JsonProperty("email_id")
public String getEmailId() {
   return email_id;
} 
```

# c++ - weird case of constructor initialization list

> ID：15155604
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:33:50.600
> 
> 标签：c++, visual-c++, c++11, std

consider the following codes:

```
class class1
{

public:
    class1() : _cancel(false) { }

private:
    bool _cancel;

}

class class2
{

public:
    class1 obj1;
}

class class3
{
    void addClass2(class2 _obj2) {
        this->obj2.push_back(_obj2);
    }
private:
    std::vector<class2> _obj2;
} 
```

And using it to other file

```
void Init()
{

    class2 object2;
    class3 object3;
    object3.addClass2(object2);
} 
```

the `_cancel` of class1 here did not initialize to false

but I resolve the problem here by this:

```
//class3

void addClass2(class2 _obj2) {
    this->_obj2.push_back(std::move(_obj2));
} 
```

I'm confused with the behavior of that. Is there any thing I should know about `std::vector::push_back` ?

**EDIT**

Sorry for not bringing my copy of code here. I am not on my own computer 'cause I don't have internet

In the class3 implementation above is wrong. so here's the new one

```
//class3

class class3
{
public:
    void addClass2(std::vector <class2> _obj) {
        this->_obj = _obj;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:44:22.707

此代码`false`在[堆叠弯曲（gcc4.7）上输出](http://stacked-crooked.com/view?id=3fcea1f4f5f8123ef764d10378f9d834)

**编辑**我将 bool 更改为 int; 使用 bool，理论上我们有 50% 的机会随机选择正确的值；使用int，它仍然可以`42`正确输出。

```
#include <iostream>
#include <vector>
using namespace std;

class class1 {
public:
    class1() : _cancel(42) { }

    int _cancel;
};

class class2
{
public:
    class1 obj1;
};

class class3 {
public:
    void addClass2(class2 _obj2) {
        this->_obj2.push_back(_obj2);
    }

    std::vector<class2> _obj2;
};

int main() {
    class2 object2;
    class3 object3;
    object3.addClass2(object2);

    cout << object3._obj2[0].obj1._cancel << endl;
} 
```

# jquery - 返回true时使用jquery ajax没有回调

> ID：15155607
> 
> 赞同：0
> 
> 时间：2013-03-01T10:34:04.250
> 
> 标签：jquery, ajax, forms

我尝试使用查询ajax，当我有“return false”时，我也会得到回调

```
$(document).ready(function(){

    $("form#Form").submit(function(){
        $.ajax({
            url: "ajax.php",
            type: "POST", 
            data: $(this).serialize(), 
            success: function(callback){ 
                alert(callback);            
            } //success
        }); //ajax

        return false;

    }); //submit
}); //ready 
```

在 php 文件中，我只是回显“dennis”，它可以工作，并且我会收到内容“dennis”的警报。当我尝试这样的事情时：

```
$(document).ready(function(){

    $("form#Form").submit(function(){
        $.ajax({
            url: "ajax.php",
            type: "POST", 
            data: $(this).serialize(), 
            success: function(callback){ 
                alert(callback);            
            } //success
        }); //ajax

    if (callback == "dennis"){
        return false;
    }else{
        return true;
    }   

    }); //submit
}); //ready 
```

我得到空警报，表格表现得就像他得到“返回真实”一样。我也尝试放置变量并返回他，但仍然是同样的问题..

为什么会这样？如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:44:15.543

请参阅我对您的问题的第一条评论，这就是为什么它不起作用。

你*可以*做这样的事情，但我**不**推荐它：

```
var foo = null;

$.ajax({
    url: '/',
    method: 'POST',
    async: false,
    success: function(result) {
        foo = result;
    }
});

// use foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:44:24.290

这是因为 ajax-scope 将异步执行，因此当您检查时`if (callback == "dennis")`，您的 ajax 调用*可能*甚至还没有到达您的 php，因此回调将是*undefined*。

您需要在成功范围内检查`callback`（它实际上是一个错误的变量名，因为它不是回调，而是您的 ajax 调用的*结果*）。

```
$.ajax({
    url: "ajax.php",
    type: "POST", 
    data: $(this).serialize(), 
    success: function(callback){ 
       alert(callback);
       if (callback == 'dennis') {
           return true;
       } else return false;
    } //success
}); //ajax 
```

现在，您的下一个问题是您的表单可能已经返回 true，因此最好使用您的结果调用新函数，而不是在此处返回 true|false。

```
 // ajax metod success function
    success: function(result){ 
       alert(callback);
       onFormReturn(result);
    } //success 
```

并定义处理结果的函数

```
// elsewhere, outside ajax-scope - even outside document.ready
function onFormReturn(result) {
   if (result == "dennis") {
      // do your stuff
   } else {
      // do something else
   }
} 
```

# java - Date - Java to Sql table and sql table to Java through Joda Time

> ID：15155614
> 
> 赞同：0
> 
> 时间：2013-03-01T10:34:25.923
> 
> 标签：java, sql, date, jodatime

我正在寻找一种方法来获取今天的日期并传递给 sql 表并保存在那里。调用保存的日期并使用 JODA TIME API 执行一些任务。更改后的 Joda 时间日期到 sql 表并保存在那里并继续处理..

我试过这个方法

```
//prints todays date
java.sql.Date sqlDate = new java.sql.Date(new Date().getTime());
//passes wrong date to the table like 1970-07-01 instead of 2013-03-01
String insert = "INSERT INTO TEST_TABLE VALUES(1,"+sqlDate+")";
pStmt = conn.prepareStatement(insert);
pStmt.executeUpdate();

//converting to joda time 
LocalDate ld = new LocalDate(sqlDate);

//some calculations, and how to convert back to sql date? 
```

我在这里要做的是，一个包含 3 列（id、startdate、finishdate）的表。id 将由用户输入，开始日期应自动输入今天的日期。在使用 joda 时间和完成日期进行一些计算后，将设置为完成日期。

代码

```
String insert = "INSERT INTO TEST_TABLE VALUES(2,'"+timestamp+"')"; 
```

错误

```
Data type mismatch in criteria expression
//I have created table using MS access
//the format of the date column is Date/Time. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:43:52.993

您可以在此处使用时间戳。`java.sql.Timestamp`extends `java.util.Date`，所以你可以用 a 做任何事情，你也可以用 a 做任何`java.util.Date`事情`java.sql.Timestamp`。

将 LocalDateTime 转换为时间戳

```
Timestamp timestamp = new Timestamp(localDateTime.toDateTime().getMillis()); 
```

但是如果你仍然想转换`Timestamp`成 java.sql.Date 然后使用这个

```
java.sql.Date date = new java.sql.Date(timeStamp.getTime()); 
```

# django - Django - How to trigger an action when a specific model is saved?

> ID：15155616
> 
> 赞同：2
> 
> 时间：2013-03-01T10:34:28.077
> 
> 标签：django, django-models

I have two models. One called MainModel and other called HistoricMainModel. I would like to INSERT automatically a row in the HistoricMainModel every time I data is inserted to MainModel. What is best/correct way of doing this in Django?

Best Regards,

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T10:41:40.470

如果您已经有一些自定义`save()`的 .-magic 正在进行，我建议您使用最适合您的`post_save()`信号或信号。`pre_save()`

在你的`models.py`

```
@receiver(pre_save, sender=MainModel)
def save_a_historicmodel(sender, **kwargs):
    #do your save historicmodel logic here 
```

或者

```
def save_a_historicmodel(sender, instance, created, **kwargs):
    print "Post save was triggered! Instance:", instance

signals.post_save.connect(save_a_historicmodel, sender=MainModel) 
```

这样可以使每次`MainModel`保存您的信号时都会触发此信号。

[文档在这里](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_save)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:01:09.740

您可以自己实现它，但*最好*的方法是使用执行此操作的应用程序 - 例如[`reversion`](https://github.com/etianen/django-reversion/)- 自动实现模型历史记录/回滚的 django 应用程序。

除了您将实施的任何内容外，`reversion`还将为您提供：

1.  [与管理后端](https://github.com/etianen/django-reversion/wiki/Admin-integration)集成。
2.  用于将元数据添加到您的版本并恢复到模型的先前版本的API [。](https://github.com/etianen/django-reversion/wiki/Low-level-API)

它更加灵活，并且被广泛使用和实施。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T10:37:47.350

在调用“真实”方法之前，重写`save`MainModel 模型中的方法以创建和插入 HistoricMainModel 对象`save`。

# c# - Python console in C#

> ID：15155617
> 
> 赞同：0
> 
> 时间：2013-03-01T10:34:32.253
> 
> 标签：c#, python, multithreading, process

I'm trying to create a control which is implementing a python console. Unfortunately it doesn't receive any Python output.

```
 Queue<string> qstring = new Queue<string>();
    Thread thread;
    Process prc;
    void pythonmain()
    {
        if (DesignMode) return;
        prc = new Process();
        prc.StartInfo.FileName = "python";
        prc.StartInfo.Arguments = " -u";
        prc.StartInfo.RedirectStandardInput = true;
        prc.StartInfo.RedirectStandardOutput = true;
        prc.StartInfo.RedirectStandardError = true;
        prc.StartInfo.UseShellExecute = false;
        prc.StartInfo.CreateNoWindow = true;

        prc.EnableRaisingEvents = true;
        prc.OutputDataReceived += new DataReceivedEventHandler(prc_OutputDataReceived);
        prc.ErrorDataReceived += new DataReceivedEventHandler(prc_ErrorDataReceived);
        prc.SynchronizingObject = this;

        prc.Start();
        prc.BeginOutputReadLine();
        prc.BeginErrorReadLine();

        while (!prc.HasExited)
        {
            lock (qstring)
            {
                if (qstring.Count > 0) prc.StandardInput.Write(qstring.Dequeue()+"\n");
            }
        }

        prc.WaitForExit();
    }

    void prc_ErrorDataReceived(object sender, DataReceivedEventArgs e)
    {
        if (e.Data != null)
        {
            richTextBox1.BeginInvoke(new Action<string>((s) => richTextBox1.AppendText(s)),e.Data);
        }
    }

    void prc_OutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        System.Diagnostics.Process p = (Process)sender;

        if (e.Data != null)
        {
            richTextBox1.BeginInvoke(new Action<string>((s) => richTextBox1.AppendText(s)), e.Data);
        }
    }

    public PyConsoleControl()
    {
        InitializeComponent();
        if (!DesignMode)
        {
        thread = new Thread(pythonmain);
        thread.IsBackground = true;
        thread.Start();
        }
    }

    private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            lock (qstring)
            {
                qstring.Enqueue(textBox1.Text);
            }
            textBox1.Clear();
        }
    }
} 
```

How you can see I'm creating a new thread which is starting a Python shell, but no Python output is returned. How can I fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:50:15.070

一定要看看[IronPython](http://ironpython.codeplex.com/)，它几乎肯定会做你想做的事。

例如

```
using System;
using IronPython.Hosting;
using Microsoft.Scripting.Hosting;
// we get access to Action and Func on .Net 2.0
using Microsoft.Scripting.Utils;

namespace TestCallIronPython
{
    class Program
    {
        public static void Main(string[] args)
        {
            Console.WriteLine("Hello World!");
            ScriptEngine pyEngine = Python.CreateEngine();
            ScriptScope pyScope = pyEngine.CreateScope();
            pyScope.SetVariable("test", "test me");

            string code = @"
             print 'test = ' + test
             class MyClass:
             def __init__(self):
               pass

             def somemethod(self):
               print 'in some method'

             def isodd(self, n):
               return 1 == n&nbsp;% 2
           ";
           ScriptSource source = pyEngine.CreateScriptSourceFromString(code);
           CompiledCode compiled = source.Compile();
           compiled.Execute(pyScope);

           // Get the Python Class
           object MyClass = pyEngine.Operations.Invoke(pyScope.GetVariable("MyClass"));
           // Invoke a method of the class
           pyEngine.Operations.InvokeMember(MyClass, "somemethod", new object[0]);

           // create a callable function to 'somemethod'
           Action SomeMethod2 = pyEngine.Operations.GetMember&lt;Action&gt;(MyClass, "somemethod");
           SomeMethod2();

           // create a callable function to 'isodd'
           Func&lt;int, bool&gt; IsOdd = pyEngine.Operations.GetMember&lt;Func&lt;int, bool&gt;&gt;(MyClass, "isodd");
           Console.WriteLine(IsOdd(1).ToString());
           Console.WriteLine(IsOdd(2).ToString());

           Console.Write("Press any key to continue . . . ");
           Console.ReadKey(true);
       }
   }
} 
```

直接取自[这个](http://www.ironpython.info/index.php/Using_Python_Classes_from_.NET/CSharp_IP_2.6)例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:28:19.483

请注意，您应该确保该过程实际启动，为此您应该检查方法启动的结果。如果进程启动，则返回 true，否则返回 false。

# sql - Using an amemded @From and @To date to get a new result

> ID：15155619
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:34:34.393
> 
> 标签：sql, tsql

This is my criteria for the SQL below:

From Date 07 Jan 2013 To Date 18 Mar 2013

1 - First Sunday After 07 Jan 2013 is 13 Jan 2013 - Done (FirstSunday) 2 - First Sunday Before 18 Mar 2013 is 17 Mar 2013 - Done (LastSunday) 3 - How many days between 13 Jan 2013 and 17 Mar 2013 = 63, Divide 63 by 7 = 9, +1 = 10

So what I need my datediff to do is use the results from the 1st and 2nd rows above (First and Last Sundays date) so I get the correct result for section 3\. Can you help?

```
Declare @From Datetime
Declare @To Datetime

Set @From = '07 Jan 2013'
Set @To = '18 Mar 2013'

Select dateadd(dd, CASE WHEN datepart(weekday, @From) = 1 THEN 0 ELSE 8 - datepart(weekday, @From) END,@From) as FirstSunday, 
dateadd(dd, CASE WHEN datepart(weekday, @To) = 1 THEN 0 ELSE 1 - datepart(weekday, @To) END,@To) as LastSunday

,datediff(d,@From, @To) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:17:48.730

```
Declare @From Datetime
Declare @To Datetime

Set @From = '01 Mar 2013'
Set @To = '31 Mar 2013'

SELECT Datediff(Week, dateadd(dd, CASE WHEN datepart(weekday, @From) = 1 THEN 0 ELSE 8 - datepart(weekday, @From) END,@From), 
dateadd(dd, CASE WHEN datepart(weekday, @To) = 1 THEN 0 ELSE 1 - datepart(weekday, @To) END,@To))+1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:57:51.277

我希望它有帮助：

```
Declare @From  Datetime 
Declare @To  Datetime 
Declare @temp  Datetime 
Declare @firstSunday DateTime
Declare @lastSunday DateTime

Set @From = '7 Jan 2013' 
Set @To = '18 Mar 2013'

set @temp = @From
WHILE ( @temp <= @To )
    BEGIN 
        IF DATEPART(dw, @temp) = 1
        BEGIN
            SET @firstSunday = @temp
            BREAK
        END

        set @temp = dateadd(dd,1,@temp)

    END

set @temp = @To
WHILE ( @temp >= @From )
    BEGIN

    IF DATEPART(dw, @temp) = 1
        BEGIN
            SET @lastSunday = @temp
            BREAK
        END

        set @temp = dateadd(dd,-1,@temp)

    END

SELECT @firstSunday, @lastSunday, DATEDIFF(dd,@firstSunday, @lastSunday)/7 +1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:42:47.163

[我认为这比我以前的答案](https://stackoverflow.com/questions/15131692/converting-an-excel-formual-to-sql)更优雅但可读性*更低*

[**小提琴演示在这里**](http://sqlfiddle.com/#!3/d41d8/10119)

```
declare @From date = '20130107' --'7 Jan 2013' 
declare @To date = '20130318'  --'18 Mar 2013' 

select datediff(day,dateadd(day,wkdays,@from),@to)/7 + 
       case when wkdays = 0 and 
        datename(weekday,dateadd(day,wkdays,@from)) <> 'sunday' then 0 else 1 end 
from (values (0),(1),(2),(3),(4),(5),(6)) t(wkdays)
where dateadd(day,wkdays,@from) between @from and @to
      and datename(weekday,dateadd(day,wkdays,@from)) = 'sunday' 
```

# java - Websphere MQ v7 - Security exits in Java?

> ID：15155621
> 
> 赞同：1
> 
> 时间：2013-03-01T10:34:35.940
> 
> 标签：java, security, ibm-mq, exit

According to [the Online IBM doc for WMQ 7](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.csqzaw.doc/jm11171_.htm) it's possible to write channel security exits in the Java language, so I don't need to remember C programming and no worry about compiling for different operating systems.

My purpose is to write a security exit, which extracts the distinguished names (DN) on my QueueManager from a client certificate and forward its values as a JMS-usr property.

My problem: I even couldn't setup the provided example for my Server-connection channel. I tried to put the .class file of the IBM-example to the \exit folder, but my QM is throwing following error:

```
The dynamic loadable file  C:\Program Files\IBM\WebSphere
MQ\exits\MyMQExits.dll wasn't found. 
```

Does this mean that I can't write security exits for Java for my QM-side (just in C / dll), only for client-applications??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:25:17.147

信息中心链接可能不清楚，但队列管理器端出口必须仅用 C 语言开发。在客户端，您可以使用 Java/C 开发客户端出口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T22:35:31.287

> 我的目的是编写一个安全出口，它从客户端证书中提取我的 QueueManager 上的专有名称 (DN)，并将其值作为 JMS-usr 属性转发。

仅对 MQCONN/X 和 MQDISC MQ API 调用调用安全出口。这意味着安全出口无法访问任何其他 MQ API 调用，因此，您无法将消息属性添加到消息。

# java - HTTP SSL Proxy with Java Apache HttpClient

> ID：15155623
> 
> 赞同：3
> 
> 时间：2013-03-01T10:34:38.807
> 
> 标签：java, apache, http, ssl, proxy

Is it possible to use an SSL Proxy with Java HttpClient (or any other client if not) ?

My real problem is to have a direct SSL proxy to send HTTP or HTTPS connections and to check the SSL proxy and Client certificates.

For example, for an HTTP request (we check SSL proxy certificate on client, and client certificate on proxy):

CLIENT --- SSL socket (HTTPS) ---> SSL PROXY --- Plain socket (HTTP) ---> SERVER

And for HTTPS request (use CONNECT request to tunnel SSL connection) (we check SSL proxy certificate and Server certificate on client, and client certificate on proxy and possibly on server if requested):

CLIENT --- SSL socket (HTTPS tunnel) ---> SSL PROXY --- SSL socket (HTTPS) ---> SERVER

I can't find a way to do that with HttpClient which only allows to set a plain HTTP Proxy that can tunnel HTTPS request (but that is not what I want)

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:23:37.373

我能够使 Apache HttpClient 连接到启用 SSL 的代理。检查此 SO 帖子以获取代码：[HttpRouteP​lanner - How do it work with an HTTPS Proxy](https://stackoverflow.com/questions/15048102/httprouteplanner-how-does-it-work-with-an-https-proxy)

# php - Doctrine 2 - 从实体外部禁用 PrePersist

> ID：15155632
> 
> 赞同：4
> 
> 时间：2013-03-01T10:35:09.087
> 
> 标签：php, doctrine-orm

我正在尝试从 Doctrine 2 中的实体外部禁用实体事件。每次我们将新记录插入表中时，都需要运行很少的文件操作，这些操作已在具有 prePersist 注释的方法中实现。但是，我还需要运行一些数据夹具并跳过文件操作部分作为测试的一部分。基本上我在问是否可以通过实体管理器禁用所有 prePersist 事件而不更改实体中的任何内容。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-11T20:13:39.440

如果您可以完全删除生命周期回调，那么您可以手动清除回调。这在动态夹具生成的情况下很有用。你只需这样做：

```
$this->em->getClassMetadata(get_class($object))->setLifecycleCallbacks(array()); 
```

感谢 Jeremy Mikola ( [@jmikola](https://twitter.com/jmikola) ) 为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-27T10:04:57.267

[JimTheDev 的解决方案](https://stackoverflow.com/a/15156856/757815 "JimTheDev 的解决方案")实际上效果很好。
在我的一个测试类中，我有这个方法：

```
private function persistSkippingEvents($object, $manager)
{
    // temporarily stores lifecycle events
    $events = $manager->getClassMetadata(get_class($object))->lifecycleCallbacks;

    // removes lifecycle events
    $manager->getClassMetadata(get_class($object))->setLifecycleCallbacks(array());
    $manager->persist($object);
    $manager->getClassMetadata(get_class($object))->setLifecycleCallbacks($events);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T11:40:28.890

使用 ORM API 无法禁用[生命周期回调。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#lifecycle-events)

问题来自于在[调用实体的生命周期回调之后调用外部侦听器](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/UnitOfWork.php#L803-L809)的事实，因此即使是禁用回调的瞬态属性（由外部侦听器/订阅者设置）也不起作用。

考虑将逻辑从实体移动到外部侦听器/订阅者：这样，您将获得更大的灵活性，并且您可以通过重用侦听器/订阅者本身的内部状态来关闭您描述的行为。

```
// ...

public function prePersist(LifecycleEventArgs $args)
{
    if ($this->skipCondition($args->getEntity()) {
        return;
    }

    $this->manipulate($args->getEntity());
}

// ... 
```

# iphone - iPad模拟器只显示黑屏

> ID：15155633
> 
> 赞同：0
> 
> 时间：2013-03-01T10:35:10.603
> 
> 标签：iphone, xcode, ipad, ios-simulator

我正在 Xcode 中开发一个应用程序，我得到了它的工作并进行了一些收尾工作。然后我将 Xcode 升级到最新版本，更改了一些 Autorotate 选项的代码（我的应用程序不应该自动旋转）并调整了支持的旋转（横向与纵向）。
然后突然我在 iOs 模拟器中的调试只显示黑屏。该应用程序构建良好，但模拟器中没有显示任何内容......
而且我真的不明白为什么......

使用 Xcode 4.6

我没有 ApplicationDidFinishLoading 但我有这个：

 ````
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 

[window addSubview:viewController.view]; 
[window makeKeyAndVisible]; 
return YES; } 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:50:26.150

在 ApplicationDidFinishLoading 中改用下面的代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[YourFirstViewController alloc] initWithNibName:@"YourFirstViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这可能会解决您的问题。请尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:03:55.317

评论“shouldAutorotateToInterfaceOrientation”解决了我的问题。`

# c# - 在gridview C#中排序

> ID：15155636
> 
> 赞同：4
> 
> 时间：2013-03-01T10:35:14.547
> 
> 标签：c#, datetime

我想根据*手机号码等不同参数对记录进行排序。*,*注册日期*等

我的表格看起来像![在此处输入图像描述](../Images/0e59e3894dd0542d2391f2ad9af8aa28.png)

输入*手机号后* 当我点击搜索时，我得到以下结果：

![在此处输入图像描述](../Images/cd9f0dd4e73caa7871c943933660282a.png)

现在我想对注册日期的记录进行排序。

这是我对记录进行排序的代码：

```
private void SearchDate()
    {
        DataTable rt = GetRecords();
        DataView rd = new DataView(rt);
        string SearchRegdate = null;
        if (!String.IsNullOrEmpty(txtdate.Text))
        {
              SearchRegdate = string.Format("{0} '%{1}%'", gvUser.SortExpression, txtdate.Text);

        }
           rd.RowFilter = "registration_date like " + SearchRegdate;
           gvUser.DataSource = rd;
           gvUser.PageSize = 30;
           gvUser.DataBind();
    } 
```

在这里，我收到错误“无法对 System.DateTime 和 System.String 执行 'Like' 操作。”

有什么解决办法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:46:01.023

在使用类似之前，您必须将日期转换为字符串：

```
dt.Select("Convert(column1,System.String) like '2013'") 
```

或 rd.RowFilter = "Convert(column1,System.String) like " + SearchRegdate;

您可以在此处查看完整的语法：[语法参考](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:43:02.893

首先，我认为语法是错误的。你的陈述会产生如下内容：

```
registration_date like <user sort expression> '%...%' 
```

`like`和过滤器表达式之间可能没有任何内容`%...%`。

此外，该列`registration_date`是`DateTime`- 您无法将其与`string`using进行比较`like`- 这就是错误的意思。您可以添加一个隐藏的计算列，其中包含作为字符串的日期并对其进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:47:46.347

您可以尝试使用[LINQ](http://msdn.microsoft.com/pl-pl/library/bb386977.aspx)而不是 RowFilter：

DateTime 的简单示例：

初始化：

```
var table = new DataTable("Dates");
var dateColumn = new DataColumn("Date", typeof (DateTime));
table.Columns.Add(dateColumn);

table.BeginLoadData();
table.LoadDataRow(new object[] {new DateTime(2000, 1, 1)}, true);
table.LoadDataRow(new object[] {new DateTime(2000, 1, 2)}, true);
table.LoadDataRow(new object[] {new DateTime(2001, 1, 1)}, true);
table.LoadDataRow(new object[] {new DateTime(2002, 1, 1)}, true);
table.EndLoadData(); 
```

带有搜索日期文本的查询：

```
var someDateText = "2000";

var dataView = (from row in table.AsEnumerable()
                let dateTime = row.Field<DateTime>(0)
                where dateTime.ToString().Contains(someDateText)
                orderby dateTime
                select row).AsDataView(); 
```

之后，您还可以使用创建的 dataView 的 RowFilter 来执行其他过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:52:03.423

使用`Linq`：

```
var rows = (from r in rt.AsEnumerable()
           where SqlFunctions
             .StringConvert(r.Field<DateTime>("registration_date")).Contains("1")
           select r).ToList(); 
```

或者如果你想要一个数据表

```
DataTable dt = (aboveQuery).CopyToDataTable(); 
```

# c# - redirect visitors to different area of website using various methods?

> ID：15155637
> 
> 赞同：1
> 
> 时间：2013-03-01T10:35:17.560
> 
> 标签：c#, javascript, jquery, redirect, web-config

I need to redirect the user to my blog which is in ../blog

When the user types in www.website.com it should load the blog which is in www.website.com/blog

I have a default.aspx page in the root which i no longer use and I have tried added a web.config file in the root with the following to redirect the user to the blog but its not working:

```
<configuration>
  <location path="blog/default.aspx">
    <system.webServer>
      <httpRedirect enabled="true" destination="http://www.website.com/blog/Default.aspx" httpResponseStatus="Permanent" />
    </system.webServer>
  </location>
</configuration> 
```

What would be the fastest way to redirect the user, I thought about getting rid of my own redundant default.aspx page and creating a new page and using JavaScript to redirect. But which method is the easiest and fastest?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:37:56.237

使用元标记。[有关元标记的更多信息。](http://www.west-wind.com/weblog/posts/2006/Aug/04/No-more-Meta-Refresh-Tags)

```
<meta http-equiv="refresh" content="2;url=yourUrl"> 
```

在 c# 中[来自这个答案。](https://stackoverflow.com/questions/6198726/how-to-add-meta-tag-to-asp-net-content-page)

```
var keywords = new HtmlMeta { Name = "keywords", Content = "one,two,three" };
                Header.Controls.Add(keywords); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:12:18.770

有无数种方法可以做到这一点：

在您的旧 default.aspx 中：

```
<meta http-equiv="refresh" content="0;url=/blog/default.aspx"> 
```

（注意 0 表示零（或接近零）延迟时间）

.Net 中的相同，可能会更快一些：

任何一个：

```
Server.Transfer("~/blog/default.aspx"); //Browser doesn't see new URL 
```

或者

```
Response.Redirect("~/blog/default.aspx"); 
```

或者在 global.asax.cs Application_BeginRequest 事件中捕获所有访问 /blog 之外页面的尝试。您需要将 .Net 设置为该页面所有页面的默认解释器。不过，在我看来，这将是矫枉过正。

# ruby-on-rails - Missing Content-Length header when using Nginx + Gzip + Unicorn

> ID：15155638
> 
> 赞同：5
> 
> 时间：2013-03-01T10:35:20.053
> 
> 标签：ruby-on-rails, nginx, gzip, unicorn

I don't know why http response is missed "Content-Length header" when I use gzip in nginx, i'm really getting stuck,please somebody help me, thank you so much! this is my config file,

**nginx.conf**

user nobody nobody ; worker_processes 8;

```
events {
    worker_connections  1024;
    accept_mutex on; # "on" if nginx worker_processes > 1
    use epoll; # enable for Linux 2.6+
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    upstream backend-unicorn {
        server unix:/tmp/unicorn_app.sock fail_timeout=0;
        #server localhost:5000;
    }
    #access_log  logs/access.log  main;
    sendfile        on;
    keepalive_timeout  100;
    gzip on;
    gzip_static on;
    gzip_proxied any;
    gzip_http_version 1.1;
    gzip_comp_level 6;
    gzip_min_length  1100;
    gzip_buffers 16 8k;
    gzip_types text/plain application/zip text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript image$

    server {
        listen       8080;
        server_name  misago;
        access_log  /var/log/nginx/unicorn.access.log  main;
        client_max_body_size 64M;
        location /uploads/ {
            root /usr/local/rails_apps/me_management_tool/current/public/uploads;
            break;
        }
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:34:46.090

> 当我在 nginx 中使用 gzip 时，我不知道为什么缺少 http 响应“Content-Length 标头”

因为在这种情况下，在发送标头时内容的长度是未知的。Nginx 无法知道内容的压缩程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-02T17:28:01.370

下面是一个高性能的 Nginx 解决方案，用于`x-file-size`向 Gzip 响应添加标头。在这里进行全面讨论：[https ://github.com/AnthumChris/fetch-progress-indicators/issues/13](https://github.com/AnthumChris/fetch-progress-indicators/issues/13)

```
location / {
  ## Nginx Lua module must be installed https://docs.nginx.com/nginx/admin-guide/dynamic-modules/lua/
  ## https://github.com/openresty/lua-nginx-module#header_filter_by_lua
  header_filter_by_lua_block {
    function file_len(file_name)
      local file = io.open(file_name, "r")

      if (file == nil) then return -1 end

      local size = file:seek("end")
      file:close()
      return size
    end

    ngx.header["X-File-Size"] = file_len(ngx.var.request_filename);
  }
} 
```

# android - 滚动视图进入gridlayout单元格：如何防止它垂直增长？

> ID：15155645
> 
> 赞同：0
> 
> 时间：2013-03-01T10:35:45.237
> 
> 标签：android, xamarin.android

我想实现一个带有滚动视图和固定底栏的布局。底部栏有一个固定的高度，滚动视图应该占据屏幕的剩余高度，但无论其内容的高度如何，都不应增长（因为它应该滚动内容）。

我尝试了很多布局组合，但我找不到正确的组合。

如果我使用 LinearLayout 和 layout_weight 技巧，问题是一样的。

在下面的示例中：将线性布局中的 android:minHeight="600dp" 更改为 300dp，它会正常工作。在这个例子中，为什么滚动视图的高度增长了这么多？

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:rowCount="2"
android:background="#fff"
android:columnCount="1"
android:orientation="vertical">
<ScrollView
    android:id="@+id/zoneContent"
    android:background="#00f"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="fill_horizontal"
    android:fillViewport="true">
    <LinearLayout
        android:background="#f00"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:orientation="vertical"
        android:minHeight="600dp" />
</ScrollView>
<GridLayout
    android:layout_height="70dp"
    android:layout_width="240dp"
    android:layout_gravity="center_horizontal|fill_vertical"
    android:background="#0f0"
    android:rowCount="1"
    android:layout_column="0"
    android:columnCount="5"
    android:layout_row="1" />
</GridLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:51:05.800

将LinearLayout而不是GridLayout作为父布局，然后固定布局的权重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:38:36.813

这似乎可以解决问题

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#fff"
android:orientation="vertical">
<ScrollView
    android:id="@+id/zoneContent"
    android:background="#00f"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:layout_gravity="fill_horizontal"
    android:fillViewport="true">
    <LinearLayout
        android:background="#f00"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:orientation="vertical"
        android:minHeight="300dp" />
</ScrollView>
<GridLayout
    android:layout_height="70dp"
    android:layout_width="240dp"
    android:layout_gravity="center_horizontal|fill_vertical"
    android:background="#0f0"
    android:rowCount="1"
    android:layout_column="0"
    android:columnCount="5"
    android:layout_row="1" />
</LinearLayout> 
```

# html - Dreamweaver 在文件已在其他 PC 上签出时禁用签出？

> ID：15155646
> 
> 赞同：0
> 
> 时间：2013-03-01T10:36:00.013
> 
> 标签：html, dreamweaver

如果文件已在其他 PC 上签出，Dreamweaver 中的此功能是否可以禁用某人的签出。

就像它在 TFS (Team Foundation Server) 上的一样，即如果文件已与人员 A 签出以进行编辑，则人员 B 无法编辑文件或签出文件以进行编辑。

所以想知道它在 Dreamweaver 上是否可行，如果可以，如何实现？

我尝试在 Dreamweaver 中寻找选项，但我自己找不到。可能是我找错地方了。

# outlook - 通过从 SQl 服务器获取 To list 从 Outlook 发送邮件

> ID：15155647
> 
> 赞同：0
> 
> 时间：2013-03-01T10:36:00.647
> 
> 标签：outlook

我从 5 天开始就遇到了一个问题。

我需要一种方法来达到以下要求。

1.  邮件列表存在于数据库（SQL 服务器）中
2.  我在 Outlook 中有一封邮件
3.  现在我必须向数据库中的所有 200,000 个邮件 ID 发送邮件
    **注意一封邮件只能有 200 个邮件 ID，因此 200,000/200=1000 个邮件 **注意：这 200,000 个计数不是固定的，它会减少和增加 > 像 jhon @xyz.com 今天将在场，第二天我们可能不需要发送给他，他的名字可能会被完全删除（所以 DL 不是一个选项）
4.  我需要一种方法来自动化这个
5.  我晚上睡得少，桌子上有咖啡杯

我在 ASP.net 中工作，任何满足此需求的 PL 都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:36:59.437

我假设您知道如何根据需要创建 sql 语句以及如何从 .NET 中的数据库中检索数据。这意味着唯一的问题实际上是从 Outlook 发送这个。

[这](http://msdn.microsoft.com/en-us/library/ff865634%28v=office.14%29.aspx)是一篇详细描述这一点的文章以及从那里复制的一段代码。

```
using System; 
using System.Text; 
using Outlook = Microsoft.Office.Interop.Outlook; 

namespace OutlookAddIn1 
{ 
    class Sample 
    { 
        public static void SendEmailFromAccount(Outlook.Application application, string subject, string body, string to, string smtpAddress) 
        { 

            // Create a new MailItem and set the To, Subject, and Body properties. 
            Outlook.MailItem newMail = (Outlook.MailItem)application.CreateItem(Outlook.OlItemType.olMailItem); 
            newMail.To = to; 
            newMail.Subject = subject; 
            newMail.Body = body; 

            // Retrieve the account that has the specific SMTP address. 
        Outlook.Account account = GetAccountForEmailAddress(application, smtpAddress); 
            // Use this account to send the e-mail. 
            newMail.SendUsingAccount = account; 
            newMail.Send(); 
        } 

        public static Outlook.Account GetAccountForEmailAddress(Outlook.Application application, string smtpAddress) 
        { 

            // Loop over the Accounts collection of the current Outlook session. 
            Outlook.Accounts accounts = application.Session.Accounts; 
        foreach (Outlook.Account account in accounts) 
            { 
                // When the e-mail address matches, return the account. 
                if (account.SmtpAddress == smtpAddress) 
                { 
                    return account; 
                } 
            } 
            throw new System.Exception(string.Format("No Account with SmtpAddress: {0} exists!", smtpAddress)); 
        } 

   } 
} 
```

我的建议是跳过使用 Outlook，除非确实有必要，而是通过直接与 SMTP 服务器通信来发送电子邮件。

只需搜索“如何从 C# 发送电子邮件”或类似内容，您就会找到大量示例。

# javascript - 在追加新行的同时在表中插入行号

> ID：15155654
> 
> 赞同：0
> 
> 时间：2013-03-01T10:36:18.773
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我正在尝试在我的表中添加带有行号的新行，但这不起作用。

```
$('.dropdown-menu li a:eq(8)').on('click', function(){
     rows='';     
     var myRow =(this).rowIndex;
     var row='<tr><td>'+myRow+'</td><td></td><td></td><td></td><td></td><td></td></tr>';
     rows=rows+row;
     $(rows).appendTo('table');

}); 
```

它返回 undefind 代替行号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:48:54.090

尝试这个：

```
$('.dropdown-menu li a:eq(8)').on('click', function(){  
     var rows='<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>';
     $(rows).appendTo('table');
     $('table tr:last td:first-child').text(parseInt($('table tr').length)-1); // Minus 1 because index starts from 0.
}); 
```

# objective-c - Objective-C ARC - 共享所有权

> ID：15155656
> 
> 赞同：0
> 
> 时间：2013-03-01T10:36:30.197
> 
> 标签：objective-c, casting, automatic-ref-counting

我真的没有桥接演员表。我有以下代码：

```
*value = (__bridge CppBridge*)_r->get_bridge(); 
```

其中 CppBridge 是一个 Objective-C 类，_r 是一个类型为 rb::typed_object 的变量，它是一个 C++ 类。C++ 类保留从 get_bridge() 返回的对象...实际上，我想与 C++ 类共享所有权。换句话说，我希望 Objective-C 代码和 C++ 代码都将 +1 添加到对象，因此它将变为 +2 保留计数。每个人都会在某个时候变为-1。我应该使用什么？__bridge 还是 __bridge_transfer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:35:35.800

问题解决了。我决定使用 Objective-C++ 并使用 trojanfoe 解决方案。非常感谢！

# mysql - 如何为几个表中的选择性值集进行数据库转储

> ID：15155664
> 
> 赞同：0
> 
> 时间：2013-03-01T10:36:51.423
> 
> 标签：mysql, mysqldump

```
create table foo (id, val1, user_id,...)
create table bar (id, foo_id, val2, ...)
create table baz (id, bar_id, val3, ...)

select * from foo where user_id = 1;
select * from bar where id in (select id from foo where user_id = 1)
select * from baz where id in (for all the above bars) 
```

如何编写执行上述操作的转储命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:07:25.657

```
mysqldump -h yourhost -u username -p yourDatabase foo --where="user_id = 1" >dumpFile1
mysqldump -h yourhost -u username -p yourDatabase bar --where=" id in (select id from foo where user_id = 1)" >dumpFile2
mysqldump -h yourhost -u username -p yourDatabase baz --where="id in (select * from bar where id in (select id from foo where user_id = 1))" >dumpFile3 
```

另一种选择是导出为 CSV 文件。

```
select * from foo where user_id = 1 INTO OUTFILE 'C:/whatever' 
```

或类似的东西。看看[手册](http://dev.mysql.com/doc/refman/5.0/en/select.html)。

**更新：**

没有测试，但你可以试试这个吗？

```
mysqldump -h yourhost -u username -p yourDatabase foo bar baz
--where="foo.user_id = 1" 
--where="bar.id in (select id from foo where user_id = 1)" 
--where="baz.id in (select * from bar where id in (select id from foo where user_id = 1))" 
>dumpFile 
```

**更新 2：**

在 mysqldump 的[手册](http://www.manpagez.com/man/1/mysqldump/)中，我看不到多个 WHERE 子句。所以恐怕你必须分多个步骤来做。

# uitableview - 由于未捕获的异常“NSInvalideArgumentException”而终止应用程序

> ID：15155665
> 
> 赞同：0
> 
> 时间：2013-03-01T10:36:51.607
> 
> 标签：uitableview

我有我的自定义类用户，它有几个字段。例如用户名、密码、名字、姓氏。

我有一个用户类用户的对象。当我想设置 UITableviewCell 的 UILabel 的文本时，它给了我以下异常：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary firstName]：无法识别的选择器已发送到实例 0x755f510”

我的代码是：

```
self.user = [usersArray objectAtIndex:indexPath.row];

((UILabel *)[cell viewWithTag:19]).text = user.firstName;
((UILabel *)[cell viewWithTag:20]).text = user.lastName;
((UILabel *)[cell viewWithTag:21]).text = user.username; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:09:43.437

我已经通过使用 NSDictionary 完成了它。我将自定义类的对象传递给 NSDictionary，然后通过 NSDictionary 设置 UITableviewCell 的文本。

```
NSDictionary *dictionary = (NSDictionary *)[usersArray objectAtIndex:indexPath.row];

((UILabel *)[cell viewWithTag:19]).text = [dictionary objectForKey:@"firstName"];
((UILabel *)[cell viewWithTag:20]).text = [dictionary objectForKey:@"firstName"];
((UILabel *)[cell viewWithTag:21]).text = [dictionary objectForKey:@"firstName"]; 
```

# java - Hibernate+PostgreSQL：如何在表中允许特殊字符？

> ID：15155666
> 
> 赞同：0
> 
> 时间：2013-03-01T10:36:57.217
> 
> 标签：java, hibernate, gwt, jpa, jdbc

我将 Hibernate 与 GWT 和 PostgreSQL 一起使用。我有这个 TextArea，我从中提取文本，文本可能包含特殊字符，如 \r、\n...等。例如，我有一个实体：

```
@Entity
public class User {
  // Id & version
 // ...
  @Column
  public String name;
  @Column
  public String comment;
  //...getters & setters
} 
```

因此，当我从 CommentTextArea 中提取文本（包含 \n、\r），将其存储在注释字段中并保留实体时，我在物理表中看不到整个注释。

有没有办法在 Hibernate 中“打开”特殊字符？

# cordova - 'useSplashScreen' 已弃用：在 Cordova 2.5 中弃用，在 Xcode 中收到此警告

> ID：15155667
> 
> 赞同：5
> 
> 时间：2013-03-01T10:37:04.343
> 
> 标签：cordova, xcode4.5

我已经安装了 Cordova 2.5 并在 Xcode 的项目中尝试 Hello World 并收到此警告。有没有任何想法如何解决这个警告..谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T23:01:51.760

您可以注释掉 AppDelegate.m 中的行（根据 2.5.0 第 68 行）

```
self.viewController.useSplashScreen = YES; 
```

这应该会删除您下一次构建时的警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:40:34.083

闪屏控件现在已拆分到 Splashscreen 插件中：

[http://docs.phonegap.com/en/2.5.0/cordova_splashscreen_splashscreen.md.html#Splashscreen](http://docs.phonegap.com/en/2.5.0/cordova_splashscreen_splashscreen.md.html#Splashscreen)

（该页面上有一个完整的使用示例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:45:51.423

为了解决这个问题，您唯一需要做的就是在 AppDelegate.m 中注释该行，保存文件并再次运行应用程序。

由于向后兼容性，未对此进行注释。

该模板已包含插件，您可以在 config.xml 文件的插件部分中检查它。

正如 rmc47 所指出的，您可以在[http://docs.phonegap.com/en/2.5.0/cordova_splashscreen_splashscreen.md.html#Splashscreen](http://docs.phonegap.com/en/2.5.0/cordova_splashscreen_splashscreen.md.html#Splashscreen)上查看更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T05:04:45.503

尽管您可以在项目的 AppDelegate.m 文件中注释掉这行代码（我通常不建议这样做），但您也可以使用以下 #pragma 指令来抑制警告：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {
    /* ... code generating warning/deprecation message ... */
    return YES;
}
#pragma clang diagnostic pop 
```

# javascript - IE10 - 框架的“访问被拒绝”

> ID：15155669
> 
> 赞同：1
> 
> 时间：2013-03-01T10:37:06.983
> 
> 标签：javascript, internet-explorer-10

所以，我做了研究。如果你在 IE 中使用框架，它会给你“访问被拒绝”。在他们的支持网站上，他们表示如果您使用框架，那么您需要将您的站点添加到受信任的站点区域（在 Internet 选项 -> 安全等中）为了它，我给了它一个拍摄并将其添加到我的浏览器的“受信任”站点。即使在那之后，我也遇到了同样的错误。此外，在发布此问题之前，我查看了在 stackoverflow 上发布的其他问题。显然，出现此错误的原因有很多。所以，请提前原谅我这篇冗长的问题帖子。

**我的问题**：

我有一个框架，它的来源根据其中的超链接进行更改。页面更改进展顺利。直到我加载一个包含下拉框的页面。当下拉列表被改变时，页面被重新加载，我得到一个“拒绝访问”错误。有谁知道这个 IE 错误的解决方法？

# c# - 更改样式设置器属性

> ID：15155672
> 
> 赞同：0
> 
> 时间：2013-03-01T10:37:11.897
> 
> 标签：c#, windows-phone-7, xaml, styles, setter

我有下面的代码非常简单，带有 wp7 中的样式资源，

```
<Style x:Name="image_find" x:Key="ImageFind1" TargetType="Image">
     <Setter Property="Source" Value="display/pen.png"/>
</Style> 
```

我想更改 setter 的源值，例如。“display/tool.png”当我想在我的应用程序代码中运行时，请记住我需要风格的图像蜂鸣:)

我正在运行这样的东西，

```
image_find.Setters.SetValue(Image.SourceProperty, "display/tool.png"); 
```

或类似的东西，

```
style = App.Current.Resources["image_find1"] as Style;    
style.Setters.SetValue(Image.SourceProperty, "display/tool.png");` 
```

我得到`NullReferenceException`了，应用程序中断了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:52:11.103

这实际上取决于您所在`Style`的位置，您需要使用`x:Key`来查找样式而不是`x:Name`

如果样式在您的应用程序资源（App.xaml）中，这应该可以工作

```
 var style = App.Current.Resources["ImageFind1"] as Style; 
```

如果它在您的上下文中，您`Window/UserControl`将使用`FindResource`

```
 var style = FindResource("ImageFind1") as Style; 
```

# android - android多点触控，动作指针向下无法正常工作

> ID：15155673
> 
> 赞同：4
> 
> 时间：2013-03-01T10:37:13.737
> 
> 标签：android, multi-touch

我试图检测我的两个图像按钮上的两次触摸，这是单个相对布局。问题是它在两个按钮上显示 action_down 值，但没有动作指针向下值。

我的代码如下：

```
private int getIndex(MotionEvent event) {
    int idx = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >>     MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    return idx;
}

@Override
public boolean onTouch(View paramView, MotionEvent paramMotionEvent) {
    // TODO Auto-generated method stub
//  Boolean state=false;
//   int pointerCount = paramMotionEvent.getPointerCount();
    boolean val = false;
     int pointerIndex = paramMotionEvent.getAction() & MotionEvent.ACTION_MASK;

     switch(pointerIndex)
     {
     case MotionEvent.ACTION_DOWN :{

            Log.i("fil", "action dowm");    
         break;
     }
     case MotionEvent.ACTION_POINTER_DOWN :{
         int id = paramMotionEvent.getPointerId(getIndex(paramMotionEvent));
            Log.d("fil", "Other point down ["+id+"]");
    Log.i("fil", "action pointer down");    
    break;
     }
     case MotionEvent.ACTION_POINTER_UP :{
         int id = paramMotionEvent.getPointerId(getIndex(paramMotionEvent));
            Log.d("fil", "Other point down ["+id+"]");
            Log.i("fil", "action pointer up");  
            break;
     }
     case MotionEvent.ACTION_UP :{

            Log.i("fil", "action up");  
         break;
     }

     }

'my xml'

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" 
android:gravity="center">

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center" >

</RelativeLayout>

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="100dp"
    android:background="@drawable/ic_launcher" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:43:56.643

```
 StringBuilder sb = new StringBuilder();
 TextView tv;
 int upPI = 0;
 int downPI = 0;
 boolean inTouch = false;
 String result = "";

@Override
public boolean onTouch(View view, MotionEvent event) {

int actionMask = event.getActionMasked();
int pointerIndex = event.getActionIndex();
int pointerCount = event.getPointerCount();

switch (actionMask) {
case MotionEvent.ACTION_DOWN:
  inTouch = true;
case MotionEvent.ACTION_POINTER_DOWN: 
  downPI = pointerIndex;
  break;

case MotionEvent.ACTION_UP: 
  inTouch = false;
  sb.setLength(0);
case MotionEvent.ACTION_POINTER_UP: 
  upPI = pointerIndex;
  break;

case MotionEvent.ACTION_MOVE:
  sb.setLength(0);

  for (int i = 0; i < 10; i++) {
    sb.append("Index = " + i);
    if (i < pointerCount) {
      sb.append(", ID = " + event.getPointerId(i));
      sb.append(", X = " + event.getX(i));
      sb.append(", Y = " + event.getY(i));
    } else {
      sb.append(", ID = ");
      sb.append(", X = ");
      sb.append(", Y = ");
    }
    sb.append("\r\n");
  }
  break;
}
result = "down: " + downPI + "\n" + "up: " + upPI + "\n";

if (inTouch) {
  result += "pointerCount = " + pointerCount + "\n" + sb.toString();
}
tv.setText(result);
return true;
} 
```

# javascript - 根据图像动态设置画布宽度和高度

> ID：15155674
> 
> 赞同：0
> 
> 时间：2013-03-01T10:37:13.817
> 
> 标签：javascript, jquery, html, html5-canvas

我正在做一个项目，我必须监听粘贴事件并将图像从剪贴板保存到服务器并将其显示在画布上以供进一步绘图。

工作原理：获取剪贴板图像并保存，在画布上显示图像作为背景。

什么不起作用：调整画布大小以便可以显示整个图像。此外，在保存时，我不会将绘图保存在背景图像上，而只会保存绘图。

我试过了

```
 var newImg = document.getElementById('justimg');
    newImg.src = data.showthis;
    newImg.onload= function(){
        curHeight = newImg.height;
        curWidth = newImg.width;
        alert(curWidth);
        alert(curHeight);} 
```

获取图像属性，但仅显示画布属性。

```
 <img id="justimg">
<canvas id="bearimage" ></canvas> 
```

还请建议如何使用背景图像保存画布绘图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:16:10.533

您需要获取 canvas 元素，然后像这样更改它的宽度和高度，

```
var newImg = document.getElementById('justimg');
    newImg.src = data.showthis;
    newImg.onload= function(){
        var canvas = document.getElementById('bearimage');
        canvas.height = newImg.height ;
        canvas.width = newImg.width ;
        alert(canvas.height);
        alert(canvas.width);} 
```

要保存画布图像，您首先需要在其上绘制图像，然后您可以保存它！这是保存图像的链接，[http://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

# php - 需要帮助验证 MySQL 中的数据

> ID：15155675
> 
> 赞同：0
> 
> 时间：2013-03-01T10:37:14.950
> 
> 标签：php, sql, if-statement, conditional-statements, exists

我目前对该程序有 2 个不同的部分，前半部分从网页获取用户输入，然后将其传输到 PHP 端，该端将访问 MySQL 并显示请求的信息。

示例：如果我输入 AX12 作为 ID，它将显示该 ID 的信息，该 ID 确实存在，但如果我输入 AX13（它不存在），它将显示空白信息，所以我想知道是否有人可以告诉我我如何一旦信息被传输到 PHP 端，就可以验证这一点。因此，如果它检测到您提交的信息不存在，只需显示一条消息“ID 不存在”或类似的内容。

如果您需要更多信息，这里是 PHP 端的代码。

```
<?php

$part_number = $_GET['txtInput'];
$part_description;
$units_on_hand;
$item_class;
$warehouse_number;
$unit_price;

$query;
$result_set;
$connection;
$record;

echo "<html>";
echo "<head>";
echo "<title>SQL Application</title>";
echo "<style type = 'text/css'>body{text-align: center; background-color: #CC3333; color: #660000; font-size: 30;}</style>";
echo "</head>";
echo "<body>";

echo "<center><h1>SQL Application</h1></center>";

echo "<br />";
echo "<br />";
echo "<br />";

$connection = @mysql_connect("localhost","m_stanicic","")
        or die ("\n\n PROBLEM CONNECTING TO DATABASE! \n" . mysql_error() . "\n\n");

mysql_select_db("m_stanicicdb");

$query = "select * from part where part_number = '" . $part_number . "'";

$result_set = mysql_query($query)
        or die ("\n\n PROBLEM WITH QUERY! . \n" . mysql_error() . "\n\n");

$record = mysql_fetch_assoc($result_set);

if($part_number == "")
{
        //
}
else
{
        $part_description = $record['part_description'];
        $units_on_hand = $record['units_on_hand'];
        $item_class = $record['item_class'];
        $warehouse_number = $record['warehouse_number'];
        $unit_price = $record['unit_price'];

        echo "<center>";
        echo "<table border='1' width=400 style ='table-layout:fixed' cellpadding='5' cellspacing='0'>";
        echo "<col width = 200>";
        echo "<col width = 200>";
        echo "<tr>";
        echo "<th colspan='2'>DETAILS OF THE PART YOU REQUESTED</th>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>part_description</td>";
        echo "<td>" . $part_description . "</td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>units_on_hand</td>";
        echo "<td>" . $units_on_hand . "</td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>item_class</td>";
        echo "<td>" . $item_class . "</td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>warehouse_number</td>";
        echo "<td>" . $warehouse_number . "</td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>unit_price</td>";
        echo "<td>$" . $unit_price . "</td>";
        echo "</tr>";
        echo "</table>";
        echo "</center>";

        mysql_close($connection);
}

echo "<br />";
echo "<br />";
echo "<br />";

echo "<input type = 'button' value = 'RETURN' style = 'width: 75px; height: 75px;' onclick = \"javascript:window.location.href = 'jdpset1_4.html'\">";

echo "</body>";
echo "</html>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:46:17.253

您可以检查查询的输出`$record`...

```
 if (count($record)==0) {
    echo "the ID you entered does not exist! Try again...";
 } else {   
    // code to output the part's details...
 } 
```

把`if (count...`零件代替...

```
 if($part_number == "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:44:31.527

您根本没有验证结果确实返回任何数据的任何地方。在调用 之后`mysql_query()`，您应该`mysql_num_rows()`立即查看查询返回了多少行——如果`mysql_num_rows($result_set)`为零，则您的查询没有返回任何数据。

请注意如何`$part_number`从未被或任何这些函数修改`mysql_query()`；`mysql_fetch_array()`所以它永远不会是空的，除非它是这样开始的（使你的当前`if`几乎没用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:00:30.450

从你的代码中我注意到两件事

```
$query = "select * from part where part_number = '" . $part_number . "'"; 
```

由于您的零件编号是一个字符串，我建议您不要`LIKE`使用`=`

```
$query = "select * from part where part_number LIKE '" . $part_number . "'"; 
```

另一个是检查您的记录是否以多维数组的形式返回，例如

```
 $record = Array([0]=>array('part_description'=>A123...)). 
```

那么你必须像这样分配

```
$part_description = $record[0]['part_description']; 
```

我希望它可以帮助你

# matlab - 如何让MATLAB在矩阵的每一列中显示最小值的行索引？

> ID：15155679
> 
> 赞同：1
> 
> 时间：2013-03-01T10:37:26.397
> 
> 标签：matlab, find, row

我有这样的矩阵：

小号 =

```
2.2100   16.0100
0.0100    9.8100
9.4100    0.0100 
```

现在我想知道每一列中最小值的行号。我正在寻找的向量应该是这样的：

D =

```
 2
 3 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:42:38.290

```
[val, ind] = min (S) 
```

你将拥有价值：

```
val =

   0.010000   0.010000

ind =

   2   3 
```

# java - 创建多个标签并将它们保存在列表中以供显示

> ID：15155680
> 
> 赞同：1
> 
> 时间：2013-03-01T10:37:29.770
> 
> 标签：java, swing, list, append, jtextfield

就像我们`tags`在发布有关堆栈溢出的问题之前选择一样，我想在将联系人注册到数据库时做类似的事情。在表单中，有一个 JTextField `txtTags`要求一个词来最好地描述一个联系人。ie Contact John Smith 最好用 来描述`java`。java成为标签。

我的困惑在于为联系人创建了多个标签，我需要在添加到数据库之前显示标签列表。就像stackoverflow发布问题标签部分允许在您犯错时删除标签一样很棒。

![在此处输入图像描述](../Images/de0d4f7588879d5c304ad1ab8bc5d741.png)

所以就在文本字段下方，我想显示所有标签。

1.  请你能告诉我如何处理逻辑。

2.  我正在使用 java 反射器字段，所以 DTO 和 DAO。在 DTO 中，标签字段设置器和获取器逻辑如何工作，我认为与列表有关。

我希望有一个代码示例来演示这些想法。arraylist，列表，集合任何东西。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:16:53.267

您可以从文本字段中获取文本。将其拆分为具有标签名称的数组（实际上是 String[]）。对于数组中的每个标签名称，您应该检查现有标签的列表并确定每个标签名称是否有一个标签。对于找到的，您可以显示弹出窗口或其他内容......或者在找不到某些标签时抛出错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:23:37.480

1.  在[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)中创建[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)包含[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)（可能不需要，但是你必须限制可见行的数量，也许是个坏主意，也许不是）

2.  必须决定列数（2-4 列？？？），也许要删除`showHorizontalLines`, `showVerticalLines`，然后您将获得与您想要的相同的自动完成功能

3.  放在那里（到`JDialog`）[JTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)并在 JTable 中使用[过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)，一切都在`JTable` 教程[TableFilterDemo的示例中编码](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableFilterDemoProject/src/components/TableFilterDemo.java)

# dojo - worklight dojo bb 7 roundrectlist 触控板未使用

> ID：15155681
> 
> 赞同：0
> 
> 时间：2013-03-01T10:37:36.420
> 
> 标签：dojo, ibm-mobilefirst

我得到一个带有roundrectlist 的简单dojo 示例。

```
<div data-dojo-type="dojox.mobile.RoundRectList" id="results" >
    <div data-dojo-type="dojox.mobile.ListItem" >item1</div>
        <div data-dojo-type="dojox.mobile.ListItem" >item2</div>
</div> 
```

在黑莓设备 os 7 上执行它，触控板不用于在列表中导航。相反，我必须移动鼠标指针并按回车键。要添加或可能是 dojo 的特定代码不是 bb 的正确框架。Worklight 5.0.5 谢谢。关于杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T13:12:07.830

也许这个页面可以帮助：

[https://developer.blackberry.com/html5/documentation/using_the_navigation_mode_1866978_11.html](https://developer.blackberry.com/html5/documentation/using_the_navigation_mode_1866978_11.html)

问候，

```
Eric 
```

# php - 从两组值创建数组

> ID：15155686
> 
> 赞同：0
> 
> 时间：2013-03-01T10:37:57.427
> 
> 标签：php, arrays

我正在尝试合并 2 个数组而不丢失值：

```
$a = array('one', 'two', 'three');
$b = array('four', 'five', 'six'); 
```

我需要的结果是：

```
array('one', 'two', 'three', 'four', 'five', 'six'); 
```

我知道这可以使用循环 + [] 运算符来完成，但这似乎是一项常见任务，我正在寻找一个更简单的解决方案，也许使用内置数组函数。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:40:16.760

句法 ：`array array_merge ( array $array1 [, array $... ] )`

array_merge($a,$b);

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:40:09.520

您可以使用 array_merge(); 功能如下：

```
$result = array_merge($array1, $array2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:40:47.897

`array_merge()`应该做的伎俩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:40:50.313

数组 array_merge ( 数组 $array1 [, 数组 $... ] )

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# c - 如何使用 C 编程删除行号？

> ID：15155687
> 
> 赞同：-2
> 
> 时间：2013-03-01T10:37:57.483
> 
> 标签：c, arrays

我有一个`Structure`，在`Structure`我有一个`Array`，

我读了一个文本文件，然后在“Array Into Structure”中打开它，

我所拥有的是一个名字列表，最后一个结果。

那么找到行号并选择要删除的行并删除它的最佳方法是什么？我说，`Array`成`Structure`.?

我知道我可以使用`memmove`，`realloc`但我该如何使用这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:56:19.017

好吧，您所能做的就是将以下元素移向开头，并减少“逻辑”长度。逻辑长度与物理长度不同，物理长度是数组可以容纳的最大元素数，具体取决于已分配的内存量。

所以，假设一个数组从元素开始`array`，`count`删除`n`:th 元素的代码是：

```
if( n < count - 1)
  memmove(array + n, array + n + 1, ((count - n) - 1) * sizeof *array);
--count; 
```

这将复制以下元素（除非您要删除最后一个元素，在这种情况下没有可复制的内容），然后减少逻辑长度。

# c++ - pthread 在类中运行私有函数

> ID：15155689
> 
> 赞同：1
> 
> 时间：2013-03-01T10:37:59.103
> 
> 标签：c++, class, pthreads, header-files, static-members

我正在编写一个带有 pthreads 的类，它的头文件和 .cpp 定义文件。

在 .hi 中有：

```
class test
{
    public:
        int a;
    ...
    private:
        typedef void (*myfunc)(void *p);
        static myfunc pthreadRun;
} 
```

在 .cpp 我有：

```
...
typedef void (*myfunc)(void *p);
myfunc test::pthreadRun
{
    this->a = 10;
    pthread_exit(NULL);
}
... 
```

我收到一个错误：`void (* test::pthreadRun)(void*)`is not a static member of `class test`，还有一堆其他错误，但这是第一个。

我很困惑，因为它被声明为静态：/

`pthreadRun`是线程运行函数`pthread_create()`

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:02:23.623

很难准确猜测您要做什么，但首先我想我会像这样重写您的代码：

```
class test
{
    public:
        int a;
    ...
    private:
        static void pthreadRun(void *p);
} 
```

和

```
void test::pthreadRun(void *p)
{
    // this->a = 10; This line is now a big problem for you.
    pthread_exit(NULL);
} 
```

因此，这是您正在寻找的那种结构，尽管您无法从此上下文中访问成员元素（例如 this->a），因为它是一个静态函数。

通常处理这个问题的方法是使用 this 指针启动线程，以便在函数中您可以：

```
void test::pthreadRun(void *p)
{
     test thistest=(test)p;
     thistest->a=10;  //what you wanted
     thistest->pthreadRun_memberfunction(); //a wrapped function that can be a member function
    pthread_exit(NULL);
} 
```

您应该能够将所有这些功能设为私有/受保护（假设您从此类中启动线程，我认为这样做可能更可取。

# java - 如何从应用引擎获取自然 json 表示法？

> ID：15155696
> 
> 赞同：0
> 
> 时间：2013-03-01T10:38:14.393
> 
> 标签：java, json, google-app-engine, rest, google-cloud-endpoints

我已经用 Jersey 构建了一个 REST 应用程序，但没有成功地从 JAXB 中获取自然符号。我只是调整了我的 GWT 应用程序以将错误传输的类型转换为我想要的类型。我知道，这不是最好的解决方案，但没有时间做其他事情。

现在我尝试在应用引擎上设置云端点并获得完全相同的格式，这与谷歌在他们的示例中显示的格式不同，我怀疑我在 GAE 方面遗漏了一些东西。

这就是我想从 GAE 得到的：

```
{
"anumberprop":123,
"atextprop":"blah",
"anarray":[{"another_no":432}]
} 
```

这是我实际得到的：

```
{
"anumberprop":"123",
"atextprop":"blah",
"anarray":{"another_no":"432"}
} 
```

这会导致问题，因为客户端将是 GWT 应用程序或 Google Apps 脚本，它们会在内部解析 JSON，并且当类型不匹配时会出现很多异常。

我究竟做错了什么？

最好的问候，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:21:23.807

432 与“432”可能是因为 Cloud Endpoints 引用了 64 位整数，因此 JavaScript 客户端可以使用标准 JSON 解析器而不会丢失这些数字的精度。我无法重现丢失的数组括号。您可以发布您的响应对象吗？

# java - 在 Oracle 中调试存储过程

> ID：15155698
> 
> 赞同：2
> 
> 时间：2013-03-01T10:38:16.270
> 
> 标签：java, database, oracle, stored-procedures

我有一个从 Java 应用程序调用的存储过程。我需要调试该存储过程以了解流程。

在Java应用程序调用存储过程之后，有没有一种方法或好的工具可以用来调试存储过程？

目前，我使用 TOra 作为 Oracle 数据库的数据库客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T18:03:36.367

看看[使用 SQL Developer 进行远程调试](http://sueharper.blogspot.com/2006/07/remote-debugging-with-sql-developer_13.html)。

用于调试 Oracle PL/SQL 的工具有很多，但几乎所有工具都使用有限的 DBMS_DEBUG。据我所知，只有 SQL Developer 允许您使用更强大的 DBMS_DEBUG_JDWP。

# ibm-mobilefirst - 部署 IBM Worklight 企业服务器时出现 BeanCreationException

> ID：15155699
> 
> 赞同：0
> 
> 时间：2013-03-01T10:38:19.677
> 
> 标签：ibm-mobilefirst

我们正在尝试通过 Tomcat 在 Ubuntu 服务器上部署 Worklight Enterprise 版本

虽然我们成功完成了几个步骤，但在启动 Tomcat 并使用我们的 War 文件运行时遇到了一个错误。我们使用 MySQL 作为数据库。

我们面临的具体错误是“.BeanCreationException：在创建 URL 中定义的名称为 'deployService' 的 bean 时出错”

严重：FWLST0003E：========= 启动项目/td_ibm org.springframework.beans.factory.BeanCreationException 失败：在 URL [jar:file:/usr/share/tomcat6 中定义名称为“deployService”的 bean 创建错误/lib/worklight-jee-library.jar!/conf/integration.xml]：init 方法调用失败；嵌套异常是 java.lang.NullPointerException

完整的日志跟踪文本文件可以在[Tomcat Log中找到](https://www.dropbox.com/s/qi7k43fv3tha2q0/tomcat_deployment_error.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:46:20.227

这显然是一个配置问题。1\. 运行 mysql-admin（MySQL UI 前端）并确保您可以使用您在 worklight.properties 中定义的名称和用户连接到 Worklight 目录。

1.  如果数据库与 tomcat 位于不同的机器上（确保您已为 MySQL 设置正确的远程访问权限（仅用于测试：尝试为 Worklight DB 用户提供不受信任的访问权限。即使用 "@%" ））

2.  另一个问题：如果您在 Tomcat 上安装 Worklight：您是否运行了 SQL 模式脚本来创建 Worklight 模式？您必须手动运行它（不过有一个解决方法：从运行 Worklight 项目的 Eclipse 连接到同一个数据库）

3.  /var/lib/tomcat6/worklight.home/td_ibm/data/export/adapters 下有哪些文件？如果它为空，则 Worklight 代码中可能存在错误。

# jquery-mobile - 在流星 js 元素/字段更新时保留 jquery 移动样式

> ID：15155701
> 
> 赞同：2
> 
> 时间：2013-03-01T10:38:23.160
> 
> 标签：jquery-mobile, meteor

我目前正在开发一个使用 Meteor JS 和 jQuery Mobile 的 Meteor 项目。除了 Meteor 更新元素的某些情况外，一切都进展顺利。

例如，JQM 自动将一些周围的 div 添加到选择框以进行格式化（`.ui-select`、`.ui-btn`、`.ui-shadow`等），但是当 Meteor 更新此元素时，无论是从远程还是本地 db 更改，它都会将该元素恢复为标准选择框，实际上破坏了用户界面。

我只是想知道是否有一个简单的解决方案来解决这个问题，即 Meteor 在更新元素之前调用 jQuery 进行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:18:42.170

**`jQuery Mobile`**必须增强动态添加的内容。

它可以通过几种方式完成，但最常见的是：

1.  如果您只想增强内容

    ```
    $('#page-id').trigger('create'); 
    ```

2.  如果您想增强整页（内容+页眉+页脚）

    ```
    $('#page-id').trigger('pagecreate'); 
    ```

很高兴知道这些方法具有广泛的性能，因此您始终可以单独增强小部件（按钮、列表视图 ...）。要了解更多信息，请查看我的其他**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，透明的是我的个人博客，或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

# angularjs - 在 AngularJS 中制作手风琴

> ID：15155702
> 
> 赞同：1
> 
> 时间：2013-03-01T10:38:30.133
> 
> 标签：angularjs, angularjs-directive

我是 AngularJS 的新成员。我知道 angular-ui 手风琴。但我不想使用它。我想通过自己制作玩具手风琴来学习 AngularJS 中的手风琴基础知识。这是我的代码的主体部分。

```
 <body ng-app="MyZippy">
    <zippy slide-title="Say Hello To Universe" slide-content="Hello Universe"></zippy>
    <zippy slide-title="Say Hello To World" slide-content="Hello World"></zippy>
  </body> 
```

这是 app.js

```
var app = angular.module('MyZippy', []);

app.directive('zippy',function(){
    var linkFn = function(scope,element,attrs){
        scope.isHideContent = false;
        scope.toggleContent = function(){

           scope.isHideContent = !scope.isHideContent;

        };
    };
    return {
      restrict :"E",  
      scope:{
       zippytitle:"@slideTitle",
       zippycontent:"@slideContent"
      },
      link : linkFn,
      template : 
                  '<div ng-click="toggleContent()" style="border:1px solid #ccc;padding:3px;width:207px"><h3 style="padding:3px;background:#ccc;width:200px;margin:0px;">{{zippytitle}}</h3>'+
                  '<div ng-show="isHideContent"><p>{{zippycontent}}</p></div></div>'
    };
}); 
```

我怎样才能从中获得手风琴效果？如何在链接函数中获取所有 zippy 指令参考？编译功能对我有帮助吗？啊.. 没有 JQuery 当然你可以[在这里看到输出](http://plnkr.co/edit/QiYvx7Bsy6rV0nUF5W3Q)

提前致谢

# ruby-on-rails - 设计重定向到登录时的自定义操作

> ID：15155703
> 
> 赞同：0
> 
> 时间：2013-03-01T10:38:32.057
> 
> 标签：ruby-on-rails, devise, routes

我正在使用 Devise 进行用户身份验证，并希望将用户重定向到我为名为“myaccount”的用户类设置的自定义操作。但是，我无法正确使用语法 - 我尝试的所有内容都出现了不同的错误。

此代码可能会向您展示我正在尝试实现的目标（尽管它不起作用）：

```
def after_sign_in_path_for(resource)
    redirect_to :controller => 'users', :action => 'myaccount', :id => current_user.id and return
  end 
```

和路线：

```
 devise_for :users, :controllers => { :registrations => "registrations" }

  devise_for :users 

  resources :users do
    member do
      get 'myaccount'
    end
  end 
```

抱歉，这可能是一个新手问题 - 但我如何更改我的重定向或添加新路由以便例如 user_sign_in_path 可以工作？

谢谢！

更新：

如果其他人发现这个问题，这对我有用：

```
url_for :controller => '/users', :id => current_user.id, :action => 'myaccount' 
```

这是我需要它的正确顺序。我必须在控制器名称前加上一个斜杠，以使其使用它而不是 Devise 控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:31:51.487

你不必打电话`redirect_to`

```
def after_sign_in_path_for(resource)
  { controller: 'users', action: 'myaccount', id: current_user.id }
end 
```

如果这不起作用，请将其包裹起来，`url_for`这应该可以工作:)

# active-directory - 如何更改多个用户的 UPN 后缀？

> ID：15155706
> 
> 赞同：0
> 
> 时间：2013-03-01T10:38:38.513
> 
> 标签：active-directory, office365, upn

我正在为迁移到 office365 做准备，因为我们有 mydomain.local 域，所以我需要添加一个替代 UPN（与我的 SMTP 命名空间相同）所以 mydomain.com。我将备用 UPN 添加到我的域中，现在我想一次更改多个用户 UPN。

我选择多个用户 > 右键单击​​ > 属性 > 帐户 > UPN 后缀，然后从下拉列表中选择 UPN。完成后，我单击“确定”或“应用”，所有选定用户都收到以下错误：

> 指定的目录服务属性或值不存在。

当我从一个用户更改它时，它可以正常工作。

我现在的问题是，有人可以帮我解决，告诉我为什么会出现这个错误，或者我可以用什么方法来实现。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:39:00.060

您可以尝试[http://admodify.codeplex.com/](http://admodify.codeplex.com/)。
这里有一篇文章展示了它的用法示例：http: [//blogs.technet.com/exchange/archive/2004/08/04/208045.aspx](http://blogs.technet.com/exchange/archive/2004/08/04/208045.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-14T08:41:45.090

使用以下 powershell 脚本。将“contoso.local”更改为您的实际域名。

```
$localUsers = Get-ADUser -Filter {UserPrincipalName -like "contoso.local"} -Properties UserPrincipalName -ResultSetSize $null

$localUsers | foreach { $newUpn = $_.UserPrincipalName.Replace("contoso.local", "yourdomain.com"; $_ | Set-ADUser -UserPrincipalName $newUpn} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-12T18:03:56.763

最好使用脚本更改批量用户，而不是使用您提到的方法。

为此，您可以使用 PowerShell 脚本（推荐）或 VBScript。

PowerShell 脚本（使用 CSV 文件）：

[http://gallery.technet.microsoft.com/Change-UPN-592177ea](http://gallery.technet.microsoft.com/Change-UPN-592177ea)

PowerShell 脚本（适用于 OU 搜索库中的所有用户）：

[http://community.spiceworks.com/scripts/show/1457-mass-change-upn-suffix](http://community.spiceworks.com/scripts/show/1457-mass-change-upn-suffix)

VB脚本：

[http://blogs.technet.com/b/heyscriptingguy/archive/2004/12/06/how-can-i-assign-a-new-upn-to-all-my-users.aspx?Redirected=true](http://blogs.technet.com/b/heyscriptingguy/archive/2004/12/06/how-can-i-assign-a-new-upn-to-all-my-users.aspx?Redirected=true)

# iphone - 以编程方式锁定 iPhone

> ID：15155707
> 
> 赞同：-2
> 
> 时间：2013-03-01T10:38:43.157
> 
> 标签：iphone, ios, objective-c, iphone-privateapi

我想以编程方式锁定我的 iphone 意味着我正在使用应用程序并且应用程序有按钮说本地 iphone。当我通过此按钮时，我的应用程序将进入后台并出现 iphone 锁屏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:45:45.370

如果你想这样做，Apple 永远不会批准这个，你的应用程序必须**越狱**。您可以通过在项目上调用 Private 框架来做到这一点。您可以使用**GraphicsServices.framework**。注意，这个**GraphicsServices.framework**是一个私有框架。Apple 从不接受您的应用程序。通过调用**GSEventLockDevice()**方法，您可以轻松锁定您的 Iphone 设备。此**GSEventLockDevice()**位于**GSEvent.h**中。希望这个有帮助。

# javascript - 如何动态设置工作灯服务器

> ID：15155708
> 
> 赞同：0
> 
> 时间：2013-03-01T10:38:49.910
> 
> 标签：javascript, xml, ibm-mobilefirst

我的问题是：我可以动态更改 worklight 服务器 url（使用 javascript）吗？tnks 的答案。

* * *

谢谢你的回答！这是我的代码：

```
    函数 loadXMLDoc(dname)
    {
        如果（窗口.XMLHttpRequest）
        {
            xhttp=新的 XMLHttpRequest();
        }
        别的
        {
            xhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xhttp.open("GET",dname,false);
        xhttp.send();
        返回 xhttp.responseXML；
    }

    函数 wlCommonInit(){

        xmlDoc=loadXMLDoc("/BadgeSYSmProj/apps/BadgeSysApp/application-descriptor.xml");

        x=xmlDoc.getElementsByTagName("worklightServerRootURL")[0].childNodes[0];
        x.nodeValue="http:\\NEW URL.html";

        document.write(x.nodeValue);

    ...
    ...

```

但有一个错误：

加载资源失败：服务器响应状态为 404 (ProxyServlet: /BadgeSYSmProj/apps/BadgeSysApp/application-descriptor.xml) http**://localhost:8080/apps/services/preview/BadgeSysApp/common/0 /default/js/BadgeSysApp.js 未捕获的类型错误：无法调用 null 的方法“getElementsByTagName”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:30:03.223

你不能。WL 服务器 URL 是在您构建应用程序时硬编码在您的应用程序中的。它取自 application-descriptor.xml 文件（worklightServerRootURL 元素）并注入到每个环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:47:47.477

是的，您可以编辑 application-descriptor.xml 并在每次要更改 URL 时创建一个新版本。更好的是根据 worklight.properties.{env} 中提到的 URL 生成 .wlapp 包的构建脚本。这将有助于促进跨环境的 Worklight 部署

# haskell - MTL 库需要哪些语言扩展？

> ID：15155709
> 
> 赞同：8
> 
> 时间：2013-03-01T10:38:50.887
> 
> 标签：haskell, typeclass, monad-transformers, language-extension

我试图通过基于现有设计实现我自己的小型库来理解 monad 转换器。

我坚持的是语言扩展。在[MonadError](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/src/Control-Monad-Error-Class.html#MonadError)中，唯一提到的扩展是`UndecidableInstances`. `FunctionalDependencies`但是，如果不使用and ，我就无法编译类似的代码`FlexibleInstances`。

我认为需要 FunDeps 的示例：

```
class (Monad m) => MonadError e m | m -> e where 
```

还有一个灵活的实例：

```
instance MonadError e m => MonadError e (MaybeT m) where 
```

代码如何`MonadError`避免额外的两个扩展？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T10:51:40.523

您不必拼出源文件本身中的所有扩展名。所有/大多数模块使用的通用扩展都可以在项目的 cabal 文件中列出。在[mtl 的情况下](http://hackage.haskell.org/packages/archive/mtl/2.1.2/mtl.cabal)：

```
extensions:
    MultiParamTypeClasses
    FunctionalDependencies
    FlexibleInstances 
```

# filter - 是否有适用于 RTP 兼容 IP 摄像机的 DirectShow 过滤器？

> ID：15155710
> 
> 赞同：2
> 
> 时间：2013-03-01T10:38:50.400
> 
> 标签：filter, directshow, rtp, ip-camera

是否存在从网络以 RTP 格式接收视频流的 DirectShow 过滤器？目的是在我的应用程序中使用 IP 摄像机的视频流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:43:40.187

没有标准过滤器。存在第三方过滤器（主要是商业过滤器），您可能想咨询相机供应商是否可以为您提供此类过滤器，至少与他们的产品兼容，例如作为补充 SDK 的一部分。

看：

*   [DirectShow 中的实时流式传输 H.264](https://stackoverflow.com/questions/6450463/live-streaming-h-264-in-directshow)
*   [RTSP/RTP 源过滤器（8/16 位 PCM AMR MP3、H264）](http://sourceforge.net/projects/videoprocessing/files/DirectShow/DirectShowFilters/RTSP%20Source%20Filter%20%28audio%29/)

# cordova - Phonegap 更改标签的语言？

> ID：15155713
> 
> 赞同：6
> 
> 时间：2013-03-01T10:38:57.227
> 
> 标签：cordova

我有一个 Phonegap 应用程序，我在其中使用相机插件。问题是，这些按钮不使用原生 iOS 语言，而是只有英文（“Retake”和“Use”等）。

我正在做的应用程序是儿童应用程序，但他们不是以英语为母语的人。所以我想用他们的母语来做。

有什么办法可以将这些按钮翻译成正确的语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-28T08:01:17.203

我可以通过修改项目 plist ( `platforms/ios/ProjectName/ProjectNAme-Info.plist`) 来更改标签语言。

我`CFBundleDevelopmentRegion`从`English`to更改`fr_FR`并添加了这个数组：

```
<key>CFBundleLocalizations</key>
<array>
  <string>fr</string>
</array> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T07:49:18.387

如果你使用 XCode 作为 IDE 来开发你的项目，你可以将它本地化为一个普通的 iOS 项目。要知道如何做到这一点，您可以查看此[其他帖子](https://stackoverflow.com/questions/8258391/how-do-i-localize-uiimagepickercontroller)。您不需要为这些“单词”（Retake、Use 等）提供翻译，只需设置正确的本地化将告诉 iOS 使用本地语言。

但是，如果您使用 PhoneGap Build 来编译您的项目，请在 PhoneGap Build 论坛中查看[此主题。](http://community.phonegap.com/nitobi/topics/problem_with_binary_details_ios_localization_builded_with_phonegap_build)与 XCode 过程类似，您需要在 /www 目录下创建一个名为“locales”的文件夹，并将您想要使用的语言放在那里。同样，您不需要为这些按钮提供翻译。iOS会自己做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T09:30:41.367

如果您不想在每次构建后手动更改 XCode 中的语言，您可以在 Mac 上的 phonegap/cordova 源代码中进行以下更新：

*（以 cordova 3.6.3 和法语语言环境为例，您需要更新到您的版本和语言）*

```
Folder : ~\.cordova\lib\npm_cache\cordova-ios\3.6.3\package\bin\templates\project\__PROJECT_NAME__\
File : __PROJECT_NAME__-Info.plist
Update :
    => Change <key>CFBundleDevelopmentRegion</key>
              <string>English</string>
       to     <key>CFBundleDevelopmentRegion</key>
              <string>France</string>

    => Add after it
              <key>CFBundleLocalizations</key>
              <array>
                    <string>fr</string>
              </array>

Folder : ~\.cordova\lib\npm_cache\cordova-ios\3.6.3\package\bin\templates\project\__PROJECT_NAME__\Resources\
Update :
    => Create a 'fr.lproj' folder by Copy/Paste of the 'en.lproj' folder
    => Complete the translation in 'fr.lproj/Localizable.strings' file (not required) 
```

这将影响您使用此 cordova 版本构建的所有项目。

之前备份您的cordova文件夹，不要将不需要的文件留在“模板”文件夹下，否则它们将被复制到最终包中。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:45:49.987

幸运的是，Cordova 是**开源**的。
第一步是在[Apache Cordova 错误跟踪器上](https://issues.apache.org/jira/browse/CB)**报告**错误。然后，**克隆****[cordova 源代码](http://incubator.apache.org/projects/callback.html)**以尝试了解为什么插件无法显示正确的语言。

它没有那么复杂。插件只是 javascript 函数和本机函数之间的粘合剂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-28T18:42:19.783

事实上，如果 iOS 找不到在 CFBundleLocalizations 中声明的本地化，CFBundleDevelopentRegion 似乎是一个后备方案。

您无需更改该密钥。只需在 .plist 中添加 ISO 国家代码数组（就像 Michaël 所做的那样）就足够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-05T12:27:49.213

解决方案是在`plist`文件中声明语言，例如：

`<key>CFBundleLocalizations</key> <array> <string>it</string> <string>es</string> </array>`

如果您不想手动执行此操作，因为您可能没有跟踪 plist 文件，您可以在运行时使用[Cordova 自定义配置插件](https://github.com/dpa99c/cordova-custom-config)将缺少的密钥添加到`plist`文件中`cordova prepare`

# joomla - Joomla 模块表单提交到同一页面

> ID：15155717
> 
> 赞同：0
> 
> 时间：2013-03-01T10:39:06.700
> 
> 标签：joomla, joomla2.5

我在一篇文章中有一个 Joomla 模块。该模块有一个表单，当我提交表单时，我希望它重新加载相同的页面（一些 PHP 会处理表单的新状态）。

有没有什么方法可以在不使用 ajax 的情况下使用模块来做到这一点？因为目前 Joomla 抛出 404 并且我无法弄清楚表单试图提交到哪里。

假设我的页面是`http://www.example.com/payment`

表格提交给`http://www.example.com/404`

这是我的表格：

```
<form method="post">
    <label>Order ID</label>
    <input type="text" name="id" value="<?php echo $_POST['id']; ?>" />
    <label>Email</label>
    <input type="text" name="email" value="<?php echo $_POST['email']; ?>" />
    <input type="submit" name="login" value="Continue" />
</form> 
```

我尝试过没有表单操作，以及：

```
action="index.php?option=com_content&view=article&id=8"

action="/index.php?option=com_content&view=article&id=8"

action="payment"

action="/payment" 
```

它总是提交到 404。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:47:56.040

问题可能出在`id`通过提交`input`，因为 Joomla`id`在内部使用来查找正确的路线，所以如果您用您的请求覆盖它，Joomla 将尝试使用 unexisting 获取文章/类别`id`。

所以，尝试用 id 重命名输入的名称，看看会发生什么。

# f# - 灵活的类型和泛型参数

> ID：15155718
> 
> 赞同：2
> 
> 时间：2013-03-01T10:39:19.960
> 
> 标签：f#, flexible-type

我想知道为什么第二行告诉我灵活的类型受到了限制。显然可以绕过它，但是从中可以吸取一些教训吗？

```
type DataTable with
    static member FromObjArray     (input : seq<#seq<'T>>) =  ()  //keep the flexibility
    static member FromObjArray<'T> (input : seq<#seq<'T>>) =  ()  //constrained to seq 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:23:47.743

我认为灵活类型在第二种情况下受到限制，因为您将该方法显式声明为只有*一个*类型参数的泛型方法`'T`。灵活类型被取消到另一个类型参数，如果您使参数显式，编译器将无法添加该（隐藏）类型参数。

第一个声明对应于如下内容：

```
static member FromObjArray<'T, 'S when 'S :> seq<'T>> (input : seq<'S>) =  () 
```

如果你明确说该方法只接受类型参数`'T`，那么编译器就无法生成这样的方法（因为它需要为`'S`从序列派生的类型添加）。

# plsql - 从长数据类型 PL/SQL 中删除尾随空格

> ID：15155720
> 
> 赞同：0
> 
> 时间：2013-03-01T10:39:21.877
> 
> 标签：plsql, trim, spaces, typeconverter

我有一个 Long 里面有几句话，最后有大量的空格需要删除。问题是我已经编写了一个函数来将这个 long 转换为 Varchar2 并修剪空格，但这没有奏效。

我用过，RTRIM，TRIM TRAILING，TRIM，甚至尝试用“”替换“”（但这只是删除了单词之间的所有空格。

例子：

```
SELECT TRIM(comment)
FROM p_comments
WHERE p_domain = 'SIGNATURE'
AND p_code = c_p_code; 
```

这不起作用，因为它无法在“LONG”上执行修剪。

```
SELECT RTRIM(f_get_varchar(get_p_code('JOHN'))) FROM dual 
```

没有工作，只是返回了相同的结果。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:00:38.680

设法找到答案。我使用了正则表达式。

```
SELECT regexp_substr(cis.acs_reports.f_get_varchar(:p_pfo_code), '.+[^space::]') pfo_comment 
```

从双

# unix - 使用 Unix 命令行工具修改 FASTA 标头

> ID：15155728
> 
> 赞同：1
> 
> 时间：2013-03-01T10:39:54.900
> 
> 标签：unix, sed, awk, grep, fasta

我再次陷入修改文本的困境。我想更改大型文本文件，例如：

```
>hg19_ct_UserTrack_3545_691 range=chr1:8121498-8121502 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATGG
>hg19_ct_UserTrack_3545_690 range=chr1:8121587-8121591 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATAG 
```

到

```
>chr1:8121498-8121502 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATGG
>chr1:8121587-8121591 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATAG 
```

我一直在使用`sed '/^>/s/[^ ]* />/'`which 删除第一部分（`>hg19_ct_UserTrack_3545_690`），但我真的坚持如何删除`range=`. 我尝试了各种组合，`//`但`grep`没有任何乐趣。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:45:15.410

尝试这些不同的 shell 命令 =)

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
awk -F'range=' '/^>/{print ">" $2}' file 
```

或使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
 sed '/^>/s/.*range=(.*)/>\1/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:47:22.337

试试这一行：

```
sed 's/[^=>]*=//' file 
```

使用您的输入进行测试：

```
kent$  echo ">hg19_ct_UserTrack_3545_691 range=chr1:8121498-8121502 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATGG
>hg19_ct_UserTrack_3545_690 range=chr1:8121587-8121591 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATAG"|sed 's/[^=>]*=//'
>chr1:8121498-8121502 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATGG
>chr1:8121587-8121591 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATAG 
```

# javascript - express + angularJS之间的通信

> ID：15155731
> 
> 赞同：0
> 
> 时间：2013-03-01T10:40:11.067
> 
> 标签：javascript, ajax, node.js, express, angularjs

使用 angularJS 我有一个数据文件，我在其中与数据库进行通信。

因此，我想将数据发送到我从前端获得的数据以将其发送到打包，但不知何故这现在正在工作。你能帮我么。

```
app.get('/api/data/:id', function (req, res) {
    res.json({...});
});

app.post('/api/data/', function (req, res) {
    res.json({
        success: true
    })
}); 
```

对于 get 和 delete 函数，这很好用，但我不知道如何制作 post 和 put 函数以及如何在那里获取数据。

这是我在客户端上所做的

```
 add:function (data) {
            location = '/api/data/';
            $http.put(location, merchant, successCb).
                success(function(data, status, headers, config) {
                    console.log(arguments);
                    successCb(data);
                }).
                error(function(data, status, headers, config) {
                    console.log('Error:' + arguments);
                });
        }, 
```

有人可以帮助我如何在服务器和客户端上编写它。（我在客户端及其简单的 javascript 对象上获得了正确的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:11:57.790

您必须使用 $resource 这是与宁静的服务器端数据源进行通信的正确方式...

angularjs 在这里有关于 $resource 的很好的例子：http://docs.angularjs.org/api/ngResource [.](http://docs.angularjs.org/api/ngResource) $resource

# paypal - PayPal IPN - 如果网站电子邮件地址与 PayPal 帐户电子邮件地址不同怎么办？

> ID：15155734
> 
> 赞同：0
> 
> 时间：2013-03-01T10:40:13.350
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

在用户从我的网站购买商品后，我将设置一个 IPN 脚本，但我只是想，如果他们在我的网站上注册的电子邮件地址与他们在 PayPal 上注册的电子邮件地址不同怎么办？

即，他们使用forename.surname@domain.com 注册我的网站，但他们的PayPal 帐户登录名是surname.forename@domain.com。

PayPal IPN 将发回 surname.forename@domain.com，我无法确定谁刚刚进行了购买。

我意识到，在这个简单的案例中，有可能找到与数据库中类似的电子邮件地址，但在现实世界中，人们拥有疯狂的电子邮件地址，这并不总是可能的。

以前有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:22:26.813

最好使用不同的标识符（例如发票编号）或将自定义值传递给 PayPal 进行付款。PayPal 将通过 IPN 返回此信息，并可用于将付款链接到您网站上的客户帐户。

这样，您将一个值传递给 PayPal，该值链接回该客户的帐户，而不管他们的 PayPal 帐户详细信息如何。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:50:53.223

我建议你在下订单之前强制客户登录，然后你可以从返回值中获取他们在 Paypal 中使用的电子邮件，并以某种方式将两封电子邮件合并甚至留下它们。

# iphone - UIDocumentInteractionController 在 iOS 6 上不起作用

> ID：15155738
> 
> 赞同：3
> 
> 时间：2013-03-01T10:40:17.917
> 
> 标签：iphone, ios, objective-c, uidocumentinteraction

我需要将文件从一个应用程序发送到另一个应用程序。我使用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)来复制文件。

这是我在 SendingApp 中实现`UIDocumentInterationController`的`ViewController`代码。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"1" ofType:@"zip"];
NSURL *urlPath = [NSURL fileURLWithPath:path];
self.docController = [UIDocumentInteractionController interactionControllerWithURL:urlPath];
[docController retain];
docController.delegate = self;
[docController presentOpenInMenuFromRect:self.view.frame
                                  inView:self.view
                                animated:YES]; 
```

docController 是财产。`ViewController`实现`UIDocumentInteractionControllerDelegate`。

ReceiverApp 设置为处理此扩展名的文件。

我的 ReceiverAppInfo.plist

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>zip</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>ZIP</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.zip-archive</string>
            <string>com.pkware.zip-archive</string>
        </array>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
    </dict>
</array> 
```

在 ReceiverAppDelegate 我使用

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

处理接收文件的打开。

**所以问题**是这段代码在 iOS 5.1 上完美运行，**但**在 iOS 6 上不起作用。 UIDocumentInteractionController OpenIn 菜单出现并显示我的 ReceiverApp 但如果您选择应用程序，它不会做任何事情。我查看了控制台，发现 iPhone Simulator 6.1 尝试将文件复制到一个目录，而 Simulator 5.1 复制到另一个目录。

iPhone模拟器 6.1

```
com.apple.mdt[2342]: 
Copy ~/Library/Application Support/iPhone Simulator/6.1/Applications/367D395F-DC8B-4F4C-83C7-B22992E34C64/sendingZIP.app/1.zip -> 
/var/mobile/Library/Application Support/Containers/-23.ReceiveApp/Documents/Inbox 
```

iPhone模拟器 5.1

```
com.apple.mdt[2439]: 
Copy ~/Library/Application Support/iPhone Simulator/5.1/Applications/0DE1852A-F803-4583-87BC-8F1EBBE362A4/sendingZIP.app/1.zip -> 
~/Library/Application Support/iPhone Simulator/5.1/Applications/927E310A-2766-4709-81CB-0E759F24236D/Documents/Inbox 
```

有人有这样的问题吗？有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T11:12:58.853

请注意，唯一可辨别的 API 差异是

> **管理操作**
> – documentInteractionController:canPerformAction：在 iOS 6.0 中已弃用
> – documentInteractionController:performAction：在 iOS 6.0 中已弃用

你还在执行这些方法吗？也许他们要为意想不到的结果负责。

# android - 为什么， setContentView() 的位置正在创建错误

> ID：15155740
> 
> 赞同：-4
> 
> 时间：2013-03-01T10:40:36.983
> 
> 标签：android

为什么，这是不行的，它会产生错误。

```
super.onCreate(savedInstanceState);

btn = ( Button ) findViewById(R.id.button);
btn.setOnClickListener(this);

setContentView(R.layout.activity_according_to_book); 
```

如果我将“ **setContentView(R.layout.activity_according_to_book); ”放在“** **super.onCreate(savedInstanceState);** ”之后的第二行，它不会创建错误。

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_according_to_book);

btn = ( Button ) findViewById(R.id.button);
btn.setOnClickListener(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:46:20.820

当你打电话时

```
 findViewById(R.id.button); 
```

在 R.layout.activity_according_to_book 上搜索 Button。

所以 setContentView(R.layout.activity_according_to_book);

必须在您寻找视图之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:44:12.143

通过调用`setContentView()`，您为您的视图层次结构膨胀`Activity`，然后您`Views`通过调用获取对 的引用`findViewById()`。如果您没有调用`setContentView()`- 您在视图层次结构中没有任何`Views`内容，因此您无法引用它们。希望它足够清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:44:25.917

它会产生错误，因为应用程序在调用之后加载布局`setContentView`，因此`findViewById`在该方法之前将始终返回 null。

# c# - Asp.net webparts 拖放在 ie 10 上不起作用

> ID：15155744
> 
> 赞同：1
> 
> 时间：2013-03-01T10:40:40.713
> 
> 标签：c#, asp.net, web-parts

Asp.net webparts 拖放在 ie 10 上不起作用，ie 10 支持吗？谢谢。

# javascript - 使用 asp.net 在文本上向服务器端发送请求

> ID：15155748
> 
> 赞同：0
> 
> 时间：2013-03-01T10:40:54.363
> 
> 标签：javascript, jquery, asp.net

我想在服务器端`onFocus`事件上发送请求，但我的方法没有调用，真的很困惑，为此尝试了 jquery ajax，但都失败了是否有任何其他可能的方式使用 asp.net 文本框 onFocus 事件在服务器端发送请求？

asp.net 网站项目是为工作而创建的。

ajax方法代码

```
 $.ajax({
                type: "POST",
                url: "About.aspx/GetRes",
                data: "{}",
                contentType: "application/text; charset=utf-8",
                dataType: "text",
                success: function (msg) {
                    alert(msg);
                }
            }); 
```

正在调用的方法

```
Public Function GetRes() As String
    Return "I am calling GetRes method"
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:48:57.220

如果您能够通过浏览器正确访问提供的网址，请尝试此操作..

```
$.ajax({
                type: "POST",
                url: "About.aspx/GetRes",
                dataType: "text",
                success: function (msg) {
                    alert(msg);
                }
            }); 
```

另外，我正在考虑您的事件出价包含在 document.ready 回调下

并像这样制作服务器端方法

```
<WebMethod>
Public Shared Function GetRes() As String
    Return "I am calling GetRes method"
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:49:26.080

您只能这样调用 PageMethods。

这样的方法应该是静态的（共享的）并且具有`WebMethod`属性。

```
<WebMethod()>
Public Shared Function GetRes() As String
  Return "I am calling GetRes method"
End Function 
```

# php - 启用免费送货价格规则时显示“免费送货文本”

> ID：15155760
> 
> 赞同：1
> 
> 时间：2013-03-01T10:41:13.573
> 
> 标签：php, magento

已经在这个论坛和朋友的帮助下制作了一个脚本，比如：

```
 <?php
 // Determine if product "free shipping" is true
if ($_product->getFreeShipping())
{
echo '<span class="freeShip">'.$_product->getAttributeText('free_shipping').'</span>';
}

 // Determine if product costs more than 65
else if ($_specialPrice = $_product->getFinalPrice() > 65)
{
echo '<span class="freeShip">FREE SHIPPING ON THIS PRODUCT!</span>';
}
?> 
```

这很好用，但现在我还想在启用名为“免费送货规则”的价格规则时显示“此产品免费送货”文本。此价格规则可确保选择的产品免费送货。

我已经做了一个简短的代码，但不知道如何更进一步。//加载规则对象 $rule = Mage::getModel('catalogrule/rule')->load($ruleID);

```
 if ($_product->$rule->getName() = Free Shipping Rule)
        {
        echo '<span class="freeShip">FREE SHIPPING ON THIS PRODUCT!</span>';
        } 
```

使用此帖子中的信息完成此操作：[Magento - 从订单中获取价格规则](https://stackoverflow.com/questions/7649695/magento-get-price-rules-from-order)

如果你看到我可以改变的东西，或者我可以做些什么来让它发挥作用，请告诉我！谢谢！

编辑 1：我认为我们在获取有关运费的信息时也可以这样做。我想像“如果运费 = 0，则显示“此产品免费送货”。刚刚在互联网上找到了一些东西，并进行了一些编辑。你认为这段代码行得通吗？

```
<?php
if($_product->isSaleable())
{
$quote = Mage::getModel('sales/quote');
$quote->getShippingAddress()->setCountryId('*');
$quote->addProduct($_product);
$quote->getShippingAddress()->collectTotals();
$quote->getShippingAddress()->setCollectShippingRates(true);
$quote->getShippingAddress()->collectShippingRates();
$rates = $quote->getShippingAddress()->getShippingRatesCollection();

foreach ($rates as $rate)
}
// Check the product shipping price
php if ($rate->getPrice() == 0)
{
echo '<span class="freeShip">FREE SHIPPING ON THIS PRODUCT!</span>';
}
?> 
```

编辑2：将代码编辑到下面，但仍然不起作用。看起来还不错，不是吗？

```
<?php
 // Determine if product "free shipping" is true
if ($_product->getGratisVerzending())
{
echo '<span class="freeShip">'.$_product->getAttributeText('gratis_verzending').'</span>';
}

 // Determine if product costs more than 65
else if ($_specialPrice = $_product->getFinalPrice() > 65)
{
echo '<span class="freeShip">GRATIS VERZONDEN!</span>';
}

$quote = Mage::getModel('sales/quote');
$quote->getShippingAddress()->setCountryId('*');
$quote->addProduct($_product);
$quote->getShippingAddress()->collectTotals();
$quote->getShippingAddress()->setCollectShippingRates(true);
$quote->getShippingAddress()->collectShippingRates();
$rates = $quote->getShippingAddress()->getShippingRatesCollection();

foreach ($rates as $rate)

// Determine if shipping is 0
else if ($rate->getPrice() == 0)
{
echo '<span class="freeShip">FREE SHIPPING ON THIS PRODUCT!</span>';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:19:56.110

您的代码的这些部分有错误

```
 // Determine if product costs more than 65
else if ($_specialPrice = $_product->getFinalPrice() > 65)
{
echo '<span class="freeShip">FREE SHIPPING ON THIS PRODUCT!</span>';
} 
```

您正在使用`=`which 是一项分配（返回 true），因此无论最终价格如何，它都会显示`FREE SHIPPING ON THIS PRODUCT!`

同样适用于`if ($_product->$rule->getName() = Free Shipping Rule)`

# java - Java：在登录屏幕之前有一个“标题窗口”

> ID：15155761
> 
> 赞同：3
> 
> 时间：2013-03-01T10:41:14.797
> 
> 标签：java, eclipse, splash-screen

我目前正在为大学开发一个 Java 项目应用程序，它已经有一个登录屏幕，程序运行时会加载该登录屏幕，然后进入相关的其他界面。

无论如何，我想知道如何在登录屏幕加载之前让一个窗口出现大约 3 秒钟，它只会显示软件的徽标（就像你在第一次打开 Office 程序和小窗口时看到的那样在主文档出现之前）。是否需要使用线程来使窗口自动关闭？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:15:10.550

我一直想知道`splash screen java`当运行 java 桌面应用程序并将那个窗口放在屏幕中间时，那是什么模式（我猜现在它的名字是），女巫似乎在做某事（但究竟是什么……）应用程序令人讨厌地保持在顶部并隐藏其他内容。

要回答您的问题，您可以绘制一个居中的标题窗口，并为关闭/最大化/最小化按钮禁用面板，然后休眠 3 秒[Thread.sleep(3000L)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#sleep%28long%29)然后隐藏窗口并继续登录屏幕

[或者您可以在显示标题窗口时做一些有用的事情，而不是仅仅等待并启动一个新线程来初始化您的应用程序可能需要的其他 gui 元素和其他东西，然后使用Thread.join()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)等待该线程终止。当线程终止时，您可以隐藏窗口并进入登录屏幕。在这种情况下，等待时间将是 init 例程所需的时间

您也可以考虑将徽标放在登录屏幕某个角落的某个位置。

作为该软件的用户，我不会等待 3 秒只是看着一个标志，尤其是当应用程序什么都不做的时候。

希望这可以帮助

# jquery - jQuery validate - 在文本字段中显示错误消息

> ID：15155769
> 
> 赞同：2
> 
> 时间：2013-03-01T10:41:44.063
> 
> 标签：jquery, jquery-validate

我正在为我的客户构建一个简单的表单，他们希望在文本字段中显示错误消息。这可以通过 jQuery 的验证插件来实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T17:40:56.740

**引用操作：**

> “他们想在文本字段中显示错误消息。这可以通过 jQuery 的验证插件来实现吗？”

**是的。可以** 使用插件的`errorPlacement`回调函数/选项。

**不，我永远不会这样做。** 这使得用户几乎不可能与表单正确交互。该错误会清除用户已经输入的所有数据，并且用户必须删除消息文本才能输入他们的数据。我相信你可以想出聪明的方法来克服这些问题，但是 IMO，从 UI 的角度来看，这是一个非常糟糕的设计。向您的客户[展示这个演示](http://jsfiddle.net/6fUTV/)，然后向下滚动并向他们展示[我的第二个演示](http://jsfiddle.net/kyK4G/)。

**演示：http: [//jsfiddle.net/6fUTV/](http://jsfiddle.net/6fUTV/)**

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // rules & options,
        errorPlacement: function(error, element) {
            element.val(error.text());
        }
    });

}); 
```

* * *

**编辑**：相反，您可以使用该`placeholder`属性。消息仍将*在*输入元素内部，但不会被视为一个`value`，因此不会过多地干扰用户交互。 **但是**，这种方法的最大缺点是，如果您有一个规则来验证数据格式，例如`email`,`minlength`等......用户将永远不会看到验证消息，因为在占位符顶部的字段内有一个值！

```
errorPlacement: function(error, element) {
    element.attr("placeholder", error.text());
} 
```

**演示 2：http: [//jsfiddle.net/n5saemj7/](http://jsfiddle.net/n5saemj7/)**

* * *

**备择方案：**

**使用消息气泡显示错误**：http : [//jsfiddle.net/kyK4G/](http://jsfiddle.net/kyK4G/)

**更多信息**： [如何在 Tooltipster 工具提示中显示来自 jQuery Validate 插件的消息？](https://stackoverflow.com/questions/14741688/how-to-display-messages-from-jquery-validate-plugin-inside-of-tooltipster-toolti)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-26T18:33:56.720

他们告诉你这是一个不好的方法，也许是这样。

但是您可以使用**placeholder**，而不是替换已经存在的内容，只需更改以下内容：

```
errorPlacement: function(error, element) {
    element.val(error.text());
} 
```

为了这：

```
errorPlacement: function(error, element) {
    element.attr("placeholder",error.text());
} 
```

希望对你有所帮助，保重！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:50:13.473

是的，这当然是可能的，因为您验证了文本字段并且它陷入错误只需将错误消息分配为该文本字段或占位符的值。

```
$("#yourtextfield").val("This field can't be empty."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:56:29.080

是的你可以。你的技能看起来很原始。

让我们走简单的路，因为您的问题听起来很简单。出错时，给出将消息字符串作为值分配给输入字段的条件。

就像是

`var err = "err_msg";`

`$('#elementId').val(err);`

[请参阅http://api.jquery.com/val/](http://api.jquery.com/val/)`.val('value')`上的部分

# asp.net-mvc-4 - ASP.NET MVC 如何在 Html.BeginForm 中使用两个 Actionresults？

> ID：15155770
> 
> 赞同：0
> 
> 时间：2013-03-01T10:41:47.837
> 
> 标签：asp.net-mvc-4

我正在尝试与这个[ASP.NET MVC 使用两个输入和 Html.BeginForm](https://stackoverflow.com/questions/4953285/asp-net-mvc-using-two-inputs-with-html-beginform)问题描述的相同，但有足够的差异，我真的不知道如何将它应用到我的项目中：

我有一个包含 3 个下拉列表的视图（个人资料列表、已连接的薪水列表和未连接的薪水列表）

看起来像这样：

```
 <div class="row bgwhite">
           @using (Html.BeginForm("GetConnectedSalaries", "KumaAdmin", FormMethod.Get, new { Id = "ProfileListForm" }))
            {
              <div class="four columns list list1">
                  @Html.DropDownList("Profiles", (SelectList) ViewBag.Profiles, "--Välj profilgrupp--",
                  new 
                  {
                    //onchange = "$('#ProfileListForm')[0].submit();"
                    // Submits everytime a new element in the list is chosen
                    onchange = "document.getElementById('ProfileListForm').submit();"
                  })
              </div>
            }
            @using (Html.BeginForm("Index", "KumaAdmin", FormMethod.Get, new { Id = "SalaryListForm" }))
            {
                <div class="four columns list list2" style="margin-top:-19px;">
                    @Html.DropDownList("Salaries", (SelectList) ViewBag.Salaries, "--Kopplade LöneGrupper--") 
                </div>
            }

            @using (Html.BeginForm("GetNOTConnectedSalaries", "KumaAdmin", FormMethod.Get, new { Id = "NotConSalaryListForm" }))
            {
                <div class="four columns list list2" style="margin-top:-19px;">
                    @Html.DropDownList("Salaries", (SelectList)ViewBag.NotConSalaries, "--Ej Kopplade LöneGrupper--") 
                    <input style="float: left;" type="submit" value="Knyt" />
                </div>
            }
         </div> 
```

正如您在上面看到的，当我更改配置文件列表中的元素时，我有提交表单并调用填充我的“已连接薪金表”的以下操作结果的脚本代码。

```
 [HttpGet]
    public ActionResult GetConnectedSalaries(int Profiles = -1)
    {
        Model.SalaryGroups = AdminManager.GetConnectedSalaries(Profiles);
        ViewBag.Salaries = new SelectList(Model.SalaryGroups, "Id", "SalaryName", "Description");

        return (Index());
    } 
```

我想做的事：

当我在配置文件列表中选择一个元素时，我想调用 2 个 actionresults，一个我在上面显示的，另一个将流行我的第三个列表，其中包含“未连接的薪水”。第二次行动结果：

```
 public ActionResult GetNOTConnectedSalaries(int Profiles = -1)
    {
        Model.SalaryGroups = AdminManager.GetNOTConnectedSalaries(Profiles);
        ViewBag.NotConSalaries = new SelectList(Model.NotConSalaryGroups, "Id", "SalaryName", "Description");

        return (Index());
    } 
```

我不想用 AJAX/JSON 来做这个，严格来说是 MVC。我阅读了上面链接的问题，但不知道如何将其应用到我的项目中，或者是否可以这样做。

如果需要更多信息，请询问，我会尽力提供。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:01:10.473

我非常确定做到这一点的最佳方法是有两个 actionresults 我完全看不到我可以从同一个 actionresult 调用我的两个数据库方法并填充两个列表的解决方案。

简单的解决方案：

```
 [HttpGet]
    public ActionResult GetSalaries(int Profiles = -1)
    {
        Model.SalaryGroups = AdminManager.GetConnectedSalaries(Profiles);
        ViewBag.Salaries = new SelectList(Model.SalaryGroups, "Id", "SalaryName", "Description");
        Model.NotConSalaryGroups = AdminManager.GetNOTConnectedSalaries(Profiles);
        ViewBag.NotConSalaries = new SelectList(Model.NotConSalaryGroups, "Id", "SalaryName", "Description");

        return (Index());
    } 
```

对不起，如果我浪费了您的时间:(但希望这会帮助其他尝试相同的人。

但是，如果有一种方法可以在两个 actionresults 中执行此操作，那么我会将问题保留为开放式，看看它是如何完成的会很有趣。

# uitableview - 使用 GCD 将数据加载到 UITableview

> ID：15155771
> 
> 赞同：1
> 
> 时间：2013-03-01T10:41:49.133
> 
> 标签：uitableview, grand-central-dispatch

下面的代码通过获取谷歌新闻 RSS 提要解析 XML 并将其放入视图中，将数据加载到 UITableView 中。它可以工作，但是当我推送另一个视图并返回时，表格视图滚动已损坏。我已将问题隔离到 GCD 代码。如果我删除它，问题就会消失。所以这里是 GCD 代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"View did load ..");
    self.title = @"News stories";

    NewsItem *item = [[NewsItem alloc] init];
    item.title = @"Loading ...";

    self.newsItems = [@[item] mutableCopy];
    NSString *URL = @"http://news.google.com/news?q=apple+OR+google+OR+microsoft&output=rss";
    NSURL *xmlURL = [NSURL URLWithString:URL];
    NSURLRequest *request = [NSURLRequest requestWithURL:xmlURL];
    Parser *parser =  [[Parser alloc] initXMLParser];;

    dispatch_queue_t downloadQueue = dispatch_queue_create("news downloader", NULL);

    dispatch_async(downloadQueue, ^{
        BOOL success;
        NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

        if (data != nil) {

            NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithData:data];

        // create and init our delegate

        // set delegate
            [nsXmlParser setDelegate:parser];

        // parsing...
            success = [nsXmlParser parse];
        }

        else {
            success = FALSE;
        }
        // test the result
        dispatch_async(dispatch_get_main_queue(), ^{
        if (success) {

                NSLog(@"reloading data ...");
                self.newsItems = [parser.newsItems copy];
                [self.tableView reloadData];

        } else {
                 NewsItem *item = [[NewsItem alloc] init];
                item.title = @"Error loading";

                self.newsItems = [@[item] mutableCopy];
                [self.tableView reloadData];

            NSLog(@"Error parsing document!");
        }

        });

    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:20:21.757

试试看。`[self.tableView reloadData];`_`viewDidAppear`

# multithreading - 使用 Java 在线程上运行多个查询

> ID：15155772
> 
> 赞同：0
> 
> 时间：2013-03-01T10:41:50.413
> 
> 标签：multithreading

我的 java 代码连接到数据库并获取数据。同样的放在excel中并转发给用户。我有多个按顺序运行的查询。我需要在不同的线程中运行所有内容，以便无需等待任何查询。主要问题是有些查询需要很长时间，但有些时间很短。如果所有都可以在不同的线程上运行，那么我们就不需要等待每个查询处理。

请就如何做到这一点提出建议。有可能实现吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:42:10.437

Check out the [ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html). You might want to use two separate `ExecutorCompletionService` instances, one for short running queries and the other for long time queries.

# jquery - nanoscroller.js - 滑块/窗格未在 chrome 中显示（找到解决方案）

> ID：15155774
> 
> 赞同：15
> 
> 时间：2013-03-01T10:41:55.890
> 
> 标签：jquery, jquery-plugins

我正在使用[nanoscroller.js](http://jamesflorentino.github.com/nanoScrollerJS/)创建可滚动的事物列表。

```
$(".nano").nanoScroller({ alwaysVisible: true });
$(".submenu").addClass("hidden"); 
```

“.submenu”是“.nano”的父级，仅在单击按钮后显示。

在 FF、Safari 和 Opera 中一切正常。但在 Chrome 中，滚动条的滑块/窗格不显示。有没有人遇到过同样的问题并找到了解决方案？或者也许知道一个替代插件来创建可以处理这种情况的自定义滚动条？

### 编辑/解决方案：

找到了解决方案：

```
$(".nano").nanoScroller({ alwaysVisible: true });
$(".submenu").addClass("hidden");
$(".pane").css("display","block");
$(".slider").css("display","block"); 
```

手动更改to似乎可以解决问题`display`。`.pane``block`

# javascript - Backbone.js 与 Knockout.js

> ID：15155777
> 
> 赞同：3
> 
> 时间：2013-03-01T10:42:03.627
> 
> 标签：javascript, model-view-controller, design-patterns, backbone.js, knockout.js

我阅读了以下关于基于 JavaScript MVC 的模式（Backbone Vs Knockout）

1.  如果数据绑定和双向通信是您的主要关注点，那么 KnockoutJS 绝对是您的最佳选择。实际上，存储在 DOM 节点中的任何属性或值都可以使用这种方法映射到 JavaScript 对象。
2.  Backbone 擅长与 RESTful 服务集成，而 KnockoutJS 模型只是 JavaScript 对象，更新模型所需的代码必须由开发人员编写。
3.  使用 KnockoutJS，我们可以将我们自己的函数绑定到 ViewModel 可观察对象，这些可观察对象在可观察对象发生变化时执行。这为我们提供了与 Backbone 相同级别的灵活性

您能否为上述几点提供非常基本/简单的示例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T11:37:41.123

淘汰赛很好，但是当您的模型包含许多变量和函数时，这将导致非常脏且难以阅读的 html。主干很好，但它没有可观察的，这使得 Knockout 很容易使用。

注意 AngularJS，它结合了 Knockout 和 Backbone，它更快，让 html 可读，有两种数据绑定，验证等等。你也可以试试 EmberJS

# github - 降价中的上标（Github风味）？

> ID：15155778
> 
> 赞同：507
> 
> 时间：2013-03-01T10:42:15.557
> 
> 标签：github, markdown

按照这个[线索](https://web.archive.org/web/20171125132707/http://blog.jochmann.me:80/post/24465337253/tumblr-markdown-footnote-superscript-css)，我在 Github README.md 中尝试了这个：

```
<span style="vertical-align: baseline; position: relative;top: -0.5em;>text in superscript</span> 
```

不起作用，文本显示正常。帮助？

* * *

## 回答 #1

> 赞同：782
> 
> 时间：2013-03-01T11:25:28.870

使用`<sup></sup>`标签（`<sub></sub>`相当于下标）。有关示例，请参[见此要点。](https://gist.github.com/wildmichael/5064046)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2018-08-17T09:17:42.167

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-11-21T20:24:40.447

## 对先前答案的评论

`<sup>`如主要答案中所建议的，通用解决方案是使用 HTML 标记。
然而，Markdown 背后的想法正是避免使用此类标签：
**文档应该看起来像纯文本一样漂亮，而不仅仅是在呈现时。**

另一个答案建议使用 Unicode 字符，这使文档看起来像纯文本文档一样漂亮，但可能会降低兼容​​性。

最后，我想记住一些文档最简单的解决方案：字符`^`.
一些 Markdown 实现（例如 macOS 中的 MacDown）将插入符号解释为上标指令。

前任。
`Sin^2 + Cos^2 = 1`
显然，堆栈溢出不会将插入符号解释为上标指令。但是，文本是可以理解的，这才是使用 Markdown 时真正重要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-12T21:02:16.700

如果只需要上标数字，可以使用纯Unicode。它提供所有数字加上几个附加字符作为上标：

```
x⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿⁱ 
```

但是，可能是所选字体不支持它们，因此请务必检查渲染输出。

事实上，甚至[还有不少上标字母](https://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)，但是，它们的预期用途可能不是上标，而且字体支持可能更差。用你自己的判断。

# php - 如何在 wordpress 的 URL 中发送多个参数？

> ID：15155781
> 
> 赞同：1
> 
> 时间：2013-03-01T10:42:26.870
> 
> 标签：php, html, wordpress

我想在 wordpress 中发送多个参数，例如

*   主机名/wordpress/form/?amt=".$amount."&tp=".$trans_period

是点击“锚标签”时调用的网址。

但我在地址栏中获取转换后的 url

*   主机名/wordpress/form/?amt=7.99#038;tp=M

'&' 替换为 '#038;' 这就是为什么我无法获得第二个参数'tp'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:16:38.833

我们为 Google 地图 API 找到了类似的东西。连接到`clean_url`过滤器可能会有所帮助，尽管它有点难看。[在这里](https://stackoverflow.com/questions/9504142/loading-google-maps-api-with-wp-enqueue-script/9504653#9504653)查看我的答案。

# c# - schtasks 将“无法启动”作为状态

> ID：15155786
> 
> 赞同：2
> 
> 时间：2013-03-01T10:42:49.043
> 
> 标签：c#, windows-7, windows-task-scheduler

我通过 C# 站点向计划任务添加了一个简单的 exe。该站点托管在 IIS7 上（exe 仅显示一个消息框）。这是我在 C# 代码上运行的命令：

```
schtasks /create /tn mylbat /tr "the exe path" /ru myuser /rp mypassw /sc daily /st 16:03 
```

我也可以看到添加的任务。但它不会被执行并且`schtasks /query /tn mylbat`通过命令行运行会抛出“*无法启动*”作为状态。

我可以在任务计划程序中看到正确设置的触发器和操作。

我相信添加任务工作正常，因为它添加了适当的属性。

我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:29:03.873

我用谷歌搜索了很多。在调度程序中添加任务的过程是完美的，但问题是如果我们尝试调度的服务或任务需要一些交互，则任务将无法启动。`The task has to be one that has no user interaction`.

# java - 编译单元已修改

> ID：15155788
> 
> 赞同：0
> 
> 时间：2013-03-01T10:42:56.107
> 
> 标签：java, eclipse, dto

我创建了一个 DTO 类并实现了 java 可序列化类。当我创建自动生成的 uid 时，给出了上述消息。要求保存。这是什么意思？

我进行了互联网搜索，但找不到合适的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:44:10.523

在序列化/反序列化过程中使用 serialVersionUID。
[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html)

# c# - Silverlight 将数组传递给网页的对话框参数

> ID：15155789
> 
> 赞同：1
> 
> 时间：2013-03-01T10:42:55.913
> 
> 标签：c#, javascript, silverlight, modal-dialog

我有以下代码行在 C# (Silverlight) 中打开网页模式对话框：

```
var so = (ScriptObject)HtmlPage.Window.Invoke(
    "showModalDialog", 
    modalWindowUrl, 
    dialogArgs, 
    "dialogWidth:600px;dialogHeight:600px;"); 
```

现在，在我正在显示的页面上调用了类似于以下的代码，我需要确保它获取我试图传递的值（这是我无法控制的 MSCRM 网页）：

```
dialogArgs.items <-- will be an array I pass in
dialogArgs.items[i].getAttribute("oid") <-- will return something
dialogArgs.items[i].getAttribute("otype") <-- will return something
dialogArgs.items[i].values <-- will return something 
```

我尝试发送的内容（来自我的 C# 代码）是这样的：

```
dialogArgs = @"{items:[{oid:" + id + ",otype:" + type + "}]}"; 
```

这将导致一个 JSON 字符串......但我猜这最终只是作为 JavaScript 中的一个字符串而不是一个 JSON 对象。

任何想法我如何让它工作？

一些旁注：

*   我无法让 IE 调试由此调用产生的模式对话框。我可以显示调试工具，但它不会附加到页面，因为它无法刷新它。
*   我无法控制此模式对话框。这是一个使用 MS Dynamics CRM 显示的页面。出于这个原因，我不能乱用 JavaScript 或任何东西来测试东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:09:22.827

看来我为此获得了风滚草奖！不敢相信这种情况似乎多么罕见。解决方案最终变得非常简单，但没有很好的记录，所以我花了一段时间才找到。以为我会在这里分享。

首先，通过互联网快速搜索显示我们可以使用以下方法进行设置：

```
var dialogArgs = HtmlPage.Window.CreateInstance("Object"); 
```

这给了你一个`ScriptObject`支持。对于属性：

```
dialogArgs.SetProperty("items", items); 
```

一些用于设置数组和项的代码应如下所示（我刚刚为此示例创建了一个新的 GUID）：

```
var item = HtmlPage.Window.CreateInstance("Object");
item.SetProperty("oid", Guid.NewGuid()); 
item.SetProperty("otype", "account"); 
var items = HtmlPage.Window.CreateInstance("Object");
items.SetProperty(0, item); 
```

最后，只需将该对象直接传递到您的对话窗口，如下所示：

```
var so = (ScriptObject)HtmlPage.Window.Invoke("showModalDialog", lookUpWindow, dialogArgs, "dialogWidth:600px;dialogHeight:600px;"); 
```

# c# - C# Lotus Notes - 多个 .nsf 文件

> ID：15155794
> 
> 赞同：1
> 
> 时间：2013-03-01T10:43:25.687
> 
> 标签：c#, lotus-notes

我通过 Lotus Notes 从 C# 代码发送邮件，它工作得非常好 - 使用 Win7 和 WinXP。

但是我的程序的某些用户在目录中有多个 .nsf 文件，例如“user1.nsf”和“old-user1.nsf”。

如何检索这些文件中的哪些是我必须使用的活动数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:18:50.520

如果您的代码在用户机器上运行，那么您在**notes.ini**文件中有“MailFile”和“MailServer”变量。

这个目录在哪里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:42:26.707

如果您正在发送电子邮件，则无需关心哪个邮件数据库处于活动状态。只需在内存中创建一个新的 NotesDocument 对象，填写适当的属性（主题、正文等），然后对该对象调用 Send 方法。Notes 负责其余的工作。

如果您出于其他原因需要获取用户的邮件数据库信息，NotesRegistration 类上有一个[`GetUserInfo`方法](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_GETUSERINFO_METHOD.html)

或者在公式中，有[`@MailDbName`公式](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_MAILDBNAME.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T20:13:29.510

如果您只是使用用户的邮件文件，在 LotusScript 中您可以使用

```
Call notesDatabase.OpenMail 
```

这样，您就无需担心邮件文件的位置——您可以无缝地处理它。

# lisp - 包的文件在哪里？

> ID：15155796
> 
> 赞同：1
> 
> 时间：2013-03-01T10:43:30.223
> 
> 标签：lisp, common-lisp, clisp, hunchentoot

按照这个[clisp 基本网站教程](http://www.adampetersen.se/articles/lispweb.htm)，它要求我定义一个包来保存代码：

```
(defpackage :retro-games
   (:use :cl :cl-who :hunchentoot :parenscript)) 
```

但是，我无法确定我的代码被保存在哪里。文件在哪里？

注意：我只有一天的 lisp 经验！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:50:14.573

文件在哪里？他们在你想要的地方。

1.  在您想要的任何地方创建一个新文件。
2.  将定义放入文件中。
3.  完毕

Lisp 可以`LOAD`文件，您可以使用`COMPILE-FILE`.

在 Common Lisp 中，文件、文件的位置和包之间没有联系。包定义只是为符号定义了一个命名空间。但这不一定与文件相关联。一些工具有助于维护称为*系统*的东西，它是文件的集合，可以一起编译和加载。

为了基本了解如何使用 Common Lisp，我推荐阅读Peter Seibel 的[Practical Common Lisp](http://www.gigamonkeys.com/book/)。

# c# - XNA：在项目中删除类时丢失参考

> ID：15155797
> 
> 赞同：0
> 
> 时间：2013-03-01T10:43:30.600
> 
> 标签：c#, reference, xna

我是 XNA 和 C# 的新手。我有这个问题：

当我添加一个新的 Windows 游戏库并在主项目中进行引用时，一切似乎都正常。问题是当我从这个新项目中删除课程时。我失去了这个新图书馆的参考资料，我不知道为什么。

有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:03:02.277

你是否使用了正确的 using 语句，

您是否正确添加了对其他项目的引用

该类是否存在于另一个项目中

# emacs - Emacs 模式/功能和 xmonad

> ID：15155798
> 
> 赞同：0
> 
> 时间：2013-03-01T10:43:36.170
> 
> 标签：emacs, workspace, xmonad

所以我想知道是否有可能进一步利用 XMonad 将某些应用程序转移到特定工作区并将其应用于 Emacs 的特定模式/功能的能力？

例如，我绑定了 mod+shift+u `spawn "emacs -f mu4e"`，运行会将我放入 mu4e，这是我用来阅读邮件的邮件模式/功能。我想将其绑定到特定的工作区，而不是仅仅在我目前所在的任何工作区中打开。

问题（或不是真正的问题）是我广泛使用 Emacs（邮件、irc 等），并且我希望拥有与工作区相关的特定模式/功能，而不必手动将它们移动到那里。我查看了许多 XMonad.hs 配置，似乎绝大多数都使用 pidgin、xchat 等应用程序，因此设置工作区关联很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:57:37.873

也许您可以为您的 Emacs 框架指定一个特定的窗口标题并使用它来设置工作区关联（而不是窗口类，我假设您将用于 pidgin 或 xchat）

`emacs --title "mu4e" -f mu4e`

我不知道 xmonad，但如果它不能提供基于 windows 标题的工作区关联，你可以使用 wmctrl 之类的工具。例如（假设您要移动到 4 号桌面）：

`wmctrl -r mu4e -t 4`

# jquery - 将 div 的位置附加到相对于页面的居中 div

> ID：15155800
> 
> 赞同：0
> 
> 时间：2013-03-01T10:43:38.107
> 
> 标签：jquery, html, css, css-position

试图将一个红色 div 放置在一个居中的 div 附近，如下图所示：
你能给我推荐一个 css3 或 jquery 简单的方法吗？

橙色 div 通过样式居中：{margin-left 和 margin-right auto} 我只希望红色 div 始终靠近红色 div。
**并且红色div TOP位置应该固定在它所在的位置。不相对于橙色div。（相对于 webexplorer）**

![在此处输入图像描述](../Images/26c626ece2cd0c3831d8f3147518cf02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:02:55.477

在这种情况下不需要 CSS3，如果您知道红色 div 的尺寸，则可以执行以下操作（如此[**JSBin**](http://jsbin.com/adojam/1)所示）：

```
.orange {

  background-color: orange;
  margin: 0 auto;
  width:  200px;
  height: 200px;
  position: relative;

}

.red {

  background-color: red;
  position: absolute;
  top: 0;
  left: -50px;
  width: 50px;
  height: 50px;

} 
```

如果您不知道元素的维度，那么情况会变得有点棘手，因为子元素不会溢出其父元素，因此维度将始终是**红色 div 维度的最大值。**在这种情况下，您将不得不稍微修改 CSS 并添加一些 jQuery 魔法，就像在另一个[**JSBin**](http://jsbin.com/adojam/2)中演示的那样。

## CSS

```
orange {

  background-color: orange;
  margin: 0 auto;
  width:  200px;
  height: 200px;
  position: static;

}

.red {

  background-color: red;
  position: relative; 
```

## Javascript

```
jQuery(document).ready(function($){

  var redWidth = $('.red').width();
  $('.red').css('left', -redWidth);

}); 
```

## 更新

既然你更新了你的问题，答案也需要更新：在我的脑海中，我可以想到这个解决方案（你可以看到它在[**这里**](http://jsbin.com/adojam/4)工作）：

```
$(window).scroll(function(){

    $('.red').css('top', window.pageYOffset);

}); 
```

但也许有更好的纯 CSS 解决方案。

## 更新#2

好的，找到一个更优雅的纯 CSS 解决方案，但前提是您知道居中容器的宽度。听到这个（并[**在行动中**](http://jsbin.com/adojam/5)看到它）：

```
.red {

  background-color: red;
  margin-left: -150px; // See note (1)
  position: fixed;
  top: 0;
  left: 50%;
  width: 50px;
  height: 50px;

} 
```

**(1)**这个margin是通过将`width`橙色元素的一半加上红色的自己的来计算的`width`。如果您不知道红色的宽度，请使用上面**Javascript**部分中解释的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:08:44.613

只要您知道红色块的尺寸，您就可以将它放在橙色块内，并将其绝对定位到其左侧的宽度像素：

**看[演示](http://jsfiddle.net/v78df/)**

CSS：

```
.container {
    position: relative;
    background-color: #FFCE6B;
    width: 700px;
    height: 300px;
}

.orangeblock {
    position: relative;
    margin: 0 auto;
    background-color: orange;
    width: 300px;
    height: 200px;
}

.redblock {
    position: absolute;
    left: -100px;
    background-color: red;
    width: 100px;
    height: 100px;
} 
```

标记：

```
<div class="container">
    <div class="orangeblock">
        <div class="redblock"></div>
    </div>
</div> 
```

如果您*不*知道红色块的尺寸，那么您仍然可以将它放在橙色块内并通过 jQuery 进行定位：

```
$(document).ready(function() {
    $(".redblock").css({position: "absolute", left: -$(".redblock").outerWidth()})
}); 
```

# android - 在android中执行点击通知的动作

> ID：15155804
> 
> 赞同：0
> 
> 时间：2013-03-01T10:43:51.980
> 
> 标签：android, notifications

我正在尝试正确创建通知，但是当您单击通知时我无法执行操作。我希望你能帮助我或提供一些线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:51:33.440

```
 NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    Notification notif = new Notification(R.drawable.ic_launcher, "Text",
            System.currentTimeMillis());

    Intent intent = new Intent(this, MainActivity.class);
    intent.putExtra("somekey", "someextra");
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

    notif.setLatestEventInfo(this, "Title", "Message", pIntent);

    notif.flags |= Notification.FLAG_AUTO_CANCEL;
    nm.notify(1, notif); 
```

使用 Notification.Builder 获取新版本 api

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:11:29.067

建议使用`Notification.Builder`和`NotificationCompat.Builder`来自支持库来构建通知。

另外为什么要重用`Intent`被你抓住的`BroadcastReceiver`？它应该是指您要通过单击启动的实际活动。

例如：

```
Intent intent = new Intent(context, MainActivity.class);

Notification notification = new NotificationCompat.Builder(context)
                .setContentTitle(contentTitle)
                .setContentText(contentText)
                .setContentIntent(PendingIntent.getActivity(context, 0, intent, 0))
                .setAutoCancel(true)
                .build(); 
```

如果您真的不想启动某些活动，则可以启动`Service`或发送广播消息。请参阅[PendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html)。

# php - Varnish 不缓存 PHP 会话文件 (beresp.ttl = -1)

> ID：15155810
> 
> 赞同：0
> 
> 时间：2013-03-01T10:44:01.987
> 
> 标签：php, varnish

我无法制作使用会话的 PHP 生成的 Varnish 3.0.2 缓存文件。我知道默认情况下 Varnish 不会使用 Set-Cookie 缓存文件，但我相信我正在删除此标头。

```
sub vcl_recv {
        # PHP Generated CSS
        if( req.url ~ "^/css/" ) {
                unset req.http.Max-Age;
                unset req.http.Pragma;
                unset req.http.Cache-Control;
                unset req.http.Cookie;
                return(lookup);
        } 
```

* * *

```
sub vcl_fetch {
 if( req.url ~ "^/css/" ) {
     remove beresp.http.Cache-Control;
     remove beresp.http.Pragma;
     remove beresp.http.set-cookie;
 }

 if (beresp.ttl <= 0s ||
     beresp.http.Set-Cookie ||
     beresp.http.Vary == "*") {
            std.log("--------- HIT FOR PASS --------");
            set beresp.ttl = 920s;
            return (hit_for_pass);
 }
 return (deliver);
} 
```

每个 PHP 请求都将转到 hit_for_pass 并且永远不会被缓存。TTL 值始终为 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:41:07.950

从这里提供的信息来看，最可能的原因是后端发送了一个 Cache-Control 响应头，使得 Varnish 将 TTL 设置为 0。

在 varnishlog 中查找“TTL”日志行，如下所示：

```
 21 TTL          c 216230930 RFC 600 -1 -1 1362839670 0 1362839669 1362840269 600
   21 TTL          c 216230930 VCL 600 86400 -1 1362839670 -0 
```

第一条记录是 Varnish（在 vcl_fetch 运行之前）决定对 TTL 的响应标头，第二条是在 VCL 中进行一些修改后的内容。前三个的顺序是 TTL、grace 和 keep。您只需要担心 TTL。在这种情况下是 600 秒/10 分钟。

此处无需在 recv 和 fetch 中使用 return()。只需让逻辑落入默认的 VCL，从长远来看，它将为您省去痛苦。

# python - Selenium，无法从某些页面获取所有数据

> ID：15155811
> 
> 赞同：0
> 
> 时间：2013-03-01T10:44:04.143
> 
> 标签：python, selenium

我正在尝试从以下网站提取源页面：

[http://www.lewisbrisbois.com](http://www.lewisbrisbois.com)

与硒/火狐。我对这个问题不熟悉，也从未见过，但是 Selenium 只给了我非常少量的源代码（远远少于浏览器中可见的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:06:27.990

The (erroneous) source code my browser loads is this:

```
<html>
    <head>
        <title>LEWISBRISBOIS.COM</title>
        <meta name="keywords" content=""
    </head>
    <frameset rows="100%", *" border="0" frameborder="0">
        <frame src="http://www.lbbslaw.com" name="LEWISBRISBOIS.COM">
    </frameset>
</html> 
```

Try to directly access [http://www.lbbslaw.com/](http://www.lbbslaw.com/) in your Selenium code, that will probably give you what you expect.

# java - JSON 解析错误 - 字符串无法转换为 JSONArray

> ID：15155812
> 
> 赞同：-5
> 
> 时间：2013-03-01T10:44:08.147
> 
> 标签：java, android, arrays, json

我在运行我的 Android 应用程序时遇到问题。这是一个简单的活动，旨在通过 HTTP 从远程数据库获取数据。

我在 log cat 中收到这两个错误：

> 在 getJarrayFromString() 上解析为 json 时出错；org.json.JSONException：java.lang.String 类型的值数据库无法转换为 JSONArray。

和：

> fillproductlist() 出错：java.lang.NullPointerException

我不太擅长 Java/Android，这是我第一次在这里问这个问题。我无法理解问题可能在我的应用程序的哪一层（我的 Java 代码、PHP 或数据库代码）？

代码快照：

```
private void fillProductList() {

    if (utils.isInternet()
            && CustomHttpClient.isAddressOk(Utils.LINK_PRODUCTS)) {

        final int from = bid.size();
        final int nr = 5;
        long sqliteSize = db.size(mySqlDatabase.TABLE_BOOKS);
        if (from == 0) {
            // we add the post variables and values for the request
            postParameters.add(new BasicNameValuePair("from", String
                    .valueOf(0).toString()));
            postParameters.add(new BasicNameValuePair("nr", String.valueOf(
                    nr).toString()));
        } else {
            postParameters.add(new BasicNameValuePair("from", String
                    .valueOf(from).toString()));
            postParameters.add(new BasicNameValuePair("nr", String.valueOf(
                    nr).toString()));
        }
        postParameters.add(new BasicNameValuePair("title", titleSearch));
        postParameters.add(new BasicNameValuePair("code", codeSearch));
        postParameters.add(new BasicNameValuePair("module", moduleSearch));
        if (sortOrder != null)
            postParameters.add(new BasicNameValuePair("order", sortOrder));
        if (sortType != null)
            postParameters.add(new BasicNameValuePair("by", sortType));
        task = new RequestTask("books", postParameters);
        task.setOnTaskCompleted(new OnTaskCompletedListener() {
            public void onTaskStarted() {
                if (!rlLoading.isShown()) {
                    rlLoading.startAnimation(fadeIn());
                    rlLoading.setVisibility(View.VISIBLE);
                }
                IS_PRODUCTS_TASK = true;
            }

            public void onTaskCompleted(String result) {
                try {
                    if (result != "") {
                        // Enter the remote php link 
                        // we convert the response into json array
                        jarray = utils.getJarrayFromString(result);
                        int mysqlSize = (jarray.getJSONObject(0)
                                .getInt("numRows"));
                        Log.i(DEBUG, "From " + from + " to " + mysqlSize);
                        if (from <= mysqlSize) {
                            int rows;
                            // we check to see if there is 0
                            if (jarray.length() > 0) {

                                Log.i(DEBUG,
                                        "From "
                                                + from
                                                + " to "
                                                + Math.floor(mysqlSize / nr)
                                                * nr);
                                if (from + 5 <= Math.floor(mysqlSize / nr)
                                        * nr) {
                                    rows = jarray.length();
                                } else {
                                    rows = mysqlSize % nr + 1;
                                    Utils.IS_ENDED_PRODUCT_LIST = true;
                                }
                                ArrayList<String> list = new ArrayList<String>();
                                for (int i = 1; i < rows; i++) {
                                    JSONObject row = jarray
                                            .getJSONObject(i);
                                    bid.add(row.getInt("bid"));
                                    bTitle.add(row.getString("bTitle"));
                                    bCode.add(row.getString("bCode"));
                                    bPrice.add(row.getString("bPrice")
                                            + "£");
                                    bDescription.add(row
                                            .getString("bDescription"));
                                    bModule.add(row.getString("bModule"));
                                    bImage.add(Utils.PATH
                                            + row.getString("bImage"));
                                    list.add(row.getString("bImage"));
                                    // we check if this id already exists in the db, if it doesn't exists w create new one
                                    if (!db.hasIDbooks(row.getInt("bid")))
                                        db.createRowOnBooks(
                                                row.getInt("bid"),
                                                row.getString("bTitle"),
                                                row.getString("bCode"),
                                                row.getString("bPrice"),
                                                row.getString("bDescription"),
                                                row.getString("bModule"),
                                                Utils.PATH
                                                        + row.getString("bImage"),
                                                row.getString("bSpecialOffer"),
                                                row.getInt("bSpecialDiscount"),
                                                row.getString("bDateAdded"));
                                    Log.i(DEBUG,
                                            row.getString("bDescription"));
                                }
                                new DownloadImages(list, bAdapter)
                                        .execute();
                            }
                        }
                        postParameters.removeAll(postParameters);
                    } else {
                        Utils.IS_ENDED_PRODUCT_LIST = true;
                        if (rlLoading.isShown()) {
                            rlLoading.startAnimation(fadeOut());
                            rlLoading.setVisibility(View.INVISIBLE);
                        }
                    }
                } catch (Exception e) {
                    Log.e(DEBUG,
                            "Error at fillProductList(): " + e.toString());
                }
            }
        });
        task.execute();
    } else {
        // if we are not connected on internet or somehow the link would not work, then we will take the rows stored in sqlite db
        if (db.size(mySqlDatabase.TABLE_BOOKS) > 0) {
            Cursor cursor = db.getBookssRows(mySqlDatabase.TABLE_BOOKS);
            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
                bid.add(cursor.getInt(cursor
                        .getColumnIndex(mySqlDatabase.KEY_BID)));
                bTitle.add(cursor.getString(cursor
                        .getColumnIndex(mySqlDatabase.KEY_BTITLE)));
                bCode.add(cursor.getString(cursor
                        .getColumnIndex(mySqlDatabase.KEY_BCODE)));
                bPrice.add(cursor.getString(cursor
                        .getColumnIndex(mySqlDatabase.KEY_BPRICE)) + "£");
                bDescription.add(cursor.getString(cursor
                        .getColumnIndex(mySqlDatabase.KEY_BDESCRIPTION)));
                bModule.add(cursor.getString(cursor
                        .getColumnIndex(mySqlDatabase.KEY_BMODULE)));
                bImage.add(cursor.getString(cursor
                        .getColumnIndex(mySqlDatabase.KEY_BIMAGE)));
                cursor.moveToNext();
            }
            bAdapter.notifyDataSetChanged();
            Utils.IS_ENDED_PRODUCT_LIST = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:54:58.980

在`OnTaskCompleted`之前

```
jarray = utils.getJarrayFromString(result); 
```

添加一个日志条目

```
Log.i(DEBUG,result); 
```

我怀疑你得到一个空值`result`

```
if(result!="") 
```

不确保有效值。干杯

# r - 可以在 knitr .Rnw 文件中使用 \include{} 命令吗？

> ID：15155813
> 
> 赞同：1
> 
> 时间：2013-03-01T10:44:08.583
> 
> 标签：r, include, knitr, rstudio

使用 \include{} 通常有效，除非文件中有要包含的代码块：

```
\documentclass{article}
\begin{document}
% \include{test.tex}
\include{test.Rnw}  
\end{document} 
```

用 test.tex 或 test.Rnw 定义例如

```
<<echo=TRUE,eval=TRUE>>=
plot(cars)
@ 
```

不会显示汽车图。有没有机会找到绕过这个麻烦的方法？

谢谢， 朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:12:19.533

[您可以包含带有child](http://yihui.name/knitr/demo/child/)的 .Rnw 文件。

```
\documentclass{article}
\begin{document}

<<test, child='test.Rnw'>>=
@

\end{document} 
```

是 test.Rnw 包含：

```
<<echo=TRUE,eval=TRUE>>=
plot(cars)
@ 
```

# r - 检查是否安装了 R 包然后加载库

> ID：15155814
> 
> 赞同：17
> 
> 时间：2013-03-01T10:44:09.007
> 
> 标签：r

我们的 R 脚本用于多台计算机上的多个用户，因此每台计算机上安装的软件包存在偏差。为了确保每个脚本都适用于所有用户，我想定义一个函数 pkgLoad，它将首先测试包是否安装在本地，然后再加载带有抑制启动消息的库。在运行 install.packages() 之前使用[检查已安装的包](https://stackoverflow.com/questions/9341635/how-can-i-check-for-installed-r-packages-before-running-install-packages)作为指南，我试过了

```
 pkgLoad <- function(x)
  {
    if (!require(x,character.only = TRUE))
    {
      install.packages(x,dep=TRUE, repos='http://star-www.st-andrews.ac.uk/cran/')
      if(!require(x,character.only = TRUE)) stop("Package not found")
    }
    #now load library and suppress warnings
    suppressPackageStartupMessages(library(x))
    library(x)
  } 
```

当我尝试使用 pkgLoad("ggplot2") 加载 ggplot2 时，我在终端中收到以下错误消息

> 粘贴错误（“包”，包，sep =“：”）：找不到对象'ggplot2'> pkgLoad（“ggplot2”）加载所需的包：ggplot2库（x）中的错误：没有名为'x'的包> pkgLoad("ggplot2") library(x) 中的错误：没有名为 'x' 的包</p>

为什么 x 从 ggplot2 变为普通的旧 x？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-28T13:21:18.483

前几天我写了这个函数，我认为这很有用......

```
install_load <- function (package1, ...)  {   

   # convert arguments to vector
   packages <- c(package1, ...)

   # start loop to determine if each package is installed
   for(package in packages){

       # if package is installed locally, load
       if(package %in% rownames(installed.packages()))
          do.call('library', list(package))

       # if package is not installed locally, download, then load
       else {
          install.packages(package)
          do.call("library", list(package))
       }
   } 
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-11T18:15:38.817

我维护的 CRAN **pacman**包可以很好地解决这个问题。使用以下标头（以确保首先安装**pacman**），然后该`p_load`函数将尝试加载包，然后如果 R 无法加载包，则从 CRAN 获取它们。

```
if (!require("pacman")) install.packages("pacman"); library(pacman)
p_load(qdap, ggplot2, fakePackage, dplyr, tidyr) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-01T11:27:07.347

使用`library(x,character.only=TRUE)`. 此外，您不需要最后一行，因为 `suppressPackageStartupMessages(library(x,character.only=TRUE))`已经加载了包。

编辑：@LarsKotthoff 是对的，您已经在 if 括号内加载了包。在那里你已经使用了选项 character.only=TRUE 所以如果你只删除函数体的最后一行，一切都很好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T11:04:05.083

看看这个不错的功能： [klick](https://github.com/gimoya/theBioBucket-Archives/blob/master/R/Functions/instant_pkgs.R)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-09T13:40:36.003

可以使用以下内容：

```
check.and.install.Package<-function(package_name){
    if(!package_name%in%installed.packages()){
        install.packages(package_name)
    }
}

check.and.install.Package("RTextTools")
check.and.install.Package("e1071") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-23T14:46:40.100

虽然@maloneypatr 函数工作正常，但它非常安静，并且不会响应加载包的成功。我构建了下面的函数，它确实对用户输入进行了一些检查，并且还响应了成功安装的包的数量。

```
lubripack <- function(...,silent=FALSE){

  #check names and run 'require' function over if the given package is installed
  requirePkg<- function(pkg){if(length(setdiff(pkg,rownames(installed.packages())))==0)
                                    require(pkg, quietly = TRUE,character.only = TRUE)
                            }

  packages <- as.vector(unlist(list(...)))
  if(!is.character(packages))stop("No numeric allowed! Input must contain package names to install and load")

  if (length(setdiff(packages,rownames(installed.packages()))) > 0 )
     install.packages(setdiff(packages,rownames(installed.packages())),
                      repos = c("https://cran.revolutionanalytics.com/", "http://owi.usgs.gov/R/"))

  res<- unlist(sapply(packages, requirePkg))

  if(silent == FALSE && !is.null(res)) {cat("\nBellow Packages Successfully Installed:\n\n")
                    print(res)
                   }
} 
```

# 注1：

如果`silent = TRUE`（全部大写），它会安装和加载包而不报告。如果`silent = FALSE`，则报告成功安装软件包。默认值为`silent = FALSE`

# 如何使用

```
lubripack(“pkg1","pkg2",.,.,.,.,"pkg") 
```

# 示例1：当所有包都有效且模式不是静默时

```
lubripack(“shiny","ggvis") 
```

或者

```
lubripack(“shiny","ggvis", silent = FALSE) 
```

# 输出

[![在此处输入图像描述](../Images/be767a1c249be2801d8032e78514417d.png)](https://i.stack.imgur.com/q5zOS.png)

# 示例 2：当所有包都有效且模式为静默时

```
lubripack(“caret","ggvis","tm", silent = TRUE) 
```

# 输出 2

[![在此处输入图像描述](../Images/b7b489f6108aa287469400d7b84b7231.png)](https://i.stack.imgur.com/E4RLQ.png)

# 示例 3：找不到包时

```
lubripack(“shiny","ggvis","invalidpkg", silent=FALSE) 
```

# 输出 3

[![在此处输入图像描述](../Images/79565c37813cfeac31b9a4b0815b9fe7.png)](https://i.stack.imgur.com/3rIuk.png)

* * *

# 如何安装包：

运行以下代码以下载包并从 GitHub 安装它。无需拥有 GitHub 帐户。

```
library(devtools)
install_github("espanta/lubripack") 
```

# android - 删除折线谷歌地图v2 android的问题

> ID：15155822
> 
> 赞同：10
> 
> 时间：2013-03-01T10:44:25.903
> 
> 标签：android, google-maps, android-maps-v2

我正在添加一个折线选项，就像在谷歌开发者的网站中一样。

```
PolylineOptions rectOptions = new PolylineOptions()
        .add(new LatLng(37.35, -122.0))
        .add(new LatLng(37.45, -122.0))  // North of the previous point, but at the same longitude
        .add(new LatLng(37.45, -122.2))  // Same latitude, and 30km to the west
        .add(new LatLng(37.35, -122.2))  // Same longitude, and 16km to the south
        .add(new LatLng(37.35, -122.0)); // Closes the polyline.

// Get back the mutable Polyline
Polyline polyline = myMap.addPolyline(rectOptions); 
```

我想删除它。但是`rectOptions.remove()` 我没有像 Google Maps Android API v2 中提到的那样从我的 sdk 更新 google play 服务[，如何从地图中删除折线？](https://stackoverflow.com/questions/15139271/google-maps-android-api-v2-how-to-remove-polylines-from-the-map) 但我还是没有。从 SDK 管理器更新后我应该做更多的事情吗？我真的需要删除它而不是让它不可见以节省内存，因为我会多次显示很多点的路径。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T10:51:37.880

要删除`Polyline`，请使用`polyline.remove();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:53:01.083

你不应该用`PolylineOptions`它来删除它。

`PolyLine`像这样使用

```
polyline.remove(); 
```

***[文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Polyline?hl=en)***

```
public void remove () 
```

*`Removes this polyline from the map. After a polyline has been removed, the behavior of all its methods is undefined.`*

# security - Codeigniter xss 漏洞和其他安全问题

> ID：15155823
> 
> 赞同：2
> 
> 时间：2013-03-01T10:44:26.593
> 
> 标签：security, codeigniter, xss

当我使用“Acunetix Web Vulnerability Scanner”扫描我的网站时，我感到非常惊讶。当我使用带有 xss 过滤的获取参数时，程序在页面上显示了很多 xss 漏洞。例如：

```
URL encoded GET input state was set to " onmouseover=prompt(967567) bad="
The input is reflected inside a tag parameter between double quotes. 
```

我认为这是因为当结果为空时我不显示 404 错误（应该是）。我显示“请求为空”之类的消息

我的控制器：

```
$this->pagination->initialize($config); 
    $this->load->model('aircraft_model');

    $data['type'] = $this->input->get('type', TRUE);
    $data['year'] = $this->input->get('year', TRUE);
    $data['state'] = $this->input->get('state', TRUE);
        $type_param = array (
        'type'    => $this->input->get('type', TRUE),
        );

        $parameters = array(
        'year'    => $this->input->get('year', TRUE),
        'state_id'   => $this->input->get('state', TRUE),
        );
        foreach ($parameters as $key=>$val)
                {
                    if(!$parameters[$key])
                    {
                        unset($parameters[$key]);
                    }
                }

    $data['aircraft'] = $this->aircraft_model->get_aircraft($config['per_page'], $this->uri->segment(3, 1),$parameters, $type_param);
    $data['title'] = 'Самолеты | ';
    $data['error'] = '';
    if (empty($data['aircraft']))
    {
       $data['error'] = '<br /><div class="alert alert-info"><b>По таким критериям не найдено ниодного самолета</b></div>';
    }

    $name = 'aircraft';
    $this->template->index_view($data, $name); 
```

即使我打开全局 xss 过滤程序也能找到 xss 漏洞。也许可能的 xss 的消息是错误的？

我也有一个 SQL 注入。

```
Attack details:
Path Fragment input / was set to \
Error message found: 
You have an error in your SQL syntax 
```

SQL错误：

```
Error Number: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-10, 10' at line 3
SELECT * FROM (`db_cyclopedia`) LIMIT -10, 10 
```

控制器：

```
$this->load->model('cyclopedia_model');
    $this->load->library('pagination');
    $config['use_page_numbers'] = TRUE;

    [pagination config]

    $config['suffix'] = '/?'.http_build_query(array('type' => $this->input->get('type', TRUE)), '', "&");

    $config['base_url'] = base_url().'cyclopedia/page/';
    $count_all = $this->cyclopedia_model->count_all($this->input->get('type', TRUE));
    if (!empty($count_all)){
    $config['total_rows'] = $count_all;    
    }
    else
    {
    $config['total_rows'] = $this->db->count_all('cyclopedia');
    }
    $config['per_page'] = 10;
    $config['first_url'] = base_url().'cyclopedia/page/1'.'/?'.http_build_query(array('type' => $this->input->get('type', TRUE)), '', "&");

    $this->pagination->initialize($config); 

        $parameters = array(
        'cyclopedia_cat_id' => $this->input->get('type', TRUE),
        );
        foreach ($parameters as $key=>$val)
                {
                    if(!$parameters[$key])
                    {
                        unset($parameters[$key]);
                    }
                }
    $data['type'] = $this->input->get('type', TRUE);   
    $data['cyclopedia'] = $this->cyclopedia_model->get_cyclopedia($config['per_page'], $this->uri->segment(3, 1),$parameters);
    $data['title'] = 'Энциклопедия | ';
    if (empty($data['cyclopedia']))
    {
        show_404();
    }

    $name = 'cyclopedia';
    $this->template->index_view($data, $name); 
```

还有一个是 HTTP 参数污染（获取参数）的一些问题。

```
Attack details
URL encoded GET input state was set to &n954725=v953060
Parameter precedence: last occurrence
Affected link: /aircraft/grid/?type=&year=&state=&n954725=v953060
Affected parameter: type= 
```

很抱歉有很多代码，但这是我第一次使用 codeigniter / framework 和安全第一的经验。

**更新**：当网站网址像这个 site.com/1 codeigniter 显示：

```
An Error Was Encountered
Unable to load your default controller. Please make sure the controller specified in your Routes.php file is valid. 
```

如何制作显示 404 而不是此消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:18:47.323

这需要用户输入：

```
$config['first_url'] = base_url().'cyclopedia/page/1'.'/?'.http_build_query(array('type' => $this->input->get('type', TRUE)), '', "&"); 
```

然后 Pagination.php 库中的这一行在没有适当的 HTML 转义的情况下将其吐到输出页面中：

```
$output .= $this->first_tag_open.'<a '.$this->anchor_class.'href="'.$first_url.'">'.$this->first_link.'</a>'.$this->first_tag_close; 
```

尽管自动扫描工具通常会产生很多误报，但这是一个真正的 HTML 注入漏洞，会导致跨站点脚本攻击的真正风险。

要解决此问题，请将所有注入 HTML 上下文（例如`$first_url`）的输出用`htmlspecialchars()`. 不幸的是，由于这是库代码，您必须启动自己的分页分支。使用其他库可能会更好。

不要依赖，`xss_clean`因为它不能可靠地保护你。它正在尝试处理输入层的输出问题，这永远不会正常工作——它会错过攻击以及破坏完全有效的输入。整个想法暴露了对 XSS 问题实际上是什么的基本的新手误解。

Pagination 中有更多地方需要相同的修复，但我不想花更多的时间阅读 CodeIgniter 质量差的代码。

我不明白 CodeIgniter 是如何达到这种受欢迎程度的。

# javascript - 淘汰赛无法解析绑定内部方法

> ID：15155824
> 
> 赞同：1
> 
> 时间：2013-03-01T10:44:28.553
> 
> 标签：javascript, knockout.js, knockout-2.0

我可能遗漏了一些非常简单的东西，但谁能指出我在这里做错了什么？

提前谢谢了。

```
<div data-bind="foreach: agencies">
    <div data-bind="text:name"></div>
    <div data-bind="text:email"></div>
    <button data-bind="click: removeAgency">remove</button>
</div>

<script type="text/javascript">

    var agency = [{
        name : ko.observable('a'),
        email : ko.observable('b')
    }, {
        name: ko.observable('c'),
        email: ko.observable('d')
    }];

    var vm = {
        agencies: ko.observableArray(agency),
        removeAgency: function(agency) {
            this.agencies.remove(agency);
        }
    };

    ko.applyBindings(vm);
</script> 
```

这是我得到的错误：未捕获的错误：无法解析绑定。消息：ReferenceError：removeAgency 未定义；绑定值：点击：removeAgency

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:47:02.970

您正在绑定到该 html 中的代理，但您的方法在您的视图模型上。尝试类似：

```
<button data-bind="click: $parent.removeAgency">remove</button> 
```

您可能需要重新调整您的虚拟机以使范围正确：

```
var ViewModel = function(){
    var self = this;
    self.agencies = ko.observableArray(agency),
    self.removeAgency = function(agency) {
        self.agencies.remove(agency);
    }
};

var vm = new ViewModel(); 
```

我有时仍然对范围感到困惑，我不得不承认，但试一试，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:18:25.603

工作示例：

```
http://jsfiddle.net/marko4286/7RDc3/2034/ 
```

阅读文档`http://knockoutjs.com/documentation/foreach-binding.html`

# jsf - 如何使用 ajax 监听器保存或更新单个 inputText 字段

> ID：15155825
> 
> 赞同：0
> 
> 时间：2013-03-01T10:44:30.247
> 
> 标签：jsf, jsf-2

我已经花了更多时间来解决 inputtext 字段中的一些保存或更新问题，我直奔主题：我有带有一些基本属性的基本单输入文本

> `<h:inputText id="name" value="#{salesController.selectedSalesName}" />`

这是 inputText 值的吸气剂

```
public String getSelectedSalesName(){
    for(DealerListView dealer : dealerList){
        if(dealer.getDealerId() == getSelectedDealerId()){
            return dealer.getName();
        }
    }
    return "";  
} 
```

嵌套在那里我使用ajax标签

```
<f:ajax event="change" render="name" listener="#{salesController.updateSelectedSalesName()}" /> 
```

这是用于更新输入文本字段的返回 bean 方法

```
public void updateSelectedSalesName() {     

        DealerData dealDat = BeanFactory.getHotelDAOService(DealerData.class).findOne(selectedDealerId);
        dealDat.setName(name);
        BeanFactory.getHotelDAOService(DealerData.class).update(dealDat);     
} 
```

整个结果是堆栈跟踪，它说

> value="#{salesController.selectedSalesName}"：属性 'selectedSalesName' 在类型 sk.hotel.web.controller.SalesController 上不可写

我知道该 getter 方法需要进行一些更改，但尝试一些没有结果的组合，这些组合可以正确更新数据库的值。

（我不使用任何命令按钮进行提交，仅在该 inputText 字段中按 Enter 时更新响应。）我想要一些指导，无论是在 back-bean 还是 jsf 布局上，或者有人已经解决了类似的情况，如何修改这个保存/更新过程，并可以分享他的解决方案。

感谢大家的建议帖子。问候和美好的一天

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:45:21.997

首先，添加一个字段：

```
 String selectedSalesName; 
```

添加二传手和二传手：

```
 public String getSelectedSalesName() {
     return selectedSalesName;
  }
  public void setSelectedSalesName(String selectedSalesName) {
     this.selectedSalesName = selectedSalesName;
  } 
```

添加 ajaxListener(AjaxBehaviurEvent 事件) 以创建新的 Dealer 或更新当前的 Dealer

```
 public void ajaxListener(AjaxBehaviorEvent event) {
     Dao dao = BeanFactory.getHotelDAOService(DealerData.class)
     if (selectedDealerId == null) {
        DealarData dealerData= new DealerData();
        dealerDate.setName(getSelectedSalesName());
        dao.add(dealerData);
        setDealer(dealerData);
     } else {
        DealerData dealDat = dao.findOne(selectedDealerId);
        dealDat.setName(name);
        dao.update(dealDat);
     }
  } 
```

当前经销商的二传手

```
 int selectedDealerId;
  public void setDealer(DealerData dealer) {
        selectedDealerId = dealer.getId();
        selectedSalesName = dealer.getName();
  } 
```

和 xhtml 页面：

```
 <h:inputText value="#{salesController.selectedSalesName}" id="idSalesInput">
        <a4j:ajax event="keyup" listener="#{salesController.ajaxListener}" 
               execute="idSalesInput"/>
  </h:inputText> 
```

为您要收听的事件更改“keyup”。

当你按下一个键时，监听器被调用，并且idSalesInput的值被提交（这里调用了setSelectedSalesName()方法，因此你得到了Property 'selectedSalesName' not writable exception），并且监听器创建或更新了一个新的经销商数据。

有一个美好的一天，对不起我的英语不好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:51:24.287

在你的绑定值`inputText`有两种方式，当它被渲染时，调用 getter 来计算值，当它被提交时（就像在你的 AJAX 事件中），调用 setter 来为该属性设置值在你的支持 bean 中。所以 JSF 尝试调用`setSelectedSalesName(String value)`. JSF 不能写你的属性，这意味着不能调用 setter。

**也可以看看：**

*   [AJAX 侦听器没有被内部解雇](https://stackoverflow.com/questions/15053370/ajax-listener-not-being-fired-for-pselectbooleanbutton-inside-pdatalist/15054756#15054756)

# computer-vision - Horn-Schunck 光流计算

> ID：15155832
> 
> 赞同：1
> 
> 时间：2013-03-01T10:44:47.950
> 
> 标签：computer-vision, opticalflow

我正在研究用于计算视频中光流的 Horn-schunck 方法。我的代码是用 C 语言编写的，这意味着我要从头开始实现所有算法，包括对图像进行灰度缩放、计算导数等。我无法完全吸收该方法的精髓。我得到的最终流矩阵将包含每个像素的位移向量，对吧？对于每个像素，流矩阵中的值表示它在下一张图像中的位移量。

当我的所有像素值都在 0 到 255 之间时，这是如何工作的，我所有的计算都是在这些像素值上完成的，并且结果输出给出了一个 1920 X 1080 图像中的位移。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:17:35.323

您的方法的结果将是具有两个通道或两个矩阵的矩阵，一个用于 u（或 dx）方向/位移，另一个用于 v（或 dy）方向/位移。这意味着你有一个向量场

```
[u(x,y) v(x,y] = optical flow for each position (x,y) in your image 
```

此向量场（此字段的值）具有浮动精度。这意味着例如`u(0,0) = 0.2 v(0,0) = 0.13`。因此，在您的计算机的一部分中，您已将输入图像的灰度值转换为浮动值。这主要是在您计算梯度时完成的，例如使用 sobel 算子。[OpenCV](http://opencv.org/)库有一个 Horn-Schunk 实现。虽然阅读代码需要一些时间，但您可以放心，这是实现此方法的一种非常有效的方式。

# java - 如何将位智流量数据整合到网站中？

> ID：15155835
> 
> 赞同：3
> 
> 时间：2013-03-01T10:44:57.903
> 
> 标签：java, jquery, parsing

谁能告诉我如何将交通信息应用程序 Waze 集成到网站中？

我查了以前的帖子，但不知何故没有答案。

Waze 是一个应用程序，它提供实际的交通信息。还有一个实时地图 Waze 实时地图 - 您可以看到标记在哪里。

所以，我找到了一些网站 - [egaraz](http://www.egaraz.cz/traffic)，我真的很好奇他们是如何从 Waze 获得数据的。

编程不是我的主要领域，但仍然可以理解一些基本的 php 编码。

有人可以建议我一个可行的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-12T05:49:58.507

前段时间我写了这个项目：

[https://github.com/Nimrod007/waze-api](https://github.com/Nimrod007/waze-api)

你可以运行这个 api 并得到：

*   从自由文本中获取地址列表
*   按地址获取路线（文本）
*   通过坐标获取路线
*   获取交通通知
*   获取导航说明

完整文档的链接：

[http://htmlpreview.github.io/?https://github.com/Nimrod007/waze-api/blob/master/docs.html](http://htmlpreview.github.io/?https://github.com/Nimrod007/waze-api/blob/master/docs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:09:44.147

谷歌搜索后，我发现 WAZE 有一个供开发人员使用的 API。他们只提供了 android 和 ios 的示例代码。我不确定php。检查来自 waze 开发人员的链接 - [http://www.waze.com/dev/documentation/](http://www.waze.com/dev/documentation/)

# iphone - 如何在其超层中正确定位 CATransformLayer

> ID：15155838
> 
> 赞同：1
> 
> 时间：2013-03-01T10:45:15.947
> 
> 标签：iphone, catransformlayer

我在一个`UIView`命名的 containerView 上创建了一个跨越整个屏幕的容器视图。在这个视图`CATransormLayer`上，必须添加一个具有以下尺寸的 UIView。

```
CATransformlayer : doubleSidedLayer  
Height = containerView.frame.size.height  
Width = containerView.frame.size.width  

UIView : stripView
Height = containerView.frame.size.height  
Width = 20; 
```

它们的 x 位置由变量 positionX 指定。理论上两者都`DoubleSidedLayer`必须`stripView`重叠。但他们不是。

这是代码。

```
CGRect containerFrame =CGRectMake(0,0,self.view.frame.size.height,self.view.frame.size.width);
NSLog(@"container frame = %f %f %f %f",containerFrame.origin.x,containerFrame.origin.y,containerFrame.size.width,containerFrame.size.height);
UIView *containerView = [[UIView alloc]initWithFrame:containerFrame];
[containerView setBackgroundColor:[UIColor grayColor]];

float positionX = containerFrame.size.width/4;//This is the position where the stripView and doubleSidedLayer must be placed

//Configuration of CATransformLayer.
CGRect doubleLayerFrame = CGRectMake(positionX,0,containerFrame.size.width/2,containerFrame.size.height);
CATransformLayer *doubleSidedLayer  = [CATransformLayer layer];
[doubleSidedLayer setFrame:doubleLayerFrame];

NSLog(@"DoubleSidedLayer frame = %f %f %f %f",doubleSidedLayer.frame.origin.x,doubleSidedLayer.frame.origin.y,doubleSidedLayer.frame.size.width,doubleSidedLayer.frame.size.height);
NSLog(@"DoubleSidedLayer bounds = %f %f %f %f",doubleSidedLayer.bounds.origin.x,doubleSidedLayer.bounds.origin.y,doubleSidedLayer.bounds.size.width,doubleSidedLayer.bounds.size.height);
NSLog(@"Anchor Points = %f %f",doubleSidedLayer.anchorPoint.x, doubleSidedLayer.anchorPoint.y);
NSLog(@"position = %f %f",doubleSidedLayer.position.x,doubleSidedLayer.position.y);

//Configuring top layer
CALayer *topLayer = [[CALayer alloc]init];
[topLayer setFrame:doubleLayerFrame];
[topLayer setContents:(id)[UIImage imageNamed:@"1.png"].CGImage];
[topLayer setZPosition:2];
[topLayer setDoubleSided:NO];

//Adding the layers
[doubleSidedLayer addSublayer:topLayer];
[containerView.layer addSublayer:doubleSidedLayer];

//Adding the stripView
UIView *stripView = [[UIView alloc]initWithFrame:CGRectMake(positionX, 0, 20,containerView.frame.size.height)];
[stripView setBackgroundColor:[UIColor cyanColor]];
[containerView addSubview:stripView];
NSLog(@"Strip frame = %f %f %f %f",stripView.frame.origin.x,stripView.frame.origin.y,stripView.frame.size.width,stripView.frame.size.height);

//Adding the containerView to the main view
[self.view addSubview:containerView]; 
```

从日志语句中可以看到 doubleSidedLayer 和 stripView 的帧。

```
doubleSidedLayer frame = 120.000000 0.000000 240.000000 300.000000   
strip frame = 120.000000 0.000000 20.000000 300.000000 
```

但两者不重叠。这是屏幕截图。![在此处输入图像描述](../Images/b2abe54ed912b51d4bf9bf7251e54435.png)

注意：我正在横向工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:53:01.830

我想知道是否有更简单的方法来实现您正在寻找的东西。例如，如果我有一些想要将图像从一个图像“翻转”到另一个图像的视图，我会使用如下内容：

```
[UIView transitionWithView:self.imageView
                  duration:0.5
                   options:UIViewAnimationOptionTransitionFlipFromLeft | UIViewAnimationOptionCurveEaseInOut
                animations:^{
                    if (self.flipped)
                        self.imageView.image = [UIImage imageNamed:@"front.png"];
                    else
                        self.imageView.image = [UIImage imageNamed:@"back.png"];

                    self.flipped = !self.flipped;

                }
                completion:nil]; 
```

我正在使用 imageview 执行此操作，但是对于`UIView`您使用的任何控件，这个概念都是一样的。如果你有一些容器视图并且你想在这个`animations`块中添加/删除或显示/隐藏控件，你也可以这样做。只需使用容器视图作为`transitionWithView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:54:07.010

我可以弄清楚我的错误。topLayer 的配置有问题。这应该在 的范围内`doubleSidedLayer`。所以我`[topLayer setFrame:doubleLayerFrame]`改为`[topLayer setFrame:doubleSidedLayer.bounds]`. 这解决了我的问题。

# java - 如何获取 REST 请求的 HTTP 方法

> ID：15155851
> 
> 赞同：7
> 
> 时间：2013-03-01T10:45:54.483
> 
> 标签：java, rest, glassfish, jax-rs

如果我的 Java REST 应用程序出现异常，我想记录有关导致 HTTP 请求的各种信息。

我可以通过上下文注入获取请求的 URI 和 HTTP 标头

```
@Context
private UriInfo uriInfo;

@Context
private HttpHeaders headers; 
```

但是我怎样才能获得 HTTP 方法（GET、PUT、...）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T10:51:19.650

我用泽西岛。不知道这是否适用于你，但......：

```
import javax.servlet.http.HttpServletRequest;    

@Context final HttpServletRequest request 
```

该类`Request`有方法`getMethod()`。它返回使用的 HTTP 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:51:58.327

您通常将其余方法限制为一种 http 方法

```
 @GET
 @Produces("text/plain")
  public String getClichedMessage() {
    // Return some cliched textual content
    return "Hello World";
 } 
```

# shell - 如何管道程序的命令行输出运行多次并在出现关键字时停止？

> ID：15155862
> 
> 赞同：2
> 
> 时间：2013-03-01T10:46:25.007
> 
> 标签：shell

假设我想运行一个 C 程序 1000 次，而这个程序基本上是一个测试脚本，用于测试我编写的一个简单内核的功能。每次失败时它都会输出“SUCCESS”。由于难以追踪的各种竞争条件，我们经常不得不手动运行测试几百次才能失败。我曾尝试在网上搜索可帮助我们运行此命令的 perl 脚本或 bash 脚本，但徒劳无功：

```
pintos -v -k -T 60 --qemu -j 2 --filesys-size=2 -p tests/vm/page-parallel -a page-parallel -p tests/vm/child-linear -a child-linear --swap-size=4 -- -q -f run page-parallel < /dev/null 
```

并将命令传递给某个东西以检查关键字，以便在该关键字出现时停止/继续。

任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:01:16.367

在 bash 中，您可以在 while 循环中运行它：

```
while true; do
if "pintos -v -k -T 60 --qemu -j 2 --filesys-size=2 -p tests/vm/page-parallel -a page-parallel -p tests/vm/child-linear -a child-linear --swap-size=4 -- -q -f run page-parallel < /dev/null" | grep -c KEYWORD; then 
break
fi
done 
```

我不能 100% 确定您需要围绕命令进行引用，显然我无法运行您的特定命令。它可能不需要它周围的“”。

`grep -c`计算匹配项，如果为 0，则找不到 KEYWORD，因此它再次运行循环。如果 > 0 则找到 KEYWORD 并且循环中断。

# c - 结构变量打印

> ID：15155863
> 
> 赞同：0
> 
> 时间：2013-03-01T10:46:28.930
> 
> 标签：c, printing, struct

我正在编写遗传算法，但在打印一些结构变量时遇到问题。我知道代码可以正确读取它们，因为我得到了结果，但是当我尝试在屏幕上或文件中打印它们时，得到零..

这是我正在使用的代码，你能帮帮我吗...？？

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#define POPSIZE 50
#define MAXGENS 1000
#define NVARS 3
#define PXOVER 0.8
#define PMUTATION 0.15
#define B 2
#define TOURNAMENT_SIZE 2
#define TRUE 1
#define FALSE 0

int generation ;
int cur_best;
FILE *galog_tournament;

struct genotype
{
    double gene[NVARS];
    double fitness;
    double upper[NVARS];
    double lower[NVARS];
    double cfitness;
    double rfitness;
};

struct genotype population[POPSIZE+1];
struct genotype newpopulation[POPSIZE+1];

void initialize(void);
double randval(double,double);
void evaluate(void);
void keep_the_best(void);
void elitist(void);
void tournament_selection(void);
void crossover(void);
void random_Xover(int,int);
void swap(double *,double *);
void non_uniform_mutation(void);
void report(void);
double delta2(int,int);

void initialize(void)
{
    FILE *infile;
    FILE *bounds;
    FILE *popu;
    int i,j;
    double lbound,ubound;

    bounds = fopen("bounds.txt","w");
    popu = fopen("population.txt","w");

    if((infile = fopen("gadata.txt","r"))== NULL)
    {
        fprintf(galog_tournament,"\n Cannot open input file\n");
        exit(1);
    }

    for(i = 0; i < NVARS; i++)
    {
        fscanf(infile, "%lf",&lbound);
        fscanf(infile, "%lf",&ubound);

        printf("%lf  %lf\n",lbound,ubound);

        for(j = 0; j < NVARS; j++)
            {
                population[j].fitness = 0;
                population[j].rfitness = 0;
                population[j].cfitness = 0;
                population[j].lower[i] = lbound;
                population[j].upper[i] = ubound;

                fprintf(bounds,"%lf  %lf\n",&population[j].lower[i],&population[j].upper[i]);

                population[j].gene[i] = randval(population[j].lower[i],population[j].upper[i]);

                fprintf(popu,"%lf\n",population[j].gene[i]);
            }

    }
    fclose(infile);
    fclose(bounds);
    fclose(popu);
} 
```

伙计们非常感谢您的帮助，实际上我尝试调试代码并对其进行一些更改，以便在屏幕上打印值。不幸的是，我仍然得到零...！这是具有下限和上限的代码和我的输入文件

```
void initialize(void)
{
    FILE *infile;
    FILE *test;
    int i,j;
    double lbound,ubound;

    test = fopen("test.txt","w");

    if((infile = fopen("gadata.txt","r"))== NULL)
    {
        fprintf(galog_tournament,"\n Cannot open input file\n");
        exit(1);
    }

    for(i = 0; i < NVARS; i++)
    {
        fscanf(infile, "%lf",&lbound);
        fscanf(infile, "%lf",&ubound);

         printf("%lf  %lf\n",lbound,ubound);

    for (j=0; j < POPSIZE; j++) {
        population[j].fitness = 0;
        population[j].rfitness = 0;
        population[j].cfitness = 0;
        population[j].lower[i] = lbound;
        population[j].upper[i] = ubound;
        population[j].gene[i] = randval(population[j].lower[i],
                                        population[j].upper[i]);

     }

  }

    fclose(infile);
    fclose(test);

}

   0.000000 0.000000
    0.000514    0.010514
    0.011307    0.021307
    0.021876    0.031876
    0.033994    0.043994
    0.043272    0.053272
    0.050229    0.060229
    0.053976    0.063976
    0.053803    0.063803
    0.046640    0.056640
    0.029907    0.039907
    0.017619    0.027619
    0.002316    0.012316
    -0.005428   0.004572
    -0.00683    0.00317
    -0.009743   0.000257
    -0.10582    -0.09582
    -0.026304   -0.016304
    -0.027064   -0.017064
    -0.025243   -0.015243
    -0.022386   -0.012386
    -0.019108   -0.009108
    -0.015788   -0.005788
    -0.012185   -0.002185
    -0.009452   0.000548
    -0.052133   0.002867
    -0.006128   0.003872
    0.000000    0.000000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:48:17.067

删除`&`s 从

```
fprintf(bounds,"%lf  %lf\n",&population[j].lower[i],&population[j].upper[i]); 
```

所以它变成：

```
fprintf(bounds,"%lf  %lf\n",population[j].lower[i],population[j].upper[i]); 
```

您想打印变量的值而不是该变量的地址。

将您的编译器设置为显示警告，在这种情况下，它会告诉您问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:47:16.127

如果 fScanf 没有读取任何内容并返回 0，您可能不希望您的代码运行。为什么不将其更改为类似

```
while( 0 != fscanf(infile, "%lf",&ubound))
{
    if(0 == fscanf(infile, "%lf",&lbound) || i >= NVARS)      
       {
       return 0; 
       }
    else
       {
       printf("%lf  %lf\n",lbound,ubound);
       i++
       }
} 
```

然后，如果它不打印任何你知道你没有用 fscanf 扫描任何东西的东西。我猜你不想继续用 0 填充你的数组，如果你的 scanf 没有读取任何东西，它可能会指向错误的方向

# c# - 我是在列表中使用插入还是有另一种方式 C#

> ID：15155866
> 
> 赞同：0
> 
> 时间：2013-03-01T10:46:45.620
> 
> 标签：c#, list, insert, inventory

我正在制作一个库存系统，但我不记得我可以使用哪个。

我有一个鼠标`list<item>`，`inventory<item>` 如果单击一个按钮，我想从库存中删除该项目并将其移动到鼠标，（我已经完成）但是将它放回某个地方是我遇到麻烦的地方。

如果那里还没有一个项目，那会很简单......即只使用插入但如果那里有一个项目我该怎么办？我是否将其添加到鼠标列表然后在该位置插入或插入将旧列表项移动到列表中的开头或结尾或下一个。或者，还有其他方法吗？

基本上我想单击一个按钮，删除已经存在的项目并将其放入鼠标列表中的项目，然后如果鼠标列表中已经有某些内容，则将其添加到旧项目所在的位置。

我想知道插入如何与列表一起使用。

如果我在索引 2 处插入已经在该索引处的对象/项目会发生什么情况，那么已经存在的对象/项目是向上移动并成为索引 3 还是被删除。

我想知道如果我从列表中删除某些内容，该索引是否会变为`null`？，即如果它像这样*索引 0* =`2` *索引 1* =`51` *索引 2* =`213` *索引 3* =`null` *索引 4* =`234`例如或者*索引 4*是否变为*索引 3*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:42:10.137

列表是幕后的数组*（如果您使用像 Reflector 这样的 IL 反汇编程序，您将能够检查这一点）。*

话虽如此，当您从列表中*删除*一个项目时，`List<T>`将从源内部创建一个新数组，其中包含除已删除项目之外的所有项目。

另一方面，当您*将*一个项目插入列表时，您会替换整个索引中的项目，并且*从索引向下的所有内容都会向下移动一个位置* **（感谢 BinaryWorrier）**。索引中的对象不会被“销毁”：您正在从列表中删除对象引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:42:47.597

让我们看看

```
static void Main(string[] args)
{
    var names = new List<string> { "Homer", "Marge", "Lisa" };

    Show(names);

    names.Insert(1, "Bart");
    Console.WriteLine("Inserted Bart at 1");

    Show(names);

    names.RemoveAt(0);
    Console.WriteLine("Removed Homer");
    Show(names);
}

private static void Show(List<string> names)
{
    Console.WriteLine("Names");
    for (int i = 0; i < names.Count; i++)
        Console.WriteLine("\t{0}: {1}", i, names[i]);
} 
```

给我们 。. .

名称
0：荷马
1：玛吉
2：丽莎
在 1 处插入巴特
名称
0：荷马
1：巴特
2：玛吉
3：丽莎
移除荷马
名称
0：巴特
1：玛吉
2：丽莎

所以。

1.  在第二个位置添加，会将前一个第二项向下移动到第三项（并将低于该位置的所有内容也向下推一个位置）
2.  删除一个项目会将所有内容向上移动一个项目

科学方法有助于解决此类问题（即理论、实验、观察、必要时重复）

这回答了你的问题了吗？

# java - OpenConnection 不导入全部内容

> ID：15155870
> 
> 赞同：0
> 
> 时间：2013-03-01T10:47:00.817
> 
> 标签：java, file-io

我想从 URL 导入 xml 文件。

我的代码是：

```
URL url = new URL(partnersEntity.getUrl());

            URLConnection urlConnection = url.openConnection();
            urlConnection.setReadTimeout(55000);

            File file = new File(fileURL);

            FileWriter writer = new FileWriter(file);

            IOUtils.copy(urlConnection.getInputStream(), writer); 
```

问题是，XML 文件有 60000 行，但我的导入只保存了 11000 行。

问题出在哪里 ？

我可以设置内容长度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:21:55.733

所有输入输出对象都是应该关闭的资源，否则您将有资源泄漏或丢失未刷新的缓冲区（您的情况）。它应该在 try-finally 块中完成。对于您的场景：

```
URL url = new URL(partnersEntity.getUrl());
URLConnection urlConnection = url.openConnection();
urlConnection.setReadTimeout(55000);

InputStream is = urlConnection.getInputStream();    
try
{
    File file = new File(fileURL);
    FileWriter writer = new FileWriter(file);
    try
    {
        IOUtils.copy(is, writer);
    }
    finally
    {
        IOUtils.closeQuietly(writer);
    }
}
finally
{
    IOUtils.closeQuietly(is);
} 
```

在 Java 7 中，您可以使用新的 try 语法：

```
URL url = new URL(partnersEntity.getUrl());
URLConnection urlConnection = url.openConnection();
urlConnection.setReadTimeout(55000);

File file = new File(fileURL);

try(
    InputStream is = urlConnection.getInputStream();
    FileWriter writer = new FileWriter(file);
)
{
    IOUtils.copy(is, writer);
} 
```

# reporting-services - sql 查询以获取仅在当前月份运行的计划报告

> ID：15155874
> 
> 赞同：0
> 
> 时间：2013-03-01T10:47:03.857
> 
> 标签：reporting-services, reportingservices-2005, sqlparameter

我有一个 SSRS 2005 报告，其中包含用于 Oracle 数据库的数据集。我基本上只是从审核日志中提取所有数据的报告。该报告运行良好，我已安排 thi 使用 SSRS 中的新订阅方法运行并发送电子邮件。

我唯一的问题是我希望报告在当月的最后一天运行（它已经设置为执行此操作）并仅基于该月运行报告。让报告专门运行一个月是我不确定的？我虽然可以在报告中设置参数，但这些参数只能让我的用户选择日历日期？

我可以使用 DATEADD 或 DATEPART 类型的函数来完成此任务吗？

问候乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:54:29.920

最好的办法是在报告级别为日期参数设置一个动态日期默认值，并将订阅设置为使用此默认值，以便订阅运行时它会自动具有适当的日期。

可能最简单的做法是将参数设置为当前日期，如果这样可行，例如`=Today()`. 因此，只要订阅运行，就会计算它。

您可以根据需要设置默认值；当月的第一天等。您应该能够轻松设置所需的任何值。

因此，对于本月的第一天，例如：

`=DateSerial(Year(Today()), Month(Today()), 1).`

运行临时报告的用户可以根据需要重新设置参数。

我假设报告处理正确返回的数据量，前提是发送了正确的数据参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:19:12.860

2 参数@DateFrom 和@DateTo

输出当月第一天的@DateFrom 的默认值：

`=DateAdd("d",-Day(Today())+1,Today())`

输出当月最后一天的 @DateTo 的默认值：

`=DateAdd("d",-Day(Today())+1,DateAdd("m",1,Today()))`

# ios - 执行字符串中定义的代码

> ID：15155880
> 
> 赞同：1
> 
> 时间：2013-03-01T10:47:25.987
> 
> 标签：ios, objective-c

我希望能够执行一段在字符串中定义的代码。我知道 performSelector: 但将执行选择器的对象会有所不同。

示例字符串

```
[[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] hasFlash]
[UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront] 
```

所以我想做的是类似的事情

```
SEL selector = NSSelectorFromString(@"[[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] hasFlash]");
if (selector) {
    // Show flash buttons
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:51:42.163

您**不能**触发调用**嵌套方法调用的****选择器**。

 **选择器只是显示参数数量的方法名称`method:abc:yxa:`

如下声明：

```
SEL selector = NSSelectorFromString(@"[[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] hasFlash]"); 
```

正在打电话

```
[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] 
```

然后

```
[objectReturnedByAbove hasFlash] 
```**

# php - 使用旧 pubDate 发布时解析新的 RSS 项目

> ID：15155881
> 
> 赞同：0
> 
> 时间：2013-03-01T10:47:25.643
> 
> 标签：php, xml-parsing, rss

我正在使用以下过程解析 RSS 提要：

1.  解析器运行一次，获取所有 RSS 项并存储运行时间；

2.  然后每次它再次运行时，它都会检查一个 RSS 项目是否 `pubDate`比上次运行的时间晚，并将其存储在数据库中。

我的问题是，对于特定网站的提要，一些项目是在最后一个项目之后添加的，但具有相同的`pubDate`，所以我的解析器不存储它们。

例如，在晚上 9 点，它有一个项目，`<pubDate>Fri, 01 Mar 2013 05:00:00 Z</pubDate>` 然后在下午 12 点，它添加了另一个相同的项目`pubDate`。

提要不提供`guid`.

有什么办法可以得到最新的货品吗？

这是我现在使用的代码

```
function getLatest($lastTimeRun, $data, $pubDates)
{
    $latestData = array();
    for($i=0;$i<sizeof($data);$i++)
    {
        $pubDates[$i] = strtotime($pubDates[$i]);
        //compare the last time the script run with each feed's item publish date                
        if($lastTimeRun < $pubDates[$i])
        {
            array_push($latestData, $data[$i]);
        }
    }

    return $latestData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:50:48.810

我会简单地比较最后一个发布日期之后的最后一个 x 的标题以找到任何新条目，同时匹配其他数据以查看它*是否*真的是一个新条目。然后只需限制您要查找的最后 xx 个条目。

# button - 向 Outlook 2007 添加按钮以从 HTML 文件中添加文本

> ID：15155885
> 
> 赞同：0
> 
> 时间：2013-03-01T10:47:43.053
> 
> 标签：button, outlook, customization, add-in, signature

我正在寻求帮助以在 Outlook 2007 消息功能区上添加一个按钮，当单击它时，将文本添加到 HTML 文件中。

我的第一个问题是：

这可能吗？
你可以用什么语言来做到这一点？
什么语言最适合这个？

编辑：
我现在知道如何创建按钮等等。但我现在需要帮助的是编码。单击按钮时将 HTML 文件（主签名）添加到邮件底部的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:02:13.073

我不知道所有语言支持，但 C#.NET 有很多支持，因为这两种产品都来自同一供应商。

您可以使用 Visual Studio IDE 2010，它已经具有用于 MS-Office 的 Outlook 插件模板，还支持功能区。

[http://www.codeproject.com/Articles/194126/Creating-an-Outlook-2010-Add-In](http://www.codeproject.com/Articles/194126/Creating-an-Outlook-2010-Add-In)

# ruby-on-rails - 需要 Rails/Active Record 多态关联？

> ID：15155886
> 
> 赞同：0
> 
> 时间：2013-03-01T10:47:44.613
> 
> 标签：ruby-on-rails, ruby, activerecord, polymorphism

我有 3 个模型，一个有很多**教师**和**学生的****学校**。问题是**学生**可以属于**学校**或**教师**，所以理论上他们总是通过关联属于**学校。**我将如何处理 Rails/Active Record 中的这种类型的数据结构？

 ******```
 class School < AR::Base
      has_many :teachers
      has_many :students

    end

    class Teacher < AR::Base
      belongs_to :school
      has_many :students

    end

    class Student < AR::Base
      belongs_to ???

    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:56:50.497

这个解决方案应该有效，但是您对您的介绍有疑问；你说“一个老师有很多学生”。这句话暗示“一个学生有一个老师”。

也许你应该设置一个 has_and_belongs_to_many 关联。

```
class School < AR::Base
  has_many :teachers
  has_many :students, :through => :teachers
end

class Teacher < AR::Base
  belongs_to :school
  has_many :students
end

class Student < AR::Base
  belongs_to :teacher
  belongs_to :school, :through => :teacher
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:55:02.330

显然你需要多态关联，可以这样做

```
class School < AR::Base
 has_many :teachers
 has_many :students, :as => :studentable
end

class Teacher < AR::Base
 belongs_to :school
 has_many :students
end

class Student < AR::Base
 belongs_to :studentable
end 
```

不要忘记将 studentable_id 和 studentable_type 添加到学生模型中。******

# facebook-graph-api - 在网站中嵌入 facebook 视频

> ID：15155888
> 
> 赞同：1
> 
> 时间：2013-03-01T10:47:51.827
> 
> 标签：facebook-graph-api

使用我请求的 Graph API `/me?fields=videos.type(uploaded).fields(id, embed_html)`。这给了我上传的视频列表：

```
{
  "id": "[...snip...]", 
  "videos": {
    "data": [
      {
        "id": "10151488520332264", 
        "embed_html": "<iframe src=\"https://graph.facebook.com/video/embed?video_id=10151488520332264\" width=\"190\" height=\"240\" frameborder=\"0\"></iframe>", 
        "updated_time": "2013-02-28T11:09:14+0000"
      },
      [...snip...]
    ]
  }
} 
```

我希望`embed_html`是嵌入视频的 html 代码。但是当我使用它时，iframe 只显示一个图形错误：

```
{
   "error": {
      "message": "Unknown path components: /embed",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

该视频是公开的，当使用具有`user_videos`.

该`video`对象还具有`source`直接链接到源视频文件（无播放器）的属性。我可以使用它并构建自己的播放器，但我更喜欢使用 facebook 认为最适合视频（和浏览器）的嵌入代码。

# ruby-on-rails-3 - 样式表错误消息 - bootstrap/rails

> ID：15155890
> 
> 赞同：22
> 
> 时间：2013-03-01T10:48:02.793
> 
> 标签：ruby-on-rails-3, forms, twitter-bootstrap

我的 rails 表单的错误消息在 bootstrap 中看起来很糟糕。有谁知道更好（漂亮）错误消息的解决方案？我使用 Rails 和 Bootstrap。

我的表格（它是一个助手）是这样的：

```
<%= form_for(@user) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-inline">
    <%= f.text_field :email, class:'input-large', placeholder:'Test' %>
<!--   </div>
  <div class="actions"> -->
    <%= f.submit class:'btn btn-large btn-success' %>
  </div>
<% end %> 
```

![错误信息](../Images/8d480f8f3d02a620d21b0f55c335abeb.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-01T11:23:45.337

看看 Michael Hartl 在 railstutorial 中是如何做到的。![截屏](../Images/db5543df3a8aa01695153600baf49c1e.png)

这就是使用的CSS：

```
#error_explanation {
  color: #f00;
  ul {
    list-style: none;
    margin: 0 0 18px 0;
  }
}

.field_with_errors {
  @extend .control-group;
  @extend .error;
 } 
```

他描述[了这里](https://www.railstutorial.org/book/sign_up#sec-signup_error_messages)的一切。

如果您还想在每行的开头添加小星星，则必须将其包含在表单中：

```
 <div id="error_explanation">
        <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
        <ul>
          <% @user.errors.full_messages.each do |msg| %>
            <li> * <%= msg %></li>    <--- insert here
          <% end %>
        </ul>
     </div>
      ... 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-30T01:53:23.560

我意识到有点晚了，但是我今天刚刚使用 Rails 4 和 Bootstrap 3 遇到了这个问题，我最终制作了一个视图助手来使用面板显示错误：

**导轨 4/引导程序 3**

```
def errors_for(object)
    if object.errors.any?
        content_tag(:div, class: "panel panel-danger") do
            concat(content_tag(:div, class: "panel-heading") do
                concat(content_tag(:h4, class: "panel-title") do
                    concat "#{pluralize(object.errors.count, "error")} prohibited this #{object.class.name.downcase} from being saved:"
                end)
            end)
            concat(content_tag(:div, class: "panel-body") do
                concat(content_tag(:ul) do
                    object.errors.full_messages.each do |msg|
                        concat content_tag(:li, msg)
                    end
                end)
            end)
        end
    end
end 
```

[![在此处输入图像描述](../Images/9b1c99e22ae3be52941fee44e074d49d.png)](https://i.stack.imgur.com/rLZqY.png)

**Rails 4 / Bootstrap 4 测试版**

```
def errors_for(object)
    if object.errors.any?
        content_tag(:div, class: "card border-danger") do
            concat(content_tag(:div, class: "card-header bg-danger text-white") do
                concat "#{pluralize(object.errors.count, "error")} prohibited this #{object.class.name.downcase} from being saved:"
            end)
            concat(content_tag(:div, class: "card-body") do
                concat(content_tag(:ul, class: 'mb-0') do
                    object.errors.full_messages.each do |msg|
                        concat content_tag(:li, msg)
                    end
                end)
            end)
        end
    end
end 
```

[![在此处输入图像描述](../Images/c2dbf4ab139838471c4b83d8232e1d0b.png)](https://i.stack.imgur.com/KFmEy.png)

**Rails 4 / Bootstrap 4 Beta 列表组变化**

```
def errors_for(object)
    if object.errors.any?
        content_tag(:div, class: "card border-danger") do
            concat(content_tag(:div, class: "card-header bg-danger text-white") do
                concat "#{pluralize(object.errors.count, "error")} prohibited this #{object.class.name.downcase} from being saved:"
            end)
            concat(content_tag(:ul, class: 'mb-0 list-group list-group-flush') do
                object.errors.full_messages.each do |msg|
                    concat content_tag(:li, msg, class: 'list-group-item')
                end
            end)
        end
    end
end 
```

[![在此处输入图像描述](../Images/55aed07e4d490867049dcf727df831ce.png)](https://i.stack.imgur.com/d6CMF.png)

我将它放在 application_helper 中并在我的表单视图中调用它

```
<%= errors_for(@user) %> 
```

也许有人会偶然发现它并发现它很有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-08T14:05:24.047

以防万一有人在这里绊倒并使用`Bootstrap 4 alpha`with `rails 5`and `bootstrap_form_for gem`。我用：

```
<div class="form-group">
  <%= f.alert_message "Please fix the errors below." %>
</div> 
```

看起来真的很好。

[![在此处输入图像描述](../Images/8e95b576a3b456c98de5bf3cb3f7b15d.png)](https://i.stack.imgur.com/wngn8.jpg)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-06T12:55:12.780

我在 Rails 5 和 Bootstrap 4 中实现[了 Rabbott 的视图助手：](https://stackoverflow.com/questions/15155890/styling-form-error-message-bootstrap-rails/27209195#27209195 "Rabbott 的视图助手")

```
def errors_for(object)
    if object.errors.any?
      content_tag(:div, class: 'card text-white bg-danger mb-3') do
        concat(content_tag(:div, class: 'card-header') do
          concat(content_tag(:h4) do
            concat "#{pluralize(object.errors.count, 'error')} prohibited this #{object.class.name.downcase} from being saved:"
          end)
        end)
        concat(content_tag(:div, class: 'card-body') do
          concat(content_tag(:ul) do
            object.errors.full_messages.each do |msg|
              concat content_tag(:li, msg)
            end
          end)
        end)
      end
    end
  end 
```

它看起来像这样： [![在此处输入图像描述](../Images/0d8945d5c338fda6e55d488c4c30fbf6.png)](https://i.stack.imgur.com/zgsFo.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-06T21:28:00.727

### 引导程序 4 阿尔法 6

我从

[https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css](https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css)

搜索，复制了所有类，对for 进行`.has-danger`了搜索和替换，我还添加了`.has-danger``.field_with_errors``.field_with_errors label`

```
.field_with_errors label,
.field_with_errors .form-control-feedback,
.field_with_errors .form-control-label,
.field_with_errors .col-form-label,
.field_with_errors .form-check-label,
.field_with_errors .custom-control {
  color: #d9534f;
}

.field_with_errors .form-control {
  border-color: #d9534f;
}

.field_with_errors .input-group-addon {
  color: #d9534f;
  border-color: #d9534f;
  background-color: #fdf7f7;
}

.field_with_errors .form-control-danger {
  background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23d9534f' viewBox='-2 -2 7 7'%3E%3Cpath stroke='%23d9534f' d='M0 0l3 3m0-3L0 3'/%3E%3Ccircle r='.5'/%3E%3Ccircle cx='3' r='.5'/%3E%3Ccircle cy='3' r='.5'/%3E%3Ccircle cx='3' cy='3' r='.5'/%3E%3C/svg%3E");
} 
```

我无法让输入组插件正确显示，因为它用`<div>`.

[![带有导轨错误的引导程序 4](../Images/f919f3f9f7b14b78a2f2691985236ad6.png)](https://i.stack.imgur.com/Kl4Hn.png)

文档：[https ://v4-alpha.getbootstrap.com/components/forms/#validation](https://v4-alpha.getbootstrap.com/components/forms/#validation)

老实说，其中一些类没有被使用，因为 Rails 没有明显的方法在错误字段上设置类。

对于错误列表，我只是使用了这个简单的类

```
#error_explanation {
  color: red;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-30T08:45:36.733

也许更简单的方法是在表单本身上搜索 ids 和 classes。适用于任何组合。

默认情况下，这是脚手架中包含的用于排列错误消息的行。您可以随心所欲地使用它们。只需在您的 css.scss 文件中扩展它们：

```
.field_with_errors {
  padding: 2px;
  background-color: red;
  display: table;
}

#error_explanation {
  width: 450px;
  border: 2px solid red;
  padding: 7px 7px 0;
  margin-bottom: 20px;
  background-color: #f0f0f0;
}

#error_explanation h2 {
  text-align: left;
  font-weight: bold;
  padding: 5px 5px 5px 15px;
  font-size: 12px;
  margin: -7px -7px 0;
  background-color: #c00;
  color: #fff;
}

#error_explanation ul li {
  font-size: 12px;
  list-style: square;
} 
```

如果某些东西不起作用，请在开发人员模式下检查导航器。在那里你应该能够找到所有正在创建的 html 和 css rails...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-05T13:34:33.513

仅 SCSS 的另一种变体

```
#error_explanation{
  background: #f23551;
  color: #fff;
  border-radius: 4px;
  margin-bottom: 20px;
  h2{
    padding: 20px;
    margin: 0;
    font-size: 20px;
  }
  ul{
    background: #fff;
    color: #e5324a;
    border: 1px solid #F23551;
    margin: 0;
    list-style: none;
    padding: 14px 0;
    li{
      padding: 4px 20px;
      &:before {
        content: '×';
        font-weight: bold;
        font-size: 20px;
        margin-right: 10px;
      }
    }
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-12T21:36:44.153

我创建了一个自定义初始化程序，让每个字段下面都有自己的错误

```
# app/config/initializers/bootstrap_form_errors_customizer.rb

ActionView::Base.field_error_proc = proc do |html_tag, instance|
  is_label_tag = html_tag =~ /^<label/
  class_attr_index = html_tag.index 'class="' 

  def format_error_message_to_html_list(error_msg)
    html_list_errors = "<ul></ul>"
    if error_msg.is_a?(Array)
      error_msg.each do |msg|
        html_list_errors.insert(-6,"<li>#{msg}</li>")
      end
    else 
      html_list_errors.insert(-6,"<li>#{msg}</li>")
    end
    html_list_errors
  end

  invalid_div =
    "<div class='invalid-feedback'>#{format_error_message_to_html_list(instance.error_message)}</div>"

  if class_attr_index && !is_label_tag
    html_tag.insert(class_attr_index + 7, 'is-invalid ')
    html_tag + invalid_div.html_safe
  elsif !class_attr_index && !is_label_tag
    html_tag.insert(html_tag.index('>'), ' class="is-invalid"')
    html_tag + invalid_div.html_safe
  else
    html_tag.html_safe
  end
end 
```

# html - 内页css文件的解决方案以获得更好的性能

> ID：15155892
> 
> 赞同：0
> 
> 时间：2013-03-01T10:48:18.673
> 
> 标签：html, css, performance, optimization

当我设计一个页面时，我将创建一个 CSS 文件，以便我的所有内容`selectors`都存储在这个文件中，用于首页、内页和我网站中的所有其他页面。

但是在这种模式下，当我尝试在或其他网站中检查我的网站时`GTMetrics.com`，`webpagetest.org`他们告诉我我的 css 文件中有很多选择器，我没有在页面中使用，所以他们要求我优化我的 css 文件！但我在其他页面中使用该选择器。

现在我的问题是，存储 css 选择器的最佳方式是什么？我应该为每个页面有一个单独的 css 文件并`link`在每个页面中加载，还是应该有单独的 css 文件并`@import`在 css 文件中加载或将所有选择器存储在一个文件中（就像现在一样）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:00:17.120

如果您为每个页面上的每个页面创建单独的文件，则一个 css 文件是最好的方法，一个唯一的文件会加载，因此时间会增加，性能会降低

一个 css 文件会自行缓存，并且不会每次都加载，因此您做得对，请忽略警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:58:32.657

首先，这些网站只是帮助您优化网站的工具。他们不知道一切，这就是为什么他们说你使用了很多未使用的选择器。

我不知道样式更改了多少以及在哪些页面上。但是，如果您的样式有些相同但有细微差别，则应将它们保存在一个文件中。
例如，如果主页与其他页面完全不同，或者如果某些页面有很大差异，则应该使用一个全局样式表和多个页面特定样式表。

在 CSS 大师 Chris Coyier 的这篇精彩文章中阅读有关此主题的更多信息：[“一、二或三”](http://css-tricks.com/one-two-three/)

# android - NoClassDefError android.security.MessageDigest 错误

> ID：15155894
> 
> 赞同：0
> 
> 时间：2013-03-01T10:48:27.973
> 
> 标签：android

我在线关注教程以跟踪当前位置。这是代码。我浏览了这个网站上的很多回复，但我无法让它工作。

主要的.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
  tools:context=".MainActivity" >

 <fragment
     android:id="@+id/map"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     class="com.google.android.gms.maps.MapFragment" />

 </RelativeLayout> 
```

安卓清单.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
       package="in.wptrafficanalyzer.locationingooglemap"
       android:versionCode="1"
       android:versionName="1.0" >

       <uses-sdk
          android:minSdkVersion="4"
          android:targetSdkVersion="15" />

       <uses-permission android:name="android.permission.INTERNET" />
       <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

  <application
      android:icon="@drawable/ic_launcher"
      android:label="@string/app_name"
      android:theme="@style/AppTheme" >

       <uses-library android:name="com.google.android.maps" />

      <activity
          android:name=".MainActivity"
          android:label="@string/title_activity_main" >
          <intent-filter>
            <action         android:name="android.intent.action.MAIN"
               />                                                                
            <category android:name="android.intent.category.LAUNCHER" />
           </intent-filter>
         </activity>
      </application>

     </manifest> 
```

当前位置覆盖.java

```
 package in.wptrafficanalyzer.locationingooglemap;
             import java.util.ArrayList;
             import android.graphics.drawable.Drawable;
             import android.util.Log;
             import com.google.android.maps.ItemizedOverlay;
             import com.google.android.maps.OverlayItem;

         public class CurrentLocationOverlay extends ItemizedOverlay<OverlayItem> {

     private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

     public CurrentLocationOverlay(Drawable defaultMarker) {
         super(boundCenterBottom(defaultMarker));       
           }

           // Executed, when populate() method is called
        @Override
            protected OverlayItem createItem(int arg0) {
    return mOverlays.get(arg0);     
             }

             @Override
           public int size() {      
    return mOverlays.size();
         }

     public void addOverlay(OverlayItem overlay){
    mOverlays.add(overlay);
    populate(); // Calls the method createItem()
        }

      @Override
    protected boolean onTap(int arg0) {
    Log.d("Tapped", mOverlays.get(arg0).getSnippet());
    return true;
    }
        } 
```

主要活动.java

```
 package in.wptrafficanalyzer.locationingooglemap;
    import java.util.List;
    import android.graphics.drawable.Drawable;
    import android.location.Criteria;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.view.Menu;
    import android.widget.TextView;
    import com.google.android.maps.GeoPoint;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapController;
    import com.google.android.maps.MapView;
    import com.google.android.maps.Overlay;
    import com.google.android.maps.OverlayItem;

    public class MainActivity extends MapActivity implements LocationListener {

   private MapView mapView;

     @Override
      public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);

       // Getting reference to MapView
    mapView = (MapView) findViewById(R.id.map);

    // Setting Zoom Controls on MapView
    mapView.setBuiltInZoomControls(true);

    // Getting LocationManager object from System Service LOCATION_SERVICE
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    // Creating a criteria object to retrieve provider
    Criteria criteria = new Criteria();

    // Getting the name of the best provider
    String provider = locationManager.getBestProvider(criteria, true);

    // Getting Current Location
    Location location = locationManager.getLastKnownLocation(provider);

    if(location!=null){
        onLocationChanged(location);
    }

    locationManager.requestLocationUpdates(provider, 20000, 0, this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onLocationChanged(Location location) {
    TextView tvLocation = (TextView) findViewById(R.id.map);

    // Getting latitude
    double latitude = location.getLatitude();

    // Getting longitude
    double longitude = location.getLongitude();

    // Setting latitude and longitude in the TextView tv_location
    tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude );

    // Creating an instance of GeoPoint corresponding to latitude and longitude
    GeoPoint point = new GeoPoint((int)(latitude * 1E6), (int)(longitude*1E6));

    // Getting MapController
    MapController mapController = mapView.getController();

    // Locating the Geographical point in the Map
    mapController.animateTo(point);

    // Applying a zoom
    mapController.setZoom(15);

    // Redraw the map
    mapView.invalidate();

    // Getting list of overlays available in the map
    List<Overlay> mapOverlays = mapView.getOverlays();

    // Creating a drawable object to represent the image of mark in the map
    Drawable drawable = this.getResources().getDrawable(R.drawable.cur_position);

    // Creating an instance of ItemizedOverlay to mark the current location in the map
    CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(drawable);

    // Creating an item to represent a mark in the overlay
    OverlayItem currentLocation = new OverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude);

    // Adding the mark to the overlay
    currentLocationOverlay.addOverlay(currentLocation);

    // Clear Existing overlays in the map
    mapOverlays.clear();

    // Adding new overlay to map overlay
    mapOverlays.add(currentLocationOverlay);        

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub      
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub      
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub      
}
     } 
```

这是我的 logcat 日志

```
 03-01 10:31:12.257: I/dalvikvm(18886): threadid=3: reacting to signal 3
   03-01 10:31:12.267: I/dalvikvm(18886): Wrote stack traces to '/data/anr/traces.txt'
   03-01 10:31:12.367: I/dalvikvm(18886): Could not find method android.security.MessageDigest.getInstance, referenced from method com.google.android.maps.KeyHelper.getSignatureFingerprint
   03-01 10:31:12.367: W/dalvikvm(18886): VFY: unable to resolve static method 153: Landroid/security/MessageDigest;.getInstance (Ljava/lang/String;)Landroid/security/MessageDigest;
   03-01 10:31:12.367: D/dalvikvm(18886): VFY: replacing opcode 0x71 at 0x0038
   03-01 10:31:12.377: D/AndroidRuntime(18886): Shutting down VM
   03-01 10:31:12.377: W/dalvikvm(18886): threadid=1: thread exiting with uncaught exception (group=0x40a2a1f8)
   03-01 10:31:12.397: E/AndroidRuntime(18886): FATAL EXCEPTION: main
   03-01 10:31:12.397: E/AndroidRuntime(18886): java.lang.NoClassDefFoundError: android.security.MessageDigest
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at com.google.android.maps.KeyHelper.getSignatureFingerprint(KeyHelper.java:60)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at com.google.android.maps.MapActivity.createMap(MapActivity.java:552)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at com.google.android.maps.MapActivity.onCreate(MapActivity.java:422)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at in.wptrafficanalyzer.locationingooglemap.MainActivity.onCreate(MainActivity.java:26)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.app.Activity.performCreate(Activity.java:4492)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.os.Handler.dispatchMessage(Handler.java:99)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.os.Looper.loop(Looper.java:137)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at android.app.ActivityThread.main(ActivityThread.java:4424)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at java.lang.reflect.Method.invokeNative(Native Method)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at java.lang.reflect.Method.invoke(Method.java:511)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
   03-01 10:31:12.397: E/AndroidRuntime(18886):     at dalvik.system.NativeStart.main(Native Method)
   03-01 10:31:12.747: I/dalvikvm(18886): threadid=3: reacting to signal 3
   03-01 10:31:12.757: I/dalvikvm(18886): Wrote stack traces to '/data/anr/traces.txt'
  03-01 10:31:12.957: I/dalvikvm(18886): threadid=3: reacting to signal 3
  03-01 10:31:12.967: I/dalvikvm(18886): Wrote stack traces to '/data/anr/traces.txt'
  03-01 10:31:16.197: I/Process(18886): Sending signal. PID: 18886 SIG: 9 
```

提前致谢

* * *

消息文摘.java

导入 java.security.NoSuchAlgorithmException；

公共类 MessageDigest { 私有 java.security.MessageDigest 实例；

```
public MessageDigest() {}

private MessageDigest(java.security.MessageDigest instance)
{
    this.instance = instance;
}

public static MessageDigest getInstance(String algorithm) throws NoSuchAlgorithmException
{
    if (algorithm == null) return null;

    try
    {
        if (algorithm.equals("SHA-1"))
            return (MessageDigest) Class.forName("android.security.Sha1MessageDigest").newInstance();
        else if (algorithm.equals("MD5"))
            return (MessageDigest) Class.forName("android.security.Md5MessageDigest").newInstance();
    }
    catch (Exception e) {}

    return new MessageDigest(java.security.MessageDigest.getInstance(algorithm));
}

public void update(byte[] input)
{
    instance.update(input);
}

public byte[] digest()
{
    return instance.digest();
}

public byte[] digest(byte[] input)
{
    return instance.digest(input);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:53:23.907

通过阅读 googlegroups 听起来 android.security.MessageDigest 已在 Honeycomb 中删除

尝试`java.security.MessageDigest`改用。

# javascript - 如何将变量传递给回调函数？

> ID：15155903
> 
> 赞同：0
> 
> 时间：2013-03-01T10:49:15.927
> 
> 标签：javascript, node.js, callback

我有一个简单的例子：

```
 for ( i in dbs ) {
       var db = dbs[i].split(':')
       var port = dbs[i][0]
       var host = dbs[i][0]
       var client = redis.createClient( port, host )
       tasks = [ [ "info" ] ]
       client.multi(tasks).exec(function (err, replies ) {
           console.log(port)
       }) 
```

如何打印每个客户端连接的正确端口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:56:08.473

一种简单的方法是将循环体包含在一个自调用匿名函数中：

```
for (var i in dbs) {
    (function(i) {
        var db = dbs[i].split(":");
        var host = db[0];  // Probably 'db[0]' instead of 'dbs[i][0]'.
        var port = db[1];  // Probably 'db[1]' instead of 'dbs[i][0]'.
        var client = redis.createClient(port, host);
        tasks = [ [ "info" ] ];
        client.multi(tasks).exec(function(err, replies) {
            console.log(port);
        });
    })(i);
} 
```

这样，`port`闭包会正确捕获 的当前值，并将在传递给 的回调中可用`exec()`。

请注意，此答案假定它`dbs`是一个对象，而不是数组，即使您将`i`其用作循环变量。如果`dbs`是一个数组，则应该使用索引循环：

```
for (var i = 0; i < dbs.length; ++i) {
    // ...
} 
```

因为`for... in`循环[并不意味着迭代数组](https://stackoverflow.com/q/500504/464709)。

# ruby - Ruby gsub IRB 错误

> ID：15155907
> 
> 赞同：0
> 
> 时间：2013-03-01T10:49:25.743
> 
> 标签：ruby

我无法使用 IRB 执行以下命令。Ruby 2.0 该脚本取自官方 Ruby Core 2.0 Doc。

```
"hello".gsub(%r([aeiou])/, '<\1>')

(irb):2: syntax error, unexpected ')', expecting end-of-input
    from /usr/local/rvm/rubies/ruby-2.0.0-p0/bin/irb:16:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T10:52:09.237

```
"hello".gsub(%r([aeiou]), '<\1>') 
```

你有一个额外的`/`. 使用`%r()`或`//`作为正则表达式分隔符。

我检查了文档，并确认那里有错字。但是，我相信它是由 RDoc 引起的，因为[原始来源是正确的](https://github.com/ruby/ruby/blob/trunk/string.c#L3979-L3983)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T10:51:57.953

```
"hello".gsub(%r([aeiou]), '<\1>')
"hello".gsub(/[aeiou]/, '<\1>') 
```

使用`%r()`或`//`

# angularjs - 如何在角度路线中传递查询字符串？

> ID：15155911
> 
> 赞同：36
> 
> 时间：2013-03-01T10:49:42.187
> 
> 标签：angularjs, angularjs-routing

我正在使用 AngularJS 路由，并试图了解如何使用查询字符串（例如， `url.com?key=value`）。Angular 不理解包含同名键值对的路由`albums`：

```
angular.module('myApp', ['myApp.directives', 'myApp.services']).config(
        ['$routeProvider', function($routeProvider) {
            $routeProvider.
            when('/albums', {templateUrl: 'albums.html', controller: albumsCtrl}).
            when('/albums?:album_id', {templateUrl: 'album_images.html', controller: albumsCtrl}).
            otherwise({redirectTo: '/home'});
        }],
        ['$locationProvider', function($locationProvider) {
            $locationProvider.html5Mode = true;
        }]
    ); 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-09-17T20:38:37.410

路由不能与查询字符串一起使用是正确的，但这并不意味着您在切换路由时不能使用查询字符串在页面之间传递数据！路由参数的明显限制是它们不能在不重新加载页面的情况下更新。有时这是不希望的，例如在保存新记录之后。原始路由参数是 0（表示新记录），现在您想使用通过 ajax 返回的正确 ID 更新它，以便用户刷新页面时他们会看到新保存的记录。使用路由参数无法做到这一点，但这可以通过使用查询字符串来完成。

秘诀是在更改路由时不要包含查询字符串，因为这会导致它与路由模板不匹配。您可以做的是更改路由，然后应用查询字符串参数。基本上

```
$location.path('/RouteTemplateName').search('queryStringKey', value).search( ... 
```

这里的美妙之处在于 $routeParams 服务将查询字符串值与实际路由参数同等对待，因此您甚至不必更新代码来以不同方式处理它们。现在，您可以通过在路由定义中包含 reloadOnSearch: false 来更新参数而无需重新加载页面。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-01T16:02:23.340

我认为路由不适用于查询字符串。而不是`url.com?key=value`你可以使用更 RESTful URL 像`url.com/key/value?` Then 你会定义你的路由如下：

```
.when('/albums', ...)
.when('/albums/id/:album_id', ...) 
```

或许

```
.when('/albums', ...)
.when('/albums/:album_id', ...) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-11T15:09:54.663

您可以查看（[**文档**](https://docs.angularjs.org/api/ng/service/$location#search)）中的`search`方法。它允许您向 URL 添加一些键/值。`$location`[](https://docs.angularjs.org/api/ng/service/$location#search)

 **例如，`$location.search({"a":"b"});`将返回此 URL：`http://www.example.com/base/path?a=b`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T11:04:02.837

使用路由参数

```
var Ctrl = function($scope, $params) {
  if($params.filtered) {
    //make sure that the ID is there and use a different URL for the JSON data
  }
  else {
    //use the URL for JSON data that fetches all the data
  }
};

Ctrl.$inject = ['$scope', '$routeParams']; 
```

[http://docs.angularjs.org/api/ng.$ro​​uteParams](http://docs.angularjs.org/api/ng.%24routeParams)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-02T17:17:18.410

我只能想到 URL 中查询字符串的两个用例：

1）如果您需要控制器中查询字符串的键/值对（例如，打印 Hello {{name}} 并在查询字符串中获取名称，例如 ?name=John），那么正如 Francios 所说，只需使用 $location。搜索，您将获得查询字符串作为对象 ({name:John})，然后您可以通过将其放入范围或其他内容（例如 $scope.name = location.search().name;）来使用它。

如果您需要根据查询字符串中给出的内容重定向到路由器中的另一个页面，例如 (?page=Thatpage.htm) 然后在您的 routerProvider.when() 中创建一个 redirectTo: ，它将接收搜索对象作为其第三个参数。观看以下 EggHead 视频的 2:10： [http ://www.thinkster.io/pick/SzcF8bGeVy/angularjs-redirectto](http://www.thinkster.io/pick/SzcF8bGeVy/angularjs-redirectto)

基本上，redirectTo:function(routeParams,path, search){return search.page}**

# ios - rangeOfComposedCharacterSequencesForRange 将 0 个字符范围转换为 1 个字符范围

> ID：15155913
> 
> 赞同：2
> 
> 时间：2013-03-01T10:49:49.543
> 
> 标签：ios, objective-c, unicode, nsstring

我不明白为什么在下面的代码中，将打印的扩展范围是 "location: 1, length: 1" 。为什么范围长度从 0 扩展到 1？

```
NSString * text = @"abc";
NSRange range = NSMakeRange(1, 0);
NSRange extendedRange  = [text rangeOfComposedCharacterSequencesForRange:range];
NSLog(@"extended range: location %d, length : %d ",extendedRange.location,extendedRange.length); 
```

文档说这样做的结果是：

> 接收器中的范围，包括范围内的组合字符序列。

与以下讨论

> ```
> This method provides a convenient way to grow a range to include all composed character sequences it overlaps. 
> ```

但是文本@“abc”不包含任何组合字符，这让我认为结果应该是相同的范围，未修改，无论如何，我认为长度为0的范围不会与任何字符重叠。

这对我来说似乎是一个错误，但我可能错过了一些东西。这正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:22:55.183

这可能是一个错误。

`rangeOfComposedCharacterSequencesForRange:`只调用两次的实现`rangeOfComposedCharacterSequenceAtIndex:`，使用范围的开始和结束索引，并返回组合范围。

该文档没有明确说明从不包含所提供范围边缘的字符，但我同意观察到的行为感觉不对。

你应该[提交一个错误](https://bugreport.apple.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:00:39.173

说的[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/rangeOfComposedCharacterSequencesForRange:)_`rangeOfComposedCharacterSequencesForRange:`

> **返回值**
> 
> 接收器中的范围，包括范围内的组合字符序列。
> 
> **讨论**
> 
> 此方法提供了一种方便的方法来扩大范围以包括它重叠的所有组合字符序列。

因为`location`它是有效的，它正在考虑范围与这个字符*重叠*`location`

# android - Https连接，Android 2.3和4的区别

> ID：15155914
> 
> 赞同：6
> 
> 时间：2013-03-01T10:49:51.480
> 
> 标签：android, ssl, https, handshake, sni

我正在开发一个从不同服务器（http 和 https）检索图像的项目。

我发现[这个有用的 Q/A](https://stackoverflow.com/questions/9574870/no-peer-certificate-error-in-android-2-3-but-not-in-4)可以避免`No peer certificate error`Android 2.3 中的问题，但我不明白为什么在 Android 4 (>3) 中这个问题 (" `No peer certificate error`") 没有出现。

如果我错了，请纠正我：

*   在 Android 2.3 中，HTTPS 连接执行整个证书检查（和握手）；
*   在 Android > 3 中，即使握手失败，也会建立 HTTPS 连接（例如：我的应用程序，作为对等方，没有证书）。

这些版本的Android有什么区别？为什么我需要**全部信任**Android 2.3 而不是 Android 4？

为什么在 Android 2.3 中我收到以下异常：`"javax.net.ssl.SSLPeerUnverifiedException: No peer certificate error"` 而在 Android 4 中一切正常并且已建立连接？

[是否与Android Honeycomb](http://android-developers.blogspot.it/2011/09/androids-http-clients.html)中引入的SNI *[Server Name Indication](http://en.wikipedia.org/wiki/Server_Name_Indication)*相关的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:42:50.257

您的认证机构可能不在2.3.3版本的Android中，而是在4.x版本中。要确定检查两台设备上的密钥库。

从命令行使用 ADB，您可以将 android 的密钥库转储到文件中，并检查该颁发者是否在您的密钥库中可用（可能需要是 root）。adb pull /system/etc/security/cacerts.bks cacerts.bks

下载并安装 Portecle（来自：[http](http://portecle.sourceforge.net/) ://portecle.sourceforge.net/ ） 选择 File / Open Keystore... 并选择 cacerts.bks 文件。选择工具/密钥库报告并将该信息复制到文本编辑器中，以查找从 Web 浏览器中找到的证书中指定的 CN。就我而言，我无法从“Cyber​​trust Public SureServer SV CA”中找到一个。

[在您的计算机网络浏览器上使用https://example.website.com/](https://example.website.com/)浏览到您感兴趣的网站，并找出 CN 是谁。将其与如上所示的密钥库进行比较。如果它不在密钥库中，则需要添加它。

注意：Android 4.0 手机有不同的证书存储方法，不要使用下面提到的 cacerts.bks 文件。对于他们，您应该能够在 Web 浏览器中打开所需的 https 站点并以这种方式添加所需的证书。

我遇到了与 facebook 和 redbox 的连接问题。为了解决我的问题并更新我的 android 2.3.3 手机证书，我从 android 3.2 模拟器复制了一个并将其放在我的手机上：

1.  创建并启动一个 android 3.2 虚拟设备。
2.  从模拟器复制 cacerts.bks 文件（确保您的其他设备未连接）。adb pull /system/etc/security/cacerts.bks cacerts.bks
3.  断开模拟器。
4.  连接要更新的设备（必须是 root）。您可能需要将 /system 文件夹重新挂载为 rw 以获得读/写功能。有关安装问题，请参阅：[此链接](http://wiki.cacert.org/FAQ/ImportRootCert?action=show&redirect=ImportRootCert#Step_4%3a_Upload_cacerts.bks_to_phone)
5.  从您的设备保存旧证书文件的副本： adb pull /system/etc/security/cacerts.bks cacerts.bks.old
6.  将更新的证书文件放在您的设备上 adb push cacerts.bks /system/etc/security/
7.  重启设备
8.  重新连接并验证新的 cacert 文件是否已加载。

# android - 有什么方法可以检测 Android 手机是否支持通话记录中的语音邮件集成？

> ID：15155916
> 
> 赞同：8
> 
> 时间：2013-03-01T10:50:02.853
> 
> 标签：android, voicemail

我的应用使用API 14 及更高版本中提供的[VoicemailContract](http://developer.android.com/reference/android/provider/VoicemailContract.html)功能将语音邮件消息插入电话的通话记录。然而，一些手机似乎禁用了该功能，即使在高于 14 的 API 版本中也是如此。三星 Galaxy Note 2 就是一个很好的例子。因此，当新的 VM 消息插入数据库时​​，它不会显示在通话记录中（但这在大多数其他手机上都可以正常工作）。因此，三星似乎以某种方式禁用了该手机上的该功能，我希望能够在运行时检测到该功能，以便如果该选项不可用，我可以在我的应用程序设置中隐藏该选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T00:26:15.413

你试过检查状态吗？

[http://developer.android.com/reference/android/provider/VoicemailContract.Status.html](http://developer.android.com/reference/android/provider/VoicemailContract.Status.html)

供应商实际上可以在他们的手机上实现他们想要的几乎任何东西（这使得 android 开发非常烦人），但是我认为应该在手机上将状态设置为“不好”的东西，这样会忽略你的 api 调用。

# javascript - swapCache() 上的 DOM 异常错误 11

> ID：15155921
> 
> 赞同：9
> 
> 时间：2013-03-01T10:50:19.140
> 
> 标签：javascript, html, browser-cache

我正在使用应用程序缓存并遇到 swapCache 函数的问题。

我创建了世界上最简单的缓存清单文件：

```
CACHE MANIFEST
# Timestamp: 2013-03-01 11:28:49

CACHE:
media/myImage.png

NETWORK:
* 
```

第一次运行应用程序在控制台中给了我这个：

```
Creating Application Cache with manifest http://blah_blah/offline.appcache
Application Cache Checking event
Application Cache Downloading event
Application Cache Progress event (0 of 1) http://blah_blah/media/myImage.png
Application Cache Progress event (1 of 1)
Application Cache Cached event 
```

到目前为止一切顺利。然后我换出图像并更改清单文件中的时间戳并获得以下信息：

```
Adding master entry to Application Cache with manifest http://blah_blah/offline.appcache
Application Cache Downloading event
Application Cache Progress event (0 of 2) http://blah_blah/media/myImage.png
Application Cache Progress event (1 of 2) http://blah_blah/Widget/?invoke=myWidgetFunctionName
Application Cache Progress event (2 of 2)
Application Cache UpdateReady event 
```

此时调用 applicationCache.swapCache() 函数给我一个 DOM 异常 11 错误。

在网络服务器上正确配置的 MIME 类型。

任何人有任何想法/可以指出我正确的方向吗？（我已经在线阅读了所有常用链接的 appcache 内容，但看不出我做错了什么）

谢谢！

编辑：

正如我在下面的评论中提到的，在我的 Web 服务器上为 *.appcache 文件设置过期标头以立即过期似乎可以让它工作，尽管我仍然收到 DOM 异常错误（！？）。我发现以下博客条目可能会有所帮助： [Offline App Cache INVALIDSTATEERR 的可能修复](http://jonathanstark.com/blog/possible-fix-for-offline-app-cache-invalid_state_err)

...但我不知道如何设置 MIME 类型客户端。我的 google-Fu Skillz 抛弃了我。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T22:41:26.167

我遇到过同样的问题。有一段时间，如果浏览器不是 chrome，我只是禁用了缓存，但后来我决定再试一次，按照建议设置 mime-type。Firefox 在我调用 时不再抛出异常`swapCache()`，整个刷新过程现在按预期工作。mime-type 必须设置在服务器端，因为请求不是从您的网页发起的，而是从浏览器发起的，因此您无法控制它如何读取响应。你有几个选择。如果您使用的是 apache 或 IIS，您可以按照 koko 的建议进行操作。如果您使用的是为您处理路由的框架，并且您配置了 URL 到响应的映射，例如 rails 或 python wsgi 服务器，那么您通常可以手动设置内容类型。这是我在 Python 应用程序中使用 Bottle.py（基于 WSGI）的代码片段：

```
# BEFORE
@bottle.route(r"/<path:re:.+\.(manifest|appcache)>", auth=False)
def serve_cache_manifest(path):
    return bottle.static_file(path, SITE_DIR)

# AFTER
@bottle.route(r"/<path:re:.+\.(manifest|appcache)>", auth=False)
def serve_cache_manifest(path):
    return bottle.static_file(path, SITE_DIR, mimetype='text/cache-manifest') 
```

Bottle 带有一个实用函数，可以处理我正在使用的返回静态文件。它有一个可选参数来设置 mime 类型。

> **tl;dr**如果您无法将 mime-type 添加到您的服务器配置中，您几乎总是可以在您的服务器端代码中设置它（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T23:09:06.173

我建议尝试注释掉包罗万象的网络白名单。

```
NETWORK:
# * 
```

* 似乎需要对所有文件进行网络访问，根据

[https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache)

我现在为我的一个简单的 Web 应用程序注释掉了所有 NETWORK 条目，它运行良好。

# iphone - 如何重新启动干净的应用程序（iOS 6.1）？

> ID：15155924
> 
> 赞同：0
> 
> 时间：2013-03-01T10:50:19.770
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我实现了一个适用于 iOS 的应用程序。一切顺利，就像一个魅力......直到设备重新启动！当我手动关闭应用程序时（例如，在我的 iPad 上，我向上滑动四根手指，可视化显示应用程序“活动”的菜单，按住应用程序的图标并按下红色徽章，终止应用程序）然后我尝试打开这又是发生在我身上的事情：

*   首先，应用程序仍然停留在关闭应用程序之前访问的最后一个页面上（我无法点击标签栏上的按钮或执行其他任何操作）
*   然后，我唯一能做的就是点击主页按钮并尝试再次打开应用程序
*   在这一点上，我得到的只是一个完美的黑屏

重启似乎不是真正的重启，或者说不干净。这对我来说完全没有意义。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:54:55.477

**编辑 ：**

通过从模拟器/设备中按住应用程序图标来删除您的应用程序，然后重新安装应用程序。并检查它是否有效？？？

如果您的视图显示为黑屏，则给它背景颜色`redColor`或如您所愿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:22:18.017

仅其 iOS 应用程序自然行为。

当您按下设备上的主页按钮时，在运行任何 iOS 应用程序时它会进入后台，但该应用程序仍处于后台及其保存应用程序的状态。

因此，如果您点击 agin 应用程序的图标，您将看到您离开它的最后一个屏幕。

现在，如果您想从初始状态重新启动应用程序，您需要清除它。

走这条路。

1.  只需双击设备的主页按钮，您就可以在底部看到正在运行的应用程序，如下所示

![在此处输入图像描述](../Images/008e37f584fff0505c3a906e91d142e2.png)

2.  要删除特定的应用程序，您只需按住，您可以在应用程序上看到红色 (-) 图标

![在此处输入图像描述](../Images/4968b7fba30fff369af8b7b8439a6153.png)

只需点击它，你就在路上。

3.  现在按主页按钮并转到开始应用程序！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:41:31.803

问题是 Xcode 在运行应用程序时会附加一个调试器，这会阻止它正常关闭并导致重新打开时出现问题。非常感谢这位指出问题的人：[https ://stackoverflow.com/a/15176137/1272105](https://stackoverflow.com/a/15176137/1272105)

# tesseract - 无法为 tesseract (mac os x) 创建训练数据

> ID：15155925
> 
> 赞同：1
> 
> 时间：2013-03-01T10:50:20.650
> 
> 标签：tesseract, leptonica

我正在尝试为 tesseract 的特定字体创建训练数据，但在以下命令中失败：

```
tesseract eng.uknumberplate.exp0.tiff foo bach.nochop makebox 
```

我在终端中得到以下输出。

```
read_params_file: Can't open bach.nochop
Tesseract Open Source OCR Engine v3.02.02 with Leptonica
Error in findTiffCompression: function not present
Error in pixReadStreamTiff: function not present
Error in pixReadStream: tiff: no pix returned
Error in pixRead: pix not read
Unsupported image type. 
```

我已经通过 MacPort 安装了 tesseract 和 leptonica。

以下是终端中 tesseract -v 命令的输出。

```
tesseract 3.02.02
 leptonica-1.68
  zlib 1.2.5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T23:51:01.847

你必须转换`colorspace`你的 TIFF。用于[`ImageMagick`](http://www.imagemagick.org)将您的 pdf 文件转换为 TIFF 图像：

```
$convert -density 300 -depth 8 or 4 file.pdf output.tif 
$convert output.tif -colorspace rgb -type truecolor output.tif 
```

在此之后尝试运行`makebox`cmd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:24:38.203

它是`batch.nochop`，不是`bach.nochop`。

# objective-c - 鼠标悬停时的 NSPopOver

> ID：15155928
> 
> 赞同：0
> 
> 时间：2013-03-01T10:50:27.157
> 
> 标签：objective-c, cocoa, nstableviewcell, nspopover

当我将光标放在表格视图的单元格上时，我需要显示一个弹出框。在 OS X 应用程序上，当鼠标悬停在 NSTableViewCell 上时显示 NSPopover 的技术是什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T07:05:24.110

`mouseMoved:`为您的表格视图实现消息并`performSelector:withObject:afterDelay:`从那里调用。`NSObject:cancelPreviousPerformRequestsWithTarget:selector:object`在执行此操作之前（以及在 dealloc 中）取消先前的请求。这将在鼠标移动时不断重新启动计时器。给定的选择器将在延迟结束后执行，此后鼠标未移动。在选择器中，您可以获取当前鼠标位置并显示弹出框。

当鼠标再次开始移动时，不要忘记删除弹出框。

# sql - 如何使用 IN 命令保留 SQL 查询的顺序

> ID：15155930
> 
> 赞同：7
> 
> 时间：2013-03-01T10:50:45.660
> 
> 标签：sql, sqlite

```
SELECT * FROM tblItems
WHERE itemId IN (9,1,4) 
```

按 SQL 找到它们的顺序返回（恰好是 1、4、9）但是，我希望它们按我在数组中指定的顺序返回。

我知道我可以用我的母语（obj c）对它们重新排序，但是在 SQL 中有没有一种巧妙的方法来做到这一点？

像这样的东西会很棒：

```
ORDER BY itemId (9,1,4) --    <-- this dosn't work :) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T10:54:13.827

可能最好的方法是创建一个项目 ID 表，其中还包括一个排名顺序。然后您可以加入并按排名顺序进行排序。

像这样创建一个表：

```
 itemID rank
 9      1
 1      2
 4      3 
```

然后您的查询将如下所示：

```
select tblItems.* from tblItems
    inner join items_to_get on
        items_to_get.itemID = tblItems.itemID
    order by rank 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T11:02:28.283

使用[CASE 表达式](http://www.sqlite.org/lang_expr.html#case)将 ID 值映射到递增序列：

```
... ORDER BY CASE itemId
             WHEN 9 THEN 1
             WHEN 1 THEN 2
             ELSE        3
             END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:54:18.267

我曾经在 mysql 环境中做过同样的任务。

我最终使用

`ORDER BY FIND_IN_SET(itemID, '9,1,4')`

从那时起，这对我有用。我希望它也适用于 sqlite

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:53:47.953

您可以将 case 构造添加到您的 select 子句。

```
select case when itemid = 9 then 1
when itemid = 1 then 2 else 3 end sortfield
etc
order by sortfield 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T10:53:54.703

您可以创建一个过程来对 SQL 中的数据进行排序，但这将比其本地语言对应物复杂得多。

没有像 SQL 那样使用数据的“简洁方法”——a 的`WHERE`子句`SELECT`简单地说“如果这些条件匹配，则包括该行”；它不是（也不能是）排序标准。

# php - 如何删除 index.php 并在 CodeIgniter URL 中添加 www？

> ID：15155936
> 
> 赞同：0
> 
> 时间：2013-03-01T10:50:55.957
> 
> 标签：php, .htaccess, codeigniter

我的`.htaccess`文件是：

```
RewriteEngine on

RewriteCond $1 !^(index\.php|resources|robots\.txt|img/|css/|js)

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L,QSA] 
```

它从 URL 中删除`index.php`并强制从`example.net`to重定向`www.example.net`，但是当我输入时`http://example.net`，它不会重定向到`www.example.net`. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:16:07.600

在 .htaccess 文件中改变这个

```
RewriteRule ^(.*)$ /index.php/$1 [L,QSA] 
```

至

```
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

并在配置文件中进行了 2 处更改：

```
$config['base_url'] = 'http://'.$_SERVER['SERVER_NAME'].'/CiFolderName';
$config['index_page'] = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:52:27.757

设置你的 htaccess

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>
  RewriteEngine On
  #RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^ index.php [QSA,L]
</IfModule> 
```

在您的配置中删除 index.php

```
$config['index_page'] = ''; 
```

还允许在您的 apache 中覆盖 htaccess

```
nano /etc/apache2/sites-available/default 
```

和改变

```
 AllowOverride All 
```

并重新启动apache

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:07:52.813

将 .htaccess 文件与 index.php 文件一起放在应用程序根目录中。（检查 htaccess 扩展是否正确，Bz htaccess.txt 对我不起作用。）

并将以下规则添加到 .htaccess 文件中，

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

然后在您的 application/config/config.php 文件中找到以下行

```
$config['index_page'] = 'index.php'; 
```

将变量设置为空，如下所示。

```
$config['index_page'] = ''; 
```

就是这样，它对我有用。

如果它不起作用，请尝试用这些参数（'AUTO'、'PATH_INFO'、'QUERY_STRING'、'REQUEST_URI'和'ORIG_PATH_INFO'）一一替换以下变量

```
$config['uri_protocol'] = 'AUTO'; 
```

# c# - 如何获取服务器时间之外的时间（包括毫秒或（1/100 s））？

> ID：15155937
> 
> 赞同：4
> 
> 时间：2013-03-01T10:51:01.303
> 
> 标签：c#, time

我正在尝试超出服务器的时间。

首先，我尝试过：

```
string URL = "http://google.com"; 
System.Net.HttpWebRequest rq2 = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(URL);
System.Net.HttpWebResponse res2 = (System.Net.HttpWebResponse)rq2.GetResponse();
DateTime xd = rq2.Date; 
```

但这很慢，而且不包含毫秒。

然后我发现，我实际上可以从目标服务器使用的 ntp 服务器获取服务器时间。

```
 InternetTime.SNTPClient sntp = new InternetTime.SNTPClient("time-b.timefreq.bldrdoc.gov");
 sntp.Connect(false); // true to update local client clock
 DateTime dt = sntp.DestinationTimestamp.AddMilliseconds(sntp.LocalClockOffset);
 string timeStampNow = dt.ToString("dd/MM/yyyy HH:mm:ss.fff"); 
```

它工作得很好，但是，我不确定我的目标服务器是否使用 ntp 服务器，如果是，我不知道如何找到它。我花了很多时间研究，所以我决定在这里问。

编辑2：我无权访问该服务器（除了访问它的 www 页面），我知道该服务器正在使用**Microsoft-IIS/7.5 web server**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:32:02.757

没有办法可靠地获得比响应标头中返回的分辨率更高的随机 HTTP 服务器时间。正如您所发现的，这仅精确到秒。这不是当前时间，而是服务器填充标头的时间。您不知道是请求进入的时间，响应发送的时间，还是某个愚蠢的程序员为了让您的生活变得困难而塞进标头的随机时间。你只能说，“这是服务器报告的时间。”

即使您知道有问题的服务器从哪个 NTP 服务器获取时间，并且假设您可以访问该服务器，从它获取时间也不会为您提供服务器时间的准确值。服务器通过 NTP 定期更新其时钟，但这可能是每天、每周、每月或“只要管理员决定”。NTP 服务器的时间不会准确反映特定服务器的时间。在一般情况下，当然不在毫秒范围内。如果服务器在一段时间内没有将其时钟与 NTP 服务器同步，甚至可能在几分钟内都不会。

顺便说一句，如果您要查找的只是服务器返回的时间，那么您可能应该在可能的情况下执行 HEAD 请求。但是你也必须支持执行 GET 请求，因为许多服务器会返回 405 错误以响应 HEAD 请求。

# r - 如何将一长串参数传递给R中的`nls`函数

> ID：15155941
> 
> 赞同：2
> 
> 时间：2013-03-01T10:51:05.790
> 
> 标签：r, nls

该`nls`功能正常工作如下：

```
 x <- 1:10
 y <- 2*x + 3                            # perfect fit
 yeps <- y + rnorm(length(y), sd = 0.01) # added noise
 nls(yeps ~ a + b*x, start = list(a = 0.12345, b = 0.54321))# 
```

因为我使用的模型有很多参数，或者我事先不知道参数列表中会包含什么，所以我想要如下

```
tmp <- function(x,p) { p["a"]+p["b"]*x }
p0 <- c(a = 0.12345, b = 0.54321)
nls(yeps ~ tmp(x,p), start = list(p=p0)) 
```

有谁知道如何修改`nls`函数以便它可以接受公式中的参数向量参数而不是许多单独的参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:35:59.747

您可以像这样给出初始系数的向量：

```
tmp  <- function(x, coef){
       a <- coef[1]
       b <- coef[2]
       a +b*x
     }

x <- 1:10
yeps <- y + rnorm(length(y), sd = 0.01)  # added noise
nls(yeps ~ a + b*x, start = list(a = 0.12345, b = 0.54321))#                     
nls(yeps ~ tmp(x,coef), start = list(coef = c(0.12345, 0.54321)))

Nonlinear regression model
  model:  yeps ~ tmp(x, coef) 
   data:  parent.frame() 
coef1 coef2 
    3     2 
 residual sum-of-squares: 0.0016

Number of iterations to convergence: 2 
Achieved convergence tolerance: 3.47e-08 
```

PS：

```
 example(nls) 
```

应该是了解如何使用**nls**的良好开端。

# javascript - 如何在不同的本地使用 vbscript 的月函数

> ID：15155943
> 
> 赞同：0
> 
> 时间：2013-03-01T10:51:13.350
> 
> 标签：javascript, asp-classic, vbscript

下面是VBScript的代码，

```
FromDate=22/2/2013
ToDate=  1/3/2013
StartDateSerial = DateSerial(year(FromDate),month(FromDate), day(FromDate))
ToDateSerial = DateSerial(year(ToDate),month(toDate),day(ToDate)) 
```

此日期格式为 dd/mm/yyyy。但 DateSerial 的结果如下

```
StartDateSerial= 2/22/2013
ToDateSerieal= 1/3/2013 
```

这意味着对于开始日期它转换为**mm/dd/yyyy**但对于 ToDateSerieal 它转换为**dd/mm/yyyy**

**我在US lacal**上发现了这个问题。但在**英国当地**，这对两者都是一样的。

现在，当我尝试使用 FromDate 和 To Date 中的以下值时

```
FromDate=2/22/2013
ToDate=  3/1/2013 
```

我将 FromDate 和 ToDate 从 JavaScript 传递到 vbscript。

格式为 mm/dd/yyyy，然后它在美国 lacal 上运行良好，但在英国本地上运行良好。任何人都可以告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:59:10.190

我假设，您将 d/m/y 字符串从 Javascript 传递到使用美国语言环境运行的 VBScript，该语言环境需要 m/d/y 日期字符串。如果出现错误的日期字符串，VBScript 会尝试做正确的事情并将“22/2/2013”​​转换为 2 月日期；“2013 年 1 月 3 日”被视为有效的 1 月日期。英国语言环境理解 d/m/y 字符串，“2013 年 1 月 3 日”是 3 月日期。

为了解决您的问题 - 所有语言环境的 d/m/y 日期字符串输入 -`a = Split("d/m/y", "/")`在字符串和`DateSerial(a[2], a[1], a[0])`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:32:51.593

为确保您使用正确的语言环境，您可以使用[SetLocale](http://www.w3schools.com/vbscript/func_setlocale.asp)设置语言环境。`dd/mm/yyyy`你可以使用,`2057`语言`English UK`环境。

```
cl = GetLocale()

SetLocale(1033) ' US locale
wscript.echo FormatDateTime("1/3/2013",1)

SetLocale(2057) ' UK locale
wscript.echo FormatDateTime("1/3/2013",1)

' Set back the original locale
SetLocale(cl)

' Output:
' Thursday, January 03, 2013
' 01 March 2013 
```

# c - PulseAudio API - 没有麦克风信号

> ID：15155947
> 
> 赞同：0
> 
> 时间：2013-03-01T10:51:28.573
> 
> 标签：c, linux, audio, real-time, pulseaudio

我正在尝试使用 PulseAudio“实时”捕获麦克风信号。该程序是用 C 语言编写的，并为此使用 PulseAudio Simple API。不幸的是，我请求的音频缓冲区不包含任何信号。要么我的代码有问题，要么设备源无法识别。我使用 gstreamer 的 pulsesrc 和 pulsesink 在我的程序之外运行了一些测试，这些测试有效。我还测试了以下同样有效的命令：

```
parec -d alsa_input.usb-041e_30d3_121023000184-00-U0x41e0x30d3.analog-mono | sox -t raw -r 44100 -sLb 16 -c 2 - /home/roos/Arbeitsfläche/pulsetest.wav 
```

在我的第二张卡上它也有效：

```
parec -d alsa_input.usb-Creative_Technology_Ltd_Sound_Blaster_X-Fi_Go__Pro_00173634-00-Pro_1.analog-stereo | sox -t raw -r 44100 -sLb 16 -c 2 - /home/roos/Arbeitsfläche/pulsetest.wav 
```

这是应该工作的代码：

```
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <math.h>

#include <pulse/simple.h>
#include <pulse/error.h>

#define BUFSIZE 1024
#define SAMPLE_BITS 16

/* A simple routine calling UNIX write() in a loop */
static ssize_t loop_write(int fd, const uint8_t *data, size_t size) 
{
    int i = 0;
    for (i = 0; i < size; i += 2)
    {
        // put two bytes into one __signed__ integer
        int16_t val = data[i] + ((uint32_t)data[i+1] << 8);
        printf("%d", val);
    }

        return size;
}

int main(int argc, char*argv[]) 
{
    char *device = "alsa_output.usb-Creative_Technology_Ltd_Sound_Blaster_X-Fi_Go__Pro_00173634-00-Pro_1.analog-stereo";

    // The sample type to use
    static const pa_sample_spec ss = {
    .format = PA_SAMPLE_S16LE,
    .rate = 44100,
    .channels = 2
    };
    pa_simple *s = NULL;
    int ret = 1;
    int error;

    // Create the recording stream 
    if (!(s = pa_simple_new(NULL, argv[0], PA_STREAM_RECORD, NULL, "record", &ss, NULL, NULL, &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
    goto finish;
    }

    for (;;) {
    uint8_t buf[BUFSIZE];

    // Record some data ...
    if (pa_simple_read(s, buf, sizeof(buf), &error) < 0) {
        fprintf(stderr, __FILE__": pa_simple_read() failed: %s\n", pa_strerror(error));
        goto finish;
    }

    // And write it to STDOUT
    if (loop_write(STDOUT_FILENO, buf, sizeof(buf)) != sizeof(buf)) {
        fprintf(stderr, __FILE__": write() failed: %s\n", strerror(errno));
        goto finish;
    }
    }

    ret = 0;

finish:

    if (s)
    pa_simple_free(s);

    return 0;
} 
```

方法“ssize_t loop_write”接收缓冲区，因为它是一个 16 位小端字节数组，我将两个字节组合成一个 16 位整数。这意味着幅度（由变量“val”表示）应该在 0 和 32768 之间。但到目前为止，它都是 0。所以我有两个主要问题是设备源（imo 似乎更有可能）和我的转换一个整数值。

你对此有什么建议吗？先感谢您！

编辑/更新：好的，我不知道我做了什么 - 但如果我通过特定设备，我现在会收到以下消息：

```
pa_simple_new() failed: Connection refused 
```

当我传递 NULL 时，它适用于默认声卡。仍在使用我之前描述的命令行命令。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:57:10.717

好的，只是想通了-我犯了一个非常愚蠢的错误。

我将设备传递给第一个函数参数而不是第四个。

所以这样做

```
if (!(s = pa_simple_new(NULL, argv[0], PA_STREAM_RECORD, device, "record", &ss, NULL, NULL, &error))) 
```

而不是这个

```
if (!(s = pa_simple_new(device, argv[0], PA_STREAM_RECORD, NULL, "record", &ss, NULL, NULL, &error))) 
```

# node.js - Node.js/Passport/Connect-Filter：重构期间的问题

> ID：15155950
> 
> 赞同：0
> 
> 时间：2013-03-01T10:51:33.210
> 
> 标签：node.js, authentication, connect, passport.js, middleware

我正在使用 node.js 开发一个 Web 应用程序，并且我正在使用护照（[http://passportjs.org/](http://passportjs.org/)）进行身份验证。我将所有护照代码放入 app.js 文件中，效果非常好......在一些重构步骤中，我决定将所有护照代码放入一个名为 authentication.js 的自己的文件/模块中，这是我的问题：

在 app.js 中有以下“中间件”代码：

```
app.configure(function(){
   ...
   app.use(passport.initialize());
   app.use(passport.session());
} 
```

我想用类似的东西代替：

```
var auth = require('./authentication.js');
app.configure(function(){
   ...
   app.use(auth.initialize(app));
} 
```

但实际上我不知道 auth.initialize 应该是什么样子。

我尝试过这样的事情：

```
function initialize(app){
   return function(res,req,next){
      app.use(passport.initialize(res,req, next));
      app.use(passport.session(res,req, next));
      next();
} 
```

但没有成功...... :-(

有人对这个问题有任何想法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:15:26.227

这个怎么样？

```
// app.js
var auth = require('./authentication.js');
app.configure(function(){
   ...
   auth.initialize(app);
});

// authentication.js
module.exports.initialize = function(app) {
  app.use(passport.initialize());
  app.use(passport.session());
}; 
```

请确保在 Passport 之前配置了 Passport 依赖的其他中间件，例如`express.session`and 。`express.cookieParser`

# javascript - 如何检查ajax返回值

> ID：15155954
> 
> 赞同：0
> 
> 时间：2013-03-01T10:51:41.583
> 
> 标签：javascript, jquery, ajax

我有一个 ajax 调用，它返回了一些值。现在我需要检查 javascript 中的值。我该怎么做

```
$('#cm').blur(function () {
     var cmnumber = document.forms['myform']['cm'].value;
     $.ajax({
         type: 'get',
         url: "/validatecm/" + cmnumber,
         cache: false,
         asyn: false,
         data: cmnumber,
         success: function (data) {
             alert(data)

         },
         error: function (data) {
             alert(data)

         }
     })

 }); 
```

现在我需要访问我的 javascript submitformfunction 中的“数据”。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:53:18.810

```
 success: function(data) {
      console.log(data);
     useInAnotherFunction(data);

 }

 function useInAnotherFunction(data)
 {
  ...use here
 } 
```

如果你使用 console.log(data); 您可以清楚地查看数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:54:49.173

您已经在此处访问数据

```
alert(data) 
```

如果您仍想在成功回调之外访问它，请像这样

```
success: function(data) {
         YourFunctionCall(data)

    } 
```

# c++ - C++ Dll字符串函数崩溃

> ID：15155959
> 
> 赞同：1
> 
> 时间：2013-03-01T10:51:44.670
> 
> 标签：c++, string, sockets, dll, crash

我有以下问题。我使用以下函数从缓冲区接收字符串，直到出现换行符。

```
string get_all_buf(int sock) {
    int n = 1, total = 0, found = 0;
    char c;
    char temp[1024*1024]; 
    string antw = "";

    while (!found) {
        n = recv(sock, &temp[total], sizeof(temp) - total - 1, 0);
        if (n == -1) {

            break;
        }
        total += n;
        temp[total] = '\0';
        found = (strchr(temp, '\n') != 0);

        if (found == 0){
        found = (strchr(temp, '\r\n') != 0);
        }
    }
    antw = temp;

    size_t foundIndex = antw.find("\r\n");
    if (foundIndex != antw.npos)
    antw.erase ( antw.find ("\r\n"), 2 );

    foundIndex = antw.find("\n");
    if (foundIndex != antw.npos)
    antw.erase ( antw.find ("\n"), 2 );

    return answ;
} 
```

所以像这样使用它：

```
string an = get_all_buf(sClient); 
```

如果我创建一个 exe 文件，一切正常。但是，如果我创建一个 dll 并使用 rundll32 运行它，则应用程序将在“ `string an = get_all_buf(sClient);`”处关闭而没有任何错误消息......

我试图解决这个问题已经好几个小时了，我现在有点绝望......

PS 对明显的错误或糟糕的编码风格表示抱歉，我刚开始学习 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:55:12.537

```
char temp[1024*1024]; 
```

在堆栈上声明一个 1Mb 的结构。这可能太大并溢出可用的堆栈内存。你可以改为给它静态范围

```
static char temp[1024*1024]; 
```

或动态分配

```
char* temp = (char*)malloc(1024*1024);
// function body
free(temp); 
```

或者，假设提到 run32.dll 意味着您在 Windows 上工作，您可以使用[/STACK](http://msdn.microsoft.com/en-us/library/8cxs58a6.aspx)链接器选项调查将其保留在堆栈中。这可能不是最好的方法——您已经发现，当您更改构建设置或尝试针对其他平台时，它会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:27:29.133

我不是在堆栈上创建`temp`变量，而是动态地（在堆上）创建它，但不使用 raw`malloc`和`free`如上一个答案所示，而是使用现代 C++ 和**`std::vector`**：

```
#include <vector>

std::vector<char> temp(1024*1024); 
```

这是异常安全的，您不必注意释放分配的内存：`std::vector`的析构函数会*自动*执行此操作（在抛出异常的情况下也是如此）。

而不是`sizeof(temp)`, 在您的代码中，您可以使用`temp.size()`（它将返回向量中元素的计数，并且由于这是`char`s 的向量，因此它将仅返回以`char`s 为单位的总向量大小，即以字节为单位）。

您仍然可以使用`operator[]`for `std::vector`，就像对原始 C 数组所做的那样。

另请注意，如果您正在构建一个**DLL**，并且上述函数在 DLL 接口处公开，因为该函数有一个**C++ 接口，`std::string`边界处有一个 STL 类 ()**，您必须注意您的 DLL 和您的客户端都是构建的具有到*相同 CRT的**动态链接*，以及*相同的编译器*和*相同的编译器设置*（例如，您不能将使用 VS2008/VC9 构建的 DLL 与使用 VS2010/VC10 构建的 .EXE 或带有debug-build EXE 使用相同的编译器构建）。

# sql - 从另一个表更新一个表

> ID：15155961
> 
> 赞同：2
> 
> 时间：2013-03-01T10:51:47.027
> 
> 标签：sql, postgresql, sql-update, insert-update

我正在使用 postgres，我有以下两个表。我想使用从altitude_of_point 表中获取的高度值更新 distinct_network_point 表，并将它们加入 id 值。

以下是 distinct_network_point 表：

![在此处输入图像描述](../Images/c2df2aabc788d64f6c59a5172a48c53b.png)

以下是altitude_of_point 表：

![在此处输入图像描述](../Images/88c2a044fb4acc2bedb3b1a9bc0c3f7b.png)

sql查询的结构应该如何完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:07:03.277

我希望它有帮助：

```
UPDATE distinct_network_point 
SET altitude = altitude_of_point.altitude 
FROM  altitude_of_point 
    WHERE distinct_network_point.id= altitude_of_point.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:15:52.623

```
UPDATE distinct_network_point 
SET altitude = altitude_of_point.altitude 
FROM distinct_network_point,  altitude_of_point 
    WHERE distinct_network_point.id= altitude_of_point.id 
```

# mysql - 列 Sum 和子查询给出错误

> ID：15155970
> 
> 赞同：1
> 
> 时间：2013-03-01T10:52:13.643
> 
> 标签：mysql, having

我有一张表，我想知道两个列总和的未结余额

**表**看起来像这样

```
journalid | senderid | sourcenr | accountnr | debitamount | creditamount | trxdate 
```

**SQL查询**

```
 select j.senderid,

 (sum(j.debitamount)-(select sum(j2.creditamount)as balance from
 journal j2 where j2.sourcenr = j.sourcenr and j2.ccaountnr =
 3993200))as outstanding

  from journal j

 where j.accountnr = 3993200

 and( j.trxdate >= '2012-12-31' and j.trxdate < '2013-01-31')

 group by 1

 having (sum(j.debitamount)-(select sum(j2.creditamount)as balance from
 journal j2 where j2.source = j.source and j2.accnr = 3993200)) > 0

 order by 1 
```

我收到以下错误 -

> 选择列表中的无效表达式（不包含在聚合函数或 GROUP BY 子句中）。

如果我添加`sourcenr`字段（如下图）

```
 select j.senderid,
         j.sourcenr,

    (sum(j.debitamount)-(select sum(j2.creditamount)as balance from
 journal j2 where j2.sourcenr = j.sourcenr and j2.ccaountnr =
 3993200))as outstanding

    from journal j

 where j.accountnr = 3993200

 and( j.trxdate >= '2012-12-31' and j.trxdate < '2013-01-31')

 group by 1 ,2

 having (sum(j.debitamount)-(select sum(j2.creditamount)as balance from
 journal j2 where j2.source = j.source and j2.accnr = 3993200)) > 0

 order by 1 
```

然后我没有得到错误，但我没有得到senderid**的唯一行****请帮助**！

# java - JAX-RS 使用 Jersey 将具有 List 类型的 HashMap 作为值转换为 XML

> ID：15155979
> 
> 赞同：1
> 
> 时间：2013-03-01T10:52:49.300
> 
> 标签：java, hashmap, jersey, jax-rs

我有一个需要返回的休息端点`Map<String,List<String>`，我尝试将 Map 和 List 包装到 POJO 以及使用 GenericEntity 来创建 Response 对象。

每次都失败。最后异常消息如下：

> 原因：com.sun.jersey.api.MessageException： `java.util.Map<java.lang.String, java.util.List<java.lang.String>>`未找到 Java 类 java.util.HashMap、Java 类型和 MIME 媒体类型 application/xml 的消息正文编写器。

任何人都可以建议不首选编写自定义作家的解决方案。

# data-modeling - 为 pentaho 项目（mysql 工作台或模式工作台）建模星型模式数据库？

> ID：15155981
> 
> 赞同：1
> 
> 时间：2013-03-01T10:52:55.877
> 
> 标签：data-modeling, mysql-workbench, pentaho

我正在做一个 BI 项目，我将在其中使用 pentaho。我目前正在设计数据库。我知道在 pentaho 中我需要模式工作台来为最终用户创建我的多维数据集和“宇宙”。

我可以先使用 mysql 工作台创建和建模我的 DW（星型模式），然后使用模式工作台创建多维数据集吗？

这是一个糟糕的解决方案，给了我两倍的工作吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:19:11.947

> 我可以先使用 mysql 工作台创建和建模我的 DW（星型模式），然后使用模式工作台创建多维数据集吗？

是的，只要数据库结构支持星型模式，您就可以做到这一点

> 这是一个糟糕的解决方案，给了我两倍的工作吗？

我想是的

# android - Android 指南针方位

> ID：15155985
> 
> 赞同：9
> 
> 时间：2013-03-01T10:53:09.667
> 
> 标签：android, magnetometer, sensormanager

我正在尝试使用以下方法以度数（即 0-360）获取指南针方位：

```
float[] mGravity;
float[] mGeomagnetic;
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        mGravity = event.values;
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
        mGeomagnetic = event.values;
    if (mGravity != null && mGeomagnetic != null) {
        float R[] = new float[9];
        float I[] = new float[9];
        boolean success = SensorManager.getRotationMatrix(R, I, mGravity,
                mGeomagnetic);
        if (success) {
            float orientation[] = new float[3];
            SensorManager.getOrientation(R, orientation);
            float azimut = orientation[0];
            bearing.setText("Bearing: "+ azimut);
        }
    }
} 
```

方位角值（即`orientation[0]`）应该是 0<=azimuth<360 但是当我旋转我的设备时，我只得到从 -3 到 3 的值。有人可以告诉我问题可能是什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T11:42:23.217

这些值以弧度为单位，您必须转换为弧度

```
int azimut = (int) Math.round(Math.toDegrees(orientation[0])); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T12:54:10.883

这是真的，它是在弧度。谢谢霍恩。我添加了一些逻辑来获得从 0 到 360 的度数，因为如果我只将它转换为度数，我得到的值是从 -180 到 180。

```
float azimuthInRadians = orientation[0];
float azimuthInDegress = (float)Math.toDegrees(azimuthInRadians)+360)%360; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-14T08:19:36.647

```
// This answer applies to Google Maps api v2.
// It is possible by registering your application with Sensor Listener for Orientation and get the
// angle relative to true north inside onSensorChanged and update camera accordingly.
// Angle can be used for bearing. Following code can be used:

// Instead of using Sensor.TYPE_ORIENTATION try using getOrinetation api. Sensor.TYPE_ORIENTATION
// has been deprecated.

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    if (sensorManager != null)
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
                SensorManager.SENSOR_DELAY_GAME);
}

public void onSensorChanged(SensorEvent event) {

    float compassBearingRelativeToTrueNorth = Math.round(event.values[0]);

    Log.d(TAG, "Degree ---------- " + degree);

    updateCamera(compassBearingRelativeToTrueNorth);

}

private void updateCamera(float bearing) {
    CameraPosition oldPos = googleMap.getCameraPosition();

    CameraPosition pos = CameraPosition.builder(oldPos).bearing(bearing)
            .build();

    googleMap.moveCamera(CameraUpdateFactory.newCameraPosition(pos));

} 
```

# ruby - 将我的 Rails 3.2.12 项目切换到 Ruby 2.0.0 测试失败

> ID：15155986
> 
> 赞同：4
> 
> 时间：2013-03-01T10:53:14.420
> 
> 标签：ruby, ruby-on-rails-3.2

将我的 Rails 3.2.12 项目切换到 Ruby 2.0.0 未通过测试：

```
NoMethodError:
  private method `initialize_dup' called for #<Receipt:0x007fe06c809428> 
```

看起来`initialize_dup`现在是一个私有方法。

使用 Rails 3.2.12 和 Ruby 2.0.0 时，我该怎么做才能通过测试？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-12T21:51:13.163

对于那些担心升级到 3.2.13 可能会带来一些问题的人，我在初始化文件中添加了这个：

```
# Because of the Ruby 2.0 privatizes the method and  Rails 3.2.12's use of it
# , and because Rails 3.2.13 (which has a fix) also could potentially
# introduce other bugs, we're adding this patch to fix the issue.
#
# Remove this if the project contains Rails >= 3.2.13
module ActiveModel
  class Errors
    public :initialize_dup
  end

  module Validations
    public :initialize_dup
  end
end

class ActiveRecord::Base
  public :initialize_dup
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:03:32.593

它已发布，请使用带有 Rails 3.2.13.rc2 的 Ruby 2.0.0，并在此版本中修复了上述问题 initialize_dup 和更多修复。

[http://weblog.rubyonrails.org/2013/3/7/Rails-3-2-13-rc2-has-been-released/](http://weblog.rubyonrails.org/2013/3/7/Rails-3-2-13-rc2-has-been-released/)

这个对我有用。

# php - 有没有办法从php中的电话号码中找到国家代码？

> ID：15155988
> 
> 赞同：0
> 
> 时间：2013-03-01T10:53:14.843
> 
> 标签：php, mysql

我想从电话号码中查找国家代码，因为电话号码没有国家代码（这是我的输入）
，例如我的电话号码是`9xxxxxxxxx`，我得到的结果是该号码来自印度，然后它将显示`+919xxxxxxxxx`在 php 中。
有没有办法从电话号码中找到国家代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:57:11.060

首先，您需要列出每个国家、其代码以及数字的位数和模式的数据源。然后你需要把它放到一个关联数组中，将每个国家与它的国家代码相匹配。然后你需要一堆 preg_matches 使用正则表达式来确定第一个数字加上正则表达式是否与数组中的国家匹配。您正在谈论一个从头开始编程的庞大项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:57:40.253

您可以构建自己的 PHP 函数进行这样的查找，可以[在 Wikipedia](http://en.wikipedia.org/wiki/List_of_country_calling_codes)上找到所有电话网络号码的列表。如果没有网络号码，则无法跟踪国家/地区，因为国家/地区可以使用相同的电话号码。

# iphone - 如何制作带有登录和设置标题的导航按钮

> ID：15155992
> 
> 赞同：0
> 
> 时间：2013-03-01T10:53:23.613
> 
> 标签：iphone, ipad, uibarbuttonitem

我想在右侧添加两个按钮，两个导航栏，一个用于设置，一个用于登录，但问题是我搜索过的只有一个按钮出现在右侧，即编辑是否有任何其他方式可以制作两个按钮并给出他们想要的头衔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:57:36.660

```
UIBarButtonItem *addAttachButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addAttachmentClicked:)];
UIBarButtonItem *sendButton = [[UIBarButtonItem alloc] initWithTitle:LS(@"Send") style:UIBarButtonItemStyleBordered target:self action:@selector(sendClicked:)];
self.navigationItem.rightBarButtonItems = @[addAttachButton,sendButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:11:36.870

这是我在我的 UIViewController 的实现文件（.m 文件）中使用的代码

```
 -(void)viewDidLoad{

  [super viewDidLoad];

  //back button
  UIBarButtonItem *backButton = [[UIBarButtonItem alloc]initWithTitle:@" Back " style:UIBarButtonItemStyleBordered target:self action:@selector(backTo:)];    

  //Optional: if you want to add space between the back & login buttons
  UIBarButtonItem *fixedSpaceBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace  target:nil action:nil];
           fixedSpaceBarButtonItem.width = 12;

  //login button
  UIBarButtonItem *signIn_BarButton = [[UIBarButtonItem alloc]initWithTitle:@" SIGN IN " style:UIBarButtonItemStyleBordered target:self action:@selector(signInUser)];            

  //add all buttons to right side
  self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:backButton, fixedSpaceBarButtonItem,signIn_BarButton, nil];

} 
```

现在这里是两个按钮点击的方法

```
-(IBAction)backTo:(id)sender{

    [self.navigationController popViewControllerAnimated:YES];    
}

-(void) signInUser{

    //handle your sigin logic here
} 
```

请！如果您需要更多帮助，请告诉我！

# c - 在 Linux 中用 C 语言读取 RS232 串行引脚

> ID：15155997
> 
> 赞同：0
> 
> 时间：2013-03-01T10:53:30.997
> 
> 标签：c, linux, serial-port

是否有可能从 COM 端口的引脚读取值？Linux下的任何C语言解决方案都值得赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:58:26.723

是的，例如参见[本指南](http://www.easysw.com/~mike/serial/serial.html#5_1_1)。

您使用该[`ioctl()`](http://linux.die.net/man/3/ioctl)功能来读取各种控制引脚。当然，最好通过正常`read()`处理读取数据，您不想轮询异步串行数据。

我不认为您的假设（在评论中表示）驱动程序必须检查引脚状态以处理数据是正确的，通常串行端口由[UART](http://en.wikipedia.org/wiki/Universal_asynchronous_receiver/transmitter) “支持”并且通常处理硬件中的 RX/TX 引脚.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:04:33.323

我很确定，你不能读/写 UART 的引脚。即使在硬件级别，您也必须读/写整个字节。没有位访问或读/写引脚访问。字节在接收/发送 UART 缓冲区中读取/写入。

无论哪种方式，您都不能直接访问缓冲区，Linux驱动程序将代表您完成这项工作。您只需要在应用程序中使用驱动程序即可使用 UART，UART 的 linux 驱动程序提供了标准 API，例如 open()、read()、write()、ioctl()，您可以通过这些 API 与 UART 进行交互设备。

如果你想和司机一起工作，并且是这个领域的新手，最好的起点 [就是这本书。](http://lwn.net/Kernel/LDD3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:53:43.657

这个问题的确切答案取决于所讨论的精确硬件。我知道我工作的一段代码，基于接收字母“a”作为比特率的指示，它会轮询 RX 引脚以检测 0 和 1 之间的转换以检测位的“宽度”，然后它将计算串行端口的正确时钟速率并配置串行端口以匹配另一端的比特率。

“PC”类型的硬件解决方案将无法读取 RX/TX 引脚。在其他硬件中，可能会这样做。许多嵌入式系统允许将各种引脚配置为输入、输出或“具有功能”（在我们的例子中，RX、TX、CTS、RTS 等） - 例如，您可以将 RX 引脚配置为输入，并因此读取它的状态。当然，普通的串口驱动程序可能会将这些引脚设置为“具有功能”[或者期望在内核启动之前运行的引导代码具有这种配置方式]。因此，您很可能必须在自己的某些内核代码中重新配置引脚。请注意，这可能会对实际串行端口的驱动程序造成意外的副作用 - 当它尝试对串行端口执行操作时，它可能会“感到不安”并且它是“

您几乎可以肯定地通过 IOCTL 调用读取（和/或写入）控制引脚的状态，例如 CTS、RTS。

# javascript - 数据表中的复杂表头

> ID：15155999
> 
> 赞同：0
> 
> 时间：2013-03-01T10:53:32.863
> 
> 标签：javascript, jquery, datatable

![在此处输入图像描述](../Images/9e49f10664beb7d6fbb03498c0805bfc.png)我有以下格式的json

```
[{"Employe": "",
"otherinfo": "",
"details": {
    "E": "1",
    "B": "1",
    "M": "0",
    "SR": "Yes"
}
}] 
```

我想填充数据表......怎么做......

```
var Table = $('#Table').dataTable({
    "bProcessing": true,
    "sAjaxSource": "Script/values.json",
    "bJQueryUI": true,
    "bAutoWidth": true,
    "aoColumns": [

                    { "mData": "Employee" },
        { "mData": "otherinfo" },
                    { "mData": "details" },
                    { "mData": "E" },
           { "mData": "B" },
           { "mData": "M" },
           { "mData": "SR" },
                ]
}); 
```

它不正确......这里有什么问题

我认为这样的事情可能会有所帮助

```
 { "mData": "details"
                            {
                                "mData": "E",
                                "mData": "B",
                                "mData": "M",
                                "mData": "SR"
                             },
                    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:19:53.117

```
{ "mData": "details.E" },
{ "mData": "details.B" }, 
```