# StackOverflow 问答 12782000-12782999

# java - 如何在没有 Spring XML 上下文文件的情况下自动连接对象？

> ID：12782000
> 
> 赞同：4
> 
> 时间：2012-10-08T12:42:26.410
> 
> 标签：java, spring, jakarta-ee, ioc-container, autowired

我有一个带有`Component`注释的接口和一些实现它的类，如下所示：

```
@Component
public interface A {
}

public class B implements A {
}
public class C implements A {
} 
```

另外，我有一个带有这样的`Autowired`变量的类：

```
public class Collector {
    @Autowired
    private Collection<A> objects;

    public Collection<A> getObjects() {
        return objects;
    }
} 
```

我的上下文文件包含以下定义：

```
<context:component-scan base-package="org.iust.ce.me"></context:component-scan>

<bean id="objectCollector" class="org.iust.ce.me.Collector" autowire="byType"/>

<bean id="b" class="org.iust.ce.me.B"></bean>
<bean id="c" class="org.iust.ce.me.C"></bean> 
```

在主类中，我有一些代码如下：

```
ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
B b = (B) context.getBean("b");
C c = (C) context.getBean("c");
Collector objectCollector = (Collector) context.getBean("objectCollector");

for (A object : objectCollector.getObjects()) {
    System.out.println(object);
} 
```

输出：

```
org.iust.ce.me.B@1142196
org.iust.ce.me.C@a9255c 
```

* * *

这些代码运行良好，但由于某些原因我不愿意使用 xml 上下文文件。除此之外，我更喜欢使用`new`运算符而不是使用`getBean()`方法来创建对象。尽管如此，由于它`AutoWiring`在编程中确实是个好主意，我不想失去它。

现在我有两个问题！！

1.  如何在不使用 xml 上下文文件的情况下`AutoWire`实现接口的类？ 有可能吗？`A`

2.  当我将`scope`bean 从`singlton`更改 `prototype`为如下时：

    `<bean id="b" class="org.iust.ce.me.B" scope="prototype"></bean>`

    并实例化它的几个bean，只有在创建过程中实例化的bean`context`才会`injected`进入`AutoWired`变量。为什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T13:05:39.973

不确定您使用的 Spring 版本。但目前您可以使用`@Configuration`来替换 .xml。看看[@Configuration](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html)

以下是文档中的代码

```
@Configuration
public class ServiceConfig {
    private @Autowired RepositoryConfig repositoryConfig;
    public @Bean TransferService transferService() {
        return new TransferServiceImpl(repositoryConfig.accountRepository());
    }
}

@Configuration
public interface RepositoryConfig {
    @Bean AccountRepository accountRepository();
}

@Configuration
public class DefaultRepositoryConfig implements RepositoryConfig {
    public @Bean AccountRepository accountRepository() {
        return new JdbcAccountRepository(...);
    }
}

@Configuration
@Import({ServiceConfig.class, DefaultRepositoryConfig.class}) // import the concrete config!
public class SystemTestConfig {
    public @Bean DataSource dataSource() { /* return DataSource */ }
}
public static void main(String[] args) {
    ApplicationContext ctx = new AnnotationConfigApplicationContext(SystemTestConfig.class);
    TransferService transferService = ctx.getBean(TransferService.class);
    transferService.transfer(100.00, "A123", "C456");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-18T17:20:06.680

如果要管理的类已正确注释，Spring 可以扫描应用程序的文件以获取所需的信息，而无需任何 xml 或 java 配置文件。

```
AnnotationConfigApplicationContext  context = new AnnotationConfigApplicationContext();
context.scan("com.something.something.etc");
context.refresh();
...context.getBean("name_of_bean"); 
```

Note`AnnotationConfigApplicationContext`被实例化，没有任何参数。`context.scan("...");`接受一个字符串，告诉 Spring 去哪里看。即包

```
*com.something.something.etc.one
com.comthing.something.etc.two*
```

将被扫描，并且这些包中带有`@Component`,`@Autowired`等注释的类将被实例化并在需要的地方注入。

这种方法似乎没有很好的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:00:43.330

1-您需要编写另一个将执行该操作的类。将@Component 写入 B 和 C 类。

```
public static void main(){
    ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");  
    InitClass initClass = (InitClass) context.getBean("initClass");  
}

public class InitClass{  
   @Autowired 
   public B b;

   @Autowired 
   public C c;
} 
```

有了这个，您将在不使用 xml 的情况下获得 B 和 C。

2- [http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html)此处详细提到了 Bean 范围。如果你总是想要一个新对象，你应该使用原型，但创建一个新对象将在不同的类中完成。在同一个类中，您应该添加一个新的引用。

像

```
public class InitClass{
    @Autowired 
    public A a1;

    @Autowired 
    public A a2;

} 
```

# php - 在 Wordpress 中显示相关帖子

> ID：12782002
> 
> 赞同：0
> 
> 时间：2012-10-08T12:42:30.590
> 
> 标签：php, wordpress

我想在 Wordpress 中显示相关帖子。我需要手动选择这些帖子，而不是自动从类别或标签中选择。我以前使用过这段代码：

```
<?php $orig_post = $post;
global $post;
$tags = wp_get_post_tags($post->ID);
if ($tags) {
$tag_ids = array();
foreach($tags as $individual_tag) $tag_ids[] = $individual_tag->term_id;
$args=array(
'tag__in' => $tag_ids,
'post__not_in' => array($post->ID),
'posts_per_page'=>5, // Number of related posts that will be shown.
'caller_get_posts'=>1
);
$my_query = new wp_query( $args );
if( $my_query->have_posts() ) {

echo '<div id="relatedposts"><h3>Related Posts</h3><ul>';

while( $my_query->have_posts() ) {
$my_query->the_post(); ?>

<li><div class="relatedthumb"><a href="<? the_permalink()?>" rel="bookmark"     title="<?php the_title(); ?>"><?php the_post_thumbnail(); ?></a></div>
<div class="relatedcontent">
<h3><a href="<? the_permalink()?>" rel="bookmark" title="<?php the_title(); ?>"><?php  the_title(); ?></a></h3>
<?php the_time('M j, Y') ?>
</div>
</li>
<? }
echo '</ul></div>';
}
}
$post = $orig_post;
wp_reset_query(); ?> 
```

这可以很好地从相关标签中选择，但我需要手动调用我的相关帖子。

我已将要调用的帖子 ID 作为逗号分隔列表放在自定义字段“myrelatedposts”中，例如：103、104、105、122

现在我需要在上面的脚本中调用它们。

如何将此帖子列表分解为数组（仍限制为 5 个帖子）然后调用每个帖子缩略图和标题？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:22:39.337

您应该尝试使用这些参数：

```
$args=array(
  'post__in' => explode(',', get_post_meta($post->ID, 'myrelatedposts')),
  'ignore_sticky_posts'=>1 // caller_get_posts is deprecated
); 
```

要在循环中添加帖子缩略图，您只需使用[帖子缩略图函数](http://codex.wordpress.org/Post_Thumbnails)，例如来自 codex ：

```
// check if the post has a Post Thumbnail assigned to it.
if ( has_post_thumbnail() ) {
    the_post_thumbnail();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:55:29.870

有一个名为 Similar Posts 的插件。

[http://wordpress.org/extend/plugins/similar-posts/](http://wordpress.org/extend/plugins/similar-posts/)

它搜索并匹配帖子内容，而不仅仅是标签。

我认为缺点之一是它运行许多慢速 SQL 查询。

# android - 智能手机震荡器应用程序

> ID：12782005
> 
> 赞同：1
> 
> 时间：2012-10-08T12:42:39.860
> 
> 标签：android

我想制作一个 android 应用程序，当它到达预定义的 GPS 位置时，它会执行一个操作（发送消息或播放声音）

我可以制作一个将在后台运行的后台服务，但是在上网时我发现了这个应用程序[http://smartphone.bartinger.at/](http://smartphone.bartinger.at/)

您可以在其中设置条件并在满足此条件时调整设置。它在网站上说“不仅仅是一个不断检查条件是否适用的后台服务。几乎所有条件都由Android的功能处理。智能手机正在使用这些功能，因此它们不需要在后台运行并且不会耗尽你的电池。”

很明显我的问题是，ift 不是后台服务，那它是什么？我正在编写功能是什么意思？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:55:32.317

您是对的：如果您运行的服务每次都检查是否满足条件，那么您将耗尽电池（当然取决于检查）。这就是为什么你应该尽可能使用 BroadcastReceivers 的原因。看看[这个](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:02:14.100

您不需要运行后台服务来检查用户位置更新。通过[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html)类并为您的场景调用适当的 requestLocationUpdate 变体，它将在位置更改时通知，在 LocationListener 中，您可以区分该位置是否是您感兴趣的。

# java - 在 Java 中调用枚举

> ID：12782010
> 
> 赞同：0
> 
> 时间：2012-10-08T12:42:48.673
> 
> 标签：java, enums, invoke

假设我的枚举中有许多字段（`String`或`int`）`Java`，并且我想通过其名称动态获取字段值。

```
public enum Code {

    FIRST("valueForFirst"),
    SECOND("valueForSecond");
    // etc
} 
```

然后我得到我想要的字段的名称：

```
String fieldName = getEnumFieldName(); // can be: "FIRST" or "SECOND" 
// now get "fieldName"'s value from Code 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:46:51.870

您需要使用`Enum.valueOf();`例如：

```
Code c = Code.valueOf(Code.class, fieldName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:44:54.773

如果您从其他地方以字符串形式获取字段的名称，您可以使用`valueOf()`方法获取 Enum 实例。但是，首先您需要将字符串全部转换为大写。

```
String fieldName = getEnumFieldName();
Code first = Code.valueOf(fieldName);
String value = first.getValue(); 
```

**阅读本教程**- [http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)以获取有关如何使用`Enums`..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T12:46:02.473

您可以像这样定义您的枚举：

```
public enum Code {

    private String value;

    public Code(String value) {
       this.value = value;
    }

    public String getValue() {
       return value;
    }

    FIRST("valueForFirst"),
    SECOND("valueForSecond");
} 
```

然后像这样使用它：

```
Code code = Code.FIRST;
String val = code.getValue(); 
```

或像这样：

```
String key = "FIRST";
Code code = Code.valueOf(key);
String val = code.getValue(); 
```

如果您想从代码中获得“第一”，只需执行

```
String name = code.name(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T12:48:05.873

您可以`valueOf()`在枚举上使用该方法。

```
String fieldName = "FIRST"; // or "SECOND" 
Code c = Code.valueOf(fieldName); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:47:11.153

这是我使用的模式：

```
enum X {
    A("a"), B("b"), ...;

    private final static Map<String,X> MAP = new HashMap<String,X>();
    static {
        for( X elem: X.values() ) {
            if( null != MAP.put( elem.getValue(), elem ) ) {
                throw new IllegalArgumentException( "Duplicate value " + elem.getValue() );
            }
        }
    }

    private final String value;

    private X(String value) { this.value = value; }
    public String getValue() { return value; }

    // You may want to throw an error here if the map doesn't contain the key
    public static X byValue( String value ) { return MAP.get( value ); } 
} 
```

在声明内部的块中访问`enum`类型的实例看起来有点奇怪，但这段代码有效。`static``enum`

在您的情况下，可能看起来像这样：

```
String fieldName = Code.valueOf(Code.class).getValue(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T12:49:15.503

```
 public enum Code {

        FIRST("valueForFirst"),
        SECOND("valueForSecond");

    }

    public class Test{

       Code c;

       public static void main(String[] args){

        Test t = new Test();

        String val = t.c.FIRST.getValue();

        }

  } 
```

# javascript - 谷歌地图 API - Twitter 提要

> ID：12782018
> 
> 赞同：1
> 
> 时间：2012-10-08T12:43:19.400
> 
> 标签：javascript, google-maps-api-3, twitter

我的网站使用 PHP、mySQL、Javascript 和 Google Maps API。每个标记都是一个位置（显然！），并且具有加载到页面上的 2 个 DIV 中的信息。我想做的是为每个地点添加一个 Twitter 提要，这些地点主要是夜总会。我已经为这些位置创建了条目，并且 Twitter 用户名可以打印在页面上（作为测试）。不知何故，我需要成功集成 Twitter 提供的 Timeline 小部件：

```
<a class="twitter-timeline" href="https://twitter.com/" + twitter + " data-widget-id="255281308568272896">Tweets by @" + name + "</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

进入我的第二个 HTML 变量：

```
var html2 = "<div class=loc-desc><h2>Description</h2>" + desc + "</div><div class=loc-wevents><h2>Weekly Events</h2>" + weeklydeals + "</div>"; 
```

对于那些熟悉 API 及其变量放置的人，您会注意到我已经为第二个 HTML 变量奠定了变量基础。在这种情况下，“twitter”是 Twitter 用户名（不带 @ 存储），“name”是位置的名称。（以防万一需要澄清！）

这是我最初尝试的：

```
var html2 = "<div class=loc-desc><h2>Description</h2>" + desc + "</div><div class=loc-wevents><h2>Weekly Events</h2>" + weeklydeals + "</div><a class=twitter-timeline href=https://twitter.com/ + twitter + " data-widget-id=255281308568272896>Tweets by " + name + "</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=//platform.twitter.com/widgets.js;fjs.parentNode.insertBefore(js,fjs);}}(document,script,twitter-wjs);</script>"; 
```

我遇到的问题是，由于 twitter 函数中的分号，Javasript 会抛出一个嘶嘶声。

我确实尝试将函数与 twitter 给我的代码块分开，但它变得非常混乱，我认为小部件可能是 JSON，或者至少是与 Javascript 不同的东西。

这是我尝试的：

```
function twitter(d,s,id){
var js,fjs=d.getElementsByTagName(s)[0];
if(!d.getElementById(id)){
    js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);
    }
}
    (document,"script","twitter-wjs"); 
```

然后我尝试将该函数附加到第二个 HTML 区域中的位，尽管我很确定这不是应该如何完成的：

```
var html2 = "<div class=loc-desc><h2>Description</h2>" + desc + "</div><div class=loc-wevents><h2>Weekly Events</h2>" + weeklydeals + "</div><a onload=twitter() class=twitter-timeline href=https://twitter.com/" + twitter + " data-widget-id=255281308568272896>Tweets by" + name + "(@" + twitter ")</a>"; 
```

我想要的是对 Javascript 有更深入了解的人为我指明正确的方向。据我了解，由于需要分号，因此在 HTML 区域中拥有整个功能将无法正常工作，这会在我的控制台中引发错误。

任何帮助都会很棒，一如既往

特里斯坦

# java - 如何在 Spring Data JPA 中将分页与条件查询结合起来？

> ID：12782023
> 
> 赞同：16
> 
> 时间：2012-10-08T12:43:41.180
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

我使用 PagingAndSortingRepository 和 findAll(Pageable pageable) 方法来分页我的数据。我认为没有办法提供任何条件。例如，有时我想选择和寻呼 city=NY 的地址。有没有办法同时提供条件和分页？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T06:07:48.507

`PagingAndSortingRepository`只是在分页模式下添加了非常基本的 CRUD 方法。正如[参考文档](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.special-parameters)所描述的，您可以简单地将`Pageable`参数添加到您定义的任何查询方法中，以实现此查询的分页。

```
interface CustomerRepository implements Repository<Customer, Long> {

  Page<Customer> findByLastname(String lastname, Pageable pageable);

  List<Customer> findByFirstname(String firstname, Pageable pageable);
} 
```

第一种方法将返回一个`Page`包含页面元数据（例如可用元素总数等）的值。要计算此数据，它将触发派生查询的附加计数查询。第二个查询方法返回未执行计数查询的普通切片结果集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T14:08:53.323

对于分页，您需要 2 个方法，例如 getCount(Pageable pageable) 和 findAll(Pageable pageable)

然而，在 Hibernate 中使用这个功能是微不足道的。如果您有任何 HQL 查询，您可以简单地执行以下操作：

```
public Long getCount(Pageable pageable) {
    Query q = session.createQuery("Select count(t) From TableClass  t where t.city = 'NY'");
    Long cnt = (Long) q.uniqueResult();
    return cnt;
}

public List<TableClass> findAll(Pageable pageable) {
     Query q = session.createQuery("From TableClass  t where t.city = 'NY'");
     q.setFirstResult(start);
     q.setMaxResults(length);
     List<TableClass> tableClasslist = q.list();
     return tableClasslist;
} 
```

同样，如果您有一个 Criteria 查询，它实际上是同一件事：

```
public Long getCount(Pageable pageable) {
    Criteria c = session.createCriteria(TableClass.class);
    c.setProjection(Projections.rowCount()); 
    Long cnt = (Long) c.uniqueResult();
    return cnt;
}

public List<TableClass> findAll(Pageable pageable) {
    Criteria c = session.createCriteria(TableClass.class);
    c.setParameter("city","NY");
    c.setFirstResult(start);
    c.setMaxResults(length);
    List<TableClass> tableClasslist = c.list();
    return tableClasslist ;
} 
```

# c# - 如何将蓝牙 4.0 / 智能 / 低功耗设备与 Windows 7 连接

> ID：12782026
> 
> 赞同：6
> 
> 时间：2012-10-08T12:43:51.333
> 
> 标签：c#, windows, bluetooth, bluetooth-lowenergy

我想编写从 BLE 设备接收一些日期然后将数据写入文件的 C# 应用程序。我在[这里](http://processors.wiki.ti.com/index.php/Category:HealthDemo)找到了示例，但它在我的计算机上不起作用。首先它说“失败的COM端口打开”。实际上`SerialPort.GetPortNames();`返回null。当我在设置标签页上使用扫描时，找不到任何设备。所以我不明白如何连接它们。有人可以向我解释吗？

# python - 为 C 库生成 Python SWIG 绑定时未定义的符号

> ID：12782027
> 
> 赞同：1
> 
> 时间：2012-10-08T12:43:57.863
> 
> 标签：python, python-2.7, swig, ld

我正在尝试与 Python 中的 mdb 库交互，使用 SWIG 根据 mdb 附带的头文件生成绑定。这是我第一次尝试这样做，当最终在 python 中加载共享库时，我遇到了一个未定义的符号。

这是我的接口定义文件：

```
$ cat pymdb.i
%module pymdb
%{
#include "mdbtools.h"
%}
%include "mdbtools.h" 
```

生成 C 代码会引发以下警告：

```
$ swig -python -o pymdb.c -I/usr/include pymdb.i
/usr/include/mdbtools.h:187: Warning 451: Setting a const char * variable may leak memory.
/usr/include/mdbtools.h:188: Warning 451: Setting a const char * variable may leak memory.
/usr/include/mdbtools.h:189: Warning 451: Setting a const char * variable may leak memory.
/usr/include/mdbtools.h:190: Warning 451: Setting a const char * variable may leak memory.
/usr/include/mdbtools.h:191: Warning 451: Setting a const char * variable may leak memory.
/usr/include/mdbtools.h:192: Warning 451: Setting a const char * variable may leak memory.
/usr/include/mdbtools.h:193: Warning 451: Setting a const char * variable may leak memory. 
```

编译 C 代码，一切看起来都很好：

```
$ gcc -c -fPIC -I/usr/include/python2.7 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include pymdb.c -o pymdb.o 
```

将其链接到 /usr/lib/x86_64-linux-gnu/libmdb.so.2.0.0 文件（Debian 多架构）：

```
$ ld -shared -lmdb pymdb.o -o _pymdb.so 
```

这就是我得到未定义符号的地方，在python中加载.so：

```
$ echo "import pymdb" |python
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "pymdb.py", line 26, in <module>
    _pymdb = swig_import_helper()
  File "pymdb.py", line 22, in swig_import_helper
    _mod = imp.load_module('_pymdb', fp, pathname, description)
ImportError: ./_pymdb.so: undefined symbol: read_pg_if_16 
```

mdbtools.h 中有 read_pg_if_16 的声明：

```
extern guint16 read_pg_if_16(MdbHandle *mdb, int *cur_pos); 
```

我可以在 _pymdb.so 文件表中看到未定义的符号：

```
$ objdump -T _pymdb.so |grep read_pg_if_16
0000000000000000      D  *UND*  0000000000000000 read_pg_if_16 
```

但 libmdb.so.2 不提供此符号：

```
$ objdump -T /usr/lib/x86_64-linux-gnu/libmdb.so.2 |grep read_pg_if_16 
```

会不会是我的接口文件中的错误？或者这可能是 libmdb.so.2 的问题，没有暴露这个符号？我对 C 和链接的东西没有那么深入，所以在这一点上我对如何着手解决这个问题有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T08:05:17.227

一个可能性是在头文件中声明了一个函数，但在目标文件中没有定义。这在 C 中可以正常工作，其中包含未引用的声明不是问题，但是当 swig 包装声明时，它将创建一个引用，从而导致共享库无法加载。

# java - 使用 JPA/Hibernate 构造函数表达式防止“n+1 选择”？

> ID：12782029
> 
> 赞同：2
> 
> 时间：2012-10-08T12:44:16.747
> 
> 标签：java, hibernate, jpa, select-n-plus-1

我有两个实体，`Item`and`Data`和一个 DTO 类`ItemData`。`ItemData`包含`Item`并且`Data`没有 JPA 映射。为了检索填充的 ItemDatas 列表，我在 JPQL 中使用了构造函数表达式：

```
select new my.package.ItemData(i, d)
from Item i, Data d
where i.id = d.itemId 
```

这就是 Hibernate 正在做的事情：它不是同时获取 和 的数据`Item`，`Data`而是先获取它们的 ID，然后在*n 个*单独的 select 语句中获取数据。有没有办法改变这种行为？

```
Hibernate:
    select
        item0_.id as col_0_0_,
        data1_.id as col_1_0_ 
    from
        ITEM item0_,
        DATA data1_

Hibernate: 
    select
        item0_.no as no1_0_,
        item0_.description as description1_0_,
        item0_.organic as bio1_0_,
        item0_.gluten as gluten1_0_,
        item0_.laktose as laktose1_0_
    from
        ITEM item0_ 
    where
        item0_.id=?

Hibernate: 
    select
        data0_.amount as amount1_3_0_,
        data0_.avg as avg3_0_,
        data0_.total as total3_0_
    from
        DATA data0_ 
    where
        data0_.id=?

Hibernate: 
    select
        item0_.no as no1_0_,
        item0_.description as description1_0_,
        item0_.organic as bio1_0_,
        item0_.gluten as gluten1_0_,
        item0_.laktose as laktose1_0_
    from
        ITEM item0_ 
    where
        item0_.id=?

Hibernate: 
    select
        data0_.amount as amount1_3_0_,
        data0_.avg as avg3_0_,
        data0_.total as total3_0_
    from
        DATA data0_ 
    where
        data0_.id=?

...and so on... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:50:15.627

那么使用左连接提取呢？
我承认我没有使用 CTOR 表达式，但是当我需要获取父实体及其子实体时，我使用了 left join fetch，它总是很有效。
我只能假设，因为我们在这里处理对象的构造，
Hibernate 不“想要”留下一个“部分构造”的对象（或者说 - 一个处于“惰性评估状态”的对象），因为你没有使用“left join fetch”执行“eager fetch”，它执行 N+1 次获取：
首先它获取所有 ID，然后对于每个相关 ID，它执行另一个获取。[在此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)
阅读有关左连接提取的更多信息（只需在页面上查找“左连接提取”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T07:15:39.993

这是[Blaze-Persistence Entity Views](https://github.com/Blazebit/blaze-persistence#entity-view-usage)的完美用例。

我创建了该库以允许在 JPA 模型和自定义接口或抽象类定义模型之间轻松映射，例如 Spring Data Projections on steroids。这个想法是您以您喜欢的方式定义您的目标结构（域模型），并通过 JPQL 表达式将属性（getter）映射到实体模型。

我想你的实体模型看起来像这样？

```
@Entity
class Item {
  @Id Long id;
  String description;
  @OneToMany(mappedBy = "item")
  Data data;
  ...
}
@Entity
class Data {
  @Id Long id;
  @ManyToOne Item item;
  Long amount;
  BigDecimal avg;
  ...
} 
```

使用 Blaze-Persistence Entity-Views 的用例的 DTO 模型可能如下所示：

```
@EntityView(Item.class)
public interface ItemData {
    @IdMapping
    Long getNo();
    String getDescription();
    @Mapping("SUM(data.amount)")
    Long getAmount();
} 
```

查询是将实体视图应用于查询的问题，最简单的就是通过 id 进行查询。

`ItemData a = entityViewManager.find(entityManager, ItemData.class, id);`

Spring Data 集成允许您几乎像 Spring Data Projections 一样使用它：[https ://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features](https://persistence.blazebit.com/documentation/entity-view/manual/en_US/index.html#spring-data-features)

# javascript - JavaScript 更改 ID 不起作用

> ID：12782032
> 
> 赞同：0
> 
> 时间：2012-10-08T12:44:39.640
> 
> 标签：javascript, html, css

我似乎无法使用该功能`changeTab(num)`将 li 元素的 ID 从 更改`number`为`selected`，并将所选选项卡的 ID 恢复为其默认编号。它只工作一两次，然后停止。我的目标是模仿选定和未选定选项卡的变化，例如在 Chrome 选项卡中。

```
<ul id="nav">
                    <li onClick="changeTab(1);" id="1"><a  href="#">Nav 1</a></li>
                    <li onClick="changeTab(2);" id="2"><a  href="#">Nav 2</a></li>
                    <li onClick="changeTab(3);" id="selected"><a href="#">Nav 3</a></li>
                    <li onClick="changeTab(4);" id="4"><a  href="#">Nav 4</a></li>
</ul> 
```

我的 JavaScript 代码是：

```
function changeTab(num){

    switch(num){
        case 1:
            document.getElementById("selected").id = "1";
            break;
        case 2:
            document.getElementById("selected").id = "2";
            break;
        case 3:
            document.getElementById("selected").id = "3";
            break;
        case 4:
            document.getElementById("selected").id = "4";
            break;
        default:
            document.getElementById("selected").color = "";
    }

    //
    document.getElementById(num).id = "selected"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:56:28.377

**按照 WTK 的建议进行编辑**（作为您上面问题中的评论），使其成为有效的 HTML，id 值必须以字母而不是数字开头......我已经通过在 id 前面加上`nav-`. ..

```
<ul id="nav">
    <li onclick="changeTab(this);" id="nav-1"><a  href="#">Nav 1</a></li>
    <li onclick="changeTab(this);" id="nav-2"><a  href="#">Nav 2</a></li>
    <li onclick="changeTab(this);" id="selected"><a href="#">Nav 3</a></li>
    <li onclick="changeTab(this);" id="nav-4"><a  href="#">Nav 4</a></li>
</ul> 
```

在 onclick 处理程序中使用`this`变量将获得被单击的元素...然后您可以使用以下函数作为处理程序...

```
function changeTab(el) {
  // This function is passed 'el' from the onclick handler of the li. The
  // onclick handler passes 'this' through as the 'el' argument. 'el' will 
  // be a HTMLElement object. 

  // We only want to do something if the 'el' HTMLElement object does not
  // currently have the 'id' "selected", otherwise we do nothing.
  if(el.id != "selected") {
    // Revert all tabs to their original ids

    // Try and find the HTMLElement with the id "nav". The variable 'nav'
    // will be another HTMLElement object, this time representing the ul element.
    var nav = document.getElementById("nav");

    // The function 'getElementsByTagName' always returns a 
    // HTMLElementCollection, it might have zero elements if there were no
    // matches. We can use it as an array (although there are things to
    // take into consideration that affect performance). The 
    // HTMLElementCollection will contain all li elements that are 
    // descendants of the 'nav' ul element
    var lis = nav.getElementsByTagName("li");

    // Here we do a for-loop to iterate through the element collection
    // each item in the HTMLElementCollection will be a HTMLElement
    // representing one of the li elements
    for(var i = 0; i < lis.length; ++i) { // Arrays are zero-indexed

      // We set the id to nav-n overwriting whatever was there previously
      lis[i].id = "nav-" + (i + 1); // Our tabs are one-indexed
    }

    // Set the id for the original HTMLElement that was passed into the
    // function to "selected", we do this step last as one of the li HTMLElements
    // we change in the for-loop above will also be this HTMLElement
    el.id = "selected";
  }
} 
```

还有其他可能更好的方法来做到这一点。不过，这应该可以解决问题，如果您想更深入地研究，我会推荐这本书 Pro JavaScript Design Patterns。

# c# - 具有 Outlook 互操作性的 OpenSharedItem 在 Office 2003 中引发奇怪的异常，适用于 Office 2008

> ID：12782033
> 
> 赞同：3
> 
> 时间：2012-10-08T12:44:41.257
> 
> 标签：c#, .net, office-interop, outlook-2003

我正在使用 Office 互操作 API 打开从 Outlook 保存的 .msg 文件，然后显示一个回复窗口以允许用户回复它。

运行 Office 2003 时，OpenSharedItem(pathToMSGFile); 调用抛出以下异常：

```
Unhandled Exception: System.AccessViolationException: Attempted to read or write
  protected memory. This is often an indication that other memory is corrupt.
  at Microsoft.Office.Interop.Outlook._NameSpace.OpenSharedItem(String Path)
  at OutlookTest.Program.Main(String[] args) 
```

运行 Office 2008 时，它工作得非常好。

我整理了一个小测试用例，代码如下：

```
static void Main(string[] args)
{
    try
    {
        Application app;
        string pathToMSGFile = "\\\\path\\to\\foobar.msg";

        if (args.Length > 0)
        {
            pathToMSGFile = args[0];
        }

        if (!File.Exists(pathToMSGFile))
        {
            Console.WriteLine("{0} does not exist.", pathToMSGFile);
            return;
        }

        Console.WriteLine("Opening {0}", pathToMSGFile);

        Type olType = Type.GetTypeFromProgID("Outlook.Application", false);

        app = Activator.CreateInstance(olType) as Application;

        MailItem fld = (MailItem)app.Session.OpenSharedItem(pathToMSGFile);

        _MailItem reply = fld.ReplyAll();
        reply.Save();
        reply.Display(false);

        Console.ReadKey();

        reply.Close(OlInspectorClose.olDiscard);
    }
    catch (System.Exception ex)
    {
        Console.WriteLine(ex.ToString());

        if (ex.InnerException != null)
        {
            Console.WriteLine(ex.InnerException.ToString());
        }
    }

    Console.ReadKey();
} 
```

该应用程序的目标是 .Net 4，使用 Office12 互操作库。无论是为 AnyCPU 还是 x86 编译，都会发生同样的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:04:31.180

我注意到互操作库的版本 11 不包含`OpenSharedItem()`方法。

它从版本 12 开始可用。

似乎此操作在 Office 11/2003 上不可用（至少不能通过任何版本的互操作库上的该方法调用）。

* * *

我不确定这是否适合您的方案，但我在 Outlook Redemption 库方面取得了很好的成功。

从[什么是 Outlook 赎回？](http://www.dimastr.com/redemption/home.htm)：

> Outlook Redemption 解决了 Outlook 安全补丁所施加的限制，并且提供了许多对象和函数来处理未通过 Outlook 对象模型公开的属性和功能。
> 
> Redemption 库还包括 RDO（Redemption Data Objects）对象系列，可用作完整的 CDO 1.21 或 Outlook 对象模型替代品。

它似乎规避了这些奇怪/不一致的行为中的一些 b/w 不同版本的 Outlook（通过设计或作为原始目标的“副作用”）。

如果您熟悉 CDO，那么您会对 RDO 感到满意。但老实说，我不知道它如何“映射”到 Microsoft.Office.Interop.Outlook。

参考[http://www.dimastr.com/redemption/rdo/rdosession.htm](http://www.dimastr.com/redemption/rdo/rdosession.htm)

的等效 RDO 函数`Session.OpenSharedItem()`是`RDOSession.GetMessageFromMsgFile()`。

注意我与这个产品没有任何关系，除了我偶尔使用它！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:31:16.220

当您尝试保存包含大量附件的邮件时，会出现此问题。当您在 Outlook 中找到消息时，菜单文件 -> saveas 也会出现相同的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T12:34:47.933

可以从 Outlook 2003 office 读取电子邮件，但不能从路径（到 .msg 文件）读取电子邮件，但我们可以将 Outlook 文件夹（默认/其他文件夹）中的电子邮件作为 Mail-Items 对象读取。

如果它在 COM 对象 12.0 Outlook 对象库中编码并用于 Office 2003（具有 Outlook 11.0 对象库），显然它不会工作！

`The Error: Attempted to read or write protected memory. This is often an indication that other memory is corrupt` 主要发生在缺少**.dll文件的情况下，因此最好放置相关的****.dll**文件或安装升级后的 Office 2007、2010。这解决了它。

我们可以使用如下所示的方法从更高版本的office（如office 2007、2010等）读取电子邮件。

```
outlook._Application X=new Outlook.Application();
Outlook.MAPIFolder=;  //...... Default Folderof outlook
String Path="......\...\temp.msg";
Outlook._MailItem Mail=(Outlook.MailItem)(X.Session.OpenSharedItem(Path); 
```

您可以访问邮件并对其进行编程。

# javascript - 如何使用 Google Maps API V3 制作显示边界的简单邮政编码地图？

> ID：12782034
> 
> 赞同：11
> 
> 时间：2012-10-08T12:44:43.177
> 
> 标签：javascript, google-maps-api-3

我需要显示一个带有显示其边界的邮政编码的交互式地图，并且邮政编码具有不同的颜色，如下所示：

[http://www.usnaviguide.com/zip.htm](http://www.usnaviguide.com/zip.htm)

输入美国邮政编码，然后单击“查找邮政编码”。

也许我忽略了它，但我还没有在 Google Maps API 文档中找到这方面的示例和专门讨论此内容的文档。我正在尝试在上面的网页链接上查看源代码，但对我来说它是如何工作的似乎并不明显。页面上还有其他东西，我不知道它是否是我需要的一部分。

一些简单的代码示例将非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T13:15:24.427

这是我与 FusionTablesLayers 放在一起的美国邮政编码地图：

[http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map.html](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map.html)

它没有不同的颜色，但你可以改变它。

John Coryat 使用图块服务器制作了该地图，您可以使用 Google Maps API v3 自定义地图进行相同操作。

**示例中的代码片段：**

```
google.load('visualization', '1', {'packages':['corechart', 'table', 'geomap']});
var map;
var labels = [];
var layer;
var tableid =  1499916;

function initialize() {
    geocoder = new google.maps.Geocoder();
  	map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: new google.maps.LatLng(37.23032838760389, -118.65234375),
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  layer = new google.maps.FusionTablesLayer(tableid);
  layer.setQuery("SELECT 'geometry' FROM " + tableid);
  layer.setMap(map);

  codeAddress("11501" /*document.getElementById("address").value*/ );

  google.maps.event.addListener(map, "bounds_changed", function() {
    displayZips();
  });
  google.maps.event.addListener(map, "zoom_changed", function() {
    if (map.getZoom() < 11) {
      for (var i=0; i<labels.length; i++) {
        labels[i].setMap(null);
      }
    }
  });
}

function codeAddress(address) {
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map, 
            position: results[0].geometry.location
        });
        if (results[0].geometry.viewport) 
          map.fitBounds(results[0].geometry.viewport);
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

function displayZips() {
  //set the query using the current bounds
  var queryStr = "SELECT geometry, ZIP, latitude, longitude FROM "+ tableid + " WHERE ST_INTERSECTS(geometry, RECTANGLE(LATLNG"+map.getBounds().getSouthWest()+",LATLNG"+map.getBounds().getNorthEast()+"))";   
  var queryText = encodeURIComponent(queryStr);
  var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);
  // alert(queryStr);

  //set the callback function
  query.send(displayZipText);

}

  var infowindow = new google.maps.InfoWindow();

function displayZipText(response) {
if (!response) {
  alert('no response');
  return;
}
if (response.isError()) {
  alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
  return;
} 
  if (map.getZoom() < 11) return;
  FTresponse = response;
  //for more information on the response object, see the documentation
  //http://code.google.com/apis/visualization/documentation/reference.html#QueryResponse
  numRows = response.getDataTable().getNumberOfRows();
  numCols = response.getDataTable().getNumberOfColumns();
/*  var queryStr = "SELECT geometry, ZIP, latitude, longitude FROM "+ tableid + " WHERE ST_INTERSECTS(geometry, RECTANGLE(LATLNG"+map.getBounds().getSouthWest()+",LATLNG"+map.getBounds().getNorthEast()+"))";   
*/

  for(i = 0; i < numRows; i++) {
      var zip = response.getDataTable().getValue(i, 1);
      var zipStr = zip.toString()
      while (zipStr.length < 5) { zipStr = '0' + zipStr; }
      var point = new google.maps.LatLng(
          parseFloat(response.getDataTable().getValue(i, 2)),
          parseFloat(response.getDataTable().getValue(i, 3)));
      // bounds.extend(point);
      labels.push(new InfoBox({
	 content: zipStr
	,boxStyle: {
	   border: "1px solid black"
	  ,textAlign: "center"
          ,backgroundColor:"white"
	  ,fontSize: "8pt"
	  ,width: "50px"
	 }
	,disableAutoPan: true
	,pixelOffset: new google.maps.Size(-25, 0)
	,position: point
	,closeBoxURL: ""
	,isHidden: false
	,enableEventPropagation: true
      }));
      labels[labels.length-1].open(map);
  }
  // zoom to the bounds
  // map.fitBounds(bounds);
}

google.maps.event.addDomListener(window,'load',initialize);
```

```
#map_canvas { width: 610px; height: 400px; }
```

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>         
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>
<script type="text/javascript" src="http://geoxml3.googlecode.com/svn/branches/polys/geoxml3.js"></script>

<form> 
 	    <span class="style51"><span class="style49">Show</span>:</span> 
<input id="address" type="text" value="11501" ></input>
<input id="geocode" type="button" onclick="codeAddress(document.getElementById('address').value);" value="Geocode"></input>	  
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:18:22.947

要绘制区域，您可以使用谷歌地图 API 中的[多边形](https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-simple)，但您需要您想要绘制的州或城市或邮政编码的边界数据。

您可以在该多边形示例中使用查看源代码，如果您已经使用 Google 地图，您只需将 Polygon Obj 传递给[LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng) objs 数组，就可以轻松完成

关于数据，我认为您可以在这样的[融合表](https://www.google.com/fusiontables/DataSource?docid=1Lae-86jeUDLmA6-8APDDqazlTOy1GsTXh28DAkw)中找到它，该表适用于美国邮政编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T22:33:43.100

我在寻找可以在网站上使用的邮政编码地图时遇到了同样的问题。我偶然发现了这个有点慢但完全符合我的要求的免费项目： [http ://www.openheatmap.com/](http://www.openheatmap.com/)

非常适合个人使用，向用户展示时不太好。如果有人和我有同样的情况，我希望这能帮助他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-24T15:04:50.763

一个简单的 API 来获得你想要的东西： [https ://www.mashape.com/vanitysoft/boundaries-io](https://www.mashape.com/vanitysoft/boundaries-io)

上面的 API 按邮政编码、城市和州显示美国边界（GeoJson）。您应该以编程方式使用 API 来处理大型结果。

例如： ![华盛顿特区，所有邮政编码都在边界内](../Images/d595b2e543ef8123e525eed1b0a24365.png)

# hook - 是否可以在 Trac Wiki 中启用挂钩？

> ID：12782035
> 
> 赞同：0
> 
> 时间：2012-10-08T12:44:44.820
> 
> 标签：hook, wiki, trac

我只是想知道有没有办法为 Trac 中的默认 wiki 编辑操作添加挂钩。为简单起见，让我们想象一下我想要有类似 pre-commit 钩子来编辑页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T22:55:58.953

Trac wiki 文档作为[ExtensionPoint 接口的详尽列表](http://trac.edgewall.org/wiki/TracDev/PluginDevelopment/ExtensionPoints)。实现相应接口的启用的 Trac 组件可能适用于各种事情。

关于您的请求，应该使用[IWikiPageManipulator ：](http://trac.edgewall.org/wiki/TracDev/PluginDevelopment/ExtensionPoints/trac.wiki.api.IWikiPageManipulator)

> IWikiPageManipulator 可以在保存或呈现之前操作和验证 wiki 页面。

# java - 如果标记不存在，Java SVNKit 标记？

> ID：12782036
> 
> 赞同：0
> 
> 时间：2012-10-08T12:44:51.117
> 
> 标签：java, tags, svnkit

我用于我的小型项目 Java SVNKit（用于标记）：

目前及其工作：

```
public void copy(String branchName, String dstTag, boolean isMove, String msg) throws SVNException, IOException {
    String finalURL = getSvnUrl() + "tags/" + dstTag;
    URL url = new URL(finalURL);
    String loginPassword = getUsername() + ":" + getPassword();

    String encoded = EncodingUtil.getAsciiString(Base64.encodeBase64(EncodingUtil.getAsciiBytes(loginPassword)));
    URLConnection conn = url.openConnection();
    conn.setRequestProperty("Authorization", "Basic " + encoded);
    HttpURLConnection urlConnect = null;
    try {
        urlConnect = (HttpURLConnection)conn;
        if (urlConnect.getResponseCode() != HttpURLConnection.HTTP_OK) {
            ourClientManager.getCopyClient().doCopy(SVNURL.parseURIDecoded(getSvnUrl() + branchName),
                    SVNRevision.HEAD, SVNURL.parseURIDecoded(finalURL), isMove, msg);
            LOGGER.info("svn-tagging " + dstTag);
        } else
            LOGGER.info(dstTag + " Tag exists.");

    } finally {
        if (urlConnect != null) {
            urlConnect.disconnect();
        }
    }
} 
```

我想检查标签是否存在，我想用`SVNRepository`and`SVNClientManager`和 not做/使用`HttpURLConnection.HTTP_OK`，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:54:27.823

我会使用新的“操作” [API](http://svnkit.com/javadoc/index.html)：

```
public static void main(String[] args) throws SVNException {
    final SvnList list = new SvnOperationFactory().createList();
    list.setSingleTarget(SvnTarget.fromURL(SVNURL.parseURIEncoded("http://svn.apache.org/repos/asf/spamassassin/tags")));
    list.setReceiver(new ISvnObjectReceiver<SVNDirEntry>() {
        public void receive(SvnTarget target, SVNDirEntry object) throws SVNException {
            System.out.println(object.getName());
        }
    });
    list.run();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T12:28:18.490

正如@mstrap 建议的那样，我也喜欢使用使用[SvnOperationFactory](http://svnkit.com/javadoc/org/tmatesoft/svn/core/wc2/SvnOperationFactory.html)的操作 API创建然后运行的操作。这是我在我的 gradle 脚本中用于标记项目的 Groovy 代码，它可以很容易地适应 Java 代码。

我使用了 try/catch 构造来避免覆盖标记，因为 SvnList 给了我一个带有*FS_NOT_FOUND*错误的 SVNException，而不是一个空列表或 null。这样我为自己节省了一个单独的操作。

workingCopyUrl是当前工作副本项目文件夹的 SVN 服务器上的 url，例如 myhost/svnprojects/projectName **。**请务必使用服务器版本作为源，否则您最终可能会复制服务器上不存在的修订版。但是，如果您不检查您是否事先提交了所有内容，您将标记一个与您的工作副本不同的版本！

subDir是**项目***中*的子目录，例如 projectName/branches/Featurebranch 或 projectName/trunk。

```
import org.tmatesoft.svn.core.wc.*
import org.tmatesoft.svn.core.wc2.*
import org.tmatesoft.svn.core.*
def tagSVN(projectName, workingCopyUrl, subDir, tagName) {
    final SvnOperationFactory svnOperationFactory = new SvnOperationFactory();
    final defaultAuthManager =  SVNWCUtil.createDefaultAuthenticationManager("username", "password")
    svnOperationFactory.setAuthenticationManager(defaultAuthManager)

    try {
        final SvnRemoteCopy tagOperation = svnOperationFactory.createRemoteCopy();      

        // Setup source (Working copy + subDir which may be trunk or a tag or a branch or any other sub-directory) 
        def sourceFolder = workingCopyUrl + '/' + subDir
        def SVNURL sourceURL = SVNURL.parseURIEncoded(sourceFolder)
        def SvnCopySource source = SvnCopySource.create(SvnTarget.fromURL(sourceURL), SVNRevision.HEAD)
        tagOperation.addCopySource(source)

        // Setup destination (SVN Server)
        def tagDestinationPath = workingCopyUrl + "/tags/" + tagName
        def SVNURL destinationURL = SVNURL.parseURIEncoded(tagDestinationPath)                  
        tagOperation.setSingleTarget(SvnTarget.fromURL(destinationURL))

        // Make the operation fail when no 
        tagOperation.setFailWhenDstExists(true)  
        tagOperation.setCommitMessage("Tagging the ${projectName}")
        tagOperation.run()
    } catch (SVNException e) {
        if (e.getErrorMessage() == SVNErrorCode.ENTRY_EXISTS) {
            logger.info("Entry exists")
        }

    } finally {
        svnOperationFactory.dispose()
    }
} 
```

# c# - WCF 数据契约与对象图中的分层数据

> ID：12782046
> 
> 赞同：1
> 
> 时间：2012-10-08T12:45:37.300
> 
> 标签：c#, wcf, hierarchical-data, datacontract, datamember

我正在编写 WCF 服务以从 Active Directory 返回有关人员的信息。除了返回此人的详细信息外，我还希望它返回其经理的用户名和全名。

我开始将其编码为：...

```
[DataContract]
public class ADPerson
{
    Guid objectGuid;
    Guid managerObjectGuid;
    string username;
    string displayname;

    [DataMember]
    public string Username 
    { 
        get { return this.username; }
        set { this.username = value; }
    }
    [DataMember]
    public string DisplayName
    { 
        get { return this.displayName; }
        set { this.displayName = value; }
    }
    [DataMember]
    public ADPerson Manager
    { 
        get { return new ADPerson(this.managerObjectGuid); }
        set { this.managerObjectGuid = value.objectGuid; }
    }

    /* ... */

} 
```

...但后来意识到这没有停止条件；即，它将一直遍历对象图，直到到达未定义经理的用户（即 CEO）。

有没有一种很好的方法来放置这个停止条件，同时仍然能够重用 ADPerson 类，或者我是否需要提供另一种获取经理详细信息的方法（例如，将我希望看到的那些详细信息放入他们自己的字段中并从 Manager 属性中删除 DataMember，或者创建一个 ADManager 类，该类显示不是经理的经理的 ADPerson 字段的子集？

这是解决问题很简单的另一种情况，但知道问题的最佳解决方案是什么让我很烦恼。

提前致谢，

JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:51:44.750

*鉴于循环引用（ “员工 A 有经理 B，要打印经理 B，您必须打印他的员工，其中之一是员工 A...”*），在 XML 中使用继承必然会变得混乱。

此代码演示，使用 DataContractSerializer，这将不起作用：

```
[ServiceContract]
public class NestedDataService
{
    [OperationContract]
    public Person FindPerson()
    {
        var person = new Person { Name = "E.M. Ployee" };
        var manager = new Person { Name = "M.A. Nager" };

        manager.Employees = new List<Person>();
        manager.Employees.Add(person);

        person.Manager = manager;

        return person;
    }
}

[DataContract]
public class Person
{
    [DataMember]
    public String Name { get; set; }

    [DataMember]
    public Person Manager { get; set; }

    [DataMember]
    public List<Person> Employees { get; set; }
} 
```

我会使用AD*中的一些（？*） G/UUID 并使用该 ID 在客户端将它们重新链接在一起。然后 Employee A 将不再具有`public ADPerson Manager`属性（或者至少就序列化程序而言没有），但是`public UUID ManagerID`可以像这样实现：

```
public UUID ManagerID 
{ 
    get 
        { 
            return Manager != null ? Manager.UUID : null;
        }
} 
```

这限制了您返回一个人，因为您必须发送一份`ADPersons`是否有与所请求的人相关的人的列表，以便能够查找他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:52:04.863

在我看来，根据给出的信息，最好的解决方案是让你想要序列化的属性在手头的类上可见，并从管理器中删除 DataMember 属性，如下所示：

```
[DataContract] 
public class ADPerson 
{ 
    Guid objectGuid; 
    Guid managerObjectGuid; 
    string username; 
    string displayname; 

    [DataMember] 
    public string Username  
    {  
        get { return this.username; } 
        set { this.username = value; } 
    } 
    [DataMember] 
    public string DisplayName 
    {  
        get { return this.displayName; } 
        set { this.displayName = value; } 
    } 
    public ADPerson Manager 
    {  
        get { return new ADPerson(this.managerObjectGuid); } 
        set { this.managerObjectGuid = value.objectGuid; } 
    } 
    [DataMember] 
    public string ManagerUsername
    {  
        get { return this.Manager.Username; } 
    } 
    [DataMember] 
    public string ManagerName
    {  
        get { return this.Manager.DisplayName; } 
    } 
} 
```

`public`如果您不希望它们出现，它们甚至不必出现。

# svg - svg元素拉伸

> ID：12782049
> 
> 赞同：0
> 
> 时间：2012-10-08T12:45:38.103
> 
> 标签：svg, jquery-svg

我正在使用 SVG 创建一个简单的绘图应用程序，用户可以在其中绘制圆形、矩形等，并根据需要进行放大和缩小。

我的主要问题是拉伸。我想创建一个拉伸按钮，它将所有 SVG 元素拉伸到浏览器的大小而不会扭曲它。

在我的设计中，页眉占用 50 像素，页脚占用 25 像素。所以实际的绘图空间是减去那个。

我还没有编写任何代码，bbox 和 viewbox 让我无处可去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:58:21.803

您需要找到可绘制的极值并将给定的 bbox 适合可见的网络画布。

# javascript - 使用下一个和上一个锚按钮在 div 中加载外部页面

> ID：12782052
> 
> 赞同：1
> 
> 时间：2012-10-08T12:45:47.217
> 
> 标签：javascript, html

我是新来的，这个设计师需要一些编程方面的帮助。我的编程技能仅限于 HTML 和一点点 javascript（我可以实现它，但不会编写它）。

因为我一直在寻找我的问题的答案，所以我只能找到那些无法工作、与所有浏览器（尤其是 chrome）不兼容或不知道如何根据自己的需求编辑脚本的人。

问题：

1.  当我单击页面“diensten.html”上的 UL 列表中的链接时，该链接必须加载到 div 中。在放置 div 的页面“diensten.html”上，div 的顶部和下方应该是 2 个按钮，向上和向下。单击即向下按钮时，已加载到 DIV 中的页面必须向下滚动到下一个锚点。与必须滚动回上一个锚点的向上按钮相同。

我有一个启用了 PHP 和 mysql 的网络服务器，所以如果它可以用 PHP 更容易地完成，那没问题。

我希望你们（拥有大量编程知识）有一种（简单的）方法来建立这种脚本？

非常感谢

..对不起我作为荷兰人的英语不好;-)

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:08:31.343

`iframes`假设您可以使用它们，则更适合这种情况。使用`iframes`，您无需任何特殊标记即可跳转到加载的 HTML 中的锚点。另外，您将避免将原始 HTML 加载到 div 中带来的许多麻烦。

我在 jsfiddle 上上传了一个工作示例，但具有讽刺意味的是，它在 jsfiddle 上不起作用；您需要下载资源并在您自己的机器上试用。 [http://jsfiddle.net/waDUG/5/](http://jsfiddle.net/waDUG/5/)

这是它的工作原理。首先，用户单击“加载内容”按钮，调用 Javascript 中的 load() 函数。这会将页面数据加载到 iframe 中。

加载的页面将具有由 id 为“anchor#”的元素指定的锚点，其中“#”是锚点编号。例如，加载的页面可能包含如下内容：

```
<h1 id="anchor1">Anchor1:</h1>
...

<h1 id="anchor2">Anchor2:</h1>
...

<h1 id="anchor3">Anchor3:</h1>
... 
```

当按下向上和向下按钮时，iframe 将跳转到下一个锚点。

这段代码唯一的问题是没有实现方法来确定最后一个锚点，但如果它是一个已知值，可以很容易地硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:50:15.830

如果你愿意使用 jQuery，你可以使用 jQuery 的`animate`函数来实现点击或鼠标悬停时的平滑滚动效果。下面是一个例子

```
var step = 25;
var scrolling = false;

// Wire up events for the 'scrollUp' link:
$("#scrollUp").bind("click", function(event) {
    event.preventDefault();
    // Animates the scrollTop property by the specified
    // step.
    $("#content").animate({
        scrollTop: "-=" + step + "px"
    });
}).bind("mouseover", function(event) {
    scrolling = true;
    scrollContent("up");
}).bind("mouseout", function(event) {
    // Cancel scrolling continuously:
    scrolling = false;
});

$("#scrollDown").bind("click", function(event) {
    event.preventDefault();
    $("#content").animate({
        scrollTop: "+=" + step + "px"
    });
}).bind("mouseover", function(event) {
    scrolling = true;
    scrollContent("down");
}).bind("mouseout", function(event) {
    scrolling = false;
});

function scrollContent(direction) {
    var amount = (direction === "up" ? "-=1px" : "+=1px");
    $("#content").animate({
        scrollTop: amount
    }, 1, function() {
        if (scrolling) {
            // If we want to keep scrolling, call the scrollContent function again:
            scrollContent(direction);
        }
    });
} 
```

# sql - Oracle Case 语句错误

> ID：12782053
> 
> 赞同：1
> 
> 时间：2012-10-08T12:45:47.643
> 
> 标签：sql, oracle

我正在使用下面的 SQL 语句，当尝试执行时，它给出了错误

```
0ra:00907 Missing right paranthesis 
```

错误。以下是我的查询。

```
SELECT DISTINCT b.PROT_NBR, mc.ISO_3_CHAR_CNTRY_CD, c.SITE_NUM, Min(d.X_ATTRIB_118)
   , CASE 
      WHEN d.X_ATTRIB_130 IS NULL
         THEN Min(d.ATTRIB_31)
      ELSE CASE 
            WHEN (
                  d.X_ATTRIB_130 IS NOT NULL
                  AND d.ATTRIB_31 IS NOT NULL
                  )
               THEN CASE 
                     WHEN To_Char(d.X_ATTRIB_130, ’mm / dd / yy’) > To_Char(d.ATTRIB_31, ’mm / dd / yy’)
                        THEN Max(d.X_ATTRIB_130)
                     ELSE Max(d.ATTRIB_31)
                     END
            ELSE NULLS
            END
      END Approval_Date
FROM CTMS_S_DS_PTCL_CNTRY a
   , CLINICAL_STUDY b
   , MDM_COUNTRY_MASTER mc
   , CTMS_S_DS_PTCL_SITE c
   , CTMS_S_DS_PTCL_REGLTRY d
WHERE a.DELETED_FLG = 'N'
   AND a.PTCL_STAT_CD IN ('Enrolling', 'Closed To Enrollment', 'Closed Follow Up'
      , 'In Analysis', 'Discontinued', 'Completed', 'In Development'
      , 'Open To Enrollment', 'Planning'
      )
   AND b.ods_src_sys_id = 13
   AND b.DEL_FLG = 0
   AND c.DELETED_FLG = 'N'
   AND c.SITE_NUM IS NOT NULL
   AND c.Status_CD IN (
      'Enrollment Open'
      , 'Intrested'
      , 'Regulatory Green Light'
      , 'Essential Documents in place'
      , 'Approved for SSV'
      , 'Intrested'
      , 'Contacted'
      , 'Pre Selected'
      , 'Contacted'
      , 'Selected'
      , 'Ready For Initiation'
      , 'Enrollment Closed'
      , 'Initiated'
      , 'Enrollment On-Hold'
      , 'Targeted'
      , 'Closed'
      )
   AND d.X_QNT_SUB_REQ IN ("'Ethics Central/IRB Submission'")
   AND d.DELETED_FLG = 'N'
   AND b.PROJ_ID = a.PAR_PTCL_ID
   AND mc.CNTRY_NM = a.REGION_CD
   AND a.SBL_ROW_ID = C.PTCL_RGN_ID
   AND c.SBL_ROW_ID = d.CL_PTCL_ST_ID
GROUP BY b.PROT_NBR
   , mc.ISO_3_CHAR_CNTRY_CD
   , c.SITE_NUM
   , d.X_ATTRIB_130
   , d.ATTRIB_31; 
```

请让我知道是什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:54:05.717

在我看来，你的报价有问题。

对于该行`AND d.X_QNT_SUB_REQ IN ("'Ethics Central/IRB Submission'")` ，我将其写为：

`AND d.X_QNT_SUB_REQ IN ('Ethics Central/IRB Submission')`

此外，对于`WHEN To_Char(d.X_ATTRIB_130, ’mm / dd / yy’) > To_Char(d.ATTRIB_31, ’mm / dd / yy’)`我要写的那一行：

`WHEN To_Char(d.X_ATTRIB_130, 'mm/dd/yy') > To_Char(d.ATTRIB_31, 'mm/dd/yy')`

另外，您应该使用`NULL`而不是`NULLS`因为这没有任何作用

# java - JSF - 有条件地显示两个对话框之一

> ID：12782054
> 
> 赞同：0
> 
> 时间：2012-10-08T12:45:48.633
> 
> 标签：java, jsf, primefaces

我的页面中有两个 Primefaces `p:dialogs`，我有两个按钮来显示它们（一个是删除按钮，另一个是编辑按钮）。

我将对话框的可见属性设置如下：`visible="#{fn:length(bean.selectedItems) gt 0}`删除按钮和`visible="#{fn:length(bean.selectedItems) eq 1}`，所以我可以删除多个元素，但只能同时编辑一个。

现在 bean 是 ViewScoped，所以如果只选择了一项，并且有一个没有按下 ajax 提交的 commandButton，那么两个对话框都会显示，这显然不是我想要的。

仅在需要时显示适当对话框的最简单方法是什么？

我不想为此设置额外的 bean 属性，所以让我们认为这是一个简单的解决方案。还有其他方法吗？也许将操作的名称设置为视图范围的参数？或者使用呈现的属性并管理来自 javascript 回调的显示/隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:17:22.073

我认为正确的方法是

```
<p:commandButton value="DELETE" 
                 onclick="deleteDialog.show()" 
                 disabled="#{fn:length(bean.selectedItems) eq 0}" />

<p:commandButton value="EDIT" 
                 onclick="editDialog.show()" 
                 disabled="#{fn:length(bean.selectedItems) ne 1}" /> 
```

# android - QR码扫描仪返回应用程序

> ID：12782055
> 
> 赞同：0
> 
> 时间：2012-10-08T12:45:58.730
> 
> 标签：android, jquery-mobile, qr-code, phonegap-plugins

我正在使用 phonegap 和 JQM 创建一个应用程序。我最近在我的应用程序上配置了条形码扫描仪。它完美地工作。但我有一个问题。当我扫描二维码时，我不知道扫描完成后如何返回我的应用程序。我安装了 zxing library 条码扫描器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:58:44.337

如果您正在通过 进行集成`Intent`，则应用程序会在完成扫描后向您回复结果。

所有细节都由项目为您包装在几个类中，您可以包括： [http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# php - 需要日志学说更改

> ID：12782059
> 
> 赞同：1
> 
> 时间：2012-10-08T12:46:06.613
> 
> 标签：php, symfony, doctrine

我正在测试一个监听器以制作日志，但不知道如何获取新创建对象的 id。我使用的方法如下：

```
class ListenerCrud{

protected $container;

public function __construct(ContainerInterface $container)
{
    $this->container = $container;
}

public function onFlush(onFlushEventArgs $eventArgs)
    {
            $em = $eventArgs->getEntityManager();
            $uow = $em->getUnitOfWork();

            foreach ($uow->getScheduledEntityInsertions() AS $entity) {
                if (!$entity instanceof Modificacion) {
                    $modificacion = new Modificacion();
                    $modificacion->setFechamod(new \DateTime('now'));
                    $className = join('', array_slice(explode('\\', get_class($entity)), -1));
                    $modificacion->setEntidad($className);
                    $modificacion->setTipo('Inserción');
                    $modificacion->setIdentificador($entity->getId()); //errorrrrrrrr
                    $securityContext = $this->container->get('security.context');
                    $modificacion->setEmpleado($securityContext->getToken()->getUser());
                    $modificacion->setInfo('');
                    $em->persist($modificacion);
                    $classMetadata = $em->getClassMetadata(get_class($modificacion));
                    $uow->computeChangeSet($classMetadata, $modificacion);
                    }
                 }
    }
} 
```

我无法访问新创建对象的 id。有人可以帮助我吗？非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:47:36.647

你需要监听一个不同的事件——[`postFlush`](http://doctrine-orm.readthedocs.org/en/latest/reference/events.html#postflush)或者[`postUpdate`/ `postRemove`/`postPersist`](http://doctrine-orm.readthedocs.org/en/latest/reference/events.html#postupdate-postremove-postpersist)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:01:42.120

谢谢你的回答。

解决方案是：

```
 $objetos = $em->getRepository('miomioBundle:'.$className)->findAll();
    $last_item = end($objetos);
    $last_item = $last_item->getId() + 1; 
    $modificacion->setIdentificador($last_item); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:00:09.820

当你这样做时，`$em->persist($modificacion);`你将数据保存到对象中，但它仍然没有，`id`因为你没有分配它。要将数据保存到数据库中，您必须执行`$em->flush();`之后对象将获得 ID。

所以最严格的解决方案是：

```
foreach ($uow->getScheduledEntityInsertions() AS $entity) {
    if (!$entity instanceof Modificacion) {
        $modificacion = new Modificacion();
        $modificacion->setFechamod(new \DateTime('now'));
        $className = join('', array_slice(explode('\\', get_class($entity)), -1));
        $modificacion->setEntidad($className);
        $modificacion->setTipo('Inserción');
        $modificacion->setIdentificador($entity->getId()); //errorrrrrrrr
        $securityContext = $this->container->get('security.context');
        $modificacion->setEmpleado($securityContext->getToken()->getUser());
        $modificacion->setInfo('');
        $em->persist($modificacion);

        $em->flush(); // now you can doSmthWithId($modificacion->getId())

        $classMetadata = $em->getClassMetadata(get_class($modificacion));
        $uow->computeChangeSet($classMetadata, $modificacion);
    }
} 
```

# objective-c - uitextview shouldChangeTextInRange 适用于所有方法

> ID：12782061
> 
> 赞同：-1
> 
> 时间：2012-10-08T12:46:14.287
> 
> 标签：objective-c, nsstring, uitextview, nsrange, nscharacterset

我已经输入了所有 3 种方法`- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)string`

但是，以下三种方法只能使用其中一种，我想知道应该如何编写代码才能使所有三种方法都以这种方式工作？

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)string{

//restrict user to type 70 characters
int limit = 69; 
return !([inputTextSection.text length]>limit && [string length] > range.length);

//restrict inputing uppercase to lowercase
NSRange uppercaseCharRange;
uppercaseCharRange = [string rangeOfCharacterFromSet:[NSCharacterSet uppercaseLetterCharacterSet]];

if (uppercaseCharRange.location != NSNotFound) {

    inputTextSection.text = [inputTextSection.text stringByReplacingCharactersInRange:range
                                                                           withString:[string lowercaseString]];

    return NO;
}

return YES;

// restrict user to input other characters
NSCharacterSet *unacceptedInput = nil;

if (textView == inputTextSection) {

    if ([[inputTextSection.text componentsSeparatedByString:@"@"] count] > 1) {
        unacceptedInput = [[NSCharacterSet characterSetWithCharactersInString:[ALPHA_NUMERIC stringByAppendingString:@".-"]] invertedSet];

    } else {
        unacceptedInput = [[NSCharacterSet characterSetWithCharactersInString:[ALPHA_NUMERIC stringByAppendingString:@"\n .,;:<>[]!$%&'*+-/=?^_{}()~@"]] invertedSet]; //if nextline needed, insert "\n"
    }
}
else {
    unacceptedInput = [[NSCharacterSet illegalCharacterSet] invertedSet];
}
// If there are any characters that I do not want in the text field, return NO.
return ([[string componentsSeparatedByCharactersInSet:unacceptedInput] count] <= 1);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:09:25.667

我已经通过以下方法修复了它：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)string{

if (range.location>=70){
    return  NO;
}
else
{
    NSCharacterSet *unacceptedInput = nil;

    if (textView == inputTextSection || range.location>=70)  {

        NSRange uppercaseCharRange;
        uppercaseCharRange = [string rangeOfCharacterFromSet:[NSCharacterSet uppercaseLetterCharacterSet]];

        if (uppercaseCharRange.location != NSNotFound) {

            inputTextSection.text = [inputTextSection.text stringByReplacingCharactersInRange:range
                                                                                   withString:[string lowercaseString]];

            return NO;
        }

        if ([[inputTextSection.text componentsSeparatedByString:@"@"] count] > 1) {
            unacceptedInput = [[NSCharacterSet characterSetWithCharactersInString:[ALPHA_NUMERIC stringByAppendingString:@".-"]] invertedSet];

        } else {
            unacceptedInput = [[NSCharacterSet characterSetWithCharactersInString:[ALPHA_NUMERIC stringByAppendingString:@"\n .,;:<>[]!$%&'*+-/=?^_{}()~@"]] invertedSet]; 
        }
    }
    else {
        unacceptedInput = [[NSCharacterSet illegalCharacterSet] invertedSet];
    }

    return ([[string componentsSeparatedByCharactersInSet:unacceptedInput] count] <= 1);

    return YES; 
    } 
} 
```

# java - 在不使用内置类的情况下用 Java 堆栈程序

> ID：12782064
> 
> 赞同：0
> 
> 时间：2012-10-08T12:46:21.523
> 
> 标签：java, data-structures

我想在 Java 中创建一个堆栈，而不使用 util 包提供的内置类。我编写了这段代码，但每次运行它都会引发 NullPointerException。我做了两节课。第一个包含堆栈的方法和逻辑，即Push和Pop以及检查堆栈空和满的方法；

```
private int MaxStack;
private int emptyStack;
public static int top;
private char[] items;

public SimpleStack(int i) {
    // TODO Auto-generated constructor stub
}

public void Stack(int i)
{
    MaxStack=i;
    emptyStack=-1;
    top=emptyStack;
    items=new char[MaxStack];
}
public void Push( char c){

 items[top]=c;
 top++;}
public char Pop(char c){

 return items[top--];}
public boolean full(){

 return top+1==MaxStack;}
public boolean empty(){

return top== emptyStack;}} 
```

第二个类包含运行代码的主要方法：

```
public static void main(String[] args) throws IOException
{
    // TODO Auto-generated method stub
SimpleStack ab=new SimpleStack(10);
char ch;

while((ch= (char)System.in.read())!='\n')
{   

    if(!ab.full()){
        ab.Push(ch);
        }
        }
while(!ab.empty())
{
System.out.println(ab.Pop(ch));
System.out.println();
}

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:50:39.610

问题是您的构造函数没有做任何事情。

看来您有另一种方法`public void Stack(int i)`，应该是构造函数。

> 我想在 Java 中创建一个堆栈，而不使用 util 包提供的内置类。

即便如此，你还是应该阅读内置 Stack 类的代码，因为你可以学到一些有用的东西，比如使用标准格式和编码约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:54:38.937

正如其他人所说，您的构造函数没有做任何事情。但我看到的另一个问题是，即使您将 Stack(int) 中的逻辑移动到 SimpleStack(int)，您仍然将 int“top”设置为等于“emptyStack”，即 -1。因此，现在当您将一个项目推入数组时，您最初是在尝试将其推入 items[-1]，这显然会引发错误。仔细逐行检查您的代码，您将能够准确地看到发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:49:52.180

尝试将 Stack(int) 中的逻辑移动到 SimpleStack(int)

# image - excel 2007 图像不会返回

> ID：12782065
> 
> 赞同：0
> 
> 时间：2012-10-08T12:46:27.240
> 
> 标签：image, excel

我在 excel 2007 工作簿上有一张图片，上面有一些文本框。图像和文本大约每 5 分钟更改一次，其中包含我放置的一些 VBA 代码。

图像对象已被发送到后面，所以文本框应该显示在顶部......但出于某种奇怪的原因，它没有。

它在 excel 2003 中运行良好，但在 2007 年则不行。

任何人都知道为什么，最重要的是，有没有办法修复似乎是错误的东西？

请注意，我也尝试插入图像（从插入>图像）并且有效（文本位于图像顶部），但是它是一种不同类型的对象，我无法使 VBA 代码与这种类型的图像对象。

我已经尝试了在论坛中找到的以下代码，但有些我无法将图像命名为“Image_2”，因此没有任何反应。我使用随机选择器 (photo_array(rrr)) 自动更改图像和文本。

提前致谢

```
 strPic = "Image_2"
            Set shp = WS.Shapes(strPic)

            'Capture properties of exisitng picture such as location and size
            With shp
                t = .Top
                l = .Left
                h = .Height
                w = .Width
            End With

            WS.Shapes(strPic).Delete

            Set shp = WS.Shapes.AddPicture(ThisWorkbook.Path & "\images\" & photo_array(rrr), msoFalse, msoTrue, l, t, w, h)
            shp.Name = "Image_2"  ' strPic
            shp.ScaleHeight Factor:=1, RelativeToOriginalSize:=msoTrue
            shp.ScaleWidth Factor:=1, RelativeToOriginalSize:=msoTrue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:15:59.090

由于您不断添加新图片，因此默认情况下将其放在顶部`ZOrder`。

尝试在最后添加这一行：

```
shp.ZOrder msoSendToBack 
```

这应该将图片放回您想要的位置......在后面。

# objective-c - Cocoa 应用插件/糖？

> ID：12782069
> 
> 赞同：0
> 
> 时间：2012-10-08T12:46:39.480
> 
> 标签：objective-c, cocoa, plugins

我的应用程序应该可以使用插件或通常称为糖来扩展。我会将它们放在 appname.app/Contents/sugars/sugarname.appnamesugar 下

这些是捆绑包，在单独的项目中编译。这将允许我扩展应用程序的功能而无需提交更新。

所以，这就是我所知道的。我该如何继续？我如何启动任何方法并从我的主应用程序中获取结果。如果我可以提供某种类，它们是它们的子类并覆盖它的方法来实现功能，那将是很好的。

这些应用程序可以做到这一点：

[http://panic.com/coda/](http://panic.com/coda/)

[https://droplr.com/你好](https://droplr.com/hello)

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:19:16.173

阅读[Cocoa 代码加载指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/Tasks/LoadingBundles.html)，了解有关如何使用`NSBundle`加载插件的一些信息。

# jquery - 单击按钮访问父对象？

> ID：12782070
> 
> 赞同：-2
> 
> 时间：2012-10-08T12:46:39.403
> 
> 标签：jquery

试图在点击事件中获取对象。我在这里做错了什么？this.section 是每个按钮的索引。

```
 this.ebutton        = jQuery('.episode_button');
  this.button         = this.ebutton.eq(this.section);
  this.listtext       = 'testbutton';

  this.button.parobj  = this;
  this.button.bind('click', function() {

    alert(this.parobj.listtext());

   }); 
```

如何在按钮事件中获取属性 listtext？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:59:04.780

试过了

```
$("#"+this.id).parent() 
```

或者

```
$(<selector>).parent() 
```

[http://api.jquery.com/parent/](http://api.jquery.com/parent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:57:57.500

```
 var epi = {};

     /*Startpage*/
     epi.start = {
         epilist:            [],

         init: function () {
             this.ebutton                = jQuery('.episode_button');
             this.episodelist.prototype  = this;

             this.epilist.push(new this.episodelist(0));
         },

         episodelist: function (index) {
             this.name           = 'test'
             this.button         = this.ebutton.eq(index);
             this.button.parobj  = this;
             this.button.bind('click', function() {this.parobj.episodelistshow();});
         },

         episodelistshow: function () {

             // This will not alert correctly!
             // Should alert test
              alert(this.name);            

         }
     }​ 
```

# ipad - iOS 5.0：视图中的当前设备方向确实加载返回 0

> ID：12782074
> 
> 赞同：2
> 
> 时间：2012-10-08T12:46:53.597
> 
> 标签：ipad, ios5, viewdidload, uideviceorientation

有人可以告诉我为什么 [UIDevice currentDevice] 方向] 总是返回 0 在视图中加载？我想根据当前方向更改屏幕布局。当我最初将设备保持在横向模式时，它不起作用。在这种情况下，我期望 [UIDevice currentDevice] 方向] 返回景观方向，但事实并非如此。然后它给出正确的值！有人可以帮我确定问题所在。谢谢。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self resizeContentViews:[[UIDevice currentDevice] orientation]];
} 
```

# javascript - 如何获取打开给定网页的当前用户数量

> ID：12782083
> 
> 赞同：0
> 
> 时间：2012-10-08T12:47:12.880
> 
> 标签：javascript, web-applications, websocket, long-polling

是否有一种简单有效的方法来获取打开给定网页的访问者数量？

最终目标是这样做：

1.  检查页面上有多少访问者，即在浏览器中打开了页面的访问者。
2.  如果超过一定数量`n`，则显示一个按钮。按下按钮的第一批`x`访问者将转到不同的页面。
3.  只要`n`访问者超过，按钮就会一直显示。如果没有，按钮就会消失。

这样做有什么诀窍吗？长轮询？网络套接字？越简单越好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:05:23.463

使用 WebSockets 可以轻松完成此任务。下面是使用[Bristleback Server](http://bristleback.pl)编写的所需应用程序代码（假设在新用户连接时执行检查）。

```
@Component
public class CountUsersConnectionListeners implements ConnectionStateListener<DefaultUser> {

  private static final int MAGIC_MAXIMUM_NUMBER_OF_USERS = 2;

  private int numberOfCurrentlyConnected;

  @Autowired
  private ConnectionCountClientClass connectionCountClientClass;

  @Override
  public void userConnected(DefaultUser defaultUser) {
    if (numberOfCurrentlyConnected > MAGIC_MAXIMUM_NUMBER_OF_USERS) {
      connectionCountClientClass.showButtonToNewUser(defaultUser);
      numberOfCurrentlyConnected++;
      return;
    }

    numberOfCurrentlyConnected++;
    if (numberOfCurrentlyConnected > MAGIC_MAXIMUM_NUMBER_OF_USERS) {
      connectionCountClientClass.showButton(true);
    }
  }

  @Override
  public void userDisconnected(DefaultUser defaultUser) {
    if (numberOfCurrentlyConnected <= MAGIC_MAXIMUM_NUMBER_OF_USERS) {
      numberOfCurrentlyConnected--;
      return;
    }

    numberOfCurrentlyConnected--;
    if (numberOfCurrentlyConnected <= MAGIC_MAXIMUM_NUMBER_OF_USERS) {
      connectionCountClientClass.hideButton(true);
    }
  }
} 
```

请注意，这只是一个原型，我并不关心同步，设置实际连接用户数的代码可以放在其他地方。

* * *

```
@ClientActionClass
@Component
public class ConnectionCountClientClass {

  @ClientAction
  public SendCondition showButton(boolean show) {
    return AllUsersCondition.getInstance(); // this will send a message to all connected users
  }

  @ClientAction
  public SendCondition hideButton(boolean hide) {
    return AllUsersCondition.getInstance(); // this will send a message to all connected users
  }

  @ClientAction
  public DefaultUser showButtonToNewUser(DefaultUser defaultUser) {
    return defaultUser; // this will send a message only to the user given as parameter
  }
} 
```

* * *

客户端（仅提供额外的应用程序代码）：

```
var sampleClientAction = {
  showButton: function() {
    alert("Show button!");
  },
  showButtonToNewUser: function() {
    alert("Show me button!");
  },
  hideButton: function() {
    alert("Hide button!");
  }
};

dataController.registerClientActionClass("ConnectionCountClientClass", sampleClientAction); 
```

如果您有兴趣，我可以向您发送整个工作应用程序 [需要 Maven]。Jetty 或 Tomcat 可用作 Web 应用程序容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:02:01.180

好吧，您可以像您提到的那样使用 Websocket，也可以只是简单的 AJAX 每 100 毫秒轮询一次服务器，直到 Websocket 没有关闭或服务器在 500 毫秒内没有从浏览器获得响应，然后用户是“连接”使用 AJAX。

并且只需根据他们的页面和页面上的不同 ip 将所有连接到页面的用户添加到数据库中，并`n`在特定页面上有条目返回对所有浏览器的响应以显示按钮时对它们进行计数。

并且如果有不`n`只是发送响应来隐藏按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:03:11.770

您的网站是静态的，然后使用

[http://www.kavoir.com/2010/05/simplest-php-hit-counter-or-download-counter-count-the-number-of-times-of-access-visits-or-downloads.html](http://www.kavoir.com/2010/05/simplest-php-hit-counter-or-download-counter-count-the-number-of-times-of-access-visits-or-downloads.html)

如果您的网站是动态的，则将计数器与页面名称一起保存在数据库中

# c# - 在 c# 中通过套接字发送 Iso8583 消息

> ID：12782086
> 
> 赞同：0
> 
> 时间：2012-10-08T12:47:19.477
> 
> 标签：c#, sockets, iso8583

我正在尝试通过套接字发送 Iso8583 消息，但我使用的代码似乎只是挂起！

```
string NewISOmsg = iso8583.Build(DE, MTI);

// Send Message
byte[] data = new byte[1024];
IPEndPoint ipep = new IPEndPoint(IPAddress.Parse("66.147.172.198"), 6181);
Socket server = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
data = Encoding.ASCII.GetBytes(NewISOmsg);
server.SendTo(data, data.Length, SocketFlags.None, ipep);
IPEndPoint theSender = new IPEndPoint(IPAddress.Parse("66.147.172.198"), 6181);
EndPoint tmpRemote = (EndPoint)theSender;
int recv = server.ReceiveFrom(data, ref tmpRemote);
string ourResponse = tmpRemote.ToString();
server.Close();               

// Output response
Response.Write(ourResponse); 
```

我错过了什么？谢谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:56:06.620

对我来说，您似乎打开了 2 个到同一个端点的连接，

一个写一个新的读，基本上开始2个会话。

端点尝试在第一个连接上发回响应，因此您应该从第一个连接读取，而不是从新的第二个连接读取。

# javascript - 将函数参数从一个函数传递到另一个函数，这段代码可以接受吗？

> ID：12782090
> 
> 赞同：0
> 
> 时间：2012-10-08T12:47:36.933
> 
> 标签：javascript

只是想了解我*可以*在 javascript 中做什么。这个问题是关于函数的，我在下面的代码片段中得到的内容是否是好的做法，或者你会以什么方式做到这一点？

JS

```
function func1(arg){
  // run code ...
  func2(arg);    
}

function func2(arg){
  // run code ...
  func3(arg);    
}

function func3(arg){
  alert(arg);
}​

func1('my message'); 
```

因此，例如，如果我有一个显示视频的函数并需要一个参数，并且在该函数内部我调用了一个进行 ajax 调用的函数，该函数也需要一个参数，那么我将如何传递它？

```
function loadVideos(param){

  //...

  getData(param);

}

function getData(param){

  // ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:50:50.593

是的，您可以拥有调用其他函数的函数。我假设在您的第一个示例中，每个函数都做了一些有用的事情。

在您的第二个示例中，您会像拥有它一样进行操作。如果您需要等待 AJAX 响应来调用第二个函数，您可以在 AJAX 请求的回调中调用它。

如果该`loadVideos`函数*需要*一些数据来发出请求，则您将`getData`返回所需的值，然后使用该值。或者如果`params`是一个`Object`，你可以让它填充`Object`而不需要返回它。

# facebook - Facebook 不断在两个访问令牌之间切换

> ID：12782092
> 
> 赞同：2
> 
> 时间：2012-10-08T12:47:40.493
> 
> 标签：facebook, oauth-2.0, access-token

我面临着一个有点奇怪的情况。在我们的应用程序中，我们删除了 offline_access-scope 的使用，并实现了他们的[新逻辑来获取新的令牌](http://developers.facebook.com/roadmap/offline-access-removal/)。因此，我们使用以下 URL 模板：

```
https://graph.facebook.com/oauth/access_token?client_id=%s&client_secret=%s&grant_type=fb_exchange_token&fb_exchange_token=%s 
```

我们收到令牌及其过期时间。为避免与过期代币发生冲突并尽量减少对用户的影响，我们会经常请求新代币。根据文档，这实际上是 Facebook 想要我们做的并且不是坏习惯。

我们注意到 Facebook 不断向我们返回两个不同的令牌，这影响了我们的屏幕流程。使用[Facebook 调试器](https://developers.facebook.com/tools/debug/)，我们了解到这两个令牌是相同的，除了以下`Origin`行：

```
Origin  Unknown 
```

相比

```
Origin  Web 
```

正如我所说，所有其他领域都是平等的。

显而易见的问题是：

1.  为什么 Facebook 会这样做？
2.  我们如何影响它以始终获得`Unknown`or的令牌`Web`？
3.  差异对令牌或用户可以做什么有影响吗？

编辑：
4\. 是否有可能我不能使用带有来源的令牌`Web`来执行 Open Graph 请求？

# google-maps-api-3 - 避免谷歌地图标记（符号）重叠

> ID：12782101
> 
> 赞同：0
> 
> 时间：2012-10-08T12:48:39.057
> 
> 标签：google-maps-api-3

> **可能重复：**
> [如何在不与谷歌地图重叠的情况下对标记进行聚类？](https://stackoverflow.com/questions/11781183/how-can-i-cluster-markers-without-overlap-with-google-maps)

我在地图上有不同的位置，不同类型的`Incidents`可能同时在同一点发生。现在，如果不同类型的事件发生在同一点上，所有这些标记（它们是默认的 CIRCLE）都会相互重叠。CIRCLE 的规模也是动态的，取决于那里发生的事件数量。

那么，是否有任何实用的解决方案来**检测**或**避免**这些标记相互重叠？（考虑尺度是动态的）

我已经生成了 JSON 数据文件（通过 Cron 作业，来自数据库），但我也可以访问数据库，因此我可以在需要时进行自定义查询。我也使用谷歌地图 api v.3。

提前致谢。:)

**更新：**

关于[MarkerClusterer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)，不幸的是我看不出它如何避免重叠？它旨在管理大量标记：*该库为大量标记创建和管理每个缩放级别的集群。*但就我而言，想象一下我只有 2 个标记，但它们会相互重叠。那么，MarkerClusterer 也可以用它做任何事情吗？

关于[Overlapping Marker Spiderfier](https://github.com/jawj/OverlappingMarkerSpiderfier/)，我更喜欢通过 Google Maps API（如果可能的话）手动或本地完成，而不是使用第三方库。但如果找不到更好的解决方案，最终可能会这样做。

# php - 我想用代理创建 curl 在 php 中查找 ip 基本示例

> ID：12782102
> 
> 赞同：1
> 
> 时间：2012-10-08T12:48:43.067
> 
> 标签：php, curl, proxy

我想用代理创建一个 curl 并找到代理基本示例的 Ip

我写的代码属于follow

```
<?php
$proxy_ip = '76.27.149.203';
$proxy_port = '8080';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://automation.whatismyip.com/n09230945.asp");
    curl_setopt($ch, CURLOPT_USERAGENT, $agent);
    curl_setopt ($ch, CURLOPT_HTTPHEADER, Array("Content-Type: application/x-www-form-urlencoded","Accept: */*"));
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_PROXYPORT, $proxy_port);
    curl_setopt($ch, CURLOPT_PROXY, $proxy_ip);
    curl_setopt( $ch, CURLOPT_AUTOREFERER, 1);
    $head = curl_exec($ch);
    var_dump($head);
    //var_dump(curl_getinfo($ch));
?> 
```

# mongodb - Mongoose 聚合中未显示字段

> ID：12782105
> 
> 赞同：0
> 
> 时间：2012-10-08T12:49:00.350
> 
> 标签：mongodb, mongoose, aggregation-framework

我正在尝试计算所有不同部门的数量。我希望结果包含 deptType、deptName 和计数。分组有效，结果显示 deptType 和 dCount，但不显示 deptName。知道为什么吗？

我的数据如下所示：

```
{
  "_id": "10280",
  "city": "NEW YORK",
  "state": "NY",
  "departments": [
         {"departmentType":"01",
          "departmentHead":"Peter"},
         {"departmentType":"02",
          "departmentHead":"John"}
  ]
},
{
  "_id": "10281",
  "city": "LOS ANGELES",
  "state": "CA",
  "departments": [
         {"departmentType":"02",
          "departmentHead":"Joan"},
         {"departmentType":"03",
          "departmentHead":"Mary"}
]
} 
```

和我的猫鼬聚合命令是这样的：

```
Departments.aggregate(
{  
$project : {"departments.deptType" : 1,
        "departments.deptName" : 1,
        "dCount" : 1  } 
},
{ 
    $match: {"departments.deptType": {$exists: true}} 
},
{  
    $unwind: "$departments" 
},
{ 
    $group: {
        _id: "$departments.deptType",
         dCount: { $sum: 1 },
    }
},
{
$match: { dCount: { $gt: 5 }   }
},
{ $sort: { dCount: -1 } },
{ $limit : 50 },  

function(err, dbres) {}
); 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:08:18.337

对不起，愚蠢的家伙：

```
(...)
$group: {
    _id : { dType : "$departments.deptType", 
            dName : "$departments.deptName" 
          },
   dCount: { $sum: 1 },
}
(...) 
```

# asp.net - 图形未从我的 ASP.NET 页面中的 CSS 文件加载

> ID：12782106
> 
> 赞同：0
> 
> 时间：2012-10-08T12:49:01.567
> 
> 标签：asp.net, css

我有这个 index.aspx 页面，它没有从 CSS 加载图形。文本“测试”加载正常。

我究竟做错了什么？

ASPX

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="index.aspx.cs" Inherits="chinatownexperience.index" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="css/main.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="body-1">
        <div id="topblank"><p>test</p>
        </div>
    </div>
    <form id="form1" runat="server">
    </form>
</body>
</html> 
```

CSS：

```
html,
body {
    margin:0;
    padding:0;
    color:#000;
    background: #9c0000;
    background: url('images/Chinatown-lgebg.png') left top; 
}

#body-1 {
    width: 880px; height: 1500px;
    margin: 0px auto;
    padding: 10px;
    overflow:hidden; 
}

#topblank {
    float: left;
    width: 880px;
    height:266px;
    background: url('images/WebsiteTop.png') repeat-y left top;
} 
```

我一定错过了一些愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:01:15.530

对于这个例子，你可以从根目录寻址，不要像这样使用单张婴儿床

```
background:url(/yourProjectRoot/cssFolderNameOrFile.../yourImage.*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:50:12.800

图像的路径必须相对于 CSS 文件的位置，而不是 HTML/ASP/whatever 文件。您应该指向图像的正确位置。

例子 ：

如果你使用这样的目录结构：

```
- root\
|- css\
|- images\
page.extension 
```

那么 CSS 文件的路径应该是：

```
background: url('../images/whatever.png'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:53:20.647

您的路径需要相对于样式表，而不是根。

```
root 
  -css/styles.css
  -images/
  index.html 
```

因此，如果您有上述结构，您的 CSS 中将需要它

```
background: url('../images/your_image.png'); 
```

*（值得注意的是，CSS 中的 .htc 文件应该有一个相对于根目录的路径。对于旧的浏览器修复很方便）*

# android - Monodroid 默认文化？

> ID：12782107
> 
> 赞同：0
> 
> 时间：2012-10-08T12:49:03.213
> 
> 标签：android, xamarin.android

我有一个使用 Decimal.ToString() 的应用程序。我的手机语言设置为英语，但是当我调用 Decimal.ToString() 时，',' 用作小数分隔符号。我的代码中没有任何设置文化调用，所以我想这是因为 Monodroid 在初始化时重置了它的文化。这可以改变吗？它在哪里搜索这些信息？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:19:05.347

Mono for Android 根据[Locale](https://bugzilla.xamarin.com/show_bug.cgi?id=1068)信息确定您的语言环境，特别是[默认 Locale](http://developer.android.com/reference/java/util/Locale.html#getDefault%28%29)的[语言](https://bugzilla.xamarin.com/show_bug.cgi?id=6049)和[国家](http://developer.android.com/reference/java/util/Locale.html#getCountry%28%29)。在进程启动时会查阅和缓存此信息。

如果您的手机在一个区域设置（例如德语），您启动一​​个应用程序（导致进程检测德语格式），然后您更改区域设置并返回应用程序，应用程序将不会看到区域设置更改。不幸的是，这是一个[已知的错误](https://bugzilla.xamarin.com/show_bug.cgi?id=1068)（我想不出一个像样的方法来修复它:-(，有一个很好的[变化](https://bugzilla.xamarin.com/show_bug.cgi?id=6049)。

# php - Facebook喜欢照片库脚本在资源管理器中不起作用

> ID：12782108
> 
> 赞同：-2
> 
> 时间：2012-10-08T12:49:04.583
> 
> 标签：php, css

我在网上找到了一个 Ajax `Facebook gallery script`，它在 Firefox 中运行良好，但是当我在 Windows Internet Explorer 中查看同一页面时，它不工作。任何想法如何让它工作。

我不确定我是否应该在网上发布脚本，因为它很多。但这是我找到它的地方，

[http://www.script-tutorials.com/facebook-like-photo-gallery-with-comments/](http://www.script-tutorials.com/facebook-like-photo-gallery-with-comments/)

**结果**是@http [://www.script-tutorials.com/demos/281/index.php](http://www.script-tutorials.com/demos/281/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:58:42.690

快速浏览一下，我在 IE6 和 IE7 中对其进行了测试，看看它有什么“不工作”。IE7 似乎工作正常，所以我猜你的意思是 IE6。

乍一看，我猜这是因为

```
position:fixed; 
```

在CSS中使用，[IE6不支持](http://caniuse.com/css-fixed)

至于让它工作，您可以按照该网站的建议进行操作并为 IE6 做一个 CSS 表达式（尽管我个人不喜欢 hacks），或者您必须围绕 CSS 进行操作并获得创意。这将是可能的，但可能需要一些时间。

# html - 记住下拉选择的最简单方法？

> ID：12782116
> 
> 赞同：0
> 
> 时间：2012-10-08T12:49:19.883
> 
> 标签：html, drop-down-menu, selection

我有;

```
<form method="post" action="search.php">
  <select name="country">
    <option value="">Select Country</option>   
    <option value="Afghanistan">Afghanistan</option>
    <option value="Albania">Albania</option>
  </select>
</form> 
```

然后在 search.php 中`$country = $country`查询 MySQL 表中 %like% country 的列。

我想知道在有人选择国家后记住下拉选择的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:59:20.270

您想在元素上使用该`selected`属性。`option`如果`select`要从数组或数据库查询中填充元素，可以这样做：

```
<?php foreach($countries as $country): ?>
<option value="<?php echo $country ?>"<?php if($_POST['country'] == $country) { echo ' selected="selected"'; } ?>><?php echo $country ?></option>
<?php endforeach ?> 
```

另外，作为旁注，最好按如下方式分配 $country：

```
$country = $_POST['country']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:59:28.577

无论您在服务器端做什么，您呈现的 HTML 都应该使用您希望最初选择它`selected="selected"`的属性。`<option>`

# java - 使用系统属性在 Java 中存储全局变量是不好的做法吗？

> ID：12782125
> 
> 赞同：5
> 
> 时间：2012-10-08T12:49:59.210
> 
> 标签：java, system-properties

`System.getProperty()`它们是否存在任何潜在问题（安全性、性能）或与使用/`System.setProperty()`在 Java 中存储应用程序范围的变量相关的一般不良影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:38:42.923

是的，这是不好的做法，原因有很多：

*   性能：系统属性对象是底层的哈希表。获取和设置可能比普通的 getter 或 setter 方法慢 2 个数量级。

*   类型安全：除非您的变量都是字符串，否则您会遇到属性值可能具有错误类型的问题，从而导致运行时错误、复杂性等。

*   类型转换成本：例如，必须在每个 set 和 get 操作上转换一个整数值属性。不便宜。

*   可追溯性：查找对真实变量的引用比查找命名系统属性更容易。

*   安全限制：对系统属性的访问由安全管理器控制。

当然，这是不必要的。如果你*真的需要*“全局”变量，`static`那么变量就可以了。如果您确实需要使用一个`Properties`对象来保存应用程序的（非系统）属性，请使用该`Properties`对象的单独实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T12:52:40.217

这是一个坏主意，因为您可能会获得对全局可访问变量的冲突要求。管理你对这个类的依赖也非常困难。如果真的没有其他选择，我只会这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T12:59:45.420

这**不是一个好主意**。顾名思义，它用于系统属性。
查看您的代码的人很难理解它们是全局变量而不是与系统相关的设置。

如果您真的想使用全局变量，我认为**使用单例或静态变量**会更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T12:53:21.427

有更好的选择。您至少可以使用标准属性加载器机制并加载 RessourceBundle 并写入/读取该 Bundle 而不是访问系统属性。

第三方可以在您不知情的情况下修改系统属性，并且您对此没有太多控制权。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T13:01:19.757

我建议使用属性文件并使用`Properties`该类。

```
File file = new File("your.properties");
FileInputStream input = new FileInputStream(file);

Properties properties = new Properties();
properties.load(input); 
```

并`.getProperty`在需要时使用。我认为全局系统变量是个坏主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T12:54:24.117

全局变量通常是设计缺陷。您的组件应该是独立的，不需要任何全局状态。相反，使用公共静态字段。

# opencl - 在不同的上下文之间共享 OpenCL 内存对象

> ID：12782134
> 
> 赞同：4
> 
> 时间：2012-10-08T12:50:20.350
> 
> 标签：opencl

有谁知道，是否可以像 opengl 那样在不同的上下文之间共享 opencl 内存对象？

我想将属于不同上下文的两个内存对象传递给内核......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:14:15.047

我不知道这是否可行，但如果正如 Klee1 所说，*那*一点是不可能的，我可以试试这个：

1) 从一个启用共享的 GL 上下文创建两个 CL 上下文中的每一个，每个 CL 上下文一个内存对象。

2）当你想在两者之间移动数据时，使用 GL 在两者之间进行帧缓冲 blit。

...这会将数据保留在 GPU 中并为您节省大量时间，而不是通过 PCI-E 总线双向复制......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:42:09.130

我认为这不可能直接用 OpenCL 来完成。这是因为在 OpenCL 中定义上下文、队列和内存的方式。如果您从两个不同的上下文传递内存，那么数据很可能在两个不同的设备上，我们不知道要在哪个设备上执行计算。

如果您想执行这种类型的计算，您首先必须将数据从一个上下文复制到另一个上下文。可以这样做：

1.  在 context2 中创建一个与 context1 中的缓冲区大小相同的新缓冲区
2.  在主机上创建一个相同大小的本地缓冲区
3.  clEnqueueReadBuffer 从 context1 到本地缓冲区
4.  clEnqueueWriteBuffer 从本地缓冲区到 context2

相反，如果您在不同的命令队列中有两个缓冲区（在相同的上下文中），则可以按照 OpenCL 1.2 规范的第 A.1 节中的规定共享它们。

# c# - C# SynchronizingObject 和 Timer.Timer 线程

> ID：12782139
> 
> 赞同：5
> 
> 时间：2012-10-08T12:50:29.700
> 
> 标签：c#, .net, multithreading, timer, deadlock

嗨，我正在尝试在我的主线程上触发 Timer.Timer 类的 Elapsed 事件。我仅限于 VS 2008、.net 3.5... 在这篇文章中： [C# 计时器是否在单独的线程上运行？](https://stackoverflow.com/questions/1435876/do-c-sharp-timers-elapse-on-a-separate-thread) 据说使用 SynchronizingObject 将使处理程序在拥有该对象的线程上执行。

所以我尝试了这个：

```
class MyTimer
{
  private readonly Timer timer;

  public MyTimer(ISynchronizeInvoke synchronizingObject)
  {
    Console.Out.WriteLine(Thread.CurrentThread.ManagedThreadId);
    timer = new Timer(1000);
    timer.SynchronizingObject = synchronizingObject;
    timer.Elapsed +=
      delegate
        {
          timer.Stop();
          Thread.Sleep(2000);
          Console.Out.WriteLine(Thread.CurrentThread.ManagedThreadId);
          timer.Start();

        };
    timer.Start();
  }
}

class Program
{
  static void Main(string[] args)
  {
    ISynchronizeInvoke syncObject = new Control();
    var mytimer = new MyTimer(syncObject);

    Console.ReadKey();
  }
} 
```

但输出是：1,4,4,4,4...

这是为什么？如何使 Elapsed 处理程序在主线程上执行。

我尝试将[SynchronizingObject 用于事件](https://stackoverflow.com/questions/1841345/synchronizingobject-for-an-event) ，但这也无济于事：

```
 public static ElapsedEventHandler Wrap(ElapsedEventHandler original, ISynchronizeInvoke synchronizingObject) 
  {
    return (sender, args) =>
    {
      if (synchronizingObject.InvokeRequired)
      {
        synchronizingObject.Invoke(original, new object[] { sender, args });
      }
      else
      {
        original(sender, args);
      }
    };
  } 
```

和：

```
timer.Elapsed += Wrap(
      delegate
        {
          timer.Stop();
          Thread.Sleep(200);
          Console.Out.WriteLine(Thread.CurrentThread.ManagedThreadId);
          timer.Start();
        }, 
        synchronizingObject); 
```

但仍然没有成功......每次 InvokeRequired 都是假的......

强制调试到调用会导致无效操作：“在创建窗口句柄之前，不能在控件上调用 Invoke 或 BeginInvoke。”

最后的手段是调查： [http](http://www.codeproject.com/Articles/12082/A-DelegateQueue-Class?msg=3655119#xx3655119xx) ://www.codeproject.com/Articles/12082/A-DelegateQueue-Class?msg=3655119#xx3655119xx 但这真的有必要吗？还是有一些更简单的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-25T13:10:37.797

建议的答案没有回答原始问题，这就是为什么 System.Timers.Timer Elapsed 事件无法在主线程上正确触发的原因，即使 SynchronizingObject 已正确设置为来自主线程的控件。

我自己也遇到了这个问题，结果发现解决方案是由于 Control 还没有句柄，即使它已经正确构建。诀窍是将控件的 Handle 属性的值放入一个虚拟变量中，以便对其进行初始化（请参阅[http://blogs.msdn.com/b/jfoscoding/archive/2004/11/24/269416.aspx](http://blogs.msdn.com/b/jfoscoding/archive/2004/11/24/269416.aspx)）

但是一旦解决了这个问题，它就会在原始发布者的代码中产生一个新问题，因为现在存在死锁，因为 Console.ReadKey() 正在阻塞，但 Elapsed 处理程序需要在该线程上运行。一种解决方案是执行 Application.DoEvents()，尽管可能有更好的解决方案。 **底线：当同步回主线程时，不要阻塞它！**

海报的原始代码经过修改以使其正常工作如下：

```
class MyTimer {
    private readonly System.Timers.Timer timer;
    private static AutoResetEvent elapsedOutputted = new AutoResetEvent(false);
    //private static AutoResetEvent mainReady = new AutoResetEvent(true);

    public MyTimer(ISynchronizeInvoke synchronizingObject) {

        Console.Out.WriteLine(Thread.CurrentThread.ManagedThreadId);
        timer = new System.Timers.Timer(1000);
        timer.SynchronizingObject = synchronizingObject;
        timer.Elapsed += timer_Elapsed;
        timer.Start();
    }

    void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e) {
        //timer.Stop(); not needed
        Console.Out.WriteLine(Thread.CurrentThread.ManagedThreadId);
        elapsedOutputted.Set();
        //Thread.Sleep(2000); not needed
        //timer.Start(); not needed
    }

    static void Main(string[] args) {
        Control c = new Control();
        IntPtr tempNotUsed = c.Handle;
        var mytimer = new MyTimer(c);

        for (int runs = 0; runs < 10; runs++) {
            while (!elapsedOutputted.WaitOne(1000)) { //this will deadlock, but the 1000ms timeout will free it
                Application.DoEvents(); //not sure if DoEvents is the best idea, but it does the trick
            } //end while
        } //end for
    } //end Main
} //end class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:43:36.840

我找到了使用 DispatcherTimer 和 Dispatcher.Run() 在新线程中启动消息泵的解决方案。为了停止调度程序并顺利退出服务，我使用了

```
if (_currentDispatcher != null) _currentDispatcher.InvokeShutdown();
_thread.Join(); 
```

# php - 将数据从 ASP 网站发布到 PHP 网站

> ID：12782140
> 
> 赞同：0
> 
> 时间：2012-10-08T12:50:29.337
> 
> 标签：php, asp.net

我正在为手机号码开发一个选择加入/退出 API，它可以放置在任何网站的顶部，因此人们可以订阅接收他们手机号码的短信。

我有以下脚本，它基本上在我的 PHP 网站 USING 之间发布数据，`Curl`它工作得很好：

```
<?php

$url = "http://myserverurl.com/optin.php";
$postdata['customer_id'] = "1";
$postdata['mobilenumber'] = $_POST['mobilenumber'];

$useragent= "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" ;

$ch = curl_init();
//set some cookie details up (depending on the site)
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");
curl_setopt($ch, CURLOPT_USERAGENT, $useragent); //set our user agent
curl_setopt($ch, CURLOPT_POST, 1); //set how many paramaters
curl_setopt($ch, CURLOPT_URL,$url); //set the url we want to use
curl_setopt($ch, CURLOPT_POSTFIELDS,$postdata); //set data to post

$result= curl_exec ($ch); //execute and get the results
curl_close ($ch);
//print $result; //display the reuslt

?> 
```

如果网站在，如何应用这种方法`ASP.net`？有什么类似于`Curl`in 的`ASP.net`吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:55:04.967

看看[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)它将为您提供大部分可能，但不是逐行。

此外，您可以下载[curl](http://curl.haxx.se/download.html)并从您的应用程序中调用它（当您可以选择 WebRequest 时，真的不推荐......呵呵）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:57:08.960

[在谷歌搜索](https://www.google.com/search?hl=en&q=curl%20asp%20.net)几秒钟后，您会得到[这个结果](http://www.neowin.net/forum/topic/994430-asp-net-equivalent-of-phps-curl/)。其中显示了使用[`System.Net.WebRequest`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx).

MSDN 提供了如何使用它发送帖子数据的[示例。](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

# asp.net - 如何根据用户输入的值创建 div

> ID：12782145
> 
> 赞同：0
> 
> 时间：2012-10-08T12:51:02.167
> 
> 标签：asp.net

我正在 asp.net 中处理基于用户输入的长度和宽度生成图像的 Web 开发项目。主要是我们以 CSS 样式提供它们，但我们可以在使用用户输入的值创建图像时完成相同的操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:06:58.220

请检查这是否对您有用。此示例应用程序允许用户设置要调整大小和上传的图像的尺寸。调整大小的图像也被转换为 PNG 图像格式。

[http://www.codeproject.com/Articles/4097/Dynamically-resize-uploaded-images-save-in-PNG-for](http://www.codeproject.com/Articles/4097/Dynamically-resize-uploaded-images-save-in-PNG-for)

# cocos2d-iphone - 如何将精灵移动到接触点

> ID：12782148
> 
> 赞同：0
> 
> 时间：2012-10-08T12:51:21.087
> 
> 标签：cocos2d-iphone

嗨 Raj 感谢您的快速响应实际上我的问题是我必须将精灵移动到我触摸过的触摸点，而且我只想沿着 x 轴移动该精灵，为此我使用以下代码

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{       
    for( UITouch *touch in touches ) {

    location = [touch locationInView: [touch view]];

    location = [[CCDirector sharedDirector] convertToGL: location];

    for(b2Body *b=world->GetBodyList();b;b=b->GetNext()){

    if(b->GetUserData()!=NULL) {`

    CCSprite *myActor =(CCSprite *)b->GetUserData();

    b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);

    b->SetTransform(b2Vec2(locationWorld.x, locationWorld.y),0);

    NSLog(@"x position of baby sprite is %@",  b->GetPosition().x);

    id action = [CCMoveTo actionWithDuration:0.4 position:CGPointMake( b->GetPosition().x, b->GetPosition().y)];

     [myActor runAction:action];

}}}} 
```

使用此代码可以将我的精灵移动到我想要的任何位置，但它不限于 x 轴......所以你能帮我解决这个问题吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T16:04:34.473

尝试使用此代码：

```
- (void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event{ 
```

//我们接触的点的坐标

```
CGPoint tocco = [touch locationInView:[touch view]];
CGPoint tocco2 = [[CCDirector sharedDirector] convertToGL:tocco]; 
```

//移动精灵的动作

```
id muovi = [CCMoveTo actionWithDuration:1 position:tocco2];

[MySprite runAction:muovi];

//if you want turn the sprite left o right
if (tocco2.x < MySprite.position.x) {

    id sx = [CCFlipX actionWithFlipX:NO];

    [MySprite runAction:sx];

}else{

    id dx = [CCFlipX actionWithFlipX:YES];

    [MySprite runAction:dx];

} 
```

}

# asp.net-mvc-4 - 如何在 MVC4 中创建会员功能

> ID：12782162
> 
> 赞同：2
> 
> 时间：2012-10-08T12:52:34.940
> 
> 标签：asp.net-mvc-4, authorization, membership

我正在尝试为暂定的网络社区实现一个简单的授权功能。

我不知道我是否应该使用 Microsoft 内置的会员资格/授权功能或

从头开始创建一切。我想知道内置功能是否有任何限制

这可能会阻碍专业的企业程序员使用它。如果是这样，我该怎么做

从头开始编写代码？如果没有，是否有任何教程可以构建

MVC4 中的成员资格/授权功能？我正在使用 MVC4 但没有以前的经验

在 MVC 项目中具有成员资格/授权功能。似乎MVC4中的功能是

与 MVC3 有点不同，让我很难跟进 MVC3 教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:18:58.827

> 我想知道内置功能是否有任何限制可能会阻碍专业企业程序员使用它。

不，我不知道，我*认为*StackOverflow 也使用了这个 ASP.NET 成员资格功能。[相关链接](https://meta.stackexchange.com/questions/109967/how-has-stack-overflow-implemented-an-custom-asp-net-membership-provider)

> 如果没有，是否有任何教程可以构建，MVC4 中的成员资格/授权功能？

你将不得不谷歌出来。

> 我正在使用 MVC4，但以前没有 MVC 项目中的成员资格/授权功能的经验。似乎 MVC4 中的功能与 MVC3 中的功能有些不同，让我很难跟进 MVC3 教程。

是的，在 MVC3 和 MVC4 中实现和使用成员资格/授权功能是相同的。

**会员/授权功能介绍的一些链接：**

*   [http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx)
*   [http://www.codeproject.com/Articles/281573/ASP-NET-Membership-and-Role-Provider](http://www.codeproject.com/Articles/281573/ASP-NET-Membership-and-Role-Provider)
*   [http://msdn.microsoft.com/en-us/library/6e9y4s5t(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6e9y4s5t(v=vs.100).aspx)

# xml - Perl XML::libXML 不再工作：无法加载 '/usr/lib/perl5/vendor_perl/5.8/msys/auto/XML/LibXML/Common/Common.dll

> ID：12782169
> 
> 赞同：0
> 
> 时间：2012-10-08T12:53:04.390
> 
> 标签：xml, perl, libxml2

> **可能重复：**
> [无法为模块 XML::LibXML::Common 加载“/usr/lib/perl5/vendor_perl/5.8/msys/auto/XML/LibXML/Common/Common.dll”：dlopen：Win32 错误 126](https://stackoverflow.com/questions/12779400/cant-load-usr-lib-perl5-vendor-perl-5-8-msys-auto-xml-libxml-common-common-dl)

我有这个以前工作过的虚拟脚本：

```
#!/usr/bin/perl
use utf8; 
use strict;
use warnings;
use XML::LibXML;

my $parser = XML::LibXML->new();

print "test ok\n"; 
```

但是今天，它引发了一个错误：

```
Can't load '/usr/lib/perl5/vendor_perl/5.8/msys/auto/XML/LibXML/Common/Common.dll' for module XML::LibXML::Common: dlopen: Win32 error 126 at /usr/lib/perl5/5.8/msys/DynaLoader.pm line 230.
 at /usr/lib/perl5/vendor_perl/5.8/msys/XML/LibXML.pm line 12
Compilation failed in require at /usr/lib/perl5/vendor_perl/5.8/msys/XML/LibXML.pm line 12.
BEGIN failed--compilation aborted at /usr/lib/perl5/vendor_perl/5.8/msys/XML/LibXML.pm line 12.
Compilation failed in require at D:\Projets\Maroc Scada\Rabat 41 - Images T200i-DRR-F200C\script_PI\test.pl line 5.
BEGIN failed--compilation aborted at D:\Projets\Maroc Scada\Rabat 41 - Images T200i-DRR-F200C\script_PI\test.pl line 5. 
```

我今天完全重新安装了 Perl 并重新安装了模块 libxml-perl 0.08 但这没有帮助。

任何想法将不胜感激......

# python - 通过匹配不索引从列表中删除项目

> ID：12782170
> 
> 赞同：3
> 
> 时间：2012-10-08T12:53:04.933
> 
> 标签：python

我有一个看起来像这样的嵌套列表：

```
lst = [[1,2,3],["a","b","c"],[4,5,6]] 
```

我想通过匹配而不是通过索引从这个列表中删除一个项目。例如，如何删除`[4, 5, 6]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:56:42.350

你可以使用`lst.remove(...)`：

```
lst = [[1,2,3],["a","b","c"],[4,5,6]]
lst.remove([4,5,6])
print lst 
```

输出：

```
[[1, 2, 3], ['a', 'b', 'c']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:23:08.250

如果您想删除*多个*匹配项（`lst.remove`只会删除第一个匹配项），那么使用 list-comp 重新创建没有您想要的元素的列表通常更容易......

```
lst = [el for el in lst if el != [4,5,6]] 
```

# xcode - 持续集成需要 sudo：xcode-select、bamboo 和多个 Xcode 的

> ID：12782173
> 
> 赞同：3
> 
> 时间：2012-10-08T12:53:08.717
> 
> 标签：xcode, continuous-integration, sudo, bamboo

现在已将尽可能多的术语推入主题行：

我们有一个构建机器 (Mac)，它是一个竹代理。由于需要能够构建旧版本的应用程序，我们在机器上安装了几种不同的 Xcode。

为了自动化这一点，我们需要能够为构建机器发出 xcode-select。然而，这个命令需要 Sudo；我还没有找到可接受的 CI 解决方案。（我想出的只是在传递的 SUDO_ASKPASS 环境中明文发送 sudo 密码或将 sudo/build passwd 留空。）

这是通过竹子完成的，所以我也不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-24T16:56:05.153

而不是使用 SUDO_ASKPASS 您可以简单地编辑您的 sudoers 文件（使用`visudo`）并添加以下行：

```
%admin  ALL=NOPASSWD: /usr/bin/xcode-select 
```

`sudo code-select`当您是计算机的管理员时，这将防止系统询问密码。

# asp.net - 在配置文件中添加引用

> ID：12782178
> 
> 赞同：0
> 
> 时间：2012-10-08T12:53:25.717
> 
> 标签：asp.net, reference, web-config, app-config

有没有办法将配置文件的特定部分保存在另一个文件中并引用它？

```
 <configuration> 
    <appSettings>
        <add key="LogConfigXMLPath" value="D:\IIS_CODE\virtualworkspace\LogConfig.xml"/>
        <add key="ErrorLoggerName" value="ErrorLogger"/>
        <add key="CouchDBHost" value="ctsintbmvstcdb"/>
        <add key="CouchDBPort" value="5984"/>
        <add key="CouchDBBaseDatabase" value="virtualworkplace"/>
    </appSettings>
    </configuration> 
```

是否有任何可能的方法来引用这种代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:20:47.410

如果您询问是否可以从外部文件引用 appSettings 部分，那么可以。

**外部.config**文件：

```
<appSettings>
    <add key="LogConfigXMLPath" value="D:\IIS_CODE\virtualworkspace\LogConfig.xml"/>
    <add key="ErrorLoggerName" value="ErrorLogger"/>
    <add key="CouchDBHost" value="ctsintbmvstcdb"/>
    <add key="CouchDBPort" value="5984"/>
    <add key="CouchDBBaseDatabase" value="virtualworkplace"/>
</appSettings> 
```

然后，在您的**app.config**或**web.config**中：

```
<?xml version="1.0"?>
<configuration>
    <appSettings file="C:\PathToYourExternalConfigFile\External.config">
        <add key="SomeAdditionalKey" value="Value1" />
    </appSettings>
</configuration> 
```

# python - ImportError DLL 加载失败，但在命令行导入有效

> ID：12782181
> 
> 赞同：0
> 
> 时间：2012-10-08T12:53:42.497
> 
> 标签：python, windows, dll, import

我正在尝试让 python 程序在 Windows 盒子上运行。我让它在我的开发窗口盒子上运行，但是当我将它转移到另一个窗口盒子时，我不断得到：

ImportError：DLL 加载失败：%1 不是有效的 Win32 应用程序

跟踪表明它在导入时遇到了问题，它基本上会通过几个内部 python 程序（相互导入），然后进入 ArcPy 领域。最终，它似乎尝试过的最后一个是 arcgisscripting。

当我在那个框中输入解释器并输入“import arcgisscripting”时，我没有收到任何错误（只是一个新的 >>> 光标），所以我开始认为这个错误有点误导。如果（例如）python 代码编译为 64 位并且您尝试在 32 位 python 上运行，我会读到此错误通常会出现。

一位同事建议，如果python找不到一些必要的代码，有时会发生错误。所以我检查并做了 SET 语句，现在 PATH 和 PYTHONPATH 变量似乎是等价的。我仍然收到此错误，不知道该怎么办。我宁愿不必做诸如卸载问题框上的东西并重新安装之类的事情。该框是共享资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:09:32.377

终于找到了。arcgisscripting 的 .pyd 文件（基本上是特定于 python 的 .dll）位于 C:\Program Files (x86)\ArcGIS\Desktop10.1\bin\arcgisscripting.pyd

如果我将 DependencyWalker 指向该文件，则表明找不到该文件的多个依赖项。

所以似乎解决方案是：1）找到 ImportError 标记的最后一个文件 2）在文件系统上查找其 .pyd 文件 3）在该 .pyd 上运行 DependencyWalker 以找出丢失的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T18:20:06.287

我最近从经历同样的痛苦中学到了一些教训。

首先要运行几项检查。

1.  **检查所有组件是否在相同的操作系统基础上运行，64 位或 32 位。如果您的机器是 64 位安装，请确保您有 64 位版本的 python。Oracle Instant Client 的安装也是如此；如果您的机器正在运行它，它也需要是 64 位的。**

2.  如果你想让exe真正独立于软件，你将不得不打包oracle即时客户端并设置系统路径变量。

3.  我用过的最简单的运行方式是 py_installer，它开箱即用，运行良好，但我仍在努力包含即时客户端安装程序。

4.  在导入 cx_oracle 之前设置这些系统路径

    ```
    # instantClientPath is the path to the instant client folder
    os.environ["PATH"] = instantClientPath+";"+os.environ["PATH"] 
    os.environ["ORACLE_HOME"] = instantClientPath 
    os.environ["LD_LIBRARY_PATH"] = instantClientPath 
    os.environ["TNS_ADMIN"] = instantClientPath 
    os.environ["NLS_LANG"] = "american_america.WE8MSWIN1252" 
    ```

# javascript - 直接 JSON.stringify Javascript 对象是一个好习惯吗？

> ID：12782183
> 
> 赞同：2
> 
> 时间：2012-10-08T12:53:49.727
> 
> 标签：javascript, json

我有定义为 Javascript 对象的数据结构。我喜欢将它们串起来以通过网络发送。仅仅呼吁`JSON.stringify()`他们似乎有效。但这是一个好习惯吗？

是否有任何特殊情况可能会中断（例如静态方法？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:59:07.707

如果你只是发送数据而不是函数，它会正常工作。但是 JSON 只能携带*值*，而不是*函数*。较旧的浏览器（< IE8）本身没有 JSON 对象，因此您必须提供回退解决方案（像 jQuery 这样的框架会自动实现回退）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:20:42.057

JSON 是 JS 的一个子集，所以从这个角度来看，它是 100% 没问题的。

JSON 还打算转换成 JS 进行操作，再转换回来，发送出去或存储。

因此，将对象转换为 JSON 是预期目的的一部分，而不是必须手动编写所有 JSON。

在特殊情况下，JSON 可以不包含**任何**函数，不包含循环引用……除了字符串、数字和布尔值，嵌套对象和数组内部。

如果这已经是您的数据的格式，那么您就完成了。

IE6 和 7 没有原生 JSON 支持。
但是，json2.js 是来自 Douglas Crockford 的文件，所有本机实现都基于该文件。
如果`!window.JSON`然后加载该文件，它将在 OldIE 中正常工作。

# c# - 在带有 IN 子句的 Crystal Reports 中使用 RecordSelectionFormula

> ID：12782184
> 
> 赞同：0
> 
> 时间：2012-10-08T12:54:05.120
> 
> 标签：c#, crystal-reports-xi

当我使用 RecordSelectionFormula 属性将以下内容传递给 Crystal Report 时，它无法生成并出现错误“The ) is missing。这是一个有效的 Where 子句，只是不确定如何在 Crystal Reports XI 中使用它。

```
SelectionFormula = "({vInventory_Items.DonorId} IN (8, 1))";
Report.ReportSelectionFormula = SelectionFormula; 
```

错误是；

```
Error in formula  Record_Selection: 
'({vInventory_Items.DonorId} IN (8, 1))'
The ) is missing. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:11:05.040

我使用了以下内容，它解决了我的问题；

```
DataTable dtRawData = new DataTable();
SqlConnection loConn = ConnectionUtilities.getServerConnection();
loConn.Open();
SqlDataAdapter sdaSysObjects = new SqlDataAdapter(psSqlStatement, loConn);
sdaSysObjects.Fill(dtRawData);
Report.SetDataSource(dtRawData); 
```

# mysql - Mysql对字符串数据的列排序

> ID：12782186
> 
> 赞同：1
> 
> 时间：2012-10-08T12:54:06.590
> 
> 标签：mysql, sorting

**注意：**由于数据库表中存在我的输入数据，我已经编辑了我的问题。

我有一个表，它包含 varchar 数据。该列中存在的数据是这样的。

```
"bcd"
cde
abcd
'xxx'
(zzz) 
```

现在我想按字母顺序排序。我试过这个查询

```
select my_col from tbl_user order by ltrim(REPLACE(my_col,'"', '')) ASC 
```

它的输出如下：

```
'xxx'
(zzz)
abcd
"bcd"
cde 
```

但我想要的输出是，意味着在排序时必须按照字母顺序排序，无论是否`"`存在。

```
abcd
"bcd"
cde
'xxx'
(zzz) 
```

我怎样才能做到这一点？？？。有任何想法吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:56:02.573

您可以对引号进行替换，例如：

```
select my_col 
from tbl_user 
order by ltrim(REPLACE(my_col,'"', '')) ASC 
```

但这会增加很多开销......也许有一个更有效的内置解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:58:03.353

```
select * from 
tlb_user
order by replace(my_col, '"', '); 
```

[SqlFiddle](http://sqlfiddle.com/#!2/dddc1/5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:56:12.230

Trim() 排序时去掉引号；

```
...
order by
   trim(both '"' from `your_column`) asc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T12:56:18.767

试试这个：

```
select my_col 
from tbl_user 
order by
  SUBSTR(my_col, 2) ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:01:09.553

您可以使用以下`mysql_real_escape_string` 链接忽略特殊字符：http: [//in.php.net/mysql_real_escape_string](http://in.php.net/mysql_real_escape_string)

# javascript - 在 jsp 页面中进行的修改未在项目中显示效果

> ID：12782187
> 
> 赞同：0
> 
> 时间：2012-10-08T12:54:12.783
> 
> 标签：javascript, jsp, myeclipse

在我的一个jsp页面按钮中，我使用javascript进行验证，我保留了如下代码：

```
alert("hai"); 
```

我建立了我的项目，`"hai"`每当提交页面时我都会得到。

后来我将javascript中的代码更改为：

```
alert("hello"); 
```

我已经运行了这个项目，但我没有得到`"hello"`，而不是我得到了 hia 即以前编写的代码。

我正在使用 myeclipse 8.6。
我认为它的项目文件构建问题你已经手动重建它，但没有结果。

请有任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:37:07.943

服务器问题..重新启动服务器并运行应用程序...

如果仍然发生，请使用新服务器

# javascript - 如何将字符串与多个值进行比较？

> ID：12782195
> 
> 赞同：20
> 
> 时间：2012-10-08T12:54:31.357
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 中的 array.contains(obj)](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)

就像是：

```
if (mystring == "a" || mystring == "b" || mystring =="c") 
```

我想做：

```
if (mystring in ("a", "b", "c")) 
```

是否可以？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T12:55:47.147

你可以这样[`indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)使用

```
if ( [ 'a', 'b', 'c' ].indexOf( mystring ) > -1 ) { ... } 
```

* * *

**编辑**使用 ES7 进行了一些简化。截至今天，只有 Chrome 47+ 和 FF 43+ 似乎支持它：

```
if ( [ 'a', 'b', 'c' ].includes( mystring ) ) { ... } 
```

*   [上 MDN`Array.prototype.includes()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T12:57:25.360

使用 indexOf 是首先想到的，但是您必须记住，**在较旧的 IE 中****没有`.indexOf`**功能（因此您必须使用自定义代码来模拟它，或者直接使用[jQuery.inArray](http://docs.jquery.com/Utilities/jQuery.inArray)或[underscore.js indexOf](http://underscorejs.org/#indexOf)）。

```
if ([ 'a', 'b', 'c' ].indexOf( mystring ) > -1 ) { ... } 
```

* * *

旁注：正如您通过查看 jQuery 源代码中的 inArray 定义所看到的，编写自己的 indexOf 替换非常容易。所以就像我说的 - 编写你自己的方法，从其他库复制粘贴它，或者如果你希望能够在每个浏览器中使用 indexOf，就使用这些库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T12:59:00.383

你可以用老办法

```
a = "a";
b = ["a","b","c","d"];

function check(a,b){
    i = 0;        
    for (i=0;i<b.length;i++) {
        if (a === b[i]) {
            return true;
        }
    }
    return false;
}

alert(check (a,b)) 
```

请注意[indexOf 是 ECMA-262 标准的最新补充；因此，它可能不会出现在所有浏览器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T12:56:10.010

您可以使用`indexOf`

```
[1,2,3].indexOf(1) will give 0
[1,2,3].indexOf(4) will give -1 
```

因此，您可以检查 indexOf 是否返回 -1。

类似的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T13:01:09.337

我认为是这样的：

```
if (["a", "b", "c"].indexOf(mystring) != -1) {
    // do something
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T13:19:21.243

```
if (["a", "b", "c"].indexOf(mystring) != -1) {} 
```

这将是最好的方法，但它可能不适用于某些浏览器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T12:58:34.880

您的版本是三个字符中最快的版本，也是最易读的版本。

使用更多可能的值，您可以使用以下内容：

```
var c;
if (s.length==1 && (c=s.charAt(0))>='a' && c<='c') { 
```

但这主要是为了好玩...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T13:24:21.597

另外：您可以为比较创建一个字符串扩展名：

```
String.prototype.in = function(){
  return  ~[].slice.call(arguments).indexOf(this.valueOf()) ? true : false;
}
//usage
var myStr = 'a';
myStr.in('a','b','c'); //=> true
'd'.in('a','b','c');   //=> false 
```

对于较旧的浏览器：此[MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)包含用于`Array.indexOf`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-08T12:57:07.090

就像是

```
foreach (str in strings) { 
    if (mystring.contains(str)) { 
        ... 
    } 
} 
```

可能工作。

# python - 在 Python 中嵌入函数

> ID：12782196
> 
> 赞同：0
> 
> 时间：2012-10-08T12:54:35.743
> 
> 标签：python, function, turtle-graphics

我在 Python 3 中创建了一个使用 Turtle Graphics 绘制美国国旗的程序：

```
import turtle
import time
import random

def draw_rectangle(length, height):
    turtle.up()
    x = -150
    y = 150
    C = height*(7/13)
    D = length*(2/5)
    L = stripe_width = float(round(height/13,1))

    ## Draw rectangle first.
    turtle.color(0,0,0)
    turtle.begin_fill()
    turtle.setpos(x,y)
    turtle.down()
    turtle.forward(length)
    turtle.right(90)
    turtle.forward(height)
    turtle.right(90)
    turtle.forward(length)
    turtle.right(90)
    turtle.forward(height)
    turtle.end_fill()

    ## Then draw the stripes.
    x1 = -150
    y1 = 150-L
    for z in range(13):
        if z%2 == 0:
            r = s = t = 0
        else:
            r = s = t = 1
        turtle.up()
        turtle.speed(100)
        turtle.setpos(x1,y1)
        turtle.setheading(90)
        turtle.down()
        turtle.color(r,s,t)
        turtle.begin_fill()
        turtle.forward(L)
        turtle.right(90)
        turtle.forward(length)
        turtle.right(90)
        turtle.forward(L)
        turtle.right(90)
        turtle.forward(length)
        turtle.end_fill()
        y1 -= L

    ## Finally draw the stars rectangle overlapping the stripes, next is stars.
    x2 = -150+D
    y2 = 150.5-C
    turtle.up()
    turtle.setpos(x2,y2)
    turtle.down()
    turtle.color(0,0,0)
    turtle.begin_fill()
    turtle.forward(D)
    turtle.right(90)
    turtle.forward(C)
    turtle.right(90)
    turtle.forward(D)
    turtle.right(90)
    turtle.forward(C)
    turtle.end_fill()
    turtle.up()

    turtle.bye
    draw_star(-length, height)

def draw_star(l, h):
    for z in range(50):
        if z < 7:
            row = 140
            draw_starrows(row)
        if z < 14:
            row = row - 20
            draw_starrows(row)
        if z < 21:
            row = row - 20
            draw_starrows(row)
        if z < 28:
            row = row - 20
            draw_starrows(row)
        if z < 35:
            row = row - 20
            draw_starrows(row)
            ## This gets the turtle pen out of the way at the very end.
            turtle.up()
            turtle.setpos(-180,100)
        break

def draw_starrows(row):
    x = -160
    y = 150
    for z in range(10):
        x += 15
        turtle.up()
        turtle.color(1,1,1)
        turtle.speed(100)
        turtle.setpos(x,row)
        turtle.begin_fill()
        turtle.down()
        turtle.forward(6.154)
        turtle.left(144)
        turtle.forward(6.154)
        turtle.left(144)
        turtle.forward(6.154)
        turtle.left(144)
        turtle.forward(6.154)
        turtle.left(144)
        turtle.forward(6.154)
        turtle.left(144)
        turtle.end_fill()
    turtle.bye

##def get_color():
##    r = g = b = 0
##    color = r = g = b
##    return color

def draw_flag():
    A = 200
    height = int(A)
##    length = height*1.9
##    C = height*(7/13)
##    D = length*(2/5)
##    E = F = union_height/10
##    G = H = union_length/12
##    stripe_width = height/13
##    diameter_star = stripe_width*(4/5)
    draw_rectangle(height*1.9, height)

draw_flag() 
```

现在对于最后一步，我想用一个函数 def get_color(color) 替换所有的 turtle.color(0,0,0) 和 (1,1,1)，它可以获取上面的颜色，但是，我是有点困惑如何做到这一点。需要使用颜色功能的其他功能是：

draw_rectangle(长度、高度、颜色) draw_star(l、h、颜色)

我也不想使用任何全局变量。

哦，我无法解决的另一件事是为什么当你运行程序时我的图形窗口没有关闭，我在适当的地方使用了 turtle.bye() （我认为），但我总是必须手动关闭海龟窗口.

任何帮助将不胜感激，谢谢。

编辑 2015 年 3 月：

这是更新的 get_color 解决方案：

```
def get_color(color2):
    ## If color2 equals 1, then make the color white.
    if color2 == 1:
        r = g = b = 1
        return (r, g, b)
    ## If color2 equals 0, then make the color red.
    if color2 == 0:
        r = 1
        g = 0
        b = 0
        return (r, g, b)
    ## If color2 equals 2, then make the color black.
    if color2 == 2:
        r = 0
        g = 0
        b = 1
        return (r, g, b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:13:47.843

您可以从一个函数返回多个值。

```
def get_color():
    r = g = b = 0
    return r, g, b

red, green, blue = get_color() 
```

您可以将多个返回值传递给这样的函数：

```
turtle.color(*get_color()) 
```

`get_color()`返回三个值，用作 的 3 个参数`turtle.color`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:14:34.207

1.我认为你不需要这样的功能，你可以很简单地设置颜色（对于单个标志）：

```
turtle.color("red") 
```

或者

```
turtle.color("#285087") 
```

或任何你想要的颜色。

编辑：那么我认为应该是这样的：

```
def get_color(color):
    c = color
    return c

a = get_color("blue") 
```

你可以像这样使用它：

```
turtle.color(a) 
```

2.您的窗口没有关闭，因为它应该是：

```
turtle.bye() 
```

或在您的代码中仅

```
turtle.bye 
```

同样在您的代码中，turtle.bye 出现两次并且出现在错误的位置 - 您应该将其放在代码的末尾（至少，对我来说，它是这样工作的）：

```
draw_flag()
turtle.bye() 
```

我希望它有所帮助。

# python - 双引号分隔符中的引号

> ID：12782207
> 
> 赞同：0
> 
> 时间：2012-10-08T12:55:26.303
> 
> 标签：python, string

我阅读了官方手册并找到了这些示例。

1.  ```
    '"Isn\'t," she said.' 
    ```

    如果我将其更改`\'`为`'`

    ```
    '"Isn't," she said.' 
    ```

    python 会告诉你这是无效的语法。

    但是，如果我将其更改`'`为`"`

    ```
    '"Isn"t," she said.' 
    ```

    它打印没有错误。

    我认为里面的`" "`,`'`会被视为一个字符，但是为什么 python 告诉我有语法错误？

2.  如果我把它改成

    ```
    '''"Isn't," she said.''' 
    ```

    它打印正常。和有什么区别

    ```
    '''"Isn't," she said.''' 
    ```

    和

    ```
    '"Isn't," she said.' 
    ```

    ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:57:17.247

*从第一个单引号开始的*所有*`'`内容都是一个字符串，包括双引号。在单引号字符串中使用多少个双引号并不重要。字符串在遇到的*下一个*单引号处结束，这就是为什么您必须转义文字中的任何文字单引号。*

 *在您的第二个示例中，您使用*三引号*字符串。然后 Python 将所有内容视为`'''`字符串文字的下一个三引号 ( ) 部分。

Python 接受 4 种不同形式的引用来分隔文字字符串：

```
'single quotes'
"double quotes"
'''tripled single quotes'''
"""tripled double quotes""" 
```

请注意，当您使用三重引号时，可以使用换行符：

```
"""Line one
line two
line three""" 
```

你不能用单引号字符串来做到这一点。*

# sql - SQL Server UPDATE 来自另一个表的多行值

> ID：12782210
> 
> 赞同：1
> 
> 时间：2012-10-08T12:55:33.183
> 
> 标签：sql, sql-server-2008

我有一个包含 Id 和 Rcount 的表。我需要更新每个成员的 Rcount。像这样的东西

```
Id| Rby| Rcount
1 | 0  | 0
2 | 1  | 0
3 | 1  | 0
4 | 3  | 0
5 | 4  | 0
6 | 4  | 0
7 | 4  | 0
8 | 7  | 0 
```

我通过使用获得价值

```
SELECT Rby, COUNT(Rby) FROM member GROUP BY Rby;

Rby| COUNT(Rby)
0  | 1
1  | 2
3  | 1
4  | 3
7  | 1 
```

如何将结果更新到 Rcount 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:01:23.500

```
UPDATE TableName 
SET Rcount = a.Cnt
FROM TableName t
INNER JOIN (SELECT Rby, COUNT(Rby) Cnt FROM member GROUP BY Rby) a ON a.Rby= t.Rby 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:55:33.340

这是一个看起来有点不同的答案，但效果很好

```
declare @table table(Id int, Rby int, Rcount int)

insert @table values(1,0,0),(2,1,0),(3,1,0),(4,3,0),(5,4,0),(6,4,0),(7,4,0),(8,7,0)

;with a as
(
select  id, rby, Rcount, count(*) over(partition by rby) new_rcount 
from @table
)
update a set Rcount= new_rcount
where coalesce(Rcount) <> new_rcount

select * from @table 
```

结果：

```
Id  Rby Rcount
1   0   1
2   1   2
3   1   2
4   3   1
5   4   3
6   4   3
7   4   3
8   7   1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:59:09.063

尝试这个：

```
UPDATE m1
SET m1.Rcount = m2.RbyCount
FROM member m1
INNER JOIN
(
   SELECT Rby, COUNT(Rby) RbyCount
   FROM member 
   GROUP BY Rby
) m2 ON m1.Rby = m2.Rby
INNER JOIN member m3 ON m1.Id = m3.Id; 
```

## [这是一个现场演示](https://data.stackexchange.com/stackoverflow/query/81927)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:59:29.437

您可以[在此处查阅更新手册](http://msdn.microsoft.com/en-us/library/ms177523.aspx)：

```
;with Table2 as (
  SELECT Rby, COUNT(Rby) as n FROM member GROUP BY Rby
)
UPDATE member 
SET member.Rby = Table2.n
FROM Table2 
    INNER JOIN dbo.Table1 
    ON (Table2.Rby = member.Rby); 
```

# c# - Asmx webmethod 不发送响应

> ID：12782217
> 
> 赞同：0
> 
> 时间：2012-10-08T12:56:04.063
> 
> 标签：c#, asp.net, web-services, apache-flex, asmx

我有一个用于 Adob​​e Flex 客户端的 .net 2 (ASMX) Web 服务。大多数服务方法返回 XML 并且一切正常，但是我的`SaveChanges()`方法接受 Xml 来返回布尔值。每当调用此方法时，它只会向客户端返回 100-Continue 标头并且没有结果，Flex 等待（可能是超时）然后认为它失败并启动错误处理程序。

服务中的断点显示 100-Continue 消息在到达服务方法的主体之前发送（如预期的那样），然后该方法很好地到达 return 语句，但客户端没有收到进一步的响应。

我已经设置了[Membrane](http://www.membrane-soa.org/soap-monitor/)来嗅探客户端和服务之间的肥皂消息，它也看不到来自服务的响应，而且在似乎报告的请求中也看不到添加的“期望：100-继续”分配。

**编辑 ：**

1.  什么可以阻止在达到 return 语句后发送响应消息？

2.  我没有注意到来自任何其他服务方法的 100-continue 消息，从我读到的是 HTTP 说“请等待实际结果”。有没有办法在服务中禁用它并简单地发送结果？

**服务方式：**

```
[WebMethod]
public bool saveTemplateChanges( int id, string planTitle, string xml )
{
    using ( var spd = SeatPlanDb.Connect() ) // <= HTTP/1.1 100 CONTINUE is sent before this breakpoint
    {
        var templateChangesXml = this.CalculateDifferences( id, xml, "template" );
        spd.UpdateTemplateXml( templateChangesXml );
        spd.RunTemplateSeatplanFixups( id, planTitle );
    }

    return ( true ); // <= breakpoint reached
} 
```

**要求：**

```
POST /Service.asmx HTTP/1.1
Host: localhost:58357
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Content-type: text/xml; charset=utf-8
SOAPAction: "http://tempuri.org/saveTemplateChanges"
Content-length: 12073
X-Forwarded-For: 127.0.0.1

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
                   xmlns:s="http://www.w3.org/2001/XMLSchema"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body>
    <tns:saveTemplateChanges xmlns:tns="http://tempuri.org/">
      <tns:id>100249</tns:id>
      <tns:planTitle>untitled</tns:planTitle>
      <tns:xml><performance ID="100249"><!-- Valid XML --></performance></tns:xml>
    </tns:saveTemplateChanges>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# c++ - 在 std::set 中使用 operator != 作为 operator < 是否安全？

> ID：12782225
> 
> 赞同：2
> 
> 时间：2012-10-08T12:56:39.953
> 
> 标签：c++, algorithm, set

我有一个包含一些成员的结构，并且我有一个实现的 operator== 。在 operator== 的帮助下实现 operator< 是否安全？我想在一个集合中使用这个结构，并且我想检查这个结构是否是唯一的。

```
struct Data
{
  std::string str1;
  std::string str2;
  std::string str3;
  std::string str4;

  bool operator==(const Data& rhs)
  {
    if (str1 == rhs.str1
     && str2 == rhs.str2
     && str3 == rhs.str3
     && str4 == rhs.str4
       )
      return true;
    else
      return false;
  }

  // Is this ok??
  bool operator<(const Data& rhs)
  {
    return !this->operator==(rhs);
  }
} 
```

那么当我将这个结构插入到 std::set 时会发生什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T13:02:19.247

不，这很不安全。实现它的最简单方法是通过`std::tie`.

```
#include <tuple>
struct Data
{
  std::string str1;
  std::string str2;
  std::string str3;
  std::string str4;

  bool operator<(const Data& rhs) const // you forgot a const
  {
      return 
      std::tie(str1, str2, str3, str4) < 
      std::tie(rhs.str1, rhs.str2, rhs.str3, rhs.str4);
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T12:59:23.390

不，那不安全。您定义的方式`<`，`a < b`并且`b < a`将同时为真。

> 那么当我将这个结构插入到 std::set 时会发生什么？

该行为是未定义的，因此任何事情都是允许的，并且在不同的实现中可能会有所不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T12:59:12.923

好吧，您的代码表明 if `A!=B`，这意味着`A<B`这绝对是错误的，因为它也可以是`A>B`。

您将必须以与使用 相同的方式实现您的`>`和运算符，这意味着通过逐个比较对象。由您决定如何根据其成员来确定是“更多”还是“更少” 。`<``operator==``A``B`

如果您使用任何标准库容器中的操作符，您将获得 UB。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T15:26:22.313

你需要用`operator<`自己的术语来定义。你不能`operator<`根据 来实现`operator==`，尽管你可以做相反的事情。

考虑这个真值表中的悖论：

```
"a" < "b" : TRUE
"b" < "a" : TRUE 
```

如果您的实现`operator<`产生了上述悖论，如果您按照以下方式实现它，`operator==`那么您没有正确实现严格的弱排序。你实施的是一团糟。

您需要确定哪些成员字符串优先于其他字符串，然后按从最重要到最不重要的顺序在它们之间进行比较。

例如，如果字符串的优先级是，从最重要到最不重要：

1.  `str1`
2.  `str2`
3.  `str3`
4.  `str4`

...然后这会产生以下算法`operator<`：

```
bool operator<(const Data& rhs) const
{
  if( str1 < rhs.str1 )
    return true;
  if( rhs.str1 < str1 )
    return false;
  if( str2 < rhs.str2 )
    return true;
  if( rhs.str2 < str2 )
    return false;
  if( str3 < rhs.str3 )
    return true;
  if( rhs.str3 < str3 )
    return false;
  if( str4 < rhs.str4 )
    return true;
  if( rhs.str4 < str4 )
    return false;

  return false;
} 
```

使用它，您可以选择`operator==`根据`operator<`. 您假设这样做的时间复杂度固有的低效率，但是：

```
bool operator==(const Data& rhs) const
{
  return !operator<(rhs) && !rhs.operator<(*this);
} 
```

# java - 在java中生成一个16个字符的唯一键

> ID：12782227
> 
> 赞同：4
> 
> 时间：2012-10-08T12:56:56.770
> 
> 标签：java, hashcode

我想知道在 java 中生成 16 字符唯一键的最佳方法是什么？是否有任何已经提供此类功能的开源库。此外，即使在服务器重新启动后，我也需要保持唯一性。

您能否建议针对上述要求的最佳方法。

也有人可以指出我在哪里可以获得编写强大的哈希码方法的参考，其中哈希码将从许多字母数字字段中生成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T13:05:28.227

您可以在 JRE 中使用[UUID类。](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html)它生成一个 128 位的密钥。

至于哈希码，这在 JRE 中也可用：

```
MessageDigest md = MessageDigest.getInstance("MD5");
byte[] hashCode = md.digest(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:07:24.277

```
Random r = new SecureRandom();
byte[] b = new byte[16];
r.nextBytes(b);
String s = org.apache.commons.codec.binary.Base64.encodeBase64String(b);
return s.substring(0, 16); 
```

良好而稳健的方式

# c# - C# 保存图像质量差

> ID：12782242
> 
> 赞同：2
> 
> 时间：2012-10-08T12:58:01.770
> 
> 标签：c#, image, save

我在保存图片时遇到问题。使用此代码，我将两张图片放在一起。但是当我保存它们时，质量比原始图片的质量差。

```
 Image Image1 = Image.FromFile(openFileDialogOpenPicture1.FileName);
            Image Image2 = Image.FromFile(openFileDialogOpenPicture2.FileName);

            int imageHeight = 0;
            if (Image1.Height > Image2.Height)
                imageHeight = Image1.Height;
            else
                imageHeight = Image2.Height;

            Bitmap finalImage = new System.Drawing.Bitmap(Image1.Width + Image2.Width, imageHeight);
            using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(finalImage))
            {
                //set background color
                g.Clear(System.Drawing.Color.Black);

                //go through images and draw it on the final image
                int offset = 0;
                g.DrawImage(pictureBoxBackground1.Image, new System.Drawing.Rectangle(offset, 0, Image1.Width, Image1.Height));
                offset += Image1.Width;
                g.DrawImage(pictureBoxBackground2.Image, new System.Drawing.Rectangle(offset, 0, Image2.Width, Image2.Height));

                var eps = new EncoderParameters(1);
                eps.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, 100L);
                var ici = GetEncoderInfo("image/jpeg");
                finalImage.Save(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + @"\TestImage.jpg", ici, eps);
            } 
```

我也尝试保存未压缩的图片，但这只会使文件文件更大而不是质量更好。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:08:36.403

我使用了这个 GetEncoder 方法：

```
private ImageCodecInfo GetEncoder(ImageFormat format)
{
    ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();

    foreach (ImageCodecInfo codec in codecs)
    {
        if (codec.FormatID == format.Guid)
        {
            return codec;
        }
    }
    return null;
} 
```

使用 GetEncoder(ImageFormat.Jpeg) 调用它；并删除了对 pictureBoxBackground1&2 的引用（否则它不会构建），据我所知，最终结果是高质量的。

# python - python中fibosum（spoj）的NZEC

> ID：12782246
> 
> 赞同：-2
> 
> 时间：2012-10-08T12:58:26.903
> 
> 标签：python

该代码在我的解释器上运行良好，但在 spoj 上提供了 NZEC。

```
cases = int(raw_input())
for i in xrange(cases):
    k = 0
    n,m = map(int, sys.stdin.readline().split())
    sq5 = Decimal(sqrt(5))
    phi = (1 + sq5)/2                          #Refer wikipedia page for calculating fibonacci numbers
    print (int(Decimal(phi)**(m+2)/sq5 + Decimal(0.5)) - int(Decimal(phi)**(n+1)/sq5 + Decimal(0.5)))%1000000007 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:12:37.333

我怀疑你得到的是 NZEC，因为输入中有额外的空格。但是，处理它们很简单。立即读取输入，然后用空格对其进行标记。

```
import sys
tokenizedInput = sys.stdin.read().split()    # Delimited by white spaces
cases = int(tokenizedInput[0])
readAt = 1
for i in xrange(cases):
    k = 0
    n,m = map(int, tokenizedInput[readAt:readAt+2])
    sq5 = Decimal(sqrt(5))
    phi = (1 + sq5)/2                          #Refer wikipedia page for calculating fibonacci numbers
    print (int(Decimal(phi)**(m+2)/sq5 + Decimal(0.5)) - int(Decimal(phi)**(n+1)/sq5 + Decimal(0.5)))%1000000007
    readAt = readAt + 2    # Increment the position to read at by 2 
```

如果你提交这个，你应该得到一个 TLE。正如 Mark Dickinson 在问题评论中指出的那样，这是一种低效的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T12:25:43.450

这可能是由于**溢出错误**

当 10^9 中的 m 值很大时，内置的*pow()*函数，即 ** 运算符，效果不如预期。

```
>>> (1.1)**1000000000

Traceback (most recent call last):
File "<pyshell#0>", line 1, in <module>
1.1**(100000000)
OverflowError: (34, 'Numerical result out of range') 
```

即使*math.pow()*也不起作用。

```
>>> import math
>>> math.pow(1.1,1000000000)

Traceback (most recent call last):
File "<pyshell#2>", line 1, in <module>
math.pow(1.1,1000000000)
OverflowError: math range error 
```

而是使用矩阵方法而不是*比内特的斐波那契公式来完成***O(ln m)**。*由于在Binet 公式*中为幂创建朴素函数可能最终会达到**O(m)**

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-04T06:19:56.393

也检查我的代码：#include using namespace std;

```
#define mod 1000000007

long long result[2][2]={{1,1},{1,0}};
long long transformation[2][2]={{1,1},{1,0}};    
void matrixMul(long long a[2][2],long long b[2][2])
{
 int i,j,k;
 long long re[2][2] ={0};
 for(i=0;i<2;i++) {
    for(j=0;j<2;j++) {
        for(k=0;k<2;k++) {
            re[i][j] = (re[i][j] + (a[i][k]*b[k][j])%mod ) % mod;
        }
    }
 }
 for(i=0;i<2;i++)
 {
    for(j=0;j<2;j++)
        result[i][j]=re[i][j];
 }
}

void initialize() {
result[0][0]=result[0][1]=result[1][0]=1;
result[1][1]=0;
}
void power(int n)
{
if(n==1)
return ;
power(n/2);
matrixMul(result,result);
if(n&1)
{
    matrixMul(result,transformation);
}
}

int main()
{   
int t;
cin>>t;
while(t--){
initialize();
long long n,m;
cin>>n>>m;
long long x,y;
if(n == 0 || n == 1) {
        x=n;
}
else {
    power(n);
    x=result[0][0]-1;
}
initialize();
if(m == 0 || m == 1) {
        x=m;
}
else {
    power(m+1);
    y=result[0][0]-1;
}
if(x>y){
    x=x-y;
}
else
    x=y-x;

cout<<((x+mod)%mod)<<endl;
}
return 0;
} 
```****

# html - 页脚下方不需要的空间

> ID：12782247
> 
> 赞同：1
> 
> 时间：2012-10-08T12:58:27.740
> 
> 标签：html, css, browser, footer, space

当浏览器窗口被拉伸到一定高度（似乎在大屏幕上）时，我的页脚下方出现了一些不需要的空间。

只有当页面上没有很多内容（高度）时才会发生这种情况。

[http://yyy.comuf.com/PORTV2/fold.php](http://yyy.comuf.com/PORTV2/fold.php)

我希望页脚始终贴在浏览器窗口的底部，但我不想使用 position:fixed;。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:06:01.360

利用`position: absolute;`

```
footer {
    background: none repeat scroll 0 0 #343334;
    border-top: 7px solid #4D4D4F;
    bottom: 0;
    left: 0;
    margin: 0 auto;
    position: absolute;
    width: 100%;
    z-index: 4000;
} 
```

# c++ - 为 I2C 配置 UM232H

> ID：12782248
> 
> 赞同：2
> 
> 时间：2012-10-08T12:58:29.757
> 
> 标签：c++, i2c

我在为 I2C 通信配置 UM232H 模块 (FTDI) 时遇到了一些问题。他们在 FTDI 的网站上找到了一些示例，但他们所有的示例都不适合我。我不知道我做错了什么。我希望 UM232H 与 PCF8574P 通信。在 PCF8574P 的一个引脚上，我有一个想要闪烁的 LED。这是我得到的设置。我使用了 ftd2xx.h 的头文件，但我仍然得到一个错误，他不能使用 ftStatus 命令或其他东西。

```
/******************************************************************************/
/*                           Include files                                    */
/******************************************************************************/
/* Standard C libraries */
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<string.h>

/* OS specific libraries */
#ifdef _WIN32
#include<windows.h>
#endif

#ifdef __linux
#include<dlfcn.h>
#endif

/* Include D2XX header*/
#include "ftd2xx.h"

/* Include libMPSSE header */
//#include "libMPSSE_i2c.h"

/******************************************************************************/

const BYTE MSB_FALLING_EDGE_CLOCK_BYTE_IN = '\x24';
const BYTE MSB_FALLING_EDGE_CLOCK_BYTE_OUT = '\x11';
const BYTE MSB_RISING_EDGE_CLOCK_BIT_IN = '\x22';

FT_STATUS ftStatus; //Status defined in D2XX to indicate operation result
FT_HANDLE ftHandle; //Handle of FT2232H device port
BYTE OutputBuffer[1024]; //Buffer to hold MPSSE commands and data to be sent to FT2232H
BYTE InputBuffer[1024]; //Buffer to hold Data bytes to be read from FT2232H
DWORD dwClockDivisor = 0x012B;   //Value of clock divisor, SCL Frequency = 60/((1+0x012B)*2) (MHz) = 100khz
DWORD dwNumBytesToSend = 0;  //Index of output buffer
DWORD dwNumBytesSent = 0,  dwNumBytesRead = 0,  dwNumInputBuffer = 0;

//////////////////////////////////////////////////////////////////////////////////////
// Below function will setup the START condition for I2C bus communication. First, set SDA, SCL high and ensure hold time
// requirement by device is met. Second, set SDA low, SCL high and ensure setup time requirement met. Finally, set SDA, SCL low
////////////////////////////////////////////////////////////////////////////////////////

void HighSpeedSetI2CStart(void)
{
    DWORD dwCount;
    for(dwCount=0; dwCount < 4; dwCount++) // Repeat commands to ensure the minimum period of the start hold time ie 600ns is achieved
        {
            OutputBuffer[dwNumBytesToSend++] = '\x80'; //Command to set directions of lower 8 pins and force value on bits set as output
            OutputBuffer[dwNumBytesToSend++] = '\x03';  //Set SDA, SCL high, WP disabled by SK, DO at bit „1‟, GPIOL0 at bit „0‟
            OutputBuffer[dwNumBytesToSend++] = '\x03'; //Set SK,DO,GPIOL0 pins as output with bit „1‟, other pins as input with bit „0‟
        }

    for(dwCount=0; dwCount < 4; dwCount++) // Repeat commands to ensure the minimum period of the start setup time ie 600ns is achieved
        {
            OutputBuffer[dwNumBytesToSend++] = '\x80'; //Command to set directions of lower 8 pins and force value on bits set as output
            OutputBuffer[dwNumBytesToSend++] = '\x01';  //Set SDA low, SCL high, WP disabled by SK at bit „1‟, DO, GPIOL0 at bit „0‟
            OutputBuffer[dwNumBytesToSend++] = '\x03'; //Set SK,DO,GPIOL0 pins as output with bit „1‟, other pins as input with bit „0‟
        }

    OutputBuffer[dwNumBytesToSend++] = '\x80';  //Command to set directions of lower 8 pins and force value on bits set as output
    OutputBuffer[dwNumBytesToSend++] = '\x00';  //Set SDA, SCL low, WP disabled by SK, DO, GPIOL0 at bit „0‟
    OutputBuffer[dwNumBytesToSend++] = '\x03'; //Set SK,DO,GPIOL0 pins as output with bit „1‟, other pins as input with bit „0‟

}

//////////////////////////////////////////////////////////////////////////////////////
// Below function will setup the STOP condition for I2C bus communication. First, set SDA low, SCL high and ensure setup time
// requirement by device is met. Second, set SDA, SCL high and ensure hold time requirement met. Finally, set SDA, SCL as input
// to tristate the I2C bus.
////////////////////////////////////////////////////////////////////////////////////////

void HighSpeedSetI2CStop(void)
{
    DWORD dwCount;
    for(dwCount=0; dwCount<4; dwCount++) // Repeat commands to ensure the minimum period of the stop setup time ie 600ns is achieved
        {
            OutputBuffer[dwNumBytesToSend++] = '\x80';  //Command to set directions of lower 8 pins and force value on bits set as output
            OutputBuffer[dwNumBytesToSend++] = '\x01';  //Set SDA low, SCL high, WP disabled by SK at bit „1‟, DO, GPIOL0 at bit „0‟
            OutputBuffer[dwNumBytesToSend++] = '\x03';  //Set SK,DO,GPIOL0 pins as output with bit „1‟, other pins as input with bit „0‟
        }

    for(dwCount=0; dwCount<4; dwCount++) // Repeat commands to ensure the minimum period of the stop hold time ie 600ns is achieved
        {
            OutputBuffer[dwNumBytesToSend++] = '\x80';  //Command to set directions of lower 8 pins and force value on bits set as output
            OutputBuffer[dwNumBytesToSend++] = '\x03';  //Set SDA, SCL high, WP disabled by SK, DO at bit „1‟, GPIOL0 at bit „0‟
            OutputBuffer[dwNumBytesToSend++] = '\x03';  //Set SK,DO,GPIOL0 pins as output with bit „1‟, other pins as input with bit „0‟
        }

    //Tristate the SCL, SDA pins
    OutputBuffer[dwNumBytesToSend++] = '\x80';  //Command to set directions of lower 8 pins and force value on bits set as output
    OutputBuffer[dwNumBytesToSend++] = '\x00';  //Set WP disabled by GPIOL0 at bit „0‟
    OutputBuffer[dwNumBytesToSend++] = '\x00'; //Set GPIOL0 pins as output with bit „1‟, SK, DO and other pins as input with bit „0‟

}

//////////////////////////////////////////////////////////////////////////////////////
// Below function will send a data byte to I2C-bus EEPROM 24LC256, then check if the ACK bit sent from 24LC256 device can be received.
// Return true if data is successfully sent and ACK bit is received. Return false if error during sending data or ACK bit can‟t be received
//////////////////////////////////////////////////////////////////////////////////////

BOOL SendByteAndCheckACK(BYTE dwDataSend)
{
    FT_STATUS ftStatus = FT_OK;
    OutputBuffer[dwNumBytesToSend++] = MSB_FALLING_EDGE_CLOCK_BYTE_OUT;  //Clock data byte out on –ve Clock Edge MSB first
    OutputBuffer[dwNumBytesToSend++] = '\x00';
    OutputBuffer[dwNumBytesToSend++] = '\x00'; //Data length of 0x0000 means 1 byte data to clock out
    OutputBuffer[dwNumBytesToSend++] = dwDataSend; //Add data to be send

    //Get Acknowledge bit from EEPROM
    OutputBuffer[dwNumBytesToSend++] = '\x80';  //Command to set directions of lower 8 pins and force value on bits set as output
    OutputBuffer[dwNumBytesToSend++] = '\x00';  //Set SCL low, WP disabled by SK, GPIOL0 at bit „0‟
    OutputBuffer[dwNumBytesToSend++] = '\x01'; //Set SK, GPIOL0 pins as output with bit „1‟, DO and other pins as input with bit „0‟
    OutputBuffer[dwNumBytesToSend++] = MSB_RISING_EDGE_CLOCK_BIT_IN; //Command to scan in ACK bit , -ve clock Edge MSB first
    OutputBuffer[dwNumBytesToSend++] = '\x0'; //Length of 0x0 means to scan in 1 bit
    OutputBuffer[dwNumBytesToSend++] = '\x87'; //Send answer back immediate command
    ftStatus = FT_Write(ftHandle, OutputBuffer, dwNumBytesToSend, &dwNumBytesSent); //Send off the commands
    dwNumBytesToSend = 0; //Clear output buffer

    //Check if ACK bit received, may need to read more times to get ACK bit or fail if timeout
    ftStatus = FT_Read(ftHandle, InputBuffer, 1, &dwNumBytesRead);   //Read one byte from device receive buffer

    if ((ftStatus != FT_OK) || (dwNumBytesRead == 0))
        { return FALSE;  /*Error, can't get the ACK bit from EEPROM */ }

    else
        if (((InputBuffer[0] & BYTE('\x1'))  != BYTE('\x0')) ) //Check ACK bit 0 on data byte read out
        {       return FALSE;  /*Error, can't get the ACK bit from EEPROM */ }

    OutputBuffer[dwNumBytesToSend++] = '\x80';  //Command to set directions of lower 8 pins and force value on bits set as output
    OutputBuffer[dwNumBytesToSend++] = '\x02';  //Set SDA high, SCL low, WP disabled by SK at bit '0', DO, GPIOL0 at bit '1'
    OutputBuffer[dwNumBytesToSend++] = '\x03'; //Set SK,DO,GPIOL0 pins as output with bit „1‟, other pins as input with bit „0‟

    return TRUE;

}

DWORD dwCount;

//Try to open the FT2232H device port and get the valid handle for subsequent access
char SerialNumBuf[64];
ftStatus = FT_ListDevices((PVOID)0,& SerialNumBuf, FT_LIST_BY_INDEX|FT_OPEN_BY_SERIAL_NUMBER);
ftStatus = FT_OpenEx((PVOID) SerialNumBuf, FT_OPEN_BY_SERIAL_NUMBER, &ftHandle);

if (ftStatus == FT_OK)
{
    // Port opened successfully
    ftStatus |= FT_ResetDevice(ftHandle);  //Reset USB device

    //Purge USB receive buffer first by reading out all old data from FT2232H receive buffer
    ftStatus |= FT_GetQueueStatus(ftHandle, &dwNumInputBuffer); // Get the number of bytes in the FT2232H receive buffer

    if ((ftStatus == FT_OK) && (dwNumInputBuffer > 0))

        FT_Read(ftHandle, &InputBuffer, dwNumInputBuffer, &dwNumBytesRead);   //Read out the data from FT2232H receive buffer
        ftStatus |= FT_SetUSBParameters(ftHandle, 65536, 65535); //Set USB request transfer size
        ftStatus |= FT_SetChars(ftHandle, false, 0, false, 0); //Disable event and error characters
        ftStatus |= FT_SetTimeouts(ftHandle, 0, 5000); //Sets the read and write timeouts in milliseconds for the FT2232H
        ftStatus |= FT_SetLatencyTimer(ftHandle, 16); //Set the latency timer
        ftStatus |= FT_SetBitMode(ftHandle, 0x0, 0x00);  //Reset controller
        ftStatus |= FT_SetBitMode(ftHandle, 0x0, 0x02); //Enable MPSSE mode

    if (ftStatus != FT_OK)
    { /*Error on initialize MPSEE of FT2232H*/ }

    Sleep(50); // Wait for all the USB stuff to complete and work

    //////////////////////////////////////////////////////////////////
    // Below codes will synchronize the MPSSE interface by sending bad command „xAA‟ and checking  if the echo command followed by
    // bad command „AA‟ can be received, this will make sure the MPSSE interface enabled and synchronized successfully
    //////////////////////////////////////////////////////////////////

    OutputBuffer[dwNumBytesToSend++] = '\xAA'; //Add BAD command „xAA‟
    ftStatus = FT_Write(ftHandle, OutputBuffer, dwNumBytesToSend, &dwNumBytesSent); // Send off the BAD commands
    dwNumBytesToSend = 0; //Clear output buffer

    do
    {
        ftStatus = FT_GetQueueStatus(ftHandle, &dwNumInputBuffer); // Get the number of bytes in the device input buffer
    }while ((dwNumInputBuffer == 0) && (ftStatus == FT_OK));    //or Timeout

    bool bCommandEchod = false;

    ftStatus = FT_Read(ftHandle, &InputBuffer, dwNumInputBuffer, &dwNumBytesRead);  //Read out the data from input buffer
    for (dwCount = 0; dwCount < dwNumBytesRead - 1; dwCount++) //Check if Bad command and echo command received
    {
        if ((InputBuffer[dwCount] == BYTE('\xFA')) && (InputBuffer[dwCount+1] == BYTE('\xAA')))
        {
                bCommandEchod = true;
                       break;
        }
    }

    if (bCommandEchod == false)
    {   /*Error, can‟t receive echo command , fail to synchronize MPSSE interface;*/ }

    ////////////////////////////////////////////////////////////////////
    //Configure the MPSSE settings for I2C communication with 24LC256
    //////////////////////////////////////////////////////////////////

    OutputBuffer[dwNumBytesToSend++] = '\x8A';  //Ensure disable clock divide by 5 for 60Mhz master clock
    OutputBuffer[dwNumBytesToSend++] = '\x97'; //Ensure turn off adaptive clocking
    OutputBuffer[dwNumBytesToSend++] = '\x8D';  //Enable 3 phase data clock, used by I2C to allow data on both clock edges
    ftStatus = FT_Write(ftHandle, OutputBuffer, dwNumBytesToSend, &dwNumBytesSent); // Send off the commands
    dwNumBytesToSend = 0; //Clear output buffer

    OutputBuffer[dwNumBytesToSend++] = '\x80';  //Command to set directions of lower 8 pins and force value on bits set as output
    OutputBuffer[dwNumBytesToSend++] = '\x03';  //Set SDA, SCL high, WP disabled by SK, DO at bit „1‟, GPIOL0 at bit „0‟
    OutputBuffer[dwNumBytesToSend++] = '\x13'; //Set SK,DO,GPIOL0 pins as output with bit ‟, other pins as input with bit „‟
    // The SK clock frequency can be worked out by below algorithm with divide by 5 set as off
    // SK frequency  = 60MHz /((1 +  [(1 +0xValueH*256) OR 0xValueL])*2)

    OutputBuffer[dwNumBytesToSend++] = '\x86';  //Command to set clock divisor
    OutputBuffer[dwNumBytesToSend++] = dwClockDivisor & '\xFF'; //Set 0xValueL of clock divisor
    OutputBuffer[dwNumBytesToSend++] = (dwClockDivisor >> 8) & '\xFF'; //Set 0xValueH of clock divisor
    ftStatus = FT_Write(ftHandle, OutputBuffer, dwNumBytesToSend, &dwNumBytesSent); // Send off the commands
    dwNumBytesToSend = 0; //Clear output buffer

    Sleep(20); //Delay for a while

    //Turn off loop back in case
    OutputBuffer[dwNumBytesToSend++] = '\x85'; //Command to turn off loop back of TDI/TDO connection
    ftStatus = FT_Write(ftHandle, OutputBuffer, dwNumBytesToSend, &dwNumBytesSent); // Send off the commands
    dwNumBytesToSend = 0; //Clear output buffer
    Sleep(30); //Delay for a while
}

BOOL bSucceed = TRUE;
BYTE ByteAddressHigh = 0x00;
BYTE ByteAddressLow = 0x80; //Set program address is 0x0080 as example
BYTE ByteDataToBeSend = 0x5A; //Set data byte to be programmed as example
HighSpeedSetI2CStart(); //Set START condition for I2C communication
bSucceed = SendByteAndCheckACK(0xAE); //Set control byte and check ACK bit.  bit 4-7 of control byte is control code,
// bit 1-3 of „111‟ as block select bits, bit 0 of „0‟represent Write operation
bSucceed = SendByteAndCheckACK(ByteAddressHigh); //Send high address byte and check if ACK bit is received
bSucceed = SendByteAndCheckACK(ByteAddressLow); //Send low address byte and check if ACK bit is received
bSucceed = SendByteAndCheckACK(ByteDataToBeSend); //Send data byte and check if ACK bit is received
HighSpeedSetI2CStop(); //Set STOP condition for I2C communication
//Send off the commands
ftStatus = FT_Write(ftHandle, OutputBuffer, dwNumBytesToSend, &dwNumBytesSent);
dwNumBytesToSend = 0; //Clear output buffer
Sleep(50); //Delay for a while to ensure EEPROM program is completed 
```

这是我画的示意图

# mysql - MySQL SQL 查询

> ID：12782249
> 
> 赞同：2
> 
> 时间：2012-10-08T12:58:30.827
> 
> 标签：mysql, sql, database

我正在尝试创建一个查询，该查询将检查过去 7 天我的数据库中有多少条目，它可以工作，但它只返回记录存在的日期。我希望它在没有数据的日子里返回 0，因为我正在生成一份 7 天的报告。

任何帮助都感激不尽！

```
SELECT DATE(created_date) AS date, 
    (SELECT COUNT(id) 
    FROM records 
    WHERE DATE(created_date) = date AND method = 'tw') AS total_records 
FROM records 
WHERE created_date > DATE_SUB(NOW(), INTERVAL 7 day) 
GROUP BY date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:16:57.663

```
SELECT DATE(NOW() + INTERVAL num.i DAY) AS date, 
       COUNT(r.id) AS total_records 
FROM 
        ( SELECT 0 AS i UNION ALL               -- where 0 means today
          SELECT -1 UNION ALL                   -- and -1 is yesterday
          ...
          SELECT -6
        ) AS num
    LEFT JOIN
        records AS r
            ON  r.created_date >= DATE(NOW() + INTERVAL num.i DAY)
            AND r.created_date < DATE(NOW() + INTERVAL 1+num.i DAY)
            AND r.method = 'tw'
GROUP BY num.i ; 
```

上的索引`(method, created_date)`将有助于提高效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:02:16.043

```
SELECT case when created_date is null
            then 0
            else DATE(created_date)
       end AS date,
      (SELECT COUNT(id)
       FROM records
       WHERE DATE(created_date) = date 
       AND method = 'tw') AS total_records 
FROM records
WHERE created_date > DATE_SUB(NOW(), INTERVAL 7 day)
OR created_date is null
GROUP BY date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:25:08.903

我怀疑将子查询从`SELECT`子句移动到`FROM`子句会提高性能。但是，如果您只想计算 tw 记录，则根本不需要子查询：

```
SELECT date(created_date) as date, 
       sum(case when method = 'tw' then 1 else 0 end) as total_records
FROM records 
WHERE created_date > DATE_SUB(NOW(), INTERVAL 7 day)
group by date(created_date) 
```

这将每天返回，假设每天至少有一种类型的记录。顺便说一句，如果您对`created_date`NULL 有疑问，那么您可以包括 Juergen 建议的条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T14:07:46.757

性能取决于您在 7 天的时间间隔内将拥有多少条记录。

```
select date, 
       sum(cnt) 
from (SELECT 
       count(id) as cnt, 
       date(created_date) as date
       FROM records 
      WHERE created_date > DATE_SUB(NOW(), INTERVAL 7 day)
            and method ='tw' 
            and created_date < now()
      group by date
      union all (select 0 as cnt, date(DATE_SUB(NOW(), INTERVAL 6 day)) as date)
      union all (select 0 as cnt, date(DATE_SUB(NOW(), INTERVAL 5 day)) as date)
      union all (select 0 as cnt, date(DATE_SUB(NOW(), INTERVAL 4 day)) as date)
      union all (select 0 as cnt, date(DATE_SUB(NOW(), INTERVAL 3 day)) as date)
      union all (select 0 as cnt, date(DATE_SUB(NOW(), INTERVAL 2 day)) as date)
      union all (select 0 as cnt, date(DATE_SUB(NOW(), INTERVAL 1 day)) as date)
      union all (select 0 as cnt, date(NOW()) as date)
     ) t

group by date 
```

# bash - shell 脚本掉落

> ID：12782251
> 
> 赞同：0
> 
> 时间：2012-10-08T12:58:39.903
> 
> 标签：bash, shell

我想编写自己的脚本以舒适地使用 tar（并且在 shell 方面也变得更有经验），我的脚本落在了：

```
cmd=$1
tarname=$2
files=${*:3}

echo_green(){
   echo -e "\033[1;32m$@\033[0m"
}
echo_blue(){
   echo -e "\033[1;34m$@\033[0m"
}
create(){
   echo_blue 'create'
   case $tarname in
      *.tar) tar -cvf $tarname $files; echo_green $tarname created;;
      *.tar.gz) tar -cvzf $tarname $files; echo $tarname created;;
      *.tar.bz2) tar -cvjf $tarname $files; echo_green $tarname created;;
   esac
}
show(){
   _cmd='tar -tv'
   case $tarname in
      *.tar) _cmd+='f' ;;
      *.tar.gz) _cmd+='zf' ;;
      *.tar.bz2) _cmd+='jf' ;;
   esac
   _cmd_all=$_cmd" $tarname | awk '{print \$6}' | cut -d'/' -f 1"
   echo $_cmd_all
   content="$($_cmd_all)"
   exit
   IFS='
'
   _cmd_folder=$_cmd" $tarname | head -1 | awk '{print \$6}' | cut -d'/' -f 1"
   echo $_cmd_folder
   folder="$($_cmd_folder)"
   all_in_one=1
   for l in $content; do 
      if [ ! $l = $folder ]; then
         all_in_one=0;
         break;
      fi
   done
   echo $all_in_one
}
case $cmd in
   "create") create;;
   "show") show;;
esac 
```

错误：

```
$ bash bash_lesson.sh show 4.tar 
tar -tvf 4.tar | awk '{print $6}' | cut -d'/' -f 1
tar: You may not specify more than one `-Acdtrux' or `--test-label' option
Try `tar --help' or `tar --usage' for more information. 
```

但如果我只是在控制台中运行有问题的字符串，一切都很好：

```
$ tar -tvf 4.tar | awk '{print $6}' | cut -d'/' -f 1
test_dir
bash_lesson 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:14:42.143

您需要评估字符串。实际上，在 line `content="$($_cmd_all)"`中，shell 使用参数调用 tar： `-tvf 4.tar | awk '{print $6}' | cut -d'/' -f 1` 也就是说，它`|`作为参数传递，而不是作为管道评估它。 `tar`看到两个`-f`选项并失败。只需将脚本更改为：

```
content="$(eval $_cmd_all)" 
```

# heroku - 我们如何访问 Heroku 中的 3rd 方日志文件

> ID：12782257
> 
> 赞同：1
> 
> 时间：2012-10-08T12:58:48.853
> 
> 标签：heroku

在我们托管在 Heroku 的应用程序中，我们使用 3rd 方代理进行监控和分析。应用程序为自己的活动写入日志“创建了一个日志文件”，如下所示。

```
Using heroku as Agent storage
Log file at heroku/log/dt_SampleApp_bootstrap_1.log 
```

是否可以通过 Heroku Toolbelt 访问这些文件？Heroku 日志未按预期显示此文件的内容。我也通过连接到heroku服务器，`heroku run bash`但找不到指定的文件。它不在`/app`文件夹下。你知道我们在哪里可以找到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:57:50.187

每个heroku dyno 都有一个临时文件系统。这意味着您应该将其视为只读的。

有关文件系统的更多信息：[https ://devcenter.heroku.com/articles/dynos](https://devcenter.heroku.com/articles/dynos)

您应该考虑将任何文件写入另一个服务（例如 S3）。

您使用什么宝石来创建日志？

# iphone - iPhone 5 视频格式

> ID：12782258
> 
> 赞同：1
> 
> 时间：2012-10-08T12:58:58.407
> 
> 标签：iphone, video

我正在使用 MPMoviePlayerViewController（对于将在 iPhone 4 和 iPhone 5 上运行的应用程序），如下所示：

```
 NSURL *videoURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:videoFile ofType:videoType]];  
    MPMoviePlayerViewController *moviePlayerVC = [[MPMoviePlayerViewController alloc] initWithContentURL:videoURL];  
    moviePlayerVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentViewController:moviePlayerVC animated:YES completion:nil];
    MPMoviePlayerController *moviePlayer = moviePlayerVC.moviePlayer;

    // Register to receive a notification when the movie has finished playing.  
    [[NSNotificationCenter defaultCenter] addObserver:self  
                                             selector:@selector(moviePlayBackDidFinish:)  
                                                 name:MPMoviePlayerPlaybackDidFinishNotification  
                                               object:moviePlayer];  
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayBackDidFinish:) 
                                                 name:MPMoviePlayerDidExitFullscreenNotification 
                                               object:moviePlayer];

    [moviePlayer prepareToPlay];
    [moviePlayer play]; 
```

但是视频编辑器需要知道要使用什么视频大小（即同时满足 iPhone 4 和 iPhone 5 的需求）。

在这里查看 Apple 的文档：http: [//developer.apple.com/library/ios/ipad/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html](http://developer.apple.com/library/ios/ipad/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html)

在视频技术下，它指出：

640 x 480 像素

那么，哪种视频尺寸最适合 iPhone 4 和 5。

例如，视频编辑器是否应该以 640 x 480 像素导出视频？

还是应该以 1136 x 640（即 iPhone 5 的屏幕尺寸）导出？

或者可能是 960 x 640 (iPhone 4)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:23:25.777

正如您在 Apple 文档中所指出的，支持的最大分辨率为 640 x 480，因此以任何更高的分辨率导出视频不会有任何额外的优势。

> iOS 中的视频技术支持播放具有 .mov、.mp4、.m4v 和 .3gp 文件扩展名并使用以下压缩标准的电影文件：
> 
> *   H.264 视频，最高 1.5 Mbps，640 x 480 像素，每秒 30 帧，H.264 基线配置文件的低复杂度版本，具有最高 160 Kbps 的 AAC-LC 音频，48 kHz，.m4v 立体声音频， .mp4 和 .mov 文件格式
>     
>     
> *   H.264 视频，最高 768 Kbps，320 x 240 像素，每秒 30 帧，Baseline Profile 最高 1.3 级，AAC-LC 音频最高 160 Kbps，48 kHz，立体声音频格式为 .m4v、.mp4 和 . mov文件格式
>     
>     
> *   MPEG-4 视频，最高 2.5 Mbps，640 x 480 像素，每秒 30 帧，具有最高 160 Kbps 的 AAC-LC 音频的简单配置文件，48 kHz，.m4v、.mp4 和 .mov 文件格式的立体声音频

# javascript - Microsoft JScript 运行时错误 - 某些传递的参数 - 未定义

> ID：12782259
> 
> 赞同：0
> 
> 时间：2012-10-08T12:58:58.463
> 
> 标签：javascript, jquery, asp.net, ajax

我在调用***goToXProfile(targetusername)***时出错，它引发了异常“Microsoft JScript 运行时错误：'test' 未定义”，其中 'test' 是传递的**targetusername**参数。

这是我的代码

```
function getQuestionByID() {
    var QuestionID = localStorage["QuestionID"];
    var postData = { 'Function': 'GetQuestionByID', 'QuestionID': questionID, 'UserID': userID };
    $.ajax({
        beforeSend: function () { $.mobile.showPageLoadingMsg(); }, //Show spinner
        complete: function () { $.mobile.hidePageLoadingMsg() }, //Hide spinner
        type: "GET",
        url: serviceUrl + "/Questions.aspx",
        data: postData,
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        jsonp: 'jsoncallback',
        success: function (result) {
            viewQuestion(result);
        },
        error: function (msg) {
            alert('Sorry, a problem happened');
        }
    });
}

function viewQuestion(data) {
    var QuestionData = (typeof data) == 'string' ? eval('(' + data + ')') : data;
    if (data !== undefined || data !== "0") {        
        $('#QuestionChosen').empty();

        var text = '<li data-role="list-divider" class="vote-list-divider">' + QuestionData.Pt_Title + '<span  onclick="voteForQuestion(1);" id="voteUp" class="ui-li-count vote">+ ' + QuestionData.Likes + '</span><span onclick="voteForQuestion(-1);" id ="voteDown" class="ui-li-count vote">- ' + QuestionData.Dislikes + '</span></li><li><a rel="external" onclick = "editQuestionChecking();"><h3>' + QuestionData.Sub_Name + '</h3><p>' + QuestionData.Pt_Body + '</p><a onclick="goToXProfile(' + QuestionData.SU_Username + ');">  CreatedBy: ' + QuestionData.SU_Username + '</a></a><a id="bookmarked"onclick="bookmarkQuestion();" data-icon="star" data-theme = "b"></a></li> ';      
        $('#QuestionChosen').append(text);
        $("#QuestionChosen").listview('refresh');
        var QoriginalVoteValue = QuestionData.OriginalVoteValue;
        if (QoriginalVoteValue == 1) {
            $('#voteUp').addClass("up-vote-active");            
        }
        else if (QoriginalVoteValue == -1) {
            $('#voteDown').addClass("down-vote-active");
        }
        bookmarked = QuestionData.Bookmarked
        if (bookmarked) {

            $('#bookmarked').attr("data-theme", "a").removeClass("ui-btn-up-b").addClass("ui-btn-up-a");          
        }       
        viewQuestionAnswers(localStorage["QuestionID"]);
    }
    else {
        alert("Sorry, this question can't be accessed, it's either deleted or you don't have permission to access it");
    }
}    

function goToXProfile(x) {
    getQuestionUser();
    localStorage["XUserID"] = localStorage["AskerID"];
    localStorage["XUsername"] = x;    
    alert("XUserID = " + localStorage["XUserID"]);
    alert("XUsername = " + localStorage["XUsername"]);
} 
```

有什么建议么？提前致谢。

# ruby-on-rails - Rails：collection_select 在编辑表单中

> ID：12782263
> 
> 赞同：1
> 
> 时间：2012-10-08T12:59:12.080
> 
> 标签：ruby-on-rails, ruby, methods, controller

我在尝试让我的编辑和更新操作适用于我的应用时遇到了真正的问题。我想编辑与项目链接的技术。

```
def edit
  @project = Project.find(params[:id])

  @project_technol = @project.projecttechnols.build
end

def update
   @project = Project.find(params[:id])
   @project.client = params[:new_client] unless params[:new_client].blank?
   @project.role = params[:new_role] unless params[:new_role].blank?
   @project.industry = params[:new_industry] unless params[:new_industry].blank?
   @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

   params[:technols][:id].each do |tech|

     if !tech.empty?

      @project_technol = @project.projecttechnols.build(:technol_id => tech) 

   end 
```

**项目型号：**

```
class Project < ActiveRecord::Base
  attr_accessible  :fullname, :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benefits, :edited_date, :end_date, :entry_date,:industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech , :technols, 

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

accepts_nested_attributes_for(:technols) 
```

当我进入编辑表单时，之前选择的技术没有在集合选择中选择。

**编辑表格：**

```
<%= f.fields_for(@project_technol) do |t| %>
  <%= t.label "Choose Technologies"%> </br>
  <%= t.collection_select(:id, Technol.all, :id, :tech, {}, {:multiple => true } ) %>
<% end %>

<% @project.technols.each do |t| %>
    <li><%= t.tech %> <%= link_to "Details", technol_path(t), method: :delete, %></li>
  <% end %> 
```

我可以看到使用`@project.technols.each do |t|`循环有哪些技术，因此可以找到它们，但它们没有显示在 collection_select 中。请有人指出我正确的方向。我是 Rails 的新手，所以它可能是我不理解的每一个简单的东西。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:26:02.850

尝试这样的事情：

```
<p><%= f.label :skills %><ul>
<% for skill in Skill.all %>
    <li>
      <%= check_box_tag "user[skill_ids][]", skill.id, @user.skills.include?(skill) %>
      <%= skill.name %>
    </li>
<% end %>
</ul>
</p> 
```

从更新操作中删除代码

```
 params[:technols][:id].each do |tech|

     if !tech.empty?

      @project_technol = @project.projecttechnols.build(:technol_id => tech) 

   end 
```

在您的项目模型中，您需要类似

`enter code here`attr_accessible :technols_ids

# sql - 最佳 Oracle SQL 查询分析工具

> ID：12782269
> 
> 赞同：2
> 
> 时间：2012-10-08T12:59:24.843
> 
> 标签：sql, performance, oracle

我正在寻找一种能够可视化 oracle SQL 查询性能的工具（免费或付费）。

最终目标是拥有一个易于阅读的工具（例如，不是 EXPLAIN PLAN 结果），并且我可以使用它来检测查询的慢部分（例如，什么条件下的连接实际上是为整个查询添加最多的部分）成本）。我**不需要**自动查询优化，我只是想看看为什么一个查询成本太高。此外，最好分析仪可以在没有特殊权限的情况下运行。

我已经尝试过 Quest SQL Optimizer for Oracle，看起来还不错，但是我缺少查看连接条件的选项（很像 SQL Developer）。此外，我无法轻松找到哪些连接占用了大部分查询成本。

你有什么经验？有这个工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T18:05:39.380

SQL Developer 内置了对运行 Oracle 的 SQL Tuning Advisor 的支持，这正是您正在寻找的东西。

但从长远来看，最好的办法是熟悉解释计划输出。您可以通过首先确保没有笛卡尔连接（总是很糟糕，通常是 SQL 中的错误）然后检查大表上的完整扫描，这意味着连接不依赖于索引，从而发现最容易实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:28:48.433

您可以选择与 Toad 完美集成的 Quest SQL Optimizer。

# php - 让一段代码在函数内部和类内部工作

> ID：12782270
> 
> 赞同：0
> 
> 时间：2012-10-08T12:59:27.713
> 
> 标签：php, mysql

基本上 displayCharityList () 中的代码有效。我决定将该代码放在该函数中，将该函数放在一个类中，然后尝试通过稍后调用它来使其工作......

不知何故，它没有从数据库中提取数据。查询在函数内部有效，但在 __contruct 中无效

谁能告诉我我做错了什么？

谢谢

```
<?php 
// Connection setup

class charity {
public $h;

        function __construct () {
            $c = new PDO('mysql:host=localhost;dbname=seafarer_v2','seafarer_user','supp0rt1243');
            $h = $c->query('SELECT * FROM mnwg_charities')->fetchAll(PDO::FETCH_ASSOC);
            $this->$h = $this->h;
            $this->displayCharity = $this->displayCharityList();
        }

    Public function displayCharityList(){

        echo "<table><tr><th>Name</th><th>Contact</th><th>Post code</th><th>Phone</th><th>Website</th><th>Email</th></tr>";
            foreach ($this->h as $r){

                      echo "<tr><td>";
                      echo $r['Name'];
                      echo "</td>";
                      echo "<td>";
                      echo $r['Contact'];
                      echo "</td>";
                      echo "<td>";
                      echo $r['Postcode'];
                      echo "</td>";
                      echo "<td><div class=\"phone\">";
                      echo "<img src=\"http://m.intertrustgroup.com/images/icon_phone.png\" style=\"margin-right:.5em\">{$r['Phone']}</br>";
                        if($r['Fax']){  echo "<img src=\"http://www.sliksvn.com/gfx/icon_fax.gif\" style=\"margin-right:.5em\">{$r['Fax']}";}
                      echo "</div></td>";
                      echo "<td>";
                      echo "<a href=\"{$r['Website']}\" target=\"_blank\"> Visit Website </a>";
                      echo "</td>";
                      echo "<td>";
                      echo "<a href=\"mailto:{$r['Email']}\">Send Email</a>";
                      echo "</td></tr>";

            }
           echo "</table>";
     }
 }

?>

<?php
$hola = new charity();
echo $hola->displayCharity(); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:30:15.963

一些指针，因为 db 连接与慈善类无关，但查询需要您将连接传递给类，这称为依赖注入。否则，因为它代表类的每次初始化，它将查询数据库，如果您要访问另一个不需要该查询的方法，则不需要这样做。还有你的方法`echo`而不是`return`方法，没关系，但你需要将调用放在你想要放置的地方。从该方法返回然后在您想要放置的位置使用单个回显更容易。希望能帮助到你。

```
<?php 

class charity {

    function __construct (PDO $con) {
        $this->con = $con;
    }

    private function get_charities(){
        return $this->con->query('SELECT * FROM mnwg_charities')->fetchAll(PDO::FETCH_ASSOC);
    }

    public function displayCharityList(){

        $return = "<table><tr><th>Name</th><th>Contact</th><th>Post code</th><th>Phone</th><th>Website</th><th>Email</th></tr>";
        foreach ($this->get_charities() as $r){
            $return .= "<tr><td>".$r['Name']."</td>";
            $return .= "</td>";
            $return .= "<td>";
            $return .= $r['Contact'];
            ...
            ...
        }
        $return .= "</table>";
        return $return;
    }
}

$con = new PDO('mysql:host=localhost;dbname=seafarer_v2','seafarer_user','supp0rt1243');

$hola = new charity($con);

echo $hola->displayCharity();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:03:56.747

尝试删除括号

```
class charity

class charity () //which is wrong 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:05:37.900

类 Charity 不是删除括号的函数。

将类名大写是一个好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:09:43.637

```
 <?php
 $hola = new charity();
 echo $hola->displayCharity(); //this line no needed
 ?> 
```

不需要第二行，因为您在构造函数本身中调用 displayCharity 函数..所以无需再次调用...然后检查您的查询是否正常工作...

# asp.net - 发布 ASP.net 看不到程序集

> ID：12782272
> 
> 赞同：4
> 
> 时间：2012-10-08T12:59:28.627
> 
> 标签：asp.net, c#-4.0, iis-6

我有一个非常简单的 ASP.net 应用程序用于学习。我已经使用生产数据库的副本（这个初始应用程序是只读的）在我的笔记本电脑上开发了它（两个控件——下拉框和一个数据网格，加上一个 EF 类），所以我可以最小化我必须理解的变量当我将它部署在客户更安全的环境中时。

因为我使用的是 EF，所以我当然需要 .net4。那是我的第一个挑战。IIS 没有 .net4 的应用程序池。得到了修复（我认为）。这是我的出版物包页面： ![在此处输入图像描述](../Images/4786cbd345f6ff075a40e9119336594b.png)

现在，我得到了一些奇怪的东西......我用谷歌搜索了它，但仍然不明白。也许有人可以给我一些建议。

![实际错误信息](../Images/fbb2b25bf6448755f7a8aa6646612d4e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:02:33.837

尝试在页面声明中添加`src`带有文件路径的属性。`CodeBehind`这应该可以解决您的问题。

src 属性放在这里：

```
<%@ Page ... Src="/path_to_BrowseWD.aspx.cs" ... %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:10:44.683

将此属性添加到第一行 CodeFile="BrowseWO.aspx.cs" 并像这样删除 CodeBehind 属性

# jquery - 使用 $ 别名而不产生全局冲突

> ID：12782274
> 
> 赞同：0
> 
> 时间：2012-10-08T12:59:30.490
> 
> 标签：jquery

为了学习 jQuery，我正在阅读“Jquery: CookBook”一书。在这本书中，我经历了使用“jQuery”的 $ 别名而不产生全局冲突的概念。根据本书，语法如下：

```
 <html>
  <head> 
   <script type="text/javascript" src="jquery-min.js">
   </script>
   </head>
   <body>
   <script>
   (function($){         //function to create private scope with $ parameter
        alert("Hello");    //private scope and using $ without worry of conflict
    })(jQuery); 
   </script>
</body>
</html> 
```

但是上面的代码不起作用，并且 firebug 显示语法错误。我找不到任何基于上述概念的文件。谁能告诉我如何正确使用上述语法。在此先感谢。我知道上面的语法看起来很奇怪。但书上说：

所有 jQuery 代码都可以封装在以下自调用函数中：

```
(function($){ //function to create private scope with $ parameter
//private scope and using $ without worry of conflict
})(jQuery); //invoke nameless function and pass it the jQuery object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:45:15.197

经过一番努力，我终于得到了答案。有一个用于此的 jquery API，称为 jQuery.noConflict()。以下是它的使用方法：

```
 <!doctype html>
        <html>
            <head>
                <title>No conflict</title>
                <script src="jquery.js"></script>
            </head>

            <body>
            <p>Click Here </p>

            <script type="text/javascript">
            $.noConflict();
           jQuery(document).ready(function($) {

   // Code that uses jQuery's $ can follow here.            

    $('p').click(function(){

                alert("Hello");
                });

      });

            </script>

            </body>
        </html> 
```

# php - 我的 sql 的 php 代码输出问题

> ID：12782275
> 
> 赞同：0
> 
> 时间：2012-10-08T12:59:42.753
> 
> 标签：php, sql

嘿，伙计们，我正在尝试连接到数据库并从表中收集一些数据，`zuordnung`但它无法正常工作，我得到的一切都是白页，我很沮丧，因为我找不到错误，也许另一双眼睛会看到它所以在这里是我到目前为止：

```
<html>
 <head>
  <title>PHP Test</title>
 </head>
 <body>
 <?php
    include ("db_login.php");

    $link = mysql_connect($host, $user, $pass) or die ("Keine Verbindung zu der Datenbank moeglich.");
    mysql_select_db($db, $link);

    $sql = "SELECT ID_Zuordnung, HW_Typ, Hostname_alt, Username, Emailadresse, Datum_Ausgabe, Abteilung 
        FROM zuordnung
        WHERE Status_Tausch='OK' AND Status_Altgeraet='NOK'
        ORDER BY Hostname_alt;";

    $result = mysql_query($sql);
    $resultarray = mysql_fetch_array($result); 
            echo('<p>'.$resultarray['HW_Typ']."</p>");
            echo('<p>'.$resultarray['Hostname_alt']."</p>");
            echo('<p>'.$resultarray['Username']."</p>");
            echo('<p>'.$resultarray['Emailadresse']."</p>");
            echo('<p>'.$resultarray['Datum_Ausgabe']."</p>");
            echo('<p>'.$resultarray['Abteilung']."</p>");
    ?> 
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:01:32.113

```
while($resultarray = mysql_fetch_array($result))
{
            echo('<p>'.$resultarray['HW_Typ']."</p>");
            echo('<p>'.$resultarray['Hostname_alt']."</p>");
            echo('<p>'.$resultarray['Username']."</p>");
            echo('<p>'.$resultarray['Emailadresse']."</p>");
            echo('<p>'.$resultarray['Datum_Ausgabe']."</p>");
            echo('<p>'.$resultarray['Abteilung']."</p>");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:03:30.090

试试这个

`require_once($_SERVER['DOCUMENT_ROOT']."db_login.php");`

而不是包括

`resultarray`如果您有超过 1 条记录，您需要在 while 循环中回显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:05:13.363

你忘了循环
使用循环吗，像这样。

```
while($resultarray = mysql_fetch_array($result))
{
echo('<p>'.$resultarray['HW_Typ']."</p>");
            echo('<p>'.$resultarray['Hostname_alt']."</p>");
            echo('<p>'.$resultarray['Username']."</p>");
            echo('<p>'.$resultarray['Emailadresse']."</p>");
            echo('<p>'.$resultarray['Datum_Ausgabe']."</p>");
            echo('<p>'.$resultarray['Abteilung']."</p>");

} 
```

# sql - 从此查询中消除子查询

> ID：12782277
> 
> 赞同：1
> 
> 时间：2012-10-08T12:59:45.733
> 
> 标签：sql, join

我有这些桌子

**用户**

```
User_Id int PK, User_Name varchar(50) 
```

**页**

```
Page_Id int PK, Page_Name varchar(50) 
```

**允许**

```
Permission_Id int PK , User_Id int FK, Page_Id int FK, 
Read bit, Write bit, Delete bit 
```

**要求：**

1.  根据提供的查询以从该页面的`Page`加号中选择全部。`Read, Write, Delete``Permission``@User_Id`
2.  如果`@User_Id`未通过，则应使用`null`in选择所有页面`Read, Write, Delete`。
3.  如果提供`@User_Id`的内容不存在，`Permission`则应`Read, Write, Delete`选择为`null`.
4.  在某些情况下`permission`，某些但并非全部`pages`与 a 相关联的记录可能会出现`user`，在这种情况下，所有记录都`pages`应该出现，并且对于那些没有关联的页面，`user_id`应该`null`在`Read, Write, Delete`列中。

**我所做的是这个**

```
declare @User_Id int=null; 

    SELECT 
     page.Page_Name,
     page.Page_Id,
     isnull((select Read from Permission where
         (@User_Id is null OR User_Id = @User_Id ) and 
         (Permission.Page_Id = Page.Page_Id)),0)
         as Read,
     isnull((select Write from Permission where 
         (@User_Id is null OR User_Id = @User_Id) and 
         (Permission.Page_Id = Page.Page_Id)),0) 
         as Write,
     isnull((select Delete from Permission where 
         (@User_Id is null OR User_Id = @User_Id) and 
         (Permission.Page_Id = Page.Page_Id)),0) 
         as Delete,
     isnull((select Export from Permission where 
         (@User_Id is null OR User_Id = @User_Id) and 
         (Permission.Page_Id = Page.Page_Id)), 0) 
         as Export  
    FROM Page 
```

此查询工作正常并满足所有要求，但正如您所看到的`sub queries`，我想消除它，一个选项可能是`sql functions`，但我想知道是否有其他方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:08:37.923

声明@User_Id int=null;

```
SELECT 
    page.Page_Name,
    page.Page_Id,
    ISNULL(Read,0) AS Read
    ISNULL(Write,0) AS Write,
    ISNULL(Delete,0) AS Delete,
    ISNULL(Export,0) AS Export
FROM 
    Page
    LEFT JOIN Permission ON Page.Page_ID = Permission.Page_ID AND Permission.User_ID = @User_ID 
```

如果您也加入@userID 参数，那么当它为空时，它将与权限中的任何行都不匹配，因此您的值将为空

# java - 如何在运行时将 Java Enum 转换为 Json？

> ID：12782278
> 
> 赞同：3
> 
> 时间：2012-10-08T12:59:49.477
> 
> 标签：java, json, reflection, enums, annotations

我有一个枚举如下：

```
public enum SomeType {
    SOME_KEY (some-display-value-as-label);
    private String label;

    private SomeType(String label){
        this.label=label;
    }
    public String getLabel() {
        return label;
    }
    public void setLabel(String value) {
        this.label = value;
    }
} 
```

现在我正在使用谷歌反射库并提出了一个自定义注释，我在上面用@makejson之类的注释标记了上面的枚举。

这个想法是在应用程序启动时使用 @makejson 注释对所有类的反射进行扫描，然后为每个枚举生成 json 对象。

我想做的是在启动课上：

```
Reflections reflections = new Reflections("my.package.name");
Set<Class<?>> annotatedClasses = reflections.getTypesAnnotatedWith(MakeJson.class);
    for (Class<?> annotated : annotatedClasses) {
        if  (annotated.isEnum()) {
            MakeJson j = annotated.getAnnotation(MakeJson.class);
            Object[] constants = annotated.getEnumConstants();
            Method[] methods = annotated.getMethods();
            Method getValue = null;
            for (Method m : methods) {
                if ("valueOf".equals(m.getName())) {
                    getValue = m; //get Reference of valueOf method
                    break;
                }    
            }
            //List<Object> labels = Arrays.asList(m.invokem.getReturnType().isEnum()(annotated));
            for (Object constant : constants) {
                System.out.println(constant.toString());
                System.out.println(getValue.invoke(annotated,constant.toString()));
            }
        }
    } 
```

此代码因以下异常而中断：线程“main”java.lang.IllegalArgumentException 中的异常：参数数量错误

任何帮助将不胜感激。最终目标是能够获得 SomeType{SOME_KEY:"display-value"} 的 json 对象。为此，我无法使用反射获得枚举常量的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:10:50.670

我之前的回答是错误的。这里发生的是 Enum 类定义了一个`public static valueOf(Class<?>, String)`方法。当 java 编译器将你`enum SomeType`转换成一个类时，它会生成一个`public class SomeType extends Enum<SomeType>`, 并将另一个`valueOf(String)`方法添加到你的`SomeType`类中。因此，您最终会在您的类中使用*两个*名为“valueOf”的方法。在我看来，您实际上是在打电话`valueOf(Class, String)`，但实际上是打算打电话`valueOf(String)`

要解决该问题，请将循环从：

```
Method[] methods = annotated.getMethods();
Method getValue = null;
for (Method m : methods) {
    if ("valueOf".equals(m.getName())) {
        getValue = m; //get Reference of valueOf method
        break;
    }    
} 
```

到

```
Method getValue = annotated.getMethod("valueOf", new Class<?>[]{String.class}); 
```

然后应该解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T22:24:13.070

那这个呢：

```
 Map tmp = new HashMap<SomeType, String>();
    for(SomeType type : SomeType.values()){
        tmp.put(type, type.getLabel());
    }
    String desiredJson = new Gson().toJson(tmp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:40:50.340

所以这就是我最终要做的事情：我修改了@makejson 注释以包含一个名为 label 的字段，该字段是必需的，并且应该设置为可以返回与枚举中的 SOME_KEY 关联的描述的方法。

注释如下所示：

```
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface MakeJson {
    String label();
} 
```

所以枚举声明处的注释看起来像 @makejson(label="getLabel") public enum SomeType { ... // 和上面的问题一样 }

然后在解析类中，我只需从注解的方法中获取此方法，并为正确的常量调用它：

```
 Reflections reflections = new Reflections("my.package.name");
    Set<Class<?>> annotatedClasses = reflections.getTypesAnnotatedWith(MakeJson.class);
    for (Class<?> annotated : annotatedClasses) {
        if  (annotated.isEnum()) {
            Jsonify j = annotated.getAnnotation(MakeJson.class);
            Object[] constants = annotated.getEnumConstants();
            Method m = annotated.getMethod(j.label()); // get the method name
            for (Object constant : constants) {
                System.out.println(constant.toString());
                System.out.println(m.invoke(constant));
                // construct json object here
            }
        }
    } 
```

所以最后我通过使用注解在运行时插入这个信息来绕过无法使用反射调用方法的问题！

# debugging - 在 VS2012 中调试时，如何让 Azure 模拟器启动特定主机头定义的站点？

> ID：12782279
> 
> 赞同：3
> 
> 时间：2012-10-08T12:59:50.163
> 
> 标签：debugging, azure, visual-studio-2012, emulation

我有一个 Azure 部署，在一个 Web 角色上配置了两个站点，如下所示：

```
<WebRole name="Studio" vmsize="Small">
    <Sites>
      <Site name="Studio" physicalDirectory="..\Studio">
        <Bindings>
          <Binding name="HttpIn" endpointName="HttpIn" hostHeader="studio.mydomain.localhost" />
        </Bindings>
      </Site>
      <Site name="Admin" physicalDirectory="..\Admin">
        <Bindings>
          <Binding name="HttpIn" endpointName="HttpIn" hostHeader="admin.mydomain.localhost" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="HttpIn" protocol="http" port="80" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
</WebRole> 
```

我的主机文件中也映射了地址：

```
127.0.0.1   studio.mydomain.localhost
127.0.0.1   admin.mydomain.localhost 
```

这很好用，如果我在浏览器中使用`http://studio.mydomain.localhost:81/`and进行测试`http://admin.mydomain.localhost:81/`，那么我会得到两个不同的索引页面，正如预期的那样。

但是，如果我在 Visual Studio 中按 F5，它会坚持尝试启动`http://127.0.0.1:81/`，这当然会导致 404 Bad Request 错误。

有什么方法可以让 VS 立即从 F5 启动正确的地址？这只是一件小事，但每次都必须重新输入地址很费时间。

而且，当我们讨论这个主题时，当我按下 F5 时，Azure 如何选择我要启动的角色？我在同一个 Azure 项目中有一个 Web 服务角色。为什么不尝试启动它？它们是我缺少的一些设置，还是全部由 ServiceDefinition.csdef 中出现的顺序控制？

我看过以下文章（以及其他文章）。虽然两者都提供了丰富的信息，但我在任何一个中都看不到答案：

[http://blog.elastacloud.com/2011/01/11/azure-running-multiple-web-sites-in-a-single-webrole/](http://blog.elastacloud.com/2011/01/11/azure-running-multiple-web-sites-in-a-single-webrole/)

[http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:17:22.950

实际上有一种解决方法可以启动所有站点（尽管您需要单击一个按钮）。首先，您需要知道如何：

*   获取每个站点的主机头 (ServiceDefinition)
*   获取当前端口（RoleEnvironment）
*   获取没有主机头的站点的当前 IP (RoleEnvironment)

这是一个获取信息、聚合信息并启动 Internet Explorer 的小应用程序（您可以改进代码以跳过 TCP 端点等...）：

```
 static void Main(string[] args)
    {
        var document = System.Xml.Linq.XDocument.Load(Path.Combine(args[0], "ServiceDefinition.csdef"));
        var siteBindings = from binding in document.Descendants()
                           where binding.Name.LocalName == "Binding"
                           select new
                           {
                                Role = binding.Parent.Parent.Parent.Parent.Attribute("name").Value,
                                EndpointName = binding.Attribute("endpointName").Value,
                                HostHeader = binding.Attribute("hostHeader") != null ? binding.Attribute("hostHeader").Value : null
                           };

        var endpoints = RoleEnvironment.Roles.SelectMany(o => o.Value.Instances)
                                             .SelectMany(o => o.InstanceEndpoints);

        foreach (var siteBinding in siteBindings)
        {
            var endpoint = endpoints.FirstOrDefault(o => o.Value.RoleInstance.Role.Name == siteBinding.Role);
            Process.Start("iexplore.exe", String.Format("{0}://{1}:{2}", endpoint.Value.Protocol, siteBinding.HostHeader ?? endpoint.Value.IPEndpoint.Address.ToString(), endpoint.Value.IPEndpoint.Port));
        }
    } 
```

现在，对于 Visual Studio 集成，转到**Tools**、**External Tools**并添加一个新的应用程序，并将其作为参数**$(ProjectDir)**。

![在此处输入图像描述](../Images/64b56bde30e33e4255fbd5bca0efa308.png)

最后，启动调试器后，在解决方案资源管理器中选择 Windows Azure 项目，转到**工具**并单击**Open IExplorer for Azure 按钮**。您甚至可以将其添加到您的工具栏。

![在此处输入图像描述](../Images/c460b58926fe3ce13e46d18ede34bad2.png)

# ember.js - ember.js 1.0 将控制器绑定到控制器

> ID：12782287
> 
> 赞同：2
> 
> 时间：2012-10-08T13:00:25.793
> 
> 标签：ember.js

或者将控制器绑定到两个不同的视图。

我这样做是为了让我的`'home'` 视图获得`PostsController`内容..但我需要真正的方法来做到这一点，如果你能帮助我，请！

```
HomeController: Ember.ArrayController.extend({    
     init: function() {
        setTimeout(function() {
           App.router
             .get('homeController')
               .set('content', App.router.get('postsController').get('content'));
           }, 0);
        }

}) 
```

（此时使用最新版本**SHA: 83542a6**）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:25:18.787

我不太明白你的问题。下面的解决方案有什么问题？ [（此处为原始 jsFiddle）](http://jsfiddle.net/quant/q4Tbt/9/) [（此处为更新 jsFiddle）](http://jsfiddle.net/quant/q4Tbt/)

**（更新：添加骨架路由器）**

**JavaScript / 灰烬：**

```
// Application
App = Ember.Application.create({
    ApplicationController: Ember.Controller.extend(),
    ApplicationView: Ember.View.extend({
        templateName: "application-view",
    }),
    Router: Ember.Router.extend({
        // initialState of Ember.Router is "root"
        root: Ember.Route.extend({
            // "index" can be called whatever we want
            index: Ember.Route.extend({
                route: '/',
                enter: function(router) {
                    console.log("entering root.index from", router.get('currentState.name'));
                },
                connectOutlets: function(router) {
                    console.log("entered root.index, fully transitioned to", router.get('currentState.path'));
                    // Demo: read and write from router's connectOutlets
                    console.log("Router says, A:", App.get("aController").get('content'));
                    console.log("Router says, B:", App.get("bController").get('content'));
                    App.get("aController").pushObject({name: "Network switch", color: "beige", type: "Cisco"});
                    console.log("Router says, A:", App.get("aController").get('content'));
                    console.log("Router says, B:", App.get("bController").get('content'));
                }
            })
            // ... 
            // (add routes here)
            // ...
        })
    })
});

// Controllers
App.aController = Ember.ArrayController.create({
    content: [],
    addContact: function(contact) {
        this.content.push(contact);
    }
});

App.bController = Ember.Object.create({
    contentBinding: "App.aController.content"
});

// Demo: Change a (shows up in b)
App.aController.set('content', [
    {name: "Apple", color: "red", type: "fruit"},
    {name: "Banana", color: "yellow", type: "fruit"},
    {name: "Sports car", color: "black", type: "vehicle"},
    {name: "Sun", color: "white", type: "star"},
     ]);

// Demo: Change b (shows up in a)
(function() {
    var temp = App.aController.get('content');
    temp.push({name: "Linus", color: "n/a", type: "human"});    
    App.bController.set('content', temp);
})(); 
```

**HTML / 车把：**

```
<script type="text/x-handlebars" data-template-name="application-view">
<div id="my-app">
<h1>aController</h1>
{{#collection tagName="ul" contentBinding="App.aController.content"}}
    {{#with view.content}}
        Name: {{name}}, Color: {{color}}, Type: {{type}},
    {{/with}}
{{/collection}}
<h1>bController</h1>
{{#collection tagName="ul" contentBinding="App.bController.content"}}
    {{#with view.content}}
        Name: {{name}}, Color: {{color}}, Type: {{type}},
    {{/with}}
{{/collection}}
</div>
</script> 
```

# ios - #if 和 #ifdef Objective-C 预处理器宏有什么区别？

> ID：12782289
> 
> 赞同：43
> 
> 时间：2012-10-08T13:00:29.883
> 
> 标签：ios, objective-c, macros, c-preprocessor, conditional-compilation

如何在构建设置中定义预处理器宏，例如 IPAD_BUILD 和 IPHONE_BUILD（以及如何在我的工厂方法中使用它们）？

我现在正在使用这些，知道后面发生了什么会很酷。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-08T13:05:25.623

/#if 在以下情况下照常工作：

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= 30200
  if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    return YES;
  }
#endif
  return NO;
} 
```

/#ifdef 表示“如果已定义 - 某些值或宏”：

```
#ifdef    RKL_APPEND_TO_ICU_FUNCTIONS
#define RKL_ICU_FUNCTION_APPEND(x) _RKL_CONCAT(x, RKL_APPEND_TO_ICU_FUNCTIONS)
#else  // RKL_APPEND_TO_ICU_FUNCTIONS
#define RKL_ICU_FUNCTION_APPEND(x) x
#endif // RKL_APPEND_TO_ICU_FUNCTIONS 
```

或者：

```
#ifdef __OBJC__
    #import <Foundation/Foundation.h>
#endif 
```

使用此链接获取更多信息 [http://www.techotopia.com/index.php/Using_Objective-C_Preprocessor_Directives](http://www.techotopia.com/index.php/Using_Objective-C_Preprocessor_Directives)

要测试你是否运行 iPad，你应该有这样的东西：

```
#define USING_IPAD UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad

if (USING_IPAD) {
    NSLog(@"running iPad");
} 
```

这是另一个有用的预处理器函数：

```
#ifdef DEBUG
    //here we run application through xcode (either simulator or device). You usually place some test code here (e.g. hardcoded login-passwords)
#else
    //this is a real application downloaded from appStore
#endif 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-06T09:30:03.490

一个宏可以是未定义的，它可以定义为没有值，或者它可以定义为某个值，可能是一个数字。例子：

```
#undef MACRO
#define MACRO
#define MACRO ??????
#define MACRO 0
#define MACRO 1 
```

#ifdef MACRO 或#if defined (MACRO) 检查宏是否已定义，有或没有值。

#if MACRO 替换宏定义；如果未定义宏，则将其替换为 0。然后计算它找到的表达式。如果我们用上面的五个例子，#if MACRO 会变成

```
#if 0
#if
#if ??????
#if 0
#if 1 
```

2 号和 3 号给出编译时错误。数字 1 和 4 评估为 false，因此跳过以下代码。数字 5 评估为真。

#if 更灵活：你可以写

```
#if MACRO == 2 
```

如果宏被定义为例如，它将仅编译以下代码

```
#define MACRO 2 
```

# delphi - 使用 Delphi 在桌面上绘图以强调鼠标点击

> ID：12782290
> 
> 赞同：1
> 
> 时间：2012-10-08T13:00:34.843
> 
> 标签：delphi

如何在桌面窗口上绘制以在用户点击时绘制圆形动画...

我已经尝试了下面的代码，启动了一个线程来绘制动画......

下面的代码有效，但有一些油漆问题：

```
unit UMouseEmphasizer;

interface

implementation

uses
  Classes, Windows, Messages, Graphics, Forms;

type
  TEmphasizePointDrawer = class(TThread)
  private
    fPoint: TPoint;
    fCanvas: TCanvas;
  protected
    procedure Execute; override;
  public
    constructor Create(pt: TPoint); reintroduce;
    destructor Destroy; override;
  end;

constructor TEmphasizePointDrawer.Create(pt: TPoint);
begin
  fPoint := pt;
  fCanvas := TCanvas.Create;
  fCanvas.Handle := GetDCEx(0, 0, DCX_PARENTCLIP);
  inherited Create(True);
  FreeOnTerminate := True;
  Resume;
end;

destructor TEmphasizePointDrawer.Destroy;
begin
  ReleaseDC(0, fCanvas.Handle);
  fCanvas.Free;
  inherited;
end;

procedure TEmphasizePointDrawer.Execute;
const
  INFLATE_DELTA = 10;
var
  i: integer;
  r: TRect;
begin
  r := rect(0,0,0,0);
  with fCanvas do
  begin
    Brush.Style := bsClear;
    Pen.Style := psSolid;
    Pen.Color := clRed;
    Pen.Width := 2;

    for i := 0 to 2 do
    begin
      r := rect(
        fPoint.X - (i * INFLATE_DELTA),
        fPoint.Y - (i * INFLATE_DELTA),
        fPoint.X + (i * INFLATE_DELTA),
        fPoint.Y + (i * INFLATE_DELTA)
      );
      Ellipse(r);

      sleep(100);
    end;
  end;

  InflateRect(r, 2, 2);
  RedrawWindow(0, @R, 0, RDW_INVALIDATE or RDW_UPDATENOW or RDW_ALLCHILDREN);
end;

function MouseHookHandler(nCode: Integer; MsgID: WParam; Data: LParam): LResult; stdcall;
var
  pt: TPoint;
begin
  Result := 0;
  if nCode < 0 then
    Exit;

  pt := PMouseHookStruct(Data)^.pt;

  case MsgID of
    WM_LBUTTONUP:
      TEmphasizePointDrawer.Create(pt);
  end;
end;

var
  gHook: HHOOK=0;

procedure HookMouse; stdcall;
begin
  gHook := SetWindowsHookEx(WH_MOUSE, MouseHookHandler, HINSTANCE, 0);
end;

procedure UnhookMouse;
begin
  UnhookWindowsHookEx(gHook);
  gHook := 0;
end;

initialization
  HookMouse;

finalization
  UnhookMouse;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:17:11.137

我解决了这个问题：

```
procedure TEmphasizePointDrawer.Execute;
const
  INFLATE_DELTA = 5;
  COUNT = 3;
  BORDER = 2;
var
  i: integer;
  r: TRect;
begin
  with fCanvas do
  begin
    Brush.Style := bsClear;
    Pen.Style := psSolid;
    Pen.Color := clRed;
    Pen.Width := BORDER;

    for i := COUNT downto 0 do
    begin
      if i < COUNT then
      begin
        InflateRect(r, BORDER, BORDER);
        RedrawWindow(0, @R, 0, RDW_INVALIDATE or RDW_UPDATENOW or RDW_ALLCHILDREN);
        sleep(0);
        BitBlt(Handle, r.Left, r.Top, (r.Right - r.Left), (r.Bottom - r.Top), Handle, r.Left, r.Top, SRCCOPY);
      end;

      r := rect(
        fPoint.X - (i * INFLATE_DELTA),
        fPoint.Y - (i * INFLATE_DELTA),
        fPoint.X + (i * INFLATE_DELTA),
        fPoint.Y + (i * INFLATE_DELTA)
      );

      InflateRect(r, BORDER, BORDER);
      RedrawWindow(0, @R, 0, RDW_INVALIDATE or RDW_UPDATENOW or RDW_ALLCHILDREN);
      sleep(0);
      BitBlt(Handle, r.Left, r.Top, (r.Right - r.Left), (r.Bottom - r.Top), Handle, r.Left, r.Top, SRCCOPY);

      InflateRect(r, -BORDER, -BORDER);
      Ellipse(r);

      sleep(50);
    end;
  end;

  r := rect(
    fPoint.X - (COUNT * INFLATE_DELTA) - BORDER,
    fPoint.Y - (COUNT * INFLATE_DELTA) - BORDER,
    fPoint.X + (COUNT * INFLATE_DELTA) + BORDER,
    fPoint.Y + (COUNT * INFLATE_DELTA) + BORDER
  );
  RedrawWindow(0, @R, 0, RDW_INVALIDATE or RDW_UPDATENOW or RDW_ALLCHILDREN);
end;

function MouseHookHandler(nCode: Integer; MsgID: WParam; Data: LParam): LResult; stdcall;
var
  pt: TPoint;
begin
  // draw only when over my application forms!!!
  if (nCode < 0) or (FindControl(GetForegroundWindow()) = nil) then
  begin
    Result := CallNextHookEx(gHook, nCode, MsgID, Data);
    Exit;
  end;

  pt := PMouseHookStruct(Data)^.pt;

  case MsgID of
    WM_LBUTTONUP, WM_RBUTTONUP, WM_MBUTTONUP:
      TEmphasizePointDrawer.Create(pt);

  end;
  Result := 0;
end; 
```

感谢您的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:06:29.123

据我所知，Stardock CursorXP 方法是用透明和移动的窗口覆盖鼠标，并在这个透明窗口上绘制动画。

你也可以在桌面上创建 ActiveDesktop 对象，当鼠标拖到它上面时会看到并渲染这些圆圈。

* * *

如果您只指您自己的表单，那么“桌面窗口”是错误的术语。在 Windows 中，这意味着代表 Windows 桌面的系统无字幕窗口

但类似的想法也适用。您可以制作一个透明的动画 GIF，并在单击 dbl 时 - 只需将某个组件中的图片显示为表单上的最顶层控件。

更兼容的方法是制作一些特定的 ANI 光标（或从 WinXP 主题中选择一些）显示这些圆圈，然后在 dblclick 上临时将 TForm.Cursor 切换到该 ANI 光标，并在经过一段时间后将其切换回 crDefault。

# javascript - 卡住调用 onclick 函数

> ID：12782291
> 
> 赞同：0
> 
> 时间：2012-10-08T13:00:37.720
> 
> 标签：javascript

我一直在努力解决这个问题......

```
medReviewCtrl = "<form name=\"medsreviewedform\"> \
    <input type=\"button\" class=\"medsreviewedclass\" name=\"medsreviewedname\" \
    id=\"medsreviewedid\" value=\"7 minutes ago\" onclick=\"ChangeButtonText(this)\" \
    </form>";

function ChangeButtonText(button){
    document.getElementById("medsreviewedid").value="Value has changed";
}​ 
```

我有一个 js 文件，我在其中创建了一个动态 div，该按钮是其中的一部分。该按钮显示正常，但是当我尝试调用此函数时，我得到了 Object Expected。如果我这样做，它会起作用；

```
onclick=\"this.value=this.value==this.defaultValue?'Less than a minute ago':this.defaultValue;\" />"; 
```

最终目标默认值将来自时间值（1 周前），onclick 将向数据库写入一个值，并且按钮值将类似于不到一分钟前。我拥有其他一切，但我只是不知道如何更改值。

我试过代码是 jsFiddle，它在那里工作，但在我的例子中没有。[http://jsfiddle.net/hPQP9/61/](http://jsfiddle.net/hPQP9/61/)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:38:20.977

好的，有趣；Javascript 与 Jquery...

```
 $(function(){
    $("#medsreviewedid").click(function(){
        alert('hi');
    });
});

medReviewCtrl = '<form name="medsreviewedform"> \
    <input type="button" class="medsreviewedclass" name="medsreviewedname" \
    id="medsreviewedid" value="7 minutes ago"></form>'; 
```

工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:08:57.947

试试这个，我更喜欢对 html 代码使用单引号：

```
medReviewCtrl = '<form name="medsreviewedform"> \
<input type="button" class="medsreviewedclass" name="medsreviewedname" \
id="medsreviewedid" value="7 minutes ago" onclick="ChangeButtonText(this)"> \
</form>'; 
```

# python - 创建独立 Web 应用程序的环境

> ID：12782293
> 
> 赞同：1
> 
> 时间：2012-10-08T13:00:45.647
> 
> 标签：python, web, template-engine

在我的办公室，我们正在努力寻找构建独立 Web 应用程序（在您自己的计算机上运行的 HTML 应用程序，如桌面工具）的最佳环境。此应用程序的操作将是：

*   用户在多个选项卡上的表单中插入输入数据（字母数字和具有时间序列的文件）
*   程序返回输出数据（字母数字信息和图表）

我曾想过在一个应用程序中：

*   Python 中的业务逻辑（我对这种语言非常熟悉）
*   模板引擎，为了编写一次HTML代码
*   HTML + JavaScript + CSS，显示输出数据和图表，如果可能的话，使用 REST 理念（业务逻辑会编写几个输出 JSON 文件）

我不知道是否存在满足这些要求的环境/框架。欢迎任何建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T13:38:31.357

你听说过 Django 吗？从[文档](https://www.djangoproject.com/)...

*Django 是一个高级 Python Web 框架，它鼓励快速开发和简洁、实用的设计。*

*由快速发展的在线新闻运营商开发的 Django 旨在应对两个挑战：新闻编辑室的密集期限和编写它的经验丰富的 Web 开发人员的严格要求。它使您可以快速构建高性能、优雅的 Web 应用程序。*
*Django 专注于尽可能地自动化并坚持 DRY 原则。*

# c# - PDF 文件是否包含 iref 流？

> ID：12782295
> 
> 赞同：7
> 
> 时间：2012-10-08T13:00:56.013
> 
> 标签：c#, pdf, pdfsharp

我仍然与从 PDF 文件中读取数据作斗争。
我使用 PDFsharp，如何在不使用 Open 方法的情况下检查文件是否包含 iref 流。*如果文件包含iref 流*，方法 Open 将引发异常。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-27T13:26:12.470

有一个已知的解决方法允许您打开包含 iref 的 pdf 文件：您可以在此处找到有关[此](http://forum.pdfsharp.net/viewtopic.php?f=2&t=693)的完整线程。

简单总结一下解决方案：

1.  下载并包含[iTextSharp 4.1.6 库](https://github.com/itextsharper/iTextSharp-4.1.6)
2.  将代码文件中的以下代码粘贴到您的项目中：

-

```
using System;
using System.IO;

namespace PdfSharp.Pdf.IO
{
    static public class CompatiblePdfReader
    {
        /// <summary>
        /// uses itextsharp 4.1.6 to convert any pdf to 1.4 compatible pdf, called instead of PdfReader.open
        /// </summary>
        static public PdfDocument Open(string pdfPath)
        {
            using (var fileStream = new FileStream(pdfPath, FileMode.Open, FileAccess.Read))
            {
                var len = (int)fileStream.Length;
                var fileArray = new Byte[len];
                fileStream.Read(fileArray, 0, len);
                fileStream.Close();

                return Open(fileArray);
            }
        }

        /// <summary>
        /// uses itextsharp 4.1.6 to convert any pdf to 1.4 compatible pdf, called instead of PdfReader.open
        /// </summary>
        static public PdfDocument Open(byte[] fileArray)
        {
            return Open(new MemoryStream(fileArray));
        }

        /// <summary>
        /// uses itextsharp 4.1.6 to convert any pdf to 1.4 compatible pdf, called instead of PdfReader.open
        /// </summary>
        static public PdfDocument Open(MemoryStream sourceStream)
        {
            PdfDocument outDoc;
            sourceStream.Position = 0;

            try
            {
                outDoc = PdfReader.Open(sourceStream, PdfDocumentOpenMode.Import);
            }
            catch (PdfReaderException)
            {
                //workaround if pdfsharp doesn't support this pdf
                sourceStream.Position = 0;
                var outputStream = new MemoryStream();
                var reader = new iTextSharp.text.pdf.PdfReader(sourceStream);
                var pdfStamper = new iTextSharp.text.pdf.PdfStamper(reader, outputStream) {FormFlattening = true};
                pdfStamper.Writer.SetPdfVersion(iTextSharp.text.pdf.PdfWriter.PDF_VERSION_1_4);
                pdfStamper.Writer.CloseStream = false;
                pdfStamper.Close();

                outDoc = PdfReader.Open(outputStream, PdfDocumentOpenMode.Import);
            }

            return outDoc;
        }
    }
} 
```

3.  将所有呼叫更改`PdfReader.Open`为`CompatiblePdfReader.Open`。

它对我来说就像一个魅力，希望这对你有帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-22T13:38:30.577

PDFsharp 1.32 和更早版本不支持 iref 流。

自 2015 年 12 月以来，我们拥有支持 iref 流的 PDFsharp 1.50。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T07:09:10.657

虽然回复晚了，但可能有用。

我处于同样的情况（使用 pdfSharp 的 C# 项目）。我有一个 PowerShell 脚本，它在合并时忽略带有 iref 流的文件（因此不会引发异常）。

```
Function Merge-PDF {
    Param($path, $filename)                        

    $output = New-Object PdfSharp.Pdf.PdfDocument
    $PdfReader = [PdfSharp.Pdf.IO.PdfReader]
    $PdfDocumentOpenMode = [PdfSharp.Pdf.IO.PdfDocumentOpenMode]                        

    foreach($i in (gci $path *.pdf -Recurse)) {
        $input = New-Object PdfSharp.Pdf.PdfDocument
        $input = $PdfReader::Open($i.fullname, $PdfDocumentOpenMode::Import)
        $input.Pages | %{$output.AddPage($_)}
    }                        

    $output.Save($filename)
}

Merge-PDF -path c:\reports -filename c:\reports\zzFull_deck.pdf 
```

稍后肯定会发布与上述函数等效的 C#。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-25T08:34:10.097

解决方法是捕获`PdfSharp.Pdf.IO.PdfReaderException`，并忽略导致此类异常的文件。

```
PdfDocument inputPDFDocument = new PdfDocument();
try
{
    inputPDFDocument = PdfReader.Open(pdfFile, PdfDocumentOpenMode.Import);
}
catch (PdfSharp.Pdf.IO.PdfReaderException)
{
    //
} 
```

# iphone - UIPinchGesture 在 MPMoviePlayerController 上不起作用？

> ID：12782296
> 
> 赞同：2
> 
> 时间：2012-10-08T13:00:58.767
> 
> 标签：iphone, objective-c, ios, ios6, xib

我在视图中添加了捏合识别器（我在其中添加了 MPMoviePlayerController）并创建了一个处理捏合的函数（我已经为该函数设置了 IBAction），但它没有进入该函数。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:09:44.397

MPMoviePlayerController 有自己实现的手势识别器，可在 MPSwipableView 上工作。这些手势已被修改以执行 MPMoviePlayer 使用的特定默认操作。

*   在 MPMoviePlayerController 上定义自定义手势。您必须使用单独的空视图，将其添加到您的 MPMoviePlayerController。

*   在其上添加手势识别器。现在您可以在空视图上接收手势。据此，您可以调整 MPMoviePlayer 的视图框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:12:05.980

添加代理到捏识别器，MPMoviePlayerController 并启用 MPMoviePlayerController 的用户交互，

```
pinchreg.delegate=self;
player.delegate=self;
player.userinteractionenabled=yes; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T10:49:12.127

`umirza47`回答的替代方法是停用`pinchgesture`附加到`MPMoviePlayerController`视图的识别器。这取决于您是否需要出于自己的目的在电影播放器​​上具有放大/缩小功能：我相信 pinchgesture 识别器在电影播放器​​上的用途：

```
for (UIGestureRecognizer *gesture in ((UIView *)videoVC.moviePlayer.view.subviews[0]).gestureRecognizers) {

     if ([gesture isKindOfClass:[UIPinchGestureRecognizer class]]) {

                gesture.enabled = NO;
     }
} 
```

# pattern-matching - 如何包含在 openlaszlo 文本模式中

> ID：12782297
> 
> 赞同：1
> 
> 时间：2012-10-08T13:00:59.220
> 
> 标签：pattern-matching, openlaszlo, lzx

我尝试了这个运行良好的小示例，但我无法在预期的单词之间留出空格。

```
 <inputtext width="150"
    pattern="[A-Za-z0-9!@:;#$%\^*()_\-\=+/&amp;,./?&lt;&gt;&quot;&apos;{}[]\\|`~ ]*">
    This text is editable.
    </inputtext> 
```

但如果我给

**模式="[A-Za-z0-9!@:;#$%\^*()_-\=+/&,./?<>"' {}[]\|`~ ]*"**

它显示错误。如何在文本模式中包含此空间。请帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:35:40.440

您必须使用空格字符而不是   因为空间被转换成   只有在文本字段收到输入后。

```
<canvas>

  <inputtext width="150"
    pattern="[A-Za-z0-9 ]*">
    This text is editable.
  </inputtext>

</canvas> 
```

# php - PHP 应用程序 - 电子邮件确认文本，一位文本显示为删除线

> ID：12782299
> 
> 赞同：2
> 
> 时间：2012-10-08T13:01:04.757
> 
> 标签：php, html-email

这是一件奇怪的事情——我们有 PHP 网络表单。客户提交表单，数据进入数据库，并生成确认电子邮件并发送给用户。这是奇怪的事情 - 偶尔，一个字段，一个特定的字段会将其文本显示为删除线。该字段是一个下拉字段，因此他们不能自己输入特殊字符。

正如我所说，它偶尔发生，因此他们可以收到几封电子邮件确认正确显示请求详细信息，然后会出现一封在特定字段中带有删除线的电子邮件。它总是发生在 BU 字段中，并且似乎与选择什么值无关。见附图示例

他们的电子邮件客户端是 Outlook。我们有几个使用这个应用程序的客户，从来没有发生过这种情况。

我已经谷歌了，但什么也没看到。

有没有人对我可以检查以找到罪魁祸首有任何建议。

![带删除线的电子邮件确认文本示例](../Images/6a632b2bfaff0d8711c6b57fad1d91c9.png)

更多信息让客户将电子邮件转发给我。正在发生的事情是他们的版本是 Outlook 正在使用`<span>`标签并将其更改`<s>`为直通。这是一个自动生成的表单，因此相同的代码会生成相同的字段。我这样说是因为，他们在表单上还有其他几个下拉字段，并且值正确显示，没有通过罢工并且标签是机智的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:02:22.220

为了正确解决这个问题，我们需要查看当电子邮件包含删除线时生成的 HTML。应该有一个`<S>`或`<Strike>`标签被插入到页面中。

然后，您需要检查生成电子邮件的代码的每一层，以了解该 HTML 是如何发出的。如果您可以重复生成带有错误标签的同一封电子邮件，那将会很有帮助 - 这样应该能够挖掘代码并追踪它。

# c - 通过 SIGCHLD 休眠

> ID：12782303
> 
> 赞同：2
> 
> 时间：2012-10-08T13:01:15.247
> 
> 标签：c, sleep, sigchld, select-function

我有一个 C 程序，它每分钟轮询一次硬件传感器，并将读数添加到数据库中。为了确保读数接近于每分钟（而不是每分钟 + 开销时间），程序会创建一个孩子来完成实际工作，然后在创建另一个孩子之前休眠 60 秒。

我遇到的麻烦是孩子们的 SIGCHLD 正在中断睡眠（60），导致创建无限的孩子​​，而不是每分钟一个。

这就是我一直在尝试的方式：

```
while(1)
{

    /* Create a child to do the work */
    if((pid = fork()) < 0)
    {
        perror("fork");
        exit(1);
    }
    else if(pid > 0)
    {
        /*parent continues*/
        select(0, 0, NULL, NULL, &time);
        claim_children();
        continue;
    }
    /*Now in the child*/
    process_pvs();
} 
```

我还听说 select() 可用于通过执行以下操作来实现我所追求的目标：

```
struct timeval time;

time.tv_sec = 60;
time.tv_usec = 0;

select(0, 0, 0, 0, time); 
```

但由于某种原因，这只适用于 while 循环中的 1 次迭代。之后，该程序根本不等待，并不断创建孩子。

那么我怎样才能最好地让我的程序做到这一点而不会被 sigchld 打断呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:05:43.907

您可以简单地围绕它编写代码；检测中断的系统调用，记下时间，并使用逻辑来确定是否需要重新进入睡眠状态，如果需要，需要多长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:08:35.880

您可以忽略子信号

```
signal(SIGCHLD, SIG_IGN); 
```

这将停止中断，但您需要小心等待所有孩子。通常是一个循环来捕获它们。

```
while(waitpid(-1, &status, WNOHANG) > 0); 
```

当然，这只有在您没有在其他地方创建其他子进程时才有效。

# r - 在 R 中查找没有循环的值

> ID：12782308
> 
> 赞同：0
> 
> 时间：2012-10-08T13:01:34.233
> 
> 标签：r, find, match, unique-values

我有一个用 c() 创建的向量 v，它包含以下数据：

```
 v[a,b,d,z,e,f], it must be unordered 
```

我有一个格式为 txt 的文件：

```
 label      1            2          3       ....
      b        100        2000          15
      z        123          14          12
      a         55         565          55
     ..... 
```

我已经提取了 txt 文件，该文件由带有 strplit 的制表符分隔

```
 ext_data<-strsplit(file,"\t") 
```

我要做的是看向量V的元素是否与label的元素之一匹配，它可以像不一样，然后提取txt文件的第1列的相应元素，然后列的元素2 以此类推

我已经使用for循环进行了匹配，但是花费了太多时间，因为txt文件包含太多数据，就像这样（算法上）

```
 for i=1 to length(v)
             for pos=2 to ext_data      #I put pos=2 because I start in the second row
                  if match(vector) and ext_data(pos,1)  
                       retrieve data from column C 
```

有什么建议吗？

粗略地说，我想知道是否有办法使用匹配，但是对于列，可能会连续转换列标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:22:43.630

只是创建一些测试数据来说明我的解决方案：

```
testdata <- data.frame(namecol=c("b","r","a","j","z","l","s","n","t"),
                       v1=sample(1:1000,9),
                       v2=sample(1:1000,9),
                       v3=sample(1:1000,9))
vecfind <- c("a","b","d","z","e","f") 
```

使用`[[]]`or `$`，您可以选择数据框的第一个元素作为向量，然后使用`which`and`%in%`函数，您可以获得数字行索引，然后提取元素，如下所示：

```
v1_elements <- testdata[which(testdata[[1]] %in% vecfind),2]
v2_elements <- testdata[which(testdata[[1]] %in% vecfind),3]
v3_elements <- testdata[which(testdata[[1]] %in% vecfind),4] 
```

# java - 在部署任何模块之前，让 Maven 父项目测试所有模块

> ID：12782310
> 
> 赞同：6
> 
> 时间：2012-10-08T13:01:40.323
> 
> 标签：java, maven

我有一个带有父项目的传统 Maven 设置和一些子项目的模块。当我这样做时，它会按顺序（深度优先）为每个项目`mvn deploy`运行整个生命周期（包括`test`） 。`deploy`如果任何项目无法构建，我想避免部署任何子项目。换句话说，我希望`deploy`整个父项目是“全有或全无”。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T13:11:07.553

Maven 本身（还）不能做到这一点。目前，构建过程单独运行每个模块上的所有目标。有计划让目标看到全局，但这可能是针对 Maven 4 的。

同时，您可以使用一个小的 shell 脚本：

```
 mvn clean install && mvn deploy -DskipTests=true 
```

第一次运行构建了一切。第二次运行不会做太多（所有代码都已经编译并且跳过了长时间的测试），所以它非常快。

我实际上更喜欢这种方法，因为我的脚本还将任何现有`distributionManagement`元素替换为我公司缓存的元素。这意味着我可以为我的公司部署任何项目，而无需对原始 POM 进行任何更改。这是脚本：

```
#!/bin/bash

if [[ ! -e pom.xml ]]; then
    echo "Missing pom.xml" 1>&2
    exit 1
fi

sed \
    -e '/<distributionManagement>/,/<\/distributionManagement>/d' \
    -e '/<\/project/d' \
    pom.xml > pom-deploy.xml || exit 1

cat >> pom-deploy.xml  <<EOF

    <!-- ADDED BY $0 -->
    <distributionManagement>
        ... whatever you need ...
    </distributionManagement>
</project>
EOF

mvn -f pom-deploy.xml clean install && \
    mvn -f pom-deploy.xml deploy -DskipTests=true && \
    rm pom-deploy.xml

exit 0 
```

[要旨](https://gist.github.com/3852490)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T14:21:02.590

If your remote repository is a Sonatype Nexus Pro instance, then the "Staging" facility of Nexus Pro will allow for atomic publishing to the repository proper.

If you are using Jenkins, there is a delayed deployment plugin that will deploy all your artifacts as a post-build (or very post-build) action (doesn't mind too much which repository manager you use)

Finally, one of my medium-long-term goals for the mrm-maven-plugin @ codehaus is to allow local staging of deployment so that you will be able to do something like

```
mvn mrm:catch-deploy deploy mrm:push-deploy 
```

*BUT* that last one is not written yet!

# sql-server - 如何从 SQL Server 数据库中获取客户端 IP 地址

> ID：12782312
> 
> 赞同：0
> 
> 时间：2012-10-08T13:01:48.960
> 
> 标签：sql-server

假设我有三台机器。一个是服务器，另外两个是客户端。服务器上已经安装了 SQL 数据库，另外两台机器上安装了 SQL Server 客户端。因此，人们可以从他们的客户端计算机连接到 SQL Server 服务器数据库。

现在我想，每当有人对表执行 DML 操作时，都会触发一个触发器，并且从该触发器中，用户的客户端计算机 IP 地址将存储在另一个表中。所以我很好地搜索并找到了一个脚本：

```
create Procedure sp_get_ip_address (@ip varchar(40) out)
as
begin
    Declare @ipLine varchar(200)
    Declare @pos int
    set nocount on
    set @ip = NULL
    Create table #temp (ipLine varchar(200))
    Insert #temp exec master..xp_cmdshell 'ipconfig'
    select @ipLine = ipLine
    from #temp
    where upper (ipLine) like '%IP ADDRESS%'
    if (isnull (@ipLine,'***') != '***')
    begin
        set @pos = CharIndex (':',@ipLine,1);
        set @ip = rtrim(ltrim(substring (@ipLine ,
        @pos + 1 ,
        len (@ipLine) - @pos)))
    end
    drop table #temp
    set nocount off
end
go

declare @ip varchar(40)
exec sp_get_ip_address @ip out
print @ip 
```

但是上面的脚本给出了安装数据库的服务器 IP 地址。我不是在寻找这个脚本。我得到了另一个运行良好的脚本。脚本是：

```
CREATE FUNCTION [dbo].[GetCurrentIP] ()
RETURNS varchar(255)
AS
BEGIN
    DECLARE @IP_Address varchar(255);

    SELECT @IP_Address = client_net_address
    FROM sys.dm_exec_connections
    WHERE Session_id = @@SPID;

    Return @IP_Address;
END

SELECT dbo.GetCurrentIP() 
```

更多脚本

* * *

```
DECLARE @host varchar(255)
SET @host = host_name()

CREATE TABLE #Results (
Results varchar(255)
)

DECLARE @cmd varchar(260)
SET @cmd = 'ping ' + @host

INSERT INTO #Results
EXEC master..xp_cmdshell @cmd

SELECT Replace(Left(Results, CharIndex(']', Results)), 'Pinging ', '') As [client]
 , host_name() As [host_name()]
FROM   #Results
WHERE  Results LIKE 'Pinging%'

DROP TABLE #Results 
```

--************************************************

```
-- DROP trigger and/or table if they exist
IF EXISTS(SELECT 1 FROM sysobjects WHERE type = 'TR' AND name = 'myTable_InsertUpdate') BEGIN
    DROP TRIGGER myTable_InsertUpdate
END
IF EXISTS(SELECT 1 FROM sysobjects WHERE type = 'U' AND name = 'myTable') BEGIN
    DROP TABLE myTable
END

-- Create out table; note the audit fields
CREATE TABLE myTable (
id int PRIMARY KEY NOT NULL IDENTITY(1,1)
, field1           char(1)
, changed_by_ip    char(15)
, changed_by_host  char(15)
, datetime_changed datetime
)
GO

-- Create trigger for update and insert
CREATE TRIGGER myTable_InsertUpdate
ON  myTable
FOR insert, update
AS
DECLARE @ipLine varchar(255)
DECLARE @pos    int
DECLARE @ip     char(15)

-- Temporary table creation
CREATE TABLE #ip (
ipLine varchar(255)
)

-- Insert the return of ipconfig into the temp table
INSERT #ip EXEC master..xp_cmdshell 'ipconfig'

-- Find the line which contains the IP address and assign it to a variable
SET @ipLine = (
SELECT ipLine
FROM   #ip
WHERE  ipLine LIKE '%IP Address%'
)

-- If the IP address is known
IF Coalesce(@ipLine, '***') <> '***' BEGIN
    --Find the index of the colon from the END of the string
    SET @pos = CharIndex(':', Reverse(@ipLine), 1) - 1
    --Trim the IP off the end of the string
    SET @ip =  Right(@ipLine, @pos)
    --Remove any trailing or leading white space
    SET @ip  = RTrim(LTrim(@ip))
END

-- Drop the temp table
DROP TABLE #ip

-- Update the audit fields based on the value being updated
UPDATE myTable
SET    changed_by_ip  = @ip
   , datetime_changed = GetDate()
   , changed_by_host  = host_name()
WHERE  id IN (SELECT id FROM inserted)
GO

-- Insert some test values
INSERT INTO myTable (field1) VALUES ('a')
INSERT INTO myTable (field1) VALUES ('a')

-- Display initial values
SELECT * FROM myTable

-- Update one of the fields
UPDATE myTable
SET    field1 = 'b'
WHERE  id = 2

-- Display changed values.
SELECT * FROM myTable

-- Notice the change in datetime_changed where id = 2
GO

-- And finally; clean up after ourselves
DROP TRIGGER myTable_InsertUpdate
DROP TABLE myTable 
```

这适用于我安装的[SQL Server 2000](https://en.wikipedia.org/wiki/History_of_Microsoft_SQL_Server#SQL_Server_2000)和[SQL Server 2005](https://en.wikipedia.org/wiki/History_of_Microsoft_SQL_Server#SQL_Server_2005)。

1.  我可以从触发器调用这个 GetCurrentIP() 函数吗？

2.  GetCurrentIP() 函数是否兼容所有 SQL Server 版本？例如，SQL Server 2000

3.  如果任何用户连接到数据库并通过第三方应用程序（如自定义应用程序）进行 DML 操作，此脚本可以获取客户端 IP 地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:21:41.813

大问题:) 但答案真的很短。

> 1.  我可以从触发器调用这个 GetCurrentIP() 函数吗？

是的。您可以直接在触发器中使用其中的代码，而不是这个函数。

> 2.  GetCurrentIP() 函数是否兼容所有 SQL Server 版本？例如，SQL Server 2000？

不可以。仅适用于 SQL Server 2005 及更高版本。因为`sys.dm_exec_sessions`在 SQL Server 2000 中不可用。对于 SQL Server，您将不得不采用一些不同的技术

> 3.  如果任何用户连接到数据库并通过第三方应用程序（如自定义应用程序）进行 DML 操作，此脚本可以获取客户端 IP 地址吗？

是的。客户端应用程序是客户端应用程序，无论它是第三方应用程序还是自制 :) SQL Server 不会区分。

# html - 谷歌浏览器在颜色输入上没有模糊

> ID：12782316
> 
> 赞同：1
> 
> 时间：2012-10-08T13:02:08.187
> 
> 标签：html, google-chrome

颜色选择器输入（类型 = 颜色）将在 Firefox 中呈现为文本框，因为它没有原生支持，但在 Chrome 上，浏览器将呈现更好的原生控件。但是，使用 jQuery 绑定到`blur`事件将在 firefox 中有效，但在 chrome 中无效。

这是否（尚未）实施或者我应该使用不同的事件？

这是一个带有问题代码的jsFiddle（在FF中工作而不是在chrome中）[http://jsfiddle.net/Rgu6h/13/](http://jsfiddle.net/Rgu6h/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:07:05.437

我刚刚发现了问题，我想知道值是否发生了变化，所以我可以绑定到更改事件而不是单击/模糊/鼠标或任何事件。有时解决方案太明显了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:10:47.767

您可以下载modernizr.js 并询问浏览器是否支持输入类型颜色。如果不是，那么您将编写函数以在模糊时显示颜色选择器。

这个概念被称为“polyfills”，它包括在浏览器本身不支持它时创建额外的功能。

查看 Modernizr 的网站： http: [//modernizr.com/](http://modernizr.com/)了解更多信息。以防万一，你不需要下载整个包，你可以只选择你需要的东西。在您的情况下，它将是一个 9k 文件。（http://modernizr.com/docs/#inputtypes）

更新1：好像我误解了你的问题。

更新 2：似乎 chrome 将输入类型颜色视为按钮。为什么不使用“点击”事件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:11:13.670

模糊工作。尝试使用键盘上的 TAB 键访问输入，您会看到它已聚焦，然后变得模糊，并且 div 出现了。

您可能想要使用`onmouseup`. 这取决于你想要做什么。

# mongodb - 如何索引我的集合以使用复合多键索引

> ID：12782317
> 
> 赞同：2
> 
> 时间：2012-10-08T13:02:08.460
> 
> 标签：mongodb

这是我要查询的文档：

```
{
"_id":ObjectId("5062d30522dfae0e11000000"),
"id_resource" : "147",
"moment_created" : ISODate("2012-03-22T16:29:21Z"),
"moment_updated" : ISODate("2012-03-22T16:29:21Z"),
"users_involved" : [
    {
        "id_user" : "113928869",
        "state" : "answered",
        "id_folder" : "0",
        "is_deleted" : "0"
    },
    {
        "id_user" : "121624627",
        "state" : "new",
        "id_folder" : "0",
        "is_deleted" : "0" }
],
"posts" : [
    {
        "id_author" : "113928869",
        "post" : "hiohhio",
        "moment_created" : ISODate("2012-03-22T16:29:21Z")
    }
    ]
} 
```

这就是我试图确保我的索引的方式：

```
db.message.ensureIndex({id_resource:1, users_involved : 1}); 
```

这是我用来查询我的收藏的查询：

```
db.message.find({id_resource : "143", "users_involved" : {$elemMatch : {id_user : "101226353", state : "answered"}}}); 
```

但稍后解释我得到这个输出：

```
{
    "clusteredType" : "ParallelSort",
    "cursor" : "BasicCursor",
    "n" : 11,
    "nChunkSkips" : 0,
    "nYields" : 8624,
    "nscanned" : 1461277,
    "nscannedAllPlans" : 1461277,
    "nscannedObjects" : 1461277,
    "nscannedObjectsAllPlans" : 1461277,
    "millisShardTotal" : 1878,
    "millisShardAvg" : 939,
    "numQueries" : 2,
    "numShards" : 2,
    "millis" : 1646 
```

}

getIndexes 将返回：

```
[
    {
            "v" : 1,
            "key" : {
                    "_id" : 1
            },
            "ns" : "messaging.message",
            "name" : "_id_"
    },
    {
            "v" : 1,
            "key" : {
                    "id_resource" : 1,
                    "users_involved" : 1
            },
            "ns" : "messaging.message",
            "name" : "id_resource_1_users_involved_1"
    } 
```

]

遗憾的是，我不明白为什么我的查询没有使用索引 id_resource_1_users_involved_1。谁能向我解释为什么不使用我的索引或者我必须如何构建索引以支持我想要使用的查询？

感谢时间和帮助

# 更新

对我感到羞耻，我这边的错字。所以这是查询的实际解释

```
{
    "clusteredType" : "ParallelSort",
    "cursor" : "BtreeCursor id_resource_1_users_involved_1",
    "n" : 5,
    "nChunkSkips" : 0,
    "nYields" : 2,
    "nscanned" : 46868,
    "nscannedAllPlans" : 93736,
    "nscannedObjects" : 46868,
    "nscannedObjectsAllPlans" : 93736,
    "millisShardTotal" : 281,
    "millisShardAvg" : 140,
    "numQueries" : 2,
    "numShards" : 2,
    "millis" : 220 
```

}

所以查询正在使用我的索引，但它仍然很慢，nscanned 也很大，所以没有使用整个索引？我将不得不检查 nscanned 是否与资源 x 的消息量匹配

使用来自 JohnnyHK 的复合索引，它变得更快：

```
ensureIndex({id_resource:1, 'users_involved.id_user':1, 'users_involved.state':1}); 
```

解释

```
{
    "clusteredType" : "ParallelSort",
    "cursor" : "BtreeCursor id_resource_1_users_involved.id_user_1_users_involved.state_1",
    "n" : 5,
    "nChunkSkips" : 0,
    "nYields" : 0,
    "nscanned" : 7,
    "nscannedAllPlans" : 7,
    "nscannedObjects" : 7,
    "nscannedObjectsAllPlans" : 7,
    "millisShardTotal" : 0,
    "millisShardAvg" : 0,
    "numQueries" : 2,
    "numShards" : 2,
    "millis" : 1
} 
```

所以如果我想查询 users_involved 数组，我必须为每个查询建立一个单独的索引？

还@JohnnyHK 使用提到的整个数组，如：

```
find({id_resource : "197", "users_involved" : {$elemMatch : {id_user : "128825371", state : "answered", id_folder:"0", is_deleted:"0"}}}).hint("id_resource_1_users_involved_1") 
```

没有任何改善，解释：

```
{
    "clusteredType" : "ParallelSort",
    "cursor" : "BtreeCursor id_resource_1_users_involved_1",
    "n" : 5,
    "nChunkSkips" : 0,
    "nYields" : 1,
    "nscanned" : 46868,
    "nscannedAllPlans" : 46868,
    "nscannedObjects" : 46868,
    "nscannedObjectsAllPlans" : 46868,
    "millisShardTotal" : 222,
    "millisShardAvg" : 111,
    "numQueries" : 2,
    "numShards" : 2,
    "millis" : 174 
```

}

或者我仍然做错了吗？

*我也从解释响应中删除了分片信息，如果此信息可能很重要，请直说

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:52:33.993

因为您的复合索引包括整个`users_involved`数组，所以该索引只能在匹配数组的完整嵌入文档元素时使用。见[这里](http://www.mongodb.org/display/DOCS/Indexes#Indexes-UsingDocumentsasKeys)。

我认为使用仅包含`users_involved`您打算搜索的字段的复合索引会更好地为您服务。所以要么：

```
db.message.ensureIndex({id_resource:1, 'users_involved.id_user' : 1}); 
```

**或者**

```
db.message.ensureIndex({id_resource:1, 'users_involved.id_user' : 1, 'users_involved.state' : 1}); 
```

# linux - 为外部显示器添加 udev 规则

> ID：12782318
> 
> 赞同：6
> 
> 时间：2012-10-08T13:02:11.550
> 
> 标签：linux, udev, xrandr

我编写了一个小 shell 脚本，用 xrandr 配置附加的外部显示器。

```
# cat /home/didi/bin/monitor_autoswitcher.sh 
#!/bin/bash

xrandr | grep "HDMI1 connected"
if [[ $? == 0 ]]; then
  # is connected
  xrandr --output HDMI1 --right-of LVDS1 --auto
else
  # not connected
  xrandr --output HDMI1 --auto
fi

xrandr | grep "VGA1 connected"
if [[ $? == 0 ]]; then
  # is connected
  xrandr --output VGA1 --right-of LVDS1 --auto
else
  # not connected
  xrandr --output VGA1 --auto
fi 
```

这样可行。现在我想让它自动触发，发现这可以用 udev 完成。我试过了

```
udevadm monitor 
```

其中，当插入外部显示器输出时

```
KERNEL[465828.240250] change   /devices/pci0000:00/0000:00:02.0/drm/card0 (drm)
UDEV  [465828.243549] change   /devices/pci0000:00/0000:00:02.0/drm/card0 (drm) 
```

并且在拔掉它的时候

```
KERNEL[465836.844209] change   /devices/pci0000:00/0000:00:02.0/drm/card0 (drm)
UDEV  [465836.847445] change   /devices/pci0000:00/0000:00:02.0/drm/card0 (drm) 
```

也很好。

然后我添加了一个udev规则：

```
# cat 40-external-display.rules 
SUBSYSTEM=="drm", ACTION=="change", RUN+="/home/didi/bin/monitor_autoswitcher.sh" 
```

并重新启动udev

```
service udev restart 
```

不幸的是，插入/拔出显示器时仍然没有任何反应。该脚本`monitor_autoswitcher.sh`绝对有效，因为在插入后手动调用它会做它应该做的。

少了什么东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:05:29.997

这看起来几乎是一回事。我看到的唯一真正的区别是脚本设置了 DISPLAY 变量，这可能是关键。

[http://ruedigergad.com/2012/01/28/hotplug-an-external-screen-to-your-laptop-on-linux/](http://ruedigergad.com/2012/01/28/hotplug-an-external-screen-to-your-laptop-on-linux/)

# javascript - Jquery 事件或函数自动调用

> ID：12782322
> 
> 赞同：0
> 
> 时间：2012-10-08T13:02:21.533
> 
> 标签：javascript, jquery-ui, jquery

当用户停止输入 Jquery 时，是否有任何可以在 5 秒后调用的函数？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:08:31.970

```
function afterTypeProcess(){
   //Dosomething
}

var timeid;

$("input").keyup(function(){
   clearTimeout(timeid);
   timeid = setTimeout(afterTypeProcess, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:10:06.023

只需清除并重置每个`keyup`事件的超时：

```
​var countdown;
$("textarea:first").on("keyup", function(){
    clearTimeout(countdown);
    countdown = setTimeout(function(){
        console.log("Fired");
    }, 5000);
});​​ 
```

小提琴：http: [//jsfiddle.net/FQtDn/](http://jsfiddle.net/FQtDn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:28:52.287

[请在这里](http://jsfiddle.net/RrbMT/)检查这个jsfiddle

```
$(document).on("change", ".test", function(){
    window.setTimeout(dothis, 5000);

});

function dothis(){
    alert('test');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:14:45.087

[keyup](http://api.jquery.com/keyup/)加[setTimeout](http://msdn.microsoft.com/en-us/library/ie/ms536753%28v=vs.85%29.aspx)应该可以解决问题。[您可以在此处](http://jsfiddle.net/6QCtj/2/)查看 jsfiddle 以获取文本输入

您可以使用以下代码检查 keyup

```
$("#entersomething").keyup(function(e) {
    setTimeout(function(){ alert("up"); }, 5000);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:06:33.797

设置超时？

[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

# octave - 将“if-then”条件应用于 Octave 向量中的所有元素的最有效方法是什么？

> ID：12782323
> 
> 赞同：4
> 
> 时间：2012-10-08T13:02:21.830
> 
> 标签：octave, linear-algebra

我有一个浮点向量，每个元素都在 0 和 1 之间。我希望将那些大于（等于）0.5 的元素更改为 1，将那些小于 0.5 的元素更改为 0。

是否有一个 Octave 函数可以让我以矢量化方式执行此操作，而不是使用 for 循环？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T13:26:18.090

解决方案：我首先在生成向量的行中使用了布尔返回条件：`myVector = (sigmoid(vec1*vec2)>=0.5)`

# php - 将使用串联的函数添加到 HTML 表单会导致函数错误地显示在表单顶部

> ID：12782331
> 
> 赞同：1
> 
> 时间：2012-10-08T13:02:37.447
> 
> 标签：php, html, mysql, forms, concatenation

我正在尝试使用从 MySQL 数据库填充的下拉菜单制作一个表单。我将用于创建下拉菜单的代码放在一个函数中，并且我试图将完整的表单本身也放在一个函数中。

问题是由于某种原因下拉菜单显示在表单的顶部而不是底部，就像它应该的那样。如果我查看正在生成的 HTML，似乎由于某种原因该函数根本没有在标签内呈现。

```
echo "<form method='post'>
<table>
    <tr>
        <td><label for='artikelnr'>Artikelnummer:</label></td>
        <td><input type='text' name='artikelnr' /></td>
    </tr>
    <tr>
        <td><label for='omschrijving'>Omschrijving:</label></td>
        <td><input type='text' name='omschrijving' /></td>
    </tr>
    <tr>
        <td><label for='verkoopprijs'>Verkoopprijs:</label></td>
        <td><input type='text' name='verkoopprijs' /></td>
    </tr>
    ".categorie()."
    <tr>
        <td><input type='submit' name='submit' value='Toevoegen' /></td>
    </tr>
</table>
</form>"; 
```

由于某种原因，函数 category() 实际上似乎是在表单之前生成的。如在回声之前。在 HTML 中，它会首先生成 HTML 中的下拉菜单，然后是 echo 中包含的所有 HTML，不包括函数 categorie()。如何让函数在正确的位置生成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:07:12.910

可能发出的数据`category()`不包含正确的`<tr>`或`<td>`标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:11:29.857

保持形式和功能分开。在下拉菜单中调用函数来填充下拉菜单，如下所示：

```
<?php
function fetch_data(){
    //code to fetch data from the database
    //return the result in a array as (say) $fetch_data
} 
```

并以形式

```
<select>
<?php foreach($fetch_data as $show_data){ ?>
<option value="<?php echo $show_data['data_id']; ?>"><?php echo $show_data['data']; ?></option>
<?php } ?> 
```

# joomla - 语音验证码的扩展

> ID：12782342
> 
> 赞同：0
> 
> 时间：2012-10-08T13:03:00.957
> 
> 标签：joomla, joomla2.5

这是 joomla 中语音验证码的最佳扩展。

我使用了 joomla 中默认的 recaptcha，但其中的声音并不清晰。

# python - 列表中的字典 :: 合并相同键的值

> ID：12782344
> 
> 赞同：1
> 
> 时间：2012-10-08T13:03:10.660
> 
> 标签：python, data-structures, data-dictionary

我在 Python 列表中有多个字典，如下所示

```
[{"color": "#CC3", "values": {"y": 83, "x": 9}, "key": 105},
 {"color": "#CC3", "values": {"y": 123, "x": 10}, "key": 105},
 {"color": "#FF9", "values": {"y": 96, "x": 11}, "key": 106},
 {"color": "#33F", "values": {"y": 80, "x": 12}, "key": 104},
 {"color": "#CC3", "values": {"y": 117, "x": 13}, "key": 105},
 {"color": "#CC3", "values": {"y": 115, "x": 14}, "key": 105},
 {"color": "#CC3", "values": {"y": 102, "x": 15}, "key": 105},
 {"color": "#FF9", "values": {"y": 111, "x": 16}, "key": 106},
 {"color": "#FF9", "values": {"y": 33, "x": 17}, "key": 106}] 
```

在上面包含字典的列表中，有一些键称为“键”，其值相同，例如 105、106 等，在这些字典中，“值”的值各不相同，例如`"values": {"y": 83, "x": 9}`105 `"values": {"y": 117, "x": 13}`。

我想在一个字典中添加并带来相同“key=xxx”字典的值

例如，对于具有 key=105 的字典，我想聚合“值”：`[{"y": 83, "x": 9},{"y": 117, "x": 13}]` 在这样的列表中说

最终合并输出应保留上述*原始结构*

```
[{"color"="...","values"=[{...},{...}],"key"="..."},....] 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:10:48.773

您可以使用[**`collections.defaultdict`**](http://docs.python.org/dev/library/collections.html#collections.defaultdict).

如果您提供`list`给它，它会在访问新密钥时自动创建空列表。

```
from collections import defaultdict

a = [{"color": "#CC3", "values": {"y": 83, "x": 9}, "key": 105}, {"color": "#CC3", "values": {"y": 123, "x": 10}, "key": 105}, {"color": "#FF9", "values": {"y": 96, "x": 11}, "key": 106}, {"color": "#33F", "values": {"y": 80, "x": 12}, "key": 104}, {"color": "#CC3", "values": {"y": 117, "x": 13}, "key": 105}, {"color": "#CC3", "values": {"y": 115, "x": 14}, "key": 105}, {"color": "#CC3", "values": {"y": 102, "x": 15}, "key": 105}, {"color": "#FF9", "values": {"y": 111, "x": 16}, "key": 106}, {"color": "#FF9", "values": {"y": 33, "x": 17}, "key": 106}]

result = defaultdict(list)

for d in a:
    result[d['key']].append(d['values']) 
```

`dict(result)`就是现在：

```
{104: [{'y': 80, 'x': 12}],
 105: [{'y': 83, 'x': 9}, {'y': 123, 'x': 10}, {'y': 117, 'x': 13}, {'y': 115, 'x': 14}, {'y': 102, 'x': 15}],
 106: [{'y': 96, 'x': 11}, {'y': 111, 'x': 16}, {'y': 33, 'x': 17}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:28:02.293

```
data=[{"color": "#CC3", "values": {"y": 83, "x": 9}, "key": 105}, {"color": "#CC3", "values": {"y": 123, "x": 10}, "key": 105}, {"color": "#FF9", "values": {"y": 96, "x": 11}, "key": 106}, {"color": "#33F", "values": {"y": 80, "x": 12}, "key": 104}, {"color": "#CC3", "values": {"y": 117, "x": 13}, "key": 105}, {"color": "#CC3", "values": {"y": 115, "x": 14}, "key": 105}, {"color": "#CC3", "values": {"y": 102, "x": 15}, "key": 105}, {"color": "#FF9", "values": {"y": 111, "x": 16}, "key": 106}, {"color": "#FF9", "values": {"y": 33, "x": 17}, "key": 106}]

databykey={}   #make a new dictionary
for l in data:   # for each item in the list
 if l['key'] in databykey: databykey[l['key']]['values'].append(l['values'])
 else: databykey[l['key']]={'color':l['color'], 'values':[l['values']]}
 # if the item's key is already in the dictionary, add its values to the list
 # else, add the key to the dictionary with the color and the first value 
```

`databykey`就是现在

```
{104: {'color': '#33F', 'values': [{'y': 80, 'x': 12}]},
 105: {'color': '#CC3','values': [{'y': 83, 'x': 9}, {'y': 123, 'x': 10}, {'y': 117, 'x': 13}, {'y': 115, 'x': 14}, {'y': 102, 'x': 15}]},
 106: {'color': '#FF9', 'values': [{'y': 96,'x': 11}, {'y': 111, 'x': 16}, {'y': 33, 'x': 17}]}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:08:51.093

尝试这样的事情：

```
dicts = [{...}, {...}]

def get_values(key):
    return [d["values"] for d in dicts if d["key"] == key]

values_for_105 = get_values(105) 
```

对于您的示例`values_for_105`：

```
[{'y': 83, 'x': 9}, 
 {'y': 123, 'x': 10}, 
 {'y': 117, 'x': 13}, 
 {'y': 115, 'x': 14}, 
 {'y': 102, 'x': 15}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:10:04.120

如果您只想根据键对元素进行分组，则使用该`itertools.groupby`函数并直接执行此操作，而无需创建以下实例的混乱开销`defaultdict`：

```
import itertools

def key_func(elem):
    return elem["key"]

[{k:list(elem)} for k, elem in itertools.groupby(list_of_dicts, key_func)] 
```

这会产生：

```
[{100: [{'key': 100, 'x': 10, 'y': 20}, {'key': 100, 'x': 5, 'y': 3.4}]},
 {200: [{'key': 200, 'x': 44, 'y': 3.14}, {'key': 200, 'x': -44, 'y': 3.14}]}] 
```

（来自我下面的测试示例）。

这是一种更强大的处理方式，因为 (a) 它将原始键留在了 dicts 中（如果需要，您可以选择忽略它们，但您不受删除它们的限制..因此损耗较小）， (b) 您可以进行分组操作/聚合（下面的示例）。

假设您的初始字典列表被调用`list_of_dicts`，并且您想要一个新的字典列表作为输出，其中只有`x`和`y`条目通过求和它们来聚合。

```
[
 reduce(
        lambda a,b: {"key":a["key"], "x":a["x"]+b["x"], "y":a["y"]+b["y"]},
        list(elem)
       ) 
 for k, elem in itertools.groupby(list_of_dicts, key_func)
] 
```

如果我使用以下测试输入运行：

```
list_of_dicts = [
                 {"key":100, "x":10, "y":20}, 
                 {"key":100, "x":5, "y":3.4}, 
                 {"key":200, "x":44, "y":3.14}, 
                 {"key":200, "x":-44, "y":3.14}
                ] 
```

然后我得到以下结果：

```
print [reduce(lambda a,b: {"key":a["key"], "x":a["x"]+b["x"], "y":a["y"]+b["y"]}, list(elem)) for k, elem in itertools.groupby(list_of_dicts, key_func)]

[{'key': 100, 'x': 15, 'y': 23.4}, {'key': 200, 'x': 0, 'y': 6.28}] 
```

# jquery - 将鼠标悬停在其他子菜单项上时，jQuery 子菜单不会关闭

> ID：12782346
> 
> 赞同：0
> 
> 时间：2012-10-08T13:03:11.680
> 
> 标签：jquery, html, css

我的菜单适用于悬停事件，当我将鼠标悬停在子菜单上时，它会打开自己的子菜单，但是当我将鼠标悬停在其他子菜单上时，前一个子菜单的子菜单应该自行关闭。请检查我的工作 jsfiddle ：

[http://jsfiddle.net/samia/3N7BG/](http://jsfiddle.net/samia/3N7BG/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:59:56.870

你可以尝试这样的事情：

```
$(".topmenu .sub-menu .parent a").mouseover(function() {
        if($(this).parent().attr('id') != $("li .open").attr('id') 
            && $(this).parent().has("ul").length > 0) {
            if($("li .open").length > 0) {
                $("li .open").children("ul").slideToggle(1000);
                $("li .open").toggleClass("open");
            }
            $(this).parent().children("ul").slideToggle(200);
            $(this).parent().toggleClass("open");
        }
}); 
```

请记住，在这种方法中，如果菜单滑动（例如，设计）比菜单滑动（例如，开发）长得多，那么您将遇到“开发”可能会滑动的情况，因为鼠标会离开它的覆盖区域，因为“设计”的滑动。只需在“设计”菜单中添加另一个项目来测试它。

对于当前的项目列表，上述实现应该可以正常工作。

# sql - SQL 连接查询 - 分组方式/聚合

> ID：12782349
> 
> 赞同：0
> 
> 时间：2012-10-08T13:03:18.337
> 
> 标签：sql, sql-server, sql-server-2005, pivot, unpivot

我意识到这个问题以前曾以多种形式提出过，但我正在努力将我找到的每一个答案都应用到我的特定表格中。开始 - 直接进入细节。

表 A 有四列（唯一 ID、编号、修订、日期）。执行 select * from A 时，结果集如下——

```
ID | Number | Revision | Date
------------------------------------
01 | 12345  | 1        | 01/01/2010
02 | 12345  | 2        | 01/04/2010
03 | 123    | 1        | 01/12/2010
04 | 1234   | 1        | 09/09/2012
05 | 12345  | 3        | 09/12/2012 
```

我希望每个数字的单行中的每个修订的日期，例如数字 12345，查询将返回

```
ID | Number | Revision | Date | Revision 2 | Revision 2 Date | Revision 3 | Revision 3 Date |
---------------------------------------------------------------------------------------------
01 | 12345  | 1 | 01/01/2010 |2  | 01/04/2010      | 3 |  09/12/2012| 
```

我理解语法类似于

```
SELECT Revision, Date 
FROM (
SELECT NUMBER 
FROM A) as B INNER JOIN ON a.Number = B.Number 
GROUP BY a.Number 
```

但是，这仍然为每个组合返回一行，我只想要上面显示的结果。

我将不胜感激任何建议或提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:14:23.963

您可以同时使用 an`UNPIVOT`和 a`PIVOT`来完成此操作。如果您有已知数量的值要转换为列，则可以使用 STATIC`PIVOT`并对这些值进行硬编码：

```
select number, [revision_1], [date_1],
             [revision_2], [date_2],
             [revision_3], [date_3]
from
(
  select number, value,
    col + '_' + cast(rn as varchar(10)) col
  from
  (
    select id, number, cast(revision as varchar(10)) revision, 
      convert(varchar(10), date, 120) date,
      row_number() over(partition by number order by date) rn
    from yourtable
  ) x
  unpivot
  (
    value
    for col in (revision, date)
  ) u
) x1
pivot
(
  max(value)
  for col in ([revision_1], [date_1],
             [revision_2], [date_2],
             [revision_3], [date_3])
)p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/67d11/9)

如果您有未知数量的值，那么您将需要对`PIVOT`数据使用动态 SQL。

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name + '_'
                         + cast(t.rn as varchar(10)))
                    from
                    (
                      select row_number()
                        over(partition by number order by date) rn
                      from yourtable
                    ) t
                    cross apply 
                      sys.columns as C
                   where C.object_id = object_id('yourtable') and
                         C.name in ('Revision', 'date')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
          select number, value,
            col + ''_'' + cast(rn as varchar(10)) col
        from 
        (
          select id, number, cast(revision as varchar(10)) revision, 
            convert(varchar(10), date, 120) date,
            row_number() over(partition by number order by date) rn
          from yourtable
        ) x
        unpivot
        (
          value
          for col in (revision, date)
        ) u
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

参见[SQL Fiddle With 演示](http://sqlfiddle.com/#!3/67d11/21)

# android - 更新安卓应用

> ID：12782354
> 
> 赞同：0
> 
> 时间：2012-10-08T13:03:35.533
> 
> 标签：android, database, sqlite, upgrade, apk

我开发了一个安卓应用程序。我在平板电脑上安装了apk。

现在，我只想修改我的 SQLite 数据库的几行代码和一张表，但我不想重新安装我的 apk，我想进行升级。

如何构建这种升级机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:05:07.793

Android 不提供“补丁”机制。您需要创建一个新的 APK 并将其安装在现有应用程序上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:11:49.030

是的，您可以保留数据库中的数据。SQLiteOpenHelper 中有一个[onUpgrade](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)方法，您可以覆盖该方法来修改表。

# html - 如果输入 id 的值为空，则隐藏 div id/class

> ID：12782361
> 
> 赞同：1
> 
> 时间：2012-10-08T13:04:11.003
> 
> 标签：html, hide

在我的选项面板中，我有一个部分，用户可以在其中输入他们的 Twitter 用户名。目前，如果该字段的值为空，Twitter 图标仍会出现在我的网站上，如果值为空，我希望它不存在。

假设我的让 Twitter 图标出现的 div 类名为“.twitter”，如果名为“mytheme_twitter”的输入 id 的值为空，我将如何隐藏它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:09:19.203

```
if($('#mytheme_twitter:empty')){$('.twitter').hide();} 
```

如果你有多个 twitter 类，这会将它们全部隐藏。否则你需要一个选择器来隐藏你想要隐藏的 twitter 类。

# asynchronous - WinRT CopyAsync 文件。我怎么知道它什么时候结束？

> ID：12782363
> 
> 赞同：1
> 
> 时间：2012-10-08T13:04:15.187
> 
> 标签：asynchronous, windows-runtime

我有一个需要使用 Sqlite DB 的 Win8 应用程序；每次应用程序启动时，我都会检查该文件是否存在，如果不存在，我会尝试复制它。问题是当我复制它时，应用程序试图在复制结束之前打开它，我得到一个错误：

我调用以下函数，然后尝试查询数据库：

```
public async static void CopyDatabase()
    {
        bool isExisting = false;
        try
        {
            StorageFile storage = await ApplicationData.Current.LocalFolder.GetFileAsync("dbname.db");
            isExisting = true;
        }
        catch (Exception ex)
        {
            isExisting = false;
        }
        if (!isExisting)
        {
            StorageFile databaseFile = await Package.Current.InstalledLocation.GetFileAsync("dbname.db");
            await databaseFile.CopyAsync(ApplicationData.Current.LocalFolder);

        }

    } 
```

我怎么知道副本何时结束？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:18:24.173

我认为问题不在于此方法的代码，而在于您如何调用它。

将方法的声明更改为：

```
public async static Task CopyDatabase() 
```

并使用以下方法调用它：

```
await CopyDatabase(); 
```

这将保证在执行下一行代码（可能试图打开数据库）之前完成复制。

# java - 休眠改进的命名策略无法正常工作

> ID：12782364
> 
> 赞同：2
> 
> 时间：2012-10-08T13:04:20.990
> 
> 标签：java, sql-server, hibernate, naming-conventions, hbm2ddl

在我的休眠配置文件中使用它：

```
<property name="hibernate.ejb.naming_strategy">org.hibernate.cfg.ImprovedNamingStrategy</property>
<property name="hibernate.hbm2ddl.auto">create</property> 
```

这应该使我所有的表和列`snake_case`都在数据库中。

但这只是制造它们`camelCase`。

**可能是什么问题呢？**

```
private String myName; 
```

在我的数据库中它仍然是`myName(varchar(255))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T07:56:13.737

以编程方式设置`hibernate.ejb.naming_strategy`工作。

```
configuration.setNamingStrategy(ImprovedNamingStrategy.INSTANCE); 
```

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic)

仍然想知道为什么它不能从 XML 工作，应该工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-31T15:25:49.903

@Jaanus 拒绝@Renjith 提供的链接太仓促了

该链接指出它确实在 XML 中工作，但必须作为会话工厂的属性注入，如下面的 XML 代码摘录所示：

* * *

```
 <!-- object to relational mapping configuration -->
  <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="hibernateProperties">
        <property name="map">
          <map>
            <entry key="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />

            <entry key="hibernate.hbm2ddl.auto" value="validate" />

            <entry key="hibernate.connection.charSet" value="UTF-8" />

            <entry key="hibernate.show_sql" value="true" />
            <entry key="hibernate.jdbc.batch_size" value="0" />
          </map>
        </property>
    </property>
    <property name="namingStrategy">
      <bean class="org.hibernate.cfg.ImprovedNamingStrategy" />
    </property>
    <property name="dataSource" ref="dataSource" />
    ...
  </bean> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T14:01:13.823

希望下面提到的链接能引起一些想法。

[链接 1](http://almaer.com/blog/hibernate-improvednamingstrategy)和 [链接 2](http://www.petrikainulainen.net/programming/tips-and-tricks/implementing-a-custom-namingstrategy-with-hibernate/)

# ruby-on-rails - 如何在spreasheet gem中传递导出对象？

> ID：12782366
> 
> 赞同：1
> 
> 时间：2012-10-08T13:04:32.347
> 
> 标签：ruby-on-rails, spreadsheet

我想在AJAX搜索后导出数据，所以我创建了这样的动作（我可以下载后添加搜索条件）：

```
 def export

  require 'spreadsheet'

  @data = Item.all

  report = Spreadsheet::Workbook.new

  sheet = report.create_worksheet :name => "data"

  spreadsheet = StringIO.new 
  report.write spreadsheet 
  send_data spreadsheet.string, :filename => "report.xls", :type =>  "application/vnd.ms-excel"

 end 
```

并且文件是空的。我如何传递对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:14:34.000

对于未来的我：

```
 @data = Item.all

 report = Spreadsheet::Workbook.new

 sheet = report.create_worksheet :name => "data"

 sheet.row(0).concat %w{Id CreatedAt}
 @data.each_with_index { |item, i|
       sheet.row(i+1).push item.id,item.created_at
    } 
```

# database - 管理从开发到实时服务器的首选项的最佳方式

> ID：12782370
> 
> 赞同：0
> 
> 时间：2012-10-08T13:04:42.847
> 
> 标签：database, sync

如果我有一个开发服务器，其应用程序将其首选项保存在数据库表中。并且数据库同步到实时服务器，任何带有路径信息的偏好都会使实时服务器具有错误的路径值。

如何最好地处理这样的情况？谢谢丰富

# powershell - PowerShell HTTPS GET 使用来自 certstore 的客户端证书

> ID：12782371
> 
> 赞同：3
> 
> 时间：2012-10-08T13:04:44.543
> 
> 标签：powershell, https, get, certificate

我正在尝试找到一种简单的方法，如何使用客户端证书通过 HTTPS 检查 Web 内容。我有 VBScript，其中定义了客户端证书，跳过了服务器证书并定义了我正在搜索的内容（字符串“运行”）。我的观点是将脚本重写为 PowerShell。

这是VBS代码：

```
device = "10.10.10.10"
link = "5001/test"
Set Http = CreateObject("WinHttp.WinHttpRequest.5.1")
Http.SetClientCertificate "LOCAL_MACHINE\MY\test"
Http.Option(4) = 256 + 512 + 4096 + 8192 
Http.Open "GET", "https://" & device & ":" & link, false
Http.Send
output = Http.ResponseText
If InStr(1,output,"running") Then
wscript.echo "OK"
Else
wscript.echo "Error"
End If
Set Http = Nothing 
```

这是获取 HTTP Web 内容（但不是 https）的 Powershell 语法：

```
$page = (New-Object System.Net.WebClient).DownloadString("http://10.10.10.10:5001/test")
"$page" 
```

这是使用 .CRT 文件获取 HTTPS 内容的 Powershell 语法（但不是来自 CERTSTORE）

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}
$cert = [System.Security.Cryptography.X509Certificates.X509Certificate2]::CreateFromCertFile("C:\Cert\test.crt")
$url = "https://10.10.10.10:5001/test"
$web = [System.Net.WebRequest]::Create($url)
$web.ClientCertificates.Add($Cert) 
```

这是我最近尝试获取网络内容。没有成功。

```
#ignore untrusted certificate
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}
#load my client certificate defined by thumbprint
$cert = Get-Childitem cert:\LocalMachine\My\5AA55B7B8D99
#get web contetn
$web = [System.Net.WebRequest]::Create($url)
#use my client certificate
$web.ClientCertificates.Add($Cert) 
```

有任何想法吗 ？此致

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-03T08:39:32.633

这对我有用：

```
Invoke-RestMethod https://10.10.10.10:5001/test -CertificateThumbprint XXXXXXXXXXXXXXXX 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-12T06:04:34.693

答案有点晚，但这是我在阅读当前答案后得出的结论。

您可以使用“Invoke-WebRequest”和 -Certificate 参数。您还可以在 Powershell 中使用“wget”，因为它是“Invoke-WebRequest”的别名

```
$cert = Get-ChildItem -Path cert:\LocalMachine\My\5AA55B7B8D99
$response = wget -Uri "https://10.10.10.10:5001/test" -method "Get" -Certificate $cert
$response.Content.Contains("running") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-05T21:41:02.707

一个问题可能是客户端机器必须信任它发送的证书。因此，如果您尝试发送的客户端证书不是自签名的，则需要将颁发者证书导入机器的受信任根目录中。一旦你有了它，你可以使用`System.Security.Cryptography.X509Certificates.X509Certificate2`构造函数（而不是`CreateFromCertFile`方法）来添加`MachineKeySet`标志

例如，在我的机器上，我有一个 pfx（没有密码，因此是`$null`第二个参数），我想发布一些需要客户端证书身份验证的内容：

`[Powershell]`

```
$content = [System.IO.File]::ReadAllBytes("SomeContentIWantToPOST.json")
$endpoint = "https://contoso.com/endpoint"
$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2("MySuperPrivateCert.pfx",$null,[System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::MachineKeySet)
$request = [System.Net.WebRequest]::Create($endpoint)
$request.ClientCertificates.Add($Cert)
$request.Method = "POST"
$request.ContentLength = $content.Length
$request.ContentType = "application/json"
$dataStream = $request.GetRequestStream()
$dataStream.Write($content, 0, $content.Length)
$dataStream.Close() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-21T02:49:59.740

当我尝试为 PRTG 创建启用客户端证书的传感器时，这对我有用。您可能想要更改超时值。此外，您还需要捕获异常，以防网站因任何原因无法访问。

*$CertNumber* = 证书的指纹。

*$CheckURL* = 要加载的 URL。

**证书加载和阅读网站**

```
#*************************************
#********CERTIFICATE LOADING**********
#*************************************

# LOAD CERTIFICATE FROM STORE
$Certificate = Get-ChildItem -Path Cert:\LocalMachine\My\$CertNumber
# CREATE WEB REQUEST
$req = [system.Net.HttpWebRequest]::Create($checkURL)
# ADD CERTS TO WEB REQUEST
$req.ClientCertificates.AddRange($Certificate)

#*************************************
#***********READING SITE**************
#*************************************

#SET TIMEOUT 
$req.Timeout=10000
# GET WEB RESPONSE
$res = $req.GetResponse()
# GET DATA FROM RESPONSE
$ResponseStream = $res.GetResponseStream()
# Create a stream reader and read the stream returning the string value.
$StreamReader = New-Object System.IO.StreamReader -ArgumentList $ResponseStream
# BUILD STRING FROM RESPONSE
$strHtml = $StreamReader.ReadToEnd() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-08T13:47:50.313

你这个，但我无法测试它

```
$device = "10.10.10.10"
$link = "5001/test"
$Http = New-Object 'WinHttp.WinHttpRequest.5.1'
$Http.SetClientCertificate( "LOCAL_MACHINE\MY\test" )
$Http.Option(256 + 512 + 4096 + 8192) # or $Http.Option(4)
$Http.Open("GET", "https://" + $device + ":" + $link, $false)
Http.Send()
$output = Http.ResponseText 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-07-13T23:32:12.307

我建议使用 .NET 类[X509Store](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509store(v=vs.110).aspx)访问证书。使用[Certificates](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509store.certificates(v=vs.110).aspx)属性（下面的示例），您可以通过指纹找到证书并将其附加到请求中。

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}
$Store = New-Object System.Security.Cryptography.X509Certificates.X509Store(
        [System.Security.Cryptography.X509Certificates.StoreName]::My, "localmachine")
$Store.Open("MaxAllowed")
$Certificate = $Store.Certificates |  Where-Object Thumbprint -Eq "XXXXXXXXXXXXXXXX"
$Web = [System.Net.WebRequest]::Create($Url)
$Web.ClientCertificates.Add($Certificate)
$Response = $Web.GetResponse() 
```

# php - html 选择选项 SELECTED

> ID：12782373
> 
> 赞同：13
> 
> 时间：2012-10-08T13:04:57.930
> 
> 标签：php, html, option, selected

我在我的 php

```
$sel = "
    <option> one </option>
    <option> two </option>
    <option> thre </option>
    <option> four </option>
"; 
```

假设我有一个内联 URL =`site.php?sel=one`

如果我没有将这些选项保存在变量中，我可以这样做以使其中一个选项成为 SELECTED 值等于`$_GET[sel]`

```
<option <?php if($_GET[sel] == 'one') echo"selected"; ?> > one </option>
<option <?php if($_GET[sel] == 'two') echo"selected"; ?> > two </option>
<option <?php if($_GET[sel] == 'three') echo"selected"; ?> > three </option>
<option <?php if($_GET[sel] == 'four') echo"selected"; ?> > four </option> 
```

但问题是，我需要将这些选项保存在一个变量中，因为我有很多选项，而且我需要多次调用该变量。

有没有办法在哪里选择该选项`value = $_GET[sel]`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T13:11:01.517

只需使用选项数组即可查看当前选择了哪个选项。

```
$options = array( 'one', 'two', 'three' );

$output = '';
for( $i=0; $i<count($options); $i++ ) {
  $output .= '<option ' 
             . ( $_GET['sel'] == $options[$i] ? 'selected="selected"' : '' ) . '>' 
             . $options[$i] 
             . '</option>';
} 
```

[旁注：我会将一个值定义为每个元素的某种 id，否则当两个选项具有相同的字符串表示形式时，您可能会遇到问题。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T13:18:43.187

```
foreach($array as $value=>$name)
{
    if($value == $_GET['sel'])
    {
         echo "<option selected='selected' value='".$value."'>".$name."</option>";
    }
    else
    {
         echo "<option value='".$value."'>".$name."</option>";
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-25T07:51:29.593

这是使用三元运算符设置 selected=selected 的简单示例

```
<?php $plan = array('1' => 'Green','2'=>'Red' ); ?>
<select class="form-control" title="Choose Plan">
<?php foreach ($plan as $key => $value) { ?>
  <option value="<?php echo $key;?>" <?php echo ($key ==  '2') ? ' selected="selected"' : '';?>><?php echo $value;?></option>
<?php } ?>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:12:19.910

您缺少引号`$_GET['sel']`- 修复此问题可能有助于更快地解决您的问题:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:30:00.737

```
foreach ($array as $value => $name) {
     echo '<option value="' . htmlentities($value) . '"' . (($_GET['sel'] === $value) ? ' selected="selected"') . '>' . htmlentities($name) . '</option>';
} 
```

这是相当整洁的，而且，我认为，不言自明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-11T17:07:44.117

您可以创建一个函数，然后将其添加到每个选项字段以打印 selected="selected"。

例子

```
<option value="PHP" ' . tsw_selected('PHP', $row['anchor']) . '>PHP/PDO/SQL[+]</option>
<option value="HTML" ' . tsw_selected('HTML', $row['anchor']) . '>HTML/CSS</option> 
```

然后你的乐趣：

```
function tsw_selected( $opt, $val )
{
$sel = '';
$opt = ('' != $opt ) ? $opt : 'OTHER';
if( $opt == $val ) $sel = true;
if ( $sel ) {
    return 'selected="selected"'; } else { return ''; }
} 
```

这将回显 select="selected" per true 和 echo '' (nothing) for false。您可以设置 $sel = false，但这并不重要。布尔检查空是否为假。

# c# - 在 Unity3d (NGUI) 中的面板之间重新设置预制件

> ID：12782374
> 
> 赞同：2
> 
> 时间：2012-10-08T13:05:02.910
> 
> 标签：c#, parent-child, unity3d, ngui

不确定这是解决 Unity3d/NGUI 问题的最佳论坛，但请尝试一下……

我正在尝试通过重新设置它来将游戏对象从可滚动面板移动到普通面板。

```
firstGameObject.transform.parent = secondGameObject.transform; 
```

firstGameObject 最初是剪辑的可滚动面板的子项。转换似乎在层次结构中移动得很好，不再可滚动。但它仍然像被剪裁面板的孩子一样被剪裁。

有任何想法吗？

编辑：NGUI 论坛上有人建议在两个 uipanels 上调用 Refresh()，但没有效果。[http://www.tasharen.com/forum/index.php?topic=1941.0](http://www.tasharen.com/forum/index.php?topic=1941.0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:26:22.060

终于让它工作了。正确的方法是在重新设置父级后在旧面板中的每个小部件上调用 CheckParent()。

```
UIPanel smallPanel = NGUITools.FindInParents<UIPanel>(firstGameObject);
List<UIWidget> list = new List<UIWidget>(smallPanel.widgets.buffer);

foreach (UIWidget widget in list)
{
    if (widget != null)
    {
        widget.CheckParent();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T01:46:08.790

功能`CheckParent()`已过时。现在您可以`ParentHasChanged()`在重新设置的 UIWidget 上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:14:24.667

这取决于您使用的是什么滚动条。将新父级设置为预制件，您只需为其设置新的局部坐标系。您说此滚动条中的对象正在剪切。因此，必须有一个数组或列表或类似的东西，存储您的预制件并在您的预制件上执行一些操作。或者，有某种掩码可以隐藏特定区域中的所有对象（我认为这是你的情况）。在这种情况下，您应该将预制件移出面具区域。如果您不需要更改屏幕位置，只需更改 Z 坐标，这样预制件将更靠近相机，并且超出遮罩区域。

# java - Apache FOP 和 xsi:schemaLocation - 如何忽略？

> ID：12782376
> 
> 赞同：2
> 
> 时间：2012-10-08T13:05:06.137
> 
> 标签：java, apache-fop

我在我的 XSL-FO 文件中有一个 xsi:schemaLocation 只是为了知道哪些属性/标签可用。不幸的是，我从变压器中得到了一个例外：

org.apache.fop.fo.ValidationException：在“fo:root”上遇到无效属性：xsi:schemaLocation

在我看到的FopFactory上有一个方法叫ignoreNamespace，但是它不起作用或者我不知道如何正确编写它。我有：

```
FopFactory fopFactory = FopFactory.newInstance();
fopFactory.ignoreNamespace("xsi:schemaLocation"); 
```

怎么做才对？

我的 XSL-FO 的根是这样的：

```
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            font-family="Arial" 
            xsi:schemaLocation="http://www.w3.org/1999/XSL/Format http://www.xmlblueprint.com/documents/fop.xsd"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:24:22.563

ignoreNamespace 函数采用命名空间标识符，在本例中为 URL：[http](http://www.w3.org/2001/XMLSchema-instance) ://www.w3.org/2001/XMLSchema-instance 。以下应该为您解决问题：

```
fopFactory.ignoreNamespace("http://www.w3.org/2001/XMLSchema-instance"); 
```

# internet-explorer-9 - IE9 商业网站标志放置

> ID：12782388
> 
> 赞同：1
> 
> 时间：2012-10-08T13:05:50.190
> 
> 标签：internet-explorer-9, favicon

在 IE9 商业漫威中，Twitter & Pandora 似乎“接管”了浏览器。这真的可能吗？如果可以，怎么做？这是一个示例的链接：http: [//imgur.com/56Yci](http://imgur.com/56Yci)

我认为这与网站图标有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:11:22.513

这些站点已被[**固定**](http://msdn.microsoft.com/en-us/hh535226.aspx)（需要 IE9 和 Windows7），这会将网站图标添加到 URL 框之外。

# twitter - 网站上的社交插件问题

> ID：12782393
> 
> 赞同：1
> 
> 时间：2012-10-08T13:06:13.140
> 
> 标签：twitter

我们最近尝试在我们的网站上放置社交插件。插件工作得非常好。

我们面临的唯一问题是，当我们点击推特插件的推文链接数量时，它会将我们带到推特页面并且没有显示推文！

如何解决这个问题？

# java - Java 中 C# 的 goto 语句的等价物是什么？

> ID：12782396
> 
> 赞同：1
> 
> 时间：2012-10-08T13:06:27.010
> 
> 标签：java, android, goto

有没有办法可以在 Java 中采用 C# 的 goto 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:08:43.133

Java 中没有直接等效的 goto 概念。**您可以使用 break 和 continue**。

在[此处](http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ305_024.htm)查看带有 break 和 continue 的标记语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:09:21.270

Java中[没有 goto 语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)：

> 与 C 和 C++ 不同，Java 编程语言没有 goto 语句。

最接近的是`continue`和`break`语句，可以与标签结合使用，以退出循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T13:09:26.590

没有确切的等价物，但 Java 处理了最合理的用例，即当您想从循环内部转到某个标签时。在这种情况下，您可以使用 break ：

```
outerLoop:
for (int i = 0; i < n; i++) {
    t = A[[i]][j];
    for (int z = 0; z < l; z++) {
        if (arrays[z].contains(t)) {
            continue outerLoop;
        }
    }
} 
```

另请参阅[Oracle 教程中的示例](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T13:09:05.400

**用 break 和 continue**标记语句。****

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T13:10:29.117

阅读有关在 Java 中使用标签语句的信息。

[问题](https://stackoverflow.com/questions/46496/should-i-avoid-using-java-label-statements)

[流量控制](http://www.janeg.ca/scjp/flow/labels.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T13:12:06.480

有命名块，你可以有一个带标签的`break`语句：

```
loop: 
  for (int i = 0; i < 10; ++i)
      break loop; 
```

或者

```
label: {
       if(something) 
          break label;
} 
```

更多信息可以在*[分支语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)*中找到。但除此之外，您没有真正的 goto 语句。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-10-08T13:08:48.703

> 有没有办法可以在 JAVA 中采用 C# 的 goto 语句？

java中的goto语句是保留关键字。但是，它没有以任何方式实现。可能有计划将它包含在 java 引擎中。

回答你的问题。您可以使用[标记的 break](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)，它的工作方式与 goto 非常相似：

```
class BreakWithLabelDemo {
    public static void main(String[] args) {

        int[][] arrayOfInts = { 
            { 32, 87, 3, 589 },
            { 12, 1076, 2000, 8 },
            { 622, 127, 77, 955 }
        };
        int searchfor = 12;

        int i;
        int j = 0;
        boolean foundIt = false;

    search:
        for (i = 0; i < arrayOfInts.length; i++) {
            for (j = 0; j < arrayOfInts[i].length;
                 j++) {
                if (arrayOfInts[i][j] == searchfor) {
                    foundIt = true;
                    break search;
                }
            }
        }

        if (foundIt) {
            System.out.println("Found " + searchfor +
                               " at " + i + ", " + j);
        } else {
            System.out.println(searchfor +
                               " not in the array");
        }
    }
} 
```

[在这里](https://stackoverflow.com/questions/2430782/alternative-to-goto-statement-in-java)提出了类似的问题**

# ruby-on-rails - 如何使用多态关联模拟/存根对象并保存！在回调？

> ID：12782398
> 
> 赞同：0
> 
> 时间：2012-10-08T13:06:30.207
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我有以下通过的控制器规范。但我想 `create(:link)`用模拟或存根替换对象。我怎样才能绕过`after_create`回调`update_target`。

现在当我尝试`mock_model(Link)`我得到错误：

`undefined method `save!' for nil:NilClass`当规范尝试创建着陆对象时。

```
describe LandingsController do
  describe "#destroy" do

    before(:each) do
      controller.stub(:current_user).and_return(mock_model(User))
      stub_request(:any, "www.example.com").to_return(status: 200)
      @link = create(:link)
    end

    let(:landing) do 
      create(:landing, target_id: @link.id)
    end

    it "destroys the landing" do
      Landing.should_receive(:find).with(landing.id.to_s).and_return(landing)
      landing.should_receive(:destroy).and_return(true)
      delete :destroy, id: landing.id, format: :json
    end

    it "returns 204" do
      delete :destroy, id: landing.id, format: :json
      response.status.should == 204
    end
  end
end

class Landing < ActiveRecord::Base
  belongs_to :target, polymorphic: true
  ...
  after_create :update_target
  before_destroy :update_target

  def update_target
    self.target.save!
  end
end

# landings_controller.rb
  respond_to :json

  def destroy
    landing = Landing.find(params[:id])
    target = landing.target
    landing.destroy
    target.save!
    respond_with landing
  end 
```

也许我也应该模拟着陆对象。但是怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:35:03.287

做

```
let(:landing) do 
  mock(:landing, target_id: @link.id, destroy: true)
end 
```

解决你的问题？

# html - Internet Explorer中链接上的文本阴影？

> ID：12782400
> 
> 赞同：2
> 
> 时间：2012-10-08T13:06:37.213
> 
> 标签：html, css, internet-explorer, shadow

我知道`text-shadow`在 Internet Explorer 中不起作用，但他们自己的阴影过滤器应该可以工作。但它似乎不适用于链接 ( `<a>Link</a>`)。有什么解决办法吗？

![在此处输入图像描述](../Images/8864222adb31a3d97aff7f7ac2751132.png)

```
/*Works*/
#navigation .nav li {
    filter: progid:DXImageTransform.Microsoft.Shadow(color=#000000,direction=180,strength=3);

} 
```

![在此处输入图像描述](../Images/d8c3d8ae4d16a7ad649a654b0604fb32.png)

```
/*Do not work*/
#navigation .nav li a {
    filter: progid:DXImageTransform.Microsoft.Shadow(color=#000000,direction=180,strength=3);
} 
```

![在此处输入图像描述](../Images/5a46829e6d9c4a4fd9d68123bc2fff5c.png)

```
/*Text-shadow in Google Chrome working and what I want to achive*/
#navigation .nav li a {
    text-shadow: 0 2px 2px #000;
} 
```

在列表上添加效果的问题在于它会为所有内容添加阴影，而不仅仅是文本，而且看起来很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:13:13.260

将链接中的文本包裹起来`<span>`并为其附加阴影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:16:21.573

```
#navigation .nav li a span {
filter: progid:DXImageTransform.Microsoft.Shadow(color=#000000,direction=180,strength=3);
} 
```

然后：

```
<a href="#"><span>Link Text Here</span></a> 
```

那应该只针对文本。

# asp.net - Visual Studio 2012 - 数据库发布向导已停止？

> ID：12782404
> 
> 赞同：2
> 
> 时间：2012-10-08T13:06:56.510
> 
> 标签：asp.net, visual-studio, sql-server-2008, visual-studio-2012

我正在使用 VS 2012 和 SQL Server 2008，并且刚刚注意到服务器资源管理器中缺少“发布到提供程序”选项。据此，数据库发布向导已经停止了吗？

[http://forums.asp.net/post/5122271.aspx](http://forums.asp.net/post/5122271.aspx)

我现在如何将我的数据库发布到我的服务器？生成脚本是唯一的选择，而不是在 VS IDE 中执行此操作，如果是这样，有人可以提供生成包含存储过程的数据库的步骤吗？

**更新：**

*   [类似的问题](https://stackoverflow.com/questions/11538254/how-to-publish-database-to-provider-in-visual-studio-2012-rc)，但不满意的答案。
*   [确认](http://connect.microsoft.com/VisualStudio/feedback/details/729467/database-publishing)向导确实已停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:01:01.600

您可以从 Visual Studio部署/更新数据库**架构：**

1.  VS2012：查看 -> SQL Server 对象资源管理器面板
2.  右键单击您的数据库-> 架构比较...
3.  选择远程数据库作为目标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:02:04.027

解决方案是在 SQL Server 2008 中使用 SSMS。在对象资源管理器中右键单击数据库节点。选择任务 -> 生成脚本，然后使用所需选项完成向导。从 VS 中快速简单的部署不是很令人满意......

一些教程：

[http://www.sqlchick.com/entries/2011/3/12/scripting-out-data-in-sql-server-2008-r2.html](http://www.sqlchick.com/entries/2011/3/12/scripting-out-data-in-sql-server-2008-r2.html)

[http://www.mssqltips.com/sqlservertip/2500/sql-server-2008-r2-generate-scripts-wizard-with-database-schema-and-data/](http://www.mssqltips.com/sqlservertip/2500/sql-server-2008-r2-generate-scripts-wizard-with-database-schema-and-data/)

# c++ - 如何读取大量数字？

> ID：12782413
> 
> 赞同：4
> 
> 时间：2012-10-08T13:07:31.083
> 
> 标签：c++, c

我需要在 C/C++ 中读取大量（最多 2^24）大数字（每个最多 22 个字符）。如何执行这样的读取？数字以空格分隔，我必须阅读所有内容，直到换行。使用 getch() 并填充数组还是有一些更智能的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:10:15.403

这些“数字”是什么？如果它们是整数，那么 C 中通常没有对如此大的数字的内置支持；您将需要一些库来支持“bignum”。如果它们是浮点数，您可以尝试`double`，但精度可能不够。

如果不了解更多关于您的数据，很难更具体，请考虑在问题中显示一些数字，因为否则它非常模糊。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:14:48.003

如果您的读取是单线程的，您可以使用[`getchar_unlocked()`](http://www.mkssoftware.com/docs/man3/getchar_unlocked.3.asp)，这样可以避免为每个操作锁定流的开销。逐个字符，累积数字，然后等待空格。当您看到空格时，保存数字并将当前值归零：

```
int *data = new int[MAX_LEN];
int *ptr = data;
int ch;
*ptr = 0;
while ((ch = getchar_unlocked()) != '\n') {
    if (ch == ' ') {
        ptr++;
        *ptr = 0;
    } else {
        *ptr = (*ptr *10) + (ch -'0');
    }
} 
```

当然，这个片段忽略了诸如错误检查之类的“不重要”的东西，但是当您的输入被“清理”时就可以了。例如，通过 ACM 在线评委，可以使用类似的方法来节省 I/O 成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:25:28.780

首先，您需要一个适当的类型来存储整数，因为它大于 64 位 int，您可能需要一个结构化类型。您可以自己编写或使用库，例如

[http://gmplib.org/](http://gmplib.org/)

阅读它的文档以供使用。

然后，您需要明确您想对这些数字做什么：求和、转换、搜索或转移？一旦知道了，就可以对用于整数的数据类型进行操作。

# mysql - 如何在脚本中使用某些选项导出数据库？

> ID：12782414
> 
> 赞同：0
> 
> 时间：2012-10-08T13:07:34.007
> 
> 标签：mysql, phpmyadmin

我编写了一个脚本来定期导出我的数据库：

```
#!/bin/bash

current_date=`date '+%F-%H-%M-%S'`

cd /home/user/Documents/backup
mysqldump -umyusername -pmypassword mydb > db-backup-$current_date.sql
tar czvf db-backup-$current_date.tgz db-backup-$current_date.sql
rm db-backup-$current_date.sql 
```

但我想使用 phpMyAdmin 提供的以下选项导出它：

*   在交易中附上出口
*   禁用外键检查
*   添加 DROP TABLE / VIEW / PROCEDURE / FUNCTION / EVENT 语句

我怎么能做到这一点？

**编辑**

我可以在 mydatabase.sql 文件的开头添加以下行吗？

```
SET FOREIGN_KEY_CHECKS=0;
SET AUTOCOMMIT=0;
START TRANSACTION; 
```

如果这样做是正确的，那么我想我的问题是如何在给定位置插入行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:24:32.390

哟可能可以通过 mysqldump 本身完成大部分工作：

```
mysqldump \
--user=LOGIN \
--password=PASSWORD \
--single-transaction \
--events \
--triggers \
--routines \
--disable-keys \
--create-options \
database  > dumpfile.sql 
```

`--create-options`也应该发出`drop`命令。

查看`mysqldump --help`所有可能选项的列表

另一种方法是查看 PHP`phpMyAdmin`并查看它使用了哪些选项

# objective-c - 当 touchesBegan 从 UIImageView 开始时，为什么 UIImageView 会疯狂移动？

> ID：12782416
> 
> 赞同：0
> 
> 时间：2012-10-08T13:07:51.457
> 
> 标签：objective-c, xcode, uiimageview, touchesbegan, touchesmoved

所以我以编程方式创建了一个 UIImageView 并将它放在一个数组上。在 touchesMoved 中，我将 UIImageView 的 x 位置设置为触摸的 x 位置。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
for (UIImageView *b in _blocks) {
    if ( b.image != wall) {
        movingimage = b;
        movingimage.userInteractionEnabled = YES;

        NSLog(@"touch");
     }
 }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [[event allTouches]anyObject];
CGPoint location = [touch locationInView:touch.view];
CGPoint xlocation = CGPointMake(location.x, movingimage.center.y);
movingimage.center = xlocation;
} 
```

如果不是使用以编程方式创建的 UIImageView，而是使用在 Interface Builder 中创建的 UIImageView，则此代码可以正常工作。但是当我使用代码创建 UIImageView 和 tochesBegan 从 UIImageView 开始时，来自 touchesMoved 的触摸坐标变得疯狂，并且 imageView 在两个位置之间快速闪烁。

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:12:08.360

我想这是因为你从一个你正在重新定位的视图中获得了接触点。所以下一个事件将是“不正确的”。我认为您能做的最好的事情就是从超级视图中捕获触摸位置。

编辑：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches]anyObject];
    CGPoint location = [touch locationInView:[movingimage superview]];
    CGPoint xlocation = CGPointMake(location.x, movingimage.center.y);
    movingimage.center = xlocation;
} 
```

# javascript - 使用外推解决 mousemove 事件延迟

> ID：12782418
> 
> 赞同：4
> 
> 时间：2012-10-08T13:08:07.760
> 
> 标签：javascript, dom, mousemove, dom-events

在此站点上进行一些搜索后，我了解到我无法控制浏览器的`mousemove`事件频率。

所以我想应用某种外推方法来解决滞后`mousemove`事件问题。

我记录`mousemove`事件触发时的每个鼠标位置，并计算加速度（利用有限差分获得速度，然后获得加速度）。

之后在函数中，我测量从上次函数调用`render()`经过的增量时间。`render()`最后我用加速度和 推断位置`dt`。

但我没有看到使用这种方法有任何显着效果。有什么不对的吗？

编辑：我在这里做了一个小的运行示例。（对不起，不清楚的问题陈述）

[https://gist.github.com/3858124](https://gist.github.com/3858124)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:01:15.280

就在我将代码粘贴到要点上之后，我意识到了问题，然后修复了错误。

问题是：

我使用 NDC 坐标来计算导数，而我使用世界空间坐标进行外推。

这是新代码：

[https://gist.github.com/3858277](https://gist.github.com/3858277)

结论：对滞后有一定的影响`mouseevent`，但影响不大。作为一个（坏的）副作用，当您的鼠标移动进行紧急制动时，将会出现过冲。

我仍在寻求更好的解决方案。欢迎任何意见/建议。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:09:58.947

我不确定你会在外推方面做得更好。所有当前的浏览器都为 javascript 维护一个线程，可以是每个选项卡 (Chrome) 或每个浏览器窗口 (Firefox)。因此，如果您在脚本中工作，则浏览器在脚本运行时根本不会触发 mousemove 事件*。

因此，提高 mousemove 更新频率的最佳方法是优化您的其他 javascript 以避开 mousemove 事件。一种方法是使用更多的异步调用。因此，您可以编写代码来调用`setTimeout(nextFunc, 0)`循环的下一步，这会将控制权从脚本传回，并允许在循环的下一步之前触发事件。

* The exception to the rule on single threads and synchronous calculation is WebWorkers, which allow you to do a certain set of things in parallel with the rest of the execution, largely those which do not involve the DOM.

# ruby-on-rails - 使用 Devise 连接到 Active Directory 时出现问题

> ID：12782419
> 
> 赞同：1
> 
> 时间：2012-10-08T13:08:13.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, active-directory

在访问某些页面之前，我的任务是使用我们的 Active Directory（Windows 2003）验证我的“rails 3 应用程序”。

我决定使用“devise_ldap_authenticable”，但似乎无法让它正常工作。

我不断被重定向到登录页面，日志中显示以下错误消息。

“在 3 毫秒内完成 401 未授权”

我是否必须将设计电子邮件字段更改为用户名才能成功连接？

有没有人有我可以查看的工作配置？

我的 ldap.yml 包含以下内容：

```
development:
  host: myip
  port: 389
  attribute: sAMAccountName 
  base: cn=Users,dc="mydomain",dc=uk,dc=com  
  admin_user: user
  admin_password: password
  ssl: false 
```

我的 devise.rb 包含以下内容：

```
config.ldap_logger = true
config.ldap_config = "#{Rails.root}/config/ldap.yml"
config.ldap_use_admin_to_bind = true
config.ldap_ad_group_check = false
require 'devise/orm/active_record'
config.authentication_keys = [ :email ]
config.case_insensitive_keys = [ :email ]
config.strip_whitespace_keys = [ :email ]
config.skip_session_storage = [:http_auth]
config.stretches = Rails.env.test? ? 1 : 10
config.reconfirmable = true 
```

我的 routes.rb 包含以下内容：

资源 :posts devise_for :users root :to => 'posts#index' 匹配 ':controller(/:action(/:id))(.:format)'

# ios - MKMapView 比较覆盖矩形和地图矩形

> ID：12782427
> 
> 赞同：1
> 
> 时间：2012-10-08T13:08:37.930
> 
> 标签：ios, overlay, mapkit, polygon

我的应用程序中有一个 MKMapView，有一些叠加层，显示正确。这些叠加层在内部绘制图像

```
- (void) drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context 
```

MapView 允许缩放，我想避免以特定缩放级别绘制图像

有没有办法在这个方法内部确定覆盖矩形是否大于地图视图矩形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:13:54.980

假设您的叠加层是由`myOverlay` `(MyOverlay *)`和`myOverlayView` `(MyOverlayView *)`

在里面`- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context`你可以得到`myOverlay`这样的参考：

```
MyOverlay *myOverlay = (MyOverlay *)self.overlay; 
```

`myOverlay.boundingRect`从这里开始比较应该很容易`mapRect`。

# android - 每 4 项在 ListView 中重复 ImageView

> ID：12782430
> 
> 赞同：0
> 
> 时间：2012-10-08T13:08:38.927
> 
> 标签：android, listview, imageview

这是我的问题：

我有一个带有 ImageView 的 ListView，最初设置为 GONE，但在自定义适配器上做了一些事情后，将其设置为可见。

我的问题是，如果我选择列表的第一个元素，每四个项目也会将其图像设置为可见。

我希望我已经解释了自己。如果有任何疑问，请随时问我。

我编辑以添加一些代码。有些部分是西班牙语，因为我是西班牙语。

getView(): 视图 v = convertView;

```
 if (v == null) {
            LayoutInflater vi = (LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.list_view_item, null);
        }
        final Oferta o = items.get(position);
        boolean comprado = false;
        if (o != null) {
                final ImageView image = (ImageView) v.findViewById(R.id.imageView1);
                TextView titulo = (TextView) v.findViewById(R.id.textView1);
                TextView precioAnterior = (TextView) v.findViewById(R.id.textView2);
                TextView precioNuevo = (TextView) v.findViewById(R.id.textView3);
                TextView fechaHasta = (TextView) v.findViewById(R.id.textView4);
                ImageView imageComprado = (ImageView) v.findViewById(R.id.imageView2);

                Drawable compra = this.getContext().getResources().getDrawable(R.drawable.comprada);

                for(int i = 0; i < MainActivity.tickets.size();i++)
                {

                    if((MainActivity.tickets.get(i).getOferta().getId()) == (o.getId()))
                    {   
                        System.out.println("tickets: " + MainActivity.tickets.get(i).getOferta().getId());
                        System.out.println("oferta: " + o.getId());
                        comprado  = true;
                        break;
                    }
                }

                if (comprado)
                {
                    imageComprado.setVisibility(View.VISIBLE);
                    comprado = false;
                }

                if (titulo != null) {
                      titulo.setText(o.getTitulo());    
                      }
                if(precioAnterior != null){
                    precioNuevo.setText(String.valueOf(new java.text.DecimalFormat("#.##").format(o.getPrecioNuevo()))+"€");    
                }
                if(precioNuevo != null){
                    precioAnterior.setPaintFlags(precioAnterior.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
                    precioAnterior.setText(String.valueOf(new java.text.DecimalFormat("#.##").format(o.getPrecioAnterior()))+"€");  
                }
                if(fechaHasta != null){
                    fechaHasta.setText("Cad.: " + o.getDisponibleHasta());  
                }
                if(image != null){
                     DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
                    .cacheInMemory()
                    .cacheOnDisc()
                    .build();
                 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getContext())
                    .defaultDisplayImageOptions(defaultOptions)
                    .build();

                 ImageLoader.getInstance().init(config);
                //imageLoader.init(ImageLoaderConfiguration.createDefault(getApplicationContext()));
                ImageLoader.getInstance().displayImage(o.getImagen(), image);
                      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:41:01.110

这是由于列表项的回收。只需跟踪要在列表中将其 imageView 设置为可见的项目。在您的 CustomAdapter 中，尝试检查当前索引是否在列表中。如果未将其设置为 GONE，则其他可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:14:39.780

我的答案在下面试试这个代码并完成你的工作。

```
public View getView(int position, View convertView, ViewGroup parent) 
    {   
        try
        {
            View row = null;

            if (row == null) 
            {   
                LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater.inflate(R.layout.custom_list_item, parent, false);

                // Get reference  
                imgIconView = (ImageView) row.findViewById(R.id.imgIcon);
                txtLabel = (TextView) row.findViewById(R.id.txtLable);
                txtLabel.setTypeface(genHelper.setFontFace("TektonPro-Bold.otf"),Typeface.BOLD);

                txtScore=(TextView) row.findViewById(R.id.txtScore);
                txtScore.setTypeface(genHelper.setFontFace("TektonPro-Bold.otf"),Typeface.BOLD);

            }else
            {
                row = (View) convertView;
            }
} 
```

复制此代码并替换您自己的 getview 方法代码，它的工作亲爱的。

# algorithm - Dijkstra 算法中边的松弛

> ID：12782431
> 
> 赞同：56
> 
> 时间：2012-10-08T13:08:39.897
> 
> 标签：algorithm, graph-theory, graph-algorithm

**`relaxation of an edge`**在图论的背景下是什么意思？我在研究 Dijkstra 的单源最短路径算法时遇到了这个问题。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-08T13:23:57.903

[这是](http://www.egr.unlv.edu/~larmore/Courses/CSC269/pathing)对算法的一个很好的描述，它也解释了松弛的概念。

> “松弛”的概念来自对最短路径的估计与螺旋拉伸弹簧的长度之间的类比，它不是为压缩而设计的。最初，最短路径的成本被高估了，被比作伸长的弹簧。随着找到更短的路径，估计成本降低，弹簧放松。最终，如果存在最短路径，则找到最短路径，并且弹簧已松弛到其静止长度。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-08T13:25:36.893

Dijkstra 算法中的松弛过程是指更新连接到顶点 v 的所有顶点的成本，如果这些成本可以通过包含经过 v 的路径得到改善。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-08T13:31:48.923

放松边（您也可以在其他最短路径算法中找到这个概念）试图通过使用另一个顶点来降低到达顶点的成本。

您正在计算从一个起始顶点（例如*S*）到所有其他顶点的距离。在某些时候，你有中间结果——当前的估计。放松是您检查某些顶点*u*和*v*的过程：

```
if directly_connected(v, u)
    if est(S, v) > est(S, u) + dist(u,v)
       est(S, v) = est(S, u) + dist(u, v) 
```

其中`est(S,a)`是距离的当前估计值，`dist(a,b)`是图中相邻的两个顶点之间的距离。

您在放松过程中基本上检查的是天气您当前从*a*到*b*的估计可以通过“转移”通过*c*的路径来改进（这种“转移”将是从*a*到*c*和从*c*到*b*的路径长度）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-05T22:11:58.137

# 边缘松弛过程

## 初始化

在最短路径算法中，您首先将零路径成本分配给起始节点（例如**S**），并将无穷大的路径成本分配给每个其他节点（例如**A**，**E**）。

[![最短路径_01](../Images/f6231ff225a1deb134b70b0f49a6a4ab.png)](https://i.stack.imgur.com/EVrSx.png)

```
S := new Node()
A := new Node()
E := new Node()

// To go from S to S is zero
S.path_cost = 0

// high cost
A.path_cost = 1000 // "infinity"
E.path_cost = 1000 // "infinity" 
```

## 边缘松弛

无限是我们可以拥有的最高成本，因此我们希望尽可能将“放松”降低到更低的成本。为此，我们计算起始节点和另一个节点之间的路径成本（例如**a**或**ab**），如果该路径成本较小，则更新该节点的路径成本。

[![最短路径_02](../Images/7c53898c574da7176a369865af6fd2c0.png)](https://i.stack.imgur.com/J4Rpf.png)

```
a := 3
b := 5

SS := S.path_cost + 0
if (S.path_cost > SS) {
  // 0 !> 0 + 0
  S.path_cost = SS
}

Sa := S.path_cost + a
if (A.path_cost > Sa) {
  // 1000 > 0 + 3
  A.path_cost = Sa
  // A = 0 + 3
}

ab := A.path_cost + b
if (E.path_cost > ab) {
  // 1000 > 3 + 5
  E.path_cost = ab
  // E = 3 + 5
} 
```

## 重复边缘松弛

[![最短路径_03](../Images/1bd6985819a7193b5816ad4d80e9ca6b.png)](https://i.stack.imgur.com/Wd3AR.png)

```
c := 1

Sc := S.path_cost + c
if (E.path_cost > Sc) {
  // 8 > 0 + 1
  E.path_cost = Sc
  // E = 0 + 1
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-23T15:27:00.370

让我们在图中假设如果我们有 (u,v)∈ E 其中 w(u,v)=10 那么如果在它们之间添加第三个顶点，例如 w(u,y)=1 和 w(y,v)= 3 现在我们在 u 和 v 之间找到一条权重为 1+3=4<10 的路径。现在我们将第二条路径视为最短路径，即 (u,y,v) 并将忽略第一条路径，这是松弛。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-24T15:28:23.040

边缘松弛。

> 放松一条边 v -> w 意味着测试从 s 到 w 的最知名方式是否是从 s 到 v，然后从 v 到 w 取边，如果是，则更新我们的数据结构。

Java代码：

```
private void relax(DirectedEdge e) {
    int v = e.from(), w = e.to;
    if (distTo[w] > distTo[v] + e.weight()) {
        distTo[w] = distTo[v] + e.weight();
        edgeTo[w] = e;
    }
} 
```

还有顶点松弛。这意味着放松从给定顶点指向的所有边。

```
private void relax(EdgeWeightedGraph G, int v) {
    for (DirectedEdge e : G.adj(v)) {
        relax(e);
    }
} 
```

来自[https://algs4.cs.princeton.edu/44sp/](https://algs4.cs.princeton.edu/44sp/)

# perl - 如何在 Mojolicious 的 Web 请求之外呈现模板？

> ID：12782433
> 
> 赞同：2
> 
> 时间：2012-10-08T13:08:46.887
> 
> 标签：perl, templates, mojolicious

有没有办法使用 Mojolicious 渲染引擎在 Web 请求之外渲染模板？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:55:36.410

是的

```
use Mojolicious::Renderer;

my $renderer = Mojolicious::Renderer->new;

push @{renderer->paths}, '/path/to/your/templates';

my $template = $renderer->get_data_template({
    template       => 'foo/bar',
    format         => 'html',
    handler        => 'epl'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T13:48:56.280

这是一个更全面（和更新）的解决方案，允许充分使用完整 Mojolicious 堆栈中可用的所有渲染插件。

```
use Mojolicious;

unless (@ARGV) {
    die "$0: <template base name> [key value pairs]\n";
}

my $app = Mojolicious->new(secrets => ['ignored']);
my $c = $app->build_controller;
my $r = $app->renderer;

push @{$r->paths}, './templates';          # directory containing templates
$c->app->log->level('fatal');

my $template = shift;                      # template base name e.g. 'index' which looks up ./templates/index.html.ep
$c->stash(shift, shift) while @ARGV >= 2;  # add extra parameters into cache
my $out = $c->render_to_string($template);
print $out if $out;

exit 0; 
```

# rest - 使用 REST POST 服务上传 XML（带有重复元素）

> ID：12782437
> 
> 赞同：0
> 
> 时间：2012-10-08T13:09:02.347
> 
> 标签：rest, post

我想使用 rest post 服务上传 xml。我已经部署了可以正常使用普通 xml 的后期服务。当我尝试使用相同元素列表上传 XML 时：

`Customer`并且`Order`是列表类型元素和值在服务器端设置为 null。我已经`List<CustomerType> customerDetail`为客户和`orderlist`.

如果我把它简单化`CustomerType customerDetail`并上传一个客户xml，那么它就会成功上传。

但是，当我`List/Array/Observablecollection`在单个 xml 中获取并上传多个客户时，客户详细信息设置为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:34:05.987

从你写这篇文章的方式很难准确理解你的问题是什么，但我猜你正在尝试发布一组客户并在你的文档中有多个根节点，如下所示：

```
<customer>
   <someNode />
</customer>
<customer>
    <someOtherNode />
</customer> 
```

这是无效的 XML。

如果这是您的问题，您有两种可能的解决方案。首先，执行一个 foreach 循环并分别发布每个客户。在 REST 服务器端简单、快速但占用大量资源。其次，为集合添加一个客户批处理节点作为您的根节点，其中包含多个客户节点，并在 REST 服务器端添加处理此问题的能力（另一个 foreach，但对服务器只有一个 http 调用，因此使用的资源更少）。这更复杂，但最终是一种更好的方法。您的新 XML 文档可能看起来像这样：

```
<customerCollection>
<customer>
   <someNode />
</customer>
<customer>
    <someOtherNode />
</customer>
</customerCollection> 
```

# struts2 - 为什么struts2包保持分开？

> ID：12782445
> 
> 赞同：1
> 
> 时间：2012-10-08T13:09:20.700
> 
> 标签：struts2

是否有任何理由为 struts2 中的 struts core api 和 com.opensymphony.xwork2 维护单独的包文件夹结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:20:27.707

简短的回答：是的，但这不是技术问题。

更长的答案：因为 XWork 2 是一个完全独立的项目，WebWork，然后是 Struts 2，是在它之上构建的。该项目“收购”了 XW2，但它暂时仍然是一个独立的实体。它现在的位置也比以前好。

我们已经讨论过将其折叠并带入“Struts 家族”，但重要的是它仍然是一个独立的实体，因为它与 Web 层没有直接关系。有些人，包括我自己，已经单独使用 XW2 来实现其命令模式。

如果我们将其重新命名为 Struts 组件，它很可能会作为一个单独的组件保留，尽管我不太确定它在这一点上会是什么样子，它会在哪里等。我个人不赞成完全合并的原因正是因为 XW2 与 Web 无关，在 Web 应用程序之外使用，并且是逻辑上独立的组件。

# google-maps - 使用区域/多边形进行 Maps API 搜索以查找区域内的所有内容

> ID：12782453
> 
> 赞同：2
> 
> 时间：2012-10-08T13:09:45.807
> 
> 标签：google-maps, geolocation, maps, geocoding

我需要你的帮助。我正在开发一个网站，我需要像谷歌地图搜索功能这样的搜索，但具有搜索区域的功能。

例子。假设我正在建立一个网站来显示一个国家/地区的所有待售房屋。我使用谷歌地图 api 在地图上获取一个点，并查看该点周围的所有“待售房屋”。这一切都很好，我不想这样做。

但是，我有一个“电子邮件代理”，可以让我的客户在该地区获得类似的房子。如何将第一个地图搜索绑定到特定区域。

谷歌地图，在他们的地图上显示了一些“边界/多边形”数据，定义了一个单一的区域，比如“曼哈顿，纽约”，我不想要这些数据，但它似乎不可用。

所以简而言之，我需要帮助找出最好的方法和最好的地图提供商，对于一个“业主”可以设置待售房屋的搜索站点，“买家”可以搜索待售房屋，并在何时收到通知他们喜欢的地区（例如曼哈顿）的房子被上传到网站。

我正在考虑通过区域/边界/多边形来做，或者通过给定的搜索点和估计的搜索半径为 5-10 公里的另一种方式。

# python - 为什么我不能打印堆队列？

> ID：12782454
> 
> 赞同：2
> 
> 时间：2012-10-08T13:09:54.620
> 
> 标签：python

我有一个名为 mylist 的列表。如果我进入`print mylist`我的程序，我可以打印我的列表并查看项目。然后我将列表项转移到堆队列中：

```
 myheap=heapq.heapify(mylist)
 print myheap 
```

它打印`None`。怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T13:11:08.633

您未能阅读文档：

> `heapify(x)`
> 
> 在线性时间内将列表 x 原地转换为堆。

该`heapify()`方法就地转换列表，它不返回新列表。你应该打印`mylist`：

```
>>> a=[43,12,4,1,5,3,5,3,5,2,64,352,36]
>>> import heapq
>>> heapq.heapify(a)
>>> a
[1, 2, 3, 3, 5, 4, 5, 12, 5, 43, 64, 352, 36] 
```

正如评论中所指出的，这对于 Pythonn API 来说有点奇怪。我不确定，但我想这是为了提高效率。尽管如此，该`heapify()`函数当然可以只返回输入引用，以使其不那么令人惊讶。

如果 API 是一个构造函数，它像您预期的那样返回一个新构造的对象，那么它很可能会以不同的方式命名，也许：

```
myheap = heapq.HeapQ(a)  # This is not valid code. 
```

函数的大小写和命名都强烈暗示这*不是*一个常规的构造函数。

# google-analytics - 将谷歌分析连接到多个顶级域

> ID：12782455
> 
> 赞同：0
> 
> 时间：2012-10-08T13:09:58.197
> 
> 标签：google-analytics

我有 2 个域 www.domain1.com 和 www.domain2.com 指向同一个站点。
我想将谷歌分析连接到他们，以跟踪从两个域到我网站的全部流量。
我在 stackoverflow 中看到了此类问题的答案，指示为 domain1.com 和 domain2.com 中的所有页面添加相同的分析帐户 ID，但在 domain1.com 中使用 setDomainName(domain1.com)，在 domain2 中使用 setDomainName( domain2.com）。

该解决方案让我感到困惑，因为我不明白谷歌如何知道我想要允许对这两个域的统计数据求和。
似乎我可以看到例如 stackoverflow.com 的分析 ID 并将其放在我的站点中，结果将我的统计信息添加到 stackoverflow 中。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:39:37.143

[在此处查看开发人员网站](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#multipleDomains)上的文档。

您对以下设置是正确的：

```
setDomainName(domain1.com)
setDomainName(domain2.com) 
```

您缺少的是相同的 Analytics 配置文件 ID。此示例来自文档：

站点#1：

```
<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12345-1']);
_gaq.push(['_setDomainName', 'example-petstore.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);
</script> 
```

和站点＃2：

```
<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12345-1']);
_gaq.push(['_setDomainName', 'my-example-blogsite.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);
</script> 
```

配置文件 ID 将 2 个域联系在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:15:46.717

> 我有 2 个域 www.domain1.com 和 www.domain2.com 指向同一个站点。我想将谷歌分析连接到他们，以跟踪从两个域到我网站的全部流量。

对于这个用例，我还要看看[Google Analytics on Steroids](https://github.com/CardinalPath/gas)。它是围绕 Google Analytics 的第三方包装器，可让您更轻松地实现与此设置一起提供的其他功能，例如[跨域跟踪。](https://github.com/CardinalPath/gas#cross-domain)

> 似乎我可以看到例如 stackoverflow.com 的分析 ID 并将其放在我的站点中，结果将我的统计信息添加到 stackoverflow 中。

虽然这是真的，但您可以通过应用[配置文件过滤器](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033162)来包含/排除流量。StackOverflow 将有一个“仅包括到 HostName = StackOverflow.com 的流量”。您可以有一个自定义的“仅包含与 HostName 正则表达式匹配的流量`^(.*\.)?(domain1|domain2)\.com$`

如果您有兴趣了解更多信息，[来自 Google 的视频](http://services.google.com/analytics/breeze/en/filters/index.html)是一个很好的起点。

# android - 与 Android 中的资源相比，base64 有什么好处吗？

> ID：12782456
> 
> 赞同：0
> 
> 时间：2012-10-08T13:10:00.970
> 
> 标签：android, image, base64

我有 2 个 .plst 文件，其中一个 5.2MB，另一个小一点，可以嵌入到我的 Android 应用程序中。

应用程序是来自 iOS 的端口，所以在文件中我有 iPad 视网膜和 iPhone 视网膜的图像。文件包含多个 Base64 图像。

读了一下，我得出的结论是，在 Base64 文件中的设备上拥有静态图像根本没有优势。

任何人都可以帮助解释为什么我会将图像保存在 .xml 文件中，而不是将它们保存为 .png，命名它们并添加到可绘制对象中？有什么好处吗？

我不会将这些图像发送到任何地方，上传它们，使用网络......它们将一直驻留在设备上。

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:26:46.143

使用标准资源（或资产/取决于您的需要）是在 Android 上执行此操作的“自然”方式。正如您所描述的那样使用 base64 在这里毫无意义，并且使事情变得更糟，因为您需要在使用之前对这些资产进行解码，这意味着要使用时间和资源。坚持提供的平台机制...

# cloudbees - 如何使用 Maven 将 Java 7 应用程序部署到 CloudBees run@cloud

> ID：12782457
> 
> 赞同：1
> 
> 时间：2012-10-08T13:10:02.190
> 
> 标签：cloudbees

我知道使用 Bees SDK 时可以使用运行时参数“-Rjava_version”提供 Java 版本。使用 Maven 时是否可以提供该运行时参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:13:21.700

此时，您必须通过bees SDK（或api，或通过启动它的clickstart）进行设置。但是，一旦设置 - 您不需要每次都设置它（您只需要设置一次参数，当在 cloudbees 中创建应用程序时）。

即，一旦您使用 -Rjava_version.... 调用了 app:create （或其他任何东西），那么您就不需要再次调用（它将被保留）。

```
bees app:deploy -Rjava_version=1.7  -a account/appname 
```

您也可以使用 bees config:set 来设置 -Rjava_version （只需设置一次）。

# javascript - 播放 Javascript 函数

> ID：12782472
> 
> 赞同：0
> 
> 时间：2012-10-08T13:10:56.070
> 
> 标签：javascript, jquery, function

我对 jQuery 的掌握很薄弱，但我正在尝试学习向其中添加常规 Javascript 的基础知识。我想将一系列动画“保存”为一个函数，然后通过几个不同的点击事件调用该函数。解决此问题的最佳方法是什么？

jsFiddle - [http://jsfiddle.net/kfycP/1/](http://jsfiddle.net/kfycP/1/)

简单的示例代码：

```
$(document).ready(function() {

function animateCube() {
    $('.test').fadeOut();
    $('.test').delay(500).slideDown();
}

$('.test').click(function() {
// Play "animateCube"
});

$('.link').click(function() {
// Play "animateCube"
});

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:12:23.780

我会将函数分配给 a`var`并将其作为事件的单击处理程序引用。

```
$(document).ready(function() {

  var animateCube = function() {
    $('.test').fadeOut();
    $('.test').delay(500).slideDown();
  }

  $('.test').click(animateCube);

  $('.link').click(animateCube);

}); 
```

如果您想执行一些额外的代码，我会将处理程序包装在一个匿名函数中。

```
$('.test').click(function(){
  // execute more code
  animateCube();
  // execute even more code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:14:57.690

您可以简单地调用该函数，如下所示：

```
$('.test').click(function() {
  animateCube();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:12:37.427

您只需从单击处理程序中调用该函数。

```
$('.link').click(function() {
   animateCube();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T13:13:40.157

```
$('.test, .link').click(function() {
  animateCube();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T13:20:06.907

由于您正试图掌握*常规 JS*，我认为对您来说最有趣的方法是使用命名回调：

```
$(document).ready(function()
{
    function animateCube(e)//can be declared outside ready CB, too
    {//jQuery passes the event object to the function
        $(this).fadeOut();//? fade only clicked element?
        $('.test').fadeOut();
        $('.test').delay(500).slideDown();
    }
    $('.link, .test').on('click',animateCube);
}); 
```

您需要知道的是函数是一等对象，并且可以作为参数传递给另一个函数，就像您在 jQuery ( `.click(function`<---) 中一直做的那样。这就是为什么写恕我直言没有意义`.click(function() { anotherFunction();});`。您正在动态创建一个辅助函数对象，将其传递给调用它的 jQuery，它所做的只是调用您希望看到执行的函数。事实上，函数是在特定的上下文 ( `$(this)`) 中调用的，而这正是您可能想要使用的上下文。在它周围包装一个虚拟函数并没有加起来。如果您想在给定函数中添加一些额外的东西，只需*将它们视为它们的对象*. 它们可以是参数，函数的返回值，它们可以具有属性，它们提供了一个原型（-链），它们甚至可以同时被多个变量引用......考虑一下：

```
$(document).ready(//<-- open bracket: this is a function call
    function(){});//we're creating a function AND pass it as an argument 
```

所以，`ready`我们调用的方法可能看起来像这样（它看起来比这更复杂，但这不是重点）：

```
object.ready = function(functionArgument)
{
    //the function we passed looks like a variable now:
    console.log(typeof functionArgument);//"function"
    //ways this function can be called:
    functionArgument();
    functionArgument.call(this);//call in current context
    functionArgument.apply(object,[1,2,3]);//call as a method of object, and pass 3 arguments
    functionArgument.bind(window);//bind global context
    functionArgument();//call in bound context
}; 
```

函数在 JS 中是简洁的东西，而且，同样：它们也是对象，因此可以像任何其他对象一样为它们分配属性。在我们的示例中：

```
functionArgument.hasAProperty = functionArgument;
functionArgument = (function(originalFunction)//this was the original function
{
    return function()//<-- return a function, that will be assigned to our var
    {
         console.log('I used to be:');
         console.log(oringalFunction);
         console.log('Now I do even more! But did I loose my property?');
         console.log(typeof functionArgument.hasAproperty);//undefined
         console.log('Yes, but: ' + typeof originalFunction.hasAProperty + ' Not entirely!');
    };
})(functionArgument.hasAProperty);//passes a reference to itself 
```

让我知道这对您是否有意义，这是未经测试的东西，但它遵循 IIFE 和闭包的基本原则。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T13:16:09.973

试试这个：

```
$(document).ready(function() {
    function animateCube() {
        $('.test').fadeOut();
        $('.test').delay(500).slideDown();
    }
    $('.test').click(function() {
       // Play "animateCube"
    });
    $('.link').click(function() {
        $('.test').fadeOut().delay(500).slideDown();
    });
}); 
```

# visual-studio-2010 - 在文件菜单 VS 下管理 Nuget 包

> ID：12782473
> 
> 赞同：1
> 
> 时间：2012-10-08T13:10:56.477
> 
> 标签：visual-studio-2010, nuget, nuget-package

我正在定制 NuGet（库包管理器），我需要在 VS2010 的文件菜单下放置“管理 NuGet 包...”子菜单项。我已经确定需要对 vsct 文件 (NugetTools.vsct) 进行更改，但我不确定如何添加文件菜单项，然后在文件菜单下放置“管理 NuGet 包...”？

如果您对此有任何想法，请告诉我？

截至目前，“管理 NuGet 包...”出现在项目菜单项和项目的引用下（当右键单击项目下的引用时）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:09:35.540

你真的需要把它放在那里吗？用户应该能够自己添加它。

*   工具 -> 自定义
*   选择第二个选项卡（命令）
*   在下拉列表中选择“文件”
*   单击添加命令按钮
*   浏览到工具
*   将 cmdidAddPackagesForSolution 项添加到您的菜单
*   关闭对话框，打开文件菜单，检查它是否在其中。

# tfs - 来自网站的 TFS 报告

> ID：12782475
> 
> 赞同：0
> 
> 时间：2012-10-08T13:10:58.977
> 
> 标签：tfs, tfs-web-access, tfs-reports

当我使用门户网站时，我无法让 TFS 报告显示任何数据。当我通过 Visual Studio 运行 TFS 报告时，报告正确显示，但是当我转到 TFS 门户网站时，我得到了报告选项，但是当我运行它时，我得到一个空白报告，没有错误消息，只是一个空白报告。 ![在此处输入图像描述](../Images/c04be1c5c710e15edaed56bd666145f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:06:55.273

该网站（在右侧）不属于 Team Foundation Web Access。它是 SQL Server 报告站点。

如果您尝试在其他浏览器上打开该报告，会发生什么情况？

# jquery-ui-autocomplete - jQuery自动完成json乐趣

> ID：12782485
> 
> 赞同：0
> 
> 时间：2012-10-08T13:11:28.707
> 
> 标签：jquery-ui-autocomplete

我刚开始使用 Jquery UI 自动完成功能。我打算让它工作的方式是通过 JSON 数据。

就像现在一样，我将安静下来几千个 JSON 条目，它们都看起来像这样：

```
{
"FirstName": "Name",
"LastName": "Surname",
"Initials": "mtg",
"EmploymentDescription": "Udbudskonsulent"
}, 
```

现在，我需要自动竞争来帮助限制基于“首字母”值的搜索结果的数量。不幸的是，自动竞争仅在标签、值和 id 键之后对值进行排序，这意味着如果我将“首字母”重命名为这些值之一，它应该可以解决问题。不幸的是，这不是一个选项，所以我需要另一种方法来使自动完成器以我想要的方式工作。

那么，你们中的任何人都建议让自动完成器帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:01:00.337

据我所知，如果我错了，请纠正我，用户将通过键入**mtg进行搜索**

如下更改 JSON 片段（*例如*.）。

```
 {
"FirstName": "Micheal",
"LastName": "TobiasGrey",
"Initials": "mtg",
"EmploymentDescription": "StackOverflowGuy"
}, 
```

**Micheal TobiasGrey**应该在列表中呈现。（假设 mtg 和 Michael 之间的关系是在服务器端建立的）

我们可以让自动完成小部件*将*我们的自定义结果视为它自己的标签和值，如下所示。

```
$.ajax({
type: "POST",
url : "/CCInfoHandlerServlet",
data : param,
dataType : 'json',
success :function( data)
{

        response($.map(data,function(item){

            return {
                    value : item.FirstName+""+item.LastName,//This will be displayed in ur text field after selection
                    label : item.FirstName+""+item.LastName, //This will be displayed in ur suggestion list

                 };

            }));//response method ends- this passes the data

},//Success ends 
```

# java - Java中的接口方法冲突

> ID：12782491
> 
> 赞同：19
> 
> 时间：2012-10-08T13:11:49.067
> 
> 标签：java, interface, overriding

> **可能重复：**
> [接口实现中的方法名称冲突 - Java](https://stackoverflow.com/questions/2598009/method-name-collision-in-interface-implementation-java)

如果我们需要实现两个接口，这两个接口都包含一个名称和参数相同但返回类型不同的方法，我们该怎么办？例如：

```
interface A {
    public int foo();
}

interface B {
    public double foo();
}

class C implements A, B {
    public int foo() {...}  // compilation error
} 
```

有没有简单的方法来克服这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T13:15:04.630

最简单的解决方案是始终返回`double`A，因为它可以存储所有可能的`int`值。

如果您不是一个选项，则需要使用继承的替代方法。

```
class C {
    public A getA();
    public B getB();
}

C c = new C();
int a = c.getA().foo();
double b = c.getB().foo(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T13:14:49.877

你不能。Java 通过名称和参数而不是返回类型来唯一标识方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T13:27:33.933

您可以编写一个[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)类来实现其中一个接口。

示例实现：

```
class AdapterA implements A{
     AdapterA(C c){impl = c;}
     private final C impl;
     public int foo(){return c.fooReturningInt();}
}
class C implements B{

   public double foo(){...}
   public int fooReturningInt(){...}
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-08T13:16:38.257

在接口 A 和 B 中使用 Number 代替 double 和 int。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-08T13:16:45.807

Java 中的方法由其签名唯一地定义。来自[http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

> 定义：方法声明的两个组成部分包括方法签名——方法的名称和参数类型。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-08T13:15:50.020

您的`foo()`方法显然没有明确定义。可能应该有一个带有 a 的父接口`public Number foo()`，它由 A 和 B 扩展，他们将其覆盖为更具体的类型。除非您重命名其中一个方法，否则您的类实际上并没有一种明智的方式可以实现这两个接口`foo`。

# php - 在php中调用php脚本并返回值

> ID：12782497
> 
> 赞同：2
> 
> 时间：2012-10-08T13:12:22.593
> 
> 标签：php, curl

我正在尝试从每个回显“完成”或“错误”返回的脚本中获取返回值。首先，我认为我可以使用 php 函数`file_get_contents`来实现它，但它会返回我的整个脚本，而不仅仅是我在脚本中打印的内容。然后我相信了这个`cURL`方法，但它无法让它发挥作用......

调用的脚本：

```
<?php 
include("config.php");
print "complete";
?> 
```

我卷曲的脚本：

```
$url="caller.php";
$ch = curl_init(); //initialize curl handle
curl_setopt($ch, CURLOPT_URL, $url); //set the url
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); //return as a variable
$response = curl_exec($ch); //run the whole process and return the response
curl_close($ch); //close the curl handle

echo "test". $response."|"; 
```

为什么这不起作用？我怎样才能让它工作？！文件方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:14:39.223

如果要捕获包含脚本的回显值，可以使用输出缓冲：

```
<?php
ob_start();    // start output buffering
include("caller.php");
$returned_value = ob_get_contents();    // get contents from the buffer
ob_end_clean();    // stop output buffering
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:16:53.087

据我所知，您需要一个有效的 http （或其他协议），其中包含脚本的完整 URL 才能使 curl 工作，例如**http://localhost/caller.php**

或者尝试`jeroen`的解决方案并获取脚本的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:20:11.307

在要调用的脚本中，确保“<?php”从第一行第一个字符开始。并且，删除“？>”。

```
<?php
//this is 'to-be-called.php'
include("config.php");
echo "complete"; 
```

现在这样称呼它：

```
<?php
//this is 'caller.php'
//should it come with full url?
$Url      = "http://localhost/path/to-be-called.php"; 
$Handle   = curl_init($Url);
$Response = curl_exec($Handle);
curl_close($Handle);

echo $Response; 
```

或者采取 Jeroen 的回答，这是在同一服务器上调用的最佳方式！如果你需要在 POST/GET 中传入参数，告诉 'caller.php' 将这些值保存在全局变量中，然后告诉 'to-be-call.php' 从这些全局变量中获取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:29:59.863

以填充变量而不是回显文本的方式重写`caller.php`，理想情况下将其放在返回该变量的函数中。其他一切都是肮脏的黑客，容易出错并且是性能问题的根源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T07:31:28.987

您可以使用`php`cgi 运行脚本并获取内容。采用`shell_exec`

# android - java.lang.RuntimeException：无法实例化活动 ComponentInfo .... java.lang.ClassNotFoundException

> ID：12782499
> 
> 赞同：3
> 
> 时间：2012-10-08T13:12:28.940
> 
> 标签：android, classnotfoundexception, achartengine

三天以来我一直在处理一个问题，我试图阅读不同的答案，但没有帮助。谁能帮帮我！！我将 Ancdroid 应用程序编写为一个安静的 Web 服务的客户端。我可以毫无问题地从数据库中获取数据，但我的问题在于我用来处理从数据库获取的文件的 2 个活动。

主要活动

```
public class MainActivity extends Activity  {

private static final String SERVICE_URL = "http://10.0.2.2:8080/.....";
private static final String TAG = "AndroidRESTClientActivity";   
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void retrieveSampleData(View vw) {
        EditText idTxt = (EditText) findViewById(R.id.id_textfield);
        String id = idTxt.getText().toString();
        String sampleURL = SERVICE_URL +"daten/"+id ;

        Log.d("getrespond()", "service calling");
String url =sampleURL;

                       RestClient client = new RestClient(url);

                       try{
                           client.Execute(RestClient.RequestMethod.GET,this.getApplicationContext());
                       }
                       catch (Exception e) {

                           String error = String.valueOf(e);
                                Log.d("**********client.Execute(RequestMethod.GET);***********",error);    

                       }

                       try {

                           if(client.getResponseCode() == 200) {

                               Log.d("Response is 200", String.valueOf(client.getResponse().length()));
                               System.out.println(this.getFilesDir().getPath().toString());
                               File daten= client.getResponse();
                                  System.out.println(daten.getName());                       

                               Toast.makeText(this.getApplicationContext(), "Responce is "+String.valueOf(client.getResponseCode()), 2000).show();                            

                       }  else {
                               String error = String.valueOf(client.getResponse());
                               Log.d("Response*********** not 200 ************", String.valueOf(client.getResponse()));

                           }

                       }catch (Exception e) {
                           e.printStackTrace();
                            Log.d("EXCEPTIONI IS 3", e.toString());
                           // TODO: handle exception
                       }
                       startActivity(new Intent("android.intent.action.LINEGRAPH")); 
```

我从主要开始的其他活动：

```
public class lineGraph extends Activity{

       @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);             
            setContentView(R.layout.activity_line_graph);
       }

       @Override
    protected void onResume() { 
           super.onResume(); 
           if (mChartView == null) { 
             LinearLayout layout = (LinearLayout) findViewById(R.id.chart); 
             try {
                mChartView = ChartFactory.getLineChartView(this, getDemoDataset(), 
                        getDemoRenderer());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
             layout.addView(mChartView, new LayoutParams 
         (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 

           } else { 
             mChartView.repaint(); 
           } 
         } 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.praktikum.androidcrestclient"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>
    <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.praktikum.androidcrestclient.LineGraph"
            android:label="@string/title_activity_line_graph" >
            <intent-filter>
                <action android:name="android.intent.action.LINEGRAPH" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name="org.achartengine.GraphicalActivity"/>
    </application>

</manifest> 
```

这里是我的 LogCat

```
10-08 09:23:10.140: D/AndroidRuntime(4706): Shutting down VM
10-08 09:23:10.140: W/dalvikvm(4706): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-08 09:23:10.161: E/AndroidRuntime(4706): FATAL EXCEPTION: main
10-08 09:23:10.161: E/AndroidRuntime(4706): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.praktikum.androidcrestclient/com.praktikum.androidcrestclient.LineGraph}: java.lang.ClassNotFoundException: com.praktikum.androidcrestclient.LineGraph in loader dalvik.system.PathClassLoader[/data/app/com.praktikum.androidcrestclient-1.apk]
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.os.Looper.loop(Looper.java:123)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at java.lang.reflect.Method.invokeNative(Native Method)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at java.lang.reflect.Method.invoke(Method.java:507)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at dalvik.system.NativeStart.main(Native Method)
10-08 09:23:10.161: E/AndroidRuntime(4706): Caused by: java.lang.ClassNotFoundException: com.praktikum.androidcrestclient.LineGraph in loader dalvik.system.PathClassLoader[/data/app/com.praktikum.androidcrestclient-1.apk]
10-08 09:23:10.161: E/AndroidRuntime(4706):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-08 09:23:10.161: E/AndroidRuntime(4706):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
10-08 09:23:10.161: E/AndroidRuntime(4706):     ... 11 more
10-08 09:23:10.180: W/ActivityManager(89):   Force finishing activity com.praktikum.androidcrestclient/.LineGraph
10-08 09:23:10.180: W/ActivityManager(89):   Force finishing activity com.praktikum.androidcrestclient/.MainActivity
10-08 09:23:10.690: W/ActivityManager(89): Activity pause timeout for HistoryRecord{4094eea0 com.praktikum.androidcrestclient/.LineGraph}
10-08 09:23:12.330: I/Process(4706): Sending signal. PID: 4706 SIG: 9
10-08 09:23:12.350: I/ActivityManager(89): Process com.praktikum.androidcrestclient (pid 4706) has died.
10-08 09:23:12.360: E/InputDispatcher(89): channel '4065ae98 com.praktikum.androidcrestclient/com.praktikum.androidcrestclient.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-08 09:23:12.360: E/InputDispatcher(89): channel '4065ae98 com.praktikum.androidcrestclient/com.praktikum.androidcrestclient.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
10-08 09:23:12.490: I/WindowManager(89): WIN DEATH: Window{4065ae98 com.praktikum.androidcrestclient/com.praktikum.androidcrestclient.MainActivity paused=true}
10-08 09:23:12.500: I/WindowManager(89): WIN DEATH: Window{406c1140 Toast paused=false}
10-08 09:23:12.600: W/InputManagerService(89): Got RemoteException sending setActive(false) notification to pid 4706 uid 10034
10-08 09:23:12.660: E/InputDispatcher(89): Received spurious receive callback for unknown input channel.  fd=168, events=0x8
10-08 09:23:16.820: D/dalvikvm(396): GC_EXPLICIT freed 7K, 54% free 2537K/5511K, external 1625K/2137K, paused 43ms
10-08 09:23:21.626: W/ActivityManager(89): Activity destroy timeout for HistoryRecord{4094e768 com.praktikum.androidcrestclient/.MainActivity}
10-08 09:23:21.626: W/ActivityManager(89): Activity destroy timeout for HistoryRecord{4094eea0 com.praktikum.androidcrestclient/.LineGraph}
10-08 09:23:21.900: D/dalvikvm(299): GC_EXPLICIT freed 12K, 55% free 2589K/5703K, external 1625K/2137K, paused 73ms
10-08 09:23:26.950: D/dalvikvm(407): GC_EXPLICIT freed 4K, 55% free 2532K/5511K, external 1625K/2137K, paused 57ms
10-08 09:24:54.097: D/SntpClient(89): request time failed: java.net.SocketException: Address family not supported by protocol
10-08 09:29:54.106: D/SntpClient(89): request time failed: java.net.SocketException: Address family not supported by protocol
10-08 09:34:54.130: D/SntpClient(89): request time failed: java.net.SocketException: Address family not supported by protocol 
```

你能帮我找出为什么它没有找到其他活动吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:15:21.497

在此声明中将您的类的名称更改为“LineGraph”而不是“lineGraph”：

```
public class LineGraph extends Activity{ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T13:18:07.377

更改清单文件中的活动声明。

```
<Activity name="com.praktikum.androidcrestclient.LineGraph">
                                                 ^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T17:14:39.557

停止即时运行解决了我的问题

# css - CSS 不关闭

> ID：12782501
> 
> 赞同：0
> 
> 时间：2012-10-08T13:12:33.530
> 
> 标签：css

我不知道为什么不，但是这个 CSS 没有关闭，基本上只是将它下面的所有内容都作为同一个 CSS 的一部分

```
#colTwoPromotion {
float:right; 
-mox-box-shadow:    -10px 10px 12px 2px #000;
-webkit-box-shadow: -10px 10px 28px 2px #000;
box-shadow:         -10px 10px 28px 6px #000;
width: 365px;
border: 9px solid white;
padding: 10px;
-webkit-transform: rotate(3deg);
-moz-transform:    rotate(3deg);
-ms-transform:     rotate(3deg);
-o-transform:      rotate(3deg);
transform:         rotate(3deg);
margin-bottom:40px;
min-height:400px;
/* fallback */
background-color: #E7E7E7;
background-repeat: repeat-x;
/* Safari 4-5, Chrome 1-9 */
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#E7E7E7), to(#FFF));
 /* Safari 5.1, Chrome 10+ */
background: -webkit-linear-gradient(top, #FFF, #E7E7E7);
/* Firefox 3.6+ */
background: -moz-linear-gradient(top, #FFF, #E7E7E7);
 /* IE 10 */
background: -ms-linear-gradient(top, #FFF, #E7E7E7;
/* Opera 11.10+ */
background: -o-linear-gradient(top, #FFF, #E7E7E7);
color:#000;
} 
```

这是它目前在 css line 470 上的站点

[测试站点](http://www.plusonetesting.co.uk/whiteHorse36116/whats-on.php) 提前致谢

G

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:14:30.880

您错过了 IE 10 背景行上的右括号。尝试这个：

```
#colTwoPromotion {
    float: right; 
       -mox-box-shadow: -10px 10px 12px 2px #000;
    -webkit-box-shadow: -10px 10px 28px 2px #000;
            box-shadow: -10px 10px 28px 6px #000;
    width: 365px;
    border: 9px solid white;
    padding: 10px;
    -webkit-transform: rotate(3deg);
       -moz-transform: rotate(3deg);
        -ms-transform: rotate(3deg);
         -o-transform: rotate(3deg);
            transform: rotate(3deg);
    margin-bottom: 40px;
    min-height: 400px;
    background-color: #E7E7E7;
    background-repeat: repeat-x;
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#E7E7E7), to(#FFF));
    background: -webkit-linear-gradient(top, #FFF, #E7E7E7);
    background: -moz-linear-gradient(top, #FFF, #E7E7E7);
    background: -ms-linear-gradient(top, #FFF, #E7E7E7);
    background: -o-linear-gradient(top, #FFF, #E7E7E7);
    color: #000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:15:02.657

请纠正 ：

```
 /* IE 10 */
background: -ms-linear-gradient(top, #FFF, #E7E7E7; 
```

至 ：

```
 /* IE 10 */
background: -ms-linear-gradient(top, #FFF, #E7E7E7); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:15:33.587

问题在这里：

```
 /* IE 10 */
background: -ms-linear-gradient(top, #FFF, #E7E7E7; 
```

您必须更改为：

```
 /* IE 10 */
background: -ms-linear-gradient(top, #FFF, #E7E7E7); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:20:45.537

问题是IE10你没有关闭pranthesis，当你关闭它时，代码语法是真的

```
background: -ms-linear-gradient(top, #FFF, #E7E7E7; 
```

# c# - 动态元素的功能

> ID：12782504
> 
> 赞同：0
> 
> 时间：2012-10-08T13:12:45.420
> 
> 标签：c#, wpf, function, dynamic

我在运行时创建了一组动态元素。如何事先为它们定义和声明函数？

即，我将在执行期间创建一组 25 个按钮，并为每个按钮分配各种属性值。

比如说，我如何为这些元素（即按钮）添加 onclick 事件？

在“编译”它们之前声明和定义它们会导致错误吗？不会吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:17:40.823

试试这个 ：

```
yourButton.Click += (o, args) =>
            {
                // Code goes here...
            }; 
```

或为点击事件创建一个方法：

```
yourButton.Click += yourButton_Click;

private void yourButton_Click(object sender, EventArgs eventArgs)
{
    // Code goes here...
} 
```

你可以为任何甚至不仅仅是`Click`一个。

# sql-server - 基于变量的 For 循环 - SSIS

> ID：12782507
> 
> 赞同：0
> 
> 时间：2012-10-08T13:13:01.567
> 
> 标签：sql-server, sql-server-2005, ssis

我有一个脚本任务，我在其中指定如下变量：

```
Public Sub Main()

    Dts.Variables("sTest").Value = 1

    Dts.TaskResult = Dts.Results.Success
End Sub 
```

变量的值是从前端代码中指定的。

接下来我有一个内部包含脚本任务的 for 循环容器。

我想将在外部脚本任务中动态输入的变量传递到循环中，从而执行脚本任务中定义的消息框。

消息框在指定时动态显示值

![在此处输入图像描述](../Images/d464f433faf238afa6ffcee3c2276969.png)

谢谢

# java - 同步eclipse开发环境和集成环境的最佳方式？

> ID：12782509
> 
> 赞同：2
> 
> 时间：2012-10-08T13:13:12.563
> 
> 标签：java, eclipse, maven, findbugs, checkstyle

从事一个大型项目，该项目催生了一个新的“侧面”项目。不是第一个的孩子，更像是一个相当大的插件。由于各种原因，我们决定在与我们主要产品的存储库分开的存储库中开发这个新项目。这两种产品都基于 Maven，并共享一个 Artifactory 存储库。

通过这种分离，我还决定实现一个新的集成环境，该环境每晚执行单元构建和集成测试，并使用 Sonar 应用 Checkstyle 和 Findbugs 分析。

我想确保开发人员和两个产品的集成环境保持同步（即开发人员使用与集成环境相同的 Checkstyle 和 Findbugs 规则）。我正在努力定义一个简单的机制来执行此操作，它不需要新开发人员进行大量手动环境设置。

我正在尝试创建一个与 IDE 无关的代码库（即我们不签入 .eclipse、.project 等）。我一直在研究几种方法，包括在 Maven 扩展工件中发布 Checkstyle 和 Findbugs 配置。理想情况下，这些配置将作为依赖项驻留在版本控制下，但不属于任何一个项目。对配置的更改将以某种方式尽可能透明地传播到开发人员环境和集成环境。

以前我们使用工作区机制来设置 Eclipse。我并不完全反对工作空间机制，但我想探索同样适合开发人员环境和无头集成环境的替代方案。

# php - Vagrant/Puppet --- 确保：从当前更改失败：无法在确保上设置“当前”：没有这样的文件或目录

> ID：12782512
> 
> 赞同：4
> 
> 时间：2012-10-08T13:13:18.470
> 
> 标签：php, apache, apc, puppet, vagrant

我正在使用 Vagrant 和 Puppet 在 Ubuntu 上安装 Apache 和 PHP。但是我在`vagrant up`. 我认为模板的路径是正确的，那么为什么会出错？

*我正在使用[此处](https://github.com/danackerson/awo-puppet)修改的设置以确保`apt-get update`在其他任何事情之前运行*

**错误**

`←[1;35merr: /Stage[main]/Php/File[/etc/php5/apache2/apc.ini]/ensure: change from absent to present failed: Could not set 'present on ensure: No such file or dir ectory - /etc/php5/apache2/apc.ini.puppettmp_6187 at /tmp/vagrant-puppet/modules -0/php/manifests/init.pp:44←[0m`

`←[1;35merr: /Stage[main]/Php/File[/etc/php5/apache2/php.ini]/ensure: change from absent to present failed: Could not set 'present on ensure: No such file or dir ectory - /etc/php5/apache2/php.ini.puppettmp_6687 at /tmp/vagrant-puppet/modules -0/php/manifests/init.pp:36←[0m`

**/modules/php/manifests/init.pp**

```
file { "/etc/php5/apache2/php.ini":
  ensure => present,
  mode => 644,
  content => template("php/etc/php5/conf.d/php.ini.erb"),
  require => Package["php5"],
  notify => Service["apache"];
}

file { "/etc/php5/apache2/apc.ini":
  ensure => present,
  mode => 644,
  content => template("php/etc/php5/conf.d/apc.ini.erb"),
  require => [ Package["php5"], Package["php-apc"], Package["apache"] ],
  notify => Service["apache"];
} 
```

**模板**

*   /modules/php/templates/etc/php5/conf.d/apc.ini.erb
*   /modules/php/templates/etc/php5/conf.d/php.ini.erb

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T18:32:56.363

只需确保目录 /etc/php5/apache2 存在。

```
file { [ "/etc", "/etc/php5", "/etc/php5/apache2" ]:
   ensure => directory,
   before => File['/etc/php5/apache2/php.ini'],
} 
```

或更少的木偶

```
exec { "ensure /etc/php5/apache2":
  command => "mkdir -p /etc/php5/apache2",
  creates => "/etc/php5/apache2"
} 
```

这一切可能是因为对执行顺序的假设。

更多信息@[木偶文档](https://docs.puppet.com/puppet/latest/types/file.html#file-attribute-ensure)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:36:52.790

您确定 Package["php5"] 它正在为您创建路径吗？

在我看来，它在抱怨，因为 /etc/php5/apache2 在尝试从模板创建文件时文件夹不存在。

如果你想丢弃你的 puppetmaster 端，你可以找到 puppetmaster 进程 id 并运行：

```
strace -v -f -ff -p $PID -o strace.log 
```

然后，再次运行代理并转到 puppetmaster 并运行：

```
grep "etc/php5/apache2" strace.log.* 
```

如果 puppetmaster 没问题，您将看到读取调用没有错误，否则您将看到 puppetmaster 在尝试打开文件时收到“没有这样的文件或目录”。无论如何，我认为模板调用不是问题，对我来说似乎没问题。

# google-apps-script - Google Apps EDU Fireside Chat Hangout：Apps 脚本简介 - 无法获得批准链接以在电子表格中保存批准

> ID：12782513
> 
> 赞同：0
> 
> 时间：2012-10-08T13:13:19.203
> 
> 标签：google-apps-script, google-sheets

我观看了一个 youtube 视频，标题为“Google Apps EDU Fireside Chat Hangout: An Introduction to Apps Script”，其中 Eric Koleda 展示了如何从 gmail 进行“批准”。

我已经复制了代码，除了 doGet 函数（见下文）外，一切正常。该功能假设在电子表格的审批列中写“是”，然后呈现一个写有“公告已获批准”的网页。

任何帮助表示赞赏。请参阅下面的代码。

```
function onFormSubmit(event) {
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = spreadsheet.getSheetByName('Announcements');
  var title = event.namedValues['Title'];
  var description = event.namedValues['Description'];
  var url = 'https://script.google.com/a/macros/domain.com/s/AKfycbxT0T7bdcZ0NGmRHoZuo5onrPol9bMNDK8W4fYWol5gS09xKXk/exec';
  url += '&spreadsheetId=' + spreadsheet.getId();
  url += '&row=' + sheet.getLastRow();
  var message = 'New announcement submitted.\n' +
      'Title: ' + title +
      '\nDescription: ' + description +
      '\nApprove: ' + url;
  MailApp.sendEmail('emailaddress@blahblah.com', 'New Announcement', message);
}

function doGet(event) {
  var spreadsheetId = event.parameter['spreadsheetId'];
  var spreadsheet = SpreadsheetApp.openById(spreadsheetId);
  var sheet = spreadsheet.getSheetByName('Announcements');
  var row = event.parameter['row'];
  sheet.getRange(row, 3).setValue('Yes');
  var app = UiApp.createApplication();
  var label = app.createLabel();
  label.setText('The announcement was approved');
  app.add(label);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:22:53.300

如果单击链接的用户不是脚本所在域的一部分，您将收到错误消息“抱歉，您请求的页面（或文档）不存在。请检查地址并重试。”继续运行，在本例中为“shawinc.com”。

# .net - .NET 内存泄漏 - System.WeakReference 对象累积

> ID：12782515
> 
> 赞同：2
> 
> 时间：2012-10-08T13:13:39.990
> 
> 标签：.net, vb.net, memory-leaks, windbg, sos

我有一个用 VB.NET 编写的服务，它会泄漏内存。即使它没有做太多，记忆也会增长。它开始在任务管理器中使用大约 29,000 K，几个小时后，根据它的繁忙程度，它会增长到 500,000K 或有时超过 1,000,000K。对于某些客户，这会导致他们的服务器出现内存问题。该服务具有自动重启功能，该功能将每天重启一次服务，但有时这还不够，我们需要每天多次使用 Windows 调度程序的网络停止/启动。

PerfMon 显示“第 2 代堆大小”在服务运行时继续增长，而其他堆数则不会。当然，“# Bytes in all heaps”也会增长，因为它包含了这个数字。

当我创建正在运行的服务的转储文件时，在windbg中打开它，加载SOS，然后在其上运行“！dumpheap -stat”，最大数量的对象是“System.WeakReference”类。在我现在查看的示例中，共有 4,636,227 个对象，其中有 4,542,785 个。

根据我的阅读，GC 使用这些对象来保存对它正在使用的对象的引用，这是怎么出现的？如果是这样，为什么在处理完它们后它也不会 GC 呢？有没有办法查看 WeakReference 对象持有的对象是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:20:52.243

将`WeakReference`持有对对象的弱引用，但对`WeakReference`-instance 的引用很难，因此：如果您持有大量死 ( `IsAlive`is `false`) 引用，它们仍将使用内存。

确保不要将您`WeakReference`的 s 存储在列表中或以其他方式永久存储它们。

**编辑**：如果您自己没有持有引用，这可能是由[VB.NET 中的](https://stackoverflow.com/a/7920482/167251)[问题`WithEvents`](https://stackoverflow.com/a/7920482/167251)引起的。简而言之，在发布模式下编译您的应用程序，该问题应[根据 Microsoft 进行修复。](http://support.microsoft.com/?kbid=919481)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:23:59.670

似乎代码中对 WeakReference 类的使用无效。要定位代码、构建实例，请使用一些分析工具，该工具可以从分配点跟踪整个对象的生命周期（例如 dotTrace Memory）。有人忘记从某个集合中清除 Dead 弱引用实例。查找并修复。

# php - 使用 PHP SSH2 打开流时使用 ~/.ssh/config

> ID：12782517
> 
> 赞同：2
> 
> 时间：2012-10-08T13:13:54.840
> 
> 标签：php, ssh, stream

在 PHP 中处理 SSH2 流时，是否可以使用用户的 SSH 客户端配置？在大多数系统上，它存储在 ~/.ssh/config 中。

就我而言，我在 SSH 配置中配置了多个别名。但是，当我尝试在我的 PHP 代码中使用这些别名时，它们不起作用。

示例 ~/.ssh/config

```
Host foo
    HostName my.server
    Port 22
    User sander
    IdentityFile ~/.ssh/id_rsa 
```

失败的示例 PHP 代码，但我想开始工作：

```
<?php
$text = file_get_contents('ssh2.sftp://foo/bar.txt'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:35:16.293

是的，这是完全可能的。该文件的文件格式[已指定](http://www.squarebox.co.uk/cgi-squarebox/manServer/ssh_config.5)。您需要做的就是为它编写一个解析器（也许这已经写过了，至少类似的东西），然后使用您的主机名（这里：）`foo`来访问该配置。

然后你连接这些设置。

如果你想有你的例子：

```
$text = file_get_contents('ssh2.sftp://foo/bar.txt'); 
```

这更复杂，我认为甚至不可能。但是，如果您更改前缀，您应该能够将您的实现作为[您注册的流包装器](http://www.php.net/manual/en/function.stream-wrapper-register.php)注入，它“包装”在 ssh2 包装器周围，因此它的使用同样简单：

```
$text = file_get_contents('my.ssh2.sftp://foo/bar.txt'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T11:42:11.230

```
$userName =username;

$password = password;

$domain = domain;

$connection = ssh2_connect($domain, 22);

ssh2_auth_password($connection, $userName, $password);
$sftp =ssh2_sftp($connection); 
$content = file_get_contents("ssh2.sftp://{$sftp}{$sourceFile}");
$data = $content ."new content";

$content = file_put_contents("ssh2.sftp://{$sftp}{$sourceFile}",$data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:41:03.670

[如果您在http://pecl.php.net/package/ssh2](http://pecl.php.net/package/ssh2)查看 ssh2 包装器的源代码，它们似乎根本不支持别名。

发布到他们的邮件列表中，可能很容易添加别名支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-15T11:07:23.863

对于 < 7 的 php 版本，使用 intval()

```
$sftpConnection = ssh2_connect($host);
$sftp = ssh2_sftp($sftpConnection);
$fp = fopen("ssh2.sftp://" . intval($sftp) . $remoteFile, "r"); 
```

[https://bugs.php.net/bug.php?id=73597](https://bugs.php.net/bug.php?id=73597)

# xampp - Magento 速度优化

> ID：12782520
> 
> 赞同：1
> 
> 时间：2012-10-08T13:14:02.573
> 
> 标签：xampp, magento-1.7

我只是这里的初学者。我正在使用 xampp1.7.1 php 版本 5.2.9 和 Magento 1.7。在我的本地服务器中，我想提高 magento 的速度，为此我尝试了很多在谷歌中找到的技巧。但性能仍然没有提高。特别是节省时间（无论我在后端保存什么）都需要大量时间（5 分钟或更多......）。这是我所做的清单：

1.  在 php.ini 文件中：

更改值

```
memory_limit = 8M --> memory_limit = 128M
query_cache_size=16M --> query_cache_size=64M 
```

1.  在 my.ini 文件中：

设置key_buffer的值 = 512M max_allowed_pa​​cket = 64M table_cache = 512 sort_buffer_size = 4M read_buffer_size = 4M read_rnd_buffer_size = 2M myisam_sort_buffer_size = 64M tmp_table_size = 128M query_cache_size = 96M

1.  在 magento .htaccess 文件中取消注释重要的行

由此 ：

```
<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

# Insert filter on all content
###SetOutputFilter DEFLATE
# Insert filter on selected content types only
#AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

# Netscape 4.x has some problems...
#BrowserMatch ^Mozilla/4 gzip-only-text/html

# Netscape 4.06-4.08 have some more problems
#BrowserMatch ^Mozilla/4\.0[678] no-gzip

# MSIE masquerades as Netscape, but it is fine
#BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

# Don't compress images
#SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

# Make sure proxies don't deliver the wrong content
#Header append Vary User-Agent env=!dont-vary

</IfModule> 
```

对此：

```
<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

# Insert filter on all content
SetOutputFilter DEFLATE
# Insert filter on selected content types only
#AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

# Netscape 4.x has some problems...
BrowserMatch ^Mozilla/4 gzip-only-text/html

# Netscape 4.06-4.08 have some more problems
BrowserMatch ^Mozilla/4\.0[678] no-gzip

# MSIE masquerades as Netscape, but it is fine
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

# Don't compress images
SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

# Make sure proxies don't deliver the wrong content
Header append Vary User-Agent env=!dont-vary

</IfModule> 
```

1.  从“#php_flag zlib.output_compression on”取消选中“php_flag zlib.output_compression on”</p>

2.  从 magento 后端启用“缓存管理”

3.  安装“Fooman_Speedster”扩展

但是它的速度仍然没有增加。如果您有任何建议或提示，请与我分享。对不起我的英语不好。非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:24:08.117

在 windows 上开发 localy 时，有两个常见的延迟原因，一个是 localhost 的解析，另一个是由于复杂的 OS ACL 导致的 windows 文件操作慢。

为了改善这种情况，您必须将 magento 安装中的每个 localhost 条目替换为 127.0.0.1。有些人在他们的 Windows 主机文件中创建一个条目，允许将 localhost 重定向到 127.0.0.1 ，这将提高文件服务时间，但是像 PDO connect 这样的 php 命令仍然会产生一秒钟的延迟，直到 127.0.0.1 在设置中替换了 localhost 。

为了避免 Windows 慢速文件操作，您需要一个操作码缓存 php 加速器，如 APC 或 WinCache。在 windows 中开发时，您可以激活 IIS 并使用 Microsoft Web Platform Installer 来安装/配置 PHP、MYSQL 和 WinCache，只需单击几下。使用 xampp 时，您可以使用[http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)或[http://dev.freshsite.pl/php-accelerators/apc.html](http://dev.freshsite.pl/php-accelerators/apc.html)二进制文件安装 APC，或者使用 Visual Studio 构建 APC，然后使用说明进行配置来自互联网。根据我的经验，上一个 WinCache 版本非常快，它是 Windows 真正安全的选择。由于 IIS 的糟糕过去，我所知道的开发人员很少使用 IIS 而不是 apache，但此时它更容易设置，可以处理更多请求，并且与 windows 中的 apache 相比，它在大多数部分都更快。

通过这 2 个更改，您将看到 1000%-20000% 的改进，而将 MySQL 配置为生产环境根本不会使开发环境受益。在 htaccess 中调整缓存和 gzip 也不会使本地环境受益，首先因为您直接从硬盘读取文件（使用内存中的缓存优化器），其次因为它是一个动态站点，您将在开发过程中不断更改，所以您不能设置过期时间并禁用 etag。

为了进一步提高速度，您将不得不调整您的模板。简而言之，所有人都建议将所有可以组合的 png 组合起来，将无法组合的那些转换为 base64 并使用 Lab.js 之类的工具来控制加载，这样您就可以确保加载页面的时间少于 1.5 秒。迁移到生产环境时，使用 CDN 提供媒体服务。如果一切顺利，一切都会变得如此之快，您将不再关心硬件基准、数据库优化和托管比较，直到您每天有数千次访问并提供大量内容。（静态缓存不是动态页面/页面的一部分，并为您的脚本使用 magento 缓存系统以获得最终速度）。

PS 使用 windows 客户端版本在 www 中广播站点是合法的，只要您在阅读许可证时不根据我的理解更改操作系统中的 20 个并发连接限制。

# algorithm - 确定树是否为单值树的时间复杂度？

> ID：12782521
> 
> 赞同：1
> 
> 时间：2012-10-08T13:14:03.103
> 
> 标签：algorithm, data-structures, binary-tree, complexity-theory, time-complexity

最近，我在二叉树上遇到了这个问题：

> 1.  给定一些任意的非平衡树，用什么大 O 来确定它是否是单值（所有元素都是相同的值）。
>     
>     
> 2.  在上述情况下，平衡树还是线性树，哪个会导致最糟糕的大 O 复杂度？

这是我对这个问题的回答：

1.  要确定一棵树是否是单值的，我们必须检查每个节点。因此，复杂度为 O(n)。

2.  无论是线性树还是平衡树，如果它们具有相同数量的节点，就会有相同数量的比较。因此，复杂性将是相同的。

这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T16:03:08.193

如果给定一棵任意二叉树，在最坏的情况下，您必须检查所有节点以确定它们是否具有相同的值。您可以在这里使用一个简单的对抗性参数 - 如果您的算法不查看所有值，因为树中任何不同的值之间没有关系，对手可以为您提供 n - 1 个值都相同的树。如果您没有查看最后一个值，则对手可能会通过将该值设置为与您的算法所说的相反来迫使您的算法出错。

另一方面，如果您谈论的是二叉***搜索***树，那么您可以在 O(h) 时间内解决这个问题，其中 h 是树的高度。具体来说，只需查看第一个和最后一个值，看看它们是否相同。如果是这样，则树中的所有中间值必须相同。如果不是，那么您已经见证了两个不同的价值观。这将在完美平衡的树上运行时间 O(log n)，在退化链表上运行时间为 O(n)。我怀疑这可能是最初的问题要问的问题，因为它比一般的二叉树案例更有趣（至少在我看来）。

希望这可以帮助！

# c# - 保存图像时出错

> ID：12782522
> 
> 赞同：-1
> 
> 时间：2012-10-08T13:14:05.277
> 
> 标签：c#

我想在图像进行一些更改后保存图像。但我在调用 .Save() 函数时遇到错误。

```
 var tempapth = Server.MapPath("..//Images//Temp//" + btnfile.FileName);
            btnfile.SaveAs(tempapth);
            using (var fileStream = File.OpenRead(tempapth))
            {
                var ms = new MemoryStream();
                fileStream.CopyTo(ms);
                ms.Seek(0, SeekOrigin.Begin);
                System.Drawing.Image img1 = System.Drawing.Image.FromStream(ms);
                fileStream.Close();
                var bmp1 = img1.GetThumbnailImage(100, 150, null, IntPtr.Zero);
                bmp1.Save(path);
            } 
```

bmp1.save（路径）；

报错

GDI+ 中出现一般错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:15:43.710

**编辑**
在我写完这个回复后，OP改变了这个问题。以前，还`path`声明了一个变量，其中包含一个路径名（但没有文件名）。

在您的代码的第一个版本中，您的路径名没有文件名 ( `Server.MapPath("..//Images//Category//" + catid + "//");`)。要保存，您还需要添加文件名，例如：

```
string path = Server.MapPath("..//Images//Category//" + catid + "//Image.bmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:21:08.297

该`path`变量包含文件夹的名称，而不是文件的名称。

使用类似的东西：

```
bmp1.Save(Path.Combine(path, btnfile.FileName)); 
```

旁注，字符`/`在字符串中没有特殊含义，不应转义。采用：

```
var path = Server.MapPath("../Images/Category/" + catid + "/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:22:43.873

怎么样：

```
var srcPath = Server.MapPath("..//Images//Temp//" + btnfile.FileName);
if (!File.Exists(srcPath)
{
    throw new Exception(string.Format("Could not find source file at {0}", srcPath));
}

var srcImage = Image.FromFile(srcPath);
var thumb = srcImage.GetThumbnailImage(100, 150, null, IntPtr.Zero);

var destPath = Server.MapPath("..//Images//Category//" + catid + "//");
if (!Directory.Exists(destPath))
{
    Directory.CreateDirectory(destPath);
}

thumb.Save(Path.Combine(destPath, btnfile.FileName)); 
```

# php - Yii CGridView：如何添加静态 WHERE 条件？

> ID：12782523
> 
> 赞同：2
> 
> 时间：2012-10-08T13:14:16.627
> 
> 标签：php, yii, conditional-statements, where

我有一个标准的 Gii 创建的管理视图，它使用 CGridView，它显示了我的用户表数据。

问题是名称为“root”的用户不得可见。

有没有办法添加一个静态 where 条件 " ... and username !='root' " ？

admin.php [查看]

```
'columns'=>array(
    'id',
    'username',
    'password',
    'realname',
    'email',
            ..... 
```

user.php [模型]

```
 public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

    $criteria->compare('id',$this->id);
    $criteria->compare('username',$this->username,true);
    $criteria->compare('password',$this->password,true);
    $criteria->compare('realname',$this->realname,true);
    $criteria->compare('email',$this->email,true);

    ......

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:13:10.523

您可以像这样使用[CDbCriteria 的 addCondition](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addCondition-detail)：

```
 $criteria->addCondition("username !='root'"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T20:32:46.220

您最好的选择是使用[Yii 范围](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)，它本质上是一个保存的 where 子句（或对现有标准的其他修改），您可以在整个应用程序中应用它，并且如果您的标准稍后发生变化，则只需在一个地方进行更改。

使它们更酷的是，您可以将它们与其他范围/标准更改（例如来自网格中的用户）串在一起，而无需跟踪哪些标准子句被什么更改。

一些可能适用于您的情况的示例。在你的控制器中，你可能有这样的东西：

```
$users = User::model()->search()->findAll(); 
```

Asgaroth 的回答回答了您表面上的问题。但是你可以使用作用域做更多的事情（并且很容易做到）。

如果您将以下内容添加到您的用户模型中：

```
class User extends CActiveRecord
{
    ......
    public function scopes()
    {
        return array(
            'active'=>array(
                'condition'=>'active=1',
            ),
            'isAdmin'=>array(
                'condition'=>'isAdmin=1',
            ),
        );
    }
} 
```

然后您可以在控制器中像这样检索活动用户（仍然应用用户的过滤器）：

```
$users = User::model()->active()->search()->findAll(); 
```

或者您可以检索所有活动的管理员用户（不被您的 gridview 标准过滤），如下所示：

```
$users = User::model()->active()->isAdmin()->findAll(); 
```

默认范围只是同一想法的扩展：

```
class User extends CActiveRecord
{
    public function defaultScope()
    {
        return array(
            'condition'=>"username != 'root'",
        );
    }
} 
```

如果在您的 isAdmin 范围返回 root 用户之前，应用默认范围将从返回的模型中消除 root 用户，因为它适用于您所做的每个 User::model() 查询。

# android - Android Open GL ES 非 POT 纹理

> ID：12782525
> 
> 赞同：0
> 
> 时间：2012-10-08T13:14:19.237
> 
> 标签：android, opengl-es, textures

我对 OpenGL ES 很陌生。据我了解，openGL ES 仅允许使用两种尺寸的纹理图像（例如 512*512 或 256*256 等）。我正在寻找一种将不同大小的图像显示为纹理的方法，但它们不是 2 大小的幂，并且它们的大小会有所不同。

图片将从互联网下载。在下载之前调整它们的大小是不可能的。

有没有办法将非 POT 大小的图像用于纹理？我是否必须创建一种方法来调整它们的大小？那里有图书馆可以做到这一点吗？

纹理将使用库 min3d 应用于矩形： [http](http://code.google.com/p/min3d/) ://code.google.com/p/min3d/ thks！

编辑：

从资源加载纹理的示例：

```
InputStream is =getResources().openRawResource(R.drawble.drawable1);

Bitmap bitmap;

bitmap = BitmapFactory.decodeStream(is); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:32:45.860

当您加载图像时，您可以为其创建一个 POT 大小的更大的 Bitmap 容器。然后将非 POT 图像复制到其中。当您将新的位图加载为纹理时，您可以将其裁剪为您想要的大小（glTexParameteriv() 的第三个参数）。

创建容器位图：

```
// work out the pot size you need from the source Bitmap's size
// ...

Bitmap bigger = Bitmap.createBitmap(potWidth, potHeight, Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bigger);
canvas.drawBitmap(nonPOTBmp, 0, 0, null);

// free up memory
nonPOTBmp.recycle(); 
```

# java - 用 pi 舍入误差

> ID：12782526
> 
> 赞同：2
> 
> 时间：2012-10-08T13:14:20.363
> 
> 标签：java, android, math, double, pi

我正在尝试制作一系列代码，根据用户输入的高度和半径计算圆锥的体积（见下文）。

我的问题是答案是错误的（但不是很长的路要走）。使用高度 = 5，半径 = 10 的示例，我从 500 的代码中得到答案（将 pi 视为 3），但手动计算我得到 ~523。

我假设它与我在下面声明 pi 的变量类型有关（双倍然后转换为长），但我一直在努力使变量类型的任何其他组合起作用。

下面的正确版本是什么，可以正确存储 pi（至少 5 或 6 个 dec 位置）？

```
 double piDouble = Math.PI;

                long height = Long.parseLong(heightString);
                long pi = (new Double(piDouble)).longValue();
                long radius = Long.parseLong(radiusString);

                long volumeBase = (pi*(radius*radius)*height) / 3; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T13:15:30.473

`long pi = (new Double(piDouble)).longValue();`是一个长的，所以它等于`3`，正好。

如果您需要更高的精度，请一直使用双精度，并仅在末尾舍入。这应该会给您预期的结果：

```
double piDouble = Math.PI;
long height = Long.parseLong(heightString);
long radius = Long.parseLong(radiusString);
double volumeBase = (piDouble * (radius * radius) * height) / 3; 
```

如果需要，您可以对结果进行四舍五入：

```
long roundedDownVolume = (long) volumeBase; //round down
long roundedVolume = Math.round(volumeBase); //or round to the closest long 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:17:29.717

对于这种算术，您应该使用 BigDecimal。

# objective-c - 在Objective-C中使用C函数多次导入头文件

> ID：12782542
> 
> 赞同：0
> 
> 时间：2012-10-08T13:14:52.500
> 
> 标签：objective-c, c, header-files

在我的 Xcode 项目中，我使用以下 C 实用程序函数制作了一个独立的头文件：

```
#ifndef FOO
#define FOO
CGFloat DistanceBetweenTwoPoints(CGPoint p1, CGPoint p2)
{
    CGFloat dx = p2.x - p1.x;
    CGFloat dy = p2.y - p1.y;
    return sqrt(dx*dx + dy*dy);
};
#endif 
```

即使使用预处理器指令，如果我尝试在多个位置`import`或`include`该头文件，我也会收到以下错误，抱怨重复符号：

```
linker command failed with exit code 1 
```

有没有不同的方法可以达到这种效果？这个问题是出于好奇。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:34:36.473

由于函数的定义在标头中，因此您可以在包含该函数的每个文件（实际上是每个翻译单元）中获得该函数的一个定义。

将函数体移动到“.c”文件中，在标题中留下声明，或者声明它`inline`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:35:39.200

将您的函数体放在一个`.c`文件中，并将函数声明（又名原型）放在`.h`这些文件中`#ifndef`，等等。然后用于`include`在您需要该函数的地方导入头文件。

记得检查文件的目标成员`.c`，否则不会编译。

对于像这样的小函数，您可以声明它`inline`并使用头文件：

```
inline CGFloat DistanceBetweenTwoPoints(CGPoint p1, CGPoint p2)
{
    // code as is
} 
```

编译器将用函数代码**替换**您的函数调用，而无需实际构建和链接新的目标文件。不再有重复的符号。

# javascript - 在dom中查找包含带有xpath的单词的文本节点

> ID：12782543
> 
> 赞同：6
> 
> 时间：2012-10-08T13:14:56.787
> 
> 标签：javascript, dom, xpath

我需要从 html 文件中的节点中提取文本，并且我正在尝试使用 XPath 和 Javascript。

要求的条件是文本必须包含特定的单词。

让我们以下一个 html 文件为例：

```
<html>
    <body>
        <p>
            Hi, try to extract the word username here and here <b>username</b>
        </p>
    </body>
</html> 
```

并尝试使用以下表达式从包含单词“用户名”的文本节点中获取文本：

```
var search = document.evaluate('//*[contains(child::text(), \"username\")]/child::text()', document, null, XPathResult.ANY_TYPE, null); 
```

通过搜索迭代我找到了想要的结果，但也找到了不需要的对象：

```
["Hi, try to extract the word username here and here", Text, "username"] 
```

其中 Text 是一个对象，其 textContent 只是回车符（我使用的是 Google Chrome 控制台）。这个物体是从哪里来的？

请问谁能给出一个更精确的 XPath 表达式来排除这些对象，或者我应该在我的代码中排除它们吗？

理想的搜索应该是：

```
["Hi, try to extract the word username here and here", "username"] 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T14:06:23.233

看起来你想要

```
var search = document.evaluate('//text()[contains(., \"username\")]',
   document, null, XPathResult.ANY_TYPE, null); 
```

（我不确定你为什么要在单引号中转义双引号，但这是一个单独的问题。）

您现有的代码，

```
var search = document.evaluate('//*[contains(child::text(), \"username\")]/
         child::text()', document, null, XPathResult.ANY_TYPE, null); 
```

说，

*   (1) 查找所有具有包含“用户名”的文本节点子节点的元素。
*   (2) 现在返回这些元素的**所有**文本节点子节点（不管它们包含什么）。

表达式的 (1) 部分将返回元素节点`<p>`和`<b>`。

对于第 (2) 步，`<b>`只有一个文本节点子节点，但`<p>`有两个子节点：一个在前面`<b>`（包含“用户名”），另一个在后面`<b>`（只包含空格）。

解决方案：忘记元素——它们是无关紧要的干扰。只需直接选择所需的文本节点。

# android - 从服务启动新任务时清除任务

> ID：12782547
> 
> 赞同：0
> 
> 时间：2012-10-08T13:15:08.483
> 
> 标签：android, broadcastreceiver, android-activity

我有一个严重的问题，我必须通过服务启动/控制活动，对于活动，我使用本地广播消息来更新 UI。当我发送广播消息时，它会被很多接收者接收，但我只想让最顶层的活动接收它。

我试图取消注册以前活动的接收器，但它根本不起作用。（有一个屏幕管理器可以跟踪当前/最顶层的活动以及之前的活动。）

那么，有没有什么好的解决方案来关闭任务的任务实例，只在前台运行一个实例？或者一些注销接收器的工作方法？（我尝试了很多东西，但不适用于 Android 2.2）。

# jquery - 验证检查数据库

> ID：12782550
> 
> 赞同：0
> 
> 时间：2012-10-08T13:15:19.547
> 
> 标签：jquery, asp.net, database, validation, server-side

我正在使用 jquery 对表单进行客户端验证。我就是这样做的：

```
 $("#registerForm").validate({

            rules: {

                BCNumber : { required: true, minlength: 5, maxlength: 10 },
                Username : { required: true, minlength: 5, maxlength: 10 },
                Password : { required: true, minlength: 5, maxlength: 10 },
                SecurityQuestion : { required: true, minlength: 5, maxlength: 10 },
                SecurityAnswer : { required: true, minlength: 5, maxlength: 10 },

            } 
```

但是对于其中一个我需要检查数据库，如果它存在提交表单，我想一旦单击提交按钮，我可以检查并将我的真值或假值传递给 jquery。

这可能与jquery有关吗，如果可以，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:25:44.113

您可以使用 AJAX

```
$("#registerForm").submit(function(){
 var  id=//find the value to be checked
   $.get("url?id="+id,function(data){
       if(data=="valid"){
          //submit the form
          }else
             {
            return false;
             }
      })
}) 
```

首先找到要与数据库检查的值并使用 AJAX 发送它。`xmlhttpRequest`如果它是有效的而不是`echo valid`返回`false`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:42:23.280

请试试这个。

[http://jsfiddle.net/Y4fLM/9/](http://jsfiddle.net/Y4fLM/9/)

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:09:39.867

jQuery validate 支持一种名为[remote](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)的规则类型，它可以满足您的需求。它看起来像这样：

```
$("#registerForm").validate({
        rules: {
            Username : { 
              required: true, 
              minlength: 5, 
              maxlength: 10,
              remote: 'check_username.php'
            }
        }
}); 
```

然后创建`check_username.php`脚本并让它在用户名有效时返回 JSON`true`值，如果用户名无效则返回`false`值或错误消息。

# jquery-ui - 多次使用 jquery UI 选项卡

> ID：12782555
> 
> 赞同：0
> 
> 时间：2012-10-08T13:15:30.490
> 
> 标签：jquery-ui, tabs

我想在多个页面中使用 jquery UI 选项卡。但是选项卡的数量不同，我被困在如何调整每个页面上的选项卡宽度上。在一页上我有这个：

```
 <div id="tabs">
                <ul>
                    <li><a href="#tabs-1">5 Star Hotel in Delhi</a></li>
                    <li><a href="#tabs-2">Budget Hotels in Delhi</a></li>
                    <li><a href="#tabs-3">50th IIGF Officials Hotels</a></li>
                </ul> 
```

没关系，工作正常。现在在第二页我又看到了这个：

```
<div id="tabs1">
                <ul>
                    <li><a href="#tabs-1">About Delhi</a></li>
                    <li><a href="#tabs-2">Reaching Delhi</a></li>
                    <li><a href="#tabs-3">Delhi Attractions</a></li>
                    <li><a href="#tabs-3">Other Places of interest in Delhi</a></li>
                    <li><a href="#tabs-3">Nearby City Tours from Delhi</a></li>
                </ul> 
```

现在我必须调整选项卡 li 宽度以及它的锚字体大小以将它们放在单行上。希望现在很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:25:42.683

我不明白你的问题。

如果您使用 jQuery UI 选项卡，您可以像这样调用“插件”：

```
$( "#tabs" ).tabs();
}); 
```

您的 DOM 元素应如下所示：

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
</ul>
<div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
</div>
<div id="tabs-2">
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
</div>
<div id="tabs-3">
    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
</div> 
```

如果添加一个新选项卡，jQuery 会自动围绕它构建包装器。每个元素的宽度是可变的或由 CSS 制成。

# windows - PowerPoint 图标

> ID：12782557
> 
> 赞同：0
> 
> 时间：2012-10-08T13:15:42.360
> 
> 标签：windows, winapi, ms-office, powerpoint, exe

我正在为我的学生开设 PowerPoint 课程。我想在 Flex 中复制 PowerPoint 功能区行为。我花了很多时间试图找到如下图所示的功能区图标：

![在此处输入图像描述](../Images/9b6b8c2f0c6a16c6beacf5d62c740b21.png)

有谁知道微软在哪里保存它的图标。如何提取这些图标？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:52:10.273

试试这个：它至少包含大量的 Office 图标。 [http://www.microsoft.com/en-us/download/details.aspx?id=11675](http://www.microsoft.com/en-us/download/details.aspx?id=11675)

# android - 将我的位图保存到文件后，大小为 0 KB

> ID：12782562
> 
> 赞同：0
> 
> 时间：2012-10-08T13:15:54.737
> 
> 标签：android, bitmap

我有一个 android 应用程序，其中有一个位图，我想将它保存到应用程序数据文件夹中。该文件在执行后在那里，但它的 0kb 并且里面没有图片。

错误在哪里？

这是我的代码：

```
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
myBitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes);

File f = new File(projDir + File.separator + newPath);
try {
    f.createNewFile();
    FileOutputStream fo = new FileOutputStream(f);
    fo.write(bytes.toByteArray());
    fo.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:25:08.773

添加`fo.flush()`

```
try {
   f.createNewFile();
   FileOutputStream fo = new FileOutputStream(f);
   fo.write(bytes.toByteArray());
   fo.flush()
   fo.close();
} catch (IOException e) {
   e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:17:39.667

尝试添加`fo.flush()`

```
try {
   f.createNewFile();
   FileOutputStream fo = new FileOutputStream(f);
   fo.write(bytes.toByteArray());
   fo.flush()
   fo.close();
} catch (IOException e) {
   e.printStackTrace();
} 
```

**编辑**

试试这个：

```
File f = new File(projDir + File.separator + newPath);
FileOutputStream out = new FileOutputStream(f);
myBitmap.compress(Bitmap.CompressFormat.JPEG, 40, out);
out.flush();
out.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:18:01.353

用 FileOutputStream 试试：

```
try {
  FileOutputStream fos= new FileOutputStream(projDir + File.separator + newPath);
  myBitmap.compress(Bitmap.CompressFormat.JPEG, 40, fos);
} catch (Exception e) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:30:12.937

不需要调用`createNewFile()`，不存在会自动创建。我想因为你永远不会删除它已经存在并且它不是因此而创建的。

同样作为一个好习惯，您应该将清理相关代码放在`finally`块内。这样，如果某处发生错误，文件最终将被关闭。

```
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
boolean success = myBitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
if(!success) {
     Log.w("myApp", "cannot compress image");
}
String patg = projDir + File.separator + newPath
File f = new File(projDir + File.separator + newPath);
Log.w("myApp", "cannot compress image");
try {
    FileOutputStream fo = new FileOutputStream(f);
    fo.write(bytes.toByteArray());
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        if(fo != null) {
            fo.flush();
            fo.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# delphi - Delphi 使用哪些窗口消息来通知组合框中的更改？

> ID：12782567
> 
> 赞同：3
> 
> 时间：2012-10-08T13:16:18.003
> 
> 标签：delphi, winapi, delphi-2009

我有一个 Delphi 应用程序 A，我需要从 .NET 应用程序 B 控制它。

除其他外，我需要自动化这个过程：

1.  用户从组合框中选择项目 X。
2.  应用程序 A 注意到更改并通过显示某个面板做出反应。

如果我手动操作，这可以正常工作。

但是当应用程序 B 选择一个组合框值时，不会显示任何面板。

这就是问题。

它的潜在原因：

1.  当我选择一个组合框项目时，会触发某个 Windows 消息。一些 Delphi 例程对此消息作出反应。
2.  当我以编程方式选择组合框项时，我发送的唯一消息是`CB_SETCURSEL`Delphi 应用程序似乎忽略了它。

因此，我假设我可以解决问题，如果我

1.  了解使用哪些 Windows 消息作为组合框值更改通知的基础（例如`OnChange`）和
2.  从 C# 应用程序发送该 windows 消息。

因此我的问题是：什么是 Windows 消息，在其发生时`OnChange`（以及通知 Delphi 应用程序更改组合框选择的其他事件）被触发？

**更新 1：**开始实施 David Heffernan 提出的解决方案

```
private const int CB_SETCURSEL = 0x14E;
private const int WM_COMMAND = 0x0111;
private const int CBN_SELCHANGE = 0x001;
private const int CN_COMMAND = 0xBD11;

private int MakeWParam(int l, int h)
{
    return (l & 0xFFFF) | (h << 16);
}

...
IntPtr comboBoxHandle = new IntPtr(comboBox.Current.NativeWindowHandle);
SendMessage(comboBoxHandle, CB_SETCURSEL, (Int32)myIndexInComboBox, 0);
SendMessage(comboBoxHandle, CN_COMMAND, MakeWParam(0, CBN_SELCHANGE), 0); 
```

目前，它不起作用。

**更新 2：**

我注意到一件非常奇怪的事情。

1.  如果我只调用`CB_SETCURSEL`，则在组合框中选择所需的项目。
2.  如果我调用`CB_SETCURSEL`and then (after 5 seconds) `CN_COMMAND`，则组合框中没有选择任何内容。

这意味着 -`CB_SECURSEL`选择项目并`CN_COMMAND`撤消它。

**更新 3**：根据 Spy++ 的组合框样式：

1.  WS_CHILDWINDOW
2.  WS_VISIBLE
3.  WS_CLIPSIBLINGS
4.  00000243

扩展样式：

1.  WS_EX_LEFT
2.  WS_EX_LTRREADING
3.  WS_EX_RIGHTSCROLLBAR

课堂风格：

1.  CS_VREDRAW
2.  CS_HREDRAW
3.  CS_DBLCLKS

**更新 4**：当我手动选择组合框项目时，我在 Spy++ 输出中看到以下消息：

```
<00177> 0195085E S message:0xBD33 [Custom:WM_APP+15667] wParam:6801164A lParam:0195085E
<00178> 0195085E R message:0xBD33 [Custom:WM_APP+15667] lResult:4610165A 
```

不幸的是，我找不到此消息的文档。

**更新 5**：我注意到对组合框选择更改的反应确实发生了，但只有在相对较长的时间（30 秒到 1 分钟）之后才会发生。当我手动做同样的事情时，反应会立即发生。

此行为的潜在原因：.NET 应用程序的线程使 Delphi 应用程序的线程等待它。请注意，.NET 应用程序中的 UI 交互代码在单独的线程（不是 UI 线程）中执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:32:14.170

`CB_SETCURSEL`您应该通过向组合框`WM_COMMAND`发送`NotifyCode`等于的消息来跟踪消息`CBN_SELCHANGE`。它`CBN_SELCHANGE`是触发`OnChange`事件的那个。

在 Delphi 中，代码如下所示：

```
SendMessage(ComboHandle, CB_SETCURSEL, NewSelectionIndex, 0);
SendMessage(ComboHandle, WM_COMMAND, MakeWParam(0, CBN_SELCHANGE), ComboHandle); 
```

或者您可以改用该`CN_COMMAND`消息，这可能会更直接一些：

```
SendMessage(ComboHandle, CB_SETCURSEL, NewSelectionIndex, 0);
SendMessage(ComboHandle, CN_COMMAND, MakeWParam(0, CBN_SELCHANGE), 0); 
```

你会想把它翻译成你使用的任何一种.net语言，但我相信这对你来说很容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T19:05:40.360

当用户手动选择 ComboBox 项时，控件会收到`CBN_SELCHANGE`通知，然后触发`TComboBox.OnChange`事件。当您以可编程方式选择 ComboBox 项时，不会`CBN_SELCHANGE`发送任何通知。这是记录在案的行为：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb775821.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775821.aspx)

> 当使用 CB_SETCURSEL 消息设置当前选择时，不会发送 CBN_SELCHANGE 通知代码。

# objective-c - 找不到用于迁移的映射模型 - UIManagedDocument 核心数据迁移

> ID：12782570
> 
> 赞同：12
> 
> 时间：2012-10-08T13:16:29.817
> 
> 标签：objective-c, ios, cocoa-touch, core-data, xcode4.5

我有两个版本的模型`Model001.xcdatamodel`和`Model002.xcdatamodel`. 这两个在`Model.xcdatamodeld`捆绑包中。我也有一个`Model001to002.xcmappingmodel`不属于`Model.xcdatamodeld`. 我检查了： xcmapingmodel 和 xcdatamodeld 都被复制到 .app 包中。

我的托管对象上下文是这样初始化的：

> ```
>  NSURL *documentModel = [bundle URLForResource:@"Model" 
>                                      withExtension:@"momd"]; managedObjectModel = [[NSManagedObjectModel alloc]
>     initWithContentsOfURL:documentModel]; return managedObjectModel; 
> ```

我还在`initWithFileURL:` 我的`UIManagedObject`子类中设置了这些属性。

> ```
>  NSMutableDictionary *options = [NSMutableDictionary dictionaryWithDictionary:self.persistentStoreOptions];
>     [options setObject:@YES forKey:NSMigratePersistentStoresAutomaticallyOption];
>     [options setObject:@YES forKey:NSInferMappingModelAutomaticallyOption];
>     self.persistentStoreOptions = [options copy]; 
> ```

但是当我尝试打开一个文档时，我收到以下错误： `Can't find mapping model for migration`

- 更新 -

即使我进行手动迁移

> ```
>  [NSMappingModel mappingModelFromBundles:@[[NSBundle mainBundle]]
>                               forSourceModel:sourceObjectModel
>                             destinationModel:self.managedObjectModel]; 
> ```

这返回零。尽管我仔细检查了 Model001to002.cdm 是否在应用程序包中。它必须在应用程序包中，对吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T13:19:53.737

映射模型的“陷阱”是在创建映射后不允许对模型进行任何更改。如果这样做，您也会收到此错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T16:41:51.390

好的，通过从 Xcode 中删除所有核心数据文件、读取它们并再次设置映射模型的源和目标来解决问题。

该死的Xcode！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-17T09:34:48.237

创建映射模型后，您不能对源/目标模型进行任何更改。

如果您确实进行了一些更改，

*   `mappingModelFromBundles:forSourceModel:destinationModel:`将无法找到映射模型文件
*   `addPersistentStoreWithType:configuration:URL:options:error:`with`{NSInferMappingModelAutomaticallyOption: @NO}`会报错*“Can't find mapping model for migration”*
*   `migrateStoreFromURL:type:options:withMappingModel:toDestinationURL:destinationType:destinationOptions:error:`会报错*“映射和源/目标模型不匹配”*

因此，只需重新创建映射模型并复制您在旧模型中所做的每一项更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-19T20:16:46.783

### TL;博士

至少从 Xcode 8/9 开始，打开映射模型，然后从**Editor**菜单中选择**Refresh data models**。通常，您似乎需要重新启动 Xcode。如果这样做不行，您可以尝试在模型编辑器底部重新选择目标。

## 更多提示

绝对**不要**在应用程序构建中分发模型后更改模型。

对于此示例，假设您已发布数据模型 1 (DM1) 并正在迁移到 DM2。如果您将 DM2 设置为活动版本然后运行您的应用程序，迁移将在您的持久存储上运行。如果您随后对 DM2 进行了另一项更改，请运行您的应用程序……砰！

问题是您的商店已经迁移到“DM2”，但商店中的数据不再适合模型。而且，我们不能再次从 DM2 迁移到 DM2。

> 继续创建 DM3 似乎是一个明显的解决方案。在开发过程中尽量减少模型和迁移的数量通常是一个好主意。

所以...现在您有一个已迁移到已失效 DM2 的持久存储。你如何再次测试迁移？您可以还原您的应用程序并使用 DM1 生成一些数据，但我更喜欢使用备份

### 创建备份

在使用 DM2 运行应用程序之前，您可以复制现有的商店（使用 DM1）以用于以后的测试迁移。在 macOS 上，您可以轻松地手动执行此操作。下面的代码也应该可以解决问题。通常你不想发布这个，而是你可以在你的普通 CD 堆栈打开之前把它放在某个地方，运行应用程序，然后停止应用程序（可能在通过 Xcode 结束运行之后放置一个断点）。

```
let fm = FileManager.default
let url = // The store URL you would use in ↓
// try coordinator.addPersistentStore(ofType: NSSQLiteStoreType, configurationName: nil, at: url, options: nil)

let dir = url.deleteLastPathComponent().appendingPathComponent("Backup", isDirectory: true).appendingPathComponent("DM1", isDirectory: true)
print("Saving DB backup for DM1")
if !fm.fileExists(atPath: dir.path) {
    do {
        // Create a directory    
        try fm.createDirectory(at: dir, withIntermediateDirectories: true, attributes: nil)

        let backupURL = dir.appendingPathComponent(url.lastPathComponent)
        try fm.copyItem(at: url, to: backupURL)
    }
    catch {
        print("Failed to save DB backup")
    }
} 
```

### 哎呀，我需要做另一个改变......

如果您运行到 DM2 的迁移，然后意识到您需要进行另一项更改，您将需要重新测试从 DM1 -> DM2 的迁移。这就是备份的用武之地。

与您进行备份的方式相同，运行此代码。

```
let fm = FileManager.default
let url = // The store URL you would use to add the store
let dir = url.deleteLastPathComponent().appendingPathComponent("Backup", isDirectory: true).appendingPathComponent("DM1", isDirectory: true)
let backupURL = dir.appendingPathComponent(url.lastPathComponent)

if fm.fileExists(atPath: backupURL.path) {
    do {
        fm.removeItem(at: url.path)
        try fm.copyItem(at: backupURL, to: url)
    }
    catch {
        print("Failed to restore DB backup")
    }
} 
```

您现在有一个恢复的 DM1 存储，并对 DM2 进行了更改。如果您运行应用程序，迁移可能会成功，但不会使用您的自定义映射模型。

> Remember if you are using a custom mapping, you will still need to use the **Refresh Data Models** technique before the mapping model will work.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-06T02:55:59.737

如果您的测试设备的存储来自不再存在的数据模型版本，则可能会发生这种情况。

例如，我有数据模型版本 7，然后我制作了数据模型版本 8。我制作了一个从 7 到 8 的映射模型。然后我在我的测试设备上运行它，一切都很顺利。

然后我对 8 做了一些更改。

要意识到的是，在 Core Data 中，每个模型都有一个哈希标识符，系统通过获取 xcdatamodel 文件的校验和来创建该标识符。因此，即使您进行了细微的更改，即使您没有创建新版本，*它也会将其视为不同的版本*。这些版本的标识符是**NSStoreModelVersionHashes**（请参阅[此处](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmUnderstandingVersions.html)的文档）。

换句话说，我最终得到：

```
Data Model 7 (release) - 0plcXXRN7XHKl5CcF+fwriFmUpON3ZtcI/AfK748aWc=

Data Model 8 (beta)    - qeN1Ym3TkWN1G6dU9RfX6Kd2ccEvcDVWHpd3LpLgboI=

Data Model 8 (release) - EqtMzvRnVZWkXwBHu4VeVGy8UyoOe+bi67KC79kphlQ= 
```

我没有制作版本 9，并将原始版本 8 保存在数据模型历史记录中，而是更新了 8，认为自动迁移可以解决我的问题。嗯，它不能，而且我不能在两者之间建立映射，因为 8 的旧（测试版）版本已经消失了。

我这样做是因为它是一个中间内部构建（不是发布），所以这没什么大不了的，但它确实让我陷入了循环！

如果它不是内部构建并且我*需要*完成这项工作，我可以返回（测试版）提交并拉出 8（测试版）的 xcdatamodel 文件，将（发布）版本重命名为 9，然后粘贴它进入发布版本并在 8 和 9 之间建立映射模型。

然而，由于它只是一个内部测试版，我们只是在测试设备上删除并重新安装了该应用程序。我们确实验证了，当从 7（发布）到 8（发布）时，迁移很顺利。

# c# - 'this' 关键字是多余的

> ID：12782571
> 
> 赞同：0
> 
> 时间：2012-10-08T13:16:34.050
> 
> 标签：c#, this-keyword

我正在为我的 C# 项目使用 Resharper。

我创建了一些私有全局变量，通常我使用'this' 关键字作为变量名的前缀（例如this.FirstName）。

Resharper 显然希望我使用下划线而不是“this”，但实际上它足够大胆地表明“this”关键字是多余的。MSDN 网站上没有提到这一点；我的印象是，无论您使用什么命名约定（使用 _ 或 this. 或大写/小写），最终都取决于用户的选择（即使 MSDN 站点也将其混为一谈（尽管从未在同一个类））。

任何人都可以澄清他们是否听说过这样的事情，或者您是否觉得多余的评论只是 Resharper 的观点，因为这种说法似乎有点荒谬。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T13:18:22.883

“冗余”是不必要的。由于在这些情况下，编译器显然不需要关键字，因此 ReSharper 是正确的。

你是否有*风格上的反对意见*是另一回事。我敢肯定，如果 ReSharper 更适合您，可以将其配置为忽略这些用途。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T13:31:53.407

其他答案已经很好地解释了，要补充一件事：`this`有时可以派上用场：

```
public class User
{ 
    private string firstname;

    public User(string firstname)
    {
       this.firstname = firstname;
    }
} 
```

`this`此处是必需的，因此它知道您指的是哪一个，因为它们的名称相同。

除了个人喜好之外，在大多数情况下它是多余的，但是如果您认为值得，您可以将其从 Resharper 的警告中删除。如果您使用 Stylecop 插件，它将位于选项中的代码编辑下，以及代码清理配置文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T13:18:50.300

我个人同意 Resharper 并且是我使用的编码风格：

```
public class Foo
{
    private readonly string _bar;
    public Foo(string bar)
    {
        _bar = bar;
    }
} 
```

使用关键字为字段添加前缀`this`当然是个人选择的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T13:18:24.843

作为解释，`this`当人类阅读代码时，关键字以及私有访问修饰符最有用。但它不是绝对必要的，因为它知道您指的是哪个字段，并且如果没有指定访问修饰符，它知道隐式是私有的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T13:21:32.080

如果我完全误解了您的帖子，请原谅我，但我阅读后的第一反应是您可能不清楚 C# 中“this”关键字的使用。使用类成员名称命名法与关键字“this”隐含的范围解析之间的区别似乎模糊了。

在运行时，“this”总是指当前对象实例。许多开发人员根据编码风格使用下划线前缀来指示类成员变量。

# python - Python 服务器在空闲一段时间后自行关闭

> ID：12782576
> 
> 赞同：1
> 
> 时间：2012-10-08T13:16:51.340
> 
> 标签：python, timeout

创建在一段时间空闲后自行关闭的 Python 服务器（XML-RPC 服务器）的最简单方法是什么？

我想这样做，但我不知道在待办事项中该怎么做：

```
from SimpleXMLRPCServer import SimpleXMLRPCServer

# my_paths variable
my_paths = []

# Create server
server = SimpleXMLRPCServer(("localhost", 7789))
server.register_introspection_functions()

# TODO: set the timeout
# TODO: set a function to be run on timeout

class MyFunctions:
    def add_path(paths):
        for path in paths:
            my_paths.append(path)
        return "done"

    def _dispatch(self, method, params):
        if method == 'add_path':
            # TODO: reset timeout
            return add_path(*params)
        else:
            raise 'bad method'

server.register_instance(MyFunctions())

# Run the server's main loop
server.serve_forever() 
```

我也尝试按照[此处](http://docs.python.org/library/signal.html#example)`signal.alarm()`的示例进行探索，但它不会在 Windows 下运行，这会向我抛出。`AttributeError: 'module' object has no attribute 'SIGALRM'`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:22:52.743

您可以创建自己的扩展服务器类，`SimpleXMLRPCServer`以便在空闲一段时间时关闭。

```
class MyXMLRPCServer(SimpleXMLRPCServer):
    def __init__(self, addr):
        self.idle_timeout = 5.0 # In seconds
        self.idle_timer = Timer(self.idle_timeout, self.shutdown)
        self.idle_timer.start()
        SimpleXMLRPCServer.__init__(self, addr)

    def process_request(self, request, client_address):
        # Cancel the previous timer and create a new timer
        self.idle_timer.cancel()
        self.idle_timer = Timer(self.idle_timeout, self.shutdown)
        self.idle_timer.start()
        SimpleXMLRPCServer.process_request(self, request, client_address) 
```

现在，您可以使用这个类来创建您的服务器对象。

```
# Create server
server = MyXMLRPCServer(("localhost", 7789))
server.register_introspection_functions() 
```

# c++ - 使用默认打印行为在 C++ 中重新路由 Lua 打印

> ID：12782580
> 
> 赞同：2
> 
> 时间：2012-10-08T13:17:02.970
> 
> 标签：c++, printing, lua

我正在使用[这个问题](https://stackoverflow.com/questions/4508119/redirecting-redefining-print-for-embedded-lua)的答案将 lua 重定向`print`到字符串流。我的功能代码如下。

我的问题是代码并不总是与 lua 自己打印的内容相匹配。最值得注意的是，当我尝试打印一个函数时，我只是得到了函数，而不是函数和地址。例子：

```
> --in lua
> print(os.exit)
function: 0xabcdef01

> --in my interpreter
> print(os.exit)
function 
```

显而易见的解决方案是强制我的自定义打印函数`tostring`在写入之前调用 lua `luaout`（就像默认打印一样）。但是，我真的不知道如何使这项工作。如果有人可以帮助我，我将不胜感激。

这是我的自定义打印：

```
static int l_my_print(lua_State* L) {
    int nargs = lua_gettop(L);

    for (int i=1; i <= nargs; i++) {
        int t = lua_type(L, i);
        switch (t) {
            case LUA_TSTRING: { /* strings */
                luaout << lua_tostring(L, i);
                break;
            }
            case LUA_TBOOLEAN: { /* booleans */
                luaout << (lua_toboolean(L, i) ? "true" : "false");
                break;
            }
            case LUA_TNUMBER: { /* numbers */
                luaout << lua_tonumber(L, i);
                break;
            }
            default: { /* other values */
                luaout << lua_typename(L, t);
                break;
            }
        }
        if (i!=nargs){
            luaout << "\t";
        }
    }
    luaout << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:26:00.330

你可以试试默认这个：

```
lua_pushfstring(L, "%s: %p", luaL_typename(L, i), lua_topointer(L, i)); 
```

或者

```
 luaout << luaL_typename(L, i) << ": " << lua_topointer(L, i); 
```

这将添加函数的名称和指针。

您可以从 C++ 调用 lua 函数（不保证可以工作，因为我没有测试它，但它应该除了语法错误）

```
lua_getglobal(L, "tostring");
lua_pushvalue (L, i);

if (lua_pcall(L, 1, 1, 0) != 0) {
        printf("error running function `%s': %s\n", "tostring", lua_tostring(L, -1));
        return -1;
}
// get result
char *result = luaL_checkstring (L, -1); 
```

# ruby-on-rails - 一个空的 JSON 可以通过模型的验证吗？

> ID：12782584
> 
> 赞同：0
> 
> 时间：2012-10-08T13:17:29.467
> 
> 标签：ruby-on-rails, ruby

在测试我的移动应用程序时，我尝试传递一个空 JSON 来创建学生记录：

```
 Parameters: {"student"=>{}}
WARNING: Can't verify CSRF token authenticity
   (0.1ms)  begin transaction
  SQL (0.5ms)  INSERT INTO "students" ("course_id", "created_at", "icon", "name", "password", "status", "studentID", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["course_id", nil], ["created_at", Mon, 08 Oct 2012 13:07:12 UTC +00:00], ["icon", nil], ["name", nil], ["password", nil], ["status", "pending"], ["studentID", nil], ["updated_at", Mon, 08 Oct 2012 13:07:12 UTC +00:00]]
   (3.5ms)  commit transaction
   (0.1ms)  begin transaction
  Student Exists (0.3ms)  SELECT 1 AS one FROM "students" WHERE ("students"."studentID" IS NULL AND "students"."id" != 46) LIMIT 1
   (0.1ms)  rollback transaction
Completed 422 Unprocessable Entity in 61ms (Views: 0.5ms | ActiveRecord: 5.2ms) 
```

我的模型验证了某些字段的存在：

```
validates :name, :password, :status, :studentID, :presence =>true
  validate :validate_course_id
  validates :studentID, :uniqueness=>{:message=>"This studentID already exists"} 
```

虽然 JSON 是空的，但它会创建一个几乎所有字段都为空的记录，除了`created_at`、`updated_at`和`pending`。

在控制器中：

```
 def create
    @student = Student.new(params[:student])
    # @student.update_attribute(:status,'pending')
    @student.status = 'pending'

    respond_to do |format|
      if @student.save
        upload_icon(params[:student][:icon_upload])

        format.html { redirect_to @student, notice: 'Student was successfully created.' }
        format.json { render json: @student, status: :created, location: @student }
      else
        format.html { render action: "new" }
        format.json { render json: @student.errors, status: :unprocessable_entity }
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:41:17.790

对于`update_attribute`：

更新单个属性并保存记录，而无需经过正常的验证过程。这对于现有记录上的布尔标志特别有用。当混入验证模块时，Base 中的常规`update_attribute`方法被替换为 this，默认情况下。

对于`update_attributes`：

从传入的 Hash 中更新所有属性并保存记录。如果对象无效，则保存失败并返回 false。

# objective-c - 带有自定义表格视图单元格的无法识别的选择器

> ID：12782588
> 
> 赞同：3
> 
> 时间：2012-10-08T13:17:40.823
> 
> 标签：objective-c, ios, ios5, uitableview

我有一个自定义的 tableview 单元格。但是当我想在我的 cellForRowAtIndexpath 中调用这个单元格时，它会给出以下错误。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewCell lblPosition]: unrecognized selector sent to instance 0xa62a600' 
```

如果一切都正确连接并正确命名，我检查了 100 次，但仍然没有发现问题所在。这就是我在代码中所做的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"KlassementCell";

    KlassementCell *cell = (KlassementCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"KlassementCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    // ask NSFetchedResultsController for the NSMO at the row in question
    Klassement *klassement = [self.fetchedResultsController objectAtIndexPath:indexPath];
    // Then configure the cell using it ...
    NSString *pointDiff = [NSString stringWithFormat:@"%@", klassement.goalsDiff];
    NSLog(@"position %@",klassement.position);
    NSLog(@"name %@",klassement.name);
    cell.lblPosition.text       = klassement.position;
    cell.lblName.text           = klassement.name;
    cell.lblgamesPlayed.text    = klassement.gamesPlayed;
    cell.lblGamesWon.text       = klassement.gamesWon;
    cell.lblGamesTied.text      = klassement.gamesTied;
    cell.lblGamesLost.text      = klassement.gamesLost;
    cell.lblGoalsPos.text       = klassement.goalsPos;
    cell.lblGoalsNeg.text       = klassement.goalsNeg;
    cell.lblGoalsDiff.text      = pointDiff;
    cell.lblPoints.text         = klassement.points;

    return cell;
} 
```

有人可以帮忙吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:28:01.507

尝试

```
if ((cell == nil) || (![cell isKindOfClass: KlassementCell.class])) { 
```

队列中返回的单元格可能不是 KlassementCell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:29:57.867

也许这对您的 viewDidLoad （或任何其他设置...）方法有帮助：

```
UINib* myCellNib = [UINib nibWithNibName:@"KlassementCell" bundle:nil];
[tableView registerNib:myCellNib forCellReuseIdentifier:@"KlassementCell"]; 
```

然后像这样实例化单元格

```
 cell = (KlassementCell*)[myCellNib instantiateWithOwner:nil options:nil]; 
```

myCellNib 应该在类范围内可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:38:44.090

您是否将“KlassementCell”笔尖中的 0 Index 对象的类设置为 KlassementCell 并映射了所有子视图？

如果没有，那就这样做，它可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:54:20.750

确保在笔尖中单元格的类设置为“KlassementCell”并且标识符设置为“KlassementCell”。

您不需要做任何其他事情，因为在 cellForRowAtIndexPath 中只使用 1 种类型的 tableviewcell 和只有 1 个标识符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-31T07:24:40.637

标识符必须与类名完全相同，因此两者都必须是“KlassementCell”。这样队列中就没有常规的可重用 UIcell。这也是`if ((cell == nil) || (![cell isKindOfClass: KlassementCell.class])) {`有效的原因，因为您确保没有将事物分配给常规单元格上不存在的属性，例如 lblPosition、lblName 和 lblgamesPlayed..

# javascript - ASP.net 在代码中设置 javascript

> ID：12782594
> 
> 赞同：0
> 
> 时间：2012-10-08T13:18:07.860
> 
> 标签：javascript, asp.net

嘿，我想弄清楚我在这里做错了什么。仅供参考，我是 ASP.net 及其方式的新手 :o)：

```
<asp:ListBox ID="df_dd_ccyear" name="df_dd_ccyear" style="z-index: 1000;" runat="server" ClientIDMode="Static">
      <script type="text/javascript">
         var d = new Date();
         var curr_year = d.getFullYear();
         var i = 1;

         while (i < 20) {
             if (i == 1) {
                 document.write('<asp:ListItem Text=\"' + (curr_year + i) + '\" value=\"' + (curr_year + i) + '\" Selected=\"True\"></asp:ListItem>');
             } else {
                 document.write('<asp:ListItem Text=\"' + (curr_year + i) + '\" value=\"' + (curr_year + i) + '\"></asp:ListItem>');
             }
             i++;
         }
      </script>
</asp:ListBox> 
```

运行页面时，我收到此错误：

```
Parser Error

Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: System.Web.UI.WebControls.ListItemCollection must have items of type 'System.Web.UI.WebControls.ListItem'. 'script' is of type 'System.Web.UI.HtmlControls.HtmlGenericControl'.

Source Error: 

Line 200:                    <div id="df-ccyear" style="z-index: 1000;">
Line 201:                        <asp:ListBox ID="df_dd_ccyear" name="df_dd_ccyear" style="z-index: 1000;" runat="server" ClientIDMode="Static">
**Line 202:                            <script type="text/javascript">**
Line 203:                                var d = new Date();
Line 204:                                var curr_year = d.getFullYear();

Source File: /chattclub/default.aspx    Line: 202 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:24:21.750

您不能以这种方式混合 javascript 和服务器端代码。Javascript 在客户端上运行，而 ASP.NET 在服务器上运行。

因此，您的第一种可能性是在服务器上构建它：

```
<asp:ListBox 
    ID="df_dd_ccyear" 
    name="df_dd_ccyear" 
    style="z-index: 1000;" 
    runat="server" 
    ClientIDMode="Static" 
/> 
```

在你的代码后面：

```
protected void Page_Load(object sender, EventArgs e)
{
    var currentYear = DateTime.Now.Year;
    var years = Enumerable.Range(currentYear, 20);
    df_dd_ccyear.DataSource = years;
    df_dd_ccyear.SelectedIndex = 0;
    df_dd_ccyear.DataBind();
} 
```

或者，如果您想要一个纯 JavaScript 解决方案将项目添加到列表框：

```
<%@ Page 
    Language="C#" 
    AutoEventWireup="true" 
    CodeBehind="Default.aspx.cs" 
    Inherits="WebApplication1.Default" 
%>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ListBox 
            ID="df_dd_ccyear" 
            name="df_dd_ccyear" 
            style="z-index: 1000;" 
            runat="server" 
            ClientIDMode="Static" 
        />

        <script type="text/javascript">
            var years = document.getElementById('df_dd_ccyear');
            var d = new Date();
            var curr_year = d.getFullYear();

            for(var i = 0; i < 20; i++) {
                if (i == 0) {
                    years.innerHTML += '<option value="' + curr_year + '" selected="selected">' + curr_year + '</option>';
                } else {
                    years.innerHTML += '<option value="' + (curr_year + i) + '">' + (curr_year + i) + '</option>';
                }
            }
        </script>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:25:42.390

您不能将列表项写为 html，它们需要由 asp.net 呈现为 html 作为选择选项。

在您的代码中，您应该执行以下操作：

```
 For i = 0 to 20
       df_dd_ccyear.items.add(currYear);
    End For 
```

有关添加列表项的更多详细信息，请访问：[http ://forums.asp.net/t/1142484.aspx/1](http://forums.asp.net/t/1142484.aspx/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T13:26:46.547

我建议始终使用 Code behind（如本例所示）。这样你就可以这样做：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim currentYear As Integer = Date.Now.Year
    For i As Integer = 0 To 19
        Dim newItem As New ListItem
        newItem.Text = currentYear + i
        newItem.Value = currentYear + i
        newItem.Selected = False
        If i = 0 Then
            newItem.Selected = True
        End If
        df_dd_ccyear.Items.Add(newItem)
    Next
End Sub 
```

在标记文件（.ASPX 文件）中，您只需声明`ListBox`如下：

```
<asp:ListBox ID="df_dd_ccyear" style="z-index: 1000;" runat="server" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:20:15.933

你不能这样做。ASP 标记在服务器上运行。JavaScript 在客户端运行。您必须从其他地方的 javascript 中动态添加/删除项目。

通过查看代码，在代码隐藏中用 C#/VB 编写它可能是最有意义的。

# iphone - Xcode 本地化快把我逼疯了！不加载情节提要

> ID：12782599
> 
> 赞同：22
> 
> 时间：2012-10-08T13:18:27.320
> 
> 标签：iphone, ios, xcode, localization, uistoryboard

这个问题已经让我发疯了2天。

我正在尝试本地化我的 iOS 应用程序，但对于我的生活，我无法让它工作。当我尝试一个空白项目而不是我当前的项目时，它很容易工作。

我已经使用“+”在本地化中添加了语言，我已经本地化了情节提要，但是当我检查模拟器或设备时，我仍然看到英文版本。事实上，它甚至不是英文的，因为如果我更改 Maintsoryboard（英文），我看不到设备的变化......我仍然看到最初的文本。

我试过重置模拟器，删除应用程序等。没有运气。

我已经恢复到备份尝试再次添加所有内容。没运气。

有人可以帮忙吗？我知道这没什么好说的，但我不知道该解释什么来帮助你帮助我。因此，如果我遗漏了一些信息，请告诉我。

仅供参考，当我在开发人员中查看应用程序的文件夹时，我最初没有 en.lproj，而我似乎应该默认拥有一个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T04:27:22.463

看起来您已经知道了这一点，但我认为可能发生的事情是最初您将“MainStoryboard.storyboard”作为非本地化资源。这意味着当你构建你的应用程序时，你会得到一个“MainStoryboard.storyboardc”作为非本地化资源。当您将故事板更改为本地化时，您会在捆绑资源中获得“Base.lproj/MainStoryboard.storyboardc”。

当您在 Xcode 中构建时，您的应用程序有多个副本。在您的设备或模拟器中有副本，在 Xcode 的派生数据文件夹中也有一个副本。当您对应用程序进行增量构建时，Xcode 中派生数据文件夹中的副本是新内容和旧内容的合并。因此，当您在 Xcode 中修改资源并重新构建时，您将获得最新的资源。但是，当您重命名或删除资源时，旧副本仍保留在构建目录中，直到您执行清理操作。

这意味着您的构建产品可能同时具有“MainStoryboard.storyboardc”和“Base.lproj/MainStoryboard.storyboardc”。当 NSBundle 加载资源时，它更喜欢未本地化的内容，并且会加载旧的“MainStoryboard.storyboardc”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-30T14:42:53.217

绝对确保您在 Main.strings 文件中没有拼写错误，例如双引号和分号。如果您有任何拼写错误，设备只会忽略本地化字符串并应用基本国际化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:30:38.857

盲拍：检查字符串文件是否为 UTF-16（如果我没记错的话是小端序）并且它没有语法错误（缺少 ; 或引号）。在更改字符串文件之后，还要在构建之前运行一个**干净的项目。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-27T20:28:43.010

尝试选择所有正在本地化的各种`.strings`、`.xib`和文件。`.storyboard`

在文件检查器中，确保为每个文件检查了所有需要的本地化。

添加本地化后，`English`在几个文件上未选中。因此，一些观点被本地化为非预期语言。检查`English`解决了问题。

[![未选中英文本地化](../Images/c49884d75b67529df81c94f42981a485.png)](https://i.stack.imgur.com/Kr3Gy.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-03T00:07:52.533

这是真的-AyAz，谢谢！需要注意的是，如果字符串文件中存在某些问题（尤其是本地化的 Storyboard），XCode 并不总是无法编译。您可以在 xcode 中快速检查文件的语法着色或在字符串文件上运行字符串 linter 以确保没有拼写错误——在我的情况下，由于双引号符号而失败，该符号用于目标本地化语言作为他们正常字母表的一部分。XCode 继续运行，没有警告/错误，但屏幕一直显示英文...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-29T06:19:43.887

[![在此处输入图像描述](../Images/e2ae9848d79c52a9358a44c1ba728ad8.png)](https://i.stack.imgur.com/xDEnl.png) 我面临的只是错字错误

```
 "zu0-GQ-ymP.text" = "Meeting End Time; 
```

只需确保并检查 Main.strings 中的每个字符串必须如下所示

```
 "zu0-GQ-ymP.text" = "Meeting End Time"; 
```

提示：如果是拼写错误，它在特定的本地化中将不起作用。

# c# - 有没有办法在服务器中查找新消息而无需轮询？

> ID：12782600
> 
> 赞同：2
> 
> 时间：2012-10-08T13:18:27.673
> 
> 标签：c#, jquery, azure

我的项目是托管在 Azure 环境中的 ASP.NET MVC3 应用程序。我想在不重新加载页面的情况下为用户显示新消息。我可以使用 Javascript 定期进行轮询并从服务器提取消息，但我的客户担心如果 10000 个用户每隔一段时间进行轮询，这会使他们的服务器变慢。

我曾想过（没有过多考虑）使用 Microsoft 推送通知服务，但我认为它只能与 windows phone 一起使用。

有什么办法可以推送消息吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:21:43.233

选项是：

*   信号R
*   网络套接字

您可能希望在您的应用程序中使用 SignalR。您可以将其作为 Nuget 包获取：

> **安装包 SignalR**

SignalR的定义：将*数据从服务器推送到客户端（不仅仅是浏览器客户端）一直是一个棘手的问题。SignalR 让它变得非常容易，并为您处理所有繁重的工作*。

别的东西：你在 Windows Azure 上。如果需要，您可以随时扩展/扩展。使用 Windows Azure 网站时，新的预览门户让这一切变得非常简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:26:51.317

我在 Pubnub 上取得了很大的成功：[http ://www.pubnub.com/](http://www.pubnub.com/)

您可以轻松地将消息推送到基于 javascript 或 c# 的客户端。他们有一个慷慨的免费帐户可供试用。与 SignalR 相比，水平设置和扩展的工作量要少得多。

# c# - Convert.ChangeType 快捷方式吗？

> ID：12782606
> 
> 赞同：1
> 
> 时间：2012-10-08T13:19:01.480
> 
> 标签：c#, .net

我想知道`Object Convert.ChangeType( Object object, Type type)`当类型`object`匹配时内部会发生什么`type`。它只是捷径并返回`object`吗？

例如：

```
object objString = "Hello World";

string converted = (string) Convert.ChangeType( objString, typeof ( String ) ); 
```

实现会`ChangeType`实际调用`IConvertible`接口还是只返回 objString？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T14:55:29.067

根据[Microsoft 的 C# 参考源](http://referencesource.microsoft.com/#mscorlib/system/convert.cs,3bcca7a9bda4114e)，`Convert.ChangeType(Object, Type)`执行以下一般行为：

*   如果输入为空
    *   如果类型是值类型，则抛出。
    *   否则返回null。
*   如果输入不是`IConvertible`
    *   如果类型正是输入的类型，则返回输入。
    *   否则扔。
*   如果类型是开箱即用的核心可转换类型之一，则`ToWhatever`在输入上调用相应的方法。
    *   在每种情况下，实现似乎是`return this`类型是否匹配`return Convert.ToWhatever(this)`，这是一种快捷方式。
*   否则调用`ToType`输入，传递类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:24:55.770

是的，它会在对象上调用 IConvertible 接口。如果是字符串，它会调用 objString.ToString() ，而后者又会返回自身（返回 this）。

此外，如果对象的类型没有实现 IConvertible 并且您转换为相同的类型，那么它只会返回相同的对象。

如果 type 没有实现 IConvertible 并且您转换为不同的类型，则会引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:31:02.297

[这篇 MSDN 博客文章](http://blogs.msdn.com/b/irenak/archive/2006/04/26/584087.aspx)可能会对您有所帮助。

> 如果该类实现了 IConvertable 接口，则可以使用 System.Convert.ChangeType 更改数据类型：

```
decimal x = (decimal) System.Convert.ChangeType("5", typeof(decimal)); 
```

> 把 ChangeType 想象成一个大的 switch 语句（在 VB 中选择 case）……有很多重载的函数。像这样的东西（免责声明：这是一个伪代码，而不是确切的 .NET 实现）：

```
public static Object ChangeType(Object value, TypeCode typeCode , IFormatProvider provider)
{

IConvertible v = value as IConvertible;

switch (typeCode) {

case TypeCode.Boolean:
    return v.ToBoolean(provider);

case TypeCode.Char:
    return v.ToChar(provider);

case TypeCode.SByte:
    return v.ToSByte(provider);

case TypeCode.Byte:
    return v.ToByte(provider);

case TypeCode.Int16:
    return v.ToInt16(provider);

case TypeCode.UInt16:
    return v.ToUInt16(provider);

. . .

} 
```

> 一个声称实现 IConvertible 接口的类必须实现上面 switch 结构中的所有转换加上 GetTypeCode：
> 
> · 获取类型代码
> 
> · ToBoolean
> 
> · ToByte
> 
> · ToChar
> 
> · 到日期时间
> 
> · 转十进制
> 
> · 对双
> 
> · ToInt16
> 
> · ToInt32
> 
> · ToInt64
> 
> · ToSByte
> 
> · 转单
> 
> · ToString
> 
> · 输入
> 
> · ToUInt16
> 
> · ToUInt32
> 
> · ToUInt64
> 
> System.Convert 类有许多实现，这些实现又可以由实现 IConvertible 接口的类调用。

# android - 如何使用 Android 备份管理器处理多个帐户

> ID：12782607
> 
> 赞同：3
> 
> 时间：2012-10-08T13:19:03.407
> 
> 标签：android, sharedpreferences

我想在我的应用中使用 Android 备份管理器来备份用户输入的数据。数据作为 SharedPreferences 存储在设备上。我在网上看到的例子看起来都很简单，很容易理解，但给我留下了两个问题：

1) 在我的应用程序中，用户选择设备上的哪个 Google 帐户用于连接到我的 Google App Engine 服务器，并且他们输入的数据特定于他们选择的帐户。他们选择的帐户显然可能与用作“备用帐户”的主帐户不同。如果用户有多个设备，这将成为一个问题，它们都具有相同的备份帐户，但我的应用程序使用不同的帐户。需要明确的是，我想处理我的手机和平板电脑都设置为使用 X@gmail.com 作为备份帐户，并且手机使用 X@gmail.com 连接到我的服务器，但平板电脑的情况使用 Y@gmail.com 连接到我的服务器。

2) Android Backup Service 如何使用同一个备份帐户处理来自不同设备的多个备份？最后备份的设备是否“获胜”，替换了所有先前备份的数据？或者如果备份数据包含不同的文件集，Android Backup Service 是否只是添加到备份而不是替换数据？

我处理问题 #1 的想法是将我的应用程序从使用通用文件名更改为特定于用户的文件名，可以使用备份管理器进行备份。但是，根据对 #2 的回答，这可能会或可能不会起作用，因为备份服务可能会替换整个以前的备份，即使我正在备份不同的文件名。

有什么建议么？

# asp.net - 在某些情况下，背景图像会出现在条带中

> ID：12782613
> 
> 赞同：0
> 
> 时间：2012-10-08T13:19:22.023
> 
> 标签：asp.net, css, internet-explorer

我在 Visual Studio 中开发。例如，当我浏览我的页面时，如果一个 div 有一个使用 css 设置的背景作为图像，它实际上是一种渐变色调 - 它出现在色带中 - 即没有渐变。

是否有一些设置可以更改，以便 IE 正确显示背景渐变色调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:25:03.053

您可以使用此站点生成背景颜色。该站点是一个 CSS 生成器，它为 IE 6-7-8-9 和其他浏览器生成代码。

[http://www.colorzilla.com/](http://www.colorzilla.com/)

# ios - Rails 双转义换行符

> ID：12782615
> 
> 赞同：1
> 
> 时间：2012-10-08T13:19:30.987
> 
> 标签：ios, ruby-on-rails, json

我在 Rails 中构造了一个字符串：

```
text = 'Example, first line\nExample, second line' 
```

到目前为止，一切都很好。我想在我的应用程序的 UILabel 中打印它，所以我将它作为 JSON 传递给我的应用程序。问题是，Rails 将这个字符串吐出为

```
{"test":"Example, first line\\nExample, second line"} 
```

注意反斜杠的双重转义。当 iOS 解释这个 JSON 时，它正确地只去除一个转义并在标签中打印文字 \n，而不是解释一个换行符。

如何让rails将文本变量输出为

```
{"test":"Example, first line\nExample, second line"} //note the single escape 
```

没有hacky？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:31:47.907

单引号防止转义。

试试这个：

```
text = "Example, first line\nExample, second line" 
```

# jenkins - 詹金斯条件项目

> ID：12782617
> 
> 赞同：4
> 
> 时间：2012-10-08T13:19:50.427
> 
> 标签：jenkins

我的链接解决方案中涉及的项目是初始化数据库、导入数据库和导出数据库。如果初始化成功，则应调用“导出”。如果失败，则应调用“导入”。

```
 dbinit
      /     \
export       import 
```

从逻辑上讲，这很简单；但是，由于我缺乏 Jenkins 经验，这引起了相当大的悲痛。

我查看了以下插件：

**Conditional BuildStep** - 这基本上会在构建中添加一个“if”语句。我对此进行了调查，认为可以将导出/导入项目协作到一个项目中，使用条件来决定采取哪种行动。如果我能够检查上游构建的条件（成功或失败），这可能会起作用

**Post Build Task** - 根据日志输出执行 shell 脚本。这将进入 dbinit 项目。这样做的问题是我希望将导入/导出作业与 dbinit 分开。如果我可以从外壳调用另一个工作，这将起作用

**参数化触发器**- 这可能是完美的。这基本上可以通过根据构建的状态决定运行哪个作业来解决问题。但是，在撰写本文时，此插件无法在 Jenkins 版本 1.481 或更高版本中正常运行。这个问题是一个月前提出的（参见[错误链接](https://issues.jenkins-ci.org/browse/JENKINS-15130)，日期为 2012 年 9 月 12 日），但仍未解决，因此我仍在寻找另一种解决方案。

谁能告诉我如何克服这些插件中发现的问题？还是我忽略了另一条路线？

非常感谢，

罗里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:32:38.003

如果 jenkins 1.481 或更高版本没有给你任何你需要的东西，并且参数化触发器可以工作，那么只需使用 1.480，然后等到问题得到解决（它肯定会得到解决，这是非常受欢迎的插件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:23:36.900

[构建结果触发器](https://wiki.jenkins-ci.org/display/JENKINS/BuildResultTrigger+Plugin)对您有帮助吗？

> 使用 BuildResultPlugin，您可以配置 jobB 来监控 jobA 的构建结果。如果有新的构建结果符合您的条件（不稳定、失败、...），则会安排构建

# javascript - 使用 javascript (birt) 创建数据集

> ID：12782621
> 
> 赞同：1
> 
> 时间：2012-10-08T13:20:11.393
> 
> 标签：javascript, reporting, birt

我想通过将参数传递给报告来按需创建数据集，这些参数是应该查询的文件的名称，以便在报告中获得正确的列和数据，我在想像编辑 this.queryText 属性在哪里“this”表示当时尚未创建的数据集。

有可能吗？如果有，怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:29:44.170

您始终可以使用脚本数据集事件适配器来描述它。唯一的问题是报告的内容不会知道这些名称。您将需要编写更多代码来处理这种情况。如果您创建一个空白报表并添加一个脚本数据源和一个没有列的脚本数据集，您可以将事件处理程序设置为类似于以下内容的类：

```
package my.event.handlers;

import org.eclipse.birt.report.engine.api.script.IScriptedDataSetMetaData;
import org.eclipse.birt.report.engine.api.script.IUpdatableDataSetRow;
import org.eclipse.birt.report.engine.api.script.eventadapter.ScriptedDataSetEventAdapter;
import org.eclipse.birt.report.engine.api.script.instance.IDataSetInstance;

public class MyScriptedDataSetMeta extends ScriptedDataSetEventAdapter {

private Integer cnt=0;
private Integer cntT=3;

@Override
public boolean fetch(IDataSetInstance dataSet, IUpdatableDataSetRow row) {

    if( cnt < cntT){
        try{
            row.setColumnValue("col1", cnt);
            row.setColumnValue("col2", "hello");
            row.setColumnValue("A_Column", "jjj");

            cnt++;
            return true;
        }catch (Exception e){

        }
    }
    return false;
}

@Override
public boolean describe(IDataSetInstance dataSet,
        IScriptedDataSetMetaData metaData) {
    // TODO Auto-generated method stub
    metaData.addColumn("col1", Integer.class);
    metaData.addColumn("col2", String.class);
    metaData.addColumn("A_Column", String.class);

    return true;
}

} 
```

# sql - 用于合并行的短 Sql 查询

> ID：12782627
> 
> 赞同：0
> 
> 时间：2012-10-08T13:20:41.260
> 
> 标签：sql, sql-server-2008

如果我有这张桌子：

```
Column1 Column2     Column3 
20          NULL     3/27/2012 
NULL        50      3/27/2012
NULL        40      3/27/2012 
```

我怎样才能把它变成：

```
Column1 Column2     Column3 
20          90      3/27/2012 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:24:26.493

试试这个

```
SELECT SUM(Column1) Column1, SUM(Column2) Column2, Column3
FROM Table1
GROUP BY Column3 
```

# actionscript-3 - Flash Actionscript 3 - 声音搜索/播放

> ID：12782633
> 
> 赞同：2
> 
> 时间：2012-10-08T13:20:53.753
> 
> 标签：actionscript-3, actionscript

我有一个 4 小时长的音频文件。我创建了一个标准播放器来管理我的需求 - 工作正常，但你不会在位置计数播放器停止中寻求超过 12180000 毫秒。如果您将声音定位为播放 12100000（提前几秒） - 播放正常，并且如果在不通过代码更改位置的情况下继续播放，那么直到最后都很好。我没有收到任何错误或有关此类问题的任何信息。

```
soundChannel = sound.play(12180000); // DOES NOT PLAY, NO ERRORS
soundChannel = sound.play(12100000); // PLAYS FINE, AND CONTINUES TO PLAY TILL THE END 
```

*   在播放之前，声音已满载。

所以有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:32:53.863

这很有趣......我无法让它过去`12173943 milliseconds`。对我来说，它可以计算出那个确切的数字，但是在那之后的任何东西，它都不会播放。我的猜测是闪存为声音分配了一定数量的内存，并且那里的数字计算了为该文件分配的最大内存量。希望其他人可以加入。我正在使用 Rummer 提供的 MP3，这是我的测试代码

```
import flash.media.*;
import flash.events.*;
import flash.net.*;

var channel:SoundChannel = new SoundChannel();
var sound:Sound = new Sound();
sound.load(new URLRequest("podcast.mp3"));
sound.addEventListener(Event.COMPLETE, soundLoaded);
sound.addEventListener(IOErrorEvent.IO_ERROR, onError);

function soundLoaded(e:Event):void
{
    channel = sound.play(12173943);
}

function onError(e:IOErrorEvent):void
{
    trace(e);
} 
```

我正在使用 Flash CS5.5 并为 flash 10.2 导出。我会高度考虑将您的 mp3 分成多个部分。第一次加载我的 SWF 时，由于 mp3 的大小，闪光灯在播放前会挂起 10 秒钟。

=============== 有效的AS2版本

```
var my_sound:Sound = new Sound();
my_sound.onLoad = function(success:Boolean)
{
    if (success)
    {
        my_sound.start(12180);
    } 
};
my_sound.loadSound("podcast.mp3", true); 
```

# wordpress - wordpress 查询以随机获取帖子类型中的所有图像

> ID：12782635
> 
> 赞同：0
> 
> 时间：2012-10-08T13:21:06.150
> 
> 标签：wordpress

我有以下查询来从“myportfoliotype”帖子类型中获取所有图像，它工作正常。

但是，我希望在页面加载/刷新时拉入的所有图像都是随机的。

我遵循了一些教程，并提出了以下代码：

```
<?php
 $query = new WP_Query( array( 'post_type' => 'myportfoliotype', 'posts_per_page' => -1, 'orderby' => 'rand' ) );
if( $query->have_posts() ){
    while($query->have_posts()){

        $query->the_post();
        $do_not_duplicate = $post->ID;
        $thumb_id = get_post_thumbnail_id( $post_id );
        $image_query = new WP_Query( array('post__not_in' => array (MultiPostThumbnails::has_post_thumbnail('myportfoliotype', 'logo'), $thumb_id ), 'orderby' => 'rand' , 'post_type' => 'attachment', 'post_status' => 'inherit', 'post_mime_type' => 'image', 'posts_per_page' => -1, 'post_parent' => get_the_ID() ) );
        while( $image_query->have_posts() ) {
            $image_query->the_post();
            $do_not_duplicate = $post->ID;
            //echo wp_get_attachment_image( get_the_ID() );
            $image = wp_get_attachment_image_src(get_the_ID(), 'large');?>

    <li> <a class="fancybox" rel="gallery1" href="<?php echo $image[0]; ?>"> <img src="<?php echo get_template_directory_uri(); ?>/js/timthumb.php?src=<?php echo $image[0]; ?>&amp;w=137&amp;h=137&f=2" alt="<?php the_title(); ?>" class="grey"/></a>
          <img src="<?php echo get_template_directory_uri(); ?>/js/timthumb.php?src=<?php echo $image[0]; ?>&amp;w=200&amp;h=200" alt="<?php the_title(); ?>" class="color"/>
    </li>

<?php           
        }
    }
}
?> 
```

我不太确定这是否正确？如前所述，它会拉入图像但不是随机的....

任何帮助或指导将不胜感激。

干杯，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:59:06.507

我已经解决了我的问题，尽管我会发布答案，以防其他人使用“post type order”插件遇到同样的问题。

在“post type order”的设置页面中有一个名为“auto sort”的选项，您需要取消选中此项，并且在进行查询时应添加以下内容：

```
$args = array(
              'post_type' => 'post-type-here',
              'orderby'   => 'menu_order',
              'order'     => 'ASC'
            ); 
```

就如此容易！

感谢所有的帮助家伙！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:14:06.480

您可能有一个挂钩[`posts_orderby`](http://codex.wordpress.org/Plugin_API/Filter_Reference/posts_orderby)过滤器的插件。

如果您不想禁用此插件，可以添加`'suppress_filters'=>true`到您的[`WP_Query`](http://codex.wordpress.org/Class_Reference/WP_Query)参数中。

# c# - 多线程

> ID：12782638
> 
> 赞同：0
> 
> 时间：2012-10-08T13:21:13.123
> 
> 标签：c#, winforms, multithreading

我目前正在处理的应用程序执行一些 I/O 或 CPU 密集型操作（文件压缩、文件传输、与第三方 API 通信等），这些操作在用户按下“发送”按钮时发生。

我目前正试图说服我的雇主，我们应该将这些操作推送到主应用程序中的单独线程（在任何给定时间，我们最多需要两个工作线程处于活动状态），但我的同事声称：

> 在低优先级线程上执行的任何额外处理都可能影响 GUI 的可用性。

我的观点是，将 I/O 或 CPU 密集型活动推送到工作线程，在进度报告期间使用 Invoke 调用更新 UI，是处理密集型活动的标准做法。

我不正确吗？如果是这样，有人可以提供解释吗？

**编辑：**

谢谢你到目前为止的答案。

我应该澄清一下：同事对非阻塞的解决方案是生成一个包含计时器循环的子进程，该循环扫描文件夹并处理文件压缩/传输活动。（请注意，这不包括对第三方 API 的调用——我不知道他的解决方案是什么。

这种方法的主要问题是主应用程序失去了任何活动状态的所有范围。这导致了恕我直言，进一步的复杂性（他对进度报告的解决方案是在两个进程中公开 Windows 消息泵并在两者之间发送自定义消息两个过程）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:23:30.203

你是对的。正如您所描述的，后台线程是通过调用操作保持 UI 活动的本质。将所有内容都保留在 GUI 线程上，最终会堵塞管道并使 GUI 无响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:26:09.093

最终的答案是将其作为概念验证来实施，然后分析应用程序以查看可能存在或不存在哪种潜在的性能影响。也许在一个

话虽如此 - 这对我来说听起来像是垃圾。事实上，情况恰恰相反——使用额外的线程通常是保持 UI 响应的最佳方式。

尤其是像任务并行库这样的东西，基本的多线程并不是很困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:28:22.233

是的，你是对的。一般原则是，负责响应用户并保持用户界面最新的线程（通常称为 UI 线程）永远不应该用于执行任何冗长的操作。
根据经验，任何可能需要超过 30 毫秒的时间都可以从 UI 线程中删除。这有点激进——30ms 大约是大多数人认为不是瞬时的最短间隔，实际上它比电影屏幕上显示的连续帧之间的间隔略短。

# c - printf 意外工作

> ID：12782639
> 
> 赞同：0
> 
> 时间：2012-10-08T13:21:15.497
> 
> 标签：c, printf

我正在尝试为 C 中的一个问题编写代码。代码如下：

```
#include<stdio.h>
int cop(int a,int b)
{
    int c,d,e,f,g;
    if(a>b)
    {   
        c=a;
        a=b;
        b=c;
    }
    while(c!=0)
    {
        c=b%a;
        b=a;
        a=c;
    }
    return b;
}

int main()
{
    int i=1, j=1, k, a, b, c, d, e, f, g=1;

    scanf("%d",&k);
    int q=0;
    for(q=k;q>0;q--)
    {
        scanf("%d",&a);
        while(g==1)
        {
            b=j+i;
            i=j;
            j=b;
            g=cop(j,a);
            printf("%d\n",g);
        }
        printf("%d %d\n",g,j);
        j=1;i=1;g=1;
    }

return 0;
} 
```

当我`3 3 5 161`在打印时输入

```
1
3
3 3
1
1
5
5 5
1
1
1
1
1
7
7 21 
```

当我注释掉语句`printf("%d\n",g)`并使用相同的输入执行时，我得到如下输出：

```
3 3
5 3
161 3 
```

所以，我怀疑为什么我没有得到：-

```
3 3
5 5
7 21 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T13:28:39.613

```
foo.c: In function 'cop':
foo.c:4: warning: 'c' may be used uninitialized in this function 
```

这有帮助吗？

您依赖于函数中的未初始化值（在某些情况下）。这意味着对 printf 的额外调用可能会弄脏寄存器或堆栈值，这将改变函数的行为方式。

严格来说，这是一种未定义的行为，您刚刚学习了未定义行为的外观 - 不相关的函数调用会改变未定义行为的行为方式。

# android - layout_gravity 不适用于设置了权重的按钮

> ID：12782643
> 
> 赞同：2
> 
> 时间：2012-10-08T13:21:33.670
> 
> 标签：android, alignment, android-linearlayout

我有这样的布局：

```
 <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight=".6"
        android:orientation="horizontal"
        android:weightSum="1" >

        <LinearLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight=".5">

        <LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight=".5"
            android:weightSum="1" >

                <Button
                    android:id="@+id/posta_ateneo"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center|right" // DOESN'T WORK
                    android:layout_weight=".6"
                    android:background="@drawable/round_corner"
                    android:gravity="center"
                    android:singleLine="true"
                    android:text="Button 1"

                    android:textColor="@android:color/white" />

            </LinearLayout>

        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout6"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight=".5"
            android:weightSum="1" >

            <Button
                android:id="@+id/unisound"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:gravity="center"
                android:layout_weight=".6"
                android:background="@drawable/round_corner"
                android:text="Button 2"
                android:textColor="@android:color/white" />

        </LinearLayout>

    </LinearLayout> 
```

我的结果是这样的：

![现在](../Images/6ef075b4ed2aa5712472fa2c193b214c.png)

但我想要类似的东西：

[![我想要的是](../Images/9ab2f372a82db10e16fd97d3852e439b.png)](https://i.stack.imgur.com/31SBZ.png)

我知道我可以习惯于在右侧`RelativeLayout`定位`button1`，但我不能在该布局中使用重量，我需要它来支持所有屏幕尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:26:17.327

以下是您想要的 xml 文件..

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight=".5" >

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight=".5"
        android:gravity="right"
        android:weightSum="1" >

        <Button
            android:id="@+id/posta_ateneo"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center|right"
            android:layout_weight=".6"
            DOESN=""
            T=""
            WORK=""
            android:gravity="center"
            android:singleLine="true"
            android:text="Button 1"
            android:textColor="@android:color/white" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout6"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight=".5"
    android:gravity="left"
    android:weightSum="1" >

    <Button
        android:id="@+id/unisound"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight=".6"
        android:gravity="center"
        android:text="Button 2"
        android:textColor="@android:color/white" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:27:52.553

使用这个 xml 并判断它是否有帮助。

```
 <?xml version="1.0" encoding="utf-8"?>

    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight=".6"
    android:orientation="horizontal"
    android:weightSum="1" >

    <Button
        android:id="@+id/posta_ateneo"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:gravity="center_vertical|right"
        android:singleLine="true"
        android:text="Button 1"

        android:textColor="@android:color/white" />

   <Button
        android:id="@+id/unisound"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Button 2"
        android:textColor="@android:color/white"
        android:gravity="center_vertical|left" />

   </LinearLayout> 
```

# php - 将视频通话和语音通话添加到我的网站 php

> ID：12782644
> 
> 赞同：0
> 
> 时间：2012-10-08T13:21:39.270
> 
> 标签：php, video, video-streaming

我正在为一些人群创建一个社交网络。在那里我需要向该站点添加视频通话和语音通话功能（如 facebook 或 skype）。我需要使用 PHP 来执行此操作。是否有任何 api 或帮助菜单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:25:52.977

```
<a href="callto://+2345634563456">Link will initiate Skype call to number</a>

<a href="skype:username?call">Link will initiate Skype call to username</a> 
```

对 Skype 来说很容易。不知道脸书。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:38:39.397

我假设您的意思是您想要运行自己的私人视频通话，而不是简单地链接到 Skype 通话或类似的通话。您在这里确实有 2 个选择：自己托管，或使用托管解决方案并将其集成到您的产品中。

* * *

## 自托管

这很乱。这一切都可以用 PHP 来完成，但这可能不是最可取的解决方案，因为它不是所有方面工作的最佳工具。Flash 在用户端的 a/v 捕获和传输方面效率更高。您可以尝试在不使用 Flash 的情况下执行此操作，但您会感到头疼。HTML5 可能会让您的生活更轻松，但如果您追求最大的兼容性，flash 是创建客户端的最简单方法。然后，就中继音频/视频的实际服务器端而言，您可以用 php 编写聊天服务器，但最好使用开源项目，例如[janenz00](https://stackoverflow.com/users/1142004/janenz00)提到的[red5](http://code.google.com/p/red5/)，它已经通过您的客户端构建并与之交互（如果它还没有）。或者，您可以像之前提到的那样自制一个 Flash 客户端，并将其连接到两侧的 Flash 流媒体服务器......无论哪种方式，它都会很快变得复杂，并且完全超出了我的专业知识来帮助您。

* * *

## 托管服务

总而言之，我的建议是，除非您想管理许多复杂服务器和故障点的荒谬设置，否则请使用像[UserPlane](http://www.userplane.com/)或类似的托管服务，并将所有处理和技术工作分流给擅长此操作的人，然后再担心关于与他们的 api 接口并让他们的客户很好地集成到您的网站中。如果你这样做，你将成为一个更快乐的开发者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:36:29.663

要进行视频通话，您将需要：

1.  一个客户端程序，它可以从您的系统检测网络摄像头和麦克风并将其上传（流式传输）到服务器。
2.  流媒体服务器，它将捕获上传的流并将其转发给其他用户-red5、Wowza、Fashmedia 服务器等。

看起来你是这方面的初学者。如果是这样，请尝试使用[red5](http://code.google.com/p/red5/ "红色的")，因为它是开源的。他们有视频通话的例子。

# grails - Grails 将资源复制到外部目录

> ID：12782645
> 
> 赞同：0
> 
> 时间：2012-10-08T13:21:40.013
> 
> 标签：grails, resources

我想将从 grails（及其插件缓存、gzip 等）创建的所有资源（js、css、包）复制到外部文件夹（在 S3 中）而不是在 war 中。
可能吗？
我试图检查文档内部，但没有结果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:25:48.767

您可以使用 grails.war.resources 自定义战争内容。查看[grails 手册的第 18 节](http://grails.org/doc/latest/guide/single.html#deployment)。

# mysql - MYSQL中关于另一列的条件不同

> ID：12782649
> 
> 赞同：0
> 
> 时间：2012-10-08T13:21:48.803
> 
> 标签：mysql, join, sql-order-by

我有如下查询

```
SELECT * FROM content_type_product cp
JOIN content_field_product_manufacturer cf ON cf.nid = cp.nid group by cp.nid
ORDER
  BY field(cf.field_product_manufacturer_value,'12') DESC,
  cp.field_product_price_value DESC 
```

这工作完美只是一个小缺陷，有两个具有相同 id 的记录（一个用于 cf.field_product_manufacturer_value='12'，另一个用于 cf.field_product_manufacturer_value = '57'），我使用 group by 子句消除了它们。但问题是我想获得具有更大“field_product_price_value”的特定ID，但不知何故它给了我较小的价值。如果我查询它为“57”，那么它给我的 id 具有更大的 field_product_price_value，但是当我查询它为 '12' 它给我的 id 为较小的“field_product_price_value”。有什么方法可以指定选择具有更大“field_product_price_value”的ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:39:26.140

您应该`max(field_product_price_value)`与适当的 GROUP BY 子句结合使用。

通常，只有在查询中同时选择普通列和聚合函数 ( ) 时，才应使用`GROUP BY`-clause `MIN, MAX, COUNT, AVG`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:47:35.220

您的查询正在使用 MySQL 的一个（错误）功能，称为隐藏列。`SELECT`仅当和 中的所有未聚合列`GROUP BY`具有相同的值时，才建议这样做。情况并非如此，因此您需要自己选择正确的记录：

```
SELECT cp.*, cf.*
FROM content_type_product cp JOIN
     content_field_product_manufacturer cf
     ON cf.nid = cp.nid join
     (select cf.nid, max(field_product_price_value) as maxprice
      from content_field_product_manufacturer 
      group by cf.nid
     ) cfmax
     on cf.nid = cfmax.nid and cf.field_product_price_value = cfmax.maxprice
ORDER BY field(cf.field_product_manufacturer_value,'12') DESC,
      cp.field_product_price_value DESC 
```

除非您真的知道自己在做什么，否则当您使用 a 时`GROUP BY`，请确保 中的所有未聚合列`SELECT`都在`GROUP BY`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:51:03.823

```
'2' > '12' 
```

如果我们在谈论 varchars。我相信您应该将您的字段转换为数字类型，并且您的排序会正常工作。阅读[本文](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html)了解更多信息。

# python - 模块中的计算/While 循环/传输变量

> ID：12782653
> 
> 赞同：1
> 
> 时间：2012-10-08T13:21:57.903
> 
> 标签：python, loops

我对python很陌生，我遇到了一些基本问题。

1.  我似乎无法将大部分计算放在一个模块中。如果我这样做了，结果将无法转移，它们将始终显示为 0.0。

2.  一旦我能够将我的计算放入一个模块中，我就可以将模块放入一个循环中并询问用户是否要重复该操作。

3.  这也是我的主要问题 :: 我想“存储”每个项目（项目编号、价格等）的输出（显示结果），并在取消循环后打印所有项目。

谢谢！我很难弄清楚这一点。

这是我的代码：

```
#Mateo Marquez
#Oct. 8th, 2012
#P.O.S information system assigment
#

#Define Global Variables
TAX = 0.6
YELLOW_TAG = 0.10
BLUE_TAG = 0.20
RED_TAG = 0.25
GREEN_TAG = 0

#Main Module
def main():

    tax_fee = 0.0
    total_price = 0.0
    introUser()

    # I want this to be the mainCalc() function and return results.

    productNumber=raw_input("Please enter the Product Number: ")
    cost=float(raw_input("Please enter the cost of the selected product: "))
        print " "
        print "As you might have noticed, our discounts are color coded"
        print "Yellow is 10%, Blue is 20% & Red is 25%"
        print " "
    tagDiscount=raw_input("Please enter the color tag: (yellow, blue, red or none)")
    if tagDiscount == 'yellow':
        print " "
        print "You get a 10% discount"
        total_price = (YELLOW_TAG*cost)
    if tagDiscount == 'blue':
        print " "
        print "You get a 20% discount"
        total_price = (BLUE_TAG*cost)
    if tagDiscount == 'red':
        print " "
        print "You get a 25% discount"
        total_price = (RED_TAG*cost)
    if tagDiscount == 'none':
        print " "
        print "No discount for you!"
        total_price = 0

    print " "
    print "~Remember~ this weekend is Tax Free in most of the country"
    print "Green Tags designate if the product is tax free"
    tagDiscount=raw_input("Does your product has a Green Tag? (yes or no)")
    if tagDiscount == 'yes':
        print " "
        print "Good! your product is tax free"
        tax_fee = 0
    if tagDiscount == 'no':
        print " "
        print "I'm sorry, product", productNumber, "requires regular tax"
        tax_fee = (TAX*total_price)

#I want this to be the end of the mainCalc() function       

displayResults(total_price, tax_fee, cost, productNumber)

#Introduction function
def introUser():
    print "Welcome to Wannabee's"
    print "I'll gladly help you with your price question"
    print "Let's start"
    print " " 

#Display results function
def displayResults(total_price, tax_fee, cost, productNumber):
    print " "
    print "Your Product Number: ", productNumber
    print "Listed price of your product: $", cost
    print "Your discount: $", total_price
    print "Your Tax amount: $", tax_fee
    print "Your grand total: $", (cost - total_price - tax_fee)
    print " "
    print "Your savings: ", ((cost-total_price)/cost*100),"%!"

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:54:38.500

为了保存相关例程使用的值，请将变量和使用它们的例程放在一个类中。以下代码定义了一个“POS”类和两个共享其变量的方法例程。自己。” 方法中的符号表示保存在实例“p”中的类变量，该实例是在用 实例化类时创建的`p = POS()`。

该示例说明了变量的存储方式；您需要根据需要调整输入和打印语句（它们在 Python 3 中）。如果您想在输入项目时存储它们并在最后打印它们，请在 中创建一个空列表，向列表中`__init__`添加一个元组，`mainCalc()`然后在 中打印出每个列表项`displayResults()`。

```
class POS:
    def __init__(self):
        self.taxrate = 0.06
        self.disc = {"": 0.0, "yellow": 0.10, "blue": 0.20, "red": 0.25}
        self.total = 0
        self.savings = 0
        self.tax = 0

    def mainCalc(self, item, qty, cost, tag, taxable):
        print(qty, "* Item", item, "@ ${:.2f}".format(cost),
                                   "= ${:.2f}".format(qty*cost))
        discount = cost * self.disc[tag]
        if (tag):
            print("  You get a", int(100*self.disc[tag]),
                  "% discount ${:.2f}".format(discount), "for", tag, "tag")
        self.total += qty * (cost - discount)
        self.savings += discount
        if (taxable == "yes"):
            tax = qty * cost * self.taxrate
            self.tax += tax
            print("  tax ${:.2f}".format(tax))
        else:
            print("  tax free")

    def displayResults(self):
        print("----------------")
        print("Your total:     ${:.2f}".format(self.total))
        print("Your savings:   ${:.2f}".format(self.savings))
        print("Your total tax: ${:.2f}".format(self.tax))
        print("Grand total:    ${:.2f}".format(self.total + self.tax))
        return

p = POS()

#        Item  Qty Price  Tag      Taxable
items = [(1492, 1, 1.95, "yellow", "yes"),
         (1524, 2, 4.50, "blue",   "no"),
         (2843, 1, 6.95, "blue",   "yes"),
         (1824, 3, 2.29, "",       "yes")]

for i in items:
    p.mainCalc(*i)

p.displayResults() 
```

运行示例会产生：

> ```
> 1 * Item 1492 @ $1.95 = $1.95
>   You get a 10 % discount $0.20 for yellow tag
>   tax $0.12
> 2 * Item 1524 @ $4.50 = $9.00
>   You get a 20 % discount $0.90 for blue tag
>   tax free
> 1 * Item 2843 @ $6.95 = $6.95
>   You get a 20 % discount $1.39 for blue tag
>   tax $0.42
> 3 * Item 1824 @ $2.29 = $6.87
>   tax $0.41
> ----------------
> Your total:     $21.39
> Your savings:   $2.49
> Your total tax: $0.95
> Grand total:    $22.33 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:01:49.313

您应该考虑以下约束：

*   一个函数只能在它被一个语句定义**之后**`def`才能被调用（你对`displayResults`.
*   函数不能访问在另一个函数定义的主体中本地定义的变量。

要改进您的代码，请从整体角度考虑程序应该如何流动，或者使用 Dave 回答中建议的类。

# delphi - 如何在 XE2 之前的 Delphi 版本中获得 SSE 舍入？

> ID：12782654
> 
> 赞同：-2
> 
> 时间：2012-10-08T13:22:06.913
> 
> 标签：delphi, rounding, delphi-2007, sse

如何在以前的 Delphi 版本中获得 XE2 风格的舍入，所以使用 SSE ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:22:06.913

内联 Delphi 程序集支持 SSE 指令已有一段时间了。两种重载版本是可能的：单和双。此外还有两个版本是可能的：作为参数输入或作为指针输入。这个版本比原生 Round()/Trunc() 方法特别快。

要四舍五入，您有：

```
Function RoundSSE(Value: Single): Integer; Overload;
Asm
  // additional PUSH/POP pointer stack added automatically
  CVTSS2SI  EAX, Value
End;

Function RoundSSE(Value: Double): Integer; Overload;
Asm
  // additional PUSH/POP pointer stack added automatically
  MOVQ      XMM0,Value
  CVTSD2SI  EAX, XMM0
End;

Function RoundMEM_SSE(Var Value: Single): Integer; Overload;
Asm
  // as written, fatest version
  CVTSS2SI  EAX, [Value]
End;

Function RoundMEM_SSE(Var Value: Double): Integer; Overload;
Asm
  // as written, fatest version
  CVTSD2SI  EAX, [Value]
End; 
```

要截断您与 CVTTSS2SI / CVTTSD2SI 相同的内容：

```
Function TruncSSE(Value: Single): Integer; Overload;
Asm
  // additional PUSH/POP pointer stack added automatically
  CVTTSS2SI  EAX, Value
End;

Function TruncSSE(Value: Double): Integer; Overload;
Asm
  // additional PUSH/POP pointer stack added automatically
  MOVQ      XMM0,Value
  CVTTSD2SI  EAX, XMM0
End;

Function TruncMEM_SSE(Var Value: Single): Integer; Overload;
Asm
  // as written, fatest version
  CVTTSS2SI  EAX, [Value]
End;

Function TruncMEM_SSE(Var Value: Double): Integer; Overload;
Asm
  // as written, fatest version
  CVTTSD2SI  EAX, [Value]
End; 
```

对于 Floor, Ceil，分别使用 *TruncMEM_SSE(value)* 和*RoundSSE(value + 0.5)*。这些功能将为您带来 20% 的性能增益。它已经在循环和实际程序中进行了测试（填充了内存缓存/填充了指令缓存，因此可以将其视为真实测试）。

# javascript - 如何将从 js 函数返回的数据包含到 jsf / primefaces 同一页面上的确认对话框中

> ID：12782656
> 
> 赞同：0
> 
> 时间：2012-10-08T13:22:16.507
> 
> 标签：javascript, jsf, primefaces

> **可能重复：**
> [使用 primefaces 确认对话框组件显示来自托管 bean 的消息](https://stackoverflow.com/questions/12568162/displaying-a-message-from-managed-bean-with-primefaces-confirmation-dialog-compo)

设置：jsf 2 和 primefaces。

我的 xhtml 页面包含一个带有图形的画布。用户可以点击图形的某个区域，这会调用一个js函数，该函数返回一个特定于该区域的字符串，我们称之为“textFromClickedRegion”。此字符串存储在 inputHidden 字段中。

javascript 中的下一行将包含 inputhidden 字段的表单提交给 bean，并打开一个 confirmDialog（在 primefaces 中），其标题应由 bean 中的字符串自定义。

问题：对话框打开，但字符串永远不会获得 bean 的值（只是 textFromClickedRegion）。

js脚本：

```
textFromClickedRegion = region.getText();
document.getElementById('formId:nameClicked').value = textFromClickedRegion;
document.getElementById('formId:submitNameClicked').click(); 
```

xhtml：

```
<h:form id="formId">
    <h:inputHidden id="nameClicked" value="#{reportBean.nameClicked}"/>
    <p:commandButton id="submitNameClicked" type="button" process="@form" onclick="cd.show();"/>
</h:form>

<p:confirmDialog id ="dialogBox" message="#{reportBean.nameClicked}, are you sure about destroying the world?"
                         header="Initiating destroy process" severity="alert"
                         widgetVar="cd">
    <p:commandButton value="Yes Sure" oncomplete="confirmation.hide();"/>
    <p:commandButton value="Not Yet" onclick="confirmation.hide();" type="button" />
</p:confirmDialog> 
```

如何让我的 confirmDialog 显示 js 函数返回的字符串？

[注意：您会认识到以上内容是 Primefaces 手册和[BalusC](http://balusc.blogspot.nl/2009/05/javajspjsf-and-javascript.html)关于客户端和服务器之间的通信以及 jsf / js 之间的通信的帖子的混合 - 感谢他]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:27:27.080

这是一个工作示例：

```
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class Bean {

    private String value;

    @PostConstruct
    public void postConstruct() {
        value = "SERVER SIDE VALUE";
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

```
<h:head>
    <script>
        function updateElementValue(id,value){
            document.getElementById(id).value = value;
        }
    </script>
</h:head>

<h:body>

    <h:form id="form" prependId="false">

        <p:commandButton value="UPDATE CLIENT SIDE VALUE OF INPUT-HIDDEN"
                         onclick="updateElementValue('nameInputHiddenId',
                                                     'CLIENT SIDE VALUE');
                                                      return false;"/>
        <p:commandButton value="UPDATE SERVER SIDE VALUE OF INPUT-HIDDEN" 
                         process="@form" 
                         update="dialogId" 
                         oncomplete="dialogWidgetVar.show();" />

        <h:inputHidden id="nameInputHiddenId" value="#{bean.value}" />

        <p:dialog id="dialogId" widgetVar="dialogWidgetVar">
            <h:outputText id="nameOutputTextId" value="#{bean.value}" />
            <p:commandButton value="Yes" onclick="dialogWidgetVar.hide();" />
            <p:commandButton value="No" onclick="dialogWidgetVar.hide();"/>
        </p:dialog>

    </h:form>

</h:body> 
```

# javascript - js 字符串除以数组

> ID：12782659
> 
> 赞同：0
> 
> 时间：2012-10-08T13:22:32.297
> 
> 标签：javascript

我想将一个 JavaScript 字符串分成一个数组，这样：

```
"emad566" 
```

变成这样：

```
["e","m","a","d","5","6","6"] 
```

我也想把它反转成这样：

```
["6","6","5","d","a","m","e"] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:23:08.157

使用[`.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)和[`.reverse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reverse)。

```
var arr =  mystring.split("").reverse(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:25:12.210

```
var str = "emad566"
arr = str.split('').reverse() 
```

然后 arr 是`["6", "6", "5", "d", "a", "m", "e"]`

# multithreading - pthread 应用程序中可能的竞争条件（无法检测到）

> ID：12782662
> 
> 赞同：0
> 
> 时间：2012-10-08T13:22:43.263
> 
> 标签：multithreading, pthreads, valgrind, race-condition

这是我的 pthread 代码问题。当我运行以下命令时：

```
 ./run 1
 ./run 2
 ./run 4 
```

前两个命令（一个线程和两个线程）生成相同的输出。但是，对于 4 个线程（第三个命令），我看到了不同的输出。

现在当我运行以下命令时

```
 valgrind --tool=helgrind ./run 1
 valgrind --tool=helgrind ./run 2
 valgrind --tool=helgrind ./run 4 
```

它们产生相同的输出。输出值是正确的。

我该如何进一步调查？

代码看起来像

```
int main(int argc,char *argv[])
{
  // Barrier initialization
  if(pthread_barrier_init(&barr, NULL, threads)) {
    printf("Could not create a barrier\n");
    return -1;
  }
  int t;
  for(t = 0; t < threads; ++t) {
    printf("In main: creating thread %ld\n", t);
    if(pthread_create(&td[t], NULL, &foo, (void*)t)) {
      printf("Could not create thread %d\n", t);
      return -1;
    }
  }
  ...
}

void * foo(void *threadid)
{
  long tid = (long)threadid;
  for ( i = (tid*n/threads)+1; i <= (tid+1)*n/threads; i++ ) {
    printf( "Thread %d, i=%d\n", tid, i );
    for(largest = i, j = i+1; j <= n; j++) {
      if(abs( a[j][i] ) > abs( a[largest][i] ))
         largest = j;
    }
    for(k = i; k <= n+1; k++)
      SWAP_DOUBLE( a[largest][k], a[i][k]);
    for( j = i+1; j <= n; j++) {
      for( k = n+1; k >= i; k--)
         a[j][k] = a[j][k]-a[i][k]*a[j][i]/a[i][i];
    }
  }
  int rc = pthread_barrier_wait(&barr);
  if(rc != 0 && rc != PTHREAD_BARRIER_SERIAL_THREAD) {
    printf("Could not wait on barrier\n");
    exit(-1);
  }
  printf("after barrier\n");
  ...
} 
```

`i`主循环（在中迭代`foo()`）除以线程数。假设所有变量都已正确定义，因为正如我所说，1 和 2 线程没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:38:05.787

我不完全确定发生了什么，因为你还没有给出一个完整的可编译程序来试验，但很明显，每个线程都在读取/写入`a`它没有分配给它的部分，所以你到处都有比赛条件。您正在交换部分，`a`因此我不确定您是否可以按原样并行化该算法。

# android - Android TextView.SetText NullPointer 异常

> ID：12782668
> 
> 赞同：0
> 
> 时间：2012-10-08T13:22:53.250
> 
> 标签：android, textview, settext

我有两个活动，活动一有引用活动二的按钮和其中的方法。我正在尝试使用 TextView.SetText 在屏幕上放置一些东西，但不断收到 NullPointerException。

活动二：

```
public class SomeActivity extends Activity {
TextView textview ;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.some_activity);

    textview = (TextView) findViewById( R.id.textview );
    spill("Some text");

}
public void spill(String s){
    textview.setText(s);
}

public void methodCalledFromActivityOne(){
    System.out.println("Works");
    spill("Why Doesn't this work?");
} 
```

XML 有这个：

```
<TextView
    android:id="@+id/textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    tools:context=".SomeActivity" /> 
```

我是 Android 新手，非常感谢所有/任何帮助。

编辑： XML 的名称很好，只有当我在调用 methodCalledFromActivityOne() 的活动 1 中按下按钮 1 时才会发生错误。这是我从 LogCat 得到的： 原因：java.lang.NullPointerException at android.app.Activity.findViewById at data.storage.SomeActivity.spill at data.storage.SomeActivity.methodCalledFromActivityOne at data.storage.ActivityOne.button1clicked

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:37:27.523

只有在调用 onCreate() 时才会初始化活动 2 中的 textview。只有当该活动进入电话视图时，才会调用活动 2 的 onCreate()。您不能从当前活动设置另一个活动的视图值。这是个坏主意。如果您希望这些值到达活动 2，则将其发送到意图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:32:16.120

如果您 `methodCalledFromActivityOne()` 从另一个活动调用方法，请确保您也已`TextView`在该活动中创建了属性。否则它将无法正常工作。

# python - python和C之间的二进制I/O

> ID：12782671
> 
> 赞同：1
> 
> 时间：2012-10-08T13:23:05.060
> 
> 标签：python, c

我正在尝试使用 Python 将用 C 编写的二进制文件与 HDF5 文件进行转换。要读取二进制文件，Python 的工作方式如下：

```
pos=np.fromfile(f, count=npt*3, dtype='f4').reshape((npt, 3)) 
```

要编写我尝试过的相同的东西，但没有成功，array.tofile() 现在我正在尝试使用这样的 ctypes（将网上找到的不同答案拼接在一起）：

```
import ctypes as c

print "Loading C libraries with ctype"
libc = c.CDLL("libc.so.6") # Linux

# fopen()
libc.fopen.restype = c.c_void_p
def errcheck(res, func, args):
    if not res: raise IOError
    return res

libc.fopen.errcheck = errcheck
# errcheck() could be similarly defined for `fwrite`, `fclose` 

c_int_p = c.POINTER(c.c_int)
c_float_p = c.POINTER(c.c_float)
c_double_p = c.POINTER(c.c_double)

def c_write(data, f, numpy_type, c_type_p, nbyte, count):
    data = data.astype(numpy_type)
    data_p = data.ctypes.data_as(c_type_p)
    nitems  = libc.fwrite(data_p, nbyte, count, f)
    if nitems != data.size: # not all data were written
        print "Not all data were written, exit..."
        sys.exit()

c_write(pos, f, np.int32, c_int_p, 4, npart.size) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:25:23.373

您可能应该查看该`[struct](http://docs.python.org/library/struct.html)`模块，它非常适合在最低字节/字节级别打包和解包数据。

# c# - 重构 .NET 代码以符合编码标准

> ID：12782672
> 
> 赞同：5
> 
> 时间：2012-10-08T13:23:06.370
> 
> 标签：c#, .net, vb.net, refactoring, naming-conventions

我们有一个代码库（VB.NET 和 C#）和一个新的编码标准。您是否有可以根据新编码标准在项目中移动并重命名参数/字段/属性/方法等的工具的建议。

例如，可能需要将参数更改为驼峰式等。人们会想象参数和本地字段/变量由于其本地范围而更容易重命名。我查看了 ReSharper，但没有发现它可以执行此任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:24:08.373

听起来像是带有[StyleCop](http://stylecop.codeplex.com/)插件的[ReSharper的工作。](http://www.jetbrains.com/resharper/)这是一个例子：

参数名称 camelCasing ：

![在此处输入图像描述](../Images/6eaa6da8fc86f68b11dc9d2dfd34b295.png)

字段重命名：

![在此处输入图像描述](../Images/7e3866f13eb8e4b965a8a542eb12d78e.png)

解决方案清理：

![在此处输入图像描述](../Images/618396d16cd65995f7ac6425d58c20db.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:26:54.943

想到了几个选项：

*   [锐器](http://www.jetbrains.com/resharper/)
*   [正义代码](http://www.telerik.com/products/justcode.aspx)

根据 Visual Studio 的版本，您可以在其中内置 StyleCop，并且您可以在 TFS 中强制执行签入规则，即代码本身必须符合准则才能签入某些内容。

别的东西：你为什么突然改变你的编码标准，并且显然要通过所有现有/生产代码来改变它。我可以想象您想在需要构建或刚刚开始的新应用程序中强制执行新准则。

# sql - 如果相等，如何按列排序，按另一个排序

> ID：12782676
> 
> 赞同：11
> 
> 时间：2012-10-08T13:23:19.130
> 
> 标签：sql

真的我不知道该怎么说这个问题，但是举个例子，每个人都会清楚，我从 MYSQL 数据库中检索到的数据按列之一排序，我的问题是，如果该列中的这些值之一相等，我需要使用另一列来设置谁首先显示。

```
col1 - col2
10 - 100
20 - 120
20 - 140
30 - 90 
```

请参阅此处两次提到的值 20，因此我需要使用 MYSQL Query 在 20 和 120 之前显示 20 和 140。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T13:25:15.270

```
SELECT
    *
FROM
    MyTable
ORDER BY 
    Col1,
    Col2 DESC 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T13:26:20.130

`order by`您可以在子句中指定多个列：

```
select * from table order by col1, col2; 
```

这将按 排序`col1`，然后按`col2`何时排序`col1`。您还可以为每列分别指定升序和降序：

```
select * from table order by col1 asc, col2 desc; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T13:25:28.247

您可以在`order by`子句中添加多个列。

```
select * from your_table
order by col1, col2 desc 
```

结果将按第一列排序，如果相等则按下一列排序，依此类推

# c# - TFS API 是否需要 Visual Studio？

> ID：12782679
> 
> 赞同：2
> 
> 时间：2012-10-08T13:23:34.007
> 
> 标签：c#, .net, tfs, registry, tfs-sdk

我正在尝试使用 C# 使用 TFS API 签入、签出、GetLatest 等。对于开发 PC 和管理员用户来说，这可以完美地工作。但是，在未安装 VS 2010 且 TFS 用户是非管理员的专用机器上，这不起作用。我收到以下错误：*

> 拒绝访问注册表项“HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0”。2012-10-08 14:58:30 [...] 错误：在 Microsoft.Win32.RegistryKey.Win32Error(Int32 errorCode, String str)
> 在 Microsoft.Win32.RegistryKey.CreateSubKey(String subkey, RegistryKeyPermissionCheck permissionCheck, RegistrySecurity registrySecurity)在 Microsoft.TeamFoundation.Client.UIHost.get_UserRegistryRoot() 在 Microsoft.TeamFoundation.VersionControl.Client.Workstation.get_GetLatestOnCheckout()

*

我想知道这是否与管理员权限有关？TFS“用户”实际上是在该帐户下运行的网站，因此它是并且不应该是管理员。

我尝试在同一台机器上使用我自己的凭据运行测试控制台应用程序，它可以工作。所以这是一个凭证。

任何人都可以帮忙吗？使网站用户帐户成为管理员就足够了吗？

**并且：在创建本地工作空间时，它想访问注册表什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:35:46.547

当您在应用程序池标识下运行网站但应用程序池标识设置为不加载用户配置文件（因此没有 HKCU 注册表访问权限）时，我们已经看到了这种错误。

在 IIS 中，在高级设置下，设置“加载用户配置文件”=True

请参阅[http://geekswithblogs.net/ProjectLawson/archive/2009/05/05/iis-system.web.aspnethostingpermission-exception-on-windows-7-rc.aspx](http://geekswithblogs.net/ProjectLawson/archive/2009/05/05/iis-system.web.aspnethostingpermission-exception-on-windows-7-rc.aspx)

..了解更多信息。

# c# - 使用 UsingConstructor 注册AssemblyTypes

> ID：12782680
> 
> 赞同：3
> 
> 时间：2012-10-08T13:23:40.847
> 
> 标签：c#, autofac

我想注册具有多个构造函数的程序集类型自动装配选择了错误的构造函数并希望像在 RegisterType 中那样指定它

```
builder.RegisterType(typeof(IController))
    .UsingConstructor(typeof(IUnitOfWork)); 
```

但是当我这样做时

```
builder.RegisterAssemblyTypes(typeof(IController).Assembly)
    .UsingConstructor(typeof(IUnitOfWork)); 
```

我明白了

“'System.Object' 类型上不存在匹配的构造函数。”

我认为这是因为装配类型比我想象的要复杂一些，但问题仍然存在

我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-19T21:09:23.777

通过做

```
builder.RegisterType(typeof(IController))
       .UsingConstructor(typeof(IUnitOfWork)); 
```

*您在Autofac*容器中注册 IController并告诉它应该使用带`IUnitOfWork`参数的构造函数。

该`UsingConstructor`方法不起作用，`RegisterAssemblyTypes`但在您的情况下，您可以使用`FindConstructorWith`方法。

```
builder.RegisterAssemblyTypes(typeof(IController).Assembly)
       .FindConstructorsWith(t => new[] { 
           t.GetConstructor(new[] { typeof(IUnitOfWork) }) 
       })
       .As<IController>(); 
```

# javascript - 如何让 Jquery 在页面的某个区域展开 div？

> ID：12782685
> 
> 赞同：0
> 
> 时间：2012-10-08T13:24:07.183
> 
> 标签：javascript, jquery, html, css

仅需要高度根据来自此外包数据的信息量来展开或折叠。这是我的 HTML 代码。

```
 <div style="width: 775px; position: relative; left: 15px; top: -745px; height: 250px; border: #CCC; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-width: 1px;"></div>

  <div style="width: 760px; position: relative; height: 17px; background-color: #Db0000; layer-background-color: #Db0000; border: 1px none #000000; color: #FFF; font-size: 12px; padding-left: 16px; padding-top: 4px;"> Promero<span style="font-weight: bold">NEWS</span></div>
<div style="width: 776px; position: relative; height: 2.5px; background-color: #Db0000; layer-background-color: #Db0000; top: 2px;"></div>

<div style="position: relative; width: 775px;">
  <p id="p1" style="color: #E23030; font-style: italic; font-weight: bold; font-size: 16px; font-family: arial, 'Trebuchet MS';">News Release</p>
  <p>July 16, 2012 -<em id="em"><a href="#">Salesforce CRM users connect to Promero's hosted call center software, Oracle Contact Center Anywhere</a></em>
  <p id="p2">March 6, 2012 -<em id="em"><a href="#">Promero offers complete Call Center Solution-Workforce Management-Complex IVR Scripting-CRM</a></em>
  <p>March 1, 2012 -<em id="em"><a href="#">Promero offers Oracle #1 Call Center Software only $59 per User </a></em>
  <p>February 24, 2012 -<em id="em"><a href="#">Promero announces Complex IVR Solution for Oracle CRM</a></em>
  <p>January 15, 2012 - <em id="em"><a href="#">Promero offers customized Dashboards for Oracle Contact Center Anywhere</a></em>
  <p>December 14, 2011 - <em id="em"><a href="#">Promero adds RiverStar CE Suite to Oracle Call Center Cloud Offering</a></em> 
</div> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:56:03.787

对于这个问题，你应该使用这个 CSS 代码

```
#x{
   min-height:50px;
   height:auto;
} 
```

此样式代码导致按页面新闻最小高度大小拟合 div 高度是示例，您可以根据您的数据最好的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:31:32.410

我不理解您的问题，但我认为您希望使用 jquery 在页面的一部分中加载新闻以处理此问题，您可以使用此代码

```
$("#YourElementWillLoadingNewsHere").load("YourUrl from ROOT"); 
```

此代码用于将 jquery 加载到一个元素中，希望对您有所帮助

# php - 获取 isbn 数组并使用 amazon mws getmatchingproductforid 将它们解析为正确的格式

> ID：12782692
> 
> 赞同：1
> 
> 时间：2012-10-08T13:24:28.787
> 
> 标签：php, amazon-web-services, amazon-mws

我正在尝试使用亚马逊 MWS GetMatchingProductForId API，但我一直在尝试获取多个 isbn 的信息。格式需要采用以下形式：IdList.Id.1=isbn[x]，其中 isbn[x] 是我的数组。我需要能够将它们列在 20 个列表中（即 IdList.Id.1=, IdList.Id.2= ...IdList.Id.20= ）。我以为我可以像这样使用 implode($isbn) ：

```
$count=0;
function ProductId_xml($searchTerm) {

$params = array(
    'AWSAccessKeyId' => AWS_ACCESS_KEY_ID,
    'Action' => "GetMatchingProductForId",
    'SellerId' => MERCHANT_ID,
    'SignatureMethod' => "HmacSHA256",
    'SignatureVersion' => "2",
    'Timestamp'=> gmdate("Y-m-d\TH:i:s.\\0\\0\\0\\Z", time()),
    'Version'=> "2011-10-01",
    'MarketplaceId' => MARKETPLACE_ID,
    'IdType' => "ISBN",
    );

$id=array(explode(',',$searchTerm));
foreach ($id as $newId)
{
$count .= $count +1;    
    $params += array('IdList.Id.'.$count => $newId);

} //end of foreach      
// Sort the URL parameters
$url_parts = array();
foreach(array_keys($params) as $key)
    $url_parts[] = $key . "=" . str_replace('%7E', '~', rawurlencode($params[$key]));
sort($url_parts);

// Construct the string to sign
$url_string = implode("&", $url_parts);
$string_to_sign = "GET\nmws.amazonservices.com\n/Products/2011-10-01\n" . $url_string;

// Sign the request
$signature = hash_hmac("sha256", $string_to_sign, AWS_SECRET_ACCESS_KEY, TRUE);

// Base64 encode the signature and make it URL safe
$signature = urlencode(base64_encode($signature));

$url = "https://mws.amazonservices.com/Products/2011-10-01" . '?' . $url_string . "&Signature=" . $signature;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
$response = curl_exec($ch);

    $parsed_xml = simplexml_load_string($response);

return ($parsed_xml);
}
}
?> 
```

$searchterm 是我的 isbn 数字数组，但这仅将它们列为 isbn 字符串。我知道如果我一次只使用一个 isbn 就可以了，但我需要以 20 个为一组运行它们以加快我的进程。我不知道从这里去哪里。任何帮助将不胜感激。编辑：我已经更新了函数，以便它将 20 个 isbn 的批次包含在 $params 中，但我不确定我添加它的方式是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:32:33.423

```
function ProductId_xml($searchTerm) {
$count=0;
$id=array(explode(',',$searchTerm));
foreach ($id as $newId)
{
$count .= $count +1;
$params = array(
'AWSAccessKeyId' => AWS_ACCESS_KEY_ID,
'Action' => "GetMatchingProductForId",
'SellerId' => MERCHANT_ID,
'SignatureMethod' => "HmacSHA256",
'SignatureVersion' => "2",
'Timestamp'=> gmdate("Y-m-d\TH:i:s.\\0\\0\\0\\Z", time()),
'Version'=> "2011-10-01",
'MarketplaceId' => MARKETPLACE_ID,
'IdType' => "ISBN",
'IdList.Id.'.$count => $newId,
);
run query here;
} 
```

尚未测试，但这应该可以工作，它会将 $searchTerm 用逗号分解为一个数组，然后遍历它们。我不知道 Amazon API 这将通过查询一次运行它们，但至少它允许您自动化该过程。

# php - 在子文件夹中安装 Laravel

> ID：12782699
> 
> 赞同：6
> 
> 时间：2012-10-08T13:24:57.980
> 
> 标签：php, apache, laravel

我找不到任何有关在子文件夹中执行 Laravel 安装的信息。

甚至有可能做到这一点吗？还是在根级别安装 Laravel 要求？

我的托管服务提供商不允许我创建 VirtualHosts，我需要安装一个 Laravel 应用程序以及当前的应用程序......

UDPATE：原来这主要是一个 .htaccess 问题：

```
<IfModule mod_rewrite.c> 
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php/$1 [L] 
</IfModule> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T14:10:27.143

首先，考虑到这个答案只是为了让它工作，我不确定这可能对安全性产生任何影响，因为每个文件夹都在您网站的公共部分。

其次，我只是使用准系统 laravel 安装进行了尝试，所以我不确定这是否会在以后的开发中产生影响（我的猜测不是，但你永远不知道）。

1）复制`public`根laravel文件夹（这是您的子文件夹）中文件夹的所有内容

2）您现在可以删除空`public`文件夹

3) 编辑`index.php`和更改

```
// --------------------------------------------------------------
// Set the core Laravel path constants.
// --------------------------------------------------------------
require '../paths.php'; 
```

到

```
// --------------------------------------------------------------
// Set the core Laravel path constants.
// --------------------------------------------------------------
require './paths.php'; 
```

4）编辑paths.php并更改

```
// --------------------------------------------------------------
// The path to the public directory.
// --------------------------------------------------------------
$paths['public'] = 'public'; 
```

到

```
// --------------------------------------------------------------
// The path to the public directory.
// --------------------------------------------------------------
$paths['public'] = '.'; 
```

5) 编辑 laravel 文件夹中的 .htaccess 文件，使其不再重定向到 public

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

# php - 仅在页面加载和表单提交期间执行存储过程

> ID：12782707
> 
> 赞同：1
> 
> 时间：2012-10-08T13:25:15.083
> 
> 标签：php, mysql

这是场景：我只想在两个事件上从 PHP 页面执行 MySQL 存储过程：

1.  第一次加载页面时执行/调用sp
2.  每次通过 POST 提交表单后，它将再次执行

但如果页面被刷新（通过单击浏览器中的刷新按钮），它将不会执行。

该页面仅对登录用户可用。

有人可以为这种情况提出可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:33:56.863

我通过保存一些 SESSION 变量然后在刷新页面时检查这些变量来解决这个问题。

# php - 在抛出异常时释放 MySQL 结果并关闭连接

> ID：12782711
> 
> 赞同：2
> 
> 时间：2012-10-08T13:25:24.007
> 
> 标签：php, mysql, exception

在 throw 之前释放 MySQL 结果`mysql_free_result`并关闭 MySQL 连接是否重要？还是 PHP 会自动执行？`mysql_close``Exception`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:30:03.623

根据[文档](http://www.php.net/manual/en/mysqli-result.free.php)，您必须始终使用释放结果`mysqli_free_result`

至于使用 关闭连接`mysql_close`，[这里](https://stackoverflow.com/questions/2058019/how-often-should-i-close-database-connections)有一个较早的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:40:58.330

如果您没有明确关闭连接，PHP 将在脚本结束时自动关闭连接。

请参阅此处的“说明”：http: [//php.net/manual/en/function.mysql-close.php](http://php.net/manual/en/function.mysql-close.php)

请注意，对于持久数据库连接，情况并非如此。在这里阅读：http: [//php.net/manual/en/features.persistent-connections.php](http://php.net/manual/en/features.persistent-connections.php)

# ios - 当 mapView 请求用户权限时，使用 iOS 访问他们的位置

> ID：12782713
> 
> 赞同：4
> 
> 时间：2012-10-08T13:25:24.530
> 
> 标签：ios, monodevelop, core-location

我使用 MapView 开发了一个应用程序 - 当应用程序启动时，它会要求用户允许访问/使用他们的位置，而无需我进行任何编码。这是否足以获得许可，还是我还应该专门询问用户并提供访问理由？如果我没有特别提出请求并允许 MapView 代表我提出请求，Apple 会在提交时拒绝应用程序吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T15:27:17.687

您不需要向用户征求许可，iOS 会自动为您完成。

您应该在 CLLocationManager 对象中设置[目的](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW30)字符串属性，以便当系统询问时它也可以告诉用户您为什么想要他们的位置。

```
locationManager.purpose = @"Location needed to show zombies that are nearby."; 
```

在调用*之前*设置此属性，`startUpdatingLocation`以便在系统警报中向用户显示请求使用位置的权限。

在委托中，您可以实现方法[locationManager:didChangeAuthorizationStatus:](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidChangeAuthorizationStatus%3a)以了解用户是否允许核心位置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-14T19:39:03.913

从 iOS 6 开始，“目的”消息的正确位置在 Info plist 文件中。

NSLocationUsageDescription 属性应该与要显示给用户的消息一起设置

Apple 提供了很好的文档： [https ://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:28:45.343

您不需要告诉用户为什么要访问他们的位置，尤其是在应用程序基于位置和映射的情况下。话虽如此，很高兴在权限弹出窗口出现之前告诉用户您将如何处理他们的数据，以便希望更多用户接受。

# javascript - jQuery datepicker - 使用 dateFormat 时默认日期为选定日期

> ID：12782718
> 
> 赞同：0
> 
> 时间：2012-10-08T13:25:39.420
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我有一个 jquery datepicker，它根据选择的日期选择周数和日期范围。

```
$("input").datepicker({
    onSelect: function(dateText, inst) {
        $(this).val("Week Number " + $.datepicker.iso8601Week(new Date(dateText)) + " • " + $.datepicker.formatDate('d M', new Date(dateText)) + " - " + $.datepicker.formatDate('d M yy', new Date(new Date(dateText).getTime() + 6*24*60*60*1000)));
    }
}); 
```

问题是，通过使用此方法格式化日期，它可以防止日期选择器在您再次单击输入时默认为所选日期。它默认为当前日期。

由于我正在使用其他一些代码，我必须使用此方法（我避免显示此方法，因为它很长且与此问题无关）。

有什么想法可以让它默认为之前选择的日期吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:33:07.557

您始终可以“手动”设置日期，调用：

```
.datepicker("setDate", defaultDate); 
```

方法。但在此之前，请查看您可以设置为日期选择器[的属性的浪费数量，也许其中一个可以解决您的问题。](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:38:22.057

您可以将日期选择器应用于其他一些文本字段，并且无论何时选择日期，您都可以修改您的文本字段内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:06:07.817

将以下行添加到将为`onSelect`事件调用的函数中

```
$.datepicker.setDefaults({"defaultDate":dateText}); 
```

见[http://jsfiddle.net/ELXGP/5/](http://jsfiddle.net/ELXGP/5/)

# java - 轴 1 能否在限制条件下工作

> ID：12782720
> 
> 赞同：0
> 
> 时间：2012-10-08T13:25:41.460
> 
> 标签：java, web-services, axis2, axis

我有一个在 Axis 2 中开发的 Web 服务。称为 EmployeeService。

EmployeeService.java

```
public class EmployeeService {

    public Employee getEmployee(Employee emp) {
        emp.getTeam().setTeamName("TeamName");
        return emp;
    }
} 
```

雇员.java

```
public class Employee {

    private String name;
    private int age;
    private String email;
    private Team team;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }
    public Team getTeam() {
        return team;
    }
    public void setTeam(Team team) {
        this.team = team;
    }
    @Override
    public String toString() {
        return "Employee [name=" + name + ", age=" + age + ", email=" + email
                + ", team=" + team + "]";
    }   
} 
```

团队.java

```
public class Team {

    private String businessUnitName;
    private String teamName;

    public String getBusinessUnitName() {
        return businessUnitName;
    }
    public void setBusinessUnitName(String businessUnitName) {
        this.businessUnitName = businessUnitName;
    }
    public String getTeamName() {
        return teamName;
    }
    public void setTeamName(String teamName) {
        this.teamName = teamName;
    }
    @Override
    public String toString() {
        return "Team [businessUnitName=" + businessUnitName + ", teamName="
                + teamName + "]";
    }

} 
```

对于 Team POJO 中的 teamName 字段，我在 WSDL 中添加了一个限制，并且我正在使用自定义 WSDL。

```
<simpleType name="teamNameType">
    <restriction base="string">
        <minLength value="0"/>
        <maxLength value="80"/>
    </restriction>
</simpleType> 
```

服务部署成功。

我正在使用 Axis 1 访问该服务。

```
EmployeeServiceLocator locator = new EmployeeServiceLocator();
EmployeeServicePortType endpoint = locator.getEmployeeServiceHttpSoap11Endpoint();
Employee emp = new Employee();
emp.setName( "SomeName" );
emp.setAge( new Integer( 21 ) );
emp.setEmail( "test@test.com" );
Team team = new Team();
team.setBusinessUnitName( "businessUnitName" );
emp.setTeam( team );
Employee ret = endpoint.getEmployee( emp );
TeamNameType resTeamName = ret.getTeam().getTeamName();

System.out.println( resTeamName.toString() ); 
```

从结果来看， resTeamName 没有任何函数来获取响应中的数据。

如果我将响应打印到控制台，我可以看到 TeamName 作为响应的一部分出现。

打印响应的代码。

```
Call call = ( ( org.apache.axis.client.Stub ) endpoint )._getCall();
SOAPEnvelope envelope = call.getResponseMessage().getSOAPEnvelope();
Document doc = envelope.getAsDocument();

Transformer trans = TransformerFactory.newInstance().newTransformer();
trans.setOutputProperty( OutputKeys.METHOD, "xml" );
trans.setOutputProperty( OutputKeys.INDENT, "yes" );
trans.setOutputProperty( "{http://xml.apache.org/xslt}indent-amount", Integer.toString( 2 ) );

StringWriter sw = new StringWriter();
StreamResult result = new StreamResult( sw );
DOMSource source = new DOMSource( doc );

trans.transform( source, result );
String xmlString = sw.toString();
System.out.println( xmlString ); 
```

打印的响应是

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <ns:getEmployeeResponse xmlns:ns="http://employee">
      <ns:return>
        <ns:age>21</ns:age>
        <ns:email>test@test.com</ns:email>
        <ns:name>SomeName</ns:name>
        <ns:team>
          <ns:businessUnitName>businessUnitName</ns:businessUnitName>
          <ns:teamName>TeamName</ns:teamName>
        </ns:team>
      </ns:return>
    </ns:getEmployeeResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

但是我找不到任何方法可以从 Web 服务的结果中访问 TeamName 数据。

如果我检查 TeamName 对象，那么我也看不到任何可以返回对象的字段。

[![](../Images/56e86e5932e42b80c0bc7a48bb5a6596.png "由 imgur.com 主办")](https://imgur.com/tmS1s)

我还分享了我的服务，以防有人需要尝试。

[https://dl.dropbox.com/u/27532041/employee.aar](https://dl.dropbox.com/u/27532041/employee.aar)

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:58:57.890

遇到了这个bug。 [https://issues.apache.org/jira/browse/AXIS-119](https://issues.apache.org/jira/browse/AXIS-119) 请参考 Tom Jordahl 的评论“此时 Axis 1.x 不支持这些限制。” 和“没有计划在 Axis 1.x 中支持这一点。Axis2 正在使用 XMLBeans，我相信它会生成代码来强制执行限制。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:53:26.047

您的 WSDL 基本上是不正确的。我查看了 AAR 文件中的 WSDL，`simpleType`定义及其后代没有正确的命名空间。在 Eclipse 中，只需右键单击 WSDL 文件并选择“验证”，然后更正报告的错误。一旦 WSDL 文件正确，Axis 1.x 应该能够生成允许您设置`teamName`属性的存根。但是（正如我在对 K Vikas Chandran 的评论中所解释的），Axis 1.x 不会强制执行`minLength`/`maxLength`限制方面。

# google-calendar-api - 在 iCalendar 提要的摘要字段中使用 HTML 代码

> ID：12782724
> 
> 赞同：1
> 
> 时间：2012-10-08T13:25:43.707
> 
> 标签：google-calendar-api, icalendar

我有这个简单的 ics 提要：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Remodel or Move//NONSGML v1.0//EN
X-WR-CALNAME:My Scheduler

BEGIN:VEVENT
UID:uid1@remodelormove.com
DTSTAMP:20121010T080000Z
DTSTART:20121010T080000Z
DTEND:20121010T090000Z
SUMMARY:Compile list of wants
END:VEVENT

END:VCALENDAR 
```

我想在摘要中插入一个 HTML 锚点，以便用户可以单击它并从 Google 日历（或 Outlook，...）发送到位于我网站上的网页，他们可以在其中编辑条目。

我追求的是这样的：

```
SUMMARY:Compile list of wants <a href="http://www.mywebsite.com/edit?id=923">edit</a> 
```

我尝试了，但是当我将 ics 提要导入 Google 日历时，链接没有显示。

我怎样才能实现我所追求的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:58:40.170

在摘要字段中重新生成 html - 我认为这在很大程度上取决于订阅 ics 提要的应用程序 - 许多人不会期望或处理 html。谷歌在我最后一次尝试时有点奇怪，它允许在创建事件时放入 html，但如果有人编辑它，它就会把它扔掉。不依赖 ics 文件中的 html 可能更安全。

当显示来自 ics 文件的事件时，某些应用程序（例如我的 wordpress ics 插件）会将找到的任何 http 链接转换为“可点击”链接。

仅供参考，有一个 url 字段[https://www.rfc-editor.org/rfc/rfc5545#section-3.8.4.6](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.4.6)。它旨在提供有关事件的详细信息。

顺便说一句，您的示例看起来应该是 VTODO 而不是 VEVENT ？ [https://www.rfc-editor.org/rfc/rfc5545#section-3.6.2](https://www.rfc-editor.org/rfc/rfc5545#section-3.6.2)

# c# - 用相机保存图像而不压缩图像

> ID：12782726
> 
> 赞同：0
> 
> 时间：2012-10-08T13:25:52.320
> 
> 标签：c#, android, camera

在我的应用程序中，我想用相机拍照并将它们保存在文件中。照片质量在我的应用程序中非常重要，所以当我压缩保存它时，图像质量会丢失。这是我的代码：

```
 protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)
    {
       base.OnActivityResult(requestCode, resultCode, data);
        FileOutputStream outStream = null;
       saveFullImage();
       if ((requestCode == TAKE_PICTURE))
       {

           if (data != null)
           {
               if (data.HasExtra("data"))
               { 
                   Bitmap pic = (Bitmap)data.Extras.Get("data");

                   System.IO.MemoryStream baos = new System.IO.MemoryStream();
                   pic.Compress(Bitmap.CompressFormat.Png, 100, baos);
                   byte[] byte_img_data = baos.ToArray();
                   outStream = new FileOutputStream(outputFileUri.Path);

                   outStream.Write(byte_img_data);
                   outStream.Close();

               }
           }
       }
    } 
```

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:28:46.603

```
pic.Save("yourfilenamehere.png", ImageFormat.Png); 
```

如果你知道你在一个文件上写就足够了（检查 Image 类 Save 方法是否有其他重载）。

这种压缩是无损的，因此您不应该以这种方式丢失任何细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:12:23.377

谢谢你们。

使用以下代码不会改变图片细节：

```
var mediaScanIntent = new Intent(Intent.ActionMediaScannerScanFile);
var contentUri = Android.Net.Uri.FromFile(_file);
mediaScanIntent.SetData(contentUri);
this.SendBroadcast(mediaScanIntent); 
```

# php - 如何在 php 中创建 wordpress 永久链接

> ID：12782731
> 
> 赞同：0
> 
> 时间：2012-10-08T13:26:03.883
> 
> 标签：php, wordpress

我有一个 php 页面，我在其中从 db 获取最新的博客文章，如下所示

```
$result = mysql_query("SELECT * FROM wp_posts ORDER BY ID DESC LIMIT 3")ordie(mysql_error()); 
```

现在从这里我想重定向到实际的 wordpress 帖子

`<a href="#" target="_blank"><?php echo $row->post_title; ?></a>`

我如何获得永久链接？有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:32:16.260

Wordpress 会生成您的 URL，而不是存储它们，

试试[Dave Heavy Industries的这个查询](http://wp.daveheavyindustries.com/2011/02/08/wordpress-permalink-via-sql/)

```
SELECT wpp.post_title, wpp.guid, wpp.post_date, CONCAT(wpo_su.option_value, REPLACE( REPLACE( REPLACE( REPLACE(wpo.option_value,'%year%',date_format(wpp.post_date,'%Y')) ,'%monthnum%',date_format(wpp.post_date,'%m')) ,'%day%',date_format(wpp.post_date,'%d')) ,'%postname%',wpp.post_name ) ) as permalink FROM wp_posts wpp INNER JOIN wp_options wpo on wpo.option_name='permalink_structure' and wpo.blog_id=0 INNER JOIN wp_options wpo_su on wpo_su.option_name='siteurl' and wpo_su.blog_id=wpo.blog_id WHERE wpp.post_type = 'post' AND wpp.post_status = 'publish' ORDER BY wpp.post_date DESC 
```

然后你可以得到这样的链接

```
<a href="<?php echo $row->permalink; ?>" target="_blank"><?php echo $row->post_title; ?></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:29:23.570

我不知道 WP 表是什么样子（那里可能有某种永久链接），但是像`yoursite.com/?p=XX`XX 是帖子 ID 的东西应该可以工作。

# objective-c - 没有可见的dismissModalViewControllerAnimated界面：完成

> ID：12782742
> 
> 赞同：2
> 
> 时间：2012-10-08T13:26:50.487
> 
> 标签：objective-c, uiviewcontroller, ios6

我有一个使用方法的 UIViewController 派生类`dismissModalViewControllerAnimated:(BOOL)`，如下所示：

```
[self dismissModalViewControllerAnimated:YES]; 
```

由于编译器抱怨说此方法已被弃用，因此我已将其更改为建议的替换 , `dismissModalViewControllerAnimated:completion:`，如下所示：

```
[self dismissModalViewControllerAnimated:YES completion:nil]; 
```

但是现在，那行代码中出现错误，说“没有可见的@interface for**声明选择器`dismissModalViewControllerAnimated:completion:`**

 **我看不出有什么问题，因为这两种方法都是在**UIViewController.h**中定义的，而我的类派生自该类。

我究竟做错了什么？

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:03:12.187

这是我的错。新方法是

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

不是

```
[self dismiss**Modal**ViewControllerAnimated:YES completion:nil]; 
```

谢谢大家，请原谅我的愚蠢问题。**

# windows-services - 无需重新发明轮子即可部署 Microsoft 堆栈应用程序

> ID：12782748
> 
> 赞同：3
> 
> 时间：2012-10-08T13:27:15.957
> 
> 标签：windows-services, windows-server-2008, web-application-project, web-farm

我们需要将以下三样东西部署到 Windows Server 2008 场：

*   ASP.NET MVC 4 Web 应用程序 (x3)
*   .NET Windows 服务 (x2)

我继承了部署过程并想重写它。

## 网络应用程序

当我在 Visual Studio 2012 中时，我有一个不错的新发布向导来部署 Web 应用程序。这可以以某种方式使用吗？还是无论如何都被利用了？

## 视窗服务

Windows 服务是 Windows 服务，因此将它们部署到 Windows 服务器应该很简单。正确的？！

然后是如何处理我们正在部署到 Windows Server 2008 机器群的事实*，*而不仅仅是一台机器。

与我交谈的每个人似乎都必须重新发明一个新的、自定义的和复杂的流程，该流程难以维护且延展性不强，通常使用带有各种手动编辑的各种操作等的自定义 XML 文件。甚至 psexec 也参与了很多 - 这对我来说是错误的。

鉴于至少对于服务和 Web 应用程序，我们*没有做任何特别*的事情，拥有一个好的、潜在的 VCS 可提交发布过程的最简单方法是什么。

抱歉，如果这是一个荒谬的问题，如果是，请帮助我理解为什么！

不过，要成为这里的问题，它需要是可回答的。总结一下：将 Web 应用程序和 Windows 服务部署到 Windows Server 2008 机器群的最简单/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T03:13:56.017

执行此操作的现代方法是在使用 WinRM 进行通信和身份验证的 WinRS（远程电源外壳）上构建您的部署。不过，如果你想走出黄金之路，WinRM 是一个需要配置的学习曲线，正如我最近发现的那样 :)。

您需要的几乎所有配置服务（firewall=>netsh、Remote management=winrm、services=>sc、Windows features=>dism、Event Collection=>winecutil、gpupdate 等）都可以作为命令行工具使用，通常也可以直接使用在 PowerShell 中受支持，因此您无需为 API 编写任何代码。

# awk - 将 2 个文件与基于 AWK 的最后一列合并

> ID：12782751
> 
> 赞同：1
> 
> 时间：2012-10-08T13:27:37.417
> 
> 标签：awk

我有两个文件

```
file1
-------------------------------
1      a      t      p      b
2      b      c      f      a
3      d      y      u      b
2      b      c      f      a
2      u      g      t      c
2      b      j      h      c

file2
--------------------------------
1   a   b
2   p   c
3   n   a
4   4   a 
```

我想使用 awk 组合这两个基于最后一列的文件（file1 的第 5 列和 file2 的第 3 列）

```
result
----------------------------------------------
1      a      t      p     1   a   b
2      b      c      f     3   n   a
2      b      c      f     4   4   a
3      d      y      u     1   a   b
2      b      c      f     3   n   a
2      b      c      f     4   4   a
2      u      g      t     2   p   c
2      b      j      h     2   p   c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:49:55.990

一开始，我没有看到file2中重复的“a”，我以为可以通过正常的数组匹配来解决。...现在它可以工作了。

awk 在线用户：

```
 awk 'NR==FNR{a[$3"_"NR]=$0;next;}{for(x in a){if(x~"^"$5) print $1,$2,$3,$4,a[x];}}' f2.txt f1.txt 
```

**测试**

```
kent$  head *.txt  
==> f1.txt <==
1      a      t      p      b
2      b      c      f      a
3      d      y      u      b
2      b      c      f      a
2      u      g      t      c
2      b      j      h      c

==> f2.txt <==
1   a   b
2   p   c
3   n   a
4   4   a

kent$  awk 'NR==FNR{a[$3"_"NR]=$0;next;}{for(x in a){if(x~"^"$5) print $1,$2,$3,$4,a[x];}}' f2.txt f1.txt 
1 a t p 1   a   b
2 b c f 3   n   a
2 b c f 4   4   a
3 d y u 1   a   b
2 b c f 3   n   a
2 b c f 4   4   a
2 u g t 2   p   c
2 b j h 2   p   c 
```

请注意，输出格式并不性感，但如果将其通过管道传输到`column -t`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:02:57.457

假设文件没有标题的其他方式：

```
awk '
    FNR == NR {
        f2[ $NF ] = f2[ $NF ] ? f2[ $NF ] SUBSEP $0 : $0;
        next;
    }

    FNR < NR {
        if ( $NF in f2 ) {
            split( f2[ $NF ], a, SUBSEP );
            len = length( a );
            for ( i = 1; i <= len; i++ ) {
                $NF = a[ i ];       
            }
        }
        printf "%s\n", $0;
    }
' file2 file1 | column -t 
```

它产生：

```
1  a  t  p  1  a  b
2  b  c  f  3  n  a
2  b  c  f  4  4  a
3  d  y  u  1  a  b
2  b  c  f  3  n  a
2  b  c  f  4  4  a
2  u  g  t  2  p  c
2  b  j  h  2  p  c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:35:20.580

在支持任意数据结构（列表列表）的语言中更容易一些。这里是红宝石

```
# read "file2" and group by the last field
file2 = File .foreach('file2') .map(&:split) .group_by {|fields| fields[-1]}

# process file1
File .foreach('file1') .map(&:split) .each do |fields|
  file2[fields[-1]] .each do |fields2|
    puts (fields[0..-2] + fields2).join(" ")
  end 
end 
```

输出

```
1 a t p 1 a b
2 b c f 3 n a
2 b c f 4 4 a
3 d y u 1 a b
2 b c f 3 n a
2 b c f 4 4 a
2 u g t 2 p c
2 b j h 2 p c 
```

# ios - 在 iOS 中使用 OpenAL 进行混响

> ID：12782758
> 
> 赞同：0
> 
> 时间：2012-10-08T13:28:00.503
> 
> 标签：ios, openal

从 iOS 5 开始，我们在 OpenAL 中支持混响效果，但我找不到任何使用此功能的好例子。我只找到了一些指向 ObjectAL 源代码的链接，但是理解混响效果的使用太复杂了。那么，如何使用 OpenAL 为 iOS 应用程序添加混响效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:30:16.973

ObjectAL 代码库已经变得相当复杂，但在 OpenAL 方面，它实际上只是大部分 C API 的一个大包装器。混响的主要 Objective-C API 入口点是：

[https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ObjectAL/OpenAL/ALListener.m#L194](https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ObjectAL/OpenAL/ALListener.m#L194)

[https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ObjectAL/OpenAL/ALSource.m#L808](https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ObjectAL/OpenAL/ALSource.m#L808)

如果你想自己实现它，你首先需要像我在 +[ALWrapper initialize] 中那样绑定扩展函数：[https ://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ ObjectAL/OpenAL/ALWrapper.m#L1363](https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ObjectAL/OpenAL/ALWrapper.m#L1363)

在核心，所有混响功能都是通过调用 alcASASetListener() 和 alcASASetSource() 来完成的。如果您在 ALWrapper 中搜索这些函数，您会发现它只是将调用包装在 Objective-C 中（加上一些错误处理），而 ALSource 和 ALLListener 正在包装它。在最低级别，它只是一堆这样的调用：

```
alcASASetSource(ALC_ASA_REVERB_SEND_LEVEL, sourceID, &value, sizeof(value)); 
```

因此代码将始终遵循以下两条路径之一：

*   ALSource -> ALWrapper -> 对 alcASASetSource() 的原始 C 调用
*   ALLListener -> ALWrapper -> 对 alcASASetListener() 的原始 C 调用

全局控件（通过监听器控制）是：

*   打开/关闭混响（全局）
*   全局混响电平（混响效果的响度）
*   房间类型（各种预设可用，例如 ALC_ASA_REVERB_ROOM_TYPE_Cathedral）
*   均衡器增益、带宽、频率（基本滤波，使用方式与使用物理均衡器相同 - 如果有的话，你可能不会使用这么多）

本地控制（通过源控制）是：

*   混响发送电平（多少混响影响此源）
*   混响遮挡（模拟听者和声音可以部分穿过的声源之间的物理对象，如门或薄墙）
*   混响障碍（模拟听者和不传导声音的声源之间的物理对象，这样您只能听到周围的声音，如混凝土柱子）

我还在这里写了一个小演示： [https ://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectALDemo/Demos/ReverbDemo.m](https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectALDemo/Demos/ReverbDemo.m)

据我所知，Apple 并没有发布太多文档，所以最好的办法是克隆 repo、构建演示并使用 API，直到您了解它们是如何协同工作的。然后将您使用 ObjectAL 所做的事情翻译成对 alcASASetListener() 和朋友的实际调用的问题，但这些应该是非常直接的翻译，因为它最终只是包装器代码。

# c - 在同一个函数中对一个 fd 进行多次关闭调用是否重要？

> ID：12782768
> 
> 赞同：23
> 
> 时间：2012-10-08T13:28:31.860
> 
> 标签：c, file, file-io

我只想知道在 fd 上连续两次关闭的行为是什么。

例如-

```
close(fd);
close(fd); 
```

[fd 是一个整数]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-08T13:32:17.303

第一次调用应该返回`0`；第二个调用应该返回`-1`，并设置`errno`为`EBADF`.

`fd`您应该通过设置为已知的错误号码来防止第二次呼叫发生，例如`-1`，在第一次呼叫之后立即进行a ，然后在进行第二次呼叫之前进行`close`检查（如果是则不进行呼叫）：`fd``fd``-1`

```
close(fd);
fd = -1;
...
// More code
...
if (fd != -1) {
    close(fd)
    fd = -1;
} 
```

当您需要`close`从多个位置进行调用，但您不确定文件是否已打开或是否已关闭时，此 Code Pattern 会有所帮助。传递`-1`to`close`是无害的（`EBADF`当然，你会得到一个 ）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-08T13:30:13.687

它应该是无害的，除非您在两次关闭调用之间进行线程化或执行某些操作。然后，您可能最终会关闭程序中其他内容已打开的 fd。

线程相关的方式是库几乎总是在你背后做一些奇怪的事情。Libc 将打开文件以查找错误消息或其他与语言环境相关的内容，解析器可以打开配置文件等。如果您关闭文件描述符并再次关闭它，在线程环境中，您很容易陷入文件描述符已被库重用，您在其背后关闭它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-30T02:46:28.293

正如其他人指出的那样，两次关闭**同一个**fd 应该是非致命的，但要注意这样的代码

```
close(fd);
/* ... */
newfd = open(....);
/* ... */
close(fd); 
```

到第二次关闭时，您无法确定是否`fd`实际上与`newfd`! 每当您尝试使用`newfd`.

所以（如果两个`close`调用之间有代码）这样​​做是不安全的。总是`close`文件描述符恰好一次。总是`free`只缓冲一次。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-08T13:33:41.377

第二次调用将失败，`Errno: EBADF`因为那时**fd 不是活动文件描述符。**

它应该对执行完全没有影响。但是，如果第一次关闭时设置了任何错误号，那将会丢失，因此您不应该关闭文件描述符两次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T13:31:57.510

如果 fd 的值保持不变，第二次调用将返回 fd 无效的错误（EBADF - 正如 dasblinkenlight 指出的那样）

想想做一些喜欢的事

```
if fd != -1 )
{
   close (fd );
   fd = -1;
} 
```

# vba - vba日期大于小于表达式错误

> ID：12782783
> 
> 赞同：0
> 
> 时间：2012-10-08T13:29:28.853
> 
> 标签：vba, ssrs-2008

嗨，我有以下代码

```
Public Function checkDate(ByVal SomeDate As String) As Integer
If CDate("Sep 24 2012") >= CDate(SomeDate) Then
     Return 1
End If
Return 0
End Function 
```

当我调用 checkDate("January 1 2012") 或任何早于 9 月 24 日的日期时，我会返回 1。

但是，当我调用 checkDate("Sep 25 2012") 或 9 月 24 日之后的任何其他日期时，我会返回 #error。

有人可以解释为什么会发生这种情况而不是 0 返回值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:00:33.190

VBA 不使用 Return

```
Public Function checkDate(ByVal SomeDate As String) As Integer
    If CDate("Sep 24 2012") >= CDate(SomeDate) Then
        checkDate = 1
    Else
        checkDate = 0
    End If
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:00:07.820

这段代码在 VBA 中对我有用。我还没有检查这个是否在 SSRS 中工作。

```
Public Function checkDate(ByVal SomeDate As String) As Integer
Dim dteCheck As Date
Dim dteSomeDate As Date

dteCheck = CDate("Sep 24 2012")
dteSomeDate = CDate(SomeDate)

If dteCheck >= dteSomeDate Then
    checkDate = 1
Else
    checkDate = 0
End If
End Function 
```

# visual-studio-2010 - 在 VS2010 的 WebTest 中设置字节顺序标记

> ID：12782784
> 
> 赞同：0
> 
> 时间：2012-10-08T13:29:31.007
> 
> 标签：visual-studio-2010, wcf, web-services

在 Visual Studio 中通过**WebTest**调用 WCF WebService 时，我已将**stringbody**设置为原始 Xml 请求，即没有此标记`<?xml version="1.0">`，如下所示 -

```
<Operation1Request xmlns="http://mycompany.com/myservice/operation1">
        <ChildElement1>
            Child Value
        </ChildElement1>
</Operation1Request> 
```

形成信封并调用**WCF Service**是 Visual Studio 的责任。

我是否必须明确设置**字节顺序标记**，以便可以在**utf-8**或**utf-16**中形成请求？

`<?xml version="1.0" encoding="utf-8"?>`

`<?xml version="1.0" encoding="utf-16"?>`

测试 WCF 服务有什么不同吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:54:39.520

是休息还是肥皂服务？

从我的观点来看，对肥皂使用单元测试而不是网络性能测试。它将更容易编码和维护。

# jquery - Phonegap 2.1 iOS：如何使用数组循环中的 createWriter 写入大文件

> ID：12782786
> 
> 赞同：0
> 
> 时间：2012-10-08T13:29:37.413
> 
> 标签：jquery, cordova, filewriter

我尝试使用 Phonegap getFile 和 createWriter 函数在 iOS 应用程序（phonegap 2.1 + jquerymobile）上编写大文件。

在包含数据 JSON 的数组的“for”循环中，我有一个“getFile”函数，它在我的 fileSystem 目录中创建每个文件。（这是工作）在我的“getFile”函数中，我调用了调用phonegap createWriter 函数并写入数组数据文件的成功回调。（问题就在这里）

我的问题是所有文件都包含最后一个数组数据。我怎样才能给每个文件提供好的数据？

我的代码：

```
fileSystem.root.getDirectory("directory",{create: true},
     function(entry){
              console.log('getDirectory success');
              entry.getDirectory("subdirectory", {create: true},
              function(entry){
                       console.log('subdirectory success');
                       for(var i=0, len= dataJson.length;i < len ; i++){
                           data = dataJson[i];
                           fullPath =data["data_id"]+".txt";
                           entry.getFile(fullPath, {create: true, exclusive: false},
                                        function(fileEntry){
                                                fileEntry.createWriter(
                                                     function(writer){
                                                     writer.onwriteend = function(evt) {
                                                        console.log("writer end");
                                                     }; 
                                                     writer.write(data["data_content"]);        
                                                     writer.abort();
                                                     },
                                                     fail);
                                        }
                                        ,fail);}
                       }
              },fail);
     }
     ,fail); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:26:31.003

我解决了我的问题。此代码有效：

```
fileSystem.root.getDirectory("directory",{create: true},
 function(entry){
          console.log('getDirectory success');
          entry.getDirectory("subdirectory", {create: true},
          function(entry){
                   console.log('subdirectory success');
                   for(var i=0, len= dataJson.length;i < len ; i++){
                       data = dataJson[i];
                       fullPath =data["data_id"]+".txt";
                       myGetFile(entry,fullPath,data);
                   }
          },fail);
 }
 ,fail);

function myGetFile(entry,fullPath,data){
        entry.getFile(fullPath,
                      {create: true, exclusive: false},
                     function(fileEntry){
                     myWriteFile(fileEntry,data);
                     },
                      fail);
    }
 function myWriteFile(fileEntry,data){
        fileEntry.createWriter(function(writer){
                               writer.onwriteend = function(evt) {
                               console.log("onwriteend");
                               };
                               writer.write(data);
                               writer.abort();
                               }, fail);
    } 
```

# arrays - 如何在 Matlab 中创建一个数组但同时运行一个函数？

> ID：12782787
> 
> 赞同：2
> 
> 时间：2012-10-08T13:29:39.077
> 
> 标签：arrays, matlab, for-loop

我正在尝试使用正在运行的函数中的值填充数组。在此函数中，我以from到`z2`的增量更改变量。同时我想用这些值填充一个数组。我尝试了一个while循环和一个for循环。如何只用一个 for 循环来写这个？`0.01``0``0.99`

我的代码：

```
Ys = y(2000);
Mp = ((max(y)-Ys)/Ys)*100;
[max, i] = max(y);
tp = t(i);
z = sqrt(((log(Mp))^2)/((pi*pi)+(log(Mp))^2));

%Given Equations
wd = pi/tp;
wn = wd/(sqrt(1-(z*z)));
ts = 4.6/(z*wn);
tr = 1.8/wn;

%for loop for z from 0 to 0.99
for i = 1:100;
   for z2 = 0:0.01:0.99
      %tr*wn = Fa
      Fa(i) = 2.917*z2^2 - 0.4167*z2 + 1;
      i = i + 1;
      if i >= 100;
          break;
      end
    end
end

find_zeta = interp1(Fa, 1.8);

disp(Fa);
disp(find_zeta); 
```

我遇到的错误：我`1`的数组中只有 s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:31:32.703

您可以在“矢量化”matlab 语句中执行此操作而无需循环

```
z2 = 0:0.01:0.99;
Fa = 2.917*z2.^2 - 0.4167.*z2 + 1; 
```

首先，计算`z2`您需要的值。接下来，逐个元素（**注释** `.^`语法）对向量进行操作，计算 Fa。`^`和运算符之间存在根本区别`.^`，您真的很想知道区别。通常，您可以将 a 添加`.`到运算符，这意味着它将对数组的各个标量元素起作用。[在此处阅读有关矩阵和数组运算符的信息](http://www.mathworks.se/help/matlab/ref/arithmeticoperators.html)。例如：

```
A = rand(10);
B = rand(10);
% matrix multiplication
C=A*B; 
% element by element multiplication
C=A.*B 
```

您收到的投诉仅意味着您的工作效率低下。由于 matlab 事先不知道它的大小`Fa`，因此每次附加到它时都需要重新分配数组。你仍然可以使用它，它只是效率低下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:37:38.827

matlab 中的索引从 1 开始，而不是像在其他编程语言中那样从 0 开始

您得到的错误是关于预分配数组。添加`Fa = zeros(1,100);`到脚本的开头，它将消失。

```
Fa = zeros(1,100);
i = 1;
for z2 = 0:0.01:0.99
   Fa(i) = 2.917*z2^2 - 0.4167*z2 + 1;
   i = i +1;
end 
```

正如另一个答案中所建议的那样，使用“矢量化”是更可行的方法。

# iphone - 如何在 iOS 中实现复制和粘贴功能

> ID：12782799
> 
> 赞同：3
> 
> 时间：2012-10-08T13:30:24.700
> 
> 标签：iphone, ios, copy-paste

我正在为 iOS > 4.3 开发一个应用程序。

我正在寻找有关在视图或应用程序之间复制和粘贴文本的最佳实践。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:35:33.513

你可以使用`UIPasteboard`，

设置时：

```
 UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
   [pasteboard setString:yourtext]; 
```

同时获得（如果你有标签）：

```
 UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
   pastelabel.text =  [pasteboard string]; 
```

您可以参考[粘贴板编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/PasteboardGuide106/Articles/pbCopying.html)了解更多详细信息。

# java - Java - 无法写入第二个文件

> ID：12782800
> 
> 赞同：0
> 
> 时间：2012-10-08T13:30:29.430
> 
> 标签：java, file, sockets, file-io

我在尝试将文件从服务器发送到客户端时遇到了一些麻烦。我似乎无法将相同的文件从服务器发送到客户端到两个单独的文件中。相反，它只是附加到第一个文件的末尾！任何帮助，将不胜感激。

编辑：我已经修改了代码。我已将文件发送和接收任务模块化为 2 个函数“sendfile”和“recievefile”。我现在得到的错误是套接字在第二次调用后在 sendfile 和 recievefile 函数处关闭。但我要关闭的只是文件以及输出和输入流！也许关闭这些流也会关闭套接字......？无论如何，我试过不关闭输入和输出流，结果是 - 1）没有任何东西被传输到目标文件。所以我只是在服务器端得到一个空白创建的文件。2）甚至没有创建第二个文件。伟大的。

像往常一样，任何帮助将不胜感激。

服务器：

```
package com.http.server;
import java.io.*;
import java.net.*;

public class Server
{
    public static void main(String args[])throws Exception
    {
        System.out.println("Server running...");

        /* Listen on port 5555 */

        ServerSocket server = new ServerSocket(5555);

        /* Accept the sk */

        Socket sk = server.accept();

        System.out.println("Server accepted client");

        BufferedReader inReader = new BufferedReader(new InputStreamReader(sk.getInputStream()));
        BufferedWriter outReader = new BufferedWriter(new OutputStreamWriter(sk.getOutputStream()));

        /* Read the filename */
        String serverlocation = "C:/Users/Arjun/Desktop/CNW model/HTTP Website/";
        String filename = serverlocation + inReader.readLine();
        if ( !filename.equals("") ){

            /* Reply back to client with READY status */

            outReader.write("READY\n");
            outReader.flush();          
        }

        sendfile(sk, filename);
        sendfile(sk, filename);

        outReader.close();
        inReader.close();

        sk.close();
        server.close();

    }

    public static void sendfile(Socket sk, String filename)
    {
        try{

            OutputStream output = sk.getOutputStream();

        FileInputStream file = new FileInputStream(filename);

        byte[] buffer = new byte[sk.getSendBufferSize()];

        int bytesRead = 0; 

        while((bytesRead = file.read(buffer))>0)
        {
            output.write(buffer,0,bytesRead);
        }

        file.close();  
        output.close();
    }
        catch (Exception ex){
            System.out.println(ex);
        }
        }

    } 
```

客户：

```
package com.http.client;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.io.*;

public class Client extends JFrame implements ActionListener {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private JTextField txtFile;

    public static void main(String args[]){

        /* Create and display the client form */

        Client clientForm = new Client();
        clientForm.Display();
    }

    public void Display(){

        JFrame frame = new JFrame();
        frame.setTitle("Client");

        FlowLayout layout = new FlowLayout();
        layout.setAlignment(FlowLayout.LEFT);

        JLabel lblFile = new JLabel("URL:");

        txtFile = new JTextField();
        txtFile.setPreferredSize(new Dimension(150,30));

        JButton btnTransfer = new JButton("Get");
        btnTransfer.addActionListener(this);

        JPanel mainPanel = new JPanel();
        mainPanel.setLayout(layout);
        mainPanel.add(lblFile);
        mainPanel.add(txtFile);
        mainPanel.add(btnTransfer);

        frame.getContentPane().add(mainPanel);
        frame.pack();
        frame.setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {

        /* File Open Dialog box allows the user to select a file */

        String filename=txtFile.getText();

        try{

            /* Try to connect to the server on localhost, port 5555 */

            Socket sk = new Socket("localhost", 5555);

            /* Send filename to server */

            OutputStreamWriter outreader = new OutputStreamWriter(sk.getOutputStream());
            outreader.write(filename + "\n");
            outreader.flush();

            /* Get response from server */

            BufferedReader inReader = new BufferedReader(new InputStreamReader(sk.getInputStream()));

            String serverStatus = inReader.readLine(); // Read the first line
            /* If server is ready, receive the file */

            while ( !serverStatus.equals("READY") ){}

                /* Create a new file in the tmp directory using the filename */

               recievefile(sk,filename);
               recievefile(sk,"xx"+filename);

                JOptionPane.showMessageDialog(this, "Transfer complete");

                inReader.close();
                outreader.close();
            sk.close();

        }
        catch (Exception ex){
            /* Catch any errors */
            JOptionPane.showMessageDialog(this, ex.getMessage());
            System.out.println(ex);
        }
    }

    public void recievefile(Socket sk, String filename)
    {
        try{

            InputStream input = sk.getInputStream();

        FileOutputStream wr = new FileOutputStream(new File("C:/tmp/" + new File(filename).getName()));

        byte[] buffer = new byte[sk.getReceiveBufferSize()];
        int bytesReceived = 0;

        while((bytesReceived = input.read(buffer))>0)
        {
            /* Write to the file */
           wr.write(buffer,0,bytesReceived);
        } 
        wr.close();
        input.close();

    }
        catch (Exception ex){
            /* Catch any errors */
            JOptionPane.showMessageDialog(this, ex.getMessage());
            System.out.println(ex);
        }

}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:33:37.407

当您发送文件时，您只是将一个附加到另一个的末尾，以便客户看到它们。

您需要让客户端知道何时停止读取一个文件并开始读取第二个文件。

最简单的方法是在文件之前发送文件的长度，并且只读取比数据量精确的数据。

顺便说一句：您不能像以前那样组合二进制流和文本流。这更容易导致混乱。在您的情况下，您需要发送二进制文件，因此使用 DataInputStream 和 DataOutputStream 将所有内容设为二进制文件。

* * *

我的想法是这样的。

```
public static void sendFile(DataOutput out, String filename) throws IOException {
    FileInputStream fis = new FileInputStream(filename);
    byte[] bytes = new byte[8192];
    try {
        long size = fis.getChannel().size();
        out.writeLong(size);
        for (int len; (len = fis.read(bytes, 0, (int) Math.min(bytes.length, size))) > 0; ) {
            out.write(bytes, 0, len);
            size -= len;
        }
        assert size == 0;
    } finally {
        fis.close();
    }
}

public void receiveFile(DataInput in, String filename) throws IOException {
    long size = in.readLong();
    FileOutputStream fos = new FileOutputStream(filename);
    byte[] bytes = new byte[8192];
    try {
        for (int len; (len = (int) Math.min(size, bytes.length)) > 0; ) {
            in.readFully(bytes, 0, len);
            fos.write(bytes, 0, len);
            size -= len;
        }
    } finally {
        fos.close();
    }
} 
```

# mysql - 优化用于标签匹配的 SQL 查询

> ID：12782813
> 
> 赞同：3
> 
> 时间：2012-10-08T13:31:31.533
> 
> 标签：mysql, sql, optimization, query-optimization, sql-optimization

示例数据集：

```
id | tag
---|------
1  | car
1  | bike
2  | boat
2  | bike
3  | plane
3  | car 
```

`id`并且`tag`都被索引。

我正在尝试获取与标签 [汽车、自行车] 匹配的 ID（标签的数量可能会有所不同）。

这样做的一个天真的查询是：

```
SELECT id
FROM test
WHERE tag = 'car'
    OR tag =  'bike'
GROUP BY id
HAVING COUNT(*) = 2 
```

但是，这样做是非常低效的，因为 group by 并且任何匹配一个标签的行都被考虑到 group by （而且我有很大的体积）。

对于这种情况有更有效的查询吗？

我看到的唯一解决方案是让另一个表包含以下内容：

```
id | hash
---|------
1  | car,bike
2  | boat,bike
3  | plane,car 
```

但这不是一个易于实施和保持最新的解决方案。

附加信息：

*   名称匹配必须准确（无全文索引）
*   标签的数量并不总是 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:35:12.883

尝试这个：

```
SELECT id
FROM test
WHERE tag in('car','bike')
GROUP BY id
HAVING COUNT(*) = 2 
```

并在标签列上创建一个非聚集索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:13:40.533

干得好：

```
select id from TEST where tag = 'car' and ID in (select id from TEST where tag='bike') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T13:44:57.280

不知道我是否得到你，但试试这个：

```
select tag, count(*)  as amount
into #temp
from MYTABLE
group by tag

select t1.tag 
from #temp t1 join #temp t2 on t1.amount=t2.amount and t1.tag=t2.tag and t1.amount=2 
```

应该是自行车和汽车，因为它们都有 2 行，等于 2

# asp.net - 带有 WPF 的 Telerik 报告

> ID：12782816
> 
> 赞同：1
> 
> 时间：2012-10-08T13:31:33.623
> 
> 标签：asp.net

我将 Telerik Report 控件与 WPF(C#) 一起使用。我向 Telerik Report 分配了数据，但我不想打开报告，但我需要在填满时直接打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:17:41.673

您可以尝试使用此代码 - 基于`PrintReport method`

```
 function MyPrint()
    {
        <%=ReportViewer1.ClientID %>.PrintReport();
    } 
```

# c# - WPF Push and Pop

> ID：12782821
> 
> 赞同：1
> 
> 时间：2012-10-08T13:31:48.850
> 
> 标签：c#, .net, wpf, user-interface, render

I have some rendering code, which relies on [`DrawingContext.PushClip`](http://msdn.microsoft.com/library/system.windows.media.drawingcontext.pushclip) and the corresponding `Pop` method.

```
protected override void OnRender(DrawingContext drawingContext)
{
    drawingContext.PushClip(whatever);
    OnRenderInternal(...);
    drawingContext.Pop();
} 
```

*   Now, let's assume that something really bad happens in the `OnRenderInternal` method and it throws an exception (in this case `Pop` will never get called). Would this break the **entire rendering process** or the drawing context will revert itself to some "safe" state before performing other operations (and no clipping will occure for other renderable items)?

*   Basically, should I **always** care about reverting the drawing context to its initial state when performing rendering operations?

*   I realize that in this simple case I can avoid troubles by using a `try-finally` statement, but what would happen if I forget to preserve the correct `Push / Pop` stack?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:50:52.660

I think there is typically no need to revert the DrawingContext to its initial state, for the simple reason that you get a new DrawingContext on every call to OnRender. The whole drawing is re-created every time OnRender is called and it doesn't matter in which state you leave the DrawingContext.

There is however an exception. A derived UIElement may also override OnRender and may first call base.OnRender() before performing its own rendering code. In this scenario the derived UIElement would get the "corrupted" DrawingContext from the base class' OnRender method.

So unless you can make sure that your UIElement can't be derived from, it looks like a good idea not to leave the DrawingContext in an undefined, "corrupted" state.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:42:38.043

You could do:

```
protected override void OnRender(DrawingContext drawingContext)
{
    try
    {
        drawingContext.PushClip(whatever);
        OnRenderInternal(...);        
    }
    finally
    {
        drawingContext.Pop();
    }
} 
```

# wpf - 在画布中使用 OnKeyDown 和 OnPreviewKeyDown

> ID：12782822
> 
> 赞同：1
> 
> 时间：2012-10-08T13:31:49.030
> 
> 标签：wpf, canvas, onkeydown

我有一个从 Canvas 继承的 DragCanvas 类，它实现了抓取、拖动和调整元素大小的功能。DragCanvas 类与 Josh Smith 在以下文章中提供的类非常相似：http: [//www.codeproject.com/Articles/15354/Dragging-Elements-in-a-Canvas](http://www.codeproject.com/Articles/15354/Dragging-Elements-in-a-Canvas)

我也希望能够捕获键盘事件，以便删除元素并复制它们。我已经覆盖了 OnKeydown 和 OnPreviewKeyDown 方法并在其中放置了断点，但它们永远不会命中。我对 WPF 非常缺乏经验，我不确定我错过了什么。你能帮助我吗？提前致谢！

这是拖动画布的代码：

```
public class DragCanvas : Canvas
{
    #region Data

    // Stores a reference to the UIElement currently being dragged by the user.
    private UIElement elementBeingDragged;

    private UIElement elementBeingResized;

    // Keeps track of where the mouse cursor was when a drag operation began.       
    private Point origCursorLocation;

    // The offsets from the DragCanvas' edges when the drag operation began.
    private double origHorizOffset, origVertOffset;

    // Keeps track of which horizontal and vertical offset should be modified for the drag element.
    private bool modifyLeftOffset, modifyTopOffset;

    // True if a drag operation is underway, else false.
    private bool isDragInProgress;

    // True if a drag operation is underway and the mouse has moved since the process has started. This is used
    // in order to determine on left mouse up whether we should display the resize adorners or not.
    private bool hasMouseMovedInDragInProgress;

    private AdornerLayer adornerLayer;

    #endregion // Data

    #region Attached Properties

    #region CanBeDragged

    public static readonly DependencyProperty CanBeDraggedProperty;
    public static readonly DependencyProperty LineBelongsToBaseGridProperty;

    public static bool GetCanBeDragged(UIElement uiElement)
    {
        if (uiElement == null)
            return false;

        return (bool)uiElement.GetValue(CanBeDraggedProperty);
    }

    public static void SetCanBeDragged(UIElement uiElement, bool value)
    {
        if (uiElement != null)
            uiElement.SetValue(CanBeDraggedProperty, value);
    }

    #endregion // CanBeDragged

    #endregion // Attached Properties

    #region Dependency Properties

    public static readonly DependencyProperty AllowDraggingProperty;
    public static readonly DependencyProperty AllowDragOutOfViewProperty;

    #endregion // Dependency Properties

    #region Static Constructor

    static DragCanvas()
    {
        AllowDraggingProperty = DependencyProperty.Register(
            "AllowDragging",
            typeof(bool),
            typeof(DragCanvas),
            new PropertyMetadata(true));

        AllowDragOutOfViewProperty = DependencyProperty.Register(
            "AllowDragOutOfView",
            typeof(bool),
            typeof(DragCanvas),
            new UIPropertyMetadata(false));

        CanBeDraggedProperty = DependencyProperty.RegisterAttached(
            "CanBeDragged",
            typeof(bool),
            typeof(DragCanvas),
            new UIPropertyMetadata(true));

        LineBelongsToBaseGridProperty = DependencyProperty.RegisterAttached(
            "LineBelongsToBaseGrid",
            typeof(bool),
            typeof(DragCanvas),
            new UIPropertyMetadata(false));
    }

    #endregion // Static Constructor

    #region Constructor

    /// <summary>
    /// Initializes a new instance of DragCanvas.  UIElements in
    /// the DragCanvas will immediately be draggable by the user.
    /// </summary>
    public DragCanvas()
    {
    }

    #endregion // Constructor

    #region Interface

    #region AllowDragging

    /// <summary>
    /// Gets/sets whether elements in the DragCanvas should be draggable by the user.
    /// The default value is true.  This is a dependency property.
    /// </summary>
    public bool AllowDragging
    {
        get { return (bool)base.GetValue(AllowDraggingProperty); }
        set { base.SetValue(AllowDraggingProperty, value); }
    }

    #endregion // AllowDragging

    #region AllowDragOutOfView

    /// <summary>
    /// Gets/sets whether the user should be able to drag elements in the DragCanvas out of
    /// the viewable area.  The default value is false.  This is a dependency property.
    /// </summary>
    public bool AllowDragOutOfView
    {
        get { return (bool)GetValue(AllowDragOutOfViewProperty); }
        set { SetValue(AllowDragOutOfViewProperty, value); }
    }

    #endregion // AllowDragOutOfView

    #region BringToFront / SendToBack

    /// <summary>
    /// Assigns the element a z-index which will ensure that 
    /// it is in front of every other element in the Canvas.
    /// The z-index of every element whose z-index is between 
    /// the element's old and new z-index will have its z-index 
    /// decremented by one.
    /// </summary>
    /// <param name="targetElement">
    /// The element to be sent to the front of the z-order.
    /// </param>
    public void BringToFront(UIElement element)
    {
        this.UpdateZOrder(element, true);
    }

    /// <summary>
    /// Assigns the element a z-index which will ensure that 
    /// it is behind every other element in the Canvas.
    /// The z-index of every element whose z-index is between 
    /// the element's old and new z-index will have its z-index 
    /// incremented by one.
    /// </summary>
    /// <param name="targetElement">
    /// The element to be sent to the back of the z-order.
    /// </param>
    public void SendToBack(UIElement element)
    {
        this.UpdateZOrder(element, false);
    }

    #endregion // BringToFront / SendToBack

    #region ElementBeingDragged

    /// <summary>
    /// Returns the UIElement currently being dragged, or null.
    /// </summary>
    /// <remarks>
    /// Note to inheritors: This property exposes a protected 
    /// setter which should be used to modify the drag element.
    /// </remarks>
    public UIElement ElementBeingDragged
    {
        get
        {
            if (!this.AllowDragging)
                return null;
            else
                return this.elementBeingDragged;
        }
        protected set
        {
            if (this.elementBeingDragged != null)
                this.elementBeingDragged.ReleaseMouseCapture();

            if (!this.AllowDragging)
                this.elementBeingDragged = null;
            else
            {
                if (DragCanvas.GetCanBeDragged(value))
                {
                    this.elementBeingDragged = value;
                    this.elementBeingDragged.CaptureMouse();
                }
                else
                    this.elementBeingDragged = null;
            }
        }
    }

    #endregion // ElementBeingDragged

    #region FindCanvasChild

    /// <summary>
    /// Walks up the visual tree starting with the specified DependencyObject, 
    /// looking for a UIElement which is a child of the Canvas.  If a suitable 
    /// element is not found, null is returned.  If the 'depObj' object is a 
    /// UIElement in the Canvas's Children collection, it will be returned.
    /// </summary>
    /// <param name="depObj">
    /// A DependencyObject from which the search begins.
    /// </param>
    public UIElement FindCanvasChild(DependencyObject depObj)
    {
        while (depObj != null)
        {
            // If the current object is a UIElement which is a child of the
            // Canvas, exit the loop and return it.
            UIElement elem = depObj as UIElement;
            if (elem != null && base.Children.Contains(elem))
                break;

            // VisualTreeHelper works with objects of type Visual or Visual3D.
            // If the current object is not derived from Visual or Visual3D,
            // then use the LogicalTreeHelper to find the parent element.
            if (depObj is Visual || depObj is Visual3D)
                depObj = VisualTreeHelper.GetParent(depObj);
            else
                depObj = LogicalTreeHelper.GetParent(depObj);
        }
        return depObj as UIElement;
    }

    #endregion // FindCanvasChild

    #endregion // Interface

    #region Overrides

    protected override void OnKeyDown(KeyEventArgs e)
    {
        base.OnKeyDown(e);

        int b;
        b = 10;
        return;
    }

    protected override void OnPreviewKeyDown(KeyEventArgs e)
    {
        base.OnPreviewKeyDown(e);

        int b;
        b = 10;
        return;
    }

    #region OnPreviewMouseLeftButtonDown

    protected override void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        base.OnPreviewMouseLeftButtonDown(e);

        this.isDragInProgress = false;

        // If we have a mouse button down, check whether elementBeingResized is not null.
        // If it's not, it means that we were resizing an element and we have now clicked somewhere else,
        // so remove its resizing adorner.
        if ((this.elementBeingResized != null) && (this.adornerLayer != null))
        {
            var adorners = adornerLayer.GetAdorners(elementBeingResized);
            if (adorners != null)
                adornerLayer.Remove(adorners[0]);
        }
        // Cache the mouse cursor location.
        this.origCursorLocation = e.GetPosition(this);

        // Walk up the visual tree from the element that was clicked, 
        // looking for an element that is a direct child of the Canvas.
        this.elementBeingResized = this.ElementBeingDragged = this.FindCanvasChild(e.Source as DependencyObject);
        if (this.ElementBeingDragged == null)
            return;

        if ((bool)ElementBeingDragged.GetValue(LineBelongsToBaseGridProperty))
        {
            this.ElementBeingDragged = null;
            return;
        }

        // Get the element's offsets from the four sides of the Canvas.
        double left = Canvas.GetLeft(this.ElementBeingDragged);
        double right = Canvas.GetRight(this.ElementBeingDragged);
        double top = Canvas.GetTop(this.ElementBeingDragged);
        double bottom = Canvas.GetBottom(this.ElementBeingDragged);

        // Calculate the offset deltas and determine for which sides
        // of the Canvas to adjust the offsets.
        this.origHorizOffset = ResolveOffset(left, right, out this.modifyLeftOffset);
        this.origVertOffset = ResolveOffset(top, bottom, out this.modifyTopOffset);

        // Set the Handled flag so that a control being dragged 
        // does not react to the mouse input.
        e.Handled = true;

        this.isDragInProgress = true;
    }

    #endregion // OnPreviewMouseLeftButtonDown

    protected override void OnPreviewMouseRightButtonDown(MouseButtonEventArgs e)
    {
        base.OnPreviewMouseRightButtonDown(e);
    }

    #endregion

    #region OnPreviewMouseMove

    protected override void OnPreviewMouseMove(MouseEventArgs e)
    {
        base.OnPreviewMouseMove(e);

        // If no element is being dragged, there is nothing to do.
        if (this.ElementBeingDragged == null || !this.isDragInProgress)
            return;

        hasMouseMovedInDragInProgress = true;

        // Get the position of the mouse cursor, relative to the Canvas.
        Point cursorLocation = e.GetPosition(this);

        // These values will store the new offsets of the drag element.
        double newHorizontalOffset, newVerticalOffset;

        #region Calculate Offsets

        // Determine the horizontal offset.
        if (this.modifyLeftOffset)
            newHorizontalOffset = this.origHorizOffset + (cursorLocation.X - this.origCursorLocation.X);
        else
            newHorizontalOffset = this.origHorizOffset - (cursorLocation.X - this.origCursorLocation.X);

        // Determine the vertical offset.
        if (this.modifyTopOffset)
            newVerticalOffset = this.origVertOffset + (cursorLocation.Y - this.origCursorLocation.Y);
        else
            newVerticalOffset = this.origVertOffset - (cursorLocation.Y - this.origCursorLocation.Y);

        #endregion // Calculate Offsets

        if (!this.AllowDragOutOfView)
        {
            #region Verify Drag Element Location

            // Get the bounding rect of the drag element.
            Rect elemRect = this.CalculateDragElementRect(newHorizontalOffset, newVerticalOffset);

            //
            // If the element is being dragged out of the viewable area, 
            // determine the ideal rect location, so that the element is 
            // within the edge(s) of the canvas.
            //
            bool leftAlign = elemRect.Left < 0;
            bool rightAlign = elemRect.Right > this.ActualWidth;

            if (leftAlign)
                newHorizontalOffset = modifyLeftOffset ? 0 : this.ActualWidth - elemRect.Width;
            else if (rightAlign)
                newHorizontalOffset = modifyLeftOffset ? this.ActualWidth - elemRect.Width : 0;

            bool topAlign = elemRect.Top < 0;
            bool bottomAlign = elemRect.Bottom > this.ActualHeight;

            if (topAlign)
                newVerticalOffset = modifyTopOffset ? 0 : this.ActualHeight - elemRect.Height;
            else if (bottomAlign)
                newVerticalOffset = modifyTopOffset ? this.ActualHeight - elemRect.Height : 0;

            #endregion // Verify Drag Element Location
        }

        #region Move Drag Element

        if (this.modifyLeftOffset)
            Canvas.SetLeft(this.ElementBeingDragged, newHorizontalOffset);
        else
            Canvas.SetRight(this.ElementBeingDragged, newHorizontalOffset);

        if (this.modifyTopOffset)
            Canvas.SetTop(this.ElementBeingDragged, newVerticalOffset);
        else
            Canvas.SetBottom(this.ElementBeingDragged, newVerticalOffset);

        #endregion // Move Drag Element
    }

    #endregion // OnPreviewMouseMove

    #region OnHostPreviewMouseUp

    protected override void OnPreviewMouseUp(MouseButtonEventArgs e)
    {
        base.OnPreviewMouseUp(e);

        if ((elementBeingResized != null) && !hasMouseMovedInDragInProgress)
        {
            // If no call to MouseMove has been issues during the drag process, it means that the user wants to resize it.
            adornerLayer = AdornerLayer.GetAdornerLayer(elementBeingResized);
            adornerLayer.Add(new ResizingAdorner(elementBeingResized));
        }
        hasMouseMovedInDragInProgress = false;

        // Reset the field whether the left or right mouse button was 
        // released, in case a context menu was opened on the drag element.
        this.ElementBeingDragged = null;
    }

    #endregion // OnHostPreviewMouseUp

    #region HostEventHandlers

    #endregion // Host Event Handlers

    #region Private Helpers

    #region CalculateDragElementRect

    /// <summary>
    /// Returns a Rect which describes the bounds of the element being dragged.
    /// </summary>
    private Rect CalculateDragElementRect(double newHorizOffset, double newVertOffset)
    {
        if (this.ElementBeingDragged == null)
            throw new InvalidOperationException("ElementBeingDragged is null.");

        Size elemSize = this.ElementBeingDragged.RenderSize;

        double x, y;

        if (this.modifyLeftOffset)
            x = newHorizOffset;
        else
            x = this.ActualWidth - newHorizOffset - elemSize.Width;

        if (this.modifyTopOffset)
            y = newVertOffset;
        else
            y = this.ActualHeight - newVertOffset - elemSize.Height;

        Point elemLoc = new Point(x, y);

        return new Rect(elemLoc, elemSize);
    }

    #endregion // CalculateDragElementRect

    #region ResolveOffset

    /// <summary>
    /// Determines one component of a UIElement's location 
    /// within a Canvas (either the horizontal or vertical offset).
    /// </summary>
    /// <param name="side1">
    /// The value of an offset relative to a default side of the 
    /// Canvas (i.e. top or left).
    /// </param>
    /// <param name="side2">
    /// The value of the offset relative to the other side of the 
    /// Canvas (i.e. bottom or right).
    /// </param>
    /// <param name="useSide1">
    /// Will be set to true if the returned value should be used 
    /// for the offset from the side represented by the 'side1' 
    /// parameter.  Otherwise, it will be set to false.
    /// </param>
    private static double ResolveOffset(double side1, double side2, out bool useSide1)
    {
        // If the Canvas.Left and Canvas.Right attached properties 
        // are specified for an element, the 'Left' value is honored.
        // The 'Top' value is honored if both Canvas.Top and 
        // Canvas.Bottom are set on the same element.  If one 
        // of those attached properties is not set on an element, 
        // the default value is Double.NaN.
        useSide1 = true;
        double result;
        if (Double.IsNaN(side1))
        {
            if (Double.IsNaN(side2))
            {
                // Both sides have no value, so set the
                // first side to a value of zero.
                result = 0;
            }
            else
            {
                result = side2;
                useSide1 = false;
            }
        }
        else
        {
            result = side1;
        }
        return result;
    }

    #endregion // ResolveOffset

    #region UpdateZOrder

    /// <summary>
    /// Helper method used by the BringToFront and SendToBack methods.
    /// </summary>
    /// <param name="element">
    /// The element to bring to the front or send to the back.
    /// </param>
    /// <param name="bringToFront">
    /// Pass true if calling from BringToFront, else false.
    /// </param>
    private void UpdateZOrder(UIElement element, bool bringToFront)
    {
        #region Safety Check

        if (element == null)
            throw new ArgumentNullException("element");

        if (!base.Children.Contains(element))
            throw new ArgumentException("Must be a child element of the Canvas.", "element");

        #endregion // Safety Check

        #region Calculate Z-Indici And Offset

        // Determine the Z-Index for the target UIElement.
        int elementNewZIndex = -1;
        if (bringToFront)
        {
            foreach (UIElement elem in base.Children)
                if (elem.Visibility != Visibility.Collapsed)
                    ++elementNewZIndex;
        }
        else
        {
            elementNewZIndex = 0;
        }

        // Determine if the other UIElements' Z-Index 
        // should be raised or lowered by one. 
        int offset = (elementNewZIndex == 0) ? +1 : -1;

        int elementCurrentZIndex = Canvas.GetZIndex(element);

        #endregion // Calculate Z-Indici And Offset

        #region Update Z-Indici

        // Update the Z-Index of every UIElement in the Canvas.
        foreach (UIElement childElement in base.Children)
        {
            if (childElement == element)
                Canvas.SetZIndex(element, elementNewZIndex);
            else
            {
                int zIndex = Canvas.GetZIndex(childElement);

                // Only modify the z-index of an element if it is  
                // in between the target element's old and new z-index.
                if (bringToFront && elementCurrentZIndex < zIndex ||
                    !bringToFront && zIndex < elementCurrentZIndex)
                {
                    Canvas.SetZIndex(childElement, zIndex + offset);
                }
            }
        }

        #endregion // Update Z-Indici
    }

    #endregion // UpdateZOrder

    #endregion // Private Helpers
} 
```

这是 MainWindow.xaml 中创建拖动画布的片段：

```
<DragCanvas:DragCanvas x:Name="editCanvas" Margin="196,27,9,236" Background="Aquamarine" Focusable="True"/> 
```

这是代码隐藏文件中的构造函数代码：

```
public MainWindow()
    {
        InitializeComponent();
        DataContext = new MainWindowViewModel();

        Initialize();

        Loaded += (x, y) => Keyboard.Focus(editCanvas);
    }

    DragHelper _dragHelper;
    DropHelper _dropHelper;
    private List<Line> _gridLines = new List<Line>();

    internal void Initialize()
    {
        var callback = new ListBoxDragDropDataProvider(this.listSrc);
        _dragHelper = new DragHelper(this.listSrc, callback, null);
        _dropHelper = new DropHelper(this.editCanvas);

        MainWindowViewModel.SetMainWindowView(this);
    }

    public MainWindowViewModel MainWindowViewModel
    {
        get { return DataContext as MainWindowViewModel; }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:25:31.963

为您的画布设置`Focusable="True"`，然后将此代码段放入您的窗口类并设置`DragCanvas`为焦点。希望这对您有所帮助。

`Loaded += (x,y) => Keyboard.Focus(DragCanvas);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:58:06.407

您能否通过为画布设置 Focusable="True" 来检查。希望它有效。

# css - 我的 CSS 被样式代理覆盖

> ID：12782824
> 
> 赞同：1
> 
> 时间：2012-10-08T13:31:52.577
> 
> 标签：css

尽管 .CSS 适用于我添加的所有元素，但它不适用于“立即订阅”按钮。

这是CSS

```
subbutton
{
    background-image:url(images/button_gradient.png); border:2px solid #FFFFFF !important;
    background-color:#be0000;
    font-size: 12px;
    font-family: Lucida Sans Unicode;
    color: #F8F8F8;
    border-color: #be0000;
    text-transform: uppercase;
    margin: 5px 10px 5px 0;
    letter-spacing: 1px;
    padding: 10px 30px;
    line-height: 15px;
    box-shadow: 0 1px 2px rgba (0, 0, 0, 0.1);
} 
```

这是HTML

```
<div class="af-element buttonContainer">
   <input name="Subscribe" class="subbutton" type="submit" value="Subscribe Now!" tabindex="503" />
   <div class="af-clear">
   </div>
</div> 
```

看起来我的代码被默认样式代理样式表覆盖，我不明白为什么。

这是该网站的链接：http: [//xn--mxadnimgroqkg.gr/fitnessforum/](http://xn--mxadnimgroqkg.gr/fitnessforum/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:36:09.463

您必须使用“。” 而不是“#”，因为您必须选择类而不是像这样的 id：

```
.subbutton

    {
        background-image:url(images/button_gradient.png); border:2px solid #FFFFFF !important;
        background-color:#be0000;
        font-size: 12px;
        font-family: Lucida Sans Unicode;
        color: #F8F8F8;
        border-color: #be0000;
        text-transform: uppercase;
        margin: 5px 10px 5px 0;
        letter-spacing: 1px;
        padding: 10px 30px;
        line-height: 15px;
        box-shadow: 0 1px 2px rgba (0, 0, 0, 0.1);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:35:10.520

CSS 规则使用**id**选择器`#subbutton`，而您的标记使用**类**选择器`.subbutton`。使选择器规则和它的使用保持一致（即要么使用`#`要么`.`在两个地方使用）将解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:35:15.243

可以像 CSS 中的错字那么简单吗？

```
.subbutton
{
  /* your css */
} 
```

注意 . （点）在您选择器之前

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:35:26.887

您在 css 文件中使用了**id**选择器：#subbutton，但您在 HTML 代码中指定了**类**属性：class="subbutton"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:37:37.420

CSS应该是...

```
.subbutton
{
...
} 
```

为了匹配输入...

```
<input name="Subscribe" class="subbutton" type="submit" value="Subscribe Now!" tabindex="503" /> 
```

您目前正在使用身份证...

```
#subbutton
{
...
} 
```

# linux - 如何找到存储在文件“data.txt”中的特定文本，它只出现一次

> ID：12782827
> 
> 赞同：13
> 
> 时间：2012-10-08T13:31:58.527
> 
> 标签：linux, search

我查找的行存储在文件 data.txt 中，并且是唯一只出现一次的文本行。

如何使用 linux 找到特定的行？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-06-05T01:02:51.387

这有点旧，但我想你正在寻找这个......

```
cat data.txt | sort | uniq -u 
```

这将显示文件中仅出现一次的唯一值。如果您要问，我假设您熟悉“有线”？如果是这样，这就是你要找的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-07-14T13:04:34.283

为了提供一些上下文（我需要更多代表发表评论），这是[一个名为 Bandit 的在线“战争游戏”中的一个问题，](http://overthewire.org/wargames/bandit/bandit9.html)它涉及使用命令行来发现在线 Linux 服务器上的密码以提升级别。

对于那些想要完整查看 data.txt 的人，我在[这里粘贴了它，](http://pastebin.com/wGdtUyi2)但它看起来像这样：

```
NN4e37KW2tkIb3dC9ZHyOPdq1FqZwq9h
jpEYciZvDIs6MLPhYoOGWQHNIoQZzE5q
3rpovhi1CyT7RUTunW30goGek5Q5Fu66
JOaWd4uAPii4Jc19AP2McmBNRzBYDAkO
JOaWd4uAPii4Jc19AP2McmBNRzBYDAkO
9WV67QT4uZZK7JHwmOH0jnhurJMwoGZU
a2GjmWtTe3tTM0ARl7TQwraPGXgfkH4f
7yJ8imXc7NNiovDuAl1ZC6xb0O0mMBx1
UsvVyFSfZZWbi6wgC7dAFyFuR6jQQUhR
FcOJhZkHlnwqcD8QbvjRyn886rCrnWZ7
E3ugYDa6Wh2y8C8xQev7vOS8O3OgG1Hw
E3ugYDa6Wh2y8C8xQev7vOS8O3OgG1Hw
ME7nnzbId4W3dajsl6Xtviyl5uhmMenv
J5lN3Qe4s7ktiwvcCj9ZHWrAJcUWEhUq
aouHvjzagN8QT2BCMB6e9rlN4ffqZ0Qq
ZRF5dlSuwuVV9TLhHKvPvRDrQ2L5ODfD
9ZjR3NTHue4YR6n4DgG5e0qMQcJjTaiM
QT8Bw9ofH4x3MeRvYAVbYvV1e1zq3Xim
i6A6TL6nqvjCAPvOdXZWjlYgyvqxmB7k
tx7tQ6kgeJnC446CHbiJY7fyRwrwuhrs 
```

一种方法是使用：

```
sort data.txt | uniq -u 
```

该命令与 cat 类似，它显示文件的内容，但它按行按[字典顺序](https://en.wikipedia.org/wiki/Lexicographical_order)`sort`对文件进行排序（它按字母顺序重新排序，以便匹配的内容放在一起）。

这`|`是一个将输出从一个命令重定向到另一个命令的管道。

该`uniq`命令报告或省略重复的行，并通过传递`-u`参数告诉它只报告唯一的行。

像这样一起使用，该命令将按每行按字典顺序对 data.txt 进行排序，找到唯一的行并将其打印回终端中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-22T20:42:05.510

```
sort -u data.txt | while read line; do if [ $(grep -c $line data.txt) == 1 ] ;then echo $line; fi; done 
```

是我的解决方案，直到我在这里看到简单的解决方案：

```
sort data.txt | uniq -u 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T14:08:01.623

为您的帖子添加更多信息。`data.txt`长得怎么样？像这样：

```
11111111
11111111
pass1111
11111111 
```

或者像这样

```
afawfdgd
password
somethin
gelse... 
```

而且，您知道密码在文件中还是您搜索不重复的字符串。

如果您知道密码，请使用类似的东西

`cat data.txt | grep 'password'`

如果您不知道密码并且此密码只是文件中的唯一行，您必须创建一个脚本。例如在 Python 中

```
file = open("data.txt","r")
f = file.read()
for line in f: 
   if 'pass' in line:
        print pass 
```

当然用别的东西代替 pass。例如一些从线切片。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-18T19:41:39.087

```
sort data.txt | uniq -c | grep 1 
```

你会发现只有一个会发生一次

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-27T18:25:34.640

```
sort data.txt | uniq -c | grep 1\ ?* 
```

它将打印仅出现一次的唯一文本不要忘记在反斜杠后放置空格

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-08T17:40:06.163

一个只使用一个工具，**awk**：

```
awk '{a[$1]++}END{for(i in a){if(a[i] == 1){print i} }}' data.txt 
```

# c - 正负值的不同输出

> ID：12782829
> 
> 赞同：3
> 
> 时间：2012-10-08T13:32:01.830
> 
> 标签：c, if-statement, c-preprocessor

考虑下面的代码：

```
#include<stdio.h>
int array[]={1,2,3,4,5,6,7,8};
#define SIZE (sizeof(array)/sizeof(int))

int main()
{
        printf("%d",SIZE);
        if(-1<=SIZE) printf("1");
        else printf("2");
        return 0;
} 
```

我得到 82 作为输出，但是如果我在 if 子句中用 0 或非负数替换`if(-1<=SIZE)`为`if(0<=SIZE)`或表示 -1，那么我得到 81 作为输出。`if(1<=SIZE)`为什么我得到不同的输出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T13:37:39.397

`sizeof`运算符返回一个`size_t`无符号*整数*类型。当您转换`-1`为无符号整数时，您会得到一个非常大的数字。

构建时打开更多警告，编译器会警告您比较有符号和无符号数据类型。

# jquery - 如何在所有浏览器的ckeditor中实现可拖动的浮动div？

> ID：12782833
> 
> 赞同：0
> 
> 时间：2012-10-08T13:32:13.687
> 
> 标签：jquery, ckeditor, draggable, jquery-ui-draggable

目前如果我们在ckeditor中添加一个绝对位置的浮动div，Firefox中会出现一个可拖动的句柄。

`<div id="Layer1" style="position:absolute; width:200px; height:115px; z-index:1; left: 46px; top: 90px;">Here is a floating layer</div>`

但是跨浏览器的行为并不一致。有没有办法在ckeditor中启用拖动选项到选定的div？

是否可以在这里使用可拖动的 jquery？在这种情况下，我们如何将所需的 jquery 库包含到 ckeditor 所见即所得区域并将事件绑定到 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:10:08.810

针对上述问题，我做了一个解决方法。在 ckeditor instnaceReady 中，我已将 js 添加到 ckeditor iframe 的 head 部分。

```
CKEDITOR.on('instanceReady', function(ev) {
   var oEditor = CKEDITOR.instances.editor;
   var h = oEditor.document.getHead();
   var element1 = oEditor.document.createElement( 'script' );
   element1.setAttribute('src','//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js');
   element1.setAttribute('type','text/javascript');
   h.append(element1);
   var element2 = oEditor.document.createElement( 'script' );
   element2.setAttribute('src','//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js');
   element2.setAttribute('type','text/javascript');
   var element3 = oEditor.document.createElement( 'script' );
   element3.setAttribute('src','drag.js');
   element3.setAttribute('type','text/javascript');
   h.append(element2);
   h.append(element3);

   function drag() {
    try {
     $('iframe').get(0).contentWindow.EnableDrag();
    }
    catch(err) {
     setTimeout(drag,10);
    }
   };

  setTimeout(drag,10);
}); 
```

在 drag.js 中，我添加了 EnableDrag() 函数。

```
EnableDrag = function() {
  $('#Layer1').draggable();                
} 
```

此代码适用于 ff、chrome 和 IE。

代码还是有一些问题，每次我们修改ckeditor的内容或者使用源码按钮，head里包含的binding和js都丢失了。此外，EnableDrag 函数在创建和附加对象后也不能立即使用。所以我使用 setTimeout 来添加延迟。在firefox中，拖动不是很流畅。

如果有人知道执行此操作的正确方法，请提供帮助。

# symfony - 覆盖特定实体的 base_edit_form.html.twig 并创建特定操作 - 错误：无法加载类型“操作”

> ID：12782836
> 
> 赞同：3
> 
> 时间：2012-10-08T13:32:15.870
> 
> 标签：symfony, symfony-2.1, symfony-sonata

所以我有一个 EmailAdmin 配置来管理 NewsletterBundle。

一切正常我有编辑、列表和显示有效的默认操作。

我查看了 Vendor/SonataAdminBundle 哪里是编辑/添加实体的模板（使用“创建”/“创建和添加”按钮），我找到了这个模板：“base_edit_form.html.twig”，其中包含按钮。

所以我这样做：

//配置新路由到sendemail并添加动作来配置表单字段

```
namespace Jade\NewsletterBundle\Admin;

use Doctrine\Common\Collections\Collection;

use Sonata\AdminBundle\Route\RouteCollection;

//use Jade\ReveBundle\Entity\Thematique;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;

class EmailAdmin extends Admin
{

    protected function configureRoutes(RouteCollection $collection) {
        $collection->add('sendemail','/sendemail'); 
    }

    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('objet')
            //->add('corps')
            ->add('corps', null, array('required' => false, 'attr' => array('class' => 'ckeditor')))   

            ->add('groupes')  

         ->add('groupes', 'sonata_type_model',
                           array(
                                   'by_reference' => false,
                                   'expanded' => true,
                                   'label' => 'Groupes',
                                   'compound' => true,
                                   'multiple' => true,
                           )
                   )
       ->add('_action', 'actions', array( 'actions' => array(  
        'sendemail' => array('template' =>
        'NewsletterBundle:Admin:sendemail.html.twig'),)));

    }

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('objet')
            ->add('corps')
        ;
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('id')
            ->add('objet')
            ->add('corps')

        ;
    }

    public function validate(ErrorElement $errorElement, $object)
    {
        $errorElement
            ->with('objet')
                ->assertMaxLength(array('limit' => 255))
            ->end()
        ;
    } 
```

// 这是我的 EmailAdminBundle ：

```
namespace Jade\NewsletterBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

class EmailAdminController extends Controller
{
    /**
     * @Route("/sendemail")
     * @Template()
     */
    public function sendemailAction()
    {
        return $this->render('NewsletterBundle:Admin:sendemail.html.twig');
    }

} 
```

//在 NewsletterBundle/Resources/views/Admin/sendemail.html.twig

```
{% block form %}
Override
    {% set url = admin.id(object) ? 'edit' : 'create' %}

    {% if not admin.hasRoute(url)%}
        <div>
            {{ "form_not_available"|trans({}, "SonataAdminBundle") }}
        </div>
    {% else %}
        <form class="form-horizontal" action="{{ admin.generateUrl(url, {'id': admin.id(object), 'uniqid': admin.uniqid, 'subclass': app.request.get('subclass')}) }}" {{ form_enctype(form) }} method="POST">
            {% if form.vars.errors|length > 0 %}
                <div class="sonata-ba-form-error">
                    {{ form_errors(form) }}
                </div>
            {% endif %}

            {% block sonata_pre_fieldsets %}{% endblock %}

            {% for name, form_group in admin.formgroups %}
                <fieldset {% if form_group.collapsed %}class="sonata-ba-fielset-collapsed"{% endif %}>
                    <legend>
                        {% if form_group.collapsed %}
                            <a href="" class="sonata-ba-collapsed" title="{{ 'link_expand'|trans({}, 'SonataAdminBundle') }}">{{ name|trans({}, admin.translationdomain) }}</a>
                        {% else %}
                            {{ name|trans({}, admin.translationdomain) }}
                        {% endif %}
                    </legend>

                    <div class="sonata-ba-collapsed-fields">
                        {% for field_name in form_group.fields %}
                            {% if admin.formfielddescriptions[field_name] is defined %}
                                {{ form_row(form[field_name])}}
                            {% endif %}
                        {% endfor %}
                    </div>
                </fieldset>
            {% endfor %}

            {% block sonata_post_fieldsets %}{% endblock %}

            {{ form_rest(form) }}

            {% block formactions %}
                <div class="well form-actions">
                    {% if app.request.isxmlhttprequest %}
                        {% if admin.id(object) %}
                            <input type="submit" class="btn btn-primary" name="btn_update" value="{{ 'btn_update'|trans({}, 'SonataAdminBundle') }}"/>
                        {% else %}
                            <input type="submit" class="btn" name="btn_create" value="{{ 'btn_create'|trans({}, 'SonataAdminBundle') }}"/>
                        {% endif %}
                    {% else %}
                        {% if admin.supportsPreviewMode %}
                            <input class="btn btn-info persist-preview" name="btn_preview" type="submit" value="{{ 'btn_preview'|trans({}, 'SonataAdminBundle') }}"/>
                        {% endif %}
                        {% if admin.id(object) %}
                            <input type="submit" class="btn btn-primary" name="btn_update_and_edit" value="{{ 'btn_update_and_edit_again'|trans({}, 'SonataAdminBundle') }}"/>
                            <input type="submit" class="btn" name="btn_update_and_list" value="{{ 'btn_update_and_return_to_list'|trans({}, 'SonataAdminBundle') }}"/>

                            {% if admin.hasroute('delete') and admin.isGranted('DELETE', object) %}
                                {{ 'delete_or'|trans({}, 'SonataAdminBundle') }}
                                <a class="btn btn-danger" href="{{ admin.generateObjectUrl('delete', object) }}">{{ 'link_delete'|trans({}, 'SonataAdminBundle') }}</a>
                            {% endif %}
                        {% else %}
                            <input class="btn btn-primary" type="submit" name="btn_create_and_edit" value="{{ 'btn_create_and_edit_again'|trans({}, 'SonataAdminBundle') }}"/>
                            <input class="btn" type="submit" name="btn_create_and_create" value="{{ 'btn_create_and_create_a_new_one'|trans({}, 'SonataAdminBundle') }}"/>
                      {% endif %}
                    {% endif %}
                </div>
            {% endblock formactions %}
        </form>
    {% endif%}

{% endblock %} 
```

而且我得到了错误：无法加载类型“动作”，所以我不知道为什么会出现这个错误？如果这是覆盖特定实体的特定视图的好方法？

谢谢您的帮助

# android - 锁定屏幕时Android音频流被中断

> ID：12782839
> 
> 赞同：0
> 
> 时间：2012-10-08T13:32:23.220
> 
> 标签：android, background, streaming

当我尝试**在后台流式传输音乐**时，我的应用程序出现问题，并且仅在**某些设备**上出现。

当应用程序在前台播放任何音乐时，它可以正常工作，但在某些设备中，当我按下电源按钮时，流会立即失去其质量（看起来就像我处于低速互联网连接时一样）。当我打开屏幕时，流再次变得更好。

我已经尝试过了`WakeLocks`，但是没有用。

* * *

编辑 1：这就是我使用唤醒锁的方式：

`OnCreate`我的活动：

```
//Setting the wakelock
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag"); 
```

而不是我在音乐开始时这样做：

```
wl.acquire(); 
```

当流停止时：

```
if(wl.isHeld()){
    wl.release();
} 
```

* * *

编辑2：

也试过这个：

```
mediaPlayer.setWakeMode(getApplicationContext(), PowerManager.PARTIAL_WAKE_LOCK); 
```

* * *

编辑3：

也尝试过使用 WiFi 锁：

```
//Setting the proper lockMode depending on the android version:
int wifiLockMode = WifiManager.WIFI_MODE_FULL;

int sdkVersion = Build.VERSION.SDK_INT;

//WIFI_MODE_FULL_HIGH_PERF was added on Android 3.1 so 
//I need to implement this to make sure the wifi will execute on its full power(even if it consumes more battery)
if (sdkVersion >= Build.VERSION_CODES.HONEYCOMB_MR1) {
wifiLockMode = WifiManager.WIFI_MODE_FULL_HIGH_PERF;
}

//Setting the WifiLock
WiFiManager wm = (WifiManager) this.getSystemService(Context.WIFI_SERVICE); 
WifiLock mWiFiLock = wm.createWifiLock(wifiLockMode, "MyFlag");
mWiFiLock.acquire();

//Releasing the WifiLock
if(mWiFiLock.isHeld()){
    mWiFiLock.release();
} 
```

使用 WifiLock 似乎会好一些（或者我已经习惯了中断的声音）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T08:19:11.383

我认为您不能真正做某事，因为我认为每个 OEM 都会重写它的“电池优化”规则，这些规则将在屏幕关闭时尝试保存电池。

最好的办法是遵循有关[MediaPlayer 的唤醒锁](http://developer.android.com/guide/topics/media/mediaplayer.html#wakelocks)系统的 Android 标准，然后用手指交叉 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T08:03:51.967

我在使用 android 4.3 的 Nexus 4 上遇到了同样的质量问题，发现如果我关闭“wifi 优化”，问题就解决了：Wi-Fi-> 高级 -> Wi-Fi 优化。

似乎与其他线程一致：

[https://code.google.com/p/android/issues/detail?id=42272#c319](https://code.google.com/p/android/issues/detail?id=42272#c319) [http://forum.xda-developers.com/showthread.php?t=2072930&page=55](http://forum.xda-developers.com/showthread.php?t=2072930&page=55)

如果这是真的，wifi 锁定不会阻止 wifi 优化。我还测试了唤醒锁不需要在屏幕关闭的情况下播放高质量的音乐，至少在 Nexus 4 上是这样。

# objective-c - 预加载模态视图控制器

> ID：12782841
> 
> 赞同：1
> 
> 时间：2012-10-08T13:32:38.427
> 
> 标签：objective-c

有一种方法可以在不显示的情况下预加载模态视图控制器吗？我问是因为当我显示模态视图控制器（分配和初始化视图控制器类）时，视图加载和显示有一点延迟。之后，当我尝试再次显示时，延迟停止。

我正在使用`UITableView`, 并在方法内部`scrollViewDidEndDragging`检查 是否`contentOffset.y`小于-90。如果是这样，用户基本上是“拉动刷新”，然后我正在加载视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:36:55.077

您可以手动调用 viewWillAppear、viewDidLoad。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:36:55.067

*   您可以使用`UINib`将 XIB 预加载到内存中。

它会将 XIB 的对象树预解码到内存中，但不会实例化 XIB 中的对象。然后你可以调用 的`instantiate`方法`UINib`来实例化视图。

*   您还可以通过调用其 getter 方法来强制加载`view`a （因为视图是延迟加载的，所以它会在第一次访问时从 XIB 加载）。`UIViewController``view`

但是由于您只能在主线程上实例化 UI 对象（来自您的 XIB）——因为每个 UI 组件和 UI 操作都必须在主线程中完成——您的应用程序仍将“冻结”（阻塞主线程）而你加载视图。例如，您不能将 XIB 的根 UIView 加载到单独的线程或队列中（如果您尝试这样做，您将遇到运行时异常）。

* * *

使用**Instruments**及其“时间分析器”工具来检查 XIB 文件的加载过程究竟需要时间。*（也许解决起来很容易，或者你可能会有一些组件，只有在视图显示后才能延迟加载，等等）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:38:28.660

您可以在 viewWillAppear 上加载视图的所有内容，然后将其显示。

或者，您可以加载 modalview 的所有属性，然后使用方法显示它。使视图成为属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:39:09.467

您可以尝试访问视图，这将使 viewDidLoad 方法被调用，尽管这不是事情应该做的方式......

```
//Preload
YourViewController * controller = [[YourViewController alloc] init];
controller.view.backgroundColor = [UIColor whiteColor];

.
.
.
.

//Load Controller after time
[self presentModalViewController:controller animated:YES]; 
```

# php - Magento - 需要自定义客户登录和注册表单，但登录表和注册表来自 Persistent 文件夹

> ID：12782842
> 
> 赞同：3
> 
> 时间：2012-10-08T13:32:40.730
> 
> 标签：php, magento, magento-1.5, magento-1.6, magento-1.7

我想在 Magento 的客户登录和注册表单中自定义样式和文本详细信息。

我使用默认主题。我应该编辑位于的登录页面： `/app/design/frontend/base/default/template/customer/form/login.phtml`和 register.phtml 用于注册页面。

我的问题是当我对上述文件进行更改时，显示/前端没有任何反映。所以我启用了管理员的模板提示，我可以通过将“当前配置范围”更改为“主存储”而不是“默认配置”来实现。现在我得到的 phtml 页面来自：' `/app/design/frontend/base/default/template/persistent/customer/form/login.phtml`'。

这两者有什么区别？如果我从持久文件夹编辑登录页面，我是否必须在管理员中更改任何内容？目前我正在本地检查并使用默认主题。

另外，如果有人知道，请提及为什么要从持久性中提取表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:57:29.397

**持久模块**

此功能基本上在登录和注册页面中添加了**记住我的选项。**它为现有模块添加了覆盖新功能。

# node.js - 在节点中使用redis获取哈希键的所有字段和值

> ID：12782844
> 
> 赞同：3
> 
> 时间：2012-10-08T13:32:43.280
> 
> 标签：node.js, redis

红色是使用哈希，我需要存储具有多个字段和值的哈希键。我尝试如下：

```
client.hmset("Table1", "Id", "9324324", "ReqNo", "23432", redis.print);
client.hmset("Table1", "Id", "9324325", "ReqNo", "23432", redis.print);
var arrrep = new Array();

client.hgetall("Table1", function(err, rep){
 console.log(rep);
}); 
```

输出是：`{ Id: '9324325', ReqNo: '23432' }`

我只得到一个值。如何获取哈希键中的所有字段和值？如果我错了，请帮助我并让我获取代码。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T14:35:18.040

您获得了一个值，因为您覆盖了先前的值。

```
client.hmset("Table1", "Id", "9324324", "ReqNo", "23432", redis.print); 
```

这会将 Id、ReqNo 添加到 Table1 哈希对象。

```
client.hmset("Table1", "Id", "9324325", "ReqNo", "23432", redis.print); 
```

这会覆盖 Table1 哈希对象的 Id 和 ReqNo。此时，哈希中只有两个字段。

实际上，您的问题来自您尝试将关系数据库模型映射到 Redis 的事实。你不应该。使用 Redis，最好从数据结构和访问路径的角度来考虑。

您需要为每条记录存储一个哈希对象。例如：

```
HMSET Id:9324324 ReqNo 23432 ... and some other properties ...
HMSET Id:9324325 ReqNo 23432 ... and some other properties ... 
```

然后，您可以使用集合来存储 ID：

```
SADD Table1 9324324 9324325 
```

最后检索与 Table1 集合关联的 ReqNo 数据：

```
SORT Table1 BY NOSORT GET # GET Id:*->ReqNo 
```

如果您还想搜索与给定 ReqNo 关联的所有 ID，那么您需要另一个结构来支持此访问路径：

```
SADD ReqNo:23432 9324324 9324325 
```

因此，您可以使用以下命令获取记录 23432 的 ID 列表：

```
SMEMBERS ReqNo:23432 
```

换句话说，不要尝试转置关系模型：只需创建自己的数据结构来支持您的用例。

# sqlalchemy - SQLAlchemy if/not 查询会话已附加

> ID：12782846
> 
> 赞同：1
> 
> 时间：2012-10-08T13:32:47.227
> 
> 标签：sqlalchemy, flask, flask-sqlalchemy

我从一个网站获取数据，该网站发布高中足球的分数并将其放入 Flask 项目中。我正在使用 Flask-SQLAlchemy 并尝试检查游戏是否已经存在；如果不是，我在数据库中创建一个新游戏，如果它确实存在，我只想更新分数（以防自上次导入以来对分数进行任何更正。这是我的代码：

```
"""
Save to Games Table
"""
game = Games.query.filter_by(game_date=g_date, team1_name=t1_name, team1_score=t1_score,   team2_name=t2_name, team2_score=t2_score).first()

"""
Need to set it to update scores if game already exists
"""
if not game:
    add_game = Games(year_id=None, team1_id=None, team1_name=t1_name, team1_score=t1_score, team2_id=None, team2_name=t2_name, team2_score=t2_score, game_date=g_date)  
    db.session.add(add_game)
else:
    game.team1_score = t1_score
    game.team2_score = t2_score
    db.session.add(game)

db.session.commit() 
```

当我运行代码时，它给了我这个错误：

> sqlalchemy.exc.InvalidRequestError：对象“”已附加到会话“1”（这是“2”）

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:04:20.360

如果对象是从查询中获得的，则无需将对象添加到会话中。

```
game = Games.query.filter_by(...).first()

if not game:
    add_game = Games(...)  
    db.session.add(add_game)
else:
    game.team1_score = t1_score
    game.team2_score = t2_score

db.session.commit() 
```

# django - Django：使用 ContentType 与 multi_table_inheritance

> ID：12782847
> 
> 赞同：9
> 
> 时间：2012-10-08T13:32:46.377
> 
> 标签：django, django-models

我遇到了与 [如何在 Django 中查询基于抽象类的对象类似的问题？](https://stackoverflow.com/questions/3797982/how-to-query-abstract-class-based-objects-in-django) 该线程建议使用 multi_table_inheritance。我个人认为使用 content_type 在概念上更舒服（感觉更接近逻辑，至少对我来说）

使用上一个链接中的示例，我只需添加一个 StelarType 作为

```
class StellarType(models.Model):
    """
    Use ContentType so we have a single access to all types
    """
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

然后将其添加到抽象基础模型中

```
class StellarObject(BaseModel):
    title = models.CharField(max_length=255)
    description = models.TextField()
    slug = models.SlugField(blank=True, null=True)
    stellartype = generic.GenericForeignKey(StellarType)
    class Meta:
        abstract = True 
```

为了在 StellarObject 和 StellarType 之间同步，我们可以连接 post_save 信号以在每次创建 Planet 或 Star 时创建一个 StellarType 实例。这样，我就可以通过 StellarType 查询 StellarObjects。所以我想知道使用这种方法反对使用 multi_table_inheritance 的优点和缺点是什么？我认为两者都在数据库中创建了一个附加表。但是数据库性能如何？可用性/灵活性如何？感谢您的任何意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T08:40:49.833

对我来说，ContentType 是当您想要将一个对象与许多根本不属于同一“类型”的模型之一相关联时要走的路。就像您希望能够在社交网络上为用户、页面和图片键入评论，但是这三个模型没有合理的超类型共享。当然你可以创建一个“Commentable”超类型，但对我来说，这感觉更像是一个 mixin，而不是这三个东西派生出来的基本类型。在 ContentType 出现之前，你别无选择，只能为这种关系发明超类型，如果你需要在同一个应用程序中多次这样做，它会很快变得非常丑陋（假设你还有事件、警报、消息等，每个都可以应用于不同的模型集）。

当您想要将属性附加到基本模型时，多表继承最有意义，这样它们将在从它扩展的所有具体模型中共享，以便您可以获得多态行为。Commentable 并不真正适合这种模式，因为所有这些行为都可以放在 Comment 模型上，而不能放在 Commentable 对象上。但是，如果您有不同类别的用户，它们具有许多相同的行为并且应该是可聚合的，那么它就更有意义了。

对我来说，多表继承的主要优点是更简洁的数据模型，具有可以在 Python 端利用的隐式关系和继承（但多态性仍然有点混乱，如[这里](http://ankhos.com/2010/01/15/django-polymorphism-mixins-vs-inheritance-models/)和[这里](https://stackoverflow.com/questions/5855358/django-accessing-subclasses-of-models)所示）。ContentType 的主要优点是它更通用，并且将辅助功能排除在模型之外，但代价是稍微不那么原始的模式（模型上有很多“元”字段来定义这些关系）。对于您的示例，您仍然必须依赖`post_save`，这对我来说似乎也不必要地混乱/神奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T00:32:51.777

抱歉恢复旧线程。我认为这一切都归结为查找方向。无论您是查找某个 FK（多表继承）的所有子类，还是将引用的类定义为内容类型并根据表引用和 id（内容类型）进行查找，性能都没有太大差异 - 提示：它们都很糟糕。如果您希望您的应用程序易于扩展，我认为内容类型是一个不错的选择，即其他人可以添加新的内容类型以供参考。如果您有时只需要在额外表中定义的额外列，多表是很好的。有时，合并所有子类型并只制作一个在大多数情况下有几个字段留空的子类型也是一个好主意。

# logging - 从扩展程序登录到 Web 控制台

> ID：12782850
> 
> 赞同：2
> 
> 时间：2012-10-08T13:32:56.760
> 
> 标签：logging, firefox-addon

是否可以从 Firefox 扩展程序登录到 Firefox 的网络控制台？

我一直在尝试使用 console.log Application.console.log 通过接口使用适当的 mozilla 代码，但我似乎能做的就是登录到旧的错误控制台。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:06:26.123

window.content.console.log() 可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:56:55.813

将环境切换到浏览器并从 Scratchpad 运行以下代码

`gBrowser.contentWindow.console.log("Hello world");`

该消息将仅由当前页面的 Web 控制台记录。

# c# - 服务器端单引号破坏javascript字符串

> ID：12782853
> 
> 赞同：0
> 
> 时间：2012-10-08T13:33:25.280
> 
> 标签：c#, javascript, jqplot

我有一个服务器端变量

```
string test = "test";
ticks = "['" + test + "']"; 
```

我正在为页面上的隐藏字段设置刻度，但是当我尝试在 javascript 中获取值时，单引号会破坏字符串，而我从中得到的只是 [. 有没有解决的办法？

我正在使用 c# 3。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:39:26.820

不要手动形成字符串，而是使用 json 解析器

```
string js = new JavaScriptSerializer().Serialize(new[]{"a","b","c"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:35:35.710

尝试使用 '\'' 转义您的测试值

# javascript - jQuery动态添加的类未被应用

> ID：12782857
> 
> 赞同：0
> 
> 时间：2012-10-08T13:33:45.213
> 
> 标签：javascript, jquery, css, jquery-ui

我有一个很奇怪的行为。我在运行时附加了一个类，但该类没有被应用（尽管我可以通过 firebug 调试看到它在那里）。这是一个完全（非）功能的示例：

```
<html>
    <head>
        <link rel='stylesheet' href='./jQuery/css/superfish/superfish.css' type='text/css' />
        <link rel='Stylesheet' href='./jQuery/css/smoothness/jquery-ui-1.8.16.custom.css' type='text/css' />
        <script type='text/javascript' src='./jQuery/js/jquery-1.6.2.min.js'></script>
        <script type='text/javascript' src='./jQuery/js/jquery-ui-1.8.16.custom.min.js'></script>
        <script type='text/javascript' src='./jQuery/js/jquery.ui.datepicker-de.js'></script>
        <script type='text/javascript' src='./jQuery/js/jquery-ui-timepicker.js'></script>
        <script type='text/javascript' src='./jQuery/js/jquery-ui-timepicker-de.js'></script>
        <script type='text/javascript'>
            $(function () {
                $('.DateTimePicker').datetimepicker({
                    stepMinute: 15
                });
            });
        </script>  
    </head>
    <body>
        <script type='text/javascript'>
            function testMe() {
                $("[id$=Working]").addClass('DateTimePicker');
            }
        </script>
        <input id="notWorking" type="text">
        <input id="clickToTest" type="button" onclick="testMe()">
        <input id="static" type="text" class="DateTimePicker">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:36:40.900

当您单击`<input type="submit" />`正在添加的类时，然后正在执行重新加载页面的 POST 并且该类在新加载时不应该存在。

尝试将其更改为`<input type="button" />`，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:05:12.297

我认为您遇到的问题是`datetimepicker()`使用 class 初始化所有元素`.dateTimePicker`，但是当您动态地将类添加到其他元素`datetimepicker`时，这些元素不会再次初始化。这是我以前看到用来解决这个问题的一段代码。

```
$(document).ready(function(){

  $('.DateTimePicker').on('click', function(){
     $(this).datetimepicker({
         stepMinute : 15
     }).datetimepicker('show');
  });

}); 
```

这意味着 datetimepicker 在使用 附加后直接调用`.on()`。更多信息[在这里](http://api.jquery.com/on/)。这样，`.DateTimePicker`即使它们是动态添加的，也会在所有具有该类的元素上初始化 datetimepicker。希望这可以帮助。

**更新：**

如果您不喜欢这种方法，我还看到了其他几种方法。一种巧妙的做法是[在这里](https://stackoverflow.com/questions/9640493/jquery-datepicker-not-working-on-dynamically-created-html)。

另一种方法是删除 datetimepicker 添加到元素的类（因此它知道哪些元素已在其上初始化了 datetimepicker），然后再次将 datetimepicker 重新绑定到您的类。

```
function testMe() {                           
   $("[id$=Working]").addClass('DateTimePicker');
   $('.DateTimePicker').removeClass('hasDatepicker').datetimepicker({ stepMinute: 15 });
} 
```

# magento - 具有不同排序的 Magento 属性

> ID：12782858
> 
> 赞同：2
> 
> 时间：2012-10-08T13:33:46.167
> 
> 标签：magento, sorting, attributes

我是 php 新手，我想要的是如果我可以通过在文件中执行类似的操作将排序顺序定义为仅按价格显示的产品

Mage_Adminhtml_Model_System_Config_Source_Catalog_ListSort

```
$options[] = array(
    'label' => Mage::helper('catalog')->__('Price'),
    'value' => 'price'
    'getCurrentDirection' => 'asc'
); 
```

其余属性按降序排列。

不幸的是，似乎没有工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:09:44.650

我认为您正在查看错误的文件。您在上面描述的 ListSort 文件仅列出了排序依据的可用选项。它对当前的排序没有任何作用。

此外，您引用的文件位于 Adminhtml 范围内。如果您需要更改前端的默认排序，您应该查看其他地方。

如果我理解正确，您的问题是如果选择价格作为排序依据，默认情况下如何对 ASC 进行排序，而默认排序 DESC 是另一个属性用于排序依据。

对于前端，您应该查看 Mage_Catalog_Block_Product_List_Toolbar 文件中的 getCurrentOrder() 函数。在这里，您可以使用默认方向和排序顺序。破解 app/core/Mage 文件不是一个好习惯，但您可以复制此文件并将其放在 app/local/Mage/* （与核心文件完全相同的目录）中，它会自动重载默认方法。

对于后端，您可以查看 Mage_Adminhtml_Block_Widget 文件中的 _prepareCollection() 函数。默认排序是“desc”，因此您只需将价格更改为“asc”即可。在这里，您也应该在 app/local/Mage/* 中进行复制。您可以尝试这样的事情（对于 Magento 1.7.1.0，这是第 507-508 行）：

改变

```
$columnId = $this->getParam($this->getVarNameSort(), $this->_defaultSort);
$dir      = $this->getParam($this->getVarNameDir(), $this->_defaultDir); 
```

至

```
$columnId = $this->getParam($this->getVarNameSort(), $this->_defaultSort);
if($this->getVarNameSort() == 'price') {
    $dir      = $this->getParam($this->getVarNameDir(), 'asc');
} else {
    $dir      = $this->getParam($this->getVarNameDir(), $this->_defaultDir);
} 
```

我希望这有帮助！

# symfony - 无法将 EntityManager 注入 Twig 扩展

> ID：12782860
> 
> 赞同：3
> 
> 时间：2012-10-08T13:33:51.987
> 
> 标签：symfony

我在将 EntityManger 注入 Symfony2 树枝扩展时遇到问题。我做了以下事情：

我注册了一个新的树枝扩展并创建了一个类。所有这些都在工作。现在我想访问数据库并尝试注入学说 EntityManager。我的第一步是将 EM 作为参数添加到构造函数中：

```
use XYZ\BlubBundle\Utils\SessionHelper;

class SessionHelperExtension extends \Twig_Extension
{
    private $em;
    private $conn;
    protected $sessionHelper;

    public function __construct(\Doctrine\ORM\EntityManager $em, \XYZ\BlubBundle\Utils\SessionHelper $sessionHelper) {
        $this->em = $em;
        $this->conn = $em->getConnection();
        $this->sessionHelper = $sessionHelper;
    }

    [...]
}

?> 
```

然后我在 service.yaml 中添加了以下几行：

```
twig.extension.sessionHelper:
    class: XYZ\BlubBundle\Extensions\SessionHelperExtension
    arguments: [@session_helper, @doctrine.orm.entity_manager]
    tags:
        - { name: twig.extension } 
```

我自己的服务“sessionHelper”被注入没有问题，但 EntityManager 始终为“null”。我在这里做错了什么？

编辑：我得到以下异常：

```
Catchable Fatal Error: Argument 2 passed to
XYZ\BlubBundle\Extensions\SessionHelperExtension::__construct() must be an instance of
Doctrine\ORM\EntityManager, none given, 
called in /.../Symfony/app/cache/dev/appDevDebugProjectContainer.php on line 2918 and 
defined in /.../Symfony/src/XYZ/BlubBundle/Extensions/SessionHelperExtension.php line 12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:37:17.993

```
public function __construct(
    \Doctrine\ORM\EntityManager $em, 
    \XYZ\BlubBundle\Utils\SessionHelper $sessionHelper
) { 
```

是错误的——你需要保持与以下相同的顺序`yml`：

```
public function __construct(
    \XYZ\BlubBundle\Utils\SessionHelper $sessionHelper, 
    \Doctrine\ORM\EntityManager $em
) { 
```

## 更新

试试这个： http: [//www.coderelic.com/2012/06/querying-the-database-from-a-twig-extension-in-symfony-2/](http://www.coderelic.com/2012/06/querying-the-database-from-a-twig-extension-in-symfony-2/)

# visual-studio-2010 - 显示错误“此项目与当前版本的 Visual Studio 不兼容”

> ID：12782863
> 
> 赞同：29
> 
> 时间：2012-10-08T13:34:07.620
> 
> 标签：visual-studio-2010, visual-studio-2012

我在我的 PC 中安装了 Vs 2010 Express，并使用 .net 4.0 创建了一个名为 myproject 的项目，它在 Vs 2010 Express 中运行良好。

现在我在我的电脑上安装了 Vs 2012 Express，打开项目 myproject 并将其升级到 .net 4.5，它在 Vs 2012 Express 中也很好。

我删除了项目 myproject 的所有文件，然后从我的旧备份文件中恢复它，当我尝试从 Vs 2010 Express 打开项目时，我得到以下信息。
“这个项目与当前版本的visual studio不兼容”，为什么？

如何在 Vs 2010 Express 中打开项目？我猜 Vs 2012 Express 可能会将项目标记为 .net 4.5 并将信息存储在硬盘驱动器的某个位置。虽然我从旧备份文件恢复项目 myproject，但 Vs 2010 Express 仍然认为它是 .net 4.5 的项目。

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-25T00:26:20.733

如果消息“此项目与 Visual Studio 的当前版本不兼容”是由于尝试使用 Visual Studio 2010 打开面向 .Net 4.5 的项目，则“解决方案”或解决方法是编辑 .csproj 文件并更改TargetFrameworkVersion 从“v4.5”到“v4.0”。这至少允许加载项目，尽管如果程序依赖于 4.5 功能，它可能会导致编译器错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-15T13:04:30.893

我知道这有点老了，但以防万一上述解决方案不起作用：不要像我这样的白痴并尝试使用“VS for Desktop”而不是“VS for Web”（或反之亦然），因为它会给你不兼容的消息。

我在工作中使用 TFS，并尝试通过 TFS 解决方案资源管理器打开一个 MVC 项目。我没有注意我打开了哪个 Visual Studio 版本，而且由于两个 IDE 看起来很相似，我对发生的事情感到困惑 - 一个常见的错误，我敢肯定 =P

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-14T10:34:25.350

如果实际上是扩展 (.vsix) 的项目遇到相同的错误，请安装[Microsoft Visual Studio 2012 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=30668)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-30T14:09:31.867

安装[KB2781514 - Microsoft Visual Studio 2012 更新](http://www.microsoft.com/en-us/download/details.aspx?id=36020)为我解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-17T13:48:54.780

检查包含解决方案文件的目录中的`UpgradeLog.htm`文件。它可能会显示出什么问题。在我的例子中，我试图打开一个 ASP.NET 项目，但没有安装**Web Developer Tools 。**

之后可以通过转到控制面板并修改现有的 Visual Studio 安装来安装 Web 开发人员工具。添加 Web 开发人员工具后，项目打开没有问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-14T11:10:02.920

就我而言，问题是**组件模型缓存**（Visual Studio for C++）。

在 VS2013 中它位于

```
%localappdata%\Microsoft\VisualStudio\12.0\ComponentModelCache 
```

在 VS2015 中

```
%localappdata%\Microsoft\VisualStudio\14.0\ComponentModelCache 
```

重命名此文件夹并重新启动 Visual Studio。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-13T14:47:11.643

我收到此错误是因为在 BizTalk 安装期间我没有选中开发人员工具和 SDK 复选框。我回去修改了我的安装，这个错误现在对我来说消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-03T21:30:40.837

尝试在开发人员计算机上未安装 BizTalk 的情况下在 VS2012 中加载 BizTalk 项目，将导致此错误并且项目将加载。这应该是您检查的第一件事。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-13T15:35:29.310

确保您的所有扩展都与以前的版本相同。对我来说，当我从旧 PC 升级到新 PC 时，我没有下载正确的扩展，因此导致了上述问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-31T04:40:35.313

I faced out with this problem, the solution was:

1.  Open VS2017
2.  Go to **Tools**
3.  Go to **Extensions and updates**
4.  Search for **Reporting Services Project** and then "Enable"; close your VS.
5.  Open again your project/solution.

-- MT

# javascript - 在 javascript 中使用正则表达式验证 url

> ID：12782867
> 
> 赞同：1
> 
> 时间：2012-10-08T13:34:25.103
> 
> 标签：javascript, regex

> **可能重复：**
> [在 Javascript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)
> [检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)

我想测试该字符串是否为 url，现在我被困在这一点上。我正在使用这个正则表达式来验证我的 URL `/(https|http):\/\/([_a-z\d\-]+(\.[_a-z\d\-]+)+)(([_a-z\d\-\\\.\/]+[_a-z\d\-\\\/])+)*/;`

这个正则表达式的问题是它无法验证这种类型的 URL

`http://www.abc/abc/`

如何检查这种情况。？

# wcf - 如何使用 WCF 签署 X509 令牌

> ID：12782869
> 
> 赞同：7
> 
> 时间：2012-10-08T13:34:31.853
> 
> 标签：wcf, web-services, soap, weblogic, wcf-security

我正在开发一个必须与 Oracle WebLogic 服务对话的 WCF 客户端。该服务强制执行相互证书身份验证。

但是，我们无法满足该策略，并且服务器记录了一条错误消息：

> “WSM-00081：X.509 证书未签名。”

我一直想知道这到底是什么意思。Oracle 文档指出：

> WSM-00081：X.509 证书未签名。
> 
> 原因：使用的 X509 令牌没有按照证书认证场景的要求进行签名。
> 
> 行动：签署 X509 令牌（取决于使用的参考机制）进行证书身份验证。
> 
> 1级
> 
> 类型：错误
> 
> 影响：安全

( [http://docs.oracle.com/cd/E25054_01/core.1111/e10113/chapter_wsm_messages.htm](http://docs.oracle.com/cd/E25054_01/core.1111/e10113/chapter_wsm_messages.htm) )

经过一番研究，我们发现我们可以通过设置禁用服务策略配置文件中的检查`is-signed="false`：

```
<orasp:x509-token orasp:enc-key-ref-mech="direct" orasp:is-encrypted="false"
              orasp:is-signed="false"
              orasp:rcpt-enc-key-ref-mech="direct"
              orasp:rcpt-sign-key-ref-mech="direct"
              orasp:sign-key-ref-mech="direct"/> 
```

我的两个理论：

*   证书需要由 CA 签署
    *   我们使用由 CA 签名的证书进行了检查，但这没有任何区别
    *   但是，我们在配置它时可能会犯一些错误。我们应该试一试吗？
*   我们需要对请求中包含的 BinarySecurityToken 进行签名。
    *   但是，我不知道我该怎么做

我是否完全误解了这个主题，或者你们中的任何人都可以指出问题可能是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:46:34.657

您需要签署安全令牌作为请求的一部分。

在配置的绑定元素中，将安全元素模式设置为[SecurityMode.Message](http://msdn.microsoft.com/en-us/library/system.servicemodel.securitymode.aspx)并将消息元素 clientCredentialType 设置为[MessageCredentialType.Certificate](http://msdn.microsoft.com/en-us/library/system.servicemodel.messagecredentialtype.aspx)：

```
<security mode="Message">
    <message clientCredentialType="Certificate"
        algorithmSuite="Default"
        establishSecurityContext="true" />
</security> 
```

接下来，创建一个端点行为来解析[客户端证书](http://msdn.microsoft.com/en-us/library/ms732391.aspx)的位置：

```
<behavior name="endpointCredentialBehavior">
    <clientCredentials>
        <clientCertificate findValue="Contoso.com" 
            storeLocation="LocalMachine"
            storeName="TrustedPeople"
            x509FindType="FindBySubjectName" />
    </clientCredentials>
</behavior> 
```

# android - 如何使我的应用程序成为默认启动器

> ID：12782879
> 
> 赞同：0
> 
> 时间：2012-10-08T13:35:21.607
> 
> 标签：android, sms, default

我已经开发了发送/接收 SMS 消息的应用程序。

我想让我的应用程序作为默认值，以便在收到消息并从通知区域查看消息时读取消息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:40:10.183

您可以接收并发送短信，但不能阻止其他应用程序接收短信。至少不是没有根。
用户必须选择他正在使用的 SMS-App，并且他需要手动禁用来自默认 SMS-App 的通知。
如果您希望在接收短信时显示它们，您还需要实现自己的通知。

# java - 你能制作一个不可关闭、不可离开的 Java 应用程序吗？

> ID：12782882
> 
> 赞同：10
> 
> 时间：2012-10-08T13:35:31.440
> 
> 标签：java, swing, jframe

有没有办法确保用户不能关闭或离开我的 Swing 应用程序？我试图让它全屏显示，但你仍然可以 Alt-Tab 离开它——此外，当你决定使用 JOptionPane 的对话框时，它不能很好地工作。

那么，有没有办法让用户在一台设备上只使用这一个 Java 程序呢？

编辑：有些人想知道目的。该应用程序应该被“嵌入”到手持设备（在 Windows 下运行）中，因此设备的用户将按照我们的意图使用它——例如，他们不会玩 Freecells 或做更糟糕的事情，而不是做实际的工作。你见过售票亭吗？它们被很好地锁定了，你不能只关闭它们华丽的 GUI 并进入 Windows 桌面！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T15:21:58.893

好的@Daniel 向您展示了如何通过调用使 Java 应用程序无法关闭（对他 +1）：

`JFrame#setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);`

在`JFrame`实例上。

为了确保您不能离开它，即按`CTRL`+ `ALT`+`DEL`和`ALT`+`TAB`等，您可能需要这样做（仅适用于 Windows）：

1）通过以下方式禁用TaskManager / `CTRL`++ `ALT`：`DEL`

*   设置注册表项：

    > HKCU/软件/微软/Windows/CurrentVersion/策略/系统/DisableTaskMgr = 1

    通过 reg 脚本或 cmd.exe。

2) 要同时禁用所有快捷方式，如`ALT`+`TAB`等，请参见[此处](http://www.sevenforums.com/tutorials/5937-windows-key-shortcuts-enable-disable.html) （下载/使用`*.reg`脚本并通过执行它`cmd`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:55:01.890

我们对 POS 应用程序做类似的事情，但我们有点作弊。虽然使用全屏有很大帮助，但我们发现用户仍然可以退出应用程序。

最后，我们创建了一个 Windows 服务（是的，我们在 Windows 上运行），一旦它关闭就会自动重启。因此，您可以在一瞬间看到 Windows 桌面（我们删除了图标），但随后该应用程序再次弹出。这样做的好处还在于，我们可以从 Intranet 远程更新 JAR 文件，用户只需按下关闭系统的按钮，系统会自动重新启动并更新。我们想使用 WebStart，但在将它与我们的包装器集成时遇到了问题。

包装器本身是一个 Python 应用程序，它只是启动 JVM 和应用程序，编译为 EXE。简单，但有效。

最终效果是一个可关闭的应用程序，它将自动重新启动。在我们需要用户能够做一件事且只做一件事的情况下，我们的使用已经足够好了。为应用程序管理员权限提供启动凭据，而用户只是一个普通帐户，同时也照顾了讨厌的“alt-ctrl-del”用户。你不能杀死一个拥有比你自己更高访问权限的进程。

如果您不想编写自己的包装器，请试一试[http://wrapper.tanukisoftware.com/doc/english/product-overview.html](http://wrapper.tanukisoftware.com/doc/english/product-overview.html)，它看起来像是一款出色的产品。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T13:37:11.437

不可关闭是的，您可以使用`setDefaultCloseOperation();`并通过它`JFrame.DO_NOTHING_ON_CLOSE`

**例子：**

```
import javax.swing.*;
import java.awt.*;

class app extends JFrame {
    app(String title, int height, int width)
    {
        super (title);
        setSize(width, height);
        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        setVisible(true);
    }

}
class program {
    public static void main(String[] args) {
        app myApp = new app("Hello", 350, 750);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T13:39:22.250

您可以在应用程序中捕捉到几乎任何您喜欢的击键（并忽略它们），因此可以修复 Alt-Tab。**应用程序永远无法**（ish）自己处理的一个组合键是 Ctrl+Alt+Delete，出于安全原因，它在许多操作系统中被挂接到内核中。附带说明：这就是为什么许多登录屏幕要求您在输入用户名和密码之前点击 C+A+D。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T13:41:06.070

您可以制作一个无法取消最大化或关闭的最大化窗口。您还必须捕获某些击键，例如 CTRL+SHIFT+ESCAPE、ALT+TAB、WIN+[anything]、各种 Fn 键，并且您必须采取一些措施来阻止 CTRL+ALT+DELETE 工作（从显示任务管理器或从 windows vista 或 7 中调出蓝色选项屏幕。

我相信有 Windows API 调用可以以某种方式改变 CTRL+ALT+DELETE 的行为，但不知道它们是什么。Sysinternals Process Explorer 是一个研究的好地方，它具有替换任务管理器的功能。弄清楚它是如何做到的，然后复制它。

# c# - 对集合中的对象进行平均，并将其视为同一集合中的新对象

> ID：12782888
> 
> 赞同：1
> 
> 时间：2012-10-08T13:35:50.597
> 
> 标签：c#, winforms

我有一组反映在 UI 中的自定义对象

界面（极其简化）

```
public interface IMyInterface
{
  string Name { get; set; }
  int Data { get; set; }
} 
```

收藏

```
MyCollection<IMyInterface> Foo; 
```

`Foo`UI（以合理的方式显示内容，例如）

```
Name: [ asdf ] Data: [ 1234 ]
Name: [ qwer ] Data: [ 5678 ]
Name: [ zxcv ] Data: [ 0000 ] 
```

我现在需要在我的程序中打开两种`IMyInterface`类型并显示平均数据以及单个`IMyInterface`对象：

```
Name: [ asdf ] Data: [ 1234 ]
Name: [ qwer ] Data: [ 5678 ]
Name: [ zxcv ] Data: [ 0000 ]
Name: [ 2 Objects (asdf, qwer) ] Data: [ 3456 ] 
```

我必须能够摆脱这个新的平均水平`asdf`。`qwer`

我可以实现这一目标的最佳方法是什么？我觉得我有三个选择：

1.  `IMyInterface`使用 s的内部集合创建一个继承自的类型`IMyInterface`。然而，这感觉有点脏，因为一些属性是不可平均的。
2.  替换`Foo`为 `MyCollection> 并在我使用它的地方检查内部集合的计数
3.  将 MyCollection 变成一个类似字典的对象，我可以在其中为每个对象指定一个“组”，然后我可以通过它们的组 ID 取出对象。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:04:23.280

您可以使用[复合设计模式](http://en.wikipedia.org/wiki/Composite_pattern)，其中一个很好的示例是 .net 中的控件树：

每个 IMyInterace 可以有一个 IMyInterfaces 的集合，你可以选择如何处理不相关的属性（你总是可以返回 null）

# navigation - 在magento中，我如何将索引页面和主页设置为同一个链接

> ID：12782889
> 
> 赞同：0
> 
> 时间：2012-10-08T13:35:59.043
> 
> 标签：navigation, magento-1.7, magento

我有一个导航菜单：- home aboutus test summery

我在 magento.now 工作，当我加载索引页面时，它显示与“主页”菜单页面不同的页面。我只需要链接两个页面。我的意思是当我加载索引页面时，应该加载“主页”菜单页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:02:31.217

来自 Magento 知识库：

> 1.  在管理面板中，选择系统 > 配置。
> 2.  单击位于“常规”部分下方的左侧面板中的“Web”选项卡。
> 3.  展开默认页面栏以显示以下选项。
> 4.  在 CMS 主页下拉菜单中，选择您希望设置为网上商店主页的页面。
> 5.  单击保存以保存您的更改。

[http://www.magentocommerce.com/knowledge-base/entry/how-to-change-the-home-page](http://www.magentocommerce.com/knowledge-base/entry/how-to-change-the-home-page)

# coldfusion - cfloop vs cfoutput 查询

> ID：12782894
> 
> 赞同：9
> 
> 时间：2012-10-08T13:36:23.483
> 
> 标签：coldfusion, cfloop

我使用 ColdFusion 进行开发，想知道循环大型查询结果集的最佳策略是什么。使用 cfloop 和 cfoutput 之间有什么性能差异吗？如果不是，是否有任何理由更喜欢其中一个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T13:45:40.463

我相信曾经有过。我认为这种差异已经得到解决，最好的办法是为每个测试做一个测试，以在你的特定用例中进行测试。

```
<cfset t = GetTickCount()/>
<cf... query="qry">
  <!--- Do something --->
</cf...>
<cfset dt = GetTickCount() - t/>
<cfdump var="#dt#"/>
<!--- 
If the differences are small you can use java.lang.System.nanoTime() instead 
---> 
```

虽然有一些显着的差异。`cfoutput`可以做分组循环，但`cfloop`不能。

```
<cfoutput query="qry" group="col">
  <!--- Loops once for each group --->
  <cfoutput>
    <!--- Loops once for each record within the group --->
  </cfoutput>
</cfoutput> 
```

因为`cfoutput`您可以指定`startrow`和`maxrows`（或计数）来对结果进行分页。因为`cfloop`您必须指定`endrow`索引而不是计数。

此外，您不能`cfoutput`用于嵌套在现有`cfoutput`标签中的查询，您需要先结束包含`cfoutput`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T15:34:48.460

使用 cfloop 而不是 cfoutput 的一个很好的理由是，如果您需要在另一个查询输出中循环查询输出​​，那么 cfoutput 不支持嵌套查询输出。但是，您可以使用 cfloops 摆脱它。所以：

```
<cfoutput query="test1">
   #test1ID#
   <cfoutput query="test2">
      #test2ID#
   </cfoutput>
</cfoutput> 
```

不起作用，但如果你用 cfloops 替换 cfoutputs，它会的。

从 CF10 开始，能够对 cfloop 进行分组，这是唯一剩下的功能差异。他们都表现相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T13:46:12.390

我相信这和表演一样，[Ben Forta](http://www.houseoffusion.com/groups/cf-talk/thread.cfm/threadid:43759)

至于你“喜欢”如何使用你的循环，其余的几乎都是个人喜好。请记住，您应该始终确定变量的范围，但在 cfoutput 循环中这一点尤其重要，因为“可以”在不引用其范围的情况下引用查询字段。

您可能更喜欢 cfloop 方法的一个原因是，如果您出于任何原因需要在循环期间“转义”cfoutput。我遇到过几次，所以我通常更喜欢cfloop。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T13:44:07.403

使用任何一种方法都不会产生性能差异，这实际上取决于您的编码风格。如果您`<cfoutput>`在每个页面的顶部和底部放置一个，那么使用效果`<cfloop>`会很好。如果您使用多个`<cfoutput>`且仅在需要它们的地方也可以使用。

我个人`<cfoutput>`只把它们放在必要的地方，但我不会说这比把它们放在页面的顶部和底部更正确。

# google-drive-api - Google Drive 集成 3rd 方云存储提供商

> ID：12782898
> 
> 赞同：1
> 
> 时间：2012-10-08T13:36:51.073
> 
> 标签：google-drive-api

有没有办法将 Google Drive 与 3rd 方云（公共或私有）提供商集成。我的意思是，您能否创建一个文件夹，其内容链接到另一个云提供商（即 Dropbox 或您公司中的私有云），或者您将在 Google Drive 中看到的所有内容都必须驻留在 Google 中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:48:10.110

你不能以用户体验有意义的方式来做。您需要实现自己的文件查看器，它是 Drive 和 Dropbox 等文件存储的混搭。

# api - Linkedin：为 Web 和移动设备注册应用程序

> ID：12782903
> 
> 赞同：0
> 
> 时间：2012-10-08T13:37:02.937
> 
> 标签：api, linkedin

我的项目同时处理 Web 应用程序和移动应用程序。因此，在我们可以在项目中使用 Linkedin API 之前，我们需要根据此[Quick Start](https://developer.linkedin.com/documents/quick-start-guide)向 Linkedin 注册我们的应用程序。但是对于我在网络和移动设备上使用 Linkedin API 的情况，我是否需要向 Linkedin 注册两个应用程序。或者有没有其他方法可以注册一个应用程序并将其用于网络和移动设备？

在注册页面中，我看不到 Web 和 Mobile 有任何区别，不像 facebook，注册的单个应用程序可用于 Web 和移动应用程序。

如果有人可以向我指出适当的文档或指针，那将非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:36:02.907

当用户授权您的 LinkedIn 应用程序时，他们的授权与该特定 API 密钥相关联 - 如果您要在单个用户领域中使用多个密钥，则用户理论上必须同时授权它们。

简而言之，如果您的用户要同时接触网络和移动设备，我认为使用多个密钥没有任何优势。

# c# - MVC 3 NopCommerce '$' 字符作为 url 参数名称的一部分

> ID：12782907
> 
> 赞同：1
> 
> 时间：2012-10-08T13:37:17.627
> 
> 标签：c#, asp.net-mvc-3, url-rewriting, routes, nopcommerce

我正在与 NopCommerce 合作，通过信用卡付款。我没有使用插件，而是简单地重定向到付款页面。付款完成然后我被重定向到页面\视图（http://localhost/Nop240/CreditCardPayment /Result) 在这里我分析读取 url 参数的事务的结果。

在 RouteProvider.cs 类中，我映射了返回 url，如下所示：

```
routes.MapLocalizedRoute("CreditCardPaymentResult",  "CreditCardPayment/Result/s/{session_id}/s/{codAut}/s/{alias}/s/{orario}/s/{data}/s/{mac}/s/{importo}/s/{cognome}/s/{nazionalita}/s/{pan}/s/{divisa}/s/{email}/s/{scadenza_pan}/s/{esito}/s/{codTrans}/s/{nome}/s/{messaggio}/s/{tipo_servizio}/s/{$BRAND}/", new { controller = "Checkout", action = "CreditCardPaymentResult" }, new[] { "Nop.Web.Controllers" }); 
```

在控制器中我写了这段代码

```
public ActionResult CreditCardPaymentResult(string session_id, string codAut, string alias, string orario, string data, string mac, string importo,                                                    string BRAND, string cognome, string nazionalita, string pan, string divisa, string email, string scadenza_pan,string esito, string codTrans, string nome, string messaggio, string tipo_servizio) 
```

返回网址是这样的

```
http://localhost/Nop240/CreditCardPayment/Result?session_id=w5pl05e3s2f1ki5bdg30xymy&codAut=TESTOK&alias=payment_testm_urlmac&orario=142525&data=20121008&mac=c62373ff789d451bcda0bb84d1d679114107aecd&importo=1&$BRAND=MasterCard&cognome=wwww&nazionalita=ITA&pan=525599XXXXXX9992&divisa=EUR&email=fabrizio%40xxx.net&scadenza_pan=201402&esito=OK&codTrans=0000000000000162&nome=wwww&messaggio=Message+OK&tipo_servizio=null 
```

问题是如何拦截 $BRAND url 参数。可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-19T22:05:37.397

在这里查看 url 编码[https://www.tutorialspoint.com/html/html_url_encoding.htm](https://www.tutorialspoint.com/html/html_url_encoding.htm)

您需要对美元符号进行编码。

# php - 为什么 Javascript 执行不会停止 PHP 执行？

> ID：12782908
> 
> 赞同：0
> 
> 时间：2012-10-08T13:37:24.483
> 
> 标签：php, javascript, header

我在完成的脚本中遇到了麻烦。

这是整个脚本。但麻烦只涉及2行。

事实上，我有一个 PHP 条件，如果它受到尊重，它应该显示一个警报，如果没有，它应该执行以下脚本。

最后我有一个标题位置，可以让用户返回上一页。

问题是它不显示警报，它直接让用户返回。我想让用户单击“确定”以使脚本继续。有没有办法我可以做到这一点。？

```
<?php
$sql="SELECT SUM(montant) as montantfactures, n_doss
      FROM  `factures` 
      WHERE `n_doss`='".mysql_real_escape_string($_GET['n_doss'])."'
      GROUP BY `n_doss`";

$result=mysql_query($sql) or die;
while($data=mysql_fetch_assoc($result))
{
    $rqt="SELECT `interets`.*,
                 `les_taux`.*,
                 `decompte`.`principal_s`
          FROM   `interets`
          INNER JOIN `les_taux` ON `interets`.`type`=`les_taux`.`type`
          INNER JOIN `decompte` ON `interets`.`n_doss`=`decompte`.`n_doss`
          WHERE `interets`.`n_doss`='".$data['n_doss']."' 
          GROUP BY `date_modif` DESC
          LIMIT 1";
    $resultat=mysql_query($rqt) or die;
    $donnees=mysql_fetch_assoc($resultat);

    {$datefin=$donnees['date_fin'];}
    $datedepart=$donnees['date_depart'];
    if($donnees['date_fin']==date('Y-m-d'))
    {
        echo "<script type=\"text/javascript\">alert(\"les interets sont deja a jour\")</script>";
    }
    else
    {
        if($donnees['type']=='tc')
        {

            if($donnees['montant']==0)
            {

                $taux=($donnees['valeur']*1);
                $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                $interets=(($data['montantfactures']-$donnees['principal_s'])*$nbjours*$taux)/(365*100);
                $nouveauinterets=$donnees['montant']+$interets ;
                $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'
                    ";
                $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;

            }

            else
            {

                $taux=($donnees['valeur']*1);
                $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                $interets=(($data['montantfactures']-$donnees['principal_s'])*1*$taux)/(365*100);
                $nouveauinterets=$donnees['montant']+$interets ;
                $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;

            }
        }
        elseif($donnees['type']=='tleg')
        {

            if($donnees['montant']==0)
            {
                if($donnees['operateur']=="x")
                {
                    $taux=($donnees['valeur']*$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*$nbjours*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;
                }
                elseif($donnees['operateur']=="+")
                {
                    $taux=($donnees['valeur']+$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*$nbjours*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;
                }
            }
            else
            {
                if($donnees['operateur']=="x")
                {
                    $taux=($donnees['valeur']*$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*1*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;
                }
                elseif($donnees['operateur']=="+")
                {
                    $taux=($donnees['valeur']+$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*1*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;

                }
            }
        }
        elseif($donnees['type']=='tbce')
        {

            if($data['montantfactures']==0)
            {
                if($donnees['operateur']=="x")
                {
                    $taux=($donnees['valeur']*$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*$nbjours*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;
                }
                elseif($donnees['operateur']=="+")
                {
                    $taux=($donnees['valeur']+$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*$nbjours*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;
                }
            }
            else
            {

                if($donnees['operateur']=="x")
                {
                    $taux=($donnees['valeur']*$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*1*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;
                }
                elseif($donnees['operateur']=="+")
                {
                    $taux=($donnees['valeur']+$donnees['variable']);
                    $nbjours=round((strtotime($datefin) - strtotime($datedepart))/(60*60*24)-1);
                    $interets=(($data['montantfactures']-$donnees['principal_s'])*1*$taux)/(365*100);
                    $nouveauinterets=$donnees['montant']+$interets ;
                    $itc="UPDATE `interets` SET
                    montant     =   '".$nouveauinterets."',
                    date_fin= NOW() WHERE n_doss='".$donnees['n_doss']."'";
                    $rtq    =   mysql_query($itc) or die(__LINE__.mysql_error().$itc);
                    echo "<img src='images/tick_48.png' width='24'> Int&eacute;r&ecirc;ts correctement mis &agrave; jour pour le dossier n&deg;".$donnees['n_doss'].'<br>' ;
                }
            }
        }
    }
}
header('Location: ' . $_SERVER['HTTP_REFERER'] );
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:40:38.893

Javascript 无法阻止 php 的执行！javascript 在客户端（浏览器）上运行，php 在服务器上运行。如果你写 header('Location: ' . $_SERVER['HTTP_REFERER'] ); ，它将始终将您重定向到那里。

如果我是你，我会修改这一行并添加：

```
echo "<script type=\"text/javascript\">alert(\"les interets sont deja a jour\"); window.location = $_SERVER['HTTP_REFERER']
</script>"; 
```

并删除标题位置，当然..

# php - Symfony2 Prototype contains not needed field

> ID：12782911
> 
> 赞同：1
> 
> 时间：2012-10-08T13:37:28.660
> 
> 标签：php, symfony

I'd like to create an admin panel for one of my projects, so I started with this tutorial: [How to Embed a Collection of Forms](http://symfony.com/doc/current/cookbook/form/form_collections.html)

Continued with creating double embedded form, so i have an object, what have objects, and these objects also have objects :D The Doctrine mapping is good, and works, the problem: When I click on the "Add new Property" it creates the property, but when I click on the "Add Detail" (which adds a detail to the property) it creates the Detail's fields, but one extra field too: `<label class="required">1label__</label>` The formtype codes: For the main class

```
$builder
        ->add('forma')
    ;

    $builder->add('properties', 'collection',array(
        'type' => new PropertyType(),
        'allow_add' => true,
        'allow_delete' => true,
        'by_reference' => false
        )); 
```

For the property class:

```
$builder
        ->add('nev')
        //->add('szokokut')
    ;

    $builder->add('details', 'collection',array(
        'type' => new DetailType(),
        'allow_add' => true,
        'allow_delete' => true,
        'by_reference' => false
        )); 
```

For the Detail class:

```
$builder
        ->add('description')
        //->add('property')
    ; 
```

These codes are from the buildFrom() functions.

Any idea why is there the extra field?

The first prototype:

`<div id="szokokut_storebundle_szokokuttype_properties___name__"><div><label for="szokokut_storebundle_szokokuttype_properties___name___nev" class="required">Nev</label><input type="text" id="szokokut_storebundle_szokokuttype_properties___name___nev" name="szokokut_storebundle_szokokuttype[properties][__name__][nev]" required="required" maxlength="100" /></div><div><label class="required">Details</label><div id="szokokut_storebundle_szokokuttype_properties___name___details" data-prototype="&lt;div&gt;&lt;label class=&quot;required&quot;&gt;__name__label__&lt;/label&gt;&lt;div id=&quot;szokokut_storebundle_szokokuttype_properties___name___details___name__&quot;&gt;&lt;div&gt;&lt;label for=&quot;szokokut_storebundle_szokokuttype_properties___name___details___name___description&quot; class=&quot;required&quot;&gt;Description&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;szokokut_storebundle_szokokuttype_properties___name___details___name___description&quot; name=&quot;szokokut_storebundle_szokokuttype[properties][__name__][details][__name__][description]&quot; required=&quot;required&quot; maxlength=&quot;100&quot; /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"></div></div></div>`

The second:

`<div><label class="required">1label__</label><div id="szokokut_storebundle_szokokuttype_properties_1_details_1"><div><label for="szokokut_storebundle_szokokuttype_properties_1_details_1_description" class="required">Description</label><input type="text" id="szokokut_storebundle_szokokuttype_properties_1_details_1_description" name="szokokut_storebundle_szokokuttype[properties][1][details][1][description]" required="required" maxlength="100" /></div></div></div>`

The problem will be here: Its from the tutorial (with a little change) and it replaces the `__name__` field in both of the prototypes :/

```
var $addPropertyLink = $('<a href="#" class="add_property_link">Tulajdonság hozzáadása</a>');
var $newLinkLi = $('<p></p>').append($addPropertyLink);

jQuery(document).ready(function() {
propertyHolder.append($newLinkLi);

$addPropertyLink.on('click', function(e) {
    e.preventDefault();

    addPropertyForm(propertyHolder, $newLinkLi);
    });
});

function addPropertyForm(collectionHolder, $newLinkLi) {
    // Get the data-prototype we explained earlier
    var prototype = collectionHolder.attr('data-prototype');

    // Replace '__name__' in the prototype's HTML to
    // instead be a number based on the current collection's length.
    var newForm = prototype.replace(/__name__/g, collectionHolder.children().length);

    // Display the form in the page in an li
    var $newFormLi = $('<p></p>').append(newForm);
    $newLinkLi.before($newFormLi);
    addFormDeleteLink($newFormLi);
    var $addDetailLink = $('<a href="#" class="add_detail_link">Részlet hozzáadása</a>');
    var $LinkLi = $('<p></p>').append($addDetailLink);
    $newFormLi.find('div[id$=_details]').append($LinkLi);

    $addDetailLink.on('click',function(e){
        e.preventDefault();

        addDetailForm($newFormLi.find('div[id$=_details]'),$LinkLi);
    });

}

function addFormDeleteLink($FormLi) {
    var $removeFormA = $('<a href="#">törlés</a>');
    $FormLi.append($removeFormA);

    $removeFormA.on('click', function(e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // remove the li for the tag form
        $FormLi.remove();
    });
}

function addDetailForm(collectionHolder,$newLinkLi){
    // Get the data-prototype we explained earlier
    var prototype = collectionHolder.attr('data-prototype');

    // Replace '__name__' in the prototype's HTML to
    // instead be a number based on the current collection's length.
    var newForm = prototype.replace(/__name__/g, collectionHolder.children().length);

    // Display the form in the page in an li
    var $newFormLi = $('<p></p>').append(newForm);
    $newLinkLi.before($newFormLi);
    addFormDeleteLink($newFormLi);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:07:23.453

You should try to make sure your javascript only acts on the right set of elements, by using a good enough selector. Show your js for a more detailed answer.

**UPDATE** Look at [the code](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/CollectionType.php)

There seems to be an undocumented `prototype_name` option that you can change from **name** to whatever you want for one of your prototypes.

# c++ - Linux/GTK 中的虚拟键盘

> ID：12782912
> 
> 赞同：1
> 
> 时间：2012-10-08T13:37:29.750
> 
> 标签：c++, embedded-linux, gtkmm, virtual-keyboard

我有一个简单的界面（可以是基于触摸的，也可以通过鼠标点击操作）。当我选择一个文本框时，应该会弹出一个虚拟键盘。我做了一点挖掘，`xvkbd`看起来不错。X11 是唯一的依赖，这很好！但是，我不想在系统中安装键盘并将其称为发出命令或设置环境变量。我希望键盘成为我制作的应用程序的一部分，它应该在我运行应用程序并选择文本框时弹出，在其他情况下都不会。据我所知，从头开始编写虚拟键盘并不是最简单的任务。如果有什么东西可以在我的 C++ 应用程序中使用，那就太好了。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:26:27.250

检查 matchbox-keyboard，它应该用 gtk 做你需要的。

摘自其[自述文件](http://git.yoctoproject.org/cgit/cgit.cgi/matchbox-keyboard/tree/README)

> 嵌入
> 
> 您可以使用支持 XEMBED 协议（例如 GTK2）的工具包将 matchbox-keyboard 嵌入到其他应用程序中。
> 
> 请参阅示例/matchbox-keyboard-gtk-embed.c 了解其完成方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:20:51.387

You could use [QX11EmbedContainer](http://doc.qt.digia.com/4.7-snapshot/qx11embedcontainer.html), if you have access to Qt. If not, you can embed the xvkbd's window yourself (see [here](https://stackoverflow.com/questions/5395044/embed-an-app-into-a-window) how).

# javascript - javascript - 创建网络契约者

> ID：12782913
> 
> 赞同：-1
> 
> 时间：2012-10-08T13:37:30.720
> 
> 标签：javascript

> **可能重复：**
> [Javascript 对象中的构造函数](https://stackoverflow.com/questions/1114024/constructors-in-javascript-objects)

我正在尝试学习如何在 javascript 中创建类。我发现这对我来说很难理解。

现在，我想知道是否可以在 javascript 中创建一个构造函数，就像我们可以在 c# 或其他编程语言中那样。

我尝试了几件事：

方式1：

```
 function SiteProfile(_url) {
    this.url = "";
    this.name = this.ExtractNameFromURL();
}

    SiteProfile.prototype.ExtractNameFromURL = function () {
        var firstDOT = this.url.indexOf(".");
        var secondDOT = this.url.indexOf(".", firstDOT + 1);
        var theName = "";
        for (var i = firstDOT + 1; i < secondDOT; i++) {
            theName += this.url[i];
        }
        return theName;
} 
```

方式2：

```
function Site() {

    this.url = "";
    this.name = "";

    this.Site = function (_url) {
        this.url = _url;
        this.name = this.ExtractNameFromURL();
    }

    this.ExtractNameFromURL = function () {
        var firstDOT = this.url.indexOf(".");
        var secondDOT = this.url.indexOf(".", firstDOT + 1);
        var theName = "";
        for (var i = firstDOT + 1; i < secondDOT; i++) {
            theName += this.url[i];
        }
        return theName;
    }
} 
```

两个班级都应该使用一个 URL，并且只需从他那里获取名称，而不需要 www。或 .com

我想知道我是否可以设计一个类，我可以像这样创建一个实例：

```
 var site = new SiteProfile("www.google.co.il");
 document.write(site.name); // becuse, this do nothing 
```

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:51:09.503

你真的很亲近。您的第一个表单的问题只是您没有`url`使用参数设置属性`_url`。

```
function SiteProfile(_url) {
    //change the line below to:
    //this.url = _url;
    this.url = "";
    this.name = this.ExtractNameFromURL();
}

SiteProfile.prototype.ExtractNameFromURL = function() {
    var firstDOT = this.url.indexOf(".");
    var secondDOT = this.url.indexOf(".", firstDOT + 1);
    var theName = "";
    for (var i = firstDOT + 1; i < secondDOT; i++) {
        theName += this.url[i];
    }
    return theName;
}
var site = new SiteProfile("www.google.co.il");
document.write(site.name); // with the change above, this will behave as expected 
```

这是第一种形式的小提琴：http: [//jsfiddle.net/BCnfx/](http://jsfiddle.net/BCnfx/)

第二种形式的问题是双重的。如果您仍想这样实例化主函数，则应将其称为“SiteProfile”。第二个问题是您需要`url`通过将url传递给`Site`方法来初始化属性。

```
//function below should be called "SiteProfile", not "Site"
function Site() {
    this.url = "";
    this.name = "";

    this.Site = function(_url) {
        this.url = _url;
        this.name = this.ExtractNameFromURL();
    };

    this.ExtractNameFromURL = function() {
        var firstDOT = this.url.indexOf(".");
        var secondDOT = this.url.indexOf(".", firstDOT + 1);
        var theName = "";
        for (var i = firstDOT + 1; i < secondDOT; i++) {
            theName += this.url[i];
        }
        return theName;
    };
}

//now instantiate like this instead.
var site = new SiteProfile();
site.Site("www.google.co.il");
document.write(site.name); // with the changes above, this will behave as expected 
```

这是第二种形式的小提琴：http: [//jsfiddle.net/BCnfx/1/](http://jsfiddle.net/BCnfx/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:48:46.913

在你的第一个例子中：

```
function SiteProfile(_url) {
    this.url = _url;
    this.name = this.ExtractNameFromURL();
} 
```

那么你将能够做到：

```
var site = new SiteProfile("www.google.co.il");
 document.write(site.name); 
```

# javascript - DELETE SQL 事务在 JavaScript 中不起作用

> ID：12782915
> 
> 赞同：1
> 
> 时间：2012-10-08T13:37:31.980
> 
> 标签：javascript, sql, html

我正在尝试清除我的 html5 本地 sql 数据库，但由于某种原因它无法正常工作。请在下面查看我的代码：我的警报总是显示长度> 0，有人知道为什么吗？

```
function clearHistory(){
db.transaction( function(tx){
    tx.executeSql('DELETE * FROM history', []);
});

db.transaction(function(tx) {
    tx.executeSql('SELECT * FROM history', [], function (tx, results) {
        var len = results.rows.length, i;
        alert ("length=" + len);
    });
});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:39:03.280

删除 * DELETE FROM 历史记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:52:17.973

将您的删除语句更改为：

```
DELETE FROM History 
```

甚至

```
DELETE History 
```

您甚至可以使用`TRUNCATE TABLE`，这会使用更少的系统资源和事务日志资源，但是它将重置您可能拥有的任何 IDENTITY 列上的种子。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-08T13:39:49.433

这是因为你不应该从 JavaScript 调用 SQL。曾经 ！！将您的 SQL 调用封装在一些 WS API 中并从 JS 调用。

# android - Android 布局兼容性

> ID：12782920
> 
> 赞同：0
> 
> 时间：2012-10-08T13:37:44.933
> 
> 标签：android, android-layout

我的小部件与目标 android-14 有问题。minSDKVersion 为 7。小部件在 3.1-4.x 下看起来和工作正常，但在 3.1 下我有显示问题。当我将 project.properties 中的目标更改为 target=android-7 时，我的布局文件中出现错误：

```
android:layout_width="match_parent"
android:layout_height="match_parent"

error: Error: String types not allowed (at 'layout_width' with value 'match_parent'). 
```

我在 *.java 文件中也有错误，R 无法解析为变量。

我了解这些错误，但是如何更改我的代码以使用 2.1 的所有目标。

谢谢你的帮助。

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/myWidget"
     android:gravity="center"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="horizontal">  
     <ImageView android:id="@+id/myWidgetBackground"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:scaleType="centerInside"/>
     <ImageView android:id="@+id/item1"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:scaleType="centerInside"/>
     <ImageView android:id="@+id/item2"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
     android:scaleType="centerInside"/>
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:18:00.983

`match_parent``fill_parent`如果我没记错的话，替换为 2.2 (API 8)。所以替换它，`fill_parent`它也应该在 2.1 设备上工作。

由于您的 xml 文件中有错误，因此无法生成类 R，这会导致您收到错误。

# android - 使用 google maps api 创建一个应用程序，该应用程序顶部有一个自定义层

> ID：12782922
> 
> 赞同：1
> 
> 时间：2012-10-08T13:37:55.823
> 
> 标签：android, ios, google-maps, layer

所以，我认为我的问题有点奇怪。几年前，我是一名制作安卓应用程序的中级 Java 程序员，但我因为其他事情而辞职。现在我带着一个新的（我认为）有点大胆的想法回来了，我需要帮助。

我想知道是否可以利用 google maps api 作为我在顶部分层的另一张地图的基础。想一想我正在改变地图的外观，仅此而已。

我想创建一个移动应用程序，其地图的外观与城市的一小部分区域的基本视图和卫星视图相比具有新的/不同的外观。可以将其想象为拍摄任何旧图像并将其拍打在谷歌地图的顶部并且仍然能够使用它进行导航（显然，如果它是一张随机图片，您将无法看到它带您去哪里，但理论上你基本上可以创建一个新地图）。

这在java和obj c中都可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:10:08.763

据我所知，您无法将自己的切片图层添加到适用于 Android 的 Google Maps API。但是，您可以使用[osmdroid](http://code.google.com/p/osmdroid/)并添加自己的图块。您还可以使用Android 版[mapsforge](http://code.google.com/p/mapsforge/)。它带有自己的用于创建自定义地图图块的工具。

# javascript - 从asp.net中的contentpage调用masterpage函数？

> ID：12782928
> 
> 赞同：4
> 
> 时间：2012-10-08T13:38:26.640
> 
> 标签：javascript, asp.net, master-pages

我在母版页上有一个函数，我想从代码隐藏的内容页面调用它。

这是我的尝试：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "alert__", string.Format("setStatusBarMessage('{0}',{1});", barMessage, type, ""), true); 
```

“setStatusBarMessage”函数在 masterpage 中声明，所以这段代码不起作用。

setStatusBarMessage 是一个客户端函数。

母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Content.master.cs" 

Inherits="F8.CRM.Pages.Content" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">

    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager runat="server" />
    <div>
        <asp:ContentPlaceHolder ID="MainContent" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html>
<script type="text/javascript">

    function hello() {
        alert('hi mennan');
    }

</script> 
```

内容页 ：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Pages/Content.Master" AutoEventWireup="true"
    CodeBehind="Departman.aspx.cs" Inherits="F8.CRM.Departman" %>

<%@ Register Src="~/Controls/Objects/StudioSideBox/StudioSideBox.ascx" TagName="StudioSideBox"
    TagPrefix="uc1" %>
<%@ Register Src="~/Controls/Objects/Baslik/Baslik.ascx" TagName="Baslik" TagPrefix="uc2" %>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

     my html...

    <script type="text/javascript">

       my script codes...

    </script>

</asp:Content> 
```

此母版页和内容页位于 iframe 对象下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:51:39.237

好的试试下面的代码

我在母版页中有一个功能是

```
<script>
    function hello() {
        alert('hi');
    }

</script> 
```

现在在内容页面的页面加载

```
 protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this, this.GetType(), "ntmtch", "hello();", true);
} 
```

它工作。我没有向内容页面添加任何内容。

**更新**

母版页的代码

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script>
    function hello() {
        alert('hi');
    }

</script>
<asp:ContentPlaceHolder id="head" runat="server">

</asp:ContentPlaceHolder>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

    </asp:ContentPlaceHolder>
</div>
</form> 
```

第一个内容页面的代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true"
CodeFile="Default.aspx.cs" Inherits="_Default" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
<iframe src="Default2.aspx"></iframe>
</asp:Content> 
```

第一个内容页面背后的代码：

```
 protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this, this.GetType(), "ntmtch", "hello();", true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:41:42.750

试试这个来调用母版页服务器端函数

```
 MasterPagename ms = Master as MasterPagename ;
    ms.FuctionOnMasterPage(); 
```

如果您尝试在母版页上调用客户端函数，我想您可以直接调用它，因为您的母版页和内容页函数将在同一个 html 页面上呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:51:32.587

**通常我会这样做：在标记中：**

```
<asp:Literal ID="ScriptLit" runat="server" /> 
```

**在后面的代码中：**

```
ScriptLit.Text = "<script>functionName();</script>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:52:50.500

在这里我们可以创建一个 Master Page 类的对象，然后我们可以调用 MasterPage 函数

```
 MasterPageClassName MyMasterPage = (MasterPageClassName)Page.Master;

 MyMasterPage.Functionname(); 
```

它肯定会帮助你。尝试一下

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-05-09T14:08:03.407

标签 lbl = (Label)this.Master.FindControl("lblBalance"); lbl.Text = "嗨";

# php - 如何计算下一个 Xth 天（每月）？

> ID：12782931
> 
> 赞同：-3
> 
> 时间：2012-10-08T13:38:34.497
> 
> 标签：php

我想计算日历中的下 X 天。

例如今天是 2012-10-08。如果 X=25 我希望它返回 2012-10-25 但如果 X=06 我希望返回 2012-11-06。如果该月没有所需的 X 天，则必须返回该月的最后一天（例如，如果我要查找 2 月 30 日，则如果闰年，则必须返回 28 或 29）

这似乎很简单，但我被所有特殊情况（一年中的最后一个月，28-31 天等）抓住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:44:03.063

您可以使用`strtotime()`和`t`：

```
$x = 5;                   // given day
if(date('t') < $x){       // check if last day of the month is lower then given day
    $x = date('t');       // if yes, modify $x to last day of the month
}

$month = date('m');       // current month
if(date('d') >= $x){      // if $x day is now or has passed
    $month = $month+1;    // increase month by 1
}

$year = date('Y');        // current year
if($month > 12){          // if $month is greater than 12 as a result from previous if
    $year = date('Y')+1;  // increase year
    $month = 1;           // set month to January
}

if(date('t', strtotime($year.'-'.$month.'-01')) < $x){       // check if last day of the new month is lower then given day
    $x = date('t', strtotime($year.'-'.$month.'-01'));       // if yes, modify $x to last day of the new month
}

$date = date('d F Y', strtotime($year.'-'.$month.'-'.$x));
// 05 November 2012 
```

[这](http://www.php.net/date)是一个很好的教程。

# c# - 循环进行时表单不可用且不更新

> ID：12782933
> 
> 赞同：1
> 
> 时间：2012-10-08T13:38:41.377
> 
> 标签：c#, winforms, loops

我有一个方法，其中有一个 for 循环。在 for 循环中，我想更新主窗体上的一些标签文本，但更改仅在循环结束后完成。

我试图在另一个线程上这样做：

```
Thread firstthread = new Thread(new ThreadStart(myMethod));
firstthread.Start(); 
```

当我这样做时，我`InvalidOperationException`因为试图访问另一个线程或类似的东西上的控件而得到一个。

在循环进行时，我应该如何从循环中更新主窗体上的标签（或其他控件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:47:44.463

您应该使用`BackgroundWorker`. 将长时间运行的循环放在`DoWork`事件处理程序中；它将在后台线程中运行并且不会阻塞 UI 线程。您可以设置`ReportProgress`为 true，然后将事件处理程序附加到它以允许您定期更新标签（或其他任何内容）。ProgressReported 事件在 UI 线程中运行。您还可以将处理程序添加到也在 UI 线程中运行的 Completed 事件。

您可以查看 BackgroundWorker 的[MSDN 页面](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)以获取详细信息和代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:44:50.240

您应该检查 Form（对于 Windows.Forms）或窗口的 Dispatcher 对象（对于 WPF）上的 Invoke 和 BeginInvoke 方法。

例如：

```
this.BeginInvoke(new Action(() => this.Text = "ciao")); 
```

更改表单的标题栏。

BeginInvoke 是异步的 - 它不会等待更改发生 - 而 Invoke 是同步的并且阻塞直到更改完成。除非您有特别的需要，否则我建议使用 BeginInvoke 来减少意外死锁的机会。

这将允许您从并发线程更新 UI - 并且可以使用您正在使用的任何线程机制（TPL 任务、普通线程等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:19:58.300

正如 Servy 所说，你可以在这个简单的例子中使用类似的东西：

```
public partial class Form1 : Form
{
    BackgroundWorker bgw;
    public Form1()
    {
        InitializeComponent();
        bgw = new BackgroundWorker();
        bgw.DoWork += new DoWorkEventHandler(bgw_DoWork);
        bgw.ProgressChanged += new ProgressChangedEventHandler(bgw_ProgressChanged);
        bgw.WorkerReportsProgress = true;
    }

    void bgw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        string text = (string)e.UserState;
        SetValue(text);//or do whatever you want with the received data
    }
    void SetValue(string text)
    {
        this.label1.Text = text;
    }

    void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; i < 10000; i++)
        {
            string text = "Value is " + i.ToString();
            bgw.ReportProgress(1, text);
            Thread.Sleep(1000);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        bgw.RunWorkerAsync();
    } 
```

}

# java - Eclipse 调试器中的 Stacktrace

> ID：12782935
> 
> 赞同：19
> 
> 时间：2012-10-08T13:38:49.160
> 
> 标签：java, eclipse

我有一个没有得到很好处理的异常。我在调试器中的一行，我手头有异常，但它不在我的代码中，所以我不能在那个时候记录它。所以我坐在调试器中，变量窗口中有异常，我试图弄清楚如何从中获取堆栈跟踪，以便我可以找到异常的来源并更好地处理它。

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T13:41:24.010

在`Debug`透视图中，显示`Expressions`视图。现在您可以添加一个表达式，说明您的变量`e.printStackTrace()`在哪里。`e`

或者，您可以将表达式更改为并在输出窗口中`getStackTrace()`展开`StackTraceElement`数组。`Expressions`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T06:08:51.377

你为什么不创建一个[异常断点](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.user/reference/views/breakpoints/ref-addexception_viewaction.htm?cp=1_4_7_0_1)？然后，在异常发生之前，您不必手动调试代码，而是只要最初抛出异常，调试器就会停止，您可以在调试器中看到*实时*堆栈跟踪。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T13:42:00.680

我通常使用以下技巧。转到“表达式”视图并添加表达式`e.printStackTrace()`。如果您的应用程序在 Eclipse IDE 中运行，堆栈跟踪将打印到您的 STDERR，即 Eclipse 控制台。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-30T13:38:33.637

如果您知道问题所在的行，您可以在代码中设置断点并观看“调试”选项卡，它将显示堆栈：

[![在此处输入图像描述](../Images/2e6f574dc1c6a15fbcaa175ec5eea43c.png)](https://i.stack.imgur.com/klWLq.png)

# apache-flex - 仅在需要时才在flex中滚动条？

> ID：12782936
> 
> 赞同：0
> 
> 时间：2012-10-08T13:38:52.837
> 
> 标签：apache-flex

我想设置 Horizo​​ntalScrollPolicy = ScrollPolicy.ON; 只有当我的内容超出舞台时。如果我的舞台宽度= 400 只能承载两个视频容器，那么第三个视频在舞台上被切断。为避免这种情况，我将这样的代码放在 if(no of video container > 2){ Horizo​​ntalScrollPolicy = ScrollPolicy.ON; } else{ 水平滚动策略 = 滚动策略.OFF; 上面的逻辑对我有用。但我需要的是：当视频容器超过任何舞台宽度时，滚动应该来..否则它应该处于关闭状态。如何做到这一点？到目前为止没有任何效果。任何人请帮助我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:30:36.783

尝试

```
ScrollPolicy.AUTO 
```

> ScrollPolicy.AUTO ("auto") - 当视口的 contentWidth 大于其宽度时显示滚动条。

# apache - vagrant 中的 JS 和 CSS 文件在 VM 之外保存时未正确编码

> ID：12782946
> 
> 赞同：34
> 
> 时间：2012-10-08T13:39:26.790
> 
> 标签：apache, character-encoding, centos, vagrant

我在 OSX、Ubuntu 和 Windows 7 上运行 vagrant，并在主机上使用 vim 和 Netbeans 作为 IDE。虚拟机运行 CentOS 6.3 和 Apache 2.2。docroot 设置为`/vagrant`.

当我编辑一个 JS 或 CSS 文件并保存它时，浏览器会转过身来检测非法字符。当我在浏览器中查看文件时，我看到菱形问号字符，这通常表示编码问题。我可以在VM内的vim中打开文件并保存，`:w ++enc=utf-8`文件将正常加载。

我已经在主机和不同的主机操作系统上尝试了多个 IDE，并且只能将其与 vagrant 和挂载目录有关。我的 IDE 不是问题，因为我可以在本地运行文件并且它们可以工作，或者将它们保存到远程机器并且文件可以工作。只有当我将它们保存到安装的位置时，我才会遇到`/vagrant`问题。

我需要更改 Apache 还是操作系统中的其他东西才能使其正常工作？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-15T19:13:15.973

今天早上我遇到了这个问题。在 httpd.conf 中将 EnableSendfile 设置为关闭。

如果您查看您的 httpd.conf，它会显示“如果您从 NFS 挂载的文件系统提供服务，请关闭此功能”。在[http://httpd.apache.org/docs/2.2/mod/core.html#enablesendfile](http://httpd.apache.org/docs/2.2/mod/core.html#enablesendfile)中，它解释说“默认情况下，当请求的处理不需要访问文件中的数据时——例如，当传递静态文件——如果操作系统支持，Apache 使用 sendfile 传递文件内容而无需读取文件。”

由于您的 Windows 主机具有 ntfs 文件系统，因此 linux 客户机无法使用 sendfile 正确缓存文件，因此 apache 需要自行发送文件。当从 apache 请求文件时，这可能会导致轻微的减速，但应该可以忽略不计。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-24T03:09:37.787

这取决于您使用的服务器。

对于**Nginx**：在`/etc/nginx/nginx.conf`：

将包含的行更改`sendfile on;`为`sendfile off;`.

对于**Apache**：在`/etc/httpd/conf/httpd.conf`：

更改删除评论`EnableSendfile off;`

**不要**忘记你`restart`的 Nginx 或 Apache。如果它仍然不起作用， `exit`或者`vagrant reload`类似的东西 - 重新启动你的虚拟机。

# jquery - 带有parseInt的数组上的jquery .each循环-给出NaN

> ID：12782947
> 
> 赞同：1
> 
> 时间：2012-10-08T13:39:32.403
> 
> 标签：jquery, json, each, parseint

我已经设置了一个循环，`.each`用于将 json 编码字符串转换为用于 jquery jqBarGraph 的数组

循环：

```
 $.each(dataarray, function (i, item) {
         JSarray[i] = [parseInt(item['count']),parseInt(item['year'])];                        
     }); 
```

dataarray 中的数据包含一个 json 字符串 =

```
 {"graph":{"count":"45","year":"2007"}} 
```

after`.each`循环在 JSarray 中包含这些值

```
 [45, 2007] 
```

所以单个字符串有效，当我尝试传递更多数据时，我得到 vale NaN

如果我尝试在数据数据数组中使用这个 json 编码字符串，NaN 就会出现

```
{"graph":[{"count":"45","year":"2007"},{"count":"390","year":"2008"}]} 
```

我的 JSarray 看起来像这样

```
[NaN, NaN] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:45:33.090

```
{"graph":[{"count":"45","year":"2007"},{"count":"390","year":"2008"}]} 
```

该`graph`属性现在包含一个数组。您将需要对其进行迭代以解析您的整数。

我会试试这个...

```
$.each(dataarray.graph, function(_, obj){
  JSarray.push([parseInt(obj.count), parseInt(obj.year)]);
}); 
```

请记住，常规`for`循环是最好的，因为`$.each`它有点贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:53:02.013

请执行下列操作 ：

```
$.each(dataarray.graph, function (i, item) {
  JSarray[i] = [parseInt(item['count']),parseInt(item['year'])];                        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:53:55.800

你需要：

```
$.each(dataarray['graph'], function (i, item) {
  JSarray[i] = [parseInt(item['count']),parseInt(item['year'])];                        
}); 
```

# c++ - 将 STL 堆栈用作 C++ 类的成员

> ID：12782948
> 
> 赞同：0
> 
> 时间：2012-10-08T13:39:33.520
> 
> 标签：c++, class, stl, stack

我正在开发一个需要（单个）堆栈列表的项目。我创建了一个名为“stacklist”的类，就是这样，一个堆栈列表。我希望该类有一个指向列表头部的堆栈指针。但是，每当我尝试构建课程时，我都会收到错误消息。

```
#ifndef STACKLIST_H
#define STACKLIST_H

#include <stack>

//source: Data Structures Using C++: Linked List Implementation Part II (List Class)
//url: http://www.youtube.com/watch?feature=endscreen&NR=1&v=7vZo17iv1zQ
class stacklist
{
    public:
        stacklist();
        void addToHead(const int&);
        void printList();
        void insert(const int&);

    private:
        stack<int>* head; //THIS IS WHERE I AM HAVING THE PROBLEM
        int size;

};

#endif // STACKLIST_H 
```

错误消息是“错误：预期的';' 在 '<' 标记之前"

任何可以提供的见解都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:43:31.000

标准库`stack`位于`std`命名空间中，因此您需要适当地限定名称：

```
std::stack<int>* head; 
```

您应该考虑使用 an`std::list<std::stack<int>>`而不是您的类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T13:41:59.977

模板的正确名称是`std::stack`.

如果你想要的只是一个堆栈列表，你总是可以使用`std::list<std::stack<int>>`, 顺便说一下（或者`std::forward_list`如果你只需要前向遍历）。但是，即使您追求自己的设计，也可能没有理由不能使堆栈成为直接类成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:42:22.077

也许你应该说`std::stack`

`std::stack<int>* head;`反而`stack<int>* head;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:47:52.880

如果您使用`std`库，则必须放在`std::`std 对象之前或将 a`using namespace std`放在源文件的开头：

```
#include <stack>
using namespace std; // This line brings std stuff into the current namespace. 
```

或者：

```
std::stack<int>* head; 
```

如果您的文件是标头，则第一个比第二个更好，因为该`using`指令将传播到包含以下内容的所有文件中`StackList.h`

问题上没有提到这一点，但我认为值得一说：使用指向类的指针是非常危险的，因为您必须在所有构造函数（默认和复制）中处理它，并且也要注意析构函数。

修改你的类设计并考虑是否可以使用`std::stack`实例而不是`std::stack`指针。

# android - 如何结合使用 Qualcoomm Vuforia 和基于位置的标记

> ID：12782949
> 
> 赞同：4
> 
> 时间：2012-10-08T13:39:35.613
> 
> 标签：android, augmented-reality

据我了解，Vuforia 是在 Android 平台上开发 AR 应用程序的良好起点。Simple Virtual Buttons 的文档非常好，但是如何将其与基于位置的数据结合起来呢？

例如：在应用程序级别，应使用标记和基于位置的数据；因此需要 fe Vuforia 和另一个组件来集成基于位置的数据。

为了更深入地了解什么是可能的，这里有一个例子：

你穿过风景是电话可以

1.) 识别其位置并基于屏幕上的点查看位置，并

2.）识别您视图中的对象并在“触摸”这些对象时执行操作（虚拟按钮，我了解到..）

所以我的最后一个问题是：

您是否知道框架或演示应用程序的示例，这些任务是通过将 Vuforia 与基于位置的 AR 产品/框架 XYZ 结合在一起来完成的？

请原谅我，如果我没有像需要的那样精确 - 我搜索了 SO，但是（据我所见）已经没有这样的问题了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T12:18:24.773

对于基于位置的 AR，如 wikitude Layar 等，他们根据相机视图上的位置绘制 poi，您必须在解析后从不同的 Api（如 openstreet、twitter 等）获取 poi，并将这些数据放在 cameraview 上。使用传感器值和 gps 值。首先，您可以浏览开源的[Mixare](http://code.google.com/p/mixare/wiki/GettingStarted)代码。您可以使用 Vuforia cameraview 实现此代码。**[请在此处](https://stackoverflow.com/a/13208268/1206201)**关注我的 ans以获取详细信息。好运

# python - 'int' 在 Django 中不可下标，它在纯 python 中

> ID：12782950
> 
> 赞同：1
> 
> 时间：2012-10-08T13:39:42.960
> 
> 标签：python, django

我正在尝试将 json 提要导入我的数据库。我首先编写了一个纯 python 脚本，然后对其进行编辑以使用 Django 的数据库函数。

```
def getListOfProperties():
    if getLastModifiedTimestamp() != 0:
        url = URL + "?from_date=" + str(getLastModifiedTimestamp())
    else:
        url = URL
    resp,cont= client.request(url, "GET")
    results = json.loads(cont)

    try:
        properties = results['properties']
    except KeyError, e:
        return "Geen panden in Max-immo"

    for property in properties:
        if checkIfPropertyInDBList(id=property['id'])== 0:
            #do something
        else:
            #do the other thing

    if len(properties)!=0:
        addPropertiesDetail()

getListOfProperties() 
```

在纯 python 脚本中，函数**checkIfpropertyDbList**如下所示：

```
import settings
def checkIfPropertyInDBList(id=0):
    db = settings.db()
    cur = db.cursor()
    if id==0:
        cur.execute("SELECT COUNT(*) FROM mi_import")
    else:
        cur.execute("SELECT COUNT(*) FROM mi_import WHERE id = %s" % id)
    return cur.fetchone()[0] 
```

**设置**模块如下所示：

```
###settings.py
import MySQLdb

def db():
    return MySQLdb.connect(
        host= "localhost",
        user="root",
        passwd="*****",
        db="*****",
    ) 
```

在终端中运行脚本时，它工作得很好。问题是，我需要将脚本集成到部署在 Google App Engine 上的 Django 站点中，所以我调整了上面的函数以使用 Django 的内置数据库模块：

```
from django.db import connection, DatabaseError

def checkIfPropertyInDBList(id=0):
    cur = connection.cursor()
    if id==0:
        cur.execute("SELECT COUNT(*) FROM mi_import")
    else:
        cur.execute("SELECT COUNT(*) FROM mi_import WHERE id = %s" % id)
    return cur.fetchone()[0] 
```

然而，这给了我一个**TypeError: 'int' object is not subscriptable**。

这是完整的回溯：

```
Environment:

Request Method: GET
Request URL: localhost:8088/cron/importAll/

Django Version: 1.3.1
Python Version: 2.7.1
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'south',
 'app']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.csrf.CsrfResponseMiddleware')

Traceback:
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/username/PycharmProjects/project/app/cron.py" in lookupProperties
  180\.     getListOfProperties()
File "/Users/username/PycharmProjects/project/app/cron.py" in getListOfProperties
  169\.             if checkIfPropertyInDBList(id=property['id'])== 0:

Exception Type: TypeError at /cron/importAll/
Exception Value: 'int' object is not subscriptable 
```

有什么建议么？

# c# - C# Dynamic Types Break When Upgrading to Visual Studio 2012

> ID：12782951
> 
> 赞同：2
> 
> 时间：2012-10-08T13:39:48.543
> 
> 标签：c#, asp.net-mvc, visual-studio, dynamic, visual-studio-2012

I have a project that was originally developed using Visual Studio 2010 with .Net 4.0\. It is a class library that implements a custom MVC 3 controller and it uses a [dynamic type](http://msdn.microsoft.com/en-us/library/dd264736.aspx). If I open the project in Visual Studio 2012 RTM, without making any changes to the project, I get the following error on the dynamic types:

***One or more types required to compile a dynamic expression cannot be found. Are you missing a reference?***

I am also getting another error, which is:

***Missing compiler required member 'Microsoft.CSharp.RuntimeBinder.Binder.InvokeMember'***

They seem to be related issues. I am not sure why Visual Studio 2012 is confused. The Microsoft.CSharp assembly is in the references. If I open the project again in Visual Studio 2010 it compiles just fine. Has anyone come across this issue and know a solution to it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:16:19.583

In my case reference to Microsoft.CSharp assembly was missing. I got this error when trying to use JSON.NET, dynamic types and Visual Studio 2012.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:23:10.020

The answer turned out to be in a warning that was present when compiling in either VS 2010 and 2012\. The warning was:

***The predefined type 'System.Runtime.CompilerServices.CallSite' is defined in multiple assemblies in the global alias; using definition from '..\IronJS.Core.0.2.0.1\lib\net40\Microsoft.Scripting.Core.dll'***

The project used IronJS and it had a a copy of Microsoft.Scripting and Microsoft.Dynamic in its package that were being referenced. I removed these references and referenced the versions in the global assemblies and everything works fine. Not sure why VS 2012 had a problem with this when VS 2010 did not. Or why it caused the obscure errors.

# objective-c - 使用drawRect配合pop over，需要显示图片

> ID：12782955
> 
> 赞同：0
> 
> 时间：2012-10-08T13:39:54.543
> 
> 标签：objective-c, ios, ipad, popover

在我的应用程序中，我有一个类名`playGrid`，其中包含三个对象，一个`NSArray`名为 的图像`plays`，以及两个用于弹出框中将使用的行和列的数量`NSUIntegers` `rowCount`。`columCount`

对于这个例子，我有 6 张图像，我试图将它们显示在 2 列和 3 行中。我试图在弹出窗口中显示这些视图。以前我可以用颜色块来做到这一点，但现在我正在尝试处理图像，我无法正确生成弹出框。下面列出的是我的 drawRect 代码，用于显示颜色的成功弹出框。

我如何将其转换为使用`UIImage`s 而不是颜色？

在下面的示例中，`rowCount`and`columnCount`是 2 和 3，就像我们试图制作的那样，但数组名为 colors，包含六个`UIColor`项目。

```
- (void)drawRect:(CGRect)rect {
CGRect b = self.bounds;
CGContextRef myContext = UIGraphicsGetCurrentContext();
CGFloat columnWidth = b.size.width / columnCount;
CGFloat rowHeight = b.size.height / rowCount;

for (NSUInteger rowIndex = 0; rowIndex < rowCount; rowIndex++) {
  for (NSUInteger columnIndex = 0; columnIndex < columnCount; columnIndex++) {
    NSUInteger colorIndex = rowIndex * columnCount + columnIndex;
    UIColor *color = [self.colors count] > colorIndex ? [self.colors objectAtIndex:colorIndex] : [UIColor whiteColor];
      CGRect r = CGRectMake(b.origin.x + columnIndex * columnWidth,
                        b.origin.y + rowIndex * rowHeight,
                        columnWidth, rowHeight);
    CGContextSetFillColorWithColor(myContext, color.CGColor);
    CGContextFillRect(myContext, r);

  }
 }
} 
```

我知道我不需要颜色或`CGContextSetFillColorWithColor`线条之类的某些东西，但是我如何`myContent`用图像替换，这似乎是我必须做的，但我无法成功地做到这一点。再次感谢您的帮助，因为我是 Objective C 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:20:19.650

假设你想继续做绘制到视图中使用`drawRect:`，我想你只是想使用上的`drawInRect:`方法`UIImage`。

所以：

```
UIImage *image = [plays objectAtIndex:rowIndex * columnCount + columnIndex];
[image drawInRect:r]; 
```

我听说性能`drawInRect`不是很好 - 但我自己没有测量过。另请注意，`drawInRect:`根据需要缩放图像以适合矩形；所以在视觉上，结果可能不是你想要的。

另一种方法是将弹出窗口的视图组合在一个笔尖中，您可以在其中静态布局视图。如果你总是想要一个 2x3 矩阵，你可以用 2x3`UIImageView`实例网格在那里设置你的视图。

**编辑：（**澄清你现在在矩形中绘制图像，没有填充颜色块）

```
- (void)drawRect:(CGRect)rect {
    CGRect b = self.bounds;
    CGContextRef myContext = UIGraphicsGetCurrentContext();
    CGFloat columnWidth = b.size.width / columnCount;
    CGFloat rowHeight = b.size.height / rowCount;

    for (NSUInteger rowIndex = 0; rowIndex < rowCount; rowIndex++) {
        for (NSUInteger columnIndex = 0; columnIndex < columnCount; columnIndex++) {
            CGRect r = CGRectMake(b.origin.x + columnIndex * columnWidth,
                        b.origin.y + rowIndex * rowHeight,
                        columnWidth, rowHeight);
            UIImage *image = [plays objectAtIndex:rowIndex * columnCount + columnIndex];
            [image drawInRect:r];
        }
    }
} 
```

# objective-c - 弹出框退出问题上的分段控制器

> ID：12782963
> 
> 赞同：1
> 
> 时间：2012-10-08T13:40:18.093
> 
> 标签：objective-c, ios

我有一个位于弹出框上的分段控制器（两个段）。我的 prepareForSeque 方法工作正常，返回正确的默认 selectedSegmentIndex。但是当我选择另一个段并退出弹出框时，我的应用程序在执行 popoverControllerDidDismissPopover 方法时会崩溃，如下面的代码片段所示。

我究竟做错了什么？我希望分段控制器保留新选择的段，我认为这就是 popoverControllerDidDismissPopover 方法会做的事情。显然我的理解在这里是错误的，但是在哪里呢？提前感谢您能给我的任何帮助。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   UIStoryboardPopoverSegue *popoverSegue;
   popoverSegue = (UIStoryboardPopoverSegue *)segue;

   UIPopoverController *popoverController;
   popoverController = popoverSegue.popoverController;
   popoverController.delegate = self;

   SettingsEditorViewController *editorVC;
   editorVC = (SettingsEditorViewController *)popoverController.contentViewController;
   audioMessageChoiceIndex = editorVC.audioMessageChoice.selectedSegmentIndex;
   NSLog(@"audioMessageChoiceIndex = %d", audioMessageChoiceIndex);
}

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    NSInteger *newAudioMessageChoiceIndex = (NSInteger *)((SettingsEditorViewController *)                     
        popoverController.contentViewController).audioMessageChoice.selectedSegmentIndex;

    popoverController.delegate = self;    
    SettingsEditorViewController *editorVC;
    editorVC = (SettingsEditorViewController *)popoverController.contentViewController;
    editorVC.audioMessageChoice.selectedSegmentIndex = *(newAudioMessageChoiceIndex);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:44:49.980

我不确定你在这里做什么：

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    NSInteger *newAudioMessageChoiceIndex = (NSInteger *)((SettingsEditorViewController *)                     
        popoverController.contentViewController).audioMessageChoice.selectedSegmentIndex;

    popoverController.delegate = self;    
    SettingsEditorViewController *editorVC;
    editorVC = (SettingsEditorViewController *)popoverController.contentViewController;
    editorVC.audioMessageChoice.selectedSegmentIndex = *(newAudioMessageChoiceIndex);
} 
```

我猜应用程序崩溃是因为您试图取消引用 small`NSInteger`作为指针。

重写：

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    SettingsEditorViewController * editorVC = 
            (SettingsEditorViewController *)popoverController.contentViewController;

    NSInteger newAudioMessageChoiceIndex = editorVC.audioMessageChoice.selectedSegmentIndex;

    editorVC.audioMessageChoice.selectedSegmentIndex = newAudioMessageChoiceIndex;
} 
```

你是否试图设置`selectedSegmentIndex`它自己的价值？在委托方法中设置弹出框的委托是没有意义的。

如果您希望`UISegmentedControl`在弹出会话之间保持状态，只需将其保存在调用者的属性中并`selectedSegmentIndex`在呈现之前设置：

```
@property NSInteger audioMessageChoiceIndex;

@synthesize audioMessageChoiceIndex;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   /* ... */
   SettingsEditorViewController *editorVC = (SettingsEditorViewController *)popoverController.contentViewController;
   editorVC.audioMessageChoice.selectedSegmentIndex = self.audioMessageChoiceIndex;
}

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    SettingsEditorViewController * editorVC = 
            (SettingsEditorViewController *)popoverController.contentViewController;
    self.audioMessageChoiceIndex = editorVC.audioMessageChoice.selectedSegmentIndex;
} 
```

# objective-c - Objective-C：自动发送电子邮件（AppleScript）

> ID：12782972
> 
> 赞同：0
> 
> 时间：2012-10-08T13:41:05.143
> 
> 标签：objective-c, cocoa, email, applescript

当出现问题时，我使用此代码发送自动错误消息，它工作正常，但它的行为有点有趣。我从[这个 SO question](https://stackoverflow.com/questions/5461648/send-email-from-cocoa)得到了代码。

```
- (void)sendEmailWithMail:(NSString *) toAddress withSubject:(NSString *) subject Attachments:(NSArray *) attachments { 
NSString *bodyText = @"Your body text \n\r";    
NSString *emailString = [NSString stringWithFormat:@"\
                         tell application \"Mail\"\n\
                         set newMessage to make new outgoing message with properties {subject:\"%@\", content:\"%@\" & return} \n\
                         tell newMessage\n\
                         set visible to false\n\
                         set sender to \"%@\"\n\
                         make new to recipient at end of to recipients with properties {name:\"%@\", address:\"%@\"}\n\
                         tell content\n\
                         ",subject, bodyText, @"McAlarm alert", @"McAlarm User", toAddress ];

//add attachments to script
for (NSString *alarmPhoto in attachments) {
    emailString = [emailString stringByAppendingFormat:@"make new attachment with properties {file name:\"%@\"} at after the last paragraph\n\
                   ",alarmPhoto];

}
//finish script
emailString = [emailString stringByAppendingFormat:@"\
               end tell\n\
               send\n\
               end tell\n\
               end tell"];

//NSLog(@"%@",emailString);
NSAppleScript *emailScript = [[NSAppleScript alloc] initWithSource:emailString];
[emailScript executeAndReturnError:nil];
[emailScript release];

/* send the message */
NSLog(@"Message passed to Mail");
} 
```

它撰写并发送一条指定主题和正文的新邮件，但它使撰写的邮件保持打开状态，我必须手动关闭撰写的邮件以及邮件本身。

关于如何告诉邮件自动关闭邮件及其本身的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:50:55.533

这是我的回答，对我来说效果很好。我的猜测是您的代码中某处存在错误。也许变量未初始化或格式错误？

尝试将静态 Apple Script 代码放入 Apple Script 编辑器并运行它以查看它是否适合您。如果确实如此，那么您的 Obj-C 代码应该有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T01:25:24.237

我认为只有当 Mail 是当时打开的全屏应用程序时才会出现此错误，但如果您关闭了窗口（但邮件仍在扩展坞中运行），您将不会收到仍然打开的撰写邮件消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T07:29:02.980

```
+ (void)sendEmailWithMail:(NSString *) toAddress withSubject:(NSString *) subject Attachments:(NSArray *) attachments withBody:(NSString*)str_Body
{
    @try
    {
        NSString *emailString = [NSString stringWithFormat:@"\
                                 tell application \"Mail\"\n\
                                 set newMessage to make new outgoing message with properties {subject:\"%@\", content:\"%@\" & return} \n\
                                 tell newMessage\n\
                                 set visible to false\n\
                                 set sender to \"%@\"\n\
                                 make new to recipient at end of to recipients with properties {name:\"%@\", address:\"%@\"}\n\
                                 tell content\n\
                                 ",subject, str_Body, @"", @"", toAddress ];

        //add attachments to script
        for (NSString *alarmPhoto in attachments)
        {
            emailString = [emailString stringByAppendingFormat:@"make new attachment with properties {file name:\"%@\"} at after the last paragraph\n\
                           ",alarmPhoto];
        }
        //finish script
        emailString = [emailString stringByAppendingFormat:@"\
                       end tell\n\
                       send\n\
                       end tell\n\
                       end tell"];

        NSAppleScript *emailScript = [[NSAppleScript alloc] initWithSource:emailString];
        [emailScript executeAndReturnError:nil];
        emailScript = nil;

        /* send the message */
        //    NSLog(@"Message passed to Mail");
    }
    @catch (NSException *exception)
    {
        NSLog(@"Error from sendEmailWithMail in Cls_Quiz_View.m : %@",exception);
    }
} 
```

# html - td 中的 div 和 Firefox 中的绝对定位

> ID：12782973
> 
> 赞同：1
> 
> 时间：2012-10-08T13:41:05.370
> 
> 标签：html, css, firefox

我有一个类似于[这个小提琴](http://jsfiddle.net/axEGM/3/)的情况。在 Firefox 中，绝对定位不能正常工作。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:45:21.207

也添加`position:relative`到表中：http: [//jsfiddle.net/axEGM/4/](http://jsfiddle.net/axEGM/4/)

你为什么混合表格和div？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:37:27.533

根据[帖子](https://stackoverflow.com/questions/5148041/does-firefox-support-position-relative-on-table-elements?lq=1)。更好的方法是通过在这个[小提琴](http://jsfiddle.net/axEGM/9/)上添加额外的 div 来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:45:02.453

这可能会有所帮助：

> #col { 位置：相对；显示：块；}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:45:51.187

我这样做了，它奏效了

```
div {

    position: absolute;
    width: 200px;
    background: green;
    top: 0px;
    left: 0px;
    margin-top: 100px;
} 
```

# dojo - Dojo 声明式与编程式创建 Select 元素与商店

> ID：12782976
> 
> 赞同：2
> 
> 时间：2012-10-08T13:41:12.687
> 
> 标签：dojo, separation-of-concerns

我正在尝试将 Select 元素与 Dojo 商店联系起来。Select 元素是在 HTML 中声明的，我试图在一些 JavaScript 代码中给它一个商店。

似乎[Dojo 文档](http://dojotoolkit.org/documentation/tutorials/1.8/selects_using_stores/)不建议这样做，并且支持在使用商店时以编程方式创建 Select 元素。然而，这对我来说是一个黄旗，因为我喜欢将 HTML 元素的创建与它们的行为分开。在这种情况下，如果我可以将 Select 元素保留在 HTML 中并在 JavaScript 中连接商店，那将是理想的选择。

Dojo 文档中的声明真的是“最佳实践”吗？我正在寻找经验丰富的 Dojo 开发人员的意见，因为我仍然对 Dojo 感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:15:39.233

直觉上，人们会`select.set("store", store)`像所有小部件一样将存储分配/更改为 dijit [`dojo/Stateful`](http://dojotoolkit.org/reference-guide/1.8/dojo/Stateful.html)，但令人惊讶的是它不起作用。

无论如何，有一种方法[`select.setStore(store, selectedValue, fetchArgs)`](https://github.com/dojo/dijit/blob/master/form/_FormSelectWidget.js)（也令人惊讶）未被弃用并且有效。

定义`dijit/form/Select`没有商店：

```
<select id="select1" data-dojo-type="dijit/form/Select"></select>​ 
```

为其分配一个商店：

```
require([
    "dojo/ready",
    "dijit/registry",
    "dojo/store/Memory",
], function(
    ready, registry, Memory
) {

    ready(function() {

        var store1 = new Memory({
            idProperty: "value",
            data: [
                { value: "AL", label: "Alabama" },
                { value: "AK", label: "Alaska" },
                { value: "AZ", label: "Arizona" }
            ]           
        });

        var select1 = registry.byId("select1");
        select1.set("labelAttr", "label");
        select1.setStore(store1, "AZ");       
    });
}); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/ZmsY ​​V/](http://jsfiddle.net/phusick/ZmsYV/)

将一些[UX](http://en.wikipedia.org/wiki/User_experience)糖添加到上述我将`dijit/form/Select` `disabled`使用单个选项创建，例如*Loading...*及其最终期望`width`：

```
<select
    id="select1"
    data-dojo-type="dijit/form/Select"
    data-dojo-props="disabled:true"
    style="width:150px;"
>
    <option>Loading...</option>
</select>​ 
```

然后我会在调用后启用它`setStore()`：

```
var select1 = registry.byId("select1");
select1.set("labelAttr", "label");
select1.setStore(store1);
select1.set("disabled", false); 
```

在工作中查看此增强版：http: [//jsfiddle.net/phusick/xdDEm/](http://jsfiddle.net/phusick/xdDEm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:14:38.837

以声明方式调试错误的存储数据/定义可能会变得非常讨厌。此外，当您尝试按照声明式构建的选择/存储组合创建多个相同的小部件时，您可能会遇到奇怪的烦恼。例如（伪代码）：

```
<div dojotype="dojox.data.QueryReadStore" url="someurl/blah.do" jsId="mystore"/>
<select dojotype="dijit.form.FilteringSelect" store="mystore">
</select> 
```

理论上，通过将 mystore 绑定到 select 来执行您想要的操作，但是如果您要创建多个此小部件，您将与“mystore”发生 id 冲突。作为一种解决方法，您必须为 jsId 和商店的 id 执行类似 jsId="${id}_mystore" 的操作。

如果您想保持声明性行为，一种选择是为您的商店和您的选择都拥有附加点，那么您可以在初始化后简单地调用 selectwidget.set("store",mystore) 。

# maven - Maven：在 POM 中包含外部 JAR

> ID：12782977
> 
> 赞同：1
> 
> 时间：2012-10-08T13:41:13.240
> 
> 标签：maven, jar, dependencies, pom.xml, dspace

我知道以前有人问过并回答过这样的问题，并且花时间阅读了这些主题，但不知何故它们对我没有帮助。我在[DSpace](http://www.dspace.org)软件中本地添加了自己的 Java 代码，并且我的代码依赖于另一个库，所以我必须将这个库 (JAR) 包含到`<dependencies>`POM 的部分中，对吗？这是我的条目的样子：

```
<dependency>
        <groupId>de.mannheim.ids</groupId>
        <artifactId>pid</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <systemPath>/absolute/path/to/jar/pid-client-0.0.1-SNAPSHOT.jar</systemPath>
        <scope>system</scope>
</dependency> 
```

这无济于事，但会导致编译错误 - 找不到相关的类。我也试过`mvn install:install-file -Dfile...`，它告诉我 jar 一切都很好（BUILD SUCCESS），但随后`mvn package`失败并出现通常的错误。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:16:35.030

使用后您应该可以像往常一样使用该工件`mvn install:install`。

如果该命令返回构建成功，您应该能够在您的 pom 中使用它：

```
<dependency>
        <groupId>de.mannheim.ids</groupId>
        <artifactId>pid</artifactId>
        <version>0.0.1-SNAPSHOT</version>
</dependency> 
```

Maven 会像在本地存储库中找到任何 jar 一样找到它。

# c# - 需要在 ajax.beginform 中使用 asp.net mvc3 html5 razor 进行上传控制

> ID：12782978
> 
> 赞同：0
> 
> 时间：2012-10-08T13:41:12.707
> 
> 标签：c#, asp.net, asp.net-mvc-3, html, razor

我已经为此寻找了很长时间，但我仍然卡住了，我需要一个上传控件，用户可以在其中上传文档并提供其他信息。

我之前必须在没有上传控件的情况下执行此操作，所以我要做的是得到一个 ajax.beginform，它将用户的所有输入提供给控制器，然后通过 onsucces 函数关闭弹出窗口，所以看起来像这样：

看法：

```
@using (Ajax.BeginForm("Save", "Documents", new AjaxOptions { HttpMethod = "Post", OnSuccess = "CloseDialog" }, new { @class = "form-inline", id = "FormId" }))
{
    @Html.Label("Description", "Description")
            <div class="span3">
                @Html.TextBoxFor(m => m.Description)
            </div> 

} 
```

我尝试在那里添加一个 Html.BeginForm 但后来我发现无法使用嵌套表单所以我删除了它。

在我的控制器中，我有：

```
public PartialViewResult Index(string description)
{
     var model = new DocumentsModel{ Description = description};

     return PartialView(model);
}

[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase file, string description)
{
     if (file != null && file.ContentLength > 0)
     {
         var fileName = Path.GetFileName(file.FileName);
         var path = Path.Combine(Server.MapPath(@"D:\Documentds\"), fileName);
         file.SaveAs(path);
     }
     return RedirectToAction("Index", new { description = description });
} 
```

当然，因为 html.beginform 不起作用，所以这个控制器操作也不起作用所以我的问题是如何在不必使用 html.beginform 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:00:30.493

您需要在表单中上传文件，并且还需要在表单上调用 uploadfile 的 enctype="multipart/form-data" 属性。这可能是一个问题。

此外，您可以使用 JavaScript 从页面的另一部分提交您想要的表单，而无需嵌套它们并保留您的设计。

# php - PDF 上传器脚本

> ID：12782980
> 
> 赞同：2
> 
> 时间：2012-10-08T13:41:16.127
> 
> 标签：php, security, pdf, upload, file-rename

我花了 3 天时间阅读和做关于 PHP 上传脚本的教程，用于将 PDF 文件上传到网站、重命名和移动文件。我似乎无法找到关于如何格式化脚本的一致答案。从我的阅读中，我认为以下内容对这个过程很重要。我还没有找到 PDF 上传问题的有效答案。

1.  使用服务器端 mime 验证来验证 PDF 文件很重要。
2.  Clamscan 对于保持网站清洁很重要。这应该在上传后立即完成吗？
3.  在通过类型和无病毒验证文件之前，不应访问文件。我的理解是，这最好通过 PHP 的“重命名”功能来完成，该功能将允许移动和重命名。
4.  我曾考虑将 PDF 上传到我的 MySql 数据库中，但在阅读了很多在线建议后，我现在觉得这可能不是我的网站的最佳选择。

5.  我将让客户通过 html 表单上传 pdf。

这是我使用的表格：

```
 <form action ="PHP UPLOAD.php" method="post" encrypte="multipart/form-data">
    File: <input type="file" name="file" size="30"> <input type="submit" value="upload!">
    </form> 
```

这是我从在线教程开始的 PHP。

```
<?php

$uploaddir = "cover";
$allowed_ext = "pdf";
$max_size = "5000000";
//$max_height = "";
//$max_width = "";

$extension = pathinfo($_FILES['file'] ['name']);
$extension = $extension[extension];
$allowed_paths = explode(", ", $allowed_ext);
for($i = 0; $i < count($allowed_paths); $i++) {
if ($allowed_paths [$i] == "$extension") {
    $ok = "1";
}
}

if ($ok == "1")  {
    if($_FILES['file']['size'] > $max_size)
    {
        print "File is too big!";
        exit;
    }

// Include for images
//if ($max_width && $max_height) {
//list ($width, $height, $type, $w) =
//getimagesize($_FILES['file']['tmp_name']);
//if ($width . $max_width || $height > $max_height)
//{
//print "File height and/or width are too big!";
//exit;
//}
//}

if(is_uploaded_file($_FILES['file']['tmp_name']))
{
move_uploaded_file($_FILES['file']['tmp_name'],$uploaddir.'/'.$_FILES['file']['name']);
}
print "Your Cover Letter has been successfully uploaded!";
} else {
print "Incorrect file extension!";
}

?> 
```

它向我返回了无效的文件类型消息。

我找到了这段代码，它似乎是通过 Mime Type 更好的验证，但似乎并不完整。

```
$allowedExts = array(
  "pdf", 
  "doc", 
  "docx"
); 

$allowedMimeTypes = array( 
  'application/msword',
  'text/pdf',
  'image/gif',
  'image/jpeg',
  'image/png'
);

$extension = end(explode(".", $_FILES["file"]["name"]));

if ( 20000 < $_FILES["file"]["size"]  ) {
  die( 'Please provide a smaller file [E/1].' );
}

if ( ! ( in_array($extension, $allowedExts ) ) ) {
  die( 'Please provide another file type [E/2]. );
}

if ( in_array( $_FILES["file"]["type"], $allowedMimeTypes ) ) 
{      
 move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]); 
}
else
{
die( 'Please provide another file type [E/3]. );
} 
```

我正在努力学习，但我似乎无法找到一条非常明确的路径来解决我的问题。有人可以给我一些关于 PDF 上传和这个过程有什么特别之处的明确答案吗？

对于背景，我正在使用 MAMP 和 Dreamweaver & Text Wrangler 在我的 MAC 上构建它。我将在 GoDAddy 网站上实现这一点。因此，如果您知道我将面临的问题，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:46:27.700

我认为错误消息是因为您错过键入[`enctype`](http://www.w3schools.com/tags/att_form_enctype.asp)为加密，请也检查一下

```
<form action ="PHP_UPLOAD.php" method="post" enctype="multipart/form-data">
File: 
<input type="file" name="file" size="30"> 
<input type="submit" value="upload!">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-02T00:00:38.183

嗨，通过 Mime Type 进行验证的第二个代码，但似乎并不完整。

```
$allowedExts = array(
  "pdf", 
  "doc", 
  "docx"
); 

$allowedMimeTypes = array( 
  'application/msword',
  'application/pdf',
  'text/pdf',
  'image/gif',
  'image/jpeg',
  'image/png'
);

$nameexploded = explode(".", $_FILES["file"]["name"]);
$extension = end($nameexploded);

if ( 9000000 < $_FILES["file"]["size"]  ) {
  die( 'Please provide a smaller file [E/1].' );
}

if ( ! ( in_array($extension, $allowedExts ) ) ) {
  die( 'Please provide another file type [E/2].' );
}

if ( in_array( $_FILES["file"]["type"], $allowedMimeTypes ) ) 
{      
 move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]); 
}
else
{
    die( 'Please provide another file type [E/3].' );
} 
```

我使用 $nameexploded 来避免： 注意：只有变量应该在第 16 行的 filepath\test.php 中通过引用传递。

这对我很有用。希望能帮助某人。

# jquery - jQuery 灯箱 0.5 调整大小？

> ID：12782983
> 
> 赞同：1
> 
> 时间：2012-10-08T13:41:25.173
> 
> 标签：jquery, resize, lightbox

我正在使用来自[http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)的灯箱 jquery 版本- 任何人都可以帮助我在调整大小时使用视口动态调整大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:48:12.777

尝试这个

```
$(window).resize(function() {
  $('#gallery a').lightBox();
}); 
```

# asp.net-mvc - 试图弄清楚 Ajax.BeginForm

> ID：12782985
> 
> 赞同：0
> 
> 时间：2012-10-08T13:41:33.847
> 
> 标签：asp.net-mvc

我有 2 个部分的视图。顶部我输入字段并提交以保存它们。在第二部分中，我有一个自动完成文本框。我在自动完成中选择了一个项目，当我单击提交时，我想将该项目添加到数据表中。因此，对于第一部分，当我单击提交时，我通过控制器上的 HttpPost 方法保存详细信息。对于第二部分，我打算通过控制器的 Ajax 调用来保存它，然后带回带有结果的局部视图。我还没有对部分视图进行编码，这是下一个。现在我是 Ajax.BeginForm 的新手，我正在为此苦苦挣扎。我希望 Ajax.BeginForm 中的提交按钮只适用于表单的那一部分。但实际上它为整个表单调用了 HttpPost 方法。那么我该如何解决呢？我的观点看起来像；

```
@using ITOF.HtmlHelpers
@model ITOF.Models.OngoingContractViewModel
@{
    ViewBag.Title = "EditOngoingContractDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
    @using (Html.BeginForm("EditOngoingContractDetails", "Contract", FormMethod.Post,
         new { enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary(true)
        @Html.HiddenFor(model => model.Contract.ContractId)
        <h1>Edit Ongoing Contract Details</h1>
        <fieldset>
            <legend>@Model.Contract.Heading</legend>
            <p>Where you see <span class="error">*</span> you must enter data.</p>
            <table>
                <tr>
                    <td style="text-align: right">
                        @Html.LabelFor(model => model.Contract.EndDate)
                    </td>                    
                    <td>
                        @Html.EditorFor(model => model.Contract.EndDate)
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right">
                        @Html.LabelFor(model => model.Contract.Organogramme)    
                    </td>
                    <td>
                        <input type="file" id="PDF" name="file" />
                        @Html.HiddenFor(model => model.Contract.Organogramme)
                    </td>
                </tr>
                @if (!string.IsNullOrWhiteSpace(Model.Contract.Organogramme))
                {
                    <tr>
                        <td></td>
                        <td>
                            The current organogramme is <span class="HighlightTextRed">@Model.GetOrganogrammeName()</span> 
                            for the contract <span class="HighlightTextRed">@Model.Contract.ContractName</span><br/>
                            <a href="@Model.Contract.Organogramme" target="_blank">Click here to see the last saved organogramme</a> 
                        </td>
                    </tr>
                }
                <tr>
                    <td style="text-align: right">
                        @Html.LabelFor(model => model.Contract.AssistantRLOManagerId)
                    </td>                    
                    <td>
                        @Html.DropDownListFor(model => model.Contract.AssistantRLOManagerId, Model.AssistantRloManagerSelectList, "--N/A--")
                    </td>                   
                </tr>
                @if (this.TempData["SuccessMessage"] != null)
                {
                    <tr>
                        <td colspan="2" class="success">@this.TempData["SuccessMessage"].ToString()</td>
                    </tr>
                }
                <tr>
                    <td colspan="2" style="padding-top: 20px; text-align: center;"><input type="submit" value="Save" /></td>
                </tr>
            </table>
        </fieldset>

        <fieldset>
            <legend>Add an existing Site to this contract: </legend>
            @using (Ajax.BeginForm("AddExistingSite", new AjaxOptions { UpdateTargetId = "siteRows" }))
            {

                <input type="text" name="q" style="width: 800px" 
                       data-autocomplete="@Url.Action("SiteSearch", "DataService", new { contractId = @Model.Contract.ContractId })" />
                <input type="submit" value="Add site to contract" />
            }

            @if (Model.SiteList.Count > 0)
            {
                <table id="siteDataTable" class="display">
                    <thead>
                        <tr>
                            <th>Main Site?</th>
                            <th>Type</th>
                            <th>Address</th>
                            <th>Map</th>
                            <th>Telephone</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody id="siteRows">
                        @foreach (var item in Model.SiteList)
                        {
                            <tr id="@item.SiteContract.SiteContractId">
                                <td>@item.SiteContract.MainSiteFlag</td>
                                <td>@item.Site.SiteType</td>
                                <td>@item.Site.Address</td>
                                <td>@item.Site.MapUrl</td>
                                <td>@item.Site.Telephone</td>
                                <td>@item.Site.Email</td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="add_delete_toolbar" />
            }
            @Html.ListLink("Back to List") 
        </fieldset>
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:45:52.967

哦不，你不能嵌套 HTML 表单。这是不支持的。您将不得不重新考虑您的设计。这真的与 ASP.NET MVC 和类似`Html.BeginForm`or `Ajax.BeginForm`. HTML 规范只是告诉您`<form>`标签不能嵌套，如果您嵌套它，您将获得可能因浏览器而异的未定义行为。

例如，您可以使用[jquery UI 自动完成插件](http://jqueryui.com/demos/autocomplete/)实现自动完成功能并摆脱`Ajax.BeginForm`.

# vb.net - 从 DatagridView 插入数据到 Access 数据库 VB.NET

> ID：12782988
> 
> 赞同：0
> 
> 时间：2012-10-08T13:41:38.260
> 
> 标签：vb.net

我无法将 DataGridView 中的数据插入 Access 数据库。它显示 INSERT INTO 语句中的语法错误。请帮我。这是我的代码：

```
Try
    com = New OleDb.OleDbCommand
    com.Connection = con
    Dim atdate As Date
    Dim id As String
    Dim name As String
    Dim time As String
    Dim status As String
    For x As Integer = 0 To ATCGRID.Rows.Count - 1
      atdate = ATCGRID.Rows(x).Cells(2).Value
      id = ATCGRID.Rows(x).Cells(0).Value
      Name = ATCGRID.Rows(x).Cells(1).Value
      time = ATCGRID.Rows(x).Cells(3).Value
      status = ATCGRID.Rows(x).Cells(4).Value
      con.Open()
      str1 = "INSERT INTO EMP_ATTENDANCE(DATE,EMP_ID,EMP_NAME,EMP_TIME,EMP_STATUS)values(@DATE,@EMP_ID,@EMP_NAME,@EMP_TIME,@EMP_STATUS)"
      Dim com As New OleDb.OleDbCommand(str1, con)
      com.Parameters.AddWithValue("@DATE", atdate)
      com.Parameters.AddWithValue("@EMP_ID", id)
      com.Parameters.AddWithValue("@EMP_NAME", Name)
      com.Parameters.AddWithValue("@EMP_TIME", time)
      com.Parameters.AddWithValue("@EMP_STATUS", status)
      com.ExecuteNonQuery()
      com.Dispose()
    Next 
    con.Close()
    MessageBox.Show("Registered Successfully!", "Register", MessageBoxButtons.OK, MessageBoxIcon.Information)
Catch ex As OleDb.OleDbException
     MsgBox(ex.Message, MsgBoxStyle.Critical, "Oledb Error")
Catch ex As Exception
    MsgBox(ex.Message, MsgBoxStyle.Critical, "General Error")
End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:55:05.407

“日期”很可能是一个关键字。尝试将它放在括号中：`[DATE]`在您的 SQL 文本中。

# objective-c - 使用获取的请求排序描述符

> ID：12782997
> 
> 赞同：2
> 
> 时间：2012-10-08T13:42:15.703
> 
> 标签：objective-c, ios, web-services, core-data, nsfetchrequest

我的排序描述符有问题。我正在获取一个足球俱乐部的排名。这就是我的网络服务返回数据的方式。

```
"ranking": [

    {
        "type": "competitie",
        "position": "1",
        "name": "Club Brugge",
        "gamesPlayed": "10",
        "gamesWon": "6",
        "gamesTied": "4",
        "gamesLost": "0",
        "goalsPos": "25",
        "goalsNeg": "12",
        "goalsDiff": 13,
        "points": "22"
    } 
```

这是我的获取请求。

```
- (void)getKlassement // attaches an NSFetchRequest to this UITableViewController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Klassement"];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"position" ascending:YES]];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.genkDatabase.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

} 
```

现在排名如下。1,11,12,13,14,2,3,4,5... 我认为问题是位置是我的网络服务中的字符串。我的排序描述符将其视为一个字符串。但实际上它应该将其视为一个整数。有人知道我该怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:55:35.390

即使“位置”是作为 Web 服务的字符串提供的，最好的解决方案是将其存储为核心数据模型中的数字（“整数 32”或类似的）。对象的相应属性将是`NSNumber`并且它会被正确排序。

如果您真的不能这样做，您可以尝试使用比较功能*作为解决方法。*`localizedStandardCompare`我认为根据数值对包含数字的字符串进行排序。

```
[NSSortDescriptor sortDescriptorWithKey:@"position" ascending:YES
    selector:@selector(localizedStandardCompare:)] 
```